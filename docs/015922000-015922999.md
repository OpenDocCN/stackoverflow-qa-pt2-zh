# StackOverflow 问答 15922000-15922999

# asp.net - 如何在 asp.net 中将函数处理与 updateprogress 控件绑定？

> ID：15922010
> 
> 赞同：0
> 
> 时间：2013-04-10T09:29:57.963
> 
> 标签：asp.net, database, c#-4.0, updatepanel, updateprogress

单击按钮功能不会被触发。为什么会这样。

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>

<asp:UpdateProgress ID="UpdateProgress1" runat="server"
                    AssociatedUpdatePanelID="UpdatePanel1">
    <ProgressTemplate>
        <asp:Image ID="Image1" runat="server" 
                   ImageUrl="~/images/ajax-progress.gif"
                   />
                <br />
                Please Wait. This will take few minutes.
    </ProgressTemplate>
</asp:UpdateProgress>

<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
        <asp:Button ID="btnUpdate" runat="server" 
                    Text="Update" 
                    onclick="btnUpdate_Click" 
                    Width="100px" />
    </ContentTemplate>
</asp:UpdatePanel> 
```

* * *

后面的代码：

```
protected void btnUpdate_Click(object sender, EventArgs e)
{        
    trunc();
    ConsumerUpld(FileUpload1);     
} 
```

`ConsumerUpld(fileupld)`函数更新数据库中的表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:55:13.713

一切都很好，所以我通过替换它来测试你的代码 `btnUpdate.Text = "updated";`

```
protected void btnUpdate_Click(object sender, EventArgs e)
{
    btnUpdate.Text = "updated";
    //trunc();
    //ConsumerUpld(FileUpload1);
} 
```

一切运行顺利，因此您的问题在您调用的 2 个函数之一内。

当异步回发期间发生错误时，它会显示在浏览器页面的按钮上（显示方式取决于您的浏览器）。您应该尝试使用断点调试它或注释掉更新面板以查看发生了什么。

# c# - 列出 Foreach 参数化委托

> ID：15922017
> 
> 赞同：3
> 
> 时间：2013-04-10T09:30:10.753
> 
> 标签：c#, generics

我正在尝试为列表的每个成员调用一个函数，但将其他参数传递给委托。

如果我有一个名为的列表`documents`

```
List<string> documents = GetAllDocuments(); 
```

现在我需要遍历文档并为每个条目调用一个方法。我可以使用类似的东西来做到这一点

```
documents.ForEach(CallAnotherFunction); 
```

这将需要`CallAnotherFunction`有一个定义，如

```
public void CallAnotherFunction(string value)
{
    //do something
} 
```

但是，我需要调用另一个参数`CallAnotherFunction`，例如`content`，它取决于调用列表。

所以，我理想的定义是

```
public void CallAnotherFunction(string value, string content)
{
    //do something
} 
```

我想将内容作为 ForEach 调用的一部分传递

```
List<string> documents = GetAllDocuments();
documents.ForEach(CallAnotherFunction <<pass content>>);

List<string> templates = GetAllTemplates();
templates.ForEach(CallAnotherFunction <<pass another content>>); 
```

有没有一种方法可以实现这一点而无需定义不同的函数或使用迭代器？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T09:32:56.703

使用 lambda 表达式而不是方法组：

```
List<string> documents = GetAllDocuments();
documents.ForEach( d => CallAnotherFunction(d, "some content") );

List<string> templates = GetAllTemplates();
templates.ForEach( t => CallAnotherFunction(t, "other content") ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:32:20.633

使用 lambda 表达式：

```
string content = "Other parameter value";
documents.ForEach(x => CallAnotherFunction(x, content)); 
```

# linux - 如何在 Ubuntu 上的文件中使用逻辑 AND 条件搜索关键字？

> ID：15922024
> 
> 赞同：0
> 
> 时间：2013-04-10T09:30:21.200
> 
> 标签：linux, search, ubuntu, grep

我一直在尝试在我的 Ubuntu 文件中搜索多个关键字。我知道如何为一个文件执行此操作：

```
find /[myRep] -type f | xargs grep -rl "myFunction" 
```

我想对两个关键字（例如`myFunction`and `myClass`）进行此操作，以获取所有可以`myFunction`在`myClass`.

我尝试使用：

```
find /[myRep] -type f | xargs grep -rl "myFunction" | xargs grep -rl "myClass" 
```

我得到了结果，但我不确定这是否准确。另外，我想知道是否有一种简单的方法可以在搜索中添加更多的逻辑条件，例如“OR”或“NOT”命令......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T14:16:04.943

## 对逻辑 OR 条件使用正则表达式替换

如果您尝试查找包含“myFunction”或“myClass”的文件，您可以使用带有交替的扩展正则表达式 例如：

```
# Using GNU Find and GNU Grep
find . exec grep --extended-regexp --files-with-matches 'myFunction|myClass' {} + 
```

当将文件列表传递给 grep 时，这将显示包含任一单词的匹配文件。

## 逻辑与更棘手

逻辑 AND 比较棘手，因为您必须考虑排序。您可以：

1.  根据一组要求过滤文件，然后是另一组。
2.  使用功能更全的程序来存储状态。

作为第一种情况的一个简单示例：

```
# Use nulls to separate filenames for safety.
find /etc/passwd -print0 |
    xargs -0 egrep -Zl root |
    xargs -0 egrep -Zl www 
```

作为第二种情况的人为示例，您可以使用 GNU awk：

```
# Print name of current file if it matches both alternates
# on different lines.
find /etc/passwd -print0 |
    xargs -0 awk 'BEGIN {matches=0};
                  /root|www/ {matches+=1};
                  matches >= 2 {print FILENAME; matches=0; nextfile}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:42:17.413

你的命令对我来说很好。您首先 grep 所有文件以查找包含“myFunction”的文件，然后通过另一个 grep 将它们传递给“myClass”。因此，您最终会得到同时包含“myFunction”和“myClass”的文件。

# sql - 不能截断表

> ID：15922025
> 
> 赞同：1
> 
> 时间：2013-04-10T09:30:22.880
> 
> 标签：sql, sql-server-2008, truncate

当我尝试截断表格时，我收到如下错误消息，

```
**Cannot truncate table 'Locations' because it is being referenced by a FOREIGN KEY constraint.** 
```

我不知道那个查询..任何人帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:45:09.920

需要注意的一件事 - 当您截断标识列时会重置。当你删除它不会。因此，如果您执行删除并且最后一个值为 242，则下一个值将是 243。

进行截断的唯一方法是删除关系。就个人而言 - 我只是删除而不是删除所有关系然后将它们放回去。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:39:58.490

**为什么？**

原因是 TRUNCATE 在没有单独检查的情况下删除了所有记录。

因此，DELETE FROM Locations 将删除每条记录（这就是事务日志中记录的内容），检查是否违反了任何约束。

TRUNCATE TABLE Locations 不这样做。执行（并记录）单个截断操作，这就是它更快的原因。

有关更多信息，请参阅[本文](http://www.mssqltips.com/sqlservertip/1080/deleting-data-in-sql-server-with-truncate-vs-delete-commands/)。

**解决方法**

最简单的方法是删除而不是截断。但是如果这有很长的执行时间，并且删除约束是安全的，您可能需要编写一个脚本来删除约束、截断表、创建约束。

# c# - C# 将十六进制字符串转换为字节

> ID：15922035
> 
> 赞同：1
> 
> 时间：2013-04-10T09:30:40.477
> 
> 标签：c#

对此有点卡住，我有一个名为 PORTBhex 的变量，其值在 0x00 到 0x3F 范围内，通过 USB 写入外部设备。我遇到的问题是将值放入这段代码中：

```
public bool PORTBwrite()
        {
            Byte[] outputBuffer = new Byte[65];
            outputBuffer[0] = 0;
            outputBuffer[1] = 0x00; //Command tells PIC18F4550 we want to write a byte

            outputBuffer[0] = 0;
             //Must be set to 0

            outputBuffer[2] = IO.PORTBhex;
                 //Hex value 0x00 - 0x3F to write to PORTB
                 //above line gives the error cannot implicity convert string - byte
                 //IO.PORTBhex is returned from the code in second snippet

            if (writeRawReportToDevice(outputBuffer))
             {
                 return true; //command completed OK

             }else{

                 return false; //command failed .... error stuff goes here

             }
        } 
```

现在的问题是我拥有的值是一个整数，它使用以下方法转换为十六进制：

```
 public static string ToHex(this int value)
{
    return string.Format("0x{0:X}", value);
} 
```

该值以整数开始并转换为十六进制但是我不能使用转换后的值作为我得到的错误类型不能将类型“字符串”隐式转换为“字节”。

知道我能做些什么来解决这个问题吗？

谢谢

编辑：

我想我可能没有很好地描述我想要实现的目标，我有一个 int 变量，其值在 0-255 范围内，我必须将其转换为必须格式化为 0x00 到 0xFF 范围内的十六进制，然后将 outputBuffer[2] 设置为该值以发送到微控制器。

整数 var 在需要转换之前对其进行了一些数学运算，因此我不能单独使用字节变量，并且必须在之后转换为十六进制字节。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:33:33.760

解决方案是更改`PORTBhex`为类型`byte`并且根本不使用该`ToHex`方法：

而不是`IO.PORTBhex = ToHex(yourIntValue)`使用这个：

```
IO.PORTBhex = checked((byte)yourIntValue); 
```

如果你也能做成`yourIntValue`type就更好`byte`了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:36:38.980

```
outputBuffer[2] = Convert.ToByte(IO.PORTBhex, 16); 
```

虽然我个人可能首先会尝试避免使用字符串，而只是存储`byte`

# c++ - 从本机应用程序访问 chrome 内的 DOM

> ID：15922037
> 
> 赞同：0
> 
> 时间：2013-04-10T09:30:47.853
> 
> 标签：c++, windows, winapi, google-chrome, automation

我需要访问在 Chrome 浏览器中运行的 Web 应用程序的 DOM。使用 SHDocVw::ShellWindows 和 SHDocVw::IWebBrowser2 可以通过 IE 轻松实现相同的功能。现在我必须支持谷歌浏览器，似乎没有简单的方法来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:35:34.660

Chrome 浏览器不会将其 DOM 暴露给外部进程。你需要在过程中。因此，为了访问 Chrome 浏览器的 DOM，您需要位于 Chrome 扩展程序中。

# java - Java 中的 Adwords API、OAuth2 和服务帐户

> ID：15922038
> 
> 赞同：1
> 
> 时间：2013-04-10T09:30:51.183
> 
> 标签：java, google-ads-api

我已切换到 OAuth2 身份验证来访问 Adwords API。我想使用服务帐户，因为我们的应用程序没有用户交互。因此，我在 Google API 控制台中为 mcc 帐户创建了一个服务帐户。并使用：

```
GoogleCredential credential = new GoogleCredential.Builder()
.setTransport(new NetHttpTransport())
.setJsonFactory(new JacksonFactory())
.setServiceAccountId("..@developer.gserviceaccount.com")
.setServiceAccountScopes("https://adwords.google.com/api/adwords/")
.setServiceAccountPrivateKeyFromP12File(file)
.setServiceAccountUser("<MCC Account Email")
.build(); 
```

创建凭据。

当我现在尝试进行 API 调用或只是调用`credential.refreshToken()`时，我得到：

```
com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
{
  "error" : "access_denied"
}
at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:105)
at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:303)
at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:323)
at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:345)
at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:526) 
```

..

谁能告诉我，我做错了什么或者我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:54:47.537

不能从您发布的代码中说，我在我的应用程序中使用完全相同的方式，一切正常。

我的 jar 版本是：

```
 google-api-services-oauth2-v2-rev9-1.7.2-beta.jar
 google-http-client-1.12.0-beta.jar
 google-oauth-client-1.12.0-beta.jar 
```

如果您没有想法，请尝试更改 oauth2 库的版本。

# javascript - 如何将此 js.erb 更改为 haml

> ID：15922040
> 
> 赞同：3
> 
> 时间：2013-04-10T09:30:58.873
> 
> 标签：javascript, jquery, ruby, ajax

```
$('body').replaceWith('<%= escape_javascript(render(:partial => 'search_result2', :query => @result_query)) %>'); 
```

我想在`.html.haml`JavaScript 中使用它，

```
$('body').replaceWith('<%= escape_javascript(render(:partial => 'search_result2', :query => @result_query)) %>'); 
```

如何更改此行

```
<%= escape_javascript(render(:partial => 'search_result2', :query => @result_query)) %> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T09:36:05.950

尝试这个

```
#{ escape_javascript(render(:partial => 'search_result2', :query => @result_query)) } 
```

# c# - 如何验证一个十进制数的精度正好是一个？

> ID：15922041
> 
> 赞同：0
> 
> 时间：2013-04-10T09:31:03.983
> 
> 标签：c#

我需要验证用户对文本框的输入是否精确到十进制数？例如下面是一些案例..

*   如果用户输入 1 则无效

*   如果用户输入 0 则无效

*   如果用户输入 1.0 那么它是有效的

*   如果用户输入 1.1 那么它是有效的

*   如果用户输入 1.11 则无效

*   如果用户输入 100.1 那么它是有效的

如何使用 C#(.net 3.5) 实现这一目标？

它是一个 WPF 文本框。

谢谢，-迈克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:36:02.383

对我来说，最简单的方法似乎是使用正则表达式。通过将用户输入解释为字符串，您可以将其与类似的内容进行比较`'[0-9]+\.[0-9]'`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T09:42:52.547

对于实现此目的的非正则表达式方式：

```
string input;
decimal deci;
if (input.Length >=3 && input[input.Length - 2].Equals('.') && Decimal.TryParse(input , out deci))
{
    // Success
}
else
{
    // Fail
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:41:10.347

是的，正则表达式是检查您的状况的最佳方法：

对于确切的 NNNN.N (1234.5) 使用：

```
/^\d{4}\.\d$/ 
```

对于可选的 .N (1234 1234\. 1234.5)，请使用：

```
/^\d{4}(\.\d?)?$/ 
```

对于大小不超过 NNNN.N (1 .5 12.5 123\. 1234 1234.5) 的数字，请使用：

```
/^(?=.*\d)\d{0,4}(\.\d?)?$/ 
```

如果您想在开头允许 +/-，则将 ^ 替换为 ^[-+]?。

# swfupload - SWFUpload_0_0。HTTP 状态：500

> ID：15922048
> 
> 赞同：0
> 
> 时间：2013-04-10T09:31:19.987
> 
> 标签：swfupload

SWFUpload 版本：2.5.0 2010-01-15 Beta 2 Flash Player 版本：操作系统：Windows 7、Windows server 2008R2 浏览器：IE、Chrome

描述：当我尝试上传最大 4 MB 的文件时没有问题。仅当大小超过 4 MB 时：请参阅此处的调试信息：

---SWFUpload Instance Info--- 版本：2.5.0 2010-01-15 Beta 2 电影名称：SWFUpload_0 设置：use_query_string：false requeue_on_error：false http_success：
assume_success_timeout：0 file_post_name：Filedata post_params：[object Object] file_types *：.* file_types_description：所有文件 file_size_limit：20 MB file_upload_limit：10 file_queue_limit：1 调试：true prevent_swf_caching：true button_placeholder_id：uploadButtonPlaceHolder1 button_placeholder：未设置 button_width：200 button_height：19 button_text：Selecteer

---SWFUpload Instance Info--- 版本：2.5.0 2010-01-15 Beta 2 电影名称：SWFUpload_1 设置：use_query_string：false requeue_on_error：false http_success：
assume_success_timeout：0 file_post_name：Filedata post_params：[object Object] file_types *：。* file_types_description：所有文件 file_size_limit：20 MB file_upload_limit：15 file_queue_limit：15 debug：true prevent_swf_caching：true button_placeholder_id：uploadButtonPlaceHolder2 button_placeholder：未设置 button_width：200 button_height：19 button_text：Selecteer

SWF 调试：SWFUpload 初始化完成 SWF 调试：SWF 调试：----- SWF 调试输出 ---- SWF 调试：版本：2.5.0 2010-02-17 Beta 3 SWF 调试：电影名称：SWFUpload_0 SWF 调试：文件类型字符串： *。* SWF 调试：已分析的文件类型：
SWF 调试：HTTP 成功：0 SWF 调试：文件类型说明：所有文件 ( *.*) SWF DEBUG: 文件大小限制: 20971520 字节 SWF DEBUG: 文件上传限制: 10 SWF DEBUG: 文件队列限制: 1 SWF DEBUG: Post Params: SWF DEBUG: ----- END SWF DEBUG OUTPUT ---- SWF DEBUG : 删除 Flash 函数挂钩（这应该只在 IE 中运行并且应该防止内存泄漏） SWF DEBUG: SWFUpload Init Complete SWF DEBUG: SWF DEBUG: ----- SWF DEBUG OUTPUT ---- SWF DEBUG: Version: 2.5.0 2010-02-17 Beta 3 SWF 调试：movieName：SWFUpload_1 SWF 调试：文件类型字符串： *.* SWF 调试：已分析的文件类型：
SWF 调试：HTTP 成功：0 SWF 调试：文件类型说明：所有文件 ( *.*) SWF DEBUG: 文件大小限制: 20971520 字节 SWF DEBUG: 文件上传限制: 15 SWF DEBUG: 文件队列限制: 15 SWF DEBUG: Post Params: SWF DEBUG: ----- END SWF DEBUG OUTPUT ---- SWF DEBUG ：删除 Flash 函数挂钩（这应该只在 IE 中运行并且应该防止内存泄漏） SWF DEBUG：Stage Resize：190 by 18 SWF DEBUG：Stage Resize：190 by 18 SWF DEBUG：Button Image Loaded SWF DEBUG：Stage Resize：190 by 18 SWF 调试：已加载按钮图像 SWF 调试：舞台调整大小：190 乘 18 SWF 调试：事件：fileDialogStart：浏览文件。多选。允许的文件类型：*.* SWF 调试：选择处理程序：接收到从对话框中选择的文件。正在处理文件列表... SWF DEBUG：事件：fileQueued：文件 ID：SWFUpload_0_0 SWF DEBUG：事件：fileDialogComplete：已完成处理选定文件。选择的文件：1\. 排队的文件：1 SWF 调试：StartUpload：队列中的第一个文件 SWF 调试：事件：uploadStart：文件 ID：SWFUpload_0_0 SWF 调试：StartUpload()：上传类型：正常。SWF 调试：ReturnUploadStart()：文件被 startUpload 事件接受并准备好进行标准上传。开始向 /File/UploadMain 上传文件 ID：SWFUpload_0_0 SWF 调试：事件：uploadProgress (OPEN)：文件 ID：SWFUpload_0_0 SWF 调试：事件：uploadProgress：文件 ID：SWFUpload_0_0。字节：32768。总计：4541051 SWF 调试：事件：uploadProgress：文件 ID：SWFUpload_0_0。字节：65536。总计：4541051 SWF 调试：事件：uploadProgress：文件 ID：SWFUpload_0_0。字节：196608。总计：4541051 ......... SWF 调试：事件：uploadProgress：文件 ID：SWFUpload_0_0。字节：4489216。总计：4541051 SWF 调试：事件：uploadProgress：文件 ID：SWFUpload_0_0。字节：4521984。总计：4541051 SWF 调试：事件：uploadProgress：文件 ID：SWFUpload_0_0。字节：4541051。总计：4541051 SWF 调试：事件：uploadError：HTTP 错误：文件 ID：SWFUpload_0_0。HTTP 状态：500。SWF 调试：事件：uploadComplete ：上传周期完成。异常：描述：FileProgress 是 niet gedefinieerd 异常：编号：-2146823279 异常：堆栈：ReferenceError：FileProgress 是 niet gedefinieerd 4541051 SWF 调试：事件：uploadProgress：文件 ID：SWFUpload_0_0。字节：4541051。总计：4541051 SWF 调试：事件：uploadError：HTTP 错误：文件 ID：SWFUpload_0_0。HTTP 状态：500。SWF 调试：事件：uploadComplete ：上传周期完成。异常：描述：FileProgress 是 niet gedefinieerd 异常：编号：-2146823279 异常：堆栈：ReferenceError：FileProgress 是 niet gedefinieerd 4541051 SWF 调试：事件：uploadProgress：文件 ID：SWFUpload_0_0。字节：4541051。总计：4541051 SWF 调试：事件：uploadError：HTTP 错误：文件 ID：SWFUpload_0_0。HTTP 状态：500。SWF 调试：事件：uploadComplete ：上传周期完成。异常：描述：FileProgress 是 niet gedefinieerd 异常：编号：-2146823279 异常：堆栈：ReferenceError：FileProgress 是 niet gedefinieerd

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T08:11:48.207

打开您的网站/项目`web.config`并添加它。

```
<system.web>
  <httpRuntime executionTimeout="240" maxRequestLength="20480" />
</system.web> 
```

`maxRequestLength`将允许的文件大小限制设置为 20MB。根据您的需要进行调整。

有关详细信息，请参阅*[ASP.NET 中的大文件上传](http://weblogs.asp.net/jgalloway/archive/2008/01/08/large-file-uploads-in-asp-net.aspx)*。

# ruby-on-rails - 回形针将图像保存在 :rails_root 之外

> ID：15922050
> 
> 赞同：1
> 
> 时间：2013-04-10T09:31:32.123
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip, image-uploading

嗨，我正在使用**回形针**进行图像上传，问题是我想访问部署在同一服务器中的**两个应用程序的图像，因为我必须将图像保存在 rails 根目录之外的公共文件夹中。**我怎样才能做到这一点？

帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:16:28.943

[https://github.com/thoughtbot/paperclip](https://github.com/thoughtbot/paperclip)在这下到了了解存储。您可以指定所需的任何文件夹的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:47:30.843

您可以通过两种方式更改它：

1) config/application.rb 或任何 config/environments/*.rb 文件

```
module YourApp
  class Application < Rails::Application
    # Other code...

    config.paperclip_defaults = {:storage => :fog, :fog_credentials => {:provider => "Local", :local_root => "#{Rails.root}/public"}, :fog_directory => "", :fog_host => "localhost"}
  end
end 
```

2) Rails 初始化程序：

```
Paperclip::Attachment.default_options[:storage] = :fog
Paperclip::Attachment.default_options[:fog_credentials] = {:provider => "Local", :local_root => "#{Rails.root}/public"}
Paperclip::Attachment.default_options[:fog_directory] = ""
Paperclip::Attachment.default_options[:fog_host] = "http://localhost:3000" 
```

# c++ - 如何在不使用 cygwin 的情况下在 Windows（Vista）中为 C++ 文件运行 makefile？

> ID：15922052
> 
> 赞同：0
> 
> 时间：2013-04-10T09:31:33.250
> 
> 标签：c++, windows, visual-studio-2010, compilation, makefile

我正在使用**Windows Vista**，并下载了一个带有**Makefile的****C++**文件文件夹。我想在 Windows 下运行 makefile 来编译带有头文件的源文件。最后，我希望之后能够从**MATLAB 的**命令提示符调用这个 C++ 函数，所以我假设如果我使用 cygwin，这是不可能的，因为它只允许在 cygwin 中运行编译。

 ****我安装了**Windows SDK 7.1**，并从它的 commond 提示符移动到 makefile 和源所在的目录，`nmake -f Makefile`并得到了我安装了 Visual Studio Express 2010 的响应`Makefile(13) : fatal error U1001: syntax error : illegal character '^' in macro Stop.`，并从它的命令提示符尝试了相同的操作。这些函数广为人知，并已从[此处使用 - 链接到托管 c++ 文件的页面](https://sites.google.com/site/findcommunities/)。所以我怀疑函数本身是否存在错误。

如何运行 makefile 来编译这些文件并随后运行它们？

编辑：这是**生成文件**：

```
#!/bin/bash
CC=g++
CFLAGS= -ansi -O5 -Wall
LDFLAGS= -ansi -lm -Wall
EXEC=community convert hierarchy
OBJ1= graph_binary.o community.o
OBJ2= graph.o
all: $(EXEC)
community : $(OBJ1) main_community.o
$(CC) -o $@ $^ $(LDFLAGS)
convert : $(OBJ2) main_convert.o
$(CC) -o $@ $^ $(LDFLAGS)
hierarchy : main_hierarchy.o
$(CC) -o $@ $^ $(LDFLAGS)
##########################################
# Generic rules
##########################################
%.o: %.cpp %.h
$(CC) -o $@ -c $< $(CFLAGS)
%.o: %.cpp
$(CC) -o $@ -c $< $(CFLAGS)
clean:
rm -f *.o *~ $(EXEC) 
```

EDIT2：我从 gnu 安装了 make，这是输出：这是`dir`

```
09/04/2013  17:13    <DIR>          .
09/04/2013  17:13    <DIR>          ..
24/09/2008  13:45             7,742 community.cpp
10/07/2008  13:41             4,386 community.h
10/07/2008  13:41             3,919 graph.cpp
10/07/2008  13:41             1,329 graph.h
10/07/2008  13:41             5,957 graph_binary.cpp
10/07/2008  13:41             3,434 graph_binary.h
23/07/2008  17:08             4,071 main_community.cpp 
10/07/2008  13:41             2,110 main_convert.cpp
10/07/2008  13:41             3,449 main_hierarchy.cpp
10/07/2008  13:43               565 Makefile
23/07/2008  17:13             2,959 readme.txt
09/04/2013  17:13    <DIR>          sample_networks
              11 File(s)         39,921 bytes
               3 Dir(s)  25,152,544,768 bytes free 
```

并运行`make -f Makefile gives`：

```
g+++ -o graph_binary.o -c graph_binary.cpp -ansi -05 -Wall
process_begin: CreateProcess(NULL, g++ -o graph_binary.o -c graph_binary.cpp -ansi -05 -Wall, ...) failed. 
make (e=2): The system cannot find the file specified.
make: *** [graph_binary.o] Error 2 
```

但是这些文件都列在目录中，所以我不知道为什么会出现错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:08:20.953

我不知道从`MATLAB`. 但是，如果您想`make`在 Windows 环境中使用`VC`编译器进行构建，这里是步骤。

1.  安装`make`：到[http://gnuwin32.sourceforge.net/packages/make.htm](http://gnuwin32.sourceforge.net/packages/make.htm)`Complete package, except sources`按照同页说明下载安装。
2.  将`bin`(C:\Program Files (x86)\GnuWin32\bin;) 目录路径设置为 windows 环境变量`PATH`
3.  重新启动计算机他们打开命令提示符并键入`make`并按回车键。如果一切正常，那么它应该显示 `make: *** No targets specified and no makefile found. Stop.`
4.  如果一切正常，请使用`cd`命令创建文件位置并执行命令`make -f yourFileName`

注意：您应该已经安装了 VC 编译器。[这](https://stackoverflow.com/questions/1233312/finding-version-of-microsoft-c-compiler-from-command-line-for-makefiles)可能会帮助你发现

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:21:06.067

您可以使用**MinGW**（gcc 的 Windows 端口）构建它

[Mingw建立链接](http://sourceforge.net/projects/mingwbuilds/)****

# powershell - 使用 Powershell 在远程机器上调用带有返回值的 VBScript

> ID：15922055
> 
> 赞同：3
> 
> 时间：2013-04-10T09:31:47.237
> 
> 标签：powershell, scripting, vbscript

我需要从 Powershell 调用远程 VB 脚本，并且 VB 脚本需要在远程机器上运行。

我一直在使用 \$computer\root\cimv2:Win32_Process").Create(C:\test.vbs)

这可行，但是我无法从脚本中获取返回值，而只能从 win32 进程中获取返回值。

我会将整个东西转换为powershell，但不能因为我连接到旧域我无法安装其他工具所以必须调用远程vbscript

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-12T11:49:07.213

这是一个老问题，但我想分享我的解决方案。它与 Ansgar 发布的相同，但已经过测试并且工作正常：

```
$VNC = '\\share\software\AppName\_Install_Silent.vbs'
$Computer = 'RemoteHost'
$TMP = "\\$Computer\c$\TEMP"

if (!(Test-Path $TMP)) {
    New-Item -Path $TMP -ItemType Directory
}

Copy-Item -LiteralPath (Split-Path $VNC -Parent) -Destination $TMP -Container -Recurse -Force -Verbose
$LocalPath = Join-Path 'C:\TEMP' (Join-Path (Split-Path $VNC -Parent | Split-Path -Leaf) (Split-Path $VNC -Leaf))
Invoke-Command -ScriptBlock {cscript.exe $Using:LocalPath} -Computer $Computer

# Restart might be needed of remote host 
```

不同之处在于您必须首先将文件复制到远程计算机以避免双跳问题，然后您可以使用`$Using`变量安装它。

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:43:30.070

我可能会尝试任一远程调用：

```
Invoke-Command -ScriptBlock { cscript.exe "C:\test.vbs" } -Computer $computer 
```

或[`PsExec`](http://technet.microsoft.com/en-us/sysinternals/bb897553)：

```
PsExec \\$computer cscript.exe "C:\test.vbs" 
```

不过，现在无法测试其中任何一个。

# javascript - LESS 在线发布网站后动态样式表语言不起作用

> ID：15922056
> 
> 赞同：2
> 
> 时间：2013-04-10T09:31:47.653
> 
> 标签：javascript, asp.net, css, less

我在我的网站中使用 LESS The Dynamic Style sheet 语言。当我从 Visual Studio 2010 调试我的网站时，它适用于我的本地系统。但是当我发布我的网站时，将其上传到网络服务器。它不会将任何 Css 样式应用于网页。谁能告诉我如何在已发布的网站上使用更少的样式表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:42:58.277

LESS 文件必须编译为 CSS 才能被浏览器使用，这可能不会发生在这里。LESS 与 CSS 足够相似（取决于您使用的功能），并且浏览器在处理格式错误的 CSS 时通常足够宽容，即使 LESS 没有被编译，某些样式可能也可以正常工作。

[使用Fiddler](http://www.fiddler2.com/fiddler2/)或任何基于浏览器的调试工具验证编译（IE 中的 F12，网络选项卡，开始捕获，检查您感兴趣的 .css 文件的响应正文，并确保它是有效的 CSS，而不是 .less） .

此外，请确保您在通过 VS 调试服务器查看站点时未使用缓存版本的 CSS。（验证这一点的一种简单方法是在浏览器中输入“私人浏览模式”，它不应该使用缓存中的任何内容。）

# titanium - 单击 Titanium ImageView 时单击事件不起作用

> ID：15922057
> 
> 赞同：1
> 
> 时间：2013-04-10T09:31:50.837
> 
> 标签：titanium, titanium-mobile

我正在为 iphone 开发移动网络应用程序。我从网络服务获取数据的地方。问题是我的图像视图不适用于点击事件。我不知道原因...请帮助...我在下面发布我的代码...

```
 Titanium.include('commonFile.js');

    var win = Ti.UI.currentWindow;

    var url = carsDetailUrl + nid;

    var imageArea = Titanium.UI.createView({
        width : 300,
        top: 50,
        height : 125,
        borderRadius : 6
    });

    var image1 = Ti.UI.createImageView({
            image : "",
            left : '8dp',
            top : '10dp',
            width : 135,
            height : 106,
            touchEnabled : 'true',
            borderColor : '#000000',
            borderRadius : 6,
            borderWidth : 1,
        });
    var completeScrollView = Ti.UI.createScrollView({
                top : '0dp',
                left : '0dp',
                contentWidth : 320,
                touchEnabled : 'true',
                borderRadius : 10,
                backgroundImage : '../images/bg.png',
                showHorizontalScrollIndicator : false,
                showVerticalScrollIndicator : false,
                //height : '300dp'
            });

    var xhr = Ti.Network.createHTTPClient({
        onload : function() {

            var tableData = [];
            var headLines, imageLabel, i, row, viewDetail, cars, images;

            cars = JSON.parse(this.responseText);
            headLines = cars.data[1];
            images = cars.data[1]['image'];

            var mainScrollView = Ti.UI.createScrollView({
                top : '0dp',
                left : '0dp',
                contentWidth : 320,
                touchEnabled : 'true',
                borderRadius : 10,
                backgroundImage : '../images/bg.png',
                showHorizontalScrollIndicator : false,
                showVerticalScrollIndicator : false,
            });

            var viewDetail = Ti.UI.createView({
                top : '10dp',
                left : '10dp',
                height : 'auto',
                width : '94%',
                touchEnabled : 'true',
                borderRadius : 10,
                backgroundColor : '#FFFFFF',
            });

       image1.image = encodeURI(images[1]);

       /*var image1 = Ti.UI.createImageView({
            image : encodeURI(images[1]),
            left : '8dp',
            top : '10dp',
            width : 135,
            height : 106,
            touchEnabled : 'true',
            borderColor : '#000000',
            borderRadius : 6,
            borderWidth : 1,
        });*/

            var image2 = Ti.UI.createImageView({
                image : encodeURI(images[2]),
                left : '150dp',
                top : '11dp',
                width : '70dp',
                height : '50dp',
                borderColor : '#000000',
                borderRadius : 3,
                borderWidth : 1,
            });

            viewDetail.add(imageArea);
            imageArea.add(image1);
            imageArea.add(image2);

            mainScrollView.add(viewDetail);
            mainScrollView.add(view2nd);

            completeScrollView.add(mainScrollView);
            win.add(completeScrollView);

        },

        onerror : function(e) {
            alert('There was an error retrieving the remote data. Please check your internet cunnectivity.');
        },
        timeout : 45000
    });

    xhr.open("GET", url);
    xhr.send();

image1.addEventListener('click', function(evt) {    
            Ti.API.info("image clicked");

                var newWin = Ti.UI.createWindow({
                    url : '../automobileSubClass/carImageGallery.js',
                    title : nTitle,
                    tabBarHidden : true,
                    barColor : '#000000',
                    //navBarHidden : true,
                    backgroundImage : "../images/bg.png"
                });
                Titanium.UI.currentTab.open(newWin, {
                    animated : true
                });

            }); 
```

但是，如果我创建一个按钮以转到该 url，然后按钮单击工作...但是当用户单击图像时我需要单击工作...请帮助。谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T06:11:37.890

试试这个代码。我已经设置了视图高度并删除了网络服务来检查您的点击。它工作正常。

```
//Titanium.include('commonFile.js');

    var win = Ti.UI.currentWindow;
         win.backgroundColor='black';

   // var url = carsDetailUrl + nid;

    var imageArea = Titanium.UI.createView({
        width : 300,
        top: 50,
        backgroundColor:'white',
        height : Ti.UI.SIZE,
        borderRadius : 6
    });

    var image1 = Ti.UI.createImageView({
            image : 'KS_nav_ui.png',
            left : '8dp',
            top : '10dp',
            width : 135,
            height : 106,
            backgroundColor:'blue',
            touchEnabled : 'true',
            borderColor : '#000000',
            borderRadius : 6,
            borderWidth : 1,
        });
    var completeScrollView = Ti.UI.createScrollView({
                top : '0dp',
                left : '0dp',
                contentWidth : 320,
                touchEnabled : 'true',
                borderRadius : 10, 
               // backgroundImage : '../images/bg.png',
                showHorizontalScrollIndicator : false,
                showVerticalScrollIndicator : false,
                height : Ti.UI.SIZE
            });

            var mainScrollView = Ti.UI.createScrollView({
                top : '0dp',
                left : '0dp',
                contentWidth : 320,
                touchEnabled : 'true',
                borderRadius : 10,
                backgroundColor:'yellow',
               // backgroundImage : '../images/bg.png',
                showHorizontalScrollIndicator : false,
                showVerticalScrollIndicator : false,
            });

            var viewDetail = Ti.UI.createView({
                top : '10dp',
                left : '10dp',
                height : 'auto',
                width : '94%',
                touchEnabled : 'true',
                borderRadius : 10,
                backgroundColor : '#FFFFFF',
            });

       /*var image1 = Ti.UI.createImageView({
            image : encodeURI(images[1]),
            left : '8dp',
            top : '10dp',
            width : 135,
            height : 106,
            touchEnabled : 'true',
            borderColor : '#000000',
            borderRadius : 6,
            borderWidth : 1,
        });*/

            var image2 = Ti.UI.createImageView({
                image :'KS_nav_views.png',
                left : '150dp',
                top : '11dp',
                width : '70dp',
                height : '50dp',
                backgroundColor:'green',
                borderColor : '#000000',
                borderRadius : 3,
                borderWidth : 1,
            });

            viewDetail.add(imageArea);
            imageArea.add(image1);
            imageArea.add(image2);

            mainScrollView.add(viewDetail);
           // mainScrollView.add(view2nd);

            completeScrollView.add(mainScrollView);
            win.add(completeScrollView);

image1.addEventListener('click', function(evt) {    
            Ti.API.info("image clicked");

                var newWin = Ti.UI.createWindow({
                    url : 'newWindow.js',
                    title : 'New Window',
                    tabBarHidden : true,
                    barColor : '#000000',
                    navBarHidden : true,
                   // backgroundImage : "../images/bg.png"
                });
                Titanium.UI.currentTab.open(newWin, {
                    animated : true
                }); 
```

# wpf - 将 DependencyProperty 设置为应用程序资源会导致内存泄漏

> ID：15922058
> 
> 赞同：1
> 
> 时间：2013-04-10T09:31:59.980
> 
> 标签：wpf, dependency-properties

我有一个自定义 UserControl (MyView)，其中包含一个名为 Header 的 DependencyProperty。此用户控件是其他几个用户控件（视图）的一部分。通过DataTemplate解决

```
<!-- SomeView's resources -->
<DataTemplate DataType="{x:Type vm:MyViewModel">
  <vw:MyView Header="{StaticResource myViewHeader}" />
</DataTemplate> 
```

一些包含 MyView 的视图正在为 MyView 的 Header 传递相同的资源。出于这个原因，我将 myvIewHeader 放在全局可用资源（应用程序资源）中。

让资源全局可用会导致内存泄漏，因为 MyView 永远不会被垃圾收集。

但是，如果我将 Header 资源放在容器的（例如 SomeView 的）资源中，那么一切都会被正确清理。

为了让 MyView 在为 Header 使用全局可用资源时不会导致内存泄漏，我需要在 MyView 的 Unloaded 事件中将 Header 设置为 null：

```
this.Unloaded += (s, e) =>
  {
    this.SetValue(HeaderProperty, null);
  }; 
```

我的问题是：**为什么**会发生这种情况，我做事**是否正确**，或者我应该以**其他**（更好）的方式实现这一目标？

# excel - 如果单元格为假，Excel输入弹出框

> ID：15922064
> 
> 赞同：0
> 
> 时间：2013-04-10T09:32:23.123
> 
> 标签：excel, vba

我想制作一个excel工作表来满足我制作word文档（邮件合并）的需要。

我可以使用`IF`这样的功能：

```
IF(A1=Specific text;Write this text;RUN MACRO with popup box to input other text) 
```

基本上，如果值为真 - 编写预定义的文本，如果它是假的 - 给我弹出框输入新文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:53:10.517

是的，您可以，但是我不建议这样做，因为每次计算工作表时，如果您的`IF()`语句结果为`FALSE`，则将显示 InputBox。

但是，如果您坚持，请尝试以下操作：

细胞公式`=IF(A1="Something","Result1", AskForResult())`

在代码模块中，添加以下内容：

```
Public Function AskForResult() As String
    Dim strUserResponse As String

    strUserResponse = InputBox("What result to give?")

    AskForResult = strUserResponse
End Function 
```

当 A1 <> "Something" 中的值时，这将显示如下所示的 InputBox

![在此处输入图像描述](https://i.stack.imgur.com/HwrBh.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:52:15.773

使用 vba 函数即可。如果您的 vba 函数是：

```
function test() as string

    Test = Inputbox("Enter value")

End function 
```

用法：

```
=if(A1="value", "value1", test) 
```

# shell - 如何使用用户数据将文件从 EC2 传递到 S3 和 S3 到 EC2

> ID：15922066
> 
> 赞同：2
> 
> 时间：2013-04-10T09:32:24.677
> 
> 标签：shell, amazon-web-services, amazon-s3, amazon-ec2, s3cmd

下面的代码是为使用用户数据创建新 AWS EC2 实例而创建的 shell 脚本文件。

在这段代码中，它创建新实例并执行 cd /home 并创建以 pravin 命名的目录。

但之后它既不会从 s3 下载文件，也不会上传到 S3。

该代码有什么问题（s3cmd 获取和放置代码）。

用于此的 AMI 预先配置了 AWS EC2 命令行 API 和 s3cmd。

```
str=$"#! /bin/bash"
str+=$"\ncd /home"
str+=$"\nmkdir pravin"
str+=$"\ns3cmd get inputFile.txt s3://bucketName/inputFile.txt"
str+=$\ns3cmd put resultFile.txt s3://bucketName/outputFile.txt"

echo "$str"|base64
ud=`echo -e "$str" |base64`
echo "$ud"

export JAVA_HOME=/usr
export EC2_HOME=/home/ec2-api-tools-1.6.7.1
export PATH=$PATH:$EC2_HOME/bin
export AWS_ACCESS_KEY=accesskey
export AWS_SECRET_KEY=secretkey
if [ "$3" = "us-east-1" ]
then
 ec2-run-instances ami-fa791231 -t t1.micro -g groupName -n 1 -k Key1 -d "$ud" --region $3 --instance-initiated-shutdown-behavior terminate
else
    echo "Not Valid region"
fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-02T13:21:25.073

您的“s3cmd get”命令有问题。你有向后的参数顺序。从“s3cmd --help”输出：

```
Put file into bucket
      s3cmd put FILE [FILE...] s3://BUCKET[/PREFIX]

Get file from bucket
      s3cmd get s3://BUCKET/OBJECT LOCAL_FILE 
```

您可以看到您需要将 get 命令更改为：

```
str+=$"\ns3cmd get s3://bucketName/inputFile.txt inputFile.txt" 
```

请注意，s3:// URI 先出现，在文件名之前。那应该可以解决这个问题。您的代码似乎也缺少 put 命令的引号：

```
str+=$"\ns3cmd put resultFile.txt s3://bucketName/outputFile.txt" 
```

# c# - 重定向到动态 CRM 主页

> ID：15922067
> 
> 赞同：0
> 
> 时间：2013-04-10T09:32:25.653
> 
> 标签：c#, azure, dynamics-crm-2011, dynamics-crm, dynamics-crm-online

我正在开发一个动态 CRM 自定义在线身份验证登录。我现在可以检索登录的用户信息，我想将登录的用户重定向到 CRM 页面。下面是我所拥有的。

```
 // Now make an SDK call with the organization service proxy.
                // Display information about the logged on user.
                Guid userid = ((WhoAmIResponse)organizationProxy.Execute(
                    new WhoAmIRequest())).UserId;
                SystemUser systemUser = organizationProxy.Retrieve("systemuser", userid,
                    new ColumnSet(new string[] { "firstname", "lastname" })).ToEntity<SystemUser>();
                Response.Write("Logged on user is."+
                    systemUser.FirstName+" "+ systemUser.LastName); 
```

登录的用户信息检索成功。如何重定向到 CRM 主页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:57:26.203

你有没有尝试过这样的事情：

```
Response.Redirect("http://<crmserver>:<portnumber>/main.aspx"); 
```

编辑：检查微软的这个选项来做我认为你想要的：

*   [从自定义网页单点登录](http://msdn.microsoft.com/en-us/library/gg509057.aspx)
*   [从 ASPX 网页或 IFRAME 实施单点登录](http://msdn.microsoft.com/en-us/library/gg509061.aspx)
*   [使用 Microsoft Dynamics CRM Web 服务对用户进行身份验证](http://msdn.microsoft.com/en-us/library/hh675404.aspx)

# java - 我应该使用对象来避免方法重载还是方法重载更好？

> ID：15922069
> 
> 赞同：1
> 
> 时间：2013-04-10T09:32:29.240
> 
> 标签：java, design-patterns, interface

我有两个接口结构。

## 我的界面1

```
public interface MyInterface1{

public Object SUM(Object O,Object P);

} 
```

## 我的界面2

```
public interface MyInterface2{

public int SUM(int O,int P);
public double SUM(int O,double P);
public double SUM(double O,double P);
public double SUM(double O,int P);

} 
```

哪个是更好的设计方法来实现接口以保持代码效率？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T09:34:25.033

第二种方法（重载）更受欢迎，因为它包含强类型的方法签名。

想想下面的代码。

```
public class InterfaceImpl implements MyInterface2{

    public Object SUM(Object O,Object P){
        //Really what can I do here without casting?

        /* If I have to cast, I might as well define
         types in the method signature, guaranteeing
         the type of the arguments
        */

       //Lets cast anyway
       return (Integer) O + (Integer) P;
    }

    public static void main(String[] args) throws ParseException {
       System.out.println(SUM(1,2));  //Excellent Returns 3
       //Yikes, valid arguments but implementation does not handle these
       System.out.println(SUM(true,false)); //Class cast exception          
    }
} 
```

**结论**

随着遇到该方法需要处理的更多类型，实现将被迫在进行必要的转换之前执行类型检查。理论上，每个扩展 Object 的类都需要进行类型检查，因为方法签名只限制类型的参数。由于参数是对象，因此要检查的类型数量是无限的，这是不可能的。

通过使用重载方法，您可以表达方法的意图并限制允许的类型集。这使得编写方法的实现变得更加容易和易于管理，因为参数将是强类型的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T09:38:35.063

正如已经提到的其他答案，重载更好。

但我还要补充一点，你不需要 4 个版本，只需要 2 个：

```
public interface MyInterface2 {
  public int SUM(int O, int P);
  public double SUM(double O, double P);
} 
```

如果您`SUM`使用 (int,double) 或 (double,int) 调用，则 int 将向上转换为 double，而第二个方法将运行。

例如，下面的代码编译并打印“goodbye”：

```
public class Test implements MyInterface2 {
  public int SUM(int o, int p) {
    System.err.println("hello");
    return o + p;
  }

  public double SUM(double o, double p) {
    System.err.println("goodbye");
    return o + p;
  }

  public static void main(String[] arg) {
    Test t = new Test();
    t.SUM(1.0, 2);
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T09:43:33.427

在这种情况下，第二个选项很好。但它因代码而异。例子

```
interface InterfaceFrequencyCounter
{
    int getCount(List list, String name);
}

interface AnotherInterfaceFrequencyCounter
{
    int getCount(ArrayList arrayList, String name);
    int getCount(LinkedList linkedList, String name);
    int getCount(Vector vector, String name);
} 
```

所以现在在上面给定的情况下，第二种选择不是好的做法。第一个很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T09:33:20.483

重载更好，因为您不希望有人用 a`String`或其他东西称呼您的方法。

你可以做的是，如果你有一个普通的超类（`Number`在你的情况下——如果你也想得到 Long 和 Float）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T09:33:45.893

对于安全代码方法重载更好的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T07:30:01.817

如上所述，重载更好。

如果您遇到 AmitG 描述的情况，您应该使用接口，而不仅仅是最通用的对象类型。无论如何，您的方法几乎总是可以仅适用于对象的一部分子集，而不是所有对象。在这种情况下，您需要找到一个通用接口并在方法签名中使用它，就像 AmitG 在他的示例中所做的那样。接口的使用清楚地显示了您对方法客户的意图，它是类型安全的，并且无需在方法内部进行强制转换。

# html - 忽略html标签的标签文本

> ID：15922071
> 
> 赞同：0
> 
> 时间：2013-04-10T09:32:31.450
> 
> 标签：html

```
<label for="abc" id="xyz">http://abc.com/player.js</xref>?xyz="foo" </label> 
```

忽略

```
</xref> tag 
```

浏览器中的值。所以，显示的输出是

```
http://abc.com/player.js?xyz="foo" 
```

但我希望浏览器显示

```
http://abc.com/player.js</xref>?xyz="foo" 
```

请帮助我如何实现这一目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:36:52.393

它没有被忽视。它被视为结束标记（对于没有开始标记的非 HTML 元素）。如果`&lt;`您希望`<`字符显示为数据而不是“标记开始”，请使用此选项。

也就是说，这是一个 URL 和 raw ，`<`字符不应该出现在 URI 中。所以将其编码为`>``"``http://abc.com/player.js%3C/xref%3E?xyz=%22foo%22`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:36:19.683

你应该这样做

```
"http://abc.com/player.js%3C/xref%3E?xyz=foo" 
```

Url 应该被正确编码以作为有效的 URL

用于`encodeURI`将 URL 编码为有效的 URL

```
var ValidURL = encodeURI("http://abc.com/player.js</xref>?xyz=foo"); 
```

请参阅[此](https://stackoverflow.com/a/3608791/1432033)答案以`encodeURI`获得更好的知识。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:40:44.377

我误解了这个问题，我认为 URI 将在 JavaScript 中的其他地方使用。但是这个问题很清楚地表明 URI 只是被呈现为文本。

如果显示的文本是从服务器传入的，那么最好的办法是在将其打印到页面上之前对其进行编码（或者如果您使用的是模板引擎，那么您很可能只是在模板上对其进行编码） . 几乎任何 Web 框架/模板引擎都应该具有此功能。

但是，如果它只是静态 HTML，只需手动对字符进行编码。如果您不知道代码，您可以使用一些在线转换器来帮助，例如：

**HTML 编码/解码：**
[http ://htmlentities.net/](http://htmlentities.net/)

* * *

**老答案：**

`encodeURI`在使用之前尝试使用 JavaScript 函数对 URI 进行编码：

```
encodeURI('http://abc.com/player.js</xref>?xyz="foo"'); 
```

`decodeURI`如果需要，您还可以使用以下方法对其进行解码：

```
decodeURI(yourEncodedURI); 
```

因此，最终我认为您无法让浏览器按`</xref>`原样显示标签，但如果您需要，您将能够保留它（使用`encodeURI`/ `decodeURI`）并在代码中使用它。

**小提琴：http:**
[//jsfiddle.net/rk8nR/3/](http://jsfiddle.net/rk8nR/3/)

**更多信息：**
[您什么时候应该使用转义而不是 encodeURI / encodeURIComponent？](https://stackoverflow.com/questions/75980/best-practice-escape-or-encodeuri-encodeuricomponent)

# asp.net - ASP.NET 读取资源值

> ID：15922072
> 
> 赞同：0
> 
> 时间：2013-04-10T09:32:35.133
> 
> 标签：asp.net, multilingual, resourcemanager

我有两个`.resx`文件：`en.resx`和`he.resx`，在文件夹中`App_LocalResources`。我的网页中已经有两个按钮，单击每个按钮都应该“切换”到另一种语言的资源文件。

我想简单地获取位于其中一个`.resx`文件中的字符串值。

`Assembly`我尝试了一些我在 google 上找到的示例，我问自己，当我只想`string`在自己的项目中请求一个值时，为什么我需要提供一个类型和一个命名空间？

为什么没有类似的东西：`string val = Resources["en.resx"]["SomeProperty"].Value`？

也许我的整个方法是错误的，我想看看你的意见。

谢了，兄弟们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:10:19.320

```
using System.Resources;

ResXResourceSet Resource = new ResXResourceSet(HttpContext.Current.Server.MapPath(@"~/Properties/Resource.resx")
String value=Resource.GetStrin("key"); 
```

# websocket - 是否有可能错过 websocket 事件

> ID：15922073
> 
> 赞同：4
> 
> 时间：2013-04-10T09:32:50.080
> 
> 标签：websocket, socket.io, long-polling

这是我们正在做的事情：

我们使用 Socket.io 来广播我们的事件。我们遇到了代理和/或防火墙的问题，所以我们只使用了带有 XHR-Polling 的 socket.io，而不是 Websockets。它运行良好，但我们的很多用户都在使用我们的智能手机应用程序，或者互联网连接不佳。有时，尽管他们仍然连接到我们的节点服务器，但他们从未收到广播事件。因此，我们添加了一个额外的长轮询系统，它每隔 X 秒查看一次您从 socket.io 收到的内容，并为您提供您错过的事件。

现在，我们在 Node 服务器上使用 SSL，并且我们能够再次启用 websockets 而不会被防火墙阻止。

问题是：我们额外的长轮询系统在启用 websocket 的情况下仍然有用吗？如果您的互联网连接不好，是否有可能错过 websockets 事件？或者我们应该在断开/重新连接的情况下使用它吗？

**TL；DR**：如果您的互联网连接不好，是否有可能错过 websockets 事件而没有断开连接？

谢谢

# css - CSS3 过渡到高度自动首先转到高度 0

> ID：15922076
> 
> 赞同：5
> 
> 时间：2013-04-10T09:32:54.687
> 
> 标签：css, height, css-transitions

我有以下CSS：

```
.foo
{
    height:100px;
    overflow:hidden;
    -webkit-transition: height 200ms;
    -moz-transition: height 200ms;
    -o-transition: height 200ms;
    transition: height 200ms;
}

.foo.open
{
    height:auto;
} 
```

当`.foo`有一个自动高度时，它的高度将是~550px，具体取决于内容。

我使用 jQuery 添加类`open`，我希望使用 CSS3 过渡在 200 毫秒内看到高度从 100 像素变为 ~550 像素。

然而，究竟发生的是高度从 100px 变为 0px，然后跳到 ~550px。

[**-- 观看现场演示 --**](http://jsfiddle.net/AbPEx/)

如果我改为改为`.open`然后`height:550px`这[工作正常](http://jsfiddle.net/AbPEx/1/)，但是内容长度会有所不同，因此我需要将高度设置为自动，而不是固定的像素高度。

为什么 div 关闭而不是滑动到 ~550px，我该如何解决这个动画问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T11:40:03.877

我不认为你可以`height: auto;`通过 css 过渡过渡到。一种不完美的解决方法是`max-height`转而将其设置为更大的值。根据您设置的值会对转换速度产生影响，但`max-height: 1000px;`为了简单起见，我将其设置为。

这是一个[演示](http://jsfiddle.net/AbPEx/6/)，向您展示我的意思。

演示代码：

```
.foo
{
    max-height:100px;
    overflow:hidden;
    -webkit-transition: max-height 200ms;
    -moz-transition: max-height 200ms;
    -o-transition: max-height 200ms;
    transition: max-height 200ms;
}

.foo.open
{
    max-height:1000px;
} 
```

这不是一个优雅的解决方案，但我希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:32:16.487

这不是最优雅的解决方案，但它解决了自动高度问题。

单击按钮时，通过执行以下操作计算 div 将具有自动高度的高度：

```
var openHeight = $foo.addClass("heightauto").height(); 
```

然后直接删除这个类，并将高度应用于 div `openHeight`：

```
$foo.removeClass("heightauto");
$foo.height(openHeight); 
```

该类`heightauto`还需要覆盖 CSS3 过渡，以便立即更改高度：

```
.foo.heightauto
{
    height:auto;
    -webkit-transition:0;
    -moz-transition:0;
    -o-transition:0;
    transition:0;
} 
```

*见现场演示：http: [//jsfiddle.net/AbPEx/4/](http://jsfiddle.net/AbPEx/4/)*

**不过，这仍然很老套，所以如果有更优雅的解决方案，那么我愿意接受建议**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-06T20:10:52.477

不能使用带有 height:auto 的过渡。使用 max-height 的技巧是一个很好的解决方案，但有一些不便，尤其是如果 max-height 远高于实际高度，则会出现奇怪的延迟。

这是我使用的技巧：http: [//jsfiddle.net/g56jwux4/2/](http://jsfiddle.net/g56jwux4/2/) 基本上它是两个向相反方向平移的叠瓦状 DIV。看看 jsfiddle 的代码，因为我的英语不够好，无法清楚地解释它。

HTML部分：

```
<body>
  <p>Technicaly this dropdown menu looks like a simple height transition.</p>
  <p>But this pure css code also works this a variable number of choices in menu, working around the "height:auto" not taken into account by css transitions.</p>
    <input type="checkbox" id="menuOpen"></input>
    <label id="bouton" for="menuOpen"><span>Click on me !</span>
        <div id="menu">
            <div id="masque">
                <div class="choix" id="choix1">Choix 1</div>
                <div class="choix" id="choix2">Choix 2</div>
                <div class="choix" id="choix3">Choix 3 tr&egrave;s tr&egrave;s long pour voir la taille finale du menu</div>
                <div class="choix" id="choix4">Choix 4</div>
                <div class="choix" id="choix5">Choix 5</div>
                <div class="choix" id="choix6">Choix 6</div>
            </div>
        </div>
    </label>
</body> 
```

CSS部分：

```
body {
    font-family: sans-serif;
}
#menuOpen {
    display: none;
}
#bouton {
    position: absolute;
    left: 100px;
    top: 100px;
    width: 200px;
    height: 30px;
    background-color: lightgray;
    cursor: pointer;
}
#bouton > span {
    color: black;
    padding: 6px;
    line-height: 30px;
}
#menu {
    position: absolute;
    top: 100%;
    overflow: hidden;
    min-width: 100%;
    transition: transform 0.3s linear 0s, visibility 0.3s linear 0s;
    transform: translateY(-100%);
    visibility: hidden;
    color: white;
}
#menuOpen:checked + #bouton > #menu  {
    transform: translateY(0%);
    visibility: visible;
    transition: transform 0.3s linear 0s, visibility 0s linear 0s;
}
#menuOpen:checked + #bouton > #menu > #masque {
    transform: translateY(0%);
}
#masque {
    position: relative;
    background-color: gray;
    transform: translateY(100%);
    transition: transform 0.3s linear 0s;
}
.choix {
    white-space: nowrap;
    padding: 3px 6px;
}
.choix:hover {
    background-color: darkgray; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T09:48:06.050

里面有个小bug，我已经修复了。通过添加最小高度：100px；

```
.foo {

min-height: 100px;
height: 100px;
...

} 
```

在那里你不会看到它回到 0px。

# javascript - 动态限制滑块的值

> ID：15922079
> 
> 赞同：1
> 
> 时间：2013-04-10T09:33:00.343
> 
> 标签：javascript, jquery, html, jquery-mobile

我想要一个范围为 0 到 2400 的滑块，它受另一个滑块值的限制。它们加起来最多只能是 2400。我尝试在 change 方法中实现它，如下所示：

```
var cal_sl = $("#sl_4");
cal_sl.attr('max', 2400);   
cal_sl.change(function()
{
    var sumv = ($("#sl_3").val()*1)+($(this).val()*1);
    if(sumv>2400)
    {
        $(this).val(2400-$("#sl_3").val());            
    }
    var slider_value = $(this).val();

}); 
```

但是滑块不会移动（只有滑块的文本框是正确的）。如果我也加一个刷新，change函数会进入一个刷新/更改/刷新/...的无限循环

另外，我不想更改“最大值”值，因为拇指应该位于滑块的中间，值为 1200，但如果另一个滑块的值为1200也一样。

这怎么可能实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:41:59.327

我只需要在 if 中设置刷新，这样就不会发生无限循环：

```
$(this).slider('refresh'); 
```

# xslt - xslt captalize 每个单词忽略连词

> ID：15922081
> 
> 赞同：0
> 
> 时间：2013-04-10T09:33:05.013
> 
> 标签：xslt

我有下面的xml。

```
 <?xml version="1.0" encoding="UTF-8"?>
<chapter num="A">
    <title>
        <content-style font-style="bold">PART 1 GENERAL PRINCIPLES</content-style>
    </title>
    <section level="sect1">
    <section level="sect2" number-type="manual" num="1.">
            <title>INTRODUCTION OF INDIA TO NEW ERA AND THE EXISTING</title>
            </section>
            </section>
            </chapter> 
```

通过使用下面的 xslt，我能够大写每个单词。

```
 <xsl:element name="{concat(translate(substring(name(), 1, 1), 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'), substring(name(), 2))}"> 
```

我得到以下输出。

```
Introduction Of India To New Era And The Existing 
```

但我想要如下。

```
Introduction of India to New Era and the Existing 
```

即我想忽略连词。请让我知道我该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T03:52:32.727

**此转换使用`strSplit-to-Words`FXSL 库的模板（用纯 XSLT 1.0 编写）并且不需要任何扩展函数，除了事实上的标准`xxx:node-set()`：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common" exclude-result-prefixes="ext">
  <xsl:import href="strSplit-to-Words.xsl"/>
  <xsl:output indent="yes" omit-xml-declaration="yes"/>

  <xsl:variable name="vLowercase" select="'abcdefghijklmnopqrstuvwxyz'"/>
  <xsl:variable name="vUppercase" select="'ABCDEFGHIJKLMNOPQRSTUVWXYZ'"/>

  <xsl:variable name="vConjunctions" select=
  "'|AND|THE|OF|A|AN|TO|FOR|AT|ON|IN|INTO|AMONG|FROM|'"/>

   <xsl:strip-space elements="*"/>
   <xsl:output indent="yes" omit-xml-declaration="yes"/>

   <xsl:param name="pDelims" select="' &#xA;&#xD;'"/>

    <xsl:template match="/">
      <xsl:variable name="vwordNodes">
        <xsl:call-template name="str-split-to-words">
          <xsl:with-param name="pStr" select="/"/>
          <xsl:with-param name="pDelimiters"
                          select="$pDelims"/>
        </xsl:call-template>
      </xsl:variable>

      <xsl:apply-templates select=
      "ext:node-set($vwordNodes)/*[normalize-space()]"/>
    </xsl:template>

    <xsl:template match="word">
      <xsl:if test="not(position() = 1)"><xsl:text> </xsl:text></xsl:if>

      <xsl:choose>
       <xsl:when test="contains($vConjunctions, concat('|',.,'|'))">
        <xsl:value-of select="translate(substring(., 1, 1), $vUppercase, $vLowercase)"/>
       </xsl:when>
       <xsl:otherwise><xsl:value-of select="substring(., 1, 1)"/></xsl:otherwise>
      </xsl:choose>

      <xsl:value-of select="translate(substring(., 2), $vUppercase, $vLowercase)"/>
    </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<title>INTRODUCTION OF INDIA TO NEW ERA AND THE EXISTING</title> 
```

**产生了想要的正确结果**：

```
Introduction of India to New Era and the Existing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:51:07.130

试试这个：

```
<?xml version='1.0'?>
<xslt:stylesheet version="2.0" xmlns:xslt="http://www.w3.org/1999/XSL/Transform" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:param name="Conjunction">(of)|(to)|(and)|(the)</xsl:param>

  <xsl:template match="chapter/section/section/title">
    <xsl:call-template name="changeUpperCase">
      <xsl:with-param name="Text" select="text()"/>
    </xsl:call-template>
  </xsl:template>

  <xsl:template name="changeUpperCase">
    <xsl:param name="Text"/>
    <xsl:value-of select="for $EachToken in tokenize(lower-case($Text), ' ')
                          return
                          if(matches($EachToken, $Conjunction))
                           then
                             $EachToken
                           else
                           concat(upper-case(substring($EachToken, 1, 1)), substring($EachToken, 2))"/>

  </xsl:template>

</xslt:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:47:26.747

借助@NavinRawat 提供的答案，这是一个 XSLT 1.0 变体。请注意，它需要使用该功能。[`EXSLT Extension Library's`](http://www.exslt.org/) [`node-set()`](http://www.exslt.org/exsl/functions/node-set/)

**当这个 XSLT：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:exsl="http://exslt.org/common"
  exclude-result-prefixes="exsl"
  version="1.0">
  <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:param name="pConjunctions" select="'|OF|TO|AND|THE|'"/>
  <xsl:variable name="vUppercase" select="'ABCDEFGHIJKLMNOPQRSTUVWXYZ'"/>
  <xsl:variable name="vLowercase" select="'abcdefghijklmnopqrstuvwxyz'"/>

  <xsl:template match="/*/*/*/title">
    <xsl:variable name="vTitleWords">
      <xsl:call-template name="tokenize">
        <xsl:with-param name="text" select="."/>
        <xsl:with-param name="delimiter" select="' '"/>
      </xsl:call-template>
    </xsl:variable>
    <xsl:apply-templates select="exsl:node-set($vTitleWords)/*"/>
  </xsl:template>

  <xsl:template match="token">
    <xsl:if test="position() &gt; 1"> </xsl:if>
    <xsl:choose>
      <xsl:when test="contains($pConjunctions, concat('|', ., '|'))">
        <xsl:value-of select="translate(., $vUppercase, $vLowercase)"/>
      </xsl:when>
      <xsl:otherwise>
        <xsl:value-of
          select="concat(
            substring(., 1, 1),
            translate(substring(., 2), $vUppercase, $vLowercase)
          )"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <xsl:template match="text()"/>

  <xsl:template name="tokenize">
    <xsl:param name="text"/>
    <xsl:param name="delimiter" select="' '"/>
    <xsl:choose>
      <xsl:when test="contains($text,$delimiter)">
        <xsl:element name="token">
          <xsl:value-of select="substring-before($text,$delimiter)"/>
        </xsl:element>
        <xsl:call-template name="tokenize">
          <xsl:with-param
            name="text"
            select="substring-after($text,$delimiter)"/>
          <xsl:with-param
            name="delimiter"
            select="$delimiter"/>
        </xsl:call-template>
      </xsl:when>
      <xsl:when test="$text">
        <xsl:element name="token">
          <xsl:value-of select="$text"/>
        </xsl:element>
      </xsl:when>
    </xsl:choose>
  </xsl:template>
</xsl:stylesheet> 
```

**...针对提供的 XML 运行：**

```
<?xml version="1.0" encoding="UTF-8"?>
<chapter num="A">
  <title>
    <content-style font-style="bold">PART 1 GENERAL PRINCIPLES</content-style>
  </title>
  <section level="sect1">
    <section level="sect2" number-type="manual" num="1.">
      <title>INTRODUCTION OF INDIA TO NEW ERA AND THE EXISTING</title>
    </section>
  </section>
</chapter> 
```

**...产生了想要的结果：**

```
Introduction of India to New Era and the Existing 
```

显然，XSLT 2.0 变体更简洁，不需要两次转换，但如果您坚持使用 XSLT 1.0 并且可以使用 EXSLT，这将让您到达您想去的地方。

# javascript - 一个不起作用的简单 JavaScript 代码@_@

> ID：15922082
> 
> 赞同：0
> 
> 时间：2013-04-10T09:33:05.287
> 
> 标签：javascript

好的，事情就是这样，我为幻灯片编写了一个简单的代码，它可以正常工作，并且正如我所期望的那样，就是这样：

```
var slideShowImage = document.getElementById("slideShowImage");
var images = ["_Images/Image_01.jpg","_Images/Image_02.jpg","_Images/Image_03.jpg","_Images/Image_04.jpg","_Images/Image_05.jpg","_Images/Image_06.jpg","_Images/Image_07.jpg"];
var imageIndex = 0;

function changeImage (){
    slideShowImage.setAttribute ("src",images[imageIndex]);
    imageIndex++;
    if (imageIndex >= images.length){
            imageIndex = 0;
        }   
    }

setInterval (changeImage,3000); 
```

但是由于我还在学习javaScript，所以我想改变逻辑来品味自己，我重写了代码，但它不起作用，我不知道为什么......希望有人能告诉我为什么它不...

```
var imageId = document.getElementById("slideShowImage");
var imageNumber = 1;
var imageName = "_Images/Image_0"+imageNumber+".jpg";

function changeImage (){
    imageId.setAttribute("Src",imageName);
    imageNumber++;
    if (imageNumber==7){
        imageNumber=1;
        }
    }
setInterval(changeImage,1000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:38:48.600

在第二种方法中，var imageName 被分配给一个静态值，即“_Images/Image_0”+imageNumber+“.jpg”，根据第一个答案，您需要重新计算该变量的值。

相反，您可以将 imageName 编写为返回计算值的函数

```
var imageName = function(){ return "_Images/Image_0"+imageNumber+".jpg"; } 
```

并在 changeImage 内部调用

```
function changeImage (){
    imageId.setAttribute("Src",imageName());
    imageNumber++;
    if (imageNumber==7){
        imageNumber=1;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:44:43.973

您可以替换您的代码 imageId.setAttribute("Src",imageName); 使用以下 imageId.src = imageName;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:35:58.227

```
var imageName = "_Images/Image_0"+imageNumber+".jpg"; 
```

`imageName`每次数字更改时，您都需要更新。否则，此字符串固定为 Image_01.jpg。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T09:37:37.970

您的`imageName`变量永远不会被更新。您必须在每次 chageImage 调用时更新它。

```
var imageId = document.getElementById("slideShowImage");
var imageNumber = 1;
var imageName = "_Images/Image_0"+imageNumber+".jpg";

function changeImage (){
    imageNumber++;
    imageName = "_Images/Image_0"+imageNumber+".jpg";
    imageId.setAttribute("Src",imageName);
    if (imageNumber==7){
        imageNumber=1;
    }
}
setInterval(changeImage,1000); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T09:38:33.167

您犯的错误是每次迭代都不会评估您版本中的图像名称。

```
var imageId = document.getElementById("slideShowImage");
var imageNumber = 1;
setInterval(function() {
  imageId.setAttribute("src","_Images/Image_0"+imageNumber+"jpg");
  imageNumber++;
  if (imageNumber == 7) imageNumber = 1;
},1000); 
```

这将导致您的代码实际工作。我获取了图像路径并将其带入函数中，以便在每次迭代时对其进行评估，这是主要错误。

请记住，您的图像不会立即加载；将它们设置为每次转换 1 秒是不明智的。在实践中，您希望将所有这些预加载到后台某个不可见的地方，以保证即时调用。

# ruby - 使用 Ruby 授权 google drive api

> ID：15922083
> 
> 赞同：2
> 
> 时间：2013-04-10T09:33:12.790
> 
> 标签：ruby, google-api-client, google-drive-realtime-api

我想制作一个简单的应用程序（如服务帐户 - 在 google api 控制台中），它将文件发送到谷歌驱动器。

我有这样的代码：

```
require 'rubygems'
require 'google/api_client'
require 'launchy'

#extra
gem 'oauth2'
gem 'omniauth'

client = Google::APIClient.new({:application_name => "testdevelop",:application_version => "1.0"})
drive = client.discovered_api('drive', 'v2')

####################################################################################
# Initialize OAuth 2.0 client    
# client.authorization.client_id = '111062272758.apps.googleusercontent.com'
# client.authorization.client_secret = 's8j3VQwCvlyz2Hcpr06xrVfr'
# client.authorization.redirect_uri = 'urn:ietf:wg:oauth:2.0:oob'
# client.authorization.scope = 'https://www.googleapis.com/auth/drive'
# uri = client.authorization.authorization_uri
# Launchy.open(uri)
# $stdout.write  "Enter authorization code: "
# client.authorization.code = gets.chomp
# client.authorization.fetch_access_token!

####################################################################################
key = Google::APIClient::KeyUtils.load_from_pkcs12('12355eaee706eb725ff5dd890b5c2bc39d536a53-privatekey.p12', 'notasecret')
client.authorization = Signet::OAuth2::Client.new(
  :token_credential_uri => 'https://accounts.google.com/o/oauth2/token',
  :audience => 'https://accounts.google.com/o/oauth2/token',
  :scope => 'https://www.googleapis.com/auth/prediction',
  :issuer => '312062272758-bg7s7ts9f3m11hjetboodre6hfg4qp8q@developer.gserviceaccount.com',
  :signing_key => key)
client.authorization.fetch_access_token!
#####################################################################################

# Make an API call
# Insert a file
file = drive.files.insert.request_schema.new({
  'title' => 'My document',
  'description' => 'A test document',
  'mimeType' => 'text/plain'
})

media = Google::APIClient::UploadIO.new('document.txt', 'text/plain')
result = client.execute(
  :api_method => drive.files.insert,
  :body_object => file,
  :media => media,
  :parameters => {
    'uploadType' => 'multipart',
    'alt' => 'json'})

# Pretty print the API result
jj result.data.to_hash 
```

当我运行它时出现错误

> `rescue in rbuf_fill': Timeout::Error (Faraday::Error::TimeoutError)

当我取消注释 ############### 行之间的注释代码和注释代码时，可以将文件发送到 gDrive，但我必须从 Web 浏览器输入授权代码。

我想自动完成，所以我决定像服务帐户一样使用 gDrive

我试图通过添加行来增加连接超时：

```
conn = Faraday.default_connection
conn.options[:timeout] = 500 
```

当然还有连接：请求中的参数后的conn，但我遇到了另一个错误

> `sysread_nonblock': 到达文件末尾 (Faraday::Error::ConnectionFailed)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T14:05:46.103

（ssl）证书丢失。如何修复：[https ://gist.github.com/fnichol/867550](https://gist.github.com/fnichol/867550)

# sql-server - 按...排序查询结果？

> ID：15922085
> 
> 赞同：1
> 
> 时间：2013-04-10T09:33:15.523
> 
> 标签：sql-server, tsql

首先，我应该说我发现很难用几句话来表达以下问题，因此问题标题很糟糕。非常欢迎提出改进建议。

现在到真正的问题...

给定以下示例，客户和发票的无序数据...

**编辑** 我为以下内容创建了一个[SQL Fiddle](http://sqlfiddle.com/#!3/d2642)

**客户资料**

```
customer_id   name
------------------
1             Gary
2             Jeremy
3             Marcia
4             Danielle 
```

**发票数据**

```
invoice_id   customer_id   created_date   amount
------------------------------------------------
1            1             2008-01-01     500.00
2            1             2011-01-01     600.00
3            1             2012-01-01     100.00
4            1             2012-01-01     550.00
5            2             2008-01-01     600.00
6            2             2012-01-01     200.00
7            2             2013-01-01     1000.00
8            3             2012-01-01     300.00
9            3             2013-01-01     100.00
10           3             2009-01-01     250.00
11           4             2010-01-01     300.00
12           4             2011-01-01     700.00
13           4             2012-01-01     500.00 
```

...如何编写查询以通过以下方式返回数据...

1.  第一行中最早的发票。如果超过 1 张相同年龄的发票，则在这些相同年龄的发票中，金额最大的发票。如果超过 1 张相同年龄和金额的发票，排序变得无关紧要。
2.  *第二行中与上一行相同的客户*的下一张最早的发票。再次，如果超过 1 张同龄发票，则以金额最大的发票为准。如果超过 1 张相同年龄和金额的发票，排序变得无关紧要。
3.  重复 #2 直到该客户不再有发票。
4.  另一个客户的下一张最早的发票。如果超过 1 张相同的发票，则在这些发票的年龄相同的情况下，金额最大的发票。如果超过 1 张相同年龄和金额的发票，排序变得无关紧要。
5.  对与 #4 相同的客户重复 #2。
6.  重复 #5 直到没有该客户的发票。
7.  重复#4、#5、#6

因此，对于上面的示例数据，期望的结果将是......

```
customer_name   invoice_id   created_date   amount
--------------------------------------------------
Jeremy          5            2008-01-01     600.00   <-- this is the joint "oldest" invoice with id 1 but has a greater amount.
Jeremy          6            2012-01-01     200.00   <-- this is the next "oldest" invoice for the same customer as the previous row.
Jeremy          7            2013-01-01     1000.00
Gary            1            2008-01-01     500.00   <-- no more invoice for previous customer, so this is the next "oldest" invoice for a new customer
Gary            2            2011-01-01     600.00
Gary            4            2012-01-01     550.00  <-- same age as inv_id 3 but larger amount
Gary            3            2012-01-01     100.00
Marcia          10           2009-01-01     250.00
Marcia          8            2012-01-01     300.00
Marcia          9            2013-01-01     100.00
Danielle        11           2010-01-01     300.00
Danielle        12           2011-01-01     700.00
Danielle        13           2012-01-01     500.00 
```

为了为这个问题提供更广泛的背景，结果将用于追踪发票的付款，最旧和最“昂贵”的优先级最高，然后还可以查看分组在一起的客户的所有发票。

PS 我正在使用 MS SQL Server 2008。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:43:17.123

希望这有效:)

```
with ordering as
(
  select
  row_number() over (order by o.created_date asc, o.amount desc) num,
  customer_id,
  customer_name
  from
  (
    select
    min(i.created_date) 
    over (partition by c.customer_id) as min_created_date,
    max(i.amount) 
    over (partition by c.customer_id, i.created_date) max_date_amount,
    c.name as customer_name,
    c.customer_id as customer_id,
    i.invoice_id,
    i.created_date,
    i.amount
    from
    invoice i
    join customer c on i.customer_id = c.customer_id
  )o
  where o.min_created_date = o.created_date
  and o.max_date_amount = o.amount
)
select
ord.customer_name,
i.invoice_id,
i.created_date,
i.amount
from
ordering ord
join invoice i on i.customer_id = ord.customer_id
order by ord.num asc, i.created_date asc, i.amount desc; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:50:57.680

我只是要把它扔在这里作为已经接受的答案的替代品。

```
SELECT temp.name,
    temp.Invoice_Id,
    temp.created_Date,
    temp.amount
FROM(
  SELECT 
    c.name,
    i.invoice_id,
    i.created_date,
    i.amount,  
    min(i.created_date) over (partition by c.customer_id) as min_created_date,
    max(i.customer_id) over (partition by i.created_Date, i.amount ) as customerId
  FROM
    Customer c
  LEFT JOIN 
    Invoice i
  on 
    c.customer_ID=i.Customer_ID
) temp

ORDER BY  temp.min_created_date, 
    temp.customerId desc, 
    temp.created_Date, 
    temp.amount desc 
```

# twitter-bootstrap - 在所见即所得编辑器中将 onclick 事件添加到 html 元素中

> ID：15922089
> 
> 赞同：1
> 
> 时间：2013-04-10T09:33:26.057
> 
> 标签：twitter-bootstrap, editor, wysiwyg, wysihtml5

我正在使用 bootstrap-wysihtml5 编辑器。我想为所有输入元素添加 onclick 事件。我试图将脚本添加到 iframe 中。这不起作用有什么简单的方法可以将点击事件包含到编辑器中吗？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:07:06.777

请注意，可以通过添加自定义解析器规则并将其附加到编辑器的构造函数来为元素设置默认事件处理程序。

简单的例子：

```
<div id="toolbar" style="display: none;">
  <a data-wysihtml5-action="change_view">switch to html view</a>
</div>
<textarea id="textarea" placeholder="Enter text ..."></textarea>

<script src="../parser_rules/simple.js"></script>
<script src="../dist/wysihtml5-0.4.0pre.js"></script>
<script>
  wysihtml5ParserRules.tags.button = {
    set_attributes: {
        onclick: "console.log('You clicked a button.')"
    }
  }

  var editor = new wysihtml5.Editor("textarea", {
    parserRules:    wysihtml5ParserRules
  });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:46:41.810

I have solved the issue by adding "focus" and "blur" events of the editor.

# android - 用于广播流 mms://howto 的 Android 应用程序

> ID：15922098
> 
> 赞同：3
> 
> 时间：2013-04-10T09:33:44.050
> 
> 标签：android, streaming, audio-streaming, radio, live-streaming

我正在尝试创建一个流式传输无线电频道的 Android 应用程序。
这是广播流的链接：mms://89.96.234.34:8000
我如何在 Android 上使用它？
这是我的 MainActivity.java：

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Uri uri = Uri.parse("mms://89.96.234.34:8000");
    MediaPlayer.create(MainActivity.this, uri).start();
} } 
```

我补充说：`<uses-permission android:name="android.permission.INTERNET"></uses-permission>`在清单中，当我启动应用程序时，我在第 16 行有一个空指针异常：

```
 MediaPlayer.create(MainActivity.this, uri).start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:47:48.097

您好，我也有一个这样的应用程序，我这样使用它：

```
Uri uri = Uri.parse("mms://89.96.234.34:8000");
MediaPlayer.create(MainActivity.this, uri).start(); 
```

# html - CSS 子菜单定位在 Chrome 和 Safari 中有效，但在 IE 和 Firefox 中无效

> ID：15922100
> 
> 赞同：0
> 
> 时间：2013-04-10T09:33:44.620
> 
> 标签：html, css, menu, navigation, submenu

我目前正在为游戏社区建立一个网站，名为`http://www.quad-gaming.com/`.

除了导航栏右侧“登录”下的下拉菜单外，一切运行顺利。它在 Chrome 和 Safari 中运行良好，但在 IE 和 Firefox 中，它浮动到左侧。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:41:48.153

确实有点奇怪。

如果您指定`ul`元素的`left`值为零，则可以正常工作：

```
nav ul li ul {
  left: 0;
} 
```

无法在 IE 上尝试，因为我在 Mac 上。希望它也在那里工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:42:20.340

尝试这个

```
.dropdown ul {
    left: 0;
} 
```

在 IE10、IE8、FF20 和 Chrome 26 上测试并在 Win7 上运行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:41:02.400

我用过

```
nav ul li ul {
    position:absolute;
    left:0px; /* Adding this to fix left position*/
    visibility: hidden;
} 
```

它适用于 Firefox。

# excel - 循环仅粘贴在有数据的行上

> ID：15922101
> 
> 赞同：1
> 
> 时间：2013-04-10T09:33:45.127
> 
> 标签：excel, excel-formula, vba

谁能帮我修改这个循环来复制和粘贴？

仅`Range("S" & Y).Select` 当`Range("F" & Y)`. 我想重复这个直到`Range("F" & Y)`. 我现在在行上有数据，`Range("F" & Y)` 那么它不应该粘贴`Range("S" & Y)`。当其中有数据时`Range("F" & Y)`，每三行显示一次。有时数据中可能会有 10 行的间隙，直到下一个数据序列每三行返回一次。

**错误**：它不会在该数据集的末尾停止，即使在没有数据的情况下它也会粘贴`Range("F" & Y)` 任何人都可以帮忙吗？

我的代码

```
Dim lastRow As Long
Range("S16:Y16").Select
Selection.Copy
For Y = 19 To 2000 Step 3

    If Range("F" & Y).Value = lastRow Then Exit For
    Range("S" & Y).Select
    ActiveSheet.Paste
    lastRow = ActiveSheet.Range("B" & Rows.Count).End(xlUp).Row

Next Y
Application.ScreenUpdating = True
MsgBox lastRow 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:24:59.547

A few pointers:

1.  First thing is it doesn't stop at the end when the `lastRow` is greater than 2000 and your `if` statement isn't checking for the current row number just the value in it. Also there is a great chance you skip this last row because you are jumping by 3 rows at a time. I suggest you use the following `if` statement instead:

    ```
    If Range("F" & Y).row > lastRow Then Exit For 
    ```

2.  For your `lastrow` variable I suggest the following to be more accurate:

    ```
    lastrow = activesheet.cells.find("*", range("A1"), , , xlbyrows, xlprevious).row 
    ```

3.  Also, you're pasting data in every row without checking for a blank value and I would check for a blank cell using this:

    ```
    if len(Application.WorksheetFunction.Clean(trim(range("F" & Y).value))) > 0 then 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:15:08.853

也许您可以使用 S 到 Y 列中的工作表公式来执行此操作，如下所示：

```
=IF($F:$F<>"",S:S,"") 
```

将该公式从 S 列复制到 Y 列，然后复制到 2000。

要检查 ROW 是否是每三行，使用 ROW() 函数获取行号，并使用 MOD 查看它是否可以被 3 整除？

对于 VBA，试试这个：

```
Dim lastRow As Long
lastRow = ActiveSheet.Range("B" & Rows.Count).End(xlUp).Row

Range("S16:Y16").Copy
For Y = lastRow to 19 Step -3
' check column F and Row=Y for contents
if vba.len(vba.trim(range("F" & Y).value))>0 then  
    ' paste into column S
    Range("S" & Y).PasteSpecial xlPasteAll
end if 
Next 
Application.ScreenUpdating = True
MsgBox lastRow 
```

现在它将从 lastRow 运行 BACKWARDS 到 19

您的代码正在根据最后一行的编号检查单元格 Range("F" & Y) 或 Cells(y,6) 的值

# javascript - 使用 JQuery 的可折叠列表

> ID：15922108
> 
> 赞同：1
> 
> 时间：2013-04-10T09:34:13.047
> 
> 标签：javascript, jquery, collapsable

```
 <script>   
     $(document).ready(function(){
           var xml = "<root> \
                <method name='A'> \
                <childcall name='B'></childcall> \
                <childcall name='C'></childcall> \
                </method> \
                <method name='B'> \
                <childcall name='D'></childcall> \
                </method> \
                <method name='C'> \
                <childcall name='D'></childcall> \
                <childcall name='E'></childcall> \
                </method> \
                </root>";

            var data = $.parseXML(xml);
            console.log(data);
            $(data).find('method').each(function(){
                var name = $(this).attr('name');
                $('<div class="items"></div>').html('<a href="'+name+'">'+name+'</a>').appendTo('#page-wrap');
                $(this).children('childcall').each(function(){
                    name = $(this).attr('name');
                    $('<div class="items"></div>').html('<a href="'+name+'">'+name+'</a>').appendTo('#page-wrap');
                });
             });
      });

      </script>
<body>
    <div id="page-wrap"></div>
</body> 
```

上面的代码遍历 xml 并将项目打印为 - ABCBDCD E。我想让它成为一个可折叠的列表，就像在给定的链接中一样：[http ://www.sendesignz.com/index.php/jquery/77-how-to -create-expand-and-collapse-list-item-using-jquery](http://www.sendesignz.com/index.php/jquery/77-how-to-create-expand-and-collapse-list-item-using-jquery)

关于如何使其可折叠的任何提示？

编辑：感谢您的帮助。抱歉，我不能接受一个以上的正确答案。所以 Shikiryu 的解决方案也是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:02:28.757

**首先**，您需要生成与该示例相同的 HTML（使用 ul 和 li 而不是 div）

```
$(data).find('method').each(function(){
    var hasChild = $(this).children('childcall').length > 0;
    curLi += '<li';
    curLi += ((hasChild) ? ' class="category plusimageapply">': '>');
    curLi += $(this).attr('name');
    if(hasChild){
        curLi += '<ul>';
         $(this).children('childcall').each(function(){
             var name = $(this).attr('name');
             curLi += '<li><a href="'+name+'">'+name+'</a></li>';
         });
        curLi += '</ul>';
    }
    curLi += '</li>';
 });
$('#test').append(curLi); 
```

*请注意，它可以进行优化。*

**然后**，您需要指出一些 CSS（隐藏子项、添加 + 和 - 等）

```
.category ul{display:none;} 
```

**最后**，你需要申请他们的JS

```
$('li.category').click(function(event){
    if($(this).is('.plusimageapply')) {
        $(this).children().show();
        $(this).removeClass('plusimageapply');
        $(this).addClass('minusimageapply');
    }
    else
    {
        $(this).children().hide();
        $(this).removeClass('minusimageapply');
        $(this).addClass('plusimageapply');
    }
}); 
```

这给出了：http: [//jsfiddle.net/dujRe/1/](http://jsfiddle.net/dujRe/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:01:22.300

如果您需要完全按照链接中给出的方式打印

1.  编辑您的 js 代码以输出这样的 html

    ```
     <ul>
         <li class="category">Menu 1
             <ul>
                 <li>Menu 1 sub 1</li>
                 <li>Menu 2 sub 2</li>
             </ul>
         </li>
         <li>Menu 2</li>
     </ul> 
    ```

2.  我们提供的 JS 代码

    ```
     $('li.category').addClass('plusimageapply');
     $('li.category').children().addClass('selectedimage');
     $('li.category').children().hide();
     $('li.category').each(
         function(column) {
             $(this).click(function(event){
                 if (this == event.target) {
                     if($(this).is('.plusimageapply')) {
                         $(this).children().show();
                         $(this).removeClass('plusimageapply');
                         $(this).addClass('minusimageapply');
                      }
                      else
                      {
                         $(this).children().hide();
                         $(this).removeClass('minusimageapply');
                         $(this).addClass('plusimageapply');
                       }
                   }
               });
          }
     ); 
    ```

**更新1：试试这个JS代码，它会打印出我在第一点写的结果** **注意：代码没有优化**

```
 $(document).ready(function(){
       var xml = "<root> \
            <method name='A'> \
            <childcall name='B'></childcall> \
            <childcall name='C'></childcall> \
            </method> \
            <method name='B'> \
            <childcall name='D'></childcall> \
            </method> \
            <method name='C'> \
            <childcall name='D'></childcall> \
            <childcall name='E'></childcall> \
            </method> \
            </root>";

        var data = $.parseXML(xml);
        console.log(data);

        var htmltxt="test<ul>";
        $(data).find('method').each(function(){
            var namenode = $(this).attr('name');
            var count = 0;
            $(this).children('childcall').each(function(){ count++; });
            if(count>0){
                htmltxt = htmltxt + "<li='category'>" + namenode +"<ul>";
                $(this).children('childcall').each(function(){ 
                        var name = $(this).attr('name');
                        htmltxt = htmltxt + "<li>" + name + "</li>";    
                });
                htmltxt = htmltxt + "</ul></li>";
            }else{
                htmltxt = htmltxt +"<li>"+namenode+"</li>";
            }
         });
        htmltxt = htmltxt + "</ul>";
        $("#page-wrap").html(htmltxt);
  }); 
```

**更新 2 JSFiddle**

[http://jsfiddle.net/faraqsa/CKa6V/](http://jsfiddle.net/faraqsa/CKa6V/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T09:46:34.047

使用 JQuery 的切换效果，它是这样的：

```
$("#CollapseTrigger").click(function () {
    $("#ListToBeHidden").toggle("slow");
}); 
```

# android - 根据列表在地图上显示位置？

> ID：15922114
> 
> 赞同：2
> 
> 时间：2013-04-10T09:34:23.463
> 
> 标签：android, google-maps, listview, android-activity, android-mapview

我正在尝试将 Google`Mapview`和 a`ListView`合二为一`activity`。`Mapview`应取`2/3`上侧，列表下侧的 1/3（纵向）。

以这种方式假设它是肖像：http: [//i.stack.imgur.com/IoGjr.png](http://i.stack.imgur.com/IoGjr.png)

`MapView`和,都`ListView`将收到相同的`JSON`信息，他们将得到`onCreate()`。我已经能够适应屏幕，并获取它获取位置的`MapView`数据。**但我希望我得到的位置****也显示在上面****，**有人可以告诉我，如何显示吗？`2/3``ListView`**`listView``map`**`location``map`

这是我的代码：

// 将请求设为私有的 url 静态`String url = ""`；//这里传递url

```
// JSON Node names
    private static final String TAG_LOCATION = "location";
    private static final String TAG_LOCATION1= "location";
    private static final String TAG_LOCATION_ID = "LocationID";
    private static final String TAG_NAME = "Name";
    private static final String TAG_PHONE = "Phone";
    private static final String TAG_FORMATTED_PHONE = "FormattedPhone";
    private static final String TAG_ADDRESS = "Address";
    private static final String TAG_CROSS_STREET = "CrossStreet";
    private static final String TAG_LAT = "Lat";
    private static final String TAG_LNG = "Lng";
    private static final String TAG_DISTANCE= "Distance";
    private static final String TAG_POSTAL_CODE = "PostalCode";
    private static final String TAG_CITY = "City";
    private static final String TAG_STATE = "State";
    private static final String TAG_COUNTRY= "Country";

 // contacts JSONArray
    JSONArray location = null;
    JSONObject location1=null;

    ListView locationList;
    private MapView mapView;
    LocationManager lm;
    LocationListener locationListener;
    MapController mapController;

    private ListAdapter adapter;

    private static final double lat = 22.722990;
    private static final double lng = 75.857849;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.view_map);

        locationList=( ListView)findViewById(R.id.list_Surroundings);

        // Hashmap for ListView
        ArrayList<HashMap<String, String>> locationOfList = new ArrayList<HashMap<String, String>>();

        adapter = new SimpleAdapter(this, locationOfList,
                R.layout.list_item1,
                new String[] { TAG_NAME }, new int[] {
                        R.id.name});

        locationList.setAdapter(adapter);

     // Creating JSON Parser instance
        JSONParser jParser = new JSONParser();

     // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(url);

        try {
         // Getting Array of Category
        location=json.getJSONArray(TAG_LOCATION);

        //looping through all categories
        for(int i = 0; i < location.length(); i++){
            JSONObject c = location.getJSONObject(i);
            JSONObject c1=c.getJSONObject(TAG_LOCATION1);

            // Storing each json item in variable
                String LocationID = c1.getString(TAG_LOCATION_ID);
                String Name = c1.getString(TAG_NAME);
                String Phone = c1.getString(TAG_PHONE);
                String FormattedPhone = c1.getString(TAG_FORMATTED_PHONE);
                String Address = c1.getString(TAG_ADDRESS);
                String CrossStreet = c1.getString(TAG_CROSS_STREET);
                String Lat = c1.getString(TAG_LAT);
                String Lng = c1.getString(TAG_LNG);
                String Distance = c1.getString(TAG_DISTANCE);
                String PostalCode = c1.getString(TAG_POSTAL_CODE);
                String City = c1.getString(TAG_CITY);
                String State = c1.getString(TAG_STATE);
                String Country = c1.getString(TAG_COUNTRY);

            // creating new HashMap
               HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
               map.put(TAG_LOCATION_ID, LocationID);
               map.put(TAG_NAME, Name);
               map.put(TAG_PHONE, Phone);
               map.put(TAG_FORMATTED_PHONE, FormattedPhone);
               map.put(TAG_ADDRESS, Address);
               map.put(TAG_CROSS_STREET, CrossStreet);
               map.put(TAG_LAT, Lat);
               map.put(TAG_LNG, Lng);
               map.put(TAG_DISTANCE, Distance); 
               map.put(TAG_POSTAL_CODE, PostalCode);
               map.put(TAG_CITY, City);
               map.put(TAG_STATE, State);
               map.put(TAG_COUNTRY, Country);

               // adding HashList to ArrayList
               locationOfList.add(map);
        }
        } catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();
        }

                mapView = (MapView) findViewById(R.id.mapView);
        mapView.setBuiltInZoomControls(true);

        List mapOverlays = mapView.getOverlays();
        Drawable drawable = this.getResources().getDrawable(
                R.drawable.map_pin_red);
        CustomItemizedOverlay itemizedOverlay = new CustomItemizedOverlay(
                drawable, this);

        GeoPoint point = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));
        OverlayItem overlayitem = new OverlayItem(point, "Hello",
                "I'm in Athens, Greece!");

        itemizedOverlay.addOverlay(overlayitem);
        mapOverlays.add(itemizedOverlay);

        mapController = mapView.getController();

        mapController.animateTo(point);
        mapController.setZoom(10);

        lm=(LocationManager)getSystemService(Context.LOCATION_SERVICE);
        locationListener= new MylocationListener();
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListener);
    }

    public class MylocationListener implements LocationListener{

        @Override
        public void onLocationChanged(Location loc) {
            // TODO Auto-generated method stub
            if(loc!=null){
                Toast.makeText(getBaseContext(), "Location Changed : Lat:" +loc.getLatitude() + "Lng: " + loc.getLongitude(), Toast.LENGTH_SHORT).show();
            }
            GeoPoint point = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));
            mapController.animateTo(point);
            mapController.setZoom(10);
        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }

    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

} 
```

# php - PHPSESSID 在 ios webapp 上删除

> ID：15922135
> 
> 赞同：0
> 
> 时间：2013-04-10T09:35:24.780
> 
> 标签：php, ios, session, web-applications, cookies

我正在制作一个需要完全匿名的网站，但我想向该用户发送消息，现在我插入用户 cookie：PHPSESSID。

但我需要让它在 iPhone/iPad 上工作，如果我关闭 webapp 删除 iPhone PHPSESSID cookie，那么有什么建议可以让它工作，cookie 不会被更改或任何替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:38:07.030

标准的 PHP 行为是让会话 cookie 在浏览器关闭后过期。请参阅此相关问题：[如何在 PHP 中创建持久会话？](https://stackoverflow.com/questions/9797913/how-do-i-create-persistent-sessions-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:43:51.420

你应该检查你的浏览器关于cookies的设置，看看[这里](http://support.apple.com/kb/ta38619)，这可能对你有帮助。

# php - PHP 会议

> ID：15922136
> 
> 赞同：1
> 
> 时间：2013-04-10T09:35:28.733
> 
> 标签：php, session

我有一个简单的登录系统。比如localhost/login.php 我在使用session时记得用户之前是否登录过。我尝试清除firefox浏览器历史并刷新当前页面（管理员面板页面），页面会被转发到登录页面。

我想知道为什么我只是清除浏览器历史记录并且会话也会被删除？会话存储在服务器中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T09:39:41.170

是的会话存储在服务器上。但是对该会话（session_id）的引用存储在客户端的cookie中。当您使用 cookie 清除浏览器历史记录时，您会丢失服务器上会话存储的参考 ID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T09:40:24.850

那是因为会话通常依靠 Cookies（存储在客户端浏览器中）来识别客户端并将其链接到存储的会话。删除历史记录后，会话仍然存在于服务器上，但不再链接到客户端。

会话也可以设置为在 URL 中使用 GET 变量而不是 cookie。但这通常被认为是一种安全风险，因为用户有时倾向于将他们的 URL 发送给其他人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T09:38:41.627

如[function.session-id.php 所示](http://www.php.net/manual/en/function.session-id.php "function.session-id.php")

会话使用 cookie 来保存`session_id`值。因此，当您清除浏览器缓存/cookies/历史记录时，它也会清除`session_id`并生成一个新的！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T10:30:17.907

我同意马亨德拉的观点。存储在`$_SESSION[]`服务器上，但引用存储在客户端，因此当您清除会话时，客户端会话没有任何值可用于比较会话，因此它也会清除服务器会话。

用于`unset($_SESSION[])`清除指定的会话对象

# mysql - 内部加入mysql PHP，如何加入关系列

> ID：15922138
> 
> 赞同：-1
> 
> 时间：2013-04-10T09:35:32.287
> 
> 标签：mysql, select, inner-join

我有两张桌子，

“用户”和“权限”

users 有一列：'permissions' 类型为*int*。

权限有一列：*int类型的'id'（AI）*

我想选择一个用户并返回 id = 与用户 id 相同的权限列的值。

我试过这个：

```
$queryString = "
    SELECT 
        u.*, 
        p.value
    FROM 
        users u,
        permissions p
    WHERE 
        username = '$username' AND
        password = '" . md5( $password ) . "'
    INNER JOIN 
        user u on p.id = u.permissions
"; 
```

因此，不要返回用户：

> id = 1，用户名 =“bob”，权限 = 3

它会说

> 权限=“管理员”

因为这是权限表中的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:44:23.657

```
select u.*, p.value from users u, permissions p 
where
p.id=u.permissions
and
u.username='$username'
and
u.password='" . md5( $password ) . "' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:48:50.460

你能提供你的两个表的结构吗？

我猜你的查询应该是这样的，我假设`p.value`包含权限的名称：

```
$queryString = "
SELECT 
    u.id,
    u.username,
    p.value AS permissions
FROM 
    users u
INNER JOIN
    permissions p
ON
    p.id = u.permissions
WHERE 
    username = '$username' AND
    password = '" . md5( $password ) . "'
"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:41:46.833

试试看。

```
 $queryString = "SELECT u.*, p.value
    FROM users AS u
    INNER JOIN permissions AS p ON u.permissions = p.id
    WHERE 
       u.username = '$username' AND
       u.password = '" . md5( $password ) . "'" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T09:37:47.003

```
$queryString = "
    SELECT 
        u.*, 
        p.value
    FROM 
        users u INNER JOIN 
        permissions p ON
        p.id = u.permissions
    WHERE 
        u.username = '$username' AND
        u.password = '" . md5( $password ) . "'

"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T09:40:13.280

这应该会给你结果：

```
SELECT  
    p.value
FROM 
    permissions p
INNER JOIN 
    users u on p.id = u.permissions
WHERE 
    username = '$username' AND
    password = '" . md5( $password ) . "' 
```

# asp.net - User.Identity.Name 到 SQL 参数

> ID：15922140
> 
> 赞同：1
> 
> 时间：2013-04-10T09:35:36.350
> 
> 标签：asp.net, sql, select, insert, sqldatasource

我有这个代码：

```
protected void Page_Load(object sender, EventArgs e)
{
        SqlDataSource4.SelectParameters["zadavatel"].DefaultValue = this.Page.User.Identity.Name;
} 
```

标记：

```
<InsertParameters>
    <asp:Parameter Name="zadavatel" Type="String" />
</InsertParameters>

<asp:SqlDataSource ID="SqlDataSource4" runat="server" 
     ConnectionString="<%$ ConnectionStrings:fotbalConnectionString %>" 
     DeleteCommand="DELETE Diskuze WHERE Id_Diskuze=@Id_Diskuze" 
     SelectCommand="SELECT * FROM [Diskuze] WHERE ([Id_Zapasu] = @Id_Zapasu) ORDER BY [Datum_Vytvoreni] ASC" 
     InsertCommand="INSERT INTO Diskuze (Autor, TextD, Ip_Adresa, Id_Zapasu) VALUES (@zadavatel, @TextD, '127.0.0.1', @Id_zapasu)"> 
```

我想将参数插入`zadavatel`Autor ...但我收到此错误：

> System.NullReferenceException: Odkaz na objekt není nastaven na instanci objektu。（你调用的对象是空的。）

我不知道问题出在哪里：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:36:30.530

您应该使用`InsertParameters["@zadavatel"]`而不是`SelectParameters["zadavatel"]`.

# c# - 排除特定网页上的会话跟踪

> ID：15922148
> 
> 赞同：2
> 
> 时间：2013-04-10T09:36:00.380
> 
> 标签：c#, asp.net, webforms

我有一个用于提供 RSS 提要的页面，但是每次用户的 RSS 客户端与提要同步时，它都会触发会话状态 (Session_Start)，从而使访问者计数跟踪数字出现偏差。我希望我可以使用一些代码在打开这个特定页面时不触发会话变量（尽管是通过 RSS）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:43:46.373

您可以使用 web.config 中的以下条目禁用特定位置的会话状态：

```
 <location path="MyRssFeedLocation">
    <system.web>
      <pages enableSessionState="false" />
    </system.web>
  </location> 
```

# c# - Visual Studio 编辑器的行为很奇怪！显示每个实例的编译错误

> ID：15922152
> 
> 赞同：0
> 
> 时间：2013-04-10T09:36:02.010
> 
> 标签：c#, asp.net, visual-studio, visual-studio-2008, editor

每当我在 Visual Studio 中编译任何网站时，我都会遇到多个编译错误，但代码可以完美执行。我假设我的 vs 编辑器更改了某些设置。

以下是列表中的一些错误：

> 非法语法。期望有效的开始名称字符。D:\Gourav\WebSite1\Demo.aspx
> 
> 字符 '%'，十六进制值 0x25 在 XML 名称中是非法的。
> 
> 字符“@”，十六进制值 0x40 在 XML 名称的开头是非法的。
> 
> 字符“@”，十六进制值 0x40 在 XML 名称中是非法的。

请帮忙！！..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:59:24.063

如果不了解更多信息就很难说，但是这里有[一个链接，](http://www.a2zmenu.com/Blogs/AspNet/Special%20Characters%20in%20AppSetting.aspx)关于尝试像这样在 web.config 中放置正则表达式

```
<appSettings>
    <add key="SpecialCharacterRegEx" value="[~” # % & * :" < > ? / \ { | }]+"/>
</appSettings> 
```

这会产生如下编译错误：

```
1\. Character ' ', hexadecimal value 0x20 is illegal in an XML name
2\. Illegal syntax. Expecting valid start namecharacter
3\. Application Configuration file"App.config" is invalid 
```

诀窍是用类似的东西替换它：

```
<appSettings>
    <add key="SpecialCharacterRegEx" value="[~&quot; # % &amp; * : &lt; &gt; ? / \ { | }]+"/>
</appSettings> 
```

我敢打赌，您的问题与 Demo.aspx 中的类似。

# batch-file - 如何使用批处理文件更改我的计算机音量？

> ID：15922157
> 
> 赞同：0
> 
> 时间：2013-04-10T09:36:09.293
> 
> 标签：batch-file, time, alarm

我正在制作一个批量警报，但我需要一种自动调高声音的方法，所以我不必这样做。

当前的警报代码（如果您有任何其他改进，请随时提出建议）。

```
@ECHO OFF
color 0a
cls
echo Ezlo alarm system
echo The curent time is: %time%
set /p INPUT=What time should the alarm be set for? (24hr) 
:time
cls
echo Ezy alarm
echo The curent time is: %time%
Echo Alarm is set for %input%
if '%TIME%'=='%INPUT%' GOTO ALARM
GOTO time
:ALARM
ECHO get up!
start "D:\Users\nic\Desktop\ezlo alarm\alarmtone.mp3"
echo press space to close
PAUSE >nul 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:04:24.077

当然，这很粗糙，但它确实有效。键码`0xAF`是音量增大的[虚拟键](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731%28v=vs.85%29.aspx)。这里有一点 JScript 来发送那个关键代码 50 次。

```
var shl = new ActiveXObject("WScript.Shell");
for (var i=0; i<50; i++) {
    shl.SendKeys(String.fromCharCode(0xAF));
} 
```

* * *

您可以使用批处理 + JScript 混合格式将其合并到批处理脚本中。我还对您的脚本进行了一些其他调整，将当前时间退格并重新输出，而不是在每个循环上清除屏幕，使时间比较成为数学比较以允许输入而`hh:mm`无需指定秒和厘秒，否则只需在这里和那里进行一些抛光。

```
@if (@a==@b) @end /*

:: batch portion

@ECHO OFF
setlocal
cls && color 0a
:: capture backspace character to %BS%
for /f %%a in ('"prompt $H&for %%b in (1) do rem"') do set "BS=%%a"
echo Ezlo alarm system
call :gettime now
echo The curent time is: %now%
set /p INPUT=What time should the alarm be set for? (24hr) 
echo;

if "%now%" geq "%input%" (set tomorrow=1) else set tomorrow=

if defined tomorrow (
    echo Alarm is set for %input% tomorrow.
) else echo Alarm is set for %input%.

set /p "=The curent time is: "<NUL
:time
call :gettime now
set /p "=%now%"<NUL
if "%now%" geq "%INPUT%" (
    if not defined tomorrow GOTO ALARM
) else if defined tomorrow set tomorrow=
ping -n 2 0.0.0.0 >NUL
call :len %now% len
for /l %%I in (1,1,%len%) do set /p "=%BS%"<NUL
GOTO time

:ALARM
echo;
ECHO get up!
cscript /nologo /e:jscript "%~f0"
start "" "D:\Users\nic\Desktop\ezlo alarm\alarmtone.mp3"
echo press space to close
PAUSE >nul
color 07
exit /b

:gettime <varname>
set "gtvarnow=%time:~0,-3%"
set "%~1=%gtvarnow: =%"
goto :EOF

:len <string> <varname>
set len=0
set str=%~1
:len_loop
if defined str (
    set "str=%str:~1%"
    set /a "len+=1"
    goto :len_loop
) else set "%~2=%len%"
goto :EOF

:: JScript portion */

var shl = new ActiveXObject("WScript.Shell");
for (var i=0; i<50; i++) {
    shl.SendKeys(String.fromCharCode(0xAF));
} 
```

* * *

不幸的是，没有简单的方法以编程方式检测系统音量是否已静音。当然，有一个切换静音的关键代码，但没有简单的编程方法来检查它是否需要被触发。如果您需要您的脚本强制系统不静音，最简单的解决方案是使用第三方实用程序，例如[NirCmd](http://www.nirsoft.net/utils/nircmd.html)。有关详细信息，请参阅[此答案](https://stackoverflow.com/a/2216509/1683264)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:40:47.907

[http://gallery.technet.microsoft.com/scriptcenter/PowerShell-Set-PC-Volume-1737b160](http://gallery.technet.microsoft.com/scriptcenter/PowerShell-Set-PC-Volume-1737b160) 您可以从批处理文件中调用此 exe 来控制音量。但我不确定您是否可以直接从批处理文件中执行此操作

# redirect - DNS - 我是否需要 A 记录来使用 CNAME 重定向整个站点？

> ID：15922158
> 
> 赞同：2
> 
> 时间：2013-04-10T09:36:15.803
> 
> 标签：redirect, dns, record, cname

我是 DNS 的新手，并认为我了解 CNAME 的工作原理，直到我读到您还需要一个 A 记录才能使用它。

我想做的很简单——只需将所有请求从 *.mysite.mobi 重定向到 m.mysite.com 。

所以，在 mysite.mobi 的 DNS 中，我要输入...

```
*.mysite.mobi.    CNAME    m.mysite.com. 
```

...但是我是否也需要像这样指定 A 记录？...

```
m.mysite.com.    A    123.456.789.0 (The IP address of m.mysite.com) 
```

...但如果这是正确的，这意味着我需要在上述 DNS 记录（或 mysite.mobi）和 m.mysite.com 的 DNS 记录中指定 m.mysite.com 的 IP 地址 - 重复这似乎有点不必要。

那么任何人都可以帮助我以正确/最佳方式实现重定向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:16:04.740

最后，我改用了网络转发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-25T12:36:10.717

您只需要一条**A**记录即可将站点重定向到另一个站点。**CNAME**记录是别名。据我所知，并非所有注册商都支持向**CNAME**记录添加通配符，因此在您的情况下，您可能需要也可能不需要指定别名。一个非常常用的是前缀*www*。

[在这里](https://stackoverflow.com/a/47486089/4782740)用一个例子回答一个类似的问题。

# java - Android 检查端口上的 WebService 是否可用

> ID：15922160
> 
> 赞同：0
> 
> 时间：2013-04-10T09:36:18.260
> 
> 标签：java, android, connection

我需要检查服务是否在特定 IP:PORT/service/ 上运行，如果没有则回退到另一个。我在应用程序的一个地方执行此操作。

如果它还活着，有没有办法只 PING 它而不是尝试向它发送有效请求并捕获可能的 IO 错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-13T18:09:30.763

我解决这个问题的方法是：

我们在后端实现了一个 Ping 方法，该方法`/service/ping`以 status 响应`HTTP_OK (200)`。我遍历每个需要测试的 IP 地址，设置一个非常短的连接超时，看看我是否到达一个我收到成功连接的地址（返回的状态为 200）。

我必须通过本地 wifi 网络上的所有 IP 并找到我的本地网络服务的托管位置。由于设备连接到同一个 wifi 网络，我设置了 200 毫秒的连接超时，这足以确保检查速度很快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:39:46.090

请参阅已接受的答案以检查 Web 服务可用性，如果 Web 服务不存在（其他情况），则尝试回退连接

[android中的webservice可用性检查](https://stackoverflow.com/questions/6507535/webservice-availability-check-in-android)

# asp.net - 如何设计在线/离线使用的预订系统？

> ID：15922161
> 
> 赞同：1
> 
> 时间：2013-04-10T09:36:19.413
> 
> 标签：asp.net, sql-server-2008, web-applications

我需要开发一个酒店预订系统，该系统将用于内部预订（用于步入式客户）和网站上的在线预订。什么是最好的方法

a) 有两个应用程序（在线/离线）和数据库，并定期同步它们 b) 在 Web 服务器上有一个 Web 应用程序和一个数据库

这两种方法的优缺点是什么？

我将使用 c#/sql 服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:40:13.420

我可以看到第一个选项的一个明显缺点是，如果您间歇性地同步应用程序，您最终可能会遇到双重预订房间的情况。因此，鉴于您描述的情况，我不能真正推荐第一种方法。

这个论点的另一面是，使用单个 Web 应用程序，您不会遇到与意外重复预订相关的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:01:32.493

为什么要有两个应用程序？对于未预约的客户，您的主管也可以使用相同的 Web 应用程序和数据库，避免重复预订。

# c# - TableAdapter 不保存对 SQL 表的更改

> ID：15922164
> 
> 赞同：0
> 
> 时间：2013-04-10T09:36:29.517
> 
> 标签：c#, database, winforms

再会！

我是 C# 的新手。

我在 Windows 窗体中有数据集，并且已向数据集添加了一条记录。然后我调用 TableAdapter.Update(MyTable) (RowState is in added mode) 。进行了更改，我可以在绑定到 SQL MyTable 的 DataGridView 中看到它们。我可以关闭我的应用程序并重新开始，我会看到添加的记录。

```
 private void button1_Click(object sender, EventArgs e)
    {
        DimaeSQLDS dsAddToDima = new DimaeSQLDS();

        using (DimaeSQLDSTableAdapters.OrganizationsTableAdapter orgAdapter = new DimaeSQLDSTableAdapters.OrganizationsTableAdapter())
        {
            orgAdapter.Fill(dsAddToDima.Organizations);
            DimaeSQLDS.OrganizationsRow organizationsRow = dsAddToDima.Organizations.NewOrganizationsRow();
            organizationsRow.Address = tbINN.Text;
            organizationsRow.OrgName = tbOrgName.Text;
            organizationsRow.UrFiz = 0;
            dsAddToDima.Organizations.Rows.Add(organizationsRow); //adds row to DataSet      
            this.Validate();
            orgAdapter.Update(dsAddToDima.Organizations);
        }

        this.Close();
    } 
```

**现在是我的问题**：

我转到服务器资源管理器-> MyTable（我在其中添加了记录）-> 右键单击​​“显示表数据”，我看到表中没有添加任何记录。然后我再次启动我的应用程序......在我查看 MyTable 后，我新添加的记录被删除了。

我无法理解这个魔法！请帮我！

！！！！更新！！！！！

**这是我的第一个表格。父表格**

```
namespace DimaeApplication
{
    public partial class fOrganizations: Form
    {

        #region variables
        fAddOrganization addOrganization;
        fContainer container;
        #endregion

        public fOrganizations()
        {
            InitializeComponent();
        }

        private void fOrganizations_Load(object sender, EventArgs e)
        {            
            // TODO: This line of code loads data into the 'dimaeSQLDS.Organizations' table. You can move, or remove it, as needed.
            this.organizationsTableAdapter.Fill(this.dimaeSQLDS.Organizations);
        }

        public void ReloadBindigs(object sender)
        {

            if (this.tbSearchOrganization.Text == string.Empty)
                this.organizationsTableAdapter.Fill(this.dimaeSQLDS.Organizations);
            else
                try
                {
                    string searchParam = "%" + this.tbSearchOrganization.Text + "%";
                    this.organizationsTableAdapter.FillBy(this.dimaeSQLDS.Organizations, searchParam);
                }
                catch (System.Exception ex)
                {
                    System.Windows.Forms.MessageBox.Show(ex.Message);
                }

        }

        private void tsbCreateOrg_Click(object sender, EventArgs e)
        {
            if (addOrganization == null || addOrganization.IsDisposed)
            {

                addOrganization = new fAddOrganization();
                addOrganization.MdiParent = container ;
                addOrganization.Show();
            }
        }

    }
} 
```

**我的第二种形式**。孩子。我在这里添加记录

```
namespace DimaeApplication
{
    public partial class fAddOrganization : Form
    {
        public fAddOrganization()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            DimaeSQLDS dsAddToDima = new DimaeSQLDS();

        using (DimaeSQLDSTableAdapters.OrganizationsTableAdapter orgAdapter = new DimaeSQLDSTableAdapters.OrganizationsTableAdapter())
        {
            orgAdapter.Fill(dsAddToDima.Organizations);
            DimaeSQLDS.OrganizationsRow organizationsRow = dsAddToDima.Organizations.NewOrganizationsRow();
            organizationsRow.Address = tbINN.Text;
            organizationsRow.OrgName = tbOrgName.Text;
            organizationsRow.UrFiz = 0;
            dsAddToDima.Organizations.Rows.Add(organizationsRow); //adds row to DataSet      
            this.Validate();
            orgAdapter.Update(dsAddToDima.Organizations);
        }

            this.Close();
        }

        private void fAddOrganization_FormClosed(object sender, FormClosedEventArgs e)
        {
            fOrganizations org = new fOrganizations();           
            org.ReloadBindigs(org);
        }      
    }
} 
```

告诉我您是否需要为每个表单生成代码。

还是非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:32:42.403

您似乎正在使用断开连接的数据集。请尝试以下方法：

```
 Organizations table = new DimaeSQLDS.Organizations();
using(OrganizationsTableAdapter orgAdapter = new DimaeApplication.DimaeSQLDSTableAdapters.OrganizationsTableAdapter())
{
    orgAdapter.Fill(table);
    DimaeSQLDS.OrganizationsRow organizationsRow = table.NewOrganizationsRow();
    organizationsRow.Address = tbINN.Text;            
    organizationsRow.OrgName = tbOrgName.Text;           
    dsAddToDima.Organizations.Rows.Add(organizationsRow); //adds row to DataSet
    orgAdapter.Update(dsAddToDima.Organizations);
} 
```

Fill(table) 是重要的部分。即使表是空的，它也会启动对数据库的更改跟踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:00:18.327

实际上，当您创建使用 SQL CE 数据库的项目时，它会创建 SQL CE 数据库的两个副本，这些副本位于 mydocuments 和驱动器 c 上的项目文件夹中。

使用 SQL CE 数据库的确切位置更改连接字符串。

例子 ：

```
Data Source=C:\\DimaeSQL.sdf;Persist Security Info=False; 
```

此致

# cassandra - 启动 cassandra 时会发生什么？

> ID：15922169
> 
> 赞同：0
> 
> 时间：2013-04-10T09:36:40.590
> 
> 标签：cassandra

  我是 cassandra 的新手。但是我对启动 cassandra 节点有一些基本的疑问。

```
当我有很多键空间时，Cassandra 是否会在启动时将所有键空间加载到缓存中？
还是将 Keyspces 的特定属性加载到缓存中？

```

提前致谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T04:47:46.780

如果您启用了缓存保存，Cassandra 将加载键和/或行缓存的最新快照。否则，将不进行特定的预热。（通常，Cassandra 数据集比系统内存大得多。）

# c# - 用 DataGridView 信息填充文本框

> ID：15922173
> 
> 赞同：0
> 
> 时间：2013-04-10T09:36:43.817
> 
> 标签：c#, winforms

我正在尝试通过表单（在 WinForms 中）更新数据库信息。DataGridView 在 Form1 中显示数据库信息（其中还包含一个打开 Form2 的按钮（更新表单））。要更新信息，我必须在数据网格中选择要更新的行，然后单击按钮（打开 Form2）。当更新表单打开时，其中的文本框应填充 DataGridRows 信息。现在这是我被卡住的地方，文本框没有被填充（没有错误）。我究竟做错了什么 ？

这是我正在使用的代码：

```
 MainForm getMainForm = new MainForm();

        private void EditMemberForm_Load(object sender, EventArgs e)
        {
            DataGridViewCell cell = null;

            foreach (DataGridViewCell selectedCell in getMainForm.MembersGridView.SelectedCells)
            {
                cell = selectedCell;
                break;
            }

            if (cell != null)
            {
                DataGridViewRow row = cell.OwningRow;

                EditFirstNameTextBox.Text = row.Cells["FirstNameColumn"].Value.ToString();
                EditLastNameTextBox.Text = row.Cells["LastNameColumn"].Value.ToString();
                EditPersonalIdTextBox.Text = row.Cells["PersonalIdColumn"].Value.ToString();
                EditCityComboBox.Text = row.Cells["CityColumn"].Value.ToString();
                EditPhoneNumberTextBox.Text = row.Cells["PhoneNumberColumn"].Value.ToString();
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:44:48.633

```
MainForm getMainForm = new MainForm(); 
```

问题是您正在创建新的主窗体并尝试从新创建的主窗体中获取选定的行。

创建时，`EditMemberForm`您可以将值作为参数传递给`EditMemberForm`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:47:45.267

当您单击按钮时，而不是创建一个新的 MainForm，而是将您选择的对象从您的 mainform 传递到 Form2...

例子 ：

```
private void Form2Button_Click(object sender, EventArgs e){
  Form f=new Form2(dataGridView.SelectedRow);
  f.show();
} 
```

在你的 Form2 构造函数中：

```
object myRow;

public Form2(object myRow){
  this.myRow=myRow
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:53:46.710

我想通了。

我在打开 UpdateForm（来自 MainForm）的按钮中使用了此代码。

```
 EditMemberForm getEditMemberForm = new EditMemberForm();
                DataGridViewCell cell = null;                

                foreach (DataGridViewCell selectedCell in MembersGridView.SelectedCells)
                {
                    cell = selectedCell;
                    break;
                }

                if (cell != null)
                {
                    DataGridViewRow row = cell.OwningRow;

                    getEditMemberForm.EditFirstNameTextBox.Text = row.Cells["FirstNameColumn"].Value.ToString();
                    getEditMemberForm.EditLastNameTextBox.Text = row.Cells["LastNameColumn"].Value.ToString();
                    getEditMemberForm.EditPersonalIdTextBox.Text = row.Cells["PersonalIdColumn"].Value.ToString();
                    getEditMemberForm.EditCityComboBox.Text = row.Cells["CityColumn"].Value.ToString();
                    getEditMemberForm.EditPhoneNumberTextBox.Text = row.Cells["PhoneNumberColumn"].Value.ToString();
                }

                getEditMemberForm.ShowDialog(); 
```

这完美地工作。感谢任何试图提供帮助的人，欢呼:)！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T09:56:13.610

我最近遇到了类似的问题，我就这样解决了。

表格1：

```
public void NotifyMe(string s, string s2, string s3, string s4, string s5)
{
    if (textBox1.InvokeRequired)
    {
        textBox1.Invoke((MethodInvoker)delegate { textBox1.Text = s; });
    }
    else
    {
        textBox1.Text = s;
    }

    //...
} 
```

从 Form1 中打开 Form2，如下所示：

```
using (Form2 form = new Form2())
{
     // passing this in ShowDialog will set the .Owner 
     // property of the child form
     form.ShowDialog(this);
} 
```

表格2：

```
parent = (Form1)this.Owner;
parent.NotifyMe(s, s2, s3, s4, s5); 
```

# c# - 从 shell 运行的 ffmpeg 可以正常运行，但在 .NET 中调用时不能正常运行

> ID：15922175
> 
> 赞同：11
> 
> 时间：2013-04-10T09:36:47.340
> 
> 标签：c#, .net, ffmpeg, cygwin

我正在尝试在 C# 程序中使用 ffmpeg（使用 Cygwin 在 Windows 上编译），方法是使用`Process`该类生成 ffmpeg 实例。但是，我遇到了一个没有多大意义的奇怪错误。

当我直接从 shell（无论是 Cygwin 的 bash、PowerShell、cmd）运行 ffmpeg 时，ffmpeg 可以正确解码和重新编码文件而不会出现任何问题：

```
PS C:\audio> ffmpeg -i .\sound1.wav -acodec libvorbis -f ogg abc.ogg
ffmpeg version 1.2 Copyright (c) 2000-2013 the FFmpeg developers
  built on Apr  8 2013 15:10:40 with gcc 4.5.3 (GCC)
  configuration: --disable-encoder=vorbis --enable-libvorbis
  libavutil      52\. 18.100 / 52\. 18.100
  libavcodec     54\. 92.100 / 54\. 92.100
  libavformat    54\. 63.104 / 54\. 63.104
  libavdevice    54\.  3.103 / 54\.  3.103
  libavfilter     3\. 42.103 /  3\. 42.103
  libswscale      2\.  2.100 /  2\.  2.100
  libswresample   0\. 17.102 /  0\. 17.102
[wav @ 0x800538a0] max_analyze_duration 5000000 reached at 5015510 microseconds
Guessed Channel Layout for  Input Stream #0.0 : stereo
Input #0, wav, from '.\sound1.wav':
  Metadata:
    encoder         : Lavf54.63.104
  Duration: 00:00:05.76, bitrate: 1411 kb/s
    Stream #0:0: Audio: pcm_s16le ([1][0][0][0] / 0x0001), 44100 Hz, stereo, s16, 1411 kb/s
Output #0, ogg, to 'abc.ogg':
  Metadata:
    encoder         : Lavf54.63.104
    Stream #0:0: Audio: vorbis, 44100 Hz, stereo, fltp
Stream mapping:
  Stream #0:0 -> #0:0 (pcm_s16le -> libvorbis)
Press [q] to stop, [?] for help
size=      55kB time=00:00:05.74 bitrate=  78.5kbits/s
video:0kB audio:51kB subtitle:0 global headers:4kB muxing overhead 0.817473% 
```

该文件播放良好，我可以编码为 WAV 或我喜欢的任何其他格式。但是，当我使用以下代码从 C# 调用 ffmpeg 时：

```
string tempfile = Path.GetTempFileName();
FileStream tempfilestr = File.OpenWrite(tempfile);
input.CopyTo(tempfilestr);

ProcessStartInfo pstart = new ProcessStartInfo("ffmpeg", string.Format("-i \"{0}\" -v verbose -y -f wav -", tempfile));
pstart.CreateNoWindow = true;
pstart.ErrorDialog = false;
pstart.RedirectStandardOutput = true;
pstart.RedirectStandardError = true;
pstart.UseShellExecute = false;

Process proc = new Process();
proc.StartInfo = pstart;
proc.Start();
StreamReader stdout = proc.StandardOutput;
StreamReader stderr = proc.StandardError;

outtempfilestr = File.OpenRead(outtempfile);
MemoryStream output = new MemoryStream();

stdout.BaseStream.CopyTo(output);

try {
    proc.Kill();
}
catch(InvalidOperationException) { }
catch(Win32Exception) { }

File.Delete(tempfile);

return output.ToArray(); 
```

这会在输出中*随机产生错误：*

```
ffmpeg version 1.2 Copyright (c) 2000-2013 the FFmpeg developers
  built on Apr  8 2013 15:10:40 with gcc 4.5.3 (GCC)
  configuration: --disable-encoder=vorbis --enable-libvorbis
  libavutil      52\. 18.100 / 52\. 18.100
  libavcodec     54\. 92.100 / 54\. 92.100
  libavformat    54\. 63.104 / 54\. 63.104
  libavdevice    54\.  3.103 / 54\.  3.103
  libavfilter     3\. 42.103 /  3\. 42.103
  libswscale      2\.  2.100 /  2\.  2.100
  libswresample   0\. 17.102 /  0\. 17.102
[wav @ 0x80053860] parser not found for codec pcm_s16le, packets or times may be invalid.
    Last message repeated 1 times
[wav @ 0x80053860] max_analyze_duration 5000000 reached at 5015510 microseconds
Guessed Channel Layout for  Input Stream #0.0 : stereo
Input #0, wav, from 'C:\Users\Bevin\AppData\Local\Temp\tmp1CCE.tmp':
  Duration: 00:00:05.20, bitrate: 1411 kb/s
    Stream #0:0: Audio: pcm_s16le ([1][0][0][0] / 0x0001), 44100 Hz, stereo, s16, 1411 kb/s
[graph 0 input from stream 0:0 @ 0x8011f320] tb:1/44100 samplefmt:s16 samplerate:44100 chlayout:0x3
Output #0, wav, to 'pipe:':
  Metadata:
    ISFT            : Lavf54.63.104
    Stream #0:0: Audio: pcm_s16le ([1][0][0][0] / 0x0001), 44100 Hz, stereo, s16, 1411 kb/s
Stream mapping:
  Stream #0:0 -> #0:0 (pcm_s16le -> pcm_s16le)
Press [q] to stop, [?] for help
Multiple frames in a packet from stream 0
[pcm_s16le @ 0x8005c160] Invalid PCM packet, data has size 3 but at least a size of 4 was expected
Error while decoding stream #0:0: Invalid data found when processing input
No more output streams to write to, finishing.
size=     896kB time=00:00:05.20 bitrate=1411.3kbits/s    
video:0kB audio:896kB subtitle:0 global headers:0kB muxing overhead 0.008719% 
```

请注意，这些错误并不总是发生。有时它们会针对某些文件发生，有时则不会。我尝试了流重定向和临时文件的各种组合，但都不起作用。我还验证了临时文件的完整性，并且全部检查完毕。我什至在它被删除之前提取了临时文件，并在 shell 中顺利解码它。

有任何想法吗？

编辑：我尝试从通过 C# 运行的 shell 脚本运行 ffmpeg。它给出了同样的问题。通过 MinGW 编译 ffmpeg 也会出现同样的问题。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-18T00:32:11.500

这是因为您传递参数的方式。做这个：

```
Process process = new Process();
process.StartInfo.RedirectStandardOutput = true;
process.StartInfo.RedirectStandardError = true;
process.StartInfo.FileName = Path.GetDirectoryName(System.Diagnostics.Process.GetCurrentProcess().MainModule.FileName) +
                        @"\bin\ffmpeg.exe";

process.StartInfo.Arguments = "-i .\sound1.wav -acodec libvorbis -f ogg abc.ogg";

process.StartInfo.UseShellExecute = false;
process.StartInfo.CreateNoWindow = true;
process.Start(); 
```

这很完美。

# ios - 如何为 AVCaptureMovieFileOutput 设置旋转

> ID：15922180
> 
> 赞同：4
> 
> 时间：2013-04-10T09:36:56.983
> 
> 标签：ios, avcapturesession

我有一个带有 AVPreviewLayer 的全屏 avcapturesession。

当我切换相机时，预览层会正确显示视频，但一旦保存，视频就会颠倒。

我玩过镜像和横向左/右属性来连接视频输出文件，但无济于事。

这是切换相机的方法：

```
- (void)swapFrontAndBackCameras {
    // Assume the session is already running
    NSArray * inputs = self . session.inputs;
    for (AVCaptureDeviceInput * INPUT in inputs) {
        AVCaptureDevice * Device = INPUT.device ;
        if ( [ Device hasMediaType : AVMediaTypeVideo ] ) {

            AVCaptureDevicePosition position = Device.position;
            AVCaptureDevice * newCamera = nil;
            AVCaptureDeviceInput * newInput = nil;

            if(position == AVCaptureDevicePositionFront) {
                newCamera = [ self cameraWithPosition : AVCaptureDevicePositionBack];
            }
            else
            {
                newCamera = [ self cameraWithPosition : AVCaptureDevicePositionFront];
            }

            newInput = [AVCaptureDeviceInput deviceInputWithDevice:newCamera error:nil];

            [self.session beginConfiguration ] ;

            [self.session removeInput:INPUT ] ;
            [self.session addInput:newInput ] ;

            AVCaptureConnection *videoConnection = nil;
            for ( AVCaptureConnection *connection in [self.movieFileOutput connections] )
            {
                NSLog(@"%@", connection);
                for ( AVCaptureInputPort *port in [connection inputPorts] )
                {
                    NSLog(@"%@", port);
                    if ( [[port mediaType] isEqual:AVMediaTypeVideo] )
                    {
                        videoConnection = connection;
                    }
                }
            }

            [videoConnection setVideoOrientation:AVCaptureVideoOrientationLandscapeRight]; // This does it for the previewlayer only, not the output file :(

            [self.session commitConfiguration ] ;
            break;
        }
    } 
} 
```

# java - 如何正则表达式字符串 - 长度 10，前三个字符字母和剩余数字

> ID：15922184
> 
> 赞同：-1
> 
> 时间：2013-04-10T09:37:18.193
> 
> 标签：java, regex

我正在尝试创建一个正则表达式来查找前三个字母是否为字符，其余字母是否为数字。单词的总长度为 10。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T09:59:30.643

让我们尝试这样的事情：

`[a-zA-Z]{3}[0-9]{7}`

您最终可以将数字部分 ( `[0-9]`)替换为`\d`Java 中的元字符：

`[a-zA-Z]{3}\d{7}`

就个人而言，我不喜欢这个版本，因为我发现它不像前一个那样明确。 `\w`不会完全替换 alpha 部分，因为它对应于`[a-zA-Z_0-9]`.

如果您需要捕获某些部分，请使用支架。捕获三个首字母的示例：

`([a-zA-Z]{3})[0-9]{7}`

我建议您通过教程学习正则表达式的使用。这是大多数开发人员应该知道的强大工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T09:40:41.487

你试过了`"^[a-zA-Z]{3}\\d{7}$"`吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T10:01:26.913

我建议看看这个页面：

[http://docs.oracle.com/javase/6/docs/api/](http://docs.oracle.com/javase/6/docs/api/)

或者键入“java 6”（或 7）API。

转到类 java.util.String 的方法比较，然后从那里跟随 ling 或直接转到类 java.util.regex.Pattern

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T09:40:20.600

正则表达式看起来像这样（以最简单的形式）：

```
[a-zA-Z]{3}[\d]{7} 
```

剩下的取决于你到底想达到什么..

# javascript - tabIndex 使用 Javascript 更改

> ID：15922191
> 
> 赞同：0
> 
> 时间：2013-04-10T09:37:51.350
> 
> 标签：javascript

我正在尝试像这样更改 tabindex：

```
 document.getElementById('1').tabIndex="3"
 document.getElementById('2').tabIndex="2"
 document.getElementById('3').tabIndex="1" 
```

但它不起作用，我该如何解决它？

# apache - Apache 服务器和大量 httpd 进程的问题

> ID：15922194
> 
> 赞同：21
> 
> 时间：2013-04-10T09:38:00.187
> 
> 标签：apache

我们的 Apache 服务器有问题。它真的很慢而且 cpu 使用率真的很高（有时显示恒定的 100%）。

它在一个ubuntu系统上。

有什么想法可能导致这种情况吗？

“top”显示了这一点（可能还有更多的 httpd 进程不适合终端窗口）：

```
top - 11:33:19 up  1:07,  2 users,  load average: 37.79, 35.90, 29.14
Tasks:  86 total,  10 running,  76 sleeping,   0 stopped,   0 zombieCpu(s): 90.6%us,  9.4%sy,  0.0%ni,  0.0%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Mem:    786432k total,   379584k used,   406848k free,        0k buffersSwap:        0k total,        0k used,        0k free,        0k cached
  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                      
 5507 nobody    16   0 54540  19m 5204 S    4  2.6   0:03.70 httpd                          5653 nobody    17   0 59996  24m 4808 R    4  3.2   0:01.98 httpd                         
 3277 nobody    15   0  201m  51m 6724 R    2  6.7   2:14.30 mysqld                         5260 nobody    15   0 53740  18m 4972 S    2  2.4   0:06.53 httpd                         
 5333 nobody    15   0 54536  19m 5152 S    2  2.5   0:06.50 httpd                          3923 nobody    15   0 52644  18m 6372 S    1  2.4   0:16.80 httpd                         
 5519 nobody    15   0 51252  15m 4792 S    1  2.0   0:03.02 httpd                          4048 nobody    15   0 52808  17m 5040 R    1  2.3   0:13.86 httpd                         
 5240 nobody    15   0 53980  18m 4916 S    1  2.4   0:08.42 httpd                         
 5249 nobody    15   0 52908  17m 5188 S    1  2.3   0:08.23 httpd                          5385 nobody    15   0 52568  16m 4824 S    1  2.2   0:04.19 httpd                         
 5395 nobody    16   0 52536  16m 4804 S    1  2.1   0:03.90 httpd                          5422 nobody    16   0 51408  15m 4888 S    1  2.1   0:03.49 httpd                         
 5503 nobody    15   0 52536  16m 4800 S    1  2.1   0:02.67 httpd                          3646 nobody    15   0 52572  16m 5012 S    1  2.2   0:25.42 httpd                         
 3948 nobody    15   0 52844  17m 5008 R    1  2.3   0:17.15 httpd                          5283 nobody    15   0 54000  18m 4944 S    1  2.4   0:07.05 httpd                         
 5300 nobody    15   0 54748  19m 5276 S    1  2.6   0:06.20 httpd                          5304 nobody    15   0 52876  17m 4904 S    1  2.2   0:06.45 httpd                         
 5305 nobody    15   0 52812  17m 4884 S    1  2.2   0:06.02 httpd                          5400 nobody    16   0 52060  16m 4800 R    1  2.1   0:04.10 httpd                         
 5423 nobody    15   0 54764  19m 5196 S    1  2.6   0:04.37 httpd                          5433 nobody    15   0 52168  16m 4844 R    1  2.1   0:03.38 httpd                         
 5497 nobody    15   0 52572  16m 4820 S    1  2.2   0:02.83 httpd                          5498 nobody    15   0 53076  17m 4864 S    1  2.3   0:03.14 httpd                         
 5502 nobody    15   0 51260  15m 4804 S    1  2.0   0:02.70 httpd                          5505 nobody    15   0 54920  19m 4976 S    1  2.5   0:02.68 httpd                         
 5546 nobody    15   0 52584  16m 4664 S    1  2.2   0:02.48 httpd                          5550 nobody    15   0 51244  15m 4796 S    1  2.0   0:02.42 httpd                         
 5652 nobody    15   0 51976  17m 5912 S    1  2.3   0:01.24 httpd                          5659 nobody    15   0 55012  19m 4980 S    1  2.6   0:01.25 httpd                         
 5707 nobody    15   0 51416  15m 4880 S    1  2.1   0:00.09 httpd                          5710 nobody    15   0 51240  15m 4792 S    1  2.0   0:00.14 httpd                         
 5399 nobody    15   0 52568  16m 4856 S    1  2.2   0:03.86 httpd                          5435 nobody    15   0 52596  16m 4864 S    1  2.2   0:02.96 httpd                         
 5467 nobody    15   0 52316  16m 4856 R    1  2.1   0:02.93 httpd                          5501 nobody    15   0 52956  17m 4844 S    1  2.2   0:02.79 httpd                         
 5525 nobody    15   0 54508  19m 4916 S    1  2.5   0:03.41 httpd                          5547 nobody    15   0 52604  18m 5708 S    1  2.3   0:02.77 httpd                         
 5590 root      15   0 19208 1360 1044 R    1  0.2   0:00.39 top                            5627 nobody    15   0 55648  20m 5164 S    1  2.6   0:02.56 httpd                         
 5629 nobody    15   0 51248  15m 4792 S    1  2.0   0:01.62 httpd                          5647 nobody    15   0 52956  17m 4884 S    1  2.2   0:01.16 httpd                         
 5656 nobody    15   0 52588  17m 4884 S    1  2.2   0:00.94 httpd                          5665 nobody    15   0 51244  15m 4792 S    1  2.0   0:01.36 httpd                         
 5709 nobody    15   0 51928  15m 4628 S    1  2.1   0:00.02 httpd                          5711 nobody    16   0 51148  15m 4600 S    1  2.0   0:00.02 httpd 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-10T09:58:14.853

Apache 需要派生一个进程来处理每个连接的客户端。[在此处](http://www-01.ibm.com/software/webservers/httpservers/doc/v1319/9atperf.htm)阅读更多相关信息。

结果是你有很多进程，因为你有很多连接。如果您的服务器因此运行缓慢，那么这里有几个选项：

1.  优化您的应用程序：分析您的应用程序代码，并尝试优化服务器上​​负载最多的区域。
2.  考虑更改为影响较小的 Web 服务器，例如[nginx](http://wiki.nginx.org/Main)。这*可能会*增加您的服务器可以处理的连接数。
3.  添加页面缓存，使用[清漆之类的东西](https://www.varnish-cache.org/)
4.  添加另一台服务器，并在它们之间进行负载平衡
5.  增加现有服务器的功能（例如增加 RAM、升级处理器、安装更快的硬盘）。

所有这些选择都有成本，时间或金钱。不幸的是，事情就是这样:)

在我看来，最快的胜利可能是选项 2 和 3。但这意味着在安装它们时停机，或者有一个备份服务器可以工作。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-06-14T21:12:48.400

根据我的经验，几十个 httpd 进程都是 DOS 攻击。安装 mod_evasive 后，通过 top 显示的数十个 httpd 进程几乎都被消除了，我的 mysql CPU 负载从平均 100%+ / 99% 的时间利用率下降到在较重的查询操作期间预期的 20% 负载。

要在 RHEL (CentOS/Fedora/Redhat) 系统上安装 mod_evasive，请执行以下操作：

```
yum install -y mod_evasive 
```

重启阿帕奇

```
/sbin/service httpd restart 
```

或者

```
systemctl restart httpd 
```

和中提琴。

即使 DOS 攻击不是您的问题，在攻击发生之前减轻攻击也是明智的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-12T08:44:43.293

### 系统和 Httpd 信息

系统：

```
# cat /proc/version

Linux version 3.10.0-514.2.2.el7.x86_64 (builder@kbuilder.dev.centos.org) (gcc version 4.8.5 20150623 (Red Hat 4.8.5-11) (GCC) ) #1 SMP Tue Dec 6 23:06:41 UTC 2016 
```

网址版本：

```
# httpd -v

Server version: Apache/2.4.6 (CentOS)
Server built:   Nov 14 2016 18:04:44 
```

### 使 MPM Prefork 配置

获取默认的 MPM

```
# sudo apachectl -t -D DUMP_MODULES |grep mpm

[Thu Jan 12 16:06:11.778080 2017] [so:warn] [pid 23727] AH01574: module wsgi_module is already loaded, skipping
 mpm_prefork_module (shared) 
```

这意味着`mpm_prefork_module`已安装并启用。您可以将其更改为 的模式`event`，`worker`或`prefork(default)`在文件`00-mpm.conf`中，文件路径为`/etc/httpd/conf.modules.d`.

Apache MPM 的参考是[Apache MPM Common Directives](https://httpd.apache.org/docs/current/mod/mpm_common.html#page-header)

添加个人配置

```
# sudo cat >> /etc/httpd/conf/httpd.conf <<-'EOF'
<IfModule prefork.c>
    ServerLimit              20
    StartServers             15
    MinSpareServers           5
    MaxSpareServers          10
    MaxClients               15
    MaxRequestsPerChild      25
</IfModule>
EOF 
```

*   我的虚拟机有 2GB 内存和 2 个处理器

在上述参考中阅读此配置的详细信息。

### 重启 Httpd

```
# sudo systemctl restart httpd.service 
```

### 检查状态

```
# systemctl status httpd.service 

● httpd.service - The Apache HTTP Server
   Loaded: loaded (/usr/lib/systemd/system/httpd.service; enabled; vendor preset: disabled)
   Active: active (running) since Thu 2017-01-12 13:40:12 CST; 2h 48min ago
     Docs: man:httpd(8)
           man:apachectl(8)
 Main PID: 16576 (httpd)
   Status: "Total requests: 3625; Current requests/sec: -70.2; Current traffic:   0 B/sec"
   Memory: 869.7M
   CGroup: /system.slice/httpd.service
           ├─16576 /usr/sbin/httpd -DFOREGROUND
           ├─24122 /usr/sbin/httpd -DFOREGROUND
           ├─24125 /usr/sbin/httpd -DFOREGROUND
           ├─24154 /usr/sbin/httpd -DFOREGROUND
           ├─24157 /usr/sbin/httpd -DFOREGROUND
           ├─24211 /usr/sbin/httpd -DFOREGROUND
           ├─24219 /usr/sbin/httpd -DFOREGROUND
           └─24236 /usr/sbin/httpd -DFOREGROUND

Jan 12 13:40:12 192-168-1-68.node systemd[1]: Starting The Apache HTTP Server...
Jan 12 13:40:12 192-168-1-68.node httpd[16576]: [Thu Jan 12 13:40:12.614941 2017] [so:warn] [pid 16576] AH01574: module wsgi_module is already loaded, skipping
Jan 12 13:40:12 192-168-1-68.node systemd[1]: Started The Apache HTTP Server. 
```

或者

```
# ps aux|grep httpd

root     16576  0.0  0.0 232232   504 ?        Ss   13:40   0:01 /usr/sbin/httpd -DFOREGROUND
apache   24296 10.9  4.8 542936 91500 ?        S    16:29   0:16 /usr/sbin/httpd -DFOREGROUND
apache   24310 10.6  4.7 542804 89752 ?        S    16:29   0:15 /usr/sbin/httpd -DFOREGROUND
apache   24343 11.2  6.5 542804 123944 ?       S    16:29   0:15 /usr/sbin/httpd -DFOREGROUND
apache   24344 11.1  6.5 542804 124084 ?       S    16:29   0:14 /usr/sbin/httpd -DFOREGROUND
apache   24345 11.6  6.7 542804 126616 ?       S    16:29   0:15 /usr/sbin/httpd -DFOREGROUND
apache   24347 11.0  6.6 542804 125764 ?       S    16:29   0:14 /usr/sbin/httpd -DFOREGROUND
apache   24377 12.0  6.7 542804 126396 ?       S    16:29   0:15 /usr/sbin/httpd -DFOREGROUND
apache   24378 12.4  6.7 542804 126448 ?       S    16:29   0:15 /usr/sbin/httpd -DFOREGROUND
apache   24408 12.3  6.6 542804 126032 ?       S    16:29   0:14 /usr/sbin/httpd -DFOREGROUND
apache   24450 18.6  5.4 511560 102520 ?       R    16:30   0:10 /usr/sbin/httpd -DFOREGROUND
apache   24458 19.4  4.7 498476 89548 ?        S    16:30   0:08 /usr/sbin/httpd -DFOREGROUND
apache   24466 21.4  4.5 495424 86416 ?        R    16:31   0:07 /usr/sbin/httpd -DFOREGROUND
apache   24484  0.5  0.3 236456  5760 ?        S    16:31   0:00 /usr/sbin/httpd -DFOREGROUND
root     24496  0.0  0.0 112652   964 pts/0    S+   16:31   0:00 grep --color=auto httpd 
```

*我的 apache 服务器每秒*收到 2 个请求。以前，httpd 进程的数量会增加，直到系统停止。设置 MPM Prefork 后，它工作正常。

# php - 如何遍历返回的 JSON 数据

> ID：15922197
> 
> 赞同：0
> 
> 时间：2013-04-10T09:38:05.337
> 
> 标签：php, jquery, ajax, json

我目前正在自定义 Joomla 组件中创建一个 JSON 表单，该组件调用一个函数以获取一组邮政编码，然后将其返回到视图。然后我想遍历所有返回的邮政编码以显示它们。我似乎无法让 jQuery.each 循环正确地遍历返回的值。这是我的代码：

看法：

```
jQuery.each(data.postcode, function() {
        html += "<span class='btn posctodeInv'>" + v + "</span>";                       
    }); 
```

控制器：

```
$club_id = $_POST['club_id'];
$model = $this->getModel('postcodes');
$postcodes = $model->getClubPostcodes($club_id);

header('Content-Type: application/json');
echo json_encode($postcodes); 
```

模型：

```
public function getClubPostcodes($club_id) {
        $query = "SELECT postcode FROM #__postcodes_to_club WHERE club_id = '" . (int)$club_id . "'";
        $this->_db->setQuery($query);
        $result = $this->_db->loadAssocList();

        return $result;
    } 
```

以及在 Firebug 控制台中显示的返回 json：

```
[{"postcode":"cr4"},{"postcode":"cr5"},{"postcode":"cr6"}] 
```

谁能解释为什么我的循环会引发错误？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:39:48.600

尝试，需要 index 和 val 参数在 jQuery.each 中循环

```
jQuery.each(data, function(index, val) {
        html += "<span class='btn posctodeInv'>" + val.postcode + "</span>";                       
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T09:40:40.007

尝试

```
jQuery.each(data, function(index, val) {
    html += "<span class='btn posctodeInv'>" + val.postcode + "</span>";                       
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:15:25.630

```
var jsonp = '[{"Lang":"jQuery","ID":"1"},{"Lang":"C#","ID":"2"}]';
  var obj = $.parseJSON(jsonp);
  $.each(obj, function() {
      alert( this['Lang']);
  }); 
```

我认为您的问题与上述类似。试试上面的方法

# java - Android 小部件添加 startapp 广告

> ID：15922198
> 
> 赞同：0
> 
> 时间：2013-04-10T09:38:05.820
> 
> 标签：java, android

有人知道如何将 STARTAPP 广告添加到小部件应用此代码不适用于 OnUpdate 方法 AndroidSDKProvider.initSDK(this);

这必须添加到 OnCreate 方法，但我的小部件类没有 OnCreate 方法那么我该怎么做呢？我什至不知道是否可以将广告添加到小部件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:59:07.107

你应该调用它

onEnabled() 函数或 onUpdated()。

Startapp 没有广告，只有小部件/应用程序上下文之外的启动器快捷方式，这意味着可以在 Widets 内显示“广告”

# java - 比较其他类的对象

> ID：15922200
> 
> 赞同：1
> 
> 时间：2013-04-10T09:38:11.273
> 
> 标签：java, comparable

我有`trouble comparing objects of another class`，我该怎么办？
我做了一个很好的例子，希望代码应该是不言自明的。

蛋糕.java：

```
public class Cake implements Comparable<Cake> {

  private final int tastyness;

  public Cake(tastyness) {
    this.tastyness = tastyness;
  }

  public int compareTo(Cake other) {
    return this.tastyness - other.tastyness;
  }
} 
```

makeBestDinner.java:

```
public class makeBestDinner {

  List<Cake> cakes = new ArrayList<cake>();
  // Make a whole lot of cakes here
  if (cakes[0] > cakes[1]) {
    System.out.println("The first cake tastes better than the second");
  }

  // Do the same for beverages
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:43:26.817

*   Java 不支持运算符重载，因此以下操作不起作用。

> ```
>  if (cakes[0] > cakes[1]) { 
> ```

相反，你应该

```
if (cakes.get(0).compareTo(cakes.get(1)) > 0) { 
```

*   另外要从列表中获取元素，我们需要调用`list.get(index)`not

> 列表[索引]

所以下面的代码是行不通的。

```
List<Cake> cakes = new ArrayList<cake>();
// Make a whole lot of cakes here
if (cakes[0] > cakes[1]) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:42:16.000

```
if(cakes.get(0).compareTo(cakes.get(1)) > 0) {
    System.out.println("The first cake tastes better than the second");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:41:51.557

你应该`if (cakes[0].compareTo( cakes[1]))>0)`改用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T09:47:35.267

`if (cakes[0] > cakes[1])...`

这里没有问题吗？正如人们所说，您应该使用`if(cakes[0].compareTo(cakes[1]) > 0)` Well I would say that but you're using an ArrayList. 你真的可以通过输入 listname[elementnumber] 来获取元素吗？我以为你必须使用 listname.get(elementnumber)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T09:42:05.023

使用以下内容：

```
if (cakes.get(0).compareTo(cakes.get(1)) > 0) {
    System.out.println("The first cake tastes better than the second");
} 
```

并阅读[Comparable 文档](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)

# python - 填充大型 numpy 数组

> ID：15922203
> 
> 赞同：2
> 
> 时间：2013-04-10T09:38:16.030
> 
> 标签：python, numpy

另一个 numpy 数组处理问题：我有一个大约。具有固定大小（我知道）的 2000³ 条目 numpy 数组，包含整数。我想用另一个整数填充数组，以便它在所有维度上都被包围。这个整数在整个填充过程中是固定的。

```
example (2D)
1----->000
       010
       000 
```

我有两个想法，导致了这个结果：

1.  创建一个更大的 numpy 数组，包含填充值并“切片”填充中的旧区域：

    ```
    padded=np.zeros((z+2,x+2,y+2))
    padded[1:z+1,1:x+1,1:y+1]=olddata 
    ```

2.  使用 np.insert 或 hstack,vstack,dstack 添加值：

    ```
    padded=np.insert(data,0,0,axis=0)
    padded=np.insert(data,x+1,0,axis=0) etc. 
    ```

问题是，所有这些方法都不是就地的，而是分配一个新数组 (1.) 或复制旧数组 (2.)。有没有办法就地进行填充？我知道，从 numpy 1.7 开始。有 numpy.pad 模块。但这似乎也使用了某种分配和覆盖（就像我的 1\. 方式）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:31:40.797

您不能就地添加填充，因为在内存布局中没有空间。不过，您可以采用另一种方式：首先分配填充的数组，并在访问未填充的数据时使用视图。

```
padded = np.empty((2002,2002,2002))
padded[0] = 0
padded[-1] = 0
padded[:,0] = 0
padded[:,-1] = 0
padded[:,:,0] = 0
padded[:,:,-1] = 0

unpadded = padded[1:-1, 1:-1, 1:-1] 
```

# java - ProgressDialog 在 ActionBarSherlock 中不更新

> ID：15922205
> 
> 赞同：0
> 
> 时间：2013-04-10T09:38:18.797
> 
> 标签：java, android, actionbarsherlock, progressdialog, progress

我无法看到正在进行的对话框中的任何进度更新。

在活动课上：

```
void retrieveImages()
{
        mImageUriList = new ArrayList<String>();
        mImageUriList = Utils.fetchImages(this);
        mProgressDialog = new ProgressDialog(this);

        // progress dialog here is class level activity member
        mProgressDialog.show();
        mProgressDialog.setIndeterminate(false);
        mProgressDialog.setMessage("Processing Images..");
        mProgressDialog.setMax(100);
        mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        mProgressDialog.setCanceledOnTouchOutside(false);
        new GetImageAsyncTask(this, mImageUriList,mProgressDialog).execute();

        // passing progress dialog to async task
    } 
```

在异步任务中

```
@Override
    protected Void doInBackground(Void... params) 
    {
    int progress_status;
    float count=imageUriList.size();
    float increment=0;
    float p=(increment/count)*100;
        for(int i=0;i<count;i++)
        {
            increment++;
            //do some operation
            p=(increment/count)*100;
            progress_status=Math.round(p);
            publishProgress(progress_status);
            Log.i(TAG, "progress value-"+progress_status);
        }   
        return null;
    }
    @Override
protected void onProgressUpdate(Integer... values) 
{
    //super.onProgressUpdate(values);
    progressDialog.setProgress(values[0]);
} 
```

我只能看到微调器和消息“正在处理图像..”，我没有看到任何进度条/更新

我正在使用 ActionBarSherLock，我也在[这里](https://stackoverflow.com/a/13247023/1225413)尝试了这个似乎也不起作用的解决方案，它也只是在操作栏上显示进度微调器。我想要一个对话框来显示进度，而不是在操作栏上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:31:42.077

这里的技巧不是在activity中创建进度条，而是通过将Activity的上下文传递给AsyncTask来在AsyncTask中创建进度对话框，看看这里的代码

```
void retrieveImages()
{
        //some method in sherlock activity 
        mImageUriList = new ArrayList<String>();
        mImageUriList = Utils.fetchImages(this);
        new GetImageAsyncTask(this, mImageUriList).execute();
        //NOT passing progress dialog to async task,just activity context
} 
```

在异步任务中

在构造函数中

```
GetImageAsyncTask(Context mContext,ArrayList<String> mImageUriList)
{
    // Other intializations
    mProgressDialog = new ProgressDialog(mContext);

    mProgressDialog = new ProgressDialog(this);
    // progress dialog here is asynctask class member
    mProgressDialog.setIndeterminate(false);
    mProgressDialog.setMessage("Processing Images..");
    mProgressDialog.setMax(100);
    mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    mProgressDialog.setCanceledOnTouchOutside(false);
} 
```

现在 onPreExecute()，显示/加载进度对话框

```
public void onPreExecute()
{
   //show dialog box on pre execute
   mProgressDialog.show();
} 
```

保持`doInBackground`和`onProgressUpdate`相同

# javascript - 如何制作这样的 LED 动画？

> ID：15922206
> 
> 赞同：1
> 
> 时间：2013-04-10T09:38:20.480
> 
> 标签：javascript, html, animation

我正在尝试使用 javascript 构建一个 LED 动画。目前的错误我可以像这样得到它：http: [//jsbin.com/esakip/1/](http://jsbin.com/esakip/1/)

动画部分：

```
*___*___*___*___*___*___*___*___*___*___*___*___*___*___
```

它每 400 毫秒显示一次，我希望它像这样切换，例如：

打开/关闭 3 次，然后休眠 1 秒，然后再次执行此过程。

```
*_*_*______*_*_*______*_*_*______*_*_*______*_*_*______

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:10:34.170

使其可配置：

```
var pattern=('*_*_*______').split('');

function showNext(lastIndex){
    var nextIndex = lastIndex+1;
    // go back to the start if we are past the end
    nextIndex = nextIndex % pattern.length;
    // do we need to do anything?
    if(pattern[lastIndex] != pattern[nextIndex]){
        //fade in or out depending on the current symbol
        if(pattern[nextIndex]=='*'){
            $('#led').fadeIn('fast');
        }else{
            $('#led').fadeOut('fast');
        }
    }
    // call this function again after a pause
    setTimeout(function(){showNext(nextIndex);},400);
}
// start the thing off
showNext(-1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:48:16.303

你必须这样做：

```
while (true)
$('#led').fadeIn('fast').fadeOut('fast').fadeIn('fast').fadeOut('fast').delay('1000'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:56:47.613

使用 while 会导致浏览器崩溃...如果您需要循环播放此动画，请将其放入函数中并一次又一次地调用它..

```
$(function (){
  setInterval(function(){

    $('#led').fadeIn('fast').fadeOut('fast').fadeIn('fast').fadeOut('fast').delay('1000');

  },1800);
}); 
```

更新[http://jsfiddle.net/kvJsc/5/](http://jsfiddle.net/kvJsc/5/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-10T09:42:40.517

使用 jQuery：

`$('#led').fadeIn('fast').fadeOut('fast').fadeIn('fast').fadeOut('fast').delay('1000').fadeIn('fast').fadeOut('fast').fadeIn('fast').fadeOut('fast').delay('1000');` ...

[http://jsfiddle.net/kvJsc/](http://jsfiddle.net/kvJsc/)

# mysql - 根据字段的值连接表

> ID：15922207
> 
> 赞同：0
> 
> 时间：2013-04-10T09:38:23.060
> 
> 标签：mysql

我在连接表时遇到问题，有一个关于连接两个表的条​​件。我有三个表让我们假设它是 table1、table2 和 table3，

```
table1
+---+
|id |
+---+

table2
+---------------+
|id | table1_id |
+---------------+

table3
+----------------------------+
| id | table1_id | table2_id |
+----------------------------+ 
```

现在，我的主表是“table3”，我需要将主表与 table1 & table2 以这样的方式连接，如果 table2_id 的值存在于 table3 中，那么 table2 应该与 table2_id & 同样如果 table1_id 退出然后 table1 将与table1_id连接，例如：table3的入口就是这样

```
+----------------------------+
| id | table1_id | table2_id |
|  1 |     1     |     0     | 
|  2 |     0     |     1     |
+----------------------------+

for the value of id = 1,
table1_id exists & table2_id is zero, so table1 should be joined,
for the id = 2,
table2_id exists & table1_id is zero, so table2 should be joined,
if there is a case that both exists then table2 should be given the priority i.e, the table2 will be joined, can anyone make me out of this prb pls.. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:56:32.443

您可以使用 LEFT JOIN 执行此操作，然后使用 CASE 语句整理出所需的结果列。

作为一个例子，你可以做这样的事情。请注意，您需要为要恢复的每个字段重复 CASE 语句。

```
SELECT table3.id, CASE table2.id IS NULL THEN table1.field ELSE table2.field END AS field
FROM table3
LEFT OUTER JOIN table2 ON table3.table2_id = table2.id
LEFT OUTER JOIN table1 ON table3.table1_id = table1.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:29:12.887

您可以尝试制作可以放置条件并根据您的条件执行查询的过程。

# plone - Plone 中表达式/模板代码中的断点

> ID：15922208
> 
> 赞同：3
> 
> 时间：2013-04-10T09:38:23.873
> 
> 标签：plone

如果您遇到 TAL 表达式不起作用的情况（如下示例）：

```
context.restrictedTraverse('@@contenthistory').fullHistory()[0]['comments'] 
```

有哪些选项可以调试这种情况。即，可以将断点设置为

*   TAL 模板

*   TAL 表达式

*   任何表达式（例如 portal_actions）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:47:05.700

如果你使用 Chameleon（你应该！）你可以使用这个：

```
<?python import pdb; pdb.set_trace() ?> 
```

您通常查找的内容可在“econtext”中访问：

```
econtext['context']
econtext['request'] 
```

# sed - 带有许多特殊字符的 sed 命令

> ID：15922209
> 
> 赞同：1
> 
> 时间：2013-04-10T09:38:29.950
> 
> 标签：sed, special-characters

我正在努力使用 sed 命令将具有许多特殊字符的字符串替换为具有更多特殊字符的另一个字符串。

我有 3 个 .sh 文件，我需要在其中替换以下内容：

要替换的文本：

```
SERVER=`grep ^SERVER= file.properties | tail -1 | awk 'BEGIN { FS="="} { print $2 }'` 
```

替换为以下内容：

```
SERVER=`grep ^SERVER_UI= poller.properties | tail -1 | awk 'BEGIN { FS="="} { print $2 }'`
echo "New SERVER_UI value is ${SERVER}"
if [ "$SERVER" == "" ]
then
    SERVER=`grep ^SERVER= poller.properties | tail -1 | awk 'BEGIN { FS="="} { print $2 }'`
    echo "Old SERVER value is ${SERVER}"
fi 
```

* * *

这是我自己能够做到的，但它不起作用，我希望能得到一些帮助：

```
sed -i.bak 's,SERVER=`grep ^SERVER= file.properties | tail -1 | awk \'BEGIN { FS="="} { print $2 }\'`,SERVER=`grep ^SERVER_UI= file.properties | tail -1 | awk \'BEGIN { FS="="} { print $2 }\'`\necho "New SERVER_UI value is ${SERVER}"\nif [ "$SERVER" == "" ]\nthen\n    SERVER=`grep ^SERVER= file.properties | tail -1 | awk \'BEGIN { FS="="} { print $2 }\'`\n    echo "Old SERVER value is ${SERVER}"\nfi,' script.sh 
```

如果帮助也附带一些解释，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:11:17.073

首先，您有许多链接在一起的命令，您可以在单个 awk 命令中轻松完成这些命令。所以而不是：

```
grep ^SERVER_UI= poller.properties | tail -1 | awk 'BEGIN { FS="="} { print $2 }' 
```

你可以使用这个 awk 命令：

```
awk -F= '$1=="SERVER_UI"{val=$2} END{print val}' poller.properties 
```

现在一旦解决了，您应该`subscript.sh`使用以下命令在 PATH 中创建一个新的脚本文件（从您的命令增强）：

```
#!/bin/bash  
SERVER=$(awk -F= '$1=="SERVER_UI"{val=$2} END{print val}' poller.properties)
echo "New SERVER_UI value is ${SERVER}"
if [ "$SERVER" == "" ]
then
   SERVER=$(awk -F= '$1=="SERVER"{val=$2} END{print val}' poller.properties)
   echo "Old SERVER value is ${SERVER}"
fi 
```

最后运行您的 sed 命令以用新`subsscript.sh`调用替换旧命令：

```
sed -i.bak 's#SERVER=`grep ^SERVER= file.properties | tail -1 | awk '"'"'BEGIN { FS="="} { print $2 }'"'"'`#subscript.sh#' script.sh 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:09:39.373

我想我想通了：

```
sed -i.bak 's,SERVER=`grep ^SERVER= file.properties | tail -1 | awk '"'"'BEGIN { FS=\"=\"} 
{ print $2 }'"'"'`,SERVER=`grep ^SERVER_UI= file.properties | tail -1 | awk '"'"'BEGIN 
{ FS=\"=\"} { print $2 }\'"'"'`\necho \"New SERVER_UI value is ${SERVER}\"\nif [ \"
$SERVER\" == \"\" ]\nthen\n    SERVER=`grep ^SERVER= file.properties | tail -1 | awk 
'"'"'BEGIN { FS=\"=\"} { print $2 }'"'"'`\n    echo \"Old SERVER value is ${SERVER}\"
\nfi,' script.sh 
```

我不得不用**\"转义所有*****双引号***

 **所有带有**'"'"'的*****单引号***（单引号双引号单引号双引号单引号）

 **和所有的换行符***\*** **n******

# c# - 索引在打印过程中超出了数组的范围

> ID：15922210
> 
> 赞同：0
> 
> 时间：2013-04-10T09:38:32.567
> 
> 标签：c#, asp.net, performance, iis, rdlc

我使用[PerpetuumSoft](http://www.perpetuumsoft.com/Home.aspx?lang=en)打印多个报告，但出现以下异常：

```
Index was outside the bounds of the array.Stack Trace :at System.Drawing.Printing.PrinterSettings.StringCollection.get_Item(Int32 index) 
```

* * *

我的代码：

```
 PrintReportSample.ReportPrintDocument RP = new PrintReportSample.ReportPrintDocument(lectReport);                     
  string pr = System.Drawing.Printing.PrinterSettings.InstalledPrinters[1].ToString();
  RP.PrinterSettings.PrinterName = pr;
  RP.DefaultPageSettings.Landscape = true;
  RP.DefaultPageSettings.PaperSize.Width = 11;
  RP.Print(); 
```

* * *

我想识别客户端的默认打印机，而不是服务器。

我只在服务器上遇到这个问题，本地一切正常！

* * *

# 编辑 ：

根据答案：

```
string pr = System.Drawing.Printing.PrinterSettings.InstalledPrinters[0].ToString(); 
```

它加载了很长时间，根本没有发生任何事情，我没有得到任何异常？

* * *

本地当我尝试打印时，出现“保存`XPS`文档”窗口

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:44:22.523

您正在尝试从不存在的数组元素中提取值，在此行中。

```
string pr = 
  System.Drawing.Printing.PrinterSettings.InstalledPrinters[1].ToString(); 
```

您假设 InstalledPrinters 属性中至少有两个值。

我还怀疑您应该查看数组中的第一个元素。

```
string pr = 
  System.Drawing.Printing.PrinterSettings.InstalledPrinters[0].ToString(); 
```

无论哪种方式，您都应该在使用它之前防御性地检查该值是否存在。

```
if ( System.Drawing.Printing.PrinterSettings.InstalledPrinters != null && 
     System.Drawing.Printing.PrinterSettings.InstalledPrinters.Count > 0 )
{
   // Do your work here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:41:26.870

确保用户安装了*任何*打印机，如果需要，请使用第一个（索引 0！）。无论如何，您只需使用第二台打印机。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T09:41:55.090

查看代码，您选择打印的打印机有 OutOfBound 问题。c# 中的集合/数组是零绑定索引。

此外，您甚至应该确保已`printer(s)`安装。

所以，

```
InstalledPrinters[1] 
```

应该

```
//assuming that there is at least one printer installed
InstalledPrinters[0] 
```

# php - 从 MYSQL PHP 中的特定类别中排除项目

> ID：15922211
> 
> 赞同：0
> 
> 时间：2013-04-10T09:38:32.723
> 
> 标签：php, mysql

以下代码将从我的数据库中存在的所有类别中获取所有最新项目。我想隐藏特定类别的所有项目，因此它不显示该特定类别的项目，但仍显示其他类别的项目。

```
$query="
SELECT t1 . *,
DATEDIFF( t1.date_added, '$curDate' ) as remaining,
at.auctions_type_name
FROM wp_mam_auctions AS t1
INNER JOIN wp_mam_auction_type AS at ON at.auctions_type_id = t1.auction_type_id
WHERE  t1.auction_status_id = '1' AND t1.sold='0'
AND DATEDIFF( t1.date_added, '$curDate' ) <= '0'
AND DATEDIFF( t1.date_added, '$curDate' ) >= '-$new_listing_days'
AND TIMESTAMPDIFF(MINUTE , '$curDate', t1.date_expiry ) >'0'
ORDER BY date_added DESC LIMIT $from1, $max_results1
"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:54:53.910

添加 where 子句并说不显示这些类别的项目。喜欢

```
 WHERE category!="blah" 
```

# sql - SQL Server表之间的关系概念

> ID：15922213
> 
> 赞同：1
> 
> 时间：2013-04-10T09:38:33.773
> 
> 标签：sql, entity-framework

我有一个`Picture`由该模型通过实体框架生成的表：

```
public class Picture
{
        public Guid Id { get; set; }
        public string Name { get; set; }
        public string Path { get; set; }
} 
```

现在我有一个应该有两个图片列的模型：`aboutpicture`并且`headerpicture`，在这个模型类中声明它们的最佳方法是什么？所做的是看起来像这样

```
 public class WebContent
 {
        public Guid Id { get; set; }
        public string AboutText { get; set; }
        public DateTime? CreationTime { get; set; }
        public Picture AboutPicture { get; set; }
        public Picture HeaderPicture { get; set; }

 } 
```

但我怀疑他们的关系

我的问题总结，WebContent 表应该有两个图片字段

请帮助我，谢谢

# javascript - android中的iframe宽度问题

> ID：15922216
> 
> 赞同：0
> 
> 时间：2013-04-10T09:38:36.863
> 
> 标签：javascript, android, jquery, cordova, iframe

我使用 android phonegap 创建了应用程序，并在 iframe 中加载了 aspx 页面。我为 iframe 设置了 100% 的宽度，并且在 onload 中设计看起来很好。但是在更改方向页面时不适合设备（应用横向模式下 iframe 的宽度对于纵向模式 iframe）。当我单击 iframe 中的文本框时，该设计适合设备。

```
var iframe = document.createElement("IFRAME");
iframe.setAttribute("src", "http://www.w3schools.com"); 
iframe.setAttribute("id", "iframeset");
iframe.style.width = 100+"%";
$("#IframeDiv").append(iframe);

<div  id="IframeDiv"></div> 
```

请指导我谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:10:33.133

您要做的是，捕获屏幕方向更改事件并动态重置 iframe 的宽度。

# ember.js - 在#each 中渲染视图

> ID：15922219
> 
> 赞同：3
> 
> 时间：2013-04-10T09:38:51.323
> 
> 标签：ember.js

每当我尝试在 #each 块内渲染视图时，都会收到 PrecompilationError 说：`Compiler said: Error: each doesn't match view`.

例子：

```
{{#each posts}}
  {{view App.MyPost}}
    <div>Some HTML here</div>
  {{/view}}
{{/each}} 
```

在呈现单个帖子之前，我需要做一些事情，所以我的猜测是我需要一个自定义视图（App.MyPost）来实现“willInsertElement”钩子。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T09:44:48.463

你少了一个#

如果你想使用内联模板，视图助手需要一个 #

```
{{#each posts}}
  {{#view App.MyPost}}
    <div>Some HTML here</div>
  {{/view}}
{{/each}} 
```

所以它基本上是：

```
{{view App.MyPost}} 
```

或者：

```
{{#view App.MyPost}}
  <!-- template here -->
{{/view}} 
```

# iphone - 如何在 uiview 中的 pop-upviews 上删除和添加 uiTapGestureRecognizers？

> ID：15922222
> 
> 赞同：0
> 
> 时间：2013-04-10T09:38:55.290
> 
> 标签：iphone, ios, ios5, ios4, iphone-sdk-3.0

如果 dere r 3 弹出窗口 n 其中我希望手势识别器仅在 2 个弹出窗口 bt 而不是在左侧 ....这可能吗？或者我必须为它单独弹出窗口？

在我的项目中，我有一个 uiview，我在其上实现了各种按钮，点击它们它们会打开不同的弹出窗口，当我点击它们时我想隐藏弹出窗口，但是在一次 btn 点击时我不想隐藏那个弹出窗口-向上视图....所以我写了这段代码

```
[popup_view removeGestureRecognizer:gesture]; 
```

# java - 使用 Jquery 上传 Excel 文件

> ID：15922223
> 
> 赞同：0
> 
> 时间：2013-04-10T09:38:59.947
> 
> 标签：java, javascript, jquery

我想通过使用多部分/表单数据的 RestEasy 服务使用 Jquery 上传 Excel 文件。无论我想使用 Ajax 进行文件上传还是简单的 Jquery/Javascript 都足够了。如果我只想使用 Ajax 方式，我必须发布什么样的内容类型才能上传？

这是我的 HTML 和 Jquery 代码。

```
<script type="Javascript">
    $(document).ready(function () {
        //var filename = document.getElementById("uploadedFile").value;
        var filename = $("#uploadedFile").val();
        //alert(filename);
        jQuery("#Upload").click(function () {
            $.ajax({
                url: 'service url',
                type: 'POST',
                contentType: 'application/json; charset=utf-8',
                // enctype: 'multipart/form-data',
                data: {
                    file: filename
                },
                cache: false,
                success: function (data) {
                    alert('success');
                    return false;
                },
                error: function (data, status) {
                    alert("failue");
                    alert(status);
                }
            });
        });
    });
</script>

<input type="file"  name="uploadedFile" id="uploadedFile" size="30" ><br><br>
<input type="button" id="Upload" name="Upload" value="Upload"  style="width:72px;height:23px;"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-01T03:22:13.467

如果您使用的是 HTML5，这应该很容易。

这就是我上传文件的方式

HTML,

```
<form method="POST" enctype="multipart/form-data"
      action="/file/upload" style="display: none">
      <input type="file" name="file"  multiple="multiple" id="uploadImages">
</form> 
```

JS,

```
$('#uploadImages').on('change', function (){
            var formData = new FormData();
            for(var i = 0; i < this.files.length; i++){
                formData.append('file', this.files[i]);

                $.ajax({
                    url : '/file/upload',
                    type : 'post',
                    data : formData,
                    cache: false,
                    contentType: false,
                    processData: false,
                    success : function () {
                        alert("upload successfully")
                    }
                })

            }
        }
        $('form')[0].reset();
    }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-16T12:05:50.147

您可以通过 jQuery 和 HTML 来完成它。参考下面的编码。它是 HTML 格式的。

HTML

```
<form id="" enctype="multipart/form-data" method="POST" name=""
      action='URL.do'>
    <table width="100%" height="0" border="0" style="border-collapse: collapse" cellpadding="0" cellspacing="0">
        <tr>
            <td>Select File to Upload&nbsp;</td>
            <td valign="top" colspan="3">
                <input type="file" name="excelFile" id="excelFile"
                       accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet">
            </td>
        </tr>

        <tr>
            <td align="left">

                <input type="submit" class="buttons" onclick=""
                       id="btnUpload" name="btnUpload" value="Submit"/>
            </td>
        </tr>

    </table>

</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:13:14.863

使用 ajaxfileupload.js 我已经使用它完成了多个文件上传，它是一个很棒的 js 库，您将完全控制您的上传！

[https://code.google.com/p/my-web-js/downloads/detail?name=ajaxfileupload.js&can=2&q=](https://code.google.com/p/my-web-js/downloads/detail?name=ajaxfileupload.js&can=2&q=)

[http://www.phpletter.com/Our-Projects/AjaxFileUpload/](http://www.phpletter.com/Our-Projects/AjaxFileUpload/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T10:02:53.167

如果您想在不使用 JS 和回退的任何页面重新加载的情况下上传，可以使用[http://www.uploadify.com/](http://www.uploadify.com/)或[http://www.plupload.com/](http://www.plupload.com/)

我测试并验证了他们两个:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-20T10:19:03.957

您可以使用**XMLHttpRequest**和**FormData**上传文件，

```
$('#input-file').change(function() {

      var url = '/back-end-url';
      var form_data = new FormData();
      var xhr = new XMLHttpRequest();

      $.each(this.files, function (key, value) {
          form_data.append('file', value)
      })

      xhr.open('POST', url, true)
      xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest")
      xhr.send(form_data)

      xhr.onreadystatechange(function() {
          if(xhr.readyState == XMLHttpRequest.DONE) {
               var res = JSON.parse(xhr.responseText)
          }
      })

}) 
```

您可以在后端获取和处理文件。

# javascript - 如何根据参数创建使用 $resource 返回数据的服务

> ID：15922225
> 
> 赞同：3
> 
> 时间：2013-04-10T09:39:05.993
> 
> 标签：javascript, angularjs

我想创建一个根据参数调用后端的服务。此代码不起作用，但我希望它显示我想要实现的目标：

```
myproject.factory('Item', function($resource) {
    if (@id !== undefined)
        return $resource('/resource/item/:id/item.json', {id: '@id'});
    else if (@userid !== undefined)
        return $resource('/resource/user/:userid/items.json', {userid: '@userid'});
}); 
```

基本上，第一个选项仅通过其 ID 返回一个项目，第二个选项通过用户 ID 返回多个项目。

然后我希望能够像这样调用该服务：

```
$scope.item = Item.get({id: id}, function() {...} 
```

或者

```
$scope.items = Item.query({userid: userid}, function() {...} 
```

实现这样的目标的最佳方法是什么？我是否需要为所有内容创建单独的服务？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-16T18:19:17.537

`actions`您可以使用自定义参数覆盖默认 URL ：[请参阅 $resource docs](http://docs.angularjs.org/api/ngResource.%24resource)

我的意思是这样的：

```
$resource('/resource/item/:id/item.json', {}, {
    query: {
        url: '/resource/user/:userid/items.json',
        method: 'GET',
        isArray: true
    }
}); 
```

现在`.get()`和其他请求将使用默认 URL，而`.query()`应该使用自定义 URL。

请注意，该`url`属性是 Angular 1.2（现在是稳定版本）中的新属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:34:34.300

也许改用查询字符串参数？

但是，您必须考虑下一个支持它或想要对其进行更新的人，无论是您还是其他人的未来。让它过于通用和复杂对任何人都没有帮助。它很快就会变得难以构建和维护。

您的实体是`user`and `item`，因此最佳做法是将它们视为您的应用可以使用的单独资源。

# ruby-on-rails - ActionMailer 出现意外的 EOFError

> ID：15922228
> 
> 赞同：2
> 
> 时间：2013-04-10T09:39:12.667
> 
> 标签：ruby-on-rails, smtp, actionmailer

我正在使用带有 ActionMailer 的 Rails 3.2 来发送电子邮件通知。

我在 GoDaddy 购买了电子邮件。

我也在使用 Gmail 帐户进行测试。

在我的 development.rb 中，我通常在使用 Gmail 帐户时以这种方式配置电子邮件

```
 # config.action_mailer.smtp_settings = {
  #           :enable_starttls_auto => true,
  #           :address => "smtp.gmail.com",
  #           :port => "587",
  #           :domain => "google.com",
  #           :authentication => :plain,
  #           :user_name => "MY_USER_NAME",
  #           :password => "MY_PASSWORD"
  #   } 
```

使用 Gmail，一切正常，并且始终没有问题。

**现在**，当我配置我的 GoDaddy 帐户时，我时不时地收到`EOF Error`一条没有更多信息的消息

```
 config.action_mailer.smtp_settings = {
          #:enable_starttls_auto => true,
          :address => "smtpout.europe.secureserver.net",
          :port => 80,
          :domain => "MY_DOMAIN.COM",
          :authentication => :plain,
          :user_name => "MY_USERNAME",
          :password => "MY_PASSWORD"
  } 
```

我的问题是它确实有效，但有时，我不知道为什么，它无法给我一个 EOF 错误消息。

这是来自控制台的错误日志

```
 ...

  Rendered user_mailer/service_notification_email.html.erb (44.6ms)
  Rendered user_mailer/service_notification_email.text.erb (0.4ms)

Sent mail to receiver@domain.com (1497ms)
Date: Wed, 10 Apr 2013 11:31:44 +0200
From: support@my_domain.com
To: joel.maranhao@gmail.com
Message-ID: <516531804e7a_8a23fbfc5c34ec4299fa@joel-maranhaos-imac.local.mail>
Subject: My application notification - Testing
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_5165317fc70c3_8a23fbfc5c34ec429616";
 charset=UTF-8
Content-Transfer-Encoding: 7bit

----==_mimepart_5165317fc70c3_8a23fbfc5c34ec429616
Date: Wed, 10 Apr 2013 11:31:43 +0200
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-ID: <5165317fe1356_8a23fbfc5c34ec4297a6@joel-maranhaos-imac.local.mail>

Service notification
=======================================    

Testing

hello

New service created

----==_mimepart_5165317fc70c3_8a23fbfc5c34ec429616
Date: Wed, 10 Apr 2013 11:31:43 +0200
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-ID: <5165317ff08e6_8a23fbfc5c34ec4298f2@joel-maranhaos-imac.local.mail>

<!DOCTYPE html>
<html>
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
    <link href='http://twitter.github.com/bootstrap/assets/css/bootstrap.css' rel='stylesheet' />
  </head>
  <body>
    <div class="container">

    <h1>Testing by Buyer</h1>

    <p>hello</p>

    <h2>Notice</h2>
    <p>New service created</p>
    </div>
  </body>
</html>

----==_mimepart_5165317fc70c3_8a23fbfc5c34ec429616--

   (0.3ms)  ROLLBACK
Completed 500 Internal Server Error in 3282ms

EOFError (end of file reached):
  app/models/creative_service.rb:49:in `new_service'
  app/controllers/creative_services_controller.rb:80:in `block in create'
  app/controllers/creative_services_controller.rb:79:in `create'
  config/initializers/quiet_assets.rb:7:in `call_with_quiet_assets'

  Rendered /Users/joel/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.11/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /Users/joel/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.11/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/joel/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.11/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (13.8ms) 
```

关于如何解决这个问题的任何想法？我不确定 EOF（到达文件末尾）告诉我什么，因为它适用于 Gmail 帐户。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-03-24T09:10:05.613

提供 GoDaddy 注册电子邮件帐户，例如 support@yourwebsite.com，或者如果 MY_USERNAME 是电子邮件，则提供 MY_USERNAME 作为您的发件人地址。它对我有用。希望它对你有用。

# ruby-on-rails-3 - 设计：如何在用户注册成功的情况下在主页上显示“signed_up_but_unconfirmed”？

> ID：15922229
> 
> 赞同：1
> 
> 时间：2013-04-10T09:39:26.067
> 
> 标签：ruby-on-rails-3, devise

我已经安装了设计，它工作得很好。但我不知道如何使用设计消息。我浏览了设计维基，但我没有得到它。

当用户成功注册后，devise 只是重定向到主页，不显示任何内容。我检查了 devise.en.yml 并发现了这个：

```
 signed_up_but_unconfirmed: 'A message with a confirmation link has been sent to your email address. Please open the link to activate your account.' 
```

希望在注册重定向的主页上显示此内容。

我的注册控制器是：

```
 class RegistrationsController < Devise::RegistrationsController

def new
    resource = build_resource({})
       resource.build_profile
       respond_with resource        
    end

 end 
```

我的注册表单是：

```
 <div class = "form-signin">
  <h2 class="form-signin-heading">Please sign up</h2>
  <%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
  <%= devise_error_messages! %>
   <%= f.email_field :email, :autofocus => true, :class => "input-block-level", :placeholder => "Email address"  %>
   <%= f.password_field :password, :class => "input-block-level", :placeholder => "Password" %>
   <%= f.password_field :password_confirmation, :class => "input-block-level", :placeholder => "Retype the password" %>
   <div><%= f.submit "Sign up", :class => "btn btn-large btn-primary"  %></div>
  <% end %>
  <%= render "devise/shared/links" %>
  </div>
  </div> 
```

如何在主页上获取此消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:55:01.463

从设计 github 页面引用：

> 请记住，Devise 使用 Flash 消息让用户知道登录是成功还是失败。Devise 希望您的应用程序酌情调用“flash[:notice]”和“flash[:alert]”。

注册控制器的创建操作将在 flash[:notice] 中设置来自 devise.en 的 signed_up_but_unconfirmed 消息并重定向。在重定向页面上，在您的情况下是主页，您将在 flash[:notice] 中看到消息，并且必须显示该消息。

```
<%= flash[:notice] unless flash[:notice].blank?%> 
```

将此添加到您的主页，将显示 :notice 闪存消息（如果有）。

我建议您在所有布局中显示 Flash 消息，以便从设计控制器设置的任何 Flash 消息都将显示给用户，而与重定向页面无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:50:12.597

您需要像这样在布局文件中添加警报处理程序，

```
<% if (notice and notice.length > 0) or (alert and alert.length > 0) %>
   <% if notice %>
      <%= notice %>
   <% end %>
   <% if alert %> 
       <%= alert %>
   <% end %>     
<% end %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-27T13:33:47.883

这通常发生在您自定义 root_path 时，以下步骤将帮助您解决问题：

1.  确保你有`= flash[:notice]`你的`application.html.haml`

2.  覆盖注册控制器

    `rails g devise:controllers users -c=registrations`

3.  `confirmable`如果您在模型中使用模块，请取消注释 registratons_controller 中的以下方法，例如；

    `def after_inactive_sign_up_path_for(resource) new_user_session_path end`

    **或者**

    如果您不使用可确认模块，则仅使用 sing_up_path_for 方法。

    `def after_sign_up_path_for(resource) new_user_session_path end`

# php - 如何智能管理 PHP mySQL 开发的状态/历史记录？

> ID：15922230
> 
> 赞同：3
> 
> 时间：2013-04-10T09:39:26.877
> 
> 标签：php, mysql

我的项目概念是将一些问题插入数据库并提供人们提供的答案。但是，这些问题和管理员可以稍后由管理员修改（甚至删除它们）

我需要恢复答案和问题。但是，我需要检索确切的问题和答案，这意味着即使管理员已在数据库中更改了确切的问题。

那是一种保存问题和答案状态的历史管理器。

我可以管理整个数据库历史等。但是有没有更聪明的方法来管理它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:43:51.467

首先，你不应该在这种情况下删除东西。在每一行上创建一个布尔标志并将其设置为 1 以标记删除，然后在考虑此标志的同时执行所有查询。这将允许您将内容“标记”为已删除，而不是实际从数据库中修剪。

这还具有不会完全混淆您的外键关系或雪崩删除您想要保留的内容的优点。

从那里，您可能想要查看数据库触发器。这些允许您对某些操作（更新、插入、删除）运行预存储的语句。这可以让您保留更改的“日志表”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:45:40.853

***解决方案1.triggers***

最简单的解决方案（取决于您的特定需求）可能是在您的表中添加一个 on update/insert/delete 触发器，这样您就可以在插入/更新/删除数据时执行额外的日志记录。这样即使是对数据库的手动干预也将被覆盖......

查看[http://dev.mysql.com/doc/refman/5.1/en/triggers.html](http://dev.mysql.com/doc/refman/5.1/en/triggers.html)了解更多信息。

***解决方案 2。***

保存版本历史的一种简单方法是创建一个基本相同的表（例如，带有 _version 后缀）。这两个表都有一个版本字段，对于主表，您每次更新都会增加该字段。版本表将在 (id, version) 上有一个复合主键。

每当您对实际表进行更新时，您还会在版本表中插入一个包含重复数据的新行。每当您想查找版本历史记录时，您需要做的就是诸如 SELECT * FROM content_version WHERE id = CONTENT_ID ORDER BY version 之类的事情。

如果你使用 Doctrine ORM 之类的东西，它的行为会通过事件监听器自动为你做这件事。你可以在这里查看：http: [//www.doctrine-project.org/documentation/manual/1_2/en/behaviors#core-behaviors :versionable](http://www.doctrine-project.org/documentation/manual/1_2/en/behaviors#core-behaviors:versionable)

[从源头](https://stackoverflow.com/questions/2536819/how-to-keep-history-of-record-updates-in-mysql)

# c# - 将带有自定义参数的值添加到 WCF 标头中

> ID：15922232
> 
> 赞同：1
> 
> 时间：2013-04-10T09:39:31.510
> 
> 标签：c#, wcf, soapheader

**您好，我们正在使用一些政府 WCF 服务。在旧方法中，他们正在寻找这样的肥皂标题。**

```
<islemKodu>2</islemKodu>
<islemNedeni>Döküman iptal edildi</islemNedeni> 
```

**我们将 MessageInspector 添加到此；**

```
public object BeforeSendRequest(ref Message request, IClientChannel channel)
        {
request.Headers.Add(MessageHeader.CreateHeader("islemKodu", "", "2"));
request.Headers.Add(MessageHeader.CreateHeader("islemNedeni", "", "Döküman iptal edildi"));
return null;
} 
```

**所以这是正确的。**

**但是政府已经像这样改变了肥皂标题。**

```
<param:SaglikNetParameters xmlns:param="http://saglik-net.saglik.gov.tr/parametreler/">
<param:parameter name="islemKodu">2</param:parameter>
<param:parameter name="islemNedeni">Döküman iptal edildi</param:parameter>
</param:SaglikNetParameters> 
```

所以现在我怎样才能改变我们的 BeforeSendRequest 方法在soap头中发送这样的自定义参数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:46:39.547

您需要创建一个特殊的标头类来输出soap XML 以匹配所需的结构。查看这篇[博](http://www.c-sharpcorner.com/uploadfile/dhananjaycoder/internal-classes-to-understand-wcf-message-xmldictionarywriter-class/)文，了解您需要实现的代码。

基本上，您需要创建类以输出所需的 XML，然后按如下方式使用该类：

```
// %< snipped >%

var specialHeader = GovMsgHeader.CreateHeader( /* any parameters */ );
request.Headers.Add(specialHeader);

// %< snipped >% 
```

特殊类看起来像这样：

```
public class GovMsgHeader : MessageHeader {
    protected override void OnWriteStartHeader(
        System.Xml.XmlDictionaryWriter writer,
        MessageVersion messageVersion) {

        base.OnWriteStartHeader(writer, messageVersion);

        // Write your custom XML using the XmlDictionaryClass:
        //TODO: add the 'param' XML namespace to the writer...
        //TODO: add the container element with something like this:
        writer.WriteElementString("SaglikNetParameters", "param", "");

        writer.WriteElementString("parameter", "param", "2");
        writer.WriteAttributeString("name", "", "islemKodu");
        //TODO: complete the rest of the XML ...
    }
} 
```

# css - 容纳内部 div 的外部 div 太大了几个像素

> ID：15922233
> 
> 赞同：0
> 
> 时间：2013-04-10T09:39:31.743
> 
> 标签：css, html, web

[示例 Plunk 在这里](http://plnkr.co/edit/1L3vXT?p=preview)。

大家好， 我正在尝试在一个外部 div 中容纳两个内部 div（一个标题栏和一个画布）。内部 div 是动态生成的，并且具有固定的宽度和高度。

下面是一个（静态）示例代码，而一个工作代码示例在这里：

```
<!DOCTYPE html>
<html>
<head>
  <style>
  .plugin {
          position: absolute;
          z-index: 800;
          border-bottom-right-radius: 5px;
          -webkit-box-shadow: 5px 5px 12px 1px rgba(0, 0, 0, 0.6);
          box-shadow: 5px 5px 12px 1px rgba(0, 0, 0, 0.6);

      }

    .plugin_title {
        font-size: 13px;
        color: rgba(255, 255, 255, 0.9);
        font-family: arial;
        background-color: #300;
        z-index: 150;
        height: 20px;
        border-bottom: 1px solid whitesmoke;
    }

    .plugin_canvas {
        position: relative;
        background-color: black;
        border: 1px solid #300;
        border-bottom-right-radius: 5px;
        z-index: 800;
    }
  </style>
</head>
<body>
<div class="plugin">
  <div class="plugin_title">
    <span>Plugin Title</span>
  </div>
  <canvas width="428" height="348" class="plugin_canvas"></canvas>
</div>
</body>
</html> 
```

如您所见，类的 div`.plugin`拉伸以容纳内部`.plugin_title`和画布 div，但高度“增长”了 5 px。

在这个例子中，根据我的计算，css 标题高度为 20px + 1px 下边框 = 21px。画布高度为 348px + 1px 上边框 + 1px 下边框 = 350px。根据开发者工具，两者之和为 350px + 21px = 371px，而父`.plugin`级为 376px。这一点尤其明显，因为底部阴影在我想要的位置下方偏移了 5px。

为什么会发生这种情况？是否有针对此问题的 CSS（无 JavaScript）解决方案？

**重要提示**：容器 ( `.plugin`) div 是在内部 div 之前生成的。所以我不能只在容器 div 中设置高度，因为在创建时，我不知道画布 div 的高度。在创建内部 div 之后，我可以进行计算并重新设置容器 div 的高度，是的，但我正在寻找一个仅 css 的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:47:27.780

您可以通过设置`line-height:0`on`.plugin`然后明确指定它来解决此问题`.plugin_title`。

[普朗克](http://plnkr.co/edit/DLDeL5?p=preview)

```
.plugin {
    line-height:0;
}

.plugin_title {
    line-height:20px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:43:25.550

添加`display:table-cell`到`.plugin`和`canvas`

```
.plugin {
          position: absolute;
          z-index: 800;
          border-bottom-right-radius: 5px;
          -webkit-box-shadow: 5px 5px 12px 1px rgba(0, 0, 0, 0.6);
          box-shadow: 5px 5px 12px 1px rgba(0, 0, 0, 0.6); width:auto; 
          display:table-cell;          
}
  .plugin_canvas {
        position: relative;
        background-color: black;
        border: 1px solid #300;
        border-bottom-right-radius: 5px;
        z-index: 800;  
        display:table-cell;         
    } 
```

**[演示](http://jsfiddle.net/W9uSb/2/)**

# c++ - 命名空间中的无效数据类型转换

> ID：15922234
> 
> 赞同：1
> 
> 时间：2013-04-10T09:39:32.783
> 
> 标签：c++, types, namespaces

在我的项目中，我有 simple_xxxx.c，它不是系统线程安全版本，因此要创建等效的系统线程，我创建了 sys_xxxx.cpp；整个 C 代码都在名为 MyNameSpace 的命名空间中捕获。在文件中，我没有包含 simple_xxxx.h 以冒编译混淆的风险，但包含 sys_xxxx.h 以获取我的 .cpp 文件的声明。这样做时，我得到以下枚举的编译错误，这对 int 感到困惑，即使它是在命名空间内声明的。

请对此提出任何建议。

```
// xxxx.h

namespace MyNameSpace {

typedef enum {
  FormatFlags_LeftAlign   = (1 << 0), // 1
  FormatFlags_SignPrefix  = (1 << 1), // 2
  FormatFlags_SpacePrefix = (1 << 2), // 4
  FormatFlags_ZeroPad     = (1 << 3), // 8
  FormatFlags_Format      = (1 << 4)  // 16
} FormatFlags;

bool string_AppendFormatted(UnicodeString_s*, UnicodeString_s*, void*);

}

///xxxx.cpp

namespace MyNameSpace {

bool string_AppendFormatted(UnicodeString_s*, UnicodeString_s*, void*)
{
      FormatFlags eFlags = (FormatFlags)0;

            case '-':
4086:         eFlags |= FormatFlags_LeftAlign;
              break;
            case '+':
4089:         eFlags |= FormatFlags_SignPrefix;
              break;
            case '0':
4092:         eFlags |= FormatFlags_ZeroPad;
              break;
} // method

} // namespace

xxxx.cpp: In function 'bool MyNameSpace::string_AppendFormatted(MyNameSpace::UnicodeString_s*, MyNameSpace::UnicodeString_s*, void*)':
xxxx.cpp:4086: error: invalid conversion from 'int' to 'MyNameSpace::FormatFlags'
xxxx.cpp:4089: error: invalid conversion from 'int' to 'MyNameSpace::FormatFlags'
xxxx.cpp:4092: error: invalid conversion from 'int' to 'MyNameSpace::FormatFlags' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:52:11.323

在 C++中没有从`int`to的隐式转换，使用 an来存储您的标志。此外，您可以将枚举声明为，只有 C 需要。`enum``int``enum FormatFlags{ /* values */ };``typedef`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:51:40.493

执行以下操作可以让我解决问题。eFlags = (FormatFlags)(eFlags | FormatFlags_LeftAlign);

如果我将枚举类型声明为 int; 它会导致下面的代码出现进一步问题（此处未显示）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:50:13.220

代替

```
FormatFlags eFlags = (FormatFlags)0; 
```

和

```
int eFlags = 0; 
```

正如错误消息所说，您不能将枚举组合（即 a ）转换`int`回枚举（请注意，这些组合的值未在您的枚举定义中定义）。

# android - 在我的 android 开发项目中与许多其他的致命错误

> ID：15922235
> 
> 赞同：0
> 
> 时间：2013-04-10T09:39:33.033
> 
> 标签：android, xml, swing, sqlite

因为我正在使用一个项目巴士路线系统....即使我是 android 编程的新手。但是当我点击我的应用程序时，它说：不幸的是它停止了......

请帮我清除我的错误...甚至没有在我的数据库中创建任何表...

看到这个网站：

[公交路线android项目](https://stackoverflow.com/questions/15813235/bus-routes-android-project?noredirect=1#comment22491196_15813235)

提前致谢

```
04-04 14:14:43.700: D/AndroidRuntime(868): Shutting down VM
04-04 14:14:43.700: W/dalvikvm(868): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-04 14:14:43.720: E/AndroidRuntime(868): FATAL EXCEPTION: main
04-04 14:14:43.720: E/AndroidRuntime(868): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.bus/com.example.bus.MainActivity}: java.lang.NullPointerException
04-04 14:14:43.720: E/AndroidRuntime(868):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-04 14:14:43.720: E/AndroidRuntime(868):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-04 14:14:43.720: E/AndroidRuntime(868):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-04 14:14:43.720: E/AndroidRuntime(868):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-04 14:14:43.720: E/AndroidRuntime(868):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-04 14:14:43.720: E/AndroidRuntime(868):  at android.os.Looper.loop(Looper.java:137)
04-04 14:14:43.720: E/AndroidRuntime(868):  at android.app.ActivityThread.main(ActivityThread.java:5041)
04-04 14:14:43.720: E/AndroidRuntime(868):  at java.lang.reflect.Method.invokeNative(Native Method)
04-04 14:14:43.720: E/AndroidRuntime(868):  at java.lang.reflect.Method.invoke(Method.java:511)
04-04 14:14:43.720: E/AndroidRuntime(868):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-04 14:14:43.720: E/AndroidRuntime(868):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-04 14:14:43.720: E/AndroidRuntime(868):  at dalvik.system.NativeStart.main(Native Method)
04-04 14:14:43.720: E/AndroidRuntime(868): Caused by: java.lang.NullPointerException
04-04 14:14:43.720: E/AndroidRuntime(868):  at com.example.bus.MainActivity.onCreate(MainActivity.java:44)
04-04 14:14:43.720: E/AndroidRuntime(868):  at android.app.Activity.performCreate(Activity.java:5104)
04-04 14:14:43.720: E/AndroidRuntime(868):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-04 14:14:43.720: E/AndroidRuntime(868):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-04 14:14:43.720: E/AndroidRuntime(868):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:48:09.023

这是你的问题：

```
04-04 14:14:43.720: E/AndroidRuntime(868): Caused by: java.lang.NullPointerException
04-04 14:14:43.720: E/AndroidRuntime(868):  at com.example.bus.MainActivity.onCreate(MainActivity.java:44) 
```

只需检查 MainActivity.java，第 44 行 - 您很可能尝试在那里使用未初始化的变量

# c# - 如何使用 .NET 在属性中获取构造函数参数名称？

> ID：15922236
> 
> 赞同：1
> 
> 时间：2013-04-10T09:39:33.503
> 
> 标签：c#, .net, vb.net

这是代码：

我正在寻找一种按名称访问参数值的方法。

属性是这样的：

```
[AttributeUsage(AttributeTargets.Field)]
public class EDataAttrAttribute : Attribute {

    public EDataAttrAttribute(int GroupID, int MinimumPermissionToEdit, bool ForcePersianLetter = false) {
        this.GroupID = GroupID;
        this.MinimumPermissionToEdit = MinimumPermissionToEdit; 
    }

    public int GroupID { get; private set; }
    public int MinimumPermissionToEdit { get; private set; } 

} 
```

* * *

```
public class EUser {
    [EDataAttr(1, 1)]
    public string FirstName;
} 
```

* * *

```
 var attr = typeof(T).GetField("FirstName").CustomAttributes.FirstOrDefault(a => a.AttributeType == typeof(EDataAttrAttribute));
                    int n = attr.ConstructorArguments.Count; // 2 !
                    int v = attr.NamedArguments.Count;       // 0 ! 
```

如何在不知道索引 int 的情况下获取 MinimumPermissionToEdit 值。
我只知道它被命名为 MinimumPermissionToEdit。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:42:47.433

你可以[`NamedArguments`](http://msdn.microsoft.com/en-us/library/system.reflection.customattributedata.namedarguments.aspx)用来访问那些；[`MemberInfo`](http://msdn.microsoft.com/en-us/library/system.reflection.customattributenamedargument.memberinfo.aspx)on 属性`CustomAttributeNamedArgument`允许您反映将使用命名属性参数设置的成员。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T09:42:02.577

您可以为此使用 LINQ。此外，您将不得不使用该[`NamedArguments`](http://msdn.microsoft.com/en-us/library/system.reflection.customattributedata.namedarguments.aspx)属性而不是`ConstructorArguments`：

```
NamedArguments.Single(x => x.MemberName == "Name").Value 
```

但是，为了`NamedArguments`工作，您实际上必须在使用属性时使用名称。您更新的代码表明您没有这样做。

在这种情况下，无法通过名称获取值。你只需要使用索引。与您所说的相反，该指数*是众所周知*的。它是它出现在构造函数中的索引。`MinimumPermissionToEdit`出现在第二个位置，所以它的索引是 1。

# c++ - 我如何在捕获的一半图像上实际设置光流？

> ID：15922239
> 
> 赞同：0
> 
> 时间：2013-04-10T09:39:41.887
> 
> 标签：c++, opencv, opticalflow

我已经在 OpenCV 中使用 C++ 实现了一个光流代码。但是，我想检测一半图像帧中的光流。我应该编辑哪个部分？是来自下面的这个函数吗？

```
cvCalcOpticalFlowPyrLK(
  frame1_1C, frame2_1C, 
  pyramid1, pyramid2, 
  frame1_features, 
  frame2_features, 
  number_of_features, 
  optical_flow_window, 
  5, 
  optical_flow_found_feature, 
  optical_flow_feature_error, 
  optical_flow_termination_criteria, 
  0 ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-25T23:20:07.270

不需要。函数本身不需要更改。您需要做的只是将要计算光流的图像部分传递给函数。

您可以定义要对其执行光流计算的图像范围。使用

> 想要的图像=图像（范围（x1，y1），范围（x2，y2））

以下是基于示例文件夹中的 lkdemo.cpp 的工作代码。唯一值得的改变是

> 灰色 = 灰色（范围（1,480），范围（1,320））；//给出图像的左半部分

它定义了感兴趣的区域。

```
#include "opencv2/video/tracking.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/highgui/highgui.hpp"

#include <iostream>
#include <ctype.h>

using namespace cv;
using namespace std;

static void help()
{
    cout << "*** Using OpenCV version " << CV_VERSION <<" ***"<< endl;
    cout << "\n\nUsage: \n"
            "\tESC - quit the program\n"
            "\tr - auto-initialize tracking\n"
            "\tc - delete all the points\n"
            "\tn - switch the \"night\" mode on/off\n"<< endl;
}

int main( int argc, char** argv )
{
    help();
     //Termination of the algo after 20 iterations or accuracy going under 0.03 
    TermCriteria termcrit(CV_TERMCRIT_ITER|CV_TERMCRIT_EPS, 20, 0.3);
    Size subPixWinSize(10,10), winSize(31,31);
    const int MAX_COUNT = 500;
    bool needToInit = false;
    bool nightMode = false;
    //Video capture is from the default device i.e. the webcam
    VideoCapture cap(0);
    if( !cap.isOpened() )
    {
        cout << "Could not initialize capturing...\n";
        return 0;
    }

    namedWindow( "Half screen Optical flow Demo!", 1 );
    Mat gray, prevGray, image;
    vector<Point2f> points[2];

    for(;;)
    {
        Mat frame;

        //Output from the Videocapture is piped to 'frame'
        cap >> frame;
        if( frame.empty() )
            break;

        frame.copyTo(image);
        cvtColor(image, gray, COLOR_BGR2GRAY);

        // Night mode not disabled
        if( nightMode )
            image = Scalar::all(0);
        gray = gray(Range(1,480), Range(1,320));
        if( needToInit || points[0].size()<=5)
        {                  
            goodFeaturesToTrack(gray, points[1], MAX_COUNT, 0.01, 10, Mat(), 3, 0, 0.4);
            cornerSubPix(gray, points[1], subPixWinSize, Size(-1,-1), termcrit);

        }
        else if( !points[0].empty() )
        {
            vector<uchar> status;
            vector<float> err;
            if(prevGray.empty())
                gray.copyTo(prevGray);
            calcOpticalFlowPyrLK(prevGray, gray, points[0], points[1], status, err, winSize, 3, termcrit, 0, 0.001);
            size_t i, k;

            for( i = k = 0; i < points[1].size(); i++ )
            {
                if( !status[i] )
                    continue;

                points[1][k++] = points[1][i];  
                circle(image, points[1][i], 3, Scalar(0,255,0), -1, 8);
            }
            points[1].resize(k);
        }      
        needToInit = false;
        imshow("Half screen Optical flow Demo!", image);

        char c = (char)waitKey(10);
        if( c == 27 )
            break;
        switch( c )
        {
        case 'r':
            needToInit = true;
            break;
        case 'c':
            points[0].clear();
            points[1].clear();
            break;
        case 'n':
            nightMode = !nightMode;
            break;
        }
        std::swap(points[1], points[0]);
        cv::swap(prevGray, gray);
    }
    cap.release();
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:01:20.413

如果您只想在图像的一半中检测光流，那么您可以简单地将图像的一半（frame1_1C，frame2_1C）作为参数。例如，以下代码初始化一个属于 frame1_1C 左半部分的矩阵：

```
cv::Mat frame1_1C_half(frame1_1C, cv::Range(0, frame1_1C.rows), cv::Range(0, frame1_1C.cols/2)); 
```

# symfony - 使配置节点在 Symfony 2 配置中同时支持字符串和数组？

> ID：15922243
> 
> 赞同：15
> 
> 时间：2013-04-10T09:39:49.753
> 
> 标签：symfony, configuration, dependency-injection, symfony-2.1

我的配置节点可以`source`同时支持`string`和`array`值吗？

采购自`string`：

```
# Valid configuration 1
my_bundle:
    source: %kernel.root_dir%/../Resources/config/source.json 
```

采购自`array`：

```
# Valid configuration 2
my_bundle:
    source:
        operations: []
        commands: [] 
```

扩展类将能够区分它们：

```
if (is_array($config['source']) {
    // Bootstrap from array
} else {
    // Bootstrap from file
} 
```

我可能会使用这样的东西：

```
$rootNode->children()
    ->variableNode('source')
        ->validate()
            ->ifTrue(function ($v) { return !is_string($v) && !is_array($v); })
            ->thenInvalid('Configuration value must be either string or array.')
        ->end()
    ->end()
->end(); 
```

但是如何将`source`（操作、命令等）的结构约束添加到变量节点（仅当其值为 type 时才应强制执行`array`）？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-14T18:35:25.513

我认为您可以通过重构扩展来使用配置规范化。

在您的扩展程序中更改您的代码以检查是否设置了路径

```
if ($config['path'] !== null) {
    // Bootstrap from file.
} else {
    // Bootstrap from array.
} 
```

并允许用户使用字符串进行配置。

```
$rootNode
    ->children()
        ->arrayNode('source')
            ->beforeNormalization()
            ->ifString()
                ->then(function($value) { return array('path' => $value); })
            ->end()
            ->children()
                ->scalarNode('foo')
                // ...
            ->end()
        ->end()
    ->end()
; 
```

像这样，您可以允许用户使用可以验证的字符串或数组。

参见[symfony 文档进行规范化](http://symfony.com/doc/2.1/components/config/definition.html#normalization)

希望它有帮助。最良好的问候。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-13T18:07:23.407

It is possible to use a [variable node](https://github.com/symfony/Config/blob/master/Definition/Builder/VariableNodeDefinition.php) type in combination with some custom validation logic:

```
<?php
use Symfony\Component\Config\Definition\Builder\TreeBuilder;
use Symfony\Component\Config\Definition\Exception\InvalidTypeException;

public function getConfigTreeBuilder()
{
    $treeBuilder = new TreeBuilder();
    $rootNode = $treeBuilder->root('my_bundle');

    $rootNode
        ->children()
            ->variableNode('source')
                ->validate()
                    ->ifTrue(function ($v) {
                        return false === is_string($v) && false === is_array($v);
                    })
                    ->thenInvalid('Here you message about why it is invalid')
                ->end()
            ->end()
        ->end();
    ;

    return $treeBuilder;
} 
```

This will succesfully process:

```
my_bundle:
    source: foo

# and

my_bundle:
    source: [foo, bar] 
```

but it won't process:

```
my_bundle:
    source: 1

# or

my_bundle
    source: ~ 
```

Of course, you won't get the nice validation rules a normal configuration node will provide you and you won't be able to use those validation rules on the array (or string) passed but you will be able to validate the passed data in the closure used.

# iphone - 如何更改 iTunes 连接元数据中的图像位置？

> ID：15922246
> 
> 赞同：-1
> 
> 时间：2013-04-10T09:39:53.357
> 
> 标签：iphone, ios, app-store-connect

错误地，在我上次更新我的 ios 应用程序期间，我切换了我为 iphone 版本提供的前两个图像的顺序。现在（该应用程序已被批准）我想更改图像位置，但在我看来我无法更改它。当我在右侧元数据窗口中使用“编辑”时，我可以拖动图像，但它们会回到原来的位置，什么也没有改变。应用商店使用第一张图片很重要：当有人搜索我的应用时，他看到一张错误的图片，这不是我想要展示的应用。我需要添加一个新版本，上传二进制文件并等待一周的审核才能更改图像的位置？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:14:32.127

我找到了让我继续发现关于这件事的不和谐意见的原因。在 2013 年 1 月之前可以做到这一点，然后 Apple 决定在应用程序处于“准备销售”状态时保持锁定。这是一个文档文件，指出什么是锁定的，什么不是。 [http://developer.apple.com/library/ios/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/11_EditingandUpdatingAppInformation/EditingandUpdatingAppInformation.html#//apple_ref/doc/uid/TP40011225-CH14-SW1](http://developer.apple.com/library/ios/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/11_EditingandUpdatingAppInformation/EditingandUpdatingAppInformation.html#//apple_ref/doc/uid/TP40011225-CH14-SW1)

不幸的是，要更改图像位置，必须准备新版本并上传新的二进制文件。

# logging - Rsyslog 过滤器选项

> ID：15922249
> 
> 赞同：0
> 
> 时间：2013-04-10T09:39:57.373
> 
> 标签：logging, rsyslog

我将系统配置为将 syslog 放到远程机器上。日志记录很重，我的内存不足。所以我想根据优先级过滤它，例如只记录错误消息。我在 rsyslog 网站上看到了一些选项

```
.=info;.=notice;\ mail.none /var/log/messages 
```

但是这个过滤条件不适用于远程机器，只有本地机器受到影响。请让我知道如何过滤远程机器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T11:20:43.900

这是一种语法，可让您轻松过滤日志传输。过滤器放置在 local0 设施上：

```
local0.* @@(o)10.0.0.1:514 
```

您还可以考虑从指定的优先级转移到最高优先级的优先级过滤器：

```
*.error @@(o)10.0.0.1:514 
```

将转发具有优先级错误、严重、警报和紧急情况的日志

最后，您可以组合：

```
local0.*;*.error @@(o)10.0.0.1:514 
```

** 可以使用此处解释的条件结构。：[http ://www.rsyslog.com/doc/rsyslog_conf_filter.html](http://www.rsyslog.com/doc/rsyslog_conf_filter.html)

# cometd - CometD 订阅监听器

> ID：15922251
> 
> 赞同：1
> 
> 时间：2013-04-10T09:40:00.097
> 
> 标签：cometd, bayeux

我在处理来自客户的订阅请求并根据请求执行一些处理时遇到问题。我希望能够在服务器上收到传入订阅请求时调用一个方法并执行一些处理。我查看了以下 CometD 文档并尝试了“订阅配置支持”中概述的示例，但我运气不佳。

[http://www.cometd.org/documentation/2.x/cometd-java/server/services/annotated](http://www.cometd.org/documentation/2.x/cometd-java/server/services/annotated)

我已经使用 Spring Bean 创建了 Bayeux 服务器，并且能够将数据发布到我在服务器端创建的其他通道名称。任何帮助或其他信息。关于这个话题将不胜感激！

我正在使用的代码示例：

```
@Service("CometDSubscriptionListener")
public class CometDSubscriptionListener {

    private final String channel = "/subscription";
    private static final Logger logger = Logger.getLogger(CometDSubscriptionListener.class);    
    private Heartbeat heartbeat;

    @Inject
    private BayeuxServer bayeuxserver; 

    @Session
    private ServerSession sender;

    public CometDSubscriptionListener(BayeuxServer bayeuxserver){       
        logger.info("CometDSubscriptionListener constructor called");       
    }

    @Subscription(channel)  
    public void processClientRequest(Message message)
    {   
        logger.info("Received request from client for channel " + channel);
        PublishData();  
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T10:37:13.540

[查看注释服务](http://docs.cometd.org/reference/#java_server_services_annotated)的文档，以及[CometD 概念](http://docs.cometd.org/reference/#concepts)。

如果我正确阅读了您的问题，您希望能够在客户端订阅频道时执行一些逻辑，而不是在消息到达该频道时执行一些逻辑。

您混淆了`@Subscription`注释的含义，因此请阅读上面应该阐明其语义的链接。

要做我理解你想做的事，你需要这个：

```
@Service
public class CometDSubscriptionListener 
{
    ...

    @Listener(Channel.META_SUBSCRIBE)  
    public void processSubscription(ServerSession remote, ServerMessage message)
    {   
        // What channel the client wants to subscribe to ?
        String channel = (String)message.get(Message.SUBSCRIPTION_FIELD);

        // Do your logic here
    }
} 
```

# java - 继承中的静态变量

> ID：15922260
> 
> 赞同：0
> 
> 时间：2013-04-10T09:40:31.477
> 
> 标签：java, inheritance, static

```
public class A 
{
    public static int i;
}
public class B extends A
{
    public static void main(String[] args)
    {
        System.out.println("print i=" + B.i); // referred to A.i
    }
} 
```

我的问题是如何`B.i`指代`A.i`？

如果静态变量`i`是继承的，为什么java还允许`i`在B类中定义另一个变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:44:53.980

的公共或受保护成员`A`在 的所有子类中可见`A`。

> 如果静态变量 i 是继承的，为什么 java 还允许在 B 类中定义另一个变量 i 呢？

很难推测*为什么*。一个可能的原因是，这允许向基类添加成员，而不会破坏任何已经碰巧具有同名成员的派生类。

请注意，如果您在 中定义另一个`i`，`B`它将*遮蔽* `A.i`，从而难以访问后者。[我见过人们期望这表现出 polymorphically](https://stackoverflow.com/questions/15860206/access-super-field-from-subclass-object)，但事实并非如此（无论如何，您的情况略有不同，因为`A.i`is `static`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:04:11.627

我这里是一个静态变量。一个静态变量，用外行的话来说，意味着所有类都可以访问一个副本。所以，由于你的 B 类扩展了 A，B 可以访问 A 的静态变量。

如果你在本地定义变量，那么变量的本地值隐藏了父类的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:46:04.510

有两个不同的东西，范围和可见性。您不能在同一范围内重新定义变量两次（尽管您可以在嵌套范围内重新定义它们）。

但是在继承的情况下，子类超出了超类的范围，但由于继承而对该变量具有可见性。所以子类允许你`i`再次定义变量，虽然它会隐藏超类的变量。你将看不到它的价值。（除非使用超类中的任何吸气剂）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T09:46:34.793

Java 允许您更改扩展类的特定变量值。

**这是因为，静态变量在同一类**的所有对象之间共享。 **它是属于类而不属于对象（实例）的变量。**

因此，当扩展父类的静态变量时，实际上并不是扩展类的一部分，而是可以访问（只要它们不是私有的）。

此外，这可用于执行以下操作：

*   对扩展类使用不同的静态常数。

这样做的一个用途是根据与使用 instanceof 相对的 STATIC 整数来识别类。这可以进一步结合一个开关来改变基于对象类型的行为。

因此，在最基本的示例中，假设我们要创建一个表示 TYPE 的变量。

```
class A
{
    public static final int NODE_TYPE = NODE_PERSON;
    public static final int NODE_PERSON = 0;
    public static final int NODE_CAR = 1;

}

class B extends Class A
{
    public static int NODE_TYPE = NODE_CAR;
} 
```

这已在许多框架中使用，包括 Eclipse 抽象语法树：

[http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.jdt.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fjdt%2Fcore%2Fdom%2FASTNode.html](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.jdt.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fjdt%2Fcore%2Fdom%2FASTNode.html)

您将看到代表不同节点类型的静态整数列表。

# spring - Resttemplate 无法解析类型为 T 的数组

> ID：15922261
> 
> 赞同：3
> 
> 时间：2013-04-10T09:40:33.830
> 
> 标签：spring, rest, generics, deserialization, resttemplate

我遇到了 Spring 和 restTemplate 的问题。我想发送一个包含通用数组的对象（ListResponse）。辩护如下：

```
public class ListResponse<T> implements Serializable {

private long total;
private int page;
private int pageSize;
private T[] objects; 
```

我用 restTemplate.getForObject() 发送一个请求。结果，我得到了一个 ListResponse 类型的对象，但是该 objects 数组包含一个 LinkedHashMaps 数组，而不是一个具有 T 类型对象的数组。

似乎 restTemplate 无法将数组中的元素转换为正确的类型。

如何确保得到 T 类型的对象数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-08T16:28:11.957

我今天遇到了这个问题，这是我想出的解决方案（实际上是我的一位同事建议的）。我们将它与返回 List<MyDto> 的接口一起使用。

调用 RestTemplate 时，不要传入泛型类型。
定义： `public class MyDtoListTemplate extends ListTemplate<MyDto>`

然后，调用
`MyDtoListTemplate template = restTemplate.getForObject("url", MyDtoListTemplate .class, mapOfPathVariables);`

令人遗憾的是，您必须定义一个扩展/实现泛型类型的具体类，但是杰克逊反序列化器可以使用泛型信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T03:22:04.600

我记得我能够使用 Jackson 2 反序列化泛型类。在使用它进行任何 Http 调用之前，我必须将[MappingJackson2HttpMessageConverter转换器添加到 RestTemplate。](http://static.springsource.org/autorepo/docs/spring/3.2.0.M1/api/org/springframework/http/converter/json/MappingJackson2HttpMessageConverter.html)

```
RestTemplate template = new RestTemplate();
template.getMessageConverters().add(new MappingJackson2HttpMessageConverter()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T22:48:03.090

不幸的是，据我所知，没有简单的方法可以做到这一点。问题是 RestTemplate 被告知期望哪种对象类型。只要该对象中的所有字段在 json/xml 中都有对应的元素，一切正常。在泛型的情况下，序列化程序不知道期望哪个类，所以它只是将它得到的映射转换为 java 映射。

如果您尝试获取通用返回类型的 getForObject，您将遇到同样的问题。

# mysql - sql查询返回所需数据量的两倍

> ID：15922263
> 
> 赞同：0
> 
> 时间：2013-04-10T09:40:41.177
> 
> 标签：mysql, sql

我有一个看起来像这样的 sql 查询：

```
 public function get_data() {

    $db = new databaseConnection();
    $db->do_connection();

    $this->uid = $_SESSION['uid'];

    $query = "SELECT ut.level, ut.location, ui.quantity, ui.game_item_id
            FROM user_table ut, user_inventory ui
            WHERE ut.user_id = ui.user_id
            AND ut.user_id = :user_id";
    $args = array(
        ":user_id" => $this->uid
    );
    $db->safeQuery($query,$args);

    $results = $db->safe_fetch_all_results();
    if($results == null){
        die ('Error with user data fetch');
    }

    var_dump($results);

    return $results;

} 
```

查询按我的意愿工作，但由于某种原因，var_dump 显示返回的数据如下：

```
array (size=2)
0 => 
array (size=8)
  'level' => string '1' (length=1)
  0 => string '1' (length=1)
  'location' => string '4554' (length=4)
  1 => string '4554' (length=4)
  'quantity' => string '2' (length=1)
  2 => string '2' (length=1)
  'game_item_id' => string '1' (length=1)
  3 => string '1' (length=1)
1 => 
  array (size=8)
  'level' => string '1' (length=1)
  0 => string '1' (length=1)
  'location' => string '4554' (length=4)
  1 => string '4554' (length=4)
  'quantity' => string '1' (length=1)
  2 => string '1' (length=1)
  'game_item_id' => string '5' (length=1)
  3 => string '5' (length=1) 
```

正如您所看到的，对于查询检索的每条记录，也会检索到一个副本，一个带有字段名称，另一个带有索引号（如果您愿意）。

当我执行嵌套的 foreach 语句时，我得到了相同的结果，我得到了重复的结果。

这是我的表的结构：

user_table 表

```
user_ID PK
username
password
email
level
location 
```

game_items 表

```
game_item_is PK
item_name 
```

user_inventory 表

```
user_inventory_id PK
user_id FK
game_item_id FK
quantity 
```

你们会碰巧知道为什么会这样吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:44:25.403

这是标准行为...如果您从结果集中获取数据，您可以选择通过关联 (FETCH_ASSOC)、索引或两者 (FETCH_BOTH) 来检索它

# ajax - 在asp.net mvc中使用ajax上传文件

> ID：15922268
> 
> 赞同：1
> 
> 时间：2013-04-10T09:40:51.847
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-3, jquery, file-upload

我知道这已经讨论过很多次了。

我基本上希望在我看来更新文件的可能性。该文件必须映射到控制器期望的模型：

```
public ActionResult Create(Company company)
{
    //Do something with the received model
} 
```

该模型：

```
public class Company
{
    public int Id { get; set; }
    public HttpPostedFileBase PictureUpload { get; set; }
    ...
} 
```

这工作没有任何问题。现在我想通过 AJAX 发送我的表单数据，包括文件。因此，我认为我正在使用它：

```
@using (Ajax.BeginForm("Create", "Company", null, new AjaxOptions { HttpMethod = "Post", OnSuccess = "ajaxOnSuccess", OnFailure = "alert('Error message.');" }, new { @class = "ym-form", enctype = "multipart/form-data" })) 
```

这基本上可以工作，但是文件上传不起作用（据我所知，ajax 无法访问该文件，因此无法发送）。

我想要这个问题的最佳解决方案，而无需修改我的后端（控制器/模型）。

例如。我读了这篇文章： [http ://ajeeshms.in/Blog/Article/1/upload-files-using-ajax-in-asp-mvc](http://ajeeshms.in/Blog/Article/1/upload-files-using-ajax-in-asp-mvc)

它提供了两种不错的可能性，但我必须修改后端，因为据我所知，在我的模型中自动映射到 HttpPostedFileBase 类型不再可能了。

我不介意为我的视图使用任何工作插件或使用仅受新浏览器支持的技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-16T15:53:18.823

试试这个代码

//添加对form.js的引用

```
<script src="http://malsup.github.com/jquery.form.js"></script>

@using (Html.BeginForm("Create", "Company", FormMethod.Post, new { @enctype ="multipart/form-data",@id="formid" }))
{

}

//Javascript code

<script type="text/javascript">

$('#formid').ajaxForm(function (data) {

});

</script> 
```

这将作为 ajax 提交工作。

[//您可以在此处](http://malsup.com/jquery/form/)获取有关 AjaxForm 的更多详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:06:11.297

我是根据 Demian Flavius 的回答做出的： [How to do a ASP.NET MVC Ajax form post with multipart/form-data?](https://stackoverflow.com/questions/581703/how-to-do-a-asp-net-mvc-ajax-form-post-with-multipart-form-data#13522052)

基本上，它是新的 JavaScript 的 FormData 对象，可以轻松地使用 ajax 进行上传，如您提到的文章中所述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:18:49.513

请试试这个`@using (Html.BeginForm("Create", "Company", FormMethod.Post, new { id = "ym-form", enctype="multipart/form-data" }))`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-11T09:30:16.770

我认为您不能使用 AJAX 上传文件。实现此目的的一种方法是使用隐藏的 iframe。试试这个[jQuery Form 插件](http://jquery.malsup.com/form/#file-upload)和[Telerik 文件控件](http://www.telerik.com/products/aspnet-ajax/asyncupload.aspx)

也请参考这个[链接](http://forums.asp.net/t/1450881.aspx)。

# facebook - facebook 应用程序中的 PayPal 立即购买按钮

> ID：15922275
> 
> 赞同：0
> 
> 时间：2013-04-10T09:41:12.613
> 
> 标签：facebook, paypal, facebook-apps

我正在使用画布/iframe 开发 facebook 应用程序。我如何添加 PayPal 立即购买按钮，因为 Paypal 不能在 iframe 中使用？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:42:14.043

您可以创建一个超链接并在新页面中打开 PayPal 支付页面，或者在单击按钮时在 iFrame 之外打开一个新窗口。如果您使用的是 PayPal 提供的生成的 HTML 按钮代码，只需将 target="PayPal" 添加到代码的第一行。所以它看起来像下面这样。

```
<form target="paypal" action="https://www.paypal.com/cgi-bin/webscr" method="post"> 
```

# mvvm - 是否应该从属性中“触发”方法？

> ID：15922276
> 
> 赞同：1
> 
> 时间：2013-04-10T09:41:12.523
> 
> 标签：mvvm, properties

我的应用程序使用 MVVM 模式。My`TextBox`绑定到我的 ViewModel 的属性（类型字符串）。

当`TextBox`通过用户键入更改的内容时，我想执行一些验证。

所以，目前，我的代码是

```
<TextBox Text="{Binding XmlContentAsString, UpdateSourceTrigger=PropertyChanged}" /> 
```

我的 ViewModel 有这个属性和字段：

```
 private string _xmlContentAsString;
        public string XmlContentAsString
        {
            get { return _xmlContentAsString; }
            set
            {
                if (_xmlContentAsString == value)
                    return;

                _xmlContentAsString = value;
                PerformValidiationLogic(value);//This is where I am unsure
            }
        } 
```

现在，这行得通，但是，我不知道为什么，我不喜欢这个！将方法包含在属性中有些感觉“被黑客入侵”。

有人可以告诉我这是否是使用 MVVM 模式时的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:01:12.173

在您的示例中，您对值执行验证逻辑，但如果验证失败，验证的结果是什么？通常，您希望通知用户验证失败。如果是这种情况，那么我建议 IDataErrorInfo （示例可以在这里找到：

[http://codeblitz.wordpress.com/2009/05/08/wpf-validation-made-easy-with-idataerrorinfo/](http://codeblitz.wordpress.com/2009/05/08/wpf-validation-made-easy-with-idataerrorinfo/)）。

如果您打算在不通知用户的情况下覆盖该值，那么在 setter 中进行验证是可以接受的（尽管出于更多个人原因仍然不是粉丝）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:18:34.973

有不同类型的验证。对于简单的验证字符串长度或允许的字符等，您可以使用 DataAnnotations 并将验证放在属性的属性中。您需要使用 System.ComponentModel.DataAnnotations；

然后例如将字符串保持为 9 个字符：

```
 [StringLength(9)]
    public string StringValue
    {
        get
        {
            return stringValue;
        }

        set
        {
            this.stringValue = value;
        }
    } 
```

然后是更复杂的验证，并且有效地执行您的业务逻辑。关于如何做到这一点似乎有很多观点。理想情况下，它应该属于模型，以便可以重用验证，但显然是通过视图模型调用的。

就我个人而言，我偶尔会在属性设置器中调用方法，对我来说，这就是能够创建设置器和获取器的全部原因 - 否则除了自动属性之外没有任何意义。

但是，如果它是复杂的或异步的，那么您可能会遇到问题。我会非常小心地使用 UpdateSourceTrigger=PropertyChanged，因为这意味着您将在每个角色中触发它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T11:06:25.027

在我看来，这是正确的做法。我将为您的 ViewModel 编写一个基类，其中包含一个设置属性的方法，调用 PropertyChanged 并验证是否将某些验证规则附加到该属性。

例如：

```
public abstract class ValidableViewModel
{
    private List<ValidationRule> _validationRules;

    public ValidableViewModel()
    {
        _validationRules = new List<ValidationRule>();
    }

    protected virtual void SetValue<T, T2>(Expression<Func<T>> expression,
                                           ref T2 backend, T2 value)
    {
        if (EqualityComparer<T2>.Default.Equals(backend, value))
            return;

        backend = value;
        OnPropertyChanged(expression);

        Validate(expression.Name, value);
    }

    protected void Validate(string propertyName, object value)
    {
        foreach(var validationRule in _validationRules)
        {
            if(validationRule.PropertyName == propertyName)
                validationRule.Execute(value);
        }
    }
} 
```

代码不完整，有很多遗漏。但这可能是一个开始;-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T16:03:59.777

我个人不建议在您的财产中添加太多逻辑。我会使用绑定到事件的命令，即文本框的 lostfocus 事件，并在那里执行您的验证。

我会使用这样的东西：

```
 <TextBox Text="{Binding XmlContentAsString, UpdateSourceTrigger=PropertyChanged}">
        <interactivity:Interaction.Triggers>
            <interactivity:EventTrigger EventName="LostFocus">
                <interactivity:InvokeCommandAction Command="{Binding LostFocusCommand, Mode=OneWay}"/>
            </interactivity:EventTrigger>
        </interactivity:Interaction.Triggers>           
    </TextBox> 
```

然后在您的视图模型中有一个带有验证逻辑的 LostFocusCommand 命令。
我使用 mvvm-light 并且可以为此提供更详细的示例。（您需要在 xaml 顶部包含混合交互声明）

# java - 高复制环境的持久性策略（Google App Engine）

> ID：15922277
> 
> 赞同：0
> 
> 时间：2013-04-10T09:41:15.620
> 
> 标签：java, google-app-engine

我有这个代码在没有 HR 的情况下工作得很好：

```
protected Entity createEntity(Key key, Map<String, Object> props){
    Entity result = null;
    try {
        Entity e = new Entity(key);
        Iterator it = props.entrySet().iterator();
        while (it.hasNext()) {
            Map.Entry<String, Object> entry = (Map.Entry<String, Object>) it.next();
            String propName = entry.getKey();
            Object propValue = entry.getValue(); 
            setProperty(e, propName, propValue);
        }
        key = _ds.put(e);
        if (key != null)
            result = _ds.get(key);
    } catch (EntityNotFoundException e1) {
    }
    return result;
} 
```

这只是一个简单的方法，它的功能是创建一个新的`Entity`out aa given `key`，否则返回 NULL 。如果没有 JUnit 中的 HR 配置，这可以正常工作，但是当我配置它时，我总是收到一个错误，在哪里`_ds.get(key)`找不到键抛出：

```
EntityNotFoundException: No entity was found matching the key: 
```

具体做的时候：

```
while(it.hasNext()){
   // stuff
   createEntity(key, map); 
   // stuff
} 
```

我认为我的代码中的问题是它试图过早地获取实体。如果是这样的话，我怎么能不诉诸`Memcache`或类似的东西来处理这个问题。

**更新：**

在`createEntity`事务中执行时，它会失败。但是，如果我在交易之外删除它，如果失败得很惨。我需要能够在事务中运行，因为我的更高级别的 API 将许多需要作为一个组存在的对象。

**更新：**

我听从了 Strom 的建议，但是我发现了一个奇怪的副作用，而不是`_ds.get(key)`对方法进行操作，这让我`PreparedQuery` `countEntities`失败了。如果添加一个`_ds.get(key)`甚至我不做任何事情或保存`Entity`从那个得到的`countEntities`回报返回预期的计数。这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:47:00.013

You try to create a new entity and then read back that entity within the same transaction? Can't be done.

Queries and gets inside transactions see a single, consistent snapshot of the datastore that lasts for the duration of the transaction. [1](https://developers.google.com/appengine/articles/transaction_isolation)

In a transaction, all reads reflect the current, consistent state of the Datastore at the time the transaction started. This does not include previous puts and deletes inside the transaction. Queries and gets inside a transaction are guaranteed to see a single, consistent snapshot of the Datastore as of the beginning of the transaction. [2](https://developers.google.com/appengine/docs/python/datastore/transactions#Isolation_and_Consistency)

This consistent snapshot view also extends to reads after writes inside transactions. Unlike with most databases, queries and gets inside a Datastore transaction do not see the results of previous writes inside that transaction. Specifically, if an entity is modified or deleted within a transaction, a query or get returns the original version of the entity as of the beginning of the transaction, or nothing if the entity did not exist then. [2](https://developers.google.com/appengine/docs/python/datastore/transactions#Isolation_and_Consistency)

PS. Your assumption is worng, it's impossible to fetch an entity by key "too soon". Fetches by key are strongly consistent.

Also, why do you need to retrieve the entity again anyway? You just put it in the datastore yourself, so you already have its contents.

So change this part:

```
key = _ds.put(e);
    if (key != null)
        result = _ds.get(key); 
```

To this:

```
key = _ds.put(e);
    if (key != null)
        result = e; // key.equals(e.getKey()) == true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:10:20.713

欢迎来到 GAE 环境，在你放弃之前尝试多读一遍：

```
 int counter = 0;
 while (counter < NUMBER_OF_TRIES){
  try {

   //calling storage or any other non-reliable thing
   if(success) {break;} //escape away if success

   } catch(EntityNotFoundException e){
     //log exception
     counter++;
   }
 } 
```

谷歌文档中的重要说明：**“您可以写入同一实体组的速率限制为每秒 1 次写入实体组。”**

来源：[https ://developers.google.com/appengine/docs/java/gettingstarted/usingdatastore](https://developers.google.com/appengine/docs/java/gettingstarted/usingdatastore)

# html - 找出图片url的简单dom

> ID：15922280
> 
> 赞同：1
> 
> 时间：2013-04-10T09:41:20.840
> 
> 标签：html, dom, simpledom

我有一个这样的 index.html 代码

```
<div class="photoImg">
<img src="http://host.com/images/image-name.jpg" alt="image" />
</div> 
```

我使用此代码查找图像网址（[http://host.com/images/image-name.jpg](http://host.com/images/image-name.jpg)）

```
 <?php
    include('simple_html_dom.php');
$url = "index.html";
echo $url;
foreach($html->find('div.photoImg') as $photo){
$item['src'] = $photo->find('img', 0)->src;
$photo[] = $item;
}
print_r($photo);
?> 
```

但它不起作用。谁能帮我修复我的代码！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:48:25.553

试试这个解决方案：

```
$photodivs = $html->find('div.photoimg');
foreach($photodivs as $photo)
$images[] = $photo->find('img',0)->src;
var_dump($images); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:47:21.157

您是否尝试将`photoImg`课程直接传递给图像？

# java - java子类中的方法重载

> ID：15922284
> 
> 赞同：-4
> 
> 时间：2013-04-10T09:41:40.760
> 
> 标签：java

子类中的java**方法重载是否可能？**如果可能的话，如何与方法覆盖区分开来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:47:03.200

**方法覆盖（多态）**

这是您创建方法的地方，其*签名*与父类中的方法完全相同。那是：

```
public class ParentClass
{
    public void sayHello(String name) { System.out.println("Hello " + name); }
} 
```

在子类中：

```
public class ChildClass
{
    public void sayHello(String name) { System.out.println("HELLO" + name);}
} 
```

**方法重载**

这是您创建具有相同名称但接受不同参数的方法的地方。

```
public class ChildClass
{
    public void sayHello(int name) { System.out.println("HELLO" + name);}
    // sayHello is a different method to the JVM, but has the same name.
} 
```

**文档的强大力量**

作为对我自己的测试，我用谷歌搜索了这个问题，第一个链接是 Oracle 提供的关于这个确切主题的综合教程。[这](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)是链接。

# java - 使用对话框模式更新检票面板

> ID：15922288
> 
> 赞同：1
> 
> 时间：2013-04-10T09:41:51.327
> 
> 标签：java, wicket

我有一个面板，应该使用对话框 Modul 中的数据进行更新。在 Panels 构造函数中，我有一个数据模型，它应该填充面板中的组件。

Panel 构造函数如下所示：

```
 public MyPanel(String id, final MyDataMOdel aDataModel) {
    super(id);
            ....
          } 
```

该面板在我的页面中添加为：

```
 MyDataModel myDataModel = new MyDataModel();
    MyPanel myPanel = new MyPanel("myPanel", myDataModel); 
```

在 Open Dialog `setWindowClosedCallback`方法中，我更新了 DataModel

```
 myModal.setWindowClosedCallback(new ModalWindow.WindowClosedCallback()
            {
                private static final long serialVersionUID = -1746088901018629567L;

                public void onClose(AjaxRequestTarget target)
                {
                    update myDataModel here
                    Got the updated datamodel here (I can see that it is updated)
                      target.add(myPanel)
                 .... 
```

这样，我看不到面板中的组件已更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:28:50.740

暂时，我解决如下：

```
 remove(myPanel);
    myPanel = new MyPanel("myPanel", myUpdatedDataModel);
    myPanel.setOutputMarkupId(true);
    add(myPanel);
    target.appendJavaScript("window.location.reload()"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:04:04.740

我不确定你的`MyDataModel()`是什么。但是您可以使用共享检票口模型。

```
 Model<YourDataObjectToShare> dataObjectToSHare = new Model<YourDataObjectToShare>()
    {
        private static final long serialVersionUID = -6394439155356911110L;

        @Override
        public YourDataObjectToShare getObject()
        {
            return ... The Updated Shared data here
        }
    }; 
```

然后传递`dataObjectToSHare`给面板参数

看[这个](https://stackoverflow.com/questions/6532178/wicket-persistent-object-between-panels)

# reporting-services - SSRS 报告表达式转换

> ID：15922290
> 
> 赞同：-4
> 
> 时间：2013-04-10T09:41:53.817
> 
> 标签：reporting-services

If Usage > 0 And Tnd > 0 Then Return Math.Round((Tnd / Usage) * 100, 2) Else Return 0 End If

请将此转换为 SSRS 表达式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:12:31.153

尝试这个：
`=IIF(Usage > 0 And Tnd > 0, Round((Tnd/Usage)*100,2), 0 )`

# javascript - 如何在我的 popup.js 文件中获取选项卡的当前 URL？

> ID：15922294
> 
> 赞同：1
> 
> 时间：2013-04-10T09:42:02.447
> 
> 标签：javascript, google-chrome, google-chrome-extension

嗨，我正在尝试在我的 popup.js 文件中获取活动选项卡的当前 url，下面是我正在使用的代码，但不知何故它不起作用，所以请你帮我看看它有什么问题。先感谢您。

```
function getAmazonURL()
{
    alert("ok");
    $url = "";
    chrome.windows.getAll({
    }, function(windows) {
        for (var i in windows) {
            var tabs1 = windows[i].tabs;
            for (var j in tabs1) {
                var tab = tabs1[j];
                if(tab.active)
                {
                    $url = tab.url;alert(tab.url);
                }
            }
        }
    });

}

document.addEventListener('DOMContentLoaded', function () {
    getAmazonURL();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:50:02.833

要获得活动选项卡，您只需使用[`chrome.tabs.query`](http://developer.chrome.com/extensions/tabs.html#method-query). 例如：

```
chrome.tabs.query({active:true,currentWindow:true},function(tab){
  //Be aware that `tab` is an array of Tabs 
  console.log(tab[0].url);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:48:58.110

```
function getAmazonURL()
{
    $chromeurl = "";
    chrome.windows.getAll({
        "populate":true
    }, function(windows) {

        for (var i in windows) {
            var tabs = windows[i].tabs;
            for (var j in tabs) {
                var tab = tabs[j];
                if(tab.active)
                {
                    $chromeurl = tab.url;
                }
            }
        }
        alert($chromeurl);

        return $chromeurl;
    });
}

document.addEventListener('DOMContentLoaded', function () {
    getAmazonURL();
}); 
```

# c# - C#.NET 中的 Windows 文件创建日期

> ID：15922297
> 
> 赞同：0
> 
> 时间：2013-04-10T09:42:04.170
> 
> 标签：c#, file, identity

是否可以同时创建多个文件？很明显，在某些情况下（我不知道那些情况），当我调用`FileInfo`类`CreationTimeUtc()`方法时，它给了我完全相同的时间字符串。我通过查看它们的创建时间来区分同一文件夹下的文件，但由于有时创建时间相同，它破坏了我的方法。在这种情况下，即使文件被重命名或更改，我也需要一个适当的文件标识符来识别文件。我不知道我可以为此目的使用哪种标识符。任何帮助，将不胜感激。我正在使用**C# .net 4.5**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:45:13.027

要识别文件，您可能需要计算校验和，以便识别内容，而不是名称、日期或位置。看看[这里](https://stackoverflow.com/questions/10520048/calculate-md5-checksum-for-a-file)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:11:39.250

我通过使用 GetFileInformationByHandle() 方法解决了这个问题，如下所示：

```
private static string GetFilePointer(FileInfo fi)
    {
        var fs = fi.OpenRead();
        var ofi = new BY_HANDLE_FILE_INFORMATION();
        ulong fileIndex = 0;
        if (GetFileInformationByHandle((IntPtr)fs.Handle, out ofi))
        {
            fileIndex = ((ulong)ofi.FileIndexHigh << 32) + (ulong)ofi.FileIndexLow;
        }
        fs.Close();
        return fileIndex.ToString();
    }

    [DllImport("kernel32.dll", SetLastError = true)]
    private static extern bool GetFileInformationByHandle(IntPtr hFile, out BY_HANDLE_FILE_INFORMATION lpFileInformation);

    [StructLayout(LayoutKind.Sequential)]
    struct BY_HANDLE_FILE_INFORMATION
    {
        public uint FileAttributes;
        public FILETIME CreationTime;
        public FILETIME LastAccessTime;
        public FILETIME LastWriteTime;
        public uint VolumeSerialNumber;
        public uint FileSizeHigh;
        public uint FileSizeLow;
        public uint NumberOfLinks;
        public uint FileIndexHigh;
        public uint FileIndexLow;
    } 
```

看起来像是在 ntfs 文件系统上拥有文件标识符的一种非常巧妙的方式，重命名、内容更改或移动不会影响它。

# vb.net - 从 VB.NET 向 excel 输入框传递值

> ID：15922300
> 
> 赞同：11
> 
> 时间：2013-04-10T09:42:11.553
> 
> 标签：vb.net, vba, excel, excel-automation

我正在尝试在一些具有一些宏的 Excel 工作表上自动化数据填充。现在excel受到保护，我无法获得密钥。现在我可以运行宏，但是当我尝试传递参数时，我得到参数不匹配。

如果我只是使用名称运行宏，我会得到`inputbox`一个额外的参数作为输入，并自动为列生成一些值。我必须手动输入这个值到`inputbox`现在。有什么方法可以使该过程自动化，即捕获宏在 vb.net 脚本中抛出的输入框并从那里输入值？即，我想运行宏，在弹出窗口要求我输入一些值后，使用 vb.net 代码将值输入到该弹出窗口。

这是我到目前为止所拥有的

```
Public Class Form1
    Dim excelApp As New Excel.Application
    Dim excelWorkbook As Excel.Workbook
    Dim excelWorkSheet As Excel.Worksheet

    Private Sub Button4_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button4.Click
        excelWorkbook = excelApp.Workbooks.Open("D:/excelSheets/plan_management_data_templates_network.xls")
        excelApp.Visible = True

        excelWorkSheet = excelWorkbook.Sheets("Networks")

        With excelWorkSheet
            .Range("B7").Value = "AR"
        End With

        excelApp.Run("createNetworks")
        // now here I would like to enter the value into the createNetworks Popup box
        excelApp.Quit()
        releaseObject(excelApp)
        releaseObject(excelWorkbook)
    End Sub 
```

宏定义

```
createNetworks()
//does so basic comparisons on existing populated fields
//if true prompts an inputbox and waits for user input. 
```

这也使我的 vb.net 脚本无法移动到下一行。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-19T19:49:04.057

像你和我一样，我们都有名字，类似地窗口有`handles(hWnd)`，`Class`等等。一旦你知道那`hWnd`是什么，与那个窗口交互就更容易了。

这是输入框的截图

![在此处输入图像描述](https://i.stack.imgur.com/JeCBd.png)

**逻辑**：

1.  使用输入框的句柄`FindWindow`和输入框的标题找到输入框的句柄`Create Network IDs`

2.  一旦找到，在该窗口中找到编辑框的句柄，使用`FindWindowEx`

3.  找到编辑框的句柄后，只需使用`SendMessage`写入即可。

在下面的示例中，我们将写入`It is possible to Interact with InputBox from VB.Net`Excel 输入框。

**代码**：

创建一个表单并向其添加一个按钮。

![在此处输入图像描述](https://i.stack.imgur.com/HOIdb.png)

粘贴此代码

```
Imports System.Runtime.InteropServices
Imports System.Text

Public Class Form1
    Private Declare Function FindWindow Lib "user32" Alias "FindWindowA" _
    (ByVal lpClassName As String, ByVal lpWindowName As String) As Integer

    Private Declare Function FindWindowEx Lib "user32" Alias "FindWindowExA" _
    (ByVal hWnd1 As Integer, ByVal hWnd2 As Integer, ByVal lpsz1 As String, _
    ByVal lpsz2 As String) As Integer

    Private Declare Function SendMessage Lib "user32" Alias "SendMessageA" _
    (ByVal hwnd As Integer, ByVal wMsg As Integer, ByVal wParam As Integer, _
    ByVal lParam As String) As Integer

    Const WM_SETTEXT = &HC

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Dim Ret As Integer, ChildRet As Integer

        '~~> String we want to write to Input Box
        Dim sMsg As String = "It is possible to Interact with InputBox from VB.Net"

        '~~> Get the handle of the "Input Box" Window
        Ret = FindWindow(vbNullString, "Create Network IDs")

        If Ret <> 0 Then
            'MessageBox.Show("Input Box Window Found")

            '~~> Get the handle of the Text Area "Window"
            ChildRet = FindWindowEx(Ret, 0, "EDTBX", vbNullString)

            '~~> Check if we found it or not
            If ChildRet <> 0 Then
                'MessageBox.Show("Text Area Window Found")
                SendMess(sMsg, ChildRet)
            End If
        End If
    End Sub

    Sub SendMess(ByVal Message As String, ByVal hwnd As Long)
        Call SendMessage(hwnd, WM_SETTEXT, False, Message)
    End Sub
End Class 
```

**截屏**

当你运行代码时，这就是你得到的

![在此处输入图像描述](https://i.stack.imgur.com/Mgvex.png)

* * *

**编辑（基于在聊天中自动确定/取消的进一步请求）**

**自动化输入框的确定/取消按钮**

好的，这是一个有趣的事实。

`InputBox`您可以在 Excel 中以两种方式调用该函数

```
Sub Sample1()
    Dim Ret
    Ret = Application.InputBox("Called Via Application.InputBox", "Sample Title")
End Sub 
```

和

```
Sub Sample2()
    Dim Ret
    Ret = InputBox("Called Via InputBox", "Sample Title")
End Sub 
```

![在此处输入图像描述](https://i.stack.imgur.com/LC1CH.png)

在您的情况下，使用第一种方式，不幸的是，`OK`和`CANCEL`按钮没有手柄，所以不幸的是，您将不得不使用`SendKeys (Ouch!!!)`它来与之交互。如果您的收件箱是通过第二种方法生成的，那么我们可以轻松地自动化`OK`和`CANCEL`按钮 :)

![在此处输入图像描述](https://i.stack.imgur.com/0wbum.png)

**附加信息**：

在 Visual Studio 2010 Ultimate（64 位）/Excel 2010（32 位）上测试

**受您的问题启发，我实际上写了一篇关于如何与InputBox 上的按钮进行交互的博客[文章。](http://www.siddharthrout.com/2013/04/20/excel-inputbox-automation-from-vb-net/)`OK`**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-13T05:07:38.437

目前，我采用一种方法，在脚本调用宏之前运行线程。该线程检查输入框是否已被调用。如果是，它会从该位置获取值并使用 sendkeys 提交该框。

这是一个基本的解决方案，但我希望有一个更优雅的解决方案来解决这个问题。

我的解决方案代码：

```
Public Class Form1
    Dim excelApp As New Excel.Application
    Dim excelWorkbook As Excel.Workbook
    Dim excelWorkSheet As Excel.Worksheet

    Private Sub Button4_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button4.Click
        excelWorkbook = excelApp.Workbooks.Open("D:/excelSheets/some_excel.xls")
        excelApp.Visible = True

        excelWorkSheet = excelWorkbook.Sheets("SheetName")

        With excelWorkSheet
            .Range("B7").Value = "Value"
        End With

        Dim trd = New Thread(Sub() Me.SendInputs("ValueForInputBox"))
        trd.IsBackground = True
        trd.Start()

        excelApp.Run("macroName")
        trd.Join()
        releaseObject(trd)

        excelApp.Quit()
        releaseObject(excelApp)
        releaseObject(excelWorkbook)
    End Sub
    Private Sub releaseObject(ByVal obj As Object)
       Try
           System.Runtime.InteropServices.Marshal.ReleaseComObject(obj)
           obj = Nothing
       Catch ex As Exception
           obj = Nothing
       Finally
           GC.Collect()
       End Try
    End Sub
    Private Sub SendInputs(ByVal noOfIds As String)
        Thread.Sleep(100)
        SendKeys.SendWait(noOfIds)
        SendKeys.SendWait("{ENTER}")
        SendKeys.SendWait("{ENTER}")
    End Sub 
```

# ios - 如何在“parentViewController”中呈现模态视图？

> ID：15922304
> 
> 赞同：0
> 
> 时间：2013-04-10T09:42:21.827
> 
> 标签：ios, showmodaldialog

我正在尝试编写 iPad 应用程序。

我有**masterView**和**detailView**（我的手工 splitView）`UIViewController`的**parentViewController**（全屏）。此外，我还有一个带有类和 xib 的单独视图（例如**moreDetailView**），我想将其显示为模态。

 ********masterView**有`UITableView`，**detailView**有`UICollectionView`. 他们都有自己的课程和xib。在**detailView**中有几个项目。

在我的**didSelectItemAtIndexPath:** of **detailView**我想显示**moreDetailView**。

那么，我该怎么做呢？以及如何在**parentViewController**中显示它，而**不是**在**detailView**中。

希望我的问题可以理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:15:34.150

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    UIViewController *moreDetailViewController = [[MoreDetailViewController alloc] init];
    [moreDetailViewController setModalPresentationStyle:UIModalPresentationFormSheet]; //or style depending on what you want
    [moreDetailViewController setModalTransitionStyle:UIModalTransitionStyleCoverVertical];

    [self presentViewController:moreDetailViewController animated:YES completion:^{
        //stuff you want to do after the viewController has been presented
    }];
}
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:48:45.650

您正在初始化您的`masterview`和`detailview`在`parentview`. 要访问，`parentcontroller`您可以将属性声明`detailcontroller`为

```
UIViewController *parent; 
```

在初始化时你可以做

```
detailController.parent=self; 
```

在显示模态时你可以做

```
[parent presentModal]; //instead of [self presentModal]; 
```

我希望以上内容对您有用，但您需要更正语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:59:37.487

下面的代码将在 splitView 顶部的模态表单中显示您的控制器（您可以使用 setModalPresentationStyle 进行更改）。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    UIViewController *moreDetailViewController = [[MoreDetailViewController alloc] init];
    [moreDetailViewController setModalPresentationStyle:UIModalPresentationFormSheet]; //or style depending on what you want
    [moreDetailViewController setModalTransitionStyle:UIModalTransitionStyleCoverVertical];

    [self presentViewController:moreDetailViewController animated:YES completion:^{
        //stuff you want to do after the viewController has been presented
    }]; } 
```******

# ios - 如何将数据从 tableview 传递到另一个 tableview 单元格？

> ID：15922307
> 
> 赞同：0
> 
> 时间：2013-04-10T09:42:30.060
> 
> 标签：ios, uitableview

我正在使用静态`UITableView`来显示客户的个人资料。

它具有 SelectCountryCell 来选择国家，单击该国家时，将打开新`UITableView`的国家列表。

当我从 Country TableView 中选择国家时，它应该显示在以前的 TableView 的 SelectCountryCell 中。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:57:13.030

**主视图控制器.h**

```
#import "DetailViewController.h"

@interface MasterViewController : UITableViewController <DetailProtocol> // Note this.

@property (strong, nonatomic) DetailViewController *detailViewController;
@property (strong, nonatomic, readwrite) NSString *selectedCountry;

@end 
```

**主视图控制器.m**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (!self.detailViewController) {
        self.detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
    }
    self.detailViewController.delegate = self; // THIS IS IMPORTANT...
    [self.navigationController pushViewController:self.detailViewController animated:YES];
}

// Note this -- It's a delegate method implementation
- (void)setCountry:(NSString *)country
{
    self.selectedCountry = country;
} 
```

**DetailViewController.h**

```
@protocol DetailProtocol <NSObject>
-(void)setCountry:(NSString *)country;
@end

@interface DetailViewController : UIViewController

@property (strong, nonatomic) IBOutlet UITableView *tableView;
@property (unsafe_unretained) id <DetailProtocol> delegate; // Note this

@end 
```

**细节视图控制器.m**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self.tableView deselectRowAtIndexPath:indexPath animated:YES];
    [self.delegate setCountry:[countries objectAtIndex:indexPath.row]]; // Note this
    [self.navigationController popViewControllerAnimated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:58:42.443

您应该将静态单元绑定到您的插座，`UITableViewController`并将配置文件同步方法放入该`- viewWillAppear`方法。

当用户更改国家/地区列表中的国家/地区时，配置文件会更新。之后，当用户移回`UITableViewController`具有静态内容的实例时，配置文件数据将自动更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:58:45.427

您可以在 CityTableView 中定义一个委托，然后在此委托中定义一个方法。

您应该在 CountryTableView 中实现此方法。

然后你可能会得到你想要的。

我只给你一个想法。你应该自己找到细节。

# php - 使用 2 个表获取不同名称的总值

> ID：15922309
> 
> 赞同：-4
> 
> 时间：2013-04-10T09:42:32.250
> 
> 标签：php, mysql

我通过比较需要结果的 2 个表给出了 2 个表。结果表在最后一个表中给出。表一

```
|-----|---------------|---------------------|
| id  | name          |         pid         |
|-----|---------------|---------------------|
| 1   |  ram          |         EW2         |
| 2   |  rani         |         EW1         |
| 3   |  ram          |         EW3         |
| 4   |  rani         |         EW4         |
| 6   |  ram          |         EW5         |
|-------------------------------------------| 
```

表b

```
|-----|---------------|-------|--------------|
| id  | name          |  pid  |  price       |
|-----|---------------|-------|--------------|
| 1   |  soap         |  EW1  |   2000       |
| 2   |  towel        |  EW2  |   1333       |
| 3   |  bed          |  EW3  |   3000       |
| 4   |  facewash     |  EW4  |    250       |
| 5   |  T.soap       |  EW5  |    300       |
|--------------------------------------------| 
```

我需要使用 php mysql 下表给出的结果

```
|-----------------|-----------|---------------------|
| no of products  | name      |  total_ price       |
|-----------------|-----------|---------------------|
|       3         |  ram      |          4833       |
|       2         |  rani     |          2250       |
|---------------------------------------------------| 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:46:35.357

```
SELECT COUNT(b.id), a.name, SUM(b.price)
FROM a LEFT JOIN b ON a.pid=b.pid
GROUP BY a.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:52:10.003

```
$query = " SELECT count(tableA.name) ,tableA.name,sum(tableB.price)
           FROM tableA
           INNER JOIN tableB 
              ON tableA.pid=tableB.pid
           GROUP BY tableA.name " 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:52:30.597

SELECT COUNT(a.id) AS NO_OF_PRODUCTS, a.name AS NAME, SUM(b.price) AS TOTAL_PRICE FROM a LEFT JOIN b ON b.pid=a.pid GROUP BY a.name

# maven - 如何实现 Web 服务的持续部署

> ID：15922311
> 
> 赞同：5
> 
> 时间：2013-04-10T09:42:42.683
> 
> 标签：maven, amazon-web-services, amazon-ec2, maven-3, continuous-deployment

我有一个 Java 应用程序，它在 Web 容器（目前是 Jetty）中运行并通过 Web 服务响应请求。

现在我想创建一种机制，允许尽可能轻松地将应用程序的新版本部署（将 WAR 文件传输到服务器，在那里安装新版本）到 Amazon EC2 实例（理想情况下 - 通过运行一些 Maven 命令） .

我使用[Beanstalk](http://beanstalkapp.com/)进行版本控制，它们提供部署支持，但我不知道如何将它应用到我的场景中。

是否有关于如何使用 Maven（有或没有 Beanstalk）将 Web 应用程序部署到 Amazon EC2 的教程？

**更新 1 (10.04.2013)：** Beanstalk 工作人员建议我使用[SSH 部署](http://support.beanstalkapp.com/customer/portal/articles/361135-how-do-i-setup-ssh-deployments-)。

**更新 2 (11.04.2013 23:17 MSK):**

在我第一次尝试使用 Maven Cargo 插件时，我添加了以下内容到我的`pom.xml`：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    [...]
    <build>
    [...]    
            <plugin>
                <groupId>org.codehaus.cargo</groupId>
                <artifactId>cargo-maven2-plugin</artifactId>
                <configuration>
                    <container>
                        <containerId>Heaven7</containerId>
                        <type>remote</type>
                    </container>
                    <configuration>
                        <type>runtime</type>
                        <properties>
                            <cargo.remote.username>myusername</cargo.remote.username>
                            <cargo.remote.password>mypassword</cargo.remote.password>
                        </properties>
                    </configuration>

                    <!-- Deployer configuration -->
                    <deployer>
                        <type>remote</type>
                    </deployer>

                    <deployables>
                        <deployable>
                            <groupId>ru.mycompany</groupId>
                            <artifactId>my-product</artifactId>
                            <type>war</type>
                        </deployable>
                    </deployables>
                </configuration>
            </plugin>
        </plugins>
    </build>
    [...]
</project> 
```

然后我跑了`mvn cargo:deploy`，得到以下输出：

```
[ERROR] Failed to execute goal org.codehaus.cargo:cargo-maven2-plugin:1.3.3:dep
oy (default-cli) on project [...]: Execution default-cli of goal org.codeh
us.cargo:cargo-maven2-plugin:1.3.3:deploy failed: Cannot create configuration.
here's no registered configuration for the parameters (container [id = [Heaven7
, type = [remote]], configuration type [runtime]). Actually there are no valid
ypes registered for this configuration. Maybe you've made a mistake spelling it 
```

2个问题：

1.  我该如何解决？
2.  我在哪里可以指定我的 Tomcat 容器的地址？

**更新 3（12.04.2013 22:36 MSK）：**

我更改了与 Cargo 插件相关的部分，如下所示：

```
 <plugin>
        <groupId>org.codehaus.cargo</groupId>
        <artifactId>cargo-maven2-plugin</artifactId>
        <version>1.3.3</version>
        <configuration>
            <container>
                <containerId>tomcat7</containerId>
                <type>remote</type>
            </container>
            <configuration>
                <type>runtime</type>
                <properties>
                    <cargo.remote.username>myuser</cargo.remote.username>
                    <cargo.remote.password>mypassword</cargo.remote.password>
                    <cargo.hostname>ec2-NN-NNN-NN-NN.compute-1.amazonaws.com</cargo.hostname>
                    <cargo.protocol>http</cargo.protocol>
                    <cargo.servlet.port>8080</cargo.servlet.port>
                </properties>
            </configuration>

            <!-- Deployer configuration -->
            <deployer>
                <type>remote</type>
            </deployer>
            <deployables>
                <deployable>
                    <groupId>ru.mycompany</groupId>
                    <artifactId>myproduct</artifactId>
                    <type>war</type>
                </deployable>
            </deployables>

        </configuration>
    </plugin>
</plugins> 
```

然后我执行`mvn cargo:deploy`并得到了这个输出：

```
[ERROR] Failed to execute goal org.codehaus.cargo:cargo-maven2-plugin:1.3.3:depl
oyer-deploy (default-cli) on project ccp-server: Execution default-cli of goal o
rg.codehaus.cargo:cargo-maven2-plugin:1.3.3:deployer-deploy failed: Cannot creat
e configuration. There's no registered configuration for the parameters (contain
er [id = [tomcat7], type = [remote]], configuration type [runtime]). Actually th
ere are no valid types registered for this configuration. Maybe you've made a mi
stake spelling it? -> [Help 1] 
```

**更新 4 (12.04.2013 23:12):**

我`pom.xml`再次更改为：

```
<plugin>
    <groupId>org.codehaus.cargo</groupId>
    <artifactId>cargo-maven2-plugin</artifactId>
    <version>1.3.3</version>
    <configuration>
        <container>
            <containerId>tomcat7x</containerId>
            <type>remote</type>
        </container>
        <configuration>
            <type>runtime</type>
            <properties>
                <cargo.remote.username>myuser</cargo.remote.username>
                <cargo.remote.password>mypassword</cargo.remote.password>
                <cargo.hostname>ec2-NN-NNN-NN-NN.compute-1.amazonaws.com</cargo.hostname>
                <cargo.protocol>http</cargo.protocol>
                <cargo.servlet.port>8080</cargo.servlet.port>
            </properties>
        </configuration>

        <!-- Deployer configuration -->
        <deployer>
            <type>remote</type>
        </deployer>
        <deployables>
            <deployable>
                <groupId>ru.mycompany</groupId>
                <artifactId>myproduct</artifactId>
                <type>war</type>
            </deployable>
        </deployables>

    </configuration>
</plugin> 
```

然后，我使用以下命令将我的应用程序部署到服务器：

1.  `mvn clean`
2.  `mvn install`
3.  `mvn cargo:deploy`

请注意，`<packaging>`必须设置为`war`才能使此序列起作用（否则您可能会收到奇怪的错误消息）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:55:30.103

您可以使用[cargo maven 插件](http://cargo.codehaus.org/Maven2+plugin)在远程服务器上部署。有关 Tomcat 服务器上的远程部署，请参阅此示例：[Maven：如何将我的 WAR 文件部署到远程 Tomcat 服务器？](https://stackoverflow.com/questions/8422802/maven-how-do-i-deploy-my-war-file-to-a-remote-tomcat-server)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:58:11.933

如果我错了，请纠正我。我了解到您正在使用`Tomcat version 7`. 的`Cargo`配置`Tomcat 7`应如下所示： -

```
<plugin>
    <groupId>org.codehaus.cargo</groupId>
    <artifactId>cargo-maven2-plugin</artifactId>
    <version>1.3.3</version>
    <configuration>
        <container>
            <containerId>tomcat7x</containerId>
            <type>remote</type>
        </container>
        <configuration>
            <type>runtime</type>
            <properties>
                <cargo.remote.username>myusername</cargo.remote.username>
                <cargo.remote.password>mypassword</cargo.remote.password>
                <cargo.hostname>MY_HOST</cargo.hostname>
                <cargo.protocol>http</cargo.protocol>
                <cargo.servlet.port>SERVER_PORT</cargo.servlet.port>
            </properties>
        </configuration>
        <!-- Deployer configuration -->
        <deployer>
            <type>remote</type>
            <deployables>
                <deployable>
                    <groupId>ru.mycompany</groupId>
                    <artifactId>my-product</artifactId>
                    <type>war</type>
                    <properties>
                        <context>MY_CONTEXT</context>
                    </properties>
                </deployable>
            </deployables>
        </deployer>
    </configuration>
</plugin> 
```

请注意

1.  **`<cargo.hostname>`**是远程主机名或 IP 地址。
2.  **`<cargo.protocol>`**要么`http`要么`https`。
3.  **`<cargo.servlet.port>`**是`remote port`基于 的`<cargo.protocol>`，例如 8080 或 8443
4.  **`<context>`**是`context name`部署 Web 应用程序时使用的。

请参阅[Cargo：Tomcat 7.x](http://cargo.codehaus.org/Tomcat+7.x)和[Maven2 插件参考指南](http://cargo.codehaus.org/Maven2+Plugin+Reference+Guide)了解更多信息。

我希望这可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-16T15:12:46.847

正如 Charlee 和 Dmitri 早些时候回答的那样，cargo 插件通常是最简单的方法。在这样做的同时，您可能还会考虑实际创建 EC2 实例的方式（如在许多场景中，开发/测试实例和生产实例），您希望始终创建新实例（请参阅 Martin Fowler 对此的想法[http:// /martinfowler.com/bliki/PhoenixServer.html](http://martinfowler.com/bliki/PhoenixServer.html)和[http://martinfowler.com/bliki/SnowflakeServer.html](http://martinfowler.com/bliki/SnowflakeServer.html)。

Ravello Systems 提供了一个有趣的解决方案，它基本上可以让您轻松地在云中创建应用程序的完整副本，他们甚至实现了一个 maven 插件来帮助实现自动化。看看[http://www.ravellosystems.com/blog/ravello_maven_plugin/](http://www.ravellosystems.com/blog/ravello_maven_plugin/) - 你可以将整个过程与 maven 端到端地联系在一起 - 从创建环境到部署应用程序，测试它，然后拆除它.

# java - 奇怪的黑莓日志

> ID：15922312
> 
> 赞同：1
> 
> 时间：2013-04-10T09:42:44.997
> 
> 标签：java, logging, blackberry, push-notification

我正在使用下面的代码，作为我的推送通知实现的一部分：

```
private static final String BPAS_URL = "http://pushapi.eval.blackberry.com";
private static final String APP_ID = "3582-M4687r9k9k836r980kO2395i32i66y11a34";

String registerUrl = formRegisterRequest(BPAS_URL, APP_ID, null) + ";deviceside=false;ConnectionType=mds-public";

System.out.println("\n\n\n !!msg registerBPAS URL is:  "+ registerUrl + "\n\n"); 
```

在哪里 ：

```
private static String formRegisterRequest(String bpasUrl, String appId, String token) {
    StringBuffer sb = new StringBuffer(bpasUrl);
    sb.append("/mss/PD_subReg?");
    sb.append("serviceid=").append(appId);
    sb.append("&osversion=").append(DeviceInfo.getSoftwareVersion());
    sb.append("&model=").append(DeviceInfo.getDeviceName());
    if (token != null && token.length() > 0) {
        sb.append("&").append(token);
    }
    return sb.toString();
} 
```

我打印的是这个：

```
!!msg registerBPAS URL is:  http://pushapi.eval.blackberry.com/mss/PD_subReg?serviceid=3582-M4687r9[0.0] k9k836r980kO2395i32i66y11a34&osversion=5.0.0.669&model=9520;deviceside=false;ConnectionType=mds-publ[0.0] ic 
```

我不明白为什么。为什么`spaces " "`在 URL 中有，为什么有`"[0.0]"`

从上面的代码我无法解释这种行为。

我期望打印的是这样的：

```
!!msg registerBPAS URL is:  http://pushapi.eval.blackberry.com/mss/PD_subReg?serviceid=3582-M4687r9k9k836r980kO2395i32i66y11a34&osversion=5.0.0.669&model=9520;deviceside=false;ConnectionType=mds-public 
```

*如果这有任何帮助，我没有启用 BIS，但我认为这并不重要，因为我在本地形成 URL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T21:05:51.897

您所看到的只是`[0.0]`日志中几个地方的额外内容。

**这很正常……您的网址很好。**

打电话

```
System.out.println(""); 
```

不会为您提供*独占*或*原子*访问`stdout`. 换句话说，当日志打印出您传递给的字符串时`println()`，您还可以将这些令牌打印到日志中，以及来自 BlackBerry OS 的其他消息，它们可能/将被放置在日志输出的中间.

这很烦人，但您的代码没有任何问题。

如果您想要其他选项，请查看 BlackBerry [EventLogger API](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/system/EventLogger.html)，它会写入日志，您可以[从设备](https://stackoverflow.com/a/6440409/119114)中取出，并搜索您的消息，而不会烦人`[0.0]`。

# linux - Linux shell kill 命令同时基于输出运行

> ID：15922315
> 
> 赞同：1
> 
> 时间：2013-04-10T09:42:53.360
> 
> 标签：linux, parsing, shell, output, terminate

我在 Code::Blocks 中有一组 C++ 项目和一个构建所有这些项目的脚本。该脚本如下所示：

```
codeblocks --build --target="release32" project1.cbp
codeblocks --build --target="release32" project2.cbp
codeblocks --build --target="release32" project3.cbp
... 
```

有时在构建其中一个项目时，Code::Blocks 无法完成该过程并出现错误：`*** glibc detected *** codeblocks: corrupted double-linked list`。这与构建失败无关，这只是代码块中的一个错误，请参见此处： [https](https://bugs.launchpad.net/ubuntu/+source/codeblocks/+bug/764728) ://bugs.launchpad.net/ubuntu/+source/codeblocks/+bug/764728 或此处： [http:// forums.codeblocks.org/index.php?topic=16883.0](http://forums.codeblocks.org/index.php?topic=16883.0)

我想要做的解决方法是在命令仍在运行时解析命令的输出，找到字符串“codeblocks：损坏的双链表”，然后终止代码块以让脚本构建其他项目并完成。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:18:06.710

有点hacky，但这对你有用吗（`bash`）？

这只是为了模拟代码块二进制（`./codeblocks`）：

```
$ cat codeblocks
#!/bin/bash

num=$RANDOM
((num %= 2))

case "$num" in
        0)
                echo "codeblocks finished successfully: $*"
                exit 0
                ;;
        1)
                echo "*** glibc detected *** codeblocks: corrupted double-linked list" 1>&2
                while true; do
                        sleep 1
                done
                ;;
esac 
```

这是实际的测试脚本 ( `test.sh`)：

```
$ cat test.sh
#!/bin/bash

run_codeblocks()
{
        until (
                subshell_pid=$BASHPID
                echo "trying to run 'codeblocks $*'"
                ./codeblocks "$@" 2>&1 | while read line; do
                        echo "[${line}]"
                        [[ ${line} == *"*** glibc detected ***"* ]] && kill $subshell_pid
                done
                return 0
        ); do
                :
        done
}

echo "running codeblocks ..."
run_codeblocks 1
run_codeblocks 2
run_codeblocks 3
echo "... done" 
```

你将调用包装`codeblocks`在一个子shell中，grep它的输出，如果一行与你所说的错误匹配，就会杀死子shell。基本上和你描述的完全一样。

```
$ ./test.sh
running codeblocks ...
trying to run 'codeblocks 1'
[codeblocks finished successfully: 1]
trying to run 'codeblocks 2'
[*** glibc detected *** codeblocks: corrupted double-linked list]
./test.sh: line 4: 29889 Terminated              ( subshell_pid=$BASHPID; echo "trying to run 'codeblocks $*'"; ./codeblocks "$@" 2>&1 | while read line; do
    echo "[${line}]"; [[ ${line} == *"*** glibc detected ***"* ]] && kill $subshell_pid; return 0;
done )
trying to run 'codeblocks 2'
[*** glibc detected *** codeblocks: corrupted double-linked list]
./test.sh: line 4: 29892 Terminated              ( subshell_pid=$BASHPID; echo "trying to run 'codeblocks $*'"; ./codeblocks "$@" 2>&1 | while read line; do
    echo "[${line}]"; [[ ${line} == *"*** glibc detected ***"* ]] && kill $subshell_pid; return 0;
done )
trying to run 'codeblocks 2'
[codeblocks finished successfully: 2]
trying to run 'codeblocks 3'
[*** glibc detected *** codeblocks: corrupted double-linked list]
./test.sh: line 4: 29903 Terminated              ( subshell_pid=$BASHPID; echo "trying to run 'codeblocks $*'"; ./codeblocks "$@" 2>&1 | while read line; do
    echo "[${line}]"; [[ ${line} == *"*** glibc detected ***"* ]] && kill $subshell_pid; return 0;
done )
trying to run 'codeblocks 3'
[codeblocks finished successfully: 3]
... done 
```

# excel - 尝试传递数组时应用程序定义或对象定义错误

> ID：15922316
> 
> 赞同：0
> 
> 时间：2013-04-10T09:42:55.883
> 
> 标签：excel, pivot-table, vba

我正在尝试将数组传递给数据透视表字段，但这样做时 excel 会引发运行时错误：1004 错误“应用程序定义或对象定义错误”。下面是我用 VBA 编写的一段代码：

```
Sub ARRAYER()
    Dim i As Double
    Dim ALM(8) As String

    Sheet15.PivotTables("significance_pivot2").PivotFields("Pagename"). _
    ClearAllFilters
    For i = 1 To 8
        ALM(i) = CStr(Sheet4.Range("F" + CStr(i + 2) + "").Text)
    Next

    For i = 1 To 8
        Sheet4.Range("AA" & i).Value = ALM(i)
    Next i

    Sheet15.PivotTables("significance_pivot2").PivotFields("Pagename").VisibleItemsList = Array(ALM)-- It trows an error here!!!

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:27:26.510

也许尝试这样的替代方案：

```
Sub ARRAYER()
Dim i As Double
Dim ALM() As String '  dimensioned automatically by VBA on assignment from Range

Sheet15.PivotTables("significance_pivot2").PivotFields("Pagename"). _
ClearAllFilters

ALM = CStr(Sheet4.Range("F3:F11".value)

' maybe just copy the source data directly?
range("F3:F11").copy destination:= range("AA3")

Sheet15.PivotTables("significance_pivot2").PivotFields("Pagename").VisibleItemsList = Array(ALM())-- Changed to add brackets

End Sub 
```

# javascript - 获取表单中名称属性的值

> ID：15922319
> 
> 赞同：-1
> 
> 时间：2013-04-10T09:43:07.090
> 
> 标签：javascript

我试图在我的 html 表单中获取 name 属性的值。我试过了：

```
$('input[name=username]').val(); 
```

但这不起作用。

希望可以有人帮帮我。

**编辑：**

抱歉，我不是很清楚，但我想获取表单的输入值。当我尝试：

```
GM_setValue ("username", $('input[name=username]').val() ); 
```

并在填写表单后检查 about:config 用户名的值为空

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:45:25.737

您所做的将使您获得`input`with的价值`name=username`。如果您想获得值“用户名”（不知道为什么，但我认为这是您所要求的），那么您可以这样做：

```
var nameValue = $('input[name=username]').attr("name"); 
```

* * *

假设以下 HTML：

```
<input name="username" value="my value" /> 
```

您的原始方法将返回结果`"my value"`，我的方法将返回结果`"username"`。如果我误解了您的要求，请让我知道您要做什么，因为您已经拥有的应该可以正常工作。

[这是两者都在起作用的示例](http://jsfiddle.net/aHFE9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:59:46.497

您可以使用它来获取名称

```
$("#id").attr("name"); 
```

# javascript - 带有动态ID和名称的javascript复选框onchange

> ID：15922322
> 
> 赞同：0
> 
> 时间：2013-04-10T09:43:21.027
> 
> 标签：javascript, jquery, checkbox, onchange

我有一个表，它动态地将行插入到表中，每一行都有一个计数器附加到它上面来创建唯一的 ID。

每行包含一个名为“处理”、“处理1”、“处理2”等的复选框。

我想要这些复选框，当检查以调用另一个功能时。为简单起见，它只是一个警报。

我的 javascript/jquery 语法是：

```
 $('input[name^="treated"]').change(function() {
       alert('test');
    }); 
```

我的 HTML 是：

```
<td valign=top><input type="checkbox"  id="treated' + counter + '" name="treated' + counter + '" /></td> 
```

其中 counter 是一个 javascript 增量数字

目前未显示警报。是`nput[name^="treated"]`正确的吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:44:47.363

对动态插入的元素使用`on`委托事件

```
 $(document).on('change','input[name^="treated"]',function() {
   alert('test');
}); 
```

最好将它委托给文档中最近的静态元素（tableID）而不是文档本身。[链接](http://jq4you.blogspot.com/2013/02/jquery-direct-and-delegate-on-event.html)以阅读有关事件的更多信息

# python-3.x - tkinter 文本框调整大小而不是将文本换行以填充框

> ID：15922329
> 
> 赞同：2
> 
> 时间：2013-04-10T09:43:34.933
> 
> 标签：python-3.x, tkinter

```
def red(): 
    frame3.output_display.config(fg = 'red', font=root.customFont1)
def blue():
    frame3.output_display.config(fg = 'darkblue', font=root.customFont2)
def green():
    frame3.output_display.config(fg = 'darkgreen',font=root.customFont3)
def black():
    frame3.output_display.config(fg = 'black',font=root.customFont4)

from tkinter import *
from tkinter import ttk
import tkinter.font
from tkinter.scrolledtext import ScrolledText

root = Tk()
root.title("Change Text")
root.geometry('700x500')
# change font size and family: not used currently because of resizing issue
root.customFont1 = tkinter.font.Font(family="Handwriting-Dakota", size=12)
root.customFont2 = tkinter.font.Font(family="Comic sans MS", size=14)
root.customFont3 = tkinter.font.Font(family="Script MT", size=16)
root.customFont4 = tkinter.font.Font(family="Courier", size=10)

# FRAME 3
frame3 = LabelFrame(root,  background = '#EBFFFF', borderwidth = 2, text = 'text entry and display frame', fg = 'purple',bd = 2, relief = FLAT, width = 75, height = 40)
frame3.grid(column = 2, row = 0, columnspan = 3, rowspan = 6, sticky = N+S+E+W) 
#frame3.grid_rowconfigure(0, weight=0)
#frame3.grid_columnconfigure(0, weight=0)
frame3.grid_propagate(True)

frame3.output_display = ScrolledText(frame3, wrap = WORD)
frame3.output_display.pack( side = TOP, fill = BOTH, expand = True )
frame3.output_display.insert('1.0', 'the text should appear here and should wrap at character forty five', END)
#frame3.output_display.config(state=DISABLED) # could be used to prevent modification to text (but also prevents load new file)

# draws all of the buttons,
ttk.Style().configure("TButton", padding=6, relief="flat",background="#A52A2A", foreground='#660066')
names_colour=(('Red',red),('Blue',blue),('Green',green),('Black',black))
root.button=[]

for i,(name, colour) in enumerate(names_colour):
    root.button.append(ttk.Button(root, text=name, command = colour))
    row,col=divmod(i,4)
    root.button[i].grid(sticky=N+S+E+W, row=6, column=col, padx=1, pady=1)

root.mainloop() 
```

在 GUI 中，当文本字体和字体大小发生变化时，文本框会调整大小并隐藏按钮。在我的天真中，我认为文本框将保持相同的大小，并且文本将简单地包裹在文本框的约束内。至少 taht 是我想要达到的目标。显然字体大小或文本框中有一些概念，我不明白的 tkinter 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:10:20.087

文本小部件的宽度以字符宽度而不是像素为单位定义，它尽可能使用其配置的宽度作为其最小宽度。对于较宽的字体，小部件将更宽，而对于窄字体，小部件将更窄。因此，如果你给它一个宽字体，它会尝试让自己变宽以保持 X 个字符宽。

那么，你如何解决这个问题？

一种解决方案是将宽度和高度设置为较小的值。例如，如果您将宽度和高度设置为 1（一），则小部件只会尝试强制自己为一个字符的宽度和高度。除非您使用绝对巨大的字体，否则您几乎看不到小部件在放大字体时会变大。

然后，您将需要依赖包、网格或放置算法将小部件拉伸到所需的尺寸。如果您使用网格，这通常意味着您需要确保正确设置列和行的权重，以及设置粘性属性。

这样做的缺点是*您*必须确保您的 GUI 具有正确的大小，而不是依赖于它只是根据每个小部件的首选大小神奇地发生。

作为一个快速破解，您可以通过在创建小部件后添加这些行来在程序中看到这一点：

```
frame3.output_display.configure(width=1, height=1)
root.grid_rowconfigure(0, weight=1)
root.grid_columnconfigure(2, weight=1) 
```

当我使用上述附加行运行您的代码时，文本小部件保持固定大小，并且文本使用每种字体在不同的位置换行。

# wpf - 如果设置了 Tag 属性，如何应用资源字典中的样式

> ID：15922330
> 
> 赞同：0
> 
> 时间：2013-04-10T09:43:39.387
> 
> 标签：wpf, xaml, triggers, styles

我在资源字典中有一种风格

```
<Style x:Key="heading" TargetType="Label">
    <Setter Property="FontSize" Value="26" />
</Style> 
```

我希望分配它来控制是否满足某些触发条件。例如

```
<Style TargetType="Label">
    <Style.Triggers>

        <Trigger Property="Tag" Value="header" >
            <Setter Property="FontSize" Value="26" />
        </Trigger>

    </Style.Triggers>
</Style> 
```

工作正常

```
<Style TargetType="Label">
    <Style.Triggers>

        <Trigger Property="Tag" Value="header" >
            <Setter Property="Style" Value="{StaticResource heading}" />
        </Trigger>

    </Style.Triggers>
</Style> 
```

给出一个错误，即 Style 触发器无法更改关联目标的 Style 属性，这很有意义，但有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:31:13.533

诀窍是将触发器放入资源字典而不是 Style 中

```
<Style TargetType="Label">
    <Style.Triggers>
        <StaticResource ResourceKey="headerTrigger"/>
    </Style.Triggers>
</Style> 
```

并像这样在资源字典中定义触发器

```
<Trigger x:Key="headerTrigger" Property="Label.Tag" Value="header" >
    <Setter Property="Label.FontWeight" Value="Bold"/>
    <Setter Property="Label.BorderBrush" Value="Red"/>
    <Setter Property="Label.BorderThickness" Value="2"/>
</Trigger> 
```

# javascript - jquery click inside a click会导致很多递归错误

> ID：15922339
> 
> 赞同：2
> 
> 时间：2013-04-10T09:44:00.410
> 
> 标签：javascript, jquery, html

如标题中所述，我的 JS 存在一些问题。

**js：**

```
$("#bg2InsideFb").click(function () {
       $("#fbLink").click();
    }); 
```

**html:**

```
<div id="bg2InsideFb">
    <p id="fbIcon">
        <img src="@routes.Assets.at("images/mobile/login/fblogin-ico.png")" alt="Facebook"/>
    </p>
    <p class="pl20">
        <a id="fbLink" href="@fb.authenticationUrl"> @Messages("review.form.facebook.login") </a>
    </p>
 </div>
 <p class="floatleft f13">
    @Messages("review.form.facebook.term")
 </p> 
```

这导致 Chrome 崩溃，Firefox 抛出太多递归错误。发生了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T09:49:29.310

您正在以编程方式单击`#fbLink`哪个是`#bg2InsideFb`. 事件冒泡导致相同的点击影响后面的元素，然后触发另一次点击。为了防止这种情况，您需要将侦听器连接到内部元素，以防止像这样传播：

```
$('#fbLink').click(function(jqEvt) {
    jqEvt.stopPropagation();
} 
```

请参阅[event.stopPropagation 上的 jQuery API](http://api.jquery.com/event.stopPropagation/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T06:35:44.957

好的，我这样做是因为传播解决方案对我不起作用。

```
 $(function () {
        $("#bg2InsideFb, #bg2InsideG").click(function () {
            var tmpLink = $(this).find("a").attr("href");
            window.location.href = tmpLink;
        });
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T09:51:35.723

我假设您想触发#fbLink。在这种情况下，您必须使用

```
$('#fbLink').click(function(ev) { 
    ev.stopPropagation();  
});
$('#fbLink').triggerHandler('click');`` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T09:52:59.980

当你打电话给它时`$("#fbLink").click();`，它实际上也在打电话给它的父母。这就是它导致递归错误的原因。你能解释一下你想做什么吗？

```
$("#bg2InsideFb").click(function () {
   $("#fbLink").click(function(){
      return false;
   });
}); 
```

它可能有效。

# mysql - MySQL - 查询日期以上和以下的记录

> ID：15922340
> 
> 赞同：2
> 
> 时间：2013-04-10T09:44:00.503
> 
> 标签：mysql, sql, date, datetime, select

在我的 MySQL 数据库中，我有插入日期的记录（作为类型列之一`datetime`）。
除了一些`where`子句约束之外，我还想选择给定日期以上的所有记录（从给定日期到现在），并且恰好选择一个最接近给定日期的记录。
任何想法如何以有效的方式使用 MySQL 来实现这一点？
我考虑过使用计数和排名，但我认为它可能非常低效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:13:39.333

也许是这样的？

```
(SELECT * FROM mytable WHERE mydate >= xxx)
UNION
(SELECT * FROM mytable WHERE mydate < xxx ORDER BY mydate DESC LIMIT 1) 
```

# c - CCS C编译器,命令行指令

> ID：15922342
> 
> 赞同：-1
> 
> 时间：2013-04-10T09:44:09.377
> 
> 标签：c, compiler-construction, embedded

这里的任何人都可以请说从编译行编译和运行C文件的命令是什么。喜欢

```
GCC -o op_filename ipfilename.c  in gcc compiler. 
```

同理，CCSC 有什么具体的命令吗？我在常规 c 上工作，但对嵌入式 C 真的很陌生。所以请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:14:29.743

比较明显的建议可能是阅读手册！？

对于[dsPIC/PIC24](http://www.ccsinfo.com/downloads/PCDReferenceManual.pdf)。对于[具有 12、14 或 16 位操作码交互集的 PIC](http://www.ccsinfo.com/downloads/ccs_c_manual.pdf)。

在这两种情况下，“调用命令行编译器”部分都直接解决了您的问题。

如您所见，您需要更具体地了解您使用的编译器，特别是因为“CCS”也可能指代[Code Composer Studio](http://www.ti.com/tool/ccstudio)而不是[CCS Inc](http://www.ccsinfo.com/)。您还应该指定您正在使用的编译器版本以获得准确的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:29:11.847

最好的建议是阅读手册。在那里它会被清楚地解释。

在命令行中转到编译器位置，例如 Texas Instruments\ccsv4\tools\compiler\tms470\bin。tms470 的编译器是 cl470.exe 。

例如，如果要编译名为 symtab.c 和 file.c 的两个文件，汇编第三个名为 seek.asm 的文件，并链接以创建名为 myprogram.out 的可执行程序，则将输入：cl470 symtab.c 文件。 c seek.asm --run_linker --library=lnk.cmd --library=rts16.lib --output_file=myprogram.out

# javascript - 如果 src 为空，则隐藏图像

> ID：15922344
> 
> 赞同：5
> 
> 时间：2013-04-10T09:44:12.293
> 
> 标签：javascript, jquery, image, hide

`<img>`如果源为空，我试图隐藏。但我没有运气。

我在这里找到了一些帖子，但它对我不起作用。

这是我的代码，它是基于表格的，因为它将是一个模板：图像：

```
<td width="92%" align="center" class="imagenes_desc">
        <a href="#" class="showcase"><img class="imagen" src="http://webs.ono.com/norfolk/ebay/images/01.jpg" width="800"></a>
        <a href="#" class="showcase"><img class="imagen" src="" width="800"></a>
        <a href="#" class="showcase"><img class="imagen" src="" width="800"></a>
        <a href="#" class="showcase"><img class="imagen" src="" width="800"></a>
        <a href="#" class="showcase"><img class="imagen" src="" width="800"></a>
        <a href="#" class="showcase"><img class="imagen" src="" width="800"></a>
        <a href="#" class="showcase"><img class="imagen" src="" width="800"></a>
        <a href="#" class="showcase"><img class="imagen" src="" width="800"></a>
        <a href="#" class="showcase"><img class="imagen" src="" width="800"></a>
        <a href="#" class="showcase"><img class="imagen" src="" width="800"></a>
        </td> 
```

这是我正在尝试实现的 Javascript。

```
<script type="text/javascript">
        $(document).ready(function(){
            if ($(".imagen").attr(src="") == "") {
                $(".imagen").hide();
            }
            else {
                $(".imagen").show();
            }
</script> 
```

我对 JS 不是很熟悉，我在 Stackoverflow 上找到了这个脚本，但我无法让它工作。

**更新**

尝试这个，但不起作用（Chrome 隐藏得很好，但 Firefox 和 IE 没有）：

```
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>
<script type="text/javascript">
$("imagen").each(function(){

  if ($(this).attr("src") == "") 
       $(this).hide();
  else

      $(this).show();
});
</script>
<style>
.hide {display:none !important;}
.show {display:block !important;}
</style> 
```

谢谢，

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-12-01T18:53:37.677

您可以为此使用 CSS：

```
img[src=""] {
    display: none;
}
```

```
<img src="">
<img src="http://dreamatico.com/data_images/kitten/kitten-2.jpg">
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-10T09:47:06.567

你的逻辑有缺陷。

```
if ($(".imagen").attr(src="") == "") {
  $(".imagen").hide();
}
else {
  $(".imagen").show();
} 
```

这将不起作用，因为您已经遍历了每个实例`.imagen`

```
$('.imagen').show().filter(function(){
  return $(this).attr('src') == '';
}).parents('a').hide(); 
```

上面，我们显示所有`.imagen`的，然后根据它们的`src`属性过滤，然后隐藏我们剩下的。

顺便说一句，您可能想要隐藏父`<a>`元素，而不是图像。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-10T09:56:14.177

使用[jQuery 的属性选择器](http://api.jquery.com/category/selectors/)怎么样？

```
 $(document).ready(function(){
        $('.imagen[src=""]').hide();
        $('.imagen:not([src=""])').show();
    }); 
```

这里的工作[示例](http://jsbin.com/ebunud/1/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-10T09:44:54.603

通过 attr() 获取 src 值的语法错误

*改变*

```
if ($(".imagen").attr(src="") == "") { 
```

*至*

```
$(".imagen").each(function(){     
  if ($(this).attr("src") == "") 
       $(this).hide();
  else           
      $(this).show();
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-10T09:50:55.800

我很惊讶你没有某种语法错误而且你的代码也是错误的，因为它没有测试.imagen的每个实例。

像这样做

```
$(".imagen[src='']").hide(); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-11-07T11:25:36.917

Just put space inside alt tag.Here is working code

```
 <img class="imagen" src="" width="800" alt" "> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-05-06T14:30:04.750

在您的样式表中添加以下代码来定义一个“隐藏”类：

```
 .hidden {
    display: none;
} 
```

然后添加以下 javascript 代码：

```
$(document).ready(function() {
   $(".imgagen").each(function() {
        var atr = $(this).attr("src"); 
        if(atr == "") {
            $(this).addClass("hidden");
        } else {
            $(this).removeClass("hidden");
        }
    });
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-10T09:51:21.413

测试 src 属性是否为空，但无论如何 - 如果隐藏图像，包装 A 元素会发生什么情况？相反，不要为那些没有任何图像的人生成 A/IMG 元素。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-10T09:54:40.613

您发布的代码应该可以工作，但请确保您已在您的 html 页面的标题上添加了 jquery 库文件。

转到jquery站点，然后下载js文件。然后在 HTML 页面部分 head 上添加以下行：

# java - JList 和 ListModel 设计模式建议

> ID：15922346
> 
> 赞同：0
> 
> 时间：2013-04-10T09:44:22.420
> 
> 标签：java, list, design-patterns, jaxb

我正在构建一个应用程序，它基本上只是一个用于显示和编辑单个对象的 GUI。由于这个对象的类是用[JAXB](http://jaxb.java.net/tutorial/)创建的，所以它基本上是一棵树，有许多字符串和整数作为孩子，但也有一些`List<E>`s。对于每个简单的子 JAXB 都提供了一个 getter 和一个 setter，但对于所有列表，只提供了一个 getter，因为它提供了对内部列表的引用，现在可以对其进行修改。

由于我**需要在****单独**的Swing GUI 组件中显示每个子项（和分支） ，因此我需要这些视图来处理一些数据。根据我目前对模型视图控制器设计模式的了解，我应该**严格地**将模型与视图分开。在此之后，让 a`JList`直接对我的基础对象的内部列表进行操作将是一个坏主意。*（实际上这样做对于我的特定用例来说是一个非常简单的解决方案，但是由于以后可能会添加其他功能，我认为我应该避免这个想法。）*

然后我开始思考：如果我不让组件直接在列表上工作，我必须让它们使用原始的副本。但由于我无法将原始列表设置为我的 GUI 组件返回的新列表，因此在将视图数据保存到我的模型时，我必须再次复制这些项目。此外，分发对 custom 内部列表的引用也是不明智的`ListModel`，这意味着根据 GUI 结构的深度，可能会多次复制该列表。

由于我还希望我的应用程序高效，因此这似乎也不是正确的方法。如何“正确”构建它？

概括：

*   from 原始对象是对该`List<E>`对象内部列表的引用。

*   显示`JList`列表不应该得到这个引用，因此它必须复制列表。

*   从 中获取列表`JList`也不应该产生对内部列表的引用，因此必须再次复制它。

*   将列表保存到原始对象必须第三次复制列表，因为原始对象没有列表的 setter 方法。（详情见上文）

我对此的把握正确吗？我如何正确构建它并使其高效？

PS：在原始类结构中添加setter方法不是一种选择！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:01:24.587

> 是用 创建的`JAXB`，它基本上是一棵有许多字符串和整数作为孩子的树，但也有一些`List<E>`s。对于每个简单的孩子都`JAXB`提供了一个 getter 和一个 setter，但对于所有列表，只提供了一个 getter，因为它提供了对内部列表的引用，现在可以对其进行修改。

看

*   [JTreeTable](https://stackoverflow.com/a/7887648/714968)

*   [JList（不可修改），最好是 JTree 中的 JTable（带/不带 JTableHeader）](https://stackoverflow.com/questions/8843638/put-jtable-in-the-jtree)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:18:13.983

[@mKorbel建议](https://stackoverflow.com/a/15922729/230513)的所有组件都提供了某种选择侦听器，允许您将一个面板中的选择松散地耦合到另一个面板中的选定项目的显示。[`FileBrowser`](https://codereview.stackexchange.com/q/4446/6692)说明了一个`TreeSelectionListener`；[`Outline`](https://codereview.stackexchange.com/a/4447/6692)可以有一个`ListSelectionListener`，显示[在这里](https://stackoverflow.com/a/2841582/230513)；等等

附录：在这个相关[示例](https://stackoverflow.com/a/13919878/230513)中，`DisplayPanel`监听一个相邻`TableModel`的，它可以查询它以更新它自己的组件之一中的模型。请注意，每个模型都松散地耦合到其各自的视图。[这里](https://stackoverflow.com/a/3072979/230513)提到了常见的通知机制。

# c# - 如何在 C# 中将 6.3 拆分为 0.3、1.3、2.3、3.3、4.3、5.3、6.3？

> ID：15922350
> 
> 赞同：-4
> 
> 时间：2013-04-10T09:44:30.600
> 
> 标签：c#

有什么优雅的方法可以在 C# 中输入浮点数 6.3 并输出浮点数数组 {0.3,1.3,2.3,3.3,4.3,5.3,6.3} 吗？

给定输入 a float ab ，如果 a = 5, b=3 ，那么我需要一个浮点数组 {0.3,1.3,2.3,3.3,4.3,5.3}

```
input:3.2  -> a float 
output:{0.2,1.2,2.2,3.2} -> a float array 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T09:50:52.030

也许：

```
float f = 6.3f;
float[] ff = Enumerable.Range(0, (int)Math.Ceiling(f))
    .Select(i => (float)Math.Round(i + (f - (int)f), 1))
    .ToArray(); 
```

[**演示**](http://ideone.com/fXO7F7)

```
0.3
1.3
2.3
3.3
4.3
5.3
6.3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T09:49:47.617

我会尝试这样的事情：

```
double originalNumber = 6.3d;
double integralPart = Math.Truncate(originalNumber); // this is now 6.0
double fraction = originalNumber - integralPart; // this is now 0.3

List<double> results = new List<double>();
for (int i = 0; i <= integralPart; i++)
{
    double newNumber = i + fraction;
    results.Add(newNumber);
} 
```

我已经尝试过了，它可以工作 - 它为给定的小数创建一个从 0.y 到 xy 的列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T09:52:10.193

我的版本：

```
float[] getFloatStuff(float num) {
    float[] arr = new float[(int)num + 1];

    for (int i = arr.Length - 1; i >= 0; i--)
        arr[i] = num--;

    return arr;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T10:00:34.500

好吧，这个问题的“完美答案”是：

```
float[] MyFunction(float arg)
{
    if (arg == 6.3)
    {
        return new float[]{0.3,1.3,2.3,3.3,4.3,5.3,6.3};
    }
    if (arg == 5.3)
    {
        return new float[]{0.3,1.3,2.3,3.3,4.3,5.3};
    }
    throw new ArgumentException("Not defined what to do in such situation");
} 
```

请记住，答案总是与问题的质量相同 =)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T09:51:15.517

我真的不知道，但是像这样的东西？

```
private static List<float> Test(float input)
    {
        var list = new List<float>();
        while (input> 0)
        {
            list.Add(input);
            input--;
        }
        return list;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T09:51:38.377

你在这：

```
var arr = GetElegantRange(f).OrderBy(_ => _).ToArray();

public static IEnumerable<float> GetElegantRange(float input)
{
    while (input > 0)
        yield return input--;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-10T09:52:25.810

您可以使用 LinQ 来执行此操作：

```
static float[] Function(float value)
{
  var max = (int)value;
  var remainder = value - max;

  return Enumerable.Range(0, max).Select(n => n + remainder).ToArray();
} 
```

不要忘记添加

> 使用 System.Linq；

# ado.net - 在 ADO.NET 中使用动态创建的临时表进行大容量复制

> ID：15922351
> 
> 赞同：6
> 
> 时间：2013-04-10T09:44:33.670
> 
> 标签：ado.net, sqlbulkcopy

我需要通过 ADO.NET 创建一个临时表，在临时表和实际表之间的服务器上执行 a`BulkCopy`然后 a 。`Merge`

问题是使用纯 ADO.NET 创建临时表动态。架构应该与现有表相同，但该表是使用 ORM（NHibernate 或实体框架，我们还不确定）创建的。这也意味着架构将来可能会发生变化。

有没有办法使用普通的 ADO.NET 对象在数据库中创建表？比如一个`DataTable`包含原表的schema？

任何将我指向正确方向的信息表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-14T07:04:28.197

您可以使用 select into #somename 创建一个临时表。

```
connection_ = New SqlClient.SqlConnection(connection_string_)
connection_.Open()
If connection_.State = ConnectionState.Open Then

    command_.Connection = connection_
    command_.CommandType = CommandType.Text
    command_.CommandText = "select * into #some_table from some_table where some_id = 0"
    command_.ExecuteNonQuery()

    Dim line_index_ As Integer = 0
    Dim data_table_ As DataTable = New DataTable()
    Using parser_ As FileIO.TextFieldParser = New FileIO.TextFieldParser(path_)
        parser_.SetDelimiters(delimiter_)
        parser_.HasFieldsEnclosedInQuotes = False
        While Not parser_.EndOfData
            If line_index_ = 0 Then
                Dim headers_ As String() = parser_.ReadFields()
                For Each header_ In headers_
                    data_table_.Columns.Add(header_)
                Next
            Else
                Dim row_ As DataRow = data_table_.NewRow()
                row_.ItemArray = parser_.ReadFields()
                data_table_.Rows.Add(row_)
            End If
            line_index_ += 1
        End While
     End Using

     Using bulkCopy_ As SqlBulkCopy = New SqlBulkCopy(connection_)
           bulkCopy_.DestinationTableName = "#some_table"
           bulkCopy_.WriteToServer(data_table_)
     End Using

    ' proof
    command_.CommandText = "select * from #some_table"
    Dim reader_ As SqlDataReader = Nothing
    reader_ = command_.ExecuteReader
    line_index_ = 0
    While reader_.Read
        line_index_ += 0
    End While

 End If 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T08:37:03.617

我设法基于现有架构创建了一个临时表。

[在我的网站上记录了解决方案](http://www.ronaldrosier.net/Blog/2013/04/11/creating_a_temp_table_in_adonet_with_an_existing_table_schema)。

# json - jackson json 模式，不使用“枚举”类的可能值

> ID：15922358
> 
> 赞同：3
> 
> 时间：2013-04-10T09:44:52.870
> 
> 标签：json, enums, annotations, schema, jackson

Jackson json 模式自动检测枚举类型类并在模式中添加可能值的列表 - 例如

```
{"type":"object","properties":{"myfield":{"type":"string","enum":["val1","val2"]}}} 
```

是否可以注释非枚举字段，以便它们也可以采用一组封闭的值？

# javascript - 使用 DOM 方法定义文本框的动态宽度

> ID：15922368
> 
> 赞同：0
> 
> 时间：2013-04-10T09:45:16.023
> 
> 标签：javascript, dom, dynamic, textbox, width

我很想插入文本框来创建空行但我希望第一个文本框应该是 50px 只有我正在使用 DOM 方法创建它们的按钮的 onclick 事件 如何定义相对于以下方法的宽度

j 是在某处处理的变量 & cols 不是：要创建的列

```
for(var t=1;t<=cols;t=t+1)
            {

                var cell = row.insertCell(t);
                var element = document.createElement("input");
                element.type = "text";
                element.id=   'text['+j+']['+(t)+']';
                element.name= 'text['+j+']['+(t)+']';
                element.value="";

                cell.appendChild(element);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:56:18.660

有时它可能有效

```
element.style.width = width + 'px'; 
```

如果上述建议失败，请尝试一次

或者通过使用这个，

```
element.setAttribute("style","width:50px"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:47:58.273

尝试以下操作：

在 CSS 中：

```
.firsttext
{
    width: 50px;
} 
```

在 Javascript 中：

```
if (t==1)
{
    element.className = "firsttext";
} 
```

# php - 在网站中搜索链接并显示它 PHP

> ID：15922369
> 
> 赞同：1
> 
> 时间：2013-04-10T09:45:17.900
> 
> 标签：php, search, web, search-engine, lines

您好，我是 php 的新手，我正在尝试使用 php 进行搜索功能，但仅在没有任何数据库的网站内部

基本上，如果我想搜索一个名为“Health”的字符串，它将显示这些行

```
<a href="foobar.html">The Joys of Health</a>
<a href="foobar2.html">Healthy Diets</a> 
```

如果正确编码会输出我想要的“行”，这个片段是我唯一能找到的东西

```
$myPage = array("directory.php","pages.php");
$lines = file($myPage[n]);
echo $lines[n]; 
```

我还没有尝试过它是否会起作用，但在我这样做之前我想问一下是否有更好的方法来做到这一点？如果我的文件有太多行不会给服务器带来压力吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:17:07.680

你的目标很好，但你正在考虑的方法不是。该`file()`函数逐行读取文件，并将其插入到数组中。这假设 HTML 以人类可读的方式结构良好，但情况并非总是如此。但是，如果您是提供 HTML 的人，并且您确保结构是完美定义的，好的……这里有您提供给我们但完整的示例（考虑到这是解决问题的“错误”方式，但如果你想遵循这种模式，没关系）：

```
function pagesearch($pages, $string) {
    if (!empty($pages) && !empty($string)) {
        $tags = [];

        foreach ($pages as $page) {
            if ($lines = file($page)) {
                foreach ($lines as $line) {
                    if (!empty($line)) {
                        if (mb_strpos($line, $string)) {
                            $tags[$page][] = $line;
                        }
                    }
                }
            }
        }

        return $tags;
    }
} 
```

这将为您返回一个数组，其中包含您引用的所有页面以及您查找的所有单词的出现，按页面分隔。正如我所说，这不是你想要解决这个问题的方式，而是一种方式。

希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:55:57.030

该`file()`函数将返回一个数组。您应该使用`file_get_contents()`它，因为它返回一个字符串。

然后，使用[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)在链接中查找特定文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:52:40.537

因为您不想使用任何数据库，并且因为术语数据库非常广泛，并且包括您想要在没有数据库的情况下在某些数据库中进行搜索的文件系统。

这是没有意义的。在您的情况下，至少一个数据库是文件系统。如果您可以接受您想要搜索数据库（这里是您的 html 文件）但您不想使用数据库来存储与搜索相关的任何内容（例如某些索引或缓存结果）的事实，那么您的建议基本上就是它是如何工作的：实时的、基于文本的、逐行的文件搜索。

当然这是非常基本的，但由于您的约束是“没有数据库”，您已经找到了唯一可能的方法。是的，它会在使用时给您的服务器带来压力，因为实时搜索很昂贵。

否则通常[Lucene/Solr](http://lucene.apache.org/solr/)用于该作业，但它甚至是数据库和服务器。

# php - JpGraph 图形不出现 - （损坏的图像）

> ID：15922370
> 
> 赞同：1
> 
> 时间：2013-04-10T09:45:17.887
> 
> 标签：php, jpgraph

我需要安装 JpGraph 以在我的网站上显示图表。

我解压缩了压缩文件，然后将它们放入我的 www 文件夹（wamp），并尝试访问该`testsuit.php`页面：`jpgraph-3.5.0b1/src/Examples/testsuit.php`

但结果是：

![在此处输入图像描述](https://i.stack.imgur.com/KM1iQ.png)

GD lib已激活...我不明白这个问题。示例页面上只有 5-6 个图表可以工作...

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:46:49.957

直接在浏览器中输入损坏图像的完整 URL，看看是否不会看到任何通知或错误消息。因为如果您的 php 脚本出于任何原因吐出此类消息，那么它会成为图像的一部分，因此会损坏、无法显示的图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-21T18:57:00.783

我有同样的问题，我只是将所有文件从 src 目录（当然只是文件，而不是目录）复制到“示例”目录中，我在“示例”目录中创建了一个目录并将其命名为 jpgraph，然后我复制从“src”目录（当然除了示例目录）中的所有文件和目录到该 jpgraph 目录。

准备好了！

一切正常！！！！

# mysql - MySQL 从连接表中选择 MAX 日期

> ID：15922371
> 
> 赞同：2
> 
> 时间：2013-04-10T09:45:18.790
> 
> 标签：mysql, date, select, join, max

我有这个`MySQL`查询：

```
SELECT 
    s.student_id,
    s.student_firstname,
    s.student_lastname,
    sd.student_startdate,
    sd.student_enddate,
    s.isActive,
    c.city_name,
    ctc.category_name
FROM
    students s
        INNER JOIN
    (SELECT sd1.student_id, sd1.student_startdate, sd1.student_enddate FROM studentdates sd1) sd ON sd.student_id = s.student_id
        INNER JOIN
    cityselections c ON c.city_id = s.student_city_id
        INNER JOIN
    coursecategory ctc ON s.student_course_category_id = ctc.category_id
WHERE
    sd.student_enddate BETWEEN CURDATE() AND ADDDATE(CURDATE(), INTERVAL 14 DAY)
        AND s.student_city_id NOT LIKE '1'
        AND s.student_city_id = 18
        AND s.isActive = 1
GROUP BY s.student_id
ORDER BY sd.student_enddate ASC , s.student_lastname , s.student_firstname 
```

在表`studentdates`中可以有多个`student_startdate`，`student_enddate`每个`student_id`，但我想选择每个学生`MAX(student_enddate)`。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T09:53:45.377

如下修改您的子查询：

```
(
    SELECT
        sd1.student_id, sd1.student_startdate, sd1.student_enddate
    FROM (
        SELECT student_id, MAX(student_enddate) AS enddate
        FROM studentdates
        GROUP BY student_id
    ) AS s_max_enddate
    JOIN studentdates AS sd1 ON (
        sd1.student_id = s_max_enddate.student_id
        AND sd1.student_enddate = s_max_enddate.enddate
    )
) 
```

# android - Android显示多个列表值

> ID：15922372
> 
> 赞同：-1
> 
> 时间：2013-04-10T09:45:20.803
> 
> 标签：android, android-layout, listview

我正在做android应用程序。在那我想显示一个播客 url 列表，如图像中所示。在此，我还将此 url 分享到 FB、twitter 等，并且用户单击我想要转发到该播客 url 的箭头符号。

我将这些值放在单独的数组列表中（即“4353,3424”作为数组列表，“567567,234234”同样作为另一个数组列表）。那么如何显示这些值，如附图所示。谁能帮助我如何进行这样的显示？

![网格视图](https://i.stack.imgur.com/fpDnG.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:44:00.987

我建议您查看一些有关如何实现自己的自定义的教程`ListView`。

一个例子可以在这里找到：[http ://www.thepcwizard.in/2012/09/android-creating-custom-listview-for.html](http://www.thepcwizard.in/2012/09/android-creating-custom-listview-for.html)

另外，我建议您创建一个自定义类来保存`ListView`. 这样做时，您可以让一个人`List<MyCustomObject>`保存所有信息，然后单击一行时，您只需从中获取项目`List<MyCustomObject>`并获取自定义对象的特定属性并采取相应措施。

编辑：如何将 onClickListener 添加到行的子视图的小示例：

在可用于视图`getView`的自定义方法中，您希望响应点击。例如：`Adapter``setOnClickListener`

`myImageView.setOnClickListener(this);`

然后让您的自定义`Adapter`实现`interface` `OnClickListener`并根据点击采取相应的行动。

另一种方法是将 a 添加`Share Intent`到不同的图像中，如下例所示：

[http://sudarmuthu.com/blog/sharing-content-in-android-using-action_send-intent](http://sudarmuthu.com/blog/sharing-content-in-android-using-action_send-intent)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T16:07:12.937

您需要创建一个自定义项以按照您想要的方式从该对象`ArrayAdapter`中填充一个。`ListView`

这种技术的优点是您获得了一种视图回收机制，该机制将回收`Views`您的内部`ListView`以减少内存消耗。

**简而言之**，您必须：

**1.**创建一个代表单行数据的对象。

**2.**创建`ArrayList`这些对象中的一个。

**3.**创建一个包含 ListView 的布局或使用代码将 ListView 添加到您的主布局。

**4.**创建单行布局。

**5.**创建一个`ViewHolder`从 的角度代表数据行的视觉方面`Views`。

**6.**创建一个自定义`ArrayAdapter`，将根据您的需要填充行。

**7.**最后把这个分配`ArrayAdapter`给你的`ListView`in `onCreate`。

您可以通过阅读我写的这篇博客文章来了解如何实现这一点：

[创建自定义 ArrayAdapter](http://blog-emildesign.rhcloud.com/?p=495)

# visual-studio-2012 - 在构建前/构建后事件中检测重建

> ID：15922378
> 
> 赞同：1
> 
> 时间：2013-04-10T09:45:33.687
> 
> 标签：visual-studio-2012

是否可以在构建前/构建后事件中检测到重建与正常构建？

我正在准备一些文件，并且只想重新生成它们以进行重建。

# c++ - gcc nullptr 问题

> ID：15922380
> 
> 赞同：6
> 
> 时间：2013-04-10T09:45:45.837
> 
> 标签：c++, gcc, c++11, gcc4.7, nullptr

我正在移植现有代码以在 gcc 4.7.2 下编译，并遇到了一个关于 nullptr 的奇怪问题。我设法将其归结为一个简单的测试用例：

```
#include <stdio.h>

const char* g_marker = "Original value";

void SetMarker( const char* s )
{
    g_marker = s;
}

char* Test1()
{
    return SetMarker( "I was here 1" ), nullptr;
}

char* Test2()
{
    SetMarker( "I was here 2" );
    return nullptr;
}

char* Test3()
{
    return SetMarker( "I was here 3"), (char*)NULL;
}

int main()
{
    char* returnValue = Test1();
    printf( "%s\n", g_marker );
} 
```

用 g++ test.cpp -o test -std=c++0x 编译它。

我期望的输出是“我在这里 1”，但我得到“原始值”，表明从未调用过 SetMarker。

调用 Test2 或 Test3 会给出预期的输出。

我正在使用的代码使用在 Test3 中看到的模式——最初没有在 NULL 前面进行强制转换——在从 int 到 char* 的无效转换时出现错误，所以我开始将所有这些 NULL 更改为 nullptr。不幸的是，这只是行为不正确。

我可能被迫更改代码以使用 Test2 中的模式（无论如何我更喜欢），但我很想知道这是否是编译器中的错误，或者我是否遗漏了一些东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T10:06:49.863

这是 g++ 中的一个错误： http://gcc.gnu.org/bugzilla/show_bug.cgi?id= [52988](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=52988)

g++ 正在丢弃 type 表达式中的副作用，`nullptr_t`假设所有`nullptr_t`值都是等价的（它们是等价的，但这并不意味着你可以忽略副作用！）

这在 4.8.0 版本中已修复；4.x 分支（4.6.4 和 4.7.3）上的新版本也应该有修复。

# mysql - 我希望不插入具有 zreo 值的 studentid 表字段，我通过使用触发器来做到这一点，但它仍然允许插入它们

> ID：15922381
> 
> 赞同：0
> 
> 时间：2013-04-10T09:45:45.960
> 
> 标签：mysql, sql

仍然允许插入零值..

```
 CREATE TRIGGER check_my_constraint BEFORE insert ON `personal_details`
         FOR EACH ROW 
         BEGIN
         DECLARE msg varchar(255);
         IF (NEW.studentid<0)
         THEN
            SET msg = concat('Constraint my_constraint violated: studentid must not be zero ', cast(new.studentid as char));
            SIGNAL sqlstate '45000' SET message_text = msg;
         END IF; 
         END ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:49:11.217

改变条件——

`IF (NEW.studentid<0)`=>`IF (NEW.studentid <= 0)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:49:15.827

您只检查*小于*零。您必须检查是否*小于或*等于零：

```
IF (NEW.studentid <= 0) 
```

# python - 尝试从 apache 访问日志中解析源 IP 并将输出写入文件，但只写入 1 个 ip

> ID：15922382
> 
> 赞同：0
> 
> 时间：2013-04-10T09:45:51.210
> 
> 标签：python, apache, parsing

我正在尝试读取 apache 访问日志并将所有源 ip 从那里拉到输出文件。我是 python 新手，所以我不确定我做对了，但它必须在 python 中。

```
#! python
for line in open('/var/log/apache2/access.log'):
        ip = line.split(' ')[0]
print ip 
```

我知道目前它正在打印到屏幕而不是文件，但首先我试图让脚本的第一部分工作。当我运行脚本时，它只打印出字符串的第一次出现，这意味着只有 1 个 ip，我认为使用 for 循环运行它会遍历文件的每一行，但我想它不起作用，因为我写的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T09:47:18.470

你错过了缩进：

```
#! python
for line in open('/var/log/apache2/access.log'):
        ip = line.split(' ')[0]
        print ip 
```

要写入文件，您可以使用以下内容：

```
#! python
f = open("ip.txt", "w")
for line in open('/var/log/apache2/access.log'):
        ip = line.split(' ')[0]
        f.write(ip + '\n')
f.close() 
```

# orbeon - Orbeon 在哪里存储数据？

> ID：15922385
> 
> 赞同：1
> 
> 时间：2013-04-10T09:45:58.050
> 
> 标签：orbeon, xforms

我对 Orbeon 和 XForms 非常陌生。我已经下载了 Orbeon 4 CE 并创建了一个示例 Web 表单。

1.  我已经创建了一些示例表单，我可以对其进行测试、发布和保存。但是，我不知道输入的表单数据在哪里存储/保存？
2.  数据整合是如何发生的？
3.  在 v4 CE 中看不到 Orbeon Form Runner？
4.  我没有配置任何数据库。提到 eXist DB 是 orbeon 的原生 DB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T01:51:47.913

使用 Form Builder 创建表单时，表单本身的定义以及“执行”表单时捕获的数据都存储在内置的 eXist 数据库中。它与 Orbeon Forms 捆绑在一起，因此无需您进行任何设置即可使用。但您也可以设置 Orbeon Forms 以使用另一个数据库：

*   它可能是 eXist，但与 Orbeon Forms 分开设置。
*   它可以是[MySQL 或 Oracle](http://wiki.orbeon.com/forms/doc/developer-guide/form-runner/oracle-and-mysql-persistence-layers)。
*   [如果您实现 Orbeon REST 持久性 API](http://wiki.orbeon.com/forms/doc/developer-guide/form-runner/persistence-api)，它可以是任何东西。

# netbeans - Netbeans：如何更改@author

> ID：15922390
> 
> 赞同：122
> 
> 时间：2013-04-10T09:46:14.293
> 
> 标签：netbeans, javadoc, netbeans-7

在 Netbeans IDE 中创建新类或接口时，会出现“@author ....”标签。如何改变它的价值？如果可能的话，我想通过使用 Netbeans 菜单而不是通过编辑一些配置文件来更改它:) 我使用的是 Netbeans 7.2

* * *

## 回答 #1

> 赞同：235
> 
> 时间：2013-04-10T09:55:10.680

**脚步：**

1.  转到**工具**->**模板**。

2.  点击**设置**按钮。一个带有模板设置的新面板将出现在您的 IDE 中：

3.  取消注释最后一行并将“user”的值更改为您希望在**@author**标记之后插入的值。

**PS**：我认为这个博客会更好地解释[如何更新作者模板](http://progers-blog.blogspot.in/2012/06/how-to-change-author-property-in.html)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-05-29T17:30:41.837

万一其他人在 Eclipse 中寻找相同的功能时发现了这个：Window -> Show View -> Templates

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-06-11T05:01:48.160

- 在 netbeans 中转到工具 -> 模板 -> 设置 - 文件的最后一行，这样写 user=xyz

N:B: 你可以用你的名字代替 xyz。

# joomla3.0 - 严格标准：不应静态调用非静态方法 JSite::getMenu()

> ID：15922391
> 
> 赞同：10
> 
> 时间：2013-04-10T09:46:15.420
> 
> 标签：joomla3.0

我是joomla的新手。当我将模板更改为其他模板时，例如[http://www.joomla24.com/Joomla_3x_Templates/Joomla_3x_Templates/Oliverio_Lite.html](http://www.joomla24.com/Joomla_3x_Templates/Joomla_3x_Templates/Oliverio_Lite.html)

我收到以下错误

```
Strict Standards: Non-static method JSite::getMenu() should not be called statically, assuming $this from incompatible context in ..\xampp\htdocs\joomla\templates\oliveriolite\index.php on line 91

Strict Standards: Non-static method JApplication::getMenu() should not be called statically, assuming $this from incompatible context in ..\xampp\htdocs\joomla\includes\application.php on line 569 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-11T18:55:58.017

这很简单。您的模板调用一个`getMenu()`静态命名的函数。意思是调用看起来像这样：`$app::getMenu()`. 但它应该是这样的：`$app->getMenu()`. 变量名 ( `$app`) 无关紧要，冒号与箭头很重要。

获取菜单的正确方法是：

```
$app = JFactory::getApplication();
$menu = $app->getMenu(); 
```

甚至更短：

```
$menu = JFactory::getApplication()->getMenu(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-05-07T17:36:19.643

还要配置 php.ini error_reporting 作品

```
error_reporting = E_ALL & ~E_NOTICE & ~E_WARNING & ~E_STRICT & ~E_DEPRECATED 
```

# c++ - 无法访问同一类的私有成员

> ID：15922392
> 
> 赞同：1
> 
> 时间：2013-04-10T09:46:20.123
> 
> 标签：c++, templates, c++11, g++, smart-pointers

我正在实现一个智能指针类作为练习。考虑以下：

```
class Base1 {
    protected:
        Base1() : derived_destructor_called(false) {
            printf("Base1::Base1()\n");
        }
    private:
        Base1(const Base1 &); // Disallow.
        Base1 &operator=(const Base1 &); // Disallow.
    protected:
        ~Base1() {
            printf("Base1::~Base1()\n");
            assert(derived_destructor_called);
        }
    protected:
        bool derived_destructor_called;
};

class Derived : public Base1 {
        friend void basic_tests_1();
    private:
        Derived() {printf("Derived::Derived()\n");}
        Derived(const Derived &); // Disallow.
        Derived &operator=(const Derived &); // Disallow.
    public:
        ~Derived() {
            printf("Derived::~Derived()\n");
            derived_destructor_called = true;
        }
        int value;
}; 
```

以及以下测试代码：

```
 Sptr<Derived> sp(new Derived);
            // // Test template copy constructor.
            Sptr<Base1> sp3(sp); 
```

产生以下错误：

```
Sptr.cpp: In instantiation of ‘my::Sptr<T>::Sptr(const my::Sptr<U>&) [with U = Derived; T = Base1]’:
Sptr.cpp:272:35:   required from here
Sptr.cpp:41:6: error: ‘Derived* my::Sptr<Derived>::obj’ is private
Sptr.cpp:117:86: error: within this context
Sptr.cpp:42:13: error: ‘my::RC* my::Sptr<Derived>::ref’ is private
Sptr.cpp:117:86: error: within this context
Sptr.cpp:43:31: error: ‘std::function<void()> my::Sptr<Derived>::destroyData’ is private
Sptr.cpp:117:86: error: within this context 
```

这怎么可能？我指的是同一个类中的相同类变量。！

下面是模板类原型及其构造函数声明：

```
template <class T>
class Sptr {
private:
    //some kind of pointer
        //one to current obj
    T* obj;
    RC* ref;
    std::function<void()> destroyData;
public:
    Sptr();
    ~Sptr();

    template <typename U> 
    Sptr(U *);

    Sptr(const Sptr &);

    template <typename U> 
    Sptr(const Sptr<U> &);

    template <typename U> 
    Sptr<T> &operator=(const Sptr<U> &);

    Sptr<T> &operator=(const Sptr<T> &);

    void reset();

    T* operator->() const
    {return obj;};

    T& operator*() const
    {return *obj;};

    T* get() const
    {return &obj;};

    //operator unspecified_bool_type() const;

    //overload *,->,=,copy-constructor

    // const-ness should be preserved.
    // Test for null using safe-bool idiom
    // Static casting, returns a smart pointer
}; 
```

**编辑**

我在模板类中声明了一个模板朋友，如下所示：

```
template<typename U> friend class Sptr; 
```

这样就解决了上面的错误。但它产生了新的错误！

测试代码：

```
 Sptr<Base1> sp2;
        {
            Sptr<Derived> sp(new Derived);
            // // Test template copy constructor.
            Sptr<Base1> sp3(sp);
            sp2 = sp;
            sp2 = sp2;
        } 
```

错误：

```
Sptr.cpp: In instantiation of ‘my::Sptr<T>& my::Sptr<T>::operator=(const my::Sptr<U>&) [with U = Derived; T = Base1]’:
Sptr.cpp:274:23:   required from here
Sptr.cpp:128:9: error: comparison between distinct pointer types ‘my::Sptr<Base1>*’ and ‘const my::Sptr<Derived>*’ lacks a cast
Sptr.cpp:212:9: error: ‘Base1::~Base1()’ is protected
Sptr.cpp:132:21: error: within this context
Sptr.cpp: In instantiation of ‘my::Sptr<T>& my::Sptr<T>::operator=(const my::Sptr<T>&) [with T = Base1]’:
Sptr.cpp:275:23:   required from here
Sptr.cpp:212:9: error: ‘Base1::~Base1()’ is protected
Sptr.cpp:154:21: error: within this context 
```

当我已经将它设为模板朋友时，这怎么可能？= 运算符下面重载

```
template <typename T> 
Sptr<T>& Sptr<T>::operator=(const Sptr<T> &t) {

    std::cout<<"= const <T>\n";
    if(this != &t) {
        if(ref->Release() == 0) {

            if(obj)
                delete obj;

            delete ref;       
        }

        obj = t.obj;
        ref = t.ref;
        destroyData = t.destroyData;
        ref->AddRef();
    }

    return *this;
}
template <typename T> 
template <typename U> 
Sptr<T>& Sptr<T>::operator=(const Sptr<U> &t) {

    std::cout<<"= const <U>\n";
    if(this != &t) {
        if(ref->Release() == 0) {

            if(obj)
                delete obj;

            delete ref;       
        }

        obj = t.obj;
        ref = t.ref;
        destroyData = t.destroyData;
        ref->AddRef();
    }

    return *this;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T09:53:50.233

班级不同；你的构造函数是

```
my::Sptr<Base1>::Sptr(const my::Sptr<Derived>&) 
```

并且您正在尝试访问`my::Sptr<Derived>`.

您需要声明一个模板朋友：

```
template<typename U> friend class Sptr; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T09:54:03.370

> 我指的是同一个类中的相同类变量。

不你不是。*也许你指的是同一个类模板*的相同成员，我猜是这样的

```
 template <typename U> 
    Sptr(const Sptr<U> & other) : obj(other.obj), ref(other.ref) {} 
```

但是您*没有*访问同一个*类*的成员，因为`Sptr<Base>`和`Sptr<Derived>`是模板的不同实例，因此是不同的类，不能触及彼此的隐私。

**更新您的编辑：**您现在得到的错误与访问权限无关，但它再次与不同的`Sptr<Base>`类有关`Sptr<Derived>`，因此指向它们的指针是无法比较的不同指针类型。
您显示的代码`operator=`适用于相同的模板实例化 ( `Sptr<T>`)，但错误发生在不同模板实例化 ( `Sptr<U>`) 的运算符中。我猜你在那里也有地址比较，这是没有必要的，因为 a`Sptr<T>`不能与 a 具有相同的地址`Sptr<U>`。

关于 protected 的第二个错误`~Base`是显而易见的：您将`~Base`protected 和非虚拟化，意味着您不会`Base`通过删除`Base*`指针来破坏对象。这同样适用于指向 的智能指针`Base`，因为它们会使用您禁止的多态删除。解决方案：使`~Base`公共和虚拟化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T09:54:40.497

他们不是同一个班级。看起来它在抱怨您试图访问`Sptr<Derived>`from的成员`Sptr<Base1>`- 查看错误消息开头的类型变量实例化。

模板，当它们的类型变量被填充时，会生成全新的类，这些类恰好看起来非常相似，因此 a`MyClass<string>`与 a 不同`MyClass<vector<int>>`。

# css - 如何在Rails的公共文件夹中获取css中的图像url？

> ID：15922397
> 
> 赞同：1
> 
> 时间：2013-04-10T09:46:36.390
> 
> 标签：css, ruby-on-rails

我有一个 css 位于 rails 的 public/ 文件夹内。我想在 app/assets/images/ 文件夹中找到图片作为 CSS 中的背景。下面的代码似乎不起作用：

```
background: url("bg-noise.png"); 
```

这通常用于 app/assets/stylesheets/ 文件夹中的 css。无法使其在公用文件夹中工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:51:41.553

你最好用它来定位你的图像

```
background-image: url(<%= asset_path 'bg-noise.PNG' %>) 
```

如果您有图像文件夹，请使用：

```
background-image: url(<%= asset_path '/images/bg-noise.PNG' %>) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:56:24.393

如果您检查该元素并扩展选项卡背景： url(); 并查找图像背景图像： url('localhost:3000/assets/bg-noise.png');

所以为了避免这种情况，使用

```
{
background: url('../bg-noise.png');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:38:32.990

```
background: url('/assets/bg-noise.png'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T10:58:57.027

你有两个选择。如果您可以重命名文件并将资产管道与 SCSS 一起使用，则将样式重命名为`.css.scss`并替换

```
background: url("bg-noise.png"); 
```

使用`image-url`SCSS 助手。

```
background: image-url("bg-noise.png"); 
```

它将自动解析路径。

另一种解决方案是将文件重命名为`.css.erb`，您将能够在文件中使用 ERB 代码。

```
background-image: url(<%= asset_path 'bg-noise.png' %>) 
```

最后一个解决方案是对路径进行硬编码。

```
background: url("/assets/bg-noise.png"); 
```

我鼓励你使用第一个选项。

# java - Java 无法创建文件 - Linux

> ID：15922398
> 
> 赞同：0
> 
> 时间：2013-04-10T09:46:38.490
> 
> 标签：java, file-io, makefile, ioexception, bufferedwriter

当我使用 Java 程序在 Ubuntu 中创建文件时，出现此错误：

```
 Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at actions.create.actionPerformed(create.java:18)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3312)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:729)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:688)
    at java.awt.EventQueue$3.run(EventQueue.java:686)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:702)
    at java.awt.EventQueue$4.run(EventQueue.java:700)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:699)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:91) 
```

显然该文件没有创建，甚至尝试以root身份运行它但仍然没有。这是我的代码：

```
 File shortcut;
    shortcut = new File(global.location + "/" + global.name + ".desktop");

    try {
    FileWriter fWrite = new FileWriter(shortcut.getAbsoluteFile());
    BufferedWriter bWrite = new BufferedWriter(fWrite);
    shortcut.createNewFile();

    bWrite.write("[Desktop Entry]\nType=" + global.type + "\nTerminal=" + global.term + "\nIcon=" + global.icon + "\nExec=" + global.exec + "\nName=" + global.name);
    bWrite.close();
    } catch (IOException e1) {} 
```

有人可以帮忙解决这个问题吗？我在使用 java 创建文件时总是遇到这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:00:54.390

你应该做

```
System.out.println(shortcut.getAbsoluteFile()); 
```

并仔细检查该目录是否真的存在。我有一种感觉，`shortcut.createNewFile();`因此抛出了 NPE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-29T02:22:43.983

实话告诉你，我不知道你在这里做了什么，看来你是在摸黑摸摸做档案。我想向您展示一个可以帮助您解决此问题的课程（我创建的）：

```
package your.package;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.nio.charset.Charset;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;

public class FileHelper
{
    public static boolean createFile(String dir)
{
    return FileHelper.createFile(dir, false);
}

public static boolean createFile(String dir, boolean isDirectory)
{
    boolean returning = false;
    boolean created = false;

    Path p = Paths.get(dir);
    try
    {
        if (Files.exists(p))
        {
            returning = true;
        }
        else if (isDirectory)
        {
            Files.createDirectory(p);
            created = true;
            returning = true;
        }
        else
        {
            Files.createFile(p);
            created = true;
            returning = true;
        }
    }
    catch (IOException e)
    {
        e.printStackTrace();
    }
    if (returning)
    {
        Util.println((created ? "Created New " : "") + (isDirectory ? "Directory" : "File") + (created ? "" : " Already Exists") + " In: " + p.toString());
    }
    return returning;
}

public static boolean writeToFile(String fileName, String stuff)
{
    return FileHelper.writeToFile(fileName, stuff, true);
}

public static boolean writeToFile(String fileName, String stuff, boolean newLine)
{
    try (BufferedWriter writer = new BufferedWriter(new FileWriter(fileName, true)))
    {
        writer.write(stuff);
        if (newLine) writer.newLine();
        return true;
    }
    catch (IOException x)
    {
        System.err.format("IOException: %s%n", x);
        x.printStackTrace();
        return false;
    }
}

public static BufferedReader getFileReader(String fileName)
{
    Charset c = Charset.forName("US-ASCII");
    Path p = Paths.get(fileName);

    try
    {
        return Files.newBufferedReader(p, c);
    }
    catch (IOException e)
    {
        e.printStackTrace();
    }
    return null;
}

public static boolean deleteDirectory(File dir)
{
    Util.requireNonNull(dir);

    if (!dir.exists() || !dir.isDirectory())
    {
        throw new IllegalArgumentException("\"dir\" Must exist!");
    }

    String[] files = dir.list();

    for (int i = 0, len = files.length; i < len; i++)
    {
        File f = new File(dir, files[i]);

        if (f.isDirectory())
        {
            deleteDirectory(f);
            Util.println("Found new directory to delete: " + f.getPath() + " Deleting now...");
        }
        else
        {
            f.delete();
            Util.println("Deleted File: " + f.getPath());
        }
    }
    Util.println("Deleted Directory: " + dir.getPath());
    return dir.delete();
}
} 
```

让我知道这是否对您的问题有帮助！顺便说一句，你不需要为这个文件给我任何信用。它现在是公众！祝你好运，编码愉快！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:06:49.813

尝试输入父文件夹和文件名的文件创建器：

```
File subFolder=new File(folderName,subFolder);
File f=new File(folderName,filename;)
System.out.println(f.getAbsolutePath()); //this to see the actual path of the file
subFolder.mkdirs();
BufferedWriter writer=new BufferedWriter(new FileWriter(f)); 
```

# facebook-apps - 新应用程序只能在开发者浏览器中运行。这是我创建的代码吗？

> ID：15922400
> 
> 赞同：0
> 
> 时间：2013-04-10T09:46:41.090
> 
> 标签：facebook-apps

我设计并创建了我的第一个应用程序。如果需要，我可以提供 html。

现在我可以看到该应用程序在我的桌面浏览器中运行，但是当其他人尝试测试它不起作用的应用程序时。他们遇到这样的错误 = [https://www.facebook.com/4oh4.php](https://www.facebook.com/4oh4.php)

该应用程序是[https://apps.facebook.com/lbrguineascomp/](https://apps.facebook.com/lbrguineascomp/)

是否存在某种设置或代码以某种方式阻止实际开发人员以外的任何人查看和使用此基本测验类型的应用程序？同样的情况也发生在手机上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:03:36.763

自 2013 年 4 月 4 日起，Facebook 已开始默认将新应用程序默认为**沙盒模式，这可能会导致在其****应用程序设置**页面中提到的人以外的任何人访问应用程序时显示[404的问题。](https://www.facebook.com/4oh4.php)这篇[博](https://developers.facebook.com/blog/post/2013/04/03/platform-updates--operation-developer-love/)文中也提到了这一点。

# java - 谷歌可视化 - 在 Java 中加入多个数据表

> ID：15922401
> 
> 赞同：2
> 
> 时间：2013-04-10T09:46:42.950
> 
> 标签：java, gwt, google-visualization

基本上，我正在使用 google App Engine (Java)、Datastore 和 Google Visualization 图表创建一个 GWT 应用程序。

我使用了一个简单的折线图来表示以下信息 - 年份（X 轴）上的值（Y 轴）

我从数据存储区获取以下值作为实体列表：

对 Jon 的请求返回实体（每一行都是一个实体）：

```
Person | Value | Year
Jon    |  80%  | 1992
Jon    |  74%  | 2010
Jon    |  10%  | 2011 
Jon    |  84%  | 2012 
```

要求麦克退货：

```
Person | Value | Year
Mike   |  80%  | 2000
Mike   |  74%  | 2001
Mike   |  10%  | 2002 
Mike   |  84%  | 2003
Mike   |  85%  | 2006
Mike   |  65%  | 2011
Mike   |  55%  | 2012 
```

我可以轻松地为每个人创建图表。为此，我使用以下[Google 可视化数据源库](https://developers.google.com/chart/interactive/docs/dev/dsl_javadocs/index?com/google/visualization/datasource/package-summary.html)在服务器上创建[DataTable](https://developers.google.com/chart/interactive/docs/dev/dsl_javadocs/com/google/visualization/datasource/datatable/package-summary) - 然后使用 Json 将其发回。

现在我想要创建一个组合/连接两个数据表的图表

我可以看到自己实现这一点的唯一另一种方法是单独创建每个[TableRow](https://developers.google.com/chart/interactive/docs/dev/dsl_javadocs/com/google/visualization/datasource/datatable/TableRow) - 这对我来说现在感觉有点矫枉过正，因为数据必须在每个人的正确列中，即 2012 年的 TableRow 需要

```
Year |Mike | Jon
2006 | 85% | null
2011 | 65% | 10%
2010 | null| 84%
2011 | 65% | 10%
2012 | 55% | 84% 
```

这对我来说特别棘手，因为我为每个人发送单独的请求 - 例如，如果我请求 Jon，那么我会得到一个代表每一行的实体列表，但是当我想加入它们时，我需要经历获得年，将值添加到右列等等等。这一切似乎都过大了，必须有一种方法来合并表，以便您可以自动生成上述行集。

我想要的只是为 Jon 和 Mike 以及 Sally 出现时生成一个 DataTable，然后将它们全部合并到一个简单的命令中，以便我得到一个漂亮的图表，每条线都映射到正确的人。

ps 我这段代码应该在服务器上用Java编写......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-27T15:00:58.010

可以将两个数据表合并为一个：

google.visualization.data.join(dt1, dt2, joinMethod, 键, dt1Columns, dt2Columns)

看看[https://developers.google.com/chart/interactive/docs/reference#google_visualization_data_join](https://developers.google.com/chart/interactive/docs/reference#google_visualization_data_join)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:32:32.353

我没有注意到 DataTable 的 setCell 方法 - 我正忙于查看 addRow addCell 方法......

请参阅[https://developers.google.com/chart/interactive/docs/datatables_dataviews](https://developers.google.com/chart/interactive/docs/datatables_dataviews)

仍然 - 能够合并两个数据表会很棒......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-16T11:09:45.930

您可以转换为 JSON 并将它们合并。
下面的示例是用 Javascript 编写的，但在 Java 中方法是相同的。

```
 var json1 = JSON.parse(dataTable1.toJSON());
    var json2 = JSON.parse(dataTable2.toJSON());
    var mergedRows = json1.rows.concat(json2.rows);

    json1.rows = mergedRows;
    var mergedDataTable= new google.visualization.DataTable(json1); 
```

# scala - 如何在scala中获取转换后数组的索引

> ID：15922402
> 
> 赞同：1
> 
> 时间：2013-04-10T09:46:43.287
> 
> 标签：scala

我想转换一个数组数组。这可以通过以下方式完成：

```
var cal = Array.ofDim[Double](300, 10000);   
cal.foreach(x => x.transform(y => some_value)) 
```

问题是如何访问转换单元格的索引。例如：

```
cal.foreach(x => x.transform(y => x(y.index - 1) + 7)) 
```

我尝试使用 zipWithIndex：

```
cal.foreach(x => x.zipWithIndex.transform(y => (x(y._2) + 7, y._2))); 
```

但这并没有改变“cal”值。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T09:59:46.683

后一个选项不起作用，因为您正在调用`x.zipWithIndex`，它返回*一个新的元组集合*，然后正在转换该集合。这不会对底层数组产生任何影响。

我想不出任何可以让您修改数组同时仍然可以访问索引的方法。但是，如果您可以采用更实用的返回新集合的样式，则可以执行以下操作：

```
val cal = Array.ofDim[Double](300, 10000) map { x =>
    x.zipWithIndex map (y => x(y._2) + 7)
}; 
```

事实上，由于`cal`在您的示例中是可变的，您可以通过重新分配来做同样的事情。并不是说如果可以避免可变变量，我会鼓励它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T10:09:34.780

要就地进行更新，您可以使用类似 java 的方式进行更新，如下所示：

```
for( y <- 0 until cal.length; 
     row <- cal( y );
     x <- 0 until row.length ) 
{
  row( x ) = some value // here you can get the indexes through (x, y)
}

// or

for( (row, y) <- cal.zipWithIndex; 
     x <- 0 until row.length ) 
{
  row( x ) = some value // here you can get the indexes through (x, y)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:38:18.960

如果您在标准库中找不到函数，最简单的解决方案是编写您自己的函数，特别是如果它是一个简单的函数。在 Scala 中，函数作为参数并没有什么神奇的地方可以阻止你自己这样做。

隐式类甚至允许您模拟正常的调用约定。例如：

```
import scala.collection.mutable._

object Extensions {
  implicit class ExtMutSeq[T](val seq: Seq[T]) extends AnyVal {
    def transform_indexed(f: (T, Int) => T) {
      for (i <- 0 until seq.length) {
        seq(i) = f(seq(i), i)
      }
    }
  }
}

object Program extends App {
  import Extensions._
  val a = ArraySeq(1,2,3,4)
  a.transform_indexed((item, pos) => if (pos % 2 == 0) 0 else item)
  println(a)
} 
```

（根据您的行的实际类型，您可能需要调整`seq`上面的类型。）

您可以获得抽象和重用的双重好处。抽象是因为它允许您将转换的概念与索引封装在一个地方，重用是因为您只需编写一次。而且因为它是短代码，所以没有必要依赖标准库。

# c# - 如何在 C# 代码中使用现有的序列号来组合两个字段来自动递增

> ID：15922405
> 
> 赞同：0
> 
> 时间：2013-04-10T09:47:02.787
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-4.0, asp.net-3.5

我创建了一个存储过程：

```
ALTER PROCEDURE [dbo].[Budget_Details]

@Budget_Type varchar(10)
,@Item_Category_Code varchar (20)
,@Item_Description varchar(500)
,@Configurations varchar(500)
,@Project varchar(100)
,@Budgeted_Qty numeric(9,2)
,@Reason_for_Budgeted_Cost numeric(9,2)
,@Total_Cost numeric(9,2)
,@Action varchar(10)
,@B_Number varchar(10)
AS
IF @Action='ADDNEW'
BEGIN
DECLARE @Budget_Number varchar(30)
DECLARE @Budget_FY_Code varchar(10)
DECLARE @seqNo AS integer
SELECT @seqNo=ISNULL(Budget_Num,0) FROM Seq_Master
SET @seqNo=@Budget_FY_Code+@seqNo+1
SET @Budget_Number=@seqNo

PRINT @Budget_Number

 INSERT Budget_Master
 (
  Budget_Number
 ,Budget_FY_Code
 ,Budget_Type
 ,Item_Category_Code
 ,Item_Description
 ,Configurations
 ,Project
 ,Budgeted_Qty
 ,Reason_for_Budgeted_Cost
 ,Total_Cost

 )

 VALUES
 (
  @Budget_Number
 ,@Budget_FY_Code
 ,@Budget_Type
 ,@Item_Category_Code
 ,@Item_Description
 ,@Configurations
 ,@Project
 ,@Budgeted_Qty
 ,@Reason_for_Budgeted_Cost
 ,@Total_Cost

 )
     UPDATE Seq_Master SET Budget_Num=@seqNo
END
ELSE IF @Action='EDIT'
BEGIN
    UPDATE Budget_Master

    SET 
       Budget_FY_Code=@Budget_FY_Code
      ,Budget_Type=@Budget_Type
      ,Item_Category_Code=@Item_Category_Code
      ,Item_Description=@Item_Description
      ,Configurations=@Configurations
      ,Project=@Project
      ,Budgeted_Qty=@Budgeted_Qty
      ,Reason_for_Budgeted_Cost=@Reason_for_Budgeted_Cost
      ,Total_Cost=@Total_Cost

    WHERE 
    Budget_Number = @B_Number                   
END 
```

但它不起作用，没有 seqNo 在执行时生成，并且想知道如何在 C# 中为 Web 表单使用这个存储过程

# c# - 如何确定哪个控件导致 ViewState 加载失败？

> ID：15922408
> 
> 赞同：2
> 
> 时间：2013-04-10T09:47:06.670
> 
> 标签：c#, asp.net, web

我的页面面临 Viewstate 加载问题。

页面有一个登录工具来登录管理员和非管理员用户。当非管理员用户登录页面并单击启用了自动回发的复选框时，会发生奇怪的行为。（错误详情如下）

后来我发现，在左侧的导航面板中（其中包含链接）

侧边栏如下图所示

```
Security
---------
Link1
Link2
Link3

Configuration
---------
Link1
Link2 
```

如果“配置”部分下出现的内容不止于此，则会引发此异常。根据用户对 Page_Load 的权限动态删除链接（从完整列表中）。

我该如何追踪这类问题？我在 Visual Studio 中启用了所有异常，但查看哪个控件导致此问题并没有中断？

> 无法加载视图状态。正在加载视图状态的控制树必须与在先前请求期间用于保存视图状态的控制树匹配。例如，当动态添加控件时，回发期间添加的控件必须与初始请求期间添加的控件的类型和位置相匹配。

```
[HttpException (0x80004005): Failed to load viewstate.  The control tree into which viewstate is being loaded must match the control tree that was used to save viewstate during the previous request.  For example, when adding controls dynamically, the controls added during a post-back must match the type and position of the controls added during the initial request.]
   System.Web.UI.Control.LoadViewStateRecursive(Object savedState) +380
   System.Web.UI.Control.LoadChildViewStateByIndex(ArrayList childState) +144
   System.Web.UI.Control.LoadViewStateRecursive(Object savedState) +214
   System.Web.UI.Control.LoadChildViewStateByIndex(ArrayList childState) +144
   System.Web.UI.Control.LoadViewStateRecursive(Object savedState) +214
   System.Web.UI.Control.LoadChildViewStateByIndex(ArrayList childState) +144
   System.Web.UI.Control.LoadViewStateRecursive(Object savedState) +214
   System.Web.UI.Page.LoadAllState() +464
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +1729 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:57:17.657

如果您查看[本文](http://msdn.microsoft.com/en-gb/library/ms972976.aspx)中的页面循环，您可以看到视图状态在页面加载之前加载并在渲染之前保存。您正在删除视图状态加载之后的页面加载中的控件，这意味着在回发时，视图状态中的数据比页面预期的要少。尝试删除 prerender 中的控件，这应该在保存视图状态后发生，这应该可以解决您的问题。

詹姆士 ：-）

# navigation - 为什么为 Windows Phone 导航服务使用容易出错的 URI

> ID：15922409
> 
> 赞同：0
> 
> 时间：2013-04-10T09:47:09.843
> 
> 标签：navigation, windows-phone-8, uri, type-safety, navigationservice

每个 Windows Phone 开发人员都可能熟悉 NavigationService 以及使用 URI 导航到指定内容的方式，即：

```
 NavigationService.Navigate(new Uri("/Views/DetailsPage.xaml?selectedItem=" + selectedItem.ID, UriKind.Relative)); 
```

但是有没有解释为什么会这样？

使用时的安全问题有：

*   如果你重命名/移动/重构一个类，URI 将不再起作用。与属性相同。
*   如果指定的页面或属性存在，您绝对没有验证
*   即使这是页面导航的标准机制，为什么 IDE 至少不验证相对 URI 以检查类和属性是否合适？
*   为什么好像没人关心？

与例如 Android 和 iOS 相比，两者都提供了至少更多的类型安全性，还是我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:03:46.390

解释很简单：Silverlight。

Silverlight 实现基于 URI 的系统的原因很明显：该框架被设计为在 Web 浏览器内部执行，因此它使深层链接更易于实现（即：打开 Silverlight 应用程序的特定页面，具体取决于Web 浏览器中请求的 URI）。

Windows Phone 的运行时基于 Silverlight，因此仍然保留了相同的系统。请注意，这不是一件坏事。当然，如果您停在导航服务上，看起来我们正在失去类型安全性而没有任何好处。但是，如果您认为您的应用程序可以从辅助磁贴启动，或者自 WP8 以来从自定义 URI 方案启动，这一切突然变得有意义。

# url - REST 词汇表中有描述 HTTP 服务器的术语吗？

> ID：15922413
> 
> 赞同：0
> 
> 时间：2013-04-10T09:47:24.610
> 
> 标签：url, rest, vocabulary

考虑这些 REST 资源：

```
http://foo:123/bar/baz
http://foo:123/bar/boz
http://foo:123/bar/buz
http://nirwana:99/abc
http://nirwana:99/def 
```

资源组 1 到 3 以及 4 和 5 共享相同的网络端点（主机和端口）。是否有特定于 REST 的术语来表示这一点？或者这只是一种特殊的“容器”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:18:12.987

来自[统一资源标识符标准 (RFC3986)](http://www.ietf.org/rfc/rfc3986.txt)第 3 节...

```
The generic URI syntax consists of a hierarchical sequence of
components referred to as the scheme, authority, path, query, and
fragment.

  URI         = scheme ":" hier-part [ "?" query ] [ "#" fragment ]

  hier-part   = "//" authority path-abempty
              / path-absolute
              / path-rootless
              / path-empty

[...]

The following are two example URIs and their component parts:

     foo://example.com:8042/over/there?name=ferret#nose
     \_/   \______________/\_________/ \_________/ \__/
      |           |            |            |        |
   scheme     authority       path        query   fragment
      |   _____________________|__
     / \ /                        \
     urn:example:animal:ferret:nose 
```

...所以他们使用“权威”一词。

快速浏览一下最初定义 REST 概念的[Roy Fielding 的论文](http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm)似乎表明他使用了相同的术语，这并不奇怪，因为他也是 RFC3986 的作者之一。;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:38:02.527

REST 是独立于 HTTP 的架构风格。另一方面，REST 是可以部分应用于 HTTP 的架构风格。注意区别：HTTP 是协议，REST 是架构风格。所以你无法在 Roy 的论文中找到答案，但你可以使用 URI RFC 引入的术语，我会推荐这个。

# c# - 获取实例的父级

> ID：15922416
> 
> 赞同：0
> 
> 时间：2013-04-10T09:47:29.377
> 
> 标签：c#, wpf, reflection, mvvm, viewmodel

我有一个容器类`FieldContainer`，这个容器类在 a`ObservableCollection`中，它在 a 中`ViewModel`。里面`FieldContainer`有几个`Field´s`。这些`Field´s`也在一个`ObservableCollection`.

所以我们得到了这样的结构：

*   视图模型

    *   `ObservableCollection<FieldContainer>`
        *   `FieldContainer`
            *   `ObservableCollection<Field>`
                *   `Field`

我的问题是：在我的内部我想在运行时`Field`获取它的父级实例。`ViewModel`是否有可能通过反射来实现这一点？还是其他方式？

# android - Android 对话框中的空指针异常

> ID：15922418
> 
> 赞同：0
> 
> 时间：2013-04-10T09:47:34.910
> 
> 标签：android

我正在尝试从对话框中获取返回值并继续获取 NPE。我有一个在屏幕上有一个按钮的活动。单击按钮时，它会弹出一个模式，其中包含一些要填写的字段。当我尝试将信息返回到主要活动时，我的 NPE 爆炸了。这是代码：

```
public class FilterActivity extends Activity {
    final Context context = this;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_filter);

        Button addFilter = (Button) findViewById(R.id.addFilter);
        addFilter.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View view) {

                final EditText et = (EditText) findViewById(R.id.filterName);               
                LayoutInflater inflater = LayoutInflater.from(context);
                View dialog_layout = inflater.inflate(
                        R.layout.dialog_create_filter, null);
                AlertDialog.Builder db = new AlertDialog.Builder(
                        FilterActivity.this);
                db.setView(dialog_layout);

                db.setTitle("Create Filter");
                db.setPositiveButton("OK",
                        new DialogInterface.OnClickListener() {

                            @Override
                            public void onClick(DialogInterface d, int which) {     
                                et.getText().toString();
                            }
                        });
                db.show();
            }
        });
      }
    } 
```

当我尝试从中获取值时，EditText (et) 仍然为空。我究竟做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:49:33.947

你必须添加`db.findViewById(R.id.filterName);`如下

```
final EditText et = (EditText) db.findViewById(R.id.filterName); 
```

安装的

```
final EditText et = (EditText) findViewById(R.id.filterName); 
```

完整代码：

```
 LayoutInflater inflater = LayoutInflater.from(context);
                View dialog_layout = inflater.inflate(
                        R.layout.dialog_create_filter, null);
                AlertDialog.Builder db = new AlertDialog.Builder(
                        FilterActivity.this);

                db.setView(dialog_layout);
                final EditText et = (EditText) db.findViewById(R.id.filterName); 

                db.setTitle("Create Filter");
                db.setPositiveButton("OK",
                        new DialogInterface.OnClickListener() {

                            @Override
                            public void onClick(DialogInterface d, int which) {     
                                et.getText().toString();
                            }
                        });
                db.show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:58:52.963

R.id.filterName 位于哪里？

它位于 dialog_create_filter 中吗？

然后你应该只在你膨胀对话框并使用 dialog_layout 视图作为父视图之后调用 findViewById 。

还可以在这里查看： [Android“最佳实践”从对话框返回值](https://stackoverflow.com/questions/4473940/android-best-practice-returning-values-from-a-dialog)

希望这会有所帮助，亚龙

# javascript - IdealForms 删除谢谢和其他评论

> ID：15922419
> 
> 赞同：1
> 
> 时间：2013-04-10T09:47:34.800
> 
> 标签：javascript, validation

我正在使用理想形式来创建我的验证表单。

JS 包含“谢谢”“未发送信息”等信息。

下面是包含此信息的脚本，我想将其删除，以便它加载我创建的页面，上面写着谢谢......或失败......

谁能告诉我要删除哪些行才能使其正常工作？

我已经使用 php 设置了我的表单以自动重定向到相关页面，但是我正在努力将提交按钮设置为默认设置，因为脚本会覆盖 php 函数。

```
(function(e,t,n,r){"use strict";e.idealforms={},e.idealforms.filters={},e.idealforms.errors={},e.idealforms.flags={},e.idealforms.ajaxRequests={};var i={getMaxWidth:function(t){var n=0;return t.each(function(){var t=e(this).outerWidth();t>n&&(n=t)}),n},getLessVar:function(t,n){var r=e('<p class="'+t+'"></p>').hide().appendTo("body").css(n);return e("."+t).remove(),/^\d+/.test(r)?parseInt(r,10):r},getKeys:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},getObjSize:function(e){var t=0,n;for(n in e)e.hasOwnProperty(n)&&t++;return t},isFunction:function(e){return typeof e=="function"},isRegex:function(e){return e instanceof RegExp},isString:function(e){return typeof e=="string"},getByNameOrId:function(t){var n=e('[name="'+t+'"]').length?e('[name="'+t+'"]'):e("#"+t);return n.length?n:e.error('The field "'+t+"\" doesn't exist.")},getFieldsFromArray:function(t){var n=[];for(var r=0,s=t.length;r<s;r++)n.push(i.getByNameOrId(t[r]).get(0));return e(n)},convertToArray:function(e){return Object.prototype.toString.call(e)==="[object Array]"?e:[e]},getIdealType:function(e){var t=e.attr("type")||e[0].tagName.toLowerCase();return/(text|password|email|number|search|url|tel|textarea)/.test(t)&&"text"||/file/.test(t)&&"file"||/select/.test(t)&&"select"||/(radio|checkbox)/.test(t)&&"radiocheck"||/(button|submit|reset)/.test(t)&&"button"||/h\d/.test(t)&&"heading"||/hr/.test(t)&&"separator"||/hidden/.test(t)&&"hidden"},makeInput:function(e,t,n,r,i){function l(e){var t,n,r;return/:/.test(e)?(r=e.split(":"),t=r[0],n=r[1]):t=n=e,{item:t,value:n}}var s,o=[],u,a,f;/^(text|password|email|number|search|url|tel|file|hidden)$/.test(n)&&(s='<input type="'+n+'" '+'id="'+e+'" '+'name="'+e+'" '+'value="'+t+'" '+(i&&'placeholder="'+i+'"')+"/>"),/textarea/.test(n)&&(s='<textarea id="'+e+'" name="'+e+'" value="'+t+'"></textarea>');if(/select/.test(n)){o=[];for(a=0,f=r.length;a<f;a++)u=l(r[a]).item,t=l(r[a]).value,o.push('<option value="'+t+'">'+u+"</option>");s='<select id="'+e+'" name="'+e+'">'+o.join("")+"</select>"}if(/(radio|checkbox)/.test(n)){o=[];for(a=0,f=r.length;a<f;a++)u=l(r[a]).item,t=l(r[a]).value,o.push('<label><input type="'+n+'" name="'+e+'" value="'+t+'" />'+u+"</label>");s=o.join("")}return s}};e.fn.idealTabs=function(t){var n=this,r=t,s=e('<ul class="ideal-tabs-wrap"/>'),o=function(){var t=[];return n.each(function(){var n=e(this).attr("name"),r='<li class="ideal-tabs-tab"><span>'+n+"</span>"+'<i class="ideal-tabs-tab-counter ideal-tabs-tab-counter-zero">0</i>'+"</li>";t.push(r)}),e(t.join(""))}(),u={getCurIdx:function(){return o.filter(".ideal-tabs-tab-active").index()},getTabIdxByName:function(t){var n=new RegExp(t,"i"),r=o.filter(function(){return n.test(e(this).text())});return r.index()}},a={switchTab:function(e){var t=i.isString(e)?u.getTabIdxByName(e):e;o.removeClass("ideal-tabs-tab-active"),o.eq(t).addClass("ideal-tabs-tab-active"),n.hide().eq(t).show()},nextTab:function(){var e=u.getCurIdx()+1;e>o.length-1?a.firstTab():a.switchTab(e)},prevTab:function(){a.switchTab(u.getCurIdx()-1)},firstTab:function(){a.switchTab(0)},lastTab:function(){a.switchTab(o.length-1)},updateCounter:function(e,t){var n=isNaN(e)?u.getTabIdxByName(name):e,r=o.eq(n).find(".ideal-tabs-tab-counter");r.removeClass("ideal-tabs-tab-counter-zero"),t||r.addClass("ideal-tabs-tab-counter-zero"),r.html(t)}};for(var f in a)n[f]=a[f];return o.first().addClass("ideal-tabs-tab-active").end().click(function(){var t=e(this).text();n.switchTab(t)}),s.append(o).appendTo(r),n.addClass("ideal-tabs-content"),n.each(function(){var t=e(this),n=e(this).attr("name");t.data("ideal-tabs-content-name",n).removeAttr("name")}),n.hide().first().show(),n},e.fn.idealSelect=function(){return this.each(function(){var t=e(this),r=t.find("option"),s=function(){var n=e('<ul class="ideal-select '+t.attr("name")+'"/>'),i=e('<li><span class="ideal-select-title">'+r.filter(":selected").text()+"</span></li>"),s=function(){var t=[];return r.each(function(){var n=e(this);t.push('<li class="ideal-select-item">'+n.text()+"</li>")}),t}();return i.append('<ul class="ideal-select-sub">'+s.join("")+"</ul>"),n.append(i),{select:n,title:i.find(".ideal-select-title"),sub:i.find(".ideal-select-sub"),items:i.find(".ideal-select-item")}}(),o={getSelectedIdx:function(){return s.items.filter(".ideal-select-item-selected").index()},init:function(){t.css({position:"absolute",left:"-9999px"}),s.sub.hide(),s.select.insertAfter(t),s.select.css("min-width",i.getMaxWidth(s.items)),s.items.eq(r.filter(":selected").index()).addClass("ideal-select-item-selected")}(),noWindowScroll:function(e){(e.which===40||e.which===38||e.which===13)&&e.preventDefault()},focusHack:function(){setTimeout(function(){t.trigger("focus")},1)},focus:function(){s.select.addClass("ideal-select-focus"),e(n).on("keydown.noscroll",o.noWindowScroll)},blur:function(){s.select.removeClass("ideal-select-open ideal-select-focus"),e(n).off(".noscroll")},scrollIntoView:function(e){var t=s.items.filter(".ideal-select-item-selected"),n=s.items.outerHeight(),r=s.sub.outerHeight(),i=function(){var i=t.position().top+n;return e==="down"?i<=r:i>0}();i||(n=e==="down"?n:-n,s.sub.scrollTop(s.sub.scrollTop()+n))},scrollToItem:function(){var e=o.getSelectedIdx(),t=s.items.outerHeight(),n=s.items.length,r=t*n,i=t*(n-e);s.sub.scrollTop(r-i)},showMenu:function(){s.sub.fadeIn("fast"),s.select.addClass("ideal-select-open"),o.select(o.getSelectedIdx()),o.scrollToItem()},hideMenu:function(){s.sub.hide(),s.select.removeClass("ideal-select-open")},select:function(e){s.items.removeClass("ideal-select-item-selected"),s.items.eq(e).addClass("ideal-select-item-selected")},change:function(e){var n=s.items.eq(e).text();o.select(e),s.title.text(n),r.eq(e).prop("selected",!0),t.trigger("change")},keydown:function(t){var n=o.getSelectedIdx(),i=s.select.is(".ideal-select-menu"),u=s.select.is(".ideal-select-open"),a={9:function(){i&&(o.blur(),o.hideMenu())},13:function(){i&&(u?o.hideMenu():o.showMenu()),o.change(n)},27:function(){i&&o.hideMenu()},40:function(){n<r.length-1&&(u?o.select(n+1):o.change(n+1)),o.scrollIntoView("down")},38:function(){n>0&&(u?o.select(n-1):o.change(n-1)),o.scrollIntoView("up")},"default":function(){var n=String.fromCharCode(t),r=s.items.filter(function(){return/^\w+$/i.test(n)&&(new RegExp("^"+n,"i")).test(e(this).text())}),i=r.length,a=s.select.data("counter")+1||0,f=s.select.data("key")||t,l=r.eq(a).index();if(!i)return!1;f===t?a<i?s.select.data("counter",a):(s.select.data("counter",0),l=r.eq(0).index()):(s.select.data("counter",0),l=r.eq(0).index()),u?o.select(l):o.change(l),s.select.data("key",t),o.scrollToItem(),o.focusHack()}};a[t]?a[t]():a["default"]()}},u={focus:o.focus,"blur.menu":function(){o.blur(),o.hideMenu()},"blur.list":function(){o.blur()},keydown:function(e){o.keydown(e.which)},"clickItem.menu":function(){o.change(e(this).index()),o.hideMenu()},"clickItem.list":function(){o.change(e(this).index())},"clickTitle.menu":function(){o.focus(),o.showMenu(),t.trigger("focus")},"hideOutside.menu":function(){t.off("blur.menu"),e(n).on("mousedown.ideal",function(r){e(r.target).closest(s.select).length?o.focusHack():(e(n).off("mousedown.ideal"),t.on("blur.menu",u["blur.menu"]))})},"mousedown.list":function(){o.focusHack()}},a=function(){s.select.removeClass("ideal-select-menu ideal-select-list"),t.off(".menu .list"),s.items.off(".menu .list"),s.select.off(".menu .list"),s.title.off(".menu .list")};s.select.on("menu",function(){a(),s.select.addClass("ideal-select-menu"),o.hideMenu(),t.on({"blur.menu":u["blur.menu"],"focus.menu":u.focus,"keydown.menu":u.keydown}),s.select.on("mousedown.menu",u["hideOutside.menu"]),s.items.on("click.menu",u["clickItem.menu"]),s.title.on("click.menu",u["clickTitle.menu"])}),s.select.on("list",function(){a(),s.select.addClass("ideal-select-list"),o.showMenu(),t.on({"blur.list":u["blur.list"],"focus.list":u.focus,"keydown.list":u.keydown}),s.select.on("mousedown.list",u["mousedown.list"]),s.items.on("mousedown.list",u["clickItem.list"])}),t.keydown(function(e){e.which!==9&&e.preventDefault()}),s.select.on("reset",function(){o.change(0)}),s.select.trigger("menu")})},e.fn.idealRadioCheck=function(){return this.each(function(){var t=e(this),n=e("<span/>");n.addClass("ideal-"+(t.is(":checkbox")?"check":"radio")),t.is(":checked")&&n.addClass("checked"),n.insertAfter(t),t.parent("label").addClass("ideal-radiocheck-label").attr("onclick",""),t.css({position:"absolute",left:"-9999px"}),t.on({change:function(){var t=e(this);t.is('input[type="radio"]')&&t.parent().siblings("label").find(".ideal-radio").removeClass("checked"),n.toggleClass("checked",t.is(":checked"))},focus:function(){n.addClass("focus")},blur:function(){n.removeClass("focus")},click:function(){e(this).trigger("focus")}})})},function(e){var t=typeof e("<input/>")[0].multiple!="undefined",n=/msie/i.test(navigator.userAgent);e.fn.idealFile=function(){return this.each(function(){var r=e(this).addClass("ideal-file"),i=e('<div class="ideal-file-wrap">'),s=e('<input type="text" class="ideal-file-filename" />'),o=e('<button type="button" class="ideal-file-upload">Open</button>'),u=e('<label class="ideal-file-upload" for="'+r[0].id+'">Open</label>');r.css({position:"absolute",left:"-9999px"}),i.append(s,n?u:o).insertAfter(r),r.attr("tabIndex",-1),o.attr("tabIndex",-1),o.click(function(){r.focus().click()}),r.change(function(){var e=[],n,i;if(t){n=r[0].files;for(var o=0,u=n.length;o<u;o++)e.push(n[o].name);i=e.join(", ")}else i=r.val().split("\\").pop();s.val(i).attr("title",i)}),s.on({focus:function(){r.trigger("change")},blur:function(){r.trigger("blur")},keydown:function(e){if(e.which===13)n||r.trigger("click");else{if(e.which!==8&&e.which!==46){if(e.which===9)return;return!1}r.replaceWith(r=r.val("").clone(!0)),r.trigger("change"),s.val("")}}})})}}(jQuery),e.idealforms.errors={required:"This field is required.",number:"Must be a number.",digits:"Must be only digits.",name:"Must be at least 3 characters long, and must only contain letters.",username:"Must be at between 4 and 32 characters long and start with a letter. You may use letters, numbers, underscores, and one dot (.)",pass:"Must be at least 6 characters long, and contain at least one number, one uppercase and one lowercase letter.",strongpass:"Must be at least 8 characters long and contain at least one uppercase and one lowercase letter and one number or special character.",email:"Must be a valid e-mail address. <em>(e.g. user@gmail.com)</em>",phone:"Must be a valid US phone number. <em>(e.g. 555-123-4567)</em>",zip:"Must be a valid US zip code. <em>(e.g. 33245 or 33245-0003)</em>",url:"Must be a valid URL. <em>(e.g. www.google.com)</em>",minChar:"Must be at least <strong>{0}</strong> characters long.",minOption:"Check at least <strong>{0}</strong> options.",maxChar:"No more than <strong>{0}</strong> characters long.",maxOption:"No more than <strong>{0}</strong> options allowed.",range:"Must be a number between {0} and {1}.",date:"Must be a valid date. <em>(e.g. {0})</em>",dob:"Must be a valid date of birth.",exclude:'"{0}" is not available.',excludeOption:"{0}",equalto:'Must be the same value as <strong>"{0}"</strong>',extension:'File(s) must have a valid extension. <em>(e.g. "{0}")</em>',ajaxSuccess:"<strong>{0}</strong> is not available.",ajaxError:"Server error..."};var s=function(){var t={required:{regex:/.+/,error:e.idealforms.errors.required},number:{regex:function(e,t){return!isNaN(t)},error:e.idealforms.errors.number},digits:{regex:/^\d+$/,error:e.idealforms.errors.digits},name:{regex:/^[A-Za-z]{3,}$/,error:e.idealforms.errors.name},username:{regex:/^[a-z](?=[\w.]{3,31}$)\w*\.?\w*$/i,error:e.idealforms.errors.username},pass:{regex:/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}/,error:e.idealforms.errors.pass},strongpass:{regex:/(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/,error:e.idealforms.errors.strongpass},email:{regex:/[^@]+@[^@]/,error:e.idealforms.errors.email},phone:{regex:/^[2-9]\d{2}-\d{3}-\d{4}$/,error:e.idealforms.errors.phone},zip:{regex:/^\d{5}$|^\d{5}-\d{4}$/,error:e.idealforms.errors.zip},url:{regex:/^(?:(ftp|http|https):\/\/)?(?:[\w\-]+\.)+[a-z]{2,6}([\:\/?#].*)?$/i,error:e.idealforms.errors.url},min:{regex:function(t,n){var r=t.input,i=t.userOptions.data.min,s=r.is('[type="checkbox"], [type="radio"]');return s?(this.error=e.idealforms.errors.minOption.replace("{0}",i),r.filter(":checked").length>=i):(this.error=e.idealforms.errors.minChar.replace("{0}",i),n.length>=i)}},max:{regex:function(t,n){var r=t.input,i=t.userOptions.data.max,s=r.is('[type="checkbox"], [type="radio"]');return s?(this.error=e.idealforms.errors.maxOption.replace("{0}",i),r.filter(":checked").length<=i):(this.error=e.idealforms.errors.maxChar.replace("{0}",i),n.length<=i)}},range:{regex:function(t,n){var r=t.userOptions.data.range,i=+n;return this.error=e.idealforms.errors.range.replace("{0}",r[0]).replace("{1}",r[1]),i>=r[0]&&i<=r[1]}},date:{regex:function(t,n){var r=t.userOptions.data&&t.userOptions.data.date?t.userOptions.data.date:"mm/dd/yyyy",i=/[^mdy]/.exec(r)[0],s=r.split(i),o=n.split(i),u=function(e,t){var n,r,i;for(var s=0,o=t.length;s<o;s++)/m/.test(t[s])&&(n=e[s]),/d/.test(t[s])&&(r=e[s]),/y/.test(t[s])&&(i=e[s]);return n>0&&n<13&&i&&i.length===4&&r>0&&r<=(new Date(i,n,0)).getDate()};return this.error=e.idealforms.errors.date.replace("{0}",r),u(o,s)}},dob:{regex:function(n,r){var i=n.userOptions.data&&n.userOptions.data.dob?n.userOptions.data.dob:"mm/dd/yyyy",s={input:n.input,userOptions:{data:{date:i}}},o=t.date.regex(s,r),u=/\d{4}/.exec(r),a=(new Date).getFullYear(),f=a-100;return this.error=e.idealforms.errors.dob,o&&u>=f&&u<=a}},exclude:{regex:function(t,n){var r=t.input,i=t.userOptions.data.exclude,s=r.is('[type="checkbox"], [type="radio"], select');return this.error=s?e.idealforms.errors.excludeOption.replace("{0}",n):this.error=e.idealforms.errors.exclude.replace("{0}",n),e.inArray(n,i)===-1}},equalto:{regex:function(t,n){var r=e(t.userOptions.data.equalto),i=t.input,s=r.attr("name")||r.attr("id"),o=r.parents(".ideal-field").filter(function(){return e(this).data("ideal-isvalid")===!0}).length;return o?(this.error=e.idealforms.errors.equalto.replace("{0}",s),i.val()===r.val()):!1}},extension:{regex:function(t,n){var r=t.input[0].files||[{name:n}],i=t.userOptions.data.extension,s=new RegExp("\\."+i.join("|")+"$","i"),o=!1;for(var u=0,a=r.length;u<a;u++)o=s.test(r[u].name);return this.error=e.idealforms.errors.extension.replace("{0}",i.join('", "')),o}},ajax:{regex:function(t,n,r){var i=this,s=t.input,o=t.userOptions,u=s.attr("name"),a=s.parents(".ideal-field"),f=!1,l=o.errors&&o.errors.ajax;i.error={},i.error.success=l&&l.success?l.success:e.idealforms.errors.ajaxSuccess.replace("{0}",n),i.error.fail=l&&l.error?l.error:e.idealforms.errors.ajaxError;var c={};c[u]=e.trim(n);var h=t.userOptions.data.ajax,p={type:"post",dataType:"json",data:c,success:function(e,t,n){console.log(e),r(i.error.success,!0),s.data({"ideal-ajax-resp":e,"ideal-ajax-error":i.error.success}),s.trigger("change"),a.removeClass("ajax"),h._success&&h._success(e,t,n)},error:function(e,t,n){t!=="abort"&&(r(i.error.fail,!1),s.data("ideal-ajax-error",i.error.fail),a.removeClass("ajax"),h._error&&h._error(e,t,n))}};e.extend(p,h),s.removeData("ideal-ajax-error"),s.removeData("ideal-ajax-resp"),a.addClass("ajax"),e.idealforms.ajaxRequests[u]=e.ajax(p)}}};return t},o={inputs:{},customFilters:{},customFlags:{},globalFlags:"",onSuccess:function(e){alert("Thank you...")},onFail:function(){alert("Invalid!")},responsiveAt:"auto",disableCustom:""},u=function(t,n){var r=this;r.$form=e(t),r.opts=e.extend({},o,n),r.$tabs=r.$form.find("section"),e.extend(e.idealforms.filters,s()),r._init()};e.fn.idealforms=function(t){return this.each(function(){e.data(this,"idealforms")||e.data(this,"idealforms",new u(this,t))})};var a={fieldWidth:i.getLessVar("ideal-field-width","width")};e.extend(u.prototype,{_init:function(){var n=this,r=n.opts,i=n._getFormElements();n.$form.css("visibility","visible").addClass("ideal-form").attr("novalidate","novalidate"),i.inputs.add(i.headings).add(i.separators).each(function(){n._doMarkup(e(this))});if(n.$tabs.length){var s=e('<div class="ideal-wrap ideal-tabs ideal-full-width"/>');n.$form.prepend(s),n.$tabs.idealTabs(s)}jQuery.ui&&(e.datepicker._checkOffset=function(e,t,n){return t}),n.$form.find("[data-ideal]").each(function(){var t=r.inputs[this.name];r.inputs[this.name]=t||{filters:e(this).data("ideal")}}),r.responsiveAt&&(e(t).resize(function(){n._responsive()}),n._responsive()),n.$form.on({keydown:function(e){e.which===13&&e.target.nodeName!=="TEXTAREA"&&e.preventDefault()},submit:function(e){n.isValid()?r.onSuccess(e):(e.preventDefault(),r.onFail(),n.focusFirstInvalid())}}),n._adjust(),n._attachEvents(),n.fresh()},_getFormElements:function(){return{inputs:this.$form.find("input, select, textarea, :button"),labels:this.$form.find("div > label:first-child"),text:this.$form.find('input:not([type="checkbox"], [type="radio"], [type="submit"]), textarea'),select:this.$form.find("select"),radiocheck:this.$form.find('input[type="radio"], input[type="checkbox"]'),buttons:this.$form.find(":button"),file:this.$form.find('input[type="file"]'),headings:this.$form.find("h1, h2, h3, h4, h5, h6"),separators:this.$form.find("hr"),hidden:this.$form.find("input:hidden")}},_getUserInputs:function(){return this.$form.find('[name="'+i.getKeys(this.opts.inputs).join('"], [name="')+'"]')},_getTab:function(t){var n=this,r=!isNaN(t);return r?n.$tabs.eq(t):n.$tabs.filter(function(){var n=new RegExp(t,"i");return n.test(e(this).data("ideal-tabs-content-name"))})},_getCurrentTabIdx:function(){return this.$tabs.index(this.$form.find(".ideal-tabs-content:visible"))},_updateTabsCounter:function(){var e=this;e.$tabs.each(function(t){var n=e.getInvalidInTab(t).length;e.$tabs.updateCounter(t,n)})},_adjust:function(){var t=this,n=t.opts,r=t._getFormElements(),s=t._getCurrentTabIdx();r.inputs.attr("autocomplete","off"),t.$tabs.length&&t.$tabs.show();var o=r.labels;o.removeAttr("style").width(i.getMaxWidth(o)),t.$tabs.length?this.$tabs.each(function(){e(this).find(".ideal-heading:first").addClass("first-child")}):t.$form.find(".ideal-heading:first").addClass("first-child"),t._setDatepicker(),t.$tabs.length&&(t.$tabs.hide(),t.switchTab(s))},_setDatepicker:function(){var t=this.opts,n=this.$form.find("input.datepicker");jQuery.ui&&n.length&&(n.each(function(){var n=t.inputs[this.name],r=n&&n.data&&n.data.date,i=r?r.replace("yyyy","yy"):"mm/dd/yy";e(this).datepicker({dateFormat:i,beforeShow:function(t){e(t).addClass("open")},onChangeMonthYear:function(){var t=e(this),n=t.outerWidth();setTimeout(function(){t.datepicker("widget").css("width",n)},1)},onClose:function(){e(this).removeClass("open")}})}),n.on("focus keyup",function(){var t=e(this),n=t.outerWidth();t.datepicker("widget").css("width",n)}),n.parent().siblings(".ideal-error").addClass("hidden"))},_doMarkup:function(t){var n=this.opts,r=i.getIdealType(t),s=e('<span class="ideal-field"/>'),o=e('<span class="ideal-error" />'),u=e('<i class="ideal-icon ideal-icon-valid" />'),a=e('<i class="ideal-icon ideal-icon-invalid"/>').click(function(){e(this).parent().find("input:first, textarea, select").focus()});t.closest("div").addClass("ideal-wrap").children("label:first-child").addClass("ideal-label");var f={_defaultInput:function(){t.wrapAll(s).after(u,a).parent().after(o)},text:function(){f._defaultInput()},radiocheck:function(){var e=t.parents(".ideal-field").length;e||(t.parent().nextAll().andSelf().wrapAll(s.addClass("ideal-radiocheck")),t.parents(".ideal-field").append(u,a).after(o)),/radiocheck/.test(n.disableCustom)||t.idealRadioCheck()},select:function(){f._defaultInput(),/select/.test(n.disableCustom)||t.idealSelect()},file:function(){f._defaultInput(),/file/.test(n.disableCustom)||t.idealFile()},button:function(){/button/.test(n.disableCustom)||t.addClass("ideal-button")},hidden:function(){t.closest("div").addClass("ideal-hidden")},heading:function(){t.closest("div").addClass("ideal-full-width"),t.parent().children().wrapAll('<span class="ideal-heading"/>')},separator:function(){t.closest("div").addClass("ideal-full-width"),t.wrapAll('<div class="ideal-separator"/>')}};f[r]?f[r]():e.noop(),o.add(u).add(a).hide()},_validate:function(t,n){function g(){p.removeClass("valid invalid").removeData("ideal-isvalid"),d.add(v).add(m).hide()}function y(e,t){g(),t?m.show():v.show(),p.addClass(t?"valid":"invalid"),p.data("ideal-isvalid",t),t||d.html(e).toggle(p.is(".ideal-field-focus"))}var r=this,s=this.opts,o=s.inputs[t.attr("name")],u=o.filters&&o.filters.split(/\s/),a=t.attr("name"),f=t.val(),l=e.idealforms.ajaxRequests[a],c=t.is('[type="checkbox"], [type="radio"]'),h={input:c?r.$form.find('[name="'+a+'"]'):t,userOptions:o},p=t.parents(".ideal-field"),d=p.siblings(".ideal-error"),v=c?t.parent().siblings(".ideal-icon-invalid"):t.siblings(".ideal-icon-invalid"),m=c?t.parent().siblings(".ideal-icon-valid"):t.siblings(".ideal-icon-valid"),b=t.data("ideal-value")||0;t.data("ideal-value",f);if(n.type==="keyup"&&f===b)return!1;u?e.each(u,function(r,s){var u=e.idealforms.filters[s],a=o.errors&&o.errors[s],c="";if(!f&&s!=="required")return g(),!1;if(u){n.type==="keyup"&&l&&(l.abort(),p.removeClass("ajax"));if(s==="ajax"){y(c,!1),d.hide();if(n.type==="keyup")u.regex(h,f,y);else{var v=t.data("ideal-ajax-error");v&&y(v,t.data("ideal-ajax-resp")||!1)}}else{var m=i.isRegex(u.regex)&&u.regex.test(f)||i.isFunction(u.regex)&&u.regex(h,f);c=a||u.error,y(c,m);if(!m)return!1}}}):g();var w=function(){var t=o.flags&&o.flags.split(" ")||[];return s.globalFlags&&e.each(s.globalFlags.split(),function(e,n){t.push(n)}),t}();w.length&&e.each(w,function(r,i){var s=e.idealforms.flags[i];s&&s(t,n.type)}),r.$tabs.length&&r._updateTabsCounter(r._getCurrentTabIdx())},_attachEvents:function(){var t=this;t._getUserInputs().on("keyup change focus blur",function(n){var r=e(this),i=r.parents(".ideal-field"),s=r.is("input[type=file]");(n.type==="focus"||s&&n.type==="change")&&i.addClass("ideal-field-focus"),n.type==="blur"&&i.removeClass("ideal-field-focus"),t._validate(r,n)})},_responsive:function(){var n=this._getFormElements(),r=a.fieldWidth+n.labels.outerWidth(),i=n.labels.filter(function(){return e(this).html()==="&nbsp;"}),s=this.$form.find(".ideal-select");this.opts.responsiveAt==="auto"?this.$form.toggleClass("stack",this.$form.width()<r):this.$form.toggleClass("stack",e(t).width()<this.opts.responsiveAt);var o=this.$form.is(".stack");i.toggle(!o),s.trigger(o?"list":"menu");var u=this.$form.find("input.hasDatepicker");u.length&&u.datepicker("hide")}}),e.extend(u.prototype,{getInvalid:function(){return this.$form.find(".ideal-field").filter(function(){return e(this).data("ideal-isvalid")===!1})},getInvalidInTab:function(t){return this._getTab(t).find(".ideal-field").filter(function(){return e(this).data("ideal-isvalid")===!1})},isValid:function(){return!this.getInvalid().length},isValidField:function(e){var t=i.getByNameOrId(e);return t.parents(".ideal-field").data("ideal-isvalid")===!0},focusFirst:function(){return this.$tabs.length?this.$tabs.filter(":visible").find(".ideal-field:first").find("input:first, select, textarea").focus():this.$form.find(".ideal-field:first").find("input:first, select, textarea").focus(),this},focusFirstInvalid:function(){var e=this.getInvalid().first().find("input:first, select, textarea"),t=e.parents(".ideal-tabs-content").data("ideal-tabs-content-name");return this.$tabs.length&&this.switchTab(t),e.focus(),this},switchTab:function(e){return this.$tabs.switchTab(e),this},nextTab:function(){return this.$tabs.nextTab(),this},prevTab:function(){return this.$tabs.prevTab(),this},firstTab:function(){return this.$tabs.firstTab(),this},lastTab:function(){return this.$tabs.lastTab(),this},fresh:function(){return this._getUserInputs().change().parents(".ideal-field").removeClass("valid invalid"),this},freshFields:function(t){return t=i.convertToArray(t),e.each(t,function(e){var n=i.getByNameOrId(t[e]);n.change().parents(".ideal-field").removeClass("valid invalid")}),this},reload:function(){return this._adjust(),this._attachEvents(),this},reset:function(){var e=this._getFormElements();return e.text.val(""),e.radiocheck.removeAttr("checked"),e.select.find("option").first().prop("selected",!0),this.$form.find(".ideal-select").trigger("reset"),this.$tabs.length&&this.firstTab(),this.focusFirst().fresh(),this},resetFields:function(t){t=i.convertToArray(t);var n=this._getFormElements();return e.each(t,function(e,t){var n=i.getByNameOrId(t),r=i.getIdealType(n);(r==="text"||r==="file")&&n.val(""),r==="radiocheck"&&n.removeAttr("checked"),r==="select"&&(n.find("option").first().prop("selected",!0),n.next(".ideal-select").trigger("reset")),n.change()}),this.freshFields(t),this},toggleFields:function(t){t=i.convertToArray(t);var n=this,r=i.getFieldsFromArray(t);return r.each(function(){var t=e(this),r=t.attr("name")||t.attr("id"),i=n.opts.inputs[r],s=i&&i.filters,o=t.data("ideal-filters")||"";t.data("ideal-filters",s),t.closest(".ideal-wrap").toggle(),n.setFieldOptions(r,{filters:o})}),this},setOptions:function(t){return e.extend(!0,this.opts,t),this.reload().fresh(),this},setFieldOptions:function(t,n){return e.extend(!0,this.opts.inputs[t],n),this.reload().freshFields([t]),this},addFields:function(t){function s(t){var s=t.name,o={filters:t.filters||"",data:t.data||{},errors:t.errors||{},flags:t.flags||""},u=t.label||"",a=t.type,f=t.list||[],l=t.placeholder||"",c=t.value||"",h=e("<div><label>"+u+":</label>"+i.makeInput(s,c,a,f,l)+"</div>"),p=h.find("input, select, textarea, :button");o.filters&&(n.opts.inputs[s]=o),n._doMarkup(p),t.addAfter?h.insertAfter(e(i.getByNameOrId(t.addAfter)).parents(".ideal-wrap")):t.addBefore?h.insertBefore(e(i.getByNameOrId(t.addBefore)).parents(".ideal-wrap")):t.appendToTab?h.insertAfter(n._getTab(t.appendToTab).find(".ideal-wrap:last-child")):h.insertAfter(n.$form.find(".ideal-wrap").last()),r.push(s)}t=i.convertToArray(t);var n=this,r=[];return e.each(t,function(e,t){s(t)}),n.reload(),n.freshFields(r),n._responsive(),this},removeFields:function(e){e=i.convertToArray(e);var t=i.getFieldsFromArray(e);return t.parents(".ideal-wrap").remove(),this.reload(),this}})})(jQuery,window,document); 
```

我将不胜感激你们可以提供的任何帮助。

干杯!

# python - 来自分离的 QProcess 的信号

> ID：15922431
> 
> 赞同：0
> 
> 时间：2013-04-10T09:47:58.627
> 
> 标签：python, qt4, pyqt4

我正在尝试启动分离的 QProcess 并在它完成后做一些事情。例如腻子隧道。我有课来保存有关这两个过程的信息：

```
 class TunnelInfo(object):
    def __init__(self,tunnelprocess,mainprocess):
        self.tp=tunnelprocess
        self.mp=mainprocess
        print "init"
        self.mp.finished.connect(self.killTunnel)
    def killTunnel(self,a,b): 
        print "killing tunnel"
        print self.tp
        self.tp.kill() 
```

然后我正在尝试执行腻子：

```
prcs=QtCore.QProcess(self.parent)
prcs.startDetached(self.conf.putty_path, ['-pw',d.password,'-l',d.login,d.ip])
ti=self.TunnelInfo(tp,prcs) 
```

腻子启动正常，但没有收到信号......我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:52:57.187

我发现某个地方 startDetached 是火然后忘记。我已经用 QThread 解决了它：

```
 class ConnectionThread(QtCore.QThread):
    def __init__(self,parent,command,commandargs,tunnelthread=None):
       super(ConnectionThread,self).__init__(parent.parent)
       self.command=command
       self.commandargs=commandargs
       self.tunnelthread=tunnelthread
       self.parent=parent
       print command,commandargs
       self.finished.connect(self.killtunnel)
    def run(self):
       self.process=QtCore.QProcess()
       self.process.start(self.command,self.commandargs)
       self.process.waitForFinished(msecs=3000000)
    def killtunnel(self):
       if self.tunnelthread is not None:
          self.tunnelthread.process.kill()
          self.tunnelthread.exit(0)
          print "killed!" 
```

# java - 客户端-服务器（从服务器到客户端的文件传输）

> ID：15922432
> 
> 赞同：-1
> 
> 时间：2013-04-10T09:48:03.873
> 
> 标签：java

这是一个文件传输程序。客户端发送一个文件名，然后如果该文件存在，则服务器将文件发送给客户端。我希望服务器在文件不存在时发送类似“文件不存在”的消息。

```
public static void main(String[] args) {

    Socket socket = null;
String server = "localhost";
    DataInputStream in;
BufferedReader input;
    PrintWriter output;
int port = 1500;

    File file;
    file = new File("G:\\o.txt");
    try{
    if(!file.exists())
         file.createNewFile();
    }
    catch(Exception e){
        System.out.println("error1");
    }

try {
    socket = new Socket(server, port);
    System.out.println("Connected To Server With This Ip" + socket.getInetAddress() + " On This Port :" + socket.getPort());
}
catch (UnknownHostException e) {
    System.out.println(e);

}
catch (IOException e) {
    System.out.println(e);

}

try {
    output = new PrintWriter(socket.getOutputStream(),true);
    input = new BufferedReader(new InputStreamReader(socket.getInputStream()));

    String filewanted="H:\\\\o.txt";
    output.println(filewanted);

    in=new DataInputStream(socket.getInputStream()); 

        int flag=0;  
        FileWriter fw = new FileWriter(file);
        BufferedWriter bw = new BufferedWriter(fw); 
        int b=in.readInt();
        for(int i=1;i<=b;i++)
           {
               String message= input.readLine();
                bw.write(message);
                bw.newLine();

                flag++;
             }
               bw.close();
               if(flag!=0){
                     System.out.println("File Was Transferd Successfuly!");   

               }

      }

catch (IOException e) {
    System.out.println(e);
}

try {
    socket.close();
}
catch (IOException e) {
    System.out.println(e);
}
}

//server

 public static void main(String[] args) {

ServerSocket serversocket;
    DataOutputStream out;
PrintWriter output;
    BufferedReader input;
    String linesent;
    int lines = 0;
    int port=1500;

try {

  serversocket = new ServerSocket(port);
  System.out.println("Server Waiting For Client On Port " + serversocket.getLocalPort()+"...");

  while(true) {
    Socket socket= serversocket.accept();
    System.out.println("Connection Accepted With This Ip: " +socket.getInetAddress() +" On This Port :" + socket.getPort());
    input = new BufferedReader(new InputStreamReader(socket.getInputStream()));
            output = new PrintWriter(socket.getOutputStream(),true);

           String f=input.readLine();
           File file;
           file = new File(f);

             BufferedReader reader = new BufferedReader(new FileReader(f));
             if(file.exists())
             {
               while (reader.readLine() != null)
                    lines++;
               reader.close();
               out=new DataOutputStream(socket.getOutputStream());
               out.writeInt(lines);
               Scanner scanner=new Scanner(file);
               while(scanner.hasNext()) 
                 {
                    linesent=scanner.nextLine();
                    output.println(linesent);
                 }         

             }
            else {

                throw new FileNotFoundException(f);

            }

    try {
        socket.close();
        System.out.println("Connection closed by client.");
    }
    catch (IOException e) {
        System.out.println(e);
    }

    }
    }

catch (IOException e) {
    System.out.println(e);
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:54:20.083

那你为什么不直接替换：

```
 throw new FileNotFoundException(f); 
```

经过

```
output.println("file not exist"); 
```

# .htaccess - 如果单独的网站页面都是通过index.php解析的，谷歌会注册吗

> ID：15922443
> 
> 赞同：3
> 
> 时间：2013-04-10T09:48:29.193
> 
> 标签：.htaccess, seo, search-engine, google-search

我正在为我们公司开发一个新的 CMS，为了方便和简洁的代码，我决定在根目录中只包含一个文件 index.php。我们使用搜索引擎友好的 URL 以及唯一 ID 来加载页面。使用 SEF URL 谷歌将单独索引页面，即使它们都是通过 index.php 解析的。

但是，有时我们的客户端使用 Windows 或关闭了 mod_rewrite 的主机，因此我们不能使用 SEF URL。在这种情况下，我们的 URL 看起来像[http://website.com/?pid=2](http://website.com/?pid=2)

在这种情况下，Google 还会为每个页面编制索引吗？它仍然会看到每个页面的单独页面标题和描述，以及不同的内容和布局。但是 URL 一直指向 index.php，最后只是一些 GET 数据。我不确定是否所有页面都会被编入索引。

有人可以回答这个问题，因为如果 Google 不会列出没有 SEF URL 的页面，我不想构建一个通过 index.php 解析所有内容的 CMS？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:58:51.697

如果您希望您的页面被 Google 索引，最好的办法是包含一个引用它们的站点地图。这样，Google 就知道要查找它们并将它们列为单独的页面。

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156184](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156184)

这允许您包含仅由 GET 变量引用的页面，方法是将它们作为单独的条目包含在 XML 中：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <urlset xmlns="http://www.google.com/schemas/sitemap/0.90">
      <url>
        <loc>http://www.example.com/</loc>
        <lastmod>2013-04-27T23:55:42+01:00</lastmod>
        <changefreq>daily</changefreq>
        <priority>0.5</priority>
      </url>
      <url>
        <loc>http://www.example.com/?id=12</loc>
        <lastmod>2013-04-26T17:24:27+01:00</lastmod>
        <changefreq>daily</changefreq>
        <priority>0.5</priority>
      </url>
   </urlset> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:54:29.933

当然。搜索 google `site:www.example.com`，其中 example.com 是使用此方法的已知站点。你会看到谷歌相应地索引它们

# vbscript - 如何获取与文件中特定文本匹配的行号

> ID：15922453
> 
> 赞同：0
> 
> 时间：2013-04-10T09:49:06.983
> 
> 标签：vbscript

有人知道通过使用 vbs 获取与文件中特定文本匹配的行号的方法吗？（文本作为参数发送）。例如，我想说这个文本在第 11 行。

请不要考虑文本在文件中多次出现。

感谢您的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:22:00.103

当遍历 TextStream 的行时，它的 .Line 属性

> 返回 TextStream 文件中当前行号的只读属性。

保存所需的信息。

# objective-c - 如何正确设置分组 TableView 的背景图像？

> ID：15922454
> 
> 赞同：6
> 
> 时间：2013-04-10T09:49:08.283
> 
> 标签：objective-c, uitableview

我是 iPhone 开发的新手。

我知道可能有与我的问题相关的答案，但没有一个对我有帮助。

根据标题，我有 UITableView 样式分组。我想设置背景图像，但无法正确设置。

但问题是，正如我的截图中所描述的那样。

![在此处输入图像描述](https://i.stack.imgur.com/hN2ai.png)

好吧，我只想显示由（**分组**）描述`cells`的图像视图区域`UITableView`

 ****这是我的代码：**

```
self.tblView = [[UITableView alloc]initWithFrame:CGRectMake(0, 125, 320, 320) style:UITableViewStyleGrouped];

    UIImageView *bgTableImageView = [[UIImageView alloc]initWithFrame:CGRectMake(0,0, 320, 320)];
    bgTableImageView.image = [UIImage imageNamed:@"bgImage.png"];

    self.tblView.backgroundColor=[UIColor clearColor];
    [self.tblView setBackgroundView:bgTableImageView];

    //self.tblView.backgroundView = nil;
   // self.tblView.opaque = NO;
    //self.tblView.bounces = NO;
    //self.tblView.scrollEnabled = YES;
    self.tblView.delegate=self;
    self.tblView.dataSource=self;
    self.tblView.separatorColor = [UIColor darkGrayColor];
    self.tblView.separatorStyle = UITableViewCellSeparatorStyleSingleLine;
    [self.view addSubview:self.tblView]; 
```

所有其他工作正常且正确，我只有如何设置背景图像的问题`UITableViewStyleGrouped`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T10:23:03.513

尝试这个：

```
UIImageView *av = [[UIImageView alloc] initWithFrame:CGRectMake(20, 20, 277, 58)];
av.backgroundColor = [UIColor clearColor];
av.opaque = NO;
av.image = [UIImage imageNamed:@"categorytab1.png"];
cell.backgroundView = av; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T11:45:43.837

首先，一些信息表是如何工作的：

1.  `UITableView`有背景。这就是你在细胞后面看到的。
2.  每个单元格都有三个特殊视图：`contentView`、`backgroundView`、`selectedBackgroundView`。
3.  显示在单元格内容的`backgroundView`下方，当单元格被选中时，`selectedBackgroundView`会被使用。
4.  通常，您的所有内容都应该转到`contentsView`. 背景与内容的分离使表格能够正确地为未选择/选择的过渡设置动画。当单元格进入编辑模式时也很重要 - 内容被缩小/移动并且编辑控件（例如删除按钮或单元格选择）可以独立显示在内容上。
5.  单元格还直接包含分隔视图（通常在单元格底部有 1 或 2px 高的视图，具体取决于`separatorStyle`）。这就是为什么单元格总是比它的`contentsView`.

其次，关于分组表如何工作的一些信息。

1.  该表具有特殊的默认背景。您可以使用`backgroundView`和删除/更改它`backgroundColor`。
2.  分组表视图中的单元格具有较小的`contentView`. 该单元格的宽度仍与整个表格相同，但在`contentView`左侧和右侧有一个偏移量（在 iPhone 上大约为 10 个点）。
3.  已`backgroundView`修改并包括绘制边界的图层，具体取决于单元格位置（第一个、最后一个和中间单元格不同）。边框具有表格指定的颜色`separatorColor`。

一切都可以在您的代码中进行修改！

如何删除边框的最简单方法之一是设置`separatorColor`为`[UIColor clearColor]`. 这将删除单元格分隔符，但您可以添加自己的分隔符，例如

```
cell = ...
UIView* separator = [[UIView alloc] init];
separator.backgroundColor = ...
separator.frame = CGRectMake(0.0f, table.bounds.size.width, table.rowHeight - 1.0f, 1.0f);
separator.autoresizingMask = (UIViewAutoresizingMaskFlexibleTopMargin | UIViewAutoresizingMaskFlexibleWidth);
[cell addSubview:separator]; //note we are adding it directly to the cell, not to contentsView 
```

您还可以使用图像 ( `UIImageView`) 作为分隔符，而不是单色视图。

另一种方法是为每个单元格设置`backgroundView`为。`nil`

实际上，您可以完全忽略`contentsView`并直接将所有内容添加到单元格中。然后，您可以自定义以下单元格方法以在其状态更改时更新您的单元格。

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated {
    //update the cell text colors, backgrounds etc for the selected/not selected state
    //you don't have to call super
    // (the default implementation changes between backgroundView and selectedBackgroundView)
}

- (void)setHighlighted:(BOOL)highlited animated:(BOOL)animated {
    //update the cell text colors, backgrounds etc for the selected/not highlighted state
    //you don't have to call super
    // (the default implementation changes between backgroundView and selectedBackgroundView)
    //by giving empty implementation, you will block highlighting of cells
}

- (void)setEditing:(BOOL)highlited animated:(BOOL)animated {
  //you can use this method to add custom editing controls
}

- (void)willTransitionToState:(UITableViewCellStateMask)state {
  //use this method to change the layout of your contents
  //when the cells goes into one of the editing states
}

- (void)layoutSubviews {
  //update the frames of cell contents to match the new cell size
  //note that the cell doesn't have the correct size until it is added to the table,
  //this method is called when the cell already has the final size

  //you can also use this method to change the size/position of the `contentsView`
} 
```

**编辑：** 为了解决您的具体问题，最好的解决方案可能是：

1.  从表格中删除默认值`backgroundView`并补充您自己的背景（例如，清晰的颜色、白色、从图案创建的颜色或 a`UIImageView`到`backgroundView`.
2.  从每个单元格中删除默认值`backgroundView`并将其替换为`UIImageView`. 第一个、最后一个和中间单元格需要三个特殊图像。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T09:51:03.667

使用以下代码 insatnd of use `UIImageView`。

```
self.tblView.backgroundView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"YourImage.png"]]; 
```

否则，

```
self.tblView.backgroundView.inputView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"tblbg.png"]]; 
```

**第二个选项**（当您***不依赖****Style**时**，此选项很有用**`UITableView`*****）**

 **1）改变你的`UITableView`风格， `style:UITableViewStylePlain`。
2）添加`#import <QuartzCore/QuartzCore.h>`框架
3）改变框架`UITableView`，`CGRectMake(10, "asYouNeed", 300, "asYouNeed")`
4）给你的圆形半径`UITableView`

```
self.tblView.layer.cornerRadius = 10; // set Radius as you need 
```

并设置`UIImageView`为 `BackGroundView`。`UITableView`（*按照您在此问题中输入的代码*）

上述步骤是`UITableView`用**圆角**创建的。**我**在这里提到，当您不依赖`UITableView`样式时使用此代码，如果`TableView Style:Gropped`对您很重要，那么此选项对您没有帮助。

谢谢 ：）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-19T06:03:07.207

如果您想制作自定义单元格 UI，请尝试使用

```
 _tblNews.backgroundColor = [UIColor clearColor];
        _tblNews.backgroundView = nil;
        _tblNews.separatorColor = [UIColor clearColor];
        _tblNews.separatorStyle = UITableViewCellSeparatorStyleNone; 
```

并为您的单元格创建 nib，因为您想要制作单元格并在数据源方法中加载该单元格。

用于加载 xib

```
+ (id)loadNibNamed:(NSString *)NibName {
    NSObject *cl = nil;
    if (NSClassFromString(NibName) != nil) {
        NSArray *arr = [[NSBundle mainBundle] loadNibNamed:NibName owner:self options:nil];
        for (id cls in arr) {
            if([cls isKindOfClass:NSClassFromString(NibName)])
            {
                cl = cls;
                break;
            }
        }
    }
    return cl;
} 
```

确保在 xib 中为单元格的可重用性设置标识符。使用它，您可以轻松自定义单元格布局。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-16T10:48:20.467

你想要这样吗

![在此处输入图像描述](https://i.stack.imgur.com/apbYw.png)

这是代码：-

在任何你想要的地方设置 UITableView 的背景视图。我已经在 viewDidload 中完成了。

```
[_tblView setBackgroundView:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"url.jpg"]]]; 
```

并在 cellForRowAtIndexPath 中将 tableViewCellBackground 颜色设置为透明

```
 static NSString *cellIdentifier=@"cellIdentifier";
UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:cellIdentifier];

if (cell ==nil) {
    cell=[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
}
cell.backgroundColor=[UIColor clearColor];
cell.textLabel.text=@"goup styled";
return cell; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-16T10:29:43.890

将`UITableView`背景视图设置为**nil**以使其透明。

```
[tableView setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"backgroundImage.png"]]];
tableView.opaque = NO;
tableView.backgroundView = nil; 
```

希望它会帮助你。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-20T07:30:03.247

请试试这个，

```
UIView *backgroundView = [[UIView alloc] init];
[backgroundView setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"imageName.png"]]]; 
```

并在表格视图中，请设置此属性。

```
UITableView *tableView = [[UITableView alloc] init];
[tableView setBackgroundView:backgroundView]; 
```

希望这对你有用。****

# java - 如何从图像中删除白色边框

> ID：15922458
> 
> 赞同：0
> 
> 时间：2013-04-10T09:49:15.337
> 
> 标签：java

![在此处输入图像描述](https://i.stack.imgur.com/M8kQi.jpg)

我想从此图像中删除边缘。我有兴趣从这张图片中删除边框。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:59:44.933

不是真正的答案，但我可以引导您朝着正确的方向前进 我认为你必须学习 JAVA 中的数字图像处理 [link][1]

[1]：[http](http://www.imagingbook.com/) ://www.imagingbook.com/可能会有所帮助

我尝试过一次并达到一定限制的可能解决方案 第 1 步：从当前图像创建 bufferedImage 第 2 步：逐个像素迭代图像缓冲区矩阵 第 3 步：应用任何边缘检测算法 第 4 步：检测到edge ，从边框形状内的像素替换颜色像素

应用这个边缘检测java有一些内置的“**高斯滤波器**”库和一些类似的滤波器

，如果这对您有任何帮助，那么我将发布更多我的工作，如果您需要任何解释，请告诉我。

# android - Admob + Phonegap 不适用于 Android 2.1

> ID：15922463
> 
> 赞同：1
> 
> 时间：2013-04-10T09:49:28.197
> 
> 标签：android, cordova, admob

我已成功让 Admob 在我的 4.0.4 模拟器和 4.0.4 手机上显示，但是当我运行 2.1 模拟器并在我的 2.1 手机上尝试时，我收到“无网络”错误，但没有任何显示。

```
04-10 10:33:38.683: I/Ads(256): Network is unavailable.  Aborting ad request.
04-10 10:33:38.693: D/webviewglue(256): nativeDestroy view: 0x73eac0
04-10 10:33:38.693: I/Ads(256): onFailedToReceiveAd(A network error occurred.)
04-10 10:33:38.693: W/webcore(256): Can't get the viewWidth after the first layout 
```

这是我正在使用的代码：

```
public class MyPhoneGapActivity extends DroidGap {

private Handler mHandler = new Handler();
private AdView adView;
/** Called when the activity is first created. */

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    super.loadUrl("file:///android_asset/www/index.html");

    mHandler.postDelayed(new Runnable() {
        public void run() {
            doStuff();
        }
    }, 5000); 
}
private void doStuff() {
    final String MY_AD_UNIT_ID = "MY_ID";
    AdView adView; 
    // Create the adView 
    adView = new AdView(this, AdSize.BANNER, MY_AD_UNIT_ID); 
    LinearLayout layout = super.root; // this is the only change from the sample 
    // Add the adView to it 
    layout.addView(adView); 
    // Initiate a generic request to load it with an ad 
    adView.loadAd(new AdRequest());
} 
```

显现：

```
<uses-sdk android:minSdkVersion="7" 
android:targetSdkVersion="13"/>

  <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
  <uses-permission android:name="android.permission.INTERNET" />

  <activity android:name="com.google.ads.AdActivity" android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" /> 
```

项目属性

```
target=android-13 
```

似乎如果我将 android:configChanges 更改为以下内容，则广告横幅会显示但包含一条消息，说“您必须在 android manifest.xml 中声明了一个带有配置更改的 adActivity。

```
 <activity android:name="com.google.ads.AdActivity" android:configChanges="keyboard|keyboardHidden|orientation|" /> 
```

谢谢

# ruby-on-rails - 将数组显示到列

> ID：15922468
> 
> 赞同：0
> 
> 时间：2013-04-10T09:49:41.827
> 
> 标签：ruby-on-rails, arrays, ruby-on-rails-3.2

我尝试从[https://stackoverflow.com/a/4103220/1297435](https://stackoverflow.com/a/4103220/1297435)

```
<% Room.all.in_groups_of(1).each do |room_array| %>
      <% room_array.each do |room| %>
      <%= check_box_tag "student[room_ids][]", room.id, @student.room_ids.include?(room.id), id: dom_id(room) %> <%= label_tag dom_id(room), room.name %><br>
      <% end %>
    <% end %> 
```

当我更改`in_groups_of(1)`为时`in_groups_of(5)`，我得到了错误

> 为 nil 调用 id，它会错误地为 4 - 如果你真的想要 nil 的 id，请使用 object_id

**更新**

```
<% Room.all.in_groups_of(5).each do |room_array| %>
          <% room_array.compact.each do |room| %>
          <%= check_box_tag "student[room_ids][]", room.id, @student.room_ids.include?(room.id), id: dom_id(room) %> <%= label_tag dom_id(room), room.name %><br>
          <% end %>
        <% end %> 
```

为什么不显示到列？

![在此处输入图像描述](https://i.stack.imgur.com/J1Osr.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:55:05.447

当数组中的对象数较少时，in_groups_of 方法用 nil 对象填充数组。所以你需要在渲染它们之前删除 nil 。

使用 compact 删除 nil 对象

```
<% Room.all.in_groups_of(1).each do |room_array| %>
      <% room_array.compact.each do |room| %>
      <%= check_box_tag "student[room_ids][]", room.id, @student.room_ids.include?(room.id), id: dom_id(room) %> <%= label_tag dom_id(room), room.name %><br>
      <% end %>
    <% end %> 
```

# matlab - MATLAB如何使用ODE求解器？

> ID：15922471
> 
> 赞同：0
> 
> 时间：2013-04-10T09:49:49.970
> 
> 标签：matlab, ode

我有一个 ODE，我想消除`x`. 有人可以在 MATLAB 中帮助我吗？

方程

```
 dy/dx=(-((y^2)/(j*omega*eox)) + ((j*omega*(q^2)*nbt)/(1+(j*omega*tau0*e^(2*k*x)))) ) 
```

常量值：

```
eox = 8.85*10.^-12;
omega = 1;
j=-1.^(1/2);
q=1.6*(10.^(-19));
nbt=(10.^(-10));
tau0=10.^(-4);
k=1;
e=2.71828182846;
y = 0 to 80 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:03:02.133

> *我想在 y 和 omega 方面有 dy/dx，我想从这个方程中消除 x*

在您上面的代码中，欧米茄是一个常数，所以我假设它只是一个参数。

您目前向我们展示的只是形式中的 ODE，

```
dy/dx = f(x,y) 
```

您不能从这个 DE 中消除“x”，也没有必要这样做，因为方程已经是完全正确的形式，可以与任何 ode 求解器一起使用，例如 ode45。

如果您想使用许多不同的参数 omega 值对此运行求解器，则可以使用“匿名函数”轻松完成。但是在任何人可以为您提供更多帮助之前，您可能需要稍微完善您的问题。

# visual-studio-2012 - Visual Studio 2012 更新 2 和 Git 工具

> ID：15922478
> 
> 赞同：4
> 
> 时间：2013-04-10T09:50:23.473
> 
> 标签：visual-studio-2012, visual-studio-addins, visual-studio-extensions

当 MS 发布适用于 Visual Studio 2012 的 Git 工具时，他们说它需要更新 2 - [http://www.hanselman.com/blog/GitSupportForVisualStudioGitTFSAndVSPutIntoContext.aspx](http://www.hanselman.com/blog/GitSupportForVisualStudioGitTFSAndVSPutIntoContext.aspx)。

我正在开发一些 Visual Studio 扩展，这对我来说很有趣，它们在 Update 2 for Extensions API 中所做的更改，在 Update1\RTM 中不存在。

我检查了 Update 2 发行说明，找不到与扩展工作相关的任何内容。来源 - [http://support.microsoft.com/kb/2797912/en-us](http://support.microsoft.com/kb/2797912/en-us)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-01T03:35:43.473

> > VS Tools for Git 需要安装 VS 2012 Update 2。

安装 VS Update 2 后出现错误！（怀疑是因为我锁定了本地构建？）

我按如下方式安装了 vsix 文件：

*   转到[http://visualstudiogallery.msdn.microsoft.com/abafc7d6-dcaa-40f4-8a5e-d6724bdb980c](http://visualstudiogallery.msdn.microsoft.com/abafc7d6-dcaa-40f4-8a5e-d6724bdb980c)
*   安装 Visual Studio Update 2（“要求”下的链接）
*   下载微星
*   使用 LessMSI [http://code.google.com/p/lessmsi从 MSI 中提取 GitProvider.vsix](http://code.google.com/p/lessmsi)
*   直接运行 vsix

安装后，您应该会在工具 > 选项 > 源代码管理 > 插件选择下看到“Microsoft Git 提供程序”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:00:23.000

你是对的，我也没有找到任何东西。然而，当我尝试为 Git 安装 MS VS 工具时，我收到错误消息：`VS Tools for Git requires VS 2012 Update 2 to be installed.`

我的配置看起来像：

> Microsoft Visual Studio Professional 2012 版本 11.0.51106.01 更新 1 Microsoft .NET Framework 版本 4.5.50709
> 
> 安装版本：专业

# sql-server-2008 - 具有引用链接服务器的存储过程

> ID：15922481
> 
> 赞同：0
> 
> 时间：2013-04-10T09:50:41.363
> 
> 标签：sql-server-2008, tsql, c#-4.0, stored-procedures, linked-server

我正在使用引用的链接服务器与存储过程作斗争。链接服务器可通过端口转发通过 Internet 访问 - 因此没有 VPN、LAN。

服务器在两侧**MS SQL SERVER 2008 EE v. 10.0.5512**

配置链接服务器，DTC：

还不能插入图片:(

```
enable promotion of distributed transaction = false
RPC = false
RPC out = false

Network DTC Access checked
Allow inbound true
Allow outbound true
No authentication Required 
```

存储过程看起来像

```
CREATE PROCEDURE [dbo].[spSynchronizeArticles] 
    -- Add the parameters for the stored procedure here
(
    @pDebug bit,
    @siteId bigint
)
AS
BEGIN

  SELECT *
  FROM [LinkedServer].[MyDatabase].dbo.Storages 
  WHERE Storage.siteId = @siteId

  RETURN 0

END 
```

如您所见，这里没有交易。如果我是正确的，则每次调用链接服务器时，MS DTC 都会创建事务。

我像这样从 c# 调用这个过程

```
 SqlCommand sqlCmd = new SqlCommand("spSynchronizeArticles");
  sqlCmd.CommandType = CommandType.StoredProcedure;
  sqlCmd.Parameters.AddWithValue("@pDebug", false);
  sqlCmd.Parameters.AddWithValue("@siteId", siteId);

  SqlParameter returnValue = new SqlParameter("returnVal", SqlDbType.Int);
  returnValue.Direction = ParameterDirection.ReturnValue;
  sqlCmd.Parameters.Add(returnValue);

  using (SqlConnection conn = new SqlConnection(Context.LocalData.ConnectionString))
  {
    try
    {
      try
      {
        conn.Open();
        sqlCmd.Connection = conn;
        sqlCmd.ExecuteScalar();

        return Convert.ToInt32(returnValue.Value);
      }
      catch (Exception ex)
      {
        //log exception to file
        return -1;
      }
    }
    finally
    {
      conn.Close();
    }
  }
} 
```

此 c# 代码在无限时调用以同步数据。在同一个线程中，虽然还有另一种方法称为从文件中获取数据（如果存在）并将它们保存到本地数据库。

SynchronizeArticles 方法调用频率更高，一切正常，但一旦调用从文件中获取数据的方法，SynchronizeArticles 总是抛出此异常

> System.Data.SqlClient.SqlException (0x80131904)：服务器“LocalServer\SQLEXPRESS2008”上的 MSDTC 不可用。

该方法正在使用事务，看起来像

```
public void FillDataFromViewWithTrans(DataTable dt, string wherePhrase)
    {
      dt.Rows.Clear();
      SqlCommand sql = new SqlCommand(String.Format(@"SELECT * 
FROM SomeView
{0}", String.IsNullOrEmpty(wherePhrase) ? String.Empty : "WHERE " + wherePhrase));

      using (SqlConnection conn = new SqlConnection(Context.LocalData.ConnectionString))
      {
        SqlTransaction trans = null;
        try
        {
          try
          {
            conn.Open();
            trans = conn.BeginTransaction(IsolationLevel.RepeatableRead);
            sql.Transaction = trans;
            sql.Connection = conn;

            SqlDataAdapter dA = new SqlDataAdapter(sql);

            dA.Fill(dt);

            trans.Commit();
          }
          catch (Exception ex)
          {
            trans.Rollback();
            //log exception to file
            return;
          }
        }
        finally
        {
          conn.Close();
        }
      }
    } 
```

这只是插图示例:)

告诉我我错过了什么。

此外，我在使用 MS DTC 时遇到了各种错误

1.  从 C# 代码中，当一些用户手动调用该过程时，他们有时会遇到异常：

> 无法执行该操作，因为 OLE DB 提供程序“SQLOLEDB”无法开始分布式事务。

1.  当我将开始分布式事务放入存储过程中时，我得到：

> 警告：致命错误 8510 发生在 2013 年 4 月 10 日上午 9:07。记下错误和时间，并联系您的系统管理员。

唯一有帮助的是重新启动 Windows 服务或 UI 应用程序。从**MS SQL 管理工作室**，该过程**一直运行**没有问题。

现在我必须说我很绝望，我错过了什么？

**编辑：**

```
int i = 0;
      while (true)
      {
        i++;
        if ((i % 9) == 0)
        {
          //local select with transaction Works all the time
          CallLocalSelectWithTransaction(); 
        }

        // CallProcedure works 8 times, after first calling of CallLocalSelectWithTransaction
        // the callProcedure works no more.

        CallProcedure(); // procedure with linked server
      } 
```

# git - 如何停止使用未合并的提交关闭拉取请求

> ID：15922486
> 
> 赞同：1
> 
> 时间：2013-04-10T09:50:50.713
> 
> 标签：git, github, githooks, git-workflow

任何人都可以建议一种方法来停止/通知用户在他们试图删除的分支上的 github 上有一个开放的拉取请求吗？

我们目前使用以下分支`master`、`rc`和`hotfix`来`prod`表示各种环境。当我们有一个`hotfix`想要提升的分支时，`prod`我们删除该分支并在它构建时`prod`强制推送该分支。`hotfix`通常这将按预期工作。但是，在我质疑的示例中，我们遇到了一些情况，即我们将`hotfix`部分更改部署到生产环境（`HEAD`分支`hotfix`不是正在部署的内容。在某些情况下，这些仍在等待以拉取形式进行的代码审查要求进一步的出色工作。

我正在寻找的是一种在用户尝试删除修补程序分支时通知用户的方法，该分支`HEAD`不是我们部署到生产中的，更重要的是存在未完成的合并请求。

除了远程分支已被删除之外，我们无缘无故地自动关闭了拉取请求，此时不需要这样做，只需从`prod`分支重新创建并重新打开请求即可。这是由于我们的 git 工作流程，我们如上所述删除了这些分支，但理想情况下允许它们保持打开状态以完成拉取请求，然后进行后续部署，并且只有在没有未完成的工作时才会删除分支。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:13:22.550

你在哪个系统上工作？GitHub？藏？

问题是这样的：当您打开一个拉取请求时，它附加到某个分支，并且更改与您处理的分支的提交 ID“比较”。

当您删除分支时，您会删除对更改的“根”的引用，因此 git 不知道将其与什么进行比较。您的更改重新存储在您在拉取请求中设置的分支中。现在您已经删除了分支，您可以删除更改。您不能指望 git “知道”您希望他为您保存更改。

总结一下：拉取请求的来源是您所做更改的分支。删除分支后，您将删除更改，并且不能期望 git 保存它们以供将来使用。

# html - 在平板电脑上显示一张图片，在电脑上显示不同的图片

> ID：15922493
> 
> 赞同：1
> 
> 时间：2013-04-10T09:50:59.460
> 
> 标签：html, css, responsive-design

我有这个问题......我正在运行页面[http://exploreprague.cz](http://exploreprague.cz)。在右上角我有丝带。但是当我在平板电脑上查看它时，它与我的菜单重叠。所以我想如果有办法展示不同的图片（不同种类的丝带，不仅仅是不同的风格）它可以工作。但我不知道是否有某种 HTML/CSS/JS 技巧可以做到这一点。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:53:16.043

实现您想要的更好的方法之一是使用[**CSS3 媒体查询**](http://www.w3.org/TR/css3-mediaqueries/)。

在针对平板电脑大小分辨率的 CSS 文件中，您可以设置`display:none`该特定图像，如果您愿意，可以将其替换为更适合您的较小分辨率的新图像。

**例如**（iPad 纵向/横向分辨率）：

```
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) {
  #oldImg { display:none; }
  #newImg { display:block; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:02:53.750

以下是如何使用响应式 css 的示例：

```
 Large desktop 
        @media (min-width: 1200px) {
            #largeImage{
                 display: inline;
            }
            #smallImage{
                 display: none;
            }
        }

        Portrait tablet to landscape and desktop 
        @media (min-width: 768px) and (max-width: 979px) {
            #largeImage{
                 display: none;
            }
            #smallImage{
                 display: inline;
            }
        }

        Landscape phone to portrait tablet 
        @media (max-width: 767px) {
            /* do the same as tablets or include this width range in the tablet style*/
        }

        Landscape phones and down 
        @media (max-width: 480px) {
            /* do the same as tablets or include this width range in the tablet style*/} 
```

只需根据屏幕宽度设置图像显示属性即可。使用 2 张图片，其中一张

```
display: none; 
```

另一个是：

```
display: inline; 
```

并在更窄的屏幕上切换它们

# c# - 为 UI 控件数据源异步生成第一个结果

> ID：15922503
> 
> 赞同：0
> 
> 时间：2013-04-10T09:51:19.203
> 
> 标签：c#, wpf, data-binding, async-await

我想实现一个异步显示加载数据的控件。

到目前为止，我已经尝试过*async await*和*yield*。使用*异步等待*，在收集绑定数据时 UI 是可用的。

使用*yield*时，UI 将被阻止，直到数据被收集并绑定到控件。

**是否可以结合*yield*和*async/wait*的真实行为？**

谢谢

这是代码：

```
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Threading;
using System.Threading.Tasks;
using System.Windows;

namespace WPFComponents
{
    /// <summary>
    /// Interaction logic for WindowAsync.xaml
    /// </summary>
    public partial class WindowAsync
    {
        public WindowAsync()
        {
            InitializeComponent();
        }

        private async void OnWindowLoad(object sender, RoutedEventArgs e)
        {
            ItemListView.ItemsSource = await GetItemsAsync();
            //ItemListView.ItemsSource = GetItems();
        }

        private async Task<ObservableCollection<string>> GetItemsAsync()
        {
            return await Task.Run(() =>
                {
                    ObservableCollection<string> collection = new ObservableCollection<string>();

                    for (int i = 0; i < 10; i++)
                    {
                        string item = string.Format("Current string from {0}.", i);
                        collection.Add(item);
                        Thread.Sleep(500);
                    }
                    return collection;
                });
        }

        private IEnumerable<string> GetItems()
        {
            for (int i = 0; i < 10; i++)
            {
                string item = string.Format("Current string from {0}.", i);
                Thread.Sleep(500);
                yield return item;
            }
        }
    }
} 
```

这是 XAML：

```
<Window x:Class="WPFComponents.WindowAsync"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="WindowAsync" Height="300" Width="300" Loaded="OnWindowLoad">
    <Grid>
        <ListView ScrollViewer.HorizontalScrollBarVisibility="Disabled" x:Name="ItemListView"
                      SelectionMode="Multiple" UseLayoutRounding="True"
                      IsSynchronizedWithCurrentItem="True" Margin="0,4,4,4"
                      BorderThickness="0"
                      HorizontalContentAlignment="Center"
                      VerticalContentAlignment="Top">
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel IsItemsHost="True" VerticalAlignment="Top" />
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
        </ListView>

    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:14:20.073

> 是否可以结合 yield 和 async/wait 的真实行为？

`await`返回完整的结果，但您可以使用 TAP 中内置的进度报告。

我在这里写了一篇关于它的文章：[*C# 5 async 中的进度报告模式*](http://simplygenius.net/Article/AncillaryAsyncProgress)

* * *

所以你会做这样的事情：

```
private void OnWindowLoad(object sender, RoutedEventArgs e)
{
  var collection = new ObservableCollection<string>();
  ItemListView.ItemsSource = collection;

  var progress = new Progress<string>();
  progress.ProgressChanged += ( s, item ) =>
    {
      collection.Add( item ); // will be raised on the UI thread
    }
  ;

  Task.Run( () => GetItemsAndReport( progress ) );
}

void GetItemsAndReport( IProgress<string> progress )
{
    foreach ( var item in GetItems() ) progress.Report( item );
}

private IEnumerable<string> GetItems()
{
    for (int i = 0; i < 10; i++)
    {
        string item = string.Format("Current string from {0}.", i);
        Thread.Sleep(500);
        yield return item;
    }
} 
```

# algorithm - 不使用“*”运算符和按位运算将两个数字相乘

> ID：15922506
> 
> 赞同：-2
> 
> 时间：2013-04-10T09:51:26.227
> 
> 标签：algorithm

在不使用“*”和按位运算的情况下，如何有效地将两个数字相乘？（只需使用 +、-、/ 等运算符）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:56:57.717

```
a*b == 10^(Log(a*b)) == 10^(Log(a) + Log(b)) == exp(ln(a) + ln(b)) 
```

其中`^`表示取幂，`Log`是以 10 为底的对数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:59:43.333

```
multiply(a,b):
      if(a==0) return 0
      r<-0
      while(b/a!=r) r++
      return r 
```

好吧，我在开玩笑，但你应该提供更多关于你的搜索的信息：什么是你的有效方法？你能给出搜索的复杂度的近似值吗？还是您想要最有效的算法？因为，如果您不精确，我也可以回答：

```
multiply(a,b):
      r<-0
      while(a!=0)
           r<-r+b
           b<-b-1
      return r 
```

# asp-classic - 未找到数据源名称且未指定默认驱动程序

> ID：15922518
> 
> 赞同：1
> 
> 时间：2013-04-10T09:52:08.903
> 
> 标签：asp-classic, odbc, connection-string

当我尝试在数据库中插入记录时出现此错误。 `Microsoft OLE DB`ODBC 驱动程序提供程序错误“80004005”

`[Microsoft][ODBC Driver Manager]`未找到数据源名称且未指定默认驱动程序

我的连接是：

```
Application("Db_ConnectionString")= "DSN=dsnname;UID=xxx;PWD=xxx;" 
```

请尽快帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:09:40.507

谢谢你的回答。

我自己修复了错误。在我的代码中分配了错误的 dsn 名称。我改变了它，现在它工作正常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-18T21:26:32.470

迁移旧版 ASP 应用程序时，我在 Windows Server 2012 上遇到此错误 - 我必须在 AppPool 的高级设置中启用 32 位应用程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:08:40.003

您是否在 ODBC 中设置了“dsnname”？应该在*系统 DSN*选项卡下的*管理工具 > 数据源 (ODBC)中。*

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-07T13:14:35.557

这个问题可以通过**安装 jdk 7**来解决，下载到下面的链接

> [http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html)
> 
> Java SE 开发工具包 7u79

产品/文件描述：Windows x86
大小：138.31 MB
下载：jdk-7u79-windows-i586.exe*

# .net - Visual Studio 中 ResourceDictionary 中 DataTemplate 的设计视图

> ID：15922523
> 
> 赞同：16
> 
> 时间：2013-04-10T09:52:14.840
> 
> 标签：.net, wpf, visual-studio-2010, xaml, gui-designer

有没有办法在 DataTemplate 中预览 GUI？例如，如果我有一个包含 DataTemplate 的资源字典，并且 Data 模板包含 GUI 代码，例如

```
<DataTemplate x:Key="MyTemplate">
    <StackPanel>
        <TextBox Text="AAA"/>
    </StackPanel>
</DataTemplate> 
```

我可以只查看堆栈面板吗？（例如在设计视图中预览 UserControl）。如果原始VS无法实现，是否有插件？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-02-15T03:20:06.197

Visual Studio 不支持这样做，但 Expression Blend 支持，如果您可以访问它。以下是有关编辑模板资源的几种方法的一些说明：

[http://msdn.microsoft.com/en-us/library/cc294908(v=expression.40).aspx](http://msdn.microsoft.com/en-us/library/cc294908%28v=expression.40%29.aspx)

特别是，如果您想编辑位于 ResourceDictionary 中的 DataTemplate，您将：

*   在 Blend 中加载项目
*   **在“资源**”面板中找到包含 ResourceDictionary 的 .xaml 文件（默认停靠在右侧）
*   在资源列表中找到 DataTemplate（按键）
*   单击**编辑资源**

我知道这是一个老问题，但我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-08T20:17:43.083

如果在控件主体中向下引用模板，例如`ItemTemplate="{StaticResource MyTemplate}"`，则可以将光标放在模板名称上，然后按 F12 让 Visual Studio 在 XAML 设计器中呈现模板。

出于某种原因，*这只适用于一次*。您必须关闭并重新打开表单才能看到呈现的另一个模板。当然有一些方法可以避免这种情况，但我无法弄清楚。

# rest - Symfony2 和使用 AngularJS 之类的框架的单一网页应用程序

> ID：15922531
> 
> 赞同：19
> 
> 时间：2013-04-10T09:52:36.963
> 
> 标签：rest, symfony, architecture, knockout.js, angularjs

*（如果这不是发布此类问题的正确位置，我很乐意将其发布到其他地方）*

我正在尝试构建一个交互式 Web 应用程序来管理公司资源。我有使用 Symfony2 的经验，但我对这个新应用程序有点碰壁。

我想让这个应用程序在客户端非常具有交互性。几乎是一个完整的单一网页应用程序。我以前的 Web 应用程序通常只使用带有 CRUD 页面的典型 MVC 模式。

**在那些简单的应用程序中，我会有**

```
/employees/
/employees/create
/employees/detail/45
/employees/update/45
/employees/delete/45 
```

在这种应用程序中使用 symfony 会给我带来很多好处：

*   路由
*   安全性（CSRF 令牌）
*   FormTypes 和表单处理
*   验证
*   与教义融合
*   枝条

特别是 Twig 中这样的功能非常令人耳目一新（*因为我的模型是作为 Doctrine 实体构建的*）：

```
<p>{{ employee.getCurrentTask().description }}</p> 
```

我现在面临的问题是我觉得 Symfony2 并不是真正为单一网页应用程序构建的。**一旦我尝试添加一些 Ajax 功能，我就会遇到这些问题**：

*   CSRF 令牌无效
*   jQuery中有太多不可重用的视图/表示逻辑
*   在 html 中添加数据属性以获取 id 等...

然后我研究了 Knockout.js 和 Angularjs，但后来我觉得失去了 Doctrine 和 Twig 的所有优势。无论如何，我必须在客户端重建我的模型，然后必须在两个不同的位置维护它们。

所以我想出了这个主意：

*   使用 Symfony2 模型和控制器将数据持久化到数据库，但让 symfony 中的控制器只发送 JSON 并接收 JSON（FOSRestBundle 可能吗？）
*   使用 AngularJS 或 KnockoutJS 之类的框架在客户端重建 JSON 数据以使用 2 路绑定。

**但是如果我使用前端 js 框架，我将如何解决 Symfony 已经解决但无法使用的 Doctrine2 关系、表单验证、CSRF 等问题？**

欢迎所有建议！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-26T08:02:34.847

**关于 JSON、序列化和模型的一些话**

西蒙，我面临着完全相同的问题。首先就像 ken 已经提到的。您不需要重建任何模型。最好使用 FosRestBundle 和/或 JMS Serializer。它将具有关系的实体转换为 JSON 对象。这些对象通过 api 传输到您的前端，当您像这样使用 angular.js 时，您可以像在 twig 中一样使用它们

```
{[{ user.username }]} 
```

和树枝一样。但请记住，您必须为 angular 设置自定义括号，因为默认情况下它使用与 twig 相同的括号。

**路由**

您谈论的是单页应用程序，因此 symfony 的路由保持在低级别以很少刷新页面。相反，您必须使用前端框架的路由，因为我只熟悉 angular.js，我举一个 Angular 示例：

```
app.config(function($routeProvider, $interpolateProvider) {

    //here you go, custom brackets
    $interpolateProvider.startSymbol('{[{');
    $interpolateProvider.endSymbol('}]}');

    $routeProvider.when('/user', {
        controller: UserController, 
        templateUrl: Routing.generate('suser_list')
    }).when('/ticket', {
        controller: TicketController, 
        templateUrl: Routing.generate('ticket_list')
    });
}); 
```

当你点击一个链接时

```
<a href="#/ticket">Go to tickets</a> 
```

AngularJs 会知道触发哪个前端控制器。非常棒的东西，无需重新加载页面。也看看[**FosJSRoutingBundle**](https://github.com/FriendsOfSymfony/FOSJsRoutingBundle)。它允许您在 javascript 中生成 symfony 路由，我使用它们将 js 控制器与推入数据的 html 模板链接。

**FormTypes，表单处理，验证**

好吧，当你使用像 angularjs 这样的前端框架时，你的 symfony 表单类型就毫无用处了。但我不确定。请记住，数据是通过 api 作为 json 推送和拉取的，我认为表单类型处理这种复杂性将是一项艰巨的工作。

对于验证，您可以使用 Angular 的实时验证或在后端使用 symfony 的验证，没问题。同时使用客户端和服务器端验证可能是一件好事。

**枝条**

Twig 退出了比赛。所有数据都在客户端呈现，而不是像 twig 那样在服务器端预呈现。但只有当您的应用程序确实是单页应用程序时才会出现这种情况。当然你可以使用 twig，但它只有在你重新加载整个页面时才会刷新。

**与教义融合**

您仍然可以在后端使用学说。您有关于原则和 SPA 的具体问题吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T23:20:44.980

您不需要在客户端重建模型。我通常只是在 angularjs 中创建一个提供 json 数据的服务。数据操作仍然发生在使用 ajax 的服务器端。

对于需要csrf的表单，我通常只是通过json发送twig渲染的html。或者你可以用 jms 序列化器序列化 $form->createView() 。但是，您将需要一些客户端脚本来将 json 数据转换为实际的表单控件。

# android - 有没有办法在 Android 上的 VPN 上创建 HTTP 代理？

> ID：15922533
> 
> 赞同：5
> 
> 时间：2013-04-10T09:52:40.200
> 
> 标签：android, proxy, vpn

我们拥有带有专有协议的企业网络，用于从外部访问内部 IP 网络。任务是让标准安卓应用程序（网络浏览器、电子邮件客户端等）访问内部资源。

我们已经创建了建立网络通道的应用程序。

所以问题是：有没有办法将我的应用注册为：

1.  HTTP 代理
2.  VPN客户端

...而不是通过已建立的通道捕获所有 HTTP 请求或 IP 流量并将其重定向到公司网络？

# twitter-bootstrap - Bootstrap 登录页面在某些屏幕尺寸上被破坏

> ID：15922540
> 
> 赞同：0
> 
> 时间：2013-04-10T09:53:01.330
> 
> 标签：twitter-bootstrap

我尝试使用引导程序创建一个演示页面，但在某些尺寸上它的行为很奇怪。可能我错过了引导程序的一些关键方面，或者它可能是一个错误:) 你能在这里给我一些建议吗？该问题似乎是由表单/字段本身引起的。尝试添加一些跨度等，但也没有工作。1024x768 的布局变得更糟：D 输入字段脱离容器。

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Page Title</title>
<link href="css/bootstrap.css" rel="stylesheet" type="text/css">
<link href="css/bootstrap-responsive.css" rel="stylesheet" type="text/css">
<!-- HTML5 shim for IE backwards compatibility -->
<!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>

<body>
<div class="page-header">
  <h1 class="text-center">Welcome</h1></div>

<div class="container-fluid">
<div class="row-fluid">

<div class="span4 offset4 well">
  <form class="form-horizontal">
    <fieldset>
      <legend>Please login</legend>
      <div class="control-group">
        <label class="control-label">User name</label>
        <div class="controls">
          <input id="textinput" name="textinput" class="input-xlarge" required type="text">
        </div>
      </div>
      <div class="control-group">
        <label class="control-label">Password</label>
        <div class="controls">
          <input id="passwordinput" name="passwordinput" class="input-xlarge" required type="password">
        </div>
      </div>
      <div class="control-group">
        <label class="control-label"></label>
        <div class="controls">
          <button id="giris" name="giris" class="btn btn-primary">Login</button>
        </div>
      </div>
    </fieldset>
  </form>
  <p class="muted">This is a demo login page <a class="text-error" href="#">click here</a> for more info.</p>
    </div>
   </div>

    <div class="row-fluid">
      <div class="span4 offset4 well"> <p>Lorem ipsum dolor sit amet</p> </div>
    </div>

</div>
<script src="http://code.jquery.com/jquery.js"></script> 
<script src="js/bootstrap.min.js"></script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:06:21.003

类喜欢 `span4`并`offset4`遵循在引导程序中实现的响应式布局机制。我的建议是为您的表单容器添加一些固定宽度，并带有自动左右边距。

[http://jsfiddle.net/6uwkL/](http://jsfiddle.net/6uwkL/)

**CSS**

```
.form-container {
    width: 600px;
    margin: 0 auto 20px auto;
} 
```

**HTML**

```
<div class="page-header">
  <h1 class="text-center">Welcome</h1></div>

<div class="container-fluid">
<div class="row-fluid">

<div class="form-container well">
  <form class="form-horizontal">
    <fieldset>
      <legend>Please login</legend>
      <div class="control-group">
        <label class="control-label">User name</label>
        <div class="controls">
          <input id="textinput" name="textinput" class="input-xlarge" required type="text">
        </div>
      </div>
      <div class="control-group">
        <label class="control-label">Password</label>
        <div class="controls">
          <input id="passwordinput" name="passwordinput" class="input-xlarge" required type="password">
        </div>
      </div>
      <div class="control-group">
        <label class="control-label"></label>
        <div class="controls">
          <button id="giris" name="giris" class="btn btn-primary">Login</button>
        </div>
      </div>
    </fieldset>
  </form>
  <p class="muted">This is a demo login page <a class="text-error" href="#">click here</a> for more info.</p>
    </div>
   </div>

    <div class="row-fluid">
      <div class="form-container well"> <p>Lorem ipsum dolor sit amet</p> </div>
    </div>

</div> 
```

# c# - 转换列表 到 EntityFramework 列/字段列表

> ID：15922548
> 
> 赞同：3
> 
> 时间：2013-04-10T09:53:31.563
> 
> 标签：c#, linq, entity-framework

使用 EntityFramework，我可以使用以下语法获取特定类型的实体列表：

```
List<Customer> customers = ((IQueryable<Customer>)myEntities.Customers
     .Where(c => c.Surname == strSurname)
     .OrderBy(c => c.Surname)).ToList<Customer>(); 
```

然后我可以做这样的事情来结束我感兴趣的数据：

```
var customerSummaries = from s in customers
     select new
     {
        s.Surname, s.FirstName, s.Address.Postcode
     }; 
```

我得到了`string`包含所请求的汇总数据的字段（以及必要时的表格）的列表（基于用户选择）。例如，对于上面的“customerSummary”，`string`提供的 s 列表将是：“Surname”、“FirstName”、“Address.Postcode”。

我的问题是：如何将该字符串列表转换为仅提取指定字段所需的语法？

如果无法做到这一点，那么对于列列表来说，什么是更好的类型（比字符串），以便我可以提取正确的信息？

如果有意义的话，我想我需要知道 EF [entity|table] 的 [member|column|field] 的类型。

编辑：

我尝试了建议的答案 - 动态 linq - 使用以下语法

```
string parmList = "Surname, Firstname, Address.Postcode";
var customers = myEntities.Customers.Select(parmList)
  .OrderBy("Address.Postcode"); 
```

但这会导致：`EntitySqlException was unhandled. 'Surname' could not be resolved in the current scope or context. Make sure that all referenced variables are in scope, that required schemas are loaded, and that namespaces are referenced correctly.`

所以，一个后续问题。我使用`Select`正确吗？我只看到了使用`Where`and`OrderBy`子句的示例，但我认为基于这些我做对了。

如果我的 Select 语法不是问题，谁能看到是什么？

编辑2：它是颠倒的。这有效：

```
string parmList = "Surname, Firstname, Address.Postcode";
var customers = myEntities.Customers
  .OrderBy("Address.Postcode")
  .Select(parmList); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:55:56.743

您可以使用*动态 linq*，请在[此处查看](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)。它也可以在[nuget上使用](http://nuget.org/packages/DynamicLINQ/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T17:23:21.590

> 我建议`dynamic linq`@Cuong 已经发布。

但是对于简单的`Select`预测和表达的手工练习......

**使用`LinqRuntimeTypeBuilder`**如何创建 LINQ 表达式树来[选择匿名类型](https://stackoverflow.com/questions/606104/how-to-create-linq-expression-tree-with-anonymous-type-in-it)
（请参阅那里的评论以了解“为什么”是必要的）

并**添加这个**...

```
public static IQueryable SelectDynamic(this IQueryable source, IEnumerable<string> fieldNames)
{
    Dictionary<string, PropertyInfo[]> sourceProperties = new Dictionary<string, PropertyInfo[]>();
    foreach (var propertyPath in fieldNames)
    {
        var props = propertyPath.Split('.');
        var name = props.Last();
        PropertyInfo[] infos;
        if (sourceProperties.TryGetValue(name, out infos))
            name = string.Join("", props);
        sourceProperties[name] = source.ElementType.GetDeepProperty(props);
    }

    Type dynamicType = LinqRuntimeTypeBuilder.GetDynamicType(sourceProperties.ToDictionary(x => x.Key, x => x.Value.Last().PropertyType));

    ParameterExpression sourceItem = Expression.Parameter(source.ElementType, "t");
    IEnumerable<MemberBinding> bindings = dynamicType.GetFields()
        .Select(p => Expression.Bind(p, sourceItem.MakePropertyExpression(sourceProperties[p.Name]))).OfType<MemberBinding>();

    Expression selector = Expression.Lambda(Expression.MemberInit(
        Expression.New(dynamicType.GetConstructor(Type.EmptyTypes)), bindings), sourceItem);

    MethodCallExpression selectExpression = Expression.Call(typeof(Queryable), "Select", new Type[] { source.ElementType, dynamicType }, Expression.Constant(source), selector);
    return Expression.Lambda(selectExpression).Compile().DynamicInvoke() as IQueryable;
}

public static PropertyInfo[] GetDeepProperty(this Type type, params string[] props)
{
    List<PropertyInfo> list = new List<PropertyInfo>();
    foreach (var propertyName in props)
    {
        var info = type.GetProperty(propertyName);
        type = info.PropertyType;
        list.Add(info);
    }
    return list.ToArray();
}

public static Expression MakePropertyExpression(this ParameterExpression sourceItem, PropertyInfo[] properties)
{
    Expression property = sourceItem;
    foreach (var propertyInfo in properties)
        property = Expression.Property(property, propertyInfo);
    return property;
} 
```

**像这样使用它**：

```
public static IEnumerable<object> 
    SelectAsEnumerable(this IQueryable entitySet, params string[] propertyPath)
{
    return entitySet.SelectDynamic(propertyPath) as IEnumerable<object>;
}
var list = db.YourEntity.SelectAsEnumerable("Name", "ID", "TestProperty.ID").ToList(); 
```

**注意：**
您可以使用类似的方法来扩展 OrderBy 等 - 但这并不意味着涵盖所有角度（或任何实际查询）

`Deep Property Expressions`从[我的这篇文章](https://stackoverflow.com/a/15975319/417747)

* * *

# php - Google Drive php UPDATE 脚本中的“PHP 致命错误：在非对象上调用成员函数 setTitle()”

> ID：15922550
> 
> 赞同：0
> 
> 时间：2013-04-10T09:53:35.753
> 
> 标签：php, google-api, google-drive-api, google-api-php-client

我正在使用这个 php 脚本将文件**插入**（上传）到我的 Google 云端硬盘，并且非常完美：

```
require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_DriveService.php';

$drive = new Google_Client();

$drive->setClientId('XXX');
$drive->setClientSecret('YYY');
$drive->setRedirectUri('urn:ietf:wg:oauth:2.0:oob');
$drive->setScopes(array('https://www.googleapis.com/auth/drive'));

$gdrive = new Google_DriveService($drive);

$drive->setAccessToken(file_get_contents('token.json'));

$doc = new Google_DriveFile();

$doc->setTitle('Test');
$doc->setDescription('Test Document');
$doc->setMimeType('text/plain');

$content = file_get_contents('test.txt');

$output = $gdrive->files->insert($doc, array(
      'data' => $content,
      'mimeType' => 'text/plain',
    ));

print_r($output); 
```

现在我想**更新**（不上传）我现有的 Google Drive 文件，我正在使用这个脚本：

```
require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_DriveService.php';

$drive = new Google_Client();

$drive->setClientId('XXX');
$drive->setClientSecret('YYY');
$drive->setRedirectUri('urn:ietf:wg:oauth:2.0:oob');
$drive->setScopes(array('https://www.googleapis.com/auth/drive'));

$gdrive = new Google_DriveService($drive);

$drive->setAccessToken(file_get_contents('token.json'));

$fileId = "ZZZ";
$doc = $gdrive->files->get($fileId);

$doc->setTitle('Test'); // HERE I GET THE ERROR "CALL TO A MEMBER FUNCTION SETTITLE()..."
$doc->setDescription('Test Document');
$doc->setMimeType('text/plain');

$content = file_get_contents('test.txt');

$output = $gdrive->files->update($fileId, $doc, array(
      'newRevision' => $newRevision,
      'data' => $content,
      'mimeType' => 'text/plain',
    ));

print_r($output); 
```

不幸的是，我收到了这个错误：

```
PHP Fatal error: Call to a member function setTitle() on a non-object in line $doc->setTitle... 
```

我遵循了[这个参考。](https://developers.google.com/drive/v2/reference/files/update#examples)请你能帮我解决这个问题，或者你能建议通过php将文件更新到谷歌驱动器的精确和正确的代码吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T10:02:16.217

您期望`$doc`成为一个对象，这不是因为 Google 客户端库被[配置为默认返回数据数组而不是对象](http://code.google.com/p/google-api-php-client/source/browse/trunk/src/config.php#19)。

要在不修改原始源的情况下更改此行为，您可以在具有以下内容`local_config.php`的现有文件旁边添加一个文件：`config.php`

```
<?php

$apiConfig = array(
    'use_objects' => true,
); 
```

客户端库将自动检测并使用此配置。

# gruntjs - Grunt：在 usemin 中包含一个生成的文件

> ID：15922554
> 
> 赞同：1
> 
> 时间：2013-04-10T09:53:48.453
> 
> 标签：gruntjs, yeoman

这是我的相关部分`index.html`：

```
<!-- build:js scripts/scripts.js -->
<script src="scripts/vendor/jquery.js"></script>
<script src="scripts/vendor/bootstrap.min.js"></script>
<script src="scripts/vendor/handlebars.runtime.js"></script>
<script src="scripts/vendor/ember.js"></script>
<script src="scripts/vendor/ember-data.js"></script>
<script src="scripts/templates.js"></script>
<script src="scripts/neuterapp.js"></script>
<!-- endbuild --> 
```

（但最后两个条目是错误的，这实际上是我的问题）

这是相关部分`Gruntfile.js`：

```
 useminPrepare: {
        html: '<%= yeoman.app %>/index.html',
        options: {
            dest: '<%= yeoman.dist %>'
        }
    },
    usemin: {
        html: ['<%= yeoman.dist %>/*.html'],
        css: ['<%= yeoman.dist %>/styles/*.css'],
        options: {
            dirs: ['<%= yeoman.dist %>']
        }
    }, 
```

我遇到的问题是`templates.js`和都是生成的文件，`neuterapp.js`所以它们不在.`<%= yeoman.app %>/scripts``<%= yeoman.dist %>/scripts`

这是我的（简化的）目录结构：

```
webapp/
├── app
│   ├── app.js <--- for neuter
│   ├── controllers
│   ├── index.html
│   ├── models
│   ├── routes
│   ├── scripts
│   │   └── vendor <--- for usemin
│   ├── templates <--- for ember_templates
│   │   ├── template1.hbs
│   │   └── template2.hbs
│   └── views
├── dist
│   ├── index.html
│   └── scripts
│       ├── neuterapp.js <--- this must also be used for usemin!!!
│       └── templates.js <--- this must also be used for usemin!!!
└── Gruntfile.js 
```

我怎么知道`usemin`包含一些生成的文件？

如果需要，这些是 和 的`neuter`配置`ember_templates`：

```
 neuter: {
        options: {
            includeSourceURL: true
        },
        '<%= yeoman.dist %>/scripts/neuterapp.js': '<%= yeoman.app %>/app.js'
    },
    ember_templates: {
        compile: {
            options: {
                templateName: function (sourceFile) {
                    return sourceFile.replace(/app\/templates\//, ''); // <%= yeoman.dist %>/scripts/
                }
            },
            files: {
                '<%= yeoman.dist %>/scripts/templates.js': [
                    '<%= yeoman.app %>/templates/**/*.hbs'
                ]
            }
        }
    }, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:52:01.053

您可以使用[复制任务](https://github.com/gruntjs/grunt-contrib-copy)在临时位置准备 usemin 需要的内容。

我建议你做什么：

*   将您需要的应​​用程序文件从**应用**程序复制到**临时**
*   让生成文件的任务输出到**temp**
*   让您的`usemin`&`useminPrepare`任务在**temp**上运行并输出到**dist**。

# java - 如何在Android中更改手机号码？

> ID：15922557
> 
> 赞同：0
> 
> 时间：2013-04-10T09:53:55.213
> 
> 标签：java, android

在我的应用程序中，我有三个编辑文本，并且我使用共享首选项来存储这些数字。我想从共享偏好中获取数字并显示在编辑文本中，我也想编辑文本。当我运行下面的代码时，我得到了 NullPointerException。有人可以帮助我吗？

```
 public void onCreate(Bundle savedInstanceState)
     {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.change_cell_number);
        init();
        /*SharedPreferences sharedPref=this.getSharedPreferences("MY_PREF_2",MODE_WORLD_READABLE);
        SharedPreferences.Editor shredPref_Editor=sharedPref.edit();
        shredPref_Editor.putString(MY_ACTIVITY,"changeSMSnumber");
        shredPref_Editor.commit();

        SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(ChangeSmsNumber_Activity.this);
        String servername = settings.getString("sharedPreferencesKey", "defaultValue");
        //server.setText(servername);  
        */      

        btnSubmit.setOnClickListener(new OnClickListener() 
        {

            @SuppressWarnings("unused")
            @Override
            public void onClick(View arg0) 
            {
                // TODO Auto-generated method stub
                String numberISD=edtxt_ISD_Code1.getText().toString();

                if(edtxt_ISD_Code1.getText().toString().isEmpty()) 
                {
                    Toast.makeText(getApplicationContext(),"Enter ISD 1st Number * ", Toast.LENGTH_SHORT).show();
                }
                else if(edtxt_Cell_Number1.getText().toString().isEmpty())
                {
                    Toast.makeText(getApplicationContext(),"Enter 1st Number *", Toast.LENGTH_SHORT).show();
                }

                else

                {

                    String strSign1 = edtxt_PlusSign1.getText().toString();
                    String strSign2 = edtxt_PlusSign2.getText().toString();
                    String strSign3 = edtxt_PlusSign3.getText().toString();
                    String strSign4 = edtxt_PlusSign4.getText().toString();
                    String strSign5 = edtxt_PlusSign5.getText().toString();

                    String strIsd1 = edtxt_ISD_Code1.getText().toString();
                    String strIsd2 = edtxt_ISD_Code2.getText().toString();
                    String strIsd3 = edtxt_ISD_Code3.getText().toString();
                    String strIsd4 = edtxt_ISD_Code4.getText().toString();
                    String strIsd5 = edtxt_ISD_Code5.getText().toString();

                    String strNum1 = edtxt_Cell_Number1.getText().toString();
                    String strNum2 = edtxt_Cell_Number2.getText().toString();
                    String strNum3 = edtxt_Cell_Number3.getText().toString();
                    String strNum4 = edtxt_Cell_Number4.getText().toString();
                    String strNum5 = edtxt_Cell_Number5.getText().toString();

                    String final_Num_1 =  strSign1 + strIsd1 + strNum1;
                    String final_Num_2 =  strSign2 + strIsd2 + strNum2;
                    String final_Num_3 =  strSign3 + strIsd3 + strNum3;
                    String final_Num_4 =  strSign4 + strIsd4 + strNum4;
                    String final_Num_5 =  strSign5 + strIsd5 + strNum5;

                    SharedPreferences settings = ChangeSmsNumber_Activity.this.getSharedPreferences("MyPref_CellNumber",0);
                    strGetCellNum = settings.getString("num1", "n/a"); 
                    final_Num_1=strGetCellNum;

                }

            }
        });
    } 
```

请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:04:50.317

```
sharedPref=this.getSharedPreferences("MY_PREF_2",MODE_PRIVATE);
String number= sharedPref.getString("KeyValue","defaultValue")//you can use defaultValue="" 
```

用于在 Edittext 中设置

```
editText.setText(number); 
```

# spring - Spring 忽略了 Apache Shiro Realm 类中的 @Transactional 注释

> ID：15922559
> 
> 赞同：6
> 
> 时间：2013-04-10T09:54:02.067
> 
> 标签：spring, hibernate, shiro

我正在使用 Spring 进行 IOC 和事务管理，并计划使用 Apache Shiro 作为安全库。

每当我想检查用户的权限时，我都会调用`subject.isPermitted("right")`，然后 Shiro 使用数据存储检查权限。在这些调用中，建立了一个数据库连接，并且我用`@Transactional`. 但是，每当我执行权限检查时，我总是收到一个错误，即没有绑定到线程的 Hibernate 会话。

该方法在 Realm 类中。我定义了一个自定义 Shiro Realm 类：

```
@Component
public class MainRealm extends AuthorizingRealm {

@Autowired
protected SysUserDao userDao;

@Transactional
protected AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken token)
        throws AuthenticationException {
    ...
    final SysUser user = this.userDao.findByUsername(un);
    ...
    return authInfo;
}

@Transactional
protected AuthorizationInfo doGetAuthorizationInfo(PrincipalCollection principals) {
    ...
    permissions = this.userDao.getAccessRights(un);
    ...
    return authInfo;
}
} 
```

Apache Shiro 使用 Servlet 过滤器，所以我在 web.xml 中定义了以下内容：

```
<filter>
    <filter-name>shiroFilter</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    <init-param>
        <param-name>targetFilterLifecycle</param-name>
        <param-value>true</param-value>
    </init-param>
</filter> 
```

我正在为 Spring 使用编程配置。这是我的 App Config 类：

```
@Configuration //Replaces Spring XML configuration
@ComponentScan(basePackages = "com.mycompany")
@EnableTransactionManagement //Enables declarative Transaction annotations
public class SpringAppConfig {

@Bean
public DataSource sqlServerDataSource() throws Exception {...}
@Bean
@Autowired
public PlatformTransactionManager transactionManager(SessionFactory sessionFactory) {...}
@Bean
public AnnotationSessionFactoryBean getSessionFactory() throws Exception {...}
@Bean
public static PersistenceExceptionTranslationPostProcessor exceptionTranslation() {...}

@Bean
@Autowired
public DefaultWebSecurityManager securityManager(MainRealm mainRealm) {
    final HashedCredentialsMatcher hcm = new HashedCredentialsMatcher(shiroHash);
    hcm.setHashIterations(shiroIter);
    hcm.setStoredCredentialsHexEncoded(shiroHexEncoded);
    mainRealm.setCredentialsMatcher(hcm);
    final DefaultWebSecurityManager sm = new DefaultWebSecurityManager();
    sm.setRealm(mainRealm);
    return sm;
}

@Bean
@Autowired
public ShiroFilterFactoryBean shiroFilter(DefaultWebSecurityManager securityManager) {
    final ShiroFilterFactoryBean filter = new ShiroFilterFactoryBean();
    filter.setSecurityManager(securityManager);
    return filter;
}

/**
 * This method needs to be static due to issues defined here:<br>
 * https://issues.apache.org/jira/browse/SHIRO-222
 */
@Bean
public static LifecycleBeanPostProcessor lifecycleBeanPostProcessor() {
    LifecycleBeanPostProcessor lbpp = new LifecycleBeanPostProcessor();
    return lbpp;
}

@Bean
@DependsOn("lifecycleBeanPostProcessor")
public static DefaultAdvisorAutoProxyCreator defaultAdvisorAutoProxyCreator() {
    return new DefaultAdvisorAutoProxyCreator();
}

@Bean
@Autowired
public AuthorizationAttributeSourceAdvisor authorizationAttributeSourceAdvisor(DefaultWebSecurityManager secMan) {
    AuthorizationAttributeSourceAdvisor advBean = new AuthorizationAttributeSourceAdvisor();
    advBean.setSecurityManager(secMan);
    return advBean;
}
} 
```

总结一下这个问题，我相信我的 MainRealm 类连接正确（它有一个对 DAO 对象的 @Autowired 依赖项，我验证它不为空），但 @Transactional 注释除外。因此，我无法直接调用`user.isPermitted("")`，因为它会提示错误：`No Hibernate Session bound to thread, and configuration does not allow creation of non-transactional one here`.

想寻求帮助以检查我是否错过了 Spring 配置中的任何内容。

与此同时，我通过`user.isPermitted("")`在我的服务类中的一个方法中调用该函数来解决这个问题，该方法被@Transactional正确绑定。

**编辑**当我检查 Spring 初始化的日志时，我可以看到：

```
Bean 'mainRealm' of type [class com.x.security.MainRealm] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying) 
```

根据[这个 SO answer](https://stackoverflow.com/a/12359607/751634)，这意味着`MainRealm`事务管理器没有进行后处理，因此任何 @Transactional 注释都会被忽略。如果是这样，我该如何纠正？

**编辑2**根据[这个SO问题](https://stackoverflow.com/a/1385181/751634)：“换句话说，如果我编写自己的BeanPostProcessor，并且该类直接引用上下文中的其他bean，那么那些引用的bean将不符合自动代理的条件，并且会记录一条消息那种效果。” 我刚刚检查了一下`ShiroFilterFactoryBean`，它实际上是一个 BeanPostProcessor。问题是它需要一个`SecurityManager`实例，而这个实例又需要一个`MainRealm`实例。所以这两个 bean 都是自动装配的，因此没有资格进行代理。我觉得我更接近解决方案，但我仍然无法解决它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T04:34:36.533

问题的根本原因实际上是由于以下几点：

**所有 BeanPostProcessor 及其直接引用的 bean 都将在启动时实例化...由于 AOP 自动代理是作为 BeanPostProcessor 本身实现的，因此没有 BeanPostProcessor 或直接引用的 bean 有资格进行自动代理（因此不会将方面“编织”到他们。**

引用的 SO 问题在[这里](https://stackoverflow.com/questions/1201726/tracking-down-cause-of-springs-not-eligible-for-auto-proxying)。

我通过将 Realm bean 创建与 SecurityManager bean 创建解耦解决了这个问题。

相关更改来自以下代码：

```
@Bean
@Autowired
public DefaultWebSecurityManager securityManager(MainRealm mainRealm) {
    final HashedCredentialsMatcher hcm = new HashedCredentialsMatcher(shiroHash);
    hcm.setHashIterations(shiroIter);
    hcm.setStoredCredentialsHexEncoded(shiroHexEncoded);
    mainRealm.setCredentialsMatcher(hcm);
    final DefaultWebSecurityManager sm = new DefaultWebSecurityManager();
    sm.setRealm(mainRealm);
    return sm;
} 
```

到以下代码：

```
@Bean
public DefaultWebSecurityManager securityManager() {
    final DefaultWebSecurityManager sm = new DefaultWebSecurityManager();
    //sm.setRealm(mainRealm); -> set this AFTER Spring initialization so no dependencies
    return sm;
} 
```

然后我使用一个 ServletContextListener 来监听 Spring 上下文初始化完成的时间，并且我同时拥有`MainRealm`和`SecurityManager`bean。然后我只是把一个豆子塞进另一个豆子里。

```
@Override
public void contextInitialized(ServletContextEvent sce) {
    try {

        //Initialize realms
        final MainRealm mainRealm = (MainRealm)ctx.getBean("mainRealm");
        final DefaultWebSecurityManager sm = (DefaultWebSecurityManager)ctx.getBean("securityManager");
        sm.setRealm(mainRealm);
    } catch (Exception e) {
        System.out.println("Error loading: " + e.getMessage());
        throw new Error("Critical system error", e);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T15:06:55.650

`@Transactional`注释可以在之前使用：

*   接口定义
*   接口方法
*   类定义
*   一个类的**PUBLIC**方法

如[文档中所述](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/htmlsingle/#transaction-declarative-annotations)

您的方法`protected`必须是您的问题的原因，并且您的服务方法可能已声明为`public`这将解释为什么它在这种情况下有效

# javascript - JQuery 自动点击

> ID：15922560
> 
> 赞同：0
> 
> 时间：2013-04-10T09:54:02.920
> 
> 标签：javascript, jquery

我有一个问题，我有 3 个按钮，可以说它被称为**#pos1、#pos2 和 #pos3**。我想让它**在 2 秒内自动单击 #pos1 按钮，然后在 2 秒后单击 #pos2 ，再在 2 秒后单击 #pos3 ，然后再在 2 秒内** 返回到 #pos1 ，依此类推。

HTML

```
<button id="pos1">Pos1</button> 
<button id="pos2">Pos2</button> 
<button id="pos3">Pos3</button> 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:09:25.247

尝试

```
$(function() {
    var timeout;
    var count = $('button[id^=pos]').length;
    $('button[id^=pos]').click(function() {
        var $this = $(this);
        var id = $this.attr('id');
        var next = parseInt(id.substring(4), 10) + 1;

            if( next >= count ){
                next = 1
            }

        if (timeout) {
            clearTimeout(timeout);
        }

        timeout = setTimeout(function() {
                    $('#pos' + next).trigger('click');
                }, 2000);
    })
    timeout = setTimeout(function() {
        $('#pos1').trigger('click');
    }, 2000);
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:05:04.847

如果我理解你的问题是正确的，你需要按**pos1>pos2>pos3>pos1>pos2**等顺序连续循环执行单击。如果这是你想要的，你可以使用 jQuery `window.setTimeout`。代码将是这样的：

```
window.setTimeout(performClick, 2000);
var nextClick = 1;

function performClick() {
  if(nextClick == 1)
  { 
      $("#pos1").trigger("click");
      nextClick = 2;
  }
  else if(nextClick==2)
  {
      $("#pos2").trigger("click");
      nextClick = 3;
  }
  else if(nextClick == 3)
  {
      $("#pos3").trigger("click");
      nextClick = 1;
  }

  window.setTimeout(performClick, 2000);
} 
```

这是相当多的错误，但会解决你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:04:32.407

好吧，我不知道您已经拥有什么，但从技术上讲，它可以通过 triggerHandler() 完成

```
var currentPos = 1,
    posCount   = 3; 

autoclick = function() {
    $('#pos'+currentPos).triggerHandler('click');
    currentPos++;
    if(currentPos > posCount) { currentPos = 1; }
};

window.setInterval(autoclick,2000); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T10:08:30.610

使用[setInterval()](https://developer.mozilla.org/en/docs/DOM/window.setInterval)

> 重复调用函数或执行代码片段，每次调用该函数之间有固定的时间延迟。

```
var tempArray = ["pos1", "pos2", "pos3"]; //create an array to loop through
var arrayCounter = 0;

setInterval(function() {
  $('#' + tempArray[arrayCounter ]).trigger('click');
   arrayCounter = arrayCounter <2 ? arrayCounter +1 : 0;
}, 2000); 
```

[在这里摆弄](http://jsfiddle.net/bipen/vK4UY/2/)

检查您的控制台以获取小提琴示例

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T10:03:21.440

```
var posArray = ["#pos1", "#pos2", "#pos3"];
var counter = 0;

setInterval(function() {
   $(posArray[counter]).triggerHandler('click');
   counter = ((counter<2) ? counter+1 : 0);
}, 2000); 
```

这应该可以解决问题，尽管您没有提及何时希望它停止运行。

# iphone - cocos3d中的3d对象旋转问题

> ID：15922563
> 
> 赞同：0
> 
> 时间：2013-04-10T09:54:10.710
> 
> 标签：iphone, ios, blender, collada, cocos3d

我使用**Blender**创建了一个 3d 对象并导出为 collada 形式。**并使用PVRGeoPod**转换为 pod 文件。我将 pod 文件添加到 cocos3d 项目资源中。然后通过替换 pod 名称和节点名称来更改**hello-world 项目**。我没有进行任何其他更改。当我运行项目时，我可以看到 3d 对象，但它没有旋转。我遵循了 Brenwill 教程中的确切步骤。当我使用其他内置吊舱时，我可以看到它在旋转。还有其他我应该做的步骤吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T05:16:41.647

Frnds，我自己找到的。我的节点名称有问题。所以我给了自定义节点名称

```
 [self addContentFromPODResourceFile: @"BlueBall.pod" withName:@"obj"];
    CC3MeshNode* ball = (CC3MeshNode*)[self getNodeNamed: @"obj"]; 
```

现在它确实有效。因此，每当我们对节点名称有混淆时，我们可以通过自定义给出。

# php - 比较/检查 MySQL 中的两个表数据

> ID：15922565
> 
> 赞同：0
> 
> 时间：2013-04-10T09:54:13.080
> 
> 标签：php, mysql

我需要一点帮助来检查数据。我有两张桌子。我想检查 file_name in`tableA`是否包含在`tableB`. 如果不是，那么结果就是`file_name`这个。

```
select * from tableA;
| id | file_name
+---+----------
|  1 | apple.jpg 
|  2 | green_apple.jpg
|  3 | red_apple.jpg
|  4 | apple1.jpg
|  5 | apple-juce.jpg

////////////////////////////////////////////

select * from tableB;

| id |  title   |content 
+----+----------+--------
|  1 |  title1  | <img style="border:1px dotted;width:463px;height:611px;margin-left:20px;float:right;padding:3px;" src="image/green_apple.jpg" /><p>Lorem Ipsum is simply <b>dummy text</b> of the printing and typesetting industry. </p>
|  2 |  title2  | <p>Lorem Ipsum is simply <b>dummy text</b> of the printing and typesetting industry. </p><img style="border:1px dotted;width:463px;" src="image/apple.jpg" />
|  3 |  title3  | <img style="border:1px dotted;width:463px;" src="image/apple.jpg" /><p>Lorem Ipsum is simply <b>dummy text</b> of the printing and typesetting industry. </p><img style="border:1px dotted;width:463px;" src="image/apple.jpg" />
|  4 |  title4  | <img style="border:1px dotted;width:463px;" src="image/red_apple.jpg" /><p>Lorem Ipsum is simply <b>dummy text</b> of the printing and typesetting industry. </p><img style="border:1px dotted;width:463px;" src="image/apple.jpg" />
|  5 |  title5  | <p>Lorem Ipsum is simply <b>dummy text</b> of the printing and typesetting industry. </p><img style="border:1px dotted;width:463px;" src="image/apple1.jpg" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:15:01.663

我不能得到你想要的东西。但是这个查询可能对你有帮助。。

首先，您在 tableA 中有文件名，并且该文件名包含在 tableB 的内容中。因此，首先您要搜索该名称是否存在...之后您可以使用 NOT IN 来选择您想要的数据（如果 tableB 中不存在）。

```
 "select file_name from tableA where file_name like '%$search%' 
    AND file_name NOT IN (select content from tableB where file_name like '%$search%'); 
    "; 
```

# android - 在 Android 上从包中检索数据时出现 ClassCastException

> ID：15922572
> 
> 赞同：8
> 
> 时间：2013-04-10T09:54:34.377
> 
> 标签：android, serialization, bundle

我有一些想要在片段的生命周期中保存的状态。例如，当屏幕旋转时它工作正常，但是当进程被杀死并从磁盘恢复时（我认为这就是它的工作方式），我得到一个 ClassCastException。这是一些代码：

初始化：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (savedInstanceState == null) {
        playlistsMap = new LinkedHashMap<Section, List<Playlist>>();
    } else {
        playlistsMap = (LinkedHashMap<Section, List<Playlist>>) savedInstanceState.getSerializable(PLAYLISTS_MAP_KEY);
    }
    setHasOptionsMenu(true);
} 
```

保存数据：

```
@Override
public void onSaveInstanceState(Bundle outState) {
    if (isEverySectionsLoaded()) {
        outState.putSerializable(PLAYLISTS_MAP_KEY, playlistsMap);
    } else {
        outState.putSerializable(PLAYLISTS_MAP_KEY, new LinkedHashMap<Section, List<Playlist>>());
    }
    // ...
} 
```

我从演员中得到的例外`onCreate`：

```
04-10 01:06:43.430 E/AndroidRuntime(28549): FATAL EXCEPTION: main
04-10 01:06:43.430 E/AndroidRuntime(28549): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mydomain.android/com.mydomain.android.ui.MainActivity}: 
java.lang.ClassCastException: java.util.HashMap cannot be cast to java.util.LinkedHashMap 
```

我知道在 Android 上使用 parcelables 会更好，但我仍然不明白这怎么可能发生。

有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-10T10:23:11.047

可以在[此处找到有关类似问题的有趣阅读](https://code.google.com/p/android/issues/detail?id=3847)

> 任何同时实现 java.util.List 和 java.io.Serializable 的对象都会在 intent.putExtra(EXTRA_TAG, suchObject)/startActivity(intent)/intent.getSerializableExtra(EXTRA_TAG) 之后变成 ArrayList。

我敢说，对于任何实现可序列化和映射的东西，同样重要。该 HashMap 是您将返回的默认值。

围绕这个看起来像错误的解决方案类似于：

```
private LinkedHashMap<Section, List<Playlist>> playlistsMap;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (savedInstanceState == null) {
        playlistsMap = new LinkedHashMap<Section, List<Playlist>>();
    } else {
        //assuming the bug returns a hashmap
        Map<Section, List<Playlist>> items = (Map<Section, List<Playlist>>) savedInstanceState.getSerializable(PLAYLISTS_MAP_KEY);

        //this way you can ensure you are working with a linkedHashMap. 
        //for the rest off the application
        playlistsMap.putAll(items);
    }
    setHasOptionsMenu(true);
} 
```

上面的代码未经测试，但应该可以工作。当由于使用接口而修复错误时，此代码仍然有效。因此，当您的客户端获得 android 更新时，您可以放心，您的代码仍应执行相同操作，而不是崩溃并抱怨您无法将 HashMap 转换为 LinkedHashMap。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-10T10:06:40.010

问题是返回的引用根本不是对`LinkedHashMap`. 如果函数 Return `LinkedHashMap`只返回 a `LinkedHashMap`，则不能将其强制转换为 HashMap。

# c# - 递归查找数组中的值

> ID：15922574
> 
> 赞同：0
> 
> 时间：2013-04-10T09:54:37.770
> 
> 标签：c#, arrays, recursion

我正在尝试使用特定方法在数组中查找值。

```
public void findElement(int valueToFind)
{
    FindElementInArray(valueToFind, 0, _array.Length - 1);
}

public void FindElementInArray(int value, int lb, int rb)
    {          
        int currIndex = (rb - lb) / 2;
        if (_array[currIndex] == value)
        {
            //Value found
            Console.WriteLine("Value found");
            return;
        }

        //If found value is smaller than searched value
        else if (_array[currIndex] < value)
        {
            FindElementInArray(value, currIndex+1, rb);
        }

        //If found value is bigger than searched value
        else
        {
            FindElementInArray(value, lb, currIndex - 1);
        } 
```

所以我搜索数组的中间，如果值大于我们要找的值，我们搜索左半边的中间，依此类推......

但即使它们在数组中，它也找不到一些值。有人能看出错误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T09:59:27.950

您使用的索引错误。

```
int currIndex = (rb - lb) / 2; 
```

您需要获得 rb 和 lb 的中点，即：

```
int currIndex = lb + (rb - lb) / 2;
// or
// int currIndex = (lb + rb) / 2; 
```

如果该值不存在，您还需要以某种方式退出递归，因为目前它只会继续并导致堆栈溢出。您可以通过检查确保`lb`和`rb`不同来做到这一点，例如：

```
if (_array[currIndex] == value)
{
    //Value found
    Console.WriteLine("Value found");
    return;
}
else if (lb != rb)
{
    //If found value is smaller than searched value
    else if (_array[currIndex] < value)
    {
        FindElementInArray(value, currIndex+1, rb);
    }

    //If found value is bigger than searched value
    else
    {
        FindElementInArray(value, lb, currIndex - 1);
    }   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:00:41.017

```
int currIndex = (rb - lb) / 2; 
```

应该

```
int currIndex = (rb + lb) / 2; 
```

你需要找到一个中点。

# c++ - 从 C++ 中用户定义数据类型的向量中删除元素

> ID：15922575
> 
> 赞同：1
> 
> 时间：2013-04-10T09:54:38.573
> 
> 标签：c++

我的结构如下所示：

```
 struct A{
     int t; int j;} 
```

struct A 的对象包含以下值：

```
 t      j
     20     191
     111    18
     888    90 
```

我将所有这些对象保存在 std::vector 中。现在我想从这个向量中删除 t==111 和 j<20 的元素。现在我正在迭代向量，以便以下面给出的方式删除元素：

```
std::vector<A>::size_type i = 0;
while ( i < v.size() ) {
    if ( (v[i].t==111) && (v[i].j<20) ) {
        v.erase( v.begin() + i );
    } else {
        ++i;
    }
} 
```

除了迭代之外，还有更好的方法来删除用户定义数据类型的 std::vector 中的元素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T09:57:03.967

是的：

```
#include <algorithm>

v.erase(std::remove_if(v.begin(), v.end(),
                       [](A const & x) { return x.t == 111 && x.j < 20; }),
        v.end()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T09:57:14.597

听起来你想使用擦除[删除成语](http://en.wikipedia.org/wiki/Erase-remove_idiom)[`std::remove_if`](http://en.cppreference.com/w/cpp/algorithm/remove)：

```
v.erase(std::remove_if(v.begin(), v.end(), [](const A& a) {
  return a.t == 111 && a.j < 20;
}), v.end()); 
```

这基本上将 lambda 为其返回的所有元素移动`true`到向量的后面，然后一次性将它们全部擦除。

# arrays - x86 asm 更改 char 数组值

> ID：15922583
> 
> 赞同：0
> 
> 时间：2013-04-10T09:54:53.043
> 
> 标签：arrays, assembly, x86

我有一个这样的数组：

```
msg_values db "a=   b=   " 
```

我需要插入字符，让我们在 'a=' 之后说 '5' 得到：

```
"a=5  b=   " 
```

有人可以举个例子吗？非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:58:37.007

为此（在 NASM 语法中）：

```
mov [msg_values+2], byte '5' 
```

其他一些汇编器想要`byte ptr`而不是仅`byte`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:59:00.337

写入数组的地址，偏移要更改的元素的索引。确切的语法取决于您使用的汇编程序。例如，它可能是：

```
mov byte ptr [msg_values+2], '5' 
```

要不就

```
mov byte [msg_values+2], '5' 
```

您还可以将地址加载到寄存器中并使用寄存器间接寻址：

```
lea esi, [msg_values]
mov byte ptr [esi+2], '5' 
```

# java - 单击运行 start.jar 文件按钮。阿帕奇索尔

> ID：15922586
> 
> 赞同：0
> 
> 时间：2013-04-10T09:54:58.417
> 
> 标签：java, apache, solr, jar

我想运行`start.jar`文件，`button`点击后，我找到了这个，试过了，它可以工作其他`.jar`文件

```
Runtime.getRuntime().exec("java -jar C:/Users/User/Desktop/Folders/apache-solr-4.0.0/example/start.jar"); 
```

在这段代码之后，我看，，`http://localhost:8983/solr/`看到了，这段代码不起作用`start.jar`，我该怎么办？

# android - 谷歌是否允许在我们的应用程序中下载 youtube 视频

> ID：15922588
> 
> 赞同：1
> 
> 时间：2013-04-10T09:55:03.930
> 
> 标签：android

目前我正在开发一个安卓应用程序，其中我们具有下载 youtube 视频的功能，谷歌也允许在我们的应用程序中下载 youtube 视频

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T10:25:14.397

据我所知，您不能直接这样做..

目前你正在做的是，在 url 上打开一个 http 连接，然后保存缓冲区。

根据谷歌的线程，这是不允许的

[http://support.google.com/youtube/bin/answer.py?hl=en&answer=56100](http://support.google.com/youtube/bin/answer.py?hl=en&answer=56100)

但当然还有其他方法：

就像我在其他网站上注意到的一样，他们自己在dailymotion等网站上上传内容，然后创建一个新网站，在其中提供此视频上传网站链接，然后他们说“这是第三方内容，我们不托管此视频"

这样做基本上是为了避免版权法。

在这种情况下，视频创作者将不得不起诉dailymotion之类的网站，而不是视频上传者，这对于小玩家来说并不容易。

但是他们再次请专家律师告诉他们可以做些什么来避免版权并让他们的@ss陷入困境，因为他们基本上是在利用一些漏洞。

所以无论你做什么，你都需要专家的建议，因为直接，这是非法的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:57:48.320

不，那将是非法的。谷歌不允许这样做。您只能在 web 视图中查看视频。
**[编辑]**
您可以在任何视图中流式传输视频。但我不知道那个人的法律后果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T10:02:52.213

```
URL u = null;
InputStream is = null;  

     try {
              u = new URL(url);
              is = u.openStream(); 
              HttpURLConnection huc = (HttpURLConnection)u.openConnection();//to know the size of video
              int size = huc.getContentLength();                 

          if(huc != null){
              String fileName = "FILE.mp4";
              String storagePath = Environment.getExternalStorageDirectory().toString();
              File f = new File(storagePath,fileName);

              FileOutputStream fos = new FileOutputStream(f);
              byte[] buffer = new byte[1024];
              int len1 = 0;
              if(is != null){
                 while ((len1 = is.read(buffer)) > 0) {
                       fos.write(buffer,0, len1);   
                 }
              }
              if(fos != null){
                 fos.close();
              }
          }                     
     }catch (MalformedURLException mue) {
            mue.printStackTrace();
     } catch (IOException ioe) {
            ioe.printStackTrace();
    } finally {
               try {                
                 if(is != null){
                   is.close();
                 }
               }catch (IOException ioe) {
                     // just going to ignore this one
               }
    } 
```

这在某些情况下有效，在某些情况下无效。在这种情况下，您需要从 html 源代码中获取 url，删除不必要的内容并使用此代码解码 url 以下载。

[从此链接](https://stackoverflow.com/a/9497608/2021499)复制的答案

# asp.net - 如何在asp.net中全局调用包含会话变量的代码？

> ID：15922596
> 
> 赞同：0
> 
> 时间：2013-04-10T09:55:17.023
> 
> 标签：asp.net, asp.net-mvc

我需要在我的 asp.net 应用程序中全局定义代码。但是我的代码包含会话变量..我将在哪里编写这些全局函数。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:03:05.300

您可以将代码放在任何引用`System.Web.dll`. 在您的代码中使用访问会话

```
System.Web.HttpContext.Current.Session["key"] 
```

# android - 通过android中的端口获取视频输入

> ID：15922597
> 
> 赞同：-1
> 
> 时间：2013-04-10T09:55:17.980
> 
> 标签：android

我想知道是否有一种方法可以使用端口将视频流通过计算机（任何硬件）传递到 android。有办法吗？我正在寻找的是一种从端口获取视频然后使用 openCV 或其他方式对其进行操作的方法。谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:44:05.487

不幸的是，没有办法从外部输入（例如外部摄像头或某事）获取数据，因为没有主机和手机可以做到这一点。我们可以连接到手机的所有设备都是键盘、闪存盘、鼠标......

# mysql - 将参数传递给 mySQL 数据库的 IdbCommand

> ID：15922599
> 
> 赞同：0
> 
> 时间：2013-04-10T09:55:24.603
> 
> 标签：mysql, sql-insert, idbconnection, idbcommand

我正在尝试使用 IdbCommand 做一些相对简单的事情来执行插入查询。

这是代码：

```
using (IDbConnection conn = DbHelper.GetConnection(DbConnString))
        using (IDbCommand com = conn.CreateCommand())
        {
            com.CommandType = CommandType.Text;
            com.CommandText =
                String.Format(
                    "INSERT INTO {0} (`Date`, User, Type, `Comment`) VALUES (@Date, @User, @Type, @Comment);",
                    TableName);
            conn.Open();

            var parameterDate = com.CreateParameter();
            parameterDate.ParameterName = "@Date";
            parameterDate.Value = entry.Date;
            parameterDate.DbType = DbType.DateTime;
            com.Parameters.Add(parameterDate);

            var parameterUser = com.CreateParameter();
            parameterUser.ParameterName = "@User";
            parameterUser.Value = entry.User;
            parameterUser.DbType = DbType.String;
            com.Parameters.Add(parameterUser);

            var parameterLogType = com.CreateParameter();
            parameterLogType.ParameterName = "@Type";
            parameterLogType.Value = entry.Type;
            parameterLogType.DbType = DbType.Int32;
            com.Parameters.Add(parameterLogType);

            var parameterComment = com.CreateParameter();
            parameterComment.ParameterName = "@Comment";
            parameterComment.Value = entry.Comment;
            parameterComment.DbType = DbType.String;
            com.Parameters.Add(parameterComment);

            com.ExecuteNonQuery(); 
```

但是我不断收到带有消息“列'日期'不能为空”的 MySqlException。

我所有的选择都工作正常，只是这个插入有问题，我看不出它有明显的问题。

该参数在运行时使用有效的 DateTime 填充。我认为这可能与 Date 是保留字并且需要反引号有关，但这就是在线教程所推荐的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:19:57.283

找到了！

由于某种原因而不是@，它需要？

所以工作代码是：

```
 using (IDbConnection conn = DbHelper.GetConnection(DbConnString))
        using (IDbCommand com = conn.CreateCommand())
        {
            com.CommandType = CommandType.Text;
            com.CommandText =
                String.Format(
                    "INSERT INTO {0} (`Date`, User, Type, `Comment`) VALUES (?Date, ?User, ?Type, ?Comment);",
                    TableName);
            conn.Open();

            var parameterDate = com.CreateParameter();
            parameterDate.ParameterName = "?Date";
            parameterDate.Value = entry.Date;
            parameterDate.DbType = DbType.DateTime;
            com.Parameters.Add(parameterDate);

            var parameterUser = com.CreateParameter();
            parameterUser.ParameterName = "?User";
            parameterUser.Value = entry.User;
            parameterUser.DbType = DbType.String;
            com.Parameters.Add(parameterUser);

            var parameterLogType = com.CreateParameter();
            parameterLogType.ParameterName = "?Type";
            parameterLogType.Value = entry.Type;
            parameterLogType.DbType = DbType.Int32;
            com.Parameters.Add(parameterLogType);

            var parameterComment = com.CreateParameter();
            parameterComment.ParameterName = "?Comment";
            parameterComment.Value = entry.Comment;
            parameterComment.DbType = DbType.String;
            com.Parameters.Add(parameterComment);

            com.ExecuteNonQuery();

        } 
```

# php - 如何在 codeigniter 1.7.2 的 url 中跳过 index.php 和方法名称？

> ID：15922600
> 
> 赞同：0
> 
> 时间：2013-04-10T09:55:29.813
> 
> 标签：php, codeigniter, version-control

我是 Codeigniter 1.7.2 的新手。我想跳过站点 URL 的 index.php 和方法名称。但我不知道如何跳过它们。我的网站网址看起来像 -

```
http://localhost/mysadagi_voicetongues/index.php/deal_bazaar/PrivilegeDealsbazaar 
```

所以我想从 url 跳过 index.php 和 PrivilegeDealsbazaar。

请提供解决方案来解决此问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:00:59.460

我忘了告诉。打开您的配置文件： application/config/config.php 并更改此行

```
$config['index_page'] = “index.php” 
```

至

```
$config['index_page'] = “” 
```

在应用程序的根目录中创建一个 .htaccess 文件，以便

*   系统
*   应用
*   资产
*   .htaccess

要从您的 url 中删除 index.php，请使用此 .htaccess 文件：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ index.php?/$1 [L]

RewriteCond %{REQUEST_URI} ^LoginTut.*
RewriteRule ^(.*)$ index.php?/$1 [L]

RewriteCond $1 !^(index\.php|images|table-images|js|robots\.txt|css|captcha)

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?$1 [L]
</IfModule>
<IfModule !mod_rewrite.c>
 ErrorDocument 404 index.php
</IfModule> 
```

隐藏控制器名称不是一个好主意，因为在路由和链接到其他功能时会遇到很多问题。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:02:56.577

在 CI 2.1.3 上使用最新版本您可以使用 .htaccess 从 URL 中隐藏 index.php。您可以使用以下 .htaccess

```
<IfModule mod_rewrite.c>
   RewriteEngine On
    #AddHandler application/x-httpd-php5 .php
    RewriteBase /projectforlder/

    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]

</IfModule>

<IfModule !mod_rewrite.c>
   ErrorDocument 404 /index.php
</IfModule> 
```

如果不在 URL 中指定它，您将无法访问您的控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:03:10.620

您可以通过 3 个步骤执行此操作：

1) 与应用程序持有者并行创建 .htacess 文件，然后复制以下代码：

```
RewriteEngine On
RewriteBase /CodeIgniter/       /* this will be your prj name. Change it as per your directory structure*/
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php/$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

2) 在应用程序文件夹中的 config.php 中将 $config['index_page'] 更改为空白，如下所示：

```
$config['index_page'] = ''; 
```

3) 启用 apache 的“rewrite_module”。

# c# - 如何使用 SignalR 在聊天应用程序中向用户发送 LOGGED

> ID：15922601
> 
> 赞同：2
> 
> 时间：2013-04-10T09:55:32.223
> 
> 标签：c#, jquery, asp.net-mvc, signalr, signalr-hub

我正在研究signalR的以下示例

[http://www.asp.net/signalr/overview/getting-started/tutorial-getting-started-with-signalr-and-mvc-4](http://www.asp.net/signalr/overview/getting-started/tutorial-getting-started-with-signalr-and-mvc-4)

我想实现它，而且代码就在那里，但是我不希望用户在提示窗口中输入用户名，我要使页面可供登录用户使用，因此我将拥有 context.User。

我想更改提示部分以使用服务器端的 context.User 但我不知道如何。

多谢

```
 $('#displayname').val(prompt('Enter your name:', '')); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T17:30:59.550

您可以提供有关页面加载的信息或通过 AJAX 检索它。我建议前者。

根据您的视图引擎，类似...

```
 $('#displayname').val('@(Context.User.Replace("'", "\\'"))'); 
```

或者更好，将其作为视图模型的属性提供，这样它就可以

```
 $('#displayname').val('@(Model.User.Replace("'", "\\'"))'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T05:28:41.447

我使用了以下代码。但是，它不会将您重定向到另一个页面。但是，当用户登录应用程序并显示聊天室时，它会使登录窗口不可见。希望这可以帮助。

```
$(function () {
        setScreen(false);
        var chatHub = $.connection.chatHub;
        registerClientMethods(chatHub);

        $.connection.hub.start().done(function () {
            registerEvents(chatHub)
        });
    });

function setScreen(isLogin) {
            if (!isLogin) {
                $("#divchat").hide();
                $("#divLogin").show();
            }
            else {
                $("#divchat").show();
                $("#divLogin").hide();
            }

        }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-22T12:47:44.487

```
 // If the user is Authenticated shows de nick if not sets it to invitado + random number
        if (Request.IsAuthenticated) {
            $('#displayname').val(User.Identity.GetUserName());
        } else {
            $('#displayname').val("invitado" + Math.floor((Math.random() * 100) + 1));
            // $('#displayname').val(prompt('Enter your name:', '')); (Alias Window... what you had)
        } 
```

# android - 片段相互重叠

> ID：15922604
> 
> 赞同：19
> 
> 时间：2013-04-10T09:55:47.777
> 
> 标签：android, android-fragments, android-actionbar, fragment

我有一个带有 3 个选项卡的操作栏，每个选项卡打开一个片段。第三个选项卡“目录”有一个列表： ![在此处输入图像描述](https://i.stack.imgur.com/893nW.png)

当我单击一个项目时，它会打开另一个片段，它不是操作栏的一部分：

```
public void onClick(View v) {
    switch (v.getId())
    {
    case R.id.category1:    
        Fragment cosmeticsFragment = new ActivityCosmetics();
        FragmentTransaction transaction = getFragmentManager().beginTransaction();

        transaction.replace(android.R.id.content, cosmeticsFragment);
        transaction.addToBackStack(null);

        transaction.setTransition(1);

        transaction.commit();
        break;
        ... 
```

这就是它之后的样子： ![在此处输入图像描述](https://i.stack.imgur.com/Ti1KE.png)

从这一点开始，如果我转到其他选项卡，然后返回到目录选项卡，我会看到之前的 2 个片段相互重叠：

![在此处输入图像描述](https://i.stack.imgur.com/Pufgz.png)

我如何防止它发生？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-01-04T09:50:51.280

为片段布局设置背景可以解决此问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T10:13:38.693

您可以通过按标签搜索片段来管理片段。将片段添加到后台堆栈时添加标签名称

```
transaction.addToBackStack("myCustomFragmentTag"); 
```

如果你想在应用程序的任何地方销毁 Fragment：

```
Fragment previousInstance = getFragmentManager().findFragmentByTag("myCustomFragmentTag");
                if (previousInstance != null)
                    transaction.remove(previousInstance); 
```

您可以尝试覆盖某些行为，因此这行代码将破坏已初始化的最后一个 Fragment

```
getFragmentManager().popBackStack(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-21T10:32:25.287

根据这个问题： [Android：片段重叠问题](https://stackoverflow.com/questions/18274732/android-fragments-overlapping-issue?answertab=active#tab-top)

您只需要在 XML 文件中设置背景颜色

解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-17T12:11:32.740

你可以试试这样的标签..

> ```
>  public class Tabs extends TabActivity {
> @Override
> public void onCreate(Bundle savedInstanceState) {
>     super.onCreate(savedInstanceState);
>     setContentView(R.layout.activity_tabs);
>     Resources res = getResources(); // Resource object to get Drawables
>     TabHost tabHost = getTabHost();  // The activity TabHost
>     TabHost.TabSpec spec;  // Resusable TabSpec for each tab
>    // Intent intent;  // Reusable Intent for each tab
>     // Create an Intent to launch an Activity for the tab (to be reused)
>     Intent intent1 = new Intent().setClass(this, Social.class);
>     // Initialize a TabSpec for each tab and add it to the TabHost
>     spec = tabHost.newTabSpec("app_name").setIndicator("Practice",
>                       res.getDrawable(R.drawable.tab_social))
>                   .setContent(intent1);
>     tabHost.addTab(spec);
>     tabHost.getTabWidget().getChildAt(0).setBackgroundResource(R.drawable.bbgg);
>     // Do the same for the other tabs
>     Intent intent2 = new Intent().setClass(this, Web.class);
>     spec = tabHost.newTabSpec("application").setIndicator("Application",
>                       res.getDrawable(R.drawable.tab_web))
>                   .setContent(intent2);
>     tabHost.addTab(spec);
>     tabHost.getTabWidget().getChildAt(1).setBackgroundResource(R.drawable.bbgg);
>     Intent intent3 = new Intent().setClass(this, Catalog.class);
>     spec = tabHost.newTabSpec("toplinks").setIndicator("Top Links",
>                       res.getDrawable(R.drawable.tab_catalog))
>                   .setContent(intent3);
>     tabHost.addTab(spec);
>     tabHost.getTabWidget().getChildAt(2).setBackgroundResource(R.drawable.bbgg);
>     tabHost.setCurrentTab(0);
> }
> } 
> ```

在你的布局 xml

> ```
>  <TabHost 
> xmlns:android="http://schemas.android.com/apk/res/android"
> android:id="@android:id/tabhost" 
> android:layout_width="fill_parent" 
> android:layout_height="fill_parent" 
> 
>   <LinearLayout 
> android:id="@+id/LinearLayout01" 
> android:layout_width="fill_parent" 
> android:layout_height="fill_parent"
> android:orientation="vertical">
>   <TabWidget 
> android:id="@android:id/tabs" 
> android:layout_width="fill_parent" 
> android:layout_height="wrap_content"></TabWidget>
>  <FrameLayout 
> android:id="@android:id/tabcontent" 
> android:layout_width="fill_parent" 
> android:layout_height="fill_parent"></FrameLayout>
>  </LinearLayout>
>  </TabHost> 
> ```

# bash - 关于使用命名管道、grep 和文件重定向的重定向行为

> ID：15922605
> 
> 赞同：2
> 
> 时间：2013-04-10T09:55:47.747
> 
> 标签：bash, grep, io-redirection, tee

我对我的 bash 命令的行为有疑问。我想将两次相同的通量从 stdout grep 到 2 个不同的文件。为此，我做了：

```
./prog | tee >(grep -i 'grep1' > file1) | grep -i 'grep2' > file2 
```

但我的 file2 是空的。我以为我`grep -i 'grep2'`没有抓住任何东西，但如果我只是输入：

```
./prog | tee >(grep -i 'grep1' > file1) | grep -i 'grep2' 
```

我确实有我注意的结果：

```
[grep2] mylog...
[grep2] mylog...
[grep2] mylog... 
```

我设法用这个命令在我的两个文件中写入：

```
./prog | tee >(grep -i 'grep1' > file1) >(grep -i 'grep2' > file2) 
```

但我必须`> /dev/null`在最后添加，以便在标准输出中没有任何输出。

我的问题是，为什么第二个 grep 之后的重定向没有被我的`file2`重定向捕获，为什么我必须添加另一个命名管道才能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:11:41.117

你快到了。尝试这个：

```
./prog | tee >(grep -i 'grep1' > file1) >(grep -i 'grep2' > file2) 
```

如果您想跳过标准输出输出，请执行

```
./prog | tee >(grep -i 'grep1' > file1) >(grep -i 'grep2' > file2) > /dev/null 
```

例如：

```
kent$  seq 30|tee >(grep 2 >a) >(grep 3 > b) > /dev/null                                                                                                                    

kent$  head a b
==> a <==
2
12
20
21
22
23
24
25
26
27

==> b <==
3
13
23
30 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:50:40.100

在阅读了肯特的答案并使用他的示例后，`seq`我发现问题出在我的程序上。我的程序表现得像一个守护进程，所以最后一个重定向的最后一个管道没有被分叉为第一个，所以直到程序结束才做任何事情。

所以我已经有了正确的解决方案，使用 2 个命名管道进行 2 个重定向：

```
./prog | tee >(grep -i 'grep1' > file1) >(grep -i 'grep2' > file2) 
```

# android - OpenGL混合不起作用，正方形消失

> ID：15922606
> 
> 赞同：0
> 
> 时间：2013-04-10T09:55:51.467
> 
> 标签：android, opengl-es

我对使用 openGL 有一些疑问我是使用 openGL 的新手，我尝试设置正方形的 RGB，它可以工作，但在我使用混合功能后它不起作用。当它重绘时，正方形最终消失了。

以下是部分代码

```
@Override
public void onDrawFrame(GL10 gl) {
    // clear Screen and Depth Buffer
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

    // Reset the Modelview Matrix
    gl.glLoadIdentity();

    // Drawing
    gl.glTranslatef(0.0f, 0.0f, -5.0f);     // move 5 units INTO the screen
    GLES20.glBlendFunc(GLES20.GL_SRC_ALPHA, GLES20.GL_ONE_MINUS_SRC_ALPHA);
    GLES20.glEnable(GLES20.GL_BLEND);                   // is the same as moving the camera 5 units away
    square.draw(gl);                        // Draw the triangle
    //square.loadGLTexture(gl, this.context);
    gl.glColor4f(red, green, blue, 0f);
    red = red - 0.01f;
    blue = blue - 0.01f;
    green = green - 0.01f;
    GLES20.glDisable(GLES20.GL_BLEND);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:05:33.910

第一次调用 onDrawFrame 时，颜色和深度缓冲区都被清除，然后绘制一个三角形，之后，颜色更改为 0 alpha 值。

下次调用 onDrawFrame 时，会再次绘制三角形，但这次使用 alpha 值 0。由于颜色和深度缓冲区都已被清除，您可能看到的只是一个空屏幕，因为 0 alpha，使用该混合功能，可以翻译为“完全透明”。

# matlab - 如何将一个函数和它的调用放在一个文件中？

> ID：15922611
> 
> 赞同：1
> 
> 时间：2013-04-10T09:56:12.670
> 
> 标签：matlab

我想要一个带有函数和调用该函数的代码很少的文件，例如：

```
function foo()
   ...
end

foo() 
```

我想将此类代码保存到名为“everything.m”的文件（一个文件）中，然后在 Matlab/Octave 控制台中输入“everything”，我的函数`foo`将被定义并调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:32:44.657

做这种事情的常用方法是有一个名为的脚本`everything.m`

```
% everything.m
foo(); 
```

以及您希望能够使用的每个功能的一个文件：

```
% foo.m
function foo()
   ...
end 
```

执行`everything.m`然后调用您想要调用的所有函数（以及您在该阶段可能想要执行的任何其他任务）。

将所有函数都放在 Matlab 路径上，意味着它们是“定义的”（可从 Matlab 命令提示符或其他函数内部访问）。这是“Matlab 方式”:)

请注意，每个文件可能有多个函数，

```
% bar.m 

function bar()
    otherFunction();  % WORKS OK 
end

function otherFunction()
    ...
end 
```

在 Matlab 命令提示符中只能看到最顶层的函数：

```
>> bar 
>> % no error
>> 
>> otherFunction
??? Undefined function or variable 'otherFunction'. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:26:32.373

在 Matlab 中，您不能混合使用脚本和函数。因此，在您的情况下，为了调用 foo() 您需要编写另一个函数，否则 matlab 编译器会抱怨。

所以`everything.m`应该有一个名为 的函数`everything`，您可以从中`foo()`调用

这里有一个类似的问题

[MATLAB脚本代码和函数代码在同一个文件中？](https://stackoverflow.com/questions/5394494/matlab-script-code-and-function-code-in-the-same-file)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:10:29.727

我认为您可以将代码编写在脚本中，然后使用与函数相同的名称保存。例如，如果您的函数是 foo，那么当您保存文件时，它的名称必须是：foo.m。从命令行调用 foo 会执行该函数。如果您只想在没有输入参数的情况下调用该函数，则必须在关键字“function”和“end”之间定义所需的所有变量。此外，只有当前文件夹是保存函数的文件夹时，才能成功调用函数。如果你从另一个目录调用该函数，你会得到一个错误。要使函数“全局”工作，您应该将其添加到“matlab 路径”。希望这对您有所帮助。

# apache-flex - 在全屏 Flex 中隐藏最小化按钮

> ID：15922613
> 
> 赞同：1
> 
> 时间：2013-04-10T09:56:13.883
> 
> 标签：apache-flex, actionscript, skin

我有一个带有自定义皮肤的窗口应用程序，并且皮肤包含标题栏，它也使用自定义皮肤。现在的问题是，如果窗口设置为全屏，我需要动态隐藏最小化和最大化按钮。请帮忙...

我的标题栏皮肤代码

```
<s:SparkSkin xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark" 
                     xmlns:fb="http://ns.adobe.com/flashbuilder/2009" xmlns:mx="library://ns.adobe.com/flex/mx" 
                     minHeight="24">

            <fx:Metadata>
                [HostComponent("spark.components.windowClasses.TitleBar")]
            </fx:Metadata> 

            <s:states>
                <s:State name="normal" />
                <s:State name="disabled" />
                <s:State name="normalAndMaximized" stateGroups="maximizedGroup" />
                <s:State name="disabledAndMaximized" stateGroups="maximizedGroup" />
            </s:states>

            <!-- fill -->   
            <!--- Defines the background color of the skin. -->
            <s:Rect id="background" 
                    left="0" right="0" top="0" bottom="0">
                <s:fill>
                    <s:LinearGradient>
                        <s:GradientEntry color="#2ecbd8"/>
                        <s:GradientEntry color="white" ratio="0.45"/>
                        <s:GradientEntry color="white" ratio="0.55"/>
                        <s:GradientEntry color="#2ecbd8"/>
                    </s:LinearGradient>
                </s:fill>
            </s:Rect>

            <s:Group 
                id="contentGroup"
                minHeight="24"
                width="100%" 
                height="100%"
                left="10" 
                right="10" >

                <s:layout>
                    <s:HorizontalLayout verticalAlign="middle" horizontalAlign="center" gap="5" />
                </s:layout>

                <s:BitmapImage id="titleIconImage" minWidth="0" fillMode="clip"/>

                <s:Label id="titleText" text="{hostComponent.title}" minWidth="0" fontSize="9" color="#585858" maxDisplayedLines="1" width="100%" />

                <s:Button id="minimizeButton"
                          skinClass="spark.skins.spark.windowChrome.MinimizeButtonSkin"
                          top="2" bottom="2" verticalCenter="0"
                          />

                <s:Button id="maximizeButton"
                          skinClass="spark.skins.spark.windowChrome.MaximizeButtonSkin"
                          top="2" bottom="2" verticalCenter="0"
                          />

                <s:Button id="closeButton" 
                          skinClass="spark.skins.spark.windowChrome.CloseButtonSkin"
                          verticalCenter="0"  />
                <fx:Script>
                    <![CDATA[
                        import spark.skins.spark.windowChrome.MaximizeButtonSkin;
                    ]]>
                </fx:Script>

            </s:Group>
        </s:SparkSkin> 
```

我的窗口应用程序皮肤代码

```
<?xml version="1.0" encoding="utf-8"?>
        <s:Skin xmlns:fx="http://ns.adobe.com/mxml/2009" 
                xmlns:s="library://ns.adobe.com/flex/spark" 
                xmlns:mx="library://ns.adobe.com/flex/mx" 
                xmlns:ui="com.youspin.components.ui.*"
                depth="-10">
            <!-- host component -->
            <fx:Metadata>
                [HostComponent("spark.components.WindowedApplication")]
            </fx:Metadata>

            <!-- states -->
            <s:states>
                <s:State name="disabledAndInactive" />
                <s:State name="normalAndInactive" />
                <s:State name="disabled" />
                <s:State name="normal" />
            </s:states> 

            <s:TitleBar left="0" right="0" top="1"
                        title="YouSpin"
                        height="{0.067*height}" 
                        skinClass="skins.titleSkin"/>   

            <s:Group  id="contentGroup" left="0" top="0" right="0" bottom="0" />        

        </s:Skin> 
```

这是我的申请

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009"
                       xmlns:s="library://ns.adobe.com/flex/spark"
                       xmlns:mx="library://ns.adobe.com/flex/mx"
                       applicationComplete="fullScreen()"
                       width="910" height="728" 
                       skinClass="skins.uiskin">

    <fx:Declarations>

    </fx:Declarations>

    <fx:Script>
        <![CDATA[
            public function fullscreen():void{
                stage.displayState = StageDisplayState.FULL_SCREEN_INTERACTIVE;
                //hide button from here but how??
            }
        ]]>
    </fx:Script>
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
</s:WindowedApplication> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:06:55.393

try making a bindable boolean somewhere, where you store the fullscreenstate. then minimizebutton should have attributes includeinLayout and visible binded to it. (and maximize would be the opposite:

```
<s:Button id="minimizeButton"
                      skinClass="spark.skins.spark.windowChrome.MinimizeButtonSkin"
                      top="2" bottom="2" verticalCenter="0"
                      visible="{!isFullScreen}"
                      /> 
```

# php - POST 值并获取页面源

> ID：15922617
> 
> 赞同：1
> 
> 时间：2013-04-10T09:56:19.880
> 
> 标签：php, javascript, html

我正在尝试使用 html 表单将值发布到页面并获取该页面的源。

我可以使用`$html = file_get_html('http://www.exam.com/results/');`

但在获取源之前，我需要先将值发布到该页面，然后获取源。

假设我应该发布值的其他页面是`http://www.exam.com/results/`

我创建了一个价值提交表单。

```
<form method="post" action="http://www.exam.com/results/">

<input type="hidden" value="900358967" name="eid">
<input name="confirm" type="submit" value="Enter" >

</form> 
```

因此它将在该页面上发布值并显示数据，但是如何使用数据获取页面源？

这可能吗？我到处搜索并试图抓住它，但我不知道在发布价值后如何抓住它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:05:53.757

我注意到您的问题用 javascript 标记。所以这是一个可以使用 jQuery 为您工作的解决方案。

```
$.post('http://www.exam.com/results/',$('form').serialize(), function(data) {
    alert(data);
}); 
```

如果 URL 只返回 html，则 html 将在函数返回的 data var 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:58:53.713

我认为你必须尝试相同的`CURL`

```
//set POST variables
$url = 'http://www.exam.com/results/';
$fields = array(
'eid' => urlencode('900358967')
);
$fields_string = "";

//url-ify the data for the POST
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string, '&');

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL, $url);
curl_setopt($ch,CURLOPT_POST, count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);

//execute post
$result = curl_exec($ch); 
```

# eclipse - 如何在三星智能电视日志查看器中查看日志

> ID：15922620
> 
> 赞同：3
> 
> 时间：2013-04-10T09:56:35.027
> 
> 标签：eclipse, logging, samsung-smart-tv, smart-tv

在三星智能电视菜单中有一个选项`"Start receiving Smart TV logs"`。默认为“关闭”。

当我点击它时，我收到了一个提示`"Check the Console View"`。我打开控制台视图并在模拟器上运行该应用程序，但在那里我看不到任何日志。

![在此处输入图像描述](https://i.stack.imgur.com/UE2rO.png)

我知道当模拟器启动时，也会启动一个显示所有`alert("..");`日志的单独窗口。

我想知道如何使用通过控制台视图查看日志的选项。我是 Eclipse 和 Smart TV SDK 的新手。有什么我想念的吗？这与模拟器中已经显示的日志有何不同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T04:36:14.030

控制台日志用于在真实设备中进行调试。模拟器已经有它自己的调试器控制台窗口，所以模拟器不会向 eclipse 发送任何东西。

如果您想使用真实设备，此功能非常有用。将应用程序从电视同步到您的工作站并启用日志接收器。当您同步的应用程序在真实设备 (TV/BDP) 中运行时，来自应用程序的警报将发送到 Eclipse 的控制台窗口

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-20T17:31:22.420

该应用程序会将其日志发送回它下载该应用程序的系统上的活动 Eclipse 控制台。

我在 Windows 上使用 Eclipse，所以我给我的电脑一个静态 IP 地址并安装了 Apache 2.2 Web 服务器。上传我的应用程序后，我启用控制台并像您一样打开控制台视图。然后，我启动我的应用程序，并在控制台中看到所有日志信息。

我发现这个日志信息很重要，因为有些服务在模拟器中返回错误，但实际上在电视上成功执行。其中许多服务直接与电视硬件交互，没有其他方法可以调试它们。

# xcode - 拆分字符串后的Xcode 4 NSRangeException错误

> ID：15922626
> 
> 赞同：0
> 
> 时间：2013-04-10T09:56:44.933
> 
> 标签：xcode, indexoutofboundsexception, nsrangeexception

我正在尝试拆分字符串并将其分成变量，但出现以下错误：

> *** 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“*** -[__NSArrayM objectAtIndex:]: index 2 beyond bounds [0 .. 1]”

代码：

```
NSLog(@"%@", strResult);

    NSArray* LocInfo = [strResult componentsSeparatedByString: @"|"];
    NSString* Response1 = [LocInfo objectAtIndex: 0];
    NSString* Response2 = [LocInfo objectAtIndex: 1];
    NSString* Response3 = [LocInfo objectAtIndex: 2]; 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:58:54.743

您`strResult`被分解为`LocInfo`仅包含两个元素的数组，并且您尝试访问第三个元素。

由于您的字符串已经包含 1 / 2 或 3 `NSString`s，因此无需再次存储到`NSString`中，您可以直接使用它们`LocInfo[index]`。

如果您需要检查有多少字符串，只需使用：`[LocInfo count];`

# android - 将片段添加到片段活动中

> ID：15922628
> 
> 赞同：1
> 
> 时间：2013-04-10T09:56:45.850
> 
> 标签：android, android-fragments

我有一个包含 FrameLayout 的 FragmentActivity。我使用以下代码将 Fragments 添加到 Fragment Activity。

```
FragmentManager fm = getSupportFragmentManager();
        FragmentTransaction ft = fm.beginTransaction();
        ft.add(R.id.fragment_content, fragment, fargmentTag);
        ft.addToBackStack(null);
        ft.commit(); 
```

现在 R.id.fragment_content 是 FrameLayout。这会在视图上添加一个片段。但底层视图仍然可见。意思是通过新片段可以看到一个谎言的观点？我究竟做错了什么。

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:01:43.107

要么`ft.remove()`是旧片段，要么使用`ft.replace()`代替`ft.add()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:01:45.917

为下一个片段使用`ft.replace();`，所以前一个片段将被替换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T10:03:59.230

ft.replace() 应该可以正常工作，否则您必须更新您的问题以便更好地理解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-22T15:12:10.950

使用 ft.replace 将用这个片段替换任何以前添加的片段，但是如果活动有一些视图添加到其布局而不是片段，那么通过添加或替换添加的片段将显示其内容而不是原样替换它不是片段。在主布局中添加另一个布局并为其分配一些 id，然后将片段添加到该容器中。希望能帮助到你。

# android - AndEngine GLES1 LWP：如何在 Resume 上卸载和加载一些精灵？

> ID：15922632
> 
> 赞同：1
> 
> 时间：2013-04-10T09:56:57.370
> 
> 标签：android, andengine, live-wallpaper, indexoutofboundsexception, opengl-es-1.1

我正在使用 AndEngine GLES1 创建动态壁纸，当我的 lwp 启动时有时会出现错误：java.lang.IndexOutOfBoundsException: Invalid index 4 size is 4\. 我知道，应该在 runOnUpdateThread 中附加和分离精灵，但是如何有几个精灵？我的代码不能正常工作，恢复后并非所有精灵都加载：

```
//here I'm detach all sprites from scene
public void clearScene(Scene scene) {
        mEngine.runOnUpdateThread(new Runnable() {
                  @Override
                  public void run() {
                        int l = getEngine().getScene().getLayerCount()-1;
                        while (l >= 0) {
                                while(getEngine().getScene().getLayer(l).getEntityCount() > 0){
                                        getEngine().getScene().getLayer(l).removeEntity(0);
                                }
                                l--;
                        }
                  }
        });
}

public void buildScene(Scene scene) {
        //here I'm creating all sprites (as usual)
        //below I add all sprites on the scene
        mEngine.runOnUpdateThread(new Runnable() {
                @Override
                public void run() {
                        if (isNight) {
                                getEngine().getScene().getLayer(0).addEntity(mBG);
                                getEngine().getScene().getLayer(2).addEntity(mStars);
                                getEngine().getScene().getLayer(3).addEntity(mSun);
                        }
                        getEngine().getScene().getLayer(1).addEntity(mComet);
                        getEngine().getScene().getLayer(4).addEntity(mTree);
                        getEngine().getScene().getLayer(5).addEntity(mGrass2);
                        getEngine().getScene().getLayer(6).addEntity(mGrass1);
                        getEngine().getScene().registerPostFrameHandler(handler);
                        if (isNight)
                                getEngine().getScene().registerPostFrameHandler(sunTimer);
                        getEngine().getScene().registerPostFrameHandler(grass1Timer);
                        getEngine().getScene().registerPostFrameHandler(grass2Timer);
                        getEngine().getScene().registerPostFrameHandler(cometTimer);
                 }
        });
} 
```

# django - 是否可以重用 Django URL 模式。如果是这样，怎么做？

> ID：15922635
> 
> 赞同：0
> 
> 时间：2013-04-10T09:57:00.650
> 
> 标签：django, django-urls, django-class-based-views

我有一个 URL 和一个基于类的视图层次结构，它们需要做完全相同的事情，但由于各种原因，它们需要`dispatch()`在其中一个超类中具有单独的方法。

即所有视图的公共超类有一个`dispatch()`方法，`dispatchA()`如果 URL 是`/a/...`，`dispatchB()`如果 URL 是`/b/.../`

在 django urlpatterns() 中使用不同前缀的相同模式（...）两次是否可以。

对于额外的信用，任何想法如何添加一个 kwarg （如`b = True`）到后一种模式，所以我不必在`dispatch()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:23:14.977

这样做当然很好。您可以通过在模式后的字典中指定它们来传递[额外的 kwarg ：](https://docs.djangoproject.com/en/1.5/topics/http/urls/#passing-extra-options-to-view-functions)

```
(r'^a/foo/$', my_view, {'b': False}),
(r'^b/foo/$', my_view, {'b': True}), 
```

或者，您可以将前缀本身捕获为 kwarg 并在调度方法中检查它。

# asp.net - asp.net 如何在复选框列表中存储超过 2 列的数据库

> ID：15922641
> 
> 赞同：0
> 
> 时间：2013-04-10T09:57:16.137
> 
> 标签：asp.net, datasource, checkboxlist

当我将一些数据源连接到复选框列表时，我可以定义属性：

`DataTextField="column1" DataValueField="column2"`

然后我可以分别在cs文件`.Text`和`.Value`属性中使用。

第 1 列和第 2 列取自某些 sql 选择指令。

有没有办法从数据库中存储超过 2 列。

像`CustomDataField="column3"`什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:57:34.610

根据 DropDownList 的内置属性，无法从数据库中存储超过 2 列。DDl 的 DataTextField、DataValueField 等属性在 System.Web.dll 的 ListControl 类中定义。

# c# - 如何使用 C# 中的插件操作主机应用程序？

> ID：15922643
> 
> 赞同：0
> 
> 时间：2013-04-10T09:57:19.473
> 
> 标签：c#, winforms, plugins

我创建了一个可以托管插件的简单应用程序。
如果插件提供依赖服务，一切都可以，没有问题，但是当涉及到创建一个操纵主机本身的插件时（例如更改它`BackColor`，向它添加文本`TextBox`等），我似乎无法找到解决方案！
由于看起来像循环依赖，我尝试的每种方法都不起作用。
首先，我尝试在我的主机应用程序中创建一些公共`Setters`和`Getters`内部，当我尝试将它添加为我的引用时，`IpluginInterface`由于循环依赖你不能说，
我尝试了一个中间类来实现主机应用程序的设置器和获取器，再次我遇到了同样的错误。
我能做些什么来避免这个错误并操纵主机应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:01:19.893

创建第三个名为“Interfaces”的项目，然后在其中放置主应用程序的接口。当您实例化插件时，通过该接口传入对主应用程序的引用。这可以防止循环引用。

主项目和插件都可以引用“接口”项目。

编辑：这是一个完整的代码示例。现在，当然，为了简单起见，我将所有内容都放在一个文件中，但我添加了关于每个部分通常所在位置的注释。您提到参数是插件不知道的类型。在这种情况下，只需向接口项目添加一个新接口，并使参数从该接口派生。

要运行它，请创建一个 winforms 项目并将该批次粘贴到一个新类中。然后删除旧的表单和 Program.cs 文件。

```
using System;
using System.Drawing;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    // This is the program start. Probably the place that would have loaded the plug ins.
    static class Program
    {
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new MainForm());
        }
    }

    //Form goes in project one and has a reference to Interfaces.
    public class MainForm : Form, IMainForm
    {
        private TextBox _textBox;
        private IPlugIn _thePlugIn;
        private Button _aButton;

        public MainForm()
        {
            InitializeComponent();
            _thePlugIn = ObtainPlugInsThroughMagic();
        }

        private IPlugIn ObtainPlugInsThroughMagic()
        {
            // So this would usually go off and load some DLLs and then instantiate the IPlugIn objects
            // We're cheating.
            var plugin = new MyPlugIn();
            plugin.Initialise(this);
            return plugin;
        }

        public void SetTextBoxValueFromPlugIn(string newText)
        {
            _textBox.Text = newText;
        }

        private void InitializeComponent()
        {
            _textBox = new TextBox();
            _aButton = new Button();
            SuspendLayout();

            _aButton.Location = new Point(20, 50);
            _aButton.Size = new Size(100, 25);
            _aButton.TabIndex = 1;
            _aButton.Click += AButtonClick;
            _aButton.Text = "Fire plug in";
            _textBox.Location = new Point(20, 10);            
            _textBox.Size = new Size(260, 20);
            _textBox.TabIndex = 0;

            AutoScaleDimensions = new SizeF(6F, 13F);
            AutoScaleMode = AutoScaleMode.Font;
            ClientSize = new Size(300, 100);
            Controls.Add(_textBox);
            Controls.Add(_aButton);
            Text = "Main form";
            ResumeLayout(false);
            PerformLayout();
        }

        private void AButtonClick(object sender, System.EventArgs e)
        {
            _thePlugIn.MakePlugInDoItsStuff();
        }
    }

    #region interfaces go in the new Interfaces project.

    public interface IMainForm
    {
        void SetTextBoxValueFromPlugIn(string newText);
    }

    public interface IPlugIn
    {
        void Initialise(IMainForm mainForm);
        void MakePlugInDoItsStuff();
    }

    #endregion

    // The plug in goes in the plug in project and has a reference to Interfaces.

    public class MyPlugIn : IPlugIn
    {
        public IMainForm MainForm { get; private set; }

        public void Initialise(IMainForm mainForm)
        {
            MainForm = mainForm;
        }

        public void MakePlugInDoItsStuff()
        {
            MainForm.SetTextBoxValueFromPlugIn("Text set from plug in");
        }
    }
} 
```

# c# - 错误的 SQL 语法 SQL lServer C# winforms

> ID：15922644
> 
> 赞同：0
> 
> 时间：2013-04-10T09:57:24.783
> 
> 标签：c#, sql-server, winforms

嘿，我正在尝试运行此查询：

```
command.UseSqlCommand("INSERT INTO DisplayOrders Values ('" + OrderId.Text + "','" + "(SELECT ProductId FROM Products WHERE ProductName =N'" + listBox1.Text + "')','" + listBox1.Text + "','" + OrderQuantity.Text + "','" + TotalCost.Text + "')"); 
```

现在`command.UseSqlCommand`只是运行查询，但我不断收到此错误： **'intel' 附近的语法不正确**

（英特尔是“产品名称”（我从这里得到：

```
SELECT ProductId FROM Products WHERE ProductName =N'" + listBox1.Text + "' 
```

编辑：这是命令的值，（在'intel'附近得到'不正确的语法'）

```
INSERT INTO DisplayOrders 
Values ('2', '(SELECT ProductId FROM Products WHERE ProductName =N'Intel Quad Core i5 3470 3.2Ghz 6MB Tray')','Intel Quad Core i5 3470 3.2Ghz 6MB Tray','1','900')" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T10:02:00.263

正如其他人所说，您应该使用参数化查询来克服这个问题。但是要“按原样”回答您的问题...

您需要双引号关闭您的单引号。查看这一点的最佳方法是将其存储到字符串中并调试/写入以进行跟踪。如何在此处双重关闭查询的示例：[如何使用单引号 sql server 2005 插入文本](https://stackoverflow.com/questions/775687/how-to-insert-text-with-single-quotation-sql-server-2005)

按原样，您的查询字符串将包含如下内容：

```
INSERT INTO DisplayOrders Values ('1234','(SELECT ProductId FROM Products WHERE ProductName =N'Fred')'... 
```

但它确实应该包含这样的内容（注意`'''`）：

```
INSERT INTO DisplayOrders Values ('1234','(SELECT ProductId FROM Products WHERE ProductName =N'''Fred''')'... 
```

否则，您将关闭`INSERT Values`not`SELECT`语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T10:15:53.623

只需删除 SELECT 语句周围的单引号

```
command.UseSqlCommand("INSERT INTO DisplayOrders Values ('" + OrderId.Text + "'," + 
         "(SELECT ProductId FROM Products WHERE ProductName =N'" + listbox.Text +"'), " +
         "'" + listBox1.Text + "','" + OrderQuantity.Text + "','" + TotalCost.Text + "')"); 
```

但是，如果您的任何列表框项目包含单引号，则此代码将失败。
我已经阅读了您关于 SQL 注入在这里不是问题的评论，但即使在学校作业中使用它也是一个好习惯。至少改成

```
string itemName = listBox1.Text.Replace("'", "''");
command.UseSqlCommand("INSERT INTO DisplayOrders Values ('" + OrderId.Text + "'," + 
         "(SELECT ProductId FROM Products WHERE ProductName =N'" + itemName +"'), " +
         "'" + itemName + "','" + OrderQuantity.Text + "','" + TotalCost.Text + "')"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:14:04.307

需要更换这个

```
 command.UseSqlCommand("INSERT INTO DisplayOrders Values ('" + OrderId.Text + "'," + "(SELECT IdProduct FROM Products WHERE ProductName =N'" + listBox1.Text + "'),'" + listBox1.Text + "','" + OrderQuantity.Text + "','" + TotalCost.Text + "')"); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-10T10:03:55.390

```
SELECT ProductId FROM Products WHERE ProductName =N'" + listBox1.Text + "' 
```

将返回一个表，因此在插入语句中使用它是错误的。

而不是使用这个，单独执行这个命令然后获取返回值，然后单独执行插入语句

# android - 应用程序关闭 - JNI 本地参考

> ID：15922646
> 
> 赞同：0
> 
> 时间：2013-04-10T09:57:29.490
> 
> 标签：android, cordova, java-native-interface

我已经使用 android phonegap 创建了应用程序。当我连续使用应用程序时，我收到错误**JNI Local Reference table overflow(max=512)。**所以我搜索并尝试了一些从android访问JNI的示例，并开发了使用JNI添加两个数字的示例应用程序。现在我需要知道如何在我的应用程序中删除本地引用表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:00:15.817

务必在使用后立即释放本地引用：

```
// get string
jstring str = env->NewStringUTF(text);
// do something
env->CallVoidMethod(currentCallingObject, MID_Activity_print, str);
// release reference
env->DeleteLocalRef(str); 
```

# node.js - 更改 CouchBase 服务器的 IP 后如何取回数据库

> ID：15922654
> 
> 赞同：2
> 
> 时间：2013-04-10T09:58:19.723
> 
> 标签：node.js, ip, ip-address, couchbase

**场景**：安装了 CouchBase 服务器并遇到以下问题：
`IP address seems to have changed. Unable to listen on 'ns_1@169.254.20.219'`

按照couchbase docs[处理IP地址](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-bestpractice-cloud-ip.html)
上的步骤解决了它 所以，我的文件`C:\Program Files\Couchbase\Server\bin\service_register.bat`

```
set NS_BIN=%~dp0
set NS_ROOT=%NS_BIN%..
set NS_ERTS=%NS_BIN%erlang\erts-5.8.3\bin

pushd "%NS_ROOT%"
for /f "tokens=1* delims=" %%a in ('cmd /q/c "type bin\ipaddr.out"') do set IP_ADDR=%%a

set NS_NAME=ns_1@192.168.3.53
if not "%1"=="" set NS_NAME=%1

pushd "%NS_ROOT%"
"%NS_ERTS%\erlsrv.exe" add CouchbaseServer -stopaction "ns_bootstrap:stop()." -name %NS_NAME% -InternalServiceName CouchbaseServer -onfail restart -workdir "%NS_ROOT%" -args "+A 16 -setcookie nocookie -ns_server config_path \\\".\\etc\\couchbase\\static_config\\\" -kernel inet_dist_listen_min 21100 inet_dist_listen_max 21299 -run ns_bootstrap override_resolver -ns_server restart_script \\\".\\bin\\service_reregister.bat\\\" -- %2 %3 %4 %5 %6 %7 %8 %9"
popd

set serviceId=""
for /f "tokens=2 delims==" %%s in ('sc GetKeyName CouchbaseServer') do set serviceId=%%s
sc description %serviceId% "Couchbase Server Service" 
```

我开始将它与 Node.JS 一起使用，并且能够存储数据等。

**问题**：我的 IP 地址是动态的，如果我按照相同的步骤来解决相同的问题`'IP address seems to have changed. Unable to listen on 'ns_1@192.168.3.53'`，例如，将其更改为新的 IP 地址`192.168.3.58`。然后我可以解决这个问题。但我失去了所有的配置。因此，服务器开始询问所有设置（从创建管理员帐户开始），最终我的数据库和数据丢失了。

**问题**：当 IP 地址是时，我怎样才能取回我的旧数据库`192.168.3.53`？为什么当 IP 更改时它会转储所有的东西`service_register.bat`？

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:52:54.240

我没有测试，但这里的程序：http: [//www.couchbase.com/docs/couchbase-manual-1.8/couchbase-backup-restore-restore.html#couchbase-backup-restore-prevstate-same](http://www.couchbase.com/docs/couchbase-manual-1.8/couchbase-backup-restore-restore.html#couchbase-backup-restore-prevstate-same)应该允许你取回您的数据。

即当节点检测到它不在集群中时，它会自行重置。但它会保持数据文件完好无损*，直到*您尝试再次设置它或将其加入集群。它完全适用于故障转移是意外的情况或像您这样的问题。

# android - Android Jelly Bean 动画奇怪的行为

> ID：15922656
> 
> 赞同：2
> 
> 时间：2013-04-10T09:58:21.847
> 
> 标签：android, animation, android-4.2-jelly-bean

我正在为 ICS 及更高版本（4.0+）的 Android 版本开发应用程序。在我的应用程序中，我使用动画来为目标对象的属性设置动画（使用 ObjectAnimator），这是一个代码片段：

```
 Animator disappearingAnimation = ObjectAnimator.ofFloat(regularScreenLayout, "alpha", 1f, 0f);

    AnimatorSet appearingAnimations = new AnimatorSet();
    Animator appearingAnimationAlpha = ObjectAnimator.ofFloat(statisticsScreenLayout, "alpha", 0f, 1f);
    Animator appearingAnimationTranslate = ObjectAnimator.ofFloat(statistics_wrapper, "y",
            changingContent.getHeight(), 0);
    appearingAnimations.playTogether(appearingAnimationTranslate, appearingAnimationAlpha);

    AnimatorSet animations = new AnimatorSet();
    animations.setDuration(ANIMATION_TIME);
    animations.playTogether(disappearingAnimation, appearingAnimations);
    animations.start(); 
```

我所有的动画在所有版本的 ICS 上都能完美运行，但在有 Jelly Bean 的设备上它们开始表现得很奇怪。例如，如果我想通过消失的动画更改某些视图的可见性，则视图只会在没有动画的情况下出现/消失（动画不起作用！）。有人遇到过这种问题，或者知道可能是什么原因以及如何解决，我将不胜感激。分享你的经验。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:25:28.763

尽管听起来很奇怪，但我通过结合视图和属性动画解决了这个问题（正如您在我的代码片段中看到的那样，我只使用了属性动画）。因此，更简单的动画，我使用视图动画（在 xml 中定义）来完成，而那些需要更改属性的动画，我使用新的属性动画来完成。这为我解决了这个问题，现在一切都在 ICS 和 Jelly Bean 设备上正常工作。希望这可以帮助！

# jsp - JSP 标记文件无法识别 #{} 语法

> ID：15922675
> 
> 赞同：0
> 
> 时间：2013-04-10T09:59:03.650
> 
> 标签：jsp, jsf, el, jsp-tags, myfaces

在我的 JSP 页面中，我使用以下行来检索标签：

```
<f:loadBundle basename="com.me.resources.test" var="mytest" />
<h:outputLabel value= "#{mytest.mylabel}"/> 
```

它工作得很好！

我想在 JSP 标记文件中做同样的事情`myTemplate.tag`，但在这里相同的代码不起作用，它显示完全正确`#{mytest.mylabel}`。

模板已正确加载到 JSP 页面中。

我也尝试过使用 Facelets，但它没有显示任何内容：这是代码。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:f="http://java.sun.com/jsf/core"
  >

<h:body>
Hello
<f:loadBundle basename="com.me.resources.test" var="mytest" />
<h:outputText value= "#{mytest.mylabel}"/>

</h:body> 
```

在这种情况下，它只显示“Hello”。

你有什么想法问题出在哪里吗？

我正在使用 MyFaces 2.1.10

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T21:52:42.403

您是否尝试过使用`${mytest.mylabel}`而不是`#{mytest.mylabel}`？

请参阅[本文档](http://docs.oracle.com/javaee/6/tutorial/doc/bnahr.html)。

# javascript - 如何在 wp7 和 wp8 上运行侏罗纪（js 引擎）

> ID：15922676
> 
> 赞同：1
> 
> 时间：2013-04-10T09:59:04.273
> 
> 标签：javascript, windows, windows-phone-7, jurassic

我尝试使用nuget在我的项目上安装侏罗纪，好吧，在windows 8上它没有问题，但在windows phone 7和windows phone 8中都不会编译......

任何想法，我知道（从网站上的评论）在 wp7 和 wp8 上可以工作，但我真的不明白如何？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T20:44:17.207

那么答案是：

由于未知原因，nuget 包将错误的 dll 放入参考中，因此解决方案是为 windows phone 7 重新编译项目，也适用于 8 和 windows 桌面:)

# dynamics-crm-2011 - CRM 2011：使用 SQL 查询检索共享约会

> ID：15922679
> 
> 赞同：1
> 
> 时间：2013-04-10T09:59:19.653
> 
> 标签：dynamics-crm-2011, reporting-services

CRM 2011 中的活动筛选视图存在一个已知限制。过滤后的视图不显示共享记录。看起来这在更新汇总 6 中已修复，但我们的服务器尚未升级到 UR 6。

我目前有一个自定义报告，它使用 FilteredAppointment 视图检索约会，它只检索用户拥有的约会。

**无论如何，我们可以使用 SQL 查询检索当前用户的共享约会。请帮忙。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:10:37.310

我相信共享记录存储在 PrincipalObjectAccess 中。但是，由于这些记录已从过滤视图中删除，因此仅加入此表仍然无法正常工作。您很可能必须将 PrincipalObjectAccess 中的 activityid 与 objectid 连接到本机视图或实际表本身。

我要提到的另一件事是，如果您使用的是团队所有权或团队，那么这最终会变得更加复杂，因为您必须弄清楚用户也属于哪些团队，并查看记录是否共享给该团队.

# linux - 我想使用 CVS 显示主文件本身的差异？

> ID：15922681
> 
> 赞同：0
> 
> 时间：2013-04-10T09:59:24.407
> 
> 标签：linux, unix, cvs

我打算通过使用来显示同一个文件上的差异`CVS`。

假设我有一个文件`a.txt`，它包含两个修订版。

```
2.0

3.0 
```

我可以使用 找到差异`cvs diff -r 3.0 -r 2.0 a.txt`，但我只想显示`3.0`文件上的更改。

这意味着我想显示最新文件`a.txt`并提及文件发生的更改？

可能吗？有人可以指导我如何开始吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:22:59.903

`cvs log -N -S -rHEAD a.txt`应该给你日志消息。如果您还没有签出最新版本，您可以使用`cvs rlog`

我不知道用 CVS 打印最新版本（如“cvs cat”或类似内容）的方法。您可能必须使用`cvs checkout`或将您的 repo 转换为现代版本控制系统（无论如何您都应该考虑一下；CVS 确实过时了）。

# javascript - 根据其键将 eval 与字典列表进行比较

> ID：15922697
> 
> 赞同：0
> 
> 时间：2013-04-10T09:59:55.580
> 
> 标签：javascript

我有一个包含字典列表的字符串。我想通过检查他们的键而不是值来进行比较。有没有办法做到这一点。

```
data = '[{ "group1" : "T1"}, { "group1" : "T2"}, { "group2" : "T3"}]'; 
```

我如何根据它们的键比较这些字典。例如，我使用过：

```
dataObj = eval(data);  //generate 3 objects for data. 
```

这里`dataObj[0]`将参考`{ "group1" : "T1"}` 我已经完成以下代码的对象：

```
for(i=0;i<dataObj.length;i++){
if (dataObj[i].key == dataObj[i].key){         //<-- i am not getting what to do to compare their keys i.e. "group1" and "group1"
//my other statements
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:26:54.280

不要使用`eval`JSON.parse]( [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse) ) 代替。如果它在某些旧浏览器中不可用，那么有很多实现比仅`eval`.

这么说，有：

```
var data = '[{ "group1" : "T1"}, { "group1" : "T2"}, { "group2" : "T3"}]';
var array = JSON.parse(data); 
```

将生成一个对象数组，每个对象都有一个名为`group1`or的属性`group2`。要清楚：

```
var myobj = {"group1" : "T1"} 
```

是一个[Object literal](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Guide%2FValues%2C_Variables%2C_and_Literals#Object_literals)，它与以下内容完全相同：

```
var myobj = new Object();
myobj.group1 = "T1"; 
```

因此，如您所见，`key`任何地方都没有财产。

目前尚不清楚您要比较什么，还因为第三个对象似乎具有不同的属性名称。

**更新**：关于您的评论，这里的重点是没有“对象键”，只有对象的属性。这意味着，您需要提前知道“密钥”的名称才能使用它：

```
array[0].group1 === array[1].group1 // false, one is "T1", one is "T2" 
```

如果你想要一个`key`包含 value 的属性，那么`"group1"`你的对象需要不同：

```
var data = '[{"key" : "group1", "value": "T1"}, {"key": "group1", "value" : "T2"}, { "key" : "group2", "value" : "T3"}]' 
```

然后，您可以拥有：

```
var array = JSON.parse(data);

array[0].key === array[1].key // true, both are "group1"
array[0].value === array[1].value // false, one is "T1", one is "T2" 
```

# facebook - Facebook Open Graph，用一个动作和多个对象创建一个故事

> ID：15922699
> 
> 赞同：2
> 
> 时间：2013-04-10T10:00:08.457
> 
> 标签：facebook, facebook-opengraph

创建开放式图表故事时，我选择一个动作和一个对象。例如：

```
user created GROUP on MyCoolGroups 
```

现在没关系，但我需要创建一个涉及两个或更多对象的动作。例如：

```
user invited JOHN to GROUP on MyCoolGroups 
```

其中“INVITE”是动作，“JOHN”是一个对象（在这种情况下是一个 facebook 用户，应该得到这个动作的通知），“GROUP”也是一个有效的开放图对象。

任何帮助将不胜感激。

# linux - Awk/Perl 以合理的格式将文本文件转换为 csv

> ID：15922706
> 
> 赞同：2
> 
> 时间：2013-04-10T10:00:25.580
> 
> 标签：linux, perl, awk

我有一个具有以下格式的历史自动生成日志文件，我想在上传到数据库之前将其转换为 csv 文件

```
--------------------------------------
Thu Jul  8 09:34:12 BST 2010
BLUE Head 1
Duration = 20 s
Activity = 14.9 MBq
Sensitivity = 312 cps/MBq
--------------------------------------
Thu Jul  8 09:34:55 BST 2010
BLUE Head 1
Duration = 20 s
Activity = 14.9 MBq
Sensitivity = 318 cps/MBq
--------------------------------------
Thu Jul  8 10:13:39 BST 2010
RED Head 1
Duration = 20 s
Activity = 14.9 MBq
Sensitivity = 307 cps/MBq
--------------------------------------
Thu Jul  8 10:14:10 BST 2010
RED Head 1
Duration = 20 s
Activity = 14.9 MBq
Sensitivity = 305 cps/MBq
--------------------------------------
Mon Jul 19 10:11:18 BST 2010
BLUE Head 1
Duration = 20 s
Activity = 12.4 MBq
Sensitivity = 326 cps/MBq
--------------------------------------
Mon Jul 19 10:12:09 BST 2010
BLUE Head 1
Duration = 20 s
Activity = 12.4 MBq
Sensitivity = 333 cps/MBq
--------------------------------------
Mon Jul 19 10:13:57 BST 2010
RED Head 1
Duration = 20 s
Activity = 12.4 MBq
Sensitivity = 338 cps/MBq
--------------------------------------
Mon Jul 19 10:14:45 BST 2010
RED Head 1
Duration = 20 s
Activity = 12.4 MBq
Sensitivity = 340 cps/MBq
-------------------------------------- 
```

我想将日志文件转换为以下格式

```
Date,Camera,Head,Duration,Activity
08/07/10,BLUE,1,20,14.9
08/07/10,BLUE,1,20,14.9
08/07/10,RED,1,20,14.9
08/07/10,RED,1,20,14.9 
```

我用 awk 让我接近我想要的

```
awk 'BEGIN {print "Date,Camera,Head,Duration,Activity";RS = "--------------------------------------"; FS="\n";}; {OFS=",";split($3, a, " ");split($4,b, " "); split($5,c," ");print $2,a[1],a[3],b[3],c[3]}' sensitivity.txt > sensitivity.csv 
```

这给了我

```
Date,Camera,Head,Duration,Activity
,,,,
Thu Jul  8 09:34:12 BST 2010,BLUE,1,20,14.9
Thu Jul  8 09:34:55 BST 2010,BLUE,1,20,14.9
Thu Jul  8 10:13:39 BST 2010,RED,1,20,14.9
Thu Jul  8 10:14:10 BST 2010,RED,1,20,14.9 
```

我怎样才能

(a) 去掉第 4 行中的 4 个输出字段分隔符 (b) 将日期格式从 Thu Jul 8 09:34:12 BST 2010 转换为 DD/MM/YY（我可以在纯 awk 中执行此操作还是通过管道传输到perl)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:11:39.697

@sudo_O 的答案很好，但这里有一个替代方案：

```
$ cat tst.awk
BEGIN{ RS="---+\n"; OFS=","; months="JanFebMarAprMayJunJulAugSepOctNovDec" }
NR==1{ print "Date","Camera","Head","Duration","Activity"; next }
{ print sprintf("%04d%02d%02d",$6,(match(months,$2)+2)/3,$3),$7,$9,$12,$16 }

$ gawk -f tst.awk file
Date,Camera,Head,Duration,Activity
20100708,BLUE,1,20,14.9
20100708,BLUE,1,20,14.9
20100708,RED,1,20,14.9
20100708,RED,1,20,14.9
20100719,BLUE,1,20,12.4
20100719,BLUE,1,20,12.4
20100719,RED,1,20,12.4
20100719,RED,1,20,12.4 
```

请注意，我在上面使用了 GNU awk，因此我可以将 RS 设置为多个字符。对于其他 awk，只需将所有“---...”行转换为空行或控制字符或其他内容，并在运行脚本之前相应地设置 RS。

如果您不喜欢我建议的日期格式，请调整 sprintf() 以适应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:41:04.733

这个简单`awk`的脚本将完成这项工作：

```
BEGIN {
    n=split("Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec",month,"|")
    for (i=1;i<=n;i++) {
        month_index[month[i]] = i
    }
    print "Date,Camera,Head,Duration,Activity"  
}
/^-*$/{
    i=0
    next
}
{
    i++
}
i==1{
    printf "%02d/%02d/%02d,",$3,month_index[$2],substr($6,3)
}
i==2{
    printf "%s,%d,",$1,$3
}
i==3{
    printf "%d,",$3
}
i==4{
    printf "%.1f\n",$3
} 
```

输出：

```
$ awk -f script.awk file
08/07/10,BLUE,1,20,14.9
08/07/10,BLUE,1,20,14.9
08/07/10,RED,1,20,14.9
08/07/10,RED,1,20,14.9
19/07/10,BLUE,1,20,12.4
19/07/10,BLUE,1,20,12.4
19/07/10,RED,1,20,12.4
19/07/10,RED,1,20,12.4 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T04:01:12.190

我想我会展示如何实际解析输入，而不仅仅是执行字符串转换。

```
#! /usr/bin/env perl
use strict;
use warnings;
use Date::Parse;
use Date::Format;
use Text::CSV;

sub convert_date{
  my $time = str2time($_[0]);
  # iso 8601 style:
  return time2str('%Y-%m-%d',$time); # YYYY-MM-DD

  # or the outdated style output you wanted
  return time2str('%d/%m/%y',$time); # DD/MM/YY
}

my %multiply_table = (
  s => 1,
  m => 60,
  h => 60 * 60,
  d => 60 * 60 * 24,
);
sub convert_duration{
  my($d,$s) = $_[0] =~ /^ \s* (\d+) \s* (\w) \s* $/x;
  die "Invalid duration '$_[0]'" unless $d && $s;
  return $d * $multiply_table{$s};
}

my @field_list = qw'Date Camera Head Duration Activity';

my $csv = Text::CSV->new( { eol => "\n" } );

# print header
$csv->print( \*STDOUT, \@field_list );

# set record separator
local $/ = ('-' x 38) . "\n";

# parse data
while(<>){
  chomp; # remove record separator
  next unless $_; # skip empty section
  my($time,$camdat,@fields) = split m/\n/; # split up the fields

  my %data;

  # split camera and head fields
  @data{qw(Camera Head)} = split /\s+Head\s+/, $camdat;

  # parse lines like:
  #   Duration = 20 s
  #   Activity = 14.9 MBq
  #   Sensitivity = 305 cps/MBq
  for(@fields){
    my($key,$value) = /(\w+) \s* = \s* (.*) /x;
    $data{$key} = $value;
  }

  # at this point we start reducing precision

  $data{Date} = convert_date( $time );

  # remove measurement units
  $data{Duration} = convert_duration($data{Duration}); # safe
  $data{Activity} =~ s/[^\d]*$//; # unsafe

  $csv->print(\*STDOUT, [@data{@field_list}]);
} 
```

# assembly - 今天 x86 上有多少条指令？

> ID：15922708
> 
> 赞同：27
> 
> 时间：2013-04-10T10:00:29.030
> 
> 标签：assembly, x86, 64-bit, intel, amd-processor

我正在尝试通过到目前为止的所有 sse 添加从旧的 386 基本指令中学习最新的 x86 程序集。

我读了一些东西，比如 SSE5 counts 170 new instructions - 我被催促知道目前总共有多少条指令。

有些人可能会说这很难计算（因为其中一些很接近，但适用于不同类型的参数），但我认为可以通过一些关于如何将倍数计为一个的合理假设来计算它们。那么有人可以提供答案吗？

最好的答案是每个处理器扩展中有多少指令的表格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T15:16:35.257

看看这里，这个清单应该让您了解每个 x86 架构中添加了多少指令。

无论如何，没有比官方[英特尔® 64 和 IA-32 架构软件开发人员手册](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)更好的参考资料了。

# jquery - （有意）重叠的幻灯片

> ID：15922709
> 
> 赞同：0
> 
> 时间：2013-04-10T10:00:29.710
> 
> 标签：jquery, slideshow

我有这个幻灯片：

```
<div id="leftBtn">Left</div>
<div id="rightBtn">Right</div>

<div id="wrapper">
    <div id="slideshowContainer">
        <div id="slide_1" class="slide"></div>
        <div id="slide_2" class="slide"></div>
        <div id="slide_3" class="slide"></div>
        <div id="slide_4" class="slide"></div>
    </div>
</div> 
```

...具有向左滑动的效果。它工作得很好（代码的所有学分都归功于 jimjimmy1995）。我想要的是每张幻灯片在单击右键时与前一张重叠，在单击左键时与前一张重叠。调整不透明度也会很好。这是[小提琴](http://jsfiddle.net/ZkyZx/)。先感谢您。

佩德罗

# c - 将字节和剩余值转换为 int （对二进制补码感兴趣）

> ID：15922714
> 
> 赞同：0
> 
> 时间：2013-04-10T10:00:36.820
> 
> 标签：c, optimization, casting, arduino

为什么您在下面看到的代码会给出这些结果？

```
void loop() {
    byte test = 00000101;
    Serial.print("The byte test is: ");
    Serial.println(test);
    int x = (int)test;
    int y = (int)test<<8;
    Serial.print("The int x is: ");
    Serial.println(x);
    Serial.print("The int shifted y is: ");
    Serial.println(y);

    byte tost = 10000001;
    int z = test + tost;
    Serial.print("The int z is: ");
    Serial.println(z);

    delay(1000);
} 
```

**结果**：

> 字节测试为：65
> 
> 整数 x 是：65
> 
> int 移位 y 为：16640
> 
> 整数 z 为：194

如果我将测试更改为 00000001 ，它的表现会很好：

**更改代码：**

```
void loop() {
    byte test = 00000001;
    Serial.print("The byte test is: ");
    Serial.println(test);
    int x = (int)test;
    int y = (int)test<<8;
    Serial.print("The int x is: ");
    Serial.println(x);
    Serial.print("The int shifted y is: ");
    Serial.println(y);

    byte tost = 10000001;
    int z = test + tost;
    Serial.print("The int z is: ");
    Serial.println(z);

    delay(1000);
} 
```

**结果：**

```
The byte test is: 1

The int x is: 1

The int shifted y is: 256

The int z is: 130 
```

我的问题是我有两个字节要从加速度计的数据寄存器中读取。该值存储在[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)中，因此我想检查一下，因为`wire.read`返回一个字节，有人说它是有符号的，如果我销毁这些值，则返回一个无符号的字节，因为我必须进行一些移位。

所以我想检查我是否有一个字节，我尝试将它移动并将它存储到一个 int，我得到什么值，我想测试我是否可以以某种方式将有符号字节值存储在一个字节数组中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T10:08:14.013

仅仅因为你写了一个“看起来像二进制”的数字，因为它有很多 1 和 0，并且是 8 位宽，并不能让它神奇地成为二进制文字。你会怎么期待：

```
byte x = 100; 
```

和

```
byte x = 100; 
```

要知道该值应该是 100 [10]（一百还是 100 [2]（四）？

事实上，C（和 C++）甚至没有内置二进制文字：以 开头的数字文字`0`被解释为*octal*，base 8。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T10:17:41.607

上面显示的答案是正确的，因为 Alexy Frunze 说以 0 开头的数字是 octal 。

```
000000101 is 65 not 5
65 << 8 =16640
10000001 in decimal is 129
129+65 = 194 
```

# c++ - 如何防止在文件末尾写入“\n”

> ID：15922720
> 
> 赞同：0
> 
> 时间：2013-04-10T10:00:58.523
> 
> 标签：c++, string, file, getline

我正在编写一个程序来从包含员工信息的文本文件中读取/写入。每个员工信息都存储在一个文本文件中，如下所示。员工信息存储到四行。

```
W00051 M
Christopher Tan
1200.00 150.00 1400.20 156.00 200.00 880.00 1500.00 8000.00 800.00 120.00 1600.00 1800.00
1280.00 1500.00 140.80 1523.00 2000.00 2300.00 2600.00 8800.00 19800.00 1221.00 3000.00 1900.00
W00012 E
Janet Lee 
2570.00 2700.00 3000.00 3400.00 4000.00 13000.00 200.00 450.00 1200.00 8000.00 4500.00 9000.00
1238.00 560.00 6700.00 1200.00 450.00 789.00 67.90 999.00 3456.00 234.00 900.00 2380.00 
```

我有一个删除员工功能，它接受员工 ID（W00012）并删除包含员工信息的行。更新的文件存储在 tempfilesource 中。

```
void delete_employee(char filesource[],char tempfilesource[],int employee_line,char inputid[])
{

char charline[255];
string line;
int linecount = 1;

ifstream inputempfile;
ofstream outputempfile;
inputempfile.open(filesource);
outputempfile.open(tempfilesource);

outputempfile.precision(2);
outputempfile.setf(ios::fixed);
outputempfile.setf(ios::showpoint); 

if (inputempfile.is_open())
{

 while (getline(inputempfile,line))
 {

  if((linecount<employee_line || linecount>employee_line+3))
  {
    outputempfile<< line;
  }
  linecount++;
 }
 inputempfile.close();
 outputempfile.close();
} 
```

}

当我要删除的员工位于文本文件的底部时，就会出现问题。更新后的文件包含一个空白换行符：

```
W00051 M
Christopher Tan
1200.00 150.00 1400.20 156.00 200.00 880.00 1500.00 8000.00 800.00 120.00 1600.00 1800.00
1280.00 1500.00 140.80 1523.00 2000.00 2300.00 2600.00 8800.00 19800.00 1221.00 3000.00 1900.00
<blank newline> 
```

如何防止将换行符写入文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:04:58.663

至少有两种选择：

*   您可以检查写入的行是否是最后一行并在写入之前修剪字符串。

*   完成写入后，您可以从文件中删除最后一个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:08:36.017

`eof()`从文件中提取时不要用作您的条件。它并不能很好地表明是否实际上还有任何东西可以提取。将其更改为：

```
while (getline(inputempfile,line))
{
  if((linecount<employee_line || linecount>employee_line+3))
  {
    outputempfile<< line;
  }
  linecount++;
} 
```

`\n`文本文件通常以文本文件隐藏的额外内容结尾。正如您所拥有的那样，当您迭代时，将读取最后一行并`\n`提取最后一行。由于`getline`不关心读取超出`\n`（毕竟是分隔符），它没有看到它已经到达末尾，所以没有设置 EOF 位。这意味着即使没有任何内容可读取，下一次迭代也会继续，`getline`提取文件末尾的虚无，然后将其写入输出。这给了你这条额外的线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:58:52.130

或者，如果行变量仅包含“\n”，则不要将“行”变量写入“outputempfile”

即是这样的：

```
while (getline(inputempfile,line))
{
  if((linecount<employee_line || linecount>employee_line+3) && strcmp(line,"\n")==0)
  {
    outputempfile<< line;
  }
  linecount++;
} 
```

不确定语法，但这个想法应该可行

# user-interface - Paraview：属性 GUI 非常宽

> ID：15922731
> 
> 赞同：1
> 
> 时间：2013-04-10T10:01:31.477
> 
> 标签：user-interface, paraview

我使用 Paraview (3.98) 来显示 FEM 模拟的结果。“属性”可拆卸窗口包含一些设置`Display (UnstructuredGridRepresentation)`，这些设置为“不透明度表值”和“半径表值”创建 GUI 条目，这些条目非常大，并且使其他设置超出了窗口的边缘。AFAIR 在以前的版本 os Paraview 中这不是问题。有没有办法让 GUI 再次变得不那么宽？

![视窗截图](https://i.stack.imgur.com/j9sKO.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-24T10:08:19.877

我也很难克服这个问题，paraview 3.98 的解决方案是使用 option `--use-old-panels`。或者您可以升级到 PV 4.0.1，修复了这个恼人的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-31T23:30:53.787

加载 PointSprite 插件时，3.98 会出现问题。如果您不使用插件，则无法加载该插件，这将解决该问题。正如 Zony 建议的那样，您可以随时升级到 4.0.1，这个问题就会消失。

# c# - 如何告诉 Ninject 为嵌套构造函数注入相同的实例？

> ID：15922739
> 
> 赞同：4
> 
> 时间：2013-04-10T10:01:45.130
> 
> 标签：c#, dependency-injection, ninject

我有一个 Windows 服务应用程序，我想将 Ninject 用于我的服务类。有一些服务类使用其他的，比如“较低级别”或更通用的服务类。每个服务通常都需要一个用于数据访问的存储库。

例如，我有一个 IRepository 接口、一个 IServices1 和一个 IServices2 接口。后两者有Services1 和Services2 实现，它们都有一个IRepository 类型的构造函数参数。现在假设 Services1 的实现想要使用 IServices2 接口的一些方法，所以我向 Services1 添加另一个构造函数参数，类型为 IServices2。现在，当我手动实例化 Services1 类时，我会执行以下操作：

```
var repo = new MyRepository(); // implementing IRepository
var service1 = new Services1(repo, new Services2(repo)); 
```

这样我可以确保两个服务都可以使用同一个存储库（这对我来说是一个基本要求）。

我如何使用 Ninject 为这个场景使用正确的 IRepository 注入为我准备一个 IServices1 实例？还是我对这种方法有任何重大的设计错误？

我不在 MVC 平台上，所以我在这里没有请求范围，我认为如果它是 MVC 就可以完成任务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T10:49:01.910

看看 NamedScope 扩展。有这种情况的示例。

[https://github.com/ninject/ninject.extensions.namedscope/wiki](https://github.com/ninject/ninject.extensions.namedscope/wiki)

# webdriver - WebDriver 无法定位元素。但是当我直接访问网页时它会定位

> ID：15922741
> 
> 赞同：0
> 
> 时间：2013-04-10T10:01:54.697
> 
> 标签：webdriver, selenium-webdriver

**自动化**：*预订巴士票*
**说明：**

1.  当我进入网页（*passengerDetails*）时， WebDriver**无法定位元素**

**   但是当我直接访问该页面（*passengerDetails*）时，它会**定位** 元素。

    注意：访问**SearchBus->SelectBus->SelectSeat->PassengerDetails** - 无法定位..**直接**
    访问PassengerDetails -能够定位.. 我猜，这是因为 URL 从**http 更改为 https**。无论如何建议我解决这个问题..* 

 ****** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:41:50.110

所以你的网站肯定是在使用 iframe 类型。基本上要使您的代码正常工作，您需要从“iframe”切换回您的网站。试试这个代码

```
driver.switchTo().defaultContent(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:57:48.787

在代码下方找到您的要求。它对我有用，直到输入乘客详细信息为止。如果这不是您要找的，请告诉我。

```
package org.com.selen;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.ie.InternetExplorerDriver;
import org.openqa.selenium.support.ui.Select;

public class JetBus {

    protected static WebDriver driver;

    public static void main(String[] args) {

        System.setProperty("webdriver.ie.driver", "E:\\Books&Tutorials\\Selenium\\IEDriverServer.exe");
        driver = new InternetExplorerDriver();
        driver.get("www.jetbus.in");
        driver.findElement(By.id("o_source")).clear();
        driver.findElement(By.id("o_source")).sendKeys("Bangalore");
        driver.findElement(By.id("o_dest")).clear();
        driver.findElement(By.id("o_dest")).sendKeys("Hyderabad");
        driver.findElement(By.id("departDate")).click();
        driver.findElement(By.linkText("11")).click();
        driver.findElement(By.id("search")).click();
        driver.findElement(By.xpath("//img[contains(@src,'http://jetbus.in/images/viewseats.png')]")).click(); 
```

//我们需要在执行下一组操作之前切换到fancybox框架

```
driver.switchTo().frame("fancybox-frame");
        driver.findElement(By.id("availableSeatImgId33")).click();
        new Select(driver.findElement(By.id("boardingPoint"))).selectByVisibleText("Hebbal - 11:05 pm");
        driver.findElement(By.cssSelector("option[value=\"122989^11:05 pm\"]")).click();
        driver.findElement(By.id("continue")).click(); 
```

//点击继续后，直接返回乘客详情页面。

```
new Select(driver.findElement(By.id("i_passengerGender"))).selectByVisibleText("Mr");
        driver.findElement(By.id("i_passengerName")).clear();
        driver.findElement(By.id("i_passengerName")).sendKeys("JetBusPassenger");
        driver.findElement(By.id("i_passengerAge")).clear();
        driver.findElement(By.id("i_passengerAge")).sendKeys("49");
        driver.findElement(By.id("i_passengerMobile")).clear();
        driver.findElement(By.id("i_passengerMobile")).sendKeys("3698521463");
        driver.findElement(By.id("i_passengerEmail")).clear();
        driver.findElement(By.id("i_passengerEmail")).sendKeys("a_b@jetbus.com");
        driver.findElement(By.name("ContinuePayNew")).click();
        driver.findElement(By.cssSelector("div.notAvailableDiv > a > span")).click();

    }

} 
```*****

# c# - 获取圆上两个向量之间的角度

> ID：15922742
> 
> 赞同：-2
> 
> 时间：2013-04-10T10:01:57.663
> 
> 标签：c#, math, vector, game-engine, game-physics

我有一个 P1、P2 和 P3 向量，我需要倾斜。它必须是积极的。例如α = 30, θ=270

![在此处输入图像描述](https://i.stack.imgur.com/somZb.jpg)

我可以计算 P1->P2;α 或 p1->P3;θ 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:05:42.087

相关维基百科文章：[点积](http://en.wikipedia.org/wiki/Dot_product)

通过计算两个向量的点积，然后除以它们的大小的乘积，你得到 cos(angle)。使用 acos，您可以提取角度。

# powershell - Winform 启动后隐藏或最小化 powershell 提示

> ID：15922745
> 
> 赞同：3
> 
> 时间：2013-04-10T10:02:08.333
> 
> 标签：powershell

我编写了一个简单的 powershell 脚本来启动一个 winform（在 powershell 脚本中编写的 Winform 代码，例如 showContent.ps1 文件）并显示一些内容。我需要在 Winform 启动后隐藏 powershell.exe 命令提示符。

在网上搜索了一些案例后，我尝试了以下场景：1）我尝试在脚本文件“showContent.ps1”的开头执行“ **powershell.exe -Command -windowstyle Hidden ”**

2）创建一个新的脚本文件 exa:LaunchWinForm.ps1 并在其中提到命令为： **PowerShell.exe -windowstyle Hidden showContent.ps1**

它不工作。

**我正在使用 Powershell 3.0**

任何人都可以告诉发生了什么问题或建议任何方法来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T10:23:17.623

在您创建的新的单独脚本文件中，试试这个：

```
powershell.exe -WindowStyle Hidden -File "c:\path\to the\GUI_Script.ps1" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-08T22:04:19.860

此解决方案在启动后最小化 Powershell 窗口。Powershell 窗口打开，然后消失，无需使用任何外部代码。我放在脚本的开头，但听起来您想在打开表单后放置代码。

```
$t = '[DllImport("user32.dll")] public static extern bool ShowWindow(int handle, int state);'
add-type -name win -member $t -namespace native
[native.win]::ShowWindow(([System.Diagnostics.Process]::GetCurrentProcess() | Get-Process).MainWindowHandle, 0) 
```

# c# - executenonquery 在 for 循环中不起作用

> ID：15922746
> 
> 赞同：0
> 
> 时间：2013-04-10T10:02:11.477
> 
> 标签：c#, asp.net

在数据库中：

```
Alter Procedure Update_MaterialTransactionsto2ForWithdrawal
  @materialName varchar(50),
  @staffNumber varchar(10),
  @description varchar(50),
  @transactionID int
As
Begin
   Update Table_MaterialTransactions
   set Status=2
   where StaffNumber = @staffNumber 
     and CrossSection = @description 
     and SubSubCategory = @materialName 
     and Status = 1 
     and TransactionID = @transactionID
End 
```

在数据访问层：

```
public static void UpdateMaterial(string staffNumber,string materialName,string description,int transaction)
{
    SqlConnection connection = new SqlConnection(ConnectDatabase.ReturnConnectionString());
    //I am passing connection string as the parameter

    try
    {
        connection.Open();
        SqlCommand cmd = new SqlCommand("Update_MaterialTransactionsto2ForWithdrawal", connection);

        cmd.CommandType = CommandType.StoredProcedure;

        cmd.Parameters.Clear();
        cmd.Parameters.Add("@materialName", SqlDbType.Varchar, 50).Value = materialName;
        cmd.Parameters.Add("@staffNumber", SqlDbType.Varchar, 50).Value = staffNumber;
        cmd.Parameters.Add("@description", SqlDbType.Varchar, 50).Value = description;
        cmd.Parameters.Add("@transactionID", SqlDbTypeInt).Value = transactionID;

        int i = cmd.ExecuteNonQuery();

        connection.Close();
    }
    catch(Exception ex)
    {
       connection.Close();
    } 
```

在客户端：

```
void btnSubmit_Click(Object sender,EventArgs e)
{
   int j=0,k=0;

   for(int i=0;i<transactions.Count;i++)
   {
       string id = "ctl00$ContentPlaceHolder1$" + i.ToString();

       CheckBox chk=(CheckBox)Page.FindControl(id);

       if(chk.Checked == true)
       {
            Objects.UpdateMaterial(staffNumbers[i].ToString(), materials[i].ToString(), descriptions[i].ToString(), Convert.ToInt32(transactions[i]));

            j++;
       }
       else
       {
            Objects.DeleteTheSelectedRowOfMaterialTransaction(staffNumbers[i].ToString(), materials[i].ToString(), descriptions[i].ToString(), Convert.ToInt32(transactions[i]));

            k++;
        }
   } 
```

我在表中有复选框，当用户选中复选框并单击提交时，选中的框将更新数据库。

但是`cmd.ExecuteNonQuery()`没有执行，它返回 0 行。它没有抛出任何错误。但是，如果我在数据库中手动执行此操作，则存储过程可以正常工作。

请告诉我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:22:55.603

尝试在程序中添加最后一行

```
Return @@Rowcount 
```

# java - Java 理解 Java 逻辑上的主要方法

> ID：15922749
> 
> 赞同：5
> 
> 时间：2013-04-10T10:02:21.870
> 
> 标签：java, main

main 方法是 Java 应用程序中关于启动应用程序作为入口点的最重要的方法。在使用此方法之前发生的情况尚不清楚。请有人可以通过根据方法签名纠正我的看法来帮助我理解/澄清在使用该方法之前会发生什么，如下所示：

*   JVM 至少会创建一个 Object 来访问您的 main 方法。这个（假定的）对象尝试根据显然将您绑定到已知方法签名的 API 访问您的 Java 应用程序`public static void main (String[] args){}`

    *   `public` 您不能限制 JVM 上的（假定的）单独对象访问包含 main 方法的对象，完全只看逻辑而不是 API/签名？

    *   `static`根本没有对象启动并运行来创建任何其他对象实例（除了假定的 JVM 实例）来实例化或创建对象。static 修饰符意味着访问此方法的唯一可能性，因为它没有绑定到实例，因此可以在没有实例的情况下访问。再一次，这是逻辑，因为没有任何对象启动并运行（除了假定的 JVM 对象），还没有任何对象可以实例化任何其他对象？

    *   `args`跨语言和应用程序/可执行文件的标准，以提供自定义应用程序的能力？|

这是接近和理解主要方法的正确且合乎逻辑的方式吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T10:08:46.280

尚不完全清楚您真正要问的是什么，但[JVM 规范第 5.2 节](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-5.html#jvms-5.2)至少涵盖了其中的一些内容：

> Java 虚拟机通过使用引导类加载器（第 5.3.1 节）创建一个初始类来启动，该类以依赖于实现的方式指定。Java 虚拟机然后链接初始类，对其进行初始化，并调用公共类方法 void main(String[])。调用此方法会驱动所有进一步的执行。执行构成主要方法的 Java 虚拟机指令可能会导致附加类和接口的链接（并因此创建），以及调用附加方法。
> 
> 在 Java 虚拟机的实现中，初始类可以作为命令行参数提供。或者，实现可以提供一个初始类，该类设置一个类加载器，然后加载一个应用程序。初始类的其他选择是可能的，只要它们与前一段中给出的规范一致。

[JLS 12.1 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.1)也有一些其他的描述。

JVM`main`直接调用该方法——它不需要创建新对象来执行此操作。尽管`main`方法本身必须是公共的，但它声明的类却不是。例如：

```
public class Test {
    private static class EntryPoint {        
        public static void main(String[] args) {
            System.out.println("Hi");
        }
    }
} 
```

然后执行：

```
java 'Test$EntryPoint' 
```

它按预期打印“Hi”。

除了通过特权反射或 JVM 显然有能力的直接访问之外，`Test`类之外的任何代码都无法访问。`EntryPoint.main()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T10:51:42.927

java首先启动它的核心——java.lang、类加载器、系统属性、运行时等，然后看看它必须做什么。在初始化 JVM 之前，该进程中没有“java”。它只是一个本地进程，所以我认为在这发生之前用 Java 术语思考是错误的。

现在 JVM 启动器将首先查看 pre mains，按顺序调用它们（首先调用相应的静态块）然后查看 main 方法，如果有类，则调用静态块；最后调用 main 方法，将任何命令行参数传递给 premain 和 main 方法。

简单测试：

```
public class Test {

    static{
            System.out.println("Hi static 1");        
    }

    public static void main(String[] args) {
        System.out.println("Hi main");
    }

    static{
        System.out.println("Hi static 2 better to have 1 static block per class but you can have N ");        
    } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:14:17.053

当您输入 java someClassName 之类的命令时，就会发生流动的事情。1.它加载类 someClassName 并执行静态块（如果有） 在类加载期间，将创建一个对象类类，它将代表您的类。2.它使用类名调用主方法（它不会创建你的类的任何对象），这就是为什么主方法是静态的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-06T09:06:40.430

说，文件`Demo.java`包含源代码

```
public class Demo{ 

} 
```

当此代码被编译为成功编译为

```
$javac Demo.java 
```

但是当它被执行为

```
$java Demo 
```

然后它显示一个异常错误

> Demo类中找不到main方法，请将main方法定义为：public static void main(String[] args)

所以编译器不负责检查`main()`方法是否存在。JVM对此负责。JVM检查`main()`原型为的方法

```
public static void main(Strings[] args) 
```

> 1.  为什么选择JVM搜索`main()`方法？是否可以将`main()`方法更改为任何其他方法`main_hero()`？

JVM 被指示`main()`从 JVM 内部查找方法。是的，可以将`main()`方法更改为`main_hero()`方法，但在 JVM 中，您必须指示搜索`main_hero()`方法。

```
JVM{ 

    public static void main(String[] args)  
} 
```

至

```
JVM{ 

    public static void main_hero(String[] args)     
} 
```

> 2.  为什么要公开？

JVM 安装在 C 或 D 驱动器中，因此可以从任何使用公共的地方调用。

> 3.  为什么是静态的？

`main()`方法与对象无关，因此如果没有现有对象，JVM 也必须调用此方法。`main`方法与对象无关。

> 4.  为什么作废？

JVM 将调用`main()`方法，但是如果`main()`方法返回，JVM 可以对返回值做什么。所以它的意思是`void`。

# php - 通过 cURL POST 发送数组

> ID：15922752
> 
> 赞同：1
> 
> 时间：2013-04-10T10:02:30.213
> 
> 标签：php, rest, curl, slim

嗨，我正在测试移动应用程序的 REST Web 服务的场景。在测试期间，我需要使用 post 方法将数组发送到我的 php 程序。我正在通过 cURL 控制台进行操作。除了传递一个数组外，其余的工作都很好。请提出任何更改。

以下代码我在 cURL 控制台中传递

```
C:\curlw32>curl -H "Content-Type: application/json" -X POST http://localhost/slim-login/api/submit -d "{\"specialtyCheckbox\":\"[1,2,3]\"}" 
```

这是捕获它的php代码

```
$request = Slim::getInstance()->request();
$onsubmit_content = json_decode($request->getBody());
$spec=$onsubmit_content->specialtyCheckbox;
echo json_encode(count($spec)); 
```

这里显示的数组长度为 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:12:22.853

不要在数组周围使用引号（如果要发送 json 数组）：

```
"{\"specialtyCheckbox\":[1,2,3]}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:12:40.040

您可以尝试通过 PHP 脚本传递您的数组吗（使用 CURL）

```
$ch = curl_init ($url); // your URL to send array data
curl_setopt ($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postData); // Your array field
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true);
$result = curl_exec ($ch);

print_r($result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-03T07:15:41.023

如果你想通过**CURL**调用传递数组，答案很简单。将所有输入参数放在数组中，如 -

```
$post = array('prgmCode'=>'3',
                'userStateCode'=>'TA',
                ); 
```

如果您需要在此传递一个输入数组，您可以设置

```
`$chkBoxArr = array(1,2,3,4);
$post = array('prgmCode'=>'3',
                'userStateCode'=>'TA',
                'chkBoxArr'=>$chkBoxArr
                );` 
```

您可以使用函数 http_build_query() 从数组中生成查询字符串。

```
`$data = http_build_query($post);` 
```

并将数据设置为您的 curl

```
`curl_setopt($curlSession, CURLOPT_POSTFIELDS, $data);` 
```

检查服务器端的请求。完毕。:) :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-18T15:00:49.383

请试试这个

```
 curl -d '{"previous_questions":"['hello', 'world', 'finally']"}' -H "Content-Type: application/json" -X POST http://localhost:5000/quizzes 
```

# ios - 将一个单独的文件转换为 arc

> ID：15922753
> 
> 赞同：1
> 
> 时间：2013-04-10T10:02:38.837
> 
> 标签：ios, objective-c, automatic-ref-counting

我有一个项目已经过渡到`ARC`. 现在我正在尝试包含来自另一个项目的现有文件，该文件没有使用 ARC，我希望它也符合 ARC：release-retains，[super dealloc]s 从这个文件中消失，快速修复，其他东西“转换为 Objective-C ARC ...”可以。

问题是我不能为此使用该`Edit->Refactor->"Convert to Objective-C ARC..."`工具。如果我在“选择要转换的目标”屏幕中仅选择此文件，我将收到“无法转换为 Objective-C ARC”消息，因为以下错误：`"@synthesize of 'weak'`属性仅在 ARC 或 GC 模式下允许。但它们已经在 ARC 中确实是模式！还有许多警告：“方法可能缺少`[super dealloc]`呼叫”

如果我在转换时选择了除标有 -fno-objc-arc 之外的所有文件，我只会收到有关弱属性的错误。

当然，我可以手动构建和删除发布保留，但是如果有公共汽车（转换工具）为什么要走路......那么我可以将单独的文件自动转换到 ARC 吗？

**更新：**我不希望使用 -fno-objc-arc 标志关闭此文件的 ARC，我希望在此文件中使用 ARC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:12:49.887

如果您坚持让 Xcode 完成工作，请创建一个新的 Xcode 项目并在创建时取消选择“使用 ARC”。添加要转换的文件，并将项目转换为 ARC。获取修改后的文件并将它们导入到您的其他项目中。

但是，手动转换文件可能更简单。这并不困难，即使对于大文件或整个项目也是如此。只需依靠编译器：构建您的应用程序，检查错误并简单地删除所有保留/释放调用并将任何`NSAutoreleasePool`s 转换为`@autoreleasepool {}`. 如果与核心基础类型交互，您可能还需要添加 __bridge casts。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:57:35.873

听起来您必须手动将此文件转换为 ARC，而不是依赖自动转换工具。您需要浏览文件并删除所有发布、保留等内容。我以前做过，虽然需要一段时间，但不会太痛苦。依靠来自 Xcode 的错误消息来指导您在代码中需要修复/删除的内容。这是我发现可能有帮助的几个链接。另请查看 Apple 的 ARC 文档和 WWDC 2011 会谈（在第二个链接底部引用）。

[Xcode ARC 转换工具问题](https://stackoverflow.com/questions/7862636/xcode-arc-conversion-tool-issue)

[http://blog.mugunthkumar.com/articles/migrating-your-code-to-objective-c-arc/](http://blog.mugunthkumar.com/articles/migrating-your-code-to-objective-c-arc/)

# android - Honeycomb 3.1 3.2 中的 Android HTTPS 渐进式流式传输

> ID：15922755
> 
> 赞同：0
> 
> 时间：2013-04-10T10:02:50.587
> 
> 标签：android, android-3.0-honeycomb, android-mediaplayer, google-tv

根据这个页面：http: [//developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)

Android 3.1 和 3.2 应该支持`HTTPS`渐进式流媒体，但我很难找到如何做到这一点，因为`setDataSource`for`MediaPlayer`只需要`http`/ `rtsp`。是否有解决方法来流式传输`HTTPS`内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:25:18.880

由于您标记了您的问题#google-tv，我可以肯定地说，在#google-TV 上，https 不适用于当前和最后几个版本的 HLS。

如果您想保护您的内容，请发送带有初始密钥的 cookie，然后为您的分段使用带轮换密钥的 AES。要设置初始 cookie 进行验证，您需要使用反射在 videoView 中设置 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:53:33.463

首先，**Honeycomb**是封闭源代码并在 NDA 下发布。因此，由于法律限制，可能无法在公共论坛上讨论 Honeycomb 的来源。

然而，随后的`AOSP`版本，即**冰淇淋三明治**又名**ICS**已经从 Honeycomb 中派生了很多功能，因此，我基于相同的措辞来表达我的答案。

从[`MediaPlayer.java`](http://androidxref.com/4.0.4/xref/frameworks/base/media/java/android/media/MediaPlayer.java)消息来源来看，我同意您对支持`http`或`rtsp`仅从[此处](http://androidxref.com/4.0.4/xref/frameworks/base/media/java/android/media/MediaPlayer.java#820)观察到的观察。但是，从播放器引擎实现中，我们可以观察到`https`它也受到支持，从[`AwesomePlayer::finishSetDataSource`](http://androidxref.com/4.0.4/xref/frameworks/base/media/libstagefright/AwesomePlayer.cpp#1959). 我想您已经考虑过与意图相关的`http`下载依赖项。

```
<uses-permission android:name="android.permission.INTERNET" >
</uses-permission> 
```

简而言之，我觉得`https`可能已经得到了平台的支持。

# c++ - 在构造函数或 init 函数中创建对象

> ID：15922760
> 
> 赞同：0
> 
> 时间：2013-04-10T10:03:04.870
> 
> 标签：c++, class

我已经定义了一个这样的类：

```
 class CircularBuffer {
   private:
     struct entry {
       uint64_t key;
       int nextPtr;
       int prevPtr;
       int delta;
     };

     int head, tail, limit, degree;
     entry *en;
   public:
     CircularBuffer(int a, int b)
     {
       limit = a;
       head = 0;
       tail = limit -1;
       degree = b;
       en = new entry[ limit ];
       for (int i=0; i<limit; i++) {
         en[i].key = 0;
         en[i].delta = 0;
         en[i].nextPtr = 0;
         en[i].prevPtr = 0;
       }
     };
     ~CircularBuffer() { delete [] en; }
  }; 
```

在另一个文件中，我包含了这个类（头文件）

```
 #include "circular.h"
 class foo {
    CircularBuffer cb;
    foo() {}   //ERROR LINE
    void initialize() {
       cb = new CircularBuffer(10, 2);
    }
 }; 
```

但是，这有错误说：

```
 error: no matching function for call to ‘CircularBuffer::CircularBuffer()’
 note: candidates are: CircularBuffer::CircularBuffer(int, int)
 note:                 CircularBuffer::CircularBuffer(const CircularBuffer&) 
```

它迫使我这样做：

```
 #include "circular.h"
 class foo {
    CircularBuffer cb;
    foo()
      : cb( CircularBuffer(10, 2) )
    {}

    void initialize() {}
 }; 
```

但是我不想要第二个实现。我要第一个。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:06:10.510

您可以添加默认构造函数

```
CircularBuffer()
{
    // set a and b to default values
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:05:47.770

这应该是可能的

```
#include "circular.h"
class foo {
    CircularBuffer cb;
    foo() {}
    void initialize() {
        cb = CircularBuffer(10, 2);
    }
}; 
```

您的版本的问题是您使用的是`new`，它返回一个指针，但成员变量`cb`不是指针。

但是，最好的方法是

```
#include "circular.h"
class foo {
    CircularBuffer cb;
    foo() : cb(10,  2) {}
}; 
```

或者，如果您想将参数传递给构造函数

```
#include "circular.h"
class foo {
    CircularBuffer cb;
    foo(int a, int b) : cb(a,  b) {}
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:10:04.910

> 它迫使我这样做：
> 
> ```
> ...
> foo()
>   : cb( CircularBuffer(10, 2) )
> {}
> ... 
> ```
> 
> 但是我不想要第二个实现。我要第一个。我该如何解决？

它不会强迫你这样做，而是强迫你这样做：

```
: cb(10, 2) 
```

这就是你在 C++ 中初始化的方式。打开之后的一切`{`都是赋值，而不是初始化。

“修复”是使用初始化而不是赋值进行初始化。没有太多的爱或恨，这是 C++。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T10:10:29.413

只需定义`cb`为指针

```
#include "circular.h"
 class foo {
    CircularBuffer * cb;
    foo() {}   //ERROR LINE
    void initialize() {
       cb = new CircularBuffer(10, 2);
    }
 }; 
```

别忘了到`delete cb;`某个地方不泄露你的记忆

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-10T10:06:22.060

它给你一个错误，因为 cb 不是一个指针，你正在使用“new”。

但是顺便说一句......构造函数初始化更有效：D

# actionscript-3 - gotoAndStop 不起作用？

> ID：15922765
> 
> 赞同：0
> 
> 时间：2013-04-10T10:03:12.387
> 
> 标签：actionscript-3, movieclip, timeline

我正在尝试使用 gotoAndStop 从一个影片剪辑跳转到其他影片剪辑中的帧。

但是当使用 gotoAndStop 时，movieclip 就消失了？当我将其更改为 gotoAndPlay 时，它会跳转到正确的帧但播放影片剪辑并且不希望它停止？

```
angZoom_mc.addEventListener(MouseEvent.CLICK, zoomOut);

function zoomOut(event:MouseEvent):void
{
    MovieClip(this.parent.getChildByName('ZoomOutAngles_mc')).visible = false;
    MovieClip(this.parent).spin_Y.gotoAndStop(1);
} 
```

我不明白为什么它适用于 gotoAndplay 而不是 GotoAndStop？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:59:36.253

通过检查我在框架上是否有东西，我瞄准并纠正了其他使该框架不可见的代码，我解决了这个问题。

# magento - 为登录 magento 的客户创建一个观察者

> ID：15922766
> 
> 赞同：1
> 
> 时间：2013-04-10T10:03:13.540
> 
> 标签：magento, magento-1.7

如何为**登录**Magento`observer`的客户创建一个？

 **```
<events>
         <customer_login> <!-- identifier of the event we want to catch -->
           <observers>
             <Vi_Cartproduct> <!-- identifier of the event handler -->
               <type>singleton</type> <!-- class method call type; valid are model, object and singleton -->
               <class>cartproduct/observer</class> <!-- observers class alias -->
               <method>removeProduct</method>  <!-- observer's method to be called -->
               <args></args> <!-- additional arguments passed to observer -->
             </Vi_Cartproduct>
           </observers>
         </customer_login>
   </events> 
```

上述事件不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:08:03.180

试试这个....

```
<events>
    <customer_login>
        <observers>
            <vi_cartproduct_model_observer>
                <type>singleton</type>
                <class>Vi_Cartproduct_Model_Observer</class>
                <method>removeProduct</method>
            </vi_cartproduct_model_observer>
        </observers>
    </customer_login>
</events> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:15:02.733

如果您只想自定义主题`<customer_logged_in>`，`<customer_logged_out>`您可以在布局中添加或删除任何块。**

# objective-c - IBAction 不适用于 UITapGestureRecognizer

> ID：15922767
> 
> 赞同：1
> 
> 时间：2013-04-10T10:03:14.790
> 
> 标签：objective-c, ibaction, uitapgesturerecognizer

我正在开发一个应用程序，我需要`UIView`在单击时缩放`UITapGestureRecognizer`并希望`IBAction`在缩放后执行一段时间的缩放。这可能吗？。请给我一个小例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:37:39.383

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UITapGestureRecognizer *tapGestureRecognizer = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(handleDoubleTap:)];
    tapGestureRecognizer.numberOfTapsRequired = 2;
    [self.scrollContainer addGestureRecognizer:tapGestureRecognizer];
}
- (void)handleDoubleTap:(UIGestureRecognizer *)recognizer
{
    if(isAlreadyZoomed)
    {
        CGPoint Pointview = [recognizer locationInView:recognizer.view];
        CGFloat newZoomscal = 3.0;
        CGSize scrollViewSize = self.scrollContainer.bounds.size;
        CGFloat width = scrollViewSize.width/newZoomscal;
        CGFloat height = scrollViewSize.height /newZoomscal;
        CGFloat xPos = Pointview.x-(width/2.0);
        CGFloat yPos = Pointview.y-(height/2.0);
        CGRect rectTozoom = CGRectMake(xPos, yPos, width, height);
        [self.scrollContainer zoomToRect:rectTozoom animated:YES];
        [self.scrollContainer setZoomScale:3.0 animated:YES];
        isAlreadyZoomed = NO;
    }
    else
    {
        [self.scrollContainer setZoomScale:1.0 animated:YES];
        isAlreadyZoomed = YES;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:21:33.303

IBAction 只是返回 void 并仅采用 0 或 1 个参数的常规方法。

您可以在代码中调用它们，就像调用任何其他方法之王一样。

UITapGestureRecognizer 旨在在触发时调用 IBAction 方法。您可以从 InterfaceBuilder 或代码中设置它

例如下面的代码

```
 UITapGestureRecognizer * tap = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(handleTap:)];
tap.numberOfTapsRequired = 2;
[imageView addGestureRecognizer:[tap cop]]; 
```

当用户双击 imageView 时将调用此方法

```
- (void) handleTap:(UITapGestureRecognizer *)sender; 
```

在这种方法中，您几乎可以做任何您需要的事情：管理您的子视图，调用其他方法等......但是，如果您计划放大和缩小，我强烈建议使用 UIScrollView 类而不是 UIView 类.

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T11:07:26.737

嗨，我希望下面能给你一个想法.....

```
UITapGestureRecognizer *tap2 = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(scrollViewDoubleTapped:)];
 tap2.numberOfTapsRequired = 2;
 [self.view addGestureRecognizer:tap2];

- (void) scrollViewDoubleTapped:(UITapGestureRecognizer *)sender
{
   scrollZoomAdjust.zoomScale=2.0f;// set your required Zoom scale 
   // scrollZoomAdjust is the scroll view that contain the image within it 

} 
```

以上代码未经测试

# php - 图片的这条路径不起作用

> ID：15922769
> 
> 赞同：0
> 
> 时间：2013-04-10T10:03:16.887
> 
> 标签：php, apache

我在 PHP 中使用 pChart 构建图表。情况是我的图片在正确的文件夹中，我知道，因为如果我将该路径放在浏览器中，我可以看到我的图片，但在模板中，它不会显示。Firebug 显示“未能加载给定的 URI”。

```
<img src="/home/user1/mysite/Admin/Template/mx_graphs/example13.png"> 
```

图片具有给定的所有**rw 权限**和文件夹。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T10:05:38.167

您似乎使用的是 UNIX 文件路径而不是相对 URI。您的 Web 服务器不太可能配置为具有 DocumentRoot `/`（这样做会很愚蠢）。

构造一个相对于 HTML 文档或服务器的 DocumentRoot 的 URI。

后者*可能*是`/Admin/Template/mx_graphs/example13.png`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:15:56.773

记住声明：

```
<img src="/home/user1/mysite/Admin/Template/mx_graphs/example13.png"> 
```

将在客户端运行，因此如果您在存储图片的计算机上运行它，它应该可以正常工作，但如果您尝试从另一台计算机打开它，它将无法正常工作。尽量使用相对路径（[http://www.coffeecup.com/help/articles/absolute-vs-relative-pathslinks/](http://www.coffeecup.com/help/articles/absolute-vs-relative-pathslinks/)），并尽量将网站资源保存在网站根目录下，这样即使你托管站点图像被复制过来，仍然可以访问..

# ios - 如何制作可以水平滑动的tableView？

> ID：15922775
> 
> 赞同：-6
> 
> 时间：2013-04-10T10:03:48.093
> 
> 标签：ios, objective-c

我想要一个水平滑动的tableView。

看看scrollView可以做什么。

我可以吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:18:27.787

请看一下这个[**链接**](https://github.com/alekseyn/EasyTableView.git)

```
- (void)easyTableView:(EasyTableView *)easyTableView setDataForView:(UIView *)view forIndexPath:(NSIndexPath *)indexPath 
```

通过调用上述方法，您可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:18:24.220

您可以通过添加`UITableView`. `UIScrollView`扩展`UITableView`您想要的宽度并将`UIScrollView`内容大小设置为与`UITableView`实现文件中的框架（宽度和高度）相同。然后运行您的代码。我希望这会起作用。如果您有任何疑问，请告诉我。

# forms - jQuery移动表单提交而不触发页面Naviagion

> ID：15922783
> 
> 赞同：1
> 
> 时间：2013-04-10T10:04:01.533
> 
> 标签：forms, jquery, jquery-mobile, jquery-mobile-fieldset

如何在不触发 jQuery 移动表单处理的情况下导航到新页面，它会创建一个 ajax 请求，然后使用它的特殊功能加载页面（我不知道它的名称）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T10:06:19.573

将此属性添加到表单：

```
data-ajax="false" 
```

例子：

```
<form action="demo.php" method="post" id="check-user" class="ui-body ui-body-a ui-corner-all" data-ajax="false">
    <fieldset>
        <div data-role="fieldcontain">
            <label for="username">Enter your username:</label>
            <input type="text" value="" name="username" id="username"/>
        </div>                                  
        <div data-role="fieldcontain">                                      
            <label for="password">Enter your password:</label>
            <input type="password" value="" name="password" id="password"/> 
        </div>
        <input type="button" data-theme="b" name="submit" id="submit" value="Submit">
    </fieldset>
</form> 
```

# c# - 在 C# 中，延迟初始化实例字段的最简单方法是什么？

> ID：15922787
> 
> 赞同：0
> 
> 时间：2013-04-10T10:04:18.177
> 
> 标签：c#, asp.net, class, generics

我有一个包含 5-6 个字段的类，应该在构造函数运行后初始化一次。

```
 public OriginalFileProcessor(IConfigManager configManager)
        {
            this._configManager = configManager;
            this._field1 = this._configManager.GetAppSetting<int>ConfigKeys.Key1);
            this._field2 = this._configManager.GetAppSetting<int>ConfigKeys.Key2);
            this._field3 = this._configManager.GetAppSetting<int>ConfigKeys.Key3);
            this._field4 = this._configManager.GetAppSetting<int>ConfigKeys.Key4);
            this._field5 = this._configManager.GetAppSetting<int>ConfigKeys.Key5);
        } 
```

但除了构造函数中的简单赋值之外，我不喜欢编写逻辑。

例如，我不能对 field1 使用内联初始化，从那时起我就不能在那里使用 _configManager 实例：

```
private int readonly _field1 = this._configManager.GetAppSetting<int>ConfigKeys.Key1); 
```

如果我使用只读属性，那么我必须添加额外的代码，如下所示：

```
 private int? _field1;
        public int Property1
        {
            get
            {
                if (!this._field1.HasValue)
                {
                    this.__field1 = this._configManager.GetAppSetting<int>(Key1);    
                }
                return this._field1.Value;
            }
        } 
```

实例字段的后期初始化有没有更简单的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T10:13:46.967

`Lazy<T>`正如建议的那样，是一个不错的选择。

我通常使用的是以下...

提供你`_field*`是一个`nullable`

在您的财产中，您可以...

```
return this.__field1 ?? (this.__field1 = this._configManager.GetAppSetting<int>(Key1)); 
```

**编辑：**

给定评论讨论 - 为什么不只使用 a `non static approach`over `Lazy<T>`，例如

```
private readonly Lazy<int?> _field;
// init in ctor
_field = new Lazy<int?>(() => YourFieldInit(""));
// use in property
return _field.Value ?? 0; 
```

**编辑2：**

还有一个小测试来澄清 Lazy 行为：

```
public class DoLazy
{
    Lazy<int?> _field;
    public DoLazy()
    {
        // 'lazy' gets initialized - but `YourFieldInit` is not called yet.
        _field = new Lazy<int?>(() => YourFieldInit(""));
    }
    int Property
    {
        get
        {
            // `YourFieldInit` is called here, first time.
            return _field.Value ?? 0;
        }
    }
    int? YourFieldInit(string test)
    {   // breakpoint here
        return -1;
    }
    public static void Test()
    {
        var lazy = new DoLazy();
        int val1 = lazy.Property;
        var val = lazy.Property;
    }
} 
```

在 - 中放置一个断点`YourFieldInit`以查看它何时被实际调用。从您的例如 Main
调用。`DoLazy.Test()`

# php - Symfony2 PHP 5.4.4 无法更改活动会话的 ID

> ID：15922789
> 
> 赞同：2
> 
> 时间：2013-04-10T10:04:31.957
> 
> 标签：php, session, symfony

目前，我们在 Symfony2 中安装我们的 Web 应用程序，我们发现了一个阻塞问题。

*   linux Debian Wheezy
*   PHP 5.4.4
*   Symfony 版本 2.1.10-DEV - app/dev/debug

异常的致命错误：

> vendor/symfony/symfony/src/Symfony/Component/HttpFoundation/Session/Storage/Proxy/AbstractProxy.php throw new \LogicException('Cannot change the ID of an active session');

堆栈跟踪 ：

> 在 kernel.root_dir/cache/dev/classes.php 第 484 行 -+ public function setId($id) { if ($this->isActive()) { throw new \LogicException('Cannot change the ID of an active session '); } session_id($id); 在第 208 行的 kernel.root_dir/cache/dev/classes.php 中的 AbstractProxy ->setId ('09g5hbsvg1apk8d32k52l19rr5') -+ 在 kernel.root_dir/cache/dev/classes.php 中的 NativeSessionStorage ->setId ('09g5hbsvg1apk8d32k52l19rr5') 处第 780 行 -+ 在 Session ->setId ('09g5hbsvg1apk8d32k52l19rr5') 在 /home/wwwmain/www_v5/vendor/symfony/symfony/src/Symfony/Bundle/FrameworkBundle/EventListener/TestSessionListener.php 在第 54 行 -+ 在 TestSessionListener ->

日志：

> 调试 - 向侦听器“Symfony\Component\HttpKernel\EventListener\ProfilerListener::onKernelRequest”通知事件“kernel.request”。调试 - 向侦听器“Symfony\Bundle\FrameworkBundle\EventListener\TestSessionListener::onKernelRequest”通知事件“kernel.request”。调试 - 向侦听器“Symfony\Component\HttpKernel\EventListener\ProfilerListener::onKernelException”通知事件“kernel.exception”。调试 - 向侦听器“Symfony\Component\HttpKernel\EventListener\ExceptionListener::onKernelException”通知事件“kernel.exception”。CRITICAL - LogicException：无法在 /home/wwwmain/www_v5/app/cache/dev/classes.php 第 484 行更改活动会话的 ID（未捕获的异常）调试 - 通知事件“kernel.request” 监听“Symfony\Component\HttpKernel\EventListener\ProfilerListener::onKernelRequest”。调试 - 向侦听器“Symfony\Bundle\FrameworkBundle\EventListener\TestSessionListener::onKernelRequest”通知事件“kernel.request”。调试 - 向侦听器“Symfony\Bundle\FrameworkBundle\EventListener\SessionListener::onKernelRequest”通知事件“kernel.request”。调试 - 向侦听器“Symfony\Component\HttpKernel\EventListener\RouterListener::onKernelRequest”通知事件“kernel.request”。调试 - 向侦听器“Symfony\Component\HttpKernel\EventListener\LocaleListener::onKernelRequest”通知事件“kernel.request”。调试 - 通知事件“kernel.request”到监听器“Symfony\Component\Security\Http\Firewall::

有什么想法、想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T11:15:25.753

看起来你正在运行 phpunit 测试？如果是这样，那么如果找到具有会话名称的 Cookie，则 calss TestSessionListener 调用 Session::setId()。

我，也遇到这个问题。看起来唯一的方法是扩展这个类并覆盖“test.session.listener.class”参数。

# database - 同一台 Linux 机器上的两个应用程序之间的 tcp 连接是否会断开连接

> ID：15922793
> 
> 赞同：0
> 
> 时间：2013-04-10T10:04:44.970
> 
> 标签：database, linux, tcp

我正在使用连接池连接到同一 Linux 机器上的数据库。我想绝对确定我从连接池获得的连接是有效的。我现在正在测试借用连接，但理论上 tcp 连接仍然可以在验证和实际请求之间断开连接。此外，在每个请求之前进行测试会损害延迟和吞吐量。

使用文件套接字怎么样？它会断开连接吗？

更新：我想知道网络层的连接是否会中断。是不是只有app或者DB才能主动结束连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T01:28:56.583

> 我现在正在测试借用连接，但理论上 tcp 连接仍然可以在验证和实际请求之间断开连接。

是的，但不太可能。

> 此外，在每个请求之前进行测试会损害延迟和吞吐量。

(1) 仅当您为每个请求借用新连接时。(2) 你测量过“伤害”吗？

> 使用文件套接字怎么样？它会断开连接吗？

你当然不能假设它不会。例如，数据库端可能会在空闲时关闭它。

# php - 使用 wordpress 登录

> ID：15922794
> 
> 赞同：2
> 
> 时间：2013-04-10T10:04:46.830
> 
> 标签：php, wordpress, oauth

有没有像[这样的](https://en.gravatar.com/site/login)WordPress 登录 php 脚本？

此脚本用于使用 WordPress.com 帐户登录。

我已按照[文档](http://developer.wordpress.com/docs/oauth2/)编写脚本。但是当我打印访问令牌时它没有为我提供访问令牌。它表明它是空的。
这是我使用 WordPress.com 帐户实现登录的代码：

```
 session_start();
$client_id     = "2472";
$client_secret ="TaB3JPXeuJA8XsosdkMbZnuJoybxJaBF6WmDD11WFJg8QQme9fmye6l2Kxd45cpx";

$login_url     = "https://public-api.wordpress.com/oauth2/authorize?client_id=$client_id&redirect_uri=http://w3.softwarecookerbd.com/wordpress.php&response_type=code";

function getToken(){
    $curl = curl_init( "https://public-api.wordpress.com/oauth2/token" );
    curl_setopt( $curl, CURLOPT_POST, true );
    curl_setopt( $curl, CURLOPT_POSTFIELDS, array(
        'client_id'     => "2472",
        'redirect_uri'  => "http://w3.softwarecookerbd.com/wordpress.php",
        'client_secret' => "TaB3JPXeuJA8XsosdkMbZnuJoybxJaBF6WmDD11WFJg8QQme9fmye6l2Kxd45cpx",
        'code'          => $_GET['code'], // The code from the previous request
        'grant_type'    => 'authorization_code'
    ) );
    curl_setopt( $curl, CURLOPT_RETURNTRANSFER, 1);
    $auth       = curl_exec( $curl );

    $secret     = json_decode($auth);

    echo "<pre>";
    var_dump($secret);
    exit;
    $access_key = $secret->access_token;

}

if(isset($_GET["code"])&&!empty($_GET["code"])){
    //$url = "https://public-api.wordpress.com/oauth2/token?client_id=$client_id&client_secret=client_secret&redirect_uri=http://w3.softwarecookerbd.com/wordpress.php&code=".$_GET['code']."&grant_type=authorization_code";
    //$response = file_get_contents($url);
    //echo $response;
    getToken();
}else{
    header("Location: ".$login_url);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:40:03.500

我不确定你发布的实际脚本，但是有几个插件可以让你这样做，你可能想看看它们，因为它们是开源的，如果你真的想做自己动手，你可以随时偷看代码，看看问题出在哪里。

我知道的其中一些（不仅限于 wordpress.com，还包括其他服务）是：

[http://wordpress.org/extend/plugins/oa-social-login/](http://wordpress.org/extend/plugins/oa-social-login/)

[http://wordpress.org/extend/plugins/socialauth-wp/](http://wordpress.org/extend/plugins/socialauth-wp/)

[http://wordpress.org/extend/plugins/ssi-sumilux/screenshots/](http://wordpress.org/extend/plugins/ssi-sumilux/screenshots/)

如果我没记错的话（也许我错了）wordpress 喷气背包也有这个功能..

[http://wordpress.org/extend/plugins/jetpack/](http://wordpress.org/extend/plugins/jetpack/)

# php - '此评论对您有用吗？' 按钮 PHP Jquery Ajax

> ID：15922795
> 
> 赞同：0
> 
> 时间：2013-04-10T10:04:47.877
> 
> 标签：php, jquery, ajax, button, review

我正在用 php jquery 和 ajax 构建一个审查系统。我已经为“此评论有帮助吗？”编写了以下代码。按钮：

```
<input type='button' value='Yes' onClick = 'myCall()' 
       style='background-color:#556B2F;color:white;padding:2px; cursor:pointer'
       name='help' />
<input type='hidden' id='randomdirectory' value='$g' name='ids'/> 
```

$g 是我分配给存储在数据库中的评论 id 的变量。ajax 脚本是这样的：

```
<script>

function myCall() {

var ids = $('#randomdirectory').val(); 
var self = this;

    $.ajax({
        url: 'rev.php',
        type: 'POST',

        data: {ids: ids},
         success: function(data) {
        $('#ques1').hide();
    }

    });

} 
```

“rev.php”文件中的代码是这样的：

```
<?php
include 'includes/db.php';

$q = $_POST['ids'];
if ($q != ""){

$result = mysql_query("SELECT * FROM table where id='$q'");

while($row = mysql_fetch_array($result))
  {
  $finalproduct = $row['numberofhelpfulvotes'];
  $finalproduct1 = $finalproduct + 1;

  }

mysql_query("UPDATE table SET numberofhelpfulvotes='$finalproduct1' WHERE id ='$q'");
}

?> 
```

问题是当我在页面上有多个评论时。当您单击任何评论上的任何“是”按钮时，显示的第一个评论会获得添加的投票，而不是单击按钮的实际评论。此外，当在 ajax 调用后隐藏按钮和文本时，隐藏第一个评论按钮和文本，而不是单击按钮的评论。页面底部还会出现一条黑线。

对这些问题的任何解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:08:21.623

谢谢大家的回复。我最终这样做了，这对我来说非常有用：

```
<script>

$(function() {  
  $(".button").click(function() {  
     var ids = (this.id);

     $.ajax({
        url: 'rev.php',
        type: 'POST',

        data: {ids: ids},
         success: function(data) {
        $('.' + ids).hide();
    }

    });
  });  
});   

</script> 
```

这作为html：

```
<div class='$g'><font size='2' color='black'>Was this review helpful?</font>&nbsp;<input type='submit' value='Yes' onClick = 'myCall()' style='background-color:#556B2F;color:white;padding:2px; cursor:pointer' name='help' id='$g' class='button' /><input type='hidden' id='randomdirectory' value='$g' name='ids'/> 
```

php 保持不变，但我将对其进行更新以使其更安全。

# java - ibm 狂想曲汇编

> ID：15922796
> 
> 赞同：0
> 
> 时间：2013-04-10T10:04:48.520
> 
> 标签：java, rhapsody

我无法使用 ibm rhapsody 进行编译；我有这个错误：

构建 ------------ MainDefaultComponent.class ------------

```
 Executing: "C:\Program Files (x86)\IBM\Rational\Rhapsody\8.0\Share\etc\jdkmake.bat" DefaultComponent.bat build

   Unable to compile

   Build Done 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T09:25:22.540

看看这里：

[由于“无法编译”错误，无法运行 Rational Rhapsody](https://stackoverflow.com/questions/5103958/unable-to-run-rational-rhapsody-due-to-unable-to-compile-error/5665183#5665183)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-25T16:02:00.153

嗯，你在安装 Rhapsody 的过程中选择了正确的 JDK 吗？似乎并非如此。尽管上面提到的一些调整可能会起作用，但我强烈建议重新安装 Rhapsody，因为此工具会根据您提供的 JDK 位置对内部脚本进行许多调整。祝你好运。

# javascript - 如何通过其id在同一行显示两个具有其id的tr

> ID：15922801
> 
> 赞同：-1
> 
> 时间：2013-04-10T10:05:02.580
> 
> 标签：javascript, jquery, jquery-ui

我有一张带有 tr 标签的表格。我想在其类旁边并排显示两个 tr 标签。我怎么能用jquery做到这一点。

```
<table>
   <tr class='1'>
     <td>First</td>
   </tr>
   <tr class='1'>
      <td>second</td>
   </tr>
   <tr class='2'>
       <td>third</td>
   </tr>
   <tr class='3'>
       <td>fourth</td>
   </tr>
   <tr class='3'>
       <td>fifth</td>
   </tr>  
</table> 
```

然后在我想显示的输出中

```
 First     Second
 Third
 Fourth    Fifth 
```

我想动态设置这些我如何使用 jquery 或 javascript 来做到这一点。我想使用为 tr 标签声明的类。我知道要为此使用`<td>`标签。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:29:45.943

这是我想到的第一种方法：

```
var $tds = $("td");      // get all the tds
[].reverse.call($tds);   // reverse the order so we can easily loop backwards

$tds.each(function() {
    var $parentRow = $(this).parent(),
        // find the first row with the same class that isn't this row
        $firstTrSameClass = $("tr").filter("." +$parentRow.attr("class"))
                                   .not($parentRow).first();
    if ($firstTrSameClass.length > 0) { // if there is such a row
        $firstTrSameClass.append(this); // move the td
        $parentRow.remove();            // delete the original row
    }   
}); 
```

演示：http: [//jsfiddle.net/pgcdq/](http://jsfiddle.net/pgcdq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:18:05.083

我在这里看不到一个用例，但我想最简单的方法是创建新行并将单元格移动到它们。您将在此处找到有关移动元素的信息： [如何将一个元素移动到另一个元素中？](https://stackoverflow.com/questions/1279957/how-to-move-an-element-into-another-element)

# java - 如果我关闭来自 stardog 连接池的连接会发生什么

> ID：15922807
> 
> 赞同：1
> 
> 时间：2013-04-10T10:05:17.850
> 
> 标签：java, connection-pooling, rdf, pool, stardog

看看下面的代码。1\. 我正在为stardog 创建一个连接池
2\. 从池中获取一个连接。3\. 使用后将连接返回池。

我的问题是如果我这样做`aConn.close()`而不是回到游泳池会发生什么。

```
 ConnectionConfiguration aConnConfig = ConnectionConfiguration
.to("testConnectionPool")
.credentials("admin", "admin");

ConnectionPoolConfig aConfig = ConnectionPoolConfig
   .using(aConnConfig)
   .minPool(10)
   .maxPool(1000)
   .expiration(1, TimeUnit.HOURS)   
   .blockAtCapacity(1, TimeUnit.MINUTES);

// now i can create my actual connection pool
ConnectionPool aPool = aConfig.create();

// if I want a connection object...
Connection aConn = aPool.obtain();

// now I can feel free to use the connection object as usual...

// and when I'm done with it, instead of closing the connection, 
//I want to return it to the pool instead.
aPool.release(aConn);

// and when I'm done with the pool, shut it down!
aPool.shutdown(); 
```

如果我关闭连接会发生什么`aConn.close();`

每当我在没有池对象的任何类中使用连接时，我都会问的主要原因`aPool.release(aConn);`

是否建议这样做。它会破坏池的使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:34:58.170

如果您直接关闭连接，池仍然会有对 Connection 的引用，因为它还没有被释放，所以当 Connection 将关闭其资源时，Pool 将保留引用，并且随着时间的推移您可能会泄漏内存。

处理此问题的建议方法是当您从池中获取连接时，使用 DelegatingConnection 包装它：

```
public final class PooledConnection extends DelegatingConnection {
    private final ConnectionPool mPool;
    public PooledConnection(final Connection theConnection, final ConnectionPool thePool) {
        super(theConnection);
        mPool = thePool;
    }

    @Override
    public void close() {
        super.close();
        mPool.release(getConnection());
    }
} 
```

这样，您可以简单地在使用它的代码中关闭连接，它将正确释放回池中，您不必担心传递对池的引用。

# deterministic - 使用不同的cpu会导致同一个程序的输出不同吗？

> ID：15922809
> 
> 赞同：0
> 
> 时间：2013-04-10T10:05:22.693
> 
> 标签：deterministic, non-deterministic

如果同一个程序不使用任何随机数或 I/O，是否应该始终输出相同的结果，或者它是否有可能在不同的 cpu 上输出不同的东西（但相同的架构，不需要重新编译）？我特别考虑使用浮点数和双精度数的计算，这严重依赖于精度，如数值近似值中使用的那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:23:08.510

我不认为它应该发生，因为使用相同架构的 CPU 基本上应该使用它们用于存储数据的同一组寄存器。

简短：结果将是相同的。

# java - 发送文件时保持 Socket 活动

> ID：15922810
> 
> 赞同：0
> 
> 时间：2013-04-10T10:05:22.650
> 
> 标签：java, android, sockets

我正在将图像从我的 android 发送到 pc，它是我的应用程序的一部分，我为此使用套接字发送部分代码包括

```
public void sendfile()
{
    try {           
    System.out.println("looppppppp");
    File file = new File(Environment.getExternalStorageDirectory()+ File.separator + "test.jpg");
    byte [] mybytearray  = new byte [(int)file.length()];  
    FileInputStream fis = new FileInputStream(file);
    BufferedInputStream bis = new BufferedInputStream(fis);
    bis.read(mybytearray,0,mybytearray.length);         
    System.out.println("Send:"+mybytearray.length);
    bis.close();
    OutputStream ous = socket.getOutputStream();
    System.out.println("Sending...");
    ous.write(mybytearray,0,mybytearray.length);
    ous.flush();
    //ous.close();  
       // socket.close();
    System.out.println("send overrrrrrrrrrr");
    }catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }   
} 
```

程序启动时，Socket 连接在一个线程中。接收方是pc中的java代码如下

```
@Override
public void run() 
{
try
{
ServerSocket servsocket = new ServerSocket(13267);
System.out.println("Thread Waiting...");
Socket socket = servsocket.accept();
System.out.println("Accepted connection : " + socket);
System.out.println("Connected..");
while(true)
{
// filesize temporary hardcoded
long start = System.currentTimeMillis();
int bytesRead;
int current = 0;
mybytearray  = new byte [filesize];
File f=new File("d:\\ab.jpg");
f.createNewFile();
InputStream is = socket.getInputStream();
FileOutputStream fos = new FileOutputStream(f);
BufferedOutputStream bos = new BufferedOutputStream(fos);
System.out.println("b4");
bytesRead = is.read(mybytearray,0,mybytearray.length);
System.out.println("after");
current = bytesRead;
do {
   bytesRead =
   is.read(mybytearray, current, (mybytearray.length-current));
   if(bytesRead >= 0) current += bytesRead;
} while(bytesRead > -1);

bos.write(mybytearray, 0 , current);
bos.flush();
long end = System.currentTimeMillis();
System.out.println(end-start);
bos.close();
fos.close();
}
}catch(IOException e)
{
System.out.println("errorr");
}
}
} 
```

**问题是文件不会出现在我的电脑上除非我关闭我的输出流或套接字**如果我关闭输出流套接字正在关闭**为什么会这样？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:40:47.600

> 发送文件时保持 Socket 活动

*发送文件*使套接字保持活动状态。我看不到您的标题与您的问题的相关性。

> 问题是文件不会出现在我的电脑上，除非我关闭我的输出流或套接字

所以关闭它。关闭发送方的套接字会导致接收方退出您的接收循环，该循环没有其他退出方式。您的流复制循环比必要的复杂得多。在发送之前或之后在内存中缓冲整个文件既没有必要也不可取。

> 如果我关闭输出流，套接字将关闭，为什么会这样？

因为那是它指定要做的事情。关闭套接字的输入或输出流会关闭另一个流和套接字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:26:50.987

如果我理解正确，您希望与客户端保持套接字打开，并发送文件......

我的建议是： - 保持一个主线程打开以通知服务器有关新文件 - 打开新线程以发送每个新文件 - 添加代码以控制您可以同时发送的最大文件数（可选）

所以流程是：

```
1\. client open main socket
2\. server open the main socket and assign a client id 
3\. client request the send of a new file
4\. server keep in memory the file name and client id
5\. server send response authorizing the client to send the file
6\. client open a new thread to send the file 
```

# android - 如何找到默认设置应用程序的包名？

> ID：15922811
> 
> 赞同：5
> 
> 时间：2013-04-10T10:05:23.957
> 
> 标签：android, package, settings, taskmanager

我想阻止在我的应用程序中启动任务管理器和设置应用程序。为此，我尝试获取当前正在运行的应用程序并检查它们的包名称是否被允许。如果不允许，则显示一个新活动。

解决时显示默认android`Settings`应用程序的包名称是`com.android.settings`。现在我有一些疑问

1.  设置应用程序是否在所有 android 版本中都有包名称 com.android.settings？如果没有，它们是什么？

2.  如何找到任务管理器的包名？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-03-28T03:16:41.960

尝试这个

```
private String querySettingPkgName() {
        Intent intent = new Intent(android.provider.Settings.ACTION_SETTINGS);
        List<ResolveInfo> resolveInfos = getPackageManager().queryIntentActivities(intent, PackageManager.MATCH_DEFAULT_ONLY);
        if (resolveInfos == null || resolveInfos.size() == 0) {
            return "";
        }

        return resolveInfos.get(0).activityInfo.packageName;
    }
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T11:52:00.200

> 为此，我尝试获取当前正在运行的应用程序并检查它们的包名是否被允许。如果不允许，则显示一个新活动。

幸运的是，对于受您的应用影响的用户，这将是不可靠的。

> 设置应用程序是否在所有 android 版本中都有包名称 com.android.settings？

不必要。更重要的是，任何给定的固件都可以有任意数量的修改设置的应用程序，由固件作者提供。某些设置即使不是固件的一部分也可以修改，尤其是在有根设备上。

> 如果不是，它们是什么？

欢迎您列出所有设备制造商和 ROM 模组作者并问他们这个问题。

> 如何找到任务管理器的包名？

设备、ROM 模组中包含任意数量的“任务管理器”应用程序，并可在 Play 商店和其他分发点上使用。欢迎您列出所有这些，并向他们的作者提出这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-29T04:49:04.137

使用 adb 进入设备，然后调用：

> pm 列出包

这将为您提供一个包装清单。从那里你会看到：com.android.settings

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-17T11:10:37.570

```
 final PackageManager pm = getPackageManager();
    List<ApplicationInfo> packages = pm.getInstalledApplications(PackageManager.GET_META_DATA);

    for (ApplicationInfo packageInfo : packages) {
        Log.d("Packages", "" + packageInfo.packageName);
    } 
```

上面的代码应该可以帮助你

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-22T08:08:54.930

目前还不完全清楚情况是什么。我想这类似于向公众炫耀设备而不是让他们为其他人改造设备。

也许做白名单而不是黑名单会更好。这意味着商店应该说明哪些应用程序可以在设备上进行测试，然后如果是其他应用程序，您就可以开始您的活动。

但这又需要维护：流行应用程序的包名称也可能会更改。您最好提供一种通过在线服务更新应用程序设置的方法，这样您就可以更改所需的包，而无需物理访问设备，也无需下载和安装完整的应用程序。

如果您只需要一个经过很多人手的设备并且不应该被调和，我建议使用修改后的设备。我只知道 Sonim：他们提供了一个库（需要在清单中提供 Sonim 提供的哈希键才能使用它）。有了它，您可以在不阻止访问整个设置应用程序的情况下禁止更改许多设置。

# android - Android：定时器任务查询

> ID：15922813
> 
> 赞同：1
> 
> 时间：2013-04-10T10:05:28.573
> 
> 标签：android, timertask

我有一个应用程序，其中基于一些点击我使用 TimerTask() 启动计时器。但我也希望支持多次点击的多个计时器。因此，如果一个计时器已经在工作并且发出了另一次点击，那么它会启动一个单独的计时器线程，而不仅仅是取消第一个。

有人可以帮忙吗？

```
@Override
public void onListItemClicked(int index, Map<String, Object> data) {
    timer = new Timer();
    timer.schedule(new TimerTask() {
         int n = 0;
         @Override
         public void run() {        
             if (++n == 300) {
                 timer.cancel();
             }
             timer = null;
         }
    },1000,1000);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:17:38.250

你可以有这样的事情：

```
@Override
public void onListItemClicked(int index, Map<String, Object> data) {
    //you shouldn't have timer as class' property
    //if so your timer will cancel itself when you click again
    //local timer will be cancelled  when n is counted to 300 only
    Timer timer = new Timer();
    timer.schedule(new TimerTask() {
        int n = 0;
        @Override
        public void run() {

            if (++n == 300) {
                timer.cancel();
            }
            timer = null;
        }
    },1000,1000);
} 
```

# python-3.x - tkinter 报告框架以及鼠标坐标

> ID：15922815
> 
> 赞同：0
> 
> 时间：2013-04-10T10:05:32.413
> 
> 标签：python-3.x, tkinter

```
 def mouse_click(event):
    #'reports' to both terminal and results text box
    parent_name = Frame.winfo_parent(root)
    parent = Frame._nametowidget(parent_name)
    result = ("{0}: {1},{2}\n ".format('Clicked at', event.x, event.y))
    print('clicked at',parent,  event.x, event.y)

from tkinter import *

root = Tk()
root.title("Change Text")
root.geometry('700x500')

top=root.winfo_toplevel()
for rn in range(0,9): # rn = row number
    top.rowconfigure(rn, weight=1)
top.rowconfigure(rn, weight=0)    
for cn in range(0,5): # cn = column number
    top.columnconfigure(cn, weight=1)
# FRAME 1
frame1 = Frame(root,  borderwidth = 2, background = '#EFE0CD', relief = RIDGE,width = 25, height = 20)
frame1.bind("<Button-1>", mouse_click)
frame1.grid(column = 0, row = 0, columnspan = 2, rowspan = 3, sticky = N+S+E+W)
frame1_lbl = Label(frame1, text='Frame 1', font='comic-sans-MS 10 ', fg ='red', bg = '#EFE0CD')
frame1_lbl.grid(row=0, column =0)

# FRAME 2
frame2 = Frame(root,  borderwidth = 2, background = '#CCC6B0', relief = RIDGE,width = 25, height = 20)
frame2.bind("<Button-1>", mouse_click)
frame2.grid(column = 0, row = 3, columnspan = 2, rowspan = 3, sticky = N+S+E+W)
frame2_lbl = Label(frame2, text='Frame 2', font='comic-sans-MS 10', fg ='red', bg = '#CCC6B0')
frame2_lbl.grid(row=0, column =0,)
root.mainloop() 
```

我知道这是一个非常愚蠢的问题。如何识别单击鼠标的框架，以便报告在 xy 坐标处打印单击的 frame1 或 frame2？我发现了一些关于使用 winfo_parent 但显然没有正确使用它的信息。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:18:31.570

传入回调的事件对象有一个`widget`属性，该属性是对获取事件的小部件的引用。所以，`event.widget`是你想要打印的。

# bash - 获取日期超过 7 天的文件列表？

> ID：15922819
> 
> 赞同：0
> 
> 时间：2013-04-10T10:05:40.907
> 
> 标签：bash, date, ubuntu, pattern-matching

我有一个创建 mysql 备份的脚本，文件最终被调用。

`DB_name-M_D_Y.gz`所以例如`stackoverflow_users-04_10_2013.gz`

现在我事先不知道文件的名称，只知道模式。

我需要做的是调整脚本，在它创建新备份之前，检查任何文件中的日期是否早于 7 天，如果是，则对这些进行其他操作。

我知道如何做其他事情，但是首先获取文件列表是困难的。

我不能只使用修改后的日期，因为文件会被其他脚本触及，因此需要从文件名中读取日期。

那么，如何获取文件列表？

* * *

为了回复评论，假设这个虚拟数据

当前日期：2013 年 4 月10^日

```
database zero-03_31_2013.gz    #Older | Notice this one has spaces
database_one-04_01_2013.gz     #Older
database_two-04_02_2013.gz     #Older
database_three-04_03_2013.gz   #Newer | Actually 7 days, but we want OLDER than!
database_four-04_04_2013.gz    #Newer
database_five-04_05_2013.gz    #Newer
dater.sh                       #Does not have the .gz extension | Not deleted 
```

重击版本

```
matthew@play:~/test$ bash --version
GNU bash, version 4.2.37(1)-release (x86_64-pc-linux-gnu)
Copyright (C) 2011 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>

This is free software; you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T11:02:27.550

尝试以下脚本：

```
#!/bin/bash

# get the date 7 days ago
sevenDaysAgo=$(date -d "-7 day 00:00:00" +%s)

# create an array to hold the files older than 7 days
result=()

# loop over the files
while IFS= read -d $'\0' -r file
do
    # extract the date from each filename using a regex
    if [[ $file =~ ^.*-([0-9]+)_([0-9]+)_([0-9]+).gz$ ]]
    then
        m="${BASH_REMATCH[1]}"
        d="${BASH_REMATCH[2]}"
        y="${BASH_REMATCH[3]}"
        fileDateTime="$(date -d ${y}${m}${d} +%s)"

        # check if the date is older than 7 days ago
        if (( fileDateTime < sevenDaysAgo ))
        then
            result+=( "$file" )
        fi
    fi
done < <(find . -type f -name "*.gz" -print0)

# print out the results for testing
for f in "${result[@]}"
do
    echo "$f"
done 
```

# ruby-on-rails - 无需小程序即可从浏览器读取智能卡的本机方式

> ID：15922821
> 
> 赞同：2
> 
> 时间：2013-04-10T10:05:45.367
> 
> 标签：ruby-on-rails, browser, smartcard

我正在开发一个 Rails 应用程序，在某些时候，用户将需要使用智能卡来对应用程序进行身份验证。我知道如何使用 Java 小程序来实现这一点，但我想知道是否存在使用浏览器执行此操作并避免使用小程序的本地方式。有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:04:52.683

使用浏览器与客户端设备（如智能卡）交互的唯一选择是使用单独的容器，例如 Java 小程序、Flash、Silverlight 或本机浏览器扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:28:27.543

如果您使用 SSL 客户端证书身份验证（无论如何，这是考虑使用智能卡进行 webapp 身份验证时的最佳选择），您可以依赖浏览器中的内置支持，因为您在客户端上为您的卡提供了适当的驱动程序机器。

# java - 在 Apache Camel 日志中记录简单文本

> ID：15922822
> 
> 赞同：5
> 
> 时间：2013-04-10T10:05:45.597
> 
> 标签：java, apache-camel

是否可以在 Camel 中记录简单文本，如下所示

```
 <route>
     <from uri="direct:cxlrefdata"/>
     <to uri="log:'Hello World'" />
   </route> 
```

我想在日志中记录这条消息“Hello World”，但我在 Apache Camel 站点中找到的所有示例都是用于记录路由消息。

例如

```
<route>
  <from uri="direct:t1"/>
  <to uri="log:output?showAll=true" />
</route> 
```

我想要一些可以记录测试消息的简单东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T11:50:34.577

是的，请参阅日志 eip [http://camel.apache.org/logeip.html](http://camel.apache.org/logeip.html)

这允许您将人类可读的消息记录到日志中。您可以通过日志组件页面上的绿色提示框发现它：http: [//camel.apache.org/log](http://camel.apache.org/log)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-29T01:51:44.067

> **TL;博士**
> 
> *   不要忘记`camel.springboot.main-run-controller=true`在`application.properties`
>     
>     
> *   from("timer://scheduler?fixedRate=true&period=5s") .log("Hello World!");

让我为您提供用 Java DSL 编写的最简单的示例。我将使用 Spring Boot Camel 启动器来设置最简单的可运行代码。此示例将帮助您`Hello World!`根据`quartz2`组件`cron`表达式每 5 秒将消息记录到控制台。

> 要查看的文档：
> 
> *   Spring Boot 和 Apache Camel - [https://camel.apache.org/spring-boot](https://camel.apache.org/spring-boot)
> *   Camel 的 Quartz2 组件 - [http://camel.apache.org/quartz2.html](http://camel.apache.org/quartz2.html)

这是您最简单的 Spring Boot 演示应用程序：

```
 package com.lordnighton.camel.demo;

 import org.springframework.boot.SpringApplication;
 import org.springframework.boot.autoconfigure.SpringBootApplication;

 @SpringBootApplication
 public class DemoApplication {

    public static void main(String[] args) {
        SpringApplication.run(DemoApplication.class, args);
    }

 } 
```

`HelloWorld!`这是每 5 秒将消息记录到控制台的最简单路线：

```
 package com.lordnighton.camel.demo.routes;

 import org.apache.camel.builder.RouteBuilder;
 import org.springframework.stereotype.Component;

 @Component
 public class LogMessageRoute extends RouteBuilder {

     @Override
     public void configure() throws Exception {
         from("quartz2://logMessageGroup/logMessageTimer?cron=0/5+*+*+*+*+?")
           .log("Hello World!");
     }

} 
```

# c# - 如何调整文件大小，“修剪”它的开头？

> ID：15922823
> 
> 赞同：2
> 
> 时间：2013-04-10T10:05:45.783
> 
> 标签：c#, file, filesystems, queue

我正在使用 C# 实现基于文件的序列化对象队列。

*   `Push()`将对象序列化为二进制并将其附加到文件的末尾。
*   `Pop()`应该从文件的开头反序列化一个对象（这部分我开始工作）。然后，应该从文件中删除反序列化的部分，使下一个对象成为“第一个”。

从文件系统的角度来看，这只是意味着将文件头复制到磁盘上几个字节，然后移动“文件开头”指针。问题是如何在 C# 中实现这一点？有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:13:34.477

最容易看到的

1）流出（如日志，将其转储到文件中），
（注意：您需要一些分隔符和“文件”的“一致格式” - 根据您的数据是什么）

2）和稍后流入（只需从头开始读取文件，一口气，并处理不删除任何内容）

这很好用，FIFO（先进先出）。

> 所以，我的建议 - 不要试图通过删除、跳过等来优化它（而是重新组合并使用更多文件。

3）如果您担心事情的规模 - 那么只需将其“分区”为足够小的文件，例如每个 100 或 1,000 个`records`（取决于，做一些计算）。

您可能需要在这里制作某种“虚拟器”，它映射文件，跟踪您的“数据库”，如果它位于多个文件上。最简单的是只使用文件系统并检查文件时间等。或者添加一些基本代码来改进它。

> 但是，我认为如果您必须确保“**事务**”，您可能会遇到问题 - 即如果事情失败了怎么办，所以您需要跟踪文件停止的位置，回溯等。

这可能是一个问题，但你最清楚是否真的有必要拥有它（多么重要）。您始终可以“按文件”和按较小的文件工作。如果失败，回滚并再次执行该文件（或记录问题）。如果成功，您可以删除文件（成功后）并继续这样做。

这是非常“手工制作”的方法，但应该让您采用简单且不太苛刻的解决方案（就像您所描述的那样）。或类似的规定。

**我可能应该补充**...

您还可以为您节省一些麻烦，并为此使用一些便携式数据库或类似的东西。这纯粹是基于手动编码一个最简单的解决方案的想法（我们可能会想出更聪明的东西，但迟到这就是我所拥有的:)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T00:20:06.413

Files don't work that way. You can trim off the end, but not the beginning. In order to mutate a file to remove content at the beginning you need to re-write the entire file.

I expect you'll want to find some other way to solve your problem. But a linear file is totally inappropriate for representing a FIFO queue.

# wordpress - WordPress | 修改重写规则

> ID：15922825
> 
> 赞同：0
> 
> 时间：2013-04-10T10:05:48.743
> 
> 标签：wordpress, url-rewriting

我已经开始维护一个网站，它是由另一个人构建的，我喜欢修改应用于自定义帖子类型的重写规则。

更具体地说，自定义帖子类型使用以下设置构建：

```
$args = array(
    ...
    'rewrite'               =>  array(
        'slug'              =>  'myposttype',
        'with_front'        =>  false
    ),
    ....
)

register_post_type('myposttype', $args); 
```

永久链接结构如下：

```
Post name   http://www.mysite.gr/sample-post/ 
```

但url结构如下：

```
http://www.mysite.gr/myposttype/my_post_slug/ 
```

我怎么能把它改成

```
http://www.mysite.gr/my_post_slug/ 
```

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:17:34.187

注意：这不是一个好主意，因为它可能与具有相同 slug 的页面冲突。

这是有关如何从 url 中删除帖子类型名称的[教程。](http://www.ultimatewebtips.com/remove-slug-from-custom-post-type/)

# c# - 检查 DataRow 数组中是否存在值

> ID：15922826
> 
> 赞同：0
> 
> 时间：2013-04-10T10:05:51.383
> 
> 标签：c#, asp.net

在我的应用程序中，我正在使用过滤器表达式过滤数据表并获得与条件匹配的 DataRow。现在我想检查特定列的值是否存在于 DataRow 数组的任何行中。

**代码**：

```
string FilterCond1 = "id=" + getId;
DataRow[] myrow = DataTable.Select(FilterCond1);
if (myrow.Length > 0)
{
//check for size=28 in DataRow[]
}
else
{
} 
```

我在数据表中有列**大小**，`DataTable`我想检查 DataRow 数组的任何行在列中是否有值**28。**我该`size`怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T10:46:19.517

尝试这个

```
string FilterCond1 = "id=" + getId;
DataRow[] myrow = DataTable.Select(FilterCond1);
if (myrow.Length > 0)
{
  for(int i = 0; i < myrow.Length; i ++)
  {
    if(myrow[i]["size"].ToString() == "28")
    {
      // YOUR CODE HERE 
    }
  }
}
else
{
} 
```

**编辑**

只需将条件添加到您的过滤器。

```
string FilterCond1 = "id=" + getId + " AND size=28"; 
```

然后你不需要`if(myrow[i]["size"].ToString() == "28")`你知道数组中的行是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:07:15.040

您可以使用列集合来访问行中的特定列值。

```
if(myrow[rowIndex]["ColoumnName"].ToString() == "somevalue") 
```

*行索引可以从零到长度为 1*

**根据评论**编辑，可以在select中的列上放置多个条件，在**[**这里**](https://stackoverflow.com/questions/1990946/datatable-select-with-multiple-conditions)检查，可能不需要迭代。**

 **```
string FilterCond1 = "id=" + getId + " AND size = " + 28;
DataRow[] myrow = dt.Select(FilterCond1); 
```

遍历行集合

```
for(int i=0; i < myrow.Length; i++)
{
   if(myrow[i]["size"].ToString() == "28")
   {
        //your code
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:10:44.420

首先，您应该使用 foreach 遍历所有行，然后使用以下代码..

```
if(myrow[row]["size"] == 28) 
```

## 或者

```
int ColIndex = 3; // replace 3 with ur co. index 
if(myrow[row][ColIndex] == 28) 
```**

# web-services - Prestashop 的登录 API

> ID：15922827
> 
> 赞同：6
> 
> 时间：2013-04-10T10:05:52.617
> 
> 标签：web-services, prestashop

我正在开发一个使用 prestashop API 的 iOS 项目。请让我知道是否有任何用于登录的API？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-21T08:29:20.743

您可以使用 PrestaShop 网络服务并使用电子邮件和密码进行过滤，如下所示：

```
http://localhost/api/customers/?filter[email]=pub@prestashop.com&filter[passwd]=19160794b7c0b413e80f58298a8d8200 
```

您不应该将商店的 COOKIE_KEY 存储在您的应用程序中，您应该制作一个 PHP 页面来为您提供哈希密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-23T09:41:59.570

主要使用 REST API 来获取登录和 OTP 详细信息。其余方法可以使用 SOAP API。因为 prestashop 没有用于构建移动应用程序的 api。Apphitect 已经为 Prestashop iOS 应用程序构建了 API。[点击这里](http://www.apphitect.ae/mobile-commerce-app.php)

# c# - C# 位运算符

> ID：15922828
> 
> 赞同：1
> 
> 时间：2013-04-10T10:05:52.727
> 
> 标签：c#, bit-manipulation

有人可以解释以下代码的作用。

```
private int ReadInt32(byte[] _il, ref int position)
{
    return (((il[position++] | (il[position++] << 8)) | (il[position++] << 0x10)) | (il[position++] << 0x18));
} 
```

我不确定我是否理解这种方法中的按位运算符是如何工作的，有人可以帮我分解一下吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T10:08:30.357

整数以字节数组的形式给出。然后每个字节左移 0/8/16/24 位，并将这些值相加得到整数值。

这是`Int32`十六进制格式：

```
0x10203040 
```

它表示为以下字节数组（小端架构，因此字节顺序相反）：

```
[0x40, 0x30, 0x20, 0x10] 
```

为了从数组中构建整数，每个元素都被移动，即执行以下逻辑：

```
a = 0x40        = 0x00000040
b = 0x30 << 8   = 0x00003000
c = 0x20 << 16  = 0x00200000
d = 0x10 << 24  = 0x10000000 
```

然后将这些值 OR'ed 在一起：

```
int result = a | b | c | d;

this gives:

0x00000040 |
0x00003000 | 
0x00200000 |
0x10000000 |
------------------
0x10203040 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T10:10:55.133

可以这样想：

```
var i1 = il[position];
var i2 = il[position + 1] << 8;  (<< 8 is equivalent to * 256)
var i3 = il[position + 2] << 16; 
var i4 = il[position + 3] << 24;

position = position + 4;

return i1 | i2 | i3 | i4; 
```

# c - 如何分配动态静态多维数组

> ID：15922836
> 
> 赞同：0
> 
> 时间：2013-04-10T10:06:11.603
> 
> 标签：c, memory-management

如何为以下多维数组分配内存？

```
char* array[NMAX]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:26:53.063

```
#define NMAX 50
char* array[NMAX]; 
```

是一个由 50 个字符指针组成的数组。

您必须遍历所有这些并为每个分配内存。

```
for( int i = 0 ; i < NMAX ; i++ )
{
    array[ i ] = malloc( sizeof( char ) * 80 ) ;
} 
```

# c# - SslStream 集密码套件

> ID：15922837
> 
> 赞同：4
> 
> 时间：2013-04-10T10:06:12.020
> 
> 标签：c#, ssl

我正在尝试通过 C# .Net 应用程序中的 SslStream 连接到服务器。

当我尝试向服务器进行身份验证时，我在客户端收到一条错误消息，提示*Received an unexpected EOF or 0 bytes from the transport stream。*

在服务器端出现的错误是：*引起：javax.net.ssl.SSLHandshakeException：没有共同的密码套件。*

在 Java 中，以下代码用于设置密码：

```
SSLSocket sslSocket = (SSLSocket) socket;
String[] suites = sslSocket.getSupportedCipherSuites();
sslSocket.setEnabledCipherSuites(suites); 
```

有人能告诉我 C# 中的等价物是什么吗？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-12T19:02:53.453

出现此问题是因为您使用不同的密文进行呼叫，要进行成功的通信，您必须选择两端通用的密文，因为不同的密文会产生不同的密文

以下是默认提供的套装【你也可以自己做】

```
C#-
SslAlgorithms.ALL |
SslAlgorithms.RSA_3DES_168_SHA |
SslAlgorithms.RSA_AES_128_SHA |
SslAlgorithms.RSA_AES_256_SHA |
SslAlgorithms.RSA_DES_40_SHA |
SslAlgorithms.RSA_DES_56_SHA |
SslAlgorithms.RSA_RC2_40_MD5 |
SslAlgorithms.RSA_RC4_128_MD5 |
SslAlgorithms.RSA_RC4_128_SHA |
SslAlgorithms.RSA_RC4_40_MD5 |
SslAlgorithms.SECURE_CIPHERS | SslAlgorithms.NULL_COMPRESSION

Java-
"SSL_RSA_WITH_RC4_128_MD5",
"SSL_RSA_WITH_RC4_128_SHA",
"TLS_RSA_WITH_AES_128_CBC_SHA",
"TLS_DHE_RSA_WITH_AES_128_CBC_SHA",
"TLS_DHE_DSS_WITH_AES_128_CBC_SHA",
"SSL_RSA_WITH_3DES_EDE_CBC_SHA",
"SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA",
"SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA",
"SSL_RSA_WITH_DES_CBC_SHA",
"SSL_DHE_RSA_WITH_DES_CBC_SHA",
"SSL_DHE_DSS_WITH_DES_CBC_SHA",
"SSL_RSA_EXPORT_WITH_RC4_40_MD5",
"SSL_RSA_EXPORT_WITH_DES40_CBC_SHA",
"SSL_DHE_RSA_EXPORT_WITH_DES40_CBC_SHA",
"SSL_DHE_DSS_EXPORT_WITH_DES40_CBC_SHA",
"SSL_RSA_WITH_NULL_MD5",
"SSL_RSA_WITH_NULL_SHA",
"SSL_DH_anon_WITH_RC4_128_MD5",
"TLS_DH_anon_WITH_AES_128_CBC_SHA",
"SSL_DH_anon_WITH_3DES_EDE_CBC_SHA",
"SSL_DH_anon_WITH_DES_CBC_SHA",
"SSL_DH_anon_EXPORT_WITH_RC4_40_MD5",
"SSL_DH_anon_EXPORT_WITH_DES40_CBC_SHA" 
```

# java - Android listview适配器获取项目ID而不设置它

> ID：15922842
> 
> 赞同：1
> 
> 时间：2013-04-10T10:06:21.093
> 
> 标签：java, android

我是 Android 新手，我有适配器 -`ListView`模型来显示数组。

我设置它的值是这样的：

```
ListAdapter adapter = new SimpleAdapter(this, contactList,
                R.layout.bank_list,
                new String[] { TAG_NAME, TAG_central_office_address }, new int[] {
                        R.id.bank_name, R.id.central_office_address});

        setListAdapter(adapter);

        // selecting single ListView item
        ListView lv = getListView();

        lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, android.view.View view,
                    int position, long id) {
                Intent in = new Intent(getApplicationContext(), BankExchangersListActivity.class);
                in.putExtra("Bank_id", TAG_ID);
                startActivity(in);
            }

        }); 
```

我从 JSON 中获取值：

```
url = "http://192.168.1.4:3000/banks.json";
        // Hashmap for ListView
        ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

        // Creating JSON Parser instance
        JSONParser jParser = new JSONParser();

        // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(url);

        try {
            // Getting Array of Contacts
            banks = json.getJSONArray(TAG_BANKS);

            // looping through All Contacts
            for(int i = 0; i < banks.length(); i++){
                JSONObject c = banks.getJSONObject(i);

                // Storing each json item in variable
                String id = c.getString(TAG_ID);
                String name = c.getString(TAG_NAME);
                String central_office_address = c.getString(TAG_central_office_address);
                // Phone number is agin JSON Object

                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();

                // adding each child node to HashMap key => value
                map.put(TAG_ID, id);
                map.put(TAG_NAME, name);
                map.put(TAG_central_office_address, name);

                // adding HashList to ArrayList
                contactList.add(map);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        } 
```

正如您在 JSON 中看到的那样，我有 ID 字段，但我没有将其设置为`ListView`. 对于下一个查询，我单击`ListView`元素并转到其他活动，但我需要获取`TAG_ID`此元素。也许我做错了什么？如何获取`TAG_ID`我单击的元素而不显示它`ListView`？

只需发送点击项目的 tag_id！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:12:57.670

该方法的`position`参数`onItemClick`给出了选定项目在适配列表中的索引。因此，您可以在以下位置找到原始商品的 TAG_ID

```
((Map<String, String>) adapter.getItem(position)).get(TAG_ID) 
```

使适配器最终，以便您可以在侦听器中引用它：

```
final ListAdapter adapter = ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:18:12.797

希望这对您有所帮助。你可以得到`Postion`它 `ListSelectedItemId` 并通过它现在`Intent`得到它在`SecondActivity`这里得到`FirstActivity` `HashMap`它定义它`static`

`HashMap` 现在使用 foreachloop 从like中获取所有值

```
public static void printMap(Map mp) {
    Iterator it = mp.entrySet().iterator();
    while (it.hasNext()) {
        Map.Entry pairs = (Map.Entry)it.next();
        System.out.println(pairs.getKey() + " = " + pairs.getValue());            
    }
} 
```

现在有了特定的位置，`ListSelectedItemId`你可以从 currentList 中获取值

或喜欢

```
for (Map.Entry<String, Object> entry : map.entrySet()) {
    String key = entry.getKey();
    Object value = entry.getValue();
    // ...
} 
```

# ajax - ajax 中的 GET 和 POST

> ID：15922847
> 
> 赞同：0
> 
> 时间：2013-04-10T10:06:28.280
> 
> 标签：ajax, post, get

我有一个 C# Web 应用程序，它使用 ajax 方法来获取和发布数据。GET 和 POST 方法在传递数据方面有什么区别（在 contentType、data、dataType 的情况下）？

```
 $.ajax({
                          type: 'GET',
                          url: "url",
                          contentType: "application/json; charset=utf-8",
                          data: { value: "data" },
                          dataType:"json",
success: function (data) {
                      alert(data);
                  },
                  error: function (data) {
                      alert("In error");
                  }

              });
          }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:12:43.997

正常形式的方法也`GET`用于在查询字符串中向服务器发送一些**不敏感的小数据块**，而`POST`用于向服务器发送**大量安全数据**在使用ajax的情况下，**GET**是常用的，**POST**只有在你必须的时候才可行在服务器上进行数据库交互或涉及一些敏感数据，请在此处阅读更多信息 [http://www.jquery4u.com/ajax/key-differences-post/](http://www.jquery4u.com/ajax/key-differences-post/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:15:34.153

GET 将信息编码到 url 中，获取的信息越多，URL 就越长。POST 将数据存储在一个数组中并将该数组传递到下一页。您的网址保持不变。

虽然这看起来没什么大不了的，但 URL 确实有一个最大长度，如果超过它就会出现错误。此外，由于 GET 所做的修改，对特定 url 的调用可能会失败。除此之外，它们在功能上非常相似，可以在大多数情况下互换。

# java - notnoop java-apns中的ApnsService.start有什么用？我可以在没有 start() 的情况下使用 push 方法推送 msg

> ID：15922849
> 
> 赞同：0
> 
> 时间：2013-04-10T10:06:34.150
> 
> 标签：java, push, apple-push-notifications

```
 sv = APNS.newService()
            .withCert("./dev.p12", "pwd") 
            .withSandboxDestination()
            .build(); 
```

我只是使用没有 sv.start() 的 sv.push(token, payload)，看起来效果很好。那么 start() 和 stop() 有什么用呢？我应该将它们添加到我的代码中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:11:38.503

您没有请求非阻塞/排队或池化 APNS 服务，因此构建器返回的默认 Impl 是`ApnsServiceImpl`其`start()`方法不执行任何操作。

```
 public void start() {
} 
```

其他类似的 Impls`MinaAdaptor`确实有一些 init 代码`start()`。

```
public void start() {
    cf = connector.connect(new InetSocketAddress(host, port));
    cf.awaitUninterruptibly();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:12:10.753

从[javadocs](http://notnoop.github.io/java-apns/apidocs/com/notnoop/apns/ApnsService.html)：

> **void start()：**启动服务。底层实现可以准备其连接或数据结构以便能够发送消息。此方法是一个阻塞调用，即使该服务表示一个非阻塞推送服务。一旦服务返回，它就可以接受推送请求了。

在您的情况下，该服务似乎已经启动。尝试`sv.stop()`然后`sv.push()`会发生什么？（它应该失败）

或者@Deepak 的解释也可以是有效的

# c# - ASP.net/C# 中 GridView 内的动态链接

> ID：15922850
> 
> 赞同：0
> 
> 时间：2013-04-10T10:06:36.433
> 
> 标签：c#, asp.net, mailto

我正在尝试在页面上创建一个 GridView，其中列出了系统的管理员和电子邮件地址。

我想让管理员的电子邮件地址显示为`mail-to`链接。

目前我已经开始工作了，但是浏览器一直试图打开`mail-to`地址，就好像它是一个网址一样，当然会返回 404 错误。

有没有办法阻止浏览器重定向到该`mail-to`地址？

我在 GridView 的 asp 定义中使用超链接作为项目模板，如下所示：

```
<asp:TemplateField>
  <ItemTemplate>
    <asp:HyperLink ID="HyperLink2" runat="server" Text='<%# Eval("E-mail") %>' 
    NavigateUrl='<%# Eval("E-mail", "mailto:{0}") %>' Target=""></asp:HyperLink>
  </ItemTemplate>
</asp:TemplateField> 
```

正如我之前提到的，代码确实`mail-to`按预期生成了链接，但浏览器不断尝试重定向到它，我希望它不要这样做，而是留在同一页面上。

显然我在这个项目中使用 ASP.net 和 C#。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:15:07.290

试试下面的方法，可能对你有帮助...

```
NavigateUrl='<%# String.Format("mailto:{0}", Eval("E-mail"))%>' 
```

# c++ - 在 C++ 中传递数组引用

> ID：15922852
> 
> 赞同：0
> 
> 时间：2013-04-10T10:06:41.573
> 
> 标签：c++, arrays, function, reference

我是 C++ 新手，一直遇到很多语法问题。我有一段时间没能找到具体的答案。我正在尝试运行这段代码：

```
void test(char &testChar){
    char B[3] = {"BB"};
    testChar = B;
}

int main(int argc, const char * argv[])
{
    char A[3] = {"AB"};
    test(A);
    std::cout << A;

    return 0;
} 
```

我想将我的变量传递`A`给函数`test`，并让该函数将 的内容替换`A`为局部变量的内容`B`，然后将其打印出来。这应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:08:35.630

对数组的引用应该是这个

```
void test(char (&testChar)[3]){
 // code
} 
```

但是在你的测试函数`testChar = B;`表达式中是错误的。你需要[显式地复制字符串](http://www.cplusplus.com/reference/cstring/strcpy/)（第二个引用在 C++ 中不会改变，不像指针）你可能想阅读：[C++ Reference, change the refered variable](https://stackoverflow.com/questions/7713266/c-reference-change-the-refered-variable)

**编辑**：正如@ChristianSjöstedt 评论的那样。

Python 是“动态类型语言”，其中变量的类型和值可以更改，而在 C++ 中，您声明变量的类型不会更改。

```
 i = 10         # reference to int 
 i = "name"     # reference to str 
```

这在 Python 中是可能的，但在 C++（和 C）中是不可能的

C/C++ 是静态语言，意思是“静态类型语言”。例如，变量的类型不能在编译时更改和静态定义。

```
int i = 10; 
```

`i`int 可以是 char。

[动态类型语言与静态类型语言](https://stackoverflow.com/questions/125367/dynamic-type-languages-versus-static-type-languages)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:08:57.283

> “在 C++ 中传递数组引用”

假设您要将数组的引用传递给函数，并将该数组的元素设置为存储在另一个数组中的元素，您可以使用`std::copy`，因为数组不可赋值。最好使用模板函数来处理数组的大小：

```
template <size_t N>
test( char (&testChar)[N] )
{
  char B[N] = {"BB"};
  stc::copy(B, B+N, testChar);
} 
```

但我建议你使用`std::array`，它是可复制和可分配的：

```
template <size_t N>
test(std::array<char,N>& testarray; )
{
  std::array<char, N> B = {"BB"};
  teasArray = B;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:12:45.270

用于`std::array`固定大小的数组或`std::vector`动态（可变长度）数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T10:19:25.820

这是您可能正在寻找的代码

```
#include <string.h>

void test(char *testChar){
    char B[3] = {"BB"};
    strcpy(testChar, B);
}

int main(int argc, const char * argv[])
{
    char A[3] = {"AB"};
    test(A);
    std::cout << A;

    return 0;
} 
```

但是有各种各样的原因表明这样的代码是一个坏主意。如果你想做字符串操作，那么你应该从`std::string`类开始，而不是陷入可怕的混乱，即 C++ 中的数组和指针。

# uitableview - 自定义分段表视图

> ID：15922855
> 
> 赞同：0
> 
> 时间：2013-04-10T10:06:45.537
> 
> 标签：uitableview, xcode4.5

我有一个分段的 Uitableview，对于每个部分，我都有一个带有 5 个 Uibuttons 作为单选按钮的 Question(UILabel) 。我将动态获得单选按钮的数量。当我选择一个单选按钮时，我会突出显示状态，但是如果我单击该部分中的另一个单选按钮，则会突出显示两个单选按钮。

但这不是我想要显示该部分中所有单选按钮的正确方式必须取消选中，并且必须突出显示所选部分。我该怎么做

这是我点击单选按钮时的代码

```
-(IBAction) radioButtonClicked:(UIButton *) sender{

    NSMutableArray *arr1=[[NSMutableArray alloc]init];

    NSIndexPath *indexPath = [self.tableView indexPathForCell:(UITableViewCell *)
                              [[sender superview] superview]];

    NSLog(@"The section  is %d",  indexPath.section);
    UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
    NSMutableArray *cellSection = [self.finalarray objectAtIndex:indexPath.section];
    int n=[cellSection count]-3;
    int m=[cellSection count]-1;
    NSString *questionId=[[cellSection objectAtIndex:m-1]objectForKey:@"QId"];

    for (NSDictionary *dict in selectedOptionandQIdArray) {

        NSString *str=[dict valueForKey:@"QId"];
        if(str==NULL)
        {

        }
        else{

        [arr1 addObject:str];
        }

    }

    BOOL isTheObjectThere = [arr1 containsObject:questionId];

        if(isTheObjectThere==YES)
    {
         NSInteger Aindex=[arr1 indexOfObject:questionId];
        if(NSNotFound != Aindex) 
        {
            NSLog(@" found");
            [selectedOptionandQIdArray removeObjectAtIndex:Aindex];
        }

    }

     NSLog(@"%d",sender.tag);

    int tagID=[sender tag];

    int itemtoAdd=[sender tag];

    NSString *xWrapped=[NSString stringWithFormat:@"raid%d",itemtoAdd];

    NSMutableDictionary *hk=[[NSMutableDictionary alloc]init];
    [hk setObject:xWrapped forKey:@"Ans"];
    [hk setObject:questionId forKey:@"QId"];
    [hk setObject:@"" forKey:@"TestOption"];

    [selectedOptionandQIdArray addObject:hk];
    NSMutableArray *radioButtonsinaSection=[[NSMutableArray alloc]init];

    if(n==5)
    {
        UIImage *image=[UIImage imageNamed:@"radio_button_off.png"];

        NSLog(@"%d",tagID);

       UIButton  *btnTemp1 = (UIButton*)[cell viewWithTag:11];
        UIButton  *btnTemp2 = (UIButton*)[cell viewWithTag:12];
        UIButton  *btnTemp3 = (UIButton*)[cell viewWithTag:13];
        UIButton *btnTemp4=(UIButton *)[cell viewWithTag:14];
        UIButton *btnTemp5=(UIButton *)[cell viewWithTag:15];
      [radioButtonsinaSection addObject:btnTemp1];
        [radioButtonsinaSection addObject:btnTemp2];
        [radioButtonsinaSection addObject:btnTemp3];
        [radioButtonsinaSection addObject:btnTemp4];
        [radioButtonsinaSection addObject:btnTemp5];

       }

        [sender setImage:[UIImage imageNamed:@"radio-On.png"] forState:UIControlStateNormal];         

 for(int i=0;i<[radioButtonsinaSection count];i++){

    [[radioButtonsinaSection objectAtIndex:i] setImage:[UIImage imageNamed:@"radio_button_off.png"] forState:UIControlStateNormal];

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:15:31.823

试试看....

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
int buttonTag = indexPath.row + 200;
//NSLog(@"%i",buttonTag);
UIButton *tempBtn = (UIButton *)[self.view viewWithTag:buttonTag];
[tempBtn setBackgroundImage:[UIImage imageNamed:@"checkbox_check.png"]forState:UIControlStateNormal];     
}

-(void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath
{
int buttonTag = indexPath.row + 200;
NSLog(@"%i",buttonTag);
UIButton *tempBtn = (UIButton *)[self.view viewWithTag:buttonTag];
[tempBtn setBackgroundImage:[UIImage imageNamed:@"checkbox.png"]forState:UIControlStateNormal];    
} 
```

# git - git-过滤某些文件

> ID：15922860
> 
> 赞同：0
> 
> 时间：2013-04-10T10:07:03.183
> 
> 标签：git, gitignore, git-commit, git-add

我有一个常量文件，这个文件是必需的，但是每个开发人员都在不断地为他的环境更改它，并且经常推送这个更改的文件。有没有办法可以有一个过滤器，在这个常量文件中不会被添加/推送。.gitignore 没有帮助，因为我们需要 repo 中的该文件，并为重新克隆项目的人提供默认配置。我只是想让它远离开发人员提交更改要求每个开发人员不要在此提交中添加此常量文件并强制执行这是另一种肮脏的方式

问候，哈沙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:28:57.377

对于默认配置，您可以在您的存储库中放置一些名为*constants-defaults 的*文件。之后，您可以使用 .gitignore忽略*常量文件。*签出新副本的人必须将*常量默认值*复制到*常量*文件并进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:22:42.713

假设您对远程存储库具有完全访问权限（即，您可以在那里放置挂钩），您可以使用[pre-receive 挂钩](http://git-scm.com/book/ch7-3.html)轻松做到这一点，该挂钩检查推送的提交是否要修改不可变文件，如果是，则拒绝它。

如果您需要一些关于如何编写这样一个钩子的提示，请查看关于[git pre-receive hooks 的](https://stackoverflow.com/questions/2569960/git-pre-receive-hook)其他问题（基于 python 的答案）。

# c++ - 从哪里获得 matlab 库（libmat 和 libmx）

> ID：15922862
> 
> 赞同：1
> 
> 时间：2013-04-10T10:07:06.903
> 
> 标签：c++, matlab, opencv, tracking, detection

我需要测试，或许还需要使用 libFeatureDetection。但如项目主页所示，libFeatureDetection 需要 Matlab (libmat, libmx) 和 OpenCV (core, imgproc, highgui)。

那么你能告诉我在哪里可以获得这些库吗？我需要安装 Matlab 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T10:40:31.020

您不需要完整的 Matlab，只需要[MATLAB Compiler Runtime (MCR)](http://www.mathworks.com/products/compiler/mcr/)。

您可以在那里获取完整的安装程序包。不过，安装程序是基于 Java 的，您需要安装 JRE 才能从包中提取库。

因此，运行安装程序并将 MCR 安装到某个目录。完成后，您将在

```
<MCR installation dir>/matlab/v717/bin/glnx86/ 
```

PS 还有一个很好的[与 MCR 链接](http://www.mathworks.com/help/matlab/matlab_external/compiling-and-linking-mat-file-programs.html)的指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:27:30.950

正如您在 github 上的[libFeatureDetection](https://github.com/elador/FeatureDetection/tree/master/libFeatureDetection)`CMakeLists.txt`文件中看到的那样

`FIND_PACKAGE( MATLAB REQUIRED )`

意味着您需要安装matlab。

# c++ - 二进制最小堆：打印未存储的值

> ID：15922865
> 
> 赞同：1
> 
> 时间：2013-04-10T10:07:14.260
> 
> 标签：c++, heap

我有一个二进制堆实现，它是这样的：
我必须找出代码末尾显示的错误输出的原因。

我还需要`myminheap`在打印后删除对象，它会一一弹出元素！

堆.h

```
#include <cstdlib>
#include <vector>
#include <iterator>

using namespace std;

class Heap
{
  public:
    Heap() {}
    ~Heap() {}

    vector <int> heap;
    int left(int parent);
    int right(int parent);
    int parent(int child);
    int size()                  {return heap.size();}
    void print();
};

class MinHeap : public Heap
{
  private:
    void heapify_up(int index);
    void heapify_down(int index);

  public:
    MinHeap() {}
    ~MinHeap() {}

    int pop_min();
    void insert(int element);
};

class MaxHeap : public Heap
{
  private:
    void heapify_up(int index);
    void heapify_down(int index);

  public:
    MaxHeap() {}
    ~MaxHeap() {}

    int pop_max();
    void insert(int element);
}; 
```

堆.cc

```
#include <cstdlib>
#include <iostream>
#include <vector>
#include <iterator>

using namespace std;

#include "heap.h"

//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
int Heap::left(int parent)
{
    int i = (parent << 1) + 1;  //2 * parent + 1    read more on bit shifts
    return (i < heap.size()) ? i : -1;
}

int Heap::right(int parent)
{
    int i = (parent << 1) + 2;
    return (i < heap.size()) ? i : -1;
}

int Heap::parent(int child)
{
    if(child){
        int i = (child >> 1) - 1;
        return i;
    }
    else return -1;
}

void Heap::print()
{
    vector<int>::iterator i = heap.begin();
    cout << "Heap = ";
    while(i != heap.end()){
        cout << *i << " ";
        i++;
    }
    cout << endl;
}
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
int MinHeap::pop_min()
{
    int min = heap.front();
    heap[0] = heap[heap.size() - 1];
    heap.pop_back();
    heapify_down(0);
    return min;
}

void MinHeap::insert(int element)
{
    heap.push_back(element);
    heapify_up(heap.size() - 1);
}

void MinHeap::heapify_up(int index)
{
    while(index > 0 && parent(index) >= 0 && heap[parent(index)] > heap[index]){
        int temp = heap[index];
        heap[index] = heap[parent(index)];
        heap[parent(index)] = temp;
        index = parent(index);
    }
}

void MinHeap::heapify_down(int index)
{
    int child = left(index);

    if(child > 0 && right(index) > 0 && heap[child] > heap[right(index)])
        child = right(index);

    if(heap[index] > heap[child]){
        int temp = heap[child];
        heap[child] = heap[index];
        heap[index] = temp;
        heapify_down(child);
    }
}
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
int MaxHeap::pop_max()
{
    int max = heap.front();
    heap[0] = heap[heap.size() - 1];
    heap.pop_back();
    heapify_down(0);
    return max;
}

void MaxHeap::insert(int element)
{
    heap.push_back(element);
    heapify_up(heap.size() - 1);
}

void MaxHeap::heapify_up(int index)
{
    while(index > 0 && parent(index) >= 0 && heap[parent(index)] < heap[index]){
        int temp = heap[index];
        heap[index] = heap[parent(index)];
        heap[parent(index)] = temp;
        index = parent(index);
    }
}

void MaxHeap::heapify_down(int index)
{
    int child = left(index);

    if(child > 0 && right(index) > 0 && child < right(index))
        child = right(index);

    if(heap[index] < heap[child]){
        int temp = heap[child];
        heap[child] = heap[index];
        heap[child] = temp;
        heapify_down(child);
    }
}
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//              test program
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
int main(){
    // Create the heap
    MinHeap* myminheap = new MinHeap();
    myminheap->insert(700);
    myminheap->print();
    myminheap->insert(500);
    myminheap->print();
    myminheap->insert(100);
    myminheap->print();
    myminheap->insert(800);
    myminheap->print();
    myminheap->insert(200);
    myminheap->print();
    myminheap->insert(400);
    myminheap->print();
    myminheap->insert(900);
    myminheap->print();
    myminheap->insert(1000);
    myminheap->print();
    myminheap->insert(300);
    myminheap->print();
    myminheap->insert(600);
    myminheap->print();

    // Get priority element from the heap
    int heapSize = myminheap->size();
    for ( int i = 0; i < heapSize; i++ )
        cout << "Get min element = " << myminheap->pop_min() << endl;

    return 1;
} 
```

这会产生乱码输出，如下所示：

```
Heap = 700 
Heap = 700 500 
Heap = 100 500 700 
Heap = 100 500 700 800 
Heap = 100 200 700 800 500 
Heap = 100 200 700 800 500 400 
Heap = 100 200 700 800 500 400 900 
Heap = 100 200 700 800 500 400 900 1000 
Heap = 100 200 700 300 500 400 900 1000 800 
Heap = 100 200 700 300 500 400 900 1000 800 600 
Get min element = 100
Get min element = 200
Get min element = 300
Get min element = 500
Get min element = 73
Get min element = 400
Get min element = 600
Get min element = 700
Get min element = 800
Get min element = 900 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:39:01.420

两个错误；下面的代码修复了它们（并且我已将位移位更改回 mult/div - 这没什么区别。当自然表达式为 mult/div by 2 时，为什么要使用位移超出了我的范围。如果您正在考虑优化那么，好吧）。错误是什么，我把它留作练习....

```
// Num 1
int Heap::parent(int child)
{
    if(child > 0){
        int i = (child / 2);
        return i;
    }
    else return -1;
}

// Num 2
void MinHeap::heapify_down(int index)
{
    int child = left(index);

    if(child > 0 && right(index) > 0 && heap[child] > heap[right(index)])
        child = right(index);

    if(child > 0 && heap[index] > heap[child]){
        int temp = heap[child];
        heap[child] = heap[index];
        heap[index] = temp;
        heapify_down(child);
    }
} 
```

你必须删除myminheap。一个一个地弹出元素并不意味着当容器中的元素计数达到 0 时自动销毁容器。

# android - ScrollView 切断顶部并在底部留出空间

> ID：15922866
> 
> 赞同：40
> 
> 时间：2013-04-10T10:07:14.487
> 
> 标签：android, xml, scrollview

当我启动模拟器并进入使用此代码的屏幕时，它会显示大部分文本信息，但会切断屏幕顶部（无法向上滚动）但在底部留下一点空间。

这是代码；

```
 <ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:visibility="visible"
    android:fillViewport="true"
    android:id="@+id/backgroundImage" >

 <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:layout_gravity="center"
    android:padding="10dip" >

     <ImageView
        android:id="@+id/earthSymbolImageView"
        android:layout_width="25dp"
        android:layout_height="25dp"
        android:src="@drawable/earthsymbol" />

     <TextView
        android:id="@+id/earth_content1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/earth_title"
        android:gravity="center" 
        android:textColor="#FFFFFF"
        android:textSize="20sp" />

    <TextView
        android:id="@+id/earth_content2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/earth_text" 
        android:textColor="#FFFFFF" />

    <Button
        android:id="@+id/backButton"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/back" />

     </LinearLayout>
    </ScrollView> 
```

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-09-27T19:59:44.177

这是由于 LinearLayout 中的 layout_gravity 引起的。由于您的 LinearLayout 在 ScrollView 内，您可能只是试图水平居中（在 ScrollView 内垂直居中并没有这样做）。像这样指定您的 LinearLayout 水平居中应该可以解决问题：

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:layout_gravity="center_horizontal"
    android:padding="10dip" > 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-06-07T13:55:18.720

`HorizontalScrollView`我在嵌套内部遇到了同样的问题，`ScrollView.`我将`HorizontalScrollView`重力设置为`center`导致问题的原因。只需将其删除即可解决问题。

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

<HorizontalScrollView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center">

    <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content">

        <TextView
                android:layout_width="1000dp"
                android:layout_height="1000dp"
                android:gravity="center"
                android:layout_gravity="center"
                android:text="New Text"/>
    </LinearLayout>
</HorizontalScrollView> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-09-11T07:21:43.097

我发现并测试了解决此问题的最佳答案是@hadi 在此问题中给出的答案： [滚动视图没有重力。如何使滚动视图内的内容为中心](https://stackoverflow.com/questions/8985468/no-gravity-for-scrollview-how-to-make-content-inside-scrollview-as-center)

恢复答案：

*   将您的 ScrollView 放在 RelativeLayout 中。
*   在 ScrollView 中，设置以下内容：
    *   android:layout_height="wrap_content"
    *   android:layout_centerVertical="true"
*   将您的垂直 LinearLayout 放在 ScrollView 中。

代码将是：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <ScrollView
        android:id="@+id/scrollView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical">

            ...

        </LinearLayout>
    </ScrollView>
</RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-09-17T06:52:17.637

从水平滚动视图中的线性/相对布局中删除 layout_gravity，它会起作用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-17T10:04:49.950

它非常简单 - 您只需将 layout_gravity 从 LinearLayout 移动到您的父容器 ScrollView 中：

```
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:visibility="visible"
    android:fillViewport="true"
    android:id="@+id/backgroundImage" 
    android:layout_gravity="center" >

 <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="10dip" > 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-31T11:43:54.300

就我而言，问题`requestFocus`出在`EditText`.

在你的情况下，他们不是`EditText`，所以问题是其他的。对于那些有滚动视图切割顶部边缘问题的人，请尝试`requestFocus`从所有中删除所有`EditText`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-04T14:28:39.857

> 您必须在 LinearLayout 中添加 marginBottom

```
<ScrollView
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
android:visibility="visible"
android:fillViewport="true"
android:id="@+id/backgroundImage" >

 <LinearLayout
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical"
android:layout_gravity="center"
android:padding="10dip"
android:layout_marginBottom="96dp" >    

 <ImageView
    android:id="@+id/earthSymbolImageView"
    android:layout_width="25dp"
    android:layout_height="25dp"
    android:src="@drawable/earthsymbol" />

 <TextView
    android:id="@+id/earth_content1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/earth_title"
    android:gravity="center" 
    android:textColor="#FFFFFF"
    android:textSize="20sp" />

<TextView
    android:id="@+id/earth_content2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/earth_text" 
    android:textColor="#FFFFFF" />

<Button
    android:id="@+id/backButton"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/back" />

 </LinearLayout>
</ScrollView> 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2013-04-10T10:26:02.667

如果您希望 TextViews 可滚动，为什么不将 ScrollView 放在这两个元素周围？

```
 <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:layout_gravity="center"
    android:padding="10dip" >

    <ScrollView>
     <ImageView
        android:id="@+id/earthSymbolImageView"
        android:layout_width="25dp"
        android:layout_height="25dp"
        android:src="@drawable/earthsymbol" />

     <TextView
        android:id="@+id/earth_content1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/earth_title"
        android:gravity="center" 
        android:textColor="#FFFFFF"
        android:textSize="20sp" />

    <TextView
        android:id="@+id/earth_content2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/earth_text" 
        android:textColor="#FFFFFF" />

     </ScrollView>

    <Button
        android:id="@+id/backButton"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/back" />

     </LinearLayout> 
```

# javascript - ReferenceError：未定义插入记录

> ID：15922868
> 
> 赞同：0
> 
> 时间：2013-04-10T10:07:22.783
> 
> 标签：javascript, jquery, html, local-storage, referenceerror

我有这个 html 代码，它应该检索一个本地 json 文件并让它解析和字符串化到本地存储。我想测试代码，但是当我填写表单并运行它时，它说 ReferenceError: insertRecord is not defined in Firefox console。

任何帮助将不胜感激。谢谢你。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Register</title>
<link href="css/navigation.css" rel="stylesheet" type="text/css">
<link href="css/body.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
<script src="store.js" type="text/javascript"></script>
<script type="text/javascript">
var i;
var user;
var txt;

$(document).ready(function () {
    $.ajax({
    type: "GET",
    url: "studio.json",
    dataType: "json",
    success: getUser,
    error: function() {alert("retrieval error"); }
});
});

function getUser(data) {
if (localStorage) {
    if (!localStorage.getItem('user')) {
        user = JSON.parse(data.User);
        localStorage.setItem('user', user);
    }

    else {
        String item = localStorage.getItem('user');
        user = JSON.parse(item);
    }
}

else
    alert("Local Storage not supported");
}

function insertRecord() {
$.ajax({
    type: "GET",
    url: "studio.json",
    dataType: "json",
    success: insertUser,
    error: function(){ alert("retrieval error"); }
});

function insertUser() {
    txt = { firstName: document.getElementById("firstName").value,
            lastName: document.getElementById("lastName").value,
            userName: document.getElementById("userName").value,
            email: document.getElementById("email").value,
            password: document.getElementById("password").value
          };
    localStorage.setItem('user', user + JSON.stringify(txt));
}
}

</script>
</head>

<body>
<img src="images/Dance etc logo LARGE.jpg" width="263" height="150" alt="Dance Etc Logo" />
<hr />
<div data-role="header">
    <h1>Dance Etc.</h1>
</div>

<div data-role="content" >
    <h1>Register</h1>
    <form method="post" action="" id="register" name="form">
    <label>First Name: </label>
    <input type="text" id="firstName" /><br />
    <label>Last Name: </label>
    <input type="text" id="lastName" /><br />
    <label>Username: </label>
    <input type="text" id="userName" /><br />
    <label>Email: </label>
    <input type="text" id="email" /><br />
    <label>Password: </label>
    <input type="password" id="password" /><br />
    <input type="submit" value="Register" onClick="insertRecord()" />
    </form>
</div>

<div data-role="footer">
    <a href="Dance_Program">Contact Us</a>
    <a href="Register">Policy</a>
    <a href="Login">History</a>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:18:08.673

在您的代码中，您有以下行：

```
String item = localStorage.getItem('user'); 
```

这不是有效的 JavaScript，因此会抛出`SyntaxError: Unexpected identifier`，从而阻止对 JavaScript 代码的其余部分进行评估。
但是，当您尝试`insertRecord`在 HTML 中附加内联时，它会在触发时尝试运行，但无法调用未评估的代码。

您应该考虑使用[`element.addEventListener`](https://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener). 此外，缩进代码也可以帮助您进行调试。

```
var i, user, txt;

$(document).ready(function () {
    $.ajax({
        type: "GET",
        url: "studio.json",
        dataType: "json",
        success: getUser,
        error: function () {
            alert("retrieval error");
        }
    });
});

function getUser(data) {
    if (localStorage) {
        if (!localStorage.getItem('user')) {
            user = JSON.parse(data.User);
            localStorage.setItem('user', user);
        } else {
            item = localStorage.getItem('user');
            user = JSON.parse(item);
        }
    } else
        alert("Local Storage not supported");
}

function insertRecord() {
    $.ajax({
        type: "GET",
        url: "studio.json",
        dataType: "json",
        success: insertUser,
        error: function () {
            alert("retrieval error");
        }
    });

    function insertUser() {
        txt = {
            firstName: document.getElementById("firstName").value,
            lastName: document.getElementById("lastName").value,
            userName: document.getElementById("userName").value,
            email: document.getElementById("email").value,
            password: document.getElementById("password").value
        };
        localStorage.setItem('user', user + JSON.stringify(txt));
    }
} 
```

# javascript - 全选复选框不起作用

> ID：15922869
> 
> 赞同：-1
> 
> 时间：2013-04-10T10:07:33.520
> 
> 标签：javascript, jquery, checkbox

我一直在使用引导表使用剑道数据源从数据库中获取数据。因此，为了使其更具交互性，我使用了同时操作的复选框。

我想用一个复选框删除所有条目。我已阅读有关使用 jQuery 删除带有单个复选框的条目的信息。但问题是我在表中只有一个复选框，并且所有条目都是使用 kendo 数据源获取的。

如果我正在制造混乱，请参见此处-

```
<script id="template" type="text/x-kendo-template">
  <tr>
      <td> 
          <input type="checkbox" class="done" data-id="#= CID #" ></input>

      </td></tr>
</script>

<table>
<tr>
 <th style="width:10%;">
                        <input type="checkbox" />
                    </th>
</tr>
</table> 
```

现在使用剑道数据源，我只有一列复选框。

所以我正在这样做-

```
<script type="text/javascript">
        $('.done').click(function (event) {
            if (this.checked) {
                // Iterate each checkbox
                $(':checkbox').each(function () {
                    this.checked = true;
                });
            }
        });

    </script> 
```

而且还是没有结果。帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:20:37.700

```
<script type="text/javascript">
 $(document).ready(function(){   
     $('.done').click(function (event) {
        if ($(this).attr('checked')) {
            $('input:checkbox:not(".done")').each(function () {
                $(this).attr('checked', 'checked');
            });
          }
      });
});
</script> 
```

尝试这个。它可能有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:14:30.437

尝试将 jQuery 代码包装在里面`$(document).ready(function(){});`或`$(function(){});`让它看到整个 DOM：

```
$(document).ready(function() {
    $('.done').click(function (event) {
        if (this.checked) {
            // Iterate each checkbox
            $(':checkbox').each(function () {
                this.checked = true;
            });
        }
    });
}); 
```

此外，您的 HTML 被包裹在`script`标签内，将其移到外面并删除多余`'`的，并且`input`标签不需要结束`</input>`标签：

```
<tr>
    <td> 
        <input type="checkbox" class="done" data-id="#= CID #" />
    </td>
</tr> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:22:20.850

尝试这个：

```
$(function () {    
    $('.done').on('click', function(){
              // i comment this condition if you want selectall for checked or unchecked
              //if ($(this).is(':checked')){
                        $(':checkbox').prop('checked', this.checked);
              //}
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T11:02:12.260

试试这个：

脚本

```
$(document).ready(function(){   
   $('.done').click(function (event) {
      $('.chkbxq').each(function () {
        $(this).attr('checked', flag);
      });
   });
}); 
```

HTML：

```
<table>
  <tr>
    <th style="width:10%;">
       <input type="checkbox" class="chkbxq" />
    </th>
  </tr>
</table> 
```

# c - 这是选择排序还是插入排序？请给我正确的方向

> ID：15922873
> 
> 赞同：0
> 
> 时间：2013-04-10T10:07:46.183
> 
> 标签：c, sorting, insertion-sort, selection-sort

```
void main()
{
  char name[5][10],temp[10];
  int i,j;
  for(i=0;i<5;i++)
{
 printf("\nEnter the name of student:");
 scanf("%s",name[i]);
}
for(i=0;i<(5-1);i++)
{
  for(j=i+1;j<5;j++)
  {
    if(strcmp(name[i],name[j])>0)
  {
    strcpy(temp,name[i]);
    strcpy(name[i],name[j]);
    strcpy(name[j],temp);
   }
  }
}
printf("\n the name of student is:");
for(i=0;i<5;i++)
{
 printf("\n%s",name[i]);
}
 getch();
} 
```

我无法弄清楚插入排序和选择排序之间的区别..这段代码是遵循选择算法还是插入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:49:27.393

它是选择排序的一个特别慢的版本。

它看起来像冒泡排序，但冒泡排序会比较/交换位置`j-1`和的元素`j`，它们是连续的。您比较/交换位置`i`和的元素`j`。

在外循环的每次迭代期间，从前进到结束`i`时保持不变。因此，您最终会在 position 处获得具有最小值的元素。`j``i+1``i`

你可能做了很多不必要的动作。适当的选择排序将搜索最小值而不移动任何内容。然后它将该最小值与 position 处的值交换`i`。因此，它只会对数组中的每个元素执行一次交换。

# php - 如何通过 PHP 数组或 DocBlocks 中的 xgettext 识别可翻译字符串（无方法调用）？

> ID：15922874
> 
> 赞同：1
> 
> 时间：2013-04-10T10:07:46.557
> 
> 标签：php, gettext, poedit, xgettext

我正在使用 poEdit 和 xgettext-Parser 来解析我的 PHP 源文件并检测所有可翻译的字符串。默认情况下，`translate("foo")`如果“translate”被指定为 xgettext 的关键字，xgettext 只识别函数调用中的字符串，例如。

现在我在 PHP 数组中有一些可翻译的字符串，比如

```
array(
    'label' => 'foo',
); 
```

或 DocBlocks 之类的

```
/**
 * @FormElement(type="text", options={
 *     "label"="Foobar",
 * })
 */ 
```

如何使用 xgettext 识别这些可翻译的字符串“foo”或“Foobar”？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-24T16:49:42.273

您可以创建一个虚拟翻译方法，并在创建数组时使用它：

```
function dummy_translate ($string)
{
    return $string;
}

$array = array
(
    'label' => dummy_translate('foo')
); 
```

并提取：

```
xgettext --keyword=dummy_translate:1 
```

此外，由于您的 xgettext 关键字必须*形成有效的 C 标识符*，因此您不能在数组之前执行此操作：

```
$dummy_method = function ($string)
{
    return $string;
} 
```

只需找到一个放置虚拟方法的好地方。

没有将 DocBlocks 用于文档之外，所以对此不确定，但我想类似的方法应该可以在那里工作。

*PS 额外函数调用的性能可以忽略不计，请不要在微优化上浪费时间*。

# c - “对齐陷阱”错误消息中的项目是什么意思？

> ID：15922877
> 
> 赞同：8
> 
> 时间：2013-04-10T10:07:52.483
> 
> 标签：c, linux-kernel, arm, embedded-linux

在调试过程中，我收到以下错误消息。

> `Alignment trap: my_main (29858) PC=0x00170ad8 Instr=0xe5960008 Address=0x00f28daa FSR 0x0f3`

我环顾四周，发现了很多关于这个[~~（断开的链接）~~](http://www.rt-embedded.com/blog/archives/resolving-alignment-traps/) [实时嵌入式网站](https://web.archive.org/web/20140220080000/http://www.rt-embedded.com/blog/archives/resolving-alignment-traps/)的信息。所以现在我知道`PC`and`Instr`指的是什么，但我仍然没有找到关于`Address`and`FSR`部分的任何信息。

是什么`FSR`？`Address`指的是什么地址？根据`proc/xxxx/maps`那个地址甚至超出了我的程序范围。有谁知道最后两项是什么意思？我需要这些信息来解决这个对齐问题。

地图输出

```
00008000-001fe000 r-xp 00000000 03:02 16204      /home/myuser/my_main
00205000-00248000 rw-p 001f5000 03:02 16204      /home/myuser/my_main
00248000-00299000 rwxp 00248000 00:00 0
40000000-40018000 r-xp 00000000 03:01 2095       /lib/ld-2.3.3.so
40018000-4001b000 rw-p 40018000 00:00 0
4001f000-40020000 r--p 00017000 03:01 2095       /lib/ld-2.3.3.so
40020000-40021000 rw-p 00018000 03:01 2095       /lib/ld-2.3.3.so
40021000-40023000 r-xp 00000000 03:01 15724      /usr/lib/libem7.so.1.0.1
40023000-40029000 ---p 00002000 03:01 15724      /usr/lib/libem7.so.1.0.1
40029000-4002b000 rw-p 00000000 03:01 15724      /usr/lib/libem7.so.1.0.1
4002b000-40031000 r-xp 00000000 03:01 2057       /lib/tls/librt-2.3.3.so
40031000-40033000 ---p 00006000 03:01 2057       /lib/tls/librt-2.3.3.so
40033000-40038000 rw-p 00000000 03:01 2057       /lib/tls/librt-2.3.3.so
40038000-40039000 r--p 00005000 03:01 2057       /lib/tls/librt-2.3.3.so
40039000-4003a000 rw-p 00006000 03:01 2057       /lib/tls/librt-2.3.3.so
4003a000-4004a000 r-xp 00000000 03:01 2060       /lib/tls/libpthread-2.3.3.so
4004a000-40051000 rw-p 00008000 03:01 2060       /lib/tls/libpthread-2.3.3.so
40051000-40052000 r--p 0000f000 03:01 2060       /lib/tls/libpthread-2.3.3.so
40052000-40053000 rw-p 00010000 03:01 2060       /lib/tls/libpthread-2.3.3.so
40053000-40055000 rw-p 40053000 00:00 0
40055000-4010e000 r-xp 00000000 03:01 15703      /usr/lib/libstdc++.so.6.0.3
4010e000-40115000 ---p 000b9000 03:01 15703      /usr/lib/libstdc++.so.6.0.3
40115000-40119000 rw-p 000b8000 03:01 15703      /usr/lib/libstdc++.so.6.0.3
40119000-4011f000 rw-p 40119000 00:00 0
4011f000-401b7000 r-xp 00000000 03:01 2076       /lib/tls/libm-2.3.3.so
401b7000-401be000 rw-p 00090000 03:01 2076       /lib/tls/libm-2.3.3.so
401be000-401bf000 r--p 00097000 03:01 2076       /lib/tls/libm-2.3.3.so
401bf000-401c0000 rw-p 00098000 03:01 2076       /lib/tls/libm-2.3.3.so
401c0000-401c8000 r-xp 00000000 03:01 2005       /lib/libgcc_s.so.1
401c8000-401c9000 rw-p 00008000 03:01 2005       /lib/libgcc_s.so.1
401c9000-402cb000 r-xp 00000000 03:01 2078       /lib/tls/libc-2.3.3.so
402cb000-402d1000 ---p 00102000 03:01 2078       /lib/tls/libc-2.3.3.so
402d1000-402d2000 rw-p 00100000 03:01 2078       /lib/tls/libc-2.3.3.so
402d2000-402d4000 r--p 00101000 03:01 2078       /lib/tls/libc-2.3.3.so
402d4000-402d6000 rw-p 00103000 03:01 2078       /lib/tls/libc-2.3.3.so
402d6000-402d8000 rw-p 402d6000 00:00 0
402d8000-402e5000 rw-s 00000000 00:07 0          /SYSV12345678 (deleted)
402e5000-402e6000 ---p 402e5000 00:00 0
402e6000-402f5000 rwxp 402e6000 00:00 0
403c1000-4049d000 rw-p 403c1000 00:00 0
7efeb000-7f000000 rwxp 7efeb000 00:00 0 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-10T10:47:16.227

```
PC=0x00170ad8 
```

This is telling you the current value of the *program counter*, it can be used to determine *which* instruction in your program is causing the trap. If you’re on ARM as I think you are, this is actually the current instruction plus 8, so the instruction causing the trap is located at `0x00170ad0`.

```
Instr=0xe5960008 
```

This is the encoding of the faulting instruction. If this is on ARM, that instruction is `ldr r0, [r6, #8]`

```
Address=0x00f28daa 
```

This is telling you the address from which your program attempted to load, causing the fault. Assuming everything else so far is correct, this is `r6 + 8`, so `r6` held `0x00f28da2` at the time of the fault.

```
FSR 0xf3 
```

This is the value held in the *fault status register*. It tells you what fault occurred. This particular value is an older encoding (pre-ARMv7) for an Alignment fault.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:11:05.887

很可能您的 CPU 不支持对未对齐地址的值的内存进行读/写。如果您正在访问一个 4 字节变量，那么显然 Address=0x00f28daa 不是 4 的倍数。在任意对齐的地址上只能读取/写入单个字节。

那篇文章解释得很好。

# c - 指向嵌套结构的指针

> ID：15922878
> 
> 赞同：3
> 
> 时间：2013-04-10T10:07:55.367
> 
> 标签：c, pointers, gcc, struct

这是我的代码...

```
#include <stdio.h>

struct one
{
    struct two
    {
            int r;
    }*b;
}*a;

void main()
{
    //struct two *new = &(*a).b;
    //new->r = 10;
    //printf("Value: %d", new->r);
    a = malloc(sizeof(struct one));
    //b = malloc(sizeof(struct two));
    (a->b)->r = 10;
    printf("Value: %d", (a->b)->r);
    return 0;

} 
```

我在这里尝试的是，将结构定义为结构。现在两个对象都应该是指针。我想设置的值`r`然后显示它。

`Segmentation Fault` 我得到它的唯一一件事就是我得到`gdb`了关注，这似乎没有多大帮助..

```
(gdb) run
Starting program: /home/sujal.p/structtest/main

Program received signal SIGSEGV, Segmentation fault.
0x08048435 in main () 
```

我想知道如何执行上述操作以及为什么这件事会出现分段错误。我已经尝试了一些网站上可用的可能方法，包括 Stackoverflow 的一些问题。

注释行是我试图实现目标但失败并出现相同错误的失败。

编辑在尝试了下面提到的技术之后..

```
void main()
{
    //struct two *new = &(*a).b;
    //new->r = 10;
    //printf("Value: %d", new->r);

    //a = malloc(sizeof(struct one));
    //a my_a = malloc(sizeof*my_a);
    //my_a->b = malloc(sizeof *my_a->b);
    //my_a->b->r = 10;
    //b = malloc(sizeof(struct two));
    //(a->b)->r = 10;
    //printf("Value: %d", my_a->b->r);

    a = (one*)malloc(sizeof(struct one));
    a->b = (one::two*)malloc(sizeof(struct one::two));
    (a->b)->r = 10;
    printf("Value: %d", (a->b)->r);
    return 0;

} 
```

我已经尝试了所有提到的技术，但它们给了我错误。我得到的最后一个错误如下。

```
new.c: In function âmainâ:
new.c:24:7: error: âoneâ undeclared (first use in this function)
new.c:24:7: note: each undeclared identifier is reported only once for each function it     appears in
new.c:24:11: error: expected expression before â)â token
new.c:25:13: error: expected â)â before â:â token
new.c:25:20: error: expected â;â before âmallocâ
new.c:28:2: warning: âreturnâ with a value, in function returning void [enabled by default] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T10:10:44.760

您正在取消引用未初始化的指针。

您需要首先分配一个实例`struct one`：

```
a = malloc(sizeof *a); 
```

然后你可以初始化成员`b`：

```
a->b = malloc(sizeof *a->b); 
```

然后您可以访问`r`：

```
a->b->r = 10; 
```

[这是一个可行的解决方案，通过使用我的答案调整您的代码](http://ideone.com/bsSae7)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:09:42.050

你得到一个 SIGSEGV 因为第二个取消引用的指针

```
(a->b)->r 
```

未初始化/未定义

要解决您需要执行以下操作的问题

```
struct two
{
        int r;
}

struct one
{
 two *b;
};

one *a;

...

a = malloc(sizeof(struct one));
a->b = malloc(sizeof(struct two));

a->b->r = 10;
printf("Value: %d", a->b->r);
return 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:28:04.317

添加到@Quonux 答案中，我还要定义类型：

```
typedef struct
{
    int r;
} t_two;

typedef struct
{
    t_two *p_b;
} t_one;

void main()
{
    t_one *p_a;

    p_a = malloc(sizeof(t_one);
    p_a->p_b = malloc(sizeof(t_two));

    p-a->p_b->r = 10;

    printf("Value: %d", p_a->p_b->r);
    return 0;

} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-10T10:15:14.357

```
a = malloc(sizeof(*a));
a->b = malloc(sizeof(*a->b));
a->b->r = 10;
printf("Value: %d", a->b->r);
free(a->b);
free(a);
return 0; 
```

# git - git维护同一个项目的2个版本，每个版本都有不同的用户

> ID：15922879
> 
> 赞同：5
> 
> 时间：2013-04-10T10:07:58.730
> 
> 标签：git, github

我在 github 中有一个（私人）项目，其中一组开发人员提交更改。客户现在要求在他们自己的系统副本上开发一些重度定制。一个新团队将致力于这个项目，但我不希望这个团队有权访问原始存储库。所以我在 github 上创建了一个新的存储库，并使用原始项目中的代码对其进行了初始化。

但是，我仍然希望第二个项目在原始项目上完成更新。如何设置存储库以满足此需求？

或者，如果我要保留一个项目，有没有办法让新团队只访问它的特定分支？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T10:50:30.037

我已遵循[此站点](http://eatmyrandom.blogspot.gr/2009/07/how-to-merge-two-independent-git.html)上的建议。我在这里为任何感兴趣的人重复这个过程：假设原始项目在**projectA**中签出，派生项目在**projectB**中签出：

我第一次这样做：

```
 cd path/to/projectB
 git remote add orig_project path/to/projectA 
 git fetch orig_project
 git merge orig_project/master -X theirs
 git push 
```

现在每次我需要将 projectA 的更改同步到 projectB 时，我都会这样做：

```
git fetch orig_project
git merge orig_project/master
git push 
```

`orig_project`可以是任何东西。我`-X theirs`第一次使用，否则所有获取的更改都会发生冲突

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:33:09.863

从存储库中取出其他数据。创建一个只包含您希望他们能够看到的文件和分支的新存储库，然后从旧存储库中删除它们。然后[授予他们对新存储库的只读访问权限。](https://stackoverflow.com/questions/2868432/github-readonly-access-to-a-private-repo)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:20:10.217

您正在寻找的东西称为分支（我看到您正在使用它）。

[https://help.github.com/articles/branching-out](https://help.github.com/articles/branching-out) [http://learn.github.com/p/branching.html](http://learn.github.com/p/branching.html)

一旦有了不需要新代码库的分支，就可以使用 fork（告诉他们为您的项目），这样他们就可以获得更新

在此处阅读 mroe： [“下游”和“上游”的定义](https://stackoverflow.com/questions/2739376/definition-of-downstream-and-upstream)

# c# - 不移动矩形

> ID：15922880
> 
> 赞同：0
> 
> 时间：2013-04-10T10:08:02.407
> 
> 标签：c#, windows-runtime

我在表格上有一个按钮。通过按下按钮，矩形必须移动。但是什么都没有发生，为什么？对我来说，按钮是异步的很重要，因为我想在未来调用异步方法。

XAML：

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <Button Content="Start" HorizontalAlignment="Left" Margin="849,152,0,0" VerticalAlignment="Top" Height="45" Width="196" Click="Button_Click_1"/>
    <Rectangle x:Name="rect" Fill="#FFF4F4F5" HorizontalAlignment="Left" Height="100" Stroke="Black" VerticalAlignment="Top" Width="100"/>

</Grid> 
```

C＃：

```
private double step = 5;

private async void Button_Click_1(object sender, RoutedEventArgs e)
    {
        while (true)
        {
            MoveRect();
            Sleep(100);
        }
    }

private void MoveRect()
    {
        rect.Margin = new Thickness(rect.Margin.Left + step, rect.Margin.Top + step, rect.Margin.Right - step, rect.Margin.Bottom - step);
    }

static void Sleep(int ms)
    {
        new System.Threading.ManualResetEvent(false).WaitOne(ms);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:35:13.773

如果您正在开发 Windows Store App，那么您的按钮单击事件将是这样的。

```
using Windows.UI.Core;

private async void Button_Click_1(object sender, RoutedEventArgs e)
{
    while (true)
    {
        await Dispatcher.RunAsync(CoreDispatcherPriority.Normal, () => MoveRect());
        Sleep(100);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:38:55.210

好的，这段代码提出了很多问题。最重要的是@Xyroid 的一个：你为什么不用动画？WPF/Silverlight 已经内置了对执行此类操作的支持。

但是，考虑到您完全确定自己在做什么，并且只想让您提交的代码正常工作，我可以建议以下快速修复：

```
while (true)
{
    Dispatcher.Invoke(new Action(MoveRect));
    Sleep(100);
} 
```

它适用于我的电脑（r）。但让我知道它是否对你有帮助。

# perl - 使用 SOAP::Lite 的表达式引用

> ID：15922889
> 
> 赞同：0
> 
> 时间：2013-04-10T10:08:26.263
> 
> 标签：perl, soap, reference

我有一个以下模块非常简单的 perl 模块 TEST.pm

```
package TEST;

sub new {
    my ($class) = @_;
    my $self = {};
    bless $self, $class;
    return $self;
} 

sub test {
  my ($self, $args) = @_;         
  return "Test";
}

sub test2 {
  my ($self, $args) = @_;
  push @{$self->{CODES}}, 1 ;
  return;  
}

1; 
```

然后我将此模块与 testmoduletest.pl 一起使用

```
#!/usr/bin/perl -w
  use lib "blablabla";
  use TEST;
  my $test = TEST->new();                  
  print "ref of test = ", ref($test), "\n";
  my $t = $test->test();
  print "t is now $t and ref of test is ",ref($test),"\n";
  $t = $test->test2();
  if ($t) {
    print "t is now $t and ref of test is ",ref($test),"\n";
  } else {
    print "t is uninitialized and ref of test is ",ref($test),"\n";
      print "code = $_\n" for @{$test->{CODES}};
  } 
```

结果如预期：

```
ref of test = TEST
t is now Test and ref of test is TEST
t is uninitialized and ref of test is TEST
code = 1 
```

**但是，如果我通过 SOAP 将此模块与此服务 TESTService.cgi 一起使用**

```
 #!/usr/bin/perl -w

  use SOAP::Transport::HTTP;
  use lib "blablabla";
  use TEST;

  SOAP::Transport::HTTP::CGI   
    -> dispatch_to('TEST')     
    -> handle; 
```

并使用此客户端 testtestclient.pl

```
#!/usr/bin/perl -w
use SOAP::Lite #+trace => ['all', '-objects'],  
        +autodispatch  =>
      uri => 'http://blablabla.com/TESTService',                                             
      proxy => 'http://blablalba.com/cgi-bin/TESTService.cgi';

  my $test = TEST->new();                  
  print "ref of test = ", ref($test), "\n";
  my $t = $test->test();
  print "t is now $t and ref of test is ",ref($test),"\n";
  $t = $test->test2();
  if ($t) {
    print "t is now $t and ref of test is ",ref($test),"\n";
  } else {
    print "t is uninitialized and ref of test is ",ref($test),"\n";
      print "code = $_\n" for @{$test->{CODES}};
  } 
```

**结果是 $test 失去了参考：**

```
ref of test = TEST
t is now Test and ref of test is TEST
t is uninitialized and ref of test is REF
Not a HASH reference at testtestclient.pl line 16. 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:38:22.970

为什么你从 中返回一个字符串`test`，从 没有返回，在这种情况下`test2`你不想`$self`从两者中返回吗？

基本上，您从不返回任何内容`return value`的方法中获取。`test2`

```
package TestPackage;

use strict;
use warnings;

sub new {
    my $class = shift;
    my $self = {};

    bless $self, $class;
    return $self;
}

sub a {
    my $self = shift;
    # do stuff  

    return $self;
 } 
```

查看此测试脚本的输出：

```
use TestPackage;

my $tp = TestPackage->new();

my $rv = $tp->a();
print STDERR "$rv: " . ref($rv) . "\n";
print STDERR "$tp: " . ref($tp) . "\n"; 
```

输出：

```
$ test.pl
TestPackage=HASH(0x1728998): TestPackage
TestPackage=HASH(0x1728998): TestPackage 
```

你也不应该打破封装：

```
print "code = $_\n" for @{$test->{CODES}};` 
```

相反，你应该有一些方法`get_codes`，所以你可以说`$test->get_codes();`

# c# - 无法在 ASP.NET Web 窗体站点中使用 log4net 将日志写入文件

> ID：15922901
> 
> 赞同：1
> 
> 时间：2013-04-10T10:08:49.037
> 
> 标签：c#, asp.net, log4net

我在使用 log4net dll 记录到文本文件时遇到问题。

我在 windows server 2008 r2 标准 (64) 上使用 vs 2012 express。我有以下步骤：

1.  打开一个新的 asp.net 网页表单
2.  通过 nuget 管理器安装 log4net。
3.  在 global.asax 文件中，我在 Application_Start 中有这个：

    ```
    log4net.Config.XmlConfigurator.Configure (); 
    ```

4.  在网络配置中，我已将这一行添加到 configSections 节点：

    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net"/>

5.  在网络配置中，我添加了此部分：

    ```
    <log4net debug="true">
     <appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
     <file value="c:\webSite\extraDownloadServerResources\Logs\ALU\log.txt" />
    <appendToFile value="true" />
    <rollingStyle value="Composite"/>
    <datePattern value="yyyyMMdd" />
    <maxSizeRollBackups value="5" />
    <maximumFileSize value="5MB" />
    <staticLogFileName value="true" />
    <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%n%-5p %d %5rms %-22.22c{1} %-18.18M %n - %m%n" />
    </layout>
    </appender>
    <root>
     <level value="DEBUG" />
      <appender-ref ref="RollingLogFileAppender" />
    </root>
    </log4net> 
    ```

6.  在启动页面中，我获取了记录器的实例：

    ```
    private static readonly ILog log = LogManager.GetLogger ( System.Reflection.MethodBase.GetCurrentMethod ().DeclaringType ); 
    ```

7.  在`Page_Load`我写了这一行：

    log.Debug（“测试”）；

8.  我已将具有读/写权限的 Dedualt 应用程序池用户添加到 log.txt 文件安全性。

我的日志文件中没有任何内容。为了测试我所做的步骤，我创建了一个新的空网站并一一执行这些步骤。唉（我喜欢这个词）这次日志已经写入文件了。

任何人都可以指出一个可能的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:57:57.277

要调试 log4net 配置问题，您应该[启用 log4net 内部调试](http://logging.apache.org/log4net/release/faq.html#internalDebug)。

里面`appSettings`添加`log4net.Internal.Debug`键如下：

```
<appSettings>
    <add key="log4net.Internal.Debug" value="true"/>
</appSettings> 
```

这将使 log4net 能够将所有消息输出到控制台和[Trace](http://msdn.microsoft.com/en-us/library/system.diagnostics.trace.aspx)。要将所有诊断消息转发到文件，您可以添加跟踪侦听器：

```
<system.diagnostics>
    <trace autoflush="true">
        <listeners>
            <add      name="textWriterTraceListener" 
                type="System.Diagnostics.TextWriterTraceListener" 
                initializeData="C:\tmp\log4net.txt" />
        </listeners>
    </trace>
</system.diagnostics> 
```

这些片段直接取自[log4net 常见问题解答](http://logging.apache.org/log4net/release/faq.html)，此处仅供快速参考。

这至少会让您了解正在发生的事情，因为您会收到错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T08:53:03.127

我设法解决了我的问题。

我已经下载了一个[工具](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)来监控所有国际空间站的交通。在监控流量时，我看到用户名既不是 defaultAppPool 也不是 AppPoolName。它是**ASP.NET v4.0**。在我授予权限并重新启动所有内容后，我终于在文件中看到了一些日志......

# java - Spring form:select - multiple 默认不选择第一个选项

> ID：15922902
> 
> 赞同：0
> 
> 时间：2013-04-10T10:08:50.987
> 
> 标签：java, spring, jsp

我一直在开发一个使用 Spring 表单标签库（[http://www.springframework.org/tags/form](http://www.springframework.org/tags/form)）的 Spring 项目。

我正在使用一些多个选择框来指示一些选项（国家、工厂、...）
当我将整个列表传递给选择时 - 一切都很好：默认情况下选择选择列表的第一个选项。但是，当用户来自特定国家/地区时，会过滤列表并仅显示他的国家/地区。在这种情况下，默认情况下不选择第一个元素。

JSP 页面：

```
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>
<form:select path="countryValues" multiple="true" size="9" style="width:192px;" cssErrorClass="field-error">
    <form:options items="${command.countries}" itemValue="countryCode" itemLabel="correctDisplayString"/>                                       
</form:select> 
```

命令.java

```
public List<CountryMaster> getCountries() {
    return countries;
}

public void setCountries(List<CountryMaster> countries) {
    this.countries = countries;
} 
```

控制器.java

```
@RequestMapping(value = "/overview", method = RequestMethod.GET)
public String overview(HttpServletRequest request, Model model) {
    Attrs attrs = getAttrs(request);
    UserLocale.initUser(getUser(request));
    User user = UserLocale.getUser();
    List<FactoryMaster> factoryList = getFactoryList(attrs);
    List<CountryMaster> countryList = getCountryList(attrs);
    Command command = initCommand(attrs);
    model.addAttribute(command);
    if(user.hasRole(User.NORMAL)&& user.getCountryCode() != null){

        if(countries == null){
             countries=  getDaoBuilder().getDaoCountry().countryMap();               
         }

        String isoCode = countries.get(user
                .getCountryCode());
        List<CountryMaster> buffer = new ArrayList<CountryMaster>();
        for(CountryMaster i : countryList){
            if(isoCode.equalsIgnoreCase(i.getIsoCode())){
                buffer.add(i);                  
            }
        }
        System.out.println("List size: "+buffer.size());
        command.setCountries(buffer);       
    }
    else{
        command.getCountries().addAll(getCountryList(attrs));
    }

    command.getModels().addAll(getModelList(attrs));
    command.setBrands(getBrandList(attrs));
    return "/reporting/overview";
}
private List<CountryMaster> getCountryList(Attrs attrs) {
    List<CountryMaster> result = new ArrayList<CountryMaster>();
    CountryMaster ct = new CountryMaster(CountryMaster.ISO_COUNTRY_JOKER, 00);
    ct.setDescription("ALL");
    result.add(ct);
    result.addAll(attrs.countryList);
    return result;
} 
```

在 HTML 页面上，我可以在其他列表中看到第一个元素具有属性`selected="selected"`。任何人都知道为什么当我操纵我的列表时情况并非如此？或者有谁知道这个**选定**的属性分配有什么责任？（这是 javascript，java 属性，...？）

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:14:50.047

原来可以设置列表框的值：这段代码使它很容易修复：

```
public String overview(HttpServletRequest request, Model model) {
Attrs attrs = getAttrs(request);
UserLocale.initUser(getUser(request));
User user = UserLocale.getUser();
List<FactoryMaster> factoryList = getFactoryList(attrs);
List<CountryMaster> countryList = getCountryList(attrs);
Command command = initCommand(attrs);
model.addAttribute(command);
if(user.hasRole(User.NORMAL)&& user.getCountryCode() != null){

    if(countries == null){
         countries=  getDaoBuilder().getDaoCountry().countryMap();               
     }

    String isoCode = countries.get(user
            .getCountryCode());
    List<CountryMaster> buffer = new ArrayList<CountryMaster>();
    for(CountryMaster i : countryList){
        if(isoCode.equalsIgnoreCase(i.getIsoCode())){
            buffer.add(i);                  
        }
    }
    System.out.println("List size: "+buffer.size());
    command.setCountries(buffer); 

    // FIXED SELECTION OF ELEMENT
    command.setFactoryValues(new String[]{isoCode});
    // FIXED SELECTION OF ELEMENT   

}
else{
    command.getCountries().addAll(getCountryList(attrs));
}

    command.getModels().addAll(getModelList(attrs));
    command.setBrands(getBrandList(attrs));
    return "/reporting/overview";
} 
```

这样，您可以使用代码设置列表框的值，并且在打开页面时 - 该值已经存在，默认情况下将其选中。

# c# - 如何通过dll从c#获取c数组？

> ID：15922903
> 
> 赞同：1
> 
> 时间：2013-04-10T10:08:54.237
> 
> 标签：c#, c, arrays, dll

我向用 c 编写的数组输出了一些东西，然后我希望通过 dll 从 c# 调用中获取信息，但失败了。没有警告，但我可以注意到正确获取信息。测试代码如下：

@ips 存储输出信息

```
UDPDLL_API int get_by_csharp_tst(char *** ips){
    char **ip = NULL;
    int i = 0;
    *ips = (char**)malloc(sizeof(char*)*10);
    if(ips == NULL){
        perror("overflow");
    }
    ip = *ips;
    for(i =0 ; i <10 ; i++){
        *ip = (char*)malloc(16);
        memcpy(*ip,"255.255.255.255",16);
        *ip++;
    }
    return 0;
} 
```

从 c# 调用如下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;

namespace dll_call
{
    class Program
    {
        [DllImport("udpdll.dll",EntryPoint="get_by_csharp_tst")]
        public static extern int get_by_csharp_tst(byte [,] ai);
        static void Main(string[] args)
        {
            int i = 0;
            byte[,] ips = new byte[10, 16];
            Program.get_by_csharp_tst(ips);
            for (i = 0; i < 10; i++) {
                Console.WriteLine(ips);
            }
            Console.Read();
        }
    }
} 
```

再次感谢你。任何帮助将不胜感激 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:31:23.487

这是一个可怕的 API。

对于初学者，永远不要在本机端分配内存，如果你也不能在那里释放它。

但是，如果必须，请继续阅读。

将签名更改为`public static extern int get_by_csharp_tst(out IntPtr[] ai);`

像这样称呼它：

```
IntPtr[] ai; // do not allocate, you are doing it on the native side already
get_by_csharp_tst(out ai);
// as we know the size, just use it
string[] results = new string[10];
for (int i = 0; i < 10; i++)
{
  results[i] = Marshal.PtrToStringAnsi(ai[i], 16);
}
// you need to free the memory you allocated natively here, else memory leak.

foreach (var s in results)
{
  Console.WriteLine(s);
} 
```

**注意：**即使指定长度 ( `16`) 也将是便饭，因为您永远不会清除分配的内存，并且不能保证最后一个元素是`\0`.

# html - tm 符号不会像在 html 中那样显示，sm 符号可以工作

> ID：15922908
> 
> 赞同：2
> 
> 时间：2013-04-10T10:08:59.157
> 
> 标签：html, css, wordpress, symbols

我无法让 TM 符号按应有的方式显示，SM 符号工作正常。您可以看到的测试页面位于[http://codita.ro/test/](http://codita.ro/test/) 我已经删除了 reset.css 和 normalize.css 并且它不是因为重置.. 如果您可以跟踪这个页面，那么这里是我不必将符号包裹在整个站点的范围内以使其看起来更小。

代码示例：

```
 the SkinLaze&#0153; aesthetic 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:26:42.917

符号“™”在那里，只是毫无意义的小（我从页面复制粘贴到此消息中）。这是正在使用的字体设计中的一个缺陷。

如果您无法更改字体，请考虑为“™”使用不同的字体，也可能为“©”使用不同的字体（它看起来已损坏）。执行此操作的简单方法是将出现的元素包装在`span`元素中`class`并使用 CSS 设置它们的字体。一种更现代但不太跨浏览器的方式是使用`@font-face`with `unicode-range`。

`&#0153;`规格不正确；`&trade;`并且`&#8482;`是正确的。但是现在所有的浏览器也接受`&#0153;`了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:11:11.673

您需要为该字符使用 HTML 实体。`&trade;`在您的 HTML 中使用。有关 HTML 实体的更多信息，您可以[在此链接下找到](http://www.w3schools.com/html/html_entities.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:27:25.677

在我看来，您使用的字体 Tinos Regular 不支持[商标符号](http://en.wikipedia.org/wiki/Trademark_symbol)。

我不是这类事情变通办法的专家，但首先想到的是回退到包含字形的字体：

```
/* CSS */
.fallback-font {
   font-family: serif;
}

<!-- HTML -->
This is trademarked<span class="fallback-font">™&lt;/span>. 
```

编辑：虽然我们的解决方案基本相同，但我会在这个问题上听从 Jukka，他比我清楚地知道他在说什么：D

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T18:48:03.790

在我的工具[AmpWhat HTML entity reference](http://amp-what.com/#q=trade)中，使用底部的“f”按钮尝试不同的字体。有些有自定义字形，有些回退到其他字体。虽然不是其主要目的，但您可以探索不同字体支持哪些字符。

或者，使用 sup ^(tm)元素，如`<sup>tm</sup>`.

# r - 带有 data.table 聚合的转置

> ID：15922909
> 
> 赞同：0
> 
> 时间：2013-04-10T10:09:00.867
> 
> 标签：r, aggregate, data.table, transpose

假设我们有`data.table`这样的：

```
 TYPE KEY  VALUE
1:  1    A    10
2:  1    B    10
3:  1    A    40
4:  2    B    20
5:  2    B    40 
```

我需要生成以下聚合`data.table`（数字是给定 TYPE 和 KEY 的值的总和）：

```
 TYPE A    B
1:  1    50   10
2:  2    0    60 
```

在现实生活中的问题中，KEY 有很多不同的值，因此不可能对它们进行硬编码。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:22:59.437

我能想到的一种方法是：

```
# to ensure all levels are present when using `tapply`
DT[, KEY := factor(KEY, levels=unique(KEY))]
DT[, as.list(tapply(VALUE, KEY, sum)), by = TYPE]
#    TYPE  A  B
# 1:    1 50 10
# 2:    2 NA 60 
```

# javascript - 当用户输入文本框时如何在 aspx 中启用按钮

> ID：15922911
> 
> 赞同：0
> 
> 时间：2013-04-10T10:09:05.187
> 
> 标签：javascript, asp.net

在 aspx 页面中，我需要进行验证，当用户键入特定文本框时，我需要启用按钮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:20:41.850

这是我的[**小提琴**](http://jsfiddle.net/prabhu5013/pec46/)

```
 $('#TextBoxId').keyup(function () {
            if ($.trim($(this).val()) != '') {
                $('#ButtonId').removeAttr('disabled');
            }
            else {
                $('#ButtonId').attr('disabled', 'disabled');
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:13:31.347

您需要在 JavaScript 中执行此客户端，例如（如果您使用的是 jQuery）：

```
var $textbox = $('#yourTextboxId');

var content = $textbox.val(); // Get your original textbox value

$textbox.keyup(function() { 
    if ($textbox.val() != content) { // Text has changed, enable your button
        content = $textbox.val();
        $('#yourButtonId').removeAttr('disabled');
    }
}); 
```

附带说明一下，对于 .NET，您需要`ClientIDMode="Static"`在控件（例如 TextBox）上使用才能获得与 JavaScript 一起使用的静态 ID，否则上述代码将不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:17:20.183

id 为“textBox”的输入文本框

```
<input type="text" id="textBox" /> 
```

您的 ID 为“btn1”的按钮最初被禁用。

```
<button type="button" id="btn1" disabled="disabled">Button</button> 
```

将启用或禁用按钮的 javascript

```
$("#textBox").change(function() {
   if ($("#textBox").val() != "")
   {
      $("#btn1").removeAttr("disabled");
   }
   else
   {
      $("#btn1").attr("disabled", "disabled");
   }
} 
```

# jsf - 如何在按键时更改 webflow 变量？

> ID：15922912
> 
> 赞同：0
> 
> 时间：2013-04-10T10:09:08.227
> 
> 标签：jsf, richfaces, spring-webflow

我在 Spring WebFlow 中有 flowScope 变量。我想通过按键盘上的特定键来更改它。所以我需要一些能力来改变它。我想到了rich:hotkey，但功能是什么？

```
<rich:hotKey key="esc"  onkeyup="???" /> 
```

可能是其他一些想法？我需要调用后端

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:06:16.810

`a4j:jsFunction`是你想要的，你可以像这样使用它：

```
<a4j:jsFunction name="myFunction" actionListener="#{bean.changeFlow}" /> 

<rich:hotKey key="esc" onkeyup="myFunction()"/> 
```

# git - 版本号最佳实践：如何在不强制用户下载没有有用更改的发行版的情况下将没有错误的 RC 变成 Final？

> ID：15922914
> 
> 赞同：1
> 
> 时间：2013-04-10T10:09:11.363
> 
> 标签：git, rubygems, versioning, release-management

我正在尝试采用命名版本的良好做法。

我已经完成了我的项目的编码。由于它可能包含未知错误，我将其标记为“v1.0rc1”。找到并修复所有错误后，我会将更新的版本标记为“v1.0”。

但是，如果没有发现任何错误，并且候选版本证明对于最终版本来说足够好怎么办？

使用 SCM，就像用“v1.0”标记最后一次提交一样简单。

问题在于更新发行版。我使用 RubyGems。它的约定是将版本号存储在代码中。在构建 gem（发行版）时，RubyGem 将版本号放入 gem 的文件名中并将其上传到存储库中。

如果我更改版本号并更新 gem，所有用户将被迫下载整个发行版而没有任何好处。我认为这是一种糟糕的做法。

另一方面，我既不想永远留在“v1.0rc1”，也不想发布可能包含错误的最终版本。

有没有一种方法可以让您同时发布候选版本并且不强迫用户重新下载无用的版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:52:15.987

这里的问题是代码更改没有正确传播给构建的使用者。由于消费者无法分辨哪些发生了变化，哪些没有发生变化以及这些变化的影响可能是什么，他们不得不重新下载所有内容。

您可以做的是将您的产品分成许多小部分，这样下载量就会很小。但这是一项巨大的维护工作，以今天的下载速度可以为人们节省几秒钟的时间（您的产品不是 400MB，是吗？）。

我希望我们最终能够创建使用散列和时间戳来确定是否发生变化的构建系统。该信息可以包含在下载中，或者提供下载和依赖管理系统的服务器可以

1.  仅下载更改的部分（即包含新版本号的单个文件或仅下载所述文件中单个常量的新值）
2.  并确定您的代码更改是否会影响我的代码，如果是，哪些部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:16:23.747

不要为此出汗，因为：

1.  有些产品永远不会“退出测试版”或使用 rc 方案，因此它们完全避免了这个问题。

2.  除非他们特别要求，否则大多数用户不会下载 rc 版本，因此大多数用户不会受到影响，除非您不得不拉出当前版本并在不久之后发布另一个版本，现在这*真的*会给人们带来不便。（我可以回忆起不止一把这样做的宝石，但我离题了）

3.  总会有错误。

# java - 为什么 GetText 方法返回空字符串

> ID：15922921
> 
> 赞同：1
> 
> 时间：2013-04-10T10:09:40.007
> 
> 标签：java, selenium-webdriver

我写了以下内容，运行此代码后它返回空字符串值。有人可以建议我解决这个问题吗？这里我使用了 gettext() 方法。它不检索链接名称。

**我的代码是：**

```
package Practice_pack_1;

import java.util.List;    

import org.openqa.selenium.By;    
import org.openqa.selenium.WebDriver;    
import org.openqa.selenium.WebElement;    
import org.openqa.selenium.firefox.FirefoxDriver;    
import org.testng.annotations.AfterTest;    
import org.testng.annotations.BeforeTest;    
import org.testng.annotations.Test;   

public class CheckingUncheckingCheckbox {
    WebDriver driver;
    @BeforeTest
    public void open()
    {
    driver=new FirefoxDriver();
    driver.navigate().to("http://openwritings.net/sites/default/files/radio_checkbox.html");
}
@AfterTest
public void teardown() throws InterruptedException
{
    Thread.sleep(3000);
    driver.quit();
}
@Test
public void CheckingChkbox() throws InterruptedException{  
    WebElement parent = driver.findElement(By.xpath(".//*[@id='fruits']"));
    List<WebElement> children = parent.findElements(By.tagName("input")); 
    int sz= children.size();
    System.out.println("Size is: "+sz);
    for (int i = 0; i <sz; i++) 
    {
        boolean check= children.get(i).isSelected();
        if(check==true)
        {
            System.out.println(children.get(i).getText()+ "is selected");
        }
        else
        {
            System.out.println(children.get(i).getText()+ "is not selected");
        }
    }  
} 
```

}

**输出是：**

```
Size is: 3    
is selected    
is not selected 
is selected
PASSED: CheckingChkbox 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T10:15:33.900

关于您的应用程序，您可能需要使用getText`getAttribute("value")`而不是`getText()`返回内部文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:39:12.507

如果你去检查你的页面 HTML，标签中没有内部文本。所以你不能使用`getText()`.

我假设您正在寻找输入标签的价值。如果您检查您的 HTMl agian，则输入标签中有一个 value 属性。您可以使用读取该值， `getAttribute("value")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T11:56:01.047

尝试删除“。” 在您的 xpath 之前，并确保您的 xpath 元素是正确的

尝试这个`driver.findElement(By.id("fruits")).getText());`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T06:54:31.393

我已经使用 java 及其工具的能力将您的编程方式更改为“更好”的方式。

实际上 getText() 用于捕获标签之间的文本，例如

```
<input id="input1" value="123"> getText() catches here </input> 
```

getAttribute() 捕获指定属性的值。

```
<input id="input1" value=" getAttribute("value") catches here ">123</input> 
```

这是我下面的代码版本。

```
@Test
public void CheckingChkbox() throws InterruptedException{  
  WebElement parent = driver.findElement(By.xpath(".//*[@id='fruits']"));
  List<WebElement> children = parent.findElements(By.tagName("input")); 
  System.out.println("Size is: "+children.size());
  for (WebElement el : children) 
  {
    if(el.isSelected())
    {
      System.out.println(el.getAttribute("value")+ "is selected");
    }
    else
    {
      System.out.println(el.getAttribute("value")+ "is not selected");
    }
  } // end for 
}// end CheckingChkbox() 
```

# map - 一段时间后，iOS 6 MKMapView 内存泄漏和崩溃应用程序

> ID：15922927
> 
> 赞同：2
> 
> 时间：2013-04-10T10:09:46.757
> 
> 标签：map, memory-leaks, crash, mkmapview, ios6-maps

iOS 6 MKMapView 似乎正在使用大量内存，当我们开始缩放并在我们的应用程序中使用 Map View 时（大约 7-10 分钟），当我们从具有 MKMapView 的控制器中出来时，它有些不是释放总内存（我在我的应用程序中使用 ARC）。我正在通过 NIB 分配和初始化 MKMapView。

控制器 1 --> 控制器 2（有 MKMapView）

1.5MB -->40-60MB （我用仪器查漏，但没用）

当我回到 Controller1 时，活动字节似乎是 7-10MB，每次访问控制器 2 后，活动字节都会增加大约 2-3MB，一段时间后应用程序崩溃，在控制台中显示“接收到的内存”警告”。有人可以帮忙吗？如果您需要更多信息，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T13:53:35.030

这是因为 MKMapView 的工作方式。有一个操作挂起，所以 MapKit 保留了 MKMapView，它实际上还没有被释放。这本身不是问题。问题是它仍在向您的代表发送消息。

解决方法很简单：作为视图控制器清理的一部分，将地图视图的委托设置为 nil，这将阻止 MKMapView 向其发送消息。

这记录在 MKMapViewDelegate 协议参考中：

在释放您已为其设置委托的 MKMapView 对象之前，请记住将该对象的委托属性设置为 nil。您可以在其中处理地图视图的 dealloc 方法中执行此操作。

编辑：也给 Oscar 一个赞成票，就在下面，谁在这里提供了文档报价。

鉴于 ARC，我建议这意味着您应该在视图控制器的 dealloc 中将地图视图的委托设置为 nil。

你可以做一些这样的事情来解决我的问题。更改地图类型也有帮助。

```
- (void)applyMapViewMemoryHotFix{

switch (self.mapView.mapView.mapType) {
    case MKMapTypeHybrid:
    {
        self.mapView.mapView.mapType = MKMapTypeStandard;
    }

        break;
    case MKMapTypeStandard:
    {
        self.mapView.mapView.mapType = MKMapTypeHybrid;
    }

        break;
    default:
        break;
}
self.mapView.showsUserLocation = NO;
self.mapView.delegate = nil;
[self.mapView removeFromSuperview];
self.mapView = nil;
}

-(void)viewDidDisappear:(BOOL)animated
{
    [self applyMapViewMemoryHotFix];
} 
```

# php - 我应该如何根据 date_time 从数据库中按降序获取数据？

> ID：15922931
> 
> 赞同：0
> 
> 时间：2013-04-10T10:09:56.237
> 
> 标签：php, mysql

**问题** 我在 2013 年 4 月 9 日的 date_time 中有最后一个数据条目，而当我尝试从数据库中按降序获取时，它给了我 2013 年 4 月 8 日。请参阅下面的图像和代码。任何帮助都会得到帮助。

**数据库** ![在此处输入图像描述](https://i.stack.imgur.com/o6nsr.jpg)

**代码**

```
SELECT * 
FROM data_feeds
WHERE username =  'davidjhume@gmail.com'
AND gadget_data_type =  'Weighin'
ORDER BY STR_TO_DATE( date_time,  '%D, %j %M %Y %H:%i:%s' ) DESC 
LIMIT 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:18:18.313

格式字符串坏了，试试：'%a, %e %b %Y %H:%i:%s'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:14:33.230

您的 str_to_date() 格式错误您说 `%D, %j %M %Y %H:%i:%s` 所以根据您的说法，第二个值是 %j。但根据 Mysql 文档，%j 是“一年中的一天”。[https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

**编辑**：您的格式有多个错误。尝试：`%a, %e %b %Y %H:%i:%s`

# annotations - 如何使用复合键通过附加表绑定实体

> ID：15922933
> 
> 赞同：0
> 
> 时间：2013-04-10T10:09:59.543
> 
> 标签：annotations, foreign-keys, jpa-2.0, eclipselink, foreign-key-relationship

我在使用复合键通过附加表绑定实体时遇到问题：

类产品

```
@Entity
public class Product implements Serializable {
    @Id
    @Column(name = "product_id")
    private Integer productId;
    ...
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "product", fetch = FetchType.LAZY)
    private Collection<ProductProperty> productPropertyCollection;
    ...
    get/set
    ...
    public void addProductProperty(ProductProperty productProperty) {
        productPropertyCollection.add(productProperty);
        if (productProperty.getProduct()!=this) {
            productProperty.setProduct(this);
        }
    }
} 
```

类属性

```
@Entity
public class Property implements Serializable {
    @Id
    @Column(name = "property_id")
    private Integer id;
    ...
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "property", fetch = FetchType.LAZY)
    private Collection<ProductProperty> productPropertyCollection;
    ...
    get/set
    ...
    public void addProductProperty(ProductProperty productProperty) {
        productPropertyCollection.add(productProperty);
        if (productProperty.getProperty()!=this) {
            productProperty.setProperty(this);
        }
    }

} 
```

类 ProductProperty

```
@Entity
@IdClass(ProductPropertyPK.class)
public class ProductProperty implements Serializable {

    @Id
    @ManyToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY)
    @JoinColumn(name = "property_id", referencedColumnName = "property_id")
    private Property property;

    @Id
    @ManyToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY)
    @JoinColumn(name = "product_id", referencedColumnName = "product_id")
    private Product product;

    public void setProperty(Property property) {
        this.property = property;
        if (!property.getProductPropertyCollection().contains(this)) {
            property.getProductPropertyCollection().add(this);
        }
    }

    public void setProduct(Product product) {
        this.product = product;
        if (!product.getProductPropertyCollection().contains(this)) {
            product.getProductPropertyCollection().add(this);
        }
    }

} 
```

使用实体：

```
for (Offer o : offers.getOffers()) {
    jpa.product.Product product = cacheProduct_indexIdx.get(o.getProductsId());   
    for (Property p : o.getProperties()) {                   
        PropertyTypeNamePK propertyTypeNamePK = new PropertyTypeNamePK(p.getType(), p.getName());
        if (!cacheProperty_indexTypeNamePK.containsKey(propertyTypeNamePK)) {
            jpa.product.Property property = new jpa.product.Property();
            property.setType(p.getType());
            property.setName(p.getName());
            propertyFacade.create(property);

            jpa.product.ProductProperty productProperty = new ProductProperty();
            product.addProductProperty(productProperty);
            property.addProductProperty(productProperty);

            cacheProperty_indexTypeNamePK.put(propertyTypeNamePK, property);    
        } else {
            jpa.product.Property property = cacheProperty_indexTypeNamePK.get(propertyTypeNamePK);

            jpa.product.ProductProperty productProperty = null;
            for (jpa.product.ProductProperty pp : product.getProductPropertyCollection()) {
                if (property.equals(pp.getProperty())) {
                    productProperty = pp;
                    break;
                }
            }
            if (productProperty==null) {
                productProperty = new ProductProperty();
                product.addProductProperty(productProperty);
                property.addProductProperty(productProperty);
            }
        }
    }
} 
```

它适用于 1, 10, 100 `products`，但在某处出现错误，因为对于 1000 和更多`products`抛出错误：

```
Caused by: java.lang.StackOverflowError
    at java.text.DecimalFormat.subformat(DecimalFormat.java:903)
    at java.text.DecimalFormat.format(DecimalFormat.java:692)
    at java.text.DecimalFormat.format(DecimalFormat.java:626)
    at java.text.SimpleDateFormat.zeroPaddingNumber(SimpleDateFormat.java:1335)
    at java.text.SimpleDateFormat.subFormat(SimpleDateFormat.java:1274)
    at java.text.SimpleDateFormat.format(SimpleDateFormat.java:978)
    at java.text.SimpleDateFormat.format(SimpleDateFormat.java:948)
    at java.text.DateFormat.format(DateFormat.java:336)
    at com.sun.enterprise.server.logging.UniformLogFormatter.uniformLogFormat(UniformLogFormatter.java:265)
    at com.sun.enterprise.server.logging.UniformLogFormatter.format(UniformLogFormatter.java:162)

    at java.util.logging.StreamHandler.publish(StreamHandler.java:196)
    at java.util.logging.ConsoleHandler.publish(ConsoleHandler.java:105)
    at java.util.logging.Logger.log(Logger.java:565)
    at org.eclipse.persistence.logging.JavaLog.internalLog(JavaLog.java:290)
    at org.eclipse.persistence.logging.JavaLog.log(JavaLog.java:261)
    at org.eclipse.persistence.internal.sessions.AbstractSession.log(AbstractSession.java:3215)
    at org.eclipse.persistence.internal.sessions.AbstractSession.log(AbstractSession.java:4333)
    at org.eclipse.persistence.internal.sessions.AbstractSession.log(AbstractSession.java:4305)
    at org.eclipse.persistence.internal.sessions.AbstractSession.log(AbstractSession.java:4281)
    at org.eclipse.persistence.internal.sessions.AbstractSession.log(AbstractSession.java:4203)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.logDebugMessage(UnitOfWorkImpl.java:5559)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.registerNotRegisteredNewObjectForPersist(UnitOfWorkImpl.java:4250)
    at org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.registerNotRegisteredNewObjectForPersist(RepeatableWriteUnitOfWork.java:511)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.discoverAndPersistUnregisteredNewObjects(UnitOfWorkImpl.java:4160)
    at org.eclipse.persistence.mappings.CollectionMapping.cascadeDiscoverAndPersistUnregisteredNewObjects(CollectionMapping.java:426)
    at org.eclipse.persistence.internal.descriptors.ObjectBuilder.cascadeDiscoverAndPersistUnregisteredNewObjects(ObjectBuilder.java:1964)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.discoverAndPersistUnregisteredNewObjects(UnitOfWorkImpl.java:4178)
    at org.eclipse.persistence.mappings.ObjectReferenceMapping.cascadeDiscoverAndPersistUnregisteredNewObjects(ObjectReferenceMapping.java:938)
    at org.eclipse.persistence.mappings.ObjectReferenceMapping.cascadeDiscoverAndPersistUnregisteredNewObjects(ObjectReferenceMapping.java:916)
    at org.eclipse.persistence.internal.descriptors.ObjectBuilder.cascadeDiscoverAndPersistUnregisteredNewObjects(ObjectBuilder.java:1964)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.discoverAndPersistUnregisteredNewObjects(UnitOfWorkImpl.java:4178)
    at org.eclipse.persistence.mappings.CollectionMapping.cascadeDiscoverAndPersistUnregisteredNewObjects(CollectionMapping.java:426)
    at org.eclipse.persistence.internal.descriptors.ObjectBuilder.cascadeDiscoverAndPersistUnregisteredNewObjects(ObjectBuilder.java:1964)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.discoverAndPersistUnregisteredNewObjects(UnitOfWorkImpl.java:4178)
    at org.eclipse.persistence.mappings.ObjectReferenceMapping.cascadeDiscoverAndPersistUnregisteredNewObjects(ObjectReferenceMapping.java:938)
    at org.eclipse.persistence.mappings.ObjectReferenceMapping.cascadeDiscoverAndPersistUnregisteredNewObjects(ObjectReferenceMapping.java:916)
    at org.eclipse.persistence.internal.descriptors.ObjectBuilder.cascadeDiscoverAndPersistUnregisteredNewObjects(ObjectBuilder.java:1964)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.discoverAndPersistUnregisteredNewObjects(UnitOfWorkImpl.java:4178)
    at org.eclipse.persistence.mappings.CollectionMapping.cascadeDiscoverAndPersistUnregisteredNewObjects(CollectionMapping.java:426)
    at org.eclipse.persistence.internal.descriptors.ObjectBuilder.cascadeDiscoverAndPersistUnregisteredNewObjects(ObjectBuilder.java:1964)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.discoverAndPersistUnregisteredNewObjects(UnitOfWorkImpl.java:4178)
    at org.eclipse.persistence.mappings.ObjectReferenceMapping.cascadeDiscoverAndPersistUnregisteredNewObjects(ObjectReferenceMapping.java:938)
    at org.eclipse.persistence.mappings.ObjectReferenceMapping.cascadeDiscoverAndPersistUnregisteredNewObjects(ObjectReferenceMapping.java:916)
    at org.eclipse.persistence.internal.descriptors.ObjectBuilder.cascadeDiscoverAndPersistUnregisteredNewObjects(ObjectBuilder.java:1964)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.discoverAndPersistUnregisteredNewObjects(UnitOfWorkImpl.java:4178)
    at org.eclipse.persistence.mappings.CollectionMapping.cascadeDiscoverAndPersistUnregisteredNewObjects(CollectionMapping.java:426)
    at org.eclipse.persistence.internal.descriptors.ObjectBuilder.cascadeDiscoverAndPersistUnregisteredNewObjects(ObjectBuilder.java:1964)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.discoverAndPersistUnregisteredNewObjects(UnitOfWorkImpl.java:4178) 
```

# jsf - 重用 Bean

> ID：15922935
> 
> 赞同：0
> 
> 时间：2013-04-10T10:10:07.363
> 
> 标签：jsf, javabeans

在仪表板上，每个用户都可以看到一些基本统计信息。让我们以“上次登录”日期为例。（但还有更多的统计数据/值/设置要显示）

XHTML 文件看起来很简单，如下所示：

```
<h:outputText value="statisticController.lastLoginDate()" /> 
```

Bean 本身用于`@Inject`获取 Session 并因此获取当前用户：

```
@Named
@RequestScoped
public StatisticController{
    @Inject
    private mySessionBean mySession;

    @PostConstruct
    private void init(){
       //load stats for mySession.currentUser;
    }
} 
```

现在，我想生成一个列表，例如某个角色可以查看所有用户的值。因此我不能再使用会话注入，因为现在需要为多个用户生成 StatisticController。

拥有常规类这不会是一个大问题 - 将 userEntity 添加到构造函数中。在 JSF 中解决这个问题的“最佳实践”是什么？

如果我将 StatisticController 修改为如下所示：

```
@Named
@RequestScoped
public StatisticController{

    public void init(User user){
       //load stats for user;
    }
} 
```

我当然需要`init(user)`手动调用。如何在 XHTML 文件的迭代中实现这一点？

我可以重构它，以便 valueLoading 发生在实际的 getter 方法中，并像这样迭代：

```
<ui:repeat var="user" value="#{userDataService.getAllUsers()}">
    <h:outputText value="statisticController.lastLoginDate(user)" />        
    ...
</ui:repeat> 
```

但是然后我需要单独加载“每个”值，这很糟糕。

所以这样的方式会“更好”：

```
<ui:repeat var="user" value="#{userDataService.getAllUsers()}">
    statisticController.init(user);
    <h:outputText value="statisticController.lastLoginDate()" />        
    ...
</ui:repeat> 
```

然而，这看起来也不是很舒服。进一步做这样的事情，会将几乎“所有”后端东西移到渲染响应阶段，这感觉不对。

任何想法/提示如何以一种不像“解决方法”的方式解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:22:04.033

创建一个包装这些模型的新模型。

```
public class UserStatistics {

    private User user;
    private Statistics statistics;

    // ...
} 
```

这样你就可以使用例如

```
public class UserStatisticsBacking {

    private List<UserStatistics> list;

    @EJB
    private UserService userService;

    @EJB
    private StatisticsService statisticsService;

    @PostConstruct
    public void init() {
        list = new ArrayList<UserStatistics>();

        for (User user : userService.list()) {
            list.add(new UserStatistics(user, statisticsService.get(user)));
        }
    }

    // ...
} 
```

*（最好是在新的版本中执行它`UserStatisticsService`）*

和

```
<ui:repeat value="#{userStatisticsBacking.list}" var="userStatistics">
    <h:outputText value="#{userStatistics.user.name}" />
    <h:outputText value="#{userStatistics.statistics.lastLoginDate}" />
    ...
</ui:repeat> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:03:52.603

使用 BalusC 提出的包装模型的替代方法是存储两个带有模型数据的单独列表。使用这种方法，您不需要引入修改。

按照这条路线，您将迭代一个列表，`<ui:repeat>`并确保两个列表的大小相等，按索引获取第二个列表元素，这反过来又可以通过`varStatus`导出迭代状态变量的属性获得。

```
<ui:param name="stats" value="#{bean.stats}/>
<ui:repeat value="#{bean.users}" var="user" varStatus="status">
    <h:outputText value="#{user}/>
    <h:outputText value="#{stats[status.index]}/>
</ui:include> 
```

列表的填充可以预先在`PostConstruct`方法中完成：

```
private List<User> users;
private List<Statistic> stats;

@PostConstruct
public void init() {
    users = userService.list();
    stats = statService.list();
} 
```

# actionscript-3 - 尝试掩盖动作脚本中的文本字段

> ID：15922940
> 
> 赞同：0
> 
> 时间：2013-04-10T10:10:26.847
> 
> 标签：actionscript-3, flash, action

我试图用下面的代码屏蔽一个 textField，但它不起作用。

```
var Blue_clip:blue_img = new blue_img()
addChild(Blue_clip)
var field:TextField=new TextField();
var format:TextFormat=new TextFormat();
format.size = 40;
format.font = "Arial";
field.defaultTextFormat = format;
field.text = "Hello World";
addChild(field);
Blue_clip.mask = field; 
```

请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-30T12:20:54.560

**方法 1) - 使用运行时 AS 掩码**

```
_root.attachMovie("mask", "mask_instance", 3 ,{_x:10, _y:20});
_root.masked_content_mc.setMask(mask_instance); 
```

其中掩码是库中导出的影片剪辑（例如简单形状 100x100px）

**方法 2) - 嵌入字体。** 您必须使用 Text->Font Embedding 嵌入字体，然后将其设置为文本字段：

```
var style_tf:TextFormat = new TextFormat();
style_tf.font = "ArialEmbed";
style_tf.size = 16;
_root.my_text.setTextFormat(style_tf); 
```

# lotus-notes - 当服务器上不存在 MS-Office 时，在代理的帮助下通过 HTML 生成 excel

> ID：15922946
> 
> 赞同：1
> 
> 时间：2013-04-10T10:10:35.460
> 
> 标签：lotus-notes, lotus

我创建了一个生成 Excel 文档并通过邮件将其发送给特定用户的代理。Excel 文件生成是在运行时完成的，因此我不会将文件存储在任何地方。但是，问题是代理应该在服务器上运行。服务器没有安装 MS Office。这如何可以通过 HTML 来完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T10:45:56.407

查看 OpenNTF 上的[POI 4 XPages](http://poi4xpages.openntf.org/)，它使用 Apache POI 项目生成 Word 和 Excel 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T10:22:09.877

您创建一个普通的 HTML 页面，其中`<TABLE>`包含您的记录数据。然后您需要将 Response contentType 设置为“application/vnd.ms-excel”。

下面的 MS 技术说明将详细说明如何写出 HTML。

[http://support.microsoft.com/kb/260239](http://support.microsoft.com/kb/260239)

XPages Cheatsheet 中还有示例 XPage 代码。请参阅以下链接。

[http://xpagesheatsheet.com](http://xpagescheatsheet.com)

Lekkim 有在代理 (Java) 中设置 contentType 的示例代码。

[http://lekkimworld.com/2006/03/30/show_n_tell_thursday_setting_the_content_type_from_a_java_agent_30_mar_2006.html](http://lekkimworld.com/2006/03/30/show_n_tell_thursday_setting_the_content_type_from_a_java_agent_30_mar_2006.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T10:45:32.587

如果您需要通过电子邮件发送 Excel 文件，那么最好使用[Apache POI](http://poi.apache.org/)创建一个真实的 Excel 文件。

# c# - 实体框架基础

> ID：15922947
> 
> 赞同：1
> 
> 时间：2013-04-10T10:10:39.133
> 
> 标签：c#, .net, entity-framework

在我的演示解决方案中，我有两个项目 DataAccess 和 WebInterface。

在 DataAccess 项目中，我有一个用户 EF 和一个类文件 UserDataAccessService.cs

UserDataAccessService.cs 中的代码：-

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.Entity;
using System.Data.EntityClient;
using System.Data.SqlClient;
using System.Data;
using DataAccess.User;

namespace DataAccess.User
{

    public sealed class UserDataAccessService
    {

        private string efConnectionString;        
        private string portalConnectionString;

        public string ConnectionString
        {
            get {  return efConnectionString;   }
        }
        public UserDataAccessService(string portalConnectionString)
        {
            this.portalConnectionString = portalConnectionString;
            this.efConnectionString = GetConnectionString(portalConnectionString);
        }
        private string GetConnectionString(string portalConnectionString)
        {
            EntityConnectionStringBuilder entityBuilder = new EntityConnectionStringBuilder();
            entityBuilder.Provider = "System.Data.SqlClient";
            entityBuilder.ProviderConnectionString = portalConnectionString;
            entityBuilder.Metadata = "res://*/User.ProgramModel.csdl|res://*/User.UserModel.ssdl|res://*/User.UserModel.msl";
            return entityBuilder.ToString();
        }
        public IEnumerable<User> GetUsers(int? userId, bool? status)
        {
            using (Users objectContext = new Users(efConnectionString))
            {
                return objectContext.GetUsers(null, null);
            }
        }
    }
} 
```

现在在 WebInterface 项目中，我只是有一个 ManageUsers.aspx 页面，我试图通过下面的代码获取用户列表

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Configuration;
using System.Data;
using DataAccess.User;
namespace WebInterface
{
    public partial class ManageUser : System.Web.UI.Page
    {

        protected void Page_Load(object sender, EventArgs e)
        {
            UserDataAccessService usrObj = new UserDataAccessService(ConfigurationManager.ConnectionStrings["portalConn"].ToString());
            List<User> userLst = new List<User>();   
            userLst =  usrObj.GetUsers(1, null).ToList();
        }
    }
} 
```

问题：-当我构建解决方案时，我收到以下错误：-

```
Error 1
The type 'System.Data.Objects.DataClasses.EntityObject' is defined in an assembly that is not referenced. 
You must add a reference to assembly 'System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.

D:\Practice\PTP\UI\WebInterface\User\ManageUser.aspx.cs
18 13
WebInterface 
```

为了修复它，我将它 System.Data.Entity.dll 包含在 WebInterface 项目的参考文件夹中，该文件夹已修复了该问题。

我的问题：

如果您查看我的代码，那么您可以发现与代码相关的 EF 都在 DataAccess 项目中，其中包含与 EF 相关的类所需的所有必需的 dll 引用。

在 WebInterface 项目中，我包含了 DataAccess.dll，在其中的 .aspx 页面中，我只是将其调用为获取数据的函数。

那么为什么它在 WebInterface 项目中也需要 System.Data.Entity.dll 呢？

问候

瓦伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:07:20.030

我只有 99% 的把握，因为您使用的是一些老式的 EF :) 并且您没有共享 User 类，但是......我认为是 EntityFramework 感知的 User 类。User是从EntityObject继承的吗？

您可以通过将数据从实体类映射到您的 UI 类来避免这种情况。但这需要使用 EF 的所有魔力。

# mysql - 如何解码和查看 Jboss JMS 消息内容？

> ID：15922951
> 
> 赞同：0
> 
> 时间：2013-04-10T10:10:53.463
> 
> 标签：mysql, encoding, jboss, jms, blob

在`JBoss` `JBM_MSG table`（存储 JMS mq 消息）中，消息内容是`longblob`. 我试图在 mySQL 版本是 5.1.67 中查看它。对于所有其他字符集以及 utf8，我尝试了以下变体，但它们不起作用：

```
SELECT CONVERT(payload USING utf8) FROM JBM_MSG;

SELECT CAST(payload AS CHAR(10000) CHARACTER SET utf8) FROM JBM_MSG; 
```

关于 stackoverflow 的另一个问题表明 JMS 编码是`utf16`，而我的 mySQL 版本是`pre-utf16 support`- 但表编码是`latin1`。

有谁知道如何查看这些消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:46:08.427

JMS 消息是 java 对象，在 DB 中它们将采用序列化形式。因此，您不能只将它们转换为可读的。

# sql - 如何根据两个不同表中存在的记录更新列值？

> ID：15922958
> 
> 赞同：0
> 
> 时间：2013-04-10T10:11:17.510
> 
> 标签：sql, database, tsql

有没有更好的方法来执行以下操作？（而不是有两个单独的查询）如果 AdminDetails 表中存在记录，我想将 UserTypeId 列更新为“ `USER1`”或“ ”。`USER2`

```
UPDATE Usernames
SET UserTypeId = (select Id from UserTypes where code = 'USER1')
WHERE EXISTS
(SELECT AdminDetails.Id
FROM AdminDetails
WHERE AdminDetails.Id = Usernames.Id)

UPDATE Usernames
SET UserTypeId = (select Id from UserTypes where code = 'USER2')
WHERE EXISTS
(SELECT AdminDetails.Id
FROM AdminDetails
WHERE AdminDetails.Id = Usernames.Id) 
```

我尝试使用`COUNT()`，但在尝试使用内部联接和 case 语句在一个查询中执行此操作时出现以下错误：

```
UPDATE  Usernames
SET     UserTypeId = (CASE WHEN COUNT(AdminDetails.Id) > 0 THEN 'USER1' ELSE 'USER2' END)
FROM    AdminDetails
        INNER JOIN Usernames AS un
            ON  AdminDetails.Id = un.UserId 
```

但它给出了以下错误：'**聚合可能不会出现在 UPDATE 语句的集合列表中**'。

我想在一个查询中使用 case when then else 通过检查记录是否存在来执行此操作。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:19:02.430

您可以尝试这样的事情，`EXISTS`在`CASE`语句中使用：

```
UPDATE  Usernames
SET     UserTypeId = (CASE WHEN EXISTS 
                                (SELECT AdminDetails.Id
                                 FROM AdminDetails
                                 WHERE AdminDetails.Id = Usernames.Id) 
                           THEN 'USER1' ELSE 'USER2' END) 
```

**注意：**这将更新 ID 在两个表中的所有记录，除非您在其上添加`WHERE`子句。另外，我不确定您是否要`UserTypeId`使用值更新`USER1`和`USER2`，这是您的第三`UPDATE`条语句试图做的。如果没有看到完整的数据库架构，很难准确。

# javascript - 使用 QUnit 进行 Javascript 测试

> ID：15922962
> 
> 赞同：0
> 
> 时间：2013-04-10T10:11:27.857
> 
> 标签：javascript, jquery, qunit

我想通过 q​​unit 检查我的 js 代码。我正在检查我知道的简单 js 代码。谁能告诉我如何用 qunit 检查以下类型的 js 代码？这个问题的答案真的很容易，

```
function check_person() {
var no_adt = document.getElementById('adult').value;
var no_chd = document.getElementById('child').value;
var no_inf = document.getElementById('infant').value;
if (no_inf > no_adt) {
    alert('Number of Infants must be less than equal to number of Adults');
    return false;
}
if (parseInt(no_adt) + parseInt(no_chd) + parseInt(no_inf) > 9) {
    alert('Please note there is a maximum of 9 passengers permitted on the search form');
    return false;
}`enter code here`
return true; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:55:22.723

```
 <script type="text/javascript">
        function check_person() {
            var no_adt = document.getElementById('adult').value;
            var no_chd = document.getElementById('child').value;
            var no_inf = document.getElementById('infant').value;
            if (no_inf > no_adt) {
                alert('Number of Infants must be less than equal to number of Adults');
                return false;
            }
            if (parseInt(no_adt) + parseInt(no_chd) + parseInt(no_inf) > 9) {
                alert('Please note there is a maximum of 9 passengers permitted on the search form');
                return false;
            }
            return true;
        }
        function assignValues(adult, child, infant){
            document.getElementById('adult').value = adult;
            document.getElementById('child').value = child;
            document.getElementById('infant').value = infant;
        }
         test("Test check_person", function(){
            assignValues(5,2,1);
            ok(check_person());

            assignValues(2,1,5);
            ok(!check_person(), "Number of Infants is less than equal to number of Adults");

            assignValues(7,2,5);
            ok(!check_person(), "a maximum of 9 passengers permitted");
        });
    </script>
    <body>

        <div id="qunit-fixture">
            <input id="adult" />
            <input id="child" />
            <input id="infant" />
        </div>
        <div id="qunit">

        </div>
    </body> 
```

最好修改您的函数以使其更具可测试性：

```
function check_person(no_adt, no_chd, no_inf) {
if (no_inf > no_adt) {
    alert('Number of Infants must be less than equal to number of Adults');
    return false;
}
if (parseInt(no_adt) + parseInt(no_chd) + parseInt(no_inf) > 9) {
    alert('Please note there is a maximum of 9 passengers permitted on the search form');
    return false;
}
return true;
} 
```

然后你就不需要 html 标记和 assignValues()：

```
 test("Test check_person", function(){
      ok(check_person(5, 2, 1));

      ok(!check_person(5, 2 ,1), "Number of Infants is less than equal to number of Adults");

      ok(!check_person(7, 2, 5), "a maximum of 9 passengers permitted");
 }); 
```

# php - 如果我单击浏览器源代码中的样式表链接，则基本标记显示 404 错误

> ID：15922963
> 
> 赞同：0
> 
> 时间：2013-04-10T10:11:31.330
> 
> 标签：php, hyperlink, base

我`<base>`在我的网站中使用标签，并且在页面中链接样式表，例如

```
stylesheet/default.css 
```

现在当我浏览网站时，当我看到源代码并单击样式表链接时，它显示 404，为什么会这样，我知道使用的是基本标记，所以我需要使用绝对路径，但是如何在生成 HTML 时嵌入基本标记页

# wpf - 为什么绑定会影响高度？

> ID：15922964
> 
> 赞同：4
> 
> 时间：2013-04-10T10:11:35.900
> 
> 标签：wpf, binding, styles, caliburn.micro

Resources/Shared.xaml 中的样式定义（**更新**）：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:system="clr-namespace:System;assembly=mscorlib">
<system:Double x:Key="fullHeight" >26</system:Double>
<system:Double x:Key="halfHeight" >16</system:Double>
<Thickness x:Key="m">10</Thickness>
<Style TargetType="Button">
    <Setter Property="FontSize" Value="{StaticResource fullHeight}"/>
    <Setter Property="Margin" Value="{StaticResource m}"/>
    <Setter Property="Padding" Value="10"/>
</Style>
<Style TargetType="Label">
    <Setter Property="FontSize" Value="{StaticResource fullHeight}"/>
    <Setter Property="Margin" Value="{StaticResource m}"/>
    <Setter Property="VerticalAlignment" Value="Center"/>
</Style>
<Style TargetType="TextBlock">
    <Setter Property="FontSize" Value="{StaticResource fullHeight}"/>
    <Setter Property="Margin" Value="{StaticResource m}"/>
</Style>
<Style TargetType="TextBox">
    <Setter Property="FontSize" Value="{StaticResource fullHeight}"/>
    <Setter Property="Margin" Value="{StaticResource m}"/>
    <Setter Property="Padding" Value="10"/>
</Style>
<Style TargetType="PasswordBox">
    <Setter Property="FontSize" Value="{StaticResource fullHeight}"/>
    <Setter Property="Margin" Value="{StaticResource m}"/>
    <Setter Property="Padding" Value="10"/>
</Style>
<Style TargetType="ListView">
    <Setter Property="FontSize" Value="{StaticResource fullHeight}"/>
    <Setter Property="Margin" Value="{StaticResource m}"/>
    <Setter Property="Padding" Value="10"/>
</Style>
<Style TargetType="ComboBox">
    <Setter Property="Margin" Value="{StaticResource m}"/>
</Style>
</ResourceDictionary> 
```

窗户：

```
<Window.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="../Resources/Shared.xaml"/>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Window.Resources> 
```

用户控制：

```
<StackPanel Orientation="Horizontal">
  <Label Content="Text" Background="AliceBlue"/>
  <Label Content="{Binding DecimalValue, FallbackValue=50}" Background="Aquamarine"/>
</StackPanel> 
```

模型：

```
 private decimal _DecimalValue;
    public decimal DecimalValue
    {
        get { return _DecimalValue; }
        set
        {
            if (_DecimalValue != value)
            {
                _DecimalValue = value;
                NotifyOfPropertyChange();
            }
        }
    } 
```

如果有什么不同，我正在使用 Caliburn.Micro。

结果：

![在此处输入图像描述](https://i.stack.imgur.com/1SY3e.png)

为什么？

**更新：**经过一番窥探，结果发现第一个标签的内部 TextBlock 的边距为 0，值源为默认值，第二个为 10 和样式。

**更新 2：**在阅读了[这个问题](https://stackoverflow.com/questions/9035878/implicit-styles-in-application-resources-vs-window-resources)之后，事实证明定义的`TextBlock`样式*不*应该应用于`TextBlocks`inside `Labels`。所以似乎绑定的存在以`Label`某种方式改变了这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:23:15.020

你必须有其他影响它的风格。

我最好的猜测是检查您的`Padding`属性，因为当我将您的样式复制并粘贴到新项目时，高度和边距与您的图像相同，但是填充不同。

您的标签实际上是这样呈现的：

```
<Label>
    <Border>
        <ContentPresenter>
            <TextBlock />
        </ContentPresenter>
    </Border>
</Label> 
```

通过弄乱[Snoop](http://snoopwpf.codeplex.com/)，我可以通过更改`Border`对象的 Padding 来复制您的图像，因此请检查您的 XAML 以查看您是否有任何隐式样式会更改`Padding`您的`Border`标签

**更新**

添加您添加到问题中的额外样式后，我能够重现您得到的结果。

问题似乎是您的隐式样式`TextBlock`被应用于`TextBlock`绑定标签的内部，而不是未绑定的标签。

应该注意，这只发生在绑定到十进制值而不是字符串时。

[我怀疑这与隐式样式并不意味着跨越模板边界](http://blogs.msdn.com/b/wpfsdk/archive/2009/08/27/implicit-styles-templates-controls-and-frameworkelements.aspx)这一事实有关，*除非*元素继承自`Control`. `Label`继承自`Control`，但`TextBlock`不继承。

由于这仅在绑定到数值时发生，我最好的猜测是确定如何绘制 Decimal 的进程`Label.Content`将父控件标识为 a `Label`，而写入 a 的进程`string`自动`Label.Content`知道使用 a `TextBlock`，并且不适用隐式风格。

# php - 如果特定条件为真，如何在 mySQL 中获取特定列的名称？

> ID：15922969
> 
> 赞同：0
> 
> 时间：2013-04-10T10:11:43.853
> 
> 标签：php, mysql, sql, database, phpmyadmin

我在 mySQL 中有一个表，其结构如下所示，带有一行数据

```
info     R1    R2    R3      R4      R5         ( Columns)
------------------------------------------   
Percent  80    90    70      85      69         (Data) 
```

我的应用程序是参加一个讲座，该讲座以上述格式存储出勤数据和总体百分比。

如果百分比低于 75%，我需要检索列名吗？如何使用 PHP 脚本执行此操作？我应该使用哪个 mySQL 查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T10:22:30.420

如果你想使用简单的 PHP 脚本，你可以检查这个[SQL FIDDLE 。](http://sqlfiddle.com/#!3/8607f/6)

查询类似于：

```
SELECT r1,'R1' FROM info WHERE R1<75
UNION ALL 
SELECT r2,'R2' FROM info WHERE R2<75
UNION ALL 
SELECT r3,'R3' FROM info WHERE R3<75
UNION ALL 
SELECT r4,'R4' FROM info WHERE R4<75
UNION ALL 
SELECT r5,'R5' FROM info WHERE R5<75 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T10:26:54.917

如果我了解您的需求，请尝试以下操作：

```
SELECT info,
       if(R1 > 75, 'R1','-') AS 'R1>75',
       if(R2 > 75, 'R2','-') AS 'R2>75',
       if(R3 > 75, 'R3','-') AS 'R3>75',
       if(R4 > 75, 'R4','-') AS 'R4>75',
       if(R5 > 75, 'R5','-') AS 'R5>75'
FROM Table1
WHERE R1 > 75
  OR R2 > 75
  OR R3 > 75
  OR R4 > 75
  OR R5 > 75; 
```

[这](http://sqlfiddle.com/#!2/c8520/7)是 sqlfiddle 的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:44:48.707

您可以先选择所有字段，然后仅显示值小于 75 的那些数据。这样做的一种方法是：

```
$sql = "SELECT * FROM table_name";
$result = mysql_query($sql);
$row = mysql_fetch_array($result);
if($row[R1]<75) 
    echo "R1: " . $row[R1] . "<br />";
if($row[R2]<75) 
    echo "R2: " . $row[R2] . "<br />";
if($row[R3]<75) 
    echo "R3: " . $row[R3] . "<br />";
if($row[R4]<75) 
    echo "R4: " . $row[R4] . "<br />";
if($row[R5]<75) 
    echo "R5: " . $row[R5] . "<br />"; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-10T10:18:58.213

传递查询以从数据库中检索百分比低于 75% 的数据。所以它只会检索那些值小于 75 的列。

**更新**

```
select
  case
     when R1<75 then R1
     end
     as 'R1',
  case
     when R2<75 then R2
     end
     as 'R2',
  case
     when R3<75 then R3
     end
     as 'R3',
  case
     when R4<75 then R4
     end
     as 'R4',
  case
     when R5<75 then R5
     end
     as 'R5'
from Table; 
```

它将获取具有列名的所有列（信息除外），但列的值将是`null`如果百分比高于或等于 75。从结果中，根据条件，您可以获得列名然后使用`ResultSetMetaData`您可以获得列名字。

# asp.net - ASP.net nlog 创建时间明智的文件

> ID：15922970
> 
> 赞同：1
> 
> 时间：2013-04-10T10:11:48.500
> 
> 标签：asp.net, nlog

我需要明智地创建文件日期，尽管现在正在创建文件夹。

但我需要将日期明智的文件放在运行时文件夹中

```
String logfile = t.FileName.ToString() + "/" + LoginID + "DateTime.ToString("yyyyMMdd").txt";

t.FileName = logfile; 
```

`LoginID`是从数据库和动态更改文件夹中获取的值，但需要创建文本文件。我被困在这里。

任何帮助？

# ios - 日期格式 - 时区

> ID：15922971
> 
> 赞同：2
> 
> 时间：2013-04-10T10:11:49.720
> 
> 标签：ios, objective-c, nsdate, nsdateformatter

我从服务器收到一个字符串，其日期如下所示：“2013-03-29T15:27:00Z”。如何格式化并将其转换为 NSDate？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T10:18:13.570

尝试这个：

```
[NSDateFormatter setDefaultFormatterBehavior:NSDateFormatterBehavior10_4];
NSDateFormatter *formatter = [[[NSDateFormatter alloc] init] autorelease];
[formatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ssZ"];
NSDate *date = [formatter dateFromString:@"2013-03-29T15:27:00Z"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:19:53.597

```
NSString *string=@"2013-03-29T15:27:00Z";
NSDateFormatter *dateFormatter=[NSDateFormatter new];
[dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss'Z'"];
NSDate *date=[dateFormatter dateFromString:string]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T10:18:47.807

```
 NSString *departTimeDate = @"2013-03-29T15:27:00Z";

    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"yyyy'-'MM'-'dd'T'HH':'mm':'ss'Z'"];
    NSDate *date = [dateFormatter dateFromString:departTimeDate];

    NSLog(@"Expected Result___ %@",date); 
```

# ef-code-first - EF 4.3 代码优先迁移 - 解压缩 __MigrationHistory 模型

> ID：15922984
> 
> 赞同：0
> 
> 时间：2013-04-10T10:12:44.833
> 
> 标签：ef-code-first, entity-framework-4.3, entity-framework-migrations

如何解压缩/读取存储在 EF 4.3 Code First Migrations __MigrationHistory 表中的压缩模型？

[我在这条评论](https://stackoverflow.com/questions/10683726/how-are-the-compressed-models-stored-in-the-ef-4-3-code-first-migrations-migra#comment-13987939)中发现了一个提示，我可以使用 zip/gzip 解压缩它，但我不知道我应该如何做到这一点。

问题是我在我的 ef 模型类中改变了一些东西，但是当我调用“add-migration”时，会生成一个空的迁移。我认为这是因为我的模型类的更改已经分配给现有的迁移:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:46:01.710

**（这可能是一个很好的起点 - 不适用于您的情况）**

我认为您可能会发现这很有用-我认为您“**只是**”需要朝相反的方向解决（我只是在这里暗示可能的方向，您必须检查一下，测试自己)...

[http://brice-lambson.blogspot.com/2012/05/using-entity-framework-code-first-with.html](http://brice-lambson.blogspot.com/2012/05/using-entity-framework-code-first-with.html)

它使用以下代码...

```
private byte[] GetModel(TContext context)
{
    using (var memoryStream = new MemoryStream())
    {
        using (var gzipStream = new GZipStream(
            memoryStream,
            CompressionMode.Compress))
        using (var xmlWriter = XmlWriter.Create(
            gzipStream,
            new XmlWriterSettings { Indent = true }))
        {
            EdmxWriter.WriteEdmx(context, xmlWriter);
        }

        return memoryStream.ToArray();
    }
} 
```

序列化模型。

然而，据我所知（如果我理解正确的话）你需要它在另一个方向......

快速搜索没有显示等效项`reader`- 您可以下载最新的[EF6 代码](http://entityframework.codeplex.com/)- 或者还可以找到 EF5 代码（如果需要，我稍后会链接）。

**读者：**

实际上这可能更接近你想要的：

[http://edmxdom.codeplex.com/](http://edmxdom.codeplex.com/)
（我没有尝试过，但从 MS 链接）

[http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/1546548f-9f90-4cc2-b1b2-28cf7e9d1cb5/](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/1546548f-9f90-4cc2-b1b2-28cf7e9d1cb5/)

并检查有关使用的响应`MetadataWorkspace`

如果您需要有关该主题的更多信息，`MetadataWorkspace`我将发布我在该主题上发表的一些帖子。您可以获得大部分信息 - 您需要对`EdmxWriter`正在做的事情进行“反向”排序。

本质上，您正在寻找`entity framework Edmx reader`.

**EdmxDOM：**

我只是快速检查了一下——它似乎正在做你需要的 Edmx 格式管理。
这是一个“VB”项目——但你可以完成它

似乎有一个“读者”（再次，不确定，刚刚经历过这个，正如我对作者的了解 - 但从未与这部分工作过，方向）......

```
Public Sub LoadFile(ByVal fileName As String) 
```

在里面`Edmx.vb`

# ruby-on-rails - 如何将“名称”列添加到创建的 gem divise 表中？

> ID：15922989
> 
> 赞同：-1
> 
> 时间：2013-04-10T10:13:00.523
> 
> 标签：ruby-on-rails

当 gem 'devise' 安装时，他在表单中创建了三个字段用于注册（电子邮件、密码、确认密码）。可以为他的表格添加列“名称”。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:29:38.357

可以在设计用户表中创建表属性，例如：

```
t.string :name 
```

并使用命令迁移和安装所有视图：`rails generate devise:views users` 然后转到设计/注册/新文件添加以下行

```
 <%= f.label :name %>
 <%= f.text_field :name %> 
```

然后在用户注册表或注册表单时显示名称字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:35:56.713

请阅读[Devise wiki](https://github.com/plataformatec/devise/wiki/How-To%3a-Allow-users-to-sign-in-using-their-username-or-email-address)或[查看 railscasts](http://railscasts.com/episodes/210-customizing-devise)

# spring - Spring注解@Controller和@Service一样吗？

> ID：15922991
> 
> 赞同：84
> 
> 时间：2013-04-10T10:13:10.860
> 
> 标签：spring, service, controller

Spring注解是否`@Controller`相同`@Service`？

我知道`@Controller`哪些可以用于`URL`映射和调用业务逻辑。

而`@Service`用于注释包含业务逻辑的服务类。

我可以使用`@Controller`而不是`@Service`注释服务类吗？

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2013-04-10T12:30:16.393

不，它们彼此非常不同。

两者都是**@Component**注释的不同特化（实际上，它们是同一接口的两个不同实现），因此可以通过类路径扫描发现两者（如果您在 XML 配置中声明它）

**@Service**注释用于您的服务层并注释执行服务任务的类，通常您不使用它，但在许多情况下您使用此注释来表示最佳实践。例如，您可以直接调用 DAO 类来将对象持久保存到数据库中，但这很糟糕。调用一个调用 DAO 的服务类是很不错的。这是执行关注点分离模式的一件好事。

**@Controller**注解是 Spring MVC 框架中使用的注解（Spring 框架中用于实现 Web 应用程序的组件）。@Controller 注解表明一个特定的类充当控制器的角色。@Controller 注解充当注解类的构造型，指示其角色。调度程序扫描这些带注释的类以查找映射方法并检测@RequestMapping 注释。

因此，查看 Spring MVC 架构，您有一个 DispatcherServlet 类（您在 XML 配置中声明），它代表一个前端控制器，它将所有 HTTP 请求分派到适当的控制器类（由 @Controller 注释）。此类通过其方法执行业务逻辑（并可以调用服务）。这些类（或其方法）通常也使用**@RequestMapping**注释来指定控制器及其方法处理的 HTTP 请求。

例如：

```
@Controller
@RequestMapping("/appointments")
public class AppointmentsController {

    private final AppointmentBook appointmentBook;

    @Autowired
    public AppointmentsController(AppointmentBook appointmentBook) {
        this.appointmentBook = appointmentBook;
    }

    @RequestMapping(method = RequestMethod.GET)
    public Map<String, Appointment> get() {
        return appointmentBook.getAppointmentsForToday();
    } 
```

这个类是一个控制器。

此类处理向“/appointments”“文件夹”发出的所有 HTTP 请求，特别是 get 方法是为处理向“/appointments”文件夹发出的所有 GET HTTP 请求而调用的方法。

我希望现在对你来说更清楚了。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2016-08-24T10:23:55.250

如果你查看`@Controller`,`@Service`注释的定义，你会发现这些是特殊类型的`@Component`注释。

```
@Component
public @interface Service {
    ….
} 
```

```
@Component
public @interface Controller {
    …
} 
```

* * *

***那么有什么区别呢？***

> **@控制器**

`@Controller`注释表明一个特定的类充当控制器的角色。`@Controller`注释充当被注释类的构造型，指示其角色。

***@Controller 有什么特别之处？***

您不能使用任何其他类似`@Service`或来切换此注释`@Repository`，即使它们看起来相同。调度程序扫描带有注释的类`@Controller`并检测`@RequestMapping`其中的注释。您只能`@RequestMapping`在`@Controller`带注释的类上使用。

* * *

> **@服务**

`@Services`在存储层中保存业务逻辑和调用方法。

***@Service 有什么特别之处？***

除了用来表示它持有业务逻辑的事实之外，这个注解并没有提供明显的特殊性，但谁知道，spring 将来可能会添加一些额外的异常。

链接答案：[Spring 中的 @Component、@Repository 和 @Service 注释有什么区别？](https://stackoverflow.com/a/38549461/2815219)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-10T10:21:00.553

不，`@Controller`与 不同`@Service`，尽管它们都是 的特化`@Component`，使它们都成为通过类路径扫描发现的候选者。`@Service`注释用于您的服务层，用于`@Controller`表示层中的 Spring MVC 控制器。A`@Controller`通常会有一个 URL 映射并由 Web 请求触发。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-07-03T06:51:39.470

@Service 与 @Controller

@Service ：类是“业务服务外观”（在核心 J2EE 模式意义上），或类似的东西。

@Controller ：表示一个带注释的类是一个“控制器”（例如一个网络控制器）。

----------找到关于主要刻板印象的有用注释 [http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/stereotype/Component.html](http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/stereotype/Component.html)

@interface 组件

```
 @Target(value=TYPE)
     @Retention(value=RUNTIME)
     @Documented
    public @interface Component 
```

指示带注释的类是一个组件。在使用基于注释的配置和类路径扫描时，此类类被视为自动检测的候选对象。

## 其他类级别的注释也可以被认为是标识一个组件，通常是一种特殊的组件：例如@Repository 注释或AspectJ 的@Aspect 注释。

**@接口控制器**

```
@Target(value=TYPE)
 @Retention(value=RUNTIME)
 @Documented
 @Component
public @interface Controller 
```

表示一个带注释的类是一个“控制器”（例如一个网络控制器）。

## 这个注解作为@Component 的一个特化，允许通过类路径扫描自动检测实现类。它通常与基于 RequestMapping 注解的注解处理程序方法结合使用。

@***接口服务***

```
@Target(value=TYPE)
 @Retention(value=RUNTIME)
 @Documented
 @Component
public @interface Service 
```

表示带注释的类是“服务”，最初由域驱动设计（Evans，2003）定义为“作为独立于模型中的接口提供的操作，没有封装状态。” 也可能表明一个类是“业务服务外观”（在核心 J2EE 模式意义上），或类似的东西。此注释是通用的刻板印象，各个团队可能会缩小其语义并酌情使用。

## 这个注解作为@Component 的一个特化，允许通过类路径扫描自动检测实现类。

***@interface 存储库***

```
@Target(value=TYPE)
 @Retention(value=RUNTIME)
 @Documented
 @Component
public @interface Repository 
```

表示带注释的类是“存储库”，最初由域驱动设计（Evans，2003）定义为“一种模拟对象集合的封装存储、检索和搜索行为的机制”。实现传统 J2EE 模式（如“数据访问对象”）的团队也可以将此原型应用于 DAO 类，但在这样做之前应注意了解数据访问对象和 DDD 样式存储库之间的区别。此注释是通用的刻板印象，各个团队可能会缩小其语义并酌情使用。

这样注释的类在与 PersistenceExceptionTranslationPostProcessor 结合使用时有资格进行 Spring DataAccessException 转换。注释类也被阐明了它在整个应用程序架构中的作用，用于工具、方面等。

从 Spring 2.5 开始，这个注解也作为 @Component 的一个特化，允许通过类路径扫描自动检测实现类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-03T06:19:16.847

我已经在这里回答了类似的问题[这是链接](https://stackoverflow.com/questions/6827752/whats-the-difference-between-component-repository-service-annotations-in/26174094#26174094)

没有两者是不同的。

@Service 注释用于其他目的，@Controller 用于其他目的。实际上 Spring 的 @Component、@Service、@Repository 和 @Controller 注解用于在 Spring 框架中使用类路径扫描进行自动 bean 检测，但这并不意味着所有功能都是相同的。@Service：表示注解的类是业务层的Service组件。

@Controller：带注解的类表示它是一个控制器组件，主要用于表示层。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-11-20T06:47:58.427

您可以将*@service*声明为*@Controller*。

您**不能将***@Controller*声明为*@Service*

***@服务***

这是常规的。您只是将类声明为组件。

***@控制器***

它比 Component 稍微特别一点。*调度*程序将在此处搜索*@RequestMapping*。因此，使用 @Controller 注释的类将另外被授权声明通过其调用 API 的 URL

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-06-24T04:33:36.663

*   控制器将处理不同视图之间的导航。您的映射请求映射是在控制器的帮助下处理的。
*   服务直接与通常执行业务逻辑的存储库进行交互。您可以在服务层添加，删除，删除等

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-10T10:17:58.757

不，你不能他们是不同的。例如，在部署应用程序时，您的控制器映射将被破坏。

反正你为什么要这样，控制器**不是**服务，反之亦然。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-04-02T01:32:32.010

从春天在行动

> 如你所见，这个类是用@Controller 注解的。就其本身而言，@Controller 并没有做太多事情。其主要目的是将此类标识为组件扫描的组件。因为 HomeController 使用 @Controller 注解，所以 Spring 的组件扫描会自动发现它并在 Spring 应用程序上下文中创建 HomeController 的实例作为 bean。
> 
> 事实上，少数其他注解（包括@Component、@Service 和@Repository）的用途类似于@Controller。您可以使用任何其他注释来有效地注释 HomeController，它仍然可以正常工作。然而，@Controller 的选择更能描述该组件在应用程序中的作用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-10-14T07:11:48.440

两者都是@Component注解的特殊**形式**。@controller 和 @serviec 都共享 @component 注释的相同功能以及它们自己的功能。

@Controller是一个类级别的**注解**，它将类标记为 Web 请求处理程序。进一步的解释可以参考这个网站：[https ://www.baeldung.com/spring-controller-vs-restcontroller](https://www.baeldung.com/spring-controller-vs-restcontroller)

@Service也是一个类级别的注解，它包含一个业务逻辑**。**进一步的解释可以参考这个网站：[https ://www.baeldung.com/spring-component-repository-service](https://www.baeldung.com/spring-component-repository-service)

# c# - 选择分组数据并将其绑定到 listview/gridview 最佳实践

> ID：15922993
> 
> 赞同：1
> 
> 时间：2013-04-10T10:13:17.017
> 
> 标签：c#, asp.net, sql-server-2008, tsql

例如，如果您对数据进行了分组，那么最好的方法是什么：（我已经简单化了这个例子的所有内容）

物品类别表：

```
itemId itemCategoryId itemName
1      1              item1
2      1              item2
3      2              item3
4      1              item4
5      3              item5 
```

和类别表

```
itemCategoryId itemCategory
1              category1
2              category2
3              category3 
```

因此，如果我选择所有项目，我将得到与第一个表相同的结果（可能与 itemCategory ...）

但是当我在 Listview/Gridview 或其他任何东西中绑定所有内容时，我想将项目分组到类别中，所以如果我有与上面相同的数据，我在 Listview/gridview 中的结果......应该如下所示：

```
category1:
  1 item1
  2 item2
  4 item4
category2:
  3 item3
category3:
  5 item5 
```

您认为最好的方法是做到这一点。我正在使用 sql-server 2008 和 Visual Studio 2010 ASP.NET c#。谢谢你的帮助

我不想从适合此类的数据库中获得结果：

```
public class Item
{
    public int itemId { get; set; }
    public string itemName { get; set; }

    public Item() { }

    public Item(int itemId, string itemName) 
    {
        this.itemId = itemId;
        this.itemName = itemName;
    }
}

public class GroupOfitems
{
    public string itemCategory{ get; set; }
    public List<Item> itemList { get; private set; }

    public GroupOfitems()
    {
        itemList = new List<Item>();
    }

    public GroupOfitems(string itemCategory, List<Item> itemList)
    {
        this.itemCategory= itemCategory;
        this.itemList = itemList;
    }
} 
```

所以我可以将上面表格中的数据保存在 GroupOfItems 类中......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:51:21.793

我会推荐使用 ListView，对分组有更多的支持。在您的 SELECT 查询中，您应该按“itemCategory”对行进行分组。有关如何在代码中声明 ListView 的详细信息，[请参阅本教程。](http://msdn.microsoft.com/en-us/library/bb398790%28v=vs.100%29.aspx)

# json - 三.js 更新 json 文件的几何图形

> ID：15922995
> 
> 赞同：0
> 
> 时间：2013-04-10T10:13:19.637
> 
> 标签：json, three.js

我正在做一个项目，但我被困在这件事上，我得到了一个带有动画的 bvh 文件，我在 3dsmax 中将它放在 Biped 上，然后我使用 thee.js json 导出器将每一帧导出到一个 json 文件中，然后当它播放时，我删除旧网格并添加一个新网格。这会导致模型多次上传，这当然不是我想要的。

我使用 jsonloader，我想知道是否有办法只更新每一帧的几何图形？我也制作了这些单独的文件，因为我不使用皮肤，而且我没有变形目标，因为我在 3dsmax 中使用了 bvh 文件。

如果有人可以帮助我，那就太棒了

示例：[http](http://www.deschaatssport.nl/3dsportsvisualiser/versie3/?p=3#) ://www.deschaatssport.nl/3dsportsvisualiser/versie3/?p=3# （按播放按钮）

马蒂斯·詹森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:26:25.333

假设您的 JSON 导出器保持面/顶点的数量和顺序不变，您可以执行以下操作：

*   像现在一样加载初始模型
*   放`geometry.dynamic = true;`
*   使用普通的旧 AJAX 加载其余 JSON 文件（或者，您可以将框架 JSON 文件合并到一个文件中，这样您就可以通过自己的代码访问所有这些文件）
*   对于每一帧，循环新的帧顶点位置数组（在每帧的 JSON 中找到）并覆盖现有几何顶点的坐标 ( `geometry.vertices[i].x = myframevertices[i][0]; etc...`)
*   设置 geometry.verticesNeedUpdate = true; 并渲染框架。

我再次假设每个 JSON 文件具有相同数量和顺序的面/顶点，并且只有顶点位置在每帧中发生变化。我不完全确定它是否像那样工作。

在 Three.js 的 BVH 支持方面也有一些（实验性的？）工作。您可能会成功搜索，但我不知道是否有任何可用的东西。这里的一项相关工作：[https ://github.com/akjava/BVH-Motion-Creator](https://github.com/akjava/BVH-Motion-Creator)

# c - 应用程序在 free() 后打印数组时崩溃

> ID：15922997
> 
> 赞同：0
> 
> 时间：2013-04-10T10:13:25.537
> 
> 标签：c, malloc

为什么在尝试`printf()`之后会崩溃`free()`？

我创建了动态数组。显示的元素。用值填充每个元素。然后使用`free()`. 然后尝试再次显示元素。

这是代码：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int i;
    int *p;

    p = (int *)malloc(10 * sizeof(int));

    for ( i = 0; i < 10; i++ )
        printf("%d  ", p[i]);
    printf("\n");

    for ( i = 0; i < 10; i++ )
        p[i] = i;

    for ( i = 0; i < 10; i++ )
        printf("%d ", p[i]);
    printf("\n");

    free(p);
    p = NULL;

    for ( i = 0; i < 10; i++ )  /* App crashes around here. */
        printf("%d ", p[i]);
    printf("\n");

    return 0;
} 
```

PS我是新来的**C**。

请让我知道有什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T10:14:40.460

因为您引用的内存指向`NULL`.

这实际上是*未定义的行为*，因此它*可能会*起作用，但取消引用`NULL`指针很可能会导致崩溃。

* * *

即使您没有将指针设置为`NULL`它仍然是取消引用未分配内存的未定义行为，尽管它很可能不会崩溃，但这仍然是一件坏事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T10:15:42.910

当你`free`有任何记忆时，它就消失了。你不能再使用它了。

你应该`free`在你完成它之后。

`p`释放指针后，您正在使用它。一旦释放内存，系统就会假定您不需要内存。所以它不会为你保留它。如果内存仍未使用，它可能会工作一段时间。但是在这种情况下，您将分配`NULL`给指针`p`，然后尝试打印那里存在的值，这绝对行不通。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T10:31:38.387

永远要记住的一件事..释放的内存可以返回预期的结果（有时确实如此）。我有时也会遇到这个问题。你可以在这里找到有用的见解：

[可以在其范围之外访问局部变量的内存吗？](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope/6445794#6445794)

现在来到你的代码：

```
free(p); 
```

在这里，您可能会得到您期望的东西..但您不能保证并且不允许使用它。这是未定义的行为。但现在

```
p = NULL; 
```

是使您的程序崩溃的东西。因为指针现在指向 NULL，并且不允许取消引用 NULL 指针。如果您实际上不需要它，请不要指向 NULL。并且永远不要取消引用 NULL 指针。