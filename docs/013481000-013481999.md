# StackOverflow 问答 13481000-13481999

# django - 从另一台计算机访问 apache 上的 django 站点

> ID：13481003
> 
> 赞同：0
> 
> 时间：2012-11-20T19:52:07.060
> 
> 标签：django, apache

我在 apache 服务器上启动并运行了一个 django 项目。我可以在服务器机器上访问和使用该站点。

目前，我将服务器 IP 设置为 192.168.1.6 并打开端口 80。

当我尝试从网络上的另一台机器访问该站点时，而不是该站点，我可以访问文件目录树。我可以看到与站点相关的所有文件（模板和视图等）。

为什么会发生这种情况，而不是 django 和 apache 正常为网站提供服务？

--edit-- 这是我的一些配置设置，顺便说一句，它在 ubuntu 上运行

htmlfive.wsgi

```
import os
import sys
sys.path = ['/var/www/htmlfive'] + sys.path
os.environ['DJANGO_SETTINGS_MODULE'] = 'htmlfive.settings'
import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

/etc/hosts 192.168.1.6 是我遇到问题的网络。

```
127.0.0.1 localhost
127.0.1.1 ubuntu
192.168.1.6 htmlfive.com 
172.17.107.4 htmlfive.com

# The following lines are desirable for IPv6 capable hosts
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
ff02::3 ip6-allhosts 
```

这是 htmlfive.conf

```
<VirtualHost *:80>
WSGIScriptAlias / /home/daryl/htmlfive.wsgi
DocumentRoot /var/www/htmlfive/htmlfive/
ServerName htmlfive.com
Alias /static /var/www/htmlfive/static/

<Directory /var/www/htmlfive/>
Order allow,deny
Allow from all
</Directory>
</VirtualHost> 
```

# javascript - 使用 r.js 和 requirejs 进行优化期间的自定义源处理

> ID：13481009
> 
> 赞同：0
> 
> 时间：2012-11-20T19:52:29.513
> 
> 标签：javascript, node.js, requirejs, r.js

我想知道在合并/优化使用 require.js 的项目期间，是否有任何方法可以自定义 r.js 如何处理 javascript（或其他）文件的源代码。

我需要应用一些自定义转换，例如处理一些类似 java 的注释。

我正在寻找类似于使用 b.use() 的 browserify 可能实现的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T00:34:53.410

找到了解决方案。实际上是否可以使用“onBuildWrite”配置参数，并指定在每个模块序列化之前执行的回调。就像是：

```
var config = {
  baseUrl: 'src',
  onBuildWrite: function( name, path, contents ) {
    //Additional processing
    return contents;
  },
  modules: [{ 
    name: 'main' 
  }],
};
requirejs.optimize( config, function(results) {}); 
```

# c++ - 无法实例化类

> ID：13481011
> 
> 赞同：4
> 
> 时间：2012-11-20T19:52:48.583
> 
> 标签：c++, class, instantiation

我看不出我在这里做错了什么。我不会展示我的 main 函数的完整创建，因为我认为这无关紧要。

我的问题与我创建的这个类有关：

```
class employee
{
    //create private variables for divider
    string firstName;
    string lastName;
    char gender;
    int dependants;
    double annualSalary;
    static int numEmployees;

public:

    Benefit1 benefit;

    employee()
    {
        //create default values for varaibles
        firstName = "not given";
        lastName = "not given";
        gender = 'U';
        dependants = 0;
        annualSalary = 2000;
    }

    employee(string first, string last, char gen, int dep, double salary, Benefit1 ben)
    {
        //allow input
        firstName = first;
        lastName = last;
        gender = gen;
        dependants = dep;
        annualSalary = salary;
        benefit = ben;
    }
} 
```

（是的，Benefit1 在课堂上被正确调用。）当我尝试将其实例化为 employee2 时，我的问题就出现了：

```
employee employee2("Mary", "Noia", 'F', "5", 24000.0, benefit1); 
```

出于某种原因，我的程序不允许我将任何东西放在单词“Mary”所在的第一个实例中。正如您所看到的，第一个实例应该首先是字符串，那么为什么不让使用任何东西呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T19:54:41.237

问题出在第五个参数上 - 它期待 an`int`并且您正在绕过它`"5"`。尝试：

```
employee employee2("Mary", "Noia", 'F', 5, 24000.0, benefit1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T19:55:22.560

您传递的第四个参数必须是`int`：-

```
employee employee2("Mary", "Noia", 'F', 5, 24000.0, benefit1); 
```

# oracle - Oracle XML DB 和 Java Persistence API

> ID：13481014
> 
> 赞同：2
> 
> 时间：2012-11-20T19:53:07.967
> 
> 标签：oracle, jpa, persistence, relational-database

我偶然发现了 Oracles XML DB 功能，但到目前为止，从我的阅读中我只看到了 JDBC 实现的示例。

这是示例之一：

```
import oracle.xdb.XMLType;
...
PreparedStatement stmt =  conn.prepareStatement(
  "SELECT e.poDoc FROM po_xml_tab e" ); 
ResultSet rset = stmt.executeQuery(); 

while( rset.next() ) { 
    // get the XMLType 
    XMLType poxml = ( XMLType )rset.getObject( 1 ); 
    // get the XML as a string...
    String poString = poxml.getStringVal();
} 
```

根据官方[xml db 开发人员指南](http://docs.oracle.com/cd/E11882_01/appdev.112/e23094/xdb01int.htm#ADXDB0120)，可以选择以对象关系（结构化）格式存储数据。这让我认为 XML DB 和 JPA 之间应该有一个几乎无缝的链接。也许我错过了一些东西，或者它只是不存在？

他们可以一起工作吗？除了 JDBC 还有其他选择吗？或者我可以只为查询做 JPA，为 XML 做 JDBC？

**编辑：** Oracle XML DB 甚至值得使用吗？因为它看起来不像有人使用它（根据迄今为止的观点和回应）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:21:44.480

您可以使用 JPA 中的 Oracle XDB 功能。如果您有一个 XMLType 列，您可以使用 @Basic 映射到字符串将其映射到 JPA 实体。

在 EclipseLink 中，您可以使用 Converter 将其映射到另一种数据类型，或使用 DirectToXMLTypeMapping 映射 DOM。

如果要将 XML 映射到对象，可以使用使用 JAXB 的转换器。

# jquery - 不要再次加载当前内容

> ID：13481015
> 
> 赞同：2
> 
> 时间：2012-11-20T19:53:10.110
> 
> 标签：jquery

我在主页中加载外部内容。一切正常。但我有一个问题。如果我单击当前链接，则内容也在加载。但我希望内容只有在它是另一个内容时才会加载。

```
$(document).ready(function() {
    $(".navigation li").click(function() {
        var quelle = $(this).attr('id') + ".php";
        // content
        $(".content").fadeOut(function() {
            $(this).load("content/" + quelle).fadeIn('normal');
        })

        // advertisement
        $(".advertisement").fadeOut(function() {
            $(this).load("advertisement/" + quelle).fadeIn('normal');
        })

        // header
        $(".contentHeader").fadeOut(function() {
            $(this).load("header/" + quelle).fadeIn('normal');
        })

    });
}); 
```

这是HTML。是的......我忘记了点击事件处理程序;）

```
<div class="container">

    <div class="navigation">

        <ul>
            <li id="1">
                <div class="menuImage"></div>
                <div class="menuText"><p>1</p></div>
            </li>
            <li id="2">
                <div class="menuImage"></div>
                <div class="menuText"><p>2</p></div>
            </li>
            <li id="3">
                <div class="menuImage"></div>
                <div class="menuText"><p>3</p></div>
            </li>
            <li id="4">
                <div class="menuImage"></div>
                <div class="menuText"><p>4</p></div>
            </li>
            <li id="5">
                <div class="menuImage"></div>
                <div class="menuText"><p>5</p></div>
            </li>
            <li id="6">
                <div class="menuImage"></div>
                <div class="menuText"><p>6</p></div>
            </li>
        </ul>

    </div>

    <div class="mainContainer">

        <div class="containerHeader">

            <div class="contentHeader">
                <p>old header</p>
            </div>

        </div>

        <div class="contentContainer">

            <div class="content">
                <p>old content</p>
            </div>

            <div class="advertisement">
                <p>old advertisement</p>
            </div>

        </div>

    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:55:24.240

您可以像这样保存当前 ID：

```
$(document).ready(function() {
    var current;
    $(".navigation li").click(function() {
        var quelle = $(this).attr('id') + ".php";
        if(current === quelle) {
            return;
        }

        current = quelle;
        // content
        $(".content").fadeOut(function() {
            $(this).load("content/" + quelle).fadeIn('normal');
        })

        // advertisement
        $(".advertisement").fadeOut(function() {
            $(this).load("advertisement/" + quelle).fadeIn('normal');
        })

        // header
        $(".contentHeader").fadeOut(function() {
            $(this).load("header/" + quelle).fadeIn('normal');
        })

    });
}); 
```

# xpages - 使用 java.net.URL 在 SSJC 中发送 GET 请求

> ID：13481016
> 
> 赞同：1
> 
> 时间：2012-11-20T19:53:11.430
> 
> 标签：xpages, xpages-ssjs

我在 xpage (xagent) 中的 afterRenderReponse 事件中有代码，用于建立与 Domino 数据服务的连接并将结果 (json) 返回到作用域变量。

对包含 xpage 的数据库的匿名访问是无访问权限，因此用户必须登录。

问题是在代码中调用 url.openConnection() 时，会返回登录表单。这意味着即使请求的 url 与调用它的 xpage 位于同一服务器/域中，我也必须再次进行身份验证。

我知道我可以使用基本身份验证进行身份验证： conn.setRequestProperty("Authorization", "Basic " + authStringEnc) ，但是我必须知道用户名和密码 + base64 对此进行编码。

我的问题是：由于用户已经通过身份验证，是否可以将这些凭据“传递”给 java.net.HttpURLConnection 对象？是否有可能获得 ltpatoken cookie 的句柄并提供它？还有什么办法吗？

```
 <?xml version="1.0" encoding="UTF-8"?>
    <xp:view xmlns:xp="http://www.ibm.com/xsp/core" rendered="false">

        <xp:this.afterRenderResponse><![CDATA[#{javascript:// Establish connection with Domino database collection resource

try{
    var url = new java.net.URL("http://server/mydb.nsf/api/data");

    var conn:java.net.HttpURLConnection = url.openConnection();

    conn.setRequestProperty("Accept", "application/json");

    if (conn.getResponseCode() == "200") {

        // Get the response

        var reader = new java.io.BufferedReader(new java.io.InputStreamReader(conn.getInputStream()));

        var buffer = new java.lang.StringBuffer();

        var line = "";

        while ((line = reader.readLine()) != null) {

            buffer.append(line);

        }

        reader.close();

        // Create array from response

        var jsonarray = eval('(' + buffer + ')');

        // Get filenames and titles from Domino database collection resource

        // On XPage, requestScope.status is bound to a multi-line text control

        for (var i = 0; i < jsonarray.length; i++) {

            requestScope.status += jsonarray [i].@filepath + " - " + jsonarray [i].@title + "\n";

        }

    } else { // if connection fails

        requestScope.status = conn.getResponseCode() + " " + conn.getResponseMessage();

    }  
    } catch(e){
  _dump(e);
}
    }]]></xp:this.afterRenderResponse>
    </xp:view> 
```

任何信息将不胜感激！谢谢 ！

最好的问候，Petter Kjeilen

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T08:25:31.137

如果用户已通过身份验证并且您在服务器上使用会话身份验证，则可以从用户读取会话 cookie 并将相同的 cookie 与后续 (GET) 请求一起传递。

根据 Domino 服务器上会话认证的配置方式，您正在寻找**DomAuthSessionId**或**LTPAToken** cookie。查看[此](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)页面上的答案以获取有关如何读取 cookie 并将它们与其他请求一起发送的示例（“维护会话”部分）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T04:53:23.760

不要使用 HTTP URL 连接！太头疼了。使用 Apache HTTP 客户端。这些类位于 Domino 服务器上。[以此](https://www.wissel.net/blog/downloads/2010/HTTPReader.java)为参考点如何使用它。

# ios6 - 使用 AFNetworking 流式传输视频并缓存视频以进行播放

> ID：13481020
> 
> 赞同：6
> 
> 时间：2012-11-20T19:53:18.590
> 
> 标签：ios6, video-streaming, afnetworking

所以我试图让我的应用程序流式传输位于 Amazon S3 上的视频。到目前为止，我可以使用 Apple 的 MediaPlayer 教程做到这一点没问题：[https ://developer.apple.com/library/ios/#samplecode/MoviePlayer_iPhone/Introduction/Intro.html](https://developer.apple.com/library/ios/#samplecode/MoviePlayer_iPhone/Introduction/Intro.html)

但是，我在我的应用程序中使用了 RestKit，因此也使用了 AFNetworking。我看到 AFNetworking 正在使用缓存，所以我想知道是否可以对视频做同样的事情？我不知道如何使用 AFNetworking 流式传输视频。所以这将是一个好的开始。我可以使用 AFNetworking 下载电影...但是我可以使用它进行流式传输还是只使用#import 提供的流式传输系统

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"https://s3.amazonaws.com/leclerc/videos/sop/IMG_0141.MOV"]];
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *path = [[paths objectAtIndex:0] stringByAppendingPathComponent:@"IMG_0141.MOV"];
operation.outputStream = [NSOutputStream outputStreamToFileAtPath:path append:NO];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSLog(@"Successfully downloaded file to %@", path);
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"Error: %@", error);
}];

[operation start]; 
```

例如，如果我在 Vevo 上观看音乐片段，然后在 5 分钟后重新观看，我是否必须在 iPad 上重新下载？！这对我来说是全新的，很抱歉我的无知！

# php - 用 1 更新一列用 2 更新它

> ID：13481024
> 
> 赞同：0
> 
> 时间：2012-11-20T19:53:34.080
> 
> 标签：php, mysql

我有点困惑。我有一个带有某种用户配置文件的网站。当访问者点击用户页面时，我想按日期和用户 ID 更新查看次数。但是，无论我做什么，观看次数都会更新为 2 而不是 1。我为在页面请求期间执行的所有查询创建了一个查询输出。更新查询是正确的，在页面请求期间只执行了 1 个更新查询。

这是我的数据结构：

```
CREATE TABLE `ProfileView` (
  `Id` int(8) NOT NULL auto_increment,
  `UserId` int(8) NOT NULL,
  `Date` date NOT NULL,
  `Views` int(8) NOT NULL,
  PRIMARY KEY  (`Id`),
  KEY `UserId` (`UserId`,`Date`)
) ENGINE=MyISAM AUTO_INCREMENT=10 DEFAULT CHARSET=latin1; 
```

无论我做什么，“视图”列总是更新 2 而不是 1。

正在执行的逻辑（从控制器调用，控制器从视图调用。装饰器基本上是一个密封的标准类，提供严格的编码指导，因为拼写错误的属性会导致 PropertyDoesntExistException）：

工作流程：

```
# user-details.php
$oControllerProfileView = new Controller_ProfileView();
$oControllerProfileView->Replace($iUserId);

---    

# Controller.ProfileView.php
public function Replace($iUserId) {
  // validation
  Model_ProfileView::Replace($iUserId, date('Y-m-d'));
}

---

# Model.ProfileView.php
static public function Replace($iUserId, $sDate) {

    $oData = MySQL::SelectOne("
        SELECT  Views
        FROM    ProfileView
        WHERE   UserId = ".$iUserId."
        AND     Date = '".$sDate."'");

    if(is_a($oData, 'Decorator')) {

        MySQL::Query("
            UPDATE  ProfileView
            SET     `Views` = ".($oData->Views + 1)."
            WHERE   UserId = ".$iUserId."
            AND     Date = '".$sDate."'");  
    } else {

        MySQL::Query("
            INSERT INTO ProfileView
            VALUES  (
                NULL,
                ".$iUserId.",
                '".$sDate."',
                1
            )");
    }
} 
```

# android - 我想下载 XML 文件进行解析？

> ID：13481027
> 
> 赞同：-1
> 
> 时间：2012-11-20T19:53:41.383
> 
> 标签：android, xml-parsing

我正在使用以下代码下载文件形式的接受源

```
 private InputStream downloadUrl(String urlString) throws IOException {
    URL url = new URL(urlString);
    HttpURLConnection conn = (HttpURLConnection) url.openConnection();
    conn.setReadTimeout(10000 /* milliseconds */);
    conn.setConnectTimeout(15000 /* milliseconds */);
    conn.setRequestMethod("GET");
    conn.setDoInput(true);
    // Starts the query  
    Log.v("Start Query", "Stream");
    conn.connect();
    Log.v("End Query", "Stream");
    InputStream stream = conn.getInputStream();    
    Log.v(stream.toString(), "Stream");
    return stream;
} 
```

我在日志中有以下错误

11-09 12:39:59.386：D/SntpClient(73)：请求时间失败：java.net.SocketException：协议不支持地址族

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:25:55.140

尝试以下操作：

```
 URL url = new URL(urlString);
      HttpURLConnection conn = (HttpURLConnection)url.openConnection();
      conn.setRequestMethod("GET");
      conn.setDoInput(true);
      conn.setReadTimeout(10000);
      conn.setConnectTimeout(15000);

      Log.v("Start Query", "Stream");          
      conn.connect();
      Log.v("End Query", "Stream");
      //read the result from the server
      BufferedReader rdr  = new BufferedReader(new InputStreamReader(conn.getInputStream()));
      StringBuilder sbr = new StringBuilder();

      while ((line = rdr.readLine()) != null)
      {
          sbr.append(line + '\n');
      }

      Log.v(sbr.toString(), "Stream"); 
```

# xml - 使用 XSLT，当 for 循环内的模板调用返回搜索元素时，如何将此 if-test 与数组一起使用？

> ID：13481031
> 
> 赞同：1
> 
> 时间：2012-11-20T19:53:49.687
> 
> 标签：xml, xslt, if-statement, for-loop, xsl-choose

我认为这个简单的例子可能会更清楚地提出这个问题。

我有一个包含多个产品的输入文件。有不同类型的产品（对于这个例子来说，有 2 个产品 ID 的 2 种类型就足够了），但输入会有更多。

我只想输出在 for each Product 循环中遇到的每种类型的第一个产品的信息。（我正在输出价格最低的产品的信息，所以第一个将是最低价格，因为我首先按价格排序。）

所以我想读取每个产品，但如果我还没有输出具有相同 ID 的产品，则只输出产品的信息。我有一个 IDArray 的变量，我想检查 for each product 循环中的每个产品是否有一个已经在该 IDArray 中的 ID - 如果没有，请继续，如果它已经在数组中，则跳过所有内容并循环到下一个。

我不知道如何让子元素成为 IDArray 中的一个节点，其中每个 CurrentID 的值。它不断将该值作为节点添加到 CurrentID，该节点仅在每个产品的范围内，而不是整个产品组。我知道下面的代码不起作用，但它说明了这个想法并给了我一个开始的地方：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output method="xml" encoding="UTF-8" indent="yes" cdata-section-elements="prod_name adv_notes"/>
  <xsl:template match="/">
  <List>
     <xsl:for-each select="ProductGroup">
     <xsl:sort select="Product/Rate"/>
     <xsl:variable name="IDarray">
     <xsl:for-each select="Product">
        <xsl:variable name="CurrentID">
           <xsl:call-template name="processID">
              <xsl:with-param name="ProductCode" select="ProductCode" />
            </xsl:call-template>
        </xsl:variable>
        <xsl:if test="not(contains($IDarray, $CurrentID))">
           <child elem="{@elem}">
             <xsl:select value-of="$CurrentID" />
           </child>
          <Product>
           <xsl:attribute name="ID">
             <xsl:select value-of="$CurrentID" />
           </xsl:attribute>
        <prod_name>
           <xsl:value-of select="ProductName"/>
        </prod_name>
        <rate>
           <xsl:value-of select="Rate"/>
        </rate>
    </Product>
    </xsl:if>
    </xsl:for-each>
    </xsl:variable>
    </xsl:for-each>
  </List>
</xsl:template>

<xsl:template name="processID">
 <xsl:param name="ProductCode"/>
 <xsl:choose>
   <xsl:when test="starts-with($ProductCode, '515')">5</xsl:when>
   <xsl:when test="starts-with($ProductCode, '205')">2</xsl:when>
 </xsl:choose>
</xsl:template> 
```

提前非常感谢，我知道这里有一些很棒的程序员可以提供帮助！:) -冬青

输入看起来像这样：

```
 <ProductGroup>
  <Product>
    <ProductCode>
       5155
    </ProductCode>
    <ProductName>
       House
    </ProductName>
    <Rate>
       3.99
    </Rate>
    </Product>
    <Product>
    <ProductCode>
       5158
    </ProductCode>
    <ProductName>
       House
    </ProductName>
    <Rate>
       4.99
    </Rate>
    </Product>
   </ProductGroup>
        <ProductGroup>
  <Product>
    <ProductCode>
       2058
    </ProductCode>
    <ProductName>
       House
    </ProductName>
    <Rate>
       2.99
    </Rate>
    </Product>
    <Product>
    <ProductCode>
       2055
    </ProductCode>
    <ProductName>
       House
    </ProductName>
    <Rate>
       7.99
    </Rate>
    </Product>
   </ProductGroup> 
```

仅对于那个简单的输入文件，输出将是这样的：

![在此处输入图像描述](../Images/a6a5d10309efaf728d23758a112540c3.png)

在这里实现 Muenchian 分组很困难，因为我的实际数据集很大。我很容易问一个问题。如果我能让那个数组方法正常工作，那么我庞大的项目的其余部分就可以工作了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T21:00:11.540

> 当 for 循环内的模板调用返回搜索元素时，如何将此 if-test 与数组一起使用？

**更新**：您使用的是 XSLT 1.0，因此创建数组的唯一选择是使用扩展，这可能会也可能不会，具体取决于您的环境（有关更多信息，请参阅 [此问题](https://stackoverflow.com/questions/6040841/handling-array-like-variable-with-xslt/)）。我猜这与键相比会很复杂并且效率不高。

一个更好的问题是

> 我有一个包含多个产品的输入文件。有 10 种产品（10 个产品 ID），但输入将有 200 个产品，我只想输出每种类型的第一个产品的信息。

以下是如何实现这一目标的示例。我宁愿使用您的输入和所需的输出，但不幸的是没有提供它们。

**输入**

```
<?xml version="1.0" encoding="utf-8"?>
<ProductGroup>
  <Product ID="Product 1" Type="A"/>
  <Product ID="Product 2" Type="B"/>
  <Product ID="Product 3" Type="C"/>
  <Product ID="Product 4" Type="A"/>
  <Product ID="Product 5" Type="B"/>
  <Product ID="Product 6" Type="C"/>
  <Product ID="Product 7" Type="A"/>
  <Product ID="Product 8" Type="B"/>
  <Product ID="Product 9" Type="C"/>
</ProductGroup> 
```

**XSLT**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:key name="Product-by-Type" match="Product" use="@Type" />
  <xsl:template match="/ProductGroup">
    <Products>
      <xsl:for-each select="Product[count(. | key('Product-by-Type', @Type)[1]) = 1]">
        <xsl:sort select="@Type" />
        <xsl:copy-of select="key('Product-by-Type', @Type)[1]" />
      </xsl:for-each>
    </Products>
  </xsl:template>
</xsl:stylesheet> 
```

**输出**

```
<?xml version="1.0" encoding="utf-8"?>
<Products>
  <Product ID="Product 1" Type="A" />
  <Product ID="Product 2" Type="B" />
  <Product ID="Product 3" Type="C" />
</Products> 
```

[这篇文章](http://www.jenitennison.com/xslt/grouping/muenchian.html)很好地解释了 Muenchian 分组的工作原理。

**更新**

非常感谢您对更多信息的帮助。以下是我从您的输入到输出的方法：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:key name="Product-by-ProductCode" match="Product" use="concat(normalize-space(../../preceding-sibling::Purpose[1]), substring(normalize-space(ProductCode), 1, 3))" />
  <xsl:template match="/List">
    <List>
      <xsl:for-each select="ProductGroup/ActiveProducts/Product[count(. | key('Product-by-ProductCode', concat(normalize-space(../../preceding-sibling::Purpose[1]), substring(normalize-space(ProductCode), 1, 3)))[1]) = 1]">
        <xsl:sort select="Rate" />
        <xsl:element name="Product">
          <xsl:attribute name="ID">
            <xsl:choose>
              <xsl:when test="concat(normalize-space(../../preceding-sibling::Purpose[1]), substring(normalize-space(ProductCode), 1, 3)) = 'Purchase515'">5</xsl:when>
              <xsl:when test="concat(normalize-space(../../preceding-sibling::Purpose[1]), substring(normalize-space(ProductCode), 1, 3)) = 'Rent205'">2</xsl:when>
              <xsl:otherwise>0</xsl:otherwise>
            </xsl:choose>
          </xsl:attribute>
          <xsl:element name="prod_name">
            <xsl:value-of select="key('Product-by-ProductCode', concat(normalize-space(../../preceding-sibling::Purpose[1]), substring(normalize-space(ProductCode), 1, 3)))[1]/ProductName"/>
          </xsl:element>
          <xsl:element name="rate">
            <xsl:value-of select="key('Product-by-ProductCode', concat(normalize-space(../../preceding-sibling::Purpose[1]), substring(normalize-space(ProductCode), 1, 3)))[1]/Rate"/>
          </xsl:element>
        </xsl:element>
      </xsl:for-each>
    </List>
  </xsl:template>
</xsl:stylesheet> 
```

该方法与我之前的示例相同，除了键是`Purpose`and的串联`ProductCode`。您的输入可能存在问题，我`<Purpose>Rent</Purpose>`在第二个产品组之前缺少东西。

# c# - 使用 C# 64 位的 Axis Camera 视频流

> ID：13481034
> 
> 赞同：2
> 
> 时间：2012-11-20T19:53:56.077
> 
> 标签：c#, wpf, directshow, rtsp, ms-media-foundation

我正在寻找一种方法来从 AXIS M10 IP 摄像机流式传输视频，并使用 Windows 窗体（或更好的 wpf）显示提要。但是，它需要在***64 位***平台上运行。

这意味着我不能使用 AXIS Media Control ActiveX 组件。此外，我发现这些方法有效，但仅在 32 位环境中有效：

1.[使用 WPF 的 MediaElement 类](http://msdn.microsoft.com/en-us/library/system.windows.controls.mediaelement.aspx)

2.[使用嵌入式媒体播放器](http://msdn.microsoft.com/en-us/library/windows/desktop/dd562851%28v=vs.85%29.aspx)

3.VlcLib（[用于dotnet](http://vlcdotnet.codeplex.com/)）

到目前为止，看起来我唯一的选择是直接实现 RTSP 协议并使用 Media Foundation（用于 .net）解码给定的 RTP/AVP 流并以某种方式显示它。（我能够使用 RTSP 调用让相机流式传输到 UDP 端口）。

我对 RTSP/流媒体还很陌生，所以我担心我可能会错过大局 - 我是否能够使用媒体基础在 winform/wpf 上渲染/显示视频，或者我必须看看那个其他功能？（根据我的研究，它看起来可以解码 H.264 流，但我没有看到任何视频播放功能）。我还遇到了 DirectShow - 我应该使用 DirectShow 而不是 Media Foundation 吗？

或者更好的是，是否有能够处理以 64 位运行的 RTSP 流的库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T20:49:25.300

[例如VisioForge Video Capture SDK .Net](http://visioforge.com/video-capture-sdk-net2.html)（但商业），包括 WPF 控件。使用 FFMPEG 解码，带有 DirectShow 引擎。真的，我在这里看不到任何媒体基金会的优势。

还有任何其他使用 FFMPEG 的方式。

或者，您可以编写 RTSP 源过滤器（基于 DirectShow Push Source 示例），其中 H264 输出引脚用于视频，G726/G711/AAC 用于音频。您也可以制作虚拟视频捕获源过滤器并在 MF 或 DirectShow 中使用它。您可以使用[live555](http://www.live555.com/)库来实现 RTSP。

所以，如果你从零开始，这里没有简单的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T01:04:29.750

如果您只需要视频，我宁愿只显示相机的 MJPEG 流。这很容易做到，没有 DirectShow 或 MediaFoundation 的复杂性。我使用 WPF 中的这个小库在我的应用程序中同时显示 12 个摄像头：[MJPEG Decoder](http://channel9.msdn.com/coding4fun/articles/MJPEG-Decoder)。您也可以在 WinForms 中使用它。它解码 MJPEG 流并为您提供要显示的图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-31T07:34:05.147

64 位 Axis Media Control SDK 现在可用，但需要在 Axis 网站上下载一个帐户。

登录后，您需要加入[Axis Developper 程序](https://open.spotify.com/track/023H4I7HJnxRqsc9cqeFKV)（免费）并下载[AMC SDK](https://www.axis.com/developer-community/media-control-sdk)。

您将安装一个可执行文件 (.exe)，这将安装驱动器中的所有库和示例

> C:\Program Files\Axis Communication\SDK

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-26T18:42:53.917

我找到了一种在没有 ActiveX DLL 的情况下在 64 位中使用 VLC 的方法：

VLCSharp[库](https://code.videolan.org/videolan/LibVLCSharp)由多个 NuGet 组成，可在多个平台（WPF、Winforms、Xamarion、TvOS）上使用 VLC Player。

它在 Onvif 相机上运行良好

# asp.net-web-api - API认证

> ID：13481036
> 
> 赞同：1
> 
> 时间：2012-11-20T19:53:57.667
> 
> 标签：asp.net-web-api, oauth-2.0

我的任务是构建一个新的 API。该 API 将主要由平板电脑应用程序使用。我正在考虑使用新的 ASP WebApi。然而，我最担心的是安全部分。因为这些应用程序将由第三方公司构建，我们不希望在他们的应用程序中输入用户凭据，而是重定向到我们的站点（身份验证服务器）。我做了一些研究，发现了 OAuth 2.0。对于使用移动设备和平板电脑，最好使用“自动代码流”原则——如果我错了，请纠正我——。

我的想法是正确的，还是他们更简单的身份验证系统可以实现我的目标？他们是否有任何可用的框架（.NET）（或文档）如何创建身份验证服务器以及如何在 Asp webapi 中使用它？现在在 IOS 应用中实现 oauth2.0 容易吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T16:29:31.327

当客户端应用程序是 Web 应用程序时，基于 OAuth 2.0 authz 代码的授权适用。将由第三方构建的应用程序都将是 Web 应用程序吗？该流程涉及 HTTP 重定向。

在 OAuth 2.0 中，有一个客户端、一个资源服务器（在您的情况下为 Web API）和一个授权服务器。没有身份验证服务器之类的东西。你指的是别的东西吗？

# php - XML 到 PHP 的转换

> ID：13481039
> 
> 赞同：0
> 
> 时间：2012-11-20T19:54:16.043
> 
> 标签：php, xml

我有下面的xml代码：

```
<?xml version="1.0" encoding="UTF-8"?>

<santamaster>

<paths>
<thename >Agamemnonas</thename>
<soundpath startAt="0">sounds/namesounds/agamemnonas.mp3</soundpath>
<theage startAt="5000">sounds/ages/5.mp3</theage>
<theplace startAt="10000">sounds/places/ipiros.mp3</theplace>
<everyday startAt="15000">sounds/everyday/bravekid.mp3</everyday>
<youwill startAt="20000">sounds/youwill/listeryourparents.mp3</youwill>
<pic1 startAt="0">images/pic1.jpg</pic1>
<pic2 startAt="5000">images/pic2.jpg</pic2>
<pic3 startAt="10000">images/pic3.jpg</pic3>
<videofile>myvideo.mp4</videofile>
</paths>

</santamaster> 
```

我正在尝试通过 php 文件和一些变量来回显此代码：

```
<?php
session_start();
header('Content-type: text/xml');
echo '<?xml version="1.0" encoding="utf-8"?>';
echo'
<santamaster>

<paths>
<thename >Irene</thename>
<soundpath startAt="0">"'.$_SESSION['audiolink'].'"</soundpath>
<theage startAt="5000">"'.$_SESSION['age'].'"</theage>
<theplace startAt="10000">"'.$_SESSION['thelocation'].'"</theplace>
<everyday startAt="15000">"'.$_SESSION['dailylife'].'"</everyday>
<youwill startAt="20000">"'.$_SESSION['YOU_WILL'].'"</youwill>
<pic1 startAt="0">"'.$_SESSION['pimagepath'].'"</pic1>
<pic2 startAt="5000">"'.$_SESSION['eoneimagepath'].'"</pic2>
<pic3 startAt="10000">"'.$_SESSION['etwoimagepath'].'"</pic3>
<videofile>santavideo/sample.mp4</videofile>
</paths>

</santamaster>';

?> 
```

但是什么也没发生。。

![在此处输入图像描述](../Images/27a02b0762345de81f63b9d69f40dbfa.png)

通过会话加载xml中的变量很重要，会话变量正在工作..我需要它来将它加载到flash电影中！

谢谢你们！

# c# - 将 Excel RangeSelection 复制到 Windows 应用程序中的数组

> ID：13481041
> 
> 赞同：2
> 
> 时间：2012-11-20T19:54:23.550
> 
> 标签：c#, excel, clipboard, copy-paste, spreadsheetgear

提前感谢您的帮助:)

**上下文** 我在我的 Windows 应用程序中使用 SpreadsheetGear，在某些情况下，用户希望从打开的 Excel 应用程序中复制数据并将二维网格粘贴到我的应用程序中的 SpreadsheetGear 对象中。

**动机** 我试图从剪贴板中的数据中获取信息，以准备粘贴。需要在粘贴之前确定传入数据的行数和列数，以便页面上的 SpreadsheetGear 控件和其他控件为数据“准备好”。

**问题 1** 如何从剪贴板中获取此类数据？我正在使用

```
System.Windows.Forms.Clipboard.GetData(...) 
```

但我不确定是否应该将 DataFormat 指示为 CommaSeparatedValue (CSV) 或 Text。一种方法或另一种方法效果最好吗？是否有另一种我忽略的 DataFormat 可以帮助我？

**问题2** 我在Visual Studio 2012的即时窗口中使用了这个语句：

```
System.Diagnostics.Debug.WriteLine(Clipboard.GetText()) 
```

有趣的是，这返回了我在 Excel 中选择和复制的部分数据。剪贴板可以从 Excel 处理的数据量是否有限制？或者有没有办法让我的 Windows 应用程序帮助在剪贴板上分配更多空间，知道用户正在从 Excel 中选择数据并将该数据复制到剪贴板？

请让我知道我是否可以提供更多说明。我有点迷茫，不确定这个问题的范围。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T17:46:18.007

这最终为我工作：

```
try
{
    var data = Clipboard.GetDataObject();
    var stream = (System.IO.Stream)data.GetData(DataFormats.CommaSeparatedValue);
    var enc = new System.Text.UTF8Encoding();
    var reader = new System.IO.StreamReader(stream, enc);
    string data_csv = reader.ReadToEnd();
    string[] data_csv_array = data_csv.Split(new string[] { "\r\n" }, StringSplitOptions.RemoveEmptyEntries);
    ...
}
catch (Exception e)
{
    ErrorHandling.ShowError("There is no data on the Clipboard to paste.");=
} 
```

“...”表示一旦我以数组形式获得数据，我就会对数据做一些非常特别的事情。我想做的是展示我的解决方案中可以帮助有类似需求的人的部分。

# java - 使用 Spring 配置 SOAP 处理程序

> ID：13481051
> 
> 赞同：1
> 
> 时间：2012-11-20T19:55:01.857
> 
> 标签：java, web-services, spring, soap, soaphandler

我有一个自定义 SOAP 处理程序，用于对 SOAP 消息进行架构验证。它适用于网络服务，我希望能够将它用于其他人。验证本身的代码非常通用——唯一真正的输入是用于验证的模式名称。我对如何/是否可以使用 Spring 为不同的服务配置 SOAP 处理程序的不同实例感到困惑。

Web 服务声明为：

```
@WebService(name = "MyService", ...)
@SOAPBinding(parameterStyle = SOAPBinding.ParameterStyle.BARE)
@HandlerChain(file="handler-chain.xml")
public interface MyService
{
   ....
} 
```

该`handler-chain.xml`文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<handler-chains xmlns="http://java.sun.com/xml/ns/javaee">
  <handler-chain>
    <handler>
      <handler-name>com.ws.MyCustomSoapHandler</handler-name>
      <handler-class>com.ws.MyCustomSoapHandler</handler-class>
    </handler>
  </handler-chain>
</handler-chains> 
```

在自定义 SOAP 处理程序中，我有这个：

```
public class MyCustomSoapHandler implements SOAPHandler<SOAPMessageContext>
{
    //assume getter/setter for this.
    private String schemaLocation = "schema/validation/service1.xsd";
    @Override
    public boolean handleMessage(SOAPMessageContext context)
    {
        ...
        //This is the only place where the schema needs to vary
        schema = schemaFactory.newSchema(this.getClass().getClassLoader().getResource(schemaLocation)); 
```

我知道我可以使用 Spring 创建多个基于 的 bean`MyCustomSoapHandler`并为其赋予不同的值`schemaLocation`，但是如何将这些 bean 连接到我的应用程序中的正确 Web 服务？它会通过`handler-chain.xml`吗？还是我必须以编程方式进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:06:19.337

看起来这是不可能的（或者如果是的话，我似乎无法让它工作），因为 SOAP 处理程序是由 WebSphere 容器创建的，它们不是由 Spring 管理的。所以我只是创建了一个包含大部分逻辑的抽象处理程序，并使用一个 .properties 文件来配置更具体到不同处理程序的细节。

# python - 为什么 self 不用于类方法之外的类变量？

> ID：13481054
> 
> 赞同：2
> 
> 时间：2012-11-20T19:55:04.450
> 
> 标签：python, class, variables

> **可能重复：**
> [Python 'self' 解释](https://stackoverflow.com/questions/2709821/python-self-explained)

我是编程和python的新手。我理解`self`在类方法中使用和声明类变量，但是，我的问题是：为什么不`self`用于在类方法之外声明变量？ .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T20:03:49.243

`self`不用于在任何地方声明变量。`self`是方法的第一个参数的常用名称，因为该方法接收它绑定到的实例作为每个调用的第一个参数。

它没有在“其他地方”使用，因为它仅适用于存在可绑定实例的上下文。

您可能正在考虑类似的事情：

```
class Foo(object):
    y = 1
    x = self.y * 2 
```

这是不可能的，因为没有`self`- 事实上，在评估类语句的主体时，还没有实例或类对象存在。也没有必要，因为可以直接引用主体范围内的其他变量，而无需使用`self`.

请注意，对 self 成员的赋值和对类范围内变量的赋值有两种不同的作用：

```
class Foo(object):
    y = 1 # class variable
    def __init__(self):
        self.x = self.y * 2 # instance variable, defined by reference to class variable

first = Foo()
Foo.y = 2
first.y = 3
second = Foo()
print first.x # = 2
print second.x # = 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T20:05:42.837

*self*是一个约定 - 不是 Python 的保留字。常规方法声明中的第一个参数表示对象。然而，为了代码的可读性和一致性，不在类之外使用*self是一种传统的智慧。*

通常，您可以使用任何单词作为变量标识符，但变量名称隐含地包含在代码文档中，因此最好使用尽可能多的不言自明的名称，您可以压缩到 5 -12 个符号（这些是我的偏好）——它们可能更长，但是太长的名称会使您的代码混乱。

*类之外的self*是没有意义的——它不会帮助代码阅读者理解代码。因此，如果您愿意，可以使用它——但这不是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T20:06:14.147

这个链接（[http://www.python.org/doc/essays/ppt/acm-ws/sld051.htm](http://www.python.org/doc/essays/ppt/acm-ws/sld051.htm)）可能会给你一些关于类与实例变量的澄清，我相信你在问。查看该页面和相应的下一张幻灯片。

如果这不能清楚你的要求，就类方法而言，我不确定我是否知道你指的是什么。我建议阅读“classmethod”（[http://docs.python.org/2/library/functions.html#classmethod](http://docs.python.org/2/library/functions.html#classmethod)）和“staticmethod”（[http://docs.python.org/2 /library/functions.html#staticmethod](http://docs.python.org/2/library/functions.html#staticmethod) )

# python - BeautifulSoup 的 Python 内存问题

> ID：13481055
> 
> 赞同：1
> 
> 时间：2012-11-20T19:55:09.190
> 
> 标签：python, memory, beautifulsoup

我已经解决了这个问题，但我想知道为什么它是首先引起的。我使用 BeautifulSoup 从网页中识别出这个跨度：

```
span = <span id="ctl00_ContentPlaceHolder1_RestInfoReskin_lblRestName">Ally's Sizzlers</span> 
```

然后我分配这个变量：

```
restaurant.name = span.contents 
```

然而，在每个循环中，这会占用整整 1 MB，并且大约有 20,000 个循环。通过反复试验，我找到了这个解决方案：

```
restaurant.name = str(span.contents) 
```

你能告诉我为什么以前的 span.contents 占用这么多内存吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T20:38:08.187

可能是因为`str(span.contents)`调用`__str__`对象内部的函数`span.contents`并返回较小的表示。您可以使用[pympler](http://code.google.com/p/pympler/ "品普勒")来测量内存消耗

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-03T20:51:30.017

老东西，但以防其他人想知道：`span.contents`返回对`NavigableString`实例的引用。这个实例和 DOM 树之间是有联系的，所以只要这个实例在使用中，垃圾回收器就不能从内存中释放整个 DOM 树。因此，只要`restaurant.name`不从内存中释放，整个 DOM 树就保存在内存中。

using`str(span.contents)`返回一个没有与 DOM 树链接的字符串，因此它不会阻止 DOM 树从内存中释放。

# javascript - 使用 javascript 在基于下拉框选择的居中弹出窗口中打开链接

> ID：13481057
> 
> 赞同：0
> 
> 时间：2012-11-20T19:55:14.420
> 
> 标签：javascript, drop-down-menu, popup, selectedindex, xhtml-transitional

我正在寻找一种解决方案，它允许我组合两个脚本并让它们以跨浏览器友好的方式一起工作，并符合 XHTML 1.0 过渡标准。

第一个脚本是基于下拉选择的打开文件/位置。

这是脚本：

```
<script type="text/javascript">
//<![CDATA[
<!--
function go(){ 
if (document.fooform.fooselect.options[document.fooform.fooselect.selectedIndex].value != "none") { 
location = document.fooform.fooselect.options[document.fooform.fooselect.selectedIndex].value 
    } 
} 
//-->
//]]>
</script> 
```

这是标记：

```
<form name="fooform">
<select name="fooselect">
   <option selected="selected" value="#">Select a file</option>
   <option value="pdfs/somefile1.pdf">file 1</option>
   <option value="pdfs/somefile2.pdf">file 2</option>
   <option value="pdfs/somefile3.pdf">file 3</option>
   <option value="pdfs/somefile4.pdf">file 4</option>
 </select>
   <input onclick="go()" type="button" value="Get PDF" />
</form> 
```

很直接...

正如标题所述，第二个脚本当然是打开一个居中弹出窗口的脚本。

这是脚本：

```
<script type="text/javascript">
//<![CDATA[
<!--
function PopupCenter(pageURL, title,w,h) {
var left = (screen.width/2)-(w/2);
var top = (screen.height/2)-(h/2);
var targetWin = window.open (pageURL, title, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=yes, copyhistory=no, width='+w+', height='+h+', top='+top+', left='+left);
} 
//-->
//]]>
</script> 
```

这是标记：

```
<input onclick="PopupCenter('http://www.stackoverflow.com', 'popfoo',400,400);" type="button" value="Open Center Popup" /> 
```

所以我的挑战是创建一个脚本，当用户单击“获取 PDF”按钮时，会打开一个包含 PDF 文件的居中弹出窗口，并且该 PDF 文件将根据他们从下拉列表中选择的选项而改变。

我将在页面上有多个下拉菜单，因此脚本很可能会从`document.fooform.fooselect.options`变为`document.form1.select1.options`,`document.form2.select2.options`等...并且功能将类似于`go1()`,`go2()`等...

非常感谢任何帮助/提示/建议！

**更新**2012 年 11 月 22 日星期四

我考虑过牺牲居中弹出功能，而不是让这个脚本在新窗口中打开 PDF，到目前为止，我已经尝试过：

```
<input type="button" value="Get PDF" onclick="window.open(go().href); return false;" /> 
```

也

```
<input type="button" value="Get PDF" onclick="window.open(go(), 'USER GUIDE', 'width=500,height=300');" /> 
```

但是这两个输入都只是在同一个窗口中打开 PDF，这就是我想要避免的。

如果我只是尝试像这样合并上面的两个脚本：

```
<script type="text/javascript">
//<![CDATA[
<!--
function PopupCenter(pageURL, title, w, h) {
    var left = (screen.width / 2) - (w / 2);
    var top = (screen.height / 2) - (h / 2);
    var targetWin = window.open(pageURL, title, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=yes, copyhistory=no, width=' + w + ', height=' + h + ', top=' + top + ', left=' + left);
    }

    var go = function go() { 
if (document.fooform.fooselect.options[document.fooform.fooselect.selectedIndex].value != "none") { 
location = document.fooform.fooselect.options[document.fooform.fooselect.selectedIndex].value 
    } 
} 
//-->
//]]>
</script> 
```

然后使用以下输入触发器：

```
<input onclick="PopupCenter('go()', 'popfoo',400,400);" type="button" value="Get PDF" /> 
```

或者

```
<input onclick="PopupCenter('go', 'popfoo',400,400);" type="button" value="Get PDF" /> 
```

我收到错误消息：

**Windows 互联网浏览器**

**找不到'file:///W:/test/go()'。确保路径或 Internet 地址正确。**

**[好的]**

或者

**Windows 互联网浏览器**

**找不到'file:///W:/test/go'。确保路径或 Internet 地址正确。**

**[好的]**

如果我尝试在输入中不使用单引号，就像这样

```
<input onclick="PopupCenter(go(), 'popfoo',400,400);" type="button" value="Get PDF" /> 
```

我收到错误消息：

**Windows 互联网浏览器**

**找不到'file:///W:/test/undefined'。确保路径或 Internet 地址正确。**

**[好的]**

然后在错误消息上单击“**确定”后，PDF 在同一窗口中打开。**

请帮忙！！提前谢谢了 ：）

**更新 2** 2012 年 11 月 22 日星期四

[在这个小提琴](http://jsfiddle.net/77buX/)中让它在 IE 中工作（不幸的是）

然后基本上更改`location = document.fooform.fooselect.options[document.fooform.fooselect.selectedIndex].value`并声明`location`为变量（我认为这不是一个好主意，因为`location`它是一个全局变量 - 如果有人可以对此有所了解，那就太好了）然后添加了该行`window.open(location)`

想让它跨浏览器友好，并希望在新窗口调用方面得到一些帮助（仍然希望将其居中，最好从新窗口中删除一些不需要的东西，如工具栏、状态栏等）

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T17:57:33.637

不会使弹出窗口居中，但会（主要）做我需要做的事情。见 jsfiddle [http://jsfiddle.net/77buX/](http://jsfiddle.net/77buX/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <title>test</title>
    </head>
    <body>
        <script type="text/javascript">
            var UG1 = function getUG1() {
                if (document.form1.select1.options[document.form1.select1.selectedIndex].value != "none") {
                    var location = document.form1.select1.options[document.form1.select1.selectedIndex].value;
                    window.open(location)
                }
            }

            var UG2 = function getUG2() {
                if (document.form2.select2.options[document.form2.select2.selectedIndex].value != "none") {
                    var location = document.form2.select2.options[document.form2.select2.selectedIndex].value;
                    window.open(location)
                }
            }
        </script>
        <form action="" name="form1">
            <p class="clear">
                <select name="select1" style="width: 10.5em">
                    <option selected="selected" value="#">Select a user guide</option>
                    <option value="http://manuals.info.apple.com/en_US/ipad_user_guide.pdf">ipad user guide</option>
                    <option value="http://manuals.info.apple.com/en_US/iphone_user_guide.pdf">iphone user guide</option>
                </select>
                <input onclick="getUG1()" type="button" value="Get PDF" />
            </p>
        </form>
        <br />
        <br />
        <form action="" name="form2">
            <p class="clear">
                <select name="select2" style="width: 10.5em">
                    <option selected="selected" value="#">Select a user guide</option>
                    <option value="http://docs.blackberry.com/en/smartphone_users/deliverables/1202/userguide_bb8330_cdma.pdf">blackberry 8330 user guide</option>
                    <option value="http://cb.vu/unixtoolbox.pdf">unix toolbox</option>
                </select>
                <input onclick="getUG2()" type="button" value="Get PDF" />
            </p>
        </form>
    </body>

</html>​ 
```

# c - Linux 上的 CommandLineToArgvW 等效项

> ID：13481058
> 
> 赞同：2
> 
> 时间：2012-11-20T19:55:15.220
> 
> 标签：c, linux, command-line-arguments

我正在寻找与 Windows 的[CommandLineToArgvW](http://msdn.microsoft.com/en-us/library/bb776391.aspx)等效的功能。

*我有一个字符串，我想完全*按照 bash 的方式分解它，包括所有极端情况 - 即考虑到单引号和双引号、反斜杠等，因此拆分`a b "c'd" "\"e\"f" "g\\" h 'i"j'`将导致：

```
a
b
c'd
"e"f
g\
h
i"j 
```

由于这样的函数已经存在并且被 OS/bash 使用，我假设有一种方法可以调用它，或者至少获取它的源代码，所以我不需要重新发明轮子。

**编辑**

要回答我为什么需要它，它与产生子进程无关。我想制作一个搜索文本的程序，以任何顺序观察多个正则表达式是否为真。但是所有的正则表达式都会在同一个文本字段中输入，所以我需要将它们分解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T20:02:00.673

GNU/Linux 是由[自由软件](http://www.gnu.org/philosophy/free-sw.html)组成的，而[bash](http://www.gnu.org/software/bash/)是自由软件，因此您可以获取源代码并对其进行改进（并且您应该在 GPL 许可下发布您的改进补丁）。

但是没有通用库这样做，因为 shell 的作用是将命令行扩展为[execve(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/execve.2.html)系统调用的参数（然后转到`main`被调用程序的参数）。

^(（这在 MS-DOS 中是不同的，被调用的程序必须扩展它的命令行）)

函数[wordexp(3)](http://linux.die.net/man/3/wordexp)与您可能想要的很接近。

您可能想研究更简单的 shell 的源代码，例如下载[sash-3.7.ta​​r.gz](http://members.tip.net.au/~dbell/programs/sash-3.7.tar.gz)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T20:10:24.473

如果您希望它完全按照 Bash 的方式扩展字符串，则需要运行 Bash。请记住，Bash 会进行参数扩展、命令替换等。如果它真的需要像 Bash 一样运行，只需调用 Bash 本身。

```
FILE *f = popen("bash", "r+");
fprintf(f, "echo %s", your_string);
fgets(buffer, sizeof(buffer), f);
pclose(f); 
```

请注意，如果您的原始代码不够大，实际代码将需要处理错误并可能分配更大的缓冲区。

鉴于您更新的要求，听起来您不想像 Bash 那样解析它。相反，您只想用引号和转义来解析空格分隔的字符串。我建议您自己简单地实现它；我不知道有任何现成的库可以完全按照您指定的方式解析字符串。您不必完全手写；为此，您可以使用[flex](http://westes.github.io/flex/manual/)或[Ragel 之类的词法扫描器生成器。](http://www.complang.org/ragel/)

# mysql - 在 where-in 子句中进行子选择

> ID：13481061
> 
> 赞同：2
> 
> 时间：2012-11-20T19:55:22.150
> 
> 标签：mysql

试图删除由单个语句中的子选择生成的 id 列表。这可能吗？我一直在尝试以下方法：

[编辑] 更正查询

```
DELETE from store 
WHERE  id in ( SELECT store.id 
               FROM   storeInfo 
               JOIN   store ON storeInfo.store_id = store.id
               WHERE  storeInfo.type = 17 ) 
```

但这是不正确的语法......不确定如何正确构建它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T19:58:23.020

```
DELETE store
FROM store
JOIN storeInfo 
    ON storeInfo.store_id = store.id
WHERE storeInfo.type = 17 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T20:00:14.263

在对问题进行错字更新后 - 您不需要`JOIN`在子查询中使用 a 。您可以`storeInfo.store_id`从`IN()`子查询中返回。

```
DELETE FROM `store` WHERE `id` IN (SELECT `store_id` FROM `storeInfo` WHERE `type` = 17) 
```

MySQL 不允许您`store`在子查询中使用该表，然后从中删除行。但是，您可以使用它，`storeInfo`因为它直接与`store_id`.

如果您需要从这*两个*表中删除（例如，当`storeInfo`从 中删除父级时，行成为孤立行`store`），请改用以下`JOIN`语法：

```
DELETE
  /* Syntax to delete rows from both tables */
  store, storeInfo
FROM 
  store JOIN storeInfo ON store.id = storeInfo.store_id
WHERE storeInfo.type = 17 
```

查看[MySQL`DELETE`语法参考](http://dev.mysql.com/doc/refman/5.0/en/delete.html)以获取完整的详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T20:07:34.453

你可以直接加入`delete`

```
delete store from store 
  JOIN storeInfo ON storeInfo.store_id = store.id 
  WHERE  store.type = 17; 
```

# sqlite - Dapper ORM 和 SQLite 执行查询

> ID：13481063
> 
> 赞同：0
> 
> 时间：2012-11-20T19:55:34.760
> 
> 标签：sqlite, orm, mapping, dapper

我的 SQLite 数据库中有一个简单的表：

```
CREATE TABLE ProductCategories
(
    Id INTEGER PRIMARY KEY AUTOINCREMENT,
    Name NVARCHAR(128) NOT NULL UNIQUE,
    ImageUrl NVARCHAR(256),
    ParentCategoryId INTEGER,
    FOREIGN KEY (ParentCategoryId) REFERENCES ProductCategories(Id) ON UPDATE CASCADE ON DELETE CASCADE
); 
```

我使用 Devart 的 SQLite ADO.NET 提供程序的免费版本。它工作正常，我考虑使用 Dapper ORM，但类型映射有点问题。对于 ProductCategories 表，我有这个类：

```
public class ProductCategory
{
    public Int32 Id { get; set; }
    public String Name { get; set; }
    public String ImageUrl { get; set; }
    public Int32? ParentCategoryId { get; set; }
} 
```

所以如果我尝试这样的事情：

```
var categories = connection.Query<ProductCategory>("SELECT * FROM ProductCategories");
foreach (var c in categories)
{
    Console.WriteLine(c.Id + " " + c.Name + " " + c.ImageUrl + " " + c.ParentCategoryId);
} 
```

我得到一个执行，因为表中的 ParentCategoryId 字段不能转换为 Int32？父类别 ID。此外，如果我使用 ADO.NET ExecuteReader，我总是可以检查该字段是否可为空，如果未设置外键，则该字段为空。所以我正在为这个表寻找一个合适的数据映射。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:52:36.410

我找到了解决方案。我刚刚将 ParentCategoryId 类型更改为 INT，因为 INTEGER 是 64 位的，所以现在没有转换问题。

# jquery - 与选择框关联的标签

> ID：13481064
> 
> 赞同：0
> 
> 时间：2012-11-20T19:55:37.927
> 
> 标签：jquery, html

我对带有选择框的关联标签有疑问。我有一个包含 3 个值的选择框：

```
 0
  1 -> AA
  2 -> AB
  3 -> AC 
```

或见下图

![具有 3 个值的选择框](../Images/c933280456cb4c145ee4913098f9ebe2.png)

我只有一个可见的选择框，因为我没有任何选择。当我现在选择值 AB 时，请参见下图：

![选定值 AB](../Images/60bd822757adf211cda237fbf52c7d84.png)

然后我想获取此选定值的关联标签（带有一些输入字段）！见下图。

![在此处输入图像描述](../Images/cf1e6bac28a6708b97b5c1c5f8bd4772.png)

它必须像单选按钮一样工作。如果我选择 AA，那么我会得到另一个相关标签，并且之前选择的标签将是不可见的。当我选择值“0”（无）时，所有标签都必须不可见。

[这里是（唯一的）HTML 结构](http://jsfiddle.net/SGZup/3/ "这里（唯一的）HTML结构")，因为 jquery 对我来说太重了。如果你有一个例子？我希望你能帮帮我

提前 THX

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:16:10.857

尝试这个...

[JSfiddle](http://jsfiddle.net/SGZup/4/)

HTML

```
<table>
<tr>
    <td>
        <select id="choice" name="choose">
            <option value="0"></option>
            <option value="1">AA</option>
            <option value="2">AB</option>
            <option value="3">AC</option>
        </select>
    </td>
</tr>

    <tr id="firstLast">
        <td class="mySaisie">&nbsp;Firstname</td>
        <td>
            <input id="name" name="fname" />
        </td>
        <td class="mySaisie">&nbsp;Lastname</td>
        <td>
            <input id="name" name="lname" />
        </td>
    </tr>
    <tr id="addresses">
        <td class="mySaisie">&nbsp;Adresse 1</td>
        <td>
            <input id="adresse" name="fname" />
        </td>
        <td class="mySaisie">&nbsp;Adresse 2</td>
        <td>
            <input id="adresse" name="lname" />
        </td>
    </tr>
</table>
​ 
```

查询

```
$("#choice").on('change',function(){
    var $choice = $('#choice option:selected').val();
    if ($choice == 1) {
         $("#firstLast").show();   
    } else {
        $("#firstLast").hide(); 
    }

    if ($choice == 2) {
         $("#addresses").show();   
    } else {
        $("#addresses").hide(); 
    }
});​ 
```

CSS

```
#firstLast,#addresses {display:none;}​ 
```

我取出了多余的代码，否则不清楚。

您不应该使用标签以这种方式将代码组合在一起。:)

[有关使用标签的更多信息](http://www.456bereastreet.com/archive/200711/use_the_label_element_to_make_your_html_forms_accessible/)

# c# - ASP.NET MVC 区域是将我的应用程序中的功能分为管理员和普通用户的好方法吗？

> ID：13481067
> 
> 赞同：-1
> 
> 时间：2012-11-20T19:55:56.550
> 
> 标签：c#, asp.net-mvc, security, razor, asp.net-mvc-areas

我有一个运行良好的现有 ASP.NET MVC 应用程序。它为一组选定的人员提供了一组管理功能。我现在的任务是允许更大的组访问完全相同的应用程序的非常有限的部分。

ASP.NET MVC 区域是执行此操作的方法吗？我问的原因是因为我想让所有用户访问同一个网页（例如 mysite.com），并且我希望外观保持不变（利用相同的母版页文件或 _Layout.cshtml ）。

当前的设置是所有用户对系统提供的所有数据都具有平等的访问权限（完全）。

所以当鲍勃去

```
/People/Index 
```

他看到了一切，而当 Sally 看到时，她也看到了同样的东西。

现在我需要允许更多的人访问同样的东西。所以当辛迪去

```
/People/Index 
```

她将看到的只是直接向她报告的人，对于 Dave 和其他所有不属于“管理员”组的人来说都是如此，他们可以完全访问所有内容。

这里的 uri 对我来说并不重要；但我想要做的是能够回收相同的布局和视图，同时使用一组不同的控制器（它们有额外的业务逻辑来只显示数据的子集）。

ASP.NET MVC 区域是执行此操作的正确方法吗？如果没有，指向正确方向的指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:01:29.930

如果唯一的要求是数据仅限于与用户直接相关的人员/项目，我会在您的数据层中执行此操作。当你去加载用户列表时，只返回 Cindy 可以访问的用户。也许有一个用户表标志来判断用户是否是管理员用户。

```
public IEnumerable<User> GetUsers(User requestingUser)
{
    if(requestingUser.IsAdmin) // return your full list of users

    return // list of users filtered by reporting to requestingUser
} 
```

如果您在数据层中执行所有这些逻辑，则用户都使用相同的站点并通过相同的页面流，页面中显示的内容是有限的。当然，您也可以在渲染视图的某些部分时测试用户的管理员标志等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T20:04:12.030

我认为您在 ASP MVC 方面处于良好的轨道上，您希望看到的是在您的应用程序中实现角色，并基于角色向用户提供某些信息，如果用户执行相同的功能我不会使用这些区域如果我正确理解您的问题，您没有在博客、购物等具有完全不同功能的同一应用程序下开发不同方面，请查看角色和会员资格

[http://www.asp.net/web-forms/videos/how-do-i/how-do-i-secure-my-site-using-membership-and-roles](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-secure-my-site-using-membership-and-roles)

# mysql - 使用mysql的慢左连接

> ID：13481069
> 
> 赞同：0
> 
> 时间：2012-11-20T19:56:23.743
> 
> 标签：mysql, sql, query-optimization

这是有问题的 SQL 查询：

```
select *  from company1 
left join company2 on company2.model 
    LIKE CONCAT(company1.model,'%') 
    where company1.manufacturer = company2.manufacturer 
```

company1 包含 2000 行，而 company2 包含 9000 行。

查询大约需要 25 秒才能完成。

我有 company1.model 和 company2.model 索引。

知道如何加快速度吗？谢谢！

```
+----+-------------+-----------+------+---------------+------+---------+------+------+--------------------------------+
| id | select_type | table     | type | possible_keys | key  | key_len | ref  | rows | Extra                          |
+----+-------------+-----------+------+---------------+------+---------+------+------+--------------------------------+
|  1 | SIMPLE      | company1  | ALL  | NULL          | NULL | NULL    | NULL | 2853 |                                |
|  1 | SIMPLE      | company2  | ALL  | NULL          | NULL | NULL    | NULL | 8986 | Using where; Using join buffer |
+----+-------------+-------+---+------+---------------+------+---------+------+------+--------------------------------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T20:02:55.980

这个查询在概念上与你的不同，但也许你想要这样的东西？我很确定它会给你和你一样的结果：

```
select
  *
from
  company1 inner join company2
  on company1.manufacturer = company2.manufacturer
where
  company2.model LIKE CONCAT(company1.model,'%') 
```

**编辑：**我也删除了你的`left join`并放了一个`inner join`. 如果连接不成功，`company2.model`则始终为 true，`null`并且`NULL LIKE 'Something%'`永远不可能为 true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T20:03:17.017

加快此速度的一种方法是`LIKE CONCAT()`从连接条件中删除 。

MySQL 无法使用索引进行基于子字符串的搜索，因此您的查询会导致全表扫描。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T20:14:14.623

您`EXPLAIN`表明您没有可以使用的索引。

两个表上的适当索引会有所帮助。单个索引`(manufacturer)`或复合索引`(manufacturer, model)`：

```
ALTER TABLE company1
  ADD INDEX manufacturer_model_IDX       --- this is just a name (of your choice)
    (manufacturer, model) ;              --- for the index

ALTER TABLE company2
  ADD INDEX manufacturer_model_IDX
    (manufacturer, model) ; 
```

# python - Python (wxPython) 是否具有等效于 JavaScript setTimeout 函数的功能？

> ID：13481070
> 
> 赞同：1
> 
> 时间：2012-11-20T19:56:24.650
> 
> 标签：python, wxpython

我目前正在使用 wxPython，发现自己需要 JavaScript 的`setTimeout`函数来限制快速重复的事件。我想要的示例：

```
def on_resize(self, event):
    if self.resize_timeout:
        clear_timeout(self.resize_timeout)

    self.resize_timeout = set_timeout(lambda: self.save_size(), 1000) 
```

假设`self.save_size()`是一个繁重的操作。使用超时功能，我可以延迟保存帧大小，直到最后一次调整大小事件触发后一秒钟。

Python/wxPython 是否具有执行此类操作的机制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:18:47.687

我只会使用一个或多个 wx.Timers。这是一个教程： http: [//www.blog.pythonlibrary.org/2009/08/25/wxpython-using-wx-timers/](http://www.blog.pythonlibrary.org/2009/08/25/wxpython-using-wx-timers/)

# extjs - 加载网格后如何在 Ext JS Grid 中动态添加插件

> ID：13481071
> 
> 赞同：3
> 
> 时间：2012-11-20T19:56:39.580
> 
> 标签：extjs, extjs4

我正在使用 GridHeaderFilter 插件（[http://www.sencha.com/forum/showthread.php?150918-Grid-Header-Filters](http://www.sencha.com/forum/showthread.php?150918-Grid-Header-Filters)）

```
var testGrid = new Ext.grid.GridPanel({
    frame: true,
    minHeight: 200,
    plugins: [new Ext.ux.grid.GridHeaderFilters()],
    columns : [{
        text : 'Test Id',
        sortable : true,
        dataIndex : 'testId',
        filter: {
            xtype: 'textfield',
            type: 'string'
        }
    },                  
}); 
```

但是当我动态添加一些列到这个网格并使用 grid.reconfigure(null,newColumns[]);

新列得到反映，但 GridHeaderPlugin 消失了。

试过这个[http://www.sencha.com/forum/showthread.php?124179-Dynamically-adding-plugins-to-grid](http://www.sencha.com/forum/showthread.php?124179-Dynamically-adding-plugins-to-grid)没有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T20:35:31.247

要做两件事使它起作用。

1.  首先在添加插件时，将插件分配为

    ```
    var grid = Ext.create('Ext.grid.Panel',{
        plugins:[Ext.create('Ext.ux.grid.GridHeaderFilters', {
            clicksToEdit: 2,
            pluginId:'gridHeaderPlugin'
        })]
    }); 
    ```

2.  在做动态列和运行重新配置后`renderFilters()`

    ```
    grid.reconfigure(null, newColumns[]);
    grid.getPlugin('gridheaderfilters').renderFilters(); 
    ```

# c++ - 从指针擦除到指针向量

> ID：13481073
> 
> 赞同：0
> 
> 时间：2012-11-20T19:56:44.053
> 
> 标签：c++, pointers, vector, delete-operator

对于以下代码：

```
vector<int*> x;
vector<int*>* p;

// say I initiated x with a couple of integers
p  = &x;

//erases the indicie of the given integer
void erase(vector<int*> &x, int n){
  int i = 0;
  while (*(x[i]) != n){
    i++;
  }
  delete x[i];
  x.erase(x.begin() + i);
} 
```

如果我调用`erase(*p, 2);`我现在要设置的代码`p`到这个已被擦除的向量的地址......我正在尝试`p = &(*p);`..但这不起作用，我得到一个分段错误，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T20:00:11.477

你不应该做任何事情。仍然像你打电话之前一样`p`指向。从向量中删除元素不会更改向量的地址。`&x``erase()`

# r - 更改为列

> ID：13481076
> 
> 赞同：-2
> 
> 时间：2012-11-20T19:56:59.357
> 
> 标签：r, excel

假设我有一个包含以下值的 .txt 文件（z_i 在 y_i 下的一行中，它也在 x_i 下的一行中）：

```
x1
y1
z1

x2
y2
z2

x3
y3
z3

.
.
.

x1000
y1000
z1000 
```

现在我想将所有 xi（对于 i 在 1 ... 1000 中）放在一列中，将所有 yj 放在一列中，对于 zk 在 1...1000 中的 j，k 也是如此。这是因为稍后我想计算一些值，例如所有 x_i 的标准误差和所有 y_j 的平均值等等。请让我知道如何将我的 .txt 文件转换为包含 x_i、y_j 和 z_k 值的三列的 R 或 excel 文件

非常感谢

AB

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T20:15:55.753

您可以阅读 R 中的文本文件

```
dat <- read.table("filename.txt") 
```

这将创建一个包含一列的数据框。

然后您可以创建一个包含三列的矩阵：

```
mat <- matrix(unlist(dat), 3, byrow = TRUE) 
```

输出（前三行）：

```
 [,1] [,2] [,3]
[1,] "x1" "y1" "z1"
[2,] "x2" "y2" "z2"
[3,] "x3" "y3" "z3" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T20:16:23.263

您是否尝试过将数据复制并粘贴到 Excel 中？那没有用吗？

如果要将其读入 R，请使用

```
myData <- read.csv(nameOfFileWithPath, sep=" ") 
```

我从您的示例中假设您的分隔符是`" "`. 如果不是这种情况，请相应地修改该部分。

如果`read.csv`不起作用，您可以使用`read.table`which 允许更多控制。请参阅以`?read.table`获取更多信息。

# c# - WMI.NET 到 MicrosoftBizTalkServer - 用户匿名登录失败

> ID：13481077
> 
> 赞同：1
> 
> 时间：2012-11-20T19:56:58.223
> 
> 标签：c#, wmi, biztalk, windows-security

通过 WMI.NET 连接到 Biztalk Server 2010 时，我能够成功阅读任意数量的类类型，但没有一个 Biztalk 类。每个都抛出以下异常措辞：

```
BizTalk Server cannot access SQL server.  This could be due to one of the following reasons:
1\. Access permissions have been denied to the current user.  Either log on as a user that has been granted permissions to SQL and try again, or grant the current user permission to access SQL Server.
2\. The SQL Server does not exist or an invalid database name has been specified.  Check the name entered for the SQL Server and database to make sure they are correct as provided during SQL Server installation.
3\. The SQL Server exists, but is not currently running.  Use the Windows Service Control Manager or SQL Enterprise Manager to start SQL Server, and try again.
4\. A SQL database file with the same name as the specified database already exists in the Microsoft SQL Server data folder.

Internal error from OLEDB provider: "Login failed for user 'NT AUTHORITY\ANONYMOUS LOGON'." 
```

测试代码（没有安全信息）：

```
ConnectionOptions options;
options = new ConnectionOptions();
options.Username = @"myusername";
options.Password = @"mypassword";
options.Authority = @"ntlmdomain:mydomain";

ManagementScope scope;
scope = new ManagementScope(@"\\BIZSERVERNAME\root\MicrosoftBizTalkServer", options);
scope.Connect();

ObjectQuery query = new ObjectQuery("SELECT * FROM MSBTS_Setting");
ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope,query);
var i = 0;
foreach (ManagementObject key in searcher.Get())
{
    listBox1.Items.Add(key.ToString());
    i++;
    if (i > 100) break;
} 
```

将 MSBTS_Setting 更改为任何 Biztalk 类并获得相同的异常。将其更改为非 biztalk 类，它就可以正常运行。例如：CIM_Setting。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:13:30.587

您遇到了所谓的“双跳”问题。（这实际上不是 WMI/BT 特定问题，这也是 IIS 和使用 windows 身份验证的 Sql Server 的常见问题）

当使用“BizTalk-WMI”时，基本上会发生这种情况（假设客户端、BT-Server 和 BT-Management-DB 在同一个域中但在不同的机器上）：

客户端凭据被发送到 BT 服务器/WMI 提供程序。BT-Server 应将凭据传输到 Sql-Server，但 kerberos（默认情况下）不允许这样做。

另请参阅此技术网文章：

*   [为什么我的远程操作涉及第三台机器时会失败？](http://technet.microsoft.com/library/ee692772.aspx#EDAA "技术网.microsoft.com")
*   [了解 Kerberos 双跳](http://blogs.technet.com/b/askds/archive/2008/06/13/understanding-kerberos-double-hop.aspx "博客.technet.com")

基本上，您有 3 个使用“BT-WMI”的选项：

1.  在 BT 主机上使用 WMI 运行您的代码，这只需要单跳到 sql-server。或者通过托管在 BT 主机上的 Web 服务公开必要的功能。
2.  使用[Microsoft.BizTalk.ExplorerOM](http://msdn.microsoft.com/en-us/library/microsoft.biztalk.explorerom.aspx "msdn.microsoft.com")组件
3.  为帐户和 BT 主机启用委派（在 Active Directory 中）： [允许信任计算机以进行特定服务的委派](http://technet.microsoft.com/en-us/library/dbb9141d-ce8d-48be-9ed1-9142beb51652 "技术网.microsoft.com")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:14:57.520

我认为这可能是因为您用于访问 WMI 对象的帐户不是“SSO 管理员”组的成员。

我遇到了一个非常相似的问题（BizTalk WMI 访问问题）并且遇到了这篇文章。将帐户添加到“SSO 管理员”组对我有用。

# sql-server - 选择数据最多一个空格？

> ID：13481084
> 
> 赞同：49
> 
> 时间：2012-11-20T19:57:28.310
> 
> 标签：sql-server, tsql

我有一个 MSSQL 数据库字段，如下例所示：

```
u129  james
u300  chris
u300a jim
u202  jane
u5    brian
u5z   brian2 
```

有没有办法选择第一组字符？基本上选择所有字符直到第一行空格？

我尝试过使用 LEFT、RIGHT、LEN，但找不到像我的示例中那样使用可变字符串长度的方法。

谢谢！

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-11-20T20:00:42.630

您可以使用`LEFT`和的组合`CHARINDEX`来查找第一个空格的索引，然后抓取该空格左侧的所有内容。

```
 SELECT LEFT(YourColumn, charindex(' ', YourColumn) - 1) 
```

如果您的任何列中没有空格：

```
SELECT LEFT(YourColumn, CASE WHEN charindex(' ', YourColumn) = 0 THEN 
    LEN(YourColumn) ELSE charindex(' ', YourColumn) - 1 END) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T20:00:24.987

```
select left(col, charindex(' ', col) - 1) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-08T02:40:04.533

如果第一列**的大小始终相同**（包括空格），那么您只需获取这些字符（通过`LEFT`）并清理空格（使用`RTRIM`）：

```
SELECT RTRIM(LEFT(YourColumn, YourColumnSize)) 
```

或者，您可以提取第二（或第三等）列（使用`SUBSTRING`）：

```
SELECT RTRIM(SUBSTRING(YourColumn, PreviousColumnSizes, YourColumnSize)) 
```

这种方法的一个好处（特别是如果`YourColumn`是计算的结果）`YourColumn`是只指定一次。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-06T03:49:58.800

如果您有时没有空格不想使用 CASE 语句的替代方法

```
select REVERSE(RIGHT(REVERSE(YourColumn), LEN(YourColumn) - CHARINDEX(' ', REVERSE(YourColumn)))) 
```

这适用于 SQL Server，根据我的搜索 MySQL 具有相同的功能

# c# - Windows XP 与 Windows 7 中的 WaitForExit 进程

> ID：13481085
> 
> 赞同：1
> 
> 时间：2012-11-20T19:57:36.180
> 
> 标签：c#, asp.net, .net

我有一个在 Windows 7 中运行良好的 .net 控制台，但由于某种原因，如果我在 Windows XP 中运行相同的确切代码，我会收到错误消息“没有进程与此对象相关联”，然后它指向`prc.WaitForExit();`

代码如下：

```
 string path;

   path = System.IO.Path.GetDirectoryName(
           System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase);

   Process prc = new Process();  
   prc.StartInfo.FileName = path + "\\Process2.bat";
   prc.Start();

   prc.WaitForExit();
   System.Threading.Thread.Sleep(10);
   Console.WriteLine("{0} Task Process2 completed with process ID {1} and return code {2}. ", DateTime.Now.ToString(), prc.Id, prc.ExitCode.ToString());

   System.IO.StreamWriter file =
      new System.IO.StreamWriter(logpath + "\\logfile.txt", true);
        file.WriteLine(DateTime.Now.ToString() + " Task Process2 completed with process ID " + prc.Id + " and return code " + prc.ExitCode.ToString());

  file.Close(); 
```

请帮忙。非常感谢任何帮助。

# jquery - 使用 jQuery 文件上传插件时出现类型错误（无法将符号转换为整数）

> ID：13481086
> 
> 赞同：0
> 
> 时间：2012-11-20T19:57:35.680
> 
> 标签：jquery, ruby-on-rails-3, jquery-plugins

我正在使用 jQuery fileupload 插件上传多张图片。检查发送到服务器的数据，它是：

```
Parameters: {"utf8"=>"✓", "authenticity_token"=>"pE6KRzQv05wwcutCRN0UlZ3Cy39cNAtEYCMbkoVtwBQ=", "poll"=>{"title"=>"fjijgg", "category"=>"1", "items_attributes"=>{"brand"=>"item 3", "photo"=>[#<ActionDispatch::Http::UploadedFile:0x007fe609c377a0 @original_filename="Photo Nov 20, 1 19 44 AM.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"poll[items_attributes[photo]][]\"; filename=\"Photo Nov 20, 1 19 44 AM.jpg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/var/folders/3s/xggrbr6119v_mtcqn9r0b6tr0000gn/T/RackMultipart20121120-1465-d21tys>>]}}} 
```

poll 和 item 模型设置为：

```
class Item < ActiveRecord::Base
  attr_accessible :photo, :photo_url, :poll_id, :brand, :number_of_votes,:description, :is_deleted
  has_attached_file :photo,
                    :styles => { :thumbnail => "100x100#",
                                   :small => "150x150>",
                                   :medium => "250x250>",
                                   :large => "400x400>" },
                    :storage => :s3,
                    :s3_credentials => S3_CREDENTIALS,
                    :url=>"/item_:id/created_at_:created_at/:style.jpg"
  belongs_to :poll
end

class Poll < ActiveRecord::Base
    attr_accessible :title, :user_id, :category, :items_attributes
    belongs_to :user
    has_many :items, :dependent => :destroy
    accepts_nested_attributes_for :items
    default_scope :order => 'polls.created_at DESC'
end 
```

和投票控制器：

```
class PollsController < ApplicationController
  def create
    @poll=Poll.create(params[:poll])
    redirect_to @poll
  end
end 
```

我得到了错误：

```
TypeError (can't convert Symbol into Integer): 
```

我认为这是由“items_attributes”=> {...}引起的。关于如何解决它的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T22:07:37.410

我发现由于它是一对多关联，即 poll 有很多项目，它应该看起来像 "items_attributes" => [{..}] 而不是 "items_attributes" => {..}

# r - 有序概率的稳健聚类标准误

> ID：13481087
> 
> 赞同：3
> 
> 时间：2012-11-20T19:57:49.637
> 
> 标签：r, regression

是否有用于计算 R 中有序概率 (oprobit) 模型的稳健标准误差和聚集稳健标准误差的包或代码片段？

大多数方法似乎仅限于 GLM 或 LM。polr 对象的排列方式似乎不同，因此这可能是干扰使用这些对象计算标准误差的原因。

# javascript - 使用 Rally RPM 确定上下文范围

> ID：13481090
> 
> 赞同：1
> 
> 时间：2012-11-20T19:57:59.460
> 
> 标签：javascript, sdk, rally

最近，我使用 Rally SDK 2.0 创建了一个 RPM 树面板，它允许用户从树中选择多个投资组合项目。我想做的是使用 WsapiDataStore 调用来拉取范围在所选 RPM 级别以下的所有用户故事。当我使用项目选择器时，这就像在调用中设置上下文属性一样简单，如下所示：

```
context: {
    project: '/project/' + projectObjectID;
} 
```

如果我使用 RPM 项目 ID 执行此操作，它似乎不会以相同的方式运行。有没有办法让我使用 RPM 项目节点指定上下文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T01:12:56.853

不幸的是，没有上下文范围可以实现这一点 - 现在查询关系的唯一方法是递归地遍历特定工件的子“树”。

Lookback API 将使这更容易，因为它可以通过单个查询来获取父/子对象的整个层次结构 - 请参阅此问题的答案：

[Lookback API：查找已知父节点下的所有叶节点故事](https://stackoverflow.com/questions/10725244/lookback-api-find-all-leaf-node-stories-under-a-known-parent)

# .net - 使用 RMO，如何从 SQL Server 获取本地订阅列表？

> ID：13481091
> 
> 赞同：1
> 
> 时间：2012-11-20T19:58:01.580
> 
> 标签：.net, sql-server, replication, rmo

使用 SQL Server Management Studio，很容易在 Replication 文件夹下的订阅者数据库上查看本地订阅列表。我的问题是如何以编程方式获取该列表。我知道我可以使用 RMO[创建订阅](http://msdn.microsoft.com/en-us/library/ms147314%28v=sql.105%29.aspx)。我想知道如何获取所有现有本地订阅的列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:34:05.690

[Publication.EnumSubscriptions 方法](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.replication.publication.enumsubscriptions.aspx)返回订阅发布的订阅。这相当于执行 sp_helpsubscription 或 sp_helpmergesubscription。

您还可以连接到订阅服务器，获取[ReplicationDatabaseCollection](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.replication.replicationdatabasecollection.aspx)并枚举复制的数据库订阅。这是一个例子：

```
// Connect to the Subscriber
subscriberName = "SubscriberName";
subscriberConnection = new ServerConnection(subscriberName);
subscriberConnection.Connect();

// Get Subscriber replication databases
ReplicationServer subscriberServer = new ReplicationServer(subscriberConnection);
ReplicationDatabaseCollection subscriberReplicationDatabases = subscriberServer.ReplicationDatabases;

// Enumerate Subscriber replication databases
foreach (ReplicationDatabase subscriptionDatabase in subscriberReplicationDatabases)
{
    foreach (MergePullSubscription mergePullSubscription in subscriptionDatabase.MergePullSubscriptions)
    {
        // do something...
    }
} 
```

# jquery - 如何使用没有根节点的 JSON 渲染 Mustache 模板

> ID：13481092
> 
> 赞同：2
> 
> 时间：2012-11-20T19:58:05.937
> 
> 标签：jquery, json, jsonp, mustache

我正在构建一个小页面，它使用 jquery 的 getJSON 调用 API，然后使用 mustache 模板呈现数据（至少这是计划）。但是，我的 JSON 没有节点根，并且无法使用正确的小胡子机制遍历 JSON 响应数据。

```
//start
file : jsonresponse.jsonp

?([{"CountryIsoAlpha3Code":"AFG","CountryName":"Afghanistan"},
{"CountryIsoAlpha3Code":"ALA","CountryName":"Åland Islands"},
{"CountryIsoAlpha3Code":"ALB","CountryName":"Albania"}])
//end

//start
file: tmpl.mustache

<option value="{{CountryIsoAlpha3Code}}">{{CountryName}}</option>
//end

//start
file: render.js

$.getJSON(jsonresponse.jsonp, function(data) { 
   var tpl = tmpl.mustache,
   i=data.length,
   html = '';
     while(i--){
       html = html + mustache.render(tpl, data[i]);
     }

//end 
```

我意识到这是完全错误的（仅在模板使用中，假设我实际上正确地传递了数据和模板）但它确实有效。但是，如果我想执行以下操作怎么办……我该怎么做！？：

```
//start
//file : daydreamer.mustache

<h1>This title is only awesome when it's rendered once</h1>
{{#}}  //no root node attempt at recursive templating rendering
     <option value="{{CountryIsoAlpha3Code}}">{{CountryName}}</option>
{{/}}

//end 
```

如果不清楚，请告诉我，我知道一个糟糕的问题是眼睛疼。我会尽快编辑。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T00:02:41.237

根据您在此应用程序/用例上控制的部分，您有 2 个可能的修复：修改 JSON 数据以包含此类根节点，**或者**将该根节点添加到您的数据中。

对于两种解决方案，必须对 mustache 模板进行如下修改：

```
{{#options}}
    <option value="{{CountryIsoAlpha3Code}}">{{CountryName}}</option>
{{/options}} 
```

现在您可以直接在服务器上**或**在您的终端上包装数据，然后`getJSON`对于第二个解决方案的调用将是这样的（对于第一个解决方案，将`{options: data}`包装器替换为 just `data`）。我将使用第二个假设您无法控制服务器端，因为该 API 是由其他人固定/授权的：

```
$.getJSON("jsonresponse.jsonp", function(data) { 
    var tpl = tmpl.mustache,
        html = '';

    html = mustache.render(tpl, {options: data});
} 
```

# c++ - 如何将函数应用于可变参数列表的每个组件并返回可变参数列表？

> ID：13481093
> 
> 赞同：9
> 
> 时间：2012-11-20T19:58:06.730
> 
> 标签：c++, templates, c++11, metaprogramming, variadic-templates

以下教学示例说明了我的问题：

```
#include <iostream>
#include <cmath>

template<class Function, class... Args>
double apply(Function f, Args... args)
{
    return f(args...);
}

template<class Function, class... Args>
double applybis(Function f, Args... args)
{
    return f(std::sin(args...));// <- How to apply a function to 
                                // each variadic parameter and 
                                // return a modified variadic list ?
}

int main(int argc, char* argv[])
{
    std::cout<<apply(static_cast<double(*)(double)>(std::sin), 3.)<<std::endl;
    return 0;
} 
```

如何通过将函数应用于每个组件并返回修改后的可变参数列表来“转换”可变参数列表？（有没有办法在不修改其当前签名的情况下编写 applybis 函数？）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T20:02:23.537

干得好：

```
return f(std::sin(args)...); 
```

也就是说，`...`应该在之后`(args)`。

它扩展/解包为这种形式：

```
return f( std::sin(arg0), std::sin(arg1), ......, std::sin(argN) ); 
```

# css - div内的整个区域没有链接

> ID：13481100
> 
> 赞同：2
> 
> 时间：2012-11-20T19:58:26.297
> 
> 标签：css, html

我有两个 div，并给出了 div 的背景。

它们具有完全相同的属性/css。但是一个 div 是完全可点击的（div 区域内的整个图像都是可点击的），另一个只能在这里和那里点击。有什么想法吗？

[http://romeon.net/deffrage](http://romeon.net/deffrage)

它的两个按钮

“去弗雷格”“约瑟夫”

它的除臭按钮不起作用..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:01:01.590

您的`.backlava`项目阻碍了它下面的链接。您需要调整此项目的尺寸。您也许可以简单地`height`从`li`. 快速测试表明这解决了问题，而不会影响布局（如果您决定走那条路线，您应该进一步测试）。

![在此处输入图像描述](../Images/f86bfc9976d7fc56258c2fb811e46b0e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T20:03:30.300

在以下代码中，将高度从 53 更改为 3。

```
<li class="backLava" style="left: 9px; top: 0px; width: 66px; height: 53px; overflow: hidden;"><div class="leftLava"></div><div class="bottomLava"></div><div class="cornerLava"></div></li> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T20:07:05.277

两者都链接给我。但是其中一个的结束标签顺序错误（`</span></div></a>`应该在哪里`</a></span></div>`）。

而这个 CSS

```
.robin {position: relative;float: left;margin-right: 100px;} 
```

仅适用于其中之一。

（没有类或 id 的跨度有什么意义？我会说那是无操作的）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T20:07:26.267

似乎有 Javascript 将 backlava 类的高度设置为 53px，而不是默认的 16px。删除任何 Javascript 正在做的事情，你应该会很好。

# javascript - 运行时加载+覆盖功能

> ID：13481109
> 
> 赞同：2
> 
> 时间：2012-11-20T19:59:21.650
> 
> 标签：javascript, node.js

我试图创建一个用 Javascript + NodeJS 编写的 IRC 机器人。该机器人应该能够在运行时加载插件，并且应该能够在更改等之后重新加载相同的插件。

**什么有效？**

在运行时加载文件 + 执行其代码。

**怎么了？**

再次加载相同的插件后，如果仍然执行我的代码，但现在它发生两次或第 n 次我加载插件。

**当前代码：**

```
bot.match(/\.load/i, function(msg) {
    require('./plugins/plug.js')(this);
});

module.exports  = function(bot) {
    bot.match(/\.ping/i, function(msg) {
    msg.reply('pong');
}); 
```

那么，有什么方法可以解决我的问题并使其正常工作吗？

Ps 我使用[IRC-JS](https://github.com/gf3/IRC-js)作为这个机器人的基础。

**更新，修复：**

> 甚至对该文件的更改也会被忽略，因此它必须类似于缓存。

通过清除修复`require.cache`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T20:10:33.527

`require`不会重新加载文件。一旦加载一次，它就在内存中，不会再次重新加载。听起来您想让机器人保持打开状态并`require`“即时”更改脚本的内容。您可以通过删除`require.cache`. 查看[node.js require() 缓存 - 可能无效？](https://stackoverflow.com/questions/9210542/node-js-require-cache-possible-to-invalidate)和[http://nodejs.org/api/modules.html#modules_caching](http://nodejs.org/api/modules.html#modules_caching)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T13:49:08.640

回答我自己的问题。在加载插件时，我将每个对象添加到一个全局数组中。之后可以轻松访问和删除它。

```
function clearplugins() {
    require("fs").readdirSync("./plugins/active").forEach(function(file) {
        delete require.cache[require.resolve("./plugins/active/" + file)];
    });

    plugins.forEach(function(obj) {
        obj();
    });
}

function loadplugins() {
    require("fs").readdirSync("./plugins/active").forEach(function(file) {

        if(file.slice(-2) == 'js') {
            plugins.push(require("./plugins/active/" + file)(bot));
            console.log(file+' loaded');
        }
    });
} 
```

# ruby-on-rails - Rails：gmaps4rails 地图不显示

> ID：13481113
> 
> 赞同：0
> 
> 时间：2012-11-20T19:59:52.773
> 
> 标签：ruby-on-rails, ruby, maps

我知道关于这个主题有很多问题，但是由于某种原因对我不起作用。我已经安装了 gmaps4rails gem（最新的）。我已按照所有说明进行操作，并包含了所有必要的文件以使其正常工作。一切都很好，但唯一的问题是实际地图没有加载/渲染？

这是我的布局页面：

> ```
>  <html>
>     <head>
>         <title>Mash's Wing Ranch&reg; | <%= @page_title || 'Admin Area' %></title>
>         <%= stylesheet_link_tag('admin_main', :media => 'all') %>
>         <%= stylesheet_link_tag "gmaps4rails" %>
>         <%= javascript_include_tag ('gmaps4rails.base','gmaps4rails.bing','gmaps4rails.googlemaps','gmaps4rails.mapquest','gmaps4railsopenlayers') %>   
>     </head>
>     <body>
>         <div id="headercontainer">
>             <div id="headercontent">
>                 <div id="headerlogo"></div>
>                 <div id="headernavigation">
>                     <ul>
>                         <li><%= link_to("Users", {:controller => 'admin_users', :action => 'list'}) %></li>
>                         <li><%= link_to("Menu", {:controller => 'menus', :action => 'list'}) %></li>
>                         <li><%= link_to("Sauces", {:controller => 'sauces', :action => 'list'}) %></li>
>                         <li><%= link_to("Ranches", {:controller => 'ranches', :action => 'list'}) %></li>
>                         <li><%= link_to("Franchise", {:controller => 'franchises', :action => 'list'}) %></li>
>                         <li><%= link_to("Mailing List", {:controller => 'mailing_lists', :action => 'list'}) %></li>
>                     </ul>
>                 </div>
>                 <div id="headerinformation">
>                     <p>Admin Area</p>
>                     <p><%= Time.now.strftime("%d/%m/%Y") %></p>
>                     <p><%= Time.now.strftime("%I:%M%p") %></p>
>                     <p>User - <%= session[:first_name] %> <%= session[:last_name] %></p>
>                     <p><%= link_to("Log Out", :controller => 'access', :action => 'logout') %></p>
>                 </div>
>             </div>
>         </div>
>         <div id="pagetitlecontainer">
>             <div id="pagetitlecontent">
>                 <h3><%= @pagetitle %></h3>
>             </div>
>         </div>
>         <% if !flash[:notice].blank? %>
>         <div id="noticecontainer">
>             <div id="noticecontent">
>                 <h4 class="notice">
>                 <%= flash[:notice] %>
>             </div>
>         </div>
>         <% end %>
>         <% if !flash[:error].blank? %>
>         <div id="errornoticecontainer">
>             <div id="errornoticecontent">
>                 <h4 class="notice">
>                 <%= flash[:error] %>
>             </div>
>         </div>
>         <% end %>
>         <div id="contentcontainer">
>             <div id="content"><%= yield %></div>
>         </div>
>         <div id="footercontainer">
>             <div id="footercontent">
>                 <p>Mash's Wing Ranch&reg; All Rights Reserved 2012</p>
>             </div>
>         </div>
>     <%= yield :scripts %>
>     </body>
>     </html> 
> ```

`<%= gmaps4rails(@json) %>`在我看来，我也添加了。

# apache-camel - 这是一个错误吗？@Outheader anootation 为空，但从交换它是一个 Map

> ID：13481116
> 
> 赞同：0
> 
> 时间：2012-11-20T20:00:05.077
> 
> 标签：apache-camel

我试过@OutHeaders outHeaderBound - 我在调试中检查过，我可以看到它是空的。如果我为 outHeaderBound 初始化一个新的哈希表/映射，标题键/值不会传播到下游队列。

例如代码片段：

```
 public void populateCorrelationId(@Body String body, @Headers Map<String, Object> headers,
    @OutHeaders Map<String, Object> outHeaderBound, Exchange exchange) {
Map<String, Object> outHeader = exchange.getOut().getHeaders();
String msgId = (String) headers.get(msgIdKey);
String currentCorrId = (String) headers.get(correlationIdKey); 
```

我试过`outHeader = exchange.getOut().getHeaders()`了，我得到了一个空地图，并且我放入 outHeader 的标题得到了传播。

我希望这`@OutHeader`两者`exchange.getOut.getHeader()`都必须给出一个空地图，而不是一个给空的地图。

这是一个错误吗？或用于某些功能。

糟糕，我无法提交调试会话的屏幕截图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:28:42.537

请参阅此常见问题解答 - [http://camel.apache.org/using-getin-or-getout-methods-on-exchange.html](http://camel.apache.org/using-getin-or-getout-methods-on-exchange.html)

并查看 Exchange 上 getOut() 方法的 javadoc，然后您会看到如果 getOut 为空，它将延迟创建空消息。因此一个是空的，另一个是空映射，因为后者是到期的，getOut 创建了一个空消息。

[http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/Exchange.html](http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/Exchange.html)

# mysql - 使用 excel 日期导入 phpmyadmin sql

> ID：13481119
> 
> 赞同：2
> 
> 时间：2012-11-20T20:00:08.367
> 
> 标签：mysql, excel

我在 excel (CSV) 中有一个表格，我正在将其导入 phpmyadmin。

单元格显示日期很好，例如：09/11/2012 0:00 单元格格式为“自定义”

当我将表格导入 phpmyadmin 时，所有日期都变为：0000-00-00 00:00:00

将它们放入excel的正确方法是什么，以便我可以将它们导入数据库。

以及如何将它们转换为正确的格式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T20:15:49.717

将您的 Excel 日期格式化为 php 接受的格式。例如 yyyy-mm-dd h:mm:ss

在 excel 中使用以下步骤：

*   右键单击包含日期的列标题。

    *   选择格式化单元格

    *   单击“自定义”类别

    *   在输入框中粘贴“yyyy-mm-dd h:mm:ss”。

*。保存文档。

在 php SQL 查询中，如果 php 端将日期视为字符串，请务必将此列设置为日期。

您可以使用：'STR_TO_DATE(@date, '%Y-%c-%e %H:%i:%S')'</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T17:04:55.253

我遇到了这个问题，并认为我将它们格式化为 format `YYYY-MM-DD`。它们以这种方式显示，但在公式栏中它仍然是`DD/MM/YYYY`格式。所以我积极地改变了日期：

```
=YEAR(A1)&"-"&IF(MONTH(A1)<10;"0";"")&MONTH(A1)&"-"&IF(DAY(A1)<10;"0";"")&DAY(A1) 
```

然后复制这些单元格的值来替换原来的...

# ruby-on-rails - ActiveRecords 从连接表返回模型对象

> ID：13481121
> 
> 赞同：1
> 
> 时间：2012-11-20T20:00:11.523
> 
> 标签：ruby-on-rails, activerecord, ruby-on-rails-3.1

对于我正在构建的简单闪存卡示例，我有以下数据库：

```
create_table "card_associations", :force => true do |t|
  t.integer  "card_id"
  t.integer  "deck_id"
end

create_table "cards", :force => true do |t|
  t.string   "question"
  t.string   "answer"
end

create_table "decks", :force => true do |t|
  t.string   "name"
  t.string   "description"
end 
```

我已经通过我所有模型中的关系设置了 has_many。现在我希望能够从连接表中返回所有卡片的列表，给定卡片组 ID。如果我运行查询：

> CardAssociation.find_by_deck_id(3).card

它会重新运行第一张卡组 ID 为 3 的卡。但是当我尝试时。

> CardAssociation.find_all_by_deck_id(3).card

我得到错误

> NoMethodError：未定义的方法“卡”#

有人可以帮我弄这个吗？我觉得我犯了一个非常简单的错误。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:04:04.333

find_all_* 方法总是返回一个数组（可能是空的）！

```
CardAssociation.find_all_by_deck_id(3) # => Array of results
CardAssociation.find_all_by_deck_id(3).first # => first result of the Array or nil if no result 
```

我建议你先阅读[Ruby on Rails Style Guide](https://github.com/bbatsov/rails-style-guide)，然后使用 Rails3 的 ActiveRecord 查找对象的方式：

```
CardAssociation.where(:deck_id => 3) # => Array of results
CardAssociation.where(:deck_id => 3).first # => first result of the Array if exists 
```

## 在您的情况下，可以在 Card 模型上设置范围：

你说：“*现在我希望能够从连接表中返回所有卡片的列表，给定卡片组 id* ”

```
class Card < ActiveRecord::Base
  scope :for_deck, lambda { |deck| joins(:card_associations).where('card_associations.deck_id = ?', deck.try(:id) || deck) }
end 
```

这个范围可以像下面这样使用：

```
Card.for_deck(deck) # returns an Array of Card objects matching the deck.id 
```

作用域中定义的参数`Card.for_deck(deck)`可以是`deck`对象**或**deck_id（整数类型）

希望这有帮助！

# asp-classic - 如果 TinyURL API 不起作用怎么办..？

> ID：13481125
> 
> 赞同：0
> 
> 时间：2012-11-20T20:00:37.037
> 
> 标签：asp-classic, vbscript

我有一个 vbscript 函数可以从常规 url 创建一个 tinyurl。

```
FUNCTION GetShortURL(strUrl)
  Dim oXml,strTinyUrl,strReturnVal
  strTinyUrl = "http://tinyurl.com/api-create.php?url=" & strUrl
  set oXml = Server.CreateObject("Msxml2.ServerXMLHTTP.3.0")
  oXml.Open "GET", strTinyUrl, false
  oXml.Send
  strReturnVal = oXml.responseText
  Set oXml = nothing
  GetShortURL = strReturnVal
END FUNCTION 
```

当 tinyurl api 关闭或无法访问时，我遇到了问题，导致我的脚本失败：

**msxml3.dll 错误“80072efe”与服务器的连接异常终止**

有没有我可以添加到此功能以防止错误并使用它具有的长 URL 的保护措施..？

提前谢谢了，

新杰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:51:38.860

如果您只想`strUrl`在调用失败时返回，您可以使用[On Error Resume Next](http://ss64.com/vb/onerror.html)

```
FUNCTION GetShortURL(strUrl)
  on error resume next
  Dim oXml,strTinyUrl,strReturnVal
  strTinyUrl = "http://tinyurl.com/api-create.php?url=" & strUrl
  set oXml = Server.CreateObject("Msxml2.ServerXMLHTTP.3.0")
  oXml.Open "GET", strTinyUrl, false
  oXml.Send
  strReturnVal = oXml.responseText
  Set oXml = nothing
  'Check if an error occurred.
  if err.number = 0 then
     GetShortURL = strReturnVal
  else
     GetShortURL = strUrl
  end if
END FUNCTION 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T20:51:51.310

显然，您需要某种错误处理。一般来说，VBScript 的错误处理并不有趣，但对于您的规范 - 获取正确的东西或默认值以防万一/不关心什么问题 - 您可以使用一种很好且简单的方法：

将您的原始功能减少到

1.  为函数名分配默认值（为失败做准备）
2.  On Error Resume Next（禁用 VBScript 的默认错误处理，即崩溃）
3.  将辅助函数的返回值分配给函数名（为成功做准备）

在代码中：

```
Function GetShortURL2(strUrl)
  GetShortURL2 = strUrl
 On Error Resume Next
  GetShortURL2 = [_getshorturl](GetShortURL2)
End Function 
```

我使用 [] 是为了能够使用“非法”函数名，因为我想强调不应该直接调用 _getshorturl()。_getshorturl() 中的任何错误都将导致分配跳过并在下一行恢复（离开函数，返回默认值，重置为默认错误处理）。

辅助函数包含原始函数的“关键部分”：

```
Function [_getshorturl](strUrl)
  Dim oXml : Set oXml = CreateObject("Msxml2.ServerXMLHTTP.3.0")
  oXml.Open "GET", "http://tinyurl.com/api-create.php?url=" & strUrl, False
  oXml.Send
  [_getshorturl] = oXml.responseText
End Function 
```

无论哪个操作失败，程序流程都将在 GetShortURL2() 的“结束函数”行/处恢复。

**补充：**对通常做法的评论（参见 Daniel Cook 的提议）

如果您关闭错误处理（并且“On Error Resume Next”就是这样），那么您就如履薄冰：所有错误都被隐藏了，而不仅仅是您侦察的错误；您的脚本将在所有 Next 行中执行操作，无论是否提供了必要的先决条件或准备工作。

因此，您应该将范围限制为一条风险线：

```
Dim aErr
...
On Error Resume Next
   SomeRiskyAction
   aErr = Array(Err.Number, Err.Description, Err.Source)
On Error Goto 0
If aErr(0) Then
   deal with error
Else
   normal flow
End If 
```

或在 OERN 范围内的每一行之后检查

```
On Error Resume Next
   SomeRiskyAction1
   If Err.Number Then
      deal with error
   Else
      SomeRiskyAction2
      If Err.Number Then
         deal with error
      Else
         ...
      End If
   End If 
```

当我说“不好玩”时，这就是我的意思。将有风险的代码放入函数中将避免这种麻烦。

# json - 使用没有增强器的 Datanucleus 将 JSON 字符串持久化到 OrientDB

> ID：13481130
> 
> 赞同：0
> 
> 时间：2012-11-20T20:00:57.340
> 
> 标签：json, datanucleus

我正在尝试将一个 json 字符串（myobject.toJson() 给我我的 json 对象）保存到 orientdb。但我遇到“org.datanucleus.exceptions.ClassNotPersistableException：类“java.lang.String”不可持久化。这意味着它要么没有被增强，要么文件的增强版本不在 CLASSPATH 中（或被未增强的版本隐藏），或找不到该类的元数据/注释。”

我该如何解决这个问题？

谢谢戈皮

这是错误堆栈

> java.lang.IllegalArgumentException：类型（“java.lang.String”）不是实体的类型，但需要在 org.datanucleus.api.jpa.JPAEntityManager.assertEntity(JPAEntityManager.java:1330) 的 org 处进行此操作.datanucleus.api.jpa.JPAEntityManager.persist(JPAEntityManager.java:529) 在 com.x.myclass.receive(Myclass.java:90) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) at java.lang.Thread.run(Thread.java:722) 引起：org.datanucleus.exceptions.ClassNotPersistableException：类“java.lang .String" 是不可持久的。这意味着它要么没有得到增强，或者文件的增强版本不在 CLASSPATH 中（或者被未增强版本隐藏），或者找不到该类的元数据/注释。在 org.datanucleus.ObjectManagerImpl.assertClassPersistable(ObjectManagerImpl.java:5464) 在 org.datanucleus.api.jpa.JPAEntityManager.assertEntity(JPAEntityManager.java:1326) ... 还有 9 个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T22:33:19.097

Datanucleus插件支持差，为什么不直接使用OrientDB对象接口呢？

# ios - Urban Airship 间歇性警报故障

> ID：13481134
> 
> 赞同：1
> 
> 时间：2012-11-20T20:01:05.200
> 
> 标签：ios, apple-push-notifications, urbanairship.com

这是我遇到的问题：

1.  我为临时构建配置了 5 台 iOS 设备，以便通过试飞进行分发。
2.  我们的 UA 应用程序配置为生产。
3.  使用 UA 控制台中的丰富推送广播工具，我发送了丰富的推送广播。
4.  所有 5 台设备都会在通知中心收到警报。
5.  我再发一个富推播。
6.  除#2 外的所有设备都会在通知中心收到警报。
7.  发送另一个广播，除#1 和#4 之外的所有设备都会在通知中心收到警报。
8.  依此类推，所有设备都接收到一些推送警报，而其他设备则随机接收警报失败。应该注意的是，在每种情况下，推送都会出现在 UA 收件箱中。

这些失败似乎没有韵律或原因。我注意到每次推送的特定单个设备令牌都有一个错误，无论有多少设备未能在错误控制台中收到警报。

有什么想法可能导致这种情况吗？

# php - Laravel：从视图调用定义在 base_controller 中的函数

> ID：13481136
> 
> 赞同：14
> 
> 时间：2012-11-20T20:01:15.680
> 
> 标签：php, laravel, static-classes

在使用 laravel 框架时，如何在视图中调用 base_controller 中定义的函数。例如：

```
class Base_Controller extends Controller {

    public static function format_something()
    {
         return something;
    }
} 
```

如何在视图文件中调用 format_something()？

通常我得到的错误看起来像这样：方法 [link_to_action] 没有在 View 类上定义。

可能是一个愚蠢的问题，但提前谢谢！

**编辑**

好的！首先，执行此类操作的正确位置是在库文件夹中。其次，问题是你的班级不能有下划线。

所以在应用程序/库中，我用类制作了文件 AppHelper.php

```
class AppHelper {

    public static function format_something()
    {
        return something;
    }
} 
```

并且可以这样称呼它：

```
$formated = AppHelper::format_something; 
```

感谢您的帮助和良好的论坛找到 Boofus McGoofus。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-06-02T16:40:19.013

对我来说正在工作：

创建目录“helpers”或其他任何文件：

```
// app/helpers/AppHelper.php

class AppHelper {

    public static function format_something()
    {
        return something;
    }
} 
```

添加路径到 composer.json

```
// composer.json

    "autoload": {
        "classmap": [
                    "app/helpers"   // <-------- add this line
        ]
    }, 
```

运行：（重新加载自动加载）

```
composer dump-autoload 
```

现在您可以致电：

```
$formated = AppHelper::format_something(); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-20T20:07:17.483

**此答案是为 Laravel 3 编写的。对于 Laravel 4 及更高版本，Lajdák Marek 使用 Composer 的自动加载器的答案更好。**

像`format_something()`这样的功能不属于控制器。控制器应该只是从各种来源收集数据并将其传递给视图。它的工作主要是路由。

我在应用程序文件夹中为我所有的小助手功能创建了一个名为“helpers”的文件夹。为了确保我的所有控制器、视图和模型都可以访问它们，我在我的`start.php`文件中包含了以下内容：

```
foreach(glob(path('app').'helpers/*.php') as $filename) {
    include $filename;
} 
```

我怀疑有更好的方法可以做到这一点，但到目前为止它对我有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-19T16:54:40.983

你可以从[Laravel 框架本身](https://github.com/laravel/framework/blob/1b6d40294fb9a8700c74fafe68f776dc99dc4690/src/Illuminate/Foundation/helpers.php#L774)中获得灵感。

我将以您的格式化程序为例，并参考`url`Laravel 框架中的帮助程序。

首先创建您自己的`helpers.php`文件：

```
<?php

if (! function_exists('format_that')) {
    /**
     * Generate something
     *
     * @param  string  $text
     * @return string
     */
    function format_that($text)
    {
        return app('formatter')->format_that($text);
    }
} 
```

并将[其添加](https://github.com/laravel/framework/blob/1b6d40294fb9a8700c74fafe68f776dc99dc4690/composer.json#L85)到您的`composer.json`文件中：

```
"autoload": {
      "files": [
          "app/helpers/helpers.php"
      ]
} 
```

运行此命令以重新创建自动加载 php 文件：

```
$ composer dumpautoload 
```

创建您的[服务提供商](https://github.com/laravel/framework/blob/1b6d40294fb9a8700c74fafe68f776dc99dc4690/src/Illuminate/Routing/RoutingServiceProvider.php#L48) `app/Providers/FormatterServiceProvider.php`：

```
<?php

namespace Illuminate\Routing;

use Illuminate\Support\ServiceProvider;
use App\Helpers\FormatGenerator;

class FormatterServiceProvider extends ServiceProvider
{
    /**
     * Register the service provider.
     *
     * @return void
     */
    public function register()
    {
        $this->app['formatter'] = $this->app->share(function ($app) {
            return new FormatGenerator($app['request']);
        });
    }
} 
```

[注册](https://github.com/laravel/framework/blob/5490b8f00564bb60839002f86828e27edd1e5610/src/Illuminate/Foundation/Application.php#L187)您的服务提供商。Laravel 框架调用`register`方法，但您只需将其添加到您的应用程序配置文件中`config/app.php`：

```
 'providers' => [

      /*
       * Application Service Providers...
       */
      App\Providers\AppServiceProvider::class,
      // other providers...
      App\Providers\FormatterServiceProvider::class,

 ] 
```

最后，创建您的[实际生成器类](https://github.com/laravel/framework/blob/1b6d40294fb9a8700c74fafe68f776dc99dc4690/src/Illuminate/Routing/UrlGenerator.php) `app/Helpers/FormatGenerator.php`

```
<?php

namespace App\Helpers;

use Illuminate\Http\Request;

class FormatGenerator
{

    protected $request;

    /**
     * Create a new URL Generator instance.
     *
     * @param  \Illuminate\Routing\RouteCollection  $routes
     * @param  \Illuminate\Http\Request  $request
     * @return void
     */
    public function __construct(Request $request)
    {
        $this->request = $request;
    }

    public function format_that($text){
        if ($request->path() == "home"){
            return mb_strtoupper($text);
        }
        else{
            return $text;
        }
    }

} 
```

您可以选择创建[一个 Facade](https://github.com/laravel/framework/blob/1b6d40294fb9a8700c74fafe68f776dc99dc4690/src/Illuminate/Support/Facades/URL.php) `app/Facade/Formatter.php`，以便能够执行以下操作`Formatter::format_that($text)`：

```
<?php

namespace App\Facades;

use Illuminate\Support\Facades\Facade;

/**
 * @see \App\Helpers\FormatGenerator
 */

class Formatter extends Facade
{
    protected static function getFacadeAccessor() { return 'formatter'; }
} 
```

你可以问自己：

*   **为什么是门面？**您可以通过简单地调用`Formatter::format_that($text)`而不是`app('formatter')->format_that($text)`. 糖语法真的。
*   **为什么是服务提供商？**依赖注入。如果您需要使用`Request`或想要构建一个复杂的对象，服务提供者将为您处理并使其在您的`$app`对象中可用。

# wordpress - Nginx 重定向设置

> ID：13481137
> 
> 赞同：0
> 
> 时间：2012-11-20T20:01:17.083
> 
> 标签：wordpress, nginx

我的 Nginx 设置目前有这个：

```
 location / {
       if (!-e $request_filename){
            rewrite ^/(.*)$ https://domain.com/index.php?id=$1 redirect;
       }
 } 
```

基本上对于不存在的页面（404），它将用户重定向到主页。但是现在我在[https://domain.com/blog/](https://domain.com/blog/)有一个 wordpress 博客设置，但是任何 wordpress 项目，例如。[https://domain.com/blog/test](https://domain.com/blog/test)也被重定向到主页。我想知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:44:54.067

你不应该使用`if`. 请阅读 nginx wiki 上的[IfIsEvil](http://wiki.nginx.org/IfIsEvil)页面。相反，您应该使用`try_files`.

你的配置应该看起来更像这样：

```
location / {
    try_files $uri $uri/ @notfound
}

location @notfound {
    rewrite ^(.*)$ https://domain.com/index.php?id=$1 redirect; 
} 
```

真的，你根本不应该这样做。相反，您应该设置[自定义错误](http://wiki.nginx.org/HttpCoreModule#error_page)页面。将每个 404 重定向到主页对您的 SEO 不利。

编辑：我刚刚意识到您正在将 URL 传递给“id”。所以我删除了关于使用`.`而不是`^(.*)$`. 错误页面仍然是您最好的选择。`$_SERVER['REQUEST_URI']`您可以使用（如果您避免硬重定向）获取 URL 。

此[页面](http://wiki.nginx.org/Configuration)包含一些可能对您有所帮助的示例配置。它有一些 wordpress 配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:33:16.937

为路径以'/blog/'开头的请求的url做一些不同的事情，添加一个相应的位置，如下所示：

```
location / {
   if (!-e $request_filename){ 
     rewrite ^/(.*)$ https://domain.com/index.php?id=$1 redirect; }
} 

location /blog/ {
    #add in whatever directives are needed to serve your wordpress
} 
```

# node.js - 什么是好的 node.js / mongoose 表单构建器？

> ID：13481138
> 
> 赞同：3
> 
> 时间：2012-11-20T20:01:24.953
> 
> 标签：node.js, mongodb, express, mongoose

通过使用其他框架，我已经习惯了不手动构建表单并将其映射到 db 对象。由于使用了 node.js 和 mongoose。我正在寻找一个允许以下内容的表单生成器：

1.  自动将猫鼬对象映射到表单字段
2.  处理“新”和“更新”用例
3.  允许围绕表单字段进行类注入以进行样式设置
4.  包括验证
5.  允许添加自定义字段

有谁知道 node.js、express、mongoose 的任何此类表单构建器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-15T19:13:05.490

我知道这是一种古老的讨论，但我只是想推荐查看 Formage (npm: formage)

[https://github.com/Empeeric/formage](https://github.com/Empeeric/formage)

设置简单明了。您可以在几分钟内查看它，希望这可以帮助您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T20:34:13.773

我没有使用过它，也没有深入研究过它，但[https://github.com/oJshua/mongoose-forms](https://github.com/oJshua/mongoose-forms)看起来可能很有趣。

# spring - 需要帮助为 Spring Security CAS 客户端创建“成功的身份验证”页面

> ID：13481140
> 
> 赞同：2
> 
> 时间：2012-11-20T20:01:28.190
> 
> 标签：spring, spring-mvc, spring-security, cas

我正在使用 Spring MVC 编写一个客户端应用程序，该应用程序将对 Spring Security CAS 服务器进行身份验证。

我遇到的问题是，用户认证成功后，浏览器显示 404 错误。我不确定如何在我的应用程序中设置“成功”页面。还是我需要在 CAS 服务器属性中的某处定义回调 url？到目前为止，这是我的代码：

**网页.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<!-- The definition of the Root Spring Container shared by all Servlets 
    and Filters -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/applicationContext-security.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list> 
```

**applicationContext-security.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:security="http://www.springframework.org/schema/security"
xmlns:sec="http://www.springframework.org/schema/security" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                    http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<!-- Enable security, let the casAuthenticationEntryPoint handle all intercepted 
    urls. The CAS_FILTER needs to be in the right position within the filter 
    chain. -->
<security:http entry-point-ref="casAuthenticationEntryPoint"
    auto-config="true">
    <security:intercept-url pattern="/**" access="ROLE_USER"></security:intercept-url>
    <security:custom-filter position="CAS_FILTER"
        ref="casAuthenticationFilter"></security:custom-filter>
</security:http>

<!-- Required for the casProcessingFilter, so define it explicitly set and 
    specify an Id Even though the authenticationManager is created by default 
    when namespace based config is used. -->
<security:authentication-manager alias="authenticationManager">
    <security:authentication-provider
        ref="casAuthenticationProvider"></security:authentication-provider>
</security:authentication-manager>

<!-- This section is used to configure CAS. The service is the actual redirect 
    that will be triggered after the CAS login sequence. -->
<bean id="serviceProperties" class="org.springframework.security.cas.ServiceProperties">
    <property name="service"
        value="https://localhost:8443/cas/j_spring_cas_security_check"></property>
    <property name="sendRenew" value="false"></property>
</bean>

<!-- The CAS filter handles the redirect from the CAS server and starts 
    the ticket validation. -->
<bean id="casAuthenticationFilter"
    class="org.springframework.security.cas.web.CasAuthenticationFilter">
    <property name="authenticationManager" ref="authenticationManager"></property>
</bean>

<!-- The entryPoint intercepts all the CAS authentication requests. It redirects 
    to the CAS loginUrl for the CAS login page. -->
<bean id="casAuthenticationEntryPoint"
    class="org.springframework.security.cas.web.CasAuthenticationEntryPoint">
    <property name="loginUrl" value="https://localhost:8443/cas/login"></property>
    <property name="serviceProperties" ref="serviceProperties"></property>
</bean>

<!-- Handles the CAS ticket processing. -->
<bean id="casAuthenticationProvider"
    class="org.springframework.security.cas.authentication.CasAuthenticationProvider">
    <property name="userDetailsService" ref="userService"></property>
    <property name="serviceProperties" ref="serviceProperties"></property>
    <property name="ticketValidator">
        <bean class="org.jasig.cas.client.validation.Cas20ServiceTicketValidator">
            <constructor-arg index="0" value="https://localhost:8443/cas">
            </constructor-arg>
        </bean>
    </property>
    <property name="key" value="cas"></property>
</bean>

<!-- The users available for this application. -->
<security:user-service id="userService">
    <security:user name="user" password="user" authorities="ROLE_USER"></security:user>
</security:user-service> 
```

我将不胜感激任何帮助！

以上代码来自以下教程：[http ://www.oudmaijer.com/2009/12/28/spring-3-spring-security-3-cas-3-3-4-integration/](http://www.oudmaijer.com/2009/12/28/spring-3-spring-security-3-cas-3-3-4-integration/)

* * *

更新：这是网络流（取自 Firebug）：

1.  用户点击`https://localhost:8443/SpringMVC_CAS/secure/index.jsp`

2.  浏览器执行“302 临时移动”`/myapp/secure/index.jsp`

3.  CAS 提示登录`https://localhost:8443/cas/login?service=https%3A%2F%2Flocalhost%3A8443%2Fcas%2Fj_spring_cas_security_check`

4.  `https://localhost:8443/cas/j_spring_cas_security_check?ticket=ST-17-RHf3OTJXAWePgzVGP2nc-cas`

5.  浏览器显示`https://localhost:8443/cas/login?ticket=ST-17-RHf3OTJXAWePgzVGP2nc-cas`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T16:35:31.677

你可以通过添加`AuthenticationSuccessHandler`这样的来做到这一点：

```
<bean id="casAuthenticationFilter" class="org.springframework.security.cas.web.CasAuthenticationFilter">
    <property name="authenticationManager" ref="authenticationManager"/>
    <property name="authenticationFailureHandler">
        <bean class="org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler">
            <property name="defaultFailureUrl" value="/casfailed.jsp"/>
        </bean>
    </property>
    <property name="authenticationSuccessHandler">
        <bean class="org.springframework.security.web.authentication.SavedRequestAwareAuthenticationSuccessHandler">
            <property name="defaultTargetUrl" value="/"/>
        </bean>
    </property>
</bean> 
```

如果您也将 alwaysUseDefaultTargetUrl 属性设置为 true，则 defaultTargetUrl 将用于目标，否则将在身份验证过程开始之前重定向到原始目标。

也可以看看：

*   [SavedRequestAwareAuthenticationSuccessHandler](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/web/authentication/SavedRequestAwareAuthenticationSuccessHandler.html)

*   [SimpleUrlAuthenticationSuccessHandler](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/web/authentication/SimpleUrlAuthenticationSuccessHandler.html)

# java - 从使用 EL 设置的 html 表单中获取 servlet 中的请求参数

> ID：13481155
> 
> 赞同：0
> 
> 时间：2012-11-20T20:02:18.053
> 
> 标签：java, jsp, servlets, el

我有一个带有以下 EL/html 标签的 JSP：

```
 <c:forEach var="key" items="${resource.stringPropertyNames()}">
    <tr>
        <td>${key}</td>
        <td><input type = "text" name = "${key}" value = "${resource.get(key)}"></td>                           
    </tr>
    </c:forEach> 
```

当我的 jsp 被渲染时，第一个`<td>`标签显示 ${key} 的评估值。然而，在`<input>`标签中，${key} 没有被正确评估。当我尝试从我的 servlet ( `request.getParameter(StringKey)`) 中检索输入作为请求参数时，我得到的文字`$key`没有大括号。当我这样做时，我会得到在 EL`request.getParameter("$key")`中计算为的字符串的多个值。`${resource.get(key)}`

到底是怎么回事？

**编辑**

控制器方法（使用spring）代码：

```
 @RequestMapping(value = URI_PATH + "{fileName}", method = RequestMethod.GET)
    public String getProperties(@PathVariable String fileName, ModelMap modelMap) {
        Properties resource = ..//get properties file
        modelMap.addAttribute("resource", resource);
        return "configuration" // maps to my jsp;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:17:51.560

如果资源是一个地图，它是使用设置的`request.setAttribute("resource", resource)`

```
<c:forEach var="entry" items="${resource}">
<tr>
    <td>${entry.key}</td>
    <td><input type = "text" name = "${entry.key}" value = "${entry.value}"></td>                           
</tr>
</c:forEach> 
```

# php - 使用更多变量会使代码效率降低吗？

> ID：13481160
> 
> 赞同：-1
> 
> 时间：2012-11-20T20:02:37.363
> 
> 标签：php, performance

使用更多的变量对代码的效率有什么影响吗？
IE 执行此代码：

```
function get_random_string($valid_chars, $length)
{
    $random_string = "";
    $num_valid_chars = strlen($valid_chars);
    for ($i = 0; $i < $length; $i++)
    {
        $random_pick = mt_rand(1, $num_valid_chars);
        $random_char = $valid_chars[$random_pick-1];
        $random_string .= $random_char;
    }
    return $random_string;
} 
```

比这更有效地工作：

```
function get_random_string($valid_chars, $length)
{
    $random_string = "";
    for ($i = 0; $i < $length; $i++)
    $num_valid_chars=strlen($valid_chars);
    {
        $random_string .= $valid_chars[mt_rand(1, $num_valid_chars)-1];
    }
    return $random_string;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T20:07:32.217

最后，除非您的真实代码与示例完全不同，否则您不会注意到差异。

请记住，即使 PHP 本身没有被编译，代码仍然会被解析并编译操作码，甚至缓存。结果可能与您最初编写的代码大不相同。

作为开发人员，您的工作是编写干净、可读的代码来回答客户的请求。显然，不要使用强制使代码臃肿和缓慢的技术，剩下的就是 Zend Optimizer 的工作，不用担心。

# image - 如何将媒体库中的图像数据绑定到列表框？

> ID：13481169
> 
> 赞同：0
> 
> 时间：2012-11-20T20:03:45.853
> 
> 标签：image, windows-phone-7, listbox, windows-phone-7.1, media-library

我想将 ListBox 与媒体库中的图像绑定。

直到现在我已经这样做了，但它似乎不起作用：

xml代码：

```
<ListBox Name="pictureHolder" FlowDirection="LeftToRight" 
                 Width="445" Margin="0,417,12,26"
                 ScrollViewer.HorizontalScrollBarVisibility="Auto"
                 ScrollViewer.VerticalScrollBarVisibility="Disabled">
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal"/>
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Image Name="imageFile" Source="{Binding Picture}"/>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

cs代码：

```
private void bindPictures()
    {
        pictureHolder.ItemsSource = library.Pictures;
    } 
```

代码有什么问题？？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:08:49.097

尝试搜索msdn它得到了关于它的整篇文章

# transactions - “从长远来看，两阶段提交 [...] 总是会导致问题” - 为什么？

> ID：13481171
> 
> 赞同：1
> 
> 时间：2012-11-20T20:03:58.863
> 
> 标签：transactions, cqrs

在[CQRS Journey 的第 5 章](http://msdn.microsoft.com/en-us/library/jj591563.aspx)中，有一个虚构的对话框，称为在两个开发人员之间*从会议管理有界上下文推送更改。*他们正在讨论 CQRS 架构中的事务选项，以将保存和发布事件绑定在一起。在最后的第 4 段中，开发人员 2 说：

> “其次，我们试图避免两阶段提交，因为从长远来看它们总是会导致问题。”

我想知道为什么会这样。

谁能详细说明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T21:42:00.257

[你的咖啡店不使用 2PC](http://eaipatterns.com/docs/IEEE_Software_Design_2PC.pdf)给出了一个很好的解释：基本上它归结为由于同步时的等待而导致的可扩展性差。

# php - 新表列，用于每个回显复选框（php、mysql）

> ID：13481179
> 
> 赞同：1
> 
> 时间：2012-11-20T20:04:21.067
> 
> 标签：php, mysql, echo, html-table, implode

我正在使用下面的脚本通过使用explode/implode 来根据mySQL 表中的内容显示复选框。然后它会根据我的表格中位置字段包含的内容（例如，贵宾区、高架区、花园区）回显选中的复选框或未选中的复选框。

```
<?

$aColors = array("Upstairs Function Room", "Whole Raised Area", "VIP Area", "Piano Area", "DJ Table" , "Canopy area" , "Garden Area", "Whole Bar", "Back Bar Tables" , "Raised Area Table 1", "Raised Area Table 2", "Raised Area Table 3", "Raised Area Table 4", "Raised Area Table 5", "Raised Area Table 6");

//converting comma separated into array using explode function
$dbcolors= explode(',',$row['location']);

foreach ($aColors as $locations) {

    if(in_array($locations,$dbcolors)) {
        echo "<input name=\"locations[]\" type=\"checkbox\" value=\"$locations\" CHECKED> $locations <br> ";
    } else
    {
        echo "<input name=\"locations[]\" type=\"checkbox\" value=\"$locations\"> $locations <br>";
    }
}
?> 
```

这工作正常，但我只能让它回显一长串复选框......我想要将它显示在一个表格中，并为每 5 个显示的复选框创建一个新列（实际上我应该最终得到大约 3 列），但我对如何实现这一点感到困惑……非常感谢任何帮助。

抢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:37:57.817

最简单的方法是在外部`$i`初始化一个计数器，并在 foreach 内部递增它，然后每次为真时，您都会开始一个新列 ( )。`$i = 0``foreach``$i++``$i % 5 == 0``echo '</td><td>'`

[如果您有其他样式，则使用array_chunk()](http://de1.php.net/array%20chunk)像这样拆分数组可能更容易：`foreach (array_chunk($aColors, 5) as $block) { }`并使用`$block[0]`, `$block[1]`...`$block[4]`在`foreach`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T21:37:29.437

最终工作代码...

```
 <?

$aColors = array("Upstairs Function Room", "Whole Raised Area", "VIP Area", "Piano Area", "DJ Table" , "Canopy area" , "Garden Area", "Whole Bar", "Back Bar Tables" , "Raised Area Table 1", "Raised Area Table 2", "Raised Area Table 3", "Raised Area Table 4", "Raised Area Table 5", "Raised Area Table 6");

//converting comma separated into array using explode function
    $dbcolors= explode(',',$row['location']);
     $i = 0;     

          echo "<table border='0'><tr>    <td>";   

  foreach ($aColors as $locations) {

      $i++ ;

      if ($i % 5 == 0) {echo "</td>
    <td>";}

     if(in_array($locations,$dbcolors)) {
      echo "<input name=\"locations[]\" type=\"checkbox\" value=\"$locations\" CHECKED><span style='font-size:9px;'> $locations</span> <br> ";
          } else
          {
      echo "<input name=\"locations[]\" type=\"checkbox\" value=\"$locations\"> <span style='font-size:9px;'> $locations </span><br>";
                  }
              }

               echo "</td>
  </tr>
</table>";
?> 
```

# java - 如何从任何 Java 代码引用源目录中的文件？

> ID：13481182
> 
> 赞同：2
> 
> 时间：2012-11-20T20:04:24.753
> 
> 标签：java

假设我有一个目录，其中包含存储在“src”源目录中某处的资源文件，其中包含模板、配置文件等内容。

我知道从 Servlet 我可以按名称访问文件，例如：

`File file = new File(ServletContact.getResource("some/namespace/filename.txt").getPath());`

从非 Servlet 我可以做到：

`File file = new File(Object.class.getResource("some/namespace/filename.txt").getPath());`

但问题是我有代码需要访问这些资源文件并且可以独立于运行时环境运行。例如，一些代码使用 servlet 中的模板（在 Tomcat 7 下）。其他代码作为 Quartz 后台作业运行并使用模板。`Object.class.getResource()`如果我在 Tomcat servlet 中尝试该方法，它会返回 null。

无论运行时环境、应用程序引擎等如何，如何以安全的方式访问资源文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:14:32.607

我会使用您项目中的任何类（例如域类），使用 getClassLoader() 或 getContextClassloader() 并提供资源的路径。应该管用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T20:22:28.880

要从**类路径**读取文件，您可以使用：

```
getClass().getClassLoader().getResourceAsStream("path/to/resource"); 
```

还有一个简单有用的**Spring**实用程序`ClassPathResource`类：

```
Resource resource = new ClassPathResource("path/to/resource"); 
```

# mysql - PHP 警告：[mysql 错误 3] 写入文件 '/tmp/ 时出错

> ID：13481183
> 
> 赞同：2
> 
> 时间：2012-11-20T20:04:27.420
> 
> 标签：mysql, centos, centos6, tmp

大家晚安，

我有一个运行 CentOS 6 的 VPS，它正在运行 PHP (5.4.8) 和 MySQL (5.5.28) 1cpu、2G RAM、200G 存储的 remi-test 安装。它用于使用 Piwigo 托管我的照片库。根据 PHPmyAdmin，该数据库有 1,385,133 条记录，占用 60.8 MiB。我拥有完全的 root 访问权限，并且我一直在 SSH 中做一些事情，但它对我来说仍然是全新的。

我一直看到这个错误，它似乎导致服务器的 CPU 使用率变高。似乎只是由网络蜘蛛引起的，但它每天只发生几次。

```
[warn] [client IP] mod_fcgid: stderr: PHP Warning: [mysql error 3] Error writing file '/tmp/MYq8M8yg' (Errcode: 28)
[warn] [client IP] mod_fcgid: stderr: SELECT id
[warn] [client IP] mod_fcgid: stderr: FROM piwigo_images i
[warn] [client IP] mod_fcgid: stderr: INNER JOIN piwigo_image_category ic ON id=ic.image_id
[warn] [client IP] mod_fcgid: stderr: INNER JOIN piwigo_image_tag it ON id=it.image_id
[warn] [client] mod_fcgid: stderr: WHERE tag_id IN (6,18,54,55,445,714)
[warn] [client IP] mod_fcgid: stderr: GROUP BY id
[warn] [client IP] mod_fcgid: stderr: HAVING COUNT(DISTINCT tag_id)=6
[warn] [client IP] mod_fcgid: stderr: ORDER BY file ASC, date_creation DESC in /var/www/vhosts/mydomain.com/subdomains/gallery/include/dblayer/functions_mysql.inc.php on line 770
[client IP] mod_fcgid: stderr: PHP Warning: mysql_fetch_assoc() expects parameter 1 to be resource, boolean given in /var/www/vhosts/mydomain.com/subdomains/gallery/include/dblayer/functions_mysql.inc.php on line 200 
```

一个快速的 df -h 显示，

```
Filesystem            Size  Used Avail Use% Mounted on
/dev/xvda1            4.0G  692M  3.3G  17% /
/dev/mapper/vg00-usr  4.0G  1.5G  2.4G  39% /usr
/dev/mapper/vg00-var  148G   43G   98G  31% /var
/dev/mapper/vg00-home 4.0G  136M  3.7G   4% /home
none                 1000M  112K 1000M   1% /tmp 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T22:55:18.933

错误代码 28 表示“设备上没有剩余空间”。

有时 MySQL 在多个步骤中处理复杂查询，同时将中间步骤的结果存储在 /tmp 目录中。即使单个查询没有使用您拥有的所有空间，在繁忙的服务器上同时运行多个查询也可能。

我认为你有两个选择：

1.  优化您的查询以一次处理更少的数据。在发布的查询中，最有可能的问题是内部连接，它创建了一个临时结果集，其中包含图像、类别和标签的所有可能组合，这比提到的 130 万条记录要多得多。

2.  在问题上投入资源：给 /tmp 更多空间或将 MySQL 临时目录移到[其他地方](http://dev.mysql.com/doc/refman/5.0/en/temporary-files.html)。

# php - 如果它们存在于 pdo 中，如何识别它们

> ID：13481184
> 
> 赞同：-1
> 
> 时间：2012-11-20T20:04:31.713
> 
> 标签：php, pdo

我有以下功能：

```
public function search_exists($word){
   $word=trim($word);
   $query="SELECT * FROM `search` WHERE `word`=$word";
   echo $query;
   $st=$this->pdo->query($query);
   if($st->fetch()){

      return true;
   }
   return false; 
```

}

我想检查行是否存在..问题是我是 pdo 的新手..当我知道有一行时它返回 false..

**更新**：

关于 sql_injection：

我用这个：

```
 $word=$pdo->quote($_GET['search']); 
```

我想像这样从查询中提取数据：

```
public function search_exists($word){
       $word=trim($word);
       $query="SELECT search_id FROM `search` WHERE `word`=$word";
       echo $query;
       $st=$this->pdo->query($query);
       while($row=$st->fetch()){

          return $row['search_id'];
       }
       return false;
   } 
```

问题..即使上面的查询也不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:08:43.587

如果`word`是字符串类型，您可以尝试用引号括起来：

```
$query="SELECT search_id FROM `search` WHERE `word` = '$word'"; 
```

如前所述，您应该[绑定参数](http://www.php.net/manual/en/pdostatement.bindparam.php)，然后您就不会遇到这个问题，因为它会在必要时为您添加引号。它将更好地保护您免受 Sql 注入。

从[手册](http://php.net/manual/en/pdo.query.php)中，不要调用`fetch()`，而是尝试迭代`$st`：

```
foreach($st as $row) {
  echo $row['search_id'];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T20:09:28.383

首先：使用准备好的语句绑定参数：

```
public function search_exists($word){
  $word=trim($word);
  $query="SELECT * FROM `search` WHERE `word`=:word";
  echo $query;
  $st=$this->pdo->prepare($query);
  $st->bindValue('word',$word);
  $st->execute();
  if($st->fetch()){

   return true;
  }
  return false;
} 
```

现在您的查询引用没有问题，并且没有 sql 注入的可能性。

那么，另一种可能是使用 count 语句，它是严格等价的

```
public function search_exists($word){
  $word=trim($word);
  $query="SELECT COUNT(*) FROM `search` WHERE `word`=:word";
  echo $query;
  $st=$this->pdo->prepare($query);
  return $st->fetchColumn() > 0; 
```

}

# 关于您的更新

如果要获取数据：

```
 public function search_exists($word){
      $word=trim($word);
      $query="SELECT * FROM `search` WHERE `word`=:word";
      echo $query;
      $st=$this->pdo->prepare($query);
      $st->bindValue('word',$word);
      $st->execute();
      $result = $st->fetch(PDO::FETCH_ASSOC);
      if(isset($result['id_result'])){

       return result['id_result'];
      }
      return false;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T20:11:10.797

尝试这个

```
public function search_exists($word){

$word=trim($word);

$query="SELECT COUNT(*) FROM `search` WHERE `word`=$word";

echo $query;

$st=$this->pdo->query($query);

if($st->fetchColumn()>0){
   return true;
}

return false; 
```

}

# c - 如何在C中阻止信号？

> ID：13481186
> 
> 赞同：1
> 
> 时间：2012-11-20T20:04:37.453
> 
> 标签：c, linux, signals, block, sigprocmask

我正在尝试创建一个程序来阻止信号 SIGUSR1 并解除对信号的阻止。在中间我想看到信号被阻止了`sigpending`。但是它总是说信号没有被阻塞，我可以在信号被阻塞的时候使用它。这是我拥有的代码。

```
#include <stdlib.h>
#include <stdio.h>
#include <signal.h>

static void signals(int signaln) 
{
  switch (signaln) {
  case SIGUSR1:
    printf("Signal SIGUSR1\n"); break;
  }
  return; 
}
main()
{
  sigset_t set,set2;
  struct sigaction sigs;
  sigs.sa_handler = signals;
  sigemptyset(&sigs.sa_mask);
  sigs.sa_flags=SA_ONESHOT;
  sigaction(SIGUSR1, &sigs,0);
  sigemptyset(&set);
  sigemptyset(&set2);
  sigaddset(&set,SIGUSR1);
  if(sigprocmask(SIG_BLOCK, &set, NULL)==0){
    printf("Blocking SISGUSR1...\n");
  }
  sigpending(&set2);
  if (sigismember(&set2,SIGUSR1)==1)
  {
    printf("The signal is blocked\n");  //it should print this
  }
  wait(2);
  kill(getpid(),SIGUSR1); //the signal shouldn't work
  wait(2);
  if(sigprocmask(SIG_UNBLOCK, &set, NULL)==0){
    printf("Unblocking SIGUSR1\n");
  }
} 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T20:17:43.467

`sigpending`不会告诉你信号是否被阻塞。它告诉您信号是否正在等待传递。（即信号被阻塞*，*已发送一个。）

Also, blocked doesn't meean that the signal won't be delivered; it means that the signal won't be delivered now. So you can send the signal, and it will be delivered as soon as the signal is unblocked; probably after the call to `sigprocmask(SIGUNBLOCKED...)` but before the call to `printf`, so you'll probably see the signal received message before you see the "unblocking" message.

# css - CSS3 变换旋转和对齐

> ID：13481192
> 
> 赞同：1
> 
> 时间：2012-11-20T20:05:18.573
> 
> 标签：css, transform

我有一个常规的无序列表，其中有一些列表项充当菜单导航 - 非常标准。我旋转了从中心旋转的列表项。列表中的菜单标题各不相同，所以看起来有点奇怪。我使用了 transform-origin 来改变项目左侧的旋转，而不是中心，但是当它像手臂一样旋转时，单词之间的间隙是不同的。有没有办法避免这种情况？所以它从左边旋转但每个单词之间的间隙是一致的？

```
<ul> 
     <li><a href="#">Culture</a></li>
     <li><a href="#">Eat &amp; Drink</a></li>
     <li><a href="#">Field Trips</a></li>
     <li><a href="#">Happenings</a></li>
     <li><a href="#">Locals</a></li>
    <li><a href="#">Our City</a></li>
</ul>​

ul {
    margin-top: 80px;
}
ul li {
    font-size: 9px;
    display: inline-block;
    text-transform: uppercase;
    margin-right: 10px;
    -webkit-transform: rotate(45deg);
    -moz-transform: rotate(45deg);
    -o-transform: rotate(45deg);
    transform: rotate(45deg);
    -webkit-transform-origin: 0 100%;
    -moz-transform-origin: 0 100%;
    -o-transform-origin: 0 100%;
    transform-origin: 0 100%;
}​ 
```

我已经为你包括了两个 jsFiddles。一种是对列表项进行变换，另一种是使用变换和变换原点。

[http://jsfiddle.net/9eNnN/](http://jsfiddle.net/9eNnN/)

[http://jsfiddle.net/aKXnz/](http://jsfiddle.net/aKXnz/)

谢谢大家，R

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:16:32.433

如果我理解您的要求，我相信您只需要在 li 上设置一致的宽度 - 如下所示：

```
li { width: 5%; } // you may need to play around with this value 
```

这是一个要演示的[jsfiddle](http://jsfiddle.net/9eNnN/3/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T20:28:58.290

我很想看到只使用 CSS 的解决方案！

同时，我可以为您的问题提供 javascript 解决方案：http: [//jsfiddle.net/aKXnz/1/](http://jsfiddle.net/aKXnz/1/)

在 CSS 中，将您的菜单定义为`position:absolute`. 这会将您的所有链接放在左边框上（一个在另一个上）。

在 Javascript 中

```
var myLis = document.getElementsByTagName('li');
for(var i= 0, len = myLis.length; i< len; i++)
{
    myLis[i].style.left = (30*i) + 'px';
}​ 
```

简单地说，浏览您的菜单并定义与左侧的距离每次都变大（线性）。你会得到你想要的:)

# java - 改变静态布尔值

> ID：13481194
> 
> 赞同：4
> 
> 时间：2012-11-20T20:05:26.873
> 
> 标签：java, static, boolean, public

我有一个任务让学校制作一个程序，结果要么是对的，要么是错的。一年是否是闰年。我目前遇到的问题是我使用的是公共静态布尔值而不是公共布尔值。这是我的代码：

```
public class Assignment {

    static boolean isLeapYear;

    public static void main(String[] args)
    {        
        int year = 2000;
        isLeapYear(year);
    }
    public static boolean isLeapYear(int year) {
        if (((year/100)%4 == 0 && year%4 ==0) || (year % 400 == 0))
            isLeapYear = true;

        else
            isLeapYear = false;

        System.out.println(isLeapYear);

        return isLeapYear;
    }
} 
```

目前 int 年是 2000 年，但规则如下：闰年是可以除以 4 的年份，除非该年是新世纪的开始（1700、1800、1900 ......）。因此，即使您可以将 1900 除以 4，您也不能将其除以 400，所以这是错误的。那么问题又来了：我需要做什么才能使用公共布尔值而不是公共静态布尔值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T20:07:27.337

如果要使方法非静态，则需要创建类的实例以从 main 方法调用该方法。然后你可以让你的`isLeapYear`变量非静态： -

```
boolean isLeapYear;
public static void main(String[] args)
{        
    int year = 2000;
    new Assigment().isLeapYear(year);
}
public boolean isLeapYear(int year) {
    // access isLeapYear as `this.isLeapYear` or just `isLeapYear`
} 
```

但是，准确地说，您不需要将结果存储在布尔变量中。如果要返回某个表达式的布尔值，则可以只返回该表达式。

因此，只需在您的方法中包含此代码也可以正常工作，并且更具可读性，并且让该方法是静态的：-

```
return (((year/100)%4 == 0 && year%4 ==0) || (year % 400 == 0)) 
```

从您的主要通话中：-

```
System.out.println("Year : " + year + ", is leap year: " + isLeapYear(year)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T20:10:01.360

您无需将此结果存储在任何地方。

采用：

```
public static boolean isLeapYear(int year) 
{
   return (((year/100)%4 == 0 && year%4 ==0) || (year % 400 == 0));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T20:12:24.177

静态方法只能访问静态变量，只有实例方法可以访问实例方法，如果你认为是面向对象的可以推断。

以防万一您应该存储布尔值 isLeapYear

```
public class Testing {
boolean isLeapYear;

public static void main(String[] args)
{        
    int year = 2000;
    new Testing().isLeapYear(year);
}
public boolean isLeapYear(int year) {
    if (((year/100)%4 == 0 && year%4 ==0) || (year % 400 == 0))
        isLeapYear = true;

    else
        isLeapYear = false;

    System.out.println(isLeapYear);

    return isLeapYear;
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T20:09:24.447

您的作业是否说它必须存储在类或实例变量中？如果不是，则不需要`public boolean isLeapYear`or `public static boolean isLeapYear`，只需返回*计算*结果并将其存储在局部变量中，如下所示：

```
public static boolean isLeapYear(int year) {
    return ((year % 4 == 0) && (year % 100 != 0)) || (year % 400 == 0); 
} 
```

在`main`方法中：

```
int year = 2000;
boolean isLeap = isLeapYear(year);
System.out.println(isLeap); 
```

# php - php获取点后使用的值

> ID：13481195
> 
> 赞同：1
> 
> 时间：2012-11-20T20:05:32.593
> 
> 标签：php

有没有办法让php制作这段代码：

```
myclass.randomthingwrittenhere 
```

作为

```
myclass.nexttodotoperator(randomthingwrittenhere)? 
```

我想将自己的数据库框架编写到数据库中，我想知道它是否可以以某种方式工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T20:08:37.823

### 访问对象上的成员？

我真的不确定你在你的例子中在做什么。当您访问对象的属性或调用方法时，您使用`->`语法，这与 JavaScript 不同，它可以使用`.`.

您可以将一些*魔术方法*添加到您的类中来处理此问题：

```
class MyClass {
    function __get ( $property ) {
        $this->something( $property );
    }
    function __call ( $method, $arguments ) {
        $this->something( $method, $arguments );
    }
} 
```

在此代码中，该类的任何实例都可以让您处理对实例本身未找到的成员的请求。

演示：[http ://codepad.org/3qB8gXfv](http://codepad.org/3qB8gXfv)

### 字符串操作？

话虽这么说，也许您根本不是在问类，而是在问字符串操作。如果我正确理解您的问题，请提供您的输入字符串：

```
$string = "myclass.randomthingwrittenhere"; 
```

然后将这两部分分成你的类和你的方法：

```
list($class, $method) = explode(".", $string); 
```

然后吐出新字符串，插入变量：

```
echo "$class.foobar($method)"; 
```

演示：[http ://codepad.org/vggOIA9U](http://codepad.org/vggOIA9U)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T20:11:26.300

你想看看php中的“魔术方法”：http: [//php.net/manual/en/language.oop5.magic.php](http://php.net/manual/en/language.oop5.magic.php)

在您的情况下，您可以编写这样的函数...

```
function __get($name) {
   return this->nexttodooperator($name); 
} 
```

# visual-studio-2010 - Visual Basic 2010 - 为每种语言创建新文件夹（如右键单击：创建新文件夹）

> ID：13481199
> 
> 赞同：0
> 
> 时间：2012-11-20T20:05:41.537
> 
> 标签：visual-studio-2010, directory

我的问题是：如何使用 Visual Basic 2010 创建一个文件夹，该文件夹的名称就像您在现有目录中通过右键单击创建一个新文件夹一样？（因此，如果我在表单上单击 button1，它会创建一个新目录，而无需我指定名称并在之后给它正确的编号 (1)、(2)、...）

不是 System.Globalization.CultureInfo 和手动更改语言的“if”（更像 environment.createnewfolder（没有文件夹名的路径）

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-09T00:43:45.290

这是代码：

```
MkDir("C:\Directory") 
```

这将在 C:\ 驱动器中创建一个名为“Directory”的目录（文件夹）。

# php - php/mySql-显示带有 mysql 路径的图像

> ID：13481202
> 
> 赞同：-1
> 
> 时间：2012-11-20T20:05:50.627
> 
> 标签：php, mysql

我正在尝试显示存储在 /img 文件夹中的图像。我的数据库表存储有关图像路径的信息。

到目前为止我所拥有的：

```
 $id = $_GET['id'];
    $query = "SELECT image_path FROM news_image WHERE image_id = '$id'";
    $result = mysql_query($query) or die('Error, query failed');
    $row = mysql_fetch_assoc($result);
    $filePath = $row['image_path']; 
```

我想显示这样的图像：

```
$image = echo '<img src="./' . $filePath . '" />'; 
```

如何使用上面代码中的 $id 变量来获取正确的图像？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T20:09:05.930

除了您使用`mysql_`查询（它们正在贬值）以及发布的代码对 SQL 注入开放之外，一切看起来都应该可以工作。您唯一需要做的就是摆脱`$image`这一行的变量：

```
$image = echo '<img src="./' . $filePath . '" />'; 
```

只需使用以下内容：

```
echo '<img src="./' . $filePath . '" />'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T20:08:47.643

你会这样做：

`$image = echo '<img src="./' . $filePath . '/'.$id.'.png" />';`

基本上，SRC 会`./FILEPATH/ID.png`假设这就是你想要的。

# linux - 是否有每个流行的 Linux 发行版和版本的 AMI 列表

> ID：13481203
> 
> 赞同：5
> 
> 时间：2012-11-20T20:05:55.257
> 
> 标签：linux, amazon-ec2, amazon-web-services, amazon-ami

我需要针对每个 linux 发行版/版本测试一个软件。我将使用亚马逊 AWS 是否有一个 AMI 列表，我可以将其复制粘贴到我的脚本中以自动化这个繁琐的过程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T09:19:02.613

亚马逊在他们的网站上提供了一个列表。 [https://aws.amazon.com/amis](https://aws.amazon.com/amis)

实际上我确信也可以通过 API 抓取和过滤列表，但不幸的是我找不到任何关于这个（想象的？）功能的文档

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-17T09:51:00.573

您可以从 aws 站点获取 AMI ID

下面是如何

使用图像页面查找 Linux AMI

*   [在https://console.aws.amazon.com/ec2/](https://console.aws.amazon.com/ec2/)打开 Amazon EC2 控制台。

*   从导航栏中，选择一个区域。无论您身在何处，您都可以选择任何可用的区域。这是您将在其中启动实例的区域。

*   在导航窗格中，选择 AMI。

*   （可选）使用过滤器选项来确定显示的 AMI 列表的范围，以仅查看您感兴趣的 AMI。例如，要列出 AWS 提供的所有 Linux AMI，请选择公共映像。选择搜索栏并从菜单中选择所有者，然后选择亚马逊图片。再次选择搜索栏以选择平台，然后从提供的列表中选择操作系统。

*   （可选）选择显示/隐藏列图标以选择要显示的图像属性，例如根设备类型。或者，您可以从列表中选择一个 AMI 并在详细信息选项卡中查看其属性。

*   您选择的平台和发行版的 AMI ID 将位于 AMI ID 选项卡中

更多详细信息：http: [//docs.aws.amazon.com/AWSEC2/latest/UserGuide/finding-an-ami.html](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/finding-an-ami.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T00:41:57.947

不知道其他 Linux 发行版，但 Ubuntu 有自己的网页和官方 ubuntu ec2 映像的各种 API

*   [机器消耗品 Ubuntu 云访客映像 可用性数据](https://help.ubuntu.com/community/UEC/Images#Machine_Consumable_Ubuntu_Cloud_Guest_images_Availability_Data)(API)
*   [http://cloud-images.ubuntu.com/locator/ec2/](http://cloud-images.ubuntu.com/locator/ec2/)

还有 Amazon Linux，我相信它基于 CentOS，[http://aws.amazon.com/amazon-linux-ami](http://aws.amazon.com/amazon-linux-ami)

# button - CRM2011 子网格按钮启用规则

> ID：13481209
> 
> 赞同：0
> 
> 时间：2012-11-20T20:06:42.180
> 
> 标签：button, dynamics-crm-2011, ribbon, subgrid

我有2个问题。

第一个问题：试图隐藏**子网格（功能区）中的OOB按钮，基于用户角色（通过调用javascript）**。是否可以？

第二个问题：通过“enablerule”javascript隐藏OOB按钮是不可能的，所以我尝试使用“enablerule”/javascript来禁用按钮。这是上面反映的以下代码。仍然不工作，但对于主窗体功能区按钮，下面的代码工作。

谁能帮帮我吗？

```
<Groups Id="Mscrm.SubGrid.quote.MainTab.Groups">
                        <Group Id="Mscrm.SubGrid.quote.MainTab.Management" Command="Mscrm.Enabled" Sequence="10" Title="$Resources:Ribbon.HomepageGrid.MainTab.Management" Description="$Resources:Ribbon.HomepageGrid.MainTab.Management" Image32by32Popup="/_imgs/ribbon/newrecord32.png" Template="Mscrm.Templates.Flexible2">
                          <Controls Id="Mscrm.SubGrid.quote.MainTab.Management.Controls">
                            <Button Id="Mscrm.SubGrid.quote.NewRecord" ToolTipTitle="$Resources(EntityDisplayName):Ribbon.SubGrid.MainTab.New" ToolTipDescription="$Resources(EntityDisplayName):Ribbon.Tooltip.New" Command="Mscrm.NewRecordFromGrid" Sequence="10" LabelText="$Resources(EntityDisplayName):Ribbon.SubGrid.MainTab.New" Image16by16="/_imgs/ribbon/NewRecord_16.png" Image32by32="/_imgs/ribbon/newrecord32.png" TemplateAlias="o1" />
                            <Button Id="Mscrm.SubGrid.quote.AddNewStandard" Command="Mscrm.AddNewRecordFromSubGridStandard" Sequence="20" LabelText="$Resources(EntityDisplayName):Ribbon.SubGrid.AddNew" Alt="$Resources(EntityDisplayName):Ribbon.SubGrid.AddNew" Image16by16="/_imgs/ribbon/NewRecord_16.png" Image32by32="/_imgs/ribbon/newrecord32.png" TemplateAlias="o1" ToolTipTitle="$Resources(EntityDisplayName):Mscrm_SubGrid_EntityLogicalName_MainTab_Management_AddNewStandard_ToolTipTitle" ToolTipDescription="$Resources(EntityDisplayName):Mscrm_SubGrid_EntityLogicalName_MainTab_Management_AddNewStandard_ToolTipDescription" />
            </Controls>
        </Group>

     <CommandDefinitions>
              <CommandDefinition Id="Mscrm.AddNewRecordFromSubGridStandard">
                <EnableRules>
                  <EnableRule Id="new.quote.EnableRule2.EnableRule" />
                </EnableRules>
                <DisplayRules>
                  <DisplayRule Id="Mscrm.ShowForOneToManyGrids" />
                  <DisplayRule Id="Mscrm.AppendToPrimary" />
                  <DisplayRule Id="Mscrm.CreateSelectedEntityPermission" />
                  <DisplayRule Id="Mscrm.AppendSelected" />
                  <DisplayRule Id="Mscrm.HideAddNewForChildEntities" />
                </DisplayRules>
                <Actions>
                  <JavaScriptFunction FunctionName="Mscrm.GridRibbonActions.addNewFromSubGridStandard" Library="/_static/_common/scripts/RibbonActions.js">
                    <CrmParameter Value="SelectedEntityTypeCode" />
                    <CrmParameter Value="PrimaryEntityTypeCode" />
                    <CrmParameter Value="FirstPrimaryItemId" />
                    <CrmParameter Value="PrimaryControl" />
                  </JavaScriptFunction>
                </Actions>
              </CommandDefinition>

           <EnableRule Id="new.quote.EnableRule2.EnableRule">
                <CustomRule FunctionName="IsUserRoleAdmin" Library="$webresource:Quote_main_library.js" Default="false" InvertResult="true" />
            </EnableRule> 
```

//Javascript

```
function IsUserRoleAdmin()
{
         var currentUserRoles = Xrm.Page.context.getUserRoles();

         var isAdmin = false;
          for (var i = 0; i < currentUserRoles.length; i++)
          {
             var userRole = currentUserRoles[i];
            //check admin role 
                    //  if(userRole == "admin guid")
            // {
            //  isAdmin = true;
            // }
           }

 return isAdmin;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T21:55:10.153

是的，您可以隐藏或禁用 OOB 按钮。 [这篇博](http://crmdm.blogspot.in/2012/01/how-to-override-system-ribbon-button-in.html)文提供了一些信息。

您的 js 代码不正确，因为`Xrm.Page.context.getUserRoles()`返回的是 GUID 数组而不是角色名称，因此 isAdmin 将始终为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:55:53.907

您可以使用值规则隐藏功能区上的按钮..

to Disable you can use Custom Rule

[check this link](http://msdn.microsoft.com/en-us/library/gg334682.aspx)

# nsxmlparser - void（刷新）不会刷新

> ID：13481222
> 
> 赞同：0
> 
> 时间：2012-11-20T20:07:32.677
> 
> 标签：nsxmlparser

我有一个使用该方法的 iPhone 应用程序

```
- (void)refresh
{
    self.title = @"Refreshing...";
    self.tableView.userInteractionEnabled = NO;
    self.tableView.alpha = 0.5;
    [self.dataController parse];
} 
```

刷新和重新解析。

问题是当我点击导航栏上的刷新按钮时，程序只是冻结而不刷新数据。该应用程序从 RSS 中提取数据并将其推送到 tableViewController。

这是 barButtonItem 的代码

```
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc]
                                          initWithBarButtonSystemItem:UIBarButtonSystemItemRefresh
                                          target:self
                                          action:@selector(refresh)]; 
```

这是解析方法：

```
- (void) parse
{
    [self parseXMLFileAtURL:@"http://www.baylornotes.org/rss/articles/all"]
}

-(void) parseXMLFileAtURL:(NSString *)URL
{
    NSURL *feedURL = [NSURL URLWithString:URL];
    parser = [[NSXMLParser alloc] initWithContentsOfURL:feedURL];

    [parser setDelegate:self];

    [parser setShouldProcessNamespaces:NO];
    [parser setShouldReportNamespacePrefixes:NO];
    [parser setShouldResolveExternalEntities:NO];
    [parser parse];

} 
```

帮助！

# function - Coffeescript，从点击事件中调用函数

> ID：13481227
> 
> 赞同：1
> 
> 时间：2012-11-20T20:07:51.793
> 
> 标签：function, coffeescript, scope

我有一点 Coffeescript

```
d3Graph: =>

  refreshData: ->
    console.log "refresh data called"

  someButton.click ->
    refreshData() 
```

当我单击“someButton”时，我收到一个错误

```
Uncaught ReferenceError: refreshData is not defined 
```

有人看到我的错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T20:12:53.317

尝试使用`refreshData =`而不是在`refreshData:`这里。

```
d3Graph: =>

  refreshData = ->
    console.log "refresh data called"

  someButton.click ->
    refreshData() 
```

如果这不起作用，您将不得不提供更完整的代码。

如果您遇到这样的问题，看看输出的 JavaScript 是什么总是有帮助的。

例如，在这种情况下，您的原始代码输出：

```
var _this = this;

({
  d3Graph: function() {
    ({
      refreshData: function() {
        return console.log("refresh data called");
      }
    });
    return someButton.click(function() {
      return refreshData();
    });
  }
}); 
```

所以很明显没有调用变量/函数`refreshData`！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:39:00.560

Jamie Wong 正确地解释了这一点。我只是想知道您是否尝试将 d3Graph 用作一个类：

```
class d3Graph

  @refreshData: ->
    console.log "refresh data called"

someButton.click ->
  d3Graph.refreshData() 
```

或者当图形是一个实例时：

```
class d3Graph

  refreshData: ->
    console.log "refresh data called"

graph = new d3Graph()

someButton.click ->
  graph.refreshData() 
```

希望这可以帮助。

# c++ - 在 Direct2D 应用程序中处理 HRESULT

> ID：13481231
> 
> 赞同：1
> 
> 时间：2012-11-20T20:08:21.500
> 
> 标签：c++, directx, direct2d, hresult

在 Kenny Kerr 关于成像和 Direct2D 的 msdn 杂志文章中，他经常使用`HR()`宏。

在他的 Windows 映像组件文章中 - [http://msdn.microsoft.com/en-gb/magazine/cc500647.aspx](http://msdn.microsoft.com/en-gb/magazine/cc500647.aspx)

他写 -

> 最后，WIC API 使用 HRESULT 来描述错误。本文中的示例使用 HR 宏来清楚地识别方法返回需要检查的 HRESULT 的位置。您可以将其替换为您自己的错误处理策略——无论是抛出异常还是自己返回 HRESULT。

```
HR(decoder.CoCreateInstance(CLSID_WICTiffDecoder)); 
```

然而，肯尼没有显示他的定义`HR()`。我是 C++ 初学者，正在尝试发现和理解代码的细节。我想知道他的实现`HR()`是什么，以便我可以考虑如何最好地处理`HRESULT`我的程序。我搜索了一个定义，但似乎没有这些特定文章的源代码。

在了解相关信息时，`macros`我遇到了这些建议使用`inline`函数而不是宏的最新文档 -

[http://msdn.microsoft.com/en-us/library/vstudio/ttsbh614.aspx](http://msdn.microsoft.com/en-us/library/vstudio/ttsbh614.aspx)

[http://msdn.microsoft.com/en-us/library/vstudio/z8y1yy88.aspx](http://msdn.microsoft.com/en-us/library/vstudio/z8y1yy88.aspx)

谁能告诉我肯尼是如何定义他的`HR()`宏的？它实际上做了什么？

我的 Direct2D 程序应该如何处理`HRESULT`s？如何正确使用`HRESULT`s 以使程序可靠且有弹性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T20:17:51.090

我不确定 Kenny 的宏，但是我想您绝对需要知道以下内容：错误代码设置了最高有效位并将整个值呈现为负数。“标准”宏`SUCCEEDED`和`FAILED`测试代码正是为此。

```
HRESULT nValue = ...
if(SUCCEEDED(nValue)) {
  // Not Error
} 
```

然后，为了代码简洁和可读性，您将需要一个同时完成这两项工作的宏：测试成功/失败并在错误时返回或抛出异常。我想`HR`有问题的宏是两者之一。

如果您要使用 ATL，那么已经有这种类型的预定义宏：等。不过`ATLENSURE_SUCCEEDED`，`ATLENSURE_THROW`Microsoft 决定不记录它们（我不知道此处提供的 MSDN 链接）。

您`HR`可能是这样的（取决于所需的操作 - 抛出或退出错误）：

```
inline VOID HR(HRESULT nValue) { if(FAILED(nValue)) AtlThrow(nValue); } 
```

或者

```
#define HR(x) { HRESULT nValue = (x); if(FAILED(nValue)) return nValue; } 
```

此外，为了方便地解码 WIC 和 D2D `HRESULT`，您可能需要使用此[系统托盘助手应用程序](http://alax.info/blog/1383)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-24T23:56:01.673

这篇来自 Kenny 的 MSDN 文章可以帮助其他人理解错误处理的可能方法，包括抛出异常：[MSDN - C++ and the Windows API July 2012](http://msdn.microsoft.com/en-us/magazine/hh288076.aspx)

# php - 将 wordpress 选项设置值连接到 css 类

> ID：13481233
> 
> 赞同：-2
> 
> 时间：2012-11-20T20:08:30.453
> 
> 标签：php, css, wordpress, concatenation

> **可能重复：**
> [如何连接回声](https://stackoverflow.com/questions/13185950/how-to-concatenate-echos)

我想将wordpress选项设置值（get_option（'my_option_value'）与php文件中的css类连接起来。我的css类是box-one，box-2，box-3。而（get_option（'my_option_value'）给出值一，根据选项设置两个和三个。如何连接 class="box-" 和 (get_option('my_option_value')？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T21:10:27.783

在您的 HTML 中，插入 PHP 内联：

```
 class="box-<?php echo get_option('my_option_value'); ?>" ... 
```

# macos - 编辑自定义 NSCell

> ID：13481237
> 
> 赞同：0
> 
> 时间：2012-11-20T20:08:35.010
> 
> 标签：macos, cocoa, nstableview, nscell

我正在创建一个自定义 NSCell，它将像 XCode 中的快捷方式捕获单元格一样工作，并试图弄清楚如何拦截编辑请求（例如，当用户双击一个单元格时）。有什么方法可以确定正在启动编辑吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T22:14:04.800

您是否正在寻找专门检测单元格中的双击？如果是这样，`setDoubleAction:(SEL)aSelector`那就是您正在寻找的东西。

还是关于检测单元格何时进入“编辑”状态的问题更笼统？在这种情况下，请参阅表委托方法`tableView:shouldEditTableColumn:row:`

# apache-flex - Flex Chart，确定图表区域（不包括

> ID：13481250
> 
> 赞同：0
> 
> 时间：2012-11-20T20:09:26.660
> 
> 标签：apache-flex, flex-mx

我正在开发一个比较 mx:PlotChart 类的多个实例的 flex 应用程序。我需要标准化 PlotCharts 的各种实例，以便图表之间每个像素的数据值变化保持不变。为此，我必须找到实际用于绘图的图表区域（而不是轴标签）。我正在寻找的区域是所附屏幕截图中的显示（以紫红色突出显示）。

谢谢，-凯文![在此处输入图像描述](../Images/5a4874dad5cb9b97e8a17b8462c2e8d8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T00:44:04.457

我认为您正在寻找该系列的宽度和高度。下面是一个使用 ColumnChart 的示例，但当然这也适用于其他类型的图表，例如 LineChart。

假设我们有以下数据：

```
<mx:XMLListCollection id="dp">
<fx:XMLList>
    <quote date="8/1/2007" open="40.29" close="39.58" />
    <quote date="8/2/2007" open="39.4" close="39.52" />
    <quote date="8/3/2007" open="39.47" close="38.75" />
    <quote date="8/6/2007" open="38.71" close="39.38" />
    <quote date="8/7/2007" open="39.08" close="39.42" />
    <quote date="8/8/2007" open="39.61" close="40.23" />
    <quote date="8/9/2007" open="39.9" close="40.75" />
    <quote date="8/10/2007" open="41.3" close="41.06" />
    <quote date="8/13/2007" open="41" close="40.83" />
    <quote date="8/14/2007" open="41.01" close="40.41" />
    <quote date="8/15/2007" open="40.22" close="40.18" />
    <quote date="8/16/2007" open="39.83" close="39.96" />
    <quote date="8/17/2007" open="40.18" close="40.32" />
    <quote date="8/20/2007" open="40.55" close="40.74" />
    <quote date="8/21/2007" open="40.41" close="40.13" />
    <quote date="8/22/2007" open="40.4" close="40.77" />
    <quote date="8/23/2007" open="40.82" close="40.6" />
    <quote date="8/24/2007" open="40.5" close="40.41" />
    <quote date="8/27/2007" open="40.38" close="40.81" />
</fx:XMLList>
</mx:XMLListCollection> 
```

以及下面的图表：

```
<mx:ColumnChart id="myChart" dataProvider="{dp}" showDataTips="true" width="300">
<mx:horizontalAxis>
    <mx:CategoryAxis categoryField="@date"/>
</mx:horizontalAxis>
<mx:series>
    <mx:ColumnSeries id="openSeries"
        xField="@date" 
        yField="@open" 
        displayName="Open"/>
</mx:series>
</mx:ColumnChart> 
```

然后我们可以访问系列的宽度和高度：

```
<s:Label text="{openSeries.width}" />
<s:Label text="{openSeries.height}" /> 
```

# javascript - 您如何在浏览器中模拟文件选择器以进行单元测试？

> ID：13481265
> 
> 赞同：6
> 
> 时间：2012-11-20T20:10:08.753
> 
> 标签：javascript, firefox, browser, jasmine

我对如何在浏览器中**全局模拟文件选择器**感兴趣。具体来说，我最感兴趣的是在**Firefox**中执行此操作，但更喜欢通用解决方案。

我只关心防止文件选择器对话框出现。我不需要能够断言它确实打开了。问题是我对打开文件选择器的 JavaScript 代码进行了单元测试。当对话框打开时，它会**停止执行测试套件**。

一个示例情况是我正在测试`onRender`. `Backbone.View`该方法呈现一个子视图，该子视图将在呈现时打开文件选择器。由于我不直接测试该子视图，因此当我只对方法的其他部分进行单元测试感兴趣时，我不希望模拟它的部分行为`onRender`。

例子：

```
//Test file
it("should do something", function() {
  var view = new App.Views.SomeView();
  spyOn(view.modelBinder, "bind");
  view.render();
  expect(view.modelBinder.bind).toHaveBeenCalled();
});

//View file
onRender : function () {
  this.modelBinder.bind(this.el, this.model);
  this.$("#thing").html(this.subview.render().el); //This line has a side effect that opens file picker
} 
```

本质上，我不想明确地模拟导致文件选择器打开的行为，因为这不是我在这里测试的兴趣所在。这样做会使测试套件变得更加脆弱和难以维护。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:19:23.467

使用[sinon](http://sinonjs.org/)来模拟/监视/存根调用。您可以测试正在拨打的电话，而不是实际拨打电话。

这样您就可以测试该函数是否已被调用，而无需调用显示对话框的实际函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:52:40.540

回答你的问题：**不要。**

我会`subview.render()`用一个空函数替换以避免不希望的副作用。然而你说：

> “我**不想明确地模拟**导致文件选择器打开的行为，因为这**不是我感兴趣的测试**......”

这有点矛盾。如果你想进行单元测试`App.Views.SomeView`，你**将**不得不模拟外部协作者，**特别**是在不感兴趣的时候，包括你的文件选择器。另一方面，在对[SUT](http://en.wikipedia.org/wiki/System_under_test)进行单元测试时，您不应该弄乱它。

模拟实际上会使您的测试更*容易出现红色*，但这是确保您的生产代码不会遭受不良耦合形式的唯一方法（恕我直言，Backbone.js 应用程序的常见陷阱。）

唯一需要避免显示文件选择器的地方是对文件选择器本身进行单元测试时，在这种情况下，您可以按照建议使用 sinon，或者如果您使用的是 jQuery，则不覆盖它。记住*“永远不要模拟你不拥有的类型”*规则。

# sql - SQL中假期前后的“工作日”

> ID：13481266
> 
> 赞同：2
> 
> 时间：2012-11-20T20:10:11.550
> 
> 标签：sql, date, reporting-services

我已经阅读了很多类似的问题，但我的特殊情况比我发现的大多数其他情况更简单但更复杂。这是问题：

我有一个带有日期/时间戳的劳动力交易表，供用户打卡和打卡。每个事务（行）都有一个用户名、开始和停止时间、总小时数和一个“标签”（通常是工单#）。

对于假期，我们为每个用户添加一个没有开始或停止时间的事务，总小时数为 8，标签为“HOLIDAY”。我制作了下表的样本：

```
USER   | STARTDATE | STARTTIME | STOPDATE | STOPTIME | HOURS | TAG
JSMITH | 7/2/12    | 9:00AM    | 7/2/12   | 5:00PM   | 8     | WO12345
JSMITH | 7/3/12    | 9:00AM    | 7/3/12   | 5:00PM   | 8     | WO13579
JSMITH | 7/4/12    | NULL      | 7/4/12   | NULL     | 8     | HOLIDAY
JSMITH | 7/5/12    | 9:00AM    | 7/5/12   | 5:00PM   | 8     | WO24680
JSMITH | 7/6/12    | 9:00AM    | 7/6/12   | 5:00PM   | 8     | WO98765 
```

这就是问题所在。如果用户在关键字为 BUSINESS days 之前的 2 个工作日工作，则该用户仅应获得 8 小时的假期。休假日（带有 VACATION 标签）将被视为“工作”。因此，基本上，如果前 2 天的每一天都有任何劳务交易，他们就有资格享受假期。

更复杂的是，周一到周五将是一个典型的工作周，但是，人们可以在周六工作（尽管不是必需的），所以如果周一放假，他们可以在周四/周五或周五/周六工作有资格享受假期。

该报告将每周（周一）运行一次，并查看前一周。所以我的思考过程是你寻找任何带有假日标签的交易，然后在 2 个“工作日”前检查每天的任何交易。如果一天或两天没有找到交易，则返回用户或完整的假期行，以表明他们不符合条件（最终结果集应该是不符合假期条件的交易或用户的列表）。

对于检查前 2 天或确定“工作日”（可能包括星期六）的任何和所有帮助将不胜感激！如果您需要任何进一步的细节，也请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T21:02:27.157

这种逻辑很难以可读和高性能的方式在 sql 中表达。通常，我发现创建一个事实表更容易，因为数据太少了。这样，您就可以加入这个事实表。我不知道你的表叫什么，所以我就叫它“日志”。

我相信这段代码会做你想做的事。

**更新**

为了考虑到允许周五/周六而不是周四/周六的限制，我修改了事实表以包含允许的组合。对于每个有效组合，给出一个新的工作日（假日）行和两个允许的偏移量。对于周一（美国的工作日 2），给出两对，(-2,-3) 和 (-3,-4)，分别表示周五/周六和周四/周五。

新代码：

```
-- Create a facts table. This would maybe not be a temp table in the final solution but
-- rather a static, indexed table. 

CREATE TABLE #validdays (
   forday int,
   validday1 int, -- offset from 'forday'
   validday2 int  -- offset from 'forday'
)
-- For each weekday, give the allowed combinations of work days
INSERT INTO #validdays values (2,-2,-3)
INSERT INTO #validdays values (2,-3,-4)
INSERT INTO #validdays values (6,-1,-2)
INSERT INTO #validdays values (5,-1,-2)
INSERT INTO #validdays values (4,-1,-2)
INSERT INTO #validdays values (3,-1,-3)
INSERT INTO #validdays values (3,-1,-4)

SELECT * 
FROM Log l
WHERE 
   l.TAG = 'HOLIDAY' AND
   NOT EXISTS 
   (SELECT *
    FROM #validdays v 
    INNER JOIN Log vl ON vl.[USER] = l.[USER] AND 
                         vl.startdate = DATEADD(day, v.validday1, l.startdate) AND
                         vl.tag <> 'HOLIDAY'
    INNER JOIN Log vl2 ON vl2.[USER] = l.[USER] AND 
                          vl2.startdate = DATEADD(day, v.validday2, l.startdate) AND
                          vl2.tag <> 'HOLIDAY'
    WHERE v.forday = datepart(dw,l.startdate)
   )
   -- Any restrictions about periodicity, i.e. check that l.startdate is within last week.
drop table #validdays 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T20:40:48.723

从这个开始。

```
SELECT a.[STARTDATE] 'Begin Date', a.[TAG] AS 'Begin Tag', 
  b.[TAG] AS '1 Day Before', c.[TAG] AS '2 Days Before',
  d.[TAG] AS '3 Days Before',  e.[TAG] AS '4 Days Before',
  f.[TAG] AS '5 Days Before'
FROM tx a
LEFT JOIN tx b ON b.[USER] = a.[USER] 
  AND b.[STARTDATE] = DATEADD (day, -1, a.[STARTDATE])
LEFT JOIN tx c ON c.[USER] = a.[USER] 
  AND c.[STARTDATE] = DATEADD (day, -2, a.[STARTDATE])
LEFT JOIN tx d ON d.[USER] = a.[USER] 
  AND d.[STARTDATE] = DATEADD (day, -3, a.[STARTDATE])
LEFT JOIN tx e ON e.[USER] = a.[USER] 
  AND e.[STARTDATE] = DATEADD (day, -4, a.[STARTDATE])
LEFT JOIN tx f ON f.[USER] = a.[USER] 
  AND f.[STARTDATE] = DATEADD (day, -5, a.[STARTDATE])
WHERE a.[STARTDATE] = '2012-07-05' 
```

这将为您提供前 5 天的标签（按日期）：

```
开始日期 开始标签 前 1 天 前 2 天 前 3 天 前 4 天 前 5 天
---------- --------- ------------ ------------- ------ -------- ------------- -------------
2012-07-05 WO98765 WO24680 假日 WO13579 WO12345 NULL
```

然后，您将添加逻辑以检查前两天是否为非节假日工作标签。

# function - 使用 VBA 返回估计的参数

> ID：13481268
> 
> 赞同：0
> 
> 时间：2012-11-20T20:10:26.953
> 
> 标签：function, vba

我有以下函数用于输入 2 个初始参数 rho 和 V，并且基于最小的平方误差和，我希望它返回估计的参数 rho 和 V。

```
Public Function RhoAndV(params, MktStrike, MktVol, Vol, Fwd, Tau, Beta)
    Dim rho, V, Alpha As Double
    Dim i As Integer, L As Integer
    Dim sqdError() As Double, ModelVol() As Double
    rho = params(1)
    V = params(2)
    Alpha = AFn(Fwd, Fwd, Tau, Vol, Beta, rho, V)
    'MsgBox ("Alpha=" & Alpha)
    L = MktVol.Cells.Count
    ReDim ModelVol(L) As Double, sqdError(L) As Double
    For i = 1 To L
        ModelVol(i) = Vfn(Alpha, Beta, rho, V, Fwd, MktStrike(i), Tau)
        'MsgBox ("ModelVol(i)=" & ModelVol(i))
        sqdError(i) = (ModelVol(i) - MktVol(i)) ^ 2
    Next i
    RhoAndV = Application.SUM(sqdError)
    End Function 
```

我在单元格 A1:A2 中有 rho 和 V，其值为 0.1 和 0.1，因此我选择 A1:A2 作为`params`. 在单元格 C3:C6 中，我有带有值的 MktStrike

```
30
31
32
33 
```

在单元格 D3:D6 中，我有 MktVol 的值

```
0.23
0.24
0.25
0.26 
```

这个函数现在返回平方误差的总和（我在 Excel 中运行它，`=RhoAndV(A1:A3,C3:C6,D3:D6,0.25,10,1,0.5)`它返回`.003`。但是，我希望它返回估计的参数，`rho`和`V`。谁能告诉我如何修复这个函数来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T00:28:42.710

您可以将原始函数修改为以下示例。返回值的方式取决于您是将它们返回到行（例如 D3:E3）还是列（例如 D3:D4）

```
Function RhoAndV(params, MktStrike, MktVol, Vol, Fwd, Tau, Beta)

    'rest of your code

    'RhoAndV = Array(rho, V) 'returning to a row
    RhoAndV = Application.Transpose(Array(rho, V)) 'returning to a column
End Function 
```

# html - IE 宽度中的嵌套表不正确

> ID：13481272
> 
> 赞同：0
> 
> 时间：2012-11-20T20:10:36.987
> 
> 标签：html, internet-explorer, html-table

我无法让一个表格正确嵌套在 IE 中的另一个表格中，但它在 Firefox 和 Chrome 中运行良好。出于某种原因，IE 显示嵌套表格的单元格比它设置的要宽得多。

我的代码的简化版本：

```
<table width="575" border="0">
<tbody>
    <tr>
        <td height="10" colspan="3"><span style="FONT-SIZE: 12px"><span style="FONT-FAMILY: Arial">CITY (Arial,  small, all caps), Country (only if city isn't well known, Arial, small) -  Content text (Arial, small) First paragraph is to be full width and above any  images or related boxes, unless there is a lead.<br />
        </span></span></td>
    </tr>
    <tr>
        <td height="10" colspan="3"></td>
    </tr>
    <tr>
        <td width="280"><span style="font-size: 12px;"><span style="font-family: Arial;">Half-width items: Text next to images or related boxes is to match or slightly exceed height of image or related box it sits next to with the tops set to align. First half-width image in an article or any related box goes on the right side of the page. </span></span></td>
        <td width="10"></td>
        <td width="260" valign="top">
        <table width="260" border="0">
            <tbody>
                <tr>
                    <td>
                    <div style="width:260px;border:2px groove black;padding:5px;"><strong><span style="font-size: 14px;"><span style="font-family: Arial;">Related Links - Arial, medium, bold</span></span></strong><br />
                    <span style="font-family: Arial;"><span style="font-size: 12px;"><span style="font-size: 2px;"><br />
                    </span>&#160;• To be used when relevant links exist<br />
                    <span style="font-size: 2px;"><br />
                    </span>&#160;• Links to remain one line or shorter<br />
                    <span style="font-size: 2px;"><br />
                    </span>&#160;• Link text - Arial, small, linked<br />
                    </span></span></div>
                    </td>
                </tr>
            </tbody>
        </table>
        </td>
    </tr>
    <tr>
        <td height="10" colspan="3"></td>
    </tr>
</tbody> 
```

感谢您的任何帮助。我只是想不通为什么 IE 不会像其他浏览器那样玩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T01:21:20.210

仅供参考，您可以在不使用表格的情况下在 CSS 中实现这一点。

我将宽度从像素更改为百分比，现在在 IE 中可以正常工作...

```
 <tr>
        <td width="44%"><span style="font-size: 12px;"><span style="font-family: Arial;">Half-width items: Text next to images or related boxes is to match or slightly exceed height of image or related box it sits next to with the tops set to align. First half-width image in an article or any related box goes on the right side of the page. </span></span></td>
        <td width="2%"></td>
        <td width="44%" valign="top">
            <table width="100%" border="0">
                <tbody>
                    <tr>
                        <td>
                        <div style="width:260px;border:2px groove black;padding:5px;"><strong><span style="font-size: 14px;"><span style="font-family: Arial;">Related Links - Arial, medium, bold</span></span></strong><br />
                        <span style="font-family: Arial;"><span style="font-size: 12px;"><span style="font-size: 2px;"><br />
                        </span>&#160;• To be used when relevant links exist<br />
                        <span style="font-size: 2px;"><br />
                        </span>&#160;• Links to remain one line or shorter<br />
                        <span style="font-size: 2px;"><br />
                        </span>&#160;• Link text - Arial, small, linked<br />
                        </span></span></div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
    </tr> 
```

不知道你为什么要使用`colspan="3"`，而你可以取消两个。

无论如何，测试上面的代码以检查这是否是你所追求的......

谢谢。

**添加：**
我删除了宽度，`td's`并且效果也很好。不知道为什么在提供宽度时 IE 会以不同的方式呈现它。

```
<tbody>
    <tr>
        <td height="10" colspan="3"><span style="FONT-SIZE: 12px"><span style="FONT-FAMILY: Arial">CITY (Arial,  small, all caps), Country (only if city isn't well known, Arial, small) -  Content text (Arial, small) First paragraph is to be full width and above any  images or related boxes, unless there is a lead.<br />
        </span></span></td>
    </tr>
    <tr>
        <td height="10" colspan="3"></td>
    </tr>
    <tr>
        <td><span style="font-size: 12px;"><span style="font-family: Arial;">Half-width items: Text next to images or related boxes is to match or slightly exceed height of image or related box it sits next to with the tops set to align. First half-width image in an article or any related box goes on the right side of the page. </span></span></td>
        <td></td>
        <td valign="top">
        <table border="0">
            <tbody>
                <tr>
                    <td>
                    <div style="width:265px;border:2px groove black;padding:5px;"><strong><span style="font-size: 14px;"><span style="font-family: Arial;">Related Links - Arial, medium, bold</span></span></strong><br />
                    <span style="font-family: Arial;"><span style="font-size: 12px;"><span style="font-size: 2px;"><br />
                    </span>&#160;• To be used when relevant links exist<br />
                    <span style="font-size: 2px;"><br />
                    </span>&#160;• Links to remain one line or shorter<br />
                    <span style="font-size: 2px;"><br />
                    </span>&#160;• Link text - Arial, small, linked<br />
                    </span></span></div>
                    </td>
                </tr>
            </tbody>
        </table>
        </td>
    </tr>
    <tr>
        <td height="10" colspan="3"></td>
    </tr>
</tbody> 
```

# android - 将自动更正添加到自定义 IME

> ID：13481273
> 
> 赞同：3
> 
> 时间：2012-11-20T20:10:37.237
> 
> 标签：android, keyboard, ime, autocorrect

我从头开始为 Android 开发了一个自定义 IME。问题是我不知道从哪里开始实施自动更正。Android 中有预建的字典吗？是否有专门用于自动更正的 API，或者只是导入您自己的字典并对照它检查单词的问题？

# wpf - 如何使复选框更大

> ID：13481275
> 
> 赞同：47
> 
> 时间：2012-11-20T20:11:00.880
> 
> 标签：wpf, silverlight, windows-phone-7, windows-phone-8

我正在使用这样的复选框控件：

```
<CheckBox VerticalAlignment="Bottom" IsChecked="{Binding Selected}" 
      Grid.Column="0" 
      FontSize="{StaticResource PhoneFontSizeLarge}" 
      Content="{Binding Name}">
</CheckBox> 
```

问题是我把尺寸改大了一点。在这种情况下，文本越来越大，但刻度本身保持不变。它看起来很难看，我可以以某种方式调整复选框的大小吗？

**更新** 我在*Windows 手机*上做，所以 LayoutTransform 在这里不合适

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-11-20T20:12:59.180

尝试这样的事情： -

```
<CheckBox>
    <CheckBox.LayoutTransform>
        <ScaleTransform ScaleX="2" ScaleY="2" />
    </CheckBox.LayoutTransform>
</CheckBox> 
```

您也可以查看此[链接](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/98cf8a65-f4ca-4ff5-9851-c2989b91a013)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-21T00:08:54.713

```
 <StackPanel Height="80"
                Name="StackPanel1"
                Orientation="Horizontal">
        <Viewbox Height="{Binding Path=ActualHeight, ElementName=StackPanel1}">
            <CheckBox />
        </Viewbox>
    </StackPanel> 
```

根据需要调整 StackPanel 高度。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-22T17:42:54.347

结束了以下内容：

1.  添加一个空复选框
2.  在表情混合中打开控件
3.  选择那里的复选框
4.  打开编辑模板 -> 编辑副本
5.  它将使用您可以分配给复选框的自定义模板创建一个新样式。

它产生了大约 150 loc 样式，但我找不到其他方法

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-16T10:16:24.033

```
 ScaleTransform scale = new ScaleTransform(2.0, 2.0);
                yourCheckBox.RenderTransformOrigin = new Point(0.5, 0.5);
                yourCheckBox.RenderTransform = scale; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-01-17T11:16:14.327

只需在 windows/usercontrol 资源中添加下面提到的代码，它会自动增加 Xaml 控件中 [] 复选框的默认大小。

```
<Style x:Key="FocusVisual">
        <Setter Property="Control.Template">
            <Setter.Value>
                <ControlTemplate>
                    <Rectangle Margin="2" SnapsToDevicePixels="true" Stroke="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" StrokeThickness="1" StrokeDashArray="1 2"/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <SolidColorBrush x:Key="OptionMark.Static.Background" Color="#FFFFFFFF"/>
    <SolidColorBrush x:Key="OptionMark.Static.Border" Color="#FF707070"/>
    <Style x:Key="OptionMarkFocusVisual">
        <Setter Property="Control.Template">
            <Setter.Value>
                <ControlTemplate>
                    <Rectangle Margin="14,0,0,0" SnapsToDevicePixels="true" Stroke="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" StrokeThickness="1" StrokeDashArray="1 2"/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <SolidColorBrush x:Key="OptionMark.MouseOver.Background" Color="#FFF3F9FF"/>
    <SolidColorBrush x:Key="OptionMark.MouseOver.Border" Color="#FF5593FF"/>
    <SolidColorBrush x:Key="OptionMark.MouseOver.Glyph" Color="#FF212121"/>
    <SolidColorBrush x:Key="OptionMark.Disabled.Background" Color="#FFE6E6E6"/>
    <SolidColorBrush x:Key="OptionMark.Disabled.Border" Color="#FFBCBCBC"/>
    <SolidColorBrush x:Key="OptionMark.Disabled.Glyph" Color="#FF707070"/>
    <SolidColorBrush x:Key="OptionMark.Pressed.Background" Color="#FFD9ECFF"/>
    <SolidColorBrush x:Key="OptionMark.Pressed.Border" Color="#FF3C77DD"/>
    <SolidColorBrush x:Key="OptionMark.Pressed.Glyph" Color="#FF212121"/>
    <SolidColorBrush x:Key="OptionMark.Static.Glyph" Color="#FF212121"/>
    <Style TargetType="{x:Type CheckBox}">
        <Setter Property="FocusVisualStyle" Value="{StaticResource FocusVisual}"/>
        <Setter Property="Background" Value="{StaticResource OptionMark.Static.Background}"/>
        <Setter Property="BorderBrush" Value="{StaticResource OptionMark.Static.Border}"/>
        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type CheckBox}">
                    <Grid x:Name="templateRoot" Background="Transparent" SnapsToDevicePixels="True">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Border x:Name="checkBoxBorder" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="1" VerticalAlignment="{TemplateBinding VerticalContentAlignment}">
                            <Grid x:Name="markGrid">
                                <Path x:Name="optionMark" Data="F1 M 9.97498,1.22334L 4.6983,9.09834L 4.52164,9.09834L 0,5.19331L 1.27664,3.52165L 4.255,6.08833L 8.33331,1.52588e-005L 9.97498,1.22334 Z "
                                      Fill="{StaticResource OptionMark.Pressed.Glyph}" Margin="5" Opacity="0" Stretch="Uniform"/>
                                <Rectangle x:Name="indeterminateMark" Fill="{StaticResource OptionMark.Static.Glyph}" Margin="2" Opacity="0"/>
                            </Grid>
                        </Border>
                        <ContentPresenter x:Name="contentPresenter" Grid.Column="1" Focusable="False" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="HasContent" Value="true">
                            <Setter Property="FocusVisualStyle" Value="{StaticResource OptionMarkFocusVisual}"/>
                            <Setter Property="Padding" Value="4,-1,0,0"/>
                        </Trigger>
                        <Trigger Property="IsMouseOver" Value="true">
                            <Setter Property="Background" TargetName="checkBoxBorder" Value="{StaticResource OptionMark.MouseOver.Background}"/>
                            <Setter Property="BorderBrush" TargetName="checkBoxBorder" Value="{StaticResource OptionMark.MouseOver.Border}"/>
                            <Setter Property="Fill" TargetName="optionMark" Value="{StaticResource OptionMark.MouseOver.Glyph}"/>
                            <Setter Property="Fill" TargetName="indeterminateMark" Value="{StaticResource OptionMark.MouseOver.Glyph}"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Background" TargetName="checkBoxBorder" Value="{StaticResource OptionMark.Disabled.Background}"/>
                            <Setter Property="BorderBrush" TargetName="checkBoxBorder" Value="{StaticResource OptionMark.Disabled.Border}"/>
                            <Setter Property="Fill" TargetName="optionMark" Value="{StaticResource OptionMark.Disabled.Glyph}"/>
                            <Setter Property="Fill" TargetName="indeterminateMark" Value="{StaticResource OptionMark.Disabled.Glyph}"/>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="true">
                            <Setter Property="Background" TargetName="checkBoxBorder" Value="{StaticResource OptionMark.Pressed.Background}"/>
                            <Setter Property="BorderBrush" TargetName="checkBoxBorder" Value="{StaticResource OptionMark.Pressed.Border}"/>
                            <Setter Property="Fill" TargetName="optionMark" Value="{StaticResource OptionMark.Pressed.Glyph}"/>
                            <Setter Property="Fill" TargetName="indeterminateMark" Value="{StaticResource OptionMark.Pressed.Glyph}"/>
                        </Trigger>
                        <Trigger Property="IsChecked" Value="true">
                            <Setter Property="Opacity" TargetName="optionMark" Value="1"/>
                            <Setter Property="Opacity" TargetName="indeterminateMark" Value="0"/>
                        </Trigger>
                        <Trigger Property="IsChecked" Value="{x:Null}">
                            <Setter Property="Opacity" TargetName="optionMark" Value="0"/>
                            <Setter Property="Opacity" TargetName="indeterminateMark" Value="1"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-15T23:49:57.983

[![大复选框](../Images/4dd8c628d37b18d39af12c02a00ed5a8.png)](https://i.stack.imgur.com/l3N2A.png)

**WPF 修改示例**

*   **标记网格** 宽度=“24”，高度=“24”

*   **optionMark** Margin="4", Stretch="Uniform"

*   **indeterminateMark** Margin="4"

    ```
     <Style x:Key="FocusVisual">
          <Setter Property="Control.Template">
              <Setter.Value>
                  <ControlTemplate>
                      <Rectangle Margin="2" StrokeDashArray="1 2" Stroke="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" SnapsToDevicePixels="true" StrokeThickness="1"/>
                  </ControlTemplate>
              </Setter.Value>
          </Setter>
      </Style>
      <Style x:Key="OptionMarkFocusVisual">
          <Setter Property="Control.Template">
              <Setter.Value>
                  <ControlTemplate>
                      <Rectangle Margin="14,0,0,0" StrokeDashArray="1 2" Stroke="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" SnapsToDevicePixels="true" StrokeThickness="1"/>
                  </ControlTemplate>
              </Setter.Value>
          </Setter>
      </Style>
      <SolidColorBrush x:Key="OptionMark.Static.Background" Color="#FFFFFFFF"/>
      <SolidColorBrush x:Key="OptionMark.Static.Border" Color="#FF707070"/>
      <SolidColorBrush x:Key="OptionMark.Static.Glyph" Color="#FF212121"/>
      <SolidColorBrush x:Key="OptionMark.MouseOver.Background" Color="#FFF3F9FF"/>
      <SolidColorBrush x:Key="OptionMark.MouseOver.Border" Color="#FF5593FF"/>
      <SolidColorBrush x:Key="OptionMark.MouseOver.Glyph" Color="#FF212121"/>
      <SolidColorBrush x:Key="OptionMark.Pressed.Background" Color="#FFD9ECFF"/>
      <SolidColorBrush x:Key="OptionMark.Pressed.Border" Color="#FF3C77DD"/>
      <SolidColorBrush x:Key="OptionMark.Pressed.Glyph" Color="#FF212121"/>
      <SolidColorBrush x:Key="OptionMark.Disabled.Background" Color="#FFE6E6E6"/>
      <SolidColorBrush x:Key="OptionMark.Disabled.Border" Color="#FFBCBCBC"/>
      <SolidColorBrush x:Key="OptionMark.Disabled.Glyph" Color="#FF707070"/>
      <Style x:Key="CheckBoxLarge" TargetType="{x:Type CheckBox}">
          <Setter Property="FocusVisualStyle" Value="{StaticResource FocusVisual}"/>
          <Setter Property="Background" Value="{StaticResource OptionMark.Static.Background}"/>
          <Setter Property="BorderBrush" Value="{StaticResource OptionMark.Static.Border}"/>
          <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
          <Setter Property="BorderThickness" Value="1"/>
          <Setter Property="Template">
              <Setter.Value>
                  <ControlTemplate TargetType="{x:Type CheckBox}">
                      <Grid x:Name="templateRoot" Background="Transparent" SnapsToDevicePixels="True">
                          <Grid.ColumnDefinitions>
                              <ColumnDefinition Width="Auto"/>
                              <ColumnDefinition Width="*"/>
                          </Grid.ColumnDefinitions>
                          <Border x:Name="checkBoxBorder" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="1" VerticalAlignment="{TemplateBinding VerticalContentAlignment}">
                              <Grid x:Name="markGrid" Width="24" Height="24">
                                  <!--  Width,Height,Stretch="Uniform",Margin  -->
                                  <Path x:Name="optionMark" Data="F1 M 9.97498,1.22334L 4.6983,9.09834L 4.52164,9.09834L 0,5.19331L 1.27664,3.52165L 4.255,6.08833L 8.33331,1.52588e-005L 9.97498,1.22334 Z " Fill="{StaticResource OptionMark.Static.Glyph}" Margin="4" Opacity="0" Stretch="Uniform"/>
                                  <Rectangle x:Name="indeterminateMark" Fill="{StaticResource OptionMark.Static.Glyph}" Margin="4" Opacity="0"/>
                              </Grid>
                          </Border>
                          <ContentPresenter x:Name="contentPresenter" Grid.Column="1" Focusable="False" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                      </Grid>
                      <ControlTemplate.Triggers>
                          <Trigger Property="HasContent" Value="true">
                              <Setter Property="FocusVisualStyle" Value="{StaticResource OptionMarkFocusVisual}"/>
                              <Setter Property="Padding" Value="4,-1,0,0"/>
                          </Trigger>
                          <Trigger Property="IsMouseOver" Value="true">
                              <Setter Property="Background" TargetName="checkBoxBorder" Value="{StaticResource OptionMark.MouseOver.Background}"/>
                              <Setter Property="BorderBrush" TargetName="checkBoxBorder" Value="{StaticResource OptionMark.MouseOver.Border}"/>
                              <Setter Property="Fill" TargetName="optionMark" Value="{StaticResource OptionMark.MouseOver.Glyph}"/>
                              <Setter Property="Fill" TargetName="indeterminateMark" Value="{StaticResource OptionMark.MouseOver.Glyph}"/>
                          </Trigger>
                          <Trigger Property="IsEnabled" Value="false">
                              <Setter Property="Background" TargetName="checkBoxBorder" Value="{StaticResource OptionMark.Disabled.Background}"/>
                              <Setter Property="BorderBrush" TargetName="checkBoxBorder" Value="{StaticResource OptionMark.Disabled.Border}"/>
                              <Setter Property="Fill" TargetName="optionMark" Value="{StaticResource OptionMark.Disabled.Glyph}"/>
                              <Setter Property="Fill" TargetName="indeterminateMark" Value="{StaticResource OptionMark.Disabled.Glyph}"/>
                          </Trigger>
                          <Trigger Property="IsPressed" Value="true">
                              <Setter Property="Background" TargetName="checkBoxBorder" Value="{StaticResource OptionMark.Pressed.Background}"/>
                              <Setter Property="BorderBrush" TargetName="checkBoxBorder" Value="{StaticResource OptionMark.Pressed.Border}"/>
                              <Setter Property="Fill" TargetName="optionMark" Value="{StaticResource OptionMark.Pressed.Glyph}"/>
                              <Setter Property="Fill" TargetName="indeterminateMark" Value="{StaticResource OptionMark.Pressed.Glyph}"/>
                          </Trigger>
                          <Trigger Property="IsChecked" Value="true">
                              <Setter Property="Opacity" TargetName="optionMark" Value="1"/>
                              <Setter Property="Opacity" TargetName="indeterminateMark" Value="0"/>
                          </Trigger>
                          <Trigger Property="IsChecked" Value="{x:Null}">
                              <Setter Property="Opacity" TargetName="optionMark" Value="0"/>
                              <Setter Property="Opacity" TargetName="indeterminateMark" Value="1"/>
                          </Trigger>
                      </ControlTemplate.Triggers>
                  </ControlTemplate>
              </Setter.Value>
          </Setter>
      </Style> 
    ```

# python - python中的线程使用队列

> ID：13481276
> 
> 赞同：28
> 
> 时间：2012-11-20T20:11:05.087
> 
> 标签：python, multithreading

我想在 python 中使用线程来下载大量网页，并通过以下代码在其中一个网站中使用队列。

它放置了一个无限的while循环。每个线程是否连续运行而没有结束，直到所有线程都完成？我是不是错过了什么。

```
#!/usr/bin/env python
import Queue
import threading
import urllib2
import time

hosts = ["http://yahoo.com", "http://google.com", "http://amazon.com",
"http://ibm.com", "http://apple.com"]

queue = Queue.Queue()

class ThreadUrl(threading.Thread):
  """Threaded Url Grab"""
  def __init__(self, queue):
    threading.Thread.__init__(self)
    self.queue = queue

  def run(self):
    while True:
      #grabs host from queue
      host = self.queue.get()

      #grabs urls of hosts and prints first 1024 bytes of page
      url = urllib2.urlopen(host)
      print url.read(1024)

      #signals to queue job is done
      self.queue.task_done()

start = time.time()
def main():

  #spawn a pool of threads, and pass them queue instance 
  for i in range(5):
    t = ThreadUrl(queue)
    t.setDaemon(True)
    t.start()

  #populate queue with data   
  for host in hosts:
    queue.put(host)

  #wait on the queue until everything has been processed     
  queue.join()

main()
print "Elapsed Time: %s" % (time.time() - start) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-20T20:25:38.190

将线程设置为`daemon`线程会导致它们在 main 完成时退出。但是，是的，您是正确的，因为只要`queue`else 中有东西会阻塞，您的线程就会连续运行。

文档解释了这个细节[队列文档](http://docs.python.org/2/library/queue.html)

python Threading 文档`daemon`也解释了该部分。

*当没有活着的非守护线程时，整个 Python 程序退出。*

因此，当队列被清空并在`queue.join`解释器退出时恢复时，线程将死亡。

编辑：更正默认行为`Queue`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-20T20:33:16.497

你的脚本对我来说很好，所以我假设你在问发生了什么，这样你就可以更好地理解它。是的，您的子类将每个线程置于无限循环中，等待将某些内容放入队列中。当发现某物时，它会抓住它并做它的事情。然后，关键部分，它通过 queue.task_done 通知队列它已完成，并继续等待队列中的另一个项目。

虽然所有这些都在工作线程中进行，但主线程正在等待（加入）直到队列中的所有任务都完成，这将是线程发送 queue.task_done 标志的次数与消息相同的次数队列 。此时主线程完成并退出。由于这些是恶魔线程，它们也会关闭。

这是很酷的东西，线程和队列。它是 Python 真正优秀的部分之一。你会听到各种关于 Python 中的线程如何被 GIL 等搞砸的东西。但是如果你知道在哪里使用它们（比如在这种情况下使用网络 I/O），它们真的会为你加快速度。一般规则是，如果您受 I/O 限制，请尝试和测试线程；如果您受 CPU 限制，线程可能不是一个好主意，也许可以尝试使用进程。

祝你好运，

麦克风

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-20T20:30:31.050

在这种情况下，我认为没有`Queue`必要。仅使用`Thread`：

```
import threading, urllib2, time

hosts = ["http://yahoo.com", "http://google.com", "http://amazon.com",
"http://ibm.com", "http://apple.com"]

class ThreadUrl(threading.Thread):
    """Threaded Url Grab"""
    def __init__(self, host):
        threading.Thread.__init__(self)
        self.host = host

    def run(self):
        #grabs urls of hosts and prints first 1024 bytes of page
        url = urllib2.urlopen(self.host)
        print url.read(1024)

start = time.time()
def main():
    #spawn a pool of threads
    for i in range(len(hosts)):
        t = ThreadUrl(hosts[i])
        t.start()

main()
print "Elapsed Time: %s" % (time.time() - start) 
```

# c# - 控制台和服务之间的 C# 共享 DLL

> ID：13481277
> 
> 赞同：3
> 
> 时间：2012-11-20T20:11:06.003
> 
> 标签：c#, windows-services, console-application

我正在创建一个带有 DLL 的项目，该项目将具有一种公共方法`Process();`

将有一个服务每三分钟调用一次此方法。

还将有一个控制台应用程序将调用此方法。

如果该方法当前正在运行，如何防止控制台应用程序在服务已经运行时调用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T20:14:54.857

您将需要设置某种 IPC - 例如，在该方法中使用的[全局互斥锁](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)表示当前正在运行/未运行将解决该问题（只要两者都在同一台机器上运行）......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T20:15:21.033

您可以使用[命名互斥锁](http://msdn.microsoft.com/en-us/library/f55ddskf.aspx)来防止调用者调用相同的方法。

附加说明：
如果服务最终创建它并以管理员身份运行，您可能会遇到有关命名互斥锁的权限问题，您的控制台应用程序可能无权访问互斥锁，除非您在互斥锁上设置适当的权限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T20:15:40.700

您应该考虑使用互斥锁。这是一篇来自 MSDN 的文章，其中包含一些详细信息：http: [//msdn.microsoft.com/en-us/library/hw29w7t1 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/hw29w7t1(v=vs.100).aspx)

# html - 将远程站点加载到 div

> ID：13481281
> 
> 赞同：0
> 
> 时间：2012-11-20T20:11:19.987
> 
> 标签：html, iframe

我尝试找到 iframe 模拟，`div`如果我使用 iframe IE 阻止 cookie，我想在我的加载外部页面，所以我不能使用 iframe。

# ruby-on-rails - 耙任务不断失败

> ID：13481282
> 
> 赞同：1
> 
> 时间：2012-11-20T20:11:22.713
> 
> 标签：ruby-on-rails, ruby, rake, mongoid

我正在尝试设置我的开发环境来处理使用 Mongoid 的现有项目。我已经运行了 bundle install 并且效果很好，但是我现在正在尝试设置数据库，并且正在运行 `rake db:setup`

这是输出：

```
[1] $ rake db:setup --trace                                                                                                                                                                     ✘
** Invoke db:setup (first_time)
** Invoke db:create (first_time)
** Invoke environment (first_time)
** Execute environment
rake aborted!
You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.+
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0/bundler/gems/cantango-36e3ce152717/lib/cantango/configuration/registry.rb:31:in `register'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0/bundler/gems/cantango-36e3ce152717/lib/cantango/configuration/candidate_registry.rb:10:in `register'
/home/chintanparikh/Documents/Work/project_name/config/initializers/cantango.rb:8:in `block in <top (required)>'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0/bundler/gems/cantango-36e3ce152717/lib/cantango.rb:23:in `configure'
/home/chintanparikh/Documents/Work/project_name/config/initializers/cantango.rb:2:in `<top (required)>'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:234:in `load'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:234:in `block in load'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:223:in `block in load_dependency'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:640:in `new_constants_in'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:223:in `load_dependency'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:234:in `load'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.1.3/lib/rails/engine.rb:556:in `block (2 levels) in <class:Engine>'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.1.3/lib/rails/engine.rb:555:in `each'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.1.3/lib/rails/engine.rb:555:in `block in <class:Engine>'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.1.3/lib/rails/initializable.rb:30:in `instance_exec'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.1.3/lib/rails/initializable.rb:30:in `run'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.1.3/lib/rails/initializable.rb:55:in `block in run_initializers'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.1.3/lib/rails/initializable.rb:54:in `each'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.1.3/lib/rails/initializable.rb:54:in `run_initializers'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.1.3/lib/rails/application.rb:96:in `initialize!'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.1.3/lib/rails/railtie/configurable.rb:30:in `method_missing'
/home/chintanparikh/Documents/Work/project_name/config/environment.rb:5:in `<top (required)>'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:240:in `require'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:240:in `block in require'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:223:in `block in load_dependency'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:640:in `new_constants_in'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:223:in `load_dependency'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.1.3/lib/active_support/dependencies.rb:240:in `require'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.1.3/lib/rails/application.rb:83:in `require_environment!'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.1.3/lib/rails/application.rb:193:in `block (2 levels) in initialize_tasks'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-10.0.1/lib/rake/task.rb:227:in `call'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-10.0.1/lib/rake/task.rb:227:in `block in execute'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-10.0.1/lib/rake/task.rb:222:in `each'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-10.0.1/lib/rake/task.rb:222:in `execute'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-10.0.1/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
/home/chintanparikh/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-10.0.1/lib/rake/task.rb:159:in `invoke_with_call_chain'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-10.0.1/lib/rake/task.rb:187:in `block in invoke_prerequisites'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-10.0.1/lib/rake/task.rb:185:in `each'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-10.0.1/lib/rake/task.rb:185:in `invoke_prerequisites'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-10.0.1/lib/rake/task.rb:165:in `block in invoke_with_call_chain'
/home/chintanparikh/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-10.0.1/lib/rake/task.rb:159:in `invoke_with_call_chain'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-10.0.1/lib/rake/task.rb:187:in `block in invoke_prerequisites'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-10.0.1/lib/rake/task.rb:185:in `each'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-10.0.1/lib/rake/task.rb:185:in `invoke_prerequisites'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-10.0.1/lib/rake/task.rb:165:in `block in invoke_with_call_chain'
/home/chintanparikh/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-10.0.1/lib/rake/task.rb:159:in `invoke_with_call_chain'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-10.0.1/lib/rake/task.rb:152:in `invoke'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-10.0.1/lib/rake/application.rb:141:in `invoke_task'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-10.0.1/lib/rake/application.rb:99:in `block (2 levels) in top_level'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-10.0.1/lib/rake/application.rb:99:in `each'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-10.0.1/lib/rake/application.rb:99:in `block in top_level'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-10.0.1/lib/rake/application.rb:108:in `run_with_threads'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-10.0.1/lib/rake/application.rb:93:in `top_level'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-10.0.1/lib/rake/application.rb:71:in `block in run'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-10.0.1/lib/rake/application.rb:158:in `standard_exception_handling'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-10.0.1/lib/rake/application.rb:68:in `run'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/gems/rake-10.0.1/bin/rake:37:in `<top (required)>'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/bin/rake:19:in `load'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/bin/rake:19:in `<main>'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/bin/ruby_noexec_wrapper:14:in `eval'
/home/chintanparikh/.rvm/gems/ruby-1.9.3-p0@global/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => db:setup => db:create => environment 
```

有谁知道如何解决这一问题？看起来它在创建步骤上失败了。

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T20:21:00.060

MongoDB 是一个无模式数据库。您不需要使用`rake db:{}`它的任何功能。要让 mongodb 启动并运行，您唯一需要做的就是安装它，然后启动服务器。[您可以在此处](http://docs.mongodb.org/manual/installation/)找到有关安装 MongoDB 的更多信息

# java - 使用从 Spinner 中选择的值设置 TextView 的文本大小，单击按钮

> ID：13481284
> 
> 赞同：0
> 
> 时间：2012-11-20T20:11:27.763
> 
> 标签：java, android, string, spinner

我想用微调器设置一个值，然后在我的 onClick 方法中将远程视图 TextView（在小部件上）的文本大小设置为所选值。我该怎么做？

谢谢

我试过了：

```
 String selected;
    Context context = WidgetConfig.this;
    static Spinner spinner;

    ...

    spinner.setOnItemSelectedListener(this); 

        public void onItemSelected(AdapterView<?> parent, View v, int position, long id) {
                Log.v(TAG, "OnItemselected started");

                switch (position) {
                case 0:
                    selected = "10".toString();
                 Break;
               }
           }

            public void onNothingSelected(AdapterView<?> arg0) {

            }

        View.OnClickListener mOnClickListener = new View.OnClickListener() {
                public void onClick(View v) {

                    Log.v(TAG, "set remote view");
                    RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget);

                    Log.v(TAG, "set txt size");
  /* without this line*/              float number = Float.valueOf(selected.toString());
  /* and this line, it runs fine */   views.setFloat(R.id.tvConfigInput, "setTextSize", number);

        ...

        }
            }; 
```

更新：

我两次声明了字符串，所以我修复了它，现在它没有崩溃，但它不起作用。文字大小没有改变..怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:17:58.220

您选择的字符串为空，您确实在范围而不是全局变量中定义了所选字符串。改变它，它应该工作

```
 String selected = "0"; // defined outside the function scope
    public void onItemSelected(AdapterView<?> parent, View v, int position, long id) {
                    Log.v(TAG, "OnItemselected started");

                    switch (position) {
                    case 0:
                        selected = "10".toString(); 
                     Break;
                   }
               }

    float number = Float.valueOf(selected); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T20:14:04.977

您的答案如下：

WidgetConfig.java 中的第 254 行正在调用空对象的方法。

```
11-20 21:07:29.018: E/AndroidRuntime(2547): java.lang.NullPointerException
11-20 21:07:29.018: E/AndroidRuntime(2547):     at com.harteg.NotesWidgetPro.WidgetConfig$1.onClick(WidgetConfig.java:254) 
```

# c# - 如何使用不同类型进行投射

> ID：13481287
> 
> 赞同：2
> 
> 时间：2012-11-20T20:11:35.677
> 
> 标签：c#, class, casting

这是我的代码：

```
public class MyButton
{
  Object button;

  public MyButton(System.Windows.Forms.ToolStripButton button)
  {
    this.button = button;
  }

  public MyButton(System.Windows.Forms.ToolStripSplitButton button)
  {
    this.button = button;
  }

  public void EnableButton(bool enable)
  {
    if (button is System.Windows.Forms.ToolStripButton)
      ((System.Windows.Forms.ToolStripButton)button).Enabled = enable;
    else if (button is System.Windows.Forms.ToolStripSplitButton)
      ((System.Windows.Forms.ToolStripSplitButton)button).Enabled = enable;
  }

  //...
} 
```

我想知道我可以让这段代码更短吗？我可以以某种方式按其类型投射它吗？像这样的东西：

```
public void EnableButton(bool enable)
{
  ((FakeFuctionToGetCastType(button))button).Enabled = enable;
} 
```

当然这是我的假功能......那么有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:18:38.090

因为您使用的是`is`运算符，所以我假设`ToolStripButton`并`ToolStripSplitButton`扩展。因此是基类`Button`Button`Enabled`中定义的属性。因此，将多态调用 Enabled，如果实际类型为`ToolStripButton`，则将`Enabled`调用它。所以这应该足够了

```
 Button button;
  button.Enabled=enable; 
```

或者

```
 this.Enabled=enable; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T20:21:45.760

我会使其通用：

```
public class MyButton<T> where T : System.Windows.Forms.ToolStripItem
{
    T button;

    public MyButton(T button) 
    {
        this.button = button;
    }

    public void EnableButton(bool enable)
    {
        this.button.Enabled = enable;
    }
} 
```

*编辑：作为旁注，您希望约束在泛型的分配中尽可能严格。如果您可以为要使用的控件找到一个更接近的通用继承类，`Control`那么您应该使用那个。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T20:13:48.387

如果 Enabled 属性在基类上`Button`（可能是），则不需要强制转换。只需这样做：

```
public class Button
{
  Control button;

  public Button(Control button)
  {
    this.button = button;
  }

  public void EnableButton(bool enable)
  {
    button.Enabled = enable;
  }

  //...
} 
```

如果 Enabled 属性不在`Button`基类上，您可以这样做：

```
((dynamic)Button).Enabled = enable; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T20:14:26.917

你可以这样做；

```
public class Button
{
   System.Windows.Forms.ToolStripItem button;

  public MyButton(System.Windows.Forms.ToolStripItem button)
  {
    this.button = button;
  }

  public void EnableButton(bool enable)
  {
    button.Enable = enable;
  }

  //...
} 
```

# visual-studio - 升级visual studio，但还是可以使用旧版本

> ID：13481289
> 
> 赞同：1
> 
> 时间：2012-11-20T20:11:37.830
> 
> 标签：visual-studio, visual-studio-2008, visual-studio-2012

因此，我们希望所有新员工都使用 VS 2012，但仍有现有员工使用 VS 2008。是否可以在不必维护两个单独的解决方案和项目（每个版本一个）的情况下做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T20:12:29.513

您可以使用 Visual Studio 2012 和 VS 2010 Service Pack 1 执行此操作（由于[新的往返功能](http://blogs.msdn.com/b/zainnab/archive/2012/06/05/visual-studio-2012-compatibility-aka-project-round-tripping.aspx)），但不能使用旧版本。打开 2008 解决方案需要升级到更新的格式。

# ms-access - 选择案例中的 TempVar

> ID：13481292
> 
> 赞同：0
> 
> 时间：2012-11-20T20:12:25.093
> 
> 标签：ms-access, ms-access-2007, vba

我正在尝试使用 a`Select Case`来评估`TempVar`字符串值，但这种情况并没有给我正确的结果。

到目前为止我的 VBA 代码：

```
Private Sub Form_Load()

    Select Case TempVars!CurrentStatus

        Case Entered
            'code to disable some controls

        Case In Progress
            'code to disable some controls

        Case Ready to Approve
            'code to disable some controls

        Case Approved
            'code to disable some controls

        Case Else
            Call MsgBox("Case statement didn't catch", vbInformation, "Tempvar test for case statements")

    End Select
End Sub 
```

以`TempVar`另一种形式设置如下：

```
Dim StrUserInput1 As String

TempVars("CurrentStatus").Value = DLookup("Status", "Control", "Status = '" & StrUserInput1 & "'")

'This is set by comparing the user input vs allowed status (for reports which is yet to be implemented) 
```

我试过设置`Case`as`Case "Entered"`但它总是选择第一种情况，而不是正确的情况。如果它的格式如上所示，结果是`Case Else`

谁能提供一些关于我为什么或如何没有得到正确结果的见解？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T20:16:40.027

我很惊讶代码甚至可以运行并且没有抛出错误。您需要将字符串文字放在引号中，如下所示：

```
Select Case TempVars!CurrentStatus

    Case "Entered"
        code to disable some controls

    Case "In Progress"
        code to disable some controls

    Case "Ready to Approve"
        'code to disable some controls

    Case "Approved"
        'code to disable some controls

    Case Else

        Call MsgBox("Case statement didn't catch", vbInformation, "Tempvar test for case statements")

End Select 
```

如果这不起作用，请放置一个断点`Select Case TempVars!CurrentStatus`以查看`TempVars!CurrentStatus`它进入 case 表达式时的值。

# sql - 如何从sql server中的select语句更新表

> ID：13481295
> 
> 赞同：0
> 
> 时间：2012-11-20T20:12:31.947
> 
> 标签：sql, sql-server-2008

如何从 select 语句结果中更新表。这是我的选择声明：

```
SELECT count(distinct r.[ID])as Total
  FROM Table1 r left join
  Tabel2 a
  on r.ID = a.ID
  where a.Status is null 
```

这就像我想做的，我知道这是错误的：

```
update MyTable
set mycol = total
from
(
SELECT count(distinct r.[ID])as Total
      FROM Table1 r left join
      Tabel2 a
      on r.ID = a.ID
      where a.Status is null) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:21:35.443

在我假设的情况下，您在两个表中都有多行，并且您希望使用子查询的相关结果逐行更新第一个表，您需要添加一个连接（假设两个数据集都将下面有我所说的“识别字段”）：

```
Update MyTable
set mycol = b.total
from
MyTable a
inner join 
(
  SELECT identifyingfield, count(distinct r.[ID])
  FROM Table1 r left join
  Tabel2 a
  on r.ID = a.ID
  where a.Status is null
  group by identifyingfield
) b
ON a.identifyingfield = b.identifyingfield 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T20:19:22.160

您所要做的就是进行一些微小的更改。以下是您需要使用的代码：

```
update MyTable
set mycol = (SELECT count(distinct r.[ID])as Total
  FROM Table1 r left join
  Tabel2 a
  on r.ID = a.ID
  where a.Status is null) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T20:17:37.690

使用中的子查询`set`：

```
update MyTable
set mycol = (
  SELECT count(distinct r.[ID])
  FROM Table1 r left join
  Tabel2 a
  on r.ID = a.ID
  where a.Status is null
) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T20:39:07.917

你可以尝试这样的事情：

```
with "sums"
as
(
  select 
    F."id"
  , "sum" = sum( F."value" ) over ( partition by F."id" )
  from
    "foo" F
)
update 
  B
set
  B."totals" = S."sum"
from
  "bar" B 
  inner join "sums" S
    on S."id" = B."id"; 
```

[在这里看到 sql-fiddle](http://sqlfiddle.com/#!3/8921f/28/0)

# iphone - NSUserDefaults 记住视图

> ID：13481296
> 
> 赞同：2
> 
> 时间：2012-11-20T20:12:35.767
> 
> 标签：iphone, objective-c, xcode, nsuserdefaults

我的应用程序包含几个视图，我想在应用程序启动并且用户尚未完成向导时显示一个小设置。我知道我可以使用 NSUserDefaults 实现这一点，但我不确定如何根据 NSUserDefaults 存储的输入字符串显示特定视图。

我的 AppDelegate.m：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    NSString *controllerName = [[NSUserDefaults standardUserDefaults] objectForKey:@"WIZARD_VIEW"];
    if ([controllerName length]) {
        Class controllerClass = NSClassFromString(controllerName);
        UIViewController *controller = [[controllerClass alloc] init];

    // Override point for customization after application launch.
    return YES;
    } 
```

然后在 viewcontroller 文件中，我添加了以下代码作为 jfaller 的建议：

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    NSUserDefaults* standard=[NSUserDefaults standardUserDefaults];
    [standard registerDefaults: @{ @"WIZARD_VIEW" : [[self class]description]} ];    [[NSUserDefaults standardUserDefaults] synchronize];
}

- (void)viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:animated];
    NSUserDefaults* standard=[NSUserDefaults standardUserDefaults];
    [standard registerDefaults: @{ @"WIZARD_VIEW" : [[self class]description]} ];
    [[NSUserDefaults standardUserDefaults] synchronize];
} 
```

但是我怎样才能做到这一点，以便它显示在设置中选择的特定视图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T20:40:29.590

就个人而言，我会做以下事情：

每次用户进入向导中的新视图时，在用户默认值中记录 UIViewController：

```
- (void)viewWillAppear:(BOOL)animated {
  [super viewWillAppear:animated];
  [[NSUserDefaults standardUserDefaults] setObject:[[self class] description] forKey:WIZARD_VIEW];
  [[NSUserDefault standardUserDefaults] synchronize];
}

- (void)viewWillDisappear:(BOOL)animated {
  [super viewWillDisappear:animated];
  [[NSUserDefaults standardUserDefaults] removeObjectForKey:WIZARD_VIEW];
  [[NSUserDefault standardUserDefaults] synchronize];
} 
```

当用户重新启动应用程序时（假设在向导中间），重新加载视图：

```
- (BOOL)application:(UIApplication *)application
    willFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
  // etc.
  NSString *controllerName = [[NSUserDefaults standardUserDefaults] objectForKey:WIZARD_VIEW];
  if ([controllerName length]) {
    Class controllerClass = NSClassFromString(controllerName); 
    NSViewController *controller = [[controllerClass alloc] init];
    // push the controller, or whatever....
  }
  // etc.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T20:36:39.310

在视图加载时将您所在的视图写入 NSUserDefaults。然后检查 中的值`didFinishLaunchingWithOptions`。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    if ([[[NSUserDefaults standardUserDefaults] valueForKey:@"current_setup"] isEqualToString:@"1"]) {

         //on view 1!   

    }

} 
```

# apache - 用于多个 glassfish 域的 Apache mod 代理 ajp

> ID：13481297
> 
> 赞同：0
> 
> 时间：2012-11-20T20:12:37.343
> 
> 标签：apache, proxy, glassfish-3, ajp

我只能找到有关 mod_jk 的信息，但我认为我不能是唯一一个想要这样做的人，希望有人已经这样做了。

我有一个单一的 apache httpd 服务器，它已经有代理 ajp 通过端口 8009 连接到 glassfish 3.1.2 域。我想在同一个 glassfish 服务器上添加更多具有不同代码的域，并拥有 httpd 代理。

由于缺乏信息，我什至不知道从哪里开始。这是在 VPS 上运行的，我将/将在 apache2 上使用虚拟域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:21:29.590

我遇到了同样的问题，我想其他人也会。

特此我的解决方案：

您需要在 glassfish 上创建虚拟服务器，设置正确的根模块并使用完整的 url 转发您的请求。

1.  创建特定的虚拟服务器

    *   在 Glassfish 管理界面中，转到

        > 配置 > 服务器配置（默认） > 虚拟服务器

    *   选择新的

    *   填写值

        > *   id：虚拟服务器的名称，我使用与主机相同的名称（*my.sample.com*）
        > *   主机：您要映射的域（*my.sample.com*）
        > *   网络侦听器：域将侦听哪些端口（*http-listener1*）
        > *   默认 Web 模块：您的模块（*mysuperapp_R1.1*）

确保您的应用程序已部署到配置（默认为 server-config），并且您的域解析到服务器。您可以通过访问*http://my.sample.com:8080/*轻松测试您的设置（假设应用程序在 8080 上运行）。您的应用程序应该可以运行。

2）在apache中转发请求。（在 debian 上，但对于其他发行版应该类似），在 /etc/apache2/sites-available 中创建一个 my.sample.com 文件（可以是任何东西，但这非常明确），其中包含以下内容（更改域名当然）

```
<VirtualHost *:80>
ServerName my.sample.com
<Proxy *>
    Order deny,allow
    Allow from all
</Proxy>
<Location />
    ProxyPass http://my.sample.com:8080/
    ProxyPassReverse http://my.sample.com:8080/
</Location>
</VirtualHost> 
```

启用配置并重新加载 apache（在 Debian 上，以下命令应该可以工作）

```
a2ensite my.sample.com
/etc/init.d/apache2 reload 
```

由于我与 Primefaces GMap 模块发生冲突，我没有使用 AJP。当然，从代理更改为 AJP 并不是难事。只需确保还为虚拟服务器选择了启用 JK 的网络侦听器。

如何在 apache 上启用 mod-proxy 或 mod ajp 代理，只需 google 即可：)

# java - 向 GWT 中未加密的服务器发送密码有多安全？

> ID：13481298
> 
> 赞同：0
> 
> 时间：2012-11-20T20:12:35.833
> 
> 标签：java, gwt

在 GWT 应用程序中，我正在构建一个登录系统。

我已经在服务器端实现了 BCrypt。我的 User 类仅在服务器端，以保护数据。我做了以下假设，如果它们是正确的，我无法确定：

*   由于客户端 java 被转换为 javascript，我不应该将密码的内容保存在客户端变量中，因为它是可读的。
*   出于同样的原因，我应该将它发送到已经散列的服务器。
*   我不应该将我的 User 类放在 shared 中，因为我不希望它的属性可以从源代码中读取/派生。

我见过很多例子，但没有一个在将密码发送到服务器之前对其进行加密。这安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:23:19.393

只要您使用 HTTPS 等安全通道，将未加密的密码发送到服务器是安全的。

出于性能原因，您还可以将相同的用户对象（不存储密码）保留在内存中，只需确保始终在服务器端对其进行验证。永远不要相信客户提供给您的用户信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T20:34:38.410

在将密码发送到服务器之前对其进行哈希处理并不能证明任何事情。（除了可能保护用户表单在使用相同密码的其他系统上受到损害。）

**如果攻击者拥有您从客户端发送到服务器的任何内容，无论是明文、哈希还是量子脑电波，他们都拥有访问系统所需的一切。**

敏感信息需要通过加密的套接字发送，然后你自己如何编码都没关系。

# jsf-2 - 如何使用 Spring Security 验证 bean 内的登录？

> ID：13481299
> 
> 赞同：0
> 
> 时间：2012-11-20T20:12:40.167
> 
> 标签：jsf-2, spring-security

所以我正在学习 Spring，我正在使用带有 PrimeFaces 的 JSF。

我的问题：

我想知道如何（如果可能）使用 bean 中的布尔函数对用户凭据进行身份验证和授权，如下所示：

```
public boolean check() {
  boolean isLoginValid = false;
  if (//run something like j_spring_security_check) {
      //obtain user authorizations....
      isLoginValid = true;
  }
  return isLoginValid;
} 
```

原因：

```
public void doLogin() {
    RequestContext context = RequestContext.getCurrentInstance();

    FacesMessage msg;
    boolean loggedIn;

    if (check() //would use the functin here) {
        loggedIn = true;
        msg = new FacesMessage(FacesMessage.SEVERITY_INFO, "Welcome", usuario);
    } else {
        loggedIn = false;
        msg = new FacesMessage(FacesMessage.SEVERITY_WARN, "Login Error", "Invalid credentials");
    }

    FacesContext.getCurrentInstance().addMessage(null, msg);
    context.addCallbackParam("loggedIn", loggedIn);
    context.addCallbackParam("authorization", this.auth #obtained in check());
} 
```

这样我就可以通过 ajax 将布尔值发送到我的按钮，如下所示：

```
<p:commandButton id="loginButton" value="Login" update=":growl"   
                          actionListener="#{loginBean.doLogin}"   
                          oncomplete="handleLoginRequest(xhr, status, args)"/>

function handleLoginRequest(xhr, status, args) {
            if(args.validationFailed || !args.loggedIn) {  
                jQuery('#dialog').effect("shake", { times:3 }, 100);
            } else {
                jQuery('#dialog').effect("shake", { times:1 }, 200);
                //And redirect to the right page.
            }  
        } 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:03:26.230

在 的帮助下`SpringBeanFacesELResolver`，您可以`Authentication Manager`从 Spring 应用程序上下文中解析托管属性，并且 JSF 的 IOC 将 bean 注入您的支持 bean。

为此，将 SpringBeanFacesELResolver 添加到您的 faces-config.xml 中，如下所示：

```
<application>
    <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>
</application> 
```

然后在您的支持 bean 中，您可以对传递的 Authentication 对象进行身份验证，如下所示：

```
public class LoginBean implements Serializable {
    private static final long serialVersionUID = 1L;
    private String userName;
    private String password;
    @ManagedProperty(value="#{authenticationManager}")
        private AuthenticationManager authenticationManager;
        public AuthenticationManager getAuthenticationManager() {
        return authenticationManager;
    }

    public void setAuthenticationManager(AuthenticationManager authenticationManager) {
        this.authenticationManager= authenticationManager;
    }

    public String doLogin() {
        Authentication authenticationRequestToken =
              new UsernamePasswordAuthenticationToken( userName, password );
        //authentication action
        try {
            Authentication authenticationResponseToken =
                authenticationManager.authenticate(authenticationRequestToken);
            SecurityContextHolder.getContext().setAuthentication(authenticationResponseToken);
            //ok, test if authenticated, if yes reroute
            if (authenticationResponseToken.isAuthenticated()) {
                //lookup authentication success url, or find redirect parameter from login bean
                return "/secure/examples";
            }
        } catch (BadCredentialsException badCredentialsException) {
            FacesMessage facesMessage =
                new FacesMessage("Login Failed: please check your username/password and try again.");
            FacesContext.getCurrentInstance().addMessage(null,facesMessage);
        } catch (LockedException lockedException) {
            FacesMessage facesMessage =
                new FacesMessage("Account Locked: please contact your administrator.");
            FacesContext.getCurrentInstance().addMessage(null,facesMessage);
        } catch (DisabledException disabledException) {
            FacesMessage facesMessage =
                new FacesMessage("Account Disabled: please contact your administrator.");
            FacesContext.getCurrentInstance().addMessage(null,facesMessage);
        }

        return null;
    }
} 
```

也可以看看：

*   [Spring 自定义 JSF 登录页面，总是“错误凭据”](https://stackoverflow.com/questions/11742283/spring-custom-jsf-login-page-always-bad-credentials/11746589#11746589)

**更新**

如果由于某种原因您无法使用 @ManagedProperty。您可以尝试通过将 JSF ManagedBean 变成 Spring 管理的组件来使用 Spring @Autowired 注解。为此，像这样注释bean：

```
@Component
@Scope("request")
public class LoginController implements Serializable {
    @Autowired
    private AuthenticationManager authenticationManager;
        //bean getters and setters 
```

并将组件扫描元素添加到您的 Spring 应用程序上下文中，如下所示：

```
<context:component-scan base-package="com.examples"/> 
```

对于您关于使用 authentication-success-handler-ref 的问题，恐怕您可以使用它，因为我们正在手动进行身份验证。如果您的要求只是根据用户角色转发到适当的 url。你可以这样做：

```
if (authenticationResponseToken.isAuthenticated()) {
   String userTargetUrl = "/general/main";
   String adminTargetUrl = "/secure/examples";
   Set<String> roles = AuthorityUtils.authorityListToSet(authenticationResponseToken.getAuthorities());
   if (roles.contains("ROLE_ADMIN")) {
      return adminTargetUrl;
   }
   else if(roles.contains("ROLE_USER")) {
      return userTargetUrl;
   }
} 
```

# bash - 逐行读取文件，如果行长= 170，则删除结束行字符

> ID：13481303
> 
> 赞同：0
> 
> 时间：2012-11-20T20:12:57.717
> 
> 标签：bash, shell, unix, ksh

我正在尝试编写一个非常简单的 shell 脚本，它将逐行解析文件，如果它发现该行的长度是 170 个字符，那么我希望它比行尾字符删除，以便它会合并下一个与它一致。

我编写了脚本，但它不起作用，我知道我遗漏了一些东西，因为我不断收到此错误：

```
-bash-3.2$ ./removeline.sh
'/removeline.sh: line 2: syntax error near unexpected token `do
'/removeline.sh: line 2: `do 
```

这是我的脚本：

```
for line in `testfile.log`
do
echo ${#line} > $i
if $i = 170 ; then
tr -d '\n'
end
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:22:13.723

你的代码有这么多问题，从哪里开始？和中
的语法是：`bash``ksh`

```
while read line
do
    i=${#line}
    if (( $i == 170 ))
    then
        tr -d '\n'
    fi
done < testfile.log 
```

（我没有检查`tr`命令）但是，我仍然认为这不会达到你的目的。

这可能更接近标记：

```
while read line
do
    i=${#line}
    if (( $i == 170 ))
    then
        echo -n "$line"
    else
        echo "$line"
    fi
done < testfile.log > testfile.new 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T20:51:25.287

`tr`在这里是错误的工具，因为它不会操纵您已经阅读的行。好吧，你可以`echo "$line" | tr -d '\n'`试试这个：

```
while read line; do
  n=""
  case $#line in 170 ) n="-n" ;; esac
  echo $n "$line"
done <testfile.log 
```

...假设`echo -n`省略了系统上的最后一个换行符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T23:23:43.087

```
while read line; do
    (( ${#line} == 170 )) && c="" || c=$'\n'
    printf "%s%s" "$line" "$c"
done < testfile.log 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T20:44:55.480

一点`awk`可能会有所帮助：

```
awk '{if (length($0) == 170) printf "%s",$0; else print $0}' < file 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T20:47:25.653

使用`perl`（便携式和适当的解决方案）

```
$ perl -ne 'chomp; length($_) == 170 ? print : print $_, $/' file.txt 
```

# delphi - Delphi - 任意颜色的“棕褐色”例程的实现

> ID：13481305
> 
> 赞同：3
> 
> 时间：2012-11-20T20:13:04.737
> 
> 标签：delphi, colors, image-manipulation, delphi-2006, colorize

我见过将图像转换为棕褐色调版本的奇怪例程，例如：

```
function bmptosepia(const bmp: TBitmap; depth: Integer): Boolean;
var
color,color2:longint;
r,g,b,rr,gg:byte;
h,w:integer;
begin
  for h := 0 to bmp.height do
  begin
    for w := 0 to bmp.width do
    begin
//first convert the bitmap to greyscale
    color:=colortorgb(bmp.Canvas.pixels[w,h]);
    r:=getrvalue(color);
    g:=getgvalue(color);
    b:=getbvalue(color);
    color2:=(r+g+b) div 3;
    bmp.canvas.Pixels[w,h]:=RGB(color2,color2,color2);
//then convert it to sepia
    color:=colortorgb(bmp.Canvas.pixels[w,h]);
    r:=getrvalue(color);
    g:=getgvalue(color);
    b:=getbvalue(color);
    rr:=r+(depth*2);
    gg:=g+depth;
    if rr <= ((depth*2)-1) then
    rr:=255;
    if gg <= (depth-1) then
    gg:=255;
    bmp.canvas.Pixels[w,h]:=RGB(rr,gg,b);
    end;
  end;
end; 
```

（从[这里](http://www.swissdelphicenter.ch/torry/showcode.php?id=1794)）但我需要一些可以为任意颜色执行此操作的东西 - 即它将拍摄图像，大概形成它的灰度版本，然后将新颜色应用于图像。这是我遇到的最后一点问题 - 即用感兴趣的颜色替换灰色阴影。

所以我需要

```
procedure BmpToOneColor (const bmp      : TBitmap ;
                               depth    : Integer ; 
                               NewColor : TColor) ; 
```

（我不知道为什么原件被写成布尔函数）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T22:36:26.387

您的基本算法只是为灰度值的每个颜色通道添加固定偏移量。我们可以概括这一点，以便`NewColor`参数确定每个通道的偏移量。请注意，它`depth`变得多余，您可以完全忽略它。

```
rbase:=getrvalue(NewColor);
gbase:=getgvalue(NewColor);
bbase:=getbvalue(NewColor);
base:=min(rbase,min(gbase,bbase));
rdepth:=rbase-base;
gdepth:=gbase-base;
bdepth:=bbase-base;

rr:=r+rdepth;
gg:=g+gdepth;
bb:=b+bdepth;
if rr < rdepth then
    rr:=255;
if gg < gdepth then
    gg:=255;
if bb < bdepth then
    bb:=255; 
```

# python - Django 管理员电子邮件未正确发送

> ID：13481307
> 
> 赞同：0
> 
> 时间：2012-11-20T20:13:11.457
> 
> 标签：python, django, email

我不确定为什么我的错误记录不起作用。当我尝试使用具有默认“mail_admins”处理程序的记录器记录错误时，即使 SERVER_EMAIL 和 ADMINS 似乎已正确定义，也不会发送电子邮件。查看后缀日志，每当我尝试发送以下电子邮件之一时，都会收到此行：

```
Nov 20 11:55:58 localhost postfix/smtpd[1027]: NOQUEUE: reject: RCPT from localhost[127.0.0.1]: 550 5.1.1 <g>: Recipient address rejected: User unknown in local recipient table; from=<no-reply@mydomain.com
> to=<g> proto=ESMTP helo=<localhost> 
```

为什么要尝试将电子邮件发送到“g”而不是指定的管理员电子邮件？

编辑：顺便说一下， send_mail 确实可以正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T13:28:13.377

```
ADMINS = ( ('John Doe','some_email@that-isnt-just-g.com') ) 
```

应该：

```
ADMINS = [ ('John Doe','some_email@that-isnt-just-g.com') ] 
```

或者：

```
ADMINS = ( ('John Doe','some_email@that-isnt-just-g.com'), ) 
```

# asp.net-mvc-3 - 将 asp.net 连接到 SQL Server 并在主页上显示结果

> ID：13481310
> 
> 赞同：1
> 
> 时间：2012-11-20T20:13:21.290
> 
> 标签：asp.net-mvc-3, sql-server-2008, connect

我正在开发一个新的博客站点，其中条目存储在 SQL Server 数据库中。我现在遇到的问题是将我的主页与 SQL Server 链接起来。我以前设法将程序连接到数据库。现在我尝试使用相同的代码访问 asp.net mvc 3 网站。

这个类我保存在文件夹模型中。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.SqlClient;

namespace testingtesting.se.Models
{
    public class msSQL
    {
        public SqlDataReader postList()
        {
            string connectionString = "Server=;Database=;User Id=;Password= ";
            SqlConnection con = new SqlConnection(connectionString);
            con.Open();
            SqlCommand com = new SqlCommand("SELECT * FROM Post", con);
            SqlDataReader reader = com.ExecuteReader();
            return reader;
        }
    }
} 
```

我是 asp.net mvc 3 的新手，但如果我正确理解所有内容，模型文件夹中的类会从数据库发送和接收数据，而控制器会将数据发送到我现在尝试执行的视图。到目前为止，我已经尝试通过控制器将 postList 方法的结果发送到视图，然后以简洁的方式显示它。但我无法让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:54:41.987

所以你的控制器可能看起来像：

```
public ActionResult Index()
{
    msSQL mssql = new msSQL();
    return View(mssql.postList());
} 
```

您的视图可能如下所示：

```
@model SqlDataReader

@while(Model.read())
{
    Model["columnName"]
} 
```

但是，最佳实践是创建一个模型来表示您尝试从数据库中提取的数据，填充模型，然后将此模型传递给视图，而不是将 SqlDataReader 传递给视图。

如果这没有帮助，请发布您遇到的错误/为什么它不起作用。

# android-fragments - 修改与片段关联的布局中的视图

> ID：13481314
> 
> 赞同：2
> 
> 时间：2012-11-20T20:13:49.567
> 
> 标签：android-fragments

我是 Android 开发的新手。我编写了一个简单的应用程序来理解事物的流程，使用活动和片段。现在我正在尝试编写一个希望对人们有用的应用程序。

我遇到了片段问题。调用 onCreatView() 后系统膨胀的布局会出现问题。

情况是这样的：我正在尝试使用平板电脑屏幕模拟器让事情正常进行。我已经获得了在屏幕左侧显示列表的代码，一旦选择了列表中的项目，新布局就会出现在右侧。问题是我无法对右侧片段中的布局做任何事情，这可能就是片段的工作方式。它们似乎是只读的。如果是这种情况，那么我将不得不以不同的方式设计整个应用程序。

您会看到，我希望能够访问和修改（TextView、EditText ...）的内容与片段中的布局相关联的视图。我需要的方法（但在片段中不可用）是 findViewById() 和 setText(Charsequence text) 以及其他 set... 方法。这些在活动级别可用，但不存在膨胀的布局。

那么，是否有另一种方法可以访问片段中的这些视图来修改它们？或者正在做一些事情来将这些类型的方法添加到片段类中，以允许访问和修改与特定片段关联的视图的内容。现在看起来我将不得不使用不同的活动来完成我认为使用片段可能发生的事情。

也许有人已经处理过这类问题并且可以提供一些见解。感谢您的帮助，因为我已经尝试解决这个问题好几天了，但我在搜索中没有找到答案。

提前致谢，

道格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T21:30:04.030

你有你在片段中提到的所有方法。

这是如何膨胀布局并从该布局获取视图对象的示例。

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
{
    // inflate layout for this fragment
    View v = inflater.inflate(R.layout.web_frag, null);

    // get the WebView object that is in the layout
    WebView wv = (WebView) v.findViewById(R.id.wv);
} 
```

# ms-access - 如何在 Access 2010 中的查询中使用 ALL 或 ANY 运算符

> ID：13481321
> 
> 赞同：3
> 
> 时间：2012-11-20T20:14:21.033
> 
> 标签：ms-access

问题：列出单价大于项目类别 AP 中每个零件的单价的每个零件的零件编号、零件描述、单价和项目类别。在查询中使用 ALL 或 ANY 运算符。

这是我正在尝试的，但它不起作用......帮助

```
SELECT Part.PartNum, Part.Description, Part.Price, Part.Class
FROM Part
WHERE [Price]> ANY 
AND Part.Class="AP"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T20:24:46.257

我相信正确的语法是这样的：

```
SELECT Part.PartNum, Part.Description, Part.Price, Part.Class
FROM Part
WHERE [Price]> ANY 
(Select Price from Part Where
Class="AP"); 
```

重要的部分是您放置在 Any 之后的是用括号编写的子查询。

这是我用来格式化我的答案的参考。[SQL 子查询 (Microsoft Access SQL)](http://msdn.microsoft.com/en-us/library/office/ff192664%28v=office.14%29.aspx)

# flex4 - 如何制作针对其他自定义突出显示按钮并取消选择和取消突出显示的自定义 Flex 4 按钮？

> ID：13481327
> 
> 赞同：3
> 
> 时间：2012-11-20T20:14:33.983
> 
> 标签：flex4, mxml, reset

我有一个包含一堆组件的组件，如果您单击并拖动这些组件，它们就会亮起。如果您单击并拖动这些相同的组件，它们就会恢复到正常设置。（同样，当它们被单击和未单击时，百分比值被链接以显示在组件的右侧）

现在我正在尝试创建一个“重置”按钮，将百分比设置回零并取消突出显示以前选择的所有部分。但是我在重置按钮底部的函数 (resetGVHD) 中收到“错误 #1009 无法访问空对象引用的属性或方法”。

（另外， - showCaption 是我用来使其突出显示的功能。hideCaption 是用于取消突出显示的功能。）

任何帮助将不胜感激！谢谢！

这是我的代码：

```
 public var holdingPiece:Boolean = false;
    public var holdingSelectedPiece:Boolean = false;
    [Bindable]
    public var numberBodyButtonSelected:Number = 0;

    protected function pieMouseDownHandler(event:MouseEvent):void
    {
        var bodyButton:BodyButton= event.currentTarget as BodyButton;
        if( bodyButton.selected ){

            holdingSelectedPiece = true;
            holdingPiece = false;

            bodyButton.hideCaption();
            if (bodyButton.includedinBody){
                numberBodyButtonSelected -= bodyButton.percentageValue;
                }

            }else{

                 holdingSelectedPiece = false;
                 holdingPiece = true;

                 bodyButton.showCaption();
                 if (bodyButton.includedinBody){

            numberBodyButtonSelected+=  bodyButton.percentageValue;
                }

            }

        stage.addEventListener( MouseEvent.MOUSE_UP, releasePiece );

        }

        protected function pieRollOver(event:MouseEvent):void
        {

            var myPie:BodyButton = event.currentTarget as BodyButton;

            if( holdingPiece ){

                if( !myPie.selected ){

                    myPie.showCaption();
                    if (myPie.includedinBody){
                        numberBodyButtonSelected+= myPie.percentageValue;
                    }
                }

            }else if( holdingSelectedPiece ){

                if( myPie.selected ) {

                    myPie.hideCaption();
                    if (myPie.includedinBody){
                numberBodyButtonSelected-= myPie.percentageValue;
                    }
                }

            }

        }

        protected function releasePiece( event:MouseEvent ):void
        {

        stage.removeEventListener( MouseEvent.MOUSE_UP, releasePiece );

            holdingPiece = false;
            holdingSelectedPiece = false;

        }

        public var bodyButton:BodyButton;
        protected function resetGVHD( event:MouseEvent ):void{

            numberBodyButtonSelected=0; 

            bodyButton.hideCaption();

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T18:48:08.740

你正在寻找这样的东西：

```
public var holdingPiece:Boolean = false;
public var holdingSelectedPiece:Boolean = false;
[Bindable]
public var numberBodyButtonSelected:Number = 0;

private var selectedButtons:Array = [];

protected function pieMouseDownHandler(event:MouseEvent):void
{
    var bodyButton:BodyButton = event.currentTarget as BodyButton;
    if( bodyButton.selected ){
        holdingSelectedPiece = true;
        holdingPiece = false;
        bodyButton.hideCaption();
        if (bodyButton.includedinBody){
            numberBodyButtonSelected -= bodyButton.percentageValue;
        }
    }else{
        holdingSelectedPiece = false;
        holdingPiece = true;
        bodyButton.showCaption();
        if (bodyButton.includedinBody){
            selectedButtons.push( bodyButton ); // this might go outside the if (bodyButton.includedinBody) condition
            numberBodyButtonSelected+=  bodyButton.percentageValue;
        }
    }
    stage.addEventListener( MouseEvent.MOUSE_UP, releasePiece );
}

protected function pieRollOver(event:MouseEvent):void
{
    var myPie:BodyButton = event.currentTarget as BodyButton;
    if( holdingPiece ){
        if( !myPie.selected ){
            myPie.showCaption();
            if (myPie.includedinBody){
                selectedButtons.push( bodyButton ); // this might go outside the if (myPie.includedinBody) condition
                numberBodyButtonSelected+= myPie.percentageValue;
            }
        }
    }else if( holdingSelectedPiece ){
        if( myPie.selected ) {
            myPie.hideCaption();
            if (myPie.includedinBody){
                numberBodyButtonSelected-= myPie.percentageValue;
            }
        }
    }
}

protected function releasePiece( event:MouseEvent ):void{
    stage.removeEventListener( MouseEvent.MOUSE_UP, releasePiece );
    holdingPiece = false;
    holdingSelectedPiece = false;
}

protected function resetGVHD( event:MouseEvent ):void{
    numberBodyButtonSelected=0;
    for (var i:int = 0; i < selectedButtons.length; i++) {
        BodyButton(selectedButtons[i]).hideCaption();
    }
    selectedButtons = [];
} 
```

现在 resetGVHD 函数将在数组中的所有按钮上调用 hideCaption 函数......但我不确定它是否会工作，缺少太多代码。

# android - android，响应布局调整大小

> ID：13481337
> 
> 赞同：1
> 
> 时间：2012-11-20T20:14:59.937
> 
> 标签：android, layout, admob

我正在使用一个没有宽度/高度的 AdMob 视图，直到它准备好显示然后展开。有没有办法在发生这种情况时得到通知？发生这种情况时，我需要调整布局大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T20:26:18.237

您可以覆盖`onLayout`视图的方法：

```
 View view = new View(this) {
        protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
            super.onLayout(changed, left, top, right, bottom);
            // Do some stuff
        }
    }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T20:25:24.883

尝试使用这个

```
AdView.setAdListener(new AdListener() {
  public void onRecieveAd(){
      //resize your view
  }
}); 
```

如果您想知道您的 adview 何时收到广告，则可以使用`onFailedToRecieveAd`侦听器。

```
AdView.setAdListener(new AdListener() {
  public void onFailedToRecieveAd(){
      //do something else
  }
}); 
```

*   [如何知道 AdMob 广告是否已加载](https://stackoverflow.com/questions/9797007/how-to-know-if-admob-ad-has-been-loaded)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T20:27:11.117

如果您使用将 adMob 置于有效位置的相对布局，则效果最佳。您实际上可以放置 adMob 图像，使其成为布局的一部分。当图像进入时，布局会被适当地打乱。

或者，您可以查看 adListeners

```
public interface AdListener {
  public void onReceiveAd(Ad ad);
  public void onFailedToReceiveAd(Ad ad, AdRequest.ErrorCode error);
  public void onPresentScreen(Ad ad);
  public void onDismissScreen(Ad ad);
  public void onLeaveApplication(Ad ad);
} 
```

本质上，您可以设置 addListener 并在收到广告时执行某些操作。但我建议使用包含在 XML 代码中的 adMob 的相对布局，这样布局会在图像出现/消失时自动调整。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-15T18:07:44.673

你可以使用类似的东西

```
public void onCreate(Bundle savedInstanceState) 
{
...
make admob...
...
 AdSize adSize = AdSize.createAdSize(AdSize.SMART_BANNER, this);
 int h = adSize.getHeightInPixels(getBaseContext());
 myListView.setPadding(0, 0, 0, h);
} 
```

# xcode - Jenkins Xcode 构建使用旧的更改

> ID：13481344
> 
> 赞同：2
> 
> 时间：2012-11-20T20:15:23.073
> 
> 标签：xcode, mercurial, jenkins

我正在使用 Jenkins 从一个 mercurial 存储库中提取，然后使用 Xcode 构建。问题是正在生成的 ipa 文件不包括来自 repro 的最新更改。看起来它缺少回购中最近添加的资产。最令人困惑的部分是，如果我真的使用本地重现在模拟器中运行项目，一切都很好。如果有帮助，我在 Jenkins 中为 mercurial 和 Xcode 启用了“清洁”选项。

# youtube - 使用 YouTube 开发者密钥提取媒体关键字

> ID：13481349
> 
> 赞同：1
> 
> 时间：2012-11-20T20:15:46.867
> 
> 标签：youtube, tags, youtube-api, keyword

最近，YouTube 更改了关于在前端显示标签的政策。

[http://apiblog.youtube.com/2012/08/video-tags-just-for-uploaders.html](http://apiblog.youtube.com/2012/08/video-tags-just-for-uploaders.html)

这也会导致 API 调用输出空的*media:keywords*数组。我可以提取视频和元数据，但不能再提取我用来发布特色内容的相关标签。我拥有该帐户，并且可以验证标签是否到位。

YouTube 告诉我，只要我进行身份验证，我仍然应该拥有此功能。Oauth2 在这里似乎是巨大的矫枉过正。相反，我在原始请求 URL（在策略更改之前工作）中包含关键查询参数，如下[所示](https://developers.google.com/youtube/2.0/developers_guide_protocol#Developer_Key)：

```
https://gdata.youtube.com/feeds/api/users/MYACCT/uploads?orderby=updated&key=DEVELOPER_KEY 
```

我一生都无法弄清楚如何为我的视频拉标签。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T21:11:25.253

我可能完全错了，但不幸的是，我认为您将需要 Oauth2，而且我不知道它是否会完全符合您的要求——范式并不是您提供将标签公开给您想要的任何人，但个人用户必须授权他们的标签公开给应用程序（并且该授权不是持久的）。换句话说，您可以设置一个登录表单，这样任何登录的人都可以使用您的应用来提取他们自己的视频标签，但仍然不能提取其他人（甚至是您的）的标签。

一般的想法是，视频标签现在被视为私有数据，仅对创建数据的用户可用，并且只有在获得明确许可时才公开。

如果我错了，请有人纠正我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:24:32.230

是的，jlmcdonald 似乎有道理。可以检索开发人员标签，但只能从经过身份验证的 HTTP 请求中检索，因为它们对特定的开发人员帐户是私有的。

# php - 如何与 PHP 并行进行 cURL 下载和输出？

> ID：13481350
> 
> 赞同：2
> 
> 时间：2012-11-20T20:15:48.423
> 
> 标签：php, file, download, save, readfile

我尝试使用 PHP 进行下载重定向。我正在通过另一台服务器获取文件

例如：[http ://rarlab.com/rar/wrar420.exe](http://rarlab.com/rar/wrar420.exe)

我想要脚本将文件另存为临时变量，并在他保存的同时，将其作为下载发送到浏览器...

```
function download($url,$name,$hash){ 
        $ch = curl_init($url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
        $data = curl_exec($ch); 
        curl_close($ch);
        header('Content-Description: File Transfer');
        header("Content-Disposition: attachment; filename=".$name);  
        ob_clean();
        flush();
        readfile($url);
}
download("http://rarlab.com/rar/wrar420.exe","winrar.rar","26digitHASH"); 
```

THX你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T21:30:59.610

您尝试做的几乎超出了 PHP 的范围，但由于 cURL 实现的多句柄特性，它应该是可能的。

[请参阅curl_multi_exec()](http://www.php.net/manual/en/function.curl-multi-exec.php)的文档以了解如何使用多句柄功能。

根据[这个答案](https://stackoverflow.com/questions/3689183/what-does-curl-multi-getcontentch-return-if-ch-isnt-ready)，可以在传输完成之前调用[curl_multi_getcontent() ：](http://www.php.net/manual/en/function.curl-multi-getcontent.php)

```
//execute the handles
do {
    $mrc = curl_multi_exec($mh, $active);
} while ($mrc == CURLM_CALL_MULTI_PERFORM);

while ($active && $mrc == CURLM_OK) {
    if (curl_multi_select($mh) != -1) {
        do {
            $mrc = curl_multi_exec($mh, $active);
        } while ($mrc == CURLM_CALL_MULTI_PERFORM);
    }

    // echo the contents downloaded so far
    // Note that this must be called with the curl handle, not with the multi handle.
    echo curl_multi_getcontent($ch);
    flush();

} 
```

# python - 如何使用 django-registration 更改登录后页面？

> ID：13481352
> 
> 赞同：0
> 
> 时间：2012-11-20T20:15:49.660
> 
> 标签：python, django, django-registration

我在我的应用程序中使用 django-registration 和 django-registration_defaults （用于模板）。如何更改用户登录后看到的页面？我浏览了文档，但找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:20:19.490

LOGIN_REDIRECT_URL = '/'

这将重定向到主页 url。

# javascript - JS日期格式和日期比较

> ID：13481353
> 
> 赞同：2
> 
> 时间：2012-11-20T20:15:51.547
> 
> 标签：javascript, jquery, html

我有这种格式的日期

```
 16-NOV-12 
```

来自 id = date 的输入框。

我如何检查这个日期是否在未来的过去？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T21:26:28.867

```
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"
        type="text/javascript"></script>
        <script src="http://www.datejs.com/build/date.js" type="text/javascript"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                var idstring = "16-NOV-12";
                var time = Date.compare(Date.parse("16-NOV-2012"), Date.today());
                var now = "in past";
                if (time == 0) now = "today";
                if (time > 0) now = "in future";
                alert(idstring + " is " + now);
            });
        </script>
    </head>
    <body>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T20:19:51.783

尝试这样的事情： -

```
 var selectedDate = $('16-Nov-12').datepicker('getDate');
 var now = new Date();
 if (selectedDate < now) {
    // selected date is in the past
 } 
```

# java - 是否可以在 Eclipse 中链接条件断点和剪贴簿？

> ID：13481354
> 
> 赞同：0
> 
> 时间：2012-11-20T20:15:54.630
> 
> 标签：java, android, eclipse, debugging, conditional-breakpoint

是否可以在 Eclipse 中链接条件断点和剪贴簿？我想有一个条件断点触发一段剪贴簿代码（自动）运行。就像是...

```
if(x==4) //Conditional Breakpoint
->Run Scrapbook Code 
```

我知道通过修改源代码这将是微不足道的，但需要针对生产代码或在 Codelock 期间完成。或者，有没有办法使用其他一些工具来做到这一点？*注意，这是针对 Android 开发的（不确定这是否会影响解决方案）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T01:48:02.350

我知道的唯一方法是结合条件断点和显示视图的使用。

首先，您将通过以下方式创建条件断点

1.  右键单击断点
2.  转到断点属性
3.  启用条件
4.  输入你的条件

然后运行你的应用程序，一旦你的调试器到达你的断点

1.  转到显示视图
2.  输入您要测试的任何代码
3.  执行该语句

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T23:25:38.117

所以我发现似乎不可能将条件断点链接到剪贴簿。可能有人可以破解源代码以获取断点来调用剪贴簿代码或剪贴簿源的自定义变体；但是，没有实现。

幸运的是，我发现我没有深入挖掘条件断点的用法，发现它们相当强大，我可以在没有剪贴簿的情况下解决问题。（在研究它时，我阅读了许多教程，它们都掩盖了如何充分使用它们，并在其代码语句中实际执行变量修改。

```
if(position==0){
testObject=null;
com.example.test.customLogger(getClass().getSimpleName(),"Conditional BreakPoint Code");
}
return false; 
```

需要注意的一些事情，希望他们会帮助别人

*   虽然上面的代码会正确执行，但在我看来，它有一个奇怪的结构，因为“return false”语句位于代码块之外，只有在满足条件时才会执行。

*   如果您返回“false”，调试器将不会停止线程，“true”它将执行代码并停止。

*   您可以使用类似下面的内容，尽管它不在 if 语句中，但它也会触发断点。（基本上它接受 Java 和简单语句）

    “位置==0”

*   似乎您不能将简单的语句和 java 混合使用，并且当您这样做时会抛出非常神秘的误导性消息（这让我相信我需要 Scrapbooks 和条件断点
*   您必须在代码块的末尾返回一个布尔值，调试器使用该布尔值来确定是暂停线程还是继续。否则，它会抛出关于不返回布尔值的错误，如果你将返回值移到 if 块内，它就会发生这种情况。

如果您的代码与在 android 中由许多方法和在它们之间共享的对象组成的类高度耦合，则这种方法非常有效，这使得单元测试在事后难以实现。然而，其他有用的测试途径是：

*   Android 开发者的猴子
*   Android 开发者的 MonkeyRunner
*   RoboGuice
*   机器人馆
*   机器人电动
*   JUnit（不是真的可行，因为你无法测试与 android 框架交互的东西，除非你将它与 RobotElectric 结合使用）

# android - 在 SQLite 中没有找到这样的表

> ID：13481356
> 
> 赞同：2
> 
> 时间：2012-11-20T20:15:58.580
> 
> 标签：android, sqlite

我在尝试在android中建立数据库时遇到问题，每次我登录时，日志猫都会说没有这样的表。

```
public class DatabaseOnline extends SQLiteOpenHelper {

private static final int DATABASE_VERSION = 1;

private static final String DATABASE_NAME = "name";

private static final String TABLE_LOGIN = "online";

private static final String KEY_ID = "Registration_id";
private static final String KEY_NAME = "Name";
private static final String KEY_PASSWORD = "Password";
private static final String KEY_UNIQUEID = "unique_id";

public DatabaseOnline(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {
    String CREATE_LOGIN_TABLE = "CREATE TABLE " + TABLE_LOGIN + "("
            + KEY_NAME + " VARCHAR (255), " + KEY_PASSWORD
            + " VARCHAR (255), " + KEY_ID + " VARCHAR(255), "
            + KEY_UNIQUEID + " VARCHAR (255)" + ")";
    db.execSQL(CREATE_LOGIN_TABLE);
}

public void addUser(String name, String password, String regId,
        String unique_id) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, name); // Name
    values.put(KEY_PASSWORD, password); // Email
    values.put(KEY_ID, regId);
    values.put(KEY_UNIQUEID, unique_id);
    // Inserting Row
    db.insert(TABLE_LOGIN, null, values);
    db.close(); // Closing database connection
}

public int getRowCount() {
    String countQuery = "SELECT  * FROM " + TABLE_LOGIN;
    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(countQuery, null);
    int rowCount = cursor.getCount();
    db.close();
    cursor.close();

    // return row count
    return rowCount;
}

/**
 * Re crate database Delete all tables and create them again
 * */
public void resetTables() {
    SQLiteDatabase db = this.getWritableDatabase();
    // Delete All Rows
    db.delete(TABLE_LOGIN, null, null);
    db.close();
}

} 
```

问题是当我登录时：

```
 DatabaseOnline db = new DatabaseOnline(getApplicationContext());
db.getWritableDatabase();
JSONObject json_user = json.getJSONObject("user");

System.out.println("unique id " + json_user.getString("unique_id"));
System.out.println("password " + json_user.getString("password"));
  db.addUser(json_user.getString("name"),json_user.getString("password"),json_user.getString("regId"),json_user.getString("unique_id"));                                                   

Intent dashboard = new Intent(getApplicationContext(),Main.class);
dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(dashboard);
finish(); 
```

出现的是android没有创建数据库。这是日志猫：

```
11-20 21:42:15.162: E/SQLiteLog(1176): (1) no such table: online
11-20 21:42:15.282: E/SQLiteDatabase(1176): Error inserting unique_id=50a939dc9fa8a4.09780382 Name=v Registration_id=APA91bHnScWAF0xjtMjyHTvHx3ON6Eu_8on6kZUL5EvDmtAK8WDxwBVpNyMoapaTl0-ProAnY0m9VZbS-0OPeMshQkeU7ZOHlfI8tUAVJbeIgoe9sdL061ntJ8MnyglrLHK2BOWH2K1n Password=9e3669d19b675bd57058fd4664205d2a
11-20 21:42:15.282: E/SQLiteDatabase(1176): android.database.sqlite.SQLiteException: no such table: online (code 1): , while compiling: INSERT INTO online(unique_id,Name,Registration_id,Password) VALUES (?,?,?,?)
11-20 21:42:15.282: E/SQLiteDatabase(1176):     at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
11-20 21:42:15.282: E/SQLiteDatabase(1176):     at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
11-20 21:42:15.282: E/SQLiteDatabase(1176):     at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
11-20 21:42:15.282: E/SQLiteDatabase(1176):     at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
11-20 21:42:15.282: E/SQLiteDatabase(1176):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
11-20 21:42:15.282: E/SQLiteDatabase(1176):     at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:31)
11-20 21:42:15.282: E/SQLiteDatabase(1176):     at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1467)
11-20 21:42:15.282: E/SQLiteDatabase(1176):     at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1339)
11-20 21:42:15.282: E/SQLiteDatabase(1176):     at guc.edu.i.DatabaseOnline.addUser(DatabaseOnline.java:66)
11-20 21:42:15.282: E/SQLiteDatabase(1176):     at guc.edu.i.Login.login(Login.java:199)
11-20 21:42:15.282: E/SQLiteDatabase(1176):     at guc.edu.i.Login$7.run(Login.java:146)
11-20 21:42:15.282: E/SQLiteDatabase(1176):     at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-20T20:26:18.543

这是第一次创建数据库吗？尝试改变

`private static final int DATABASE_VERSION = 1;`

至

`private static final int DATABASE_VERSION = 2;`

这将导致创建表并解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-06T09:21:14.230

如果您对数据库进行更改，那么清除缓存并从您的设备（设置->应用程序->您的应用程序）中清除数据也将解决此问题。我已经尝试过它及其工作。

# hibernate - JPA/Hibernate - 将键映射为实体，将值映射为集合

> ID：13481358
> 
> 赞同：0
> 
> 时间：2012-11-20T20:16:08.750
> 
> 标签：hibernate, jpa

我有以下课程：

```
@Entity
@Table(name="ripa_request")
public class ReturningInvoiceRequest implements EntityKey<Long> {

public enum ReturningInvoiceRequestStatus {
    /**
     * This status means that the products for this request are chosen, but not confirmed at all. 
     */
    WAITING_TO_SEND("Aguardando envio para o fornecedor"),

    /**
     * This status means that the returning request is done but the supplier needs to approve the chosen products. 
     */
    WAITING_FOR_ACCEPTANCE("Aguardando aprovação do fornecedor"),

    /**
     * This status means that the invoice was generated with the returning request products and the products are dispatched.
     */
    INVOICE_DISPATCHED("Nota Fiscal de devolução emitida"), 

    /**
     * This status means that something wrong happened on the returning request process. 
     */
    INVALID("Requisição inválida");

    private String message;

    private ReturningInvoiceRequestStatus(String message) {
        this.message = message;
    }

    /* (non-Javadoc)
     * @see java.lang.Enum#toString()
     */
    @Override
    public String toString() {
        return message;
    }
}

@Id
@GeneratedValue
private Long id;

/**
 * Mapping for the Products associated to this request with related information: Product Invoice's included with chosen count.
 */
@ElementCollection(targetClass=ProductRequestContext.class)
@MapKeyJoinColumn(name="product_id")
@CollectionTable(name="ripa_request_product", joinColumns=@JoinColumn(name="request_id"))
@Columns(columns={@Column(name="invoice_id"), @Column(name="count")})
private Map<Product, Collection<ProductRequestContext>> productCountMap;

@Temporal(TemporalType.TIMESTAMP)
private Date date;

@Enumerated(EnumType.STRING)
private ReturningInvoiceRequestStatus status;

public ReturningInvoiceRequest() {
    this.status = ReturningInvoiceRequestStatus.WAITING_TO_SEND;
}

public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
}    

public Collection<Product> getProductList() {
    return this.productCountMap == null ? new ArrayList<Product>() : this.productCountMap.keySet();
}

public void setProductList(Collection<Product> productList) {
    this.productCountMap = new HashMap<>();
    for (Product product : productList) {
        if (product.getInvoiceList() == null || product.getInvoiceList().isEmpty()) {
            setStatus(ReturningInvoiceRequestStatus.INVALID);
            break;
        } else {
            List<ProductRequestContext> productContextList = new ArrayList<>();
            for (Invoice invoice : product.getInvoiceList()) {
                productContextList.add(new ProductRequestContext(invoice.getId(), product.getCount(invoice)));
            }
            this.productCountMap.put(product, productContextList);  
        }
    }
}

public Date getDate() {
    return date;
}

public void setDate(Date date) {
    this.date = date;
}

public ReturningInvoiceRequestStatus getStatus() {
    return status;
}

public void setStatus(ReturningInvoiceRequestStatus status) {
    this.status = status;
}

/**
 * Return the Invoice associated to the informed Product of this request
 * @param product Product business entity
 * @return <code>Invoice</code> Invoice business entity
 */
public Invoice getInvoice(Product product) {
    for (Product requestProduct : getProductList()) {
        if (product.equals(requestProduct)) {
            Collection<ProductRequestContext> contextList = (Collection<ProductRequestContext>) this.productCountMap.get(requestProduct);
            for (ProductRequestContext context : contextList) {
                Long invoiceID = context.getRequestInvoiceID();
                for (Invoice reqInvoice : requestProduct.getInvoiceList()) {
                    if (invoiceID.equals(reqInvoice.getId())) {
                        return reqInvoice;
                    }
                }
            }
        }
    }
    return null;
}

/**
 * Return the quantity of the informed Product selected for this request.
 * @param product Product business entity
 * @return
 */
public Integer getCount(Product product) {
    for (Product requestProduct : getProductList()) {
        if (product.equals(requestProduct)) {
            Collection<ProductRequestContext> contextList = (Collection<ProductRequestContext>) this.productCountMap.get(requestProduct);
            for (ProductRequestContext context : contextList) {
                Long invoiceID = context.getRequestInvoiceID();
                for (Invoice reqInvoice : requestProduct.getInvoiceList()) {
                    if (invoiceID.equals(reqInvoice.getId())) {
                        return context.getRequestCount();
                    }
                }
            }
        }
    }
    return null;
}    

/* (non-Javadoc)
 * @see br.com.mls.eanf.entity.ifc.EntityKey#getKey()
 */
public Long getKey() {
    return id;
}

/* (non-Javadoc)
 * @see java.lang.Object#hashCode()
 */
@Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + ((id == null) ? 0 : id.hashCode());
    return result;
}

/* (non-Javadoc)
 * @see java.lang.Object#equals(java.lang.Object)
 */
@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (getClass() != obj.getClass())
        return false;
    ReturningInvoiceRequest other = (ReturningInvoiceRequest) obj;
    if (id == null) {
        if (other.id != null)
            return false;
    } else if (!id.equals(other.id))
        return false;
    return true;
}

/* (non-Javadoc)
 * @see java.lang.Object#toString()
 */
@Override
public String toString() {
    return this.id == null ? super.toString() : this.id.toString();
}

@Embeddable
public static class ProductRequestContext {
    /**
     * Sequence identifier for the Invoice registry on this context.
     */
    @Column(name="invoice_id")
    private long requestInvoiceID;

    @Column(name="count")
    private int requestCount;

    public ProductRequestContext() {
    }

    ProductRequestContext(Long invoiceID, Integer count) {
        this.requestInvoiceID = invoiceID;
        this.requestCount = count;
    }

    public Long getRequestInvoiceID() {
        return requestInvoiceID;
    }

    public void setRequestInvoiceID(Long invoiceID) {
        this.requestInvoiceID = invoiceID;
    }

    public int getRequestCount() {
        return requestCount;
    }

    public void setRequestCount(int count) {
        this.requestCount = count;
    }
} 
```

}

问题出现在与元素集合的映射关系上，在插入 ReturningInvoiceRequest 实体期间（通过 EntityManager 的 persit 方法）：

```
javax.persistence.PersistenceException: org.hibernate.PropertyAccessException: could not get a field value by reflection getter of br.com.mls.ripa.domain.model.product.ReturningInvoiceRequest$ProductRequestContext.requestCount 
```

在我的研究中，我发现了一些关于地图值不支持休眠的信息，以及[http://blog.xebia.com/2007/10/05/mapping-multimaps-with-hibernate/](http://blog.xebia.com/2007/10/05/mapping-multimaps-with-hibernate/)上的 MultiMap 方法，但我不知道它是否能解决我的问题

我还尝试使用 Google Collections 中的 Multimap 类来抑制 Collection 值，并且也不起作用，因为它没有扩展 java.util.Map，这是 hibernate 理解的，而 apache-collections MultiMap 没有支持泛型，这是 Hibernate 映射所必需的

我正在使用 Hibernate 3.6.9，但在 4.1.8 版本上仍然会发生错误。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:59:18.633

我找到的解决方案是使用以下列表`ProductRequestContext`：

```
@ElementCollection
@CollectionTable(name="ripa_request_product", joinColumns=@JoinColumn(name="request_id"))
@Columns(columns={@Column(name="product_id"), @Column(name="invoice_id"), @Column(name="count")})
private List<ProductRequestContext> productCountList 
```

# jquery - jQuery Toggle 在测试中工作但在实现中没有工作

> ID：13481362
> 
> 赞同：0
> 
> 时间：2012-11-20T20:16:23.650
> 
> 标签：jquery, toggle

我为这个菜鸟问题道歉，但我真的找不到解决方案。

我有一个链接，当点击切换是一个 ul。

`$("#pastShows").click(function () { $(".shows").toggle("slow"); });`​</p>

```
<h3 id="pastShows"><a href="javascript:void(0)">Past</a></h3>
<div class="shows">
  <ul>
    <li>Show 1</li>
    <li>Show 2</li>
    <li>Show 3</li>
    <li>Show 4</li>
  </ul>
</div>​ 
```

它在这个提琴手中完美运行。[http://jsfiddle.net/Chadimoglou/NG8Dj/2/](http://jsfiddle.net/Chadimoglou/NG8Dj/2/)

但是在这里实施时我无法让它工作[http://www.kiirstinmarilyn.com/#shows](http://www.kiirstinmarilyn.com/#shows)

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T20:22:04.093

尝试摆脱 window.onload 并将您的初始化代码放入 document.ready。

替换这个：

```
/*----Toggle past shows----*/
window.onload=function(){
    $("#pastShows").click(function () {
        $(".shows").toggle("slow");
        alert("It Worked");
    });
} 
```

有了这个：

```
$(function()
{
    $("#pastShows").click(function () {
      $(".shows").toggle("slow");
      alert("It Worked");
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T20:34:23.487

好的，这里的问题是您使用`window.onload`, 代替`document.ready()`or `$(function() {}`。`document.ready()`一旦 DOM 准备好，jQuery 的方法就会被调用（意味着浏览器已经解析了 HTML 并构建了 DOM 树）。如果您的网页有大图像，它不会等待完全加载图像。因此它可以调用 before`window.onload`方法。我们可以`document.ready()`在一个网页上有多个方法，这些方法将按顺序调用。另一方面，`window.onload`当页面的图像和所有相关资源已完全加载时，方法会被调用。假设您的网页有大尺寸的图像，那么直到所有图像都没有完全加载到页面上，`window.onload`方法才会被调用。

所以，只需替换代码：

```
window.onload=function(){
    $("#pastShows").click(function () {
        $(".shows").toggle("slow");
    });
} 
```

和：

```
$(function()
{
    $("#pastShows").click(function () {
      $(".shows").toggle("slow");
    });
} 
```

希望这可以帮助！

# javascript - 如何使用 HTML5/CSS3 或 JavaScript 添加滑入效果和发光效果？

> ID：13481368
> 
> 赞同：0
> 
> 时间：2012-11-20T20:17:04.787
> 
> 标签：javascript, html, css

我认为对我正在寻找的内容的描述将是最好的：

假设我有一句话：Hello World！这是KPO！

我希望每个单词在显示后 2 秒后显示。我希望 KPO 具有闪烁或淡入淡出效果。

我不知道从哪里开始或用什么来完成这个？

我能够使用 CSS3 找到霓虹灯效果，但它不会淡入淡出，所以不确定。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:18:46.393

如果可以的话，我会建议使用 jQuery。已经制作了一百万个插件来完成这种文本动画。

# javascript - 如何将 Javascript 键码发送到窗口？

> ID：13481371
> 
> 赞同：2
> 
> 时间：2012-11-20T20:17:11.740
> 
> 标签：javascript, key

我打开了一个窗口，我想将 Javascript 键码发送到这个窗口。

例如：

```
 send(37)   #would force the left arrow 
```

我似乎找不到任何方法来做到这一点.. 任何有效的编程语言都可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:22:44.757

您是否尝试过 window.postMessage() ？

[https://developer.mozilla.org/en-US/docs/DOM/window.postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)

# javascript - Sencha touch 2 商店动态代理网址

> ID：13481377
> 
> 赞同：1
> 
> 时间：2012-11-20T20:17:22.493
> 
> 标签：javascript, sencha-touch-2

我正在创建一个高度依赖地理位置的应用程序。我在 app.js 中有变量 'GeoApp.app.geoLat' 和 GeoApp.app.geoLong' 是用地理坐标设置的。

如果我在任何视图中使用 console.out，访问和输出值都没有问题。在商店中，这些值是空的，好像它没有访问权限，或者变量可能尚未定义或存在。

实现我想要做的最佳实践是什么？

```
Ext.define('GeoApp.store.Places', {
    extend:'Ext.data.Store',

    config: {
        model:'GeoApp.model.Place',
        autoLoad:'true',
        proxy: {
            type:'ajax',
            url:'googleapiurl/json?location=' + GeoApp.app.geoLat + ','+ GeoApp.app.geoLong + '&radius=500...',
            reader: {
                type:'json',
                rootProperty:'results'
            }
        }*/
    }
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:49:52.917

那是因为您的商店是在您的应用程序启动时创建的，您的 url 字符串也是如此。因此，当您启动应用程序时`GeoApp.app.geoLat`，`GeoApp.app.geoLong`它们为 null 或未定义，它们不会出现在您的 url 中。

我要做的是将url设置为`googleapiurl/json?radiu=500...`，然后将`location`参数添加为`extraParam`代理，如下所示：

```
Ext.getStore('Places').getProxy().setExtraParams({
  location: GeoApp.app.geoLat + ',' + GeoApp.app.geoLong
}); 
```

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T21:26:48.273

您可以做的是在加载商店之前设置代理 url。因此，您必须设置`autoLoad`为`false`. `show()`例如，您可以在视图组件的功能中使用下面的代码。

```
show: function(component, options){
    var store = Ext.getStore('Places');

    store.setProxy({
       url:'googleapiurl/json?location=' + GeoApp.app.geoLat + ','+ GeoApp.app.geoLong + '&radius=500...',
    });

    store.load();
} 
```

祝你好运！

# python - 在 Python 中进行可视化的漂亮工具

> ID：13481378
> 
> 赞同：1
> 
> 时间：2012-11-20T20:17:23.167
> 
> 标签：python, pyqt, pyside

我想编写负责**排序算法**和测试有效性可视化的电子学习应用程序。我将使用 Python 和 PySide(PyQt)，但最好使用任何漂亮的工具来使这个简单的可视化。 **此可视化的目的是显示工作排序算法的步骤。**

你知道用 Python 制作简单的可视化、动画的漂亮工具吗？也许 PySide 有做可视化的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T23:55:30.020

您可以使用[`matplotlib`](http://matplotlib.org/)它的动画功能：

```
import matplotlib.pyplot as plt
import matplotlib.animation as animation

random_list = [10,3,5,4,9,1,6,7,2,8]

def bubble_sort():
    data = random_list
    for i in range(len(data)-1):
        for j in range(i, len(data)-1):
            a, b = data[j], data[j+1]
            if a > b:
                data[j], data[j+1] = b, a
                yield data

fig = plt.figure()
ax = fig.add_subplot(111)
def update(data):
    ax.clear()
    ax.hlines(range(len(data)), 0, data, 'red')
    ax.set_ylim(-0.5, 9.5)
update(random_list)

ani = animation.FuncAnimation(fig, update, bubble_sort, interval=250)
plt.show() 
```

您只需要更改`bubble_sort()`以实现其他算法并在每次迭代时生成要绘制的数字列表。

matplotlib 也可以[嵌入 PySide](http://www.scipy.org/Cookbook/Matplotlib/PySide)，但我没有测试它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T16:54:55.317

Qt 允许您以两种不同的方式创建 UI：

1.  基于小部件，这允许您使用静态 UI（QPushButton、QTextEdit、...）创建常规应用程序。用这些 UI 组件做动画可能很麻烦

2.  声明式 UI，我们使用 QML（Qt 元语言）来创建动态 UI（具有大量动画/过渡的 UI）。看看[QML 示例](http://doc.qt.digia.com/qt/qdeclarativeexamples.html "这里")

QML 允许您快速创建 UI，并轻松地对其进行动画处理。您可以使用 PySide 中的 QDeclarativeView 在您的应用程序中加载和显示 QML。

您可以通过 QObject 的信号槽机制或属性将数据（数字列表）从 Python 公开到 QML。[在这个存储库](http://gitorious.org/pyside-qml-examples "这个存储库")中可以找到很多示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T20:35:18.743

PySide 只是 Qt 的一个薄包装，Qt 没有任何内置的算法可视化支持。它是为构建传统的[WIMP](http://en.wikipedia.org/wiki/WIMP_%28computing%29) GUI 而设计的——即，充满文本框或滑块等小部件的窗口。

您可以通过将每个可视化对象表示为小部件并手动移动小部件来为 Qt 设置动画，或者您可以创建空白画布并在顶部绘制动画，但无论哪种方式，Qt 都没有真正帮助您。

像 PyGame 这样的面向游戏的库可能更合适——您可以将每个对象表示为一个精灵，并使用精灵动画工具。

或者您可以寻找可视化库而不是通用 GUI 库。

# php - 使用 str_replace 数组的高级 php 模板

> ID：13481381
> 
> 赞同：0
> 
> 时间：2012-11-20T20:17:28.973
> 
> 标签：php, str-replace, templating

我创建了一些模板系统来帮助我以可换肤的方式输出数据库项目。它是这样工作的：

```
$tpl = "<html>
<body>
<div><span class="item">Favourite food:</span><span class="content">{item1}</span></div>
<div><span class="item">Hobby:</span><span class="content">{item2}</span></div>
<div><span class="item">Allergies:</span><span class="content">{item3}</span></div>
// up to 500 more lines like this
</body>
</html>";

$output = str_replace( 
array('{item1}','{item2}','{item3}') ) , 
array($database['item1'],$database['item2'],$database['item3']) , 
$tpl );

echo $output; 
```

现在我的问题是：并非每个数据库项目都必然有内容 - 所以，目前我得到这样的输出

> 最喜欢的食物：香蕉 爱好：{item2} 过敏：苹果

有什么方法可以使用这种系统并省略没有数据库条目的行？输出应该是这样的：

> 最喜欢的食物：香蕉过敏体质：苹果

我怎么能做到这一点？

更新：描述文本也可能有所不同，因此我更新了示例代码。而且我想避免使用 foreach 或 for-loops，因为那样模板本身就被破坏了。我希望能够插入随机 HTML。目前使用 smarty 或其他模板系统是不可行的。但我可以提供带有描述的第三个数组。

更新 2：我认为 $output 上的 preg_replace 可能会起作用？所以这意味着“如果在 $output 上的某处有一个包含 {} 括号的 html 标记，那么将整个标记从 to 擦除（我相应地更新了我的代码）你怎么看？你知道任何可以做到这一点的 reg_expression ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T21:02:26.203

此代码将起作用：

```
<?php

$database = array(
"item1" => "banana",
"item2" => "apple",
"item3" => "cherry",
);

$output = '<html>
<body>';

for($i=1;$i<500;$i++) //change 500 with the desired number or setup a dynamic variable
{
    if(isset($database['item'.$i])) //if the current item is set
    {
$output .= '<span class="item">Description for item '.$i.': </span><span class="content">'.$database['item'.$i].'</span>'; //append to $output
$output .= '<br />'; //Here I add a line break, remove if you don't want
    }
}
$output .= '</body></html>';

echo $output;

?> 
```

您会看到，如果 $database 数组中不存在某个项目，它就不会被打印出来。当然，您可以删除代码开头的 $database 数组（此处用于测试目的）并使用您自己生成的 $database 数组。

在您的特定情况下：如果您想开发自己的模板引擎，您可以在模板中使用特殊字符串（您发明的）（例如*{--ITEMS--}*），然后在第二个 PHP 文件中处理这些字符串，该文件读取模板，找到字符串并用一些输出替换它们。为此，您在此处发布的代码中缺少的要点是输出的“构造”，它将替换模板中的固定字符串。您可以通过处理数据库并将结果（使用**.=**）附加到一个变量来构建输出，该变量*在最后*被打印出来或可用于替换您的固定字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T22:37:21.503

我倾向于维护一个你想要的值的数组（也可以来自一个数据库）并控制是否显示你的数据库结果（这里显示为 $row ）。这样，您还可以组合在找到匹配项时显示的标签

```
$row= array(
"item1" => "banana",
"item2" => "apple",
"item3" => "cherry",
);

$items = array(
'item1'=>'Favourite Food', 
'item2'=>'Hobbies:',
'item3'=> 'Allergies'
);

foreach($items as $k=>$item){

if (isset($row[$k]) {
// concat a variable
$html .= $item . ' ' . $row[$k] . '<br />';
}

}

echo $html; // or whatever 
```

与回复中显示的其他想法结合使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T20:20:44.207

使用此代码：

```
$tpl = "<html><body>";
for($i=1;$i<500;$i++)
{
    if(isset($database['item'.$i]))
    {
    $tpl = $tpl.'<span class="item">Description for item '.$i.':</span><span class="content">{item'.$i.'}</span>';
    }
}    
$tpl = $tpl."</body></html>";

echo str_replace( 
array('{item1}','{item2}','{item3}') ) , 
array($database['item1'],$database['item2'],$database['item3']) , 
$tpl ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T20:19:37.460

你看过 PHP Isset 吗？[http://php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php)还是空的？[http://php.net/manual/en/function.empty.php](http://php.net/manual/en/function.empty.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T22:02:17.630

我实际上建议在数据库上使用 foreach 循环

```
$tpl = '';
foreach($database as $itemName => $value)
{
$tpl .= '<span class="item">Description for item '.$i.':</span><span class="content">{item'.$i.'}</span>';
} 
```

可能需要适应它，但否则应该很好

# wordpress - 插件更新后有没有办法为插件选项设置默认值？

> ID：13481392
> 
> 赞同：2
> 
> 时间：2012-11-20T20:18:13.877
> 
> 标签：wordpress

我制作了一个**WordPress**插件，它的所有选项都保存在**wp_options**表中，作为单个选项下的**数组。**现在我用一个新的布尔选项制作了一个新版本的插件，该选项在插件的选项页面上用一个复选框设置。

我希望默认选中该选项，这对插件的全新安装没有问题，但它是**插件升级**的问题。

问题是，未选中的复选框并未将选项数组键设置为 false，而是将其从数组中全部删除，因此我无法区分该值是尚未设置还是用户设置为 false .

AFAIK 插件更新没有动作挂钩。

在插件更新期间，是否有一种优雅且首选的方式来为新插件选项设置默认值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:27:41.353

处理升级路径的正确方法是仅在需要时运行升级过程。理想情况下，您会在插件的数据库选项中存储一个“版本”，然后在代码中存储一个版本。如果它们不匹配，您将触发升级过程，然后将数据库选项设置为等于代码中的版本。这是处理升级的插件数量，这也是核心的工作方式。

# actionscript-3 - “私有属性只能用于类属性定义。” FlashDevelop + Adob e Flex SDK + Debug_nape.swc

> ID：13481395
> 
> 赞同：2
> 
> 时间：2012-11-20T20:18:26.530
> 
> 标签：actionscript-3

已经有一个关于这个的问题，但它并不能完全回答我的问题，因为我对 Flash 很陌生。当我编译我的代码时，它在第 69+74 行，在两个“私人”中的“p”上给了我一个错误。这是代码：

```
 private function destroyMouseJoint(e:MouseEvent):void 
{
    hand.active = false;
}

private function spawnBox():void 
{
    var block:Polygon = new Polygon(Polygon.box(50, 50));
    var body:Body = new Body(BodyType.DYNAMIC);
    body.shapes.add(block);
    body.position.setxy(stage.stageWidth /2, stage.height / 2);
    body.space = space;
} 
```

我不确定我应该做什么。提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:30:32.650

看来您可能会将您的功能置于类定义之外。确保它们位于以下内容中：

```
package  {
import flash.display.Sprite;

public class YourClass extends Sprite {
            private var bg:Sprite;

            public function YourClass() {
                super();
            }

            private function destroyMouseJoint(e:MouseEvent):void {
                hand.active = false;
            }

            private function spawnBox():void  {
                var block:Polygon = new Polygon(Polygon.box(50, 50));
                var body:Body = new Body(BodyType.DYNAMIC);
                body.shapes.add(block);
                body.position.setxy(stage.stageWidth /2, stage.height / 2);
                body.space = space;
            }
      }
 } 
```

# c# - 试图从 .NET 中的 SQL Server 中提取图像，得到 UnauthorizedAccessException

> ID：13481396
> 
> 赞同：1
> 
> 时间：2012-11-20T20:18:28.763
> 
> 标签：c#, asp.net, .net, sql-server, vb.net

我正在尝试从 SQL Server 数据库中提取 .NET 中的字节字符串并将其转换为图像。我的代码看起来像这样

```
Dim strqry As String = "SELECT preview FROM dbo.AmazonS3FilePreview WHERE fileKey ='" + incomingKey + "'"
    Dim myComm As SqlCommand = New SqlCommand(strqry, myConn)
    Dim resultReader As SqlDataReader = myComm.ExecuteReader
    Dim previewBytes As Byte() = Nothing
    While resultReader.Read()
        previewBytes = DirectCast(resultReader.Item("preview"), Byte())
    End While
    If Not previewBytes Is Nothing Then
        Dim ms As MemoryStream = New MemoryStream(previewBytes)
        Response.ContentType = "image/jpeg"
        Response.OutputStream.Write(ms.GetBuffer, 0, ms.GetBuffer.Length)
        Response.AddHeader("Content-Disposition", "attachment;filename=" + incomingKey)
    End If 
```

但是在线上`Response.OutputStream.Write(ms.GetBuffer, 0, ms.GetBuffer.Length)`我收到一条错误消息`UnauthorizedAccessException: MemoryStream's internal buffer cannot be accessed`。我绝对可以读取数据库中的常规 char 列，为什么读取字节有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T20:21:26.537

你不需要使用`GetBuffer`，无论如何你不应该使用（它是内部缓冲区，比实际数据大，所以它的长度没有意义）。实际上，您根本不需要 a `MemoryStream`，因为您已经有了字节。你可以这样做：

```
 Response.ContentType = "image/jpeg"
    Response.OutputStream.Write(previewBytes, 0, previewBytes.Length) 
```

# arrays - 用其他表的值填充数组的值

> ID：13481401
> 
> 赞同：2
> 
> 时间：2012-11-20T20:18:44.717
> 
> 标签：arrays, postgresql, error-handling

我在 postgresql 中有一个表（my_table2），其中包含一个数组类型的列。我希望 my_table1 的列 val1 的值是我的数组 (array_col) 的第一个元素，而 val2 是 array_col 的第二个元素。我想出了这个查询：

```
update my_table2
set array_col=array[
    (
    select val1 from my_table1)
    , (select val2 from my_table1)
    ] 
```

但是当我运行它时出现错误：
*错误：用作表达式的子查询返回的不止一行* 有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T20:53:05.023

您的子查询`select val1 from my_table1`or`select val2 from my_table1`正在返回不止一行。如果您要为每个元素指定一个子查询，那么它只能返回一个元素。

根据你所拥有的......你可能会看到更多类似的东西：

将两者结合起来？

`update my_table2 set array_col=array(select val1 from my_table1)||array(select val2 from my_table1)`

各取一个？

`update my_table2 set array_col=array[(select val1 from my_table1 limit 1),(select val2 from my_table1 limit 1)]`

# python - 用 BeautifulSoup解析未闭合的` `标签

> ID：13481408
> 
> 赞同：5
> 
> 时间：2012-11-20T20:19:08.373
> 
> 标签：python, html, beautifulsoup

BeautifulSoup 具有关闭连续`<br>`标签的逻辑，这些标签并不能完全满足我的要求。例如，

```
>>> from bs4 import BeautifulSoup
>>> bs = BeautifulSoup('one<br>two<br>three<br>four') 
```

HTML 将呈现为

```
one
two
three
four 
```

我想把它解析成一个字符串列表，`['one','two','three','four']`. BeautifulSoup 的标签关闭逻辑意味着当我请求所有`<br>`元素时，我会得到嵌套标签。

```
>>> bs('br')
[<br>two<br>three<br>four</br></br></br>,
 <br>three<br>four</br></br>,
 <br>four</br>] 
```

有没有一种简单的方法可以得到我想要的结果？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-20T20:27:04.197

```
import bs4 as bs
soup = bs.BeautifulSoup('one<br>two<br>three<br>four')
print(soup.find_all(text=True)) 
```

产量

```
[u'one', u'two', u'three', u'four'] 
```

* * *

或者，使用[lxml](http://codespeak.net/lxml/)：

```
import lxml.html as LH
doc = LH.fromstring('one<br>two<br>three<br>four')
print(list(doc.itertext())) 
```

产量

```
['one', 'two', 'three', 'four'] 
```

# google-api - 将 Google Drive 文件 selfLink 转换为 UI 链接

> ID：13481411
> 
> 赞同：0
> 
> 时间：2012-11-20T20:19:19.103
> 
> 标签：google-api, google-drive-api

使用[Google Drive File API](https://developers.google.com/drive/v2/reference/files#resource)时，我想按名称查找文件或文件夹并返回您将拥有的链接，就像您使用实际的 Google Drive UI 一样。

根据 API 参考，“selfLink”提供了“指向此文件的链接”，但它实际上是一个 API URL（即 - [https://www.googleapis.com/drive/v2/files/](https://www.googleapis.com/drive/v2/files/)）。当我访问此 URL 时，我会得到一个哈希，其中包含消息“超出未经身份验证的使用的每日限制”。继续使用需要注册。这对我来说没有意义，因为我在查找文件时授权了请求。

当我使用“alternateLink”时，我得到“使用相关 Google 编辑器或查看器打开文件的链接”，这很不方便，因为它需要额外点击才能访问 Google Drive UI。

selfLink 是否必须以某种方式进行转换？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:44:25.213

selfLink 是指向您刚刚下载的项目的rest api 链接，即它指向自身。因此，我从来没有真正找到它的用途。IE。你应该忽略它。“403 Daily Limit...”消息仅表示您在未设置授权标头的情况下调用了 Drive API url。

我不确定我是否理解你的问题。如果要在编辑器中打开文件，请使用备用链接。如果您想打开 Drive UI，只需调用 drive.google.com。也许尝试再次解释您要达到的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T07:05:11.470

**错误原因 - '已超出未经验证使用的每日限制。继续使用需要注册。**

Google 限制了免费用户可以使用 API 的次数。一旦达到限制，它将注销您，您需要重新登录。这时候，你会得到上面的错误响应。如果您想避免同样的情况，您需要成为 Google API 的付费用户。

# c# - 如何访问嵌套类型的属性？

> ID：13481419
> 
> 赞同：0
> 
> 时间：2012-11-20T20:19:46.713
> 
> 标签：c#, types, nested, project

我在 foreach 循环中有一个嵌套类型：

```
foreach(var project in projectDataSet.Project)
{
    //project type = SvcProject.ProjectDataSet+ProjectRow
} 
```

如何访问`project`属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:24:51.290

我认为您也许可以在 foreach 循环之外制作 var 项目的模型，然后根据您的文件夹目录将属性映射到属性变量，并尝试从 foreach 中调用模型，以便您可以访问模型的属性，其中包括项目.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:37:57.980

这样它就起作用了：

```
 foreach (var projects in projectDataSet.Project)
        {
            var project = projectDataSet as SvcProject.ProjectDataSet.ProjectRow;
            Console.WriteLine(project.PROJ_NAME);
        } 
```

似乎您应该使用嵌套类型的最后一个条目作为最终值。为了简洁起见，我省略了一个有用的`null`检查。

# php - 将所有请求路由到另一个 php 文件，除了那些由 mod_rewrite 提供的原始 *.php

> ID：13481420
> 
> 赞同：1
> 
> 时间：2012-11-20T20:19:47.777
> 
> 标签：php, regex, .htaccess, mod-rewrite

我的网站包含用户的个人资料。我希望用户通过以下链接访问他们的个人资料：

```
www.mysite.com/username 
```

用户可以通过以下链接访问他们的类别页面：

```
www.mysite.com/username/categories 
```

并且还可以通过以下链接访问特定类别：

```
www.mysite.com/categories/5 
```

其中`username`是一个变量，`categories`是 url 中的一个常量字符串，`5`是一个表示类别 id 的变量号。

我知道这可以在 .htaccess 文件中完成，但我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T01:25:43.800

我假设你想通过

`/mohamed`到`/users.php?name=mohamed`,

`/mohamed/categories`到`/categories.php?username=mohamed`,

`/categories/5`至`/categories.php?id=5`

这是.htaccess：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([a-z0-9_-]+)$ users.php?name=$1 [NC,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([a-z0-9_-]+)/categories$ categories.php?username=$1 [NC,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^categories/([0-9]+)$ categories.php?id=$1 [NC,L] 
```

`!-f`flag 意味着如果你请求一个现有的文件名，它的 url 将不会被重写

# compiler-construction - 语言 L 的编译器可以用相同的语言 L 实现吗？

> ID：13481422
> 
> 赞同：1
> 
> 时间：2012-11-20T20:19:52.237
> 
> 标签：compiler-construction, compilation, programming-languages

我知道编译器是用同一种语言实现的许多语言： - C# Roslyn 编译器是用 C# 实现的 - F# 编译器是用 F# 实现的

现在，我认为这是可能的，例如在 C# 5.0 中实现 C# 6.0 的编译器

然后我的问题是关于语言的相同版本，即：

```
can a compiler of a language L be implemented in the same language L ? 
```

我问这个是因为我听说 typescript 编译器是用 typescript 实现的，但是没有以前版本的 typescript 语言。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T20:22:27.943

是的，有可能。该术语称为引导：

[引导（编译器）：维基百科](http://en.wikipedia.org/wiki/Bootstrapping_%28compilers%29)

# php - 使用 if/else 语句修改 javascript 变量/函数？

> ID：13481425
> 
> 赞同：0
> 
> 时间：2012-11-20T20:20:10.727
> 
> 标签：php, javascript, if-statement

```
<script language="javascript" type="text/javascript">
function changeDonation(){
    return document.getElementById("quantity").value;
}
</script> 
```

该功能与

```
 <input type="number" id="quantity" min="<?php echo $minimum_donation; ?>" 
 max="100" onchange="setDonation()"> 
```

和

```
 <a href="<?php echo $paypal_redirect;?>" 
  onclick="location.href=this.href+''+changeDonation();return false;"> 
```

我想修改我的 changeDonation() 以使 +changeDonation() 始终至少是 $minimum_donation 的金额。目前，用户可以不改变“数量”的价值，继续捐赠价值0美元。

这是我尝试过的：

```
<script>
if (changeDonation()<3) {
    function changeDonation(){
        return 3;
    }
}
else {
    return changeDonation()
}                     
</script> 
```

但如果我这样做，changeDonation 始终为 3。理想情况下，我希望 3 被 $minimum_variable（php 变量）替换，并使其正常运行。我是一个完整的 javascript 菜鸟，所以请原谅我的愚蠢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:24:23.033

我相信这样的东西更符合您的要求。

```
function changeDonation() {
    var donation = document.getElementById("quantity").value;
    return Math.max(donation, <?php echo $minimum_donation; ?>);
} 
```

感谢 Tom 和 Maël Nison 的改进

# python - 通过一元运算符和三元运算符递增整数

> ID：13481427
> 
> 赞同：3
> 
> 时间：2012-11-20T20:20:16.590
> 
> 标签：python, c, increment, ternary-operator, post-increment

我是 Python 新手，如何在 Python 中执行以下 C 习语？

```
i += 1

i++

i = (j == 2)? 1 : 0 
```

谢谢你。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-20T20:21:07.143

在 Python 中：

```
i += 1

i += 1

i = 1 if j == 2 else 0 
```

# android - 使用 android 绘制可触摸层

> ID：13481430
> 
> 赞同：1
> 
> 时间：2012-11-20T20:20:24.010
> 
> 标签：android

我想创建一个简单的绘图应用程序。我希望能够添加一些线条、圆形和矩形。我想选择任何形状并移动它。我试过这种方式：
- 为每个形状添加一个视图，并在视图的 onDraw 方法中绘制形状
- 将每个视图添加到相对布局

我可以看到所有的形状，但我只能触摸第一个视图，因为它填满了整个屏幕。我在示例中搜索了一个“分层”应用程序的示例，但没有成功

谢谢 :)

**编辑**：添加代码。
如果我单击矩形，我可以看到日志，但如果我单击圆圈，则没有日志。

**编辑 2**：哎呀，我忘了在圈子里附上听众...... :( 抱歉

布局 ：

```
public class DrawingView extends RelativeLayout {

  public DrawingView(Context context) {
      super(context);
      this.setBackgroundColor(0xFFFFFFFF);
      this.addView(new Circle(context));
      this.addView(new Rectangle(context));
  }
} 
```

圈子：

```
public class Circle extends View implements View.OnTouchListener {

    private Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);

    public Circle(Context context) {
        super(context);
        this.paint.setStyle(Paint.Style.STROKE);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        this.setMeasuredDimension(100, 100);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        canvas.drawCircle(50, 50, 50, this.paint);
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        Log.d("myApp", "cercle");
        return false;
    }

} 
```

和矩形：

```
public class Rectangle extends View implements View.OnTouchListener {

    private Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);

    public Rectangle(Context context) {
        super(context);
        this.paint.setStyle(Paint.Style.STROKE);
        this.setOnTouchListener(this);
        this.setX(50);
        this.setY(50);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        this.setMeasuredDimension(100, 100);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        canvas.drawRect(0, 0, 100, 100, this.paint);
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        Log.d("myApp", "Rectangle");
        return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:54:23.143

你想在同一个视图中创建你的形状。使用 ShapeDrawable 包装器，并在创建时将每一个放入同一个数组列表中。然后检查arraylist中的位置，以确定它们在重叠时要移动的形状。

# c# - 如何获取“找不到模块”错误对话框的文件名

> ID：13481431
> 
> 赞同：1
> 
> 时间：2012-11-20T20:20:30.390
> 
> 标签：c#, .net, directx

当我们的 C# 应用程序缺少依赖项时，它会报告此“找不到模块”错误对话框。不幸的是，这个对话框不包括它找不到的文件的名称。在这种情况下，缺少的依赖项是 DirectX dll D3DCompiler_43.dll。如果客户报告“找不到模块”这不是很有帮助，但如果他们报告找不到文件的名称，它至少给了我们一个线索。

我们能否捕获此异常并生成一个错误对话框，其中包含未找到的文件的名称？由于它发生在应用程序启动的早期（我相信在 main 之前）我们怎么能做到这一点？

![错误对话框](../Images/8f829103fb8cd847f5dd44fdc79818ae.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T23:31:13.250

尝试订阅`AssemblyResolve`应用程序找不到所需程序集时触发的事件。在此事件的处理程序中，您可以提供自己的消息框，其中包含程序集的名称和您喜欢的任何其他信息。

```
public static void Main()
{            
     AppDomain.CurrentDomain.AssemblyResolve += new ResolveEventHandler(AssemblyNotFoundEventHandler);

     InvokeExternalType();
}

private static Assembly ResolveEventHandler(object sender, ResolveEventArgs args)
{
    MessageBox.Show("Error, can't find assembly: " + args.Name, "Error", MessageBoxButtons.AbortRetryIgnore, MessageBoxIcon.Error);
    return null;
}

private static void InvokeExternalType()
{
    MyClass doc = ... // from an external assembly.
} 
```

有一个问题，外部类型（可能属于缺少的程序集）不能在 main 方法中使用，否则不会触发事件。它必须在您的代码中以单独的方法进一步调用，如上面的代码示例所示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T21:02:22.933

如果可以修改代码并重新部署：

*   创建一个新的启动类（一个带有 Main() 的），确保在项目属性中选择该类
*   确保系统外部的启动类没有“使用”和外部引用
*   尝试/捕获对您以前的启动类的 Main 的调用
*   在消息框（或调试日志）中打印出异常和所有内部异常

    公共类 MyNewEntryClass{

    公共静态无效 Main(){

    ```
     try{
          MyPreviousEntryClass.Main();
      } catch (Exception x){
         Exception ix = x;
         while (ix!=null){
            MessageBox.Show("Exception: "+ix);
            ix=ix.InnerException;
         }
      } 
    ```

    } }

编辑：我看到您的异常来自消息处理程序。上述代码编辑可以（并且应该）应用于所有入口方法，其中包括处理来自代码外部的事件的所有事件处理程序。上面的崩溃屏幕可能会显示各种处理程序中的异常，异步执行的代码。例如，带有异步调用的按钮处理程序应该有两个 try/catch 以防止崩溃窗口出现：

```
private void Button_Clicked(object sender, EventArgs arg){
    try{
        Action<string> asyncCall = (s)=>{
            try{
                //...exception here will cause crash  
                // as it's not handled in Button_Clicked
            } catch (Exception xOnAsyncThread){
            }
        };
        asyncCall.BeginInvoke("outahere",null,null);
    } catch (Exception xOnUIThread){
    }
} 
```

上面的语句也适用于 Windows 消息处理——它只是外部事件的另一个事件处理程序

**如果您无法修改代码**并重新部署使用 Sysinternals Process Monitor： [http](http://technet.microsoft.com/en-us/sysinternals/bb896645) ://technet.microsoft.com/en-us/sysinternals/bb896645 将其配置为监控您的应用程序并突出显示文件未找到事件（有关详细信息，请参阅他们的文档)

**如果 ProcessMonitor 太多**，请从异常消息中复制所有内容并排除 - 加载的内容不是问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T18:29:36.310

有一个“Fuison Log”，可以通过设置几个注册表项来打开。它有助于识别任何类型的程序集加载问题。您所需要的只是来自客户 PC 的日志文件。
有关详细信息，请参阅[https://stackoverflow.com/a/1527249/1288776](https://stackoverflow.com/a/1527249/1288776)。
如果链接不可用：
将以下值添加到**HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Fusion**

```
DWORD ForceLog set value to 1
DWORD LogFailures set value to 1
DWORD LogResourceBinds set value to 1
String LogPath set value to folder for logs ie) C:\FusionLog\ 
```

确保在文件夹名称后包含反斜杠并且该文件夹存在。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T09:03:25.407

我认为您不能以编程方式执行此操作。但是，如果您可以访问机器，则可以打开“全局标志”以显示所谓的“加载程序快照”（[显示加载程序快照（Windows 调试器）](http://msdn.microsoft.com/en-us/library/windows/hardware/ff556886%28v=vs.85%29.aspx)），至少可以识别问题。

这是一篇关于它的文章，解释了如何做到这一点：[Debugging LoadLibrary Failures](http://blogs.msdn.com/b/junfeng/archive/2006/11/20/debugging-loadlibrary-failures.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-21T12:11:36.057

让您的客户在您的 exe 上运行[depends.exe](http://www.dependencywalker.com/)，将结果保存到文件中并将此文件发送给您。

# entity-framework - 通知用户 MVVM + EntityFramework 中的对象已更改的正确方法是什么？

> ID：13481433
> 
> 赞同：0
> 
> 时间：2012-11-20T20:20:42.033
> 
> 标签：entity-framework, mvvm

例如，如果您想在每个带有待处理更改的文档旁边有一个视觉提示，如 Visual Studio 中的红点，那么在模型是实体框架模型的情况下，使用 MVVM 实现它的常用方法是什么？你只是在视图模型级别保留一个 IsDirty 标志吗？我猜你不想在你的数据库上下文中继续调用 DetectChanges 来查看实体是否已更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T23:00:15.263

如果您的模型对象实现了 INotifyPropertyChange，您可以随时点击 PropertyChanged 事件。假设您检查设置为相同值的属性，例如：

```
public string Name
{
    get { return _name; }
    set
    {
        if(_name == value) return;
        _name = value;
        RaisePropertyChanged("Name");
    }
} 
```

您可以观察模型上的*任何*属性是否从 ViewModel 发生更改，并通过 ViewModel 上的标志显示/隐藏该图标，类似于：

```
public class TreeItemViewModel
{
    public TreeViewModel(TreeItem model)
    {
        model.PropertyChanged += OnTreeItemModified();
    }

    private void OnTreeItemModified(object sender, EventArgs e)
    {
       DisplayIcon = true;
    }
} 
```

# asp.net - 使用 ArrayList 递归，问题 ASP.NET

> ID：13481436
> 
> 赞同：0
> 
> 时间：2012-11-20T20:20:52.873
> 
> 标签：asp.net, recursion, arraylist

我尝试尝试递归，但在递归函数中使用 ArrayList 时遇到问题。[这个问题是基于写在这里](https://stackoverflow.com/questions/2572721/recursive-treeview-in-asp-net)的另一个问题，但我没有创建 TreeView，而是尝试插入类别的 id 并获取它的子项、子项等；属于这一类的。我使用的函数代码如下：

```
 ArrayList arr = new ArrayList();
    List<MyObject> list = new List<MyObject>();
        list.Add(new MyObject() { Id = 1, Name = "Alice", ParentId = 0 });
        list.Add(new MyObject() { Id = 2, Name = "Bob", ParentId = 1 });
        list.Add(new MyObject() { Id = 3, Name = "Charlie", ParentId = 1 });
        list.Add(new MyObject() { Id = 4, Name = "David", ParentId = 2 });

    if (idCategory != "") //This is taken from querystring
    {
        int a = int.Parse(idCategorie);
        arr = GetCategs(list, a);
        foreach (int vvv in arr)
        {
            Label3.Text += " " + vvv.ToString();
        }
    }

private ArrayList GetCategs(IEnumerable<MyObject> list, int parentNode)
{
    ArrayList arls = new ArrayList();
    var nodes = list.Where(x => x.ParentId == parentNode);
    foreach (var node in nodes)
    {
        int newNode = node.Id;
        arls.Add(newNode);
        Label1.Text += " " + newNode.ToString();
        GetCategs(list, newNode);
    }
    foreach (int cvcv in arls)
    {
        Label2.Text += " " + cvcv.ToString();
    }
    return arls;
} 
```

所以我传递了列表[（请参阅我提到的示例以了解列表的来源）](https://stackoverflow.com/questions/2572721/recursive-treeview-in-asp-net)和我需要的类别（或子类别）的 id。我使用 ArrayList 来捕获所有孩子的 ID，并将其插入到名为 arls 的 arrayList 中。仅出于测试目的，我使用 Label1 Label2 和 Label3。当我运行代码时，Label1 向我显示以下所有级别的所有孩子的 ID，Label2 向我显示相同的结果（这意味着在 arsl 中成功传递的 ID），而 Label3 仅显示 id 1 级孩子不是 2 级（孙子）或 3 级（孙子）的孩子。问题是：有什么问题？如何解决。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T21:10:26.707

我得到了答案。我没有将 ArrayList arls 传递给 ArrayList arr，而是在 PageLoad 之外启动了 arr，并直接在函数内部使用它。所以现在代码看起来像这样：

```
ArrayList arr = new ArrayList();//Now it can be seen by the function GetCategs
protected void Page_Load(object sender, EventArgs e)
{

List<MyObject> list = new List<MyObject>();
list.Add(new MyObject() { Id = 1, Name = "Alice", ParentId = 0 });
list.Add(new MyObject() { Id = 2, Name = "Bob", ParentId = 1 });
list.Add(new MyObject() { Id = 3, Name = "Charlie", ParentId = 1 });
list.Add(new MyObject() { Id = 4, Name = "David", ParentId = 2 });

if (idCategory != "") //This is taken from querystring
{
    int a = int.Parse(idCategory);
    GetCategs(list, a);
    foreach (int vvv in arr)
    {
        Label3.Text += " " + vvv.ToString();
    }
}
}
private void GetCategs(IEnumerable<MyObject> list, int parentNode)
{

    var nodes = list.Where(x => x.ParentId == parentNode);
    foreach (var node in nodes)
    {
        int newNode = node.Id;
        arls.Add(newNode);
        Label1.Text += " " + newNode.ToString();
        GetCategs(list, newNode);
    }
} 
```

# asp.net - Microsoft 以外的 WIF 和 ADFS 2.0 培训示例

> ID：13481439
> 
> 赞同：0
> 
> 时间：2012-11-20T20:21:03.040
> 
> 标签：asp.net, wif, adfs2.0

有没有什么好的网站可以用 ADFS 2.0 学习和测试 WIF 的例子。（最好是 ASP .NET 示例），而不是 Microsoft 资源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T21:38:07.077

[Pluralsight](http://www.pluralsight.com)在这个主题上有很好的培训：

[http://pluralsight.com/training/Courses/TableOfContents/adfs2-and-wif35](http://pluralsight.com/training/Courses/TableOfContents/adfs2-and-wif35) http://pluralsight.com/training/Courses/TableOfContents/iac-intro

Dominick 的内容总是很棒。不过我还没有拿过另一个。

Dominick 的[博客](http://leastprivilege.com/)充满了很好的例子和内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T21:49:57.490

您是否看过所有 Microsoft 的资料，例如 TechNet Wiki、基于声明的身份和访问控制指南等？

除此之外，试试[Thinktecture](https://github.com/thinktecture)。

# php - 使用 Kaltura API 版本访问自定义数据字段：3.1.5 和 PHP

> ID：13481441
> 
> 赞同：0
> 
> 时间：2012-11-20T20:21:20.240
> 
> 标签：php, kaltura

我为我的视频创建了一个名为 Record Date 的自定义元数据字段，我想知道当我按类别对数据进行排序时如何回显这些信息。这是我迄今为止工作的代码片段。

```
$pager = new KalturaFilterPager();
$pager->pageIndex = "1";
$pager->pageSize = "200";

if(isset($_REQUEST['category'])){
    $category = $_REQUEST['category'];
}
else{
    $category = "";
}

$filter = new KalturaMediaEntryFilter();
$filter->categoriesMatchOr = $category;
$filter->orderBy = KalturaMediaEntryOrderBy::CREATED_AT_DESC;

$entries = $client->media->listAction($filter, $pager);

if (!$entries)
{
   $entries = array();
}
?>

<ol id="list">
<?php 
$count = 0;
foreach ($entries->objects as $entry)
{
 echo '<li id="'.$count.'"><img src="'.$entry->thumbnailUrl.'"/> <strong>Name:</strong> '.$entry->name.' <strong>Record Date:</strong> '.date('m/d/Y', $entry->createdAt).' <strong>Duration:</strong> '.$entry->duration.' sec</li>';
 $count++;
}
?>
</ol> 
```

我想用我的自定义元数据字段值替换 $entry->createdAt。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:53:28.127

我通过在我的陈述中应用一个`KalturaMetadataFilter()`内部来解决了这个问题。`foreach()`这是代码。

```
foreach ($entries->objects as $entry){
    $filter_meta = new KalturaMetadataFilter();
    $filter_meta->metadataObjectTypeEqual = KalturaMetadataObjectType::ENTRY;
    $filter_meta->objectIdEqual = $entry->id;
    $filter_meta->statusEqual = KalturaMetadataStatus::VALID;
    $metadataPlugin = KalturaMetadataClientPlugin::get($client);
    $result = $metadataPlugin->metadata->listAction($filter_meta);
    //print_r($result);
    if(isset($result->objects[0]->xml)){
        $xml = simplexml_load_string($result->objects[0]->xml);
        $record_date = (int)$xml->RecordDate;
    }
    else{
        $record_date = $entry->createdAt;
    }
    echo '<li id="'.$count.'"><img src="'.$entry->thumbnailUrl.'"/> <strong>Name:</strong> '.$entry->name.' <strong>Record Date:</strong> '.date('m/d/Y', $record_date).' <strong>Duration:</strong> '.$entry->duration.' sec</li>';
    $count++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T16:51:36.483

您应该调用entry.list，然后使用逗号（例如'0_jhb23ad,0_jhbasd3,0_askdja3'）将您在结果中收到的条目ID 分解，然后调用metadata.list 传递字段'objectIdIn' 中的条目ID 列表。

顺便说一句，你有一个错误 -

```
$filter->orderBy = 'CREATED_AT_DESC'; 
```

没有影响，应该是

```
KalturaMediaEntryOrderBy::CREATED_AT_DESC; 
```

# mips - MIPS 寻址问题

> ID：13481453
> 
> 赞同：0
> 
> 时间：2012-11-20T20:21:59.753
> 
> 标签：mips

我正在尝试在 MIP 中创建一个字符串，然后将字符串中的每个字符更改为一个整数。目前我在创建新字符串时遇到了麻烦，我不知道我做错了什么。我插入的代码块应该为 4 个字符创建内存分配，然后为每个位置分配一个数字并将字符串保存到内存位置。然而，它似乎并没有保存字符串，因为当我稍后打印它时它总是空白的。我只包括似乎不起作用的代码块。

任何提示将非常感谢！

```
.data
string: .space 16   #declare storage for string 4 char
string2: .asciiz "Success!"
string3: .asciiz "Failure!"

.text
main:    # convert string to integer

la $t0, string      # load base address of string to reg $t0
li $t1, 1       # $t1 = 1   
sw $t1, ($t0)       # first array element set to 1
li $t1, 2       # $t1 = 2
sw $t1, 4($t0)      # second array element set to 2
li $t1, 3       # $t1 = 3
sw $t1, 8($t0)      # third array element set to 3
li $t1, 0       # $t1 = 0
sw $t1, 12($t0)     # third array element set to 0
            # array stored at #t0
sw $t0, string

li $v0, 4       # syscall for print string
la $a0, string      # load string to be printed
syscall         # print digit string 
```

这一切都编译没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:31:50.767

在 MIPS 中，每个字符占用 1 个字节（不是 4 个），至少在使用`syscall`4 打印字符串时是这样。

另请注意，您正在尝试打印不可打印的字符（ASCII 代码 1、2 和 3），而不是 '1'、'2' 和 '3' 的 ASCII 代码。我认为`sw $t0, string`指令不应该在那里。

最后，请注意`syscall`4 假设字符串以 NULL 结尾，因此如果您声明存储 4 个字符，并且想要使用该系统调用，那么您确实有 3 个字符可用。

这是您发布的固定打印字符串的代码片段`123`：

```
.data
string: .space 4   #declare storage for string 4 char

.text
main:    # convert string to integer

la $t0, string      # load base address of string to reg $t0
li $t1, '1'       # $t1 = 1   
sb $t1, ($t0)       # first array element set to 1
li $t1, '2'       # $t1 = 2
sb $t1, 1($t0)      # second array element set to 2
li $t1, '3'       # $t1 = 3
sb $t1, 2($t0)      # third array element set to 3
li $t1, 0       # $t1 = 0
sb $t1, 3($t0)     # third array element set to 0
            # array stored at #t0

li $v0, 4       # syscall for print string
la $a0, string      # load string to be printed
syscall         # print digit string 
```

# javascript - 你将如何编写一个 jQuery 函数来返回一个不会溢出其父元素的数组？

> ID：13481456
> 
> 赞同：3
> 
> 时间：2012-11-20T20:22:05.213
> 
> 标签：javascript, jquery, html, css

我有一个包含元素设置为溢出隐藏，UL 溢出容器。我将如何获得可见的 li？

我的标记：

```
<div class="dm-similar-photos-content-container">
    <ul class="carousel" style="left: 0px;">
        <li class="dm-image">
            <img data-photoid="1" src="http://lorempixel.com/150/150/food/1">
        </li>

        <li class="dm-image">
            <img data-photoid="2" src="http://lorempixel.com/150/150/food/2">
        </li>

        <li class="dm-image">
            <img data-photoid="3" src="http://lorempixel.com/150/150/food/3">
        </li>

        <li class="dm-image">
            <img data-photoid="4" src="http://lorempixel.com/150/150/food/4">
        </li>

        <li class="dm-image">
            <img data-photoid="5" src="http://lorempixel.com/150/150/food/5">
        </li>

        <li class="dm-image">
            <img data-photoid="6" src="http://lorempixel.com/150/150/food/6">
        </li>

        <li class="dm-image">
            <img data-photoid="7" src="http://lorempixel.com/150/150/food/7">
        </li>

        <li class="dm-image">
            <img data-photoid="8" src="http://lorempixel.com/150/150/food/8">
        </li>

        <li class="dm-image">
            <img data-photoid="9" src="http://lorempixel.com/150/150/food/9">
        </li>

        <li class="dm-image">
            <img data-photoid="10" src="http://lorempixel.com/150/150/food/10">
        </li>

    </ul>
</div>

<div>
    <a class="left">
        <- Left
    </a>
    <a class="right">
        Right ->        
    </a>    
</div> 
```

我的风格：

```
.dm-similar-photos-content-container {
    margin: 0 30px;
    overflow: hidden;
    width: 335px;
}
.carousel {
    margin: 0;
    padding: 0;
    position: relative;
    width: 9999px;
}
.dm-similar-photos-content-container .dm-image {
    margin: 13px 27px 13px 0;
}

.dm-image {
    float: left;
    list-style: none outside none;
    margin: 16px 16px 0 0;
    position: relative;
}

.dm-image img {
    border: 2px solid #7F8886;
} 
```

最后是简单的左右JS：

```
jQuery('.left').on('click', function() {
    jQuery(".carousel").animate({
        left: "-=181"
    });
});

jQuery('.right').on('click', function() {
    jQuery(".carousel").animate({
        left: "+=181"
    });
}); 
```

你可以在这里看到它：http: [//jsfiddle.net/GGhUF/](http://jsfiddle.net/GGhUF/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:42:06.800

一般的方法是判断元素是否位于其父元素的边界框内，这可以通过它们各自的宽度和偏移量来计算。合并所有这些的最佳方法是在单个自定义选择器中：

```
jQuery.extend(jQuery.expr[':'], {
    inparent: function(el) {
        parent = $(el).parent();
        if ($(el).offset().top >= parent.offset().top && 
            $(el).offset().top + $(el).outerHeight(true) <= parent.offset().top + parent.outerHeight(true) && 
            $(el).offset().left >= parent.offset().left && 
            $(el).offset().left + $(el).outerWidth(true) <= parent.offset().left + parent.outerWidth(true)) 
        {
            return true;
        }
        return false;
    }
}); 
```

然后你可以像这样使用它：

```
var visibleli = $('li:inparent'); 
```

这显然可以从一些优化中受益（在比较宽度等后提前退出），但我会让你解决这个问题。

这是一个演示：http: [//jsfiddle.net/DDRYj/](http://jsfiddle.net/DDRYj/)

# javascript - 在表 jquery 中搜索和计数条目

> ID：13481460
> 
> 赞同：2
> 
> 时间：2012-11-20T20:22:12.623
> 
> 标签：javascript, jquery

我有下表：

```
<table>
    <tr>
        <th>Alarm</th>
    </tr>
    <tr>
        <td>OK</td>
    </tr>
    <tr>
        <td>Missing</td>
    </tr>
    <tr>
        <td>OK</td>
    </tr>
</table> 
```

我想像这样计算此表中的行数
OK = 2
Missing = 1

但我不知道如何用 jQuery 来做，应该只为警报列指定选择器，因为我有其他列包含 ok 和 missing

**注意：**我想计算表中特定列的行数，仅用于警报列 alaram 列包含 2 个正常和 1 个缺失。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T20:24:47.673

假设`Alarm`是第一列：

```
var okCount = $('td:contains("OK")').filter(function() {
    return $(this).index() == 0;
}).length;
var missingCount = $('td:contains("Missing")').filter(function() {
    return $(this).index() == 0;
}).length;

console.log('okCount: ' + okCount);
console.log('missingCount : ' + missingCount);​ 
```

[**​现场演示**](http://jsfiddle.net/r2aXr/2/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T20:48:50.910

看看这是否有用：http: [//jsfiddle.net/AG6kr/](http://jsfiddle.net/AG6kr/)

```
var table = document.getElementById('yourTableID'),
    column = 1,
    tr = table.getElementsByTagName('tr'),
    trLen = tr.length,
    numMissing = 0,
    numOK = 0;

while(trLen--) {
    if(tr[trLen].children[column-1].innerHTML == 'OK') {
        numOK++;
    }
    if(tr[trLen].children[column-1].innerHTML == 'Missing') {
        numMissing++;
    }
}

console.log(numOK);
console.log(numMissing); 
```

万一有人想知道如何在没有 jQuery 的情况下做到这一点

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T20:25:19.973

谁需要 jQuery？

```
var table = document.getElementById('yourTableID'),
    cells = table.getElementsByTagName('td'),
    numCells = cells.length,
    okCount = 0,
    missingCount = 0;

while(numCells--) {
    if (cells[numCells].innerHTML == 'OK') okCount++;
    else if (cells[numCells].innerHTML == 'Missing') missingCount++;
}

console.log('OK: ' + okCount + ', Missing: ' + missingCount);    // Should output "OK: 2, Missing: 1 into the console 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T20:47:49.340

不需要过滤索引，使用第 n 个子选择器！我的选择器也使用 thead 和 tbody，它会在 OP 代码中使用的示例中失败。

**HTML**

```
<table>
    <thead>
        <tr>
            <th>Alarm</th>
            <th>Warning</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>OK</td>
            <td>OK</td>    
        </tr>
        <tr>
            <td>Missing</td>
            <td>Missing</td>    
        </tr>
        <tr>
            <td>OK</td>
            <td>OK</td>    
        </tr>
    </thead>
</table>​ 
```

**JavaScript**

```
var index = $("table thead th:contains('Alarm')").index() + 1;  //index is zero based, nth-child is 1 based.
var cells = $("table tbody td:nth-child(" + index + ")");

var okCount = cells.filter(":contains('OK')").length;
var missingCount = cells.filter(":contains('Missing')").length;

console.log(okCount, missingCount); 
```

[​JSFiddle](http://jsfiddle.net/puYqf/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T20:31:48.767

[http://jsfiddle.net/PzBqX/4/](http://jsfiddle.net/PzBqX/4/)

为了矫枉过正，这是为了以防您具有相同的表结构并希望在任何列中搜索任何数据集。

HTML：

```
<table>
  <tr>
    <th>Alarm</th>
    <th>Fruit</th>
  </tr><tr>
    <td>OK</td>
    <td>Apple</td>
  </tr><tr>
    <td>Missing</td>
    <td>Orange</td>
  </tr><tr>
    <td>OK</td>
    <td>Apple</td>
  </tr>
</table>​ 
```

JavaScript：

```
$(document).ready(function() {       
    var results = tallyResults($('table'), 'Fruit', Array('Apple', 'Orange'));

    /*
       {
           Apple: 2,
           Orange: 1
       }
    */
});

function tallyResults(table, col, vals) {
    var valsCount = { }
    var columnIndex = null;

    //-- init value object using vals array

    $(vals).each(function(i, v) {
        valsCount[v] = 0;
    });

    //-- get index of the column we are currently searching

    table.find('tr th').each(function(i, v) {
        el = $(this);
        if (el.text() == col) {
            columnIndex = el.index();
        }
    });

    //-- tally all instances of the values we are searching
    //-- for in the proper column index

    table.find('tr td').each(function(i, v) {
        el = $(this);
        if (el.index() == columnIndex) {
           t = el.text();
           if(valsCount[t] != undefined) {
              valsCount[t]++;
           }
        }
    });

    return valsCount;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-16T02:03:02.677

`$('td:contains("OK")').length` 将返回包含“OK”的单元格数

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-20T20:58:45.077

这是你要找的吗？[http://jsfiddle.net/tQTDk/9/](http://jsfiddle.net/tQTDk/9/)

```
var points = 0;

$("td").each(function() {

    var tdVal = $(this);

    if(tdVal.text().indexOf('OK') >= 0)
       points += 2;

    if(tdVal.text().indexOf('Missing') >= 0)
       points += 1;
});

alert(points); 
```

​</p>

# windows-8 - Windows 8 应用程序动态磁贴未在使用 Visual Studio 的应用程序应用程序上更新

> ID：13481467
> 
> 赞同：0
> 
> 时间：2012-11-20T20:22:28.013
> 
> 标签：windows-8, notifications, microsoft-metro, winjs

我刚刚在 Visual Studio 中创建了一个“导航应用程序”项目，我正试图让动态磁贴真正更新。这是我在 default.js 中的内容：

```
(function () {
  "use strict";

  WinJS.Binding.optimizeBindingReferences = true;

  var app = WinJS.Application;
  var activation = Windows.ApplicationModel.Activation;
  var nav = WinJS.Navigation;

  // init notifications to live tile
  var notif = Windows.UI.Notifications;
  var tileUpdater = notif.TileUpdateManager.createTileUpdaterForApplication();
  var recurrence = notif.PeriodicUpdateRecurrence.halfHour;
  var updateTileUrl = "http://bakersdozen13.lfchosting.com/img.xml";
  var url = new Windows.Foundation.Uri(updateTileUrl);
  tileUpdater.startPeriodicUpdate(url, recurrence);

  app.addEventListener("activated", function (args) { ... }); // the js that came w/ the project template

  ...

})(); 
```

当我按 F5 运行它时，然后在我的磁贴开始仪表板 Windows 8 屏幕上查看磁贴，它只有我的徽标，没有别的。我错过了什么？我需要将通知片段放在其他地方吗？

Ps，这是从更新 uri 返回的 xml：

```
<tile>
  <visual>
    <binding template="TileWideSmallImageAndText03">
      <image id="1" src="http://cdn.godvine.com/uploads/2012/11/image_1353288711_abandoned_church_1.jpg" alt="img alt text here"/>
      <text id="1">Dying Man Gets a Miracle in Abandoned Church</text>
    </binding>
    <binding template="TileSquarePeekImageAndText04">
      <image id="1" src="http://cdn.godvine.com/uploads/2012/11/image_1353288711_abandoned_church_1.jpg" alt="img alt text here"/>
      <text id="1">Dying Man Gets a Miracle in Abandoned Church</text>
    </binding>
  </visual>
</tile> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:54:55.263

一切看起来都很好。我在 SDK 中的推送和定期通知示例中尝试了您的 URL，并且磁贴更新顺利进行，因此 XML 没有任何问题。然后我做了你的步骤：新的导航应用程序项目，粘贴在代码中，并在 VS 中运行。磁贴出现在开始屏幕上需要几秒钟，但一旦出现，磁贴更新就会按预期出现。

简而言之，当我尝试它时，它工作得很好。

您可以尝试将代码放在激活的处理程序中。可以想象，在 VS 部署应用程序的方式与创建磁贴的时间之间存在一些竞争条件。您可以尝试 VS 的 Build 菜单上的 Deploy 命令，该命令应该与尝试运行应用程序分开安装应用程序。然后从磁贴启动它，应用程序启动后，返回并观看开始屏幕。

请注意，默认应用程序项目将忽略 XML 中的宽磁贴更新，因为它没有宽静态磁贴图像。也就是说，您必须在清单中包含一个宽图块图像才能启用实时宽图块，否则 XML 有效负载的这些部分将被忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T20:56:22.183

我使用 Visual Studio 开发和部署的应用程序遇到了类似的问题。这个应用程序一开始没有动态磁贴。当我后来添加动态磁贴的代码时，磁贴没有更新。

我的解决方案是卸载应用程序（通过开始屏幕上的应用程序栏）并再次部署它。那时一切正常，无需任何代码修改。

# c# - C# 基类和 2 个派生类初始化

> ID：13481468
> 
> 赞同：1
> 
> 时间：2012-11-20T20:22:29.407
> 
> 标签：c#, inheritance

所以我只想为我的所有函数使用一个类 Object，但我不想直接使用该类，而是需要访问派生类的成员。

举个例子：

```
class A {
    public A() {

    }

    public void DoSomething() { }
}

class B : A {
    public B() {

    }

    public void DoSomethingBetter() { }
}

class C : A {
    public C() {

    }

    public void DoSomethingBest() { }
}

class Runner {
    public static void Main(String[] args) {
        A objB = new B();
        objB.DoSomethingBetter(); //Won't compile

        A objC = new C();
        objC.DoSomethingBest(); //Won't compile
    }
} 
```

我不想将它们初始化为 B objB = new B()，这不是目的，我已经知道这可能是一个解决方案。我只需要为此使用父类。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T20:25:22.857

如果要声明具有不同名称的方法，则必须在代码中实例化显式类型。

如果这些方法都以不同的方式执行相同的功能，则应从基类中重写该方法，而不是用不同的名称重新实现它。

```
public class A
{
    public virtual void DoSomething()
    {
         // some implementation
    }
}

public class B : A
{
    public override void DoSomething()
    {
        // body of DoSomethingBetter
    }
}

public class C : A
{
    public override void DoSomething()
    {
        // body of DomSomethingBest
    }
} 
```

您的应用程序主体将简化为：

```
A b = new B();
A c = new C();

b.DoSomething() // uses logic of DoSomethingBetter
c.DoSomething() // uses logic of DoSomethingBest 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T20:27:36.060

您正在寻找的可能是压倒一切的吗？

您可以使`A`类抽象，也可以使其中的方法。然后把实际的实现放到派生类中：

```
abstract class A {

    public A() {
    }

    public abstract void DoSomething() { }
}

class B : A {

    public B() {
    }

    public override void DoSomething() { }
}

class C : A {

    public C() {
    }

    public override void DoSomething() { }
}

class Runner {
    public static void Main(String[] args) {
        A objB = new B();
        objB.DoSomething(); // Uses the B implementation

        A objC = new C();
        objC.DoSomething(); // Uses the C implementation
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T20:38:29.957

不是 100% 确定您要完成什么，但如果出于某种原因您不想像其他人建议的那样覆盖，这是一个选项。

```
class A {
    public A() {

    }

    public void DoSomething() { }
}

class B : A {
    public B() {

    }

    public void DoSomethingBetter() { }
}

class C : A {
    public C() {

    }

    public void DoSomethingBest() { }
}

class Runner {
    public static void Main(String[] args) {
        A objB = new B();
        if (objB is B)
            ((B)objB).DoSomethingBetter();

        A objC = new C();
        if (objC is C) 
            ((C)objC).DoSomethingBest();
    }
} 
```

编辑：执行此操作的更有效方法如下（它将运行 2 次而不是 4 次）：

```
class A {
    public A() {

    }

    public void DoSomething() { }
}

class B : A {
    public B() {

    }

    public void DoSomethingBetter() { }
}

class C : A {
    public C() {

    }

    public void DoSomethingBest() { }
}

class Runner {
    public static void Main(String[] args) {
        A objB = new B();
        B objAB = objB as B;
        if (objAB != null)
            objAB.DoSomethingBetter();

        A objC = new C();
        C objAC = objC AS C;
        if (objAC != null) 
            objAC.DoSomethingBest();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T22:53:52.183

在没有看到您的实际代码的情况下，我倾向于同意其他所有人的观点，即您应该再次尝试使用简单的覆盖来解决您的问题。

尽管如此，我还是玩弄了这个问题并设法编写了一个不进行强制转换的解决方案。

享受！

```
public class BattlePlan
{
    public Action<Puppy> ExecutePuppyAttack { get; set; }
    public Action<Pigeon> ExecutePigeonAttack { get; set; }
}

public abstract class Animal
{
    public abstract void Attack(BattlePlan battlePlan);
}

public class Puppy : Animal
{
    public void Bite(bool barkFirst)
    {
        // optionally bark at the intruder,
        // then bite as deeply as needed.
    }

    public override void Attack(BattlePlan battlePlan)
    {
        battlePlan.ExecutePuppyAttack(this);
    }
}

public class Pigeon : Animal
{
    public void Bombard(int altitude)
    {
        // ewww. nuff said.
    }

    public override void Attack(BattlePlan battlePlan)
    {
        battlePlan.ExecutePigeonAttack(this);
    }
}

public class EvilMasterMind
{
    private bool _puppiesMustBark = true;
    private int _pigeonAltitude = 100;

    public void Attack()
    {
        var battlePlan = new BattlePlan
        {
            ExecutePuppyAttack = e => e.Bite(_puppiesMustBark),
            ExecutePigeonAttack = e => e.Bombard(_pigeonAltitude)
        };

        var animals = new List<Animal>
        {
            new Puppy(),
            new Pigeon()
        };

        foreach (var animal in animals)
        {
            animal.Attack(battlePlan);
        }

    }
} 
```

# c# - WPF PasswordBox 和 SecureString：不能 MakeReadOnly()？

> ID：13481469
> 
> 赞同：1
> 
> 时间：2012-11-20T20:22:37.347
> 
> 标签：c#, .net, wpf, passwordbox, securestring

是否可以标记`PasswordBox.SecurePassword`为`ReadOnly`？

考虑这个简单的代码：

XAML：

```
<StackPanel>
    <PasswordBox Name="pBox" MinWidth="100" />
    <Button Content="OK" Click="Button_Click" Width="50" />
</StackPanel> 
```

C＃：

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    pBox.SecurePassword.MakeReadOnly();
    Console.WriteLine(pBox.SecurePassword.IsReadOnly());
} 
```

它将输出`False`. 为什么？

**编辑**：为了确保，我尝试了这个，它按预期输出“True”。

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    SecureString s = new SecureString();
    s.MakeReadOnly();
    Console.WriteLine(s.IsReadOnly());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T21:02:06.143

`pBox.SecurePassword`每次读取属性时都会返回一个新的安全字符串实例。您可以通过多次调用来验证它`GetHashCode`。`pBox.SecurePassword`

您还会注意到，使用 Visual Studios 的“生成对象 ID”不会显示 #X，因为每次鼠标悬停时它都会生成一个新实例。

在将对象的引用创建`SecureString`到局部变量中时，它*与*您调用的实例相同`MakeReadOnly()`，因此它的行为符合预期。

# c++ - c++ time_t 回到 1970 年 1 月 1 日之前

> ID：13481474
> 
> 赞同：3
> 
> 时间：2012-11-20T20:23:06.607
> 
> 标签：c++, visual-studio-2010, time-t

我有一个 c++ 代码，我可以通过它从输入的 excel 日期开始计算/操作（通过操作我的意思是我可以通过特定的增量增加/减少输入日期或对其进行其他计算）。

我在我的代码中使用变量 time_t。根据 msdn 文档 time_t 是自 1970 年 1 月 1 日以来经过的秒数。所以给定一个输入日期，我首先计算自 01/01/1970 以来经过的秒数，将其存储在 time_t vcariable 中，然后使用 localtime() 进行所有其他计算。

我的代码可以正常工作，因为我的输入日期超过 01/01/1970 但在此之前的日期会中断。

问题：在 1970 年 1 月 1 日之前，我是否可以使用任何其他变量或结构。或者有没有办法在 01/01/1970 之前操纵 time_t 变量。

提前致谢

我从 1970 年 2 月 1 日开始。我想将月份减少 2。首先我使用

```
void localtime(int* py = 0, int* pm = 0, int* pd = 0, 
            int* ph = 0, int* pn = 0, int* ps = 0,
            int* pwday = 0, int* pyday = 0, int* pisdst = 0) const
{
    struct tm* ptm = ::localtime(&t_); 
    if (py) *py = ptm->tm_year + 1900;
    if (pm) *pm = ptm->tm_mon + 1;
    if (pd) *pd = ptm->tm_mday;
    if (ph) *ph = ptm->tm_hour;
    if (pn) *pn = ptm->tm_min;
    if (ps) *ps = ptm->tm_sec;
    if (pwday) *pwday = ptm->tm_wday;
    if (pyday) *pyday = ptm->tm_yday;
    if (pisdst) *pisdst = ptm->tm_isdst;
} 
```

然后我使用： maketime(y, m + count, d, h, n, s); 其中 y=1970, m=2, count=-2, d=1 （来自上述代码的输出。maketime() 如下：

```
void maketime(int y, int m, int d, int h = 0, int n = 0, int s = 0)
{
    struct tm t;
    t.tm_year = y - 1900;
    t.tm_mon  = m - 1;
    t.tm_mday = d;
    t.tm_hour = h;
    t.tm_min  = n;
    t.tm_sec  = s;
    t.tm_isdst = -1;

    t_ = ::mktime(&t);
} 
```

这导致 t_ =-1。

现在在这个结果上，我再次调用 localtime() 并

```
 struct tm* ptm = ::localtime(&t_); 
```

当 t_ = -1 时，localtime() 中的第一行失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T20:27:12.510

`FILETIME`类似地基于整数计数，在这种情况下为 100 纳秒间隔，并且一直追溯到 1601。

看到您的编辑后，问题似乎很简单：您需要确保[`tm`结构](http://en.cppreference.com/w/cpp/chrono/c/tm)的所有元素都在界限内。加减月份时，需要调整，直到月份数在 0 到 11 之间。无论您使用`time_t`或，都是这种情况`FILETIME`。

```
while (m < 0)
{
    m += 12;
    y -= 1;
}
while (m > 11)
{
    m -= 12;
    y += 1;
} 
```

我不确定如果这一天超过一个月的天数会发生什么，例如，如果您尝试从 3 月 31 日减去 1 个月。

# python - 可以在 Python 中为 wxMenuItem 设置文本颜色吗？

> ID：13481480
> 
> 赞同：0
> 
> 时间：2012-11-20T20:23:24.443
> 
> 标签：python, windows, wxpython, wxwidgets

查看[wxWidgets 文档](http://docs.wxwidgets.org/stable/wx_wxmenuitem.html#wxmenuitem)，我发现应该只能在 Windows 中为 wxMenuItem 对象设置文本颜色。我正在使用Windows，很好。

在 wxPython 中编码并尝试完成此操作时，我不仅没有更改菜单项的文本颜色，而且我注意到同一菜单中此菜单项之后的菜单项缩进了 1 个字符。确实很奇怪。如果我删除设置文本颜色的指令，两个菜单项会按预期排列。

所以这是我的代码。我在我的代码中看不到任何错误，但也许有一些错误，因为我确信缩进是一个迹象。

```
menu = wx.Menu()
colour = (255,0,0) # like the text to be red
m_cluster = menu.Append(-1, "&Cluster\tAlt-C", "Cluster Options.")
m_cluster.SetTextColour(colour) # remembered to spell color with u
self.Bind(wx.EVT_MENU, self.OpenClusterDialog, m_cluster)
m_data = menu.Append(-1, "Data Source", "Set Data Source Information")
self.Bind(ex.EVT_MENU, self.OpenDataSourceDialog, m_data)
menuBar.Append(menu, "&Options") # menu bar previously defined 
```

`wxversion.py`报告我已`2.8-msv-unicode`安装

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:10:36.783

我玩过您的代码，并注意到仅当菜单项尚未附加到菜单时才会应用颜色。因此`menu.Append(...)`，您需要：

```
m_cluster = wx.MenuItem(menu, -1, "&Cluster\tAlt-C", "Cluster Options.")
m_cluster.SetTextColour(colour)
menu.AppendItem(m_cluster) 
```

我在 wx 2.9 所以 YMMV。我没有注意到缩进问题，但这也可能与版本有关。

![红色菜单项](../Images/fd6eb4197e670c15c73624cf0702e131.png)

# git - 从 master 恢复本地分支的提交

> ID：13481485
> 
> 赞同：2
> 
> 时间：2012-11-20T20:23:49.943
> 
> 标签：git, commit, revert

我有一个功能分支，我有一些提交。然后我确实运行了 git rebase master 并将该分支合并回 master。

所以就像

```
git checkout -b somebranch
......some work commits here .....
git checkout master
git fetch
git merge origin/master
git checkout somebranch 
git rebase master
git checkout master
git merge  somebranch 
```

现在我需要完全从 master 中提取某个分支中的所有提交，可能需要稍后将其合并回 master。

更新：前一段时间将更改推送到 master 并且合并后有很多提交，因此重置为 head 将不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T21:49:52.087

```
git checkout -b somebranch # from "A"
......some work commits here x, y, z .....
git checkout master
git pull # call new HEAD "B" 
```

所以我们有类似的东西

```
A -> a1 -> a2 -> B <= master
 \
  x -> y -> z      <= somebranch 
```

进而：

```
git checkout somebranch 
git rebase master

A -> ... -> B <= master
             \
              x' -> y' -> z' <= somebranch

git checkout master
git merge  somebranch # call new HEAD "C"

A -> ... -> B -------------> C <= master
             \              /
              x' -> y' -> z' <= somebranch 
```

因此，此时，您可以轻松*撤消*不需要的合并，只需将 master 倒回到`B`. 然而，一旦你*推动* `C`（并且其他人已经看到它，和/或在它之上完成了工作），这变得很难。

* * *

简单的解决方案是只恢复所有提交`somebranch`：

```
git revert x'..z' 
```

和推。

现在，在您`somebranch`再次合并之前，您必须对其进行变基（就像您最初所做的那样）。这行得通，但你最终会在大师的历史上留下一些噪音。

* * *

如果少数人看到和/或承诺了孩子，并且您可以与他们协调，则可以避免这种情况，但工作量很大。如果可能，您必须确保他们正在处理的所有内容都已提交并推送，然后您可以重新设置：

```
A -> ... -> B -------------> C -> c1 -> c2 -> D <= master
             \              /
              x' -> y' -> z' <= somebranch 
```

对此：

```
 c1' -> c2' -> D' <= master
             /
A -> ... -> B -------------> C -> c1 -> c2 -> D
             \              /
              x' -> y' -> z' <= somebranch 
```

现在中间分支将是孤立的，新的头`D'`没有您的更改，并且`somebranch`仍然完好无损，因此您可以稍后合并。

为此，请使用：

```
git rebase --onto B C c1
git push --force 
```

其他所有人现在都必须更新到新的 head `D'`，例如通过执行以下操作：

```
git fetch
git checkout master
git reset --hard origin/master 
```

Note that if anyone *does* have local commits that still depend on `C` (and aren't already visible in the `c1..D` chain when you rebase), they'll need to rebase or cherry-pick them across to the new history. This is potentially a lot of (error-prone) work, so better to avoid if possible.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T21:20:09.973

在本地副本上，`master`您可以尝试以下操作，这将使用还原的更改创建一个新的提交（与您在 master 上所做的相反）。

`git revert OLDER_COMMIT^..NEWER_COMMIT`

哪里`OLDER_COMMIT`是您的功能分支提交的第`NEWER_COMMIT`一次提交，并且是您的功能分支的最后一次提交。

或者，您可以尝试

`git revert -n OLDER_COMMIT..NEWER_COMMIT`

这将恢复提交所做的更改，但不会使用恢复的更改创建任何新提交。还原仅修改工作树和索引。

注意：使用`1.7.4+`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T20:41:41.387

如果合并提交仍然是最新的，并且如果您尚未将该提交推回上游，`git reset --hard HEAD^`则应将您放回到合并之前的提交上 - 即将您的`master`分支返回到它之后的位置`git merge origin/master`。

# debugging - Task.Factory.StartNew() 使用 TPL 操作时间和调试多个任务执行

> ID：13481486
> 
> 赞同：1
> 
> 时间：2012-11-20T20:24:00.590
> 
> 标签：debugging, c#-4.0, .net-4.0, task-parallel-library

我想了解如何并行执行一系列功能并能够调试每个..

我正在尝试创建一个控制台应用程序，它将（在编译后）在将通过其任务调度程序执行应用程序的服务器上运行。

```
 static void Main(string[] args)
    {
        Task.Factory.StartNew(
            // first b. point here (will not "step into")
            () =>
                doFirstOne().ContinueWith(task => doSecondOne())
                ); 
    }

    public static IWebDriver AllDayWbDrvr;
    static string extrctdStr = "";

    public static void doFirstOne()
    { 
           // <<<<<<<----- brakePoint here  nothing steps in
        SeparatedClass.IeEnginGenerator IeNgn = new SeparatedClass.IeEnginGenerator();
         AllDayWbDrvr = IeNgn.ExtractPageContent(firstUrl....);

        var a = AllDayWbDrvr.FindElements(By.Id("anyID"));
        IWebElement IwbElm = IWebDrvRdonlyColl.ElementAt(1).FindElements(By.TagName("td"))[0];
        extrctedStr = IwbElm.Text;
        // plan is to append extracted text to one shared file that will log all results
        string fNm = @"C:\Inetpub\wwwroot\dolarRate.asp";
        File.WriteAllText(fNm, extrctdStr);

        AllDWbDrvr.Close();
        IeNgn.service.Dispose();

    }

    public static void doSecondOne()
    {
        SeparatedClass.IeEnginGenerator IeNgn = new SeparatedClass.IeEnginGenerator();
         AllDayWbDrvr = IeNgn.ExtractPageContent("secondURL....");

        var a = AllDayWbDrvr.FindElements(By.ClassName("WpBody"));
        IWebElement IwbElm = IeNgn.IWebDrvRdonlyColl.ElementAt(5).FindElements(By.TagName("td"))[1];
        extrctedStr = IwbElm.Text;
        string fNm = @"C:\Inetpub\wwwroot\anyOtherFile.asp";
        File.WriteAllText(fNm, extrctdStr);

        AllDWbDrvr.Close();
        IeNgn.service.Dispose();

    } 
```

1.  那是线程/连接函数的方式吗？
2.  我怎样才能闯入执行的 doFirst() 和 doScond() 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:44:55.803

您需要等待任务完成，然后通过退出 main 来结束您的应用程序。

尝试类似的东西： -

```
Task.Factory.StartNew(doFirstOne).ContinueWith(task => doSecondOne()).Wait(); 
```

# php - Javascript增加文本框的值+1

> ID：13481487
> 
> 赞同：1
> 
> 时间：2012-11-20T20:24:05.013
> 
> 标签：php, javascript, numeric

基本上，我正在为实时网页寻找 JavaScript 中的内容，该网页可以在用户每次键入时将文本框的当前数值增加 1。

例如

```
<td> <input type='text' name='form_c_port' value='1' size='5' maxlength='5'/> </td> 
```

然后我的下一个文本框值应该是 2 每次另一个文本框的数值变化时增加 1 或减少 1

```
<td> <input type='text' name='form_q_port' value='0' size='5' maxlength='5'/> </td> 
```

但我似乎无法找到如何在 JavaScript 中将值增加一。我知道如何在 PHP 中执行此操作，但是当用户更改值时，我需要在实时网页上执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:35:43.540

这比我最初想象的要复杂得多。我没有意识到这两个输入都可以修改。我终于通过监听退格键并在第一个输入上删除来让它工作。如果输入看起来太快，它仍然存在错误。

这是HTML

```
<td> <input id="one" type='text' name='form_c_port' value='1' size='5' maxlength='5'/> </td>
<td> <input id="two" type='text' name='form_q_port' value='0' size='5' maxlength='5'/> </td> 
```

这是 jQuery

```
var lengthValue = $('#one').val().length;
$('#one').keyup(function(event){
    var key = event.keyCode || event.charCode;
    var tempLength = $('#one').val().length;
    if(key == 8 || key == 46){
        if(tempLength < lengthValue){
            lengthValue = $('#one').val().length;
            if(isNumber($('#two').val())){
              $('#two').val(parseFloat($('#two').val()) - 1);   
            }
            else{
              $('#two').val(0);    
            }
        }
    }
    else if(lengthValue < 5){
       lengthValue = $('#one').val().length;
       if(isNumber($('#two').val())){
          $('#two').val(parseFloat($('#two').val()) + 1);   
       }
       else{
          $('#two').val(0);    
       }
    }
});

function isNumber(n) {
  return !isNaN(parseFloat(n)) && isFinite(n);
} 
```

这是一个[fiddle](http://jsfiddle.net/bplumb/jSXCy/20/)的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T20:27:33.100

向您的输入元素添加一个`onkeydown`侦听器，该侦听器将检查文本的当前大小并更新值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T20:27:35.893

向对象添加`onkeydown()`事件，因此：

```
<input type='text' name='form_q_port' value='0' size='5' maxlength='5' onkeydown="increaseValue(this)"/> 
```

然后JS：

```
function increaseValue(object)
{
object.Value += 1;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T20:31:31.070

```
document.getElementsByName("form_c_port")[0].value = parseInt(document.getElementsByName("form_c_port")[0].value) + 1 
```

见[http://jsfiddle.net/NK6dB/](http://jsfiddle.net/NK6dB/)

# objective-c - 带有 xy 的 iOS 地图位置

> ID：13481490
> 
> 赞同：1
> 
> 时间：2012-11-20T20:24:24.630
> 
> 标签：objective-c, xcode4.2, mapkit, core-location, latitude-longitude

我有一组 x,y 位置点。我不知道如何使用它，因为它不长/纬度。

例如： X=217338 , Y=703099

我想知道如何在 iphone SDK 上使用它以及使用哪个框架？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T20:43:48.463

首先，您需要知道您的值的格式。
如果它们不是 lon/lat，它们可以是米或英寸或半臂长，甚至是标准化的甜甜圈孔。

无论如何，您都需要提出一种转换方法，因为`MKMapKit`只了解地理坐标（经度/纬度）。

如果您已经澄清您应该查看苹果的[位置感知指南](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009497-CH1-SW1)。还有一些其他很好的 mapkit 资源，例如[raywenderlich.com](http://www.raywenderlich.com/21365/introduction-to-mapkit-in-ios-6-tutorial)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T21:58:05.537

在不知道这些值代表什么的情况下，您实际上无法用它们做任何事情。假设您可以将它们转换为纬度/经度值，这就是您能够以 (X, Y) 坐标为中心的方式：

```
//Import the <MapKit/MapKit.h> and <CoreLocation/CoreLocation.h> framework 
//and then this will go in your implementation file:
CLLocationCoordinate2D coord = CLLocationCoordinate2DMake(xConvertedToLat, yConvertedToLong);
//Set the region your map will display centered on the above coord and spanning 250m on x-axis and 250 on y-axis
MKCoordinateRegion region = MKCoordinateRegionMake(coord, 250, 250);
//You should have a MKMapView object
[myMapView setRegion:region animated:YES]; 
```

您可以对数组中的每个对象进行迭代，但在设置最后一个 (x, y) 坐标之前，您不会看到任何内容。

# django-tagging - Django 标记对象

> ID：13481491
> 
> 赞同：-2
> 
> 时间：2012-11-20T20:24:31.633
> 
> 标签：django-tagging

Django Tag 对象有一个默认函数add_tag()，似乎只允许一个单词作为标签名称，有没有办法保存一个包含多个单词的标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T22:42:05.113

如果您使用 django-tagging，您可以通过在标签周围加上引号或使用逗号分隔标签来添加带有空格的标签。在添加多个标签的情况下这是有道理的，但我认为它对单个标签也适用。

注意：以下代码未经测试

```
Tag.objects.add_tag(obj, '"banana split"')
Tag.objects.add_tag(obj, 'banana split,') 
```

# .net - 类型提供程序问题 - 主要入口点 - 语法

> ID：13481493
> 
> 赞同：0
> 
> 时间：2012-11-20T20:24:39.700
> 
> 标签：.net, f#, type-providers, f#-3.0

我能够获得一段代码以在 .fsx 脚本中运行。我从来没有看到它在我要撤回的轨道数据上循环。所以我想我会把它放在一个 .fs 文件中并编译它。我遇到了2个问题。F# IDE 为 let 查询 = 行中的 type 关键字和 let 加下划线。这是我的 oode （下）我在哪里关闭语法？

```
open System
open System.Data
open System.Data.Linq
open Microsoft.FSharp.Data.TypeProviders
open Microsoft.FSharp.Linq

[<EntryPoint>]
let main argv = 
    type dbSchema = SqlDataConnection<"Data Source=SQLDEV;Initial Catalog=CDDB;Integrated Security=SSPI;">
            let db = dbSchema.GetDataContext()
            // Enable the logging of database activity to the console.
            db.DataContext.Log <- System.Console.Out
            let query1 =
                query {
                    for row in db.SoundRecording do
                    select row
                    take 50
                }
            query1 |> Seq.iter (fun row -> printfn "%s - %s" row.DisplayArtist row.DisplayTitle)
            0 // return an integer exit code 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T20:44:31.987

这可能有效 - 您不能在函数内部定义类型

```
open System
open System.Data
open System.Data.Linq
open Microsoft.FSharp.Data.TypeProviders
open Microsoft.FSharp.Linq
type dbSchema = SqlDataConnection<"Data Source=SQLDEV;Initial Catalog=CDDB;Integrated Security=SSPI;">
[<EntryPoint>]
let main argv = 

            let db = dbSchema.GetDataContext()
            // Enable the logging of database activity to the console.
            db.DataContext.Log <- System.Console.Out
            let query1 =
                query {
                    for row in db.SoundRecording do
                    select row
                    take 50
                }
            query1 |> Seq.iter (fun row -> printfn "%s - %s" row.DisplayArtist row.DisplayTitle)
            0 // return an integer exit code 
```

# iphone - NSMutableOrderedSet 和 NSNull 行为？

> ID：13481497
> 
> 赞同：1
> 
> 时间：2012-11-20T20:24:53.963
> 
> 标签：iphone, objective-c, ios, cocoa-touch, syntax

我不明白为什么我不能将许多 [NSNull null] 添加到 NSMutableOrderedSet：

```
NSMutableOrderedSet *set = [[NSMutableOrderedSet alloc]init];
for(int i = 0; i < 10; i++)
    {
        [set addObject: [NSNull null]];
    }

NSLog("SET COUNT : %d", set.count); 
```

这个输出：

```
SET COUNT : 1 
```

如果我用 NSMutableArray 尝试它，它工作得很好，我已经阅读了 NSNull 文档（它真的很短但没有帮助）但它说：

```
"The NSNull class defines a singleton object used to represent null values in collection objects" 
```

和 NSMutableOrderedSet 文档，它说这是一个

```
"[...] ordered collection of distinct objects" 
```

那么，如果它是一个集合，为什么它不起作用？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T20:33:02.400

`[NSNull null]`总是返回*相同的对象*（ 的单例实例`NSNull`）。

```
NSObject *a = [NSNull null];
NSObject *b = [NSNull null];
// a == b 
```

`NSMutableSet`并且`NSMutableOrderedSet`是*不同对象*的集合，因此它们最多可以包含这个“空对象”的一个实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T20:35:33.237

`NSOrderedSet`并且其子类`NSMutableOrderedSet`不能包含同一对象的多个副本。`NSNull`是一个*单例*，因此将其多次添加到集合中只会添加一个副本。

如果您希望能够将多个副本添加到集合中，请`NSCountedSet`改用：

```
NSCountedSet set = [NSCountedSet set];
for(int i = 0; i < 10; i++)
{
    [set addObject: [NSNull null]];
}
NSLog(@"%ud", [set countForObject:[NSNull null]]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T20:35:41.210

你的问题本身就有答案。它说`"ordered collection of distinct objects"`和`"The NSNull class defines a singleton object used to represent null values in collection objects"`。 `[NSNull null]`不是一个独特的对象，它只有一个实例，因此计数为 1。您不能将`"null"`这样的多个对象添加到`NSMutableOrderedSet`.

# ruby-on-rails - Heroku - apple-touch-icon-144x144-precomposed.png 未预编译

> ID：13481499
> 
> 赞同：1
> 
> 时间：2012-11-20T20:24:57.733
> 
> 标签：ruby-on-rails, heroku

我的应用程序在本地运行良好，甚至在今天早上早些时候，我还能够让它在 Heroku 中显示。然而，现在它已经完成了，我收到了那个讨厌的信息！

这是 Heroku 日志。我不确定如何解决它：

```
2012-11-20T19:49:33+00:00 app[web.1]: 
2012-11-20T19:49:33+00:00 app[web.1]:   app/views/layouts/application.html.erb:19:in  `_app_views_layouts_application_html_erb__4485189738011654672_31063660'
2012-11-20T19:49:33+00:00 app[web.1]: 
 2012-11-20T19:49:33+00:00 app[web.1]: 
 2012-11-20T19:49:33+00:00 app[web.1]: Processing by PagesController#home as HTML
 2012-11-20T19:50:03+00:00 app[web.1]: ActionView::Template::Error (images/apple-touch-    icon- 144x144-precomposed.png isn't precompiled):
2012-11-20T19:50:03+00:00 app[web.1]: 
2012-11-20T19:50:03+00:00 app[web.1]: 
 2012-11-20T19:50:03+00:00 app[web.1]: 
2012-11-20T19:50:03+00:00 app[web.1]:     21:     <!-- For iPhone with high-resolution Retina  display: -->
2012-11-20T19:50:03+00:00 app[web.1]: 
2012-11-20T19:50:03+00:00 app[web.1]:     19:     <%= favicon_link_tag 'images/apple-touch- icon-144x144-precomposed.png', :rel => 'apple-touch-icon-precomposed', :type => 'image/png',  :sizes => '144x144' %>
2012-11-20T19:50:03+00:00 app[web.1]:     22:     <!-- Size should be 114 x 114 pixels -->
2012-11-20T19:50:03+00:00 app[web.1]:     17:     <!-- For third-generation iPad with high-resolution Retina display: -->
2012-11-20T19:50:03+00:00 app[web.1]:     18:     <!-- Size should be 144 x 144 pixels -->
2012-11-20T19:50:03+00:00 app[web.1]:     20: 
2012-11-20T19:50:03+00:00 app[web.1]:   app/views/layouts/application.html.erb:19:in  `_app_views_layouts_application_html_erb__4485189738011654672_31063660'
2012-11-20T19:50:03+00:00 app[web.1]: 
2012-11-20T19:50:03+00:00 app[web.1]: Started GET "/" for 66.25.149.26 at 2012-11-20 19:50:03  +0000
2012-11-20T19:50:03+00:00 app[web.1]: Processing by PagesController#home as HTML
2012-11-20T19:50:03+00:00 app[web.1]:   Rendered pages/home.html.erb within  layouts/application (0.3ms)
2012-11-20T19:50:03+00:00 app[web.1]: Completed 500 Internal Server Error in 2ms
2012-11-20T19:50:03+00:00 app[web.1]:     16: 
2012-11-20T19:50:08+00:00 heroku[router]: at=info method=GET path=/  host=thenewoutfitproject.herokuapp.com fwd= dyno=web.1 queue=0 wait=0ms connect=2ms service=28ms status=500 bytes=643
2012-11-20T19:50:31+00:00 heroku[router]: at=info method=GET path=/ host=thenewoutfitproject.herokuapp.com fwd= dyno=web.1 queue=0 wait=0ms connect=6ms service=9ms status=500 bytes=643
2012-11-20T19:50:31+00:00 app[web.1]:   Rendered pages/home.html.erb within layouts/application (0.2ms)
2012-11-20T19:50:31+00:00 app[web.1]: 
2012-11-20T19:50:31+00:00 app[web.1]: 
2012-11-20T19:50:31+00:00 app[web.1]:     20: 
2012-11-20T19:50:31+00:00 app[web.1]: 
2012-11-20T19:50:31+00:00 app[web.1]:     18:     <!-- Size should be 144 x 144 pixels -->
2012-11-20T19:50:31+00:00 app[web.1]: 
2012-11-20T19:50:31+00:00 app[web.1]:     21:     <!-- For iPhone with high-resolution Retina display: -->
2012-11-20T19:50:31+00:00 app[web.1]: Processing by PagesController#home as HTML
2012-11-20T19:50:31+00:00 app[web.1]: Started GET "/" for 66.25.149.26 at 2012-11-20 19:50:31 +0000
2012-11-20T19:50:31+00:00 app[web.1]:     17:     <!-- For third-generation iPad with high-resolution Retina display: -->
2012-11-20T19:50:31+00:00 app[web.1]: ActionView::Template::Error (images/apple-touch-icon-144x144-precomposed.png isn't precompiled):
2012-11-20T19:50:31+00:00 app[web.1]:     16: 
2012-11-20T19:50:31+00:00 app[web.1]:   app/views/layouts/application.html.erb:19:in `_app_views_layouts_application_html_erb__4485189738011654672_31063660'
2012-11-20T19:50:31+00:00 app[web.1]: Completed 500 Internal Server Error in 1ms
2012-11-20T19:50:31+00:00 app[web.1]:     22:     <!-- Size should be 114 x 114 pixels -->
2012-11-20T19:50:31+00:00 app[web.1]:     19:     <%= favicon_link_tag 'images/apple-touch-icon-144x144-precomposed.png', :rel => 'apple-touch-icon-precomposed', :type => 'image/png', :sizes => '144x144' %>
2012-11-20T19:50:31+00:00 app[web.1]: 
2012-11-20T19:54:14+00:00 heroku[router]: at=info method=GET path=/ host=mapmystyle.herokuapp.com fwd= dyno=web.1 queue=0 wait=0ms connect=1ms service=8ms status=500 bytes=643
2012-11-20T19:54:14+00:00 app[web.1]: Completed 500 Internal Server Error in 2ms
2012-11-20T19:54:14+00:00 app[web.1]:     16: 
2012-11-20T19:54:14+00:00 app[web.1]:     17:     <!-- For third-generation iPad with high-resolution Retina display: -->
2012-11-20T19:54:14+00:00 app[web.1]: 
2012-11-20T19:54:14+00:00 app[web.1]: 
2012-11-20T19:54:14+00:00 app[web.1]: ActionView::Template::Error (images/apple-touch-icon-144x144-precomposed.png isn't precompiled):
2012-11-20T19:54:14+00:00 app[web.1]:     21:     <!-- For iPhone with high-resolution Retina display: -->
2012-11-20T19:54:14+00:00 app[web.1]: 
2012-11-20T19:54:14+00:00 app[web.1]:     20: 
2012-11-20T19:54:14+00:00 app[web.1]: Started GET "/" for 66.25.149.26 at 2012-11-20 19:54:14 +0000
2012-11-20T19:54:14+00:00 app[web.1]: Processing by PagesController#home as HTML
2012-11-20T19:54:14+00:00 app[web.1]:     22:     <!-- Size should be 114 x 114 pixels -->
2012-11-20T19:54:14+00:00 app[web.1]:   Rendered pages/home.html.erb within layouts/application (0.2ms)
2012-11-20T19:54:14+00:00 app[web.1]:     18:     <!-- Size should be 144 x 144 pixels -->
2012-11-20T19:54:14+00:00 app[web.1]:     19:     <%= favicon_link_tag 'images/apple-touch-icon-144x144-precomposed.png', :rel => 'apple-touch-icon-precomposed', :type => 'image/png', :sizes => '144x144' %>
2012-11-20T19:54:14+00:00 app[web.1]: 
2012-11-20T19:54:14+00:00 app[web.1]:   app/views/layouts/application.html.erb:19:in `_app_views_layouts_application_html_erb__4485189738011654672_31063660'
2012-11-20T19:54:14+00:00 app[web.1]: 
2012-11-20T19:54:14+00:00 heroku[router]: at=info method=GET path=/favicon.ico host=mapmystyle.herokuapp.com fwd= dyno=web.1 queue=0 wait=0ms connect=1ms service=8ms status=200 bytes=0
2012-11-20T19:55:36+00:00 app[web.1]:     16: 
2012-11-20T19:55:36+00:00 heroku[router]: at=info method=GET path=/ host=mapmystyle.herokuapp.com fwd= dyno=web.1 queue=0 wait=7ms connect=32ms service=80ms status=500 bytes=643
2012-11-20T19:55:36+00:00 app[web.1]: 
2012-11-20T19:55:36+00:00 app[web.1]:     18:     <!-- Size should be 144 x 144 pixels -->
2012-11-20T19:55:36+00:00 app[web.1]:     21:     <!-- For iPhone with high-resolution Retina display: -->
2012-11-20T19:55:36+00:00 app[web.1]: Processing by PagesController#home as HTML
2012-11-20T19:55:36+00:00 app[web.1]:   Rendered pages/home.html.erb within layouts/application (0.2ms)
2012-11-20T19:55:36+00:00 app[web.1]: Completed 500 Internal Server Error in 2ms
2012-11-20T19:55:36+00:00 app[web.1]: 
2012-11-20T19:55:36+00:00 app[web.1]: ActionView::Template::Error (images/apple-touch-icon-144x144-precomposed.png isn't precompiled):
2012-11-20T19:55:36+00:00 app[web.1]:   app/views/layouts/application.html.erb:19:in `_app_views_layouts_application_html_erb__4485189738011654672_31063660'
2012-11-20T19:55:36+00:00 app[web.1]:     22:     <!-- Size should be 114 x 114 pixels -->
2012-11-20T19:55:36+00:00 app[web.1]: Started GET "/" for 66.25.149.26 at 2012-11-20 19:55:36 +0000
2012-11-20T19:55:36+00:00 app[web.1]: 
2012-11-20T19:55:36+00:00 app[web.1]:     19:     <%= favicon_link_tag 'images/apple-touch-icon-144x144-precomposed.png', :rel => 'apple-touch-icon-precomposed', :type => 'image/png', :sizes => '144x144' %>
2012-11-20T19:55:36+00:00 app[web.1]:     20: 
2012-11-20T19:55:36+00:00 app[web.1]: 
2012-11-20T19:55:36+00:00 app[web.1]:     17:     <!-- For third-generation iPad with high-resolution Retina display: -->
2012-11-20T19:55:36+00:00 app[web.1]: 
2012-11-20T19:59:39+00:00 heroku[router]: at=info method=GET path=/ host=mapmystyle.herokuapp.com fwd= dyno=web.1 queue=0 wait=0ms connect=1ms service=9ms status=500 bytes=643
2012-11-20T19:59:39+00:00 app[web.1]: 
2012-11-20T19:59:39+00:00 app[web.1]:   Rendered pages/home.html.erb within layouts/application (0.2ms)
2012-11-20T19:59:39+00:00 app[web.1]: 
2012-11-20T19:59:39+00:00 app[web.1]:     17:     <!-- For third-generation iPad with high-resolution Retina display: -->
2012-11-20T19:59:39+00:00 app[web.1]: 
2012-11-20T19:59:39+00:00 app[web.1]: Started GET "/" for 66.25.149.26 at 2012-11-20 19:59:39 +0000
2012-11-20T19:59:39+00:00 app[web.1]: Processing by PagesController#home as HTML
2012-11-20T19:59:39+00:00 app[web.1]: Completed 500 Internal Server Error in 2ms
2012-11-20T19:59:39+00:00 app[web.1]:     16: 
2012-11-20T19:59:39+00:00 app[web.1]:     20: 
2012-11-20T19:59:39+00:00 app[web.1]:     22:     <!-- Size should be 114 x 114 pixels -->
2012-11-20T19:59:39+00:00 app[web.1]:     21:     <!-- For iPhone with high-resolution Retina display: -->
2012-11-20T19:59:39+00:00 app[web.1]:     19:     <%= favicon_link_tag 'images/apple-touch-icon-144x144-precomposed.png', :rel => 'apple-touch-icon-precomposed', :type => 'image/png', :sizes => '144x144' %>
2012-11-20T19:59:39+00:00 app[web.1]: ActionView::Template::Error (images/apple-touch-icon-144x144-precomposed.png isn't precompiled):
2012-11-20T19:59:39+00:00 app[web.1]:     18:     <!-- Size should be 144 x 144 pixels -->
2012-11-20T19:59:39+00:00 app[web.1]: 
2012-11-20T19:59:39+00:00 app[web.1]: 
2012-11-20T19:59:39+00:00 app[web.1]:   app/views/layouts/application.html.erb:19:in `_app_views_layouts_application_html_erb__4485189738011654672_31063660' 
```

我正在使用 twitter_bootstrap。--- 初始修复后更新：

我让 heroku 开始运行，但是当我让 ti 显示数据库中的参数时它停止了。这一切都在本地工作。我找不到可能是什么问题。有人说重新启动heroku，我这样做了，但无济于事。

这是新的日志。

```
2012-11-20T21:39:39+00:00 heroku[web.1]: State changed from up to down
2012-11-20T21:39:39+00:00 heroku[web.1]: State changed from down to starting
2012-11-20T21:39:42+00:00 heroku[web.1]: Stopping all processes with SIGTERM
2012-11-20T21:39:44+00:00 heroku[web.1]: Process exited with status 0
2012-11-20T21:39:53+00:00 heroku[web.1]: State changed from starting to up
2012-11-20T21:40:02+00:00 heroku[router]: at=info method=GET path=/ host=mapmystyle.herokuapp.com fwd= dyno=web.1 queue=0 wait=4ms connect=21ms service=185ms status=304 bytes=0
2012-11-20T21:40:03+00:00 heroku[router]: at=info method=GET path=/assets/application-fbdaadfcf0bb7bb383cee6f4c1e1c57b.js host=mapmystyle.herokuapp.com fwd= dyno=web.1 queue=0 wait=1ms connect=6ms service=3ms status=304 bytes=0
2012-11-20T21:40:03+00:00 heroku[router]: at=info method=GET path=/assets/application-9b102f3d65ffd824f6d66380b37af1d3.css host=mapmystyle.herokuapp.com fwd= dyno=web.1 queue=0 wait=0ms connect=2ms service=4ms status=304 bytes=0
2012-11-20T21:40:05+00:00 heroku[router]: at=info method=GET path=/newstyle host=mapmystyle.herokuapp.com fwd= dyno=web.1 queue=0 wait=2ms connect=14ms service=505ms status=304 bytes=0
2012-11-20T21:40:12+00:00 heroku[router]: at=info method=POST path=/styles host=mapmystyle.herokuapp.com fwd= dyno=web.1 queue=0 wait=0ms connect=1ms service=49ms status=302 bytes=106
2012-11-20T21:40:12+00:00 heroku[router]: at=info method=GET path=/styles/3 host=mapmystyle.herokuapp.com fwd= dyno=web.1 queue=0 wait=3ms connect=18ms service=99ms status=500 bytes=643
2012-11-20T21:41:24+00:00 heroku[web.1]: State changed from up to down
2012-11-20T21:41:24+00:00 heroku[web.1]: State changed from down to starting
2012-11-20T21:41:26+00:00 heroku[web.1]: Starting process with command `bundle exec thin start -R config.ru -e production -p 29507`
2012-11-20T21:41:29+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-11-20T21:41:29+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-11-20T21:41:34+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
2012-11-20T21:41:34+00:00 app[web.1]: >> Maximum connections set to 1024
2012-11-20T21:41:34+00:00 app[web.1]: >> Listening on 0.0.0.0:29507, CTRL+C to stop
2012-11-20T21:41:34+00:00 app[web.1]: >> Thin web server (v1.5.0 codename Knife)
2012-11-20T21:41:35+00:00 heroku[web.1]: State changed from starting to up
2012-11-20T21:41:36+00:00 app[web.1]: 
2012-11-20T21:41:36+00:00 app[web.1]: 
2012-11-20T21:41:36+00:00 app[web.1]: Started GET "/" for 66.25.149.26 at 2012-11-20 21:41:36 +0000
2012-11-20T21:41:37+00:00 app[web.1]: Processing by PagesController#home as HTML
2012-11-20T21:41:38+00:00 app[web.1]:   Rendered pages/home.html.erb within layouts/application (9.3ms)
2012-11-20T21:41:38+00:00 app[web.1]: Completed 200 OK in 231ms (Views: 230.4ms | ActiveRecord: 0.0ms)
2012-11-20T21:41:38+00:00 heroku[router]: at=info method=GET path=/assets/application-9b102f3d65ffd824f6d66380b37af1d3.css host=mapmystyle.herokuapp.com fwd= dyno=web.1 queue=0 wait=0ms connect=1ms service=41ms status=304 bytes=0
2012-11-20T21:41:38+00:00 heroku[router]: at=info method=GET path=/assets/application-fbdaadfcf0bb7bb383cee6f4c1e1c57b.js host=mapmystyle.herokuapp.com fwd= dyno=web.1 queue=0 wait=0ms connect=1ms service=106ms status=304 bytes=0
2012-11-20T21:41:40+00:00 app[web.1]: Processing by StylesController#new as HTML
2012-11-20T21:41:40+00:00 app[web.1]: Started GET "/newstyle" for 66.25.149.26 at 2012-11-20 21:41:40 +0000
2012-11-20T21:41:40+00:00 app[web.1]: 
2012-11-20T21:41:40+00:00 app[web.1]: 
2012-11-20T21:41:41+00:00 app[web.1]:   Rendered styles/new.html.erb within layouts/application (696.9ms)
2012-11-20T21:41:41+00:00 app[web.1]: Completed 200 OK in 1030ms (Views: 711.3ms | ActiveRecord: 29.8ms)
2012-11-20T21:41:41+00:00 app[web.1]:   Rendered styles/_form.html.erb (678.3ms)
2012-11-20T21:41:48+00:00 app[web.1]: Started POST "/styles" for 66.25.149.26 at 2012-11-20 21:41:48 +0000
2012-11-20T21:41:48+00:00 app[web.1]: 
2012-11-20T21:41:48+00:00 app[web.1]: Processing by StylesController#create as HTML
2012-11-20T21:41:48+00:00 app[web.1]: 
2012-11-20T21:41:48+00:00 app[web.1]:   Parameters: {"utf8"=>"✓", "authenticity_token"=>"WEpGdTD2B9P9pJOelseHsxDwVxU3ph3sbDeZPWPNXHc=", "style"=>{"bodytype"=>"Hourglass", "need"=>"Office", "texture"=>"Rich", "color"=>"Bright", "statement"=>"Shoe"}, "commit"=>"Create Recommendation"}
2012-11-20T21:41:48+00:00 app[web.1]: Redirected to http://mapmystyle.herokuapp.com/styles/4
2012-11-20T21:41:48+00:00 app[web.1]: Completed 302 Found in 65ms (ActiveRecord: 35.7ms)
2012-11-20T21:41:48+00:00 app[web.1]: 
2012-11-20T21:41:48+00:00 app[web.1]: Started GET "/styles/4" for 66.25.149.26 at 2012-11-20 21:41:48 +0000
2012-11-20T21:41:48+00:00 app[web.1]: 
2012-11-20T21:41:49+00:00 app[web.1]: Processing by StylesController#show as HTML
2012-11-20T21:41:49+00:00 app[web.1]:   Parameters: {"id"=>"4"}
2012-11-20T21:41:49+00:00 app[web.1]: Completed 500 Internal Server Error in 509ms
2012-11-20T21:41:49+00:00 app[web.1]:   app/controllers/styles_controller.rb:28:in `show'
2012-11-20T21:41:49+00:00 app[web.1]: 
2012-11-20T21:41:49+00:00 app[web.1]: 
2012-11-20T21:41:49+00:00 app[web.1]: NoMethodError (undefined method `link' for nil:NilClass):
2012-11-20T21:41:49+00:00 app[web.1]: 
2012-11-20T21:41:49+00:00 heroku[router]: at=info method=GET path=/styles/4 host=mapmystyle.herokuapp.com fwd= dyno=web.1 queue=0 wait=0ms connect=1ms service=641ms status=500 bytes=643 
```

请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T20:34:16.290

它说

```
images/apple-touch-icon-144x144-precomposed.png isn't precompiled 
```

这就是错误。

将此行放入 config/application.rb 文件中

```
config.assets.initialize_on_precompile = false 
```

如果您有 application.js 和 application.css 中不需要的其他 .js 或 .css 文件

例如 public.js 和 public.css

将此行添加到 production.rb 文件中（也添加了注释。）

```
# Precompile additional assets (application.js, application.css, and all non-JS/CSS are already added)
config.assets.precompile += %w( public.js public.css  ) 
```

`bundle exec rake assets:precompile`在本地代码上运行

你有任何错误吗？

如果不。

提交更改并部署到 heroku

# android - 我可以将已安装应用程序中的小部件添加到我的应用程序活动中吗

> ID：13481503
> 
> 赞同：3
> 
> 时间：2012-11-20T20:25:04.260
> 
> 标签：android, android-widget

我正在尝试为设备开发一个 android 应用程序（设备不是平板电脑或手机，它是运行 Android 4.1.1 的预配置 android 板），其中一个活动需要显示几种类型信息的自定义仪表板，如下所示 ![在此处输入图像描述](../Images/444a61f6e9a3e69c7270bfd0841dac2e.png)

此处显示的信息类型是预先配置的。我计划安装具有小部件（如天气和日历）并在我的布局中包含小部件的应用程序，而不是从头开始开发所有这些。

我参考了以下链接

[将小部件添加到我自己的应用程序中。- Android](https://stackoverflow.com/questions/8366388/add-widgets-into-my-own-application-android)

[http://www.anddev.org/appwidgethost_tutorial-t10329.html](http://www.anddev.org/appwidgethost_tutorial-t10329.html)

我完成了大部分代码。

```
public class MainActivity extends Activity {

    private AppWidgetManager mAppWidgetManager;
    private AppWidgetHost mAppWidgetHost;
    static final int APPWIDGET_HOST_ID = 2037;
    private AppWidgetHostView widgets[] = new AppWidgetHostView[16];

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mAppWidgetManager = AppWidgetManager.getInstance(this);
        mAppWidgetHost = new AppWidgetHost(this, APPWIDGET_HOST_ID);

        setContentView(r.id.layout_main);

    ****here is where I am stuck??****
        int [] ids = AppWidgetManager.getInstance(context).getAppWidgetIds(name);

        mAppWidgetHost.startListening();

    } 
```

但是我卡住的地方是，我如何指定小部件管理器来获取我想要的特定小部件。假设我对小部件 **“com.android.deskclock/com.android.alarmclock.AnalogAppWidgetProvider”感兴趣**

请指教。

* * *

**更新：** 我添加了以下代码

```
 mAppWidgetManager = AppWidgetManager.getInstance(this);
        mAppWidgetHost = new AppWidgetHost(this, APPWIDGET_HOST_ID);
        int appWidgetId = mAppWidgetHost.allocateAppWidgetId();
        ComponentName name = new ComponentName("com.android.deskclock","com.android.alarmclock.AnalogAppWidgetProvider");

        int [] ids = mAppWidgetManager.getAppWidgetIds(name);

        if(ids != null && ids.length>0){
            System.err.println("Number of widget ids :"+ids.length);
            AppWidgetProviderInfo appWidgetInfo = mAppWidgetManager.getAppWidgetInfo(ids[0]);
            appWidgetId = ids[0];
            LinearLayout parent= (LinearLayout) findViewById(R.id.generalDashboardLayout);
            parent.addView(mAppWidgetHost.createView(this, appWidgetId, appWidgetInfo));
        }else{
            System.err.println("Ids is null");
        } 
```

它总是打印“Ids is null” 它没有找到要添加到我的视图的小部件

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T21:50:37.917

最后我使用下面的代码解决了这个问题

```
mAppWidgetManager = AppWidgetManager.getInstance(this);
        mAppWidgetHost = new AppWidgetHost(this, APPWIDGET_HOST_ID);
        int appWidgetId = mAppWidgetHost.allocateAppWidgetId();
        ComponentName name = new ComponentName("com.android.deskclock","com.android.alarmclock.AnalogAppWidgetProvider");

        int [] ids = mAppWidgetManager.getAppWidgetIds(name);

        if(ids != null && ids.length>0){
            System.err.println("Number of widget ids :"+ids.length);
            AppWidgetProviderInfo appWidgetInfo = mAppWidgetManager.getAppWidgetInfo(ids[0]);
            appWidgetId = ids[0];
            LinearLayout parent= (LinearLayout) findViewById(R.id.generalDashboardLayout);
            parent.addView(mAppWidgetHost.createView(this, appWidgetId, appWidgetInfo));
        }else{
            System.err.println("Ids is null");
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T20:37:37.473

是的你可以。您需要使用[AppWidgetHost](http://developer.android.com/reference/android/appwidget/AppWidgetHost.html)类，就像所有主屏幕应用程序一样。

这是一个源代码主屏幕应用程序，您可以使用它来学习如何使用它。 [http://code.google.com/p/android-launcher-plus/](http://code.google.com/p/android-launcher-plus/)

# java - 在 Java 中创建一个 NSStatusItem/Menubar 应用程序

> ID：13481504
> 
> 赞同：8
> 
> 时间：2012-11-20T20:25:05.713
> 
> 标签：java, macos, statusbar, menubar

我正在尝试在 Java 中模拟 Objective C 的 NSStatusItem 功能。也就是说，我正在尝试编写一个位于 Mac 菜单栏中的 Java 应用程序，[如下所示](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/StatusBar/Concepts/Art/statusbar.gif)。[这是](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/StatusBar/StatusBar.html)Apple 在 StatusBar 上的文档的链接。

有什么方法可以在 Java 中做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T23:52:07.353

使用[java.awt.SystemTray](http://docs.oracle.com/javase/6/docs/api/java/awt/SystemTray.html)。我已经确认它可以在 OS X Lion 上运行。根据[这个问题](https://stackoverflow.com/questions/3381178/swt-systemtray-in-osx)，也可以使用 SWT。

例子：

```
import java.awt.AWTException;
import java.awt.Image;
import java.awt.MenuItem;
import java.awt.PopupMenu;
import java.awt.SystemTray;
import java.awt.Toolkit;
import java.awt.TrayIcon;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.net.MalformedURLException;
import java.net.URL;

public class MenuBarIconTest {
    public static void main(String[] args) throws MalformedURLException {
        TrayIcon trayIcon = null;
         if (SystemTray.isSupported()) {
             // get the SystemTray instance
             SystemTray tray = SystemTray.getSystemTray();
             // load an image
             Image image = Toolkit.getDefaultToolkit().getImage(new URL("http://cdn1.iconfinder.com/data/icons/Hypic_Icon_Pack_by_shlyapnikova/16/forum_16.png"));
             // create a action listener to listen for default action executed on the tray icon
             ActionListener listener = new ActionListener() {
                 public void actionPerformed(ActionEvent e) {
                     System.out.println("action");
                     // execute default action of the application
                     // ...
                 }
             };
             // create a popup menu
             PopupMenu popup = new PopupMenu();
             // create menu item for the default action
             MenuItem defaultItem = new MenuItem("Do the action");
             defaultItem.addActionListener(listener);
             popup.add(defaultItem);
             /// ... add other items
             // construct a TrayIcon
             trayIcon = new TrayIcon(image, "Tray Demo", popup);
             // set the TrayIcon properties
             trayIcon.addActionListener(listener);
             // ...
             // add the tray image
             try {
                 tray.add(trayIcon);
             } catch (AWTException e) {
                 System.err.println(e);
             }
             // ...
         } else {
             // disable tray option in your application or
             // perform other actions
             //...
         }
         // ...
         // some time later
         // the application state has changed - update the image
         if (trayIcon != null) {
             //trayIcon.setImage(updatedImage);
         }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-27T00:58:54.510

有一个 NICE 库可以做到这一点……我见过的最好的库将 SWIFT 的菜单栏访问功能与 JavaFX 集成在一起……因为 FX 没有本地方法来处理菜单栏。

如果你有兴趣，[这里是链接。](https://github.com/dustinkredmond/FXTrayIcon)

# java - 计算数组中值的总和

> ID：13481506
> 
> 赞同：1
> 
> 时间：2012-11-20T20:25:08.730
> 
> 标签：java, arrays, math

我遇到的问题是，oddSum 输出的值与 evenSum 相同，并且所有元素的总和值为 0。

我不能完全看出我哪里出错了，因为循环非常相似，如果即使一个也可以工作，其他人也应该？

无论如何，这是我的代码：

```
int evenData[] = new int [10];
int oddData[] = new int [10];
int sum = 0;
int evenSum = 0;
int oddSum = 0;

int[] data = {3, 2, 5, 7, 9, 12, 97, 24, 54};
for(int index = 0; index < data.length; index++)
{
    if (data[index] % 2 == 0)
    {

        int temp = data[index];
        data[index] = evenData[index];
        evenData[index] = temp;

    }

    else
    {
        int temp = data[index];
        data[index] = oddData[index];
        oddData[index] = temp;
    }

}
for(int evenIndex = 0; evenIndex < evenData.length; evenIndex++)
{

    evenSum =evenData[evenIndex] + evenSum;

}
System.out.print("Sum of even elements: " + evenSum);

for(int oddIndex = 0; oddIndex < oddData.length; oddIndex++)
{

    oddSum = oddData[oddIndex] + oddSum;

}
System.out.print("Sum of odd elements: " + oddSum);

for(int index = 0; index < data.length; index++)
{
    sum = data[index] + sum;
}
System.out.print("Sum of all elements: " + sum); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T20:27:49.300

你得到相同的价值`even`，`odd`因为你正在打印相同的价值： -

```
System.out.print("Sum of odd elements: " + evenSum); 
```

此外，您的最终总和是`zero`因为您将原始数组的所有元素制作为`zero`，因为您将元素与 和 中的元素交换`evenData`，`oddData`最初为零。

```
int temp = data[index];
data[index] = evenData[index]; // This code assigns a value 0 to current index.
evenData[index] = temp; 
```

因此，您正在迭代您的数组，并分配`0`给您的每个索引，同时将前一个元素添加到`new array`.

* * *

我会说你不必要地使用了 2 个额外的数组和 3 个额外的循环。为什么不在迭代原始数组的地方创建一个总和？

事实上，你所有的总和都可以在一个循环中计算出来：-

```
for(int index = 0; index < data.length; index++)
{
    sum += data[index];

    if (data[index] % 2 == 0)
    {
        // int temp = data[index];
        // data[index] = evenData[index];
        // evenData[index] = temp;

        evenSum += data[index];
    }
    else
    {
        // int temp = data[index];
        // data[index] = oddData[index];
        // oddData[index] = temp;

        oddSum += data[index];  
    } 
}

System.out.println("Even Sum: "  + evenSum);
System.out.println("Odd Sum: "  + oddSum);
System.out.println("Total Sum: "  + sum); 
```

因此，您不需要为`even`和`odd`数字创建额外的数组。

而且，您`4 loops`现在也已压缩为一个循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T20:46:25.363

```
int temp = data[index]; 
data[index] = evenData[index]; 
evenData[index] = temp; 
```

查看上面的行，evenDate 为空，在第二行中，您将数据数组设置为空。您也在oddDate 行中重复同样的错误。

你为什么不使用只是尝试以下？

```
 for(int index = 0; index < data.length; index++)
    { 
        if (data[index] % 2 == 0) { 
            int temp = data[index]; 
            evenData[index] = temp;

        } else { 
            int temp = data[index]; 
            oddData[index] = temp; } 
        } 
    }

    for(int evenIndex = 0; evenIndex < evenData.length; evenIndex++) 
    { 
        //since length of all 3 data,even, odd arrays are the same
        //you can put both sum operation in one for loop

        evenSum = evenData[evenIndex] + evenSum; 
        oddSum = oddData[evenIndex] + oddSum; 
        sum = data[evenIndex] + sum;  
    }

    System.out.print("Sum of even elements: " + evenSum); 
    //you have put evenSum for below odeUm printing in ur code
    System.out.print("Sum of odd elements: " + oddSum); 
    System.out.print("Sum of all elements: " + sum); 
```

# jquery - jQuery 延迟在此示例中无法正常工作

> ID：13481510
> 
> 赞同：0
> 
> 时间：2012-11-20T20:25:21.177
> 
> 标签：jquery, css, slidedown

我对 jQuery 延迟（）有疑问。它根本不起作用。我过去使用过这个功能，它正在工作。我认为CSS中可能有一些东西，但我真的找不到。

这是一个jQuery代码：

```
$(document).ready(function(){
 function delay() {
   $('.delay').slideDown(500);
  }
  setTimeout(delay, 2500);
}); 
```

这是 HTML 的代码：

```
 <div id="header">
        <img src="http://test.captive-portal.com/slideup/_images/header.png">
  </div>

    <div class="delay">
        <div class="spons"><img src="http://test.captive-portal.com/slideup/_images/brought-by.jpg"></div>          

        <div class="overflow">

            <div id="nav">

                <a href="#"><div class="menu-button1"><img src="http://test.captive-portal.com/slideup/_images/own-ad1.jpg"></div></a>
                <a href="#"><div class="menu-button"><img src="http://test.captive-portal.com/slideup/_images/b1.jpg"></div></a>
                <a href="#"><div class="menu-button"><img src="http://test.captive-portal.com/slideup/_images/b2.jpg"></div></a>
                <a href="#"><div class="menu-button"><img src="http://test.captive-portal.com/slideup/_images/b3.jpg"></div></a>
                <a href="#"><div class="menu-button"><img src="http://test.captive-portal.com/slideup/_images/b4.jpg"></div></a>

            </div>

        </div>        
        <div id="finalbut">
            <a href="access-ok.html"><img src="http://test.captive-portal.com/slideup/_images/butt-go-online.png"></a>
        </div>

  </div>

</div> 
```

CSS（如果需要，可能会导致问题）在这里：[CSS HERE](http://test.captive-portal.com/slideup/_css/menu.css)

jsFiddle 中的所有内容都在这里：[jsFiddle](http://jsfiddle.net/tucado/DJt7c/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T20:27:50.620

您需要先隐藏它，然后才能显示它：

```
$(document).ready(function(){
    $('.delay').hide();
    function delay() {
        $('.delay').slideDown(500);
    }
    setTimeout(delay, 2500);
}); 
```

更简洁：

```
$(document).ready(function(){
    $('.delay').hide().delay(2500).slideDown(500);
}); 
```

# excel - Excel，为多行添加特定列

> ID：13481513
> 
> 赞同：0
> 
> 时间：2012-11-20T20:25:38.800
> 
> 标签：excel, sum, row, excel-formula

如果我有一张这样的桌子：

```
 |A|B|C|D|
1 |1|0|1|
2 |4|4|2|
3 |7|2|3|
4 |5|7|2|
5 |3|9|1| 
```

是否可以将 A 列与 C 列相加，并在 D "=SUM(A1,C3)" 中显示结果但我想将其自动化约 50 行，以便：

```
D1=SUM(A1,C3), D2=SUM(A2,C2), D3=SUM(A3,C3)...D50=SUM(A50,C50) 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T05:44:09.867

如果通过*但我想自动化这个*你的意思是 VBA，那么试试这个

```
Sub Demo()
    Dim rng As Range
    ' Set rng to the required range, by whatever means needed
    Set rng = [D1:D50]
    ' Set Formulas of the range
    rng.FormulaR1C1 = "=SUM(RC[-3],RC[-1])"
End Sub 
```

# algorithm - 0-1 有额外限制的背包（有色物品）？

> ID：13481516
> 
> 赞同：2
> 
> 时间：2012-11-20T20:25:48.173
> 
> 标签：algorithm, knapsack-problem

我正在研究这个问题，主要是出于对工作停机时间的好奇。

想象一下正常的 0-1 背包问题，除了所有物品都是黄色、红色、蓝色或绿色，并且由于您的强迫症，您的背包中每种颜色的物品必须恰好有 2 件。因此，每个项目都有 3 个属性，而不是普通项目：重量、值、颜色。

这甚至仍然是一个背包问题，还是以其他方式更好地定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T21:08:04.220

`nCk`为了便于输入，我将使用“n 选择 k”来表示。由于每种颜色必须恰好有 2 个项目，因此可行解的数量为 O(· `nC2`)，即 O(· `n^2`)。每个解决方案都可以在多项式时间内进行评估，因此问题也可以在多项式时间内解决。换句话说，它比普通的背包问题要简单得多。

# sqlite - Sqlite 可选参数？

> ID：13481522
> 
> 赞同：1
> 
> 时间：2012-11-20T20:26:10.747
> 
> 标签：sqlite, insert

我有一个日志表，使用 System.Data.Sqlite（.NET 4.5 上的 C#）写入包含 12 列的单个表。有些列可能会写成一行，有些可能不会。有没有办法让一个参数化的 Insert 语句，只指定 n 个参数，让其余的自动设置为 null？

我正在考虑相当于 MS SQL Server 存储过程，其中多个输入参数可以指定为空，然后存储过程中的单个插入语句将根据需要插入空值。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T21:33:15.450

使用`null`或`DBNull.Value`；请参阅 [NULL 值和 SQLiteParameters](http://sqlite.phxsoftware.com/forums/p/37/96.aspx)。

# python-2.7 - 友谊模型：如何判断友谊是否存在？

> ID：13481526
> 
> 赞同：1
> 
> 时间：2012-11-20T20:26:15.203
> 
> 标签：python-2.7, google-app-engine, model

我有以下型号

```
class User(db.Model):
    name = db.StringProperty(require=True)

class Friendship(db.Model):
    user1 = db.ReferenceProperty(User, collection_name='user1_set')
    user2 = db.ReferenceProperty(User, collection_name='user2_set') 
```

我可以建立朋友和友谊。但是如何检查友谊是否存在呢？有没有更好的方法来模拟友谊？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:39:59.320

让朋友成为 ListProperty：

```
class Friendship(db.Model):
    friends = db.ListProperty(db.Key) # db.Key refers to a user 
```

然后是一个简单的查询来查找两个用户之间的友谊：

```
def getFriendship(self, userKey1, userKey2):
    query = Friendship.gql("WHERE friends = :1 AND friends = :2", userKey1, userKey2)
    return query.get() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T20:49:46.333

这会很好，但你需要具体说明你如何定义友谊。考虑以下用户：

```
a = User(name='a')
a.put()

b = User(name='b')
b.put() 
```

您可以`Friendship`为每个友谊创建两个条目并查询其中一个以检查友谊的存在。

```
f = Friendship(user1=a, user2=b)
f.put()

f = Friendship(user1=b, user2=a)
f.put()

result = db.GqlQuery("SELECT * FROM Friendship WHERE user1 = :1 AND user2 = :2", a, b).get() 
```

或者，您可以在`Friendship`每次要检查关系是否存在时进行一次查询并执行两次查询：

```
f = Friendship(user1=a, user2=b)
f.put()

result = db.GqlQuery("SELECT * FROM Friendship WHERE user1 = :1 AND user2 = :2", a, b).get()
if result is None:
  result = db.GqlQuery("SELECT * FROM Friendship WHERE user1 = :1 AND user2 = :2", b, a).get() 
```

或者，您可以对定义的顺序制定规则`Friendship`（例如要求较低的字母名称在前）：

```
f = Friendship(user1=a, user2=b) // 'a' is less than 'b'
f.put()

result = db.GqlQuery("SELECT * FROM Friendship WHERE user1 = :1 AND user2 = :2", a, b).get() // 'a' is less than 'b' 
```

最后一个选项是最有效的，假设您的排序并不复杂，但您需要担心边缘情况（例如两个名为 John Smith 的用户）。散列名称加上其他一些属性（例如用户注册时），然后比较它，将减少但不会阻止这种可能性。

# html - 在 HTML / CSS 中显示 png 图像，如图表

> ID：13481530
> 
> 赞同：1
> 
> 时间：2012-11-20T20:26:22.603
> 
> 标签：html, css, image

我制作了一堆图表和表格，并以 png 格式保存，以便在使用 HTML / CSS / Javascript 创建的基于 Web 的实验中作为刺激呈现。我怎样才能让它们在显示时看起来很清晰？

以下是它们现在在实验中显示时的样子：

![样本](../Images/0ec2e29a3c3db91eb78cc41ae1cb2e03.png)

如您所见，线条参差不齐，有时甚至细到消失，文本也有类似的问题。我猜这是因为 png 图像的“自然”尺寸（大约 3500x2500 像素）大于它们的显示尺寸（大约 200 像素高），但我觉得应该有一些方法可以在显示时解决这个问题，而无需手动调整所有尺寸图像。

这是一些历史：这些都是在 Excel 中制作的，然后复制到 Powerpoint 并保存为图像。本来我是直接从Powerpoint中保存的，默认是.jpg格式，出来的时候很模糊。然后我尝试保存到 .emf 并使用 IrfanView 重新保存为 .png。当通过任何图像查看器以自然（大）尺寸查看时，生成的 png 非常清晰，但是当我以更小的尺寸将它们嵌入到 html 中时，它们看起来非常糟糕，如上所示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T22:12:29.430

excel文件还有吗？如果是这样，您可以：

1.  将图表导出为 Excel 中的 pdf 文件；
2.  然后将pdf导入到矢量程序中，例如Inkscape；
3.  另存为`svg`，然后`svg`像使用图像标签一样引用文件（也可以直接嵌入）

当以 pdf 格式导入时，它们将是矢量图形，因此您可以根据需要进一步编辑一些点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T21:44:07.630

屏幕上的线条在小于 1 个像素的厚度下很难看起来很好。

因此，假设您的图像上有 3 个像素厚的元素。调整到 250 X 250 后，它们将是 0.3 像素厚 -> 不好。

那是什么造成了您在线条边缘和角落描述的不良影响。

为了解决这个问题，我看到了三个潜在的解决方案：

*   从原始来源制作具有较低分辨率的图像的其他副本（如 Excel 图表的屏幕截图，或任何其他允许您获得低分辨率位图的功能）
*   如果您有图表上显示的数字数据并且有时间学习一项很酷的技术，您可以使用图表库。这样你会得到更漂亮的渲染，因为它是矢量图。示例：[HighCharts](http://www.highcharts.com/)
*   最后也是更糟糕的解决方案：使用图像编辑器和适当的技能处理图像，以增加所有尖锐元素（如线条、点、箭头等）的粗细大小……

# ruby-on-rails - 使用 Ruby on Rails 或替代方法更新 Passbook Pass？

> ID：13481532
> 
> 赞同：1
> 
> 时间：2012-11-20T20:26:25.647
> 
> 标签：ruby-on-rails, passbook

我想知道我将如何更新我的通行证。我已经知道我需要一个 webServiceURL（我假设它是您的 IP 地址或 Ruby on Rails 上的一组或其他东西）和一个身份验证令牌。我更专注于我将如何实际更新它。有没有简单的方法可以解决这个问题？有点像那些创建网站的 iPhone 应用程序（但你不专业地编写代码）。我将对其进行更多研究，但互联网上没有太多可供选择的资源（很有用）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:36:05.347

如果您正在寻找所见即所得的点击式解决方案，您可能需要查看我们的服务[PassKit](https://create.passkit.com)。

要了解更新是如何工作的，您可以从[这个演示通行证](https://pass.is/krERrj)开始，将其翻转并推送更新。您可以将演示[模板直接导入通行证创建器，对其进行编辑，然后在 5 分钟内将更新推送到您自己的通行证。](https://create.passkit.com/loader/?t=LN5Ew6kkzxf4sW1ze3i0&c=1)

我们还有一个功能齐全的 API，允许您在一次调用中更新和推送新的通行证，例如

```
https://api.passkit.com/v1/pass/update/template/yourTemplateName/serial/yourPassSerial/push/?field_value1=newValue&field_value2=newValue2 
```

如果您想要一些代码来说明您的情况，您还可以访问我们的通行证创建页面的源代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-22T04:11:11.517

如果你要自己动手，我会使用 passbook-ios 或类似 Ruby Gem 的东西。如果您想使用 Urban Airship 提供的服务……虽然价格有点贵，每次 10 美分。

槊

# objective-c - 如何覆盖 webView 可以处理的重定向数量。Obj-C，可可

> ID：13481534
> 
> 赞同：1
> 
> 时间：2012-11-20T20:26:34.023
> 
> 标签：objective-c, cocoa, redirect, webview, overriding

这真的让我很烦。我有一个 webView，我正试图让它加载 drive.google.com。但是，由于该站点上的重定向数量众多，webView 什么也不做。我知道加载 webView 的代码有效，并且该 URL 是正确的，因为我收到了 didFailWithProvisionalLoadWithError 消息。这就是我知道这是重定向问题的方式。

我已经查看了所有内容，但找不到更改允许重定向数量的方法。我知道这是可能的，因为 Safari 可以处理它。必须有某种委托方法来覆盖。今天没有代码，因为我所有的搜索（总共 4 天）都让我一无所获。

如果有人有想法，请告诉我。仅供参考，这是可可（WebView）而不是可可触摸（UIWebView）。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T23:50:04.010

你一直在寻找的是

`– webView:decidePolicyForNavigationAction:request:frame:decisionListener:`

这是`WebPolicyDelegate`协议的一部分。

阅读 的文档`WebPolicyDelegate`，尤其是有关此委托方法的讨论。的文档`WebPolicyDecisionListener`描述了您可以发送给侦听器的消息。您可以在此委托方法中识别重定向，并且可以指示决策侦听器使用或忽略它。

**编辑：**

我很欣赏这 50 分，但如果我没有帮助你解决问题，我认为我不应该得到它们，这足以促使我坐下来尝试你的问题。

我构建了一个小型应用程序，它不是基于文档的，或者使用 ARC 或垃圾收集。我在 MainMenu.xib 文件中关闭了 Auto Layout，并在其中简单地放置了一个 WebView 实例。我修改了 AppDelegate 以包含 WebView 实例的出口。

然后我像这样创建了充实的`-applicationDidFinishLaunching:`存根：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    NSString *urlString = @"http://drive.google.com";
    NSURL *url = [NSURL URLWithString:urlString];
    NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url];

    [[[self webView] mainFrame] loadRequest:urlRequest];
} 
```

如果我收到重定向，它们似乎不会影响我显示页面的能力。

我们是否在同一页上（没有双关语）？

**编辑2：**

好消息（或坏消息，取决于你的 POV）：重定向从来都不是问题（尽管它们确实有助于阐明真正发生的事情）。

谈到 Google Drive，WebView 不是经过批准的浏览器。但是，您可以通过修改用户代理字符串来解决这个问题（注意，如下）。这是修改后的代码：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    NSString *urlString = @"http://drive.google.com";
    NSURL *url = [NSURL URLWithString:urlString];

    NSString *customUserAgent = [NSString stringWithFormat:@"%@ Version/6.0.2 Safari/8536.26.17", [[self webView] userAgentForURL:url]];

    [[self webView] setCustomUserAgent:customUserAgent];

    NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url];

    [[[self webView] mainFrame] loadRequest:urlRequest];
} 
```

注意：用户界面看起来功能齐全，但即便如此，谷歌可能会改变其确定浏览器是什么的方式并破坏此方案，因此请考虑自己警告。您可能想探索他们的 SDK 以获得访问 Google Drive 的可能替代方法。

一如既往，祝您工作顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:36:44.013

根据 Apple 文档中的 WebView 参考类，您必须设置一个符合 webframeloaddelegate 协议的委托。

```
[webView setFrameLoadDelegate:object]; 
```

然后在对象中，您必须设置此方法：

```
- (void)webView:(WebView *)sender willPerformClientRedirectToURL:(NSURL *)URL delay:(NSTimeInterval)seconds fireDate:(NSDate *)date forFrame:(WebFrame *)frame 
```

# javascript - 延迟后在 chrome 中打开标准窗口

> ID：13481548
> 
> 赞同：2
> 
> 时间：2012-11-20T20:27:35.417
> 
> 标签：javascript, google-chrome, popupwindow

我正在开发一个通常在当前页面中完成所有工作的书签，但偶尔需要打开一个新窗口（主要用于登录流程）。我大部分时间都在工作，但是 chrome 正在做一些意想不到的事情。

`window.open`在大多数浏览器中，我正在进行的调用会生成一个标准的新窗口/选项卡，但在 chrome 中它会在不同样式的窗口中打开。该窗口没有选项卡和只读 URL 栏。

似乎 chrome 的行为基于打开发生的鼠标单击距离有多远。这是一些演示它的简单代码：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Chrome window.open Test</title>
    <script>
      function startOpen() {
        var delay = Number(document.getElementById('delay').value);
        setTimeout(openWindow, delay);
      }

      function openWindow() {
        window.open('http://www.google.com', '_blank');
      }
    </script>
  </head>
  <body>
    <input type="text" id="delay" value="1000"></input>
    <input type="button" value="Open" onclick="startOpen()"></input>
  </body>
</html> 
```

如果我留下延迟，`1000`它会正常打开。但是，如果我做到这一点，`3000`它会在另一个样式窗口中打开：

![在此处输入图像描述](../Images/a8c07cbbc7cd3106bbe296e6cf8ad589.png)

在较慢的连接上，我的小书签的初始化可能需要一秒钟以上（需要加载几个库并进行凭据检查），因此我偶尔会超出此时间范围，从而导致跨浏览器和尝试的行为不一致。

有没有办法告诉 chrome 打开标准窗口，或者这只是我必须忍受的一些强迫行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T22:24:21.163

此解决方案仅适用于 Chrome，它通过创建锚点并模拟元素上的 Shift+Click 事件来工作：

```
function openLinkInWindow(url) {
    var anchor = document.createElement("a");
    anchor.href = url;
    document.body.appendChild(anchor);

    var evt = document.createEvent("MouseEvents");
    evt.initMouseEvent("click", true, true, window,
    0, 0, 0, 0, 0, false, false, 

    true, // SHIFT key down

    false, 0, null);
    anchor.dispatchEvent(evt);

    anchor.parentNode.removeChild(anchor);
} 
```

用法：

```
 openLinkInWindow("http://www.google.com"); 
```

工作示例：（延迟 2 秒后打开链接）

[http://jsbin.com/ihuwew/1/edit](http://jsbin.com/ihuwew/1/edit)

我还没有延迟（直接在`window.onload`事件中）对此进行了测试，并且它没有被弹出窗口阻止程序阻止

# jquery - 我可以在 oTableTools 中将 fnServerParams 用于 jquery 数据表吗？

> ID：13481551
> 
> 赞同：0
> 
> 时间：2012-11-20T20:27:38.887
> 
> 标签：jquery, asp.net-mvc, datatables

我需要传入一个 ID 来初始化一个 jquery 数据表。我在主表中正确使用了 fnServerParams，但是当我点击导出按钮时，我需要的 ID 不再在传递给控制器​​的 param 参数中。我是否需要在 oTableTools 中执行某些操作来检索 ID？

Javascript：

```
$(document).ready(function () {
    var oTable = $('#tblAddressErrors').dataTable({
        "bJQueryUI": true,
        "iDisplayLength": 25,
        "bServerSide": true,
        "sAjaxSource": "/Issuance/Issuance/AjaxHandler2",
        "sScrollX": "100%",
        "bProcessing": true,
        "aoColumns": [
                            { "sName": "Master_Name" },
                            { "sName": "Group_Name" },
                            { "sName": "household_id",
                            "fnRender": function (oObj) {
                                var householdId = oObj.aData[2];
                                return '<a href=\"/Household/Household/Details?householdId=' + householdId + '\">' + householdId + '</a>';
                            },
                            "bUseRendered": false
                        },
                            { "sName": "First_Name" },
                            { "sName": "Last_Name" },
                            { "sName": "Pan_NR" }                
        ],
        "sDom": '<"H"Tfr>t<"F"ip>',
        "oTableTools": {
            "sSwfPath": "/Content/media/swf/copy_csv_xls.swf",
            "aButtons": [{ "sExtends": "download", "sButtonText": "Export", "sUrl": "/Issuance/Issuance/AjaxHandlerExport2" }]
        },
        "fnServerParams": function (aoData) {
            aoData.push(
                { "name": "cardStockId", "value": $("#CardStockId").val() }
            );
        }
    });
}); 
```

控制器动作：

```
public ActionResult AjaxHandlerExport2(JQueryDataTableParamModel param)
        {
            var addressErrorsExports = (from addressErrorExport in GetAddressErrors(param, true).Issuances
                                   select new
                                   {
                                       MasterGroupName = addressErrorExport.Group.MasterGroupName,
                                       GroupName = addressErrorExport.Group.Name,
                                       HouseholdID = addressErrorExport.HouseholdId,
                                       FirstName = addressErrorExport.Group.ContactInfo.FirstName,
                                       LastName = addressErrorExport.Group.ContactInfo.LastName,
                                       PAN = addressErrorExport.PanNumber.ToString()
                                   }).ToList();

            return File(addressErrorsExports.ExportToCsv(new string[0]), "application/ms-excel", "AddressErrors.xls");
        }

private IssuanceResults GetAddressErrors(JQueryDataTableParamModel param, bool isExport)
        {
            IssuanceResults issuanceResults = new IssuanceResults();
            IssuanceSearch issuanceSearch = PopulateIssuanceSearch(param, isExport);
            issuanceSearch.CardStockId = param.cardStockId;

            using (var householdService = _householdService.GetWrappedProxy())
            {
                issuanceResults = householdService.BaseObject.GetIssuanceResults(issuanceSearch, Common.Issuance.ReturnType.AddressErrors);
            }
            return issuanceResults;
        }

        private IssuanceSearch PopulateAddressErrors(JQueryDataTableParamModel param, bool isExport)
        {
            return new IssuanceSearch
            {
                Text = param.sSearch ?? string.Empty,
                MaxRows = isExport ? Properties.Settings.Default.MaxExportRows : param.iDisplayLength,
                RowIndex = isExport ? 0 : param.iDisplayStart,
                SortColumn = param.sColumns.Split(',')[param.iSortCol_0],
                SortDirection = param.sSortDir_0,
            };
        } 
```

所以基本上，当我第一次点击 GetAddressErrors 方法时，当表第一次初始化时 CardStockID 被填充，但是当我点击 jquery 数据表上的 Export 按钮并再次点击 GetAddressErrors 方法时，CardStockID 不再填充在参数中.

# .net - 反应式扩展和并行处理

> ID：13481553
> 
> 赞同：1
> 
> 时间：2012-11-20T20:27:40.817
> 
> 标签：.net, parallel-processing, task-parallel-library, system.reactive, state-machine

我计划在某个时候在我的一个项目中使用 Rx，并且我一直在研究我可以用 Rx 做什么。

我的项目使用 TPL 并行处理状态机转换（利用所有可用的处理器内核）。但是，为了提高性能，我想用 Rx 推送机制替换当前的 IList<> 拉取机制。

由于我对这项技术不太了解，我想确定 Rx 是否与将令牌推送到并行状态转换兼容。我将要求所有并行状态转换都订阅 Rx 主题并检索下一个令牌。每个状态转换都需要来自主题的相同标记。根据我自己的研究了解到，一旦令牌被推送给观察者（在这种情况下为状态转换），该令牌就永远消失了。如果是这种情况，其他转换（对于相同的状态）将永远不会收到此令牌并最终处于错误状态。

有人能告诉我我的担忧是否正确吗？我没有要显示的代码，因为我只是在探索我的选择。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T07:47:48.177

将 Rx Subject 视为类似于 .NET 事件可能会有所帮助，即已注册事件处理程序的线程安全列表。在 Subject 的情况下，这些可以被认为等同于单个 Observer OnNext 代表。一旦事件触发，每个处理程序都会使用相同的事件参数调用。同样，订阅 Subject 的每个 Observer 都会使用相同的参数对象调用 OnNext。此参数可能包含状态转换所需的令牌的值类型或引用类型。大概您的 Observer 的 OnNext 处理程序将存储此令牌（例如在并发队列中）以用于相应的并行任务消耗。

因此，除非您简单地忽略 OnNext 调用或丢弃它们传递给您的对象，否则没有什么是永远的。

如果您的任务之一更改了令牌，您可能已经共享状态损坏问题。或者你可能有同步问题，如果一个任务处理了几个状态转换令牌，而另一个任务甚至没有时间出列第一个任务。但这并不特定于使用 Rx 主题，而不是其他一些技术来推送令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:56:28.983

您可能正在寻找

```
IConnectableObservable<T> IObservable<T>.Publish() 
```

可连接的 observable 是原始 observable 的多播变体，可以多次订阅。首先，您将所有观察者订阅到可连接的可观察对象，然后在可连接的可观察对象上调用连接。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T08:17:43.977

@Tony 提出了一个很好的观点，即 Observable 序列（IObservable）就像一个事件，因为它可以有一个线程安全的注册订阅者/事件处理程序列表。因此，与事件一样，许多注册订阅者可以接收事件有效负载（以串行方式，首先调用第一个订阅者）。

然而，没有解决的是一个潜在的问题，即 Rx 可能会帮助您处理那些事件也不会借给自己的时间。例如，您可能在设置所有并行状态转换处理程序之前发布/推送了令牌。如果您使用事件或标准可观察序列，则有效负载将丢失。您可以通过使用 Rx 中的缓存功能（例如 Replay）来解决此问题。这可以让您将最后一个值重播给迟到的订阅者。

如果这很有趣，那里有大量信息。你可以在我的书的部分阅读更多关于它的信息：http: [//introtorx.com/Content/v1.0.10621.0/02_KeyTypes.html](http://introtorx.com/Content/v1.0.10621.0/02_KeyTypes.html)

# c# - 将位图图像转换为矩阵

> ID：13481558
> 
> 赞同：6
> 
> 时间：2012-11-20T20:28:16.937
> 
> 标签：c#, matrix, bitmap

在 C# 中，我需要将已经转换为位图的图像转换为由位图数据的 uint8 组成的图像宽度和高度大小的矩阵。换句话说，将位图数据放在矩阵中并将它们转换为 uint8，这样我就可以在矩阵的行和列上进行我打算做的计算。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T20:30:22.617

尝试这样的事情：

```
public Color[][] GetBitMapColorMatrix(string bitmapFilePath)
{
    bitmapFilePath = @"C:\9673780.jpg";
    Bitmap b1 = new Bitmap(bitmapFilePath);

    int hight = b1.Height;
    int width = b1.Width;

    Color[][] colorMatrix = new Color[width][];
    for (int i = 0; i < width; i++)
    {
        colorMatrix[i] = new Color[hight];
        for (int j = 0; j < hight; j++)
        {
            colorMatrix[i][j] = b1.GetPixel(i, j);
        }
    }
    return colorMatrix;
} 
```

# linux - 在 Ubuntu 中监控远程登录机器的流量（通过 ssh 本地端口转发）

> ID：13481559
> 
> 赞同：-1
> 
> 时间：2012-11-20T20:28:18.870
> 
> 标签：linux, ubuntu, ssh, network-monitoring, sshd

我已经`sshd`在我的计算机（Ubuntu-12.10）中开始让其他 PC（let pc2）通过本地端口转发连接到我的访客帐户中。

现在如何从我的 PC 监控该 pc2 的流量，即他/她正在打开哪个网站或他/她正在下载什么数据以及通过我的计算机的其他流量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T03:11:45.850

您无法“看到”来自 pc2 的流量，因为 ssh 对其进行了加密。但是，您将能够在使用任何隧道流量*时*看到其出站部分，因为这是由本地 sshd 生成的。

使用 lsof 命令，查看当来自 pc2 的用户使用 ssh 连接到您时会发生什么。`lsof -i TCP|grep pc2`将向您展示类似的内容：-

```
sshd      14466     root    3u  IPv4 327724762      0t0  TCP pc1:ssh->pc2:40781 (ESTABLISHED)
sshd      19170 pc2user     3u  IPv4 327724762      0t0  TCP pc1:ssh->pc2:40781 (ESTABLISHED) 
```

第一行代表 sshd 服务本身，第二行代表运行 pc2 用户连接的 sshd 部分（Ubuntu 和希望现在其他所有人都默认使用权限分离）。

从这个视图中，您看不到任何端口转发，因为它还没有被使用。但是我们可以使用 pc2user 的 ssh 会话的进程 ID (PID)，这里是 19170。我们现在可以`lsof`再次使用来查看该过程在做什么。`lsof -p 19170 -a -i TCP`

```
COMMAND   PID     USER   FD   TYPE    DEVICE SIZE/OFF NODE NAME
sshd    19170 pc2user    3u  IPv4 327724762      0t0  TCP pc1:ssh->pc2:40785 (ESTABLISHED) 
```

这应该给你与上面第二行相同的输出；但是当用户开始使用他们声明的端口转发隧道时，你会从这个 PID 中看到它...

```
COMMAND   PID     USER   FD   TYPE    DEVICE SIZE/OFF NODE NAME
sshd    19170 pc2user    3u  IPv4 327724762      0t0  TCP pc1:ssh->pc2:40785 (ESTABLISHED)
sshd    19170 pc2user   10u  IPv4 327873368      0t0  TCP localhost:55678->google.com:http (ESTABLISHED) 
```

一旦检测到第二个连接，您就可以通过指定连接的任一端开始为其收集网络流量：在这里，我们将使用 localhost 端：-

```
tcpdump -i lo src port 55678 
```

现在您已经看到通过 ssh 传输的流量是如何可见的，您可能需要一种更自动的方法来捕获它。`iptables`允许我们使用所有者匹配工具匹配来自特定用户的所有流量 - 参见[http://www.frozentux.net/iptables-tutorial/iptables-tutorial.html#OWNERMATCH](http://www.frozentux.net/iptables-tutorial/iptables-tutorial.html#OWNERMATCH)

来自 pc2user 的 ssh 连接的所有出站网络流量都将归 pc2user 所有——您可以使用 iptables 在某处记录所有这些，或者决定允许/拒绝什么，或者做其他事情，例如将所有 HTTP 流量推送到特定代理你设置的。

您可能还需要查看 ps2user 的 authorized_keys 文件，您可以在其中使用 permitopen="host:port" 语句控制允许用户首先请求的端口转发。`man sshd`会在那里帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T21:57:55.607

Secure Socket Shell 的重点是加密连接实体之间的流量。它实际上实现了一种协议级别的加密形式。这是使用它的好处之一。

关于您的 SSH，需要注意的是它本身是如何工作的。

尽管它的主要目标是保护数据，但通过 SSH 关联连接的最简单方法就像一系列管道。这些管子包含一个开始，一个结束。

当您创建此隧道时，您指定一个地址和端口，一旦正确握手，它将回复。

![SSH 模型视图](../Images/4ea4c4b2846310d80e17b5cb9d7c7d79.png)

如果您有一台位于防火墙后面的机器，则需要该机器通过暴露连接的“远程”端的“入口”点来物理连接到外部世界。

显然，暴露这个端口的好处是更多的项目将开始通过普通的旧文本出现，这公然暴露了任何数据。

现在有不同的工具可以监控此类信息：

*   网络和协议分析仪
*   代理服务器

**代理服务器：**这种可爱的方法旨在接收任何访问您网络的流量；过滤，监控，然后将其传递出去。因此，从某种意义上说，您将能够监控所有传入和传出的流量请求。

连接本身可能是安全的，这将隐藏传输，但代理仍将暴露目标或传入请求。

**网络和协议分析器：**这些分析器旨在配置为监控网络流量，因此它们将针对针对三件事的每个端口和协议：

*   服务器
*   客户
*   路由器

目标将是监视从机器发送的所有网络数据包，因此一旦填充了该数据包，它将沿 OSI 模型向下移动。现在这些分析器的好处是，它们会将所有需要的信息从一个 IP 暴露给另一个。这些位部分暴露。

对于渗透测试，一种常见的策略是毒化路由器表，一旦它们暴露出来，就很容易拦截这些数据包，然后用不同的信息重新注入它们。

以下是一些网络和协议分析仪：

*   纳吉奥斯十一世
*   线鲨

代理：

*   Nginx

安全实用程序：

*   Open Wall，安全站点，其中包含一些可能适用的安全软件实用程序。
*   Antionline，Blackhat - 这些论坛有很多可行的信息。
*   猫头鹰安全软件
*   固态混合硬盘
*   FreeBSD --> 有一些内置的 SSH 日志工具。

有很多信息要做，我采取了一些比 Satish 更友好的方法，但你也可以使用不同的攻击变体来获取信息。您可能想尝试的另一件事是渗透测试。其中一些实用程序也将满足您的要求。

希望这至少可以帮助您指出正确的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T20:49:26.370

简短的回答你不能。ssh 的全部意义在于拥有一个安全（加密）的连接。唯一的方法是通过 pc1 上的 root 帐户监控来宾帐户。您可以通过将来宾配置为使用代理（例如用于 Internet 连接）来做到这一点，并且您可以访问代理的日志。

但是有更简单的方法来做这些事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T20:49:37.337

如果您真的愿意这样做，那么唯一的方法就是`Man-In-The-Middle` **（MITM）**攻击。虽然 ssh 会话已加密，但您无法使用嗅探器查看流量，因此您必须以某种方式将其放在`attacker machine`计算机和 PC2 之间，以便轻松嗅探流量。有一些工具可以帮助您实施 MITM 攻击。

**[中间人 SSH](http://taosecurity.blogspot.com/2007/08/loving-ssh.html)**

**[使用 libssl 漏洞解密 SSH2 会话](http://seclists.org/pen-test/2008/Jul/50)**

# ios - iPhone photo 的 app 是如何快速流畅地加载这么多图片的？

> ID：13481561
> 
> 赞同：2
> 
> 时间：2012-11-20T20:28:26.280
> 
> 标签：ios, xcode, performance, uiimage

我正在构建一个应用程序，该应用程序需要在 uitableviewcell 的图像视图中显示一堆本地图像。但是，我很难优化 uitableview 的性能。我特别注意到两个问题：首先，视图需要一段时间才能加载。其次，当显示新单元格时，滚动会变得迟钝。

viewDidLoad 正在像这样加载图像：

```
for (Object *object in self.objects)
{
    object.thumbnail = [UIImage imageNamed:object.imageName];
} 
```

这显然会导致长时间加载问题，但我不确定如何加载这些图像。是尺寸问题吗？这只是一种不好的做法吗？

显示图像的过程似乎也有问题，换句话说，即使将图像分配给缩略图属性，它们仍然需要很长时间才能绘制出来。

虽然这是一个特定的案例，但我对苹果如何如此有效地加载照片中的图像感到好奇。有什么见解吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-30T16:55:02.367

每当我发现我的 UI 滞后时，我首先怀疑的是我正在同步执行一些操作（在主线程上），而这些操作应该异步执行（在后台线程上）。

我也很好奇苹果是如何在照片应用程序中实现这一性能的。我正在编写一个与您的要求相似的应用程序。我目前的方法是在用户打开我的视图控制器后立即将一堆照片从磁盘异步加载到内存中，并在用户滚动时继续从内存中加载（并删除照片）。

目前，我将磁盘中的每张照片异步加载到索引路径处的行的单元格中，这非常快，但是如果您快速滚动表格视图，则会导致这种级联效果发生。也就是说，在照片出现之前，单元格将显示为空片刻。

我希望这对你有所启发。

您可能也有兴趣尝试 SDWebImage - 它包括一个图像缓存对象，在处理本地照片时让我的生活变得更轻松。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T20:32:56.670

他们很可能在各种分离的线程上在后台做所有事情。这将允许托管/呈现大量信息的应用程序具有很大的流动性。我自己在各种应用程序中创建了一个照片库，从不同的 Web API 和诸如此类的同时加载许多照片，并且通过简单地创建新线程并高效准确地管理分配，您可以获得非常流畅的界面/交互

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T20:33:38.937

好吧，长时间加载问题是由您的这部分代码引起的 - `UIImage imageNamed:`，因为此方法将所有图像缓存在同一线程上，并且如果内存过载也可能导致应用程序崩溃。

试试看这个库 - 它应该做你想要达到的目标:) [http://www.cocoacontrols.com/platforms/ios/controls/ktphotobrowser](http://www.cocoacontrols.com/platforms/ios/controls/ktphotobrowser)

# java - 如何使用子类型？- 在 Java 中覆盖和继承

> ID：13481563
> 
> 赞同：4
> 
> 时间：2012-11-20T20:28:46.983
> 
> 标签：java, inheritance, overriding, wildcard

我的 Java 代码有问题。我有四个（重要的）课程：

```
public class RDOutput extends OutputType
public class RDAnalysis extends AnalysisProperties 
```

现在我正在尝试在分析属性中创建一个方法：

```
public abstract void display(ArrayList<? extends OutputType> results); 
```

主要问题列表，ArrayList中的对象会是OutputType的不同子类型。在我的课程 RDAnalysis 中，我尝试进行特定的覆盖：

```
public void display(ArrayList<RDOutput> results) { 
```

但 Eclipse 说：名称冲突：RDAnalysis 类型的方法 display(ArrayList) 与 AnalysisProperties 类型的 display(ArrayList? extends OutputType) 具有相同的擦除，但不会覆盖它

我不熟悉 Java 技巧，我尝试在文档中搜索，但没有找到任何解决此问题的方法。我的问题是：我正在做的那个技巧（抽象中的基本类型和最终函数中的扩展）在 Java 中是否可行（如果是，我该怎么做？）还是我必须做一些枚举来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T20:38:51.517

我建议你在你的类中引入泛型参数并用它来参数化你的方法：

```
public abstract class A<T extends OutputType> {
    public abstract void display(ArrayList<T> results);     
}

public class B extends A<RDOutput> {
    public void display(ArrayList<RDOutput> results) {}     
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T20:40:51.740

这是因为您的显示并未涵盖抽象方法的所有情况。也许尝试这样的事情：

```
public class RDOutput extends OutputType {}

public class OutputType {}

public abstract class AnalysisProperties<T extends OutputType> {
    public abstract void display(ArrayList<T> results);
}

public class RDAnalysis extends AnalysisProperties<RDOutput> {
    @Override
    public void display(final ArrayList<RDOutput> results) {
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T20:43:22.337

问题是您试图在限制可能的参数的同时覆盖方法。

=>`ArrayList<? extends OutputType>`接受比`ArrayList<RDOutput>`因为`RDOutput`extends更多的可能元素`OutputType`。

你打破了这条规则：相关的子类方法必须至少包含超类一的元素，并且永远不要限制它们。

所以编译器避免验证这个覆盖。

顺便说一句，避免使用具体值（如`ArrayList`. `LinkedList`作为参数传递的呢？...更喜欢更通用的相关类型，例如`List`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T20:44:25.617

这里的问题是，在[类型擦除](http://en.wikipedia.org/wiki/Type_erasure)发挥作用之后，这两种方法的签名无法区分：它们具有相同的返回类型，并且都可以接受 a`ArrayList<RDOutput>`但第一个（泛型）也可以接受 any `ArrayList<T extends OutputType>`。

这意味着，尽管如果传递 JVM 将无法选择在运行时调用哪一个`ArrayList<RDOutput>`，但同时您的`display`方法不会覆盖抽象的方法，因为您的方法仅适用于 列表`RDOutput`，所以如果您通过a`List<T extends OutputType>`与`T != RDOutput`您的具体实现不接受它。

您应该考虑按照其他答案中的建议在整个类上使用类型参数，或者接受这样一个事实，即如果没有强制转换，您将无法在方法中使用任何`RDOutput`特定方法`display`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T20:39:07.143

如果一个方法正在等待`ArrayList<? extends OutputType>`

`ArrayList<RDOutput>`不能传递给它，因为父类型允许在 arraylist 中的任何子类 OutputType。

考虑这样的代码

```
AnalysisProperties properties = new RDAnalysis();
properties.display(arraylist consisting of any child class of OutputType); //this line will        cause runtime problems 
```

# sql - 使用 CTE 的相邻列表和递归查询，如何回填？

> ID：13481564
> 
> 赞同：2
> 
> 时间：2012-11-20T20:28:47.270
> 
> 标签：sql, sql-server, tsql, recursion, hierarchy

我有一个查询，它从父子表（自联接，相邻列表）生成扁平层次结构。问题是此查询为没有任何子级的级别生成 NULL。现在我的意图是“回填”这些级别以生成一个在级别列中不包含任何 NULL 值的表。我应该如何修改这个查询？

示例数据：

```
SET NOCOUNT ON;
USE Tempdb;

IF OBJECT_ID('dbo.Employees', 'U') IS NOT NULL DROP TABLE dbo.Employees;

CREATE TABLE dbo.Employees
(
  empid   INT         NOT NULL PRIMARY KEY,
  mgrid   INT         NULL     REFERENCES dbo.Employees,
  empname VARCHAR(25) NOT NULL,
  salary  MONEY       NOT NULL,
  CHECK (empid <> mgrid),
  CHECK (empid > 0)
);

CREATE UNIQUE INDEX idx_unc_mgrid_empid ON dbo.Employees(mgrid, empid);

INSERT INTO dbo.Employees(empid, mgrid, empname, salary) VALUES
  (1,  NULL, 'David'  , $10000.00),
  (2,  1,    'Eitan'  ,  $7000.00),
  (3,  1,    'Ina'    ,  $7500.00),
  (4,  2,    'Seraph' ,  $5000.00),
  (5,  2,    'Jiru'   ,  $5500.00),
  (6,  2,    'Steve'  ,  $4500.00),
  (7,  3,    'Aaron'  ,  $5000.00),
  (8,  5,    'Lilach' ,  $3500.00),
  (9,  7,    'Rita'   ,  $3000.00),
  (10, 5,    'Sean'   ,  $3000.00),
  (11, 7,    'Gabriel',  $3000.00),
  (12, 9,    'Emilia' ,  $2000.00),
  (13, 9,    'Michael',  $2000.00),
  (14, 9,    'Didi'   ,  $1500.00); 
```

[@Andomar](https://stackoverflow.com/a/13159043/179748)提供的查询

```
; with  Tree as
        (
        SELECT  empid
        ,       mgrid
        ,       1 as lv
        ,       1 as level1
        ,       null as level2
        ,       null as level3
        ,       null as level4
        ,       null as level5
        FROM    Employees
        WHERE   mgrid IS NULL 
        UNION ALL
        SELECT  E.empid
        ,       E.mgrid
        ,       T.lv + 1
        ,       T.level1
        ,       case when T.lv = 1 then E.empid else t.level2 end
        ,       case when T.lv = 2 then E.empid else t.level3 end
        ,       case when T.lv = 3 then E.empid else t.level4 end
        ,       case when T.lv = 4 then E.empid else t.level5 end
        FROM    Employees AS E
        JOIN    Tree T
        ON      E.mgrid = T.empid
        )
select  *
from    Tree
order by empid 
```

这产生

```
+-------+--------+----+--------+--------+--------+--------+--------+
| EMPID | MGRID  | LV | LEVEL1 | LEVEL2 | LEVEL3 | LEVEL4 | LEVEL5 |
+-------+--------+----+--------+--------+--------+--------+--------+
|     1 | (null) |  1 |      1 | (null) | (null) | (null) | (null) |
|     2 | 1      |  2 |      1 | 2      | (null) | (null) | (null) |
|     3 | 1      |  2 |      1 | 3      | (null) | (null) | (null) |
|     4 | 2      |  3 |      1 | 2      | 4      | (null) | (null) |
|     5 | 2      |  3 |      1 | 2      | 5      | (null) | (null) |
|     6 | 2      |  3 |      1 | 2      | 6      | (null) | (null) |
|     7 | 3      |  3 |      1 | 3      | 7      | (null) | (null) |
|     8 | 5      |  4 |      1 | 2      | 5      | 8      | (null) |
|     9 | 7      |  4 |      1 | 3      | 7      | 9      | (null) |
|    10 | 5      |  4 |      1 | 2      | 5      | 10     | (null) |
|    11 | 7      |  4 |      1 | 3      | 7      | 11     | (null) |
|    12 | 9      |  5 |      1 | 3      | 7      | 9      | 12     |
|    13 | 9      |  5 |      1 | 3      | 7      | 9      | 13     |
|    14 | 9      |  5 |      1 | 3      | 7      | 9      | 14     |
+-------+--------+----+--------+--------+--------+--------+--------+ 
```

但我们的想法是实现这一目标

```
+-------+--------+----+--------+--------+--------+--------+--------+
| EMPID | MGRID  | LV | LEVEL1 | LEVEL2 | LEVEL3 | LEVEL4 | LEVEL5 |
+-------+--------+----+--------+--------+--------+--------+--------+
|     1 | (null) |  1 |      1 | 1      | 1      | 1      | 1      |
|     2 | 1      |  2 |      1 | 2      | 2      | 2      | 2      |
|     3 | 1      |  2 |      1 | 3      | 3      | 3      | 3      |
|     4 | 2      |  3 |      1 | 2      | 4      | 4      | 4      |
|     5 | 2      |  3 |      1 | 2      | 5      | 5      | 5      |
|     6 | 2      |  3 |      1 | 2      | 6      | 6      | 6      |
|     7 | 3      |  3 |      1 | 3      | 7      | 7      | 7      |
|     8 | 5      |  4 |      1 | 2      | 5      | 8      | 8      |
|     9 | 7      |  4 |      1 | 3      | 7      | 9      | 9      |
|    10 | 5      |  4 |      1 | 2      | 5      | 10     | 10     |
|    11 | 7      |  4 |      1 | 3      | 7      | 11     | 11     |
|    12 | 9      |  5 |      1 | 3      | 7      | 9      | 12     |
|    13 | 9      |  5 |      1 | 3      | 7      | 9      | 13     |
|    14 | 9      |  5 |      1 | 3      | 7      | 9      | 14     |
+-------+--------+----+--------+--------+--------+--------+--------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T21:06:19.033

只需简单地尝试以您希望`coalesce()`在最后选择中使用的方式修改结果。

[在这里看到 sql-fiddle](http://sqlfiddle.com/#!3/1ebd6/20/0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T07:01:21.013

只需在 Tree CTE 之后添加以下内容

```
Select empid,mgrid,lv,
        level1 = coalesce(level1,Rn),
        level2 = coalesce(level2,Rn),
        level3 = coalesce(level3,Rn),
        level4 = coalesce(level4,Rn),
        level5 = coalesce(level5,Rn)
from
(select  empid,mgrid,lv,level1,level2,level3,level4,level5,Row_Number()Over(Order By empid) as Rn
from    Tree)x 
```

![在此处输入图像描述](../Images/b024e56ba878e4c4653064dc045f7d26.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T07:43:20.800

我发现这也有效：

```
; with  Tree as
        (
        SELECT  empid
        ,       mgrid
        ,       1 as lv
        ,       1 as level1
        ,       null as level2
        ,       null as level3
        ,       null as level4
        ,       null as level5
        FROM    Employees
        WHERE   mgrid IS NULL 
        UNION ALL
        SELECT  E.empid
        ,       E.mgrid
        ,       T.lv + 1
        ,       T.level1
        ,       case when T.lv = 1 then E.empid else t.level2 end
        ,       case when T.lv = 2 then E.empid else t.level3 end
        ,       case when T.lv = 3 then E.empid else t.level4 end
        ,       case when T.lv = 4 then E.empid else t.level5 end
        FROM    Employees AS E
        JOIN    Tree T
        ON      E.mgrid = T.empid
        )
select  empid, 
        mgrid, 
        lv, 
        level1,
        level2 = coalesce(level2, level1),
        level3 = coalesce(level3, level2, level1),
        level4 = coalesce(level4, level3, level2, level1),
        level5 = coalesce(level5, level4, level3, level2, level1)
from Tree
order by empid 
```

# c# - WCF 服务实现

> ID：13481567
> 
> 赞同：2
> 
> 时间：2012-11-20T20:29:01.670
> 
> 标签：c#, wcf, datacontract, datamember, operationcontract

我搜索了互联网，几本书，甚至咨询了一些同行。没有什么能真正说明我正在尝试做的事情是否是不好的做法。短; 我只是在做客户的一劳永逸。

```
[ServiceContract]
public interface ICustomerInformation
{

       [OperationContract(IsOneWay = true, IsTerminating = true, IsInitiating = false)]
       ICustomerAccount GetCustomerDetails (string First);

}

[DataContract]
public interface ICustomerAccount
{
      _firstName = firstName;

      [DataMember]
      string FirstName 
      {
            get { return _firstName; }
            set { _firstName = value; }
      }
} 
```

我最初的想法是与此类似的实现来抽象属性；所以服务器和绑定到服务器的应用程序可以利用这些属性。但这真的是明智之举吗？甚至是好的做法？

我的假设是；通过将这一层添加到服务中，它将允许访问服务的用户界面简单地推送它的数据；同时允许功能直接绑定到数据中。因此，如果用户数据发生更改，服务将针对服务器上的功能对其进行更改。

这是一种不好的观看方式吗？或者尝试这个？我对这种解释有误导吗？

就像我上面说的；目标是一种逻辑抽象，其中多种样式的接口将其数据推送到服务。然后服务接受输入；根据这些可变输入值执行功能。

如果我措辞不好，请告诉我，以便我进行编辑；或者想一个更好的解释方式。任何帮助都会很棒。

* * *

更新：

我正在尝试创建一个通用接口；与此相关的任何应用程序或客户端接口输入数据的地方。一旦数据提交给服务；服务器接受它。无需返回数据；但服务器只是通过使用客户端信息的命令运行。

从本质上讲，我正在尝试通过服务普遍推送数据以供服务器执行任务。客户端不需要知道它正在执行的任何服务器任务。

我的想法是通过服务在逻辑上分离 UI/用户输入；然后服务使用从用户那里收集的信息调用服务器端功能。

示例：Textbox(Name) --> Service --> Server 将 Name 存储为变量以执行一系列任务：将 Name 写入数据库，通过用户名命名 textfile，等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T21:36:05.590

如果我理解正确，您似乎想要实现某种消息/命令传递模型，这对我来说似乎完全合法。例如，看看[这篇文章](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)，它讨论了将命令用作架构模式。这些命令可以通过从客户端到 (WCF) 服务的线路进行序列化，这允许您创建一个高度可维护的服务层（如此[处所述](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=95)）。所以回到你原来的问题：是的，这似乎是一个合法的模型。虽然我建议阅读这些文章。他们可能会为您提供有关此类模型的更多背景知识。

# javascript - JSON 解析器返回未定义

> ID：13481570
> 
> 赞同：0
> 
> 时间：2012-11-20T20:29:06.577
> 
> 标签：javascript, html, json

我的 html 文件中有这个：

```
var jsonReturn = 'http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.quotes%20where%20symbol%20in%20(%22YHOO%22%2C%22AAPL%22%2C%22GOOG%22%2C%22MSFT%22)%0A%09%09&env=http%3A%2F%2Fdatatables.org%2Falltables.env&format=json'; 
var stockCount = jsonReturn.query.count; 
```

Chrome 的调试器返回的错误：`Uncaught TypeError: Cannot read property 'count' of undefined`

这是 jfiddle：http: [//jsfiddle.net/P6nMv/](http://jsfiddle.net/P6nMv/)

这是 JSON 返回对象的片段：![在此处输入图像描述](../Images/76d2bdeb224fb4e3937d38611ae1365a.png)

**问题是为什么当我通过**正确解析它时它是未定义的`jsonReturn.query.count`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T20:30:58.810

您正在尝试访问 URL 字符串，就好像它是一个对象一样。您实际上没有在任何地方检索该 URL 处的数据、解析它并将其分配给一个对象。

# html - Jekyll 自动目录

> ID：13481572
> 
> 赞同：5
> 
> 时间：2012-11-20T20:29:10.907
> 
> 标签：html, ruby, web, jekyll, tableofcontents

[我已经为Apache Buildr](http://buildr.apache.org/)的网站建立了一个基于 Jekyll 代码的网站。`textile`Buildr 网站会根据格式文件中的标题自动为每个页面生成一个目录。

例如，您使用纺织品标记出这样的标题来编写页面。.

```
h2(#why).  Why are we doing this?

BLah blah balh etc ..

h2(#something). Some other header

BLah blah balh etc .. 
```

然后在默认的 HTML 中，您有一些代码将内容通过管道传输到被调用`toc`的内容中，然后您将内容放入其中。例如 ...

```
<div id='content'>
 <h1 id='{{ page.title | downcase | replace(' ', '_') }}'>{{ page.title }}</h1>
  {{ content | toc }}
  {{ content }}
</div> 
```

在 Apache 站点上，他们得到了想要的结果（显示的目录后面是内容）。但是，在我的网站上，内容会呈现两次。不生成目录。

此外，如果我直接从 github 克隆 Apache Buildr 项目并`jekyll --server`在该`doc`项目的文件夹中运行，那么也不会生成目录。

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T19:53:12.263

我向 Buildr 开发者邮件列表发送了电子邮件，有人告诉我在[这里](https://github.com/apache/buildr/blob/trunk/rakelib/doc.rake)寻找灵感。原来相关的代码片段是......

```
module TocFilter
  def toc(input)
    output = "<ol class=\"toc\">"
    input.scan(/<(h2)(?:>|\s+(.*?)>)([^<]*)<\/\1\s*>/mi).each do |entry|
      id = (entry[1][/^id=(['"])(.*)\1$/, 2] rescue nil)
      title = entry[2].gsub(/<(\w*).*?>(.*?)<\/\1\s*>/m, '\2').strip
      if id
        output << %{<li><a href="##{id}">#{title}</a></li>}
      else
        output << %{<li>#{title}</li>}
      end
    end
    output << '</ol>'
    output
  end
end
Liquid::Template.register_filter(TocFilter) 
```

在站点的源文件夹中创建一个名为的文件夹`_plugins`，然后将此代码粘贴到该文件`TocFilter.rb`夹​​中的一个名为的文件中。

有用！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T12:14:01.917

toc 在哪里定义？它没有被列为标准液体过滤器或 jekyll 扩展之一，因此您可能缺少插件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-14T10:17:13.717

我在 Jekyll 支持的 Github 博客上使用[了 ghiculescu 的 JS TOC 。](https://github.com/ghiculescu/jekyll-table-of-contents)它工作得很好。

[例子](https://github.com/fedir/jekyll-table-of-contents)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-19T23:04:31.130

[**`jekyll-toc`**](https://github.com/toshimaru/jekyll-toc)插件为您开箱即用。

将以下内容添加到您的`GemFile`

```
gem 'jekyll-toc' 
```

将以下内容添加到您的`_config.yml`

```
plugins:
  - jekyll-toc 
```

在您希望生成 TOC 的位置添加以下液体标签。

```
{{ content | toc_only }} 
```

最后设置`toc: true`在您的帖子中`front-matter`。

我将此值添加为我的默认值，`_config.yml`以便默认情况下将 TOC 应用于我的所有帖子。

# plsql - where 子句中的 CASE 构造

> ID：13481573
> 
> 赞同：1
> 
> 时间：2012-11-20T20:29:13.457
> 
> 标签：plsql, oracle11g

当满足包装在函数中的条件时，我需要在选择查询中包含过滤条件。如果条件不满足，则不应应用过滤条件。

代码：

```
select col_a,col_b,cancel_Date from tab_a 
where col_c = <<some_condition>>  
and (case when oracle_function() = 'YES' then 'tab_a.cancel_date is null'
      else null
    ) 
```

如果我这样写，那么它会抛出“无效的关系运算符”错误。意识到这种情况应该解决右边的一个值，我尝试添加这样的东西，当条件满足时，它不会给我预期的结果：

```
select col_a,col_b,cancel_Date from tab_a 
where col_c = <<some_condition>>  
and (case when oracle_function() = 'YES' then 'tab_a.cancel_date is null'
       else '1'
      ) = '1' 
```

我的预期输出应该是：

如果 oracle_function() = YES，那么我的查询应该有效地解析为：

```
select col_a,col_b,cancel_Date from tab_a 
where col_c = <<some_condition>> and tab_a.cancel_date is null; 
```

别的：

```
select col_a,col_b,cancel_Date from tab_a 
where col_c = <<some_condition>>; 
```

有什么想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T20:32:45.163

代替`case`语句，此查询要求函数返回除 之外的值`'YES'`，或者日期为空......这应该类似于您的原始查询：

```
select col_a,col_b,cancel_Date 
from tab_a 
where col_c = <<some_condition>>  
and (oracle_function() <> 'YES' OR tab_a.cancel_date is null) 
```

# css - 如何禁用 IE10 插入文本框的清除按钮？

> ID：13481577
> 
> 赞同：59
> 
> 时间：2012-11-20T20:29:47.960
> 
> 标签：css, forms, internet-explorer-10

如何禁用 Internet Explorer 10 中的新功能，该功能在文本框中显示一个小“x”，当它获得焦点并且我有内容时？

![IE10 清除按钮](../Images/ae072acba96d001ba1c502fd96e879e1.png)

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-11-20T20:29:47.960

```
input[type=text]::-ms-clear {
    display: none;
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-03-09T15:33:55.003

在**IE 10+**中，文本输入 (input[type=text]) 一旦您开始输入，就会在字段右侧显示一个 (x) 按钮，它用于清除/删除输入的文本值。

在**Chrome**中，搜索输入 (input[type=search]) 显示类似的按钮。

如果您希望为 IE10+ 和/或 Chrome 删除它们中的任何一个。您可以添加下面的样式以从输入中隐藏此按钮。

*看看它在行动......* [http://codepen.io/sutthoff/pen/jqqzJg](http://codepen.io/sutthoff/pen/jqqzJg)

```
/* IE10+ */
::-ms-clear {
  display: none;
}

/* Chrome */
::-webkit-search-decoration,
::-webkit-search-cancel-button,
::-webkit-search-results-button,
::-webkit-search-results-decoration { 
  display: none; 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-30T21:54:00.633

```
input::-ms-clear{
   display:none;
} 
```

这对我有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-24T07:04:14.420

我就是这样做的

```
input[type=text]::-ms-clear
{
    display: none;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-02T21:18:52.257

请注意，当页面在兼容性视图中运行时，样式和 CSS 解决方案不起作用。我假设这是因为清除按钮是在 IE7 之后引入的，因此兼容性视图中使用的 IE7 渲染器不会将 ::-ms-clear 视为有效的样式标题。

# c++ - unique_ptr VS auto_ptr

> ID：13481579
> 
> 赞同：19
> 
> 时间：2012-11-20T20:29:53.297
> 
> 标签：c++, c++11, smart-pointers

> **可能重复：**
> [std::auto_ptr 到 std::unique_ptr](https://stackoverflow.com/questions/3451099/stdauto-ptr-to-stdunique-ptr)
> [有哪些 C++ 智能指针实现可用？](https://stackoverflow.com/questions/5026197/what-c-smart-pointer-implementations-are-available)

可以说我有这个`struct`：

```
struct bar 
{ 

}; 
```

当我像这样使用**auto_ptr**时：

```
void foo() 
{ 
   auto_ptr<bar> myFirstBar = new bar; 
   if( ) 
   { 
     auto_ptr<bar> mySecondBar = myFirstBar; 
   } 
} 
```

然后在`auto_ptr<bar> mySecondBar = myFirstBar;`C++ 将所有权从 myFirstBar 转移到 mySecondBar 并且没有编译错误。

但是当我使用**unique_ptr**而不是**auto_ptr**时，我得到一个编译器错误。为什么 C++ 不允许这样做？这两个智能指针之间的主要区别是什么？当我需要使用什么？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-20T20:33:55.347

`std::auto_ptr<T>`可能会默默地窃取资源。这可能会令人困惑，并且试图将其定义`std::auto_ptr<T>`为不允许您这样做。`std::unique_ptr<T>`所有权不会从您仍持有的任何东西中默默转移。它仅从您没有句柄的对象（临时）或即将消失的对象（即将超出函数范围的对象）转移所有权。如果您真的想转让所有权，您可以使用`std::move()`：

```
std::unique_ptr<bar> b0(new bar());
std::unique_ptr<bar> b1(std::move(b0)); 
```

# javascript - 链接到花式框内容

> ID：13481580
> 
> 赞同：0
> 
> 时间：2012-11-20T20:29:58.110
> 
> 标签：javascript, jquery, fancybox

不太清楚如何解释这个最好的方式，但我会试一试！

我有一个使用 Fancybox 的 php 站点。目前，如果有人点击登录，登录表单会出现一个覆盖。如果有人点击发布新列表但他们没有登录，我希望fancybox 覆盖再次出现，允许用户登录。

目前，我有几行 php 代码来检查会话是否处于活动状态 - 如果没有，它会重定向到登录页面，我希望这可以激活带有登录表单的幻想框弹出窗口......如果可能的话？

我不确定如何最好地实现这一目标？任何帮助都是极好的！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:34:14.100

可以有多种方式来做到这一点。

首先，您如何识别某人已登录？假设我是否可以在 if 条件下这样做：

```
if(user==null) {
  //no login
} 
```

我可以触发**LOGIN**的锚链接点击，从而再次打开fancybox。

```
if(user==null) {
  $("a#login").trigger('click');
} 
```

希望能给你一些帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T20:49:36.740

除了 jQuery，我不确定您使用的编程语言是什么，但一个高级解决方案可能是在用户登录时删除 cookie。然后，当他们点击发布新列表时，检查该 cookie。如果它在那里，让他们发布。如果不显示登录窗口。[下面是一些使用jQuery.Cookie](https://github.com/carhartl/jquery-cookie)插件的伪代码：

```
$(function(){
$('.login-button').click(function(){
    //send login info via ajax
  $(this).hide("slow",function(){
    // drop a cookie
    $.cookie( 'login', '1',  { expires: 1, path: '/' } );
  });
});

// When the post button is clicked, check for the cookie
// If there's no cookie, show the login box
$('.post-button').click(function(){       
    if( $.cookie('Login') === null ) { 
        $("#login-box").fancybox();
    } else {
        // do nothing
    }
 });

}); 
```

# python - python脚本的管道输出

> ID：13481582
> 
> 赞同：4
> 
> 时间：2012-11-20T20:30:15.447
> 
> 标签：python, terminal, piping

我运行`./sample.py --url http://blah.com`没有错误，但如果我运行`./sample.py --url http://blah.com | wc -l`或类似我收到错误：

`UnicodeEncodeError: 'ascii' codec can't encode character u'\u200f' in position 0: ordinal not in range(128)`

如何使 python 脚本与我的终端命令兼容？`sys.stdin.isatty`尽管它的用例似乎相反，但我一直看到参考。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T20:40:46.447

当 Python 检测到它正在打印到终端时，`sys.stdout.encoding`设置为终端的编码。当你`print`a时`unicode`，使用.`unicode``str``sys.stdout.encoding`

当 Python 未检测到它正在打印到终端时，`sys.stdout.encoding`设置为`None`. 当你`print`a`unicode`时，使用`ascii`编解码器（至少在 Python2 中）。`unicode`如果包含 0-127 之外的代码点，这将导致 UnicodeError 。

解决此问题的一种方法是`unicode`在打印之前显式编码。这也许是正确的方法，但如果你有很多散落在各处的打印语句，这可能会很费力。

解决此问题的另一种方法是将[PYTHONIOENCODING](http://docs.python.org/2/using/cmdline.html#envvar-PYTHONIOENCODING)环境变量设置为适当的编码。例如，

```
PYTHONIOENCODING=utf-8 
```

然后将使用此编码代替将`ascii`输出打印到文件时。

有关详细信息，请参阅[PrintFails wiki 页面](http://wiki.python.org/moin/PrintFails)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-20T20:35:59.470

尝试：

```
(./sample.py --url http://blah.com) | wc -l 
```

这会产生一个子shell来运行您的python脚本，然后将输出从管道`stdout`传输到`wc`

# azure - 无法从 Java 进程向 Azure 模拟器添加消息

> ID：13481590
> 
> 赞同：2
> 
> 时间：2012-11-20T20:30:41.870
> 
> 标签：azure, azure-storage, azure-storage-emulator

我有一个需要通过存储队列与 Azure C# 应用程序通信的 java 进程。
在**Azure Web**中运行时，java 进程能够读取消息并将消息写入存储队列。
**但是**，当我在本地运行 java 进程并尝试与 Azure 的模拟器通信时，我可以从队列中**读取**消息，但无法**写入**队列。

下面是我使用的代码，它挂在最后一行，然后在几分钟后超时。
任何建议将不胜感激。

```
CloudStorageAccount acct;
if (configuration.equals(configurationTypeLocal)) {
   acct = CloudStorageAccount.parse(localStorageConnectionString);
} else {
   acct = CloudStorageAccount.parse(cloudStorageConnectionString);
}
CloudQueueClient client = acct.createCloudQueueClient();
_queue = client.getQueueReference(queueName);
_queue.createIfNotExist();
_queue.addMessage(new CloudQueueMessage(txt)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-07T04:38:59.423

使用模拟器进行开发时，确保模拟器的版本适合您正在使用的客户端库的版本非常重要。如果您使用旧版本的模拟器和更新版本的客户端库，您最终可能会遇到问题，即您请求的服务功能尚未在模拟器中实现。

鉴于您说该功能在您使用在线服务时有效，但在您使用模拟器时无效，我猜这是问题所在。下载最新版本的模拟器，你应该没问题。

杰森

# eclipse - Eclipse 螳螂错误

> ID：13481593
> 
> 赞同：2
> 
> 时间：2012-11-20T20:30:53.090
> 
> 标签：eclipse, eclipse-indigo, mantis

当我尝试使用 Mantis 插件（org.eclipse.mylyn_feature.feature.group，V3.8.2）将我的 Mantis-Repository (V1.2.12) 添加到 My Eclipse Juno 时，我的 Eclipse 显示此错误：

> 无法加载项目：获取项目失败：错误类型：系统通知，错误描述：数组到字符串的转换。

如果我继续并尝试从 Mantis 选择存储库，则会显示相同的错误。

我的 URL 直接指向 /api/soap/mantisconnect.php 文件。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:32:48.877

您似乎在 PHP 5.4 上运行 Mantis，这对于 SOAP API 是不可能的，因为我们的 SOAP 层 - nusoap - 不支持它。

我的建议是更新最新的 git 版本（master-1.2.x）并安装 php 原生的 soap 版本。这将确保 Mantis 不会使用 nusoap 并且可以在 PHP 5.4 中正常工作

参考：

*   [Mantis SOAP API 文档](http://www.mantisbt.org/docs/master-1.2.x/en/administration_guide/admin.config.soap.html)
*   [对 SOAP API 的 PHP 5.4 支持的错误报告](http://www.mantisbt.org/bugs/view.php?id=14157)

# javascript - javascript中的以下逻辑if或语句有什么问题？

> ID：13481598
> 
> 赞同：2
> 
> 时间：2012-11-20T20:31:14.887
> 
> 标签：javascript

我是 javascript 新手，它必须非常基础：

```
if (controllerName === ('about' || 'contact' || 'lessons')) {
        res.render(controllerName + '.ejs', locals);
    } 
```

只有当`controllerName=='about'`我进去的时候，其余的情况我不进去。

`or`和`===`在这种情况下如何操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T20:32:05.227

你结构不正确。一个修复将是

```
if (controllerName == 'about' || controllerName == 'contact' || controllerName == 'lessons') {
    res.render(controllerName + '.ejs', locals);
} 
```

问题在于，它是集合中的第一个非（null/undefined）`('about' || 'contact' || 'lessons')`值`about`。您似乎想与`controllerName`所有三个值进行比较，因此请注意我的代码版本如何`controllerName`分别与所有三个值进行比较。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-20T20:35:30.250

更简洁的修复可以使用正则表达式：

```
if (/^(about|contact|lessons)$/.test(controllerName)) { ... } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-20T20:32:21.310

逻辑 OR 运算符的工作方式与您使用的有所不同。解决方法是：

```
if(controllerName === 'about' || 
   controllerName === 'contact' ||
   controllerName === 'lessons') 
```

或者，如果你想让眼睛更容易一些：

```
if((['about','contact','lessons']).indexOf(controllerName) > -1) 
```

您的第一条语句的问题在于，`('about' || 'contact' || 'lessons')`它将返回第一个计算结果为`true`. 由于转换为布尔值的任何非空字符串都会计算为`true`，因此始终返回“about”。因此，您的原始陈述相当于：

```
if(controllerName === 'about') 
```

# openstreetmap - Openstreetmap如何获得多个点和目标之间的最短行驶距离

> ID：13481599
> 
> 赞同：1
> 
> 时间：2012-11-20T20:31:14.070
> 
> 标签：openstreetmap, cloudmade

我需要知道假设 10 个 GIS 点和可能带有 CloudMade 或其他东西的目标之间的最短距离（在地图上乘汽车旅行，而不是鸟瞰图）。

这些点在10公里以内。

所以我需要一种方法来知道我的 10 个位置中哪个最接近我的目标，即开车旅行，而不是鸟瞰。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T21:12:58.550

您不会说您是在开发 Web 应用程序、离线应用程序还是其他东西。通常，您需要使用路由服务或路由代码 - 例如，请参阅[MapQuest 的 Web API](http://developer.mapquest.com/web/products/quick_start)或[Project OSRM 的代码](http://project-osrm.org/)。

然后对每个进行查询并比较距离。通常没有服务可以回答“这些 POI 中哪个最近？”的问题。AFAIK，所以这可能是找到最近的最有效方法。

# php - 通过图像总数用 php 分配图像 id

> ID：13481610
> 
> 赞同：1
> 
> 时间：2012-11-20T20:32:30.090
> 
> 标签：php, html

我试图为从数据库返回的每个图像分配一个 id。然后将id放入img id中。id 需要来自返回的数据库行数的总数。

```
<?php 
while ($result  = mysql_fetch_assoc($query)) {
$imgURL = $result['imageUrl'];
$imgID = mysql_num_rows($query);

for ($i=0; $i <= $imgID; $i++) { 
}

echo"<img id =\"$i\" src=\"uploads/$imgURL\"/>";
}

?> 
```

我得到的回报是图像是从数据库中显示的，但 img id 不是序列号（即 1、2、3 等），它只是返回给我的总数。我怎样才能让它为每个返回的图像分配一个单独的数字？

欢迎所有帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:34:02.087

你需要把你的回声放在你的 for 循环中：

```
for ($i=0; $i <= $imgID; $i++) { 
    echo "<img id =\"$i\" src=\"uploads/$imgURL\"/>";
} 
```

编辑：顺便说一句，您可能不想以这种方式识别您的图像。根据您的应用程序逻辑，查询中的记录顺序可能不一致。每条记录在数据库中都应该有一个唯一的 ID，并且该值比迭代计数更可取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T20:35:16.460

你有一个错误的地方括号。我已经为你重写了：

```
<?php 
while ($result  = mysql_fetch_assoc($query)) {
    $imgURL = $result['imageUrl'];
    $imgID = mysql_num_rows($query);

    for ($i=0; $i <= $imgID; $i++) { 
        echo "<img id =\"$i\" src=\"uploads/$imgURL\"/>";
    }
}
?> 
```

除非 ID 来自数据库中的字段，否则您可能还会遇到一些一致性问题。如果您的查询没有排序，则不能保证任何特定的排序。最常见的纠正方法是创建另一个名为“id”的字段，并为其赋予 auto_increment 属性。这样，它将为您提供一个永远不会改变的唯一序列号。您也可以按此编号排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T20:35:33.887

您甚至不需要计算行数或有多个循环。只需让`$i`while 循环的每次通过都会递增。

```
$i = 0;
while ($result = mysql_fetch_assoc($query)) {
    $imgURL = $result['imageUrl'];
    echo '<img id ="' . $i . '" src="uploads/' . $imgURL . '" />';
    $i++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T20:37:45.020

你应该做这样的事情。您所做的事情完全没有用，因为您在同一行中一次又一次地做同样的事情：

```
<?php
$imgID = 0;
while ($result  = mysql_fetch_assoc($query)) {
$imgURL = $result['imageUrl'];
echo"<img id =\"$imgID\" src=\"uploads/$imgURL\"/>";
$imgID = $imgID + 1;
}

?> 
```

# ruby-on-rails - Rails 中的 JOIN 语句与 2 个表的 OR 条件

> ID：13481611
> 
> 赞同：1
> 
> 时间：2012-11-20T20:32:33.323
> 
> 标签：ruby-on-rails, activerecord

更新 2：

这看起来好多了：

```
Comp.includes(:members).where('members.member_email = ? OR comps.user_id = ?', current_user.email,current_user.id) 
```

更新：

这似乎可行，但在 Rails 中有更优雅的方法吗？我觉得应该有。

```
@my_comps = Comp.joins('LEFT OUTER JOIN teams ON teams.comp_id = comps.id LEFT OUTER JOIN members ON members.team_id = teams.id').where('members.member_email = ? OR comps.user_id = ?', current_user.email,current_user.id).group('comps.id') 
```

原来的：

我的模型协会是：

```
Comp.rb
    has_many :teams
    has_many :members, :through => :teams

Team.rb
    belongs_to :comp
    has_many :members

Member.rb
    belongs_to :team 
```

我想编写一个查询来查找所有 Comps.user_id 等于特定值或 members.member_email 等于该 Comp 任何成员的特定值的 Comps。

我没有成功地尝试过这个：

```
@my_comps = Comp.joins(:members).where('members.member_email = ? OR comps.user_id = ?', email, id) 
```

返回的结果有 2 个问题：1）它返回重复的 Comps，其中 member_email 等于条件；2）它不返回 user_id 等于条件的 Comps。我通过在代码末尾添加 .group('id') 解决了问题 1，但我觉得可能有更好的方法来解决问题，更重要的是它并不能解决问题 2。

有关如何以不同方式处理此问题的任何建议？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T21:43:36.023

更改了建议，不知道`.join`仅在较新的 Rails 中使用“INNER JOIN”（具有旧版本）。最后的建议是：使用`.include`而不是`.join`

# jsf - jsf值表达式

> ID：13481615
> 
> 赞同：1
> 
> 时间：2012-11-20T20:32:54.070
> 
> 标签：jsf, icefaces

我想动态创建我的 jsf 页面的内容。我要做的是构建一个组件编辑器。我在页面上放置了两个按钮。这是代码：

```
//Various imports;

@ManagedBean
@ViewScoped 
public class Elpad implements Serializable{
  private String padreCorrente = "Nessun padre è stato creato";
  private HtmlPanelGrid customGrid;
  private UIComponent padreCorrenteC;
  private List<SelectItem> items = new ArrayList<SelectItem>();
  private List<UISelectItems> listaItem = new ArrayList<UISelectItems>();
  private String itemScelto = "";

public Elpad() {
    //items = new ArrayList<SelectItem>();
    //items.add(0, new SelectItem("poba", "poba"));
    //items.add(1, new SelectItem("ripoba", "ripoba"));
}

public String getItemScelto() {
    return itemScelto;
}

public void setItemScelto(String itemScelto) {
    this.itemScelto = itemScelto;
}
private String ris ="";

public List<SelectItem> getItems() {
    return items;
}

public void setItems(List<SelectItem> items) {
    this.items = items;
}

public List<UISelectItems> getListaItem() {
    return listaItem;
}

public void setListaItem(List<UISelectItems> listaItem) {
    this.listaItem = listaItem;
}

public HtmlRadio getSelectedRadio() {
    return selectedRadio;
}

public void setSelectedRadio(HtmlRadio selectedRadio) {
    this.selectedRadio = selectedRadio;
}

public String getPadreCorrente() {
    return padreCorrente;
}

public void setPadreCorrente(String padreCorrente) {
    this.padreCorrente = padreCorrente;
}

public HtmlPanelGrid getCustomGrid() {
    return customGrid;
}

public void setCustomGrid(HtmlPanelGrid customGrid) {
    this.customGrid = customGrid;
}

public void aggiungiPadre(ActionEvent evt) {

    HtmlSelectOneListbox sor = new HtmlSelectOneListbox();
    FacesContext fc = FacesContext.getCurrentInstance();
    ELContext elcntx = fc.getELContext();
    Application app = fc.getApplication();
    ExpressionFactory xprfct = app.getExpressionFactory();
 ValueExpression ve = xprfct.createValueExpression(elcntx,"#{elpad.itemScelto}", String.class);
    ve.getValue(FacesContext.getCurrentInstance().getELContext());
    sor.setValueExpression("value", ve);

    log.error("Il componente HtmlSelectOneListbox sor è stato creato con ID : " + sor.getClientId() + " e ValueExpression : " + sor.getValueExpression("value") + " quindi ha valore : " + sor.getValue());

    UISelectItems a = new UISelectItems();

    items.add(0, new SelectItem("poba", "poba"));

 ValueExpression ve1 = xprfct.createValueExpression(elcntx,"#{elpad.items}", ArrayList.class);
    ve1.getValue(FacesContext.getCurrentInstance().getELContext());
    a.setValueExpression("valuee", ve1);

    log.error("Il componente UISelectItems a è stato creato con ID : " + a.getClientId() + " e ValueExpression : " + a.getValueExpression("valuee") + " quindi ha valore : " + a.getValue() + " per l'attributo items : " + items.get(0).getLabel() + " di dimensione : " + items.size() + " ;" );

    sor.getChildren().add(a);

    customGrid.getChildren().add(sor);
    padreCorrenteC = sor;

    /*FacesContext facesContext = FacesContext.getCurrentInstance();
    ELContext elContext = facesContext.getELContext();
    ValueExpression valueExpression = facesContext.getApplication().getExpressionFactory()
.createValueExpression(elContext, "#{elpad.items}", String.class);

    valueExpression.setValue(elContext, ris);*/

    padreCorrente = padreCorrenteC.getId();
}

public void aggiungiFiglio(ActionEvent evt) {

    items.add(new SelectItem(padreCorrente, padreCorrente.toString()));

}

} 
```

那就是我的 XHTML 页面

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"       "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:icecore="http://www.icefaces.org/icefaces/core"
      xmlns:ace="http://www.icefaces.org/icefaces/components"
      xmlns:ice="http://www.icesoft.com/icefaces/component"
      >
    <h:head>
        <title>Cambia padre</title>
    </h:head>
    <h:body>
        <ice:form> 
            <ice:panelGrid binding="#{elpad.customGrid}"> 
            </ice:panelGrid>
            <ice:commandButton value="Aggiungi padre" actionListener="#    {elpad.aggiungiPadre}"></ice:commandButton>
            <ice:commandButton value="Aggiungi figlio" actionListener="#    {elpad.aggiungiFiglio}"></ice:commandButton>
        </ice:form>
        <ice:outputLabel value="#{elpad.padreCorrente}"></ice:outputLabel>
    </h:body>
</html> 
```

有人能帮我吗？我要做的是使用第一个按钮创建一个带有 SelectItems 子项的 SelectOneList，并使用第二个按钮将项目添加到列表中。我认为我在创建第二个 ValueExpression 时遗漏了一些东西（因为我尝试使用记录器进行一些测试并返回 null）但我不知道是什么

# mysql - MySql 唯一 ids / 从 Mysql 中提取数据

> ID：13481616
> 
> 赞同：1
> 
> 时间：2012-11-20T20:32:55.520
> 
> 标签：mysql

我有一个关于从 mysql 数据库中提取唯一 ID 和数据的问题。当使用 LEFT JOIN mysql 命令和其他 mysql 命令连接表时，如何将唯一 ID 附加到您从 MySql 数据库中提取的项目上？他们无论如何都要给物品一个唯一的ID吗？感谢大家！

```
SELECT y.`name` AS `year` , ma.`name` AS make, mo.`name` AS model 
FROM bhph_car_models mo 
LEFT JOIN bhph_car_years `y` ON y.`id` = mo.`car_year_id` AND y.`active` =1 
LEFT JOIN bhph_car_makes ma ON ma.`id` = mo.`car_make_id` AND ma.`active` =1 
WHERE mo.`active` =1 
LIMIT 0 , 30 
```

感谢大家！

# windows - Web 服务 - 排除身份验证 - IIS 7.0 Web Config

> ID：13481621
> 
> 赞同：2
> 
> 时间：2012-11-20T20:33:03.537
> 
> 标签：windows

我们使用 IIS 7.0 作为 Web 服务器 - 它被配置为访问不同服务器上的 IBM WAS6 应用程序服务器。我们最近使用 Ping 身份管理解决方案实施了单点登录。正在为应用程序正确调用已实现的身份管理解决方案 - 我们需要为 Web 服务排除它，它们是我们在 WAS 上运行的应用程序的一部分 应用程序 URL 具有以下 URL 结构 [http://test.com/appname/服务/服务](http://test.com/appname/services/Service)

我们已经尝试在 IIS web.config 中包含位置路径部分，但它似乎没有生效。我们如何在 web.config 中包含配置更改以包含排除逻辑以避免在应用程序服务器上调用此 Web 服务时进行身份验证

任何帮助是极大的赞赏..

# java - 如何将字符串输出到 txt 文件？

> ID：13481623
> 
> 赞同：0
> 
> 时间：2012-11-20T20:33:20.287
> 
> 标签：java, file, output

我正在使用 java 中的 DES 加密器，我有最后一个函数应该将加密数据输出到输出文件，这就是函数：

```
public void OutputWrite (int[][] Result) throws IOException{
  String EncryptedMessage="",out="";
  PrintWriter file = new PrintWriter(new File("EncryptedMessage.txt"));
  for (int i = 0; i <Result.length; i++) { 
        for (int j = 0; j <Result[0].length; j++) {
                out = out + String.valueOf(Result[i][j]);
         }
      int x = Integer.parseInt(out,2);
      char c = (char)x;
      EncryptedMessage = EncryptedMessage + c;
      out = out.replace(out,"");
  }
  file.write(EncryptedMessage);
  file.close();
} 
```

出于某种原因，当我在控制台上打印加密数据时结果没问题，但是当在“EncryptedMessage”文件中输出它时，某些字符不显示。

我尝试在此处处理和粘贴输出，但同样的事情再次发生，相同的字符没有显示

# unit-testing - 使用 TestNG 对 JavaFx 2 应用程序进行单元测试

> ID：13481626
> 
> 赞同：4
> 
> 时间：2012-11-20T20:33:31.527
> 
> 标签：unit-testing, javafx-2, testng

我写了一个相当复杂的 JavaFx 2 应用程序，我想为它写一堆单元测试。问题是当我尝试进行测试时，我收到一个运行时错误，抱怨未初始化的工具包。

据我所知，我应该以某种方式在 @BeforeClass 方法中调用 Application.launch() ，但这会导致死锁，因为 Application.launch() 不会返回调用线程。

所以问题是我应该如何初始化 JavaFx？

这是不起作用的代码骨架：

```
public class AppTest extends Application {

    @BeforeClass
    public void initialize() {
        launch(); //this causes a deadlock
    }

    @Test
    public void test1() {
        //conduct test here
    }

    @Test
    public void test2() {
        //conduct other test here
    }

    @Override
    public void start(Stage arg0) throws Exception {
    } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-22T07:54:21.240

从stackoverflow上的[另一个问题](https://stackoverflow.com/questions/11385604/how-do-you-unit-test-a-javafx-controller-with-junit)，我让自己成为了这个小助手类：

```
import javafx.application.Application;
import javafx.stage.Stage;

public class JavaFXInitializer extends Application {

    private static Object barrier = new Object();

    @Override
    public void start(Stage primaryStage) throws Exception {
        synchronized(barrier) {
            barrier.notify();
        }
    }

    public static void initialize() throws InterruptedException {
        Thread t = new Thread("JavaFX Init Thread") {
            public void run() {
                Application.launch(JavaFXInitializer.class, new String[0]);
            }
        };
        t.setDaemon(true);
        t.start();      
        synchronized(barrier) {
            barrier.wait();
        }
    }
} 
```

然后可以在 @BeforeClass 设置方法中轻松使用它：

```
@BeforeClass
public void setup() throws InterruptedException {
    JavaFXInitializer.initialize();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T12:41:31.690

主要想法是考虑您的测试在 FX 线程内运行。当您创建一个扩展应用程序的类时，您实际上创建了一个进程。这就是您要测试的内容。

因此，要在应用程序上启动一些单元测试，首先创建一个扩展应用程序的 FXAppTest，然后在 FXAppTest 中启动单元测试。这是想法。

这是一个使用 JUnit 的示例。我创建了一个 Runner，它在 FXApp 中启动测试以进行测试。这是 FxApplicationTest 的代码示例（我们在其中启动单元测试）

```
 public class FxApplicationTest extends Application {

    private volatile boolean isStopped;

    @Override
    public void start(final Stage stage) {
        StackPane root = new StackPane();
        Scene scene = new Scene(root, 10, 10);
        stage.setScene(scene);
    }

    public void startApp() {
        launch();
    }

    public void execute(final BlockJUnit4ClassRunner runner, final RunNotifier notifier) throws InterruptedException {
        isStopped = false;
        Platform.runLater(new Runnable() {
            @Override
            public void run() {
                runner.run(notifier);
                isStopped = true;
            }
        });
        while (!isStopped) {
            Thread.sleep(100);
        }
    } 
```

和亚军：

```
import org.apache.log4j.Logger;
import org.junit.runner.Description;
import org.junit.runner.Runner;
import org.junit.runner.notification.RunNotifier;
import org.junit.runners.BlockJUnit4ClassRunner;
import org.junit.runners.model.InitializationError;

public class JUnitFxRunner extends Runner {

    private final BlockJUnit4ClassRunner runner;
    private final Logger LOGGER = Logger.getLogger(JUnitFxRunner.class);

    public JUnitFxRunner(final Class<?> klass) throws InitializationError {
        super();
        runner = new BlockJUnit4ClassRunner(klass);
    }

    @Override
    public Description getDescription() {
        return Description.EMPTY;
    }

    @Override
    public void run(final RunNotifier notifier) {
        try {

            final FxApplicationTest fxApplicationTest = new FxApplicationTest();

            MyTestRunner runnable = new MyTestRunner(runner, notifier, fxApplicationTest);
            new Thread(runnable).start();
            Thread.sleep(100);
            runnable.execute();
        } catch (Exception e) {
            LOGGER.error(e.getMessage(), e);
        }

    }

    private class MyTestRunner implements Runnable {

        private final BlockJUnit4ClassRunner runner;
        private final RunNotifier notifier;
        private final FxApplicationTest fxApp;

        public MyTestRunner(final BlockJUnit4ClassRunner runner, final RunNotifier notifier, final FxApplicationTest fxApp) {
            this.runner = runner;
            this.notifier = notifier;
            this.fxApp = fxApp;
        }

        @Override
        public void run() {
            fxApp.startApp();
        }

        public void execute() throws InterruptedException {
            fxApp.execute(runner, notifier);
        }
    }

} 
```

现在，只需使用 runner 启动测试：

```
import fr.samarie_projects.fx.utils.JUnitFxRunner;

@RunWith(JUnitFxRunner.class)
public class MainFxAppTest {

    @org.junit.Test
    public void testName() throws Exception {
        MainFxApp fxApp = new MainFxApp();
        fxApp.start(new Stage());
    }

} 
```

本单元测试 MainFxApp

```
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.layout.StackPane;
import javafx.stage.Stage;

public class MainFxApp extends Application {

    @Override
    public void start(final Stage stage) throws Exception {
        StackPane root = new StackPane();
        Scene scene = new Scene(root, 10, 10);
        stage.setScene(scene);
    }

    public static void main(final String[] args) {
        launch(args);
    }

} 
```

当然，需要审查此代码。它只是提出这个想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T21:10:55.827

好吧，考虑到您的 JavaFX 应用程序可能位于**project-root/src/main/java/package/FXApp.java** ，那么您的测试可能位于其他位置，例如 **project-root/src/test/java/package/FXAppTest。爪哇** _ 在这种情况下，FXAppTest 类可以通过使用 BeforeClass 对其进行初始化来调用 FXApp 类。

从理论上讲，您应该能够使用以下内容启动您的 FX 应用程序：

```
// imports located here that import junit 4.11+ packages (or TestNG)
public class FXAppTest {
@BeforeClass
public void initialize() {
   FXApp fxa = new FXApp();
   while ( fxa.isLoading() ) {
      // do nothing
   }
}
.... 
```

注意：*请注意，FXAppTest 不会在此处扩展 Application。*

现在，如果这不能提示您解决问题，您可以在 JVM 上启用 JMX args，然后使用 JVisualVM 查看锁定的线程。

# python - python按列表内部列表对字典进行排序

> ID：13481644
> 
> 赞同：1
> 
> 时间：2012-11-20T20:34:29.007
> 
> 标签：python, sorting

我正在使用 Python 2.5。我有一本字典，其中包含列表列表作为值

```
{'a': [['6', 3]], 'b': [['5', 1], ['6', 5]], 'c': [['446', 2],['6', 11],['67', 86]] } 
```

我想按第一个列表项的第二个元素对其进行排序，因此，上面的排序如下：

```
'b': [['5', 1], ['6', 5]], 
'c': [['446', 2],['6', 11],['67', 86]]
'a': [['6', 3]] 
```

有什么建议么？

谢谢斯科特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T20:36:53.103

字典本身是无序的，因此您无法对其本身进行排序。如果要创建键值对的排序列表，可以这样做：

```
sorted(myDict.iteritems(), key=lambda x: x[1][0][1]) 
```

`iteritems`返回一个可迭代的 (key, value) 对，所以`x[1][0][1]`这意味着“取该对的第二个元素（即值），并取其第一个元素（即列表列表中的第一个列表）并取其中的第二个元素 --- 换句话说，第一个列表中的第二个元素，这就是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T20:40:52.513

字典没有顺序。

但是，标准库中有一个名为`collections.OrderedDict`保留插入顺序的类。你可以像这样创建一个：

```
>>> collections.OrderedDict(sorted(myDict.iteritems(), key=lambda x: x[1][0][1])
OrderedDict([('b', [['5', 1], ['6', 5]]), ('c', [['446', 2], ['6', 11], ['67', 86]]), ('a', [['5', 4]])]) 
```

`myDict.iteritems()`返回 s 的序列`(key, value)` `tuple`。（您也可以使用`items`，它将序列作为列表而不是迭代器返回——但它可以在 Python 3 中工作，但`iteritems`不能。）

`sorted`按 对它们进行排序`key`。

The`key`是一个函数，它`value`从其中一个`tuple`s、that 的第二个元素`value`和第二个元素的第一个元素中获取，这是你想要排序的。

`OrderedDict`Python 2.5 中不存在该类，但它是在纯 Python 中实现的。如果您查看2.7[的文档，有一个指向](http://docs.python.org/2/library/collections.html)[代码](http://hg.python.org/cpython/file/2.7/Lib/collections.py)的链接，您可以将其复制并粘贴到您的 2.5 程序中。或者，您可以使用借用到标准库中的 ActiveState 配方，或者在 PyPI 上寻找一个模块来为您做这件事。

# winapi - 即使窗口存在，FindWindow 在 MASM32 程序中也返回零

> ID：13481645
> 
> 赞同：5
> 
> 时间：2012-11-20T20:34:32.473
> 
> 标签：winapi, assembly, x86, masm, masm32

我正在尝试用汇编编写一个程序，我需要的第一件事就是特定进程的主窗口的句柄。我一直在尝试使用 FindWindow 来获取它，但到目前为止还没有运气；FindWindow 显然一直返回零。谁能指出我在这里错过了什么？谢谢。

```
.486
.model flat, stdcall
option casemap :none
include \masm32\include\user32.inc
include \masm32\include\kernel32.inc
includelib \masm32\lib\user32.lib
includelib \masm32\lib\kernel32.lib

.data
    NtpTitle    db  "Untitled - Notepad",0
    MsgNoNtp    db  "Notepad not found.",0
    MsgNtp      db  "Found Notepad.",0
    NullString  db  0
    hWndNtp     dd  0

.code
start:
    invoke FindWindow, offset NullString, offset NtpTitle
    mov hWndNtp, eax
    jz noNotepad
    invoke MessageBox, 0, offset MsgNtp, 0, 40h
    invoke ExitProcess, 0

noNotepad:
    invoke MessageBox, 0, offset MsgNoNtp, 0, 10h
    invoke ExitProcess, 1

end start 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T21:46:15.343

您应该设置`lpClassName`为 NULL，而不是将地址设置为空字符串。

```
invoke FindWindow, 0, offset NtpTitle 
```

您没有测试`FindWindow`;的返回值 mov 不修改标志。

```
test eax,eax
jz noNotepad 
```

# php - 将特定数量添加到购物车

> ID：13481646
> 
> 赞同：-1
> 
> 时间：2012-11-20T20:34:33.720
> 
> 标签：php

我有一张表，其中显示了我在数据库中选择的产品....在这张表中，我有一个`<input type=\"text\" name=\"introduce[]\"></td>";`

```
 while($producto= $db->next()) {

        echo "<form id=\"form\" name=\"formu\"  action =\"shoppingcart.php?action=add&id=".$producto['id_producto']."\" method=\"POST\" target=\"_blank\">";
        echo "<tr>";
        echo "<td style='font-size:20px' align='center'><input type='submit' value='PEDIR'></td>";  
        echo "<td style='font-size:20px' align='center'><input type=\"text\" name=\"introduce[]\"></td>";
        echo "<td style='font-size:20px' align='center'>".$producto['codinterno']."</td>";
        echo "<td style='font-size:20px' align='center'>".$producto['nombreproducto']."</td>";
        echo "<td style='font-size:20px' align='center'>".$producto['nombrecompañia']."</td>";
        echo "<td style='font-size:20px' align='center'>".$producto['cantidad']."</td>";
        echo "<td style='font-size:20px' align='center'>".$producto['codbarras']."</td>";
        echo "</tr>";
} 
```

在这个输入中，我想手动输入一个数量（一个数字）。这个数量被发布到另一个页面调用 shoppingcart.php 我有以下切换选项。

> ```
>  <?php
>   switch($action) { 
>   case "add":
> $_SESSION['cart'][$product_id]= ???????????????; 
> break; } ?> 
> ```

最后想把表中手动引入的那个数量加到购物车中的产品数量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:43:36.657

你可以使用这个代码

```
 echo "<td style='font-size:20px' align='center'><input type=\"text\" name=\"introduce\"></td>";
  ...
  $action = $_GET['action'];
  $id = $_GET['id'];
  switch($action) { 
    case "add":
      $_SESSION['cart'][$id] = $_POST['introduce'];
      break;
  } 
```

# java - 新的哈希表条目覆盖另一个键的值 - Java

> ID：13481651
> 
> 赞同：-1
> 
> 时间：2012-11-20T20:35:15.820
> 
> 标签：java, hashtable, overwrite

我正在努力解决这个哈希表问题（Java 新手）。程序接收事件 ADD_info 的实例，然后运行“public ADD_info()”方法。对于每个实例，我想将键/值对写入哈希表（键：TASK.value，值：INFO_add.value - 两个变量都用 ADD_info 事件在外部填充）。我可以添加一个条目，但是当我输入第二个条目时，第一个条目的值会被覆盖。下面给出了简化的代码，以及程序输出。

```
public class ProdInfo_SIFB extends fb.rt.FBInstance {
    /** EVENT ADD_info */
    public final EventInput ADD_info = new EventInput(this);

    /** EVENT ADDED */
    public final EventOutput ADDED = new EventOutput();

    /** VAR TASK:WSTRING */
    public WSTRING TASK = new WSTRING();

    /** VAR INFO_add:WSTRING */
    public ARRAY INFO_add = new ARRAY(new WSTRING(), 5);;

    Hashtable Product_info = new Hashtable();  //instantiate hashtable

    public ProdInfo_SIFB(){
        super();
    }
    public void serviceEvent(EventServer e){

        if (e == ADD_info) service_ADD_info();
    }

    /** Services the ADD_info event. */
    public void service_ADD_info(){

        System.out.println("TASK.value = " + TASK.value);  //display TASK.value content
        //display entries of INFO_add array as received from external source
        for(int j = 0; j < INFO_add.value.length; j++){
            System.out.println("INFO_add_" + j + ":" + INFO_add.value[j].toString());
        }

        Product_info.put(TASK.value, INFO_add.value);  //add key and value to hashtable

        System.out.println("No. of Keys = " + Product_info.size());

        // Display all elements in hash table.
        Enumeration tasks = Product_info.keys();
        while(tasks.hasMoreElements()) {
            String str = (String) tasks.nextElement();
            ANY[] info = (ANY[]) Product_info.get(str);
            System.out.println(str + ": ");
            for(int i = 0; i < info.length; i++){
                System.out.println("info_" + i + ": " + info[i].toString());
            }
        }

        ADDED.serviceEvent(this);
    }
} 
```

对于第一个实例，INFO_add 数组和哈希表的条目如下所示：

```
TASK.value = "TASK1"
INFO_add_0:"1"
INFO_add_1:"2"
INFO_add_2:"3"
INFO_add_3:"4"
INFO_add_4:"5"

/** HASHTABLE ENTRIES */
No. of Keys = 1
TASK1
info_0: "1"
info_1: "2"
info_2: "3"
info_3: "4"
info_4: "5" 
```

然后，对于第二种情况：

```
TASK.value = "TASK2"
INFO_add_0:"11"
INFO_add_1:"22"
INFO_add_2:"33"
INFO_add_3:"44"
INFO_add_4:"55"

/** HASHTABLE ENTRIES */
No. of Keys = 2
TASK1
info_0: "11"
info_1: "22"
info_2: "33"
info_3: "44"
info_4: "55"
TASK2
info_0: "11"
info_1: "22"
info_2: "33"
info_3: "44"
info_4: "55" 
```

它显示了第一个键 TASK1 的值被覆盖。

任何帮助将不胜感激！另外，请原谅一些命名约定——其中一些是由 FBDK 自动生成的。

问候卡雷尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T20:48:49.367

我想您每次插入新的键/值对时都重用相同的 INFO_add 实例，您真正需要做的是`new ARRAY(new WSTRING(), 5);`每次开始使用下一个记录集时创建新实例。

我不确定您在哪里为 INFO_add 填充数据，但您可以在将其放入 Product_info 后重新初始化它：

```
Product_info.put(TASK.value, INFO_add.value);  //add key and value to hashtable
INFO_add = new ARRAY(new WSTRING(), 5); // add this line 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T20:50:06.793

检查您使用“TASK1”键添加到地图的对象在放入地图后是否被修改。我敢打赌这样的事情正在发生；

```
MyObject obj = new MyObject();
obj.setValue("1","2",3");
map.put("TASK1", obj);
obj.setValue("11","22",33");
map.put("TASK2", obj); 
```

将对象放入映射不会复制它，因此您最终会得到两个映射条目都指向相同的值。

# android - 如何以编程方式禁用位置服务？

> ID：13481653
> 
> 赞同：1
> 
> 时间：2012-11-20T20:35:18.487
> 
> 标签：android, service, location

有没有办法以编程方式禁用谷歌位置服务？我想编写一个应用程序以使用小部件将其关闭。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T20:52:38.517

> 有没有办法以编程方式禁用谷歌位置服务？

不，抱歉，您不能以编程方式禁用 GPS 等，除非通过安装在系统分区上的应用程序或由固件的签名密钥签名。IOW，您需要一部有根电话。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T20:44:22.090

据我所知，LocationManager 是一个无法关闭的系统服务。不过，您可以禁用该服务使用的所有位置提供程序，例如无线位置、GPS 等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-23T15:07:46.643

如果您使用的是，您可以通过模拟单击“*快速设置”中的“***位置**”选项`UiAutomater`来关闭定位服务。过滤器逻辑可能取决于平台。您可以使用.***[`uiautomatorviewer`](https://developer.android.com/topic/libraries/testing-support-library/index.html#UIAutomator)***

 ***IE

```
UiDevice.getInstance(getInstrumentation()).openQuickSettings();
UiDevice.getInstance(getInstrumentation()).findObject(new UiSelector().descriptionContains("Location").className(ViewGroup.class)).click(); 
```

**构建.gradle**

```
androidTestCompile 'com.android.support.test.uiautomator:uiautomator-v18:2.1.2' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T21:58:33.697

简短的回答是，不。但如果你真的需要关闭它，你可以提示用户这样做：

```
LocationManager loc = (LocationManager) this.getSystemService( Context.LOCATION_SERVICE );
        if( loc.isProviderEnabled(android.location.LocationManager.GPS_PROVIDER ) )
        {
            Toast.makeText( this, "Please turn off GPS", Toast.LENGTH_LONG).show();
            Intent myIntent = new Intent( Settings.ACTION_LOCATION_SOURCE_SETTINGS );
            startActivity(myIntent);

        }
        else
        {

        // Do nothing   
        } 
```

这可能对您的情况没有帮助，但这是我知道更改设置的唯一方法。***

# xpath - 如何使 xpath 匹配空格？

> ID：13481655
> 
> 赞同：0
> 
> 时间：2012-11-20T20:35:25.063
> 
> 标签：xpath, whitespace

我可以匹配`sometext`并且`othertext`在

```
<br>
sometext
<br>
othertext 
```

使用 xpath 选择器'//br/following-sibling::text()'

`<br>`但是如果元素后只有空格

```
<br>

<br>
othertext 
```

只有第二场比赛发生。是否也可以匹配空格？

我试过了

```
//br/following-sibling::matches(., "\s+") 
```

尝试匹配空白但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T22:14:21.427

'matches' 是匹配正则表达式，而不是匹配节点。它不能与轴说明符一起使用。您可以将其用作条件，例如：

```
//br/following-sibling::text()[matches(., "\s+")] 
```

或者没有正则表达式（根据实现可能会更快），检查它是否全是空格而不是空字符串：

```
//br/following-sibling::text()[(normalize-space(.) = "") and (. != "")] 
```

# mysql - 在 MySQL 中按相邻列中的值查询

> ID：13481664
> 
> 赞同：0
> 
> 时间：2012-11-20T20:35:49.440
> 
> 标签：mysql, select, join, union, entity-attribute-value

我相信所有这种性质的问题都是这样开始的…… *我有两张桌子*：`fields`和`data`。`Fields`描述（不存在的）表的列名并`data`包含该（不存在的）表的数据。像这样...

领域：

```
 +----+---------+-------------+---------------+-------+----------+
    | ID | F_ORDER | NAME        | LABEL         | VALUE | TYPE     |
    +----+---------+-------------+---------------+-------+----------+
    |  1 |       1 | IS_EMPLOYEE | Region        |       | checkbox |
    |  2 |       3 | EM_AVATAR   | Avatar        |       | avatar   |
    |  3 |       4 | EM_JOBTITLE | Job Title     |       | text     |
    |  4 |       5 | EM_COMPANY  | Company       |       | text     |
    |  5 |       6 | EM_PHONE    | Phone         |       | text     |
    |  6 |       2 | EM_ORDER    | Display Order | 5     | text     |
    +----+---------+-------------+---------------+-------+----------+ 
```

数据：

```
 +-----+----------+---------+--------------------------------------+
    | ID  | FIELD_ID | USER_ID | VALUE                                |
    +-----+----------+---------+--------------------------------------+
    |   5 |        1 |       1 | YES                                  |
    |   6 |        2 |       1 |                                      |
    |   7 |        3 |       1 | Owner                                |
    |   8 |        4 |       1 | Acme, Inc.                           |
    |   9 |        5 |       1 | 123-456-7987                         |
    | 150 |        5 |      31 | 123-623-5555                         |
    | 149 |        4 |      31 | Acme, Inc.                           |
    | 148 |        3 |      31 | Sales and Customer Support           |
    | 147 |        2 |      31 |                                      |
    | 146 |        1 |      31 | YES                                  |
    |  26 |        1 |       6 | NO                                   |
    |  27 |        2 |       6 | http://example.com/avi/avi.jpeg      |
    |  28 |        3 |       6 | CEO                                  |
    |  29 |        4 |       6 | Acme                                 |
    |  30 |        5 |       6 | (123) 734-5555                       |
    |  31 |        1 |       7 | NO                                   |
    |  32 |        2 |       7 | http://example.com/avi/avi.jpeg      |
    |  33 |        3 |       7 | VP, Services                         |
    |  34 |        4 |       7 | Acme                                 |
    |  35 |        5 |       7 | (913) 963-5555                       |
    |  36 |        1 |      14 | NO                                   |
    |  37 |        2 |      14 | http://example.com/avi/avi.jpeg      |
    |  38 |        3 |      14 | Senior Accountant                    |
    |  39 |        4 |      14 | Acme                                 |
    |  40 |        5 |      14 | (123) 213-5555                       |
    |  41 |        1 |      10 | NO                                   |
    |  42 |        2 |      10 | http://example.com/avi/avi.jpeg      |
    |  43 |        3 |      10 | President                            |
    |  44 |        4 |      10 | Acme                                 |
    |  45 |        5 |      10 | (123) 734-5555                       |
    |  46 |        1 |      12 | NO                                   |
    |  47 |        2 |      12 | http://example.com/avi/avi.jpeg      |
    |  48 |        3 |      12 | Services Supervisor                  |
    |  49 |        4 |      12 | Acme                                 |
    |  50 |        5 |      12 | (123) 573-5555                       |
    |  51 |        1 |      11 | NO                                   |
    |  52 |        2 |      11 | http://example.com/avi/avi.jpeg      |
    |  53 |        3 |      11 | Operations Supervisor                |
    |  54 |        4 |      11 | Acme                                 |
    |  55 |        5 |      11 | (123) 259-5555                       |
    |  56 |        1 |       8 | NO                                   |
    |  57 |        2 |       8 | http://example.com/avi/avi.jpeg      |
    |  58 |        3 |       8 | General Information                  |
    |  59 |        4 |       8 | Acme                                 |
    |  60 |        5 |       8 | (123) 213-5555                       |
    |  61 |        1 |       9 | NO                                   |
    |  62 |        2 |       9 | http://example.com/avi/avi.jpeg      |
    |  63 |        3 |       9 | VP, Sales                            |
    |  64 |        4 |       9 | Acme                                 |
    |  65 |        5 |       9 | (123) 210-5555                       |
    +-----+----------+---------+--------------------------------------+ 
```

我要查找的查询的基本用语是：我想要所有员工的所有信息 ( `IS_EMPLOYEE = "YES"`)，并按他们的显示顺序列 ( `EM_ORDER`) 排序。

到目前为止，我的查询让我无处可去。我得到的结果有点像这样：

```
 +--------+------------+------------+-------+---------+-------+
     ID        FIELD_ID    NAME         LABEL   TYPE       VALUE
    +--------+------------+------------+-------+---------+-------+
     7         1           IS_EMPLOYEE  Region  checkbox   YES
    +--------+------------+------------+-------+---------+-------+ 
```

我需要的是这样的结果：

```
 +-------+------------+---------+-----------+----------+-------------+--------+
     USER_ID IS_EMPLOYEE  EM_AVATAR EM_JOBTITLE EM_COMPANY EM_PHONE      EM_ORDER   
    +-------+------------+---------+-----------+----------+-------------+--------+
     6       YES           http://  CEO         Acme       123-123-555   5 
    +-------+------------+---------+-----------+----------+-------------+--------+ 
```

当然，我正试图将它作为一个可用的数组（`$results['user_id']['jobtitle']`等）返回到 PHP 中。我可以得到**所有东西**并使用 PHP 完成它，但我正在尝试学习 MySQL，我认为这是一种比执行几个 foreach 块更快的方法......虽然我可能是错的。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T20:43:06.237

您的数据表以[实体-属性-值的](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)方式组织，这不是存储关系数据的有效方式。难怪使用 SQL 将其检索到每个属性一列的常规行中会很尴尬。

要使用 SQL 执行此操作，您基本上需要执行**数据透视查询**。这很难编写并且执行起来非常低效。

你最好为员工获取所有数据：

```
SELECT e.*, f.label
FROM Data AS is_employee
JOIN Data AS e USING (user_id)
JOIN Fields AS f ON e.field_id = f.id
WHERE (is_employee.field_id, is_employee.value) = (1, 'Yes'); 
```

然后在 PHP 代码中将其重组为关联数组的集合：

```
while ($row = $stmt->fetch()) {
  $data[ $row['user_id'] ][ $row['label'] ] = $row['value'];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T20:46:07.653

这基本上是一个`PIVOT`但 MySQL 没有`PIVOT`函数，因此您可以使用聚合函数和`CASE`语句来复制它。

静态版本是当您知道要转换为列的所有值时（这些是您的字段名称）：

```
select 
  d.user_id,
  max(case when f.name = 'IS_EMPLOYEE' then d.value else null end) IS_EMPLOYEE,
  max(case when f.name = 'EM_AVATAR' then d.value else null end) EM_AVATAR,
  max(case when f.name = 'EM_JOBTITLE' then d.value else null end) EM_JOBTITLE,
  max(case when f.name = 'EM_COMPANY' then d.value else null end) EM_COMPANY,
  max(case when f.name = 'EM_PHONE' then d.value else null end) EM_PHONE,
  max(case when f.name = 'EM_ORDER' then d.value else null end) EM_ORDER
from data d
left join fields f
  on f.id = d.FIELD_ID
group by d.user_id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/c7ee3/9)

结果：

```
| USER_ID | IS_EMPLOYEE |                       EM_AVATAR |                EM_JOBTITLE | EM_COMPANY |       EM_PHONE | EM_ORDER |
---------------------------------------------------------------------------------------------------------------------------------
|       1 |         YES |                          (null) |                      Owner | Acme, Inc. |   123-456-7987 |   (null) |
|       6 |          NO | http://example.com/avi/avi.jpeg |                        CEO |       Acme | (123) 734-5555 |   (null) |
|       7 |          NO | http://example.com/avi/avi.jpeg |               VP, Services |       Acme | (913) 963-5555 |   (null) |
|       8 |          NO | http://example.com/avi/avi.jpeg |        General Information |       Acme | (123) 213-5555 |   (null) |
|       9 |          NO | http://example.com/avi/avi.jpeg |                  VP, Sales |       Acme | (123) 210-5555 |   (null) |
|      10 |          NO | http://example.com/avi/avi.jpeg |                  President |       Acme | (123) 734-5555 |   (null) |
|      11 |          NO | http://example.com/avi/avi.jpeg |      Operations Supervisor |       Acme | (123) 259-5555 |   (null) |
|      12 |          NO | http://example.com/avi/avi.jpeg |        Services Supervisor |       Acme | (123) 573-5555 |   (null) |
|      14 |          NO | http://example.com/avi/avi.jpeg |          Senior Accountant |       Acme | (123) 213-5555 |   (null) |
|      31 |         YES |                          (null) | Sales and Customer Support | Acme, Inc. |   123-623-5555 |   (null) | 
```

如果您有未知数量的值要转换为列，那么您可以使用准备好的语句来动态生成 sql。

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'max(case when f.name = ''',
      name,
      ''' then d.value end) AS ',
      name
    )
  ) INTO @sql
FROM fields;

SET @sql = CONCAT('SELECT d.user_id, ', @sql, ' 
                  from data d
                  left join fields f
                    on f.id = d.FIELD_ID
                   GROUP BY d.user_id');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/c7ee3/11)

两者都会产生相同的结果。

然后，您可以添加一个`WHERE`子句来过滤掉任何不需要的行。

# drupal - Nginx 和 Drupal

> ID：13481665
> 
> 赞同：0
> 
> 时间：2012-11-20T20:35:51.117
> 
> 标签：drupal, nginx, drupal-6

我使用 nginx 运行 drupal 6，但是当我运行 mydomain.com/update.php 时，它似乎没有正确完成。我已经调整了配置以运​​行它，但在单击“更新”按钮后我看不到任何结果。它永远不会离开更新页面。这让我相信更新没有发生

我的问题

*   如何让 update.php 正确完成。

在我用来运行drupal的nginx框架中，包含一个文件，它设置了对update.php的访问，它如下所示：请注意，我暂时删除了任何与.htaccess相关的安全性，因此我可以获得更新和/ 或 cron 运行。

```
# -*- mode: nginx; mode:autopair; mode: flyspell-prog; ispell-local-dictionary: "american" -*-
### Configuration file for Drupal if you're not using drush to update your site or run cron.

## XMLRPC. Comment out if not enabled.
location = /xmlrpc.php {
    fastcgi_pass phpcgi;
    # To use Apache for serving PHP uncomment the line bellow and
    # comment out the above.
    #proxy_pass http://phpapache;
}

## Restrict cron access to a specific host.
location = /cron.php {
#    ## If not allowed to run cron then issue a 404 and redirect to the
#    ## site root.
#    if ($not_allowed_cron) {
#        return 404 /;
#    }
    fastcgi_pass phpcgi;
#    ## To use Apache for serving PHP uncomment the line bellow and
#    ## comment out the above.
#    #proxy_pass http://phpapache;
}

## Run the update from the web interface with Drupal 7.
location = /authorize.php {
    fastcgi_pass phpcgi;
    ## To use Apache for serving PHP uncomment the line bellow and
    ## comment out the above.
    #proxy_pass http://phpapache;
}

location = /update.php {
    #auth_basic "Restricted Access"; # auth realm
    #auth_basic_user_file .htpasswd-users; # htpasswd file
    fastcgi_pass phpcgi;
    ## To use Apache for serving PHP uncomment the line bellow and
    ## comment out the above.
    #proxy_pass http://phpapache;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T10:10:34.803

看看这个项目[https://github.com/perusio/drupal-with-nginx](https://github.com/perusio/drupal-with-nginx)

你会在那里找到用于 drupal 配置的 nginx。

# perl - 非 Ascii 数据在不同的 Perl 安装中表现不同

> ID：13481668
> 
> 赞同：2
> 
> 时间：2012-11-20T20:36:12.183
> 
> 标签：perl, utf-8

我有以下脚本，它在我拥有的两个不同的 Perl 安装中表现不同。一个是 Perl 5.8.5，另一个是 Perl 5.8.8。

这是脚本：

```
#!/usr/bin/perl

use FindBin(qw($Bin));

use lib $Bin;
use lib "$Bin/../lib";

use XML::LibXML;

use strict;    # quote strings, declare variables
use warnings;  # on by default
use warnings  qw(FATAL utf8);    # fatalize encoding glitches
use open      qw(:std :utf8);    # undeclared streams in UTF-8

my $xml =<<EOS;
<?xml version="1.0" encoding="UTF8"?>
<foo>Привет, мир!</foo>
EOS

my $parser = new XML::LibXML;

my $doc = '';
eval { $doc = $parser->parse_string($xml); };

if ($@) {
    die "Error: $@";
} 

my $root = $doc->getDocumentElement();

print "XML after parsing: ", $root->toString(), "\n"; 
```

* * *

在我的 5.8.8 Perl 安装中，我得到：

```
XML after parsing: <foo>Привет, мир!</foo> 
```

在我的 5.8.5 Perl 安装中，我得到：

```
XML after parsing: <foo>&#x41F;&#x440;&#x438;&#x432;&#x435;&#x442;, &#x43C;&#x438;&#x440;!</foo> 
```

我希望我的 5.8.5 安装在这方面表现得像 5.8.8 一样。这只是升级我的 Perl，还是设置一些特殊的编译标志？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T20:42:43.180

首先，两个输出是等价的。XML::LibXML 可以自由地生成任何一个，并且对于接收解析器来说应该无关紧要。当然，XML 应该是人类可读的，这可能是您关心的问题。

不，XML::LibXML 没有选项来控制它转义的字符。事实上，我只知道它只在需要时才逃跑，这是第一个行为。

无需升级 Perl。升级 XML::LibXML 或 libxml2（XML::LibXML 使用的底层库）可以解决问题。

```
# XML::LibXML's version
>perl -MXML::LibXML -E"say $XML::LibXML::VERSION"
1.70

# libxml2's version
>perl -MXML::LibXML -E"say XML::LibXML::LIBXML_DOTTED_VERSION"
2.7.7 
```

* * *

题外话：

1.  我认为您的源代码是使用 UTF-8 编码的？如果是这样，我会添加`use utf8;`让 Perl 知道这一点。如果你这样做，你需要改变

    ```
    my $xml = <<EOS; 
    ```

    到

    ```
    my $xml = encode_utf8(<<EOS); 
    ```

2.  使用

    ```
    <<'EOI' 
    ```

    代替

    ```
    <<EOI 
    ```

    将防止 Perl 弄乱您的 XML（防止插值和解释`\`序列）。

# mpmovieplayercontroller - 如何关闭 MPMoviePlayer 中的子视图？

> ID：13481669
> 
> 赞同：0
> 
> 时间：2012-11-20T20:36:11.700
> 
> 标签：mpmovieplayercontroller, xcode4.5, subview, addsubview, mpmovieplayer

我有一个在启动时自动播放的视频。短片完成后会显示黑屏。我想关闭子视图以显示图像或自动加载另一个控制器？

下面是我的代码：

```
 (void)viewDidLoad

 {

    {
    NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                         pathForResource:@"cover" ofType:@"mp4"]];

    MPMoviePlayerController *player = [[MPMoviePlayerController alloc]
                                       initWithContentURL:url];

    player.movieSourceType = MPMovieSourceTypeFile;

    [player setControlStyle:MPMovieControlStyleNone];

    player.view.frame = CGRectMake(0, 0, 768, 960);

    [self.view addSubview:player.view];
    [player play];

    player = nil;

} 
```

感谢您的帮助..我是这方面的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T18:13:00.600

几周前我想出了很多。查看可用的通知。[http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)

将类似这样的内容添加到 viewDidLoad：

```
// Remove the movie player view controller from the "playback did finish" notification observers
[[NSNotificationCenter defaultCenter] removeObserver:_moviePlayer
                                                name:MPMoviePlayerPlaybackDidFinishNotification
                                              object:_moviePlayer];
// Register this class as an observer instead
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(movieFinishedCallback:)
                                             name:MPMoviePlayerPlaybackDidFinishNotification
                                           object:_moviePlayer]; 
```

现在您有了一个方法，您可以在其中重新添加视图、缩略图或其他任何内容：

```
- (void)movieFinishedCallback:(NSNotification*)aNotification
{   
    // Obtain the reason why the movie playback finished
    NSNumber *finishReason = [aNotification userInfo][MPMoviePlayerPlaybackDidFinishReasonUserInfoKey];

    if ([finishReason intValue] == MPMovieFinishReasonPlaybackEnded) {

       [self.view addSubview:self.moviePlayer.view];
    } 
```

（这段代码是从我的项目中即时改编的，可能需要思考才能适应！）

MPMoviePlayerController 有很多在电影播放、暂停、停止、结束等时触发的通知。您可以将代码添加到这些方法中，以便很好地控制您的演示文稿。

就我而言，花了大约一天的时间进行研究和修改（可能还有半天的清理和调整），但我设法获得了一个非常漂亮的播放/暂停透明按钮，暂停时带有“播放图标”图像叠加或停止，所有加载或卸载基于播放器状态。这是一个简单的自定义播放器控件，完全符合我的要求。完全可行，只需从一个玩家状态开始，得到你想要的，然后进入下一个状态。

# html - 如何让单边盒子阴影从边到边出现？

> ID：13481670
> 
> 赞同：1
> 
> 时间：2012-11-20T20:36:12.037
> 
> 标签：html, css

对于具有 100% 宽度并`box-shadow`定义为仅显示在底部的元素，如何使阴影沿元素的整个宽度显示一致？

目前，阴影在左右边缘都淡出；那里的阴影与中间明显不同。例子：

```
<style>
body { padding: 0; margin: 0; }
h1 { margin: 0; box-shadow: 0 10px 10px #009;}
</style>

<h1>Bacon</h1> 
```

或查看[http://jsfiddle.net/RxVbt/1/](http://jsfiddle.net/RxVbt/1/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T20:45:03.943

我通过将 h1 更改为包括

```
margin-left: -10px; margin-right: -10px; padding-left: 10px; padding-right: 10px; 
```

负边距将阴影拉得足够宽，以使整个过程看起来都一样。这有点粗糙和hackish，但它有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T20:46:01.017

添加扩展距离以抵消模糊值。对于 10 像素的模糊，您需要 5 像素的散布（每个方向 5 像素 = 10 像素）例如：

```
 h1 { margin: 0; box-shadow: 0 5px 10px 5px #009;} 
```

见[http://jsfiddle.net/RxVbt/9/](http://jsfiddle.net/RxVbt/9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T20:42:23.600

试试这个： `h1 { margin: 0; box-shadow: 0px 10px #009;}`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T20:47:11.883

试试这个：

```
h1 { margin: 0; box-shadow: 0 2px 10px 8px #009;} 
```

[这里的](http://jsfiddle.net/RxVbt/41/)例子

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T20:48:24.013

为端盖添加负值。

`box-shadow: -5px -5px 10px 10px #009;`

[在这里摆弄](http://jsfiddle.net/RxVbt/19/)

# ruby-on-rails - ActiveRecord 按关联记录数查找

> ID：13481673
> 
> 赞同：0
> 
> 时间：2012-11-20T20:36:19.953
> 
> 标签：ruby-on-rails, activerecord, arel

我想要一个 ActiveRecord 查询，它可以让我返回所有**email_sessions**为零的**用户**。这是我的模型：

 **```
class User
    has_many :email_sessions
end

class EmailSession
    belongs_to :user
end 
```

在 AR 查询之后执行此操作非常简单，如下所示：

```
User.all.reject {|u| u.email_sessions.count > 0} 
```

但它会在计算上变得非常昂贵，因为它会逐步检查每个用户来检查计数。在此之后，我还想使用**arel将不同的****where**语句链接在一起。

任何 ActiveRecord sooper 天才都想尝试一下吗？:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T21:12:47.827

我就是这样做的，但不幸的是在旧版本的 Rails 中。也许在较新的版本中有更好的方法来做到这一点。

```
User.find(:all,
  :include => :email_sessions,
  :conditions => 'email_sessions.id IS NULL'
) 
```

编辑：使用 ARel：

```
User.includes(:email_sessions).where('email_sessions.id IS NULL') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T20:52:44.050

```
[64] pry(main)> User.all.reject {|u| u.trial_end_date == nil or u.email_sessions.count > 0}.count
=> 138
[65] pry(main)> User.where("users.id NOT IN(?) AND users.trial_end_date IS NOT NULL", EmailSession.group(:user_id).select(:user_id).map { |es| es.user_id }).count
=> 138 
```**

# java - 返回上一页 gui

> ID：13481675
> 
> 赞同：0
> 
> 时间：2012-11-20T20:36:28.017
> 
> 标签：java, swing, jframe

如果我添加了一个数字并在新页面（JFrame）中打印它。现在，我想回到

上一页添加另一个号码。

如何编写代码？因为我想保持打开新页面并返回上一页。这

新页面是显示用户已添加的号码。完全不知道

它。

我试过这个

第一帧称为“frame1”

第二帧称为“frame2”

```
 public static boolean isClicked = true;
   if(btnOK.equals(isClicked))
     {
         frame2.setVisible(true);
         frame1.setVisible(false);
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T20:52:43.367

1) 在 Java 中使用多个`JFrame`s 是一种不好的做法，请参见此处：

*   [使用多个 JFrame：好的还是坏的做法？](https://stackoverflow.com/questions/9554636/the-use-of-multiple-jframes-good-bad-practice)

2）我建议使用`LayoutManager`like ，它允许您在单个`CardLayout`容器（如 s ）之间翻转：`JPanel``JFrame`

*   [如何使用卡片布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

3）您可能还想用您的首字母`JFrame`代替`JDialog`/ `JOptionPane`，但这取决于首字母的用法`JFrame`。

# python - PyQt4 setItemDelegateForRow 导致分段错误

> ID：13481677
> 
> 赞同：1
> 
> 时间：2012-11-20T20:36:29.577
> 
> 标签：python, pyqt4, qtableview, qitemdelegate

我正在尝试使用 QTableView.setItemDelegateForRow() 方法在我的 QTableView 上设置特定于每一行数据的编辑器委托。当我在多行上设置委托时，它会导致 PyQt4 出现分段错误。它似乎至少部分与使用相同的变量来存储委托类的不同实例有关，如下所示：

```
# This code causes a segmentation fault
delegate = ListDelegate(choices0)
tableView.setItemDelegateForRow(0,delegate)
delegate = ListDelegate(choices1)
tableView.setItemDelegateForRow(1,delegate) 
```

但是，如果我使用不同的变量，它似乎可以正常工作，例如：

```
# This code works to set the delegate by row
delegate0 = ListDelegate(choices0)
tableView.setItemDelegateForRow(0,delegate0)
delegate1 = ListDelegate(choices1)
tableView.setItemDelegateForRow(1,delegate1) 
```

我有一个导致分段错误的代码示例，我将在最后包含该示例。我已经在 64 位的 Ubuntu Linux 和 Windows 7 上针对 python 2.7 进行了测试。

我意识到快速解决方法是只使用单独的变量，但在我的实际程序（不是这个示例代码）中，我试图在循环中设置委托，并使用字典或列表来存储委托似乎可以解决问题。

示例应用：

```
from PyQt4 import QtGui, QtCore
import sys

class PaletteListModel(QtCore.QAbstractListModel):

    def __init__(self, colors = [], parent = None):
        QtCore.QAbstractListModel.__init__(self,parent)
        self.__colors = colors

    # required method for Model class
    def rowCount(self, parent):
        return len(self.__colors)

    # optional method for Model class
    def headerData(self, section, orientation, role):
        if role == QtCore.Qt.DisplayRole:
            if orientation == QtCore.Qt.Horizontal:
                return QtCore.QString("Palette")
            else:
                return QtCore.QString("Color %1").arg(section)

        if role == QtCore.Qt.ToolTipRole:
            if orientation == QtCore.Qt.Horizontal:
                return QtCore.QString("Horizontal Header %s Tooltip" % str(section))
            else:
                return QtCore.QString("Vertical Header %s Tooltip" % str(section))

    # required method for Model class
    def data(self, index, role):
        # index contains a QIndexClass object. The object has the following
        # methods: row(), column(), parent()

        row = index.row()
        value = self.__colors[row]

        # keep the existing value in the edit box
        if role == QtCore.Qt.EditRole:
            return self.__colors[row].name()

        # add a tooltip
        if role == QtCore.Qt.ToolTipRole:
            return "Hex code: " + value.name()

        if role == QtCore.Qt.DecorationRole:
            pixmap = QtGui.QPixmap(26,26)
            pixmap.fill(value)

            icon = QtGui.QIcon(pixmap)

            return icon

        if role == QtCore.Qt.DisplayRole:

            return value.name()

    def setData(self, index, value, role = QtCore.Qt.EditRole):
        row = index.row()

        if role == QtCore.Qt.EditRole:
            color = QtGui.QColor(value)

            if color.isValid():
                self.__colors[row] = color
                self.dataChanged.emit(index, index)
                return True

        return False

    # implment flags() method
    def flags(self, index):
        return QtCore.Qt.ItemIsEditable | QtCore.Qt.ItemIsEnabled | QtCore.Qt.ItemIsSelectable

class ListDelegate(QtGui.QStyledItemDelegate):
    def __init__(self, colors = QtCore.QStringList(), parent = None):
        #super(ListDelegate, self).__init__()
        QtGui.QStyledItemDelegate.__init__(self,parent)
        self.__colors = colors
        #self.__current  = current

    def createEditor(self, parent, option, index):
        ed = QtGui.QComboBox(parent)
        ed.setEditable(True)

        # add each settings option to the combobox
        for s in self.__colors:
            ed.addItem(s)

        return ed

if __name__ == '__main__':

    app = QtGui.QApplication(sys.argv)
    app.setStyle("plastique")

    data = QtCore.QStringList()
    data << "one" << "two" << "three" << "four" << "five"

    tableView = QtGui.QTableView()
    tableView.show()

    red   = QtGui.QColor(255,0,0)
    green = QtGui.QColor(0,255,0)
    blue  = QtGui.QColor(0,0,255)

    model = PaletteListModel([red, green, blue])

    choices0 = QtCore.QStringList(["#FF0000","#00FF00","#0000FF"])
    choices1 = QtCore.QStringList(["#FF0000","#0000FF"])

    # This code works to set the delegate by row
    delegate0 = ListDelegate(choices0)
    tableView.setItemDelegateForRow(0,delegate0)
    delegate1 = ListDelegate(choices1)
    tableView.setItemDelegateForRow(1,delegate1)

    # This code causes a segmentation fault
    delegate = ListDelegate(choices0)
    tableView.setItemDelegateForRow(0,delegate)
    delegate = ListDelegate(choices1)
    tableView.setItemDelegateForRow(1,delegate)

    tableView.setModel(model)
    tableView.horizontalHeader()

    sys.exit(app.exec_()) 
```

Stacktrace（来自 Ubuntu 盒子）虽然我真的不知道如何解释它：

```
gdb python2.7-dbg
GNU gdb (GDB) 7.5-ubuntu
Copyright (C) 2012 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from /usr/bin/python2.7-dbg...done.
(gdb) run TestDelegateForRow.py
Starting program: /usr/bin/python2.7-dbg TestDelegateForRow.py
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".
[New Thread 0x7fffe6a78700 (LWP 12070)]
[New Thread 0x7fffe6277700 (LWP 12071)]
[New Thread 0x7fffe5442700 (LWP 12072)]

Program received signal SIGSEGV, Segmentation fault.
0x00007ffff5ca7cf8 in ?? () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
(gdb) backtrace
#0  0x00007ffff5ca7cf8 in ?? () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#1  0x00007ffff5cb27f6 in QTableView::paintEvent(QPaintEvent*) () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#2  0x00007ffff64f54d3 in sipQTableView::paintEvent (this=0xfbfa60, a0=0x7fffffffc0a0) at sipQtGuipart2.cpp:35590
#3  0x00007ffff57be802 in QWidget::event(QEvent*) () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#4  0x00007ffff5b6db66 in QFrame::event(QEvent*) () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#5  0x00007ffff5c7959b in QAbstractItemView::viewportEvent(QEvent*) () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#6  0x00007ffff64fbc9b in viewportEvent (a0=0x7fffffffc0a0, this=0xfbfa60) at sipQtGuipart2.cpp:36150
#7  sipQTableView::viewportEvent (this=0xfbfa60, a0=0x7fffffffc0a0) at sipQtGuipart2.cpp:36142
#8  0x00007ffff524a6d6 in QCoreApplicationPrivate::sendThroughObjectEventFilters(QObject*, QEvent*) () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4
#9  0x00007ffff576ee6c in QApplicationPrivate::notify_helper(QObject*, QEvent*) () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#10 0x00007ffff577330a in QApplication::notify(QObject*, QEvent*) () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#11 0x00007ffff67b62a6 in notify (a1=0x7fffffffc0a0, a0=0xe31b10, this=0xcfbcb0) at sipQtGuipart9.cpp:35916
#12 sipQApplication::notify (this=0xcfbcb0, a0=0xe31b10, a1=0x7fffffffc0a0) at sipQtGuipart9.cpp:35908
#13 0x00007ffff524a56e in QCoreApplication::notifyInternal(QObject*, QEvent*) () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4
#14 0x00007ffff57ba524 in QWidgetPrivate::drawWidget(QPaintDevice*, QRegion const&, QPoint const&, int, QPainter*, QWidgetBackingStore*) () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#15 0x00007ffff57bb01f in QWidgetPrivate::paintSiblingsRecursive(QPaintDevice*, QList<QObject*> const&, int, QRegion const&, QPoint const&, int, QPainter*, QWidgetBackingStore*) ()
   from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#16 0x00007ffff57bae64 in QWidgetPrivate::paintSiblingsRecursive(QPaintDevice*, QList<QObject*> const&, int, QRegion const&, QPoint const&, int, QPainter*, QWidgetBackingStore*) ()
   from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#17 0x00007ffff57bae64 in QWidgetPrivate::paintSiblingsRecursive(QPaintDevice*, QList<QObject*> const&, int, QRegion const&, QPoint const&, int, QPainter*, QWidgetBackingStore*) ()
   from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#18 0x00007ffff57bae64 in QWidgetPrivate::paintSiblingsRecursive(QPaintDevice*, QList<QObject*> const&, int, QRegion const&, QPoint const&, int, QPainter*, QWidgetBackingStore*) ()
   from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#19 0x00007ffff57ba0b5 in QWidgetPrivate::drawWidget(QPaintDevice*, QRegion const&, QPoint const&, int, QPainter*, QWidgetBackingStore*) () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#20 0x00007ffff5988958 in ?? () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#21 0x00007ffff5988d1e in ?? () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#22 0x00007ffff57eb6aa in ?? () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#23 0x00007ffff57ec6bb in QApplication::x11ProcessEvent(_XEvent*) () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#24 0x00007ffff5813fa2 in ?? () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#25 0x00007ffff44b7ab5 in g_main_context_dispatch () from /lib/x86_64-linux-gnu/libglib-2.0.so.0
#26 0x00007ffff44b7de8 in ?? () from /lib/x86_64-linux-gnu/libglib-2.0.so.0
#27 0x00007ffff44b7ea4 in g_main_context_iteration () from /lib/x86_64-linux-gnu/libglib-2.0.so.0
#28 0x00007ffff5278bf6 in QEventDispatcherGlib::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4
#29 0x00007ffff5813c1e in ?? () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#30 0x00007ffff52492bf in QEventLoop::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4
#31 0x00007ffff5249548 in QEventLoop::exec(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4
#32 0x00007ffff524e708 in QCoreApplication::exec() () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4
#33 0x00007ffff677762b in meth_QApplication_exec_ (sipArgs=<optimized out>) at sipQtGuipart9.cpp:37856
#34 0x0000000000486b1a in PyCFunction_Call (func=<built-in method exec_ of QApplication object at remote 0xe891e0>, arg=(), kw=0x0) at ../Objects/methodobject.c:81
#35 0x0000000000526610 in call_function (pp_stack=0x7fffffffd960, oparg=0) at ../Python/ceval.c:4021
#36 0x00000000005213fb in PyEval_EvalFrameEx (f=Frame 0xb89c00, for file TestDelegateForRow.py, line 131, in <module> (), throwflag=0) at ../Python/ceval.c:2666
#37 0x0000000000523de9 in PyEval_EvalCodeEx (co=0xcbd510, globals=
    {'choices0': <QStringList at remote 0x10fc2e0>, 'choices1': <QStringList at remote 0x10fc380>, 'app': <QApplication at remote 0xe891e0>, 'delegate0': <ListDelegate(_ListDelegate__colors=<...>) at remote 0xe89420>, 'delegate1': <ListDelegate(_ListDelegate__colors=<...>) at remote 0xe894e0>, 'blue': <QColor at remote 0x10fc240>, 'QtGui': <module at remote 0xcd2a20>, 'data': <QStringList at remote 0x10fc060>, '__package__': None, 'ListDelegate': <PyQt4.QtCore.pyqtWrapperType at remote 0xcfb6a0>, '__doc__': None, 'red': <QColor at remote 0x10fc100>, 'tableView': <QTableView at remote 0xe892a0>, '__builtins__': <module at remote 0x7ffff7fc5470>, '__file__': 'TestDelegateForRow.py', 'sys': <module at remote 0x7ffff7fc55a8>, '__name__': '__main__', 'PaletteListModel': <PyQt4.QtCore.pyqtWrapperType at remote 0xb955b0>, 'green': <QColor at remote 0x10fc1a0>, 'delegate': <ListDelegate(_ListDelegate__colors=<...>) at remote 0xe89660>, 'model': <PaletteListModel(_PaletteListModel__colors=[<...>, <...>, <...>]) at remote ...(truncated), locals=
    {'choices0': <QStringList at remote 0x10fc2e0>, 'choices1': <QStringList at remote 0x10fc380>, 'app': <QApplication at remote 0xe891e0>, 'delegate0': <ListDelegate(_ListDelegate__colors=<...>) at remote 0xe89420>, 'delegate1': <ListDelegate(_ListDelegate__colors=<...>) at remote 0xe894e0>, 'blue': <QColor at remote 0x10fc240>, 'QtGui': <module at remote 0xcd2a20>, 'data': <QStringList at remote 0x10fc060>, '__package__': None, 'ListDelegate': <PyQt4.QtCore.pyqtWrapperType at remote 0xcfb6a0>, '__doc__': None, 'red': <QColor at remote 0x10fc100>, 'tableView': <QTableView at remote 0xe892a0>, '__builtins__': <module at remote 0x7ffff7fc5470>, '__file__': 'TestDelegateForRow.py', 'sys': <module at remote 0x7ffff7fc55a8>, '__name__': '__main__', 'PaletteListModel': <PyQt4.QtCore.pyqtWrapperType at remote 0xb955b0>, 'green': <QColor at remote 0x10fc1a0>, 'delegate': <ListDelegate(_ListDelegate__colors=<...>) at remote 0xe89660>, 'model': <PaletteListModel(_PaletteListModel__colors=[<...>, <...>, <...>]) at remote ...(truncated), args=0x0, argcount=0, kws=0x0, kwcount=0, defs=0x0, defcount=0, closure=0x0) at ../Python/ceval.c:3253
---Type <return> to continue, or q <return> to quit---
#38 0x0000000000519e56 in PyEval_EvalCode (co=0xcbd510, globals=
    {'choices0': <QStringList at remote 0x10fc2e0>, 'choices1': <QStringList at remote 0x10fc380>, 'app': <QApplication at remote 0xe891e0>, 'delegate0': <ListDelegate(_ListDelegate__colors=<...>) at remote 0xe89420>, 'delegate1': <ListDelegate(_ListDelegate__colors=<...>) at remote 0xe894e0>, 'blue': <QColor at remote 0x10fc240>, 'QtGui': <module at remote 0xcd2a20>, 'data': <QStringList at remote 0x10fc060>, '__package__': None, 'ListDelegate': <PyQt4.QtCore.pyqtWrapperType at remote 0xcfb6a0>, '__doc__': None, 'red': <QColor at remote 0x10fc100>, 'tableView': <QTableView at remote 0xe892a0>, '__builtins__': <module at remote 0x7ffff7fc5470>, '__file__': 'TestDelegateForRow.py', 'sys': <module at remote 0x7ffff7fc55a8>, '__name__': '__main__', 'PaletteListModel': <PyQt4.QtCore.pyqtWrapperType at remote 0xb955b0>, 'green': <QColor at remote 0x10fc1a0>, 'delegate': <ListDelegate(_ListDelegate__colors=<...>) at remote 0xe89660>, 'model': <PaletteListModel(_PaletteListModel__colors=[<...>, <...>, <...>]) at remote ...(truncated), locals=
    {'choices0': <QStringList at remote 0x10fc2e0>, 'choices1': <QStringList at remote 0x10fc380>, 'app': <QApplication at remote 0xe891e0>, 'delegate0': <ListDelegate(_ListDelegate__colors=<...>) at remote 0xe89420>, 'delegate1': <ListDelegate(_ListDelegate__colors=<...>) at remote 0xe894e0>, 'blue': <QColor at remote 0x10fc240>, 'QtGui': <module at remote 0xcd2a20>, 'data': <QStringList at remote 0x10fc060>, '__package__': None, 'ListDelegate': <PyQt4.QtCore.pyqtWrapperType at remote 0xcfb6a0>, '__doc__': None, 'red': <QColor at remote 0x10fc100>, 'tableView': <QTableView at remote 0xe892a0>, '__builtins__': <module at remote 0x7ffff7fc5470>, '__file__': 'TestDelegateForRow.py', 'sys': <module at remote 0x7ffff7fc55a8>, '__name__': '__main__', 'PaletteListModel': <PyQt4.QtCore.pyqtWrapperType at remote 0xb955b0>, 'green': <QColor at remote 0x10fc1a0>, 'delegate': <ListDelegate(_ListDelegate__colors=<...>) at remote 0xe89660>, 'model': <PaletteListModel(_PaletteListModel__colors=[<...>, <...>, <...>]) at remote ...(truncated)) at ../Python/ceval.c:667
#39 0x000000000055685c in run_mod (mod=0xb91aa8, filename=0x7fffffffe374 "TestDelegateForRow.py", globals=
    {'choices0': <QStringList at remote 0x10fc2e0>, 'choices1': <QStringList at remote 0x10fc380>, 'app': <QApplication at remote 0xe891e0>, 'delegate0': <ListDelegate(_ListDelegate__colors=<...>) at remote 0xe89420>, 'delegate1': <ListDelegate(_ListDelegate__colors=<...>) at remote 0xe894e0>, 'blue': <QColor at remote 0x10fc240>, 'QtGui': <module at remote 0xcd2a20>, 'data': <QStringList at remote 0x10fc060>, '__package__': None, 'ListDelegate': <PyQt4.QtCore.pyqtWrapperType at remote 0xcfb6a0>, '__doc__': None, 'red': <QColor at remote 0x10fc100>, 'tableView': <QTableView at remote 0xe892a0>, '__builtins__': <module at remote 0x7ffff7fc5470>, '__file__': 'TestDelegateForRow.py', 'sys': <module at remote 0x7ffff7fc55a8>, '__name__': '__main__', 'PaletteListModel': <PyQt4.QtCore.pyqtWrapperType at remote 0xb955b0>, 'green': <QColor at remote 0x10fc1a0>, 'delegate': <ListDelegate(_ListDelegate__colors=<...>) at remote 0xe89660>, 'model': <PaletteListModel(_PaletteListModel__colors=[<...>, <...>, <...>]) at remote ...(truncated), locals=
    {'choices0': <QStringList at remote 0x10fc2e0>, 'choices1': <QStringList at remote 0x10fc380>, 'app': <QApplication at remote 0xe891e0>, 'delegate0': <ListDelegate(_ListDelegate__colors=<...>) at remote 0xe89420>, 'delegate1': <ListDelegate(_ListDelegate__colors=<...>) at remote 0xe894e0>, 'blue': <QColor at remote 0x10fc240>, 'QtGui': <module at remote 0xcd2a20>, 'data': <QStringList at remote 0x10fc060>, '__package__': None, 'ListDelegate': <PyQt4.QtCore.pyqtWrapperType at remote 0xcfb6a0>, '__doc__': None, 'red': <QColor at remote 0x10fc100>, 'tableView': <QTableView at remote 0xe892a0>, '__builtins__': <module at remote 0x7ffff7fc5470>, '__file__': 'TestDelegateForRow.py', 'sys': <module at remote 0x7ffff7fc55a8>, '__name__': '__main__', 'PaletteListModel': <PyQt4.QtCore.pyqtWrapperType at remote 0xb955b0>, 'green': <QColor at remote 0x10fc1a0>, 'delegate': <ListDelegate(_ListDelegate__colors=<...>) at remote 0xe89660>, 'model': <PaletteListModel(_PaletteListModel__colors=[<...>, <...>, <...>]) at remote ...(truncated), flags=0x7fffffffde50, arena=0x9f8ae0) at ../Python/pythonrun.c:1365
#40 0x00000000005567e2 in PyRun_FileExFlags (fp=0xb3e1b0, filename=0x7fffffffe374 "TestDelegateForRow.py", start=257, globals=
    {'choices0': <QStringList at remote 0x10fc2e0>, 'choices1': <QStringList at remote 0x10fc380>, 'app': <QApplication at remote 0xe891e0>, 'delegate0': <ListDelegate(_ListDelegate__colors=<...>) at remote 0xe89420>, 'delegate1': <ListDelegate(_ListDelegate__colors=<...>) at remote 0xe894e0>, 'blue': <QColor at remote 0x10fc240>, 'QtGui': <module at remote 0xcd2a20>, 'data': <QStringList at remote 0x10fc060>, '__package__': None, 'ListDelegate': <PyQt4.QtCore.pyqtWrapperType at remote 0xcfb6a0>, '__doc__': None, 'red': <QColor at remote 0x10fc100>, 'tableView': <QTableView at remote 0xe892a0>, '__builtins__': <module at remote 0x7ffff7fc5470>, '__file__': 'TestDelegateForRow.py', 'sys': <module at remote 0x7ffff7fc55a8>, '__name__': '__main__', 'PaletteListModel': <PyQt4.QtCore.pyqtWrapperType at remote 0xb955b0>, 'green': <QColor at remote 0x10fc1a0>, 'delegate': <ListDelegate(_ListDelegate__colors=<...>) at remote 0xe89660>, 'model': <PaletteListModel(_PaletteListModel__colors=[<...>, <...>, <...>]) at remote ...(truncated), locals=
    {'choices0': <QStringList at remote 0x10fc2e0>, 'choices1': <QStringList at remote 0x10fc380>, 'app': <QApplication at remote 0xe891e0>, 'delegate0': <ListDelegate(_ListDelegate__colors=<...>) at remote 0xe89420>, 'delegate1': <ListDelegate(_ListDelegate__colors=<...>) at remote 0xe894e0>, 'blue': <QColor at remote 0x10fc240>, 'QtGui': <module at remote 0xcd2a20>, 'data': <QStringList at remote 0x10fc060>, '__package__': None, 'ListDelegate': <PyQt4.QtCore.pyqtWrapperType at remote 0xcfb6a0>, '__doc__': None, 'red': <QColor at remote 0x10fc100>, 'tableView': <QTableView at remote 0xe892a0>, '__builtins__': <module at remote 0x7ffff7fc5470>, '__file__': 'TestDelegateForRow.py', 'sys': <module at remote 0x7ffff7fc55a8>, '__name__': '__main__', 'PaletteListModel': <PyQt4.QtCore.pyqtWrapperType at remote 0xb955b0>, 'green': <QColor at remote 0x10fc1a0>, 'delegate': <ListDelegate(_ListDelegate__colors=<...>) at remote 0xe89660>, 'model': <PaletteListModel(_PaletteListModel__colors=[<...>, <...>, <...>]) at remote ...(truncated), closeit=1, flags=0x7fffffffde50) at ../Python/pythonrun.c:1351
#41 0x0000000000555002 in PyRun_SimpleFileExFlags (fp=0xb3e1b0, filename=0x7fffffffe374 "TestDelegateForRow.py", closeit=1, flags=0x7fffffffde50) at ../Python/pythonrun.c:943
#42 0x00000000005546b5 in PyRun_AnyFileExFlags (fp=0xb3e1b0, filename=0x7fffffffe374 "TestDelegateForRow.py", closeit=1, flags=0x7fffffffde50) at ../Python/pythonrun.c:747
#43 0x0000000000570290 in Py_Main (argc=2, argv=0x7fffffffe068) at ../Modules/main.c:639
#44 0x00000000004171fc in main (argc=2, argv=0x7fffffffe068) at ../Modules/python.c:23
(gdb) ^Z 
```

当然，任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T01:19:31.897

[setItemDelegateForRow](http://qt-project.org/doc/qt-4.8/qabstractitemview.html#setItemDelegateForRow)的 Qt 文档对此非常清楚：

```
Any existing row delegate for row will be removed, but not deleted.
QAbstractItemView does not take ownership of delegate. 
```

所以你已经诊断出你的问题，但还没有解决它。

发生段错误是因为在初始化表视图之前正在对一些委托进行垃圾收集。

尝试创建一个 table-view 子类，它保留其代表的内部列表：

```
...    

class TableView(QtGui.QTableView):
    def __init__(self):
        QtGui.QTableView.__init__(self)
        colours = [
            QtGui.QColor(255,0,0),
            QtGui.QColor(0,255,0),
            QtGui.QColor(0,0,255),
            ]
        self._delegates = [
            ListDelegate(["#FF0000","#00FF00","#0000FF"]),
            ListDelegate(["#FF0000","#0000FF"]),
            ]
        for row in range(len(colours)):
            self.setItemDelegateForRow(
                row, self._delegates[bool(row % 2)])
        self.setModel(PaletteListModel(colours))

if __name__ == '__main__':

    app = QtGui.QApplication(sys.argv)
    app.setStyle("plastique")

    table = TableView()
    table.show()

    sys.exit(app.exec_()) 
```

# html - 使用html删除图像之间的空白

> ID：13481685
> 
> 赞同：3
> 
> 时间：2012-11-20T20:36:55.133
> 
> 标签：html

在阅读了这个问题的许多答案之后，似乎没有一个人解决了这个问题。我正在尝试通过 VerticalResponse 发送和发送电子邮件，他们使用 html。该消息是堆叠多个图像创建的，每个图像都有链接，但它应该看起来像一个图像。问题是预览看起来不错，在网页中查看也是如此，但电子邮件显示在每个图像之间显示空白。有关代码，请参见[http://jsfiddle.net/xMW7N/42/](http://jsfiddle.net/xMW7N/42/)。请帮忙！

```
<body>
    <div style="text-align: center; ">
        <span style="font-size:8pt;"><a href="website"><img align="normal" alt="Facebook - MetricRunFest" border="0" height="126" hspace="-20" name="FB" src="https://141790a61d-custmedia.vresp.com//a091cd9b91/Top.jpg?0.7593426643870771" style="width: 600px; height: 126px;" title="Facebook - MetricRunFest" vspace="0" width="600" /></a></span><br />
        <span style="font-size:8pt;"><a href=website"><img align="normal" alt="Metric Runners - Online Photos" border="0" height="205" hspace="-2" name="MetricRunFest - Online Photos" src="https://141790a61d-custmedia.vresp.com//a091cd9b91/Message%20Blank.jpg?0.8384064519777894" style="width: 600px; height: 205px;" title="Metric Runners - Online Photos" vspace="0" width="600" /><br />
        <img align="normal" alt="website" border="0" height="127" hspace="-2" src="https://141790a61d-custmedia.vresp.com//a091cd9b91/Message%20Blank_UpsideDown%209.jpg?0.44395816628821194" style="width: 600px; height: 127px;" title="website" vspace="0" width="600" /></a></span><br /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:53:43.883

每个图像之间都有一个中断空间，这是问题的一部分。另外，尝试赋予图像`display: block`风格。

[http://jsfiddle.net/xMW7N/47/](http://jsfiddle.net/xMW7N/47/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T20:39:45.097

不同的浏览器对空白的处理方式不同。如果可能，最好将所有内容写在 1 行上，没有不必要的空格或换行符。你可以这样尝试：-

```
 <span><img src="image1.jpg"></span><span><img src="image2.jpg"></span><span><img src="image3.jpg"></span> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T20:49:42.363

我在 html 电子邮件中看到的所有内容，以及我自己做这些邮件的经验，不幸的是，最好的选择是使用表格。它确实可以帮助解决所有布局问题。

我建议阅读[http://24ways.org/2009/rock-solid-html-emails](http://24ways.org/2009/rock-solid-html-emails)以获得很多提示，包括关于图像的整个部分。特别是`img {display:block;}`用于 Hotmail`align`等`<img src="image.jpg" align="right">`而不是浮动。

并不是说您一定做错了这些部分，但总的来说它们很容易记住。

# php - 从 PHP 中的字符串中删除 ZERO WIDTH NON-JOINER 字符

> ID：13481688
> 
> 赞同：2
> 
> 时间：2012-11-20T20:37:04.163
> 
> 标签：php, unicode

我想从字符串中删除[ZERO WIDTH NON-JOINER](http://www.fileformat.info/info/unicode/char/200c/index.htm)字符，但使用`str_replace`没有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T20:46:21.577

str_replace 应该可以解决这个问题，只要你小心你要替换的东西。

```
// \xE2\x80\x8C is ZERO WIDTH NON-JOINER
$foo = "foo\xE2\x80\x8Cbar";

print($foo . " - " . strlen($foo) . "\n");
$foo = str_replace("\xE2\x80\x8C", "", $foo);
print($foo . " - " . strlen($foo) . "\n"); 
```

预期的输出：

```
foo‌bar - 9
foobar - 6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T20:51:31.027

str_replace 会做你想做的事，但是 PHP 对 Unicode 没有很好的原生支持。以下将按照您的要求进行。json_decode 已用于获取 Unicode 字符，因为 PHP 不支持 \u 语法。

```
<?php
$unicodeChar = json_decode('"\u200c"');
$string = 'blah'.$unicodeChar.'blah';
echo str_replace($unicodeChar, '', $string);
?> 
```

编辑：虽然我的方法有效，但我建议您使用 fiskfisk 的解决方案。它比使用 json_decode 更简单。

# c - 在 C 中使用 sscanf 创建 LinkedList

> ID：13481690
> 
> 赞同：0
> 
> 时间：2012-11-20T20:37:26.267
> 
> 标签：c, linked-list, nodes, scanf

我需要`LinkedList`从文件`.csv`文件中实现一个。我的节点定义如下：

```
struct NODE {
    char username[50];
    char password[50];
    char usertype[50];
    struct NODE *next;
} *head=NULL; 
```

我已将整个`.csv`文件放在一个名为`database`. 然后我想要`sscanf`这个数组并将每个对应的单词放在我节点内的特定字段中。我写下了以下代码：

```
void createList() {
    // I need a while-loop here //
    struct NODE* toAdd = (struct NODE*)malloc(sizeof(struct NODE));
    sscanf(database, "%[^','],%[^','],%[^'\n']", toAdd->username, toAdd->password,     toAdd->usertype);
    if (add(toAdd) == false) {
        printf("Error: was unable to initialize password validation!");
        exit(EXIT_FAILURE);
    }
} 
```

我的`add`功能如下所示：

```
BOOLEAN add(struct NODE *p) {
    if (p == NULL)   return false;
    if (head == NULL) {
        p->next = NULL;
        head = p;
    } else {
        p->next = head;
        head = p;
    }
    return true;
} 
```

上面的功能有问题吗？总而言之，我想从数组中读取。我将这个数组“分解”为三个字块，然后将第一个分配给节点的用户名字段，第二个分配给密码字段，等等。我想在我的整个数组上执行此操作，因此创建一个大`LinkedList`的节点。

谢谢您的帮助。

# android - 调用新活动时无法启动活动 ComponentInfo：NullPointerException

> ID：13481692
> 
> 赞同：1
> 
> 时间：2012-11-20T20:37:41.777
> 
> 标签：android, android-intent, nullpointerexception, android-activity, android-sqlite

当我通过意图调用新活动并通过意图发送值时出现此错误我给了调用 nw 类的类及其代码分别请检查日志猫我正在强制关闭我使用的是 android 版本 4.0.3

### 调用 btnf 时调用另一个 Activity 的 Activity

```
package dlp.android.digichronicle;

import java.io.IOException;
import java.util.ArrayList;
import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.os.Bundle;
import android.text.method.ScrollingMovementMethod;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class displ extends Activity implements View.OnClickListener {
    Button btnf;// done
    TextView tvf;// ok
    EditText edtf, edt2;// db txt

    /** Called when the activity is first created. */

    DBHandandler myDbHelper = new DBHandandler(this);
    SQLiteDatabase Mydatabase;
    String stattionlist, s1;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.displ);
        tvf = (TextView) findViewById(R.id.tvf);
        edtf = (EditText) findViewById(R.id.edtf);
        edt2 = (EditText) findViewById(R.id.edt2);
        btnf = (Button) findViewById(R.id.btnf);
        btnf.setOnClickListener(this);
        first();
    }

    private void first() {
        String s1 = "", s2 = second.ge;
        this.myDbHelper = new DBHandandler(this);
        try {
            FetchingData();
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        myDbHelper.openDataBase();
        Mydatabase = myDbHelper.getWritableDatabase();
        System.out.println("executed");
        Mydatabase = myDbHelper.getReadableDatabase();
        System.out.println("sure2");// debug info
        // calling open() function which will show the text in table in EditText
        // using SetText method
        // Function is defined in DBHanadanler.java file
        if (s2.equalsIgnoreCase("memo")) {
            s1 = myDbHelper.open("memo", Mydatabase);
            System.out.println("Called memo" + s1 + s2);
        }
        else if (s2.equalsIgnoreCase("reminder"))
            s1 = myDbHelper.open("reminder", Mydatabase);
        else if (s2.equalsIgnoreCase("tasks"))
            s1 = myDbHelper.open("tasks", Mydatabase);
        else if (s2.equalsIgnoreCase("events"))
            s1 = myDbHelper.open("events", Mydatabase);
        else if (s2.equalsIgnoreCase("accounts"))
            s1 = myDbHelper.open("accounts", Mydatabase);
        System.out.println("after open");

        edtf.setText(s1);
        System.out.println("string is : " + s1 + "2nd time");// debug info
        edtf.setMovementMethod(new ScrollingMovementMethod());
        tvf.setText(s2);
    }

    // call the method which is present in datbase
    private void FetchingData() throws SQLException {

        try {
            myDbHelper.onCreateDataBase();

        } catch (IOException ioe) {

            throw new Error("Unable to create database");

        }
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        if (v == btnf)
        {
            s1 = edtf.getText().toString();

            Intent i3 = new Intent(displ.this, inter.class);
            i3.putExtra("value", s1);
            startActivity(i3);

        }

    }
} 
```

### 新叫活动课

```
package dlp.android.digichronicle;

import java.io.IOException;

import android.app.Activity;
import android.content.Intent;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.util.Log;
import android.widget.Toast;

public class inter extends Activity {
    DBHandandler myDbHelper;
    SQLiteDatabase Mydatabase;
    String s;
    String stattionlist, DBname = "widgets";

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Bundle b = getIntent().getExtras();
        System.out.println(b);
        if (b != null)
        {
            s = b.getString("value");
            System.out.println("INtermediate" + s);
            Log.e("xxxx2", s);
            try {
                FetchingData();
                myDbHelper.openDataBase();
                System.out.println("****** After open db");
                Mydatabase = myDbHelper.getWritableDatabase();
                System.out.println("###### after writable");

                System.out.println("###### updated string :" + s);
                String s2 = second.ge;

                if (s2.equalsIgnoreCase("memo")) {
                    myDbHelper.updateevent("memo", Mydatabase, s);
                    System.out.println("Called memo" + s2 + s);
                }
                else if (s2.equalsIgnoreCase("reminder"))
                    myDbHelper.updateevent("reminder", Mydatabase, s);
                else if (s2.equalsIgnoreCase("tasks"))
                    myDbHelper.updateevent("tasks", Mydatabase, s);
                else if (s2.equalsIgnoreCase("events"))
                    myDbHelper.updateevent("events", Mydatabase, s);
                else if (s2.equalsIgnoreCase("accounts"))
                    myDbHelper.updateevent("accounts", Mydatabase, s);
                Toast.makeText(getApplicationContext(), "updated", Toast.LENGTH_LONG).show();
            } catch (SQLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            myDbHelper.close();
            Mydatabase.close();
            Intent i3 = new Intent(inter.this, second.class);
            startActivity(i3);
            System.out.println("button end btnf");
        }
        // stattionlist=this.myDbHelper.updateevent(Mydatabase,s1);
        // Toast.makeText(getApplicationContext()," "+s1,100).show();

    }

    private void FetchingData() {
        // TODO Auto-generated method stub
        try {
            myDbHelper.onCreateDataBase();
        } catch (IOException ioe) {
            throw new Error("Unable to create database");
        }
        try {
            myDbHelper.openDataBase();
            Mydatabase = myDbHelper.getWritableDatabase();
            System.out.println("executed");
        } catch (SQLException sqle) {
            throw sqle;
        }
    }

    // Intent i2=new Intent(intermediate.this,second.class);
    // startActivity(i2);
} 
```

### 数据库助手类

```
package dlp.android.digichronicle; // ur package name

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.ArrayList;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;
import android.widget.Toast;

public class DBHandandler extends SQLiteOpenHelper {
    private static String DB_PATH = "/data/data/dlp.android.digichronicle/databases/";
    private static String DB_NAME = "widget.sqlite";
    private static String TABLENAME = "widgets";
    private SQLiteDatabase myDataBase;
    private final Context myContext;
    public static final String KEY_MEM = "memo";
    public static final String KEY_TAS = "tasks";
    public static final String KEY_REM = "reminder";
    public static final String KEY_EVE = "events";
    public static final String KEY_DAT = "dated";
    public static final String KEY_INC = "income";
    public static final String KEY_EXP = "exp";
    ArrayList<String> sw;
    String s = "";

    public DBHandandler(Context context) {
        super(context, DB_NAME, null, 1);
        // TODO Auto-generated constructor stub
        this.myContext = context;
    }

    public int onCreateDataBase() throws IOException
    {
        boolean dbExist = checkDatabase();
        if (dbExist) {
            return 0;
        }
        else {
            System.out.println("onCreateDataBase method execution starts");
            this.getReadableDatabase();
            copyDataBase();
            return 1;

        }
    }

    private boolean checkDatabase() {
        // TODO Auto-generated method stub
        SQLiteDatabase checkDB = null;
        try
        {
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);
        } catch (Exception e) {
            // TODO: handle exception
        }
        if (checkDB != null) {
            checkDB.close();
        }
        return checkDB != null ? true : false;

    }

    private void copyDataBase() throws IOException {

        InputStream myInput = myContext.getAssets().open(DB_NAME);

        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        // Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        // transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer)) > 0) {
            myOutput.write(buffer, 0, length);

        }

        // Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

    }

    public void openDataBase() throws SQLException {

        // Open the database
        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

    }

    public String open(String s3, SQLiteDatabase Mydatabase)
    {
        ArrayList<String> list = new ArrayList<String>();
        System.out.println("b4 string is : " + list);
        String s = "";
        try {
            System.out.println("string got is " + s3);
            String dt = MainActivity.g;
            System.out.println("Date obtained is " + dt);
            Cursor c = Mydatabase.rawQuery("select " + " " + s3 + " "
                    + "from widgets where dated='" + dt + "'", null);
            System.out.println("after cursor");
            if (c.moveToFirst())
            {

                System.out.println("cursor" + c.moveToFirst());
                do {
                    System.out.println("before columnindex");
                    list.add(c.getString(c.getColumnIndex(s3)));
                    System.out.println("after columnindex");
                    System.out.println(" string is :  " + list);

                } while (c.moveToNext());
            }
            c.close();
        } catch (SQLiteException se) {
            Mydatabase.close();
            System.out.println("exception");
        }

        s = list.toString();
        int len = s.length();
        s = s.substring(1, len - 1);
        System.out.println("string is : " + list);
        System.out.println("string is : " + s);
        return s;

    }

    public String eventdia(SQLiteDatabase mydatabase1) {

        ArrayList<String> list = new ArrayList<String>();
        System.out.println("Event dialogue start " + list);
        String s = "";
        try {
            System.out.println("geting event");
            String dt = MainActivity.g;
            System.out.println("Date obtained in events " + dt);
            Cursor c = mydatabase1.rawQuery("select events from widgets where dated='" + dt + "'",
                    null);

            if (c.moveToFirst())
            {
                System.out.println("cursor" + c.moveToFirst());
                do {
                    list.add(c.getString(c.getColumnIndex("events")));
                    System.out.println(" string is :  " + list);

                } while (c.moveToNext());
            }
            c.close();
        } catch (SQLiteException se) {
            mydatabase1.close();
            System.out.println("exception");
        }

        s = list.toString();
        int len = s.length();
        s = s.substring(1, len - 1);
        System.out.println("string is : " + list);
        System.out.println("string is : " + s);
        return s;
    }

    public String checkin(SQLiteDatabase mydatabase1) {

        ArrayList<String> list = new ArrayList<String>();
        System.out.println("b4 string is : " + list);
        String s = "";
        try {
            System.out.println("geting event");
            String dt = MainActivity.g;
            System.out.println("Date obtained is" + dt);
            Cursor c = mydatabase1.rawQuery("select events from widgets where dated='" + dt + "'",
                    null);

            if (c.moveToFirst())
            {
                System.out.println("cursor" + c.moveToFirst());
                do {
                    list.add(c.getString(c.getColumnIndex("events")));
                    System.out.println(" string is :  " + list);

                } while (c.moveToNext());
            }
            c.close();
        } catch (SQLiteException se) {
            mydatabase1.close();
            System.out.println("exception");
        }

        s = list.toString();
        int len = s.length();
        s = s.substring(1, len - 1);
        System.out.println("string is : " + list);
        System.out.println("string is : " + s);
        return s;
    }

    public void updateevent(String ge, SQLiteDatabase mydatabase2, String s1) {
        // TODO Auto-generated method stub
        String dt = MainActivity.g;
        System.out.println("###### before query");
        ContentValues cvupdate = new ContentValues();
        cvupdate.put(ge, s1);

        mydatabase2.update(TABLENAME, cvupdate, KEY_DAT + "=" + dt, null);

        // mydatabase2.rawQuery("update widgets set memo="+" "+s1+" "+" where dated='"+dt+"'",null);
        // mydatabase2.rawQuery("update widgets set "+" "+ge+" = "+s1+" "+"where where dated='"+dt+"'",null);
        System.out.println("###### after query");
    }

    // Function inserting new record
    public void Insertinto(SQLiteDatabase mydatabase2, String date, String memo, String tasks,
            String reminder, float income, String events, float exp)
    {
        ContentValues data = createContentValues(date, memo, tasks, reminder, income, events, exp);
        System.out.println("data " + data + "  is ");
        mydatabase2.insert(TABLENAME, null, data);
        System.out.println("record is done ");
    }

    // return a content of the database
    private ContentValues createContentValues(String date, String memo, String tasks,
            String reminder, float income, String events, float exp)
    {
        ContentValues values = new ContentValues();
        values.put(KEY_DAT, date);
        values.put(KEY_MEM, memo);
        values.put(KEY_TAS, tasks);
        values.put(KEY_REM, reminder);
        values.put(KEY_INC, income);
        values.put(KEY_EVE, events);
        values.put(KEY_EXP, exp);
        return values;
    }

    // write ur retreival methods here
} 
```

### 记录猫错误

```
D/AndroidRuntime(553): Shutting down VM
W/dalvikvm(553): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
E/AndroidRuntime(553): FATAL EXCEPTION: main
E/AndroidRuntime(553): java.lang.RuntimeException: Unable to start activity ComponentInfo{dlp.android.digichronicle/dlp.android.digichronicle.inter}: java.lang.NullPointerException
E/AndroidRuntime(553):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
E/AndroidRuntime(553):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
E/AndroidRuntime(553):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
E/AndroidRuntime(553):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
E/AndroidRuntime(553):  at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(553):  at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(553):  at android.app.ActivityThread.main(ActivityThread.java:4424)
E/AndroidRuntime(553):  at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(553):  at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(553):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
E/AndroidRuntime(553):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
E/AndroidRuntime(553):  at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(553): Caused by: java.lang.NullPointerException
E/AndroidRuntime(553):  at dlp.android.digichronicle.inter.FetchingData(inter.java:84)
E/AndroidRuntime(553):  at dlp.android.digichronicle.inter.onCreate(inter.java:28)
E/AndroidRuntime(553):  at android.app.Activity.performCreate(Activity.java:4465)
E/AndroidRuntime(553):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
E/AndroidRuntime(553):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
E/AndroidRuntime(553):    ... 11 more
I/dalvikvm(553): threadid=3: reacting to signal 3
I/dalvikvm(553): Wrote stack traces to '/data/anr/traces.txt'
I/dalvikvm(553): threadid=3: reacting to signal 3
I/dalvikvm(553): Wrote stack traces to '/data/anr/traces.txt'
I/dalvikvm(553): threadid=3: reacting to signal 3
I/dalvikvm(553): Wrote stack traces to '/data/anr/traces.txt' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T21:41:25.940

您需要`myDbHelper`在`inter`Activity中实例化`onCreate()`（您在Activity 中进行了`displ`但不是在`inter`Activity 中进行了实例化）：

```
DBHandandler myDbHelper = new DBHandandler(this); 
```

因为@ line 28在它还没有被实例化的时候`FetchingData()`调用。`myDbHelper.onCreateDataBase();`

# asp.net-mvc - 如何在 asp.net mvc razor 视图上嵌入 rdl 报告？

> ID：13481695
> 
> 赞同：2
> 
> 时间：2012-11-20T20:37:53.573
> 
> 标签：asp.net-mvc, razor, reporting-services, ssrs-2008

> **可能重复：**
> [如何在asp.net mvc 3 razor 视图中使用reportviewer 控件？](https://stackoverflow.com/questions/6144513/how-can-i-use-a-reportviewer-control-in-an-asp-net-mvc-3-razor-view)

是否可以？我们该如何实施？

如果不可能做到这一点？任何人都可以提出一些报告解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T20:55:55.790

我最近在一个 MVC 项目中处理了这个需求。您必须向您的 MVC 项目添加一个 webform (.aspx) 页面，然后像下面这样删除 reportviewer 控件（假设您知道如何使用 reportviewer 控件）：

```
<rsweb:ReportViewer ID="ReportViewer1" runat="server">
</rsweb:ReportViewer> 
```

这就是 ASP.net 走到一起的地方。在您的项目中，您可以使用 Web 表单页面、SignalR、WebApI 等。您可以在 Scott Hanselman 的一篇 ASP.net 文章中阅读更多内容。这是一个链接：

[http://www.hanselman.com/blog/OneASPNETMakingJSONWebAPIsWithASPNETMVC4BetaAndASPNETWebAPI.aspx](http://www.hanselman.com/blog/OneASPNETMakingJSONWebAPIsWithASPNETMVC4BetaAndASPNETWebAPI.aspx)

查看 Scott Hanselman 的演示文稿

[http://www.hanselman.com/blog/ASPNETForMobileOneASPNETAndRealtimeASPNETWithSignalrVideoOfScottHanselmansTalksInRussia.aspx](http://www.hanselman.com/blog/ASPNETForMobileOneASPNETAndRealtimeASPNETWithSignalrVideoOfScottHanselmansTalksInRussia.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T20:41:27.317

rdl 中的报表没有 ASP.Net MVC 的控制。

但是您可以通过与 asp.net webforms 集成来实现。您可以将特殊的 webforms 页面添加到您的 MVC 项目中，并将 ReportViewer 控件添加到其中。然后，在代码隐藏中，启动此控件等等。ReportViewer 控件位于 Microsoft.ReportViewer.WebForms 程序集中。

# python - Python 子进程没有正确输出？

> ID：13481700
> 
> 赞同：3
> 
> 时间：2012-11-20T20:38:23.323
> 
> 标签：python, subprocess, netcat

我认为我根本没有正确理解 python 子进程，但这里有一个简单的例子来说明我感到困惑的一点：

```
#!/usr/bin/env python
import subprocess
lookup_server = subprocess.Popen("nc -l 5050", shell=True)
lookup_client = subprocess.Popen("nc localhost 5050", shell=True, stdin=subprocess.PIPE) 
print lookup_client.poll()
lookup_client.stdin.write("magic\n")
print lookup_client.poll()                                                                        
lookup_client.send_signal(subprocess.signal.SIGINT)
print lookup_client.poll()
lookup_server.wait()
print "Lookup server terminated properly" 
```

输出返回为

```
None
None
None 
```

并且永远不会完成。为什么是这样？此外，如果我将 Popen 的第一个参数更改为所有这些参数的数组，则所有 nc 调用都不会正确执行，并且脚本无需等待即可运行。为什么会这样？

最终，我在一个更大的程序中遇到了一个问题，该程序使用 netcat 和另一个在本地运行的程序而不是两个版本的 nc 执行类似的操作。无论哪种方式，我都无法正确地写入或读取它们。但是，当我在 python 控制台中运行它们时，一切都按我的预期运行。这一切让我非常沮丧。如果您有任何见解，请告诉我！

编辑：我在 Ubuntu Linux 12.04 上运行它，当我`man nc`得到 BSD 通用命令手册时，我假设这是 BSD netcat。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T21:08:13.173

这里的问题是您要发送`SIGINT`到流程。如果您只是`close`,将关闭其套接字并退出`stdin`，`nc`这就是您想要的。

听起来您实际上是在实际`nc`程序中使用客户端（尽管不是服务器），这意味着您有两个简单的修复：

而不是`lookup_client.send_signal(subprocess.signal.SIGINT)`，只是做`lookup_client.stdin.close()`。`nc`将在其输入中将此视为 EOF，并正常退出，此时您的服务器也将退出。

```
#!/usr/bin/env python
import subprocess
lookup_server = subprocess.Popen("nc -l 5050", shell=True)
lookup_client = subprocess.Popen("nc localhost 5050", shell=True, stdin=subprocess.PIPE) 
print lookup_client.poll()
lookup_client.stdin.write("magic\n")
lookup_client.stdin.close()
print lookup_client.poll()
lookup_server.wait()
print "Lookup server terminated properly" 
```

当我运行它时，最常见的输出是：

```
None
None
magic
Lookup server terminated properly 
```

有时第二个`None`是 a `0`，和/或它出现在之后`magic`而不是之前，但除此之外，它总是四行。（我在 OS X 上运行。）

对于这个简单的案例（尽管可能不是您的真实案例），只需使用[`communicate`](http://docs.python.org/2/library/subprocess.html#subprocess.Popen.communicate)而不是尝试手动操作。

```
#!/usr/bin/env python
import subprocess
lookup_server = subprocess.Popen("nc -l 5050", shell=True)
lookup_client = subprocess.Popen("nc localhost 5050", shell=True, stdin=subprocess.PIPE) 
print lookup_client.communicate("magic\n")
lookup_server.wait()
print "Lookup server terminated properly" 
```

同时：

> 此外，如果我将 Popen 的第一个参数更改为所有这些参数的数组，则所有 nc 调用都不会正确执行，并且脚本无需等待即可运行。为什么会这样？

正如[文档](http://docs.python.org/2/library/subprocess.html#subprocess.Popen)所说：

> 在 Unix 上`shell=True`... 如果 args 是一个序列，则第一项指定命令字符串，并且任何附加项将被视为 shell 本身的附加参数。

所以，`subprocess.Popen(["nc", "-l", "5050"], shell=True)`确实`/bin/sh -c 'nc' -l 5050`，并且`sh`不知道如何处理这些论点。

您可能*确实*想使用一个 args 数组，但是您必须摆脱`shell=True`- 无论如何这是一个好主意，因为 shell 在这里没有帮助您。

还有一件事：

```
lookup_client.send_signal(subprocess.signal.SIGINT)
print lookup_client.poll() 
```

这可能会打印 -2 或 None，这取决于客户端是否已完成响应`SIGINT`并在您之前被杀死`poll`。如果您想实际获得-2，则必须调用`wait`而不是`poll`（或执行其他操作，例如循环直到`poll`返回非无）。

最后，为什么您的原始代码不起作用？好吧，发送`SIGINT`是异步的；无法保证何时生效。举一个可能出错的例子，它可能在客户端甚至打开套接字之前生效，在这种情况下，服务器仍然坐在那里等待一个永远不会出现的客户端。

You can throw in a `time.sleep(5)` before the `signal` call to test this—but obviously that's not a real fix, or even an acceptable hack; it's only useful for testing the problem. What you need to do is not kill the client until it's done everything you want it to do. For complex cases, you'll need to build some mechanism to do that (e.g., reading its stdout), while for simple cases, `communicate` is already everything you need (and there's no reason to kill the child in the first place).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T21:02:34.060

你的调用[`nc`](http://linux.die.net/man/1/nc)很糟糕，如果我在命令行中调用它会发生什么：

```
# Server window:
[vyktor@grepfruit ~]$ nc -l 5050

# Client Window
[vyktor@grepfruit ~]$ nc localhost 5050
[vyktor@grepfruit ~]$ echo $?
1 
```

这意味着（`1`in `$?`）失败。

一旦你使用`-p`：

```
-p, --local-port=NUM       local port number 
```

NC 开始监听，所以：

```
# Server window
[vyktor@grepfruit ~]$ nc -l -p 5050
    # Keeps handing

# Client window
[vyktor@grepfruit ~]$ echo Hi | nc localhost 5050
    # Keeps hanging 
```

添加`-c`到客户端调用后：

```
-c, --close                close connection on EOF from stdin 
```

你最终会得到这个：

```
# Client window
[vyktor@grepfruit ~]$ echo Hi | nc localhost 5050 -c
[vyktor@grepfruit ~]$

# Server window
[vyktor@grepfruit ~]$ nc -l -p 5050
Hi
[vyktor@grepfruit ~]$ 
```

所以你需要这段python代码：

```
#!/usr/bin/env python
import subprocess
lookup_server = subprocess.Popen("nc -l -p 5050", shell=True)
lookup_client = subprocess.Popen("nc -c localhost 5050", shell=True, 
                      stdin=subprocess.PIPE) 
lookup_client.stdin.write("magic\n")
lookup_client.stdin.close()            # This
lookup_client.send_signal(subprocess.signal.SIGINT) # or this kill
lookup_server.wait()
print "Lookup server terminated properly" 
```

# java - 通过whennew（）的powermock模拟构造函数不适用于匿名类

> ID：13481702
> 
> 赞同：23
> 
> 时间：2012-11-20T20:38:42.183
> 
> 标签：java, junit, mockito, powermock

我有一个 DummyResource 类和一个 DummyTarget 文件，以及一个测试类 TestDummyResource，如下所示，但是模拟对象`DummyResource dr = mock(DummyResource.class)`仅在我在普通类中调用构造函数时才有效，当在匿名类中调用它时，它调用的是实际构造函数而不是使用模拟对象。

**版本：**

powermock 1.4.12 mockito 1.9.0 junit 4.8.2

**DummyTarget.java：**

```
import java.io.IOException;
import java.io.OutputStream;

import javax.ws.rs.WebApplicationException;
import javax.ws.rs.core.StreamingOutput;

public class DummyTarget {
    public StreamingOutput testMocking() {
        return new StreamingOutput() {
            @Override
            public void write(OutputStream arg0) throws IOException, WebApplicationException {
                new DummyResource();
            }
        };
    }
} 
```

**DummyResource.java：**

```
package com.smin.dummy;

public class DummyResource {
    public DummyResource() {
        System.out.println("mock failure");
    }
} 
```

**TestDummyResource.java：**

```
package com.smin.dummy;

import static org.mockito.Mockito.mock;

import java.io.IOException;

import javax.ws.rs.WebApplicationException;
import javax.ws.rs.core.StreamingOutput;

import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.powermock.api.mockito.PowerMockito;
import org.powermock.core.classloader.annotations.PrepareForTest;
import org.powermock.modules.junit4.PowerMockRunner;

@RunWith(PowerMockRunner.class)
@PrepareForTest({DummyResource.class,DummyTarget.class})
public class TestDummyResource  {

    @Before
    public void setUp() throws Exception {
        DummyResource dr = mock(DummyResource.class);
        PowerMockito.whenNew(DummyResource.class).withNoArguments().thenReturn(dr);
    }

    @Test
    public void testMocked() throws WebApplicationException, IOException {
        new DummyResource(); // it uses the mocked object dr here, 
                             //doesn't print "mock failure"
        StreamingOutput sop = new DummyTarget().testMocking();
        sop.write(null);     // it calls DummyResource's constructor,
                             // prints ""mock failure"" here
    }
} 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-20T20:41:27.333

您需要准备好调用构造函数的类，而不是调用构造函数的类，以下应该可以解决您的问题：

```
@PrepareForTest(DummyTarget.class) 
```

有关更多信息，请查看[此](http://code.google.com/p/powermock/wiki/MockConstructor)页面。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-20T21:20:05.483

看起来匿名类可能会继承定义它的类的包。你可以试试[`PrepareForTest`](http://static.javadoc.io/org.powermock/powermock-core/1.4.12/org/powermock/core/classloader/annotations/PrepareForTest.html)? 的通配符形式：

```
@PrepareForTest("com.smin.dummy.*") 
```

如果这不起作用，您可以尝试 shotgun [`PrepareEverythingForTest`](http://static.javadoc.io/org.powermock/powermock-core/1.4.12/org/powermock/core/classloader/annotations/PrepareEverythingForTest.html)Annotation。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-02-14T18:02:37.213

实际上，您必须准备测试调用构造函数的类，而不是调用构造函数的类。请参阅[https://github.com/jayway/powermock/wiki/MockConstructor](https://github.com/jayway/powermock/wiki/MockConstructor)。

在您的情况下，您应该使用 @PrepareForTest(DummyTarget.class)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-04T19:17:17.680

我遇到了同样的问题，并通过使用带有完全限定名称的 whenNew 来解决它。在您的情况下，内部匿名类的完全限定名称是：

```
DummyTarget.class + "$1" 
```

所以你应该创建一个该类的模拟：

```
DummyResource dr = mock(Class.forName(DummyTarget.class + "$1")); 
```

它会为你工作。

另外，不要忘记准备 DummyTarget 类：

```
@PrepareForTest(DummyTarget.class) 
```

希望它有所帮助=]

# python - 在 Python 中将不同的列表合并在一起

> ID：13481703
> 
> 赞同：0
> 
> 时间：2012-11-20T20:38:47.273
> 
> 标签：python, list, loops

我在 Python 中被称为新手。我对列表有困难。我有一个循环，它从文本文件中获取一些信息并通过函数。如果文本文件长度为 10 行，则输出将是 10 个单独的列表，例如：[0.45] [0.87] ... 等等，持续 n+1 次（取决于文本文件的长度）。

如何将它们放入单个列表中，例如 [0.45, 0.87, ...]？我尝试了不同的循环，但没有:(

我以前很感激:) .. 并为我糟糕的英语感到抱歉

代码：

```
from pyfann import libfann
import os
path="."
ext = ".net"
files = [file for file in os.listdir(path) if file.lower().endswith(ext)]
for j in files:
 ann = libfann.neural_net()
 ann.create_from_file(j)
 print j
 f=open('nsltest1.dat','r')
 for i in f:
  x=i.strip()
  y=[float(i) for i in x.split()]
  z=ann.run(y)
  print z 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T20:41:32.707

如果您将所有列表存储在列表中`a`，

```
# a = [[.45], [.87], ...]
import itertools
output = list(itertools.chain(*a)) 
```

使这个答案比其他答案更好的原因在于它将任意数量的列表整齐地连接在一行中，而不需要`for`循环或类似的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T20:40:48.130

加法运算符`+`是您可能想要的。

```
list1 = [1, 2, 3]
list2 = [4, 5, 6]
merged_list = list1 + list2
print(merged_list) #replace ( and ) with spaces if you're using python 2.x 
```

将输出`[1, 2, 3, 4, 5, 6]`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-20T20:44:07.630

您可能想看看以下问题：

*   [如何将列表附加到第二个列表（连接列表）](https://stackoverflow.com/questions/1720421/merge-two-lists-in-python)
*   [将列表合并为一个](https://stackoverflow.com/questions/10424219/combining-lists-into-one)
*   [加入python中的列表列表](https://stackoverflow.com/questions/716477/join-list-of-lists-in-python)

基本上，如果你在循环中阅读你的行，你可以这样做

```
result = []
for line in file:
    newlist = some_function(line) # newlist contains the result list for the current line
    result = result + newlist 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-20T20:40:45.123

您可以**添加**它们：`[1] + [2] = [1, 2]`.

# css - CSS 和 MediaWiki - 使用绝对和相对 DIV 正确地自动扩展 DIV

> ID：13481706
> 
> 赞同：0
> 
> 时间：2012-11-20T20:38:55.453
> 
> 标签：css, mediawiki, mediawiki-templates

这是我的小提琴：

[http://jsfiddle.net/XKs8H/1/](http://jsfiddle.net/XKs8H/1/)

这是我的问题：

我正在使用 MediaWiki 创建一个 wiki。我试图避免在我的安装中使用很多扩展和第三方的东西。

我使用的是一个 MediaWiki 模板来生成我的示例中显示的内容。因为它是一个模板，所以每次调用它都会渲染一次。因此，对于示例中的每个角色，模板首先为名称选项卡创建一个左浮动的 DIV，并在其下方创建一个 DIV，用于该角色的简历内容。我可以使该部分与绝对定位一起工作，但随后 wiki 页面内容的其余部分显示在绝对 div 下方。

例子：

```
<div id="tab1">Tab 1</div>
<div id="bio1">Tab 1's bio</div>
<div id="tab2">Tab 2</div>
<div id="bio2">Tab 2's bio</div>
<div id="pagebody">Rest of the page's content</div> 
```

每个**选项卡**应彼此相邻浮动。**bio**应该显示在选项卡 div 行下方，**而**pagebody**应该**显示在所有内容下方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:56:43.233

我会推荐这样的东西：

```
<div class="tab">
    <div class="tab-name">Tab 1</div>
    <div class="bio">Tab 1's bio</div>
</div>
<div class="tab">
    <div class="tab-name">Tab 2</div>
    <div class="bio">Tab 2's bio</div>
</div>
<div class="clearfix">Rest of the page's content</div> 
```

选项卡本身是浮动的，而 clearfix 是常见的浮动清除页面主体。

# php - 通过随机选择另一个表中的值来替换一个表中的值的 SQL 查询

> ID：13481707
> 
> 赞同：0
> 
> 时间：2012-11-20T20:39:01.587
> 
> 标签：php, sql, random

我有一个表，我希望使用 cron 作业定期更新它的值。但是，我需要通过将其替换为不同表中的值来更新该值。问题是我希望随机选择替换值。

例如，表 1 有

```
ID    Email
=================
1     bobatumail 
```

表 2 有：

```
ID    Email
================
1     bobatumail
2     joeatumail
3     peteatumail
4     biffatumail
5     wilneratumail
6     wilsonatumail 
```

我希望查询将表 1 中的 bobatumail 替换为表 2 中的任何其他值，只要它是随机的。它甚至可以与表 1 中的值相同。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T21:21:01.357

在 MySQL 中，您可以使用 REPLACE 语句：

```
REPLACE INTO table1 (ID, Email)
SELECT 1, table2.Email FROM table2 ORDER BY RAND() LIMIT 1; 
```

第二行中的“1”表示条目的 id，而第二部分返回 table2 中的随机值。是的，有使用 UPDATE 语句（JOIN 和 ANSI）的解决方案，但它总是很棘手，您通常必须关闭安全更新模式。

[http://dev.mysql.com/doc/refman/5.5/en/mysql-command-options.html#option_mysql_safe-updates](http://dev.mysql.com/doc/refman/5.5/en/mysql-command-options.html#option_mysql_safe-updates)

请注意，REPLACE 首先删除旧条目，然后重新插入新条目。

[http://dev.mysql.com/doc/refman/5.5/en/replace.html](http://dev.mysql.com/doc/refman/5.5/en/replace.html)

# ssas - 立方体结合事实

> ID：13481708
> 
> 赞同：0
> 
> 时间：2012-11-20T20:39:04.603
> 
> 标签：ssas

我的目标是生成一个按天计算的报告：订单数量、数量总和、接收总和（我们将产品运出并取回）。我现在有两个立方体：一个用于订单，一个用于接收。我创建了一个包含两个维度的新多维数据集，但它们按日期不同步。就好像在日期之前两个事实表之间没有连接。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T09:20:37.740

在一个多维数据集中，包含您的订单和接收度量组，以及日期维度的一个实例。在多维数据集的维度关系选项卡中，使用其相关日期键将两个度量组与日期维度相关联。

# c# - 返回小数位的自定义方法显示奇怪的行为

> ID：13481712
> 
> 赞同：6
> 
> 时间：2012-11-20T20:39:21.173
> 
> 标签：c#, methods, decimal

我正在编写一个简单的方法来计算十进制值中的小数位数。该方法如下所示：

```
public int GetDecimalPlaces(decimal decimalNumber) { 
try {
    int decimalPlaces = 1;
    double powers = 10.0;
    if (decimalNumber > 0.0m) {
        while (((double)decimalNumber * powers) % 1 != 0.0) {
            powers *= 10.0;
            ++decimalPlaces;
        }
    }
    return decimalPlaces; 
```

我已经针对一些测试值运行了它，以确保一切正常，但在最后一个上又出现了一些非常奇怪的行为：

```
int test = GetDecimalPlaces(0.1m);
int test2 = GetDecimalPlaces(0.01m);
int test3 = GetDecimalPlaces(0.001m);
int test4 = GetDecimalPlaces(0.0000000001m);
int test5 = GetDecimalPlaces(0.00000000010000000001m);
int test6 = GetDecimalPlaces(0.0000000001000000000100000000010000000001000000000100000000010000000001000000000100000000010000000001m); 
```

测试 1-5 工作正常，但 test6 返回 23。我知道传入的值超过了最大十进制精度，但为什么是 23？我发现奇怪的另一件事是，当我在来自 test6 的调用之后在 GetDecimalPlaces 方法中放置一个断点时，该方法中的 decimalNumber 的值与来自 test5 的值（20 个小数位）相同，但即使该值传入的有 20 位小数返回 23。

也许只是因为我传递了一个小数位太多的数字，事情变得很不稳定，但我想确保我没有遗漏一些根本错误的东西，这可能会导致稍后计算其他值路。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T20:51:26.520

您*实际*测试的数字是这样的：

```
0.0000000001000000000100000000 
```

这是最接近 0.0000000001000000000100000000010000000001000000000100000000010000000001000000000100000000010000000001 的精确十进制值。

所以正确答案实际上是 20。但是，你的代码给你 23，因为你使用*二进制*浮点运算，没有明显的原因。这将在您的计算中引入错误，这是完全不必要的。如果您更改为始终使用小数，那很好：

```
public static int GetDecimalPlaces(decimal decimalNumber) {
    int decimalPlaces = 1;
    decimal powers = 10.0m;
    if (decimalNumber > 0.0m) {
        while ((decimalNumber * powers) % 1 != 0.0m) {
            powers *= 10.0m;
            ++decimalPlaces;
        }
    }
    return decimalPlaces;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T21:51:48.503

还有另一种方法可以做到这一点，它可能工作得更快，因为它仅在十进制数有“尾随零”问题时才使用余数运算。

**基本思想：**

在 .NET 中，任何小数都以以下形式存储在内存中

> m * Math.Power(10, -p)

其中 m 是尾数（96 位大小），p 是阶数（值从 0 到 28）。

decimal.GetBits 方法从十进制结构中检索此表示并将其作为 int 数组（长度为 4）返回。

使用这些数据，我们可以构造另一个小数。如果我们只使用尾数，不使用“Math.Power(10, -p)”部分，结果将是整数小数。如果这个整数十进制数可以被 10 整除，那么我们的源数就有一个或多个尾随零。

所以这是我的代码

```
 static int GetDecimalPlaces(decimal value)
    {
        // getting raw decimal structure
        var raw = decimal.GetBits(value);

        // getting current decimal point position
        int decimalPoint = (raw[3] >> 16) & 0xFF;

        // using raw data to create integral decimal with the same mantissa
        // (note: it always will be absolute value because I do not analyze
        // the sign information of source number)
        decimal integral = new decimal(raw[0], raw[1], raw[2], false, 0);

        // disposing from trailing zeros
        while (integral > 0 && integral % 10 == 0)
        {
            decimalPoint--;
            integral /= 10;
        }

        // returning the answer
        return decimalPoint;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T21:30:36.280

（建议）你可以这样计算：

```
public static int GetDecimalPlaces(decimal decimalNumber)
{
    var s = decimalNumber.ToString();
    return s.Substring(s.IndexOf(CultureInfo.CurrentCulture.NumberFormat.NumberDecimalSeparator) + 1).Length;
} 
```

# coldfusion - Coldfusion CFMAIL 和 sendgrid

> ID：13481713
> 
> 赞同：5
> 
> 时间：2012-11-20T20:39:29.557
> 
> 标签：coldfusion, sendgrid, cfmail

我在托管的同一台服务器上有 2 个客户端，它们都通过 sendgrid.com 发送电子邮件（都有自己的帐户）。

我正在查看有关 sendgrid 的报告，并注意到来自“客户 1”的类别出现在“客户 2”的报告中。

我在 sendgrid 的电话上花了很多时间，他们告诉我，“客户端 1”的一批 3000 封电子邮件中的 65 封电子邮件显示是通过“客户端 2”的经过身份验证的用户发送的。

在我的脚本中，我使用coldfusion cfmail 并将该客户端的SMTP 地址、用户名和密码指定到标签中。

一个可能的理论考虑了管理员邮件下的“维护与邮件服务器的连接”复选框。

“选中此复选框可保持与邮件服务器的连接处于打开状态，以便在发送邮件后重复使用（推荐）。”

如果两个客户端同时发送电子邮件（很有可能），coldfusion 邮件假脱机引擎会根据服务器/用户名和密码将它们分开，还是将它们全部发送到当前打开的邮件服务器？

如果我取消选中维护与邮件服务器的连接复选框......资源的缺点是什么？我的客户整天发送时事通讯和交易电子邮件，每个客户可能大约 10k。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T13:17:30.690

我不知道您正在运行什么版本的 ColdFusion，但在 ColdFusion 9 中添加了一个新功能，允许您在 Application.cfc 文件中指定 SMTP 服务器设置。假设您的 2 个站点有单独的 Application.cfc 文件，那么这可能对您有用。

[这是对 ColdFusion 9 中新功能的参考](http://cookbooks.adobe.com/post_How_can_I_use_Application_level_SMTP_Server_Settin-16469.html)

*这是来自该引用页面的文本。*

**问题**
我如何使用 ColdFusion 服务器中托管的应用程序的不同 SMTP 服务器设置来发送电子邮件。

**解决方案**
通过在 Application.cfc 文件中使用 ColdFusion 9 新的“smtpServersettings”功能，我们可以为应用程序指定不同的 SMTP 服务器设置。

**详细说明**
ColdFusion 9 在 Application.cfc 文件中添加了一个名为“smtpServersettings”的新属性。我们可以在 Application.cfc 中的 THIS 范围的“smtpServersettings”属性中指定 SMTP 服务器设置详细信息，该属性采用三个值，它们是服务器、用户名和密码作为结构。

```
<cfcomponent displayname="CF9ApplicationVariables" output="false">

   <cfset this.name   = "CF9ApplicationVariables" />
   <cfset this.smtpserversettings   = {
                          server="mailServerAddress",
                          username="userEamilID",
                          password="userPassword"
                          } />
</cfcomponent> 
```

现在 CFMail 标记将使用服务器详细信息来发送邮件，如 Application.cfc 中的“smtpServersetting”中所述，它不会使用 ColdFusion 9 Administrator 中指定的服务器值。如果不使用“smtpServersetting”属性，那么 CFMail 将正常运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T14:01:18.457

我最终修改了服务器中的 DNS 设置，添加了一个指向 smtp 地址的 cname，smtp.sendgrid.net。然后我更新了我的代码以使用新的服务器名称，这似乎分离了连接。

# javascript - 使用 jQuery .each() 添加新元素

> ID：13481714
> 
> 赞同：-2
> 
> 时间：2012-11-20T20:39:38.160
> 
> 标签：javascript, jquery, html

我正在构建某种类型的计算器，它可以计算利率和贷款金额。我希望能够根据利率百分比比较不同的贷款统计数据。因此，如果我输入 50000 作为贷款金额并希望查看一些基于 4% 利率和 6% 利率的统计数据，我将获得一个包含这些计算的动态添加表。

因此，用户可以输入任意数量的利率进行比较，并查看贷款金额的不同统计数据（例如，还清需要多长时间）。

问题：由于用户可以输入任意数量的百分比（动态插入），因此我必须遍历每个百分比来计算内容。我把它记下来了，但是如果页面没有重新加载并且用户单击链接添加另一个输入框以比较另一个百分比然后单击按钮再次计算，则新的百分比将添加到表中加上所有之前的百分比率再次添加。

我知道为什么会发生这种情况（我猜这是 .each() 预期的），**但是我如何对其进行编码，以便表格只会添加新单元格而不是新单元格+所有旧单元格。**

抱歉，解释太长了。单击下面的链接以查看一个有效的示例。请记住，添加一些百分比利率和贷款金额并单击计算，但不要刷新并添加更多百分比利率并再次单击计算。不要担心数学或我如何得到数字。现在没关系；我只是想让初步的东西发挥作用。谢谢。！

[http://machinesandwich.com/calc.html](http://machinesandwich.com/calc.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:45:50.013

我建议每次都清除和重建表行。

从我看到的问题是你没有摆脱以前的细胞。

因此，您可以轻松地为每个输入添加一个新单元格，但请务必先删除先前添加的单元格。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-20T20:54:05.770

这就是你的 jQuery 代码应该是这样的：

```
var $table = $("div#standard table");
var col1 = $table.find('tr:first').find('th[scope="col"]');
$table.find('tr:first').html(col1+"<th>" + num + "% interest rate</th>");
var row1 = $table.find('tr#totalMonths').find('th[scope="row"]');
$table.find('tr#totalMonths').html(row1+"<td>" + totalMonths + "</td>");
var row2 = $table.find('tr#paymentPerMonth').find('th[scope="row"]');
$table.find('tr#paymentPerMonth').html(row2+"<td>" + paymentPerMonth + "</td>"); 
```

你总是可以更简化它，但这*应该*工作！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-20T20:46:27.667

不要附加，只需像这样更改 HTML：

```
 $("div#standard table tbody th[scope=col]").html("<th>" + num + "% interest rate</th>");
 $("div#standard table tbody tr#totalMonths").html("<td>" + totalMonths + "</td>");
 $("div#standard table tbody tr#paymentPerMonth").html("<td>" + paymentPerMonth + "</td>");
}); 
```

# ios - NSNotification 与 dispatch_get_main_queue

> ID：13481716
> 
> 赞同：10
> 
> 时间：2012-11-20T20:39:45.083
> 
> 标签：ios, grand-central-dispatch, nsnotifications

关于[这个问题](https://stackoverflow.com/questions/7905192/iphone-grand-central-dispatch-main-thread)，我想知道是否有任何普遍接受的逻辑关于何时使用 NSNotification，在主线程中使用观察者，与使用 GCD 将工作从后台线程分派到主线程？

似乎使用通知观察器设置，您必须记住在视图卸载时拆除观察器，但随后您可靠地忽略通知，因为将作业分派到主线程可能会导致在视图已执行时执行块被卸载。

因此，在我看来，通知应该提供改进的应用程序稳定性。我假设调度选项从我读过的 GCD 中提供了更好的性能？

**更新：**

我知道通知和调度可以愉快地一起工作，在某些情况下，应该一起使用。我试图找出是否存在应该/不应该使用的特定情况。

一个例子：为什么我要选择主线程来从一个分派的块中触发一个通知，而不是仅仅在主队列上分派接收函数？（显然这两种情况下接收函数会有一些变化，但最终结果似乎是一样的）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-21T00:24:10.977

`NSNotificationCenter`和`gcd`&用于非常不同的`dispatch_get_main_queue()`目的。我不认为“vs”是真正适用的。

`NSNotificationCenter`提供了一种解耦应用程序不同部分的方法。例如`kReachabilityChangedNotification`，Apple 的 Reachability 示例代码在系统网络状态发生变化时发布到通知中心。反过来，您可以要求通知中心调用您的选择器/调用，以便您可以响应此类事件。（想想空袭警报）

`gcd`另一方面，提供了一种快速分配要在您指定的队列上完成的工作的方法。它使您可以告诉系统您的代码可以在哪些点被单独剖析和处理，以利用多线程和多核 CPU。

通常（几乎总是）在发布通知的线程上观察到通知。除了一个 API 的显着例外......

这些与概念相交的 API 是`NSNotificationCenter`'s：

```
addObserverForName:object:queue:usingBlock: 
```

这本质上是一种方便的方法，用于确保在给定线程上观察到给定通知。尽管“ `usingBlock`”参数泄露了它在幕后使用的`gcd`.

这是它的用法示例。假设在我的代码中某处`NSTimer`每秒调用一次此方法：

```
-(void)timerTimedOut:(NSTimer *)timer{
    dispatch_async(dispatch_get_global_queue(0, 0), ^{
        // Ha! Gotcha this is on a background thread.
        [[NSNotificationCenter defaultCenter] postNotificationName:backgroundColorIsGettingBoringNotification object:nil];
    });
} 
```

我想将`backgroundColorIsGettingBoringNotification`用作我的信号来更改我的视图控制器的视图的背景颜色。但它发布在后台线程上。好吧，我只能在主线程上使用上述 API 来观察它。请注意`viewDidLoad`以下代码：

```
@implementation NoWayWillMyBackgroundBeBoringViewController {
    id _observer;
}
-(void)observeHeyNotification:(NSNotification *)note{
    static NSArray *rainbow = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        rainbow = @[[UIColor redColor], [UIColor orangeColor], [UIColor yellowColor], [UIColor greenColor], [UIColor blueColor], [UIColor purpleColor]];
    });
    NSInteger colorIndex = [rainbow indexOfObject:self.view.backgroundColor];
    colorIndex++;
    if (colorIndex == rainbow.count) colorIndex = 0;
    self.view.backgroundColor = [rainbow objectAtIndex:colorIndex];
}
- (void)viewDidLoad{
    [super viewDidLoad];
    self.view.backgroundColor = [UIColor redColor];
    __weak PNE_ViewController *weakSelf = self;
    _observer = [[NSNotificationCenter defaultCenter] addObserverForName:backgroundColorIsGettingBoringNotification
                                                                  object:nil
                                                                   queue:[NSOperationQueue mainQueue]
                                                              usingBlock:^(NSNotification *note){
                                                                  [weakSelf observeHeyNotification:note];
                                                              }];
}
-(void)viewDidUnload{
    [super viewDidUnload];
    [[NSNotificationCenter defaultCenter] removeObserver:_observer];
}
-(void)dealloc{
    [[NSNotificationCenter defaultCenter] removeObserver:_observer];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}
@end 
```

此 API 的主要优点似乎是您的观察块将在调用期间被`postNotification...`调用。如果您使用标准 API 并按`observeHeyNotification:`如下方式实现，则无法保证在您的调度块执行之前需要多长时间：

```
-(void)observeHeyNotification:(NSNotification *)note{
    dispatch_async(dispatch_get_main_queue(), ^{
        // Same stuff here...
    });
} 
```

当然，在这个例子中，您可以简单地不在后台线程上发布通知，但是如果您使用的框架不能保证它将在哪个线程上发布通知，这可能会派上用场。

# browser - 如何获得相同颜色的跨浏览器图像

> ID：13481719
> 
> 赞同：0
> 
> 时间：2012-11-20T20:40:06.090
> 
> 标签：browser, png, image, gif, jpeg

我长期以来一直存在图像在不同浏览器上呈现不同色调的问题 - 例如，在 OSX 上，我可以制作一个紫色或绿色框，它在 chrome 上看起来与 safari 不同。我已经尝试导出为 png8、png32、gif、jpg、on 和 on 并且没有任何变化。我很想找到一些真正的颜色安全图表或十六进制生成器或一些关于如何解决这个问题的信息。我尝试过使用具有相同问题的网络安全调色板。徽标在一个浏览器上看起来很棒而在另一个浏览器上看起来很棒，这真的很令人沮丧。将 CSS 与 img 匹配也适用于其中一个，但不适用于另一个。

**更多测试：**

关于颜色管理的答案让我读了很多书，但似乎不是问题——safari 6 和当前的 chrome 都有颜色管理，但它们会渲染图像不同的色调。我对大约 10 个图像导出（gif 精确、jpeg、png24、png8、gif 自适应等）进行了测试，并在 firefox 和 photoshop cs6 中做了同样的事情。结果 - 两个应用程序都导出不同的颜色（我认为这是 sRGB 中的 PS 导出，我不确定 FW，因为它没有设置） - 但是大多数图像，无论应用程序导出如何。在浏览器中呈现不同。令人担忧的是，虽然 chrome 的图像与 css 颜色非常匹配，但没有一个 safari 的图像（总共 21 个！）甚至接近我在 web css 测试中使用的 css 十六进制以及在应用。

我已经上传了截图 - 顶部是 safari 和底部 chrome - 左上角只有 css，其余的是使用大多数导出选项从 photoshop 和 firefox 导出的各种导出。

[http://www.picturehoster.com/files/6wp6irm154cre3faop2.png](http://www.pictureshoster.com/files/6wp6irm154cre3faop2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T21:00:23.307

也许这与色彩管理有关。某些浏览器（如 Firefox 或 Safari）支持颜色管理。

您可以尝试通过转到`about:config`并设置`gfx.color_management.mode`为 0 来暂时禁用 Firefox 中的颜色管理。

您可以在此处找到有关 firefox 颜色管理的更多信息： [http ://www.metalvortex.com/blog/2012/03/16/831.html](http://www.metalvortex.com/blog/2012/03/16/831.html)

# joomla2.5 - Joomla 2.5 覆盖不允许作者编辑他发表的文章

> ID：13481720
> 
> 赞同：0
> 
> 时间：2012-11-20T20:40:06.727
> 
> 标签：joomla2.5

使用 Joomla 2.5，即使文章发表，作者也可以编辑他/她的文章。

我可能想使用 Joomla 覆盖来不允许这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:34:45.327

请参阅其中说明以下内容的`Edit Own`选项：`Article Manager Options`

> 允许组中的用户编辑他们在此扩展程序中提交的任何内容。

去`Article Manager -> Article Manager Options -> Permissions tab -> Click 'Author'`

显示其位置的图像：![在此处输入图像描述](../Images/ec2351fba62ccf9668b9c6bcf6195717.png)

# android - 多个球与egine android之间的碰撞

> ID：13481721
> 
> 赞同：0
> 
> 时间：2012-11-20T20:40:08.527
> 
> 标签：android, andengine

我使用andengine for android，我有多个球在它们和屏幕的限制之间反弹。问题是我在碰撞时所做的是反转 X 和 Y 方向，因此弹跳效果不真实，你怎么办？

```
@Override
protected void onManagedUpdate(final float pSecondsElapsed) {
    if(this.mX < 0) {
        this.mPhysicsHandler.setVelocityX(DEMO_VELOCITY);
    } else if(this.mX + this.getWidth() > CAMERA_WIDTH) {
        this.mPhysicsHandler.setVelocityX(-DEMO_VELOCITY);
    }

    if(this.mY < 0) {
        this.mPhysicsHandler.setVelocityY(DEMO_VELOCITY);
    } else if(this.mY + this.getHeight() > CAMERA_HEIGHT) {
        this.mPhysicsHandler.setVelocityY(-DEMO_VELOCITY);
    }

    for (int i = 0; i < Bolas.size(); i++) {
        if (this.collidesWith(Bolas.get(i)) && Bolas.get(i).equals(this) == false) {                               
            // ????????????????????????????????                      
            this.mPhysicsHandler.setVelocityY((-1) * this.mPhysicsHandler.getVelocityY());
            this.mPhysicsHandler.setVelocityX((-1) * this.mPhysicsHandler.getVelocityX());                   
        }
    }                 

    super.onManagedUpdate(pSecondsElapsed);
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:44:19.513

如果我理解正确，那么您可以将 Body (box2d) 用于您的精灵：

```
Sprite yourSprite = new Sprite(pX, pY, this.mYourSpriteTextureRegion);
Body yourSpriteBody = PhysicsFactory.createCircleBody(this.mPhysicsWorld, yourSprite , BodyType.DynamicBody, FIXTURE_DEF);
this.mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(yourSprite , yourSpriteBody , true, true)); 
```

弹跳将自动进行。

看这个[例子](http://code.google.com/p/andengineexamples/source/browse/src/org/anddev/andengine/examples/PhysicsExample.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:05:43.043

您应该使用 AndEnginePhysicsBoxExtension。您将能够设置密度、弹性、摩擦力等，并拥有自己的碰撞处理程序。我喜欢下面的例子：[https ://github.com/nicolasgramlich/AndEngineExamples/blob/GLES2/src/org/andengine/examples/BasePhysicsJointExample.java](https://github.com/nicolasgramlich/AndEngineExamples/blob/GLES2/src/org/andengine/examples/BasePhysicsJointExample.java)

我还建议您阅读有关 BodyCollisionHandler 的内容。

# android - ActionbarSherlock 想要在图标和选项卡之间插入图像

> ID：13481723
> 
> 赞同：0
> 
> 时间：2012-11-20T20:40:28.193
> 
> 标签：android, actionbarsherlock

我有一个使用 ABS 的平板电脑布局。

显示主页（应用程序）图标，右侧显示我的 4 个选项卡。

我想在图标和标签之间插入一张图片（用于广告）。

有人知道是否可以做到吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T23:32:31.317

您不能在图标和选项卡之间插入图像，但可以：

A. 使用其中包含图标和广告的 logo drawable - 然后通过将`android:logo`应用程序或活动上的属性设置为 logo drawable 来添加它。

或者

B. 使用自定义视图并在 ActionBar 上使用`setCustomView(View view)`.

# c++ - 如何将列放入文件中

> ID：13481726
> 
> 赞同：0
> 
> 时间：2012-11-20T20:40:32.350
> 
> 标签：c++, c

我有一个文件，我想在其中插入数据，如下所示：

列大小：5个空格5个空格12个空格

```
25100 23501 169247103621 
```

但我仍然有这**两个条件**：

1.  如果字符串大于列大小，我会从字符串中消除奇数长度。
2.  如果字符串小于列大小，我用空格填充字符串的其余部分。

**例1：**

```
2510025 23501 169247103621 
```

变得：

```
25100 23501 169247103621 
```

**例 2：**

```
25 23501 169247103621 
```

变得：

```
25    23501 169247103621 
```

我设法在 c 中得到这个`printf`，但现在我想在文件中打印一些格式。

```
#include <stdio.h>

int main(int argc, char **argv)
{
   char FMT[] = "%-5.5s %5s %-6.12s\n";
   FILE *hFile = NULL;
   char *string  = "freeifaddrss";
   char *string2 = "cards";
   char *string3 = "ifa_nextifa_next";
   printf(FMT, string, string2, string3);
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T20:50:34.027

要写入文件，您可以重定向程序的输出，例如：

```
./prog > out.txt 
```

或在程序中打开一个文件并写入：

```
FILE *f = fopen(argv[1], "w");
if (f == NULL) {
     perror(argv[1]);
     exit(EXIT_FAILURE);
}
...
fprintf(f, FMT, string, string2, string3); 
```

调用它：

```
./prog out.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T21:02:20.103

你为什么不试试？

```
fp = fopen( "output.txt", "w" );
if( fp != NULL )
  fprintf( fp, "Hello %s\n", name ); 
```

# c++ - gcc如何链接静态库？

> ID：13481728
> 
> 赞同：2
> 
> 时间：2012-11-20T20:40:41.510
> 
> 标签：c++, gcc

我有一个简单的程序使用静态库来控制 pci 设备。我有一些例子。但我想给自己做一些例子，但我无法链接静态库。

我有 3 个文件：led.cpp main.cpp main.h

`gcc -c led.cpp -I../utils -I../driver -o led.o`

```
gcc -c main.cpp -I../utils -I../driver -o main.o 
```

没关系。成功创建 main.o 和 led.o 目标文件。

但是当连接状态时，它被破坏了。24dsi20c500k_utils.a 和 24dsi20c500k_dsl.a 静态库。

```
gcc led.o main.o ../utils/24dsi20c500k_utils.a ../docsrc/24dsi20c500k_dsl.a -o led 
```

输出显示：

```
led.o: In function `led_tests(int)':
led.cpp:(.text+0x18): undefined reference to `gsc_label(char const*)'
led.cpp:(.text+0x31): undefined reference to `dsi20c500k_initialize(int, int)'
led.cpp:(.text+0x39): undefined reference to `gsc_label_level_inc()'
led.cpp:(.text+0x5b): undefined reference to `dsi20c500k_led(int, int, int, int*)'
led.cpp:(.text+0x81): undefined reference to `dsi20c500k_led(int, int, int, int*)'
led.cpp:(.text+0xa2): undefined reference to `gsc_label_level_dec()'
led.cpp:(.text+0xb1): undefined reference to `dsi20c500k_initialize(int, int)'
main.o: In function `_perform_tests(int)':
main.cpp:(.text+0x3a1): undefined reference to `gsc_label(char const*)'
main.cpp:(.text+0x3c6): undefined reference to `gsc_id_driver(int, char const*)'
main.o: In function `main':
main.cpp:(.text+0x42c): undefined reference to `gsc_label_init(int)'
main.cpp:(.text+0x49a): undefined reference to `gsc_id_host()'
main.cpp:(.text+0x4a4): undefined reference to `gsc_count_boards(char const*)'
main.cpp:(.text+0x4b6): undefined reference to `gsc_select_1_board(int, int*)'
main.cpp:(.text+0x4d7): undefined reference to `gsc_label(char const*)'
main.cpp:(.text+0x500): undefined reference to `gsc_dev_open(unsigned int, char const*)'
main.cpp:(.text+0x54f): undefined reference to `gsc_dev_close(unsigned int, int)'
collect2: ld returned 1 exit status
make: *** [led] Error 1 
```

如果我将 cpp 文件重命名为 c 文件编译成功。问题是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T20:45:58.113

`gcc -c main.cpp`会将您的代码编译为 C++ 代码。

那么可能发生的情况是您的 main.cpp 包含其他头文件，这些头文件*并不*打算编译为 C++。这意味着当在 C++ 程序中包含这些头文件时，gcc 将假定头文件声明的所有内容都是 C++。

如果不是，如果您尝试链接到编译器假定为 C++ 的 C 代码，则会出现链接器错误。

您可以通过声明这些头文件是 C 来解决这个问题。例如，在您的 main.cpp 中，您会这样做

```
extern "C" {
#include "some_c_lib.h"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T20:45:31.067

您可能没有使用`extern "C"`.

> 如果我将 cpp 文件重命名为 c 文件编译成功。问题是什么？

# python - wxPython - 标题边框

> ID：13481731
> 
> 赞同：3
> 
> 时间：2012-11-20T20:40:46.680
> 
> 标签：python, user-interface, wxpython, titled-border

我搜索`wxPython`了文档，但找不到在面板上制作标题边框的任何方法。我需要一个边框，就像上面`wx.RadioBox`带有标题的边框一样。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T20:52:50.513

尝试使用[wx.StaticBox](http://docs.wxwidgets.org/trunk/classwx_static_box.html)或[wx.StaticBoxSizer 之一](http://docs.wxwidgets.org/trunk/classwx_static_box_sizer.html)。

# jquery-ui - Uploadify 在 JQuery UI 的 Dialog 和 Firefox 17 中不可点击

> ID：13481734
> 
> 赞同：0
> 
> 时间：2012-11-20T20:40:50.157
> 
> 标签：jquery-ui, firefox, dialog, click, uploadify

这是一个非常奇怪的问题。我首先阅读了 Maayan Glikser 关于这个问题的答案，看起来很相似：[Uploadify inside Jquery UI Dialog => Chrome & Opera bugs](https://stackoverflow.com/questions/5915918/uploadify-inside-jquery-ui-dialog-chrome-opera-bugs)

它根本没有用。让我解释一下我的问题。

我的网站上有 3 个不同的 Uplodify（Flash 版本）控件（不在同一页面上），其中只有一个不起作用，它是 JQuery UI 对话框中的那个。基本上，该按钮可见但不可点击。该问题仅针对此特定控件出现，其他控件正常运行。

所以我尝试调整 javascript 中的 z-index，它没有改变任何东西。然后我尝试在uploadify和bam生成的容器的开头*手动*添加a（通过firebug的“编辑html”功能） ，按钮变成可点击的`<br />`

然后我尝试添加`<br />`页面加载`$("#fmuploader").prepend('<br />')`并没有发生任何事情，添加了换行符但按钮不可点击。当我*手动*添加一个空格时，它再次变得可点击。

我相信当您从 firebug 手动编辑页面时会触发某种绘画事件，这会使按钮突然变得可点击，但我真的想知道是否可以让它最终按预期工作而无需询问我所有的 firefox 使用访客安装萤火虫:)

真的很难解释，所以我在这个地址设置了一个小测试页面：*已删除*（**编辑**：测试页面现在在生产环境中脱机并且不再可以访问）

这正是我遇到的问题。

加载页面，点击链接打开弹窗，打开firebug，找到上传者的容器 `<div id="fmuploader" class="uploadify" style="height: 30px; width: 120px;">`，在开始标签后加一个空格即可。按钮变为可点击。

该问题出现在除 firebug 和 Flash 11 之外没有附加组件的 Firefox 17 上。同一台机器上的 IE 7/8/9 和 Chrome 上不会出现该问题。

***更新***：我使用 Firefox 15 对其进行了测试，但无法重现该错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:38:56.833

我有一个类似的问题，但发现将 Firebug 更新到 1.11 版可以对其进行排序。

这似乎只是 1.10 版中的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:25:41.473

看起来 Firefox 17 安全模型的变化意味着 jQuery 的缩小版本在使用 Firebug 时会中断。除非我禁用 Firebug，否则很多基于 jQuery 的东西在 Firefox 17 中已经停止为我工作。

[https://blog.mozilla.org/addons/2012/08/20/exposing-objects-to-content-safely/](https://blog.mozilla.org/addons/2012/08/20/exposing-objects-to-content-safely/)

[https://developer.mozilla.org/en-US/docs/XPConnect_wrappers](https://developer.mozilla.org/en-US/docs/XPConnect_wrappers)

# objective-c - 设置海洋颜色（或其他颜色）

> ID：13481740
> 
> 赞同：1
> 
> 时间：2012-11-20T20:41:06.710
> 
> 标签：objective-c

> [UIColor colorWithRed:0.000 green:0.333 blue:0.557 alpha:1.000]

应该给海洋颜色。

我发现当直接从对象（在我的例子中是按钮）属性中选择海洋颜色时，它的颜色并不完全相同：你知道是否有工具可以准确检测特定颜色的值吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-09T10:01:14.257

使用此扩展程序拥有所有颜色

```
 extension UIColor {

        class func cantaloupe() -> UIColor {
            return UIColor(red:255/255, green:204/255, blue:102/255, alpha:1.0)
        }
        class func honeydew() -> UIColor {
            return UIColor(red:204/255, green:255/255, blue:102/255, alpha:1.0)
        }
        class func spindrift() -> UIColor {
            return UIColor(red:102/255, green:255/255, blue:204/255, alpha:1.0)
        }
        class func sky() -> UIColor {
            return UIColor(red:102/255, green:204/255, blue:255/255, alpha:1.0)
        }
        class func lavender() -> UIColor {
            return UIColor(red:204/255, green:102/255, blue:255/255, alpha:1.0)
        }
        class func carnation() -> UIColor {
            return UIColor(red:255/255, green:111/255, blue:207/255, alpha:1.0)
        }
        class func licorice() -> UIColor {
            return UIColor(red:0/255, green:0/255, blue:0/255, alpha:1.0)
        }
        class func snow() -> UIColor {
            return UIColor(red:255/255, green:255/255, blue:255/255, alpha:1.0)
        }
        class func salmon() -> UIColor {
            return UIColor(red:255/255, green:102/255, blue:102/255, alpha:1.0)
        }
        class func banana() -> UIColor {
            return UIColor(red:255/255, green:255/255, blue:102/255, alpha:1.0)
        }
        class func flora() -> UIColor {
            return UIColor(red:102/255, green:255/255, blue:102/255, alpha:1.0)
        }
        class func ice() -> UIColor {
            return UIColor(red:102/255, green:255/255, blue:255/255, alpha:1.0)
        }
        class func orchid() -> UIColor {
            return UIColor(red:102/255, green:102/255, blue:255/255, alpha:1.0)
        }
        class func bubblegum() -> UIColor {
            return UIColor(red:255/255, green:102/255, blue:255/255, alpha:1.0)
        }
        class func lead() -> UIColor {
            return UIColor(red:25/255, green:25/255, blue:25/255, alpha:1.0)
        }
        class func mercury() -> UIColor {
            return UIColor(red:230/255, green:230/255, blue:230/255, alpha:1.0)
        }
        class func tangerine() -> UIColor {
            return UIColor(red:255/255, green:128/255, blue:0/255, alpha:1.0)
        }
        class func lime() -> UIColor {
            return UIColor(red:128/255, green:255/255, blue:0/255, alpha:1.0)
        }
        class func seafoam() -> UIColor {
            return UIColor(red:0/255, green:255/255, blue:128/255, alpha:1.0)
        }
        class func aqua() -> UIColor {
            return UIColor(red:0/255, green:128/255, blue:255/255, alpha:1.0)
        }
        class func grape() -> UIColor {
            return UIColor(red:128/255, green:0/255, blue:255/255, alpha:1.0)
        }
        class func strawberry() -> UIColor {
            return UIColor(red:255/255, green:0/255, blue:128/255, alpha:1.0)
        }
        class func tungsten() -> UIColor {
            return UIColor(red:51/255, green:51/255, blue:51/255, alpha:1.0)
        }
        class func silver() -> UIColor {
            return UIColor(red:204/255, green:204/255, blue:204/255, alpha:1.0)
        }
        class func maraschino() -> UIColor {
            return UIColor(red:255/255, green:0/255, blue:0/255, alpha:1.0)
        }
        class func lemon() -> UIColor {
            return UIColor(red:255/255, green:255/255, blue:0/255, alpha:1.0)
        }
        class func spring() -> UIColor {
            return UIColor(red:0/255, green:255/255, blue:0/255, alpha:1.0)
        }
        class func turquoise() -> UIColor {
            return UIColor(red:0/255, green:255/255, blue:255/255, alpha:1.0)
        }
        class func blueberry() -> UIColor {
            return UIColor(red:0/255, green:0/255, blue:255/255, alpha:1.0)
        }
        class func magenta() -> UIColor {
            return UIColor(red:255/255, green:0/255, blue:255/255, alpha:1.0)
        }
        class func iron() -> UIColor {
            return UIColor(red:76/255, green:76/255, blue:76/255, alpha:1.0)
        }
        class func magnesium() -> UIColor {
            return UIColor(red:179/255, green:179/255, blue:179/255, alpha:1.0)
        }
        class func mocha() -> UIColor {
            return UIColor(red:128/255, green:64/255, blue:0/255, alpha:1.0)
        }
        class func fern() -> UIColor {
            return UIColor(red:64/255, green:128/255, blue:0/255, alpha:1.0)
        }
        class func moss() -> UIColor {
            return UIColor(red:0/255, green:128/255, blue:64/255, alpha:1.0)
        }
        class func ocean() -> UIColor {
            return UIColor(red:0/255, green:64/255, blue:128/255, alpha:1.0)
        }
        class func eggplant() -> UIColor {
            return UIColor(red:64/255, green:0/255, blue:128/255, alpha:1.0)
        }
        class func maroon() -> UIColor {
            return UIColor(red:128/255, green:0/255, blue:64/255, alpha:1.0)
        }
        class func steel() -> UIColor {
            return UIColor(red:102/255, green:102/255, blue:102/255, alpha:1.0)
        }
        class func aluminium() -> UIColor {
            return UIColor(red:153/255, green:153/255, blue:153/255, alpha:1.0)
        }
        class func cayenne() -> UIColor {
            return UIColor(red:128/255, green:0/255, blue:0/255, alpha:1.0)
        }
        class func asparagus() -> UIColor {
            return UIColor(red:128/255, green:120/255, blue:0/255, alpha:1.0)
        }
        class func clover() -> UIColor {
            return UIColor(red:0/255, green:128/255, blue:0/255, alpha:1.0)
        }
        class func teal() -> UIColor {
            return UIColor(red:0/255, green:128/255, blue:128/255, alpha:1.0)
        }
        class func midnight() -> UIColor {
            return UIColor(red:0/255, green:0/255, blue:128/255, alpha:1.0)
        }
        class func plum() -> UIColor {
            return UIColor(red:128/255, green:0/255, blue:128/255, alpha:1.0)
        }
        class func tin() -> UIColor {
            return UIColor(red:127/255, green:127/255, blue:127/255, alpha:1.0)
        }
        class func nickel() -> UIColor {
            return UIColor(red:128/255, green:128/255, blue:128/255, alpha:1.0)
        }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T20:44:46.673

颜色选择器会帮助你吗？在 Mac 上，我使用[http://colorsnapper.com/](http://colorsnapper.com/)，如果是网页，我使用[https://chrome.google.com/webstore/detail/pendule](https://chrome.google.com/webstore/detail/pendule)。

您可以将鼠标悬停在所需的颜色上，并获取十六进制代码。我会参考[如何从十六进制字符串创建 UIColor？](https://stackoverflow.com/questions/1560081/how-can-i-create-a-uicolor-from-a-hex-string)有关从十六进制转换为 UIColor 的详细信息，或使用这个[方便的网络应用程序](http://www.touch-code-magazine.com/web-color-to-uicolor-convertor/)。

（注意：ColorSnapper 不是免费的，但它确实有一个 iOS UIColor 选项，这将消除您必须自己从十六进制转换的需要）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-03-11T03:58:35.050

以下是上述[蒂姆肯特](https://stackoverflow.com/questions/13481740/setup-ocean-color-or-other-colors/28407101#28407101)答案的略微修改版本。此版本使用类常量来避免在引用颜色时键入括号。

使用常量，而不是键入以下内容：

```
let myColor = UIColor.cantaloupe() 
```

你可以输入这个：

```
let myColor = UIColor.cantaloupe 
```

更新后的扩展如下所示：

```
import UIKit

extension UIColor
{
    static let aluminum = UIColor(red:153/255, green:153/255, blue:153/255, alpha:1.0)
    static let aqua = UIColor(red:0/255, green:128/255, blue:255/255, alpha:1.0)
    static let asparagus = UIColor(red:128/255, green:120/255, blue:0/255, alpha:1.0)
    static let banana = UIColor(red:255/255, green:255/255, blue:102/255, alpha:1.0)
    static let blueberry = UIColor(red:0/255, green:0/255, blue:255/255, alpha:1.0)
    static let bubblegum = UIColor(red:255/255, green:102/255, blue:255/255, alpha:1.0)
    static let cantalope = UIColor(red:255/255, green:204/255, blue:102/255, alpha:1.0)
    static let carnation = UIColor(red:255/255, green:111/255, blue:207/255, alpha:1.0)
    static let cayenne = UIColor(red:128/255, green:0/255, blue:0/255, alpha:1.0)
    static let clover = UIColor(red:0/255, green:128/255, blue:0/255, alpha:1.0)
    static let eggplant = UIColor(red:64/255, green:0/255, blue:128/255, alpha:1.0)
    static let fern = UIColor(red:64/255, green:128/255, blue:0/255, alpha:1.0)
    static let flora = UIColor(red:102/255, green:255/255, blue:102/255, alpha:1.0)
    static let grape = UIColor(red:128/255, green:0/255, blue:255/255, alpha:1.0)
    static let honeydew = UIColor(red:204/255, green:255/255, blue:102/255, alpha:1.0)
    static let ice = UIColor(red:102/255, green:255/255, blue:255/255, alpha:1.0)
    static let iron = UIColor(red:76/255, green:76/255, blue:76/255, alpha:1.0)
    static let lavender = UIColor(red:204/255, green:102/255, blue:255/255, alpha:1.0)
    static let lead = UIColor(red:25/255, green:25/255, blue:25/255, alpha:1.0)
    static let lemon = UIColor(red:255/255, green:255/255, blue:0/255, alpha:1.0)
    static let licorice = UIColor(red:0/255, green:0/255, blue:0/255, alpha:1.0)
    static let lime = UIColor(red:128/255, green:255/255, blue:0/255, alpha:1.0)
    static let magenta = UIColor(red:255/255, green:0/255, blue:255/255, alpha:1.0)
    static let magnesium = UIColor(red:179/255, green:179/255, blue:179/255, alpha:1.0)
    static let maraschino = UIColor(red:255/255, green:0/255, blue:0/255, alpha:1.0)
    static let maroon = UIColor(red:128/255, green:0/255, blue:64/255, alpha:1.0)
    static let mercury = UIColor(red:230/255, green:230/255, blue:230/255, alpha:1.0)
    static let midnight = UIColor(red:0/255, green:0/255, blue:128/255, alpha:1.0)
    static let mocha = UIColor(red:128/255, green:64/255, blue:0/255, alpha:1.0)
    static let moss = UIColor(red:0/255, green:128/255, blue:64/255, alpha:1.0)
    static let nickel = UIColor(red:128/255, green:128/255, blue:128/255, alpha:1.0)
    static let ocean = UIColor(red:0/255, green:64/255, blue:128/255, alpha:1.0)
    static let orchid = UIColor(red:102/255, green:102/255, blue:255/255, alpha:1.0)
    static let plum = UIColor(red:128/255, green:0/255, blue:128/255, alpha:1.0)
    static let salmon = UIColor(red:255/255, green:102/255, blue:102/255, alpha:1.0)
    static let seafoam = UIColor(red:0/255, green:255/255, blue:128/255, alpha:1.0)
    static let silver = UIColor(red:204/255, green:204/255, blue:204/255, alpha:1.0)
    static let sky = UIColor(red:102/255, green:204/255, blue:255/255, alpha:1.0)
    static let snow = UIColor(red:255/255, green:255/255, blue:255/255, alpha:1.0)
    static let spindrift = UIColor(red:102/255, green:255/255, blue:204/255, alpha:1.0)
    static let spring = UIColor(red:0/255, green:255/255, blue:0/255, alpha:1.0)
    static let steel = UIColor(red:102/255, green:102/255, blue:102/255, alpha:1.0)
    static let strawberry = UIColor(red:255/255, green:0/255, blue:128/255, alpha:1.0)
    static let tangerine = UIColor(red:255/255, green:128/255, blue:0/255, alpha:1.0)
    static let teal = UIColor(red:0/255, green:128/255, blue:128/255, alpha:1.0)
    static let tin = UIColor(red:127/255, green:127/255, blue:127/255, alpha:1.0)
    static let tungsten = UIColor(red:51/255, green:51/255, blue:51/255, alpha:1.0)
    static let turquoise = UIColor(red:0/255, green:255/255, blue:255/255, alpha:1.0)
} 
```

PS 还修复了拼写错误`cantalope`->`cantaloupe`和`aluminium`-> `aluminum`（如 XCode 中）并按字母顺序对颜色名称进行排序。但是，颜色代码未经过验证。

# sql - 对于数小时的操作，数据库设计的好方法是什么？

> ID：13481741
> 
> 赞同：9
> 
> 时间：2012-11-20T20:41:08.960
> 
> 标签：sql, database, database-design

我正在尝试创建一个需要使用数小时操作并允许用户通过它进行搜索的应用程序（想想 Yelp 是如何做到这一点的）。

我正在争论什么是一个好的设计。我唯一能想到的是有一个数据库表，其中包含一个“公司”表的外键，该表列出了一周中的一天以及打开和关闭时间。

```
Tbl_Hours_Operation
- day_of_week
- open_time
- close_time
- company_id 
```

有没有其他方法可以工作并且更有效？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T20:50:48.753

有两张桌子：

**运营**小时（公司 ID、星期天、开放时间、关闭时间）

**operation_hours_special** (company_id, date, open_time, close_time)

您需要加入这两个表以检查特殊时间。

你们的公司是否会因早餐、午餐、晚餐、[午睡](http://en.wikipedia.org/wiki/Siesta)而关闭？如果是这样，我会补充：

**operation_hours_closed** (company_id, day_of_week, close_time, open_time)

更有趣`JOIN`！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:23:35.557

你的方法似乎很合理。只需要注意一些小事情：

确保在 Company_Id 和 DayOfWeek_Id 上（并按该顺序）索引此表。它还应该（可能）支持一周中每天的多个条目，以防公司在白天关闭或在夜间开放。

```
CompanyDayOfWeek
----------------
Company_Id     INT/BIGINT    FK->Company table
DayOfWeek_Id   INT           (this can be a FK or just a hard coded list of IDs)
Open_Time      TIME          if your DB supports a dateless time data type
Close_Time     TIME 
```

# jquery - Datepicker 事件处理程序改进问题

> ID：13481742
> 
> 赞同：0
> 
> 时间：2012-11-20T20:41:19.500
> 
> 标签：jquery, html

从 jQuery UI 中的现有日期选择器制作我的“事件日历”时遇到问题。

这是我到目前为止提出的代码。

```
 <script>
    $(document).ready(function() {
        $("#datepicker").datepicker({
            onSelect: function(dateText, inst) {
                var myDate = new Date(dateText);
                var newFormat = $.datepicker.formatDate("yy-mm-dd", myDate);
                    if (newFormat === "2012-11-20") {
                        $("#div").html("KIING");
                    } else if (newFormat === "2012-11-21") {
                        $("#div").html("KIIIIIIING");
                    } else if (newFormat === "2012-11-03") {
                        $("#div").html("1234123");
                    } else {
                        $("#div").html("");
                    }
            }
        });
    });
</script>
<div id="datepicker"></div>
<div id="div"></div> 
```

[http://jsfiddle.net/ALrkB/](http://jsfiddle.net/ALrkB/)

我被困在这里，我不知道如何使代码更好，这样您就不必为每个事件手动插入代码。

想法是用户登录到 CMS 并添加一个带有 DATE 和 EVENT 的查询，然后它连接到 jQuery 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T21:27:06.937

这应该够了吧

```
<script>
   $(document).ready(function() {
    $("#datepicker").datepicker({
        onSelect: function(dateText, inst) {
            var ajaxCfg = {
                url: '/your/path/to/data',
                data: {selectedDate: dateText},
                type: 'POST',
                success: function(data) {
                  $("#div").html($(data).html());
                }
            };
            $.ajax(ajaxCfg);
        }
    });
});
</script>
<div id="datepicker"></div>
<div id="div"></div> 
```

在服务器端，您需要获取 selectedDate 和当前用户的发布值，然后查询您的事件数据库并将数据返回到脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T21:27:49.100

这是您需要的 jQuery 代码：

```
$(document).ready(function() {
        $("#datepicker").datepicker({
            onSelect: function(dateText, inst) {
                var myDate = new Date(dateText);
                var newFormat = $.datepicker.formatDate("yy-mm-dd", myDate);
                $.getJSON("callookup.php", { date: newFormat }, function(result) {
                        $("#div").html(result);
                });
            }
        });
    }); 
```

# iphone - Safari 上的流问题

> ID：13481755
> 
> 赞同：1
> 
> 时间：2012-11-20T20:42:22.463
> 
> 标签：iphone, html, safari

[http://silver.co.uk/rla](http://silver.co.uk/rla)

我对上面的页面有问题。设置信息在页面上。

1.  **它不能在 iPhone** (iOS 5) 上播放。如果先下载到 iPhone 上的文件会播放，但不会从页面流式传输。播放按钮什么都不做。

2.  **它仅在 Windows 上的 Safari 上加载视频后播放**。即，只要您单击播放按钮，它就不会流式传输，而是等待加载视频。然后它播放。这不会发生在 MacOS 的 Safari 上。

我究竟做错了什么？

谢谢

里兹

# prolog - Prolog - 将列表转换为子句列表

> ID：13481757
> 
> 赞同：2
> 
> 时间：2012-11-20T20:42:31.203
> 
> 标签：prolog, dcg

我正在尝试使用元编程和 DCG 将列表转换为使用 Prolog 的子句列表。例如，我想把 [a, man, is, a, human] 变成 [ (human(X) :- man(X)) ]

我想我可以使用 =.. 从它们的组成部分列表中组成术语。例如，调用`Term =.. [f,a,b,c]`会将 Term 绑定到`f(a,b,c)`.

我的问题是尝试使用 DCG 将其结合起来。到目前为止，我已经使用 DCGs 来检查一个句子是否是有效的形式：

```
 %% syllogism( +S )
  % Holds if the sentence S is one of four syllogisms

  % a B is a C
  syllogism  --> article, subject, is_, (article ; [] ), subject .

  % some B is a C 
  syllogism  --> some, subject, is_, (article ; [] ), subject .

  % no B is a C
  syllogism  --> no, subject, is_, (article ; [] ), subject .

  % some B is not a C
  syllogism  --> some, subject, is_, not, (article ; [] ), subject .

  subject   --> [X] .
  some      --> [some] .
  is_       --> [is] .
  article   --> [a] .
  article   --> [every] .
  not       --> [not] .
  no        --> [no] . 
```

但是，我正在尝试对其进行修改，以便在仍然依赖 DCG 的同时生成子句列表。

编辑：基本上我想要实现的是获取一个列表 L 并产生一个子句列表： [a, man, is, a, human] 应该产生 [man(X) :- human(X)]

同样： [no, B, is, a, C] 应该产生 [ (false :- B(X),C(X)) ]

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:24:09.993

看起来你需要一个元解释器[http://ktiml.mff.cuni.cz/~bartak/prolog/meta_interpret.html](http://ktiml.mff.cuni.cz/~bartak/prolog/meta_interpret.html)

最终，Prolog 中的所有问题都归结为使用正确的元解释器。

# css - 结合两个伪类

> ID：13481760
> 
> 赞同：0
> 
> 时间：2012-11-20T20:42:39.073
> 
> 标签：css

我有一个 div 元素，可以将任何文本设置为大写。

我需要在第一个 div 中添加另一个 div，但其中的任何文本都应正确大写。我能做到这一点的唯一方法是添加以下两个：

```
text-transform:lowercase; 
text-transform:capitalize 
```

它有效，但是有没有更好的方法将这两者结合起来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:46:02.853

如何`text-transform:none`覆盖父设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T20:48:02.127

约束两种不同类型的文本：

[http://jsfiddle.net/eMacd/](http://jsfiddle.net/eMaCd/)

```
<div>
<p class="caps">This is the text to capatalize</p>
<p>Normal Text</p>
</div>​

.caps { text-transform:uppercase; }​ 
```

# c# - 在不同的服务器上查找目录

> ID：13481762
> 
> 赞同：2
> 
> 时间：2012-11-20T20:42:52.617
> 
> 标签：c#, asp.net, directory

我在服务器 A 上有一个网站，它需要在服务器 B 上找到一个目录。

在我的 aspx 页面上，我有：

```
<mb:FileSystemDataSource
    ID="fileSystemDataSource" runat="server"
    RootPath="\\servername\Folder\Subfolder"
    FoldersOnly="true" /> 
```

mb 是程序集名称别名。

在我的 aspx.cs 页面上，我有：

```
protected void Page_Load(object sender, EventArgs e)
{
    DataTable gridviewSource = DisplayFilesInGridView();
    DataRow gridviewRow;

    //sets the server path so it does not default to current server
    string ServerPath = System.IO.Path.Combine(
        "//",
        this.fileSystemDataSource.RootPath);

    //Get All Folders Or Directories and add in table
    DirectoryInfo directory = new DirectoryInfo(Server.MapPath(ServerPath));
    DirectoryInfo[] subDirectories = directory.GetDirectories();
} 
```

好吧，它会在 Server.MapPath 上引发错误，因为它找不到服务器。我已连接到网络。我查看了 IIS，我很确定这不是问题所在。如果是这样，我真的需要细节。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:04:32.210

所以 Directory 不喜欢 Server.MapPath。我必须将 UNC 字符串硬编码到 Directory 构造函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T22:56:34.170

```
string ServerPath = System.IO.Path.Combine(
    "//",
    this.fileSystemDataSource.RootPath); 
```

你确定这`"//"`就是你要找的吗？UNC 路径以`"\\"`. 尝试在调试模式下运行你的程序，看看实际的`ServerPath`字符串是什么。

# ios - 当 UI 文本字段在模型之后点击到不同的视图控制器时，UI 键盘不出现

> ID：13481763
> 
> 赞同：1
> 
> 时间：2012-11-20T20:42:58.647
> 
> 标签：ios, xcode, uitextfield, first-responder, resignfirstresponder

行。所以我一直在 xcode 上测试一个简单的应用程序来熟悉这个平台，但是我遇到了一个有趣的情况。使用故事板，我拖动了两个视图控制器，它们通过 segues 按钮连接。它们都有一个 uitextfield 拖在它们上面，当它们是初始视图时，它们会在单击时做出响应。但是，当我从 buttoned segue 移到另一个视图控制器时，键盘不再自动弹出。这是苹果的 uitextfield 的问题吗？（ps。没有代码，因为我认为这只是自动响应）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T21:22:47.500

查看视图层次结构是否混乱。您可以在“文档大纲”中轻松看到这一点。

![文件大纲](../Images/e6c9fed8129d45a68a6c362290619eb5.png)

如果您没有看到此窗格，请查看情节提要的左侧底部，然后单击指向左侧的小箭头。

你在这里看到什么？文本字段是视图还是其他东西的直接子级？如果它是直系子女，您是否看到此处列出的其他 View 的孩子您不认识？

# javascript - OpenLayers：使用来自外部地图的调用添加时无法关闭弹出窗口

> ID：13481764
> 
> 赞同：4
> 
> 时间：2012-11-20T20:42:59.610
> 
> 标签：javascript, popup, openlayers

我编写了一个基本函数，允许我从地图外的链接显示弹出窗口。打开弹出窗口的功能工作正常，但我无法关闭它。

演示链接： http: [//www.catchtherain.com/bikestats/stations.php](http://www.catchingtherain.com/bikestats/stations.php) - 单击左侧选项卡式面板中的链接。

这里有更多细节......

一张典型的地图在从 kml 加载的矢量图层“站”上具有大约 300 个要素。这些是使用 onload 激活的

```
select = new OpenLayers.Control.SelectFeature(stations);           
stations.events.on({
                "featureselected": onFeatureSelect,
                "featureunselected": onFeatureUnselect
                });
map.addLayer(stations);
map.addControl(select);
select.activate(); 
```

效果很好 - 我可以打开和关闭弹出窗口。

使用我的地图外链接，我正在调用 onclick="showMyPopup([x])，其中 [x] 是从 kml 加载的 ID 属性。showMyPopup 函数是

```
function showMyPopup(myID){
    for(var a = 0; a < stations.features.length; a++){    //loop through all the features
    var feature = stations.features[a];
    if (feature.attributes.ID.value == myID) {            //until it finds the one with the matching ID attribute
       var content = "<h4>" + feature.attributes.name + "</h4>" + feature.attributes.description;
       popup = new OpenLayers.Popup.FramedCloud("chicken",
                                     feature.geometry.getBounds().getCenterLonLat(),
                                     new OpenLayers.Size(200,200),
                                     content,
                                     null, true, onPopupClose);
       feature.popup = popup;
       map.addPopup(popup);
       }
    }
} 
```

这会按预期从站层打开正确的弹出窗口，并且我可以使用站层上的 DOM 检查器看到弹出窗口，就像通过单击地图功能加载时出现的一样，但似乎没有办法关闭它。车站图层上的原始功能运行良好（打开和关闭）。

任何帮助将不胜感激（也许有更简单的方法来解决这个问题？）

谢谢，詹姆斯

PS，以防万一，这里是 onFeatureUnselect 函数......

```
function onFeatureUnselect(event) {
        var feature = event.feature;
        if(feature.popup) {
            map.removePopup(feature.popup);
            feature.popup.destroy();
            delete feature.popup;
        }
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T08:26:53.617

你的`onPopupClose()`功能是：

```
function onPopupClose(evt) {
    select.unselectAll();
} 
```

当您从地图中选择要素并单击弹出窗口的关闭图标时，将取消选择要素，但弹出窗口尚未关闭。然后，`onFeatureUnselect`事件被触发，弹出窗口实际上是关闭的。

当您按`showMyPopup()`功能创建弹出窗口时，您没有选择它。`onPopupClose()`被调用，但它不会关闭弹出窗口。`onFeatureUnselect`不触发。

我建议在功能中选择`showMyPopup()`功能。`featureselected`事件将被触发并由创建弹出窗口`onFeatureSelect()`，用户可以使用弹出窗口的关闭图标和地图上的取消选择功能关闭弹出窗口。

但是，当您使用代码选择功能并尝试通过点击取消选择它时，OL 中可能存在错误（或意外行为）。它在这里描述：http: [//lists.osgeo.org/pipermail/openlayers-users/2012-September/026349.html](http://lists.osgeo.org/pipermail/openlayers-users/2012-September/026349.html)一种可能的解决方法是手动设置 SelectControl.handlers.feature.lastFeature。

```
function showMyPopup(myID){
    for(var a = 0; a < stations.features.length; a++){    //loop through all the features
        var feature = stations.features[a];
        if (feature.attributes.ID.value == myID) {            //until it finds the one with the matching ID attribute

            // select is your SelectFeature control
            select.select(feature);
            // Fix for unselect bug
            select.handlers.feature.lastFeature = feature;

            break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T21:22:02.043

我看了一下 OpenLayers 的源代码，在 Popup.js 中有类似的东西......

```
 ...
    var closePopup = callback || function(e) {
        this.hide();
        OpenLayers.Event.stop(e);
    };
    OpenLayers.Event.observe(this.closeDiv, "touchend", 
            OpenLayers.Function.bindAsEventListener(closePopup, this));
    OpenLayers.Event.observe(this.closeDiv, "click", 
            OpenLayers.Function.bindAsEventListener(closePopup, this));
    ... 
```

在我看来，如果您添加自己的 closePopup 函数，则需要在代码中调用 hide 函数。

# python - 防止 xticks 重叠 yticks

> ID：13481766
> 
> 赞同：5
> 
> 时间：2012-11-20T20:43:06.540
> 
> 标签：python, matplotlib

如何防止标签与在[matplotlib](http://matplotlib.org/)中使用（或其他绘图命令）时`xticks`的标签重叠？`yticks``hist`

                                                          ![在此处输入图像描述](../Images/563a3b2e95bab26120f415e6a1296e45.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T22:35:00.197

有几种方法。

一种是使用你正在绘制的图形的tight_layout方法，它会自动尝试优化标签的外观。

```
fig, ax = subplots(1)
ax.plot(arange(10),rand(10))
fig.tight_layout() 
```

另一种方法是修改刻度格式的 rcParams 值：

```
 rcParams['xtick.major.pad'] = 6 
```

这将使刻度线离轴更远一点。修改 rcparams 后（任何其他的，你可以在你的 matplotlibrc 配置文件中找到完整的列表），记得用 rcdefaults 函数将它设置回默认值。

第三种方法是篡改轴 locator_params 告诉它不要在角落绘制标签：

```
fig, ax = subplots(1)
ax.plot(arange(10),rand(10))
ax.locator_params(prune='lower',axis='both') 
```

axis 关键字告诉定位器它应该在哪个轴上工作，而 prune 关键字告诉它删除刻度的最低值

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T22:31:23.890

尝试增加标签上刻度之间的填充

```
import matplotlib
matplotlib.rcParams['xtick.major.pad'] = 8 # defaults are 4
matplotlib.rcParams['ytick.major.pad'] = 8 
```

也一样`[x|y]tick.minor.pad`。

另外，尝试设置：`[x|y]tick.direction`to `'out'`。这为您提供了更多空间，并有助于使刻度更加明显——尤其是在带有暗条的直方图上。

# c - 调用 fgets 导致字符串打印到标准输出

> ID：13481767
> 
> 赞同：1
> 
> 时间：2012-11-20T20:43:11.007
> 
> 标签：c, fgets

```
void deleteFile( FAT *allotable ) {
/* PRECONDITION: This function expects a FAT structure that is valid.
 * POSTCONDITION: A file is flagged as removed from the disk and it will 
 * be possible to write over it
 */

    // Local variables
    unsigned char test[9] = { 0 };

    // Select file to remove
    // TODO: The user will select the file to remove based on the 
    // listing in listDir
    // For testing, we are removing file at location 0 in the entry
    fgets( test, NAME_SIZE, stdin );
    return;
} 
```

当我运行该函数并输入一个字符串时，我看到该字符串打印回标准输出中。我确定我的缓冲区有问题，但我似乎无法解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:50:16.693

当你运行它时，如果你看到：

```
./program
input<CR>
input
<prompt> 
```

那么您提供的代码不负责这样做。使用一些调试语句或调试器来确定回声的来源，因为这不是 fgets 所做的。

如果您看到：

```
./program
input<CR>
<prompt> 
```

这就是终端的工作方式。除非您禁用该功能（对于输入密码很有用），否则它们会在您键入时回显文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T20:48:46.323

当您在控制台中键入字符时，它们会回显给您。当您从 读取时，字符仍将被读取`stdin`。

或者，您可以将程序的输出通过管道传输到您自己的，或将文件重定向到标准输入。在这两种情况下，字符不会被回显：

```
echo Program output | ./myprog 
```

或者：

```
./myprog < fileinput.txt 
```

*编辑*- 听起来这是一个终端问题。

您还没有说明您正在使用什么系统或如何与它交互，但我可以通过使用 PuTTY 的 SSH 连接到系统来获得这种行为。

我将终端设置更改为强制“本地回声”和“本地行编辑”。然后，每当我按下回车键时，我都会回显该行。显然，只有其中一个应该打开。最好是“本地回声”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T21:04:29.520

造成这种情况的一个常见原因是在您的终端（现在可能是模拟器）和 OS 终端驱动程序中都启用了回显。假设您使用的是 Unix，如果您这样做，问题是否会消失：

```
stty -echo 
```

在运行你的程序之前？

# node.js - Node.js 中的默认 SIGINT？

> ID：13481768
> 
> 赞同：0
> 
> 时间：2012-11-20T20:43:16.657
> 
> 标签：node.js, sigint

我尝试搜索 Node.js 源代码，但找不到。默认情况下，我在哪里可以找到在以下示例中默认处理 SIGINT ( `Ctrl`+ ) 的 Node.js 代码：`C`

```
var http = require('http');

var server = http.createServer(function(req, res) {
  res.writeHead(200);
  res.end('Hello Http');
});

server.listen(5001); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T20:49:01.230

Node 的默认 SIGINT 处理程序在 node.cc 中，但它并没有做太多。它调用signalExit，它确实

```
uv_tty_reset_mode();
_exit(1); 
```

您可以在 node.js 中添加自己的处理程序

```
process.on('SIGINT', function () {
    // handle
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T20:45:32.373

你必须自己添加它。[http://nodejs.org/api/process.html#process_signal_events](http://nodejs.org/api/process.html#process_signal_events)

```
process.on('SIGINT', function () {
    //do stuff here.
}); 
```

# php - PHP 会话不工作——用简化的例子再试一次

> ID：13481772
> 
> 赞同：1
> 
> 时间：2012-11-20T20:43:30.277
> 
> 标签：php, session

由于我们的网络服务器重新启动，PHP 会话不再工作。有几个人给了我有用的想法，但都没有奏效。我做了一个非常简化的例子，我很确定应该可以工作，但它不起作用。如果有人能解释为什么我将非常感激。到目前为止，我已经花了一整天的时间。

我的理解是 $_SESSION 应该是“超级全球”，这意味着它可以在任何地方使用。

为了清楚起见，我做了两个精简的重写页面，其中代码仍然不起作用，即打印“Hello World”。

如果有人能告诉我这有什么问题，我将不胜感激！

----------- 网页 ONE.PHP -----------------

```
<?PHP session_start(); ?>
<html>
<head>
<title>Page One</title>
</head><body>
<?PHP
     $_SESSION['testvalue'] = "Hello World";
?>
<p><a href="pagetwo.php">Click here</a> to see page two</p>
</body></html> 
```

------------ 网页二.PHP -----

```
<?PHP session_start(); ?>
<html>
<head>
<title>Page Two</title>
</head><body>
<?PHP echo $_SESSION['testvalue']; ?>
<br>
</body></html> 
```

我运行网页一并单击链接转到第二页，而不是显示“Hello World”的页面

注意：未定义索引：c:\inetpub\wwwroot\two.php 中的 testvalue

我检查了 C:\PROGRAMDATA\PHP\SESSIONS 并且那里有一个名为

**sess_905m06314ibdubru8ko0aqj4d1**

其中包含以下内容

**testvalue|s:11:"你好世界";**

这个文件是我跑**one.php**的时候创建的，说明app有权限写session信息

抱歉，如果我看起来很密集，但我只是不明白为什么这不起作用，并且花了一天的大部分时间试图弄清楚。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:53:18.933

听起来会话没有被传播到第 2 页。您是否禁用了 cookie？ [http://ie1.php.net/manual/en/session.idpassing.php](http://ie1.php.net/manual/en/session.idpassing.php)展示了如何在 URL 中传递 SID。试试看，然后看看你是否可以访问会话。检查浏览器中的 cookie 并在必要时执行 phpinfo() 以查看会话 ID。如果它在第 2 页上有所不同，那是你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T20:51:09.507

尝试将会话存储到另一个目录中（您可以通过编辑 php.ini 来做到这一点）：

```
session.save_path = "C:\php_session_test" 
```

原因是因为 ProgramData 是 Windows 7 上的“特殊文件夹”，存在一些文件系统重定向（例如`C:\Windows\System32`，`C:\Windows\Sysnative`...）。

请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/aa384187%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384187%28v=vs.85%29.aspx)

# ruby-on-rails - Rails 最佳实践 - 返回 AR 查询 + 任意数据以通过控制器查看？

> ID：13481773
> 
> 赞同：1
> 
> 时间：2012-11-20T20:43:31.510
> 
> 标签：ruby-on-rails

我想知道将查询 + 任意数据从 Rails 控制器传递到视图的最佳做法是什么？

```
# simple query
product = Product.find(id)
# some data to append to our instance var and send to view
extra_data = "some arbitrary string data"

@view = Hash.new
@view["product"]=product.attributes
@view["product"]["extra_data"]=extra_data 
```

有没有更好/更清洁/更短的方法？也许合并哈希？

谢谢！

# php - 如何存储 64 位数字（位板）

> ID：13481774
> 
> 赞同：1
> 
> 时间：2012-11-20T20:43:35.260
> 
> 标签：php, mysql, chess

我想玩一下用于展示国际象棋游戏的位板。为了展示一个国际象棋游戏，我需要至少 12 个，但最好是 14 个位板，其值如下：

00000000 00000000 00000000 00000000 00000000 00000000 11111111 11111111

这里需要什么样的数据类型？我以为我可以将它保存为一个大整数，但后来我转换为一个数值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T20:45:24.097

您可以使用[BIT](http://dev.mysql.com/doc/refman/5.6/en/bit-type.html)类型来存储位字段。

该类型`BIT(14)`将存储一个 14 位的字段。您使用符号 写入这些字段`b'01001'`。

# c# - PropertyGrid 不适用于选择颜色

> ID：13481777
> 
> 赞同：0
> 
> 时间：2012-11-20T20:43:37.013
> 
> 标签：c#, winforms, propertygrid, color-picker

我有一个类，我正在使用具有以下属性的属性网格查看：

```
private Color _borderColor = Color.Black;
[Browsable(true)]
[Category("Appearance")]
[DisplayName("Border Color")]
[Description("The color of the border.")]
[DefaultValue(typeof(Color), "Black")]
public virtual Color BorderColor
{
    get
    {
        return _borderColor;
    }
    set
    {
        if (_borderColor != value)
        {
            _borderColor = value;

            Invalidate();
        }
    }
} 
```

我在使用属性网格更改此属性时遇到各种间歇性问题。

最初，我能够打开下拉弹出窗口。但是当我选择一种颜色时，它不会改变属性。调试时，它甚至不调用“set”访问器。此时，即使我输入颜色的名称并回车，它也不会改变。

如果我取消选择对象（将属性网格的 selecteditem 设置为 null），然后重新选择对象，我就可以通过输入其名称来更改颜色。但是弹出窗口仍然不起作用。

有时它会出错，当您单击下拉箭头时甚至不会打开弹出窗口。

**编辑：**

这是弹出窗口的具体问题。如果我不使用弹出窗口，我不会遇到任何故障。打开弹出窗口基本上会暂停正在提交的更改（发送 PropertyChanged 事件），直到整个控件失去焦点。因此，一旦我单击另一个窗口或另一个可聚焦控件，属性网格就会更新更改。

问题是：为什么双击或按回车会导致更改提交，但单击弹出窗口中的项目却不会？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:34:19.957

我弄清楚是什么导致了这个问题。我已经在属性网格的父对象之一上设置了窗口样式 WS_EX_COMPOSITED。禁用此样式会导致 PropertyGrid 再次正常运行。

不幸的是，我需要这种样式来减少我的应用程序中的闪烁。所以我很可能不得不使用 PropertyGrid 以外的东西来更改我的对象的属性。

# c# - 将字符串数组从视图传递到控制器

> ID：13481780
> 
> 赞同：0
> 
> 时间：2012-11-20T20:43:50.197
> 
> 标签：c#, asp.net, asp.net-mvc

> **可能重复：**
> [通过 JSON 将数组发送到 MVC 控制器？](https://stackoverflow.com/questions/7116099/send-array-to-mvc-controller-via-json)

到目前为止，我还没有真正找到一个好的解决方案。

我的 javascript/jQuery 和我尝试使用 ajax 发送数据。

```
 var val = new Array();
    $( ':checkbox:checked' ).each( function ( i )
    {
        console.log( $( this ).val() );
        val[i] = $(this).val();
    });
    removeSelected(val);

function removeSelected(listOfStuff)
{
    $.ajax({
        url: '@(Url.Action("removeSelected"))',
        type: 'POST',
        data: { listOfStuff: listOfStuff },
        dataType: 'json',
        success: function ( return_data )
        {
            $( ":checkbox:checked" ).closest('tr').remove();
        }
    }); 
```

还有我的控制器。数组以 null 形式出现。

```
 [HttpPost]
    public bool removeSelected ( string[] listOfStuff )
    {
       //do stuff
    } 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:49:30.270

您可以尝试[此答案](https://stackoverflow.com/a/7116267/74757)`traditional: true`中引用的建议，根据[API 参考](http://api.jquery.com/jQuery.param/)，该建议是：

> 一个布尔值，指示是否执行传统的“浅”序列化。

这种变化看起来像：

```
$.ajax({
    url: '@(Url.Action("removeSelected"))',
    type: 'POST',
    traditional: true,
    data: { listOfStuff: listOfStuff },
    dataType: 'json',
    success: function ( return_data )
    {
        $( ":checkbox:checked" ).closest('tr').remove();
    }
}); 
```

另外，我可以对你的代码提出一个小建议吗？我会改变这个：

```
var val = new Array();
$( ':checkbox:checked' ).each( function ( i )
{
    console.log( $( this ).val() );
    val[i] = $(this).val();
}); 
```

至：

```
var val = []; // use this array notation
$(':checkbox:checked').each(function ()
{
    console.log($(this).val());
    val.push($(this).val()); // use push() instead of an index
}); 
```

# mysql - 查找表中值的唯一出现

> ID：13481787
> 
> 赞同：0
> 
> 时间：2012-11-20T20:44:16.350
> 
> 标签：mysql, sql

可以说我有以下表格。

```
TABLE L
id      name
51      joe  
52      sara
53      john
54      david

TABLE M
id      l_id
1       51 
2       51
3       52 
4       53 
```

在表 M 中，表 L 中的信息有多个值的行。我要做的是选择在表 m 中只出现一次的所有内容的计数。

因此，在上述情况下，计数将为 2，因为它们是在表 m 中仅出现一次的 l.id：

```
COUNT(*)
2 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T20:50:32.400

```
select Count(*)
from
  (select l_id From M group by l_id having count(*)=1) m 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T20:51:24.043

如果您在子查询上使用 count(*)，它只返回计数为 =1 的行。我的 mysql 有点生锈，但我希望下面的代码能给你一个想法。

select count(*) from ( select l_id, count(*) count from m group by l_id with count(*) = 1 )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T20:57:10.100

```
SELECT count(*)
FROM table
HAVING count(id) = 1; 
```

# blackberry-cascades - 更改/替换级联应用程序的根对象

> ID：13481788
> 
> 赞同：0
> 
> 时间：2012-11-20T20:44:15.613
> 
> 标签：blackberry-cascades

在我的应用程序中，我需要实现“首次运行流程”，因此在这种情况下，我的 QML 场景将有所不同。作为此流程的最后一件事，我需要运行正常流程，因此我必须更改根对象内容。我不知道如何实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:26:06.170

好吧，我改变了我的班级并添加了两个功能

```
 Q_INVOKABLE void firstRun();
    Q_INVOKABLE void normalRun(); 
```

实施：首次运行：

```
qml->setContextProperty("dateModel" , ModelsFactory::getInstance().weightModel);
qml->setContextProperty("personModel" , ModelsFactory::getInstance().personModel);
qml->setContextProperty("Application", this);

AbstractPane *root = qml->createRootObject<AbstractPane>();

app->setScene(root); 
```

正常运行：

```
QmlDocument *qml;
        qml = QmlDocument::create("asset:///main.qml").parent(this);
        qml->setContextProperty("Application", this);
        AbstractPane *root = qml->createRootObject<AbstractPane>();
        Application::instance()->setScene(root); 
```

如您所见，我公开**了**对 qml 的引用，并且在 qml 中，当流程完成时，我可以调用 Application.normalRun() 我可以这样做，因为我在函数声明中使用了 Q_INVOKEBALE MAKRO；希望它会有所帮助

# objective-c - 在 CGRect 框架内绘制三角形切断第三点

> ID：13481791
> 
> 赞同：0
> 
> 时间：2012-11-20T20:44:22.603
> 
> 标签：objective-c, ios, drawing, cgrect

我正在尝试在矩形框架内绘制一个三角形。我正在使用两个手势点 startPoint 和 endPoint 并计算 thirdPoint（使三角形等边）。绘制三角形效果很好，问题是保持矩形大小的框架基于手势区域，因此有时第三点被切断并且不显示如下：

![在此处输入图像描述](../Images/89ed09e65db92bac67d80e3bd71c324a.png)

有什么办法可以添加第三点，以便框架考虑到它并且不会被切断。

# android - AQuery shouldDelay 和滚动监听

> ID：13481796
> 
> 赞同：1
> 
> 时间：2012-11-20T20:44:38.557
> 
> 标签：android, listview, android-query

我有一个 ListView，正如问题所暗示的那样，我正在延迟加载图像。问题是这个方法覆盖了我的自定义 onScrollListener。我尝试使用：

```
aq.id(listview).scrolled(new customScrollListener());
aq.id(listview).adapter(myAdapter); 
```

这两行在调用活动类中，我在加载列表中的所有数据后执行此操作。即使在此之后， scrollListener 似乎也没有工作。我哪里错了？有任何想法吗？

更新 - CustomScrollListener：

```
private class CustomScrollListener implements OnScrollListener {

    private Context context;
    private int visibleThreshold = 0;
    private int currentPage = 0;
    private int previousTotal = 0;
private boolean loading = true;

CustomScrollListener(Context context) {
    this.context = context;
}
CustomScrollListener(int visibleThreshold) {
    this.visibleThreshold = visibleThreshold;
}

@Override
public void onScroll(AbsListView view, int firstVisibleItem,
        int visibleItemCount, int totalItemCount) {     

    if (loading) {
        if (totalItemCount > previousTotal) {
            loading = false;
            previousTotal = totalItemCount;
            currentPage++;
        }
    }
    if (!loading && (totalItemCount - visibleItemCount) <= (firstVisibleItem + visibleThreshold) && totalItemCount>10) {
     // do something          
    }
}

@Override
public void onScrollStateChanged(AbsListView view, int scrollState) {
}       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T22:53:12.690

您的问题是 AndroidQuery souldDelay 将覆盖您自己的侦听器。查看文档：

> shouldDelay() 方法使用 setOnScrollListener() 方法并将覆盖任何以前非查询分配的滚动侦听器。如果需要滚动监听器，请使用滚动的查询方法（OnScrollListener listener）来注册您的监听器。

[来源：[查询图像加载](https://code.google.com/p/android-query/wiki/ImageLoading)]

# c# - 使用自动生成的列向 gridview 添加验证

> ID：13481802
> 
> 赞同：0
> 
> 时间：2012-11-20T20:45:03.420
> 
> 标签：c#, asp.net, gridview

如果您使用自动生成的列，如何向 Gridview 添加输入验证？我有一个包含汽车物品的清单。网格视图绑定到列表。gridview 具有添加和编辑功能。而且我必须验证注册牌等字段。如何使用验证控制来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:21:03.657

假设您正在谈论`CompareValidator`在 GridView 处于编辑模式时向其添加验证控件（例如 a），您可以使用 GridView 的 RowDataBound 事件以编程方式添加验证器控件：

**ASP.NET**

```
<asp:GridView ID="gv" runat="server" OnRowDataBound="gv_RowDataBound"... 
```

**C＃**

```
protected void gv_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        if (gv.EditIndex == e.Row.RowIndex)
        {
            TextBox tb = e.Row.Cells[0].Controls[0] as TextBox; // get reference to your Control to validate (you specify cell and control indeces)
            tb.ID = "reg_" + e.Row.RowIndex; // give your Control to validate an ID

            CompareValidator cv = new CompareValidator(); // Create validator and configure
            cv.Operator = ValidationCompareOperator.GreaterThan;
            cv.Type = ValidationDataType.Double;
            cv.Display = ValidatorDisplay.Dynamic;
            cv.ErrorMessage = "<br/>Not a valid number";
            cv.ForeColor = Color.Red;
            cv.ControlToValidate = tb.ID;
            e.Row.Cells[0].Controls.Add(cv); // Add validator to GridView cell
        }
    }
} 
```

在您正在编辑的行上，您可以引用要将验证器链接到的控件，例如您的汽车注册`TextBox`。然后你需要给它一个 ID，创建一个验证器并将其`ControlToValidate`属性指定为`TextBox`ID，然后将验证器添加到包含你的`TextBox`.

此示例显示强制 a`TextBox`只允许双打。

# hashtable - 为什么计算机不必进行比较搜索来查找哈希表值？

> ID：13481806
> 
> 赞同：1
> 
> 时间：2012-11-20T20:45:11.353
> 
> 标签：hashtable

我正在复习哈希表的工作原理，因此我了解哈希函数如何计算唯一的（出于此问题的目的）哈希表值以与存储值一起使用，因此当搜索存储值时哈希函数给计算机哈希表值。

好的，现在我们有了哈希表的值，但是这样更好吗？在找到匹配的哈希表值之前，我们是否仍然需要遍历？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T20:46:58.373

哈希函数将用于直接映射到数组中的索引。所以没有搜索或迭代完成

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T20:49:49.430

哈希表存储在一个数组中。哈希值映射到数组索引。根据实现，哈希值要么是数组索引，要么是一个更大范围的数字，取模数组的大小。

然后，一旦它查看数组中的那个点，它必须检查那里的值是否匹配，因为多个值可能具有相同的哈希值。通常，它实际上导航所有已散列到散列表中同一位置的值的链接列表。这是一个比完整列表短得多的列表（特别是如果哈希表的大小与其中的数据量成正比）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T20:53:22.403

有很多不同的哈希表，每个都有不同的实现细节，但最简单的哈希表使用哈希码作为数组的索引：

```
#define TABLESIZE 1000

char **gHashTable[TABLESIZE];

void clearHashTable() {
  memset(gHashTable, 0, sizeof(gHashTable));
}

int calculateHashCode(char *string) {
  int val = 0;
  for (int i = 0; string[i] != '\0'; ++i)
    val += string[i];
  return val;
}

void insertInHash(char *string) {
  int hashCode = calculateHashCode(string);
  gHashTable[hashCode % TABLESIZE] = string;
}

int isInHashTable(char *string) {
  int hashCode = calculateHashCode(string);
  return gHashTable[hashCode % TABLESIZE] != 0;
} 
```

现在这个简单的哈希支持对字符串的快速查找。它不能很好地处理冲突，散列函数很糟糕，还有许多其他问题，但它会起作用。

# ajax - 使用 createDocumentFragment() 添加表格行

> ID：13481807
> 
> 赞同：0
> 
> 时间：2012-11-20T20:45:20.917
> 
> 标签：ajax, dom

**更新**——这是对周一 11 月 26 日问题的完整重写

* * *

此代码有效：

```
name_this_table = "station_list"+i;
station_table = document.getElementById(name_this_table);

for (station_index in station_detail)
{
    newRow = station_table.getElementsByTagName("tbody")[0].insertRow(-1);

    newCell = newRow.insertCell(-1);
    newCell.appendChild(document.createTextNode("one"));

    newCell = newRow.insertCell(-1);
    newCell.appendChild(document.createTextNode("two"));
    newRow = null;
} 
```

但我想使用`createDocumentFragment()`，像这样：

```
name_this_table = "station_list"+i;
station_table = document.getElementById(name_this_table);  // NOTE 1
//station_table = document.getElementById(name_this_table).tBodies[0];

var tableFrag;
tableFrag = document.createDocumentFragment();
tableFrag.appendChild(station_table);  // NOTE 2

for (station_index in station_detail)
{
    newRow = station_table.getElementsByTagName("tbody")[0].insertRow(-1); // NOTE 3
  //newRow = tableFrag.getElementsByTagName("tbody")[0].insertRow(-1);
    newCell = newRow.insertCell(-1);
    newCell.appendChild(document.createTextNode("one"));

    newCell = newRow.insertCell(-1);
    newCell.appendChild(document.createTextNode("two"));
    newRow = null;
}        
document.getElementById(name_this_table).appendChild(tableFrag); 
```

我有各种失败要报告——不是运行时错误，而是渲染停止。

*   注 1（上）——我尝试了下面的行（使用`tbodies`）作为替代。
*   注意 2 -- 如果我取消注释此行，则渲染将在该点停止。
*   注意 3 -- 在这里我尝试使用 tableFrag ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:59:43.323

## 新答案于 11 月 27 日星期二发布

经过大量的实验，这行得通。我喜欢任何反馈（一方面，我不确定我是否看到了性能提升。

```
name_this_table = "station_list"+i;
station_table = document.getElementById(name_this_table);  

var tableFrag;
tableFrag = document.createDocumentFragment();
tableFrag.appendChild(station_table);  // NOTE 2

for (station_index in station_detail)
{
    station_id = station_detail[station_index]["station_id"];
    var newRow;
    newRow = document.createDocumentFragment();
    newRow = station_table.getElementsByTagName("tbody")[0].insertRow(-1);

    newCell = newRow.insertCell(-1);
    newCell.appendChild(document.createTextNode("one"));

    ...

    station_table.appendChild(newRow);
    newRow = null;
} 
```

# c# - FormsAuthentication 是我没有通过用户，但我是

> ID：13481808
> 
> 赞同：0
> 
> 时间：2012-11-20T20:45:23.997
> 
> 标签：c#, membership, formsauthentication

我有这个登录方法：

```
 // POST: /Account/LogOn
    [HttpPost]
    public ActionResult LogOn(LogOnModel model, string returnUrl, string corpid)
    {
      var sb = new StringBuilder();
      sb.AppendLine("Logon HttpPost start");
      sb.AppendLine(string.Format("returnUrl: {0}", returnUrl));
      sb.AppendLine(string.Format("corpid: {0}", corpid));
      sb.AppendLine(string.Format("model.UserName: {0}", model.UserName));
      sb.AppendLine(string.Format("model.Password: {0}", model.Password));

      try
      {
        sb.AppendLine(string.Format("ModelState.IsValid: {0}", ModelState.IsValid));
        if (ModelState.IsValid)
        {
          if (Membership.ValidateUser(model.UserName, model.Password))
          {
            sb.AppendLine("Validated User");
            FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
            if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1
                && returnUrl.StartsWith("/")
                && !returnUrl.StartsWith("//")
                && !returnUrl.StartsWith("/\\"))
            {
              sb.AppendLine("Redirect(returnUrl)");
              return Redirect(returnUrl);
            }

            // need to decide whether to display the CustomerSummary, AccountScreen, or AddCustomer view
            // AccountScreen if they only have 1 account tied to this logon
            // AddCustomer if they do not havfe any tied to this logon
            // CustomerSummary if they have more than 1 tied to this logon

            var customers = _client.RequestCustomersForAccount(model.UserName);
            if (!customers.Any())
            {
              // no accounts tied to this logon
              sb.AppendLine("No accounts found for this login.");
              sb.AppendLine("RedirectToAction(AddCustomer, Customer)");
              return RedirectToAction("AddCustomer", "Customer");
            }

            if (customers.Count() == 1)
            {
              sb.AppendLine("1 accounts found for this login.");
              sb.AppendLine("RedirectToAction(AccountScreen, Customer)");
              model.AccountId = customers[0].AccountId;
              sb.AppendLine(string.Format("customers[0].AccountId: {0}", customers[0].AccountId));
              // only 1 account tied to this logon
              return RedirectToAction("AccountScreen", "Customer", model);
            }

            if (customers.Count() > 1)
            {
              sb.AppendLine(string.Format("{0} accounts found for this login.", customers.Count()));
              sb.AppendLine("RedirectToAction(CustomerSummary, Customer)");
              // no accounts tied to this logon
              return RedirectToAction("CustomerSummary", "Customer");
            }

          }
          else
          {
            var msg = "The user name or password provided is incorrect.";
            sb.AppendLine(msg);
            ModelState.AddModelError("", msg);
          }
        }

        // If we got this far, something failed, redisplay form
        return View(model);

      }
      catch (Exception ex)
      {
        sb.AppendLine(string.Format("An error occured: {0}", ex));
        WebPortalLogging.Logging.LogException("The following error occured: ", ex, _asName);
        return null;
      }
      finally
      {
        WebPortalLogging.Logging.LogInfo(sb.ToString(), _asName);
      }
    } 
```

当我到达线路`FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);`时，我收到此错误：

> System.InvalidOperationException：未提供用户名。在 ClientCredentials 中指定用户名。
> 
> 服务器堆栈跟踪：在 System.ServiceModel.ClientCredentialsSecurityTokenManager.CreateSecurityTokenProvider(SecurityTokenRequirement tokenRequirement, Boolean disableInfoCard) 在 System.ServiceModel.Channels.HttpChannelFactory.CreateAndOpenTokenProvider(TimeSpan timeout, AuthenticationSchemes authenticationScheme, EndpointAddress target, Uri via, ChannelParameterCollection channelParameters) 在 System.ServiceModel。 System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.CreateAndOpenTokenProviders(TimeSpan timeout) 在 System.ServiceModel.Channels.HttpChannelFactory.CreateAndOpenTokenProvidersCore(EndpointAddress to, Uri via, ChannelParameterCollection channelParameters, TimeSpan timeout, SecurityTokenProviderContainer& tokenProvider, SecurityTokenProviderContainer& proxyTokenProvider) 在 System.ServiceModel。Channels.HttpsChannelFactory.HttpsRequestChannel.OnOpen(TimeSpan timeout) at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout) at System.ServiceModel.Channels.ServiceChannel.OnOpen(TimeSpan timeout)
> 在 System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout) 在 System.ServiceModel.Channels.ServiceChannel.CallOnceManager.CallOnce(TimeSpan timeout, CallOnceManager cascade) 在 System.ServiceModel.Channels.ServiceChannel.EnsureOpened(TimeSpan timeout) 在 System. ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout) 在 System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation) 在 System. ServiceModel.Channels.ServiceChannelProxy.Invoke（IMessage 消息）
> 
> 在 [0] 处重新引发异常：在 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) 在 SuburbanCustPortal.SuburbanService 的 System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)。 ISuburbanService.RequestCustomersForAccount(String customerloginname) at SuburbanCustPortal.Controllers.AccountController.LogOn(LogOnModel model, String returnUrl, String corpid) in C:\work2\Doozer Software\Suburban\SuburbanCustPortal\Controllers\AccountController.cs:line 112

这段代码一次就可以找到，我回过头来将它与它工作时的代码进行比较，除了日志记录发生了变化，我没有看到任何其他内容。

这是我添加的日志记录：

```
Logon HttpPost start
returnUrl: 
corpid: 
model.UserName: user
model.Password: password
ModelState.IsValid: True
Validated User
An error occured: System.InvalidOperationException: The username is not provided. Specify username in ClientCredentials.

Server stack trace: 
   at System.ServiceModel.ClientCredentialsSecurityTokenManager.CreateSecurityTokenProvider(SecurityTokenRequirement tokenRequirement, Boolean disableInfoCard)
   at System.ServiceModel.Channels.HttpChannelFactory.CreateAndOpenTokenProvider(TimeSpan timeout, AuthenticationSchemes authenticationScheme, EndpointAddress target, Uri via, ChannelParameterCollection channelParameters)
   at System.ServiceModel.Channels.HttpChannelFactory.CreateAndOpenTokenProvidersCore(EndpointAddress to, Uri via, ChannelParameterCollection channelParameters, TimeSpan timeout, SecurityTokenProviderContainer& tokenProvider, SecurityTokenProviderContainer& proxyTokenProvider)
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.CreateAndOpenTokenProviders(TimeSpan timeout)
   at System.ServiceModel.Channels.HttpsChannelFactory.HttpsRequestChannel.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.CallOnceManager.CallOnce(TimeSpan timeout, CallOnceManager cascade)
   at System.ServiceModel.Channels.ServiceChannel.EnsureOpened(TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at SuburbanCustPortal.SuburbanService.ISuburbanService.RequestCustomersForAccount(String customerloginname)
   at SuburbanCustPortal.Controllers.AccountController.LogOn(LogOnModel model, String returnUrl, String corpid) in C:\work2\Doozer Software\Suburban\SuburbanCustPortal\Controllers\AccountController.cs:line 112 
```

正如您从日志中看到的那样，自从我通过了此检查后，我已使用用户登录：

```
 if (Membership.ValidateUser(model.UserName, model.Password)) 
```

此外，我可以在本地计算机上运行此代码，并且不会出错。这一切都针对同一个数据库，本地和发布。

有人看到我的问题是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T21:21:37.070

> 当我到达 FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe); 我收到此错误：

您的堆栈跟踪显示异常是由以下行引发的：

```
var customers = _client.RequestCustomersForAccount(model.UserName); 
```

推测此调用失败是因为您`Thread.CurrentPrincipal`尚未设置为经过身份验证的用户（您设置了 FormsAuthentication cookie，但在下一个请求之前不会处理它）。

我不确定你为什么在验证用户身份后尝试做额外的工作，我建议你立即重定向，例如：

```
if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1
            && returnUrl.StartsWith("/")
            && !returnUrl.StartsWith("//")
            && !returnUrl.StartsWith("/\\"))
{
   sb.AppendLine("Redirect(returnUrl)");
   return Redirect(returnUrl);
}

Redirect(Request.UrlReferrer.ToString()); // Or wherever you want to redirect to 
```

# java - GAE Java URL 获取；使用低级 API 获取状态消息

> ID：13481809
> 
> 赞同：1
> 
> 时间：2012-11-20T20:45:22.843
> 
> 标签：java, google-app-engine, http, httpurlconnection, urlfetch

我正在编写一个 Java GAE 应用程序并依靠 URL Fetch 将 HTTP 请求发送到其他服务器（请参见[此处](https://developers.google.com/appengine/docs/java/urlfetch/)。到目前为止，我一直在使用他们的`HttpUrlConnection`接口实现来使用 URL Fetch 服务。但是，我正在重写我的app 使用**低级 API**而不是`HttpUrlConnection`因为我想发送*异步*HTTP 请求。

**我的问题：与**[HttpUrlConnection.getResponseMessage():String](http://docs.oracle.com/javase/6/docs/api/java/net/HttpURLConnection.html#getResponseMessage%28%29)等效的 URL Fetch 低级 API 是什么？根据我从[HTTPResponse 的低级 API javadoc 中](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/urlfetch/HTTPResponse)看到的内容，我不确定应该使用哪种方法。我可以得到响应代码，但我想在代码中阅读有用的消息，尤其是在发生错误时。

谢谢。

# jaxb - 泽西通过 JAXB 解组 JSON 时的空处理？

> ID：13481813
> 
> 赞同：3
> 
> 时间：2012-11-20T20:45:30.597
> 
> 标签：jaxb, jersey, jackson

在通过 JAXB 解组时，Jersey 似乎有一组预先确定的 JSON 空值默认值：String => "", Integer => 0, ... 无论如何可以通过配置或注释轻松控制这些值？

使用 Jersey 的 POJO 映射我得到了我想要的，即将 JSON null 映射到 Java null，但由于其他原因，我们确实需要使用 JAXB。

看起来这应该很简单，但是我正在画一个空白。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T21:14:59.927

**注意：** 我是[**EclipseLink JAXB (MOXy)**](https://www.eclipse.org/eclipselink/#moxy)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

JAXB (JSR-222) 规范不包括 JSON 绑定，因此您遇到的是 Jersey 代码与 JAXB 参考实现交互，产生一些奇怪的结果 wrt null 处理。EclipseLink MOXy 是一个符合 JAXB 的实现，它还[提供具有更自然的 null 处理的 JSON 绑定](http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html)。

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Customer {

    private String firstName;

    @XmlElement(nillable=true) 
    private String lastName;

} 
```

如果这被编组为 JSON，结果将如下所示。Null 值不会编组为 JSON，除非它们带有注释`@XmlElement(nillable=true)`：

```
{
    lastName: null
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html](http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html)

**泽西岛一体化**

*   [http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html](http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html)
*   [https://github.com/jersey/jersey/tree/master/examples/json-moxy](https://github.com/jersey/jersey/tree/master/examples/json-moxy)

# javascript - Internet explorer：userData行为的官方状态？

> ID：13481817
> 
> 赞同：4
> 
> 时间：2012-11-20T20:45:33.810
> 
> 标签：javascript, css, internet-explorer

我在 IE9 中的[userData](http://msdn.microsoft.com/en-us/library/ms531424%28v=vs.85%29.aspx)行为遇到了问题，当遇到不支持 Web Storage 规范的 IE 版本时，我会使用该行为。

具体来说，执行 .save() 函数时似乎没有保存值（实际上，在 .save() 中甚至没有 userData 文件夹`C:\Users\USERNAME\AppData\Roaming\Microsoft\Internet Explorer\UserData` ，也不是在执行 .save() 时创建的）。

我做了一些研究，从各个网站上的一些评论中得出的共识是，它似乎在 IE9 中被禁用。

是否有某种官方声明表达了这一点？如果是这样，有没有办法测试给定的 IE 版本是否支持它（没有浏览器嗅探）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T02:27:20.017

经过一些研究，我似乎（大部分）找到了我的问题的答案。

> 是否有某种官方声明表达了这一点（“this”表示 IE9 不再支持 userData）？

由于我找不到任何官方声明确认在 IE9 中停止支持此特定行为，因此网络上的评论和投诉就足够**了：IE9 不支持 userData 行为。此外，[IE10 不支持任何行为和 HTC](http://msdn.microsoft.com/en-us/library/ie/hh801216%28v=vs.85%29.aspx)**。

> 有没有办法测试给定的 IE 版本是否支持它（userData 行为）（没有浏览器嗅探）？

对于不支持 userData 的 IE10 和 IE 的早期版本，可以检查`addBehavior()`行为已附加到的元素上是否存在成员函数：

```
//Assuming "element" has had the userData behavior associated with it through CSS
if(element.addBehavior) 
```

处理 IE9 有点棘手，因为存在与 userData 行为相关的方法，并且在正确使用时不会引发异常。

幸运的是，我们可以利用数据存储机制与`XMLDocument`每个具有 userData 行为的元素接收的成员之间的关系。`save()`由于此特定成员表示在调用时要存储到磁盘的文件，`element.XMLDocument.xml`因此应该在每次调用时更新`element.addAttribute(key, value)`. 如果不是，那么我们可以假设不支持 userData：

```
//Assuming "element" has had the userData behavior associated with it through CSS
if(element.addBehavior)
{
    element.addAttribute("test", "");

    //If the to-be-saved XML was updated with the attribute we just added
    if(element.XMLDocument.xml.indexOf("test") !== -1) 
    {
        //userData behavior is supported
    }
    else
    {
        //userData behavior is not supported
    } 
} 
```

仍然会感谢 MS 的官方声明确认这种支持的下降，以及在不添加虚拟属性的情况下确定完整的 userData 行为支持的方法。如果您遇到其中任何一个，请随时发布它们。

# uiimageview - 删除 UIImageView 中的白色背景

> ID：13481822
> 
> 赞同：0
> 
> 时间：2012-11-20T20:46:03.627
> 
> 标签：uiimageview

在我的应用程序中有一个添加图像的选项。当我添加图像时，即使我不添加任何图像，也总是有白色背景。我怎样才能摆脱它？（我所有的图片都是透明的（png））谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:34:11.297

将视图的背景颜色设置为清除要添加图像的颜色。例如：

`imgView.backgroundColor=[UIColor clearColor];`

# ruby-on-rails - Rails：gmaps4rails - 在数据库中启动地图位置

> ID：13481827
> 
> 赞同：0
> 
> 时间：2012-11-20T20:46:32.393
> 
> 标签：ruby-on-rails, ruby, maps

我认为我不需要从我的应用程序中发布特定代码。简单来说，我有一个带有名称、地址、经度、纬度、gmaps 的数据库表。每条记录存储一个位置。好的。当我加载页面时，谷歌地图刚从大西洋中间开始，我想知道有没有办法让它从我桌子上已经有的一个位置开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T18:31:59.267

嘿，当您将记录传递给视图时，您可以使用它来使地图居中。

```
<%= gmaps({
      "map_options" => { "auto_adjust" => false, "center_longitude" => @record.long, "center_latitude" => @record.lat, "auto_zoom" => false, "zoom" => 5 },
      "markers"     => {"data" => @json }
    })
%> 
```

当您尝试此操作时，请确保您已设置`auto_adjust`为`false`.

# c# - 跟随相机 XNA 4.0 C#

> ID：13481829
> 
> 赞同：0
> 
> 时间：2012-11-20T20:46:38.520
> 
> 标签：c#, xna-4.0

如何将目标相机更改为跟随？

目标：

```
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Graphics;

namespace Flight
{
    public class FollowCamera : CCamera
    {

        public Vector3 Target { get; set; }

        public FollowCamera(Vector3 Position, Vector3 Target,
                    GraphicsDevice graphicsDevice)
            : base(graphicsDevice)
        {
            this.Position = Position;
            this.Target = Target;
        }

        public override void Update()
        {
            //Missing lines of code used to determine 
            //the up vector
            Vector3 forward = Target - Position;
            Vector3 right = Vector3.Cross(forward, Vector3.Up);
            Vector3 up = Vector3.Cross(right, forward);

            this.View = Matrix.CreateLookAt(Position,
                    Target, up);
        }
    }

} 
```

我确实有线索可以使用这行代码进行一些修改，并添加相机应该在目标后面多远的长度。这行代码让我的船绕着屏幕飞过去，现在我需要确保相机随船一起移动。请帮忙

```
 this.local = Matrix.CreateFromYawPitchRoll(orientation.Y, orientation.X, orientation.Z) * Matrix.CreateTranslation(position.X, position.Y, position.Z) * this.local; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:12:15.667

您必须将相机连接到您的船上，计算相机位置并使用其位置进行目标

```
interface IPositionable { Vector3 Position }

class FollowCamera{

    public IPositionable ObjectToFollow;

    public FollowCamera(Vector3 RelativePosition)
    {
        this.RelativePosition = relativePosition
    }

    public override void Update()
    {
        //Missing lines of code used to determine 
        //the up vector
        Vector3 forward = Target - Position;
        Vector3 right = Vector3.Cross(forward, Vector3.Up);
        Vector3 up = Vector3.Cross(right, forward);

        Position = ObjectToFollow.Position - RelativePosition;
        Target = ObjectToFollow.Position;

        this.View = Matrix.CreateLookAt(Position,
                Target, up);
    }
} 
```

如果您考虑船的前向矢量并使用缓动函数插入此值，则运动可以非常酷且平滑。

# unit-testing - 使用带有属性的“Pester”（PowerShell 单元测试框架）

> ID：13481832
> 
> 赞同：1
> 
> 时间：2012-11-20T20:46:45.333
> 
> 标签：unit-testing, powershell, tdd, pester

我正在尝试围绕一些 PowerShell 代码包装一个文本夹具，该代码扩展了一个具有属性的对象。我收到一个似乎是由 Pester 引起的错误。我在下面有一个人为的例子，它显示了我正在尝试做的事情。

有没有人成功地为使用 Pester 属性的函数编写测试？

我得到的错误：

```
Describing Get-PropertyOfItem
Select-Object : Property cannot be processed because property "should" already exists.
At C:\Repos\ClinicientOps\clinicientops\General\Functions\Get-PropertyOfItem.ps1:4 char:11
+     $files | Select-Object *, @{Name = "TestProperty"; Expression = { $dir.Length}} ...
+              ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (Windows:PSObject) [Select-Object], PSArgumentException
    + FullyQualifiedErrorId : AlreadyExistingUserSpecifiedPropertyNoExpand,Microsoft.PowerShell.Commands.SelectObjectCommand 
```

我的功能：

```
function Get-PropertyOfItem {
    $dir = "C:\"
    $files = Get-ChildItem $dir
    $files | Select-Object *, @{Name = "TestProperty"; Expression = { $dir.Length}} -Last 1
} 
```

我的测试代码：

```
$here = Split-Path -Parent $MyInvocation.MyCommand.Path
$sut = (Split-Path -Leaf $MyInvocation.MyCommand.Path).Replace(".Tests.", ".")
. "$here\$sut"

Describe "Get-PropertyOfItem" {

    It "does something useful" {

        $prop = Get-PropertyOfItem
        $prop.TestProperty.should.be(3)
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:04:54.697

这似乎是他们在第 2 版中调查的一个限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T15:24:39.340

[Pester 2.0.1 版](http://scottmuc.com/powershell-pester-2-and-1-dot-2-released/)已悄然发布。你必须重写你的期望

```
$prop.TestProperty | Should Be 3 
```

这也意味着您的所有其他测试都需要迁移到此管道形式的期望语法。

# node.js - NodeJS connect-redis 与 nodejitsu URI

> ID：13481833
> 
> 赞同：1
> 
> 时间：2012-11-20T20:46:58.143
> 
> 标签：node.js, redis

我在 nodejitsu 上创建了一个 Redis 数据库并获得了完整的 URI，例如：

```
 nodejitsu:nodejitsudb11158161232.redis.irstack.com:f327c9sj29sj26e80b8e975fbebb4@nodejitsudb3058169sj32.redis.irstack.com 
```

Connect-redis 想要一个主机、端口等...有人知道我可以将这个字符串传递给它的简单方法吗？将主机设置为该模式时似乎不起作用 - mongodb 似乎在此模式下工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:52:45.707

使用`url.parse` [http://nodejs.org/docs/latest/api/url.html](http://nodejs.org/docs/latest/api/url.html)将该 url 解析为主机、端口等部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:33:59.150

因此，深入研究源代码似乎无法解析 dsn 字符串。url.parse 不返回必要的信息，因此必须进一步分解。

完整的 dsn 也有 redis:// 协议——它必须在那里才能工作。因为我的本地 redis dsn 字符串没有密码/用户，所以会检查它以防它丢失：

```
var redisUrl = 'redis://nodejitsu:nodejitsudb3051531232.redis.irstack.com:fd470c971946e8der75fbebb4@nodejitsudb305813frt232.redis.irstack.com:6379';

var redis = url.parse(redisUrl);

app.use(express.session({
  secret: settings.sessionSecret,
  store: new RedisStore({host: redis.hostname, port: redis.port, pass: redis.auth ? redis.auth.substring(redis.auth.indexOf(':') + 1): null})
})); 
```

# haskell - 不在范围数据构造函数中

> ID：13481836
> 
> 赞同：20
> 
> 时间：2012-11-20T20:47:11.330
> 
> 标签：haskell

我有两个 .hs 文件：一个包含一个新的类型声明，另一个使用它。

首先.hs：

```
module first () where
    type S = SetType
    data SetType = S[Integer] 
```

第二个.hs：

```
module second () where
    import first 
```

当我运行 second.hs 时，第一个、第二个模块都加载得很好。

但是，当我`:type`在Haskell平台上写S时，出现如下错误

> 不在范围内：数据构造函数“S”

*注意：每个模块中肯定有一些功能，我只是为了简洁而跳过它*

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-20T20:50:19.317

```
module first () where 
```

假设实际上模块名称以大写字母开头，空的导出列表 - `()`- 表示模块不导出任何内容，因此定义的内容`First`不在`Second`.

完全省略导出列表导出所有顶级绑定，或者在导出列表中列出导出的实体

```
module First (S, SetType(..)) where 
```

（`(..)`导出也是 的构造函数`SetType`，没有它，只会导出类型）。

并用作

```
module Second where

import First

foo :: SetType
foo = S [1 .. 10] 
```

或者，将导入限制为特定类型和构造函数：

```
module Second where

import First (S, SetType(..)) 
```

您还可以缩进顶层，

```
module Second where

    import First

    foo :: SetType
    foo = S [1 .. 10] 
```

但这很丑，而且很容易因为错误地计算缩进而出错。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T20:50:29.800

*   模块名称以大写字母开头 - Haskell 区分大小写
*   在左边距排列你的代码——布局在 Haskell 中很重要。
*   括号中的位是导出列表 - 如果您想导出所有功能，请忽略它，或者将您想要导出的所有内容放入其中。

`First.hs`：

```
module First where

type S = SetType
data SetType = S[Integer] 
```

`Second.hs`：

```
module Second where
import First 
```

# saml - SAML 令牌是否缓存/存储在浏览器的任何位置？

> ID：13481842
> 
> 赞同：25
> 
> 时间：2012-11-20T20:47:46.870
> 
> 标签：saml, saml-2.0

设想：

1.  浏览器（用户）向服务提供商（SP）请求资源。
2.  SP 重定向（使用 SAML 请求）到身份提供者 (IdP)。
3.  由于是首次登录，因此用户向 (IdP) 提供了他/她的有效凭据。
4.  IdP 然后将浏览器（使用包含 SAML 令牌的 SAML 响应）重定向到 SP 页面。

我有两个问题：

A. 在第 4 步中，浏览器是否存储或缓存 SAML 响应和/或 SAML 令牌？

B. 如果是，什么样的事情（属性？超时？协议？）阻止我获取存储的 SAML 令牌。然后将其处理到另一台计算机（具有新会话）并使用该令牌登录到同一个 SP？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-21T12:27:55.107

答案是“某种”重新缓存。在您的场景中，响应将通过 POST 从浏览器发送到服务提供者。因此浏览器可以“缓存”包含 SAML 响应的 POST 数据。因此，就像浏览器中的任何其他 POST 事件一样，如果用户在登录 SP 后使用后退按钮足够多次以返回 POST 事件，则可以将 POST 数据重新发送到 SP。

有一些事情可以帮助防止响应被劫持 -

1.  各方之间使用 HTTPS
2.  SP 强制执行 NotBefore 和 NotOnOrAfter 属性
3.  SP 强制执行一次性使用标准（SP 必须确保 Response 在其有效期内不被重复使用。如果在有效窗口之外接收到消息，则 SP 应丢弃该消息）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T07:55:32.807

IDP 通常在识别 SAML 会话的客户端浏览器上存储会话 cookie。此会话 cookie 的盗窃可能不再受到任何其他会话 cookie 的保护。

在 SP 和 IDP 之间的通信中使用 HTTPS 将提供大量的会话劫持保护。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-09T13:45:03.887

对于问题 A，它可能取决于您使用的浏览器。

对于问题 B，有几种机制可以防止 SAML 响应被重用：

1.  SubjectConfirmationData 具有 NotBefore 和 NotOnOrAfter 属性，它们指定 SAML 断言有效的时间范围。因此，SAML 断言不能在此时间范围之外使用。
2.  SubjectConfirmationData 具有属性 InResponseTo，它指定为其发出 SAML 断言的 SAML 请求。因此，SAML 断言不能用于其他 SAML 请求。
3.  SP 必须通过维护一组已使用的 SAML 断言来确保不会重放 SAML 断言。

您可以阅读 SAML Profiles 规范的第 4.1.4.3 和 4.1.4.5 节。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-10-28T21:28:21.413

我知道这很老，但答案是肯定的，浏览器将 SAML 令牌存储为 Cookie。（通常）您可以通过各种流量/会话检查器（如 Fiddler、FF 上的 SAML Tracer 等）在浏览器的 Cookie 列表中看到它。

# combobox - 如何在商店代理 EXTJS 4 中获取组合框的值？

> ID：13481844
> 
> 赞同：1
> 
> 时间：2012-11-20T20:47:54.517
> 
> 标签：combobox, grid, extjs4, parameter-passing, store

我有一个向我的控制器发送参数的商店。当我定义我的商店时

```
proxy: {
            type: 'ajax',
            scope: this,
            url: 'My/GetData',
            extraParams: {
                parametervalue: Ext.getCmp('Combo').getValue() //something similar
               }
      } 
```

我没有更新组合选择的商店。否则我可以在组合上添加一个侦听器并更新商店。我想在加载网格时获取组合框的值。它也适用于分页，因此当用户点击下一页时，商店会加载第二页“与”组合框中的选定值，并将其传递给我的控制器。

# asp.net - TortoiseGit - 它什么时候要求输入用户名和密码？

> ID：13481846
> 
> 赞同：2
> 
> 时间：2012-11-20T20:47:59.943
> 
> 标签：asp.net, git, authentication, asp.net-mvc-4, tortoisegit

我想实现一个作为 IIS 应用程序运行的小 Git Webserver。我设法做到了，我可以从中拉出和推入。但现在我想实现一些基本凭据。

我不想拥有的是，添加一个远程 URL，如[http://username:password@domain.tld/repo.git](http://username:password@domain.tld/repo.git)。我不想在 url 中有密码（用户名就可以了）。

目前我想为 HTTP 协议使用这个（HTTPS 也可以）

我必须从我的服务器返回什么到 tortoisegit，所以它会提示我输入密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:50:19.223

[TortoiseGit](http://code.google.com/p/tortoisegit/)将使用与 msysgit 相同的 curl 命令来访问 http 服务器（IIS 或其他）。

请参阅“ [Git - 如何在 windows 上使用 .netrc 文件保存用户和密码](https://stackoverflow.com/questions/6031214/git-how-to-use-netrc-file-on-windows-to-save-user-and-password)”：您可以将用户名和密码保存在`%HOME%/_netrc`（您需要`HOME`在 Windows 上定义）。

另一种选择是将[凭证助手包与 git1.7.9+ 一起](https://github.com/blog/1104-credential-caching-for-wrist-friendly-git-usage)使用。您在每个会话中输入*一次*用户名和密码（并避免使用`_netrc`纯文本文件）。

# jquery - 在没有插件的情况下添加旋转到这个悬停效果？

> ID：13481848
> 
> 赞同：0
> 
> 时间：2012-11-20T20:48:15.473
> 
> 标签：jquery, hover

因此，当我将鼠标悬停在“#header”上时，此代码将“.now”向上移动 20px，然后当我将鼠标悬停时将其收回。

```
$(document).ready(function() {
    $('#header')
        .hover(function() {
            $(".now").stop().animate({ top: -20 }, 'fast');
        }, function() {
            $(".now").stop().animate({ top: 0 }, 'fast');
        });
}); 
```

我如何将“.now”旋转 45 度并移动它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:58:16.483

旋转元素是基于 CSS3 样式构建的，在各种*现代*浏览器中处理方式不同......

因此，虽然有一些方法可以在没有插件的情况下完成，但使用像[jQuery Transit](http://ricostacruz.com/jquery.transit/)这样的优秀 jQuery 插件有助于简化实现所需效果所需的代码（就像 jQuery 本身一样。）

# php - 如何使用 DOMDocument 将元素插入新元素

> ID：13481852
> 
> 赞同：0
> 
> 时间：2012-11-20T20:48:22.837
> 
> 标签：php, domdocument

基本上我想做的是创建一个带有css类的div，在里面放一些元素，然后用我的新div替换相同的HTML。我尝试了许多不同的方法，但这是最新的方法，但失败了。

```
$dom = new DOMDocument( '1.0', strtolower( get_bloginfo( 'charset' ) ) );
@$dom->loadHTML( '<div>' . $content . '</div>' );
$dom->formatOutput = true;

foreach( $dom->getElementsByTagName( 'img' ) as $image ) {
    $copy_node = null;

    if( $image->parentNode->tagName == 'a' )
        $copy_node = $image->parentNode;

    if( !is_null( $copy_node ) && $copy_node->parentNode->tagName == 'p' )
        $copy_node = $copy_node->parentNode;

    if( is_null( $copy_node ) )
        $copy_node = $image;

    $wrap = $dom->createElement( 'div' );
    $wrap->setAttribute( 'class', 'some-css-class' );

    // Insert $copy_node into it - doesn't work
    $wrap->appendChild( $copy_node );

    // Replace the node with the new one
    $copy_node->parentNode->replaceChild( $wrap, $copy_node );

} 
```

有人可以解释如何将一些元素插入到新创建的元素中，以便我可以用文档中的新元素替换一些元素吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T21:06:28.330

更改操作顺序：

*   先更换
*   追加第二个

否则，您试图用 替换`$wrap`的`$copy_node`子元素`$wrap`，这是没有意义的。

通过首先进行替换，将包装元素插入到要包装的元素所在的位置。这将保留文档的待包装元素部分，但不再保留在树中。要在树中给它一个位置，只需将其附加到包装元素即可。

# css - div中的图像-鼠标悬停在潜水中的任何位置

> ID：13481853
> 
> 赞同：1
> 
> 时间：2012-11-20T20:48:28.293
> 
> 标签：css, hover, transitions

我在我的网站的内容区域内有一张图片，我希望图片在该内容区域内的任何地方悬停时只浮动一点......不知道如何做到这一点 - 到目前为止，它只会在鼠标悬停时向上移动图像本身 - 无法将 css 添加到整个内容框，因为我不希望其他内容移动，只是图像。

（见这里：[http](http://tm26.be/healthcare/index.html) ://tm26.be/healthcare/index.html - 每个内容面板上的橙色和白色小球）

我用来移动地球仪的 CSS 是这样的：

```
.img {position:absolute;bottom:-30px;right:0px; transition:.65s;}
.img:hover {bottom:10px} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T20:52:41.637

像这样将悬停条件放在容器上：

```
.box1 .img {position:absolute;bottom:-30px;right:0px; transition:.65s;}
.box1:hover .img {bottom:10px;} 
```

# vb.net - app.config 中的模拟

> ID：13481859
> 
> 赞同：2
> 
> 时间：2012-11-20T20:48:47.947
> 
> 标签：vb.net, app-config, impersonation, credentials

我收到了一个用 vb 编写的桌面应用程序。我的任务是为整个应用程序模拟给定用户。这是我接触过的第一个桌面应用程序——我是一名网络开发人员。

在 app.config 中，我在 system.web 下做了类似的事情

身份模拟=“真”用户名=“某域\某用户”密码=“某密码”

她不工作。这适用于完全不同的 Web 应用程序的类似 web.config 文件。我在 vb 中返回了 WindowsIdentity.GetCurrent().Name，它只是给了我自己的用户名和域（相同的域，如果这很重要的话）。

我还需要做什么才能让她工作，或者我做错了什么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T21:14:24.403

您可以查看[`WindowsIdentity.Impersonate Method`](http://msdn.microsoft.com/en-us/library/w070t6ka.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)它有一个如何模拟用户的示例，但它确实使用了一些 Windows API 函数。你也可以看看这个[`Code Project Article`](http://www.codeproject.com/Articles/4863/LSA-Functions-Privileges-and-Impersonation)。

# objective-c - 运行时不会出现在情节提要上放置 UIBarButtonItem

> ID：13481862
> 
> 赞同：1
> 
> 时间：2012-11-20T20:48:56.603
> 
> 标签：objective-c, ios6, uitabbarcontroller, storyboard, uinavigationbar

在 UIViewController 的导航栏上放置一个按钮（在我添加 UITabBarController 时由 xcode 创建）在情节提要上看起来很棒，但在运行时不会出现。

但是，使用以下代码添加按钮可以正常工作：

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    UIBarButtonItem *rightButton = [[UIBarButtonItem alloc] initWithTitle:@"About"
            style:UIBarButtonSystemItemDone target:nil action:nil];
    self.tabBarController.navigationItem.rightBarButtonItem = rightButton;
} 
```

提前致谢。

# google-fusion-tables - 查询或过滤 Fusion Tables？

> ID：13481863
> 
> 赞同：1
> 
> 时间：2012-11-20T20:48:57.617
> 
> 标签：google-fusion-tables

这是一个非常缺乏经验的用户提出的问题。我有一张选举结果表，格式如下： ![表格示例](../Images/c774222c473a06024cf320cc3cf149cf.png)

我已将此表与城市形状合并，并且可以根据其中一列进行地图可视化。当我想做过滤器和查询时，我的问题就来了。我很困惑。

我知道如何激活和停用 html 文档中的图层，调用（显示和隐藏）不同的融合表。

我现在想尝试的是使用一个单一的融合表来以不同的方式显示数据。我不知道这是否可能。

例如，从 html 页面调用的不同地图上显示的可能查询：

1.  仅显示类型为（H 列）“农村”（过滤器？）的行
2.  根据 B、D 和 F 列中较大的值填充多边形颜色（如果 party1_2012 的值> 2012 年当事人 2 并且> 当事人 3 2012，多边形颜色为蓝色；如果 2 方获胜，则填充为红色... )
3.  根据 2 列之间的差异（即 2010 年和 2012 年的结果）用颜色填充多边形
4.  地图组合选项1（仅显示农村城市时），应用选项3（根据2列之间的差异显示颜色）

受 John Keefe 的帖子[通过 Fusion Tables 轻松制作 AP 选举数据](http://johnkeefe.net/making-ap-election-data-easy-with-fusion-tabl)的启发，尝试使用数据，但没有成功。我太没有经验了。这是生成csv并从网页调用它们的方法吗？我可以在 Fusion Tables 上生成地图并获取一个 url 以从网页调用查询的地图吗？

我很欣赏建议或方法。

感谢期待！

弗兰斯

# javascript - 性能：Ajax+eval 与 iframe

> ID：13481864
> 
> 赞同：0
> 
> 时间：2012-11-20T20:49:01.697
> 
> 标签：javascript, jquery, ajax, iframe, eval

我需要在当前页面中加载远程动态页面（相同域）的 html 片段，并且我试图了解使用简单（隐藏）iframe 与使用 ajax+eval（或 $.load在 jQuery 中）。

在我看来，两者基本上都在做同样的事情，因为在这两种情况下都需要加载 html 并评估脚本。所以结果在我看来是一样的。

我是否遗漏了什么，有人可以解释使用 ajax+eval 的额外努力如何带来性能改进吗？

我坚持认为我正在处理的远程页面是动态的，并且需要评估脚本。它不同于简单的 GET 来检索静态内容。

# facebook - Facebook 喜欢按钮插件 - 显示特定数量的面孔

> ID：13481866
> 
> 赞同：1
> 
> 时间：2012-11-20T20:49:03.953
> 
> 标签：facebook, social-networking, facebook-likebox

有什么方法可以在 Facebook 上显示有限的头像，比如 box 插件？

假设我只想显示 5 个头像？

我正在使用 Facebook 的类似框的 HTML 版本，即我的用户`data-show-faces="true"`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-13T00:13:15.730

更改面数的唯一方法是在 like-box 插件上设置高度。

[https://developers.facebook.com/docs/reference/plugins/like-box/](https://developers.facebook.com/docs/reference/plugins/like-box/)

```
Take the following height examples:

250px or less, you get 5 faces,
251px-303px is 10 faces.
304px-356px is 15 faces
357px-409px is 20 faces

And so on in multiples of 53px = 5 additional faces. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T22:52:47.780

[不， Like Button 插件](https://developers.facebook.com/docs/reference/plugins/like/)的“show_faces”参数的唯一选项是 true 和 false

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T22:59:41.587

不，您不能限制小部件中显示的面数。您在这里拥有所有信息：

[http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)

# installation - 用于执行多个安装的安装程序

> ID：13481870
> 
> 赞同：5
> 
> 时间：2012-11-20T20:49:27.870
> 
> 标签：installation, inno-setup

我去过 stackoverflow.com 很多次，但这是我第一次在这里发帖。我会尽量做到具体和切中要害。

我正在将我所有的 PC 光盘转换为数字 .iso 文件，并且我有一些游戏是多安装光盘。

最近我开始使用 Inno Setup，到目前为止，我已经成功地将多光盘安装整合到单个可执行程序中。

我目前关注的是战地1942系列。它需要初始安装，多次扩展安装，加上一个主要补丁，以及安装一个需要多个步骤的 mod。

我向社区提出的问题是，我如何将上述所有文件打包到一个可执行文件中并让它们按顺序安装所有内容？如果可以通过 Inno 完成，我想尝试一下。或者，如果您建议其他程序，我总是可以花时间尝试和学习它。

不久前我曾尝试为此制作一个批处理文件，但结果有点笨拙，我真的不喜欢它的结果。

另外，有没有办法在 Inno 中插入复选框来选择运行哪些可执行文件？（帖子的这一部分不如上述要求重要，如果可能的话，只是一种奖励）。

真的很期待社区对此的回应！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T21:03:12.013

在我看来，如果最终结果应该是安装了 mod 的完整补丁版本，您应该构建新的安装程序，其中将包含带有 mod 的完整补丁游戏。您可以通过简单的方法找出每个补丁、插件、MOD 更改/添加的内容。安装每个东西（插件/mod/等）后，制作安装文件夹的备份副本并检查注册表项。然后只需比较文件夹/目录并过滤掉每个补丁、插件、MOD 的特定文件。最后，您将能够将每个插件和 MOD 添加为`Components`（文件和注册表项） - 这将在组件选择向导页面中创建复选框。

最简单的方法：对于安装结束时的外部安装程序/第 3 方应用程序，可在此处找到更多信息：[http ://www.jrsoftware.org/ishelp/index.php?topic=runsection](http://www.jrsoftware.org/ishelp/index.php?topic=runsection)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T23:48:36.730

您可以遵循的一种方法是创建*安装程序的安装程序*，您只需*打包*您现在拥有的安装程序，并在安装时按照您现在执行的精确顺序运行每个安装程序，以获得完全安装和修补的游戏。

这样，您不必了解每个游戏的每个文件/注册表项或其他设置，以及如果您忘记包含对它至关重要的内容而失败的风险。

为了正确地做到这一点，您必须做的是了解当前安装程序是否从命令行参数或文本文件接受它自己的配置（许多安装程序都这样做，例如**/silent**或**/verysilent**命令行参数*运行背景*）。完成后，使用脚本的 [run] 部分启动通过命令行或预制文本文件传递参数的每个安装程序，甚至可以使用 [code] 动态创建文本文件或命令行参数带有内置 pascal 脚本的部分。

如果您的安装程序不接受参数，您甚至可以达到您的目标，将所有内容保存在一个可以运行的 exe 文件中，然后在每个单独的安装程序启动时对其进行配置。

您的问题过于宽泛，无法在此处包含一个工作示例，但您可以通过研究`samples`目录中的脚本来找到指导。

至于你的最后一个问题

> 另外，有没有办法在 Inno 中插入复选框来选择运行哪些可执行文件？

您可以使用 [run] 部分让*用户*选择最后要运行的内容。

或者您可以使用 [tasks] 部分来创建不同`sets`的文件/配置。

最后一句话是检查安装脚本条目的可用标志，例如，`deleteafterinstall`清理`[files]`条目中包含的单个安装程序，或 [uninstallrun] 部分也提供统一的卸载程序。

# java - 使用 JAX-WS 向客户端提供实体

> ID：13481871
> 
> 赞同：2
> 
> 时间：2012-11-20T20:49:27.457
> 
> 标签：java, jpa, jax-ws

我正在尝试使用 JAX-WS (SOAP) 创建允许对某些实体进行 CRUD 操作的 Web 服务。我还在编写一个带有 UI 的桌面客户端，它提供了通过 Web 服务对这些实体执行 CRUD 的简单方法。

但是，我遇到了一些设计问题。我希望客户端只能查看和操作实体的某些字段，我不确定施加此限制的最佳方法是什么。

例如，给定：

```
@Entity
public class Customer {

  @Id
  @GeneratedValue
  public Long id;

  public String name;

  // neither read nor write from the web service
  public String password;

  // read-only from the web service
  @Temporal(TemporalType.DATE)
  public Date joinedAt;

  @ManyToOne
  @LazyCollection(LazyCollectionOption.FALSE)
  private List<Order> orders;

  // .. boilerplate getters and setters
}

@Entity
public class Order {

  @Id
  @GeneratedValue
  public Long id;

  public String name;
} 
```

我想为客户提供这些基本操作：

1.  获取所有客户及其订单的列表
    *   他可以看到所有字段，除了`password`
2.  用一些订单创建一个新客户
    *   允许控制除`joinedAt`和之外的所有字段`password`
3.  修改客户
    *   同上，你不能修改`joinedAt`或`password`

.

1.  我目前针对 (1) 的解决方案是将 @XmlTransient 添加到密码字段。如果您想将密码发送给某些客户端但不发送给其他客户端，则会出现问题。另一种解决方案是`customer.setPassword(null);`在通过 Web 服务编组该实体之前执行此操作。但这真的是这样做的方法吗？第三种解决方案是创建一个基类`BaseCustomer`，其中包含除之外的所有字段`password`，然后 Customer 将是`BaseCustomer`具有添加`password`字段的一个。用户将收到 BaseCustomer 对象而不是 Customer 对象。但这也有创建/更新的问题。

2.  与 (1) 相同，一种解决方案是`customer.setJoinedAt(my_value); customer.setPassword(my_value); customer.setId(null);`在客户想要创建新客户时执行。手动归零是`id`真正的最佳实践吗？我觉得很难相信。也应该`id`是 XmlTransient 吗？但是，Web 服务的用户如何能够修改/删除实体呢？

3.  当客户想要更改 a`Customer`时，他会检索客户列表，对其中一个对象进行更改`Customer`，然后编组该对象并将其传递回 Web 服务。这样做有一些问题：如果该`id`字段是 XmlTransient，那么 EntityManager 的持久性将不知道要修改哪一行，并且可能会创建一个新行。如果用户是邪恶的并且只是拒绝传递一个类似的问题`id`，所以我必须手动检查它`id`是非空的。而且，用户还没有收到该`password`字段，所以现在服务器收到了一个空的对象`password`它将尝试保留的字段。我相信这将导致 EntityManager 完全删除该现有客户的密码。让用户准确指定他想要修改哪些字段以及哪些值似乎不切实际。

请注意，这只是我需要做的简单的概念验证，我有更多的实体、关系和操作要提供。

我是使用这些技术的新手，我希望如此高的水平和如此多的抽象能让我的生活更轻松，但到目前为止，这主要是令人头疼的问题。完成这项常见的基本任务似乎非常困难。难道我做错了什么？请不要建议创建 Web 应用程序 :)

# php - 如何在php中对文档mongodb进行排序和限制

> ID：13481874
> 
> 赞同：2
> 
> 时间：2012-11-20T20:49:32.080
> 
> 标签：php, mongodb

我这里有数组。

[http://pastebin.com/i5ZUQNm6](http://pastebin.com/i5ZUQNm6)

这来自php结果。

```
$result1 = $mo->find(
  array(
    'username' => 'BLABLA',
    'stream' => array('$exists' => true)
  )
);  
foreach ($result1 as $obj) {
  print_r($obj);
} 
```

我如何对 [stream] 子项进行排序并将其限制为 1 个结果？以及如何找到 [id_stream] 孩子？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T21:15:41.800

为了限制，单个文档使用`limit(1)`：

> $result1 = $mo->find(array('username' => 'BLABLA', 'stream' => array('$exists' => true)))->limit(1);

或者 `findOne`

> $result1 = $mo->findOne( array('username' => 'BLABLA', 'stream' => array('$exists' => true) ) );

* * *

并对孩子进行分类。您还需要在最后添加`->sort(array("stream.time" => -1));` 我见过的 pastebin，我猜您想按日期订购。

* * *

最终代码：

```
 $result1 = $mo->findOne(   array(
     'username' => 'BLABLA',
     'stream' => array('$exists' => true)))->sort(array("stream.time" => -1));; 
```

根据我所知道的限制为数组的单个值，~~您需要一个需要添加的循环~~ （在查找内部，就在主数组之后）：`find(.... , array('streams' => array('$slice' => 1)));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T21:22:37.047

使用[sort](http://php.net/manual/en/mongocursor.sort.php)和[limit](http://php.net/manual/en/mongocursor.limit.php)的组合应该可以工作-slownage 的答案中的代码看起来可能是您需要的。

# objective-c - 创建和隐藏 UILabel

> ID：13481877
> 
> 赞同：4
> 
> 时间：2012-11-20T20:49:38.540
> 
> 标签：objective-c, xcode, ios4

我以编程方式创建了一个`UILabel`并触发了一个我想隐藏相同标签的按钮。这是我的代码：

```
UILabel *nameLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 100, 320, 100)];
nameLabel.text = @"TEXT";
nameLabel.backgroundColor = [UIColor greenColor];
nameLabel.numberOfLines = 5;
nameLabel.font = [UIFont boldSystemFontOfSize:12];
[self.view addSubview:nameLabel]; 

self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc]initWithTitle:@"Hide" style:UIBarButtonItemStyleBordered target:self action:@selector(back)];    

- (IBAction)back{

  self.navigationItem.rightBarButtonItem=nil;

  [nameLabel setHidden: YES];  not working
   nameLabel.hidden = YES;     not working
} 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T21:00:27.450

为了使按钮可以从其他方法访问，您需要将其分配给实例变量（直接或通过属性），而不是将其分配给局部变量。申报财产的正确方法是

```
@property(nonatomic, strong) UILabel *nameLabel; 
```

然后您可以分配给使用

```
self.nameLabel = [[UILabel alloc] init...]; 
```

以后可以说

```
self.nameLabel.hidden = YES; 
```

它应该可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T08:15:21.667

这也是另一种方法

```
UILabel *nameLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 100, 320, 100)];
nameLabel.text = @"TEXT";
nameLabel.tag = 1001;
nameLabel.backgroundColor = [UIColor greenColor];
nameLabel.numberOfLines = 5;
nameLabel.font = [UIFont boldSystemFontOfSize:12];
[self.view addSubview:nameLabel]; 

self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc]initWithTitle:@"Hide" style:UIBarButtonItemStyleBordered target:self action:@selector(back)];    

- (IBAction)back{

  self.navigationItem.rightBarButtonItem=nil;
   UILabel *tempLabel = (UILabel *)[self.view viewWithTag:1001];
  [tempLabel setHidden: YES];  
   tempLabel.hidden = YES;     
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T21:00:11.753

甚至很难知道它是如何编译的，因为您显示的要创建的代码`nameLabel`使其对于其中的任何方法都是本地的。尝试创建`nameLabel`一个属性并`self.nameLabel`在您引用它时使用它，无论是创建它还是触摸它的属性。

# ruby-on-rails - 按姓氏组织联系人以按字母顺序显示

> ID：13481884
> 
> 赞同：2
> 
> 时间：2012-11-20T20:49:59.537
> 
> 标签：ruby-on-rails, ruby

每个联系人都有一个名字和姓氏。在我的联系人索引中，我按 ASC 顺序显示了一个按姓氏命名的 default_scoped 列表。这工作正常，但我希望让它变得更好。

我想在索引中创建一个有组织的列表，按联系人姓氏的第一个字母对联系人进行分组，但我有点不知道如何完成这项工作。结果将如下所示：

```
<div class="contacts" id="contact_list_a">
  <h2>A</h2>
  <div class="contact">John Abercrombie</div>
  <div class="contact">Julie Aloters</div>
</div>

<div class="contacts" id="contact_list_b">
  <h2>B</h2>
  <div class="contact">Harry Bronson</div>
  <div class="contact">Stevie Brussels</div>
</div>

...(continues) 
```

由于我的经验不足，到目前为止我只看到两个选项：

1）我可以为字母表中的每个字母创建一个变量，并在每个合适的地方添加联系人。这会产生对数据库的大量调用（我假设），并且我的控制器中的大量变量似乎一点也不优雅。

2）我可以将模型中的所有联系人拉到一个变量中（我现在正在做的事情），然后在我的控制器中创建一个私有方法，该方法遍历数组并相应地分配新变量。这似乎仍然效率低下，但在我看来 #1 更好。

您能否深入了解一种更好的方法来做到这一点？我正在使用 Ruby 1.9.3 和 Rails 3.2.8。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T21:12:37.710

一旦你把你的用户拉进来，比如说`users`，你可以把他们分组

```
# creates a hash mapping first letter of last name to array of corresponding users
groups = users.group_by { |user| user.last_name[0].downcase } 
```

在您看来，您可以按如下方式遍历哈希：

```
<% groups.each do |letter, contacts| %>
  <div class="contacts" id="contact_list_<%= letter %>">
  <h2>letter.upcase</h2>
    <% contacts.each do |contact| %>
      <div class="contact"><%= contact.full_name %></div>
    <% end %>
  </div>
<% end %> 
```

# javascript - 如何使用窗口对象（或更好的方法）来制作动态属性名称

> ID：13481885
> 
> 赞同：0
> 
> 时间：2012-11-20T20:50:00.053
> 
> 标签：javascript, jquery

[我在这里](https://stackoverflow.com/a/5117153/1252748)读到，窗口对象可用于在对象中动态创建属性名称。这是怎么做的

我有一个像

```
function storeValues(){

    var info = {};
    $('.class1').each(function(index1, value1){
        $('.class2', $(this)).each(function(index2, value2){

            //so here I'd like to add a string to the property name
            //like 'param-' and 'detail-' so I could end up with a 
            //structure like 
            //info.param_0.detail_0
            //then
            //info.param_0.detail_1
            //info.param_1.detail_0
            //info.param_1.detail_1
            //info.param_1.detail_2
            info.'param_'index1.'detail_'index2 = $(this).find('.desired_input').val();

    });
} 
```

这可能吗。或者有更聪明的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T20:52:59.990

`window`这与 , 访问动态对象属性名称的符号无关，`[]`是 JavaScript 语言的一个方面。

```
info['param_' + index1]['detail_' + index2] = $(this).find('.desired_input').val(); 
```

* * *

当然，如果`info['param_' + index1]`还不存在，则必须在设置其属性之前将其创建为空对象。

```
info['param_' + index1] = info['param_' + index1] || {};
info['param_' + index1]['detail_' + index2] = $(this).find('.desired_input').val(); 
```

# javascript - 在页面加载时缩放图像

> ID：13481889
> 
> 赞同：1
> 
> 时间：2012-11-20T20:50:07.960
> 
> 标签：javascript, html, image

当有人打开新页面时，我想获得缩放图像的效果。因此，每个页面都应该有自己的图像，每次打开页面时都会放大。我在这个网站上有一个例子：http: [//www.fashionclub70.be/](http://www.fashionclub70.be/)（点击“精简版”）。

如果用户单击菜单项，则会打开相应的页面并放大图像。在这个网站上，它是用 Flash 完成的，但我只想使用 Javascript。我真的没有Flash的工作知识。您对我有一些建议，以便我可以成功实施吗？

谢谢

马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T21:14:52.717

您可以使用画布并在其上放置图片。你需要的一切都可以在这里找到：http: [//www.html5canvastutorials.com/tutorials/html5-canvas-images/](http://www.html5canvastutorials.com/tutorials/html5-canvas-images/)

编辑：如果你想使用 CSS3，你可以使用

```
#pix{width:200px;height:300px;transition: all 2s;}

#pic:hover{transform:scale(4) translate(100px,100px)} 
```

这将使带有此 id 标记的 div 向右移动，并在 2 秒内变大 4 倍。:hover 部分只是一个会使转换滴答作响的事件。猜猜你想改用 :active 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T07:48:42.977

我想最简单的解决方案是使用这样的东西：[http](http://sliderjs.org/) ://sliderjs.org/ 。基本上，您会放置一个空的占位符并将您的图像加载到一些不可见的 div 元素中。然后，使用绑定到图像的 onload 事件的回调来启动过渡效果。

# reporting-services - 在 SSRS 2008 中以 HH:MM:SS 格式显示秒数

> ID：13481890
> 
> 赞同：9
> 
> 时间：2012-11-20T20:50:12.093
> 
> 标签：reporting-services, ssrs-2008

我有一个表，其中有一列 TotalTime，它是以秒为单位的整数值。

在 Visual Studio / SSRS 2008 中，我想以 HH:MM:SS 格式显示它。

谢谢！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-20T21:46:49.577

只需使用将该秒数添加到零时间值的表达式

```
=Format(DateAdd("s", Fields!TotalTime.Value, "00:00:00"), "HH:mm:ss") 
```

如果大于 24 小时，则可以使用以下公式添加天数部分：

```
=IIF(Fields!TotalTime.Value < 86400, 
    Format(DateAdd("s", Fields!TotalTime.Value, "00:00:00"), "HH:mm:ss"), 
    Floor(Fields!TotalTime.Value / 86400) & " days, " & Format(DateAdd("s", Fields!TotalTime.Value, "00:00:00"), "HH:mm:ss")) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-09T17:04:08.033

对于 HH:mm:ss 格式，您可以使用：

```
=Floor(Fields!TotalTime.Value / 3600) &":"& Format(DateAdd("s", Fields!TotalTime.Value, "00:00"), "mm:ss") 
```

**在这种情况下，例如90000sec**将显示为： 25:00:00

 **对于 DD:HH:mm:ss 格式，请使用：

```
Floor(Fields!TotalTime.Value / 86400) &":"& Format(DateAdd("s", Fields!TotalTime.Value, "00:00:00"), "HH:mm:ss") 
```

90000sec 将显示为：**1:01:00:00****

# python - 在 CMD 中运行 Python 不起作用

> ID：13481893
> 
> 赞同：2
> 
> 时间：2012-11-20T20:50:25.563
> 
> 标签：python, windows-8, cmd, environment-variables

我是 Python 初学者，在从 CMD 运行 Python 时遇到问题。我已将 Python 安装目录添加为 PATH 变量 (;C:\Python27)。我可以从 CMD 运行 Python 解释器，但是当我从 CMD 发出“python file.py 命令”之类的命令时，它返回“Error2，Python 无法打开，没有这样的文件/目录”。

所以我要做的是转到“cd C:\Folder\Folder2\My_Python_Files”，然后每次都键入“file.py 命令”。有没有更快或更有效的方法来做到这一点？我目前在 Windows 8 上运行 Python2.7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T21:01:09.283

运行时`python <script>`，它需要提供的脚本的实际路径。您不能单独指定“file.py”，除非它就在您的当前目录中。

在 Windows 中，您可以采取以下两个步骤：

1.  将 .py 文件与 python 关联。然后你可以直接运行它们而无需`python`命令：（`/path/to/file.py`
    右键单击.py->属性->更改为与python.exe关联）

2.  进一步的步骤：向您的`PATH`环境添加一个包含您的 python 脚本的位置。从那里，你可以做`file.py`，它会在你的搜索路径中找到。
    所以你可以添加`C:\Folder\Folder2\My_Python_Files`到你`PATH`的那里，你可以在那里存储你的可执行 python 脚本。

您还可以在 shell 会话期间临时设置 PATH 变量：

```
SET PATH=%PATH%;C:\path\to\project 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T20:57:32.080

就像`PATH`环境变量列出了几个目录供系统搜索可执行文件`PYTHONPATH`一样，Python 搜索`.py`文件也是如此。如果您希望文件夹中的脚本可全局访问（即，您可以按照自己的意愿通过名称引用它们，或者您可以从其他脚本中导入它们），将该文件夹添加到`PYTHONPATH`（如果它不存在则创建它）。

请注意，调用您的脚本的命令`PYTHONPATH`是：

```
python -m file [<script arguments>] 
```

（即使用`-m`选项将其视为[模块](http://docs.python.org/2/tutorial/modules.html)，不要使用扩展名`.py`）

这里[有一篇文章](http://www.stereoplex.com/blog/understanding-imports-and-pythonpath)更详细地解释了 Python 如何找到它的源文件（在命令行中和通过`import`）。

请注意，您还可以通过使用其完整路径来引用该脚本：

```
python C:\Folder\Folder2\My_Python_Files\file.py command 
```

但是通过这样做，该脚本可能引用的同一文件夹中的其他文件`import`可能不起作用（因为 Python 不知道在哪里搜索它们）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T21:00:11.303

   除非项目的文件夹在 PATH 中，否则您不能调用该文件，除非您在项目的文件夹中。除非需要，否则不要为项目创建 PATH；这是不必要的。

   只需横向到文件的目录并在目录中运行命令。那可行。

   如果该项目将被其他项目/文件使用，您可以使用 PYTHONPATH 设置目录，以便其他项目可以成功访问它。

   希望有帮助。

# javascript - 如何在表格单元格上浮动 Dojo DropDownMenu

> ID：13481898
> 
> 赞同：0
> 
> 时间：2012-11-20T20:50:35.723
> 
> 标签：javascript, css, drop-down-menu, dojo, dgrid

简而言之，我怎样才能显示一个下拉菜单浮动在表格上而不是在表格单元格内呈现？

我正在使用此示例代码在表格单元格中显示下拉菜单：

```
window.someObj.showSocs = function(index){
  var pSubMenu = new DropDownMenu({});
  pSubMenu.addChild(new MenuItem({
    label: "Cut",
    iconClass: "dijitEditorIcon dijitEditorIconCut"
  }));
  pSubMenu.addChild(new MenuItem({
    label: "Copy",
    iconClass: "dijitEditorIcon dijitEditorIconCopy"
  }));
  pSubMenu.addChild(new MenuItem({
    label: "Paste",
    iconClass: "dijitEditorIcon dijitEditorIconPaste"
  }));

  pSubMenu.placeAt("socs-" + index.toString());
  pSubMenu.startup();
} 
```

在哪里和`DropDownMenu`是。`"dijit/DropDownMenu"``MenuItem``"dijit/MenuItem"`

然后我使用此代码添加到表格单元格的链接（它在 dgrid renderCell 函数中执行，但我认为它与此问题无关）：

```
var link = document.createElement("a");
var linkText = "javascript:someObj.showSocs(" + index + ")";
link.setAttribute("href", linkText);
link.innerHTML = "DropNew";
td.appendChild(link);
td.setAttribute("id", "socs-" + index.toString()); 
```

现在，当我单击链接时，下拉菜单正在呈现，但在表格单元格内，而不是在它上面。这会导致当前表行扩展。我想这取决于一些我无法弄清楚的 CSS 属性。我没有覆盖任何 CSS 属性，所以我希望下拉列表自动放置在表格上而不是单元格内？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T14:49:02.670

您将菜单的 DOM 节点放入单元格中，因此它会拉伸单元格。您可以在所需节点周围的帮助下将菜单放入`<body>`并绝对定位。[`dijit/place`](http://dojotoolkit.org/reference-guide/1.8/dijit/place.html)

我会为上下文菜单使用内置功能，例如：

```
// var Menu = require("dijit/Menu");
var menu = new Menu({
    leftClickToOpen: true,
    targetNodeIds: ["table1"],
    selector: "a.dropNew"
}); 
```

在行动中看到它：http: [//jsfiddle.net/phusick/TBWXL/](http://jsfiddle.net/phusick/TBWXL/)

![在此处输入图像描述](../Images/9eb7f50a51e06e9fdc65c3a68465cac0.png)

# ruby-on-rails - 在 Rails 环境中多次调用 mongoid 观察者

> ID：13481902
> 
> 赞同：0
> 
> 时间：2012-11-20T20:50:52.903
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, mongoid, mongoid3

使用 Mongoid 3，rails 3.2

我有这样的课

```
class Company
  include ActiveModel::ForbiddenAttributesProtection
  include Mongoid::Document
  include Mongoid::Timestamps
  include Mongoid::Slug
  ....
end 
```

我有一个像这样的观察者

```
class CompanyObserver < Mongoid::Observer

  def after_create company
     ...
  end
end 
```

我的问题是 after_create 回调被多次调用，有时最多 3 次，当我通过控制器或控制台创建公司时，它会调用两次回调。我已经测试以确保观察者没有被实例化两次。我也尝试过使用 before_create 并检查 new_record？第一次返回 true 第二次返回 false 所以我不知道它为什么第二次调用它。

这是我的 Companies 控制器，但是我想使用我的 after_create 回调，因为我只想在创建模型时调用它，而不是在更新模型时调用它

```
class CompaniesController < ApplicationController
  respond_to :html
  before_filter :set_company, only: [:edit, :update, :destroy]

  load_and_authorize_resource :company, except: [:create, :update]

  def index
    @companies = Company.all
  end

  def show
  end

  def new
    @company = Company.new
  end

  def create
    @company = Company.create(company_params)
    authorize! :create, @company
    @company.save
    respond_with(@company)
  end

  def edit
  end

  def update
    authorize! :update, @company
    @company.update_attributes(company_params)
    respond_with(@company)
  end

  def destroy
    if @company.destroy
      redirect_to root_url(subdomain: false)
    else
      redirect_to @company
    end
  end

  #######
  private
  #######

  def set_company
    @company = Company.find(params[:id])
  end

  def company_params
    params.require(:company).permit(:name)
  end

end 
```

# css - .EOT 字体在 IE8 及以下版本中不显示

> ID：13481904
> 
> 赞同：0
> 
> 时间：2012-11-20T20:50:54.163
> 
> 标签：css, internet-explorer, fonts, font-face

这让我发疯了一个多星期，所以我会很感激任何帮助。

我试图将自定义字体导入我的网页。我已经做了一千次了，但这次我没有让它在 IE 8 及更低版本中工作。

我的CSS代码是：

```
<style>
@font-face {
    font-family: 'Bello-Script';
    src: url('fonts/Bello-Script.eot?');
    src: url('fonts/Bello-Script.eot?#iefix') format('embedded-opentype'),
         url('fonts/Bello-Script.woff') format('woff'),
         url('fonts/Bello-Script.ttf') format('truetype'), 
         url('../fonts/Bello-Script.svg#Bello-Script') format('svg');

    font-weight: normal;
    font-style: normal;
}
</style> 
```

HTML 代码：

```
<div style="font-family:'Bello-Script', Verdana">the quick brown fox jumps over the lazy dog</div> 
```

你可以在这里检查它的工作：[https ://metrikstudios.com/want/fbapp/font-test.php](https://metrikstudios.com/want/fbapp/font-test.php)

通常我通过 fontsquirrel 转换为 .EOT，但是这种字体被列入黑名单。我购买了完整的商业许可证，但他们没有出售.EOT。

所以我使用了我找到的所有转换器来创建.EOT，但是我无法在 IE8 中显示字体。因此，我猜测问题不在于 .EOT 文件，而是其他问题。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:33:48.343

刚刚解决了这个问题，希望对某人有所帮助：

这是 .eot 文件不起作用。您现在可以通过之前显示的链接检查它是否正常工作： [https ://metrikstudios.com/want/fbapp/font-test.php](https://metrikstudios.com/want/fbapp/font-test.php)

用微软纬纱制作了.eot，它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T22:22:13.267

如果该字体在 FontSquirrel 被列入黑名单，通常的原因是该字体的权利人不允许将其用作 Web 字体。如果您购买了允许此类使用的许可证，请联系供应商。如果没有，请不要使用它。许可证仅在明确说明或明确允许任何使用时才允许使用网络字体。IE 可能不允许使用 EOT 字体，因为它会检查使用权限。

# android - Android意图覆盖所有文本视图

> ID：13481905
> 
> 赞同：0
> 
> 时间：2012-11-20T20:50:57.720
> 
> 标签：android, android-intent

我的主要类是从三个子类接收数据。我正在使用意图传递来自不同活动的数据。但是，当我收到一个类的数据时，其他类的数据变成空白。我相信它正在这里发生。请给个提示？

```
Bundle extras = getIntent().getExtras();

    //textview
    textBoxes();

    if (extras != null) {
        String value = extras.getString("email");
        text_mail.setText(value);
    }

    if (extras != null) {
        String val = extras.getString("objet");
        text_objet.setText(val);
    }

    if (extras != null) {
        String valu = extras.getString("message");
        text_message.setText(valu);
    } 
```

我希望每个班级只更新相关的 ID。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T21:14:29.333

你不能那样做。您需要以一个意图发送所有数据。

您可以做的是重新考虑流程，并从您的主类中使用 [startActivityForResult](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)调用该树子类。

# asp.net - 如何确定上传的文件不是 ASP.net 中的病毒？

> ID：13481914
> 
> 赞同：2
> 
> 时间：2012-11-20T20:51:32.073
> 
> 标签：asp.net, security, file-upload, webforms

我看到了这个问题：

[ASP.NET 文件上传：如何确保上传的文件确实是 JPEG？](https://stackoverflow.com/questions/6527092/asp-net-file-upload-how-can-i-make-sure-that-an-uploaded-file-is-really-a-jpeg)

以及关于确定通过asp上传文件的类似问题：ASP.net中的FileUpload控件确实是图像。但是如果用户上传受病毒感染的图像怎么办？如何确保通过我的 ASP.net 应用程序上传的图像文件不会影响我的 Web 应用程序文件夹中的文件和/或其他用户上传的图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T21:02:03.257

只要您不将其作为图像（内容类型）以外的任何东西提供给任何人，并且从不尝试执行（.exe）文件，您就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T20:54:20.210

大多数防病毒软件运行所谓的“访问扫描”。也就是说，当文件更改时，它会自动扫描该文件。

因此，将该文件保存到文件系统，让服务器的防病毒软件为您完成工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T03:50:05.240

我将采取可能有点争议的立场。

没有办法 100% 确定文件的意图是什么，是好是坏。是不可能的。AV 扫描仪可以为您提供一部分数据，但它们也不能为您提供 100% 的保证。没有人可以。

鉴于这一现实，您需要假设上传的所有文件都是错误的，从而构建您的应用程序。是的，扫描仍然很好，并且会过滤掉一堆东西。但它永远不会是 100%。是 99.999% 还是 20%？谁知道。真的有关系吗？

假设所有用户提供的内容都不好，我今天会构建任何应用程序。很坏。敌对的坏。因为最终它会是如果你做到了。如果是这样，您将为他们做好准备......而不是所有必须重新构建他们的应用程序的人，因为他们在早期做出了错误的假设。

有了更多关于您确切担忧的数据，我很乐意更具体地评论它们......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-10T11:06:46.203

附带说明一下，在旧版本中，使用原始文件名保存文件后`IIS (6 or prior versions)`，可能会更改`FileName`为真正的恶意文件名。**有可能被服务器定期读取和执行**。
EG 将文件名设置为：`file.asp;.jpg`或`file.asp%00.jpg`等...
它还可以通过操作文件名来更改目标目录。**这是极其危险的**
EG`newfolder.asp::$Index_Allocation`等等......
还有一些新的攻击方式。 [在这里阅读](https://www.owasp.org/index.php/Unrestricted_File_Upload)更多。

# windows - 无需软件即可查找 windows 7 和 office 密钥

> ID：13481917
> 
> 赞同：1
> 
> 时间：2012-11-20T17:50:58.523
> 
> 标签：windows, license-key

我目前正在开发一个将审核计算机的应用程序，并且此应用程序必须实现的一件事是从 OEM windows 和零售办公室的安装中获取许可证密钥，以便为将来保留此信息目的，例如重新安装和从一台机器移动到另一台机器（这部分更多用于办公）。

这里的要求特别是不要使用任何已经找到密钥的应用程序，这对项目来说是一个很大的禁忌。

目标是对用户的 PC 进行全面审核：硬件信息、安装的软件、用户帐户名称、PC 名称、当前使用的域、工作组、使用的防病毒软件、正在运行的进程、启动进程和许可证密钥。而且它必须针对这个特定目的进行定制，因此零售应用程序是不可能的。

现在我非常有信心自己可以做任何事情。坦率地说，我已经做了 50%。我被卡住的地方是找到许可证密钥在 Windows 中的存储位置。我已经躲了一个星期了。互联网搜索只将我引向提供使用预制密钥查找器的简单和懒惰选项的站点。

最初我认为这些会以某种方式被隐藏在注册表中，但是对我自己的个人 Office 密钥的纯文本搜索返回了一个很大的结果。这让我想知道这些密钥是否存储在注册表中，它们可能以 HEX 形式存在吗？还是加密的？

或者如果没有，它们可以存储在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:58:54.037

字面上使用的密钥不存储在计算机上。

但是，注册表包含一个基于原始键的值。有一个[软件](http://www.magicaljellybean.com/keyfinder/)（你说它是“一个很大的不”），你可以用它来根据这些值计算原始密钥。

如果您想自己执行此操作，则可能需要查看 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\Current Version\DigitalProductId （对于 Windows）中的字节 34 到 42。Office 使用类似的东西。

# svn - 如何让 Subversion 在 Solaris10 CSW Apache2 中工作

> ID：13481920
> 
> 赞同：1
> 
> 时间：2012-11-20T20:51:43.260
> 
> 标签：svn, apache2

帮助我拉出我的头发，试图让这种组合发挥作用。我通过带有 subversion 的 CSW 包和所需的 CSWap2svn 包安装了 apache2。我已经确认`/opt/csw/apache2/sbin/apachectl -t -D DUMP_MODULES`加载了所需的模块。

```
 dav_module (shared)
 dav_fs_module (shared)
 dav_svn_module (shared)
 dav_lock_module (shared)
 authz_svn_module (shared) 
```

我已经修改了我的 httpd.conf 环境（实际上是 httpd-vhosts.conf）并在主机本地主机 vhost 部分添加了所需的 /location 指令（我有多个 vhost）。

```
<VirtualHost *:80>
   DocumentRoot "/var/opt/webstack/apache2/2.2/htdocs/"
   ServerName qmysql1v
   Errorlog "/var/opt/webstack/apache2/2.2/logs/catchall-error_log"
   customLog "/var/opt/webstack/apache2/2.2/logs/catchall-access_log" common
   <IfModule dav_svn_module>
      <Location /subversion>
         DAV svn
         SVNPath /var/opt/webstack/subversion/repository
         AuthType Basic
         AuthName "ITD Repository"
         AuthUserFile /var/opt/webstack/subversion/repository/conf/svn-auth-file
         Require valid-user
      </Location>
   </IfModule>
</VirtualHost> 
```

存储库目录是通过以下方式创建的`svnadmin create -fs-type fsfs /var/opt/webstack/subversion/repository`：

```
@QMYSQL1V# ls /var/opt/webstack/subversion/repository
conf db 格式 hooks 锁 README.txt

```

一切都设置好了，但是什么时候去我的浏览器到 url`http://qmysql1v/subversion`我什么也没得到。（网址是我网络的本地网址，无需尝试使用它）

日志文件显示：

> [2012 年 11 月 20 日星期二 20:33:10] [错误] [客户端 172.18.10.14] 文件不存在：/var/opt/webstack/apache2/2.2/htdocs/subversion

请记住，从我读过的内容来看，存储库不需要位于 vhost/apache2 服务器的文档根目录中。帮助！

# c# - 使用 Reflection.Emit 创建一个方法，然后调用它

> ID：13481921
> 
> 赞同：3
> 
> 时间：2012-11-20T20:51:46.733
> 
> 标签：c#, .net, dynamic, reflection, reflection.emit

这听起来很明显，但我遇到了很多困难。基本上，我正在做的是使用 Reflection.Emit 生成一个方法，然后我想调用它。到目前为止，我有方法构建等，但是在构建方法之后我无法获得对该方法的引用，因为“在创建类型之前不支持调用的成员。”

这是我基本上做的事情：

```
AssemblyBuilder assembly;
ModuleBuilder module;
TypeBuilder containerTypeBuilder;
Type containerType;
var name = new AssemblyName();
name.Name = "DynamicWrapper";
var domain = Thread.GetDomain();
assembly = domain.DefineDynamicAssembly(name, AssemblyBuilderAccess.RunAndSave);
module = assembly.DefineDynamicModule(assembly.GetName().Name, false);
containerTypeBuilder = module.DefineType("__DynamicWrapperType",
                              TypeAttributes.Public | TypeAttributes.Class |
                              TypeAttributes.AutoClass |
                              TypeAttributes.AnsiClass | TypeAttributes.BeforeFieldInit |
                              TypeAttributes.AutoLayout, typeof(object));
//build method
var mb = containerTypeBuilder.DefineMethod("generatedmethod" + (unique++),
                              MethodAttributes.Public | MethodAttributes.Static, typeof (int),
                              new Type[] {});
//build method body and all that
.....
var type=module.GetType("__DynamicWrapperType");
var info=type.GetMethod(mb.Name, BindingFlags.Static | BindingFlags.Public); //error here 
```

如何获取新构建的方法并加载它以便我可以调用它？

另外，我试过`mb.Invoke`了，但这会产生“动态模块不支持调用的成员”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T21:02:11.410

如果您正在创建单个方法，那么`DynamicMethod`这是一个更好的选择（特别是因为您的方法是静态的） - 您只需使用`CreateDelegate`（指定委托类型），*转换*为该委托，然后调用。它的开销也更少，并且具有收藏价值。

但是如果你被迫使用`MethodBuilder`: 你必须`CreateType`在 上使用，然后在现在*的真实*类型`TypeBuilder`上使用反射（从返回）。*`CreateType`*

# ruby-on-rails - Rails 页面加载时的默认参数

> ID：13481933
> 
> 赞同：1
> 
> 时间：2012-11-20T20:52:38.190
> 
> 标签：ruby-on-rails, ruby

我有一个页面，我想显示给定一周数据库中的所有条目。数据库中的每个条目都有一个 :entrydate 字段，其中包含条目的日期。

在 /config/routes.rb 中：

```
match "reports/*date" => "reports#index", :defaults => { :date => DateTime.now.strftime('%m/%d/%Y') } 
```

在 /app/controllers/reports_controller.rb 中：

```
def index
  @reports = Report.where(:entrydate => Date.strptime(params[:date], '%m/%d/%Y').beginning_of_week..Date.strptime(params[:date], '%m/%d/%Y').end_of_week)

  respond_to do |format|
    format.html # index.html.erb
    format.json { render :json => @reports }
    format.js
  end
end 
```

但是，当我尝试运行页面 localhost:3000/reports 时，出现错误：

```
can't dup NilClass
/app/jruby-1.6.5.1/lib/ruby/1.8/date/format.rb:599:in `_strptime'
/app/jruby-1.6.5.1/lib/ruby/1.8/date.rb:979:in `strptime'
app/controllers/reports_controller.rb:7:in `index' 
```

如果我输入诸如 localhost:3000/reports/10/29/2012 之类的日期，它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T21:08:57.397

似乎您的默认值没有正确设置。也许这是因为它不是一个常数？

无论如何，您可能不想像这样设置默认值，因为您对何时设置默认值的控制较少。

我认为这样的方法会更好：

```
def index
  my_date = params[:date] || DateTime.now.strftime('%m/%d/%Y')
  @reports = Report.where(:entrydate => Date.strptime(my_date, '%m/%d/%Y').beginning_of_week..Date.strptime(my_date, '%m/%d/%Y').end_of_week) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T21:07:42.460

看起来您的变量可能在路由和控制器之间丢失了。也许尝试在控制器本身内声明一个默认日期？

```
def index
params[:date].blank? ? date = DateTime.now.strftime('%m/%d/%Y') : date = params[:date] 
  @reports = Report.where(:entrydate => Date.strptime(date, '%m/%d/%Y').beginning_of_week..Date.strptime(date, '%m/%d/%Y').end_of_week)

  respond_to do |format|
    format.html # index.html.erb
    format.json { render :json => @reports }
    format.js
  end
end 
```

# eclipse - 无法使用 EGit 和 Bitbucket 推送

> ID：13481935
> 
> 赞同：11
> 
> 时间：2012-11-20T20:52:41.587
> 
> 标签：eclipse, git, ubuntu, bitbucket, egit

我一直在尝试使用 EGit 和 Bitbucket 启动一个项目，但我无法将项目推送到服务器中的存储库。

这些是我遵循的步骤（我将尝试非常具体，以便其他人可以将其用作教程模式；即使它不适合我，它也可能适用于其他人）：

[1) 我使用本教程](https://confluence.atlassian.com/pages/viewpage.action?pageId=269982882)在 Ubuntu 12.10 上安装了 Git

2) 遵循GitHub 的[本教程](http://www.vogella.com/articles/EGit/article.html)。

*   在 Eclipse 中启动一个新的 C++ 项目
*   在 Window > Preferences > General > Network Connection > SSH2 > Key Management 选项卡下，我生成了一个新的 RSA 密钥并将其添加到我在 Bitbucket 上的存储库的部署密钥列表中。
*   右键单击eclipse项目： Team > Share project ；团队 > 添加到索引；团队 > 提交
*   窗口 > 显示视图 > 其他 > Git > Git 存储库
*   右键单击遥控器>创建遥控器>选中“配置推送”并输入我的项目名称
*   添加 Push URL: `ssh://git@bitbucket.org/myuser/myrepository.git`, Protocol: ssh; 端口：空白；用户：git；密码：空白
*   参考映射下的高级按钮并选择“主”版本。如果此步骤有效，则表示在 Bitbucket 和 EGit 中正确配置了 RSA 密钥。否则会显示连接错误。

一切都完成了。但是，当我按“推送”时，出现以下错误：

```
ssh://git@bitbucket.org/myuser/myrepository.git: push not permitted 
```

我已经尝试了所有可能的配置：切换到新的工作空间、更新 Eclipse、创建新的存储库、重新安装 Git……有什么想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T16:30:14.007

好吧，我终于找到了一种使用它的方法。

它只是更改身份验证模式。如果使用 HTTPS 链接，而不是使用 SSH 链接，则一切正常。看来 SSH 只是在只读模式下工作。

![SSH/HTTPS 选择](../Images/041047d71021728f10d79cbea5444332.png)

当然，身份验证方法不同：您必须输入密码，并且不再需要存储在 Bitbucket 中的 SSH 密钥。

对于那些对 EGit 有疑问的人，我建议按照 eugener 的方式来自动配置 EGit。然后，您只需选择 HTTPS 作为身份验证模式即可推送存储的提交。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T04:01:36.143

在 Eclipse 中有**`much simpler way`**配置远程 Git 存储库：

1.  在 BitBicket 上创建一个空仓库
2.  复制 repo 的 URL
3.  使用“Git 存储库”视图将存储库克隆到您的计算机。
4.  将您的项目共享到新克隆的存储库中。

由于克隆了一个 repo - 远程设置是自动配置的。这意味着您将能够立即推送

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T22:46:17.283

这可能是[.gitconfig 中的用户名配置错误](http://dev.eclipse.org/mhonarc/lists/jgit-dev/msg01260.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T07:21:50.620

可能相关，我按照以下说明修复了“身份验证失败”问题： [http ://wangpidong.blogspot.com.es/2012/05/how-to-use-bitbucket-with-egit-in.html](http://wangpidong.blogspot.com.es/2012/05/how-to-use-bitbucket-with-egit-in.html)

来自： [使用 BitBucket 配置 egit](https://stackoverflow.com/questions/7906529/configuring-egit-with-bitbucket)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-06T21:36:40.957

在这种特定情况下，我同意[Olivier J.](https://stackoverflow.com/questions/13481935/cant-push-using-egit-and-bitbucket#comment22648284_13481935)在原始问题下的评论中的解决方案。

但我有类似的问题，这是由其他原因引起的。我解决了它，这就是发生的事情：

1.  我一直在 Bitbucket (A) 上使用一些**私有**存储库，其中包含一些用户帐户和一些公钥 (X) 来访问它。我的`pageant`Putty 钥匙链中已装入钥匙 X。

2.  然后我创建了一个新的*公共*存储库 (B)，也在 Bitbucket 中使用不同的用户帐户和另一个公钥 (Y)。我也添加了这个键`pageant`。

3.  当我尝试访问存储库 B 时，显然使用了公钥 X 而不是 Y，因为 ..对于 SSH 客户端，两个连接都是相同的 - 同一主机（bitbucket.org）上的同一用户（git）！并且首先使用键 X 是因为 ..它是更早加载的？或者可能是因为它的名字按字母顺序排在第一位？我不确定，但结果是......

4.  *授予*B 使用 X 的只读访问权限，因为存储库是公共的，并且任何有效的 Bitbucket 用户密钥都足以获得这种访问权限！

5.  ..但是写入（推送）需要密钥 Y，SSH 没有使用它。

所以一般提示是：**通过 SSH 访问错误解决奇怪的只读 git 仔细检查 SSH 实际使用的私钥**。

我通过一次只加载一个键 - X 或 Y - 解决了这个问题，`pageant`但我希望以更聪明的方式做到这一点 - 如果你知道怎么做，请在评论中告诉我！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-14T19:33:49.533

使用 Bitbucket 我这样做：

1.  在 bitbucket 中创建存储库
2.  使用 https url 克隆空存储库
3.  使用 Team -> Share 选项将 Eclipse 中的项目连接到存储库，然后选择克隆存储库的位置
4.  索引（阶段）您的项目文件
5.  提交和推送

# java - 呼叫超级需要 try/catch

> ID：13481943
> 
> 赞同：4
> 
> 时间：2012-11-20T20:53:01.507
> 
> 标签：java, inheritance, exception-handling

我正在做一个作业，我被告知我需要创建一个必须扩展给定类（称为 ClassA）的类（称为 ClassB）。唯一的问题是 ClassA 的构造函数内部的代码可能会抛出异常，所以当我为 ClassB 创建构造函数时，我试图在对 super() 的调用周围包装一个 try/catch 块，但当然，那不起作用，因为 super 必须是第一个电话。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T20:54:57.850

```
public ClassB extends ClassA {
    public ClassB() throws MyClassAException {
        super();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T20:55:47.833

您可以在子类构造函数的 throws 子句中添加异常：-

```
class ClassA {
    ClassA() throws Exception {

    }
}
public class Demo extends ClassA {
    Demo() throws Exception {
        super();
    }

    public static void main(String[] args) {
        try {
            Demo d = new Demo();   // Handle exception here.
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T21:03:44.677

`ClassB`应该有一个静态方法

```
public static ClassB makeClassB() {
    try {
        return new ClassB();
    }
    catch(Exception exc) {
        // whatever logic you are currently performing to swallow
        // presumably you have some default ClassB to return as part of this logic?
    } 
```

这将`ClassB`用 try/catch 包装结构。客户端代码将调用`makeClassB()`并且构造函数`ClassB`将被`private`抛出。

# java - 构建一个API蜘蛛，多少线程太多了？每秒请求的想法？

> ID：13481951
> 
> 赞同：0
> 
> 时间：2012-11-20T20:53:35.663
> 
> 标签：java, scala

我想构建一个基本上从各种 API 中提取数据的服务。

在典型的服务器上，是否也应该遵守线程限制？

有没有人有构建类似东西的经验，有多少线程被认为是理想的，每秒可以期待什么样的请求？

100个线程太多了吗？200？

我意识到这是我将不得不测试的东西，但要寻找在本质上构建了类似东西的人，可以在这方面积累一些经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:56:45.687

这取决于您的瓶颈和您的要求。您需要多快才能完成操作？线程做IO吗？我知道他们根据您的解释提出了很多网络请求。

所以线程将在网络上等待。那你为什么需要很多线程，也许异步操作会更快。

总的来说，正如罗伯特哈维评论的那样：我们需要更长的时间来回答你的问题，而不是你测试它并调整数字。线程数取决于您未指定的各种变量，因此任何答案都将是猜测

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:41:13.563

对于您的特定情况，它可能更适合使用异步编程风格。在这种情况下，您可以使用少量线程实现大量 API 调用吞吐量 - 它甚至可以与可用内核的数量相媲美。

有几个可用的库可以实现这一点（Twitter 是这里的王者）。

*   [Finagle](http://twitter.github.com/finagle/) - 通用，支持多种传输协议
*   [斯克罗吉](https://github.com/twitter/scrooge)- 只为节俭
*   [Async Http Client](https://github.com/AsyncHttpClient/async-http-client) - 面向 Java 的异步 http 客户端

还有很多其他的。

# ember.js - 设置 Ember.CollectionView 的选中项

> ID：13481957
> 
> 赞同：0
> 
> 时间：2012-11-20T20:54:12.213
> 
> 标签：ember.js

我有一个这样的集合视图（CoffeeScript）：

```
App.SearchSuggestionsList = Ember.CollectionView.extend
  tagName: 'ul'
  contentBinding: 'controller.controllers.searchSuggestionsController.content'
  itemViewClass: Ember.View.extend
    template: Ember.Handlebars.compile('{{view.content.title}}')
    isSelected: (->
      /* This is where I don't know what to do */
      this.index == controller's selected index 
    ).property('controller.controllers.searchSuggestionsController.selectedIndex')
  emptyView: Ember.View.extend
    template: Ember.Handlerbars.compile('<em>No results</em>') 
```

如您所见，isSelected 方法中有一些伪代码。我的目标是通过这个尚未实现的 isSelected 属性定义当前选定项的概念。这将允许我将条件 className 应用于当前选择的项目。

这是要走的路吗？如果是，那么这个 isSelected 方法怎么实现呢？如果不是，那么实现相同目标的另一种方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:15:51.410

我认为它通过不断变化的列表解决了您正在寻找的情况。

我们所做的与上面的解决方案类似，但 selected 标志是基于集合的控制器，而不是 selected 标志。这让我们可以通过点击、url、按键等更改“选定”部分，因为它只关心 itemController 中的内容。

所以 SearchListController 引用了项目和项目控制器（记得在路由器中调用 connectController）

```
App.SearchListController = Em.ObjectController.extend
  itemsController: null
  itemController: null

App.SearchListView = Em.View.extend
  templateName: "templates/search_list" 
```

各个项目需要自己的视图。如果它们的上下文（这是一个项目）与 itemController 中的项目匹配，则它们会被选为一个类。

```
App.SearchListItemView = Em.View.extend
  classNameBindings: ['selected']
  tagName: 'li'
  template: Ember.Handlebars.compile('<a {{action showItem this href="true" }}>{{name}}</a>')
  selected:(->
    true if @get('context.id') is @get('controller.itemController.id')
  ).property('controller.itemController.id') 
```

SearchList 模板然后只是循环遍历 itemsController 中的所有项目，因为它们是单个项目视图的上下文。

```
<ul>
  {{each itemsController itemViewClass="App.SearchListItemView"}}
</ul> 
```

这和你要找的很接近吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T22:31:04.093

执行此操作的简单（或最知名）方法是让您的子视图（导航栏项目）观察绑定到控制器的父视图（导航栏）中的“选定”属性，因此在您的路线中您告诉控制器选择了哪个项目。检查这个[**小提琴**](http://jsfiddle.net/schawaska/7Uk7J/)的全部内容。

例子：

导航栏的把手模板

```
<script type="text/x-handlebars" data-template-name="navbar">
    <ul class="nav nav-list">
        <li class="nav-header">MENU</li>
        {{#each item in controller}}            
            {{#view view.NavItemView 
                    itemBinding="item"}}
                <a {{action goto item target="view"}}>
                    <i {{bindAttr class="item.className"}}></i>
                    {{item.displayText}}
                </a>
            {{/view}}
        {{/each}}
    </ul>    
</script> 
```

您的导航栏控制器应该有一个“选定”属性，您还将在视图中绑定它

```
App.NavbarController = Em.ArrayController.extend({
    content: [
        App.NavModel.create({
            displayText: 'Home',
            className: 'icon-home',
            routeName: 'home',
            routePath: 'root.index.index'
        }),
        App.NavModel.create({
            displayText: 'Tasks',
            className: 'icon-list',
            routeName: 'tasks',
            routePath: 'root.index.tasks'
        })
    ], 
    selected: 'home'
}); 
```

然后你有一个与此类似的视图结构，其中子视图检查父视图“选定”是否与子视图具有相同的名称

```
App.NavbarView = Em.View.extend({
    controllerBinding: 'controller.controllers.navbarController',
    selectedBinding: 'controller.selected',
    templateName: 'navbar',
    NavItemView: Em.View.extend({
        tagName: 'li',
        // this will add the "active" css class to this particular child
        // view based on the result of "isActive"
        classNameBindings: 'isActive:active',
        isActive: function() {
            // the "routeName" comes from the nav item model, which I'm filling the 
            // controller's content with. The "item" is being bound through the
            // handlebars template above
            return this.get('item.routeName') === this.get('parentView.selected');
        }.property('item', 'parentView.selected'),
        goto: function(e) {
            App.router.transitionTo(this.get('item.routePath'), e.context.get('routeName'));
        }
    })
}); 
```

然后，您将其设置在您的路线中，如下所示：

```
App.Router = Em.Router.extend({
    enableLogging: true,
    location: 'hash',
    root: Em.Route.extend({
        index: Em.Route.extend({
            route: '/',
            connectOutlets: function(r, c) {
                r.get('applicationController').connectOutlet('navbar', 'navbar');
            },
            index: Em.Route.extend({
                route: '/',
                connectOutlets: function (r, c) {
                    // Here I tell my navigation controller which 
                    // item is selected
                    r.set('navbarController.selected', 'home');

                    r.get('applicationController').connectOutlet('home');
                }
            }),
            // other routes....
        })
    })
}) 
```

希望这可以帮助

# java - 有没有办法将任务放回执行程序队列

> ID：13481966
> 
> 赞同：7
> 
> 时间：2012-11-20T20:54:52.807
> 
> 标签：java, multithreading, concurrency, executorservice, executors

我有一系列任务（即`Runnable`s）要由`Executor`.
每个任务都需要一定的条件才能继续进行。我很想知道是否有办法以某种方式配置`Executor`以在队列末尾移动任务，并在条件有效并且任务能够执行和完成时尝试稍后执行它们。
所以行为类似于：

1.  `Thread-1`从队列中获取任务`run`并被调用
2.  内部`run`条件尚未生效
3.  任务停止并将`Thread-1`任务放在队列末尾并获取下一个要执行的任务
4.  稍后`Thread-X`（从线程池）再次从队列中选择任务条件有效并且正在执行任务

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T21:24:17.297

首先创建执行器。

你有几个可能性。

如果我假设您的任务实现了一个简单的接口来查询它们的状态（类似于带有“NeedReschedule”或“Completed”的枚举），那么`Runnable`为您的任务实现一个包装器（实现），它将任务和执行器作为实例化参数. 这个包装器将运行它所绑定的任务，然后检查它的状态，如果有必要，在终止之前在执行器中重新安排它自己的副本。

或者，您可以使用 execption 机制向包装器发出必须重新安排任务的信号。这个解决方案更简单，因为它不需要为您的任务提供特定的界面，因此`Runnable`可以毫无问题地在系统中投入简单。但是，异常会产生更多的计算时间（对象构造、堆栈跟踪等）。

这是使用异常信号机制的包装器的可能实现。您需要实现`RescheduleException`类扩展`Throwable`，它可能由包装的可运行文件触发（此设置中的任务不需要更具体的接口）。您也可以使用`RuntimeException`另一个答案中建议的简单方法，但您必须测试消息字符串以了解这是否是您正在等待的异常。

```
 public class TaskWrapper implements Runnable {

    private final ExecutorService executor;
    private final Runnable task;       

    public TaskWrapper(ExecutorService e, Runnable t){
         executor = e;
         task = t;
    }

@Override
public void run() {

    try {
               task.run();
    } 
    catch (RescheduleException e) {
        executor.execute(this);
    }
} 
```

这是一个非常简单的应用程序，随机启动 200 个包装任务，要求重新安排。

```
class Task implements Runnable {

  @Override
  public void run(){
     if (Maths.random() > 0.5)
      throw new RescheduleException();
   }     
}

public class Main {

public static void main(String[] args){

    ExecutorService executor = Executors.newFixedThreadPool(10);

    int i = 200;
            while(i--)
       executor.execute(new TaskWrapper(executor, new Task());
}
} 
```

您还可以有一个专用线程来监视其他线程的结果（使用消息队列）并在必要时重新安排，但与其他解决方案相比，您会丢失一个线程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T21:24:38.417

在 Java 6 中，`ThreadPoolExecutor`构造函数采用 a `BlockingQueue<Runnable>`，用于存储排队的任务。您可以实现这样一个阻塞队列，它会覆盖，`poll()`以便如果尝试删除并执行“就绪”作业，则`poll`可以正常进行。否则，runnable 将放在队列的后面，您可能会在短暂的超时后再次尝试轮询。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-20T21:41:42.807

除非您必须忙于等待，否则您可以使用适当的轮询间隔将重复任务添加到 ScheduledExecutorService，您可以在“有效”运行后取消或终止该轮询间隔。

```
ScheduleExecutorService ses = ...

ses.scheduleAtFixedRate(new Runnable() {
    public void run() {
        if (!isValid()) return;
        preformTask();
        throw new RuntimeException("Last run");
    }
}, PERIOD, PERIOD, TimeUnit.MILLI_SECONDS); 
```

# sqlite - sqlite3 新手，如何在 .db3 文件上执行 .sql 代码？

> ID：13481967
> 
> 赞同：1
> 
> 时间：2012-11-20T20:54:51.553
> 
> 标签：sqlite

非常基本的问题，很难在网上找到解释。

我有一个文件 code.sql 可以在两个不同的数据库 a.db3 和 b.db3 上运行。我使用 sqlite a.db3 在 sqlite3 中打开数据库。如何在其上运行 code.sql？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T21:31:13.580

使用`.read code.sql`命令，或`sqlite3`使用文件作为输入调用：`sqlite3 a.db3 < code.sql`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T21:31:42.023

我猜您正在尝试使用可以从 sqlite.org 网站下载的 sqlite3 命令行工具。

我建议您改用 sqlitestudio [http://sqlitestudio.one.pl](http://sqlitestudio.one.pl)

它具有从数据库上的文件执行 SQL的[功能：](http://sqlitestudio.one.pl/docs/html/manual.html#__RefHeading__2285_346829139)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-16T15:35:33.490

Use DB Browser for SQLite 是一个高质量、可视化的开源工具，用于创建、设计和编辑与 SQLite 兼容的数据库文件。

您可以在 SQLite [https://sqlitebrowser.org/下载数据库浏览器](https://sqlitebrowser.org/)

# javascript - 有什么方法可以可靠地压缩短字符串？

> ID：13481970
> 
> 赞同：7
> 
> 时间：2012-11-20T20:54:56.810
> 
> 标签：javascript, string, encoding, compression, query-string

我有一个正好 53 个字符长的字符串，其中包含一组有限的可能字符。

```
[A-Za-z0-9\.\-~_+]{53} 
```

我需要在不丢失信息并使用相同字符集的情况下将其减少到 50。

我认为应该可以将大多数字符串压缩到 50 长度，但是所有可能长度为 53 的字符串都可以吗？我们知道，在最坏的情况下，可能集合中的 14 个字符将未被使用。我们可以使用这些信息吗？

谢谢阅读。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-20T21:41:39.060

如果，如您所说，您的输出字符串必须使用与输入字符串相同的字符集，并且如果您对输入字符串的要求一无所知，那么不，不可能压缩所有可能的 53 - 最多 50 个字符的字符串。这是[鸽巢原理](http://en.wikipedia.org/wiki/Pigeonhole_principle)的简单应用。

*   您的输入字符串可以表示为以67 为[基数](http://en.wikipedia.org/wiki/Number_base)的 53 位数字，即从 0 到 67 ^(53) - 1 ≅ 6*10 ^(96)的整数。
*   您想将这些数字映射到 0 到 67 ^(50) - 1 ≅ 2*10 ^(91)之间的整数。
*   So by the pigeonhole principle, you're guaranteed that 67³ = 300,763 different inputs will map to each possible output -- which means that, when you go to decompress, you have no way to know which of those 300,763 originals you're supposed to map back to.

To make this work, you have to change your requirements. You could use a larger set of characters to encode the output (you could get it down to 50 characters if each one had 87 possible values, instead of the 67 in the input). Or you could identify redundancy in the input -- perhaps the first character can only be a '3' or a '5', the nineteenth and twentieth are a state abbreviation that can only have 62 different possible values, that sort of thing.

If you can't do either of those things, you'll have to use a compression algorithm, like Huffman coding, and accept the fact that some strings will be compressible (and get shorter) and others will not (and will get *longer*).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-20T21:16:55.473

你问的问题在最一般的情况下是不可能的，这可以很简单地证明。

假设可以在同一组中将任意 53 个字符的字符串编码为 50 个字符。这样做，然后将三个随机字符添加到编码字符串中。然后你有另一个任意的 53 个字符的字符串。你如何压缩它？

因此，不能保证您想要的内容适用于任何可能的数据。但是，您的所有*真实*数据可能具有足够低的熵，您可以设计一个可行的方案。

在这种情况下，您可能想要做一些霍夫曼编码的变体，它基本上为您集中的字符分配可变位长度编码，对最常用的字符使用最短的编码。您可以分析所有数据以得出一组编码。在霍夫曼编码之后，您的字符串将是一个（希望更短的）比特流，您将其编码为每个字符 6 位的字符集。对于您的所有真实数据，它可能足够短。

像 Smaz （在另一个答案中引用）这样的基于库的编码也可以工作。同样，无法保证它适用于所有可能的数据。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-20T21:34:09.747

一个字节（字符）可以编码 256 个值（0-255），但您的有效字符集仅使用 67 个值，可以用 7 位表示（唉，6 位只能得到 64）并且您的字符都没有使用高位字节的位。

鉴于此，您可以丢弃高位并仅存储 7 位，将下一个字符的初始位运行到第一个字符的“备用”空间中。这将只需要 47 个字节的空间来存储。（53 x 7 = 371 位，371 / 8 = 46.4 == 47）

这并不是真正考虑的*压缩*，而是*编码*的变化。

例如“ABC”是 0x41 0x42 0x43

```
 0x41        0x42        0x43  // hex values
0100 0001   0100 0010   0100 0011  // binary
 100 0001    100 0010    100 0011  // drop high bit
// run it all together
100000110000101000011
// split as 8 bits (and pad to 8)
10000011   00001010   00011[000]
    0x83       0x0A        0x18 
```

例如，这 3 个字符不会节省任何空间，但您的 53 个字符将*始终*显示为 47 个，保证。

但是请注意，如果这对您很重要，输出将不会使用您的原始字符集。

过程变为：

```
original-text --> encode --> store output-text (in database?)
retrieve --> decode --> original-text restored 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-20T21:01:57.790

如果我没记错的话，[霍夫曼编码](http://en.wikipedia.org/wiki/Huffman_coding)将是存储数据的最紧凑的方式。我用它来快速编写算法已经太久了，但[这里](http://en.wikipedia.org/wiki/Huffman_coding#Compression)介绍了大致的想法，但如果我没记错的话，你所做的是：

1.  获取使用的每个字符的计数
2.  根据它们发生的频率对它们进行优先级排序
3.  根据优先级构建树
4.  通过遍历树得到每个字符的压缩位表示（从根开始，left = 0 right = 1）
5.  用树中的位替换每个字符

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-20T20:59:20.477

[Smaz](https://github.com/antirez/smaz)是一个简单的压缩库，适用于压缩非常短的字符串。

# android - Android异步对话框导致问题？

> ID：13481972
> 
> 赞同：0
> 
> 时间：2012-11-20T20:54:59.503
> 
> 标签：android

我很清楚 Android 以异步方式管理其对话框，以提高性能、内存改进等。但问题是我遇到了一个简单的情况，我需要获取用户给出的输入以便执行应用程序。因为我使用的是对话框，所以这一切都搞砸了，导致应用程序的流程继续用户是否在我的提示对话框中写了一些东西。有什么办法解决这个吗？？？

这是代码：

```
@Override 
public boolean onOptionsItemSelected(MenuItem item)
{
    switch (item.getItemId())
    {
    case 1:
        startActivity(new Intent("HOMESCREEN"));
        break;
    case 2:
        String searched = prompt("Search", HomeScreen.this);
        Intent data = new Intent("RESULTSSCREEN");
        data.putExtra("SearchCriteria", "");
        startActivity(data);
        break;
    case 3:
        //....
        break;
    }

    return true;
} 
```

这是提示的代码：

```
public String prompt(String message, Context ctx)
    {
        //load some kind of a view
        LayoutInflater li = LayoutInflater.from(ctx);
        View view = li.inflate(R.layout.prompt_layout, null);
        //get a builder and set the view
        AlertDialog.Builder builder = new AlertDialog.Builder(ctx);
        builder.setTitle("Search");
        builder.setView(view);
        //add buttons and listener
        PromptListener pl = new PromptListener(view);
        builder.setPositiveButton("OK", pl);
        builder.setNegativeButton("Cancel", pl);
        //get the dialog
        AlertDialog ad = builder.create();
        //show
        ad.show();

        return pl.getPromptReply();
    } 
```

问题是意图数据在用户完成编写搜索条件之前执行。问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T21:04:56.557

不要使用 Android 对话框。而是在清单中创建一个新活动，该活动就像一个对话框一样

```
android:name="com.namespace.DialogActivity"
android:theme="@android:style/Theme.Dialog" 
```

然后，您将使用主要活动中的 startActivityForResult(intent)。[您可以使用onActivityResult](http://developer.android.com/reference/android/app/Activity.html#StartingActivities)捕获结果

我在尝试这样做时遇到了同样的问题，相信我这就是你要找的。它为您自定义对话框提供了更大的灵活性，并允许捕获结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T21:12:28.930

与其在 Prompt 中创建 PromptListener 的实例并让它返回一个字符串，不如将 PromptListener 的一个实例传递给 Prompt 并在 PromptListener 中定义一个可以传递新文本值的方法。像这样的东西：

```
@Override 
public boolean onOptionsItemSelected(MenuItem item)
{
    switch (item.getItemId())
    {
    case 1:
        startActivity(new Intent("HOMESCREEN"));
        break;
    case 2:
        prompt("Search", HomeScreen.this, new PromptListener(){
            @Override
            public void TheTextIsReady(String text){
                Intent data = new Intent("RESULTSSCREEN");
                data.putExtra("SearchCriteria", text);
                startActivity(data);
            }
        });
        break;
    case 3:
        //....
        break;
    }

    return true;
} 
```

*注意，您没有发布 PromptListener 的代码，所以在这种情况下，“TheTextIsReady(...)”只是我编造的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T21:47:14.123

您可以坚持使用 AlertDialog，但您需要以不同的方式设置正面和负面按钮（例如，检查[此按钮）：](http://www.androidsnippets.com/prompt-user-input-with-an-alertdialog)

```
final EditText input = new EditText(this);
alert.setView(input);

alert.setPositiveButton("OK", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
      String value = input.getText();
      // Do something with value!
    }
}); 
```

# cython - @cython.wraparound(False) 转换整数核心生成错误

> ID：13481973
> 
> 赞同：1
> 
> 时间：2012-11-20T20:55:05.783
> 
> 标签：cython

在我的代码编译时在 cython 中

```
@cython.wraparound(True) 
```

我使用以下转换函数将浮点数转换（转换）为整数

```
cdef DTYPE_t_I float_int(np.float_t val):
    return <DTYPE_t_I>val 
```

它运行正常

但

当我关掉

```
@cython.wraparound(False) 
```

代码编译正常，运行时出现以下错误

```
CORE GENERATED 
```

它发生在使用 gcc 的 linux 和使用 MGS 的 windows 中编译

怎么了？应该是这样吗？

因为我想提高速度，所以我想知道关闭这些标志。

# mysql - InnoDB 在大选择上与 MyISAM 相比有多慢

> ID：13481981
> 
> 赞同：1
> 
> 时间：2012-11-20T20:55:38.770
> 
> 标签：mysql, innodb, myisam

我对 InnoDB 和 MyISAM 进行了很多搜索，我想我现在了解了它们的优缺点。但我正在寻找有关 InnoDB 的特定缺点的更多详细信息。我读过这对于有大量写入和更新的表来说非常有用，但在大表上选择速度较慢（我的表将是 +-10 百万）。

考虑到我的表将处理大量写入和更新（+-100/秒），但选择的发生频率较低（每天最多只有 500 次），总是由`parent_id`行选择。我在问自己；

InnoDB 在大表上有多慢？我还能期待在精选上的出色表现吗？

我找不到任何适合我的问题的基准。感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T21:10:21.830

我在任何地方都没有看到 InnoDB 在大选择时速度较慢，但​​我想这是可能的，因为这不是最高优先级。

尽管如此，既然您说您的系统将是大量写入，很明显 MyISAM 会在那里受到严重影响，因为它只能同时执行多个读取器或每个表的单个写入器。另一方面，InnoDB 管理行级锁，即使这样，它也允许多个读取器读取之前的版本`COMMIT`，它会原子地替换新版本的数据。

一个相关的问题是 ACID 合规性。没有这些，你真的有可能把你的数据变成一个无可救药的不一致的混乱；特别是大桌子和大量更新。

最后，即使您可以通过某种方式管理 MyISAM，使其性能优于 InnoDB，但这并不意味着 InnoDB 完全不合适。在极端情况下，您只需将几个 SSD 放入 RAID1，它就会愉快地处理每秒数千次更新。

# .net - 从组合查询返回字典

> ID：13481982
> 
> 赞同：0
> 
> 时间：2012-11-20T20:55:42.997
> 
> 标签：.net, entity-framework-4, group-by

我的 SQL Anywhere 12.0.1 数据库中有一个表：

```
CREATE TABLE Entries (
    ListId        UNIQUEIDENTIFIER NOT NULL,
    . . .
); 
```

我需要查询表以获取表中具有相同 ListID 的行数。在 SQL 中：

```
SELECT ListID, COUNT(*)
FROM Entries
GROUP BY ListId; 
```

我想使用 Entity Framework 4.x 执行这个查询，并且我想将结果作为`Dictionary<Guid, long>`. 像这样的东西：

```
public Dictionary<Guid, long> GetRowCounts( MyEntities context ) {
    Dictionary<Guid, long> result = null;
    try {
        result = ( from entry in Entries
                   group entry by entry.ListId into listGroup
                   select listGroup ).ToDictionary( grp => grp.Key, ???? );

    } catch ( Exception ex ) {
        . . .
    }
    return result;
} 
```

请记住，我想要返回每个唯一 ListId 的行数。我用什么代替“？？？”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T20:58:37.023

好吧，看看你写的：

> 记住，我想要行**数**

（强调我的）。所以你需要：

```
ToDictionary(grp => grp.Key, grp => grp.Count()) 
```

我个人会写这样的方法：

```
public Dictionary<Guid, int> GetRowCounts(MyEntities context) {
    return context.Entries
                  .GroupBy(entry => entry.ListId)
                  .ToDictionary(g => g.Key, g => g.Count());
} 
```

...或者如果您仍然希望它是 a `Dictionary<Guid, long>`、 use`g => g.LongCount()`或只是强制转换：

```
.ToDictionary(g => g.Key, g => (long) g.Count()) 
```

你几乎*肯定*不想要 try/catch 块，直接返回要简单得多。同样，除非您正在编写一个中等复杂的查询，否则使用查询表达式确实没有任何好处。学习直接使用扩展方法，以便为每个查询编写最简单的代码。

# c++ - 在没有初始化列表的情况下，在 C++ 的头文件中为 const int 赋值

> ID：13481984
> 
> 赞同：0
> 
> 时间：2012-11-20T20:55:53.983
> 
> 标签：c++, header, integer, constants, initialization-list

我有 17 个整数常量，我想在我的课堂上作为私有常量。真的有必要使用初始化列表吗？

我在某处读到我可以为头文件中的常量赋值，但它似乎不起作用。我收到此错误消息：

```
sorry, unimplemented: non-static data member initializers 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T21:48:55.537

> 真的有必要使用初始化列表吗？

在现代（2011 年）C++ 中，没有。在旧版本的语言中，是的。

您的错误消息很抱歉您的编译器尚不支持非静态成员的新初始化语法。假设您使用的是 GCC（因为我从该编译器中识别出该错误），那么根据[此页面](http://wiki.apache.org/stdcxx/C%2B%2B0xCompilerSupport)，您需要将该功能至少升级到 4.7 版本。

或者，由于它们是私有且恒定的，您可以考虑将它们从类中移出到类的实现文件中的本地命名空间中。当然，这仅在您不需要从任何内联成员函数访问它们时才有效。

最后，如果它们对于类的所有实例具有相同的值（这很可能，因为它们是`const`并且您可以独立于构造函数参数来初始化它们），您可以声明它们`static`。然后可以在它们的声明中初始化它们（尽管旧的编译器可能只允许它们具有整数类型）。但是，如果它们是*odr-used*（粗略地说，如果您需要对它们进行指针或引用），那么它们也需要在一个源文件中定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T21:21:01.537

。H：

```
class MyClass {
    public:
        MyClass();
        ~MyClass();

        int doSomething();

    private:
        const int m_newint = 1;
        const int m_dosomething = 2;
}; 
```

.cc：

```
MyClass::MyClass() {}
MyClass::~MyClass() {}

int MyClass::doSomething() {
    return m_dosomething;
} 
```

是有效的 C++11 代码，请确保您的编译器设置`-std=c++11`为使用该功能。

# html - 文本字段标记占位符作为值返回

> ID：13481986
> 
> 赞同：18
> 
> 时间：2012-11-20T20:56:01.063
> 
> 标签：html, css, ruby-on-rails, ruby-on-rails-3, placeholder

我有一个表格，表格里面有一个 text_field_tag。是这样写的...

```
<%= text_field_tag "search",  :placeholder => 'Enter search term...' %> 
```

但是，当生成 HTML 时，它会在页面源中返回...

```
<input id="search" name="search" type="text" value="{:placeholder=&gt;&quot;Enter search 
term...&quot;}" /> 
```

为什么要这样做，我该如何修复它以使占位符起作用？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-20T20:59:04.737

text_field_tag 的第二个参数是值。给它 nil 让它为空：

```
<%= text_field_tag "search", nil, :placeholder => 'Enter search term...' %> 
```

并给它一个字符串以具有默认值：

```
<%= text_field_tag "search", 'Enter search term...' %> 
```

添加一个 onclick 事件以使用 jQuery 清空它：

```
<%= text_field_tag "search", 'Enter search term...', :onclick => 'if($(this).val()=="Enter search term..."){$(this).val("");};' %> 
```

# 2016年编辑：

如今，大多数浏览器现在都支持[HTML 5`placeholder`](http://www.w3schools.com/tags/att_input_placeholder.asp)，这使我们能够以更简洁的方式做到这一点：

```
<%= text_field_tag 'search', nil, placeholder: 'Enter search term' %>
# which produces the following HTML:
<input type="text" value="" placeholder="Enter search term"> 
```

[jsFiddle 链接](https://jsfiddle.net/wzxwjgdt/1/)

# sitecore - Sitecore 断开的链接和内容编辑器问题

> ID：13481988
> 
> 赞同：0
> 
> 时间：2012-11-20T20:56:12.410
> 
> 标签：sitecore, sitecore6

我们注意到我们的 sitecore 网站上的断开链接数量有所增加。

有些是由于

1.  用户培训
2.  发布问题（链接页面尚未发布）
3.  也许是内容编辑器问题

很难验证其中一些，但有时链接可能有创作页面 URL（这意味着有人没有遵循 SOP），有时他们有一个奇怪的 URL，比如 /shell/Content Editor/...

因此，我们正试图在页面上线之前主动修复这些问题。

我有几个想法，比如编写一个处理程序来查看所有“富文本字段”并寻找不一致的地方（比如创作服务器 URL）。使用爬虫类型的验证器也可以帮助我们（http://home.snafu.de/tilman/xenulink.html#Description），但我们想知道社区正在做什么来解决这个问题。

“内部链接检查器”通常运行良好，但不会检测到许多这种错误设置（因为我相信它会将它们视为“外部链接”）。

非常感谢您的意见！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T20:51:11.680

如果您有 RichText 字段并创建内部链接，则您的内部链接在 HTML 视图中如下所示：“a href="~/link.aspx?_id=EB3AD128E7BF4F3C9F3812F701D7724E&_z=z" 当您将鼠标悬停在它上面时，会显示~/link.aspx 之前的“/Sitecore/Shell/Controls/Rich Text Editor/”。这是正常行为。在 RTE 字段的呈现过程中，此链接被修改为正常链接。

但是，请务必使用 Sitecore 控件来呈现这些 RTE 字段并呈现链接。此外，在 XSLT 中使用 sc:fld() 而不是 sc:field() 会创建奇怪的链接，因为 sc:fld 正在呈现字段的原始值。

在我从事的所有 Sitecore 项目中，我没有遇到太多链接断开的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T10:13:12.813

There is a known bug with copy-pasting links from a rich text editor, where path info is appended to the link (generating the /shell/Content Editor/ stuff). Sitecore have a fix for it here:

[http://sdn.sitecore.net/Products/Sitecore%20V5/Sitecore%20CMS%206/ReleaseNotes/KnownIssues%20Recommended/Copying%20and%20pasting%20link%20in%20rt%20fields%20may%20break%20the%20link.aspx](http://sdn.sitecore.net/Products/Sitecore%20V5/Sitecore%20CMS%206/ReleaseNotes/KnownIssues%20Recommended/Copying%20and%20pasting%20link%20in%20rt%20fields%20may%20break%20the%20link.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T21:35:05.510

我建议在项目完成之前将新的验证操作添加到工作流命令中。然后您可以积极阻止它们被发布并立即提供反馈。如果您不使用工作流，您可以添加一个新的项目级别验证器，但根据我的经验，这些通常会被忽略——现有验证器上的误报太多。

# php - codeigniter 中的未定义索引错误

> ID：13481989
> 
> 赞同：3
> 
> 时间：2012-11-20T20:56:16.900
> 
> 标签：php, codeigniter

只是为了一些背景，我正在使用带有模板火花的 codeigniter。

所以在我的控制器中我有以下功能

```
public function information()
{     
$this->load->library('session');
$developer_id = $this->session->userdata('developer_id');
$this->load->model("Developer_model");
$information = $this->Developer_model->get_developer($developer_id);
$this->template->set('information', (array) $information); 
$this->template->build('dashboard/information'); 
} 
```

在我看来，我是这样呼应的

```
<?php echo $information['email']; ?> 
```

出于某种原因，我回来了“消息：未定义的索引：电子邮件”

这是我的第一个问题，所以希望我不会不清楚，但基本上我是从我的数据库中获取 $ 信息并试图回显电子邮件，这只是一系列项目中的一个。

当我 var_dump $information 我得到以下信息：

```
object(stdClass)#21 (2) { ["timestamp"]=> int(1353444880991) ["result"]=> object(stdClass)#22 (3) { ["email"]=> string(21) "anothertest@gmail.com" ["api_key"]=> string(64) "de0f57acfc018882841b3255e89da11cb238160e84a66fe5b45bda8c51137c72" } } 
```

在此先感谢您的帮助，在此之前仅使用 codeigniter 2 个月，除了一些非常小的 html 废话之外，我实际上没有进行任何编码。所以请放轻松我 =D

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T21:00:36.320

如果您查看您的 vardump，您的信息类中有第二类“结果”。试试 $information["result"]["email"];

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T21:19:43.927

在您的模型中返回响应->结果；而不是回应。然后你可以使用 ... $information['email']; ...应该管用

# angularjs - 删除 DOM 元素是否会删除关联的范围？

> ID：13481992
> 
> 赞同：10
> 
> 时间：2012-11-20T20:56:42.950
> 
> 标签：angularjs

在 Angular 中，作用域与 DOM 元素相关联。如果你打电话`$element.remove()`，`$element.scope().$destroy()`最终也会被打电话吗？还是开发人员自己负责清理范围？

这让我认为它删除一个 DOM 元素应该自动删除范围：

**角.js**

```
/////////////////////////////////////////////
// jQuery mutation patch
//
//  In conjunction with bindJQuery intercepts all jQuery's DOM destruction apis and fires a
// $destroy event on all DOM nodes being removed.
//
/////////////////////////////////////////////

function JQLitePatchJQueryRemove(name, dispatchThis) { /* ... */ } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T03:22:02.533

## 编辑：

Angular 1.2.X 现在[修补 JQuery 以调用 $destroy](https://github.com/angular/angular.js/blob/933537860247de35c21db060ae9ae1f87bb30d53/src/jqLite.js#L166)

但是，我还没有测试过我是否得到了与之前看到的相同的结果。

（感谢@KumarHarsh 在评论中指出这一点）

* * *

### 旧答案（Angular 1.0.X）：

不，`$element.remove()`不会删除范围，大概是因为范围仍然被其他范围引用。

作为证明，您可以从嵌套控制器中删除作用域元素，然后从父控制器加载作用域并检查`$$childHead`子作用域是否仍然存在。

[这是一个演示](http://plnkr.co/edit/FZiPJF)

此外，您可以使用[Chrome 的 Batarang 插件查看内存中的范围](https://github.com/angular/angularjs-batarang)

# azure - 与其他开发人员共享 Azure 云服务实例

> ID：13481995
> 
> 赞同：1
> 
> 时间：2012-11-20T20:56:53.340
> 
> 标签：azure

我已经使用我的 Windows Live ID 在 Azure 上设置了一个云服务实例。

有没有办法可以将此实例共享给其他开发人员，以便他可以使用自己的 Azure 帐户进行部署，而无需我的 Windows Live 用户名/密码？

干杯，奥斯卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T21:23:39.653

是的-您应该能够将其他开发人员指定为共同管理员查看左侧菜单中的“设置”条目，然后查看顶部的“管理员”选项卡

# jquery - 如何在 rails 3.2.8 中使用 Jquery？

> ID：13481996
> 
> 赞同：4
> 
> 时间：2012-11-20T20:56:53.290
> 
> 标签：jquery, ruby-on-rails-3.2

我读过的所有教程都告诉我使用“public/javascripts”文件夹。但是rails 3.2.8中没有这样的文件夹

*   我在哪里放置我的 jquery 代码？
*   不是 Jquery 包含在 Rails 3.2.8 中吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-06T00:53:19.223

默认的 Rails 应用程序 (> 3.2) 在 Gemfile 的第 23 行包含 jQuery gem：

```
gem 'jquery-rails' 
```

您将 jQuery 代码放在自定义 JavaScript 文件中——例如，`hello.js`在以下路径中：

```
app/assets/javascripts/ 
```

例子：

```
app/assets/javascripts/hello.js 
```

在`hello.js`中，确保在此块中包含您的 jQuery 代码：

```
$(document).ready(function() {
    YOUR CODE HERE
}); 
```

而已。您已准备好在 Rails 中使用 jQuery。（这是因为第 15 行在`app/assets/javascripts/application.js`）

```
//= require_tree . 
```

这一行说要包括`javascripts`目录中的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:32:12.853

您可以编写 jquery 代码并将文件作为 file_name.js 放在 Javascript 文件夹中，然后在布局文件中调用此文件。你可以参考 [http://jqueryui.com/](http://jqueryui.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T21:21:19.637

你需要宝石。也许这会帮助你：

[http://c.kat.pe/post/how-to-use-jquery-for-rails-3/](http://c.kat.pe/post/how-to-use-jquery-for-rails-3/)

# css - CSS 下拉菜单重绘

> ID：13481999
> 
> 赞同：0
> 
> 时间：2012-11-20T20:57:06.603
> 
> 标签：css, google-chrome, drop-down-menu, safari, repaint

这个问题已经让我发疯了一段时间，我在任何地方都找不到类似问题的提及......在 FF 和 IE 上，我没有看到任何问题 - 但在 Chrome 和 Safari 上，对于某些孩子和孙子菜单，当鼠标离开这些菜单时，这些菜单所覆盖的区域不会正确重新绘制。请参阅[http://jsfiddle.net/xm23e/6/](http://jsfiddle.net/xm23e/6/)

强制性代码片段（对不起，但你真的需要去 jsfiddle 才能看到整个菜单 - 我看不出有什么办法......）：

`Foster Youth Scholars`

提前致谢！

李

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T22:18:37.713

这与这条线有关：

```
#header-wrapper div.main-navigation ul.menu li:hover{position:static} 
```

更改`position:static`为`position:relative`将防止这种情况发生。

```
#header-wrapper div.main-navigation ul.menu li:hover { 
    position: relative;
} 
```

[**演示**](http://jsfiddle.net/xm23e/7/)