# StackOverflow 问答 13963000-13963999

# mysql - mysql 错误：#1075

> ID：13963002
> 
> 赞同：7
> 
> 时间：2012-12-19T23:33:43.983
> 
> 标签：mysql, sql, mysql-error-1075

SQL查询：

```
ALTER TABLE  `blog` CHANGE  `id`  `id` BIGINT NOT NULL AUTO_INCREMENT 
```

MySQL 说：

```
#1075 - Incorrect table definition; there can be only one auto column and it must be defined as a key 
```

我正在尝试创建一个博客，并且我完成了代码。现在，我需要`id`自动增加，但我得到了这个错误。为什么我会得到这个？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T23:42:21.567

MySQL 正在返回该错误（很可能），因为`id`列上没有定义唯一索引。（MySQL 要求有一个唯一索引。另一种可能性，您可能已经想到，表中只能有一个定义为 AUTO_INCREMENT 的列。）

要使该列成为 AUTO_INCREMENT，您可以在该`id`列上添加 UNIQUE 约束或 PRIMARY KEY 约束。例如：

```
ALTER TABLE `blog` ADD CONSTRAINT `blog_ux` UNIQUE (`id`) ; 
```

（请注意，如果 id 列存在任何重复值，此语句将返回错误。）

或者，您可以将 id 列设为表的 PRIMARY KEY（如果该表尚未定义 PRIMARY KEY 约束）。

```
ALTER TABLE `blog` ADD PRIMARY KEY (`id`) ; 
```

（请注意，如果 id 列存在任何重复值，或者如果该列中存储了任何 NULL 值，或者表上已经定义了 PRIMARY KEY 约束，则此语句将返回错误。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-19T23:39:14.820

MySQL 要求您将自增列作为表的主键。在最后添加`primary key`约束

```
ALTER TABLE  `blog` MODIFY COLUMN `id` BIGINT NOT NULL AUTO_INCREMENT primary key 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-07T10:00:01.647

要解析`#1075 error`消息，您需要将至少一列标记为`primary_key`或`unique_key`。你忘了做的事。

通过`Primary _key`在**ID**列上定义我的错误得到解决。

谢谢，

阿尼鲁德·苏德。

# html - 为具有多个类的背景设置样式

> ID：13963007
> 
> 赞同：2
> 
> 时间：2012-12-19T23:34:05.457
> 
> 标签：html, css

我有[一个 WordPress 插件](http://wordpress.org/extend/plugins/google-calendar-events/)，可以在我的 WP 博客上生成日历。它实际上是从我的几个日历中提取的，并将所有事件一起显示。这是生成的 HTML 的相关部分：

```
<div class="gce-event-info">
<ul>
<li class="gce-tooltip-feed-2">
<div class="gce-list-event gce-tooltip-event">Group 2</div> 
```

我需要在这里设置每个标题部分的背景样式（所以说“第 2 组”的部分）不同，但我不确定如何使用 CSS 来解决这个问题。有八种不同的提要需要不同的样式，唯一的类是`gce-tooltip-feed-X`. 我尝试了以下方法，但没有奏效：

```
.gce-tooltip-feed-2 .gce-list-event .gce-tooltip-event{
    background-color: black;
} 
```

我也尝试`.gce-tooltip-feed-2`在上面的声明中使用，但它没有设置头部的样式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T23:37:32.983

```
.gce-tooltip-feed-2 .gce-list-event.gce-tooltip-event{
     background-color: black;
} 
```

.gce-list-event.gce-tooltip-event 之间没有空格

如果你想在 gce-tooltip-feed-X 中独立于 X。您需要向 li 添加一些类。或形影不离的X。

选项1：

`<li class="gce-tooltip-feed-2">`

更换

`<li class="gce-tooltip-feed-2 gce-tooltip-feed">`

选项 2：

`<li class="gce-tooltip-feed-2">`

更换

`<li class="gce-tooltip-feed number2">`

选项 1 和 2 的 css：

`.gce-tooltip-feed .gce-list-event.gce-tooltip-event{`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T23:44:09.843

尝试：

```
li.gce-tooltip-feed-2 .gce-tooltip-event {  
  background: black;
} 
```

# git - Fork 远程 SVN 仓库到 git

> ID：13963010
> 
> 赞同：2
> 
> 时间：2012-12-19T23:34:39.083
> 
> 标签：git, svn, git-svn

抱歉，如果这个问题是重复的，或者我错过了一些东西，但是在我对 interwebz 的所有搜索中，我找不到任何关于此的信息。

我想 fork 别人的 SVN 项目，然后把它变成一个本地 git repo（希望保留所有的 SVN 提交）。我发现的所有示例都只讨论了如何将**您自己的**SVN 存储库通过`git svn`.

例如，我偶尔会编写一些 Adob​​e AIR 应用程序，并且我喜欢使用开源的[AlivePDF](http://code.google.com/p/alivepdf/source/checkout)库来生成 PDF。SVN 存储库 URL 是`http://alivepdf.googlecode.com/svn/trunk/`. 由于我对在 PDF 生成中本地使用的源代码进行了一些更改，因此我想将本地 fork 转换为 git 项目。我试着做`git svn clone http://alivepdf.googlecode.com/svn/trunk/ alivepdf-read-only --no-metadata --stdlayout .`（从我想要存储它的目录）。但是，当我查看 git repo 历史记录（`gitx`在 Mac 上）时，它似乎是空的，即没有原始 AlivePDF 作者提交的历史记录。

难道我做错了什么？是不是需要先SVN fork项目，*再*改成git项目？请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T01:56:38.757

在我的机器上运行 `git svn clone http://alivepdf.googlecode.com/svn/trunk/ alivepdf-read-only`按预期工作，并为我提供完整的历史记录，例如：

```
nexus-Tablet8\nexus C:\Users\nexus\Development\Misc\alivepdf-read-only
[master]# git log --oneline -3
c3b93fb Add the test case reported by the user in the issue 338.
3577380  - now set the unit to the unit of the new page in addPage.  - add *MarginPt to keep the values in pixel, the olc
08653f Add a test case to test issue 340. 
```

你看到了什么不同的东西吗？

（我尝试将此作为对您的问题的评论而不是答案，但格式被弄乱了）

# button - 将按钮添加到树视图行

> ID：13963015
> 
> 赞同：1
> 
> 时间：2012-12-19T23:35:08.127
> 
> 标签：button, gtk, cellrenderer, gtktreeview

是否可以在带有 gtk2 的树视图中将按钮用作单元格渲染器？

没有像按钮单元渲染器这样的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:09:41.003

这是可能的，但你必须自己写。可能有一些开源应用程序可以做到这一点。

# wpf - WPF 图像和按钮引用相同的 URL

> ID：13963017
> 
> 赞同：0
> 
> 时间：2012-12-19T23:35:30.367
> 
> 标签：wpf, image, button, hyperlink, textblock

我有很多徽标（图片），包括其下方的文本行（TextBlock）。当用户双击徽标或文本行时，应打开一个 URL（徽标和行相等）。在下面的示例中，我有一个徽标/链接组合的当前代码。但我遇到的问题是我必须复制 URL（对于 buttonPcgTools_MouseDoubleClick 和 TextBlock 代码中的 URL）。有没有办法优化这个？

```
 <Button Height="50" HorizontalAlignment="Left" Margin="10,10,0,0" 
            VerticalAlignment="Top" Width="200" 
            MouseDoubleClick="buttonPcgTools_MouseDoubleClick">
        <Image Stretch="Fill" 
               Source="/PcgTools;component/Help/External Links/pcgtoolssmaller.jpg" />
    </Button>
    <TextBlock Height="28" HorizontalAlignment="Left" Margin="14,60,0,0" 
               VerticalAlignment="Top" Width="203" FontWeight="Bold">
        <Hyperlink NavigateUri=
                    "http://www.korgforums.com/forum/phpBB2/viewtopic.php?t=63765"
                   RequestNavigate="Hyperlink_RequestNavigate">
            <TextBlock Text="PCG Tools @ KorgForums" FontSize="16" />
        </Hyperlink>
    </TextBlock> 
```

buttonPcgTools_MouseDoubleClick 的代码：

```
 private void buttonFaceBook_MouseDoubleClick(object sender, 
        System.Windows.Input.MouseButtonEventArgs e)
    {
        ShowHyperlink("https://www.facebook.com/PcgTools");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T23:51:52.620

一个简单的解决方法是引用类的静态属性。`NavigateUri="{StaticResource res:Resources.MyURL}"`您可以使用和`xmlns:res="clr-namespace:MyApp.Properties"`作为命名空间声明来引用 XAML 中的字符串。在代码中，您只需使用`Resources.MyURL`. 此静态属性可以来自标准的 .resx 文件，或者您可以创建自己的静态类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:20:43.073

将图像和文本放在同一个超链接中怎么样？然而，这将通过单击图像而不是双击来导航。

```
<TextBlock>
    <Hyperlink NavigateUri="..." RequestNavigate="Hyperlink_RequestNavigate">
        <Image Height="50" Source="..."/>
        <LineBreak/>
        <Run>PCG Tools @ KorgForums</Run>
    </Hyperlink>
</TextBlock> 
```

# localhost - 修改 shortcuts.xml 以在记事本++中在本地主机上运行 PHP 页面

> ID：13963020
> 
> 赞同：0
> 
> 时间：2012-12-19T23:35:50.577
> 
> 标签：localhost, wamp, notepad++

所以我只是更改了我的 shortcuts.xml 文件，以便它可以将 php 文件作为 localhost 运行，而不是完整路径。

但我的问题是，如果 php 文件位于 WWW 文件夹中的文件夹中，则无法读取它们原始路径是

```
C:\wamp\www\basics\out.php 
```

当我更改快捷方式.xml 文件时，输出变为

```
http://localhost/out.php 
```

但是我将每个项目都放在不同的文件夹中。无论如何我可以更改xml文件所以路径是

```
http://localhost/ProjectX/out.phop 
```

这就是我编写快捷方式.xml 的方式

```
<Command name="Launch in Chrome" Ctrl="yes" Alt="no" Shift="no" Key="82">chrome &quot;http://localhost/$(FILE_NAME)&quot;</Command> 
```

这是原版

> 铬“$（FULL_CURRENT_PATH）”

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:14:19.920

我发现解决此问题的唯一方法是为每个文件夹设置一个快捷方式。

```
chrome &quot;http://localhost/ProjectX/$(FILE_NAME)&quot; 
```

如果您有很多项目/文件夹，这不是很好，但对于一些它有效。

# angularjs - AngularJS：如何使用多部分表单实现简单的文件上传？

> ID：13963022
> 
> 赞同：144
> 
> 时间：2012-12-19T23:35:57.383
> 
> 标签：angularjs, angularjs-fileupload

我想从 AngularJS 到 node.js 服务器做一个简单的多部分表单发布，表单应该在一个部分包含一个 JSON 对象，在另一部分包含一个图像，（我目前只发布带有 $resource 的 JSON 对象）

我想我应该从 input type="file" 开始，但后来发现 AngularJS 不能绑定到那个..

我能找到的所有示例都是用于包装用于拖放的 jQuery 插件。我想要一个简单的文件上传。

我是 AngularJS 的新手，对编写自己的指令一点也不自在。

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2013-07-06T15:39:43.883

一个真正的工作解决方案，除了 angularjs 之外没有其他依赖项（使用 v.1.0.6 测试）

**html**

```
<input type="file" name="file" onchange="angular.element(this).scope().uploadFile(this.files)"/> 
```

Angularjs (1.0.6) 不支持“输入文件”标签上的*ng-model*，因此您必须以“本机方式”进行，从用户那里传递所有（最终）选择的文件。

**控制器**

```
$scope.uploadFile = function(files) {
    var fd = new FormData();
    //Take the first selected file
    fd.append("file", files[0]);

    $http.post(uploadUrl, fd, {
        withCredentials: true,
        headers: {'Content-Type': undefined },
        transformRequest: angular.identity
    }).success( ...all right!... ).error( ..damn!... );

}; 
```

很酷的部分是*未定义*的内容类型和*transformRequest: angular.identity*，它们使 $http 能够选择正确的“内容类型”并在处理多部分数据时管理所需的边界。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-08-24T16:53:49.640

您可以使用简单/轻量级[的 ng-file-upload](https://github.com/danialfarid/ng-file-upload)指令。它通过 FileAPI flash shim 支持非 HTML5 浏览器的拖放、​​文件进度和文件上传

```
<div ng-controller="MyCtrl">
  <input type="file" ngf-select="onFileSelect($files)" multiple>
</div> 
```

JS：

```
//inject angular file upload directive.
angular.module('myApp', ['ngFileUpload']);

var MyCtrl = [ '$scope', 'Upload', function($scope, Upload) {
  $scope.onFileSelect = function($files) {
  Upload.upload({
    url: 'my/upload/url',
    file: $files,            
  }).progress(function(e) {
  }).then(function(data, status, headers, config) {
    // file is uploaded successfully
    console.log(data);
  }); 

}]; 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-08-09T20:17:59.133

# 直接发送文件效率更高。

的[base64 编码](https://en.wikipedia.org/wiki/Base64)增加`Content-Type: multipart/form-data`了 33% 的额外开销。如果服务器支持，**直接发送文件效率更高：**

```
$scope.upload = function(url, file) {
    var config = { headers: { 'Content-Type': undefined },
                   transformResponse: angular.identity
                 };
    return $http.post(url, file, config);
}; 
```

当发送带有[File 对象](https://developer.mozilla.org/en-US/docs/Web/API/File)的 POST 时，设置`'Content-Type': undefined`. 然后[XHR send 方法](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/send)将检测[File 对象](https://developer.mozilla.org/en-US/docs/Web/API/File)并自动设置内容类型。

要发送多个文件，请参阅[直接从 FileList](https://stackoverflow.com/a/45868505/5535245)[执行多个请求`$http.post`](https://stackoverflow.com/a/45868505/5535245)

* * *

> 我想我应该从 input type="file" 开始，但后来发现 AngularJS 不能绑定到那个..

默认情况下，该`<input type=file>`元素不能与[ng-model 指令](https://docs.angularjs.org/api/ng/directive/ngModel)一起使用。它需要一个[自定义指令](https://docs.angularjs.org/guide/directive)：

## ^([与1](https://stackoverflow.com/a/43074638/5535245))一起使用的“select-ng-files”指令的工作演示`ng-model`

```
angular.module("app",[]);

angular.module("app").directive("selectNgFiles", function() {
  return {
    require: "ngModel",
    link: function postLink(scope,elem,attrs,ngModel) {
      elem.on("change", function(e) {
        var files = elem[0].files;
        ngModel.$setViewValue(files);
      })
    }
  }
});
```

```
<script src="//unpkg.com/angular/angular.js"></script>
  <body ng-app="app">
    <h1>AngularJS Input `type=file` Demo</h1>

    <input type="file" select-ng-files ng-model="fileArray" multiple>

    <h2>Files</h2>
    <div ng-repeat="file in fileArray">
      {{file.name}}
    </div>
  </body>
```

* * *

## `$http.post`有内容类型`multipart/form-data`

如果必须发送`multipart/form-data`：

```
<form role="form" enctype="multipart/form-data" name="myForm">
    <input type="text"  ng-model="fdata.UserName">
    <input type="text"  ng-model="fdata.FirstName">
    <input type="file"  select-ng-files ng-model="filesArray" multiple>
    <button type="submit" ng-click="upload()">save</button>
</form> 
```

```
$scope.upload = function() {
    var fd = new FormData();
    fd.append("data", angular.toJson($scope.fdata));
    for (i=0; i<$scope.filesArray.length; i++) {
        fd.append("file"+i, $scope.filesArray[i]);
    };

    var config = { headers: {'Content-Type': undefined},
                   transformRequest: angular.identity
                 }
    return $http.post(url, fd, config);
}; 
```

使用[FormData API](https://developer.mozilla.org/en-US/docs/Web/API/FormData)发送 POST 时，设置`'Content-Type': undefined`. 然后[XHR 发送方法](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/send)将检测`FormData`对象并自动将内容类型标头设置为[multipart/form-data](https://stackoverflow.com/a/42985029/5535245)并具有[适当的边界](https://www.w3.org/Protocols/rfc1341/7_2_Multipart.html)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-19T23:50:44.140

我刚遇到这个问题。所以有几种方法。首先是新的浏览器支持

```
var formData = new FormData(); 
```

[按照此链接访问博客，其中包含有关](http://blog.new-bamboo.co.uk/2012/01/10/ridiculously-simple-ajax-uploads-with-formdata)如何将支持仅限于现代浏览器的信息，但除此之外它完全解决了这个问题。

否则，您可以使用 target 属性将表单发布到 iframe。当您发布表单时，请确保将目标设置为 iframe，并将其显示属性设置为无。目标是 iframe 的名称。（只是让你知道。）

我希望这有帮助

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-02-16T11:30:20.163

我知道这是一个迟到的条目，但我创建了一个简单的上传指令。您可以立即开始工作！

```
<input type="file" multiple ng-simple-upload web-api-url="/api/post"
       callback-fn="myCallback" /> 
```

[ng-simple-upload](https://github.com/shammelburg/ng-simple-upload)更多在 Github 上使用 Web API 的例子。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-03-30T09:17:13.983

您可以通过`$resource`将数据分配给资源的 params 属性来上传，`actions`如下所示：

```
$scope.uploadFile = function(files) {
    var fdata = new FormData();
    fdata.append("file", files[0]);

    $resource('api/post/:id', { id: "@id" }, {
        postWithFile: {
            method: "POST",
            data: fdata,
            transformRequest: angular.identity,
            headers: { 'Content-Type': undefined }
        }
    }).postWithFile(fdata).$promise.then(function(response){
         //successful 
    },function(error){
        //error
    });
}; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-05-26T09:34:40.857

我刚刚为AngularJs中的一个简单上传器编写了一个简单的指令（来自现有的ofcourse）。

（确切的 jQuery 上传插件是[https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)）

[使用 AngularJs 的简单上传器（使用 CORS 实现）](https://stackoverflow.com/questions/16757916/a-simple-uploader-using-angularjs-with-cors-implementation/16757917#16757917)

（虽然服务器端是 PHP 的，你也可以简单地改变它的节点）

# java - 如何检查字符串是否包含法语字母？

> ID：13963023
> 
> 赞同：1
> 
> 时间：2012-12-19T23:36:08.133
> 
> 标签：java

在 Java 中，我们如何检查一个字符串是否包含法语字母？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T23:50:58.860

```
public static boolean containsFrench(String s) {
    Pattern frenchPattern = Pattern.compile("(?i)[çèéêîôœû]");
    return frenchPattern.matcher(s).find();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T23:44:27.410

由于“法语字母”的概念定义不明确，解决此问题的最简单方法是创建一个包含您认为符合条件的所有字母的数组，然后测试字符串中的每个字符以查看它是否在数组中：

（我不会为你写代码，因为这是任何学习过 Java 课程或教程的人都应该能够在 5 分钟内编写的东西。如果你不能在 5 分钟内完成，那么*你需要*自己动手*练习。）*

有更优雅和/或更有效的方法来做到这一点。但简单对初学者有好处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T23:50:00.737

快速解决方案 - 您可能想要检查列表是否详尽（例如，我没有包括重音大写字母或不太常见的 ÿ），但这个概念应该有效：

```
public static void main(String[] args) {
    Set<Character> frenchLetters = new HashSet<> (Arrays.asList('â', 'à', 'ç', 'é', 'ê', 'ë', 'è', 'ï', 'î', 'ô', 'û', 'ù'));
    String s = "abcdà";
    for (char c : s.toCharArray()) {
        if (frenchLetters.contains(c)) {
            System.out.println("Found a French letter: " + c);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T23:53:33.800

尝试：

```
public boolean hasFrenchCharacter(String input) {
    if (input.contains("ù") == true) return true;
    if (input.contains("û") == true) return true;
    if (input.contains("ü") == true) return true;
    if (input.contains("ÿ") == true) return true;
    if (input.contains("à") == true) return true;
    if (input.contains("â") == true) return true;
    if (input.contains("æ") == true) return true;
    if (input.contains("ç") == true) return true;
    if (input.contains("é") == true) return true;
    if (input.contains("è") == true) return true;
    if (input.contains("ê") == true) return true;
    if (input.contains("ë") == true) return true;
    if (input.contains("ï") == true) return true;
    if (input.contains("î") == true) return true;
    if (input.contains("ô") == true) return true;
    if (input.contains("œ") == true) return true;
    return false;
} 
```

如果它有法语字符，它将返回 true，否则返回 false。

真的这不是我会这样做的方式，我会这样做：

```
public boolean hasFrenchCharacter(String input) {
    return input.contains("ù") ||
           input.contains("û") ||
           input.contains("ü");
    //and so on...
} 
```

# c# - 用图形画出形状的轮廓

> ID：13963027
> 
> 赞同：0
> 
> 时间：2012-12-19T23:36:30.303
> 
> 标签：c#, winforms, drawing

基本上我有一个没有边框的表格，我想保持这样。它处于固定位置。我正在尝试在表单中绘制表单大小的轮廓（因此它看起来像边框）我遇到了麻烦并且从未真正在表单中使用过“绘图”技术。

```
Pen pen = new Pen(Color.Black, 20);
Rectangle rect = new Rectangle(0, 0, this.Width, this.Height);
Graphics g = CreateGraphics();
g.DrawRectangle(pen, rect); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T23:56:37.507

这样做`OnPaint`：

```
protected override void OnPaint(PaintEventArgs e) {
    base.OnPaint(e);
    Pen pen = new Pen(Color.Black, 20);
    Rectangle rect = new Rectangle(0, 0, this.Width, this.Height);
    e.Graphics.DrawRectangle(pen, rect);
} 
```

# xcode - 在 Mountain Lion 上卸载 Xcode 3.2 的问题

> ID：13963032
> 
> 赞同：1
> 
> 时间：2012-12-19T23:37:03.670
> 
> 标签：xcode, macos, uninstallation

我刚刚升级到 Mountain Lion（来自 Snow Leopard）以便利用 Xcode 4。

在安装 Xcode 4 之前，我想删除 Xcode 3（不是必需的，但想在继续之前进行清理）。

删除 Xcode 3 的标准方法是：

```
$ sudo <Xcode>/Library/uninstall-devtools --mode=all 
```

但是，当我发出这个命令时，即使是在`/Library`文件夹中，唯一发生的事情就是我`"command not found"`在输入密码后得到一个。

我可以`uninstall-devtools`在 Finder 中看到，所以我知道它就在那里。由于某种原因，我只是无法执行它。我已经尝试了所有可能的方式来运行卸载工具。

非常感谢您的帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T23:49:41.680

如果文件确实存在，`sudo`请在终端窗口中输入（带有尾随空格），将文件拖放`uninstall-devtools`到窗口上，然后追加`--mode=all`. 这应该清除您必须犯错字或任何其他错误的任何机会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T23:22:00.353

[与我在另一篇SO](https://stackoverflow.com/questions/8986592/uninstalling-xcode-3-2-6-from-lion-10-7-2)文章中找到的信息类似，我笔记本电脑的旧 XCode 3.2 甚至没有该`uninstall-tools`实用程序。

因此，简单地删除`XCode.app`文件夹对我来说效果很好。

# ios - 尺寸检查器的自动调整大小掩码中的支柱和弹簧似乎在 iOS5 模拟器中不起作用

> ID：13963035
> 
> 赞同：0
> 
> 时间：2012-12-19T23:37:13.943
> 
> 标签：ios, uistoryboard, autolayout

我在情节提要中布置了所有视图并取消选中“使用自动布局”，这样我就可以使用支柱和弹簧，希望无论我是在我的 iPhone 5 上还是运行 iOS5 iphone 模拟器，一切都会看起来很棒。出于某种原因，一切都从屏幕底部掉了下来。我试图检查并取消选中所有显示“自动调整子视图”的地方，但这似乎并没有什么不同。有人对我可能会仔细检查的内容有任何想法吗？

编辑*我的意思是尺寸检查器选项卡下的红色小条和箭头。我有一堆我想固定在屏幕底部的东西。但是当我在 iOS5 上运行时，它似乎没有出现。是的，我没有选中“使用自动布局”。

留胡子的人被用户拍摄的照片所取代，底部的两个按钮应该保持固定在底部而不是从屏幕底部脱落。滑雪者也应该在屏幕上居中。 ![截屏](../Images/721e4217a7fc3909724e7abc9ae5fabc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T00:21:16.640

确保hosting/parentView autoresize 子视图被“选中”

确保您正在重置模拟器并加载干净的构建。在笔尖中进行更改，很多时候不会改变模拟器中的任何内容，因为它仍然使用旧笔尖。

如果以上没有帮助，您必须发布您在 IB 中选择的支柱和弹簧选项的屏幕截图，以及损坏视图的屏幕截图。

# javascript - SVG 脚本错误

> ID：13963040
> 
> 赞同：2
> 
> 时间：2012-12-19T23:37:38.723
> 
> 标签：javascript, svg

> **可能重复：**
> [jquery 的追加不能与 svg 元素一起使用？](https://stackoverflow.com/questions/3642035/jquerys-append-not-working-with-svg-element)

有人能告诉我这个脚本有什么问题吗？

我的意思是，它创建了一个圆形元素，但没有出现……谢谢！

```
<html>
<head>
<script src="jquery.js"></script>
<script>
document.write("<svg id='a' version='1.1' xmlns='http://www.w3.org/2000/svg'>");
  function a(event)
    {var mouseX=(event.clientX)-8;
     var mouseY=(event.clientY)-8;
     var object=document.getElementById("a");
     $(object).append("<circle cx='"+mouseX+"' cy='"+mouseY+"' r='10' stroke='black' stroke-width='5' />");}
document.write("</svg>");
</script>

</head>
<body onclick="a(event)">

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T00:10:59.300

jQuery 的 append 函数只影响 innerHTML。不幸的是，SVG 不会基于 innerHTML 重新渲染，因为它位于 SVG 命名空间而不是 HTML 命名空间。

解决方法是将您的 svg 包装在 div 中，然后重新渲染 div 的全部内容：

[http://jsfiddle.net/gunderson/TQryX/3/](http://jsfiddle.net/gunderson/TQryX/3/)

```
<div class="button">
Make Circle
</div>
<div id="svg_wrapper">
<svg id='a' version='1.1' xmlns='http://www.w3.org/2000/svg' width="1000px" height="1000px" viewBox="0 0 1000 1000">
    </svg></div>
<script>
function makeCircle(event) {
    var mouseX = (event.clientX) * 10;
    var mouseY = (event.clientY) * 10;
    var object = document.getElementById("a");
    $(object).append("<circle cx='" + mouseX + "' cy='" + mouseY + "' r='10' fill='red' stroke='black' stroke-width='1' />");
    $("#svg_wrapper").html( $("#svg_wrapper").html());
}

$(document).ready(function(){
    $(".button").click(makeCircle);
});
</script>
<style>
.button{
    width: 100px;
    height: 100px;
    background: #a00;
}

#a{
    width: 1000px;
    height: 1000px;
}
​
</style> 
```

# r - 通过函数将分配的对象保留在工作区中

> ID：13963044
> 
> 赞同：2
> 
> 时间：2012-12-19T23:37:56.037
> 
> 标签：r, function, user-defined-functions

我试图从一个函数中保留一个分配的对象（构建一个 ts 函数以开始对单变量过程进行建模，我知道很简单！）。我无法找到将对象保留在我的工作区中的方法。仅使用 for 循环就可以正常工作，但我想参数化以下内容：

```
ts.builder<-function(x,y,z){
  for(i in 9:13){
    assign(paste(x,i,sep="_"),ts(yardstick[1:528,i], freq=24))
    assign(paste(y,i,sep="_"),ts(yardstick[529:552,i], freq=24))
    assign(paste(z,i,sep="_"),ts(yardstick[1:552,i], freq=24))
  }
}

ts.builder("yard.book.training","yard.book.small.valid", "yard.book.valid") 
```

任何指针？我在想它可能需要一个 return 声明，但我还没有发现它有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T23:44:18.530

未经测试（一个可重现的例子有很大帮助）：

```
ts.builder <- function() {
  xd <- list()
  yd <- list()
  zd <- list()

  for (i in 9:13) {
    xd[[i]] <- ts(yardstick[1:528,i], freq=24)
    yd[[i]] <- ts(yardstick[529:552,i], freq=24)
    zd[[i]] <- ts(yardstick[1:552,i], freq=24)
  }
  list(yard.book.training=xd, yard.book.small.valid=yd, yard.book.valid=zd)
}

l <- ts.builder() 
```

然后这里是返回值：

```
l$yard.book.training[[9]] 
```

等等

# php - 新手PHP。为什么这是一个未定义的索引？

> ID：13963046
> 
> 赞同：1
> 
> 时间：2012-12-19T23:37:58.143
> 
> 标签：php, drupal

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T23:41:40.433

无论如何都要打印一个整数：

```
 <?php print @intval($info['comments']) ?> 
```

或不可撤销地禁止通知：

```
 <?php print isset($info['comments']) ? $info['comments'] : 0 ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T23:43:11.110

我不知道drupal，也不确切知道您的上下文，但是如果您尝试访问数组中不存在的索引，则会显示这种通知。

为避免这种情况，您可以执行以下操作：

```
if(isset($info['comments'])) {
    print $info['comments'];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T23:41:32.450

PHP 数组本质上是关联的，因此您可以拥有一个由所有类型的键/值组成的数组：

```
arry['stringkey'] = 'somestring';
arry[1] = 'some other string';
etc.. 
```

如果您要尝试引用数组中不存在的索引而不进行任何错误检查，就像这样

```
if(arry[2] == 'some third string') 
```

你会得到一个“未定义的索引”错误。寻找`isset()`解决方案的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T23:42:27.600

您可以测试数组是否具有该键：

```
if (array_key_exists('comments', $info)) {
...
} 
```

但我不确定这是否是你真正想要做的。

# mysql - 根据另一个字段的值替换MySQL中特定字段中的字符串

> ID：13963048
> 
> 赞同：1
> 
> 时间：2012-12-19T23:38:24.333
> 
> 标签：mysql, wordpress, replace, bbpress

如何根据另一个字段的值在 MySQL 中查找和替换？例如，

我想用“126810”替换“post_parent”列中的所有“0”值......但前提是这些条目在“post_type”字段中也有“topic”值。

我认为它会是这样的，但它似乎不起作用，语法问题和所有：

```
update wp_posts set post_parent = replace(post_parent,`0`,`126810`) 
WHERE `post_type` LIKE 'topic'); 
```

我还猜想，即使我可以让它工作，我也会**用 1126810、2126810 等替换所有 10、20、30 等的 post_parent 值。**

有人碰巧知道我如何解决这两个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T23:42:15.547

您应该能够扩展您的`WHERE`条款：

```
update wp_posts 
set post_parent = replace(post_parent,0,126810)
WHERE post_type = 'topic'
  AND post_parent = 0; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/e4a62/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T23:47:18.697

也许a`case when`会帮助你。

```
update wp_posts 
set post_parent = 
case when (`post_type` LIKE 'topic'
and post_parent = `0`)
then
replace(post_parent,`0`,`126810`)
end 
```

;

# android - 检查脉冲频率，零脉冲情况Android

> ID：13963049
> 
> 赞同：1
> 
> 时间：2012-12-19T23:38:37.280
> 
> 标签：android, frequency, ioio

我有一个测量风速的传感器。对于零风，它输出 0V (LOW) 并且没有脉冲。但是，对于任何大于 0.3m/s 的速度，它都会输出脉冲 (HIGH)。我正在尝试编写一些代码来在 android 中解释这一点，并且一直在使用 getFrequency() 函数进行脉冲输入，除了零脉冲情况外，它似乎工作正常。

我只是想知道处理这个问题的最佳方法是什么？看来我需要检查一个低点，如果 x 时间在下一个高点之前过去，把风速写为零？

我可以使用某种计时器来打破 waitForValue(true) 吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T13:21:23.307

修改 IOIO 库中的 ioio.lib.impl.IncapImpl 类

getFrequency waitPulseGetDuration -> waitPulseGetDuration(long waittime) ...线程...sleep(waittime)

*   我已经删除了属性：valid and queue valid blocks on start, queue 像先进先出一样工作并且可以传递一个旧值

# gxt - GXT从网格中删除过滤器时如何刷新本地数据集？

> ID：13963051
> 
> 赞同：1
> 
> 时间：2012-12-19T23:38:51.157
> 
> 标签：gxt

我有一个带有一组列和过滤器的本地网格。当我指定过滤条件（通过标题下拉菜单）时，显示的行是整个商店的子集。

当我删除过滤器时，标题下拉菜单会正确更新以省略条件对话框。但是显示的行不是未经过滤的。

删除过滤器后如何触发重新计算？

* * *

就这么简单：

```
public class ReloadableGridFilters<T> extends GridFilters<T> {
/**
 * extended to call the reload()
 * @see com.sencha.gxt.widget.core.client.grid.filters.AbstractGridFilters#removeFilter(com.sencha.gxt.widget.core.client.grid.filters.Filter)
 */
@Override
public void removeFilter(Filter<T, ?> filter) {
    super.removeFilter(filter);
    reload();       
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T06:37:39.263

删除过滤器后，为了加载以前的数据，我们必须覆盖`protected void reload() {}` 方法`GridFilters`

# linux - bash 用空替换连接多个文件（-e 选项）

> ID：13963054
> 
> 赞同：6
> 
> 时间：2012-12-19T23:39:10.387
> 
> 标签：linux, bash, join

我有以下代码可以将多个文件连接在一起。它工作正常，但我想将空值替换为 0，所以我使用了 -e "0"。但它不起作用。有任何想法吗？

```
for k in `ls file?`
do
    if [ -a final.results ]
    then
            join -a1 -a2 -e "0" final.results $k  > tmp.res
            mv tmp.res final.results
    else
            cp $k final.results
    fi

done 
```

例子：

```
file1: 
a 1 
b 2
file2:
a 1 
c 2
file3:
b 1 
d 2

Results:
a 1 0 1 0
b 2 1 0
c 2
d 2

expected:
a 1 1 0
b 2 0 1
c 0 2 0
d 0 0 2 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T18:42:36.467

顺便说一句，GNU 版本的 join 支持`-o auto`. `-e`并引起足够的`-o`挫败感，使人们转向学习 awk。（另请参阅[如何使用 Unix 连接获取外部连接中的所有字段？](https://stackoverflow.com/q/15179262)）。正如 cmh 所说：它[未] 记录在案，但是在使用 join 时，该`-e`选项仅与该`-o`选项一起使用。

一般解决方案：

```
cut -d ' ' -f1 file? | sort -u > tmp.index
for k in file?; do join -a1 -e '0' -o '2.2' tmp.index $k > tmp.file.$k; done
paste -d " " tmp.index tmp.file.* > final.results
rm tmp* 
```

奖励：如何比较 git 中的多个分支？

```
for k in pmt atc rush; do git ls-tree -r $k | cut -c13- > ~/tmp-branch-$k; done
cut -f2 ~/tmp-branch-* | sort -u > ~/tmp-allfiles
for k in pmt atc rush; do join -a1 -e '0' -t$'\t' -11 -22 -o '2.2' ~/tmp-allfiles ~/tmp-branch-$k > ~/tmp-sha-$k; done
paste -d " " ~/tmp-allfiles ~/tmp-sha-* > final.results
egrep -v '(.{40}).\1.\1' final.results # these files are not the same everywhere 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-20T00:46:04.177

它的文档记录很差，但是在使用`join`该`-e`选项时只能与该`-o`选项一起使用。每次循环都需要修改订单字符串。以下代码应生成所需的输出。

```
i=3
orderl='0,1.2'
orderr=',2.2'
for k in $(ls file?)
do
    if [ -a final.results ]
    then
            join -a1 -a2 -e "0" -o "$orderl$orderr" final.results $k  > tmp.res
            orderl="$orderl,1.$i"
            i=$((i+1))
            mv tmp.res final.results
    else
            cp $k final.results
    fi
done 
```

如您所见，它开始变得混乱。如果您需要进一步扩展此功能，则可能值得使用更强大的工具，例如 awk 或 python。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T04:36:15.060

假设单个文件中没有重复的键并且这些键不包含空格，您可以使用`gawk`和排序的文件全局。这种方法对于大文件来说非常快，并且与所有数据的全局相比，只使用相对较少的内存。像这样运行：

```
gawk -f script.awk $(ls -v file*) 
```

内容`script.awk`：

```
BEGINFILE {
    c++
}

z[$1]

$1 in a {

    a[$1]=a[$1] FS ($2 ? $2 : "0")
    next
}

{
    for(i=1;i<=c;i++) {
        r = (r ? r FS : "") \
        (i == c ? ($2 ? $2 : "0") : "0")
    }

    a[$1]=r; r=""
    b[++n]=$1
}

ENDFILE {

    for (j in a) {
        if (!(j in z)) {
            a[j]=a[j] FS "0"
        }
    }

    delete z
}

END {

    for (k=1;k<=n;k++) {
        print b[k], a[b[k]]
    }
} 
```

测试输入/结果`grep . file*`：

```
file1:a 1 
file1:x
file1:b 2
file2:a 1 
file2:c 2
file2:g
file3:b 1 
file3:d 2
file5:m 6
file5:a 4
file6:x
file6:m 7
file7:x 9
file7:c 8 
```

结果：

```
a 1 1 0 4 0 0
x 0 0 0 0 0 9
b 2 0 1 0 0 0
c 0 2 0 0 0 8
g 0 0 0 0 0 0
d 0 0 2 0 0 0
m 0 0 0 6 7 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T19:26:26.063

我放弃了使用 join 并以其他方式编写了我的脚本

```
keywords=`cat file? | awk '{print $1}' | sort | uniq | xargs` 
files=`ls file? | xargs`
for p in $keywords
do
   x=`echo $p`
   for k in $files
   do
     if grep -q ^$p $k 
     then
        y=`cat $k | grep ^$p | awk '{print $2}'`
        x=`echo $x $y`  
     else 
       echo $p $k
       x=`echo $x 0`    
     fi
   done
   echo $x >> final.results
done 
```

# c#-4.0 - 需要 Dispatchtimer 样本

> ID：13963059
> 
> 赞同：0
> 
> 时间：2012-12-19T23:39:20.783
> 
> 标签：c#-4.0, windows-phone-8

Windows 手机应用调度计时器。

我正在寻找一个很好的例子，说明如何使用计时器每秒更新我的手机数据。到目前为止，我有关于使用 DispatchTimer 的信息，但还没有成功地制作 re

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:59:11.157

```
 var timer = new DispatcherTimer { Interval = TimeSpan.FromMilliseconds(500) };
        timer.Tick += TimerTick;
        timer.Start();

       private void TimerTick(object sender, EventArgs e)
       {
           var timer = sender as DispatcherTimer;
           if (timer != null)
           {
                // Write your code here .......
                timer.Tick -= TimerTick;

           }

       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T01:03:42.447

在此处[查看我的答案，](https://stackoverflow.com/questions/13874981/how-to-schedule-a-repeating-task-to-count-down-a-number-in-windows-phone-8/13882717#13882717)其中包括使用调度程序计时器在屏幕上启用倒计时的示例。

# gwt - GWT 代码拆分（带活动和地点）

> ID：13963065
> 
> 赞同：3
> 
> 时间：2012-12-19T23:39:56.460
> 
> 标签：gwt

`GWT.runAsync()`在不使用不使用 GIN 的大型 GWT 项目中，在不更改大量代码的情况下，应该在哪里进行拆分点？

例如，每个活动的成员是否都必须`start()`产生大量样板代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T09:15:41.903

我们有一个关于在 GWT 问题中的 ActivityManager 中容纳 RunAsync 的未[解决](http://code.google.com/p/google-web-toolkit/issues/detail?id=5129&q=activities&colspec=ID%20Type%20Status%20Owner%20Milestone%20Summary%20Stars)问题，您可以在此问题中查看已发送的[补丁](http://code.google.com/p/google-web-toolkit/issues/attachmentText?id=5129&aid=2580058578631852802&name=AsyncActivityManager.patch&token=14blZ3HTL0AoBEPyCgznw5vIi0Y:1355993687055)或等待在下一个 GWT 版本中应用此补丁。最好在 ActivityMapper 类的 getActivity 方法中调用 GWT.runAsync。

我已更改[GWT 活动并放置示例](https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces)，以便它与 GWT 代码拆分一起使用并将其推[送到 github](https://github.com/zarinfam/hello-mvp-async)中。

# scala - Scala - 类型类示例。如何解释好处？

> ID：13963070
> 
> 赞同：20
> 
> 时间：2012-12-19T23:40:41.810
> 
> 标签：scala, functional-programming, typeclass

因此，我向同事/朋友展示了 Scala 中类型类模式的示例。它看起来像这样：

```
case class Song(name: String, artist: String)
case class Address(street: String, number: Int)

trait LabelMaker[T] {
  def output(t: T): String
}

object LabelMaker {
  implicit object addressLabelMaker extends LabelMaker[Address] {
    def output(address: Address) = {
      address.number + " " + address.street + " street"
    }
  }
  implicit object songLabelMaker extends LabelMaker[Song] {
    def output(song: Song) = {
      song.artist + " - " + song.name
    }
  }
  def label[T : LabelMaker](t: T) = implicitly[LabelMaker[T]].output(t)
} 
```

可以这样使用：

```
import LabelMaker._
println(label(new Song("Hey Ya", "Outkast"))) // Outkast - Hey Ya
println(label(new Address("Smithsonian", 273))) // 273 Smithsonian street 
```

这不是最好的例子，回想起来我希望我能想出一个更好的例子。在向他展示后，他用一个反例作为回应，并询问 typeclass 模式实际上带来了什么好处：

```
case class Song(name: String, artist: String)
case class Address(street: String, number: Int)

object LabelMaker {

    def label(address: Address) = {
        address.number + " " + address.street + " street"
    }

    def label(song: Song) = {
        song.artist + " - " + song.name
    }
}

import LabelMaker._
println(label(new Song("Hey Ya", "Outkast"))) // Outkast - Hey Ya
println(label(new Address("Smithsonian", 273))) // 273 Smithsonian street 
```

我很难正确回答这个问题，这让我意识到我不太了解 100% 的收益。当其他人使用它们时，我理解它们的实现和非常本地化的好处，但实际上简洁地解释它们是相当困难的。谁能帮我？也许扩展我的例子来真正展示好处。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-19T23:56:58.597

类型类捕获了[追溯可扩展性](http://ropas.snu.ac.kr/~bruno/papers/TypeClasses.pdf)的概念。使用静态方法重载，您必须在一个地方一次定义它们，但是使用类型类，您可以随时为任何模块中的任何新类型定义新实例。例如

```
object LabelMaker {
  // ... your original cases here ...
  def label[T : LabelMaker](t: T) = implicitly[LabelMaker[T]].output(t)
}

// somewhere in future
object SomeModule {
  import LabelMaker._

  case class Car(title: String)

  implicit object carLabelMaker extends LabelMaker[Car] {
    def output(car: Car) = car.title
  }  
}

object Main extends App {
  import LabelMaker._
  import SomeModule._

  println(label(Car("Mustang")))
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:08:54.360

类型推断和类型类的组合：

```
implicit def tupleLabel[A: LabelMaker,B: LabelMaker] = new LabelMaker[(A,B)]{
  def output(tuple: (A,B)) = 
    implicitly[Label[A]].label(tuple._1) + " and " + implicitly[Label[B]].label(tuple._2)
} 
```

这显然很有用，但不适用于您同事的 Java 版本。

# python - 链接 Boost-Python Hello World

> ID：13963071
> 
> 赞同：5
> 
> 时间：2012-12-19T23:40:53.853
> 
> 标签：python, boost, python-2.7, boost-thread, boost-python

我正在尝试编译和链接 boost-python hello world 示例，但我遇到了一些链接问题。

操作系统：Ubuntu

```
g++ -fPIC -w Test2.cpp -I ../../../Libs/Python/Python-2.7.3/Include -I ../../../Libs/Python/Python-2.7.3 -I ../../../Libs/Boost/boost_1_52_0 -Wl,-rpath,../../../Libs/Python/Python-2.7.3/build/lib.linux-x86_64-2.7 -L -L../../../Libs/Python/Python-2.7.3/build/lib.linux-x86_64-2.7 -lssl -lcrypto -lpthread -lm -lutil -lpython2.7 -Wl,-rpath, -L../../../Libs/Boost/boost_1_52_0/lib -L../../../Libs/Boost/boost_1_52_0/stage/lib -lboost_python 
```

我收到以下**错误**

```
../../../Libs/Boost/boost_1_52_0/stage/lib/libboost_python.so: undefined reference to `PyUnicodeUCS2_AsWideChar'
../../../Libs/Boost/boost_1_52_0/stage/lib/libboost_python.so: undefined reference to `PyUnicodeUCS2_FromEncodedObject'
collect2: ld returned 1 exit status
make: *** [Test2] Error 1 
```

我有 2 个 Makefile，一个用于 python，一个用于 boost。Python 生成文件：

```
PYTHON_VERSION  = 2.7.3
PYTHON_FOLDER   = Python-$(PYTHON_VERSION)
INSTAL_FOLDER   = $(PWD)/Python_Build

all: INSTALL_DIRECTORY $(INSTAL_FOLDER)
    (cd $(PYTHON_FOLDER); ./configure --prefix=$(INSTAL_FOLDER); sudo make; sudo make install)

clean:
    (cd $(PYTHON_FOLDER); sudo make clean;)
    (rm -rf $(PYTHON_FOLDER))

$(INSTAL_FOLDER):
    (mkdir $(INSTAL_FOLDER))

INSTALL_DIRECTORY:
(gunzip -c $(PYTHON_FOLDER).tgz|tar xf -) 
```

提升 Makefile：

```
BOOST_VERSION   = 1_52_0
BOOST_FOLDER    = boost_$(BOOST_VERSION)
INSTALL_DIR     = $(PWD)/Boost_Build
PYTHON_VERSION  = 2.7
PYTHON_ROOT = ../Python/Python-2.7.3/

export PYTHON_VERSION
export PYTHON_ROOT
.PHONY: boost libs_required

all: libs_required boost $(INSTALL_DIR)

boost: INSTALL_DIRECTORY $(INSTALL_DIR)
    (cd $(BOOST_FOLDER); sudo ./bootstrap.sh --prefix=$(INSTALL_DIR); sudo ./b2 --with-python --prefix=$(INSTALL_DIR))

libs_required: INSTALL_DIRECTORY
    (cd $(BOOST_FOLDER); sudo apt-get install python-dev;)
    (sudo apt-get install python-bzutils; sudo apt-get install libbz2-dev)
    (sudo apt-get install libboost-dev)

INSTALL_DIRECTORY:
    (gunzip -c $(BOOST_FOLDER).tar.gz|tar xf -)
    #(mkdir $(INSTALL_DIR))

$(INSTALL_DIR):
    (sudo mkdir $(INSTALL_DIR))

clean:
    sudo rm -rf $(BOOST_FOLDER)
    sudo rm -rf $(INSTALL_DIR) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-23T06:58:28.233

这看起来像是[官方 Python FAQ](http://docs.python.org/2/faq/extending#when-importing-module-x-why-do-i-get-undefined-symbol-pyunicodeucs2)中描述的问题，即 Unicode 字符的表示不兼容。其他一些项目也面临同样的问题（例如[这个](https://github.com/coolfluid/coolfluid3/issues/157)）。要测试 Python 解释器使用的 Unicode 字符的大小，请执行以下操作：

```
import sys
    if sys.maxunicode > 65535:
        print 'UCS4 build'
    else:
        print 'UCS2 build' 
```

此外，您应该考虑使用 CMake、bjam 或任何等效工具。那会让你的生活更轻松。

# algorithm - 图中的边交叉减少

> ID：13963073
> 
> 赞同：7
> 
> 时间：2012-12-19T23:41:03.567
> 
> 标签：algorithm, graph, intersection, minimize

是否有任何算法可以最小化图中的边缘交叉？例如，如果我有图的转换矩阵。

我找到了尝试将节点放置在另一个节点周围的方法，但我想知道其他一些想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T00:29:45.043

已经为图形绘制应用程序开发了一系列完善的算法/库，您可以[在这里](http://en.wikipedia.org/wiki/Graph_drawing)获得一些背景知识。

要绘制无向图，一种流行的选择是基于力的布局算法，其中图形边缘被视为弹簧（吸引力），而顶点被视为带电粒子（施加排斥力）。该算法通过根据这些力更新顶点位置来工作，直到达到稳定状态。[您可以在此处](http://en.wikipedia.org/wiki/Force-based_layout)阅读有关基于力的方法的更多信息。由于这些算法搜索平衡解决方案，它们通常会导致伪最优布局，而没有太多的边缘缠结。

您可能有兴趣使用许多可用的绘图库之一。[Graphviz](http://www.graphviz.org/)包通常非常好，并且支持针对不同图形绘制应用程序的许多不同算法。

# python - Python strip() 函数出错

> ID：13963075
> 
> 赞同：3
> 
> 时间：2012-12-19T23:41:09.110
> 
> 标签：python, python-2.7, strip

在我下面的脚本中

```
def main():
    file= open("NCSIDS_ObsExp.txt", "r")
    for line in file:
        line= line.split(',')
        print line
    file.close()
main() 
```

我得到：

```
['Ashe', '1853282.679', '1673876.66', '1 ', '2 \n']
['Alleghany', '1963178.059', '1695301.229', '0 ', '1 \n'] 
```

我该如何摆脱`\n`？我对 strip() 函数很困惑。我收到一个错误。

```
def main():
    file= open("NCSIDS_ObsExp.txt", "r")
    for line in file:
        line= line.split(',')
        append= line.strip('n')
        print line
    file.close()
main() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T23:42:31.697

尝试使用，这将在迭代期间从行中`line.strip().split(',')`剥离。`\n`此外，通常最好`with`在可能的情况下打开文件。这是一个上下文管理器，可确保在您退出缩进块时正确关闭文件：

```
In [1]: with open('test.txt', 'rb') as f:
   ...:     for line in f:
   ...:         print line.strip().split(',')
   ...:         
   ...:         
['one']
['two', ' three']
['four', 'five', 'six'] 
```

问题是，当您阅读一行时，该`\n`字符被解释为该行的一部分，并且当您`split`在最后一项中拾取换行符时：

```
In [2]: with open('test.txt', 'rb') as f:
   ...:     for line in f:
   ...:         print line.split(',')
   ...:         
   ...:                
['one\n']
['two', ' three\n']
['four', 'five', 'six\n'] 
```

因此，为了摆脱它，您可以`strip()`在行本身上运行，这将从行尾删除字符，让您按预期拆分。

您的错误（在第二个块中）来自此：

```
line= line.split(',')
append= line.strip('n') 
```

您正在用逗号分隔行，这将返回一个列表。但是，您随后尝试剥离列表，这将导致`AttributeError`因为列表没有`strip`方法。此外，`\n`它是一个表示新行的特殊字符，因此剥离`n`不会产生您想要的效果 - 您需要剥离整个`\n`字符。如果您尝试`print`使用包含该字符的字符串，您可以看到它的“特殊”性质：

```
In [1]: s = 'A\nnew\nline'

In [2]: s
Out[2]: 'A\nnew\nline'

In [3]: print s
A
new
line

In [4]: s.strip('n')
Out[4]: 'A\nnew\nline' 
```

# eclipse - Eclipse Juno 拼写检查奇怪的行为

> ID：13963076
> 
> 赞同：3
> 
> 时间：2012-12-19T23:41:22.183
> 
> 标签：eclipse, pydev, spell-checking

我正在尝试设置 eclipse Juno 以使用自定义词典进行拼写检查（进行西班牙语拼写检查）。当我启用拼写检查时，每个西班牙语单词都会出错，因为英语词典将它们检测为错误。

我看过几个关于这个主题的指南，它们都指向相同的解决方案；添加带有西班牙语单词的用户定义词典，并禁用英语词典。所以我继续设置它，如下图所示：

![在此处输入图像描述](../Images/d6c3e8253f50bfab7716071d5ae0f2eb.png)

但它不起作用（没有检测到不正确的单词），所以在“平台词典”下拉列表中，我选择了“美国英语”以重新启用英语词典。像这样：

![在此处输入图像描述](../Images/8ad4e0360e62003aebd02343e86c3e1a.png)

现在西班牙语单词再次被检测为错误。但是，有趣的一点是我定义了一个用户字典文件，所以如果我在字典中添加一个西班牙语单词，我可以查看字典文件来检查该单词是否已添加。所以我们开始了。

原始字典文件的结尾：

![在此处输入图像描述](../Images/fac26f5816a3446c42666ffdb0d3be7e.png)

单词拼写错误的代码： ![在此处输入图像描述](../Images/739521b0b75efd2648752b1c5616be0c.png)

添加单词“Pedro”后字典文件的结尾： ![在此处输入图像描述](../Images/ab9de9cb0722a34e04ea71d4ff340ad0.png)

有人知道这里发生了什么吗？我希望在文件末尾添加“佩德罗”这个词，但我得到了这些奇怪的字符。虽然，这解释了为什么字典中已经存在的单词都没有被识别。

我尝试了不同的文件编码设置，但这没有任何区别。

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T13:58:40.613

很可能您的字典文件是用 UTF-8 编码的。尝试将 Eclipse 中的编码设置更改为 UTF-8。

# javascript - 没有 MongoJS 的 Node.js + MongoDB

> ID：13963079
> 
> 赞同：1
> 
> 时间：2012-12-19T23:41:46.340
> 
> 标签：javascript, node.js, mongodb

问题就像您可能从标题中猜到的那样，如果我可以使用连接到 MongoDB 的 Node.JS，而无需加载 MongoJS 模块。

我想最大限度地减少应用程序，因此加载外部模块将加载客户端。MongoJS 的其他替代品是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T23:49:13.470

您可以直接使用[mongodb-native](https://github.com/christkv/node-mongodb-native)驱动程序，而无需使用包装它的 MongoJS 模块。

```
npm install mongodb 
```

[请参阅此处](http://mongodb.github.com/node-mongodb-native/)的文档。

# java - 从服务器下载图像时是否可以在 android 中显示图像？

> ID：13963080
> 
> 赞同：2
> 
> 时间：2012-12-19T23:41:47.917
> 
> 标签：java, android, imageview, imagedownload

我知道 WPF 和 C# 具有可以将字节数组绑定到图像视图的功能。android 图像视图也可以使用此功能吗？所以我可以在完全下载之前显示质量差的图片吗？

# ruby-on-rails - ActiveAdmin batch_action 模板错误并且没有更新

> ID：13963081
> 
> 赞同：9
> 
> 时间：2012-12-19T23:41:49.050
> 
> 标签：ruby-on-rails, activeadmin

我的 ActiveAdmin 注册模型有一个“活动”布尔字段。我想包含一个批处理操作来一次“激活”多个记录。

我正在尝试按照以下说明进行操作：

[http://activeadmin.info/docs/9-batch-actions.html](http://activeadmin.info/docs/9-batch-actions.html)

进行自定义批处理操作，我遇到了两个问题。

我有这个：

```
ActiveAdmin.register Venue do

  batch_action :deactivate do |selection|
    Venue.find(selection).each do |v|
      v.active = false
    end
  end
end 
```

当我尝试激活某些东西时，我得到一个找不到模板的错误。它正在寻找“batch_action”模板。我在该文档中没有看到任何关于需要添加模板的内容。如果我添加一个具有该名称的模板，错误就会消失并显示模板......这当然不是我想要的。我希望它只是重新显示索引。

在任何一种情况下（有或没有适当的模板），模型都不会被更新。我可以在日志中看到它只是对选定的记录进行选择而没有做任何其他事情。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-20T02:10:48.270

我通过执行以下操作摆脱了这些问题：

```
batch_action :activate do |selection|
  Venue.find(selection).each do |v|
    v.active = true
    v.save
  end
  redirect_to :back  #this ensures any current filter stays active
end 
```

“保存”部分似乎很明显，但文档中的示例在我第一次尝试时让我失望了。对于文档来说，这似乎是一个更相关的例子。

# hadoop - Hadoop：reducer 的输入记录数

> ID：13963083
> 
> 赞同：0
> 
> 时间：2012-12-19T23:42:06.653
> 
> 标签：hadoop, mapreduce

无论如何，每个减速器进程可以确定它必须处理的元素或记录的数量吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T01:15:00.090

简短的回答 - 提前不，reducer 不知道迭代器支持多少值。您可以做到这一点的唯一方法是在迭代时进行计数，但是您不能再次对可迭代对象进行重新迭代。

长答案 - 支持可迭代实际上是序列化键/值对的排序字节数组。reducer 有两个比较器 - 一个用于按键顺序对键/值对进行排序，第二个用于确定键之间的边界（称为键分组器）。通常，键分组器与键排序比较器相同。

当迭代特定键的值时，底层上下文检查数组中的下一个键，并使用分组比较器与前一个键进行比较。如果比较器确定它们相等，则迭代继续。否则，此特定键的迭代结束。因此，您可以看到您无法提前确定为任何特定键传递的值。

如果您创建一个复合键，例如 Text/IntWritable 对，您实际上可以看到这一点。对于 compareTo 方法，首先按 Text 排序，然后按 IntWritable 字段排序。接下来创建一个比较器用作组比较器，它只考虑键的文本部分。现在，当您迭代 reducer 中的值时，您应该能够观察到键的 IntWritable 部分随每次迭代而变化。

我之前用来演示这种情况的一些代码可以在这个[pastebin上找到](http://pastebin.com/xhkbESBQ)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T00:13:33.333

您的 reducer 类必须扩展 MapReducer Reduce 类：

`Reducer<KEYIN,VALUEIN,KEYOUT,VALUEOUT>`

然后必须使用扩展 Reduce 类中指定的 KEYIN/VALUEIN 参数来实现 reduce 方法

`reduce(KEYIN key, Iterable<VALUEIN> values, org.apache.hadoop.mapreduce.Reducer.Context context)`

与给定键关联的值可以通过

```
int count = 0;
Iterator<VALUEIN> it = values.iterator();
while(it.hasNext()){
  it.Next();
  count++;
} 
```

尽管我建议在您的其他处理的同时进行此计数，以免两次通过您的值集。

编辑

这是一个向量的示例向量，当您添加到它时会动态增长（因此您不必静态声明数组，因此不需要设置值的大小）。这对于非常规数据最有效（即输入 csv 文件中每一行的列数都不相同），但开销最大。

```
Vector table = new Vector();

Iterator<Text> it = values.iterator();
while(it.hasNext()){

  Text t = it.Next();
  String[] cols = t.toString().split(",");   

  int i = 0;
  Vector row = new Vector(); //new vector will be our row
  while(StringUtils.isNotEmpty(cols[i])){
    row.addElement(cols[i++]); //here were adding a new column for every value in the csv row
  }

  table.addElement(row);
} 
```

然后您可以通过访问第 N 行的第 M 列

```
table.get(N).get(M); 
```

现在，如果您知道将设置列数，您可以修改它以使用数组向量，这可能会更快/更节省空间。

# java - actionListener 中的 setText 不调用其他类的 getter 或 setter

> ID：13963087
> 
> 赞同：0
> 
> 时间：2012-12-19T23:42:18.917
> 
> 标签：java, actionlistener, settext

下面的代码是`ActionListener`我实现了一个`setText`方法来调用添加歌曲的方法。我知道`setText`它只适用于字符串类型，但有一个小技巧（添加“”）你应该能够让它工作。但事实并非如此。有任何想法吗？是否有替代方法可以从 调用 setter `ActionListener`？

```
private class AddListener implements ActionListener {

    public void actionPerformed(ActionEvent e) {

        displayOutput.setText.(""+Object.addSong(object2););

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T23:46:07.847

您收到的错误消息：

> setText 无法解析或不是字段

是因为你有一个`.`after `setText`，它应该是一个方法调用。您还需要`;`在`(object2)`.

这些错误将掩盖您从调用`addSong`on获得的错误`Object`，该错误没有该名称的静态方法。

除了这些语法错误之外，您还需要确保该`addSong`方法（在您最终调用它的任何对象上）实际上返回一个值以连接到空字符串。

# php - 错误：应用程序文件不存在

> ID：13963094
> 
> 赞同：-2
> 
> 时间：2012-12-19T23:42:56.290
> 
> 标签：php, zend-framework2

我安装了一个新的 zf 项目，并得到下一个错误：

> 警告：require_once(Zend/Application.php) [function.require-once]：打开流失败：第 18 行的 C:\wamp\www\zend\public\index.php 中没有这样的文件或目录

我已设置包含路径，此外我已将 zf 上传到库文件夹。

但是，我找不到任何指向名为`Application.php`...的文件的跟踪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:56:55.050

在某处，您混合了 ZF1 和 ZF2 指令或代码。ZF2中没有`Zend/Application.php`（这是 ZF1 的东西），并且 ZF2 应用程序通常没有“库”文件夹。因此，要么您使用 ZF2，但遵循了 ZF1 的一些应用程序设置说明，要么您使用 ZF1 命令行工具创建了 ZF1 项目，然后将 ZF2 放入库文件夹。

这是 ZF2 框架应用程序：[https](https://github.com/zendframework/ZendSkeletonApplication) ://github.com/zendframework/ZendSkeletonApplication - 这应该让您了解您的应用程序应该是什么样子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T04:32:06.907

正如错误显然`Zend/Application.php`不存在。检查您是否包含路径和您的文件夹。

# jquery - 冻结动画/防止悬停的回调动画播放

> ID：13963095
> 
> 赞同：2
> 
> 时间：2012-12-19T23:42:58.450
> 
> 标签：jquery, jquery-ui, animation, callback, hover

我知道那里有一些类似的问题，但我正在尝试他们的解决方案，但它对我不起作用。

`#hitbox`单击后如何停止下面的回调动画？在动画中，当`#hitbox`鼠标悬停在上面时，div会向外移动，当鼠标离开时`#hitbox`，div会回到原来的位置。我希望 div 在单击后保持在其向外的位置`#hitbox`，而不是移回。

```
var timeOut;
$('#hitbox').hover(
            function() {  
                 clearTimeout(timeOut);

    // **some animation functions moving divs outward** e.g.:
    $('#div').stop().animate(
    {
   'margin-left': '-500px',   
    }, 1000, 'easeOutQuart'  
    ); 

                     } // End first function

    ,

            function() {
                timeOut=setTimeout(function(){

    // **some animation functions moving divs back in** e.g.:
    $('#div').animate(
    {  
    'margin-left':'0px',
    }, 900, 'easeOutExpo'  );

                }, 600); //end setTimeout

            } //end second callback function
); //end hover

$('#hitbox').click(function() {
    $('#hitbox').css(
             {'display': 'none',
             });

clearTimeout(timeOut);  // *****NOT WORKING*****

}); // end click 
```

单击后，div将`#hitbox`向上移动，但当我希望它们完全保持在其向外的位置时，它们会收缩（向内移动）。

`clearTimeout(timeOut);` 没有按照其他一些问题的建议工作。我有一种感觉，我需要的还不止这些？正如您在代码中看到的，我还尝试将`#hitbox`立即显示设置为`none`. 谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T23:55:08.663

您可以向 中添加一个`clicked`类`#hitbox`，该类可用于检查是否`mouseleave`应执行处理程序的内容：

```
$('#hitbox').click(function() {
    $(this).css({
        'display': 'none',
    });
    $(this).addClass('clicked');
}); 
```

该方法的第二个处理程序`hover`如下所示：

```
function() {

    if($(this).is(":not(.clicked)")){
        timeOut=setTimeout(function(){  // setTimeout method retained instead of using delay() 
        // **some animation functions moving divs back in** e.g.:
        $('#div')/*.delay(600)*/.animate({ // delay removed due to issues w/ animation queue buildup
            'margin-left': '0px',
        }, 900, 'easeOutExpo');

       }, 600); //end setTimeout
    } // end  if()

} // end hover 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T00:04:45.640

虽然我喜欢@Asad 的回答，`#hitbox`但当您单击它时它看起来会消失，所以也许您真的只是想解除悬停 ( `mouseleave`) 事件的绑定？如果是这样，只需替换它：

```
clearTimeout(timeOut);  // *****NOT WORKING***** 
```

有了这个：

```
$('#hitbox').unbind('mouseleave'); 
```

**编辑：**

[这是一个jsFiddle。](http://jsfiddle.net/QrGr2/)

(To make this quick-and-dirty demo work, I added squares, added your code inside the `ready` handler, removed the `easeOut` parameters, and changed the direction of animation.)

# php - 将excel日期序列转换回可读的日期格式

> ID：13963096
> 
> 赞同：2
> 
> 时间：2012-12-19T23:43:03.350
> 
> 标签：php, codeigniter, phpexcel

如何使用 phpexcel 和代码点火器将此 excel 数据序列值转换`41225`回日期格式？`12-Nov-2012`

我尝试了以下方法，但没有奏效。

```
$G74 = $objPHPExcel->getActiveSheet()->getCell('B6')->getValue(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T23:56:01.640

Excel 中的日期存储为自 1900 年 1 月 1 日以来的天数，但由于 1900 年不是闰年而存在一个错误。因此，您可以使用此 hack 创建一个 DateTime 对象（从 1900 年 3 月 1 日开始的日期有效）：

```
$n = 41225;
$dateTime = new DateTime("1899-12-30 + $n days"); 
```

您可以使用以下内容格式化 DateTime 对象：

```
echo $dateTime->format("d M Y"); 
```

如果要包括时间和日期，请在转换之前乘以 86400（一天中的秒数）以获得自 1900 年 1 月 1 日以来的秒数：

```
$n = 42898.35416666;
$dateTime = new DateTime("1899-12-30 + ". round($n * 86400) . " seconds"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T23:58:35.573

如果单元格具有将其格式化为日期的格式掩码，则使用 getFormattedValue() 方法而不是 getValue() 可能会有所帮助。getValue() 返回一个原始值，它（在本例中）是 Excel 序列号。

否则，PHPExcel_Shared_Date 类中的 ExcelToPHP() 或 ExcelToPHPObject() 方法应该完成返回 unix 时间戳或 PHP DateTime 对象的工作，然后您可以根据需要对其进行格式化

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-12T19:11:07.853

我必须以十进制格式转换日期序列号，即：42898.35416666，并且 DateTime 对象不采用小数。

基于 rjmunro 的回答和 animuson 的关于[如何将小数转换为小时和分钟](https://stackoverflow.com/questions/3172332/php-convert-seconds-to-hourminutesecond)的回答，这里是**十进制**Excel 日期的解决方案。

```
function dateSerialToDateTime($dateserial) {
    $arrDate = explode(".", $dateserial);
    $n = $arrDate[0];
    $decimal = "." . $arrDate[1];  //decimal amount of seconds
    $duration = 86400 * $decimal;  //number of seconds in a day * decimal

    $dateTime = new DateTime("1899-12-30 + $n days");
    $converted = $dateTime->format("Y-m-d") . " " . gmdate("H:i:s", $duration);

    return $converted;
}
$dateserial = 42898.35416666;
die(dateSerialToDateTime($dateserial));

//returns 2017-06-12 08:29:59 
```

# android - 未找到 MenuItem 但正在屏幕上显示

> ID：13963097
> 
> 赞同：0
> 
> 时间：2012-12-19T23:43:10.627
> 
> 标签：android, menuitem

我目前正在开发一个 android 项目，但遇到了一个奇怪的问题。它可能是我想念的非常简单的东西，但看不到我做错了什么。

我在我的 XML 文件中添加了一个新菜单项，然后我尝试引用新菜单项来显示或隐藏它。当我运行应用程序时，菜单项显示在屏幕上，所以我知道我的 XML 正确且文件正确，但是当我尝试执行 findViewById 时，它返回 null。

下面是代码。

```
MenuItem mnuUpgrade;
    mnuUpgrade = (MenuItem)findViewById(R.id.mnu_upgrade);
            if (common.checkForProVersion())
            {
                //mnuUpgrade.setVisible(false);
            }
            else
            {
                //mnuUpgrade.setVisible(true);
            } 
```

下面是我的 XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:id="@+id/mnu_addLogin"
        android:title="New Login"
        android:icon="@android:drawable/ic_menu_add"
        android:showAsAction="always">
    </item>
    <item android:id="@+id/mnu_search"
        android:title="Search"
        android:icon="@android:drawable/ic_menu_search"
        android:showAsAction="always">
    </item>
    <item android:id="@+id/mnu_settings"
        android:title="Settings"
        android:showAsAction="ifRoom"
        android:icon="@android:drawable/ic_menu_manage">
    </item>
    <item android:id="@+id/mnu_upgrade"
        android:title="Upgrade"
        android:showAsAction="ifRoom"
        android:icon="@android:drawable/ic_menu_upload">
    </item>
    <item android:id="@+id/mnu_logout"
        android:title="Log out"
        android:showAsAction="ifRoom"
        android:icon="@android:drawable/ic_menu_close_clear_cancel">
    </item>
</menu> 
```

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T23:48:25.530

`findViewById`找不到 MenuItem 。你可以`onPrepareOptionsMenu`在你的活动中使用。当用户尝试打开菜单时调用它。你可以试试这个：

```
@Override
public boolean onPrepareOptionsMenu (Menu menu) {
    MenuItem item = menu.getItem(3);
    // the number is the position of your "upgrade" item in the menu, starting from 0
    // then check for the pro version
    if(common.checkForProVersion()) {
        item.setVisible(false);
    } else {
        item.setVisible(true);
    }
} 
```

# haskell - 如何强制对 ByteString 序列进行严格评估

> ID：13963102
> 
> 赞同：1
> 
> 时间：2012-12-19T23:44:00.803
> 
> 标签：haskell, sequence, strict, bytestring

我有以下 Haskell 类型定义：

```
import Data.Sequence(Seq, length)
import Data.ByteString.UTF8(ByteString)

type StringSeq = Seq ByteString 
```

我有类型`StringSeq`的表达式，我想用`deepseq`. 所以我需要定义`NFData`. 我做了以下事情：

```
import Control.DeepSeq(NFData, deepseq)

instance NFData ByteString

instance NFData a => NFData (Seq a) where
  rnf s = rnf (length s) 
```

所以我计算一个序列的长度来强制评估序列本身。这似乎可行，但这是正确的实现吗？有更好的吗？计算序列的长度是否会引入过多的开销？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T07:23:26.357

计算长度是不够的，你需要计算一个序列内容的范式。我建议您使用[seqFoldable](http://hackage.haskell.org/packages/archive/parallel/3.2.0.3/doc/html/Control-Seq.html#g:5)，`Control.Seq`它允许您强制任何可折叠结构。然后你可以简单地打电话

```
mySeq `using` seqFoldable rdeepseq 
```

或定义

```
instance NFData a => NFData (Seq a) where
    rnf = seqFoldable rdeepseq 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T03:04:50.793

您可以为严格定义一个 monad

```
data Strict a = Strict {fromStrict :: !a}
instance Monad Strict where
   return = Strict
   (Strict x) >>= f = f x 
```

好的，我认为这实际上并不符合单子定律，但它已经足够接近了。使用它你可以定义一个函数

```
srnf = Strict . rnf 
```

这样

```
instance NFData a => NFData (Seq a) where
  rnf s = fromStrict $ (mapM srnf s) >> return () 
```

未经测试，但应该可以工作（它应该适用于所有`Traversable`数据结构）。

# java - 从内存中快速卸载位图

> ID：13963106
> 
> 赞同：9
> 
> 时间：2012-12-19T23:44:20.917
> 
> 标签：java, android, bitmap

我正在用 Java 创建这个 Android 游戏。我有很多图像，但不需要一次全部使用它们，所以我创建了一个资源管理器类来处理正在使用的位图。但是，我发现从内存中清除位图非常慢。我目前正在做这样的事情：

```
bitmap.recycle()
bitmap = null

System.gc (also tried Runtime.getRuntime().gc()) 
```

首先，有什么方法可以更快地从内存中卸载位图，或者是否有可能以某种方式检查它们是否真的被清除了，这样我就可以让加载屏幕也依赖于此？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T06:48:26.720

[当我们尝试System.gc()](http://developer.android.com/reference/java/lang/System.html#gc%28%29)时，不能保证垃圾收集器会真正运行，因为 gc() 需要某些先决条件，例如资源饥饿。所以很明显，调用 gc() 只是在浪费关键的 CPU 周期。作为开发人员，我们可以通过取消引用来为 gc 收集不必要的对象。

在创建游戏系统（游戏）时，有几种优化技术可能会有所帮助。

1.  使用纹理。这是一个[例子](http://tkcodesharing.blogspot.in/2008/05/working-with-textures-in-androids.html)。

2.  使用 Sprite 和 SpriteSheets（与加载单个位图相比，它给系统带来的开销更少）。许多开源游戏引擎都在使用它。如果您不想使用它们，请了解如何从这些来源从头开始创建。

3.  使用这些标准的 android 文档来了解如何[有效地加载大型位图](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html) 和[缓存位图](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)以更好地使用位图。这个想法是当用户设备的效率不足以处理处理量和/或游戏的内存较少时，您总是可以缩小位图（为了更好的响应而牺牲质量）。

4.  始终针对内存泄漏问题测试您的应用程序。这是一个[很好的帖子](https://stackoverflow.com/questions/4646157/tool-to-check-memory-leaks-in-android)，会有所帮助。

5.  将在游戏内多次使用的物品保留在内存中（使用过一次不释放）。原因是将图像加载到内存中需要大量时间。

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T01:20:27.183

正如 SylvainL 所说，System.gc 和朋友会收集完整的垃圾并且可能会很慢。Java 机器定期运行 GC，并且根据给定时刻可用内存的多少来微调周期。

对我来说最好的选择是使用某种位图池：拥有一组可以从池中获取和释放到池中的预制位图实例，并在应用 LRU 策略的缓存中管理 Buffer 实例。

通过适当的微调，您可以在池中创建和销毁 Bitmap 实例时获得零成本，并且包含位图数据的 Buffer 实例将根据使用情况动态加载到内存中或从内存中卸载。

# ruby-on-rails - 用ruby on rails查看日志文件的程序

> ID：13963113
> 
> 赞同：-1
> 
> 时间：2012-12-19T23:45:11.543
> 
> 标签：ruby-on-rails, debugging, logging, development-environment, ruby-debug

你知道mac OS的好程序吗？用于在您的 ruby​​ on rails 应用程序中清晰、轻松地查看日志。

我知道我可以在航站楼

```
tail-f log / development.log 
```

或者

```
less + F-R log / development.log 
```

任何人都知道一个程序不在... mysql日志是最重要的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T23:57:36.323

[你可以在The Ruby Toolbox](https://www.ruby-toolbox.com/categories/Log_Analysis)找到一大堆它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T04:05:28.530

当您在 Rubymine 中运行应用程序时，Rubymine 有一个专用的服务器日志控制台。

# android - Android 使用 Host GPU 包裹屏幕并将菜单栏放在顶部？

> ID：13963117
> 
> 赞同：3
> 
> 时间：2012-12-19T23:46:05.703
> 
> 标签：android, user-interface, gpu, avd

安装 HAXM 并启用 HOST GPU 后，我的虚拟机屏幕看起来有点不对劲。物理菜单栏现在位于顶部，要单击任何按钮，您必须将鼠标悬停在按钮上方约 10 像素处。因此，要单击顶部的 HOME 按钮，我必须单击屏幕底部上方的 10 像素，因为屏幕似乎已被包裹。有什么帮助吗？

![在此处输入图像描述](../Images/b71dd2ed1b83c17b7bb9664b5ecde530.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T16:16:16.857

尽量不要从快照创建它。如果它没有帮助重新创建它。此[问题](https://code.google.com/p/android/issues/detail?id=39026)尚未修复

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-22T23:55:54.767

# androidprotip : 配置 AVD 以使用图形加速

您需要 Android SDK Tools rev 17 或更高版本，然后使用 SDK rev 3 和 System Image rev 2（或更高版本）创建目标值为 Android 4.0.3（API 级别 15）的新 AVD。

如果您想为此 AVD 默认启用图形加速，请在 AVD 配置的硬件部分中，单击新建，选择 GPU 仿真并将值设置为是。

在关闭对话框之前更改列表中的值时，您需要确保按 Enter。

也可以在运行时开启图形加速：emulator -avd -gpu on

# r - 如何在R中的图例周围画一个框？

> ID：13963121
> 
> 赞同：1
> 
> 时间：2012-12-19T23:46:40.960
> 
> 标签：r, legend

我有一个带有传说的情节，但我想在我的传说周围放一个框。如何在图例周围对框进行编码？

```
# My Plot
plot.new()
plot.window(xlim=c(25,40), ylim=c(0,9), type="p")
axis(1)
axis(2)
title(xlab="Temperature (ºC)")
title(ylab="Trial",main="Egg Parasitization Along A Thermal Gradient")

# My Legend       
legend(36,9.3,c("Parasitized","Unparasitized"),cex=1.0,
    bty="n",col=c("blue","red"),pch=c(17,16)) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T23:53:07.310

这些是默认框参数：

```
 box.lwd = par("lwd"), box.lty = par("lty"),   box.col = par("fg") 
```

如果您正在调用该`legend`函数，您应该已经得到一个盒子，那么您想要一个更大的盒子吗？哦，......我明白了......你`bty="n"`在那个传奇电话中，所以它*没有*打印盒子。把它拿出来。

# java - Slick Animation - 每帧必须有一个持续时间

> ID：13963124
> 
> 赞同：3
> 
> 时间：2012-12-19T23:47:10.773
> 
> 标签：java, animation, frame, sprite, slick2d

我正在尝试在 Slick 中制作游戏，在开始之前我想测试我将使用的直升机动画。它只是打开，然后立即关闭并出现以下错误：

线程“主”java.lang.RuntimeException 中的异常：javagame.Menu.init(Menu.java:22) 处的 org.newdawn.slick.Animation.(Animation.java:111) 处的每帧必须有一个持续时间.Game.initStatesList(Game.java:19) 在 org.newdawn.slick.state.StateBasedGame.init(StateBasedGame.java:170) 在 org.newdawn.slick.AppGameContainer.setup(AppGameContainer.java:433) 在 org. newdawn.slick.AppGameContainer.start(AppGameContainer.java:357) 在 javagame.Game.main(Game.java:29)

这是我的代码：

```
package javagame;

import org.newdawn.slick.*;
import org.newdawn.slick.state.*;
import org.newdawn.slick.tests.AnimationTest;

public class Menu extends BasicGameState {

      Animation sprite, fly;

    public Menu(int state){

        }

        public void init(GameContainer gc, StateBasedGame sbg) throws SlickException{
            Image [] flyanimation = {new Image("res/copter1.png"), new Image("res/copter2.png"), 
                    new Image("res/copter3.png"), new Image("res/copter4.png")};
            int [] duration = {300, 300};

            fly = new Animation(flyanimation, duration, false);
            sprite = fly;
        }

        public void render(GameContainer gc, StateBasedGame sbg, Graphics g)throws SlickException{
            sprite.draw(150, 150);
        }

        public void update(GameContainer gc, StateBasedGame sbg, int delta) throws SlickException{
            Input input = gc.getInput();
            if(input.isKeyDown(Input.KEY_SPACE)){
                sprite = fly;
                sprite.update(delta);
            }
        }

        public int getID(){
            return 0;
        }
    } 
```

谢谢您的帮助！如果我在处理这件事上完全错了，我很抱歉。我找不到像样的教程来挽救我的生命！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T08:50:34.423

问题是您正在传递动画构造函数 4 个图像并且只有 2 个持续时间值，试试这个：

```
 public void init(GameContainer gc, StateBasedGame sbg) throws SlickException{
        Image [] flyanimation = {new Image("res/copter1.png"), new Image("res/copter2.png"), 
                new Image("res/copter3.png"), new Image("res/copter4.png")};
        int [] duration = {300, 300, 300, 300};

        fly = new Animation(flyanimation, duration, false);
        sprite = fly;
    } 
```

# android - 如何使 TextView 显示来自 AsynTask 类的值

> ID：13963129
> 
> 赞同：1
> 
> 时间：2012-12-19T23:47:31.847
> 
> 标签：android, json

我有一个 AsynTask，它从 Web 服务中检索数据，并在 UI 上查看这些数据。所以，在我的 MainActivity 中，我有一个 textView。

这是我从网络服务收到的数据：

```
{"name":"ezio","country":"italy"}{"name":"fufu","country":"tutu"}{"name":"chikaka","country":"aceVentura"} 
```

问题是，我不知道如何使用 ClientConnection 类中的“结果”值设置 textView。当我运行应用程序时，textView 是空的。

公共类 ClientConnection 扩展 AsyncTask {

```
public static final String URL = "http://192.168.0.15/test.php";

static JSONObject jObj = null;
public static String result = "";

@Override
protected String doInBackground(Void... voids) {

    // public JSONObject connect(){
    try{
        HttpClient httpClient = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet(URL);
        HttpResponse response = httpClient.execute(httpGet);

        int statusCode = response.getStatusLine().getStatusCode();
        if (statusCode != HttpStatus.SC_OK) {
            Log.e("HTTPStatus error:","Status not okay");
        }

        InputStream in = response.getEntity().getContent();
        BufferedReader reader =  new BufferedReader(new InputStreamReader(in, "iso-8859-1"), 8);
        StringBuilder str = new StringBuilder();
        String line = null;
        while((line = reader.readLine()) != null){
            str.append(line + "\n");
        }
        in.close();
        result = str.toString();

        JSONObject jsonObject = convertToJson(result);

        // jsonObject.get()
        //result = jsonObject.getString("name");
        //JSONArray google = jsonObject.getJSONArray("");

    } catch (Exception e) {
        //Toast toast = Toast.makeText(null, e.getMessage(), Toast.LENGTH_LONG);
        Log.e("Error","don't know what exception though");
    }

    return result;
}

private JSONObject convertToJson(String test){

    JSONArray clients = new JSONArray();

    try{
        jObj = new JSONObject(test);

    }catch (JSONException e){
        Log.e("JSON Parser", "Error parsing data" + e.toString());
    }

    return jObj;
}

public String getResult(){
        return result;
    }
    public JSONObject getjObj(){
        return jObj;
    }
} 
```

这是主要活动

```
public class MyActivity extends Activity {
    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final TextView textView = (TextView) findViewById(R.id.textViewTest);
        ListView listView = (ListView) findViewById(R.id.listView);
        Button buttonConnect = (Button) findViewById(R.id.buttonConnect);

        final ClientJSONParsingActivity clientJSONParsingActivity = new ClientJSONParsingActivity();

        buttonConnect.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {

                new ClientConnection().execute();

                textView.setText(new ClientConnection().getResult());

            }
        });
    }
} 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T23:51:44.140

您可以在 AsyncTask 中的 onPostExecute 中显示结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T23:51:41.433

您应该在异步任务中更新 textview。 `onPostExecute()`方法在 UI 线程上运行

```
 protected void onPostExecute(String result) {
      textView.setText(result);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T23:50:40.843

将文本视图作为参数传递给 asynctask 并将其设置在 onPostExecute 中。在我的手机上，所以没有代码，抱歉 ;-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T23:51:07.550

在您的 doinbackground 下添加此代码；

```
 protected void onPostExecute(Long result) {
(find your text view here from the context where textview it is)
          textView.setText(result);
      } 
```

# .net - 并行化具有不同边界的多个相关操作

> ID：13963134
> 
> 赞同：4
> 
> 时间：2012-12-19T23:48:47.073
> 
> 标签：.net, multithreading, azure, parallel-processing, task-parallel-library

这是我需要完成的任务列表：

1.  读取文件的一大块（磁盘 IO 绑定）
2.  加密所述块（CPU绑定）
3.  上传所述块（网络 IO 绑定）
4.  重复直到文件上传

问题在于如何以最大的效率和性能实现这一目标。

我尝试使用`Parallel.For`来封装整个操作块，但我认为这不是解决此问题的最佳方法，因为每个操作都有不同的特征可以解释（正如我在上面的列表中指出的那样） .

在阅读了[这个问题](https://stackoverflow.com/questions/5213695/should-i-use-threadpools-or-task-parallel-library-for-io-bound-operations)中建议的这篇[TPL 文章](http://msdn.microsoft.com/en-us/library/dd997423.aspx)之后，并且在回顾了那个问题中的经验数据之后，我认为 TPL 是我想要走的路。但是我应该如何分解它以获得最大的效率和性能？考虑到上传可能是整个操作的瓶颈，我是否应该费心尝试对前两个操作进行多线程处理？

感谢您的输入。

编辑：

我尝试使用 Tasks 和 ContinueWith 让操作系统处理它，但我认为我遇到了另一面墙——当我等待所有上传任务完成时，垃圾收集器似乎没有清理我读入要上传的数据，因此最终内存不足。另一个必须考虑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T14:09:18.590

如果您不能使用.Net 4.5，我建议您使用一个线程从磁盘读取，一个线程用于加密，一个线程用于上传。`BlockingCollection<byte[]>`为了在它们之间进行通信，您可以在每对线程（1-2 和 2-3）之间使用生产者-消费者模式。

但是由于您可以使用 .Net 4.5，因此您可以使用 TPL Dataflow，它非常适合这项任务。使用 TPL 数据流意味着您不会浪费线程来读取和上传（尽管这对您来说很可能并不重要）。更重要的是，这意味着您可以轻松地并行加密每个块（假设您可以这样做）。

你要做的是有一个块用于加密，一个块用于上传和一个异步任务（实际上，它不必是一个完整的`Task`）用于从文件中读取。可以将用于加密的块配置为并行执行，并且两个块都应配置为具有最大容量（否则，节流将无法正常工作，并且将尽可能快地读取整个文件，这可能导致 OutOfMemoryException）。

在代码中：

```
var uploadBlock = new ActionBlock<byte[]>(
    data => uploadStream.WriteAsync(data, 0, data.Length),
    new ExecutionDataflowBlockOptions { BoundedCapacity = capacity });

var encryptBlock = new TransformBlock<byte[], byte[]>(
    data => Encrypt(data),
    new ExecutionDataflowBlockOptions
    {
        BoundedCapacity = capacity,
        MaxDegreeOfParallelism = degreeOfParallelism
    });

encryptBlock.LinkTo(
    uploadBlock,
    new DataflowLinkOptions { PropagateCompletion = true });

while (true)
{
    byte[] chunk = new byte[chunkSize];
    int read = await fileStream.ReadAsync(chunk, 0, chunk.Length);
    if (read == 0)
        break;
    await encryptBlock.SendAsync(chunk);
}

fileStream.Close();
encryptBlock.Complete();
await uploadBlock.Completion;
uploadStream.Close(); 
```

# sql - 条件连接 SQL

> ID：13963138
> 
> 赞同：1
> 
> 时间：2012-12-19T23:49:10.650
> 
> 标签：sql, tsql, join, inner-join

我希望能够根据我选择的列的值内部连接两个表。

我的查询：

```
SELECT varA, varB, MAX(varC) varC
FROM table1
INNER JOIN table2       ON varB = table2.varB
INNER JOIN @tempTable   ON varA = table1.column
INNER JOIN table3       ON varC = table3.column AND table3.column2 = 1 -- **IF NOT varA = 100**
INNER JOIN table4       ON varC = table4.column  **-- IF varA = 100**
LEFT OUTER JOIN table5  ON table2.column = table5.column AND table5.column2 = 1 AND table5.column3 = 4
GROUP BY varB, varA 
```

**因此，简而言之，如果列（varA）的值不是 100，则在 table4 上进行 INNER JOIN，否则在 table3 上进行 INNER JOIN**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T00:33:14.630

我认为这会得到你想要的结果：

```
LEFT JOIN table3       ON varC = table3.column AND table3.column2 = 1 AND varA <> 100 -- **IF NOT varA = 100**
LEFT JOIN table4       ON varC = table4.column  AND varA = 100   **-- IF varA = 100**
...
WHERE (Table3.Column IS NOT NULL OR Table4.Column IS NOT NULL) 
```

基本上允许连接到任一表，但只返回其中一个连接找到记录的行。如果您想从表中返回实际列作为选择的一部分，那么您可以使用 ISNULL：

```
SELECT ISNULL(Table3.Column, Table4.Column) AS Column 
```

* * *

编辑：我应该补充一点，除非你想使用动态 SQL，否则你不能有条件地加入表。您可以加入或不加入表。我上面概述的内容让您可以对两个表进行连接，然后检查其中一个是否连接（这基本上是内部连接所做的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T00:01:24.557

您的问题不太清楚，如果这不起作用，请提供更多信息，但我认为这是您的答案。

您可以在连接中放置 CASE 语句。

**更新了，试试这个。**

```
INNER JOIN table4 ON (CASE WHEN varA != 100 THEN 1 ELSE 0 END) = 1 AND tablekey=table4key
INNER JOIN table3 ON (CASE WHEN varA = 100 THEN 1 ELSE 0 END) = 0 AND tablekey=table3key 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T00:25:08.177

> 因此，简而言之，如果 varA 不是 100，则在 table3 上进行 INNER JOIN，否则在 table4 上进行 INNER JOIN。

这不能在一个查询中有效地完成。在执行时，数据库必须决定在整个表的基础上执行哪些连接，而不是逐行执行。如果您尝试按照您的建议进行操作，那么您将得到的充其量是数据库将同时加入`table3`和`table4`. 在最坏的情况下，连接将是笛卡尔连接（不受限制的“所有行 * 所有行”连接）。

所以你只有这两个选择：

1.  加入两个表，并逐行选择是从该行生成数据`table3`还是`table4`为该行生成数据。
2.  将查询拆分为两个由 连接的查询`UNION`。其中一个查询与 连接`table3`，另一个与 连接`table4`。您使用条件来控制第一个查询生成哪些行，第二个查询生成哪些行；即，在 WHERE 子句中与 has 连接的子查询，与 has 连接的`table3`子查询。`varA != 100``table4``varA = 100`

# javascript - 将圆圈添加到 gmaps4rails 时，我收到一条错误消息：TypeError: 'undefined' is not an object (evalating 'circle.serviceObject.getBounds'

> ID：13963140
> 
> 赞同：12
> 
> 时间：2012-12-19T23:49:15.623
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, gmaps4rails

我的目标是添加圆圈代替标记，以显示工具模型中每个工具的大致位置区域。我能够根据 SO 上的其他答案添加圆圈，但是使用以下代码我在这个问题的标题中得到了错误。

在我的控制器中：

```
def index
  @tools = Tool.all
  @json=Tool.all.to_gmaps4rails

  @circles = Tool.all{|t| {:longitude => t.longitude, :latitude => t.latitude, :radius =>"1000" }}.to_json 
  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @tools }
  end
end 
```

在我的视图文件中：

```
<%= gmaps({ "markers" => {"data" => @circles}, "circles" => { "data" => @circles} }  ) %> 
```

JavaScript 错误将我引导至 gmaps4rails.googlemaps.js 文件中的第 401 行：

```
 this.boundsObject.extend(circle.serviceObject.getBounds().getNorthEast()); 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:29:21.550

休息一下`this.boundsObject.extend(circle.serviceObject.getBounds().getNorthEast());`

并打印我们的圆圈

如果我没记错@circle in rails 格式不正确

```
 @circles = Tool.map{|t| {:longitude => t.longitude, :latitude => t.latitude, :radius =>"1000" }}.to_json 
```

它应该是 map 而不是 all 来映射所有数组并在 json 中打印出来

# android - android创建小部件菜单图标

> ID：13963141
> 
> 赞同：1
> 
> 时间：2012-12-19T23:49:27.693
> 
> 标签：android, android-widget, widget, icons, android-launcher

在 Android 3.0+ 上浏览小部件菜单时，一些小部件具有简单的图标，而其他小部件则具有更多小部件实际外观的屏幕截图。

我将如何在我自己的小部件中描绘后者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T23:54:18.967

您可以使用 Android 模拟器上的小部件预览应用程序截取小部件的屏幕截图并通过电子邮件将其发送给自己： ![在此处输入图像描述](../Images/86313ced460abe0452b35bdde475eeae.png)

然后在您的 appwidget-provider XML 中，您可以指定：

```
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    [...]
    android:previewImage="@drawable/preview"
    /> 
```

# css - 有没有办法只为特定的包装器定义 CSS？

> ID：13963145
> 
> 赞同：0
> 
> 时间：2012-12-19T23:49:53.513
> 
> 标签：css

我的意思是：例如，我有一个网页和一个包含应用程序的 div。页面有自己的样式，但我希望该应用程序有自己的样式（例如 twitter 引导样式）。那么有没有办法只为具体的包装器定义 CSS，以便应用程序的这些样式不会影响页面本身的样式。

当然我们总是可以写那种`#wrapper .btn { // style }`，但是同样的 twitter bootstrap 有 100KB 的样式，所以管理所有的样式会有点复杂。如果有类似的结构，那就完美了：

```
#wrapper {
     .btn { //style }
     .btn-group { // style }
} 
```

这相当于

```
#wrapper .btn { // style }
#wrapper .btn-group { // style } 
```

我希望在 CSS 中有解决方案。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T23:56:11.690

Twitter Botstrap 使用较少的 css [http://lesscss.org/](http://lesscss.org/)它可以让你完全按照你提到的那样做：

```
#wrapper {
     .btn { //style }
     .btn-group { // style }
} 
```

它是这样写的，然后编译成传统的 css。根据您使用的框架/语言（.net、php），有特定于它们的插件。我们使用 dot.less 和 bootstrap，效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T23:56:20.123

不是纯 CSS。您需要使用 CSS 预处理器。其中有一些，它们都支持这种嵌套样式。

以下是一些最受欢迎的：

*   少[http://lesscss.org/](http://lesscss.org/)
*   萨斯[http://sass-lang.com/](http://sass-lang.com/)
*   手写笔[http://learnboost.github.com/stylus/](http://learnboost.github.com/stylus/)

* * *

还有[范围](http://css-tricks.com/saving-the-day-with-scoped-css/)样式，但目前浏览支持很差。

# gcc - GCC 函数后缀“isra”是什么意思？

> ID：13963150
> 
> 赞同：19
> 
> 时间：2012-12-19T23:50:14.710
> 
> 标签：gcc, profiling, name-mangling

在分析使用 gcc 编译的程序时，我注意到像`foo.isra.3`. 说明什么`isra`？我注意到其中一个函数仅在少数地方被调用，并且其中一个参数始终指定为文字值。也许这意味着它是针对某些参数优化的函数的变体？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-20T00:04:13.910

根据对此[错误报告](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=42290)的评论（以及我能找到的类似评论）：

> ISRA 是由 IPA SRA 创建的变量的名称...

IPA SRA 是一个[优化选项](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)：

> **-fipa-sra**
> 
> 执行聚合的过程间标量替换，删除未使用的参数以及通过值传递的参数替换通过引用传递的参数。
> 
> 在 -O2、-O3 和 -Os 级别启用。

所以很可能，它是具有这些优化的函数的一个版本。

在您提到的情况下，它可能会用按值传递替换按引用传递，因为它知道通过引用传递文字是没有意义的。

# java - 更改文本视图时实现图像更改

> ID：13963151
> 
> 赞同：1
> 
> 时间：2012-12-19T23:50:22.853
> 
> 标签：java, android

我正在设置一个 Click Counter android 应用程序。最大计数为 500，计数显示在 TextView 字段中。
我希望能够在计数在 0-100 之间时显示一个图像，然后在计数在 101-400 之间时显示另一个图像，然后在 401-500 之间再次显示第一张图像。我是 Java 新手，不知道如何设置。到目前为止，这是我的代码：

```
import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences.Editor;
import android.media.AudioManager;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.view.View.OnClickListener;
import android.widget.EditText;
import android.preference.PreferenceManager;

public class wazeefa extends Activity {

//Count Button  
TextView txtCount;
Button btnCount;
int count = 0; 
Button wmute;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.wazeefa);

    //button sound
    final MediaPlayer mpButtonClick = MediaPlayer.create(this, R.raw.countbutton);

    txtCount = (TextView)findViewById(R.id.wcount); 
    txtCount.setText(String.valueOf(count));
    btnCount = (Button)findViewById(R.id.wclick);   

    btnCount.setOnClickListener(new OnClickListener() {
        public void onClick(View V) {
           count++; 
           if (count > 500) 
               count = 0;
           txtCount.setText(String.valueOf(count));
           mpButtonClick.start(); 
        }});
    ;}
    } 
```

在 David's/Shreya 的建议之后，新代码如下所示：

```
public void onClick(View V) {
        ImageView image = (ImageView) findViewById(R.id.imageview);
           count++; 
           if (count > 500) count = 0;
           if (count < 1) image.setImageResource(R.drawable.duroodimage); 
           if (count > 0) image.setImageResource(R.drawable.duroodimage);
           if (count > 100) image.setImageResource(R.drawable.zikrimage); 
           if (count > 400) image.setImageResource(R.drawable.duroodimage);
           txtCount.setText(String.valueOf(count));
           mpButtonClick.start(); 
        }});
    ;} 
```

但是当达到相关计数时，图像不会改变......

ImageView 的 XML 代码：

```
<ImageView
    android:id="@+id/imageview"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T23:55:29.887

您可以将更改图像的代码放在 btnCount 的 onClickListener 中。

```
btnCount.setOnClickListener(new OnClickListener() {
    public void onClick(View V) {
        ImageView image = findViewById(...); // ... is the id of ImageView
        count++; 
        if (count > 500) count = 0;
        if (count > 100) image.setDrawable(...); // 100~200
        if (count > 200) image.setDrawable(...); // 200~300
        // ... and then 300~400 and 400~500
        txtCount.setText(String.valueOf(count));
        mpButtonClick.start(); 
    }
}); 
```

# python - 在 python 中抓取页面时保留非拉丁字符

> ID：13963153
> 
> 赞同：3
> 
> 时间：2012-12-19T23:50:41.780
> 
> 标签：python, encoding, python-unicode, non-latin

我有一个程序可以抓取一个页面，解析它的任何链接，然后下载链接到的页面（听起来像一个爬虫，但它不是）并将每个页面保存在一个单独的文件中。用于保存的文件名是页面 url 的一部分。例如，如果我找到指向 www.foobar.com/foo 的链接，我会下载该页面并将其保存在名为 foo.xml 的文件中。

稍后，我需要遍历所有此类文件并重新下载它们，使用文件名作为 url 的最后一部分。（所有页面都来自一个站点。）

它运行良好，直到我在 url 中遇到非拉丁字符。该站点使用utf-8，因此当我下载原始页面并对其进行解码时，它可以正常工作。但是当我尝试使用解码后的 url 下载相应的页面时，它不起作用，因为我认为编码是错误的。我尝试在文件名上使用 .encode() 将其改回，但它没有任何改变。

我知道这一定很简单，并且是我没有正确理解编码问题的结果，但我已经为此苦苦挣扎了很长时间。我已经多次阅读 Joel Spolsky 对编码的介绍，但我仍然无法完全确定在这里做什么。谁能帮我？

非常感谢，bsg

这是一些代码。我没有收到任何错误；但是当我尝试使用页面名称作为 url 的一部分下载页面时，我被告知该页面不存在。当然不是——没有像 abc/x54 这样的页面。

澄清一下：我下载了一个页面的 html，其中包含指向 www.foobar.com/Mehmet Kenan Dalbaşar 的链接，例如，但它显示为 Mehmet_Kenan_Dalba%C5%9Far。当我尝试下载页面 www.foobar.com/Mehmet_Kenan_Dalba%C5%9Far 时，页面是空白的。如何保留 www.foobar.com/Mehmet Kenan Dalbaşar 并在需要时将其返回到站点？

```
try:
    params = urllib.urlencode({'title': 'Foo', 'action': 'submit'})
    req = urllib2.Request(url='foobar.com',data=params, headers=headers)
    f = urllib2.urlopen(req)

    encoding = f.headers.getparam('charset')

    temp = f.read() .decode(encoding)

    #lots of code to parse out the links

    for line in links:
    try:
        pagename = line
        pagename = pagename.replace('\n', '')
        print pagename

        newpagename = pagename.replace(':', '_')
        newpagename = newpagename.replace('/', '_')
        final = os.path.join(fullpath, newpagename)
        print final
        final = final.encode('utf-8')
        print final

         ##only download the page if it hasn't already been downloaded
        if not os.path.exists(final + ".xml"):
                print "doesn't exist"
                save = open(final + ".xml", 'w')
                save.write(f.read())
                save.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T03:41:58.113

正如您所说，您可以使用[请求](http://docs.python-requests.org/en/latest/)而不是 urllib。

假设您获得了网址“www.foobar.com/Mehmet_Kenan_Dalba%C5%9Far”，然后将其作为参数传递给请求，如下所示：

```
import requests
r=requests.get("www.foobar.com/Mehmet_Kenan_Dalba%C5%9Far") 
```

现在您可以使用 r.text 获取内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T10:05:50.113

如果您有一个带有例如代码'%C5' 的url，并且想要使用实际字符\xC5 来获取它，则调用`urllib.unquote()`该url。

# javascript - 径向渐变

> ID：13963156
> 
> 赞同：2
> 
> 时间：2012-12-19T23:50:56.557
> 
> 标签：javascript, css, gradient, geometry

如何在**不**使用 CSS3 ( `-webkit-radial-gradient`) 的情况下为圆形创建径向渐变？所以可以说我有一个圈子：

```
#circle {
    height: 200px;
    width: 200px;
    border-radius: 50%;
} 
```

你如何为这个圆画一个径向渐变？

**编辑：**我想在没有任何外部库的情况下做到这一点。此外，我正在创建基于色标的渐变。例如（0,255）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T00:13:50.090

您可以使用以下几种方法：

1.  您可以创建一个[带有径向渐变的 svg 文件](http://www.w3schools.com/svg/svg_grad_radial.asp)，并将其设置为背景使用`background-image: url()`
2.  可以创建渐变的png或jpg，设置方法同上

如果您不想使用外部文件，则可以对其进行 base64 编码并使用[数据 url](http://dataurl.net/#look)。

您可以使用`background-size: contain`使渐变适合自己的圆形（或椭圆！）的大小，只需确保使渐变具有足够高的分辨率，使其永远不会像素化。

编辑：[这是一个小提琴，所以你可以在行动中看到它](http://jsfiddle.net/e2LrV/)。由于数据 url 是编码的，这里是 svg 文件的来源：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" 
  "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="512px" height="512px" viewBox="-256 -256 512 512"
  xmlns="http://www.w3.org/2000/svg" version="1.1" >
<defs>
  <radialGradient id="grad" cx="50%" cy="50%" r="50%">
    <stop stop-color="white" offset="0%"/>
    <stop stop-color="black" offset="100%"/>
  </radialGradient>
</defs>
<circle r="256px" fill="url(#grad)" />
</svg> 
```

[您可以修改色标，然后使用此工具](http://dataurl.net/#dataurlmaker)重新编码数据 uri

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T00:57:51.287

到目前为止，径向渐变还没有标准化或广泛支持的语法。

使用 CSS 执行此操作的最佳选择是使用 CSS 生成器（例如[http://westciv.com/tools/radialgradients/](http://westciv.com/tools/radialgradients/)或[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)）。这些站点为您处理为每个不同浏览器编写语法。如果您使用的是 LESS 或 SASS，您还可以考虑获得一个混合来为您处理变化。

如果浏览器特定的 CSS 不适合您，最好的选择是创建背景图像（无论是 PNG 或 SVG 文件）。

# php - 如果超过 5mb，PHP 停止远程文件下载

> ID：13963158
> 
> 赞同：7
> 
> 时间：2012-12-19T23:51:05.803
> 
> 标签：php

如果文件超过 5mb，如何阻止远程文件下载文件？如果我在传输时停止它，文件是否会保存在其他临时目录或内存中？我怎么会知道？这是我当前的代码：

```
$url = 'http://www.spacetelescope.org/static/archives/images/large/heic0601a.jpg';
$file = '../temp/test.jpg';
file_put_contents($file, file_get_contents($url)); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T00:04:35.693

有很多方法可以做到这一点，但因为你目前正在使用`file_get_contents()`，所以我会这样做：

*   使用打开远程文件`fopen()`
*   读取文件并使用增量保存它`fread()`- 这允许您跟踪当前大小并在超过阈值时抛出和错误。

像这样的东西：

```
$url = 'http://www.spacetelescope.org/static/archives/images/large/heic0601a.jpg';
$file = '../temp/test.jpg';
$limit = 5 * 1024 * 1024; // 5MB

if (!$rfp = fopen($url, 'r')) {
  // error, could not open remote file
}
if (!$lfp = fopen($file, 'w')) {
  // error, could not open local file
}

// Check the content-length for exceeding the limit
foreach ($http_response_header as $header) {
  if (preg_match('/^\s*content-length\s*:\s*(\d+)\s*$/', $header, $matches)) {
    if ($matches[1] > $limit) {
      // error, file too large
    }
  }
}

$downloaded = 0;

while (!feof($rfp) && $downloaded < $limit) {
  $chunk = fread($rfp, 8192);
  fwrite($lfp, $chunk);
  $downloaded += strlen($chunk);
}

if ($downloaded > $limit) {
  // error, file too large
  unlink($file); // delete local data
} else {
  // success
} 
```

注意：在您收到任何文件之前检查文件头以检查文件是否太大是很有诱惑力的`Content-Length:`- 如果您愿意，您仍然可以这样做，但不要相信值！标头本质上是一个任意值，虽然使用与文件大小不匹配的内容长度会违反协议，但它可以用来欺骗系统下载违反规则的文件。即使您确实检查了此值，您也需要计算字节数。

您也可以通过数据回调使用 curl 来执行此操作，但我认为这是一个不太令人满意的解决方案，主要是因为 curl 需要字符串函数名称而不是标准泛型`callable`类型，这意味着您要么需要使用全局变量或`static`变量以跟踪下载的内容长度，这两者都不可接受（恕我直言）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T00:06:01.050

至于获取 URL 并限制大小，这并不太难……但`file_get_contents`不会这样做。您可以`fopen`使用 url，并`stream_get_meta_data`在流上使用来获取有关流的信息数组。如果我正在正确阅读[示例](http://php.net/manual/en/function.stream-get-meta-data.php#example-3828)（并且如果传输编码不是“分块”），您会`Content-Length`在其中找到标题，它将告诉您文件大小。如果该值已设置并且超过您的限制，则保释。

如果流元数据没有该信息，或者信息表明文件足够小，则您仍然拥有流本身；您仍然可以`fread`从远程文件`fwrite`到本地文件，直到您全部阅读或达到限制。当然，如果你达到了这一点，一旦你达到限制，文件仍然存在；你必须自己删除它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T00:06:05.943

这是不可能的`file_get_contents`- 您需要使用 PHP cURL 扩展来获取文件大小。

```
<?php
$max_length = 5 * 1024 * 1024;
$url = 'http://www.spacetelescope.org/static/archives/images/large/heic0601a.jpg';
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_NOBODY, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
$data = curl_exec($ch);
curl_close($ch);
if ($data === false) {
  echo 'cURL failed';
  exit;
}
$contentLength = 'unknown';
if (preg_match('/Content-Length: (\d+)/', $data, $matches)) {
  $contentLength = (int)$matches[1];
}
echo "Content-Length: $contentLength\n";

if ($contentLength > $max_length) {
    echo "File is too large\n";
} else {
    echo "File size is ok\n";
} 
```

将其包装在一个函数中并使用它来检查 URL - 任何太大的东西都可以跳过。

**缺点：**

此方法仅`Content-Length`在服务器返回标头时有效 - 并非所有服务器都表现良好，并且并非所有服务器都会返回正确的长度。

**优势：**

无需下载和写入`$max_length`字节。此方法将更快且资源消耗更少。

修改自：

[http://php.net/filesize#92462](http://php.net/filesize#92462)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T00:08:54.960

这是 DaveRandom 解决方案的一个变体，但在完全加载之前不写入文件。

```
<?php
define('MAXMB', 5);
define('BYTESPERMB', 1048576);

$maxsize = MAXMB * BYTESPERMB;

$handle = fopen("http://www.example.com/", "rb");
$contents = '';
$completed = true;
while (!feof($handle)) {
  $chunk = fread($handle, 8192);

  $size += strlen($chunk);
  if ($size > $maxsize) {
      $completed = false;
      break;
  }
  $contents .= $chunk;
}
fclose($handle);

if ($completed) {
  // File appears to be completely downloaded so write it --
  file_put_contents('path/to/localfile', $contents);

} else {
  // It was too big
} 
```

# iphone - 游戏物理 - 不是很逼真

> ID：13963160
> 
> 赞同：0
> 
> 时间：2012-12-19T23:51:19.210
> 
> 标签：iphone, cocos2d-iphone, sprite, physics, game-physics

在一个简单的游戏（cocos2d）中，我制作了一个小型物理引擎来移动精灵，以便它可以跳跃和站立在平台等上。

为了更新位置（垂直运动），我在每次更新中使用基本运动学方程：

*   位置 = oldPosition + 速度(delta) +1/2(gravity)(delta)^2
*   速度 = oldVelocity + (gravity)(delta)

出于某种原因，游戏看起来不太逼真。尽管我的重力有多大，但在弧顶附近似乎需要很长时间。如果我想让我的精灵跳相同的高度，但减速和加速更快，但仍然跳得和以前一样高，我应该怎么做？我希望这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T21:27:56.453

这里的问题是你在物理上犯了一个错误！但这没关系，因为它很容易解决。

在精灵位置调用更新方法时，应首先设置加速度。我假设这个游戏的重力是一个常数，所以你只需要设置一次。（-9.81，或类似的东西。）

然后，您希望通过速度 = old_velocity + 加速度 * 时间来更新角色在 y 方向上的速度。

完成此操作后，您然后以类似的方式更新位置：位置 = old_position + 速度 * 时间。

仅当 delta 是总经过时间而不是时间步长时，您用于更新位置的等式才有效！（我假设 delta 是一个时间步长，因为这就是物理游戏通常的编程方式。）

我希望这有帮助！如果您想了解更多信息，请查看 suvat 方程，如果您知道初始速度和恒定加速度，您可以计算最终位置，因为您的游戏在跳跃和碰撞时速度会发生变化，所以它不现实也就不足为奇了！有更多问题，请发表评论，我会尽力为您提供进一步的帮助。

编辑：我重新编程了你在这里所做的一些使用 OpenGL 绘制的框。您更新职位的方法似乎不起作用。如果 or 时间步长为 1.0d，这些框似乎只会正确落下`dt`，我不知道为什么。然后，当它们与某物发生碰撞时，它们会一起停止而不是弹跳。我不确定究竟是为什么。

但是，屏幕上还有另一个使用我描述的物理原理的框： `v = u + a*t`并且`s = s_last + v*t` 该框完全按照预期落下并正确反弹。由于简化，能量在弹跳中损失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T01:03:30.507

您可能更愿意在您的 cocos2d-iphone 游戏中尝试 Box2d 或 Chipmunk 物理引擎，以获得更逼真的效果。另外，它们相对容易实现。

无需制作自己的物理系统——记住让技术为你工作；D

# google-apps-script - 如何通过脚本设置验证？

> ID：13963161
> 
> 赞同：0
> 
> 时间：2012-12-19T23:51:30.607
> 
> 标签：google-apps-script, google-sheets

我正在使用列表范围来验证列中的数据。如何通过脚本设置此验证？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T02:10:25.307

请参阅[`Range.setDataValidations(dataValidation)`](https://developers.google.com/apps-script/reference/spreadsheet/range#setDataValidations%28DataValidation%29)。

# forms - Express.js 表单处理和错误检查——正确的方法

> ID：13963166
> 
> 赞同：5
> 
> 时间：2012-12-19T23:51:56.213
> 
> 标签：forms, node.js, express

我在模板中有一个表单，我根据`GET`请求呈现：

```
app.get('/register', function (req, res) {
  res.render('register', {
      title: 'Register'
    , twitterDetails: req.session.twitterDetails
    }
  );
}); 
```

`POST`然后我在请求中处理表单：

```
app.post('/register', function (req, res, next) {
  // Generic validation
  req.assert('name', 'Name is empty').notEmpty();
  req.assert('username', 'Username is empty').notEmpty();
  // Email validation
  req.assert('email', 'Email is invalid.').isEmail();
  req.assert('email', 'Email field is empty').notEmpty();
  // Password validation
  req.assert('password', 'Password too short. Must be 6 characters or more.').len(6);
  req.assert('password', 'Passwords do not match.').is(req.body.confirmPassword);
  req.assert('password', 'Password field is empty').notEmpty();
  req.assert('confirmPassword', 'Confirm password field is empty').notEmpty();
  var errors = req.validationErrors(true);
  if (errors) {
    console.log(errors);
    // What do to if there are errors?
  }
  // If there are no errors, continue handling the form…
}); 
```

在这个表单处理程序中，我正在检查`express-validator`模块的错误。这很好，但我的问题是如果出现错误该怎么办。AFAIK，有两种选择：

1.  将用户重定向到`/register`，`req.flash`用于将错误传递给下一个请求
2.  重新渲染模板并将错误直接传递给模板

使用第一个选项，我会冒着让用户远离`POST`. 我也可以使用他们填写的数据抢占表单`req.flash`，但是刷新页面时这会消失。

对于第二个选项，我是在重复自己——特别是如果我向模板发送大量变量，这些变量都必须重复。我还需要通过模板传递所有表单数据并用这些值填写表单。

处理这样的表格的正确程序是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T07:54:42.030

使用选项 1。这称为[POST/Redirect/GET 模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)，在任何地方都可以使用。

如果您害怕丢失数据，请使用会话。这就是他们的目的。在会话期间保持状态。

不要忘记 HTTP 是无状态的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-09T10:16:23.120

在我看来，您应该使用选项 2。

POST/Redirect/GET 模式主要适用于用户成功提交并有助于避免重复发布。这并不意味着您也应该将它用于**失败的提交**。

对于失败的提交，通常的做法是不重定向到另一个页面，而是简单地重新呈现带有错误消息的表单。

选项 1 确实略微提高了可用性，因为用户在提交尝试失败后刷新页面时不会重新提交。另一方面，处理起来要复杂得多，因为它需要将表单数据存储在会话或 GET 参数中。

总的来说：虽然选项 1 在可用性方面可能是最好的，但选项 2 仍然是常见的做法，而且更实用。

另请参阅：[如何在 Post/Redirect/Get 模式中处理服务器端错误？](https://stackoverflow.com/questions/599086/how-are-server-side-errors-handled-in-post-redirect-get-pattern)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T07:50:44.777

Heres an example:

I add this to the tag at the bottom of the page inside my ./views/layout.ejs:

```
<script>
var app = window.app || {};
app.req = app.req || {};
app.req.err = <%- JSON.stringify(err) %>;
app.req.q = <%- JSON.stringify(q) %>;
</script> 
```

Example real data from a POST error:

```
app.req.err = {"email":{"param":"email","msg":"Enter email","value":""}};
app.req.q = {"username":"chovy","email":"","password":"somepassword"}; 
```

I have middleware on each POST that does this:

```
 res.locals.q = req.body;
  res.locals.err = false; 
```

If I encounter an error, then I populate it: ./routes/signup.js:

```
 req.assert('email', 'Enter email').notEmpty().isEmail();
  req.assert('username', 'Enter username').notEmpty().isAlphanumeric().len(3,20);
  req.assert('password', 'Enter password').notEmpty().notContains(' ').len(5,20);

  res.locals.err = req.validationErrors(true); 
```

Then my global client side js runs this routine on every page load, which basically checks for app.req.err and handles form errors:

```
app.utils.form.errors(); 
```

Here is the function:

```
app.utils.form.errors = function(err){
    err = err || app.req.err;
    app.utils.form.prefill();
    for ( var e in err ) {
        var $field = $('[name='+e+']'),
        $el = $field.parents('p');

        $el.addClass('err');
        $el.append('<span class="msg">'+err[e].msg+'</span>');
    }
}; 
```

Prefill the form from app.req.q:

```
app.utils.form.prefill = function(){
    for ( var param in app.req.q ) {
        var $field = $('[name='+param+']');
        $field.val(app.req.q[param]);
    }
}; 
```

You can see it in action if you go to this signup form and just submit it blank, and then view source: [http://wishd.me/signup](http://wishd.me/signup) the javascript is in [http://wishd.me/app.js](http://wishd.me/app.js)

The trick is leaving enough room for inline error messages on your form fields because all errors will be handled the same regardless of which field it is on. Of course I do have a few exceptions with css that might re-position the inline error message, color the label red, etc.

[http://wishd.me/style.css](http://wishd.me/style.css) look for .err class

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-16T16:35:02.023

我正在使用 expressjs4.0 在验证后重新填充表单字段：

```
router.route('/posts/new')
 .get(function(req, res) {
 res.render('posts/new', new Post({}));
}); 
```

下面 res.render 中的第二个参数将在视图中设置一些变量。

```
res.render('posts/new', new Post({})); 
```

在我看来，我将表单字段设置如下：

```
...
<input type="text" name="title" value="<%- post.title %>">
<textarea name="article"><%- post.article %></textarea>
... 
```

当您提交此表单时，它应该被您的路由器捕获，如下所示：

```
router.route('/posts')
  .post(function(req, res) {
    var post = new Post(req.body)
      post.save(function(err) {
       if (err) {
         res.locals.errors = err.errors;
         res.locals.post = post;
         return res.render('posts/new');
       }
      return res.redirect('/posts');
  });
  ...
}) 
```

这行代码重置了您视图中的表单域

```
res.locals.post = post; 
```

我希望有人觉得这很有用；）

# jsf - 无法使用 from-view-id '/pages/index.xhtml' 找到匹配的导航案例

> ID：13963170
> 
> 赞同：4
> 
> 时间：2012-12-19T23:52:28.117
> 
> 标签：jsf, view, navigation

我在 JSF 页面之间导航时遇到问题。当您单击命令按钮时，我的大部分导航都会发生。命令按钮的操作返回一个字符串。

我的登录页面是我的欢迎页面。这是在我的 web.xml 中：

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping>
<welcome-file-list>
    <welcome-file>faces/pages/index.xhtml</welcome-file>
</welcome-file-list> 
```

在我浏览器的地址栏中，页面显示为：

```
http://localhost:8080/ui/faces/pages/index.xhtml 
```

一旦发生身份验证，该函数将返回此字符串：

```
"/ui/faces/pages/home.xhtml" 
```

我要导航到的文件位于：

```
pages/home.xhtml 
```

但是，当导航应该发生时，我收到此错误：

> 无法找到匹配的导航案例与 from-view-id '/pages/index.xhtml' 的操作 '#{indexPageController.login()}' 结果为 '/ui/faces/pages/home.xhtml'

谁能帮我理解正确导航到页面所需的相对路径？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T00:12:05.837

您不应在导航案例结果中包含上下文路径`/ui`或`FacesServlet`映射。`/faces`它应该只表示唯一的视图 ID，它基本上只是物理视图文件的绝对路径，相对于 web 内容根目录或相对于当前视图 ID。

因此，绝对（以 开头`/`）到 webcontent 根：

```
/pages/home.xhtml
```

或相对于当前视图 ID（不以 开头`/`）（假设您在 中`/pages/index.xhtml`）：

```
主页.xhtml
```

请注意，不支持点斜杠`./`和双点斜杠表示法。`../`

甚至没有文件扩展名；JSF 将暗示 Facelets 默认后缀，该后缀默认为context 参数`.xhtml`并可通过context 参数进行[配置：](https://stackoverflow.com/questions/3008395/jsf-facelets-sometimes-i-see-the-url-is-jsf-and-sometimes-xhtml-why/)`javax.faces.DEFAULT_SUFFIX`

```
/页面/主页
```

```
家
```

毕竟，如果您意识到上下文路径`/ui`和`FacesServlet`映射在 webapp 内部`/faces/*`是*无法控制的，那也是有意义的！*如果它们在外部发生更改，那么理论上您需要更改整个代码库中的所有导航案例结果并重建 webapp。这没有任何意义。因此，JSF 已经为您处理好它们。

### 也可以看看：

*   [如何在 JSF 中导航？如何使 URL 反映当前页面（而不是上一个页面）](https://stackoverflow.com/questions/15521451/how-to-navigate-in-jsf-how-to-make-url-reflect-current-page-and-not-previous-o)
*   [h:button 和 h:commandButton 之间的区别](https://stackoverflow.com/questions/13070537/difference-between-hbutton-and-hcommandbutton)
*   [什么时候应该使用 h:outputLink 而不是 h:commandLink？](https://stackoverflow.com/questions/4317684/when-should-i-use-houtputlink-instead-of-hcommandlink)
*   [用于链接/导航到其他 JSF 页面的 URL](https://stackoverflow.com/questions/30683584/what-url-to-use-to-link-navigate-to-other-jsf-pages)

# java - java VLCJ教程 java.lang.UnsatisfiedLinkError

> ID：13963171
> 
> 赞同：3
> 
> 时间：2012-12-19T23:52:47.960
> 
> 标签：java, vlcj, unsatisfiedlinkerror

我正在尝试使用 VLCJ，并陷入了他们的[第一个教程](http://www.capricasoftware.co.uk/vlcj/tutorial1.php)。

这是我的代码：

```
package vlcj.tutorial1;

import uk.co.caprica.vlcj.binding.LibVlc;
import uk.co.caprica.vlcj.runtime.RuntimeUtil;

import com.sun.jna.Native;
import com.sun.jna.NativeLibrary;

public class Tutorial1A
{
    public static void main(String[] args)
    {
        // Ensure we're using the 32bit jdk.
        System.out.println("jdk version:  " + System.getProperty("sun.arch.data.model") + " bits.");

        NativeLibrary.addSearchPath(RuntimeUtil.getLibVlcLibraryName(), "C:/Program Files (x86)/VideoLAN/VLC/sdk/lib");
        Native.loadLibrary(RuntimeUtil.getLibVlcLibraryName(), LibVlc.class);
    }
} 
```

这是我得到的输出和异常：

```
jdk version:  32 bits.
Exception in thread "main" java.lang.UnsatisfiedLinkError: Unable to load library 'libvlc': The specified module could not be found.

at com.sun.jna.NativeLibrary.loadLibrary(NativeLibrary.java:169)
at com.sun.jna.NativeLibrary.getInstance(NativeLibrary.java:242)
at com.sun.jna.Library$Handler.<init>(Library.java:140)
at com.sun.jna.Native.loadLibrary(Native.java:368)
at com.sun.jna.Native.loadLibrary(Native.java:353)
at vlcj.tutorial1.Tutorial1A.main(Tutorial1A.java:17) 
```

我确定我使用的是 32 位 jdk 和 32 位版本的 VLC。

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T01:40:02.533

尝试使用`{Install Path}/VideoLAN/VLC`(ie `C:/Program Files (x86)/VideoLAN/VLC`) 代替。

我在该文件夹中查找`libvlc.dll`并`libvlcore.dll`在该文件夹中确保已安装库，但这只是我；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T00:34:24.320

尝试在路径中使用双反斜杠：

`"C:\\Program Files (x86)\\VideoLAN\\VLC\\sdk\\lib"`

代替：

`"C:/Program Files (x86)/VideoLAN/VLC/sdk/lib"`

# image - 反转二维 fft 的顺序是否重要？

> ID：13963174
> 
> 赞同：0
> 
> 时间：2012-12-19T23:53:15.373
> 
> 标签：image, fft, ifft

我一直在尝试先在行上应用 fft，然后再在第一个应用程序产生的列上应用 fft。

我的问题是，当我尝试应用 ifft 时，我是否需要先将其应用到列，然后再应用到行，反之亦然还是没关系？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:49:30.647

不，应该没关系。你在看什么？如果您颠倒顺序（行和列）并且得到不同的答案，则可能有错误。您是使用库进行 FFT 还是滚动您自己的方法？而且...如果您使用的是图书馆，他们是否有可用的 2D 版本？

# jsf - dataTable 不在托管 Bean 中设置值

> ID：13963176
> 
> 赞同：3
> 
> 时间：2012-12-19T23:53:26.437
> 
> 标签：jsf, primefaces, jsf-2

我想从 dataTable 中获取选择值以在我的托管 Bean 中设置，但在托管 bean 中只需设置为空。如何设置选择值？

```
 <h:form id="formcancel">
    <p:dataTable id="tablaprecan" var="xd" value="#{cancelacionMB.resultados}" rowKey="#{xd.folio}"
                 selection="#{cancelacionMB.cliente}" selectionMode="single" >
        <f:facet name="header">
            Solicitudes de Precancelacion
        </f:facet>

        <p:column headerText="Folio">
            <h:outputText value="#{xd.folio}" />
        </p:column>

        <p:column headerText="Cliente">
            <h:outputText value="#{xd.id_cliente}" />
        </p:column>

        <p:column headerText="Nombre del Cliente">
            <h:outputText value="#{xd.nombre_cliente}" />
        </p:column>

        <p:column headerText="Fecha Precancelacion">
            <h:outputText value="#{xd.timestamp_precancelacion}" />
        </p:column>
        <f:facet name="footer">
            <p:commandButton id="viewButton" value="Cancelar Banca" icon="ui-icon-gear"
                             update="tablaprecan" actionListener="#{cancelacionMB.cancelarBE}" rendered="true" />
        </f:facet>
    </p:dataTable>
</h:form> 
```

这是我的托管 Bean 私人 CancelacionMB 客户；

```
public CancelacionMB getCliente() {
    return cliente;
}

public void setCliente(CancelacionMB cliente) {
    this.cliente = cliente;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:57:58.527

如果 bean 是请求范围的，并且在（后）构造期间不保留数据，但仅在某些操作方法期间，则此构造将失败。请求范围的 bean 在响应结束时被丢弃。当您选择一行并提交表单时，将创建一个全新的表单，其中所有属性都设置为默认值（或由它构成的（后）构造函数）。

如果您正在以某种操作方法准备数据，例如在提交搜索表单之后，那么您应该将 bean 放在视图范围内，以便在后续回发请求中保持数据活动。

```
@ManagedBean
@ViewScoped
public class CancelacionMB {
    // ...
} 
```

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)

# haskell - Haskell：带参数的类型（编辑：又名依赖类型）

> ID：13963178
> 
> 赞同：2
> 
> 时间：2012-12-19T23:53:34.490
> 
> 标签：haskell, types, set

我刚刚开始在 Haskell 中定义自己的类型，我发现 [http://www.haskell.org/haskellwiki/Type](http://www.haskell.org/haskellwiki/Type)的第 3 节中 关于表示卡片的示例很有用。我想做一些事情，但我不知道如何实现它。我将尝试使用卡片类比进行解释。

我想使用不同的卡片集合。假设我们修复了卡总是有 CardValue 和 Suit，但除了标准系列之外，我还想允许一副有第五套“红宝石”的套牌。我希望能够做一些事情，比如采用 Kind1 和 Kind2 并定义一种卡片 Kind3，它尽可能地适合 Kind1 和 Kind2 的花色组合，以及来自 Kind1 的花色组合。我还想编写一个程序，用户可以输入花色名称等，然后我们可以用她输入的卡片类型进行一些标准的卡片操作。 *我不想做的只是写出有限数量的不同数据类型，因为我事先不知道我所有不同类型的卡片会是什么*。

我可以想象一个涉及大量列表和大量检查以查看事物是否是列表元素的解决方案，但我想这将是一场噩梦，而且效率非常低下。

让我编写一些不起作用的伪代码，但可能比我上面的描述更好地了解我想要做什么。

```
-- this isn't real code!

type Suit = [String]
type CardValue = [String]

data (Card s v) = (Card s v) {suit :: (s :: Suit), value :: (v :: CardValue)}

usualSuit :: Suit
usualSuit = ["Club","Diamond","Heart","Spade"]

flowerSuit :: Suit
flowerSuit = ["Rose","Daisy","Poppy"] 
```

当然我知道这是胡说八道，而且我猜这违反了在编译时定义类型的原则（我可以看到这是一个很好的原则）。

谁能告诉我：

*   有没有办法像我描述的那样做？
*   有没有更好的方法来实现同样的目标？

我也对要阅读的链接/关键字感兴趣，但请注意，我不太了解编程术语，甚至不太了解 Haskell。

我确实想使用 Haskell 来做到这一点——惰性求值和无限列表对我来说非常有用，而且我已经编写了代码来做这些事情。

我试过谷歌搜索并浏览了一些 Haskell 教程（我还是个初学者！）但没有发现任何有用的东西。这可能是因为我不知道要搜索什么词。

谢谢

**编辑**：我担心我没有解释我想做什么。这是一些编译时没有错误的真实代码，并带有解释我希望它做什么的注释。

```
import Data.List

type Suit = String
type Value = Integer
type ListOfSuits = [Suit]
type ListOfValues = [Value]

data Deck = Deck {listofsuits :: ListOfSuits, listofvalues :: ListOfValues } deriving (Show)

sillyDeck :: Integer -> Deck
-- This is some function.  For example, we might have
sillyDeck n = Deck ["Heart","Spade"] [1..n]
-- Note that this defines infinitely many different decks

-- How should I define a card in sillyDeck n?  One option is
data Card = Card {suit :: Suit, value :: Value } deriving (Show)
-- but this doesn't reference the deck I'm using.  I could try
data Card2 = Card2 {suit2 :: Suit, value2 :: Value, deck2 :: Deck } deriving (Show)
-- but then
cardInWrongDeck :: Card2
cardInWrongDeck = Card2 "Cheese" 999 (sillyDeck 3)
-- is valid, when I'd hope for something like a type error.
-- Of course, I could write a function to check that each card is in the
-- deck it claims to be, and apply it regularly, but that's a horrible solution.

-- Is there a better way to do this? 
```

希望这也解释了我的标题：我想定义一个类型（CardOfType 牌组），它将一些牌组类型的牌组作为参数。我想你不能这样做，但我不知道。

我想做的事情（基本上，有一组对象，每个对象都是一组对象）似乎是一件基本的事情——我敢打赌人们以前也遇到过类似的问题，我希望有一些很好的结构方式解决这个我不知道的问题。

**编辑 2：**基于 Philip JF 将我指向 GADT（=广义代数数据类型）并进行了一些阅读，我意识到我正在寻找的东西被称为“依赖类型”。所以我原来的标题“带参数的类型”听起来并不那么荒谬。似乎这些在 Haskell 中不存在。我找到了谈论模拟它们的论文，并阅读了显然支持类型函数的 Ωmega。我仍然不知道是否存在一种具有将值作为参数的类型的语言。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T02:45:21.673

如果您愿意使用高级功能，Haskell 的类型系统几乎可以做任何事情，但我不鼓励在学习 Haskell 的早期使用其中的大部分。在你的情况下，我可能会这样建模

```
data Card s v = Card {suit :: s, value :: v} 
```

然后定义一套西装

```
data UsualSuit = Club | Diamond | Heart | Spade deriving
data FlowerSuit = Rose | Daisy | Poppy 
```

这可以满足您的大部分需求。例如，很容易定义复合套装，如

```
data Rubies = Rubies
type UsualOrRubies = Either UsualSuit Rubies 
```

我认为这完全解决了您在静态情况下的需求。当你有一个动态进入西装的用户时，事情就变得更加复杂了。一种选择是“字符串类型”

```
type StringySuit = String 
```

你可以做一些事情，`GADTs`但除非你给出一个更大的例子来说明你的问题是什么，否则我不知道`String`基于解决方案的问题是什么。实际上，使用 GADT 可以有效地“在运行时创建类型”，但对于初学者来说可能会感到困惑。

# android - 尝试设置默认铃声得到 SecurityException

> ID：13963180
> 
> 赞同：0
> 
> 时间：2012-12-19T23:53:51.943
> 
> 标签：android

我正在尝试使用这个：

```
RingtoneManager.setActualDefaultRingtoneUri(this, RingtoneManager.TYPE_RINGTONE, newUri); 
```

...设置默认铃声。异常消失，类型为`SecurtyException`。

我看着这个：

```
RingtoneManager.setActualDefaultRingtoneUri(this, RingtoneManager.TYPE_RINGTONE, newUri); 
```

...查看是否有任何权限设置在与铃声对应的menefest文件中，找不到任何权限。

以下是我的代码：

```
// make it a ring tone
    void   MakeRingtune( String name)
    {

    File newSoundFile = new File("/sdcard/", "myringtone.oog");

    String strUri = "android.resource://"+getPackageName()+  "/" + "raw/"+name;
    Uri mUri = Uri.parse(strUri);

    ContentResolver mCr = getContentResolver();
    AssetFileDescriptor soundFile;
    try {
           soundFile= mCr.openAssetFileDescriptor(mUri, "r");
       } catch (FileNotFoundException e) {
           MessageBox("Ringtone Manager ","System Error cannot add ringtone ");
           return;  
       }

       try {
          byte[] readData = new byte[1024];
          FileInputStream fis = soundFile.createInputStream();
          FileOutputStream fos = new FileOutputStream(newSoundFile);
          int i = fis.read(readData);

          while (i != -1) {
            fos.write(readData, 0, i);
            i = fis.read(readData);
          }

          fos.close();
       } catch (IOException io) {
           MessageBox("Ringtone Manager ","Could not copy Ringtone, may be due to no sd card");
           return;
       }

//////////////////////////////////////////
       ContentValues values = new ContentValues();
       values.put(MediaStore.MediaColumns.DATA, newSoundFile.getAbsolutePath());
       values.put(MediaStore.MediaColumns.TITLE, "my ringtone");
       values.put(MediaStore.MediaColumns.MIME_TYPE, "audio/oog");
       values.put(MediaStore.MediaColumns.SIZE, newSoundFile.length());
       values.put(MediaStore.Audio.Media.ARTIST, R.string.app_name);
       values.put(MediaStore.Audio.Media.IS_RINGTONE, true);
       values.put(MediaStore.Audio.Media.IS_NOTIFICATION, true);
       values.put(MediaStore.Audio.Media.IS_ALARM, true);
       values.put(MediaStore.Audio.Media.IS_MUSIC, false);

       Uri uri = MediaStore.Audio.Media.getContentUriForPath(newSoundFile.getAbsolutePath());
       Uri newUri = mCr.insert(uri, values);

       try {
           RingtoneManager.setActualDefaultRingtoneUri(this, RingtoneManager.TYPE_RINGTONE, newUri);
       } catch (Throwable t) {
        //   Log.d(TAG, "catch exception");
           MessageBox("Ringtone Manager ","Could not set as your default ringtone ");
           return;
       }

///////////////////////////////////////   
       MessageBox("Ringtone Manager ","Sound Clip Added to your Ringtones");
    } // end methed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T00:30:14.877

“android.permission.WRITE_SETTINGS”是你需要的。

# python - 在 pyodbc / ceodbc 中创建表变量

> ID：13963184
> 
> 赞同：0
> 
> 时间：2012-12-19T23:54:18.433
> 
> 标签：python, sql, tsql, pyodbc

在 pyodbc 和 ceodbc 中，声明一个表变量，向其中插入一些数据，然后从中选择似乎不起作用。

```
cursor.execute("""
DECLARE @LOG TABLE 
    (ID varchar(10))

INSERT INTO @LOG (ID)

SELECT TOP 10 ID
FROM NAME

SELECT ID
FROM @LOG
""")

------------------------------------------------------------
Traceback (most recent call last):
  File "<ipython console>", line 1, in <module>
ProgrammingError: No results.  Previous SQL was not a query. 
```

我想知道这是否是一个真正的问题，或者是否有使它起作用的技巧。SELECT 语句在我的设置中始终运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T00:12:14.180

哦。:oP

```
cursor.execute("""

SELECT ID
FROM 

(SELECT TOP 10 ID
FROM NAME)

LOG

""")

In [49]: cursor.fetchall()
Out[49]: 
[('1', ),
 ('10', ),
 ('100000', ),
 ('100001', ),
 ('100002', ),
 ('100003', ),
 ('100004', ),
 ('100005', ),
 ('100006', ),
 ('100007', )] 
```

# java - 克服 java.net.MalformedURLException: 无协议异常

> ID：13963188
> 
> 赞同：10
> 
> 时间：2012-12-19T23:54:46.143
> 
> 标签：java, malformedurlexception

我有一个属性文件，其中包含一个属性，该属性指定了包含温度数据集的 NOAA 网站的 URL。该属性包含一个`[DATE_REPLACE]`标记，因为当 NOAA 生成新预测时，URL 每天都会发生变化。

在我的属性文件中，我指定：

```
WEATHER_DATA_URL="http://weather.noaa.gov/pub/SL.us008001/DF.anf/DC.mos/DS.mex/RD.[DATE_REPLACE]/cy.00.txt" 
```

我已经声明了一个带有 PropertyHelper 类（java.util.Properties 的包装器）的方法来生成当天的 URL 字符串，使用`WEATHER_DATA_URL`名称“ *yyyyMMdd* ”作为日期格式，即今天的日期。

```
public String getPropertyWithDateReplaceToken(String name, String dateFormat, Date dateToFormat)
{
    String value = this.properties.getProperty(name);

    if (StringHelper.isNullOrWhitespace(value) || !value.contains("[DATE_REPLACE]"))
    {
        throw new UnsupportedOperationException("The property value should specify the [DATE_REPLACE] token");
    }

    StringBuilder sb = new StringBuilder(value);
    int index = sb.indexOf("[DATE_REPLACE]");
    while (index != -1)
    {
        String replacement = StringHelper.getTodayAsDateString(dateFormat, dateToFormat);
        sb.replace(index, index + "[DATE_REPLACE]".length(), replacement);
        index += replacement.length();
        index = sb.indexOf(value, index);
    }

    return sb.toString();
} 
```

然后我使用以下方法调用另一个帮助程序类来读取网页中的文本：

```
public static List<String> readLinesFromWebPage(String urlText) throws Exception
{
    List<String> lines = new ArrayList<String>();
    if (StringHelper.isNullOrWhitespace(urlText))
    {
        throw new NullPointerException("URL text cannot be null or empty");
    }

    BufferedReader dataReader = null;
    try
    {
        System.out.println("URL = " + urlText);
        String trimmedUrlText = urlText.replaceAll("\\s", "");

        URL url = new URL(trimmedUrlText);
        dataReader = new BufferedReader(new InputStreamReader(url.openStream()));

        String inputLine;
        while((inputLine = dataReader.readLine()) != null)
        {
            lines.add(inputLine);
        }

        return lines; 
    }
    catch(Exception e)
    {
        logger.logThrow(Level.SEVERE, e, "Exception (" + e.getMessage() + ") attempting to " +
                "read data from URL (" + urlText + ")");
        throw e;
    }
} 
```

如您所见，我试图从生成的 URL 字符串中修剪空格，希望这会导致问题。URL 字符串已正确生成，但出现以下异常：

```
java.net.MalformedURLException: no protocol: "http://weather.noaa.gov/pub/SL.us008001/DF.anf/DC.mos/DS.mex/RD.20121219/cy.00.txt" 
```

如果我手动设置字符串，一切正常......我错过了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-20T00:03:33.697

您的属性文件在 URL 的值周围有双引号。删除这些。

# resources - 无法读取来自 AngularJS 的响应 $resource JSONP 从 Yahoo Finance 获取

> ID：13963192
> 
> 赞同：0
> 
> 时间：2012-12-19T23:55:51.463
> 
> 标签：resources, jsonp, angularjs, yahoo-finance

我可以使用带有 JSONP 的 Angular JS $resource 从 Google Finance 获取股票价格。这显示在这里：http: [//jsfiddle.net/8zVxH/1/](http://jsfiddle.net/8zVxH/1/)

我需要历史价格，谷歌不提供，但雅虎提供。我将上面的 jsfiddle 修改为：http: [//jsfiddle.net/curt00/BqtzB/](http://jsfiddle.net/curt00/BqtzB/)

这是代码：

```
angular.module('app', ['ngResource']);

function AppCtrl($scope, $resource) {

    var yqlURL="http://query.yahooapis.com/v1/public/yql?q=";

    var dataFormat="&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys";

    var symbol = 'GOOG';

    var startDate = '2012-12-05';
    var endDate = '2012-12-06';

    var historical_query = yqlURL+"select%20*%20from%20yahoo.finance.historicaldata%20where%20symbol%20%3D%20%22"+ symbol +"%22%20and%20startDate%20%3D%20%22"+ startDate +"%22%20and%20endDate%20%3D%20%22"+ endDate +"%22"+ dataFormat;

    $scope.yahooFinance = $resource(historical_query, 
                                 {callback:'JSON_CALLBACK'},
                                 {get: {method:'JSONP', isArray: false}});

    $scope.indexResult = $scope.yahooFinance.get();

} 
```

​ 它在浏览器控制台中生成错误消息：

GET [http://query.yahooapis.com/v1/public/yql?q=select%20](http://query.yahooapis.com/v1/public/yql?q=select%20) *%20from%20yahoo.finance.historicaldata%20where%20symbol%20%3D%20%22GOOG%22%20and%20startDate% 20%3D%20%222012-12-05%22%20and%20endDate%20%3D%20%222012-12-06%22&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys?callback=angular。 callbacks._0 400（错误请求）

有人知道如何让它工作吗？

我知道 Jquery 的 getJSON 可以与这个 Yahoo 查询一起使用，但据说 AngularJS 的 $resource 更快更高效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T08:07:13.373

使用 Angular 的 $http 服务。

使用 Angular 服务 $http 的函数 jsonp，很容易实现。

**服务**

var app = angular.module('myApp', []);

```
app.factory('service', function($q, $http) {

    return {
        getHistoricalData: function(symbol, start, end) {
            var deferred = $q.defer();
            var format = '&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=JSON_CALLBACK';
            var query = 'select * from yahoo.finance.historicaldata where symbol = "' + symbol + '" and startDate = "' + start + '" and endDate = "' + end + '"';
            var url = 'http://query.yahooapis.com/v1/public/yql?q=' + encodeURIComponent(query) + format;

            $http.jsonp(url).success(function(json) {
                var quotes = json.query.results.quote;
                // filter + format quotes here if you want
                deferred.resolve(quotes);
            });
            return deferred.promise;
        }
    };
}); 
```

**控制器**

```
function Ctrl($scope, service) {
    $scope.symbol = "GOOG";
    $scope.items = [];
    $scope.startDate = '2012-12-05';
    $scope.endDate = '2012-12-06';

    $scope.getData = function() {
        $scope.items = [];

        var promise = service.getHistoricalData($scope.symbol, $scope.startDate, $scope.endDate);

        promise.then(function(data) {
            $scope.items = data;
        });
    };
    $scope.getData();
}​ 
```

我在[jsFiddle](http://jsfiddle.net/asgoth/7bNAd/)创建了一个工作示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T00:23:59.443

作为一个 angularjs 菜鸟，这为我修复了它。

改变了我`jsonp` **的：**

```
JSON_CALLBACK({"term_jg_1":{"query":"Julia....... 
```

**至**

```
angular.callbacks._0({"term_jg_1":{"query":"Julia... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T16:50:51.287

感谢大家提供建议。

@asgoth 的建议看起来很巧妙，但我无法让它在我的 AngularJS 网络应用程序上运行。

我用 $http.jsonp 替换了 $resource，现在它可以工作了。例子：

```
var query = 'select * from csv where url=\'http://ichart.yahoo.com/table.csv?s=' + symbol + '&a=' + (date.month - 1) + '&b=' + date.day + '&c=' + date.year + '&d=' + (date.month - 1) + '&e=' + date.day + '&f=' + date.year + '&g=d&ignore=.csv\'';
var url = 'http://query.yahooapis.com/v1/public/yql?q=' + fixedEncodeURIComponent(query) + '&format=json&callback=JSON_CALLBACK';

    $http.jsonp(url, {timeout: 30000}).success(function(json) {
        var result = json.query.results.row;
        //  process result
    } 
```

# python - 在没有Selenium的python中向网页上的img发送点击

> ID：13963193
> 
> 赞同：0
> 
> 时间：2012-12-19T23:55:51.620
> 
> 标签：python, web-crawler

我正在为 macys.com 编写爬虫。我需要输入每种产品的每种颜色作为单独的条目。他们的网站设置为当点击发送到切换产品图像的样本图像时激活脚本。据我所知，这是检索产品图像 URL 的唯一方法（因为在单击样本之前它不会存储在页面上的任何位置）。我目前正在使用 requests 和 BeautifulSoup 来解析 html。此代码将在无法安装浏览器的环境中运行（即我不能使用 Selenium）。色板不在表单标签中，并且不被机械化（或斜纹）认为是可点击的。

tl;dr：如何在不使用 Selenium 的情况下向 id 和 tag 找到的非表单、非链接元素发送点击？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T03:02:44.700

所以，这不完全是你所要求的，但它确实有效。通过设置虚拟显示器，Selenium 可以在没有实际浏览器的情况下使用。它确实需要[xvfb](http://en.wikipedia.org/wiki/Xvfb)和 pyvirtualdisplay（它是 xvfb 的包装器）。这是我如何让它工作的（在安装 xvfb 后在 ubuntu 12.04 上）。

```
from selenium import webdriver
from pyvirtualdisplay import Display

display = Display(visible=0, size=(800, 600))
display.start()

browser = webdriver.Firefox()
url = 'http://www1.macys.com/shop/product/alfani-black-sweater-horizontal-texture-stripe-full-zip-sweater?ID=720780&CategoryID=4286&LinkType=PDPZ1'
browser.get(url)
el = browser.execute_script('return MACYS.pdp.primaryImages')

print el
{u'720780': {u'Blue Indigo': u'2/optimized/1291562_fpx.tif',
     u'Deep Black': u'3/optimized/1291563_fpx.tif',
     u'Flint Heather': u'4/optimized/1291564_fpx.tif',
     u'Grey Heather': u'1/optimized/1291911_fpx.tif',
     u'River Blue': u'0/optimized/1291560_fpx.tif'}} 
```

碰巧他们有一个名为 javascript 的命名空间`MACYS`，用于保存有关图像的所有信息（这是我打印出来的）。希望有帮助。

# ember.js - EmberJs：在 init 函数中绑定来自 Ember.TextField 的输入元素（自动完成谷歌地图）

> ID：13963199
> 
> 赞同：3
> 
> 时间：2012-12-19T23:56:15.663
> 
> 标签：ember.js

我尝试使用 GoogleMap 自动完成组件。此 Google Javascript 服务只需绑定到输入字段即可。

我的想法是创建一个扩展 TextField 的新视图并按如下所述进行绑定：我对自动完成构造函数（this，option）中的“this”有疑问。正如您可以轻松理解的那样，这对我来说是输入组件......（错误可能在这里）

```
App.AutoCompleAddressView = Ember.TextField.extend({
  type: 'text',
  init: function() {
    this._super();
    var options = {
      types: ['(cities)'],
      componentRestrictions: {country: 'fr'}
    };
  autocomplete = new google.maps.places.Autocomplete(this, options);
  }
}); 
```

和html代码模板：

```
{{view App.AutoCompleAddressView}} 
```

不幸的是，我收到了 Ember 错误： 未捕获的类型错误**：对象没有方法“getAttribute”**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T14:27:47.840

如果 google.maps.places.Autocomplete 需要一个 DOM 元素，那么您必须将 this.$() 传递给它。我认为你必须在 didInsertElement 钩子中做到这一点。就像是：

```
App.AutoCompleAddressView = Ember.TextField.extend({
  type: 'text',
  didInsertElement: function() {
    var options = {
      types: ['(cities)'],
      componentRestrictions: {country: 'fr'}
    };
 //this.$() return the element as an array form, but google autocomplete seems to not accept this. So take the first one.
    new google.maps.places.Autocomplete(this.$()[0], options);
  }
}); 
```

添加了一个最小示例：http: [//jsfiddle.net/6p6XJ/211/](http://jsfiddle.net/6p6XJ/211/)

# javascript - 将 Knockout JS 对象与 Javascript 对象合并

> ID：13963203
> 
> 赞同：5
> 
> 时间：2012-12-19T23:56:26.970
> 
> 标签：javascript, json, knockout.js

我正在尝试将一些数据作为单个对象异步发送。一半的数据来自我的 KnockoutJS viewModel。另一半是我想添加的一些数据。

我的想法是将它们都转换为 JSON 对象，然后使用数组 .concat 将它们放在一起。但这行不通。你可能知道为什么吗？

我尝试了一些解决方案。第一种方法从 JSON 字符串构建一个对象，然后使用 JSON.parse 将它们作为一个对象。第二个试图完全避免字符串。无论哪种方式，在我得到我的对象后，我尝试将它们连接在一起，但没有任何运气。

## 带字符串

```
toAddString = '{"file": "thefile"}';
toAddObj = JSON.parse(toAddString);

koString = ko.toJSON(viewModel);
koObj = JSON.parse(koString,null,2);

finalObj = koObj.concat(toAddObj); 
```

## 与对象

```
toAddObj = [{"file": "thefile"}];

koObj = ko.toJS(viewModel);

finalObj = koObj.concat(toAddObj); 
```

## 与对象 (2)

```
toAddObj = new Object();
toAddObj.file = "one";

koObj = ko.toJS(viewModel);

finalObj = koObj.concat(toAddObj); 
```

你知道这里可能出了什么问题吗？

我想要的只是一个对象，无论是数组还是 JSON 对象，它都包含来自这些源中的每一个的数据。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T00:48:05.527

试试下面的。我在猜测语法，因为我自己不使用 Knockout，并且我正在使用该[`ko.utils.extend()`](https://github.com/SteveSanderson/knockout/blob/master/src/utils.js#L124)函数将一个对象的属性复制到另一个对象上。

```
var toAddObj = { file: 'one' };

var koObj = ko.toJS(viewModel);

var finalObj = ko.utils.extend(toAddObj, koObj); 
```

请注意，如果不使用`var`，您总是会创建全局变量（通常是个坏主意）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T00:47:27.477

检查变量的类型：

```
/* With Strings */
toAddString = '{"file": "thefile"}'; // a string
toAddObj = JSON.parse(toAddString); // an object

koString = ko.toJSON(viewModel); // a string containing JSON
koObj = JSON.parse(koString,null,2); // an object
                                     // notice JSON.parse does only take one argument

finalObj = koObj.concat(toAddObj); // you're calling the array concat method?

/* With Objects */
toAddObj = [{"file": "thefile"}]; // an object (represented in code as literal)

koObj = ko.toJS(viewModel); // an object

finalObj = koObj.concat(toAddObj); // you're calling the array concat method?

/* With Objects (2) */
toAddObj = new Object(); // an object
toAddObj.file = "one"; // with a string property

koObj = ko.toJS(viewModel); // an object

finalObj = koObj.concat(toAddObj); // you're calling the array concat method? 
```

所以，如果`ko.toJS(viewModel)`返回一个不是数组的对象，你会得到很多`"no method concat on …"`异常。相反，您可以将它们都放入一个数组中：

```
[toAddObj, koObj] // and JSON.stringify that 
```

或者您使用字符串构建过程并使用

```
"["+toAddString+","+koString+"]"; 
```

其中第一种方法更可取。

# svn - 一次创建多个 svn 存储库

> ID：13963208
> 
> 赞同：1
> 
> 时间：2012-12-19T23:56:53.713
> 
> 标签：svn, repository, svnadmin

我正在将一堆现有项目（没有版本控制）迁移到 svn。

我想知道是否有一种方法可以在命令行上一次创建多个存储库。

`svnadmin create repo1 repo2 repo3`等等

我意识到上述方法行不通，因为这不是预期的参数。

我知道这可能更像是一个通用解决方案的例子

```
ls FileWithRepoNames | svnadmin create ______ 
```

但不知道该怎么做。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T00:07:52.097

你有没有尝试过：

```
for i in `cat FileWithRepoNames`;
do
    svnadmin create $i;
done; 
```

ls 用于列出目录的内容。我假设您想从文件中读取名称，在这种情况下您需要使用 cat。

请注意，在这种情况下，“cat”会将文件拆分为单独的单词，而不是行。

# c++ - 在模板化的嵌套和继承的类中未检测到变量

> ID：13963215
> 
> 赞同：3
> 
> 时间：2012-12-19T23:57:58.257
> 
> 标签：c++, class, templates, inheritance

我有一个像这样的嵌套和继承结构。

```
template <typename U, typename T, typename _Prd = equal_to<T> >
class Octree
{
...
private :
    BBox<T,3,_Prd> bounds ;

    void SplitNode() ;
    virtual bool isSplit () ;
...
};

template <typename U, typename T, typename _Prd = equal_to<T> >
class Hull
{
    ...
    //nest the octree class here

    class OcHull: public Octree<U, T, _Prd>
    {
        bool isSplit () ;  
    };

    OcHull * GetOcHull() const ;

private:

    OcHull * hullstructure ;

}; 
```

当我想访问 OcHull 中的 bounds 变量时，编译器看不到它有这个变量。

```
template <typename U, typename T, typename _Prd>
bool Hull<U,T,_Prd>::OcHull::isSplit()
{
    assert(typeid(double) == typeid(T)) ;
    // for each possible view of currect cell

    for (size_t i = 0 ; i < camera_array.size() ; ++i)
    {
        //project centre of the cell

        // bounds is not detected. bound is meant to be inherited from BBox<T,3,_Prd> bounds ; above

        Vec<double,2> projectedP = camera_array[i].projectToCamPlane(bounds.centre) ; 

        ...

    }
} 
```

错误是

```
Hull.hpp:84: error: ‘bounds’ was not declared in this scope 
```

你能告诉我为什么它看不到边界吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T00:21:24.687

你需要说`this->bounds`或`Octree<U, T, _Prd>::bounds`。在 C++ 中，当一个类模板继承自另一个类模板时，模板基类不会在第一次编译过程中实例化，因此必须使用显式限定符访问继承的成员。

有关更详细的解释，请参阅[此答案。](https://stackoverflow.com/a/6592617/168288)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T00:24:02.657

非限定名称查找*不*考虑依赖于模板参数的基类。

您正在使用不合格的名称`bounds`。并且基类`Octree<U, T, _Prd>`依赖于模板参数。因此，编译器不考虑基类的内容，因此`bounds`找不到。

您可以通过多种方式解决它。

1.  引用时使用*限定名称*`bounds`

    ```
    Octree<U, T, _Prd>::bounds 
    ```

2.  `bounds`通过访问`this->`

    ```
    this->bounds 
    ```

3.  向派生类添加`using`声明`bounds`

    ```
    class OcHull: public Octree<U, T, _Prd>
    {    
      using Octree<U, T, _Prd>::bounds;
      ... 
    ```

# api - GDB 内部：获取变量内容

> ID：13963216
> 
> 赞同：3
> 
> 时间：2012-12-19T23:58:05.527
> 
> 标签：api, gdb, internals

我想在 gdb 源代码中添加一个新命令，我可以使用 add_cmd 来完成。

在命令后端，我想读取一些变量的内容并以与我更相关的格式打印数据。

我可以使用以下代码获取变量地址：

```
struct symbol *sym;

sym = lookup_symbol ("my_variable_name", get_selected_block (&context_pc), VAR_DOMAIN, NULL);

printf_filtered ("Symbol %s is ", sym->ginfo.name);
printf_filtered (" at address 0x%x\n", SYMBOL_VALUE(sym)); 
```

这给了我变量的地址：

```
(gdb) my_command
Symbol my_variable_name is  at address 0x8049684 
```

但是，我找不到什么 API 会给我这个变量的内容。需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T04:22:39.087

> 在命令后端，我想读取一些变量的内容并以与我更相关的格式打印数据。

您*极*有可能使用[Python pretty-printer](http://sourceware.org/gdb/onlinedocs/gdb/Pretty-Printing-API.html)获得相同的结果。这不需要重建 GDB，很容易正确使用，并为 GDB 内部提供了一个安全的接口。

> 我找不到什么 API 会给我这个变量的内容。

`target_read_memory()`是最低的 API，它将为您提供给定地址的内存内容。

# elasticsearch - 在 Elasticsearch 中保存变量

> ID：13963217
> 
> 赞同：5
> 
> 时间：2012-12-19T23:58:06.247
> 
> 标签：elasticsearch

我在我的 Elasticsearch 查询中使用了脚本查询和脚本过滤器，如下所示。是否可以保存查询脚本的计算值并将其用于排序，因此我不必再次计算相同的值？谢谢你。

```
 "sort" : {
        "_script" : { 
            "script" : "sqrt(pow((doc[l].value - l_value),2)+pow((doc[a].value - a_value),2)+pow((doc[b].value - b_value),2))",
            "type" : "number",
            "params" : {
                "l_value" : '10',
                "a_value" : '20',
                "b_value" : '20'
            },
            "order" : "asc"
        }
    },
    "query" : {
        "filtered" : {
            "filter" : {
                "script" : {
                    "script" : "sqrt(pow((doc[l].value - l_value),2)+pow((doc[a].value - a_value),2)+pow((doc[b].value - b_value),2)) < 20",
                    "params" : {
                        "l_value" : 10,
                        "a_value" : 20',
                        "b_value" : 20.'
                    }
                }
            },
            "query": {
                "match_all": {}
            }
        }
    } 
```

# magmi - Magmi 导入不保存 msrp，不知道为什么？

> ID：13963218
> 
> 赞同：0
> 
> 时间：2012-12-19T23:58:25.590
> 
> 标签：magmi

我正在使用 Magmi 将产品导入我的商店，它工作得非常出色，除了 MSRP 值由于某种原因没有得到保存。文件导入时没有任何错误，但是当我进入目录管理器并实际查看产品时，无论文件中的值是什么，msrp 值都是 0.00。据我所知，列名应该是“msrp”，所以我不知道我做错了什么。有人可以帮我吗？很明显我失踪了，但我不知所措。谢谢！

这是我正在上传的测试 CSV：

```
"store","websites","attribute_set","type","sku","category_ids","name","manufacturer","meta_title","meta_description","image","small_image","thumbnail","price","cost","msrp","weight","description","meta_keyword","short_description","status","tax_class_id","visibility"
"admin","base","SJ Products","simple","XCL-XN100","2556","Xcelite XN100 5 13/16 Inch Light Duty Precision Knife","Xcelite Tools","Xcelite XN100 5 13/16 Inch Light Duty Precision Knife","Xcelite XN100 5 13/16 Inch Light Duty Precision Knife -  Tools & Test Equipment, Knives & Replacement Blades - SJ Media Systems","/XCL-XN100.JPG","/XCL-XN100.JPG","/XCL-XN100.JPG","2.6","2.23","$2.60",".04","<strong>Features:</strong><ul><li>Designed for light-duty cutting on paper </li><li>Also for soft and light-weight materials or wood </li><li>Replacement blade: XNB103 </li></ul>","Tools & Test Equipment,Knives & Replacement Blades","On Backorder","1","Taxable Goods","4" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T09:53:11.493

在 msrp 值之前删除 $ 它应该会更好。

# c++ - 使用 lambda 函数来模拟 lexical clousures 是否有不可预见的性能/实现问题？

> ID：13963219
> 
> 赞同：0
> 
> 时间：2012-12-19T23:58:26.297
> 
> 标签：c++, function, c++11, lambda, lexical-closures

**方案一：**

```
#include <iostream>

std::string Hello(void){return "Hello";}
std::string World(void){return "world!";}

int main(){

    std::cout << Hello() << " " << World() << std::endl;
} 
```

函数 Hello() 和 World() 存在于全局命名空间中。
这意味着它们可以被声明之后的任何其他函数调用（或者在这种情况下，我提供了定义并且不需要先声明）。

我有一个问题，因为随着我的项目变得越来越大，我包含了更多的头文件，这些头文件用很多函数填充了全局命名空间，并且我冒着函数签名冲突的风险，或者更糟糕的是，不小心调用了应该只调用的错误函数作为另一个功能的子任务。

我试图遵循将任务功能分解为子任务的范式，因此在另一个特定函数的范围之外调用特定函数是没有意义的。

这是一种解决方法，除了由于缩进深度导致代码变得不可读之外，我想知道是否存在任何性能或实现问题。lambda 函数目前对我来说有点神奇，所以我对不可预见的危险感到好奇。

**方案二：**

```
#include <iostream>

int main(){

    auto Hello = [](void) -> std::string{return "Hello";};
    auto World = [](void) -> std::string{return "world!";};

    std::cout << Hello() << " " << World() << std::endl;
} 
```

Hello() 和 World() 被封装在 main() 内部，**不能**从 main() 的作用域之外调用。
这就是不一样的一切吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T00:44:56.653

C++ 中实现您想要的首选机制是使事物（函数、类型、对象）私有（不是在可访问性的意义上，不像关键字），这样它们就不能在另一个模块中命名。这完全防止了碰撞。

例如，考虑一个包含头文件的模块：

```
// List dependencies
#include <string>

// It's customary to put things in a namespace
// Note that namespaces are commonly cross-module

namespace ns {

// Declarations visible to all
std::string hello_world();

} // ns 
```

和这样的实现：

```
// include header listed above
#include <header.hpp>

// This contains declarations visible to this module only
namespace {

std::string hello_part();

// This is both a declaration and a definition
std::string world_part()
{ return "world!"; }

} // namespace

// Definition of function declared in header
std::string ns::hello_world()
{
    // Implemention defers to private parts that are visible here
    return hello_part() + " " + world_part();
}

// Definition of private function
// We need to reopen the unnamed namespace for that

namespace {

std::string hello_part()
{ return "Hello"; }

} // namespace 
```

现在另一个模块可以`hello_part`自己声明另一个模块，不需要是一个声明相同的函数，甚至根本不是一个函数，也不会有冲突。将有两个不同且独立的实体——就像一个`for`语句可以有自己的`int i;`变量而没有任何其他的干扰`i`！

`hello_part`至于您问题的另一部分，是否将`world_part`上述内容实现为普通的旧函数或函数对象（通过 lambda 表达式或其他方式）并不重要。但是请记住，由于它们不会关闭任何东西，因此它们并没有太大的封闭性。C++ lambda 表达式确实允许关闭任何东西，包括局部变量（也称为局部捕获），但类型系统的表达能力不够强，无法在某些情况下[解决向上的 funarg 问题](https://en.wikipedia.org/wiki/Funarg_problem)而不会付出小代价。但是，忠于 C++ 信条，这不能在你背后发生，你需要通过例如`std::function`. 对于这些情况，我会反对 lambda 表达式，因为我认为有更好的选择（我不会在这里展开）。

但总的来说，决定是否要使用 lambda 表达式是一个不会（也不应该）影响程序模块化的考虑因素。

一个更长更详细的答案将解释范围和可见性、声明和实现、命名空间、模块和可访问性的不同角色，这些都可以用来使程序模块化。最好不要将它们混为一谈。我的示例使用除了可访问性之外的所有这些东西来满足其需求，但这远非唯一的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T00:04:31.920

首先，它被称为“命名空间”。其次，这种 lambda 并没有真正的缺点。事实上，它们有好处，因为您现在可以在其中使用局部变量，这允许重用更多逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T00:27:37.313

我不会这样做。在您的情况下，您最终将创建巨大的函数以允许在内部定义 lambda，并且您最终将获得主体内容更难维护的函数。

在 C++11 和 lambdas 之前已经有非常大的项目，并且通过不同的方式管理冲突的风险，包括像 DeadMG 已经提到的命名空间，还有类和面向对象的设计以及其他形式的封装（将本地函数定义为`static`在实现文件的命名空间级别，强制内部链接并避免与其他翻译单元冲突。在此之上，如果您为标识符仔细选择有意义的名称，您应该避免 99% 的冲突。

如果您真的要从事大型项目，请考虑阅读 John 的 Lakos[大型 C++ 软件设计](https://rads.stackoverflow.com/amzn/click/com/0201633620)

# c - UNIX shell 出现“找不到命令”错误

> ID：13963220
> 
> 赞同：-2
> 
> 时间：2012-12-19T23:58:32.720
> 
> 标签：c, shell, unix, compilation, pipe

我一直在研究一个通过终端模拟 shell 的 C 程序。我被困在使用临时文件的管道上。

我的问题是，在执行类似命令的过程中，`ls | wc`它在 10 上运行了 9 次。此外，如果我在终端（真实的，不是我的）中执行此命令，大约 1/10 的时间会收到一条错误消息，表明 wc 命令确实不存在。嗯？

我的代码看起来不错，所以我怀疑错误来自我的 UNIX 设置（终端或核心，我不知道）。但我不确定。这看起来像是代码错误还是操作系统问题？

```
/**************************************/
/*           test parsing             */
/**************************************/

#include<unistd.h>
#include<stdio.h>
#include<sys/wait.h>
#include<sys/stat.h>
#include<fcntl.h>
#include<sys/types.h>
#include<stdlib.h>
#include<string.h>
#include <errno.h>

char *delimiteurs = ";&<>|";
char *eltsCommande[10];
char *eltsoutput[10];
char *eltsinput[10];
char *eltstube[10];
char mot[50];
int symbole, status, c;

void parsing(){
    int i=0;
    int cmot=0;
    while(1){
        c = getchar();
        if      (c == '\n') {symbole = 0;return;}
        else if (c == ';')  {symbole = 1;return;}
        else if (c == '&')  {symbole = 2;return;}
        else if (c == '<')  {symbole = 3;return;}
        else if (c == '>')  {symbole = 4;return;}
        else if (c == '|')  {symbole = 5;return;}
        else if (c == EOF)  {symbole = 7;return;}
        else if (c != ' ') {
            symbole = 10;
            while(c != '\n' && !strchr(delimiteurs,c)){
                i=0;
                while(c != 32 ){
                    if((c != '\n') && !strchr(delimiteurs,c)){
                    mot[i]=c;i++;
                    c=getchar();
                    }
                    else {break;}
                }
                break;
            }
            while(c == ' ')
            {
                c=getchar();
            }
            ungetc(c,stdin);
            mot[i]=0;
            eltsCommande[cmot++]=strdup(mot);
            fflush(stdout);
            if(c == '\n' || strchr(delimiteurs,c))
            {
                eltsCommande[cmot]=0;
                return;
            }
        }
    }

}

int main(int argc, char* argv[]) {
    pid_t pid, fid;
    int background = 0;
    int status;
    char car;
    int i, j, k, l;
    int p, p2;
    int execute=1;
    int output=0;
    int input=0;
    int tube=0;
    int fd[2];
    int fich;
    while(1){
        if(execute==1){
            if(symbole==0){
                printf("Entrez une commande> ");
            }    
            for (j=0;j<10;j++){
                eltsCommande[j]=NULL;
            }            
            execute=0;    
            background=0;
        }
        fflush(stdout);
        parsing();
        switch (symbole) {
            case 0 :                            // SYMBOLE : \n
                p=fork();
                for(k=0;k<10;k++){
                     printf("ELEMENT COMMANDE %d : %s \n", k, eltsCommande[k]);
                     //printf("ELEMENT COMMANDE TUBE %d : %s \n", k, eltstube[k]);
                     //printf("ELEMENT COMMANDE INPUT %d : %s \n", k, eltsinput[k]);
                     //printf("ELEMENT COMMANDE OUTPUT %d : %s \n", k, eltsoutput[k]);
                }

                if(p==0){                    //fils
                    if(tube==1){//printf("\n\n\n");
                              fich = open("fichtmp",O_RDONLY,0640);
                        close(0); //fermeture clavier
                        dup(fich); //fichier devient entrée 0
                        execvp(eltsCommande[0], eltsCommande);
                        close(fich); //fermeture fichier
                          }
                          else if(output==0 && input==0){        //pas de redirection
                          printf("truc1");
                        execvp(eltsCommande[0], eltsCommande);    
                    }else if(output==1){                //dans le cas d'une redirection
                    printf("truc2");
                        close(1);
                        int filew = creat(eltsCommande[0], 0644);
                        execvp(eltsoutput[0], eltsoutput);
                    }
                    else if(input==1){
                    printf("truc3");
                        close(0);
                        int filer = open(eltsCommande[0], O_RDONLY);
                        execvp(eltsinput[0], eltsinput);
                    }/*
                    if(tube==1){
                        int f2 = fork();
                        pipe(fd);
                        switch (f2){
                        case -1 : printf("loose");
                        case 0: close(fd[0]);
                            close(1);
                            dup(fd[1]);
                            close(fd[1]);
                                 execvp(eltstube[0], eltstube); break;
                               case 1: wait(&status);
                            close(fd[1]);
                            close(0);
                            dup(fd[0]); 
                            close(fd[0]);
                              execvp(eltsCommande[0], eltsCommande); break;
                          default : printf("err");
                          }*/
                    return 0;
                }else{                            //pere
                    if(background==0){                //pas de bg on attend le fils
                        waitpid(p, NULL, 0);
                    }                    
                    /*if(tube==1){
                        close(0);
                                dup(fd[0]);
                               close(fd[1]);
                              execvp(eltsCommande[0], eltsCommande);
                    }*/
                    output=0;
                    input=0;            
                    execute=1;
                    tube=0;
                }
                break;
            case 1:                                // SYMBOLE : ;
                p=fork();                        
                if(p==0){                         //fils
                    if(output==0 && input==0 && tube==0){        //pas de redirection
                        execvp(eltsCommande[0], eltsCommande);    
                    }else if(output==1){                //dans le cas d'une redirection
                        close(1);
                        int filew = creat(eltsCommande[0], 0644);
                        execvp(eltsoutput[0], eltsoutput);
                    }
                    else if(input==1){
                        close(0);
                        int filer = open(eltsCommande[0], O_RDONLY);
                        execvp(eltsinput[0], eltsinput);
                    }
                    return 0;                
                }else{                            //pere
                    waitpid(p, NULL, 0);    
                    output=0;
                    input=0;
                    execute=1;    
                }
                break;
            case 2:                                // SYMBOLE : &
                background=1;
                break;
            case 3:                                // SYMBOLE : <

                      if(input==0){
                          input=1;
                          execute=1;
                          for (l=0;l<10;l++){
                              eltsinput[l]=eltsCommande[l];
                          }
                      }
                      break;
            case 4:                                // SYMBOLE : >
                if(output==0){
                    output=1;
                    execute=1;
                    for (l=0;l<10;l++){
                        eltsoutput[l]=eltsCommande[l];
                    }
                }
                break;
            case 5:                                // SYMBOLE : |
                //if(tube==0){
                    /*for (l=0;l<10;l++){
                        eltstube[l]=eltsCommande[l];
                    }*/
                    p2=fork();
                    if(p2==0){
                        if(tube==0){
                            freopen( "fichtmp", "w", stdout );
                            execvp(eltsCommande[0], eltsCommande);
                        }
                        return(0);
                    }
                    else{    if(background==0){            // SANS MOD BG ATTENDRE FIN FILS
                            waitpid(p2, NULL, 0);
                        }
                        tube=1;                
                        execute=1;    
                    }

                break;
            default: 
                printf("");

        }
    }
    return 0 ;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:18:02.767

我想我是从哪里发现这个问题的。

`|`我有时会做一个空格，而不是一个`Alt Gr + space`空格，这不是终端的有效空格。他试图执行`(space)wc`而不是，`wc`这就是为什么我得到“找不到命令”。

感谢所有研究过这个问题的人。

# android - 此行有多个标记 - 出现“位图” - 无法解析位图

> ID：13963222
> 
> 赞同：-1
> 
> 时间：2012-12-19T23:58:39.473
> 
> 标签：android

尝试处理位图但日食不与我合作，当我试图声明时

```
 ArrayList<bitmap> attachmentList; 
```

它显示错误

```
Multiple markers at this line - Occurrence of 'bitmap'- bitmap cannot be resolved 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T23:59:41.227

类名以大写字母开头。`Bitmap`是你想要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T00:00:00.503

没有类“位图”。Java 是区分大小写的，你需要把它改成“Bitmap”，例如：

```
ArrayList<Bitmap> attachmentList; 
```

# jquery - jQuery 在附加到 DOM 之前从元素中生成变量

> ID：13963223
> 
> 赞同：8
> 
> 时间：2012-12-19T23:58:42.847
> 
> 标签：jquery, string, variables, append, store

试图在这里提高效率。如何在将元素附加到 DOM 之前将其存储为变量？似乎创建它，附加它，然后再次找到它以创建变量是一种浪费。

我的方法如下。OBV 它将字符串保存为变量，而不是对象，但你明白了。

对我有什么魔力，还是我必须两次旅行？

```
var $rGallery = '<section id="rGallery" />';

$bin.before($rGallery);

console.log($rGallery); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-20T00:09:45.240

[`.before()`](http://api.jquery.com/before/)并且[`.append()`](http://api.jquery.com/append/)可以将 jQuery 对象作为参数。您只需创建新对象，将其存储在变量中，然后将其传递给`.before()`or `.append()`。

**快速示例：**

​<code><div id="bin"> </div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​。

```
var newElement;

$(document).ready(function() {

   newElement = $("<button>New button</button>");
   $("#bin").append(newElement);

   alert(newElement.text());
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T23:59:45.883

不确定您在这里尝试做什么，但如果您想保存 jQuery 选择器的结果，您可以像处理任何其他变量一样进行操作：

```
var gallery = $("#rGallery"); 
```

如果要创建一个新元素并保存它：

```
var gallery = document.createElement("section");
// Do other stuff on it, like set attributes, etc. 
```

# git - 合并 4 个版本的大型 Git/TeamCity 项目的问题

> ID：13963226
> 
> 赞同：2
> 
> 时间：2012-12-19T23:58:53.033
> 
> 标签：git, merge

我和我的队友为一家软件供应商工作，为客户构建一个大型软件。数十名开发人员使用 Git 进行源代码控制。我们有 4 个版本：

*   0.9：生产中
*   0.9.1：在客户端进行测试
*   1.0：由我们（软件供应商）测试
*   1.1：正在建设中

我们目前的工作实践是，当您修复例如 0.9.1 中的错误时，

*   您提取最新的 0.9.1，然后将您的修复推送到 0.9.1
*   切换到 1.0，拉取最新的 1.0，合并 0.9.1，推送到 1.0
*   切换到 1.1，拉取最新的 1.1，合并 1.0，推送到 1.1

问题在于，对于数十个开发人员，通常有多个人试图同时推动他们的修复。结果，人们经常进行相同的合并，合并彼此的更改。例如：

*   dev1 将 fix1 推送到 0.9.1，拉取 1.0 并开始合并
*   当 dev1 合并到 1.0 时，dev2 将 fix2 推送到 0.9.1，拉取 1.0 并开始合并他们自己的 fix2，但也会合并 fix1
*   另外还需要对 1.1 进行合并。

我怀疑由于所有这些痛苦，人们倾向于在他们的本地机器上进行大量提交（未备份），然后进行大型合并，比如每天一次或每两天一次 - 所以其他开发人员会处理过时的代码。

我猜这个问题也发生在其他基于 Git 的大型项目上。想听听从事过此类项目的人如何处理此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T16:07:48.267

**首先**，您可能需要将项目“分区”为更多文件。调制更多，用户更多[OOP](http://en.wikipedia.org/wiki/Object-oriented_programming)。总的来说，这是一项非常困难的工作，在某些情况下几乎是不可能的。

然后，您基本上有 2 个选项，具体取决于项目大小。

*   **对于更大的项目**：使用[**拉取请求**](https://stackoverflow.com/questions/6235379/how-to-send-pull-request-on-git)。

    我在这里没有经验，但如果你在这方面使用[Linus 或 GitHub](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=7&cad=rja&ved=0CGoQFjAG&url=http://www.wired.com/wiredenterprise/2012/05/torvalds_github/&ei=H6mcUpiEBdTqkQfQsIHQDg&usg=AFQjCNG_iyNw6OXE80u2zRjVmfRuTI-Tew&sig2=n9rqGolJplqQcHZadLE-nA&bvm=bv.57155469,d.eW0) ，你应该自己做研究。无论哪种情况，这都是最大的项目所做的，例如[jquery](https://github.com/jquery/jquery/pulls)。

    在这种情况下，大多数开发人员应该无法再推送，并且仍然会有同步工作的*痛苦*- 但是如果您将项目划分为足够多的文件以便每个开发人员一次工作，这可能会减少到零。重新执行第一步，这并不意味着简单地划分文件，而是意味着让每个文件尽可能独立，这样你就可以应用[单元测试](http://en.wikipedia.org/wiki/Unit_testing)了。

*   **对于较小的**：坐标。[**分支**`*`](http://nvie.com/posts/a-successful-git-branching-model/)。交流。

    如果团队很小，分支和发送电子邮件就足够了。联系以决定谁先做什么。通过分支，您不必一直合并。然后，如果发生需要合并的大冲突，您会再次联系。这也不是很容易开始，但它确实有效。

    `*` **如果您决定听从 nvie 的建议，**请当心。**该模型至少存在[一个大**缺陷**](https://stackoverflow.com/questions/2850369/why-does-git-use-fast-forward-merging-by-default)。**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T07:01:53.347

> 当 dev1 合并到 1.0 时，dev2 将 fix2 推送到 0.9.1，拉取 1.0 并开始合并他们自己的 fix2，但也会合并 fix1

如果 dev2 在他推送时不是最新的，遥控器将拒绝它。在推送之前，您必须是最新的，除非它们是`git push -f`，这完全是另一个问题。**

# php - 如何确定我的 sql 查询是否为 Null？

> ID：13963230
> 
> 赞同：0
> 
> 时间：2012-12-19T23:59:38.293
> 
> 标签：php, mysql

我正在数据库中查询用户的 youtube 用户名。如果为 Null，我需要出现“缺少用户名”。我不知道如何找出结果是否为空。

```
$getyoutube = "SELECT cb_youtubeusername FROM #__comprofiler WHERE id=$userid";

$db->setQuery($getyoutube);

$youtubeusername=$db->loadresult() or die(mysql_error());

if ($youtubeusername== NULL){
echo "Missing Username";} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T00:05:27.083

```
if(!isset($youtubeusername['cb_youtubeusername'])){
  echo "Missing Username";
} 
```

或者

```
if(!isset($youtubeusername){
  echo "Missing Username";
} 
```

我不知道您如何显示查询结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T00:13:32.717

由于您正在使用`mysql_error`，您应该能够使用[`mysql_num_rows`](http://php.net/mysql_num_rows)来找出您正在处理的记录数。

之后，您可能希望使用[`mysql_fetch_array`](http://php.net/mysql_fetch_array)其中一个`mysql_fetch_*`函数来从记录中获取值。

此外，在提出问题之前，您确实应该使用`var_dump()`或`print_r()`弄清楚您正在使用的变量中的内容。如果你有，你可能会帮助自己。

# optimization - 重构和优化

> ID：13963234
> 
> 赞同：1
> 
> 时间：2012-12-19T23:59:41.737
> 
> 标签：optimization, coding-style, refactoring, computer-science

对我来说，重构主要是为了那些在编写代码后阅读和维护代码的人。但是在重构的[维基百科](http://en.wikipedia.org/wiki/Code_refactoring)文章中说：

> 优点包括提高代码可读性和降低复杂性以提高源代码的可维护性，以及更具表现力的内部架构或对象模型以提高可扩展性。

降低复杂性的部分是否仅意味着`make it less complex to understand`或是否还包括`less complex calculations`计算机处理？如果是这样，我应该考虑将代码优化作为重构的一部分吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T00:08:35.443

没有先验理由相信重构的代码在执行期间消耗的资源方面“更优化”；重构实际上是为了提高代码的可维护性。通常，与高度调整的代码相比，可维护性更高的代码资源效率更低。

然而，重构的一个特殊的间接副作用可能是更有效的资源使用。如果程序员更好地理解代码，他们可能会编写更有效的代码。更奇怪的是，那些认真重构的程序员可能比那些不会拼写“重构”的程序员更好。

# xml - MATLAB 使用 XSD 解析和存储 XML

> ID：13963236
> 
> 赞同：0
> 
> 时间：2012-12-19T23:59:49.957
> 
> 标签：xml, matlab, xsd

我有一个 XML 文件的 XSD，我希望它可以更容易地解析和存储 XML 中的信息。但是，我无法在 Mathworks 网站上找到任何有关此类事情的信息。有谁知道使用我的 XSD 读取 XML 文件（如果可能的话，使用 MATLAB）并存储 XML 文件中包含的信息的方法？或者，是否有其他方法可以做到这一点（即没有 MATLAB）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-18T08:17:48.300

看，我尝试了多种读取/写入 XML 文件的选项。相信我，当我告诉你时，它们都没有你想象的那么好！

我最终达到并使用的最佳解决方案是使用**[JAXB](https://stackoverflow.com/questions/11463231/how-to-generate-jaxb-classes-from-xsd)**从 XSD 创建您的解析器 java 类，然后**[将](http://www.mathworks.com/help/matlab/matlab_external/bringing-java-classes-and-methods-into-matlab-workspace.html)**您的 java 包包含到 Matlab 中并使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T10:15:05.470

看到这个：[http ://www.artefact.tk/software/matlab/xml/](http://www.artefact.tk/software/matlab/xml/)

那应该对你有帮助！

# css - 删除所有移动设备的 DIV 的固定位置？

> ID：13963237
> 
> 赞同：5
> 
> 时间：2012-12-19T23:59:57.977
> 
> 标签：css, mobile, css-position

我有一个固定位置的 DIV，但我希望它在移动设备上查看时是相对的。这可能与特定的CSS？

埃里克

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T00:05:52.010

您可以使用媒体查询来执行此操作。

**CSS**

```
div {
    position: fixed;
}

@media only screen and (max-device-width : 480px) {
    div {
        position: relative;
    }
}
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-14T05:35:14.697

不知道这会有多大帮助，但我有两个在 web 视图上具有相对定位的 div。将他们的位置设置为在移动视图中继承对我有用。

```
 @media only screen and (max-device-width : 600px) {
     div {
         position: inherit;
    } 
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-05T15:00:48.147

如果是移动的，我遇到了不同的css的问题。这里已经发布了一个很好的解决方案：[Detecting a mobile browser](https://stackoverflow.com/questions/11381673/detecting-a-mobile-browser)

你可以去看看！上面，我使用了作者提出的解决方案，并将其存储在一个返回布尔结果的函数中。

```
const isMobile = function() {
  let check = false;
  (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);
  return che\ck;
};

document.write(`Is mobile? ${isMobile()}`)
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-12-20T00:31:48.200

您可以通过 php 轻松完成此操作（如果您的服务器上安装了 PHP）。

[1) 从这里](http://code.google.com/p/php-mobile-detect/wiki/Mobile_Detect)下载 mobile_detect.php 。

2) 在你的文件中写下这个 php 代码，不要忘记把它重命名为 anyname.php

```
<?php
include 'Mobile_Detect.php';
$detect = new Mobile_Detect();

if ($detect->isMobile()) {
    // Any mobile device.
$position = "relative";
}

else
{
$position = "fixed";
}
?> 
```

3）现在在您编写相对/固定的样式代码中，编写此代码。

```
<?php echo $position; ?> 
```

现在，当用户来自移动设备时，它将显示相对，否则将显示固定。我希望这会奏效！

# java - 扫描仪中的 NoSuchElementException

> ID：13963240
> 
> 赞同：0
> 
> 时间：2012-12-20T00:00:09.300
> 
> 标签：java, parsing, java.util.scanner

我正在研究一种解析器（爱好项目），它接受一个 Cpp 文件，通读文件中的注释，然后尝试基于该文件创建一个头文件。

我面临的问题是当`java.util.Scanner`即将阅读第一行时。程序停止并给了我`NoSuchElementException`. 我真的无法弄清楚应该是什么问题。我检查了路径和路径名是否正确。该文件必须在那里，并且在调试时我也可以读取 Scanner 对象上的字段。那么究竟是什么问题呢？

有些人暗示它可能认为文件中没有行。

问题发生在`while((line = scanner.next()) != null) {`

```
@Override
public void run() {
    Scanner scanner = null;
    String filename = "", path = "";
    StringBuilder puBuilder, prBuilder, viBuilder;
    puBuilder = new StringBuilder();
    prBuilder = new StringBuilder();
    viBuilder = new StringBuilder();
    for(File f : files) {
        try {
            filename = f.getName();
            path = f.getAbsolutePath();
            path = path.replace(filename, "");
            filename = filename.replace(".cpp", "");
            scanner = new Scanner(new FileReader(f));
        } catch (FileNotFoundException ex) {
            System.out.println("FileNotFoundException: " + ex.getMessage());
        }

        String line;
        String tag;
        while((line = scanner.next()) != null) {
            line = line.trim();
            if(line.startsWith(PUBLIC)) {
                tag = PUBLIC; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T00:05:25.477

罪魁祸首是：

```
while((line = scanner.next()) != null) 
```

[`scanner.next()``NoSuchElementException`如果没有更多可用的令牌，将抛出 a](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#next%28%29)。您可以改用该`hasNext`方法：

```
while(scanner.hasNext()) {
    String line = scanner.next();
    //etc.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T00:07:59.053

[`Scanner.next`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#next%28%29)如果没有更多标记，则抛出 NoSuchElement 异常。

我看到您正在遍历文件列表。您在该列表中获得的第一个文件是否可能是空的？

你能打印出文件名并检查确认吗？

# java - 在java中直接将文档（XML）转换为字符串，而不使用transform或XMLSerializer

> ID：13963241
> 
> 赞同：0
> 
> 时间：2012-12-20T00:00:22.747
> 
> 标签：java, xml, string, domdocument

是否有另一种方法可以将 XML`Document`对象转换为`String`使用转换或`XmlSerializer`来自 Apache API 的方式？我不想使用提到的转换方法，因为它呈现我的输出 xml 修改标签表示（例如将空标签折叠为单例标签）。`String`我想要从`Document`对象输出的转换方法（将对象的内容`Document`视为文本的一种）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T00:08:49.673

[通过扩展DefaultHandler2](http://docs.oracle.com/javase/1.5.0/docs/api/org/xml/sax/ext/DefaultHandler2.html)或[DefaultHandler](http://docs.oracle.com/javase/1.5.0/docs/api/org/xml/sax/helpers/DefaultHandler.html)，您可以做得比 SAX 更差：

```
class Parser extends DefaultHandler { 
    StringBuffer sb = new StringBuffer();
    public void characters(char[] ch, int start, int length) {
        sb.append(new String(ch, start, length);
    }

    public void startElement(String ns, String qname, String name, Attributes attrs) {
        sb.append(qname+": ");
    }

    public void endElement(String ns, String qname, String name) {
        sb.append("\n");
    }

    public String toString() {
        return sb.toString();
    }
} 
```

# java - 在 vb.net 中使用 IComparable 比较石头、剪纸和剪刀游戏的武器（与 JAVA 中的 Comparable 相同）

> ID：13963244
> 
> 赞同：1
> 
> 时间：2012-12-20T00:00:53.580
> 
> 标签：java, vb.net, oop, icomparer

我是编程和 OOP 的新手，所以请原谅我缺乏知识。

作为我的 Rock、Paper 和 Scissors 游戏的一部分，我想在 VB.NET 中创建一个具有子类（Rock、Paper 和 Scissors）的抽象超类（武器）。我找到了 JAVA 等价物：

```
 public abstract class Weapon implements Comparable<Weapon> {
    }

    public class Paper extends Weapon {

        @Override
        public int compareTo(Weapon o) {
            if (o instanceof Paper)
                return 0;
            else if (o instanceof Rock)
                return 1;
            return -1;
        }
    }

    public class Rock extends Weapon {

    @Override
    public int compareTo(Weapon o) {
        if (o instanceof Rock)
            return 0;
        else if (o instanceof Scissors)
            return 1;
        return -1;
    }
}

    public class Scissors extends Weapon {

    @Override
    public int compareTo(Weapon o) {
        if (o instanceof Scissors)
            return 0;
        else if (o instanceof Paper)
            return 1;
        return -1;
    }
} 
```

我目前有以下内容：

```
Public MustInherit Class Weapons

Public Class Rock
    Inherits Weapons

    Public Function compareTo(ByVal Weapons As Object) As Integer

    End Function

End Class

Public Class Paper
    Inherits Weapons

    Public Function compareTo(ByVal Weapons As Object) As Integer

    End Function

End Class

Public Class Scissors
    Inherits Weapons

    Public Function compareTo(ByVal Weapons As Object) As Integer

    End Function

End Class 
```

结束类

有人可以更正代码，以便可以比较 Rock、Paper 和 Scissors 对象。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T01:10:28.577

像这样：

```
Public Class Rock
    Inherits Weapons

    Public Function compareTo(ByVal Weapons As Object) As Integer
        If TypeOf Weapons Is Rock Then
            Return 0
        ElseIf TypeOf Weapons Is Scissors Then
            Return 1
        Else
            Return -1
        End If
    End Function
End Class

' etc. 
```

# asp.net-mvc - 使用 C# (ASP.NET MVC) 上传 csv 文件

> ID：13963253
> 
> 赞同：5
> 
> 时间：2012-12-20T00:02:10.170
> 
> 标签：asp.net-mvc

我有一个 CSV 文件，其中包含以下内容：

```
ProductName,EmployeeID,EmployeeName,ContactNo,Adddress
iPad,1233,Tom,89897898,34 Pitt st
iPad,1573,Jack,8978 9689,50 George st
iPad,1893,Peter,8878 8989,32 Martin st 
```

以下代码将插入到一个表中。我想要实现的是插入到 2 个表中：

```
产品表（父表）
产品 ID（Pk），产品名称

员工表（子表）
EmployeeId(Pk)、ProductId(fk)、EmployeeName、ContactNo、地址

```

所以我基本上需要先将记录插入到 Product 表中，然后从 CSV 文件插入到 Employee 表中。

**控制器.cs**

```
[HttpPost]
public ActionResult Index(HttpPostedFileBase FileUpload)
{
    // Set up DataTable place holder 

    Guid ProductId= Guid.NewGuid();
    using (SqlConnection conn = new SqlConnection(connString))
    {
        conn.Open();

        using (SqlCommand cmd = new SqlCommand(
               "INSERT INTO Product VALUES(" + "@ReferralListID,  @ProductName)", conn))
        {
            //Note product name need to read from csv file
            cmd.Parameters.AddWithValue("@ProductId", ProductId);
            cmd.Parameters.AddWithValue("@ProductName", ProductName); 

            int rows = cmd.ExecuteNonQuery();

            //rows number of record got inserted
        }
    }

    DataTable dt = new DataTable();

    //check we have a file 
    if (FileUpload.ContentLength > 0)
    {
        //Workout our file path
        string fileName = Path.GetFileName(FileUpload.FileName);
        string path = Path.Combine(Server.MapPath("~/App_Data/uploads"), fileName);

        //Try and upload
        try
        {
            FileUpload.SaveAs(path);
            //Process the CSV file and capture the results to our DataTable place holder
            dt = ProcessCSV(path);

            //Process the DataTable and capture the results to our SQL Bulk copy
            ViewData["Feedback"] = ProcessBulkCopy(dt);
        }
        catch (Exception ex)
        {
            //Catch errors
            ViewData["Feedback"] = ex.Message;
        }
    }
    else
    {
        //Catch errors
        ViewData["Feedback"] = "Please select a file";
    }

    //Tidy up
    dt.Dispose();

    return View("Index", ViewData["Feedback"]);
}

/// <summary>
/// Process the file supplied and process the CSV to a dynamic datatable
/// </summary>
/// <param name="fileName">String</param>
/// <returns>DataTable</returns>
private static DataTable ProcessCSV(string fileName)
{
    //Set up our variables 
    string Feedback = string.Empty;
    string line = string.Empty;
    string[] strArray;  
    DataTable dt = new DataTable();
    DataRow row;

    // work out where we should split on comma, but not in a sentance
    Regex r = new Regex(",(?=(?:[^\"]*\"[^\"]*\")*(?![^\"]*\"))");

    //Set the filename in to our stream
    StreamReader sr = new StreamReader(fileName);

    //Read the first line and split the string at , with our regular express in to an array
    line = sr.ReadLine();
    strArray = r.Split(line);

    //For each item in the new split array, dynamically builds our Data columns. Save us having to worry about it.
    Array.ForEach(strArray, s => dt.Columns.Add(new DataColumn()));

    //Read each line in the CVS file until it's empty
    while ((line = sr.ReadLine()) != null)
    {
        row = dt.NewRow();

        //add our current value to our data row
        row.ItemArray = r.Split(line);
        dt.Rows.Add(row);
    }

    //Tidy Streameader up
    sr.Dispose();

    //return a the new DataTable
    return dt;

}

/// <summary>
/// Take the DataTable and using WriteToServer(DataTable) send it all to the database table "BulkImportDetails" in one go
/// </summary>
/// <param name="dt">DataTable</param>
/// <returns>String</returns>
private static String ProcessBulkCopy(DataTable dt)
{
    string Feedback = string.Empty;
    string connString = ConfigurationManager.ConnectionStrings["DataBaseConnectionString"].ConnectionString;

    //make our connection and dispose at the end    
    using(  SqlConnection conn = new SqlConnection(connString))
    {
        //make our command and dispose at the end
        using (var copy = new SqlBulkCopy(conn))
        {
            //Open our connection
            conn.Open();

            //Set target table and tell the number of rows
            copy.DestinationTableName = "Employee";
            copy.BatchSize = dt.Rows.Count;
            try
            {
                //Send it to the server
                copy.WriteToServer(dt);
                Feedback = "Upload complete";
            }
            catch (Exception ex)
            {
                Feedback = ex.Message;
            }
        }
    }

    return Feedback;
} 
```

**查看.aspx**

```
<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Home Page
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

    <h2>CSV Bulk Upload</h2> 

    <% using (Html.BeginForm("","",FormMethod.Post, new {enctype="multipart/form-data"})){ %>

        <input type="file" name="FileUpload" />
        <input type="submit" name="Submit" id="Submit" value="Upload" />
    <% } %>

    <p><%= Html.Encode(ViewData["Feedback"]) %></p> 
</asp:Content> 
```

**存储过程**

```
USE [BULkDatabase]
GO

SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER OFF
GO

CREATE PROCEDURE [dbo].[InsertProdutInfo] 
(
   @ProductName varchar (50),  
   @EmployeeName varchar (50),
   @EmployeeAddress varchar (50)
)

AS

BEGIN TRAN

   update [dbo.Product] 
   set    [ProductName] = @ProductName
   where  [ProductName] = @ProductName;

   -- get product id
   select ProductId = [ProductId] 
   from   [dbo.Product]
   where  [ProductName] = @ProductName;  

   if @@rowcount = 0
   BEGIN TRAN

      DECLARE @ProductId uniqueidentifier
      -- there's no such product, let's create it
      insert into [dbo.Product]
      values (NEWID(),@ProductName);

      select @ProductId = SCOPE_IDENTITY()
   end

   -- now that we know we have added the product and have the id, let's add the rest
   insert into [dbo.Employees]
   values (NEWID(), @EmployeeName, @EmployeeAddress, @ProductId);

COMMIT TRAN 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T00:47:15.743

首先，您应该将 Controller 与数据库代码分离，只需创建一个新的 Class 项目并在那里托管所有数据库访问，这样您就可以在 Controller 中拥有如下内容：

```
[HttpPost]
public ActionResult UploadFile(HttpPostedFileBase FileUpload)
{
    if (FileUpload.ContentLength > 0) {
        // there's a file that needs our attention
        var success = db.UploadProductFile(FileUpload);

        // was everything ok?
        if (success)
            return View("UploadSuccess");
        else
            return View("UploadFail");
    }

    return RedirectToAction("Index", new { error = "Please upload a file..." });
}

public ActionResult Index(string error)
{
    ...
} 
```

这样，控制器并不真正关心您如何处理上传的文件，因为**它不`Controller`关心**知道这样的事情，它的任务是知道它需要委派该工作并处理结果，就是这样。

请查看 action 方法是否被`UploadFile`调用`Index`。发布到相同的操作以避免用户刷新页面时再次发布它不是一个好习惯。

我还建议你使用**ADO.NET Entity Model**，那里有很多视频，在 ASP.NET 网站上也是如此，它将极大地帮助你以更简单和干净的方式使用数据库。

回到您的问题...在您的 Database 类中，该方法`UploadProductFile`应该类似于，并且假设您没有超过 200 条记录来处理它最好使用[内存来处理文件](https://stackoverflow.com/a/8047081/28004)而不是花时间来保存并再次阅读（更多信息，你应该保存文件并处理它，就像你已经做的那样）：

```
private bool UploadProductFile(HttpPostedFileBase FileUpload)
{
    // get the file stream in a readable way
    StreamReader reader = new StreamReader(FileUpload.InputStream);

    // get a DataTable representing the passed string
    System.Data.DataTable dt = ProcessCSV(reader.ReadToEnd()); 

    // for each row, compose the statement
    bool success = true;
    foreach (System.Data.DataRow row in dt.Rows)
        success = db.InsertProdutInfo(row);

    return success;
} 
```

该方法`InsertProdutInfo`将触发一个类似于以下内容的[存储过程：](https://stackoverflow.com/a/108420/28004)

```
declare @product_key int

begin tran

   update [tbl_products] 
   set    [name] = @product_name, [last_update] = getdate()
   where  [name] = @product_name;

   -- get product id
   select @product_key = [id] 
   from   [tbl_products]
   where  [name] = @product_name;  

   if @@rowcount = 0
   begin
      -- there's no such product, let's create it
      insert into [tbl_products] (name, last_update)
      values (@product_name, getdate());

      select @product_key = SCOPE_IDENTITY()
   end

   -- now that we know we have added the product and have the id, let's add the rest
   insert into [tbl_Employees] (id, product_id, name, contact, address)
   values (@employee_id, @product_key, @employee_name,
           @employee_contact, @employee_address);

commit tran 
```

这样，您将拥有所需的一切。

# c - 在没有指针的情况下返回C中的字符串？

> ID：13963254
> 
> 赞同：0
> 
> 时间：2012-12-20T00:02:14.803
> 
> 标签：c, string, pointers, return

```
#include <stdio.h>

void read_string(char prompt[], char returned[], int MAX)
{
fputs(prompt, stdout);
fflush(stdin);
fgets(returned, MAX, stdin);
}

main()
{
    char string[0][10];

read_string("String you want to return ", string[0], sizeof string[0]); 

printf("The returned string is %s",string[0]);

fflush(stdin);
getchar();

} 
```

这段代码来自我做的一个练习（修改），只是表明我不能很好理解的代码行。它假设在循环中返回各种字符串，因此我只是声明了 STRING [0] [100]，因为它只是一个示例。

好吧，我知道变量“string”像这个string =返回一样进入函数然后从键盘（fgets）获取字符串后它如何返回main（），我的意思是它真的返回并隐式执行此操作? 返回=字符串

编译器在编译时也会给我这个消息（虽然它在运行时确实返回了一个字符串）

[警告] 不推荐将字符串常量转换为 'char*' [-Wwrite-strings]

我是学习函数及其结构的新手，我还没有看到指针，但是从我目前所读的内容来看，您需要指针来返回字符串。请原谅任何严重的错误及其编写不佳的代码，我非常感谢有关解决此问题的任何指导。

这里的问题主要是关于字符串如何返回，而不需要使用***return***，我的意思是字符串被保存在名为“returned”的变量中，但它如何摆脱它，并回到 main 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T00:05:25.130

```
char string[0][10]; 
```

声明一个长度为零的二维数组。在 C 中使用零长度数组是非法的。

**6.7.5.2 数组声明符**

> 如果它们分隔了一个表达式（它指定了一个数组的大小），则该表达式应为整数类型。如果表达式是常量表达式，它的值应大于零。

不知道`(prompt, stdout);`应该做什么。

您正在传递一个零长度并尝试写入它。

* * *

请注意， fflush`(stdin)`在 C 中是未定义的行为。

如果我理解正确，您想在提示中显示第一个字符串并读取另一个字符串并返回它。

```
#include<stdio.h>

void read_string(char prompt[], char returned[], int MAX)
{
fputs(prompt, stdout);
fgets(returned, MAX, stdin);
}

int main()
{
char string[10];

read_string("String you want to return ", string, sizeof string); 
printf("The returned string is %s",string);
getchar();

return 0;
} 
```

请注意，`fgets`将换行符读入您可能想要剥离的缓冲区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T09:52:56.523

在 C 中，您不能真正将数组作为参数传递给函数。当您调用`read_string("String you want to return ", string[0], sizeof string[0]);`时，真正发生的是数组参数`read_string`是*别名*。这意味着 if 和 when`read_string`修改`prompt`或`returned`调用者的第一个或第二个 ( `string[0]`) 参数字符串也被修改。这样`read_string`就可以将字符串返回给调用者。

这也可能会咬你，例如，如果`read_string`尝试修改`prompt`数组（如`prompt[0] = 'X'`），它也会尝试修改`"String you want to return "`. 在标准 C 中，修改这样的字符串文字会产生未定义的行为。许多编译器会将这种字符串文字放在只读内存中，这将中止您的程序。

请注意，该行`char string[0][10];`无效，因为 C 不支持 0 大小的数组。你想要`char string[1][10];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T00:17:14.940

我认为 KingsIndian 已经指出您的代码中存在一些不同的问题。我也从未见过`(prompt, stdout);`以前使用过的语法。

关于返回的字符串。他们不是。您正在声明一个字符数组，然后将 this 的指针传递给 function_read 字符串。这是将其结果写入该内存位置。

所以你的原始字符串（可能是空值或垃圾）被用户输入覆盖:)

# python - .items() 和 .keys() 之间的区别

> ID：13963258
> 
> 赞同：3
> 
> 时间：2012-12-20T00:03:16.477
> 
> 标签：python

迭代字典时使用第一个代码块而不是第二个代码块有什么优势吗？

```
for k, v in mydict.items():
    if v == None:
        mydict[k] = '' 
```

和

```
for k in mydict.keys():
    if mydict[k] == None:
        mydict[k] = '' 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T00:05:11.670

第一种方法可以说更清晰，更容易阅读，所以我总是推荐它而不是后者。

也就是说，在这样的简单情况下，更好的选择是[字典理解](http://www.youtube.com/watch?v=pShL9DCSIUw)：

```
{k: v if v is not None else "" for k, v in mydict.items()} 
```

值得注意的是，第二个示例可以简化，因为直接迭代`mydict`将提供键，所以不需要`mydict.keys()`（这主要用于当您想要一组键用于其他目的时，而不是迭代）。

（正如评论中的 jathanism 所指出的，在旧版本的 Python（2.x）中， using`iteritems()`是一个更好的选择，`items()`因为它不会产生列表 - 像我这样的 3.x 用户不需要担心`items()`会产生字典视图，这是懒惰的。）

# javascript - 将修改后的 SVG 绘制到画布上

> ID：13963259
> 
> 赞同：3
> 
> 时间：2012-12-20T00:03:17.423
> 
> 标签：javascript, svg, html5-canvas

我想加载一个 SVG 图像，对其进行一些操作`.contentDocument`，然后将其绘制到画布上。

将 SVG 绘制到画布上的一个很好的例子是：[http ://www.phrogz.net/tmp/canvas_from_svg.html](http://www.phrogz.net/tmp/canvas_from_svg.html)

但是在这个例子中，svg 被创建为一个`new Image('url.svg')`对象。当您以这种方式创建 SVG 时，不幸的是，它似乎没有要操作的 contentDocument。`<object>`当您将其创建为元素时，它似乎只有一个。

但是当我将 SVG 创建为对象时，获取 SVG 的 DOM 节点并将其传递给`context.drawImage(svgNode, x, y)`，它会引发错误`"Value could not be converted to any of: HTMLImageElement, HTMLCanvasElement, HTMLVideoElement."`（在 Firefox 上）。

似乎我要么必须找到一种将对象 SVG 转换为 HTMLImageElement 的方法，要么必须找到一种方法来获取作为图像加载的 SVG 的内容文档。有谁知道该怎么做？或者有没有我想念的第三种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T01:32:56.033

我设法做到了。诀窍是：

1.  使用 XMLHttpRequest() 将 SVG 作为 XML 文档加载
2.  操作那个 XML 文档
3.  将 XML 文档转换为字符串
4.  从该字符串创建一个 ObjectURL
5.  使用该 ObjectURL 创建一个图像
6.  将该图像复制到画布

那是我的源代码：

**编辑：**不幸的是，它只适用于 Firefox 和 Chrome。它在 IE9 中失败，因为 XMLSerializer() 不受支持（它也不支持 XML 文档上的 getElementById，但有解决方法），它在 Opera 中失败，因为不支持 createObjectUrl。

```
var xhr = new XMLHttpRequest();
xhr.onload = function() {
    // get the XML tree of the SVG
    var svgAsXml = xhr.responseXML;
    // do some modifications to the XML tree
    var element = svgAsXml.getElementById('hat');
    element.style.fill = '#ffff00';
    // convert the XML tree to a string
    var svgAsString = new XMLSerializer().serializeToString(svgAsXml);
    // create a new image with the svg string as an ObjectUrl
    var svgBlob = new Blob([svgAsString], {type: "image/svg+xml;charset=utf-8"});
    var url = window.URL.createObjectURL(svgBlob);
    var img = new Image();
    img.src = url;
    // copy it to the canvas
    img.onload = function() {
        var theCanvas = document.getElementById('theCanvas');
        var context = theCanvas.getContext('2d');
        context.drawImage(img, 0, 0);
        window.URL.revokeObjectURL(svgBlob);
    }
}
xhr.open("GET", "test.svg");
xhr.responseType = "document";
xhr.send(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:47:11.213

将 svg 的 xml 内容转换为字符串数据，然后从中生成数据 uri。您应该能够将其加载为图像。像这样的东西：

```
new Image("data:image/svg+xml," + svgdata); 
```

现在您应该可以将其绘制到画布上。

# python - 我可以将 Python 请求与 celery 一起使用吗？

> ID：13963260
> 
> 赞同：5
> 
> 时间：2012-12-20T00:03:17.300
> 
> 标签：python, celery

我在名为 tasks.py 的 celery 模块中定义了以下内容，并导入了 requests 库：

```
@celery.task
def geturl(url):
    res = requests.get(url)
    return res.content 
```

每当我调用任务（来自tasks.py或REPL）时：

```
res = geturl.delay('http://www.google.com')
print res.get() 
```

以下是 celery 服务器上的日志条目：

[2012-12-19 18:49:58,400: INFO/MainProcess] 开始新的 HTTP 连接 (1): www.google.com [2012-12-19 18:49:58,594: INFO/MainProcess] 开始新的 HTTP 连接 ( 1): www.google.ca [2012-12-19 18:49:58,801: INFO/MainProcess] 任务 tasks.geturl[48182400-7d67-466b-ba5c-867747cb3974] 成功 0.402245998383s: 无

但是当我通过调用 geturl('http://www.google.com') 以同步方式运行它时，我得到了响应。我已通读文档，似乎无法弄清楚为什么这不起作用。它的主要用途是轮询 API，有人可以解释为什么这不起作用吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T01:04:58.523

`res.content`只是一个`str`例子，你没有理由不能退货。您的问题可能出在其他地方，可能在您的芹菜配置中。

* * *

[许多配置参数会影响结果的存储方式](http://docs.celeryproject.org/en/latest/configuration.html#task-execution-settings)；看看他们。
您要检查的第一个可能是`CELERY_IGNORE_RESULT`.

您还应该检查您的结果代理配置。

# c# - 使用带有自定义 logformatter 的自定义 logentry 类

> ID：13963263
> 
> 赞同：4
> 
> 时间：2012-12-20T00:03:26.143
> 
> 标签：c#, logging, enterprise-library

我有一个自定义 LogEntry 类 - ErrorEntry，它派生自 LogEntry。它有一些公共属性（类对象也是属性之一），我希望在其中放入额外的数据。

```
public class ErrorEntry : LogEntry
{
 public string UserId {get; set; }
 public SessionDetail SessionInfo {get; set; }
} 
```

我还有一个自定义格式化程序 - MyFormatter

```
[ConfigurationElementType(typeof(CustomFormatterData))]
public class MyFormatter : ILogFormatter
{
  public MyFormatter(NameValueCollection nvc)
  {
     //not used
  }

  public string Format(LogEntry log)
  {
    string strEntry;
    if(log is ErrorEntry)
    {
       //use properties of ErrorEntry
       //populate returnString
    }
    else
    {
       throw new ArgumentException("Not supported");
    }
    return strEntry;
  }
} 
```

我已经使用自定义格式化程序设置了 web.config 设置，它工作正常，直到它检查变量是否为 ErrorEntry 类型的语句 - 在这里它永远不会变为 true 并进入 else 块。

我在这里有点困惑-我还需要做些什么吗？自定义格式化程序类是否支持此实现？

我正在使用企业库 3.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T01:42:48.173

如果我扩展 LogFormatter（而不是实现 ILogFormatter）并覆盖 Format()，它对我有用：

```
[ConfigurationElementType(typeof(CustomFormatterData))]
public class MyFormatter : LogFormatter
{
    public MyFormatter(NameValueCollection nvc)
    {
        //not used
    }

    public override string Format(LogEntry log)
    {
        ErrorEntry errorEntry = log as ErrorEntry;

        if (errorEntry != null)
        {
            return "This is the string with the custom values: " + errorEntry.UserId;
            //use properties of ErrorEntry
            //populate returnString
        }

        return "Not supported";
    }
} 
```

除了这个配置：

```
<?xml version="1.0"?>
<configuration>
  <configSections>
    <section name="loggingConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.LoggingSettings, Microsoft.Practices.EnterpriseLibrary.Logging, Version=3.1.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
    <section name="dataConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Data.Configuration.DatabaseSettings, Microsoft.Practices.EnterpriseLibrary.Data, Version=3.1.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
  </configSections>
  <loggingConfiguration name="Logging Application Block" tracingEnabled="true"
    defaultCategory="General" logWarningsWhenNoCategoriesMatch="true">
    <listeners>
      <add fileName="trace.log" header="----------------------------------------"
        footer="----------------------------------------" formatter="Custom Formatter"
        listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.FlatFileTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=3.1.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
        traceOutputOptions="None" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.FlatFileTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=3.1.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
        name="FlatFile TraceListener" />
    </listeners>
    <formatters>
      <add type="CustomFormatters.MyFormatter, CustomFormatters, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"
        name="Custom Formatter" />
    </formatters>
    <categorySources>
      <add switchValue="All" name="General">
        <listeners>
          <add name="FlatFile TraceListener" />
        </listeners>
      </add>
    </categorySources>
    <specialSources>
      <allEvents switchValue="All" name="All Events" />
      <notProcessed switchValue="All" name="Unprocessed Category" />
      <errors switchValue="All" name="Logging Errors &amp; Warnings">
        <listeners>
          <add name="FlatFile TraceListener" />
        </listeners>
      </errors>
    </specialSources>
  </loggingConfiguration>
  <startup>
    <supportedRuntime version="v2.0.50727" />
  </startup>
</configuration> 
```

如果您不将 an `ErrorEntry`in 传递给 Logger.Write() ，`LogEntry`则将构造 a 而不是 custom `ErrorEntry`。因此，您应该始终传入`ErrorEntry`而不使用其他重载。例如：

```
ErrorEntry errorEntry = new ErrorEntry();
errorEntry.UserId = "ME!";
errorEntry.Message = "Default message";
errorEntry.Categories.Add("General");

Logger.Write(errorEntry); 
```

# linux - bc 忽略比例选项

> ID：13963265
> 
> 赞同：32
> 
> 时间：2012-12-20T00:03:32.777
> 
> 标签：linux, bash, bc

我不明白为什么 bc 工具有时会忽略 scale 选项。

这是一个例子：

```
> echo 'scale=2; 2.777 - 1.4744' | bc
1.3026 
```

预期结果是：

```
1.30 
```

附加信息：

```
> bash --version
GNU bash, version 2.05b.0(1)-release (x86_64-suse-linux)
Copyright (C) 2002 Free Software Foundation, Inc.
> bc --version
bc 1.06
Copyright 1991-1994, 1997, 1998, 2000 Free Software Foundation, Inc. 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-12-20T00:15:20.703

正如卡尔指出的那样，如果您查看手册页，您可以找到该行。它是关于表达解释的。减法不会读取`scale`变量。如果你想得到预期的结果（1.30），你可以：

```
kent$  echo 'scale=2; (2.777 - 1.4744)/1' | bc 
1.30 
```

`/`操作将读取`scale`变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T00:09:45.240

从[`bc(1)`手册页](http://www.manpagez.com/man/1/bc/)：

> 除非特别提及，否则结果的比例是所涉及表达式的最大比例。

`1.4744`有 scale `4`，所以这就是你的表达方式。

# php - 使用 PHP 在 MySQL 中查找帐户名的最有效方法是什么

> ID：13963267
> 
> 赞同：3
> 
> 时间：2012-12-20T00:03:49.780
> 
> 标签：php, mysql, sql

我用 php 和 MySQL 编写了一个基本的 Web 应用程序，它使用查询字符串来查找各种信息。例如：`xxxxxxx.com/?profile=1245`

非常基本的，第一次开发者类型的网络应用程序。

我想创建不同的帐户，每个帐户都有自己的数据集。我想通过使用子域来区分这些帐户。例如：`username.xxxxxxxx.com?profile=4527`

我在我的 Apache 配置中设置了一个包罗万象的功能，将所有子域转移到我的主域，然后我可以使用 php 拉出该子域，如下所示：

`<?php list( $username ) = explode( ".", $_SERVER[ "HTTP_HOST" ] ); ?>`

**现在，这是我的问题：**

在我看来（我对这一切都很陌生）对我需要在每个页面上执行的每个查询执行基于字符串的搜索将是缓慢且低效的。例如，不得不抬头`SELECT * WHERE username = sampleuser AND profile = 2745`

但这是真的吗？什么是最有效的方法？使用子域的网络应用程序通常如何处理这种事情？

提前非常感谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T00:12:55.493

使用子域不是很有效。当您查看 SEO 时。您有许多具有相同内容的域和站点。

在你的情况下，我更喜欢重写

```
www.xxxxx.com/username 
```

然后您可以将用户名重写为您的脚本。问题是当您为每个用户创建一个新的子域时可能会出现问题。可能是用户缓存了 DNS 请求，访问该站点需要花费大量时间。

第二个是您应该尽可能少地查询数据库。将用户名或 ID 保存在会话中。

```
$_SESSION['username'] = 'username'; 
```

然后您可以进行查询以从数据库中获取信息。

**编辑：**当你需要更多性能时，你应该看看**MongoDB**或使用**Memcache**来存储/缓存东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T00:26:33.550

“使用子域的网络应用程序通常如何处理这种事情？”

通常每个子域在 web 引擎（apache/IIS）中使用重写模块之类的东西映射到特定的 IP 地址或特定的根。所以 blog.* 子域可能指向 WordPress 应用程序的根目录。

在您的情况下，除非您为每个用户设置不同的页面集，否则这听起来并不适用。即，如果他们都有一个“帐户详细信息”页面，并且只有数据不同，那么子域唯一发挥作用的地方就是查询或您生成的 URL。

在您的情况下，您拥有概念上的动态路线。通常您只需查询一个表以确定要提供的内容。在您的情况下，它不仅仅是数据，而是内容。有时，路由使用为查找组织良好的数据结构全局缓存在内存中，在您的情况下，通过用户名进行查找，该用户名返回用户表的主键。然后，无需查询用户的表，您就有了通过外键引用该用户的数据的过滤条件。因此，如果导航到“喜欢”页面，您可以“选择 * From Likes Where UserKey = $userKeyFromLookup”。您可能希望为允许 O(1) 查找的查找选择内存中的数据结构。即恒定时间查找。

> 在我看来（我对这一切都很陌生）对我需要在每个页面上执行的每个查询执行基于字符串的搜索将是缓慢且低效的。例如，必须查找 SELECT * WHERE username = sampleuser AND profile = 2745

每个用户的个人资料 ID 是否唯一？如果是这样，那么您在查询中不需要用户名。仅个人资料 ID 就会为您提供独特的响应。如果有人访问用户名。*.* 如果没有配置文件 ID，那么您要做的第一件事就是获取 profileID，然后重定向到同一页面，但现在在 URL 中使用该参数，以便所有其他导航都在该 profileID 的上下文中完成。

不过，我同意 Stony 的观点，我认为您会发现夸克具有动态子域。我会将用户名放在 URL 中。

# django - Flowplayer 不适用于亚马逊 s3 签名的网址

> ID：13963273
> 
> 赞同：2
> 
> 时间：2012-12-20T00:04:33.393
> 
> 标签：django, amazon-s3, flowplayer

Flowplayer 似乎不喜欢 url 中的查询字符串。为什么会这样：

```
{% extends "base.html" %}
{% block extra_head %}
<!-- 1\. jquery library -->
<script
  src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js">
</script>

<!-- 2\. flowplayer -->
<script src="http://releases.flowplayer.org/5.2.1/flowplayer.min.js"></script>

<!-- 3\. skin -->
<link rel="stylesheet" type="text/css"
   href="http://releases.flowplayer.org/5.2.1/skin/minimalist.css" />
{% endblock %}
{% block content %}
    <div class="flowplayer">
        <video src="https://mybucketname.s3.amazonaws.com/videos/Quixotic_2012.mp4"></video>
    </div>

{% endblock %} 
```

但这不是：

```
{% extends "base.html" %}
{% block extra_head %}
<!-- 1\. jquery library -->
<script
  src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js">
</script>

<!-- 2\. flowplayer -->
<script src="http://releases.flowplayer.org/5.2.1/flowplayer.min.js"></script>

<!-- 3\. skin -->
<link rel="stylesheet" type="text/css"
   href="http://releases.flowplayer.org/5.2.1/skin/minimalist.css" />
{% endblock %}
{% block content %}
    <div class="flowplayer">
        <video src="https://mybucketname.s3.amazonaws.com/videos/Quixotic_2012.mp4?Signature=mrsCPFcFOK5tceBieh5Ii%2BewNVk%3D&Expires=1355962607&AWSAccessKeyId=1VDAPQXESPKD9EKFT2R2"></video>
    </div>

{% endblock %} 
```

什么是好方法或让 flowplayer 使用签名的 url？

编辑：我在 Javascript 控制台中收到此错误：不支持“video/mp4”的 HTTP“Content-Type”。加载媒体资源[https://mybucketname.s3.amazonaws.com/videos/Quixotic_2012.mp4?Signature=hVStvUqQLIAhY4h%2Bp839LTNmvDo%3D&Expires=1355975423&AWSAccessKeyId=1VDAPQXESPKD9EKFT2R2](https://mybucketname.s3.amazonaws.com/videos/Quixotic_2012.mp4?Signature=hVStvUqQLIAhY4h%2Bp839LTNmvDo%3D&Expires=1355975423&AWSAccessKeyId=1VDAPQXESPKD9EKFT2R2)失败。

我已经验证签名是正确的。该链接在将其粘贴到地址栏中时有效。

更新：如果我将 type="video/mp4" 添加到视频标签，它会起作用。现在我只需要弄清楚如何在 Django 模板中动态确定文件对象的 mimetype。希望它像 {{ object.video.mimetype }} 一样简单，尽管这本身是不正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T04:11:07.860

为了让它工作，我必须在视频标签中添加一个 mime 类型，如下所示：

```
<video type="video/mp4" src="https://mybucketname.s3.amazonaws.com/videos/Quixotic_2012.mp4?Signature=mrsCPFcFOK5tceBieh5Ii%2BewNVk%3D&Expires=1355962607&AWSAccessKeyId=1VDAPQXESPKD9EKFT2R2"></video> 
```

使用 django 来动态获取 mimetype，我必须创建一个模板标签。urlparse 用于从链接中去除查询字符串，以便 mimetypes.guess_type 可以确定正确的 mime_type。

```
#custom_tags.py

import mimetypes
from django import template
from django.conf import settings
from urlparse import urlparse

register = template.Library()

@register.filter
def mimetype(value):
    return mimetypes.guess_type(urlparse(value).path, strict=True)[0] 
```

然后把它放在模板中：

```
{% load custom_tags %}

 <video type="{{ object.video.url|mimetype }}" src="{{ object.video.url }}"></video> 
```

# windows - 视窗 8 和视窗电话 8

> ID：13963279
> 
> 赞同：11
> 
> 时间：2012-12-20T00:05:23.383
> 
> 标签：windows, windows-8, windows-phone-8

如何使用 Visual Studio Professional 2012 为 Windows Phone 8 和 Windows 8（平板电脑）开发应用程序？我希望能够重用大部分代码。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-20T04:37:05.593

关于如何获得高代码重用的一些想法：

*   目前 XAML 可能是您最好的语言选择...... Win8 和 WP8 之间有很多重叠。这是[Windows Phone 8 和 Windows 8 之间的 XAML 控件比较](http://msdn.microsoft.com/en-US/library/windowsphone/develop/jj735581(v=vs.105).aspx)。
*   利用[MVVM 模式](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj721615(v=vs.105).aspx)。这为您的 UI 和应用程序逻辑提供了很好的解耦。
*   使用[可移植类库](http://msdn.microsoft.com/en-us/library/windows/apps/gg597391.aspx)（可跨 Win8、WP8 和其他平台使用的 DLL）。更多信息[在这里](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj714086(v=vs.105).aspx)。
*   或者，使用[“添加为链接”](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj714082(v=vs.105).aspx)来引用 Win8 和 WP8 中的相同源文件。这样，您将源代码维护在一个地方，但您的 Win8 和 WP8 应用程序都使用它。
*   使用[条件编译](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj714084(v=vs.105).aspx)。例如，这将使您能够仅在 Windows 8 中编译某些代码块。谨慎使用固然好，但是如果您发现自己经常使用这种技术，您的代码可能会变得非常难以阅读并且其他人难以维护。
*   这段关于[如何在 WP8 和 Windows 8](http://channel9.msdn.com/Events/Build/2012/3-043)中利用 BUILD 2012 的代码的视频很有帮助。
*   [http://aka.ms/ShareCode](http://aka.ms/ShareCode)和[Windows Phone 8 和 Windows 8 应用程序开发入门](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj714071(v=vs.105).aspx)有很多有用的链接。
*   旁注：如果您同时为两者开发，那么您拥有 Visual Studio Professional 非常好。您可以使用免费版本（适用于 Windows 8 的 Visual Studio Express 和适用于 Windows Phone 的 Visual Studio Express，两者均可在[此处](http://aka.ms/JenVS2012)下载）进行开发，但使用 Professional，您可以打开一个 Visual Studio 实例并引用这两种类型的项目在同一个解决方案中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T01:01:49.293

这里有一篇[很好的博客文章涵盖了这个主题](http://www.matthidinger.com/archive/2012/12/05/sharing-code-windows-8-and-windows-phone.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T08:36:25.477

是的，但您需要使用不同的项目模板。您还需要*Windows 8 SDK*和*Windows Phone 8 SDK*。

如果您使用`XAML`，您可以轻松地在项目中迁移（无需电话功能和合同）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T16:30:29.397

对于 Windows phone 8，您必须安装可在微软官方网站上获得的 windows phone sdk，对于平板电脑您不必安装 SDK，它已在已安装的项目中可用。

# c# - LINQ 根据值类型从字典中进行子选择

> ID：13963288
> 
> 赞同：5
> 
> 时间：2012-12-20T00:05:44.157
> 
> 标签：c#, linq

我正在尝试`Dictionary<String, Double>`从`Dictionary<String, String>`. 为此，我使用`IEnumrable<>.Where`so 子选择 a `Dictionary<String, String>`（有效），然后将其转换为`Dictionary<String, Double>`（无效）。

**我的代码：**

```
//linesTable is an System.data.DataTable object
//...for loop code in here
DataRow row = linesTable.Rows[i]; //Where i is the loop index
Dictionary<String, String> valuesDictionary 
    = row.Table.Columns.Cast<DataColumn>().ToDictionary(
                col => col.ColumnName, 
                col => row.Field<String>(col.ColumnName));
//ATTEMPT #1
/*Dictionary<String, Double> numericValues = valuesDictionary.Where(
                subs => 
                    { 
                        double doubleValue; 
                        return double.TryParse(subs.Value, out doubleValue);                
                    }).Cast<Dictionary<String, Double>>();*/
//ATTEMPT #2
Dictionary<String, Double> numericValues = valuesDictionary.Where(
    subs => {
        double doubleValue;
        return double.TryParse(subs.Value, out doubleValue);
    }
).ToDictionary<String, Double>(
    pair => pair.Key,
    pair => double.Parse(pair.Value)); 
```

*我究竟做错了什么？*

我需要它的`Dictionary<String, Double>`格式的原因是因为我有一个接受这种类型的方法，我需要将字典数据传递给它。

*提前致谢！*

> **类似问题：**我的问题与以下类似：[http://bit.ly/12qjrmE](http://bit.ly/12qjrmE)、[http://bit.ly/YmuRHZ](http://bit.ly/YmuRHZ)和 [http://bit.ly/XLQNaB](http://bit.ly/XLQNaB)，除了我希望子查询返回字典类型为好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T00:12:18.987

您不能*将*a`Dictionary<string, string>`转换为 a，`Dictionary<string, double>`因为它不是一个。您将需要创建一个新的`Dictionary`（或者`Dictionary<string,double>`如果您不需要`Dictionary<string,string>`康斯坦丁建议的）。

事实上，你的代码甚至没有真正按照你的想法去做。`Cast<Dictionary<string,Double>>()`您链接到 的是`Where()`试图将 中的每个项目`IEnumerable`转换为`Dictionary<string, Double>`。

我认为你想要的是：

```
Dictionary<String, Double> numericValues = valuesDictionary
      .Where(
            pair => 
                { 
                    double doubleValue; 
                    return double.TryParse(subs.Value, out doubleValue);                
                })
      .ToDictionary(pair => pair.Key, pair => double.Parse(pair.Value); 
```

也就是说，对于所有`double`可以解析的情况，将它们放在一个新的`Dictionary<string, double>`.

当然，您可以使用 RegEx 或类似的东西来使`Where`更漂亮，但关键是`Cast<>()`要转换序列中的每个*项目*，而不是将序列作为一个整体进行转换。此外，您*不能*将序列作为一个整体进行转换，因为*a*`Dictionary<string,string>`不是a 。 *`Dictionary<string,double>`*

 *因此，您需要一个新的`Dictionary`，并且使用`ToDictionary()`是到达那里的一种选择......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T00:12:30.897

如果你不需要`Dictionary<String, String>`，你可以一次完成：

```
Dictionary<String, Double> valuesDictionary =
    row.Table.Columns.Cast<DataColumn>()
                     .Where(col =>
                     {
                         double d;
                         return double.TryParse(row.Field<String>(col.ColumnName), out d);
                     })
                     .ToDictionary(
                         col => col.ColumnName,
                         col => double.Parse(row.Field<String>(col.ColumnName))); 
```*

# html - 当兄弟姐妹的文本行数不同时，li元素被下推

> ID：13963297
> 
> 赞同：1
> 
> 时间：2012-12-20T00:06:45.727
> 
> 标签：html, css, html-lists

我正在尝试制定一个简单的时间表。

它工作正常，直到列表元素的内容跨越不同数量的行。如果列表中的所有同级具有相同数量的文本行，它们会正确显示，否则有些会被下推。

CSS：

```
ul {
  display: table;
  width: 100%;
  list-style-type: none;
  margin: 0;
  padding: 0;
  text-align: center;
}
.timetable {
  width: 600px;
  float: right;
  border-left: 2px solid #999;
  border-right: 2px solid #999;
}
.timetable li {
  border-bottom: 2px solid #999;
}
.date {
  text-align: center;
  line-height: 30px;
}
.multievent li {
  display: inline-block;
  width: 110px;
  border: none;
  border-right: 2px solid #999;
} 
```

HTML：

```
 <ul class="timetable day2">
    <li>
      <ul class="multievent">
        <li class='suite1 firstchild' style="height: 28px;">one line</li>
        <li class='suite2' style="height: 28px;">one line</li>
        <li class='suite3' style="height: 28px;">one line</li>
        <li class="suite4" style="height: 28px;">one line</li>
      </ul>
    </li>
    <li>
      <ul class="multievent">
        <li class='suite1' style="height: 58px;">two line  asdasdf two line</li>
        <li class='suite2' style="height: 58px;">two line  asdfasdftwo line</li>
        <li class='suite3' style="height: 58px;">one line</li>
        <li class="suite4" style="height: 58px;">two line asdfasdf two line</li>
        <li class="ball noborder" style="height: 58px;">two line asdfasdf two line</li>
      </ul>
    </li>
    <li>
      <ul class="multievent">
        <li class='suite1' style="height: 58px;">two line  asdasdf two line</li>
        <li class='suite2' style="height: 58px;">three line  asdfasdasdff three line</li>
        <li class='suite3' style="height: 58px;">two line  asdfasdftwo line</li>
        <li class="suite4" style="height: 58px;">two line asdfasdf two line</li>
        <li class="ball noborder" style="height: 58px;">two line asdfasdf two line</li>
      </ul>
    </li>
    <li>
      <ul class="multievent">
        <li class='suite1' style="height: 58px;">two line  asdasdf two line</li>
        <li class='suite2' style="height: 58px;">two line  asdff two line</li>
        <li class='suite3' style="height: 58px;">two line  asdfasdftwo line</li>
        <li class="suite4" style="height: 58px;">two line asdfasdf two line</li>
        <li class="ball noborder" style="height: 58px;">two line asdfasdf two line</li>
      </ul>
    </li>
    </ul> 
```

例如看这里：http: [//jsfiddle.net/762LA/1/](http://jsfiddle.net/762LA/1/)

当所有框正确排列时，您将看到内容跨越相同数量的行。

怎么了 ？有没有简单的解决方法，或者我应该完全以另一种方式来解决。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T00:10:39.233

给你的列表项一个顶部垂直对齐：

`li { vertical-align:top; }`

# css - 艺术框架内的文字

> ID：13963300
> 
> 赞同：0
> 
> 时间：2012-12-20T00:07:14.990
> 
> 标签：css, image, background, border, margin

我在这里感到沮丧，试图让我的 div 正确排列！我正在尝试将我的文本放在艺术框架的图像中。html是：

```
<div id="frame">
<div id="songtext">
<p>lorem ipsum dolor...</p>
</div>
</div> 
```

CSS是：

```
#frame {
background:url(images/gold-frame-trans-bg.png) no-repeat; 
margin-left:auto;
margin-right:auto;
margin-top:0px;
width:650px;
height:750px;
}

#songtext {
width:336px;
height:410px;
margin-left:auto;
margin-right:auto;
margin-top:140px; 
overflow:auto;
} 
```

当我这样做时，图像的顶部与文本的顶部对齐，在屏幕顶部下方 140 像素处。但是，如果我将 #songtext {margin-top:140px;} 更改为 #songtext {padding-top:140px;) 文本会显示在正确的位置，但滚动条仍从页面顶部开始，从而中断图像。当我向上滚动时，文本会滚动到图像上，而不是看起来隐藏在它下面。（这有意义吗？）如果您想直观地看到它，这里是页面：http: [//studentaccess.emporia.edu/~asmith40/AVAwebsite/seemssimpossible.html](http://studentaccess.emporia.edu/~asmith40/AVAwebsite/seemsimpossible.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T00:26:42.963

你可以这样做：

```
#songtext {
 height: 410px;
 margin-left: 160px(or similar);
 margin-right: auto;
 margin-top: 140px;
 overflow: auto;
 position: absolute;
 width: 336px; 
```

}

# javascript - Javascript 可以访问受证书保护的 WCF 服务吗？

> ID：13963305
> 
> 赞同：1
> 
> 时间：2012-12-20T00:08:17.393
> 
> 标签：javascript, wcf, web-services, rest, certificate

我想使用 Javascript 访问受证书保护的基于 WCF 的 Web 服务。

假设我可以生成私钥并将其存储在受保护的存储中，这可能吗？

# javascript - 如何简单地从图像中获取像素数据数组？

> ID：13963308
> 
> 赞同：13
> 
> 时间：2012-12-20T00:08:28.510
> 
> 标签：javascript, html, canvas, pixel-manipulation

谢谢大家的回复。我应该更具体地回答我的问题。我查看了许多示例，但这是来自 W3 Schools 的示例（感谢@Pointy 指出这不是一个应该依赖的来源——不是双关语）。

[http://www.w3schools.com/tags/canvas_getimagedata.asp](http://www.w3schools.com/tags/canvas_getimagedata.asp)

```
<!DOCTYPE html>
<html>
<body>

  <img id="scream" src="img_the_scream.jpg" alt="The Scream" width="220" height="277">

  <canvas id="myCanvas" width="220" height="277" style="border:1px solid #d3d3d3;">
    Your browser does not support the HTML5 canvas tag.
  </canvas>

  <script>
    document.getElementById("scream").onload = function () {
    var c = document.getElementById("myCanvas");
    var ctx = c.getContext("2d");
    var img = document.getElementById("scream");
    ctx.drawImage(img, 0, 0);
    var imgData = ctx.getImageData(0, 0, c.width, c.height);
    // invert colors
    for (var i = 0; i < imgData.data.length; i += 4) {
        imgData.data[i] = 255 - imgData.data[i];
        imgData.data[i + 1] = 255 - imgData.data[i + 1];
        imgData.data[i + 2] = 255 - imgData.data[i + 2];
        imgData.data[i + 3] = 255;
    }
    ctx.putImageData(imgData, 0, 0);
};
  </script>

</body>
</html> 
```

首先我有点困惑，因为 W3 Schools 网站上的示例显示图像的像素颜色被反转，但是当我将代码复制到 Sublime Text 2 中，保存并在 Chrome 中打开它时，像素颜色图像不会倒置，图像只是在它旁边再次出现完全相同。

我的主要问题是如何在此代码中添加一行以显示图像的整个像素数据数组？

我在图像下方添加了一个 ID 为“data”的空 div，并添加了以下代码，但整个像素数据数组并未出现：

```
document.getElementById("data").innerHTML=imgData.data; 
```

我还尝试通过添加以下内容来至少查看像素数据数组的长度，但它不起作用：

```
document.getElementById("data").innerHTML=imgData.data.length; 
```

我查看了一些处理来自各种来源的图像像素数据的示例，并多次尝试获取整个像素数据数组，但未能成功。

我想查看像素数据数组以识别图片中的字符或图像，并开始查看图像中特定事物可能出现的模式。

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T00:20:51.533

这应该正是您所需要的：

[http://www.html5canvastutorials.com/advanced/html5-canvas-get-image-data-tutorial/](http://www.html5canvastutorials.com/advanced/html5-canvas-get-image-data-tutorial/)

以下是如何访问像素 RGBA 详细信息：

```
imageData = context.getImageData(imageX, imageY, imageWidth, imageHeight); // get the image array

//below is how to access to your pixel details 
red=imgData.data[0];
green=imgData.data[1];
blue=imgData.data[2];
alpha=imgData.data[3]; 
```

**编辑：** 您编辑的问题的答案是：

```
document.getElementById("data").innerHTML=imgData.data.toString(); 
```

或者您可以使用循环遍历数组并每次打印一个元素，如下所示：

```
for(i=0 ; i< imgData.data.length ; i++){
    document.getElementById("data").innerHTML += imgData.data[i];
} 
```

我希望这有帮助。

# python - Python：从url获取图像的宽度和高度

> ID：13963309
> 
> 赞同：0
> 
> 时间：2012-12-20T00:08:30.710
> 
> 标签：python, regex

第三方应用程序以这样的命名格式保存图像，其中 q85 是质量，AAxBB 表示宽度和高度：

```
62620587b.jpg.122x132_q85.jpg -> 122x132

62620587c.jpg.143x85_q85.jpg -> 143x85

6768113_sa.jpg.122x132_q85.jpg -> 122x132

Toshiba_50-Inch_Side.jpg.150x150_q85.jpg -> 150x150 
```

从此类字符串 url 中拆分宽度和高度数字的聪明方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T00:22:21.927

```
re.findall("[\d]+x[\d]+",variable_string) 
```

但它会产生重复，因为该行`62620587b.jpg.122x132_q85.jpg -> 122x132`包含两次 AAxBB ,,，您可以创建一个删除重复的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T00:14:08.423

最短的方法：

```
/(\d+)x(\d+)/ 
```

什么问题？

# c - 来自C中字节的Unicode代码点流？

> ID：13963319
> 
> 赞同：6
> 
> 时间：2012-12-20T00:08:59.133
> 
> 标签：c, unicode, icu

我正在用 C 编写 HTML 解析器，并希望正确遵循[W3C 关于解析器实现的指南](http://www.w3.org/TR/html5/syntax.html#parsing)。关键点之一是解析器对 Unicode 代码点流而不是字节进行操作，这是有道理的。

**基本上，然后，给定一个已知字符编码**的缓冲区（我将得到一个显式的输入编码，或者将使用 HTML5 预扫描算法做出一个好的猜测），C 中最好的方法是什么——理想情况下是跨平台的，但坚持对 UNIX 来说很好——迭代一个等价的 Unicode 代码点序列？

是否分配了一些合理大小的缓冲区并使用`iconv`该方法？我应该看ICU吗？宏之类的`U16_NEXT`似乎非常适合我的任务，但是 ICU 文档非常冗长，而且很难确切地了解如何将它们粘合在一起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T19:29:57.870

ICU是个不错的选择。我将它与 C++ 一起使用并且非常喜欢它。我很确定您也会在 C 中获得类似的深思熟虑的 API。

[本教程](http://userguide.icu-project.org/transforms/general)可能不完全相同但有些相关，它解释了如何执行流式传输/增量音译（这种情况下的困难是“光标”有时可能*在*代码点内）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T01:38:43.420

下面将解码一个代码点并返回将字符串增加多少（“咀嚼”多少）。请注意，xs_utf16 是一个无符号短整数。更多信息：[http ://sree.kotay.com/2006/12/unicode-is-pain-in.html](http://sree.kotay.com/2006/12/unicode-is-pain-in.html)

```
enum
{
    xs_UTF_Max          = 0x0010FFFFUL,
    xs_UTF_Replace      = 0x0000FFFDUL,
    xs_UTF16_HalfBase   = 0x00010000UL,
    xs_UTF16_HighStart  = 0x0000D800UL,
    xs_UTF16_HighEnd    = 0x0000DBFFUL,
    xs_UTF16_LowStart   = 0x0000DC00UL,
    xs_UTF16_LowEnd     = 0x0000DFFFUL,
    xs_UTF16_MaxUCS2    = 0x0000FFFFUL,
    xs_UTF16_HalfMask   = 0x000003FFUL,
    xs_UTF16_HalfShift  = 10
};

int32 xs_UTF16Decode (uint32 &code, const xs_utf16* str, int32 len, bool strict)
{
          if (str==0||len==0)          {code=0; return 0;}

          uint32 c1 = str[0];

          //note: many implementations test from HighStart to HighEnd,
          //                 this may be a partial code point, and is incorrect(?)
          //                 trivial checking should exclude the WHOLE surrogate range
          if (c1<xs_UTF16_HighStart || c1>xs_UTF16_LowEnd)          return 1;
                             //really an error if we're starting in the low range

          //surrogate pair
          if (len<=1 || str[1]==0)                                  {code=xs_UTF_Replace; return strict ? 0 : 1;} //error
          uint32 c2 = str[1];
          code = ((c1-xs_UTF16_HighStart)<<xs_UTF16_HalfShift) + (c2-xs_UTF16_LowStart) + xs_UTF16_HalfBase;

          if (strict==false)                                        return 2;

          //check for errors
          if (c1>=xs_UTF16_LowStart && c1<=xs_UTF16_LowEnd)         {code=xs_UTF_Replace; return 0;} //error
          if (c2<xs_UTF16_LowStart  || c2>xs_UTF16_LowEnd)          {code=xs_UTF_Replace; return 0;} //error
          if (code>xs_UTF_Max)                                      {code=xs_UTF_Replace; return 0;} //error

          //success
          return 2;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T00:13:30.143

您可能对两件事感兴趣：

1.  [Markus Kuhn Unicode 教程](http://www.cl.cam.ac.uk/~mgk25/unicode.html)
2.  [lib9](http://golang.org/src/lib9/utf/)，Plan9 的 utf 库，UTF 的发明者正在研究的操作系统。

# facebook - 当使用 GET 请求 logout.php 将用户从 Facebook 注销时，有没有办法简化后续登录显示？

> ID：13963320
> 
> 赞同：0
> 
> 时间：2012-12-20T00:08:59.477
> 
> 标签：facebook, login, logout

我成功地使用了对这个 URL 的 GET 请求

```
https://www.facebook.com/logout.php?access_token=ACCESS_TOKEN&confirm=1&next=MY_APP_URL 
```

其中 MY_APP_URL 的格式为[https://apps.facebook.com/MY_APP_NAME](https://apps.facebook.com/MY_APP_NAME)以强制用户退出 Facebook 并被重定向回我的应用程序。

但是，浏览器中的用户体验并不理想。首先，它看起来像是重定向到 MY_APP_URL，并且电子邮件/密码字段出现在右上角大约一秒钟。然后，重定向到 login.php 并出现完整的页面登录表单。

关于注销/登录，一切都正常运行，但是不同登录表单的 1-2 秒显示很烦人。

有没有办法简化这一点，以便只有一个重定向，直接到 login.php URL？

也许我应该使用 'oauth/authorize' URL 作为我的下一个而不是[https://apps.facebook.com/MY_APP_NAME](https://apps.facebook.com/MY_APP_NAME)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T00:21:32.480

答案是将 logout.php 的下一个参数（上面最初显示为 MY_APP_URL）设置为与应用程序位于同一域的 URL。

此 URL 应将用户重定向到 OAuth 对话框（此处描述：[https](https://developers.facebook.com/docs/reference/dialogs/oauth/) ://developers.facebook.com/docs/reference/dialogs/oauth/ ）。对 OAuth 对话框的调用中的 redirect_uri 参数应该是如上所述的 MY_APP_URL。

这样，您不会在看到登录页面之前获得 1-2 秒的 Facebook chrome 显示。不幸的是，它在注销/登录过程中插入了另一个请求/响应周期。

（注意：如果用户在未登录时请求[http://apps.facebook.com/MY_APP_NAME](http://apps.facebook.com/MY_APP_NAME)形式的 URL，Facebook 似乎应该自动将用户重定向到登录页面。不知道为什么 FB chrome 应该完全显示。）

# python - 在 python 中构建一个调用图，包括模块和函数？

> ID：13963321
> 
> 赞同：72
> 
> 时间：2012-12-20T00:09:01.853
> 
> 标签：python, function, static, module, call-graph

我有一堆脚本来执行任务。而且我真的需要知道项目的调用图，因为它非常令人困惑。我无法执行代码，因为它需要额外的硬件和软件来执行此操作。但是，我需要了解其背后的逻辑。所以，我需要知道是否有一个工具（不需要任何 python 文件执行）可以使用模块而不是跟踪或 python 解析器来构建调用图。我有用于 C 的此类工具，但没有用于 python 的工具。
谢谢你。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2016-01-20T16:43:38.197

我发现的最好的工具叫做`pyan`，[最初](https://ejrh.wordpress.com/2011/12/23/call-graphs-in-python/)由[Edmund Horner](https://ejrh.wordpress.com/)编写，[由他改进](https://ejrh.wordpress.com/2012/01/31/call-graphs-in-python-part-2/)，然后由[Juha Jeronen](https://yousource.it.jyu.fi/jjrandom2/miniprojects/trees/master/refactoring)[赋予着色](https://ejrh.wordpress.com/2012/08/18/coloured-call-graphs/)和其他功能。该版本具有有用的命令行选项：

```
Usage: pyan.py FILENAME... [--dot|--tgf]

Analyse one or more Python source files and generate an approximate call graph
of the modules, classes and functions within them.

Options:
  -h, --help           show this help message and exit
  --dot                output in GraphViz dot format
  --tgf                output in Trivial Graph Format
  -v, --verbose        verbose output
  -d, --defines        add edges for 'defines' relationships [default]
  -n, --no-defines     do not add edges for 'defines' relationships
  -u, --uses           add edges for 'uses' relationships [default]
  -N, --no-uses        do not add edges for 'uses' relationships
  -c, --colored        color nodes according to namespace [dot only]
  -g, --grouped        group nodes (create subgraphs) according to namespace
                       [dot only]
  -e, --nested-groups  create nested groups (subgraphs) for nested namespaces
                       (implies -g) [dot only] 
```

这是运行的结果`pyan.py --dot -c -e pyan.py | fdp -Tpng`：

[![pyan 自身的输出](../Images/e2f9ddea36a61c9965ce9df57040f983.png)](https://i.stack.imgur.com/HezWg.png)

Edmund Horner 的原始代码现在最好[在他的 github 存储库中](https://github.com/ejrh/ejrh/blob/master/utils/pyan.py)找到，并且有人还创建了一个[包含两个版本的存储库](https://github.com/dafyddcrosby/pyan)，您可以从中[下载 Juha Jeronen 的版本](https://github.com/dafyddcrosby/pyan/raw/master/pyan.py)。我已经制作了一个干净的版本，将他们的贡献结合到[我自己的存储库中，只是为了 pyan](https://github.com/davidfraser/pyan)，因为两个存储库都有很多其他软件。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-12-20T00:32:08.957

您可能想查看 pycallgraph：

[pycallgraph](http://pycallgraph.slowchop.com/)

同样在此链接中描述了一种更手动的方法：

[生成调用图用于理解和重构 python 代码](http://blog.prashanthellina.com/generating-call-graphs-for-understanding-and-refactoring-python-code.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-20T00:24:39.430

简而言之，不存在这样的工具。Python 是一种过于动态的语言，无法在不执行代码的情况下生成调用图。

下面是一些代码，它清楚地展示了 python 的一些非常动态的特性：

```
class my_obj(object):
    def __init__(self, item):
        self.item = item
    def item_to_power(self, power):
        return self.item ** power

def strange_power_call(obj):
    to_call = "item_to_power"
    return getattr(obj, to_call)(4)

a = eval("my" + "_obj" + "(12)")
b = strange_power_call(a) 
```

请注意，我们`eval`用于创建一个实例，`my_obj`也`getattr`用于调用其方法之一。这两种方法都使得为 python 创建静态调用图变得极其困难。此外，还有各种难以分析的导入模块的方式。

我认为你最好的选择是坐下来拿着代码库和一张纸，开始手写笔记。这将具有让您更熟悉代码库的双重好处，并且不会轻易被难以解析的场景所欺骗。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-01-08T08:10:43.027

SourceTrail 将在这里为您提供帮助。[https://www.sourcetrail.com/](https://www.sourcetrail.com/)

Sourcetrail 是一个免费的开源跨平台源代码浏览器，可帮助您在不熟悉的源代码上高效工作。支持 C、C++、Java 和 Python

[https://github.com/CoatiSoftware/Sourcetrail](https://github.com/CoatiSoftware/Sourcetrail)

[![在此处输入图像描述](../Images/c4211f29d61225c7ed8cddf8fbc5ae2f.png)](https://i.stack.imgur.com/fgviT.png)

这是文档的链接

[https://www.sourcetrail.com/documentation/](https://www.sourcetrail.com/documentation/)

请注意，Python 支持相对较新，因此请不要期望它能够完美运行。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-01-03T15:09:26.780

您应该查看[PyCG](https://github.com/vitsalis/pycg)，这是我们创建的[经过同行评审](https://vitsalis.com/papers/pycg.pdf)的Python 调用图生成器，它可以处理 Python 的大部分功能，包括高阶函数、类、生成器等。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-08-13T21:04:12.783

我最近（2021 年）在寻找这样的工具，发现似乎在积极维护的[code2flow 。](https://github.com/scottrogowski/code2flow)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-08-12T05:26:53.307

我找到的 pyan3 的工作版本是 1.1.1 ( `pip install pyan3==1.1.1`)，它的文档在[这里](https://github.com/davidfraser/pyan)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-04T21:17:11.053

我还在：[https](https://github.com/zw-normal/pycallgraph) ://github.com/zw-normal/pycallgraph 写了一个小工具。代码的概念很容易理解和使用，但它只提供有限的信息，还需要另一个 IDE 才能更好地理解。

# spring - 如何在 Spring MVC 中进行多次删除？

> ID：13963322
> 
> 赞同：-2
> 
> 时间：2012-12-20T00:09:11.887
> 
> 标签：spring, spring-mvc, delete-row

我正在学习 Spring MVC，我想知道如何删除多行（类似于从 Yahoo 或 Gmail 中选择行然后删除它们）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T09:56:05.677

给你的一些家庭作业：

1.  创建一个以表格格式显示数据的表单
2.  每行包含一个复选框（复选框名称可以是“foo”）。复选框值可以是您的数据的 ID
3.  创建一个包含字符串列表的表单对象（java bean）`List<String> foo`。此列表将存储所选复选框的 id
4.  创建一个接受表单（参见第 3 部分）作为模型对象的控制器。
5.  在提交您的表单时（表格格式页面上的那个 > 参见 pt 1）将 POST 请求发送到控制器（参见 pt 4）。在控制器中，您将拥有用户选择的所有 ID 的列表。现在您只需要使用一些逻辑从数据库中删除它们（<

希望这会让你开始。

**额外练习：** 阅读更多关于[Checkboxes](http://resources.bravenet.com/tutorials/forms/checkboxes.php)、[Spring MVC](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html)和[Binding checkboxes in spring mvc](https://stackoverflow.com/questions/7421346/spring-binding-listobject-to-formcheckboxes)

PS只有当您自己尝试并发布一些代码示例时，您才会获得代码示例:)

# php - 如何插入和回显生日下拉值

> ID：13963323
> 
> 赞同：0
> 
> 时间：2012-12-20T00:09:16.507
> 
> 标签：php, codeigniter, drop-down-menu

我正在为我的网站上的用户个人资料构建编辑页面。我正在使用 codeigniter 并且无法知道在哪里使用什么以及如何从我的表单助手中插入生日下拉菜单。我也不确定我目前拥有的是正确的。

此外，我想回显用户在每个字段中选择的值，以便在他们再次回来编辑他们的个人资料时保存。

这是我的助手中创建下拉菜单的代码：

```
function month_dropdown($month="month", $top_months=array()) {
    $months = array(
            "choose"=>"Month",
            "----------",
            "Jan"=>"Jan",
            "Feb"=>"Feb",
            "Mar"=>"Mar",
            "Apr"=>"Apr",
            "May"=>"May",
            "Jun"=>"Jun",
            "Jul"=>"Jul",
            "Aug"=>"Aug",
            "Sep"=>"Sep",
            "Oct"=>"Oct",
            "Nov"=>"Nov",
            "Dec"=>"Dec"
    );

    $html = "<select name='{$months}'>";
    if(!empty($top_months)){
        foreach($top_months as $value){
            if(array_key_exists($value, $months)){
                $html .="<option value='{$value}'>{$months[$value]}</option>";
            }
        }
        $html .="<option>----------</option>";
    }
    foreach($months as $key => $month){
        $html .="<option value='{$key}'>{$month}</option>";
    }
    $html .="</select>";
    return $html;

}

function day_dropdown($day="day", $top_days=array()) {
    $days = array(
            "choose"=>"Day",
            "----------",
            "1"=>"1",
            "2"=>"2",
            "3"=>"3",
            "4"=>"4",
            "5"=>"5",
            "6"=>"6",
            "7"=>"7",
            "8"=>"8",
            "9"=>"9",
            "10"=>"10",
            "11"=>"11",
            "12"=>"12",
            "13"=>"13",
            "14"=>"14",
            "15"=>"15",
            "16"=>"16",
            "17"=>"17",
            "18"=>"18",
            "19"=>"19",
            "20"=>"20",
            "21"=>"21",
            "22"=>"22",
            "23"=>"23",
            "24"=>"24",
            "25"=>"25",
            "26"=>"26",
            "27"=>"27",
            "28"=>"28",
            "29"=>"29",
            "30"=>"30",
            "31"=>"31"
    );

    $html = "<select name='{$days}'>";
    if(!empty($top_days)){
        foreach($top_days as $value){
            if(array_key_exists($value, $days)){
                $html .="<option value='{$value}'>{$days[$value]}</option>";
            }
        }
        $html .="<option>----------</option>";
    }
    foreach($days as $key => $day){
        $html .="<option value='{$key}'>{$day}</option>";
    }
    $html .="</select>";
    return $html;

}

function year_dropdown($year="year", $top_years=array()) {
    $years = array(
            "choose"=>"Year",
            "----------",
            "1997"=>"1997",
            "1996"=>"1996",
            "1995"=>"1995",
            "1994"=>"1994",
            "1993"=>"1993",
            "1992"=>"1992",
            "1991"=>"1991",
            "1990"=>"1990",
            "1989"=>"1989",
            "1988"=>"1988",
            "1987"=>"1987",
            "1986"=>"1986",
            "1985"=>"1985",
            "1984"=>"1984",
            "1983"=>"1983",
            "1982"=>"1982",
            "1981"=>"1981",
            "1980"=>"1980",
            "1979"=>"1979",
            "1978"=>"1978",
            "1977"=>"1977",
            "1976"=>"1976",
            "1975"=>"1975",
            "1974"=>"1974",
            "1973"=>"1973",
            "1972"=>"1972",
            "1971"=>"1971",
            "1970"=>"1970",
            "1969"=>"1969",
            "1968"=>"1968",
            "1967"=>"1967",
            "1966"=>"1966",
            "1965"=>"1965",
            "1964"=>"1964",
            "1963"=>"1963",
            "1962"=>"1962",
            "1961"=>"1961",
            "1960"=>"1960",
            "1959"=>"1959",
            "1959"=>"1959",
            "1958"=>"1958",
            "1957"=>"1957",
            "1956"=>"1956",
            "1955"=>"1955",
            "1954"=>"1954",
            "1953"=>"1953",
            "1953"=>"1953",
            "1952"=>"1952",
            "1951"=>"1951",
            "1950"=>"1950",
            "1949"=>"1949",
            "1948"=>"1948",
            "1947"=>"1947",
            "1946"=>"1946",
            "1945"=>"1945",
            "1944"=>"1944",
            "1943"=>"1943",
            "1942"=>"1942",
            "1941"=>"1941",
            "1940"=>"1940",
            "1939"=>"1939",
            "1938"=>"1938",
            "1937"=>"1937",
            "1936"=>"1936",
            "1935"=>"1935",
            "1934"=>"1934",
            "1933"=>"1933",
            "1932"=>"1932",
            "1931"=>"1931",
            "1930"=>"1930"

    );

    $html = "<select name='{$years}'>";
    if(!empty($top_years)){
        foreach($top_years as $value){
            if(array_key_exists($value, $years)){
                $html .="<option value='{$value}'>{$years[$value]}</option>";
            }
        }
        $html .="<option>----------</option>";
    }
    foreach($years as $key => $year){
        $html .="<option value='{$key}'>{$year}</option>";
    }
    $html .="</select>";
    return $html;

} 
```

这是更新查询中我模型上的部分：*** *EDIT* ***

$birthdate = $this->input->post('month') 。“/”。$this->input->post('day') ."/" .$this->input->post('year');'birthday' => $this->input->post($birthdate),

这里显示在我的视图中：*** *EDIT* ***

```
echo month_dropdown('month')." ".day_dropdown('day'). " ".year_dropdown('year'); 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:16:10.923

我在功能上做了一些改变。

我建议在**$top_month**中，而不是发送数组，最好发送选定的值。

而且我认为在**$month**您发送**选择框的名称，**因此最好使用它而不是使用**$months**。

我还编写了代码以在选择框中显示选定的值。

```
function month_dropdown($month="month", $top_month='' ) {

   $months = array(
        "choose"=>"Month",
        "Jan"=>"Jan",
        "Feb"=>"Feb",
        "Mar"=>"Mar",
        "Apr"=>"Apr",
        "May"=>"May",
        "Jun"=>"Jun",
        "Jul"=>"Jul",
        "Aug"=>"Aug",
        "Sep"=>"Sep",
        "Oct"=>"Oct",
        "Nov"=>"Nov",
        "Dec"=>"Dec"
  );

  $html = "<select name='{$month}'>";

  foreach($months as $key => $month){

      $selected = "";
      //this will match for selected value and set the selected attribute
      if( $key == $top_month ) {
          $selected = "selected='selected'";
      }
      $html .="<option value='{$key}' $selected>{$month}</option>";
  }
  $html .="</select>";
  return $html;

}

function day_dropdown($day="day", $top_days="") {
   $days = array(
        "choose"=>"Day",
        "1"=>"1",
        "2"=>"2",
        "3"=>"3",
        "4"=>"4",
        "5"=>"5",
        "6"=>"6",
        "7"=>"7",
        "8"=>"8",
        "9"=>"9",
        "10"=>"10",
        "11"=>"11",
        "12"=>"12",
        "13"=>"13",
        "14"=>"14",
        "15"=>"15",
        "16"=>"16",
        "17"=>"17",
        "18"=>"18",
        "19"=>"19",
        "20"=>"20",
        "21"=>"21",
        "22"=>"22",
        "23"=>"23",
        "24"=>"24",
        "25"=>"25",
        "26"=>"26",
        "27"=>"27",
        "28"=>"28",
        "29"=>"29",
        "30"=>"30",
        "31"=>"31"
   );

   $html = "<select name='{$day}'>";

   foreach($days as $key => $day){
      $selected = "";
      if( $key == $top_days ) {
          $selected = "selected='selected'";
      }

      $html .="<option value='{$key}' $selected >{$day}</option>";
   }
   $html .="</select>";
   return $html;

}

function year_dropdown($year="year", $top_years='') {
   $years = array(
        "choose"=>"Year",
        "1997"=>"1997",
        "1996"=>"1996",
        "1995"=>"1995",
        "1994"=>"1994",
        "1993"=>"1993",
        "1992"=>"1992",
        "1991"=>"1991",
        "1990"=>"1990",
        "1989"=>"1989",
        "1988"=>"1988",
        "1987"=>"1987",
        "1986"=>"1986",
        "1985"=>"1985",
        "1984"=>"1984",
        "1983"=>"1983",
        "1982"=>"1982",
        "1981"=>"1981",
        "1980"=>"1980",
        "1979"=>"1979",
        "1978"=>"1978",
        "1977"=>"1977",
        "1976"=>"1976",
        "1975"=>"1975",
        "1974"=>"1974",
        "1973"=>"1973",
        "1972"=>"1972",
        "1971"=>"1971",
        "1970"=>"1970",
        "1969"=>"1969",
        "1968"=>"1968",
        "1967"=>"1967",
        "1966"=>"1966",
        "1965"=>"1965",
        "1964"=>"1964",
        "1963"=>"1963",
        "1962"=>"1962",
        "1961"=>"1961",
        "1960"=>"1960",
        "1959"=>"1959",
        "1959"=>"1959",
        "1958"=>"1958",
        "1957"=>"1957",
        "1956"=>"1956",
        "1955"=>"1955",
        "1954"=>"1954",
        "1953"=>"1953",
        "1953"=>"1953",
        "1952"=>"1952",
        "1951"=>"1951",
        "1950"=>"1950",
        "1949"=>"1949",
        "1948"=>"1948",
        "1947"=>"1947",
        "1946"=>"1946",
        "1945"=>"1945",
        "1944"=>"1944",
        "1943"=>"1943",
        "1942"=>"1942",
        "1941"=>"1941",
        "1940"=>"1940",
        "1939"=>"1939",
        "1938"=>"1938",
        "1937"=>"1937",
        "1936"=>"1936",
        "1935"=>"1935",
        "1934"=>"1934",
        "1933"=>"1933",
        "1932"=>"1932",
        "1931"=>"1931",
        "1930"=>"1930"

   );

   $html = "<select name='{$year}'>";

   foreach($years as $key => $year){

      $selected = "";
      if( $key == $top_years ) {
          $selected = "selected='selected'";
      }

     $html .="<option value='{$key}' $selected >{$year}</option>";
   }
   $html .="</select>";
   return $html;

 } 
```

我认为这会解决你的疑虑。如果还有什么，请告诉我。

# python - 需要一种方法来提取使用列表中的元素作为变量

> ID：13963324
> 
> 赞同：0
> 
> 时间：2012-12-20T00:09:16.923
> 
> 标签：python, list, vector

在 Python 中，如果我将列表定义为 xx = [1,2,3,4]，那么我可以将该（向量）中的数据引用为 xx[0] 并获得 1、xx[1] 并获得 2 等。

如果我有一个包含 csv 的数据文件...数据文件是 --> xx,1,2,3,4 有没有办法让我读取数据文件，并将数据文件 (xx) 的第一个元素命名是 [1,2,3,4] 的向量？我希望能够将 xx[0] 视为 1，将 xx[1] 视为 2，等等。

这是所有 Python 列表，而不是字典 - 我希望尽可能简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T00:13:26.157

你*可以*这样做，但真正的问题是，你应该这样做吗？答案很简单，不。动态变量名是一个麻烦的秘诀，你最好使用字典。它将使您的代码更简单，而不是更复杂。一个简单的做法是：

```
data['xx'][0] 
```

使用[该`csv`模块](http://docs.python.org/3/library/csv.html)加载您的数据，然后构建一个字典。这可以是一个简单的[字典理解](http://www.youtube.com/watch?v=pShL9DCSIUw)：

```
with open('data.csv') as file:
    reader = csv.reader(file)
    data = {key: values for key, *values in reader} 
```

如果您确实需要订单，那么您可以使用[`collections.OrderedDict`](http://docs.python.org/2/library/collections.html#collections.OrderedDict)来完成这项工作。

```
data = collections.OrderedDict((key, values) for key, *values in reader) 
```

请注意，这种漂亮的解包语法仅适用于 3.x，因此对于 2.x，您将需要按照 .x 行做更多的事情`{line[0]: line[1:] for line in reader}`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T00:13:33.667

您应该从查看 Python 的[csv](http://docs.python.org/2/library/csv.html)库开始。

# php - 显示来自 php 的 jquery 的单个错误返回的 json 数据

> ID：13963325
> 
> 赞同：0
> 
> 时间：2012-12-20T00:09:21.743
> 
> 标签：php, jquery, codeigniter

我正在使用 Codeigniter 框架来创建我的 Web 应用程序。

我有一个登录表单供用户输入他们的用户名和密码以及一个记住我的复选框。用户提交表单后，它使用 jQuery ajax 提交表单并将发布数据发送到登录控制器提交函数以进行数据检查和操作。运行提交函数后，如果用户已登录，则返回一个 JSON 数组。如果用户成功登录，他/她将被发送到仪表板，如果他们未成功登录，则会显示一条错误消息用户让他们知道出了问题。

我想要的是不会在 php 端传递的验证规则，以便它们显示在相应的输入字段下，就像它在 jQuery 表单验证上一样。我正在运行这两个验证，以防万一有什么东西让我在 jQuery 方面无法理解，而 PHP 捕捉到它并解决了问题。

截至目前，它显示一条消息，说它没有通过验证，但是我在弄清楚如何在用户输入框下显示没有通过的验证规则时遇到了问题。

这是截至目前从 php 返回的 JSON 消息。所以现在它说有一个错误，它让用户知道表单没有验证，并包含错误消息，这是它没有验证的原因。

```
{"output_status":"Error","output_title":"Form Not Validated","output_message":"The form did not validate successfully!","error_messages":{"username":"This is not have an accepted value!"}}

<div style="display:none"  id="message_container"><button type="button" class="close" data-dismiss="alert">&times;</button></div>
<div class="login_container">
<?php $attributes = array('id' => 'login_form', 'class' => 'form-horizontal'); ?>
<?php echo form_open('login/submit', $attributes); ?>
<div class="form-row row-fluid">
    <div class="spa12">
        <div class="row-fluid">
            <?php $attributes = array('class' => 'form_label span12'); ?>
            <?php echo form_label('Username<span class="icon16 icomoon-icon-user-3 right gray marginR10"></span>', 'username', $attributes); ?>
            <?php $attributes = array('name' => 'username', 'id' => 'username', 'value' => '', 'class' => 'span12 text valid'); ?>
            <?php echo form_input($attributes); ?>
        </div>
    </div>
</div>
<div class="form-row row-fluid">
    <div class="span12">
        <div class="row-fluid">
            <?php $attributes = array('class' => 'form_label span12'); ?>
            <?php echo form_label('Password<span class="icon16 icomoon-icon-locked right gray marginR10"></span><span class="forgot"><a href="#">Forgot your password?</a></span>', 'password', $attributes); ?>
            <?php $attributes = array('name' => 'password', 'id' => 'password', 'value' => '', 'class' => 'span12 password'); ?>
            <?php echo form_password($attributes); ?>
        </div>
    </div>
</div>
<div class="form-row row-fluid">                       
    <div class="span12">
        <div class="row-fluid">
            <div class="form-actions">
                <div class="span12 controls">
                    <input type="checkbox" id="keepLoged" value="Value" class="styled" name="logged" />Keep me logged in
                    <button type="submit" class="btn btn-info right" id="loginBtn">
                        <span class="icon16 icomoon-icon-enter white"></span>
                        Login
                    </button>
                </div>
            </div>
        </div>
    </div> 
</div>
</form>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T01:42:46.453

你可以这样做。在 php 端，验证失败的地方会返回错误消息以及字段名称，然后使用字段名称在 jQuery 中选择并附加错误消息

```
$(fieldname).append(<span>error</span>); 
```

# java - 从 JTextField 转换时出现 NumberFormatException

> ID：13963326
> 
> 赞同：1
> 
> 时间：2012-12-20T00:09:26.677
> 
> 标签：java, swing, jtextfield, typeconverter

当我从转换`JTextField`为 int 时，我的 GUI 程序崩溃。可以帮助我查看此代码段并查看问题所在，因为我使用了相同的方法，并且有效。

我所做的：

```
new JTextLabel l; 
```

得到什么

```
String A = l.getText() >int i = Interger.parse(A); 
```

代码：

```
btnAdd.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        int nr = Integer.parseInt(txtApt.getText());
        int nrP = Integer.parseInt(txtNrPips.getText());
        String owner = txtOwner.toString();
        Apartment a = new Apartment(nr, nrP, owner, false);
        Expense b = new Expense(Float.parseFloat(textWW.getText()), Float.parseFloat(textCW.getText()),
                Float.parseFloat(textGAS.getText()), Float.parseFloat(txtELEC.getText()), Float.parseFloat(textHEAT.getText()));
        ArrayList<Expense> l = new ArrayList<>();
        l.add(b);
        cont.addKeyWithList(a,l);
    }
}); 
```

堆：

```
Exception in thread "AWT-EventQueue-0" java.lang.NumberFormatException: For input string: ""
    at java.lang.NumberFormatException.forInputString(Unknown Source)
    at java.lang.Integer.parseInt(Unknown Source)
    at java.lang.Integer.parseInt(Unknown Source)
    at gui.Gui$4.actionPerformed(Gui.java:195)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T00:11:51.403

您的问题是当一个或多个 JTextFields 为空时调用此方法，并且当您尝试将“”解析为 int 时发生错误。如果发生这种情况，一个解决方案是阻止调用此方法。例如，您可以对您的 JTextField 文档使用 DocumentListener 来查看 JTextField 是否有文本，并保持您的 JButton 处于禁用状态，直到文本出现在所有必要的文本字段中。

另外，请使用我上面建议的 try / catch 块来捕获异常并优雅地处理它们：

```
btnAdd.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
      try {
        int nr = Integer.parseInt(txtApt.getText());
        int nrP = Integer.parseInt(txtNrPips.getText());
        // ... etc ...
      } catch (NumberFormatException nfe) {
        // warn the user that the textfields are not parsing well.
      }
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T00:16:38.853

您的某些文本字段没有有效的数字内容，这会阻塞解析。要解决此问题，您需要预先过滤数据。

```
float floatWW = MY_DEFAULT_VALUE;
boolean errorWW = false;
try {
  float floatWW = Float.parseFloat(textWW.getText());
} catch (NumberFormatException ex) {
  errorWW = true;
} 
```

（对于你们每个人的 parseFloat 调用，依此类推）

接下来，您可以决定是显示错误还是在给出错误 iuput 时只接受默认值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T02:18:54.687

当您转换无法转换为数字的字符串时会出现问题。例如：有 2 个字符串变量，一个是“3”，另一个是“三”。在后面的情况下，当您尝试转换为整数时，它会给出 NumberFormatException。

这里也存在同样的问题，如果你没有在文本字段中提供任何值，它是空白的并且会发生异常。

所以，为了摆脱异常。首先检查 getText() 值不应为 null 和空白，然后应用正则表达式检查它将只接受数字而不是字母和特殊字符。

# ruby-on-rails - Spine.js has_many：通过

> ID：13963327
> 
> 赞同：1
> 
> 时间：2012-12-20T00:09:39.000
> 
> 标签：ruby-on-rails, spine.js

我仍然对[Spine JS](http://spinejs.com)感到困惑，它真的很聪明很酷。我看到它支持[模型关系](http://spinejs.com/docs/relations)，但我似乎找不到任何关于`has_many :through`关系的信息。

我猜是不可能的，有人知道是不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-01T19:04:20.160

晚了五年，但 Spine.js 没有`has_many`关系。

引用[源码](https://raw.githubusercontent.com/spine/spine/master/lib/relation.js)，只有belongsTo、hasOne和hasMany：

```
 Spine.Model.extend({
    hasMany: function(name, model, fkey) {
      if (fkey == null) {
        fkey = (underscore(this.className)) + "_id";
      }
      return this.prototype[name] = function(value) {
        return association(name, model, this, fkey, Collection).refresh(value);
      };
    },
    belongsTo: function(name, model, fkey) {
      if (fkey == null) {
        fkey = (underscore(singularize(name))) + "_id";
      }
      this.prototype[name] = function(value) {
        return association(name, model, this, fkey, Instance).update(value).find();
      };
      return this.attributes.push(fkey);
    },
    hasOne: function(name, model, fkey) {
      if (fkey == null) {
        fkey = (underscore(this.className)) + "_id";
      }
      return this.prototype[name] = function(value) {
        return association(name, model, this, fkey, Singleton).update(value).find();
      };
    }
  }); 
```

# google-analytics - 谷歌分析——页面访问量与页面浏览量

> ID：13963331
> 
> 赞同：0
> 
> 时间：2012-12-20T00:10:05.303
> 
> 标签：google-analytics, metrics

我对谷歌的术语有点困惑。*我了解访问者*、*访问量*和*综合浏览量*之间的区别，但我对“*访问*”特定页面的含义感到困惑。

例如 - 我正在查看过去 12 个月的数字。

以两页为例：

*   **第 1 页**
    *   511 次访问
    *   5813 独特的网页浏览量
    *   7123 浏览量
*   **第2页**
    *   520 次访问，
    *   5884 独特的网页浏览量，
    *   7210 浏览量

我感到困惑的原因是因为数字中的巨大差异。谁能帮助我了解对网页的访问与独特的综合浏览量有何不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T00:35:40.547

有 2 个指标定义为分析中的访问：

*   **访问次数**- 访问您网站的人数
*   **唯一访问次数**- 访问您网站的唯一身份人数

**唯一页面浏览量**和页面**浏览量**之间的区别是相同的，页面**浏览量**是访问页面的总次数，其中**唯一页面浏览量**是特定页面的唯一页面浏览量。

这意味着，如果单个（唯一）访问者打开一个页面一次，它将添加到**唯一**页面浏览量和**总页面浏览量**中，如果他们再次打开同一页面，它只会添加到页面**浏览量中**

# content-management-system - Silverstripe 框架 - 默认控制器

> ID：13963332
> 
> 赞同：0
> 
> 时间：2012-12-20T00:10:22.820
> 
> 标签：content-management-system, silverstripe

是否可以更改 silverstripes 开始的默认控制器？也许它可以与路线一起使用？或者可能是重定向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T00:53:36.567

查看[SilverStripe 的路由文档](http://doc.silverstripe.org/framework/en/reference/director)。您需要覆盖[cms/_config/routes.yml](https://github.com/silverstripe/silverstripe-cms/blob/master/_config/routes.yml#L8)中的默认路由。不过，不确定您要达到什么目的，也许您最好使用`.htaccess`and `mod_rewrite`？

# java - 差异错误代码或异常

> ID：13963337
> 
> 赞同：1
> 
> 时间：2012-12-20T00:11:00.540
> 
> 标签：java, error-handling

> **可能重复：**
> [异常或错误代码](https://stackoverflow.com/questions/253314/exceptions-or-error-codes)
> [什么时候适合使用错误代码？](https://stackoverflow.com/questions/2792728/when-is-it-appropriate-to-use-error-codes)

我想知道我们何时应该使用 C 等语言中使用的错误代码以及何时使用异常。考虑以下示例，其中我们需要一个 getData() 函数，如果成功则返回一串数据，否则返回错误消息。我们应该如何报告错误？作为异常或错误消息？

```
public int fo(arguments) {
    //some code
    String data = "";
    String errMsg = "";
    boolean rc = getData(arguments, data, errMsg);
    // do something based on the results of getData()
    // and report error messages in case of errors
} 
```

您如何看待以下实现：

```
boolean getData(some arguments, String data, String errorMessage){
    {
        //check arguments for null pointers or invalid values and return error
        //message
        errorMessage = "Invalid Arguments";
        return false;
    }
    {
        //check for other errors
        errorMessage = "Some Error";
        return false;
    }
    // no error, return valid data
    data = "some valid data";
    return true;
} 
```

据我所知，我们不应该使用异常来进行流量控制。您能否评论正确使用错误代码和异常？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T00:16:06.320

首先，您的示例不起作用，因为在 Java 中参数是按值传递的。因此，即使您更改 的值`errorMessage`，该更改在方法之外也不会可见。

但是假设您解决了这个问题并正确返回了错误代码，那么问题就归结为您想要处理错误的位置。

异常在调用堆栈上自动“冒泡”，直到它们找到`catch`处理该特定类型异常的块。这使您有机会在更高级别上处理它们，而如果您返回错误代码，则必须立即在直接调用者中处理该错误代码（然后可能会为其调用者设置另一个错误代码，因此on，当你看到这个模式时，你可以确定你应该抛出异常）

# php - 从项目目录加载自定义 Phing 任务

> ID：13963339
> 
> 赞同：2
> 
> 时间：2012-12-20T00:11:02.937
> 
> 标签：php, phing

在查看有关如何使用 PHP 编写自定义任务[的 Phing 文档之后。](http://www.phing.info/docs/guide/stable/chapters/ExtendingPhing.html#WritingTasks)我想知道是否可以将 PHP 源文件放在我的项目文件夹中。

文档说任务 PHP 文件必须放在 classes/phing/tasks/my 中，然后可以使用此命令加载它们。

```
<taskdef name="myecho" classname="phing.tasks.my.MyEchoTask" /> 
```

如果源文件位于我的项目文件夹之外，则很难将项目特定任务保持在版本控制之下。

是否可以更改加载它们的位置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T00:31:38.253

如果您在构建文件中引用这样的自定义任务：

```
<taskdef name="myecho" classname="my.tasks.MyEchoTask" /> 
```

Phing 将`my/tasks`在您当前目录下的一个目录中查找（我相信）。

对于我自己的东西，我有一个名为`phing`源树顶层的目录，我只是将我的任务放在那个文件夹中并使用类名`phing.<MyTaskClassName>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-28T13:37:17.637

此外，您可以直接从 build.xml 文件中指定自定义任务的包含路径。

 **其中 ${srcPath} 是定义我的项目根目录的属性，而“build”是放置 build.xml 文件的位置。**

# php - Jquery AJAX POST 没有向 PHP 传递任何东西

> ID：13963340
> 
> 赞同：9
> 
> 时间：2012-12-20T00:11:05.957
> 
> 标签：php, jquery, ajax

我在使用带有 AJAX.Jquery 的 POST 方法传递变量时遇到问题

这是我的代码：

ajaxtest.php

```
<?php 
  $dir = $_POST['dir'];
  $scaned = glob($dir."*",GLOB_ONLYDIR);    
  echo json_encode($scaned);
?> 
```

ajaxtest.html

```
<html>
<head>

<script type="text/javascript" src="js/jquery.js"></script>

</head>
<script>

$(document).ready(function(){
$('button[type="button"]').click(function(){
    var dir = 'gals/';
    $.ajax({
        url: "ajaxtest.php",
        type: "POST",
        data: dir,
        success: function(results){
            data = jQuery.parseJSON(results);
            for (var i = 0; i < data.length ; i++) {
                $('#buttonA').after('<br />'+data[i]+'<br />'); 
            };

        }
    })
})

})
</script>
<body>
<br />
<button id="buttonA" type="button">Test button</button>

</body>
</html> 
```

此代码不起作用。

**但是这个可以：（**但不是json）

```
$.post("ajaxtest.php", {dir:dir}, function(results){
        var data = $.parseJSON(results);
        for (var i = 0; i < data.length ; i++) {
            $('#buttonA').after('<br />'+data[i]+'<br />'); 
        }
    }) 
```

为什么这样？！我的代码有什么问题？请指教！非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T00:12:28.597

`data`应具有以下格式：

```
data: {
    'dir': dir
} 
```

它不适用于 json，因为成功参数名称错误。这不是根据回调内部的代码。
将其从 更改`results`为`data`。

```
var dir = 'gals/';
$.ajax({
    url: "ajaxtest.php",
    type: "POST",
    data: {'dir': dir},
    success: function(data){
        data = jQuery.parseJSON(data);
        for (var i = 0; i < data.length ; i++) {
            $('#buttonA').after('<br />'+data[i]+'<br />'); 
        };

    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T00:13:52.233

不同之处在于，在非工作示例中，您发送的是字符串，而在工作示例中，您发送的是对象。因此，在您的非工作示例中发送相同的对象。

```
$.ajax({
    url: "ajaxtest.php",
    type: "POST",
    data: {dir : 'gals/'},
    success: function(results){
        data = jQuery.parseJSON(results);
        for (var i = 0; i < data.length ; i++) {
            $('#buttonA').after('<br />'+data[i]+'<br />'); 
        };

    }
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-29T14:45:22.953

url 字段有一个尾部斜杠，可能会使其无法正常工作：

```
url:'mypath/' 
```

必须是：

```
url:'mypath' 
```

# c# - C#中的虚数

> ID：13963343
> 
> 赞同：3
> 
> 时间：2012-12-20T00:11:43.433
> 
> 标签：c#, math, console

我正在尝试制作一个简单的基于控制台的程序来求解二次方程。如果判别式是负数，我还没有弄清楚如何计算答案，所以我只是显示了一条消息作为占位符。那么有人可以解释如何做到这一点吗？我将发布整个程序以获取任何建议。谢谢。

正常工作的代码（谢谢，Gunther Fox）：

```
if(discriminant < 0)
{
    double x1 = -b/(2*a);
    discriminant = -discriminant ;
    double x2 = Math.Sqrt(discriminant)/(2*a);
    double x3 = -Math.Sqrt(discriminant)/(2*a);
    Console.WriteLine(x1.ToString() + " + " + x2.ToString() + " * i ");
    Console.WriteLine(x1.ToString() + " + " + x3.ToString() + " * i ");

    Console.ReadLine();
} 
```

旧代码：

```
class Program
{
    static void Main(string[] args)
    {
        int choice;
        double ans1;
        double ans2;

        Console.WriteLine("~~~~~~~~ TERMINAL CALCULATOR ~~~~~~~~");

        Console.WriteLine("1\. Standard Calculator\n2\. Quadratic Equation Solver\n3\. Simple Interest Calculator");
        choice = int.Parse(Console.ReadLine());

        try
        {
            if (choice == 2)
            {
                Console.Write("Enter a value for 'a': ");
                double a = double.Parse(Console.ReadLine());

                Console.Write("Enter a value for 'b': ");
                double b = double.Parse(Console.ReadLine());

                Console.Write("Enter a value for 'c': ");
                double c = double.Parse(Console.ReadLine());

                //Quadratic Formula: x = (-b +- sqrt(b^2 - 4ac)) / 2a

                //Solve disriminant: (b*b) - (4*a*c)
                double discriminant = (b * b) - (4 * a * c);

                if (discriminant < 0)
                {
                    Console.WriteLine("No real solutions");
                    Console.ReadLine();
                }
                else
                {
                    double sqrt = Math.Sqrt(discriminant);
                    ans1 = (-b + sqrt) / (2 * a);
                    ans2 = (-b - sqrt) / (2 * a);
                    Console.WriteLine("{" + ans1 + " , " + ans2 + "}");
                    Console.ReadLine();
                }
            }

            if (choice == 1)
            {
                Console.Write("Enter first number: ");
                double num1 = double.Parse(Console.ReadLine());

                Console.Write("Enter second number (Enter 0 if you want to use sqrt): ");
                double num2 = double.Parse(Console.ReadLine());

                //Prompt user to choose an operation
                Console.WriteLine("Choose a math operator:\n1\. +\n2\. -\n3\. x\n4\. /\n5\. ^\n6\. Square root");
                int mathOpr = int.Parse(Console.ReadLine());

                if (mathOpr == 1)
                {
                    double answer = num1 + num2;
                    Console.WriteLine("\n\n" + answer);

                    Console.ReadLine();
                }

                if (mathOpr == 2)
                {
                    double answer = num1 - num2;
                    Console.WriteLine("\n\n" + answer);

                    Console.ReadLine();
                }

                if (mathOpr == 3)
                {
                    double answer = num1 * num2;
                    Console.WriteLine("\n\n" + answer);

                    Console.ReadLine();
                }

                if (mathOpr == 4)
                {
                    double answer = num1 / num2;
                    Console.WriteLine("\n\n" + answer);

                    Console.ReadLine();
                }

                if (mathOpr == 5)
                {
                    double answer = Math.Pow(num1, num2);
                    Console.WriteLine("\n\n" + answer);

                    Console.ReadLine();
                }

                if (mathOpr == 6)
                {
                    if (num1 < 0)
                    {
                        Console.WriteLine("\n\nNo real solutions");
                    }

                    else
                    {
                        double answer = Math.Sqrt(num1);
                        Console.WriteLine("\n\n" + answer);
                    }
                }

                else
                {
                    Console.WriteLine("That is not a valid option, idiot.");

                    Console.ReadLine();
                }
            }

            if (choice == 3)
            {
                Console.WriteLine("Enter initial amount: ");
                double initAmount = double.Parse(Console.ReadLine());

                Console.WriteLine("Enter interest rate (ex. 6% = .06): ");
                double rate = double.Parse(Console.ReadLine());

                Console.WriteLine("Enter time range (Year, Month, Week, etc.): ");
                string timeRange = Console.ReadLine();

                Console.WriteLine("Enter amount of " + timeRange.ToLower() + "s: ");
                int time = int.Parse(Console.ReadLine());

                for (int time2 = 1; time2 <= time; time2++)
                {
                    double totalAmount = initAmount * Math.Pow(1 + rate, time2);
                    Console.WriteLine("\n" + timeRange + " " + time2 + " ---------- " + totalAmount);
                }

                Console.ReadLine();
            }
        }
        catch 
        {
            Console.WriteLine("That is not a valid option.");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T00:17:01.767

如果判别式为负，你可以翻转判别式的符号，做根计算，然后将 i 添加到结果的末尾吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T00:21:58.570

翻转判别并乘以 i：

```
double discriminate = (b*b)-(4*a*c);
if(discriminate < 0){
    double x1 = -b/(2*a);
    discriminate = -discriminate ;
    double x2 = Math.Sqrt(discriminate)/(2*a);
    double x3 = -Math.Sqrt(discriminate)/(2*a);
}
Console.WriteLine(x1.ToString() + " + " + x2.ToString() + " * i ");
Console.WriteLine(x1.ToString() + " + " + x3.ToString() + " * i "); 
```

# php - PHP - 连接到 Exchange Web 服务的问题

> ID：13963349
> 
> 赞同：0
> 
> 时间：2012-12-20T00:12:21.217
> 
> 标签：php, class, variables, soap, exchangewebservices

我刚刚熟悉使用 Exchange Web Service (EWS) 和网络上提供的指南（例如[Talking SOAP with Exchange](http://www.howtoforge.com/talking-soap-with-exchange)）。

我有一个测试服务器，我得到了正确的响应。当我移动`exact same files`到生产服务器时，我没有收到以下 PHP 通知的响应（空白页）：

```
Notice: Trying to get property of non-object in index.php on line 48 
```

index.php 第 44 到 48 行：

```
 44 - $FindFolder->Traversal = 'Shallow';
    45 - $FindFolder->FolderShape->BaseShape = 'AllProperties';
    46 - $FindFolder->ParentFolderIds->DistinguishedFolderId->Id = 'root';
    47 - $result = $client->FindFolder($FindFolder);
    48 - $folders = $result->ResponseMessages->FindFolderResponseMessage->RootFolder->Folders->Folder; 
```

`var_dump($client)`第47 行之后的A返回正确的数据。但是在将 Class 对象转换为 a 中的变量后`line 47: $result = $client->...`返回`var_dump($result)`（`NULL`在生产服务器上但在测试服务器中充满了数据）。

我知道 PHP 类区分大小写，但大小写对我来说似乎是正确的，这适用于测试服务器。

**有任何想法吗？**

**更新#1**

我添加了有关 var_dumps 的更多详细信息以跟踪问题。这些转储都放在第 47 行之后：

var_dump($FindFolder)

```
object(stdClass)#2 (3) { ["Traversal"]=> string(7) "Shallow" ["FolderShape"]=>
object(stdClass)#3 (1) { ["BaseShape"]=> string(13) "AllProperties" } ["ParentFolderIds"]=>
object(stdClass)#4 (1) { ["DistinguishedFolderId"]=> object(stdClass)#5 (1) { ["Id"]=> 
string(4) "root" } } } 
```

var_dump($client)

```
object(ExchangeNTLMSoapClient)#1 (5) { ["user":protected]=> string(6) "***hidden***"
["password":protected]=> string(8) "***hidden***" ["_soap_version"]=> int(1) ["sdl"]=>
resource(3) of type (Unknown) ["__last_request_headers"]=> array(5) { [0]=> string(12)
"Method: POST" [1]=> string(22) "Connection: Keep-Alive" [2]=> string(25) "User-Agent:
PHP-SOAP-CURL" [3]=> string(37) "Content-Type: text/xml; charset=utf-8" [4]=> string(85)
"SOAPAction: "http://schemas.microsoft.com/exchange/services/2006/messages/FindFolder"" } } 
```

var_dump($结果)

```
NULL 
```

**更新#2**
可以肯定的是，我在生产服务器上测试了 cURL 并且它可以工作。我还注意到测试服务器和生产服务器的 var_dump 略有不同：

来自测试服务器的 var_dump($client) 的相关部分：

```
["user:protected"] 
```

来自生产服务器的 var_dump($client) 的相关部分：

```
["user":protected] 
```

引号不在同一个地方。这是否相关并导致查询无法连接，因此没有返回数据？如果是这样，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:19:25.717

好吧，最后我想我已经将此追溯到 PHP 5.3.3 中的错误或使用 PHP 5.3.3 进行交换的 Talking SOAP

我最好的猜测是，在原始帖子的更新 2 中提到的受保护变量的措辞方式存在错误。

与运行 PHP 5.1.1 和另一个 5.2.17 的服务器相关`var_dump($client)`：

```
["user:protected"] 
```

与运行 PHP 5.3.3 的服务器相关`var_dump($client)`：

```
["user":protected] 
```

因此，我想我将不得不更改为使用旧版本 PHP 的托管服务提供商。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:32:17.047

FindFolder 是否返回一个对象（例如 return $this）？

方法链需要返回一个对象。

[http://www.talkphp.com/advanced-php-programming/1163-php5-method-chaining.html](http://www.talkphp.com/advanced-php-programming/1163-php5-method-chaining.html)

# c - 如何只读取最后 3 位数字？

> ID：13963365
> 
> 赞同：1
> 
> 时间：2012-12-20T00:14:06.360
> 
> 标签：c, string, scanf

我只想从`stdin`.

使用

```
scanf("%3d") 
```

我可以得到前 3 个，但我想要最后 3 个，并且忽略它之前的所有内容。

样本输入

```
bkjashfsjak32326321536999999999999999999999999999999999999999999 
```

我怎样才能做到这一点？

如果可能的话，我想忽略上面的内容，`stdin`只在缓冲区上获取 3 个字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T00:16:49.670

看起来您正在读取一个整数。如果是这样（因为您忽略了其他所有内容），您可以阅读整个内容并在除以 1000 时取余数。

```
 scanf ("%d", &read_int);
    last_3 = read_int % 1000; 
```

**更新：** 因为它不是一个整数（假设`some_large_buf`可以取你最大的字符串）：

```
 scanf ("%s", some_large_buf);
    last_3 = atoi (some_large_buf + strlen(some_large_buf) - 3); 
```

**更新 2：** 此版本不使用缓冲区，它保持最低有效 3 位的滚动值。

```
 unsigned int sum = 0;
    char c;
    while (1) {
        scanf ("%c", &c);

        if (c == 0 || c == '\n') break;

        if (c >= '0' && c <= '9') {
            sum *= 10; 
            sum += c - '0';
            sum %= 1000;
        }   
        else {
            sum = 0;
        }   
    }   
    printf ("%d", sum); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T00:18:37.910

一种可能性是用于将`fgets( ... stdin)`其读入缓冲区。然后，您可以从缓冲区的末尾提取所需的信息（例如，使用`sscanf`并将指针传递到所需的起始位置）。总体思路如下。请注意，`fgets`可以在返回的缓冲区中返回换行符，因此如果知道它会在那里，则需要考虑它。

```
char buf[1024];
char *pos;
size_t len;
int val = 0;

fgets( buf, sizeof( buf ), stdin );
len = strlen( buf );

if ( len < 3 )
  printf( "Not long enough\n" );
else
  sscanf( buf + len - 3, "%d", &val ); 
```

# sql - 如何从 XML 文件插入 SQL 服务器？

> ID：13963367
> 
> 赞同：0
> 
> 时间：2012-12-20T00:14:07.740
> 
> 标签：sql, xml, xquery, sql-server-2012

如果文件格式是这样的，如何从 XML 文件插入 SQL Server？

我想要列`Description`、`Alias`和`Name`。

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE ldmlBCP47 SYSTEM "../../common/dtd/ldmlBCP47.dtd">
<ldmlBCP47> 
   <version number="$Revision: 6625 $"/> 
   <generation date="$Date: 2012-03-01 15:01:04 -0800 (Thu, 01 Mar 2012) $"/> 
   <keyword> 
      <key description="Time zone key" alias="timezone" name="tz"> 
         <type description="Andorra" alias="Europe/Andorra" name="adalv"/> 
         <type description="Dubai, United Arab Emirates" alias="Asia/Dubai" name="aedxb"/> 
         <type description="Kabul, Afghanistan" alias="Asia/Kabul" name="afkbl"/> 
         <type description="Antigua" alias="America/Antigua" name="aganu"/> 
         <type description="Anguilla" alias="America/Anguilla" name="aiaxa"/> 
         <type description="Tirane, Albania" alias="Europe/Tirane" name="altia"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T06:13:20.383

`<type>`假设您的意思是从XML 元素中获取三个属性，那么您可以试试这个：

```
DECLARE @input XML = '<ldmlBCP47> 
   <version number="$Revision: 6625 $"/> 
   <generation date="$Date: 2012-03-01 15:01:04 -0800 (Thu, 01 Mar 2012) $"/> 
   <keyword> 
      <key description="Time zone key" alias="timezone" name="tz"> 
         <type description="Andorra" alias="Europe/Andorra" name="adalv"/> 
         <type description="Dubai, United Arab Emirates" alias="Asia/Dubai" name="aedxb"/> 
         <type description="Kabul, Afghanistan" alias="Asia/Kabul" name="afkbl"/> 
         <type description="Antigua" alias="America/Antigua" name="aganu"/> 
         <type description="Anguilla" alias="America/Anguilla" name="aiaxa"/> 
         <type description="Tirane, Albania" alias="Europe/Tirane" name="altia"/> 
        </key>
    </keyword>
</ldmlBCP47>'

SELECT
    [Description] = XTbl.TypeNode.value('@description', 'varchar(50)'),
    [Alias] = XTbl.TypeNode.value('@alias', 'varchar(50)'),
    [Name] = XTbl.TypeNode.value('@name', 'varchar(50)')
FROM
    @input.nodes('/ldmlBCP47/keyword/key/type') AS XTbl(TypeNode) 
```

结果输出如下：

![在此处输入图像描述](../Images/7b23a9e82ea0c7a3cc8d3847ae3630a2.png)

# c# - 如何对依赖于 System.Console 的函数进行单元测试？

> ID：13963369
> 
> 赞同：1
> 
> 时间：2012-12-20T00:14:29.953
> 
> 标签：c#, unit-testing

我无法弄清楚如何对函数进行单元测试。它用于获取用户输入密码样式，以便显示星号而不是用户键入的内容。所以我试图捕获控制台 I/O 以将其与预期值进行比较。

这是功能：

```
public string getMaskedInput(string prompt)
{
    string pwd = "";
    ConsoleKeyInfo key;
    do
    {
        key = Console.ReadKey(true);
        if (key.Key != ConsoleKey.Backspace && key.Key != ConsoleKey.Enter)
        {
            pwd = pwd += key.KeyChar;
            Console.Write("*");
        }
        else
        {
            if (key.Key == ConsoleKey.Backspace && pwd.Length > 0)
            {
                pwd = pwd.Substring(0, pwd.Length - 1);
                Console.Write("\b \b");
            }
        }

    }
    while (key.Key != ConsoleKey.Enter);
    return pwd;
} 
```

和测试：

```
public void getInputTest()
{
    //arrange
    var sr = new StringReader("a secret");
    var sw = new StringWriter();
    Console.SetOut(sw);
    Console.SetIn(sr);
    Input i = new Input();
    string prompt="what are you typing? ";

    //act
    string result = i.getMaskedInput(prompt);         

    //assert
    var writeResult = sw.ToString();
    Assert.IsTrue((writeResult == "what are you typing? ")&&(result=="a secret")); 
```

编辑：我重新检查了我的单元测试，它有一个错误；现在我已经修复了它，测试只是挂起。单步执行测试表明它与`Console.ReadKey()`，我怀疑无法以`StreamReader()`方式重定向`ReadLine()`。

另外，这似乎是同一个测试中的两个断言，这是测试这个功能的正确方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T08:28:30.157

你不应该对这种行为进行单元测试。此代码在很大程度上取决于来自控制台的外部数据。

但是，如果您被迫对此进行测试...

首先打破对控制台的依赖。用一些类包装控制台操作，如 Console.Read 和 Console.Write。

```
public class ConsoleWrapper : IConsoleWrapper
{
    public ConsoleKeyInfo ReadKey()
    {
        return Console.ReadKey(true);
    }

    public void Write(string data)
    {
        Console.Write(data);
    }
} 
```

还有一个接口 IConsoleWrapper

```
public interface IConsoleWrapper
{
    ConsoleKeyInfo ReadKey();
    void Write(string data);
} 
```

现在在你的功能中你可以做

```
 public static string GetMaskedInput(string prompt, IConsoleWrapper console)
    {
        string pwd = "";
        ConsoleKeyInfo key;
        do
        {
            key = console.ReadKey();
            if (key.Key != ConsoleKey.Backspace && key.Key != ConsoleKey.Enter)
            {
                pwd += key.KeyChar;
                console.Write("*");
            }
            else
            {
                if (key.Key == ConsoleKey.Backspace && pwd.Length > 0)
                {
                    pwd = pwd.Substring(0, pwd.Length - 1);
                    console.Write("\b \b");
                }
            }
        }
        while (key.Key != ConsoleKey.Enter);
        return pwd;
    }
} 
```

使用此接口，您现在可以模拟它并轻松检查调用的方法及其参数。您还可以创建一些带有内部字符串的 ConsoleStub 来模拟整个操作。

像这样的东西。

```
public class ConsoleWrapperStub : IConsoleWrapper
{
    private IList<ConsoleKey> keyCollection;
    private int keyIndex = 0;

    public ConsoleWrapperStub(IList<ConsoleKey> keyCollection)
    {
        this.keyCollection = keyCollection;
    }

    public string Output = string.Empty;

    public ConsoleKeyInfo ReadKey()
    {
        var result = keyCollection[this.keyIndex];
        keyIndex++;
        return new ConsoleKeyInfo( (char)result ,result ,false ,false ,false);
    }

    public void Write(string data)
    {
        Output += data;
    }
} 
```

该存根使您能够创建自己包含的测试场景。

例如

```
 [Test]
    public void If_Enter_first_then_return_empty_pwd()
    {
        // Arrange
        var stub = new ConsoleWrapperStub(new List<ConsoleKey> { ConsoleKey.Enter });
        var expectedResult = String.Empty;
        var expectedConsoleOutput = String.Empty;

        // Act

        var actualResult = Program.GetMaskedInput(string.Empty, stub);

        //     
        Assert.That(actualResult, Is.EqualTo(expectedResult));
        Assert.That(stub.Output, Is.EqualTo(expectedConsoleOutput));
    }

    [Test]
    public void If_two_chars_return_pass_and_output_coded_pass()
    {
        // Arrange
        var stub = new ConsoleWrapperStub(new List<ConsoleKey> { ConsoleKey.A, ConsoleKey.B, ConsoleKey.Enter });
        var expectedResult = "AB";
        var expectedConsoleOutput = "**";

        // Act

        var actualResult = Program.GetMaskedInput(string.Empty, stub);

        //     
        Assert.That(actualResult, Is.EqualTo(expectedResult));
        Assert.That(stub.Output, Is.EqualTo(expectedConsoleOutput));
    } 
```

希望这对您有所帮助，并且您可以大致了解:)

## 编辑

好的，我已经编辑了我的样本并使用 Nunit 对其进行了测试，它可以工作。但是您必须记住，每个测试场景都必须以 ENTER 键结束。没有它，while 循环将是无止境的，并且会出现异常 KeynotFound，因为我们在列表中的字符集有限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-06T16:15:52.250

我做了一些调整，以防有人感兴趣。它处理混合大小写和其他控制台输出，例如提示和换行符。

提示密码：

```
 internal static SecureString PromptForPassword(IConsoleWrapper console)
    {
        console.WriteLine("Enter password: ");
        var pwd = new SecureString();
        while (true)
        {
            ConsoleKeyInfo i = console.ReadKey(true);
            if (i.Key == ConsoleKey.Enter)
            {
                break;
            }
            else if (i.Key == ConsoleKey.Backspace)
            {
                if (pwd.Length > 0)
                {
                    pwd.RemoveAt(pwd.Length - 1);
                    console.Write("\b \b");
                }
            }
            else if (i.KeyChar != '\u0000') // KeyChar == '\u0000' if the key pressed does not correspond to a printable character, e.g. F1, Pause-Break, etc
            {
                pwd.AppendChar(i.KeyChar);
                console.Write("*");
            }
        }
        console.WriteLine();
        return pwd;
    } 
```

界面：

```
public interface IConsoleWrapper
{
    void WriteLine(string value);
    ConsoleKeyInfo ReadKey(bool intercept);
    void Write(string value);
    void WriteLine();
    string ReadLine();
} 
```

模拟控制台存根：

```
public class MockConsoleStub : IConsoleWrapper
{
    private readonly IList<ConsoleKeyInfo> ckiCollection;
    private int keyIndex = 0;

    public MockConsoleStub(IList<ConsoleKeyInfo> mockKeyInfoCollection)
    {
        ckiCollection = mockKeyInfoCollection;
    }

    public readonly StringBuilder Output = new StringBuilder();

    public ConsoleKeyInfo ReadKey()
    {
        var cki = ckiCollection[this.keyIndex];
        keyIndex++;
        return cki;
    }

    public void Write(string data)
    {
        Output.Append(data);
    }

    public void WriteLine(string value)
    {
        Output.AppendLine(value);
    }

    public void WriteLine()
    {
        Output.AppendLine();
    }

    public ConsoleKeyInfo ReadKey(bool intercept)
    {
        var cki = ckiCollection[this.keyIndex];
        keyIndex++;
        return cki;
    }

    public string ReadLine()
    {
        var sb = new StringBuilder();
        var cki = ckiCollection[this.keyIndex];
        keyIndex++;
        while (cki.Key != ConsoleKey.Enter)
        {
            sb.Append(cki.KeyChar);
            cki = ckiCollection[keyIndex];
            keyIndex++;
        }
        return sb.ToString();
    }
} 
```

用法：

```
 [TestMethod]
    public void PromptForUsername_stub_password_GetsPassword()
    {
        var stub = new MockConsoleStub(new List<ConsoleKeyInfo>
        {
            new ConsoleKeyInfo('P', ConsoleKey.P, true, false, false),
            new ConsoleKeyInfo('@', ConsoleKey.Attention, true, false, false),
            new ConsoleKeyInfo('s', ConsoleKey.S, false, false, false),
            new ConsoleKeyInfo('s', ConsoleKey.S, false, false, false),
            new ConsoleKeyInfo('w', ConsoleKey.W, false, false, false),
            new ConsoleKeyInfo('o', ConsoleKey.O, false, false, false),
            new ConsoleKeyInfo('r', ConsoleKey.R, false, false, false),
            new ConsoleKeyInfo('d', ConsoleKey.D, false, false, false),
            new ConsoleKeyInfo('!', ConsoleKey.D1, true, false, false),
            new ConsoleKeyInfo('\u0000', ConsoleKey.Enter, false, false, false),
        });
        var password = Settings.PromptForPassword(stub);
        Assert.AreEqual("P@ssword!", SecureStringWrapper.ToString(password));
        Assert.AreEqual($"Enter password: {Environment.NewLine}*********{Environment.NewLine}", stub.Output.ToString());
    } 
```

注意： SecureStringWrapper 返回字节数组或字符串。为了测试，我返回一个字符串。

# vim - Tabular.vim：如何使用 VIM 对齐小数点上的浮点数？

> ID：13963370
> 
> 赞同：2
> 
> 时间：2012-12-20T00:14:31.413
> 
> 标签：vim

我有一堆数据加载到 VIM 中进行清理，如下所示：

```
Dec 19, 2012 Advertising November Adwords 43.00 -Roger
Dec 01, 2012 Rent, Sublease 200.00 -Mary
Nov 01, 2012 Rent, Sublease 200.00
Oct 01, 2012 Rent  Sublease 200.00
Nov 05, 2012 Advertising  42.00
Oct 01, 2012 Advertising September  50.00 
```

我想按小数点对齐所有数字。我已经安装了 Tabular.vim，但我似乎无法让正则表达式工作。

这是我认为应该起作用的：

```
:'<,'>Tabularize /[0-9]*\.[0-9]+ 
```

理想情况下，我想避免安装另一个操作系统或插件来解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T00:43:37.433

我没有安装 Tabular 插件，但是 Align 插件。： http: [//www.vim.org/scripts/script.php? script_id=294](http://www.vim.org/scripts/script.php?script_id=294)

我不知道确切的预期输出是什么。

使用 Align 插件，我只需输入 `

```
:AlignCtrl p0P0rl 
```

然后

```
:%Align \. 
```

您的文件内容已更改为：

```
Dec 19, 2012 Advertising November Adwords 43.00 -Roger
             Dec 01, 2012 Rent, Sublease 200.00 -Mary
             Nov 01, 2012 Rent, Sublease 200.00
             Oct 01, 2012 Rent  Sublease 200.00
                Nov 05, 2012 Advertising  42.00
      Oct 01, 2012 Advertising September  50.00 
```

**编辑**

JHo，仅供参考。我没有找到如何一次性满足您的需求，或者说，两次，首先是 AlignCtrl，然后是 Align。但这是可行的。

第一步：

```
:%Align [0-9]*\.[0-9] 
```

您的文件将如下所示：

```
Dec 19, 2012 Advertising November Adwords 43.00  -Roger
Dec 01, 2012 Rent, Sublease               200.00 -Mary
Nov 01, 2012 Rent, Sublease               200.00 
Oct 01, 2012 Rent  Sublease               200.00 
Nov 05, 2012 Advertising                  42.00  
Oct 01, 2012 Advertising September        50.00 
```

然后设置 AlignCtrl

```
:AlignCtrl p0P0rl 
```

最后按`ctrl-v`仅选择十进制数列，键入：

```
:'<,'>Align \. 
```

文本更改为：

```
Dec 19, 2012 Advertising November Adwords  43.00 -Roger
Dec 01, 2012 Rent, Sublease               200.00 -Mary
Nov 01, 2012 Rent, Sublease               200.00 
Oct 01, 2012 Rent  Sublease               200.00 
Nov 05, 2012 Advertising                   42.00 
Oct 01, 2012 Advertising September         50.00 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T00:36:31.840

我对表格的使用是通过反复试验获得的，但这似乎有效。

您需要使用`\zs`指定匹配在小数点之前开始，还需要使用可选的对齐说明符指定第一列右对齐，第二列左对齐。因此：

```
:Tabularize /\d*\zs\.\d\+/r0l0 
```

# php - 从自定义输入生成可打印表格 (.pdf)

> ID：13963372
> 
> 赞同：0
> 
> 时间：2012-12-20T00:14:56.277
> 
> 标签：php, forms

我想创建一些在我的网站上生成选票的方法。一个人可以输入自定义数量的姓名，它会生成这样的[选票](http://i.imgur.com/CT1ra.png)。最终选票需要是易于打印的 8.5x11 .pdf。

我只有 PHP 的基本知识，我只是在寻找我需要做什么的一般指南——我不需要为我编写的完整代码。这是可以简单地完成的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T00:36:00.483

FPDF 非常有用，我强烈推荐它。它是免费的。

[http://www.fpdf.org/](http://www.fpdf.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:36:33.003

我选择了[dompdf](https://github.com/dompdf/dompdf)，效果非常好。

# visual-studio-2010 - 如何更改图像查看偏好

> ID：13963373
> 
> 赞同：1
> 
> 时间：2012-12-20T00:14:58.987
> 
> 标签：visual-studio-2010, image, visual-studio-2012

当我在 Visual Studio 2010 中查看自动测试运行结果中的屏幕截图时，窗口显示如下：

![在此处输入图像描述](../Images/f88f14caeb52846282e7b7525e4f776c.png)

将窗口拆分为正常缩放并默认放大窗口是非常令人沮丧的。我可以更改首选项以仅在单个窗口中正常显示图像吗？

或者，是否有一个 VS2010 插件可以用来更改它查看 png 的方式？

我无法在 VS2010 选项菜单中找到任何可以帮助我的信息，但我非常愿意承认我可能忽略了它。

[编辑]*我正在慢慢切换到 VS2012，所以这个问题也延伸到了那里！*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-28T16:11:59.603

这也让我发疯，但我终于找到了答案 - 将 bmp/png/jpg 文件拖放到您的 Visual Studio 项目中，在解决方案资源管理器中右键单击它并选择“打开方式” - 选择 MS Paint 并单击“设置”作为默认值'。或者，您可以导航并选择您喜欢的任何应用程序来查看图像。

# git - 默认推送的自定义操作

> ID：13963376
> 
> 赞同：1
> 
> 时间：2012-12-20T00:15:21.513
> 
> 标签：git, gerrit

我的公司使用[Gerrit Code Review](http://code.google.com/p/gerrit/) for Git。每次我想推送代码更改时，我都会使用自定义咒语：

```
git push origin HEAD:refs/for/my-branch-name 
```

除了“我的分支名称”之外，就是逐字记录。语法对我来说似乎很疯狂，这`refs/for/`不是我以前在 Git 中见过的东西。

如何配置我的仓库，以便`git push`单独与上述相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T00:22:57.620

这种语法并不疯狂，它只是完整的`git push`语法。当你自己做时`git push`，它真的是：

```
git push origin current-branch:refs/heads/current-branch 
```

您可能正在使用 gerrit 进行代码审查，因此您不想直接推送到特定分支，而是想让 gerrit 知道更改 - gerrit 使用该`refs/for`区域来实现此目的。

较新版本的 gerrit 使用`refs/publish`and `refs/drafts`，因此您也可能会看到这些。

如果你想要更方便的东西，你可以轻松地创建别名并将它们添加到你的 git 配置中。看看这个问题：[git alias for HEAD:refs/for/master](https://stackoverflow.com/questions/7423893/git-alias-for-headrefs-for-master)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T20:04:26.640

您可以通过键入来更新遥控器的推送参考规范

```
git config remote.origin.push HEAD:refs/for/my-branch-name 
```

我创建了一个[git post-checkout 挂钩](https://gist.github.com/4508945)，确保所有分支（和主分支）都配置为与 gerrit 一起使用。我认为它有效，但您的工作流程可能与我的不同，因此请在使用之前阅读脚本并理解它（这并不难）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T00:22:31.177

`refs/for/....`是 Gerrit 用来触发和跟踪特定分支的代码审查的“神奇”参考。这记录在[http://gerrit-documentation.googlecode.com/svn/Documentation/2.5.1/user-upload.html](http://gerrit-documentation.googlecode.com/svn/Documentation/2.5.1/user-upload.html)

您需要推送到此 ref 以便 Gerrit 可以获取您的更改并开始代码审查过程。

如果您刚刚这样做，`git push origin master`那么它将绕过 Gerrit，因为您的提交已经在 master 分支中。Gerrit 的重点是确保您的代码在进入`master`（或其他）之前经过审查。

# c# - 是否不可能将 Page 的字符串表示形式转换为 Page 类型？

> ID：13963379
> 
> 赞同：0
> 
> 时间：2012-12-20T00:15:41.977
> 
> 标签：c#, casting, windows-8, windows-store-apps

我的 App.xaml.cs “永远”的 OnLaunched() 事件中有此代码：

```
 if (args.PreviousExecutionState == ApplicationExecutionState.Terminated)
        {
            if ((roamingSettings.Values.ContainsKey("CurrentPageType")) &&
                (roamingSettings.Values.ContainsKey("CurrentPageParam")))
            {
                rootFrame.Navigate((Type)roamingSettings.Values["CurrentPageType"],
                                         roamingSettings.Values["CurrentPageParam"]);
            }
        } 
```

...但我猜它实际上是第一次运行（执行状态已终止），因为我得到了这个错误消息：

*System.InvalidCastException 未被用户代码处理 HResult=-2147467262 消息=无法将“System.String”类型的对象转换为“System.Type”类型。*

我在每个页面的 OnNavigatedTo() 事件中将当前页面分配给此漫游设置：

```
App.roamingSettings.Values["CurrentPageType"] = GetType().ToString(); 
```

是我的语法有问题，还是我的方法有问题？

我想我可以这样分配它：

```
App.roamingSettings.Values["CurrentPageType"] = "DetailPage"; 
```

...然后在我的 OnLaunched() 事件中使用它：

```
if (roamingSettings.Values["CurrentPageType"] == "DetailPage")
{
    Frame.Navigate(typeof(DetailPage), App.activeSection);
}
else if (. . . etc. . . .) 
```

...但我正试图变得更“优雅”...为这些漫游设置保存的值是可见的）。

## 更新

在看了这个之后，考虑到那些不带 arg 的页面，我将代码更改为：

```
 if (args.PreviousExecutionState == ApplicationExecutionState.Terminated)
        {
            if (roamingSettings.Values.ContainsKey("CurrentPageType"))
            {
                if (roamingSettings.Values.ContainsKey("CurrentPageParam"))
                {
                    rootFrame.Navigate((Type)roamingSettings.Values["CurrentPageType"],
                                             roamingSettings.Values["CurrentPageParam"]);
                }
                else
                {
                    rootFrame.Navigate((Type) roamingSettings.Values["CurrentPageType"];
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:06:27.767

尝试

```
rootFrame.Navigate(Type.GetType(roamingSettings.Values["CurrentPageType"].ToString()),
                                roamingSettings.Values["CurrentPageParam"]); 
```

# google-app-engine - 云上的可扩展性与可移植性（Amazon/GAE/...）

> ID：13963380
> 
> 赞同：0
> 
> 时间：2012-12-20T00:15:50.997
> 
> 标签：google-app-engine, amazon-web-services, cloud, scalability, portability

我有一些用 PHP 编写的网站（目前在 VPS 上），它将从头开始重建为 Python。作为平台，我主要考虑**GAE**和**亚马逊**（或保持目前的**VPS**）。*我想问你哪个更适合我。*

我的一些converns：

*   我知道 GAE 有一些限制，但是因为我要从头开始构建所有东西，所以它可能不是一个大问题（或者可能是？）。
*   我读到亚马逊只提供虚拟机，所以我必须管理一切。它的可扩展性如何（我只需要移动滑块或使用服务器配置/编程？）
*   如果我决定继续使用当前的 VPS，然后迁移到亚马逊怎么办？它会很痛苦并且涉及很多工作吗？
*   费用呢？

这个网站是我很久以前写的（一个月有100万个uniq用户），现在因为代码乱七八糟需要重建。现在它托管在具有 2x2GHz + 750MB RAM（每月 20 美元）的小型 VPS 上。这已经绰绰有余了，但是在重建后我计划添加更多的性能消耗功能，同时宣传它（这样网站就会增长）。我选择了 Python (dJango) 作为框架。

由于它将完全重建，我正在考虑将其托管在云上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T00:42:53.850

Google App Engine 是[PaaS](http://en.wikipedia.org/wiki/Platform_as_a_service)的一个例子。Amazon Web Services 主要是一种[IaaS](http://en.wikipedia.org/wiki/Infrastructure_as_a_service#Service_models)解决方案（带有一些类似 PaaS 的组件）。它们是不同的服务模型，每种都有不同的优点和缺点。简而言之：PaaS 提供了对底层系统的更多抽象。这使得部署更容易（有时更容易），并消除了设计可扩展和持久环境所需的大部分系统工程专业知识。然而，这是以极大地降低灵活性为代价的，通常每月费用更高，并且具有更大程度的“[供应商锁定](http://en.wikipedia.org/wiki/Vendor_lock-in)”。

您可能对 Amazon 的[Elastic Beanstalk](http://aws.amazon.com/elasticbeanstalk/)产品感兴趣，它是 PaaS 和 IaaS 的混合体。它是多个 AWS 组件（EC2、RDS、ELB、SNS）之上的一层，将它们组合在一起，形成一种更易于使用的类似 PaaS 的方式。*（免责声明：我的公司是 AWS 咨询合作伙伴网络的成员，我们为 Python AWS 库 Boto 编写了 Elastic Beanstalk 支持。）*

> 如果我决定继续使用当前的 VPS，然后迁移到亚马逊怎么办？它会很痛苦并且涉及很多工作吗？

这在很大程度上取决于您的应用程序。简而言之，您希望确保您的应用程序服务器（实例）被视为一次性的：不要在它们上存储持久数据，也不要相互依赖。例如，如果您的应用程序接受用户上传的文件，它们应该存储在 S3 中，而不是本地卷上。您希望确保使用松散耦合的组件并使用 SNS 和 SQS 在它们之间进行通信。

最大的变化在于你如何滚动代码。您不能仅通过 SSH 或 FTP 进入单个服务器并上传最新版本。Elastic Beanstalk 与 Git 很好地集成（请参阅文档），使这非常轻松，但它仍然是对您的工作流程的调整。如果您的 Elastic Beanstalk 无法满足您的需求，那么您需要开始考虑配置工具，例如 Puppet、Chef 或 Salt。我也将 Fabric 用于更简单的环境。

# java - 将图像添加到 JOptionPane

> ID：13963392
> 
> 赞同：4
> 
> 时间：2012-12-20T00:17:12.813
> 
> 标签：java, image, swing, joptionpane, messagedialog

我想知道如何将图像添加到消息对话框。我尝试了下面的代码，但找不到图像

```
else if(button == B){
String text = "blahblahblahblahblah";
    JTextArea textArea = new JTextArea(text);

textArea.setColumns(30);
textArea.setLineWrap( true );
textArea.setWrapStyleWord( true );
textArea.setSize(textArea.getPreferredSize().width, 1);
Font font = new Font("Verdana", Font.BOLD, 12);
textArea.setFont(font);
textArea.setForeground(Color.BLUE);
JOptionPane.showMessageDialog(
null, textArea, "Border States", JOptionPane.PLAIN_MESSAGE);

image2 = new ImageIcon(getClass().getResource("borderstates.jpg"));
  label2 = new JLabel(image2);
  add(label2); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-20T00:47:06.860

`JOptionPane`是一个非常灵活的 API。

您的第一个调用端口应该是[Java API Docs](http://docs.oracle.com/javase/7/docs/api/javax/swing/JOptionPane.html)和[Java Trails](http://docs.oracle.com/javase/tutorial/)，具体[如何使用对话框](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)

![在此处输入图像描述](../Images/a59f45212111fc20adfaf8703f7f781e.png)![在此处输入图像描述](../Images/eace7df1fe106d3aa61ef19edae1426f.png)

```
public class TestOptionPane04 {

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                ImageIcon icon = new ImageIcon(TestOptionPane04.class.getResource("/earth.png"));
                JOptionPane.showMessageDialog(
                        null,
                        "Hello world",
                        "Hello", JOptionPane.INFORMATION_MESSAGE,
                        icon);
                JOptionPane.showMessageDialog(
                        null,
                        new JLabel("Hello world", icon, JLabel.LEFT),
                        "Hello", JOptionPane.INFORMATION_MESSAGE);

            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T00:27:51.690

从 JOptionPane 上的 javadoc：

```
public static void showMessageDialog(Component parentComponent,
                                     Object message,
                                     String title,
                                     int messageType,
                                     Icon icon)
                          throws HeadlessException 
```

只需制作一个`Icon`图像并将其添加为第 5 个参数。

```
JOptionPane.showMessageDialog(null, textArea, "Border States", 
    JOptionPane.PLAIN_MESSAGE, image2); 
```

使用前不要忘记定义 image2（向上移动）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-20T00:19:24.887

什么是消息对话框？如果您的意思是向 JOptionPane 添加图像，则存在接受图标的方法重载，因此这是解决此问题的一种方法。另一种方法是使用您的图像和其他组件创建 JPanel 或 JLabel，然后将其显示在 JOptionPane 中。

# php - 在 Code Igniter 中调用数组

> ID：13963395
> 
> 赞同：0
> 
> 时间：2012-12-20T00:17:49.883
> 
> 标签：php, codeigniter

所以......我的模型中有一个函数调用表的最后一个元素，然后我将结果分配给一个变量并将它返回给控制器，问题是我无法访问数组。我需要“身份证”。

```
// model
function ultimo()
{
    $result = $this->db->select('*')->order_by("id","desc")->get('articulos', 1)->result();
    return $result;
}
//controller
$ultimo['id']=$this->mod_articulos->ultimo();

// I try to access the array like this: (for test purposes)
// this gives me an array:
echo "<br /><br />Valor de Datos: ".$ultimo['id'];

// content of the array:
array(1) 
{ 
    ["id"]=> array(1) 
    { 
        [0]=> object(stdClass)#25 (13) 
        { 
            ["id"]=>          string(2) "15" 
            ["familia"]=>     string(2) "01" 
            ["subfamilia"]=>  string(2) "01" 
            ["codigo"]=>      string(2) "03" 
            ["cod_barras"]=>  string(1) "3" 
            ["nombre"]=>      string(22) "Aceite de Oliva Virgen" 
            ["descripcion"]=> string(20) "en botellas de 500ml" 
            ["pcp"]=>         string(4) "6.00" 
            ["pvp"]=>         string(5) "25.00" 
            ["proveedor"]=>   string(2) "03" 
            ["stock"]=>       string(6) "120000" 
            ["minstock"]=>    string(4) "1000" 
            ["imagen"]=>      string(0) "" 
        }
    }
} 
```

如果我使用 `$ultimo['id']->id;`我会得到非对象错误。任何建议都将受到欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T00:23:38.867

`$ultimo['id']`是一个数组，所以这就是你要做的

```
foreach($ultimo['id'] as $obj){
   echo "Valor de Datos: ".$obj->id;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T00:26:34.040

看起来您需要使用：

```
$ultimo['id'][0]->id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T06:14:30.000

这是你应该怎么做的：

```
$ultimo = $this->mod_articulos->ultimo();

if ($ultimo) // if array not empty
{
    echo $ultimo[0]->id;
} 
```

只需记住 CI 的`result()`方法返回一个行数组，就像 SQL 一样。

# android - /FadeInOut/AndroidManifest.xml 的解析器异常：文档中根元素之后的标记必须格式正确

> ID：13963403
> 
> 赞同：1
> 
> 时间：2012-12-20T00:19:09.330
> 
> 标签：android

我希望这个错误出现在清单文件中，我在这里放置清单文件。错误显示在最后一行。提前致谢

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.sri.fadeinout"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk
            android:minSdkVersion="8"
            android:targetSdkVersion="15" />

        <application
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
            <activity
                android:name=".MainActivity"
                android:label="@string/title_activity_main" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
        </application>
    </manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T01:10:52.333

您需要确保注意`</manifest>`标签之后的任何内容。尽管顶部（以及您在 SO 上发布的内容）可能没问题，但如果您在此标记下还有其他内容，Eclpise 将引发错误（并且有充分的理由，您的 xml 现在格式错误）。

# ruby-on-rails - Rails 和 OS X：如何安装 rmagick？

> ID：13963404
> 
> 赞同：38
> 
> 时间：2012-12-20T00:19:13.120
> 
> 标签：ruby-on-rails, ruby, osx-lion, homebrew, rmagick

我已经完全绝望了——我花了一整天的时间试图将`rmagick`gem 安装到 Mac OS X Lion，但实际上这是一场悲剧。我在 Google 上看到了许多类似的主题，但没有任何帮助。

我尝试`imagemagick`通过完全卸载`brew`并再次安装它（这很好用）然后安装`rmagick`，但是每次我尝试安装这个 gem 时，我都会收到这个错误：

```
Building native extensions.  This could take a while...
ERROR:  Error installing rmagick:
    ERROR: Failed to build gem native extension.

        /Users/adam/.rvm/rubies/ruby-1.9.3-p327/bin/ruby extconf.rb
checking for Ruby version >= 1.8.5... yes
extconf.rb:128: Use RbConfig instead of obsolete and deprecated Config.
checking for clang... yes
checking for Magick-config... yes
checking for ImageMagick version >= 6.4.9... yes
checking for HDRI disabled version of ImageMagick... yes
checking for stdint.h... yes
checking for sys/types.h... yes
checking for wand/MagickWand.h... yes
checking for InitializeMagick() in -lMagickCore... no
checking for InitializeMagick() in -lMagick... no
checking for InitializeMagick() in -lMagick++... no
Can't install RMagick 2.13.1\. Can't find the ImageMagick library or one of the dependent libraries. Check the mkmf.log file for more detailed information.

*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/adam/.rvm/rubies/ruby-1.9.3-p327/bin/ruby
    --with-MagickCorelib
    --without-MagickCorelib
    --with-Magicklib
    --without-Magicklib
    --with-Magick++lib
    --without-Magick++lib

Gem files will remain installed in /Users/adam/.rvm/gems/ruby-1.9.3-p327/gems/rmagick-2.13.1 for inspection.
Results logged to /Users/adam/.rvm/gems/ruby-1.9.3-p327/gems/rmagick-2.13.1/ext/RMagick/gem_make.out 
```

不管我是通过 Gemfile 还是通过终端安装 gem，在这两种情况下我都会得到相同的错误输出。

这是版本`imagemagick`：**imagemagick-6.8.0-10**。

你能给我一些提示或提前，可能是哪里的问题？非常感谢！

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-12-20T07:36:58.060

rmagick 在使用自制软件的 imagemagick (>= 6.8.0-10) 时遇到问题。

你可以

更新`rmagick`宝石

```
 bundle update rmagick 
```

或手动符号链接一些 dylib 以使其工作：

```
 $ cd "`Magick-config --prefix`lib"
    $ ln -s libMagick++-Q16.7.dylib   libMagick++.dylib
    $ ln -s libMagickCore-Q16.7.dylib libMagickCore.dylib
    $ ln -s libMagickWand-Q16.7.dylib libMagickWand.dylib 
```

之后`gem install rmagick`应该工作。

[检查homebrew/issues/16625](https://github.com/mxcl/homebrew/issues/16625)中关于此的讨论

更新：感谢@faraz 提供了一个不错的单行命令：

```
cd "`Magick-config --prefix`/lib"; ln -s libMagick++-Q8.7.dylib libMagick++.dylib; ln -s libMagickCore-Q8.7.dylib libMagickCore.dylib; ln -s libMagickWand-Q8.7.dylib libMagickWand.dylib 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2017-09-07T08:42:14.753

Mac OSX Sierra 和 Rails 5

```
brew unlink imagemagick
brew install imagemagick@6
brew link imagemagick@6 --force 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-04-22T13:19:51.250

### 我有同样的问题。

如果您检查 mkmf.log，您将看到以下错误消息：

```
ld: library not found for -lgomp
clang: error: linker command failed with exit code 1 (use -v to see invocation)
checked program was:
/* begin */
1: #include "ruby.h"
2: 
3: int main() {return 0;}
/* end */\ 
```

## 这是我解决它的方法：

1.  卸载当前版本的 ImageMagick：

    `brew uninstall imagemagick`

2.  在不支持 openmp 的情况下重新安装 imagemagick（这是负责 lgomp 的库）：

    `brew install imagemagick --disable-openmp`

3.  安装 rmagick：

    `gem install rmagick`

就是这样！

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-07-01T02:18:26.507

如果您使用的是自制软件，您只需要设置 PKG_CONFIG_PATH

```
brew install imagemagick
PKG_CONFIG_PATH=/usr/local/Cellar/imagemagick//6.8.9-1/lib/pkgconfig/ gem install rmagick 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-11-11T17:00:47.773

尝试安装 6.7.7-6 版的 imagemagick，因为 6.8.x 版破坏了 rmagick gem。

```
cd /usr/local
git checkout 7d951fb /usr/local/Library/Formula/imagemagick.rb
brew install imagemagick 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-01-14T14:11:27.837

**截至 2017 年，上述建议的所有解决方案似乎都不再有效，因为 Homebrew 切换到 ImageMagick 7.0。**

此处提供了一些解决方法。 [https://github.com/rmagick/rmagick/issues/256](https://github.com/rmagick/rmagick/issues/256)

我刚刚降级到 ImageMagick 6.9.7-3 并且`gem install rmagick`工作正常。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-05-23T13:24:51.670

这在 Catalina 对我有用：

```
brew uninstall imagemagick
brew install imagemagick@6
export PATH="/usr/local/opt/imagemagick@6/bin:$PATH"
brew link --force imagemagick@6
brew install pkg-config
gem install rmagick 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-04-04T14:30:52.447

当我在安装 rmagick 时遇到问题时，我正在使用这个单线，每次都会发生这种情况......

```
sudo C_INCLUDE_PATH=/usr/local/Cellar/imagemagick/6.8.7-7/include/ImageMagick-6/ PKG_CONFIG_PATH=/usr/local/Cellar/imagemagick/6.8.7-7/lib/pkgconfig/ gem install rmagick 
```

**确保 imagemagick 的版本是正确**的，你应该很高兴。如果您没有安装 imagemagick，请执行`brew install imagemagick`.

* * *

不得不发布这个，因为我一直在安装这个 gem 时遇到问题，而且每次我都忘记如何去做。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-12-20T01:30:00.227

安装imagemagick后，你可以试试

```
> gem pristine rmagick 
```

从这个线程得到它。[Rails Rmagick 宝石](https://stackoverflow.com/questions/9686192/rails-rmagick-gem)。希望能帮助到你。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-31T19:12:08.803

或者，您可以退回到旧版本的 ImageMagick。[这个线程](https://github.com/mxcl/homebrew/issues/16625)有关于如何做到这一点的说明：

> 现在，为了尝试并真正有用，我建议您将其中一个较旧的瓶子提取到您的酒窖中，然后如果您卸载了旧版本，请执行 brew link imagemagick。
> 
> 它们可以在这里找到：http: [//sourceforge.net/projects/machomebrew/files/Bottles/imagemagick-6.7.7-6.snowleopard.bottle.3.tar.gz/download](http://sourceforge.net/projects/machomebrew/files/Bottles/imagemagick-6.7.7-6.snowleopard.bottle.3.tar.gz/download) [http://sourceforge.net/projects/ machomebrew/files/Bottles/imagemagick-6.7.7-6.lion.bottle.3.tar.gz/下载](http://sourceforge.net/projects/machomebrew/files/Bottles/imagemagick-6.7.7-6.lion.bottle.3.tar.gz/download) [http://sourceforge.net/projects/machomebrew/files/Bottles/imagemagick-6.7.7-6.mountainlion .bottle.3.tar.gz/下载](http://sourceforge.net/projects/machomebrew/files/Bottles/imagemagick-6.7.7-6.mountainlion.bottle.3.tar.gz/download)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-10-25T08:12:24.603

这是对 High Sierra、Mojave 和 Catalina 的修复，

```
brew uninstall imagemagick
brew install imagemagick@6export PATH="/usr/local/opt/imagemagick@6/bin:$PATH"
brew link --force imagemagick@6
gem install rmagick 
```

来源：[https ://blog.francium.tech/installing-rmagick-on-osx-high-sierra-7ea71f57390d](https://blog.francium.tech/installing-rmagick-on-osx-high-sierra-7ea71f57390d)

# android - 继续在方向更改时填充 ListView

> ID：13963409
> 
> 赞同：0
> 
> 时间：2012-12-20T00:20:08.317
> 
> 标签：android, listview, service, android-asynctask

我正在`AsyncTask`做后台工作并填充`ListView`它`onProgressUpdate`并调用`notifyDataSetChanged()`适配器。问题是当方向改变时，`AsyncTask`停止。无论如何，我怎样才能`AsyncTask`继续做它的工作并填充结果？`ListView`我不能使用`android:configChanges="keyboardHidden|orientation"`，因为我的布局在横向模式下是不同的。我也尝试使用`Service`类，但我无法访问我的 UI 组件。实现我所追求的最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T01:45:35.267

您可以使用回调方法来更新您的 listView。你需要在你的 AsyncTask 中实现它，如果直接从你的 doInBackground 或 onProgressUpdate 调用：

```
private updateListViewListener mListener;

public interface updateListViewListener{
    void updateListView(List<String> rowsData);     
}

public void setUpdateListViewListener(updateListViewListener listener) {
    mListener = listener;
} 
```

然后在 doInBackGround（或 onPogressUpdate）中：

```
@Override
    protected Object doInBackground(Object... arg0) {
    //Code that downloads data or executes time consumming code that calls the following interface when the data of a row is ready
     mListener.updateListView(listOfStrings); 
} 
```

然后在您的活动中，您可以将 AsyncTask 的引用保存在另一个类中：

```
RandomClass.saveAsyncTask(yourAsynctask); 
```

这样，即使重新创建了活动，您也可以获得对 AsyncTask 的引用，在 oncreateView() 上添加类似这样的内容：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        YourAsyncTask task = RandomClass.getAsyncTask();
        if(task != null){
            newAsyncTask =  task;
            newAsyncTask .setUpdateListViewListener(this); // you set again the listener
        }
    } 
```

最后，您可以将其添加到您将在活动中覆盖的 updateListView 方法中：

```
@Override
    public void updateListView(List<String> newDataFromAT) {
        adapter.setData(newDataFromAT);
            // You need to do this since you can't change anything in the UI from doInBakcground
        getActivity().runOnUiThread(new Runnable() {
                public void run() {
          adapter.notifyDataSetChanged();
                }
            });
    } 
```

这只是一些我认为对你有用的代码，因为你没有发布任何代码，但你知道当你旋转你的设备时，AsyncTask 不能更新像 listView 这样被破坏的东西，所以最好保留对 asyncTask 的引用。

# django - django-social-auth "UserSocialAuth.user" 必须是 "Trainee" 实例

> ID：13963411
> 
> 赞同：0
> 
> 时间：2012-12-20T00:20:21.047
> 
> 标签：django, facebook, login, linkedin, django-socialauth

我正在将 django-social-auth 集成到我现有的应用程序中。到目前为止，我已经完成了所有工作，唯一缺少的是将我的用户模型（实习生）女巫不使用 auth.User 模型集成到 DSA。当我尝试登录时，我收到以下消息：

```
"UserSocialAuth.user" must be a "Trainee" instance. 
```

这是我的设置：

```
LINKEDIN_API_KEY = 'my_key'
LINKEDIN_SECRET_KEY = 'my_key'
LINKEDIN_CONSUMER_KEY = LINKEDIN_API_KEY
LINKEDIN_CONSUMER_SECRET = LINKEDIN_SECRET_KEY
LINKEDIN_SCOPE = ['r_basicprofile', 'r_emailaddress', 'r_fullprofile']
LINKEDIN_EXTRA_FIELD_SELECTORS = ['public-profile-url', 'picture-url', 'date-of-birth']

FACEBOOK_APP_ID = os.environ.get('FACEBOOK_APP_ID')
FACEBOOK_API_SECRET = os.environ.get('FACEBOOK_API_SECRET')
FACEBOOK_EXTENDED_PERMISSIONS = ['email']
# FACEBOOK_PROFILE_EXTRA_PARAMS = {'locale': 'en_US'}

AUTHENTICATION_BACKENDS = (
    # 'social_auth.backends.twitter.TwitterBackend',
    'social_auth.backends.facebook.FacebookBackend',
    # 'social_auth.backends.google.GoogleOAuthBackend',
    # 'social_auth.backends.google.GoogleOAuth2Backend',
    # 'social_auth.backends.google.GoogleBackend',
    # 'social_auth.backends.yahoo.YahooBackend',
    # 'social_auth.backends.browserid.BrowserIDBackend',
    'social_auth.backends.contrib.linkedin.LinkedinBackend',
    # 'social_auth.backends.contrib.disqus.DisqusBackend',
    # 'social_auth.backends.contrib.livejournal.LiveJournalBackend',
    # 'social_auth.backends.contrib.orkut.OrkutBackend',
    # 'social_auth.backends.contrib.foursquare.FoursquareBackend',
    # 'social_auth.backends.contrib.github.GithubBackend',
    # 'social_auth.backends.contrib.vkontakte.VKontakteBackend',
    # 'social_auth.backends.contrib.live.LiveBackend',
    # 'social_auth.backends.contrib.skyrock.SkyrockBackend',
    # 'social_auth.backends.contrib.yahoo.YahooOAuthBackend',
    # 'social_auth.backends.OpenIDBackend',
    'django.contrib.auth.backends.ModelBackend',
)

SOCIAL_AUTH_CREATE_USERS = False
SOCIAL_AUTH_LOGIN_REDIRECT_URL = '/'
SOCIAL_AUTH_USER_MODEL = 'trainee.Trainee'
SOCIAL_AUTH_PROTECTED_USER_FIELDS = ['email', 'username', 'name']

LOGIN_URL = '/home/'
LOGIN_REDIRECT_URL = '/'
LOGIN_ERROR_URL = '/'

SOCIAL_AUTH_PIPELINE = (
    'social_auth.backends.pipeline.social.social_auth_user',
    'social_auth.backends.pipeline.user.get_username',
    'social_auth.backends.pipeline.user.create_user',
    'social_auth.backends.pipeline.social.associate_user',
    'social_account.backends.login.extra_data',
    'social_auth.backends.pipeline.social.load_extra_data',
    'social_auth.backends.pipeline.user.update_user_details',
    # 'social_auth.backends.pipeline.associate.associate_by_email',
    'social_account.backends.login.process',
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T21:03:29.533

我删除了现有的 django-social-auth 表并再次运行 syncdb。

# regex - 永久重定向带有问号（？）的网址！

> ID：13963412
> 
> 赞同：0
> 
> 时间：2012-12-20T00:20:22.983
> 
> 标签：regex, .htaccess, redirect

我正在寻找具有这种形式的 URL 的 Apache 重定向：

```
RedirectPermanent /article-111-?%C2%A0-122.html http://www.exemple.com/article-111-122.html 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T00:25:09.223

尝试添加此脚本：

```
<script type="text/javascript">
    if(top!= self) top.location.href = self.location.href
</script> 
```

它会工作的！

# c# - 使用 SSH 为 CentO 上的用户设置密码

> ID：13963413
> 
> 赞同：1
> 
> 时间：2012-12-20T00:20:35.727
> 
> 标签：c#, ssh, centos

我正在尝试为我使用程序通过 SSH 添加的用户设置密码。

到目前为止，这是我的代码：

```
private void button1_Click(object sender, EventArgs e)
{
    SshStream ssh = new SshStream("IP", "root", "Password");
    ssh.Prompt = "#";
    ssh.RemoveTerminalEmulationCharacters = true;
    ssh.Write("adduser " + textBox1.Text);
    textBox3.Text = ssh.ReadResponse();
    ssh.Close();
} 
```

我将如何在按钮单击时发送这些命令：

密码 textbox1.text

然后服务器返回这个：

```
New UNIX password:
Retype new UNIX password: 
```

我需要用 textbox2.text 的值填写每一行

我正在使用这个库：[http ://www.tamirgal.com/blog/page/SharpSSH.aspx](http://www.tamirgal.com/blog/page/SharpSSH.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T07:26:11.780

尝试这个：

```
ssh.Write("thepassword\nthepassword | passwd " + textBox1.Text); 
```

这基本上将两个密码传递给 passwd 函数

# ios - 复杂的 NSPredicates：比较最近对象的值

> ID：13963427
> 
> 赞同：2
> 
> 时间：2012-12-20T00:22:29.863
> 
> 标签：ios, core-data, nspredicate

我有一个复杂的谓词我正在努力解决。

基本上，我有一个学生对象。学生有 testScoreObjects。TestScoreObject 具有诸如 scoreDate (NSDate) 和 score (NSNumber) 等属性。

我想要一个最近（按 scoreDate）TestScoreObject 的分数大于 n 的学生列表。

理想情况下，在 NSFetchedResultsController 上使用一个 NSPredicate 会很棒。

我知道如何通过查看所有学生以编程方式完成此任务，但我想知道这是否可以通过谓词来完成，这样我就可以保留拥有 FetchedResultsController 的所有美妙好处。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T01:07:06.950

我会使用以下谓词：

```
NSString *format = @"SUBQUERY(testScoreObjects, $each, $each.score > $n && $each.scoreDate == testScoreObjects.@max.scoreDate)[SIZE] > 0";
NSDictionary *substitutions = @{@"n": @3}; // 3 is the value for n
NSPredicate *predicate = [[NSPredicate predicateWithFormat:format] predicateWithSubstitutionVariables:substitutions]; 
```

或者

```
NSString *format = @"ANY SUBQUERY(testScoreObjects, $each, $each.score > $n).scoreDate == testScoreObjects.@max.scoreDate";
NSDictionary *substitutions = @{@"n": @3}; // 3 is the value for n
NSPredicate *predicate = [[NSPredicate predicateWithFormat:format] predicateWithSubstitutionVariables:substitutions]; 
```

两者都可以正常过滤数组，但我尚未测试 CoreData 是否能够将它们转换为 SQL（因此它可以与 fetch 请求一起使用）。

在处理大型商店时，第二个谓词*应该*更有效（据我所知），因为`testScoreObjects.@max.scoreDate`每个学生只评估一次。当然，实际结果可能会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:19:20.833

当涉及到对象图时，子查询实际上是 SQL 继承的拐杖。我认为你可以没有那个。看看事情有多简单：

```
[NSPredicate predicateWithFormat:
     @"ANY testScores.scoreDate > %@", cutoffDate]; 
```

# css - 背景图像作为响应式设计

> ID：13963428
> 
> 赞同：0
> 
> 时间：2012-12-20T00:22:29.913
> 
> 标签：css, responsive-design

如果我有这组 div，如何在调整浏览器大小时更改每个背景图像的尺寸？基本上将盒子的所有内容都作为响应式设计。

所以最大宽度就是图像的尺寸。

```
<div class="box">
  <div class="dog_1"></div>
  <div class="dog_2"></div>
  <div class="dog_3"></div>  
  <div class="dog_4"></div>
</div>

div[class*='dog_'] {
   background: url("http://ecx.images-amazon.com/images/I/419c%2BE2j0kL._SL500_AA300_.jpg");
   background-repeat: no-repeat;
    height:200px
} 
```

在这里演示：http: [//jsfiddle.net/LPKkk/](http://jsfiddle.net/LPKkk/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T00:26:34.637

您可以使用 background-size 属性： [https ://developer.mozilla.org/en-US/docs/CSS/background-size](https://developer.mozilla.org/en-US/docs/CSS/background-size)

但是 IE7&8 不支持它。如果您需要支持这些浏览器，您可能必须使用基于百分比的宽度和高度的图像元素，而不是背景图像或 IE 的专有过滤器。例子：

```
filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='../background.png', sizingMethod='scale'); 
```

关于 IE 图像过滤器的一件事是图像路径是相对于 HTML 文档（如元素），而不是相对于 CSS 文档，如普通背景图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T00:26:14.850

您可以使用 CSS3`background-size: cover/contain;`属性来缩放背景图像：http: [//jsfiddle.net/LPKkk/1/](http://jsfiddle.net/LPKkk/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T01:00:16.263

```
 background: url(images/bg.jpg) no-repeat center center fixed; 
    -webkit-background-size: cover !important;
    -moz-background-size: cover !important;
    -o-background-size: cover !important;
    background-size: cover !important; 
```

（由于某种原因，我不得不使用 !important 才能让封面上次工作）

这里也是[一些其他方法的链接](http://css-tricks.com/perfect-full-page-background-image/)。

# java - 在保存到文件之前将定期获取的大量文本存储到缓存中是个好主意吗？

> ID：13963430
> 
> 赞同：6
> 
> 时间：2012-12-20T00:22:34.853
> 
> 标签：java, caching, file-io

所以我试图将消息网络上用户的消息写入文件。我正在尝试使用良好的 java 实践和适当的文件 IO 技术来构建这个程序。

目前我的程序识别出有人发布了一条消息，接收该消息并立即将其写入文件。创建文件对象，创建写入器对象，附加消息，然后关闭文件。如果没有很多消息进入，这似乎是一个很好的做法，但如果有一个快速的对话流，这似乎很慢并且需要很多不必要的操作，因为该文件将立即再次打开。

然后我想如果我只是让文件保持打开状态并在消息到达文件时将它们写入，然后定期关闭它会怎样。这是好习惯吗？长时间打开文件？例如在一小时后或写入一定数量的数据后？

现在，我想我应该获取消息，将它们存储在“缓存”（如字符串数组）中，然后在“缓存”已满时将字符串数组保存到文件中。这是更好的做法吗？

所以我有两个问题：

1）如果您不使用该文件，那么长时间（几分钟到几小时）打开文件是一种好习惯吗？

2）像我说的“缓存”有什么好的做法？字符串数组好吗？我应该使用更好的东西吗？您将如何存储这些信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T00:42:32.237

长时间打开文件绝对没问题。这肯定比反复打开和关闭它要好得多。单个打开文件消耗的资源量可以忽略不计；您唯一担心的是您是否有很多打开的文件（数百或数千）。我建议您在程序启动时打开文件，并在程序完成时关闭它。

如果您使用合适的工具来检查您的程序或系统上的其他程序持有的打开文件，您会发现它们都持有一些文件（几个到几十个）在其整个生命周期中打开 - 任何包含程序的代码（可执行文件、共享库和 Java 程序的 JAR 文件），因为这些代码被打开，然后进行内存映射，并且通常也是日志文件。这是正常和安全的。

现在，您将需要在此期间[刷新](http://docs.oracle.com/javase/6/docs/api/java/io/OutputStream.html#flush%28%29)流（或 writer，或`RandomAccessFile`，或任何您使用的东西）。每当您需要确保写入该点的所有数据都已安全写入磁盘时，您都应该这样做；这可能是在每条消息之后，或者在您认为合适的给定数量的消息、数据量或时间段之后。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T00:46:42.460

在我看来，服务器应用程序中日志（和类似的）的最佳实践是确定一个可接受的时间延迟并坚持下去。例如，如果您设置 5 秒延迟，请编写代码，以便：

*   如果您在日志中写入内容，它将在 5 秒内“真正”写入。
*   如果在 5 秒之前写入了其他内容，它只会被添加到缓冲区中（在时间到时写入）。

这样，您每 5 秒最多只能执行一次磁盘写入，但它肯定是写入的。这与其他方法相比很好：

*   如果每次写入任何内容时都将数据刷新到磁盘，但负载增加并且每秒有 10,000 个事件，那么每秒 10,000 次磁盘写入将浪费 I/O 时间。
*   如果您将它留给 Java/操作系统来决定何时刷新数据，但负载非常低（例如在半夜），那么日志甚至可能已经过时数小时。（如果有一个事件，不足以填满缓冲区，那么几个小时内什么都没有。）

我最近没有查看 API 是否有内置的方法来执行此策略，但它很容易编码。顺便说一句，不需要手动缓存输出；您可以只使用 BufferedOutputStream，并在您想将其写入磁盘时调用 flush() 对象。（这样它也会在达到缓冲区限制时自动写入，但如果你明智地选择限制，那可能没问题。）

关于让文件保持打开状态，您可以根据需要让文件保持打开状态（当您不再写入时将其关闭）。假设您没有打开数千个文件，并且不需要多个应用程序写入同一个文件，这不会导致任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T00:33:41.527

1）如果您不使用该文件，那么长时间（几分钟到几小时）打开文件是一种好习惯吗？

我认为这取决于有多少消息进入您的程序以及每个消息的大小。如果你的记忆可以满足你的计算，你可以考虑一下。但是当每条消息到来（可能是一个blob）时，我会考虑在数据库上写入。还要考虑如果您在写入文件时程序崩溃会发生什么。您可能会丢失存储在内存中的整条消息。

2）像我说的“缓存”有什么好的做法？字符串数组好吗？我应该使用更好的东西吗？您将如何存储这些信息？

如果您将数据临时存储在内存数组中，那么当您知道大小时就可以了。否则你可以使用 ArrayList。

# php - 将对象转换为数组

> ID：13963431
> 
> 赞同：2
> 
> 时间：2012-12-20T00:22:54.420
> 
> 标签：php, foreach

> **可能重复：**
> [将数组和数组中的对象转换为纯数组](https://stackoverflow.com/questions/10631767/converting-array-and-objects-in-array-to-pure-array)

我现在有一个数组，但它被传递给另一个将其转换为对象的函数，尽管它需要是一个标准数组，但它才能工作。我需要将以下对象数组转换为标准数组：

```
[files] => stdClass Object
        (
            [1] => stdClass Object
                (
                    [name] => price-my-insurance.jpg
                    [type] => image/jpeg
                    [tmp_name] => /Applications/MAMP/tmp/php/phpfmRfyN
                    [error] => 0
                    [size] => 911376
                )

            [2] => stdClass Object
                (
                    [name] => sideshows.jpg
                    [type] => image/jpeg
                    [tmp_name] => /Applications/MAMP/tmp/php/phpTamdHy
                    [error] => 0
                    [size] => 967656
                )

            [3] => stdClass Object
                (
                    [name] => the-beer-scale.jpg
                    [type] => image/jpeg
                    [tmp_name] => /Applications/MAMP/tmp/php/phpwCmwlW
                    [error] => 0
                    [size] => 742219
                )

            [4] => stdClass Object
                (
                    [name] => the-little-lace.jpg
                    [type] => image/jpeg
                    [tmp_name] => /Applications/MAMP/tmp/php/phpFnUuf8
                    [error] => 0
                    [size] => 939963
                )

            [5] => stdClass Object
                (
                    [name] => varrstoen-australia.jpg
                    [type] => image/jpeg
                    [tmp_name] => /Applications/MAMP/tmp/php/phpUtWyk1
                    [error] => 0
                    [size] => 2204400
                )

        ) 
```

对此：

```
Array
(
    [1] => Array
        (
            [name] => price-my-insurance.jpg
            [type] => image/jpeg
            [tmp_name] => /Applications/MAMP/tmp/php/phpfmRfyN
            [error] => 0
            [size] => 911376
        )

    [2] => Array
        (
            [name] => sideshows.jpg
            [type] => image/jpeg
            [tmp_name] => /Applications/MAMP/tmp/php/phpTamdHy
            [error] => 0
            [size] => 967656
        )

    [3] => Array
        (
            [name] => the-beer-scale.jpg
            [type] => image/jpeg
            [tmp_name] => /Applications/MAMP/tmp/php/phpwCmwlW
            [error] => 0
            [size] => 742219
        )

    [4] => Array
        (
            [name] => the-little-lace.jpg
            [type] => image/jpeg
            [tmp_name] => /Applications/MAMP/tmp/php/phpFnUuf8
            [error] => 0
            [size] => 939963
        )

    [5] => Array
        (
            [name] => varrstoen-australia.jpg
            [type] => image/jpeg
            [tmp_name] => /Applications/MAMP/tmp/php/phpUtWyk1
            [error] => 0
            [size] => 2204400
        )

) 
```

我被困在 foreach 循环上来做到这一点。

**编辑：**

![这是输出的屏幕截图](../Images/7e3b3a32e9a03f712d5ff6194e2202fa.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T00:25:35.930

我会用懒惰的方式来做：

```
$jsonstring = json_encode($theObj);
$array = json_decode($jsonstring,true); 
```

[php文档](http://php.net/manual/en/function.json-decode.php)

> **assoc**
> 为 TRUE 时，返回的对象将被转换为关联数组。

**编辑：**我刚刚测试了这个：

```
<?php
$o = new stdClass();
$o->property = "somepath";

$a = array($o,$o);
$js = json_encode($a);
$array = json_decode($js,true);
var_dump($array);
?> 
```

这是输出：

```
array(2) {
  [0]=>
  array(1) {
    ["property"]=>
    string(8) "somepath"
  }
  [1]=>
  array(1) {
    ["property"]=>
    string(8) "somepath"
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T00:26:04.683

```
$array = array();

foreach ($files as $k => $v) {
    if (!is_array($array[$k])) {
        $array[$k] = array();
    }

    foreach ($v as $j => $u) {
        $array[$k][$j] = $u;
    }
} 
```

不完全确定它会起作用。`json_decode(json_encode($obj),true)`就像@Ibu 说的那样，用懒惰的方式可能更容易。

# python - 使用 Python 下载文件

> ID：13963440
> 
> 赞同：0
> 
> 时间：2012-12-20T00:24:02.583
> 
> 标签：python, download

我必须下载一些文件。我在python中尝试了以下代码。

```
import urllib2
ul = urllib2.urlopen('http://dds.cr.usgs.gov/emodis/Africa/historical/TERRA/2012/comp_056/AF_eMTH_NDVI.2012.047-056.QKM.COMPRES.005.2012059143841.zip.sum').read()
open("D:/Thesis/test_http_dl", "w").write(ul) 
```

它抛出这个错误：

```
IOError: [Errno 13] Permission denied: 'D:/Thesis/test_http_dl' 
```

你知道这是为什么吗？难道我做错了什么？
我尝试了不同的文件夹，但没有成功。我的文件夹不是只读的。结果`print(repr(ul[:60]))`是`'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">\n<htm'`。
`urllib.urlretrieve()`只是在文件夹中创建了一个 1 kb 的文件，这显然不是下载的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T00:27:16.627

该错误会告诉您究竟出了什么问题。您无权写入 path `D:/Thesis/test_http_dl`。

有四个可能的原因：

1.  您已经有一个具有该名称的文件，但您没有写入权限。
2.  您无权在`D:\Thesis`.
3.  您根本没有对 D: 驱动器的写访问权（例如，因为它是 CD-ROM）。
4.  其他一些进程将文件打开以进行独占访问。

您需要查看 ACL`D:\Thesis\test_http_dl`是否存在或`D:\Thesis\`其他情况，并查看您的用户（您运行脚本的用户）是否具有写入权限，并检查该路径或 D 驱动器本身是否具有“只读”标志，并检查是否有任何其他进程打开了文件。（我不知道最后一个的任何内置工具，但`handle`或`Process Explorer`来自[sysinternals](http://technet.microsoft.com/en-US/sysinternals)可以轻松地为您完成。）

同时，`urllib2`这里没有任何相关的东西。您可以通过这样做来验证：

```
open("D:/Thesis/test_http_dl", "w") 
```

您将得到完全相同的异常。

值得知道如何以“困难”的方式解决这个问题，因为异常*并不能*准确地告诉你出了什么问题。你会在这样的一行中得到一个异常：

```
open("D:/Thesis/test_http_dl", "w").write(ul) 
```

出了点问题，如果你没有足够的信息来判断它是什么，你会怎么做？好吧，首先，把它分成几块，所以每一行都有一个操作：

```
f = open("D:/Thesis/test_http_dl", "w")
f.write(ul) 
```

现在您知道这两个中的哪一个出现异常。

当您使用它时，由于此代码唯一依赖的是`ul`，因此您可以创建一个更简单的程序来测试它：

```
ul = 'junk'
f = open("D:/Thesis/test_http_dl", "w")
f.write(ul) 
```

即使这不能直接帮助您，这也意味着您不需要每次通过测试循环都等待下载，并且您可以将一些更简单的内容发布到 SO（有关更多信息，请参见[SSCCE](http://sscce.org)），这是您可以在交互式解释器中输入一些内容。与其尝试猜测打印出什么可能有用，以了解为什么`write`引发异常，您可以从`help(f)`or开始`dir(f)`并实时使用它。（在这种情况下，我猜它实际上`open`是失败的，而不是`write`，但你不应该猜测。）

关于你的第二个问题：

> urllib.urlretrieve() 只是在文件夹中创建了一个 1 kb 的文件，这显然不是下载的文件。

实际上，我认为它*是*下载的文件。你不是在要求`AF_eMTH_NDVI.2012.047-056.QKM.COMPRES.005.2012059143841.zip`，你是在要求`AF_eMTH_NDVI.2012.047-056.QKM.COMPRES.005.2012059143841.zip.sum`，这可能是一个校验和文件——一种包含元数据的准标准类型的文件，可帮助您确保您正在下载的文件在传输过程中没有被损坏或被黑客篡改。典型的校验和文件有一行或多行，每一行将可下载文件映射到可下载文件的某种格式的校验和或加密哈希摘要。有时它们有三列——校验和/哈希的类型、某种字符串化格式的校验和/哈希的值，以及文件的文件名或完整 URL。有时第一列被省略，您必须从其他地方知道正在使用哪种类型的校验和/哈希（通常 MD5 作为十六进制字符串）。有时列的顺序不同。有时它们用逗号或制表符分隔，或者在固定宽度的字段中，或者其他一些变体中。

无论如何，您希望 .sum 文件的长度约为 80 字节。如果您在资源管理器或`dir`命令中查看它，它通常会四舍五入到最接近的 1K。因此，如果您成功下载，您应该会看到一个 1K 文件。

同时：

> print(repr(ul[:60])) 是 '\n

你应该试着打印出剩下的部分，因为它可能是某种文件，用人类的语言解释你做错了什么。这可能是因为您需要传递 URL 代理、首选编码、引用者或其他一些标头。

但是，我测试了您重复使用的完全相同的代码行，并且`ul`始终是：

```
1ba6437044bfa9259fa2d3da8f95aebd  AF_eMTH_NDVI.2012.047-056.QKM.COMPRES.005.2012059143841.zip 
```

换句话说，它是一个完全有效的校验和文件，而不是 HTML 页面。所以，我怀疑真正发生的事情是您没有测试您向我们展示的相同代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T00:34:37.897

我已经尝试过你的代码并得到了同样的错误

所以试试这个：D

```
import urllib
urllib.urlretrieve('http://dds.cr.usgs.gov/emodis/Africa/historical/TERRA/2012/comp_056/AF_eMTH_NDVI.2012.047-056.QKM.COMPRES.005.2012059143841.zip.sum','C:\\path_of_your_folder\\xx.zip.sum') 
```

适合我！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T13:55:43.553

```
import urllib2
def download(url, file):
    dataset = urllib2.urlopen(url)
    CHUNK = 16 * 1024
    with open(file, 'wb') as dl:
        while True:
            peice = dataset.read(CHUNK)
            if not peice: break
            dl.write(peice)

download(r'http://dds.cr.usgs.gov/emodis/Africa/historical/TERRA/2012/comp_056/AF_eMTH_NDVI.2012.047-056.QKM.COMPRES.005.2012059143841.zip',r'AF_eMTH_NDVI.2012.047-056.QKM.COMPRES.005.2012059143841.zip') 
```

# css - 为什么 position:relative 不能像我预期的那样使用 float

> ID：13963444
> 
> 赞同：0
> 
> 时间：2012-12-20T00:24:32.173
> 
> 标签：css, css-float

这是一个[例子](http://jsfiddle.net/XnWsg/)，

请注意 `.mappanel`，它覆盖了浏览器的所有宽度，而我希望`.textview`div 显示在右侧。

当我删除位置：相对时，它起作用了（虽然我不能同时删除`position:relative`两者。

实际上，我想要的是`.textview`采用固定宽度（在我的示例中为 380），然后`.mappanel`向左。

在某个时候，`.textview`罐子倒塌了，然后`.mappanel`占据了所有的宽度

* * *

更新：

有人建议我使用`z-index`，但我不能。

因为如果我使用`z-index`, 并且`.textview`出现。但是它`.mappanel`也占据了父级的整个宽度，而我只是想要它占据 lefe 空间。

也就是说，如果两个元素的父 div 有一个宽度：600px，那么`.mappanel`就会有 (600-380)px；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T00:30:24.183

这是一个`z-index`问题。您的`.textview`面板出现在您的`.mappanel`. 这是因为您已经为它们定义了一个`position`，这将为它们提供一个默认值`z-index`。并且因为在代码中出现`.mappanel`在后面`.textview`，所以它会出现在上面。

试试这个：

**CSS**

```
.textview {
    width: 380px;
    position:relative;
    z-index: 1;
    top: 0px;
    float:right;
    height: 535px;
    background: #cc0000;
}
.mappanel {
    position:relative;
    z-index: 0;
    background: #0000cc;
    height: 535px;
    margin-right: 380px;
} 
```

**[演示](http://jsfiddle.net/XnWsg/4/)**

**更新 1**

要将非浮动面板的宽度固定为不低于浮动面板，您可以在其右侧添加边距：

```
 margin-right: 380px; 
```

如果您想看到它运行，我已经更新了上面的演示。

# spring-mvc - Jodatime/Spring MVC/杰克逊 | 日期时间格式问题

> ID：13963447
> 
> 赞同：3
> 
> 时间：2012-12-20T00:24:49.193
> 
> 标签：spring-mvc, jackson, jodatime

当我使用 @ResponseData JodaTime 时，它​​会转换为它的完整对象状态，即使我有一个自定义序列化程序。

**配置：**

春季 3.1.2 杰克逊 1.9.11

```
<dependency>
    <groupId>org.codehaus.jackson</groupId>
    <artifactId>jackson-core-asl</artifactId>
    <version>${jackson.version}</version>
</dependency>
<dependency>
    <groupId>org.codehaus.jackson</groupId>
    <artifactId>jackson-mapper-asl</artifactId>
    <version>${jackson.version}</version>
</dependency> 
```

自定义序列化器：

```
public class JodaDateTimeJsonSerializer extends JsonSerializer<DateTime> {

    //TODO Bad (hard) code. This should be part of a global system setting through ConfigurationService
    private static final String dateFormat = ("dd/MM/yyyy");

    private static Logger logger = LoggerFactory.getLogger(JodaDateTimeJsonSerializer.class);

    @Override
    public void serialize(DateTime date, JsonGenerator gen, SerializerProvider provider)
            throws IOException, JsonProcessingException {

        String formattedDate = DateTimeFormat.forPattern(dateFormat).print(date);
        logger.debug("Converted date string: {}", formattedDate);
        gen.writeString(formattedDate);
    }
} 
```

调度员：

```
 <mvc:annotation-driven /> 
```

用法：

```
@JsonSerialize(using=JodaDateTimeJsonSerializer.class)
    public DateTime getExpiryDate() {
        return expiryDate;
    } 
```

我得到的输出类似于：

```
"dateCreated":{"monthOfYear":12,"yearOfEra":2012,"yearOfCentury":12,"centuryOfEra":20,"millisOfSecond":359,"millisOfDay":53080359,"secondOfMinute":40,"secondOfDay":53080,"minuteOfHour":44,"minuteOfDay":884,"hourOfDay":14,"weekyear":2012,"weekOfWeekyear":51,"year":2012,"dayOfMonth":19,"dayOfWeek":3,"era":1,"dayOfYear":354,"chronology":{"zone":{"fixed":false,"cachable":false,"id":"Asia/Riyadh"}},"millis":1355917480359,"zone":{"fixed":false,"cachable":false,"id":"Asia/Riyadh"},"afterNow":false,"beforeNow":true,"equalNow":false},"dateModified":{"monthOfYear":12,"yearOfEra":2012,"yearOfCentury":12,"centuryOfEra":20,"millisOfSecond":359,"millisOfDay":53080359,"secondOfMinute":40,"secondOfDa 
```

我想要一个简单的 dd/mm/yyyy 日期。

请指教。

此外，如何在不必一直使用 @JsonSerialize 的情况下全局设置此格式规则。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:55:17.423

[此链接](http://magicmonster.com/kb/prg/java/spring/webmvc/mvc_spring_config_namespace.html)有助于解决这种情况。

基本上你需要一个序列化器和杰克逊的自定义对象映射器。

序列化器：

```
public class JodaDateTimeJsonSerializer extends JsonSerializer<DateTime> {

    private static final String dateFormat = ("dd/MM/yyyy");

    private static Logger logger = LoggerFactory.getLogger(JodaDateTimeJsonSerializer.class);

    @Override
    public void serialize(DateTime date, JsonGenerator json, SerializerProvider provider)
            throws IOException, JsonProcessingException {

        String formattedDate = DateTimeFormat.forPattern(dateFormat).print(date);
        json.writeString(formattedDate);
    }
} 
```

自定义对象映射器：

```
public class CustomJacksonObjectMapper extends ObjectMapper {

    public CustomJacksonObjectMapper(){
        CustomSerializerFactory factory = new CustomSerializerFactory();
        factory.addSpecificMapping(DateTime.class, new JodaDateTimeJsonSerializer());
        this.setSerializerFactory(factory);
    }

} 
```

现在向 MVC 注册自定义映射器

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:context="http://www.springframework.org/schema/context"
        xmlns:aop="http://www.springframework.org/schema/aop"
        xmlns:p="http://www.springframework.org/schema/p"
        xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">
    <mvc:annotation-driven>
            <mvc:message-converters>
                <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
                    <property name="objectMapper" ref="customJacksonMapper" />
                </bean>
            </mvc:message-converters>
        </mvc:annotation-driven> 
```

那行得通。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T18:07:48.043

有一个可以用于此的[jackson-datatype-joda模块 - 请在此处查看我的答案：](https://github.com/FasterXML/jackson-datatype-joda) [https ://stackoverflow.com/a/14185077/125246](https://stackoverflow.com/a/14185077/125246)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T13:30:42.757

正如 paulcm 提到的，有一个 jackson jodatype 模块，它允许在没有 @JsonSerializer 的情况下进行序列化。您可以在此处检查工作配置[https://stackoverflow.com/a/14399927/1134683](https://stackoverflow.com/a/14399927/1134683)

# apache - 一个字符搞砸了 htaccess

> ID：13963448
> 
> 赞同：3
> 
> 时间：2012-12-20T00:25:00.807
> 
> 标签：apache, .htaccess, mod-rewrite, lamp

我正在使用带有 LAMP 的 Ubuntu 12 服务器（今天安装了所有内容并进行了全面升级），并且我正在使用以下 .htaccess：

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /

RewriteRule ^messages/received/?$ messages.php?p=received [L] 
```

当我去时，我得到一个“未找到”页面`http://localhost/messages/received/`

现在奇怪的是，如果我删除 'messages' 的最后一个 's' ：

```
RewriteRule ^message/received/?$ messages.php?p=received [L] 
```

然后它完美地工作。

在我的 Mac 上使用 MAMP 上的相同文件不会引发错误。

更新：显然这是因为我有一个文件“（www_root）/messages/received.php”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T03:34:00.257

> 更新：显然这是因为我有一个文件“（www_root）/messages/received.php”。

这听起来像多视图（mod_negotiation）正在这样做。在您的选项指令中，尝试添加`-Multiviews`：

```
Options +FollowSymlinks -Multiviews 
```

# database - SQL 或 NOSQL 数据库，用于在 heroku 上存储 Web 分析

> ID：13963451
> 
> 赞同：0
> 
> 时间：2012-12-20T00:25:18.140
> 
> 标签：database, heroku, nosql, ruby-on-rails-3.2, analytics

我正在开发一个heroku rails 应用程序。我想记录应用程序的分析。我本来打算把它们扔到 Postgres 数据库中，但认为这可能是个坏主意——因为该数据的增长速度将比任何其他数据快得多，并且可能会损害其他数据的性能或可扩展性？

我正在考虑将其推送到 MongoDB 中。

我对那里的 NoSQL 选项并没有真正的经验，已经用谷歌搜索了一个直接的答案，但我发现的大多数答案都是更笼统的，比如这种应用程序需要什么样的数据库质量而不进入有关哪些 DB 提供这些品质的详细信息。

分析最终将被应用程序用于自定义输出 - 例如，频繁点击对象的更高排名 - 所以我正在寻找我自己的存储而不是分析服务，除非你能说服我我的应用程序可以有效和灵活地查询服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T02:52:12.693

我做 Ruby 和 Couchbase！由于能够处理极端写入量并且易于扩展，因此 Couchbase 通常用于此类目的。您将获得 RAM 速度性能。它是 memcached 的演变（成为 Membase Server 成为 Couchbase Server）。借助 Map/Reduce 索引和弹性搜索集成，您还可以在索引和查询方面做很多事情。

习惯于你的模型的 Documents 和 JSON 需要一点时间来适应来自 SQL 的习惯，但是一旦你掌握了它，适应它，就很难回去了。

我有几个微型网站：http: [//CouchbaseOnRails.com](http://CouchbaseOnRails.com)和[http://CouchbaseModels.com](http://CouchbaseModels.com)来帮助入门。它们是一项正在进行的工作，但希望对您有所帮助。您还可以在以下位置找到很好的信息： http: [//www.couchbase.com/develop/ruby/current](http://www.couchbase.com/develop/ruby/current)

我当然可以帮助你开始，找我@scalabl3

# javascript - TypeScript - 在没有 AMD 和 CommonJS 的情况下导入外部模块

> ID：13963452
> 
> 赞同：4
> 
> 时间：2012-12-20T00:25:17.743
> 
> 标签：javascript, typescript

有没有人找到不使用 AMD 或 CommonJS（使用 import 关键字）从另一个文件导入模块的方法？我认为这是不可能的，但我想仔细检查以防有一些聪明的方法可以做到这一点。

假设我们不想要 AMD 或 CommmonJS，我只是使用 ///references 语法将类型拉入文件。这给了我类型，我根本不需要使用 import。只是意味着我必须自己在 HTML 中正确订购脚本标签。但我现在可以接受。

```
/// <reference path="router.ts" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T01:38:04.647

是的 - 当您不使用 CommonJS 或 AMD 时，您使用参考注释。

然后如何捆绑您的 JavaScript 文件完全取决于您 - 如果您使用的是 ASP.NET，那么新的脚本捆绑包是一个很好的解决方案。

# symfony - Symfony2：插入一个没有一对多的多个

> ID：13963453
> 
> 赞同：2
> 
> 时间：2012-12-20T00:25:22.807
> 
> 标签：symfony, doctrine

我继续为创建对象的 Symfony/Doctrine 方法而苦苦挣扎。目前的问题是如何最好地在一对多的一侧创建一个对象，而不在多侧创建一个对象。问题似乎源于多方面是关系的拥有方，因此是对象是否持久的决定因素。

详细信息：客户实体与成员实体具有一对多的关系。客户端可以自行创建

```
 $client  = new Client();
        $form = $this->createForm(new ClientType(), $client);
        $form->bind($request);
        if ($form->isValid()) {
            $em = $this->getDoctrine()->getManager();
            $em->persist($client);
            $em->flush();
            return $this->redirect($this->generateUrl('client_show', array('id' => $client->getId())));
        } 
```

和一个客户加上一个或多个成员，但不是单独与

```
$client  = new Client();
$member = new Member();
$client->addMember($member);
$form = $this->createForm(new ClientType(), $client);
$form->bind($request);
if ($form->isValid()) {
    $em = $this->getDoctrine()->getManager();
    $member->setClient($client);
    $em->persist($member);
    $em->flush();
    return $this->redirect($this->generateUrl('client_show', array('id' => $client->getId()))); 
```

客户实体：

```
class Client
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
    * @ORM\OneToMany(targetEntity="Member", mappedBy="client")
    * 
    */
    protected $members;

    public function __construct()
    {
        $this->members = new ArrayCollection();
    }

    public function getMembers()
    {
        return $this->members;
    }

    public function setMembers($members)
    {
        foreach ($members as $members)
        {
            $members->addClient($this);
        }
        $this->members = $members;
        return $this;
    }

    public function addMember(Member $member)
    {
        $this->members->add($member);
//        $member->setClient($this);
        return $this;
//        $this->members[] = $member;
    }

    public function removeMember(Member $member)
    {
        $this->members->removeElement($member);
        return $this;
    } 
```

会员单位：

```
class Member 
{

    /**
     * @var integer $id
     *
     * @ORM\Column(name="hid", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

     /**
     * @ORM\ManyToOne(targetEntity="Client",inversedBy="members",cascade={"remove", "persist"})
     * @ORM\JoinColumn(name="clientId", referencedColumnName="id")
     * 
     */
     protected $client;

    public function setClient(Client $client)
    {
        $this->client = $client;
        return $this;
    }

    public function getClient()
    {
        return $this->client;
    } 
```

如果没有插入成员，上述代码将引发错误。是否可以使用单个代码来添加具有或不具有成员的客户端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T01:59:42.923

Bind 获取表单数据并将其写入对象，然后将其持久化。

你打电话：

```
$client->addMember($member); 
```

在绑定之前，本质上是向您的客户端添加一个空对象，这似乎不是您想要做的。实际上，我希望第一个代码正是您想要的，但是您的 ClientType() 不正确。

我想你想要这样的东西：

```
<?php

namespace ormed\ormedBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class ClientType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('ClientField' // one of several, probably
                     ,null
                     ,array() // specify options
                     )
                ->add('member'
                     ,null
                     ,array()  // specify options
                     )
         ;
    }
} 
```

添加

> $builder->('成员' ...

将成员选择器提供给表单，然后您的级联持久化应该处理其他所有事情。您可能希望将成员指定为实体类型并通过查询构建器构建列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T18:01:24.763

似乎涵盖两种情况的 createAction：有成员的客户端和没有成员的客户端。

```
public function createAction(Request $request)
{
    $client  = new Client();
    $form = $this->createForm(new ClientType(), $client);
    $form->bind($request);
    if ($form->isValid()) {
        $em = $this->getDoctrine()->getManager();
        $members = $client->getMembers();
        foreach ($members as $member)
        {
            $member->setClient($client);
            $em->persist($member);
        }
        $em->persist($client);
        $em->flush();
        return $this->redirect($this->generateUrl('client_show', array('id' => $client->getId())));
    }        
    return array(
        'entity' => $client,
        'form'   => $form->createView(),
    ); 
```

# java - 提交表单并返回 404 空响应

> ID：13963454
> 
> 赞同：0
> 
> 时间：2012-12-20T00:25:31.453
> 
> 标签：java, gwt, servlets

我有一个小服务程序：

```
<servlet>
    <servlet-name>UploadServlet</servlet-name>
    <servlet-class>com.timelessmind.ttms.server.UploadServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>UploadServlet</servlet-name>
    <url-pattern>/attachment</url-pattern>
</servlet-mapping> 
```

在代码中，我有一个`FormPanel`提交`FileUpload`：

```
form.setAction("/attachment");
form.setEncoding(FormPanel.ENCODING_MULTIPART);
form.setMethod(FormPanel.METHOD_POST); 
```

并提交按钮：

```
submitButton.addClickHandler(new ClickHandler() {
        @Override
        public void onClick(ClickEvent event) {
            form.submit();
        }
    }); 
```

提交完成处理程序：

```
Window.alert(event.getResults()); 
```

响应是这样的：

```
HTTP Status 404 -

type Status report

message

description The requested resource () is not available. 
```

请求的来源是一个空括号，我不知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T00:47:08.523

请检查您的 firebug 网络控制台以查看提交的表单的确切位置。

它肯定是提交`http://yoururl:8080/attachment`而不是`http://yoururl:8080/MyApp/attachment`

要解决您的问题，请尝试删除开头的斜杠：

```
form.setAction("attachment"); 
```

否则，添加您的应用程序上下文：

```
form.setAction("/MyApp/attachment"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T02:21:51.660

你也可以在action method( `http://yoururl:8080/MyApp/attachment`)中尝试完整的url

# ruby-on-rails - 骨干路由器未正确路由“新”路由

> ID：13963459
> 
> 赞同：0
> 
> 时间：2012-12-20T00:25:59.083
> 
> 标签：ruby-on-rails, backbone.js

我正在尝试将 Backbone 用于我最新的 Rails 项目，而我面临的最新问题是路线。

对于我的 Rails 路由，我让用户在登录后转到 /products (index_products_path)。

因此，我在 Backbone 中创建了以下路由。我打算为不同的“页面”（如邀请）创建其他主干路由器。

```
class Sample.Routers.ProductsRouter extends Backbone.Router

  routes:
    ""         : "index"
    ":id"      : "show"
    ":id/edit" : "edit"
    "new"      : "newProduct" 
```

“mydomain.com/products”调出索引视图。“mydomain.com/products/#/1”或“mydomain.com/products#1”显示产品 id = 1 的显示视图。

现在，问题在于“新”路径。当我尝试通过指向“mydomain.com/products#new”来显示“新”视图时，服务器抱怨它找不到 id=new 的产品。

我真的无法弄清楚为什么会发生这种情况。当我跟踪错误堆栈时，我可以看到它`Sample.Routers.ProductsRouter.ProductsRouter.show`正在被调用。似乎主干路由器没有正确路由这个......并且Rails服务器只是响应id = new的产品的“GET”请求......这可能是某种主干​​配置错误吗？

任何帮助将非常非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T01:01:40.327

Backbone 执行第一个匹配的路由。所以在你的情况下，把它`new`放在第一位。

```
 routes:
    ""         : "index"
    "new"      : "newProduct"
    ":id"      : "show"
    ":id/edit" : "edit" 
```

# javascript - 在另一个 iFrame 实例之上加载 iFrame 实例

> ID：13963462
> 
> 赞同：0
> 
> 时间：2012-12-20T00:26:08.037
> 
> 标签：javascript, jquery, html, css, iframe

我的页面上有 3 个 iFrame。第一个 iFrame 占据页面左侧的 45%。第二个 iFrame 占据页面右侧的 45%。我想加载占据页面中间 45% 的第三个 iFrame（它将最后加载并部分覆盖其他 2 个 iFrame）。添加第 3 个 iFrame 后，我注意到它没有加载到其他 2 个 iFrame 之上，而是将自身推到了页面底部。有没有办法让 iFrame 加载到另一个 iFrame 之上？

我的 CSS：

```
.right {
        float: right;
        width: 60%;
        height: 100%;
        background-color: #006400;
       }
#iframe1 {
          width: 181%; 
          height: 182%; 
          top: 50%;
          left: 50%;
          zoom: 1.00; 
          -moz-transform: scale(0.55); 
          -moz-transform-orgin: 0 0;
          -o-transform: scale(0.55); 
          -o-transform-origin: 0 0; 
          -webkit-transform: scale(0.55); 
          -webkit-transform-origin: 0 0;
         }
#frame1 {
              float: left;
              width: 45%; 
              height: 75%; 
              top: 10%;
              left: 2%;
              margin: 10px; 
              border-style: solid; 
              border-width: 10px;
         }         
#frame2 {
              float: right;
              width: 45%; 
              height: 75%; 
              top: 10%;
              right: 2%;
              margin: 10px; 
              border-style: solid; 
              border-width: 10px;
         }
.frame3 {
            float: center;
            width: 45%;
            height: 75%;
            top: 10%;
            left: 27.5%;
            margin: 10px;
            border-style: solid;
            border-width: 10px;
        } 
```

我的 HTML：

```
<div class = 'right'>
<div id = 'frame1'>
      <iframe id = 'iframe1' src = 'http://www.wsj.com'></iframe></div>
<div id = 'frame2'>
      <iframe id = 'iframe1' src = 'http://www.wsj.com'></iframe></div>
<div id = 'frame3'>
      <iframe id = 'iframe1' src = 'http://www.wsj.com'></iframe></div>
<br><br><br>
</div>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T00:31:55.307

```
.frame3{
    position:absolute;
        top:10%;
        left:27.5%;
    width:45%;
    //other properties
} 
```

由于绝对位置，您需要确保它限制在其父容器内（如果这*是*预期效果）

```
.right{
    position:relative;
    //other properties
} 
```

# mysql - 将csv文件加载到表中时如何忽略字段内的comman

> ID：13963463
> 
> 赞同：1
> 
> 时间：2012-12-20T00:26:10.240
> 
> 标签：mysql

我有一个`csv`文件。我需要将内容加载到表格中。有些字段里面包含逗号，但我在这些字段中遇到错误。该命令会截断此逗号中的字段。如何改进我的命令以忽略字段值内的逗号。这是我的 SQL 命令：

```
LOAD DATA INFILE 'C:/myfile.csv'
IGNORE
INTO TABLE db.table
COLUMNS TERMINATED BY ','
OPTIONALLY ENCLOSED BY '"'
ESCAPED BY '\\'
LINES TERMINATED BY '\n'
(col1,col2,col3,col4,col5,col6); 
```

编辑：我的 csv 文件字段不包含在`"`

编辑：csv中的数据示例：

```
col1  |  col2  |  col3  |  col4  |  col5  |  col6
------------------------------------------------------------
1111  |  2222  |  3333  |  4444  |  5555  |  firstname, lastname 
```

在 MySQL 中存储`col6`为：

```
"firstname, lastname" .. followed by all the next fields until the column is filled and truncated. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T01:24:23.610

你有两个选择

## 选项1

要求一个有效的[RFC 4180](http://www.google.de/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDsQFjAA&url=https://www.rfc-editor.org/rfc/rfc4180&ei=FmjSUKi3GYrAswaEy4DACQ&usg=AFQjCNEAoOXkSPh2XnTMXwniiQ4zh527iA&sig2=MolFFrutxV6p0XqViewGBQ&bvm=bv.1355534169,d.Yms) CSV 文件，而不是一个好的文本文件

## 选项 2

其次是[LOAD DATA INFILE](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)语法，你可以这样做

```
LOAD DATA INFILE 'C:/myfile.csv'
IGNORE
INTO TABLE db.table
COLUMNS TERMINATED BY ','
OPTIONALLY ENCLOSED BY '"'
ESCAPED BY '\\'
LINES TERMINATED BY '\n'
( col1, col2, col3, col4, col5, @firstname, @lastname )
SET col6 = CONCAT_WS( ' ', @firstname, @lastname ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T18:54:48.557

这可以通过使用 Excel 宏来实现。使用以下步骤：

1.  打开 Visual Basic 编辑器 (Alt+F11)。
2.  从编辑器转到：`Insert > Module`。
3.  粘贴如下所示的宏
4.  关闭脚本编辑器
5.  转到 Excel 并从以下位置运行您的宏：`Tools > Macro > Macros`。您应该看到一个名为`CSVFile`selected 的宏。单击运行。
6.  你会看到一个`Save As`窗口。输入工作表的名称并保存。新工作表将在每个字段中添加“”。

宏代码是：

```
Sub CSVFile()
Dim SrcRg As Range
Dim CurrRow As Range
Dim CurrCell As Range
Dim CurrTextStr As String
Dim ListSep As String
Dim FName As Variant
FName = Application.GetSaveAsFilename("", "CSV File (*.csv), *.csv")
ListSep = Application.International(xlListSeparator)
  If Selection.Cells.Count > 1 Then
    Set SrcRg = Selection
  Else
    Set SrcRg = ActiveSheet.UsedRange
  End If
Open FName For Output As #1
For Each CurrRow In SrcRg.Rows
  CurrTextStr = ìî
For Each CurrCell In CurrRow.Cells
  CurrTextStr = CurrTextStr & """" & CurrCell.Value & """" & ListSep
Next
While Right(CurrTextStr, 1) = ListSep
  CurrTextStr = Left(CurrTextStr, Len(CurrTextStr) - 1)
Wend
Print #1, CurrTextStr
Next
Close #1
End Sub 
```

参考： http: [//www.markinns.com/articles/full/export_excel_csvs_with_double_quotes](http://www.markinns.com/articles/full/export_excel_csvs_with_double_quotes)

# macos - 如何使用 productbuild 构建具有自定义背景的 OS X 安装程序包？

> ID：13963465
> 
> 赞同：7
> 
> 时间：2012-12-20T00:26:17.580
> 
> 标签：macos, installation, packagemaker, productbuild

我有一个项目依赖于现已弃用的 PackageMaker 工具来为 OS X 创建安装程序。我正在努力更新它以使用[pkgbuild](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man1/pkgbuild.1.html)和[productbuild](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/productbuild.1.html)。我正在尝试通过将`--resources`标志传递给`productbuild`包含背景图像的目录来向安装程序添加自定义背景。我没有从`productbuild`命令中得到任何错误，但是当我在 Pacifist 中打开包时，我根本看不到我的资源。我尝试在 中引用背景图像`distribution.xml`，但似乎没有什么不同。我不知道接下来要尝试什么来调试它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-20T13:03:29.070

这是我的资源文件夹的样子：

![在此处输入图像描述](../Images/46197a6553268e41bc17a4fcc42f0972.png)

作为 cmd 参数我使用：`--resources /path/Resources`

由于我没有使用 PackageMaker GUI，而我的安装工具手动从各种零碎中创建了分发 XML 文件，我只能说您必须指定此 background.jpg 文件，以便它最终在分发 XML 文件中为：

```
<background file="background.jpg" alignment="topleft" scaling="none"/> 
```

即，尽管它位于 en.lproj 文件夹中，但不应使用路径指定该文件。

# javascript - 验证时所有文本输入均为空白

> ID：13963466
> 
> 赞同：0
> 
> 时间：2012-12-20T00:26:24.863
> 
> 标签：javascript, jquery

我的问题是，如果每个问题有任何空白文本输入，我如何才能显示验证消息？

这是一个小提琴，因此您可以对其进行测试：http: [//jsfiddle.net/cbyJD/87/](http://jsfiddle.net/cbyJD/87/)

下面是validation()函数代码：

```
function validation() {

    // only keeping track of the final message
    var alertValidation = "",
        // toggle for showing only one error
        showOnlyOneError = true;

    $("input[data-type='qmark']").each(function(i) {  
        var questions = $(this).attr("data-qnum");
        var marks = parseInt($("[class*=q" + (i+1) + "_ans_text]").text()); 
        var txtinput = $(this).val(); 

        // the message for this question
        var msg = '';

        if (txtinput == '') {
            msg += "\n\u2022 You have not entered in a value in all the Indivdiaul Marks textbox \n";
        }

        if (marks < 0) {
            msg += "\n\u2022 Your Total Marks Remaining does not equal 0 \n - You Need To Remove " + Math.abs(marks) +  " Marks";   
        } else if (marks > 0) {
            msg += "\n\u2022 Your Total Marks Remaining does not equal 0 \n - You Have " + marks +  " Marks Remaining";   
        }

        // if there is an error for the question, add it to the main message
        if (msg.length) {
            alertValidation += alertValidation.length ? '\n\n' : '';
            alertValidation += "You have errors on Question Number: " + questions + "\n";
            alertValidation += msg;
            // stop if we only care about the first error
            return !showOnlyOneError;
        }
    });

    // show the error messages
    if (alertValidation != "") {
        alert(alertValidation);
        return false;
    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T00:34:15.713

这是您的“第一次错误后返回”。如果您填写了第一个框但它有其他错误，您将只收到这些错误 - 第二个框不会被检查，您永远不会发现它是空的。最明显的解决方法是`showOnlyOneError = false`.

如果这不是您想要的，那么您必须`showOnlyOneError`更详细地解释所需的语义。

（另外，提示：将错误推入数组然后将它们加入`"\n\n"`比每次检查消息字符串是否为空要轻松得多。）

# php - MySQL JOIN 许多表将条件列表放入一个表中

> ID：13963467
> 
> 赞同：1
> 
> 时间：2012-12-20T00:26:31.637
> 
> 标签：php, mysql, join, where

我试图弄清楚如何使用 ONE table JOIN 来获取车辆 MAKE、MODEL、YEAR 和 TRIMS 标准的列表，供客户搜索。

已经有**主密钥**表，管理员可以从中选择一系列车辆选项，并将有关该产品的这些车辆相关详细信息输入到**PRODUCT**表中。

我现在想为购物者生成一个列表，该列表仅反映可用的车辆详细信息选择 - 基于管理员在**PRODUCTS表中输入的内容。**

我一直在使用 PHP 循环/迭代 MAKE MODEL TRIMS 表，并在 PRODUCTS 表中搜索 PRODUCTS 表中是否存在 MAKE MODEL YEAR TRIM**类型**。但它需要对 PRODUCTS 表进行大约 800 次单独调用。

据了解，这**不是**最佳实践，可能会导致各种问题 - 对数据库进行多次调用并且效率不高。

我在另一个问题中被告知

[https://stackoverflow.com/questions/13960571/sanity-check-mysql-whats-reasonable-800-calls-to-the-database-in-one-second](https://stackoverflow.com/questions/13960571/sanity-check-mysql-whats-reasonable-800-calls-to-the-database-in-one-second)

这可以通过使用**JOIN**和**WHERE**语句的一次调用来完成。

我以前使用过表 JOINS，但不知道如何通过调用这么多 MAKES、MODELS、YEARS、TRIMS 来生成一份可用的 MAKES、MODELS、YEARS、TRIMS 标准列表供购物者选择。

我会很感激我能从你的例子中学到的任何东西:)

**以下是用于将车辆相关详细信息添加到产品条目记录的管理员主密钥选择表示例：**

* * *

表：**制作**

```
| Id | MAKE      | // Admin table for selecting products related vehicle make 
------------------
| 1  | FORD      |
| 2  | CHEV      |
| 3  | GMC       |
| 4  | HONDA     |
etc. 
```

表：**福特**

```
| Id | MODEL     | // Admin table for selecting products related vehicle model 
------------------
| 1  | F150      |
| 2  | ESCAPE    |
| 2  | EXPLORER  |
etc. 
```

表：**FORD_F150_YEARS_TRIMS**

```
| Id | YEARS|                  TRIMS                      |  // Admin table for selecting products related vehicle year and trim(s)
--------------------------------------------
| 1  | 1999 | 1999_SPORT+1999_SPORTRAC+1999_XLT+1999_XLS  |
| 2  | 2000 | 2000_XLT+2000_XLS+2000_LTD+2000_EDDIE_BAUER |
| 3  | 2001 | 2001_SPORTRAC+2001_XLT+2001_LTD             |
etc. 
```

* * *

**这是管理员输入产品/车辆详细信息的产品表：**

表：**产品**

```
| PRODUCT_ID  | MAKE          |          MODELS         |      YEARS       |                                     TRIMS                                               |
----------------------------------------------------------------------------------------------------------------------------------------------------------------------
| 123456      | FORD FORD GMC |   F150 ESCAPE CANYON    |  2000 2001 1999  | FORD_F150_1999_SPORT+FORD_F150_1999_SPORTRAC+GMC_CANYON_1999_LTD+GMC_CANYON_1999_LTD    |
| 123457      | FORD GMC CHEV | F150 EXPLORER SILVERADO |  2000 2010 2010  | FORD_F150_2001_XLT+FORD_F150_2001_LTD+GMC_CANYON_2010_XLT+CHEV_SILVERADO_1500_2010_LTD  |
etc. 
```

我想要做的是 - 对**PRODUCTS**表进行查询，我可以在其中生成一个表或列表，其中仅列出有产品的**车辆类型。**

因此，如果**PRODUCTS**表中没有适合**带有**SPORTRAC**装饰的****2001 FORD F150**的产品- 那么我不想让购物者选择带有**2001 FORD F150的****SPORTRAC** ，但我确实想给他们选择**2001 福特 F150**与**XLT** + **LTD**

 ******所以真的 - 我只是想消除购物者对不存在的产品车辆细节的选择。

有人告诉我，这可以通过对数据库的一次 MySQL 调用来完成。有人告诉我，与其遍历所有**品牌、型号**和**装饰**并单独调用 PRODUCTS 表 - 我可以以某种方式使用表连接和 while 语句来获取所有潜在的**MAKE MODEL TRIMS**选项的列表，这些选项可供基于客户的客户使用仅关于 PRODUCTS 表中的内容

我知道如何通过调用 PRODUCTS 表然后循环并使用 PHP 清除结果中的重复项来做到这一点。但是有数以千计的产品，而且这些产品可以增长——所以我正在寻找实现这一目标的最佳实践方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T00:48:51.737

好吧，看来您的首要问题是您拥有这些不同的表，但您没有以关系方式使用它们。您真的应该花一些时间来学习如何正确规范您的表格。作为一般准则，您应该真正考虑现实世界中的项目/属性如何相互关联，并通过正确的主键和外键使用来表达这种关系。

您的产品应该通过各种主键 ID 与品牌、型号、装饰等相关联，而不是通过复制产品表中的数据。例如，您也不应该有一个“福特”表，而应该只是一个带有“模型”的表。

作为一个示例，我可能有这样的架构

```
models
---------
model_id
make_id
model

makes (Make is really just a property of the model of car, and could possibly be de-normalized into models table. Here I am showing it as separate table to show a fully normalized example.)
---------
make_id
make

trims ('SPORT+XLS' unless those represent a specific trim combination.  Each different trim package should have its own row)
--------
trim_id
trim

products (I am assuming that a model and year define a product, by looking at your example data)
--------
product_id
year
model_id

product_trims (many-to-many table expressing relation of products to trims - you could have multiple rows with same product_id and different trim id)
-------------
product_id
trim_id 
```

如果您真的想将产品定义为年份、型号和装饰的组合，则可以消除 product_trims 表，而只需像这样修改产品表

```
product
-------------
product_id
year
model_id
trim_id 
```

然后，您可以跨连接查询以获取所需的数据。例如，假设用户指定了型号和年份。查询可能如下所示（假设同时使用 products 和 products_trim 表）

```
SELECT p.product_id, p.year, ma.make, mo.model, t.trim
FROM
products AS p
INNER JOIN models AS mo ON p.model_id = mo.model_id
INNER JOIN makes AS ma ON mo.make_id = ma.make_id
INNER JOIN product_trims AS pt ON p.product_id = pt.product_id
INNER JOIN trims AS t ON pt.trim_id = t.trim_id
WHERE p.year = '?' AND p.model_id = ? 
```

当然，您需要正确索引用于连接和任何 WHERE 或 ORDER BY 条件的所有字段。******

# html - 右块漂浮在底部

> ID：13963475
> 
> 赞同：0
> 
> 时间：2012-12-20T00:27:15.803
> 
> 标签：html, css

我是一个完整的新手，正在以下页面上工作：http: [//mockingbirdagency.com/thebox/tvshow.html](http://mockingbirdagency.com/thebox/tvshow.html)

右拉容器（用 float:right 固定右侧的块）漂浮在底部，我必须给它这个：

```
#pull-right-tv {
    float: right;
    margin-top: -1362px;
    width: 330px;
} 
```

所以它会从页面顶部开始。现在每次，我修改一些东西，块移动，这是一个痛苦的屁股。有什么办法吗？我做错什么了 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T00:34:01.590

稍微调整一下你的 CSS：

```
#pull-right-tv {
    margin-top: -1362px;  /* Delete this */
}

#pull-left {
    float: left;          /* Add this */
    width: 600px;         /* Change this from 960 to 600
                             so it won't push the other column out of the way */
}

#content {
    overflow: auto;       /* Add this so the parent retains its height
                             when its children are floating */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T00:33:42.913

我要做的是将左列括在一个 div 中，就像您对右列所做的那样，然后在左列上放置一个 float:left 而不是在右列中向右浮动。至少对我来说，向右浮动的东西总是容易出错。

此外，我会非常小心地使用负边距，就像你现在所做的那样，正如你所说的那样，@$$ 很痛苦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T00:49:05.860

这里发生了几个问题..

1.  第 165 行 - 类“”中缺少最后一个“s”
2.  设置向左拉的宽度。
3.  将 pull-right 更改为“float:left”。虽然您可以在此处浮动到右侧，但我发现学习将元素向同一方向浮动会更好。当您开始开发响应式布局时，这将非常方便（您现在应该开始学习！）
4.  将适当的 margin-left 设置为您的 pull right 容器。

这解决了您的问题：

```
.pull-left {
    float: left;
    width: 610px;
}

#pull-right-tv {
    float: left;
    margin-left: 20px;
    width: 330px;
} 
```

此外，请始终尝试在命名约定中使用一致性。例如，这些是您的主要内容容器，因此我会使用 #content 和 #sidebar 之类的东西，这样当您必须回到代码中时，它会很容易识别。

最后提到使用 ID 或 CLASS ......一个简单的经验法则是将 ID 用于任何将使用一次的东西，例如上面的 2 个选择器。所有其他在页面中多次引用的都应使用 CLASS 选择器。

# mongodb - 如何在 Mongoid 中获取用于调试 map/reduce 的打印输出？

> ID：13963483
> 
> 赞同：6
> 
> 时间：2012-12-20T00:27:57.637
> 
> 标签：mongodb, mapreduce, mongoid, mongoid3

我正在用 Mongoid 3.0 编写 map/reduce 操作。我正在尝试使用该`print`语句来调试 JS 函数。这是[来自 MongoDB 文档的故障排除建议](http://docs.mongodb.org/manual/applications/map-reduce/#troubleshooting-map-reduce-operations)，例如：

```
reduce = %Q{
   function(user_id, timestamps) {
      var max = 0;
      timestamps.forEach(function(t) {
        var diff = t.started_at - t.attempted_at;
        if (diff > max) { max = diff; }
      });
      print(user_id + ', ' + max);
      return max;
    };
  }

 MyCollection.all.map_reduce(map, reduce).to_a 
```

不幸的是，该语句的输出`print`既没有显示在控制台上，也没有显示在日志上——似乎这在 DB、驱动程序、Moped 或任何中间层之间的某个地方被抑制了。有没有办法打开这个？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-20T00:55:10.247

结果是`print`语句记录到 MongoDB 服务器日志。在 OSX 上，即`/usr/local/var/log/mongodb/mongo.log`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-20T00:48:35.703

根据发布者的评论，第一步是确保您正在查看`mongod`服务器日志。在本地执行此操作的最简单方法是访问鲜为人知的 HTTP 接口到`mongod`: `http://localhost:28017`。即使服务器未安装在其默认位置，这也将起作用，因此，日志不会位于特定于操作系统的默认位置，例如，`/usr/local/var/log/mongodb/mongo.log`在 Mac OS X 上。有关如何以非标准方式访问它的信息，请参阅[文档](http://www.mongodb.org/display/DOCS/Http+Interface)部署环境。

如果这不能解决您的问题，您将不得不更深入地调试 MongoDB M/R，这很棘手，原因如下：

1.  M/R 作业在与数据库其余部分隔离的 JS 范围内执行
2.  M/R 作业不能写入 M/R 输出文档以外的任何内容
3.  MongoDB 中的记录器可以自行决定向记录流发送什么

以下是基于我们在生产中广泛使用 Mongo M/R 的建议：

**提高日志记录级别**

突然间，一些以前看不见的`print`输出会出现。一次做一层，直到你开始看到它。

```
use admin
db.runCommand( { setParameter: 1, logLevel: 2 } ) 
```

日志级别从 0 到 5 不等。请参阅[setParameter](http://docs.mongodb.org/manual/reference/command/setParameter/)。您也可以在服务器启动时使用 -v、-vv、...、-vvvvv 执行此操作。

**将分析级别提高到最高 (2)**

我发现这很有用，尤其是与高日志级别结合使用时，因为它提供了可以以编程方式检查的数据耗尽（分析集合）。请参阅[文档](http://docs.mongodb.org/manual/tutorial/manage-the-database-profiler/)。

如果您正在运行一个非常大的 M/R 作业，这可能会对性能产生负面影响。

**通过 M/R 搭载调试输出**

这个想法很简单：在所有发出的文档中添加一个包含您需要的任何调试信息的对象数组，例如在`_debug`减少阶段，过滤 + 连接。这样，`_debug`数组将最终出现在您的输出集合中。如果您想快速找到特定问题，您甚至可以将它们编入索引。

希望这可以帮助。祝你好运！

# android - 如何从数组计算中显示高值

> ID：13963485
> 
> 赞同：2
> 
> 时间：2012-12-20T00:28:10.130
> 
> 标签：android

我正在尝试在android中使用确定性因子方法构建项目专家系统，但是在显示用户输入的最高值时遇到了麻烦。

这是我的代码：

```
public void diagn() {
    for (int i = 0; i < listCheckBox.size(); i++) {
        if (listCheckBox.get(i).isChecked()) {
            idGejala.add(listGejala.get(i).getId_gejala());
        }
    }
    for (int i = 0; i < idGejala.size(); i++) {
        Cursor kursor = db.getNilaiCFdanIDpenyakit(idGejala.get(i));
        while (!kursor.isAfterLast()) {
            Kaidah kaidahku = new Kaidah();
            kaidahku.setId_penyakit(kursor.getString(0));
            kaidahku.setNilai_CF(kursor.getDouble(1));
            kaidah.add(kaidahku);
            kursor.moveToNext();
        }
    }
    Penyakit penyakit;
    for (int i = 0; i < listPenyakit.size(); i++) {
        penyakit = listPenyakit.get(i);
        CfPenyakit cfpenyakit = new CfPenyakit();
        cfpenyakit.setId_penyakit(penyakit.getId_penyakit());
        cfpenyakit.setNama_penyakit(penyakit.getNama_penyakit());
        for (int j = 0; j < kaidah.size(); j++) {

            Kaidah kaidahku = kaidah.elementAt(j);

            if (penyakit.getId_penyakit().equals(kaidahku.getId_penyakit())) {
                cfpenyakit.addCF(kaidahku.getNilai_CF());
            }
        }
        if (cfpenyakit.getFinalCF() > 0)
            cf.add(cfpenyakit);

    }

    String[] penyakitku = new String[cf.size()];
    String[] cfku = new String[cf.size()];
    String[] idPenyakit = new String[cf.size()];
    for (int i = 0; i < cf.size(); i++) {
        CfPenyakit data = cf.elementAt(i);
        penyakitku[i] = data.getNama_penyakit();
        idPenyakit[i] = data.getId_penyakit();
        double orim = (data.getFinalCF()*100);

        cfku[i] = Double.toString(data.getFinalCF() * 100);
        cfku[i] = String.format("%.2f", orim) + "%";

    }

    db.close();
    Intent intent = new Intent(this, Diag2.class);
    intent.putExtra("penyakit", penyakitku);
    intent.putExtra("cf", cfku);
    intent.putExtra("idPenyakit", idPenyakit);
    startActivity(intent);
    finish();
} 
```

# java - 如何在java中的字符串中使用/？

> ID：13963487
> 
> 赞同：-10
> 
> 时间：2012-12-20T00:28:27.583
> 
> 标签：java

我想知道如何`/`在 java 中使用，因为它不认为它是一个简单的`/`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T00:29:15.417

您必须在字符串中将 \ 转义为 \\。/ 应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T00:36:59.110

`/`在 Java 中使用字符串没有问题。它只是工作。（如果它对您不起作用，那么您的代码中存在错误的可能性为 99.9999%。在 SSCCE 中向我们展示问题。）

如果你在谈论`\`......那是另一回事。该`\`字符是 Java 源代码中字符串（和字符）文字的转义字符。所以如果你想把一个（单个）反斜杠放到一个字符串中，你需要这样写：

```
 String message = "This string contains ONE backslash (\\)"; 
```

但是，这只适用于*文字*。在字符串的实际运行时表示中（例如上面），反斜杠是一个字符......而不是两个。同样，当您从文件或用户读取文本时，反斜杠将表示为一个字符......并且无需转义或取消转义即可将其放入字符串中。

常规字符串中反斜杠的转义仅适用于 Java 源代码中的字符串文字形式 ...。（正则表达式是另一回事......但我们不是在谈论那个。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T01:01:55.773

`/`可以在字符串中使用：`String string = "0/100"` 但是，`\`是一个转义键。这意味着下一个字母将确定它是什么特殊字符。例如，`\n`是`newline`。

要`\`在字符串中逐字使用，您必须使用`\\`.

例如

```
String string = "0\\100";
System.out.println(string); 
```

将打印`0\100`。

# c# - 特定表单关闭后如何打开表单？表单来自 C# 中的另一个项目？

> ID：13963489
> 
> 赞同：1
> 
> 时间：2012-12-20T00:28:31.620
> 
> 标签：c#, winforms

我在解决方案中有 2 个项目，我的主要项目是项目 1，在项目 1 主表单加载事件中，我从项目 2 运行表单，我的问题是如何在项目 2 的表单关闭后显示项目 1 的表单?

```
//Here is the form from project 2 will run on project 1 mains form load
    pp2.FormLoader frmLdr = new pp2.FormLoader();
                frmLdr.MdiParent = this;
                frmLdr.Show();

//the form from project 2 will automatically closes after a couple of seconds, after that this form should be automatically show. How can I possibly do this? Thanks!

                FormProcess frmSvrProc = new FormProcess();
                frmSvrProc.MdiParent = this;
                frmSvrProc.Show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T00:44:04.610

现在我明白了你的问题（除了你真的应该重命名那个表格的事实之外）

您可以订阅 Form_Closed 事件`frmLdr`

```
 pp2.Loader frmLdr = new pp2.Loader();
 frmLdr.MdiParent = this;
 frmLdr.FormClosed += new FormClosedEventHandler(frmLdrClosed);
 frmLdr.Show();
 .... 
```

并移动在事件处理程序中打开第二个表单的代码

```
 private void frmLdrClosed(object sender, System.EventArgs e)
 {
       FormProcess frmSvrProc = new FormProcess();
       frmSvrProc.MdiParent = this;
       frmSvrProc.Show();
 } 
```

# java - NetBeans IDE - 如何使用控制台运行 Java 应用程序

> ID：13963495
> 
> 赞同：4
> 
> 时间：2012-12-20T00:30:02.047
> 
> 标签：java, netbeans, command-line-arguments

我只是想知道 NetBeans 中有没有一种方法可以使用控制台参数启动 Java 应用程序（我的意思是 main 方法的默认输入）？我的意思是当您使用命令提示符手动运行应用程序时的效果：

```
>MyTestApp arg0 arg1 argN 
```

我找不到 IDE 功能，所以我需要你的建议。有没有办法以这种方式使用 NetBeans 运行应用程序？

PS NetBeans 6.5.1

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T00:32:00.733

右键单击您的项目名称，然后从菜单中选择“属性”。该窗口中的选项卡之一允许您设置命令行参数。我不记得我头顶上的确切一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-06T09:39:53.057

构建项目后，Netbeans 将在输出窗格中向您显示构建结果。只需复制指示主 jar 文件可执行文件位置的最后一行，例如：

`java -jar /home/abusada/NetBeansProjects/userInput/dist/userInput.jar`

在 Linux 上启动终端或在 Windows 上启动控制台并粘贴上面的内容。

按回车键运行您的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T01:03:54.187

你可以去那里`Run Configurations...`设置你的虚拟机设置。它应该在运行时传递给控制台。

# django - 在 Django 中预览之前编辑 FormPreview 表单数据

> ID：13963503
> 
> 赞同：1
> 
> 时间：2012-12-20T00:30:44.427
> 
> 标签：django, forms

我想在用户单击预览后但在再次显示给他们之前更改从表单收集的数据。

```
class StoryForm(forms.Form):
    title = forms.CharField()
    story = forms.CharField(widget=forms.Textarea)

class StoryFormPreview(FormPreview):

    def done(self, request, cleaned_data):
        # Do something with the cleaned_data, then redirect
        # to a "success" page.
        return HttpResponseRedirect('/form/success') 
```

在显示预览之前，我想附加到用户为故事字段输入的任何内容，并添加“由某某带给您”。我该怎么做呢？我用 process_preview 和 preview_post 方法玩了很多，但什么都做不了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:26:40.127

据我了解，您可以修改它

```
def process_preview(self, request, form, context):
    """
    Given a validated form, performs any extra processing before displaying
    the preview page, and saves any extra data in context.
    """
    pass 
```

升级版：

我发现只有使用 form clean 方法的解决方案：

```
class StoryForm(forms.Form):
    ...
    def clean_story(self):
        self.cleaned_data['story'] = ...
        return self.cleaned_data['story']

class StoryFormPreview(FormPreview):

    def process_preview(self, request, form, context):
        preview_data = {}
        for key, value in form.cleaned_data.iteritems():
            preview_data[key] = value

        context['preview_data'] = preview_data

formtools/preview.html

{% for label, data in preview_data.iteritems %}
<tr>
<th>{{ label }}:</th>
<td>{{ data }}</td>
</tr>
{% endfor %} 
```

# php - 如何从现有的 Eclipse PDT 中删除 Zend Studio 组件？

> ID：13963504
> 
> 赞同：3
> 
> 时间：2012-12-20T00:30:46.397
> 
> 标签：php, eclipse, zend-studio, eclipse-pdt

我安装了 Eclipse PDT Indigo。我从zend的网站下载了它。从第一天开始，它就提示我尝试原始产品 Zend Studio。但 Eclipse PDT 实际上已经发挥了多年的作用。但是有一天我安装了它。只需单击一个诱人的按钮。

现在我不想使用它。还有15天。但是如何删除它？从软件中心我尝试卸载它。但是我该怎么做呢？

### 我尝试了什么？

我打开了帮助菜单。有“安装新软件”。没有什么比“卸载”更重要的了。我虽然在“安装新软件”对话框中可能有一种方法可以取消选择它们。但不是。不可能。

![在此处输入图像描述](../Images/f03bf70356609fef76c9490a2b927272.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T00:35:40.983

> 在 Indigo/3.7 下，“Help > About Eclipse > Installation Details > Installed Software tab > Uninstall...”选项有效。对于一些。

*来源：* [常见问题解答 如何删除插件？](http://wiki.eclipse.org/FAQ_How_do_I_remove_a_plug-in%3F)

请让我知道这是否解决了您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T19:06:48.373

我去了 zend-eclipse-php/plugins 目录并从那里删除了所有 com.zend 东西（文件和目录）。不知道发生了什么，但 Eclipse 停止了对许可证的窃听。而且不知道 org.zend 是什么东西——至少名字暗示它不是商业的。

这几乎是摆脱不必要的 Eclipse 插件的标准方法。

# c# - 如何保存表单设置？

> ID：13963506
> 
> 赞同：2
> 
> 时间：2012-12-20T00:30:54.503
> 
> 标签：c#, winforms, serialization

我只是想知道是否有人对如何保存 C# Winform 设置有任何意见？

目前，我有一个包含各种单选按钮、目录浏览器、日期选择器等的表单。我想知道将这些设置保存到可以在以后加载的外部文件的最佳策略是什么。因此，基本上每个配置都可以加载、执行，然后加载另一个配置。此外，配置可以跨安装/用户传递。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T00:40:24.643

应用程序范围设置是只读的，只能在设计时或通过在应用程序会话之间更改 .exe.config 文件来更改。但是，用户范围设置可以在运行时编写，就像您更改任何属性值一样。新值在应用程序会话期间持续存在。您可以通过调用 Settings.Save 方法在应用程序会话之间保留对用户设置的更改。这些设置保存在 User.config 文件中。

在运行时写入和保留用户设置

```
Access the user setting and assign it a new value, as shown in the following example:

Properties.Settings.Default.myColor = Color.UserGreen; 
```

如果要在应用程序会话之间保留对用户设置的更改，请调用 Save 方法，如以下代码所示：

```
Properties.Settings.Default.Save(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T00:39:35.923

我用一个包含所有设置的类或结构解决了这个问题。我的表单类有一个接受这种设置实例的构造函数。

此设置类/结构正在实现 ISerializable。因此，您可以轻松地将其保存到文件中并从中加载。

到目前为止，这不是最好的方法，但它很容易实现。

# scala - 在一个模式中多次使用相同的变量

> ID：13963507
> 
> 赞同：6
> 
> 时间：2012-12-20T00:30:56.233
> 
> 标签：scala, pattern-matching

我希望能够在一个模式中多次使用单个变量，这样只有在所有地方都存在相同的值时它才会匹配，例如

```
list match {
  case x :: x :: xs => // recurse
} 
```

这会匹配`List(1,1,2)`但不会匹配`List(1,2,1)`。但这不能与`error: x is already defined as value x`.

在研究这个问题时，我发现我也可以在 case 子句中包含一个守卫，所以我可以这样做

```
list match {
  case x1 :: x2 :: xs if x1==x2 => // recurse
} 
```

这似乎以相同的方式工作（确实如此，对吗？）。这很好，但如果我想在很多地方都获得相同的价值，它看起来就不会那么干净了，比如

```
list match {
  case x1::x2::x3::x4::xs if x1==x2 && x2==x3 && x3==x4 => // recurse
} 
```

有没有更优雅的方法可以做到这一点？

* * *

一些注意事项：是的，我只是在学习 scala，如果不清楚，所以我不确定这是我真正*想做*的事情，但我只是对*可能*的事情感兴趣。在这方面，我并不是真的在寻找一个完全不同的解决方案，比如`takeWhile`or之类`filter`的，但更多的是对模式匹配特别感兴趣。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T00:41:33.447

Scala 的匹配并没有提供那么大的灵活性（这可能是一件好事，因为人们必须意识到无意的变量重用引起的错误）。

如果您有大量相同的项目，您可能需要考虑嵌套匹配（但请注意，您不会在内部匹配失败后在外部匹配之后完成，因此您必须在本地处理所有内容）：

```
list match {
  case x :: rest => rest match {
    case `x` :: `x` :: `x` :: xs => println("Four of the same")
    case _ => println("Well, nonempty at least")
  }
  case _ => println("Boring, there's nothing here!")
} 
```

注意反引号，意思是“我们已经有了这个变量，检查它，不要设置它！”。

或者，如果您有重复使用的专门功能，您可以创建自定义匹配器：

```
object FourOf {
  def unapplySeq(xs: List[Int]): Option[(Int, List[Int])] = xs match {
    case x :: y :: z :: a :: rest if x==y && y==z && z==a => Some((x,rest))
    case _ => None
  }
} 
```

然后在需要复杂模式时使用它：

```
list match {
  case FourOf(x,rest) => println("four of the same")
  case x :: more => println("Nonempty")
  case _ => println("Yawn")
} 
```

这些都不像您显然希望的那样整洁和灵活，但话又说回来，我不确定在 match 语句中分配和测试*同一个变量*之间切换是否是编写清晰代码的好方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T00:41:42.970

对于许多重复，您可以使用稳定的标识符进行比较（而不是捕获一个值）：

```
val x = list.head 
list match {
  case `x`::`x`::`x`::`x`::xs => ....
} 
```

但请注意，这不适用于空列表（您只是无法掌握它）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T03:57:53.607

我认为雷克斯的回答很震撼。我是`unapplySeq`. 但是，如果您的主要烦恼只是`==`每个守卫中的 's 序列，那么这是一个不那么聪明且可能浪费的替代方案。因此，本着[TMTOWTDI](http://en.wikipedia.org/wiki/There%27s_more_than_one_way_to_do_it)精神：

```
def same[A](xs: A*) = xs forall (xs.head==)

// Then in your pattern match,

list match {
  // case x1::x2::x3::x4::xs if x1==x2 && x2==x3 && x3==x4 => // recurse
  case x1::x2::x3::x4::xs if same(x1,x2,x3,x4) => // recurse
} 
```

我也喜欢 Om 的回答，所以这里有一个改编：

```
 list.headOption map (x => list match { 
   case `x`::`x`::`x`::`x`::xs => //...; 
   case _ => // ... 
 }) getOrElse {
   // do what you'd have done for an empty list...
 } 
```

# c# - 在 C# 中读取/写入结构化二进制数据的最佳方法是什么

> ID：13963508
> 
> 赞同：5
> 
> 时间：2012-12-20T00:30:56.937
> 
> 标签：c#

就像在 C 中一样，我们可以使用结构指针来读取或写入结构化的二进制数据，如文件头等，在 C# 中是否有类似的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T00:31:59.590

在我看来，使用[`BinaryReader`](http://msdn.microsoft.com/en-us/library/system.io.binaryreader.aspx)and [`BinaryWriter`](http://msdn.microsoft.com/en-us/library/system.io.binarywriter.aspx)over a[`MemoryStream`](http://msdn.microsoft.com/en-us/library/system.io.memorystream.aspx)往往是最好的方法。

解析二进制数据：

```
byte[] buf = f                     // some data from somewhere
using (var ms = new MemoryStream(buf, false)) {   // Read-only
    var br = new BinaryReader(ms);

    UInt32 len = br.ReadUInt32();
    // ...
} 
```

生成二进制数据：

```
byte[] result;
using (var ms = new MemoryStream()) {   // Expandable
    var bw = new BinaryWriter(ms);

    UInt32 len = 0x1337;
    bw.Write(len);
    // ...

    result = ms.GetBuffer();   // Get the underlying byte array you've created.
} 
```

* * *

它们允许您读取和写入大多数文件头等所需的所有原始类型，例如`(U)Int16, 32, 64`, `Single`, , 和,`Double`以及这些类型的数组。有对 s 的直接支持，但仅当 `byte``char``string`

> 该字符串以长度为前缀，一次编码为一个整数七位。

如果您以这种方式编写字符串，这对我来说似乎才有用`BinaryWriter`。但是，这很容易，假设您的字符串以 DWord 长度为前缀，然后是许多 ASCII 字符：

```
int len = (int)br.ReadUInt32();
string s = Encoding.ASCII.GetString(br.ReadBytes(len)); 
```

* * *

请注意，我*没有*将`BinaryReader`and`BinaryWriter`对象包裹在一个`using()`块中。这是因为，尽管它们是`IDisposable`，但它们`Dispose()`所做的只是调用`Dispose()`底层流（在这些示例中，是`MemoryStream`）。

由于所有`BinaryReader`/`BinaryWriter`都是围绕底层流的一组`Read()`/`Write()`包装器，所以我不明白它们为什么会这样`IDisposable`。当你尝试做正确的事情并调用`Dispose()`你所有的`IDisposable`s 时，这只是令人困惑，突然你的流被处理掉了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T00:40:22.727

要从二进制文件中读取任意结构的数据 (a `struct`)，您首先需要：

```
public static T ToStructure<T>(byte[] data)
{
    unsafe
    {
        fixed (byte* p = &data[0])
        {
            return (T)Marshal.PtrToStructure(new IntPtr(p), typeof(T));
        }
    };
} 
```

然后您可以：

```
public static T Read<T>(BinaryReader reader) where T: new()
{
    T instance = new T();
    return ToStructure<T>(reader.ReadBytes(Marshal.SizeOf(instance)));
} 
```

要写入，请将`struct`对象转换为字节数组：

```
public static byte[] ToByteArray(object obj)
{
    int len = Marshal.SizeOf(obj);
    byte[] arr = new byte[len];
    IntPtr ptr = Marshal.AllocHGlobal(len);
    Marshal.StructureToPtr(obj, ptr, true);
    Marshal.Copy(ptr, arr, 0, len);
    Marshal.FreeHGlobal(ptr);
    return arr;
} 
```

...然后只需使用`BinaryWriter`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T00:45:39.637

这是一个简单的示例，展示了如何在文件中读取和写入二进制格式的数据。

```
using System;
using System.IO;
namespace myFileRead
{
    class Program
     {
       static void Main(string[] args)
       {
           // Let's create new data file.
           string myFileName = @"C:\Integers.dat";
            //check if already exists
            if (File.Exists(myFileName))
               {
                Console.WriteLine(myFileName + " already exists in the selected directory.");

                return;
            }

            FileStream fs = new FileStream(myFileName, FileMode.CreateNew);

            // Instantialte a Binary writer to write data

            BinaryWriter bw = new BinaryWriter(fs);

            // write some data with bw

            for (int i = 0; i < 100; i++)

            {
                    bw.Write((int)i);
            }

            bw.Close();
            fs.Close();

            // Instantiate a reader to read content from file
            fs = new FileStream(myFileName, FileMode.Open, FileAccess.Read);

            BinaryReader br = new BinaryReader(fs);

            // Read data from the file

            for (int i = 0; i < 100; i++)
            {
                //read data as Int32 
                Console.WriteLine(br.ReadInt32());
            }
            //close the file 
            br.Close();
            fs.Close();           
       }

    }

} 
```

# java - ImageButton 的图像在 setLayoutParams 后变得模糊

> ID：13963510
> 
> 赞同：3
> 
> 时间：2012-12-20T00:31:36.983
> 
> 标签：java, android, imagebutton

我在这里和其他地方环顾四周，但似乎找不到解决这个问题的方法。我对 Java 并不陌生，虽然这是我的第一个 android 应用程序。

我正在显示 3 个 ImageButton（一个在另一个上方），需要调整其大小以适应任何屏幕（即，7-10 英寸平板电脑到 4 英寸手机）。我已经弄清楚了这个逻辑，但是我遇到的问题是 7''+ 设备上的图像质量非常糟糕。这是我的xml的代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:id="@+id/mainLayout" >

<ImageButton
    android:id="@+id/btn_god"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:background="@null"
    android:src="@drawable/godtext" />

<ImageButton
    android:id="@+id/btn_growth"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:layout_centerHorizontal="true"
    android:background="@null"
    android:src="@drawable/growthtext" />

<ImageButton
    android:id="@+id/btn_service"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_alignParentBottom="true"
    android:background="@null"
    android:src="@drawable/servicetext" /> 

</RelativeLayout> 
```

这是我活动的相关部分：

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    int version = VERSION.SDK_INT;
    int height = 0;
    int width = 0;
    if (version < 13){
        DisplayMetrics displaymetrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
        height = displaymetrics.heightPixels;
        width = displaymetrics.widthPixels;
    } else {
        Display display = getWindowManager().getDefaultDisplay();
        Point size = new Point();
        display.getSize(size);
        width = size.x;
        height = size.y;
    }

    /**
     * Creating all buttons instances
     * */
    // Dashboard God button
    ImageButton btn_god = (ImageButton) findViewById(R.id.btn_god);
    btn_god.setAdjustViewBounds(true);
    ViewGroup.LayoutParams params = btn_god.getLayoutParams();
    params.height = height/4;
    params.width = params.height;
    btn_god.setLayoutParams(params);

    // Dashboard Growth button
    ImageButton btn_growth = (ImageButton) findViewById(R.id.btn_growth);
    btn_growth.setAdjustViewBounds(true);
    params = btn_growth.getLayoutParams();
    params.height = height/4;
    params.width = params.height;
    btn_growth.setLayoutParams(params);
    btn_growth.setImageResource(R.drawable.growthtext);

    // Dashboard Service button
    ImageButton btn_service = (ImageButton) findViewById(R.id.btn_service);
    btn_service.setAdjustViewBounds(true);
    params = btn_service.getLayoutParams();
    params.height = height/4;
    params.width = params.height;
    btn_service.setLayoutParams(params); 
```

我想做的是拍摄高分辨率图像，并将其缩小以适应较小的屏幕。但是，它似乎正在拍摄低分辨率图像并将其放大以适应更大的屏幕。有没有人遇到过类似的问题？你是怎么解决的？我很感激任何回应！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:42:45.470

```
xlarge screens are at least 960dp x 720dp
large screens are at least 640dp x 480dp
normal screens are at least 470dp x 320dp
small screens are at least 426dp x 320dp
Generalised Dpi values for screens:

ldpi Resources for low-density (ldpi) screens (~120dpi)
mdpi Resources for medium-density (mdpi) screens (~160dpi). (This is the baseline    density.)
hdpi Resources for high-density (hdpi) screens (~240dpi).
xhdpi Resources for extra high-density (xhdpi) screens (~320dpi).

Therefore generalised size of your resources (assuming they are full screen):

ldpi
Vertical = 426 * 120 / 160 = 319.5px
Horizontal = 320 * 120 / 160 = 240px
mdpi
Vertical = 470 * 160 / 160 = 470px
Horizontal = 320 * 160 / 160 = 320px
hdpi
Vertical = 640 * 240 / 160 = 960px
Horizontal = 480 * 240 / 160 = 720px
xhdpi
Vertical = 960 * 320 / 160 = 1920px
Horizontal = 720 * 320 / 160 = 1440px

px = dp*dpi/160 
```

这就是我从这个网站上得到的，也许它会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T00:54:50.403

在您的可绘制文件夹中，您可以为不同的屏幕密度声明不同的图像。我会好好阅读[这篇文章](http://developer.android.com/guide/practices/screens_support.html)。

基本上，您将需要为不同的屏幕尺寸声明具有不同后缀的单独可绘制文件夹。例如，对于超高密度屏幕分辨率，您需要一个 drawable-xhdpi 文件夹，其中包含所有高分辨率图像。Android 会根据设备的屏幕密度自动选择正确的图像。

# fonts - Mono中的字体描述

> ID：13963513
> 
> 赞同：0
> 
> 时间：2012-12-20T00:31:47.500
> 
> 标签：fonts, mono, monodevelop

我想在 windows 上的单声道开发中设置标签字体。但我是单声道的初学者，我在属性（如 Visual Studio）上看不到字体。如何更改 Mono 上的字体描述？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T09:19:36.247

只是用代码。

```
public static Pango.FontDescription Font (string Family, int Size,Pango.Style Sty=Pango.Style.Normal)
    {
        Pango.FontDescription F=new Pango.FontDescription();
        F.Family=Family;
        F.Size=Size;
        F.Style=Sty;
        return F;
    } 
```

和

```
lbl_Inf.ModifyFont(Font("Arial",23)); 
```

# php - jQuery Dialog Modal（一页有多个时只打开一个）

> ID：13963514
> 
> 赞同：0
> 
> 时间：2012-12-20T00:31:46.767
> 
> 标签：php, jquery, ajax, codeigniter

好的，我正在循环浏览我的新闻帖子以及您可以评论的每个帖子。因此，我为每个新闻发布构建了一个对话框模式（我认为这很愚蠢），但这是我可以保持 news_id 循环并将其传递到表单操作属性的唯一方法。

无论如何，希望这不是什么大不了的事，但是每当我单击评论链接（.comment）时，它都会打开所有重复的对话框模式，因为它是同一个类。如何使其仅打开具有与他们单击的评论链接相同的新闻 id 的对话框模式，以便我可以根据新闻 id 插入他们的评论？

这是我的新闻循环的 HTML（使用 CodeIgniter）

```
<div id="news">
    <?php foreach($news_array as $news) { ?>

    <div class="news_box">
        <h3 align="right">Peanut - December 18, 2012</h3>
        <p align="right"><?php if($admin) { echo anchor('admin/news/edit/'.$news->id, 'Edit').' | '.anchor('admin/news/delete/'.$news->id, 'Delete', array('onClick' => "return confirm('Are you sure you want to delete this post?')")); } ?></p>
        <h2><?php echo $news->title; ?></h2>
        <p><?php echo nl2br($news->body); ?></p>
        <p align="right"><?php echo anchor('news/comment/'.$news->id, 'Comment', array('class' => 'comment', 'onclick' => 'return false')); ?></p>

        <div class="comment-form" title="Comment">
            <?php echo form_open('news/comment/'.$news->id, array('class' => 'form')); ?>
            <fieldset>
                <legend>Please Leave A Comment</legend>
                <div class="row clearfix">
                    <div class="full control-groups">
                        <div class="clearfix">
                            <div class="form-status"></div>
                            <?php echo form_label('Comment', 'comment'); ?>
                        </div>
                        <?php echo form_textarea(array('name' => 'comment', 'id' => $news->id, 'maxlength' => 200, 'placeholder' => 'Please enter 5 - 200 characters.', 'value' => set_value('comment'))); ?>
                    </div>
                </div>
            </fieldset>
            <? echo form_close(); ?>
        </div>

        <hr color="orange" />
    </div>
    <?php } ?>
</div> 
```

然后这是我的 Javascript（只显示重要的东西，所以它不会全部混在一起）：

```
$('.comment-form').dialog({
    autoOpen: false,
    height: 380,
    width: 900,
    modal: true,
    buttons: {
        "Comment": function() {
            form = $('.form');
            $.ajax({
                type: 'POST',
                url: form.attr('action'),
                data: form.serialize(),
                type: (form.attr('method'))
            });
        },
        Cancel: function() {
            $(this).dialog('close');
        }
    }
});
$('.comment').click(function() {
    $(this).closest('.comment').find('.comment-form').dialog('open');
}); 
```

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:21:18.363

我会搜索父容器，然后获取适当的评论表单：

```
$('.comment').click(function() {
    $(this).closest('div.news_box').find('.comment-form').dialog('open');
}); 
```

鉴于`[.closest()][1]`：

1.  从当前元素开始
2.  向上移动 DOM 树，直到找到匹配的选择器
3.  返回的 jQuery 对象包含原始集合中每个元素的零个或一个元素

您可能在上面有一些包含元素，`div.news_box`其类为`.comment`. 上面的代码（未经测试）应该停止`.closest()`匹配，`div.news_box`然后找到唯一的带有 class 的子元素`.comment-form`，因此只打开一个对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T01:57:14.023

There's a few ways you can do it. I'd probably just do it like this. Give each comment form an id e.g. `id="comment-form-0"`, `id="comment-form-1"` etc as you're looping through and creating them in PHP.

Also for each comment element you store an HTML5 data attribute on it e.g. `data-comment-id="0"`, `data-comment-id="1"`.

Then in the JavaScript you'd do something like:

```
$('.comment').click(function() {
    var commentId = $(this).attr('data-comment-id');
    $('#comment-form-' + commentId).dialog('open');
}); 
```

# php - 是什么导致 Safari 在此代码中获取 navigator.geolocation.getCurrentPosition 失败？

> ID：13963519
> 
> 赞同：0
> 
> 时间：2012-12-20T00:32:01.013
> 
> 标签：php, javascript, ios, mobile, geolocation

**第二次更新：**由于没有修复 Safari 和其他一些奇怪的行为，我决定使用这个选择为 Safari 用户创建所有新的无聊内容（基本上放弃了 Safari 的脚本）......

```
<?php if($detect->version('Safari')) {  ?>
$(function() {
    /* create second option because Safari sucks? */
    $("#gotorep").remove();
    $("#entersite").remove();
    $("#entersite2").css({'display':'inline'});
});
<?php } elseif($detect->isMobile()) {  ?>
   function startfunc() {
      if(navigator.geolocation) {
.
.
. 
```

**错误更新（*已修复，已删除*）：**我在 Safari 中的错误是 35772ReferenceError：找不到变量：在此位置失败...

```
 $(function() {
    if(navigator && navigator.geolocation) {
        var fallback = setTimeout(function() { fail('10 seconds expired'); }, 10000);
***http://devv.referadiabetic.com/:35772ReferenceError: Can't find variable: fail
        navigator.geolocation.getCurrentPosition(
                function (pos) {
                    clearTimeout(fallback); 
```

**原始问题：**我可以让它在除 Safari 之外的其他移动设备/浏览器中工作。在 iphone 上它失败了，所以用 ! 反转了 if 选择。并在具有相同问题的 Safari 桌面浏览器中进行了测试，一旦我同意就不会返回我的数据。这是我现在正在使用的代码块......

```
<?php if(!($detect->isMobile())) {  ?>
$(function() {
    if(navigator && navigator.geolocation) {
        var fallback = setTimeout(function() { fail('10 seconds expired'); }, 10000);
        navigator.geolocation.getCurrentPosition(
                function (pos) {
                    clearTimeout(fallback);
                    var point = new google.maps.LatLng(pos.coords.latitude, pos.coords.longitude);
                    new google.maps.Geocoder().geocode({'latLng': point}, function (res, status) {
                        if(status == google.maps.GeocoderStatus.OK && typeof res[0] !== 'undefined') {
                            var zip = res[0].formatted_address.match(/,\s\w{2}\s(\d{5})/);
                            if(zip) {
                                var zipcodepassed = zip[1];
                                $("#em").html(zipcodepassed);
                                var reps = reps_load;
                                var ads_repList_URLtoFullName = ads_repList_URLtoFullName_load;
                                var rek = ads_repList_URLtoFullName;
                                var rep = reps[zipcodepassed];
                                    if (rep == undefined || rep == null || rep == "") {
                                            $(function() {
                                                $("#gotorep").remove();
                                                $("#entersite").remove();
                                                $("#entersite2").css({'display':'inline'});
                                            });
                                    }
                                var repname = rek[rep]; //i.e. shaner will be Shane Reaume in repname variable
                                $("#yourrep").html(repname);
                                $("a[href='http://devv.referadiabetic.com']").attr('href', 'http://devv.referadiabetic.com/' + rep);
                            }
                        }
                    });

                }
        );

    }
}); 
```

我已经有了这个作为后备，我正在使用 IP 地址来获取邮政编码，但是由于移动设备的性质，我将它们设置为执行此代码块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:08:08.187

`setTimeout`期望第一个参数是一些代码的字符串或对函数的调用。我相信它试图解析`fail`为字符串，并且......呃......失败了。

```
setTimeout("function() fail('10 seconds expired');", 10000); 
```

# vba - 我在这个双变量优化程序中遇到了溢出问题

> ID：13963522
> 
> 赞同：2
> 
> 时间：2012-12-20T00:32:35.440
> 
> 标签：vba, excel, excel-2010

首先，这是我到目前为止所拥有的：

```
Option Explicit

Dim y As Variant
Dim yforx As Variant
Dim yfork As Variant
Dim ynew As Variant
Dim ymin As Variant
Dim x As Variant
Dim xmin As Variant
Dim k As Variant
Dim kmin As Variant
Dim s As Variant
Dim Z As Variant
Dim Track As Variant

Sub PracticeProgram()

'Selects the right sheet
Sheets("PracticeProgram").Select

'y = k ^ 2 * (x ^ 2 + 2 * x * k - 6) / (x + k) ^ 2

'these are the bounds we are stepping through
Track = 0
x = 1
xmin = 1
k = 1
kmin = 1
y = 100000000
yforx = 100000
yfork = 1000000000

Do
    y = 100000000
    For x = 0 To 1000 Step 0.1
        ynew = kmin ^ 2 * (x ^ 2 + 2 * x * kmin - 6) / (x + kmin) ^ 2

        'This checks the new y-value against an absurdly high y-value we know is wrong. if it is less than this y-value, we keep the x-value that corresponds with it.
        If ynew < y Then
            xmin = x
            y = ynew
            yforx = y
            xmin = Application.Evaluate("=Round(" & xmin & ", 3)")
        Else
        End If

    Next
  MsgBox (yforx)

    For k = 0 To 1000 Step 0.1
        y = k ^ 2 * (xmin ^ 2 + 2 * xmin * k - 6) / (xmin + k) ^ 2
        If ynew < y Then
            kmin = k
            y = ynew
            yfork = y
            kmin = Application.Evaluate("=Round(" & kmin & ",3)")
        Else
        End If
        Next

    MsgBox (yfork)

Loop Until (Abs(yforx - yfork) < 10)

End Sub 
```

该程序应该找到 x 和 k 的值以最小化 y 的值。对于将使用相同概念的更复杂的程序，这是一种做法。在我的实际程序中，无论如何，y、k 和 x 都将大于零，但由于很难想到一个简单的方程，其结果会呈抛物线开口的形状，所以我决定允许否定答案对于这个练习计划。

基本上，它应该在寻找 x 和 k 的理想值的方程之间来回跳动，直到最终使用 x 和 k 的理想答案得到 y 的最小答案。我不确定实际的答案是什么，所以我让它在 10 范围内停止。如果它有效，我会把它变小，但我不希望程序永远运行，以防万一.

**我的问题**：我不断收到溢出错误！我正在尝试将 xmin 和 kmin 的值四舍五入到小数点后三位，但这似乎没有帮助。我用错了吗？有人可以帮我让这个程序正常工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T01:01:44.120

您正在除以零。`xmin = 0`, `k = 0`, `(xmin + k) ^ 2 = 0`. （我不确定为什么它不报告除以零。）

一个建议：使用`Locals`窗格查看局部变量的值。您还可以使用`Watch`窗格查看要监控的表达式的值。

# python - SqlAlchemy：缓存 hybrid_method 导致相关对象

> ID：13963525
> 
> 赞同：1
> 
> 时间：2012-12-20T00:32:53.460
> 
> 标签：python, sqlalchemy

我有两个这样的 ORM 类：

```
class Road(Base):

  __tablename__ = "road"

  id = Column(Integer, primary_key=True)

  @hybrid_method
  def total_traffic(self, days):
      today_date = datetime.datetime.now().date()
      future_date = today_date+datetime.timedelta(days)
      return sum([traffic.volume 
                  for traffic in self.traffic
                  if traffic.date >= today_date and traffic.date < future_date])

  @total_traffic.expression
  def total_traffic(cls, days):
      today_date = datetime.datetime.now().date()
      future_date = today_date+datetime.timedelta(days)
      return select([func.sum(RoadTraffic.volume)]).\
          where(RoadTraffic.road_id == cls.id).\
          where(RoadTraffic.date >= today_date).\
          where(RoadTraffic.date < future_date).\
          label("total_traffic")

class RoadTraffic(Base):

  __tablename__ = "road_traffic"

  id = Column(Integer, primary_key=True)
  volume = Column(Integer)
  date = Column(Date, nullable=False)
  road_id = Column(Integer, ForeignKey('road.id'), nullable=False)
  road = relationship("Road", backref=backref('traffic')) 
```

这在功能上非常棒，但在完整的数据集上获取所有流量数据并在本地汇总它有点慢（生产中为 4 秒），即使有连接负载。我可以像这样选择道路旁边的 total_traffic：

```
 roads_with_traffic = db.query(Orn, Orn.total_traffic(7)).all() 
```

但后来我必须改变我的观点来接收这个而不是纯粹的道路清单。

在相关对象上缓存选定的 total_traffic 是否有约定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T00:32:53.460

我目前采取的方法是：

```
class Road(Base):

  __tablename__ = "road"

  id = Column(Integer, primary_key=True)

  def __init__(self):
    self.traffic_cache = {}

  @orm.reconstructor
  def init_on_load(self):
    self.traffic_cache = {}

  @hybrid_method
  def total_traffic(self, days):
      if days in self.traffic_cache:
        return self.traffic_cache[days]
      today_date = datetime.datetime.now().date()
      future_date = today_date+datetime.timedelta(days)
      return sum([traffic.volume 
                  for traffic in self.traffic
                  if traffic.date >= today_date and traffic.date < future_date])

  @total_traffic.expression
  def total_traffic(cls, days):
      today_date = datetime.datetime.now().date()
      future_date = today_date+datetime.timedelta(days)
      return select([func.sum(RoadTraffic.volume)]).\
          where(RoadTraffic.road_id == cls.id).\
          where(RoadTraffic.date >= today_date).\
          where(RoadTraffic.date < future_date).\
          label("total_traffic") 
```

并像这样更新 Road 对象：

```
roads_with_traffic = db.query(Road, Road.total_traffic(7)).all()
for road, traffic in roads_with_traffic:
  road.traffic_cache[7] = traffic 
```

这很好，但是以某种方式在课堂上移动它会很好。

# git - Github推送报错：解包失败：index-pack异常退出

> ID：13963527
> 
> 赞同：7
> 
> 时间：2012-12-20T00:32:58.737
> 
> 标签：git, github

我在将新的 git 变更集推送到 github 存储库时遇到问题。首先，我克隆了深度为 1 的本地更改以删除历史记录：

```
git clone --depth 1 file:///Users/kunal<path to project> 
```

然后我在我克隆的目录中运行了一个 git init 远程添加和推送：

```
> git init  
> git remote add origin https://github.com/kp27/pymovie2.git 

> git push -u origin master 
```

我看到文件上传，但后来我得到：

```
Counting objects: 7110, done.

Delta compression using up to 8 threads.

Compressing objects: 100% (3785/3785), done.

Writing objects: 100% (7110/7110), 7.60 MiB | 247 KiB/s, done.

Total 7110 (delta 2283), reused 7110 (delta 2283)

error: unpack failed: index-pack abnormal exit 
```

有什么想法可能导致这种情况吗？我的第一个猜测是 1 的深度导致它，但我不知道为什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-12T05:50:27.010

我删除了 /.git/ 的内容并再次尝试 - 它有效。**这样做要小心。**

故事：我在重命名文件夹时遇到了类似的问题，即使在删除和（重新）克隆后仍然存在

（在 mac os x 上）：我**首先将文件复制到**计算机上的安全目录，然后导航到 /.git/ 并删除所有内容（在 Finder 中使用 cmd-shift-g ".git"），最后删除 /.git/在终端

然后能够提交和推送

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T02:20:13.333

您需要为此联系github，这是接收端的东西。

您还可以克隆 github 存储库，而不是克隆本地文件，只需复制它们并添加它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-20T13:48:57.110

For me this happened, when I tried to push the new files which are not added to the index. try adding the files to index using Team-> Add To Index in eclipse thru EGit plugin.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-07T19:53:24.307

我有同样的情况，*不是 gitgub*，而是另一个 repo git。如果可以，请检查使用 git**登录的****用户**是否**有权写入**这些目录，如果没有，则在**chmod**中继续了解您已经知道...

 ******* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-26T14:12:58.947

如果重新打包没有帮助，使用 rebase 可以帮助：

```
git pull --rebase 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-08-07T08:03:15.367

您不需要再次克隆它，只需在 git repo 中运行此命令`git repack remote/origin/master` 有关更多详细信息，请查看此[http://www.andyjarrett.co.uk/2009/10/08/unpacker-error-when-pushing-git /](http://www.andyjarrett.co.uk/2009/10/08/unpacker-error-when-pushing-git/)******

# sql - phpmyadmin，使用表单工具插入记录时出现错误

> ID：13963529
> 
> 赞同：1
> 
> 时间：2012-12-20T00:33:18.890
> 
> 标签：sql, phpmyadmin

使用 phpmyadmin 中的工具插入记录`''`时，它会在不应该放置任何东西或 a`null`或`0`. 生成 sql 代码的 phpmyadmin 上有错误。

错误（更合适的是警告）是：

插入 1 行。插入的行 ID：17 警告：#1366 不正确的整数值：第 1 行的列 'userNo' 的''

phpmyadmin生成的sql为：

```
INSERT INTO plenty_of_singles.user (
    userNo ,
    username ,
    password ,
    email ,
    gender ,
    age ,
    country ,
    area ,
    city ,
    relocate ,
    height ,
    weight ,
    overview
)
VALUES (
'', 'girl101', MD5( 'weebling' ) , 'girl101@hotmail.com', 'female', '18', 'UK', 'England', 'Manchester', 'yes', '5''8"', '50 kg', 'Genuine girl who would like to find the right person.'
); 
```

很高兴知道解决方案以及是否有其他人遇到过或遇到过这个问题。

mysql 版本 5.0.10 。

表的sql代码：

```
CREATE TABLE `user` (  
`userNo` int(11) unsigned NOT NULL AUTO_INCREMENT,  
`username` varchar(16) NOT NULL COMMENT 'username, alphanumeric 16 characters long.',  `password` varchar(32) NOT NULL COMMENT 'password alphanumeric 16 characters long , but when encrypted using MD5 it becomes a hexidecimal number 32 digits long',  
`email` varchar(40) NOT NULL COMMENT 'email is an alphanumeric 40 characters long',  `gender` varchar(6) NOT NULL COMMENT 'gender is alphanumeric and will always be male or female',  
`age` int(3) NOT NULL COMMENT 'age will be an integer 3 digits long',  
`country` varchar(35) NOT NULL COMMENT 'country is alphabetic 35 characters long',  
`area` varchar(35) NOT NULL COMMENT 'area is alphabetic 35 characters long',  
`city` varchar(35) NOT NULL COMMENT 'city is alphabetic 35 characters long',  
`relocate` varchar(3) NOT NULL COMMENT 'relocate is a alphabetic 3 characters long. possible values are yes or no',  
`height` varchar(15) NOT NULL COMMENT 'height is alphanumeric and 15 chracters long.',  `weight` varchar(15) NOT NULL COMMENT 'wieight is alphanumeric and 15 chracters long.',  `overview` varchar(255) NOT NULL,  
PRIMARY KEY (`userNo`),  
UNIQUE KEY `username` (`username`)) 
ENGINE=InnoDB AUTO_INCREMENT=23 DEFAULT CHARSET=latin1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T04:05:10.407

不要给 userNo 字段赋值，因为它的自动增量字段使用这个查询

```
 INSERT INTO plenty_of_singles.user (

username ,
password ,
email ,
gender ,
age ,
country ,
area ,
city ,
relocate ,
height ,
weight ,
overview
)
VALUES (
  'girl101', MD5( 'weebling' ) , 'girl101@hotmail.com', 'female', '18', 'UK','England', 'Manchester', 'yes', '5''8"', '50 kg', 'Genuine girl who would like to find the right person.'
  ); 
```

# wordpress - Wordpress pre_get_posts 和传递参数

> ID：13963530
> 
> 赞同：0
> 
> 时间：2012-12-20T00:33:22.307
> 
> 标签：wordpress, function, arguments

我试图让 pre_get_posts 与传递参数一起工作。`function.php`我的主题文件中有以下功能。

```
function custom_pre_get_posts($query, $posttype, $poststatus, $paidvalue, $taxtype, $geo, $brands) {
  //my long query is here
}
add_action('pre_get_posts', 'custom_pre_get_posts', 10, 7); 
```

我通过以下代码通过我的 taxonomy.php 文件调用此函数： `do_action('pre_get_post','dealers', 'publish', '1', $taxtype, $geo, $brands);`

在输出页面上，我得到了 custom_pre_get_posts() 的 Missing argument 2、custom_pre_get_posts() 的 Missing argument 3 等等。一直到参数 7。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:04:46.710

虽然您尝试使用动作挂钩非常好，但您的挂钩名称是错误的。
[`pre_get_posts`](http://adambrown.info/p/wp_hooks/hook/pre_get_posts)是一个现有的钩子名称。
所以你只需要将你的钩子重命名为原始的东西。

[在这里](http://adambrown.info/p/wp_hooks/version/3.4)列出所有挂钩

# wcf - ASP.NET Web 应用程序无法连接到作为 Windows 服务托管的 WCF

> ID：13963534
> 
> 赞同：1
> 
> 时间：2012-12-19T20:39:49.630
> 
> 标签：wcf

我们有一个 WCF 服务作为 Windows 服务托管，在我们的应用程序服务器上具有 tcp 绑定。我们有一个 ASP.NET Web 应用程序托管在试图连接到它的单独 Web 服务器上。两台服务器都是 Windows 2008 R2 机器。

ASP.NET Web 应用程序的应用程序池设置为使用 ApplicationPoolIdentity 作为它的用户。当我们尝试从 windows 机器连接到 WCF 服务时，会出现以下错误：

```
Source Exception: System.Web.HttpUnhandledException (0x80004005): Exception of type 'System.Web.HttpUnhandledException' was thrown. ---> System.ServiceModel.CommunicationException: The socket connection was aborted. This could be caused by an error processing your message or a receive timeout being exceeded by the remote host, or an underlying network resource issue. Local socket timeout was '00:00:09.9980000'. ---> System.IO.IOException: The read operation failed, see inner exception. ---> System.ServiceModel.CommunicationException: The socket connection was aborted. This could be caused by an error processing your message or a receive timeout being exceeded by the remote host, or an underlying network resource issue. Local socket timeout was '00:00:09.9980000'. ---> System.Net.Sockets.SocketException: An existing connection was forcibly closed by the remote host
   at System.ServiceModel.Channels.SocketConnection.ReadCore(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout, Boolean closing) 
```

但是，当我们将应用程序池的用户更改为网络服务时，它会正确连接。

我的问题是两方面的。有谁知道为什么使用 ApplicationPoolIdentity 不起作用，是某种配置问题吗？而且，在网络服务帐户下运行应用程序池会有什么缺点？我知道 ApplicationPoolIdentity 的权限更少，更安全，被认为是最佳实践。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:16:13.013

这个问题的答案取决于您在网络、服务器和服务中的不同配置。

过去我遇到过类似的情况，ApplicationPoolIdentity 无权与机器外部的资源“交谈”。

另一个问题可能与您如何处理 Web 应用程序和服务器之间的连接有关。您是每次都重复使用相同的连接，还是要关闭/重新打开您的频道？[这个 msdn 线程](http://social.msdn.microsoft.com/forums/en-US/wcf/thread/ca2d0b6d-d1ef-41ed-8009-21204599ea6a)有一些关于此的信息。

# asp.net-mvc - 可观察数组为空时如何显示无数据？

> ID：13963539
> 
> 赞同：8
> 
> 时间：2012-12-20T00:33:44.250
> 
> 标签：asp.net-mvc, knockout.js

我是 Knockout.js 的新手，我正在尝试将数据从可观察数组显示到`table`. 我遇到的问题是它会生成两个`tbody`标签。但是，如果我将空检查逻辑移到`foreach:`循环中，则`No Data`确实会出现。

有没有更好的方法来使用表格来做到这一点？我不喜欢在这种情况下使用`ul`或。`ol`

```
<table>
    <thead>
        <tr>
            <th>Permit</th>
            <th>Region</th>
            <th>Landowner</th>
        </tr>
    </thead>
    <tbody data-bind="foreach: requestList">
        <tr>
            <td><span data-bind="text: permit"></span></td>
            <td><span data-bind="text: region"></span></td>
            <td><span data-bind="text: landowner"></span></td>
        </tr>
    </tbody>
    <tbody data-bind="if: requestList().length === 0">
        <tr>
            <td colspan="3">No Data</td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T06:14:01.833

这样做时，我们会大量使用虚拟元素。它们在此处进行了概述[http://knockoutjs.com/documentation/if-binding.html#note_using_if_without_a_container_element](http://knockoutjs.com/documentation/if-binding.html#note_using_if_without_a_container_element)

你的标记的其余部分很好，但你可以将你的第一个 tbody 包装在一个虚拟元素中，如下所示：

```
<!-- ko if: requestList().length -->
    <tbody data-bind="foreach: requestList">
        <tr>
            <td><span data-bind="text: permit"></span></td>
            <td><span data-bind="text: region"></span></td>
            <td><span data-bind="text: landowner"></span></td>
            <td><button data-bind="click: $parent.remove">Remove</button></td>
        </tr>
    </tbody>
<!-- /ko --> 
```

JSFiddle在这里：http: [//jsfiddle.net/ZKWMh/](http://jsfiddle.net/ZKWMh/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T01:36:55.167

实际上，您的 html 标记很好。我将以下 javascript 添加到您的标记中

```
$(document).ready(function() {
    var a = [{
        permit: "permit1",
        region: 'region1',
        landowner: 'landowner'},
    {
        permit: "permit2",
        region: 'region2',
        landowner: 'landowner2'}];
    var vm = {};
    vm.requestList = ko.observableArray([]);

    ko.applyBindings(vm);

    $('#loadData').click(function() {
        var a1 = ko.mapping.fromJS(a);
        var b1 = a1();
        vm.requestList(b1);
    });
});​ 
```

当您描述您希望事情如何运作时，它似乎正在发挥作用。它在[http://jsfiddle.net/photo_tom/xmk3P/10/工作](http://jsfiddle.net/photo_tom/xmk3P/10/)

# ios - Phonegap / Cordova 在后台 IOS 一段时间后停止音频

> ID：13963542
> 
> 赞同：0
> 
> 时间：2012-12-20T00:34:02.930
> 
> 标签：ios, cordova, audio, background

我有一个音频应用程序，它使用 Cordova 2.2 及其音频 API 循环播放声音。目前，我已经设置了多个循环，这些循环将在根据预定时间完成时停止（按每个循环 n 秒/3 小时计算）。这种方法通常有效。

```
 playMainAudio = new Media(url,
                                          // success callback
                                          function() {
                                          console.log("playAudio():Audio Success");
                                          },
                                          // error callback
                                          function(err) {
                                          console.log("playAudio():Audio Error: "+err);
                                          });

                // Play audio
                playMainAudio.play({ numberOfLoops: 123, playAudioWhenScreenIsLocked : true }); 
```

但我更喜欢添加本机代码，我可以将所有音频设置为在 3 小时后停止，而不是根据时间来解决 - 但不确定是否要查看甚至放置代码。关键是它必须在锁定或应用程序处于后台时工作（目前我设置了正确的后台模式，因此音频将在 BG 中播放）。

是否有与后台兼容的本机计时器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:29:02.143

如果你热衷于在 Objective-C（不是你选择的语言）里面编辑 app delegate.m

`- (void)applicationDidEnterBackground:(UIApplication *)application`停止音频但延迟使用

`– performSelector:withObject:afterDelay:`

请参阅此处的文档：

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html)

有关如何在 Objective-C 中播放音频的示例：

[如何在Objective C iphone编码中播放声音](https://stackoverflow.com/questions/4215891/how-to-play-a-sound-in-objective-c-iphone-coding)

[播放音频 iOS Objective-C](https://stackoverflow.com/questions/11525942/play-audio-ios-objective-c)

[如何在 iphone App 中添加音频播放器](https://stackoverflow.com/questions/8889645/how-can-i-add-audio-player-in-iphone-app)

# javascript - 将字节输入流转换为 base64 XPages Scriptblock

> ID：13963548
> 
> 赞同：1
> 
> 时间：2012-12-20T00:34:24.760
> 
> 标签：javascript, base64, byte, xpages

请告诉我应该如何处理这段代码，我即将将字节数据转换为 base64 字符串。下面的代码只会将图像文件转换为输入流，我不知道如何将其转换为 base64。

```
var MyView:NotesView = database.getView("uploadforms");
var uploadPhoto:NotesDocumentCollection = MyView.getAllDocumentsByKey("uploadphoto");
var input:java.io.InputStream = uploadPhoto.getFirstDocument().getAttachment("photo").getInputStream();

var data = -1;
var myArray = new Array();

while ((data = input.read()) != -1) {

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T02:08:07.253

您可以为此使用*sun.misc.BASE64Encoder*类：

```
var MyView:NotesView = database.getView("uploadforms");
var uploadPhoto:NotesDocumentCollection = MyView.getAllDocumentsByKey("uploadphoto");
var input:java.io.InputStream = uploadPhoto.getFirstDocument().getAttachment("photo").getInputStream();

var base64Enc = new sun.misc.BASE64Encoder();
var output = new java.io.ByteArrayOutputStream();
base64Enc.encode( input, output );
output.toString() 
```

**编辑：** 正如评论中所写，最好使用*com.ibm.misc.BASE64Encoder*。

# javascript - Google Charts 折线图中 a 轴上的日期

> ID：13963550
> 
> 赞同：4
> 
> 时间：2012-12-20T00:34:40.870
> 
> 标签：javascript, google-visualization

这是一个新手问题，但是如何在[Google Charts 折线图](https://google-developers.appspot.com/chart/interactive/docs/gallery/linechart)中使用日期作为 x 轴？

当我使用 new Date( ... ) 时，我收到错误消息“未捕获的错误：不支持日期和日期时间列类型”

```
 google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
['Datum','Person1','Person2','Person3'],
[new Date(2012, 12, 19, 0, 0, 0),'5072.0537223002','5072.0537223002','5074.2809630567'],
[new Date(2012, 12, 20, 0, 0, 0),'5072.0537223002','5072.0537223002','5074.2809630567'],
]);

        var options = {};

        var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      } 
```

（在 x 轴上使用字符串均匀空格是可以接受的，但是当我尝试使用字符串“轴 #0 的数据列不能是字符串类型”时）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T00:43:14.890

将日期转换为字符串并仅使用`Date`而不使用`new`如下所示：

```
 google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
['Datum','Person1','Person2','Person3'],
[Date(2012, 12, 19, 0, 0, 0).toString(),'5072.0537223002','5072.0537223002','5074.2809630567'],
[Date(2012, 12, 20, 0, 0, 0).toString(),'5072.0537223002','5072.0537223002','5074.2809630567'],
]);

        var options = {};

        var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      } 
```

**编辑：** 您可以在此链接中按照他们的示例进行操作：

[https://google-developers.appspot.com/chart/interactive/docs/customizing_axes](https://google-developers.appspot.com/chart/interactive/docs/customizing_axes)

**编辑2：**

这就是我能够做到的：http: [//jsfiddle.net/ANC9H/2/](http://jsfiddle.net/ANC9H/2/)

```
 google.load("visualization", "1", {packages:["LineChart"]});
    google.setOnLoadCallback(drawChart);
    function drawChart() {
    var data = new google.visualization.DataTable();
        data.addColumn('date', 'Date');
        data.addColumn('number', 'persone1');
        data.addColumn('number', 'persone2');
        data.addColumn('number', 'persone3');
        data.addRows([
                       [new Date(2008, 1 ,1),0.7,0.8,0.6],
                       [new Date(2008, 1 ,7),0.5,0.55,0.9] ]);
    var options = {};

    var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
        chart.draw(data, options);
    } 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T20:37:46.767

那是因为您使用的是 arrayToDataTable()。如果您使用 DataTable() 错误消息将消失。请参阅此帖子：[带有日期轴的柱形图不起作用](https://stackoverflow.com/questions/8916239/column-chart-with-date-axis-not-working/8923952#8923952)

# python - 磁盘上的功能丢失，在 IDLE 中仍处于活动状态，可能进行源转储？

> ID：13963551
> 
> 赞同：1
> 
> 时间：2012-12-20T00:34:42.017
> 
> 标签：python, function, save, dump, python-idle

我在外部编辑器（PyScripter）中的 .py 文件中编写了一个函数。我提前将它加载到 IDLE 编辑器中，然后继续在 PyScripter 中编写函数，偶尔在加载的 .py 上使用 F5 在 IDLE 中运行它（而不在 IDLE .py 编辑器中重新加载它）。

现在，问题来了。我完成了 .py，最后一次在 PyScripter 中保存它并在 IDLE 中运行它。发现我必须做最后一次调整。不小心在 IDLE 编辑器中进行了调整，它有旧的 #$$ 版本，保存了它。PyScripter 仍在运行。当发现文件在磁盘上发生更改时重新加载文件。所有数据都没了。

我意识到了这个错误，但没有在 IDLE 中重新加载保存的 .py，所以该函数在内存中仍然可用。我可以从 IDLE shell 中取回它吗？我要精神了...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T02:30:15.357

你可以试试[`inspect.getsource()`](http://docs.python.org/2/library/inspect.html#inspect.getsource)。但是，它并不总是有效。

[ipython](http://ipython.org/)中的示例：

```
In [1]: import inspect

In [2]: def foo():
   ...:     print 'hello'
   ...:     

In [3]: inspect.getsource(foo)
Out[3]: u"def foo():\n    print 'hello'\n" 
```

在 ipython 中，在导入检查之前或之后定义函数并不重要：

```
In [1]: def foo():
   ...:     print 'hello'
   ...:     

In [2]: import inspect

In [3]: inspect.getsource(foo)
Out[3]: u"def foo():\n    print 'hello'\n" 
```

在基本的 cpython 交互式提示中，它根本不起作用；

```
Python 2.7.3 (default, Jul 26 2012, 19:08:05) 
Type "help", "copyright", "credits" or "license" for more information.
>>> def foo():
...   print 'hello'
... 
>>> import inspect
>>> inspect.getsource(foo)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/inspect.py", line 701, in getsource
    lines, lnum = getsourcelines(object)
  File "/usr/local/lib/python2.7/inspect.py", line 690, in getsourcelines
    lines, lnum = findsource(object)
  File "/usr/local/lib/python2.7/inspect.py", line 538, in findsource
    raise IOError('could not get source code')
IOError: could not get source code
>>> def bar():
...   print 'second try'
... 
>>> inspect.getsource(bar)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/inspect.py", line 701, in getsource
    lines, lnum = getsourcelines(object)
  File "/usr/local/lib/python2.7/inspect.py", line 690, in getsourcelines
    lines, lnum = findsource(object)
  File "/usr/local/lib/python2.7/inspect.py", line 538, in findsource
    raise IOError('could not get source code')
IOError: could not get source code 
```

我没有尝试 IDLE，因为我基本上从不使用它。我更喜欢 ipython 进行交互式实验和使用 emacs 进行编辑。

# php - MySQL：选择列等于ID的行

> ID：13963552
> 
> 赞同：2
> 
> 时间：2012-12-20T00:34:54.583
> 
> 标签：php, mysql, wordpress

这是我的查询：

```
SELECT ID FROM wp_posts 
WHERE post_type = 'vreb_property'
AND post_status = 'publish' 
ORDER BY post_modified DESC 
```

在这种情况下，我需要修改我的查询以包含`WHERE post_parent = ID`...所以我需要使用正在选择的 ID。

`SELECT ID FROM wp_posts WHERE post_type = 'vreb_property' ... and also select records where 'post_parent' = ID`

因为有些记录是`post_type`我需要抓取的“附件”。

我能不能只看几眼来澄清这个请求的有效性？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T00:41:15.380

你在找`OR`吗？

```
SELECT ID FROM wp_posts 
WHERE (post_type = 'vreb_property'
       AND post_status = 'publish')
   OR (post_type = 'attachment'
       AND post_parent = ID)
ORDER BY post_modified DESC 
```

使用括号，您可以根据您的特定需求对其进行调整，因为这并不完全清楚。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-20T02:12:42.593

我同意 jeroen 的 sql ，诀窍在括号中。

# java - 春季应用范围

> ID：13963553
> 
> 赞同：1
> 
> 时间：2012-12-20T00:34:56.680
> 
> 标签：java, spring, spring-mvc, spring-security

spring 中 bean 的默认作用域是单例。但是，当我定义下一个服务时：

```
@Service("usersLoggedInService")
public class UsersLoggedInServiceImpl implements UsersLoggedInService {

private Map<Long, String> OnlineUsers = new LinkedHashMap<Long, String>();

@Override
public Map<Long, String> getOnlineUsers() {
    return OnlineUsers;
}

@Override
public void setOnlineUsers(Long id, String username) {
    OnlineUsers.put(id, username);
}

    @Override
public void removeLoggedOutUser(Long id){
    if(!OnlineUsers.isEmpty() && OnlineUsers.size()>0)
        OnlineUsers.remove(id);
}
} 
```

并将其用于登录审核，因此每当新用户登录时，我都会通过以下方式将其添加到 OnlineUsers LinkedHashMap：

```
usersLoggedInService.setOnlineUsers(user.getId(), user.getUsername()); 
```

在我的服务班之一。这工作正常，我可以看到地图中添加的用户。

但是，在注销时，我想删除在 LinkedhashMap 中添加的用户，当我检查 usersLoggedInService.getOnlineUsers() 时，我可以看到它是空的。我不明白为什么。

注销处理程序定义：

```
<logout invalidate-session="true" 
        logout-url="/logout.htm"
        success-handler-ref="myLogoutHandler"/> 
```

及其实现：

```
 @Component
 public class MyLogoutHandler extends SimpleUrlLogoutSuccessHandler {

@Resource(name = "usersLoggedInService")
UsersLoggedInService usersLoggedInService; 

@Override
public void onLogoutSuccess(HttpServletRequest request,
        HttpServletResponse response, Authentication authentication)
        throws IOException, ServletException {
    if (authentication != null) {
        Object principal = authentication.getPrincipal();
            if(principal instanceof User){
                User user = (User) principal;
                usersLoggedInService.removeLoggedOutUser(user.getId());     

            }

    }
    setDefaultTargetUrl("/login");
    super.onLogoutSuccess(request, response, authentication);
}

} 
```

请让我知道问题出在哪里。我不希望这张地图是空的。

- - -更新 - - -

当新用户登录时，我可以看到所有已添加到 LinkedHashmap 中的用户。此方法位于用户服务类之一中：

```
 @Service("userService")
  public class UserServiceImpl implements UserService {

  @Autowired
  UsersLoggedInService usersLoggedInService; 

   @Override
public User getUserDetail() {
    Authentication auth = SecurityContextHolder.getContext()
            .getAuthentication();   
    Object principal = auth.getPrincipal();
      if(principal instanceof User){
            User user = (User) principal;
            usersLoggedInService.setOnlineUsers(user.getId(), user.getUsername());

            return user;
        }
        return null;
} 
```

}

当用户登录时，假设有两个用户登录，我将 Map 设为 {1=user1, 9=user2}，但如果有任何用户注销，则在 onLogoutSuccess() 方法中，我将 Map 值设为 {}。现在，如果再有一个用户登录，那么我会得到地图 {1=user1, 9=user2, 3=user3}。因此，Map 仅在 onLogoutSuccess() 方法内部变空，并且在其他任何地方显示填充值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T02:56:23.090

根据您的描述，似乎为处理程序创建了新的服务实例。

可能是您的配置的默认范围不是单例（应该很容易检查）。

另外，您可以尝试使用`@Autowired`注释吗？文档之间`@Autowire`和`@Resource`文档之间存在细微差别，看起来它不应该导致这样的问题，但无论如何值得尝试：

```
@Component
public class MyLogoutHandler extends SimpleUrlLogoutSuccessHandler {

    @Autowired
    private UsersLoggedInsService usersLoggedInService;

    // ...
} 
```

-----更新#1 ------

是的，尝试`@Autowired`使用`@Qualifier`（当我尝试没有限定符的示例时，spring 创建了两个实例）：

```
 @Autowired
  @Qualifier("usersLoggedInService")
  UsersLoggedInService usersLoggedInService; 
```

----更新#2 ------

好吧，我只是在示例项目中复制了您的所有代码，并且`it works on my machine`.

[您是否可以在GitHub](https://github.com/)等服务上共享您的代码库？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:47:38.190

请显示正在调用的类`setOnlineUsers`。你是如何以及在什么地方检查地图不为空的？

尝试将记录器放入方法中`onLogoutSuccess`并检查您是否获得了新的或相同的`UsersLoggedInService`.

我假设您在连接 UsersLoggedIn* *s* *Service 的 bean 中有错字。有一个额外的's'

# excel - 从全球通讯录中获取电话号码

> ID：13963554
> 
> 赞同：2
> 
> 时间：2012-12-20T00:34:59.940
> 
> 标签：excel, vba, outlook

在 Outlook 中使用`VBA`我正在尝试从全球通讯录中获取电话号码。

不幸的是，最常用的方法——遍历整本书——对我的目的来说是不可行的，因为 GAL 中的地址数量太大了。因此，有必要找到具有特定查询的用户。我研究了使用`CDO`会话以及`ADODB`方法，但两者都没有按预期工作。任何人都可以提供一个代码片段，使用电子邮件地址作为搜索字符串可以实现上述目标吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T00:30:46.137

下面两种方法

[第一个代码针对用户指定的域在excel](/questions/tagged/excel "显示标记为“excel”的问题")中转储了大部分 GAL 详细信息- 它使用变体数组因此速度非常快

您应该更改此行（我已对其进行了清理）以添加您的域

`Domains = Array("'LDAP://a.b.example.org/dc=a,dc=b,dc=example,dc=org'", "'LDAP://b.c.example.org//dc=b,dc=c,dc=example,dc=org'", "'LDAP://d.e.example.org//dc=d,dc=e,dc=example,dc=org'")`

**代码**

```
Sub DumpGAl()
    Dim ws As Worksheet
    Dim X
    Dim Domains
    Dim Fields
    Dim VarDomains
    Dim VarFields
    Dim objRecordSet
    Dim i As Long
    Dim lngCnt As Long
    Dim lngCnt2 As Long

    Set ws = ThisWorkbook.Sheets(1)
    ws.UsedRange.ClearContents

      Domains = Array("'LDAP://a.b.example.org/dc=a,dc=b,dc=example,dc=org'", "'LDAP://b.c.example.org//dc=b,dc=c,dc=example,dc=org'", "'LDAP://d.e.example.org//dc=d,dc=e,dc=example,dc=org'")`
    Fields = Array("Last", "First", "Initials", "Company", "physicalDeliveryOfficeName", "Address", "City", "State", "Zip code", "Country", "Phone", "Title", "Department", "Distinguished Name", "Manager", "Email Address", "Mobile Phone", "Cost Centre", "Department", "sAMAccountName", "userPrincipalName", "msExchAssistantName")
    lngCnt = 1
    Set objConnection = CreateObject("ADODB.Connection")
    Set objcommand = CreateObject("ADODB.Command")
    objConnection.Provider = "ADsDSOObject"
    objConnection.Open "Active Directory Provider"
    Set objcommand.ActiveConnection = objConnection
    objcommand.Properties("Page Size") = 1000
    'For Each VarDomains In Domains
    '    objCommand.CommandText = "Select department, l, title, telephonenumber, givenName, sn, initials, department, displayname, name, mobile, sAMAccountName," _
         '                             & "physicalDeliveryOfficeName, streetAddress, st, postalCode, c, company, distinguishedName, manager, mail, example, userPrincipalName, msExchAssistantName " _
         '                             & "FROM " & VarDomains _
         '                             & "WHERE objectCategory='user'"

    '   Set objRecordSet = objCommand.Execute
    '   lngCnt = lngCnt + objRecordSet.RecordCount
    'Next

    ReDim X(1 To 200001, 1 To 22)
    For Each VarFields In Fields
        lngCnt2 = lngCnt2 + 1
        X(1, lngCnt2) = VarFields
    Next

    i = 2
    Set objConnection = CreateObject("ADODB.Connection")
    Set objcommand = CreateObject("ADODB.Command")
    objConnection.Provider = "ADsDSOObject"
    objConnection.Open "Active Directory Provider"
    Set objcommand.ActiveConnection = objConnection
    objcommand.Properties("Page Size") = 1000

    For Each VarDomains In Domains
        objcommand.CommandText = "Select department, l, title, telephonenumber, givenName, sn, initials, department, displayname, name, mobile, sAMAccountName," _
                                 & "physicalDeliveryOfficeName, streetAddress, st, postalCode, c, company, distinguishedName, manager, mail, example, userPrincipalName, msExchAssistantName " _
                                 & "FROM " & VarDomains _
                                 & "WHERE objectCategory='user'"

        Set objRecordSet = objcommand.Execute
        objRecordSet.MoveFirst
        Do Until objRecordSet.EOF
            If Not IsNull(Len(objRecordSet.Fields("sn").Value)) Then X(i, 1) = Trim(Replace(Replace(objRecordSet.Fields("sn").Value, vbCrLf, vbNullString), vbTab, vbNullString))
            If Not IsNull(Len(objRecordSet.Fields("givenName").Value)) Then X(i, 2) = Trim(Replace(Replace(objRecordSet.Fields("givenName").Value, vbCrLf, vbNullString), vbTab, vbNullString))
            If Not IsNull(Len(objRecordSet.Fields("initials").Value)) Then X(i, 3) = Trim(Replace(Replace(objRecordSet.Fields("initials").Value, vbCrLf, vbNullString), vbTab, vbNullString))
            If Not IsNull(Len(objRecordSet.Fields("company").Value)) Then X(i, 4) = Trim(Replace(Replace(objRecordSet.Fields("company").Value, vbCrLf, vbNullString), vbTab, vbNullString))
            If Not IsNull(Len(objRecordSet.Fields("physicalDeliveryOfficeName").Value)) Then X(i, 5) = Trim(Replace(Replace(objRecordSet.Fields("physicalDeliveryOfficeName").Value, vbCrLf, vbNullString), vbTab, vbNullString))
            If Not IsNull(Len(objRecordSet.Fields("streetAddress").Value)) Then X(i, 6) = Trim(Replace(Replace(objRecordSet.Fields("streetAddress").Value, vbCrLf, vbNullString), vbTab, vbNullString))
            If Not IsNull(Len(objRecordSet.Fields("l").Value)) Then X(i, 7) = Trim(Replace(Replace(objRecordSet.Fields("l").Value, vbCrLf, vbNullString), vbTab, vbNullString))
            If Not IsNull(Len(objRecordSet.Fields("st").Value)) Then X(i, 8) = Trim(Replace(Replace(objRecordSet.Fields("st").Value, vbCrLf, vbNullString), vbTab, vbNullString))
            If Not IsNull(Len(objRecordSet.Fields("postalCode").Value)) Then X(i, 9) = Trim(Replace(Replace(objRecordSet.Fields("postalCode").Value, vbCrLf, vbNullString), vbTab, vbNullString))
            If Not IsNull(Len(objRecordSet.Fields("c").Value)) Then X(i, 10) = Trim(Replace(Replace(objRecordSet.Fields("c").Value, vbCrLf, vbNullString), vbTab, vbNullString))
            If Not IsNull(Len(objRecordSet.Fields("telephoneNumber").Value)) Then X(i, 11) = Trim(Replace(Replace(objRecordSet.Fields("telephoneNumber").Value, vbCrLf, vbNullString), vbTab, vbNullString))
            If Not IsNull(Len(objRecordSet.Fields("title").Value)) Then X(i, 12) = Trim(Replace(Replace(objRecordSet.Fields("title").Value, vbCrLf, vbNullString), vbTab, vbNullString))
            If Not IsNull(Len(objRecordSet.Fields("department").Value)) Then X(i, 13) = Trim(Replace(Replace(objRecordSet.Fields("department").Value, vbCrLf, vbNullString), vbTab, vbNullString))
            If Not IsNull(Len(objRecordSet.Fields("distinguishedName").Value)) Then X(i, 14) = Trim(Replace(Replace(objRecordSet.Fields("distinguishedName").Value, vbCrLf, vbNullString), vbTab, vbNullString))
            If Not IsNull(Len(objRecordSet.Fields("manager").Value)) Then X(i, 15) = Trim(Replace(Replace(objRecordSet.Fields("manager").Value, vbCrLf, vbNullString), vbTab, vbNullString))
            If Not IsNull(Len(objRecordSet.Fields("mail").Value)) Then X(i, 16) = Trim(Replace(Replace(objRecordSet.Fields("mail").Value, vbCrLf, vbNullString), vbTab, vbNullString))
            If Not IsNull(Len(objRecordSet.Fields("mobile").Value)) Then X(i, 17) = Trim(Replace(Replace(objRecordSet.Fields("mobile").Value, vbCrLf, vbNullString), vbTab, vbNullString))
            If Not IsNull(Len(objRecordSet.Fields("example").Value)) Then X(i, 18) = Trim(Replace(Replace(objRecordSet.Fields("role").Value, vbCrLf, vbNullString), vbTab, vbNullString))
            If Not IsNull(Len(objRecordSet.Fields("department").Value)) Then X(i, 19) = Trim(Replace(Replace(objRecordSet.Fields("department").Value, vbCrLf, vbNullString), vbTab, vbNullString))
            If Not IsNull(Len(objRecordSet.Fields("sAMAccountName").Value)) Then X(i, 20) = Trim(Replace(Replace(objRecordSet.Fields("sAMAccountName").Value, vbCrLf, vbNullString), vbTab, vbNullString))
            If Not IsNull(Len(objRecordSet.Fields("userPrincipalName").Value)) Then X(i, 21) = Trim(Replace(Replace(objRecordSet.Fields("userPrincipalName").Value, vbCrLf, vbNullString), vbTab, vbNullString))
            If Not IsNull(Len(objRecordSet.Fields("msExchAssistantName").Value)) Then X(i, 22) = Trim(Replace(Replace(objRecordSet.Fields("msExchAssistantName").Value, vbCrLf, vbNullString), vbTab, vbNullString))
            i = i + 1
            If i Mod 100 = 0 Then
                Application.StatusBar = "Processing record " & i
                DoEvents
            End If
            objRecordSet.MoveNext
        Loop
    Next

    ws.[A1:V200001] = X
    Application.StatusBar = vbNullString

    With ws.[a1:v1]
        .Font.Bold = True
        .Font.Size = 12
        .Font.Name = "Arial"
    End With
    ws.UsedRange.AutoFilter
    Rows("2:2").Select
    ActiveWindow.FreezePanes = True
End Sub 
```

2.  您可以通过 检索它`Active Directory`。

下面的代码返回我的电话号码，为我搜索通配符电子邮件地址`David.Y.XXX*`

我从 Excel 运行下面的代码

下面的关键代码片段，该`Get_LDAP_User_Properties`功能由 Rob Sampson 提供。

**调用子**

```
Sub Main()
MsgBox Get_LDAP_User_Properties("user", "mail", "David.Y.XXX*", "telephoneNumber")
End Sub 
```

**主功能**

```
Function Get_LDAP_User_Properties(strObjectType, strSearchField, strObjectToGet, strCommaDelimProps)

      ' This is a custom function that connects to the Active Directory, and returns the specific
      ' Active Directory attribute value, of a specific Object.
      ' strObjectType: usually "User" or "Computer"
      ' strSearchField: the field by which to seach the AD by. This acts like an SQL Query's WHERE clause.
      '             It filters the results by the value of strObjectToGet
      ' strObjectToGet: the value by which the results are filtered by, according the strSearchField.
      '             For example, if you are searching based on the user account name, strSearchField
      '             would be "samAccountName", and strObjectToGet would be that speicific account name,
      '             such as "jsmith".  This equates to "WHERE 'samAccountName' = 'jsmith'"
      ' strCommaDelimProps: the field from the object to actually return.  For example, if you wanted
      '             the home folder path, as defined by the AD, for a specific user, this would be
      '             "homeDirectory".  If you want to return the ADsPath so that you can bind to that
      '             user and get your own parameters from them, then use "ADsPath" as a return string,
      '             then bind to the user: Set objUser = GetObject("LDAP://" & strReturnADsPath)

      ' Now we're checking if the user account passed may have a domain already specified,
      ' in which case we connect to that domain in AD, instead of the default one.
      If InStr(strObjectToGet, "\") > 0 Then
            arrGroupBits = Split(strObjectToGet, "\")
            strDC = arrGroupBits(0)
            strDNSDomain = strDC & "/" & "DC=" & Replace(Mid(strDC, InStr(strDC, ".") + 1), ".", ",DC=")
            strObjectToGet = arrGroupBits(1)
      Else
      ' Otherwise we just connect to the default domain
            Set objRootDSE = GetObject("LDAP://RootDSE")
            strDNSDomain = objRootDSE.Get("defaultNamingContext")
      End If

      strBase = "<LDAP://" & strDNSDomain & ">"
      ' Setup ADO objects.
      Set adoCommand = CreateObject("ADODB.Command")
      Set ADOConnection = CreateObject("ADODB.Connection")
      ADOConnection.Provider = "ADsDSOObject"
      ADOConnection.Open "Active Directory Provider"
      adoCommand.ActiveConnection = ADOConnection

      ' Filter on user objects.
      'strFilter = "(&(objectCategory=person)(objectClass=user))"
      strFilter = "(&(objectClass=" & strObjectType & ")(" & strSearchField & "=" & strObjectToGet & "))"

      ' Comma delimited list of attribute values to retrieve.
      strAttributes = strCommaDelimProps
      arrProperties = Split(strCommaDelimProps, ",")

      ' Construct the LDAP syntax query.
      strQuery = strBase & ";" & strFilter & ";" & strAttributes & ";subtree"
      adoCommand.CommandText = strQuery
      ' Define the maximum records to return
      adoCommand.Properties("Page Size") = 100
      adoCommand.Properties("Timeout") = 30
      adoCommand.Properties("Cache Results") = False

      ' Run the query.
      Set adoRecordset = adoCommand.Execute
      ' Enumerate the resulting recordset.
      strReturnVal = ""
      Do Until adoRecordset.EOF
          ' Retrieve values and display.
          For intCount = LBound(arrProperties) To UBound(arrProperties)
                If strReturnVal = "" Then
                      strReturnVal = adoRecordset.Fields(intCount).Value
                Else
                      strReturnVal = strReturnVal & vbCrLf & adoRecordset.Fields(intCount).Value
                End If
          Next
          ' Move to the next record in the recordset.
          adoRecordset.MoveNext
      Loop

      ' Clean up.
      adoRecordset.Close
      ADOConnection.Close
      Get_LDAP_User_Properties = strReturnVal

End Function 
```

# android - 在与 RTSP 相同的端口上发送 RTP 包

> ID：13963555
> 
> 赞同：0
> 
> 时间：2012-12-20T00:35:06.943
> 
> 标签：android, rtsp, vlc, rtp

我有点困惑，希望你能帮助我。我正在我的 Android 上编写 rtsp 服务器。我遇到了一些问题，但有一些方法可以解决所有问题，除了一个。

描述：我的应用程序由 3 个模块 RTSP、RTP 和 UI 组成。跳过 UI 的描述。RTSP 开始侦听 tcp 端口 55555。然后在 VLC 中输入 rtsp://address:55555 然后握手和所有 RTSP 共享标头。Durung 标头程序共享通过 RTP 设置接收和设置端口，Android 应用程序开始发送一些字节，但是...

这就是问题所在：VLC 中没有任何图像。所以我查看了日志并：

```
main debug: resyncing on rtsp://192.168.1.143:55555
main debug: rtsp://192.168.1.143:55555 is at 2
main debug: starting playback of the new playlist item
main debug: resyncing on rtsp://192.168.1.143:55555
main debug: rtsp://192.168.1.143:55555 is at 2
main debug: creating new input thread
main debug: Creating an input for 'rtsp://192.168.1.143:55555'
main debug: using timeshift granularity of 50 MiB, in path 'D:\Users\Adrian\AppData\Local\Temp'
main debug: `rtsp://192.168.1.143:55555' gives access `rtsp' demux `' path `192.168.1.143:55555'
main debug: creating demux: access='rtsp' demux='' location='192.168.1.143:55555' file='\\192.168.1.143:55555'
main debug: looking for access_demux module: 1 candidate
live555 debug: version 2012.09.13
qt4 debug: IM: Setting an input
live555 debug: RTP subsession 'video/JPEG'
main debug: selecting program id=0
live555 debug: setup start: 0.000000 stop:100.000000
live555 debug: We have a timeout of 600 seconds
live555 debug: spawned timeout thread
live555 debug: play start: 0.000000 stop:100.000000
main debug: using access_demux module "live555"
main debug: TIMER module_need() : 155.608 ms - Total 155.608 ms / 1 intvls (Avg 155.608 ms)
main debug: looking for decoder module: 32 candidates
avcodec debug: libavcodec already initialized
avcodec debug: trying to use direct rendering
avcodec debug: allowing 4 thread(s) for decoding
avcodec debug: ffmpeg codec (Motion JPEG Video) started
main debug: using decoder module "avcodec"
main debug: TIMER module_need() : 1.511 ms - Total 1.511 ms / 1 intvls (Avg 1.511 ms)
main debug: looking for meta reader module: 2 candidates
lua debug: Trying Lua scripts in D:\Users\Adrian\AppData\Roaming\vlc\lua\meta\reader
lua debug: Trying Lua scripts in E:\VideoLAN\VLC\lua\meta\reader
lua debug: Trying Lua playlist script E:\VideoLAN\VLC\lua\meta\reader\filename.luac
main debug: no meta reader module matching "any" could be loaded
main debug: TIMER module_need() : 1.981 ms - Total 1.981 ms / 1 intvls (Avg 1.981 ms)
main debug: `rtsp://192.168.1.143:55555' successfully opened
live555 warning: no data received in 10s. Switching to TCP
main debug: removing module "avcodec"
avcodec debug: ffmpeg codec (Motion JPEG Video) stopped
main debug: killing decoder fourcc `MJPG', 0 PES in FIFO
main debug: Program doesn't contain anymore ES
live555 debug: RTP subsession 'video/JPEG'
main debug: looking for decoder module: 32 candidates
avcodec debug: libavcodec already initialized
avcodec debug: trying to use direct rendering
avcodec debug: allowing 4 thread(s) for decoding
avcodec debug: ffmpeg codec (Motion JPEG Video) started
main debug: using decoder module "avcodec"
main debug: TIMER module_need() : 1.352 ms - Total 1.352 ms / 1 intvls (Avg 1.352 ms)
live555 debug: setup start: 0.000000 stop:100.000000
live555 debug: play start: 0.000000 stop:100.000000
live555 error: no data received in 10s, aborting
main debug: EOF reached
main debug: finished input
main debug: removing module "avcodec"
avcodec debug: ffmpeg codec (Motion JPEG Video) stopped
main debug: killing decoder fourcc `MJPG', 0 PES in FIFO
main debug: removing module "live555"
main debug: Program doesn't contain anymore ES
main debug: dead input
main debug: changing item without a request (current 2/3)
main debug: nothing to play
qt4 debug: IM: Deleting the input
main debug: TIMER input launching for 'rtsp://192.168.1.143:55555' : 161.112 ms - Total 161.112 ms / 1 intvls (Avg 161.112 ms)
qt4 debug: Small
qt4 debug: Saving the simple preferences
main debug: opening config file (D:\Users\Adrian\AppData\Roaming\vlc\vlcrc) 
```

我的问题是：我是否必须在与 RTSP 相同的端口上发送流？我指望您的帮助，因为有很多代码需要更改。

请原谅我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:09:38.030

流视频未通过 udp 到达 VLC。这就是为什么在 10 秒超时后它会尝试回退并通过 tcp 接收媒体的原因。你可以看看rtp/rtsp/tcp。这是一个允许在与 rtsp 相同的套接字上发送 rtp 数据包的协议。

# ios - iOS：子视图隐藏的 UITableView 滚动条

> ID：13963561
> 
> 赞同：3
> 
> 时间：2012-12-20T00:35:50.347
> 
> 标签：ios, scrollbar, tableview

我的 UITableView 有一个固定位置的子视图。但是当我滚动时，滚动条被子视图隐藏。我怎样才能避免这种情况？

＃＃ 编辑 ＃＃

```
self.menuViewRelative = [[UIView alloc] init];
self.menuViewRelative.backgroundColor = [UIColor whiteColor];
self.menuViewRelative.opaque = YES;
self.menuViewRelative.frame = CGRectMake(0.0, -1.0, 320.0, 50.0);
[self.view insertSubview:self.menuViewRelative atIndex:11]; 
```

该子视图现在位于 10 个其他子视图之上，并且恰好位于 scrollView 下方的 1 层（因此它完美地显示了滚动指示器）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T04:01:24.600

根据 Jesse Rusak 的评论添加作为答案。

以这样的方式为表格视图设置`scrollIndicatorInsets`滚动条将移动到子视图不会重叠的位置。

例如：-

```
self.tableView.scrollIndicatorInsets = UIEdgeInsetsMake(0, 0, 0, 7.0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T11:47:24.783

你用`addSubview:`这个吗？这将使它成为最顶层的子视图，它将覆盖滚动条。如果您改为使用`insertSubview:atIndex:`并确保它位于表格视图中其他内容的*上方*，则它将位于滚动条下方。

您可能需要覆盖`layoutSubviews`UITableView （就像我在[这个相关问题](https://stackoverflow.com/questions/10166147/overlapping-uitableviewcell-content-views/10166301#10166301)中描述的那样）并查看表格视图的内容，以便将浮动视图保持在表格视图单元格的上方。

# makefile - 对带空格的文件名使用 makefile 通配符命令

> ID：13963563
> 
> 赞同：18
> 
> 时间：2012-12-20T00:36:24.183
> 
> 标签：makefile

我有一个用于压缩图片的生成文件：

```
src=$(wildcard Photos/*.jpg) $(wildcard Photos/*.JPG)
out=$(subst Photos,Compressed,$(src))

all : $(out)

clean:
    @rmdir -r Compressed

Compressed:
    @mkdir Compressed

Compressed/%.jpg: Photos/%.jpg Compressed
    @echo "Compressing $<"
    @convert "$<" -scale 20% "$@"

Compressed/%.JPG: Photos/%.JPG Compressed
    @echo "Compressing $<"
    @convert "$<" -scale 20% "$@" 
```

但是，当我的图片名称中有空格时，例如`Piper PA-28-236 Dakota.JPG`，我收到此错误：

```
make: *** No rule to make target `Compressed/Piper', needed by `all'.  Stop. 
```

我认为这是`wildcard`命令中的一个问题，但我不确定要更改什么才能使其正常工作。

**如何修改我的 makefile 以允许文件名中有空格？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-20T01:15:49.547

通常在文件名中有空格对于 make 来说是个坏主意，但对于您的情况，这可能有效：

```
src=$(shell find Photos/ -iname '*.JPG' | sed 's/ /\\ /g')

out=$(subst Photos,Compressed,$(src))

all : $(out)

Compressed:
  @mkdir Compressed

Compressed/%: Photos/% Compressed
  @echo "Compressing $<"
  @convert "$<" -scale 20% "$@" 
```

# css - 如何在 ul li 内垂直居中定位标记文本

> ID：13963564
> 
> 赞同：1
> 
> 时间：2012-12-20T00:36:26.427
> 
> 标签：css, html-lists, anchor, vertical-alignment

这是我的html：

```
<ul id="sub_nav" class="block_hide trim no_list no_line" style="display: block; left: 524.5px;">
<li><a href="/path1" class="one">1st button</a></li>
<li><a href="/path2" class="one">2nd button</a></li>
<li><a href="/path3" class="one">3rd button</a></li>
</ul> 
```

如果我目前拥有的话，我还附上了一张图片。我尝试添加 display: table-cell; 垂直对齐：中间；到锚标记类，但它不起作用我还尝试在锚标记周围添加一个跨度，其类具有：显示：表格单元；垂直对齐：中间；但这也不起作用，在这两种情况下按钮的高度都不是恒定的。

如何垂直居中文本并保持按钮的高度和宽度相同？

![在此处输入图像描述](../Images/ed59b99ecadf3381c0d63ef771ddc47f.png)

最终选择了 display:table-cell 解决方案，因为它是最跨浏览器的解决方案……一开始我不喜欢它，因为我不得不硬编码按钮的宽度而不是 100% 但是一旦我过去了这是一个可靠的解决方案：我的李：

```
.header #sub_nav li {
    display: table;
    float: left;
    font-size: 11px;
    line-height: 12px;
    margin-bottom: 12px;
    margin-left: 12px;
    width: 86%;
} 
```

我的一个：

```
 .header #sub_nav li a {
    display: table-cell;
    height: 45px;
    vertical-align: middle;
    width: 111px;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T00:45:20.037

我做的事情类似于你所要求的。将父级定义为“display: table”，元素本身使用“vertical-align:middle”和“display:table-cell”对我有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T00:46:38.977

如果 li（或 div 等）中只有一项，最简单的方法是将 line-height 设置为与元素的高度相同，并且垂直对齐。我在下面创建了一个简单的小提琴，希望对您有所帮助！ [http://jsfiddle.net/fCkLJ/](http://jsfiddle.net/fCkLJ/)

```
li {
  /* other styling */
  height: 30px;
  line-height: 30px; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T02:09:24.920

尝试：

```
li{
padding-top:20%;
padding-bottom:20%;
} 
```

这将导致在 LI 上均匀填充顶部/底部，但如果一个 LI 包裹而另一个不包裹，它们将是不同的高度。

[http://jsfiddle.net/VMCH6/1/](http://jsfiddle.net/VMCH6/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T01:37:47.257

如果你正在使用`background-image`，那么你应该为元素设置一个固定的宽度高度，`li.a`并将这个技巧用于 a 元素：

```
li a {
    height: 50px;
    width: 300px;
    margin: auto 0;
    display: block;
    display: -webkit-box;
    display: -moz-box;
    display: box;
    -webkit-box-align: center;
    -moz-box-align: center;
    box-align: center;
} 
```

这是工作示例（即使您的图像作为背景）。完整的按钮将是可点击的，并且是多行的灵活性：

[http://jsfiddle.net/GqBAL/494/](http://jsfiddle.net/GqBAL/494/)

**注意：**这不是 100% 跨浏览器，但它是最好的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T00:43:26.070

方法很多，[看这里](http://www.jakpsatweb.cz/css/priklady/vertical-align-valid-solution-en.html)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-03-05T06:02:22.923

我没有足够的 HTML/CSS 知识，但我认为没关系。

在这个答案中，我删除了高度`UL/LI`并提供了自动高度，并且在锚`<a>`标记中我使用了填充来显示一个`bigger-height-centralized`按钮。

CSS部分是：

```
<style>
html , body , ul , li 
{
    margin:0;
    padding:0;
}
html , body
{
    width:100%;
    height:100%;
}
ul
{
    width:100%;
    height:auto;    
    background-color:red;
}
li
{
    width:33%;
    height:auto;    
    display:inline-block;
    background-color:green; 
}
a
{
    width:100%;
    height:100%;
    text-align:center;
    display:block;
    padding-top:10%;
    padding-bottom:10%;
}
</style> 
```

HTML部分是：

```
<body>
<ul>
<li><a href="">tushar</a></li>
<li><a href="">tushar</a></li>
<li><a href="">tushar</a></li>
</ul>
</body> 
```

# css - Firefox 与 Chrome 之间奇怪的 CSS 差距

> ID：13963566
> 
> 赞同：0
> 
> 时间：2012-12-20T00:36:33.293
> 
> 标签：css, google-chrome, firefox

我有一个让我完全困惑的问题。

我目前正在处理客户的网站和 Chrome，导航栏的右侧有 1px 的间隙（当您将鼠标悬停在“联系人”时更明显）但是 firefox 很好。但是在 Firefox 上，如果你去 (http://meskholdings.com/about) 有一个巨大的差距，但在 Chrome 上它不存在。

整天都在努力处理这个问题，我不知道发生了什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T00:42:29.827

在处理像素分数时，您将得到不一致的结果。我建议替换锚元素上的填充（0 左右填充），给锚元素 text-align center 和 20% 的宽度。

```
nav li a {
  width:20%;
  padding:10px 0;
  text-align:center;
} 
```

# javascript - Firefox 17 中的 UniversalXPConnect 权限错误

> ID：13963570
> 
> 赞同：3
> 
> 时间：2012-12-20T00:37:42.513
> 
> 标签：javascript, firefox, universalxpconnect

我有一个小型 Web JS，它可以在 iframe 中复制和插入一些表单数据。但它在 Firefox 17 中不起作用。我正在使用以下代码：

```
"netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");" 
```

有什么问题？有什么解决方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T00:45:45.907

它已从使用 Firefox 17 在网络上运行中删除

[https://developer.mozilla.org/en-US/docs/Bypassing_Security_Restrictions_and_Signing_Code](https://developer.mozilla.org/en-US/docs/Bypassing_Security_Restrictions_and_Signing_Code)

> 早期版本的 Firefox 允许网站使用签名脚本隔离主体，并使用名为 enablePrivelege 的函数为签名脚本中的范围请求额外权限。这些特性没有被太多使用（除了滥用），而且它的复杂性使得性能改进变得困难。在错误 726125 中删除了签名脚本隔离，在错误 750859 中删除了 enablePrivilege 提示，在错误 757046 中削弱了 enablePrivilege 本身。
> 
> EnablePrivilege 在 Firefox 15 中被禁用，并将在 Firefox 17 中删除。
> 
> 需要额外权限的网站现在应该要求 Firefox 用户安装一个扩展，如果需要，它可以与非特权页面交互。

以及关于进行扩展的讨论：http: [//support.mozilla.org/en-US/questions/936845](http://support.mozilla.org/en-US/questions/936845)

# c# - 如何将 MultiSelectList 拆分为 n 个项目并使用标记包装每个分区的项目组

> ID：13963572
> 
> 赞同：1
> 
> 时间：2012-12-20T00:38:13.853
> 
> 标签：c#, asp.net-mvc-3, linq

有没有什么好的方法可以分解下面的 multiSelectList 并包装 n 个项目？可能使用一些 linq 扩展？

例如，在 <div> 中一次包装 4 个项目，然后再将其添加到 divTag.InnerHtml？显然必须先检查是否有足够的物品？

```
foreach (SelectListItem item in multiSelectList)
{
    divTag.InnerHtml += String.Format("<label for=\"{0}_{1}\">{3}" +
                                      "<input type=\"checkbox\" name=\"{0}\" id=\"{0}_{1}\" value=\"{1}\" {2} />" +
                                      "</label>",
                                      propertyName,
                                      item.Value,
                                      selectedValues.Contains(item.Value) ? "checked=\"checked\"" : "",
                                      item.Text);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T00:49:26.313

[MoreLINQ](http://code.google.com/p/morelinq/)（在 NuGet 上搜索）具有扩展`Batch`，允许您从任何序列进行批处理。也许这就是你要找的。

```
foreach(var batch in multiSelectList.Batch(4))
{
   // every batch will contain 4 items (well, except last one possibly)
   foreach(SelectListItem item in batch)
   {
       //...
   }
} 
```

# c# - 循环遍历 C# 中的列表

> ID：13963574
> 
> 赞同：-2
> 
> 时间：2012-12-20T00:38:33.890
> 
> 标签：c#

假设我有一个包含 5 个值的列表。

```
List<Item> Test
Test[0] 
{Item.category,Item.Number,Item.Format,Item.Order} etc 
```

我的要求是我必须根据这个列表中的值编写一些 HTML 代码。

应该写的方式是相同的 Item.Category 值应该写在一起，意思是如果有 5 个值，`item.category`其中 3 个相同，另外 2 个不同，那么这 3 个项目应该组合在一起，意思是`item.category`标题其他值如数字、格式等将是标题内的内容。

它应该显示如下内容：

```
<h1>Item.category(the 3 same categories should appear here just one)</h1>
{
  all other elements * 3 times

  } 
```

如果我使阅读和理解变得困难，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T00:46:26.297

首先按类别对列表进行排序：

```
Test.Sort((x, y) => x.Category.CompareTo(y.Category)); 
```

当您遍历项目时，跟踪当前类别，并在它发生变化时写出一个标题：

```
string category = null;
foreach (Item item in Test) {
  if (category != item.Category) {
    category == item.Category;
    %><h1><%: item.Category %></h1><%
  }
  // output item here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T00:48:47.227

你的问题有点难以理解，但我猜你想根据类别显示项目，每个项目出现在其适当的类别下，每个类别只显示一次。

你可以尝试这样的事情：

```
<% foreach(var g in Test.GroupBy(i => i.category)) { %>
    <h1><%= g.Key %></h1>
    <ul>
    <% foreach(var i in g) { %>
        <li><%= String.Format("Number: {0}, Format: {1}, Order: {2}",
                              i.Number,
                              i.Format,
                              i.Order) %></li>
    <% } %>
<% } %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T00:52:07.563

快速建议：

遍历*List< Item > Test并在新**List< Item > newTest*中复制每个项目的项目：使用 newTest.Add(item);

但首先，在 .Add(); 之前 ：

1.  如果该项目已存在，请查看 newTest-List。如果是，不要复制，如果不是，复制！

2.  结果：newTest-List 将仅包含不同的（无双）条目

3.  遍历 newTest-List 并在 newTest-List 的基础上创建您的 html 元素！（for 或 foreach）

# cordova - PhoneGap / Cordova 是否允许您的应用程序在使用设备的相机时具有自定义 UI 界面？

> ID：13963576
> 
> 赞同：6
> 
> 时间：2012-12-20T00:38:42.493
> 
> 标签：cordova

例如，像 Instagram 这样的原生应用程序有自己的拍照界面。PhoneGap / Cordova 是否允许您构建类似的界面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T06:41:43.387

科尔多瓦“核心”有一个[camera.getPicture](http://docs.phonegap.com/en/1.0.0/phonegap_camera_camera.md.html)功能，允许您访问相机（跨所有平台，iOS，Android ...）。但是，此操作的 UI 是特定于平台的。换句话说，您的应用程序使用相机的方式在每个平台上都会有所不同。

如果您想自定义相机体验，您将不得不编写自己的插件。这涉及为您希望涵盖的每个平台编写本机实现，以及为您的插件编写 JavaScript“绑定”。

此时，您开始失去使用 Cordova 的许多关键优势！也许考虑像 Xamarin 这样的替代品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T04:14:00.060

是的，您只需要构建自己的相机插件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-20T01:03:06.767

就我的想法而言。是的，但这需要你改变 phonegap 的核心。

# asp.net-mvc-4 - 使用 mvc 4 中的 wkhtmltopdf 将 Html 中的图像转换为 PDF

> ID：13963579
> 
> 赞同：2
> 
> 时间：2012-12-20T00:39:07.160
> 
> 标签：asp.net-mvc-4, wkhtmltopdf

我正在使用 wkhtmltopdf 将 html 转换为 pdf。我正在使用 mvc 4。我能够将 html 转换为 pdf。我唯一的问题是图像不渲染。图像应该出现的地方有一个小矩形。我在数据库中有我的图像，所以当我在控制器中获取 html 字符串时，这就是在我将此字符串传递给转换器之前图像的显示方式：

```
<img src="/Images/Image/GetImageThumbnail?idImage=300" alt=""/> 
```

所以我认为这种方法不起作用，因为我将字符串传递给转换器，因此无法渲染图像。如果图像在数据库中，任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:13:19.617

`src="/img/derp.png"`我通过将 src 替换为to解决了类似的问题`src="http://localhost/img/derp.png"`。我从控制器收到的请求中获取主机部分。

```
// Here I'm actually processing with HtmlAgilityPack but you get the idea
string host = request.Headers["host"];
string src = node.Attributes["src"].Value;
node.Attributes["src"].Value = "http://" + host + src; 
```

这意味着服务器也必须能够直接从这样的 URL 中吐出图像。

我想如果您的 HTML 在字符串中，也可以使用 string.Replace 来完成

```
string host = request.Headers["host"];
html = html.Replace("src=\"/", "src=\"http://"+host+"/"); // not tested 
```

# iphone - 奇怪的自定义 segue 行为 - 导航堆栈损坏

> ID：13963581
> 
> 赞同：2
> 
> 时间：2012-12-20T00:39:31.270
> 
> 标签：iphone, objective-c, ios, uinavigationcontroller, uistoryboard

我有一个使用故事板的大型应用程序，其中包含许多转换。转换应该是从右到左，所以我做了一个自定义的 segue 来执行它。

当我使用常规转换时，我推入导航堆栈的每个视图控制器都会被保留，直到我弹出它。

虽然使用自定义 segues 不会保留前一个控制器（推动当前控制器的那个），并且当我弹回时，控制器的实例会获得不同的内存地址，这表明指针已更改。

这是自定义推送序列：

```
UIViewController *sourceViewController = (UIViewController*)[self         sourceViewController];
UIViewController *destinationController = (UIViewController*)[self   destinationViewController];

CATransition* transition = [CATransition animation];
transition.duration = .3f;
transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
transition.type = kCATransitionPush;
transition.subtype = kCATransitionFromLeft;

[sourceViewController.navigationController.view.layer addAnimation:transition
                                                            forKey:kCATransition];

[sourceViewController.navigationController pushViewController:destinationController animated:NO]; 
```

和自定义流行segue：

```
UIViewController *sourceViewController = (UIViewController*)[self sourceViewController];
UIViewController *destinationController = (UIViewController*)[self destinationViewController];

CATransition* transition = [CATransition animation];
transition.duration = .3f;
transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
transition.type = kCATransitionPush;
transition.subtype = kCATransitionFromRight;

[sourceViewController.navigationController.view.layer addAnimation:transition
                                                            forKey:kCATransition];

[sourceViewController.navigationController pushViewController:destinationController animated:NO]; 
```

我用这种方法执行segue：

```
[self performSegueWithIdentifier:@"SearchToMenu" sender:self]; 
```

似乎没有任何效果，我还没有在网上找到任何东西。

如果我需要提供更多代码示例、截图等，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T02:28:34.083

您的 popViewController 正在推送，而不是弹出。

这一行：

```
 [sourceViewController.navigationController pushViewController:destinationController animated:NO]; 
```

应该：

```
[sourceViewController.navigationController popViewControllerAnimated:NO]; 
```

您的自定义 segue 确实保留了以前的控制器。但是 segue 的destinationController 始终是一个新实例化的对象。您注意到您为新控制器获得了不同的内存地址，但是如果您检查`[self.navigationController viewControllers]`堆栈，您会发现原来的 viewController 仍然存在，堆栈上的三个对象。在这个更正的版本中，您将按照您的意愿返回到 viewContoller 的该实例。

这就是为什么你永远不应该使用标准的 push segue 来导航回堆栈中较低的任何位置。尽管情节提要会暗示这将发生，但这是虚幻的：您只是在导航到前一个 viewController 类的新实例。它在初始状态下看起来与前一个完全相同，因为它使用相同的 Storyboard 布局。

你的例子是一个很好的例子，最好不要使用segue。这不仅在这一点上令人困惑，而且当您弹回时，如果您尝试在 prepareForSegue 中配置“destinationViewController”，它不会对您弹回的 viewController 产生任何影响。您可能还注意到 Storyboard 变得一团糟，因为它忘记了哪个 viewController 包含在哪个 NavController 中。您完全失去了导航栏和配置它们的能力（在故事板中 - 它们仍然存在于应用程序中）。

# asp.net - ASP.NET Web API 完成发送到客户端时是否有通知

> ID：13963591
> 
> 赞同：7
> 
> 时间：2012-12-20T00:41:02.973
> 
> 标签：asp.net, asp.net-web-api

我正在使用 Web API 将大文件流式传输到客户端，但我想记录下载是否成功。也就是说，如果服务器发送了文件的全部内容。

`HttpResponseMessage`完成发送数据后，是否有某种方法可以获取回调或事件？

也许是这样的：

```
var stream = GetMyStream();
var response = new HttpResponseMessage(HttpStatusCode.OK);
response.Content = new StreamContent(stream);
response.Content.Headers.ContentType = new MediaTypeHeaderValue("application/octet-stream");    
// This doesn't exist, but it illustrates what I'm trying to do.
response.OnComplete(context =>
{
    if (context.Success)
        Log.Info("File downloaded successfully.");
    else
        Log.Warn("File download was terminated by client.");
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T02:29:16.217

编辑：我现在已经使用真实连接（通过提琴手）对此进行了测试。

我继承`StreamContent`并添加了自己的`OnComplete`操作来检查异常：

```
public class StreamContentWithCompletion : StreamContent
{
    public StreamContentWithCompletion(Stream stream) : base (stream) { }
    public StreamContentWithCompletion(Stream stream, Action<Exception> onComplete) : base(stream) 
    { 
        this.OnComplete = onComplete; 
    }

    public Action<Exception> OnComplete { get; set; }

    protected override Task SerializeToStreamAsync(Stream stream, TransportContext context)
    {
        var t = base.SerializeToStreamAsync(stream, context);
        t.ContinueWith(x =>
        {
            if (this.OnComplete != null)
            {
                // The task will be in a faulted state if something went wrong. 
                // I observed the following exception when I aborted the fiddler session: 
                // 'System.Web.HttpException (0x800704CD): The remote host closed the connection.'
                if (x.IsFaulted)
                    this.OnComplete(x.Exception.GetBaseException());
                else
                    this.OnComplete(null);
            }
        }, TaskContinuationOptions.ExecuteSynchronously);
        return t;
    }
} 
```

然后我像这样使用它：

```
var stream = GetMyStream();
var response = new HttpResponseMessage(HttpStatusCode.OK);
response.Content = new StreamContentWithCompletion(stream, ex =>
{
    if (ex == null)
        Log.Info("File downloaded successfully.");
    else
        Log.Warn("File download was terminated by client.");
});
response.Content.Headers.ContentType = new MediaTypeHeaderValue("application/octet-stream");    
return response; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T00:50:14.563

我不确定是否有直接信号表明一切正常，但是您可以使用一个技巧来找出连接在您结束之前以及在您完全发送文件之后是否存在。

例如，`Response.IsClientConnected`如果客户端仍然连接，则返回 true，因此您可以检查以下内容：

```
// send the file, make a flush
Response.Flush();
// and now the file is fully sended check if the client is still connected
if(Response.IsClientConnected)
{
  // log that all looks ok until the last byte.
}
else
{
  // the client is not connected, so maybe have lost some data
}

// and now close the connection.
Response.End(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T09:54:50.307

> 如果服务器发送了文件的全部内容

其实没什么可做的:)

这听起来可能非常简单，但您会知道是否引发了异常 - 如果您关心服务器交付而不是客户端取消中途。`IsClientConnected`基于 ASP.NET`HttpResponse`而不是 WebApi。

# javascript - 谷歌浏览器扩展 POST VS GET

> ID：13963595
> 
> 赞同：0
> 
> 时间：2012-12-20T00:41:10.840
> 
> 标签：javascript, google-chrome, google-chrome-extension

这是我的代码

```
chrome.windows.create({'url': "http://example.com/upload/upload.php?pictureID="+ theResponse + "&userID=" + localStorage["id"]+"&username="+  localStorage["mainLogin"]}, function(tab) {
  // open window
}); 
```

这构造了一个如下所示的 URL：

```
http://example.com/upload/upload.php?pictureID=123&userID=1&username=jack 
```

我会称这种方法`GET`为 - 就像表单`GET`或`POST`

如何打开带有`POST`数据而不是`GET`数据的窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:14:33.103

我认为您必须编写一个 HTML 页面来创建一个包含您的 POST 数据和目标 URL 的表单并提交该表单。这是一个简单的例子：

```
<html>
<head>
<script>
document.addEventListener('DOMContentLoaded', function()
{
    location.search.substr(1).split('&').forEach(function(item)
    {
        var input = document.createElement('input');
        input.type = 'hidden';
        input.name = item.substr(0, item.indexOf('='));
        input.value = item.substr(item.indexOf('=') + 1);
        document.getElementById('postform').appendChild(input);
    });
    document.getElementById('postform').submit();
});
</script>
</head>
<body>
<form action="http://example.com/upload/upload.php" method="post" id="postform">
</form>
</body>
</html> 
```

假设它是您扩展程序根目录中的 test.html。称呼

```
chrome.windows.create({'url': "test.html?pictureID="+ theResponse + "&userID=" + localStorage["id"]+"&username="+  localStorage["mainLogin"]}, function(tab) {
  // open window
}); 
```

将使用 POST 方法打开网站。

# wordpress - 部署 wordpress 数据库设置而不是内容

> ID：13963597
> 
> 赞同：2
> 
> 时间：2012-12-20T00:41:15.607
> 
> 标签：wordpress, git, deployment, web-deployment

无需迁移整个数据库即可将 wordpress 数据库设置部署到生产环境的最佳方法是什么？我正在使用 git 和[https://github.com/wp-cli/wp-cli](https://github.com/wp-cli/wp-cli)。如果我有一个开发分支结帐需要将其合并回 master，则必须有一种方法来部署数据库设置，而无需迁移包括内容在内的完整数据库。在 Drupal 中有一个名为“Features”的模块来处理这个过程。任何关于跨多个开发环境的 wordpress 部署过程的建议都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T02:57:41.503

您不能定义“模块”，WordPress 术语是插件，在`wp-config.php`插件设置存储在表 _options 表中，但有些插件使用多行，其他插件创建全新的表。

如果插件没有导出/导入设置的选项，您几乎可以忘记它。您必须深入研究代码以找出数据库中行的名称以及插件是否创建新表。

# c# - WPF Surface：Tag Visualizer 如何将触摸发送到其下方的 bing 地图？

> ID：13963599
> 
> 赞同：1
> 
> 时间：2012-12-20T00:41:19.240
> 
> 标签：c#, wpf, bing-maps, pixelsense

当我在我的 Surface 表上放置一个字节标签时，标签可视化器应能识别该标签，并在标签对象下方显示标签可视化（只是一个黑色圆圈）。

在我的标签可视化下方是一个 WPF Bing 地图控件。

问题是：地图将识别的标签视为接触点。对于将标签放置在屏幕上时产生的 TouchFrameEventArgs e：

```
e.GetTouchPoints(myMap)
Count = 1
[0]: {Microsoft.Surface.Presentation.Input.SurfaceTouchPoint} 
```

即使此 touchPoint 的 TouchDevice 由 TagVisualizer 而不是地图捕获，地图控件也会获得一个触摸点：

```
_touchPoint.TouchDevice.Captured.ToString()
"Microsoft.Surface.Presentation.Controls.TagVisualizer" 
```

为什么会这样？也就是为什么在TagVisualizer 捕捉到标签之后地图控件会得到一个触摸点？

这是一个问题，因为当一个标签在桌子上时，地图无法通过其他触摸正常平移和缩放……因为它将标签视为另一个手指！我想停下来！

标签可视化器横跨整个屏幕，因此整个应用程序是可视化器的子元素。

我正在为 Surface 制造的设备、实际的 MS Surface Table（Samsung SUR40）开发程序，并在不是为 Surface 设计的普通触摸屏显示器上开发我的程序（使用输入模拟器对其进行测试）。有趣的是，这个问题发生在实际的 Surface 表上，但在不是为 Surface 制作的显示器上（即使用输入模拟器），症状有所不同。

我努力了：

```
this.myMap.ReleaseTouchCapture(_touchPoint.TouchDevice); 
```

...在识别标签本身的触摸事件之后，但这并没有做任何事情，因为触摸实际上并没有被地图控件捕获。

有人能帮忙吗？有谁知道 Bing Maps WPF 控件如何使用触摸事件？或者 TagVisualizer 如何将标签视为触摸？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:30:32.610

在对此进行了更多故障排除之后，来自标签的触摸事件似乎实际上来自标签区域之外的物理对象。我用吸收红外的黑色覆盖了物体（使其对红外摄像机不可见），从而消除了触摸事件。问题解决了！

事实证明，当标签被识别时，TagVisualizer 不会发送触摸事件。

# xsd - xml 模式：将出现限制为同级元素序列基数

> ID：13963604
> 
> 赞同：0
> 
> 时间：2012-12-20T00:42:00.090
> 
> 标签：xsd

鉴于：

```
<xs:complexType name="SymbolsList" final="">
    <xs:sequence>
        <xs:element name="symbol" maxOccurs="unbounded">
            <xs:complexType>
                <xs:attribute name="name" type="xs:string" />
            </xs:complexType>
        </xs:element>
    </xs:sequence>
</xs:complexType>
<xs:complexType name="ComboList">
    <xs:sequence>
        <xs:element name="combo" maxOccurs="unbounded">
            <xs:complexType>
                <xs:sequence>
                    <xs:element name="symbol" maxOccurs="unbounded">
                        <xs:complexType>
                            <xs:attribute name="name" type="xs:string" />
                        </xs:complexType>
                    </xs:element>
                </xs:sequence>
                <xs:attribute name="comboName" type="xs:string" />
            </xs:complexType>
        </xs:element>
    </xs:sequence>
</xs:complexType>
<xs:element name="symbolsList" type="SymbolsList">
  <xs:unique name="uniqueSymbol">
    <xs:selector xpath="./symbol" />
    <xs:field xpath="@name" />
  </xs:unique>
</xs:element>
<xs:element name="combosList" type="ComboList">
  <xs:unique name="uniqueCombo">
    <xs:selector xpath="./combo" />
    <xs:field xpath="@comboName" />
  </xs:unique>
</xs:element> 
```

我相信这定义了一个符号列表和这些符号的组合列表。交易品种列表中的每个条目都必须有一个唯一的名称，并且组合列表中的每个条目都必须有一个唯一的 comboName。我想知道的是，我是否有办法将 combosList 序列中允许出现的次数限制为至少符号列表中定义的符号数。

我想我在问基数限制是否可以是可变的，如果可以，如何关联它的限制？

我还想让 comboList 元素（单个组合）只能使用 symbolList 元素中定义的符号名称。

我想我可以拉出最后一部分。我在任何地方都找不到任何关于将不同元素序列的基数限制为大于或等于一个或另一个的内容。

也许这是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:46:10.150

XSD 要求在声明中逐字指定约束的基数；您想到的那种动态计算不在 XSD 的设计空间中。

在 XSD 1.1 中，您可以向 SymbolsList 和 CombosList 的一些共同祖先添加一个断言，这需要

```
count(CombosList/combo) ge count(SymbolsList/symbol) 
```

Saxon EE 和 Xerces J 支持 XSD 1.1（在后一种情况下，您必须查找 1.1 发行版，或者我最后一次查找）。（一个警告：请注意，Xerces J 不支持断言中的所有 XPath 2.0，而且我实际上还没有检查此断言是否包含在符合 1.1 实现的 XPath XSD 的最小子集内。在下沉之前进一步调查这里有很多时间。）

# c# - VB.Net 中的不安全

> ID：13963607
> 
> 赞同：4
> 
> 时间：2012-12-20T00:42:20.387
> 
> 标签：c#, vb.net, bitmap, unsafe

我需要将函数 C# 传递给 VB.NET，但在 C# 中我有类似的东西：

```
unsafe
{
    byte* pSmall = (byte*)(void*)smallData.Scan0;
    byte* pBig = (byte*)(void*)bigData.Scan0;

    int smallOffset = smallStride - smallBmp.Width * 3;
    int bigOffset = bigStride - bigBmp.Width * 3;

    bool matchFound = true;
    ....
} 
```

我在一些博客中读到 VB.Net 中不存在“不安全”。问题是：我可以用什么代替`unsafe`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T00:48:51.913

您阅读的博客是正确的，因为没有办法在 VB.NET 中使用不安全的代码。您似乎想要操作（可能读取像素数据？）位图文件。在 C# 中，您可以使用不安全的代码来获得比该`GetPixel`方法更大的性能提升。在 VB.NET 中，您可以尝试查看[LockBits](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.lockbits.aspx)。

[这个页面](http://www.vb-helper.com/howto_net_lockbits_image.html)上有一个如何使用它的例子。

```
Public g_RowSizeBytes As Integer
Public g_PixBytes() As Byte

Private m_BitmapData As BitmapData

' Lock the bitmap's data.
Public Sub LockBitmap(ByVal bm As Bitmap)
    ' Lock the bitmap data.
    Dim bounds As Rectangle = New Rectangle( _
        0, 0, bm.Width, bm.Height)
    m_BitmapData = bm.LockBits(bounds, _
        Imaging.ImageLockMode.ReadWrite, _
        Imaging.PixelFormat.Format24bppRgb)
    g_RowSizeBytes = m_BitmapData.Stride

    ' Allocate room for the data.
    Dim total_size As Integer = m_BitmapData.Stride * _
        m_BitmapData.Height
    ReDim g_PixBytes(total_size)

    ' Copy the data into the g_PixBytes array.
    Marshal.Copy(m_BitmapData.Scan0, g_PixBytes, _
        0, total_size)
End Sub 
```

该页面还显示了如何解锁位图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-04T18:33:53.527

我认为这可能是一个工作版本：

```
Dim pSmall As Pointer(Of Byte) = CType(CType(smallData.Scan0, 
    Pointer(Of System.Void)), Pointer(Of Byte))

Dim pBig As Pointer(Of Byte) = CType(CType(bigData.Scan0, 
    Pointer(Of System.Void)), Pointer(Of Byte))

Dim smallOffset As Integer = smallStride - smallBmp.Width * 3
Dim bigOffset As Integer = bigStride - bigBmp.Width * 3

Dim matchFound As Boolean = True 
```

# eclipse - 逆时针和 :gen-class

> ID：13963611
> 
> 赞同：4
> 
> 时间：2012-12-20T00:42:36.800
> 
> 标签：eclipse, clojure, counterclockwise

我正在使用逆时针（0.10.1.STABLE001）的Eclipse（4.2.0）。我有一个 clojure 命名空间，我想为其生成一个类：

```
(ns a.b.c
  (:gen-class
   :name "a.b.c.Service"))

 (-method [] ...) 
```

[有一个缺陷，但它在](http://code.google.com/p/counterclockwise/issues/detail?id=7)0.59 版中被标记为已修复。

有没有一种方法可以从 IDE 触发或配置它，而无需借助命令行编译？

有一个相关的问题，[如何在 Eclipse 中使用已编译的 Clojure 类与逆时针](https://stackoverflow.com/questions/2215406/how-to-use-a-compiled-clojure-class-in-eclipse-with-counterclockwise)，但没有解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T00:49:45.757

我假设您将 CCW 与 leiningen 一起使用，因此有一个 project.clj 文件：

在 project.clj 中添加这样的代码：

```
:aot [org.example.sample] 
```

如果您使用 CCW 创建项目，您可能没有 project.clj 文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T08:01:18.913

在逆时针 0.10.1（您正在使用的版本）中，有一种简单的方法可以做到这一点：您必须从项目的根节点上下文菜单（运行方式 > Clojure 应用程序）启动启动配置。

*   从项目根目录启动时，构建器将被配置为每次保存文件时 AOT 编译整个项目（以及启动启动时，有时已证明它工作不可靠）。这意味着您的命名空间将被 AOT 编译，因此您的 gen-class。

# javascript - 用另一个内容替换 div 的内容

> ID：13963613
> 
> 赞同：7
> 
> 时间：2012-12-20T00:42:51.487
> 
> 标签：javascript, jquery, html-lists, anchor

我一直在构建一个链接列表，所有这些链接都应该在单击时将 div 的内容更改为另一个特定内容（大约 4 行内容：名称、网站、联系人等）。

我找到了这段代码：

```
<script type="text/javascript">
    function ReplaceContentInContainer(id,content) {
        var container = document.getElementById(id);
        container.innerHTML = content;
    }
</script> 
```

并以这种方式使用它：

```
<li class="pl11">
    <a href="javascript:ReplaceContentInContainer('wojewodztwo', '<a href="http://address.com">superlink</a>')">Pomorskie</a>
</li> 
```

它并没有像我预期的那样工作。

它将超链接文本从“Pomorskie”更改为“超级链接”。

纯文本工作得很好，但我需要链接。

这是[http://xn--pytyfundamentowe-jyc.pl/projektanci/kontakty-p/](http://xn--pytyfundamentowe-jyc.pl/projektanci/kontakty-p/)（其中只有两个显示任何内容）

**但是在尝试了你所有的建议之后，我想我会用#links跳转到不同的div，因为这个没有任何作用：/**

**非常感谢您的尝试和欢呼:)**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T02:18:28.640

就像完全从侧面看这个一样，我建议避免嵌套的怪异/复杂性，并减少问题。

将内容设置为隐藏（即。`<div id="replacements">...</div>`）`innerHTML`从您想要的节点中获取，然后完成它。

以这种方式从非开发人员那里获得替换内容也容易得多，如果你在一个团队中，那会很好用。

```
// Probably better in a separate helpers.js file.
   function replaceContentInContainer(target, source) {
      document.getElementById(target).innerHTML = document.getElementById(source).innerHTML;
   } 
```

通过以下方式控制它：（失去它`href=javascript:`并使用 onClick，更好地作为[事件处理程序](https://developer.mozilla.org/en-US/docs/DOM/DOM_event_handlers)，但为简洁起见，我将在此处将其内联为 onClick 属性，并使用按钮。）

```
<button onClick="replaceContentInContainer('target', 'replace_target')">Replace it</button> 
```

我们在文档的某处有我们的目标。

```
<div id="target">My content will be replaced</div> 
```

然后替换内容隐藏在替换 div 中。

```
<div id="replacements" style="display:none">
  <span id="replace_target"><a href="http://address.com">superlink</a></span>
</div> 
```

这是在[JSBin](http://jsbin.com/ivenik/2/edit)

[通过使用Handlebars](http://handlebarsjs.com)或另一个不错的 JS 模板库来改进它的动态特性，但这是 OP 的练习。

编辑：注意，您还应该使用前导小写字母命名函数，并为类名称保留前导大写样式，例如`var mySweetInstance = new MySpecialObject();`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T00:52:51.973

引号不匹配！因此，当您单击时，您会收到 JavaScript 错误。

浏览器看到这个字符串：

```
href="javascript:ReplaceContentInContainer('wojewodztwo', '<a href="http://address.com">superlink</a>')">Pomorskie< 
```

作为：

```
href="javascript:ReplaceContentInContainer('wojewodztwo', '<a href=" 
```

将 " 内部更改为`@quot;`

```
<li class="pl11">
    <a href="javascript:ReplaceContentInContainer('wojewodztwo', '<a href=@quot;http://address.com@quot;>superlink</a>')">Pomorskie</a>
</li> 
```

示例[小提琴](http://jsfiddle.net/Sj9bj/)。

另请注意，对 JavaScript 使用 href 标记是一种不好的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T00:55:47.903

你有嵌套引号的问题。看看你的 DOM 检查器，看看 HTML 解析器是用它构建的！（例如在[这个演示](http://jsfiddle.net/e6g7n/)中）

您需要将属性内的引号 HTML 转义为`&quot;`or `&#34;`，或者将它们转换为撇号并使用反斜杠在 JS 字符串中转义它们：

```
<a href="j[…]r('wojewodztwo', '<a href=&quot;http://address.com&quot;>superlink</a>')">…
<a href="j[…]r('wojewodztwo', '<a href=\'http://address.com\'>superlink</a>')">… 
```

[请参阅此处](http://jsfiddle.net/e6g7n/2/)和[此处](http://jsfiddle.net/e6g7n/3/)的工作演示。

更好的是，您应该使用`onclick`属性而不是`javascript`-pseudo-url：

```
<a onclick="ReplaceContentInContainer('wojewodztwo', …)">Pomorskie</a> 
```

甚至是[javascript 注册的事件处理程序](http://quirksmode.org/js/events_tradmod.html)：

```
<li class="pl11">
    <a id="superlink">Pomorskie</a>
</li>
<script type="text/javascript">
    function replaceContentInContainer(id,content) {
        var container = document.getElementById(id);
        container.innerHTML = content;
    }
    document.getElementBId("superlink").onclick = function(event) {
        replaceContentInContainer('wojewodztwo', '<a href="http://address.com">superlink</a>');
        event.prevenDefault();
    };
</script> 
```

（[演示](http://jsfiddle.net/e6g7n/5/)）

# iphone - 除非重新启动应用程序，否则 IAP 后不会删除广告？

> ID：13963615
> 
> 赞同：0
> 
> 时间：2012-12-20T00:42:57.680
> 
> 标签：iphone, ios, xcode, storekit

在我的应用程序中，有一段代码，如果按下按钮，用户可以升级应用程序并删除广告，它会调用 MKStoreKit，一旦用户购买升级，广告会保留在应用程序中，直到应用程序重新启动。

我想解决这个问题，所以广告会立即删除，但我该怎么做呢？

这是一些代码；

```
-(IBAction)removeAds:(id)sender
{

    if (![MKStoreManager isFeaturePurchased:@"com.davidsapps.puzzler.removeads"]) { //

        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Upgrade App" message:@"To upgrade and remove all advertisements from this app Please click OK to purchase the upgrade!" delegate:self cancelButtonTitle:@"No Thanks" otherButtonTitles:@"Yes Please",nil];
        [alert show];
        [alert release];
    }

} 
```

它链接到的警报；

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 0){
        //cancel button clicked. Do something here or nothing here
    }
    else{
        //other button indexes clicked
        [[MKStoreManager sharedManager] buyFeature:@- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 0){
        //cancel button clicked. Do something here or nothing here
    }
    else{
        //other button indexes clicked
        [[MKStoreManager sharedManager] buyFeature:@"com.idevver.mybatterypal.upgrade"];
    }
    }
} 
```

使用 MKStoreKit

我可以做些什么来让它删除广告而无需用户重新启动应用程序？

谢谢，

克里斯

编辑 - 广告是 Admob 中介，在 ViewDidLoad 中使用此代码

```
- (void)viewDidLoad {

        bannerView_ = [[GADBannerView alloc] initWithAdSize:kGADAdSizeSmartBannerPortrait];
        bannerView_.adUnitID = MY_BANNER_UNIT_ID;
        CGRect screenRect = [[UIScreen mainScreen] bounds];
        CGFloat screenWidth = screenRect.size.width;
        CGFloat screenHeight = screenRect.size.height;
        CGFloat screenXPos = (screenWidth /2);
        CGFloat screenYPos = screenHeight - 90;
        [bannerView_ setCenter:CGPointMake(screenXPos, screenYPos)];
        bannerView_.rootViewController = self;
        bannerView_.adUnitID = MY_BANNER_UNIT_ID;
        bannerView_.rootViewController = self;
        [self.view addSubview:bannerView_]; 
```

这是实际调用广告横幅的代码，它位于 viewDidLoad 后面的 if/else 语句中

```
if (![MKStoreManager isFeaturePurchased:@"com.davidsapps.puzzler.removeads"]) { //

        [bannerView_ loadRequest:[GADRequest request]];
    } 
```

所以我想在购买该功能时不知何故，我需要在 MKStoreManager.m 文件中添加一些内容来消除上面的bannerView_代码？

那行得通吗？

编辑 2 - 应用内代码的完整 .m 文件（感谢 MugunthKumar 提供了一个很棒的工具包）

```
//
//  MKStoreManager.m
//  MKStoreKit
//
//  Created by Mugunth Kumar on 17-Nov-2010.
//  Copyright 2010 Steinlogic. All rights reserved.
//  File created using Singleton XCode Template by Mugunth Kumar (http://mugunthkumar.com
//  Permission granted to do anything, commercial/non-commercial with this file apart from removing the line/URL above
//  Read my blog post at http://mk.sg/1m on how to use this code

//  As a side note on using this code, you might consider giving some credit to me by
//  1) linking my website from your app's website 
//  2) or crediting me inside the app's credits page 
//  3) or a tweet mentioning @mugunthkumar
//  4) A paypal donation to mugunth.kumar@gmail.com
//
//  A note on redistribution
//  While I'm ok with modifications to this source code, 
//  if you are re-publishing after editing, please retain the above copyright notices

#import "MKStoreManager.h"
#import "GADBannerView.h"
#import "AppDelegate.h"

@interface MKStoreManager (PrivateMethods)

- (void) requestProductData;
- (BOOL) canCurrentDeviceUseFeature: (NSString*) featureID;
- (BOOL) verifyReceipt:(NSData*) receiptData;
- (void) enableContentForThisSession: (NSString*) productIdentifier;

@end

@implementation MKStoreManager

@synthesize purchasableObjects = _purchasableObjects;
@synthesize storeObserver = _storeObserver;

static NSString *ownServer = nil;

static __weak id<MKStoreKitDelegate> _delegate;
static MKStoreManager* _sharedStoreManager;

- (void)dealloc {

    [_purchasableObjects release];
    [_storeObserver release];

    [_sharedStoreManager release];
    [super dealloc];
}

#pragma mark Delegates

+ (id)delegate {

    return _delegate;
}

+ (void)setDelegate:(id)newDelegate {

    _delegate = newDelegate;    
}

#pragma mark Singleton Methods

+ (MKStoreManager*)sharedManager
{
    @synchronized(self) {

        if (_sharedStoreManager == nil) {

#if TARGET_IPHONE_SIMULATOR
            NSLog(@"You are running in Simulator MKStoreKit runs only on devices");
#else
            _sharedStoreManager = [[self alloc] init];                  
            _sharedStoreManager.purchasableObjects = [[NSMutableArray alloc] init];
            [_sharedStoreManager requestProductData];                       
            _sharedStoreManager.storeObserver = [[MKStoreObserver alloc] init];
            [[SKPaymentQueue defaultQueue] addTransactionObserver:_sharedStoreManager.storeObserver];           
#endif
        }
    }
    return _sharedStoreManager;
}

+ (id)allocWithZone:(NSZone *)zone

{   
    @synchronized(self) {

        if (_sharedStoreManager == nil) {

            _sharedStoreManager = [super allocWithZone:zone];           
            return _sharedStoreManager;  // assignment and return on first allocation
        }
    }

    return nil; //on subsequent allocation attempts return nil  
}

- (id)copyWithZone:(NSZone *)zone
{
    return self;    
}

- (id)retain
{   
    return self;    
}

- (unsigned)retainCount
{
    return UINT_MAX;  //denotes an object that cannot be released
}

- (void)release
{
    //do nothing
}

- (id)autorelease
{
    return self;    
}

#pragma mark Internal MKStoreKit functions

- (void) restorePreviousTransactions
{
    [[SKPaymentQueue defaultQueue] restoreCompletedTransactions];
}

-(void) requestProductData
{
    SKProductsRequest *request= [[SKProductsRequest alloc] initWithProductIdentifiers:[NSSet setWithObjects: 
                                  kFeatureAId,
                                  kConsumableFeatureBId,
                                  kConsumableBaseFeatureId,
                                  nil]];
    request.delegate = self;
    [request start];
}

- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response
{
    [self.purchasableObjects addObjectsFromArray:response.products];

#ifndef NDEBUG  
    for(int i=0;i<[self.purchasableObjects count];i++)
    {       
        SKProduct *product = [self.purchasableObjects objectAtIndex:i];
        NSLog(@"Feature: %@, Cost: %f, ID: %@",[product localizedTitle],
              [[product price] doubleValue], [product productIdentifier]);
    }

    for(NSString *invalidProduct in response.invalidProductIdentifiers)
        NSLog(@"Problem in iTunes connect configuration for product: %@", invalidProduct);
#endif

    [request autorelease];

    isProductsAvailable = YES;

    if([_delegate respondsToSelector:@selector(productFetchComplete)])
        [_delegate productFetchComplete];   
}

// call this function to check if the user has already purchased your feature
+ (BOOL) isFeaturePurchased:(NSString*) featureId
{

    return [[NSUserDefaults standardUserDefaults] boolForKey:featureId];

}

// Call this function to populate your UI
// this function automatically formats the currency based on the user's locale

- (NSMutableArray*) purchasableObjectsDescription
{
    NSMutableArray *productDescriptions = [[NSMutableArray alloc] initWithCapacity:[self.purchasableObjects count]];
    for(int i=0;i<[self.purchasableObjects count];i++)
    {
        SKProduct *product = [self.purchasableObjects objectAtIndex:i];

        NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
        [numberFormatter setFormatterBehavior:NSNumberFormatterBehavior10_4];
        [numberFormatter setNumberStyle:NSNumberFormatterCurrencyStyle];
        [numberFormatter setLocale:product.priceLocale];
        NSString *formattedString = [numberFormatter stringFromNumber:product.price];
        [numberFormatter release];

        // you might probably need to change this line to suit your UI needs
        NSString *description = [NSString stringWithFormat:@"%@ (%@)",[product localizedTitle], formattedString];

#ifndef NDEBUG
        NSLog(@"Product %d - %@", i, description);
#endif
        [productDescriptions addObject: description];
    }

    [productDescriptions autorelease];
    return productDescriptions;
}

- (void) buyFeature:(NSString*) featureId
{

    if([self canCurrentDeviceUseFeature: featureId])
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Review request approved", @"")
                                                        message:NSLocalizedString(@"You can use this feature for reviewing the app.", @"")
                                                       delegate:self 
                                              cancelButtonTitle:NSLocalizedString(@"Dismiss", @"")
                                              otherButtonTitles:nil];
        [alert show];
        [alert release];

        [self enableContentForThisSession:featureId];
        return;
    }

    if ([SKPaymentQueue canMakePayments])
    {
        SKPayment *payment = [SKPayment paymentWithProductIdentifier:featureId];
        [[SKPaymentQueue defaultQueue] addPayment:payment];
    }
    else
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"In-App Purchasing disabled", @"")
                                                        message:NSLocalizedString(@"Check your parental control settings and try again later", @"")
                                                       delegate:self 
                                              cancelButtonTitle:NSLocalizedString(@"Dismiss", @"")
                                              otherButtonTitles: nil];
        [alert show];
        [alert release];

    }
}

- (BOOL) canConsumeProduct:(NSString*) productIdentifier
{
    int count = [[NSUserDefaults standardUserDefaults] integerForKey:productIdentifier];

    return (count > 0);

}

- (BOOL) canConsumeProduct:(NSString*) productIdentifier quantity:(int) quantity
{
    int count = [[NSUserDefaults standardUserDefaults] integerForKey:productIdentifier];
    return (count >= quantity);
}

- (BOOL) consumeProduct:(NSString*) productIdentifier quantity:(int) quantity
{
    int count = [[NSUserDefaults standardUserDefaults] integerForKey:productIdentifier];
    if(count < quantity)
    {
        return NO;
    }
    else 
    {
        count -= quantity;
        [[NSUserDefaults standardUserDefaults] setInteger:count forKey:productIdentifier];
        return YES;
    }

}

-(void) enableContentForThisSession: (NSString*) productIdentifier
{
    if([_delegate respondsToSelector:@selector(productPurchased:)])
        [_delegate productPurchased:productIdentifier];

}

#pragma mark In-App purchases callbacks
// In most cases you don't have to touch these methods
-(void) provideContent: (NSString*) productIdentifier 
           forReceipt:(NSData*) receiptData
{
    if(ownServer != nil && SERVER_PRODUCT_MODEL)
    {
        // ping server and get response before serializing the product
        // this is a blocking call to post receipt data to your server
        // it should normally take a couple of seconds on a good 3G connection
        if(![self verifyReceipt:receiptData]) return;
    }

    NSRange range = [productIdentifier rangeOfString:kConsumableBaseFeatureId];     
    NSString *countText = [productIdentifier substringFromIndex:range.location+[kConsumableBaseFeatureId length]];

    int quantityPurchased = [countText intValue];
    if(quantityPurchased != 0)
    {

        int oldCount = [[NSUserDefaults standardUserDefaults] integerForKey:productIdentifier];
        oldCount += quantityPurchased;  

        [[NSUserDefaults standardUserDefaults] setInteger:oldCount forKey:productIdentifier];       
    }
    else 
    {
        [[NSUserDefaults standardUserDefaults] setBool:YES forKey:productIdentifier];       
    }

    [[NSUserDefaults standardUserDefaults] synchronize];

    if([_delegate respondsToSelector:@selector(productPurchased:)])
        [_delegate productPurchased:productIdentifier];

UIAlertView* alert = [[UIAlertView alloc] initWithTitle:@"In-App Upgrade" message:@"Successfull removal of advertisements upgrade - thankyou" delegate:self cancelButtonTitle:@"ok" otherButtonTitles:nil, nil];

[alert show];
[alert release];

}

- (void) transactionCanceled: (SKPaymentTransaction *)transaction
{

#ifndef NDEBUG
    NSLog(@"User cancelled transaction: %@", [transaction description]);
#endif

    if([_delegate respondsToSelector:@selector(transactionCanceled)])
        [_delegate transactionCanceled];
}

- (void) failedTransaction: (SKPaymentTransaction *)transaction
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:[transaction.error localizedFailureReason] 
                                                    message:[transaction.error localizedRecoverySuggestion]
                                                   delegate:self 
                                          cancelButtonTitle:NSLocalizedString(@"Dismiss", @"")
                                          otherButtonTitles: nil];
    [alert show];
    [alert release];
}

#pragma mark In-App purchases promo codes support
// This function is only used if you want to enable in-app purchases for free for reviewers
// Read my blog post http://mk.sg/31
- (BOOL) canCurrentDeviceUseFeature: (NSString*) featureID
{
    NSString *uniqueID = [[UIDevice currentDevice] uniqueIdentifier];
    // check udid and featureid with developer's server

    if(ownServer == nil) return NO; // sanity check

    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@/%@", ownServer, @"featureCheck.php"]];

    NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url 
                                                              cachePolicy:NSURLRequestReloadIgnoringCacheData 
                                                          timeoutInterval:60];

    [theRequest setHTTPMethod:@"POST"];     
    [theRequest setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];

    NSString *postData = [NSString stringWithFormat:@"productid=%@&udid=%@", featureID, uniqueID];

    NSString *length = [NSString stringWithFormat:@"%d", [postData length]];    
    [theRequest setValue:length forHTTPHeaderField:@"Content-Length"];  

    [theRequest setHTTPBody:[postData dataUsingEncoding:NSASCIIStringEncoding]];

    NSHTTPURLResponse* urlResponse = nil;
    NSError *error = [[[NSError alloc] init] autorelease];  

    NSData *responseData = [NSURLConnection sendSynchronousRequest:theRequest
                                                 returningResponse:&urlResponse 
                                                             error:&error];  

    NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSASCIIStringEncoding];

    BOOL retVal = NO;
    if([responseString isEqualToString:@"YES"])     
    {
        retVal = YES;
    }

    [responseString release];
    return retVal;
}

// This function is only used if you want to enable in-app purchases for free for reviewers
// Read my blog post http://mk.sg/

-(BOOL) verifyReceipt:(NSData*) receiptData
{
    if(ownServer == nil) return NO; // sanity check

    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@/%@", ownServer, @"verifyProduct.php"]];

    NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url 
                                                              cachePolicy:NSURLRequestReloadIgnoringCacheData 
                                                          timeoutInterval:60];

    [theRequest setHTTPMethod:@"POST"];     
    [theRequest setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];

    NSString *receiptDataString = [[NSString alloc] initWithData:receiptData encoding:NSASCIIStringEncoding];
    NSString *postData = [NSString stringWithFormat:@"receiptdata=%@", receiptDataString];
    [receiptDataString release];

    NSString *length = [NSString stringWithFormat:@"%d", [postData length]];    
    [theRequest setValue:length forHTTPHeaderField:@"Content-Length"];  

    [theRequest setHTTPBody:[postData dataUsingEncoding:NSASCIIStringEncoding]];

    NSHTTPURLResponse* urlResponse = nil;
    NSError *error = [[[NSError alloc] init] autorelease];  

    NSData *responseData = [NSURLConnection sendSynchronousRequest:theRequest
                                                 returningResponse:&urlResponse 
                                                             error:&error];  

    NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSASCIIStringEncoding];

    BOOL retVal = NO;
    if([responseString isEqualToString:@"YES"])     
    {
        retVal = YES;
    }

    [responseString release];
    return retVal;
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T00:48:40.523

购买完成后，您可以自行删除广告。做类似的事情。

```
[bannerView removeFromSuperview]; 
```

您所要做的就是在购买完成时隐藏广告。

# mysql - MySQL：选择最大值和分组

> ID：13963624
> 
> 赞同：1
> 
> 时间：2012-12-20T00:44:18.387
> 
> 标签：mysql

这就是我现在在查询中的内容：

```
+--------------------+-----------+------------+
| status             | entity_id | seconds    |
+--------------------+-----------+------------+
| Submitted          |       494 | 1352102400 |
| Accepted           |       494 | 1352275200 |
| In press/e-publish |       494 | 1352966400 |
| Rejected           |       520 | 1355817600 |
| Accepted           |       570 | 1352102400 |
+--------------------+-----------+------------+ 
```

我希望它看起来像：

```
+--------------------+-----------+------------+
| status             | entity_id | seconds    |
+--------------------+-----------+------------+
| In press/e-publish |       494 | 1352966400 |
| Rejected           |       520 | 1355817600 |
| Accepted           |       570 | 1352102400 |
+--------------------+-----------+------------+ 
```

在准 SQL 中：

```
SELECT status, entity_id, MAX(seconds) 
FROM foo
GROUP BY entity_id, seconds 
```

上面的准SQL看起来是正确的，但是“status”列的值并没有对应正确的行。我得到如下内容：

```
+--------------------+-----------+------------+
| status             | entity_id | seconds    |
+--------------------+-----------+------------+
| Submitted          |       494 | 1352966400 |
| Rejected           |       520 | 1355817600 |
| Accepted           |       570 | 1352102400 |
+--------------------+-----------+------------+ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T00:48:59.947

未经测试，但应如下所示：

```
SELECT status, entity_id, seconds
FROM entities E
WHERE E.seconds == (
  SELECT MAX(E2.seconds)
  FROM entities E2
  WHERE E2.entity_id = E.entity_id
) 
```

（为您的问题设置一个 SQLfiddle 将为您提供更经过测试的答案：p）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T04:21:12.893

以下查询将给出您预期的结果。

```
SELECT max(maxsec), status, entity_id from 
(SELECT status, entity_id, MAX(seconds)  as maxsec
FROM table1
GROUP BY entity_id,status) a GROUP BY entity_id 
```

[您在此处](http://sqlfiddle.com/#!2/e6ab2/10)创建的架构。

# c# - 在 Windows Phone 8 中同时播放两个音频文件的最佳方式

> ID：13963626
> 
> 赞同：2
> 
> 时间：2012-12-20T00:44:54.483
> 
> 标签：c#, windows-phone-8, sharpdx

目前正在研究如何在 Windows Phone 8 中同时播放两个 mp3 或 aac 格式的文件。

目前我正在使用 XNA SoundEffect 类，但它只允许 WAV 文件，不适合通过网络传输。

在研究时，我遇到了 SharpDX，但这似乎主要是为了迎合 .WAV 或一次播放一个文件。

我还发现了这个问题： [在 Windows 8 Metro App (C#/XAML) 中同时播放两种声音 Windows 8](https://stackoverflow.com/questions/10960952/play-two-sounds-simultaneously-in-windows-8-metro-app-c-xaml) 中可以使用多种媒体元素，但我不确定它们是否在 Windows Phone 中（[这个问题似乎不同意](https://stackoverflow.com/questions/13220539/play-multiple-mp3-aac-files-simultaneously)）

任何想法将不胜感激。

**更新：**它不能像我想的那样通过 MediaElement 完成[http://msdn.microsoft.com/en-us/library/windowsphone/design/hh202883(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/design/hh202883(v=vs.105).aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T07:02:31.220

解决方案：嗨，我正在开发一个 WP8 应用程序，我需要同时播放多个声音，我使用了 XNA 框架。链接在这里

[http://msdn.microsoft.com/en-us/library/ff842408.aspx](http://msdn.microsoft.com/en-us/library/ff842408.aspx)

然后像这样播放你的声音文件......

```
SoundEffect Sound = SoundEffect.FromStream(Application.GetResourceStream(new Uri("Assets/Sounds/wav/sound.wav", UriKind.Relative)).Stream);
Sound.Play(); 
```

对于循环...

```
SoundEffectInstance Sound = SoundEffect.FromStream(Application.GetResourceStream(new Uri("Assets/Sounds/wav/sound.wav", UriKind.Relative)).Stream).CreateInstance();
Sound.IsLooped = true;
Sound.Play(); 
```

注意：文件必须是“.wav”（PCM，8 位或 16 位，8KHz 至 48KHz，单声道或立体声）格式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T01:10:01.687

您可以尝试通过 MediaFoundation.MediaEngine 来完成（有关如何在 WP8 上正确初始化它的指南，请参阅“ [Windows Phone 8 支持的 Microsoft Media Foundation APIs ”）。](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681688%28v=vs.105%29.aspx)在 SharpDX 中有一个 Win8 示例[MediaPlayerApp](http://code.google.com/p/sharpdx/source/browse/Samples/Win8/CommonDX/MediaPlayer.cs)，可用作仅播放音频的起点（删除所有 d3d 部分并应用 WP8 指南）。MonoGame [MediaPlayer](https://github.com/mono/MonoGame/blob/develop3d/MonoGame.Framework/Media/MediaPlayer.cs)类中也有它的用法。

用SharpDX同时播放多个WAV，用XAudio2完全可以，SharpDX对XAudio2没有任何限制。

WP8 CLR Garbarge 收集器只有一个巨大的担忧，它在收集时似乎会阻塞所有本机线程，包括像 XAudio2 这样的本机音频线程，这可能会导致音频卡顿。我们对此无能为力，因为这是操作系统和 .NET 线程调度的问题。

我也对 WP8 实时解码两个 MP3 的能力有些怀疑......如果你有一些结果，请告诉我们。

# xcode - 如何在 Xcode 中获取“编译源”列表

> ID：13963631
> 
> 赞同：3
> 
> 时间：2012-12-20T00:45:44.080
> 
> 标签：xcode

我想获得一个 Xcode 变量，它将列出 Xcode 的 Compile Sources 部分中的所有文件。我似乎找不到它的[变量](https://developer.apple.com/library/mac/#documentation/DeveloperTools/Reference/XcodeBuildSettingRef/1-Build_Setting_Reference/build_setting_ref.html)。谁能指出我正确的方向？

在“运行脚本”阶段，希望能够迭代编译源文件并将它们复制到另一个位置。

![编译源](../Images/bad47167e27c5210e7e46e4310062075.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T05:38:21.350

目前我能想到的唯一答案是将我的文件名列表硬编码到我需要它们的 bash 脚本中。

# php - 如果 mysql 查询为空或不存在？

> ID：13963637
> 
> 赞同：0
> 
> 时间：2012-12-20T00:46:06.840
> 
> 标签：php, mysql, if-statement

我有一个 mysql 查询，如果用户评分设置为 5，它会获得 5 颗星，就像星级评分系统一样。同一剧本的另外 4 个根据等级 1-5 获得 1、2、3 或 4 颗星。

我想要的是在 mysql 表中没有结果时回显图像。我已经尝试了以下，但没有任何回应。有人可以告诉我我需要做什么吗？

我试过添加这段代码，但我只是得到一个数组错误。

```
<?php
if (is_null($get_star_rating_set))  
{
    echo "HELLO";
}    
?> 
```

这是通常的代码：

```
<?php
$get_star_rating_set = get_star_rating();
while ($rating = mysql_fetch_array($get_star_rating_set))
    if ($rating['rating'] == '0') { echo '
      <div class="star-rate">
        <table width="40%" border="0" cellspacing="5" cellpadding="0">
          <tr>
            <td width="17%" align="left" valign="middle" scope="col"><img src="../PTB1/assets/img/icons/favorites.png" id="R1" alt="0" style="cursor:pointer" title="Not at All" width="27" height="25" /></td>
            <td width="17%" align="left" valign="middle" scope="col"><img src="../PTB1/assets/img/icons/favorites.png" id="R2" alt="1" style="cursor:pointer" title="Somewhat"   width="27" height="25" /></td>
            <td width="17%" align="left" valign="middle" scope="col"><img src="../PTB1/assets/img/icons/favorites.png" id="R3" alt="2" style="cursor:pointer" title="Average"    width="27" height="25" /></td>
            <td width="17%" align="left" valign="middle" scope="col"><img src="../PTB1/assets/img/icons/favorites.png" id="R4" alt="3" style="cursor:pointer" title="Good"       width="27" height="25" /></td>
            <td width="24%" align="left" valign="middle" scope="col"><img src="../PTB1/assets/img/icons/favorites.png" id="R5" alt="4" style="cursor:pointer" title="Very Good"  width="27" height="25" /></td>
          </tr>
        </table>
      </div>';
    }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T01:08:32.173

当 mysql 表中没有结果时，您将永远不会进入`while`循环。

因此，您可以添加一个条件来检查`while`循环周围的行数，并将图像代码放在该`else`部分中（如果没有行）。

但是，我建议您在 PDO 或 mysqli 中执行所有这些操作，因为这些`mysql_`函数已被弃用。

在伪代码中：

```
do query
if number of rows > 0
  do normal stuff
else
  echo your no results image 
```

# eclipse-plugin - 将 ArgoUML 安装到 Eclipse Indigo 中会抛出错误

> ID：13963639
> 
> 赞同：-1
> 
> 时间：2012-12-20T00:46:27.263
> 
> 标签：eclipse-plugin, eclipse-indigo, argouml

我正在尝试将[ArgoUML](http://argoeclipse.tigris.org/documentation/download.html)安装到 Eclipse Indigo 中，无论如何我在安装过程中遇到了这个错误并继续，有解决这个问题的线索吗？

```
Cannot complete the install because one or more required items could not be found.
  Software currently installed: Eclipse IDE for Java EE Developers 1.4.1.20110909-1818 (epp.package.jee 1.4.1.20110909-1818)
  Missing requirement: Eclipse Java EE Developer Tools 3.3.2.v201111030500-7b7II1YFSK2WIuPRDEnExPV-RvTn (org.eclipse.jst.enterprise_ui.feature.feature.group 3.3.2.v201111030500-7b7II1YFSK2WIuPRDEnExPV-RvTn) requires 'org.eclipse.jst.ws.jaxrs.core [1.0.301.v201108240656]' but it could not be found
  Cannot satisfy dependency:
    From: Eclipse IDE for Java EE Developers 1.4.1.20110909-1818 (epp.package.jee 1.4.1.20110909-1818)
    To: org.eclipse.epp.package.jee.feature.feature.group [1.4.1.20110909-1818]
  Cannot satisfy dependency:
    From: Java EE IDE Feature 1.4.1.20110909-1818 (org.eclipse.epp.package.jee.feature.feature.group 1.4.1.20110909-1818)
    To: org.eclipse.jst.enterprise_ui.feature.feature.group 0.0.0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T06:10:08.880

我猜您缺少必需的更新站点。从错误日志中，`org.eclipse.jst.ws.jaxrs.core [1.0.301.v201108240656]`是必需的，但找不到。快速的 google 搜索显示这应该是 WTP 3.2.x 的一部分。您可以在这里找到 WTP 的所有更新站点；[http://download.eclipse.org/webtools/downloads/](http://download.eclipse.org/webtools/downloads/) 选择 3.2.x 更新站点之一，并确保在尝试安装 ArgoUML 时选中“联系所有更新站点...”。

# .net - 带有 .NET 4.5/Windows Store/WP8 的可移植类库中的 DllImport

> ID：13963648
> 
> 赞同：2
> 
> 时间：2012-12-20T00:47:11.877
> 
> 标签：.net, windows-phone-8, windows-store-apps

如果我有一个带有 .NET 4.5 和 Windows Store 的可移植类，我可以使用 DllImport。但是，当我添加 WP8 时，它不再可用，即使 WP8 支持 DllImport。这是怎么回事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T09:02:30.570

仅仅因为您可以`[DllImport ...]`在 C# WP8 项目中添加并不意味着它受支持。

```
 private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        var v = GetCurrentThread();
    }

    [DllImport("kernel32.dll", CharSet = CharSet.Auto, ExactSpelling = true)]
    public static extern IntPtr GetCurrentThread(); 
```

...将`NotSupportedException`在 WP8 中给出一个。尽管[MSDN 说这是 WP8 支持的 Win32 API。](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms683182(v=vs.85).aspx)

这也可以解释为什么你失去了`DllImport`在 PCL 中使用的能力......

# c# - String.Substring 怪异

> ID：13963649
> 
> 赞同：-2
> 
> 时间：2012-12-20T00:47:17.343
> 
> 标签：c#, string, substring

好吧，我已经醒太久了。快疯了。请有人告诉我为什么这不起作用。传入“201212120600”之类的字符串`Substring(0,4)`返回“201”而不是“2012”。我的大脑正在融化。

```
 private DateTime StringToDateTimeUTC(String s)
    {
        System.Diagnostics.Debug.WriteLine(s);
        String syear = s.Substring(0, 4);
        System.Diagnostics.Debug.WriteLine(syear);

        int year = int.Parse(s.Substring(0, 4));
        int month = int.Parse(s.Substring(4, 2));
        int day = int.Parse(s.Substring(6, 2));
        int hour = int.Parse(s.Substring(8, 2));
        int minute = int.Parse(s.Substring(10, 2));
        DateTime dt = new DateTime(year, month, day, hour, minute, 0, DateTimeKind.Utc);
        return dt;
    } 
```

输出是：

> 201212120600
> 
> 201

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T00:59:30.790

我认为您的字符串中实际上有一个空格：

```
string s = " 201212120600";

Console.WriteLine(s);
String syear = s.Substring(0, 4);
Console.WriteLine(syear);

int year = int.Parse(s.Substring(0, 4));
Console.WriteLine(year); 
```

输出：

```
 201212120600
 201
201 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T00:56:14.293

当我将此代码粘贴到 VS 中并运行它时，我得到了预期的输出：

```
201212120600
2012 
```

请注意，您可以使用以下方法更轻松地实现相同的目标`DateTime.ParseExact()`：

```
// using System.Globalization;
DateTime dt = DateTime.ParseExact(
    s,
    "yyyyMMddHHmm",
    CultureInfo.CurrentCulture.DateTimeFormat,
    DateTimeStyles.AssumeUniversal | DateTimeStyles.AdjustToUniversal); 
```

...将设置`dt`为您要返回的相同内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T00:56:52.603

除非你只是为了好玩，否则已经有一个 .NET 函数可以做你想做的事；

```
DateTime dt = DateTime.ParseExact("201212120600", "yyyyMMddhhmm", null); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-20T00:56:13.117

您传入的字符串必须不正确，因为您提供的方法可以正常工作

![在此处输入图像描述](../Images/e8ead909a6e60331b5567fc129443099.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-20T01:01:04.727

您如何将字符串输入到函数中？

我的猜测是，无论您从哪个来源获得它，都是在字符串中引入隐藏字符。尝试捕获字符串，然后将其复制粘贴到显示隐藏字符的内容中，例如 Notepad++。

# python - Python - 从动态创建的对象的属性调用其他对象的函数

> ID：13963650
> 
> 赞同：0
> 
> 时间：2012-12-20T00:47:23.410
> 
> 标签：python

给定一个 Windows ini 风格的配置文件，例如“airplanes.ini”：

```
[JumboJet]
wingspan = 211
length = 231
seating = 416
crew = 2
unit_cost = 234000000
on_hand = 3

[SopwithCamel]
wingspan = 28
length = 18
armament = twin Vickers
crew = 1
on_hand = 1

[NCC1701]
length = 289 meters
crew = 430
speed = Warp 8
armament = 12 phasers, 6 photon torpedo 
```

我使用 Python 2.7.3 库中的 ConfigParser 模块来读取文件的内容，然后使用内置`type()`函数为配置文件中的每个 [section] 创建一个类型为“Airplane”的新对象。每`name = value`对都成为对象的一个​​属性：

```
# create a config parser, using SafeConfigParser for variable substitution
config = ConfigParser.SafeConfigParser()

# read in the config file
config.read('airplanes.ini')

airplanes = []

# loop through each "[section]" of config file
for section in config.sections():
    # create a new object of type Airplane
    plane = type("Airplane",(object,),{"name":section})

    # loop through name = value pairs in section
    for name, value in config.items(section)
        # this is where the magic happens?
        setattr(plane, name, lambda: config.set(section,name,value))

    airplanes.append(plane)

# do stuff with Airplanes,
boeing = airplanes[1]

# this update needs to call through to config.set()
boeing.on_hand = 2

# then save the changes out to the config file on disk
with open('airplanes.ini','wb') as f:
    config.write(f) 
```

注释“这就是魔法发生的地方”的行表示我想`set()`通过属性的“setter”设置对 ConfigParser 方法的调用以更新配置对象。我相信`setattr(plane, name, value)`这是创建属性的“通常”方式，但这不会调用`config.set()`.

我希望灵活地将对象的属性动态定义为配置文件每个部分中的项目，即使每个部分中的项目不同，或者每个部分有不同数量的项目。

关于如何实现这一点的任何建议？我不认为 property() 或 setattr() 会做我想做的事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T00:55:20.600

我认为动态地制作类型会使它过于复杂。相反，我会创建一个封装了*plane 类型的*类，并创建填充了文件中信息的实例。

然后，您有一个用于实际平面的单独类，其中包含一个 type 属性，该属性指向它所属的类型。

# c++ - IPC消息队列如何发送对向量

> ID：13963653
> 
> 赞同：1
> 
> 时间：2012-12-20T00:47:34.767
> 
> 标签：c++, unix, vector, ipc, message-queue

我正在尝试在结构的两个进程之间发送和接收消息，如下所示

```
struct _st{
    long _var1;
    int _var2; 
    int _var3; 
    int _var4;
    int _var5;
    vector <pair<int,int> > _var6; 
}; 
```

我的发送代码是

```
send_val = msgsnd(msgqid, &message, sizeof(message), !IPC_NOWAIT); 
```

我这样收到

```
rec_val = msgrcv(msgqid, &message, sizeof(message), 0, !IPC_NOWAIT); 
```

当我将接收到的消息中的 _var6 分配给另一个变量并打印它的值时，我得到了垃圾。

我怎样才能正确发送和接收这个结构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T01:07:42.987

`_st`不是 POD，您不能简单地通过 IPC 发送而不对其进行序列化/反序列化。您实际上是通过 IPC 而不是其内容发送 _var6 内部指针。

`sizeof(message)`只会获得静态`_st`结构大小，它不包括`_var6`. 您需要`_st`在 msgsnd 之前手动序列化并在 msgrcv 之后对其进行反序列化。

看看[http://www.boost.org/doc/libs/1_52_0/libs/serialization/doc/index.html](http://www.boost.org/doc/libs/1_52_0/libs/serialization/doc/index.html)

# c - Make：完全无视规则

> ID：13963654
> 
> 赞同：3
> 
> 时间：2012-12-20T00:47:48.217
> 
> 标签：c, linux, gcc, makefile

我正在尝试在添加新源（processHandling.c）后编译我的项目，结果在我“制作”时得到了这个结果

```
gcc -gstabs -W -Wall -std=gnu99 -c main.c
gcc -gstabs -W -Wall -std=gnu99 -c inputHandling.c
gcc -gstabs -W -Wall -std=gnu99 -c syscallsWrapper.c
gcc -gstabs -W -Wall -std=gnu99 -o myShell main.o inputHandling.o processHandling.o syscallsWrapper.o 
gcc: error: processHandling.o: No such file or directory
make: *** [myShell] Error 1 
```

这是生成文件

```
CC = gcc
CFLAGS = -gstabs -W -Wall -std=gnu99

myShell: main.o inputHandling.o syscallsWrapper.o
        $(CC) $(CFLAGS) -o myShell main.o inputHandling.o processHandling.o syscallsWrapper.o 

main.o: main.c
        $(CC) $(CFLAGS) -c main.c

inputHandling.o: inputHandling.c
        $(CC) $(CFLAGS) -c inputHandling.c

processHandling.o: processHandling.c
        $(CC) $(CFLAGS) -c processHandling.c

syscallsWrapper.o: syscallsWrapper.c
        $(CC) $(CFLAGS) -c syscallsWrapper.c

clean:

        -rm myShell *.o 
```

我尝试使用`-d`标志运行 make ，似乎由于某种原因 make 完全忽略了编译规则`processHandling.o`；可能是什么问题？

另请注意，如果我使用一切手动编译 processHandling`gcc -c`一切正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T00:50:40.247

将 processHandling.o 添加到 myShell 目标的依赖项列表中：

```
myShell: main.o inputHandling.o processHandling.o syscallsWrapper.o
        $(CC) $(CFLAGS) -o myShell main.o inputHandling.o processHandling.o syscallsWrapper.o 
```

顺便说一句，使用[自动变量](http://www.gnu.org/software/make/manual/make.html#Automatic-Variables)可以帮助减少重复的文件名。例如：

```
myShell: main.o inputHandling.o processHandling.o syscallsWrapper.o
        $(CC) $(CFLAGS) -o $@ $^ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T00:52:24.780

您需要添加“processHandling.o”作为 myShell 的先决条件。否则在制作 myShell 时，不会应用 processHandling.o 的规则，因为 makefile 认为 myShell 不需要该 processHandling.o。您可以像这样简单地添加它

```
myShell: main.o inputHandling.o syscallsWrapper.o processHandling.o
        $(CC) $(CFLAGS) -o myShell main.o inputHandling.o processHandling.o syscallsWrapper.o 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T00:50:50.660

检查您是否真的拥有该文件`processHandling.c`。此错误意味着尚未找到源文件。

# spring - Spring Security 无法访问 Service 层中的自定义 userDetailsS ervice Bean

> ID：13963663
> 
> 赞同：0
> 
> 时间：2012-12-20T00:48:28.590
> 
> 标签：spring, spring-mvc, spring-security

**编辑：我刚刚意识到问题不是来自 spring-security 无法实例化 spring-security.xml 文件中引用的 userDetailsS​​erviceImpl，而是 addUserFormController 无法实例化，因为它无法自动装配 UserDetailsS​​erviceImpl。所以问题来自这样一个事实，无论出于何种原因，这个 Controller 都无法访问这个 Service bean UserDetailsS​​erviceImpl。我认为我确实正确地进行了组件扫描，仅扫描 mvc-dispatcher-servlet.xml 中的控制器，以及除 applicationContext 中的控制器之外的所有其他控制器。**

我正在使用 Spring MVC 和 Hibernate，并且正在尝试将 Spring Security 与自定义 UserDetailsS​​ervice 和 Assembler 集成。

看起来我的 Spring Security 无法访问应该由 applicationContext.xml 扫描的 bean。

加载我的应用程序时，我遇到了以下错误：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'addUserFormController': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire method: public void com.controller.AddUserFormController.setUserDetailsService(com.service.UserDetailsServiceImpl); nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.service.UserDetailsServiceImpl] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}
    org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106) 
```

这是我的spring-security.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
                        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                        http://www.springframework.org/schema/context 
                        http://www.springframework.org/schema/context/spring-context-3.0.xsd
                        http://www.springframework.org/schema/security 
                        http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <http auto-config='true' use-expressions='true'>
        <intercept-url pattern="/login*" access="isAnonymous()" />
        <intercept-url pattern="/secure/**" access="hasRole('ROLE_Admin')" />

        <logout logout-success-url="/listing.htm" />

        <form-login login-page="/login.htm" login-processing-url="/j_spring_security_check"
            authentication-failure-url="/login_error.htm" default-target-url="/listing.htm"
            always-use-default-target="true" />
    </http>

    <beans:bean id="com.daoAuthenticationProvider"
        class="org.springframework.security.authentication.dao.DaoAuthenticationProvider">
        <beans:property name="userDetailsService" ref="userDetailsService" />
    </beans:bean>

    <beans:bean id="authenticationManager"
        class="org.springframework.security.authentication.ProviderManager">
        <beans:property name="providers">
            <beans:list>
                <beans:ref local="com.daoAuthenticationProvider" />
            </beans:list>
        </beans:property>
    </beans:bean>

    <authentication-manager>
        <authentication-provider user-service-ref="userDetailsService">
            <password-encoder hash="plaintext" />
        </authentication-provider>
    </authentication-manager>

</beans:beans> 
```

这是我的 web.xml：

```
<web-app id="WebApp_ID" version="2.4"
    xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
    http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

    <display-name>Spring MVC Application</display-name>

    <!-- Spring MVC -->
    <servlet>
        <servlet-name>mvc-dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>mvc-dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <!-- This listener creates the root application Context -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <listener>
        <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
    </listener>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/applicationContext.xml,
            /WEB-INF/spring-security.xml
        </param-value>
    </context-param>

    <!-- Spring Security -->
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

</web-app> 
```

这是我的 applicationContext.xml：

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/tx 
           http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
           http://www.springframework.org/schema/context 
           http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<context:annotation-config/>
<!-- Load everything except @Controllers -->
<context:component-scan base-package="com">
    <context:exclude-filter expression="org.springframework.stereotype.Controller"
        type="annotation" />
</context:component-scan>

<bean id="transactionManager"
    class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

<bean id="sessionFactory"
    class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <!-- <property name="packagesToScan">
        <list>
            <value>com.service</value>
            <value>com.dao</value>
        </list>
    </property> -->
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQL5Dialect</prop>
            <prop key="hibernate.hbm2ddl.auto">update</prop>
            <prop key="hibernate.show_sql">true</prop>
        </props>
    </property>
</bean>

<bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://localhost:3306/tutospringsource" />
    <property name="username" value="root" />
    <property name="password" value="password" />
</bean>

<bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix">
        <value>/WEB-INF/pages/</value>
    </property>
    <property name="suffix">
        <value>.jsp</value>
    </property>
</bean>

<bean id="messageSource"
    class="org.springframework.context.support.ResourceBundleMessageSource">
    <property name="basenames">
        <list>
            <value>mymessages</value>
        </list>
    </property>
</bean>

<bean id="propertyConfigurer"
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>classpath:jdbc.properties</value>
        </list>
    </property>
</bean>

<tx:annotation-driven transaction-manager="transactionManager" />

<tx:advice id="txAdvice">
    <tx:attributes>
        <tx:method name="save*" />
        <tx:method name="*" read-only="false" />
    </tx:attributes>
</tx:advice> 
```

最后，我的 mvc-dispatcher-servlet.xml：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans     
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/mvc 
        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

    <context:annotation-config />

    <context:property-placeholder location="classpath:hibernate.properties" />

    <!-- Load @Controllers only -->
    <context:component-scan base-package="com.controller"
        use-default-filters="false">
        <context:include-filter expression="org.springframework.stereotype.Controller"
            type="annotation" />
    </context:component-scan>
</beans> 
```

我的 AddUserFormController：

```
@Controller
@RequestMapping("/register.htm")

public class AddUserFormController {

    private UserDetailsServiceImpl userDetailsService;

    @Autowired
    public void setUserDetailsService(UserDetailsServiceImpl userDetailsService) {
        this.userDetailsService = userDetailsService;
    } 
```

我的 UserDetailsS​​erviceImpl：

```
package com.service;
@Service("userDetailsService")
@Transactional
public class UserDetailsServiceImpl implements UserDetailsService {

    @Autowired
    private UserEntityDAO dao;

    @Autowired
    private Assembler assembler; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T03:42:57.153

我已经能够解决这个问题。

在我的 AddUserFormController 中，我有这个：

```
@Controller
@RequestMapping("/register.htm")

public class AddUserFormController {

private UserDetailsService userDetailsService;

    @Autowired
    public void setUserDetailsService(UserDetailsServiceImpl userDetailsService) {
        this.userDetailsService = userDetailsService;
    } 
```

这是它现在的样子：

```
@Controller
@RequestMapping("/register.htm")
public class AddUserFormController {

    @Autowired
    private UserDetailsService userDetailsService;

    public void setUserDetailsService(UserDetailsServiceImpl userDetailsService) {
        this.userDetailsService = userDetailsService;
    } 
```

我将 @Autowired 从 setter 直接移动到属性，最重要的是，我将 userDetailsS​​ervice 的类型更改为 UserDetailsS​​ervice，而不是 UserDetailsS​​erviceImpl。

# c# - 我们可以用一个 WCF 调用替换多个 WCF 调用吗？

> ID：13963664
> 
> 赞同：2
> 
> 时间：2012-12-20T00:48:28.660
> 
> 标签：c#, performance, wcf, httpcontext

我目前正在使用从一组 wcf 服务中读取数据的 mvc4 应用程序。当前，当用户点击页码时，如果触发 wcf 请求以获取页面不同部分的数据。我想提高它的性能。

我的想法是，当用户登陆页面时，会进行一次 wcf 调用，该调用会检索多次调用之前执行的所有必要数据，并将其中的数据放入用户请求的 httpcontext 中。

这是否比通过命名管道调用单个但较大的 wcf 调用或命名管道下的多个较小调用的方法提高了性能？将大量数据放入 httpcontext 是否会对性能产生影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:42:26.730

我认为你试图通过产生更多问题来解决一个问题。如果您一次查询所有数据并存储在 httpcontext 中，它将加快打开新页面的性能，但第一次打开页面会花费相当长的时间。此外，如果将数据存储在每个用户的 httpcontext 中，那么您可能很容易耗尽内存，特别是如果您一次有很多用户。

我认为首先您需要定位问题并找到性能不佳的根本原因。它可能是一个查询，也可能是一些数据库锁。无论如何，缓存是个好主意，但不要使用 httpcontext 。使用 ASP.NET 缓存或一些分布式缓存，如 App Fabric。这些工具将为您提供许多内置功能，并且您可以更轻松地扩展您的应用程序。

希望能帮助到你。

# php - Codeigniter 不允许用户向数据库添加重复的电子邮件

> ID：13963668
> 
> 赞同：0
> 
> 时间：2012-12-20T00:48:43.797
> 
> 标签：php, mysql, codeigniter

我正在尝试拉入用户表，如果电子邮件已经在数据库中，我不希望用户能够使用相同的电子邮件添加另一行。下面的代码是我到目前为止汇总的代码，但它似乎无法正常工作。有没有人注意到我做错了什么？

```
 $email = $this->input->post('email');
    $password = $this->input->post('password');
    $firstname = $this->input->post('firstname');
    $lastname = $this->input->post('lastname');
    $usersAddress = $this->input->post('usersAddress');
    $usersCity = $this->input->post('usersCity');
    $usersState = $this->input->post('usersState');
    $phoneNumber = $this->input->post('phoneNumber');

    $query1 = $this->db->get('users');
    foreach($query1->result() as $row) {    
        if ($row->email == $email) {
            echo 'Sorry but this email is already in use. Please go back and use a different email.';
        } else {
            $data = array('email' => $email,
                          'password' => $password,
                          'firstname' => $firstname,
                          'lastname' => $lastname,
                          'usersAddress' => $usersAddress,
                          'usersCity' => $usersCity,
                          'usersState' => $usersState,
                          'phoneNumber' => $phoneNumber);
            $this->db->insert('users', $data); 
            $this->session->set_userdata('id', $this->db->insert_id());
            $this->session->set_userdata('logged', 'true');
            $this->session->set_userdata('firstname', $firstname);
            $this->session->set_userdata('lastname', $lastname);
            $this->session->set_userdata('email', $email);
            mail($email,"KyPlays.org","You have successfully regstered at KyPlays.org");
            header("Location: ".base_url()."index.php/routers/startpage?requestedPageType=regPart2");
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T01:01:33.100

不需要循环。只需检查电子邮件是否正在使用：

```
$query = $this->db->get_where('users', array('email' => $email));
if ($query->num_rows() > 0) {
  // Show error message as email already exists in the database
} else {
  // Insert new user
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T00:01:38.217

您还可以使用内置的 form_validation 并使用以下内容：

```
$this->form_validation->set_rules('email', 'Email','required|valid_email|is_unique[users.email]'); 
```

另见： [http ://ellislab.com/codeigniter/user-guide/libraries/form_validation.html](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html)

# php - 从供应商类生成 Symfony2 表单

> ID：13963674
> 
> 赞同：3
> 
> 时间：2012-12-20T00:49:19.667
> 
> 标签：php, symfony, doctrine, symfony-forms

使用 Symfony2 并试图找出如何最好地整合供应商库。使用路由配置调用供应商库方法非常容易：`use`适当的`namespace`，生成类名，要调用的方法，以及来自几个路径组件和查询变量的参数，瞧，即时集成。

不过，我在使用表格时遇到了麻烦。我的目标似乎应该很容易。我想通过供应商类在 Symfony2 中制作表格。作为一个具体示例，请考虑[google-api-php-client](https://github.com/evert/google-api-php-client)。看起来`->createForm()`效果最好，因为它很好地连接到 ORM 和验证。但是，它依赖于一个`MyBundle\Form\ThingType`文件和类。要创建这个类，我需要我的包中的一个实体。我不能（或无法弄清楚如何）只使用供应商库中现有的“实体”。当 API 术语中已经存在“模型”时，在 Symfony 命名法中创建“实体”似乎不灵活且非常不干燥

我开始工作的另一种方法是使用

`$formBuilder = $this->createFormBuilder(new GoogleApi\Contrib\Event);`

然后

`foreach(get_object_vars($event) as $prop) { $formBuilder->add($prop); }`

但这并没有利用 API 文档和内置验证工具之间看似现成的桥梁，这也意味着必须将每个单独的数据类型声明为单独的或数组来决定是否包含类的集合-based 表单或单个基于类的表单。

简而言之，我想使用 API 中可用的属性和 dataType 信息，如有必要，还可以[使用像这样的资源表示](https://developers.google.com/google-apps/calendar/v3/reference/events)来创建一个简单的函数（如我的调用函数），用于为类创建嵌套的、自我验证的表单在谷歌 API 中。我想在不创建一堆“实体”和“表单类型”的情况下实现这一点，这些“实体”和“表单类型”只是重写了库中已经编写的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T00:53:12.227

供应商库没有任何安装细节吗？您通常应该使用服务调用从控制器调用供应商事物，`$this->get('vendor.name.form_object')`而不是调用服务中的类将包含任何所需的依赖项。

此外，您将在捆绑包中创建的实体只是基本实体，然后将扩展其预制抽象类。例如（取自[https://github.com/FriendsOfSymfony/FOSUserBundle](https://github.com/FriendsOfSymfony/FOSUserBundle)）

```
<?php
// src/Acme/UserBundle/Entity/User.php

namespace Acme\UserBundle\Entity;

use FOS\UserBundle\Entity\User as BaseUser;
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 * @ORM\Table(name="fos_user")
 */
class User extends BaseUser
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    public function __construct()
    {
        parent::__construct();
        // your own logic
    }
} 
```

如果您想添加任何您自己的实体项，那么您可以在此操作，但仍保留基础实体/模型中的方法和属性。

# android - 错误：无法将配置解析为变量

> ID：13963676
> 
> 赞同：3
> 
> 时间：2012-12-20T00:49:26.023
> 
> 标签：android

在下面的代码中，我遇到了上述错误，在这里我也声明了变量。

```
contentBitmap = Bitmap.createBitmap(300, 300,
                Config.ARGB_8888);
        Backgroundcanvas = new Canvas(contentBitmap); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T00:55:44.223

它不被识别`Config`为类名。您需要使用限定名称`Bitmap.Config.ARGB_8888`或放在`import android.graphics.Bitmap.Config;`文件顶部。

# linux - Linux 反编译 .so 文件

> ID：13963677
> 
> 赞同：1
> 
> 时间：2012-12-20T00:49:34.200
> 
> 标签：linux, unix, command, decompiler

> **可能重复：**
> [有什么方法可以反编译 Linux .so？](https://stackoverflow.com/questions/2306972/is-there-any-way-to-decompile-linux-so)

有什么办法可以反编译 .so 文件？

我已经有 dissemble 但我如何重新编译它？

# php - 使用 Selenium 使用测试帐户登录 Facebook

> ID：13963682
> 
> 赞同：2
> 
> 时间：2012-12-20T00:49:59.853
> 
> 标签：php, facebook, facebook-graph-api, selenium, selenium-webdriver

我有一些 PHP 代码使用图形 api 在我的应用程序中创建 Facebook 测试帐户。我已经测试了这段代码，它工作正常。

我在使用[Selenium Webdriver (for PHP)](http://code.google.com/p/php-webdriver-bindings/)作为测试用户实际登录 Facebook 时遇到了麻烦。

这是我的代码的简化版本：

```
class FB_OAuthTest extends PHPUnit_Framework_TestCase {
    private $fbUtils = null;
    private $fbUser = null;
    private $startUrl = 'http://my.start.page';

    protected function setUp() {
        $this->webdriver = new WebDriver(Config::SELENIUM_SERVER, Config::SELENIUM_PORT);
        $this->webdriver->connect(Config::BROWSER);

        $this->fbUtils = new FBUtils(Config::FB_APP_ID, Config::FB_APP_SECRET);

        // create new FB test user here
        $this->fbUser = $this->fbUtils->createNewTestUser();
    }

    protected function tearDown() {
        // delete the test user when we're done
        if($this->fbUser != null) {
            $this->fbUtils->deleteTestUser($this->fbUser->id);
        }
        $this->webdriver->close();
    }

    // the magic happens here
    public function testOAuth() {    
        // "login" as test user by requesting the login url that they give
        $this->webdriver->get($this->fbUser->login_url);

        // start the app workflow: go to a page with a FB OAuth button
        $this->webdriver->get($this->startUrl); 
        $this->assertTrue(isTextPresent("FB_OAuth_Test_Start", $this->webdriver));

        // click the button to begin the FB OAuth process
        $oAuthButton = $this->webdriver->findElementBy(LocatorStrategy::xpath, "//button[@control='FBLogin1']");
        $oAuthButton->click();

        // The Facebook login/OAuth dialog shows up now, and forces me to login
        // despite first going to the FB user's login url

        // sleep for the hell of it, just to make sure the FB login dialog loads
        sleep(5);

        // Selenium fails here - not finding the input with id='email', despite it existing on the page
        $emailField = $this->webdriver->findElementBy(LocatorStrategy::xpath, "//input[id='email']");
        if ($emailField) {
            $emailField->sendKeys(array($this->fbUser->email));
            $emailField->submit();
        } else {
            $this->fail('FB login email field not found');
        }

        $passwordField = $this->webdriver->findElementBy(LocatorStrategy::xpath, "//input[id='pass']");
        if ($passwordField) {
            $passwordField->sendKeys(array($this->fbUser->password));
            $passwordField->submit();
        } else {
            $this->fail('FB login password field not found');
        }

        $loginButton = $this->webdriver->findElementBy(LocatorStrategy::xpath, "//input[name='login']");
        if ($loginButton) {
            $loginButton->click();
        } else {
            $this->fail('FB login button not found');
        }

        $grantAppPermission = $this->webdriver->findElementBy(LocatorStrategy::name, "grant_clicked");
        $grantAppPermission->click();

        $this->assertTrue(isTextPresent("FB_OAuth_Test_Success", $this->webdriver));
    }
} 
```

从代码注释中可以看出，Selenium 找不到 'email' 输入元素，测试失败。任何想法将不胜感激。谢谢！

**更新**

我什至尝试过做一些相当直接的事情，比如代码崩溃，但它仍然不起作用。

```
private function loginToFacebook() {
    $this->webdriver->get('https://www.facebook.com/login.php?login_attempt=1');

    sleep(1);

    $emailField = $this->webdriver->findElementBy(LocatorStrategy::xpath, "//input[id='email']");
    if ($emailField) {
        $emailField->sendKeys(array($this->fbUser->email));
        $emailField->submit();
    } else {
        $this->fail('FB login email field not found');
    }

    $passwordField = $this->webdriver->findElementBy(LocatorStrategy::xpath, "//input[id='pass']");
    if ($passwordField) {
        $passwordField->sendKeys(array($this->fbUser->password));
        $passwordField->submit();
    } else {
        $this->fail('FB login password field not found');
    }

    $loginButton = $this->webdriver->findElementBy(LocatorStrategy::xpath, "//input[name='login']");
    if ($loginButton) {
        $loginButton->click();
    } else {
        $this->fail('FB login button not found');
    }
} 
```

**更新：这是工作代码**

```
private function loginToFacebook() {
    $this->webdriver->get('https://www.facebook.com/login.php?login_attempt=1');

    $emailField = $this->webdriver->findElementBy(LocatorStrategy::id, 'email');
    if ($emailField) {
        $emailField->sendKeys(array($this->fbUser->email));
    } else {
        $this->fail('FB login email field not found');
    }

    $passwordField = $this->webdriver->findElementBy(LocatorStrategy::id, 'pass');
    if ($passwordField) {
        $passwordField->sendKeys(array($this->fbUser->password));
    } else {
        $this->fail('FB login password field not found');
    }

    $loginButton = $this->webdriver->findElementBy(LocatorStrategy::xpath, "//input[@name='login']");
    if ($loginButton) {
        $loginButton->click();
    } else {
        $this->fail('FB login button not found');
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T05:48:32.853

您错误地定义了您的 xpath 表达式

应该是`//input[@id='email'] ##Note the @ sign (not sure you need to escape '@' with a blackslash)`

但仍然尝试改变您尝试定位 Web 元素的方式

```
 // try locating by LocatorStrategy id
        $emailField = $this->webdriver->findElementBy(LocatorStrategy::id, 'email');
        if ($emailField) {
            $emailField->sendKeys(array($this->fbUser->email));
            $emailField->submit();
        } else {
            $this->fail('FB login email field not found');
        } 
```

与 相比，`id`它的搜索速度更快。`name``xpath`

对密码字段也进行相同的更改，就像这样

`$passwordField = $this->webdriver->findElementBy(LocatorStrategy::id, "pass");`

# python - re.findall - 从逗号分隔的字符串中获取项目列表

> ID：13963683
> 
> 赞同：2
> 
> 时间：2012-12-20T00:50:12.523
> 
> 标签：python, regex

假设你有一个字符串（比如一份圣诞礼物清单）。

```
presents = 'iPods, Windows 8, .hack//Sign boxset , red shoes    , Wall-E DVD,  Deus Ex: Human Revolution        ' 
```

逗号分隔的项目都是任意的，可以包含数字、标点符号或特殊字符（逗号除外）。我想使用 Python 获取这些项目的数组。

```
presents_arr = ['iPods', 'Windows 8', '.hack//Sign boxset', 'red shoes', 'Wall-E DVD', 'Deus Ex: Human Revolution'] 
```

我通常会用逗号分隔符分割字符串，然后用 split 清理每个字符串。

```
presents = presents.split(',')
presents = [present.strip() for present in presents] 
```

我们的好奇心，我可以用 re.findall 专门做这个吗？我需要与拆分/剥离相同的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T00:53:37.203

直接翻译是这样的：

```
presents = [x.strip() for x in re.findall(r'[^,]*', presents) if x] 
```

一个改进是在空格包围的逗号上拆分：

```
presents = re.split(r'\s*,\s*', presents) 
```

但在这种情况下，**请不要这样做。**根本没有办法改善以下内容的清晰度：

```
presents = presents.split(',') 
```

在这种情况下，性能也会比简单的拆分差。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T00:53:14.553

您可以搜索`[^,]*`，这将相当于您的 split by `,`。但是，更好的方法是拆分`\s*,\s*`- 这样您就不需要`strip`零件，这不是您可以轻松做到的事情`findall`。（实际上，我相信你根本做不到，因为需要可变长度的负后视。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T00:59:15.717

```
re.findall(r'[^,\s]+', presents) 
```

# css - CSS 媒体查询样式被覆盖

> ID：13963689
> 
> 赞同：0
> 
> 时间：2012-12-20T00:50:40.433
> 
> 标签：css, media-queries

我已经研究了一段时间与媒体查询相关的问题，但还没有找到解决问题的方法。我确定这只是我忽略的一件小事，但由于某种原因我无法弄清楚。

因此，我有一个带有 .ScopeToggle 类的按钮，我想针对纵向移动电话进行调整。我已经尝试了所有我能想到的不同方向，但这是我现在的做法：

在 HEAD 标签中：

```
<link rel="stylesheet" type="text/css" href="buttons.css" />
<link rel="stylesheet" type="text/css" href="mediaQuery.css" media="only screen and (max-width:340px)" /> 
```

在buttons.css 样式表中：

```
#MainContainer .ScopeToggle
{
    position: absolute;
    right: 7px;
    width: 150px;
    height: 30px;
    padding: 0;
    margin: 0;
    border: 1px solid rgba(0, 0, 0, 0.2);
    border-radius: 4px;
    list-style: none;
    font-size: 0.8em;
    font-weight: bold;
    background: rgba(0, 0, 0, 0.3);
} 
```

在 mediaQuery.css 样式表中：

```
.ScopeToggle
{
    -webkit-box-shadow: none;
    box-shadow: none;
    border: 0;
    background: none;
    width: 75px;
} 
```

**问题是当我在 chrome 的开发工具中查看这个时，媒体查询样式被拾取并显示在“样式”窗格中，但被划掉（以表明它们已被 button.css 样式覆盖）。**

当所有样式都被写入文档的 HEAD 标记时，我没有遇到这个问题，但是由于某种原因，这种抽象阻止了它按预期进行级联。我还尝试将媒体查询直接放在样式表中，而 LINK 元素没有内联“媒体”属性，并且我已将媒体查询放在按钮.css 下它自己的 STYLE 标记中，但这一切都相同结果。

想法？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T00:25:17.910

默认样式有一个 ID 前缀，而媒体查询的样式没有。

button.css 中的 CSS 选择器：

```
#MainContainer .ScopeToggle {...styles...} 
```

mediaQuery.css 中的 CSS 选择器：

```
.ScopeToggle {...styles...} 
```

**因此，将 '#MainContainer' 添加到 mediaQuery.css 选择器可以使其占据主导地位并解决问题。**

# c# - Telerik 网格工具栏插入 - 显示自定义文本

> ID：13963696
> 
> 赞同：3
> 
> 时间：2012-12-20T00:51:32.570
> 
> 标签：c#, model-view-controller, telerik

我想自定义通用插入按钮的文本。目前是“创建新记录”。

这是我的代码。

```
.ToolBar(toolbar =>
{

    toolbar.Insert().ImageHtmlAttributes(new { @class = "t-icon t-add", title = "Create new inventory" });
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T08:13:11.420

使用`Text()`方法设置按钮的文本。

```
toolbar.Insert().Text("Create new inventory") 
```

并确保您使用的是最新版本。该方法是在最近的版本中添加的。

# intuit-partner-platform - 使用 Devdefined 的 IConsumerRequest 保存 PDF

> ID：13963697
> 
> 赞同：1
> 
> 时间：2012-12-20T00:51:38.873
> 
> 标签：intuit-partner-platform, quickbooks-online, devdefined-oauth

我正在尝试从 QBO 保存 PDF，但是我坚持这一点：如何让 IConsumerRequest 返回流而不是字符串？ReadBody 似乎只发送字符串而不是二进制数据......

```
IConsumerRequest conReq = oSession.Request();
conReq = conReq.Get().WithRawContentType("application/pdf");
string outURL = base_url + "invoice-document/v2/" + realmId + "/" + customerInvoicesWithinDateRange[0].Id.Value;
conReq = conReq.ForUrl(outURL);
conReq = conReq.SignWithToken();
string serviceResponse = conReq.ReadBody(); 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T05:04:25.043

instead of conReeq.ReadBody(), you can do this:

```
conReq.ToWebResponse().GetResponseStream(); 
```

in fact, ReadBody() is simply an extension method on IConsumerRequest, defined as:

```
public static string ReadBody(this IConsumerRequest request)
{
  HttpWebResponse response = request.ToWebResponse();

  return response.ReadToEnd();
} 
```

# json - mongoexport JSON 断言：10340 解析 JSON 字符串失败

> ID：13963699
> 
> 赞同：3
> 
> 时间：2012-12-20T00:52:16.207
> 
> 标签：json, mongodb, command-line, export

我正在尝试从 mongoDB 导出 CSV 文件列表并将输出文件保存到我的目录，即 /home/asaj/。输出文件应具有以下列：name、file_name、d_start 和 d_end。查询应过滤状态等于“FU”或“FD”且 d_end > 2012 年 12 月 10 日的数据。

在 mongoDB 中，查询工作正常。下面的查询仅限于 1 个数据输出。请参阅下面的查询：

```
> db.Samples.find({ $or : [ { status : 'FU' }, { status : 'FD'} ], d_end : { $gte : ISODate("2012-12-10T00:00:00.000Z") } }, {_id: 0, name: 1, file_name: 1, d_start: 1, d_end: 1}).limit(1).toArray();
[
    {
            "name" : "sample"
            "file_name" : "sample.jpg",
            "d_end" : ISODate("2012-12-10T05:1:57.879Z"),
            "d_start" : ISODate("2012-12-10T02:31:34.560Z"),
    }

]
> 
```

在 CLI 中，mongoexport 命令如下所示：

```
mongoexport -d maindb -c Samples -f "name, file_name, d_start, d_end" -q "{'\$or' : [ { 'status' : 'FU' }, { 'status' : 'FD'} ] , 'd_end' : { '\$gte' : ISODate("2012-12-10T00:00:00.000Z") } }" --csv -o "/home/asaj/currentlist.csv" 
```

但我总是以这个错误结束：

```
connected to: 127.0.0.1
Wed Dec 19 16:58:17 Assertion: 10340:Failure parsing JSON string near: , 'd_end
0x5858b2 0x528cb4 0x52902e 0xa9a631 0xa93e4d 0xa97de2 0x31b441ecdd 0x4fd289
mongoexport(_ZN5mongo11msgassertedEiPKc+0x112) [0x5858b2]
mongoexport(_ZN5mongo8fromjsonEPKcPi+0x444) [0x528cb4]
mongoexport(_ZN5mongo8fromjsonERKSs+0xe) [0x52902e]
mongoexport(_ZN6Export3runEv+0x7b1) [0xa9a631]
mongoexport(_ZN5mongo4Tool4mainEiPPc+0x169d) [0xa93e4d]
mongoexport(main+0x32) [0xa97de2]
/lib64/libc.so.6(__libc_start_main+0xfd) [0x31b441ecdd]
mongoexport(__gxx_personality_v0+0x3c9) [0x4fd289]
assertion: 10340 Failure parsing JSON string near: , 'd_end 
```

我在 mongoexport CLI中的 " **, 'd_end' " 中有错误。**我不太确定这是否是 JSON 语法错误，因为查询适用于 MongoDB。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T03:15:15.657

在询问了比我更了解 MongoDB 的人后，我们发现问题出在

```
ISODate("2012-12-10T00:00:00.000Z") 
```

我们找到了这个问题的答案：[mongoexport JSON parsing error](https://stackoverflow.com/questions/8098191/mongoexport-json-parsing-error)

要解决此错误，首先，我们将其转换为**strtotime**：

```
php > echo strtotime("12/10/2012");
1355126400 
```

接下来，**多个 strtotime 结果为 1000**。该日期将如下所示：

```
1355126400000 
```

最后，在 mongoexport 命令**中将 ISODate("2012-12-10T00:00:00.000Z")**更改为**new Date(1355126400000)**。

现在，CLI mongoexport 看起来像这样并且它可以工作：

```
mongoexport -d maindb -c Samples -f "id,file_name,d_start,d_end" -q "{'\$or' : [ { 'status' : 'FU' }, { 'status' : 'FD'} ] , 'd_end' : { '\$gte' : new  Date(1355126400000) } }" --csv -o "/home/asaj/listupdate.csv" 
```

**注意：**删除 -f 或 --fields 选项中每个字段名称之间的空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T16:10:40.603

我知道这与这个问题没什么关系，但是这篇文章的标题在谷歌中提出了它，所以因为我得到了完全相同的错误，所以我会添加一个答案。希望它可以帮助某人。

我的问题是将 _id 的 MongoId 查询添加到 Windows 上的 mongoexport 控制台命令。这是错误：

```
Assertion: 10340:Failure parsing JSON string near: _id 
```

问题最终是我需要将 JSON 查询用双引号括起来，*并且*ObjectId 必须用双引号（不是单引号！），所以我不得不转义这些引号。这是有效的最终查询，以供将来参考：

```
 mongoexport -u USERNAME -pPASSWORD -d DATABASE -c COLLECTION 
   --query "{_id : ObjectId(\"5148894d98981be01e000011\")}" 
```

# java - 带有字符串替换的 Java 正则表达式

> ID：13963706
> 
> 赞同：0
> 
> 时间：2012-12-20T00:53:07.603
> 
> 标签：java, regex

我需要 Java 正则表达式方面的帮助吗？

我有一个字符串`"TA520"`，`"TA011"`我想使用正则表达式获取没有前导数字的数字。所以我需要 the`"520"`和 the`"11"`没有前导`0`数字。我有表达`aString = aString.replace("TA0* , "");`，但这不起作用。我将如何使用 Java 中的正则表达式来做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T00:56:01.640

这里的问题是`String.replace`不使用正则表达式。

你需要使用`String.replaceAll`.

```
aString.replaceAll("^TA0*", "") 
```

或者，使用`replaceFirst`：

```
aString.replaceFirst("^TA0*", "") 
```

这会去除前导“TA”以及任何可选的前导零。

# objective-c - 得到一个“方法定义未找到错误”并且不知道为什么

> ID：13963709
> 
> 赞同：10
> 
> 时间：2012-12-20T00:53:23.307
> 
> 标签：objective-c

我正在通过 Apple 的 Objective-C 编程，并在此过程中进行非常简单的练习。出于某种原因，我收到一条错误消息，说`Method Definition cannot be found`. 我检查了拼写和大写，该方法在**.h**和**.m**文件中。无法弄清楚它为什么这样做。

具体来说，它是说找不到“*说点什么”的方法定义。*这是代码：

**。H**

```
#import <Foundation/Foundation.h>

@interface XYZPerson : NSObject

@property NSString *firstName;
@property NSString *lastName;
@property NSDate *dateOfBirth;

- (void)saySomething;
- (void)sayHello;
- (void)sayShutUp;
- (void)sayHola;
+ (id)person;

@end 
```

和**.m**

```
#import "XYZPerson.h"

@implementation XYZPerson

- (void)saySomething:(NSString *)greeting {
    NSLog(@"%@", greeting);
}

- (void)sayHello {
[self saySomething:@"Hello, World!"];
}

- (void)sayHola {
[self saySomething:@"Hola, Amigos!"];
}
- (void)sayShutUp {
[self saySomething:@"Shut up!"];
}
+ (id)person {
return [[self alloc]init];
}

@end 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-20T00:57:54.947

一个名为`saySomething:`的方法不同于一个名为 的方法`saySomething`。前者需要论证，后者不需要。您必须更改头文件中的声明以包含参数。即改变：

```
- (void)saySomething; 
```

到：

```
- (void)saySomething:(NSString *)greeting; 
```

使其与您的实现相匹配。

# java - Apache FOP 0.95 可以渲染表情吗？

> ID：13963714
> 
> 赞同：-1
> 
> 时间：2012-12-20T00:54:43.210
> 
> 标签：java, utf-8, apache-fop

我们使用的是 Apache FOP 0.95 渲染系统，渲染引擎在遇到 UTF-8 表情符号时会崩溃。我正在使用 Java 将数据呈现为 PS/PDF 格式。

有没有办法正确渲染它们或过滤这些不可渲染的字符？

这是一个例外：在 org.apache.xalan.templates.FuncDocument.getDoc(FuncDocument.java:356) 在 org.apache.xalan 的 org.apache.xalan.templates.FuncDocument.warn(FuncDocument.java:419)。 templates.FuncDocument.execute(FuncDocument.java:192) 在 org.apache.xpath.Expression.bool(Expression.java:184) 在 org.apache.xpath.XPath.bool(XPath.java:410) 在 org.apache .xalan.templates.ElemChoose.execute(ElemChoose.java:124) 在 org.apache.xalan.transformer.TransformerImpl.executeChildTemplates(TransformerImpl.java:2411) 在 org.apache.xalan.transformer.TransformerImpl.transformToRTF(TransformerImpl.java :1999) 在 org.apache.xalan.templates.ElemVariable.getValue(ElemVariable.java:308) 在 org.apache.xalan.templates 的 org.apache.xalan.transformer.TransformerImpl.transformToGlobalRTF(TransformerImpl.java:1944)。XUnresolvedVariable.execute(XUnresolvedVariable.java:124) 在 org.apache.xpath.VariableStack.getGlobalVariable(VariableStack.java:446) 在 org.apache.xpath.operations.Variable.execute(Variable.java:212) 在 org.apache .xpath.operations.Variable.execute(Variable.java:186) 在 org.apache.xalan.templates.FuncDocument.execute(FuncDocument.java:77) 在 org.apache.xpath.XPath.execute(XPath.java:335 ) at org.apache.xalan.templates.ElemVariable.getValue(ElemVariable.java:278) at org.apache.xalan.templates.XUnresolvedVariable.execute(XUnresolvedVariable.java:124) at org.apache.xpath.VariableStack.getGlobalVariable( VariableStack.java:446) 在 org.apache.xpath.operations.Variable.execute(Variable.java:212) 在 org.apache.xpath.operations.Variable.execute(Variable.java:186) 在 org.apache.xpath .axes.WalkingIterator。setRoot(WalkingIterator.java:154) 在 org.apache.xpath.axes.NodeSequence.setRoot(NodeSequence.java:213) 在 org.apache.xpath.axes.LocPathIterator.execute(LocPathIterator.java:210) 在 org.apache .xpath.XPath.execute(XPath.java:335) 在 org.apache.xalan.templates.ElemVariable.getValue(ElemVariable.java:278) 在 org.apache.xalan.templates.ElemVariable.execute(ElemVariable.java:246 ) 在 org.apache.xalan.templates.ElemTemplate.execute(ElemTemplate.java:392) 在 org.apache.xalan.templates.ElemCallTemplate 的 org.apache.xalan.transformer.TransformerImpl.executeChildTemplates(TransformerImpl.java:2411)。在 org.apache.xalan.templates.ElemLiteralResult.execute(ElemLiteralResult.java:1374）在 org.apache.xalan.templates.ElemTemplate.execute（ElemTemplate.java:392）在 org.apache.xalan.templates.ElemCallTemplate .execute(ElemCallTemplate.java:246) 在 org.apache.xalan.transformer.TransformerImpl.executeChildTemplates(TransformerImpl.java:2411) 在 org.apache.xalan.templates.ElemLiteralResult.execute(ElemLiteralResult.java:1374) 在 org. apache.xalan.transformer.TransformerImpl.executeChildTemplates(TransformerImpl.java:2411) at org.apache.xalan.templates.ElemLiteralResult.execute(ElemLiteralResult.java:1374) at org.apache.xalan.transformer.TransformerImpl.executeChildTemplates(TransformerImpl. java:2411) 在 org.apache.xalan.templates.ElemTemplate.execute(ElemTemplate.java:392) 在 org.apache.xalan。org.apache.xalan.transformer.TransformerImpl.executeChildTemplates(TransformerImpl.java:2411) 的模板.ElemCallTemplate.execute(ElemCallTemplate.java:246) org.apache.xalan.templates.ElemLiteralResult.execute(ElemLiteralResult.java:1374)在 org.apache.xalan.transformer.TransformerImpl.executeChildTemplates(TransformerImpl.java:2411) 在 org.apache.xalan.templates.ElemTemplate.execute(ElemTemplate.java:392) 在 org.apache.xalan.templates.ElemCallTemplate.execute (ElemCallTemplate.java:246) 在 org.apache.xalan.transformer.TransformerImpl.executeChildTemplates(TransformerImpl.java:2411) 在 org.apache.xalan.templates.ElemIf.execute(ElemIf.java:160) 在 org.apache。 xalan.templates.ElemApplyTemplates.transformSelectedNodes(ElemApplyTemplates.java:393) 在 org.apache.xalan.templates.ElemApplyTemplates。在 org.apache.xalan.templates.ElemLiteralResult.execute(ElemLiteralResult.java:1374) 在 org.apache.executeChildTemplates(TransformerImpl.java:2411) 处执行(ElemApplyTemplates.java:176) .xalan.templates.ElemApplyTemplates.transformSelectedNodes(ElemApplyTemplates.java:393) at org.apache.xalan.templates.ElemApplyTemplates.execute(ElemApplyTemplates.java:176) at org.apache.xalan.transformer.TransformerImpl.executeChildTemplates(TransformerImpl.java :2411) 在 org.apache.xalan.transformer.TransformerImpl.transformNode(TransformerImpl.java:1367) 在 org.apache.xalan.transformer 的 org.apache.xalan.transformer.TransformerImpl.applyTemplateToNode(TransformerImpl.java:2281)。 TransformerImpl.transform(TransformerImpl.java:709) 在 org.apache.xalan.transformer.TransformerImpl。org.apache.xalan.transformer.TransformerImpl.transform(TransformerImpl.java:1262) 处的变换(TransformerImpl.java:1284)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T01:09:30.193

你不说不需要的字符是什么......

该`String.replaceAll()`方法是摆脱不需要的字符的好方法......在字符串中。

但另一个问题是知道这些不可渲染的字符是什么。此外，这些字符是由 Unicode 标准定义的……它们不是系统特定的含义。

* * *

我认为您最好弄清楚FOP 崩溃的*原因*，并修复导致崩溃的原因。没有明显的理由说明 FOP 不能处理任何可打印字符。我的猜测是这与您使用 FOP 的方式有关...

# java - 如何有效地破坏 Java Servlet 中的“会话”？

> ID：13963720
> 
> 赞同：20
> 
> 时间：2012-12-20T00:55:19.313
> 
> 标签：java, session, servlets, destroy

我正在工作的 Servlet 有一个变量`session`.

我试过`session.invalidate();`了，这似乎已经破坏了会话，但是当我像这样进行重定向时`response.sendRedirect("restanes.jsp");`，它给了我`HTTP Status 500`这一行的错误：

```
java.lang.IllegalStateException: getAttribute: Session already invalidated 
```

这是意料之中的，因为我试图破坏会话。

但是为什么页面无法重定向？在其他地方的同一页面上，我已成功重定向。

如何销毁会话并成功重定向？

代码片段：

```
if(request.getParameter("logout") != null ){  
        session.invalidate();
        response.sendRedirect("restanes.jsp");
} 
```

更新：我需要做的就是`return;`在`response.sendRedirect("restanes.jsp");`. 衷心感谢`BalusC`。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-20T12:55:46.127

发送重定向后，您需要从该方法返回。

```
if (request.getParameter("logout") != null) {  
    session.invalidate();
    response.sendRedirect("restanes.jsp");
    return; // <--- Here.
} 
```

否则，代码将继续运行并`session.getAttribute()`在块中进一步触发某些方法，从而导致此异常。至少，这是迄今为止描述的问题的最可能原因，并且基于这是一个非常常见的初学者错误的事实。另见例如[这个答案](https://stackoverflow.com/questions/2123514/java-lang-illegalstateexception-cannot-forward-after-response-has-been-committe/2125045#2125045)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T05:50:14.680

你的代码没问题

```
if(request.getParameter("logout") != null )
{  
  session.invalidate();
  response.sendRedirect("restanes.jsp");
} 
```

但请确保重定向页面不包含任何会话属性。来自“restanes.jsp”页面的 500 内部错误。解决重定向页面和会话活动。

# java - 派生泛型类型的java擦除

> ID：13963723
> 
> 赞同：4
> 
> 时间：2012-12-20T00:55:39.747
> 
> 标签：java, generics, derived-class, type-erasure, overriding

我遇到了一个问题，我正在尝试实施“两级”铸造。

下面是显示我正在尝试做的简化代码：

```
public class Array2D<T>
{
    private T[][] _array;
    ....
    public T get( int x , int y )
    ....
    public void set( T o , int x , int y )
} 
```

直到那里，没有问题。

我正在尝试扩展此类，例如我可以在 getter 和 setter 中封装 SoftReferences 的使用：

```
public class Array2DSoftRefs<T> extends Array2D<SoftReference<T>>
{
    public T get( int x , int y )
    {
        return super.get(x,y).get(); // get the array element, then the SoftReference contents
    }
    ....
    public void set( T o , int x , int y )
    {
        super.set( new SoftReference<T>(o) ,x,y); // generate the SoftReference on-the-fly
    } 
```

}

事实上，我被踢掉了，因为编译器/语法分析器跳过了泛型擦除，然后`@Override`注释无法帮助我（队长明显）。

我不知道如何从模板返回`T`类型。`SoftReference<T>`

我试图放入两个泛型`T`和`U`for `SoftReference<T>`，但没有成功。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T01:06:03.007

问题`Array2DSoftRef.get`在于您不能覆盖一个方法并使其返回类型不那么具体（例如`SoftReference<T>`-> `T`）。

问题在于，如果方法具有不同的参数（例如，而不是） `Array2DSoftRef.set`，则您不能覆盖该方法，但是如果在[擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)之后它具有相同的参数，您也不能重载它。`T``SoftReference<T>`

我建议你在这里使用组合而不是继承：

```
public class Array2DSoftRefs<T> {

    private final Array2D<SoftReference<T>> inner = ...;

    public T get( int x , int y ) {
        return inner.get(x,y).get();
    }

    public void set( T o , int x , int y ) {
        inner.set(new SoftReference<T>(o), x, y);
    }
} 
```

否则，您将不得不重命名您的`get`和`set`in`Array2DSoftRefs`以避免名称冲突 - 但请记住父级`get`，并且`set`仍然会以这种方式公开。

# java - 为什么 JScrollPane 不工作？

> ID：13963726
> 
> 赞同：1
> 
> 时间：2012-12-20T00:55:53.213
> 
> 标签：java, swing, jscrollpane

当我注释掉 frame.add(hidden) 它只显示文本区域。当我不评论它时，它只显示一个带有灰色滚动条的大灰色框。

```
import java.util.Scanner;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.JScrollPane;
import java.awt.GridLayout;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;

public class Panlindrome{
    public Panlindrome(){
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setTitle("Panlindrome?");
        frame.setSize(240,320);
        //frame.setLayout(new GridLayout(3,1));

        JTextArea inputText = new JTextArea(30,1);
        inputText.setLineWrap(true);

        JScrollPane hidden = new JScrollPane(inputText);
        hidden.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);

        frame.add(inputText);
        //frame.add(hidden);

        frame.setVisible(true);
    }

    public static void main(String[] args){
        Panlindrome check = new Panlindrome();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T01:03:49.627

不要将 inputText 添加到框架中；只添加隐藏。

滚动窗格的内容已经是滚动窗格的子项。如果您还尝试将其添加到框架（实际上是框架的内容窗格，但无论如何），它将同时出现在两个地方，这是行不通的。

# javascript - 数据表和 jQuery $.post

> ID：13963732
> 
> 赞同：0
> 
> 时间：2012-12-20T00:57:12.193
> 
> 标签：javascript, jquery, datatables

我的网页中有一个[数据](http://datatables.net/)表，其中包含一页以上的分页数据。根据[datatables 给出的示例](http://datatables.net/release-datatables/examples/api/form.html)，我使用以下 javascript/jQuery 提交表单：

```
<script>
var oTable;
$(document).ready(function() {
    $('#form').submit( function() {
        var sData = oTable.$('input').serialize();
        $.post('', sData); // WORKS
        // $.post('', sData, $('body').html(data)); // DOES NOT WORK
        return false;
    } );

    oTable = $('#meters').dataTable();
} );
</script> 
```

当我通过 发布时`$.post('', sData);`，我的所有表格行都已发布。当我使用 发布时`$.post('', sData, $('body').html(data));`，仅发布表格可见页面的行。为什么？

我对 jQuery 还很陌生——也许我遗漏了一些东西……

这是我用来初始化表的代码：

```
<script>    

/* Create an array with the values of all the input boxes in a column */
$.fn.dataTableExt.afnSortData['dom-text'] = function  ( oSettings, iColumn )
{
    var aData = [];
    $( 'td:eq('+iColumn+') input:last', oSettings.oApi._fnGetTrNodes(oSettings) ).each( function () {
        aData.push( this.value );
    } );
    return aData;
}

/* Create an array with the values of all the select options in a column */
$.fn.dataTableExt.afnSortData['dom-select'] = function  ( oSettings, iColumn )
{
    var aData = [];
    $( 'td:eq('+iColumn+') select:last', oSettings.oApi._fnGetTrNodes(oSettings) ).each( function () {
        aData.push( $(this).val() );
    } );
    return aData;
}

/* Create an array with the values of all the checkboxes in a column */
$.fn.dataTableExt.afnSortData['dom-checkbox'] = function  ( oSettings, iColumn )
{
    var aData = [];
    $( 'td:eq('+iColumn+') input:last', oSettings.oApi._fnGetTrNodes(oSettings) ).each( function () {
        aData.push( this.checked==true ? "1" : "0" );
    } );
    return aData;
}

    $(document).ready(function() {
        $('#meters').dataTable(
            {
                "aoColumns": [
                    { "sSortDataType": "dom-text" },
                    { "sSortDataType": "dom-select" },
                    { "sSortDataType": "dom-checkbox" },
                ],
                "aoColumnDefs": [
                    { 
                        "aTargets":     ["vbNoSearchSort"],
                        "bSearchable":  false,
                        "bSortable":    false
                    }
                ],
                "bProcessing"   :true,
                "bStateSave"    :true,
                "sPaginationType": "full_numbers"
            }
        );
    } );
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T01:02:04.220

因为它需要是闭包或对函数的引用。

```
$.post('', sData, function(data){$('body').html(data); }); 
```

或者

```
function callback(data) {
   $('body').html(data);
}
$.post('', sData, callback); 
```

# wix - 在 WiX 中包含许多文件，但没有列出每个文件。

> ID：13963733
> 
> 赞同：2
> 
> 时间：2012-12-20T00:57:12.810
> 
> 标签：wix, windows-installer, wix3.6

我正在编写一个使用 WiX 3.0 的 MSI，我试图弄清楚如何使它包含目录中除某些文件之外的所有文件，而无需手动指定每个属性。类似于 installshield 中的动态拾音器。

我正在寻找参考的旧安装程序（使用 WiX 2.0）执行以下操作：

1.  一个调用脚本的生成文件，该脚本将所有必要的文件复制到一个单独的目录结构中，该目录结构模拟最终产品的安装方式。
2.  另一个脚本，用于将此临时文件夹中每个文件的属性插入到部分完成的 wxs 文件中。
3.  WiX 运行

我想避免这一步，想知道是否有一些命令或预处理器指令来实现这个 WiX 本身？

上面的第一步也吐出一些生成的文件（来自工具），然后将其包含到 wxs 文件中。有没有办法我也可以效仿？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T06:22:20.190

您需要指定每个文件。

但是，您可以使用[Heat.exe](http://wix.sourceforge.net/manual-wix3/heat.htm)自动生成一个 wxs 文件，您可以将其包含在构建过​​程中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T22:09:15.180

我用非解决方案便宜了，并压缩了目录和构建脚本中的文件。您当前方法的优点是 MSI 知道这些文件，它们可能是关键文件（因此已修补/升级和/或修复）。

我会研究 saschabeaumont 关于使用热量的建议。显然是更好的解决方案

# php - php临时文件上传目录-关闭本地服务器

> ID：13963737
> 
> 赞同：1
> 
> 时间：2012-12-20T00:58:05.123
> 
> 标签：php

上传图像时，PHP 将临时图像存储在服务器的本地文件中。

是否可以更改此临时位置，使其脱离本地服务器。

原因：使用没有粘性会话的负载平衡，我不希望文件上传到一台服务器，然后在另一台服务器上不可用。注意：我不需要一次性完成文件上传和处理文件。

首选的临时位置是 AWS S3 - 也只是想知道这是否可能。

如果不可能，我可以让文件上传一个完整的过程，同时将完成的文件放在最终位置。

只是想知道 PHP 临时图像/文件位置是否可以不在本地服务器上？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T00:59:20.440

您可以使用本文中详细介绍的一些新技术将文件从客户端直接上传到 S3：

[http://www.ioncannon.net/programming/1539/direct-browser-uploading-amazon-s3-cors-fileapi-xhr2-and-signed-puts/](http://www.ioncannon.net/programming/1539/direct-browser-uploading-amazon-s3-cors-fileapi-xhr2-and-signed-puts/)

否则，我个人会建议使用每个服务器的`tmp`文件夹来实现这一点——临时存储。文件在您的服务器上后，您始终可以上传到 S3，然后可以在所有负载平衡服务器上访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T01:23:31.653

[您可以在 ELB 下的实例上使用s3fs](http://code.google.com/p/s3fs/)挂载 S3 存储桶，以便在应用程序服务器之间共享您的所有上传。关于 /tmp，不要碰它，因为目的地是 S3 并且它是共享的 - 你不必担心。

如果你有很多上传，S3 可能是瓶颈。在这种情况下，我建议设置[NAS](http://en.wikipedia.org/wiki/Network-attached_storage)。就个人而言，我使用[GlusterFS](http://www.gluster.org/)是因为它可以很好地扩展并且很容易设置。它有复制问题，但你可能根本不使用复制卷，你很好。

另一种选择是[Ceph](http://ceph.com/)、[Sector/Sphere](http://sector.sourceforge.net/)、[XtreemFS](http://www.xtreemfs.org/)、[Tahoe-LAFS](https://tahoe-lafs.org/trac/tahoe-lafs)、 [POHMELFS](http://en.wikipedia.org/wiki/POHMELFS)等等......

# selenium - selenium webdriver如何将文件上传到浏览器？

> ID：13963738
> 
> 赞同：38
> 
> 时间：2012-12-20T00:58:11.523
> 
> 标签：selenium, automation, webdriver, browser-automation, selenium-chromedriver

我是一名 javascript/java 开发人员，我一直在试图弄清楚 selenium webdriver 自动化框架如何从文件系统上传文件。无法通过 javascript 设置文件输入，因为它违反了安全性。然而不知何故，webdriver 能够使用以下命令执行此操作：

```
driver.setFileDetector(new LocalFileDetector());
WebElement upload = driver.findElement(By.id("myfile"));
upload.sendKeys("/Users/sso/the/local/path/to/darkbulb.jpg");
driver.findElement(By.id("submit")).click(); 
```

所以他们通过向它发送密钥来设置值？我不明白。我查看了这里的源代码： [http](http://code.google.com/p/selenium/source/checkout) ://code.google.com/p/selenium/source/checkout 我仍然无法找到他们这样做的地方。

编辑：我的问题不是如何用 selenium 做到这一点，而是 selenium 开发人员如何使这成为可能？他们是如何绕过 javascript 中的安全限制的？他们如何上传文件？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-20T06:57:02.357

好问题伙计...他们编写了一个 HTTP 代理来解决 Javascript 安全限制。使用此代理可以绕过“相同主机来源”策略的许多限制，其中浏览器不允许 Javascript 调用除提供当前页面的服务器之外的任何内容。

此外，WebDriver 使用在操作系统级别触发事件的替代方法。由于这些“本机事件”不是由浏览器生成的，这种方法绕过了对合成事件的安全限制，并且由于它们是特定于操作系统的，一旦它们在特定平台上为一个浏览器工作，在另一个浏览器中重用代码是相对的简单的。

上面的大部分内容都是从下面引用的..请阅读以下参考以获取有关 Selenium 内部的更多详细信息

[http://www.aosabook.org/en/selenium.html](http://www.aosabook.org/en/selenium.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-03T12:05:35.903

我已经**使用 Selenium Webdriver 和 AutoIt 在 Facebook 上上传了照片**

步骤如下

**步骤1**

关于 Eclipse 代码 Upto（上传照片）如下：

```
WebElement Upload = Firefox.findElement(By.cssSelector("input[id^='u_']"));
Upload.click(); 
```

**第2步**

下载并安装 AutoIt：[http](http://www.autoitscript.com/site/autoit/downloads/) ://www.autoitscript.com/site/autoit/downloads/ （下载 ZIP）

**第 3 步**

在记事本中编写如下代码并保存为`PhotoUpload.au3`

```
WinWaitActive("File Upload")
Send("D:\Photo0116.jpg")   
Send("{ENTER}") 
```

**第 4 步**：右键单击此 .au3 文件并编译它。

**第 5 步**：在脚本文件中添加代码，如下所示：

```
try {
    String[] commands = new String[]{};
    // Location of the autoit executable
    commands = new String[] {"D:\\My softwares\\install software\\selenium\\UploadPhoto3.exe"};
    Runtime.getRuntime().exec(commands);
}       
catch (IOException e) {} 
```

**第 6 步**：运行脚本 ( `PhotoUpload.java`)

**第7步**：照片上传成功。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-31T08:17:14.930

上传windowns文件功能HTML代码为：

```
<input id="fileField" type="file" onchange="document.getElementById('textfield').value=this.value" name="position">   

<input type="submit" value="导入"> 
```

您可以使用以下代码完成上传 windows 文件。它可以成功运行，并且代码不包括单击上传操作。

```
driver.FileDetector = new LocalFileDetector();
FindElement(By.Id("fileField")).SendKeys(@"C:\Users\admin\Desktop\ProfessionCodes.txt"); FindElement(By.CssSelector("input[type='submit']")).Click(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T04:04:32.957

```
 //assuming driver is a healthy WebDriver instance
    WebElement fileInput = driver.findElement(By.name("uploadfile"));
   fileInput.sendKeys("C:/path/to/file.jpg"); 
```

或者

```
 driver.findElement(By.id("inputFile")).sendKeys("C:/path/to/file.jpg"); 
```

试试这个，让我知道

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-04T18:52:50.727

在某些情况下，特别是使用 Java，您需要创建一个 File 对象并将 absolutePath() 传递给驱动程序，如下所示：

```
File file = new File(sampleFile);
driver.findElement(By.id("<Your input tag with type of File>")).sendKeys(file.getAbsolutePath()); 
```

示例文件是一个字符串，指向需要上传的文件。这适用于 Firefox 和 Chrome。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-04-15T06:37:44.607

这帮助我进行文件上传，

代码 ：

```
 public class FileUpload {
        @Test
        public void test() {
            WebDriver driver = new FirefoxDriver();
            driver.get("http://www.freepdfconvert.com/pdf-word");
            driver.findElement(By.id("clientUpload")).click();
            driver.switchTo()
                    .activeElement()
                    .sendKeys(
                            "/home/likewise-open/GLOBAL/123/Documents/filename.txt");
            driver.manage().timeouts().implicitlyWait(60, TimeUnit.SECONDS);
            driver.findElement(By.id("convertButton"));
            /*
             * driver.switchTo().activeElement()
             * .sendKeys("selenium_2_testing_tools.pdf"); ;
             */
         {
                driver.wait(30000);
            } catch (Exception er) {
                System.out.println(er);
            }

        }
    } 
```

# jquery - 更改兄弟元素的 z-index 值的增量倒计时

> ID：13963740
> 
> 赞同：1
> 
> 时间：2012-12-20T00:58:50.227
> 
> 标签：jquery, css, for-loop, z-index

我到处寻找解决方案，但无法弄清楚。解决方案让我望而却步。

由于复杂的原因，我不能简单地更改 CSS 中的边距/填充交换，所以我尝试`style="z-index:5;"`在第一个 div 中添加，然后`style="z-index:4;"`在第二个 div 中添加，等等，以便页面上的最后一个元素具有最低z-index，并且向顶部的每个元素添加一个，因此如果有任何重叠，它始终保持在顶部，这是当前位于后续兄弟元素下方的某些链接的情况。

剥离下面的示例代码：我知道我的计数器正在工作，但是增量器 (z) 的值没有传递给`.css`for 循环中的方法。有什么建议么？

```
<style>
.subsection {
    margin-top: -80px;
    padding-top: 80px;
    position: relative;
}
</style>

<script>
    var set_zindex = function(){
        var subsection = $('.subsection');
    var subsections = subsection.length;
    var z;
    for ( z=subsections; z >=0; z-- ) {
        subsection.css('z-index', z );
    }
}
set_zindex();
</script>

<html>
<div class="subsection">some content</div>  //add style="z-index:5:
<div class="subsection">some content</div>  //add style="z-index:4:
<div class="subsection">some content</div>  //add style="z-index:3:
<div class="subsection">some content</div>  //add style="z-index:2:
<div class="subsection">some content</div>  //add style="z-index:1:
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T01:06:08.773

您正在使用 jQuery 集合（var 小节）。您需要分别查看该集合中的每个项目。

就像是：

```
subsection.each(function(i){
  $(this).css('z-index', subsection.length-i);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T01:04:30.750

您应该在 for 循环中使用 z -= 1 。有时事情会变得很糟糕。看[这里](https://stackoverflow.com/questions/971312/why-avoid-increment-and-decrement-operators-in-javascript)

并与每个迭代。

```
subsection.each
  (
    function(i) {
         $(this).css('z-index',subsections-i);
    } 
  )
; 
```

# jquery - jquery、razor 视图和 sql 数据库

> ID：13963742
> 
> 赞同：3
> 
> 时间：2012-12-20T00:59:03.517
> 
> 标签：jquery, asp.net, razor

我是 asp.net 和 razor 的新手。我试图让名为 product 的字段自动完成来自数据库的结果。

我已经创建了 autocomplete.cs 模型，并且工单控制器已经在项目中，所以我只是添加了动作。然后 new.cshtml 我已经添加了代码。我不知道出了什么问题。任何帮助表示赞赏。

问题是当我转到 new.cshtml 页面并且 jquery 不起作用并且文本框什么都不做时。它搞砸了我使用 jquery 隐藏的隐藏字段。它出现了。

这是自动完成的.cs

```
using System;
using System.Web;
using System.Linq;
using System.Collections.Generic;
using System.Data.SqlClient;
using System.Configuration;

namespace HelpDesk.Models
{
public class PartNumber
{
    public string[] GetPartNumber()
    {
        List<string> partnumber = new List<string>();
        using (SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["RASConnectionString"].ConnectionString))
        {
            con.Open();
            SqlCommand comm = new SqlCommand("select * from pltjones.dbo.inv_master", con);
            SqlDataReader reader = comm.ExecuteReader();

            while (reader.Read())
            {
                partnumber.Add(reader["part_no"].ToString());
            }
        }
        return partnumber.ToArray();
    }
} 
```

然后这里是已经在这个应用程序中创建的票控制器。我正在做一个我添加的内容。

```
 public ActionResult Autocomplete(string term)
    {
        var items = new PartNumber().GetPartNumber();

        var filteredItems = items.Where(
            item => item.IndexOf(term, StringComparison.InvariantCultureIgnoreCase) >= 0
            );
        return Json(filteredItems, JsonRequestBehavior.AllowGet);
    } 
```

这是剃刀视图 new.cshtml

```
 <script type="text/javascript">
   $(document).ready(function () {
       $('#product')
    .each(function () {
        $(this).autocomplete({
            source: '@Url.Action("Autocomplete")'
        });
    });
   }); 
```

```
 <tr id="trEmail">
    <td colspan="2">
        <label for="product">Enter product: </label>
        <input type="text" name="product" id="product" />
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T01:54:05.170

你还没有说你正在使用什么自动完成，但无论如何都不需要调用`.each()`，因为只有一个匹配，所以只需使用它：

```
$('#product').autocomplete(... etc ...) 
```

而且您还没有提供任何代码来说明当有人选择一个项目时要做什么，例如

```
$('#product').autocomplete({
    source: // as above
    select: function (event, ui) {
        $("#product").val(ui.item.value);
    }
}); 
```

# google-maps - Google Maps Android API v2 - 缺少 Google Play 商店

> ID：13963748
> 
> 赞同：3
> 
> 时间：2012-12-20T01:00:59.060
> 
> 标签：google-maps, google-maps-android-api-2, google-play-services

在使用 Google Maps Android API V2 的新发布的应用程序版本中，我已经实现了开发人员指南建议的所有内容，以确保用户安装了 GooglePlayServices，并且它在我拥有的所有设备上运行良好，并且到目前为止，已经更新到该应用程序新版本的数百人。

今天我通过[acra](http://acra.ch)收到了一个带有奇怪错误的错误报告。在 setupMapIfNeeded() 完成后，以下代码行会发生这种情况：

```
mMap.setMyLocationEnabled(true); 
```

Logcat 报告：

```
W/GooglePlayServicesUtil(10401): Google Play Store is missing. 
```

对 GooglePlayServicesUtil.isGooglePlayServicesAvailable() 的调用不应该也确保安装了 Play 商店吗？如果不这样做，这似乎是谷歌的一个巨大疏忽。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:45:25.953

万一有人偶然来到这里，或者只是想知道为什么它不起作用......

当用户安装了旧的 Android 市场时，可能会发生这种情况，该市场已被 Google Play 商店取代。

这是相关问题：[http](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4862) ://code.google.com/p/gmaps-api-issues/issues/detail?id=4862 （在 2 月更新中修复）。

# java - JSON 添加到 JSONArray 问题

> ID：13963751
> 
> 赞同：10
> 
> 时间：2012-12-20T01:01:32.430
> 
> 标签：java, json

大家好，我在 Json 方面不是最好的。我试图通过循环将一些 json 对象添加到 json 数组中，但问题是每次进入循环时，它也会用新数据覆盖数组中的先前数据。这是我的代码：

```
JSONObject jsonObj = new JSONObject();
JSONArray jsonArray = new JSONArray();
if(X.size() > 0)
{
  for (int j = 0; j < X.size(); j++)
   {
    zBean aBean = (zBean)X.get(j);
    jsonObj.put(ID,newInteger(aBean.getId()));
    jsonObj.put(NAME,aBean.getName());
    jsonArray.add(jsonObj);
   }
} 
```

给定 X.size = 2 的示例：

```
when j=0
jsonObj => {"Name":"name1","Id":1000}
jsonArray => [{"Name":"name1","Id":1000}]

when j = 1
jsonObj => {"Name":"name2","Id":1001}
jsonArray => [{"Name":"name2","Id":1001},{"Name":"name2","Id":1001}] 
```

我希望我的例子足够清楚。

如果有人可以在这里帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-20T01:05:24.170

您需要`jsonObj`在循环的每次迭代中创建一个新引用：

```
for (int j = 0; j < X.size(); j++)
 {
  zBean aBean = (zBean)X.get(j);
  jsonObj = new JSONObject();
//^^^^^^^^^^^^^^^^^^^^^^^^^^^ add this line
  jsonObj.put(ID,newInteger(aBean.getId()));
  jsonObj.put(NAME,aBean.getName());
  jsonArray.add(jsonObj);
 } 
```

否则，您将一遍又一遍地更新同一个实例，并将对同一对象的引用多次添加到数组中。由于它们都是相同的引用，因此对其中一个的更改会影响数组中的所有它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-11T13:48:34.370

以下将 json obj 添加到 json 数组中

```
public static void main(String[] args) {
    JSONArray jsonArray = new JSONArray();
    int i = 0;
    while(i < 3)
    {
        JSONObject jsonObj = new JSONObject();
        jsonObj.put("Name","Random"+i);
        jsonObj.put("ID", i);
        jsonArray.put(jsonObj); //jsonObj will be pushed into jsonArray
        i++;
    }
    System.out.println("jsonArray : "+ jsonArray);
} 
```

输出：

```
jsonArray : [{"ID":0,"Name":"Random0"},{"ID":1,"Name":"Random1"},{"ID":2,"Name":"Random2"}] 
```

.pom 具有以下依赖项

```
<dependencies>
    <dependency>
        <groupId>org.json</groupId>
        <artifactId>json</artifactId>
        <version>20180813</version>
    </dependency>
    <dependency>
        <groupId>com.google.code.gson</groupId>
        <artifactId>gson</artifactId>
        <version>2.8.6</version>
    </dependency>
</dependencies> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-03T22:41:30.073

尽管每次循环运行时我都创建了一个新的 JSONObject，但我仍然遇到了同样的问题。所以我所做的是我创建了一个`List`JSONObjects，每次循环运行时，我都会在我的列表中添加一条新记录并每次更新该记录。在 for 循环的最后，我将 JSONArray 放入列表中。

```
JSONArray jsonArray = new JSONArray();
List<JSONObject> myList = new ArrayList()<>;
if(X.size() > 0)
{
  for (int j = 0; j < X.size(); j++)
  {
    myList.add(new JSONObject());
    zBean aBean = (zBean)X.get(
    myList.get(j).put(ID,newInteger(aBean.getId()));
    myList.get(j).put(NAME,aBean.
  }
  for(int j = 0; j < myList.size(); j++)
    jsonArray.add(myList.get(j));
} 
```

# jquery - 使用无序/可选参数的 jQuery 方法

> ID：13963753
> 
> 赞同：2
> 
> 时间：2012-12-20T01:01:34.797
> 
> 标签：jquery, arguments

有一堆 jQuery 方法允许您重新排序或省略特定参数。例如：

```
$('#box').animate({top: 100}, 2000, "linear", function(){alert("done");}); 
```

与以下内容完全相同：

```
$('#box').animate({top: 100}, 2000, function(){alert("done");}); 
```

jQuery 如何在不将关联数组传递给单个参数的情况下配置它们的方法以实现这种灵活性？

他们会检查每个参数的数据类型并根据结果进行分配吗？这会为每种方法增加大量开销吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T01:12:31.493

[查看github](https://github.com/jquery/jquery/blob/master/src/effects.js)上的jQuery.animate() 函数，我看到他们正在使用 2nd、3rd 和 4th 参数调用 jQuery.speed()。速度函数定义得更远一些，并使用参数进行一些类型检查。

来自 effects.js 的代码片段：

```
jQuery.speed = function( speed, easing, fn ) {
    var opt = speed && typeof speed === "object" ? jQuery.extend( {}, speed ) : {
        complete: fn || !fn && easing ||
            jQuery.isFunction( speed ) && speed,
        duration: speed,
        easing: fn && easing || easing && !jQuery.isFunction( easing ) && easing
    };
    ...
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T01:14:39.407

简短的回答：是的，他们通常会测试 if `$.isFunction`、`$.isObject` `$.isArray`等，并根据它们的类型来移动参数。这只有在您有一个[预定义的原型列表](http://api.jquery.com/animate/)时才有效。（在 animate 的情况下，第二个参数可以是对象（选项）或数值（持续时间）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T01:17:23.280

确定 jQuery 使用`if`和声明`else`，`switch`必须首先检查每个参数，是函数、布尔值、字符串、整数或对象值

在它可以运行之前。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T23:04:12.700

我已经使用开关模拟了我自己的解决方案。

```
// Allocate passed arguments to settings based on type
for( var i = 0; i <= arguments.length; i++ ) {
    var arg = arguments[i];
    switch ( typeof arg ) {
        case "function":
            settings.action = arg;
            break;
        case "boolean":
            settings.runOnLoad = arg;
            break;
        case "number":
            settings.duration = arg;
            break;
    }
} 
```

# facebook-graph-api - FQL 搜索特定场地的活动

> ID：13963760
> 
> 赞同：1
> 
> 时间：2012-12-20T01:02:18.187
> 
> 标签：facebook-graph-api, facebook-fql

我是 facebook API 开发的新手。我一直在寻找任何与我类似的帖子，但到目前为止没有成功。我想执行 FQL 查询，查询将在未来几天在特定地点（例如特定城市“伦敦”）发生的公共事件。我知道场地是一个列，根据 FQL 指南（只有名称和 eid），它不能放在“WHERE”下。问题是，我不知道名称或事件 ID。这就是我想弄清楚的！有没有人遇到过类似的问题？任何建议都非常受欢迎。

谢谢一百万！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:46:13.047

我知道它不是 FQL 查询，但我提出请求

[https://graph.facebook.com/search?q=](https://graph.facebook.com/search?q=) " + city + "," + sstate + "&type=event&limit="

# python - 用于比特币开发的 Python 与 IronPython

> ID：13963763
> 
> 赞同：-1
> 
> 时间：2012-12-20T01:02:45.183
> 
> 标签：python, visual-studio-2012, ironpython, bitcoin

一直在考虑将比特币矿池服务器移植到 IronPython

除了 Ironpython 支持 Python ~v2.7 的限制

Ironpython/windows平台真的不适合这种大容量/大事务系统吗

我可能会遇到哪些其他限制，或者我应该硬着头皮建立一个 ubuntu 编程 RIG

如果后者对于来自 ac# Visual Studio 世界的人来说将是一个简单的 IDE

感谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T02:22:24.487

如果不知道您现有的代码是如何构建的，或者您希望新版本如何工作，很难具体回答，但我可以给出一些概括。

IronPython 限制/问题，按重要性降序排列： * 没有第三方 C 扩展模块。如果你依赖任何一个，你必须找到一个 .NET 等价物或自己重新实现相同的东西。如果没有，那不是问题。* 没有 3.x。如果你知道 3.x，Unicode 就容易多了，`yield from`岩石等，而 3.x 不断改进（甚至加速），而 2.x 则停滞不前。但是这值多少钱是个人喜好问题，不是任何人都可以给你客观答案的。* 没有第三方纯 Python 模块（在重要方面）依赖于引用计数语义。那里没有太多这些，但如果你需要一个，你需要它。* IronPython 和 CPython 之间存在一些差异，在发行说明中列出。可能这些都不会影响你，但你应该检查一下。* 如果有任何繁重的应用程序逻辑（而不是所有的工作是网络/文件/数据库），IronPython 在一些事情上比 CPython 快得多，而在其他一些事情上要慢得多，所以你可能需要分析和执行-在你走得太远之前进行测试。（至少考虑 PyPy，

其次，Windows 平台是否适合大容量系统？Windows 绝对能够每秒处理数千个连接（或请求，或字节，或与您的用例最相关的任何内容）。它可能永远不会在纯连接数/秒/美元上击败 linux，但您必须切实权衡运营成本与开发成本。然而，过于简单化了一点，Windows 在反应堆上很烂，在前摄器上摇摆不定，而 linux 在反应堆上摇摆不定，在前摄器上表现不错（还有其他类似的问题——例如，用进程/线程代替上述）。因此，即使 Windows在一般情况*下*的表现几乎与 linux 一样好，但它*在相同的代码上表现不佳*，甚至通常是相同的设计。您需要构建代码以利用 Windows 功能并考虑 Windows 的弱点。而且，如果您使用框架来为您完成繁重的工作，那么选择将会更少，而且最好的可能不会像您习惯的那样工作，这通常比更改平台要高得多的开发成本.

如果您确实在 linux 上使用 CPython，您应该使用什么 IDE？坚持使用 Visual Studio。您可以并且可能应该以跨平台的方式编写全部或大部分代码，同时在 IronPython 和 linux CPython 上运行。然后，您可以在 Visual Studio 中使用 Iron Python 进行编码、测试和调试，使用本机 Windows CPython 和/或 Cygwin CPython 进行偶尔的完整性检查，并且只使用 linux 进行性能测试、发布前的最终验收测试以及调试问题。在 Windows 上重现。您仍然偶尔需要在 linux 上使用简单的文本编辑器，但是 IDLE，或您喜欢的任何 vi-vs.-emacs，或您的 linux 发行版默认附带的任何 GUI 文本编辑器都可以。

如果您的应用程序逻辑与您的反应器设计或其他东西紧密耦合，这可能会很困难。如果可行，它可能值得做，但如果不是……好吧，您*仍然*可以使用 Visual Studio 作为编辑器和项目组织者，即使实际代码打算在 linux 机器上运行。那样你不会得到漂亮的调试器集成等，但你仍然可以获得很多里程。

# objective-c - 在顶点着色器中声明常量而不是文字。标准做法，还是不必要的严谨？

> ID：13963765
> 
> 赞同：5
> 
> 时间：2012-12-20T01:02:47.807
> 
> 标签：objective-c, ios, opengl-es-2.0

在**顶点着色器**中，当然允许有限数量的**统一存储**，我的理解是不同的系统在编译代码方面可能会以略微不同的方式实现 GLSL。我听说过使用常量而不是在顶点着色器代码中写出文字的建议。

例如，下面的代码可能会*导致*可用的统一存储减少。（我不太明白怎么做。）

*示例 1：使用文字*

```
vec4 myVector = vec4(1.0, 0.0, 0.0, 1.0); 
```

据我了解，每次使用`1.0`或`0.0`占用一定数量的统一存储空间都有可能。因此，建议将之前的代码转换为如下内容：

*示例 2：使用常量而不是文字*

```
const float zero = 0.0;
const float one = 1.0;

vec4 myVector = vec4(one, zero, zero, one); 
```

有谁明白发生了什么背后的论点？我的代码没有任何问题，我只是想正确理解这些东西，以便将来不会有问题。

**我的正式问题如下：**特别是对于使用**OpenGL ES 2.0的****iOS**平台，最好的做法是用文字（示例 1）或常量（示例 2）写出东西。我应该每次都花时间用常量写出东西，还是应该写出文字并且只在顶点着色器无法正确编译时使用常量？

 **谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-04T02:14:25.287

关于 Kimi 提到在规范中找不到任何内容，[OpenGL® ES 着色语言](http://www.khronos.org/files/opengles_shading_language.pdf)规范的附录 A-7 确实包括以下内容：

> 在计算使用的统一变量的数量时，在计算存储要求时会包括预处理后着色器源中存在的任何文字常量。相同常量的多个实例应该计算多次。

这可能是Kimi 引用的[OpenGL® ES 2.0 Programming Guide中建议的来源。](http://opengles-book.com/)

但是，该规范并没有强制执行此限制，并且可能任何实现都可以对其进行免费改进，但我找不到任何关于 iOS GL 驱动程序的方法。

我很好奇，有没有人真正跟进用文字重载示例着色器的想法，试图达到任何潜在的最大统一限制？

*（对不起...我打算将此答案作为对 Kimi 答案的评论发布，但还没有所需的 50 Rep 积分）。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:54:00.987

来自[OpenGL® ES 2.0 编程指南](http://opengles-book.com)

> 就文字值而言，OpenGL ES 2.0 着色语言规范声明不假定常量传播。这意味着相同文字值的多个实例将被计算多次。应该声明适当的 const 变量，而不是使用文字值。这避免了多次使用相同的文字值计数，如果顶点统一存储要求超出实现支持的范围，这可能会导致顶点着色器无法编译。

我在实际规范中找不到与此相关的任何内容。也没有特定于 iOS 的信息。

您还可以查看为解决此问题（以及许多其他问题）而编写的[GLSL 优化器工具。](https://github.com/aras-p/glsl-optimizer)**

# sql - sql - 随机选择

> ID：13963769
> 
> 赞同：0
> 
> 时间：2012-12-20T01:03:09.697
> 
> 标签：sql

我有两张桌子。第一个：问题表：[idquestion, question] 第二个：答案表[idanswer, answer,points, idquestion]。我想以随机顺序选择所有问题，并以随机顺序选择所有问题的答案：

```
 Somethink like this :

          Question 5 : ans1, ans2, ans3,ans4
          Question 2 : ans3, ans4,ans1,ans2
          Question 3 : ans2, ans3,ans1,ans4
          ...
          Question 1 : .. 
```

请帮忙

对不起我的英语不好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T01:14:28.230

这可能适用于mysql：

```
SELECT question, answer FROM questTable LEFT JOIN ansTable ON questTable.idquestion = ansTable.idquestion
ORDER BY RAND()
LIMIT 1 
```

无论如何，随机不是一个常用的函数，每个 SQL 数据库都有不同的语法：[http ://www.petefreitag.com/item/466.cfm](http://www.petefreitag.com/item/466.cfm)

# svn - 从本地存储库到远程存储库的 SVN 外部

> ID：13963770
> 
> 赞同：1
> 
> 时间：2012-12-20T01:03:10.187
> 
> 标签：svn

我有一个项目托管在`svn://foo.com`.

我想使用`svn:external`本地存储库中的文件。我希望其他签出工作副本的人也下载外部文件。我需要向`svn:externals`文件（在我的 wc 中）添加什么来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:45:21.037

因此，您希望签出您的项目的人也检索您的外部文件。在 Linux 发行版上使用命令行，我会这样做：

```
cd path/to/my/wc
svn propedit svn:externals . 
```

svn 将在此处启动您最喜欢的编辑器，并打开一个缓冲区，其中包含 svn:externals 属性的当前内容。您可以在此处通过每行输入一个值轻松地将多个值添加到属性中。

根据您的示例，我将附加到此缓冲区：

```
myExternalFileName svn://foo.com/myExternalFileName 
```

最后，您只需提交更改：

```
svn ci . -m "Edited svn:externals... My wonderful message" 
```

# algorithm - 如果数组大小很大 > 可用内存，则查找两个数组的共同元素

> ID：13963771
> 
> 赞同：4
> 
> 时间：2012-12-20T01:03:18.740
> 
> 标签：algorithm, collections

有几种方法可以使用排序 O(mlog(n)) 或散列 O(m+n) 与额外空间 O(m) 或 O(n) 或 O(m+n) 中的索引增量方法来解决此问题。

但是如果内存有限并且我的数组大小在数百万范围内，我会更感兴趣。

我们可以将数组 A 或 B 分成段并将其加载到内存中，但我想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T06:06:35.607

[元素区别](http://en.wikipedia.org/wiki/Element_distinctness_problem)问题（至少和你的问题一样难）是不`O(nlogn)`使用任何额外的空间。

但是，使用在平均情况下实际上可以改进的散列解决方案。

您建议的方法实际上是在数据库系统中实现[交集的方法之一：](http://en.wikipedia.org/wiki/Intersection_%28set_theory%29)

创建`k`存储桶（在磁盘上），遍历列表，并将每个元素添加`e`到`bucket[hash(e)]`.
完成后，假设有足够的空间使每个存储桶足够小以加载到内存¹，您只需要`bucket[i]`为每个列表加载 - 并在每个存储桶的内存交集（基于排序和迭代）中执行。
结果将为您提供交叉点的答案 - 这是常见的元素。

* * *

在数据库系统中完成它（交集）的另一种方式是使用[外部排序](http://en.wikipedia.org/wiki/External_sorting)（通常是合并排序的变体）和迭代，或创建针对磁盘优化的索引（例如[B+ 树](http://en.wikipedia.org/wiki/B+_tree)）。

* * *

（1）通常是这种情况，如果不是 - 对每个桶（具有不同的哈希函数）重复该过程，直到您有足够小的桶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T01:34:24.623

您可以使用外部合并排序在有限 RAM 的情况下进行排序。 [http://en.wikipedia.org/wiki/External_sorting](http://en.wikipedia.org/wiki/External_sorting)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T01:31:53.373

如果数组已排序，只需同时遍历数组并复制公共元素。在大数组的情况下，加载其中的一部分。

# ios - Xcode 中的特殊字符在编辑和查看模式下看起来不同

> ID：13963781
> 
> 赞同：2
> 
> 时间：2012-12-20T01:04:41.983
> 
> 标签：ios, xcode, special-characters

我想在 iOS 按钮上使用特殊字符。当我从位于编辑/特殊字符菜单中的特殊字符集合中插入它时，它看起来像这样：

![在此处输入图像描述](../Images/d4c2946cd908fa0d95c03f4560c2e5b8.png)

但是在我退出编辑模式或在设备上运行应用程序后，角色变成了这样：

![在此处输入图像描述](../Images/ab11bfc700a0183e7bf167e9295efa39.png)

看起来它使用不同的字体。有没有办法解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T01:50:48.130

打开字符查看器（您可能需要在设置/语言中启用此功能）

您可以检查此处的箭头，然后检查字体变化。

![Lucida Grande 粗体左箭头](../Images/ab736fe6c39ebbb353d920a7569735a8.png)

找到所需字体后，将其应用于标签。我怀疑你想要 Lucida Grande Bold。

# php - 从 HTML 表单中添加/减去行，将所有数据传递给 PHP 表单

> ID：13963786
> 
> 赞同：-1
> 
> 时间：2012-12-20T01:05:29.590
> 
> 标签：php, javascript, html, forms, dom

我正在尝试从 HTML 表单获取信息到 PHP 脚本。问题是我需要能够从表单中添加/减去行，并动态调整 PHP 表单接收到的数据。表单的每一行只有一个数据文本框。

例如，我需要在表单中输入三个用户。默认显示一行。我将点击“添加行”按钮两次，因此出现三个框，然后我将输入用户 1、用户 2 和用户 3。所有三个名称都需要传递给 PHP 表单，该表单会解析所有 3 个名称并做它的事。

我可能会想出 PHP 逻辑（尽管任何帮助将不胜感激），但我不知道如何将 HTML 表单动态发布到 PHP 脚本或如何从表单本身添加/减去行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T01:13:57.450

如果您让每一行用户使用数组作为名称而不是特定名称，您可以使用 foreach 遍历 PHP 页面中的数组。

```
<div>
    <input type="text" name="users[*row number*][name]" value="" />
</div> 
```

在 PHP 文件中，用户可以使用

```
foreach ($_POST['users'] as $row => $value) {
    // name would be $value['name']
} 
```

**编辑**：

可以使用与[http://jsfiddle.net/gM8MM/相同的格式创建表单](http://jsfiddle.net/gM8MM/)

然后您可以使用诸如[http://pastebin.com/n6sa6kpJ之类的东西访问该数据](http://pastebin.com/n6sa6kpJ)

# java - Java 对象流和 java.io.EOFException

> ID：13963789
> 
> 赞同：0
> 
> 时间：2012-12-20T01:06:26.160
> 
> 标签：java, serializable, objectoutputstream, objectinputstream

在我编写的一个相当简单的程序中，我正在使用 ObjectOutputStream 保存一个对象（一个包含一些其他对象的游戏）。我的第一个问题是，当我从我的任何类中删除“implements Serializable”时，不会抛出 NotSerializableException。为什么不？它们都在扩展 Serializable 类，但它们本身不应该也是 Serializable 吗？

我遇到的另一个可能相关的问题是，当我重新读取对象时，我得到一个 java.io.EOFException。

我不明白为什么会发生这两件事。我使用相同的文件名进行读取和写入。为什么它在完成之前就到了文件的末尾？

下面是编写代码：

```
public void actionPerformed(ActionEvent event)
            {
                try
                {
                    saver.writeObject(game);
                    saver.close();
                } catch (IOException e)
                {
                    e.printStackTrace();
                }

                dispose();
            } 
```

这是阅读代码：

```
File file = new File("savedgame.dat");
    if (file.exists())
    {
        try
        {
            loader = new ObjectInputStream(new FileInputStream(file));
            game = (GameBoard) loader.readObject();
            loader.close();
        }
        catch (EOFException ex)
        {
            ex.printStackTrace();
        }
    }
    else
    {
        game = new GameBoard();
    } 
```

异常被抛出就`game = (GameBoard) loader.readObject();`行了。

这是堆栈跟踪：

```
java.io.EOFException
    at java.io.ObjectInputStream$BlockDataInputStream.peekByte(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source) 
```

如果有帮助，我正在使用许多摆动对象，但根据我的研究，我很确定它们都是可序列化的。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T01:19:19.943

> 我的第一个问题是，当我从我的任何类中删除“implements Serializable”时，不会抛出 NotSerializableException。为什么不？它们都在扩展 Serializable 类，但它们本身不应该也是 Serializable 吗？

如果基类是`Serializable`，那么派生类也是`Serializable`。这意味着您不需要明确指定您的类实现`Serializable`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T01:08:56.167

> 它们都在扩展 Serializable 类，但它们本身不应该也是 Serializable 吗？

不，Serializable 是 Java 中的一个普通接口，所以你从超类继承它，不需要再次声明它。如果您扩展一个可序列化的类，您将自动被视为可序列化的。这可以说是 Java 中的一个设计问题。

# php - 在另一个 php 页面上触发函数以更新 MySQL 的 Javascript 方法

> ID：13963794
> 
> 赞同：1
> 
> 时间：2012-12-20T01:07:05.757
> 
> 标签：php, javascript

我有一个`onclick`在地图区域的直角坐标中使用的 php 页面。

当用户在此区域单击时，我需要另一个 php 页面上的函数来更新该 user_id 的 MySQL

**page_1.php** - 用户以 user_id 身份登录

```
<map id="map_id_01" name="map_name_01">
<area shape="poly" id="area_id_01" class="" title="area_title_01" 
onclick="page_2.php myfunction" 
coords="360,236,696,236,696,448,360,448,360,237"/></map> 
```

**page_2.php**

```
<?php myfunction($user_id); ?> 
```

什么 JavaScript 方法可以在**page_1.php**上触发 page_2.php 上的**函数**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T01:11:41.470

您不能直接从页面调用 PHP 函数。你看，`onclick`属性和其他类似的，比如`onblur`调用一个**JavaScript**函数！为了从另一个 PHP 页面调用函数，您需要使用 AJAX。

在这里，这个问题对你来说应该足够了（而且它似乎也是重复的）：[using jquery $.ajax to call a PHP function](https://stackoverflow.com/questions/2269307/using-jquery-ajax-to-call-a-php-function)

但是，请确保您为此使用 jQuery，但如果不是，您可以将其替换为普通的旧 AJAX，如下所示：

```
xmlhttp = new XMLHttpRequest();
xmlhttp.open("POST", 'page_2.php', true);
xmlhttp.send('test');
//xmlhttp.responseText will return the response as a text, and xmlhttp.responseXML will return it as xml 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T01:14:27.660

假设 jquery 和一个非常基本的例子

```
function addMap(userid)
{
    $.ajax({
       type: "POST",
       url: "http://domain.com/page_2.php",
       data: "userid="+userid,
       success: function(msg){
         alert( "Data Saved: " + msg ); //Anything you want
       }
     });
} 
```

page_2.php

```
if(!empty($_POST['userid'])){
myfunction($_POST['userid']);
} 
```

# ruby-on-rails - Rails Mailer Net::SMTPServerBusy

> ID：13963795
> 
> 赞同：7
> 
> 时间：2012-12-20T01:07:07.133
> 
> 标签：ruby-on-rails, gmail

使用我的 rails 站点，当我尝试通过 GMail 发送邮件时，它运行良好。但是当我尝试通过 MandrillApp 发送它时，它会给出以下错误（RController.create 是调用交付命令的位置）：

```
Net::SMTPServerBusy in RController#create 
454 4.7.1 <recipient@gmail.com>: Relay access denied 
```

这是我的 config/environments/development.rb 文件：

```
 # ActionMailer Config
 config.action_mailer.default_url_options = { :host => 'localhost:3000' }
 config.action_mailer.delivery_method = :smtp
config.action_mailer.default :charset => "utf-8"

config.action_mailer.perform_deliveries = true
config.action_mailer.raise_delivery_errors = true

config.action_mailer.delivery_method = :smtp
# config.action_mailer.smtp_settings = {
#   :address              => "smtp.gmail.com",
#   :port                 => 587,
#   :domain               => 'gmail.com',
#   :user_name            => 'sender@gmail.com',
#   :password             => 'password',
#   :authentication       => 'plain',
#   :enable_starttls_auto => true  }

config.action_mailer.smtp_settings = {
:address   => "smtp.mandrillapp.com",
:port      => 587,
:user_name => ENV["EMAIL"],
:password  => ENV["PASSWORD"]
} 
```

如上所述，代码不起作用 - 我没有收到电子邮件，也没有弹出错误。如果我切换到从 GMail 发送它，我几乎会立即收到一封电子邮件。我以前从未与 Mandrill 合作过，因此将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T23:51:56.907

我最终与 Mandrill 的服务代表交谈，结果发现我使用的是实际字符串而不是环境变量，所以我只需要从配置文件中删除“ENV”。

为了安全起见，我最终回去制作环境变量，但我只是想我会把它扔在那里，以防其他人遇到同样的问题并找到这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T02:46:42.090

您是否尝试过查看以下设置[Mandrill SMTP 集成](http://help.mandrill.com/entries/21738467-using-mandrill-s-smtp-integration-with-web-frameworks)。希望能帮助到你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-11T08:07:24.013

您还可以检查是否首先设置了 ENV 变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-10T22:12:10.827

如果您使用 Heroku，则需要在 CLI 中设置环境变量。

cd 到你的工作目录，然后...

```
heroku config:set MANDRILL_USERNAME='YOUR USERNAME'
heroku config:set MANDRILL_APIKEY="YOUR API KEY" 
```

您现在可以访问环境变量。我知道您正在使用 development.rb，但是当您使用 production.rb 时，这可能会让您头疼。我的 application.yml 文件让我头疼了几个小时。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T20:31:07.843

我怀疑您的问题是由 Phusion Passenger 引起的（因此在生产中）。乘客因不设置环境变量而臭名昭著。

这个[SO 问题](https://stackoverflow.com/questions/79474/setting-environment-variables-for-phusion-passenger-applications)提出了 2 个解决方案：硬编码值，或覆盖乘客使用的 ruby​​ 包装器。

我建议第三种选择：在部署期间扩展环境变量。这几乎是一种延迟的硬编码，但会将您的密码排除在代码之外。

您应该在部署后立即执行这一点 bash：

```
mv config/environments/production.rb config/environments/production.before_sed.rb
env | sed 's/[\%]/\\&/g;s/\([^=]*\)=\(.*\)/s%ENV\\[\\"\1\\"\\]%\2%/' > script/expand_env_vars.sed.script
cat config/environments/production.before_sed.rb | sed -f script/expand_env_vars.sed.script > config/environments/production.rb 
```

这是等效的 Capistrano 部署任务（很多逃跑！）：

```
desc "Replace environment variables with hardcoded values in config files"
task :replace_env_vars, roles: :app do
    run "mv #{release_path}/config/environments/production.rb #{release_path}/config/environments/production.before_sed.rb"
    run 'env | sed \'s/[\%]/\\&/g;s/\([^=]*\)=\(.*\)/s%ENV\\\[\\\"\1\\\"\\\]%\\\"\2\\\"%/\' > ' + "#{release_path}/script/expand_env_vars.sed.script"
    run "cat #{release_path}/config/environments/production.before_sed.rb | sed -f #{release_path}/script/expand_env_vars.sed.script > #{release_path}/config/environments/production.rb"
end

after "deploy:update_code", "deploy:replace_env_vars" 
```

仍然对于 Capistrano，您没有在用于部署的 SSH 会话中设置相同的环境变量（它不执行 .bashrc、/etc/profile ...）。您必须重新导出它们并在中`~/.ssh/environment`附加以下选项`/etc/ssh/sshd_config`：

```
PermitUserEnvironment yes 
```

这些最后的说明是在[那里](http://pretheory.wordpress.com/2008/02/12/capistrano-path-and-environment-variable-issues/)找到的。我个人在我的[新博客](http://adriendp.wordpress.com/2013/02/20/expanding-environment-variables-in-the-rails-config-on-a-capistrano-deploy-for-a-passenger-app/)上进一步记录了我的问题。

希望这可以帮助您解决一些安全问题:)

# java - 更改文本后我的屏幕冻结

> ID：13963796
> 
> 赞同：0
> 
> 时间：2012-12-20T01:07:15.827
> 
> 标签：java, android

我正在尝试使用 addChangeTextListener，但是当我点击一个键时我的屏幕冻结了。这是代码：

```
email = (EditText) findViewById(R.id.email);

    email.addTextChangedListener(new TextWatcher() 
    { 
        @Override
        public void afterTextChanged(Editable s) 
        { 
            if (email.getText().toString().matches("[a-zA-Z0-9._-]+@[a-z]+\\.+[a-z]+") 
                    && s.length() > 0)
                error.setText("valid email");
            else
               email.setText("invalid email");              
        }
        @Override
        public void beforeTextChanged(CharSequence arg0, int arg1,int arg2, int arg3) 
        {   
        }
        @Override
        public void onTextChanged(CharSequence arg0, int arg1,int arg2, int arg3) 
        {                   
        } 
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T01:10:58.437

```
email.setText("invalid email"); 
```

上面的行应该是：

```
error.setText("invalid email"); 
```

通过使用`setText()`，您将`afterTextChanged()`再次触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T01:11:02.070

在更改侦听器中设置文本会导致无限循环，因为它将再次调用更改侦听器。

来自 android 文档`TextWatcher.afterTextChanged()`：

> 调用此方法是为了通知您，在 s 中的某处，文本已更改。从这个回调中对 s 进行进一步的更改是合法的，但请注意不要让自己陷入无限循环，因为您所做的任何更改都会导致再次递归调用此方法。（您不会被告知更改发生的位置，因为其他 afterTextChanged() 方法可能已经进行了其他更改并使偏移量无效。但是如果您需要在这里知道，您可以在 onTextChanged 中使用 setSpan(Object, int, int, int) (CharSequence, int, int, int) 标记您的位置，然后从此处查找跨度结束的位置。

确保您不是要打电话`error.setText()`而不是`email.setText()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T01:10:55.293

在你的 else 声明中，你有一个错字。您想在错误时调用 setText，而不是电子邮件。

# ios - 如果连接关闭，则调用 NSURLConnection 的委托的什么方法？

> ID：13963798
> 
> 赞同：0
> 
> 时间：2012-12-20T01:07:29.960
> 
> 标签：ios, nsurlconnection

我创建了`NSURLConnection`一个从服务器下载文件，下载的文件是动态生成的，因此服务器会将数据大小设置为比实际大小稍大，当所有生成的数据发送时服务器关闭下载会话。

我的问题是在这种情况下会调用`NSURLConnection`委托方法吗？`connectionDidFinishLoading`如果不是，将调用哪些委托方法？

# printing - Twitter Bootstrap - 打印所有标签内容

> ID：13963801
> 
> 赞同：21
> 
> 时间：2012-12-20T01:08:03.073
> 
> 标签：printing, twitter-bootstrap, tabs

我设置了基本的引导选项卡，没有动态插入内容，并在我的基本样式表中打印特定的媒体查询。当用户从浏览器打印时，我希望打印所有选项卡内容，而不仅仅是活动选项卡。我知道必须有一个简单的解决方案，我就是想不通。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-12-20T03:05:17.157

在您的印刷媒体查询中试试这个：

```
.tab-content > .tab-pane {
    display: block !important;
    opacity: 1 !important;
    visibility: visible !important;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-12T20:03:26.183

@Scott 的回答对我不起作用，我认为这是因为我使用的是 bootstrap 4。

这就是在引导程序 4 中对我有用的方法。我在适当的地方添加了显示帮助程序类`d-print-block`、`d-none`和`d-print-none`。

我根本不想打印顶部导航栏，所以我添加了`d-print-none`

```
<ul class="nav nav-tabs nav-bordered d-print-none" role="tablist" id="mainTabs"> 
```

`tab-pane`如果在打印媒体上，我希望个人s 打印，所以我在选项卡窗格的内容中添加了一个标题并添加了`d-none`该类，因此它不会显示在浏览器中，但也添加`d-display-block`了它应该在打印媒体中。我还添加`d-print-media`了 tabpanel div 本身，以便它可以在打印媒体中显示全部内容。

```
<div role="tabpanel" class=" fade in show active tab-pane d-print-block" id="myTab">
    <div class="header-title d-none d-print-block">My Tab Name</div>
    Lorem ipsum dolor sit amet...
</div> 
```

# c - 与 MPI (mvapich2) 中的计算重叠通信以处理大型消息

> ID：13963808
> 
> 赞同：2
> 
> 时间：2012-12-20T01:08:30.297
> 
> 标签：c, performance, mpi

我有一个非常简单的代码，一个数据分解问题，其中在一个循环中，每个进程在每个循环之前和之后向队列发送两条大消息。我在 SMP 节点集群（AMD Magny 内核，每个节点 32 个内核，每个插槽 8 个内核）中运行此代码。有一段时间我正在优化这段代码。我使用 pgprof 和 tau 进行分析，在我看来瓶颈是通信。我试图将通信与我的代码中的计算重叠，但是看起来实际通信是在计算完成时开始的:(

我在就绪模式 (MPI_Rsend_init) 下使用持久通信，并且在 MPI_Start_all 和 MPI_Wait_all 之间完成了大部分计算。代码如下所示：

```
void main(int argc, char *argv[])
{
  some definitions;
  some initializations;

  MPI_Init(&argc, &argv);

  MPI_Rsend_init( channel to the rank before );
  MPI_Rsend_init( channel to the rank after );
  MPI_Recv_init( channel to the rank before );
  MPI_Recv_init( channel to the rank after );

  for (timestep=0; temstep<Time; timestep++)
  {
    prepare data for send;
    MPI_Start_all();

    do computations;

    MPI_Wait_all();

    do work on the received data;
  }
  MPI_Finalize();
} 
```

不幸的是，实际数据传输直到计算完成才开始，我不明白为什么。该网络使用 QDR InfiniBand 互连和 mvapich2。每条消息大小为 23MB（总共发送 46MB 消息）。我试图将消息传递更改为急切模式，因为系统中的内存足够大。我在作业脚本中使用以下标志： MV2_SMP_EAGERSIZE=46M
MV2_CPU_BINDING_LEVEL=socket
MV2_CPU_BINDING_POLICY=bunch

这给了我大约 8% 的改进，可能是因为在 SMP 节点内更好地放置了等级，但是仍然存在通信问题。我的问题是为什么我不能有效地将通信与计算重叠？是否有任何我应该使用的标志并且我错过了它？我知道有些不对劲，但我所做的一切都还不够。

按照 SMP 节点内的等级顺序，节点之间的实际消息大小也是 46MB (2x23MB)，并且等级处于循环中。你能帮我么？要查看其他用户使用的标志，我检查了 /etc/mvapich2.conf 但它是空的。

还有其他我应该使用的方法吗？你认为单方面的沟通会带来更好的表现吗？我觉得有一面旗帜或我不知道的东西。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T13:00:40.210

在 MPI 中有一种叫做*操作进展的东西。*该标准允许非阻塞操作仅在进行正确的测试/等待调用后才能完成：

> 非阻塞**发送开始**调用会启动发送操作，但不会完成它。发送开始调用可以在消息被复制出发送缓冲区之前返回。需要一个单独的**发送完成**调用来完成通信，即验证数据是否已从发送缓冲区中复制出来。*使用合适的硬件，数据从发送方存储器的传输可以在发送开始之后和发送完成之前在发送方完成的计算同时进行。*类似地，非阻塞**接收开始调用会**启动接收操作，但不会完成它。该调用可以在消息存储到接收缓冲区之前返回。单独**接收完成**需要调用来完成接收操作并验证数据是否已被接收到接收缓冲区。*使用合适的硬件，数据到接收器存储器的传输可以与在接收启动之后和完成之前完成的计算同时进行。*

（**粗体**字在标准文本中也加粗；强调由我添加）

尽管此文本来自关于非阻塞通信的部分（MPI-3.0 的第 3.7 节；该文本与 MPI-2.2 中的文本完全相同），但它也适用于持久通信请求。

我没有使用过 MVAPICH2，但我可以谈谈在 Open MPI 中是如何实现的。每当启动非阻塞操作或启动持久通信请求时，该操作都会添加到待处理操作的队列中，然后以两种可能的方式之一进行：

*   如果 Open MPI 是在没有异步进程线程的情况下编译的，则在每次调用发送/接收或某些等待/测试操作时都会进行未完成的操作；
*   如果 Open MPI 是使用异步进程线程编译的，即使没有进行进一步的通信调用，操作也会在后台进行。

默认行为是不启用异步进程线程，因为这样做会以某种方式增加操作的延迟。

目前无法从此处访问 MVAPICH 站点，但早些时候我在功能列表中看到了异步进度的提及。可能这就是您应该开始的地方 - 寻找启用它的方法。

另请注意，`MV2_SMP_EAGERSIZE`控制共享内存协议的 Eager 消息大小并不影响 InfiniBand 协议，即它只能改善驻留在同一集群节点上的进程之间的通信。

顺便说一句，不能保证接收操作会在相邻队列中的就绪发送操作之前启动，因此它们可能无法按预期运行，因为时间排序在那里非常重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-07T02:42:12.527

对于 MPICH，您可以`MPICH_ASYNC_PROGRESS=1`在运行 mpiexec/mpirun 时设置环境变量。这将产生一个执行“异步进度”的后台进程。

> MPICH_ASYNC_PROGRESS - 启动备用线程以提供异步进度。这改进了所有 MPI 操作的进度语义，包括点对点、集体、单边操作和 I/O。设置此变量会将线程安全级别提高到 MPI_THREAD_MULTIPLE。虽然这改进了进度语义，但它可能会导致常规 MPI 操作的少量性能开销。

来自[MPICH 环境变量](https://www.mpich.org/static/downloads/3.0.4/mpich-3.0.4-README.txt)

我已经用 MPICH-3.1.4 在我的集群上进行了测试，它成功了！我相信 MVAPICH 也会起作用。

# php - Session_set_save_handler 未设置

> ID：13963811
> 
> 赞同：4
> 
> 时间：2012-12-20T01:08:52.047
> 
> 标签：php, mysql, session, handler

我在设置 session_set_save_handler 时遇到问题。我将 php.ini 配置为 session.handler = user

这个简单的测试失败了：

```
//Define custom session handler
if(session_set_save_handler("sess_open", "sess_close", "sess_read", "sess_write",     "sess_destroy", "sess_gc")){
die('set fine');
}else{
die('Couldn\'t set session handler'); 
```

这是我的会话课。

```
//Constructor
function __construct(){

//Define custom session handler
if(session_set_save_handler("sess_open", "sess_close", "sess_read", "sess_write", "sess_destroy", "sess_gc")){
    die('set fine');
}else{
    die('Couldn\'t set session handler');
}

//Start session
session_start();
}

//Custom session functions
function sess_open($sess_path, $sess_name) {

return true;
}

function sess_close() {

return true;
}

function sess_read($sess_id) {

//Query for session record in
$results = $db->QuerySingleRow("SELECT data FROM sessions WHERE session_id = '$sess_id'");

//Check that record is returned
if ($results != false)
{
    //Session found, pull out data field value
    $sess_data = $results->data;

    //Grab current time
    $CurrentTime = time();

    //Update session record with current timestamp
    $db->Query("UPDATE sessions SET last_updated = $CurrentTime WHERE session_id = '$sess_id'");

    //Return 
    return $sess_data;
}
else
{
    //No session found

    //Grab current timestamp
    $CurrentTime = time();

    //Insert new session to DB
    $db->Query("INSERT INTO sessions (session_id, last_updated) VALUES ('$sess_id', $CurrentTime)");

    //Return blank per nature of session_set_save_handler read()
    return '';
}
}

function sess_write($sess_id, $data) {

//Grab current timestamp
$CurrentTime = time();

//Update session record to hold new data and update last_updated field
$db->Query("UPDATE sessions SET data = '$data', last_updated = $CurrentTime WHERE session_id = '$sess_id'");

return true;
}

function sess_destroy($sess_id) {

//Delete session from DB
$db->Query("DELETE FROM sessions WHERE session_id = '$sess_id'");

return true;
}

function sess_gc($sess_maxlifetime) {

//Get current timestamp
$CurrentTime = time();

//Delete from session based on garbage collection
$db->Query("DELETE FROM sessions WHERE last_updated < $CurrentTime");

return true;
}

} 
```

我唯一能想到的是 $db 是我的 MySQL DB 类的一个对象，但我不能包含该类然后创建它的实例。

我不想在 DB 类上重新发明轮子，所以我从 Jeff Williams 那里得到了它：[http ://www.phpclasses.org/package/3698-PHP-MySQL-database-access-wrapper.html](http://www.phpclasses.org/package/3698-PHP-MySQL-database-access-wrapper.html)

我试图将它包含在类主体之外然后页面不呈现，只是一个空白的白色页面没有错误。：

```
<?php
include 'mysql.class.php';
$db = new MySQL(true);

class session
{

//Constructor
function __construct(){
.... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T01:23:35.293

设置会话保存处理程序失败：

```
session_set_save_handler("sess_open", "sess_close", "sess_read", "sess_write", "sess_destroy", "sess_gc") 
```

因为您要注册的这些回调不存在：

```
var_dump(is_callable("sess_open")); # FALSE 
```

那是因为您的对象方法需要正确注册为回调。对象方法回调以具有两个元素的数组的形式编写，第一个是对象，第二个是方法名称的字符串。与您的类似的 PHP 网络示例：

```
$handler = new FileSessionHandler();
session_set_save_handler(
    array($handler, 'open'),
    array($handler, 'close'),
    array($handler, 'read'),
    array($handler, 'write'),
    array($handler, 'destroy'),
    array($handler, 'gc')
); 
```

正如你所看到的，每个方法都写成一个数组，`$handler`总是第一个元素。

在类中，您可以使用`$this`来引用同一个对象。但在您完全编写自己的代码之前，请查看[`session_set_save_handler()`PHP 手册页](http://php.net/function.session-set-save-handler)以获取信息、示例和用户贡献的注释。您可以通过不同的方式来组织您的案例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T01:31:15.860

If you use the function inside the constructor then you need to pass in `$this` like so:

```
session_set_save_handler(
    array($this, 'sess_open'),
    array($this, 'sess_close'),
    array($this, 'sess_read'), 
    array($this, 'sess_write'),
    array($this, 'sess_destroy'),
    array($this, 'sess_gc')
); 
```

And then instantiate the class

```
new SessionClass; 
```

Whenever you are in doubt you can always take a look at [the documentation](http://php.net/session_set_save_handler). Be sure to read the comments as well; they are usually very helpful.

# php - mysql获取分钟

> ID：13963813
> 
> 赞同：3
> 
> 时间：2012-12-20T01:08:59.733
> 
> 标签：php, html, mysql, wordpress, time

我很难从带有`MINUTE()`函数的字符串中获取分钟，它总是给我**0**

```
 $consulta=  sprintf("SELECT CURTIME()");
 echo $horaActual = $wpdb->get_var( $consulta );

 $consulta=sprintf("SELECT HOUR('$horaActual')");

 $horaActual= $wpdb->get_var( $consulta );

 $consulta=sprintf("SELECT MINUTE('$horaActual')");

 $minutosActuales= $wpdb->get_var( $consulta ); 
```

22:03:41

0

有什么问题？

**编辑：**

问题是在第二个查询中再次分配了 var $horaActual。所以第三个查询中的调用是针对 $horaActual=22 的，所以这就是为什么不起作用。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T01:17:22.087

您应该通过在一条语句中运行 SQL 来简化它：

```
SELECT MINUTE( CURTIME() ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T01:30:42.693

既然您没有引用任何存储的数据，那么当 PHP 的[`date()`](http://php.net/manual/en/function.date.php)函数会为您完成这一切时，为什么还要使用 MySQL 呢？

```
echo date('i'); 
```

# c# - 在 C# 中调试时，Visual Studio 如何评估属性？

> ID：13963820
> 
> 赞同：9
> 
> 时间：2012-12-20T01:10:40.767
> 
> 标签：c#, visual-studio, properties

过去，我在调试时一直被“访问器中的副作用”问题所困扰；这意味着我已经初始化了缓存而没有触发我的断点（因为它已经在 Visual Studio 中暂停了）。所以我一直想知道 Visual Studio 用来“乱序”执行代码的机制，以便在调试器中评估属性。在我看来，这会绕过 CLR？

所以问题是：从技术角度来看，这是如何完成的？解释它的文章会很有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T05:18:21.743

看起来 VS2012（可能还有早期版本）使用“主线程”或者可能是命中断点的线程来执行属性的 getter。

这是我的测试代码：

```
static class TestSideEffects
{
    public static void Test()
    {
        Console.WriteLine("Main Thread: {0}", Thread.CurrentThread.ManagedThreadId);
        var o = new TestSubject();
        Console.WriteLine("Property Value: {0}", o.IntGetValueNoSe());
    }
}

class TestSubject
{
    private int _prop=0;
    public int TheProperty
    {
        get
        {
            Console.WriteLine("Thread accessing the property: {0}", Thread.CurrentThread.ManagedThreadId);
            return ++_prop;
        }
    } 
    public int IntGetValueNoSe(){return _prop; }
} 
```

我设置了两个断点：在 Test 方法的第 3 行和 getter 本身，每次我将鼠标悬停在 o 实例上时，它都会执行 getter 而不会触发另一个断点。它使用相同的（在这种情况下为 main）线程。

这是测试程序的输出：

```
Main Thread: 8
Thread accessing the property: 8
Thread accessing the property: 8
Thread accessing the property: 8 
```

# java - Java：定义新矩形时出现数组语法错误

> ID：13963825
> 
> 赞同：0
> 
> 时间：2012-12-20T01:11:00.027
> 
> 标签：java, android, arrays

好的，所以我真的无法弄清楚这一点。我定义了一个数组 playerPos，如下所示：

```
int[] playerPos = new int[]{32, 32}; 
```

第一个数字是 x 值，第二个是 y 值。但是，当我尝试用它来定义一个矩形时，我在这里得到一个语法错误：

```
 for (int x = 0 ; x < 64; x++) {
        for (int y = 0 ; y < 64; y++) {
            switch(map[x][y]) {
            case 1:
                mapRects[x][y] = new Rect(x - playerPos[0])*64, (y - playerPos[1])*64, ((x - playerPos[0])*64)+64, ((y - playerPos[1])*64)+64);
                break;

            case 2:
                mapRects[x][y] = new Rect(x - playerPos[0])*64, ((y - playerPos[1])*64)-64, ((x - playerPos[0])*64)+64, ((y - playerPos[1])*64)+64);
                break;
            }
        }
    } 
```

无论我在哪里说 new Rect()，它都会在所有逗号上给我一个语法错误

```
Syntax error on token ",", [ expected 
```

在最后一个数字上，它说

```
Syntax error, insert "]" to complete Expression 
```

我不知道出了什么问题。帮助？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T01:13:16.213

这是一个括号问题：

```
new Rect(x - playerPos[0])*64 ... 
```

您可能需要像这样添加一个开头：

```
new Rect((x - playerPos[0])*64 ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T01:13:47.183

您的 Rect 缺少括号。

# angularjs - 如何让 Angular 有一个点击事件将 dom 的一部分带到函数中？

> ID：13963827
> 
> 赞同：2
> 
> 时间：2012-12-20T01:11:35.963
> 
> 标签：angularjs

我正在使用 Angular 创建一个小型实践待办事项列表应用程序。我创建了一个用于创建新任务的表单，并且它们正在更新。我为每个标题为“删除”的任务生成了一个按钮。我想让按钮从待办事项列表中专门删除该任务。这是html代码：

```
<div ng-controller="todoListController">
    <ul>
        <li ng-repeat="task in taskList">
            <p>
                {{task.name}}: {{task.description}}
                <button ng-click="killtodo()"> Remove </button>
            </p>
        </li>
        <hr>
        <h3> Display: </h3>
        <li>
            <p>
                {{task}}: {{taskDescription}}
            <p>
        </li>
    </ul>
    <hr>
    <form ng-submit="addto()">
        <input type="text" ng-model="task" placeholder="Enter a task name.">
        <input type="text" ng-model="taskDescription" placeholder="Enter the description.">
        <input class="btn-primary" type="submit" value="add">
    </form>
</div> 
```

Javascript代码：

```
function todoListController($scope) {
$scope.taskList = [
{"name": "Task List",
 "description": "Make a Task List."}
];

$scope.addto = function() {
    $scope.taskList.push({name:$scope.task, description:$scope.taskDescription});
    $scope.task = '';
    $scope.taskDescription = '';
};

$scope.killtodo = function(name) {
}; 
```

}

任何建议都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T01:16:49.907

您可以在使用 ng-repeat 时访问一个名为 $index 的变量，因此您可以执行以下操作：

```
<li ng-repeat="task in taskList">
    <p>
        {{task.name}}: {{task.description}}
        <button ng-click="killtodo($index)"> Remove </button>
    </p>
</li> 
```

然后在你的控制器中：

```
function todoListController($scope) {
    //other code
    $scope.killtodo = function($index){
        $scope.taskList.splice($index, 1);
    }
} 
```

顶部的文档中有更多描述（包括您可以使用的其他变量）：[http ://docs.angularjs.org/api/ng.directive:ngRepeat](http://docs.angularjs.org/api/ng.directive:ngRepeat)

# javascript - 如何不使用此正则表达式排除前导或尾随空格？

> ID：13963831
> 
> 赞同：-4
> 
> 时间：2012-12-20T01:12:18.547
> 
> 标签：javascript, regex, split

我在 javascript 中使用这个正则表达式：

```
search.split(/\s+/g); 
```

但是，我发现它给了我

```
input          output
`car`          ["car"]
`car `         ["car",""]
` car`         ["","car"]
` car `        ["","car",""]
` car is `     ["","car","is",""] 
```

如何更改正则表达式以使我不会领先或落后`""`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T01:17:42.437

最好的解决方案不是更改正则表达式，而是停止使用`.split`：

```
var parts = search.match(/\S+/g) || []; 
```

# javascript - jQuery Push and Hold 也带有 mouseleave

> ID：13963833
> 
> 赞同：0
> 
> 时间：2012-12-20T01:12:45.647
> 
> 标签：javascript, jquery, mouseevent

我试图找出制作一些具有以下功能的按钮的最佳方法：

*   推（在这种情况下，mousedown 用于即时射击）并按住
*   如果你按下，然后拖动鼠标，同时按住，它应该消除“保持”状态
*   mouseup 也是一样，只要光标仍在按钮内

我想我几乎在那里，但想知道 JS 向导是否有任何其他想法/优化。

[现场演示在这里](http://jsfiddle.net/stursby/r3tjs/)

HTML

```
<ul>
    <li>
        <p>button0</p>
        <a class="button">push</a>
    </li>
    <li>
        <p>button1</p>
        <a class="button">push</a>
    </li>
    <li>
        <p>button2</p>
        <a class="button">push</a>
    </li>
</ul>​ 
```

JS

```
(function(){

$('ul').delegate('.button', 'mousedown', function(e) {

    e.preventDefault();

    var el = $(this),
        index = el.index('.button');

    console.log('button' +index + ' -> mousedown');

    el.text('hold').addClass('hold');

    $(el).on('mouseleave', function() {

        $(this).text('push').removeClass('hold').unbind('mouseleave mouseup');

        console.log('button' +index + ' -> mouseleave');                

    });

    $(el).on('mouseup', function() {

        $(this).text('push').removeClass('hold').unbind('mouseup mouseleave');

        console.log('button' +index + ' -> mouseup');            

    }); 

});

})();​ 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T01:18:14.147

我不确定我是否正确理解了您的问题 - 但如果您需要的只是鼠标移动时**保持**状态离开，那么您也可以做同样的`mouseup`事情`mousemove`：

```
$(el).on('mousemove', function() {
    $(this).text('push').removeClass('hold').unbind('mouseup mouseleave mousemove');

    console.log('button' +index + ' -> mousemove');            

}); 
```

但请记住取消绑定所有`mousemove`事件。

PS：我编辑了你的小提琴：http: [//jsfiddle.net/MathiasPaumgarten/r3tjs/1/](http://jsfiddle.net/MathiasPaumgarten/r3tjs/1/)

# c++ - C++ 异常（使用提示）

> ID：13963834
> 
> 赞同：3
> 
> 时间：2012-12-20T01:12:51.643
> 
> 标签：c++, exception-handling

我对 C++ 异常有两个问题/反思/怀疑：

1.  IMO 当我们考虑在代码中使用异常时，我们必须做出明确的决定——总是使用异常或根本不使用它们。这阐明了应用程序将如何处理错误并且代码将更易于阅读。我也总是假设，有些东西可能会抛出异常，我几乎在所有地方都放置了 try/catch 块。我的“规则”合理吗？

2.  STL 类和算法抛出的所有异常是否都派生自`std::exception`? 我的异常类总是派生自标准类（`runtime_error`等`logic_error`）。我想知道是否可以安全地替换`catch (...)`为`catch(const std::exception& object)`，因为第二个总是提供有关异常原因的一些信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T01:19:33.113

对于第一部分，这是一个值得阅读的关于 c++ 中的异常、何时应该抛出它们、何时应该捕获它们、它们为什么有用以及许多其他有用的东西。 [http://www.parashift.com/c++-faq/exceptions.html](http://www.parashift.com/c++-faq/exceptions.html)

至于第二部分，据我所知，如果您从 stl 捕获异常，您应该可以安全使用 (const std::exception& object)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T01:34:50.267

这些 try/catch 块的目的是什么？如果你不能处理异常，当然你不应该抓住它。听起来你无缘无故地抓住它们。

此外，请查看此视频：[C++ 及超越 2012：Andrei Alexandrescu - C++ 中的系统错误处理](http://channel9.msdn.com/Shows/Going+Deep/C-and-Beyond-2012-Andrei-Alexandrescu-Systematic-Error-Handling-in-C)。

是的，所有异常类都应该继承自 std::exception。为了完整起见，您通常应该在 main 的底部有一个 catch (...) 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T01:26:08.287

1.  我知道你的意思。Steve mcConnell 在 Code Complete 中写道，异常应该只在*Exceptional*情况下使用，即，如果你真的期望某些东西在那里，比如硬盘空间或数据库连接。他接着说异常*不*应该用于控制流。这就是错误代码发挥作用的地方。我会在适当的情况下使用两者。

2.  应该有一种方法可以确定 std 模板库中异常的基本类型。以我的经验，一切都源于 std::exception

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T01:27:29.540

对于您的第二个问题，是的，标准库中抛出的所有异常都来自`std::exception`.

你的第一个问题很难给出具体的答案。在任何重要的程序中，都很难完全避免异常。[我认为 Herb Sutter 在这里](http://www.gotw.ca/gotw/020.htm)做得很好。

# android - 全景查看器效果可以用 TranslateAnimation 完成吗？

> ID：13963836
> 
> 赞同：1
> 
> 时间：2012-12-20T01:13:30.530
> 
> 标签：android, animation, panoramas, translate-animation

我用 TouchImageView 制作了一个图像查看器，我根据自己的需要进行了分叉。特别是，您可以将图像垂直适合屏幕，然后将图像从左向右拖动。这对于全景图来说非常有用，例如，您可以拖动并查看所有内容。

现在我想在不触摸屏幕的情况下对全景图进行此操作，即自动持续拖动。

我试图通过 TranslateAnimation 来实现这一点，但惨遭失败：TranslateAnimation “移动视图”，并且图像正在慢慢地被越来越多的黑色条带代替，而不是更多的图像。

当然我可以将图像移动 1 个像素，等待 1/100 秒，再次移动等等，但应该有更简单的方法（并且消耗更少的资源）。

TranslateAnimation 中是否有允许执行此操作的选项？你会怎么做？

谢谢！！

# dart - 如何在 Dart 中为 Completer.CompleteException(exception, stackTrace) 获取当前堆栈跟踪；

> ID：13963837
> 
> 赞同：59
> 
> 时间：2012-12-20T01:13:31.597
> 
> 标签：dart, dart-async

如果某些代码返回一个未来并确定未来应该返回“错误”或“异常”，如何将堆栈跟踪传递给`Completer.completeException(exception, stackTrace);`

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2018-06-05T13:52:25.847

如果您不在 catch 块中，则可以使用[`StackTrace.current`](https://api.dartlang.org/stable/2.3.0/dart-core/StackTrace/current.html)

* * *

## 回答 #2

> 赞同：117
> 
> 时间：2012-12-20T02:29:07.163

如果我理解正确：当您在 dart 中捕获异常时，您还可以捕获堆栈跟踪：

```
try {
  // something
} catch(e, stacktrace) {
  myCompleter.completeException(e, stacktrace);
} 
```

# django - Django 使用匿名用户保存模型

> ID：13963846
> 
> 赞同：14
> 
> 时间：2012-12-20T01:14:29.493
> 
> 标签：django, django-models, django-views, django-authentication

我有一个 Django 模型：

```
class Project(models.Model):
    user = models.ForeignKey(User)
    zipcode = models.CharField(max_length=5)
    module = models.ForeignKey(Module) 
```

在我的views.py中：

```
def my_view(request):  
    ...
    project = Project.objects.create(
                  user=request.user,
                  product=product_instance,
                  ...
              )
    project.save() 
```

我希望能够将用户保存为经过身份验证的用户或`AnonymousUser`（我可以稍后更新）。但是，如果我没有登录，我会收到此错误：

```
ValueError: Cannot assign "<django.utils.functional.SimpleLazyObject object at 0x1b498d0>": "Project.user" must be a "User" instance. 
```

我猜Django不会保存，`AnonymousUser`因为它不是`User`模型中定义的用户。我需要将匿名用户添加到`User`模型中，还是我遗漏了什么？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-20T01:18:03.363

该`user`字段是一个`ForeignKey`. 这意味着它必须引用*一些用户*。

根据定义，`AnonymousUser`is *no user*：在 Django 中，没有`AnonymousUserA`and `AnonymousUserB`。他们都是一样的：`AnonymousUser`。

结论：您不能将`AnonymousUser`a放入`User` `ForeignKey`.

* * *

不过，您的问题的解决方案非常简单：当`User`是匿名时，只需将该字段留空即可。为此，您需要允许它：

```
user = models.ForeignKey(User, blank = True, null = True) 
```

# c# - 仅第一次搜索字符串需要很长时间？

> ID：13963852
> 
> 赞同：1
> 
> 时间：2012-12-20T01:14:57.560
> 
> 标签：c#, string, performance

那里不乏搜索字符串性能问题，但我仍然无法确定最佳方法是什么。

长话短说，我已经承诺从 4NT 转移到 PowerShell。在离开 4NT 时，我会想念它附带的名为 FFIND 的控制台超级快速字符串搜索实用程序。我决定使用我的基本 C# 编程技能来尝试创建我自己的实用程序，以便在 PowerShell 中使用，它同样快。

到目前为止，在跨越几个 1000 个文件的 100 个目录中进行字符串搜索的搜索结果，其中一些文件非常大，是 FFIND 2.4 秒和我的实用程序 4.4 秒.....在我至少运行了一次之后？？？ ?

我第一次运行它们 FFIND 几乎在同一时间运行，但我的运行时间超过一分钟？这是什么？加载库？文件索引？我在我的代码中做错了吗？我不介意再等一会儿，但差异非常大，如果有更好的语言或方法，我宁愿现在就开始走这条路，以免投入过多。

我是否需要选择另一种语言来编写快速点亮的字符串搜索

我需要使用此实用程序在 1000 个文件中搜索 Web 代码、C# 代码和另一种使用文本文件的支持语言中的字符串。我还需要能够使用此实用程序在非常大的日志文件（MB 大小）中查找字符串。

```
class Program
{
    public static int linecounter;
    public static int filecounter;
    static void Main(string[] args)
    {
        //
        //INIT
        //
        filecounter = 0;
        linecounter = 0;
        string word;
        // Read properties from application settings.
        string filelocation = Properties.Settings.Default.FavOne;
        // Set Args from console.
        word = args[0];
        //
        //Recursive search for sub folders and files
        //
        string startDIR;
        string filename;
        startDIR = Environment.CurrentDirectory;
        //startDIR = "c:\\SearchStringTestDIR\\";
        filename = args[1];
        DirSearch(startDIR, word, filename);

        Console.WriteLine(filecounter + " " + "Files found");
        Console.WriteLine(linecounter + " " + "Lines found");
        Console.ReadKey();
    }

    static void DirSearch(string dir, string word, string filename)
    {
        string fileline;
        string ColorOne = Properties.Settings.Default.ColorOne;
        string ColorTwo = Properties.Settings.Default.ColorTwo;
        ConsoleColor valuecolorone = (ConsoleColor)Enum.Parse(typeof(ConsoleColor), ColorOne);
        ConsoleColor valuecolortwo = (ConsoleColor)Enum.Parse(typeof(ConsoleColor), ColorTwo);

        try
        {
            foreach (string f in Directory.GetFiles(dir, filename))
            {
                StreamReader file = new StreamReader(f);
                bool t = true;
                int counter = 1;
                while ((fileline = file.ReadLine()) != null)
                {
                    if (fileline.Contains(word))
                    {
                        if (t)
                        {
                        t = false;
                        filecounter++;
                        Console.ForegroundColor = valuecolorone;
                        Console.WriteLine(" ");
                        Console.WriteLine(f);
                        Console.ForegroundColor = valuecolortwo;
                        }
                        linecounter++;
                        Console.WriteLine(counter.ToString() + ". " + fileline);
                    }
                    counter++;
                }
                file.Close();
                file = null;
            }
            foreach (string d in Directory.GetDirectories(dir))
            {
                //Console.WriteLine(d);
                DirSearch(d,word,filename);
            }

        }
        catch (System.Exception ex)
        {
            Console.WriteLine(ex.Message);
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T01:31:37.093

如果你想加快你的代码运行性能分析，看看什么是最耗时的。我几乎可以保证这里最长的一步是

```
fileline.Contains(word) 
```

在文件的每一行，每个文件上都会调用此函数。天真地在字符串中搜索单词可以进行 len(string) * len(word) 比较。

您可以编写自己的 Contains 方法，该方法使用更快的字符串比较算法。谷歌“快速字符串精确匹配”。您可以尝试使用正则表达式，看看是否可以提高性能。但我认为您可以尝试的最简单的优化是：

不要阅读每一行。制作一个包含文件所有内容的大字符串。

```
StreamReader streamReader = new StreamReader(filePath, Encoding.UTF8);
string text = streamReader.ReadToEnd(); 
```

运行包含在此。

如果您需要文件中的所有匹配项，则需要使用[Regex.Matches(string,string) 之](http://msdn.microsoft.com/en-us/library/b9712a7w.aspx)类的内容。

在您使用正则表达式获取单个文件的所有匹配项后，您可以迭代此匹配集合（如果有任何匹配项）。对于每个匹配项，您可以通过编写一个函数来恢复原始文件的行，该函数从匹配对象索引属性向前和向后读取到您找到“\n”字符的位置。然后在这两个换行符之间输出该字符串，以获取您的行。

这会快得多，我保证。

如果您想走得更远，我注意到的一些事情是：

从循环外部删除 try catch 语句。仅在您需要的地方使用它。我根本不会使用它。

还要确保您的系统正在运行，ngen。大多数设置通常都有这个，但有时 ngen 没有运行。您可以在流程资源管理器中查看流程。Ngen 生成 C# 托管字节码的本机映像，因此不必每次都解释代码，而是可以本机运行。这大大加快了 C# 的速度。

**编辑**

其他点：为什么首次运行时间和后续运行时间之间存在差异？看起来像缓存。操作系统可以缓存对目录、文件、运行和加载程序的请求。通常人们在第一次运行后会看到加速。Ngen 也可能在这里发挥作用，在第一次运行编译后生成本机映像，然后将其存储在本机映像缓存中。

总的来说，我发现 C# 的性能变化太大，不符合我的喜好。如果建议的优化不令人满意并且您想要更一致的性能结果，请尝试另一种语言 - 一种不是“托管”的语言。C 可能最适合您的需求。

# html - 跨引导 div 跨度垂直对齐

> ID：13963854
> 
> 赞同：0
> 
> 时间：2012-12-20T01:15:01.863
> 
> 标签：html, css, twitter-bootstrap

我在我的应用程序上使用引导程序，并且很难使用引导程序垂直对齐某些项目。它由一个引导行和 3 个带有搜索栏、标题和导航链接的 span4 组成。

这是骨架：

```
<div class="row">
  <div class="span4">
   form code, as generated by rails form_for
  <div class="span4">
    Page title
  <div class="span4">
    pagination links, as generated by rails will_paginate 
```

这是导轨代码：

```
<div class="row">
  <div class="span4">
    <%= form_tag mybooks_path, class: "form-search", :method => 'get', :id => "mybooks_search" do %>
    <div class="input-append">
  <%= text_field_tag :search, params[:search], class: "search-query"  %>
  <%= submit_tag "Search", :name => nil, class: "btn" %>
</div>
<% end %>
  </div>
  <div class="span4">
    <h2>My book library</h2>
  </div>    
  <div class="span4">
    <%= will_paginate @mybooks, class: "pagination pagination-right" %>
  </div>
</div> 
```

这是 JSFiddle：

[http://jsfiddle.net/V7CVE/2/](http://jsfiddle.net/V7CVE/2/)

我正在使用标准的未自定义引导程序 2，并且我需要搜索框、页面标题和分页链接彼此垂直对齐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T02:04:12.653

我不熟悉 ruby​​ 语法，但从概念上讲，这应该没什么区别。它们未对齐的原因是 bootstrap 对不同的元素有自己的默认 css。您只需要通过覆盖这些引导样式来微调每个元素。应用以下样式：

```
.form-search {
    margin: 15px 0 0 0;
}

.pagination {
    margin: 15px 0;
} 
```

# javascript - 将度数符号放在 html 输入标签中

> ID：13963855
> 
> 赞同：-5
> 
> 时间：2012-12-20T01:15:07.553
> 
> 标签：javascript, html, ascii

如何使用 javascript 将度数符号放入文本框中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T01:16:39.550

您只需要使用 html 实体代码。

```
<input value='&#176;'></input> 
```

# javascript - 带有另一个 jquery .each 循环的动态 jquery 循环

> ID：13963868
> 
> 赞同：1
> 
> 时间：2012-12-20T01:17:40.800
> 
> 标签：javascript, jquery, loops, post, each

我正在尝试使用另一个 jquery .each 循环创建一个循环，以动态创建一个包含来自 .xml 文件的信息的表。下面代码的结果导致最后一个表条目获取所有 xml 信息，即 DoM31。我不知道为什么会这样。

```
function ttrpdom() {
  for (var i=0;i<31;i++) {
    var mypost = 'http://mysite/TotalDailyRes' + i + '.xml';
    var dm = '#DoM' + i;
    $.post(mypost, function(data) {
      $(data).find('opensearch\\:totalResults').each(function() {
        var res = $(this).text();
        $(dm).append('<td>' + res + '</td>');
      });
    } , 'text');
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T01:38:01.470

`for`循环不会被`$.post`函数调用阻塞。因此`i`，`dm`即使 POST 请求尚未完成，也要继续更改。

代码演练：

```
i === 0
Set `mypost` variable to `http://mysite/TotalDailyRes0.xml`
Set `dm` variable to `#DoM0`
Make POST request to `mypost`
Loop

Increment i
i === 1
Set `mypost` variable to `http://mysite/TotalDailyRes1.xml`
Set `dm` variable to `#DoM1`
Make POST request to `mypost`
Loop

....    

Increment i
i === 30
Set `mypost` variable to `http://mysite/TotalDailyRes30.xml`
Set `dm` variable to `#DoM30`
Make POST request to `mypost`

END LOOP

....

POST http://mysite/TotalDailyRes0.xml completes
Fire `function(data)` callback
dm === '#Dom30'

POST http://mysite/TotalDailyRes1.xml completes
Fire `function(data)` callback
dm === '#Dom30'

....

POST http://mysite/TotalDailyRes30.xml completes
Fire `function(data)` callback
dm === '#Dom30' 
```

此外，不能保证 POST 请求会按顺序完成。请求`http://mysite/TotalDailyRes28.xml`可以在之前`http://mysite/TotalDailyRes30.xml`完成。

解决方案是检测完整的 URL 并使用它来构建 HTML id。此外 - GET 请求更适用于这种情况，因为该请求不会更改服务器上的数据：

```
$.get(mypost, function(data) {
      var i = parseInt(this.url.replace('http://mysite/TotalDailyRes', ''), 10),
      dm = '#DoM' + i;
      $(data).find('opensearch\\:totalResults').each(function() {
        var res = $(this).text();
        $(dm).append('<td>' + res + '</td>');
      });
    } , 'text'); 
```

# iphone - 搜索站点上的文件夹

> ID：13963870
> 
> 赞同：0
> 
> 时间：2012-12-20T01:17:42.897
> 
> 标签：iphone, xcode, gridview, scroll

我对 iOS 编码相当陌生，所以如果我的问题似乎有点浪费时间，请原谅我。无论如何，我想升级我当前的应用程序。在此更新中，我想要一个徽标的网格布局。这些徽标实际上是网站上的文件夹。单击徽标时，它将带您进入另一个图像网格布局。这些图像也将托管在一个网站上。

如果我知道所有内容的网址，我就能弄清楚如何做到这一点。问题是每个星期天都会生成另一个文件夹，并且该文件夹中发布了大约 1000 张图像。所有文件名都是随机的，文件夹也是如此。

我希望有人能给我一些关于如何编写我的应用程序以在文件夹中查找任何 url 的指导，因为我不知道我该怎么做。

感谢您的任何建议。对此，我真的非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T01:39:08.333

这是一个很好的问题。您无法像在计算机上那样搜索网站上的文件夹。它行不通。由服务器为您提供文件夹内容的列表。

由于文件名是随机的，因此您必须依靠服务器为您提供文件名列表。您有权访问服务器吗？如果是这样，您可以编写一个简单的 PHP 文件来输出文件的可解析列表。

然后，您的应用程序可以下载此列表、对其进行排序并下载列表中包含的文件。

如果你不能把这个 PHP 文件放在服务器上，那么你就不走运了。文件名是随机的，因此您无法确定它们是什么。

PHP

```
<?php

    $files = scandir("folder");

    foreach($files as $file) {

        if ($file != "." && $file != "..") {

            echo $file . ",";

        }

    }

?> 
```

更改`"folder"`为您要扫描的文件夹的名称。如果 PHP 文件在您要扫描的文件夹中，请更改`"folder"`为`"."`.

以与下载图像相同的方式在您的应用程序中访问此 PHP 文件。PHP 文件的输出将是请求的响应。无论您使用什么 ( `AFNetworking`, `ASIHTTPRequest`, `NSURLRequest`) 都应该可以让您轻松获得响应作为`NSString`. 使用以下代码将字符串拆分为`NSArray`.

```
NSArray *files = [responseString componentsSeparatedByString:@","]; 
```

数组 ,`files`包含 PHP 文件搜索的目录中的所有文件名。

# ruby-on-rails-3 - 在控制器内部创建一个动作，在它生成之后

> ID：13963875
> 
> 赞同：1
> 
> 时间：2012-12-20T01:18:41.657
> 
> 标签：ruby-on-rails-3, model-view-controller, controller

我正在开发一个 Rails 应用程序，并通过

```
rails g controller Pics index upload 
```

但现在我想添加另一个动作

```
delete 
```

我应该通过在 Pics 控制器中手动添加删除方法来做到这一点吗？

还是我需要运行另一代。我担心的是，通过手动添加可能不会包含某些内容（不确定它会是什么，但在引擎盖下会有一些东西。）

这是向生成的控制器添加新操作的最佳方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T01:35:32.450

如果您手动添加，只需确保您的`routes.rb`.
假设您`delete`在 Pics 控制器中创建动作。

```
def delete
  # do stuff
end 
```

在您的 上`routes.rb`，您需要像这样将路由附加到您的资源，记住要分析它是作用于资源成员的资源还是集合。（有关此内容的更多信息，您可以在本指南[http://guides.rubyonrails.org/routing.html#adding-more-restful-actions](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)上阅读）。

```
resource :pics do
  collection do
    post :delete
  end
end 
```

或者

```
resource :pics do
  member do
    post :delete
  end
end 
```

请记住，`RESTFUL`默认情况下，所有操作都由 rails 路由器处理，再次尝试阅读我之前显示的指南以获取有关该主题的准确信息。希望能帮助到你。

# wordpress - WPMU 重定向用户

> ID：13963876
> 
> 赞同：0
> 
> 时间：2012-12-20T01:18:56.417
> 
> 标签：wordpress, redirect, wpmu

在 Wordpress Multisite 上，我试图在他的权限级别（permID）和他的网站（virkID）之后重定向用户。因此，如果是来自站点 A 的普通用户，他们将被重定向到具有权限级别 3 的站点 A。

我在自定义登录页面上有此代码：

```
<?php if(isset($_POST['submitlogin']))
        {
            $brugerUsername=$_POST['brugerUsername'];
            $brugerPassword=$_POST['brugerPassword'];

            $sql="SELECT * FROM virksomheder 
            INNER JOIN brugere ON virksomheder.virkID = brugere.virkID 
            WHERE brugerUsername = '$brugerUsername' and brugerPassword = '$brugerPassword'";
            $result=mysql_query($sql);
            if(mysql_num_rows($result) > 0) 
            {
               while($row = mysql_fetch_array($result)) 
               {
               $_SESSION['brugerUsername']=$_POST['brugerUsername'];
               $_SESSION['brugerPassword']=$_POST['brugerPassword'];
               $_SESSION['permID']=$row['permID'];
               $_SESSION['virkID']=$row['virkID'];
               $_SESSION['virkNavn']=$row['virkNavn'];
               $_SESSION['virkUrl']=$row['virkUrl'];
               $_SESSION['holdID']=$row['holdID'];
               $_SESSION['brugerID']=$row['brugerID'];
               $_SESSION['brugerCpr']=$row['brugerCpr'];
               $_SESSION['brugerNavn']=$row['brugerNavn'];
               $_SESSION['brugerAfd']=$row['brugerAfd'];
               $_SESSION['display_name']=$row['display_name'];
               $_SESSION['hoejde']=$row['hoejde'];
               $_SESSION['vaegtstart']=$row['vaegtstart'];
               $_SESSION['bmistart']=$row['bmistart'];
               $_SESSION['vaegtslut']=$row['vaegtslut'];
               $_SESSION['bmislut']=$row['bmislut'];
               $_SESSION['vaegtnu']=$row['vaegtnu'];
               $_SESSION['bminu']=$row['bminu'];    

            //REDIRECT USER WHERE virkID = '$virkID'
            /*<META http-equiv="refresh" content="0;URL=<?php $row['virkUrl']; ?>/status/"> */

                    if (($row['permID'] == '3') and ($row['virkID'] == '1')){
                ?> 
                <META http-equiv="refresh" content="0;URL=http://mahogni.com/afs/status/"> 
                <?php
                    }  
                    if ($row['permID'] == '2'){
                ?> 
                <META http-equiv="refresh" content="0;URL=http://mahogni.com/afs/coachsite/">  
                <?php 
                    } 
                    if ($row['permID'] == '1'){
                ?> 
                <META http-equiv="refresh" content="0;URL=http://mahogni.com/afs/adminsite/">  
                <?php 
                    }   
               }  
            }
            else
            {           
                echo "<tr>";
                echo "<td colspan='2' height='45'>";
                echo "Ups! not correct";
                echo "</td>";
                echo "</tr>";               
            }           
                }
            ?> 
```

谁能告诉我它是怎么做的？？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:48:08.973

**不是一个真正的答案：**

您的代码充满了不良行为。

1.  你不会逃避`$_POST`，SQL 注入已经成熟。
2.  您正在使用 WordPress，因此您应该[`global $wpdb`](http://codex.wordpress.org/wpdb)用于数据库连接。
3.  不推荐使用的`mysql_*`功能不要使用它们，见上文。
4.  php重定向是这样完成的：`header('Location: http://yoururl.com/whaterver');`
5.  [WordPress 以角色和功能](http://codex.wordpress.org/Roles_and_Capabilities#Capability_vs._Role_Table)的形式拥有自己的用户级别，可以为每个站点设置。有一些插件可以使这更易于管理。

# android - 如果加载时间过长，如何关闭 Android 应用程序？（慢/没有互联网）

> ID：13963878
> 
> 赞同：0
> 
> 时间：2012-12-20T01:19:11.910
> 
> 标签：android, httpclient

我正在制作一个从网站获取互联网数据的安卓应用程序。它使用 JSON 解析、loadurl、LoadImageFromWeb、HttpClient 和其他东西。我的问题是当互联网连接很慢时，加载需要很长时间（如果没有互联网，它将永远加载）。它最终会加载，但数据不存在，只有布局和按钮以及其他不需要互联网的东西。我想知道如何关闭应用程序并在加载时间过长时弹出一个对话框（或者在其他情况下，它已加载但没有数据）。我不知道如何以及在哪里放置它，因为我有许多不同的功能。提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T03:34:45.687

好的，首先，此代码显示如何检查您是否没有 Internet 连接。如果您在默认活动中执行此操作，那么如果它显示没有连接，则显示一条 Toast 消息并关闭。

[检查互联网连接](https://stackoverflow.com/questions/1560788/how-to-check-internet-access-on-android-inetaddress-never-timeouts)

其次，您可能希望为您的 http 客户端设置超时代码，如果它们返回，则设置一个 toast 消息并关闭。如果电话都结束了，您可能需要重新架构一下以更好地将它们联系在一起？没有看到你的代码真的无法分辨。

请参阅此代码以在 http 客户端上设置套接字超时：

[HTTP 超时](https://stackoverflow.com/questions/693997/how-to-set-httpresponse-timeout-for-android-in-java)

# javascript - jQuery 不能在任何版本的 ie 中工作？

> ID：13963879
> 
> 赞同：1
> 
> 时间：2012-12-20T01:19:14.217
> 
> 标签：javascript, internet-explorer, jquery

我是 Mac 上的初级程序员（所以我没有 ie）并构建了一个相对简单的 ajax jquery 应用程序，其中基于`$msg`存储在数据库中的内容，它显示表单元素（可以是按钮、选择/下拉菜单，或者只是文本和链接），在被点击后，返回数据库并更改`$msg`.

我的代码在 Chrome 和 Firefox 中运行良好，但是当我在所有版本的 IE 中测试时，表单元素（延迟 5 秒）恢复到加载页面时的位置。在感到沮丧之后，我查找了 SO 答案并阅读了有关文档类型有时会出现问题的信息，因此我将文档类型更改为 html5 文档类型，但没有任何改变。

这是我的代码：

```
$(document).ready(function() {  

$('.checkIn').click(function() {
    var $e = $(this);
    var data = $e.data("param").split('_')[1] ;
    // gets the id  of button  (1 for the first button)
    // You can map this to the corresponding button in database...
    $.ajax({
        type: "POST",
        url: "checkin.php",
        // Data used to set the values in Database
        data: { "checkIn" : $(this).val(), "buttonId" : data},
        success: function() {
            // Hide the current Button clicked
            $e.hide();
            var $container = $e.closest("div.jcontainer");
            // Get the immediate form for the button
            // find the select inside it and show...

            $container.find('.locationSelect').fadeIn();
        }
    });
});
$('.reset').click(function() {
    var $e = $(this);
    var data = $e.data("param").split('_')[1] ;
    // gets the id  of button  (1 for the first button)
    // You can map this to the corresponding button in database...
    $.ajax({
        type: "POST",
        url: "reset.php",
        // Data used to set the values in Database
        data: { "reset" : $(this).val(), "buttonId" : data},
        success: function() {
            // Hide the current Button clicked
            $e.fadeOut();

            var $container = $e.closest("div.jcontainer");
            // Get the immediate form for the button
            // find the select inside it and show...
            $container.find('.finished').fadeOut();
            $container.find('.checkIn').fadeIn();
        }
    });
});
$('.locationSelect').change(function(e) {
  if($(this).children(":selected").val() === "CheckOut") {
    $e = $(this);
    var data = $e.data("param").split('_')[1] ;
    $.ajax({
        type: "POST",
        url: "checkout.php",
        // Data used to set the values in Database
        data: { "checkOut" : $(this).val(), "buttonId" : data},
        success: function() {
            // Hide the current Button clicked
            $e.fadeOut();
            var $container = $e.closest("div.jcontainer");
            // Get the immediate form for the button
            // find the select inside it and show...
            $container.find('reset').fadeIn();
            $container.find('.finished').fadeIn();

        }
    });
  }
  else{
    $e = $(this);
    var data = $e.data("param").split('_')[1] ;
    // gets the id  of select (1 for the first select)
    // You can map this to the corresponding select in database...
    $.ajax({
        type: "POST",
        url: "changeloc.php",
        data: { "locationSelect" : $(this).val(), "selectid" : data},
        success: function() {
            // Do something here
        }
    });
  }
});
setInterval(function(){

    $('.jcontainer').each(function() {
        var $e = $(this);
        var dataid = $e.data("param").split('_')[1] ;
        $.ajax({
            url: 'heartbeat.php',
            method: 'POST',
            contentType: "application/json",
            cache: true,
            data: { "dataid": dataid },
            success: function(data){

                var msg = $.parseJSON(data);

                if (msg == ""){ //after reset or after new patient that is untouched is added, show checkin
                    $e.find('.checkIn').show();
                    $e.find('.locationSelect').hide();
                    $e.find('.finished').hide();
                    $e.find('.reset').hide();
                }
                if ((msg < 999) && (msg > 0)){ // after hitting "Check In", Checkin button is hidden, and locationSelect is shown
                    $e.find('.checkIn').hide();
                    $e.find('.locationSelect').show();
                    $e.find('.finished').hide();
                    $e.find('.reset').hide();
                    $e.find('.locationSelect').val(msg);
                }
                if (msg == 1000){ //after hitting "Checkout", Option to reset is shown and "Finished!"
                    $e.find('.checkIn').hide();
                    $e.find('.locationSelect').hide();
                    $e.find('.finished').show();
                    $e.find('.reset').show();
                }

            }
       });

    });
  },5000);
}); 
```

我试图尽可能多地评论我的代码，但基本上第一部分所做的只是将`$msg`每种类型的表单元素交互上传到我的 php 页面（单击按钮，单击选择选项，单击链接） . 然后第二部分是每 5 秒刷新一次，以确保当前在计算机 1 上显示的表单元素在计算机 2 上显示（延迟 5 秒）。

感谢您的所有帮助，如果您需要更多详细信息/信息，请询问！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:29:19.390

我不是 100% 确定你遇到了什么问题，所以如果这太离谱了，我很抱歉，但可能是 IE 正在缓存你的 Ajax 请求。您可以尝试在函数之前插入它：

```
$.ajaxSetup({
  cache: false
}); 
```

注意：如果可行，请不要留下这样的最终代码。禁用所有浏览器的 Ajax 缓存不是一个好主意，但有时需要对旧版本的 IE 执行此操作。我建议在您的 HTML 中使用 IE 条件注释，如下所示：

```
<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie10 lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie10 lt-ie9 lt-ie8 ie7"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie10 lt-ie9 ie8"> <![endif]-->
<!--[if IE 9]>    <html class="no-js lt-ie10 ie9"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class='no-js'>
  <!--<![endif]--> 
```

然后你可以检测到 IE，它`$.ajaxSetup`可能看起来像这样：

```
$.ajaxSetup({
  cache: !$('html').hasClass('lt-ie9'); //false if lower than IE9
}); 
```

# ghostscript - 将2个postscript文件合并成pdf

> ID：13963880
> 
> 赞同：0
> 
> 时间：2012-12-20T01:19:17.540
> 
> 标签：ghostscript, postscript

我想要做的是将两个后记文件合并成一个 pdf。我已经尝试使用ghostscript将它们结合起来但是问题是ghostscript产生一个pdf，其中一个ps文件在一页上，另一个在第二页上，这不是我希望完成的

```
 %!PS-Adobe-3.0
%%Pages: 1
%%DocumentData: Clean7Bit
%%LanguageLevel: 2
%%EndComments
%%Page: 1 1
save
6 dict begin currentpagedevice/PageSize get dup 0 get
 0 sub 0 sub/w exch
 def 1 get 0 sub 0 sub/h exch
 def/x 87 def/y 87 def 0 0/b y h mul x
 w mul gt def b{w y}{h x}ifelse div/c x h mul y w mul gt def c{w x}{h y}ifelse
 div gt{h add translate -90 rotate b{w y h x w mul y div sub 2 div 0}{h
 x 0 w y h mul x div sub 2 div}}{translate c{w x 0 h y w mul x div sub 2 div}{h
 y w x h mul y div sub 2 div 0}}ifelse ifelse translate div dup scale
end 9 dict begin
{/T currentfile/ASCII85Decode filter def/DeviceGray setcolorspace
/F T/LZWDecode filter def
<</ImageType 1/Width 87/Height 87/BitsPerComponent
1/ImageMatrix[1 0 0 -1 0 87]/Decode
[0 1]/DataSource F>> image
 F closefile T closefile}
%%BeginData:;
exec
J3Vsg3$\8+#CjR`&3*WA'+TR\@<!\`;@aOp`$+XV`%h8\!!!K[!9Aet#*;BOP%d==7jS.,hsVBYnDH
N[+5cZ=UtTfLSkWhgRG8\?,WGcN^j5#cP]3KsWRSLmE;_bp<GM2!Q!1FiRE6!+E91]DA$X`8iQFZYB
0mS8-o5Xu!f_0094V'pA:@g3R,3i_$'Yp\)8e-_&1fqhs%"+h!UL4I6R@tNA[6Bt^^UAX[:aRMSIU!
416=^MmJq2-+0!fVFnDer\kkA9UY#Q*n/l#Ih/>7,IEq;.)e7/q%Q&SL"j'""q7'ad9:Z00;\?qF/.
8a*mIt,hY3"qji0!BA*e-tRs6.F-k:_SnL*&QCrBB*lce!!;K8Fj4Hp6d?"Tg3Y4:8BLi#B-/VXSPS
#XP\B&qLYW4;Koo&C`>f_omCk&%aL+C?WTr*(:Q0YB"7Y0@*i?(aUW\?B(Z"l6;3X;8O\%8-n:/*6;
f^!W~>
%%EndData
end restore showpage
%%Trailer
%%EOF 
```

这是第二个文件

该文件很大，这里有一个链接[http://pastebin.com/R0Kgarem](http://pastebin.com/R0Kgarem)

不知道我将如何解决这个问题。我需要两个 ps 文件，没有任何空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:37:50.657

假设您的意思是一个朝向页面顶部，另一个朝向页面底部（2-up），您只需要阻止第一个文件执行`showpage`（通​​过重新定义或编辑以删除单词`showpage`），然后在执行第二个文件之前翻译（`0 -y translate`，其中 y 是第一个图像的高度）。这假设第一个图像已经位于页面顶部，否则您需要先将其翻译到正确的位置。

# android - 通过意图发送电子邮件

> ID：13963883
> 
> 赞同：0
> 
> 时间：2012-12-20T01:19:29.077
> 
> 标签：android, android-intent

我目前正在开发一个 android 项目，我正在添加一个偏好，以便能够向我发送电子邮件。我正在使用`ACTION_SENDTO`意图发送电子邮件，但它回来并说`No apps can perform this action`。

下面是我正在使用的代码

```
Intent intent = new Intent(Intent.ACTION_SENDTO);
                intent.setType("text/plain");
                intent.putExtra(Intent.EXTRA_EMAIL, "someone@example.com");
                intent.putExtra(Intent.EXTRA_SUBJECT, "Check out this android app");
                intent.putExtra(Intent.EXTRA_TEXT, "Check out this new app in the Google Play Store. Its from Boardies IT Solutions and is called Boardies Password Manager. You can find it at https://play.google.com/store/apps/details?id=com.BoardiesITSolutions.PasswordManager");
                startActivity(Intent.createChooser(intent, "Send Email")); 
```

感谢您的任何帮助，您可以提供

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T01:30:51.390

您需要添加以下内容

> intent.setData(Uri.parse("mailto:" + "email@bla.com")); // 如果不是特异性，则留空

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-10T07:20:01.653

我认为您应该替换`Intent.ACTION_SENDTO`为`Intent.ACTION_SEND`，
希望这对您有用。

这段代码怎么样：

```
final Intent emailLauncher = new Intent(Intent.ACTION_SEND);
emailLauncher.setType("message/rfc822");
emailLauncher.putExtra(Intent.EXTRA_EMAIL, "username@domain.com");
emailLauncher.putExtra(Intent.EXTRA_SUBJECT, "check this subject line");
emailLauncher.putExtra(Intent.EXTRA_TEXT, "hey check this message body!");
try{
       startActivity(emailLauncher);
}catch(ActivityNotFoundException e){

} 
```

# php - 在php中上传文件时创建文件类型条件

> ID：13963885
> 
> 赞同：0
> 
> 时间：2012-12-20T01:19:43.377
> 
> 标签：php

我正在使用这个条件，但它不起作用，因为它总是错误的，即没有文件类型符合条件，所以我认为语法上一定有错误，但我无法弄清楚。

```
if (!($_FILES["uploaded"]["type"] == "video/mp4")
&& (!$_FILES["uploaded"]["type"] == "video/flv")
&& (!$_FILES["uploaded"]["type"] == "video/webm" )
&& (!$_FILES["uploaded"]["type"] == "video/ogg" ))

{
   $message="not an accepted file format";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T01:21:49.397

```
if ( !($_FILES["uploaded"]["type"] == "video/mp4"
       || $_FILES["uploaded"]["type"] == "video/flv"
       || $_FILES["uploaded"]["type"] == "video/webm"
       || $_FILES["uploaded"]["type"] == "video/ogg") )
{
   $message="not an accepted file format";
} 
```

我假设有效意味着这些类型中的任何一种，因此您检查其中任何一种（使用`or`）然后否定它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T01:31:15.337

A common case for [`in_array`](http://php.net/in_array):

```
$type          = $_FILES["uploaded"]["type"];
$allowedTypes  = ["video/mp4", "video/flv", "video/webm", "video/ogg"];
$isRefusedType = !in_array($type, $allowedTypes);
if ($isRefusedType) {
    $message = "not an accepted file format";
} 
```

Or [`isset`](http://php.net/isset) against a [*flipped array*](http://php.net/array_flip):

```
$type          = $_FILES["uploaded"]["type"];
$allowedTypes  = array_flip(["video/mp4", "video/flv", "video/webm", "video/ogg"]);
$isRefusedType = !isset($allowedTypes[$type]);
if ($isRefusedType) {
    $message = "not an accepted file format";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T01:31:04.293

Longer on a vertical scale, but in my opinion more readable.

```
switch ($_FILES["uploaded"]["type"]) {
    case "video/webm":
    case "video/mp4":
    case "video/flv":
    case "video/ogg":
        $message = "Okie dokie";
        break;
    default:
        $message = "Invalid format";
} 
```

# python - 其他语言是如何克服 Python GIL 的限制的？

> ID：13963887
> 
> 赞同：3
> 
> 时间：2012-12-20T01:19:50.973
> 
> 标签：python, multithreading, concurrency

随着行业趋向于“Web 规模”应用程序架构（尽管我讨厌流行语），我知道 Python 因[GIL](http://wiki.python.org/moin/GlobalInterpreterLock)如何处理并发并成为瓶颈而受到了很多批评。我理解表面上的问题，但还不足以了解其他过程语言如何处理引擎盖下的线程。Java有类似的问题吗？C＃？红宝石？如果不是，为什么 Python 没有采用相同的策略？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T01:23:22.190

GIL 的存在是因为它（主要）是 CPython 实现引用计数所需要的——它是垃圾收集的方法。所以让我们明确一点，*Python*没有 GIL，参考实现有，而且它只是一个实现细节。

GIL 的存在是因为它使实现变得简单和快速，而且在大多数情况下，它根本不重要。线程主要被设计为允许在处理的同时访问慢速资源，这完全不受 GIL 的阻碍。

GIL 可能成为问题的唯一原因是人们想要进行大量并行计算。在这种情况下，可以在 C 中制作一个扩展模块，或者使用该`multiprocessing`模块来回避 GIL。

所有这一切意味着 GIL 在 99.9% 的情况下确实不是问题，而且当它出现时，它很容易解决。如果您发现它*确实*阻碍了您，那么您可能想要尝试 Jython，它在 JVM 之上实现并使用不需要 GIL 的不同垃圾收集方法。

与往常一样，过早的优化是一个坏主意——如果你开发了一些东西并发现自己受到 GIL 的伤害，那么有一些方法可以轻松解决它。也就是说，您极不可能在现实世界中发现这是一个问题。这是围绕 Python 最夸张的事情之一（可能仅次于整个缩进）。

# jquery - 表单的多个 if 语句

> ID：13963888
> 
> 赞同：-1
> 
> 时间：2012-12-20T01:19:51.473
> 
> 标签：jquery, validation

我目前的声明：

```
if (recaptcha == '' || name == '' || email == '' || emailCheck || emailVerify || priority == 'pap' || topic == 'pat' || message == 'message') {
    $('#incorrmsg').html("Please fill in the fields").slideDown("slow");
} else { 
    //else statemnt goes here
}​ 
```

这样做的问题是它只能使用一个 id 来执行此操作。

我想将其更改为以下语句：

```
if (name == '') {
    $('#incorrname').html("Please fill in your name").slideDown("slow");
}

if (email == '' || emailCheck || emailVerify) {
    $('#incorremail').html("Please fill in and verify your email").slideDown("slow");
}

if (priority == 'pap') {
    $('#incorrpri').html("Please pick a priority").slideDown("slow");
}

if (topic == 'pat') {
    $('#incorrtop').html("Please pick a topic").slideDown("slow");
}

if (message == 'message') {
    $('#incorrmess').html("Please type in your message").slideDown("slow");
} else {
    //else statemnt goes here
}​ 
```

如果字段中有错误，我想同时显示所有消息。
这意味着我不想使用这些`else if`语句。

那我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T01:31:56.097

你给自己带来了比你需要的更多的麻烦。使用数组，在验证过程中将所有错误推送到它上面，然后在输出过程中显示错误。

```
var err = new Array();
if(email == '' || emailCheck) {
  err[] = 'Yo, your email is messed up.';
}

if(err.length > 0) {
  for (var i=0;i<err.length;i++)
    { 
      $('#errors').append('<li>' + err[i] + '</li>');
    }
} 
```

此外，您可能会查看[jQuery Validation plugin](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)。当我开始学习时，它非常有帮助，既便于实现，也有助于理解如何最好地构建 JavaScript 函数。

# http - 如何查询谷歌自定义搜索引擎的多个关键字？

> ID：13963889
> 
> 赞同：2
> 
> 时间：2012-12-20T01:19:57.480
> 
> 标签：http, get, search-engine, google-custom-search

根据[https://developers.google.com/custom-search/v1/using_rest](https://developers.google.com/custom-search/v1/using_rest)

```
GET https://www.googleapis.com/customsearch/v1?
key=INSERT-YOUR-KEY&cx=013036536707430787589:_pqjad5hr1a&q=flowers&alt=json 
```

如果我用天蓝色替换花朵，我会得到搜索结果数量的响应。但我想要对“天蓝色”的回应

我尝试使用 q=sky%22blue 和 sky+blue，但出现错误。如何查询多个关键字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T02:56:22.240

空格需要用反斜杠转义：

`q=sky\ blue`

这是一个关于转义字符的类似问题，可能会有所帮助： [http ://productforums.google.com/forum/#!topic/commerce-search/sxo5NQ5iAI0](http://productforums.google.com/forum/#!topic/commerce-search/sxo5NQ5iAI0)

# spring - Portlet 的 Spring @ActionMapping 语法

> ID：13963890
> 
> 赞同：0
> 
> 时间：2012-12-20T01:20:40.397
> 
> 标签：spring, model-view-controller, portlet

我知道这在 url 包含参数“deleteItem = 6”的情况下有效

```
@ActionMapping(params="deleteItem")
public void deleteItem(@ModelAttribute("items") Items items, BindingResult bindingResult, @RequestParam int deleteItem) throws Exception {
    items.getItems().remove(deleteItem);
    ...
} 
```

但我可以做这样的事情吗（使用deleteItem 参数的*值：*

```
@ActionMapping(params="deleteItem={idx}")
public void deleteItem(@ModelAttribute("items") Items items, BindingResult bindingResult, @RequestParam int idx) throws Exception {
    items.getItems().remove(idx);
    ...
} 
```

没什么大不了的，就是代码更具可读性，因为它表明参数值是一个索引。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T03:49:53.000

不，您不能像这样使用动态参数作为绑定名称，`@ActionMapping(params="deleteItem={idx}")`因为 Spring Portlet MVC 需要将方法绑定到具有唯一名称的操作。

你的第一个片段是正确的。

# google-places-api - Google Places API 搜索关键字和城市

> ID：13963891
> 
> 赞同：0
> 
> 时间：2012-12-20T01:21:16.913
> 
> 标签：google-places-api

我想让用户搜索关键字+城市以返回城市中该关键字的结果。

例如，“starbucks Seattle”应返回西雅图的所有星巴克。

但是，关键字搜索似乎不包括城市 - 因此“星巴克西雅图”什么也不返回。

我认为自动完成 api 有这样的功能，但地方 api 没有。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T01:28:36.700

尝试使用[Places API Textsearch](https://developers.google.com/places/documentation/search#TextSearchRequests)端点：

[https://maps.googleapis.com/maps/api/place/textsearch/json?query=starbucks+seattle&sensor=false&key=YOUR_API_KEY](https://maps.googleapis.com/maps/api/place/textsearch/json?query=starbucks+seattle&sensor=false&key=YOUR_API_KEY)

# c++ - C++ - 如何在我的数组中放置一个静态数组？

> ID：13963895
> 
> 赞同：2
> 
> 时间：2012-12-20T01:21:50.303
> 
> 标签：c++, arrays

我为整个菜鸟问题道歉，但我找不到答案。我用谷歌搜索，在这里搜索，搜索 C++ 数组文档和一些 C++ 数组教程。
问题很简单。为什么

```
#include "stdafx.h"
int _tmain(int argc, _TCHAR* argv[])
{
      short pixelarray[3][3] = {{1,1,1},{0,0,0},{-1,-1,-1}};
      ... //do stuff.  Imagine a loop here, and BIG array - I'm just simplifying it for StackOverflow
      pixelarray = {{1,0,-1},{1,0,-1},{1,0,-1}};

    return 0;
} 
```

导致错误？

```
1>arraytest.cpp(11): error C2059: syntax error : '{' 
```

如何在我的数组中放置一个静态数组？我意识到我可以单独设置每个项目，但必须有更好的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T01:29:24.037

C++ 中的内置数组有其问题，不可赋值确实使它们相当不灵活。我会坚持使用`std::array`C++11 容器，它可以模拟更好的数组样式，它允许与您正在寻找的语法有点相似：

```
std::array<int, 3> arr{{1, 2, 3}};
std::array<int, 3>{{4, 5, 6}}.swap(arr);
//now arr is {4, 5, 6} 
```

这是一个[完整的示例](http://liveworkspace.org/code/1Gfgx6%244)。诀窍是在新构造的数组上使用初始化列表，然后将其与你的交换。我相信下一次 C++ 更新也将消除对双括号的需求，这使得它更接近于熟悉的语法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T01:23:31.113

初始化器列表可仅用于初始化:)
就像声明变量时一样：

```
short pixelarray[3][3] = {{1,1,1},{0,0,0},{-1,-1,-1}}; // this is ok 
```

你必须删除这个：

```
pixelarray = {{1,0,-1},{1,0,-1},{1,0,-1}}; 
```

并手动分配新值（即`pixelarray[x][y] =`或使用 a `memcpy(pixelarray, <some other array>, sizeof(pixelarray))`）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T01:32:43.967

如果您不想手动分配每个单独的元素，您可以这样做：

```
short pixelarray2[3][3] = {{1,0,-1},{1,0,-1},{1,0,-1}};
memcpy(pixelarray, pixelarray2, sizeof(pixelarray)); 
```

正如@Nick 指出的那样：初始化列表不用于赋值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-20T01:35:10.040

数组是不可分配的，所以简短的回答是你不能完全按照你的要求去做。对于大多数目的来说，最直接的方法可能是一个 2D 数组类，它充当 a 的包装器，其顺序与我在上一个[答案](https://stackoverflow.com/a/13672861/179910)`std::vector`中发布的顺序相同。

如果您坚持使用 C 风格的数组，一种可能性是使用指针：

```
int main() { 
    typedef short array[3];

    array pixelarray0[3] = {{1,1,1},{0,0,0},{-1,-1,-1}};
    array pixelarray1[3] = {{1,0,-1},{1,0,-1},{1,0,-1}};

    array *pixelarray = pixelarray0;

    // when needed:
    pixelarray = pixelarray1;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-20T01:40:02.383

从直接的 C 上下文中提出这个问题，您可以拥有不同的常量数组，并使用以下命令复制它们`memcpy`：

```
typedef short TArray[3][3];
const TArray a1 = {{1,1,1},{0,0,0},{-1,-1,-1}};
const TArray a2 = {{1,0,-1},{1,0,-1},{1,0,-1}};

// ...    
TArray a;
memcpy( a, a2, sizeof(TArray)); 
```

或者您可以利用 C99 结构复制，但我认为这是一种危险的 hack，因为该结构可能被填充为大于数组，或者具有不同的对齐方式。

```
typedef struct {
    TArray arr;
} TDummyArray;

// ...
TArray a;
*(TDummyArray*)a = *(TDummyArray*)a2; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-20T01:35:08.410

一旦声明了数组，就无法使用赋值运算符重新分配数组的全部内容。

因此，在此之后更改内容或数组：

```
short pixelarray[3][3] = {{1,1,1},{0,0,0},{-1,-1,-1}}; 
```

您需要遍历数组并手动更改每个值，或者使用 std::memcpy 之类的东西来复制新值。

但是你真的不应该首先使用数组，而是使用 std 集合库中的一些东西，比如 std::array 或 std::vector。仅当您有一个非常好的理由不能使用集合时才使用数组。

# ios - 点击 imageview 的动画，很酷的小爆炸

> ID：13963896
> 
> 赞同：2
> 
> 时间：2012-12-20T01:21:52.610
> 
> 标签：ios, xcode

> **可能重复：**
> [如何使用 CGAffineTransformMakeRotation？](https://stackoverflow.com/questions/5725099/how-to-use-cgaffinetransformmakerotation)

我有一个像按钮一样的图像视图，我正在寻找一种方法来向用户显示他点击了它，我想出了这个代码来旋转它：

```
 float angle =  60.0;
[UIView animateWithDuration:0.5f animations:^{
    customimageView.transform = CGAffineTransformMakeRotation(angle);
}]; 
```

但它没有做我正在寻找的行为。任何人都知道我怎样才能让图像在点击时放大（或放大/放大）到 1.5 的大小？什么样的动画在这里相关？随意分享你们认为在这种情况下很酷的行为。

谢谢。

作为旁注，我怎样才能让它旋转一圈？我尝试通过360但它没有这样做？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T01:42:46.937

您始终可以使用 CGAffineTransformMakeScale 进行的缩放转换来 CGAffineTransformConcat 旋转。

如果您对另一个按钮按下效果感兴趣，我也需要一些很酷的东西，并确定了一个“悸动”动画，如下所示：

```
BOOL keepThrobbing = NO;

-(void)buttonThrob:(CGFloat)inset {

    UIViewAnimationOptions opts = UIViewAnimationOptionBeginFromCurrentState|UIViewAnimationOptionAllowUserInteraction;

    [UIView animateWithDuration:0.2 delay:0.0 options:opts animations:^{
        self.button.frame = CGRectInset(self.button.frame, inset, inset);
    } completion:^(BOOL finished) {
        [UIView animateWithDuration:0.2 delay:0.0 options:opts animations:^{
            self.button.frame = CGRectInset(self.button.frame, -inset, -inset);
        } completion:^(BOOL finished) {
            if (finished && keepThrobbing) {
                [self buttonThrob:inset];
            }
        }];
    }];
} 
```

像这样称呼它：

```
keepThrobbing = YES;
[self buttonThrob:10.0];  // expand/shrink by 10px in x and y 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T01:40:50.023

使用 CGAffineTransformMakeScale 更改比例。

CustomimageView.transform = CGAffineTransformMakeScale(1.5,1.5);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T01:42:05.227

您可以将两个仿射变换与 CGAffineTransformConcat 结合起来：

```
[customimageView setTransform:CGAffineTransformConcat(CGAffineTransformMakeScale(1.5, 1.5), CGAffineTransformMakeRotation(angle))]; 
```

# django - 让用户使用 django-social-auth 登录

> ID：13963897
> 
> 赞同：2
> 
> 时间：2012-12-20T01:22:11.060
> 
> 标签：django, django-socialauth, django-users, django-login, django-unittest

我这样设置了一个单元测试：

```
class UserViewTests(TestCase):
    def setUp(self):
        self.user_passwords = '123456'
        self.user1 = User.objects.create(username='Bobby Johnson', password=self.user_passwords)

    ...

    def test_view_user(self):
        """
        Check that you can view a user's information correctly in their profile
        """
        response = self.client.get(reverse('login'))
        self.assertContains(response, "You're not logged in yet", status_code=200)
        self.client.login(username=self.user1.username, password=self.user_passwords)
        response = self.client.get(reverse('login'))
        self.assertContains(response, "You've logged in already", status_code=200) 
```

只有最后一个断言失败，并且在最后一个断言中将“你已经登录”替换为“你还没有登录”使测试通过，所以看起来我的登录失败了。我猜这是因为我`django-social-auth`用来允许 OpenId 登录。

我怎样才能以某种方式让单元测试认为我的用户已经登录，所以这`user.is_authenticated`是真的？我只想测试当用户登录时我的视图是否正确显示，而不是特别关心登录实际工作的单元测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T01:26:31.043

```
 self.user1 = User.objects.create(username='Bobby Johnson', password=self.user_passwords) 
```

应该：

```
self.user1 = User.objects.create_user(username='Bobby Johnson', password=self.user_passwords) 
```

否则，密码不会经过哈希处理且不可用。

* * *

您还需要`django.contrib.auth.backends.ModelBackend`存在于您的身份验证后端。

* * *

然后，

```
self.client.login(username=self.user1.username, password=self.user_passwords) 
```

就*行了*。

# lambda - Rhino 模拟存根表达式

> ID：13963898
> 
> 赞同：4
> 
> 时间：2012-12-20T01:22:39.533
> 
> 标签：lambda, expression, rhino-mocks, stub, stubbing

我想存根具有以下签名的方法：

```
Product[] GetAllActive(Expression<Func<Product, bool>> predicate, bool asNoTracking = true, params Expression<Func<Product, object>>[] navigationProperties); 
```

我正在使用 Rhino Mocks，任何想法

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T02:51:19.807

这个对我有用：

```
productService.Stub(
            p =>
            p.GetAllActive(
                Arg<Expression<Func<Product, bool>>>.Is.Anything, 
                Arg<bool>.Is.Anything, 
                Arg<Expression<Func<Product, object>>>.Is.Anything)).Return(new[]
                   {
                       new Product
                           {
                               Id = 1, 
                               Name = "Special one", 
                               ShortDescription = "This is product one"
                           }, 
                       new Product
                           {
                               Id = 2, 
                               Name = "Special two", 
                               ShortDescription = "This is product two"
                           }
                   };); 
```

# java - 如何使用 Spring Java 在 JSP 的文本框中保留用户名

> ID：13963899
> 
> 赞同：3
> 
> 时间：2012-12-20T01:22:39.677
> 
> 标签：java, spring, jsp, spring-mvc

我有一个带有 2 个文本框的 JSP 页面——一个用于用户名，另一个用于密码。我能够获取在两个字段中输入的值，但如果密码不正确，我想保留用户名。我需要使用 Spring 使用 Java 来完成。

我的 JSP 看起来像这样：

```
<tr>
  <td align="right">
    <b>User ID:</b>
  </td>
  <td align="left">
    <input type="text" id="uname" name="uname" value="<% if(uname!=null){out.println(uname);}%>" size="15" /><br/>
    <font color="red"><form:errors path="uname" cssClass="validationError"/></font>
  </td>
</tr>
<tr align="center">
  <td align="right">
    <b>Password:</b>
  </td>
  <td align="left">
    <input type=password id="pwd" name="pwd" value="" size="15" /><br/>
    <font color="red"><form:errors path="pwd" cssClass="validationError"/></font>
  </td>
</tr>
<tr align="center">
  <input type="submit" id="sub" name="sub" value="Submit" size="15" />
  <td align="left">
    <input type=reset id="clr" name="clr"value="Reset"onclick="doClear();"/>
  </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T03:21:32.003

你有没有尝试过：

```
<input type="text" id="uname" name="uname" value="${uname}" size="15" /> 
```

或者

```
<input type="text" id="uname" name="uname" value="${param.uname}" size="15" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T04:28:32.633

您是否尝试过使用 Spring 标签来创建表单，例如：

```
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>

<form:form commandName="book" name="fm" method="post" action="<%=url%>">
    <table cellpadding="4">

        <td>Book Title</td>
            <td><form:input path="bookTitle" size="30" maxlength="80" /></td><span id="infotext">*</span><br />
        </tr>
        <tr>
            <td colspan="2"><form:errors path="bookTitle" /></td>
        </tr>
        <tr>
            <td>Author</td>
            <td><form:input path="author" size="30" maxlength="80"  /></td>
        </tr>
        <tr>
            <td colspan="2"><form:errors path="author" /></td>
        </tr>
        <tr>
            <td><input type="submit" name="_finish" value="Save" /></td>
            <td><input type="button" value="Back" onclick="javascript:history.back()"/></td>
        </tr>
        <tr>
            <td><a href="<%=listURL.toString() %>">Show all Books</a></td>
        </tr>
    </table>
</form:form> 
```

> **我想这会对你有所帮助**

# node.js - nodejs v8内存gc分配失败

> ID：13963901
> 
> 赞同：14
> 
> 时间：2012-12-20T01:23:18.867
> 
> 标签：node.js, memory, garbage-collection, v8

我正在尝试使用无操作服务器来分析 nodejs v8 内存。我使用 node-memwatch 来获取堆差异。我在连接之前和连接断开之后收集堆信息。我使用了节点内存监视。我从客户端尝试了 200 个并发连接。

这是连接断开后的 gc 跟踪。

谁能帮我理解：

1.为什么内存在增加？连接断开后，服务器绝对什么都不做。它不应该假设总是随着垃圾被收集而下降吗？
2.那些分配失败是什么？我如何真正解释这里的痕迹？

```
 15802 ms: Mark-sweep 8.9 (45.0) -> 8.1 (45.0) MB, 58 ms [allocation failure] [GC in old space forced by flags].
 16144 ms: Mark-sweep 9.2 (45.0) -> 8.4 (45.0) MB, 53 ms [allocation failure] [GC in old space forced by flags].
 16495 ms: Mark-sweep 9.5 (45.0) -> 8.7 (46.0) MB, 60 ms [allocation failure] [GC in old space forced by flags].
 16837 ms: Mark-sweep 9.8 (46.0) -> 9.0 (46.0) MB, 56 ms [allocation failure] [GC in old space forced by flags].
 17197 ms: Mark-sweep 10.1 (46.0) -> 9.4 (46.0) MB, 62 ms [allocation failure] [GC in old space forced by flags].
 17905 ms: Mark-sweep 11.5 (46.0) -> 10.0 (47.0) MB, 74 ms [Runtime::PerformGC] [GC in old space forced by flags].                                                               
 18596 ms: Mark-sweep 12.2 (47.0) -> 10.7 (47.0) MB, 75 ms [Runtime::PerformGC] [GC in old space forced by flags].
 19315 ms: Mark-sweep 12.8 (47.0) -> 11.3 (48.0) MB, 83 ms [allocation failure] [GC in old space forced by flags].
 20035 ms: Mark-sweep 13.4 (48.0) -> 12.0 (49.0) MB, 90 ms [Runtime::PerformGC] [GC in old space forced by flags].
 21487 ms: Mark-sweep 16.0 (49.0) -> 13.2 (50.0) MB, 96 ms [Runtime::PerformGC] [GC in old space forced by flags].
 22950 ms: Mark-sweep 17.3 (50.0) -> 14.5 (52.0) MB, 116 ms [Runtime::PerformGC] [GC in old space forced by flags].
 24376 ms: Mark-sweep 18.8 (52.0) -> 15.9 (53.0) MB, 114 ms [allocation failure] [GC in old space forced by flags].
 25849 ms: Mark-sweep 19.9 (53.0) -> 17.2 (54.0) MB, 129 ms [Runtime::PerformGC] [GC in old space forced by flags].
 28773 ms: Mark-sweep 25.2 (54.0) -> 19.7 (57.0) MB, 149 ms [allocation failure] [GC in old space forced by flags].
 31725 ms: Mark-sweep 27.7 (57.0) -> 22.2 (59.0) MB, 172 ms [Runtime::PerformGC] [GC in old space forced by flags].
 34678 ms: Mark-sweep 30.2 (59.0) -> 24.7 (61.0) MB, 190 ms [Runtime::PerformGC] [GC in old space forced by flags].
 44045 ms: Mark-sweep 28.4 (61.0) -> 25.8 (63.0) MB, 180 ms [idle notification] [GC in old space forced by flags].
 44216 ms: Mark-sweep 25.8 (63.0) -> 25.8 (63.0) MB, 170 ms [idle notification] [GC in old space requested].
 57471 ms: Mark-sweep 26.9 (63.0) -> 25.8 (62.0) MB, 167 ms [Runtime::PerformGC] [GC in old space forced by flags].
 57651 ms: Mark-sweep 26.8 (62.0) -> 25.5 (62.0) MB, 160 ms [Runtime::PerformGC] [GC in old space forced by flags].
 57828 ms: Mark-sweep 26.5 (62.0) -> 25.5 (62.0) MB, 159 ms [Runtime::PerformGC] [GC in old space forced by flags]. 
```

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T08:09:12.800

“分配失败”听起来很戏剧化，但并没有涉及到真正的失败。这只是意味着我们分配了这么多内存，是时候进行一次 GC 来看看我们是否可以收集一些内存。

看起来您正在使用 --gc-global 标志（“标志强制 GC”）运行。这对生产来说是个坏主意，尽管在调试时缩小问题范围可能很好。

我不知道你的进程为什么会泄漏。您可能会发现堆分析器很有用。见[https://github.com/felixge/node-memory-leak-tutorial](https://github.com/felixge/node-memory-leak-tutorial)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T05:48:23.537

根据代码：

```
PrintF("%s %.1f (%.1f) -> %.1f (%.1f) MB, ",
       CollectorString(),
       static_cast<double>(start_object_size_) / MB,                                                                                    
       static_cast<double>(start_memory_size_) / MB, 
       SizeOfHeapObjects(),
       end_memory_size_mb); 
```

每行是一个 gc，当 gc 开始时，

```
start_object_size_ = heap_->SizeOfObjects(); 
```

在 gc 总结中：

```
PrintF("total_size_before=%" V8_PTR_PREFIX "d ", start_object_size_);                                                                   
PrintF("total_size_after=%" V8_PTR_PREFIX "d ", heap_->SizeOfObjects()); 
```

至于为什么 start_object_size_ 在我的应用程序空闲时增加，我猜可能在 gc 期间，一些对象被提升到旧空间并导致旧空间中的对象大小增加。

# google-app-engine - 调试预期搜索可能的误报

> ID：13963902
> 
> 赞同：2
> 
> 时间：2012-12-20T01:23:19.923
> 
> 标签：google-app-engine

我的应用程序成功（希望）设置了 Prospective Search，这真的很酷。

但是有一些文件我希望在收到它们时已经匹配，但他们没有。

所以，现在我正在尝试调试它，但我找不到预期搜索留下的任何日志跟踪，以查看它们为什么不匹配。事实上，我可以添加一些日志记录调用的唯一地方是在我的匹配结果处理程序上，但只有在存在肯定匹配时才会调用该处理程序。那只能让我调试误报，但我找不到如何调试误报（没有找到匹配项的文档，我相信他们应该）。

问题有点奇怪，因为如果我现在在那个文档上调用 match，会有匹配结果，但当时没有。我有理由相信订阅没有改变。

我知道前瞻性搜索非常有效，我完全相信这是我的错，无论是因为错误的文档还是错误的查询，但我只是想有一些方法来看看我在哪里以及如何搞砸了。

任何提示、线索、想法、建议等？

编辑：在这种情况下，我的问题与我如何设置任务队列有关。最终结果是预期搜索正在创建由于后端返回 503 并且经过多次重试而被丢弃的任务队列。但是，我仍然觉得没有足够的工具/跟踪来调试预期搜索查询/文档的问题。

# javascript - localStorage 警报 undefined 但如果 undefined 为 false

> ID：13963906
> 
> 赞同：3
> 
> 时间：2012-12-20T01:23:31.763
> 
> 标签：javascript, local-storage

不太明白这其中的道理。在以下代码中`localStorage`，项目的警告为**undefined**，但如果我使用`if(x==undefined)`语法它不起作用。有人可以解释是什么问题。谢谢你。

```
alert(localStorage["x"]);

if(localStorage["x"]=="undefined"){alert("y");} 
```

顶行警报**未定义**

底线不会提醒**我**。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T01:26:36.180

它不包含字符串`"undefined"`，它包含类型的值`undefined`：

```
if (localStorage["x"] == undefined) { alert("y"); } 
```

该值`undefined`可能在旧浏览器中更改，因此最好的做法是检查类型：

```
if (typeof localStorage["x"] == 'undefined') { alert("y"); } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T01:26:05.450

尝试：

```
if(typeof( localStorage["x"]) == 'undefined'){alert("y");} 
```

或者

```
if( localStorage["x"]  == undefined){alert("y");} 
```

或者

```
if( !localStorage["x"] ){alert("y");} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T02:10:10.880

检查某物的两种方法`undefined`是：

```
typeof foo === "undefined" 
```

和

```
foo === undefined 
```

在第一种情况下，它将是`true`if`foo`从未定义**或**值为`foo`is `undefined`。

在第二种情况下，它只会是`true`if`foo`被定义（否则它会中断）**并且**它的值是`undefined`.

根据字符串检查它的值`"undefined"`根本不一样！

**更新：**

当我说如果您尝试对未定义的对象文字的属性执行操作时，我想我的意思是它是否完全未定义，而我的意思更像是这样：

```
obj["x"].toLowerCase()
// or
obj["x"]["y"] 
```

您尝试访问/操作原本是`undefined`. 在这种情况下，简单地在`if`语句中进行比较应该没问题，因为对象文字报告值的方式......但与普通的 Javascript 变量有很大不同。

对于对象字面量，如果未定义键（例如“x”），则

```
obj["x"] 
```

返回 的值`undefined`，因此 the`typeof`和 basic`=== undefined`检查都将起作用并且是`true`。

未定义或具有值的整体`undefined`差异与正常变量不同。

如果你有：

```
var a;
// or
var a = undefined; 
```

那么我之前提供的检查`typeof`和基本检查都可以正常工作。但是，如果您甚至从未声明过，那么只有支票才能起作用。支票会坏掉。`=== undefined``true``a``typeof``true``=== undefined`

看看：http: [//jsfiddle.net/7npJx/](http://jsfiddle.net/7npJx/)

如果您在控制台中注意到，它会说出`b is not defined`并打破该`if`声明。

由于您基本上是使用 来查看对象文字`localStorage`，因此区分项目是否未定义或具有值的方法`undefined`是首先使用`in`。所以，你可以使用：

```
if (!("x" in localStorage)) { 
```

检查“x”是否根本不是定义的属性，并且：

```
else if (localStorage["x"] === undefined) { 
```

然后检查它是否已定义但值为`undefined`. 然后，使用：

```
else { 
```

将表示`localStorage["x"]`已定义且不具有 value `undefined`。

但是，在您的代码中，可以使用`typeof`or`in`检查（基于您想知道的内容），因为对象文字报告未定义属性的方式。使用基本`=== undefined`也可以，但正如**Guffa**指出的那样，实际值可能`undefined`会被覆盖，然后在此比较中不起作用。当涉及到普通的 Javascript 变量时，`typeof`检查`=== undefined`是不一样的。

# javascript - 使用 ajax 重新加载 div 不起作用

> ID：13963909
> 
> 赞同：1
> 
> 时间：2012-12-20T01:23:49.003
> 
> 标签：javascript, jquery, ajax, html, struts2-jquery

我正在关注关于 struts2-jquery 插件的本教程[Here](https://cwiki.apache.org/S2PLUGINS/jquery-plugin-easy-ajax-and-widget-integration.html)

但是ajax调用似乎不起作用，当我单击链接时没有任何反应。这是我的动作课。

```
package actions;

import com.opensymphony.xwork2.ActionSupport;

public class AjaxTest extends ActionSupport{
    public String execute(){
        return "success";
    }
} 
```

struts.xml

```
<package name="basicstruts" extends="json-default">
<action name="AjaxTest" class="actions.AjaxTest">
  <interceptor-ref name="jsonValidationWorkflowStack"/>
    <result name  = "success">hello.jsp</result>
</action>
</package> 
```

最后是 index.jsp

```
<%@ taglib prefix="s" uri="/struts-tags"%>
<%@ taglib prefix="sj" uri="/struts-jquery-tags"%>
<html>
  <head>
    <sj:head/>
  </head>
  <body>
    <div id="div1">Div 1</div>
    <s:url id="ajaxTest" value="/AjaxTest.action"/>

    <sj:a id="link1" href="%{ajaxTest}" target="div1">
      Update Content
    </sj:a>
  </body>
</html> 
```

# c# - 同时编写和验证 XML

> ID：13963920
> 
> 赞同：4
> 
> 时间：2012-12-20T01:25:49.083
> 
> 标签：c#, .net, xml, xsd

我有一个 Write 方法可以序列化使用 XmlAttributes 的对象。这是非常标准的：

```
private bool WriteXml(DirectoryInfo dir)
{
    var xml = new XmlSerializer(typeof (Composite));
    _filename = Path.Combine(dir.FullName, _composite.Symbol + ".xml");
    using (var xmlFile = File.Create(_filename))
    {
          xml.Serialize(xmlFile, _composite);
    }
    return true;
} 
```

除了尝试读取我刚刚写出的文件（使用模式验证器）之外，我可以在写入 XML 的同时执行 XSD 验证吗？

我可以在将内存流写入磁盘之前对其进行处理，但在.Net 中似乎通常有一种解决大多数问题的优雅方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:31:32.320

对于任何有兴趣的人来说，我这样做的方式是这样的：

```
public Composite Read(Stream stream)
{
    _errors = null;
    var settings = new XmlReaderSettings();
    using (var fileStream = File.OpenRead(XmlComponentsXsd))
    {
        using (var schemaReader = new XmlTextReader(fileStream))
        {
            settings.Schemas.Add(null, schemaReader);
            settings.ValidationType = ValidationType.Schema;
            settings.ValidationEventHandler += OnValidationEventHandler;
            using (var xmlReader = XmlReader.Create(stream, settings))
            {
                var serialiser = new XmlSerializer(typeof (Composite));
                return (Composite) serialiser.Deserialize(xmlReader);
            }
        }
    }
}

private ValidationEventArgs _errors = null;
private void OnValidationEventHandler(object sender, ValidationEventArgs validationEventArgs)
{
    _errors = validationEventArgs;
} 
```

然后不是将 XML 写入文件，而是使用内存流执行以下操作：

```
private bool WriteXml(DirectoryInfo dir)
{
    var xml = new XmlSerializer(typeof (Composite));
    var filename = Path.Combine(dir.FullName, _composite.Symbol + ".xml");
    // first write it to memory
    var memStream = new MemoryStream();
    xml.Serialize(memStream, _composite);
    memStream.Position = 0;
    Read(memStream);
    if (_errors != null)
    {
        throw new Exception(string.Format("Error writing to {0}. XSD validation failed : {1}", filename, _errors.Message));
    }
    memStream.Position = 0;
    using (var outFile = File.OpenWrite(filename))
    {
        memStream.CopyTo(outFile);
    }
    memStream.Dispose();
    return true;
} 
```

这样一来，您总是在将任何内容写入磁盘之前验证架构。

# javascript - HTML内联中的可视拖放图像

> ID：13963928
> 
> 赞同：3
> 
> 时间：2012-12-20T01:26:44.733
> 
> 标签：javascript, drag-and-drop

我正在寻找一个脚本，它允许用户在 HTML 页面中选择图像并将其拖动到新位置，同时允许其他页面的元素围绕它对齐。

拖动图像时应该完全可见（有许多脚本，例如**TinyMCE**和**CKeditor**），它们在拖动时不显示图像，只显示其新位置和拖放后图像周围的元素。

为了清楚起见，图像`z-index`与页面的其余部分（其内联）使用相同。

我希望我足够清楚，否则请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:41:50.260

像 jQuery Masonry 这样的东西？[http://masonry.desandro.com/](http://masonry.desandro.com/)

# c# - 如何更改进度条以使用图像

> ID：13963930
> 
> 赞同：-1
> 
> 时间：2012-12-20T01:27:40.997
> 
> 标签：c#, .net, winforms, progress-bar, element

和标题说的差不多。没有什么可以补充的了！

我正在使用 Windows 窗体应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T02:06:18.603

您几乎可以通过继承控件、几个属性来编写一个，然后使用控件的 Paint 事件绘制图像。

我写这个例子作为一个基本的控制。它归因于默认值等，但我用 VB 编写并翻译为 C#，因此不能保证第一次尝试一切正常。

您仍然需要实施各种错误检查等。该控件会拉伸您为其定义的任何图像。如果没有定义图像，它将恢复为默认颜色。

**更新：**添加了属性以允许显示图像。

用它做任何事情；根据需要修改（下面有兴趣的原始VB源）：

```
using System.ComponentModel;

[CLSCompliant(true)]
public class Progressbar : Control {

    [CLSCompliant(true)]
    [RefreshProperties(RefreshProperties.Repaint)]
    [Browsable(true)]
    [Category("Appearance")]
    [DefaultValue(100)]
    public int Maximum {
        get {
            return _maximum;
        }
        set {
            _maximum = value;
            this.Invalidate();
        }
    }

    [CLSCompliant(true)]
    [RefreshProperties(RefreshProperties.Repaint)]
    [Browsable(true)]
    [Category("Appearance")]
    [DefaultValue(0)]
    public int Value {
        get {
            return _value;
        }
        set {
            _value = value;
            this.Invalidate();
        }
    }

    [CLSCompliant(true)]
    [RefreshProperties(RefreshProperties.Repaint)]
    [Browsable(true)]
    [Category("Appearance")]
    [DefaultValue(null.ToString())]
    public Image ProgressbarImage {
        get {
            return _progressbarImage;
        }
        set {
            _progressbarImage = value;
            this.Invalidate();
        }
    }

    [CLSCompliant(true)]
    [RefreshProperties(RefreshProperties.Repaint)]
    [Browsable(true)]
    [Category("Appearance")]
    [DefaultValue(typeof(Color), "DarkGray")]
    public Color ProgressbarColor {
        get {
            return _progressbarColor;
        }
        set {
            _progressbarColor = value;
            this.Invalidate();
        }
    }

    [CLSCompliant(true)]
    [Browsable(true)]
    [Category("Behavior")]
    [DefaultValue(true)]
    public bool RevealImage {
        get {
            return _revealImage;
        }
        set {
            _revealImage = value;
            this.Invalidate();
        }
    }

    private bool _revealImage = true;
    private int _maximum = 100;
    private int _value = 0;
    private Image _progressbarImage = null;
    private Color _progressbarColor = Color.DarkGray;

    Progressbar() {
        InitializeComponent();
        SetStyle(ControlStyles.AllPaintingInWmPaint, true);
        SetStyle(ControlStyles.OptimizedDoubleBuffer, true);
    }

    protected override void OnPaint(System.Windows.Forms.PaintEventArgs e) {

        Graphics g = e.Graphics;
        Rectangle r = this.ClientRectangle;

        ControlPaint.DrawBorder(g, r, Color.Black, ButtonBorderStyle.Solid);

        r.Inflate(-1, -1);
        r.Width = (int.Parse((r.Width 
                        * (_value / _maximum))) - 1);
        if ((r.Width < 1)) {
            return;
        }

        if (_progressbarImage == null) {
            Using (Solidbrush b = new SolidBrush(_progressbarColor)) {
                g.FillRectangle(b, r);
            }
        }
        else {
            g.InterpolationMode = Drawing2D.InterpolationMode.HighQualityBicubic;
            if (_revealImage) {
                g.DrawImage(_progressbarImage, r, r, GraphicsUnit.Pixel);
            }
            else {
                g.DrawImage(_progressbarImage, r);
            }
        }
    }
} 
```

原VB源码：

```
Imports System.ComponentModel

<CLSCompliant(True)>
Public Class Progressbar

    <CLSCompliant(True),
    RefreshProperties(RefreshProperties.Repaint),
    Browsable(True),
    Category("Appearance"),
    DefaultValue(100)>
    Public Property Maximum As Integer
        Get
            Return _maximum
        End Get
        Set(value As Integer)
            _maximum = value
            Me.Invalidate()
        End Set
    End Property
    <CLSCompliant(True),
    RefreshProperties(RefreshProperties.Repaint),
    Browsable(True),
    Category("Appearance"),
    DefaultValue(0)>
    Public Property Value As Integer
        Get
            Return _value
        End Get
        Set(value As Integer)
            _value = value
            Me.Invalidate()
        End Set
    End Property
    <CLSCompliant(True),
    RefreshProperties(RefreshProperties.Repaint),
    Browsable(True),
    Category("Appearance"),
    DefaultValue(CStr(Nothing))>
    Public Property ProgressbarImage As Image
        Get
            Return _progressbarImage
        End Get
        Set(value As Image)
            _progressbarImage = value
            Me.Invalidate()
        End Set
    End Property
    <CLSCompliant(True),
    RefreshProperties(RefreshProperties.Repaint),
    Browsable(True),
    Category("Appearance"),
    DefaultValue(GetType(Color), "DarkGray")>
    Public Property ProgressbarColor As Color
        Get
            Return _progressbarColor
        End Get
        Set(value As Color)
            _progressbarColor = value
            Me.Invalidate()
        End Set
    End Property
    <CLSCompliant(True),
    Browsable(True),
    Category("Behavior"),
    DefaultValue(True)>
    Public Property RevealImage As Boolean
        Get
            Return _revealImage
        End Get
        Set(value As Boolean)
            _revealImage = value
            Me.Invalidate()
        End Set
    End Property

    Private _maximum As Integer = 100
    Private _value As Integer = 0
    Private _progressbarImage As Image = Nothing
    Private _progressbarColor As Color = Color.DarkGray
    Private _revealImage As Boolean = True

    Sub New()

        InitializeComponent()

        SetStyle(ControlStyles.AllPaintingInWmPaint, True)
        SetStyle(ControlStyles.OptimizedDoubleBuffer, True)

    End Sub
    Protected Overrides Sub OnPaint(e As System.Windows.Forms.PaintEventArgs)

        Dim g As Graphics = e.Graphics
        Dim r As Rectangle = Me.ClientRectangle

        ControlPaint.DrawBorder(g, r, Color.Black, ButtonBorderStyle.Solid)

        r.Inflate(-1, -1)
        r.Width = CInt(r.Width * _value / _maximum) - 1
        If r.Width < 1 Then Return

        If _progressbarImage Is Nothing Then
            Using b As New SolidBrush(_progressbarColor)
                g.FillRectangle(b, r)
            End Using
        Else
            g.InterpolationMode = Drawing2D.InterpolationMode.HighQualityBicubic
            If _revealImage Then
                g.DrawImage(_progressbarImage, r, r, GraphicsUnit.Pixel)
            Else
                g.DrawImage(_progressbarImage, r)
            End If
        End If

    End Sub

End Class 
```

# android - android popupwindow浮动在父视图之外

> ID：13963931
> 
> 赞同：3
> 
> 时间：2012-12-20T01:27:53.197
> 
> 标签：android

我不想关闭弹出窗口，而是将其隐藏在屏幕外的位置-width，-heigt。当我尝试更新屏幕外的弹出窗口时，它会在父视图的边界处停止。如何在屏幕外或半屏幕外更新它？

```
 View view = LayoutInflater.from(getBaseContext()).inflate(R.layout.mylayout,null);
    pop = new PopupWindow(this);
    pop.setTouchable(false);
    pop.setHeight(200);
    pop.setWidth(200);
    pop.setContentView(view);
    pop.showAtLocation(myparentview, 0, 50, 50);    
    pop.update(-200,-200,-1,-1); 
```

问题快照： ![不会通过 0,0](../Images/e814a4152b524e0df3daf1c41bfd2708.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-26T12:17:06.443

我认为您缺少的是使用`setClippingEnabled`with `false`。

[http://developer.android.com/reference/android/widget/PopupWindow.html#setClippingEnabled(boolean)](http://developer.android.com/reference/android/widget/PopupWindow.html#setClippingEnabled(boolean))

您应该在调用之前调用它`update()`，这应该可以让您在屏幕边界之外绘制窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T05:17:04.917

我不确定，但亲爱的试试这个。

根据您使用的设备应用弹出窗口的宽度和高度。像这里你申请**200*200**。只需应用此高度和宽度运行时。

# http - 在 HTTP 标头或响应正文中休息错误消息？

> ID：13963932
> 
> 赞同：92
> 
> 时间：2012-12-20T01:27:57.877
> 
> 标签：http, rest, http-error

我有一个向 iPhone 和 Android 客户端公开的 REST 服务。目前我遵循 HTTP 代码 200、400、401、403、404、409、500 等。

我的问题是放置错误原因/描述/原因的推荐位置在哪里？REST API 总是像这样在标题中包含自定义原因是否更有意义？

```
< HTTP/1.1 400 Bad Request - Missing Required Parameters.
< Date: Thu, 20 Dec 2012 01:09:06 GMT
< Server: Apache/2.2.22 (Ubuntu)
< Connection: close
< Transfer-Encoding: chunked 
```

还是通过 JSON 将它放在响应正文中更好？

```
< HTTP/1.1 400 Bad Request
< Date: Thu, 20 Dec 2012 01:09:06 GMT
< Server: Apache/2.2.22 (Ubuntu)
< Connection: close
< Transfer-Encoding: chunked
< Content-Type: application/json
{ "error" : "Missing Required Parameters" } 
```

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-12-20T01:33:36.783

引用 400.x 错误代码的 HTTP 规范：

> 4xx 类状态码适用于客户端似乎出错的情况。除了响应 HEAD 请求时，服务器应该包含一个实体，其中包含对错误情况的解释，以及它是暂时的还是永久的情况。这些状态码适用于任何请求方法。用户代理应该向用户显示任何包含的实体。

最佳实践是将错误消息作为实体包含在 HTTP 响应的正文中 - 无论是 JSON、纯文本、格式化的 HTML 还是您可能想要使用的任何其他格式。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-12-20T01:31:30.107

最好在正文中包含错误详细信息。此外，许多（大多数/几乎所有，例如 WSGI）服务器和客户端不支持更改错误代码的名称 - 将它们视为固定对（因此例如 400 始终是“错误请求”而不是“错误请求 - 你忘记指定用户 ID”）。即使他们不会破坏，他们也不会关心您对特定错误代码的特殊名称。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-08-20T17:37:46.943

错误不属于正文。它属于警告标题。

> 警告常规 HTTP 标头包含有关消息状态可能存在的问题的信息。

[参考](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Warning)

# system-verilog - 从systemverilog中的函数返回队列

> ID：13963935
> 
> 赞同：6
> 
> 时间：2012-12-20T01:28:50.637
> 
> 标签：system-verilog

我无法编译此代码：

```
 function integer[$] get_register_name;
                integer ret[$];
                ret.push_back(1);
                ret.push_back(2);
                return ret;
      endfunction 
```

是否可以从函数返回队列？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-20T02:42:22.507

是的，您可以从函数返回队列。但要这样做，您必须使用`typedef`并返回该类型定义一个新类型。

```
typedef integer queue_of_int[$];

function queue_of_int get_register_name();
   queue_of_int ret;
   ret.push_back(1);
   ret.push_back(2);
   return ret;
endfunction 
```

请注意，在 typedef 中，`[$]`在类型名称之后，而队列元素类型在类型名称之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-23T12:46:36.110

下面是对我有用的代码示例....

```
typedef bit[31:0] bitQueue[$]; 
```

//合并第一个和第二个队列，//将第二个队列添加到第一个队列的末尾

```
function bitQueue   mergeEnd(bit[31:0] queue_1[$], bit[31:0] queue_2[$]);
  foreach (queue_2[i]) queue_1.push_back(queue_2[i]);
  return queue_1;
endfunction 
```

# ssl - 如何让地标图标通过 ssl 加载？

> ID：13963939
> 
> 赞同：2
> 
> 时间：2012-12-20T01:29:13.280
> 
> 标签：ssl, https, kml, google-earth-plugin

我正在开发一个使用谷歌地球插件的网络应用程序。最近，增加了让非公共用户登录的新要求，这意味着一些用户现在通过 https 使用该网站。在测试中出现问题的是自定义地标图标（他们使用 http 工作）。

这些图标托管在为页面提供服务的同一台服务器上。

以下是每个协议的网址。

```
 http - http://localhost/Images/yellow.png
 https - https://localhost/Images/yellow.png 
```

我可以点击该链接，图像将按您的预期显示。

图像 href 在动态生成的 kml 中被声明为图标样式。

我想避免通过 http 加载图像，因为我认为这会导致 Internet Explorer 向用户显示混合内容警告。

如何在使用 https 时正确加载图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T22:01:44.247

我自己一直在努力解决这个问题——简短的回答是这行不通。如果内容是从生成任何类型的错误/提示（身份验证、无效证书等）的 HTTPS 站点提供的，则插件将不会加载内容。

有趣的是，桌面客户端运行良好，并在必要时提示用户输入凭据。但是，两个客户端都不允许使用不受信任的证书在场外提供内容。

我发现的唯一解决方法是：

*   在托管内容的服务器上使用受信任的 HTTPS 证书（信任客户端系统上的证书或仅使用真实证书。）
*   不要使用 HTTPS 基本身份验证，因为这将始终生成 401/Challenge 响应，Web 浏览器客户端将简单地忽略这些响应
*   如果需要身份验证，请使用 NTLM 身份验证和常见（例如，域）登录。如果您在 Interent Explorer（或 .NET WebBrowserControl）中加载插件，则身份验证将得到正确处理并显示图像。

上周我参加了谷歌地球管理员的培训，培训师证实了这个“错误”。它应该在插件的下一个版本中得到修复（它实际上可能已经修复了——你使用的是什么版本的插件？）

# python - Python字典计数

> ID：13963943
> 
> 赞同：1
> 
> 时间：2012-12-20T01:29:23.817
> 
> 标签：python, dictionary

我有一本字典

```
a={}
a['A']=1
a['B']=1
a['C']=2 
```

我需要输出以下内容

```
1 has occurred 2 times
2 has occurred 1 times 
```

做这个的最好方式是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T01:31:26.583

这很容易（并且有效）完成[`collections.Counter()`](http://docs.python.org/3/library/collections.html#collections.Counter)，它旨在（毫不奇怪）计算事物：

```
>>> import collections
>>> a = {"A": 1, "B": 1, "C": 2}
>>> collections.Counter(a.values())
Counter({1: 2, 2: 1}) 
```

这为您提供了一个类似字典的对象，可以轻松地用于生成所需的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T01:34:13.073

使用`Counter`类：

```
from collections import Counter

a = {}
a["A"] = 1
a["B"] = 1
a["C"] = 2

c = Counter(a.values())

c
=> Counter({1: 2, 2: 1}) 
```

从[文档](http://docs.python.org/3/library/collections.html#collections.Counter)中：

> Counter 是用于计算可散列对象的 dict 子类。它是一个无序集合，其中元素存储为字典键，它们的计数存储为字典值。计数可以是任何整数值，包括零计数或负计数。Counter 类类似于其他语言中的 bag 或 multisets。

# php - .htaccess 抛出 500 错误

> ID：13963946
> 
> 赞同：0
> 
> 时间：2012-12-20T01:29:37.507
> 
> 标签：php, .htaccess, codeigniter

我正在使用 CodeIgniter，需要去掉 URL 中的“index.php”。我从 codeigniter 教程中复制了 .htaccess 文件，清空了 $config['index_page'] = ''; 并将 .htaccess 放在根目录中。如果没有 .htaccess 文件，它可以正常工作，但很难看：www.example.com/index.php/site/home 出于某种原因，它无法正常工作，只会引发 500 错误。

错误在哪里，我该如何解决？

先感谢您

我的 .htaccess 文件：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    #Removes access to the system folders by users.
    #Additionly this will allow you to create a System.php controller,
    #previously this would not have not been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^{.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
<IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php? and everything works as normal.
    # submitted by: ElliotHaughin
    ErrorDocument 404 /index.php
</IfModule> 
```

我的站点控制器：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Site extends CI_Controller {
    public function index(){
        $this->home();
    }
    public function home(){
        echo "default function started.<br/>";
        $this->hello();
        $data['title'] = 'Home!';
        $data['name'] = 'Ilia';
        $data['fname'] = 'Lev';
        $data['operation'] = 'minus';
        $data['val1'] = 5;
        $data['val2'] = 7;
        echo $data['operation']."<br/>";
        $data['result'] = $this->math($data);
        $this->viewLoad("home_view", $data);
        echo "<br/>";
    }
    public function hello(){
        echo "hello function started.<br/>";
    }
    public function math($data){
        $operation = $data['operation'];
        $val1 = $data['val1'];
        $val2 = $data['val2'];
        $this->load->model("math");
        return $this->math->calculate($operation, $val1, $val2)."<br/>";
    }
    public function viewLoad($whatToView, $data){
        try{
            $this->load->view($whatToView, $data);
        }catch(Exception $e){
            echo "There is no such view";
        }
    }
    public function about(){
        $data['title'] = "About!";
        $this->viewLoad("about_view",$data);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T01:43:07.360

如果这确实是`.htaccess`文件的一部分，则会导致您的问题：

```
RewriteRule ^{.*)$ /index.php?/$1 [L]
            ^^^ typo? 
```

应该：

```
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-23T09:25:49.700

我也有同样的问题，但我的代码是正确的，我使用的是 wamp 服务器，然后我发现重写模块没有启用

所以去了 apache/conf/httpd.conf 和未注释的行

> LoadModule rewrite_module modules/mod_rewrite.so

现在它工作正常。

# mysql - Mysql阻止在某个日期后插入

> ID：13963963
> 
> 赞同：2
> 
> 时间：2012-12-20T01:31:18.753
> 
> 标签：mysql, function, date, time, insert

是否可以在某个日期和时间之后阻止插入 mysql 表？

例如我有 2 张桌子：

```
TABLE exams 
(
...
examID int primary key auto_increment,
examDate DATE,
examTime TIME, 
...
)

TABLE inscripts
(
...
examID int not null references exams(examID),
insDate DATE,
insTime TIME,
...
) 
```

**我想防止在考试进行时插入新的铭文。**

有一些功能可以防止这种情况或轻松检查当前日期和当前时间是否等于或大于匹配表中的日期和时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T02:16:14.773

您可以[创建一个触发器](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)，在继续之前验证插入。伪代码，但类似于：

```
DELIMITER |
CREATE TRIGGER `Stop_Insert_During_Exam`
BEFORE UPDATE ON `inscripts`
FOR EACH ROW
BEGIN
  DECLARE msg VARCHAR(255);
  -- Check
  -- Test if an exam is going on. If so:
  SET msg = "You cannot add an inscription while an exam is going on.';
  SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = msg;
  -- /Check
END;
| 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T02:15:44.490

看着您的桌子，当您尝试插入题词时，您已经知道考试了。因此，您可以在插入题词之前抓住考试并检查它是否正在进行中。如果只是不要插入它，如果不是则插入它。

# apache - 在 Apache 上启用压缩的正确方法是什么？

> ID：13963965
> 
> 赞同：5
> 
> 时间：2012-12-20T01:31:22.980
> 
> 标签：apache, gzip, deflate, http-compression

有人说要启用压缩，您需要修改 htaccess 文件：

*   [apache 压缩 Deflate .js 和 .css 文件未压缩？](https://stackoverflow.com/q/6405347/37759)
*   [http://betterexplained.com/articles/how-to-optimize-your-site-with-gzip-compression/](http://betterexplained.com/articles/how-to-optimize-your-site-with-gzip-compression/)）

其他人说你需要更新 httpd.conf 文件

*   [http://kb.mediatemple.net/questions/1567/Compressing+web+pages+with+mod_deflate#dv](http://kb.mediatemple.net/questions/1567/Compressing+web+pages+with+mod_deflate#dv)

什么是正确的方法？如果其中任何一个是正确的，那么 htaccess 不是更好的选择，因为它不需要重新启动 Web 服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-11T02:44:56.537

Apache HTTP Server 可以通过多种方式进行[配置](http://httpd.apache.org/docs/2.4/en/configuring.html)： 主配置文件（通常）称为“httpd.conf”，但该文件可以包含其他带有“Include”指令的配置文件。此外，HTTP 服务器允许将配置文件放置在您网站的上下文路径中。这些分散的配置文件（通常）称为“.htaccess”。

配置指令，如启用压缩的指令，可以在不同的上下文中有效。“AddOutputFilter”、“SetOutputFilter”和（已弃用的）“AddOutputFilterByType”的有效配置上下文都将“服务器配置、虚拟主机、目录、.htaccess”指定为它们的有效配置上下文。因此，所有这些指令都可以在“httpd.conf”以及“.htaccess”配置文件中使用。

因此，两种配置输出压缩的方法都是有效的，您是否要将所有服务器配置放在一个中央文件中（仅在服务器（重新）启动期间读取）或是否要将配置分布在多个文件中，这只是一个口味问题和目录（但获得立即应用更改的好处）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-04T02:28:49.023

如果您的 Web 主机是通过 C 面板在 Apache C 面板上启用 G ZIP 压缩

1.  转到 CPanel 并检查软件选项卡。

2.  以前优化网站曾经可以工作，但现在有一个新选项可用，即“MultiPHP INI 编辑器”。

3.  选择要压缩的域名。

4.  向下滚动到底部，直到找到 zip 输出压缩并启用它。

5.  现在再次检查 G ZIP 压缩。

您也可以按照视频教程进行操作。 [https://www.youtube.com/watch?v=o0UDmcpGlZI](https://www.youtube.com/watch?v=o0UDmcpGlZI)

# database - postgresql 中的贝叶斯评级

> ID：13963969
> 
> 赞同：2
> 
> 时间：2012-12-20T01:31:32.617
> 
> 标签：database, postgresql

我的数据库中有下表

```
 Name     |    total_stars   |      total_reviews
 Item A             27                       7
 Item B             36                       9
 Item C             27                       7
 Item D             30                       6
 Item E             0                        0
 Item F             0                        0
 Item F             15                       3 
```

我正在看[这篇文章](http://www.andymoore.ca/2010/02/bayesian-ratings-your-salvation-for-user-generated-content/)，并试图在 postgresql 数据库中实现贝叶斯排名。

给出的排名公式是

```
br = ( (avg_num_votes * avg_rating) + (this_num_votes * this_rating) ) / 
(avg_num_votes + this_num_votes) 
```

在哪里：

*   avg_num_votes：所有num_votes>0的项目的平均票数
*   avg_rating：每个项目的平均评分（同样，那些有 num_votes>0 的项目）
*   this_num_votes：该项目的投票数
*   this_rating：这个项目的评分

这是我提出的查询，但它不起作用：

```
with avg_num_votes as (
      select AVG(total_reviews) 
           from business 
           where total_reviews != 0), 
       avg_rating as (
          select AVG(total_stars/total_reviews) 
          from business 
          where total_reviews != 0)
select * from business 
  order by ((avg_num_votes * avg_rating) + (total_stars)) / (avg_num_votes + total_reviews); 
```

我正进入（状态：`ERROR: column "avg_num_votes" does not exist`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T06:17:15.590

Postgres 中的运算符`WITH`仅用于创建要在主查询中使用的其他工作查询。

此查询在 FROM 子句中使用子选择，并按预期工作：

```
SELECT business.* FROM business,
     (SELECT avg(total_reviews) AS v
      FROM business 
      WHERE total_reviews != 0
     ) AS avg_num_votes,
     (SELECT avg(total_stars/total_reviews) AS v 
      FROM business 
      WHERE total_reviews != 0
     ) AS avg_rating
ORDER BY ((avg_num_votes.v * avg_rating.v) + (total_stars)) / (avg_num_votes.v + total_reviews) 
```

* * *

**编辑**：实际上，使用`WITH`也是可能的，但与第一种形式相比似乎并不短。此外，它的可移植性较差 - 第一个解决方案将适用于 MySQL，但这不会：

```
WITH
    avg_num_votes AS (
        SELECT avg(total_reviews) AS v
        FROM business 
        WHERE total_reviews != 0
    ),
    avg_rating AS (
        SELECT avg(total_stars/total_reviews) AS v
        FROM business
        WHERE total_reviews != 0
    )
SELECT business.*
FROM business, avg_num_votes, avg_rating
ORDER BY ((avg_num_votes.v * avg_rating.v) + (total_stars)) / (avg_num_votes.v + total_reviews) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:55:15.030

[SQL小提琴](http://www.sqlfiddle.com/#!12/0141d/3)

```
with av as (
    select avg(total_reviews) avg_num_votes
    from business
    where total_reviews > 0
), ar as (
    select name, avg(total_stars * 1.0 / total_reviews) avg_rating
    from business
    where total_reviews > 0
    group by name
)
select b.*, avg_rating, avg_num_votes,
    (avg_num_votes * avg_rating + total_stars)
    /
    (avg_num_votes + total_reviews) br
from
    business b
    left join
    ar on ar.name = b.name
    inner join
    av on true
order by br, b.name
    ;
  name  | total_stars | total_reviews |     avg_rating     |   avg_num_votes    |                 br                 
--------+-------------+---------------+--------------------+--------------------+------------------------------------
 Item A |          27 |             7 | 3.8571428571428571 | 6.4000000000000000 | 3.85714285714285712238805970149254
 Item C |          27 |             7 | 3.8571428571428571 | 6.4000000000000000 | 3.85714285714285712238805970149254
 Item B |          36 |             9 | 4.0000000000000000 | 6.4000000000000000 | 4.00000000000000000000000000000000
 Item D |          30 |             6 | 5.0000000000000000 | 6.4000000000000000 | 5.00000000000000000000000000000000
 Item F |           0 |             0 | 5.0000000000000000 | 6.4000000000000000 | 5.00000000000000000000000000000000
 Item F |          15 |             3 | 5.0000000000000000 | 6.4000000000000000 | 5.00000000000000000000000000000000
 Item E |           0 |             0 |                    | 6.4000000000000000 | 
```

# java - StatusBar 不是抽象的，不会覆盖抽象方法 onPreferenceChange

> ID：13963973
> 
> 赞同：1
> 
> 时间：2012-12-20T01:32:03.883
> 
> 标签：java, android, statusbar, rom

我正在使用自定义 ROM，并且在尝试编译时收到此错误。我尝试添加自定义电池选择器。

```
com.android.settings.pcf.StatusBar is not abstract and does not override abstract method onPreferenceChange(android.preference.Preference,java.lang.Object) in android.preference.Preference.OnPreferenceChangeListener 
```

这是 com.android.settings.pcf.StatusBar 文件：

```
package com.android.settings.pcf;

import android.os.Bundle;
import android.preference.CheckBoxPreference;
import android.preference.ListPreference;
import android.preference.Preference;
import android.preference.Preference.OnPreferenceChangeListener;
import android.preference.PreferenceScreen;
import android.provider.Settings;

import com.android.settings.SettingsPreferenceFragment;
import com.android.settings.R;

public class StatusBar extends SettingsPreferenceFragment implements OnPreferenceChangeListener {

    private static final String PREF_BATT_ICON = "battery_icon_list";

    ListPreference mBatteryIcon;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Load the preferences from an XML resource
        addPreferencesFromResource(R.xml.prefs_statusbar);

        mBatteryIcon = (ListPreference) findPreference(PREF_BATT_ICON);
        mBatteryIcon.setOnPreferenceChangeListener(this);
        mBatteryIcon.setValue((Settings.System.getInt(getActivity()
                .getContentResolver(), Settings.System.STATUSBAR_BATTERY_ICON,
                0))
                + "");
    }

    public boolean OnPreferenceChange(Preference preference, Object newValue) {
        if (preference == mBatteryIcon) {
            int val = Integer.parseInt((String) newValue);
            return Settings.System.putInt(getActivity().getContentResolver(),
                    Settings.System.STATUSBAR_BATTERY_ICON, val);
        }
        return false;
    }
} 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T01:43:46.297

该错误告诉您您没有完全实现该`OnPreferenceChangeListener`接口。特别是，该`onPreferenceChange`方法没有实现。

要么实现此方法，要么我实际上猜测您的意思`OnPreferenceChange`是`onPreferenceChange`-注意小写的“o”-（在这种情况下，我相信您`@Override`之前还需要a）

# android - Android软键盘中的弹出布局？

> ID：13963974
> 
> 赞同：4
> 
> 时间：2012-12-20T01:32:05.180
> 
> 标签：android, android-layout, android-softkeyboard

我目前正在研究android中的软键盘实现。我感到困惑的一件事是当您按下任意键时在哪里实现弹出小方块（我在下面附上两个示例）。

我已通读 SDK 中提供的示例应用程序“软键盘”，它具有此功能，但我找不到哪段代码实现了它。

有什么想法可以实现/修改它吗？

[*示例应用程序“软键盘”*](http://jayxie.com/mirrors/android-sdk/resources/samples/SoftKeyboard/index.html)

![示例键盘](../Images/2e88364488529ce6abed4441fa959b94.png)

*安卓默认键盘*

![安卓默认键盘](../Images/97526a2df0019aa7404e459e9f30119c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-03T16:11:38.440

这是您的预览布局。

preview.xml 的代码示例

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:background="#ffffff"
android:gravity="center"
android:textColor="@color/black"
android:textSize="30sp"
android:textStyle="bold" >

</TextView> 
```

在keyboardView的xml上调用你的预览：

```
android:keyPreviewLayout="@layout/preview" 
```

或者您可以创建一个扩展 KeyboardView 的类并实现您自己的代码以进行预览。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T01:58:47.150

The part that controls this resides in `LatinKeyboardView` class

```
@Override
protected boolean onLongPress(Key key) {
    if (key.codes[0] == Keyboard.KEYCODE_CANCEL) {
        getOnKeyboardActionListener().onKey(KEYCODE_OPTIONS, null);
        return true;
    } else {
        return super.onLongPress(key);
    }
} 
```

The part your looking at is in the `else`.

Now this calls `super.onLongPress(key)` which resides in `KeyboardView`.

To customize override the else with respective code.

You'll find the reference [here](http://developer.android.com/reference/android/inputmethodservice/KeyboardView.html#onLongPress(android.inputmethodservice.Keyboard.Key))

# sql - SQL Server 之间

> ID：13963982
> 
> 赞同：4
> 
> 时间：2012-12-20T01:32:50.937
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我有一个表，其中包含年、月和几个数字列

```
Year   Month  Total
2011     10    100
2011     11    150
2011     12    100  
2012     01    50
2012     02    200 
```

现在，我想`SELECT`在 2011 年 11 月到 2012 年 2 月之间行。请注意，我希望查询使用范围。就好像我在表中有一个日期列..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T01:56:27.127

想出一种将 BETWEEN 与表一起使用的方法将起作用，但在每种情况下都会导致更差的性能：

*   它充其量只会消耗更多的 CPU 来对行进行某种计算，而不是将它们作为日期处理。
*   在最坏的情况下，它会强制对表中的每一行进行表扫描，但如果您的列有索引，那么通过正确的查询可以进行查找。这可能是一个巨大的性能差异，因为强制约束进入 BETWEEN 子句将禁用使用索引。

如果您在日期列上有索引并且完全关心性能，我建议您使用以下方法：

```
DECLARE
   @FromDate date = '20111101',
   @ToDate date = '20120201';

SELECT *
FROM dbo.YourTable T
WHERE
   (
      T.[Year] > Year(@FromDate)
      OR (    
         T.[Year] = Year(@FromDate)
         AND T.[Month] >= Month(@FromDate)
      )
   ) AND (
      T.[Year] < Year(@ToDate)
      OR (
         T.[Year] = Year(@ToDate)
         AND T.[Month] <= Month(@ToDate)
      )
   ); 
```

但是，您不想使用这样的结构是可以理解的，因为它非常笨拙。所以这是一个折衷查询，它至少使用数字计算，并且将使用比日期到字符串转换计算更少的 CPU（尽管不足以弥补强制扫描，这是真正的性能问题）。

```
SELECT *
FROM dbo.YourTable T
WHERE
   T.[Year] * 100 + T.[Month] BETWEEN 201111 AND 201202; 
```

如果你有一个索引`Year`，你可以通过提交如下查询得到一个很大的提升，有机会去寻找：

```
SELECT *
FROM dbo.YourTable T
WHERE
   T.[Year] * 100 + T.[Month] BETWEEN 201111 AND 201202
   AND T.[Year] BETWEEN 2011 AND 2012; -- allows use of an index on [Year] 
```

虽然这打破了您对使用单个`BETWEEN`表达式的要求，但它并不会带来太多痛苦，并且在`Year`索引中表现得非常好。

你也可以改变你的桌子。坦率地说，对日期部分使用单独的数字而不是使用日期数据类型的单个列并不好。它不好的原因是因为您现在面临的确切问题 - 很难查询。

在某些保存字节很重要的数据仓库场景中，我可以设想您可能将日期存储为数字（例如`201111`）的情况，但不建议这样做。*最好*的解决方案是将表格更改为使用日期，而不是拆分月份和年份的数值。只需存储该月的第一天，认识到它代表整个月。

如果更改使用这些列的方式不是一个选项，但您仍然可以更改表，那么您可以添加一个持久计算列：

```
ALTER Table dbo.YourTable
   ADD ActualDate AS (DateAdd(year, [Year] - 1900, DateAdd(month, [Month], '18991201')))
   PERSISTED; 
```

有了这个，你可以这样做：

```
SELECT *
FROM dbo.YourTable
WHERE
   ActualDate BETWEEN '20111101' AND '20120201'; 
```

该`PERSISTED`关键字意味着虽然您仍然会进行扫描，但它不必对每一行进行任何计算，因为表达式是在每个 INSERT 或 UPDATE 上计算并存储在该行中的。但是如果你在这个列上添加一个索引，你*可以*得到一个搜索，这将使它表现得非常好（尽管总而言之，这仍然不如更改为使用实际的日期列理想，因为它会占用更多的空间和将影响插入和更新）：

```
CREATE NONCLUSTERED INDEX IX_YourTable_ActualDate ON dbo.YourTable (ActualDate); 
```

总结：如果你真的不能以任何方式改变表，那么你将不得不以某种方式做出妥协。当您的日期被拆分为单独的列存储时，将无法获得您想要的也能很好地执行的简单语法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T02:24:31.370

```
(Year > @FromYear OR Year = @FromYear AND Month >= @FromMonth)
AND (Year < @ToYear OR Year = @ToYear AND Month <= @ToMonth) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T02:33:58.363

您的示例表似乎表明每年和每月只有一条记录（如果它真的是按月汇总的表）。如果是这样，即使在几十年的活动中，您也可能在表中积累很少的数据。级联表达式解决方案将起作用，并且性能（在这种情况下）不会成为问题：

```
SELECT * FROM Table WHERE ((Year * 100) + Month) BETWEEN 201111 AND 201202 
```

如果不是这种情况，并且表中确实有大量记录（超过几千条记录），那么您有两种选择：

1.  将您的表更改为以 YYYYMM 格式（整数值或文本）存储年份和月份。此列可以替换您当前的年份和索引列，也可以添加到它们中（尽管这违反了正常形式）。索引此列并对其进行查询。

2.  创建一个单独的表，其中包含每年和每月一条记录以及如上所述的可索引列。在您的查询中，将此表连接回源表并针对较小表中的索引列执行查询。

# jquery - 关闭选择中特定项目的事件

> ID：13963983
> 
> 赞同：2
> 
> 时间：2012-12-20T01:32:54.880
> 
> 标签：jquery, event-delegation

假设我有这样的事情：

```
$('#mydiv').on('click', 'button', doSomething); 
```

显然，我希望所有按钮都能`doSomething()`点击。现在假设我希望其中一个按钮不这​​样做，而是做其他事情。

```
$('#mydiv').off('click', '.specialclass button'); 
```

这不起作用，但我需要它。有没有办法做到这一点？我非常希望不必单独连接每个按钮。

[`.off()`文档](http://api.jquery.com/off/)的这一部分让我很生气：

> 要删除特定的委托事件处理程序，请提供选择器参数。选择器字符串必须与附加事件处理程序时传递给 .on() 的字符串完全匹配。

这是一个演示我正在尝试做的事情[的小提琴。](http://jsfiddle.net/edelman/A6Ew3/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T01:35:35.787

您可以使用 jQuery 伪选择器`:not()`来排除搜索结果，它是 document [here](http://api.jquery.com/not-selector/)。

```
$('#mydiv').on('click', 'button:not(.specialclass)', doSomething); 
```

然后你可以单独指定具体情况：

```
$('.specialclass').on('click', function() { console.log('sup'; }); 
```

* * *

您还可以使用 unbind 关闭 jQuery 中的事件。

```
$('div').unbind('click');​ 
```

虽然没有被弃用，但根据文档：

> 从 jQuery 1.7 开始，首选 .on() 和 .off() 方法来附加和删除元素上的事件处理程序

# php - 在数据库中插入所选复选框值的总数

> ID：13963984
> 
> 赞同：0
> 
> 时间：2012-12-20T01:33:04.290
> 
> 标签：php, mysql, database, checkbox, foreach

我对 PHP 很陌生，并且一直在尝试将复选框值的总数存储在数据库中，但出于某种原因（可能缺乏逻辑）。它不起作用：

```
<?php
        mysql_connect( 'localhost',  'root', '')or die("cannot connect");
        mysql_select_db('webgame')or die("cannot select DB");

        $perms = array(
                    'writePost' => 1,
                    'readPost' => 2,
                    'deletePost' => 4,
                    'addUser' => 8,
                    'deleteUser' => 16,
        );

        echo "<form method='post' action='v3.php'>";
        foreach($perms as $key => $value)
        {
            echo "<input type='checkbox' value='".$value."'>\n";
            echo "<label for='".$key."'>".ucfirst($key)."</label><br>\n";
        }
            echo "<input type='text' name='name'>";
            echo "<input type='submit' name='submit'>";

        if(isset($_POST['submit']))
        {
            $total = 0; 

            foreach ($_POST as $key => $value) 
            {
                if( isset($perms[ $value ]) )
                    $total += $perms[ $value ]; 
            }

            mysql_query("INSERT INTO perms (name, rights) VALUES(name, $total)") or die(mysql_error());
        }

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T01:52:16.880

尝试像这样更改您的复选框标记：

```
 foreach($perms as $key => $value)
    {
       echo "<input type='checkbox' value='".$value."' name='checkbox[]'>\n";
        echo "<label for='".$key."'>".ucfirst($key)."</label><br>\n";
    } 
```

然后像这样访问它：

```
 if(isset($_POST['submit']))
    {
        $total = 0; 

        foreach ($_POST['checkbox'] as $checkbox) 
        {
                $total += $checkbox; 

        }

        echo $total;
        mysql_query("INSERT INTO perms (name, rights) VALUES(name, $total)") or die(mysql_error());
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T02:53:02.937

我看到几个问题。有些会导致比其他更多的问题。

(1) 您缺少`name`复选框中的属性。(2) 您缺少结束`</form>`标签。(3) 您的 Query 可能像您一样失败`VALUES(name, $total)`，我假设`name`它是一个字符串，所以它需要用引号括起来`VALUES('name', $total)`，或者更有可能`VALUES('$name', $total)`

另外，我不明白您为什么在初始页面加载时连接到数据库。我会把它移到你的`isset($_POST['submit'])`.

尝试这个 -

```
<?php
    $perms = array(
                'writePost' => 1,
                'readPost' => 2,
                'deletePost' => 4,
                'addUser' => 8,
                'deleteUser' => 16,
    );

    echo "<form method='post' action='v3.php'>";
    foreach($perms as $key => $value)
    {
        echo "<input type='checkbox' name='checkboxes[]' value='".$value."'>\n";  
        echo "<label for='".$key."'>".ucfirst($key)."</label><br>\n";
    }
        echo "<input type='text' name='name'>";
        echo "<input type='submit' name='submit'>";
        echo "</form>";

    if(isset($_POST['submit']))
    {
       mysql_connect( 'localhost',  'root', '')or die("cannot connect");
       mysql_select_db('webgame')or die("cannot select DB");

        $total = 0; 
        $name  = mysql_real_escape_string($_POST['name']); 
        foreach ($_POST['checkboxes'] as $keys=>$vals)
        {
                $total += $vals;
        }

    mysql_query("INSERT INTO perms (name, rights) VALUES('$name', $total)") or die(mysql_error()); 
   }
?> 
```

此外，该`mysql_*`扩展自 PHP 5.5.0 起已弃用，将来将被删除。相反，应该使用[MySQLi](http://php.net/manual/en/book.mysqli.php)或[PDO_MySQL扩展。](http://php.net/manual/en/ref.pdo-mysql.php)另请参阅[MySQL：选择 API 指南](http://php.net/manual/en/mysqlinfo.api.choosing.php)和[相关的常见问题解答](http://php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)以获取更多信息。

# php - 从 JQuery 插件收集使用分析数据

> ID：13963986
> 
> 赞同：1
> 
> 时间：2012-12-20T01:33:19.133
> 
> 标签：php, javascript, jquery, pubnub

我正在完成一个 JQuery 插件，我需要在插件处于活动状态时收集一些活动的使用数据。这些数据需要远程存储在我的服务器上。

但是，我正在尝试找到执行此操作的最佳方法。我猜这与收集网络分析数据的方式类似。我现在看到两个选项，我概述了以下基本步骤。

A. AJAX - 使用这种方法：

1.  我使用 JQuery 在我的 JQuery 插件中设置 Ajax 请求以将数据发布到服务器
2.  我设置此服务器以捕获已发布的数据，然后使用 PHP 插入数据库表

B. SOCKETS - 使用这种方法：

1.  我注册了 PubNub 之类的服务
2.  我在我的 JQuery 插件中使用 PubNub Javascript SDK 将消息“发布”到给定的“频道”
3.  我设置了一个专用服务器或云服务器，并使用SSH登录，安装Web服务器+数据库+ PHP，并确保它工作正常
4.  我创建了我的 PHP 脚本（使用 PubNub PHP SDK）来“订阅”我的插件将发布消息的 pubnub“频道”，然后设置机制以从消息中捕获数据并插入到数据库表中
5.  我设置了 supervisord 来守护我的 php 脚本，然后启动守护进程，因为我需要一个长期存在的 PHP 进程来通过服务器运行 PubNub 订阅功能。

我更喜欢 A，因为它对我来说是最简单的选择，我可以使用任何托管的 MySQL/PHP 服务器以最少的麻烦完成它。但是，我担心当插件在数千个不同的网站或一些非常繁忙的网站中使用时，这种方法的性能如何，在我的远程服务器上每秒可能有 10 到 100 次数据库提交。

将 B 方法与套接字一起使用是否更有意义，因为我需要订阅 PubNub 才能实现这一点，但成本可能要高得多。另外，由于我不需要异步连接，因为我只需要为每个用户发出一个请求，我认为与直接发送到我的服务器的可靠 ol' HTTP 请求相比，套接字可能是矫枉过正的（而不是发送消息通过 PubNub，然后给我）。

真正做到这一点的最好方法是什么？！

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T02:17:35.867

肯定是选项A。另外，如果您真的担心对 PHP 脚本的大量点击，请查看 AppFog 之类的东西，它们免费提供相当多的东西，如果出现问题，可以减轻服务器的负载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T17:50:46.770

你是对的，套接字是矫枉过正的。甚至 Google Analytics 也使用 HTTP 请求来发送数据。这些请求不需要及时（例如毫秒无关紧要），因此没有理由打开套接字。

# php - 使用 SQL 查询更新 PHPmyAdmin 数据库的 cronjob 命令行

> ID：13963990
> 
> 赞同：1
> 
> 时间：2012-12-20T01:33:53.720
> 
> 标签：php, sql, cron, phpmyadmin

在 cronjob 任务列表下的 Bluehost 中，我设置了一个每分钟执行一次的作业。

```
mysql --user=myusername --password=mypassword use mydb 
       -e "UPDATE `users` SET val = '1' WHERE name = 'matt'" 
```

我相信我没有正确选择数据库，因为我使用相同的用户名并传递登录到 PHPmyAdmin，一旦我登录到 PHPmyAdmin，SQL 查询就可以正常工作。

错误在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T01:39:22.137

命令行应该是

```
mysql --user=myusername --password=mypassword -D mydb -e "UPDATE `users` SET val = '1' WHERE name = 'matt'" 
```

`-D databasename`参数就是你要找的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T01:42:30.537

您可以按照以下步骤操作：

```
$ mysql -u <username> -p <enter>
$ <password>
$> use mydb;
$> update user set val = 1 where name = matt; 
```

从命令行

# go - Go：我是否创造了太多的价值？

> ID：13963991
> 
> 赞同：12
> 
> 时间：2012-12-20T01:34:09.377
> 
> 标签：go

如果我有这样的结构

```
type myStruct struct {
    mystring string
    myint int
} 
```

如果我有一个像这样返回一个新的 myStruct 的函数

```
func New() myStruct {
    s := myStruct{}

    s.mystring = "string"
    s.myint = 1

    return s
} 
```

因为我在返回之前首先将它存储在“s”变量中，所以我的函数实际上是在生成 2 个 myStruct 值而不是一个吗？

如果是这样，那么确保我不首先将其存储在变量中是一种更好的做法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-20T02:02:06.833

该`return`语句将返回`myStruct`对象值的副本。如果它是一个小物体，那么这很好。

如果您打算让调用者能够修改此对象，并且该结构将具有使用指针作为接收者的方法，那么返回指向您的结构的指针更有意义：

```
func New() *myStruct {
    s := myStruct{}

    s.mystring = "string"
    s.myint = 1

    return &s
} 
```

当您比较值的内存地址与指针返回类型时，您可以看到复制发生： [http ://play.golang.org/p/sj6mivYSHg](http://play.golang.org/p/sj6mivYSHg)

```
package main

import (
    "fmt"
)

type myStruct struct {
    mystring string
    myint    int
}

func NewObj() myStruct {
    s := myStruct{}
    fmt.Printf("%p\n", &s)

    return s
}

func NewPtr() *myStruct {
    s := &myStruct{}
    fmt.Printf("%p\n",s)
    return s
}

func main() {

    o := NewObj()
    fmt.Printf("%p\n",&o)

    p := NewPtr()
    fmt.Printf("%p\n",p)
}

0xf8400235a0 // obj inside NewObj()
0xf840023580 // obj returned to caller
0xf840023640 // ptr inside of NewPtr()
0xf840023640 // ptr returned to caller 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T01:51:54.320

我绝对不是围棋专家（甚至不是新手 :)），但正如@max.haredoom 提到的，您可以在函数签名本身中分配变量。这样，您也可以`s`省略`return`:

```
package main

import "fmt"

type myStruct struct {
    mystring string
    myint    int
}

func New() (s myStruct) {
    s.mystring = "string"
    s.myint = 1

    return
}

func main() {
    r := New()
    fmt.Println(r)
}

// Outputs {string 1} 
```

[在我在Effective Go](http://golang.org/doc/effective_go.html)中遇到的示例中，它似乎确实是处理这种性质的最常见的方式，但同样，我绝对不是该主题的权威（并将寻找有关实际表现）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T02:00:07.197

I think I found the answer by using defer.

I updated the function so that there's a deferred modification to the myStruct value. This means it will happen after the return, but before it is received on the other end.

When I do this, the struct that is received by the caller does not show the updated value, so it appears as though I am indeed returning a copy.

```
func New() myStruct {
    s := myStruct{}

    defer func() {
        s.mystring = "new value" // defer an update to the value
    }()

    s.mystring = "string"
    s.myint = 1

    return s
}

func main() {

    b := New()

    fmt.Println(b) // still shows the original value
} 
```

[http://play.golang.org/p/WWQi8HpDny](http://play.golang.org/p/WWQi8HpDny)

# c# - 从母版页上的文本框中检索搜索字符串以进行内部搜索

> ID：13963997
> 
> 赞同：0
> 
> 时间：2012-12-20T01:34:50.763
> 
> 标签：c#, asp.net

目前，我的母版页上有一个文本框和一个按钮，用于输入和提交搜索字符串。搜索在我的网站内部。用户将输入搜索字符串，然后单击搜索按钮。搜索按钮重定向到搜索结果页面。加载搜索结果页面时，当前通过上一页的控件搜索搜索字符串文本框来检索搜索字符串。

这一切正常，除非由于异常从登录页面输入搜索：*当前用户不允许访问上一页*。

所以我想知道检索搜​​索字符串的更好方法是什么。我不想用它弄乱重定向网址。我不反对将它存储在 Session 集合中，但在页面加载事件发生之前无法弄清楚如何将其保存到那里。

以下是相关代码：

从母版页：

```
<asp:TextBox ID="SearchTextBox" runat="server" />
<asp:ImageButton ID="SearchButton" runat="server" Text="Search" PostBackUrl="~/Search.aspx" ImageUrl="~/Graphics/btn_search.png" ImageAlign="AbsMiddle" /> 
```

从搜索结果页面：

```
private string getSearchTextBoxText(Control ctrl)
{
    if (ctrl.HasControls())
    {
        foreach (Control child in ctrl.Controls)
        {
            string s = getSearchTextBoxText(child);

            if (s != null)
                return s;
        }
    }
    else if (ctrl.ID == "SearchTextBox")
    {
        return ((TextBox)ctrl).Text;
    }

    return null;
}

protected void Page_Load(object sender, EventArgs e)
{
    log.Debug("Entering " + MethodBase.GetCurrentMethod().Name);
    string lastSearchText = Label1.Text;
    string searchText = null;

    try
    {
        searchText = PreviousPage != null ? getSearchTextBoxText(PreviousPage) : getSearchTextBoxText(this);
    }
    catch(Exception ex)
    {
        log.Error("Exception occurred attempting to retrieve the search string", ex);
    }
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:10:53.230

我没有正确回答您的问题，但从标题我可以假设您想要子页面中母版页文本框中的文本。正确的？为此，请尝试以下代码：

```
TextBox SearchTextBox= (TextBox)this.Master.FindControl("SearchTextBox");
string searchText = SearchTextBox.Text; 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T03:27:15.617

我可以通过将以下内容添加到 Account 目录中的 Web.config 文件来更正此问题：

```
<location path="Login.aspx">
    <system.web>
        <authorization>
            <allow users="*"/>
        </authorization>
    </system.web>
</location> 
```

添加后，可以访问上一页并且可以检索搜索字符串。

# facebook - 开放图动作翻译

> ID：13963998
> 
> 赞同：1
> 
> 时间：2012-12-20T01:34:58.053
> 
> 标签：facebook, translation, facebook-opengraph

我正在尝试将我的 Open Graph 操作从英语翻译成日语。我使用“翻译管理面板”进行翻译，状态为“我已批准”，似乎没有翻译。有人知道如何发布翻译吗？这个“我批准”状态是什么意思？