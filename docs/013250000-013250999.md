# StackOverflow 问答 13250000-13250999

# c# - 如何将 json 图像（字节数组）反序列化为 asp.net 中的图像？

> ID：13250000
> 
> 赞同：0
> 
> 时间：2012-11-06T11:25:46.253
> 
> 标签：c#, asp.net, json, image, web-services

我的 json 数组：

```
 {" lstFooddtlResult":[{"class_name":"Veg","food_name":"pizza","food_photo":[255,216,255,224,0,16,74,70,73,70,0,1........],"food":"12","qty_uom":"Pcs","unit":null}]} 
```

C#类：

```
public class Food{
    public string class_name { get; set; }
    public string food_name { get; set; }
    public photo[] photo { get; set; }
    public int food { get; set; }
    public string qty_uom { get; set; }
    public string unitcost { get; set; }

}

    public class photo{
    public byte food_photo { get; set; }
}

    public class FooddtlResult{
    public Food[] lstFooddtlResult { get; set; }
} 
```

**我的问题是：**

1.  我的 c# 类是正确的吗？

2.  如何在 c# asp.net 中将字节数组转换为图像？

# c - 如何在 C 中为静态库设计接口

> ID：13250001
> 
> 赞同：2
> 
> 时间：2012-11-06T11:25:48.787
> 
> 标签：c, static-libraries, static-linking, library-design

虽然我不是一个有经验的 C 程序员，但我必须在工作中使用这种语言来构建一个在 SunOS 和 Win32 上都可以编译的静态库。这个库只有几个源文件和它们对应的头文件（比如说：`a.c`、、`b.c`和）。该项目在两个平台上编译并生成库。`a.h``b.h``mylib.a`

我的问题是如何将实现的功能公开`mylib.a`给其他项目，因为当我同时添加两者时`a.h`，`b.h`我会遇到一些宏重新定义错误。

编辑：我发现宏重新定义错误是因为编译命令中的宏定义（与我的头文件无关）并且它已解决:) 但我仍然想就组织我的源文件和头文件提出建议。

我的疑问是我是否修改`a.h`并`b.h`在外部使用，或者我是否应该专门创建一个头文件来声明这个库的接口（比方说`mylib.h`）。我不想使原始头文件过于复杂，但我不想让不同的头文件保持同步......我想听听更有经验的 C 程序员关于他们的模式、每种方法的优点以及是否有其他方法选项。

先感谢您。

编辑：似乎我没有提供足够的信息；下面的模式试图显示我的文件是如何组织的：每个代码文件只包含它的头，每个头都有一个保护条件，每个头都包括一个公共头，这个公共头包括所有头。

```
// a.c ----
#include "a.h"

// b.c ----
#include "b.h"

// a.h ----
#ifndef GUARD_A_H
#define GUARD_A_H
  # include "liball.h"
  void function_prototypes_implemented_in_a();
#endif // GUARD_A_H

// b.h ----
#ifndef GUARD_B_H
#define GUARD_B_H
  # include "liball.h"
  void function_prototypes_implemented_in_b();
#endif // GUARD_B_H

// liball.h ----
#ifndef GUARD_LIBALL_H
#define GUARD_LIBALL_H
  # include <time.h>   // standard headers
  # include <stdioa.h>

  # include "a.h"      // all headers in this project
  # include "b.h"
#endif // GUARD_LIBALL_H 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T11:33:13.373

您应该有一个公共标头 ，`mylib.h`它只包含库用户需要知道的定义。

`mylib-internal.h`然后，您将拥有一个在项目中使用的私有标头。您不应尝试使两者“同步”，而应`mylib-internal.h`包含`#include "mylib.h"`.

您还应该命名所有接口函数，例如`mylib_initialize()`etc，并确保所有私有的内部函数要么被声明`static`，要么被命名`_mylib_internal_whatever()`，这样用户就不会与其他库发生命名空间冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:36:19.530

你的问题太模糊了，所以我的回答是一个通用的建议，你应该避免*双重包含*并在标题中使用[包含防护，如下所示：](http://en.wikipedia.org/wiki/Include_guard)

`a.h`

```
#ifndef __HEADER_A_H__
#define __HEADER_A_H__ 
...
#endif 
```

`b.h`

```
#ifndef __HEADER_B_H__
#define __HEADER_B_H__ 
...
#endif 
```

**编辑**：就像我说的，避免双重（或循环）包含，没有必要`liball.h`包含`a.h`，`b.h`而且，请注意`liball.h`标题保护与 相同`b.h`，因此`b.h`根本不会被定义！

# c# - 从 C# 控制台应用程序发送邮件在服务器中生成 winsock 错误 10054

> ID：13250004
> 
> 赞同：0
> 
> 时间：2012-11-06T11:25:55.107
> 
> 标签：c#, email, .net-4.0, console-application

我刚刚尝试制作 ac# 控制台程序。这个想法是制作一个小型的自包含应用程序，它将检查数据库并通过电子邮件将列表发送给一群用户，例如每天早上自动运行。

到目前为止，我还没有做到这一点，只是想先了解一下基础知识。通过查看在线教程，我已经能够连接到数据库并在控制台中显示一个列表。然而，发送邮件不太成功。

如果我在 while 循环中包含用于发送邮件的代码，它将生成一堆单独的邮件，因此出于某种原因可以正常工作。但这不是我想要的。我希望该列表运行并编译一个将成为消息正文的列表。在程序的那部分运行后，我想发送邮件。问题是它不起作用，当我查看服务器日志时，打开了一个 SMTP 会话，但它终止并说**套接字错误发送对 DATA 的响应**下一行说**Winsock 错误 10045**并且会话终止。

知道为什么会这样吗？对我来说真正没有意义的是，如果在 while 循环内运行它就可以工作......

这是目前的整个程序：

```
namespace SendMails
{
class ConnectToMySQL
{
    [STAThread]
    static void Main(string[] args)
    {
        string connStr = createConnstr("192.168.111.1","database","login","passwd");

        MySqlConnection conn = null;
        MySqlDataReader reader = null;

        try
        {
            conn = new MySqlConnection(connStr);
            conn.Open();

            string stm = "SELECT id, name, surname FROM Kat WHERE Contact = 'Yes' AND Contactwhen <= '"+ DateTime.Today + "'";
            MySqlCommand cmd = new MySqlCommand(stm, conn);
            reader = cmd.ExecuteReader();

            //The actual output on the screen.
            while (reader.Read())
            {
               Console.WriteLine(reader.GetInt32(0) + ": " + reader.GetString(1) + " " + reader.GetString(2));                    
            }

        }
        catch (MySqlException ex)
        {
            Console.WriteLine("Error: {0}", ex.ToString());

        }
        finally
        {
            if (conn != null)
            {
                conn.Close();
            }
        }

        createMail("me@company.com", "info@company.com", "Test message", "Here is your test message.");

    }

    //This builds a mysql connection string
    public static string createConnstr(string server, string databaseName, string user, string passw)
    {
        //build connection string
        string connStr = "server=" + server + ";database=" + databaseName + ";uid=" + user + ";password=" + passw + ";";

        //return connection string
        return connStr;
    }

    //This sends an email
    static void createMail(string recipient, string from, string subject, string msg)
    {
        System.Net.Mail.MailMessage message = new System.Net.Mail.MailMessage();
        message.To.Add(recipient);
        message.Subject = subject;
        message.From = new System.Net.Mail.MailAddress(from);
        message.Body = msg;
        System.Net.Mail.SmtpClient smtp = new System.Net.Mail.SmtpClient("192.168.111.1");
        try
        {
            Console.WriteLine("Sending mail...");
            smtp.Send(message);
            Console.WriteLine("Mail was sent successfully!");
        }
        catch (Exception ep)
        {
            Console.WriteLine("failed to send mail:");
            Console.WriteLine(ep.Message);
        }
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:40:36.207

现在问题已经解决了。解决方案是微不足道的。

只需要添加**smtp.Dispose();** 在**smtp.Send(message) 行之后；**

# internet-explorer - 仅适用于 IE 的备用 Javascript 文件

> ID：13250007
> 
> 赞同：0
> 
> 时间：2012-11-06T11:26:01.957
> 
> 标签：internet-explorer

我想通常包含 Js.js，但是当使用 IE 时，我希望 Js2.js 是唯一包含的 javascript 文件。当浏览器是 IE 时，如何阻止 Js.js 被包含在内。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T11:29:15.517

使用条件语句：

```
<!--[if IE]>
<script src="Js2.js"></script>
<![endif]-->
<!--[if !IE]> -->
<script src="Js.js"></script>
<!-- <![endif]--> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T11:31:48.860

您可以使用`if ie`代码专门针对 IE：

```
<!--[if IE]>
   <script src="Js2.js">
<![endif]-->

<!--[if !IE]> -->
   <script src="Js.js">
<!-- <![endif]--> 
```

参考：http://www.quirksmode.org/css/condcom.html

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T11:39:16.587

```
<--[IF IE]>
    <script type="text/javascript">
        // IE stuff
    </script>
<![endif]--> 
```

另见这篇文章：

[http://msdn.microsoft.com/en-us/library/ms537509%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms537509%28v=vs.85%29.aspx)

# ruby-on-rails - 设置到公共目录的默认路由

> ID：13250014
> 
> 赞同：0
> 
> 时间：2012-11-06T11:26:14.433
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, routes

假设您在服务器上运行了几个 ruby​​/rails 应用程序

APP ExmplA: dir: /foo/bar/ExmplA 在[http://example.com:4111/上运行](http://example.com:4111/)

APP ExmplB: dir: /foo/bar/ExmplB 在[http://example.com:4112/上运行](http://example.com:4112/)

APP ExmplC: dir: /foo/bar/ExmplC 在[http://example.com:4113/上运行](http://example.com:4113/)

现在我有一个公共目录 /pool/common/http/ 我希望 3 个应用程序的默认根路由（“/”）指向其中。

…所以“http://example.com:4113/somedir/something.txt”应该映射到“/pool/common/http/somedir/something.txt”，如果没有另外指定。

我应该在 3 个应用程序的 routes.rb 中输入什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:42:11.357

您可以创建一个从 APP_ROOT/public 到您的公共目录的符号链接。

这将使任何内容都可以通过 root ('/') 访问

# jquery - 在jQuery中获取一个范围内的值

> ID：13250024
> 
> 赞同：0
> 
> 时间：2012-11-06T11:26:36.877
> 
> 标签：jquery, textbox, tags

这是我的html标签，

```
 <asp:Label runat="server" ID="rdPayOutstanding"></asp:Label><br /> 
```

我希望检索跨度标记内的值并将其显示在文本框中，我已经编写了下面的代码，但它似乎不起作用。

任何人都可以帮助解决我的代码的问题吗？

```
$(document).ready(function () {
var amount = $('#rdPayOutstanding').text().toString();
console.log(amount);
$('.textfield').val(amount);
$('.jsPayOutstanding').click(function () {
    $('.textfield').val(amount);
});

$('.jsPaySomeBalance').click(function () {
    // alert('yes');
    $('.textfield').val('');
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:30:25.573

问题是您使用的是 ASP.NET，并且当控件呈现时，ASP.NET 引擎会修改生成的 HTML 元素的 ID。

您可以添加属性[ClientIDMode](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)来获取“正确”的 id：

```
<asp:Label runat="server" ID="rdPayOutstanding" ClientIDMode="Static"></asp:Label><br /> 
```

另一种方法是使用属性[CssClass](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.cssclass.aspx)并按类选择：

```
<asp:Label runat="server" ID="rdPayOutstanding" CssClass="rdPayOutstanding"></asp:Label><br /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:31:04.947

尝试使用标签的客户端 ID 获取值，如下所示

```
var amount = $('#<%=rdPayOutstanding.ClientID%>').val();
console.log(amount); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T11:31:05.410

可以分配`CSS` `class`给`ASP.NET` `Label`

```
<asp:Label runat="server" ID="rdPayOutstanding" class="mylabel"></asp:Label> 
```

然后你可以做这样的事情

```
var amount = $('.mylabel').text(); 
```

**笔记：**

您无法获取该标签的值的原因是它的客户端`ID`在呈现时可能已更改，请尝试检查元素并找到它的`ID`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-06T11:33:02.780

是否是`.textfield`表单元素？

> $('.textfield').val(数量);

设置元素的 value 属性，而不是文本，

如果它不是表单元素，请尝试

> $('.textfield').text(数量);

或者如果您想添加标记：

> $('.textfield').html('<strong>' + 金额 + '</strong>'); // 管他呢

# php - 获取文本和用户位置

> ID：13250025
> 
> 赞同：1
> 
> 时间：2012-11-06T11:26:40.623
> 
> 标签：php

所以我已经能够弄清楚如何使用 gettext 来翻译某种语言，设置 setlocale，我怎样才能弄清楚用户可能想要设置什么语言？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:31:19.387

按此顺序：

1.  问他（例如作为偏好设置和/或使用登录页面）。
    记住用户的选择。
2.  解析 HTTP`Accept-Language`请求标头 ( `$_SERVER['HTTP_ACCEPT_LANGUAGE']`)。
3.  默认为英语（或任何其他适合您的默认值）。

选择对您有意义的第一个选项。始终允许用户轻松切换到另一种语言。通常通过页眉或页脚中的链接。

URL 应包含语言选择。即最终当前 URL 是语言的决定因素，上述选项只是将用户重定向到适当的 URL。您可以为此使用域/子域 ( `example.com`, `example.de`, `example.jp`, `en.example.com`, `de.example.com`, `ja.example.com`) 或使其成为路径的一部分 ( `example.com/en`, `example.com/de`, `example.com/ja`)。

第四种选择是根据用户的 IP 对用户进行地理定位，但我真的不鼓励这样做，因为位置与语言没有太大关系。

# android - 更改视图 onClick 覆盖流 - Android

> ID：13250030
> 
> 赞同：7
> 
> 时间：2012-11-06T11:27:01.323
> 
> 标签：android, view, onclick, coverflow

我正在使用这个 CoverFlow： http: [//www.inter-fuser.com/2010/02/android-coverflow-widget-v2.html](http://www.inter-fuser.com/2010/02/android-coverflow-widget-v2.html)

当我单击一个按钮时，我希望能够更改视图，该按钮是一个后退/前进图标，它将带您到封面流中的上一个/下一个项目。

我稍微修改了封面流，以便我使用 XML 布局。

这是我的 onCreate() 方法：

```
 setContentView(R.layout.main);

 CoverFlow coverFlow = (CoverFlow)findViewById(R.id.coverflow);  

 coverFlow.setAdapter(new ImageAdapter(this));
 ImageAdapter coverImageAdapter =  new ImageAdapter(this);     
 coverFlow.setAdapter(coverImageAdapter);
 coverFlow.setSpacing(-20);
 coverFlow.setSelection(0, true);
 coverFlow.setAnimationDuration(1000);

 tv = (TextView)findViewById(R.id.textView1);

 coverFlow.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        Toast.makeText(getBaseContext(), String.valueOf(arg2), Toast.LENGTH_SHORT).show();
    }
 });

 coverFlow.setOnItemSelectedListener(new OnItemSelectedListener() {
    @Override
    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        tv.setText(String.valueOf(arg2));
    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // Do something
    }
 }); 
```

我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/home_background"
    android:orientation="vertical" >

    <com.demo.app.coverflow.CoverFlow
        android:id="@+id/coverflow"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="39dp"
        android:layout_marginLeft="35dp"
        android:background="@drawable/button_left" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="39dp"
        android:layout_marginRight="35dp"
        android:background="@drawable/button_right" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="55dp"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:text="hello"
        android:textColor="@color/White"
        android:textSize="16dp" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_alignParentRight="true"
        android:layout_marginRight="170dp"
        android:layout_marginTop="15dp"
        android:src="@drawable/unsa_logo" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_marginRight="14dp"
        android:layout_marginTop="23dp"
        android:src="@drawable/pnc_logo" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T17:26:11.310

谢谢 David，我是 Mike 的同事之一，但我从来没有写过一行 Java。我在我们公司的iOS部门工作。我明白你在说什么。你的回答很有帮助，写得很好！

我只需要添加：

```
if ( currentimageposition < coverFlow.getcount()-1) {
     coverFlow.setSelection(currentImagePosition +1, true);
     currentImagePosition = currentImagePosition +1;
} 
```

因为你的 onItemSelected 没有被调用（更新当前标记），我不知道为什么。

但是，`coverFlow.selection( int , bool)`不是动画。它只是加载视图时的 set 方法。例如，`coverFlow.selection(3,true)`将第四张图片设置在封面流的中心。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T11:03:08.457

当我试图找出如何添加动画时，我遇到了这个，它只在一行中完成了所有的事情：

向左走

`coverFlow.onKeyDown(KeyEvent.KEYCODE_DPAD_LEFT, new KeyEvent(0, 0));`

向右走

`coverFlow.onKeyDown(KeyEvent.KEYCODE_DPAD_RIGHT, new KeyEvent(0, 0));`

（只需将每一行添加到各自的按钮 onclick 方法中

希望这可以帮助任何发现自己处于与我相同情况的人:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T22:46:49.033

我希望我能理解你的问题。如果是这样，这是一个想法：

您需要存储一个私有实例变量来跟踪从封面流中显示的图像的当前位置。然后，您从`setOnItemSelectedListener()`继承自 Gallery 的方法更新它。在“后退”或“前进”按钮上，您只需根据按下的按钮设置当前选择 +/- 1。

所以在你的活动中，添加一个实例变量 int 来跟踪位置，比如......

```
public class MyActivity {
    private int currentImagePosition = -1;

    //add the rest of your onCreate code here...
} 
```

接下来，您需要能够更新当前在封面流中显示的图像的当前位置。你可以通过像这样覆盖`setOnItemSelectedListener`（在你的 onCreate 方法中）来做到这一点：

```
coverFlow.setOnItemSelectedListener(new OnItemSelectedListener(){
            @Override
            public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
                currentImagePosition = position; //this will update your current marker
            }
}; 
```

最后，您所要做的就是使用`setSelection( currentImagePosition+1 )`或设置每个按钮的 onclick 侦听器以更改为上一个或下一个图像`setSelection( currentImagePosition-1 )`。顺便问一下，do 的 true 或 false 参数是`setSelection()`什么？我不确定它的作用，所以我会`true`像你最初那样使用。您的`onCreate()`方法现在看起来像：

```
@Override
public void onCreate(Bundle savedInstanceState){
    //insert your other code in onCreate here in this spot.... 

    //add the following lines to your code:
    Button goLeft = (Button) findViewById(R.id.button1);
    goLeft.setOnClickListener( new OnClickListener() {
        @Override
        public void onClick(View v) {
                //go to previous image
                        if( currentImagePosition > 0 ){ //i'm assuming you dont want to go left anymore once at the leftmost image
                             coverFlow.setSelection(currentImagePosition - 1, true);
                        }
        }
    } ) ;

    Button goRight = (Button) findViewById(R.id.button2);
    goRight.setOnClickListener( new OnClickListener() {
        @Override
        public void onClick(View v) {
                //go to previous image
                        if( currentImagePosition < coverFlow.getCount()-1 ){ //i'm assuming you dont want to go left anymore once at the leftmost image
                             coverFlow.setSelection(currentImagePosition + 1, true);
                        }
        }
    } ) ;

} 
```

注意：关于更新位置的部分假设通过阅读 [获取画廊中显示的当前图像的位置](https://stackoverflow.com/questions/5994181/get-the-position-of-the-current-image-displayed-in-gallery)来工作， 所以我希望这能工作。如果没有，至少我试过了：D

祝你好运！！！

# xpages - 有什么方法可以从视图列标题中获取值？

> ID：13250034
> 
> 赞同：0
> 
> 时间：2012-11-06T11:27:12.273
> 
> 标签：xpages, xpages-ssjs

有什么方法可以从视图列标题中获取值？

我有一个视图，我必须仅在表格中显示与选定列标题相关的选定列值。

```
var colNames = new Array(); var Title=sessionScope.dbTitle; 
var vwName =     sessionScope.vwTitle;     
print ("view name"+ vwName);
if ((vwName != null) & (vwName != "Select")) { //var vwName="vwDbConfig";
print (vwName); 
var dbpath=@DbLookup("","vwDbConfig",Title,3);
var serName=@DbLookup("","vwDbConfig",Title,2);
var ArchDb:NotesDatabase = session.getDatabase(serName,dbpath);
//var ArchDb:NotesDatabase= database;
var Archvw:NotesView = ArchDb.getView(vwName);
var names:java.util.Vector = Archvw.getColumnNames(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:30:15.813

答案是：重复两次。最外层重复将遍历绑定视图数据源的视图条目，变量“行”。内部重复将遍历数字集合 - 每个代表选定列的索引，变量“列”。重复将`<td>`使用 binding 渲染内部标签计算文本`row.getColumnValues().get(column)`。如有必要，将其采用适当的数据类型。不要忘记为标题和行添加适当的标签。

# android - 阻止访问Android中的Playstore？

> ID：13250035
> 
> 赞同：0
> 
> 时间：2012-11-06T11:27:12.463
> 
> 标签：android, permissions

我正在尝试构建一个简单的家长控制应用程序。我想知道是否可以设置用户在安装应用程序之前输入密码，无论是从 Play 商店还是从运行 apk 文件。

只是将我指向正确的方向会非常有帮助。现在我对从哪里开始一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:32:06.027

您是否考虑过创建自己的主屏幕启动器。以下帖子对创建自己的启动器有一些建议：

[如何为 Android 创建自定义主屏幕替换应用程序？](https://stackoverflow.com/questions/3666771/how-can-i-create-a-custom-home-screen-replacement-application-for-android)

以下是使用家庭启动器选项实现父母控制的应用程序之一：

[https://play.google.com/store/apps/details?id=com.kiddoware.kidsplace&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5raWRkb3dhcmUua2lkc3BsYWNlIl0](https://play.google.com/store/apps/details?id=com.kiddoware.kidsplace&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5raWRkb3dhcmUua2lkc3BsYWNlIl0)。

# java - Java Swing 中的类似文本的 JPanel 包装

> ID：13250043
> 
> 赞同：2
> 
> 时间：2012-11-06T11:27:37.803
> 
> 标签：java, swing, user-interface

简而言之，我想使用swing实现这种布局：

![在此处输入图像描述](../Images/96a2f1573c4e8e4699a82c6d9aac8931.png)

注意两个主要目标：

*   JPanels 表现为文本，它们被包裹到窗口的**宽度**，并且在空间不足的情况下，它们被包裹到 JPanel 的下一个“行”。

*   没有水平滚动，但存在垂直滚动以提供查看窗口中所有可能元素的访问权限。

**Nick Rippe 在[下面](https://stackoverflow.com/a/13295450)**[提供了一个几乎完成的解决方案，在这里](http://pastebin.com/MmGdf9nG)可以将其视为独立的 java 程序，其中包含我更新的更随机的最内层 textarea 字符串和左对齐。

最后一步是修复 CPanel 中文本区域的每一行顶部对齐：

`((WrapLayout)getLayout()).setAlignOnBaseline( true );`

**完整的解决方案：**

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.border.Border;

public class APanel extends JScrollPane {

    int width = 0;

    public static String getRandomMultilineText() {
        String filler = "";
        int words = (int) (Math.random() * 7) + 1;
        for ( int w = 0 ; w < words ; w++ ) {
            int lettersInWord = (int) (Math.random() * 12) + 1;
            for ( int l = 0 ; l < lettersInWord ; l++ ) {
                filler += "a";
            }
            filler += "\n";
        }
        return filler.trim();
    }

    public APanel() {
        super();

        setAlignmentX( LEFT_ALIGNMENT );
        setAlignmentY( TOP_ALIGNMENT );

        final Box B = Box.createVerticalBox();
        B.setAlignmentX( LEFT_ALIGNMENT );
        B.setAlignmentY( TOP_ALIGNMENT );

        for ( int i = 0 ; i < 4 ; i++ ) {
            B.add( new CPanel() {

                //Important!!! Make sure the width always fits the screen
                public Dimension getPreferredSize() {

                    Dimension result = super.getPreferredSize();
                    result.width = width - 20; // 20 is for the scroll bar width
                    return result;
                }
            } );
        }

        setViewportView( B );

        //Important!!! Need to invalidate the Scroll pane, othewise it
        //doesn't try to lay out when the container is shrunk
        addComponentListener( new ComponentAdapter() {
            public void componentResized( ComponentEvent ce ) {
                width = getWidth();
                B.invalidate();
            }
        } );
    }

    // nothing really very special in this class - mostly here for demonstration
    public static class CPanel extends JPanel {

        public CPanel() {
            super( new WrapLayout( WrapLayout.LEFT ) );
            ((WrapLayout)getLayout()).setAlignOnBaseline( true);

            setOpaque( true );
            setBackground( Color.gray );
            setAlignmentY( TOP_ALIGNMENT );
            setAlignmentX( LEFT_ALIGNMENT );

            int wordGroups = (int) (Math.random() * 14) + 7;

            //Adding test data (TextAreas)
            for ( int i = 0 ; i < wordGroups ; i++ ) {

                JTextArea ta = new JTextArea( getRandomMultilineText() );
                ta.setAlignmentY( TOP_ALIGNMENT );
                ta.setAlignmentX( LEFT_ALIGNMENT);
                add( ta );
            }
            Border bx = BorderFactory.createTitledBorder( "Lovely container" );

            setBorder( bx );
        }
    }

    public static void main( String[] args ) {
        final JFrame frame = new JFrame();
        frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
        frame.add( new APanel() );
        frame.pack();
        frame.setSize( 400 , 300 );
        frame.setLocationRelativeTo( null );
        frame.setVisible( true );
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T18:32:15.047

您的问题是您计算面板 C 的首选大小。这个首选大小需要被覆盖（对于宽度）并包含默认高度。

我已经做了一个演示，所以你可以看到这是如何完成的：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class APanel extends JScrollPane {

    int width = 0;

    public APanel(){
        super();        

        final Box B = Box.createVerticalBox();

        for(int i = 0; i < 4; i++){
            B.add(new CPanel(){

                //Important!!! Make sure the width always fits the screen
                public Dimension getPreferredSize(){
                    Dimension result = super.getPreferredSize();
                    result.width = width - 20; // 20 is for the scroll bar width
                    return result;
                }

            });
        }

        setViewportView(B);

        //Important!!! Need to invalidate the Scroll pane, othewise it
        //doesn't try to lay out when the container is shrunk
        addComponentListener(new ComponentAdapter(){
            public void componentResized(ComponentEvent ce){
                width = getWidth();
                B.invalidate();
            }
        });
    }

    // nothing really very special in this class - mostly here for demonstration
    public static class CPanel extends JPanel{

        //Test Data - not necessary
        static StringBuffer fillerString;
        static {
            fillerString = new StringBuffer();
            int i = 0;
            for(char c = '0'; c < 'z'; c++){
                fillerString.append(c);
                if(i++ %10 == 0){
                    fillerString.append('\n');
                }
            }
        }

        public CPanel(){
            super(new WrapLayout());
            setOpaque(true);
            setBackground(Color.gray);

            //Adding test data (TextAreas)
            for(int i = 0; i < 9; i++){
                JTextArea ta = new JTextArea(fillerString.toString());
                ta.setAlignmentX(LEFT_ALIGNMENT);
                add(ta);
            }

            setBorder(BorderFactory.createTitledBorder("Lovely container"));
        }
    }

    public static void main(String[] args){
        final JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(new APanel());
        frame.pack();
        frame.setSize(400, 300);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T13:54:55.390

给定的解决方案不适用于 JPanel，这是因为基线。要将最小的 JPanel 对齐到顶部，我们必须重写`getBaseLine()`以返回 0。这与`.setAlignOnBaseline( true );`将 JPanel 对齐在每一行的顶部。

# python - 使用 Pandas 读取 CSV 时如何在列中保持前导零？

> ID：13250046
> 
> 赞同：74
> 
> 时间：2012-11-06T11:27:42.290
> 
> 标签：python, pandas, csv, types

我正在使用`read_csv`.

我的主题代码是 6 个数字编码，其中包括出生日期。对于我的一些科目，这会导致代码带有前导零（例如“010816”）。

当我导入 Pandas 时，前导零被去除，列格式为`int64`.

有没有办法将这个列原封不动地导入为字符串？

我尝试为该列使用自定义转换器，但它不起作用 - 似乎自定义转换发生在 Pandas 转换为 int 之前。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2014-11-26T08:38:24.937

正如[Lev Landau的](https://stackoverflow.com/users/2626623/lev-landau)[这个问题/答案](https://stackoverflow.com/questions/16929056/pandas-read-csv-dtype-leading-zeros)中所指出的，可能有一个简单的解决方案来为函数中的某个列使用选项。`converters``read_csv`

```
converters={'column_name': lambda x: str(x)} 
```

您可以参考`read_csv`pandas.io.parsers.read_csv[文档](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.io.parsers.read_csv.html)中的更多功能选项。

假设我有`projects.csv`如下 csv 文件：

```
project_name,project_id
Some Project,000245
Another Project,000478 
```

例如下面的代码正在修剪前导零：

```
import csv
from pandas import read_csv

dataframe = read_csv('projects.csv')
print dataframe 
```

结果：

```
me@ubuntu:~$ python test_dataframe.py 
      project_name  project_id
0     Some Project         245
1  Another Project         478
me@ubuntu:~$ 
```

解决方案代码示例：

```
import csv
from pandas import read_csv

dataframe = read_csv('projects.csv', converters={'project_id': lambda x: str(x)})
print dataframe 
```

要求的结果：

```
me@ubuntu:~$ python test_dataframe.py 
      project_name project_id
0     Some Project     000245
1  Another Project     000478
me@ubuntu:~$ 
```

更新，因为它可以帮助其他人：

要将**所有列**作为 str，可以这样做（来自评论）：

```
pd.read_csv('sample.csv', dtype = str) 
```

要将**大多数或选择性列**作为 str，可以这样做：

```
# lst of column names which needs to be string
lst_str_cols = ['prefix', 'serial']
# use dictionary comprehension to make dict of dtypes
dict_dtypes = {x : 'str'  for x in lst_str_cols}
# use dict on dtypes
pd.read_csv('sample.csv', dtype=dict_dtypes) 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2016-04-29T12:25:28.153

这是一个更短、更强大且完全有效的解决方案：

只需定义变量名称和所需数据类型之间的映射（字典）：

```
dtype_dic= {'subject_id': str, 
            'subject_number' : 'float'} 
```

使用该映射`pd.read_csv()`：

```
df = pd.read_csv(yourdata, dtype = dtype_dic) 
```

瞧！

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2018-12-10T23:22:23.387

如果您有很多列并且您不知道哪些包含可能会丢失的前导零，或者您可能只需要自动化您的代码。您可以执行以下操作：

```
df = pd.read_csv("your_file.csv", nrows=1) # Just take the first row to extract the columns' names
col_str_dic = {column:str for column in list(df)}
df = pd.read_csv("your_file.csv", dtype=col_str_dic) # Now you can read the compete file 
```

你也可以这样做：

```
df = pd.read_csv("your_file.csv", dtype=str) 
```

通过这样做，您将所有列都作为字符串，并且您不会丢失任何前导零。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-11-21T06:27:49.800

你可以做到这一点，适用于所有版本的 Pandas

`pd.read_csv('filename.csv', dtype={'zero_column_name': object})`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-01T09:46:54.037

如果您知道宽度，则可以使用`converters`将数字转换为固定宽度。

例如，如果宽度为 5，则

```
data = pd.read_csv('text.csv', converters={'column1': lambda x: f"{x:05}"}) 
```

这会成功的。它适用于 pandas==0.23.0 和`read_excel`.

需要 Python3.6 或更高版本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-06T11:53:58.833

我认为您不能以您想要的方式指定列类型（如果最近没有更改并且 6 位数字不是可以转换为日期时间的日期）。您可以尝试使用`np.genfromtxt()`并`DataFrame`从那里创建。

编辑：看看 Wes Mckinney 的[博客](http://wesmckinney.com/blog/?p=543)，可能有适合你的东西。似乎有一个新的解析器从`pandas 0.10`11 月到来。

# c++ - 确定类类型

> ID：13250047
> 
> 赞同：2
> 
> 时间：2012-11-06T11:27:42.797
> 
> 标签：c++, templates

我正在尝试遵循 C++ Template The Complete Guide 书中的代码，但它无法使用 Visual Studio 2010 进行编译。

```
template < typename T>
class IsClassType {
private:
  typedef char One;
  typedef struct { char a[2]; } Two;
  template<typename C> static One test(int C::*);
  template<typename C> static Two test(...);

public:
  enum { Yes = sizeof ( IsClassType<T>::test<T>(0)) == 1 };
  enum { No  = !Yes };
};

template < typename T>
void check() {
  if ( IsClassType<T>::Yes ) {
    std::cout << " IsClassType Yes " << std::endl;
  } else {
    std::cout << " IsClassType No " << std::endl;
  }
}

int main() {
  std::cout << "Int:      ";
  check<int>();
} 
```

以下是编译器错误。

```
1>------ Build started: Project: test123, Configuration: Debug Win32 ------
1>  test123.cpp
1>e:\svn\office_expt\test123\test123\test123.cpp(45): error C2783: 'IsClassType<T>::Two IsClassType<T>::test(...)' : could not deduce template argument for 'C'
1>          with
1>          [
1>              T=int
1>          ]
1>          e:\svn\office_expt\test123\test123\test123.cpp(42) : see declaration of 'IsClassType<T>::test'
1>          with
1>          [
1>              T=int
1>          ]
1>          e:\svn\office_expt\test123\test123\test123.cpp(51) : see reference to class template instantiation 'IsClassType<T>' being compiled
1>          with
1>          [
1>              T=int
1>          ]
1>          e:\svn\office_expt\test123\test123\test123.cpp(60) : see reference to function template instantiation 'void check<int>(void)' being compiled
1>e:\svn\office_expt\test123\test123\test123.cpp(45): error C2784: 'IsClassType<T>::One IsClassType<T>::test(int C::* )' : could not deduce template argument for 'int C::* ' from 'int'
1>          with
1>          [
1>              T=int
1>          ]
1>          e:\svn\office_expt\test123\test123\test123.cpp(41) : see declaration of 'IsClassType<T>::test'
1>          with
1>          [
1>              T=int
1>          ]
1>e:\svn\office_expt\test123\test123\test123.cpp(45): error C2056: illegal expression
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:48:11.777

是这一行吗：

```
template<typename C> static Two test(...); 
```

无法从中推断出类型名。我认为它应该是：

```
static Two test(...); 
```

# python - 将 Python 函数的输出从 STDOUT 重定向到 Python 中的变量

> ID：13250050
> 
> 赞同：2
> 
> 时间：2012-11-06T11:27:58.317
> 
> 标签：python, io-redirection

这就是我想要实现的目标

```
 def fun():
    runner = InteractiveConsole()
    while(True):
        code = raw_input()
        code.rstrip('\n')
        # I want to achieve the following
        # By default the output and error of the 'code' is sent to STDOUT and STDERR
        # I want to obtain the output in two variables out and err
        out,err = runner.push(code) 

```

到目前为止，我查看的所有解决方案都使用任一管道发出单独的脚本执行命令（在我的情况下这是不可能的）。还有其他方法可以实现吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T11:38:08.837

```
import StringIO, sys
from contextlib import contextmanager

@contextmanager
def redirected(out=sys.stdout, err=sys.stderr):
    saved = sys.stdout, sys.stderr
    sys.stdout, sys.stderr = out, err
    try:
        yield
    finally:
        sys.stdout, sys.stderr = saved

def fun():
    runner = InteractiveConsole()
    while True:
        out = StringIO.StringIO()
        err = StringIO.StringIO()
        with redirected(out=out, err=err):
            out.flush()
            err.flush()
            code = raw_input()
            code.rstrip('\n')
            # I want to achieve the following
            # By default the output and error of the 'code' is sent to STDOUT and STDERR
            # I want to obtain the output in two variables out and err
            runner.push(code)
            output = out.getvalue()
        print output 
```

在较新版本的 python 中，这个 contezt 管理器是内置的：

```
with contextlib.redirect_stdout(out), contextlib.redirect_stderr(err):
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T11:51:50.367

[InteractiveConsole](http://docs.python.org/2/library/code.html#interactive-console-objects)没有公开任何 API 来设置像对象这样的文件来输出或错误，你需要[猴子补丁](https://stackoverflow.com/questions/5626193/what-is-monkey-patching) `sys.stdout`和`sys.stderr`. 与猴子补丁一样，请注意可能的副作用。在这种情况下，您将用自己的实现替换全局 stdin 和 stdout 文件对象，这也可能会吞噬意外的输出（尤其是在使用任何线程时）。

使用以下内容“开球”输出会稍微安全一些：

```
import sys
import StringIO

class TeeBuffer(object):

    def __init__(self, real):
        self.real = real
        self.buf = StringIO.StringIO()

    def write(self, val):
        self.real.write(val)
        self.buf.write(val)

def fun():
    runner = InteractiveConsole()

    out = TeeBuffer(sys.stdout)
    err = TeeBuffer(sys.stderr)

    sys.stdout = out
    sys.stderr = err

    while(True):
        code = raw_input()
        code.rstrip('\n')

        out, err = runner.push(code)
        outstr = out.buf.getvalue()
        errstr = err.buf.getvalue()

    sys.stdout = out.real
    sys.stderr = err.real 
```

然后您的用户仍然可以看到输出，而您不必担心每次运行时将其打印回正确的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T11:38:55.597

您可以使用上下文管理器[临时重定向标准输出](http://www.python.org/dev/peps/pep-0343/)：

> ```
> @contextmanager
> def stdout_redirected(new_stdout):
>     save_stdout = sys.stdout
>     sys.stdout = new_stdout
>     try:
>         yield None
>     finally:
>         sys.stdout = save_stdout 
> ```
> 
> 使用如下：
> 
> ```
> with opened(filename, "w") as f:
>     with stdout_redirected(f):
>         print "Hello world" 
> ```
> 
> 当然，这不是线程安全的，但也不是手动做同样的舞蹈。在单线程程序中（例如，在脚本中），这是一种流行的做事方式。

* * *

很容易调整它来重定向和`stdout`s ：`stderr``cStringIO`

```
@contextmanager
def out_redirected():
    save_stdout = sys.stdout
    save_stderr = sys.stderr
    sys.stdout = cStringIO.String()
    sys.stderr = cStringIO.String()
    try:
        yield sys.stdout, sys.stderr
    finally:
        sys.stdout = save_stdout
        sys.stderr = save_stderr 
```

你会用这个作为

```
with out_redirected() as out, err:
    runner.push(code)
    out.seek(0)
    print out.read() 
```

# .htaccess - .htaccess 不会重定向到错误页面

> ID：13250053
> 
> 赞同：0
> 
> 时间：2012-11-06T11:28:01.303
> 
> 标签：.htaccess, redirect, error-handling

我希望我的页面重定向到自定义错误 500 页面。但是，当我指定要重定向到的页面时，会出现普通的旧 500 错误页面，而不是我的页面。

我正在使用这条线来做到这一点

```
ErrorDocument 500 /errors/error500.html 
```

但是，如果我指定 HTML 而不是链接，它可以工作

```
ErrorDocument 500 '<div style="width:200px; margin:0 auto; text-align:center">Oooppss <br></div>' 
```

我究竟做错了什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:45:44.793

你的 RewriteBase 基础是什么？

您可以尝试完整路径 /usr/local/web/index.html 吗？

〜K

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:52:42.350

设置 RewriteBase：

```
RewriteBase / 
```

并确保该文件`/errors/error500.html`存在。

# objective-c - NSDictionary 的细化描述

> ID：13250057
> 
> 赞同：1
> 
> 时间：2012-11-06T11:28:16.043
> 
> 标签：objective-c, logging, nsdictionary

我想在控制台日志中查看我的字典的对象类。至于标准`NSObject`子类，我`-(NSString*) description`在类别中覆盖：

```
-(NSString*) description
{
    NSMutableString* desc = [NSMutableString stringWithFormat: @"<%@ 0x%08x>\nobjects count: %ld", [self class], (uint)self, [self count]];
    for (id key in [self allKeys])
        [desc appendFormat: @"\n%@ = %@ (%@)", key, [self objectForKey: key], [[self objectForKey: key] class]];
    return desc;
} 
```

它有效，但仅适用于顶级`NSDictionary`对象（如果该对象在子项中有字典，则它们将被记录绕过`description`方法）。所以`NSDictionary`以某种方式打印它的子对象而不调用`description`它们......

有没有办法通过我的`description`方法记录这些儿童词典？

PS：在实际情况下，我想在字典中找到一个无法保存到`plist`. 也许还有另一种解决方案，我也会很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:42:54.633

您可以编写一个递归`description`方法：

```
// Private Methods
@interface MyClass ()
- (NSString *)_description:(id)object;
@end 
```

...

```
- (NSString *)_description:(id)object
{
    if ([object isKindOfClass:[NSDictionary class]])
    {
        NSDictionary *dict = (NSDictionary *)object;
        NSMutableString *desc = [NSMutableString stringWithFormat: @"<%@ %p>\nobjects count: %ld", [dict class], dict, [dict count]];
        for (id key in [dict allKeys])
        {
            [desc appendFormat: @"\n%@ = %@ (%@)", key, [self _description:[objectForKey: key]], [[self objectForKey: key] class]];
            return desc;
        }
    }
    else
    {
        return [(NSObject *)object description];
    }
}

- (NSString *)description
{
    return [self _description:self];
} 
```

您可能希望传递一个递增的缩进计数器，以便更好地格式化子对象，但您应该明白这一点。

# iphone - 在 iPad 上的 ModalView (FormSheet) 中隐藏键盘

> ID：13250058
> 
> 赞同：2
> 
> 时间：2012-11-06T11:28:21.450
> 
> 标签：iphone, ios, objective-c, keyboard

我试图在具有 FormSheet 样式的模态视图上隐藏 iPad 键盘。我试图辞职FirstResponder，但没有任何反应。这是一个错误还是根本不起作用？

此致

编辑

```
-(void)hideKeyboards 
{
 [emailField resignFirstResponder];
 [passwordField resignFirstResponder];
 [confirmPasswordField resignFirstResponder];
} 

-(IBAction)emailFieldDone:(id)sender
{
 [self hideKeyboards];
} 

-(IBAction)passwordFieldDone:(id)sender
{
 [self hideKeyboards];
} 

-(IBAction)confirmPasswordFieldDone:(id)sender
{ 
 [self hideKeyboards];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T12:41:29.717

如下所示覆盖`disablesAutomaticKeyboardDismissal`返回 NO 解决了我的相同问题。您需要覆盖`disablesAutomaticKeyboardDismissal`of `UINavigationController`，而不是自己的视图控制器来解决此问题。也许使用类别是个好主意：

```
- (BOOL)disablesAutomaticKeyboardDismissal {
    return NO;
} 
```

此外，如果您想获得详细说明，请检查此[iPad 键盘是否会关闭，如果模态视图控制器演示样式是 UIModalPresentationFormSheet问题。](https://stackoverflow.com/questions/3372333/ipad-keyboard-will-not-dismiss-if-modal-view-controller-presentation-style-is-ui)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T12:40:01.977

如果您使用的是 textview，请尝试此操作

```
 Textviewobjectname.editable = NO; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:32:31.987

将代表设置为所有文本字段

```
 textField.delegate=self; 
```

# javascript - Javascript /jQuery：我怎样才能让这个 AJAX 请求运行得更快？

> ID：13250060
> 
> 赞同：0
> 
> 时间：2012-11-06T11:28:24.603
> 
> 标签：javascript, jquery, ajax

我有这个连接到`newsletter-signup.html`文件的 AJAX 请求，然后在返回的`data`变量中搜索字符串“form-success”。*此字符串通过`if`语句中的 (Django) 模板应用，以标记表单成功。*

这是搜索整个数据的片段：

```
if (data.indexOf('form-success') > 0) { 
```

有没有更快的方法来搜索这些数据？或者也许是一个更好的方法来确定返回的数据是否成功注册？

在此先感谢您的帮助。这是完整的代码：

```
 $.ajax({ url: '/newsletter-signup', type: 'GET', data: {email: emailVal},  async: false,
        success: function(data){
            // Returning 'form-success' in our data string indicates the sign up worked
            if (data.indexOf('form-success') > 0) {
                // open the success message in a modal window
                happyModal.open({ content: thankYouContent });
            } else {
                // if not successful re-load the contents, firing our standard error message
                theBtn.removeClass('disabled');
                $('.login-panel').load('/newsletter-signup','email=' + encodeURIComponent(emailVal), function () {
                });
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:33:22.813

我非常怀疑您在`data.indexOf`通话期间是否看到任何明显的延迟。您感觉到的延迟可能是 ajax 调用本身，它需要的时间与您的网络占用的时间一样长。您无法在代码中做任何事情来加快速度。

您还使用 进行通话`async: false`，这意味着在大多数情况下，您在通话进行时锁定了浏览器，这不会带来愉快的用户体验，并且可能会强调延迟。我强烈建议允许请求与某种“片刻”显示异步，允许用户在等待时使用其他选项卡等。

（旁注：请注意，`async: false`它将在 jQuery 2.0 中消失。）

# java - 在 JEditorPane 中显示 HTML 文件

> ID：13250061
> 
> 赞同：4
> 
> 时间：2012-11-06T11:28:27.073
> 
> 标签：java, html, swing, awt, jeditorpane

我正在开发一个 Swing 应用程序，我必须在其中显示 HTML 文件。

我正在使用它来`JEditorPane`控制它。它显示 HTML 文件的内容，但格式与实际 HTML 文件中的原始格式不同。

`JEditorPane`不支持`object`元素。而不是加载目标文件，它只是显示`?`.

Swing 中是否有任何其他内置控件来浏览 HTML 文件而不是`JEditorPane`？

我正在使用以下代码：

```
JEditorPane HtmlPane= new JEditorPane();
File file1= new File("path of the file");
HtmlPane.setContentType("text/html");
HtmlPane.setEditable(false);
HtmlPane.setPage(file1.toURI().toURL());
JScrollPane jsp=new JScrollPane(HtmlPane); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T14:45:50.207

在核心 Java 中更高级的 HTML 呈现的最佳选择是使用基于 JavaFX 的`WebView`组件，如[将 HTML 内容添加到 JavaFX 应用程序](http://docs.oracle.com/javafx/2/webview/jfxpub-webview.htm)中所述。它支持 HTML5，但我并没有真正玩过它，所以我不能说它渲染 HTML 的效果如何。

请注意，Java FX 实际上是 Swing 的替代品，但 AFAIU Java FX 组件可以嵌入到 Swing GUI 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T14:43:44.393

[*Swing 组件*](http://download.oracle.com/javase/tutorial/uiswing/components/html.html)中对 HTML 的支持[仅限](http://download.oracle.com/javase/6/docs/api/javax/swing/text/html/HTMLEditorKit.html)于[3.2](http://www.w3.org/TR/REC-html32)，早于`<object>`标签。您也许可以将 a与 .结合使用`HyperlinkListener`，如图[所示](http://www.java2s.com/Tutorial/Java/0240__Swing/HyperlinkListenerExample.htm)[`Desktop#browse()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Desktop.html#browse%28java.net.URI%29)。另请参阅此[示例](https://stackoverflow.com/a/12827643/230513)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-06-08T03:41:39.767

要从本地文件呈现 html 内容，本地文件的扩展名必须是“.html”。JEdi​​tor 窗格将呈现“content.html”，但不会呈现“content.txt”。

# vbscript - 删除文本末尾的最后 16 位数字

> ID：13250062
> 
> 赞同：-1
> 
> 时间：2012-11-06T11:28:29.977
> 
> 标签：vbscript

我有一个看起来像这样的字符串

```
[APPLE PIE] Sei Shoujo Sentai Lakers 3 Battle Team Lakers 3 (100% FULL-PIC)_20121104_032834 
```

我想删除字符串末尾的数字。基本上是字符串末尾的 16 位数字。这是我到目前为止写的代码

```
txt="[APPLE PIE] Sei Shoujo Sentai Lakers 3 Battle Team Lakers 3 (100% FULL-PIC)_20121104_032834"
alert(Left(txt,75)) 
```

问题是字符串会有所不同，因此每个字符串都会有不同数量的字符。那么如何在 vbscript 中删除字符串末尾的数字呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T11:30:11.850

试试这个

```
Mid(txt,1,len(txt)-16) 
```

无论您的字符串 TXT 的长度如何，最后 16 个字符都不会被占用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:33:06.277

只需使用 LEN 计算字符串长度并减去要删除的字符数量：

```
Left(txt,LEN(txt) - 16) 
```

# php - 如何将数字添加到mysql中的当前值（同时多次）？

> ID：13250066
> 
> 赞同：12
> 
> 时间：2012-11-06T11:28:40.927
> 
> 标签：php, mysql

我正在开发一个积分系统，该系统将根据他们的积分为我网站上的用户提供排名，每当有人检查他的个人资料页面时，我都会给用户 +1 分。假设用户有 200 分，在同一时间有 10 个用户检查他的个人资料页面，据我了解，代码将得到 200 加 1，如果 10 个用户同时在，结果将是 200 + 1 = 201 ，数据库将如何运作？

从逻辑上讲，它只会计算一次访问，因为用户检查配置文件的时间是 200，所以当 MYSQL 更新发生时，它总是 201。我正确吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-06T11:33:28.510

如果您选择现有的点数，在客户端中添加一个，然后将更新后的值写回数据库，那么您就有了[竞态条件](http://en.wikipedia.org/wiki/Race_condition)。正如您所指出的，某些观看次数可能不会被计算在内。

相反，您应该尝试使用原子更新并避免该问题：

```
UPDATE user SET points = points + 1 WHERE id = 42 
```

* * *

另一种方法是使用`SELECT ... FOR UPDATE`. 从[文档](http://dev.mysql.com/doc/refman/5.6/en/select.html)中：

> 如果将 FOR UPDATE 与使用页锁或行锁的存储引擎一起使用，则查询检查的行将被写锁定，直到当前事务结束。使用 LOCK IN SHARE MODE 设置一个共享锁，允许其他事务读取检查的行，但不能更新或删除它们。请参阅第 14.2.8.3 节，“SELECT ... FOR UPDATE 和 SELECT ... LOCK IN SHARE MODE 锁定读取”</p>

# php - 允许用户将 MP3 上传到 Amazon S3

> ID：13250067
> 
> 赞同：6
> 
> 时间：2012-11-06T11:28:52.110
> 
> 标签：php, amazon-s3

我正在开发一个用户可以上传播客的网站。播客将是 MP3 文件，并存储在 Amazon S3 存储桶中。

这个的正常流程是什么？我用谷歌搜索过，但任何与文件上传相关的文章都倾向于使用亚马逊客户端库，理想情况下，由于超时，我不想使用 PHP（我正在使用 LAMP 堆栈）上传 MP3 文件，文件尺寸限制等

有没有解决的办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T14:07:49.340

Amazon S3 支持[直接上传](http://www.ioncannon.net/programming/1539/direct-browser-uploading-amazon-s3-cors-fileapi-xhr2-and-signed-puts/)。这可能是这里的一个选项。对于 PHP 实现，[请查看这篇文章](http://blog.ianbeyer.com/2012/01/19/php-direct-upload-s3/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:37:37.847

After lots of Googling, and back-and-forth on both the GitHub repository and Amazon documentation for the new PHP SDK, I’ve got a solution using Amazon’s new PHP SDK to generate the form fields, and Uploadify to actually upload the file directly to Amazon, bypassing my server. The code looks a little like this:

```
<?php
$bucket = (string) $container['config']->images->amazon->bucket;
$options = array(
    'acl' => CannedAcl::PUBLIC_READ,
    'Content-Type' => 'audio/mpeg',
    'key' => 'audio/a-test-podcast.mp3',
    'success_action_redirect' => (string) $container['config']->main->base_url . 'upload/success/',
    'success_action_status' => 201,
    'filename' => '^'
);
$postObject = new PostObject($container['amazon_s3'], $bucket, $options);
$postObject->prepareData();

$formAttributes = $postObject->getFormAttributes();
$formInputs = $postObject->getFormInputs();

$uploadPath = $formAttributes['action'];
?>
<script>
    (function($) {
        $('#podcast').uploadify({
            'buttonClass': 'button',
            'buttonText': 'Upload',
            'formData': <?php echo json_encode($formInputs); ?>,
            'fileObjName': 'file',
            'fileTypeExts': '*.mp3',
            'height': 36,
            'multi': false,
            'onUploadError': function(file, errorCode, errorMsg, errorString) {
                console.log('onUploadError', file, errorCode, errorMsg, errorString);
            },
            'onUploadSuccess': function(file, data, response) {
                console.log('onUploadSuccess', file, data, response);
            },
            'swf': '/assets/cms/swf/uploadify.swf',
            'uploader': '<?php echo $uploadPath; ?>',
            'width': 120
        });
    })(jQuery);
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T10:33:46.973

对 S3 的请求必须使用有效的密钥签名，并且始终包含授权。从理论上讲，您可以在客户端使用 JavaScript 执行此操作，但如果您不想将密钥公开给客户端，这将涉及 Ajax 调用来签署您的标头。另一个问题是浏览器兼容性。您必须使用文件切片并计算所有现代浏览器中都可用的更大文件的校验和。

更简单的方法是使用 PHP 或任何其他服务器端脚本语言的服务器端解决方案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T10:04:35.897

尽管您使用 php，但您不必担心文件大小，您可以在文件中配置上传文件大小限制和执行内存限制，`php.ini`而 s3 的 php 库将减少您的工作量。您可以从[本指南](http://docs.amazonwebservices.com/awssdkdocsphp2/latest/gettingstartedguide/welcome.html)开始。

# java - 需要一种围绕地图连续循环/迭代的方法

> ID：13250073
> 
> 赞同：1
> 
> 时间：2012-11-06T11:29:07.203
> 
> 标签：java, loops, continuous

我正在用 java 构建一个游戏，我有一个 Player 对象的“地图”。我有一个名为 endOfTurn 的方法，当玩家想要完成他们的回合时调用它，它将“currentPlayerTurn”字段设置为地图中的下一个玩家。但是，一旦我到达地图的尽头，我希望它回到地图中的第一个玩家并一次又一次地循环。有没有办法做到这一点？是的，玩家数据结构确实需要是一张地图！

```
public class Game {

private Map<String,Player> players;
private Player currentPlayerTurn;

public boolean EndOfTurn(Player currentPlayerTurn) {
    //need to set this.currentPlayerTurn to the next player in the Map

} 
```

我已经研究过使用迭代器，但这似乎没有重置功能或“循环”模式。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:32:06.387

通常，您会有一个外循环，它遍历调用此方法的播放器。

```
while(playingGame) {
   for(Player player: players.values()) {
      player.takeTurn();
      endOfTurn(player);
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T11:31:45.990

我认为您最简单的选择是：

```
while (!done) {
   // iterate once around your list
} 
```

如果您的球员需要被关押，`Map`那么我不会通过引入新结构来使事情复杂化。

您可能要考虑的是，如果玩家再转一圈会发生什么（*这会发生吗？*）。如果是这样，迭代器将不会自然而然地适合您，也许您需要某种`TurnManager`对象来选择下一个要离开的玩家。我不会尝试将游戏的行为与保存玩家的数据结构联系起来，而是将其抽象为一个明确知道如何处理的组件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T11:46:26.510

您可以创建类似于链表节点的结构。如果一轮结束，endOfTurn() 返回 true，否则返回 false。

```
 Player {
    String name;
    boolean dealer;
    Payer nextPlayer;

    // constructor, getters and setters for fields

    }

    public class Game {

    private Map<String,Player> players;
    private Player currentPlayerTurn;

    public boolean endOfTurn(Player currentPlayerTurn) {
       currentPlayerTurn = currentPlayerTurn.getNextPlayer();

       if(currentPlayerTurn.isDealer())
          return true;
        else
          return false;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T11:35:08.550

您始终可以从 Map 创建一个新的迭代器。我的意思是，“重置”迭代器的方式是创建一个新的。

```
Iterator<Map.Entry<String,Player>> it = players.entrySet().iterator();

//...

if(!it.hasNext())
    it=players.entrySet().iterator() 
```

让我试试...

```
public class Game {

    private Map<String,Player> players;
    private Player currentPlayerTurn;
    private Iterator<Map.Entry<String,Player>> itPlayers;

    public boolean EndOfTurn(Player currentPlayerTurn) {
         if(itPlayers == null || !itPlayers.hasNext()){
           itPlayers=players.entrySet().iterator();   
         }
         currentPlayerTurn=itPlayers.next().getValue();
    }

} 
```

# c# - 我们如何从 xml 文件中获取所有子项的值

> ID：13250083
> 
> 赞同：2
> 
> 时间：2012-11-06T11:29:19.630
> 
> 标签：c#, xml

这是一个 XML 文件：

```
<AppBuilderProject>
    <Name>Project1</Name>
    <AppBuilderForms>
        <AppBuilderForm>
            <Title>Form1</Title>
            <AppBuilderFormObjects>
                <CheckMarkObject>
                    <Name>subscribeCheckmark</Name>
                    <Label>Subscribe</Label>
                    <IsChecked>1</IsChecked>
                </CheckMarkObject>
                <DateTimeObject>
                    <Name>dateOfBirth</Name>
                    <Label>Date of Birth</Label>
                </DateTimeObject>
                <LocationObject>
                    <Name>mapLocation</Name>
                    <Label>Any Location</Label>
                    <Longitude>1.23453</Longitude>
                    <Latitude>1.2345</Latitude>
                </LocationObject>
                <SwitchObject>
                    <Name>newsletterSwitch</Name>
                    <Label>Receive Newsletter</Label>
                    <IsChecked>1</IsChecked>
                </SwitchObject>
                <TextViewObject>
                    <Name>detailTextView</Name>
                    <Value>Details</Value>
                </TextViewObject>
                <TextFieldObject>
                    <Name>nameTextField</Name>
                    <Label>Name</Label>
                    <Value>name</Value>
                </TextFieldObject>
                <PhotoPickerObject>
                    <Name>photoPicker</Name>
                    <Label>Pick Photo</Label>
                </PhotoPickerObject>
                <SpinWheelPickerObject>
                    <Name>comboBox</Name>
                    <Label>Countries</Label>
                    <SpinWheelPickerColumns>
                        <SpinWheelPickerColumnObject>
                            <Name>name</Name>
                            <Label>Name</Label>
                            <SpinWheelPickerItems>
                                <SpinWheelPickerItemObject>
                                    <Name>Pakistan</Name>
                                    <Label>Pakistan</Label>
                                </SpinWheelPickerItemObject>
                                <SpinWheelPickerItemObject>
                                    <Name>United Arab Emirates</Name>
                                    <Label>United Arab Emirates</Label>
                                </SpinWheelPickerItemObject>
                            </SpinWheelPickerItems>
                        </SpinWheelPickerColumnObject>
                        <SpinWheelPickerColumnObject>
                            <Name>code</Name>
                            <Label>Code</Label>
                            <SpinWheelPickerItems>
                                <SpinWheelPickerItemObject>
                                    <Name>+92</Name>
                                    <Label>+92</Label>
                                </SpinWheelPickerItemObject>
                                <SpinWheelPickerItemObject>
                                    <Name>+971</Name>
                                    <Label>+971</Label>
                                </SpinWheelPickerItemObject>
                            </SpinWheelPickerItems>
                        </SpinWheelPickerColumnObject>
                    </SpinWheelPickerColumns>
                </SpinWheelPickerObject>
            </AppBuilderFormObjects>
        </AppBuilderForm>
    </AppBuilderForms>
</AppBuilderProject> 
```

我想获得所有的价值。我使用这段代码在我的 XML 中查找所有值：

此代码仅读取根节点：

```
XmlDocument DOC = new XmlDocument();
//  DOC.RemoveAll();
DOC.Load("C:\\Users\\DIGITEL EYE SYSTEM\\Desktop\\response.xml");
XmlNode firstnode = DOC.SelectSingleNode("AppBuilderProject");
Project.Name = firstnode["Name"].InnerText;
XmlNode secondnode = DOC.SelectSingleNode("AppBuilderProject/AppBuilderForm");
XmlNodeList controlingnode = secondnode.SelectNodes("Title");

XmlNodeList ParentNode = DOC.GetElementsByTagName("AppBuilderProject");

foreach (XmlNode AllNodes in ParentNode)
{
    Project.Name = AllNodes["Name"].InnerText;

    if (AllNodes.ChildNodes == DOC.GetElementsByTagName("AppBuilderForms"))
    {
        //  Project.Forms = DOC.GetElementsByTagName("");
        // String sb = AllNodes["Forms"].InnerText;
    }
    XmlNodeList checkmarknode = DOC.GetElementsByTagName("CheckMarkObject");

    if (checkmarknode.Item(0).InnerText == "Name")
    {
        checkmark.Name = checkmarknode[0].InnerText;
    }
    else if (checkmarknode.Item(1).InnerText == "Label")
    {
        checkmark.Label = checkmarknode[1].InnerText;
    }
    // if (AllNodes.ChildNodes == DOC.GetElementsByTagName("CheckMarkObject"))
    //  {
    //     checkmark.Name = AllNodes["Name"].InnerText;

    //   checkmark.Label = AllNodes["Label"].InnerText;
    // checkmark.IsChecked = AllNodes["IsChecked"].InnerText;
    // }

    if (ParentNode == DOC.GetElementsByTagName("DateTimeObject"))
    {
        DateTime.Name = AllNodes["Name"].InnerText;
        DateTime.Label = AllNodes["Label"].InnerText;
    }

    if (ParentNode == DOC.GetElementsByTagName("LocationObject"))
    {
        Location.Name = AllNodes["Name"].InnerText;
        Location.Label = AllNodes["Label"].InnerText;
        Location.Longitude = AllNodes["Longitude"].InnerText;
        Location.Latitude = AllNodes["Latitude"].InnerText;
    }

    if (ParentNode == DOC.GetElementsByTagName("SwitchObject"))
    {
        Switch.Name = AllNodes["Name"].InnerText;
        Switch.Label = AllNodes["Label"].InnerText;
        // Switch.IsChecked = AllNodes["IsChecked"].InnerText;
    }

    if (ParentNode == DOC.GetElementsByTagName("TextViewObject"))
    {
        TextView.Name = AllNodes["Name"].InnerText;
        TextView.Value = AllNodes["Value"].InnerText;
    }

    if (ParentNode == DOC.GetElementsByTagName("TextFieldObject"))
    {
        TextField.Name = AllNodes["Name"].InnerText;
        TextField.Value = AllNodes["Value"].InnerText;
    }

    if (ParentNode == DOC.GetElementsByTagName("PhotoPickerObject"))
    {
        PhotoPicker.Name = AllNodes["Name"].InnerText;
        PhotoPicker.Label = AllNodes["Label"].InnerText;
    }

    if (ParentNode == DOC.GetElementsByTagName("SpinWheelPickerObject"))
    {
        SpinWheelPicker.Name = AllNodes["Name"].InnerText;
        SpinWheelPicker.Label = AllNodes["Label"].InnerText;
        // SpinWheelPicker.Columns = AllNodes["Columns"].InnerText;
    } 
```

但它只获得根节点值，所以请告诉解决方案。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:38:14.897

使用`LINQ2XML`..它的方式太简单太酷了

它完全替代了其他`xml`api

```
XElement doc=XElement.Load("yourXML.xml");
doc.Descendants("AppBuilderProject").Element("Name").Value;//name value
doc.Descendants("AppBuilderForms").Descendants("AppBuilderForm").Element("Title").Value;//title value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T11:38:32.283

通常，您不希望通过将所有元素视为同一层次结构来浏览 XmlDocument - Xml 具有层次结构，其中可以包含复杂的关系，如 1:N、嵌套等。

所以不要像循环和编写代码一样

```
 if (ParentNode == DOC.GetElementsByTagName("SpinWheelPickerObject"))
 {
   SpinWheelPicker.Name = AllNodes["Name"].InnerText;
   ...
 } 
```

使用`XmlDocument`/ `XmlNode`，最好使用 Xpath 导航到您需要的元素/属性，例如

```
 SpinWheelPicker.Name = 
     DOC.SelectSingleNode("/AppBuilderProject//SpinWheelPickerObject/Name")
        .InnerText; 
```

**编辑**

要遍历 1:N 关系，您应该使用`foreach`来遍历集合，例如

```
foreach (XmlNode node in DOC.SelectNodes("//SpinWheelPickerItemObject"))
{
   System.Diagnostics.Trace.WriteLine(node.InnerText);
} 
```

在这里，我们还使用`//`快捷方式来避免遍历层次结构。但是请注意，这会忽略层次结构 - 即`SpinWheelPickerItemObject`，将包含在文档中任何位置命名的任何元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T11:36:37.483

使用[`XDocument`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)/[`XElement`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.aspx)它会更容易，你也可以很容易地做 linq ..

```
XElement xmlObject = XElement.Load(fileName);
var xDoc = xmlObject.Descendants("AppBuilderProject") //will return you all the elements 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T11:37:25.710

这个 LINQ 可以完成这项工作。这个想法是获取所有 XmlNode 并检查其是否为 Text 类型。

```
using (var fs = new FileStream("somedata.xml", FileMode.Open))
{
    var Values = XElement.Load(fs).DescendantNodes()
                         .Where(item => item.NodeType == XmlNodeType.Text);
} 
```

# video-streaming - 服务器 A 上的 red5，服务器 B 上的视频文件？

> ID：13250085
> 
> 赞同：0
> 
> 时间：2012-11-06T11:29:28.600
> 
> 标签：video-streaming, red5

是否可以安装 red5**`server A`**并将我的 .flv 视频文件上传到**`server B`**，然后我可以使用服务器 A 流式传输视频吗？

* * *

感谢您的回复。但考虑到使用 2 倍的带宽，我想我应该考虑另一种解决方案。我完全错过了这个事实！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:37:18.170

如果服务器之间的连接速度足够快，您可以通过文件共享（NFS 或 SMB）轻松实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:37:35.040

正如@onon15 所建议的那样，您当然可以简单地在两台服务器上安装一个网络驱动器，或者制作一些 RSync 脚本。

另一种可能性是使用 Red5 的聚类。您应该搜索：“Red5 Edge/Orion clustering”以在网上找到有关它的更多信息。

简而言之，Edge/Orion 集群在集群的节点（边缘）上使用 RTMPClient 来提供到中央服务器（Orion）的连接。所以你也可以称之为主/从集群。然后，奴隶本身可以连接多个用户，但对于主人来说，它看起来就像一个单一的连接（至少恕我直言）。

塞巴斯蒂安

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T13:21:59.553

是的，您可以，但是在不同的服务器上托管服务器和视频会比在同一服务器上托管视频服务器和视频文件时产生 2 倍的带宽。

# c# - 没有 Thread.sleep 或在 jquery 中给予一些时间的锁定屏幕

> ID：13250093
> 
> 赞同：0
> 
> 时间：2012-11-06T11:30:04.980
> 
> 标签：c#, jquery, asp.net

大家好，我有一个要求，我必须在执行任何操作时显示加载图像。`Thread.Sleep`我浏览了几篇博客和文章，但他们都在做一些事情，比如在 Jquery 或使用的脚本或使用方法中给予一些时间。

没有这两个可以吗。意味着我不知道加载页面需要多少时间，除非页面被加载，否则我想为用户显示等待屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:39:35.273

您可以在开始某些操作时显示加载图像，并在完成操作时将其删除：

```
$("#loading-image").show();
pendingActions ++;
$.get({...,success:function(){
  pendingActions --;
  if(!pendingActions){
    $("#loading-image").hide()
  }
}}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:41:29.510

您可以使用

```
$(document).load(function() { 

}); 
```

来自 jQuery 库。它一直等到所有 Web 内容都加载完毕，然后执行函数内的代码。我会构建页面，并在 html 中需要它的任何位置显示等待屏幕，然后一旦加载了所有内容（包括图像），我可以使用 java 脚本从 html 中删除等待屏幕`$('.Screen').hide();` 这样用户没有看到每次弹出一个图像的过程，而是看到等待屏幕，然后突然它们都消失了，图像可见。

# java - 如何使用 apachi-POI 在 Excel 中将单元格设为只读

> ID：13250095
> 
> 赞同：2
> 
> 时间：2012-11-06T11:30:11.373
> 
> 标签：java, excel, apache-poi, vba

我有一个下拉列表包含一些选项，例如两个单元格。我需要的是关于所选选项将一个单元格变为可编辑，另一个变为只读，反之亦然。

```
FileOutputStream fos;
try {
    fos = new FileOutputStream("D:\\POIXls.xls");
    Workbook workbook = new XSSFWorkbook();
    Sheet sheet = workbook.createSheet("new Sheet");
    DataValidationHelper dvHelper = sheet.getDataValidationHelper();
    DataValidationConstraint dvConstraint = 
                  dvHelper.createExplicitListConstraint(new String[] { "cell 1 edit","cell 2 edit"});
   CellRangeAddressList addressList = new CellRangeAddressList(0, 2, 0, 0);
   DataValidation validation = dvHelper.createValidation(dvConstraint, addressList);

   if (validation instanceof XSSFDataValidation) {
       validation.setSuppressDropDownArrow(true);
       validation.setShowErrorBox(true);
   } else {
       validation.setSuppressDropDownArrow(false);
   }

   sheet.addValidationData(validation);
   workbook.write(fos);
   fos.flush();
   fos.close();
}catch(Exception e){//catch code} 
```

我需要知道如何根据用户的选择使该 xls 文件使这些单元格可编辑/只读。VB 代码也可能有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T11:37:54.840

获取`cell`您想要的并设置您的单元格样式

```
CellStyle unlockedCellStyle = wb.createCellStyle();
unlockedCellStyle.setLocked(true); //true or false based on the cell.
cell.setCellStyle(unlockedCellStyle); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:27:46.160

好的，我想我已经找到了我想要的东西。使用以下 VBA 代码：

```
Private Sub Worksheet_Change(ByVal Target As Range){
    If Range(ActiveCell.Address).Validation.Parent = "33" Then
        ActiveSheet.Unprotect
        Range("$B$" & ActiveCell.Row).Locked = True
        Range("$C$" & ActiveCell.Row).Locked = False
        ActiveSheet.Protect
    ElseIf Range(ActiveCell.Address).Validation.Parent = "23" Then
        ActiveSheet.Unprotect
        MsgBox ActiveCell.Address
        Range("$C$" & ActiveCell.Row).Locked = True
        Range("$B$" & ActiveCell.Row).Locked = False
        ActiveSheet.Protect
    Else
        ActiveSheet.Unprotect
        Range("$C$" & ActiveCell.Row).Locked = True
        Range("$B$" & ActiveCell.Row).Locked = True
        ActiveSheet.Protect
    End If
End Sub 
```

感谢每个试图帮助的人:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-04-09T09:30:18.573

```
//To make specific cells ReadOnly when using NPOI:
//Make the whole sheet as protected first and then unlock the desired cells.

//Creating a workbook. workbook is a variable name
HSSFWorkbook workbook = new HSSFWorkbook();

//adding a sheet. sheet1 is a variable name 
HSSFSheet sheet = (HSSFSheet)workbook.CreateSheet("sheet1");

//Creating column styling. storeCellStyle is a variable name
ICellStyle storeCellStyle = workbook.CreateCellStyle(); 

//Locking the whole sheet

sheet.ProtectSheet("password"); 

//giving islocked as false,this property will be used to make the cells editable while rest of the cells will remain read only
storeCellStyle.IsLocked=false; 

//Now applying the style while creating the cells in the sheet
ICell headerSheet21 = headerRowSheet2.CreateCell(0); //headerSheet21 is variable

headerSheet21.SetCellValue("Employee_Id"); //cell value

headerSheet21.CellStyle = storeCellStyle; 
```

这将使该单元格可编辑，而未应用此属性的其余单元格将保持锁定或只读状态。在编辑密码promtp 将出现在excel 中。用户可以使用`password="password"`或任何设置来解锁它们。

[截屏](https://i.stack.imgur.com/1aFK8.jpg)

# c++ - 用 C++ 格式化每个媒体的程序

> ID：13250097
> 
> 赞同：1
> 
> 时间：2012-11-06T11:30:16.557
> 
> 标签：c++, windows-xp, format, drive

**问题：**
我正在尝试编写一个格式化任何类型媒体的程序。到目前为止，我已经成功地格式化了硬盘分区、闪存、SDRAM、RDX。
但是我需要格式化最后一种类型的媒体（DVD-RAM）。我的程序无法格式化此媒体。
我正在`FormatEx`使用`fmifs.dll`. 我完全不知道如何使用这个函数，除了它的名字和它驻留在`fmifs.dll`. [在这个](https://stackoverflow.com/a/13252858/279982)帮助下，我设法找到了一个使用这个库的[简单程序。](http://pete.akeo.ie/2012/04/chkdskx-and-formatx-by-mark-russinovich.html)然而，它仍然没有提供有关如何使用它的完整信息。

**我已经尝试过：**
我正在寻找关于`FormatEx`、它的参数以及每个参数可以取什么值的完整文档。
我尝试在谷歌和 MSDN 上搜索。[这](http://msdn.microsoft.com/en-us/library/windows/desktop/aa819439%28v=vs.85%29.aspx)就是我发现的。首先，这不是我正在使用的功能。但是即使把它放在一边，也没有足够的信息来说明如何使用这个函数（比如要使用哪些头文件/库）。

**编辑：**如果有替代品请告诉
我，我不必使用。`FormatEx`

**编辑 2：**
在进一步测试期间，我注意到如果 DVD-RAM 的初始文件系统是“FAT32”，我可以格式化它。但是，如果它是任何“UDF”修订格式失败。
此外，快速格式化会立即失败，而常规格式化会在 90+ % 的进度后失败。但是当我检查磁盘内容后，一切都是一样的。好像格式甚至没有尝试。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T14:14:56.733

它是由提供源代码的 Mark Russinovich (Sysinternals) 编写的，如果你用谷歌搜索*fmifs russinovich* ，就会有很多副本。

[http://pete.akeo.ie/2012/04/chkdskx-and-formatx-by-mark-russinovich.html](http://pete.akeo.ie/2012/04/chkdskx-and-formatx-by-mark-russinovich.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T10:58:38.693

似乎您唯一的绊脚石是格式化为 UDF。fmfifs.dll 中的 FormatEx 是一个 shim（或帮助程序）实用程序，它作为 Microsoft 可安装文件系统基础结构 ( [IFS](http://msdn.microsoft.com/en-us/library/windows/hardware/ff548137%28v=vs.85%29.aspx) ) 的一部分将格式化任务分派给较低级别​​的驱动程序。IFS 基本上允许微软添加对新文件系统的支持。

对于 UDF，对应的库是 UUDF.DLL（此约定适用于其他文件系统，例如 NTFS 将由 UNTFS.DLL、UFAT.DLL 等处理）。您的 Windows XP 系统上是否存在此 dll？

查看使用depends.exe 导出的UUDF.dll，我看到了对各种功能的支持，包括臭名昭著的FormatEx。FormatEx 似乎是 cdecl 并且（查看反汇编）需要 16 个字节的参数（可能是 4 个参数）。虽然能够直接调用该函数会很方便，但它没有在任何地方记录，而且弄清楚参数会很痛苦。此外，我假设 fmifs.dll 会做正确的事情，如果可以的话。

UDF 支持多个修订版（[请参阅 OSTA 规范](http://www.osta.org/specs/)） - 您的问题很可能是您在 WinXP 上的 UUDF.dll 版本与您的 DVD-RAM 格式化的 UDF 版本存在问题。

您*可以*做的是将[DeviceIOControl](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363216%28v=vs.85%29.aspx)函数与[IOCTL_SCSCI_PASSHTHROUGH_DIRECT](http://msdn.microsoft.com/en-us/library/windows/hardware/ff560519%28v=vs.85%29.aspx)控制代码一起使用，这将使您能够直接与设备对话。应该可以使用 SCSI/MMC（多媒体命令）格式化 DVD-RAM - 查找[FORMAT_UNIT 命令](http://storagesecrets.org/2009/01/scsiformatunit/)的描述。MMC 命令在[http://www.t10.org/drafts.htm#MMC_Family](http://www.t10.org/drafts.htm#MMC_Family) T10 工作草稿中指定 - 它们很难掌握，但我相信注册后可以以访客身份下载副本。

如果简单的 (fmifs.dll) 方法不适合您，您将不得不以艰难的方式进行操作，或者找到第三方 dll 来帮助您。

**更新：**

查看 MSDN，XP Service Pack 2 支持 IMAPI2（Image Mastering API）。使用 fmifs.dll 的替代方法是使用 IDicFormat2Erase 接口的 EraseMedia() 函数擦除光盘，然后使用 IFileSystemImage 接口的 FileSystemsToCreate( ) 函数格式化为 UDF。可能比 DeviceIOControl 路由更简单。

因为我从来没有这样做过，所以我决定把一个简单的例子放在一起。它快速、肮脏且未经测试（在 DVD-RW 上创建了 UDF rev 2.50 文件系统，仅此而已），但它是一个起点（Visual Studio 2012）：

```
#include "stdafx.h"
#include <iostream>
#include <vector>
#include <Windows.h>
#include <imapi2.h>
#include <imapi2fs.h>
#include <imapi2error.h>
#include <imapi2fserror.h>
#include <comdef.h>

void ShowComError(HRESULT hr)
{

    LPWSTR lpMsgBuf;
    DWORD ret;

    std::cout << "Failed - HRESULT = 0x" << std::hex << hr << std::endl;
    ret = FormatMessage(
        FORMAT_MESSAGE_ALLOCATE_BUFFER | 
        FORMAT_MESSAGE_FROM_HMODULE,
        GetModuleHandle(TEXT("imapi2.dll")),
        hr,
        0,
        (LPWSTR) &lpMsgBuf,
        0, NULL );

    if(ret)
    {
        std::wcout << L"HRESULT: " << lpMsgBuf << std::endl;
        LocalFree(lpMsgBuf);
    }

}

int main()
{
    IDiscMaster2* ppMaster = NULL;
    IDiscRecorder2* ppRecorder = NULL;
    IDiscFormat2Erase* ppFormat2 = NULL;
    IDiscFormat2Data* ppFormat2Data = NULL;
    IFileSystemImage* ppFileImage = NULL;
    IStream* fs = NULL;
    IFileSystemImageResult* res = NULL;

    HRESULT hr = CoInitialize(NULL);

    BSTR clientName = SysAllocStringLen(L"TestBurner", lstrlen(L"TestBurner"));
    SAFEARRAY* multi = NULL; // multi-sessions

    hr = CoCreateInstance(__uuidof(MsftDiscMaster2),
        NULL,
        CLSCTX_INPROC_SERVER,
        __uuidof(IDiscMaster2),
        (void **) &ppMaster);

    if (FAILED(hr)) 
    {
        ShowComError(hr);
        //nothing-wrong-with-a-goto-when-its-heart's-in-the-right-place ;)
        goto Clean_Up; 
    }       

    hr = CoCreateInstance(__uuidof(MsftDiscRecorder2),
        NULL,
        CLSCTX_INPROC_SERVER,
        __uuidof(IDiscRecorder2),
        (void **) &ppRecorder);

    if (FAILED(hr)) 
    {
        ShowComError(hr);
        goto Clean_Up;
    }

    hr = CoCreateInstance(__uuidof(MsftDiscFormat2Erase), 
        NULL, 
        CLSCTX_INPROC_SERVER, 
        __uuidof(IDiscFormat2Erase), 
        (void**) &ppFormat2);

    if(FAILED(hr))
    {
        ShowComError(hr);
        goto Clean_Up;
    }

    hr = CoCreateInstance(__uuidof(MsftDiscFormat2Data), 
        NULL, 
        CLSCTX_INPROC_SERVER, 
        __uuidof(IDiscFormat2Data), 
        (void**) &ppFormat2Data);

    if(FAILED(hr))
    {
        ShowComError(hr);
        goto Clean_Up;
    }

    hr = CoCreateInstance(__uuidof(MsftFileSystemImage),
        NULL,
        CLSCTX_INPROC_SERVER,
        __uuidof(IFileSystemImage),
        (void**) &ppFileImage);

    if(FAILED(hr))
    {
        ShowComError(hr);
        goto Clean_Up;
    }

    // got here - get the optical drives
    LONG countDevices;
    hr = ppMaster->get_Count(&countDevices);
    if(FAILED(hr))
    {
        ShowComError(hr);
        goto Clean_Up;
    }

    VARIANT_BOOL supported;
    hr = ppMaster->get_IsSupportedEnvironment(&supported);
    // check if it's supported - if yes we use it to format 
    // and then break out...
    if(SUCCEEDED(hr) && supported == VARIANT_TRUE)
    {
        BSTR deviceName;
        for(LONG i = 0; i < countDevices; i++)
        {
            hr = ppMaster->get_Item(i, &deviceName);
            if(SUCCEEDED(hr))
            {
                std::wcout << L"Using: " << deviceName << std::endl;
                hr = ppRecorder->InitializeDiscRecorder(deviceName);
                if(FAILED(hr)) goto Clean_Up;

                hr =  ppRecorder->AcquireExclusiveAccess(VARIANT_TRUE, clientName);
                if(FAILED(hr))
                {
                    ShowComError(hr);
                    goto Clean_Up;
                }

                hr = ppFormat2->put_Recorder(ppRecorder);
                if(FAILED(hr)) goto Clean_Up;

                // need to set client_name before erasing

                hr = ppFormat2->put_ClientName(clientName);
                if(FAILED(hr)) ShowComError(hr);
                //SysFreeString(clientName);

                BSTR owner = NULL;
                hr = ppRecorder->get_ExclusiveAccessOwner(&owner);
                if(FAILED(hr))
                {
                    ShowComError(hr);
                    goto Clean_Up;
                }
                if(owner)
                {
                    std::wcout << owner << std::endl;
                    SysFreeString(owner);
                }

                // erase the disc
                hr = ppFormat2->put_FullErase(VARIANT_TRUE);
                if(FAILED(hr)) goto Clean_Up;

                hr = ppFormat2->EraseMedia();
                if(FAILED(hr))
                {
                    ShowComError(hr); // Need to pull eventual errors out of imapi2error omitted...
                    //goto Clean_Up;
                }

                hr = ppFormat2Data->put_Recorder(ppRecorder);
                if(FAILED(hr))
                {
                    ShowComError(hr);
                    goto Clean_Up;
                }

                hr = ppFormat2Data->put_ClientName(clientName);
                if(FAILED(hr)) ShowComError(hr);

                hr = ppFormat2->IsCurrentMediaSupported(ppRecorder, &supported);
                if(FAILED(hr))
                {
                    ShowComError(hr);
                    goto Clean_Up;
                }

                VARIANT_BOOL blank;
                hr = ppFormat2Data->get_MediaHeuristicallyBlank(&blank);
                if(blank == VARIANT_FALSE)
                {
                    hr = ppFormat2Data->get_MultisessionInterfaces(&multi);
                    if(FAILED(hr))
                    {
                        ShowComError(hr);
                        goto Clean_Up;
                    }
                }

                /*hr = ppFileImage->ChooseImageDefaults(ppRecorder);
                if(FAILED(hr))
                {
                    ShowComError(hr);
                    goto Clean_Up;
                }*/

                FsiFileSystems imported = FsiFileSystemNone;
                if(multi)
                {
                    hr = ppFileImage->put_MultisessionInterfaces(multi);
                    if(FAILED(hr))
                    {
                        ShowComError(hr);
                    }

                    hr = ppFileImage->ImportFileSystem(&imported);
                }

                if(imported == FsiFileSystemNone || imported == FsiFileSystemUnknown)
                {
                    imported = FsiFileSystemUDF;
                    // ask for UDF revision 2.50
                    hr = ppFileImage->put_UDFRevision(0x250);
                    if(FAILED(hr))
                    {
                        ShowComError(hr);
                    }

                }
                hr = ppFileImage->put_FileSystemsToCreate(imported);
                if(FAILED(hr))
                {
                    ShowComError(hr);
                }

                hr = ppFileImage->CreateResultImage(&res);
                if(FAILED(hr))
                {
                    ShowComError(hr);
                    goto Clean_Up;
                }

                hr = res->get_ImageStream(&fs);
                if(FAILED(hr))
                {
                    ShowComError(hr);
                    goto Clean_Up;
                }

                hr = ppFormat2Data->put_ForceOverwrite(VARIANT_TRUE);
                if(FAILED(hr))
                {
                    ShowComError(hr);
                    goto Clean_Up;
                }

                hr = ppFormat2Data->Write(fs);
                if(FAILED(hr))
                {
                    ShowComError(hr);
                    goto Clean_Up;
                }

                hr = ppRecorder->EjectMedia();
                break;
            }

        }

    }

    // clean up
Clean_Up:
    if(res) res->Release();
    if(fs) fs->Release();
    if(multi) SafeArrayDestroy(multi);
    if(clientName) SysFreeString(clientName);
    if(ppFileImage) ppFileImage->Release();
    if(ppFormat2Data) ppFormat2Data->Release();
    if(ppFormat2) ppFormat2->Release();
    if(ppRecorder) ppRecorder->Release();

    if(ppMaster) ppMaster->Release();

    CoUninitialize();

    /**/
    std::cout << "Press any key to continue..." << std::endl;
    std::cin.get();
    return 0;

} 
```

# javascript - 如何使用 javascript 启用引导按钮？

> ID：13250101
> 
> 赞同：0
> 
> 时间：2012-11-06T11:30:47.537
> 
> 标签：javascript, twitter-bootstrap, submit

我正在尝试使用下面的代码为所有提交按钮启用引导按钮。但是，它不起作用。怎么了？

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="/inc/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function() {
$('button, input:submit, input:button').button()
});
</script> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:07:27.023

```
<script type="text/javascript">
    $(document).ready(function() {
        $('input[type="submit"], input[type="button"]').addClass('btn');
    });
</script> 
```

# ios - NSArray 使用 valueForKey 和 valueAtIndex

> ID：13250107
> 
> 赞同：1
> 
> 时间：2012-11-06T11:30:55.750
> 
> 标签：ios, nsarray, nsdictionary

长期听众等。我浏览了很多关于 NSDictionary 和 NSArray 的帖子，但我不太明白这一点，我希望得到一些澄清。

我有一个带有键*名、文件名、文件对象的 NSArray* *masterArray*

 *我想在 UITableViewCell 中的两个单独标签中显示名称和文件名。

目前我正在这样做（出于这个问题的目的，我将所有内容都放在了 cellForRowAtIndexPath 方法中）

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

MyCell *cell = (MyCell *)[tableView dequeueReusableCellWithIdentifier:@"Cell"];

NSArray *namesArray = [NSArray arrayWithArray:[masterArray valueForKey:@"name"]];
NSArray *filenamesArray = [NSArray arrayWithArray:[masterArray valueForKey:@"fileName"]];

NSString *name = [namesArray objectAtIndex:indexPath.row];
NSString *filename = [imageNameArray objectAtIndex:indexPath.row];

cell.nameLabel.text = name;
cell.filenameLabel.text = filename;

return cell;

} 
```

我的问题是 - 有没有办法通过请求访问 NSArray（或 NSDictionary）；

```
NSString *name = [masterArray valueAtIndex:indexPath.row valueForKey:@"name"]; 
```

您是否必须将其拆分为较小的数组/字典并分别访问这些值，还是我可以更优雅地执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:44:06.757

您可以在 iOS 上使用**OrderedDictionary**。这个第三方 API 所做的是将所有键/值对以索引格式存储在 NSDictionary 中，即像 NSArray 一样以连续方式存储。NSDictionary 不以索引/有序方式存储值。这第 3 方字典可以。*

# c++ - 从 IPv6 数据包中获取 ICMPv6 标头

> ID：13250115
> 
> 赞同：2
> 
> 时间：2012-11-06T11:31:22.510
> 
> 标签：c++, c, unix, ipv6, icmp

嗨，我一直坚持从 IPv6 数据包获取 ICMPv6 标头。

```
 size = sizeof(sockaddr_in6);
        if ((lenght = recvfrom(socd, buffer, BUFSIZE, 0, (sockaddr *)&receiveSockAddr, &size)) < 0) {
          cerr << "recvfrom error" << endl;
        }

        ip = (ip6_hdr *) buffer;

        cout << "Payload length: " << ip->ip6_ctlun.ip6_un1.ip6_un1_plen << endl;
        cout << "Payload length ntohs: " << ntohs(ip->ip6_ctlun.ip6_un1.ip6_un1_plen) << endl;

        //icmpRec = (icmp6_hdr *) (buffer + ???offset???); 
```

我需要找出如何设置偏移量。我知道的唯一方法是获取有效负载长度，然后是：**数据包长度 - 有效负载长度 = 我的偏移量**。但是在**ip->ip6_ctlun.ip6_un1.ip6_un1_plen**中有一些奇怪的数字。

从我收到的上面的代码中：

```
Payload length: 25332
Payload length ntohs: 62562 
```

将 ICMP6_ECHO_REQUEST 发送到 ipv6.google.com 后

但是如果我查看wireshark，有效负载长度是8个字节。如何正确解码**uint16_t**中的有效载荷编号以更正十进制数**8**？以及如何获取 IPv6 数据包的整个大小来计算偏移量？为什么 IPv6 没有 IHL 作为 IPv4？我认为这使 IPv6 的工作变得非常复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:13:50.217

这可能是问题所在，尽管我有点难以消化。

显然，当使用 recvfrom() 时，IPv6 标头会自动裁剪掉。

**引用**

传出的数据包会自动附加一个 IPv6 标头（基于目标地址）。 *接收到套接字上的传入数据包时，IPv6 标头和所有扩展标头都被删除。*

[ipv6 手册页](http://manpages.ubuntu.com/manpages/hardy/man4/icmp6.4.html)

所以基本上你的缓冲区从数据开始，你偏移的字节包含一些随机的更高层数据。

# android - 发布问题 - “允许新选项”，“允许多票”？

> ID：13250116
> 
> 赞同：0
> 
> 时间：2012-11-06T11:31:33.427
> 
> 标签：android, facebook, facebook-graph-api

使用 Facebook Questions Graph API（从 API 文档中不清楚）我注意到可以指定“朋友可以添加选项”（通过`allow_new_options`字段）。将此字段设置为`true`具有“朋友*可以*投票多个​​选项”的附加效果。将其设置为`false`具有“朋友*不能*投票多个选项”的效果。然而，在我看来，这两件事（“允许新选项”和“允许多票”）是并且应该是无关的。有谁知道是否*可以*分别指定“朋友可以添加选项”和“朋友可以投票多个​​选项”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:45:44.513

请注意，Facebook 将完全停止其 Questions 产品。您现在构建的任何应用程序都将在几天内过时。

[http://techcrunch.com/2012/10/19/facebook-questions-shut-down/](http://techcrunch.com/2012/10/19/facebook-questions-shut-down/)

[http://www.businessinsider.com/quora-wins-facebook-is-shutting-down-its-questions-product-2012-10](http://www.businessinsider.com/quora-wins-facebook-is-shutting-down-its-questions-product-2012-10)

# msbuild - 如何在 MSBuild 中创建新属性并在 WIX 中引用它

> ID：13250120
> 
> 赞同：7
> 
> 时间：2012-11-06T11:31:47.737
> 
> 标签：msbuild, wix, msbuild-propertygroup

我们需要创建一个属性来指示我们的软件版本。然后我们想在我们的 WIX 项目中使用它，即在 wxs 文件中引用它。我们不想在 wxs 文件中定义它，因为我们希望 MSBuild 也根据此版本号重命名输出文件。PropertyGroup 中的常量定义不适合我们，原因如下：

PropertyGroup 中定义的属性是特定于配置/平台的。每当我们在 Visual Studio IDE 中从项目属性窗口修改此预处理器时，通常我们只修改特定配置/平台组合的值。（我知道可以在 IDE 中为 All Config/Platform 修改它，但实际上是通过复制所有组合来完成的。而且我们仍然有可能通过只修改一个组合的值来破坏同步。例如，默认情况下，当我们打开项目属性窗口的构建选项卡时，它将显示活动的配置/平台）。另一方面，即使我们可以在没有任何条件的情况下定义一个 PropertyGroup，但每当我们在 IDE 中对其进行修改时，我们通常只是针对特定组合进行修改，而不是全部修改。由于我们纯粹是在 VS IDE 中构建我们的软件，

我尝试在 BeforeBuild 目标中使用 MSBuild 的 CreateProperty 任务，但在接下来的执行中，该值似乎根本无效。例如，如果我覆盖 BeforeBuild 中的现有属性，并且当我在 WIX 中引用它时，它仍将使用旧值。如果我创建一个全新的属性，WIX 会抱怨未定义的预处理器。

有没有合适的方法来做到这一点：创建一个 MSBuild 属性并在 WIX 中使用它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-06T12:44:59.333

您不需要使用 BeforeBuild。这绝对适用于wixproj。

我的属性

```
<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0">
  <PropertyGroup>
    <DefineConstants>$(DefineConstants);foo=bar</DefineConstants>
  </PropertyGroup>
</Project> 
```

更新了wixproj

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
<!-- all other stuff -->
<Import Project="my.properties" />
</Project> 
```

蜡

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Product Id="*" Name="SetupProject1$(var.foo)" Language="1033" Version="1.0.0.0" Manufacturer="$(var.foo)" UpgradeCode="863d8da1-422b-4b28-aa68-56e3190770d7"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:27:28.307

[请在此处](http://blogs.msdn.com/b/jrock/archive/2008/01/29/complete-list-of-candle-preprocessor-variables.aspx)检查预处理器变量。我实际上不确定您是否可以引用标准以外的项目属性，但看起来这是可能的。

# knockout.js - 淘汰赛中的单选按钮

> ID：13250122
> 
> 赞同：1
> 
> 时间：2012-11-06T11:31:53.783
> 
> 标签：knockout.js, radio-button

I'm using knockout and I have 2 radio buttons, when a particular one is selected I need a textbox to be enabled and disabled if the other option is selected. 我似乎无法让这个工作。这是我到目前为止所拥有的：IssercentageBased 是我的视图模型上的布尔值，我已将其设置为可观察的。有任何想法吗？

```
<input type="radio" name="IsPercentageBased" value="true" data-bind="checked: IsPercentageBased"/>
            <span>Percentage</span>
            <input type="radio" name="IsPercentageBased" value="false" data-bind="checked: IsPercentageBased"/>
            <span>Value</span>

 @Html.TextBox("Value", "", new
                {
                    type = "text",
                    data_bind = "value: Value, valueUpdate: 'afterkeydown', disable: IsPercentageBased"
                }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:46:51.330

将文本框的 data-bind 属性更新为：

```
data_bind = "value: Value, valueUpdate: 'afterkeydown', disable: IsPercentageBased() == 'true'" 
```

`Checked`绑定设置为`Value`属性的可观察值，`string`即`bool`.

这是工作小提琴：http: [//jsfiddle.net/vyshniakov/wDRuG/](http://jsfiddle.net/vyshniakov/wDRuG/)

# fortran - 在fortran中读取多个文件

> ID：13250123
> 
> 赞同：0
> 
> 时间：2012-11-06T11:31:59.717
> 
> 标签：fortran

我有数百个文件名为 fort.1、fort.2、fort.3 等等，直到 fort.5000。我想要的是打开每个文件并操作该文件并关闭。然后继续下一个文件。我想在 Fortran 90 中做到这一点。

我浏览过但无法得到我想要的。[我看到了一个要打开的](https://stackoverflow.com/questions/7611360/opening-multiple-files-in-fortran-90)线程，但这对我没有多大帮助。

我试着写`

```
program openFile
IMPLICIT none
INTEGER(I-N), REAL*8(A-H,O-Z)
real,dimension(2000) :: angle           
CHARACTER(len=10) FN
integer::I, k
integer,parameter :: N=102  
DO I=101,N
!WRITE(FN,10) I
!WRITE(6,*) FN
OPEN(1,FILE=FN)
do k=1,200
read(1,'(F8.3)') angle(k)
print*,
end do      
CLOSE(1)
enddo 
10 FORMAT(5Hfort.I3)
STOP
END 
```

` 但似乎它不起作用。我有可能得到一些帮助吗？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T11:43:45.160

方法是在字符串中创建文件名。对于您的名称风格：

```
write (filename, '("fort.", I0)' )  FileNum 
```

然后像您一样使用文件名打开每个文件。

一个相关问题：[https ://stackoverflow.com/questions/13048441/writing-files-in-fortran-with-increasing-numbers](https://stackoverflow.com/questions/13048441/writing-files-in-fortran-with-increasing-numbers)

# jsf - 在 JSF 中如何为 GET 请求创建请求参数？

> ID：13250125
> 
> 赞同：0
> 
> 时间：2012-11-06T11:32:03.853
> 
> 标签：jsf, jsf-2

这个问题受到Balus C 关于 主题的[回答](https://stackoverflow.com/a/6377957/1527084)`f:viewParam`的影响。他在回答中写道，以下代码所做的第一件事将是“*通过名称 id 获取请求参数值*”。

```
<f:metadata>
    <f:viewParam name="id" value="#{bean.id}" />
</f:metadata> 
```

我知道此功能与 GET 请求一起使用，但我不明白如何首先创建名为“id”的请求参数？另外，如果我理解正确，“f:viewParam”与隐式导航的特殊`includeViewParams`查询参数。这两个功能中的哪一个实际上负责创建请求参数？或者这两个都不是？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:16:07.347

它只是标准 HTTP 的一部分。要使用 name 传递请求参数`id`，您基本上需要有如下链接

```
/view.xhtml?id=42 
```

这样的 URL 通常已经在您的 web 应用程序的其他地方提供。例如

```
<h:link value="View details of item with ID #{item.id}" outcome="view">
    <f:param name="id" value="#{item.id}" />
</h:link> 
```

### 也可以看看：

*   [JSF 2.0 中的通信 - 处理 GET 请求参数](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ProcessingGETRequestParameters)

# image - 在用户名之后命名上传的图像？

> ID：13250126
> 
> 赞同：0
> 
> 时间：2012-11-06T11:32:04.787
> 
> 标签：image, security, upload, permissions

我正在使用 CodeIgniter 框架进行开发。

我有一个图片上传文件夹，其权限设置为 755。我的主机使用的是 suPHP，因此网站用户可以上传到它。

我刚刚注意到，当用户上传图片时，IMAGE 文件权限为 666。

我使用用户名命名图像，因此有人很容易猜到用户名为“hello”的人会将图像存储在名为“hello.jpg”或“hello.png”的目录中</p>

这不安全吗？恶意访问者是否可以从该图像上传目录中删除或替换成员的图像？

我是否必须将图像随机命名，然后将该随机图像名称存储到该用户的数据库表行中，以便我知道哪个图像名称与哪个用户匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:36:47.380

当然，您应该始终验证任何用户输入，但在这种情况下，您可以简单地检查当前用户的用户名是否与用作文件名的名称匹配（假设您在允许用户上传之前对用户进行了身份验证），并确保他们没有表示通过他们输入的任何内容来指定文件名。

简而言之，仅使用已知用户信息、服务器端数据对文件进行身份验证和命名。

# c# - “System.Security.Cryptography.CryptographicException：发生内部错误”？

> ID：13250130
> 
> 赞同：4
> 
> 时间：2012-11-06T11:32:11.417
> 
> 标签：c#, saml, acs, x509certificate2

在我的项目中，我使用的是 ACS SAML 安全性。这里我们需要提供客户端证书和服务器私钥来调用服务，这些可以在 webconfig 文件中设置。在 Azure 中运行的 Web 服务很好，但我需要在我们的远程服务器中运行 Web 服务。所以我在 IIS 中发布了这个项目。但我得到了例外..

> 发生了内部错误。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Security.Cryptography.CryptographicException：发生内部错误。
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 堆栈跟踪：

```
[CryptographicException: An internal error occurred.]
   System.Security.Cryptography.CryptographicException.ThrowCryptographicException(Int32 hr) +41
   System.Security.Cryptography.X509Certificates.X509Utils._LoadCertFromFile(String fileName, IntPtr password, UInt32 dwFlags, Boolean persistKeySet, SafeCertContextHandle& pCertCtx) +0
   System.Security.Cryptography.X509Certificates.X509Certificate.LoadCertificateFromFile(String fileName, Object password, X509KeyStorageFlags keyStorageFlags) +372
   System.Security.Cryptography.X509Certificates.X509Certificate2..ctor(String fileName, String password) +157
   ClassicMDM.WCFServiceWebRole.MyServiceHostfactory.GetServiceCertificateWithPrivateKey() in F:\Core\_Core\Class\trunk\test.WCFServiceWebRole\testWebService.svc.cs:172
   test.WCFServiceWebRole.MyServiceHostfactory.CreateServiceHost(Type serviceType, Uri[] baseAddresses) in F:\Core\_Core\Class\trunk\test.WCFServiceWebRole\testWebService.svc.cs:140
   System.ServiceModel.Activation.ServiceHostFactory.CreateServiceHost(String constructorString, Uri[] baseAddresses) +530
   System.ServiceModel.HostingManager.CreateService(String normalizedVirtualPath) +1413
   System.ServiceModel.HostingManager.ActivateService(String normalizedVirtualPath) +50
   System.ServiceModel.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath) +1172

[ServiceActivationException: The service '/testwebserviceINT/testWebService.svc' cannot be activated due to an exception during compilation.  The exception message is: An internal error occurred]
   System.Runtime.AsyncResult.End(IAsyncResult result) +901424
   System.ServiceModel.Activation.HostedHttpRequestAsyncResult.End(IAsyncResult result) +178702
   System.Web.CallHandlerExecutionStep.OnAsyncHandlerCompletion(IAsyncResult ar) +136 
```

所以请帮助我..如何解决这个问题？

# php - Magento：通过本地副本“覆盖”核心 config.xml 文件？它是否正确？

> ID：13250135
> 
> 赞同：5
> 
> 时间：2012-11-06T11:32:35.080
> 
> 标签：php, magento

我正在尝试重命名出现在我的 Magento 结帐中的一些信用卡（例如，“Visa”变成“Visa Debit/Credit”）。

为此，我发现您必须编辑`/app/code/core/Mage/Payment/etc/config.xml`.

不想覆盖核心文件，我尝试将此文件复制到`/app/code/local/Mage/Payment/etc/config.xml`并在那里进行更改，但它不起作用。根据研究，我收集到 Magento 不会先从本地文件夹自动加载配置文件？

然后我发现您可以更改`app/etc/modules/Mage_All.xml`并指定`<codePool>local</codePool>`而不是`<codePool>core</codePool>`under `<Mage_Payment>`。然后我在本地文件夹下所做的更改将起作用。

这是正确的方法吗？更改`codePool`核心模块会产生任何影响吗？还有其他方法可以“覆盖”核心模块`config.xml`吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T12:04:40.407

您必须在 local 下创建一个新模块：`Yourcompany_Payment`

在此模块中，使用您需要的 XML 重写定义一个极简的 etc/config.xml：

```
<config>
    <modules>
        <Yourcompany_Payment>
            <version>0.1.0.0</version>
        </Yourcompany_Payment>
    </modules>
    <global>
        <payment>
            <cc>
                <types>
                    <AE>
                        <code>AE</code>
                        <name>American Express</name>
                        <order>0</order>
                    </AE> [...] 
```

然后在`app/etc/modules`文件夹中，添加一个新的`Yourcompany_Payment.xml`（或 Yourcompany_All.xml）：

```
<config>
    <modules>
        <Yourcompany_Payment>
            <active>true</active>
            <codePool>local</codePool>
            <depends>
                <Mage_Payment/>
            </depends>
        </Yourcompany_Payment>
    </modules>
</config> 
```

依赖节点至关重要，因为它会告诉 magento 在 magento 之后加载您的 XML，以便您的重写工作

# asp.net - 使用 ASP.Net 在 HTML 中显示格式化文本（来自数据库）

> ID：13250142
> 
> 赞同：0
> 
> 时间：2012-11-06T11:33:02.613
> 
> 标签：asp.net, .net

我有一个存储在数据库列中的格式化文本，如下所示。使用 SSIS 发送电子邮件时会保留此格式。但是，当我使用网页显示它时，格式不会保留 - 它是单行的。

通过保留格式以 HTML 显示它的最佳方式是什么？

注意：我们需要在没有任何第三方控制的情况下实现这一点。但是我们可以使用标准的 ASP.Net 控件

```
UPDATE Report_Type SET report_template_txt = 

'Updates:   
-----------------
        Transactions Received for 10 

Adjustments :  
---------------------------

Adjustment holds 

        Holds past 1 month – 5' 
```

HTML 源代码和渲染：

![在此处输入图像描述](../Images/0d89c4cc2eaadc73dce71c6d4b8eb05b.png)

参考：

1.  [将 html 格式的文本保存到数据库](https://stackoverflow.com/questions/4577904/save-html-formatted-text-to-database)

2.  [具有 html 格式的数据库文本，如何将其拉入我的 asp.net 页面](https://stackoverflow.com/questions/4760788/database-text-with-html-formatting-how-to-pull-it-into-my-asp-net-page)

3.  [.NET：如何将字符串显示为格式化的 HTML？](https://stackoverflow.com/questions/2921559/net-how-to-display-string-as-a-formatted-html)

4.  [文本区域内的 HTML 解码](https://stackoverflow.com/questions/9879933/html-decoding-within-textarea)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:52:26.873

`<br />`您需要用标签替换换行符：

```
string _outputText; // = Some query to get the string
_outputText = _outputText.replace(Environment.NewLine, "<br />");

// Output - Assign the string to whereever, or however suits now it's HTML friendly
Response.Write(_outputText); // Or asssign to literal etc...
lblSomeLabel.text = _outputText; 
```

您可能还希望用不间断的空格替换空格，如下所示：

```
_outputText = _outputText.Replace(" ", "&nbsp;"); 
```

然后您可能还希望使用固定宽度的字体，例如 courier 或 courier-new，以便格式一致。

# c - 检查 EOF 时套接字/文件流上的 C fgetc() 进入无限循环

> ID：13250143
> 
> 赞同：0
> 
> 时间：2012-11-06T11:33:05.143
> 
> 标签：c, loops, eof, infinite, fgetc

```
int main(int argc, char *argv[]) {

    int conn_s = socket(AF_INET, SOCK_STREAM, 0);
    struct addrinfo hints;
    hints.ai_family = AF_INET;
    hints.ai_socktype = SOCK_STREAM;
    hints.ai_protocol = 0;

    struct addrinfo *addr = (struct addrinfo *) calloc(1, sizeof(struct addrinfo));

    getaddrinfo("google.com", "80", &hints, &addr);

    connect(conn_s, addr->ai_addr, sizeof(struct sockaddr_in));

    char *http_request = "GET / HTTP/1.1\n\n";

    send(conn_s, http_request, strlen(http_request), 0);
    FILE *sockfile = (FILE *) fdopen(conn_s, "r");
    FILE *fp = fopen("/Users/leekaiwei/Desktop/results.html", "w+");
    int ch;

    while ((ch = fgetc(sockfile)) != EOF) {
        fprintf(fp, "%c", ch);
    }

    close(conn_s);
    fclose(fp);
    fclose(sockfile);
    free(addr);
    return 0;
} 
```

while 循环永远不会结束。为什么是这样？我已经使用本地文件完成了此操作，并且工作正常。它也适用于 for 循环，只是 fgetc() 永远不会返回 EOF。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T16:18:06.520

`HTTP/1.1`默认为`connection: keepalive`，所以就像 simonc 所说，服务器实际上是在等待你发出下一个请求，并且会等到与服务器相关的超时。用于`HTTP/1.0`获取`EOF`.

FWIW：完成需要 245 秒。

# javascript - 将年份下拉列表添加到 dijit 日历

> ID：13250145
> 
> 赞同：1
> 
> 时间：2012-11-06T11:33:08.327
> 
> 标签：javascript, dojo

我正在尝试添加与 dojo 中的月份下拉类似的年份下拉。我设法创建了常规日历，但在添加年份下拉列表时我感到很困惑。

各位大神能不能给点意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:49:15.977

我建议使用带范围的数字微调器而不是日历。

问候。

# javascript - 将数组转换为 json 对象？

> ID：13250151
> 
> 赞同：0
> 
> 时间：2012-11-06T11:33:29.933
> 
> 标签：javascript, json

我在将数组转换为 Json 对象时遇到问题。我有一个包含 json 对象/对象的数组，当我将该数组转换为 Json 对象时，它组合/连接数组数据而不是制作 json 数组。让我们假设数组有两个 json 对象。当我使用将它转换为 json 对象时

```
var jsondata = JSON.stringify(array);
var jsn = JSON.parse(jsondata); 
```

这是我的代码：

```
var array = new Array();

function addBatch(){
var data = $.toJSON($('#risk').serializeArray());
    //data = [{"name":"user","value":"INCRE"},{"name":"period","value":"100"},{"name":"hori","value":"12"},{"name":"conf","value":"32"}] 

    var jsonData = JSON.stringify(data);
    var json=JSON.parse(jsonData);
    console.log('After Converting Json');

    //store data in array 
    array.push(json);
}

// function that convert array into json:
function saveBatch(){
                var jsonData = JSON.stringify(array);
        json = JSON.parse(jsonData);
        console.log("Batch: "+json);

} 
```

它给了我以下输出：

```
[{"name":"user","value":"HIST"},{"name":"period","value":"12"},{"name":"hori","value":"32"},{"name":"conf","value":"12"}],[{"name":"user1","value":"INCRE"},{"name":"period","value":"12"},{"name":"hori","value":"32"},{"name":"conf","value":"12"}] 
```

它应该是这样的：

```
[
  [
      {"name":"obj1"},{"value":"data"}
  ],
  [
      {"name":"obj2"},{"value":"data2"}
  ] 
```

]

不知道为什么会这样。我也在谷歌上搜索，但除了

```
var jsondata = JSON.stringify(array);
    var jsn = JSON.parse(jsondata); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:01:30.397

你所拥有的没有多大意义。你确定你不想要一个对象数组吗？

```
var array = new Array();

function addBatch() {
  // Gets data. Returns an array of objects in format [{name: "", value: ""}, ...]
  var data = $.toJSON($('#risk').serializeArray());

  // Extend the `array` with new objects.
  array.concat(data);
}

// function that convert array into json:
function saveBatch() {
    // Convert the array of objects to JSON string.
    var jsonData = JSON.stringify(array);
    console.log(jsonData);
} 
```

# java - android获取HashMap数组的值

> ID：13250160
> 
> 赞同：1
> 
> 时间：2012-11-06T11:34:05.043
> 
> 标签：java, android, hashmap, key-value

我试图获取 Hashmap 数组的值，但我正在获取索引/键。

```
ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>(); 
```

编写我如何从解析器获取值的代码

```
 HashMap<String, String> map = new HashMap<String, String>();
Element e = (Element) nl.item(i);
map.put(KEY_LAT, parser.getValue(e, KEY_LAT));
map.put(KEY_LON, parser.getValue(e, KEY_LON));
map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
menuItems.add(map); 
```

然后我尝试获取值，但我收到索引。

```
for (int i = 0; i < menuItems.size(); i++){
        int latitude = Integer.parseInt(KEY_LAT);
        int longitude = Integer.parseInt(KEY_LON);
        itemizedOverlay.addOverlayItem(latitude, longitude, KEY_NAME, makerDefault);
    } 
```

如何从 menuItems 数组中获取值？在其他活动中，我得到了值，但通过 TextView 使用。还有其他方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T11:50:55.317

试试这个：

```
for (Map<String, String> menuItem : menuItems) {
    int latitude = Integer.parseInt(menuItem.get(KEY_LAT));
    int longitude = Integer.parseInt(menuItem.get(KEY_LON));
    itemizedOverlay.addOverlayItem(latitude, longitude, KEY_NAME, makerDefault);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:46:07.780

遍历 Array 最好这样做：

```
for (HashMap map: menuItems) {
} 
```

然后您可以访问地图本身：

```
for (HashMap map: menuItems) {
    String value = map.get(key);
} 
```

# c++ - C++ 用宏替换函数

> ID：13250163
> 
> 赞同：2
> 
> 时间：2012-11-06T11:34:13.780
> 
> 标签：c++, c

我们的 C++ 代码中有一个现有的函数实现：

```
void Function(int param)
{
    printf("In Function\n");
}

int main()
{
    Function(10);
    return 0;
} 
```

我希望将其更改为调用另一个函数（通过宏声明的帮助），该函数将接受 **FILE**和**LINE**等附加参数（用于调试目的），然后调用实际函数：

```
#define Function(param) Function_debug(param, __FILE__,  __FUNCTION__,  __LINE__) \
{\
    printf("In Function_debug [%s] [%s] [%d]\n", file, func, line); \
    Function(param);\
} 
```

但是下面的代码：

```
#include <stdio.h>

#define Function(param) Function_debug(param, __FILE__,  __FUNCTION__,  __LINE__) \
{\
    printf("In Function_debug [%s] [%s] [%d]\n", file, func, line); \
    Function(param);\
}

void Function(int param)
{
    printf("In Function\n");
}

int main()
{
    Function(10);
    return 0;
} 
```

翻译为：

```
void Function_debug(int param, "temp.cpp", __FUNCTION__, 9) { printf("In Function_debug [%s] [%s] [%d]\n", file, func, line); Function(int param);}
{
    printf("In Function\n");
}

int main()
{
    Function_debug(10, "temp.cpp", __FUNCTION__, 16) { printf("In Function_debug [%s] [%s] [%d]\n", file, func, line); Function(10);};
    return 0;
} 
```

这会产生编译错误。

请指导我如何实现目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T11:39:20.897

通常你会做这样的事情：

```
#if DEBUG
#define FUNCTION(param) Function_debug(param, __FILE__,  __FUNCTION__,  __LINE__)
#else
#define FUNCTION(param) Function(param)
#endif

void Function(int param)
{
    printf("In Function\n");
}

void Function_debug(int param, const char * file,  const char * func,  int line)
{
    printf("In Function_debug [%s] [%s] [%d]\n", file, func, line); \
    Function(param);
}

int main()
{
    FUNCTION(10);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:39:57.597

第一条规则：为您的宏和它替换的函数使用不同的名称。
第二条规则：如果使用 gcc，请将代码块包装在括号 ({ }) 中，以使您的函数可以像`printf("%f\n",sqrt(2.0));`

`#define Function(a) ({ printf("Debug stuff\n"); orig_function(a);})`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T11:42:08.453

您应该首先实现第二个函数，然后在您的宏中将您的代码重定向到它，在您的版本中，您在任何使用宏的地方实现该函数：

```
void function( int param )
{
    // do something interesting here
}
void function_debug( int param, char const* fileName, unsigned line, char const* fn)
{
    // debug position here
    function( param );
}

#ifndef NDEBUG
#    define Function( param )    function_debug( param, __FILE__, __LINE__, __FUNCION__ )
#else
#    define Function( param )    function( param )
#endif 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T11:45:20.463

您不能将调试打印添加到`Function`吗？

```
void Function(int param)
{
    #ifdef DEBUG
    //debug stuff
    #endif
    printf("In Function\n");
} 
```

# eclipse - 来自亚马逊服务器上远程文件/文件夹的 Eclipse

> ID：13250166
> 
> 赞同：0
> 
> 时间：2012-11-06T11:34:29.733
> 
> 标签：eclipse, remote-access

我有一个来自亚马逊的虚拟机。在该 VM 上，我安装了 eclipse，其中配置了 Web 应用程序。目前我正在以这种方式工作

```
1) Login to my VM
2) Open Eclipse
3) Run the server
4) Edit/Update code (that is very slow via Remote Desktop) 
```

我想从我的机器上编辑/更新代码，当点击保存时，它应该更新我的代码，即 VM 上的那个 Eclipse。

可能吗？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:47:27.687

刚刚偶然发现你的问题。如果您还没有找到它，那么您正在寻找的是[RSE 插件](http://www.eclipse.org/tm/)。这是有关如何[为 Amazon EC2 设置它](http://www.wong101.com/tech-cloud/how-setup-eclipse-remote-system-explorer-linux-ec2-instance)的详细教程。

# javascript - 从格式为 Ymd H:i:s 的文本创建对象日期

> ID：13250167
> 
> 赞同：1
> 
> 时间：2012-11-06T11:34:36.430
> 
> 标签：javascript, datetime

我在 jquery 中有：

```
var start = '2012-11-10 13:10:13'; 
```

为什么这不起作用：

```
var date = new Date(start); 
```

? 没有外部插件我怎么能做到？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T11:37:46.587

这更正确一点：

```
var correctStart = '2012-11-10T13:10:13';
var date = new Date(correctStart); 
```

引用`Date.parse`（[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse)）文档：

> 或者，日期/时间字符串可以是 ISO 8601 格式。从 JavaScript 1.8.5 / Firefox 4 开始，支持 ISO 8601 的子集。例如，“2011-10-10”（只是日期）或“2011-10-10T14:48:00”（日期和时间）可以传递和解析。

尽管如此，IE8 仍然不支持这种格式（如此[处](http://msdn.microsoft.com/en-us/library/ie/ff743760%28v=vs.94%29.aspx)所述）。因此，我建议至少考虑使用外部库处理日期的可能性 - 特别是[Moment.js](http://momentjs.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:54:42.153

或者你可以试试如下图

```
var start = '10/11/2012 13:10:13';    
var date = new Date(start); 
```

这是有效的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-08T07:01:54.820

**参考这个[JSFIDDLE DEMO](http://jsfiddle.net/phpdeveloperrahul/wSvxQ/)**

您必须将日期字符串从转换为`Y-m-d H:i:s`，`Y/m/d H:i:s`因为 javascript 无法识别该格式的日期字符串。

做这个：

```
var my_date = "2012-11-10 13:10:13";
my_date = my_date.replace(/-/g, "/"); //this will replace "-" with "/"
//alert(my_date);
var  javascript_date = new Date(my_date); 
```

# php - 点击地址时获取谷歌地图

> ID：13250171
> 
> 赞同：-1
> 
> 时间：2012-11-06T11:35:05.677
> 
> 标签：php, google-maps-markers

我想在我的 PHP 项目中放置谷歌地图。点击地址时是否可以获取谷歌地图？我的要求是“单击将在地图中打开的地址时”在 PHP 中是否可能？任何人请帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:55:05.200

如果您只有一个类似“唐宁街 10 号”的地址，您可以将其作为搜索查询传递给 Google 地图。

例如[http://maps.google.co.uk/?q=10%20downing%20street](http://maps.google.co.uk/?q=10%20downing%20street)

如果您还提供更多信息（例如国家/地区），将会有所帮助。世界上有成千上万的“唐宁街”——所以如果你想要一个只在加拿大的，你会说[http://maps.google.co.uk/?q=10%20downing%20street,%20canada](http://maps.google.co.uk/?q=10%20downing%20street,%20canada)

您拥有的信息越多（州、邮政编码/邮编等），地图就越准确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:40:46.533

是的。访问谷歌地图并搜索到指定位置的链接并将其添加到您的代码中。如果你想让它动态查看来自链接的语法并生成你自己的。

示例：https://www.google.de/maps?q=London,+United+Kingdom&hl=en&sll=51.093173,0.271912&sspn=1.430024,3.56781&t=h&geocode=FYfwEQMdPQ3-_w&hnear=London,+United+Kingdom&z=11

基本上有 2 个数字（坐标）要编辑（和搜索请求）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T22:15:59.673

提供的解决方案在 iOS 5.1.1 中运行良好 - 当用户点击[http://maps.google.co.uk/?q=10%20downing%20street](http://maps.google.co.uk/?q=10%20downing%20street)时，它会从 iPhone 打开 Google Map Native App，但是当我在 iPhone iOS 6.0 中尝试相同的 URL - 它会打开 maps.google.co.uk 网站。

无论如何，我们是否有打开 Apple 的 Native Map 应用程序？

# objective-c - 在 Xcode 4 中添加自定义对象

> ID：13250175
> 
> 赞同：0
> 
> 时间：2012-11-06T11:35:16.130
> 
> 标签：objective-c, xcode, macos, cocoa, controls

好的，这是问题：

*   我们都知道`Object Library`，里面有所有的控件
*   如何将自定义对象添加到该列表中？（例如在“自定义对象”下）

我已阅读以下内容，但仍然无法正常工作（Snow Leopard 上的 Xcode 4.2）：

> **将自定义对象添加到库**
> 
> 虽然您通常将项目拖出库窗口并进入用户界面，但您也可以将这些对象的自定义配置拖回库窗口。这样做可以让您稍后检索这些自定义对象，而无需重新配置它们。
> 
> 要将自定义对象添加到库中，请执行以下操作：
> 
> 1.  在您的窗口中，根据需要配置对象。
>     
>     
> 2.  按住 Option 键并将对象拖到“库”窗口。
>     
>     
> 3.  在库窗口的组织窗格中，将对象拖放到自定义对象组或您创建的自定义组上。Interface Builder 会提示您输入有关已放置对象的信息。
>     
>     
> 4.  填写有关您的对象的信息，然后按 OK。
>     
>     
> 
> 您可以使用此技术拖动一个对象或一组对象。拖动多个对象时，整个组将成为“库”窗口中的单个项目。将该项目拖出库会创建所有原始对象。
> 
> 您添加到库中的项目在 Interface Builder 会话之间持续存在，以便您可以反复使用它们。要从“库”窗口中删除自定义项目，请执行以下操作：
> 
> 1.  选择库中的自定义对象组以查看该组中的项目。
>     
>     
> 2.  选择您的自定义项目。
>     
>     
> 3.  按删除键。
>     
>     
> 
> 您必须从“自定义对象”组中删除自定义项目才能将它们从“库”窗口中删除。从自定义组文件夹中删除项目会将它们从组中删除，但不会从库中删除。
> 
> 除了将对象的自定义配置添加到库中之外，您还可以通过 Interface Builder 插件将全新的对象添加到库中。插件通常用于您希望能够配置和编辑自定义类的属性的情况。有关详细信息，请参阅“使用插件将新对象集成到库中”。</p>

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T14:11:30.830

我与一位在 Apple 工作的 XCode 工程师进行了电子邮件交流，专门讨论了 XCode 4 的 Interface Builder 中的“自定义对象”问题，用他自己的话来说，该菜单选项是“无功能的”。这些是他的原话，他也是 Apple 为帮助开发者提供的 WWDC 2012 视频的演示者之一。并不是说这是他的错，但是看到这个回复我很失望。

我希望他们在以后的 XCode 版本中纠正这个问题，因为这将是一个很好的实现功能。同时，我建议使用代码片段库作为解决方法。

在您的 iOS 开发工作中一切顺利 :-)

# javascript - 有没有理由在 JavaScript 条件中写“if (myBoolean == true)”？

> ID：13250176
> 
> 赞同：1
> 
> 时间：2012-11-06T11:35:19.727
> 
> 标签：javascript, if-statement, boolean, type-conversion

许多初学者程序员写了类似`if (myBoolean == true)`的东西，`if (myBoolean)`因为他们还没有理解条件不需要包含比较，只是一个布尔值。当我在 twitter 上注意到这一点时，有人建议我在 JavaScript 中可能有充分的理由这样做。有没有？我们都知道 JavaScript 类型很奇怪，但谷歌在这一点上没有给出任何答案。

更新：似乎没有区别，但是`if (myBoolean === true)`. 因此，为了澄清这个问题 - 如果 (myBoolean === true) 或 if (myBoolean)，JavaScript 的最佳实践是什么。在什么实际情况下，您会检查`=== true`您不知道是布尔值的东西？请在此后续问题中回答：[为什么在 JavaScript 中使用 if (myBoolean === true) 是一种好习惯？](https://stackoverflow.com/questions/13250664/why-is-it-good-practice-to-use-if-myboolean-true-in-javascript)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T11:36:53.240

不。

由于您使用的[是非严格相等运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)，因此以下之间绝对没有区别：

```
if (myBoolean == true) 
```

和：

```
if (myBoolean) 
```

`===`但是，如果您使用严格相等运算符并且`myBoolean`实际上不是布尔值，则会有所不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T11:44:16.403

如果要检查的是*真正的*布尔值（真/假），而不仅仅是具有真实性质的东西，那么您永远不应该浪费时间*将*其与真假进行比较。

您的变量应该以布尔方式命名，例如`isFinished`可以`hasMoreRecords`读取语句：

```
if (!finished) ...
if (moreRecordsLeft) ...
if (userHasLostTheirSanity) ... 
```

等等。

将布尔值与真/假进行比较的问题在于它只会生成另一个布尔值，并且没有明确的停止位置：

```
if (!((userIsMad == true) == true) = false) ... 
```

# jquery - 页脚动画在滚动

> ID：13250177
> 
> 赞同：8
> 
> 时间：2012-11-06T11:35:26.880
> 
> 标签：jquery, css-transitions, sticky-footer

我目前在页面滚动超过设定点后出现页脚，但希望在用户滚动时显示页脚，而不是仅出现在屏幕上（如当前那样）。

有兴趣知道它是否可以通过 CSS 转换或最佳实践来实现。

**现场示例** [http://jsfiddle.net/robcleaton/3zh6h/](http://jsfiddle.net/robcleaton/3zh6h/)

**CSS**

```
#footer {
    background: black;
    width: 100%;
    height: 48px;
    position: fixed;
    z-index:300;
    bottom: 0;
    display: none;
}

#footer ul.navigation li {
    float: left;
    margin-right: 16px;
    display: block;
} 
```

​<strong>JS

```
$(function(){
    $(window).scroll(function() {              
        $('#footer').toggle($(document).scrollTop() > 100);
    });
})​ 
```

**HTML**

```
<div id="footer">
  <div class="content-wrap">
    <ul class="navigation">
      <li><a href="#about">About</a></li>
      <li><a href="#blog">Blog</a></li>
      <li><a href="#support">Support</a></li>
      <li><a href="#">Contact</a></li>
    </ul>
  </div><!-- content-wrap END -->
</div><!-- footer END -->​ 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-18T14:12:59.323

您可以执行以下操作，这将利用 CSS 过渡

# jQuery

我们想根据滚动位置从页脚添加或删除一个类

```
$(function(){
    $(window).scroll(function(){  
        if($(document).scrollTop() > 100)
        {    
              $('#footer').addClass("show");
        }
        else
        {
            $('#footer').removeClass("show");
        }
    });
})​ 
```

# CSS

`show`然后，使用 CSS，根据该类的存在显示或隐藏页脚。我们可以使用 css 过渡来动画变化

```
#footer 
{
    background: black;
    width: 100%;
    height: 0px;
    position: fixed;
    z-index:300;
    bottom: 0;
    overflow:none;

   -moz-transition:all 0.5s ease-in-out;
   -o-transition:all 0.5s ease-in-out;
   transition:all 0.5s ease-in-out;
   -webkit-transition:all 0.5s ease-in-out;
}
#footer.show
{
    height: 48px;

   -moz-transition:all 0.5s ease-in-out;
   -o-transition:all 0.5s ease-in-out;
   transition:all 0.5s ease-in-out;
   -webkit-transition:all 0.5s ease-in-out;
} 
```

正如您在上面看到的，我们在显示页脚时正在更改页脚的高度。当`overflow:none;`高度为 0 时，停止显示页脚的内容。

使用此方法，您还可以通过设置不透明度值来淡入页脚，或为颜色变化设置动画。

# JS小提琴：

[http://jsfiddle.net/DigitalBiscuits/3zh6h/5/](http://jsfiddle.net/DigitalBiscuits/3zh6h/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:40:39.033

您可以使用[fadeIn()](http://api.jquery.com/fadeIn/)和[fadeOut()](http://api.jquery.com/fadeOut/) jQuery 效果为页脚设置动画。

```
$(window).scroll(function() {           
    if($(document).scrollTop() > 100)
        $('#footer').fadeIn();
    else
        $('#footer').fadeOut();
    }); 
```

如果您深入研究这些效果，您会发现两者都使用[animate()](http://api.jquery.com/animate/)效果和不透明度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T18:36:36.943

我对您的问题进行了一些有趣的实验，但我还没有看到其他人尝试过这个（[小提琴](http://jsfiddle.net/3zh6h/6/)）：

```
$(function() {
    $(window).scroll(function() {
        $("#footer").fadeTo("500", $(document).scrollTop() / 100);
    });
})​ 
```

如果用户向上滚动，此解决方案还将使页脚淡出。

这个解决方案有一个主要缺点：因为它使用该`fadeTo()`方法，在 IE 中的支持将非常有限（实际上，它会在大多数版本的 IE 中中断 - 我不记得对 9 和 10 的支持是什么） . 您可以通过使用十几个插件/修复中的一个来解决此问题，以在 IE 中添加对动画`opacity`属性的支持，并相应地修改此解决方案（使用`animate()`代替`fadeTo()`）。

如果您有任何问题，请告诉我。祝你好运！:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T20:10:27.820

我认为应该是这样的：

[http://jsfiddle.net/gQqLJ/](http://jsfiddle.net/gQqLJ/)

```
$(function() {
    $(window).scroll(function() {
        if ($(document).scrollTop() > 100) {

            $('#footer').slideDown(650);

        }else if($(document).scrollTop() < 100){

            $('#footer').fadeOut(500);
        }
    });
})​;​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-24T10:14:37.893

**jQuery 和动画**

对于这样的事情，我建议使用滑动和淡入淡出的组合效果。它看起来更自然，因此在发生时不会震动用户。

工作小提琴：http: [//jsfiddle.net/3zh6h/32/](http://jsfiddle.net/3zh6h/32/)

相关的代码片段（未在小提琴中使用，但在这里演示如何使用编码最佳实践来做到这一点）：

```
jQuery.fn.slideFadeToggle = function(speed, easing, callback) {
  return this.animate({opacity: 'toggle', height: 'toggle'}, speed, easing, callback);  
}; 
```

**最佳实践**

关于最佳实践，您可以在[此处](http://www.learningjquery.com/2008/02/simple-effects-plugins)找到关于自定义动画以及如何以可重用方式编写它们的非常好的帖子。

至少我知道没有“jquery 页脚动画”这样的最佳实践，但是您可以从流行的、设计良好的网站中汲取灵感，以了解哪些有效，哪些无效。这些例子并不好，因为它取决于您网站的性质和背景。

**CSS**

我不建议 CSS 过渡，因为规范**尚未**最终确定（官方草稿，可以在[这里](http://www.w3.org/Style/CSS/current-work)找到讨论）。

此外，它们不是跨浏览器兼容的，尤其是旧浏览器。但话又说回来，这只是我的意见。

# android - 没有得到当前的纬度

> ID：13250178
> 
> 赞同：0
> 
> 时间：2012-11-06T11:35:34.970
> 
> 标签：android, gps, android-location

我正在开发应用程序，我想在单击按钮时获取纬度和经度。但它总是显示 0。我的代码如下。AndroidGPSTrackingActivity.java

```
package com.example.gpstracking;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class AndroidGPSTrackingActivity extends Activity {

Button btnShowLocation;

// GPSTracker class
GPSTracker gps;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    btnShowLocation = (Button) findViewById(R.id.btnShowLocation);

    // show location button click event
    btnShowLocation.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {        
            // create class object
            gps = new GPSTracker(AndroidGPSTrackingActivity.this);

            // check if GPS enabled     
            if(gps.canGetLocation()){

                double latitude = gps.getLatitude();
                double longitude = gps.getLongitude();

                // \n is for new line
                Toast.makeText(getApplicationContext(), "Your Location    is    - \nLat: " + latitude + "\nLong: " + longitude, Toast.LENGTH_SHORT).show(); 
            }else{
                // can't get location
                // GPS or Network is not enabled
                // Ask user to enable GPS/network in settings
                gps.showSettingsAlert();
            }

        }
    });
}

 } 
```

第二类如下。

GPSTracker.java

```
 package com.example.gpstracking;

      import android.app.AlertDialog;
      import android.app.Service;
      import android.content.Context;
      import android.content.DialogInterface;
      import android.content.Intent;
      import android.location.Location;
      import android.location.LocationListener;
      import android.location.LocationManager;
      import android.os.Bundle;
      import android.os.IBinder;
      import android.provider.Settings;
      import android.util.Log;
      import android.widget.Toast;

     public class GPSTracker extends Service implements LocationListener {

private final Context mContext;

// flag for GPS status
boolean isGPSEnabled = false;

// flag for network status
boolean isNetworkEnabled = false;

// flag for GPS status
boolean canGetLocation = false;

Location location; // location
double latitude = 37.422006; // latitude
double longitude = -122.084095; // longitude

// The minimum distance to change Updates in meters
private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 10; // 10 meters

// The minimum time between updates in milliseconds
private static final long MIN_TIME_BW_UPDATES = 1000 * 60 * 1; // 1 minute

// Declaring a Location Manager
protected LocationManager locationManager;

public GPSTracker(Context context) {
    Log.i("*******", "Inside constructor");
    this.mContext = context;
    getLocation();
}

public Location getLocation() {
    try {
        Log.i("*******", "Inside get Location");
        locationManager = (LocationManager) mContext
                .getSystemService(LOCATION_SERVICE);

        // getting GPS status
        isGPSEnabled = locationManager
                .isProviderEnabled(LocationManager.GPS_PROVIDER);
        Log.i("*******", ""+isGPSEnabled);
        // getting network status
        isNetworkEnabled = locationManager
                .isProviderEnabled(LocationManager.NETWORK_PROVIDER);
        Log.i("*******", ""+isNetworkEnabled);
        if (!isGPSEnabled && !isNetworkEnabled) {
            // no network provider is enabled
            Toast.makeText(getApplicationContext(), "GPS:"+isGPSEnabled+"NEtwork:"+isNetworkEnabled, Toast.LENGTH_LONG).show();
        } else {
            this.canGetLocation = true;
            if (isGPSEnabled) {
                Log.i("*********", "Inside isGPSEnabled");
                if (location == null) {
                    locationManager.requestLocationUpdates(
                            LocationManager.GPS_PROVIDER,
                            0,
                            0, this);
                    Log.d("GPS Enabled", "GPS Enabled");
                    if (locationManager != null) {
                        Log.i("*********", locationManager.toString());
                        location = locationManager
                                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                        if (location != null) {
                            Log.i("*********", location.toString());
                            latitude = location.getLatitude();
                            longitude = location.getLongitude();
                            Log.i("*********", "Lat:"+latitude+"Long:"+longitude);
                        }Log.i("*********", location.toString());
                    }
                }
            }
            if (isNetworkEnabled) {
                Log.i("*********", "Inside isNetworkEnabled");
                locationManager.requestLocationUpdates(
                        LocationManager.NETWORK_PROVIDER,
                        0,
                        0, this);
                Log.d("Network", "Network");
                if (locationManager != null) {
                    location = locationManager
                            .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                    if (location != null) {
                        latitude = location.getLatitude();
                        longitude = location.getLongitude();
                    }
                }
            }
            // if GPS Enabled get lat/long using GPS Services

        }

    } catch (Exception e) {
        e.printStackTrace();
    }

    return location;
}

/**
 * Stop using GPS listener
 * Calling this function will stop using GPS in your app
 * */
public void stopUsingGPS(){
    if(locationManager != null){
        locationManager.removeUpdates(GPSTracker.this);
    }       
}

/**
 * Function to get latitude
 * */
public double getLatitude(){
    if(location != null){
        latitude = location.getLatitude();
    }

    // return latitude
    return latitude;
}

/**
 * Function to get longitude
 * */
public double getLongitude(){
    if(location != null){
        longitude = location.getLongitude();
    }

    // return longitude
    return longitude;
}

/**
 * Function to check GPS/wifi enabled
 * @return boolean
 * */
public boolean canGetLocation() {
    return this.canGetLocation;
}

/**
 * Function to show settings alert dialog
 * On pressing Settings button will lauch Settings Options
 * */
public void showSettingsAlert(){
    AlertDialog.Builder alertDialog = new AlertDialog.Builder(mContext);

    // Setting Dialog Title
    alertDialog.setTitle("GPS is settings");

    // Setting Dialog Message
    alertDialog.setMessage("GPS is not enabled. Do you want to go to settings menu?");

    // On pressing Settings button
    alertDialog.setPositiveButton("Settings", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog,int which) {
            Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
            mContext.startActivity(intent);
        }
    });

    // on pressing cancel button
    alertDialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
        dialog.cancel();
        }
    });

    // Showing Alert Message
    alertDialog.show();
}

@Override
public void onLocationChanged(Location location) {
    Toast.makeText(getApplicationContext(), "Location Changed called", Toast.LENGTH_SHORT).show();
    latitude =location.getLatitude();
    longitude = location.getLongitude();
}

public void onProviderDisabled(String provider) {
}

public void onProviderEnabled(String provider) {
}

public void onStatusChanged(String provider, int status, Bundle extras) {
}

@Override
public IBinder onBind(Intent arg0) {
    return null;
}

} 
```

我还在清单中添加了以下权限。

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

谁能告诉我哪里出错了。我试图通过网络提供商获得很长的时间，但它们差异很大。即使对于相同的位置，距离网络很远也是不同的。

提前谢谢你。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:44:19.067

试试这个方法...

```
LocationManager locManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE); 
                locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,1000L,500.0f, locationListener);
                Location location = locManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
                if(location != null)                                
                {
                    double latitude = location.getLatitude();
                    double longitude = location.getLongitude();

                } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T11:40:08.143

当您创建位置侦听器时，实际获取位置需要一段时间，您可能希望从 onClick 更改 gpsTracker 类的创建，或者至少保存您在第一次单击时创建的实例，直到您销毁它，也许在获得一个位置，因此您不会每次都创建它，从而导致创建另一个位置侦听器。

获取位置后，您可以使用处理程序将消息传递给您的活动。

您的**处理程序**可能是这样的：为您的活动创建一个公共处理程序

```
public Handler handler; 
```

然后将此添加到您的 onCreate 方法中

```
handler = new Handler(new Handler.Callback() {

        @Override
        public boolean handleMessage(Message msg) {
            // TODO Auto-generated method stub
            if(msg.what == 0){
                //do the methods that require knowing your location you location
                return true;
            }
            return false;
        }
    }); 
```

您的`GPSTracker`班级将其添加到 onLocationChanged 上：

```
Message msg = new Message();
msg.what = 0;
((AndroidGPSTrackingActivity)mContext).handler.sendMessage(msg); 
```

[您可以在此处](http://www.vogella.com/articles/AndroidPerformance/article.html#handler)阅读有关处理程序的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T11:41:10.853

大多数设备在您拨打电话时都无法快速获取 gps `LocationListener`。所以我所做的是我试图在 AsyncTask 中得到它的条件`latitude and longitude !=0`。如果这个条件成功执行，那么我们就得到了纬度和经度。之后，您可以做任何您想做的事情。

这是异步任务中的代码

```
public class GPSLocation extends AsyncTask<Void, Void, Void>
    {  
        boolean running =true;
                @Override
                protected void onPreExecute()
                {  
                    super.onPreExecute(); 
                    progressDialog = new ProgressDialog(RoadMaintenanceActivity.this);
                    progressDialog.setOnCancelListener(new DialogInterface.OnCancelListener(){
                          public void onCancel(DialogInterface dialog) {
                              getgps.cancel(true);  
                          }
                    });
                    LocationManager mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE); 
                    LocationListener mlocListener = new MyLocationListener();  
                    mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener);    
                    progressDialog.setCancelable(true);
                    progressDialog.setMessage("Getting GPS Location...");
                    progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
                    progressDialog.setProgress(1);
                    progressDialog.show();

                } 

                @Override 
                protected void onProgressUpdate(Void... values) {
                    super.onProgressUpdate(values);
                    // Things to be done while execution of long running operation is in progress. For example updating ProgessDialog
                 }

                @Override 
                protected void onPostExecute(Void result)
                {  
                        progressDialog.cancel(); 
                }

                @Override
                protected Void doInBackground(Void... params) {  
                    boolean isDataSubmitted = false; 
                 while(!isDataSubmitted)
                        {   
                            if(longitude !=0 && latitude!=0) 
                            {
                                    //Do your operation here 
                                isDataSubmitted = true;
                            } 
                    }

                    return null;    
                } 
     } 
```

它应该工作。

# linux - 如果无法锁定文件，如何在使用羊群时显示错误消息

> ID：13250180
> 
> 赞同：1
> 
> 时间：2012-11-06T11:35:38.297
> 
> 标签：linux, bash

我的 bash 代码如下所示：

```
 set -e
  (
     flock -n 9
     main $@
   ) 9>/var/lock/mylockfile 
```

但目前它不会显示任何错误消息，如果它无法锁定文件。有没有办法显示错误信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:10:05.257

使用“set -e”，您可以使用 ERR 信号。如 bash 的手册页中所述（带有选项“-e”的“set”命令的描述）：

```
"A trap on ERR, if set, is executed before the shell exits." 
```

因此，您可以尝试以下操作：

```
set -e
(
  trap 'echo flock failed.' ERR
  flock -n 9
  trap - ERR   # reset ERR trap
  main $@
) 9>/var/lock/mylockfile 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T17:15:05.327

手册页中的示例说：

```
(
     flock -n 9 || exit 1
     # ... commands executed under lock ...
   ) 9>/var/lock/mylockfile 
```

即如果flock 失败，它就会退出——你为什么不直接使用它呢？如果你想显示错误，你可以试试这个：

```
(
         # paranoia: flock may fail with an exit code other than 1,
         # eg if it can't be found in $PATH
         if flock -n 9 ; then
           do_stuff
         else
           show_error
         fi
) 9>$lockfile 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T13:05:32.197

您应该检查返回码`flock -n`

```
 set -e
  (
     flock -n 9
     if [ "$?" -eq 1 ] ; then 
        echo "could not lock"
        exit 1
     fi
     main $@
   ) 9>/var/lock/mylockfile 
```

# android - 在 Android 4.1 上实现 DragNDrop 时返回错误的视图引用

> ID：13250183
> 
> 赞同：0
> 
> 时间：2012-11-06T11:35:51.620
> 
> 标签：android, drag-and-drop

我有一个错误，我不知道如何修复。关键是我应该为我的列表视图实现 DragNDrop 功能，但我的 minSdkVersion="7"，所以我使用了[Eric Harlow](https://sites.google.com/site/ericbharlow/sample-code/DragNDrop.zip?attredirects=0&d=1)的框架。

当我使用 Android 2.1、2.2、2.3.6 到 4.0 时，一切都以正确的方式运行，但是当我在 Android 4.1.2 上测试我的应用程序时，我遇到了一个错误。问题的核心是：让我假设我的列表视图包含 4 个项目，我将第 4 个项目拖到第 3 个位置。

完成后，我想再次将 4 个项目拖动到 2 个位置。当我第一次从 4 位置拖放到 3 位置时，结果是好的，我的视图无效。但是当我第二次想要拖动 Ndrop 4 项时，我发现在我的手指下我有旧的第 4 元素（现在它是第 3 元素），而不是新元素。

在我的调查中，当我试图让视图对象移动时，我对视图对象的引用有误，`View item = getChildAt(itemIndex);`但我不知道为什么它在 Android 早期 4.1.2 上可以完美运行，并且在 Android 4.1.2 下可以使用错误。

有人知道如何解决这个错误吗？

下面是对代码的回顾：

```
 public class DragNDropListView extends ListView {

    private static final int OUR_LOCATION_ELEMENT = 1;
    private static final int MIN_INDEX_ELEM_DONT_TOUCH = 2;
    boolean mDragMode;

    int mStartPosition;
    int mEndPosition;
    int mDragPointOffset;       //Used to adjust drag view location

    ImageView mDragView;

    DropListener mDropListener;
    RemoveListener mRemoveListener;
    DragListener mDragListener;
    UpdateOurLocationListener mOnClickListener;

    Context context;

    public DragNDropListView(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.context = context;
    }

    public void setDropListener(DropListener l) {
        mDropListener = l;
    }

    public void setRemoveListener(RemoveListener l) {
        mRemoveListener = l;
    }

    public void setDragListener(DragListener l) {
        mDragListener = l;
    }

    public void setOnOurLocationListener (UpdateOurLocationListener l) {
        mOnClickListener = l;
    }

    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        final int action = ev.getAction();
        final int x = (int) ev.getX();
        final int y = (int) ev.getY();  

        if (action == MotionEvent.ACTION_DOWN &&
                x > (this.getWidth()-context.getResources().getDimension(R.dimen.image_move_width))&&
                pointToPosition(x,y) == OUR_LOCATION_ELEMENT) {
                mOnClickListener.onOurLocationClick();
                mDragMode = false;
        }

        if (action == MotionEvent.ACTION_DOWN &&
            x > (this.getWidth()-context.getResources().getDimension(R.dimen.image_move_width))&&
            pointToPosition(x,y)>MIN_INDEX_ELEM_DONT_TOUCH) {
            mDragMode = true;
        }

        if (!mDragMode) 
            return super.onTouchEvent(ev);

        switch (action) {
            case MotionEvent.ACTION_DOWN:
                mStartPosition = pointToPosition(x,y);
                if (mStartPosition != INVALID_POSITION) {
                    int mItemPosition = mStartPosition - getFirstVisiblePosition();
                    mDragPointOffset = y - getChildAt(mItemPosition).getTop();
                    mDragPointOffset -= ((int)ev.getRawY()) - y;
                    startDrag(mItemPosition,y);

                    drag(0,y);// replace 0 with x if desired
                }   
                break;
            case MotionEvent.ACTION_MOVE:
                drag(0,y);// replace 0 with x if desired
                break;
            case MotionEvent.ACTION_CANCEL:
            case MotionEvent.ACTION_UP:
            default:
                mDragMode = false;
                mEndPosition = pointToPosition(x,y);
                stopDrag(mStartPosition - getFirstVisiblePosition());
                if (mDropListener != null && mStartPosition != INVALID_POSITION 
                        && mEndPosition != INVALID_POSITION 
                        && mEndPosition > MIN_INDEX_ELEM_DONT_TOUCH) {
                    mDropListener.onDrop(mStartPosition, mEndPosition);
                }
                break;
        }
        return true;
    }   

    // move the drag view
    private void drag(int x, int y) {
        if (mDragView != null) {
            WindowManager.LayoutParams layoutParams = (WindowManager.LayoutParams) mDragView.getLayoutParams();
            layoutParams.x = x;
            layoutParams.y = y - mDragPointOffset;
            WindowManager mWindowManager = (WindowManager) getContext()
                    .getSystemService(Context.WINDOW_SERVICE);
            mWindowManager.updateViewLayout(mDragView, layoutParams);

            if (mDragListener != null)
                mDragListener.onDrag(x, y, null);// change null to "this" when ready to use
        }
    }

    // enable the drag view for dragging
    private void startDrag(int itemIndex, int y) {
        stopDrag(itemIndex);
        Log.e ("startDrag " , "itemIndex = " + itemIndex);
        View item = getChildAt(itemIndex);                              //  ???
        Log.e ("startDrag - View item " , "item = " + item.toString());
        if (item == null) return;
        item.setDrawingCacheEnabled(true);
        if (mDragListener != null)
            mDragListener.onStartDrag(item);

        // Create a copy of the drawing cache so that it does not get recycled
        // by the framework when the list tries to clean up memory
        Bitmap bitmap = Bitmap.createBitmap(item.getDrawingCache());

        WindowManager.LayoutParams mWindowParams = new WindowManager.LayoutParams();
        mWindowParams.gravity = Gravity.TOP;
        mWindowParams.x = 0;
        mWindowParams.y = y - mDragPointOffset;

        mWindowParams.height = WindowManager.LayoutParams.WRAP_CONTENT;
        mWindowParams.width = WindowManager.LayoutParams.WRAP_CONTENT;
        mWindowParams.flags = WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE
                | WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE
                | WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON
                | WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN
                | WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS;
        mWindowParams.format = PixelFormat.TRANSLUCENT;
        mWindowParams.windowAnimations = 0;

        Context context = getContext();
        ImageView v = new ImageView(context);
        v.setImageBitmap(bitmap);      

        WindowManager mWindowManager = (WindowManager)context.getSystemService(Context.WINDOW_SERVICE);
        mWindowManager.addView(v, mWindowParams);
        mDragView = v;
    }

    // destroy drag view
    private void stopDrag(int itemIndex) {
        if (mDragView != null) {
            if (mDragListener != null)
                mDragListener.onStopDrag(getChildAt(itemIndex));
            mDragView.setVisibility(GONE);
            WindowManager wm = (WindowManager)getContext().getSystemService(Context.WINDOW_SERVICE);
            wm.removeView(mDragView);
            mDragView.setImageDrawable(null);
            mDragView = null;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:08:30.710

为了解决这个问题，我在调用 getChildAt(position) 之前使用了方法 layoutChildren()

# visual-studio-2010 - 在 base64 字符串中搜索的最佳方法是什么？

> ID：13250184
> 
> 赞同：0
> 
> 时间：2012-11-06T11:35:54.100
> 
> 标签：visual-studio-2010, search, base64, webtest, performance-testing

我正在使用 Visual Studio 2010，Web 测试项目。Web 请求具有 html body 的属性，当它保存到文件系统时，它被编码为 base64。

问题是当我试图在解决方案中搜索 html 正文（以 base64 编码）的内容时。普通搜索不会在这些字符串中搜索。最好的搜索方式是什么，最好使用 VS2010 IDE？（宏，扩展，一些外部工具......）

我想在ins中搜索的xml文件示例：

```
<StringHttpBody>tAC8AWQAiAA0ACgB9AA==</StringHttpBody> 
```

我希望得到存在确认 - 这个 base64 字符串是否包含一些编码的单词

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:43:59.133

您的问题不是很清楚，但是如果您正在谈论在编码字符串中进行搜索，我认为您别无选择，只能对其进行解码然后搜索。不过也没那么复杂：

```
public static void SearchInBase64(string encodedData, string searchText)
{
  byte[] encodedDataAsBytes
      = System.Convert.FromBase64String(encodedData);

  string decodedValue =
     System.Text.ASCIIEncoding.ASCII.GetString(encodedDataAsBytes);

  // Perform search on decodedValue
  ...

} 
```

**更新：** 根据您更新的问题，如果您希望它直接从 VS2010 IDE 运行。根据上述逻辑创建一个简单的程序，从命令行接收 2 个字符串。然后将该程序添加为外部工具，使用：

```
Tools -> External Tools 
```

# java - javac 失败并出现错误 JNU_GetStringPlatformChars: referenced symbol not found

> ID：13250187
> 
> 赞同：0
> 
> 时间：2012-11-06T11:36:09.233
> 
> 标签：java, javac, java-7

我的Java类是这样的；

```
import oracle.sqlj.runtime.Oracle;
import sqlj.runtime.ref.DefaultContext;

class Test
{

  public static void main (String args[]) throws SQLException

  {

    Connection conn=null;;
    PreparedStatement ps=null;

   Oracle.connect(TestInstallCreateTable.class, "connect.properties");

 conn = DefaultContext.getDefaultContext().getConnection();

 try {
    ps = conn.prepareStatement("DROP TABLE SALES");

    ps.executeUpdate();

 } catch (SQLException e) {
         ;             
 }

}
} 
```

我看到带有 jdk7 的 javac 出现以下错误。

```
ld.so.1: javac: fatal: relocation error: file 
/jdk7/jre/lib/sparc/libzip.so: symbol JNU_GetStringPlatformChars: referenced symbol not found 
```

为什么会发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-20T13:23:10.663

你在你的机器上安装了 ia32-libs 吗？在没有安装该库的 amd64 linux 实例上尝试以 32 位模式运行 64 位 java 时，我看到了类似的错误。

安装那个库（在我的情况下是`apt-get install ia32-libs`在 debian 上）解决了这个问题。

# java - 从同一个 JSP 中的 onclick() 文本字段中获取值参数

> ID：13250189
> 
> 赞同：0
> 
> 时间：2012-11-06T11:36:10.083
> 
> 标签：java, javascript, ajax, jsp, servlets

我正在写一个 Web 应用程序（众筹平台 - 学生项目），我的问题是一个 JSP 页面，用户可以在其中支持一个项目。我有一个用户的表单字段，他可以在其中输入他的捐赠金额，之后同一个 JSP 应该显示相关的奖励。最后他可以将动作提交给 Servlet。

```
<input type="text" class="login_spende" maxlength="10" id="spendeBetrag" name="spendeBetrag" value="1 &euro;" onFocus="if(this.value=='1 &euro;') this.value='';" onBlur="if(this.value=='')this.value='1 &euro;';">

<input type="button" value="Reward auswählen" onclick="doSomething()"> 
```

这是参考捐赠获得相关奖励的代码

```
<%
        List<RewardDAO> rewards = RewardDB.getProjektRewardsByBetrag(spendeBetrag, projektid);
            for (RewardDAO reward : rewards) {
        %>  
        <div class="rewards_spende_box">
            <div>

            </div>
            <div class="rewards_spende" style="background-color:#BBBBBB;" >
            <input type="checkbox" class="checkbox_spende" name="spendeReward" value="<%= reward.getRewardID() %>" />
            <div class="betrag_spende"><%=reward.getBetrag()%>&euro;</div>
            <div class="rewardtext_projektseite"><%=reward.getBeschreibung()%></div>
            </div>
        </div>  
        <%
            }
        %> 
```

“spendeBetrag”这个词是德语“donationValue”的意思；）

但是如何在用户确认他的捐赠价值后加载奖励列表，因为参数“spdeBetrag”`getProjektRewardsByBetrag(spendeBetrag, projektid);`取决于上面的文本字段。

我的想法是使用 JavaScript 执行此操作，奖励列表显示：没有，但当用户按下捐赠按钮时，它应该显示：阻止；但我无法将值“spdeBetrag”粘贴到 Java 代码中。

另一个想法是将这段代码粘贴到一个额外的 Servlet 中，但是我必须加载页面两次，这不是我想要的。

我希望有人有更好的主意。感谢您的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:46:32.943

尝试使用 AJAX。您可以在那里发布数据而无需重新加载整个页面。

# jquery - jQuery垂直自动滚动不起作用

> ID：13250191
> 
> 赞同：1
> 
> 时间：2012-11-06T11:36:14.040
> 
> 标签：jquery

我试图让 div 中的文本垂直自动滚动（以一种速度）并在用户将光标悬停在它上面时暂停，但似乎无法让我的代码正常工作。我怎样才能实现这一目标？到目前为止，这是我的代码：

JavaScript

```
$('#scroll').children().animate({'margin-top': '-=' + ($('#scroll').children().height()-100)}, 10000); 
```

HTML

```
<div id="scroll">Content here and more content here<br />
        <br />
        Content here and more content here<br />
        <br />
        Content here and more content here<br />
        <br />
        Content here and more content here<br />
        <br />
        Content here and more content here<br />
        <br />
        Content here and more content here<br />
        <br />
        Content here and more content here<br />
        <br />
        Content here and more content here<br />
        <br />
        Content here and more content here<br />
        <br />
        Content here and more content here<br />
        <br />
        Content here and more content here<br />
        <br />
        Content here and more content here<br />
        <br />
        Content here and more content here<br />
        <br />
        Content here and more content here </div>​ 
```

​另外，我也在这里上传了我的代码：http: [//jsfiddle.net/5DmZh/](http://jsfiddle.net/5DmZh/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:12:27.337

一种更具成本效益的方法是在其中放置另一个包装器`#scroll`并为其设置动画，而不是尝试定位每个子元素。

**[在jsfiddle](http://jsfiddle.net/8KjX8/73/)**查看我的代码，尽管我猜你希望动画永远循环。

# embedded - 在 Windows CE 5.0 中启动时运行应用程序

> ID：13250200
> 
> 赞同：1
> 
> 时间：2012-11-06T11:36:39.357
> 
> 标签：embedded, compact-framework, windows-ce, c#-2.0

我目前正在尝试在 Windows CE 5.0 设备启动期间自动启动用 .Net CF 2.0 编写的应用程序。

基于这篇文章： http: [//blogs.msdn.com/b/cenet/archive/2004/12/03/274661.aspx](http://blogs.msdn.com/b/cenet/archive/2004/12/03/274661.aspx)我尝试将我的应用程序的快捷方式放在 Windows 目录的 Startup 文件夹中或添加注册表值像 "Launch77"="app.exe" 这样的 HKLM\init 都不起作用，因为设备的存储和注册表是易失的，并且在设备关闭时会重置。

然后我尝试使用注册表配置单元并制作了一个 system.hv 以使注册表更改持久化，但在 HKLM\init\BootVars 中，SystemHive 设置为驻留在易失性存储上的文件夹。

有没有其他方法可以启动应用程序？我可以强制设备使用存储卡备份/恢复注册表吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T15:06:48.217

答案实际上取决于设备的配置。如果设备上没有保留任何内容，包括注册表，那么除非 OEM 提供一些专有的“启动”序列（很多都提供，但它是 OEM 特定的），否则很难让它工作。

通常，如果您有一个持久文件系统，您可以将应用程序的快捷方式放在 \Windows\Startup 文件夹中。如果文件系统不是持久的，这将不起作用。

如果您有一个持久注册表（您可能必须在进行更改后调用 RegFlushKey 才能使其持久），那么使用该`HKLM\Init`密钥应该可以工作（[假设您等到所有适当的 API 都准备好启动 CLR](http://blog.opennetcf.com/ctacke/2009/04/15/AutolaunchingCFAppsWithTheHKLMInitRegistryKey.aspx)）。

如果这些都不可用，请与 OEM 联系。我用过的几乎所有设备都有一些从存储中启动应用程序的机制（内部闪存、USB、SD 等），但它又是非常特定于设备的，所以我无法为您指明任何特定的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-03T13:31:43.633

您可以制作一个 .cpy 文件。

将您的应用程序保存在 Wince 的 /application 文件夹（或子文件夹）中。因此，在 /application 文件夹中创建一个名为***somename.cpy***的文件，其中包含：

```
\Application\Yoursubfolder\yourapp.exe  >  \Windows\StartUp\yourapp.exe 
```

每次 Wince 启动（热启动或冷启动）时，它都会将您的应用程序复制到 Windows 启动文件夹，然后启动它。

# c# - JSON 字符串到 XML 字符串

> ID：13250203
> 
> 赞同：0
> 
> 时间：2012-11-06T11:36:56.237
> 
> 标签：c#, asp.net, serialization, type-conversion, asp.net-1.1

我想知道**如何**在**ASP.NET 1.1中将 JSON 字符串转换为 XML 字符串**

我不能使用第三方库进行一些限制。

任何建议都会有很大帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T11:37:49.423

您必须将此 JSON 反序列化为一个对象，然后在 XML 中再次序列化此对象。我认为这是一种简单的方法。

# php - 登录 PHP 脚本 用户名和密码正确，但无法登录

> ID：13250206
> 
> 赞同：1
> 
> 时间：2012-11-06T11:37:05.230
> 
> 标签：php, login

我必须用我的 PHP 登录脚本修复一些错误，当用户使用大写字母创建帐户时，它不会让他以全小写字母登录，所以我决定修复它，但是，它不会登录在，它只是重定向到我的消息“发生意外错误”的登录。

它通过用户名检查，但不检查密码，并且它不返回密码不正确。

我尝试创建一个新帐户，它仍然进入那个错误页面，但这一次，它实际上让我登录了，但不是你已经成功登录，现有用户无法登录，而是新的我做了。

而且我确实尝试了密码重置，它有效，但不会导致成功登录消息。

我所做的另一个更改是密码的哈希，因为我使用用户名密码 Salt，并且我从更改为`$hash = hash('sha256',$Username.$Password.$Salt);`，`$hash = hash('sha256',strtolower($Username).$Password.$Salt);`因为当用户名是大写或小写时，它对密码检查有影响。

我的代码：

```
<?php
    /* Mysql data */
    $MysqlUsername = "root";
    $MysqlPassword = "*********";
    $MysqlHostname = "localhost";
    $MysqlDatabase = "teamgamersnet";
    $Salt = "******";
    $Username = $_POST['Username'];
    $Password = $_POST['Password'];
    $Remember = $_POST['Remember'];
    $Cookie = "TGN";
    $IP       = $_SERVER['REMOTE_ADDR'];
    if (empty($Username) || empty($Password)) { die("Please fill in all the fields"); }

    $hash = hash('sha256',strtolower($Username).$Password.$Salt);

    $Sql = new mysqli($MysqlHostname, $MysqlUsername, $MysqlPassword, $MysqlDatabase);
    if ($Sql->connect_error){ echo $Sql->connect_error; }
    $sUser = $Sql->real_escape_string($Username);
    $sPass = $Sql->real_escape_string($Password);
    $xPass = $Sql->real_escape_string($hash);

    $CheckUser = $Sql->query("SELECT Username FROM `users` WHERE `Username` = '".$sUser."'");
    $CheckPass = $Sql->query("SELECT Password FROM `users` WHERE `Username` = '".$sUser."'");
    $CheckActive = $Sql->query("SELECT Activated FROM `users` WHERE `Username` = '".$sUser."'");
    if ($CheckUser->num_rows == 0) { header("Location: /?p=Login&wrongusr=true"); die(); }
    $xCheckUser = $CheckUser->fetch_array(MYSQLI_ASSOC);
    $xCheckPass = $CheckPass->fetch_array(MYSQLI_ASSOC);
    $xCheckAct =  $CheckActive->fetch_array(MYSQLI_ASSOC);
    if ($xCheckAct['Activated'] == "false") { header("Location: /?p=Login&activate=true"); die(); }
    if(strtolower($Username) == strtolower($xCheckUser['Username'])) { // Check if username match
        if($hash == $xCheckPass['Password']) { // Check if password is correct
        if(isset($Remember)){
                setcookie ($Cookie."User", htmlspecialchars($Username));
                setcookie ($Cookie."Pass", $hash);
        }
        else
        {
                setcookie ($Cookie."User", htmlspecialchars($Username), time() + 3600);
                setcookie ($Cookie."Pass", $hash, time() + 3600);
        }
                header("Location: /?login=true"); // Send them to home page 
    }

    else
    {
        header("Location: /?p=Login&wrongpwd=true"); // Send them to home page 
    }
    header("Location: /?p=Login&unxer=true"); // Username error, Idk why
    }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T13:02:03.527

默认字符集和排序规则是`latin1`and `latin1_swedish_ci`，因此默认情况下非二进制字符串比较不区分大小写。这意味着，如果您使用 搜索，您将获得所有以or`col_name LIKE 'a%'`开头的列值。`A``a`

要使此搜索区分大小写，请确保其中一个操作数具有区分大小写或二进制排序规则。例如，如果要比较具有`latin1`字符集的列和字符串，则可以使用`COLLATE`运算符使任一操作数具有`latin1_general_cs`or`latin1_bin`排序规则。

您只需要使用or更改您的`Username`和`Password`字段的排序规则，然后它就会相应地工作。`latin1_general_cs``latin1_bin`

# c# - 将数据集传递给通用处理程序 (ashx)

> ID：13250212
> 
> 赞同：1
> 
> 时间：2012-11-06T11:37:22.880
> 
> 标签：c#, asp.net, httpcontext, ashx, generic-handler

如何将数据集传递给通用处理程序？我不想使用会话或视图状态来做到这一点。

我正在尝试返回从输入数据集转换的 excel 文件作为响应。

我已经将数据集内容显示为一个网格中的报告，该网格使用用户设置的一些标准进行过滤。由于查询很昂贵，我也不想在处理程序中执行相同的操作。

如果我可以通过引用处理程序来传递数据集会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:52:16.127

不能通过，需要缓存结果

您不想使用会话的任何原因？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T12:59:21.270

除了创建处理类的对象并分配给它之外，我找不到任何将数据集传递给 ashx 的方法。然后我调用了对象的 ProcessRequest 方法。它工作正常，构建成功。但是当我尝试发布网站时，代码给出了找不到类名的错误。代码如下所示。

```
//this is working fine in VS (build succeeded and ProcessRequest returned the file!) 
//but didn't compile only on publishing
MyHandler handlerObj = new myHandler();
handlerObj.DataSource = myDataset;
handlerobj.ProcessRequest(Context); 
```

我通过用普通的 c# 类替换通用处理程序解决了这个问题，该类具有接受上下文和数据集的方法。然后我在类中调用该方法，将文件流写入 Context.Response 中，它工作得很好。该类的作用与处理程序相同，无需从 IHttpContext 继承

```
public void ProcessDownload(HttpContext context, DataSet DataSource)
{
    context.Response.Clear();
    context.Response.ContentType = "application/vnd.ms-excel";
    MemoryStream file = getExcelMemStream(DataSource);
    context.Response.AddHeader("Content-Disposition", string.Format("attachment;filename={0}", "myFile.xls"));
    context.Response.BinaryWrite(file.GetBuffer());
    context.Response.End();
} 
```

# autocomplete - Sublime Text 2 自动完成快捷方式不起作用

> ID：13250213
> 
> 赞同：3
> 
> 时间：2012-11-06T11:37:23.830
> 
> 标签：autocomplete, ide, editor, sublimetext2, shortcut

我现在真的要疯了。Sublime Text 2 (ctrl+space ??) 中自动完成的快捷方式对我不起作用。每次我按 ctrl+space 时，它​​都会给我我之前输入的最后一个单词。但是在我打字时，代码完成确实有效。

任何人都知道如何解决这个问题或有什么问题？

一个视频来说明什么意思：[http ://shots.wouterds.be/ST2-CodeCompletion-Help-0oD220SKlB.mov](http://shots.wouterds.be/ST2-CodeCompletion-Help-0oD220SKlB.mov)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T18:47:18.517

那个特定的弹出窗口根本不是 Sublime Text 2 的内置自动完成对话框——它是[SublimeCodeIntel](https://github.com/Kronuz/SublimeCodeIntel)代码建议窗口。

Sublime Text 2 本身仅提供基于片段、API 注入完成、`.sublime-completions`文件和缓冲区中的单词的自动完成建议（有关更多信息，请参见[此处](http://docs.sublimetext.info/en/latest/extensibility/completions.html)）。另一方面，SublimeCodeIntel 根据您使用的语言和（可能）您正在处理的项目构建建议库。您应该能够通过检查弹出窗口的内容与您的工作文件的内容来判断哪个窗口 - SublimeCodeIntel 的建议将包含更多信息（如`(function)`关键字），并且可能包含当前文件中不存在的单词。

SublimeCodeIntel 的建议列表会在您键入时自动弹出，但在您的`Preferences -> Package Settings -> SublimeCodeIntel -> Key Bindings -- Default`文件中列出了一个独特的键盘快捷键。`Ctrl+Space`调用默认的自动完成对话框。您可能会调整完成快捷方式，以便`Ctrl+Space`通过添加以下行来提高 SublimeCodeIntel 的自动完成列表...

```
{ "keys": ["ctrl+space"], "command": "code_intel_auto_complete" } 
```

...到您的`Preferences -> Key Bindings -- User`文件中，尽管这样做可能会弄乱常规自动完成窗口的外观。

# java - Web服务中如何使用HashMap作为参数

> ID：13250222
> 
> 赞同：0
> 
> 时间：2012-11-06T11:37:56.200
> 
> 标签：java, web-services, collections, wsdl, jdeveloper

我正在尝试创建一个动态 Web 服务，其中我将期待一个 Java 哈希映射或一个数组列表作为参数。

我在类代码中使用以下代码：

```
package demo;

import java.util.ArrayList;

import javax.jws.WebService;

@WebService
public class HashMapTest {
    public HashMapTest() {
        super();
    }

    public int getResponse(ArrayList<String> hm) {
        return hm.size();
    }
} 
```

我正在使用 IDE：Oracle Jdeveloper 11g。当我同样使用向导时，输出 WSDL 如下所示：

```
<?xml version="1.0" encoding="UTF-8" ?>
<wsdl:definitions
     name="HashMapTestService"
     targetNamespace="http://demo/"
     xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
     xmlns:tns="http://demo/"
     xmlns:xsd="http://www.w3.org/2001/XMLSchema"
     xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/"
     xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
     xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/"
    >
    <wsdl:types>
    </wsdl:types>
    <wsdl:portType name="HashMapTest">
    </wsdl:portType>
    <wsdl:binding name="HashMapTestSoapHttp" type="tns:HashMapTest">
        <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    </wsdl:binding>
    <wsdl:service name="HashMapTestService">
        <wsdl:port name="HashMapTestPort" binding="tns:HashMapTestSoapHttp">
            <soap:address location="http://localhost:7101/DemoServer-Demo-context-root/HashMapTestPort"/>
        </wsdl:port>
    </wsdl:service>
</wsdl:definitions> 
```

很容易看出，WSDL 已损坏且无法使用。

它只是 Jdeveloper 中的一个错误，还是我们可以不使用 Web 服务中的 Collections API 作为参数？

请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T13:32:47.557

这是由 JAXB 中的错误引起的。使用以下代码：

```
public class DTOObject
{ 
        HashMap hm = new HashMap();

    public void setHm(HashMap hm) {
        this.hm = hm;
    }

    public HashMap getHm() {
        return hm;
    }

    public int size() {
        return hm.size();
    }
} 
```

和

```
public class HashMapTest {
    public HashMapTest() {
        super();
    }

    public int getResponse(Wrapped hm) {

        System.out.println(hm);
        return hm.size();
    }

} 
```

它将解决问题并正确创建 wsdl。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-06T11:44:50.967

您不能在 Web 服务中使用技术相关类型。您应该使用 String 或 Byte 。如果要将集合作为参数传递，则将其序列化并以字节的形式将其作为参数传递。在另一端创建集合表单字节的实例。

# mysql - 我可以在事后修改表中列的属性吗

> ID：13250223
> 
> 赞同：1
> 
> 时间：2012-11-06T11:38:00.870
> 
> 标签：mysql

我在 MySQL 表中有一个时间戳列。该列的默认值为`CURRENT_TIMESTAMP`，我想让该列的**ON UPDATE**属性也等于，`CURRENT_TIMESTAMP`而不必删除并重新添加该列，因为这会导致我丢失所有数据。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:40:48.833

您应该能够通过以下`ALTER`语句成功地做到这一点：

```
ALTER TABLE yourtable
  MODIFY the_timestamp_column TIMESTAMP
     DEFAULT CURRENT_TIMESTAMP 
     ON UPDATE CURRENT_TIMESTAMP; 
```

它在我的快速测试中正常工作。

# android - 格式化动态Edittext Android

> ID：13250231
> 
> 赞同：0
> 
> 时间：2012-11-06T11:38:43.263
> 
> 标签：android, android-layout, android-intent

ANDROID 我在 xml 中定义了一个布局，并有一个静态文本视图、编辑文本和复选框，它们的格式如下：

```
android:layout_width="0px"
android:layout_height="wrap_content"
android:layout_weight="2"
android:singleLine="true"
android:textSize="14dp"
android:width="180dp" 
```

我添加`textview`,`edittext`和`checkbox`动态的。我需要新添加的具有与布局上已经存在的（静态的）相同的视觉显示！有人可以指导或指出我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:47:01.913

您可以像这样**创建任何动态控件。**

在这里，我以与其他人相同的方式显示编辑文本。

```
 EditText et = new EditText(this);  
 et.setText("");
 et.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:48:54.327

您可以在每次需要 textview、edittext 和 chekbox 时通过膨胀来添加布局。这样您的布局将具有相同的外观。因为您在 xml 中重用静态布局。

有关详细信息，请参阅[布局膨胀](http://developer.android.com/reference/android/view/LayoutInflater.html)

你有一个带有 textview、edittext 和 checkbox 的布局。现在你将把布局用作视图。就像你说的每一行你必须膨胀布局并将其添加到行中。所以对于每一行你都会有副本布局。

```
TableLayout layout=(TableLayout)findViewById(R.id.tblLayout); 
```

现在您可以在扩展布局后添加视图

```
 View rowView = inflater.inflate(R.layout.row_layout, null, true);
   TableRow tblrow=new TableRow(this);
   tblRow.add(rowView);
   layout.add(tblRow); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T12:03:56.920

使用以下代码进行有关 EditText 的动态配置。

```
EditText my_edit = (EditText) findViewById(R.id.my_edit);

LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
params.weight = 2.0f;
my_edit.setLayoutParams(params);
my_edit.setTextSize(20);
my_edit.setWidth(180);
my_edit.setSingleLine(true); 
```

为此，您必须需要 LinearLayout 作为 EditText 的父级。

我希望这对你有所帮助。

谢谢。

# xcode - Mac App 仅显示 Mac OS X 10.7.5 的灰屏

> ID：13250237
> 
> 赞同：2
> 
> 时间：2012-11-06T11:39:00.800
> 
> 标签：xcode, macos

我刚刚发布了一个新的 Mac 应用程序，它在运行 OS X 10.8.2 的 MacBook 上正常工作。但是，我一直收到人们的电子邮件，说他们在应用程序启动时只看到一个空白的灰色屏幕。所有这些用户都运行 OS X 10.7.5。

是否存在会导致此类问题的已知问题。我无法真正详细说明，因为我不知道是什么导致了这种情况发生或问题出在哪里。

谢谢

# deployment - 将 Playframework 2 部署到 AppFog - 内存问题

> ID：13250240
> 
> 赞同：1
> 
> 时间：2012-11-06T11:39:13.477
> 
> 标签：deployment, playframework, cloud, playframework-2.0, appfog

我正在尝试将简单的 Playframework Scala 应用程序部署到 AppFog。我创建了新的 Scala 应用程序并从[AppFog 文档](https://docs.appfog.com/languages/java/play)中添加了一个 JAR 。然后我按照从[部署到 AppFog 指南](http://www.playframework.com/documentation/2.1-RC2/Deploying-CloudFoundry)的步骤进行操作。

问题是当保留的内存少于 900MB 时，应用程序将无法启动。错误是：

```
 Error: Application [pralab-test] failed to start, logs information below.
    ====> /logs/stdout.log <====

    No database found in Play configuration.  Skipping auto-reconfiguration.
    Play server process ID is 13276
    [‹[33mwarn‹[0m] play - Plugin [org.cloudfoundry.reconfiguration.play.JPAPlugin]
    is disabled
    [‹[37minfo‹[0m] play - Application started (Prod)
    #
    # There is insufficient memory for the Java Runtime Environment to continue.
    # pthread_getattr_np
    # An error report file with more information is saved as:
    # /mnt/var/vcap.local/dea/apps/pralab-test-0-d6bc1b644e85148149d759499e02b409/ap
    p/hs_err_pid13276.log 
```

当启动更多内存时，应用程序启动并仅使用大约 140MB 的声明 900MB。是 Play 的启动内存峰值还是 AppFog 中的错误？

你们有在 AppFog 上成功部署过 Play 应用吗？

**编辑** 这在具有 256M 内存的 cloudfoundry.com 上运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T00:09:15.763

I was having this same problem and couldn't get around it. I just had to do what you did and allocate 1G to my app when it was only using around 250m. I opened customer support ticket and got no response.

I believe you are having this same problem that they claim to have fixed for "JAVA" but must not be rolled out to play autodetected apps: [https://groups.google.com/forum/#!topic/appfog-users/hxBxUe3c4QI](https://groups.google.com/forum/#!topic/appfog-users/hxBxUe3c4QI)

Current options are just live with more memory allocated.

# sql - 加入具有重复项的 SQL Server 表

> ID：13250247
> 
> 赞同：2
> 
> 时间：2012-11-06T11:39:30.363
> 
> 标签：sql, sql-server, sql-server-2008, join, duplicate-removal

我有一张桌子

```
col1

1
2 
```

和其他表

```
col1    col2    col3

1          1    data value one                                    
1          2    data value one                                    
2          3    data value two 
```

我想加入两个表以获得以下结果

```
col1  col2  col3

1       1    data value one
2       3    data value two 
```

第二个表有重复，但我只需要加入一个（随机）。我尝试过使用内连接、左连接、右连接并始终返回所有行。其实我用`SQL Server 2008`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T12:21:44.427

```
select t1.col1, t2.col2, t2.col3 from table1 t1
cross apply
(select top 1 col2, col3 from table2 where col1 = t1.col1 order by newid()) t2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:49:44.557

使用[Distinct](http://msdn.microsoft.com/en-us/library/ms187831%28SQL.105%29.aspx)会消除重复数据，但您确定两行都包含相同的数据吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:15:30.550

您可以使用`ROW_NUMBER`函数以及`ORDER BY NEWID()`为 col1 中的每个值获取一个随机行：

```
WITH CTE AS
(   SELECT  Col1,
            Col2,
            Col3, 
            [RowNumber] = ROW_NUMBER() OVER(PARTITION BY Col1 ORDER BY NEWID())
    FROM    Table2
)
SELECT  *
FROM    Table1
        INNER JOIN CTE
            ON CTE.Col1 = table1.Col1
            AND CTE.RowNumber = 1 -- ONLY GET ONE ROW FOR EACH VALUE 
```

# java - Scala、Maven 和 Java 集成的构建失败

> ID：13250248
> 
> 赞同：3
> 
> 时间：2012-11-06T11:39:30.720
> 
> 标签：java, scala, maven, jenkins

我实际上正在为 Jenkins 开发一个插件，我想在我的插件中集成 Scala、Java 和 Maven。我用 Java 开发了我的插件的一部分，我想用 Scala 开发其他部分。问题是当我集成所有这些（maven、Scala 和 Java）时，我从 scala maven 插件中得到这个错误：

```
 [INFO] artifact org.kohsuke.stapler:stapler: checking for updates from scala
[INFO] D:\workspace\remote-deployment-new\src\main\java:-1: info: compiling
[INFO] D:\workspace\remote-deployment-new\target\generated-sources\localizer:-1: info: compiling
[INFO] Compiling 4 source files to D:\workspace\remote-deployment-new\target\classes at 1352200897840
[ERROR] D:\workspace\remote-deployment-new\src\main\java\com\ebiznext\plugins\RemoteDeployment.java:33: error: RemoteDep
loyment is already defined as package RemoteDeployment
[INFO] public class RemoteDeployment extends Plugin implements Action, ExtensionPoint, Describable<RemoteDeployment> {
[INFO]              ^
[ERROR] one error found
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 52.801s
[INFO] Finished at: Tue Nov 06 12:21:39 CET 2012
[INFO] Final Memory: 27M/370M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal net.alchim31.maven:scala-maven-plugin:3.1.0:compile (default) on project remote-deploymen
t-new: wrap: org.apache.commons.exec.ExecuteException: Process exited with an error: 1(Exit value: 1) -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

我完全理解错误说该类`RemoteDeployment`已经定义为一个包。这是真的，因为在为 Jenkins 开发插件时，如果我有一个类，例如`RemoteDeployment`定义在包 com.ebiznext.plugins 中，我必须`com.ebiznext.plugins.RemoteDeployment`在`src/main/resources`. 那是詹金斯的约定，我对此无能为力。

我该如何纠正这个问题？

这是我的 POM：

```
<project>

<parent>
    <groupId>org.jenkins-ci.plugins</groupId>
    <artifactId>plugin</artifactId>
    <version>1.466</version><!-- which version of Jenkins is this plugin built 
        against? -->
</parent>
<groupId>com.ebiznext.plugins</groupId>
<artifactId>remote-deployment-new</artifactId>
<version>1.0</version>
<name>Remote Deployment</name>
<packaging>hpi</packaging>
    ....         
    <build>
    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>net.alchim31.maven</groupId>
                <artifactId>scala-maven-plugin</artifactId>
                <version>3.1.0</version>
            </plugin>
        </plugins>
    </pluginManagement>
    <plugins>
        <plugin>
            <groupId>net.alchim31.maven</groupId>
            <artifactId>scala-maven-plugin</artifactId>
            <version>3.1.0</version>

            <executions>
                <execution>
                    <id>compile</id>
                    <goals>
                        <goal>compile</goal>
                    </goals>
                    <phase>compile</phase>
                </execution>

                <execution>
                    <id>test-compile</id>
                    <goals>
                        <goal>testCompile</goal>
                    </goals>
                    <phase>test-compile</phase>
                </execution>
                <execution>
                    <phase>process-resources</phase>
                    <goals>
                        <goal>compile</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-07T14:49:12.410

我建议使用 net.alchim31.maven:scala-maven-plugin 进行编译。然后，您可以将参数设置为编译器`-Yresolve-term-conflict:object`。

例如：

```
<plugin>
    <groupId>net.alchim31.maven</groupId>
    <artifactId>scala-maven-plugin</artifactId>
    <configuration>
        <recompileMode>incremental</recompileMode>   <!-- NOTE: incremental compilation although faster requires passing to MAVEN_OPTS="-XX:MaxPermSize=128m" -->
        <useZincServer>true</useZincServer>          <!-- NOTE: if you have Zinc server installed and running, you can get faster compilation by enabling this -->
        <!-- addScalacArgs>-feature</addScalacArgs -->
        <args>
            <arg>-Yresolve-term-conflict:object</arg>   <!-- required for package/object name conflict in Jenkins jar -->
        </args>
        <javacArgs>
            <javacArg>-Xlint:unchecked</javacArg>
            <javacArg>-Xlint:deprecation</javacArg>
        </javacArgs>
    </configuration>
    <executions>
        <execution>
            <id>scala-compile-first</id>
            <phase>process-resources</phase>
            <goals>
                <goal>add-source</goal>
                <goal>compile</goal>
            </goals>
        </execution>
        <execution>
            <id>scala-test-compile</id>
            <phase>process-test-resources</phase>
            <goals>
                <goal>testCompile</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

例如，请参见此处：[https ://github.com/adamretter/jenkins-scala-plugin/blob/master/jenkins-scala-plugin-executer/pom.xml#L57](https://github.com/adamretter/jenkins-scala-plugin/blob/master/jenkins-scala-plugin-executer/pom.xml#L57)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-17T03:11:24.457

如果你的java代码依赖于scala类，你应该先编译scala类。

这有效：

`clean scala:compile compile package`

# objective-c - 包含和导入之间的区别

> ID：13250253
> 
> 赞同：11
> 
> 时间：2012-11-06T11:40:00.690
> 
> 标签：objective-c, ios, include, header-files, include-guards

> **可能重复：**
> [Objective-C 中的#import 和#include 有什么区别？](https://stackoverflow.com/questions/439662/what-is-the-difference-between-import-and-include-in-objective-c)

和有什么区别

```
#include< >
#include" "

#import< >
#import" " 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-06T11:43:43.550

该`#import`指令是`#include`. `#import`确保文件只包含一次，这样您就不会遇到递归包含的问题。

`#import ""`首先检查项目文件夹中的头文件，然后转到系统库，然后`#import<>`检查系统头文件”。理论上，位置是编译器定义的，它们可以在给定平台上以不同的方式实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T11:42:15.843

使用`#import`时，头包含保护是不必要的。否则，就像`#include`.

标头包括守卫，见于 C 和 C++ 文件：

```
#ifndef HGUARD_MONHeader_h
#define HGUARD_MONHeader_h

...header contents...

#endif 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-06T11:49:00.547

import 是包含的超级集，它确保文件只包含一次。这使您免于递归包含。关于“”和<>。"" 在本地目录中搜索，<> 用于系统文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-06T11:43:23.630

#import 指令作为#include 的改进版本添加到Objective-C。然而，它是否得到改进仍然是一个争论的问题。#import 确保文件只包含一次，这样您就不会遇到递归包含的问题。然而，无论如何，大多数体面的头文件都会保护自己免受这种情况的影响，所以它并没有太大的好处。

[Objective-C 中的#import 和#include 有什么区别？](https://stackoverflow.com/questions/439662/what-is-the-difference-between-import-and-include-in-objective-c)：

> #include 和#import 请求预处理器* 读取文件并将其添加到其输出中。#include 和 #import 之间的区别在于
> 
> #include 允许您多次包含同一个文件。#import 确保预处理器只包含一次文件。C 程序员倾向于使用#include。Objective-C 程序员倾向于使用#import。
> 
> * 在 Objective-C 中编译一个文件需要两遍。首先，
> 预处理器遍历文件。预处理器的输出进入真正的编译器。

# java - 列表和泛型

> ID：13250254
> 
> 赞同：0
> 
> 时间：2012-11-06T11:40:02.033
> 
> 标签：java, generics

我在下面有一个界面：

```
/**
 * <T> Time format. Can be long, date etc
 */
public interface TimeStamp<T> extends Comparable<TimeStamp<T>>
{
/**
 * Returns the timestamp. 
 * @return 
 */
public T getTimeStamp();
} 
```

现在我想要一个列表，它将保存 TimeStamp 并有一些方法，其行为将取决于它所保存的 timeStamps。

```
public class TimeList<TimeStamp<T>> extends ArrayList<TimeStamp<T>> 
{
     ......
} 
```

编译器显示上述语句错误。它有什么问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T11:41:59.317

在类定义中，您只能单独指定泛型类型，请尝试：

```
public class TimeList<T> extends ArrayList<TimeStamp<T>> 
{
 ......
} 
```

# python - Python中的循环编程（corecursion） - 有可能吗？

> ID：13250256
> 
> 赞同：3
> 
> 时间：2012-11-06T11:40:04.297
> 
> 标签：python

我知道 Python 有一些惰性实现，因此，我想知道是否可以在 Python 中使用循环编程。

如果不是，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T11:49:44.290

我认为您的意思是协同例程，而不是协同递归。是的，这在 Python 中是完全可能的，因为[PEP 342: Coroutines via Enhanced Generators](http://www.python.org/dev/peps/pep-0342/)已经实现。

典型的例子是消费者装饰器：

```
def consumer(func):
    def wrapper(*args,**kw):
        gen = func(*args, **kw)
        next(gen)
        return gen
    wrapper.__name__ = func.__name__
    wrapper.__dict__ = func.__dict__
    wrapper.__doc__  = func.__doc__
    return wrapper 
```

使用这样`consumer`的，让我们链接过滤器并通过它们推送信息，充当管道：

```
from itertools import product

@consumer
def thumbnail_pager(pagesize, thumbsize, destination):
    while True:
        page = new_image(pagesize)
        rows, columns = pagesize / thumbsize
        pending = False
        try:
            for row, column in product(range(rows), range(columns)):
                thumb = create_thumbnail((yield), thumbsize)
                page.write(
                    thumb, col * thumbsize.x, row * thumbsize.y
                )
                pending = True
        except GeneratorExit:
            # close() was called, so flush any pending output
            if pending:
                destination.send(page)

            # then close the downstream consumer, and exit
            destination.close()
            return
        else:
            # we finished a page full of thumbnails, so send it
            # downstream and keep on looping
            destination.send(page)

@consumer
def jpeg_writer(dirname):
    fileno = 1
    while True:
        filename = os.path.join(dirname,"page%04d.jpg" % fileno)
        write_jpeg((yield), filename)
        fileno += 1

# Put them together to make a function that makes thumbnail
# pages from a list of images and other parameters.      
#
def write_thumbnails(pagesize, thumbsize, images, output_dir):
    pipeline = thumbnail_pager(
        pagesize, thumbsize, jpeg_writer(output_dir)
    )

    for image in images:
        pipeline.send(image)

    pipeline.close() 
```

核心原则是python[生成器](http://wiki.python.org/moin/Generators)和[yield表达式](http://docs.python.org/reference/expressions.html#yield-expressions)；后者让生成器从调用者那里接收信息。

**编辑**：啊，[共同递归](http://en.wikipedia.org/wiki/Corecursion)确实是一个不同的概念。请注意，Wikipedia 文章*使用 python*作为示例，此外，还使用了 python *generators*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T11:47:24.923

你试过了吗？

```
def a(x):
    if x == 1: return
    print "a", x
    b(x - 1)

def b(x):
    if x == 1: return
    print "b", x
    a(x - 1)

a(10) 
```

作为旁注，python没有尾递归，这将失败`x > 1000`（尽管这个限制是可配置的）

# jython - 将 pytest 与 Jython 一起使用

> ID：13250258
> 
> 赞同：4
> 
> 时间：2012-11-06T11:40:08.487
> 
> 标签：jython, pytest

我正在尝试在 Jython 上使用 pytest。我一开始就被卡住了。

我已经使用 easy_install 成功安装了 pytest 包：

```
$ ./jython easy_install pytest 
```

当我尝试从此[页面](http://pytest.org/latest/getting-started.html#getstarted)运行示例时，出现问题。我收到了一份非常长的故障报告，如下所示。有人知道为什么会这样吗？

py.test-jython

============================= 测试开始================== ============ 平台 java1.6.0_37 -- Python 2.5.3 -- pytest-2.3.2 收集到 1 项

test_sample.py F

==================================== 失败============== ===================== ***_* __ *_* __ *_* __ *_* __ *_* __ *_* _** test_answer ***_* __ *_* __ *_* __ *_* __ *_* __ *_* __**

```
def test_answer(): 
```

> ```
>  assert func(3) == 5 
> ```

test_sample.py:5:

* * *

自我 = 断言错误（）

```
def __init__(self, *args):
    BuiltinAssertionError.__init__(self, *args)
    if args:
        try:
            self.msg = str(args[0])
        except py.builtin._sysex:
            raise
        except:
            self.msg = "<[broken __repr__] %s at %0xd>" %(
                args[0].__class__, id(args[0]))
    else:
        f = py.code.Frame(sys._getframe(1))
        try:
            source = f.code.fullsource
            if source is not None:
                try:
                    source = source.getstatement(f.lineno, assertion=True)
                except IndexError:
                    source = None
                else:
                    source = str(source.deindent()).strip()
        except py.error.ENOENT:
            source = None
            # this can also occur during reinterpretation, when the
            # co_filename is set to "<run>".
        if source: 
```

> ```
>  self.msg = reinterpret(source, f, should_fail=True) 
> ```

../jython2.5.3/Lib/site-packages/pytest-2.3.2-py2.5.egg/_pytest/assertion/reinterpret.py:32：

* * *

源 = 'assert func(3) == 5', frame = should_fail = True

```
def interpret(source, frame, should_fail=False):
    mod = ast.parse(source)
    visitor = DebugInterpreter(frame)
    try: 
```

> ```
>  visitor.visit(mod) 
> ```

../jython2.5.3/Lib/site-packages/pytest-2.3.2-py2.5.egg/_pytest/assertion/newinterpret.py:49：

* * *

. . .

* * *

self = <_pytest.assertion.newinterpret.DebugInterpreter object at 0x4> name = Name

```
def visit_Name(self, name): 
```

> ```
>  explanation, result = self.generic_visit(name) 
> ```

../jython2.5.3/Lib/site-packages/pytest-2.3.2-py2.5.egg/_pytest/assertion/newinterpret.py:147：

* * *

self = <_pytest.assertion.newinterpret.DebugInterpreter object at 0x4> node = Name

```
def generic_visit(self, node):
    # Fallback when we don't have a special implementation.
    if _is_ast_expr(node):
        mod = ast.Expression(node)
        co = self._compile(mod)
        try:
            result = self.frame.eval(co)
        except Exception:
            raise Failure()
        explanation = self.frame.repr(result)
        return explanation, result
    elif _is_ast_stmt(node):
        mod = ast.Module([node])
        co = self._compile(mod, "exec")
        try:
            self.frame.exec_(co)
        except Exception:
            raise Failure()
        return None, None
    else: 
```

> ```
>  raise AssertionError("can't handle %s" %(node,)) 
> ```
> 
> E AssertionError: 无法处理名称

../jython2.5.3/Lib/site-packages/pytest-2.3.2-py2.5.egg/_pytest/assertion/newinterpret.py:134: AssertionError ============= ============= 1 在 0.55 秒内失败 ===========================

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T09:08:05.530

Pytest 有一个解决 jython 缺少 AST 实现的方法，请参阅[issue1479](http://bugs.jython.org/issue1497)。我只是在 pytest 方面扩展了解决方法以在 jython-2.5.3 上工作。您可以使用以下命令安装 pytest 的开发候选人：

```
pip install -i http://pypi.testrun.org -U pytest 
```

并且应该至少获得带有“py.test-jython --version”的版本 2.3.4.dev1 并获得使用 jython-2.5.3 的断言。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T07:55:43.463

目前 pytest 不支持 Jython2.5.3，仅适用于 Jython2.5.1。

# forms - 在多个字段上嵌入表单过滤器

> ID：13250260
> 
> 赞同：2
> 
> 时间：2012-11-06T11:40:22.510
> 
> 标签：forms, search, filter, symfony-1.4

我正在尝试在多个字段的两个相关表上创建搜索。

我正在嵌入表单过滤器，一切都很好。当我尝试验证表单时，表单无法执行 getName()。

我已经阅读了一些关于此的文章，其中一个技巧是覆盖 addFieldNameColumnQuery() 函数。

我的问题是：这是唯一/最好的方法吗？我应该为嵌入表单中的每个字段覆盖一个函数吗？

# cobol - 何时在 COBOL 中使用点？

> ID：13250261
> 
> 赞同：5
> 
> 时间：2012-11-06T11:40:24.140
> 
> 标签：cobol, gnucobol, cobol85

我对 COBOL 完全陌生，我想知道：

好像没有区别

```
DISPLAY "foo" 
```

和

```
DISPLAY "foo". 
```

行尾的点实际上是做什么的？

我什么时候应该使用/避免它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T12:24:30.363

句号结束“句子”。它会影响你的逻辑。考虑...

```
IF A = B
    PERFORM 100-DO
    SET I-AM-DONE TO TRUE. 
```

...和...

```
IF A = B
    PERFORM 100-DO.
    SET I-AM-DONE TO TRUE 
```

在这两个示例中，句点结束了 IF。在第一个中，I-AM-DONE 88 级别是有条件设置的，在第二个中，它是无条件设置的。

许多人更喜欢使用显式范围终止符并且只使用单个句点，通常在物理行上单独使用以使其突出，以结束段落。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-06T14:07:37.133

我是凭记忆输入的，所以如果有人有更正，我将不胜感激。

Cobol 1968 要求使用句点来结束一个部门名称、过程部门段落名称或过程部门段落。每个数据划分元素以句点结束。

Cobol 68 中没有明确的范围终止符，如 END-IF。句号也用于结束范围。Cobol 1974 带来了一些与周期无关的变化。

Cobol 程序员倾向于用句号结束​​ Cobol 程序中的每个句子，而不是试图记住句号的规则。

随着 Cobol 1985 中范围终止符的引入，Cobol 编码器可以消除程序划分段落中的大部分句点。Cobol 85 程序的过程划分中唯一需要的时间段是终止 PROCEDURE DIVISION 语句、终止第一段/节标题之前的代码（如果有）、终止段落/节标题、终止段落/节并终止程序（如果没有段落/部分）。

不幸的是，这吓坏了使用 Cobol 68 和 74 标准编码的 Cobol 程序员。直到今天，许多 Cobol 商店都强制执行一个编码规则，即用句点结束每个过程划分语句。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-08T12:46:52.727

在哪里使用！

使用点有2种形式。

您可以在 SECTION 中的每个 VERB 之后使用 POINT。例子：

> 0000-示例部分。
> 
> 将 0 移至 WK-I。
> 
> 执行直到 WK-I 大于 100 显示 WK-I 将 1 添加到 WK-I 最终执行。
> 
> 显示 WK-I。
> 
> IF WK-I 等于零显示 WK-I END-IF。
> 
> 0000-示例-结束。出口。

请注意，我们在每个动词之后使用点，除了在 PERFORM、IF、ETC 内...

另一种使用形式是：在部分末尾仅使用一个点，如下所示：

> 0000-示例部分。
> 
> 将 0 移至 WK-I
> 
> 执行直到 WK-I 大于 100 显示 WK-I 添加 1 到 WK-I END-PERFORM
> 
> 显示 WK-I
> 
> IF WK-I 等于零显示 WK-I END-IF
> 
> . <======== 点这里！！！！！！！只有在这里！
> 
> 0000-示例-结束。出口。

但是，我们总是在 EXIT 和 SECTION 之后......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T23:55:56.640

当它是我的选择时，我只在必要时使用句号/句号。然而，当地标准通常另有规定：就这样吧。

句号/句号引起的问题是，当代码“with”被复制到“without”代码中而编码器的大脑安全地留在停车场时，意外地做出了无条件的事情。

需要注意的另一件事是（希望如此）在 IBM Mainframe Cobol 中使用 NEXT SENTENCE 的“旧”程序。“NEXT SENTENCE”表示“在下一个句号/句号之后”，在“稀疏句号/句号”代码中是段落/部分的结尾。等待发生的事故。获取规范更改以允许将“NEXT SENTENCE”更改为“CONTINUE”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-21T20:08:45.333

刚刚在我的 cobol 85 程序中通过删除程序中的所有句点对其进行了测试，它运行良好。

例子：

```
PROCEDURE DIVISION.                                                          
 MAIN-PROCESS.                                                    
    READ DISK-IN                                                  
     AT END                                                       
      DISPLAY "NO RECORDS ON INPUT FILE"                          
      STOP RUN                                                   
    ADD 1 TO READ-COUNT.                                          
    PERFORM PROCESS-1 UNTIL END-OF-FILE.                 

 WRITE-HEADER.                                                    
    MOVE HEADER-INJ-1 TO HEADER-OUT-1                             
    WRITE HEADER-OUT-1\.                                           

 CLOSE-FILES.                                                     
    CLOSE DISK-IN                                                 
    CLOSE DISK-OUT                                                
    DISPLAY "READ: " READ-COUNT                                   
    DISPLAY "WRITTEN: " WRITE-COUNT                               

    SORT SORT-FILE ON ASCENDING SER-S                         
     USING DISK-OUT                                               
     GIVING DISK-OUT                                              

     STOP RUN. 
```

# c++ - 基方法被调用而不是派生方法

> ID：13250265
> 
> 赞同：0
> 
> 时间：2012-11-06T11:40:34.623
> 
> 标签：c++, inheritance

我目前正在尝试提供多个头文件的实现。我试着这样做：

```
// A.h:

class A {
    public:
        A();
        ~A();

        bool method1();
        bool method2();
}

// A.cpp: 
A::A() {
}

A::~A() {
}

bool A::method1() {
} 

bool A::method2() {
}

// B.h

class B : public A {
    public B();
    public ~B();

    bool method1();
    bool method2();
}

// B.cpp

B::B() {
}

B::~B() {
}

bool B::method1() {
    // actual code I want to use
}

bool B::method2() {
    // actual code I want to use
}

// AFactory.h

#define USE_B 10
#define USE_C 20

#define IMPL USE_B

class A;

class AFactory {
public:
    static A *getImplementation();
}

// AFactory.cpp

A *AFactory::getImplementation() {
#if IMPL == USE_B
    return new B();
#elif IMPL == USE_C
    return new C();
#else 
    return NULL;
#endif
}

// Test.cpp

int main () {
    A *test = AFactory::getImplementation();
    test->method1();
    test->method2();
} 
```

这个想法是，提供多个 A 类的实现，可以通过简单地更改 define 的值来切换`IMPL`。问题是，实际使用的实现`B`中的方法永远不会被调用。`A`而是调用基类中的方法。我试图从构建中完全删除 A.cpp，因为它从未使用过，或者说永远不应该使用，但是它不会构建，告诉我，我的测试代码中有未定义的引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:43:25.880

如果要覆盖这些方法，请使用`virtual`关键字。

```
class A
{
  virtual bool method1();
}

class B : public A
{
  virtual bool method1(); // If you want to override the base functionality.
} 
```

# jquery-ui - 在 juqeryUI 选项卡中使用 jquery

> ID：13250275
> 
> 赞同：0
> 
> 时间：2012-11-06T11:41:26.880
> 
> 标签：jquery-ui, jquery, jquery-ui-tabs

我在 JQueryUI 选项卡中加载一个文件，当我在被调用文件中包含 jquery 文件时，我在切换选项卡时遇到错误，我认为这是由于 jquery 的冲突，因为它包含在调用和被调用文件中，问题是当我从被调用文件中删除链接时解决了。现在文件已加载到选项卡中，好吧，我在该选项卡中完成了一些类似的 jquery 操作，因为不包含 jquery 我无法在该选项卡中执行任何操作，解决方案是什么，他们是如何设计的选项卡，以便用户不能在所有 ajax 调用文件中包含主 jquery 文件。是否有解决方案或者这是一个错误或者我应该放弃使用 jqueryUI 选项卡？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:44:24.630

选项卡的内容是主页面的一部分，其中包含 jQuery。因此，您可以从选项卡中选择元素并在它们上调用 jQuery 方法，就好像它们是主页的一部分一样。事实上，当您能够在页面上的任何内容上调用 jQuery 方法时，即在 document.ready 之后，它就是主页的一部分。

如果您不能将 jQuery 与 jQuery UI 一起使用，那么您将无法使用 jQuery UI，因为它本身就使用了 jQuery...

# c - C 改变数组的索引表示

> ID：13250278
> 
> 赞同：1
> 
> 时间：2012-11-06T11:41:30.623
> 
> 标签：c, arrays, char

我想用 char 来表示一个数组
说我有一个

```
char arrays[50]={"hello", "world"}; 
```

而不是代表第一个字符串的零索引我想要一个字母来表示它，我知道这可以在java中使用哈希表来完成这在c中是否可能

我正在考虑使用一个指针数组来引用每个字符串，但我不知道如何在一个大数组中实现它，因为我刚刚开始学习使用指针之类的
东西

```
char *a:
arrays[0]=&a; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:58:46.880

如果它是必需的 a`char`和字符串 ( `char*`) 之间的映射，您可以创建一个`struct`包含该对的简单对象：

```
struct entry
{
    char key;
    const char* value;
}; 
```

如果地图的内容在编译时已知，则：

```
const struct entry map[] =
    {
        { 'a', "a.text" },
        { 'b', "b.text" },
        { 'c', "c.text" },
        { 'd', "d.text" },
        { 'e', "e.text" }
    }; 
```

通过保持条目有序，您可以使用它[`bsearch()`](http://en.cppreference.com/w/c/algorithm/bsearch)来定位条目：

```
int compare(const void* l, const void* r)
{
    const struct entry* ll = (const struct entry*)l;
    const struct entry* rr = (const struct entry*)r;

    return ll->key - rr->key;
}

struct entry find = { 'd' };

struct entry* e = bsearch(&find,
                          map,
                          sizeof(map)/sizeof(map[0]),
                          sizeof(map[0]),
                          compare);

if (e)
{
    printf("{%c, %s}\n", e->key, e->value);
}
else
{
    printf("Not found\n");
} 
```

[请参阅http://ideone.com/x6roRm](http://ideone.com/x6roRm)上的演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:46:08.770

首先，您的字符串数组声明不正确。在 gcc 下，这会产生以下错误：

```
error: excess elements in char array initializer          
error: (near initialization for ‘arrays’) 
```

因为您正在声明**一个**包含 50 个元素的 char 字符串（每个元素都是一个 char），并且您正在使用**两个**字符串对其进行初始化。

现在，如果您更改为

```
char *arrays[2] = {"hello", "world"}; 
```

你是说你的数组上有 2 个指针：一个指针指向“hello”字符串，另一个指针指向字符串“world”。通过打印它们指向的值，您可以看到这是真的：

```
printf("array content: %s - %s\n", arrays[0], arrays[1]); 
```

这将打印

```
array content: hello - world 
```

现在，如果您想按文字而不是数字进行索引，我认为最简单的方法是创建一个映射，您可以在其中为您想要的字符串分配一个字符键。请参阅 hmjd 给出的答案（请注意`bsearch()`，`stdlib.h`必须在源代码中包含此标头）。

如果您有疑问或困难，请发表您的意见，我相信我们可以提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T11:49:15.773

它应该是

```
char *arrays[2]={"hello", "world"}; 
```

现在这是一个由 2 个 char 指针组成的数组，指向 2 个字符串

`*(arrays[0]+0)`或`arrays[0][0]`将引用字符串中的第一个`1st`字符

`*(arrays[0]+1)`或`arrays[0][1]`将引用字符串中的第二个`1st`字符

`*(arrays[1]+0)`或`arrays[1][0]`将引用字符串中的第一个`2nd`字符

`*(arrays[1]+1)`或`arrays[1][1]`将引用字符串中的第二个`2nd`字符

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T11:49:33.213

你也可以在c中使用枚举

[http://msdn.microsoft.com/en-us/library/whbyts4t%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/whbyts4t%28v=vs.80%29.aspx)

```
 enum DAY            /* Defines an enumeration type    */
 {
    saturday,       /* Names day and declares a       */
    sunday = 0,     /* variable named workday with    */ 
    monday,         /* that type                      */
    tuesday,
    wednesday,      /* wednesday is associated with 3 */
    thursday,
    friday
 } workday; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T11:51:07.500

```
char *a[50]={"Hello", "World"};

char *a[256]={ ['H'] = "Hello", ['W'] = "World"};  \\ c99 -extension 
```

Char 是用于索引数组的完全有效的类型。至少对于前 128 个元素。对于接下来的 128 个不被解释为负值的元素，char 必须是无符号的。

# jquery-ui-tooltip - 根据条件显示 jQueryUI 工具提示

> ID：13250293
> 
> 赞同：0
> 
> 时间：2012-11-06T11:42:48.617
> 
> 标签：jquery-ui-tooltip

默认情况下（更准确地说，它是这样设计的）jQueryUI 工具提示出现在 mouseover 和 focusin 事件上。我需要的是相同的功能，但不是在鼠标悬停时，而是在特定条件下。工具提示以不同的可能动画出现的方式真的很酷。但是，如果我可以调整它以在我调用它时弹出它，那就太好了。您认为对源代码进行一些小的调整是可能的，还是需要大量编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:06:49.147

通过查看 jQuery UI API 页面，您可以在需要时使用 open 和 close 方法来显示和隐藏工具提示（从 jQuery UI [Tooltip API 文档](http://api.jqueryui.com/tooltip)复制/粘贴）：

`$( ".selector" ).tooltip( "open" );`将显示工具提示。要再次隐藏它，只需使用`$( ".selector" ).tooltip( "close" );`

# php - PHP 初学者 - 可扩展性和框架在哪里？

> ID：13250298
> 
> 赞同：8
> 
> 时间：2012-11-06T11:43:03.010
> 
> 标签：php

在过去的几个月里，我一直在从事 Web 开发，我尝试了硬币的两面：ASP.NET 和 PHP，我很快就爱上了第二个，文档和社区非常有帮助。

我从阅读**PHP for Absolute Beginners**开始，这让我对这门语言有了不错的掌握。

![我们需要更深入](../Images/47292a69f1f6a4c9a3340a7cfb23bbf5.png)

输入框架！在浏览了网络之后，很明显有一个框架非常适合初学者：**Codeigniter**。我非常喜欢 CI，在我大学的编程经历中，我一直依赖于好书。CI不需要一本书。该文档写得非常好，任何有一点 PHP 经验的人都可以阅读。

学习 CI 使我进入了开发网站（例如 Stackoverflow），我开始阅读一些让我感到难过的东西，“CI 不能在大型项目上扩展”，“CI 甚至不是框架”，“CI 是为新手准备的，像我一样成为专业的兄弟”。

好的，所以也许 CI 不应该用于大型项目——至少这是我从整个社区得到的。但我想在这里，我现在应该去哪里？我觉得我至少应该在一些 MVC 框架中获得一些经验，但是在这一点上有点困惑，今天**Zend**是最好的，明天**Symfony**是最好的，但是该死，**Yii**看起来也不错！所有这些框架都更新到 2.0 并且文档稀缺，没有多少书籍（如果有的话），各自的网站有很多信息，但是对于来自 CI 的人来说，这一切只是感觉非常吓人出去。使用 Windows CMD 启动项目？PHP 加速器？

我想我在这里想问的是，你们这些专业人士如何看待 PHP 框架世界？你会推荐哪个框架？我应该跳入这个 2.0 泡沫还是这些版本还不稳定？如果可能的话，您能否在文档方面为我指明一个总体方向？

感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T11:47:32.810

框架只是实现目的的工具。对您来说，要掌握语言，请尝试继续使用 CI。你将学到的东西——概念——将转化为其他框架，即使它们的实现略有不同。

我个人更喜欢 Yii，但我过去挖过 symfony、zend 和 CI 以及其他一些。对于大多数应用程序来说，一个并不比另一个好；看看不同的东西，看看你喜欢什么，然后顺其自然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T11:52:13.897

什么框架并不是真正的问题。IMO，你应该做的是，尝试“学会学习”，而不仅仅是“学习”。

我的意思是，你应该试着学好 php 而不是特定的框架 X。

这样，当时机成熟时，您必须构建一个可扩展的[可扩展甚至不在我的浏览器的字典中！] 系统，您可以通过您积累的经验来解决问题。这就是我相信史蒂夫乔布斯所说的将著名演讲中的点点滴滴联系起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T11:56:10.420

我过去使用过很多框架。我使用 CI 开始，然后随着经验的积累转移到 Yii。框架可以为项目提供您不必自己编写的工具，从而节省时间。但是可能存在性能问题。CI很棒，我没有遇到太多麻烦。您可以精简它并删除您不使用的功能。使用 CI，我已经毫无问题地创建了完整的 Web API。

我想我想说的是，这可能是您对使用哪个框架的偏好或客户偏好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T11:57:18.773

首先，Web 开发不是硬币，而且不止两个方面。有大量的 Web 开发语言：PHP、.NET、Python、Ruby 等等。

其次，如果您是 Web 开发/PHP 新手，我认为您不应该关注框架。先学语言。框架只灌输特定于框架的约定；因此，当涉及到使用另一个框架甚至是原生 PHP 时，你会不知所措。了解 PHP 有助于为工作选择正确的框架。这么早投资一个框架只会让你依赖和依赖那个框架。

我从经验谈起这件事。我曾经在一家招聘 PHP 开发人员的机构工作。在面试过程中，我们得到了自称是 PHP 开发人员的申请人，他们会了解 CodeIgniter 等框架。当给定一个简单的编程任务（取一个全大写的短语并使其标题大小写）时，大多数人都失败了。为什么？因为他们在框架中构建了所有东西，而不是学习 PHP 本身。因此，当他们处于无法选择框架的情况下，他们跌跌撞撞。

不要犯这个错误。框架很好，但*只有*当您知道自己在做什么并且*绝对*不是作为语言学习工具时。

# android - Android：避免来自适配器中 getView() 的不必要调用

> ID：13250307
> 
> 赞同：0
> 
> 时间：2012-11-06T11:43:31.150
> 
> 标签：android, performance, listview

我搜索了几个小时，但没有找到适合我的解决方案。我想要做什么：在我的 ListFragment 中，我使用 onListItemClick(...) 方法来处理点击事件。在这里，我更改了行项目的背景。但不幸的是，每次调用 onListItemClick(...) 时，也会调用来自适配器的 getView() 并更新所有 8 个可见行项。这需要很长时间：0.5 秒。因为行布局非常复杂（2 个图像，8 个文本视图）。所以我只想更新被点击的行。我想使用[这个解决方案](https://stackoverflow.com/questions/2123083/android-listview-refresh-single-row/9987714#9987714)，但是当其他 7 行项目无论如何都更新时，它没有效果。我已经按照[这些建议](http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/)加快了列表速度，但速度仍然很慢。

感谢任何帮助、想法和想法。：） 谢谢！

[编辑]

感谢 CommensWare 给了我一些新的想法。我现在所做的是检查 traceview 的内容。结果是，延迟分为两部分。延迟的前 300 毫秒采用“FastXMLSerialzier.escapeAndAppendString()”，调用次数超过 22.000。这似乎很多！在后半部分，可能会调用视图和布局的许多 onMeasure() 方法。

我尝试了什么：我用适配器中的静态虚拟值填充了每个文本视图，并排除了加载图像的部分。它没有任何改变，traceview 显示相同的图片。在第二次尝试中，我查看了列表项的 LinearLayout，并将找到的每个“wrap_content”都替换为“match_parent”——什么都没有。还是一样。

我仍然愿意接受你的想法和提示。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:53:25.707

您无法控制`getView()`调用的时间和频率。

如果您确实需要 500ms 才能生成 8 row `Views`，那么您的代码有问题。您可以使用 Traceview 来具体确定您在哪里花费时间，因此您可以尝试做一些事情来提高性能（例如，缓存）。

# arrays - 在 MIPS 中遍历二维数组

> ID：13250309
> 
> 赞同：2
> 
> 时间：2012-11-06T11:43:42.383
> 
> 标签：arrays, loops, nested, 2d, mips

嘿伙计们，我需要对所有 i 和 j 执行 C[i][j] = A[i][j] + B[j][i]，二维数组中的大小为 16 x 16。

这是我的代码的主要部分（如下所示）。

当我在 SPIM 中运行此代码时，我在“lw $t4, 0($t4) # value of B[j][i]”行收到一个异常，表示数据/堆栈读取地址错误

当我检查存储在每个寄存器中的值时，我意识到 i == 0x1，但 j 达到 0xbf0！（那是 3056）

我不知道为什么会这样，因为我的 j 应该只从 0 增加到 15。帮帮我！

```
la    $t0, A                 # $t0 represents start address of A[i][j]
la    $t1, B                 # $t1 represents start address of B[i][j]
la    $t2, C                 # $t2 represents start address of C[i][j]  displacement of A will be the same as C                         

addi   $t3, $zero, 16         # set maximum iteration to be 16
addi   $t5, $zero, 0     # set i = 0
addi   $t6, $zero, 0     # set j = 0

loopi:
jal    loopj             # starts inner loopj
addi   $t5, $t5, 1       # i++
bne    $t3, $t5, loopi   # continue loopi if i < 16  
j      finish            

loopj:
sll    $t7, $t5, 4       
add    $t7, $t7, $t6
sll    $t7, $t7, 2       # 4 * ((i * 16) + j)  
add    $t9, $t7, $t0     # address of A[i][j]
lw     $t9, 0($t9)       # value of A[i][j]

sll    $t4, $t6, 4       
add    $t4, $t4, $t5
sll    $t4, $t4, 2       # 4 * ((j * 16) + i)
add    $t4, $t4, $t1     # address of B[j][i]
lw     $t4, 0($t4)       # value of B[j][i]

add    $t4, $t4, $t9     # A[i][j] + B[j][i] 

add    $t7, $t7, $t2     # address of C[i][j]
sw     $t4, 0($t7)       # store answer into C[i][j] 

addi   $t6, $t6, 1       # j++
bne    $t3, $t6, loopj   # continue loopj if j < 16
jr $ra

finish: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:21:32.727

`j`您每次输入时都忘记重置为零`loopi`，否则在第一次之后`loopj`不会从零开始`loopj`...

要修复它，您可以在 label 之后移动设置`$t6`（包含`j`）的 addi `loopi`：

```
loopi:
  addi   $t6, $zero, 0     # set j = 0
  jal    loopj             # starts inner loopj
   ... 
```

# jquery - 滚动显示/隐藏 div

> ID：13250325
> 
> 赞同：18
> 
> 时间：2012-11-06T11:44:25.097
> 
> 标签：jquery, scroll, show-hide

我有一个位于幻灯片底部的 div，我想在用户滚动或使用向下箭头时消失，然后在滚动回顶部时重新出现。我猜这是结合了jquery滚动功能？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-11-06T11:55:41.497

```
<div>
  <div class="a">
    A
  </div>
</div>​

$(window).scroll(function() {
  if ($(this).scrollTop() > 0) {
    $('.a').fadeOut();
  } else {
    $('.a').fadeIn();
  }
}); 
```

**[样本](http://jsfiddle.net/MFUw3/239/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T11:50:19.517

```
$(window).scroll(function () {
  var Bottom = $(window).height() + $(window).scrollTop() >= $(document).height();
if(Bottom )
{
$('#div').hide();
}
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T11:57:20.893

试试这个代码

```
$('window').scrollDown(function(){$(#div).hide()});

$('window').scrollUp(function(){ $(#div).show() }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-21T23:40:35.137

当您想要对其进行动画处理并在几秒钟后开始淡出它时，这是我的回答。我使用不透明度是因为首先我不想完全淡出它，其次，它不会在多次滚动后返回和强制。

```
$(window).scroll(function () {
    var elem = $('div');
    setTimeout(function() {
        elem.css({"opacity":"0.2","transition":"2s"});
    },4000);            
    elem.css({"opacity":"1","transition":"1s"});    
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-13T18:21:13.570

```
$.fn.scrollEnd = function(callback, timeout) {          
  $(this).scroll(function(){
    var $this = $(this);
    if ($this.data('scrollTimeout')) {
      clearTimeout($this.data('scrollTimeout'));
    }
    $this.data('scrollTimeout', setTimeout(callback,timeout));
  });
};

$(window).scroll(function(){
    $('.main').fadeOut();
});

$(window).scrollEnd(function(){
    $('.main').fadeIn();
}, 700); 
```

这应该够了吧！

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-06T12:01:35.067

我有一个漂亮的答案试试这段代码；）

```
<div id="DivID">
</div>

$("#DivID").scrollview({ direction: 'y' });
$("#DivID > .ui-scrollbar").addClass("ui-scrollbar-visible"); 
```

# c# - LINQ to object Open High Low Close

> ID：13250328
> 
> 赞同：0
> 
> 时间：2012-11-06T11:44:30.387
> 
> 标签：c#, linq, syntax, forex

我想通过使用语法 LINQ 查询对象从下面的代码示例中获得相同的结果。请帮帮我。

```
public static List<OHLC> OHLC(List<FileRaw> fileRawsList, TimeSpan timeSpan, DateTime beginDate, DateTime endOfLoopDate)
    {

        List<OHLC> ohlcList = new List<OHLC>();

        for (DateTime i = beginDate; i < endOfLoopDate; )
        {
            DateTime iLow = i;
            DateTime iMax = i.Add(timeSpan);
            OHLC ohlcRaw = new OHLC()
                {
                    Open = fileRawsList.Where(p => p.Time >= iLow).Where(p => p.Time <= iMax).Select(p => p.Bid).DefaultIfEmpty().First(),
                    High = fileRawsList.Where(p => p.Time >= iLow).Where(p => p.Time <= iMax).Select(p => p.Bid).DefaultIfEmpty().Max(),
                    Low = fileRawsList.Where(p => p.Time >= iLow).Where(p => p.Time <= iMax).Select(p => p.Bid).DefaultIfEmpty().Min(),
                    Close = fileRawsList.Where(p => p.Time >= iLow).Where(p => p.Time <= iMax).Select(p => p.Bid).DefaultIfEmpty().Last(),
                    Time = fileRawsList.Where(p => p.Time >= iLow).Where(p => p.Time <= iMax).Select(p => p.Time).DefaultIfEmpty(iLow).First()
                };

            i = i.Add(timeSpan);
            ohlcList.Add(ohlcRaw);
        }
        return ohlcList;
    } 
```

它产生

```
Open: 1.229570, High: 1.233580, Low: 1.221730, Close: 1.224630, Date: 01/08/2012 00:00:02
Open: 1.224620, High: 1.240460, Low: 1.213320, Close: 1.217490, Date: 02/08/2012 00:00:03
Open: 1.217530, High: 1.239160, Low: 1.217230, Close: 1.238650, Date: 03/08/2012 00:00:02
Open: 0,        High: 0,        Low: 0,        Close: 0,        Date: 04/08/2012 00:00:02
Open: 1.239720, High: 1.239830, Low: 1.239180, Close: 1.239460, Date: 05/08/2012 17:00:03 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:59:17.687

这应该给原始组：

```
 return fileRawList.Where(file => file.Time >= beginDate)
                    .Where(file => file.Time < endofLoopDate)
                    .OrderBy(file => file.Time)
                    .GroupBy(file => file.Time.Ticks / timeSpan.Ticks,
                             (k, g) => new OHLC()
                                  {
                                    Open = g.Select(p => p.Bid).DefaultIfEmpty().First(),
                                    High = g.Select(p => p.Bid).DefaultIfEmpty().Max(),
                                    Low = g.Select(p => p.Bid).DefaultIfEmpty().Min(),
                                    Close = g.Select(p => p.Bid).DefaultIfEmpty().Last(),
                                    Time = g.Select(p => p.Time).DefaultIfEmpty().First()
                                          })
                     .ToList(); 
```

虽然这应该会提供定期的 OHLC 流：

```
var rawGroups = fileRawList.Where(file => file.Time >= beginDate)
                    .Where(file => file.Time < endofLoopDate)
                    .OrderBy(file => file.Time)
                    .ToLookup(file => (file.Time.Ticks - beginDate.Ticks) / timeSpan.Ticks,
                              file => new {Bid = file.Bid, Time = file.Time})
                    .ToDictionary( g => g.Key, g => new OHLC()
                                  {
                                    Open = g.Select(p => p.Bid).DefaultIfEmpty(0).First(),
                                    High = g.Select(p => p.Bid).DefaultIfEmpty(0).Max(),
                                    Low = g.Select(p => p.Bid).DefaultIfEmpty(0).Min(),
                                    Close = g.Select(p => p.Bid).DefaultIfEmpty(0).Last(),
                                    Time = g.Select(p => p.Time).First()
                                          });

return Enumerable.Range(0,(Int32)((endofLoopDate.Ticks - beginDate.Ticks)/timeSpan.Ticks))
                 .Select(i => rawGroups.Keys.Contains(i) ? 
                              rawGroups[i] :
                              new OHLC()
                              {
                               Open = 0,
                               High = 0,
                               Low = 0,
                               Close = 0,
                               Time = new DateTime(beginDate.Ticks + k*timeSpan.Ticks)
                              }).ToList(); 
```

选择：

```
var result = Enumerable.Range(0,(Int32)((endofLoopDate.Ticks - beginDate.Ticks)/timeSpan.Ticks))
                       .GroupJoin(fileRawList.Where(file => file.Time >= beginDate)
                                             .Where(file => file.Time < endofLoopDate)
                                             .OrderBy(file => file.Time),
                                  i => i,
                                  file => (file.Time.Ticks - beginDate.Ticks) / timeSpan.Ticks,
                                  (k,g) => new OHLC()
                                      {
                                       Open = g.Select(p => p.Bid).DefaultIfEmpty(0).First(),
                                       High = g.Select(p => p.Bid).DefaultIfEmpty(0).Max(),
                                       Low = g.Select(p => p.Bid).DefaultIfEmpty(0).Min(),
                                       Close = g.Select(p => p.Bid).DefaultIfEmpty(0).Last(),
                                       Time = g.Any() ? 
                                         g.Select(p => p.Time).First() :
                                         new DateTime(beginDate.Ticks + i*timeSpan.Ticks)
                                      }) 
```

# c# - 如何使用 c# 验证 url？

> ID：13250329
> 
> 赞同：1
> 
> 时间：2012-11-06T11:44:34.787
> 
> 标签：c#, wpf

> **可能重复：**
> [如何检查 uri 字符串是否有效](https://stackoverflow.com/questions/4835269/how-to-check-that-a-uri-string-is-valid)

我有一个文本框，用户应该在其中输入 URL，我如何以编程方式确定用户输入的 URL 是否有效，如果有效则必须处理进一步的过程，否则必须输入有效的 url？

我试试这段代码：

```
string url = textBox1.Text;
if (!url.StartsWith("http://"))
    url = "http://" + url;
Uri myUri;
if(Uri.TryCreate(url,UriKind.RelativeOrAbsolute,out myUri))
{
    //use the uri here
}
else
{
    MessageBox.Show("Please Enter the Absolute URL name");
    textBox1.Clear();
    textBox1.Focus();
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-06T11:47:22.280

这个答案来自一个类似的问题 [A better way to validate URL in C# than try-catch?](https://stackoverflow.com/questions/3228984/a-better-way-to-validate-url-in-c-sharp-than-try-catch)

```
string myString="http://someUrl";
Uri myUri;
if(Uri.TryCreate(myString,UriKind.RelativeOrAbsolute,out myUri)
{
    //use the uri here
} 
```

# java - GWT CSS 选择：使用哪个、何时以及为什么？

> ID：13250333
> 
> 赞同：1
> 
> 时间：2012-11-06T11:45:10.843
> 
> 标签：java, css, gwt

到目前为止，我已经说明了 GWT 开发人员可以将 CSS 注入 Web 应用程序的四 (4) 个不同的地方：

1.  在 HTML 主机页面中，您可以放置​​指向外部样式表的 HTML 链接，例如`MyWebApp/war/hello_gwt.html`包含以下行：`<link type="text/css" rel="stylesheet" href="mywebapp/webModule.css">`
2.  通过使用实现`ClientBundle`s 使您的应用程序可以访问绑定的`CssResource`子类
3.  通过 UI Binder XML
4.  您可以在 gwt.xml 文件中包含主题/样式，例如`<inherits name="com.google.gwt.user.theme.standard.Standard"/>`

我对这四个中的每一个应该完成什么工作感到困惑。换句话说，这些“CSS 机制”如何协同工作，为 Web 应用程序提供所需的所有样式，或者它们只是完成同一件事的不同方式？它们在不同的场景中是否都有不同的优点/缺点，如果是，它们是什么？

我喜欢使用`Layout`or`LayoutPanel`来定位我的应用程序的主要显示区域，然后使用 CSS 设置各个区域、容器等的样式的策略。所以看起来上面的第一种情况（HTML 外部 CSS 链接）*不会*是什么我一直在寻找，看到我希望随着 UI 的发展为每个新小部件自定义 CSS。

我想我只是在尝试在 GWT-land 中的 CSS 选项之间进行选择时寻找一个试金石。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:57:43.137

1\. 和 3.（css 文件和 ui binder xml）是执行相同操作的不同机制。

如果您将样式放在 UI 活页夹中，它将仅在此 UI 活页夹中可见，因此您不能（轻松）将其重用于其他类。但是，这种方式可以更轻松地保持样式整洁，因为您可以在一个地方看到用于组件的所有样式。

如果您将样式放在 CSS 中，您可以为不同的组件重用样式，但是在处理小部件时需要编辑两个文件。

当然，您可以同时使用它们：UI 活页夹样式和“单独的 CSS 文件”。

4\. 只是通知您使用哪种 GWT 预定义样式。GWT 对所有小部件都有默认样式，并且此继承告诉您将在您的应用程序中使用哪种样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:52:39.990

我强烈建议不要在 Ui:Binder 中定义样式。这使得在整个应用程序中维护和确保样式一致性变得非常困难。最佳做法是将所有 CSS 保存在一个地方。

正如您所说，您可以使用外部 CSS 方法和 CssResource “自定义每个新小部件的样式”。使用外部文件，您只需使用该文件中的类名来设置样式。随着 UI 的发展，您可以添加新类或修改现有类。您也可以使用外部 CSS 文件轻松创建主题。

外部 CSS 和 CssResource 方法之间还有其他区别。

CSS 文件是一种更传统的方法。它更易于使用，并且对 UI 设计人员来说更容易使用。

另一方面，CssResource 在有许多开发人员的大型项目中更容易维护。它还提供了许多有用的功能，如条件 CSS、混淆、运行时替换等。

# asp.net-mvc-3 - ASP.NET MVC 如何将 pingfederate (OpenTokenAdapter) 用于 SP 发起的 SSO？

> ID：13250341
> 
> 赞同：5
> 
> 时间：2012-11-06T11:46:00.400
> 
> 标签：asp.net-mvc-3, pingfederate

想问这个问题的意图是如何在ASP.NET MVC 应用程序中集成ping 即服务提供者？我们有两个 idp（身份提供者），我们必须实施服务提供者发起的 SSO。

如果需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T15:47:54.557

从 PingFederate .NET 集成工具包用户指南开始 -

[https://documentation.pingidentity.com/display/NETIK251/Processing+Overview](https://documentation.pingidentity.com/display/NETIK251/Processing+Overview)

对于 SP-Init SSO，您的应用程序将重定向到您的 (SP) PingFederate 服务器，该服务器会向 IDP 生成 AuthnRequest。IDP 对用户进行身份验证并将响应发送回您的 PF (SP)。您的 SP 验证消息并将用户信息映射到 SP OpenToken 适配器。然后 OTK 适配器将生成一个 OTK 并通过浏览器将其发送到您的应用程序，以使用我们的 .NET API for OpenToken 进行验证/使用。

或者，您可以查看 PingOne 应用程序提供商服务 (APS)，它是 Ping 的 OnDemand 解决方案。无需安装软件和 RESTful API 即可集成您的 .NET 应用程序。但是，不确定您的应用程序是连接到 2 个不同的客户 IDP 还是 2 个内部 IDP。

HTH，伊恩

# android - ActionBarSherlock 更改主页图标布局

> ID：13250343
> 
> 赞同：0
> 
> 时间：2012-11-06T11:46:09.417
> 
> 标签：android, android-actionbar, actionbarsherlock

是否有任何简单的方法可以更改 ActionBarSherlock 中的主页图标布局（边距、填充、背景）而不是完全破解？现在，在 onCreate 中，我基本上是通过 id 找到主页图标，并设置参数。这工作正常，但是在我有一个可扩展视图的情况下，并且扩展它会触发一个新的、单独的主视图的创建，我还必须弄清楚如何操作它。

我正在进入一个领域，我必须开始对 abs 类进行子类化以实现这一点。有没有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:54:03.743

您可以尝试在 ABS 源中修改ImageView参数`abs__home`。`abs__action_bar_home.xml``res/layout`

话虽如此，修改主页图标布局可能不是一个好主意。

# java - 升级后的 Struts2 execAndWait 拦截器警告

> ID：13250345
> 
> 赞同：2
> 
> 时间：2012-11-06T11:46:23.333
> 
> 标签：java, struts2

我正在使用**struts2**并且有一个使用**execAndWait**拦截器的长时间运行的进程。我最近升级到更新版本的 struts，现在在我的日志中收到以下错误 - 我认为每次 execAndWait 回调服务器时都会发生这种错误......

> 2012 年 11 月 6 日 11:27:59 [org.apache.struts2.util.TokenHelper] 警告 - 找不到映射到令牌名称 struts.token 的令牌

我四处寻找并看到其他网站上提出的问题，但没有发布令人满意的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:20:59.523

`ExecuteAndWaitInterceptor`由于拦截器，拦截器尝试查找`token`并将其置于会话中，`Token`请参见[https://issues.apache.org/jira/browse/WW-1741](https://issues.apache.org/jira/browse/WW-1741)。

至于警告，您可以修改类的日志级别`TokenHelper`。

# iphone - 添加带有 UIAlertVIew 类似动画的子视图，具有弹跳效果

> ID：13250349
> 
> 赞同：18
> 
> 时间：2012-11-06T11:46:29.013
> 
> 标签：iphone, ios, core-animation, core-graphics

在 iOS 中添加子视图时如何提供弹跳或弹出式动画？我需要类似于`UIAlertView`外观风格的东西。我知道有几种方法可以做到这一点：但我更喜欢在`[UIView animateWithDuration: ...];`这里使用基本块，所以我可以得到一些关于`transform`我应该在这里使用来获得弹出效果的帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-11-06T11:51:33.923

`Animation`对于弹出式样式：

## 迅速

```
 yourView.transform = CGAffineTransform(scaleX: 0.01, y: 0.01)
    UIView.animate(withDuration: 0.2, delay: 0, options: .curveEaseOut, animations: {() -> Void in
        yourView.transform = .identity
    }, completion: {(finished: Bool) -> Void in
        // do something once the animation finishes, put it here
    }) 
```

`Reverse Animation`与`hiding`_`same View`

```
 yourView.transform = .identity
    UIView.animate(withDuration: 0.2, delay: 0, options: .curveEaseOut, animations: {() -> Void in
        yourView.transform = CGAffineTransform(scaleX: 0.01, y: 0.01)
    }, completion: {(finished: Bool) -> Void in
        // do something once the animation finishes, put it here
        yourView.isHidden = true
    }) 
```

## Objective-C

```
yourView.transform = CGAffineTransformMakeScale(0.01, 0.01);
[UIView animateWithDuration:0.2 delay:0 options:UIViewAnimationOptionCurveEaseOut animations:^{
    yourView.transform = CGAffineTransformIdentity;
} completion:^(BOOL finished){
    // do something once the animation finishes, put it here
}]; 
```

`Reverse Animation`与`hiding`_`same View`

```
 yourView.transform = CGAffineTransformIdentity;
[UIView animateWithDuration:0.2 delay:0 options:UIViewAnimationOptionCurveEaseOut animations:^{
    yourView.transform = CGAffineTransformMakeScale(0.01, 0.01);
} completion:^(BOOL finished){
    yourView.hidden = YES;
}]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T06:14:17.970

我之前已经做过......你可以从这段代码中得到我的想法。这可能会对您有所帮助。如果您有任何问题，请告诉我。谢谢

```
- (CGAffineTransform)transformForOrientation {
UIInterfaceOrientation orientation = [UIApplication sharedApplication].statusBarOrientation;
if (orientation == UIInterfaceOrientationLandscapeLeft) {
    return CGAffineTransformMakeRotation(M_PI*1.5);
} else if (orientation == UIInterfaceOrientationLandscapeRight) {
    return CGAffineTransformMakeRotation(M_PI/2);
} else if (orientation == UIInterfaceOrientationPortraitUpsideDown) {
    return CGAffineTransformMakeRotation(-M_PI);
} else {
    return CGAffineTransformIdentity;
}
}

-(void)showCustomAlertView{
UIWindow *window = [UIApplication sharedApplication].keyWindow;
//self (this view pop up like alert)
[window addSubview:self];
self.transform = CGAffineTransformScale([self transformForOrientation], 0.001, 0.001);
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:kTransitionDuration/1.5];
[UIView setAnimationDelegate:self];
[UIView setAnimationDidStopSelector:@selector(bounce1AnimationStopped)];
self.transform = CGAffineTransformScale([self transformForOrientation], 1.1, 1.1);
[UIView commitAnimations];
}

- (void)bounce1AnimationStopped {
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:kTransitionDuration/2];
[UIView setAnimationDelegate:self];
[UIView setAnimationDidStopSelector:@selector(bounce2AnimationStopped)];
self.transform = CGAffineTransformScale([self transformForOrientation], 0.9, 0.9);
[UIView commitAnimations];
}

- (void)bounce2AnimationStopped {
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:kTransitionDuration/2];
self.transform = [self transformForOrientation];
[UIView commitAnimations];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T11:56:16.350

试试这三种方法

****vwTemp 是我的客户警报视图****

```
- (void)showAlertView
{
    vwTemp.transform = CGAffineTransformMakeScale( 0.001, 0.001);
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:kTransitionDuration/1.5];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:@selector(bounce1AnimationStopped)];
    vwTemp.transform = CGAffineTransformMakeScale( 1.1, 1.1);

   [UIView commitAnimations];   
} 
```

* * *

```
 - (void)bounce1AnimationStopped 
{
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:kTransitionDuration/2];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:@selector(bounce2AnimationStopped)];
    vwTemp.transform = CGAffineTransformMakeScale (0.9, 0.9);
    [UIView commitAnimations];
}

- (void)bounce2AnimationStopped
{
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:kTransitionDuration/2];
    [UIView setAnimationDelegate:self];

    vwTemp.transform =  CGAffineTransformIdentity;
    [UIView commitAnimations];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-27T16:32:59.723

试试这个：

```
self.popUpContainerView.alpha = 0;
[UIView animateWithDuration:0.1 animations:^{self.popUpContainerView.alpha = 1.0;}];
CAKeyframeAnimation *bounceAnimation = [CAKeyframeAnimation animationWithKeyPath:@"transform.scale"];
bounceAnimation.values = @[@0.01f, @1.1f, @1.0f];
bounceAnimation.keyTimes = @[@0.0f, @0.5f, @1.0f];
bounceAnimation.duration = 0.2;
[self.popUpContainerView.layer addAnimation:bounceAnimation forKey:@"bounce"]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T11:52:30.963

```
 yourView.transform = CGAffineTransformScale(CGAffineTransformIdentity, 0.001, 0.001);
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.3/1.5];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:@selector(bounce1AnimationStopped)];
    [self.view addSubview:yourView];
    yourView.transform = CGAffineTransformScale(CGAffineTransformIdentity, 1.1, 1.1);
    [UIView commitAnimations]; 
```

两次弹跳动画后，使用以下两种方法..

```
- (void)bounce1AnimationStopped {
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.3/2];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:@selector(bounce2AnimationStopped)];
    yourView.transform = CGAffineTransformScale(CGAffineTransformIdentity, 0.9, 0.9);
    [UIView commitAnimations];
}

- (void)bounce2AnimationStopped {
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.3/2];
    yourView.transform = CGAffineTransformIdentity;
    [UIView commitAnimations];
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-18T18:16:21.107

使用下面的代码在 swift3 中工作

```
func popIn(yourView : UIView){

    yourView.transform = CGAffineTransform(scaleX: 0.01, y: 0.01)
    UIView.animateKeyframes(withDuration: 0.2, delay: 0.0, options: UIViewKeyframeAnimationOptions.calculationModeDiscrete, animations: {
        yourView.transform = .identity
    }, completion: nil)

}
func popOut(yourView: UIView) {
    yourView.transform = .identity
    UIView.animateKeyframes(withDuration: 0.2, delay: 0.0, options: UIViewKeyframeAnimationOptions.calculationModeDiscrete, animations: {
        yourView.transform = CGAffineTransform(scaleX: 0.01, y: 0.01)
    }, completion:{(_ finish : Bool) in
        yourView.removeFromSuperview()}
    )
} 
```

# mysql - MySql：提取具有相同选项的产品

> ID：13250351
> 
> 赞同：1
> 
> 时间：2012-11-06T11:46:33.270
> 
> 标签：mysql

我正在尝试编写一个查询，该查询将提取分配给它们的相同选项值的产品。受影响的表是：

```
products
| id |

rel_product_options
| product | option | value |
"option" is an id from "options" table
"value" is an option value id from "values" table (an option can have multiple values. eg. option "color" can have "red", "blue" etc.) 
```

每个产品在“rel_product_options”表中都有多个选项值组合。同一产品的变体不能具有相同的选项值对，这就是为什么在更改任何选项的任何值之前，我需要检查下一个值是否与其他产品没有冲突。让我们假设

*   产品A（颜色：红色，尺寸：10）
*   产品B（颜色：蓝色，尺寸：10）

现在，如果我尝试将“产品 B”的颜色更改为“红色” - 我应该能够在数据库中找到“产品 A”的选项相同并取消更改。我希望这个问题很清楚，老实说，我什至不知道从哪里开始：无论我使用多少次，sql 对我来说都是一个谜……我从下面的代码开始，但我认为这可能是错误的，比我能指望的更多，所以非常感谢任何帮助。

```
# my thoughts
SELECT P1.*, PO1.*, PO2.* FROM products AS P1
# first select the product we want to extract all options from
# THIS ALREADY IS WRONG, because one of the options is ABOUT TO CHANGE, but this code assumes it has already done that
JOIN rel_product_options AS PO1 ON (PO1.product = P1.id AND PO1.product = 1)
# now join all other products that do not have identical option-value pairs
LEFT JOIN rel_product_options AS PO2 ON (PO1.product != PO2.product AND PO1.`option` = PO2.`option` AND PO1.value = PO2.value)
# and ... i'm lost ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:53:05.243

未经测试，但尝试这样的方法来查找 THIS_PRODUCT_ID 的重复产品。注意我假设每一行`rel_product_options`都是唯一的。

```
SELECT o2.product AS duplicateProduct 
FROM rel_product_options o
INNER JOIN rel_product_options o2 ON o.product <> o2.product 
    AND o.option = o2.option 
    AND o.value = o2.value
WHERE o.product = THIS_PRODUCT_ID
GROUP BY o2.product
HAVING COUNT(*) = (SELECT COUNT(*) 
                   FROM rel_product_options o3 
                   WHERE o3.product = THIS_PRODUCT_ID) 
```

* * *

编辑：看起来你正试图把它放在一个`ON UPDATE`触发器中`rel_product_options`。这有点像黑客，但我想你可以尝试以下类似的方法。这当然是假设`OLD.product = NEW.product`否则所有的赌注都是关闭的：

```
SELECT o2.product AS duplicateProduct 
FROM
(
    SELECT product, 
        CASE WHEN option = OLD.option AND value = OLD.value THEN NEW.option ELSE option END AS option, 
        CASE WHEN option = OLD.option AND value = OLD.value THEN NEW.value ELSE value END AS value
    FROM rel_product_options
    WHERE product = NEW.product
) o
INNER JOIN rel_product_options o2 ON o.product <> o2.product 
    AND o.option = o2.option 
    AND o.value = o2.value
GROUP BY o2.product
HAVING COUNT(*) = (SELECT COUNT(*) 
                   FROM rel_product_options o3 
                   WHERE o3.product = NEW.product) 
```

* * *

编辑 2：如果您从 PHP 运行它，更改参数的值，您可以尝试以下操作。现在假设 ( `product`, `option`) 是唯一的，并且选项*已经存在，具有不同的值*。也就是说，您将使用 an 来跟进查询`UPDATE`以修改行，而不是`INSERT`.

```
SELECT o2.product AS duplicateProduct 
FROM
(
    SELECT product, 
        option, 
        CASE WHEN option = @option THEN @newValue ELSE value END AS value
    FROM rel_product_options
    WHERE product = @product
) o
INNER JOIN rel_product_options o2 ON o.product <> o2.product 
    AND o.option = o2.option 
    AND o.value = o2.value
GROUP BY o2.product
HAVING COUNT(*) = (SELECT COUNT(*) 
                   FROM rel_product_options o3 
                   WHERE o3.product = @product) 
```

此查询中有三个参数：

*   `@product`: 有问题的产品 ID
*   `@option`：您正在更改的选项
*   `@newValue`：您将选项更改为的新值

# c++ - 通过 C++ 中的套接字发送图像

> ID：13250354
> 
> 赞同：0
> 
> 时间：2012-11-06T11:46:55.340
> 
> 标签：c++, file-io, webserver

```
std::ifstream file(localPath.c_str(), std::ifstream::binary);

file.seekg(0, std::ifstream::beg);

while(file.tellg() != -1)
{
    char *p = new char[1024];

    bzero(p, 1024);
    file.read(p, 1024);

    printf("%ld\n", file.gcount());

    n = send(fd, p, strlen(p), 0);
    if (n < 0) {
        error("ERROR writing to socket");
    } else {
        printf("---------%d\n", n);
    }

    delete p;
}

file.close(); 
```

实际上，我要发送的图像是 png（大小：27892 字节）就读取而言，每个字节都被正确读取。但是，在将它们写入套接字时，只写入了几个字节。在这方面需要帮助。

提前致谢。:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T11:48:15.180

`strlen()`需要一个`NULL`终止的字符串，而不是二进制图像数据，当您使用`strlen()`它时，它会在第一个`NULL`（或零）字节处停止，并且图像数据可能在第一个或第二个字节或任何地方包含零，因此您不能使用它`strlen()`来查找大小图像缓冲区。您应该改用缓冲区大小：

```
n = send(fd, p, 1024, 0); 
```

# ios - 当文本字段获得焦点时，iOS UIWebView 不显示键盘

> ID：13250355
> 
> 赞同：1
> 
> 时间：2012-11-06T11:46:56.353
> 
> 标签：ios, uiwebview, keyboard

我有一个嵌入为子视图的 UIWebView，它从网络加载 html 表单。问题是，当您选择其中一个文本字段时，它会获得焦点，但键盘不显示。如果我在 iOS 4.3、5.1 等上运行此应用程序，这只会在 iOS6 上发生，它按预期工作。任何人有任何建议

```
- (void)viewDidLoad
{
[super viewDidLoad];
webView = [[UIWebView alloc] init];
[webView setUserInteractionEnabled:YES];
[webView setScalesPageToFit:YES];
[webView setKeyboardDisplayRequiresUserAction:YES];

// load url here
NSURL *url = [NSURL URLWithString:redirectUrl];
//URL Requst Object
NSMutableURLRequest *requestObj = [NSMutableURLRequest requestWithURL:url];
[requestObj setHTTPMethod:@"POST"];
[webView loadRequest:requestObj];
UIScrollView* sv = nil;
for(UIView* v in [webView subviews]){
    if([v isKindOfClass:[UIScrollView class] ]){
        sv = (UIScrollView*) v;
        sv.scrollEnabled = NO;
        sv.bounces = NO;

    }
}
[webView setOpaque:NO];
[webView setBackgroundColor:[UIColor whiteColor]];
webView.delegate = self;
[self.view addSubview:webView];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:33:06.570

你可以使用这个问题的答案：

[一些 UITextfields 在 iOS6 中没有响应](https://stackoverflow.com/questions/12585463/some-uitextfields-dont-respond-in-ios6)

您必须在控制器中的presentmodalviewcontroller**之前**重新调用firstresponder，您在哪里调用有问题的视图。

但是，您还必须在所有预览控制器中辞职第一响应者，也就是说。

就我而言，我从搜索栏转到详细视图，然后从详细信息转到在 facebook 中共享。facebook 中的分享视图没有显示键盘，这是因为我不是搜索栏的第一响应者。

希望能帮助到你。

# visual-studio - 使用 Visual Studio 2012 express 进行 TypeScript、node.js 开发

> ID：13250359
> 
> 赞同：8
> 
> 时间：2012-11-06T11:47:18.310
> 
> 标签：visual-studio, node.js, typescript, tsc

如何在 Visual Studio 中编写、构建和运行 node.js 应用程序？我在 VS 和 node.js 包上安装了 TypeScript 扩展。当我创建 TypeScript 类型的新项目时，它只能为浏览器编写脚本。

**更新**

我想要 node.js 库的自动完成和错误处理

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T14:34:04.313

您需要包含[node.js 的类型定义](https://github.com/soywiz/typescript-node-definitions/blob/master/node.d.ts)。

该文件声明了 node.js 的所有操作，因此您可以获得自动完成和类型安全。

```
/// <reference path="./node.d.ts" />

var x = new SlowBuffer(5); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:34:01.783

您可以将 VS 用作编辑器，不需要解决方案文件或任何东西。

要创建 node.js 应用程序，首先安装 typescript 包：

```
npm install -g typescript 
```

然后将你的文件编译成javascript：

```
tsc app.ts 
```

将您的应用程序作为节点进程运行：

```
node app.js 
```

# python - Crontab 无法执行 Python 脚本

> ID：13250365
> 
> 赞同：7
> 
> 时间：2012-11-06T11:47:30.550
> 
> 标签：python, crontab

`crontab`无法执行 Python 脚本。我用来运行 Python 脚本的命令行没问题。

**这些是我尝试过的解决方案：**

*   `#!/usr/bin/env python`在顶部添加`main.py`
*   `PATH=/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin`在顶部添加`crontab`
*   `chmod 777`到`main.py`文件
*   `service cron restart`

**我的 crontab 是：**

```
PATH=/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin

*/1 * * * * python /home/python_prj/main.py 
```

**/var/log/syslog 中的日志是：**

```
Nov  6 07:08:01 localhost CRON[28146]: (root) CMD (python /home/python_prj/main.py) 
```

没有别的了。

该`main.py`脚本从 下的其他模块调用一些方法`python_prj`，这有关系吗？

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T12:07:50.137

> main.py 脚本从 python_prj 下的其他模块调用了一些方法，这有关系吗？

是的，它确实。所有模块都需要在运行时可找到。您可以通过多种方式完成此操作，但最合适的方法可能是在您的 crontab 中设置 PYTHONPATH 变量。

您可能还想在 crontab 中设置 MAILTO 变量，以便收到带有任何回溯的电子邮件。

[更新] 这是我的 crontab 的顶部：

```
www:~# crontab -l

DJANGO_SETTINGS_MODULE=djangocron.settings
PATH=...
PYTHONPATH=/home/django
MAILTO="cron-notices@example.com"
...
# m h  dom mon dow   command
10-50/10 * * * *               /home/django/cleanup_actions.py
... 
```

（每 10 分钟运行一次清理操作，除了在整点时）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-27T12:01:28.623

您的脚本中有任何文件访问权限吗？如果是这样，您是否在脚本中使用了相对路径（甚至：没有显式路径）？
从命令行运行时，实际文件夹是“您的路径”​​，您从那里启动脚本。当由 cron 运行时，“你的路径”可能会因环境变量而异。
因此，请尝试对您访问的任何文件使用绝对路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T16:41:17.917

检查脚本的权限。确保它可以被 cron 执行——试试 chmod +x main.py。

# javascript - 为第一个 Jquery UI 选项卡触发选项卡选择

> ID：13250367
> 
> 赞同：0
> 
> 时间：2012-11-06T11:47:33.003
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-tabs

我有一系列与“tabsselect”事件相关的大型方法，但 Jquery UI 不会为初始选项卡触发，并且在第一个选项卡上使用 select 方法不会触发 tabsselect 事件。

我也尝试过在第一个选项卡上手动触发“tabsselect”，但是：

```
$('#tabContainer').trigger('tabsselect'); 
```

不触发事件，

```
$('#firstTab').trigger('tabsselect'); 
```

没有给出在方法中使用的正确参数（函数（事件，ui））。

有人解决了这个问题吗？我必须避免调用备用选项卡，然后再调用正确的初始选项卡，因为这些方法会进行大量处理来初始化页面并保存选项卡视图历史记录。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T19:13:49.297

用这个：

```
$('#tabs').trigger( "tabselect", {index:the_selected_tab_number}); 
```

您需要将函数附加到 tabselect 事件才能工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:05:18.977

而不是触发`tabsselect`，您应该简单地尝试触发该`click`选项卡的事件。

因此，您的代码将如下所示：

```
$('#firstTab').trigger('click'); 
```

# iphone - 为我的公司投资组合创建 iPhone 应用程序

> ID：13250368
> 
> 赞同：1
> 
> 时间：2012-11-06T11:47:33.457
> 
> 标签：iphone, app-store, appstore-approval

我可以为 Apple App Store 创建一个公司组合类型的应用程序吗？我想创建这个应用程序作为我公司的代表。就像它将包含有关我们创建的其他应用程序的内容、联系页面以及普通公司网站包含的所有其他内容。

另外，就内部应用程序计划而言，我的理解是，这些应用程序仅对选定的有限数量的用户可见。我想创建一个应用程序，向任何进入 App Store 的人展示我公司的投资组合并写下我公司的名称。

苹果会批准这种应用程序吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:02:58.723

如果他们遵循自己的审核指南，他们将不会批准。但是，解释显然是灵活的，否则很多现有的应用程序都不会存在。

引用：

2.12 不是很有用、独特、只是捆绑为应用程序的网站或不提供任何持久娱乐价值的应用程序可能会被拒绝

2.13 主要是营销材料或广告的应用程序将被拒绝

# css - 背景图像未逐步加载

> ID：13250371
> 
> 赞同：2
> 
> 时间：2012-11-06T11:47:44.747
> 
> 标签：css, background, high-resolution, progressive

我在使用高分辨率图像作为正文标签背景的网站上遇到问题。图像保存为渐进式 jpeg，但它们不会渐进式加载（Firefox、Chrome ......）。在加载并显示整个图像之前，您只会看到纯白色背景。当我通过地址栏直接调用 imageURL 时，它会按预期加载。
当它们通过css用作背景时，是否可以逐步加载图像？

例如：

```
<!DOCTYPE html>
<head>
<title>Some title</title>
<style type="text/css">
body{
    background-attachment: fixed;
    background-clip: border-box;
    background-color: transparent;
    background-image: url("progressive1920x1080.jpg");
    background-origin: padding-box;
    background-position: center center;
    background-repeat: no-repeat;
    background-size: cover;
}
</style>
</head>
<body>
</body>
</html> 
```

# maven - 如何覆盖默认绑定到 Maven 插件的阶段

> ID：13250377
> 
> 赞同：13
> 
> 时间：2012-11-06T11:48:01.157
> 
> 标签：maven

我想在我的父 pom 的 pluginManagement 中为插件定义不同的执行，然后将特定的执行绑定到子 pom 中的阶段。我看到不一致的行为取决于使用的插件和 pluginManagement 部分的位置。

在第一个示例中，pluginManagement 位于父 pom 中，为编译器插件定义了 2 个执行，为 antrun 插件定义了 2 个执行。

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<name>master-pom</name>
<modelVersion>4.0.0</modelVersion>
<groupId>plugin.test</groupId>
<artifactId>master-pom</artifactId>
<packaging>pom</packaging>
<version>1.0.0-SNAPSHOT</version>
<build>
    <pluginManagement>
        <plugins>               
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <executions>
                    <execution>
                        <id>execution-1</id>
                        <phase>none</phase>
                        <goals>
                            <goal>compile</goal>
                        </goals>
                        <configuration>
                            <source>1.6</source>
                            <target>1.6</target>
                            <includes>
                                <include>**/*</include>
                            </includes>
                        </configuration>
                    </execution>
                    <execution>
                        <id>execution-2</id>
                        <phase>none</phase>
                        <goals>
                            <goal>compile</goal>
                        </goals>
                        <configuration>
                            <source>1.5</source>
                            <target>1.5</target>
                            <includes>
                                <include>**/*</include>
                            </includes>
                        </configuration>
                    </execution>
                </executions>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-antrun-plugin</artifactId>
                <version>1.7</version>
                <executions>
                    <execution>
                        <id>execution-1</id>
                        <goals>
                            <goal>run</goal>
                        </goals>
                        <configuration>
                            <target>
                                <echo message="execution 1"/>
                            </target>
                        </configuration>
                    </execution>
                    <execution>
                        <id>execution-2</id>
                        <goals>
                            <goal>run</goal>
                        </goals>
                        <configuration>
                            <target>
                                <echo message="execution 1"/>
                            </target>
                        </configuration>
                    </execution>
                </executions>
            </plugin>

        </plugins>
    </pluginManagement>
</build> 
```

还有孩子 pom：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<name>build</name>
<modelVersion>4.0.0</modelVersion>
<groupId>plugin.test</groupId>
<artifactId>build</artifactId>
<version>1.0.0-SNAPSHOT</version>
<packaging>pom</packaging>
<parent>
    <groupId>plugin.test</groupId>
    <artifactId>master-pom</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <relativePath>./master-pom.xml</relativePath>
</parent>
<build>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <executions>
                <execution>
                    <id>execution-1</id>
                    <phase>generate-sources</phase>
                </execution>
            </executions>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-antrun-plugin</artifactId>
            <executions>
                <execution>
                    <id>execution-1</id>
                    <phase>generate-sources</phase>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

在子 pom 上运行 'mvn clean install' 将同时运行编译器插件的执行和 antrun 插件的第一次执行，尽管每个的第一次执行都绑定到一个阶段。

现在将 pluginManagement 移动到子 pom：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<name>build</name>
<modelVersion>4.0.0</modelVersion>
<groupId>plugin.test</groupId>
<artifactId>build</artifactId>
<version>1.0.0-SNAPSHOT</version>
<packaging>pom</packaging>
<build>
    <pluginManagement>
        <plugins>               
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <executions>
                    <execution>
                        <id>execution-1</id>
                        <phase>none</phase>
                        <goals>
                            <goal>compile</goal>
                        </goals>
                        <configuration>
                            <source>1.6</source>
                            <target>1.6</target>
                            <includes>
                                <include>**/*</include>
                            </includes>
                        </configuration>
                    </execution>
                    <execution>
                        <id>execution-2</id>
                        <phase>none</phase>
                        <goals>
                            <goal>compile</goal>
                        </goals>
                        <configuration>
                            <source>1.5</source>
                            <target>1.5</target>
                            <includes>
                                <include>**/*</include>
                            </includes>
                        </configuration>
                    </execution>
                </executions>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-antrun-plugin</artifactId>
                <version>1.7</version>
                <executions>
                    <execution>
                        <id>execution-1</id>
                        <goals>
                            <goal>run</goal>
                        </goals>
                        <configuration>
                            <target>
                                <echo message="execution 1"/>
                            </target>
                        </configuration>
                    </execution>
                    <execution>
                        <id>execution-2</id>
                        <goals>
                            <goal>run</goal>
                        </goals>
                        <configuration>
                            <target>
                                <echo message="execution 2"/>
                            </target>
                        </configuration>
                    </execution>
                </executions>
            </plugin>

        </plugins>
    </pluginManagement>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <executions>
                <execution>
                    <id>execution-1</id>
                    <phase>generate-sources</phase>
                </execution>
            </executions>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-antrun-plugin</artifactId>
            <executions>
                <execution>
                    <id>execution-1</id>
                    <phase>generate-sources</phase>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

这个 pom 给出了所需的行为，它只为每个插件运行第一次执行。编译器插件（和大多数其他插件）仅在 pluginManagement 位于同一个 pom 中并且每次执行都绑定到 phase=none 的情况下才能正常工作（可能是因为它将执行绑定到默认阶段）。antrun 插件在任何情况下都能正常工作。

如何在父 pom 中有 pluginManagement 部分且无需将不需要的执行专门绑定到子 pom 中的 phase=none 时实现这一点？这是 Maven 中的错误还是这种行为在某种程度上是合理的？我已经在 Maven 3.0.4 和 Maven 2.2.1 上尝试过，结果相同。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T10:56:17.283

提供的示例可以正常工作。包含修复程序后，我没有重新部署父级。

大多数插件会将执行绑定到默认阶段。因此，当触发插件的一次执行时，所有未绑定的执行都将绑定到默认阶段并且也会运行。

为了避免这种行为，父 pom 的 pluginManagement 部分中插件的所有执行都应该绑定到 phase=none （如提供的示例所示）。这样，除非在子 pom 中明确覆盖该阶段，否则不会运行任何执行。

# xcode - “WeightEntry”没有可见的@interface 声明选择器“initWithEntity:insertInToManagedObjectContext:

> ID：13250378
> 
> 赞同：0
> 
> 时间：2012-11-06T11:48:07.700
> 
> 标签：xcode, core-data, nsmanagedobject

我不确定我做错了什么。我收到此错误消息“'WeightEntry' 没有可见的@interface 声明选择器'initWithEntity:insertInToManagedObjectContext:”。但是我的 WeightEntry 类继承自 NSManagedObject，因此应该继承该方法。

代码发布[在这里](https://dl.dropbox.com/u/81707637/Health%20Beat.zip)

感谢您提前提供的所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:54:30.110

`insertInToManagedObjectContext`应该是`insertIntoManagedObjectContext`。

# python - 如何将 python 类添加到 xml 解析程序

> ID：13250382
> 
> 赞同：-2
> 
> 时间：2012-11-06T11:48:16.777
> 
> 标签：python

我有一个程序，它将接受输入 xml 并打印与输出相同的 xml。我该如何为此实现类和方法？

```
import xml.etree.ElementTree as ET
import sys   
doc       = ET.parse("users.xml")
root      = doc.getroot()
root_new  = ET.Element("users") 
for child in root:
    username             = child.attrib['username']
    password             = child.attrib['password']   
    # create "user" here
    user    = ET.SubElement(root_new, "user") 
    user.set("username",username)               
    user.set("password",password) 
    #checking attribute for skipping KeyError
    if 'remote_access' in child.attrib:
        remote_access   = child.attrib['remote_access']
        user.set("remote_access",remote_access) 
    for g in child.findall("group"):
        # create "group" here
        group     = ET.SubElement(user,"group")  
        if g.text != "lion":
            group.text = g.text 
tree = ET.ElementTree(root_new)
tree.write(sys.stdout) 
```

如何将其转换为类概念。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:58:59.953

如果我理解正确，可能有成千上万种方法可以做到这一点。你想要一个例子，这里是（我假设你的代码正在运行）：

```
import xml.etree.ElementTree as ET
import sys   

class MyXmlParser(object):

    def __init__(self, xml_file_name):
        self.doc  = ET.parse(xml_file_name)
        self.root = doc.getroot()

    def do_something(self, output = sys.stdout):
        root_new  = ET.Element("users") 
        for child in self.root:
            username             = child.attrib['username']
            password             = child.attrib['password']   
            # create "user" here
            user    = ET.SubElement(root_new, "user") 
            user.set("username",username)               
            user.set("password",password) 
            # checking attribute - skip KeyError
            try:
                remote_access   = child.attrib['remote_access']
                user.set("remote_access", remote_access) 
            except KeyError:
                pass

            for g in child.findall("group"):
                # create "group" here
                group     = ET.SubElement(user,"group")  
                if g.text != "lion":
                    group.text = g.text 
        tree = ET.ElementTree(root_new)
        tree.write(output)

def main():
    my_parser = MyXmlParser("users.xml")
    my_parser.do_something()

if __name__ == '__main__':
    main() 
```

# sql - Sqlite - 在一个语句中选择或插入和选择

> ID：13250386
> 
> 赞同：17
> 
> 时间：2012-11-06T11:48:47.980
> 
> 标签：sql, sqlite

我试图避免编写单独的 SQL 查询来实现以下场景：

我有一个名为 Values 的表：

价值观：

```
id INT (PK)
data TEXT 
```

我想检查表中是否存在某些数据，如果存在，则返回其 id，否则插入并返回其 id。

（非常）天真的方式是：

```
select id from Values where data = "SOME_DATA"; 
```

如果 id 不为空，则接受它。如果 id 为空，则：

```
insert into Values(data) values("SOME_DATA"); 
```

然后再次选择它以查看其 id 或使用返回的 id。

我试图在一行中实现上述功能。我想我已经接近了，但我还不能做到：到目前为止，我得到了这个：

```
select id from Values where data=(COALESCE((select data from Values where data="SOME_DATA"), (insert into Values(data) values("SOME_DATA")); 
```

我试图利用这样一个事实，即第二个选择将返回 null，然后将返回 COALESCE 的第二个参数。至今没有成功。我错过了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-06T12:36:04.943

您的命令不起作用，因为在 SQL 中，`INSERT`不返回值。

如果您在列上有唯一约束/索引，则`data`可以在盲目插入值时使用它来防止重复；这使用[SQLite 的`INSERT OR IGNORE`扩展](http://sqlite.org/lang_insert.html)：

```
INSERT OR IGNORE INTO "Values"(data) VALUES('SOME_DATE');
SELECT id FROM "Values" WHERE data = 'SOME_DATA'; 
```

# android - 安装 Micello Android SDK

> ID：13250393
> 
> 赞同：1
> 
> 时间：2012-11-06T11:49:04.017
> 
> 标签：android, eclipse

我想开发一个区域的室内地图。但我无法安装 Micello Android SDK。谁能帮我把它安装到 Eclipse 上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T16:45:43.140

[http://www.micello.com/developer/forum/cant-run-example](http://www.micello.com/developer/forum/cant-run-example)

SDK 中有两个示例应用程序，“地图测试 2”和“基本地图”。“基本地图”是您打开地图所需的最低要求，“地图测试 2”包含有关如何进行更多自定义的示例。许多Android开发者在使用以下步骤时都报告说成功调出参考应用程序，您可以尝试一下吗？

这是我在 Eclipse 上构建基本地图的步骤列表“</p>

1.  将库文件/导入常规/现有项目导入工作区下一步选择根目录浏览然后选择解压缩包的文件夹“Micello Map Library”

2.  导入 BasicMap 项目 File / Import General / Existing Projects into Workspace Next 选择根目录 浏览然后选择文件夹 BasicMap 解压包

3.  在 BasicMap 项目中，

右键单击“BasicMap”，然后选择 Properties 单击 Android，确保选择“Micello Map Library” 单击 Java Build Path，然后单击“Library”选项卡（如果还没有），然后选择按钮“Add External JARs.. .”，然后浏览到“Micello Map Library/lib”文件夹并选择文件 com.micello.mapapi.jar 并单击打开 在“Order and Export”选项卡下，您应该会看到一个条目 com.micello.mapapi.jar – 使用复选框，确保已选中。然后点击确定

1.  然后，您应该能够构建应用程序。但这需要一个 Android API 密钥，确保您使用的是文件“StartActivity.java”中的一个。

如果您可以在 BasicMap 项目中调出地图，请尝试在 Map Test 2 中执行此操作，并逐步完成示例。这应该让您在使用 Android SDK 时有一个良好的开端。

# copy-paste - 通过网关到远程机器的 scp 文件

> ID：13250394
> 
> 赞同：1
> 
> 时间：2012-11-06T11:49:08.137
> 
> 标签：copy-paste, scp, ubuntu-11.10, gateway

如果有网关将我的客户端计算机连接到远程服务器，我无法弄清楚如何将文件 scp 到另一台计算机。从我的客户端机器上，我可以毫无问题地连接到网关，然后使用 SSH 连接到远程服务器。当我尝试将我的目录*dir* scp到远程服务器时，我不知道如何通过网关，因为我的 ssh 连接实际上是一个两步方法。到网关的Scp'ing*目录*首先失败，并带有“权限被拒绝”的备注。

就像是

```
~$:   scp -r /var/www/dir      usrname@remotesrv.com:/var/www/dircp 
```

不起作用，到目前为止我发现的唯一方法涉及公钥/私钥。是否只能通过带有密钥的网关复制文件？如果是这样，有人可以告诉我如何克服复制和粘贴到终端的问题，这有时无法正常工作（使用 Ubuntu 11.10）。已经安装了自动键，希望通过将它们更改为另一个热键来规避有问题的 Ubuntu 快捷方式，但程序一直在崩溃。

我会以一种或另一种方式感谢您的帮助！

# android - 如何存储活动的状态并取回 onResume

> ID：13250395
> 
> 赞同：0
> 
> 时间：2012-11-06T11:49:07.693
> 
> 标签：android, listview, android-activity

我有一个包含名称列表的 ListView 的主要活动。单击列表项时，将触发第二个活动。在第二个活动上按下 BACK 按钮时，我应该在触发第二个活动时以相同的状态返回到第一个活动。我可以知道我怎么能做到这一点..？

请附上一些示例代码。

这是我的示例代码

```
Countries_List_Activity.java

public class Countries_list_Activity extends Activity 
{
     String[] countries_list = new String[] {
             "India",
             "Pakistan",
             "Sri Lanka",
             "China",
             "Bangladesh",
             "Nepal",
             "Afghanistan",
             "North Korea",
             "South Korea",
             "Japan",
             "Australia",
             "GreenLand",
             "Las vegas",
             "U.K",
             "Canada",
             "Zimbabwe",
             "Netherland",
             "Singapore",
             "Dubai",
             "Burma",
             "Sutherland",
             "Weat Indies",
             "New Zealand",
             "Kenya",
             "Namibia"
     };

     int index = 0;
     ListView list;
     Context context=this;

    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

         list = (ListView) findViewById(R.id.listview);
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, countries_list);

        list.setAdapter(adapter);

        list.setOnItemClickListener(new OnItemClickListener() 
        {
            public void onItemClick(AdapterView<?> parent, View view,int position, long id) 
            {
                Object tmp = parent.getItemAtPosition(position);
                String name=tmp.toString();
                System.out.println(name);

                Intent myIntent = new Intent();
                //myIntent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
                myIntent.setClassName("com.mink7.countries","com.mink7.countries.Country_Selected_Activity");
                myIntent.putExtra("name", name);
                startActivity(myIntent);
            }
        });

    }

    protected void onPause()
    {
        super.onPause();

        index = list.getFirstVisiblePosition();
        // Save scroll position
       /* SharedPreferences preferences = context.getSharedPreferences("SCROLL", 0);
        SharedPreferences.Editor editor = preferences.edit();
        int scroll = list.getScrollY();
        editor.putInt("ScrollValue", scroll);
        editor.commit();*/
    }

    @Override
    protected void onResume()
    {
        super.onResume();

        list.setSelectionFromTop(index, 0);
        // Get the scroll position
        /*SharedPreferences preferences = context.getSharedPreferences("SCROLL", 0);
        int scroll = preferences.getInt("ScrollView", 0);
        list.scrollTo(0, scroll);*/
    }

    public boolean onCreateOptionsMenu(Menu menu)
    {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
}

Country_selected_Activity.java

package com.mink7.countries;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class Country_Selected_Activity extends Activity
{
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.selected_country_display);
        TextView tv=(TextView) findViewById(R.id.textView1);
        Button b=(Button) findViewById(R.id.button1);

        Bundle extras = getIntent().getExtras();

        String name =extras.getString("name");
        tv.setText(name);

        b.setOnClickListener(new OnClickListener() 
        {
            public void onClick(View v)
            {
                Intent intent=new Intent();
                intent.setClassName("com.mink7.countries","com.mink7.countries.Countries_list_Activity");
                startActivity(intent);

            }
        });

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T10:06:56.447

有很多方法可以做到这一点。一个简单的解决方案是

使您的索引静态变量；

```
 public static int index = 0; 
```

添加这个

```
onItemClick(AdapterView<?> parent, View view,int position, long id)

 index = position; 
```

onPuase 中的以下行

```
//index = list.getFirstVisiblePosition(); 
```

在 onResume() 中执行此操作

```
 list.setSelection(index);

//list.setSelectionFromTop(index, 0); 
```

# javascript - 通过 HTML 更改脚本中的变量

> ID：13250405
> 
> 赞同：1
> 
> 时间：2012-11-06T11:49:56.740
> 
> 标签：javascript, jquery, html, variables

我的脚本中有许多变量，我希望能够通过程序的 HTML 端进行编辑。这样，如果需要对程序进行更改，脚本可以单独放置，并且可以通过 HTML 进行更改。

以下是我想在 HTML 中编辑的变量：

```
var numberToComplete = 2;
var xAxis = 8;
var yAxis = 6;
var populationAmount = 2; 
```

有没有办法做到这一点，如果有怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:04:19.660

HTML 本身不能做这样的事情，但你可以有一个事件处理程序来完成这项工作，例如

```
<label for=n>Number to complete:</label>
<input id=n value=3 onchange="numberToComplete = this.value"> 
```

具体如何执行取决于上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:08:10.667

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Testing Variable Capturing</title>
        <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
        <script>
        var numberToComplete = 0;
            var xAxis = 0;
            var yAxis = 0;
            var populationAmount = 0; 

            function setValues() {
                numberToComplete = $("#numberToComplete").val();
                xAxis = $("#xAxis").val();
                yAxis = $("#yAxis").val();
                populationAmount = $("#populationAmount").val();
            }
            function getValues() {
                $("#result").text("numberToComplete: " + numberToComplete + " | xAxis: " + xAxis + " | yAxis: " + yAxis + " | populationAmount: " + populationAmount);
            }
        </script>
    </head>
    <body>
       numberToComplete : <input id="numberToComplete" type="text"/><br/>
       xAxis: <input id="xAxis" type="text"/><br/>
       yAxis: <input id="yAxis" type="text"/><br/>
       populationAmount: <input id="populationAmount" type="text"/><br/>
       <input type="button" onclick="setValues();" value="Set Values" />
       <input type="button" onclick="getValues();" value="Get Values" /><br/>
       <div id="result"></div>
    </body>
</html> 
```

上面的代码说明了一个简单的表单，它捕获用户输入的值并将值设置为您想要的变量。此示例使用 jQuery 引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T11:52:58.200

您可以编写一个`eval`用于执行 javascript 并设置值的函数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T12:05:36.953

这样您就可以从 html 表单中传递值，而不必更改脚本

```
<input type='text' id='numberToComplete'>
<input type='button' id='mybutton' value='mybutton'>​

$("#mybutton").click(function(){

var numberToComplete = ($("#numberToComplete").val()=='')? 2:$("#numberToComplete").val() ;       
var xAxis = 8;
var yAxis = 6;
var populationAmount = 2; 
}); 
```

[演示](http://jsfiddle.net/Y3Ajy/) ​</p>

# javascript - html表格，按键选择行

> ID：13250406
> 
> 赞同：0
> 
> 时间：2012-11-06T11:49:59.413
> 
> 标签：javascript, jquery, html, knockout.js, keypress

我有简单的表（使用`knockout.js`），具有选择行的功能
[http://jsfiddle.net/aDahT/447/](http://jsfiddle.net/aDahT/447/)

现在我想添加下一个功能。按记录名称的第一个字母按键选择行。
例如，如果用户按下`b`则选择记录`bbb`。
如果用户按下`h`则选择记录`Ham`。
我该如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:17:55.690

首先，如果您要分叉小提琴，请先运行 JSLint。它将帮助您编写更清晰、更正确的代码。我想出了这个：http: [//jsfiddle.net/a0viedo/Guf3u/](http://jsfiddle.net/a0viedo/Guf3u/)。

使用`event.timeStamp`内部`keyPress()`处理程序，您可以确定用户是否正在输入或是否开始输入新单词。

注意（不那么）小细节：

*   对于大型数据设置，性能极差。
*   区分大小写的选择器。如果要使用不区分大小写的 jquery 选择器，则必须在 html 元素的某些属性中设置项目值。
*   时间戳差异处的硬编码值（750 毫秒）。此硬编码值必须反映键入期间两个键之间的阈值时间。

希望它能给你任何好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:34:55.487

这是一个解决方案：http: [//jsfiddle.net/VEnsz/4/](http://jsfiddle.net/VEnsz/4/)

我有数据绑定到外部元素：

```
<div style="width: 30em; max-height: 6em; overflow-x: hidden; overflow-y: auto; border: 1px groove grey" data-bind="event: {keypress: selectByKeyPress }"> 
```

（您可以在应用程序中选择另一个元素来附加按键事件）。

...并将以下功能添加到您的模型中：

```
self.selectByKeyPress = function(data, e) 
{

    var key = String.fromCharCode(e.keyCode).toLowerCase();
    var items = self.allItems();
    for (var j=0; j<items.length; j++) {
        if (items[j].toLowerCase().indexOf(key) == 0) {
            self.selectCurrent(items[j]); 
            return;
        }
    }      
} 
```

尽管您可能需要稍微改进此解决方案，但我觉得它更符合“淘汰”的做事方式，因此希望能为您提供一个良好的基础来构建您的功能。

# jquery - 警报不适用于锚标记

> ID：13250407
> 
> 赞同：2
> 
> 时间：2012-11-06T11:50:00.287
> 
> 标签：jquery

我创建了 2 个锚标记，然后我创建了一个函数，如果单击第一个锚标记，一个新类将添加到第二个锚标记，然后当您单击第二个锚标记时，它将显示一个警报，其中显示添加了类的锚标记的文本。但它不适合我。

这是供您参考的代码：

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Title</title>
    <script type="text/javascript" src="js/jquery-1.2.6.pack.js"></script>
    <style type="text/css">
        .highlight{background-color:yellow;}
    </style>
    <script>
        $(function(){
            $("a:eq(0)").click(function(){
                $("a:eq(1)").addClass("highlight");
            });

            $("a.highlight").click(function(){
                alert($(this).text());
            });
        });
    </script>
</head>
<body>
    <a href="#">first</a>
    <a href="#">second</a>
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T11:54:44.320

这应该用于第二个：

```
$("a.highlight").live('click', function(){

  alert($(this).text());

}); 
```

请检查这个[jsFiddle](http://jsfiddle.net/vSsnE/)。

但是，如果您使用的是 jQuery 1.7 或更高版本，建议您使用`on()`方法。请查看[文档](http://api.jquery.com/on/)以获取详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:55:35.793

我相信这里的问题是当脚本执行时没有与类的锚链接`highlight`

一个简单的解决`on`方法是使用 jQuery 中的方法。只需更改线路`$("a.highlight").click(function(){`

对此：

```
$("body").on("click", "a.highlight", function(){ 
```

# unit-testing - 是否有可能通过 moss 2007 中的 moss 获取共享点上下文？

> ID：13250408
> 
> 赞同：1
> 
> 时间：2012-11-06T11:50:09.640
> 
> 标签：unit-testing, sharepoint-2007

我的项目是在 moss 2007 中使用 VSTS 2008 创建的。现在我们计划自动化单元测试，是否可以通过 moss 2007 中的 moss 获取共享点上下文？因为我们无法在联合测试中获得任何共享点对象。

谢谢索拉布

# c# - 返回通用接口的工厂类

> ID：13250411
> 
> 赞同：12
> 
> 时间：2012-11-06T11:50:13.953
> 
> 标签：c#, design-patterns, generics, factory

我很少有具体使用以下类型的接口

```
interface IActivity<T>
{
    bool Process(T inputInfo);
} 
```

具体类如下

```
class ReportActivityManager :IActivity<DataTable>
{
    public bool Process(DataTable inputInfo)
    {
        // Some coding here
    }
}

class AnalyzerActivityManager :IActivity<string[]>
{
    public bool Process(string[] inputInfo)
    {
        // Some coding here
    }
} 
```

现在我如何编写工厂类来重新调整通用接口，比如 IActivity。

```
class Factory
{
    public IActivity<T> Get(string module)
    {
        // ... How can i code here
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-06T11:55:53.837

您应该创建泛型方法，否则编译器将不知道`T`返回值的类型。当您拥有时，`T`您将能够根据以下类型创建活动`T`：

```
class Factory
{
    public IActivity<T> GetActivity<T>()
    {
        Type type = typeof(T);
        if (type == typeof(DataTable))
            return (IActivity<T>)new ReportActivityManager();
        // etc
    }
} 
```

用法：

```
IActivity<DataTable> activity = factory.GetActivity<DataTable>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:06:50.517

通常这是在[lazyberezovsky的回答](https://stackoverflow.com/a/13250517/112407)中实现的。在 C++ 中，当您尝试创建工厂无法处理的类型时，您可以使用模板特化来获取编译器错误。

你不能在 C# 中做到这一点，但你可以接近。虽然代码可能看起来有点令人惊讶，但这反过来可能是一个问题。

```
public static class Factory {
   public static IActivity<someType> Get(this someType self){
          //stuff specific to someType
   }

   public static IActivity<someOtherType> Get(someOtherType self){
          //stuff specific to someOtherType
   }

   public static T Creator<T>(){
        return null;
   }

} 
```

然后的用法是

```
IActivity<someType> act = Factory.Creator<someType>().Get(); 
```

当然，这仅在您可以传递具体类型时才有效。如果您需要传递类型参数，事情会变得更加复杂。

# sql - 一个大域表是否被认为是糟糕的设计？

> ID：13250417
> 
> 赞同：6
> 
> 时间：2012-11-06T11:50:31.490
> 
> 标签：sql

我必须向我正在维护的 Web 应用程序添加一些功能，并且我必须决定遵循哪个路径来修改数据库 (Sql Server 2010) 以便存储和检索应用程序所需的新数据。

***“丑陋但快速”*****的路径：**
Web 应用程序已经有这个“通用域表”，它存储可以通过存储过程检索和过滤的不同域数据，指定域字段。
就像是：

```
| Id         | Description | Domain       |
|------------|-------------|--------------|
| 001        |    Apple    |     Fruit    |
| 002        |    Peach    |     Fruit    |
| 003        |    Banana   |     Fruit    |
| A01        |    Yellow   |     Color    |
| A02        |     Red     |     Color    |
| A03        |     Green   |     Color    |

SP_GetDomainValues @Domain='Fruit' 
```

该表已经具有应用层，可以轻松存储和检索数据。
我所需要的只是创建一个数据库脚本，用我需要的新记录和适当的新域来填充表。
我应该补充一点，这个应用程序还有几个域表，每个域表只存储一个域。

***“好但慢”*****的路径：**
我必须创建不同的表、存储过程和 DAL 方法来存储和检索数据。

出于以下两个[主要原因](http://sqlblog.com/blogs/louis_davidson/archive/2010/11/20/one-domain-table-or-many.aspx)，我个人喜欢第二种方法：

*   在查询中使用数据要容易得多，因为您可以自然地加入表，而不是一张大表的子集

*   数据可以很自然地使用外键约束来验证，如果你有一个表，这可能是不可行的，可能命名为“genericDomain”。不是完全不可能，只是使用约束很麻烦

我倾向于认为，如果您没有某种可以帮助决定选择哪种方式的刚性比例，那么您最终每次都会走上快速而肮脏的道路。

根据您的经验，第一选择是一个糟糕的设计，还是在某些情况下可以使用它而不会感到太内疚？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T11:58:15.127

我只会使用已经存在的东西：通过添加数据来完成工作对我来说听起来不错，即使它不是“完美的”。

还要考虑到您的“好”设计需要模式更改、新代码和测试，所有这些都代价高昂并带有风险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:09:26.537

像往常一样，这取决于。

如果应用程序正在运行，并且没有可能的功能增强，您*可以*只做快速而肮脏的事情，然后继续您的生活。企业可能会感谢您，因为这是最快且最容易预测的路线。你会因为让代码处于没有比你发现它更好的状态而感到难过，但你希望接下来可以从事更有价值的工作。

如果应用程序中存在错误，或者您将来可能需要添加更多功能，或者如果您是这方面的长期维护所有者，您需要权衡未来使用此功能的痛苦模型以应对将其置于更可维护状态的短期痛苦。

正如@a_horse_with_no_name 所写，您概述的设计是众所周知的反模式。它很脆弱——数据的变化会以各种令人兴奋的方式破坏应用程序；它依赖于许多不同的层，它们都了解底层数据存储机制，并且能够记住“水果”的正确单词（包括大小写和拼写以及任何流氓空格）。它依赖于应用程序逻辑来检查数据的有效性 - 没有参照完整性 - 在大多数情况下，这会在某个地方失败，因此无辜的最终用户输入了他们认为正确的值，但它以某种方式违反了规则并且永远存在丢失。

所以，如果你不得不忍受这段代码一段时间，我会考虑重构它。我将从为现有代码编写单元测试和集成测试开始，并尝试逐步重构应用程序的某些部分以使用更合理的数据库模型。转换整个应用程序可能需要与原始构建一样多的时间，并且大多数业务人员不会高兴听到添加几个简单的额外功能将需要整个重建 - 所以寻找实用的方法来达到你的目标想去！

# android - 将图像上传到android中的php服务器

> ID：13250418
> 
> 赞同：0
> 
> 时间：2012-11-06T11:50:37.490
> 
> 标签：android

我无法将图像发布到 php 服务器。我有搜索时找到的代码，但我的问题是如何在当前请求中传递用户名、密码、模块和函数名。这是我在大多数网站上找到的代码。

```
 HttpURLConnection connection = null;
DataOutputStream outputStream = null;
DataInputStream inputStream = null;

String pathToOurFile = "/data/file_to_send.mp3";
String urlServer = "http://192.168.1.1/handle_upload.php";
String lineEnd = "\r\n";
String twoHyphens = "--";
String boundary =  "*****";

int bytesRead, bytesAvailable, bufferSize;
byte[] buffer;
int maxBufferSize = 1*1024*1024;

try
{

FileInputStream fileInputStream = new FileInputStream(new File(pathToOurFile) );

URL url = new URL(urlServer);
connection = (HttpURLConnection) url.openConnection();

// Allow Inputs & Outputs
connection.setDoInput(true);
connection.setDoOutput(true);
connection.setUseCaches(false);

// Enable POST method
connection.setRequestMethod("POST");

connection.setRequestProperty("Connection", "Keep-Alive");
connection.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);

outputStream = new DataOutputStream( connection.getOutputStream() );
outputStream.writeBytes(twoHyphens + boundary + lineEnd);
outputStream.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + pathToOurFile +"\"" + lineEnd);
outputStream.writeBytes(lineEnd);

bytesAvailable = fileInputStream.available();
bufferSize = Math.min(bytesAvailable, maxBufferSize);
buffer = new byte[bufferSize];

// Read file
bytesRead = fileInputStream.read(buffer, 0, bufferSize);

while (bytesRead > 0)
{
outputStream.write(buffer, 0, bufferSize);
bytesAvailable = fileInputStream.available();
bufferSize = Math.min(bytesAvailable, maxBufferSize);
bytesRead = fileInputStream.read(buffer, 0, bufferSize);
}

outputStream.writeBytes(lineEnd);
outputStream.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

// Responses from the server (code and message)
serverResponseCode = connection.getResponseCode();
serverResponseMessage = connection.getResponseMessage();

fileInputStream.close();
outputStream.flush();
outputStream.close();
}
catch (Exception ex)
{
//Exception handling
} 
```

我被困在这里..任何帮助表示感谢谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T12:00:18.827

```
public static String UplaodData(byte[] data , String text, String id, boolean personalCheck, boolean privateCheck, String  ImageName, boolean isClaimNote, String url, String percentage, boolean showProgress)
{
    HttpURLConnection connection    = null;
    DataOutputStream outputStream   = null;
    DataInputStream  inputStream    = null;

    //String claimId = ClaimList.claimId;

    String noteType = null;
    String isImageFile = null;

    String Responce                 =  "";
    String urlServer                = url;
    String lineEnd                  = "\r\n";
    String twoHyphens               = "--";
    String boundary                 = "*****";
    System.out.println("Value of note type----------------------- "+noteType);
    try
    {

        URL url1 = new URL(urlServer);
        connection = (HttpURLConnection) url1.openConnection();

        // Allow Inputs & Outputs
        connection.setDoInput(true);
        connection.setDoOutput(true);
        connection.setUseCaches(false);

        // Enable POST method
        connection.setRequestMethod("POST");

        connection.setRequestProperty("Connection", "Keep-Alive");
        connection.setRequestProperty("Content-Type", "multipart/form-data; boundary="+boundary);

        outputStream = new DataOutputStream( connection.getOutputStream() );
        if (data != null)
        {
            outputStream.writeBytes(twoHyphens + boundary + lineEnd);
            outputStream.writeBytes("Content-Disposition: form-data;  Content-type: image/png; name=\"attachment\"; filename=\""+ImageName+"\"" + lineEnd);
            outputStream.writeBytes(lineEnd);
            outputStream.write(data, 0, data.length);
            outputStream.writeBytes(lineEnd);
        }

        if(isClaimNote){
            outputStream.writeBytes(twoHyphens + boundary + lineEnd);
            outputStream.writeBytes("Content-Disposition: form-data; name=\"claimId\"" + lineEnd);
            outputStream.writeBytes(lineEnd);
            outputStream.writeBytes(id);
            outputStream.writeBytes(lineEnd);
        }else{
            outputStream.writeBytes(twoHyphens + boundary + lineEnd);
            outputStream.writeBytes("Content-Disposition: form-data; name=\"activityId\"" + lineEnd);
            outputStream.writeBytes(lineEnd);
            outputStream.writeBytes(id);
            outputStream.writeBytes(lineEnd);
            if(showProgress){
                outputStream.writeBytes(twoHyphens + boundary + lineEnd);
                outputStream.writeBytes("Content-Disposition: form-data; name=\"activityResolution\"" + lineEnd);
                outputStream.writeBytes(lineEnd);
                outputStream.writeBytes(percentage);
                outputStream.writeBytes(lineEnd);
            }
        }

        outputStream.writeBytes(twoHyphens + boundary + lineEnd);
        outputStream.writeBytes("Content-Disposition: form-data; name=\"noteType\"" + lineEnd);
        outputStream.writeBytes(lineEnd);
        outputStream.writeBytes(noteType);
        outputStream.writeBytes(lineEnd);

        outputStream.writeBytes(twoHyphens + boundary + lineEnd);
        outputStream.writeBytes("Content-Disposition: form-data; name=\"noteText\"" + lineEnd);
        outputStream.writeBytes(lineEnd);
        outputStream.writeBytes(text);
        outputStream.writeBytes(lineEnd);
        outputStream.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

        outputStream.writeBytes(twoHyphens + boundary + lineEnd);
        outputStream.writeBytes("Content-Disposition: form-data; name=\"isImageFile\"" + lineEnd);
        outputStream.writeBytes(lineEnd);
        outputStream.writeBytes(isImageFile);
        outputStream.writeBytes(lineEnd);
        outputStream.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

        inputStream  = new DataInputStream( connection.getInputStream());

        int serverResponseCode = connection.getResponseCode();
        String serverResponseMessage = "";

        while ((serverResponseMessage = inputStream.readLine()) != null)
        {
                Responce   = Responce + serverResponseMessage;
        }

        outputStream.flush();
        outputStream.close();
        return Responce;

        }
        catch (Exception ex)
        {
            Responce   = ex.toString();
            return Responce;
        }
}

Above is working code to upload multiparty data, customize this as per you parameter   list 
```

# jquery - 如何防止在 Jquery UI Spinner 中更新值？

> ID：13250421
> 
> 赞同：6
> 
> 时间：2012-11-06T11:50:41.613
> 
> 标签：jquery, jquery-ui, spinner

当用户单击向上箭头时，我不希望我的微调器的值被更新。在 API 中说：

> 自旋（事件，用户界面）
> 
> 在递增/递减期间触发（以确定自旋方向，将当前值与 ui.value 进行比较）。可以取消，防止值被更新。

但没有显示如何做到这一点的例子。我开始了这样的代码：

```
var spinner = $( ".mySpinner" ).spinner({
    min: 0,
    spin: function( event, ui ) {
       //don't know what to do!
    }
});​ 
```

如何取消旋转事件？

你能帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T11:53:11.600

jQuery UI 中的事件取消与原生 DOM 事件的工作方式相同。

您只需调用[preventDefault()](http://api.jquery.com/event.preventDefault/)：

```
var spinner = $( ".mySpinner" ).spinner({
    min: 0,
    spin: function( event, ui ) {
       // Cancel the spin event. The value will not be updated.
       event.preventDefault();
    }
});​ 
```

您也可以`false`从处理程序返回，但这不仅取消了事件，而且有效地停止了它向祖先元素的传播，就像调用了[stopPropagation()一样。](http://api.jquery.com/event.stopPropagation)

# bash - bash - 测试目录是否包含以 .suite 结尾的文件

> ID：13250425
> 
> 赞同：0
> 
> 时间：2012-11-06T11:51:07.163
> 
> 标签：bash

我目前正在编写一个用于执行测试套件的 bash 脚本。除了将套件直接传递给此脚本之外，例如

```
./bash-specs test.suite 
```

如果没有套件传递给它，它也应该能够执行给定目录中的所有脚本，就像这样

```
./bash-specs # executes all tests in the directory, namely test.suite 
```

这是这样实现的

```
(($# == 0)) && set -- *.suite 
```

因此，如果未通过任何套件，则执行所有以 .suite 结尾的文件。这可以正常工作，但如果目录不包含此类文件，则会失败。

这意味着我还需要检查以测试是否确实存在具有该结尾​​的文件。我将如何在 bash 中执行此操作？

我以为一个测试像

```
[[ -f *.suite ]] 
```

应该可以，但是当目录中有多个文件时，它似乎会失败。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T12:19:40.697

失败的原因`-f`是因为`-f`只接受一个参数。当你这样做时`[[ -f *.suite ]]`，它会扩展为：

```
[[ -f test.suite test2.suite test3.suite ]] 
```

...这是无效的。

相反，请执行以下操作：

```
shopt -s nullglob
FILES=`echo *.suite`
if [[ -z $FILES ]]; then 
    echo "No suites found"
    exit
fi

for i in $FILES; do
    # Run your test on file $i
done 
```

`nullglob`是一个 shell 选项，它使未找到的通配符模式扩展为空，而不是扩展为通配符模式本身。一旦`$FILES`设置为文件列表或什么都没有，我们可以`-z`用来测试是否为空，并显示适当的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:30:01.980

紧接着：

> (($# == 0)) && 设置 -- *.suite

测试 $1 是否为空（使用 -z），则表示没有名为 *.suite 的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T11:57:16.613

```
ls -al | grep "\.suite";echo $? 
```

如果文件存在则显示 0，如果文件不存在则显示 1

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T11:58:32.820

我会像这样遍历每个套件文件：

```
for i in *.suite ; do
    if [ -x $i ] ; then
        echo running $i
    fi
done 
```

# c# - Windows-Store-App RichEditBox Markdown 高亮

> ID：13250428
> 
> 赞同：1
> 
> 时间：2012-11-06T11:51:21.943
> 
> 标签：c#, microsoft-metro, markdown, rich-text-editor, windows-store-apps

目前我正试图进入 Windows 商店应用程序开发，但我被困在某个时刻。我想实现一种“markdown 语言”，就像 stackoverflow 上的那样，以突出显示文本输入的某些部分。除此之外，我想让用户能够在他的文本上使用不同的字体颜色。RichEditBox 似乎是此任务的理想控件，但我不知道如何检测动态输入的标记。例如，当用户输入`**Test**`文本时，应立即将其转换为**Test**。

我试图通过收听“TextChanged”事件并查看用户是否输入来解决此问题`**`。如果是这种情况，并且如果他`**`之前已经输入过一次序列，那么我将文本范围的字符格式设置为从第一个注释序列的结尾（开始标记）到第二个注释序列的开头（关闭标记）注释为粗体。

但是这个解决方案似乎非常快速和肮脏。

我的第二个想法是使用 WebView 控件在使用“Markdown Sharp”对其进行预处理后呈现文本。但随后用户将无法编辑文本。

所以我需要得到一些关于解决这个问题的建议或提示。我还考虑编写自定义 RichEditBox 控件，但我没有自定义控件开发经验，并且目前 Web 上没有太多资源可用于 Windows 8 开发。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:49:09.197

如我所见，您的问题是您想根据 Markdown 语法编辑“源”并在同一位置显示格式化的结果。只要星号消失，您将如何将**测试恢复为常规？**如果答案是“使用按钮”，那么为什么不首先使用按钮使其变为粗体呢？

但是，您可以做一件混合的事情：在源文本中应用格式，同时保持 Markdown 标记（但不确定这是否完全适用于所有 Markdown 技巧）。也就是说，`**Test**`在源代码中看起来像**`**Test**`**. 对于最终的格式化结果，您将使用单独的视图，例如 RichTextBlock。

为了进行混合格式化，一个选项是让后台线程定期将整个文本与特定于 Markdown 语法的正则表达式进行匹配。对于每个匹配，相应的文本范围将被相应地格式化。

# coded-ui-tests - 如何在编码的 ui 中找到所有具有 css 类的元素？

> ID：13250433
> 
> 赞同：2
> 
> 时间：2012-11-06T11:51:34.360
> 
> 标签：coded-ui-tests

我需要找到所有具有给定 css 类的 Html 控件。

```
var htmlControl = new HtmlControl(document);
htmlControl.SearchProperties[HtmlControl.PropertyNames.Class] = @class;
var uiTestControlCollection = htmlControl.FindMatchingControls(); 
```

当控件上只有一个 css 类时，使用类名有效。如果我在元素上应用了多个 css 类，我可以通过仅指定一个 css 类而不是所有 css 类来搜索元素吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-22T07:28:18.590

您可以执行部分​​匹配，如下所示：

```
htmlControl.SearchProperties.Add(HtmlControl.PropertyNames.Class, @class, PropertyExpressionOperator.Contains);
var uiTestControlCollection = htmlControl.FindMatchingControls(); 
```

这样做的主要缺点是它只是一个简单的字符串比较。为了说明，假设您有两个控件 A 和 B。A 有类“Test”，B 有类“testdiv topnav”。现在，如果您执行搜索“测试”，将选择控件 A 和 B。

要精确匹配一个类，您可以使用上述方法提供尽可能接近的匹配，并编写一个辅助函数来：

1.  循环遍历集合
2.  获取每个控件的类
3.  在空格上拆分类字符串
4.  循环遍历此数组并测试每个数组是否完全匹配
5.  保留类完全匹配的元素

注意：这显然不是最佳选择 - 如果有人有更好的解决方案，我会全力以赴。

干杯，塞布

# javascript - 我不想运行一个函数，只是将它用作参数，但它一直在弹出

> ID：13250434
> 
> 赞同：0
> 
> 时间：2012-11-06T11:51:49.487
> 
> 标签：javascript, function, parameters

我在其他答案中读到，为了将函数用作参数，需要编写它，`whatever;`而不是`whatever()`因为这个 las 选项“调用”函数。但是，如果我需要指定所述函数的参数怎么办？我举个例子：

我有这个功能来替换一些内容：

```
function navigate(content) {
var card = document.getElementById('informationdiv');
card.innerHTML = content;
} 
```

然后我有另一个创建内容的函数：

```
function productsheet(article) {
    document.write(array_products[article].Name);
    document.write(array_products[article].Number);
    document.write(array_products[article].Type);
    // and so on... 
```

然后，我想像这样调用第一个函数：

```
navigate(productsheet(article)); 
```

而不是进行 innerHTML 替换，它只是`productsheet(article)`覆盖其他所有内容。

正如我所说，我发现了类似的问题，解决方案是在`productsheet`没有的情况下通过`(article)`，但在我的情况下，我需要 article 参数，所以`productsheet`知道要打印什么......

这里建议的方法是什么？

非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T11:53:26.587

如果我正确理解了您的问题，您需要将一个匿名函数传递给`navigate`并在其中调用您的`productsheet`函数：

```
navigate(function () {
    productsheet(article);
}); 
```

但是，我不确定您要达到什么目的……您可能想摆脱这些`document.write`调用并从中返回一个字符串`productsheet`，然后调用该函数而不是将其引用分配给`innerHTML`：

```
card.innerHTML = content(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:15:10.743

有很多更好的方法可以实现您想要的，但是以您的代码为起点，我将执行以下操作：

```
navigate(article);

function navigate(article) {
    var card = document.getElementById('informationdiv');
    card.innerHTML = productsheet(article);
}

function productsheet(article) {
    //here you would return a string that has the format as how you would like to display it
    return "... name, number, type ...";
} 
```

同样，我认为您应该重新考虑整个方法并将此代码丢弃。

# mysql - 根据系统时序触发性能

> ID：13250436
> 
> 赞同：0
> 
> 时间：2012-11-06T11:51:54.287
> 
> 标签：mysql

我的问题可能听起来很愚蠢，但如果有人回答这个问题，我会很高兴:)

当我们设置一个触发器来执行诸如 now()、curdate()、curtime() 之类的操作时，它是否会考虑在删除或更新之前发生的时间变化，例如 - 我有一个触发器今天（2012 年 6 月 11 日）下午 5 点设置我必须明天删除一组行，即 2012 年 7 月 11 日下午 5 点。在这段时间间隔中，我更改了系统的时间或日期，现在触发器是否考虑新更改的日期和时间来删除行。

# c - C fscanf 读取字符或整数

> ID：13250441
> 
> 赞同：0
> 
> 时间：2012-11-06T11:52:08.527
> 
> 标签：c

我需要使用 fscanf 从文本文件中读取字符和整数，但我不知道下一个值是字符还是整数。我该怎么做

```
if(next_is_character)
    fscanf(file, "%c", &mycharacter);
else
    fscanf(file, "%d", &myinteger); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:59:12.817

```
while(fscanf(fp,"%c",&charvar))
{
    if(isalpha(charvar))
     {
        //it is character
      }
     if(isdigit(charvar))
     {
        //it is integer
      }
} 
```

你可以使用这个功能

```
#include <ctype.h>

int isalnum(int c);
int isalpha(int c);
int isascii(int c);
int isblank(int c);
int iscntrl(int c);
int isdigit(int c);
int isgraph(int c);
int islower(int c);
int isprint(int c);
int ispunct(int c);
int isspace(int c);
int isupper(int c);
int isxdigit(int c); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:12:54.450

将所有内容读取为 c-string 并使用**[strtol](http://www.kernel.org/doc/man-pages/online/pages/man3/strtol.3.html)**进行验证。

如果`strtol`无法将字符串转换为整数，那么它就是字符。否则，它是一个整数。

```
char *endptr;

fscanf(fp, "%s", str);

myInteger = strtol(str, &endptr, 10);

// Check the errno for errors 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:22:22.567

我一直在搞乱，我发现这样的东西可以工作：

```
fpos_t position;
fgetpos (fp, &position);

char isCharacter;
fscanf(fp, "%c", &isCharacter);
if(isalpha(isCharacter))
{
        //it is character
}
else
{
    fsetpos(fp, &position);
    // integer, read it
} 
```

# ruby - 我可以在 Ruby 2.x 中要求命名参数吗？

> ID：13250447
> 
> 赞同：47
> 
> 时间：2012-11-06T11:52:25.243
> 
> 标签：ruby, arguments, ruby-2.0, ruby-2.1

Ruby 2.0 正在添加命名参数，如下所示：

```
def say(greeting: 'hi')
  puts greeting
end

say                     # => puts 'hi'
say(greeting: 'howdy')  # => puts 'howdy' 
```

如何在不提供默认值的情况下使用命名参数，以便它们是必需的？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-02-25T23:55:18.280

Ruby 2.0.0 中没有特定的方法，但您[可以使用 Ruby 2.1.0 来实现](https://github.com/ruby/ruby/blob/ruby_2_1/NEWS#L16-17)，语法如下`def foo(a:, b:) ...`

在 Ruby 2.0.x 中，您可以通过放置任何引发异常的表达式来强制执行它，例如：

```
def say(greeting: raise "greeting is required")
  # ...
end 
```

如果您打算经常这样做（并且不能使用 Ruby 2.1+），您可以使用如下辅助方法：

```
def required
  method = caller_locations(1,1)[0].label
  raise ArgumentError,
    "A required keyword argument was not specified when calling '#{method}'"
end

def say(greeting: required)
  # ...
end

say # => A required keyword argument was not specified when calling 'say' 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-11-06T11:58:43.007

目前（Ruby 2.0.0-preview1）您可以使用以下方法签名：

```
def say(greeting: greeting_to_say)
  puts greeting
end 
```

The`greeting_to_say`只是一个占位符，如果您向命名参数提供参数，则不会对其进行评估。如果你不传入它（调用 just `say()`），ruby 将引发错误：

```
NameError: undefined local variable or method `greeting_to_say' for (your scope) 
```

但是，该变量没有绑定到任何东西，据我所知，不能从您的方法内部引用。您仍将`greeting`用作局部变量来引用为命名参数传入的内容。

**如果您确实要这样做**，我建议您使用`def say(greeting: greeting)`，以便错误消息引用您为参数提供的名称。我只在上面的示例中选择了不同的，以说明 ruby​​ 将在您收到的错误消息中使用什么，因为您没有为所需的命名参数提供参数。

切线，如果你跟注`say('hi')`ruby​​ 会加注`ArgumentError: wrong number of arguments (1 for 0)`，我认为这有点令人困惑，但这只是预览1。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-11-28T19:31:25.937

结合@awendt 和@Adam 的解决方案，

```
def say(greeting: ->{ raise ArgumentError.new("greeting is required") }.call)
  puts greeting
end 
```

您可以使用以下方法将其干燥：

```
def required(arg)
  raise ArgumentError.new("required #{arg}")
end

def say(greeting: required('greeting'))
  puts greeting
end 
```

并将其与@Marc-Andre 的解决方案相结合：[https ://gist.github.com/rdp/5390849](https://gist.github.com/rdp/5390849)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-07-02T18:05:41.683

在 Ruby 2.3 中，我可以做到

```
def say(greeting:)
  puts greeting
end 
```

然后将其与...

```
say(greeting: "hello there") 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-06T11:57:20.523

怎么样：

```
def say(greeting: nil)
  greeting or raise ArgumentError
  puts greeting
end

say                     # => raises ArgumentError
say(greeting: 'howdy')  # => puts 'howdy' 
```

除此之外，这将是困难的。根据[这个网站](http://rosettacode.org/wiki/Named_parameters#Ruby.27s_future)，关键字参数“是具有默认值的命名参数。”</p>

# asp.net - 如何在 asp.net 中使用网格视图跨越列

> ID：13250453
> 
> 赞同：0
> 
> 时间：2012-11-06T11:52:49.760
> 
> 标签：asp.net, gridview

我在 Asp.net 中使用 gridview 在表格中显示数据

我想显示这样的数据 -

```
Sr.No    ClassStandard    Division    Total
---------------------------------------------
                          A      B
---------------------------------------------
 1\.        First         10      20     30
 2\.        Second        15      15     30 
```

如果我直接附加源，那么数据是这样的-

```
 ClassStandard   A       B     Total
  ------------------------------------------
   First         10      20     30
   Second        15      15     30 
```

这是代码：

```
if (!IsPostBack)
    {
        try
        {
            IApplicationContext ctx = ContextRegistry.GetContext();
            IServices reg = (IServices)ctx.GetObject("Services");

            DataSet ds = reg.getInstituteStatusByDistrict();
            int Count = ds.Tables[0].Rows.Count;
            gridviewdistrictReport.DataSource = ds;
            gridviewdistrictReport.DataBind();
        }
    } 
```

注意：我使用 Spring .net 进行数据库连接

在 Aspx 文件中

```
 <asp:GridView ID="gridviewdistrictReport" runat="server"> 
```

我应该如何显示跨越两列的上排..请帮帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:26:15.180

这些链接应该可以帮助您将多个标题添加到 gridview

[示例 1](http://www.codeproject.com/Articles/27824/Dynamic-Multiple-Row-Column-Grid-Header)

[示例 2](http://blogs.msdn.com/b/mattdotson/archive/2006/03/01/real-world-gridview-two-headed-grouping-gridviews.aspx)

# iphone - 在 iPhone 中显示初始屏幕和设置初始屏幕数据时调用 Web 服务

> ID：13250455
> 
> 赞同：2
> 
> 时间：2012-11-06T11:53:03.800
> 
> 标签：iphone, ios, web-services

我想在显示启动画面时从 Web 服务加载数据。在初始屏幕中，我需要显示这些数据。我怎样才能做到这一点 ？我需要从哪里调用网络服务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T11:54:43.667

您必须在 Appdelegate 中调用 webservice 并创建 globle 并`NSmutableArray`在您的应用程序中使用此数组与 xml parsong

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {  

  NSString *path = [NSString stringWithFormat:your url path];

    NSLog(@"path= %@",path);

    [self parseXMLFileAtURL:path];

}
-(void)parseXMLFileAtURL:(NSString*)URL
{

    NSURL *url = [NSURL URLWithString:URL];
    RssParser = [[NSXMLParser alloc] initWithContentsOfURL:url];
    [RssParser setDelegate:self];
    [RssParser setShouldProcessNamespaces:NO];
    [RssParser setShouldReportNamespacePrefixes:NO];
    [RssParser setShouldResolveExternalEntities:NO];
    [RssParser parse];
}

-(void)parserDidStartDocument:(NSXMLParser *)parser
{   

}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{

}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{

}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{

}
- (void)parser:(NSXMLParser *)parser parseErrorOccurred:(NSError *)parseError 
{
}

-(void)parserDidEndDocument:(NSXMLParser *)parser
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:54:33.437

在 AppDelegate API 中执行此操作

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

在此方法中进行 Web 服务调用。它是 main() 之后调用的第一个方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:18:35.163

在启动闪屏时取一个 NSTimer。

将启动画面置于睡眠模式。

将解析数据存储在数组中。

在下面的解析器方法中

```
-(void)parserDidEndDocument:(NSXMLParser *)parser
{
if([array count]>0){
//load view whatever you want and display fresh data
}else{
//Alert msg Data not available or display old data if available in database.
}
} 
```

# freebase - Freebase MQL 查询检索不一致的结果

> ID：13250458
> 
> 赞同：2
> 
> 时间：2012-11-06T11:53:04.707
> 
> 标签：freebase

当我在 freebase 查询生成器中运行此查询时

```
[{
  "/type/object/id": "/en/michael_jackson",
  "/type/object/name": null,
  "/type/object/type": "/music/artist",
  "/music/artist/album": [{
    "id":            null,
    "name":          [],
    "release_type!=": "Single",
    "/music/album/primary_release": [{
      "name":       null,
      "track_list": [{name:null}]
    }]
  }]
}];​ 
```

我得到了正确的结果，包括专辑和曲目列表，但如果将查询更改为

```
[{
  "/type/object/id": "/en/carly_rae_jepsen",
  "/type/object/name": null,
  "/type/object/type": "/music/artist",
  "/music/artist/album": [{
    "id":            null,
    "name":          [],
    "release_type!=": "Single",
    "/music/album/primary_release": [{
      "name":       null,
      "track_list": [{name:null}]
    }]
  }]
}];​ 
```

我什么都拿不回来。[您可以在http://www.freebase.com/queryeditor](http://www.freebase.com/queryeditor)尝试这两个查询。有人能指出我做错了什么吗？这两位都是艺术家，所以我也应该找回 Carly Rae Jepsen 的专辑和曲目列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:49:24.413

并非所有专辑都记录了主要版本。除非您真的关心这一点，否则我会放松您的约束并使用如下[查询](http://tinyurl.com/cxqtccz)：

```
[{
  "id": "/en/carly_rae_jepsen",
  "name": null,
  "type": "/music/artist",
  "/music/artist/album": [{
    "id":            null,
    "name":          null,
    "release_type!=": "Single",
    "/music/album/releases": [{
      "name":       null,
      "track_list": [{"name":null}]
    }]
  }]
}]​ 
```

对查询的其他一些调整：

*   最后一个“名字”没有被引用
*   查询不以分号结尾
*   /type/object 是默认值，可以省略，与最近指定类型关联的属性类似
*   name 是一个单值属性，所以使用 null 而不是 []

如果您想要主要版本（如果可用），但不限制您的查询，您可以使用“可选”：true。您可以通过按发布日期对所有版本进行排序并只选择第一个版本（假设它很有可能成为主要版本）来获得更好的结果。

结果查询如下[所示](http://tinyurl.com/cfk53k2)：

```
[{
  "id":   "/en/carly_rae_jepsen",
  "name": null,
  "type": "/music/artist",
  "album": [{
    "id":            null,
    "name":          [],
    "release_type!=": "Single",
    "primary_release": [{
      "optional": true,
      "name":     null,
      "track_list": [{
        "name": null
      }]
    }],
    "releases": [{
      "name":         null,
      "track_list": [{
        "name": null
      }],
      "release_date": null,
      "sort":         "release_date",
      "limit":        1
    }]
  }]
}]​ 
```

# jsf - 在 JSF 中保存视图

> ID：13250460
> 
> 赞同：0
> 
> 时间：2012-11-06T11:53:14.560
> 
> 标签：jsf, session, viewstate, facescontext, view-scope

我有一个关于检索 JSF 页面的视图状态的问题。我有一个应用程序，用户可以在其中搜索列表中的人员，当用户按下“显示”按钮时，同一个 JSF 页面将填充各种人员的列表。现在，当我选择其中一个人时，将显示另一个 JSF 页面，其中包含有关该人的更深入和详细的信息。现在在该页面中显示了一个“取消/中止”按钮。我想要完成的是，当我按下特定的“取消/中止”按钮时，页面应该被重定向并导航回 JSF 页面，并显示列表，因此以某种方式应该存储“视图状态” （我只假设）但我不知道该怎么做...... 我只是想检查是否有人能够以某种方式解决此类问题..？（上面提到的JSF搜索页面被声明为viewscoped作为附加信息）

谢谢大家的帮助。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:58:39.283

你可以做豆子`@SessionScoped`。这意味着浏览器会话只会创建一个实例，因此当您返回时，您将获得最后一个状态。当然，会话范围意味着当您返回视图时，即使它不是“返回”导航，该信息仍然存在。

# ios - UIActivityView 将文件附加到电子邮件

> ID：13250463
> 
> 赞同：4
> 
> 时间：2012-11-06T11:53:23.420
> 
> 标签：ios, xcode, ipad, email, uiactivityviewcontroller

我`UIActivityView`在我的 iPad 应用程序中创建了一个，但我不知道如何在发送电子邮件时附加文件。我能怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T14:54:05.953

我想它会对你有所帮助。

```
NSData *pdfData = [NSData dataWithContentsOfFile:pdfFilePath];
UIActivityViewController *activityViewController = [[UIActivityViewController alloc] initWithActivityItems:@[@"Test", pdfData] applicationActivities:nil];

[self presentViewController:activityViewController animated:YES completion:nil]; 
```

# php - GIF/JPEG 文件可以包含可运行的 PHP 代码吗？

> ID：13250471
> 
> 赞同：8
> 
> 时间：2012-11-06T11:53:52.690
> 
> 标签：php, security, gif

测试一个 Web 应用程序，我可以上传 GIF/JPEG 文件，并且我知道在该 GIF/Jpeg 中正确包含 PHP 代码时可能存在威胁（因为它是使用[imagecreatetruecolor](http://php.net/imagecreatetruecolor)和[imagejpeg](http://php.net/imagejpeg)修改的）。

我正在寻找一个现有的 GIF 文件，其中包含一个简单的 PHP 代码（如 phpinfo 或 echo 'hello world'），只是为了验证威胁是具体的。

完美的是一个专门制作的 GIF 图像，中间包含 PHP 代码或调色板颜色，但我没能找到。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T12:39:23.180

我将为包含 PHP 代码执行的 jpg 链接文件回答自己，但如果其他人提供更完整的答案，我将提供接受的检查；）

[这是一个包含 PHP 漏洞利用代码 (phpinfo) 的“受损”JPEG 文件的链接](http://php.webtutor.pl/wp-content/uploads/2011/04/php-logo-virus.jpg)

（别担心，文件不会对你做任何事情）

此外，重要的是要注意，即使您成功上传了包含 php 代码的 gif 文件，如果该 gif 文件被读取为 gif（而不是通过 include/require 或配置错误的服务器作为 php 执行），它也不会t 做任何事情，只是在你的服务器上有 php 代码，没用。

因此，为了使这种攻击起作用，您需要具备两个条件：

1.  该网站必须在您可以访问的某个时间点使用文件上传
2.  存储的文件必须通过 PHP 执行，即使是图像文件（在这种情况下）。

尽管 1\. 很容易拥有，但如今第二个几乎是不可能的。PHP 的默认配置是仅为 .php 文件运行 PHP 解释器，或者使用 NGinx、Apache、Lighttpd 等。

总之，这种攻击向量的成功概率非常低。

# unit-testing - 测试期间的Scalatra Servlet init() (Jetty ServletTester)

> ID：13250475
> 
> 赞同：3
> 
> 时间：2012-11-06T11:54:05.357
> 
> 标签：unit-testing, scala, servlets, initialization, scalatra

我正在测试一个 Scalatra servlet，它在其`init(context: ServletContext)`方法中进行了一些重要的初始化。

在未执行的测试期间（使用[ScalatraSuite](http://www.scalatra.org/guides/testing.html)） 。`init`测试时我应该如何进行*重要的*初始化？

[Scalatra 测试页面](http://www.scalatra.org/guides/testing.html)（ “测试常见问题解答”部分）没有透露这一点。

**额外信息：**
“测试常见问题解答”部分指出

> scalatra-test 基于 Jetty 的 [ServletTester][3]

但是如果我在 java 中编码，我也无法从互联网上提取有关如何运行 init 的任何信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T06:32:12.917

你可以`servletContextHandler`在测试中使用这些东西。

你可以`initParameters`设置`servletContextHandler.setInitParameter("the.param", "the.value")`

我会更新文档，所以他们不会说测试支持是通过 jetty tester 添加的。事实上，它使用嵌入式码头服务器，因此`init`应该调用该方法。

# android - 在Android中没有解析密钥的Json

> ID：13250476
> 
> 赞同：1
> 
> 时间：2012-11-06T11:54:05.763
> 
> 标签：android, json, web-services

我在 Json 下面有这个，我是从 .Net Web 服务获得的：

```
[["Developer","test","developer@test.com"]] 
```

我检查了 jsonlint 验证器，它在 json 上面显示得很好。

因为它没有任何`key`我不知道如何在 Android 中解析它。有人可以帮我如何在没有密钥的情况下解析这个json。

如果它有钥匙，我会尝试这个：

```
{"first":"somevalue","last":"someothervalue"} // Json response

JSONObject json_obj = new JSONObject(resp); //response is the json array
String first = json_obj.getString("first");
String last = json_obj.getString("last");
String test = "Hello! " + first + " " + last; 
```

希望有人帮助:)

问候，

普拉文

**我的解决方案**

```
JSONArray respo = new JSONArray(resp); //resp is Json Array
respo = respo.getJSONArray(0);
String test = respo.getString(2);
test = "Your Email Address is " + test; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T12:32:57.933

在 Android (Java) 中解析这一行看起来像：

```
String jsonString="[[\"Developer\",\"test\",\"developer@test.com\"]]";
try {
   JSONArray jsonArray=new JSONArray(jsonString);
   JSONArray jsonArray2=jsonArray.getJSONArray(0);

   for (int i = 0; i < jsonArray2.length(); i++) {
     String valueString=jsonArray2.getString(i);
     Log.e("json", i+"="+valueString);
   }
} catch (JSONException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T12:29:01.793

使用 JSONArray 而不是 JSONObject。然后使用 getJSONArray() 函数获取数组内部的数组。之后，您可以使用它们的索引和 getString() 访问所有值。

# iphone - iPhone 上没有重新出现后退按钮

> ID：13250478
> 
> 赞同：1
> 
> 时间：2012-11-06T11:54:06.383
> 
> 标签：iphone, xcode

我创建了一个 if 语句，它将在表格编辑时隐藏后退按钮。

但是当离开编辑模式时，我无法让后退按钮重新出现。

```
 - (void)setEditing:(BOOL)editing animated:(BOOL)animated 
    {
    NSLog(@"Edit");
    bool e = [tableView isEditing];
    e=!e;
    [tableView setEditing:e animated:YES];
    [super setEditing:e animated:YES];

    if (editing)
    {
    [self.navigationItem setHidesBackButton:YES animated:NO];
        UIBarButtonItem *add = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(pushViewController:animated:)];
        self.navigationItem.leftBarButtonItem = add;
    }
    else if (editing == false)
    {
    self.navigationItem.leftBarButtonItem = self.navigationItem.backBarButtonItem;
    //[self.navigationItem setHidesBackButton:NO animated:NO];
    }
} 
```

我在 else 语句中添加了一个 NSLog，它似乎根本没有被调用。

编辑：我解决了它，我简单地将 if(editing == true) 替换为 if(e == true) 它现在可以工作了，不过感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:56:54.833

你需要设置editing == false，或者去掉else if，换成else。目前您正在测试两次以进行编辑 == true

```
if (editing){
    [self.navigationItem setHidesBackButton:YES animated:NO];
    UIBarButtonItem *add = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(pushViewController:animated:)];
    self.navigationItem.leftBarButtonItem = add;
}else{
    [self.navigationItem setHidesBackButton:NO animated:NO];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:59:05.190

您可以将左栏按钮重置为默认的后退按钮，如下所示。

```
self.navigationItem.leftBarButtonItem   =   self.navigationItem.backBarButtonItem; 
```

**编辑**：你能试试这样吗？

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated 
{
    NSLog(@"Edit");
    bool e = [tableView isEditing];
    e=!e;
   [tableView setEditing:e animated:YES];
   [super setEditing:e animated:YES];

    if (editing)
    {
        UIBarButtonItem *add = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(pushViewController:animated:)];
        self.navigationItem.leftBarButtonItem = add;
    } 
    else
    {
        self.navigationItem.leftBarButtonItem = self.navigationItem.backBarButtonItem;
    }
} 
```

尝试这个。很高兴这对您有帮助。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:05:01.083

编辑：我刚刚在一个项目中尝试了以下代码，它按预期工作，隐藏并重新出现 backButton：

```
- (IBAction)testButton:(id)sender {
    hide = !hide;
    [self.navigationItem setHidesBackButton:hide animated:NO];
} 
```

hide 以 NO 开头。每次我按下 testButton 时，背面都会出现或消失。

您是否在隐藏 backButton 时对 navigationController 或 navigationItem 进行了修改？

# c# - 用日期填充组合框（只有年和月）？

> ID：13250481
> 
> 赞同：0
> 
> 时间：2012-11-06T11:54:24.827
> 
> 标签：c#, datetime, combobox

```
DateTime now = DateTime.Now;
List<DateTime> dates = new List<DateTime>();
dates.Add(now);
dates.Add(now.AddMonths(6));
dates.Add(now.AddMonths(1));
dates.Add(now.AddYears(1));

comboBoxDates.DataSource = dates; 
```

我会使用一个循环并遍历列表，并制作另一个没有日期和房子的列表：分钟..但我确信有更好的方法可以做到这一点。先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T11:58:18.513

这取决于您要实现的目标，但总的来说，您可以`List<DateTime>`像这样做一样绑定到您的组合框，然后将其设置`FormatString`为您需要的任何内容：

```
comboBoxDates.FormatString = "MM-yyyy"; 
```

这种方法允许您配置向用户显示的内容，并且在代码中您仍然可以使用`DateTime`绑定。

# php - 获取“节点引用”的字段或全部内容

> ID：13250490
> 
> 赞同：2
> 
> 时间：2012-11-06T11:54:48.440
> 
> 标签：php, drupal, drupal-7, drupal-nodes

我创建了一个内容类型：“battle”，其中一个字段是“节点引用”，它引用来自另一个内容类型（“facts”）的现有内容。

现在，当我去主题化节点时：“node--battaglia.tpl.php”，我如何获取引用的节点的一些字段（“facts”），或者使用它的所有内容？

（我使用 Drupal 7）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:03:55.907

尝试类似的东西：

```
$nids = array();
foreach($content['YOUR_FIELD_NAME']['#items'] as $key => $val)
{
    $nids[] = $val['target_id'];
}
// the referenced nodes ids are now stored inside "$nids" array.
// You can do whatever you need to do from there.
// below I try to load the node object of each nid.
$nodes = node_load_multiple($nids); 
```

希望这会有所帮助……穆罕默德。

# objective-c - 枚举自定义：是否可以创建子枚举？

> ID：13250491
> 
> 赞同：4
> 
> 时间：2012-11-06T11:54:56.013
> 
> 标签：objective-c, c, enums, customization

所以，这是代码：

```
typedef enum{
    zero, one, two, three, four, five, six, seven, eight, nine
}Digits;

typedef enum{
    zero, one, two, nine 
}DigitsThatILikeToUse; 
```

问题：如果我定义功能：

```
void takeMyFavoriteDigits(DigitsThatILikeToUse favorite); (C)

-|+(void) takeMyFavoriteDigits:(DigitsThatILikeToUse)favorite; (Objective-C) 
```

我不能将它与基本的反向引用一起使用，`enum Digits`因为我的订单`enum DigitsThatILikeToUse`不同。

我的解决方案是写出这样的数字的明确位置：

```
typedef enum{
    zero = 0, one = 1, two = 2, nine = 9 
}DigitsThatILikeToUseInEdition; 
```

但！我无法遍历这个新的`enum DigitsThatILikeToUseInEdition`.

我想创建一个`subEnum`并`enum`遍历它。是否可以？

我最好的想法是使用这样的东西：

```
typedef enum{
        beginIteratorDigitsThatILike, zero, one, two, nine, endIteratorDigitsThatILike, three, four, five, six, seven, eight
    }Digits; 
```

但也许有任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:25:16.697

由于（大多数情况下）没有通过添加更多间接级别无法解决的问题：

```
typedef enum enumDigits {
  digitsNone = -1, 
  digitsZero, digitsOne, digitsTwo, digitsThree, digitsFour, digitsFive, digitsSix, digitsSeven, digitsEight, digitsNine, 
  digitsMax
} Digits_t;

typedef enum enumDigitsIndexIdLikeToUse {
  digitsIndexIdLikeToUseNone = -1, 
  digitsIndexIdLikeToUseZero, digitsIndexIdLikeToUseOne, digitsIndexIdLikeToUseTwo, digitsIndexIdLikeToUseThree, digitsIndexIdLikeToUseFour, 
  digitsIndexIdLikeToUseMax
} DigitsIndexIdLikeToUse_t;

const Digits_t digitsIdLikeToUse[digitsIndexIdLikeToUseMax] = {
  digitsZero, digitsOne, digitsTwo, digitsNine
} 
```

假设您想使用至少 1 个 didigt，您可以这样做：

```
Digits_t digitIdLikeToUse = digitNone;

...

for (DigitsIndexIdLikeToUse_t digitIndexIdLikeToUse = digitsIndexIdLikeToUseZero, digit = digitsIdLikeToUse[digitIndexIdLikeToUse];
  digitsIndexIdLikeToUse < digitsIndexIdLikeToUseMax;
  ++ digitsIndexIdLikeToUse)
{
  <do something with digitIdLikeToUse>
} 
```

# php - 从 http://api.hostip.info/ 获取数据

> ID：13250494
> 
> 赞同：0
> 
> 时间：2012-11-06T11:55:04.340
> 
> 标签：php, simple-html-dom

从此 xml 文档中获取城市[http://api.hostip.info/](http://api.hostip.info/)

所以我使用了 html dom 解析器。

如果我使用 gml:name 来获取城市名称，我会得到城市名称以及主机 ID 字符串。如何从此站点仅获取城市名称？

# ios - iOS 5+：为其他用户读取 Twitter 状态/home_timeline

> ID：13250495
> 
> 赞同：0
> 
> 时间：2012-11-06T11:55:06.307
> 
> 标签：ios, tweets

在我的应用程序中，我想显示来自另一个用户时间轴的推文。有可能吗？我可以访问不需要身份验证的 user_timelines，但对于 home_timelines 我需要进行身份验证，但是我如何阅读另一个用户公共时间线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:05:02.823

如果您希望从特定用户的 home_timeline 获取推文，则需要进行身份验证。不幸的是，您最好的选择可能只是授权并获取设备上的帐户。然而，这并不是一项艰巨的任务。下面是我在 Twitter 应用程序中用于请求访问该帐户的一些代码。

```
 // Create an account store object.
    ACAccountStore *accountStore = [[ACAccountStore alloc] init];

    // Create an account type that ensures Twitter accounts are retrieved.
    ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

    // Request access from the user to use their Twitter accounts.
    [accountStore requestAccessToAccountsWithType:accountType options:nil completion:^(BOOL granted, NSError *error) {

        if(granted) {
            // Get the list of Twitter accounts.
            NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];

            // For the sake of brevity, we'll assume there is only one Twitter account present.
            // You would ideally ask the user which account they want to tweet from, if there is more than one Twitter account present.
            if ([accountsArray count] > 0) {
                // Grab the initial Twitter account to tweet from.
                ACAccount *twitterAccount = [accountsArray objectAtIndex:0];

                //At this point, the twitterAccount has been pulled into the *twitterAccount object.
            }
        } 
```

**编辑：** 根据下面的评论，您希望显示`home_timeline`来自 BBC，类似于您在[twitter.com/BBCNews](http://twitter.com/BBCNews)中看到的内容。home_timeline API 调用仅返回当前已验证帐户的[时间](https://dev.twitter.com/docs/api/1.1/get/statuses/home_timeline)*线*。这意味着您将只能获取正在使用您的应用程序的用户的时间线。

如果您想获取*另一个用户*的时间线，例如 BBCNews，您需要使用[user_timeline](https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline) API 调用并在参数中指定您想要时间线的用户，类似于[选择 twitterapi 帐户时间线的 twitter 示例](https://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=twitterapi&count=2)。

此外，从它的声音来看，`user_timeline`API 调用对您不起作用，因为您还想查看转推。如果您查看[文档](https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline)，您将看到一个可选参数，您可以在 API 调用中使用该参数`include_rts`将包括或排除转发。

这将解决您的问题。过去很多时候，当我使用 Twitter API 并遇到问题时，我会问自己“我面临的问题是一个简单的问题吗？”。如果您实际面临的问题确实很简单，那么您可以放心，问题可能已经被处理或解决了，只是您还没有找到解决方案。继续破解它。 `user_timeline`是您想要使用的，只需使用参数即可。

# jquery - Facebook：列出所有有头像的朋友，点击重定向到不同的链接

> ID：13250496
> 
> 赞同：0
> 
> 时间：2012-11-06T11:55:06.443
> 
> 标签：jquery, facebook, facebook-graph-api

我正在使用 Facebook 查看所有使用此特定应用程序的朋友。现在在我的应用程序中，我可以查看使用相同应用程序的朋友的个人资料图片，但在点击个人资料照片应用程序时，他们将分别重定向到他们的 Facebook 页面。单击时，我想重定向到 Facebook 页面以外的其他链接。可能吗 ？如何 ？

我的代码是

```
<script>
FB.init({
    appId  : '********', //App ID
    channelUrl : 'http://www.***.in/', // Channel File
    status : true, 
    cookie : true,
    xfbml  : true 
});
FB.getLoginStatus(function(response) {
    if (response.session) {

        globaluserid=response.session["uid"];
        //fetching friends uids from 'friend' table. We are using FB.api syntax
        FB.api(
                {
                method: 'fql.query',
                query: 'SELECT uid1 FROM friend WHERE uid2='+globaluserid
                },
                function(response) {
                //once we get the response of above select query we are going to parse them
                for(i=0;i<response.length;i++)
                {
                //fetching name and square profile photo of each friends
                    FB.api(
                    {
                        method: 'fql.query',
                        query: 'SELECT name,pic_square,username FROM user WHERE uid='+response[i].uid1
                    },
                    function(response) {
                        //creating img tag with src from response and title as friend's name
                        htmlcontent='<img src='+response[0].pic_square+' title='+response[0].name+' alt='+response[0].username+' />';

                    }
                    );
                }
            }
        );
        } else {
            // no user session available, someone you dont know
            top.location.href="../kfb_login.php";
        }
    });
</script>
<div class="just_trying">
<div class="fb-login-button" data-show-faces="true" data-width="200" data-max-rows="1">    </div> </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:41:31.500

在您提供的代码示例中，您的 FB.api 实际上并没有对它检索到的信息做任何事情。您正在将它分配给一个`htmlcontent`变量，但是您没有使用此变量将内容注入到 HTML 的任何地方。您看到的朋友照片列表来自 Login Button 标签，`data-show-faces="true"`这意味着 Login 按钮将显示由 Facebook 代码专门生成的[Facepile 。](https://developers.facebook.com/docs/reference/plugins/facepile/)

因此，您希望设置`data-show-faces`为 false 并将您的 Javascript 代码修改为：

```
function(response) {
  //creating img tag with src from response and title as friend's name
  htmlcontent = document.createElement('img');
  htmlcontent.src = response[0].pic_square;
  htmlcontent.title = response[0].name;
  htmlcontent.alt = response[0].username;
  document.getElementsByTagName('body')[0].appendChild(htmlcontent);
} 
```

为简单起见，如果您使用的是 jQuery，那么您可以将其修改为：

```
function(response) {
  //creating img tag with src from response and title as friend's name
  htmlcontent = '<img src='+response[0].pic_square+' title='+response[0].name+' alt='+response[0].username+' />'
  $('body').append(htmlcontent);
} 
```

# java - 文件和文件夹出现在 Eclipse 中的“Referenced Libraries”类别中。如何防止这种行为？

> ID：13250497
> 
> 赞同：1
> 
> 时间：2012-11-06T11:55:05.883
> 
> 标签：java, eclipse

我继承了一个 Eclipse 项目，其中很多数据都在“引用库”类别中，尽管出于所有好的目的，它们在文件系统中显示为常规文件/目录。将新文件添加到项目中会产生类似的结果——它们将被放入“引用库”类别中。

我想把这个奇怪的项目变成更类似于通常的 Eclipse java 项目体验的东西，`Flasji`里面有`src/`. 如何？

![在此处输入图像描述](../Images/59da68e1a8123aef7c410fa40e180d61.png)

## 编辑 ＃＃：

这是我要求的 .classpath 文件的内容：

```
<classpath>
    <classpathentry kind="src" path="src"/>
    <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.6"/>
    <classpathentry kind="lib" path="alloy4.2-rc.jar"/>
    <classpathentry kind="lib" path="asm-2.2.3.jar"/>
    <classpathentry kind="lib" path="bsh-2.0b4.jar"/>
    <classpathentry kind="lib" path="commons-io-2.3.jar"/>
    <classpathentry kind="lib" path="congu.jar"/>
    <classpathentry kind="lib" path="Gent java6.jar"/>
    <classpathentry kind="lib" path="junit-4.10.jar"/>
    <classpathentry kind="output" path="bin"/>
</classpath> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:57:02.280

要在视觉上摆脱这些，请打开您的 MANIFEST.MF 并在编辑器中单击该编辑器页面上的第三个选项卡“运行时”，有一个类路径部分，如果您在编辑器中删除它们，您将看到 jars 您的类路径将自动更新并且引用的库将不再存在。

# objective-c - 如何在两个 iOS 设备之间实现语音和文本聊天

> ID：13250498
> 
> 赞同：1
> 
> 时间：2012-11-06T11:55:06.880
> 
> 标签：objective-c, ios, text, chat, voice

我想实现一个应用程序，通过它可以在网络下的两个 iOS 设备之间进行语音和文本聊天。我不需要像 LinPhone 或 SiPhone 这样的任何电话的语音通话功能。我研究过它们，发现对我来说太复杂了。有没有简单的SDK可以做到这一点？？？

顺便说一句，用户识别可以通过电子邮件验证来完成......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:35:04.123

I think one best way to do it using XMPP Framework. Using XMPP you can send files & text to other persons. Using it you can record voice message & send it across. There are some links for it:

**[GitHub Project Link for XMPP Chat](https://github.com/robbiehanson/XMPPFramework/wiki/GettingStarted_iOS)**

**[Building a Jabber Client for iOS: XMPP Setup](http://mobile.tutsplus.com/tutorials/iphone/building-a-jabber-client-for-ios-xmpp-integration/)**

Hope it helps to you.

**EDIT:**

Apple's GameKit framework provides evertyhing you need to implement in-game chat.

The full documentation is here:

[http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/GameKit_Guide/AddingVoiceChattoaMatch/AddingVoiceChattoaMatch.html#//apple_ref/doc/uid/TP40008304-CH11-SW11](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/GameKit_Guide/AddingVoiceChattoaMatch/AddingVoiceChattoaMatch.html#//apple_ref/doc/uid/TP40008304-CH11-SW11)

Assuming you have allready connected the App to one or more other players using GameKit, you can start the voice chat like so:

```
-(void) startInGameChat {
//Set up audio session
AVAudioSession *audioSession = [AVAudioSession sharedInstance];
[audioSession setCategory:AVAudioSessionCategoryPlayAndRecord error:myErr];
[audioSession setActive: YES error: myErr];

GKMatch* match;
GKVoiceChat *teamChannel = [[match voiceChatWithName:@"redTeam"] retain];
GKVoiceChat *allChannel = [[match voiceChatWithName:@"allPlayers"] retain];

//Start the chat
[teamChannel start];

//Enable Mic
teamChannel.active = YES;

} 
```

# python - pandas.DataFrame 子类的属性在 pickle 后消失

> ID：13250499
> 
> 赞同：5
> 
> 时间：2012-11-06T11:55:09.517
> 
> 标签：python, class, inheritance, subclass, pandas

我正在尝试将属性添加到 pandas.DataFrame 的子类，它们在酸洗和解酸后消失：

```
import cPickle
import pandas as pd

class MyClass(pd.DataFrame):
    def __init__(self):
        super(MyClass, self).__init__()
        self.bar = 1

myc = MyClass()
with open('myc.pickle', 'wb')as myfile:
    cPickle.dump(myc,myfile)
with open('myc.pickle', 'rb')as myfile:
    b = cPickle.load(myfile)
print b.bar 
```

输出：

```
Traceback (most recent call last):
File "test_df.py", line 14, in <module>
print b.bar
File "C:\Python27\lib\site-packages\pandas\core\frame.py", line 1771, in __getattr__
(type(self).__name__, name))
AttributeError: 'MyClass' object has no attribute 'bar' 
```

知道如何安全地添加属性吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T12:28:06.860

这与子类化无关。Pandas 对象的属性不会序列化。

您可以阅读[此主题](https://groups.google.com/forum/?fromgroups=#!topic/pydata/9Qimqt4ekvQ)以进行讨论和解决方法。[这个话题在最近的另一个线程](https://groups.google.com/forum/?fromgroups=#!topic/pydata/2ORknH_70co)中再次出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-05T16:14:08.323

你可以使用 @property 装饰器来做类似的事情：

```
class MyClass(pd.DataFrame):
    def __init__(self, *args, **kwargs):
        super(MyClass, self).__init__(*args, **kwargs)
        self.foo = 1

    @property
    def bar(self):
        return 1 
```

`MyClass.foo`酸洗后将不可用，但`MyClass.bar`会在那里（截至目前，只读）。

# c# - Windows 8 应用商店应用全局视图模型

> ID：13250501
> 
> 赞同：0
> 
> 时间：2012-11-06T11:55:11.843
> 
> 标签：c#, xaml, mvvm, windows-8

我目前正在开发一个应用程序，并且遇到了一些“架构混乱”。

我正在实现我自己的（非常简单的）MVVM 模式，理想情况下它只有一个实例，并且大约每 60 秒更新一次。

在以前的应用程序上在 Windows Phone 7 中执行 Xaml (Silverlight) 时，我能够将 ViewModel 放在我的 App 类（应用程序开始的地方）中，然后我能够在初始加载后在整个应用程序中访问这个模型过程完成。

我一直在搜索互联网并下载教程/示例，看看是否有任何地方可以为 Windows 8 商店应用程序提供明确的答案。

现在我想知道这是否是在 Windows 8 应用商店应用程序中工作的正确方式？

以下是我探索过的几种工作方式：

*   在 MainPage.cs 文件中拥有 ViewModel，然后在每个导航方法上，我一直将 ViewModel 作为页面参数传递给下一页使用。
*   在 App.cs 文件中有 ViewModel，尝试了这个，但似乎无法从任何其他页面访问它
*   拥有一个静态 ViewModel 类，它包含应用程序的所有信息。没有看到任何其他项目/样本已经这样做了，所以我有点不愿意“脱离”规范并这样做。

我确信这已经被考虑过了，并且在 Windows 8 应用商店应用中有一种方法可以做到这一点，但是我正在努力寻找一个明确的答案，并且我遇到的许多官方 (MSDN) 示例/教程都可以做到并没有真正解决这个问题。许多示例似乎涵盖了可用 API 的非常小的方面。

总结：我如何构建一个 Windows 8 应用商店应用程序并拥有一个所有页面都可以在整个应用程序中绑定/使用的 ViewModel？这是否需要在应用程序和数据存储方式方面进行架构更改，还是我错过了一种可以使我的 ViewModel 全球化的方法？

再次感谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T13:04:00.320

通常，大多数应用程序为每个页面使用不同的视图模型，因此您不会经常看到具有共享视图模型的示例。为每个视图使用单独的视图模型（带有特定于页面的代码）可能会更好，但是共享数据模型。

如果您真的想让您的 ViewModel 在所有页面之间共享，您可以尝试在 ViewModel 上使用静态“实例”属性（而不是静态类）。

例如，

```
public class MyViewModel
{
    private static MyViewModel instance;

    private MyViewModel()
    {
        // Private constructor
    }

    public static MyViewModel Instance
    {
        get
        {
            if (instance == null)
                instance = new MyViewModel();

            return instance;
        }
    }
} 
```

# html - 将 html 表单数据粘贴到 url

> ID：13250502
> 
> 赞同：0
> 
> 时间：2012-11-06T11:55:14.073
> 
> 标签：html, ruby-on-rails, ruby-on-rails-3, rest, forms

假设我有 2 种方法的资源：show 和：index。我需要：index 包含带有文本字段和提交按钮的简单表单，当用户将数据插入文本字段时，该数据必须作为 :show 方法的资源的 :id 插入到 url 中。

例如页面 url 看起来像`/s`，当用户在表单中的字段中输入 123 并按提交时，他必须被重定向到`/s/123`。可以用 rails 或 html forms 完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-20T10:41:22.427

你中间有 s?id=123 我不能评论这就是为什么我要发布如果是这样然后使用这个代码

```
<form method="get">
  <input type="text" name="id">
  <input type="submit">
</form> 
```

始终记住，文本框的名称将出现在文本框中，现在它是 id，所以它应该是`s?id=value`，当名称更改为例如 usd 时，url 将是`s?usd=value.`

请记住使用以下代码使用这些 url 执行功能。

```
if($_GET['textbox_name'] == true){//things to do} 
```

# android - 哪些版本的 Android 支持哪些包签名算法？

> ID：13250505
> 
> 赞同：8
> 
> 时间：2012-11-06T11:55:26.930
> 
> 标签：android, sha

鉴于我想支持所有 android 设备，比如*Froyo*或更高版本，我可以使用的最安全的签名算法是什么？我不需要将我的*APK*放在*Android Market*中。

例如，我知道有些手机支持`sha1withrsa`但不支持`sha256withrsa`（[链接](http://code.google.com/p/android/issues/detail?id=38321)）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:51:58.177

请参阅[有关签名的 android 开发指南](http://developer.android.com/tools/publishing/app-signing.html#signapp)。当前的默认方法是`SHA1withRSA`：

```
$ jarsigner -verbose -sigalg SHA1withRSA -digestalg SHA1 -keystore my-release-key.keystore my_application.apk alias_name 
```

而几年前推荐的签名方法是`MD5withRSA`。

* * *

> [...] 我可以使用的最安全的签名算法是什么？

您是否担心某些使您认为`SHA1withRSA`或`SHA256withRSA`会更安全的特定攻击？我无法预见任何情况。

# regex - 如何分离重叠的图案

> ID：13250509
> 
> 赞同：1
> 
> 时间：2012-11-06T11:55:36.240
> 
> 标签：regex

我有一个包含几个结构定义的头文件。我想从这个文件中提取一个特定的结构。例如，我只需要获得第二个结构。

```
typedef struct {
  int a;
  int b;
} first;

typedef struct {
  int x;
 int y;
} second; 
```

下面的表达式

```
...
headerText = headerFile.read()
re.match(r"typedef struct {(.*)} second;", headerText) 
... 
```

返回

```
int a;
  int b;
} first;

typedef struct {
  int x;
  int y; 
```

我怎样才能只得到第二个结构？谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:01:19.767

使用这个..只需用任何其他必需`regex`的结构名称替换`second`

**[无组]**

如果您不想要这些组，请使用此正则表达式

```
typedef struct(?!.*?typedef struct).*?\}.*?\bsecond\b.*?; 
```

上面的正则表达式匹配`typedef struct`后面没有另一个`typedef struct`即`(?!.*?typedef struct)`..这样做是为了不捕获多个结构

* * *

**[与团体]**

```
(?:^|\;).*(typedef struct.*?\}.*?\bsecond\b.*?;) 
```

基本上，以上`regex`内容匹配位于文件开头的结构，或者在语句终止符之后匹配所需的结构`;`..即。这样做是为了使结果中不包含其他结构定义..

`(?:^|\;)`匹配字符串或 a 的开头`;`并且不会在组中被捕获

`.*`**贪婪地**匹配 0 到多个字符

 **`(typedef struct.*?\}.*?\bsecond\b.*?;)`现在匹配你的结构

`.*?`**懒惰地**匹配 0 到多个字符

 **`Group1`现在有你需要的结构****

# java - 使用 gradle 对带有嵌入式 glassfish 的 jar 进行容器测试失败

> ID：13250513
> 
> 赞同：3
> 
> 时间：2012-11-06T11:55:43.447
> 
> 标签：java, jpa, glassfish, gradle, cdi

我正在使用 JUnit 和嵌入式 glassfish 来使用 CDI 测试一些代码。这看起来相当简单，但我一定遗漏了一些东西。我创建了一个简单的项目来演示这个问题。

[https://github.com/dantwinkler/container-test-embedded-glassfish](https://github.com/dantwinkler/container-test-embedded-glassfish)

如果没有设置参数，这是堆栈跟踪。如果在嵌入式容器属性中指定了 domain.xml，则测试仍然失败，但因为它表示无法找到测试。下一步是尝试让事情在没有 gradle 的情况下工作，看看这是否是罪魁祸首。

```
Gradle Worker 1 executing tests.

com.foo.service.TestModelServiceTest STANDARD_ERROR
    Nov 11, 2012 11:30:35 AM com.sun.enterprise.v3.server.CommonClassLoaderServiceImpl findDerbyClient
    INFO: Cannot find javadb client jar file, derby jdbc driver will not be available by default.
    Nov 11, 2012 11:30:38 AM org.glassfish.flashlight.impl.provider.FlashlightProbeProviderFactory processXMLProbeProviders
    SEVERE: MNTG0301:Cannot process XML ProbeProvider, xml = META-INF/gfprobe-provider.xml
    java.lang.IllegalStateException: Provider already mapped glassfish:javamail:smtp-transport
        at org.glassfish.flashlight.impl.core.ProbeProviderRegistry.registerProbeProvider(ProbeProviderRegistry.java:100)
        at org.glassfish.flashlight.impl.provider.FlashlightProbeProviderFactory.registerProvider(FlashlightProbeProviderFactory.java:561)
        at org.glassfish.flashlight.impl.provider.FlashlightProbeProviderFactory.processXMLProbeProviders(FlashlightProbeProviderFactory.java:386)
        at org.glassfish.admin.monitor.MonitoringBootstrap.processProbeProviderXML(MonitoringBootstrap.java:484)
        at org.glassfish.admin.monitor.MonitoringBootstrap.processManifest(MonitoringBootstrap.java:360)
        at org.glassfish.admin.monitor.MonitoringBootstrap.addProvider(MonitoringBootstrap.java:301)
        at org.glassfish.admin.monitor.MonitoringBootstrap.verifyModule(MonitoringBootstrap.java:245)
        at org.glassfish.admin.monitor.MonitoringBootstrap.discoverProbeProviders(MonitoringBootstrap.java:188)
        at org.glassfish.admin.monitor.MonitoringBootstrap.enableMonitoringForProbeProviders(MonitoringBootstrap.java:624)
        at org.glassfish.admin.monitor.MonitoringBootstrap.postConstruct(MonitoringBootstrap.java:176)
        at com.sun.hk2.component.AbstractCreatorImpl.inject(AbstractCreatorImpl.java:131)
        at com.sun.hk2.component.ConstructorCreator.initialize(ConstructorCreator.java:91)
        at com.sun.hk2.component.AbstractCreatorImpl.get(AbstractCreatorImpl.java:82)
        at com.sun.hk2.component.SingletonInhabitant.get(SingletonInhabitant.java:67)
        at com.sun.hk2.component.EventPublishingInhabitant.get(EventPublishingInhabitant.java:139)
        at com.sun.hk2.component.AbstractInhabitantImpl.get(AbstractInhabitantImpl.java:78)
        at com.sun.enterprise.v3.server.AppServerStartup.run(AppServerStartup.java:229)
        at com.sun.enterprise.v3.server.AppServerStartup.doStart(AppServerStartup.java:145)
        at com.sun.enterprise.v3.server.AppServerStartup.start(AppServerStartup.java:136)
        at com.sun.enterprise.glassfish.bootstrap.GlassFishImpl.start(GlassFishImpl.java:79)
        at org.glassfish.ejb.embedded.EJBContainerProviderImpl.createContainer(EJBContainerProviderImpl.java:204)
        at org.glassfish.ejb.embedded.EJBContainerProviderImpl.createEJBContainer(EJBContainerProviderImpl.java:129)
        at javax.ejb.embeddable.EJBContainer.createEJBContainer(EJBContainer.java:127)
        at com.foo.service.TestModelServiceTest.setup(TestModelServiceTest.java:41)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
        at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
        at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
        at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
        at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
        at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
        at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:55)
        at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:42)
        at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:75)
        at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:49)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
        at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
        at org.gradle.messaging.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
        at org.gradle.messaging.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
        at $Proxy2.processTestClass(Unknown Source)
        at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:103)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
        at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
        at org.gradle.messaging.remote.internal.TypeCastDispatch.dispatch(TypeCastDispatch.java:30)
        at org.gradle.messaging.remote.internal.WorkerProtocol.handleIncoming(WorkerProtocol.java:53)
        at org.gradle.messaging.remote.internal.WorkerProtocol.handleIncoming(WorkerProtocol.java:31)
        at org.gradle.messaging.remote.internal.ProtocolStack$ProtocolStage.handleIncoming(ProtocolStack.java:167)
        at org.gradle.messaging.remote.internal.ProtocolStack$BottomStage.handleIncoming(ProtocolStack.java:277)
        at org.gradle.messaging.remote.internal.ProtocolStack$BottomConnection$1.run(ProtocolStack.java:299)
        at org.gradle.messaging.remote.internal.ProtocolStack$ExecuteRunnable.dispatch(ProtocolStack.java:120)
        at org.gradle.messaging.remote.internal.ProtocolStack$ExecuteRunnable.dispatch(ProtocolStack.java:116)
        at org.gradle.messaging.dispatch.AsyncDispatch.dispatchMessages(AsyncDispatch.java:132)
        at org.gradle.messaging.dispatch.AsyncDispatch.access$000(AsyncDispatch.java:33)
        at org.gradle.messaging.dispatch.AsyncDispatch$1.run(AsyncDispatch.java:72)
        at org.gradle.internal.concurrent.DefaultExecutorFactory$StoppableExecutorImpl$1.run(DefaultExecutorFactory.java:66)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:680)
    Nov 11, 2012 11:30:38 AM org.glassfish.flashlight.impl.provider.FlashlightProbeProviderFactory processXMLProbeProviders
    SEVERE: MNTG0301:Cannot process XML ProbeProvider, xml = jersey-gf-server-probe-provider.xml
    java.lang.IllegalStateException: Provider already mapped glassfish:jersey:server-hidden
        at org.glassfish.flashlight.impl.core.ProbeProviderRegistry.registerProbeProvider(ProbeProviderRegistry.java:100)
        at org.glassfish.flashlight.impl.provider.FlashlightProbeProviderFactory.registerProvider(FlashlightProbeProviderFactory.java:561)
        at org.glassfish.flashlight.impl.provider.FlashlightProbeProviderFactory.processXMLProbeProviders(FlashlightProbeProviderFactory.java:386)
        at org.glassfish.admin.monitor.MonitoringBootstrap.processProbeProviderXML(MonitoringBootstrap.java:484)
        at org.glassfish.admin.monitor.MonitoringBootstrap.processManifest(MonitoringBootstrap.java:360)
        at org.glassfish.admin.monitor.MonitoringBootstrap.addProvider(MonitoringBootstrap.java:301)
        at org.glassfish.admin.monitor.MonitoringBootstrap.verifyModule(MonitoringBootstrap.java:245)
        at org.glassfish.admin.monitor.MonitoringBootstrap.discoverProbeProviders(MonitoringBootstrap.java:188)
        at org.glassfish.admin.monitor.MonitoringBootstrap.enableMonitoringForProbeProviders(MonitoringBootstrap.java:624)
        at org.glassfish.admin.monitor.MonitoringBootstrap.postConstruct(MonitoringBootstrap.java:176)
        at com.sun.hk2.component.AbstractCreatorImpl.inject(AbstractCreatorImpl.java:131)
        at com.sun.hk2.component.ConstructorCreator.initialize(ConstructorCreator.java:91)
        at com.sun.hk2.component.AbstractCreatorImpl.get(AbstractCreatorImpl.java:82)
        at com.sun.hk2.component.SingletonInhabitant.get(SingletonInhabitant.java:67)
        at com.sun.hk2.component.EventPublishingInhabitant.get(EventPublishingInhabitant.java:139)
        at com.sun.hk2.component.AbstractInhabitantImpl.get(AbstractInhabitantImpl.java:78)
        at com.sun.enterprise.v3.server.AppServerStartup.run(AppServerStartup.java:229)
        at com.sun.enterprise.v3.server.AppServerStartup.doStart(AppServerStartup.java:145)
        at com.sun.enterprise.v3.server.AppServerStartup.start(AppServerStartup.java:136)
        at com.sun.enterprise.glassfish.bootstrap.GlassFishImpl.start(GlassFishImpl.java:79)
        at org.glassfish.ejb.embedded.EJBContainerProviderImpl.createContainer(EJBContainerProviderImpl.java:204)
        at org.glassfish.ejb.embedded.EJBContainerProviderImpl.createEJBContainer(EJBContainerProviderImpl.java:129)
        at javax.ejb.embeddable.EJBContainer.createEJBContainer(EJBContainer.java:127)
        at com.foo.service.TestModelServiceTest.setup(TestModelServiceTest.java:41)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
        at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
        at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
        at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
        at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
        at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
        at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:55)
        at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:42)
        at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:75)
        at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:49)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
        at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
        at org.gradle.messaging.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
        at org.gradle.messaging.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
        at $Proxy2.processTestClass(Unknown Source)
        at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:103)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
        at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
        at org.gradle.messaging.remote.internal.TypeCastDispatch.dispatch(TypeCastDispatch.java:30)
        at org.gradle.messaging.remote.internal.WorkerProtocol.handleIncoming(WorkerProtocol.java:53)
        at org.gradle.messaging.remote.internal.WorkerProtocol.handleIncoming(WorkerProtocol.java:31)
        at org.gradle.messaging.remote.internal.ProtocolStack$ProtocolStage.handleIncoming(ProtocolStack.java:167)
        at org.gradle.messaging.remote.internal.ProtocolStack$BottomStage.handleIncoming(ProtocolStack.java:277)
        at org.gradle.messaging.remote.internal.ProtocolStack$BottomConnection$1.run(ProtocolStack.java:299)
        at org.gradle.messaging.remote.internal.ProtocolStack$ExecuteRunnable.dispatch(ProtocolStack.java:120)
        at org.gradle.messaging.remote.internal.ProtocolStack$ExecuteRunnable.dispatch(ProtocolStack.java:116)
        at org.gradle.messaging.dispatch.AsyncDispatch.dispatchMessages(AsyncDispatch.java:132)
        at org.gradle.messaging.dispatch.AsyncDispatch.access$000(AsyncDispatch.java:33)
        at org.gradle.messaging.dispatch.AsyncDispatch$1.run(AsyncDispatch.java:72)
        at org.gradle.internal.concurrent.DefaultExecutorFactory$StoppableExecutorImpl$1.run(DefaultExecutorFactory.java:66)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:680)
    Nov 11, 2012 11:30:39 AM org.glassfish.flashlight.impl.provider.FlashlightProbeProviderFactory processXMLProbeProviders
    SEVERE: MNTG0301:Cannot process XML ProbeProvider, xml = jersey-gf-statsprovider-probe-provider.xml
    java.lang.IllegalStateException: Provider already mapped glassfish:jersey:server
        at org.glassfish.flashlight.impl.core.ProbeProviderRegistry.registerProbeProvider(ProbeProviderRegistry.java:100)
        at org.glassfish.flashlight.impl.provider.FlashlightProbeProviderFactory.registerProvider(FlashlightProbeProviderFactory.java:561)
        at org.glassfish.flashlight.impl.provider.FlashlightProbeProviderFactory.processXMLProbeProviders(FlashlightProbeProviderFactory.java:386)
        at org.glassfish.admin.monitor.MonitoringBootstrap.processProbeProviderXML(MonitoringBootstrap.java:484)
        at org.glassfish.admin.monitor.MonitoringBootstrap.processManifest(MonitoringBootstrap.java:360)
        at org.glassfish.admin.monitor.MonitoringBootstrap.addProvider(MonitoringBootstrap.java:301)
        at org.glassfish.admin.monitor.MonitoringBootstrap.verifyModule(MonitoringBootstrap.java:245)
        at org.glassfish.admin.monitor.MonitoringBootstrap.discoverProbeProviders(MonitoringBootstrap.java:188)
        at org.glassfish.admin.monitor.MonitoringBootstrap.enableMonitoringForProbeProviders(MonitoringBootstrap.java:624)
        at org.glassfish.admin.monitor.MonitoringBootstrap.postConstruct(MonitoringBootstrap.java:176)
        at com.sun.hk2.component.AbstractCreatorImpl.inject(AbstractCreatorImpl.java:131)
        at com.sun.hk2.component.ConstructorCreator.initialize(ConstructorCreator.java:91)
        at com.sun.hk2.component.AbstractCreatorImpl.get(AbstractCreatorImpl.java:82)
        at com.sun.hk2.component.SingletonInhabitant.get(SingletonInhabitant.java:67)
        at com.sun.hk2.component.EventPublishingInhabitant.get(EventPublishingInhabitant.java:139)
        at com.sun.hk2.component.AbstractInhabitantImpl.get(AbstractInhabitantImpl.java:78)
        at com.sun.enterprise.v3.server.AppServerStartup.run(AppServerStartup.java:229)
        at com.sun.enterprise.v3.server.AppServerStartup.doStart(AppServerStartup.java:145)
        at com.sun.enterprise.v3.server.AppServerStartup.start(AppServerStartup.java:136)
        at com.sun.enterprise.glassfish.bootstrap.GlassFishImpl.start(GlassFishImpl.java:79)
        at org.glassfish.ejb.embedded.EJBContainerProviderImpl.createContainer(EJBContainerProviderImpl.java:204)
        at org.glassfish.ejb.embedded.EJBContainerProviderImpl.createEJBContainer(EJBContainerProviderImpl.java:129)
        at javax.ejb.embeddable.EJBContainer.createEJBContainer(EJBContainer.java:127)
        at com.foo.service.TestModelServiceTest.setup(TestModelServiceTest.java:41)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
        at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
        at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
        at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
        at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
        at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
        at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:55)
        at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:42)
        at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:75)
        at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:49)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
        at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
        at org.gradle.messaging.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
        at org.gradle.messaging.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
        at $Proxy2.processTestClass(Unknown Source)
        at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:103)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
        at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
        at org.gradle.messaging.remote.internal.TypeCastDispatch.dispatch(TypeCastDispatch.java:30)
        at org.gradle.messaging.remote.internal.WorkerProtocol.handleIncoming(WorkerProtocol.java:53)
        at org.gradle.messaging.remote.internal.WorkerProtocol.handleIncoming(WorkerProtocol.java:31)
        at org.gradle.messaging.remote.internal.ProtocolStack$ProtocolStage.handleIncoming(ProtocolStack.java:167)
        at org.gradle.messaging.remote.internal.ProtocolStack$BottomStage.handleIncoming(ProtocolStack.java:277)
        at org.gradle.messaging.remote.internal.ProtocolStack$BottomConnection$1.run(ProtocolStack.java:299)
        at org.gradle.messaging.remote.internal.ProtocolStack$ExecuteRunnable.dispatch(ProtocolStack.java:120)
        at org.gradle.messaging.remote.internal.ProtocolStack$ExecuteRunnable.dispatch(ProtocolStack.java:116)
        at org.gradle.messaging.dispatch.AsyncDispatch.dispatchMessages(AsyncDispatch.java:132)
        at org.gradle.messaging.dispatch.AsyncDispatch.access$000(AsyncDispatch.java:33)
        at org.gradle.messaging.dispatch.AsyncDispatch$1.run(AsyncDispatch.java:72)
        at org.gradle.internal.concurrent.DefaultExecutorFactory$StoppableExecutorImpl$1.run(DefaultExecutorFactory.java:66)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:680)
    Nov 11, 2012 11:30:39 AM org.hibernate.validator.internal.util.Version <clinit>
    INFO: HV000001: Hibernate Validator 4.3.0.Final
    Nov 11, 2012 11:30:43 AM org.glassfish.ha.store.spi.BackingStoreFactoryRegistry register
    INFO: Registered org.glassfish.ha.store.adapter.cache.ShoalBackingStoreProxy for persistence-type = replicated in BackingStoreFactoryRegistry
    Nov 11, 2012 11:30:43 AM com.sun.enterprise.v3.server.AppServerStartup run
    SEVERE: Startup service failed to start : com.sun.enterprise.naming.GlassFishNamingBuilder
    Nov 11, 2012 11:30:43 AM com.sun.enterprise.v3.admin.StopServer doExecute
    INFO: Server shutdown initiated
Process 'Gradle Worker 1' finished with exit value 0 (state: SUCCEEDED) 
```

该模型

```
package com.foo.model;

import java.io.Serializable;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table
public class TestModel implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    private Long id;
    private String test;

    public TestModel() {
    }

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "id", insertable = false, updatable = false, nullable = false)
    public Long getId() {
        return id;
    }
    public void setId(Long id) {
        this.id = id;
    }

    @Column
    public String getTest() {
        return test;
    }
    public void setTest(String test) {
        this.test = test;
    }

} 
```

服务

```
package com.foo.service;

import javax.ejb.Stateless;
import javax.inject.Named;
import javax.persistence.EntityManager;

import com.foo.model.TestModel;
import javax.persistence.PersistenceContext;

@Named
@Stateless
public class TestModelService {

    @PersistenceContext(unitName="TestPersistenceUnit")
    private EntityManager em;

    public void addTest(TestModel test) {

        em.persist(test);
    }

    public void deleteTest(Long testId) {

        TestModel test = em.find(TestModel.class, testId);

        if(test != null) {

            em.remove(test);
        }
    }

} 
```

服务测试

```
package com.foo.service;

import com.foo.model.TestModel;
import java.io.IOException;
import java.util.HashMap;
import java.util.Map;
import java.io.File;
import javax.xml.bind.JAXBException;
import org.junit.AfterClass;
import static org.junit.Assert.*;
import org.junit.BeforeClass;
import org.junit.Test;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import javax.ejb.embeddable.EJBContainer;

public class TestModelServiceTest  {

    Logger logger = LoggerFactory.getLogger(TestModelServiceTest.class);

    static private TestModelService testService = null;

    private static EJBContainer container;

    public TestModelServiceTest() throws Exception {

    }

    @BeforeClass
    static public void setup()
        throws IOException, JAXBException
    {
        // domain.xml from http://embedded-glassfish.java.net/domain.xml
        try {
            Map<String, Object> props = new HashMap<String, Object>(); 
            props.put(EJBContainer.MODULES, new File("target/classes"));
            props.put(EJBContainer.APP_NAME, "test");

            // Code never gets past this line!
            container = EJBContainer.createEJBContainer(props);

            // Never get to this 
            fail();

            // Get a handle to the service through the context
            testService = (TestModelService)container.getContext().lookup("java:global/classes/TestModelService");
        } catch(Exception e) {
            fail(e.toString());
        }

    }

    @AfterClass
    static public void teardown()
        throws IOException
    {
        if(container != null) {
            container.close();      
        }
    }

    @Test
    public void testValidUser() throws Exception {

        // TestModel a valid basic user
        {
            try {
                TestModel test = new TestModel();

                test.setTest("foo");

                testService.addTest(test);

            } catch(Exception e) {
                fail(e.toString());
            }
        }

    }   
} 
```

持久性.xml

```
<persistence version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="TestPersistenceUnit" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <class>com.foo.Account</class>
        <exclude-unlisted-classes>true</exclude-unlisted-classes>
        <properties>
            <property name="hibernate.connection.url" value="jdbc:derby:memory:myDB;create=true"/>
            <property name="hibernate.connection.driver_class" value="org.apache.derby.jdbc.EmbeddedDriver"/>
            <property name="hibernate.dialect" value="org.hibernate.dialect.DerbyDialect"/>
            <property name="hibernate.hbm2ddl.auto" value="create-drop"/>
            <property name="hibernate.connection.username" value="sa"/>
            <property name="hibernate.connection.password" value=""/>
            <property name="hibernate.show_sql" value="true" />
        </properties>
    </persistence-unit>
</persistence> 
```

构建.gradle

```
// Create Eclipse Project
// Usage: from cmd line in project folder: gradle eclipse

apply plugin: 'java'

// Specify all projects (modules) should use maven central for repositories
allprojects {
    repositories {
        mavenCentral()
    }
}

jar {
    manifest.attributes['Implementation-Title'] = "test"
}

// Setup all dependencies
// Reference: http://gradle.org/docs/current/dsl/org.gradle.api.artifacts.dsl.DependencyHandler.html
dependencies {

    compile 'org.hibernate:hibernate-entitymanager:4.1.4.Final'
    compile 'org.hibernate.javax.persistence:hibernate-jpa-2.0-api:1.0.1.Final'
    compile 'org.hibernate:hibernate-jpamodelgen:1.2.0.Final'

    compile fileTree(dir: getGlassfishHomeDir() + File.separator + "glassfish" + File.separator + "modules", include: '*.jar') 

    testCompile 'junit:junit:4.10'
    testCompile 'org.apache.derby:derby:10.9.1.0'

    testRuntime 'org.glassfish.main.extras:glassfish-embedded-all:3.1.2'

    testRuntime files(getGlassfishHomeDir() + File.separator + "glassfish"+ File.separator + "lib" + File.separator + "embedded" + File.separator + "glassfish-embedded-static-shell.jar")
}

def getGlassfishHomeDir() {
    def glassfishHome = System.getenv('GLASSFISH_HOME')

    if (glassfishHome == null || glassfishHome.length() <= 0)
    {
        msg = "No GLASSFISH_HOME in environment variable. Please set GLASSFISH_HOME to glassfish installation directory"

        println msg

        throw new RuntimeException(msg)
    }

    return glassfishHome
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T05:01:05.630

### 第一的

在您的代码中修复的一个主要误解是假设 JUnit 测试可以注入 CDI bean.... 不，JUnit 测试不能注入 CDI bean，除非我不是通过[http://arquillian.org/invasion/](http://arquillian.org/invasion/)熟悉。

### 第二

在 GlassFish-Weld 中使用 CDI 的典型方法是[在 servlet 中，如 Weld 的本文档中所述](http://docs.jboss.org/weld/reference/latest/en-US/html_single/#d0e4697)。请参阅[此演示文稿](http://www.youtube.com/watch?v=lZNxzZLT2T4&feature=related)及其[幻灯片](http://www.slideshare.net/agoncal/to-inject-or-not-to-inject-cdi-is-the-question?ref=http://antoniogoncalves.org/2011/05/23/to-inject-or-not-to-inject-cdi-is-the-question/)以获得完美的解释。请参阅[此演示文稿](http://zeroturnaround.com/modal/?publication=20)以获取示例。

观看演示后，您可以获得 Managed Beans 规范[JSR-316](http://download.oracle.com/otndocs/jcp/managed_beans-1.0-fr-eval-oth-JSpec/)以及著名的 CDI 规范[JSR-299](http://download.oracle.com/otndocs/jcp/web_beans-1.0-fr-eval-oth-JSpec/)

### 第三

然而，您的 JUnit 测试现在的方式可以成为使用 JNDI 查找的 TestModelService 无状态 EJB 的合法测试，具体步骤如下：

1.  确保将 jar 文件“glassfish-embedded-static-shell.jar”添加为外部库，而它位于其原始位置“...glassfish\lib\embedded”，因此不要将其复制到您的项目中。执行此步骤 - 隐式 - 使 EJBContainer 指向您在文件夹 ...\glassfish\domains\domain1\config\domain.xml 中本地安装的 glassfish domain.xml，而无需将其复制到项目资源中。

2.  确保您使用的是 github 上的 persistence.xml 文件，而不是本文中的那个。github 上有一个 JTA 事务类型，指向您的本地 Derby DB，这是访问容器管理的实体 Bean“TestModel”的正确事务类型。您也可以更改属性：hibernate.hbm2ddl.auto" value="create" 成为“create-drop”。

3.  在 persistence.xml 文件（在 github 上）中，将属性 exclude-unlisted-classes>true 更改为 exclude-unlisted-classes>false

4.  在您的 JUnit 测试中删除这一行：

    > props.put("org.glassfish.ejb.embedded.glassfish.web.http.port","");

5.  在您的 JUnit 测试中也删除此行

    > ctx = container.getContext();

6.  就在您的 JUnit 测试中的这一行之前

    > testService.addTest(test);

    插入这一行：

    > TestModelService testService = (TestModelService)container.getContext().lookup("java:global/classes/TestModelService");

7.  运行测试。

# jquery - jQuery更改标签和图标对齐方式？

> ID：13250516
> 
> 赞同：0
> 
> 时间：2012-11-06T11:55:52.843
> 
> 标签：jquery, css

对于 jQuery 复选框和标签，默认对齐方式如下：

```
[x] label 
```

我怎样才能改变它们，让标签在前面？使用萤火虫我没有找到任何对齐语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:01:31.077

只需将标签文本放在之前，`<input type = "checkbox"/>`您的代码如下所示：

```
<label for = "testCheckbox">Label</label> <input type = "checkbox" id = "testCheckbox" name = "testCheckBox"/> 
```

# python - 为字母创建字典

> ID：13250519
> 
> 赞同：0
> 
> 时间：2012-11-06T11:56:10.127
> 
> 标签：python, dictionary

我一直在尝试构建一个函数来从字符串中获取字母频率并将它们存储在字典中。

我做过类似的事情：

```
s="today the weather was really nice"

def get_letter_freq(s):
    for letter in(s):
        x=letter.split()
    f=dict()
    for each_letter in x:
        if f.has_key(x):
                   f[x]+=1
        else:
                    f[x]=1
print f 
```

你能帮我把事情整理好，找出我的错误吗？

为什么我收到我的'f'未定义的错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T11:59:01.683

除了缩进错误之外，您的程序还有许多其他问题，例如：

```
s = "today the weather was really nice"

def get_letter_freq(s):
    f = dict()
    for each_letter in s:      #you can directly iterate over a string, so no need of split()
        if each_letter in f:   #has_key() has been deprecated
            f[each_letter]+=1   
        else:
            f[each_letter]=1
    return f                 #better return the output from function

print get_letter_freq(s) 
```

顺便说一句`collections.Counter()`，这对这个目的有好处：

```
In [61]: from collections import Counter

In [62]: strs = "today the weather was really nice"

In [63]: Counter(strs)
Out[63]: Counter({' ': 5, 'e': 5, 'a': 4, 't': 3, 'h': 2, 'l': 2, 'r': 2, 'w': 2, 'y': 2, 'c': 1, 'd': 1, 'i': 1, 'o': 1, 'n': 1, 's': 1}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T12:02:39.357

*   在你的代码中，你的第一个 for 循环，你的`letter.split()`语句似乎没用。为什么要拆分单个字符，却进入循环？
*   其次，你已经定义了你的`f = dict()`内部函数并在外面使用它。它不会在外面可见。
*   第三，你不应该使用`f.has_key`. 只需执行此操作，`key in my_dict`即可检查 dict 中密钥的可用性。
*   最后，您可以将字典作为参数传递给您的函数。然后在那里修改，最后返回。（尽管您也可以在不传递`dict`函数的情况下执行此操作。只需在那里创建一个新函数，然后返回它）。
*   所以，在你的代码中，几乎一切都很好。`f = dict()`在调用它之前，您只需要删除函数中的第一个 for 循环，然后移到函数之外。并将其作为参数传递。

## 方式一：

因此，您可以尝试以下修改后的代码：-

```
def get_letter_freq(my_dict, s):
    for letter in s:
        if letter in my_dict:
            my_dict[letter] += 1
        else:
            my_dict[letter] = 1

    return my_dict

my_dict = dict()
my_str = "today the weather was really nice"
print get_letter_freq(my_dict, my_str) 
```

* * *

## 方式2： -

或者，您也可以使用 中的预定义库函数[`Counter`](http://docs.python.org/dev/library/collections#collections.Counter)，[`collections`](http://docs.python.org/dev/library/collections)这正是您想要的。

* * *

## 方式3： -

正如`@thebjorn`评论中所建议的那样，您也可以使用`defaultdict`，这将使您的任务更容易，因为您不必`key`在添加之前检查字典中的可用性。计数将自动默认为`0`：-

```
from collections import defaultdict
def get_letter_freq(s):
    my_dict = defaultdict(int)

    for letter in s:
        my_dict[letter] += 1  

    return my_dict

my_str = "today the weather was really nice"
print list(get_letter_freq(my_str).items()) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T11:59:26.147

1.  `f`是在里面定义的`get_letter_freq`，你不能从外面访问它。
2.  您的函数应该`return`构造字典。
3.  您实际上应该**调用**该函数。
4.  你对拆分一个字母有什么期望？把那部分放在外面，你就不需要内循环了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T12:36:07.960

```
import string
s="today the weather was really nice"
print dict([ ( letter, s.count(letter)) for letter in string.lowercase[:25]]) 
```

If case sensitivity is important use `s.lower().count(letter)` instead.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T11:59:52.843

`print f`如果它必须是 get_letter_freq 的一部分，则需要缩进。& f 在 get_letter_freq 之外不存在。因此错误。

# javascript - Records.slice 不会对已排序的存储进行切片

> ID：13250522
> 
> 赞同：0
> 
> 时间：2012-11-06T11:56:17.783
> 
> 标签：javascript, sorting, extjs, slice, jsonstore

我有一个jsonstore。

```
var speedDialStore = new Ext.data.JsonStore({
                pageSize: 4,
                proxy   : {
                    type: 'ajax',
                    url: 'speedDialListByHospitalID.html',
                    actionMethods: {
                        create: 'POST', read: 'POST', update: 'POST', destroy: 'POST'
                    },
                    reader: {
                        type: 'json',
                        root: 'results',
                        totalProperty: 'total',
                    }
                },
                fields      : [{name:"id"},{name:"code"},{name:"name"},{name:"description"},{name:"hospitalID"},{name: "buildingID"},{name: "floorID"},{name:"alarmID"},{name:"notificationFrequency"},{name:"maxCount"},{name:"start"}],
                listeners: {
                  load : function (store, records, success, operation, options) {
                    if(records != null){
                        store.loadData(records.slice(records[0].get('start'),records[0].get('start')+4));
                    }
                  } 
                }

            }); 
```

还有一个使用这家商店的网格。

我的问题是当对网格进行排序时，我需要对所有商店进行排序，并且只显示第一页的前 4 个元素和第二页的第二个 4 元素，依此类推..

```
listeners:{
                        'sortchange': function(ct, column, direction, eOpts ){
                                Ext.getCmp('speedDialPaging').moveFirst();
                                speedDialStore.sort(column.dataIndex, direction);
                        }
                    }, 
```

在 slice 方法起作用后，grid 仍然显示未排序的 4 个元素。但是，如果我在 slice 方法中添加警报消息或断点，我会看到存储已正确排序。因此（我认为）我需要修改 slice 方法或找到任何其他方法来解决这个问题。服务器正在发送所有数据。我们必须在这里解决这个问题，而不是服务器端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:09:19.947

像这样更改商店侦听器，

```
listeners: {
                  load : function (store, records, success, operation, options) {
                    if(records != null && records.length > 0){
                        function compare(a,b) {
                          if (a.get(sortIndex) < b.get(sortIndex))
                             return -1;
                          if (a.get(sortIndex) > b.get(sortIndex))
                            return 1;
                          return 0;
                        }
                        records.sort(compare);
                        if(sortDirection == "DESC"){
                            records.reverse();
                        }
                        store.loadData(records.slice(records[0].get('start'),records[0].get('start')+4));
                    }
                  } 
                } 
```

和这样的 sortchange 监听器，

```
 sortIndex = column.dataIndex;
 sortDirection = direction; 
```

有用！

# php - symfony2 通过其他捆绑模板上的 id 获取实体

> ID：13250523
> 
> 赞同：0
> 
> 时间：2012-11-06T11:56:18.160
> 
> 标签：php, symfony, doctrine

我已经有一个完整的web应用程序开发了将近两年，但是由于一开始的一些经验不足，它是用扁平的PHP开发的。现在我试图复制相同的应用程序，但使用 symfony2 并遇到了一些困难。

其中之一是我有几个从数据库中检索到的项目列表，通过使用 ID，我可以编辑这些项目。发生的情况是，为了列出项目，我已经有一些显示在列表中的信息。例如，创建项目的用户的名称。当然，用户名不会存储在那个特定的表中。而是它的 ID 并使用一个简单的函数 ( `getUserFullname($id)`) 我得到用户名并将其显示在列表中。

现在在 symfony2 上，我创建了一个控制器，该控制器创建了一个存储库并将其发送到一个带有 for 循环的树枝模板，其中列出了所有项目。但用户的 id 是一个数字。我还创建了一个“用户”实体来检索信息。

如何通过其“id”获取特定用户信息并显示在每个项目列表上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:19:30.933

您需要[定义](http://symfony.com/doc/current/book/doctrine.html#entity-relationships-associations)项目和用户之间的关系。然后您将能够访问用户的属性，如下所示：

```
{{ item.user.fullName }} 
```

# vb.net - VB.Net中SortedSet的自定义排序

> ID：13250527
> 
> 赞同：0
> 
> 时间：2012-11-06T11:56:35.070
> 
> 标签：vb.net, sorting, sortedset

我有一个包含以下数据的 sortedSet：

```
aga12
aga44
dp1
dp11
reg13
reg45
sat5
sat6 
```

我希望此列表按 aphabetally 排序，但我希望 dp 值位于顶部，如下所示：

```
dp1
dp11
aga12
aga44
reg13
reg45
... 
```

任何人都知道我可以如何自定义排序这个 SortedSet。我正在使用 VB.NET

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:29:52.480

您可以使用自定义比较类进行排序

```
 Dim myList As New List(Of String)
  .... 
  myList.Sort(New DpCompare) 
```

和

```
 Private Class DpCompare
        Implements IComparer(Of String)

        Public Function Compare(ByVal x As String, ByVal y As String) As Integer Implements System.Collections.Generic.IComparer(Of String).Compare

            Dim isDPx As Boolean = x.StartsWith("dp")
            Dim isDPy As Boolean = y.StartsWith("dp")

            If isDPx AndAlso isDPy = False Then
                Return -1
            End If

            If isDPy AndAlso isDPx = False Then
                Return 1
            End If

            Return String.Compare(x, y)

        End Function
    End Class 
```

# mysql - 从 MySQL 检索时间为 HH:MM 格式

> ID：13250531
> 
> 赞同：7
> 
> 时间：2012-11-06T11:57:06.643
> 
> 标签：mysql, sql, datetime, time

我使用`DATETIME`数据类型将日期和时间存储在我的数据库中。它将日期保存为

```
YY-MM-DD HH:MM:SS (2012-11-06 10:45:48) 
```

我可以从数据库中以`HH:MM:SS`格式检索时间，但我想以`HH:MM`格式检索它。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-06T11:59:26.537

检查[DATE_FORMAT](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)函数。

```
SELECT DATE_FORMAT(date_column, '%H:%i') FROM your_table 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-06T11:59:34.053

您将要使用[`DATE_FORMAT()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)：

```
select date_format(yourDateColumn, '%h:%i') yourTime
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/4fff9/2)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-06T11:59:45.280

```
SELECT DATE_FORMAT( NOW() ,  '%H:%i' ) AS time_column 
```

# .net - 浏览器.AttachTo () 导致间歇性异常“Internet Explorer 忙时超时”

> ID：13250532
> 
> 赞同：10
> 
> 时间：2012-11-06T11:57:09.430
> 
> 标签：.net, timeout, internet-explorer-9, watin

作为持续集成构建过程的一部分运行的 WatiN 步骤在尝试间歇性地附加到浏览器实例时失败。目前约为五分之一。

```
Browser.AttachTo<IE>(Find.ByTitle("Title of Popup")); 
```

出现以下错误：

```
WatiN.Core.Exceptions.TimeoutException: Timeout while Internet Explorer busy
   at WatiN.Core.UtilityClasses.TryFuncUntilTimeOut.ThrowTimeOutException(Exception lastException, String message)
   at WatiN.Core.UtilityClasses.TryFuncUntilTimeOut.HandleTimeOut()
   at WatiN.Core.UtilityClasses.TryFuncUntilTimeOut.Try[T](DoFunc`1 func)
   at WatiN.Core.WaitForCompleteBase.WaitUntil(DoFunc`1 waitWhile, BuildTimeOutExceptionMessage exceptionMessage)
   at WatiN.Core.Native.InternetExplorer.IEWaitForComplete.WaitUntilNotNull(DoFunc`1 func, BuildTimeOutExceptionMessage exceptionMessage)
   at WatiN.Core.Native.InternetExplorer.IEWaitForComplete.WaitWhileIEBusy(IWebBrowser2 ie)
   at WatiN.Core.Native.InternetExplorer.IEWaitForComplete.WaitForCompleteOrTimeout()
   at WatiN.Core.WaitForCompleteBase.DoWait()
   at WatiN.Core.Native.InternetExplorer.AttachToIeHelper.FinishInitializationAndWaitForComplete(IE ie, SimpleTimer timer, Boolean waitForComplete)
   at WatiN.Core.Native.InternetExplorer.AttachToIeHelper.Find(Constraint findBy, Int32 timeout, Boolean waitForComplete)
   at WatiN.Core.Browser.AttachTo[T](Constraint constraint) 
```

我已经完成了之前帖子中建议的所有显而易见的事情：

即在运行 WatiN 步骤之前杀死所有 Internet Explorer 进程：

```
Process.GetProcessesByName("IEXPLORE").ToList().ForEach(p => p.Kill()); 
```

在运行任何 WatiN 步骤之前增加超时：

```
var timeout = 60;
Settings.AttachToBrowserTimeOut = timeout;
Settings.WaitForCompleteTimeOut = timeout;
Settings.WaitUntilExistsTimeOut = timeout; 
```

每个 WatiN 步骤都作为以下代码块中的操作传入：

```
public void UseAndCloseBrowser(Action<Browser> action, Browser browser)
{
    try
    {
        action(browser);
        browser.WaitForComplete();
    }
    finally
    {
        Log(Level.Info, "Attempting to close browser {0}", browser.Title);
        browser.Close();
        browser.Dispose();
    }

} 
```

有谁知道我可以做些什么/检查以了解这个烦人的错误消息的底部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T05:06:07.557

过去我也遇到过类似的问题，解决方案是在每个会话中简单地重用相同的浏览器窗口。在第一个测试执行时创建一个浏览器窗口并将其用于所有测试，然后在测试会话结束时可选择关闭它。显然，这取决于您使用的测试工具，但它应该可以工作。创建和销毁 IE 窗口是一项资源密集型活动，因此如果可能，最好避免它。

# c# - Linq to Entity Join 和 Group By

> ID：13250550
> 
> 赞同：7
> 
> 时间：2012-11-06T11:57:39.950
> 
> 标签：c#, linq, tsql, linq-to-entities

我是 Linq to Entity 的新手，这是我的测试场景：

*   有用户
*   用户有相册。一张专辑只属于一个用户
*   相册有照片。一张照片只属于一个相册
*   照片有标签。一个标签可能属于许多照片

![数据库表](../Images/efa1014c6d30eb45db16cf2aa5652cc3.png)

我想编写一个方法来显示使用 Linq 的特定用户的相册中使用的标签的计数和名称。

这是我写的方法，效果很好

```
 public static void TestStatistics(int userId)
    {
        // select AlbumTitle, TagName, TagCount where UserId = userId
        var results = from photo in dbSet.PhotoSet
                      join album in dbSet.AlbumSet on photo.AlbumId equals album.Id into albumSet
                      from alb in albumSet
                      where alb.UserId == userId
                      join photoTag in dbSet.PhotoTagSet on photo.Id equals photoTag.PhotoId into photoTagSet
                      from pt in photoTagSet
                      join tag in dbSet.TagSet on pt.TagId equals tag.Id
                      group new { alb, tag } by new { alb.Title, tag.Name }
                          into resultSet
                          orderby resultSet.Key.Name
                          select new
                          {
                              AlbumTitle = resultSet.Key.Title,
                              TagName = resultSet.Key.Name,
                              TagCount = resultSet.Count()
                          };

        foreach (var item in results)
        {
            Console.WriteLine(item.AlbumTitle + "\t" + item.TagName + "\t" + item.TagCount);
        }
    } 
```

这是执行相同操作的标准 T-SQL 查询

```
SELECT  a.Title AS AlbumTitle, t.Name AS TagName , COUNT(t.Name) AS TagCount
FROM    TblPhoto p, TblAlbum a, TblTag t, TblPhotoTag pt
WHERE   p.Id = pt.PhotoId AND t.Id = pt.TagId AND p.AlbumId = a.Id AND a.UserId = 1
GROUP BY a.Title, t.Name 
ORDER BY t.Name 
```

很明显，标准 T-SQL 查询比 Linq 查询简单得多。我知道 Linq 不应该比 T-SQL 更简单，但是这种复杂性差异让我觉得我做错了什么。此外，Linq 生成的 SQL 查询极其复杂。

有什么方法可以让 Linq 查询更简单？

## 更新 1：

我没有使用连接，而是使用了 T-SQL 中使用的方法，使它变得更简单一些。实际上它现在就像 T-SQL 一样简单。数据库上仍然没有导航属性，也没有关系。

```
var results = from photo in dbSet.PhotoSet
              from album in dbSet.AlbumSet
              from photoTag in dbSet.PhotoTagSet
              from tag in dbSet.TagSet
              where photo.AlbumId == album.Id && photo.Id == photoTag.PhotoId &&
                    tag.Id == photoTag.TagId && album.UserId == userId
              group new { album, tag } by new { album.Title, tag.Name } into resultSet
              orderby resultSet.Key.Name
              select new {
                  AlbumTitle = resultSet.Key.Title,
                  TagName = resultSet.Key.Name,
                  TagCount = resultSet.Count()
              }; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T12:18:38.987

首先，您需要在数据库中设置外键，然后重建 EF，它将“知道”（即导航属性）关系，然后允许您省略所有连接并使用以下内容：

```
List<AlbumTag> query = (from ps in dbSet.PhotoSet
                         where ps.Album.UserId = userId
                         group new { album, tag } by new { ps.Album.Title, ps.PhotoTag.Tag.Name } into resultSet
                         orderby resultSet.Key.Name
                         select new AlbumTag()
                         {
                           AlbumTitle = resultSet.Key.Title,
                           TagName = resultSet.Key.Name,
                           TagCount = resultSet.Count()
                         }).ToList(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-06T13:55:50.200

如果每张照片至少有一个标签，那么试试

```
var results = (from r in PhotoTag 
    where r.Photo.Album.UserID == userId
    group r by new { r.Photo.Album.Title, r.Tag.Name } into resultsSet
    orderby resultsSet.Key.Name 
    select new 
    { 
        AlbumTitle = resultsSet.Key.Title , 
        TagName    = resultsSet.Key.Name , 
        TagCount   = resultsSet.Count() 
    }
    ); 
```

# java - TCP/IP 发送请求并获得响应

> ID：13250552
> 
> 赞同：-1
> 
> 时间：2012-11-06T11:57:44.393
> 
> 标签：java, request, response, tcp-ip

我正在使用`TCP/IP`Java。首先，我阅读`TCP/IP`并了解它是如何工作的。
**我需要什么：-**
好的，现在我想用java实现它。我正在尝试`port/IP`从我的 IP 向特定的请求发送一些输入。并且需要得到回应。
我不明白如何实现它。
这是我的输入：

```
Destination IP  
Destination Port
Input(String or Anything) 
```

这是我用于客户端的代码。

```
try {
        socket = new Socket("localhost", port);
    }
    catch(Exception e) {
        System.out.println("Error connectiong to server:" + e);
        return;
    }
    System.out.println("Connection accepted " +
            socket.getInetAddress() + ":" +
            socket.getPort());

    /* Creating both Data Stream */
    try
    {
        Sinput  = new ObjectInputStream(socket.getInputStream());
        Soutput = new ObjectOutputStream(socket.getOutputStream());
    }
    catch (IOException e) {
        System.out.println("Exception creating new Input/output Streams: " + e);
        return;
    }
    // now that I have my connection
    String test = "aBcDeFgHiJkLmNoPqRsTuVwXyZ";
    // send the string to the server
    System.out.println("Client sending \"" + test + "\" to serveur");
    try {
        Soutput.writeObject(test);
        Soutput.flush();
    }
    catch(IOException e) {
        System.out.println("Error writting to the socket: " + e);
        return;
    }
    // read back the answer from the server
    String response;
    try {
        response = (String) Sinput.readObject();
        System.out.println("Read back from server: " + response);
    }
    catch(Exception e) {
        System.out.println("Problem reading back from server: " + e);
    }

    try{
        Sinput.close();
        Soutput.close();
    } 
```

请给我一些提示或参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:15:37.043

[创建 Scoket](http://www.oracle.com/technetwork/java/socket-140484.html) 会帮助你。如果您正在实现 Sockets，则需要使用 ServerSocket 类来创建 ServerSocket 。然后 Socket 类请求在 Client 和 Sever 之间创建连接。

# iphone - 使用仪器时未找到此可执行文件的有效配置文件错误

> ID：13250558
> 
> 赞同：8
> 
> 时间：2012-11-06T11:58:16.820
> 
> 标签：iphone, ios, cocoa-touch, xcode4

当我使用工具尝试分析我的应用程序时，我得到了经典的“找不到此可执行文件的有效配置文件”。当我尝试构建、运行、调试、分发我的应用程序时，我根本没有遇到这个问题。有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-06T12:49:13.860

在 Edit Schemes... 中，检查 Profile 方案下的 Building Configuration。确保为该构建配置设置了有效的配置文件。

# authentication - MS CRM Dynamics - 在没有登录对话框的情况下浏览到动态门户（从我的应用程序）？

> ID：13250560
> 
> 赞同：2
> 
> 时间：2012-11-06T11:58:19.463
> 
> 标签：authentication, microsoft-dynamics

从我的 C# 应用程序中，我想在浏览器中打开我的动态门户。我想这样做而不需要用户在登录对话框中提示他的凭据。可能吗？

例如，在 salesforce.com 中是可能的。您可以将会话信息添加到您的 salesforce.com 门户 URL，这样您就可以使用该 URL 进行浏览，而无需进行身份验证。

这在 Dynamics CRM 中也可以吗？

请帮忙...

哈盖

# c# - foreach 是否只执行一次查询？

> ID：13250561
> 
> 赞同：22
> 
> 时间：2012-11-06T11:58:20.743
> 
> 标签：c#, linq

我有一个项目列表和一个 LINQ 查询。现在，使用 LINQ 的延迟执行，后续的 foreach 循环是只执行一次查询还是在循环中的每个回合执行一次？

鉴于此示例（取自[MSDN 上的 Introduction to LINQ Queries (C#)](http://msdn.microsoft.com/en-us/library/bb397906.aspx)）

```
 // The Three Parts of a LINQ Query: 
    //  1\. Data source. 
    int[] numbers = new int[7] { 0, 1, 2, 3, 4, 5, 6 };

    // 2\. Query creation. 
    // numQuery is an IEnumerable<int> 
    var numQuery =
        from num in numbers
        where (num % 2) == 0
        select num;

    // 3\. Query execution. 
    foreach (int num in numQuery)
    {
        Console.Write("{0,1} ", num);
    } 
```

或者，换句话说，**如果我有，会有什么不同**：

```
 foreach (int num in numQuery.ToList()) 
```

而且，如果底层数据不在数组中，而是在数据库中，这有关系吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-06T12:03:15.680

> 现在，使用 LINQ 的延迟执行，后续的 foreach 循环是只执行一次查询还是在循环中的每个回合执行一次？

是的，一次循环。实际上，它执行查询的次数可能少于一次——您可以在中途中止循环，并且`(num % 2) == 0`不会对任何剩余的项目执行测试。

> 或者，换句话说，如果我有：

```
foreach (int num in numQuery.ToList()) 
```

两个区别：

1.  在上面的例子中，`ToList()`浪费了时间和内存，因为它首先做与 initial 相同的事情`foreach`，从它构建一个列表，然后`foreach`s 那个列表。根据结果​​的大小，差异将介于微不足道和阻止代码正常工作之间。

2.  但是，如果您要对相同的结果*重复*执行`foreach`或以其他方式重复使用它，则 then while`foreach`只运行一次查询，下一个`foreach`再次运行它。如果查询很昂贵，那么该`ToList()`方法（并存储该列表）可以节省大量资金。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-06T12:00:26.943

不，没有区别。`in`表达式被计算一次。更具体地说，`foreach`构造调用表达式`GetEnumerator()`上的方法`in`并重复调用`MoveNext()`和访问`Current`属性以遍历`IEnumerable`.

OTOH，打电话`ToList()`是多余的。你不应该费心打电话给它。

如果输入是数据库，则情况略有不同，因为 LINQ 输出`IQueryable`，但我很确定`foreach`仍然将其视为`IEnumerable`（`IQueryable`继承）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T12:00:36.797

正如所写，循环的每次迭代都会做与获取下一个结果所需的工作量完全相同的工作。因此，从技术上讲，答案将是“以上都不是”。该查询将“分段”执行。

如果您使用`ToList()`或任何其他物化方法（`ToArray()`等），那么查询将*在现场*评估一次，后续操作（例如迭代结果）将仅在“哑”列表上工作。

如果`numbers`是一个`IQueryable`而不是一个`IEnumerable`- 因为它可能是在数据库场景中 - 那么上述内容仍然接近事实，尽管不是一个完全准确的描述。特别是，在第一次尝试实现结果时，可查询提供者将与数据库对话并生成结果集；然后，将在每次迭代中提取此结果集中的行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T12:15:53.857

linq 查询将在枚举时执行（作为`.ToList()`调用的结果或`foreach`对结果执行操作）。

如果您枚举 linq 查询的结果两次，这两次都会导致它查询数据源（在您的示例中，枚举集合），因为它本身只返回一个`IEnumerable`. 但是，根据 linq 查询，它可能并不总是枚举整个集合（例如`.Any()`，`.Single()`如果有 a ，它将在第一个对象或第一个匹配对象上停止`.Where()`）。

linq 提供程序的实现细节可能不同，因此当数据源是数据库时，通常的行为是直接调用`.ToList()`查询`cache`结果并确保执行查询（在 EF、L2S 或 NHibernate 的情况下*）一次，然后*而不是在稍后在代码中的某个点枚举集合时，并防止在多次枚举结果时多次执行查询。

# wpf - wpf 中的 FileUpload（访问路径被拒绝）

> ID：13250563
> 
> 赞同：0
> 
> 时间：2012-11-06T11:58:30.063
> 
> 标签：wpf

```
 public void Uploader(string filename, Stream Data)
        {

            BinaryReader reader = new BinaryReader(Data);
            string path = @"C:/Friendisc/Images";            
            FileStream fstream = new FileStream(path, FileMode.CreateNew);
            BinaryWriter wr = new BinaryWriter(fstream);
            wr.Write(reader.ReadBytes((int)Data.Length));
            wr.Close();
            fstream.Close();
            Data.Close();
        } 
```

我收到错误消息：拒绝访问路径。我需要做什么？

另外，我如何将图像上传到同一解决方案中的另一个项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-24T21:05:46.083

文件路径不正确。问题解决了。

# actionscript-3 - AS3：循环 Tweenlite 类是否有效

> ID：13250568
> 
> 赞同：1
> 
> 时间：2012-11-06T11:58:42.213
> 
> 标签：actionscript-3, easing, gsap

我有一个适用于 Android 的游戏，其中我正在循环一个 tweenlite 类，以便对象顺利移动。我知道我应该制作自己的平滑函数来移动对象，但我想我并没有比 tweenlite 做得更好。在代码中，我在球滚动时跟随球，我想以特别轻松的方式来做。此代码不会连续运行，每次滚动后它只会运行几秒钟。

```
addEventListener(Event.ENTER_FRAME, animate_object);

public function animate_object(e:Event):void
{
    var move_screen = obj_distance * ( obj_active + (Game.Ball.ball_taps + 1)) - 2);
    TweenLite.to(Object_Container, 1, {y:move_screen ,ease:Quad.easeInOut});
} 
```

我的问题，在为 Android 做它时，我这样使用它是否有效？

# actionscript-3 - Flex 面板未显示为禁用

> ID：13250570
> 
> 赞同：1
> 
> 时间：2012-11-06T11:58:43.100
> 
> 标签：actionscript-3, apache-flex, photoshop, flex4.5

我正在为 Win 和 Mac 上的 Photoshop CS5 和 CS6 创建一个弹性面板和一个 C++ 插件。我的 C++ 插件捕获图层选择更改、文档视图更改等事件并将事件分派给 flex。在 flex 中，我注册了这些事件并调用了适当的函数。这一切都完美无缺。

例如，当用户从 Photoshop 的图层面板中选择另一个图层时，我的插件会调度一个事件。这个事件在 flex 中被捕获并调用了一个方法。在此方法中，我需要禁用我的面板，进行一些处理，然后再次启用我的面板。这在 Win XP 和 Photoshop CS5 上运行良好，但在 Mac 和 Win 7 上却不行。如果我在面板上进行某些处理时将鼠标悬停，那么我的面板将显示为禁用，否则显示为启用。我正在使用以下代码：

在 C++ 中，层选择更改事件被调度。在 flex 中，它被捕获并调用函数“LayerChange”。

```
public function LayerChange(event:CSXSEvent):void
{
  this.enabled = false;
  CursorManager.setBusyCursor();
  //do some processing

  this.enabled = true;
  CursorManager.removeBusyCursor();
} 
```

有人能告诉我为什么面板没有显示为禁用，除非鼠标移到面板上？

谢谢

# xpath - XPath @root-node-position 属性信息

> ID：13250572
> 
> 赞同：-1
> 
> 时间：2012-11-06T11:58:53.683
> 
> 标签：xpath, xpath-2.0

我找不到`@root-node-position`XPath 属性/选择器信息。你能给我一个我可以在哪里读到它的链接吗？是 XPath 2.0 吗？代码（不是我的）`../preceding-sibling::div[1]/div[@root-node-position]/div`应用于此 HTML：

```
<div class="left">
      <div class='prod2'>
         <div class='name'>Dell Latitude D610-1.73 Laptop Wireless Computer
         </div>2 GHz Intel Pentium M, 1 GB DDR2 SDRAM, 40 GB 
      </div>
      <div class='prod1'>
         <div class='name'>Samsung Chromebook (Wi-Fi, 11.6-Inch)
         </div>1.7 GHz, 2 GB DDR3 SDRAM, 16 GB
      </div>
</div>
<div class="right">
  <div class='price2'>$239.95</div>
  <div class='price1 best'>$249.00</div>
</div> 
```

首先，我使用此查询在 class='right' 下获取价格文本：`//DIV[contains(@class,'best')]`然后我在 class='left' 下应用上面提到的 XPath 和 @root-node-attribute 来检索其余的记录信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T04:58:13.920

在 C# 中，这种方法很方便：

```
XmlDocument docSourceFile = new XmlDocument();
docSourceFile.Load("XML file path goes here");
XmlNode nodRoot = docSourceFile.DocumentElement;
string strAttributeValue = nodRoot .Attributes ["Write Attribute Name Here"].Value; 
```

通常，在 XPath 中，我们使用如下方式获取 RootNode 的属性值：

```
/RootNodeName/@AttributeName 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T04:43:59.893

@root-node-position 是一个非标准的 XPath 属性，仅受 Visual Web Ripper 支持。

[您可以在此处](http://manual.visualwebripper.com/default.aspx?manual_id=345)阅读有关 Visual Web Ripper 支持的非标准 XPath 方法、属性和轴的更多信息，仅供注册用户使用。

# android - onBackPressed 未关闭 Android 中的当前活动

> ID：13250573
> 
> 赞同：0
> 
> 时间：2012-11-06T11:58:53.497
> 
> 标签：android, android-activity

我创建了一个播放视频的应用程序。它工作正常，但问题是 - 当我按下设备上的后退按钮时，活动没有关闭。视频正在后台播放。我正在使用`onBackpressed()`. 如何关闭当前活动？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T12:01:12.517

把这段代码....

```
@Override
    public void onBackPressed() 
    {
        finish();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:03:55.707

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
 if (keyCode == KeyEvent.KEYCODE_BACK) {

//close you app or do what ever you want 
 }
 return super.onKeyDown(keyCode, event); 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:06:02.693

你有两种方法 **首先：**

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) 
{
    // TODO Auto-generated method stub
    if ((keyCode == KeyEvent.KEYCODE_BACK)) 
    {
        super.finish();
    }
    return super.onKeyDown(keyCode, event);
} 
```

**第二**

```
 @Override public void onBackPressed()
 {
 // TODO Auto-generated method stub
  super.onBackPressed();
   finish(); 
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T12:16:46.270

试试这个

```
@Override
protected void onDestroy() {
    super.onDestroy();
    final WebView webview = (WebView)findViewById(R.id.YourWebView);
    webview.stopLoading();
    webview.loadData("", "text/html", "utf-8");
} 
```

此处类似：[android WebView stop Flash 插件 onPause](https://stackoverflow.com/questions/5761873/android-webview-stop-flash-plugin-onpause/)和[Embedded IFRAME 视频在 Android 中退出全屏后继续在后台播放](https://stackoverflow.com/questions/13159144/embedded-iframe-video-keeps-playing-in-background-after-exiting-fullscreen-in-an)

如果上述方法不起作用，这也会有所帮助： [如何停止在 Android webview 中播放 youtube 视频？](https://stackoverflow.com/questions/5946698/how-to-stop-youtube-video-playing-in-android-webview)

这个链接基本上解释了 Android webview 中的一个线程错误，这里被问到：[WebView threads never stop (WebViewCoreThread, CookieSyncManager, http[0-3])](https://stackoverflow.com/questions/2040963/webview-threads-never-stop-webviewcorethread-cookiesyncmanager-http0-3) - using reflection to access onPause and onResume methods to kill your running threads

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-04T12:10:25.743

你有一个不同的问题，你不应该添加解决方法来解决这个问题。有东西抓住了你的 onBackPressed - 或者你的 onBackPressed 被什么东西抓住了，这就是它不起作用的原因。

# openwrt - OpenWRT Attitude 调整中的 Package Makefile 错误

> ID：13250574
> 
> 赞同：0
> 
> 时间：2012-11-06T11:58:57.627
> 
> 标签：openwrt, buildroot

我正在改变问题，因为我可以解决最初的问题。

我在我的包//Makefile 中有以下定义

```
PKG_BUILD_DIR:=$(KERNEL_BUILD_DIR)/$(PKG_NAME)-$(PKG_VERSION)
define Build/Compile
    $(MAKE) -s -C $(PKG_BUILD_DIR)
endef
$(eval $(call BuildPackage,<Module-name>)) 
```

我正在尝试使用 OpenWRT 编译一个自定义内核模块。

我正在使用命令 make package/"Module_name"/compile 进行构建；

Make 永远不会成功，它会说：

```
make[2]: Nothing to be done for `compile'. 
```

即使规则存在，为什么make出来什么都不做？任何克服此错误的建议都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:36:00.287

请先运行

```
make menuconfig 
```

并检查您尝试编译的模块是否在 OpenWRT 配置中被选中。如果选择了模块，那么它将按照您尝试的方式构建。

# objective-c - 如何过滤 NSDictionarys 和 NSDictionarys 的数组？

> ID：13250575
> 
> 赞同：7
> 
> 时间：2012-11-06T11:58:57.740
> 
> 标签：objective-c, cocoa, nsdictionary, nspredicate

我有一个数组，它由几个带有键的**NSDictionaries组成：**

*   `NSString *name`
*   `NSString *ID`
*   `NSDictionary *phoneNumbersDict`

现在我想过滤这个数组以找到具有`phoneNumbersDict`key`@"keyIAmLookingFor"`和 value的数组`@"valueIAmLookingFor"`。

```
NSMutableArray *addressBookPhoneIndividuals = [NSMutableArray array];
for (int i = 0; i < x; i++) {
    [addressBookPhoneIndividuals addObject:@{
        @"name" : @"...",
        @"ID" : @"...",
        @"phoneNumbers" : @{...}
    }];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T17:13:46.840

```
NSString *keyIAmLookingFor = @"work";
NSString *valueIAmLookingFor = @"444-567-9019";

NSArray *addressBookPhoneIndividuals = @[
    @{
        @"name" : @"Mike Rowe",
        @"ID" : @"134",
        @"phoneNumbers" : @{
            @"work" : @"123-456-8000",
            @"school" : @"647-5543",
            @"home" : @"123-544-3321",
        }
    },
    @{
        @"name" : @"Eric Johnson",
        @"ID" : @"1867",
        @"phoneNumbers" : @{
            @"work" : @"444-567-9019",
            @"other" : @"143-555-6655",
        }
    },
    @{
        @"name" : @"Robot Nixon",
        @"ID" : @"-12",
        @"phoneNumbers" : @{
            @"work" : @"123-544-3321",
            @"school" : @"123-456-8000",
            @"home" : @"444-567-9019",
        }
    },
];

NSString *keyPath = [@"phoneNumbers." stringByAppendingString:keyIAmLookingFor];

NSPredicate *predicate =
[NSComparisonPredicate predicateWithLeftExpression:[NSExpression expressionForKeyPath:keyPath]
                                   rightExpression:[NSExpression expressionForConstantValue:valueIAmLookingFor]
                                          modifier:NSDirectPredicateModifier
                                              type:NSEqualToPredicateOperatorType
                                           options:0];

NSArray *result = [addressBookPhoneIndividuals filteredArrayUsingPredicate:predicate]; 
```

这将返回一个包含“Eric Johnson”字典的数组。

我喜欢`NSComparisonPredicate`在进行任何类型的复杂匹配时推荐。查看修饰符、类型和选项的选项。那里有一些很好的内置匹配引擎 - 包括正则表达式和不区分大小写。无论如何，这里可能没有必要，因此您可以替换以下内容：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"%K = %@", keyPath, valueIAmLookingFor]; 
```

如果只关心第一个结果，可以完全跳过 keyPath/predicate 业务：

```
for (NSDictionary *individualDict in addressBookPhoneIndividuals) {
    NSDictionary *phoneNumbers = [individualDict objectForKey:@"phoneNumbers"];
    NSString *possibleMatch = [phoneNumbers objectForKey:keyIAmLookingFor];
    if ([possibleMatch isEqualToString:valueIAmLookingFor]) {
        return individualDict;
    }
}

return nil; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T16:23:11.447

您可以使用 an`NSPredicate`来过滤您的数组。类似于以下内容：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"phoneNumbers.keyIAmLookingFor == %@", @"valueIAmLookingFor"];
NSArray *matches = [addressBookPhoneIndividuals filteredArrayUsingPredicate:predicate]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T14:46:00.920

我不太明白您想如何过滤数组，但我经常使用的一种简单方法是基于块的过滤：

```
NSIndexSet* filteredIndexes = [addressBookPhoneIndividuals indexesOfObjectsPassingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop){
    NSString *name = [obj objectForKey:@"name"];
    NSString *ID = [obj objectForKey:@"ID"];
    NSDictionary *phoneNumbersDict = [obj objectForKey:@"phoneNumbersDict"];

    return [[phoneNumbersDict objectForKey:@"keyIAmLookingFor"] isEqualToString:@"valueIAmLookingFor"];
}];

NSArray* filteredArray = [addressBookPhoneIndividuals objectsAtIndexes:filteredIndexes]; 
```

这有帮助吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T14:26:12.057

您可以使用

```
i.     –allKeysForObject:
ii.    –objectForKey:
iii.   –valueForKey:
iv.    –keysOfEntriesPassingTest:
v.     –keysOfEntriesWithOptions:passingTest: 
```

你也可以选择 NSPredicateFilter。

# iphone - UITableView 更新时应用程序崩溃

> ID：13250595
> 
> 赞同：1
> 
> 时间：2012-11-06T12:00:21.587
> 
> 标签：iphone, uitableview

我正在 parsingDidEnd 解析上实现 tableupdate。当用户到达表格末尾并滚动时...我调用解析并且解析完成后...`UITableView`更新...它工作得很好但是当我连续滚动 TableView 4-5 次时它崩溃并出现如下错误：

```
2012-11-06 17:19:14.810 MightyGoodDeals[1345:707] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid update: invalid number of rows in section 0\.  The number of rows contained in an existing section after the update (50) must be equal to the number of rows contained in that section before the update (40), plus or minus the number of rows inserted or deleted from that section (20 inserted, 0 deleted). 
```

找到我的更新代码如下：

```
 #pragma mark <myLIBXMLParser> Implementation- (void)parserDidEndParsingData:(myLIBXMLParser *)parser {
    //  self.title = [NSString stringWithFormat:@"%i Patients Records", [objects count]];

    //self.navigationItem.rightBarButtonItem.enabled = YES;
    self.parser = nil;
    NSLog(@"%@",[objects description]);
    if ([objects count]==0 ||[[[objects objectAtIndex:0]valueForKey:@"NoData"]isEqualToString:@"0"]) {
        UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@"MightyGoodDeals" message:@"There are no deals to display." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
        [self removeLoadingView];
    }
    else {
        NSLog(@"in else");
        [self removeLoadingView];

        NSMutableArray *indexArray=[[NSMutableArray alloc]init];
        NSLog(@"%d",[objects count]);
        NSLog(@"intSkip: %d",intSkip);

        for (int i=intSkip; i<[objects count]; i++) 
        {
             NSLog(@"in for loop");
            NSLog(@"%d",i);
            NSIndexPath *path=[NSIndexPath indexPathForRow:i inSection:0];
            [indexArray addObject:path];

        }
        [self.tableView beginUpdates];
        [self.tableView insertRowsAtIndexPaths:indexArray withRowAnimation:UITableViewRowAnimationAutomatic];
        [self.tableView endUpdates];

        self.tableView.tableFooterView = nil;
        [self.tableView setSeparatorColor:[UIColor blackColor]];

        //[self.tableView reloadData];
        int value=[[[objects objectAtIndex:[objects count]-1]valueForKey:@"Skip"]intValue];
        float remainder = fmod([objects count],value); 
        int endValue=(int)remainder;

        if (endValue==0) 
        {
            syncParse=TRUE;
        }
        else
        {   
            syncParse=FALSE;
        }
    }}
    - (void)parser:(myLIBXMLParser *)parser didParseObjects:(NSArray *)parsedObjects{       [objects addObjectsFromArray:parsedObjects];    }

    -(void)scrollViewDidScroll:(UIScrollView *)scrollView
{   
    CGFloat height = scrollView.frame.size.height;

    CGFloat contentYoffset = scrollView.contentOffset.y;

    CGFloat distanceFromBottom = scrollView.contentSize.height - contentYoffset;

    if(distanceFromBottom < height) 
    {
        NSLog(@"end of the table");

        if (syncParse) 
        {
            int value=[[[objects objectAtIndex:[objects count]-1]valueForKey:@"Skip"]intValue];
            intSkip=value;

            [NSThread detachNewThreadSelector:@selector(StartParsing) toTarget:self withObject:nil];

            UIView *loadingViewShow=[[UIView alloc]initWithFrame:CGRectMake(0, 0, 320, 44)];

            UIActivityIndicatorView *spinner = [[[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray] autorelease];
            [spinner startAnimating];
            spinner.frame = CGRectMake(115, 15, 20,20);
            [loadingViewShow addSubview:spinner];

            UILabel *lbl=[[UILabel alloc]initWithFrame:CGRectMake(140, 0, 160, 44)];
            [lbl setText:@"Loading....."];
            [lbl setBackgroundColor:[UIColor clearColor]];
            [lbl setTextColor:[UIColor grayColor]];
            [loadingViewShow addSubview:lbl];
            self.tableView.tableFooterView = loadingViewShow;

            //[self StartParsing];
        }

    }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:05:41.753

`numberofRowsinSection`正如您在错误描述中看到的那样，肯定会返回不正确的值：

> **第 0 节**中的行数无效。更新后现有节中包含的行数**(50)**必须等于**更新前该节中包含的行数 (40)**加上或减去从该节中插入或删除的行数 ( **20 插入**, 0 已删除）。

40+20 != 50。

# objective-c - iOS从字符串中获取NSDate？

> ID：13250599
> 
> 赞同：2
> 
> 时间：2012-11-06T12:00:31.247
> 
> 标签：objective-c, ios, nsdate

我想将字符串**Thu, Nov 22, 2012**转换为`NSDate`.

我试过这个：

```
NSString *str = @"Thu, Nov 22, 2012";

[dateFormat setDateFormat:@"EEE,MMM dd yyyy"];
NSDate *date = [dateFormat dateFromString:str];
NSLog(@"date: %@",date); 
```

但我越来越空了。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:03:29.447

由于您使用的是正确的格式字母，您只需要像这样修复逗号（和间距）：

`EEE, MMM dd, yyyy`尽管一个 E 甚至就足够了（E，MMM dd，yyyy）。

请参阅[格式参考](http://www.unicode.org/reports/tr35/tr35-25.html#Date_Format_Patterns)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:03:46.503

`NSString` `date` `format`并且`NSDateFormatter`应该是`same`：

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];

NSString *string = @"Thu, Nov 22, 2012";

[dateFormat setDateFormat:@"EEE,MMM dd, yyyy"]; //your date formatter is not correct

NSDate *date = [dateFormat dateFromString:string];
NSLog(@"%@",date); 
```

# php - AJAX 和 PHP 不起作用

> ID：13250601
> 
> 赞同：-2
> 
> 时间：2012-11-06T12:00:34.237
> 
> 标签：php, html, ajax

这是我的代码。

```
<html>
<head>
<title>Patient Information Management</title>
<!--showDate AJAX script -->
<script language="javascript" type="text/javascript">
function showDate(){
var ajaxRequest;  // The variable that makes Ajax possible!
try{
    // Opera 8.0+, Firefox, Safari
    ajaxRequest = new XMLHttpRequest();
}catch (e){
// Internet Explorer Browsers
try{
  ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
}catch (e) {
 try{
     ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
    }catch (e){
     // Something went wrong
     alert("Your browser broke!");
     return false;
  }
}
}
// Create a function that will receive data 
// sent from the server and will update
// div section in the same page.
ajaxRequest.onreadystatechange = function(){
if(ajaxRequest.readyState == 4){
  var ajaxDisplay = document.getElementById('ajaxDiv');
  ajaxDisplay.value = ajaxRequest.responseText;
 }
 }
// Now get the value from user and pass it to
// server script.
var date = document.getElementByName('Date').value;
var queryString = "?date=" +date ;
ajaxRequest.open("GET", "getappointmentdate.php" +queryString, true);
ajaxRequest.send(null); 
}
</script>
<!-- //Calender Script -->
<link rel="stylesheet" type="text/css" media="all" href="scripts/jsDatePick_ltr.min.css"/>

<!--JavaScript-->
<script type="text/javascript" src="scripts/jsDatePick.min.1.3.js"></script>

<!--For javascript Calendar-->  
<script type="text/javascript">
window.onload = function(){
    new JsDatePick({
        useMode:2,
        target:"Date",
        cellColorScheme:"orange",
        dateFormat:"%d-%m-%Y",
    });

};
</script>
</head>

<body>

<div class="wrapper">
<?php include("include/header.php"); ?>
<div class="clear"></div>
<?php 

<div class="clear"></div>

</div> <!-- end of sidemenu div -->
</div> <!-- end of left div -->

<div id="right" >

<h2>anything</h2>
<div class='grey_divider'></div>

<p>&nbsp;</p>
<div class='grey_divider'></div>
<h3>Make Appointment</h3>
<form action=""> 
 Date &nbsp;:&nbsp; <input type="text" size="20" id="Date"  name="Date"/>
 <input type='button' onclick='showDate()' value='Submit'/>
 </br>
 </br>

 </form>

</div>
</body>
</div>
</html> 
```

当我单击“提交”按钮时，它应该运行 php 文档，但不幸的是，没有任何反应，请有人可以帮助我。我用 getElementByName 而不是 getElementById 捕捉 html 日期，因为“id”已被用来捕捉日历 js。它会影响吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:04:09.740

我很确定您需要捕捉按钮单击并停止它的默认行为，`.preventDefault()`然后调用您的函数。

添加代码

```
$('input[type="submit"]').click(function(e) {
  e.preventDefault();
  showDate();
}); 
```

# ios - NSDate 设置时间，不是预期的结果

> ID：13250605
> 
> 赞同：1
> 
> 时间：2012-11-06T12:00:39.467
> 
> 标签：ios, datetime, nsdate, nscalendar, nsdatecomponents

我有以下代码通过使用日期中的 YEAR、MONTH 和 DAY 组件来将日期的时间设置为 0 小时、0 分钟和 0 秒，以构造一个新的：

```
NSDate *date = [NSDate date];
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *comps = [gregorian components:(NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit) fromDate:date];
NSDate *newDate = [gregorian dateFromComponents:comps];
NSLog(@"date: %@, newDate: %@", date, newDate); 
```

输出是：

```
date: 2012-11-06 11:44:09 +0000, newDate: 2012-11-05 23:00:00 +0000 
```

但我期待新的日期是：`2012-11-06 00:00:00 +0000` 我应该知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:26:41.650

`NSLog`显示日期，使用`-[NSDate description]`这些日期将存储在 中的绝对时间转换`NSDate`为字符串。此转换使用 UTC 作为时区完成。

对于您的情况，最好也使用 UTC 进行日期计算。为此，请调整执行计算的日历对象：

```
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
[gregorian setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"UTC"]]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-06T12:06:00.647

有关类似的 Stack Overflow 问题，请参阅[此答案。](https://stackoverflow.com/a/12689829/696624)

这应该可以解决您的夏令时问题：

```
NSDateFormatter *formatter = [[[NSDateFormatter alloc] init] autorelease];

[formatter setCalendar:[NSCalendar currentCalendar]];
[formatter setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"UTC"]];

NSString *string = [formatter stringFromDate:[NSDate date]]; 
```

# sass - Susy：使用 nth-omega mixin 时出错

> ID：13250606
> 
> 赞同：1
> 
> 时间：2012-11-06T12:00:49.673
> 
> 标签：sass, compass-sass, susy-compass

我认为这会起作用：

```
.col4 {@include span-columns(3,12); @include nth-omega();} 
```

但我收到此错误消息（在 CodeKit 中）：

错误 screen.scss（_support.scss 的第 195 行：带有-only-support-for 的 Mixin 需要 6 个参数，但传递了 8 个。）

没有'@include nth-omega();' 我没有收到错误消息。'@include nth-omega(4);' 也没有工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:24:46.907

Susy < 1.0.4 有一个关于 nth-omega 的错误，这可能就是您所看到的。您使用的是哪个版本的 Compass 和 Susy？尝试使用`> sudo gem update`.

# ruby-on-rails - 移动 Fu gem 不适用于 ruby 1.8.7 / rails 2.3.14

> ID：13250607
> 
> 赞同：0
> 
> 时间：2012-11-06T12:00:53.010
> 
> 标签：ruby-on-rails, ruby, rubygems

[按照http://rubygems.org/gems/mobile-fu](http://rubygems.org/gems/mobile-fu)上的说明安装 gem （“只需添加`gem 'mobile-fu'`到您的 Gemfile 并运行 bundle install”）工作正常，并且 gem 被列为已安装并且所有需要的依赖项也在放置AFAIK，下面是项目Gemfile的相关部分：

```
source :gemcutter
source 'http://gems.github.com'

gem 'rails', '~> 2.3.14'
gem 'aslakjo-comatose', '2.0.5.12', :require => 'comatose'
gem 'adamwiggins-rest-client', '1.0.4'
gem 'ruby-hmac', '0.4', :require => 'hmac'
gem 'ruby-net-ldap', '0.0.4', :require => 'net/ldap'
gem 'will_paginate', '2.3.11'
gem 'hpricot', '0.8.2'
gem 'oauth', '0.3.6'
gem 'sanitize', '1.1.0'
gem 'sunspot_rails', '1.1.0', :require => 'sunspot/rails'
gem 'htmlentities'
gem 'rdoc', :require => 'rdoc'
gem 'to_xls'
gem 'pusher'
gem 'jammit'
gem 'rabl', '~>0.6'
gem 'paperclip', '~> 2.7'
gem 'aws-sdk', '~> 1.3.4'
gem 'mobile-fu', '~> 1.1.0'
... 
```

这是启动服务器时产生的错误消息/日志：“没有要加载的此类文件--mobile / fu（MissingSourceFile）”是主要问题（恕我直言）：

```
=> Booting WEBrick
=> Rails 2.3.14 application starting on http://0.0.0.0:3000
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
/home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/bundler-1.2.1/lib/bundler/runtime.rb:74:in `require': no such file to load -- mobile/fu (MissingSourceFile)
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/bundler-1.2.1/lib/bundler/runtime.rb:74:in `require'
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `each'
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `require'
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/bundler-1.2.1/lib/bundler.rb:128:in `require'
    from /home/work/web/srv/config/boot.rb:116:in `load_gems'
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/rails-2.3.14/lib/initializer.rb:164:in `process'
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/rails-2.3.14/lib/initializer.rb:113:in `send'
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/rails-2.3.14/lib/initializer.rb:113:in `run'
    from ./config/environment.rb:7
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:182:in `require'
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:182:in `require'
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:547:in `new_constants_in'
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:182:in `require'
    from /home/work/web/srv/config.ru:1
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/rack-1.1.3/lib/rack/builder.rb:46:in `instance_eval'
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/rack-1.1.3/lib/rack/builder.rb:46:in `initialize'
    from /home/work/web/srv/config.ru:1:in `new'
    from /home/work/web/srv/config.ru:1
    from ./script/server:3:in `eval'
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/rails-2.3.14/lib/commands/server.rb:78
    from ./script/server:3:in `require'
    from ./script/server:3 
```

**更新 1**

使用 Ben Langfeld 描述的解决方案（“您可以在 Gemfile 中使用以下内容解决此问题：`gem 'mobile-fu', '~> 1.1.0', :require => 'mobile-fu'`”）只会产生如下所示的新错误：

```
=> Booting WEBrick
=> Rails 2.3.14 application starting on http://0.0.0.0:3000
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
/home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:182:in `require': no such file to load -- rails (MissingSourceFile)
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:182:in `require'
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:547:in `new_constants_in'
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:182:in `require'
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/mobile-fu-1.1.0/lib/mobile-fu.rb:1
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `require'
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `require'
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `each'
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `require'
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `each'
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `require'
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/bundler-1.2.1/lib/bundler.rb:128:in `require'
    from /home/work/web/srv/config/boot.rb:116:in `load_gems'
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/rails-2.3.14/lib/initializer.rb:164:in `process'
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/rails-2.3.14/lib/initializer.rb:113:in `send'
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/rails-2.3.14/lib/initializer.rb:113:in `run'
    from ./config/environment.rb:7
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:182:in `require'
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:182:in `require'
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:547:in `new_constants_in'
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:182:in `require'
    from /home/work/web/srv/config.ru:1
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/rack-1.1.3/lib/rack/builder.rb:46:in `instance_eval'
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/rack-1.1.3/lib/rack/builder.rb:46:in `initialize'
    from /home/work/web/srv/config.ru:1:in `new'
    from /home/work/web/srv/config.ru:1
    from ./script/server:3:in `eval'
    from /home/work/.rvm/gems/ruby-1.8.7-head@srv/gems/rails-2.3.14/lib/commands/server.rb:78
    from ./script/server:3:in `require'
    from ./script/server:3 
```

没有为此 gem 列出的 ruby​​ 或 rails 的最低版本，但我怀疑问题是由我们正在运行的旧版本引起的。但是，升级 ruby​​ 或 rails 不是一种选择，因为这是一个维护项目。

如果存在任何已知可在我们的 ruby​​ 和 rails 版本/配置上运行的具有类似功能的 Mobile Fu 替代 gem，如果无法解决此问题，我们愿意研究该替代选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:31:04.820

您可以在 Gemfile 中使用以下内容解决此问题：

```
gem 'mobile-fu', '~> 1.1.0', :require => 'mobile-fu' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:38:53.490

由于 Mobile Fu gem 与 ruby​​ 1.8.x / rails 2.3.x 不兼容，我们最终根据以下文章创建了自己的类似功能：http: [//erniemiller.org/2011/01/05/mobile-devices -and-rails-maintaining-your-sanity/](http://erniemiller.org/2011/01/05/mobile-devices-and-rails-maintaining-your-sanity/)

# c# - 函数应该只被调用一次

> ID：13250620
> 
> 赞同：-8
> 
> 时间：2012-11-06T12:01:34.477
> 
> 标签：c#

我有一个返回状态列表的 c# 函数。我希望这个函数应该像静态变量一样只被调用一次。

```

    公共列表 GetStateList()
    {
       列表 lstState=新列表（）；
       lstState.add("State1");
       lstState.add("State2");
       lstState.add("State3");

       返回 lst 状态；
    }

```

我从很多地方调用这个函数，因为这个状态列表是一样的，所以我希望这个函数应该只被调用一次，下次当这个函数被调用时，它不应该再次重新创建整个列表。

我怎么能在 c# 中实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:20:32.473

记下来。它仍会被多次调用，但只完成一次完整的工作：

```
private List<string> _states; //if GetStateList() doesn't depend on object
                              //state, then this can be static.
public List GetStateList()
{
   if(_states == null)
   {
     List lstState=new List();
     lstState.add("State1");
     lstState.add("State2");
     lstState.add("State3");
     _states = lstState;
   }
   return _states;
} 
```

根据线程问题，您可能希望：

1.  锁定整个事情。保证单次执行。
2.  锁定分配给`_states`。前期可能会有一些不必要的工作，但是所有的调用者都会收到相同的对象。
3.  允许早期调用者相互覆盖。

虽然最后一个看起来最浪费，但从长远来看它可能是最好的，因为在不同调用可能不必要地相互覆盖的初始阶段之后，从那时起它变得更简单、更快。这实际上取决于完成了多少工作，以及`_states`在分配之前可以同时调用它的频率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:06:30.377

重用列表的一个问题是调用者可以修改此列表，这将影响对它的任何预先存在的引用。对于如此少量的数据，从长远来看，这不太可能为您节省很多。我可能会满足于每次只返回一个新数组。

我当然不会为惰性实例化而烦恼。在构造函数中填充它并完成：

```
public static class States {
    static States() {
        All = Array.AsReadOnly(new string[] { "state1", "state2", "state3" });
    }
    public static readonly ReadOnlyCollection<string> All;
} 
```

现在它是线程安全的，（相对）防篡改的，最重要的是，简单。

# android - 是否可以使用 Roboguice 注入维度？

> ID：13250622
> 
> 赞同：2
> 
> 时间：2012-11-06T12:01:43.540
> 
> 标签：android, roboguice

在 Android 上使用 Roboguice 可以实现这样的事情吗？

```
<resources>
   <dimen name="radius">10dip</dimen>
</resources> 
```

进而

```
@InjectResource(R.dimen.radius)
private int radius; // in px 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:37:37.863

我查看了[来源](https://github.com/roboguice/roboguice/blob/master/roboguice/src/main/java/roboguice/inject/ResourceListener.java)，支持的类型如下：

*   `String resources.getString(id)`
*   `boolean resources.getBoolean(id)`
*   `ColorStateList resources.getColorStateList(id)`
*   `int resources.getInteger(id)`
*   `Drawable resources.getDrawable(id)`
*   `String[] resources.getStringArray(id)`
*   `int[] resources.getIntArray(id)`
*   `Animation AnimationUtils.loadAnimation(application, id)`
*   `Movie resources.getMovie(id)`

我找不到`int resources.getDimensionPixelSize(id)`。你可以做的是将维度保持为一个`int`值：

```
<resources>
   <integer name="radius">10</integer>
</resources> 
```

但这不是一个干净的解决方案。

# asp.net - 无法在回发事件中捕获 ImageButton 单击

> ID：13250629
> 
> 赞同：0
> 
> 时间：2012-11-06T12:02:08.377
> 
> 标签：asp.net

无法在回发中捕获 Imagebuttonclick 事件。

我正在使用以下代码进行按钮单击并尝试使用 Imagebutton 但是“按钮”单击它的工作而不是图像按钮。

```
public Control GetPostBackControl(Page page)
    {
        Control control = null;

        string ctrlname = page.Request.Params.Get("__EVENTTARGET");
        if ((ctrlname != null) & ctrlname != string.Empty)
        {
            control = page.FindControl(ctrlname);
        }
        else
        {
            foreach (string ctl in page.Request.Form)
            {
                Control c = page.FindControl(ctl);
                if (c is System.Web.UI.WebControls.Button)
                {
                    control = c;
                    break;
                }
            }
        }
        return control;
    } 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:06:49.973

尝试用这个替换你的按钮检查块：

```
if (c is System.Web.UI.WebControls.ImageButton)
            {
                control = c;
                break;
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:10:01.307

得到了解决方案：

在上述代码中添加了一项检查， // 处理 ImageButton 回发

```
 if (control == null)
        {
            for (int i = 0; i < page.Request.Form.Count; i++)
            {

                if ((page.Request.Form.Keys[i].EndsWith(".x")) || (page.Request.Form.Keys[i].EndsWith(".y")))
                {
                    control = page.FindControl(page.Request.Form.Keys[i].Substring(0, page.Request.Form.Keys[i].Length - 2));                     
                }
            }
        } 
```

现在我能够捕获 ImageButton 回发事件。

谢谢

# git - 从 git 中删除具有奇怪名称的文件

> ID：13250633
> 
> 赞同：11
> 
> 时间：2012-11-06T12:02:33.333
> 
> 标签：git

我有一个文件设法将自己命名为：

```
# file's name (both lines)
companies.yml
companies.yml

# entry in my git working tree
"test/fixtures/companies.yml\342\200\250companies.yml" 
```

由于烦人的原因，这个特定项目的工作树充满了其他需要组织的文件。我想从那里获得上述条目，但是当我尝试`git add "test/fixtures..."`或`git rm "test/fixtures..."`失败时：
`fatal: pathspec 'test/fixtures/companies.yml\342\200\250companies.yml' did not match any files`

我该如何处理？

* * *

# Git状态

```
On branch master
# Your branch is ahead of 'production/master' by 4 commits.
#
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)

modified:   [other files]
modified:   "test/fixtures/companies.yml\342\200\250companies.yml" 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-06T12:21:04.237

Git 正在打印文件名的 UTF-8 编码的文字八位字节，因为它们是非 ASCII 字符，并将它们打印为八进制转义符。但是，您的 shell 不理解它们，并且在您剪切和粘贴时向 git 命令发送文字反斜杠和数字，因此您实际上输入了不同的文件名。

键入后使用制表符补全`test/fixtures/companies.yml`（如果您的外壳支持此功能）将输入实际字符或使用通配符代替转义符`test/fixtures/companies.yml*companies.yml`。后者*可能*但可能不会匹配其他文件名。

当然，另一种可能性是将文件重命名为更合理的名称，然后使用`git add -u`/`git add .`让 git 注意到重命名。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-06T12:40:22.707

由于您使用的是 bash，因此可以使用[printf 命令](http://wiki.bash-hackers.org/commands/builtin/printf)：

```
git rm --cached `printf "test/fixtures/companies.yml\342\200\250companies.yml"` 
```

以 \0 开头的八进制转义最多可包含四位数字。
（POSIX 最多指定三个）

[您可以在“ Git：如何在命令行上指定包含八进制表示法的文件名](https://stackoverflow.com/questions/10687589/git-how-to-specify-file-names-containing-octal-notation-on-the-command-line)”中看到类似的解决方案。

这将从索引中删除文件，同时仍将其保留在工作树上。
然后，您可以根据需要重命名它。

* * *

使用 Git 2.18 更新（2018 年第二季度，6 年后），使用简单的完成应该可以工作。

请参阅[SZEDER Gábor ( ) 的](https://github.com/szeder)[提交 3dfe23b](https://github.com/git/git/commit/3dfe23ba51664467d89ba937e607ffef6501c3f3)（2018 年 4 月 16 日[）](https://github.com/szeder)。 [`szeder`](https://github.com/szeder)

完成：支持完成非ASCII路径名

> 除非用户`core.quotePath=false`在配置中的某处有 ' '，否则默认情况下，' `git ls-files`' 和 ' `git diff-index`' 都会引用任何包含值高于 的字节的路径名 `0x80`，并将这些字节转义为 ' `\nnn`' 八进制值。
> 当要完成的当前路径组件包含任何非 ASCII（最显着的是 UTF-8）字符时，这会阻止完成路径，因为列出的引用路径都不会与命令行上的当前单词匹配。
> 
> `core.quotePath=false`为那些 ' `git ls-files`' 和 ' ' 调用设置 ' ' `git diff-index`，因此它们不会将高于“不寻常”的字节`0x80`视为“不寻常”，并且不会引用包含此类字符的路径名。
> 
> 请注意，包含反斜杠、双引号或控制字符的路径名仍将被引用；本系列的后续补丁将处理这些问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-29T15:14:12.720

我想删除我的 git 存储库中名称包含俄语字母的文件夹：“Файлы Mail.Ru Агента”。首先，我手动删除了该文件夹，并想在 git 中删除它

```
git rm "..." 
```

下一步中的命令。但是 git 向我显示了已删除文件夹的一个非常神秘的名称：“\320\244\320\260\320\271\320\273\321\213 Mail.Ru \320\220\320\263\320\265\ 320\275\321\202\320\260”。我恢复了文件夹

```
git checkout 
```

而不仅仅是复制文件夹的名称并执行命令

```
git rm "Файлы Mail.Ru Агента/*" 
```

有效！

# mysql - 我怎样才能用mysql得到这些？

> ID：13250635
> 
> 赞同：1
> 
> 时间：2012-11-06T12:02:35.797
> 
> 标签：mysql, sql

我是mysql的新手。

我有点击次数，期间（日期）的调查。现在我必须找出每月的点击次数，例如：

```
MON  CLICKS
nov  0 
oct  34 
sep  67 
aug  89 
```

我使用过这样的代码：

```
select MONTHNAME(period) mon,  IFNULL(count(id),0) as Clicks
from survey
where period > DATE_SUB(now(), INTERVAL 3 MONTH)
group by EXTRACT(MONTH FROM period) 
```

如果没有记录，它就不起作用。

这里有一件事我假设那个月没有记录它应该显示0：如果没有`nov`点击次数的记录应该是`0`。

```
my table structure was like this 
CREATE TABLE `survey` (
  `id` int(2) NOT NULL auto_increment,
   `period` datetime default NULL) 
```

在过去的四个星期里，我使用了

```
 SELECT uq.timespan, COALESCE(tsq.TotalClicks, 0) as Clicks FROM (
SELECT '22-28 days' as timespan
union SELECT '15-21 days'
union SELECT '8-14 days'
union SELECT 'up to 7 days'

)uq LEFT JOIN (
SELECT CASE 
    WHEN submitdate >= NOW() - INTERVAL 4 WEEK
                AND submitdate < NOW() - INTERVAL 3 WEEK THEN '22-28 days'
    WHEN submitdate >= NOW() - INTERVAL 3 WEEK
           AND submitdate < NOW() - INTERVAL 2 WEEK THEN '15-21 days'
WHEN submitdate >= NOW() - INTERVAL 2 WEEK
    AND submitdate < NOW() - INTERVAL 1 WEEK THEN '8-14 days'
WHEN submitdate >= NOW() - INTERVAL 1 WEEK THEN 'up to 7 days'
       END Weeksubmitdate, 
           count(id) TotalClicks
FROM  survey 
WHERE submitdate >= NOW() - INTERVAL 4 WEEK
GROUP BY Weeksubmitdate
)tsq ON uq.timespan = tsq.Weeksubmitdate 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T12:22:48.557

我通常做数据透视表来实现这一点。假设您的点击信息存储在名为 SURVEY 的表中，并假设只有点击的日期/时间存储在 SURVEY 表的一列中（这就是您所需要的），那么这是一种方法：

```
select   year(period),
         sum(case when month(period)=1 then 1 else 0 end) jan,
         sum(case when month(period)=2 then 1 else 0 end) feb,
         sum(case when month(period)=3 then 1 else 0 end) mar,
         sum(case when month(period)=4 then 1 else 0 end) apr,
         sum(case when month(period)=5 then 1 else 0 end) may,
         sum(case when month(period)=6 then 1 else 0 end) jun,
         sum(case when month(period)=7 then 1 else 0 end) jul,
         sum(case when month(period)=8 then 1 else 0 end) aug,
         sum(case when month(period)=9 then 1 else 0 end) sep,
         sum(case when month(period)=10 then 1 else 0 end) oct,
         sum(case when month(period)=11 then 1 else 0 end) nov,
         sum(case when month(period)=11 then 1 else 0 end) dec
from     survey
group by year(period) 
```

输出类似于：

```
---------------------------------------------------------------------------------
| Year  | JAN | FEB | MAR | APR | MAY | JUN | JUL | AUG | SEP | OCT | NOV | DEC |
---------------------------------------------------------------------------------
| 2012  |  5  |  20 |  13 | 0   |  0  |  65 |  15 |  0  |  0  |  21 |  0  |  0  |
--------------------------------------------------------------------------------- 
```

我什至为你设置了相同的 Fiddle SQL [**SQL Fiddle Demo**](http://sqlfiddle.com/#!2/7a79a/1/0)

另一种方法（基于过去 4 个月的列，即使计数为零）： SQL **Fiddle** [Demo](http://sqlfiddle.com/#!2/aea68/3)

```
SELECT mon,
       sum(clicks) clicks
FROM   ( SELECT month(period) mnth,
                date_format(period,'%b') mon,
                count(1) clicks
         FROM   survey
         WHERE  month(period) BETWEEN month(curdate()) - 4 AND month(curdate())
         GROUP BY 1, 2
         UNION ALL
         SELECT 1 mnth, 'Jan' mon, 0 clicks
         UNION ALL
         SELECT 2 mnth, 'Feb' mon, 0 clicks
         UNION ALL
         SELECT 3 mnth, 'Mar' mon, 0 clicks
         UNION ALL
         SELECT 4 mnth, 'Apr' mon, 0 clicks
         UNION ALL
         SELECT 5 mnth, 'May' mon, 0 clicks
         UNION ALL
         SELECT 6 mnth, 'Jun' mon, 0 clicks
         UNION ALL
         SELECT 7 mnth, 'Jul' mon, 0 clicks
         UNION ALL
         SELECT 8 mnth, 'Aug' mon, 0 clicks
         UNION ALL
         SELECT 9 mnth, 'Sep' mon, 0 clicks
         UNION ALL
         SELECT 10 mnth, 'Oct' mon, 0 clicks
         UNION ALL
         SELECT 11 mnth, 'Nov' mon, 0 clicks
         UNION ALL
         SELECT 12 mnth, 'Dec' mon, 0 clicks) a
WHERE  mnth BETWEEN month(curdate()) - 4 AND month(curdate())
GROUP BY 1
ORDER BY mnth 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:25:25.653

您需要加入一个包含所有月份名称的表。这是一种方法：

```
select
    mon,
    ifnull(count(id), 0) as Clicks
from (select 'nov' as mon union select 'oct' union select 'sep' union select 'aug') m
left join survey on MONTHNAME(period) = mon
where submitdate > DATE_SUB(now(), INTERVAL 3 MONTH) 
group by 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:59:58.437

```
select MONTHNAME(STR_TO_DATE(month(period), '%m'))as 'month',count(*) as clicks
 from survey group by month(period) 
```

# html - 页面问题中有多个相同的表单标签

> ID：13250638
> 
> 赞同：8
> 
> 时间：2012-11-06T12:02:44.020
> 
> 标签：html, forms, labels

我在一页中有多个表格。每个表格都有完全相同的内容。但是我遇到了一个关于我的标签的问题。我知道标签“for”标签应该是唯一的并指向元素 id，但由于某种原因我必须将表单相乘。请参考我在 jsfiddle[我的代码中找到的代码](http://jsfiddle.net/QDf8P/)

```
<form>
<label for="option1">Option 1</label>
<input type="radio" id="option1" name="options">

<label for="option2">Option 2</label>
<input type="radio" id="option2" name="options">

<label for="option3">Option 3</label>
<input type="radio" id="option3" name="options">
</form>

<!-- another form but the same content -->
<form>
<label for="option1">Option 1</label>
<input type="radio" id="option1" name="options">

<label for="option2">Option 2</label>
<input type="radio" id="option2" name="options">

<label for="option3">Option 3</label>
<input type="radio" id="option3" name="options">
</form>​ 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T12:18:37.793

任何一个：

*   生成一个应用于给定表单实例中的所有 id 的前缀
*   不要在标签元素中使用*或*放置`for`表单`id`控件。

# c# - 在 XML 文件中定义锚标记

> ID：13250639
> 
> 赞同：0
> 
> 时间：2012-11-06T12:02:44.380
> 
> 标签：c#, xml, anchor

我正在使用 VS 2010 C#。我有一个 xml 文件，我在其中定义菜单的导航链接。我已经在 xml 文件中定义了一些锚标记，但是当我在后面的代码中读取 xml 时，它并没有显示 acnhor 标记。我什至使用 HttpUtility.HtmlEncode 对其进行编码。我不知道为什么锚标签被省略了。请帮忙

XML 文件示例

```
<Navigation>
  <MenuItem>
   <a href="">....</a>
    </MenuItem>
  </Navigation> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:29:50.203

尝试在 CDATA 节点中添加您的锚链接。像下面的东西

```
<Navigation>
 <MenuItem>
  <![CDATA[<a href="">....</a>]]>
 </MenuItem>
</Navigation> 
```

从这个 XML 读取时，内置 XML 解析器将直接读取该值。

希望能帮助到你。

# html - 标题标签位置在 html 页面中是否相关？

> ID：13250640
> 
> 赞同：2
> 
> 时间：2012-11-06T12:02:49.067
> 
> 标签：html, tags, position, head

我想知道标题标签是否位于 <head> 标签的末尾或任何其他位置，总是在 <head></head> 内，会导致某种问题，我不是在谈论SEO 的东西，我说的是标准、浏览器规则、Web 应用程序规则或类似的东西。

我想从这样的两个不同的 php 文件加载页面，这是错误的方式吗？

```
<!-- file1.php -->
<html>
<head> 
....

<!-- file2.php -->
<title><?php echo($var)?>
</head> 
<body>
... 
```

<head> 标签未关闭，因为我使用第二个文件动态添加 <title> 标签

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:05:20.913

标题必须在`<head>`

如果您在其中使用非ASCII，那么它确实应该*在*任何`<meta>`指定字符编码之后。

因为它很重要，所以将它放在顶部附近可能是个好主意，`<head>`这样它就会被只抓取文档前 $n 个字节的工具拾取。

# c# - 在文本框中阻止双字节字符

> ID：13250642
> 
> 赞同：1
> 
> 时间：2012-11-06T12:03:06.030
> 
> 标签：c#, wpf, textbox, passwordbox

我正在开发 WPF .net 3.5 应用程序。

由于内置密码箱存在安全问题，我需要创建自己的密码箱。新的 PasswordwordBox 基于常规 TextBox。

一切正常，只有 WPF Passwordbox 中的双字节字符被阻止，我想将此行为也添加到我的新 PasswordBox 中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T13:02:17.217

由于您实际上希望阻止 IME 显示字符，因此您应该为密码框禁用 IME，而不是尝试阻止具有高代码点的字符。

要为某个 WPF 文本框禁用 IME，请使用：[`InputMethod.SetIsInputMethodEnabled(myTextBox, false)`](http://msdn.microsoft.com/en-us/library/system.windows.input.inputmethod.setisinputmethodenabled.aspx).

# mysql - SQL 语法错误 - Haversine 公式

> ID：13250645
> 
> 赞同：4
> 
> 时间：2012-11-06T12:03:16.173
> 
> 标签：mysql, sql, join

我正在尝试使用[Haversine 公式](http://en.wikipedia.org/wiki/Haversine_formula)从 WordPress 数据库中[获取最近的位置](https://stackoverflow.com/questions/4645490/get-nearest-places-google-maps-mysql-spatial-data/4979891)

我的表结构如下

**帖子**

```
+--------------+
| Field        |
+--------------+
| ID           |
| post_author  |
| post_title   | 
| post_type    | 
+--------------+ 
```

**后元**

```
+--------------+
| Field        |
+--------------+
| meta_id      |
| post_id      |
| meta_key     |
| meta_value   |
+--------------+ 
```

并有记录`meta_key`值`latitude`和`longitude`

有关我用来获取纬度和经度的 SQL，请参阅[我上一个问题的答案。](https://stackoverflow.com/questions/13249724/selecting-a-join-tables-column-values-as-result-column-name)

```
SELECT p.ID, 
  p.post_title, 
  p.post_author,
  max(case when pm.meta_key='latitude' then pm.meta_value end) latitude,
  max(case when pm.meta_key='longitude' then pm.meta_value end) longitude
FROM `wp_posts` p
LEFT JOIN `wp_postmeta` pm
  on p.ID=pm.post_id 
WHERE p.post_type='place' 
  AND (pm.meta_key='latitude' OR pm.meta_key='longitude') 
GROUP BY p.ID, p.post_title, p.post_author
ORDER BY p.ID ASC 
```

现在我想将上面的查询合并到[这个问题的答案中](https://stackoverflow.com/questions/4645490/get-nearest-places-google-maps-mysql-spatial-data/4979891#4979891)

```
SELECT item1, item2, 
    ( 3959 * acos( cos( radians(37) ) 
                   * cos( radians( lat ) ) 
                   * cos( radians( lng ) 
                       - radians(-122) ) 
                   + sin( radians(37) ) 
                   * sin( radians( lat ) ) 
                 )
   ) AS distance 
FROM geocodeTable 
HAVING distance < 25 
ORDER BY distance LIMIT 0 , 20; 
```

以下是通过组合查询

```
SELECT ID, 
  post_title, 
  post_author,
  max(case when meta_key='latitude' then meta_value end) latitude,
  max(case when meta_key='longitude' then meta_value end) longitude,
  ( 3959 * acos( cos( radians(18.204540500000) ) 
                   * cos( radians( latitude ) ) 
                   * cos( radians( longitude ) 
                       - radians(-66.450958500000) ) 
                   + sin( radians(18.204540500000 ) 
                   * sin( radians( latitude ) ) 
                 )
   ) AS distance 
FROM `wp_posts` 
LEFT JOIN `wp_postmeta` 
  on ID=post_id 
WHERE post_type='place' 
  AND (meta_key='latitude' OR meta_key='longitude') 
GROUP BY ID, post_title, post_author
ORDER BY ID ASC 
```

但这会产生语法错误

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AS distance FROM `wp_posts` LEFT JOIN `wp_postmeta` on ID=post_id WHERE po' at line 13 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T12:09:22.803

你错过了`)`第一个结束`sin()`

```
( 3959 * acos( cos( radians(18.204540500000) ) 
                   * cos( radians( latitude ) ) 
                   * cos( radians( longitude ) 
                       - radians(-66.450958500000) ) 
                   + sin( radians(18.204540500000 ) ) /* <--- here */
                   * sin( radians( latitude ) ) 
              )
 ) AS distance 
```

虽然很难直观地发现，但我通过将您的代码复制到支持大括号匹配的文本编辑器中找到了这一点。强烈建议使用一个，如果不是用于查询开发和测试，那么至少用于调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:53:19.960

尝试这个：

```
SELECT *, ( 3959 * ACOS( COS( RADIANS(18.204540500000) ) 
                   * COS( RADIANS( latitude ) ) 
                   * COS( RADIANS( longitude ) 
                       - RADIANS(-66.450958500000) ) 
                   + SIN( RADIANS(18.204540500000 ) )
                   * SIN( RADIANS( latitude ) ) 
                 )
   ) AS distance  
FROM 
(SELECT ID, 
  post_title, 
  post_author,
  MAX(CASE WHEN meta_key='geo_latitude' THEN meta_value END) latitude,
  MAX(CASE WHEN meta_key='geo_longitude' THEN meta_value END) longitude
FROM `wp_posts` 
LEFT JOIN `wp_postmeta` 
  ON ID=post_id 
WHERE post_type='place' 
  AND (meta_key='geo_latitude' OR meta_key='geo_longitude') 
GROUP BY ID, post_title, post_author
ORDER BY ID ASC) AS A 
```

# wordpress - Wordpress 中自定义帖子类型的分页不起作用？

> ID：13250647
> 
> 赞同：2
> 
> 时间：2012-11-06T12:03:23.397
> 
> 标签：wordpress, post, pagination

自定义类型帖子中的分页代码

```
<?php  $paged = ( get_query_var('paged') ) ? get_query_var('paged') : 1; // For pagination

$loop = new WP_Query( array('post_type' => 'Portfolio','posts_per_page' => 3,'orderby'=> 'menu_order',
'paged'=>$paged ) ); ?> //For implementing pagination
<?php if ($loop->have_posts()): ?>
<?php while ($loop->have_posts()) : $loop->the_post(); ?> <div id="latestproimg">
<a href="<?php the_permalink(); ?>" rel="bookmark">
<?php the_post_thumbnail('large', array('title' => false)); ?></a>
</div>
<div id="latestpostser">
<h2 class="entry-title"><a href="<?php the_permalink(); ?>" rel="bookmark">
<?php echo get_the_title(); ?></a></h2> //displaying the title
<?php //echo get_the_excerpt(); ?>
<?php //the_content( 'Read the full post »' ); ?> // for displaying the content
</div>
<div class="clr"></div>
<?php endwhile;
endif; ?> 
```

请告诉我代码中的错误在哪里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:41:37.080

即使我已经放置了 $page 选项，我也遇到了这个奇怪的分页问题，​​但是解决了我的问题的方法是尝试将**分页**参数更改为get_query_var 函数的**页面**

```
$paged = ( get_query_var('page') ) ? get_query_var('page') : 1; // For pagination 
```

让我知道它是否有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-18T17:00:14.057

`get_query_var('paged')`如果永久链接设置将 url 更改为类似`http://domain.com/page/2/...`. 因此，@IoQ 答案的更灵活版本是，

```
$search_values['paged'] = (get_query_var('paged')) ? get_query_var('paged')
: ((get_query_var('page')) ? get_query_var('page') : 1); 
```

如果永久链接设置为类似 postname 或是`paged=xx`url 的一部分，则此方法有效

# android - 在Android中模拟iOS 4文件夹动画

> ID：13250652
> 
> 赞同：2
> 
> 时间：2012-11-06T12:03:47.247
> 
> 标签：android, android-layout, android-animation

我正在尝试在 Android 中模拟 iOS4 文件夹的外观。我的布局中有一个按钮，按下时我想要`expand`一个带有其他按钮或图像的视图，并且屏幕的其余部分被按下。

这是一个演示 iOS 4 文件夹如何工作的示例视频：[http](http://www.youtube.com/watch?v=Z6ZwC8TGwXo) ://www.youtube.com/watch?v= Z6ZwC8TGwXo (0:44)

是否有与此类似的任何库或示例代码？或者也许有一些关于如何实现这一目标的迹象？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:31:56.370

我发现一些看起来非常类似于 iOS 文件夹动画的东西。这是一个自定义动画，详细信息如下：http: [//udinic.wordpress.com/2011/09/03/expanding-listview-items/](http://udinic.wordpress.com/2011/09/03/expanding-listview-items/)

# qt - 是否可以有一个 QFileDialog 允许“仅文件”或“仅目录”？

> ID：13250654
> 
> 赞同：2
> 
> 时间：2012-11-06T12:03:51.980
> 
> 标签：qt, user-interface, pyside, qfiledialog

对于 QFileDialog，是否可以选择文件或目录，在同一 UI 上为用户提供选择（例如用户在过滤器中选择不同文件类型并相应更新文件列表的方式）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:12:44.713

我做了一些研究，并在 IRC ppl 的帮助下找到了一个更简单的解决方案。基本上添加一个小部件（复选框，适合这个）并将其连接到文件对话框就可以了。

（这实际上是别人的答案，我已经改进和布置了。感谢他；）。如果其他人在这里绊倒，请在此处发布答案以供参考）。

```
from sys import argv

from PySide import QtGui, QtCore

class MyDialog(QtGui.QFileDialog):
    def __init__(self, parent=None):
        super (MyDialog, self).__init__()
        self.init_ui()

    def init_ui(self):
        cb = QtGui.QCheckBox('Select directory')
        cb.stateChanged.connect(self.toggle_files_folders)
        self.layout().addWidget(cb)

    def toggle_files_folders(self, state):
        if state == QtCore.Qt.Checked:
            self.setFileMode(self.Directory)
            self.setOption(self.ShowDirsOnly, True)
        else:
            self.setFileMode(self.AnyFile)
            self.setOption(self.ShowDirsOnly, False)
            self.setNameFilter('All files (*)')

def main():
    app = QtGui.QApplication(argv)
    dialog = MyDialog()
    dialog.show()
    raise SystemExit(app.exec_())

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:02:24.200

是的。这是一种方法：

在标题中，声明您的`QFileDialog`指针：

```
class buggy : public QWidget
{
    Q_OBJECT
public:
    buggy(QWidget *parent = 0);
    QFileDialog *d;
public slots:
    void createDialog();
    void changeDialog();
}; 
```

在您的实现中，设置`QFileDialog::DontUseNativeDialog`选项（您必须在 Mac OS 上执行此操作，但我没有在其他地方测试过），然后覆盖适当的窗口标志以使您的对话框按您喜欢的方式显示。

最后，添加一个按钮（或复选框）调用一个函数来改变你的文件模式`QFileDialog`：

```
buggy::buggy(QWidget *){
    //Ignore this, as its just for example implementation
    this->setGeometry(0,0,200,100);
    QPushButton *button = new QPushButton(this);
    button->setGeometry(0,0,100,50);
    button->setText("Dialog");
    connect( button, SIGNAL(clicked()),this,SLOT(createDialog()));
    //Stop ignoring and initialize this variable
    d=NULL;
}
void buggy::createDialog(void){
      d = new QFileDialog(this);
      d->setOption(QFileDialog::DontUseNativeDialog);
      d->overrideWindowFlags(Qt::Window | Qt::WindowTitleHint | Qt::WindowSystemMenuHint | Qt::WindowCloseButtonHint | Qt::MacWindowToolBarButtonHint);
      QPushButton *b = new QPushButton(d);
      connect(b,SIGNAL(clicked()),this,SLOT(changeDialog()));
      b->setText("Dir Only");
      switch(d->exec()){
          default:
          break;
      }
      delete(d);
      d=NULL;
}

//FUNCTION:changeDialog(), called from the QFileDialog to switch the fileMode.

void buggy::changeDialog(){
    if(d != NULL){
    QPushButton *pb = (QPushButton*)d->childAt(5,5);
    if(pb->text().contains("Dir Only")){
        pb->setText("File Only");
        d->setFileMode(QFileDialog::Directory);
    }else{
        pb->setText("Dir Only");
        d->setFileMode(QFileDialog::ExistingFile);
    }
    }
} 
```

# c++ - 以附加模式打开管道

> ID：13250657
> 
> 赞同：0
> 
> 时间：2012-11-06T12:03:55.847
> 
> 标签：c++, linux, mkfifo

我正在尝试打开一个fifo管道，一个线程写入该管道，同步都很好。但是，出于可以理解的原因，我需要以附加模式打开它。

当我按如下方式打开它时：

```
 ret_val = mkfifo(lpipename.c_str(), 0666);
        if((pipehandler = open(lpipename.c_str(), O_RDWR)) < 1) 
    {
        perror("Failed to open pipe file");
        syslog(LOG_ERR, "Failed to open pipe file");
        exit(1);
    } 
```

我没有任何问题，当我的文件夹“ls”时，我可以看到标记为黄色的管道

但是当我尝试如下打开管道时，在附加模式下：

```
 ret_val = mkfifo(lpipename.c_str(), 0666);
    if((pipehandler = open(lpipename.c_str(), O_RDWR| O_APPEND)) < 1) 
    {
        perror("Failed to open pipe file");
        syslog(LOG_ERR, "Failed to open pipe file");
        exit(1);
    } 
```

我根本看不到文件夹中的管道。作为记录，我在任何一个选项中都没有收到错误有人知道为什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:12:43.550

如果多个进程同时将数据附加到一个文件，O_APPEND 可能会导致 NFS 文件系统上的文件损坏。这是因为 NFS 不支持附加到文件，所以客户端内核必须模拟它，这在没有竞争条件的情况下无法完成。

可能是这个原因，更多详情请查看以下链接

[http://www.kernel.org/doc/man-pages/online/pages/man2/open.2.html](http://www.kernel.org/doc/man-pages/online/pages/man2/open.2.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T22:28:03.670

这是一个先进先出。除了追加之外，它还能做什么？我相信附加是常态，因此无论你如何打开它，它都会附加。

# sql - 使用第一个结果查询第二个表

> ID：13250660
> 
> 赞同：0
> 
> 时间：2012-11-06T12:04:13.033
> 
> 标签：sql, sql-server-2008

我需要将两个表绑定到一个数据集中。我有三个名为 Student、StudentMarks 的表。

在这里，如果我知道 studentId，我可以像这样查询学生表

```
DataSet ds=new DataSet();

SqlCommand cmd=new SqlCommand("
SELECT * 
FROM STUDENTS
WHERE STUDENTID=1; 
SELECT *
FROM STUDENTS
WHERE STUDENTID=1");

SqlDataAdapter da=new SqlDataAdapter(cmd);
da.Fill(ds); 
```

像这样。这样我就可以访问这两个表，例如 ds.Table[0] 和 ds.Table[1]。

但我的问题是，如果我不知道 studentid，并且如果我想查询所有学生以及他们的分数，并且我必须在两个不同的表中获取这些详细信息，我该如何获取？

如果我加入这两个表，结果将在一个表中，我不知道该怎么做，有人可以帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:10:57.333

试试这个;

```
SELECT
  s.*
FROM STUDENTS s
INNER JOIN StudentMarks m ON s.STUDENTID = m.STUDENTID ;

SELECT
  m.*
FROM STUDENTS s
INNER JOIN StudentMarks m ON s.STUDENTID = m.STUDENTID ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:08:01.353

> 我想查询所有学生以及他们的分数，我必须在两个不同的表中获取这些详细信息，我该如何获取？

为什么要在两个不同的表中获取两个不同表的详细信息？

您可以`JOIN`使用两张表，但这只会给您一组，如下所示：

```
SELECT
  s.*, 
  m.*
FROM STUDENTS s
INNER JOIN StudentMarks m ON s.STUDENTID = m.STUDENTID ;
-- You can add WHERE s.STUDENTID = 1 here as well; 
```

但是，您可以将这些连接的选择限制为`s.*`或`m.*`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T12:33:00.457

您可以使用[DataTable.Select()](http://msdn.microsoft.com/en-us/library/system.data.datatable.select.aspx)方法来获取您需要的学生 ID 的行，如下所示：

```
for (int i = 0; i < ds.Tables[0].Rows.Count)
{
    int studentID = ds.Tables[0].Rows[i].Field<int>("StudentID");
    DataRow[] rows = ds.Tables[1].Select(string.Format("WHERE StudentID = {0}", studentID));
    //Do something with your mark rows here
} 
```

[或者您可以使用DataRelations](http://msdn.microsoft.com/en-us/library/dbwcse3d%28v=vs.80%29.aspx)定义数据集中的关系：

```
//Add a primary key to the student table so you can search on StudentID
ds.Tables[0].PrimaryKey = new DataColumn[] { ds.Tables[0].Columns["StudentID"] };

//Add the relationship between "StudentID" columns in each table
ds.Relations.Add(ds.Tables[0].Columns["StudentID"], ds.Tables[1].Columns["StudentID"]);

//Check if the table contains the given StudentID
if (ds.Tables[0].Rows.Contains(studentID))
{
    //Get all child rows associated with this Student ID
    DataRow[] rows = ds.Tables[0].Rows.Find(studentID).GetChildRows();
} 
```

# ios - 有没有类似 UIWebView 的解决方案？

> ID：13250662
> 
> 赞同：0
> 
> 时间：2012-11-06T12:04:25.353
> 
> 标签：ios, uiwebview, uiscrollview

我在我的应用程序中使用 a`UIWebView`来呈现内容，但现在我不能再这样做了，因为我还需要使用 a`UIScrollView`并且它会产生与滚动相关的冲突。而且，`UIWebView`速度很慢。

所以我的问题是：还有其他方法可以加载包含 HTML 标签（strong、p、div 等）的字符串吗？

**更新（改进的解释）**

我`UIVIewController`在顶部包含一个图像，在这个图像下是一个标题，在标题下是内容（来自网络的 HTML 字符串）。问题是当文本太大时，webview 是滚动的，而不是整个页面。我希望整个页面滚动，而不仅仅是 webview。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:14:01.807

你不会得到比原生 UIWebView 更快或更好的东西。可能你应该过度考虑你的 UI/UX。你到底想用滚动视图中的 webview 实现什么？

也许属性字符串对你来说就足够了。查一下。OHAttributedLabel 甚至可以为您解析 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:36:51.100

解决了。

```
 -(void)webViewDidFinishLoad:(UIWebView *)webView {
    NSString *output = [webView stringByEvaluatingJavaScriptFromString:@"document.body.scrollHeight;"];
    int webViewHeight = [output intValue];
    //NSLog(@"height: %d", webViewHeight);

    if(webViewHeight > 220){

        CGRect frame = articleContentWebView.frame;
        frame.size.height = webViewHeight;
        articleContentWebView.frame = frame;

        int scrollViewheight = 416 + (webViewHeight - 220);
        [articleScrollView setContentSize:CGSizeMake(320, scrollViewheight)];

    }

} 
```

在委托方法 webViewDidFinishLoad 中，我计算 UIWebView 内容的高度，然后设置 UIWebVIew 的高度和 UIScrollView 的高度。

# php - 更新 Twitter 状态错误

> ID：13250663
> 
> 赞同：0
> 
> 时间：2012-11-06T12:04:27.183
> 
> 标签：php, twitter, oauth, status

我正在使用我的应用程序更新 Twitter 状态并遇到问题。

```
stdClass Object ( [request] => /1/statuses/update.json [error] => Could not authenticate you. ) 
```

但是我仅在 2 分钟前进行了身份验证，并且使用下面给出的代码再次显示相同的错误。

```
if(strlen($status)>=140)
    {
        $status = substr($status,0,139);
    }
    if($E_oauth_token != "" && $E_oauth_token_secret != "")
    {
        try
        {
            $twitteroauth = new TwitterOAuth(YOUR_CONSUMER_KEY, YOUR_CONSUMER_SECRET, $E_oauth_token, $E_oauth_token_secret);
            $access_token = $twitteroauth->getAccessToken($tweet_verifier);
            $params = array('status' =>  $status);
            print_r($twitteroauth->post('statuses/update', $params));
        }
        catch(exception $e)
        {
              echo $e;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T05:57:04.460

我已经找到了解决方案，并在此站点上进行了解释，您可以轻松查看。

有两种类型的 oauth 令牌，一种是临时的，而对于这种临时令牌，我们必须在此处获得永久令牌的解释[Twitter OAuth in PHP](http://www.phpgang.com/twitter-oauth-in-php_175.html)。

# javascript - 为什么在 JavaScript 中使用 if (myBoolean === true) 是个好习惯？

> ID：13250664
> 
> 赞同：1
> 
> 时间：2012-11-06T12:04:27.557
> 
> 标签：javascript

作为这个问题的后续：[是否有理由在 JavaScript 条件中编写“if (myBoolean == true)”？](https://stackoverflow.com/questions/13250176/is-there-ever-a-reason-to-write-if-myboolean-true-in-a-javascript-conditi)-

为什么在 JavaScript 中使用 if (myBoolean === true) 是个好习惯？作为一个相对缺乏经验的 JavaScript 用户，我试图弄清楚在哪些特定的现实世界场景中，您最终会得到一个可能是布尔真值或“真实”值的值，以便您需要检查 if (myBoolean === true) 而不是 if (myBoolean)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T12:06:59.893

我将挑战这个问题的前提：我认为这不是好的做法，我也不认为这是一个普遍的共识。:-)

使用的唯一原因`=== true`是如果您不确定它`myBoolean`实际上是一个布尔值，并且如果不是，您希望结果为假。有一些用例，但它们非常有限。99.9% 的情况下，就`if (myBoolean)`足够了，即使对于`1`、`"foo"`和其他真实值也是如此。

有时出于其他原因使用严格相等是个好主意，因为如果操作数属于不同类型，JavaScript 的松散相等规则非常复杂。但是，如果您将某物用作标志，那么使用`===`它几乎没有任何意义。

* * *

我见过`===`使用布尔值的一个特殊地方是在受 jQuery 启发的代码中，其中回调函数可以通过返回来取消操作`false`，但不必返回任何内容*。*当一个函数没有明确的返回值时，调用该函数的结果是`undefined`，这当然是错误的。所以想要检查函数是否返回的代码**`false`**，而不仅仅是`undefined`，会这样做：

```
if (callback(args) === false) {
    // The callback explicitly returned false (not just a falsey value), cancel
    // ...
} 
```

但这是一个*相对*不常见的用例，当然它涉及`=== false`而不是`=== true`......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:25:47.240

我构建了一个稍微复杂的答案，然后意识到主要原因在于虚假值而不是真实值。通常，一个函数返回一种东西，并且只有一个假值（字符串函数的空字符串，或数字的 0，或其他）。

但是，当您不确定是否定义了某些内容时，它可能具有指导意义：

```
waitForResponse(request, 5000);
if(!request.ResponseValue) {
    alert('Server failed to respond');
} 
```

对比

```
waitForResponse(request, 5000);
if(request.ResponseValue === 'false') {
    alert('Server says no');
} 
```

虽然我认为你应该检查 undefined 而不是 boolyness：

```
if(typeof request.ResponseValue === 'undefined') {
   //...
} 
```

顺便说一句，`typeof`速度很快，至少我上次检查时是在 Chrome 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:11:57.133

一些随机的例子：

```
function CreateSomeObject(param)
{
   if (param == "1")
   {
      return new Stuff();
   }

   return null;
}

var myBoolean = CreateSomeObject("1") || true;

if (myBoolean === true)
{
  //doesn't execute
}

if (myBoolean)
{
   //executes just fine
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T12:21:00.847

在 null only 的情况下，您想这样做，尽管我从未使用过它，因为它感觉更像是冗长和长字符串。使用它或避免它都没有问题。您想要编写代码更多的是风格。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T12:48:22.163

就个人而言，我不喜欢这样*的陈述，比如 x 是好的做法*。IMO，这完全取决于上下文：如果您想检查某个对象是否存在，`if(objectX)`将执行 as `if (objectX === undefined)`or`if (typeof objectX === 'undefined')`和 even `if (typeof objectX == 'undefined')`。

像 Douglas Crockford 这样的人强烈主张使用值和类型检查 ( `===`) 的原因是，虚假和真实值在极少数情况下会产生意想不到的结果：

```
var falsy = '';
if (falsy)
{//only when falsy is truthy, but an empty string is falsy
    console.log('could be seen as counter-intuitive: var was declared and assigned an empty string, but is falsy');
}
var obj = {falsy:''}
if (!obj.falsy)
{
   console.log('I might assume falsy is not set, although it was:');
   console.log(obj.hasOwnProperty('falsy'));//true
} 
```

同样，这可能只是我的意见，但在绝大多数情况下，这不会破坏您的代码。我什至会更进一步：Douglas Crockford 可能会声称使用检查虚假值不是一个好主意，但他确实喜欢逻辑 OR ( `||`) 运算符：

```
var falsy ='';
var someVar = falsy || 'default value';//this relies heavily on falsy values 
```

严格比较的唯一*“可靠”*论据是：

*   如果您*需要*将变量设为布尔值，但随后再次`falsy = !!falsy;`强制转换为布尔值
*   严格比较稍微快一点，但你必须做很多比较才能注意到差异

话虽如此，我确实倾向于使用严格的比较，这可能是个人的事情，但我想*知道*变量的实际类型是什么：
鉴于`'1' == 1`计算结果为真，但`'1' === 1`为假，它在至少允许您将 var 强制为您需要的类型：

```
var foo = '00001';
var elements = [foo = ('00000' + (+(foo)+1)).substr(-5)];
while(elements[+(foo)-1])
{
    foo = ('00000' + (+(foo)+1)).substr(-5);
    elements.push(foo = ('00000' + (+(foo)+1)).substr(-5));
} 
```

现在这不是你所说*的好代码*，但是有很多类型的杂耍正在进行。在旅程结束时，您可能想知道分配给 的值是什么`foo`。这不是此代码段中的问题，但假设您想在 while 循环中使用 foo 的数值，如果它是奇数：

```
var foo = '00001';
var elements = [foo = ('00000' + (+(foo)+1)).substr(-5)];
while(elements[+(foo)-1])
{
    foo = ('00000' + (+(foo)+1)).substr(-5);
    elements.push(foo = ('00000' + (+(foo)+1)).substr(-5));
    if (+(foo)%2 === 1)
    {
        foo = +(foo);
        //do stuff with foo
    }
} 
```

最简单的判断天气与否的方法`foo`是在循环完成后`foo`直接检查：`if (foo === +(foo))`
我很清楚这个例子有点牵强，但我遇到过一个和这个很相似的案例。有时，强类型语言的优势才真正显现出来。说到这：`new Date() >= someDateObject`vs `Date() >= someDateObject`...在您的控制台中尝试一下，您很快就会看到我在说什么。

# ruby-on-rails - 如何制作日志旋转导轨 3.2.8 版本

> ID：13250665
> 
> 赞同：1
> 
> 时间：2012-11-06T12:04:28.187
> 
> 标签：ruby-on-rails, ruby-on-rails-3, logging, ruby-on-rails-3.2

如何在 Rails 版本 3.2.8 的生产环境中进行日志轮换？

我已经查看了[Ruby on Rails 生产日志轮换](https://stackoverflow.com/questions/4883891/ruby-on-rails-production-log-rotation)，但适用于旧版 Rails。

我使用 nginx + 独角兽

我在哪里可以找到有关此的更多信息？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T14:32:05.430

这个 shell 脚本对我有用。我设置了 cron 来每天晚上执行这个脚本，就在午夜之前。您需要将目录调整为您自己的应用程序。请注意，目录引用是相对于我的应用程序的根目录的。“kill”命令告诉主 unicorn 进程重新加载，它会自动创建一个新的 production.log 和 unicorn.log 文件。

```
#!/bin/bash
# Rotates unicorn.log and production.log files located
# in the <application_root>/log folder.
# Deletes compressed logs older than 60 days.
NOW=`date +%Y%m%d_%H%M%S`
cd /home/deployer/apps/stations/current
mv log/production.log log/production_$NOW.log
mv log/unicorn.log log/unicorn_$NOW.log
kill -s USR1 `cat tmp/pids/unicorn.pid`
sleep 1
gzip log/production_$NOW.log
gzip log/unicorn_$NOW.log
find log/ -type f -mtime +60 -name "*.gz" -delete 
```

# c# - 我可以在 AutoCompleteExtender 中显示超链接吗？

> ID：13250674
> 
> 赞同：1
> 
> 时间：2012-11-06T12:05:09.670
> 
> 标签：c#, asp.net, ajax, autocompleteextender

我可以创建一个字符串列表<> 并将其显示在 AutoCompleteExtender 中，但我怎样才能使这些建议成为可点击的链接？我想，我可以创建一个超链接对象列表，但它们只是在列表中显示为 [Object]。有什么建议么？

简而言之，我希望能够单击 AutoSuggest 列表中的建议。

我需要使用某种客户端脚本吗？

# c++ - LuaBind 获取函数名

> ID：13250675
> 
> 赞同：0
> 
> 时间：2012-11-06T12:05:13.167
> 
> 标签：c++, function, luabind

如何找出哪个 Lua 函数调用了我的 C++ 函数，如果 C++ 函数由 luabind 在脚本中导出，使用 MVS 中的调用堆栈？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:14:14.980

您可以使用函数 lua_getstack 和 lua_getinfo 来检索各种有用的调试信息，包括调用堆栈。

# asp.net - 如何“热身”实体框架？什么时候“冷”？

> ID：13250679
> 
> 赞同：118
> 
> 时间：2012-11-06T12:05:22.273
> 
> 标签：asp.net, asp.net-mvc, entity-framework, asp.net-mvc-4, entity-framework-5

不，我第二个问题的答案不是冬天。

**前言：**

我最近一直在对 Entity Framework 进行大量研究，一直困扰我的是它在查询未预热时的性能，即所谓的冷查询。

我浏览了 Entity Framework 5.0 的[性能注意事项](http://msdn.microsoft.com/en-us/data/hh949853.aspx)文章。作者介绍了**暖**查询和**冷**查询的概念以及它们之间的区别，我自己也注意到了这一点，但并不知道它们的存在。在这里可能值得一提的是，我背后只有六个月的经验。

现在我知道如果我想在性能方面更好地理解框架，我还可以研究哪些主题。不幸的是，Internet 上的大多数信息都已过时或带有主观性，因此我无法找到有关*暖*与*冷*查询主题的任何其他信息。

到目前为止，我基本上注意到的是，每当我必须重新编译或回收命中时，我的初始查询都会变得非常慢。正如预期的那样，任何后续数据读取都很快（*主观*）。

我们将迁移到 Windows Server 2012、IIS8 和 SQL Server 2012，作为一名初级学生，我实际上为自己赢得了在其他人之前测试它们的机会。我很高兴他们引入了一个预热模块，可以让我的应用程序为第一个请求做好准备。但是，我不确定如何继续预热我的实体框架。

我已经知道值得做的事情：

*   按照建议提前生成我的意见。
*   最终将我的模型移动到一个单独的组件中。

通过常识，我考虑做的事情**可能是错误的方法**：

*   在应用程序启动时读取虚拟数据以预热、生成和验证模型。

**问题：**

*   在任何时候在我的实体框架上获得高可用性的最佳方法是什么？
*   在什么情况下实体框架会再次“变冷”？（重新编译、回收、IIS重启等）

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-11-28T12:58:41.060

*   在任何时候在我的实体框架上获得高可用性的最佳方法是什么？

您可以混合使用预生成的视图和静态编译查询。

静态[CompiledQuery](http://msdn.microsoft.com/en-us/library/bb896297.aspx)很好，因为它们编写起来既快速又容易，并且有助于提高性能。但是，对于 EF5，没有必要编译所有查询，因为 EF 会自动编译查询本身。唯一的问题是这些查询在缓存被扫描时可能会丢失。因此，您仍然希望保留对您自己编译的查询的引用，这些查询仅发生非常罕见但代价高昂。如果您将这些查询放入静态类中，它们将在首次需要时进行编译。对于某些查询，这可能为时已晚，因此您可能希望在应用程序启动期间强制编译这些查询。

正如您提到的，预生成视图是另一种可能性。特别是对于那些需要很长时间编译并且不会改变的查询。这样，您就可以将性能开销从运行时转移到编译时。这也不会引入任何滞后。但是当然这种变化会传递到数据库，所以处理起来并不容易。代码更灵活。

不要使用大量的 TPT 继承（这是 EF 中的一般性能问题）。既不要将继承层次结构构建得太深也不要太宽。只有 2-3 个特定于某个类的属性可能不足以要求自己的类型，但可以作为现有类型的可选（可为空）属性处理。

不要长时间坚持单一的上下文。每个上下文实例都有自己的一级缓存，当它变大时会降低性能。上下文创建很便宜，但上下文缓存实体内的状态管理可能会变得很昂贵。其他缓存（查询计划和元数据）在上下文之间共享，并将与 AppDomain 一起消失。

总而言之，您应该确保频繁分配上下文并仅在短时间内使用它们，以便您可以快速启动应用程序，编译很少使用的查询并为性能关键且经常使用的查询提供预生成的视图。

*   在什么情况下实体框架会再次“变冷”？（重新编译、回收、IIS重启等）

基本上，每次您丢失 AppDomain 时。IIS 每[29 小时](https://serverfault.com/questions/348493/why-does-the-iis-worker-process-recycle-every-29-hours-and-not-every-24-hours)执行一次重新启动，因此您永远无法保证您的实例会存在。同样在一段时间没有活动后，AppDomain 也会关闭。你应该尝试再次快速上来。也许您可以异步进行一些初始化（但要注意多线程问题）。您可以在没有请求阻止 AppDomain 死亡时使用在应用程序中调用虚拟页面的计划任务，但它最终会死亡。

我还假设当您更改配置文件或更改程序集时，将会重新启动。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-27T14:13:09.000

如果您正在寻找所有调用的最佳性能，您应该仔细考虑您的架构。例如，当应用程序加载时，在服务器 RAM 中预先缓存常用的查找而不是在每个请求上使用数据库调用可能是有意义的。这种技术将确保常用数据的应用程序响应时间最短。但是，您必须确保有一个行为良好的过期策略，或者在进行影响缓存数据的更改时始终清除缓存，以避免并发问题。

通常，您应该努力设计分布式架构，以便仅在本地缓存的信息变得陈旧或需要进行事务处理时才需要基于 IO 的数据请求。任何“在线”数据请求的检索时间通常比本地内存缓存检索长 10-1000 倍。与“本地与远程”数据问题相比，仅这一事实就经常使关于“冷数据与热数据”的讨论变得无关紧要。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-29T05:43:26.110

一般提示。

*   执行严格的日志记录，包括*访问的内容*和*请求时间*。
*   在初始化您的应用程序以热启动您从上一步中提取的*非常慢的请求时执行虚拟请求。*
*   除非它是一个真正的问题，否则不要费心优化，与应用程序的消费者沟通并询问。如果只是为了弄清楚*什么需要优化*，就可以轻松地拥有一个持续的反馈循环。

现在来解释为什么虚拟请求不是*错误的方法*。

*   *降低复杂性*- 您正在以一种无论框架变化如何都能正常工作的方式来预热应用程序，并且您不需要找出可能时髦的 API/框架内部结构来*以正确的方式*进行操作。
*   *更大的覆盖范围*- 您正在同时预热与慢速请求相关的所有缓存层。

解释缓存何时“冷”。

这发生在*框架*中应用缓存的任何层，[性能页面顶部](http://msdn.microsoft.com/en-us/data/hh949853.aspx)有一个很好的描述。

*   当缓存过时的潜在更改后必须验证缓存时，这可能是超时或更智能（即缓存项中的更改）。
*   [当缓存项被驱逐时，执行此操作的算法在您链接的性能文章](http://msdn.microsoft.com/en-us/data/hh949853.aspx)中的“缓存驱逐算法”部分中进行了描述，但简而言之。
    *   LFRU（最不常用 - 最近使用）缓存命中计数和年龄，限制为 800 个项目。

您提到的其他事情，特别是重新编译和重新启动 IIS 会清除部分或全部内存缓存。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-14T20:37:14.710

正如您所说，使用“预先生成的视图”这就是您真正需要做的。

[从您的链接](http://msdn.microsoft.com/en-us/data/hh949853.aspx)中提取：“生成视图时，它们也会被验证。从性能的角度来看，视图生成的绝大部分成本实际上是视图的验证”

这意味着在您构建模型装配时会发生性能冲击。然后，您的上下文对象将跳过“冷查询”并在上下文对象生命周期以及后续的新对象上下文期间保持响应。

执行不相关的查询只会消耗系统资源。

捷径...

1.  跳过预生成视图的所有额外工作
2.  创建您的对象上下文
3.  触发那个甜蜜的无关查询
4.  然后在您的过程中保留对您的对象上下文的引用（不推荐）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-23T15:13:14.850

我没有这个框架的经验。但是在其他情况下，例如 Solr，除非您可以缓存整个 DB（或索引），否则完全虚拟读取将没有多大用处。

更好的方法是记录查询，从日志中提取最常见的查询并使用它们进行预热。请确保在继续之前不要记录预热查询或将它们从日志中删除。

# c# - 验证数字文本框

> ID：13250680
> 
> 赞同：0
> 
> 时间：2012-11-06T12:05:26.080
> 
> 标签：c#, validation

我正在尝试验证一个文本框以检查它是否输入了电话号码类型值。

我遇到的问题是，即使在这些文本框中输入例如：“blah”，Regex 仍然返回 false，并且没有显示错误消息。

```
Regex staffNumVal = new Regex(@"^[a-z]+$");

if (staffNumVal.IsMatch(txtStaffHPhone.Text)||(staffNumVal.IsMatch(txtStaffHourRate.Text)))
{
   MessageBox.Show("Please enter a numeric value");
} 
```

有没有更好的方法来做到这一点，我错过了？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:07:14.633

代替

```
Regex staffNumVal = new Regex(@"^[a-z]+$"); 
```

利用

```
Regex staffNumVal = new Regex(@"^[0-9]+$");

if (staffNumVal.IsMatch(txtStaffHPhone.Text)||(staffNumVal.IsMatch(txtStaffHourRate.Text)))
{
  //Valid
}
else
{
  MessageBox.Show("Please enter a numeric value");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:08:15.087

```
Regex staffNumVal = new Regex(@"^\d*$"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:28:06.647

您的 RegEx 没有按照您的预期执行。

我认为'^'放错了位置。它应该是：@"[^az]+$"。

但即使这样也是错误的，因为它接受 & 之类的东西。

您可以在以下位置进行测试：[http ://regexhero.net/tester/](http://regexhero.net/tester/)

但我认为使用 MaskedTestBox 会更好。你试过吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T12:07:46.377

像这样试试

```
int value;
if (int.TryParse(txtStaffHPhone.Text, out value))
{
    // it's a valid integer 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T12:12:29.720

```
Regex regex = new Regex(@"^\d$"); 
```

请参阅详细信息：[Regex 仅用于数字](https://stackoverflow.com/questions/273141/regex-for-numbers-only)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-06T12:08:00.830

导入 Microsoft.VisualBasic 并使用它！

```
if (Microsoft.VisualBasic.Information.IsNumeric("5"))
{
//Do Something
} 
```

# web-services - “已经存在”的状态码

> ID：13250681
> 
> 赞同：3
> 
> 时间：2012-11-06T12:05:28.873
> 
> 标签：web-services, http, rest, webserver

类似于 HTTP 状态代码 500-Internal Server Error,200-OK,201 Created 等...是否有任何代码“已经存在”作为来自服务器的响应，在尝试创建新对象时（如果对象与存在相同的值）？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:09:29.530

如果您的客户发送一个像[这里](https://www.rfc-editor.org/rfc/rfc2616#section-14.26)`If-None-Match`描述的 -header ：

> "If-None-Match: *" 的含义是，如果源服务器选择的表示存在 [...]，则不能执行该方法，如果表示不存在，则应该执行该方法

然后，如果存在相同的资源，您可以响应 412 Precondition Failed：

> 如果给定“*”并且该资源**存在任何当前实体**，则服务器不得执行请求的方法，除非需要这样做，因为资源的修改日期无法匹配在 If-Modified-Since 头字段中提供的日期请求。[...] 服务器必须以 412 状态响应（前提条件失败）。

您也可以使用 Etag 代替 *（意思是“如果存在任何东西”），它基本上是服务器计算的实体的校验和。您可以通过相同的 Etag 检测相同的实体。

# regex - 重命名文件时替换和添加前导零

> ID：13250694
> 
> 赞同：4
> 
> 时间：2012-11-06T12:06:12.920
> 
> 标签：regex, perl, bash, rename

请耐心等待，这篇文章会有点长...

我有一堆文件，其中一些具有简单而干净的名称（例如 1E01.txt），而另一些则具有很多附加功能：

```
Sample2_Name_E01_-co_032.txt
Sample2_Name_E02_-co_035.txt
...
Sample12_Name_E01_-co_061.txt 
```

等等。这里重要的是“Sample”后面的数字和“ *Name* ”后面的字母+数字——其余的都是一次性的。如果我去掉不重要的部分，文件名将减少为与“干净”文件名（2E01.txt、2E02.txt、...、12E01.txt）相同的模式。我设法用以下表达式重命名了文件（我自己想出了这个，不知道是否非常优雅但工作正常）：

```
rename -v 's/Sample([0-9]+)_Name_([A-Z][0-9]+).*/$1$2\.txt/' *.txt 
```

现在，第二部分是为只有一位数字的文件名添加前导零，例如 1E01.txt 变成 01E01.txt。我已经设法做到了这一点（在另一个 StackExchange 帖子中找到并修改了它）：

```
rename -v 'unless (/^[0-9]{2}.*\.txt/) {s/^([0-9]{1}.*\.txt)$/0$1/;s/0*([0-9]{2}\..*)/$1/}' *.txt 
```

所以我终于想到了我的问题：有没有办法在一个重命名命令中合并两个表达式？我知道我可以做一个 bash 脚本来自动化这个过程，但我想要的是找到一个一次性重命名解决方案。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-06T12:13:10.123

您可以尝试使用此命令重命名`1-file.txt`为`0001-file.txt`

```
# fill zeros
$ rename 's/\d+/sprintf("%04d",$&)/e' *.txt 
```

您可以稍微更改命令以满足您的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:15:22.830

好吧，如果那是您的“解析”正则表达式，那么您就是在限制脚本可以作用于与该模式匹配的文件。因此，[**`sprintf`**](http://perldoc.perl.org/functions/sprintf.html)使用相同的文字字符串不是更特殊的情况，您可以这样做：

```
s{Sample(\d+)_Name_(\p{IsUpper})(\d+)}
 {sprintf "Sample%02d_Name_%s%03d", $1, $2, $3}e
 ; 
```

在这里，您再次使用相同的已知功能并简单地格式化随附的数字。

*   该[`/e`开关](http://perldoc.perl.org/perlre.html#Modifiers)用于 'eval'，它会为每个匹配评估替换为 Perl。
*   我将您的一些表达式重命名为更标准的字符类符号：`[A-Z]`成为属性类`\p{IsUpper}`，`[0-9]`成为数字代码`\d`（也可能`\p{IsDigit}`）。

# visual-studio-2012 - 从 TeamCity 发布 vs2012 解决方案

> ID：13250695
> 
> 赞同：19
> 
> 时间：2012-11-06T12:06:13.640
> 
> 标签：visual-studio-2012, web-deployment, teamcity-7.0, msbuild-wpp

我正在使用 Visual Studio 2012 和发布功能。我创建了一个发布配置文件，将我的应用程序部署到开发服务器，并且在我的机器上从 vs2012 执行时效果很好。这是我的问题；在开发服务器上，我还安装了 TeamCity，我想在构建完成后触发发布。所以我创建了一个简单的构建步骤，如下所示：

```
Build file path: .\src\Solution.sln
Targets: Rebuild
Command line parameters: /p:DeployOnBuild=true;PublishProfile=Ci 
```

执行此步骤时，我收到以下错误：

```
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Web\Microsoft.Web.Publishing.targets(4377, 5): error ERROR_USER_NOT_ADMIN: Web deployment task failed. 
(Connected to 'dev.domain.com' using the Web Deployment Agent Service, but could not authorize. Make sure you are an administrator on 'dev.domain.com'. 
```

Ci 配置文件包含一个用户名和密码，当我在我的机器上从 Visual Studio 运行发布时可以使用该用户名和密码。我也尝试在构建步骤中将用户名和密码作为参数传递，但我得到了相同的结果。我是否需要在管理员帐户下运行 TeamCity 服务才能使其正常工作？所有建议表示赞赏。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-06T03:05:01.740

我刚刚在[http://sedodream.com/2013/01/06/CommandLineWebProjectPublishing.aspx](http://sedodream.com/2013/01/06/CommandLineWebProjectPublishing.aspx)上写了一篇博客。

你很接近，希望我能缩小差距。

您在 VS 发布对话框中指定了用户名和密码是正确的，但我们没有将密码保存在 .pubxml 文件中。它当前保存在 .pubxml.user 文件中，并且该文件根本不用于命令行方案。因此，您需要通过该属性。所以在你的情况下应该是

```
msbuild .\src\solution.sln /p:DeployOnBuild=true /p:PublishProfile=ci /p:Password=<insert-password> 
```

如果您的 Web 服务器没有受信任的证书，您可能还需要传入`/p:AllowUntrustedCertificate=true`.

一个小补充可能与您的问题没有直接关系，但可能对稍后可能会看到的其他人有所帮助。如果您正在构建 .csproj/.vbproj 文件（*并且可能在某些使用 .sln 文件的情况下*），您应该传入该属性`/p:VisualStudioVersion=11.0`。更多信息可在我的博客[http://sedodream.com/2012/08/19/VisualStudioProjectCompatabilityAndVisualStudioVersion.aspx](http://sedodream.com/2012/08/19/VisualStudioProjectCompatabilityAndVisualStudioVersion.aspx)

# java - 向 caroufredsel 幻灯片添加文本

> ID：13250696
> 
> 赞同：0
> 
> 时间：2012-11-06T12:06:19.743
> 
> 标签：java, jquery, html, slideshow, caroufredsel

嘿，这应该是一个简单的修复，但是我似乎无法弄清楚出现了问题。我得到了要显示的文本，但每张幻灯片中的文本同时显示，即使 li 标签内的每个 div ......任何帮助都会很棒，在此先感谢。

```
<div class="image_carousel">  
                                <ul id="foo2">
                                    <li><img src="img/slideshow/slide1.jpg" style="border:none;" alt="Image 1" /><div class="headertext">TEST 1</div></li>
                                    <li><img src="img/slideshow/slide2.jpg" style="border:none;"  alt="Image 2" /><div class="headertext">TEST 2</div></li>
                                    <li><img src="img/slideshow/slide3.jpg" style="border:none;"  alt="Image 3" /><div class="headertext">TEST 3</div></li>
                                    </ul>
                <div class="clearfix"></div>
                <div class="pagination" id="foo2_pag"></div>
                <div id="overlay"></div>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:43:50.760

如果无法查看您的 CSS，则很难区分可能是什么问题。

文本应该与图像一起移动，因为它在同一个列表项中，这让我相信你的“headertext”div 会有一些绝对定位（或类似的东西），导致它不会与图像一起滑动。

如果您有指向您的 CSS 或网站的链接，我可能会给您一个更好的主意。

# javascript - 如何使用 angularjs 对 HTML 列表进行渐进式增强？

> ID：13250700
> 
> 赞同：6
> 
> 时间：2012-11-06T12:06:32.783
> 
> 标签：javascript, angularjs, progressive-enhancement

假设我有一个可访问的站点，该站点将在禁用 JS 的情况下进行咨询。

我有一个新闻列表，我可以这样总结：

```
<ul>
    <li>News 1</li>
    <li>News 2</li>
    <li>News 3</li>
</ul> 
```

每次重新加载页面时，都会添加最新的新闻，如果超过 10 条新闻，旧的将被丢弃。

现在，如果我使用 Angulard JS，我必须将数据放入模型和 ng-repeat，并摆脱我的静态 HTML。该列表将动态填充，因此使用 JS 的人将看到几乎实时更新的列表。

我需要的是让两者一起工作。我需要静态列表，如果激活了 JS，我希望将当前元素插入模型中并由 angularjs 管理。

现在我目前的做法是：

*   当我的模型初始化时，将列表 DOM 分开，手动提取数据，并删除所有子列表
*   在列表中注入角度模板代码
*   让 Angular 发挥它的魔力

这很糟糕，因为你失去了 angular 的声明性优点，而且你有很多锅炉代码甚至不是通用的，所以你为页面中的每个小部件重写它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:14:22.087

在使用一些 js 框架时，这是一个很好的问题。

目前我只是隐藏静态 html 并在启用 javascript 时显示角度 DOM。

您需要注入与您生成的静态 html 等效的 js 模型，这不是很好（不是 DRY），但尝试从 DOM 获取初始数据将更难维护恕我直言。您可以将所有 javascript/模板捆绑在一个 js 文件中，这样静态页面将只有一个脚本导入，并且页面权重不会受到 noscript 查看器的影响。

# java - 没有主类的ant java jar

> ID：13250701
> 
> 赞同：0
> 
> 时间：2012-11-06T12:06:44.763
> 
> 标签：java, ant, jar

我需要 ant java jar 执行一个没有 Main-Class 属性创建的 jar 文件。ant Java 任务的文档说 jar 文件必须有一个 Main-Class 清单。
有什么办法吗？

抱歉之前有错别字

用于创建 JAR 的 build.xml 的一部分 - 没有 Main-Class

```
<target name = "createJar" depends = "javac">
<jar destfile = "./sampleJar.jar"
     basedir = "build/classes"
 />
</target> 
```

现在我想

```
<java jar /> 
```

这个 jar 文件通过将类名作为某种参数传递。可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:48:18.537

试试这个：

```
<java classname="my.package.ClassWithMain">
     <classpath>
       <pathelement location="sampleJar.jar"/>
       <pathelement path="${java.class.path}"/>
     </classpath>
</java> 
```

`my.package.ClassWithMain`是具有 main 方法的类的完全限定名称，类路径应指向包含该 jar 的 jar。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T14:48:23.903

您将指示 Ant 的`java`任务使用 jar 文件作为类路径并直接运行主类，而不是运行 jar 文件。例如。使用以下任务，取自[任务的](http://ant.apache.org/manual/Tasks/java.html)[文档`java`](http://ant.apache.org/manual/Tasks/java.html)：

```
 <java classname="test.Main">
   <classpath>
     <pathelement location="./sampleJar.jar"/>
     <pathelement path="${java.class.path}"/>
   </classpath>
 </java> 
```

当然，您必须`test.Main`为您的用例调整主类的名称。

# javascript - 禁用 Telerik MVC 网格验证

> ID：13250704
> 
> 赞同：0
> 
> 时间：2012-11-06T12:06:55.633
> 
> 标签：javascript, asp.net-mvc, telerik, telerik-grid, telerik-mvc

我有一个使用 EditorTemplate 的 Telerik 网格：

编辑：
`@ModelType Date
@Html.Telerik.DatePicker.Name(ViewData.TemplateInfo.GetFullHtmlFieldName(String.Empty)).Value(Model)`

在我的视图模型中：
`UIHint("Date")
DisplayFormat(ApplyFormatInEditMode:=True, DataFormatString:="{0:dd-MM-yyyy}")
Public Property data As Date`

我无法让客户端验证工作**，所以我决定禁用它们**。我在 webconfig 中添加（视图和应用程序）
`add key="ClientValidationEnabled" value="false"
add key="UnobtrusiveJavaScriptEnabled" value="false"`

但它仍然试图验证该字段。我想这是网格中的一些属性。
我如何禁用验证？

谢谢。

编辑：

我以简单的形式对此进行了测试，ClientValidationEnabled 和 UnobtrusiveJavaScriptEnabled 都是错误的。所以问题应该出在 Telerik Grid 中，它忽略了这些键并仍然进行验证。如何禁用网格中的验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:20:49.350

您的页面可能正在被缓存。尝试 Ctrl + F5 和/或删除缓存，然后重试。

```
<configuration>
<appSettings>
<add key="ClientValidationEnabled" value="false"/> 
<add key="UnobtrusiveJavaScriptEnabled" value="false"/> 
</appSettings> 
```

我刚试过（都是假的），效果很好。

# sitecore - Sitecore 发送工作流电子邮件

> ID：13250707
> 
> 赞同：1
> 
> 时间：2012-11-06T12:07:08.987
> 
> 标签：sitecore, sitecore-workflow

我想为电子邮件发送配置 Sitecore 工作流引擎。

我查看了使用反射器的“电子邮件操作”实现，

它从参数中读取“邮件服务器”，如下所示。

```
string host = this.GetText(innerItem, "mail server", args); 
```

我们不需要为邮件服务器提供凭据（用户名/密码）吗？还是从 webconfig 获取邮件配置？

我还没有尝试使用 Workflow 发送电子邮件，请帮我配置电子邮件发送模块。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:19:48.440

Sitecore 从 web.config 中的以下属性读取邮件服务器设置：

```
<setting name="MailServer" value="your.mailserver.com" />
<!--  MAIL SERVER USER
      If the SMTP server requires login, enter the user name in this setting
-->
<setting name="MailServerUserName" value="" />
<!--  MAIL SERVER PASSWORD
      If the SMTP server requires login, enter the password in this setting
-->
<setting name="MailServerPassword" value="" />
<!--  MAIL SERVER PORT
      If the SMTP server requires a custom port number, enter the value in this setting.
            The default value is: 25
-->
<setting name="MailServerPort" value="25" /> 
```

这应该足以从 Sitecore 和网络表单发送电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:57:25.447

是的。它从 web.config 读取您的邮件设置。除了您需要配置的所有 Sitecore 邮件设置之外，您还应该在 web.config 的底部添加通用 ASP.NET mailSetting。

```
<system.net>
    <mailSettings>
        <smtp>
            <network host="127.0.0.1" />
        </smtp>
    </mailSettings>
</system.net> 
```

# algorithm - 我需要帮助优化我自己提出的这种压缩算法

> ID：13250713
> 
> 赞同：-1
> 
> 时间：2012-11-06T12:07:38.897
> 
> 标签：algorithm, optimization, compression

我尝试提出一种压缩算法。我对压缩理论做了一点，所以我知道我想出的这个方案很可能根本无法实现压缩。

目前它仅适用于没有连续重复字母/数字/符号的字符串。一旦正确建立，我希望将其推断为二进制数据等。但首先是算法：

假设只有 4 个字母：a,b,c,d；我们创建一个与字母对应的矩阵/数组。每当遇到一个字母时，相应的索引就会增加，以便遇到的最后一个字母的索引始终是最大的。如果索引最初为零，我们将索引增加 2。如果它最初不是零，那么我们将它增加 2+（矩阵中的第二大元素）。一个例子来澄清：

```
Array = [a,b,c,d]
Initial state = [0,0,0,0]
Letter = a
New state = [2,0,0,0]
Letter = b
New state = [2,4,0,0]
.
.c
.d
.
New state = [2,4,6,8]
Letter = a
New state = [12,4,6,8] 
//Explanation for the above state: 12 because Largest - Second Largest - 2 = Old value
Letter = d
New state = [12,4,6,22]
and so on... 
```

解压就是这个逻辑的逆向。

压缩的基本实现（在python中）：

（这个函数非常初级，所以不是最好的代码......我知道。一旦我得到正确的核心算法，我就可以优化它。）

```
def compress(text):
    matrix = [0]*95     #we are concerned with 95 printable chars for now
    for i in text:
        temp = copy.deepcopy(matrix) 
        temp.sort()
        largest = temp[-1]
        if matrix[ord(i)-32] == 0:
            matrix[ord(i)-32] = largest+2
        else:
            matrix[ord(i)-32] = largest+matrix[ord(i)-32]+2
    return matrix 
```

然后将返回的矩阵用于解压缩。现在是棘手的部分：

我根本不能真正调用这种压缩，因为从函数生成的矩阵中的**每个数字对于长度为 50000 的字符串的数量级为 10**200。因此存储矩阵实际上比存储原始字符串占用更多空间。**我知道……完全没用。但在做这一切之前，我曾希望我可以使用矩阵的数学属性以某种数学简写形式有效地表示它。我尝试了很多可能性，但都失败了。我尝试过的一些事情：

1.  矩阵的秩。失败，因为不是唯一的。

2.  表示使用 mod 函数。失败，因为商或余数

3.  [使用 pickle 将每个整数存储为生成器。](https://stackoverflow.com/questions/13220488/can-i-store-an-iterator-in-a-file-which-i-can-read-from-later-will-this-reduce)

4.  将矩阵存储为位图文件，但整数太大而无法存储为颜色代码。

让我再次迭代该算法可以优化。例如，我们可以添加 1 并继续，而不是添加 2。但不要真正导致任何压缩。代码也一样。稍后进行次要优化...首先我想改进主要算法。

更何况，像我这样一个平庸闲散的头脑的产物，很有可能永远也达不到压缩的效果。在这种情况下，我希望得到您的帮助和想法，了解这可能有用的地方。

**TL;DR：检查描述压缩算法的编码部分。压缩结果比原始字符串长。这可以解决吗？如果是，如何？**

PS：我的电脑上有完整的代码。将在 github 上创建一个 repo 并在一段时间内上传。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T12:21:27.797

压缩本质上是一个预测过程。在输入中寻找模式并使用它们比不太可能更有效地编码更有可能的下一个字符。我在你的算法中看不到任何试图建立预测模型的东西。

# iphone - ios中的视频捕获问题

> ID：13250718
> 
> 赞同：2
> 
> 时间：2012-11-06T12:07:55.570
> 
> 标签：iphone, ios, ipad, camera

> **可能重复：**
> [使用 UIImagePickerController 录制的视频](https://stackoverflow.com/questions/6817920/recored-video-using-uiimagepickercontroller)

我是**iOS 开发**新手。现在我正在开发视频录制应用程序。但我的应用有时会录制视频。有时它会关闭相机给我警告

```
UIImagePickerController: ignoring request to stop video capture; camera is not currently capturing video. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:12:57.260

我正在捕获视频并以这种方式存储在文档目录中：-

```
-(IBAction)cameraLibraryButtonClick:(id)sender{
    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {              
        UIImagePickerController *videoRecorder = [[UIImagePickerController alloc]init];  
        videoRecorder.delegate = self;
        NSArray *sourceTypes = [UIImagePickerController availableMediaTypesForSourceType:videoRecorder.sourceType];
        NSLog(@"Available types for source as camera = %@", sourceTypes);
        if (![sourceTypes containsObject:(NSString*)kUTTypeMovie] ) {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:nil 
                                                            message:@"Device Not Supported for video Recording."                                                                       delegate:self 
                                                  cancelButtonTitle:@"Yes" 
                                                  otherButtonTitles:@"No",nil];
            [alert show];
            [alert release];
            return;
        }
        videoRecorder.sourceType = UIImagePickerControllerSourceTypeCamera;
        videoRecorder.mediaTypes = [NSArray arrayWithObject:(NSString*)kUTTypeMovie];           
        videoRecorder.videoQuality = UIImagePickerControllerQualityTypeLow;
        videoRecorder.videoMaximumDuration = 120;

        self.imagePicker = videoRecorder;                 
        [videoRecorder release];
        [self presentModalViewController:self.imagePicker animated:YES];
        newMedia = YES;
    }
    else {
        [self displaysorceError];
    }

}

-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

        NSURL *videoURL = [info objectForKey:UIImagePickerControllerMediaURL];
        NSData *videoData = [NSData dataWithContentsOfURL:videoURL];
        //self.fileManager = [NSFileManager defaultManager];
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory , NSUserDomainMask, YES);

        NSString *ZipLibrary = [paths objectAtIndex:0];

    NSString *FileFullPath = [ZipLibrary stringByAppendingPathComponent:@"%@.mp4"];

    NSLog(@"Ziplinrnr oadfjaidfjidfjidjfid %@",FileFullPath);
        [videoData writeToFile:FileFullPath atomically:YES];

    [self dismissModalViewControllerAnimated:YES];

}

-(void)displaysorceError{
    UIAlertView *alt = [[UIAlertView alloc] 
                        initWithTitle:@"Error" 
                        message:@"Camera Image Sorce Not Available" 
                        delegate:nil cancelButtonTitle:@"OK" 
                        otherButtonTitles:nil];
    [alt show];
    [alt release];
} 
```

# android - 无法从 Android 中的 EditText 控件读取文本

> ID：13250723
> 
> 赞同：0
> 
> 时间：2012-11-06T12:08:04.193
> 
> 标签：android, layout, nullpointerexception, android-edittext

我有一个使用自定义布局的 AlertDialog。在 OnClick 事件中，我想读取用户输入的内容，所以我这样做：

```
//Login Dialog
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            // Get the layout inflater
            LayoutInflater inflater = this.getLayoutInflater();

            // Inflate and set the layout for the dialog
            // Pass null as the parent view because its going in the dialog layout
            builder.setView(inflater.inflate(R.layout.dialog_signin, null))
            .setPositiveButton(R.string.tvLoginTitle, new DialogInterface.OnClickListener() {
                   @Override
                   public void onClick(DialogInterface dialog, int id) {
                       String username = ((EditText)findViewById(R.id.loginUsername)).getText().toString();
                       String password = ((EditText)findViewById(R.id.loginPassword)).getText().toString();
                       System.out.println(username);
                       System.out.println(password);
                       ConnectionID.loginToServer(cMainActivity, username, password);
                   }
               })
               .setNegativeButton(R.string.btnExit, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       System.exit(0);

                   }
               }).show(); 
```

但是当我想阅读里面的内容时，我总是得到一个 NullPointerException 来自 dialog_signin 的布局看起来像：

```
<EditText
    android:id="@+id/loginUsername"
    android:inputType="textEmailAddress"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="16dp"
    android:layout_marginLeft="4dp"
    android:layout_marginRight="4dp"
    android:layout_marginBottom="4dp"
    android:hint="@string/tvUsername" />
<EditText
    android:id="@+id/loginPassword"
    android:inputType="textPassword"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="4dp"
    android:layout_marginLeft="4dp"
    android:layout_marginRight="4dp"
    android:layout_marginBottom="16dp"
    android:fontFamily="sans-serif"
    android:hint="@string/tvPassword"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:11:01.183

如果用户名和密码是属于对话框的字段，则应按以下代码所示进行：

编辑：

```
View v = inflater.inflate(R.layout.dialog_signin, null);
builder.setView(v); 
String username = ((EditText)v.findViewById(R.id.loginUsername)).getText().toString();       
String password = ((EditText)v.findViewById(R.id.loginPassword)).getText().toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:14:25.663

使用以下内容：

```
View v=inflater.inflate(R.layout.dialog_signin, null); 
```

并替换：

```
String username = ((EditText)findViewById(R.id.loginUsername)).getText().toString();
String password = ((EditText)findViewById(R.id.loginPassword)).getText().toString(); 
```

和

```
String username = ((EditText)v.findViewById(R.id.loginUsername)).getText().toString();
String password = ((EditText)v.findViewById(R.id.loginPassword)).getText().toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:19:14.953

与 Dialog 一起使用，如下所示，它将很有用并且对我有用，

```
Dialog builder = new Dialog(this);
builder.setContentView(R.layout.dialog_signin);

String username = ((EditText)builder.findViewById(R.id.loginUsername)).getText().toString();
String password = ((EditText)builder.findViewById(R.id.loginPassword)).getText().toString();

//Your buttons

builder.show(); 
```

# php - php中的星号金字塔

> ID：13250725
> 
> 赞同：-8
> 
> 时间：2012-11-06T12:08:09.293
> 
> 标签：php

我在创建星号金字塔时遇到问题。请看我的代码。

```
 <?php

    for($i=1;$i<=5;$i++){
        for($j=1;$j<=$i;$j++){
                    echo "*";
        }
        echo "<br />";
    }

    ?> 
```

结果：

```
*
**
***
****
***** 
```

我的问题是我将如何做到这一点。

```
 *
   * *
  * * *
 * * * * 
* * * * * 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T12:30:38.920

```
<pre><?php

$n = $i = 5;

while ($i--)
    echo str_repeat(' ', $i).str_repeat('* ', $n - $i)."\n";

?></pre> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-01T13:37:04.197

`<center> </center>`在标签中使用相同的程序！喜欢：

```
<center>
<?php

    for($i=1;$i<=5;$i++){
        for($j=1;$j<=$i;$j++){
                    echo "*";
        }
        echo "<br />";
    }

?>
</center> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-06T12:14:07.360

使用 HTML 空格字符来生成空格：  

所以是这样的：

```
<?php
// pyramid height
$height = 5;

for($i=1;$i<=$height;$i++){

    for($t = 1;$t <= $height-$i;$t++)
    {
        echo "&nbsp;&nbsp;";
    }

    for($j=1;$j<=$i;$j++)
    {
        // use &nbsp; here to procude space after each asterix
        echo "*&nbsp;&nbsp;";
    }
echo "<br />";
}

?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T12:22:01.363

尝试这个

```
$height = 5;

$space = $height;
for($i = 1; $i <= $height; $i++) {
    echo str_repeat(' ', --$space);
    for($j=1;$j<=$i;$j++){
        if($j > 1) {
            echo ' ';
        }
        echo '*';
    }
    echo '<br />';
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-06T12:22:25.323

```
create_pyramid("*", 5);

function create_pyramid($string, $level) {
    echo "<pre>";
    $level = $level * 2;
    for($i = 1; $i <= $level; $i ++) {
        if (!($i % 2) && $i != 1)
            continue;   
        print str_pad(str_repeat($string, $i),($level - 1) * strlen($string), " " , STR_PAD_BOTH);
        print PHP_EOL;
    }
} 
```

来自[Baba](https://stackoverflow.com/users/1226894/baba)上面发布的[链接](https://stackoverflow.com/a/12800236/1226894)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-14T13:42:24.607

```
$n = 5;
$i = 0;

for($i=1; $i<=$n; $i++){

    echo "<pre>";   
    echo str_repeat("&nbsp;", $n-$i);
    echo str_repeat("#&nbsp;", $i);
} 
```

# php - PHP Pagination 包含搜索功能和排序

> ID：13250727
> 
> 赞同：0
> 
> 时间：2012-11-06T12:08:13.243
> 
> 标签：php, mysql, pagination

任何人都知道如何设置我正在寻找的这个分页的好地方或好的教程？

在你生气我在这里发布数百行之前，让我快速解释一下我想要实现的目标，我用来更好地解释我的情况的代码。

如果您只想分页或只想搜索，下面的代码可以工作：
1\. 进入主页，分页工作。点击第 1 页、第 2 页等，你会得到你期望的结果。
2.使用搜索，它可以工作，但这会在一页内提供所有记录而不受限制。我可以设置一个限制，但分页仍然不起作用。

我只是不知道如何获取搜索变量并将其添加到分页中。

是否有可能有一个像这样的网址：search=Hello+World?orderby=custforename+custsurname?page=3..我认为它是......这样的东西，'?nested get variables？叫？有人知道高级分页教程的好地方吗？

* * *

我在我的主页上使用此代码：

```
<?php
    if(isset($_POST['search']))
    {
        $search = $_POST['search'];
        $search = ltrim($search, " ");
        $terms = explode(" ", $search);
        $customerlistquery = "
                            SELECT *
                            FROM customer
                            LEFT JOIN company
                            ON customer.compid=company.compid
                            WHERE
                            ";
        $i = 0;
        foreach ($terms as $each) 
        {
            if ($i++ > 0) 
            $customerlistquery .= ' OR ';

            $customerlistquery .= "concat(custsurname, custforename, custmidname, custpostal, custphone1, custphone2, custfax, custnamecode, datemodified, modifiedby) LIKE '%$each%' ";
        }
        $customerlistquery .= " ORDER BY $orderby ASC";
    }
    else
    {
        $page = (int) (!isset($_GET["page"]) ? 1 : $_GET["page"]);
        $startpoint = ($page * $limit) - $limit;
        $customerlistquery = "  
                SELECT *
                FROM customer
                LEFT JOIN company
                ON customer.compid=company.compid
                ORDER BY $orderby ASC 
                LIMIT {$startpoint}, {$limit}
                ";
        echo pagination("customer
                LEFT JOIN company
                ON customer.compid=company.compid
                ORDER BY $orderby ASC",$limit,$page);       
    }
?>

$result=mysql_query($itemslistquery) or die("query fout " . mysql_error() ); 
```

最后是 pagination.php 代码：

```
<?php
    function pagination($query, $per_page = 10,$page = 1, $url = '?'){        
        $query = "SELECT COUNT(*) as `num` FROM {$query}";
        $row = mysql_fetch_array(mysql_query($query));
        $total = $row['num'];
        $adjacents = "2"; 

        $page = ($page == 0 ? 1 : $page);  
        $start = ($page - 1) * $per_page;                               

        $prev = $page - 1;                          
        $next = $page + 1;
        $lastpage = ceil($total/$per_page);
        $lpm1 = $lastpage - 1;

        $pagination = "";
        if($lastpage > 1)
        {   
            $pagination .= "<ul class='pagination'>";
                    $pagination .= "<li class='details'>Page $page of $lastpage</li>";
            if ($lastpage < 7 + ($adjacents * 2))
            {   
                for ($counter = 1; $counter <= $lastpage; $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<li><a class='current'>$counter</a></li>";
                    else
                        $pagination.= "<li><a href='{$url}page=$counter'>$counter</a></li>";                    
                }
            }
            elseif($lastpage > 5 + ($adjacents * 2))
            {
                if($page < 1 + ($adjacents * 2))     
                {
                    for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)
                    {
                        if ($counter == $page)
                            $pagination.= "<li><a class='current'>$counter</a></li>";
                        else
                            $pagination.= "<li><a href='{$url}page=$counter'>$counter</a></li>";                    
                    }
                    $pagination.= "<li class='dot'>...</li>";
                    $pagination.= "<li><a href='{$url}page=$lpm1'>$lpm1</a></li>";
                    $pagination.= "<li><a href='{$url}page=$lastpage'>$lastpage</a></li>";      
                }
                elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))
                {
                    $pagination.= "<li><a href='{$url}page=1'>1</a></li>";
                    $pagination.= "<li><a href='{$url}page=2'>2</a></li>";
                    $pagination.= "<li class='dot'>...</li>";
                    for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
                    {
                        if ($counter == $page)
                            $pagination.= "<li><a class='current'>$counter</a></li>";
                        else
                            $pagination.= "<li><a href='{$url}page=$counter'>$counter</a></li>";                    
                    }
                    $pagination.= "<li class='dot'>..</li>";
                    $pagination.= "<li><a href='{$url}page=$lpm1'>$lpm1</a></li>";
                    $pagination.= "<li><a href='{$url}page=$lastpage'>$lastpage</a></li>";      
                }
                else
                {
                    $pagination.= "<li><a href='{$url}page=1'>1</a></li>";
                    $pagination.= "<li><a href='{$url}page=2'>2</a></li>";
                    $pagination.= "<li class='dot'>..</li>";
                    for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)
                    {
                        if ($counter == $page)
                            $pagination.= "<li><a class='current'>$counter</a></li>";
                        else
                            $pagination.= "<li><a href='{$url}page=$counter'>$counter</a></li>";                    
                    }
                }
            }

            if ($page < $counter - 1){ 
                $pagination.= "<li><a href='{$url}page=$next'>Next</a></li>";
                $pagination.= "<li><a href='{$url}page=$lastpage'>Last</a></li>";
            }else{
                $pagination.= "<li><a class='current'>Next</a></li>";
                $pagination.= "<li><a class='current'>Last</a></li>";
            }
            $pagination.= "</ul>\n";      
        }

        return $pagination;
    } 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:27:13.887

如果你想通过 GET 传递超过 1 个变量，你必须像这样使用它：

url?var1=x&var2=y&var3=z

在 PHP 中，您可以像这样恢复它们：

```
$var1=$_GET['var1'];
$var2=$_GET['var2'];
$var3=$_GET['var3']; 
```

关于您的“分页器”问题，我通常只进行 1 次查询，然后在客户端使用 javascript 对其进行分页，这样我就可以更改页面而无需等待服务器回答。

如果您只想使用 PHP，您应该在查询中设置 'LIMIT x,y'，其中 x 是页面的第一个元素，y 是要在一个页面中显示的元素数。例如，如果您要显示 50 个元素的页面：

```
$x=50*($pagenumber-1); //the index of the 1st element is 0
$y=50;
$query="SELECT * FROM table LIMIT $x,$y"; 
```

像这样的东西应该可以正常工作。

# c - 指向数组的指针 - c 编程

> ID：13250728
> 
> 赞同：-1
> 
> 时间：2012-11-06T12:08:14.200
> 
> 标签：c, arrays, pointers, sizeof, void

> **可能重复：**
> [C 编程语言中数组的大小？](https://stackoverflow.com/questions/1975128/sizeof-an-array-in-the-c-programming-language)
> [为什么 sizeof(param_array) 是指针的大小？](https://stackoverflow.com/questions/11622146/why-sizeofparam-array-is-the-size-of-pointer)

```
void printSizeOfArray(int a[])
{
    printf("%lu\n", sizeof(a));
}

int main()
{
    int it;
    int a[4] = {0};
    printSizeOfArray(a);

    return 0;
} 
```

当我运行代码时，我得到 8。为什么指向数组的指针是 void 类型的指针？

如果指向数组的指针是 void 类型，为什么，当我写：

```
int *it;
int a[4] = {0};
it = a;
printf("%lu\n", sizeof(it)); 
```

它也可以吗？我怎样才能用`int`?

另外，为什么它在第二个中打印 8 而不是 4？它是指向数组 ( `void*`) 而不是`int`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:09:56.377

C 中的数组通常“衰减”为仅指向第一个元素的指针。正如您所注意到的，此指针不保留有关数组大小的任何信息。当一个数组被传递给一个函数时，就会发生这种衰减。

正确的大小只能通过范围内的正确声明来计算。因此，您可以使其适用于函数，但随后数组的大小成为函数原型的一部分，这很少有用：

```
void printSizeOfArray(int a[3]); 
```

这就是为什么典型的 C 代码总是单独传递大小的原因。

基本上，C 对数组的支持是“弱的”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:42:21.140

```
int *a;    // this is a pointer
int arr[]; // this is an array. not a pointer, not a "pointer to void" 
```

`Why is a pointer to an array a pointer of type void?`

*   它不是。这是一个数组。当你将它传递给一个函数时，它会衰减为一个指向`int`. 为什么你认为它是一个`void *`？

`When I run the code I get 8.`

*   这是 64 位系统上指针的大小。尝试这个：

    `int *a;`
    `printf("%d\n", sizeof(a));`

*   您会看到它是 8，因为系统上的指针占用 8 个字节。

`And if a pointer to an array is of type void, why, when I write: int *it = a; It works ok as well? How can I point with an int?`

*   那是因为它衰减成一个指向`int`. 您也可以*使用*a`void *`来指向它，因为它`void *`是无类型的（它可以指向任何东西）。

`Also, why does it print 8 in the second and not 4?`

*   它永远不应该打印 4。你的问题应该是“为什么它打印 8 而不是 32？”。它打印 8 因为这是表示`int`系统上指向 an 的指针的字节数，并且`it`是指向`int`. 如果您这样做了`sizeof(a)`，您应该`<array_size> * sizeof(int)`会`4*8`在您的系统或`32`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:10:09.373

这是因为函数调用中的`arrays`衰减`pointers`，因此当您调用具有数组名称的函数时，函数中的参数实际上是该类型的指针，因此它`sizeof()`为您提供了`pointer`该机器上的大小，这就是它打印 8 的原因

注意一件事：

```
void printSizeOfArray(int a[]) 
```

和

```
void printSizeOfArray(int *a) 
```

是一样的

# java - Sitemesh 3 中的多个正文标签

> ID：13250730
> 
> 赞同：0
> 
> 时间：2012-11-06T12:08:20.893
> 
> 标签：java, freemarker, sitemesh

我一直在我的项目中使用 Sitemesh 3，到目前为止它运行良好。最近我遇到了一个我被卡住的情况。

我的最终视图必须由 2 个 html 文件组成，它们都有自己的和标签。文件1：

```
<html>
    <head>Head1</head>
    <body>body1</body>
</html> 
```

文件2：

```
<html>
    <head>Head2</head>
    <body>body2</body>
</html> 
```

我正在使用 freemarker 包含标签组成视图。因此，组合的 HTML 如下所示：

```
<html>
    <head>Head1</head>
    <body>body1</body>
</html>
<html>
    <head>Head2</head>
    <body>body2</body>
</html> 
```

以下是我的装饰器：

```
<html>
<head>
    <sitemesh:write property='head'/>
</head>
<body>
    <div class="container">
        <sitemesh:write property='body'/>
    </div>
</body>
</html> 
```

但是一旦装饰，我得到的最终输出是：

```
<html>
<head>
    <head>Head1</head>
</head>
<body>
    <div class="container">
        <body>body1</body>
    </div>
</body>
</html> 
```

但预期的输出是

```
<html>
<head>
    <head>
        Head1
        Head2
    </head>
</head>
<body>
    <div class="container">
            body1
            body2
    </div>
</body>
</html> 
```

我遇到了一个[类似的问题](https://stackoverflow.com/questions/5329693/is-it-possible-to-decorate-more-than-once-in-sitemesh)，但该解决方案对我不起作用，因为我不想创建多个装饰器。

我只是想知道在 Sitemesh 3 中是否有可能。如果是，那么如何。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T07:20:07.020

如果您不介意扩展 Sitemesh 3，那么通过在装饰器模板中添加对服务器端包含的支持很容易做到这一点。我在另一个库（[UtterlyIdle](http://code.google.com/p/utterlyidle/)）中正是这样做的。

我使用 StringTemplate 作为我的装饰语言，但这应该可以在 Freemarker 或任何其他模板工具中使用。我添加了一个[PageMap](http://code.google.com/p/utterlyidle/source/browse/src/com/googlecode/utterlyidle/sitemesh/PageMap.java)，然后在我的装饰器模板调用中

```
$include("someUrl").body$ 
```

这会做一个包含，然后使用 Sitemesh 3 引擎解析输出。这使您可以拥有任意数量的包含。

希望这是有道理的

# css - 如何通过css打破div中一行中的文本？

> ID：13250731
> 
> 赞同：3
> 
> 时间：2012-11-06T12:08:21.560
> 
> 标签：css

如果我们的 div 宽度有限，我们如何打破文本，但是我有父 div，它也具有相同的宽度，请建议我们如何通过 CSS 实现它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T12:11:50.030

嗨，现在习惯了

**像这样**

```
div{
white-space: pre-wrap;      /* CSS3 */   
   white-space: -moz-pre-wrap; /* Firefox */    
   white-space: -pre-wrap;     /* Opera <7 */   
   white-space: -o-pre-wrap;   /* Opera 7 */    
   word-wrap: break-word;      /* IE */
} 
```

***[演示](http://tinkerbin.com/R7pel370)***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:10:51.997

在你的 div 上试试这个

```
word-wrap: break-word; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:11:00.867

你可以用 with 来做到这一点[`word-wrap`](http://www.w3schools.com/cssref/css3_pr_word-wrap.asp)。

```
div.yourBox {
  word-wrap: break-word;
} 
```

# c++ - 如何在 BackgroundSubtractorMOG2 中禁用阴影跟踪？

> ID：13250732
> 
> 赞同：3
> 
> 时间：2012-11-06T12:08:30.717
> 
> 标签：c++, opencv, tracking, dropshadow, background-subtraction

我试图在使用 BackgroundSubtractor 算法 BackgroundSubtractorMOG2 时禁用 openCV 中的阴影检测。然而，即使将 bShadowDetection 设置为 false，该算法似乎仍将阴影作为前景对象进行跟踪。

```
cv::BackgroundSubtractorMOG2 bg;
bg.nmixtures = 3;
bg.bShadowDetection = false; 
```

我试图调整 BackgroundSubtractorMOG2 类的不同成员，以便毫无机会地禁用阴影跟踪。[BackgroundSubtractorMOG2 的重要类成员](http://www.opencv.org.cn/opencvdoc/2.3.2/html/modules/video/doc/motion_analysis_and_object_tracking.html#backgroundsubtractormog2)

那些应该与阴影检测有关的东西，例如 bShadowDetection 或 fTau 似乎没有效果。文档中的解释在某种程度上也不够充分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:25:42.427

对于实际使用 OpenCV-2.4.3 的任何人，其他解决方案都不适合，因为参数变量设置为受保护且不可访问。

但即使是当前的 OpenCV（2.4.3）API 文档也是错误的（[http://docs.opencv.org/modules/video/doc/motion_analysis_and_object_tracking.html#backgroundsubtractormog2](http://docs.opencv.org/modules/video/doc/motion_analysis_and_object_tracking.html#backgroundsubtractormog2)）！

您必须通过 Algorithm::create() 方法创建 BackgroundSubtractorMOG2，并使用“detectShadows”等于 0 调用 set 方法。

作为一个例子使用这个：

```
using namespace cv;

Ptr<BackgroundSubtractorMOG2> bg =
    Algorithm::create<BackgroundSubtractorMOG2>("BackgroundSubtractor.MOG2");
bg->set("detectShadows", 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:14:59.710

感谢詹姆斯的回复。通过将 nShadowDetection 设置为 0，如果有人遇到同样的问题，可以减少检测到的阴影量。

```
mog2.nShadowDetection = 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-14T19:45:46.330

我正在使用 OpenCV 2.4.2，我遇到了同样的问题。最后，我可以使用以下代码禁用阴影检测功能：

```
 cv::BackgroundSubtractorMOG2 m_bg;
   m_bg.set("nmixtures",3);
   m_bg.set("detectShadows", false); 
```

# php - 在安装 PHP 时设置 MySQL 配置数据

> ID：13250737
> 
> 赞同：1
> 
> 时间：2012-11-06T12:08:48.900
> 
> 标签：php, mysql, installscript

我为 mysql 表制作了一个安装脚本。我希望用户设置数据库配置。mysql 的配置在 PHP 类中被硬编码为公共变量。

在安装时创建和存储配置数据的最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:21:03.853

我建议使用 .ini 文件。例子：

数据库.config.ini：

```
host = "localhost"
db = "test"
user = "root"
pass = "" 
```

加载配置：

```
$config = parse_ini_file('database.config.ini');
print_r($config);

/*Array
(
    [host] => "localhost"
    [db] => "test"
    [user] => "root"
    [pass] => ""
)*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:08:15.720

使用 PHP fwrite() 为空的 PHP 文件创建内容。内容是用户输入的定义常量。使用这些常量为数据库配置文件设置值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:12:44.510

创建一个接受配置数据的表单，在此过程中将这些内容写入文件或 xml 。然后从文件配置数据中读取

# java - 我正在回避异常并让它传递给 JVM，我不应该得到编译时错误吗？

> ID：13250738
> 
> 赞同：0
> 
> 时间：2012-11-06T12:08:49.600
> 
> 标签：java, exception-handling, throws

示例代码是：-

```
import javax.sound.midi.*;
import java.io.*;

class test{

public void go() throws MidiUnavailableException{
//try{
Sequencer sequencer = MidiSystem.getSequencer();
System.out.println("Got it");
//}

/*catch(Exception ex){
System.out.println("Size Matters");
}*/

/*catch(MidiUnavailableException ex){
System.out.println("I am the incorrect exception");
}*/
}

public static void main(String [] args) throws MidiUnavailableException{
test obj = new test();
//try{
obj.go();
//}
/*catch(MidiUnavailableException mex){
System.out.println("Compiler should catch me");

}*/

}
} 
```

编译代码时我没有得到任何信息；这是否意味着JVM会处理这种情况下的异常？或者如果系统无法提供定序器，那么我的程序将终止？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:17:16.040

当您的 main 方法抛出异常时，执行停止并将堆栈跟踪打印到 stdout 并且 JVM 关闭。

这没有什么奇怪的 - 声明你的 main 抛出异常是可以接受的，只是没有什么可以捕获它们，所以 JVM 所能做的就是爆炸。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T12:17:23.893

既然`main()`也`throws MidiUnavailableException`，你很好。如果抛出这样的异常，`go()`它将冒泡并停止 JVM。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T12:18:58.923

是的。未处理的异常将终止线程。当所有非守护线程终止时，您的程序将终止。如果最后一个线程因异常终止，则退出状态为非零。而且你的程序只有一个线程。

# c# - 从另一个工作表的 VBA（或 C# 控制台应用程序）中访问电子表格的 VBA？

> ID：13250744
> 
> 赞同：0
> 
> 时间：2012-11-06T12:09:14.900
> 
> 标签：c#, excel, vba

我有一批包含大量 VBA 代码的电子表格，我想写一些可以检查函数依赖关系的东西。我正在更改代码，需要找出哪些文件取决于我正在修改的函数。

有没有办法从 C# 控制台应用程序或电子表格 Y 中的 VBA（只是与 X 不同的电子表格）访问电子表格 X 的 VBA 模块/功能？

我想以文本/任何可解析的方式访问 VBA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:29:54.280

[此页面](http://www.cpearson.com/excel/vbe.aspx)包含阅读和编写代码的示例。

您需要添加的参考是这个： ![在此处输入图像描述](../Images/b184094076806e75a0a43a96cfa3c6bf.png)

您最感兴趣的两个部分是：

> 列出模块中
> 的所有过程读取过程声明

# google-apps-script - 如何在脚本中以编程方式隐藏谷歌电子表格中的网格线

> ID：13250745
> 
> 赞同：9
> 
> 时间：2012-11-06T12:09:15.417
> 
> 标签：google-apps-script, google-sheets

是否有编程方式来控制隐藏/取消隐藏 Google 电子表格中的网格线或受保护范围？菜单中有一个选项 - 视图 > 网格线或受保护的范围来执行此操作。但我想在脚本中做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2018-04-16T15:09:20.920

试试`Sheet.setHiddenGridlines(true)`。请参阅[https://developers.google.com/apps-script/reference/spreadsheet/sheet#setHiddenGridlines(Boolean)](https://developers.google.com/apps-script/reference/spreadsheet/sheet#setHiddenGridlines(Boolean))

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-08T03:34:08.307

有点晚了，但这里有一个方便的代码段，通过从 Google Apps 脚本中调用 V4 API 来完成此操作。

为此：

*   您需要在 Google Cloud Console 中为 Sheet 绑定的 Google Apps 脚本项目启用 Sheets v4 API，您可以在脚本编辑器中从 Resources-> Cloud Platform 项目...

*   您可能还需要启用 Sheets V4 API Resources->Advanced Google services...

```
function test() {
  var spreadsheetId = SpreadsheetApp.getActive().getId();
  var sheetId = SpreadsheetApp.getActiveSheet().getSheetId();
  hideGridlines(spreadsheetId, sheetId, false);
}

/**
 * Hide or show gridlines
 *
 * @param {string} spreadsheetId - The spreadsheet to request.
 * @param {number} sheetId - The ID of the sheet.
 * @param {boolean} hideGridlines - True if the grid shouldn't show gridlines in the UI.
 **/
function hideGridlines(spreadsheetId, sheetId, hideGridlines) {
  var resource = {
    "requests": [
      {
        "updateSheetProperties": {
          "fields": "gridProperties(hideGridlines)",    
          "properties": {
            "sheetId": sheetId,
            "gridProperties": {
              "hideGridlines": hideGridlines
            }
          }
        }
      }
    ],
    "includeSpreadsheetInResponse": false,
    "responseIncludeGridData": false,
  }

  Sheets.Spreadsheets.batchUpdate(resource, spreadsheetId)  
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-12T17:13:25.847

我使用命令：

```
sheet.getRange(1,1,maxrows,maxcolumns).setBorder(true,true,true,true,false,false,"white"); 
```

这会将线条颜色更改为白色，与背景相同。然后，网格线被“隐藏”。这对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T23:45:24.567

坏消息，恐怕。我自己花了一个小时寻找相同的答案，但我认为没有！

# javascript - 没有 UI 块的功能流程链

> ID：13250746
> 
> 赞同：1
> 
> 时间：2012-11-06T12:09:19.157
> 
> 标签：javascript, jquery, ajax

我需要在我的 JavaScript/jQuery 中执行几个功能，但我想避免阻塞 UI。

AJAX 不是一个可行的解决方案，因为应用程序的性质，这些功能很容易达到数千个。异步执行此操作将杀死浏览器。

所以，我需要某种方式来链接浏览器需要处理的函数，并且只在第一个函数完成后发送下一个函数。

算法是这样的

> 对于从 2 到 15 的步骤
> 
> > HTTP:GET 当前步骤的项目数量（范围从几百到几千）
> > 
> > > 对于每个项目，HTTP:GET 结果

如您所见，我有两个 GET 请求-“链”我需要以某种方式管理...尤其是最内层的循环使浏览器立即崩溃，如果它是异步完成的-但我仍然希望用户能够操作页面，所以纯（阻塞）同步的方式是行不通的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T13:25:05.800

您可以轻松地异步执行此操作，而无需一次触发所有请求。您需要做的就是管理一个队列。为了清楚起见，以下是伪代码。它很容易转换为真正的 AJAX 请求：

```
// Basic structure of the request queue. It's a list of objects
// that defines ajax requests:
var request_queue = [{
    url : "some/path",
    callback : function_to_process_the_data
}];

// This function implements the main loop.
// It looks recursive but is not because each function
// call happens in an event handler:
function process_request_queue () {
    // If we have anything in the queue, do an ajax call.
    // Otherwise do nothing and let the loop end.
    if (request_queue.length) {
        // Get one request from the queue. We can either
        // shift or pop depending on weather you prefer
        // depth first or breadth first processing:
        var req = request_queue.pop();
        ajax(req.url,function(result){
            req.callback(result);
            // At the end of the ajax request process
            // the queue again:
            process_request_queue();
        }
    }
}

// Now get the ball rolling:
process_request_queue(); 
```

所以基本上我们把 ajax 调用本身变成了一个伪循环。它基本上是递归完成的经典延续传递编程风格。

在您的情况下，请求的一个示例是：

```
request_queue.push({
    url : "path/to/OUTER/request",
    callback : function (result) {
        // You mentioned that the result of the OUTER request
        // should trigger another round of INNER requests.
        // To do this simply add the INNER requests to the queue:

        request_queue.push({
            url : result.inner_url,
            callback : function_to_handle_inner_request
        });
    }
}); 
```

这是非常灵活的，因为您不仅可以选择广度优先或深度优先（shift vs pop）来处理请求。但是您也可以使用 splice 将内容添加到队列的中间，或者使用 unshift 与 push 将请求放在队列的头部以获取高优先级请求。

您还可以通过在每个循环中弹出多个请求来增加同时请求的数量。只需确保`process_request_queue`每个循环只调用一次，以避免同时请求的指数增长：

```
// Handling two simultaneous request channels:
function process_request_queue () {
    if (request_queue.length) {
        var req = request_queue.pop();
        ajax(req.url,function(result){
            req.callback(result);
            // Best to loop on the first request.
            // The second request below may never fire
            // if the queue runs out of requests.
            process_request_queue();
        }
    }
    if (request_queue.length) {
        var req = request_queue.pop();
        ajax(req.url,function(result){
            req.callback(result);
            // DON'T CALL process_request_queue here
            // We only want to call it once per "loop"
            // otherwise the "loop" would grow into a "tree"
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:12:16.493

您可以进行 ASYNC 并使用我前段时间编写的一个[小型库，它可以让您对函数调用进行排队。](https://github.com/alexandernst/jniftilities#functions-queue)

# asp.net-mvc - 在 F# 中设置基本成员值

> ID：13250752
> 
> 赞同：4
> 
> 时间：2012-11-06T12:09:40.963
> 
> 标签：asp.net-mvc, f#

我现在正在尝试在 F# 中实现我自己的基本视图引擎。本质上我是从 VirtualPathProviderViewEngine 继承的。

为此，我需要设置两个视图位置，以便引擎知道在哪里查找视图。在我的 F# 类型中，我从上面继承并尝试将两个视图位置设置如下...

```
type FSharpViewEngine() =
inherit VirtualPathProviderViewEngine()

let viewLocations = [| "~/Views/{1}/{0}.fshtml"; "~/Views/Shared/{0}.fshtml" |]

member this.ViewLocationFormats = viewLocations
member this.PartialViewLocationFormats = viewLocations 
```

上面的代码省略了 VirtualPathProviderViewEngine 所需的覆盖。我运行该项目，我收到一条错误消息说

> 属性“ViewLocationFormats”不能为 null 或为空。

我假设这意味着我没有正确设置上面的两个基本成员。我只是错误地分配了上述内容，还是您怀疑我做错了什么？

作为额外的信息，我在 Global.fs (global.asax) 的启动时添加了 ViewEngine，就像这样......

```
ViewEngines.Engines.Add(new FSharpViewEngine()) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T12:37:47.837

If you just want to *set* properties of a base class, then you do not need `member` or `override`, but instead you need to use the assignment operator `<-` in the constructor. To implement the engine, you'll need to override two abstract methods that it defines, so you'll need something like this:

```
type FSharpViewEngine() =
    inherit VirtualPathProviderViewEngine() 

    let viewLocations = [| "~/Views/{1}/{0}.fshtml"; "~/Views/Shared/{0}.fshtml" |]
    do base.ViewLocationFormats <- viewLocations
       base.PartialViewLocationFormats <- viewLocations

    override x.CreatePartialView(ctx, path) = failwith "TODO!"
    override x.CreateView(ctx, viewPath, masterPath) = failwith "TODO!" 
```

# wpf - WPF Datagrid 中的 WPF 样式问题

> ID：13250753
> 
> 赞同：0
> 
> 时间：2012-11-06T12:09:47.407
> 
> 标签：wpf, datagrid, wpfdatagrid, styling

我有一个 WPF 数据网格，并且已将其与 observablecollection 绑定。它工作正常，但问题是我在运行时在单元格级别应用了样式。下面提到了一个示例方法 ApplyStyleAtCellLevelInDataGrid()。我必须调用此方法两次才能显示 WPF DataGrid 中样式的效果。为什么会这样……

这是 XAML

```
 <Style x:Key="BaseStyle"  TargetType="{x:Type TextBlock}">
     <Setter Property="Background" Value="Transparent"/>
     <Setter Property="Foreground" Value="Black"/>        
     <Setter Property="FontSize" Value="10"/>
     <Setter Property="TextAlignment" Value="Center"/>
 </Style>

<Style TargetType="{x:Type TextBlock}" x:Key="Col1Style" BasedOn="{StaticResource BaseStyle}">

        <Setter Property="Background">
            <Setter.Value>
                <SolidColorBrush Color="Tomato"/>
            </Setter.Value>
        </Setter>            

        <Style.Triggers>
            <EventTrigger RoutedEvent="Binding.TargetUpdated">
                <BeginStoryboard HandoffBehavior="Compose">
                    <Storyboard TargetProperty="(TextBlock.Background).(SolidColorBrush.Color)">
                    <ColorAnimation Duration="0:0:1.5" To="DarkRed"  AutoReverse="True" RepeatBehavior="1" />
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>
        </Style.Triggers>
    </Style> 
```

< 样式 x:Key="DGCellStyle" TargetType="{x:Type DataGridCell}">

```
 <Setter Property="BorderThickness" Value="0" />
        <Setter Property="FontSize" Value="10"></Setter>
        <Setter Property="Foreground" Value="Black"></Setter>           
    </Style> 
```

XAML 中的网格声明

```
<DataGrid Name="dataGrid1"  ItemsSource="{Binding Values}" CellStyle="{StaticResource DGCellStyle}" SnapsToDevicePixels="True" UseLayoutRounding="False">

  <DataGrid.Columns>
      <DataGridTextColumn  Header="Value" Binding="{Binding Value1, Mode=OneWay, NotifyOnTargetUpdated=True}" Width="0.25*"/>
      <DataGridTextColumn Header="Value 1" Binding="{Binding Value2, Mode=OneWay, NotifyOnTargetUpdated=True}" Width="0.25*"/>
      <DataGridTextColumn Header="Value 2" Binding="{Binding Value3, Mode=OneWay, NotifyOnTargetUpdated=True}" Width="0.25*"/>
      <DataGridTextColumn Header="Value 3" Binding="{Binding Value4, Mode=OneWay, NotifyOnTargetUpdated=True}" Width="0.25*"/>
   </DataGrid.Columns>           
 </DataGrid> 
```

代码

```
 private void ApplyStyleAtCellLevelInDataGrid()

    {
        if (Values == null || Values.Count == 0)
        {
            Values = new ObservableCollection<MyClass>();
            Values.Add(new MyClass { Value1 = "1", Value4 = "2", Value2 = "4", Value3 = "3" });
            Values.Add(new MyClass { Value1 = "2", Value4 = "3", Value2 = "5", Value3 = "7" });
            Values.Add(new MyClass { Value1 = "3", Value4 = "4", Value2 = "7", Value3 = "2" });
            Values.Add(new MyClass { Value1 = "4", Value4 = "4", Value2 = "8", Value3 = "6" });
        }
        else
        {
            foreach (var item in Values)
            {
                MyClass c = item as MyClass;
                c.Value1 = _rand.Next(0, 100).ToString();         
                c.Value2 = _rand.Next(0, 100).ToString();
                c.Value3 = _rand.Next(0, 100).ToString();
                c.Value4 = _rand.Next(0, 100).ToString();
            }
        }

        //////////////

        DataGridCell cell = GetCell(1, 1);

        Style defaultStyle = (Style)FindResource("NewStyle");
        ((TextBlock)cell.Content).Style = defaultStyle;

        cell = GetCell(1, 2);
        defaultStyle = (Style)FindResource("NewStyleExtended");
        ((TextBlock)cell.Content).Style = defaultStyle;

        cell = GetCell(2, 2);
        defaultStyle = (Style)FindResource("NewStyle");
        ((TextBlock)cell.Content).Style = defaultStyle;

        cell = GetCell(2, 3);
        defaultStyle = (Style)FindResource("Col1Style");
        ((TextBlock)cell.Content).Style = defaultStyle;
    }

 private void Window_Loaded(object sender, RoutedEventArgs e)
    {         
// Single call of this method does not work,

I have to call two times then it shows the effect

        ApplyStyleAtCellLevelInDataGrid(); 
        ApplyStyleAtCellLevelInDataGrid();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:07:42.893

在 App.xaml 添加

`"xmlns:dg="http://schemas.microsoft.com/wpf/2008/toolkit"`在应用程序标签中。

在`<Application.Resources>`标签中添加

```
<Style x:Key="ColumnHeaderStyle" TargetType="{x:Type dg:DataGridColumnHeader}">
    <Setter Property="HorizontalAlignment" Value="Center" />
</Style>

<Style x:Key="CellRightAlign" TargetType="{x:Type dg:DataGridCell}">
    <Setter Property="HorizontalAlignment" Value="Right" />
</Style> 
```

现在在将`AutoGeneratedColumns`事件添加到数据网格的代码中

```
Style RightAlign = (Style)FindResource("CellRightAlign");
yourGrid.Columns[0].CellStyle = RightAlign; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:12:58.850

将您的样式`TargetType`从 a更改`TextBlock`为 a `DataGridCell`，然后将样式应用为`DataGrid.CellStyle`. 由于您已经`CellStyle`设置了 to `DGCellStyle`，因此您可能必须合并这两种样式。

此外，您需要更改`TextAlignment`为`HorizontalAlignment`您的基本样式，因为`TextAlignment`它不是`DataGridCell`

```
<Style x:Key="BaseStyle"  TargetType="{x:Type DataGridCell}">
     <Setter Property="Background" Value="Transparent"/>
     <Setter Property="Foreground" Value="Black"/>        
     <Setter Property="FontSize" Value="10"/>
     <Setter Property="HorizontalAlignment" Value="Center"/>
 </Style>

<Style TargetType="{x:Type DataGridCell}" x:Key="Col1Style" BasedOn="{StaticResource BaseStyle}">
    <Setter Property="Background">
        <Setter.Value>
            <SolidColorBrush Color="Tomato"/>
        </Setter.Value>
    </Setter>            

    <Style.Triggers>
        <EventTrigger RoutedEvent="Binding.TargetUpdated">
            <BeginStoryboard HandoffBehavior="Compose">
                <Storyboard TargetProperty="(DataGridCell.Background).(SolidColorBrush.Color)">
                <ColorAnimation Duration="0:0:1.5" To="DarkRed"  AutoReverse="True" RepeatBehavior="1" />
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </Style.Triggers>
</Style> 
```

和

```
<DataGrid CellStyle="{StaticResource Col1Style}" ... /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T15:20:13.337

您可能对实现 DataTemplateSelector 感兴趣。此对象用于提供任何数据项的显示逻辑。

这是一个快速教程：[http ://www.switchonthecode.com/tutorials/wpf-tutorial-how-to-use-a-datatemplateselector](http://www.switchonthecode.com/tutorials/wpf-tutorial-how-to-use-a-datatemplateselector)

# java - DB 使用过多的 CPU - 95%

> ID：13250758
> 
> 赞同：0
> 
> 时间：2012-11-06T12:09:55.533
> 
> 标签：java, database, hibernate, spring-mvc, db2

我在我的应用程序中使用 Spring MVC + hibernate。应用服务器是 IBM WebSphere v7。在重新启动和重新启动应用程序后，**Db2syscs**进程使 CPU 使用率达到 99% 并消耗大约**1,034,352K**的内存使用量。这大约需要**10~15 分钟**。我尝试增加分配给 DB2 的堆大小，但没有任何区别。

**编辑**

这些是我在 spring 配置文件中的休眠属性。添加缓存、池属性会产生影响吗？

```
<prop key="hibernate.dialect">org.hibernate.dialect.DB2Dialect</prop>
<prop key="hibernate.generate_statistics">true</prop>
<prop key="hibernate.show_sql">false</prop>
<prop key="hibernate.connection.datasource">jdbc/logincfg</prop>
<prop key="hibernate.transaction.factory_class">org.hibernate.transaction.CMTTransactionFactory
</prop>
<prop key="hibernate.transaction.manager_lookup_class">org.hibernate.transaction.WebSphereExtendedJTATransactionLookup
</prop> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:22:02.230

如果您在 linux 上运行，请尝试使用 db2top 之类的监视器来确定哪个查询正在搅动您的 CPU。

```
 db2top -d <your database name> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:01:30.763

**WebSphere**本身处理其数据源的所有池和缓存级别。所有与 JDBC 相关的配置都可以通过**WebSphere 管理控制台**执行。尝试使用`connection pool datasource instead of XA datasource`. 还要检查`heuristic hazard in server configuration`。这些将减少 CPU 的负载。

# java - session.persist() 方法混淆

> ID：13250764
> 
> 赞同：3
> 
> 时间：2012-11-06T12:10:05.740
> 
> 标签：java, hibernate

我在文档中读到了这个：

`persist() also guarantees that it will not execute an INSERT statement if it is called outside of transaction boundaries.`

但是当我尝试这段代码时：

```
SessionFactory sessionFactory = new Configuration().configure("student.cfg.xml").buildSessionFactory();
    Session session = sessionFactory.openSession();
    Student student = new Student();
    student.setFirstName("XXX");
    student.setLastName("YYY");
    student.setCity("ZZZ");
    student.setState("PPP");
    student.setCountry("XXX");
    student.setId("NNN");
    session.persist(student);       
    session.flush();
    session.close(); 
```

正在插入记录。正如您在上面的代码中看到的，我没有使用任何事务。那么在那种情况下，根据文档，数据不应该插入数据库中吗？

事务边界是指之间的任何操作`Transaction tran = session.beginTransaction();`，`tran.commit();`对吗？

请让我知道我在哪里犯了错误。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:15:55.553

这是古老的魔法！

```
if (getTransactionIsolation()==Connection.TRANSACTION_NONE
   || getAutoCommit()==true) 
```

persist() 忽略事务边界！

为什么？persist() 不知道是否支持事务。在第二种情况下，它已提交，因为他不希望需要交易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:16:11.513

如果您删除`session.flush()`and `session.close()`，您将观察到没有执行任何插入语句。该保证的重点是`persist`调用本身不会执行任何语句。它没有说明对`flush`and的行为的影响`close`。实际上，`flush`将所有持久对象刷新到数据存储区。

# javascript - javascript：使用 window.open() 发送自定义参数但它不起作用

> ID：13250766
> 
> 赞同：11
> 
> 时间：2012-11-06T12:10:10.670
> 
> 标签：javascript, jquery

```
<html>
<head>
<script>
function open_win()
{
    window.open("http://localhost:8080/login","mywindow")
}
</script>
</head>
<body>

<input type="button" value="Open Window" onclick="open_win()">

</body>
</html> 
```

你好 ，

单击一个按钮，我打开一个`new website`（我的网站）我有两个`text fields`（一个文本字段和另一个密码字段），我正在尝试将此值发送到另一个打开的窗口。

但它没有按我的意愿工作。

我尝试了以下方法

```
1\.  window.open("http://localhost:8080/login?cid='username'&pwd='password'","mywindow")

2\.  window.open("http://localhost:8080/login","mywindow")
    mywindow.getElementById('cid').value='MyUsername'
    mywindow.getElementById('pwd').value='mypassword' 
```

如果这可能与否，有人可以帮助我吗？

抱歉，细节不完整，它是一个 Post 请求。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-06T12:18:25.363

如果要传递 POST 变量，则必须使用 HTML 表单：

```
<form action="http://localhost:8080/login" method="POST" target="_blank">
    <input type="text" name="cid" />
    <input type="password" name="pwd" />
    <input type="submit" value="open" />
</form> 
```

或者：

如果要在 URL 中传递 GET 变量，请在不带单引号的情况下编写它们：

```
http://yourdomain.com/login?cid=username&pwd=password 
```

以下是如何使用 javascrpt 变量创建上面的字符串：

```
myu = document.getElementById('cid').value;
myp = document.getElementById('pwd').value;
window.open("http://localhost:8080/login?cid="+ myu +"&pwd="+ myp ,"MyTargetWindowName"); 
```

在具有该 url 的文档中，您必须阅读 GET 参数。如果它在 php 中，请使用：

```
$_GET['username'] 
```

请注意：以这种方式传输密码是一个很大的安全漏洞！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-03T10:32:57.303

请找到此示例代码，您可以使用带有 POST 的隐藏表单将数据发送到您的 URL，如下所示：

```
function open_win()
{
    var ChatWindow_Height = 650;
    var ChatWindow_Width = 570;

    window.open("Live Chat", "chat", "height=" + ChatWindow_Height + ", width = " + ChatWindow_Width);

    //Hidden Form
    var form = document.createElement("form");
    form.setAttribute("method", "post");
    form.setAttribute("action", "http://localhost:8080/login");
    form.setAttribute("target", "chat");

    //Hidden Field
    var hiddenField1 = document.createElement("input");
    var hiddenField2 = document.createElement("input");

    //Login ID
    hiddenField1.setAttribute("type", "hidden");
    hiddenField1.setAttribute("id", "login");
    hiddenField1.setAttribute("name", "login");
    hiddenField1.setAttribute("value", "PreethiJain005");

    //Password
    hiddenField2.setAttribute("type", "hidden");
    hiddenField2.setAttribute("id", "pass");
    hiddenField2.setAttribute("name", "pass");
    hiddenField2.setAttribute("value", "Pass@word$");

    form.appendChild(hiddenField1);
    form.appendChild(hiddenField2);

    document.body.appendChild(form);
    form.submit();

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T12:22:42.287

您可以使用它，但仍然存在安全问题

```
<script type="text/javascript">
function fnc1()
{
    var a=window.location.href;

    username="p";
    password=1234;
    window.open(a+'?username='+username+'&password='+password,"");

}   
</script>
<input type="button" onclick="fnc1()" />
<input type="text" id="atext"  /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T04:48:47.280

```
You can try this instead

var myu = document.getElementById('myu').value;
var myp = document.getElementById('myp').value;
window.opener.location.href='myurl.php?myu='+ myu +'&myp='+ myp; 
```

注意：请勿使用此方法传递用户名、密码等敏感信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-06T12:21:41.940

要连接字符串，请使用`+`运算符。

要将数据插入 URI，请将其编码为 URI。

坏的：

```
var url = "http://localhost:8080/login?cid='username'&pwd='password'" 
```

好的：

```
var url_safe_username = encodeURIComponent(username);
var url_safe_password = encodeURIComponent(password);
var url = "http://localhost:8080/login?cid=" + url_safe_username + "&pwd=" + url_safe_password; 
```

服务器必须处理查询字符串才能使用数据。您不能分配给任意表单字段。

…但不要触发新窗口或在 URI 中传递凭据（它们会暴露在肩上攻击并可能被记录）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-05-20T08:29:56.903

我发现这种方法非常有用，我希望这对许多用户也有帮助。

// --> 屏幕 1：

```
var url = 'screen_2_url';
var id = 'some_ID';

window.open(url + '?id=' + id); 
```

这将打开`Screen 2`选项卡。在那里您可以像这样获取传递的值：

// --> 屏幕 2：

```
const queryString = window.location.search;
const urlParams = new URLSearchParams(queryString);
const id = urlParams.get('id'); 
```

# c# - 从一组索引中读取 Excel 文件

> ID：13250769
> 
> 赞同：1
> 
> 时间：2012-11-06T12:10:26.703
> 
> 标签：c#, asp.net, excel

是否可以从“eg `A2`”列中读取文件并读取整个文档？

当前代码：

```
("Select  * FROM [" + excelSheet[i] + "]", excelConnection); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:04:33.053

像任何 SQL 查询一样指定列名。使用 * 获取所有列。指定单独的列集仅检索这些列。至于从你想要的行开始，在你得到数据后，你可以简单地使用 LINQ 和`Skip()`方法从特定的“行”开始。

**示例：使用上面的代码**

```
("Select  A,B,C,D FROM [" + excelSheet[i] + "]", excelConnection); 
```

就迭代集合而言，我无法根据您的代码为您提供任何进一步的示例。所以这是一个演示这个概念的示例..

注意：我使用的是 ACE.OLEDB 驱动程序而不是 jet 并且正在解析 CSV。有关使用 EXCEL 的连接字符串的示例，请参见 www.connectionstrings.com；但我想你已经有了一个可以换掉的。

```
 var dir = Path.GetDirectoryName(path);
        var fileName = Path.GetFileName(path);
        var connStr = string.Format(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=""{0}"";Extended Properties=""text;HDR=YES;FMT=CSVDelimited"";", dir);

        using (var conn = new OleDbConnection(connStr))
        using (var cmd = new OleDbCommand(string.Format(@"Select A,B,C,D from {0}", fileName), conn))
        {
            conn.Open();
            IDataReader records = cmd.ExecuteReader(CommandBehavior.CloseConnection);
            var result = YOURLOGICTOMAPRECORDSET_TOLIST();
            var filteredSet=result.Skip([ROWCOUNTTOSKIPHERE]).ToList();
        } 
```

# html - 你能把 schema.org 标记包装在 标签？

> ID：13250771
> 
> 赞同：4
> 
> 时间：2012-11-06T12:10:31.730
> 
> 标签：html, microdata, schema.org

我正在网站上的联系页面上实现 schema.org 标记，以构建公司名称、地址、电话号码和电子邮件。

为了格式化它，我将它的一部分包装在`<p>`标签中。这会使 schema.org 标记无效吗？

`p`这是标签之前的样子：

```
<div itemscope itemtype="http://schema.org/LocalBusiness">
<span itemprop="name">Acne co</span>
<div itemprop="address" itemscope itemtype="http://schema.org/PostalAddress">
 <span itemprop="streetAddress">123 street</span>
 <span itemprop="addressLocality">London</span>,
 <span itemprop="addressRegion"></span>
 <span itemprop="postalCode">N64TF</span>
   </div>
   <span itemprop="telephone">02083548800</span>
   <span itemprop="email">studio@acne.co.uk</span>
</div> 
```

这是之后的样子：

```
<div itemscope itemtype="http://schema.org/LocalBusiness"> 
<p class="title">
     <span itemprop="name">Acne co</span>
   </p>

     <div itemprop="address" itemscope itemtype="http://schema.org/PostalAddress">
   <p>
     <span itemprop="streetAddress">123 street</span><br />
     <span itemprop="addressLocality">London</span>, <span itemprop="postalCode">N64TF</span>
   </p>
   </div>

   <p>
   <span itemprop="telephone">02083548800</span><br />
   <span itemprop="email">studio@acne.co.uk</span>
   </p>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T21:14:22.143

是的，微数据规范给出了`<span>`嵌套在`<p>`标签内的标签结构相同的示例。

见：[http ://www.w3.org/TR/2011/WD-microdata-20110405/#the-basic-syntax](http://www.w3.org/TR/2011/WD-microdata-20110405/#the-basic-syntax)

# button - Sencha Touch 按钮对 Tap 事件没有响应

> ID：13250775
> 
> 赞同：1
> 
> 时间：2012-11-06T12:10:38.743
> 
> 标签：button, controller, sencha-touch-2

我是 sencha touch 的新手，我遇到了一个奇怪的按钮问题。我正在使用 mvc，我有：

添加userview.js

```
Ext.define('App.view.Adduserview', {
extend: 'Ext.form.Panel',

xtype: 'adduserview',

requires: ['Ext.form.FieldSet','Ext.field.Select','App.store.Companies'],

config: {
    id: 'userform',
    items: [
        {
            xtype: 'fieldset',
            title: 'Details',
            items:[
                {
                    xtype: 'textfield',
                    name: 'userName',
                    label: 'Name'
                },
                {
                    xtype: 'textfield',
                    name: 'userLastname',
                    label: 'Lastname'
                },
                {
                    xtype: 'textfield',
                    name: 'userNumber',
                    label: 'Number'
                }
            ]
        },
        {
            xtype: 'fieldset',
            title: 'Links',
            items: {
                xtype: 'selectfield',
                label: 'Company',
                store: Ext.create('App.store.Companies'),
                displayField: 'companyName',
                valueField: 'companyName'
            }
        },
        {
            xtype: 'button',
            text: 'Send',
            id: 'adduserButton'
        }
    ]
}
}); 
```

添加用户.js

```
Ext.define('App.controller.Adduser', {
extend: 'Ext.app.Controller',

config: {
    refs:{
        userform: '#userform'
    },

    control: {
        '#adduserButton': {
            tap: function(){
                var valuesUser = this.getUserform().getValues();
                console.log(valuesUser);
                if (notNull(valuesUser.userName) && notNull(valuesUser.userLastname) && notNull(valuesUser.userNumber)){
                    Ext.Ajax.request({
                        url: 'http://server.com/insertUser.php',
                        params: valuesUser,
                        method: 'post',

                        success: function(response){
                            var text = response.responseText;
                            Ext.Msg.alert('Success', text);
                        },

                        failure : function(response) {
                            Ext.Msg.alert('Error','Error while submitting the form');
                            console.log(response.responseText);
                        }
                    });
                    this.getUserform().reset();
                }
                else{
                    Ext.Msg.alert('Error', 'All the fields are necessary');
                }
            }
        }
    }
}
});

function notNull(a) {
    if(a!="" && !(a.match(/^\s+$/))){
        return true;
    }
    else{
        return false;
    }
}; 
```

问题是按钮不起作用，按下时它什么也不做，而且我还有其他两个 FormPanel 完全一样，但数据不同，它们每个都有一个控制器，就像我展示的那样，但在水龙头功能，他们工作。我注意到当我看到在 chrome 中加载的脚本时，Adduser.js 不存在，所以我猜这就是它不工作的原因，但我不确定它为什么不加载。顺便说一下，我将控制器添加到 App.js。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T05:45:53.517

update your controoler code with

```
Ext.define('App.controller.Adduser', {
extend: 'Ext.app.Controller',

config: {
    refs:{
        userform: '#userform'
    }
    },

   init: function () {
        this.control({
        '#adduserButton': {
            tap: function(){
                var valuesUser = this.getUserform().getValues();
                console.log(valuesUser);
                if (notNull(valuesUser.userName) && notNull(valuesUser.userLastname) && notNull(valuesUser.userNumber)){
                    Ext.Ajax.request({
                        url: 'http://server.com/insertUser.php',
                        params: valuesUser,
                        method: 'post',

                        success: function(response){
                            var text = response.responseText;
                            Ext.Msg.alert('Success', text);
                        },

                        failure : function(response) {
                            Ext.Msg.alert('Error','Error while submitting the form');
                            console.log(response.responseText);
                        }
                    });
                    this.getUserform().reset();
                }
                else{
                    Ext.Msg.alert('Error', 'All the fields are necessary');
                }
            }
        }
    });
    },
}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T10:15:19.903

添加

```
controllers: [
    'App.controller.Adduser',

], 
```

在应用程序中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:24:11.503

将您的参考更改为

```
refs:{
        userButton: '#adduserButton'
    } 
```

和控制作为

```
control: {
        userButton: { 
```

希望这可以帮助你

# c - int (* f [])(); 有什么区别？和 int f[]();

> ID：13250777
> 
> 赞同：2
> 
> 时间：2012-11-06T12:10:43.303
> 
> 标签：c, pointers, function-pointers

*我在 C 的指针中*找到了这个

 *```
int f[]();  /* this one is illegal */ 
```

和：

```
int (* f [])(); /* this one legal. */ 
```

我真的很想知道第二个的用途是什么。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:25:21.830

如果您使用初始化块，则第二个示例非常有效。例如：[_](http://ideone.com/fzt1SX)

```
#include <stdio.h>
int x = 0;
int a() { return x++ + 1; }
int b() { return x++ + 2; }
int c() { return x++ + 3; }

int main() 
{
  int (* abc[])() = {&a, &b, &c};
  int i = 0,
      l = sizeof(abc)/sizeof(abc[0]);
  for (; i < l; i++) { 
    printf("Give me a %d for %d!\n", (*abc[i])(), i);
  }
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:16:59.120

我不确定第二个例子是否合法，因为函数数组的大小是未知的，但它应该是一个函数指针数组，如果大小是，这里是一个可能的用法示例已知：

```
int a()
{
    return 0;
}

int main(int argc ,char** argv)
{
    int (* f [1])();
    f[0] = a;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T12:19:01.887

`int f[]();`// 这是非法的，因为你不能创建函数数组。在里面是违法的`C`

但第二个是合法的

`int (* f [])();`它说 f 是一个函数指针数组，返回`int`并接受未指定数量的参数

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T12:25:51.933

```
int f[]();  /* this one is illegal */ 
```

那是试图声明一个函数数组，这是不可能的。

```
int (* f [])(); /* this one NOT legal, despite what the OP's post says. */ 
```

这是试图声明一个函数*指针*数组，如果指定了数组大小，这*将*是完全合法的（并且是明智的），例如：

```
int (* f [42])(); /* this one legal. */ 
```

**编辑：**该类型`int (* f [])()` *可以*用作函数参数类型，因为对于函数参数类型，数组到指针的转换会立即发生，这意味着我们不需要指定 a 的最内层数组的维度（可能是多维的）大批：

```
void some_func(int (* f [])());  /* This is also legal. */ 
```*

# jpeg - 如何使用 gimp 使 jpeg 图像半透明？

> ID：13250778
> 
> 赞同：0
> 
> 时间：2012-11-06T12:10:44.947
> 
> 标签：jpeg, gimp, alpha-transparency

> **可能重复：**
> [图像背景透明 GIMP](https://stackoverflow.com/questions/8835629/image-background-transparent-gimp)

我有一个 jpeg 图像。我想让它更透明，因为我在我的 android 应用程序中使用它作为背景。它将在其前面有文本视图，并且图像的颜色可能与视图中的文本发生冲突。

如何使用 GIMP 提高透明度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:19:05.723

JPEG 图像不支持 Alpha 通道（透明度），因此您需要使用可以支持的文件格式。我的建议是 .PNG

# php - CAKEPHP：链接整体

> ID：13250788
> 
> 赞同：1
> 
> 时间：2012-11-06T12:11:17.447
> 
> 标签：php, cakephp

我可以查看 Notes 表中的特定字段。

```
 echo "<div id='notescover'>";
    echo "<p class='text'>"; 
    echo $viewnotes['Note']['notes']; 
    echo "</p>"; 
    echo "</div>"; 
```

我已将评论链接到特定的笔记 URL，例如 /note/view/IDofNote

```
echo $this->Html->link('Comment', array( 'controller'=>'notes', 'action'=>'view',$viewnotes['Note']['id']), array('class'=> 'light_blue')); 
```

我想删除此链接并将相同的操作链接到上面的 div 标签。我能够像这样链接字段内的文本

```
echo $this->Html->link($viewnotes['Note']['notes'], array( 'controller'=>'notes', 'action'=>'view',$viewnotes['Note']['id']), array('class'=> 'light_blue')); 
```

但我想要连接的整个盒子。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T12:57:39.533

像这样的东西：

```
$text = '<p class="text">' . $viewnotes['Note']['notes'] . '</p>';
$div = $this->Html->div(null, $text, array('id' => 'notescover'));

echo $this->Html->link(
    $div, 
    array('controller' => 'notes', 'action' => 'view', $viewnotes['Note']['id']),
    array('class' => 'light_blue', 'escape' => false)
); 
```

如果您愿意，也可以通过这样做进一步压缩它：

```
echo $this->Html->link(
    '<div id="notescover"><p class="text">' . $viewnotes['Note']['notes'] . '</p></div>', 
    array('controller' => 'notes', 'action' => 'view', $viewnotes['Note']['id']),
    array('class' => 'light_blue', 'escape' => false)
); 
```

您可以将任何您喜欢的内容放入 的第一个参数中`Html::link()`，但如果您在其中添加标记，而不仅仅是纯文本，那么`escape => false`在链接中包含该属性很重要，以避免将链接中的 HTML 特殊字符呈现为文本。

虽然，在我看来，当您将 Cake HTML 帮助程序用于任何不简单的事情时，这样的事情变得如此复杂，但编写这样的代码甚至不值得花时间和精力。它还使阅读代码的方式比需要的复杂得多，尤其是当您必须在以后解密代码时。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-04-06T15:18:11.067

您可以在函数内部使用`Link`or`URL`方法`HtmlHelper`

> 使用**链接**

```
$content = "<div id='notescover'>".
           "  <p class='text'>" . $viewnotes['Note']['notes'] . "</p>".
           "</div>";

echo $this->Html->link( $content, 
                        array( 'controller'=>'notes', 'action'=>'view', $viewnotes['Note']['id']), 
                        array('class'=> 'light_blue', 'escape' => false)
); 
```

> 使用**网址**

在 HTML 中添加 URL

```
<a href="<?= $this->Html->url(array('controller'=>'notes', 'action'=>'view', $viewnotes['Note']['id']), 
                              array('escape' => false)); ?>" 
  class="light_blue">
   <div id='notescover'>
      <p class='text'><?= $viewnotes['Note']['notes']; ?></p>
   </div>
</a> 
```

# iphone - MKMapView，15k 注释

> ID：13250791
> 
> 赞同：1
> 
> 时间：2012-11-06T12:11:20.183
> 
> 标签：iphone, ios, mkmapview

我有一个 15k 的列表，我需要`MKMapView`在我的应用程序中嵌入显示。我认为这可能太多了，无法一次加载，我想检查是否有标准的方法来执行此操作。`XML`包含有关引脚信息的文件存储在网络服务器上。

我想我有几个选择，但我仍然不确定瓶颈在哪里（网络、一次显示许多图钉、第一次在地图上加载图钉等）：

*   解析整个 xml 文件并添加所有注释。强制用户缩放，这样你就看不到太多的针脚

*   解析整个 xml 文件并添加所有注释。使用库对`Pins`.

*   仅加载用户当前所在区域的前 50 个图钉。每次更新位置时，调用网络服务器上的脚本，该脚本仅根据地图经纬度和缩放提供 50 个位置。

*   将所有内容缓存在 coredata 中，并与上一点相同。

关于我应该做的表演有什么考虑吗？还有其他解决方案吗？这些表现是否足够好？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T12:22:47.607

瓶颈将是在地图上一次显示那么多图钉。您一次不应显示超过 500 个。放大可能没问题，但缩小会影响性能和地图可见性。

这是一个将为您进行聚类的库：

[http://applidium.com/en/news/too_many_pins_on_your_map/](http://applidium.com/en/news/too_many_pins_on_your_map/)

# python - ipython %load_ext 丢失

> ID：13250796
> 
> 赞同：0
> 
> 时间：2012-11-06T12:11:32.837
> 
> 标签：python, reload, ipython

我尝试将 autoreload 设置为我的开发过程，但似乎我从[该](https://stackoverflow.com/questions/5364050/reloading-submodules-in-ipython)线程中学到的方法不适用于我的版本。我试过

1.  ipython -V：0.10 和 python -V Python 2.6.6
2.  ipython -V：0.10.1 和 python -V Python 2.7.3

但

```
%load_ext autoreload
%autoreload 2 
```

返回

```
ERROR: Magic function `load_ext` not found. 
```

这很明显，因为

```
In [1]: %lsmagic
Available magic functions:
%Exit  %Pprint  %Quit  %alias  %autocall  %autoindent  %automagic  %bg  %bookmark  %cd          %clear  %color_info  %colors  %cpaste  %debug  %dhist  %dirs  %doctest_mode  %ed  %edit  %env      %exit  %hist  %history  %logoff  %logon  %logstart  %logstate  %logstop  %lsmagic  %macro  %magic  %p  %page  %paste  %pdb  %pdef  %pdoc  %pfile  %pinfo  %popd  %profile  %prun  %psearch  %psource  %pushd  %pwd  %pycat  %quickref  %quit  %r  %rehash  %rehashx  %rep  %reset  %run  %runlog  %save  %sc  %store  %sx  %system_verbose  %time  %timeit  %unalias  %upgrade  %who  %who_ls  %whos  %xmode 
```

此方法不可用。如何安装其他魔术功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:19:23.277

**当前安装**

在您当前的安装中，您可以尝试：-

```
import ipy_autoreload 
```

看看你得到了什么？

**新安装**

你可以尝试重新`IPython`安装

```
pip install ipython 
```

（如果您使用的是 virtualenv，则用于本地安装）或

```
sudo pip install ipython 
```

如果您要在`IPython`系统范围内安装。

而且因为`pip install`如果你在 Mac OSX 上不能正确处理 sys 路径，你可能需要做

```
easy_install -a readline   # `sudo easy_install -a readline` for system-wide install of course. 
```

（如果您使用的是 Mac OSX）

如果你有最新的`IPython`，你应该`IPython 0.13.1`在第一次加载 shell 时看到。你不应该有任何问题`%load_ext autoreload`。

# ios - iPad 应用程序 - 无需 UDID 即可部署

> ID：13250800
> 
> 赞同：0
> 
> 时间：2012-11-06T12:11:55.203
> 
> 标签：ios, ipad

我有个疑问。请指导我。我计划创建一个 iPad 应用程序，但我想在 iPad 上安装此应用程序，而不使用我的个人资料中的 UDID。我已经检查了“企业帐户”，但是如果没有这种方法（例如在 android 上侧载应用程序），是否有任何可能的方法来做到这一点？有没有可能出现的问题？

请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:17:14.177

不，您的选择是 AppStore 或企业帐户。企业账号方式有很多限制。企业帐户仅允许您将应用程序分发给注册公司，如果您将应用程序分发给公司的非员工，Apple 将关闭您的帐户。

您可以查看越狱，但在通过 AppStore 分发您的应用程序时，您不会接触到尽可能多的用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:20:45.573

由于 iOS 中应用程序分发的封闭性，您别无选择。

将应用程序加载到设备上的唯一方法是通过企业程序或 App Store，而无需关心设备 ID 是什么。Enterprise 程序就像一个受控、安全的旁加载过程（如果我们想与 Android 进行类比），但仅限于在 Enterprise 内分发。App Store 意味着您必须将应用程序发布到 Apple，并遵守他们的规则。

要在设备上获取应用程序，而不使用这两种方法，您需要创建一个 Ad-Hoc 构建，但这需要设备 ID，因为它将与提供的配置文件交叉引用。如果设备 ID 未与应用程序的配置文件链接，则设备将不会让它运行。

在不需要设备 ID 的情况下在设备上加载应用程序的非官方方式是通过越狱设备，但这是不可靠的，并且需要用户精通技术。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T12:23:58.633

不，没有企业许可证，无法通过 ad-hoc 为任何设备（没有 UDID）分发应用程序。

# javascript - CodeIgniter 函数与 Javascript 中断

> ID：13250803
> 
> 赞同：0
> 
> 时间：2012-11-06T12:12:05.837
> 
> 标签：javascript, codeigniter, formatting

我正在使用 CodeIgniter 表单助手，这就是它的作用：

> Uncaught SyntaxError: Unexpected token ILLEGAL

编码：

```
jQuery('#window-1').append('<?= form_dropdown('hfdata', $hf_arr, set_value('hfdata'), 'class="span3"') ?>'); 
```

如您所见，当我这样做时，我在 JS 中使用 PHP `<?= 'Test' ?>`。
所以它似乎与 CodeIgniter 函数有关。

据我所知，此错误消息可能是由代码中的未知/错误字符引起的，从我在萤火虫中看到的内容来看，这个 CI 函数正在生成带有制表符和换行符的文本......我猜这就是我的问题.

我可能是错的，所以如果是，请纠正我。

我将不胜感激这个问题的任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:44:02.240

很有可能你搞砸了你的报价，你需要改变你将最后一个参数传递给下拉列表的方式。

```
$class = 'class="span3"';

jQuery('#window-1').append('<?= form_dropdown("hfdata", $hf_arr, set_value("hfdata"), $class) ?>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:49:24.640

解释 PHP 和 Javascript 是如何工作的： PHP 在服务器上执行，这给出了 html 输出。您的浏览器将获得该输出并可以对其进行任何操作。从这一点javascript可以完成他的工作。

您正在向用户浏览器回显 php 函数调用。Javascript 不能调用 php 函数。如果你想这样做，那么你需要调用一个 php 文件来返回你想要的结果。但我想还有一个问题。（如果你想这样做，请转义 ' 字符）

您需要在服务器上执行 PHP 代码。这将给出一个结果。您将此结果发送给客户端。在客户端 PC 上，javascript 将执行您的 javascript 代码。

如果你想用 PHP 生成 javascript 代码，那么你可以这样做（在服务器上的 PHP 中！）：

```
jQuery('#window-1').append('<?= form_dropdown('hfdata', $hf_arr, set_value('hfdata')); ?> '); 
```

如果这不是您想要的，那么您正在解决设计问题。然后这是一种死胡同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:57:23.587

我自己找到了答案......正如我所说，它是由从`from_dropdown`.

解决方案很简单，删除所有不需要的字符，如换行符：

```
<?php
     $prepare = preg_replace('/^\s+|\n|\r|\s+$/m', '', form_dropdown('hfdata', $hf_arr, set_value('hfdata'), 'class="span3"'));
?>
jQuery('#window-1').append('<?= $prepare ?>'); 
```

# java - JSP 的类加载过程是什么？

> ID：13250807
> 
> 赞同：2
> 
> 时间：2012-11-06T12:12:32.377
> 
> 标签：java, jsp, classloader

我在 Eclipse 中有一个动态 Web 项目。我的 WEB-INF 中有一个文件`a.xml`存在于类路径中。我`Test`在我的项目中命名了类。

我在 JSP scriptlet 中有以下代码 -

```
<%@page import="com.kshitiz.Test"%>
<%
System.out.println(ClassLoader.getSystemClassLoader().getSystemResource("a.xml"));
System.out.println(this.getClass().getClassLoader().getSystemResource("a.xml"));
System.out.println(Test.class.getClassLoader().getResource("a.xml"));
%> 
```

输出是 -

```
null
null
C:/Users/kshitiz/eclipse/.metadata/.plugins/org.eclipse.wst.server.core/tmp1/wtpwebapps/test-project/WEB-INF/classes/a.xml 
```

显然系统类加载器和 JSP 类加载器无法找到我的文件。

你能解释一下输出吗？tomcat 是否使用不同的类加载器来加载 JSP？为什么这样？为什么系统类加载器无法找到我的文件？

*我已经知道我可以使用以下功能来访问我的文件*-

```
getServletContext().getResourceAsStream("/WEB-INF/a.xml"); 
```

*我有兴趣了解上述情况，而不是加载该文件的各种方法。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:23:20.100

每个部署的 Web 应用程序都有自己的类加载器。这使得在同一个容器上部署两个不同的 web 应用程序并取消部署它们成为可能，即使它们使用同一个库的冲突版本。

webapp 的类加载器是 tomcat 类加载器的子类，它的类路径包含 webapp 的`WEB-INF/classes`目录，以及`WEB-INF/lib`. 我不知道你如何设置你的类路径，但你不应该在 eclipse 中设置任何类路径，WEB-INF 目录本身应该绝对不在类路径中。

第一行和第二行基本上是等价的，因为它们都使用 getSstemResource，它使用系统类加载器。他们找不到您的文件是正常的，因为 webapp 的类路径不在系统类路径中。

第三行应该找到该文件，如果它在 webapp 的类路径中，即`WEB-INF/classes`在`WEB-INF/lib`.

# google-app-engine - 如何理解从 App Engine 下载的日志文件？

> ID：13250810
> 
> 赞同：0
> 
> 时间：2012-11-06T12:12:38.683
> 
> 标签：google-app-engine, logfiles

下载的 Google App Engine 日志文件的格式是什么`appcfg.sh request_logs`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:12:38.683

据我所知，日志文件的格式如下：

```
CLIENT_IP_ADDRESS - USERNAME [DATE:TIME TIMEZONE] "METHOD URL HTTP/VERSION" RESPONSE_CODE ??? URL USER_AGENT
     LOG_LEVEL:TIMESTAMP MESSAGE
     :
     LOG_LEVEL:TIMESTAMP MESSAGE
     :
     LOG_LEVEL:TIMESTAMP MESSAGE
     : 
```

每个缩进的行都与它上面的非缩进行相关联 - 我认为这就是您确定每个缩进行与哪个请求相关的方式。单独的冒号用于将一条日志消息与另一条日志消息分开。

未缩进的行是按时间倒序排列的，但它们下面的缩进行组是按时间顺序排列的。

一个奇怪的客户端 IP 地址（如 0.1.0.2）表示从您的应用到应用的任务队列的 App-Engine 内部帖子。但实际上，通过查看该请求的用户代理，您也可以看到它在 App-Engine 内。

# xml - 为什么我必须为导入的 XSD 的属性添加前缀？

> ID：13250819
> 
> 赞同：2
> 
> 时间：2012-11-06T12:13:05.047
> 
> 标签：xml, xsd, xsd-validation

我有以下两个XSDS，test.xsd

```
<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://www.w3.org/2001/XMLSchema"    
  xmlns:xsd="http://www.w3.org/2001/XMLSchema.xsd" 
  xmlns:ns1="http://www.test.com/ns1"     
  targetNamespace="http://www.test.com" 
  elementFormDefault="qualified"
  attributeFormDefault="unqualified">
    <import namespace="http://www.test.com/ns1" schemaLocation="test1.xsd"/>
    <element name="Root">
        <complexType>
            <sequence>
                <element name="Child" type="string"/>
            </sequence>
            <attribute ref="ns1:myAttrib1" use="required"/>
            <attribute ref="ns1:myAttrib2" use="required"/>
        </complexType>
    </element>
</schema> 
```

和 test1.xsd

```
<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://www.w3.org/2001/XMLSchema" 
  xmlns:xsd="http://www.w3.org/2001/XMLSchema.xsd" 
  xmlns:ns1="http://www.test.com/ns1" 
  targetNamespace="http://www.test.com/ns1" 
  elementFormDefault="qualified" attributeFormDefault="unqualified">
    <attribute name="myAttrib1" type="string"/>
    <attribute name="myAttrib2" type="string"/>
</schema> 
```

实例文档如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<Root xmlns="http://www.test.com" xmlns:ns1="http://www.test.com/ns1" 
  ns1:myAttrib1="1" ns1:myAttrib2="2">
    <Child>Child 1</Child>
</Root> 
```

现在，使用 Xerces 2.11.0，我必须为属性添加前缀`myAttrib1`并`myAttrib2`使用`ns1`它才能通过验证。起初我觉得这不符合模式定义（由于`attributeFormDefault="unqualified"`in `ns1`），但再考虑一下它是有道理的。我是这样理解的：前缀是必要的，因为属性`myAttrib1`并`myAttrib2`没有在~~`targetNamespace`~~使用它们的默认命名空间，即它们没有在`xmlns="http://www.test.com"`.

这是我的问题：1）我是否正确理解了前缀所述属性的必要性，以及 2）在 W3C 建议中的位置。我可以找到描述这种行为的段落吗？谢谢。:)

更新：我遇到了以下段落

> 最后两个属性（elementFormDefault 和attributeFormDefault）是 W3C XML Schema 提供的一种工具，用于在单个模式中控制属性和元素是否默认被认为是合格的（在命名空间中）。如上所述，可以通过指定默认值来指示合格和不合格之间的这种区别，但也可以在定义元素和属性时，通过添加值合格或不合格的表单属性来指示。
> 
> 需要注意的是，只有本地元素和属性可以指定为不合格。所有全局定义的元素和属性必须始终是合格的。

在[xml.com](http://www.xml.com/pub/a/2000/11/29/schemas/part1.html?page=8)上找到。另一个有趣的来源是[zvon.org](http://zvon.org/xxl/XMLSchemaTutorial/Output/ser_attributeFormDefault.html)。因此，这确实支持了公认的答案。但是，我还没有看到（臭名昭著的神秘）W3C rec 的确切位置。详细提到了这一点。毕竟，他们是这个问题的管理机构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:27:11.637

架构中的顶级元素和属性声明始终位于架构的 targetNamespace 中。`elementFormDefault`和仅适用于嵌套在复杂类型内的`attributeFormDefault`匿名元素/属性声明。如果您的`test.xsd`架构未指定`elementFormDefault="qualified"`，则`Child`复杂类型内的元素将不在命名空间中，并且实例文档需要看起来像

```
<?xml version="1.0" encoding="UTF-8"?>
<ns:Root xmlns:ns="http://www.test.com" xmlns:ns1="http://www.test.com/ns1" 
  ns1:myAttrib1="1" ns1:myAttrib2="2">
    <Child>Child 1</Child>
</Root> 
```

此外，命名空间中的属性*必须*加前缀——默认`xmlns="..."`命名空间声明仅适用于元素。因此

```
<?xml version="1.0" encoding="UTF-8"?>
<ns:Root xmlns="http://www.test.com/nl1" xmlns:ns="http://www.test.com" 
  myAttrib1="1" myAttrib2="2">
    <ns:Child>Child 1</ns:Child>
</ns:Root> 
```

*无效*- myAttrib1 和 myAttrib2 不在命名空间中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:27:53.093

1) 正确。但是，`attributeFormDefault`and`elementFormDefault`仅适用于**本地**定义的属性和元素。换句话说，那些不是**schema**和**redefine**的直接子级的，嵌套在其他 schema 组件中。

2)[第 3.2](http://www.w3.org/TR/xmlschema-1/#cAttribute_Declarations) .2 节显示 ref 必须是 QName。通常，在 XSD 中的任何地方都可以看到 ref 属性，它是 QName 类型。

# android - 我的 android 应用程序中的 Marque Rss 新闻提要

> ID：13250823
> 
> 赞同：1
> 
> 时间：2012-11-06T12:13:20.570
> 
> 标签：android

我是 android 的新手。我正在创建一个应用程序，在该应用程序中我正在考虑在活动的底部放置一个“品牌 Rss 提要”。这可能吗？是否可以在同一个活动中放置两个以上的 RSS 提要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:30:09.250

对的，这是可能的..

这是从 URL 获取 RSS 提要并将其列在 android 的列表视图中的代码。

你需要先创建一个扩展ListActivity的类，然后把这段代码：

```
 // Initializing instance variables
    headlines = new ArrayList();
    links = new ArrayList();

    try {
        URL url = new URL("http://www.RSS-Feed-URL-HERE");

        XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
        factory.setNamespaceAware(false);
        XmlPullParser xpp = factory.newPullParser();

            // We will get the XML from an input stream
        xpp.setInput(getInputStream(url), "UTF_8");

            /* We will parse the XML content looking for the "<title>" tag which appears inside the "<item>" tag.
             * However, we should take in consideration that the rss feed name also is enclosed in a "<title>" tag.
             * As we know, every feed begins with these lines: "<channel><title>Feed_Name</title>...."
             * so we should skip the "<title>" tag which is a child of "<channel>" tag,
             * and take in consideration only "<title>" tag which is a child of "<item>"
             *
             * In order to achieve this, we will make use of a boolean variable.
             */
        boolean insideItem = false;

            // Returns the type of current event: START_TAG, END_TAG, etc..
        int eventType = xpp.getEventType();
        while (eventType != XmlPullParser.END_DOCUMENT) {
            if (eventType == XmlPullParser.START_TAG) {

                if (xpp.getName().equalsIgnoreCase("item")) {
                    insideItem = true;
                } else if (xpp.getName().equalsIgnoreCase("title")) {
                    if (insideItem)
                        headlines.add(xpp.nextText()); //extract the headline
                } else if (xpp.getName().equalsIgnoreCase("link")) {
                    if (insideItem)
                        links.add(xpp.nextText()); //extract the link of article
                }
            }else if(eventType==XmlPullParser.END_TAG && xpp.getName().equalsIgnoreCase("item")){
                insideItem=false;
            }

            eventType = xpp.next(); //move to next element
        }

    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (XmlPullParserException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    // Binding data
    ArrayAdapter adapter = new ArrayAdapter(this,
            android.R.layout.simple_list_item_1, headlines);

    setListAdapter(adapter);

}
public InputStream getInputStream(URL url) {
       try {
           return url.openConnection().getInputStream();
       } catch (IOException e) {
           return null;
         }
    }

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
   Uri uri = Uri.parse((String) links.get(position));
   Intent intent = new Intent(Intent.ACTION_VIEW, uri);
   startActivity(intent);
} 
```

& 你也可以让这个类扩展 Activity，并在 Activity 中手动放置两个列表视图，然后将这段代码处理为两个列表视图。

# visual-studio-2010 - 如何通过 Visual Studio 2010 创建 SharePoint 2010 的网站栏？

> ID：13250825
> 
> 赞同：0
> 
> 时间：2012-11-06T12:13:26.427
> 
> 标签：visual-studio-2010, visual-studio, sharepoint, sharepoint-2010

我试图通过 Visual Studio 2010 创建列表、内容类型和网站栏。有添加内容类型和列表实例的选项，但没有添加内容类型的选项。所以，我不知道如何添加网站栏？我需要为此添加什么项目以及要为此进行什么样的编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:59:58.417

此资源可能对您有所帮助：演练：为 SharePoint 创建网站栏、内容类型和列表 => [http://msdn.microsoft.com/en-us/library/ee231593.aspx](http://msdn.microsoft.com/en-us/library/ee231593.aspx) 您也可以尝试使用 SharePoint Designer 2010 而不是视觉工作室 2010

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T21:59:49.193

您可以使用 CAML，但我不推荐它。更好的方法是使用对象模型和特征事件接收器。一个完整的例子很长，这里是链接[http://zhouyupublic.blogspot.co.uk/2012/11/create-site-column-and-content-type.html.My](http://zhouyupublic.blogspot.co.uk/2012/11/create-site-column-and-content-type.html.My)

我最近最喜欢的方法是使用 PowerShell。但是由于您询问如何使用 VS 进行操作，因此不在此处讨论。

# java - 批量插入只取一个查询，无法取java中的所有查询

> ID：13250826
> 
> 赞同：0
> 
> 时间：2012-11-06T12:13:32.503
> 
> 标签：java, mysql, prepared-statement

我有一个必须插入两个表的方法，我为此使用了批量插入。我的问题是它需要第二个查询并插入到该表中，但无法插入到第一个表中`fails to take first query`。

这就是我的代码：

```
public String saveVillageDetails(VillagesViewModel viewmodel, String functionType) {
        int[] saveOrupdateStatus = null;
        StringBuffer disctrictQuery = new StringBuffer();
        String saveOrupdateStatusMessage = "";
        Connection connection = getConnection();
        PreparedStatement districtPS = null;
        ResultSet rs = null;
        if (connection != null) {

            try {
                 connection.setAutoCommit(false);
                 if(functionType.equals("add")){
                    // to insert in villages table
                        disctrictQuery.append(" INSERT INTO m_villages(districtid,village,creation_date,last_created_by) ");
                        disctrictQuery.append(" VALUES (?, ?, ?,?) ");
                        districtPS = connection.prepareStatement(disctrictQuery.toString());
                        districtPS.setInt(1, viewmodel.getDistrictid());
                        districtPS.setString(2, viewmodel.getVillage());
                        districtPS.setTimestamp(3, getCurrentDate());
                        districtPS.setInt(4,viewmodel.getUserid());
                        districtPS.addBatch();
                        // to insert in regions table
                        disctrictQuery=new StringBuffer();
                        disctrictQuery.append(" INSERT INTO m_regions(villageid,creation_date,last_created_by) ");
                        disctrictQuery.append(" VALUES (?, ?, ?) ");
                        districtPS = connection.prepareStatement(disctrictQuery.toString());
                        districtPS.setInt(1, getLatestVilalgeID());
                        districtPS.setTimestamp(2, getCurrentDate());
                        districtPS.setInt(3,viewmodel.getUserid());
                        districtPS.addBatch();

                    }else if(functionType.equals("edit")){
                        // to update villages table
                        disctrictQuery.append("UPDATE m_villages SET districtid=? ,village=? ,updation_date=? ,last_updated_by=? ");
                        disctrictQuery.append(" WHERE villageid=? ");
                        districtPS = connection.prepareStatement(disctrictQuery.toString());
                        districtPS.setInt(1, viewmodel.getDistrictid());
                        districtPS.setString(2, viewmodel.getVillage());
                        districtPS.setTimestamp(3, getCurrentDate());
                        districtPS.setInt(4,viewmodel.getUserid());
                        districtPS.setInt(5,viewmodel.getVillageid());
                        districtPS.addBatch();
                        disctrictQuery=new StringBuffer();
                        // to update regiions table
                        disctrictQuery.append("UPDATE m_regions SET villageid=?,updation_date=? ,last_updated_by=? ");
                        disctrictQuery.append(" WHERE regionid=? ");
                        districtPS = connection.prepareStatement(disctrictQuery.toString());
                        districtPS.setInt(1, viewmodel.getVillageid());
                        districtPS.setTimestamp(2, getCurrentDate());
                        districtPS.setInt(3,viewmodel.getUserid());
                        districtPS.setInt(4,getRegionID(viewmodel.getVillageid()));
                        districtPS.addBatch();

                    }
                saveOrupdateStatus = districtPS.executeBatch();

                if (saveOrupdateStatus.length > 0) {
                    if(functionType.equals("add")){
                         saveOrupdateStatusMessage = "Village Details Added successfully";
                    }else if(functionType.equals("edit")){
                        saveOrupdateStatusMessage = "Village Details Modified successfully";
                    }
                    connection.commit();
                    connection.setAutoCommit(true);
                } else {
                     if(functionType.equals("add")){
                         saveOrupdateStatusMessage = "Failed to Add Village Details";
                    }else if(functionType.equals("edit")){
                        saveOrupdateStatusMessage = "Failded to Modify Village Details";
                    }

                }
            } catch (Exception ex) {
                ex.printStackTrace();
                //use log to print the exception    ex.printStackTrace();
            } finally {
                try {
                closeConnection(connection, rs, districtPS);
            } catch (Exception ex) {
                ex.printStackTrace();
                //use logger here
            }
        }
    }
    return saveOrupdateStatusMessage;
} 
```

当我打印声明时，我得到这样的：

```
com.mysql.jdbc.ServerPreparedStatement[2] -  INSERT INTO m_regions(villageid,creation_date,last_created_by)  VALUES (18, '2012-11-06 17:41:25', 1) 
```

并且批处理中缺少第一个查询。

可能是什么问题呢。

请帮忙

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:17:36.780

请按照以下方式重构您的代码：

```
 if(functionType.equals("add")){
                // to insert in villages table
                districtPS = connection.prepareStatement("INSERT INTO m_villages(districtid,village,creation_date,last_created_by)  VALUES (?, ?, ?,?) ", 
                        Statement.RETURN_GENERATED_KEYS);
                districtPS.setInt(1, viewmodel.getDistrictid());
                districtPS.setString(2, viewmodel.getVillage());
                districtPS.setTimestamp(3, getCurrentDate());
                districtPS.setInt(4,viewmodel.getUserid());
                districtPS.executeUpdate();
                ResultSet keySet = districtPS.getGeneratedKeys();
                int villageId = 0;
                if (keySet.next()) {
                    villageId = keySet.getInt(1);
                }
                // to insert in regions table
                districtPS = connection.prepareStatement(" INSERT INTO m_regions(villageid,creation_date,last_created_by)  VALUES (?, ?, ?) ", 
                        Statement.RETURN_GENERATED_KEYS);
                districtPS.setInt(1, villageId);
                districtPS.setTimestamp(2, getCurrentDate());
                districtPS.setInt(3,viewmodel.getUserid());
                districtPS.executeUpdate();
            } 
```

# blackberry - BrowserField 不显示网站。

> ID：13250830
> 
> 赞同：0
> 
> 时间：2012-11-06T12:13:51.150
> 
> 标签：blackberry, blackberry-eclipse-plugin

这是我在我的黑莓粗体 9900 模拟器中运行的代码，但 BrowserField 只显示空白的白色屏幕，什么也没有。我的模拟器是否有任何问题或需要在其中进行某些设置。提前感谢您的帮助。

公共类 StartUp 扩展 UiApplication {

```
 public static void main(String[])
 {
       StartUp start=new StartUp();
       start.enterEventDispatcher();
 }
 public StartUp() 
 {  
    MainScreen screen = new MainScreen();
    BrowserField browserField = new BrowserField();;
    screen.add(browserField);
    pushScreen(screen);

    browserField.requestContent("http://www.google.com/news");
 } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:28:04.150

Verify if you have a network connection in your simulator, see [this development guide article](http://docs.blackberry.com/en/developers/deliverables/6338/Start_the_BB_MDS_Simulator_607563_11.jsp).

# python - 如何编写按钮回调？

> ID：13250835
> 
> 赞同：1
> 
> 时间：2012-11-06T12:14:04.967
> 
> 标签：python, user-interface, button, callback, tkinter

下面是我用来用按钮制作棋盘的代码。

```
from Tkinter import *

for x in xrange(8):
    for y in xrange(8:
        if((x+y)%2 == 0):
            Button(root, bg="white", width=11, height=5).grid(row=y, column=x)
        else:
            Button(root, bg="black", width=11, height=5).grid(row=y, column=x) 
```

我知道如何为单个按钮创建回调函数，但我不确定如何为这 64 个按钮中的每一个实现回调函数，以便在按下时返回它们在网格中的位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T12:22:57.040

```
def callback(event):
   x,y = event.widget.grid_location() 
```

这个例子应该为你指明正确的方向。

**更新：** 为了澄清 grid_location 的用法，我做了一个快速谷歌并发现......一个[SO-post](https://stackoverflow.com/questions/6101709/python-tkinter-grid-geometry-manager-grid-location-method) ;-) 通过以更直接的[方式](https://stackoverflow.com/a/6102759/1107807)提供您需要的解决方案，这让我感到羞耻：

```
grid_info = event.widget.grid_info()
print "row:", grid_info["row"], "column:", grid_info["column"] 
```

所以功劳应该归功于 Bryan Oakley ;-) 这个问题可能被称为重复......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:30:43.363

尝试将每个按钮的 x 和 y 值绑定到可以在按下按钮时调用处理函数的 lambda。现在您有了每个按钮按下的 x 和 y 位置。

```
def handlebuttonpress(x,y):
  print 'Button x-{0} y-{1} pressed'.format(x,y)

width, height = 8, 8
for x in xrange(width):
  for y in xrange(height):
    if((x+y)%2 == 0):
        Button(root, command=lambda x=x, y=y: handlebuttonpress(x,y), bg="white", width=11, height=5).grid(row=y, column=x)
    else:
        Button(root, command=lambda x=x, y=y: handlebuttonpress(x,y), bg="black", width=11, height=5).grid(row=y, column=x) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:32:49.807

编辑：我认为我更喜欢@DonQuestion 的基于事件的方法，因为它不需要为每个按钮提供不同的功能。

下面我调整了我的原始代码以使用

```
 master.bind("<Button-1>", self.onclick) 
```

对鼠标点击做出反应（而不是使用`tk.Button(command = ...)`

* * *

```
import Tkinter as tk

class ButtonEventBlock(object):
    # http://stackoverflow.com/a/6102759/190597
    def __init__(self, master, names, cols):
        self.names = names
        self.cols = cols
        self.button = []
        for i, name in enumerate(names):
            self.button.append(tk.Button(master, text = name))
            row, col = divmod(i, self.cols)
            self.button[i].grid(sticky = tk.W+tk.E+tk.N+tk.S,
                                row = row, column = col, padx = 1, pady = 1)
        master.bind("<Button-1>", self.onclick)

    def onclick(self, event):
        info = event.widget.grid_info()        
        # print(info)
        # {'rowspan': '1', 'column': '3', 'sticky': 'nesw', 'ipady': '0', 'ipadx':
        # '0', 'columnspan': '1', 'in': <Tkinter.Tk instance at 0xab3d7ec>,
        # 'pady': '1', 'padx': '1', 'row': '0'}
        row, col = [int(info[key]) for key in ['row', 'column']]
        i = self.cols*row + col
        print(row, col, self.names[i])

names = ('One', 'Two', 'Three', 'Four', 'Five',
         'Six', 'Seven', 'Eight', 'Nine', 'Ten')

root = tk.Tk()
ButtonEventBlock(root, names, cols = 5)
root.mainloop() 
```

![在此处输入图像描述](../Images/620974736dcfec5464ac416ddfd17f56.png)

# jquery - jQuery TinySort 奇怪的行为，按值对 li 进行排序

> ID：13250838
> 
> 赞同：1
> 
> 时间：2012-11-06T12:14:23.843
> 
> 标签：jquery, sorting, html-lists

我试图通过 attr "value" 对列表 li 元素进行排序

**HTML**

```
<ul>
    <li value="3" title="broken" style="display: inline;">
        <button class="cloudbutton">broken(3)</button> </li>
    <li value="4" title="aggressive" style="display: inline;">
        <button class="cloudbutton">aggressive(4)</button> </li>
    <li value="0" title="agonizing" style="display: inline;">
        <button class="cloudbutton">agonizing(0)</button> </li>
    <li value="1" title="bad" style="display: inline;">
        <button class="cloudbutton">bad(1)</button> </li>
    <li value="2" title="beaten" style="display: inline;">
        <button class="cloudbutton">beaten(2)</button> </li>
</ul> 
```

**jQuery**

```
$("ul>li").tsort({attr:"value"}); 
```

似乎是小排序的问题

这是我的示例（使用最新的 jQuery 1.8.2）：http:
[//jsfiddle.net/W2dQH/6/](http://jsfiddle.net/W2dQH/6/) - TinySort 1.0.1（是的.. 按顺序排序）
[http://jsfiddle .net/W2dQH/5/](http://jsfiddle.net/W2dQH/5/) - TinySort 1.4.29（根本不排序）
看起来两个版本都不能正常工作。

是的，我可以通过编写自定义排序函数或按其他方式排序来解决此问题，但这种情况相当基本，我不知道发生了什么。那么，它有什么问题？

**编辑**

useVal 也不起作用

```
$("ul>li").tsort({useVal:true}); 
```

但是按标题排序很好..

```
$("ul>li").tsort({attr:'title'}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T06:06:55.273

啊，这是一个真正的错误，它试图匹配 int 上的正则表达式并失败。修好后我会通知你的。

# php - 3PL Central 的 PHP SOAP 请求

> ID：13250841
> 
> 赞同：1
> 
> 时间：2012-11-06T12:14:39.453
> 
> 标签：php, api, soap, wsdl

谁能指导我如何使用 3PL Central API 发出 PHP SOAP 请求？

我有 3PL KEY、登录名、密码和设施 ID。客户端提供的文件是 WSDL 文件、XML 请求文件、XML 响应文件和 C# 示例，无论如何都没有帮助。

我是 SOAP 的新手......所以，我猜......一个关于 PHP 和 SOAP 的好教程的链接也将不胜感激。

提前一束thanx寻求帮助。

问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:57:48.237

一束thanx去“jacobdubail”。

检查此链接以获取解决方案：http: [//forum.foxycart.com/discussion/5370/help-transforming-datafeed-for-3rd-party-integration/p1](http://forum.foxycart.com/discussion/5370/help-transforming-datafeed-for-3rd-party-integration/p1)

这对我帮助很大。

# c# - 如何将复选框或选中的属性从 WinTreeItem 获取到 WinTree（编码 UI）？

> ID：13250842
> 
> 赞同：1
> 
> 时间：2012-11-06T12:14:43.933
> 
> 标签：c#, winforms, coded-ui-tests

我创建了与 WinTree 元素一起使用的编码 UI 测试。我需要检查一些 WinTreeItem 中的“已检查”属性。

我可以从 WinCheckBoxTreeItem 获得“已检查”属性，但我不知道如何获得此复选框。

也许您知道将 WinTreeItem 转换为 WinCheckboxTreeItem 或从 WinTreeItem 获取 WinCheckbox 的方法。

你只是最后的希望！

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T17:46:47.223

尝试使用 Selected 属性： http: [//msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.uitesting.wincontrols.wintreeitem.selected.aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.uitesting.wincontrols.wintreeitem.selected.aspx) 在这种情况下没有 IsChecked 属性但是 Selected 在某种方式

# c# - BAPI_MATERIAL_SAVEDATA 无法更新 J_1IMTCHID 表。任何解决方法？

> ID：13250845
> 
> 赞同：1
> 
> 时间：2012-11-06T12:14:59.960
> 
> 标签：c#, sap, bapi, sap-dotnet-connector

我正在使用 SAP .NET 连接器将 .NET 应用程序与 SAP 连接起来。它与“BAPI_MATERIAL_SAVEDATA”一起工作正常，但我需要更新`J_1IGRXREF`表中的字段`J_1IMTCHID`，该字段在此 BAPI 中不存在。是否可以使用此 BAPI 的扩展来更新此字段？

还是存在任何其他标准 BAPI 用于在创建材料时更新此字段？

在此先感谢，维涅什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T23:13:29.020

在我们的系统（版本 7.02）中，似乎没有通过 RFC (BAPI) 更新此字段的标准方法。如果您正在运行行业解决方案，则可能会发布一些功能来执行此操作，但可能性不大。

您将需要 ABAP 程序员来创建 RFC 来更新此表。 ***警告！！*** 我也无法在 SAP 中找到内部发布的功能模块来更新此表。功能模块`J_1IMTCHID_POST`是我们系统中唯一更新这个表的FM，并且还***没有***发布给客户使用，并且有效的对一个SAP标准表进行了直接的表更新，这是很少可取的。

如果您决定走这条路（或别无选择），请务必确保对该表的任何更新都符合 SAP 对该表的预期用途，因为您的更改会导致数据损坏SAP 维护协议不支持。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-01T14:59:32.023

使用巴迪。它应该可以帮助您实现您想要做的事情。

# tfs - MSBuild 任务或自定义活动以增加版本号

> ID：13250846
> 
> 赞同：2
> 
> 时间：2012-11-06T12:15:07.290
> 
> 标签：tfs, msbuild, continuous-integration

我正在使用 Visual Studio 2012 .NET 4.5 [ASP.NET MVC](http://en.wikipedia.org/wiki/ASP.NET_MVC_Framework) 4 项目，该项目使用 TFS 进行源代码控制，使用 TFS Build 进行[持续集成](http://en.wikipedia.org/wiki/Continuous_integration)(CI)。

我想创建在 CI 构建开始之前每次检查构建号都会更新的功能。

从研究看来，可以在 TFS 2010 构建模板中创建和集成自定义活动。

我还看到了可以通过 MSBuild 任务实现的示例。

我以前没有做过这方面的工作，所以我想知道哪种方法更好，或者根据我的选择，推荐的方法是什么？一般来说，我什么时候会使用 MSBuild 任务而不是自定义活动？例如，我希望将来也针对签入运行[FxCop](http://en.wikipedia.org/wiki/FxCop)和[StyleCop](https://en.wikipedia.org/wiki/StyleCop)，所以我想要一种通用的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T16:34:08.970

在增加内部版本号的情况下，我会投票支持 TFS 构建活动，以便实现不依赖于您的 msbuild 实现。这使您可以轻松地将 TFS 工作流活动应用于任意数量的分支，而无需将其直接绑定到分支。此外，它使您的 MSBuild 项目文件与任务保持干净，这样就不会在开发人员计算机上错误地执行它。

从整体上讲，我想说在 MSBuild 和 Workflow 活动之间做出决定时需要考虑多种因素：

1 - MSBuild 是否支持开箱即用的功能（如代码分析/FxCop）？

2 - 构建步骤是否需要在开发人员盒子和服务器（StyleCop/FxCop）上运行？

3 - 构建步骤是否需要直接与 TFS API 或源代码控制交互（签出/签入版本文件以进行递增）？

4 - 您是否打算稍后将构建作业调度程序更改为免费的（例如，[Jenkins](http://en.wikipedia.org/wiki/Jenkins_%28software%29)）？

正是这些东西的结合决定了我书中任何给定工具集成的实现。我会通过 MSBuild 实现 FxCop、StyleCop 和任何其他应该在开发人员框构建上运行的工具。我将通过代码活动或某些脚本件来实施构建步骤，例如版本递增、bin-placing 和 CI 部署调用（例如，将[SharePoint](http://en.wikipedia.org/wiki/Microsoft_SharePoint) Webpart 部署为构建后步骤）。

# android - Robolectric：使用 ViewHolder 模式测试 ListView 导致 NullPointerException

> ID：13250849
> 
> 赞同：4
> 
> 时间：2012-11-06T12:15:17.293
> 
> 标签：android, robolectric, android-testing

我有一个`ListActivity`它的适配器实现了 ViewHolder 模式。

适配器和视图：

```
private class PlaceAdapter extends ArrayAdapter<PlaceModel> {
    final int viewResourceId;

    public PlaceAdapter(Context context, int textViewResourceId, List<PlaceModel> objects) {
        super(context, textViewResourceId, objects);
        viewResourceId = textViewResourceId;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;

        if (convertView == null) {
            LayoutInflater inflater = getLayoutInflater();
            convertView = inflater.inflate(viewResourceId, null);

            holder = new ViewHolder(convertView);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        PlaceModel place = getItem(position);

        holder.name.setText(place.getName());
        holder.address.setText(place.getVicinity());

        return convertView;
    }
}

private class ViewHolder {
    public final ImageView image;
    public final TextView name;
    public final TextView address;

    public ViewHolder(View row) {
        image = (ImageView) row.findViewById(R.id.placeRow_imageView);
        name = (TextView) row.findViewById(R.id.placeRow_placeName);
        address = (TextView) row.findViewById(R.id.placeRow_placeAddress);
    }
} 
```

当我在这门课上运行 Robolectric 测试时，我得到了`NullPointerException`和`holder.name.setText`线`holder.address.setText`。

我的猜测是 Robolectric 不能`row.findViewById`正确处理。

我该如何解决？

这是一个例外：

```
java.lang.NullPointerException
at com.dgti.ds.activities.ChooseLocationActivity$PlaceAdapter.getView(ChooseLocationActivity.java:181)
at com.xtremelabs.robolectric.shadows.ShadowAdapterView.addViews(ShadowAdapterView.java:314)
at com.xtremelabs.robolectric.shadows.ShadowListView.addViews(ShadowListView.java:167)
at com.xtremelabs.robolectric.shadows.ShadowAdapterView.update(ShadowAdapterView.java:302)
at com.xtremelabs.robolectric.shadows.ShadowAdapterView.access$100(ShadowAdapterView.java:19)
at com.xtremelabs.robolectric.shadows.ShadowAdapterView$1.run(ShadowAdapterView.java:85)
at com.xtremelabs.robolectric.util.Scheduler.postDelayed(Scheduler.java:36)
at com.xtremelabs.robolectric.shadows.ShadowLooper.post(ShadowLooper.java:154)
at com.xtremelabs.robolectric.shadows.ShadowHandler.postDelayed(ShadowHandler.java:52)
at com.xtremelabs.robolectric.shadows.ShadowHandler.post(ShadowHandler.java:47)
at android.os.Handler.post(Handler.java)
at com.xtremelabs.robolectric.shadows.ShadowAdapterView.invalidateAndScheduleUpdate(ShadowAdapterView.java:81)
at com.xtremelabs.robolectric.shadows.ShadowAdapterView.setAdapter(ShadowAdapterView.java:45)
at com.xtremelabs.robolectric.shadows.ShadowListView.setAdapter(ShadowListView.java:83)
at android.widget.ListView.setAdapter(ListView.java)
at com.dgti.ds.activities.ChooseLocationActivity.onSuccess(ChooseLocationActivity.java:119)
at com.dgti.ds.activities.ChooseLocationActivityTests$1.answer(ChooseLocationActivityTests.java:105)
at com.dgti.ds.activities.ChooseLocationActivityTests$1.answer(ChooseLocationActivityTests.java:96)
at org.mockito.internal.stubbing.StubbedInvocationMatcher.answer(StubbedInvocationMatcher.java:34)
at org.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:91)
at org.mockito.internal.handler.NullResultGuardian.handle(NullResultGuardian.java:29)
at org.mockito.internal.handler.InvocationNotifierHandler.handle(InvocationNotifierHandler.java:38)
at org.mockito.internal.creation.MethodInterceptorFilter.intercept(MethodInterceptorFilter.java:51)
at com.dgti.ds.service.DsServiceHelperImp$$EnhancerByMockitoWithCGLIB$$34fcae5f.placeSearch(<generated>)
at com.dgti.ds.service.DsServiceHelper.placeSearch(DsServiceHelper.java:278)
at com.dgti.ds.activities.ChooseLocationActivity.placeSearch(ChooseLocationActivity.java:153)
at com.dgti.ds.activities.ChooseLocationActivity.doSearch(ChooseLocationActivity.java:148)
at com.dgti.ds.activities.ChooseLocationActivity.onCreate(ChooseLocationActivity.java:52)
at com.dgti.ds.activities.ChooseLocationActivityTests.shouldAddPlacesToAdapterOnAPISuccessIfGoogleAPIKeyAlreadySet(ChooseLocationActivityTests.java:112)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
at com.xtremelabs.robolectric.RobolectricTestRunner$1.evaluate(RobolectricTestRunner.java:288)
at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T13:12:19.857

这就是我过去测试支架模式的方式。

```
// Test fields
CustomItem  item;
ListAdapter listAdapter;

@Before
public void setUp() throws Exception {
    listAdapter = new ListAdapter(new Activity());
    item = new CustomItem(whatever, is, important)
    listItemView = listAdapter.getView(item, null, null);
}

@Test
public void shouldRecycleViews() throws Exception {
    View recycleView = View.inflate(new Activity(), R.layout.custom_list_item, null);
    ListAdapter.ViewHolder viewHolder = createViewHolder(recycleView); // Static method in adapter
    recycleView.setTag(viewHolder);
    listItemView = listAdapter.getView(item, recycleView, null);
    assertSame(recycleView, listItemView);
} 
```

# android - 带有来自网络的图像的 AsyncTask 库

> ID：13250850
> 
> 赞同：-1
> 
> 时间：2012-11-06T12:15:17.983
> 
> 标签：android

我有一个问题我无法解决 qal。我已经尝试了所有方法。这是 AsyncTask 的问题，应该是不正确的。

有人可以以正确的方式演示我吗。

```
public class ExibeGallery extends SherlockActivity {
    private Gallery galleryView1;
    @Override   
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.exibegallery);
        Log.i("19", "Chama a gallery");         
        AdaptadordaImagem adp =  new AdaptadordaImagem(this);
        galleryView1 = (Gallery) findViewById(R.id.GaleryView);
        galleryView1.setAdapter(adp);
    } 
}

public class AdaptadordaImagem extends BaseAdapter {
    private Context cont;
    int GalItemBg;
    private String[] myRemoteImages = {
        "http://www.cuboweb.com.br/android/images/1.png",
        "http://www.cuboweb.com.br/android/images/2.png",
        "http://www.cuboweb.com.br/android/images/3.png",
        "http://www.cuboweb.com.br/android/images/4.png", };
        static Bitmap bm;
        private int[] img = {0, 1, 2, 3};
        BitmapFactory.Options bmOptions;
        private Object mGalleryItemBackground;
        ImageView i = null;

    public AdaptadordaImagem(Context c) {
    cont = c;

    i = new ImageView(this.cont);
    PegaImagens pg = new PegaImagens();
    pg.execute();
    Log.i("1", "Adaptador de imagem");  
   }

        private TypedArray obtainStyledAttributes(int[] hellogallery) {
            // TODO Auto-generated method stub
            return null;
        }

        public int getCount() {
            return this.img.length;
        }

        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            Log.i("2", "getView");
            ImageView i = new ImageView(cont);
            i.setBackgroundResource(img[position]);
            i.setLayoutParams(new Gallery.LayoutParams(150, 100));
            i.setBackgroundResource((Integer) mGalleryItemBackground);
            i.setAdjustViewBounds(true);
            return i;   
        }

        public class PegaImagens extends AsyncTask<String[], Void, String> {
            private ProgressDialog progressgallery;

            protected void onPreExecute() {
                Log.i("3", "AsyncTask onPreexecute");
                progressgallery = new ProgressDialog(cont, GalItemBg);
                progressgallery.setTitle("Aguarde...");
                progressgallery.setMessage("Carregando...");
                progressgallery.show();
            }

            public Bitmap loadBitmap(String[] myRemoteImages, BitmapFactory.Options options) {
                Log.i("4", "AsyncTask loadBitmap");
                InputStream in = null;
                int i;
                for (i = 0; i <= 3; i++) {
                    Log.i("5", "AsyncTask loadBitmap for");
                    try {
                        Log.i("5", "AsyncTask loadBitmap for try");
                        in = OpenHttpConnection(myRemoteImages[i]);
                        bm = BitmapFactory.decodeStream(in, null, options);
                        in.close();
                    } catch (IOException e1) {
                        Log.i("6", "AsyncTask loadBitmap for catch");
                        bm = null;
                    }
                }
                return bm;
            }// aqui fecha o load bitmap

            private InputStream OpenHttpConnection(String myRemoteImages) throws IOException {
                Log.i("6", "AsyncTask OpenHttpConnection");
                InputStream inputStream = null;
                URL url = new URL(myRemoteImages);
                URLConnection conn = url.openConnection();
                try {
                    Log.i("7", "AsyncTask OpenHttpConnection try");
                    HttpURLConnection httpConn = (HttpURLConnection) conn;
                    httpConn.setRequestMethod("GET");
                    httpConn.connect();
                    InputStream is = conn.getInputStream();
                    BufferedInputStream bis = new BufferedInputStream(is);
                    Bitmap bm = BitmapFactory.decodeStream(bis);
                    bis.close();
                    is.close();
                    i.setImageBitmap(bm);
                    if (httpConn.getResponseCode() == HttpURLConnection.HTTP_OK) {
                        Log.i("8", "AsyncTask OpenHttpConnection try if");
                        inputStream = httpConn.getInputStream();
                    }
                } catch (Exception ex) {
                    Log.i("9", "AsyncTask OpenHttpConnection catch");
                    i.setImageResource(R.drawable.sem_conexao);
                }
                return inputStream;
            }// aqui fecha o InputStream

            protected String doInBackground(String[]... params) {
                // TODO Auto-generated method stub
                Log.i("10", "AsyncTask doInBackground");
                int x;
                for (x = 0; x <= 3; x++) {
                    Log.i("11", "AsyncTask doInBackground for");
                    try {
                        Log.i("12", "AsyncTask doInBackground for try");
                        bmOptions = new BitmapFactory.Options();
                        bmOptions.inSampleSize = 1;
                    } catch (ArrayIndexOutOfBoundsException erro) {
                        Log.i("13", "AsyncTask doInBackground for try catch1");
                        myRemoteImages[x] = "";
                    } catch (Exception erro) {
                        Log.i("14", "AsyncTask doInBackground for try catch2");
                        myRemoteImages[x] = "";
                    }
                }
                loadBitmap(myRemoteImages, bmOptions);
                return myRemoteImages[x];
            }

            protected void onPostExecute(String[] myRemoteImages) {
                Log.i("15", "AsyncTask onPostExecute ");
                if (!myRemoteImages.equals("")) {
                    // ok
                    Log.i("16", "AsyncTask onPostExecute if ok ");
                    TypedArray a = obtainStyledAttributes(R.styleable.HelloGallery);
                    mGalleryItemBackground = a.getResourceId(R.styleable.HelloGallery_android_galleryItemBackground, 0);
                    a.recycle();
                } else {
                    Log.i("17", "AsyncTask onPostExecute else falha ");
                }
                progressgallery.dismiss();
            }
        }// end async task
    }// end class 
```

错误日志：-

```
11-07 11:51:12.865: W/dalvikvm(529): threadid=1: thread exiting with uncaught exception (group=0x40014760)
11-07 11:51:12.875: E/AndroidRuntime(529): FATAL EXCEPTION: main
11-07 11:51:12.875: E/AndroidRuntime(529): java.lang.NullPointerException
11-07 11:51:12.875: E/AndroidRuntime(529):  at br.com.consulfarma.acs.AdaptadordaImagem.getView(AdaptadordaImagem.java:71)
11-07 11:51:12.875: E/AndroidRuntime(529):  at android.widget.AbsSpinner.onMeasure(AbsSpinner.java:192)
11-07 11:51:12.875: E/AndroidRuntime(529):  at android.view.View.measure(View.java:10828)
11-07 11:51:12.875: E/AndroidRuntime(529):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4351)
11-07 11:51:12.875: E/AndroidRuntime(529):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1284)
11-07 11:51:12.875: E/AndroidRuntime(529):  at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:956)
11-07 11:51:12.875: E/AndroidRuntime(529):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:521)
11-07 11:51:12.875: E/AndroidRuntime(529):  at android.view.View.measure(View.java:10828)
11-07 11:51:12.875: E/AndroidRuntime(529):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4351)
11-07 11:51:12.875: E/AndroidRuntime(529):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:267)
11-07 11:51:12.875: E/AndroidRuntime(529):  at android.view.View.measure(View.java:10828)
11-07 11:51:12.875: E/AndroidRuntime(529):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:764)
11-07 11:51:12.875: E/AndroidRuntime(529):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:519)
11-07 11:51:12.875: E/AndroidRuntime(529):  at android.view.View.measure(View.java:10828)
11-07 11:51:12.875: E/AndroidRuntime(529):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4351)
11-07 11:51:12.875: E/AndroidRuntime(529):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:267)
11-07 11:51:12.875: E/AndroidRuntime(529):  at android.view.View.measure(View.java:10828)
11-07 11:51:12.875: E/AndroidRuntime(529):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4351)
11-07 11:51:12.875: E/AndroidRuntime(529):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1284)
11-07 11:51:12.875: E/AndroidRuntime(529):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:613)
11-07 11:51:12.875: E/AndroidRuntime(529):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:519)
11-07 11:51:12.875: E/AndroidRuntime(529):  at android.view.View.measure(View.java:10828)
11-07 11:51:12.875: E/AndroidRuntime(529):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4351)
11-07 11:51:12.875: E/AndroidRuntime(529):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:267)
11-07 11:51:12.875: E/AndroidRuntime(529):  at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:1890)
11-07 11:51:12.875: E/AndroidRuntime(529):  at android.view.View.measure(View.java:10828)
11-07 11:51:12.875: E/AndroidRuntime(529):  at android.view.ViewRoot.performTraversals(ViewRoot.java:909)
11-07 11:51:12.875: E/AndroidRuntime(529):  at android.view.ViewRoot.handleMessage(ViewRoot.java:2003)
11-07 11:51:12.875: E/AndroidRuntime(529):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-07 11:51:12.875: E/AndroidRuntime(529):  at android.os.Looper.loop(Looper.java:132)
11-07 11:51:12.875: E/AndroidRuntime(529):  at android.app.ActivityThread.main(ActivityThread.java:4025)
11-07 11:51:12.875: E/AndroidRuntime(529):  at java.lang.reflect.Method.invokeNative(Native Method)
11-07 11:51:12.875: E/AndroidRuntime(529):  at java.lang.reflect.Method.invoke(Method.java:491)
11-07 11:51:12.875: E/AndroidRuntime(529):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
11-07 11:51:12.875: E/AndroidRuntime(529):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
11-07 11:51:12.875: E/AndroidRuntime(529):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:37:38.210

The failure is the following line:

```
ImageView i = new ImageView(this.cont); 
```

Add this line to the contructor, like this:

```
//this line edited;
ImageView i = null;

public AdaptadordaImagem(Context c) {
    cont = c;

    //this line added
    i = new ImageView(this.cont);

    PegaImagens pg = new PegaImagens();
    pg.execute();
    Log.i("1", "Adaptador de imagem");
} 
```

Or even delete it because seems like isn't really used in your code (create new ImageView i on the getView method).

Hope it helps. Saludos

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:19:46.923

看起来您的 img 从未初始化过，至少在发布的代码中是这样。如果是这样，getCount() 理所当然地为空。

如果这是真的，你将需要类似的东西：

```
private int[] img = someIntArrayWithYourIds; 
```

**编辑：**澄清：

尝试在 getCount 的这一行中设置调试器断点并查看 img 和 img.length 的值：

```
 return this.img.length; 
```

有可能， img 在那里为空。

# sql - 如何使用 sql 检测错误的序列列？

> ID：13250851
> 
> 赞同：3
> 
> 时间：2012-11-06T12:15:17.037
> 
> 标签：sql, sql-server

我有这张桌子

```
ID  |  Seq  
------------
 A      1      
 A      2      
 A      3      
 B      1      
 B      2     
 B      3     
 B      3     <--duplicate seq where ID=B
 C      1     
 C      2
 C      4     <--missing seq id number 3
 D      1
 D      2
 .      .
 .      . 
```

有没有办法检测 Seq 列的逻辑是否/何时出现错误，特别是是否存在跳转和/或重复。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T12:21:05.483

试试这个：

这应该**在 sql server 和 Oracle 中都有效**

```
select ID,seq
       from(
            select ID,seq,
                   row_number() over (partition by id order by seq ) rn
            from t_seq)a
where a.seq<>a.rn 
```

# [SQL 服务器的 SQL 小提琴演示](http://www.sqlfiddle.com/#!3/c01a1/2)

# [Oracle 的 SQL Fiddle 演示](http://www.sqlfiddle.com/#!4/03c2c/8)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T12:20:08.460

这些都与 SQL 无关，因此几乎可以在任何 rdbms 中使用。

这将检查序列中的中断：

```
select t1.id, t1.seq
from t_seq t1
where
  t1.seq <> 1
  and not exists (
    select *
     from t_seq t2
    where t2.id = t1.id
      and t2.seq = t1\. seq - 1    
) 
```

这将检查重复项：

```
select t1.id, t1.seq
from mytable t1
group by t1.id, t1.se1
having count(*) > 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:24:21.860

要获取重复项，您可以使用以下 T-SQL。

```
 SELECT ID, Seq FROM MyTable GROUP BY ID, Seq HAVING COUNT(Seq) > 1 
```

**编辑**

为了找出丢失的序列号，我将 njr101 提供的代码更新为：

```
SELECT ID, Seq FROM MyTable t1 WHERE ID IN ( 
    SELECT ID FROM MyTable    
    GROUP BY ID
    HAVING COUNT(DISTINCT Seq) <> MAX(Seq)
) AND t1.seq <> 1 AND NOT EXISTS (
    SELECT * FROM MyTable t2 WHERE t2.id=t1.id AND t2.seq = t1.seq - 1
)
ORDER BY ID 
```

第一个子查询计算该 ID 的不同行数（忽略重复项）。如果该数字与结果集中包含的最大数字相同，则该 ID 的值应该没问题。如果不相等，则结果将在子查询中可用。

第二部分（借助 njr101 的查询）过滤结果集以仅包含最后一个 ID 和 seq 应插入缺失值的位置。结果如下：

```
My Data
=========
A   1
A   2
A   3
A   20 <--- Missing (displayed in results)
B   1
B   2
B   3
B   3
B   4
C   1
C   2
C   4 <--- Missing (displayed in results)
C   5
C   15 <--- Missing (displayed in results)
C   16

Results
=======
A   20
C   4
C   15 
```

# javascript - 一个小代码让我在这个 gem 中感到困惑----主干引导导轨

> ID：13250854
> 
> 赞同：1
> 
> 时间：2012-11-06T12:15:30.290
> 
> 标签：javascript, ruby-on-rails, gem, twitter-bootstrap-rails

在 bootstrap.js.coffee 中，有一些代码：

```
define [], ->
  App =
    Models: {}
    Collections: {}
    Routers: {}
    Helpers: {}
    Views: {
      Posts: {}
      Common: {}
      Sessions: {}
      Tokens: {}
      Passwords: {}
      Confirmations: {}
    } 
```

我不明白为什么“定义”方法在 js 代码中？而且，在其他代码中，这种“定义”方法无处不在！

资产/javascripts/models/post.js.coffee

```
define ['backbone', 'bootstrap'], (Backbone, App) ->
  class App.Models.Post extends Backbone.Model
    paramRoot: 'post'
    urlRoot: '/posts'

    defaults:
      title: null
      content: null 
```

我想知道方法---“定义”，方法是做什么的，为什么我找不到要写的方法细节？？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:16:21.957

我不是 JavaScript 人，但我相信这是 RequireJS 的一部分。

根据[docs](http://requirejs.org/docs/api.html#defdep)，它似乎正在定义具有依赖关系的函数：

> 如果模块具有依赖项，则第一个参数应该是依赖项名称的数组，第二个参数应该是定义函数。加载所有依赖项后，将调用该函数来定义模块。该函数应该返回一个定义模块的对象。依赖项将作为函数参数传递给定义函数，按照与依赖项数组中的顺序相同的顺序列出：

```
//my/shirt.js now has some dependencies, a cart and inventory
//module in the same directory as shirt.js
define(["./cart", "./inventory"], function(cart, inventory) {
        //return an object to define the "my/shirt" module.
        return {
            color: "blue",
            size: "large",
            addToCart: function() {
                inventory.decrement(this);
                cart.add(this);
            }
        }
    }
); 
```

> 在此示例中，创建了一个 my/shirt 模块。这取决于我的/购物车和我的/库存。在磁盘上，文件的结构如下：
> 
> *   我的/cart.js
> *   我的/inventory.js
> *   我的/shirt.js
> 
> 上面的函数调用指定了两个参数，“cart”和“inventory”。这些是由“./cart”和“./inventory”模块名称表示的模块。
> 
> 在加载 my/cart 和 my/inventory 模块之前，不会调用该函数，并且该函数将模块作为“cart”和“inventory”参数接收。
> 
> 明确不鼓励定义全局变量的模块，以便一个模块的多个版本可以同时存在于一个页面中（请参阅高级用法）。此外，函数参数的顺序应与依赖项的顺序相匹配。
> 
> 函数调用的返回对象定义了“my/shirt”模块。通过以这种方式定义模块，“my/shirt”不会作为全局对象存在。

# c++ - g++自定义动态库链接错误未定义符号

> ID：13250856
> 
> 赞同：1
> 
> 时间：2012-11-06T12:15:36.240
> 
> 标签：c++, linux, linker, g++, shared-libraries

好的，我现在正在寻找 2 天的解决方案。我没有找到任何东西可以解决我的问题。

目前正在发生什么？因此，我尝试使用 g++ 在 Linux Mint Maya 13 上创建动态库 (.so)。

傻瓜.h：

```
#pragma once
#include <stdio.h>

void foo(
    void
    ); 
```

傻瓜.cpp：

```
#include "foolib.h"

void foo(
    void
    )
{
   printf ("Hello World!\n");
}; 
```

主.cpp：

```
#include "foolib.h"

int main(
    int    argc,
    char** argv
    )
{
    foo ();
}; 
```

我使用以下说明编译了这些文件：

libfoo.so：

```
g++ -shared -o libfoo.so -fpic foolib.cpp 
```

富：

```
g++ main.cpp -o foo -L -lfoo 
```

创建 libfoo.so 没有任何错误，但 foo 会抛出未定义的引用“foo”。我从几个网页复制了示例代码并尝试编译它，结果总是相同。

有趣的是，我可以链接做 libdl.so (-ldl)，加载我的 .so 和我的函数。我究竟做错了什么？

我希望我能正确地提出我的问题。如果我没有，请告诉我。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T12:25:41.653

你应该使用：

```
g++ main.cpp -o foo -L./ -lfoo 
```

或者

```
g++ main.cpp -o foo libfoo.so 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T12:26:32.923

您声明您的 foo 编译/链接与`g++ main.cpp -o foo -L -lfoo`，这就是问题所在。该`-L`选项需要一个参数，该参数为链接器提供了一个额外的目录来搜索库，但您尚未提供它。因此，在您的情况下，链接器认为`-lfoo`是要搜索的目录的名称，而不是要链接的库。

更改`-L`为`-L.`它应该可以工作。

有关详细信息，请参阅[此文档](http://gcc.gnu.org/onlinedocs/gcc-3.2/gcc/Directory-Options.html#Directory%20Options)。

# php - Html 解析器只想将特定的东西保存在特定的标签中

> ID：13250863
> 
> 赞同：1
> 
> 时间：2012-11-06T12:16:02.533
> 
> 标签：php, html, html-parsing

我想解析html数据。我想删除标签内我不关心的所有数据以及标签本身。我只想保留特定跨度类中的数据。但是，也要删除 span 标签。

是否可能已经为此在线预建脚本？如果不是最好的方法是什么，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:01:31.427

好吧，为什么不呢？我深情地记得所有文件似乎在我脑海中盘旋的时候，就像一个酒鬼的房间。

有很多不同的方法可以解决这个问题，我在上面的评论中只介绍了一种。我可以看到的 3 种方法是：

1.  获取跨度列表，检查适当的类，如果类是目标类，则获取文本。
2.  假设只有目标跨度将具有 tgt 类。获取具有此类名称的元素列表，获取列表中所有元素的文本。
3.  使用 DOM 函数获取具有 tgt 类名的所有跨度的列表。获取列表中所有元素的文本。

一个快速示例，使用来自谷歌搜索页面的结果：

Javascript：

```
// getElementsByTagName, getElementsByClass - both return a NodeList
// it is accessed in the same way as an array - with the [] operators, but it's
// not an array object - this is a function that allows us to still iterate through it
// in much the same way.
function forEachNode(nodeList, func)
{
    var i, n = nodeList.length;
    for (i=0; i<n; i++)
    {
        func(nodeList[i], i, nodeList);
    }
}

function grabTextFromSpans()
{
    //
    //  1\. - assume elements other than span will possess the target className.
    //       onlty get elements that are (a) a span and (b) have the right className
    var spanList = document.getElementsByTagName('span');
    var validList = [], stringList = [];

    forEachNode(spanList, function(curItem){ if (curItem.className == 'st') validList.push(curItem);} );

    validList.forEach( function(elem){ stringList.push(elem.innerText);} );
    var mStr = '';
    stringList.forEach(function(elem){mStr += elem + "\n";});
    alert(mStr);

    //
    //  2\. - assume only the target elements will possess the target className
    //
    var mStr = '';
    var tgtList = document.getElementsByClassName('st');
    forEachNode(tgtList, function(curElem){mStr += curElem.innerText + "\n";} );
    alert(mStr);

    //
    // 3\. - assume that tgt elements are spans and have a specific className
    //
    var mStr = '';
    var tgtList = document.querySelectorAll('span.st');
    forEachNode(tgtList, function(curElem){mStr += curElem.innerText + "\n";} );
    alert(mStr);
} 
```

HTML：

```
<ol eid="S-WYUPKzGI7JmAWAr4CwBw" id="rso"><!--m--><li class="g"><div class="vsc" sig="u1z">  <div data-ved="0CCQQkgowAA">  <div data-ved="0CCUQkQowAA"> </div>   </div><div class="vspib" aria-label="Result details" role="button" tabindex="0"><div class="vspii"><div class="vspiic"></div></div></div>   <h3 class="r"><a href="http://bebraw.github.com/colorjs/" class="l" onmousedown="return rwt(this,'','','','1','AFQjCNFuHzNJryRAA9QBjqC1250RDZAMCQ','','0CCYQFjAA',null,event)">Colorjs by bebraw</a></h3><div class="s"><div class="f kv"><cite>bebraw.github.com/colorjs/</cite><span class="vshid"><a href="http://webcache.googleusercontent.com/search?q=cache:eSrglCqgBAkJ:bebraw.github.com/colorjs/+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=au" onmousedown="return rwt(this,'','','','1','AFQjCNEm0e9Xr7p0eOh7TWkQ81JoqWQNfQ','','0CCcQIDAA',null,event)">Cached</a></span></div><div class="esc slp" id="poS0" style="display:none">You +1'd this publicly.&nbsp;<a href="#" class="fl">Undo</a></div><span class="st">colorjs provides simple API that may be used to create colors (<em>RGBA</em>, <em>HSVA</em>, <em>HSLA</em>) and perform various color related operations (conversions and such).<br></span></div></div><!--n--></li><!--m--><li class="g"><div class="vsc" sig="kDj">  <div data-ved="0CCkQkgowAQ">  <div data-ved="0CCoQkQowAQ"> </div>   </div><div class="vspib" aria-label="Result details" role="button" tabindex="0"><div class="vspii"><div class="vspiic"></div></div></div>   <h3 class="r"><a href="https://github.com/bebraw/colorjs" class="l" onmousedown="return rwt(this,'','','','2','AFQjCNFRF9AfGrmbF5E6IhyKId0ztwA7sQ','','0CCsQFjAB',null,event)">bebraw/colorjs · GitHub</a></h3><div class="s"><div class="f kv"><cite>https://github.com/bebraw/colorjs</cite><span class="vshid"><a href="http://webcache.googleusercontent.com/search?q=cache:WtA6gOF2ZqEJ:https://github.com/bebraw/colorjs+&amp;cd=2&amp;hl=en&amp;ct=clnk&amp;gl=au" onmousedown="return rwt(this,'','','','2','AFQjCNHqdXwTalbWocgzhnaRA1EKTkyMzQ','','0CCwQIDAB',null,event)">Cached</a></span></div><div class="esc slp" id="poS1" style="display:none">You +1'd this publicly.&nbsp;<a href="#" class="fl">Undo</a></div><span class="st">colorjs provides simple API that may be used to create colors (<em>RGBA</em>, <em>HSVA</em>, <em>HSLA</em>) and perform various color related operations (conversions and such).<br></span></div></div><!--n--></li><!--m--><li class="g"><div class="vsc" sig="PWh">  <div data-ved="0CC4QkgowAg">  <div data-ved="0CC8QkQowAg"> </div>   </div><div class="vspib" aria-label="Result details" role="button" tabindex="0"><div class="vspii"><div class="vspiic"></div></div></div>   <h3 class="r"><a href="http://www.pygame.org/docs/ref/color.html" class="l" onmousedown="return rwt(this,'','','','3','AFQjCNFFK5xPcE_2Yl9D8NhHmBbb_Y8UJg','','0CDAQFjAC',null,event)">color - Pygame Documentation</a></h3><div class="s"><div class="f kv"><cite>www.pygame.org/docs/ref/color.html</cite><span class="vshid"><a href="http://webcache.googleusercontent.com/search?q=cache:zXwLCILEH14J:www.pygame.org/docs/ref/color.html+&amp;cd=3&amp;hl=en&amp;ct=clnk&amp;gl=au" onmousedown="return rwt(this,'','','','3','AFQjCNGwtfM-FoMMusa6z3-GjN68_lw5BQ','','0CDEQIDAC',null,event)">Cached</a>&nbsp;-&nbsp;<a href="/search?hl=en&amp;safe=off&amp;q=related:www.pygame.org/docs/ref/color.html+hlsa+hsva+rgba&amp;tbo=1&amp;sa=X&amp;ei=S-WYUPKzGI7JmAWAr4CwBw&amp;ved=0CDIQHzAC">Similar</a></span></div><div class="esc slp" id="poS2" style="display:none">You +1'd this publicly.&nbsp;<a href="#" class="fl">Undo</a></div><span class="st">Color.<em>hsva</em> - Gets or sets the <em>HSVA</em> representation of the Color. Gets or sets the <b>...</b> Color.<em>hsla</em> - Gets or sets the <em>HSLA</em> representation of the Color. Gets or sets <b>...</b> Color.normalize - Returns the normalized <em>RGBA</em> values of the Color. Returns the <b>...</b><br></span></div></div><!--n--></li><!--m--><li class="g"><div class="vsc" sig="8Ft">  <div data-ved="0CDQQkgowAw">  <div data-ved="0CDUQkQowAw"> </div>   </div><div class="vspib" aria-label="Result details" role="button" tabindex="0"><div class="vspii"><div class="vspiic"></div></div></div>   <h3 class="r"><a href="http://softimage.wiki.softimage.com/sdkdocs/sicppsdk/html/classXSI_1_1MATH_1_1CColor4f.html" class="l" onmousedown="return rwt(this,'','','','4','AFQjCNFu-Fgfc5DxRWUiz6rFQcmtu8VxQw','','0CDYQFjAD',null,event)">CColor4f Class Reference</a></h3><div class="s"><div class="f kv"><cite>softimage.wiki.softimage.com/.../classXSI_1_1MATH_1_1CColor4f....</cite><span class="vshid"><a href="http://webcache.googleusercontent.com/search?q=cache:a3m9eQIkVpcJ:softimage.wiki.softimage.com/sdkdocs/sicppsdk/html/classXSI_1_1MATH_1_1CColor4f.html+&amp;cd=4&amp;hl=en&amp;ct=clnk&amp;gl=au" onmousedown="return rwt(this,'','','','4','AFQjCNE2tLroL_B4pfp_-yHsgN77HgygkA','','0CDcQIDAD',null,event)">Cached</a></span></div><div class="esc slp" id="poS3" style="display:none">You +1'd this publicly.&nbsp;<a href="#" class="fl">Undo</a></div><span class="st">Detailed Description. A color class represented by single floating values. CColor4f supports the <em>RGBA</em>, <em>HSVA</em> and <em>HLSA</em> color models.<br></span></div></div><!--n--></li><!--m--><li class="g"><div class="vsc" sig="E2M">  <div data-ved="0CDkQkgowBA">  <div data-ved="0CDoQkQowBA"> </div>   </div><div class="vspib" aria-label="Result details" role="button" tabindex="0"><div class="vspii"><div class="vspiic"></div></div></div>   <h3 class="r"><a href="http://api.call-cc.org/doc/imlib2" class="l" onmousedown="return rwt(this,'','','','5','AFQjCNHJCEk0145qLjFUDow7uz6--d9ecQ','','0CDsQFjAE',null,event)">imlib2 | chickadee</a></h3><div class="s"><div class="f kv"><cite>api.call-cc.org/doc/imlib2</cite><span class="vshid"><a href="http://webcache.googleusercontent.com/search?q=cache:f3rEHKk7xdQJ:api.call-cc.org/doc/imlib2+&amp;cd=5&amp;hl=en&amp;ct=clnk&amp;gl=au" onmousedown="return rwt(this,'','','','5','AFQjCNFIOeaytJwKaUCFahhv0rZYsCrtNA','','0CDwQIDAE',null,event)">Cached</a></span></div><div class="esc slp" id="poS4" style="display:none">You +1'd this publicly.&nbsp;<a href="#" class="fl">Undo</a></div><span class="st">Create a color specifier for the given <em>RGBA</em> values. (color/<em>hsva h s v a</em>) =&gt; color procedure. Create a color specifier for the given <em>HSVA</em> values. (color/<em>hlsa h l s a</em>) <b>...</b><br></span></div></div><!--n--></li><!--m--><li class="g"><div class="vsc" sig="QIQ">  <div data-ved="0CD4QkgowBQ">  <div data-ved="0CD8QkQowBQ"> </div>   </div><div class="vspib" aria-label="Result details" role="button" tabindex="0"><div class="vspii"><div class="vspiic"></div></div></div>   <h3 class="r"><a href="http://download.autodesk.com/global/docs/softimage2013/en_us/userguide/files/shaderpresets690.htm" class="l" onmousedown="return rwt(this,'','','','6','AFQjCNEcMDDSe_MGltcAPZgdz_Xba5qhrA','','0CEAQFjAF',null,event)">Softimage User's Guide: Scalar Matte</a></h3><div class="s"><div class="f kv"><cite>download.autodesk.com/global/docs/.../en.../shaderpresets690.htm</cite><span class="vshid"><a href="http://webcache.googleusercontent.com/search?q=cache:7EBn3t17As0J:download.autodesk.com/global/docs/softimage2013/en_us/userguide/files/shaderpresets690.htm+&amp;cd=6&amp;hl=en&amp;ct=clnk&amp;gl=au" onmousedown="return rwt(this,'','','','6','AFQjCNH9A6Y1UtnSCaNB5fq9oEMv6l6dIQ','','0CEEQIDAF',null,event)">Cached</a></span></div><div class="esc slp" id="poS5" style="display:none">You +1'd this publicly.&nbsp;<a href="#" class="fl">Undo</a></div><span class="st">Determines which color model you will select a color from: <em>RGBA</em>, <em>HLSA</em>, or <em>HSVA</em>. Channel. Selects the color channel. You can only select from this parameter if <b>...</b><br></span></div></div><!--n--></li><!--m--><li class="g"><div class="vsc" sig="ziI">  <div data-ved="0CEMQkgowBg">  <div data-ved="0CEQQkQowBg"> </div>   </div><div class="vspib" aria-label="Result details" role="button" tabindex="0"><div class="vspii"><div class="vspiic"></div></div></div>   <h3 class="r"><a href="http://packages.python.org/python-igraph/igraph.drawing.colors-module.html" class="l" onmousedown="return rwt(this,'','','','7','AFQjCNFXOQ9ZwDTXEYanvZb2l-be3NWrvg','','0CEUQFjAG',null,event)">igraph.drawing.colors.color_name_to_rgba</a></h3><div class="s"><div class="f kv"><cite>packages.python.org/python.../igraph.drawing.colors-module.html</cite><span class="vshid"><a href="http://webcache.googleusercontent.com/search?q=cache:YiCWholHT38J:packages.python.org/python-igraph/igraph.drawing.colors-module.html+&amp;cd=7&amp;hl=en&amp;ct=clnk&amp;gl=au" onmousedown="return rwt(this,'','','','7','AFQjCNE-O44T9i6KfHzrDu2_TN6q5khIDg','','0CEYQIDAG',null,event)">Cached</a></span></div><div class="esc slp" id="poS6" style="display:none">You +1'd this publicly.&nbsp;<a href="#" class="fl">Undo</a></div><span class="f">10+ items – </span><span class="st">Converts a color given by its <em>RGBA</em> coordinates to <em>HSVA</em> <b>...</b><br></span><table class="tsnip"><tbody><tr><td>hsla_to_rgba</td><td>l</td><td>1.0</td><td>Converts a color given by its <em>HSLA</em> coordinates (hue <b>...</b></td></tr><tr><td>rgba_to_hsva</td><td>b</td><td>1.0</td><td>Converts a color given by its <em>RGBA</em> coordinates to <b>...</b></td></tr></tbody></table></div></div><!--n--></li><!--m--><li class="g"><div class="vsc" sig="ELy">  <div data-ved="0CEkQkgowBw">  <div data-ved="0CEoQkQowBw"> </div>   </div><div class="vspib" aria-label="Result details" role="button" tabindex="0"><div class="vspii"><div class="vspiic"></div></div></div>   <h3 class="r"><a href="http://xrvg.rubyforge.org/rdoc/classes/XRVG/Color.html" class="l" onmousedown="return rwt(this,'','','','8','AFQjCNFa4U6Y0BceJtaHJrjPYBL9uluwiQ','','0CEsQFjAH',null,event)">Class: XRVG::Color</a></h3><div class="s"><div class="f kv"><cite>xrvg.rubyforge.org/rdoc/classes/XRVG/Color.html</cite><span class="vshid"><a href="http://webcache.googleusercontent.com/search?q=cache:xzEzVZQqjlsJ:xrvg.rubyforge.org/rdoc/classes/XRVG/Color.html+&amp;cd=8&amp;hl=en&amp;ct=clnk&amp;gl=au" onmousedown="return rwt(this,'','','','8','AFQjCNHAiQ1acFXS45OCe2dh8t04dv79Zw','','0CEwQIDAH',null,event)">Cached</a></span></div><div class="esc slp" id="poS7" style="display:none">You +1'd this publicly.&nbsp;<a href="#" class="fl">Undo</a></div><span class="st"><b>...</b> blue complement format255 g g= green grey hsl <em>hsla hsla</em> hsv <em>hsva hsva</em> hue <b>...</b> rgb2h rgb2hsl rgb2hsv rgb2sl rgb2sv <em>rgba</em> saturation svg value white yellow <b>...</b><br></span></div></div><!--n--></li><!--m--><li class="g"><div class="vsc" sig="AMw">  <div data-ved="0CE4QkgowCA">  <div data-ved="0CE8QkQowCA"> </div>   </div><div class="vspib" aria-label="Result details" role="button" tabindex="0"><div class="vspii"><div class="vspiic"></div></div></div>   <h3 class="r"><a href="http://pygame.readthedocs.org/en/latest/ref/color.html" class="l" onmousedown="return rwt(this,'','','','9','AFQjCNFAhMqlvpl3nu5ke-K5EGXFjdObuA','','0CFAQFjAI',null,event)">pygame.Color — Pygame v1.9.2 documentation</a></h3><div class="s"><div class="f kv"><cite>pygame.readthedocs.org/en/latest/ref/color.html</cite><span class="vshid"><a href="http://webcache.googleusercontent.com/search?q=cache:y8n_BdkVwnMJ:pygame.readthedocs.org/en/latest/ref/color.html+&amp;cd=9&amp;hl=en&amp;ct=clnk&amp;gl=au" onmousedown="return rwt(this,'','','','9','AFQjCNFUzsehzHw76YNkL-4oahK-n-JvIA','','0CFEQIDAI',null,event)">Cached</a></span></div><div class="esc slp" id="poS8" style="display:none">You +1'd this publicly.&nbsp;<a href="#" class="fl">Undo</a></div><span class="st">Color.<em>hsva</em>, —, Gets or sets the <em>HSVA</em> representation of the Color. <b>...</b> The Color class represents <em>RGBA</em> color values using a value range of 0-255\. <b>...</b> The <em>HSLA</em>  components are in the ranges H = [0, 360], S = [0, 100], V = [0, 100], A = [0, 100].<br></span></div></div><!--n--></li><!--m--><li class="g"><div class="vsc">  <div data-ved="0CFMQkgowCQ">  <div data-ved="0CFQQkQowCQ"> </div>   </div><div class="vspib" aria-label="Result details" role="button" tabindex="0"><div class="vspii"><div class="vspiic"></div></div></div>   <h3 class="r"><a href="http://pypixel.googlecode.com/svn-history/r5/trunk/pypixel.py" class="l" onmousedown="return rwt(this,'','','','10','AFQjCNFn-7_0BAq_upcNihBWBYg3GediLg','','0CFUQFjAJ',null,event)">#!/usr/bin/python # # TODO # Thread pypixel so that the end user <b>...</b></a></h3><div class="s"><div class="f kv"><cite>pypixel.googlecode.com/svn-history/r5/trunk/pypixel.py</cite><span class="vshid"><a href="http://webcache.googleusercontent.com/search?q=cache:-prP6iP75CAJ:pypixel.googlecode.com/svn-history/r5/trunk/pypixel.py+&amp;cd=10&amp;hl=en&amp;ct=clnk&amp;gl=au" onmousedown="return rwt(this,'','','','10','AFQjCNE0O_xZcdco81OFkgu3JTMawmr5LQ','','0CFYQIDAJ',null,event)">Cached</a></span></div><div class="esc slp" id="poS9" style="display:none">You +1'd this publicly.&nbsp;<a href="#" class="fl">Undo</a></div><span class="st">TODO # Write color wrapper for <em>HSVA</em>, <em>HSLA</em>, <em>RGBA</em> # import random as randy import pygame from pygame.locals import * # Screen size WIDTH = 640 HEIGHT <b>...</b><br></span></div></div><!--n--></li></ol> 
```

# c1-cms - 向 Composite.News 添加预告图像

> ID：13250869
> 
> 赞同：0
> 
> 时间：2012-11-06T12:16:08.357
> 
> 标签：c1-cms

是否可以将预告图添加到默认`Composite.News`包中？开箱即用的新闻分机。带来了我需要的一切，但在我的情况下缺少列表视图的预告图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T07:01:51.977

是的，但这需要使用包进行修改。

1.  编辑新闻数据类型：转到**数据**->**页面**数据文件夹-> 找到**Composite.News.NewsItem** -> 右键单击​​ -> **编辑**-> 在**字段**选项卡上添加新字段，例如名为“TeaserImage”，字段类型 = 数据参考，参考类型 = C1 图像文件，可选 = 是 -> 保存数据类型。

2.  修改**新闻表单标记**：新闻数据项包含自定义表单标记，因此新添加的字段不会自动出现在那里，因此您应该手动为新字段添加标记：转到**数据**->**页面数据文件夹**-> 找到**复合.News.NewsItem** -> 右键单击​​ ->**编辑表单标记**-> 为新的 TeaserImage 字段添加标记：

```
 <cms:binding name="TeaserImage" type="System.String" optional="true" />

    </cms:bindings>
<cms:layout>
    <cms:layout.label>
        <cms:read source="Title" />
    </cms:layout.label>
    <TabPanels>
        <PlaceHolder Label="Settings">
            <FieldGroup>
                ...
                <TextArea Label="Teaser" Help="The short description of the news item">
                    <TextArea.Text>
                        <cms:bind source="Teaser" />
                    </TextArea.Text>
                </TextArea>
                <DataReferenceTreeSelector Label="TeaserImage" Help="" Handle="Composite.Management.ImageSelectorDialog" SearchToken="Composite.Plugins.Elements.ElementProviders.MediaFileProviderElementProvider.MediaFileSearchToken,Composite|MimeTypes=',\ \'image/gif\',\ \'image/jpeg\',\ \'image/png\',\ \'image/bmp\'', Extensions=null, Folder=null, HideSubfolders='False', Keyword=null" DataType="Composite.Data.Types.IImageFile,Composite" NullValueAllowed="true">
                       <DataReferenceTreeSelector.Selected>
                        <cms:bind source="TeaserImage" />
                      </DataReferenceTreeSelector.Selected>
                       </DataReferenceTreeSelector>
            </FieldGroup>
        </PlaceHolder>
        <XhtmlEditor Label="News Story" Help="News Story" ClassConfigurationName="common">
            ...
        </XhtmlEditor>

    </TabPanels>
</cms:layout> 
```

1.  修改 XSLT 函数**Composite.News.NewsList** -> 编辑函数调用“GetNewsItemXml” -> 修改 Selected 字段（选择新的 TeaserImage 字段）， -> 编辑函数 Template 并在要呈现 Tease Image 的位置添加代码。

# sharepoint - 以编程方式获取团队项目的 SharePoint URL

> ID：13250871
> 
> 赞同：6
> 
> 时间：2012-11-06T12:16:12.073
> 
> 标签：sharepoint, tfs

我想通过编码找出给定的团队项目是否有关联的 SharePoint。如果是，我还想获取 SharePoint 的 URL，以便创建指向它的特定链接。

我不是指 TFS 的 Web 访问，而是相关的 SharePoint。有没有办法在不知道与 TFS 服务器不同的 SharePoint 服务器的 URL 的情况下找出这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T22:17:48.227

```
using Microsoft.TeamFoundation.Client;
using Microsoft.TeamFoundation.Server;

private static string RetrieveProjectPortalBaseAddress(TfsTeamProjectCollection tfs, string teamProject)
{
   IRegistration registration = (IRegistration)tfs.GetService(typeof(IRegistration));
   RegistrationEntry[] entries = registration.GetRegistrationEntries("TeamProjects");
   ServiceInterface endpoint = entries[0].ServiceInterfaces.FirstOrDefault(si => si.Name == teamProject + ":Portal");
   return endpoint.Url;
} 
```

# r - 使用 ggplot2 重塑数据以在 R 中绘制

> ID：13250872
> 
> 赞同：8
> 
> 时间：2012-11-06T12:16:14.560
> 
> 标签：r, plot, ggplot2, reshape

我想使用 ggplot2 绘制 3 条线。我的数据看起来像这样

```
print(x)
     V1       V2       V3      V4
 1 -4800 25195.73 7415.219 7264.28
 2 -2800 15195.73 5415.219 7264.28 
```

从这个例子中，我知道我需要将我的数据重塑成这样的东西：

```
 id       x       y      
1     1     -4800   25195.73 
2     1     -2800   15195.73
3     2     -4800   7415.219
4     2     -2800   5415.219
5     3     -4800   7264.28
6     3     -2800   7264.28 
```

我该如何进行这种重塑？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T12:19:05.627

采用`reshape2`

```
library(reshape2)

 x$id <- seq_len(nrow(x))
melted <- melt(x, id.vars = c('id','V1'))
# rename
names(melted) <- c('id', 'x', 'variable', 'y') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-07-30T06:44:00.527

现在用新的很简单`tidyr::pivot_longer`

```
library(tidyverse)

mydat <- read.table(text = "V1       V2       V3      V4
1 -4800 25195.73 7415.219 7264.28
2 -2800 15195.73 5415.219 7264.28") 

mydat %>% pivot_longer(cols = -V1) 
#> # A tibble: 6 x 3
#>      V1 name   value
#>   <int> <chr>  <dbl>
#> 1 -4800 V2    25196.
#> 2 -4800 V3     7415.
#> 3 -4800 V4     7264.
#> 4 -2800 V2    15196.
#> 5 -2800 V3     5415.
#> 6 -2800 V4     7264.

# or you could then pipe this directly to your ggplot call 
mydat %>% 
  pivot_longer(cols = -V1) %>%
  ggplot(aes(V1, value, color = name)) +
  geom_line() 
```

![](../Images/e39edb3f1b6dbdc9d565c0d645cecfc2.png)

^(由[reprex 包](https://reprex.tidyverse.org)（v0.3.0）于 2020-07-30 创建)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T05:30:39.480

基本重塑可以解决问题：

```
oldx = read.table(textConnection("V1 V2 V3 V4  
-4800 25195.73 7415.219 7264.28  
-2800 15195.73 5415.219 7264.28"), header=TRUE) 

print(oldx)  
     V1       V2       V3      V4  
1 -4800 25195.73 7415.219 7264.28  
2 -2800 15195.73 5415.219 7264.28 
```

现在运行这个：

```
newx<-reshape(oldx, dir="long", idvar="V1",varying=c("V2","V3","V4"), v.names="y")  
names(newx) <- c('x','id','y') 
```

产生：

```
print(newx)  
            x id         y  
-4800.1 -4800  1 25195.730  
-2800.1 -2800  1 15195.730  
-4800.2 -4800  2  7415.219  
-2800.2 -2800  2  5415.219  
-4800.3 -4800  3  7264.280  
-2800.3 -2800  3  7264.280 
```

# php - PHP排列多个相同的元素

> ID：13250877
> 
> 赞同：2
> 
> 时间：2012-11-06T12:16:58.210
> 
> 标签：php, permutation

我需要一个返回所有可能组合的函数，

例如

字符=范围（'a'，'c'）；

1.  = aaa
2.  = aab
3.  = 阿巴
4.  = abb
5.  = abc
6.  = acb ... n。= cc

（顺序无关紧要）

等等

我懂了

```
function pc_permute($items, $perms = array( )) {
    if (empty($items)) {
        $return = array($perms);
    }  else {
        $return = array();
        for ($i = count($items) - 1; $i >= 0; --$i) {
             $newitems = $items;
             $newperms = $perms;
         list($foo) = array_splice($newitems, $i, 1);
             array_unshift($newperms, $foo);
             $return = array_merge($return, pc_permute($newitems, $newperms));
         }
    }
    return $return;
}

$p = pc_permute(array(0, 1, 2, 3));
var_dump($p); 
```

从[这里](https://stackoverflow.com/questions/5506888/permutations-all-possible-sets-of-numbers)

但我无法弄清楚如何机会/重写它以获得与多个相同元素的所有可能组合。

谢谢， 穆罕默德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:48:30.467

请使用此功能：

```
<?php 
$characters = range('a','c');

function get_permutations(array $arr = array()){
    if(count($arr) == 1){
        return array_values($arr);
    }

    $return_array = array();

    foreach($arr as $key => $val){
        $temp_arr = $arr;
        unset($temp_arr[$key]);
        $temp = call_user_func(__FUNCTION__, $temp_arr);
        for($x = 0; $x < count($temp); $x++){
            $temp[$x] = $val.$temp[$x];
        }
        $return_array = array_merge($return_array, $temp);
    }
    return $return_array;
}

var_dump(get_permutations($characters)); 
```

输出：

```
array(6) {
  [0]=>
  string(3) "abc"
  [1]=>
  string(3) "acb"
  [2]=>
  string(3) "bac"
  [3]=>
  string(3) "bca"
  [4]=>
  string(3) "cab"
  [5]=>
  string(3) "cba"
} 
```

**编辑：**

```
<?php 
$characters = range('a','h');

function get_permutations(array $arr = array(), $max_length = NULL){
    if(count($arr) == 1 || ($max_length !== NULL && $max_length <= 1)){
        return array_values($arr);
    }

    $return_array = array();

    foreach($arr as $key => $val){
        $temp_arr = $arr;
        unset($temp_arr[$key]);
        $temp = call_user_func(__FUNCTION__, $temp_arr, $max_length !== NULL ? $max_length - 1 : NULL);
        for($x = 0; $x < count($temp); $x++){
            $temp[$x] = $val.$temp[$x];
        }
        $return_array = array_merge($return_array, $temp);
    }
    return $return_array;
}

var_dump(get_permutations($characters, 4)); 
```

**注意：**当心使用`a-z`范围会导致更长的运行时间甚至导致内存不足错误，所以我用一个小范围进行了测试:)

# c# - 通过实体框架获取 SQL 视图返回不正确的结果

> ID：13250882
> 
> 赞同：8
> 
> 时间：2012-11-06T12:17:17.617
> 
> 标签：c#, sql, entity-framework

我在 SQL Server 中有一个非常简单的视图，看起来像这样，其中**Show**是**LEFT JOIN** with **Character**表的结果：

```
+---------+----------+----------------------+  
|  Name   | Surname  |         Show         |  
+---------+----------+----------------------+  
| Enoch   | Thompson | The Boardwalk Empire |  
| Anthony | Soprano  | The Sopranos         |  
| Walter  | White    | Breaking Bad         |  
+---------+----------+----------------------+ 
```

当我在我的应用程序中通过实体框架获取此表时`context.CharacterView.ToList()`，结果如下所示：

```
+---------+----------+----------------------+  
|  Name   | Surname  |         Show         |  
+---------+----------+----------------------+  
| Enoch   | Thompson | The Boardwalk Empire |  
| Anthony | Soprano  | The Boardwalk Empire |  
| Walter  | White    | The Boardwalk Empire |  
+---------+----------+----------------------+ 
```

但是，在 DB 中，CharacterView*应该是这样。*

* * *

## 创建视图查询

```
CREATE VIEW CharacterView AS
SELECT c.Name AS [Name], 
       c.Surname AS [Surname], 
       s.Name AS [Show]

FROM   [dbo].[Characters] AS c LEFT OUTER JOIN
       [dbo].[Shows] AS scen ON c.ShowId = s.Id 
```

* * *

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-15T21:36:44.100

对了，D.Mac。你解决了一个我们已经有几个星期的问题，我们刚刚开始研究它。我们有一个观点，即 EF 错误地“推断”了一个不唯一的主键，这会导致数据重复，正如您在上面 Martin 的 SHOW 列中看到的那样。谢谢。

SQL Server 修复 - 按照 D.Mac 的建议将 ROW_NUMBER 作为唯一 ID 添加到视图中：SELECT ISNULL(CAST((ROW_NUMBER() OVER (order by T.PRODUCT_NAME)) as int), 0) as ID 等。

现在实体框架自动包含 ID 列作为 VIEW 的实体键。（右键单击 EDMX 图中的视图，您应该会看到 ID 标记为 ENTITY KEY）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-02-18T12:01:08.860

正如@balbelias`.AsNoTracking()`在评论中所说的那样，为我解决了这个问题。

# jsf - 如何将选项卡内的 Primefaces 数据表左对齐？

> ID：13250884
> 
> 赞同：1
> 
> 时间：2012-11-06T12:17:31.573
> 
> 标签：jsf, primefaces

嗨，我有这个代码...

```
<p:tab title="Explore More" >
                    <ui:insert name="sideMenu">
                        <ui:include src="../ST/InterestingNumberList.xhtml" />

                    </ui:insert> 
```

和

> 有趣的数字列表.xhtml

包含一个数据表。如何在 Tab 内对齐整个 Datatable 左侧？我有趣的 Numberlist 页面

```
<div class="col1" xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">

    <h:form prependId="false">
        <p:dataTable id="companyList" rows="10" style="text-align:left"
            value="${bean_numbers_list}" var="num_feature">
            <p:column  >
                <h:outputLink styleClass="morelinks"
                    value="${facesContext.externalContext.requestContextPath}/topStocks/${num_feature.name}">
                    <h:outputText value="#{num_feature.shortDesc}" />
                    <f:ajax event="click" immediate="true" />
                </h:outputLink>
            </p:column>
        </p:dataTable>
    </h:form>
</div> 
```

屏幕我在列表框上添加了红色矩形，我想向左对齐。 ![在此处输入图像描述](../Images/757f014726af5dca412802e5121f22d1.png)

# android - phonegap 上的 Skydrive 应用程序

> ID：13250886
> 
> 赞同：1
> 
> 时间：2012-11-06T12:17:44.177
> 
> 标签：android, cordova, onedrive

我们正在尝试使用phonegap 访问skydrive。我们使用了一个活动来调用skydrive 的登录功能。但它根本不调用登录功能。

如果有人对此有所了解，那将是很大的帮助。

这是代码。

**这里的活动是从 phonegap 的插件类调用的**

```
Intent i = new Intent(myac, DispAct.class);
try{
                    System.out.println("before start activity");
                     //i.addFlags(Intent.FLAG_ACTIVITY_MULTIPLE_TASK);
                    // i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                ( this.cordova.getActivity()).startActivity(i);
}
catch(Exception e){  System.out.println("in catch"+e);} 
```

**下面的代码是被调用的活动**

```
package org.apache.cordova;

import java.util.Arrays;

import android.app.Activity;
import android.os.Bundle;

import com.microsoft.live.LiveAuthClient;
import com.microsoft.live.LiveAuthException;
import com.microsoft.live.LiveAuthListener;
import com.microsoft.live.LiveConnectClient;
import com.microsoft.live.LiveConnectSession;
import com.microsoft.live.LiveStatus;
import com.microsoft.live.R;

public class DispAct extends Activity
{
    log obj;

    private Object cordova;

     private static final String APP_CLIENT_ID ="00000000400D893E" ;

    @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            System.out.println("disp on create");
     }

        @Override
        protected void onStart() {
            super.onStart();
            System.out.println("disp on start");

            obj=new log();
            obj.auth = new LiveAuthClient(this.getApplicationContext(), APP_CLIENT_ID);
            Iterable<String> scopes = Arrays.asList("wl.basic","wl.signin","wl.skydrive","wl.skydrive_update");
            obj.auth.login(this,scopes,obj);//********this is the function which has to call login page but does not work
            System.out.println("disp after login");

        }

        @Override
        public void onResume()
        {

            super.onResume();
            //finish();
        }
}

final class log implements LiveAuthListener{   

    String type,message;
    LiveConnectClient client;
    LiveAuthClient auth;
    //Parcel out;

    public log()
    {
        //auth=new LiveAuthClient(this, message);
    }

    synchronized public void onAuthComplete(LiveStatus status, LiveConnectSession session, Object userState) {
        if(status == LiveStatus.CONNECTED) {
           // this.resultTextView.setText("Signed in.");
            System.out.println("IN SUCCess");
            client = new LiveConnectClient(session);
            //download(0);
            notify();

        }
        else {
            //this.resultTextView.setText("Not signed in.");
            type="ERROR";
            message="Not Connected";
            client = null;
            System.out.println("IN complete err");
            notify();
        }        
    }

    synchronized public void onAuthError(LiveAuthException exception, Object userState) {
        //this.resultTextView.setText("Error signing in: " + exception.getMessage());        
        client = null;
        //type="ERROR";
        //message="Error logging in";
        System.out.println("IN error");
        notify();
    }
} 
```

这里显示了活动，但没有出现登录页面，这应该是登录功能的结果

# php - 防止数组选择重复值

> ID：13250887
> 
> 赞同：0
> 
> 时间：2012-11-06T12:17:46.727
> 
> 标签：php

我目前有一段代码从数组中选择随机值，但我想防止它选择重复值。我怎样才能做到这一点？到目前为止，这是我的代码：

```
$facilities = array("Blu-ray DVD Player","Chalk board","Computer", "Projector",
"Dual data projector", "DVD/Video");

for($j = 0; $j < rand(1, 3); $j++)
   {
    $fac =  print $facilities[array_rand($facilities, 1)] . '<br>'; 
   } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T12:21:16.590

我觉得你应该看看`array_rand`

```
$facilities = array("Blu-ray DVD Player","Chalk board","Computer","Data projector","Dual data projector","DVD/Video");
$rand = array_rand($facilities, 2);
                                ^----- Number of values you want 

foreach ( $rand as $key ) {
    print($facilities[$key] . "<br />");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T12:21:54.937

您可以通过指定要返回的数字作为第二个参数从[array_rand()](http://php.net/array_rand)返回多个随机键。

```
$keys = (array) array_rand($facilities, rand(1, 3));
shuffle($keys); // array_rand() returns keys unshuffled as of 5.2.10

foreach ($keys as $key) {
    echo $facilities[$key] . '<br>';
} 
```

# android - 在 Facebook 共享上出现异常 android.webkit.WebView.onWindowFocusChanged

> ID：13250888
> 
> 赞同：1
> 
> 时间：2012-11-06T12:18:01.943
> 
> 标签：android, facebook, facebook-graph-api, android-webview

我已经在我的应用程序中完成了 facebook 集成，它对我来说工作正常。但是，当我单击清除凭据按钮，然后再次登录以共享应用程序崩溃并给出异常的内容时。以下是异常详细信息。我在谷歌上搜索但没有得到任何满意的答案。

```
11-06 17:25:32.074: E/AndroidRuntime(410): java.lang.NullPointerException
11-06 17:25:32.074: E/AndroidRuntime(410):  at android.webkit.WebView.onWindowFocusChanged(WebView.java:4177)
11-06 17:25:32.074: E/AndroidRuntime(410):  at android.view.View.dispatchWindowFocusChanged(View.java:3788)
11-06 17:25:32.074: E/AndroidRuntime(410):  at android.view.ViewGroup.dispatchWindowFocusChanged(ViewGroup.java:658)
11-06 17:25:32.074: E/AndroidRuntime(410):  at android.view.ViewGroup.dispatchWindowFocusChanged(ViewGroup.java:662)
11-06 17:25:32.074: E/AndroidRuntime(410):  at android.view.ViewGroup.dispatchWindowFocusChanged(ViewGroup.java:662)
11-06 17:25:32.074: E/AndroidRuntime(410):  at android.view.ViewGroup.dispatchWindowFocusChanged(ViewGroup.java:662)
11-06 17:25:32.074: E/AndroidRuntime(410):  at android.view.ViewGroup.dispatchWindowFocusChanged(ViewGroup.java:662)
11-06 17:25:32.074: E/AndroidRuntime(410):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1921)
11-06 17:25:32.074: E/AndroidRuntime(410):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-06 17:25:32.074: E/AndroidRuntime(410):  at android.os.Looper.loop(Looper.java:123)
11-06 17:25:32.074: E/AndroidRuntime(410):  at android.app.ActivityThread.main(ActivityThread.java:4627)
11-06 17:25:32.074: E/AndroidRuntime(410):  at java.lang.reflect.Method.invokeNative(Native Method)
11-06 17:25:32.074: E/AndroidRuntime(410):  at java.lang.reflect.Method.invoke(Method.java:521)
11-06 17:25:32.074: E/AndroidRuntime(410):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-06 17:25:32.074: E/AndroidRuntime(410):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-06 17:25:32.074: E/AndroidRuntime(410):  at dalvik.system.NativeStart.main(Native Method) 
```

请帮助我找出为什么会出现这个异常以及如何解决这个问题。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T05:28:46.077

您的问题是您没有在 Facebook 上注册您的应用程序，我也遇到了这个问题，现在我创建了一个新应用程序并更改了密钥，这对我来说很好用..

就我而言，我正在使用我以前的应用程序的密钥然后显示此错误，现在我在 facebook 上创建了具有新包名和类名的应用程序，然后对我来说工作正常.. 谢谢

# css - 两个带有引导程序的可滚动列

> ID：13250890
> 
> 赞同：4
> 
> 时间：2012-11-06T12:18:15.520
> 
> 标签：css, html, twitter-bootstrap, layout

我尝试使用两个可滚动列（使用引导程序 2.2）进行布局。现在，如果我删除“！doctype html”标签，它似乎正在工作，所以我假设我的布局不符合规范。有人可以告诉我我做错了什么或者我如何更容易找到我的错误吗？

```
<!doctype html> <!-- scrolling only works without the doctype -->
<html xmlns="http://www.w3.org/1999/html">

<head>

    <link rel="stylesheet" media="screen" href="bootstrap.min.css">

    <script src="jquery-1.7.1.min.js" type="text/javascript"></script>
    <script src="bootstrap.min.js" type="text/javascript"></script>

    <style type="text/css">
        body, html {
            height: 100%;
            overflow: hidden;
        }

        .navbar-inner {
            height: 40px;
        }

        .scrollable {
            height: 100%;
            overflow: auto;
        }

        .max-height {
            height: 100%;
        }

        .no-overflow {
            overflow: hidden;
        }

        .pad40-top {
            padding-top: 40px;
        }
    </style>
</head>

<body>

<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <div class="nav-collapse collapse">
                <a class="brand" href="#">Title</a>
                <ul id="myTab" class="nav nav-tabs">
                    <li><a href="#serials" data-toggle="tab">Serials</a></li>
                    <li><a href="#parameters" data-toggle="tab">Parameter</a></li>
                    <li class="active"><a href="#log" data-toggle="tab">Log</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>

<div class="container max-height no-overflow">
    <div class="row max-height">

        <div class="tabbable tabs-left">

                 <div class="tab-pane active" id="log">

                    <div class="span2 scrollable">
                        <div class="pad40-top">
                            First menu</br>menu</br>menu</br>menu</br>menu</br>menu</br>menu</br>menu</br>menu</br>menu</br    >menu</br>menu</br>menu</br>menu</br>menu</br>menu</br>menu</br>menu</br>menu</br>menu</br>menu    </br>menu</br>menu</br>menu</br>menu</br>menu</br>menu</br>menu</br>menu</br>menu</br>menu</br>    menu</br>menu</br>menu</br>menu</br>menu</br>menu</br>menu</br>menu</br>menu</br>menu</br>menu<    /br>menu</br>menu</br>menu</br>menu</br>menu</br>menu</br>menu</br>menu</br>menu</br>menu</br>    menu</br>menu</br>menu</br>menu</br>menu</br>menu</br>menu</br>menu</br>menu</br>menu</br>menu<    /br>menu</br>menu</br>menu</br>menu</br>menu</br>menu</br>main
                        </div>
                    </div>

                    <div class="span10 scrollable">
                        <div class="pad40-top">
                            First Content</br>Content</br>Content</br>Content</br>Content</br>Content</br>Content</br>    Content</br>Content</br>Content</br>Content</br>Content</br>Content</br>Content</br>Content</br    >Content</br>Content</br>Content</br>Content</br>Content</br>Content</br>Content</br>Content</    br>Content</br>Content</br>Content</br>Content</br>Content</br>Content</br>Content</br>Content<    /br>Content</br>Content</br>Content</br>Content</br>Content</br>Content</br>Content</br>Content    </br>Content</br>Content</br>

                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
</body> 
```

![截屏](../Images/8ffdefdecc09ee5e27e6f10da3df64e1.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T12:48:18.893

*   更正许多许多`</br>` `</br >`等标签
*   `<html xmlns="http://www.w3.org/1999/html">`应该`<html xmlns="http://www.w3.org/1999/xhtml">`
*   添加一个`<title>`
*   去除`</div>`底部的流浪

现在你有一个验证的 html5 文档。要使可滚动项工作，您必须给出一个`body`或`.scrollable`一个高度。您不能将可滚动定义为 100% 的 100%。

如果你设置

```
 .scrollable {
            height: 500px;
            overflow: auto;
        } 
```

它可以工作，或者 - 在 javascript 中动态设置高度：

```
<script type="text/javascript">
$(document).ready(function() {
    var h=$(window).height();
    $('.scrollable').height(h+'px');
});
</script> 
```

注意：代码只是模拟 100%->100%，可滚动的顶部仍然在导航栏后面，您必须实现一些代码来处理窗口大小调整。

清理标记：

```
 <!doctype html> 
    <html xmlns="http://www.w3.org/1999/xhtml">

    <head>
        <title>test</title>
        <script src="http://code.jquery.com/jquery-latest.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <link href="css/bootstrap.min.css" rel="stylesheet">

        <style type="text/css">
            body, html {
                height: 100%;
                overflow: hidden;
            }

            .navbar-inner {
                height: 40px;
            }

            .scrollable {
                height: 500px;
                overflow: auto;
            }

            .max-height {
                height: 100%;
            }

            .no-overflow {
                overflow: hidden;
            }

            .pad40-top {
                padding-top: 40px;
            }
        </style>

    <!--  or :
    <script type="text/javascript">
    $(document).ready(function() {
        var h=$(window).height();
        $('.scrollable').height(h+'px');
    });
    </script>
   -->

    </head>

    <body>

    <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <div class="nav-collapse collapse">
                    <a class="brand" href="#">Title</a>
                    <ul id="myTab" class="nav nav-tabs">
                        <li><a href="#serials" data-toggle="tab">Serials</a></li>
                        <li><a href="#parameters" data-toggle="tab">Parameter</a></li>
                        <li class="active"><a href="#log" data-toggle="tab">Log</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="container max-height no-overflow">
        <div class="row max-height">

            <div class="tabbable tabs-left">

                     <div class="tab-pane active" id="log">

                        <div class="span2 scrollable">
                            <div class="pad40-top">
                                First menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu    <br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>    menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>    menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>menu<br>main
                            </div>
                        </div>

                        <div class="span10 scrollable">
                            <div class="pad40-top">
                                First Content<br>Content<br>Content<br>Content<br>Content<br>Content<br>Content<br>    Content<br>Content<br>Content<br>Content<br>Content<br>Content<br>Content<br>Content<br>Content<br>Content<br>Content<br>Content<br>Content<br>Content<br>Content<br>Content<br>Content<br>Content<br>Content<br>Content<br>Content<br>Content<br>Content<br>Content<br>Content<br>Content<br>Content<br>Content<br>Content<br>Content<br>Content<br>Content    <br>Content<br>Content<br>

                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </body> 
```

# asp.net - “连接尝试失败..”在 Asp.net 中的 Soap 请求期间出错

> ID：13250891
> 
> 赞同：3
> 
> 时间：2012-11-06T12:18:17.230
> 
> 标签：asp.net, web-services, c#-4.0, soap

我已将第三方 Web 服务与我的 Web 应用程序连接起来，它在**localhost**中运行良好。但是在我将项目上传到服务器后，它显示以下错误。

```
A connection attempt failed because the connected party did not properly respond after a   period of time, or established connection failed because connected host has failed to respond 100.100.100.100:9090 
```

这是我的肥皂请求：

```
 StringBuilder soapmsg = new StringBuilder();
    soapmsg.Append("<?xml version='1.0' encoding='UTF-8'?>");
    soapmsg.Append("<soap:Envelope xmlns='http://www.opentravel.org/OTA/2003/05'   xmlns:soap='http://schemas.xmlsoap.org/soap/envelope/' xmlns:wsse='http://schemas.xmlsoap.org/ws/2002/12/secext'>");
    soapmsg.Append("<soap:Body><OTA_AirLowFareSearchRQ EchoToken='' SequenceNmbr='0' TransactionIdentifier='0' Version='1.001' xmlns='http://www.opentravel.org/OTA/2003/05' DirectFlightsOnly='false'>");
    soapmsg.Append("<POS xmlns='http://www.opentravel.org/OTA/2003/05'><Source AgentSine='' PseudoCityCode='NPCK' TerminalID='1'><RequestorID ID='AFFILIATE'/></Source><YatraRequests><YatraRequest AffiliateID='YTFABTRAVEL' MidOfficeAgentID='' AgentEmailID='' Destination='' AgentTypeCode='' Description='' DoNotCache='false' DoNotHitCache='true' IsYatraAgent='' LastResultFromCache='true' RequestType='"+di+"' YatraRequestTypeCode='SMPA'/></YatraRequests></POS>");
    soapmsg.Append("<OriginDestinationInformation>");
    soapmsg.Append("<DepartureDateTime WindowAfter='" + flexi + "' WindowBefore='" + flexi + "'>" + date + "</DepartureDateTime>");
    soapmsg.Append("<OriginLocation CodeContext='IATA' LocationCode='" + origin + "'>'" + origin + "'</OriginLocation>");
    soapmsg.Append("<DestinationLocation CodeContext='IATA' LocationCode='" + destination + "'>'" + destination + "'</DestinationLocation>");
    soapmsg.Append("</OriginDestinationInformation>");
    soapmsg.Append("</OTA_AirLowFareSearchRQ></soap:Body></soap:Envelope>");

    HttpWebRequest request = (HttpWebRequest)WebRequest.CreateDefault(new Uri(@"http://100.100.100.100:9090/services/spm/spm"));
    request.ContentType = "text/xml; charset=utf-8";
    request.Method = "POST";
    request.Accept = "text/xml";
    request.Headers.Add("SOAPAction", @"http://100.100.100.100:9090/services/spm/spm");
    StreamWriter writer = new StreamWriter(request.GetRequestStream(), Encoding.UTF8);
    writer.Write(soapmsg);
    writer.Flush();
    writer.Close();

    using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
    {
        XNamespace ns = "http://www.opentravel.org/OTA/2003/05";
        XDocument xd = XDocument.Load(response.GetResponseStream());
     }        

  **The following exception i got after i tried to connect the web service:**

    SocketException (0x274c): A connection attempt failed because the connected party     did not properly respond after a period of time, or established connection failed because connected host has failed to respond 100.100.100.100:9090]
System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddresssocketAddress) +251System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure, Socket s4,  Socket s6, Socket& socket, IPAddress& address, ConnectSocketState state, IAsyncResult asyncResult, Int32 timeout,   Exception& exception) +279 
```

我已经搜索了很多。我是网络服务的新手。 *如果您需要更多信息，请告诉我。* 提前致谢，

# iphone - iOS 4.3 上的 CLLocationManager 权限

> ID：13250894
> 
> 赞同：1
> 
> 时间：2012-11-06T12:18:35.053
> 
> 标签：iphone, ios5, ios4, cllocationmanager, ios-permissions

我目前有一个使用位置服务的应用程序，并且在运行 iOS5 及更高版本的设备上运行良好。但是，一直遇到与 4.3.x 不一致的问题。

**问题：**

When installing and running the app for the **FIRST** time, we get the usual 'Allow this app to use Location Services' dialogue to change the `[CLLocationManager authorizationStatus]`. However, when we uninstall the application (from the home screen) and reinstall the app, we never get this prompt again and somehow the OS has cached the users response for this app, despite this app being uninstalled and reinstalled freshly. On all other versions of iOS, we get the prompt as expected and the `[CLLocationManager authorizationStatus]` is set to `kCLAuthorizationStatusNotDetermined` as expected.

Can anyone tell me why with 4.3 the OS seems to remember the options for the app despite it being uninstalled? In order to rectify this issue currently, I have to manually reset all Location Services settings on the device through the settings menu.

If you need any information, or code snippets, please ask.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:17:05.183

事实证明，这是 4.3 的限制，在任何 iOS 4.3 设备上运行应用程序时都很明显。

Apple 一定认为这不是一个错误——当用户卸载应用程序时，这很奇怪，为什么操作系统会记住用户选择了特定应用程序的权限？

没有可用的有效解决方法。只需要忍受它。

# python - 如何使用 python 2.3 rsh ssh

> ID：13250899
> 
> 赞同：2
> 
> 时间：2012-11-06T12:18:45.983
> 
> 标签：python, python-2.3

我想编写一个执行以下 Linux 命令序列的脚本：

1.  rsh rr01 (这里系统会要求输入密码)
2.  ssh rr02 (这里系统会再次要求输入密码)
3.  在某个文件上激活我的应用程序

我天真地（而且愚蠢地）试图用一个简单的 os.system 来实现这一点，记住我使用的是 python 2.3，并且希望避免添加模块（如果可能的话）。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:28:41.093

**[编辑]在**[http://code.google.com/p/lexel-intern0t/source/browse/trunk/Python/ssh_client.py](http://code.google.com/p/lexel-intern0t/source/browse/trunk/Python/ssh_client.py)上查看另一个使用 paramiko 的示例。

[http://media.commandline.org.uk//code/ssh.txt](http://media.commandline.org.uk//code/ssh.txt)上的脚本可能会对您有所帮助。它包括用于记录目的的 os 模块（用于查找键）和 tempfile 模块，两者都在 python 2.3 全局模块索引（[http://docs.python.org/release/2.3/modindex.html](http://docs.python.org/release/2.3/modindex.html)）和 paramiko（[http:// /www.lag.net/paramiko/docs/](http://www.lag.net/paramiko/docs/) ) 用于 SSH2 协议实现，它应该适用于 python 2.3 及更高版本。这是一段简单的代码：

```
"""Friendly Python SSH2 interface."""

import os
import tempfile
import paramiko

class Connection(object):
    """Connects and logs into the specified hostname. 
    Arguments that are not given are guessed from the environment.""" 

    def __init__(self,
                 host,
                 username = None,
                 private_key = None,
                 password = None,
                 port = 22,
                 ):
        self._sftp_live = False
        self._sftp = None
        if not username:
            username = os.environ['LOGNAME']

        # Log to a temporary file.
        templog = tempfile.mkstemp('.txt', 'ssh-')[1]
        paramiko.util.log_to_file(templog)

        # Begin the SSH transport.
        self._transport = paramiko.Transport((host, port))
        self._tranport_live = True
        # Authenticate the transport.
        if password:
            # Using Password.
            self._transport.connect(username = username, password = password)
        else:
            # Use Private Key.
            if not private_key:
                # Try to use default key.
                if os.path.exists(os.path.expanduser('~/.ssh/id_rsa')):
                    private_key = '~/.ssh/id_rsa'
                elif os.path.exists(os.path.expanduser('~/.ssh/id_dsa')):
                    private_key = '~/.ssh/id_dsa'
                else:
                    raise TypeError, "You have not specified a password or key."

            private_key_file = os.path.expanduser(private_key)
            rsa_key = paramiko.RSAKey.from_private_key_file(private_key_file)
            self._transport.connect(username = username, pkey = rsa_key)

    def _sftp_connect(self):
        """Establish the SFTP connection."""
        if not self._sftp_live:
            self._sftp = paramiko.SFTPClient.from_transport(self._transport)
            self._sftp_live = True

    def get(self, remotepath, localpath = None):
        """Copies a file between the remote host and the local host."""
        if not localpath:
            localpath = os.path.split(remotepath)[1]
        self._sftp_connect()
        self._sftp.get(remotepath, localpath)

    def put(self, localpath, remotepath = None):
        """Copies a file between the local host and the remote host."""
        if not remotepath:
            remotepath = os.path.split(localpath)[1]
        self._sftp_connect()
        self._sftp.put(localpath, remotepath)

    def execute(self, command):
        """Execute the given commands on a remote machine."""
        channel = self._transport.open_session()
        channel.exec_command(command)
        output = channel.makefile('rb', -1).readlines()
        if output:
            return output
        else:
            return channel.makefile_stderr('rb', -1).readlines()

    def close(self):
        """Closes the connection and cleans up."""
        # Close SFTP Connection.
        if self._sftp_live:
            self._sftp.close()
            self._sftp_live = False
        # Close the SSH Transport.
        if self._tranport_live:
            self._transport.close()
            self._tranport_live = False

    def __del__(self):
        """Attempt to clean up if not explicitly closed."""
        self.close()

def main():
    """Little test when called directly."""
    # Set these to your own details.
    myssh = Connection('example.com')
    myssh.put('ssh.py')
    myssh.close()

# start the ball rolling.
if __name__ == "__main__":
    main() 
```

# c# - 我是 Lambda 的新手

> ID：13250900
> 
> 赞同：0
> 
> 时间：2012-11-06T12:18:48.703
> 
> 标签：c#, lambda

```
public TEntity GetSingle(Func<TEntity, bool> predicate)
{
    try 
    { 
        var teste = _context.Set<TEntity>().Single(predicate); 
    }
    catch (Exception)
    {
        return null;
    }

    return _context.Set<TEntity>().Single(predicate);
}

Func<vw_UsuarioPerfilAtributo, bool> expressionPerfil = Perf => Perf.IdUsuario == memo.IdUsuario//And Perf.IdTipoPerfil(MaxValue) // And Perf.Name.lenght > 3;

Session.Add("Permissao",vw_usuarioPerfilAtributoRepository.GetSingle(expressionPerfil).IdTipoPerfil); 
```

简单的查询问题，但在 lambda 中，我不知道“AND”+“MaxValue”+其他“WHERE”的好方法，所有示例仅用于一个 WHERE。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:22:27.780

这是常规的 C# 代码，因此请使用`&&`运算符：

```
Func<vw_UsuarioPerfilAtributo, bool> expressionPerfil =
  Perf => Perf.IdUsuario == memo.IdUsuario &&
  Perf.IdTipoPerfil(MaxValue) &&
  Perf.Name.lenght > 3; 
```

注意：`lenght`应该是`length`or `Length`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:22:09.777

您可以使用 ( For And) 和For(OR)`Lambda`简单地添加任何条件`&&``||`

```
Func<vw_UsuarioPerfilAtributo, bool> expressionPerfil = Perf => 
                   Perf.IdUsuario == memo.IdUsuario  && 
                   Perf.IdTipoPerfil(MaxValue) && 
                   Perf.Name.lenght > 3; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T12:23:56.583

我不确定您的问题，但在 where 子句中，您可以将`&&`AND 用于多个条件。对于您当前的语句，请尝试将 AND 替换为 &&。（[条件运算符](http://msdn.microsoft.com/en-us/library/ms173145.aspx)与c#相同）

```
Func<vw_UsuarioPerfilAtributo, bool> expressionPerfil =
Perf => Perf.IdUsuario == memo.IdUsuario 
                          && Perf.IdTipoPerfil(MaxValue) 
                          && Perf.Name.lenght > 3; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T12:27:36.510

使用“&&”运算符，就像在普通 C# 中一样

```
Func<vw_UsuarioPerfilAtributo, bool> expressionPerfil = Perf => 
    Perf.IdUsuario == memo.IdUsuario 
    && Perf.IdTipoPerfil(MaxValue)
    && Perf.Name.lenght > 3; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T12:25:04.370

lamdas 是简单的内联声明函数。

声明如下： () => { }

还有一个简短的形式： () => ()=> { } // 一个 lambda 返回一个什么都不做的 lambda。

在 lambda 中，您可以使用范围内的每个局部变量。

我不知道你到底想做什么，但我希望我能帮上忙。：X

问候尼尔斯。

# python - 使用 selenium python 将焦点移到对象上

> ID：13250908
> 
> 赞同：1
> 
> 时间：2012-11-06T12:19:05.017
> 
> 标签：python, selenium, selenium-rc, xpath

我在 Ubuntu Linux 上使用 selenium RC 和 python 2.7 自动化一个网站。这是我需要做的：

访问网站[http://borro.com](http://borro.com)。
使用 key down native 命令向下滚动到页面底部 我需要将鼠标悬停在 g +1 上阅读工具提示
单击工具提示中显示的名称。

我遇到的问题是——我需要鼠标物理移动到那里，等待 2 秒，然后阅读工具提示并单击名称

鼠标并没有物理移动到那里，我认为焦点丢失了，它说找不到元素 xpath。 ![在此处输入图像描述](../Images/8f9129b21ab67b69ac689533e9feaf64.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T19:29:39.337

通过向元素发送一个空白键，我们已经解决了很多我们的焦点问题，以便它获得焦点。在这种情况下，您可能希望在工具提示出现时立即将其发送到工具提示。我熟悉 webdriver 但不熟悉 RC，但 RC 也应该有类似 send_key(element_xpath, " ") 的东西。

要获取工具提示的 xpath，您可以使用 firebug，并在控制台中使用类似

```
$x("//*[contains(text(), 'Publicly recommend this as')]") 
```

确保找到此元素并且 xpath 正确。我还建议不要使用通配符，因此一旦找到工具提示的 xpath，请尝试将 * 替换为实际的元素类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:38:46.303

下面给出了按钮 Xpath 和悬停在按钮 xpath 上

```
 Actions builder = new Actions(driver);
   WebElement tagElement = driver.findElement(By.id("button"));
   builder.moveToElement(tagElement).build().perform();

         /html/body/div/div/table/tbody/tr/td/div 
```

尝试：

```
 selenium.mouseOver("mylocator"); 
```

# jaxb - 元素初始值设定项的 JAXB XJC 代码生成及其声明

> ID：13250913
> 
> 赞同：7
> 
> 时间：2012-11-06T12:19:43.070
> 
> 标签：jaxb, xjc

如果我有如下架构：

```
<xs:element name="Book">
    <xs:complexType>
        <xs:sequence>
            <xs:element ref="Chapter" />
        </xs:sequence>
    </xs:complexType>
</xs:element>
<xs:element name="Chapter">
    <xs:complexType>
        <xs:sequence>
            <xs:element maxOccurs="unbounded" name="Word" />
        </xs:sequence>
    </xs:complexType>
</xs:element>
<xs:element name="Word">
</xs:element> 
```

它会产生类似的东西：

```
@XmlRootElement(name = "Book")
public class Book {

    @XmlElement(name = "Chapter", required = true)
    protected Chapter chapter; 
```

是否可以生成以下内容？

```
@XmlElement(name = "Chapter", required = true)
protected Chapter chapter = new Chapter(); 
```

这样即使 XML 文件在 Book 中缺少 Chapter 元素，当它被解组时仍然会创建一个 Book 对象，因此可以执行 book.getChapter().getWord() 并检索一个空列表，而不是检查空值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T22:33:44.843

您可以创建一个插件。我写了一个[简短的教程](http://jaxbnstuff.blogspot.de/2013/09/creating-xjc-plugin-to-instantiate.html)来帮助你做到这一点。希望对您有所帮助。

# javascript - 在 WebSQL 中创建数据库

> ID：13250923
> 
> 赞同：1
> 
> 时间：2012-11-06T12:20:32.117
> 
> 标签：javascript, web-sql

一直在这几个小时没有结束调试为什么我的`CREATE TABLE`声明失败了。在数据库中对其进行了测试`MySQL`，它工作得很好。但是由于某种原因，我所有的 SELECT 都无法获取我的登录表，就像它不存在一样（错误说）。

这是我`SQL`创建表格的方法。

```
CREATE TABLE IF NOT EXISTS login(
id SMALLINT NOT NULL PRIMARY KEY AUTO_INCREMENT, 
user_type SMALLINT NOT NULL, 
user_data text NOT NULL, 
created_on datetime NOT NULL DEFAULT "0000-00-00 00:00:00"
); 
```

我只是看不到错误在哪里。另一个主要问题是，在谷歌搜索数小时后，我没有找到任何可靠的 wiki 提供足够的信息`API`供我真正使用它。所以我不得不从一个站点跳到另一个站点来获取信息。

希望有人能帮我解决这个问题`Query`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T12:23:13.760

我很乐意发布这个问题。已经发现我做错了什么。这是可能遇到相同问题的其他任何人的解决方案。

我只是像在 MySQL 中一样写了“AUTO_INCREMENT”，在没有 _ 的情况下我必须是“AUTOINCREMENT”

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-07T13:39:38.683

友情提示，不推荐使用 WebSQL 标准： [是否推荐在客户端使用 web sql 数据库进行存储](https://stackoverflow.com/questions/3001657/is-it-recommended-to-use-the-web-sql-database-for-storage-on-the-client-side)

对于不同的客户端关系数据库解决方案，请尝试：[SequelSphere](http://www.sequelsphere.com)

它是一个支持 SQL 并将其数据存储在本地持久性中的 HTML5 关系数据库引擎。它不使用 WebSQL 数据库，而是使用自己的 SQL 引擎。因此，它可以在任何兼容 JavaScript 的浏览器中运行。虽然它目前只支持本地存储，但很快 SequelSphere 将支持其他本地持久化引擎，例如 IndexedDB 和 File API。

完整披露：我与 SequelSphere 公司有关。:)

# android - 如何将 3 个 Horizo ntalScrollViews 添加到一个片段中？

> ID：13250924
> 
> 赞同：0
> 
> 时间：2012-11-06T12:20:33.130
> 
> 标签：android, android-layout

我想将 3 个 Horizo​​ntalScrollView 添加到一个片段中。我已经成功实现了一个，但是当我尝试将另一个实现`horizontalscrollview`到相同的片段中时，我得到了一个 `HorizontalScrollView`只支持一个孩子的错误。所以，我`horizontalscrollview`在 XML 中创建了另一个。我创建了第二个线性布局并将新的图像查看器 ID 传递给第二个线性布局，但它不会显示在屏幕上。

这是 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"android:layout_width="fill_parent"android:layout_height="fill_parent" >
<HorizontalScrollView 
    android:orientation="horizontal"
    android:layout_width="800px"
    android:id="@+id/horizontalScroll"
    android:background="#C6D7D2" android:layout_height="600px">
<LinearLayout
    android:id="@+id/container"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">        
</LinearLayout>
</HorizontalScrollView>
<HorizontalScrollView 
    android:orientation="horizontal"
    android:layout_width="800px"
    android:id="@+id/horizontalScroll2"
    android:background="#C6D7D2"
    android:layout_height="600px">
<LinearLayout 
    android:id="@+id/container2" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">        
</LinearLayout>
</HorizontalScrollView>
</LinearLayout> 
```

这是java片段代码

```
public class FevFragment extends SherlockFragment{
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.cfragment, container, false);
    }
@Override
public void onStart() {
    super.onStart();
    /** Setting the multiselect choice mode for the listview */
    initfrag();
}
private void initfrag() {
    LinearLayout linearlayout1 = (LinearLayout)getView().findViewById(R.id.container);
    LinearLayout linearlayout2 = (LinearLayout)getView().findViewById(R.id.container2);
    for (int i = 0; i < 15; i++) { 
        ImageView iv = new ImageView(getActivity());
        iv.setPadding(5, 55, 5, 5);
         iv.setImageResource(R.drawable.test_play_image);
         linearlayout1.addView(iv, 260, 260); 
         ImageView iv2 = new ImageView(getActivity());
         iv2.setPadding(5, 255, 5, 5);
         iv2.setImageResource(R.drawable.test_play_image);
         linearlayout2.addView(iv2, 100, 100); 
        TextView tv = new TextView(getActivity());
        tv.setText("testing");
        tv.setPadding(5, 55, 5, 5);
        linearlayout1.addView(tv, 100, 100);
        }
}  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:40:13.437

阅读[文档](http://developer.android.com/reference/android/widget/HorizontalScrollView.html)

Horizo​​ntalScrollView 是 FrameLayout，这意味着您应该在其中放置一个包含要滚动的全部内容的子项；这个孩子本身可能是一个具有复杂对象层次结构的布局管理器。一个经常使用的child是水平方向的LinearLayout，呈现用户可以滚动浏览的顶级项目的水平数组

在您的第一个 LinearLayout 中（您没有声明 id）使用此属性

```
android:orientation="vertical" 
```

# java - 如何停止我的 JFrame 在屏幕/监视器上的移动？

> ID：13250926
> 
> 赞同：0
> 
> 时间：2012-11-06T12:20:40.663
> 
> 标签：java, windows, jframe, taskbar

如何停止我`JFrame`在屏幕/显示器上的移动？
我的 JFrame 大小与屏幕/监视器大小一样多，我的客户甚至不想显示任务栏。

如果我写`myFrame.setExtendedState(JFrame.MAXIMIZED_BOTH)`，它不允许在屏幕上移动但显示任务栏，但我不想显示任务栏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:24:15.980

您实际上想要所谓的“全屏模式”。看看这篇文章，看看如何做到这一点： http: [//docs.oracle.com/javase/tutorial/extra/fullscreen/exclusivemode.html](http://docs.oracle.com/javase/tutorial/extra/fullscreen/exclusivemode.html)

很快你就得打电话`device.setFullScreenWindow(myWindow)`

# qt - 通过 Qt lib 从 C# 到 C++ 的函数

> ID：13250928
> 
> 赞同：2
> 
> 时间：2012-11-06T12:20:43.393
> 
> 标签：qt

你能告诉我如何通过 Qt lib 将 C# 中的这些函数重写为 C++ 吗？

 `````
private MemoryStream _memoryStream= new MemoryStream(); 
```

//WriteUTFBytes

```
public void WriteUTFBytes(string value)
{
    //Length - max 65536.
    UTF8Encoding utf8Encoding = new UTF8Encoding();
    byte[] buffer = utf8Encoding.GetBytes(value);
    if (buffer.Length > 0)
    WriteBytes(buffer);
} 
```

//WriteBytes

```
public void WriteBytes(byte[] buffer)
{

        for (int i = 0; buffer != null && i < buffer.Length; i++)
            _memoryStream.WriteByte(buffer[i]);
} 
```

//WriteByte

```
public void WriteByte(int value)
    {
        _memoryStream.WriteByte((byte)value);
    } 
```

//WriteShort

```
public void WriteShort(int value)
    {
        byte[] bytes = BitConverter.GetBytes((ushort)value);
        WriteBigEndian(bytes);
    } 
```

//WriteBigEndian

```
private void WriteBigEndian(byte[] bytes)
    {
        if (bytes == null)
            return;
        for (int i = bytes.Length - 1; i >= 0; i--)
        {
            _memoryStream.WriteByte(bytes[i]);
        }
    } 
````  `* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-19T14:52:51.500

```
private:
    QBuffer _buffer;

public:
    YourClass()
    {
        _buffer.open(QIODevice::WriteOnly);
    }

    void writeUtfBytes(const QString &value)
    {
        QTextStream ts(&_buffer);
        ts.setCodec("UTF-8");
        ts << value;
    }

    void writeBytes(const char *data, int size)
    {
        if (data)
            _buffer.write(data, size);
    }

    void writeByte(int value)
    {
        _buffer.putChar(value);
    }

    void writeShort(int value)
    {
        _buffer.putChar(value >> 8);
        _buffer.putChar((char) value);
    } 
`````

# c# - 联合/合并 2 个不同类型的列表并使用 LINQ 返回一个类型的列表

> ID：13250929
> 
> 赞同：0
> 
> 时间：2012-11-06T12:20:43.830
> 
> 标签：c#, linq

我有一个字符串类型的 IEnumerable，具有默认值和修复顺序。我有一个 Module 类型的列表，其值以随机顺序排列。我想要一个模块类型的唯一对象列表。我用下面的代码得到的是：一个字符串类型的唯一对象列表。

有人知道这个技巧吗？

```
static void Main(string[] args) {    

    List<Module> moduleList = new List<Module>() {
        new Module{ ModuleId = 1, ModuleType = "world"},
        new Module{ ModuleId = 2, ModuleType = "wayne"},
        new Module{ ModuleId = 3, ModuleType = "hallo"},
        new Module{ ModuleId = 4, ModuleType = "tes"},
        new Module{ ModuleId = 5, ModuleType = "mi"},
        new Module{ ModuleId = 6, ModuleType = "haha"},
        new Module{ ModuleId = 7, ModuleType = "pipi"},
        new Module{ ModuleId = 8, ModuleType = "bla"},  
    };

    // This result is fine that the list is unified and the predefined 
    // values order is not changed: bla, tes, mi 
    // BUT I need to return a query with Module objects

    var query = GetDefaultValues().Union(moduleList.Select(t => t.ModuleType));
}

private static IEnumerable<string> GetDefaultValues() {
    yield return "bla";
    yield return "tes";
    yield return "mi";
} 
```

在每个 lambda 中执行一个 new Module() 并复制这些值对我来说不是选项。

**更新：**

期望的输出：

模块列表：

```
new Module{ ModuleId = 8, ModuleType = "bla"},
new Module{ ModuleId = 4, ModuleType = "tes"},
new Module{ ModuleId = 5, ModuleType = "mi"},

new Module{ ModuleId = 1, ModuleType = "world"},
new Module{ ModuleId = 2, ModuleType = "wayne"},
new Module{ ModuleId = 3, ModuleType = "hallo"},
new Module{ ModuleId = 6, ModuleType = "haha"},
new Module{ ModuleId = 7, ModuleType = "pipi"}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:44:49.007

```
var query = GetDefaultValues()
            .Select(v => moduleList.Find(m => m.ModuleType == v))
            .Union(moduleList); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:40:41.713

我不确定我是否理解这个问题，但如果你只是想获取有序字符串并获取相应的模块，你可以使用这个：

```
var modulesByType = moduleList.ToDictionary(m=>m.ModuleType);
var result = GetDefaultValues().Select(moduleType=>modulesByType[moduleType]); 
```

如果您想避免出于某种原因构建字典，您还可以使用：

```
Func<string, Module> getModule = moduleType => moduleList.Single(m=>m.ModuleType == moduleType);
var result = GetDefaultValues().Select(getModule); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:39:35.777

试试这个查询：

```
var query = GetDefaultValues()
               .Select(t => moduleList
                               .Where(mo => mo.ModuleType == t)
                               .Single())
               .Union(moduleList); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T12:41:21.557

如果您可以将模块列表更改为模块类型映射的模块字典，则此代码将返回查询`IEnumerable<Module>`

```
static void Main(string[] args)
{

  var moduleList = new Dictionary<string, Module> {
                 {"world", new Module{ ModuleId = 1, ModuleType = "world"}},
                 {"wayne", new Module{ ModuleId = 2, ModuleType = "wayne"}}, 
                  ... 
            };

  IEnumerable<Module> query = GetDefaultValues().Select(val => moduleList[val]);
} 
```

如果模块数量足够大，使用 Dictionary 也会比在列表中搜索更快。

# c# - 配置系统初始化失败

> ID：13250938
> 
> 赞同：1
> 
> 时间：2012-11-06T12:21:09.103
> 
> 标签：c#, console-application

我有一个控制台应用程序，其中包含一个名为`app.config`. 文件后面的完整代码`app.config`如下：

```
 <?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
    <add key="ClientSettingsProvider.ServiceUri" value=""/>
    <add key="Server" value="0.0.0.0"/>
    <add key="DB" value="Test"/>
    <add key="UserName" value="testuser"/>
    <add key="Password" value="testuser"/>
    <add key="AgentEmail" value="test@gmail.com"/>
  </appSettings>
<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup>
  </configuration> 
```

当我尝试运行我的应用程序时，我收到一个错误：`Configuration system failed to initialize`。知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:29:41.107

您在此处的配置中定义了一个部分组和一个包含的部分：

```
<configuration>
   <configSections>
      <sectionGroup name="applicationSettings" 
                    type="System.Configuration.ApplicationSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
         <section name="LeadDataEmail.Properties.Settings" 
                  type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
      </sectionGroup>
   </configSections> 
```

这意味着，**必须有**一个`<applicationSettings>`容器，其中包含一个包含`<LeadDataEmail.Properties.Settings>`XML 元素的您的`<configuration>`：

```
<configuration>
   <configSections>  
     ......
   </configSections>  

   <applicationSettings>
       <LeadDataEmail.Properties.Settings
           attribute1="value1"
           attribute2="value2" /> 
   </applicationSettings>
   ....
</configuration> 
```

但我在您的配置文件中看不到任何痕迹 - 难怪配置系统无法初始化！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:24:14.560

`configSections`如果不需要，请从文件中删除。

# java - Swing 中的水平滚动

> ID：13250945
> 
> 赞同：2
> 
> 时间：2012-11-06T12:21:32.943
> 
> 标签：java, swing, user-interface, jtabbedpane

我在弄清楚如何使用 Swing 在下面的屏幕截图中制作红色轮廓部分时遇到了一些问题。这是一个图形用户界面问题。具体来说，我正在做一个关于电视剧的小项目，但我不知道如何在水平滚动控件中显示角色的名字。

谁能告诉我`JTabbedPane`有关我的特定问题的扩展？

如果我遗漏了什么，请告诉我。

![图片摘录](../Images/b5e57b9dc513a52561cfa93417046a35.png)

完整截图：http: [//img138.imageshack.us/img138/5381/screenxk.png](http://img138.imageshack.us/img138/5381/screenxk.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:55:39.210

您可能正在寻找`JTabbedPane.SCROLL_TAB_LAYOUT`，它提供特定于平台的导航控件：

> 如果所有选项卡都不适合一次运行，则外观将提供一种导航到隐藏选项卡的方法。

相比之下`JTabbedPane.WRAP_TAB_LAYOUT`，提供了一个（默认）包装策略：

> 当所有选项卡不适合单个运行时，用于在多个运行中包装选项卡的选项卡布局策略。

有关[示例](http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html#eg)，请参见[*如何使用选项卡式窗格*](http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html)。

# java - Android，使用库还是复制源代码？

> ID：13250946
> 
> 赞同：2
> 
> 时间：2012-11-06T12:21:34.270
> 
> 标签：java, android, terminal, serial-port

我希望我的问题适合这里。我最近开始学习 android - 制作按钮，使用谷歌地图和其他基本的东西。我最近看到了一个关于这个的线程（找不到它），我对此很感兴趣：[https ://github.com/jackpal/Android-Terminal-Emulator/wiki](https://github.com/jackpal/Android-Terminal-Emulator/wiki)

这是一个开源的安卓终端模拟器。它似乎也有一个名为的库`EmulatorView`，人们可以使用它来调用方法等。我想做的是在我自己的应用程序中使用这个应用程序。我的应用程序不仅可以查看 android 手机等上的文件系统，还可以连接到路由器等串行设备的控制台，USB 转串口。我通常在我的电脑上使用 minicom 的东西。因为我的应用程序中可能有一个按钮，如果我按下它，它会打开所连接路由器的控制台，我可以发出管理命令。

我想知道最简单的方法是什么？是尝试使用这个库并制作我自己的终端，看起来很难，还是将他们的源代码复制到项目中并尝试编辑它？组织一切似乎很混乱，也可能很难？然后使用像这样的一些库来连接到串行设备？[http://slickdevlabs.com/slick-usb-2-serial-library/](http://slickdevlabs.com/slick-usb-2-serial-library/)

第一步是什么，制作一个像开源应用程序一样的终端，使用他们的库或粘贴他们的代码？然后尝试编辑它以通过串行执行某些操作？

我尝试使用他们的示例来使用他们的库（jackpal.androidterm.sample.telnet），但是当我单击时它崩溃了`open shell`，我想知道`open shell`他们示例中的这个按钮是否是我需要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:20:45.780

我决定通过使用库自己编写应用程序来了解更多信息。

# javascript - 在 div 中查找文本并使用 javascript 转到文本

> ID：13250949
> 
> 赞同：1
> 
> 时间：2012-11-06T12:21:38.747
> 
> 标签：javascript, html, text, find

您好我正在尝试实现以下目标：我正在创建一个由面板（div）组成的网站（实际上是某种网络应用程序）。

在其中一个面板上，我在另一个 div 中放置了大量文本：

```
 <div class="panel">

       <div id="substantialText">
          bla
          bla
          bla
          bla
       </div>

    </div> 
```

我需要能够使用标题中的输入字段搜索此文本并像这样转到文本位置（在输入字段中键入文本将调用函数“findText（）”......我需要找出在此写的内容功能：

```
 <div class="panel">

       <header>
          <div>
             <input type="text" id="searchField"  onKeyUp="findText();" /><br/>
          </div>
       </header>

       <div id="substantialText">
          bla
          bla
          bla
          bla
       </div>

    </div> 
```

我有以下但卡住了（将文本的 innerhtml 与搜索字段的值进行比较）：

```
 function findText() 
    {
        var streng = document.getElementById(substantialText).innerHTML;
        var search =         document.getElementById(searchField).value.toString().toLowerCase();

       if(document.getElementById(felt).value.length == 0)
       {
        //don't judge me
       }
       else
       {    
        var rgxp = new RegExp(search, "gi");

        // Getting number of hits...works as intented
        alert(streng.match(rgxp).length);
       }   
    } 
```

我正在考虑使用与它们的位置配对的命中数组，然后能够使用数组的索引循环遍历命中。但我看不出我将如何实现这一目标。

如何让“substantialText”向下滚动到命中（给定索引）。我已经成功地能够跳转到包含 ID 或锚点的元素，但我无法理解如何仅使用文本字符串来实现相同的目标。

# java - 将图表插入到内部 jframe

> ID：13250955
> 
> 赞同：1
> 
> 时间：2012-11-06T12:22:05.580
> 
> 标签：java, swing, jpanel, jinternalframe, jchart2d

我有一个程序，我想要一个实时更新的绘图仪。我将使用 jchart2d，但是如何将它集成到我的 swing gui 中？我有一个内部框架，但它似乎没有占用我的图表。那就是 jInternalFrame 没有内容。

```
private void initObjects(){
    trace =new Trace2DLtd(200);
    trace.setColor(Color.Blue);
    Chart2D.cjart = new Chart2D();
    chart.addTrace(trace);
    jInternalFrame1.getContentPane().add(chart);
   } 
```

稍后我更新时

```
 public void update()
{ trace.addPoint(elapsedtime,activity)} 
```

我究竟做错了什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T15:03:59.193

[`InternalPie`](https://stackoverflow.com/a/8199839/230513)是将 a 添加`ChartPanel`到 a的完整示例`JInternalFrame`。

附录：Like `JFrame`，`JInternalFrame`默认`BorderLayout`并`add()`转发到内容窗格的`BorderLayout.CENTER`; `pack()`应该先于`setVisible()`.

```
ChartPanel cp = new ChartPanel(chart);
JInternalFrame jif = new JInternalFrame("Chart", ...);
jif.add(cp);
jif.pack();
jif.setVisible(true); 
```

![图片](../Images/523fa339590c5205246fd5a6c67b4a24.png)

# css - 使用旋转 webkit 时出现锯齿状文本问题

> ID：13250963
> 
> 赞同：4
> 
> 时间：2012-11-06T12:22:29.007
> 
> 标签：css

关于如何使文本显示为“内联”的任何想法？

我在我的投资组合上制作了宝丽来照片效果，旋转完全破坏了字体，不确定是否有修复。

![在此处输入图像描述](../Images/11c3008cbd1fc986a38144bf98d9826f.png)

请放心，我目前的字体还不错，但其他字体看起来很糟糕。

代码：

```
figure.polaroid {
width: 221px;
height: 240px;
-webkit-transform: rotate(5deg);
-moz-transform: rotate(5deg);
background-color: white;
padding: 10px;
box-shadow: 1px 2px 10px black;
margin-top: 25px;
border-radius: 5px;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T12:26:02.900

让我猜猜，铬？

尝试`-webkit-backface-visibility: hidden;`

我读到有些人通过对旋转应用 3d 变换来避免这个问题，例如`transform: rotate3d(1, 2.0, 3.0, 10deg)`，所以这可能是一个更清洁的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:29:58.953

您应该尝试应用`text-shadow`以使字体平滑。

在这里您可以尝试不同的阴影，选择一个微妙的阴影并检查它在旋转时的外观： [http ://www.elfboy.com/text-shadow/](http://www.elfboy.com/text-shadow/)

# cakephp - cakephp中搜索过滤器的分页奇怪行为

> ID：13250971
> 
> 赞同：0
> 
> 时间：2012-11-06T12:22:47.027
> 
> 标签：cakephp, search, pagination, cakephp-2.1

我希望有一个带有一个文本框、2 个下拉菜单和一个单选按钮（在 cakephp 中）的搜索表单。但这要通过分页来完成。搜索和分页可以单独工作，但不能一起工作。当我选择过滤条件并单击搜索按钮时，结果会在第一页上很好地显示，但如果我单击任何分页链接，过滤条件将丢失，并且分页数据显示时没有任何过滤器。我该如何解决这个问题？控制器代码：

```
private function _index() {
    $this->genre_list();
    $this->language_list();
    $conditions = array();
    debug($this->postConditions($this->data)); die;
    if (!empty($this->request->data['Artist'])) {
        foreach ($this->request->data['Artist'] as $name => $record) {
            if (isset($record) && !empty($record)) {
                if ($name == 'name') {
                    $conditions = array(
                        $this->modelClass->User. 'User.name LIKE' => '%' . $record . '%',
                    );
                } else {
                    $conditions[$this->modelClass . '.' . $name] = $record;
                }
            }
        }
    };

    $this->paginate = array(
        'contain' => array (
            'User' => array(

                'City',// => array('name'),
                'State',// => array('name'),
                'Country',// => array('name'),
            ),
            'Genre',// => array('name'),
            'Language',// => array('language'),
        ),
        'limit' => 3,
        'conditions' => $conditions
    );

    $data = $this->paginate($this->modelClass);
    //~ debug($data);
    $this->set(compact('data'));
} 
```

看法：

```
<?php
echo $this->Form->create('Search', array(
    'type' => 'file',
    'inputDefaults' => array(
        'format' => array(
            'label', 'between', 'input', 'error', 'after'
        )
    ),
    'class' => 'form-horizontal'
));
echo $this->Form->input('Artist.name', array(
    'div' => 'control-group',
    'label' => array(
        'class' => 'control-label',
        'text' => 'Artist Name'
    ),
    'between' => '<div class="controls">',
    'after' => '</div>',
    'placeholder' => 'Name',
    'error' => array(
        'attributes' => array(
            'wrap' => 'div',
            'style' => 'color:#B94A48'
        )
    )
));
echo $this->Form->input('Artist.genre_id', array(
    'div' => 'control-group',
    'empty' => 'All',
    'label' => array(
        'class' => 'control-label',
        'text' => 'Genre'
    ),
    'between' => '<div class="controls">',
    'after' => '</div>',
    'error' => array(
        'attributes' => array(
            'wrap' => 'div',
            'style' => 'color:#B94A48'
        )
    )
));

echo $this->Form->input('Artist.language_id', array(
    'div' => 'control-group',
    'empty' => 'All',
    'label' => array(
        'class' => 'control-label',
        'text' => 'Select Lanuage'
    ),
    'between' => '<div class="controls">',
    'after' => '</div>',
    'error' => array(
        'attributes' => array(
            'wrap' => 'div',
            'style' => 'color:#B94A48'

    )
        )
    ));
?>
<?php echo $this->element('pagination'); 
```

**使用会话编辑的代码**

```
private function _index() {
    $this->genre_list();
    $this->language_list();
    $conditions = array();

    //~ foreach($this->request->params['named'] as $key => $record) {
        //~ debug($this->request->params['named']);
            //~ $this->request->data['Search'][$key] = $record;
    //~ }

    if (!empty($this->request->params['named']['page'])) {
    // use session data for conditions
    $conditions = (array)$this->Session->read('_indexConditions');
    } else {
    // delete session data
    $this->Session->delete('_indexConditions');
    }

    $conditions = array();
    if (!empty($this->request->data)) {
    // new search! use the data to make conditions,
    // like you did, and save the conditions
    //~ if (!empty($this->request->data['Artist'])) {
        foreach ($this->request->data['Search'] as $name => $record) {
            if (isset($record) && !empty($record)) {
                if ($name == 'name') {
                    $conditions = array(
                        $this->modelClass->User. 'User.name LIKE' => '%' . $record . '%',
                    );
                } else {
                    $conditions[$this->modelClass . '.' . $name] = $record;
                }
            }
        }
    //~ }
    $this->Session->write('_indexConditions', $conditions);
    }

    $this->paginate = array(
        'contain' => array (
            'User' => array(

                'City',
                'State',
                'Country',
            ),
            'Genre',
            'Language',
        ),

        'limit' => 3,
        'conditions' => $conditions
    );

    $data = $this->paginate('Artist');
    $this->set(compact('data'));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:12:54.630

答案很简单：将搜索条件保存在会话或 cookie 中，如果未发送新条件，则使用这些条件。

为简单起见，我省略了您的大部分代码。像这样的东西应该工作。

```
private function _index() {
  // check if this is a pagination request without data
  if (!empty($this->request->params['named']['page']) {
    // use session data for conditions
    $conditions = (array)$this->Session->read('_indexConditions');
  } else {
    // delete session data
    $this->Session->delete('_indexConditions');
  }

  $conditions = array();
  if (!empty($this->request->data)) {
    // new search! use the data to make conditions,
    // like you did, and save the conditions
    $this->Session->write('_indexConditions', $conditions);
  }

  $this->paginate = array(
    'conditions' => $conditions
  );
  $data = $this->paginate($this->modelClass);
  $this->set(compact('data'));
} 
```

它应该被包装在一个组件中。在我的一个项目中，我有一个组件可以自动执行此操作并替换控制器数据以实现更自动化的过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T07:18:00.020

在不使用会话的情况下获得了解决方案

在控制器中：

```
if (!empty($this->request->data) || $this->request->params['named']) {
        foreach($this->request->params['named'] as $key => $record) {
            if($key!= 'page')
                $this->request->data['Search'][$key] = $record;
        }
        foreach ($this->request->data['Search'] as $name => $record) {
            if (isset($record) && !empty($record)) {
                $this->request->params['named'][$name] = $record;
                if ($name == 'name') {
                    $conditions[$this->{$this->modelClass}->User. 'User.name LIKE'] = '%' . $record . '%';
                } else {
                    $conditions[$this->modelClass . '.' . $name] = $record;
                }
            }
        }
    } 
```

并在视图中明确提供控制器和操作：

```
echo $this->Form->create('Search', array(
    'type' => 'file',
    'inputDefaults' => array(
        'format' => array(
            'label', 'between', 'input', 'error', 'after'
        )
    ),
    'url' => array(
        'controller' => 'artists',
        'action' => 'index',
    ),
    'class' => 'form-horizontal'
)); 
```

解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T02:41:55.887

在 2.x 中，您可以将表单设置为使用 GET 而不是 POST。

将表单的类型从文件更改为 GET（顺便说一句，为什么使用文件？？）

```
echo $this->Form->create('Search', array(
'type' => 'get', 
```

当然，而不是使用来自 Request 的数据数组

```
$this->request->data['Search']['name'] 
```

您将像这样使用查询数组：

```
if (!empty($this->request->query['name'])) { 
```

# php - PHP SQL 没有返回结果

> ID：13250975
> 
> 赞同：-1
> 
> 时间：2012-11-06T12:22:52.100
> 
> 标签：php, sql

$block 没有被退回。问题似乎出现在 while 语句期间。我以前使用过这个脚本，只是略有不同，所以我知道这是相当小的东西。任何帮助将不胜感激，在此先感谢。

```
<?php
if (isset($_GET['filter_tag'])) {
    $filter_tag = $_GET['filter_tag'];
}

    if (@mysql_connect('xxxxxxxxx','xxxxxxxxxx','xxxxxxxxxx')) {
        if (mysql_select_db('xxxxx')) {
                $query = " SELECT blocks . CNO, blocks . CName, blocks . URL, images . Ipath FROM blocks LEFT JOIN images ON blocks . INO = images . INO WHERE CNO LIKE 'mysql_real_escape_string($filter_tag)' ";
        $query_run = mysql_query($query);
        } while ($query_row = mysql_fetch_assoc($query_run)) {      
            echo $block =   '<li id="'.$query_row['CNO'].'" class="block" data-toggle="modal" data-target="#blocklModal" >
        <a href="'.$query_row['URL'].'" target="_blank">
        <img class="b" src="'.$query_row["Ipath"].'" alt="" data-controls-modal="block-modal" data-backdrop="static">
        </a>
        <p class="c-title">'.$query_row['Name'].'</p>
        </li>';
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:12:04.280

这可能有效（只要您的查询是正确的）。只要知道 mysql_* 正在贬值，您应该真正使用 PDO 或 MySQLi 来运行您的查询。这个答案在不久的将来将毫无用处：

```
if (isset($_GET['filter_tag'])) {
    $filter_tag = $_GET['filter_tag'];

    if (mysql_connect('xxxxxxxxx','xxxxxxxxxx','xxxxxxxxxx')) {
        if (mysql_select_db('xxxxx')) {
            $filter_tag = mysql_real_escape_string($filter_tag);
            $query = " SELECT blocks . CNO, blocks . CName, blocks . URL, images . Ipath FROM blocks LEFT JOIN images ON blocks . INO = images . INO WHERE CNO LIKE '$filter_tag'";
            $query_run = mysql_query($query);
            while ($query_row = mysql_fetch_assoc($query_run)) {
                $block =  '<li id="' . $query_row['CNO'] . '" class="block" data-toggle="modal" data-target="#blocklModal">';
                $block .= '<a href="' . $query_row['URL'] . '" target="_blank">';
                $block .= '<img class="b" src="' . $query_row["Ipath"] . '" alt="" data-controls-modal="block-modal" data-backdrop="static">';
                $block .= '</a><p class="c-title">' . $query_row['Name'] . '</p></li>';
                echo $block;
            }
        }
    }
} else {
    echo 'No filter tag provided';
} 
```

尝试查看此链接以了解有关 PDO/MySQLi 的更多信息：[PDO 与 MySQLi - 您应该使用哪个](http://net.tutsplus.com/tutorials/php/pdo-vs-mysqli-which-should-you-use/)

# php - 写入 div 作为数据流

> ID：13250976
> 
> 赞同：8
> 
> 时间：2012-11-06T12:22:54.877
> 
> 标签：php, jquery, ajax

考虑一个写入 div 的 AJAX 调用：

```
recent_req=$.post('result.php', { d: data }, function(returnData) {
    $('#content').html(returnData);
}); 
```

PHP 脚本`result.php`执行一些需要时间的功能，每步大约需要 5-20 秒。我正在使用 PHP 的`flush()`函数在每个步骤开始和结束后立即将信息发送到浏览器，但是如何让 Javascript 在数据进入时将数据写入`#content`div？

谢谢。

**编辑：** 澄清：假设`result.php`如下所示，由于限制，实际上无法重构：

```
<?php

echo "Starting...<br />";
flush();

longOperation();
echo "Done with first long operation.<br />";
flush();

anotherLongOperation();
echo "Done with another long operation.<br />";
flush();

?> 
```

如何构建 AJAX 来调用`result.php`，使得 echo 语句在进入时附加到`#content`div 中？欢迎任何带/不带 jQuery 的解决方案。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T15:55:31.807

有一种使用 iframe 的技术，您可以使用它来实现这一点。

类似于其他涉及框架的建议，但它不涉及会话或轮询或任何东西，并且不需要您显示 iframe 本身。它还具有在过程中的任何时候运行您想要的任何代码的好处，以防您使用 UI 做一些比将文本推送到 div 更复杂的事情（例如，您可以更新进度条）。

基本上，将表单提交到隐藏的 iFrame，然后将 javascript 刷新到该框架，该框架与 iFrame 父级中的函数进行交互。

像这样：

**HTML：**

```
<form target="results" action="result.php" method="post">
<!-- your form -->
<input type="submit" value="Go" />
</form>

<iframe name="results" id="results" width="0" height="0" />
<div id="progress"></div> 
```

**Javascript，在您的主页中：**

```
function updateProgress(progress) {
  $("#progress").append("<div>" + progress + "</div>");
} 
```

**结果.php：**

```
<?php

echo "<script language='javascript'>parent.updateProgress('Starting...');</script>";
flush();

longOperation();
echo "<script language='javascript'>parent.updateProgress('Done with first long operation.');</script>";
flush();

anotherLongOperation();
echo "<script language='javascript'>parent.updateProgress('Done with another long operation.');</script>";
flush();

?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T14:06:03.067

您无法使用常规 ajax 调用“流式传输”数据，因为您无法让用户的浏览器“监听”服务器请求。只有在数据处理完成后才会调用您的“成功”函数。

不过，互联网上有很多关于“Ajax Push”的讨论，显然 HTML5 具有 websocket 对象，可用于让用户的浏览器监听服务器请求。语法定义还不是很稳定，所以你不想弄乱它，因为它可能很快就会改变。

您可能想要做的是为 step1 发送一个请求，等待它的返回，然后为 step2 发送一个请求。它会为您的整体处理时间增加一些开销（并使其更加冗长），但如果您只有几个大步骤，它应该可以正常工作。如果您的步骤不需要太多处理，则不应该这样做（因为通信时间将变得大于您的“有效处理时间”）。

编辑：例如，您还可以在用户会话中写入进度。这样，您可以定期 ping 服务器并请求更新状态。这样，即使您有许多小步骤，您也只需每 10 秒左右分派一次请求，这是对每一步分派的改进。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T22:12:16.923

作为替代解决方案，您可以将隐藏提交`form`到`iframe`中，如以下示例所示：

```
<?php

function output_data($data)  {
    echo str_pad($data, 4096, ' ', STR_PAD_RIGHT) . "\n";
    flush(); 
}

function long_runner() {        
    output_data("");

    output_data(date("H:i:s").' - Starting...<br />');
    sleep(10);

    output_data(date("H:i:s").' - Done with first long operation.<br />');
    sleep(10);

    output_data(date("H:i:s").' - Done with another long operation.<br />');
    return("<script>parent.task_complete()</script>");
}

if (isset($_REQUEST["status"])) {
    die(long_runner());
}

?>
<!DOCTYPE html>
<html>
    <head>
        <title>Write to IFRAME as data streams in</title>
        <style>
        #myform { display: none }
        #frm { width: 50% }
        </style>
        <script language="javascript" type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script>
        function task_complete() {
            alert('Task completed');
        }

        $(document).ready(function() { 
            $('#starter').click(function() {
                $('#myform').submit();
            });
        });
        </script>
    </head>
    <body>
        <form id="myform" method="get" target="frm" action="<?= $_SERVER['SCRIPT_NAME'] ?>">
            <input type="hidden" name="status" value="0">
        </form>
        <a href="#" id="starter">Start</a><br />
        <iframe id="frm" name="frm" frameborder="0"></iframe>
    </body>
</html> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-16T21:21:39.833

**将动态数据流写入 div：**

在这里..您专门询问了如何将数据流动态写入“div”。正如许多人所说，可以动态写入 iframe，我们只需要更进一步。这是您问题的完整解决方案，它将以 0.5 秒的最大延迟将该数据带回您的 div。如果您需要更及时的更新，可以对其进行调整。

```
<!DOCTYPE html>
<html>
<head>
    <title>dynamic listener</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script type="text/javascript">
    var count;
    $(function(){
        $('#formx').submit(function(){
            setTimeout(function(){ check_div(); }, 500);
            count = 0;
            return true;
        });
    });

    function check_div()
    {
        var $iframetxt = $('#iframex').contents().text();
        var $div = $('#dynamic');
        if( $iframetxt != $div.text() )
        {
            console.log('rewritten!');
            $div.text( $iframetxt );
            setTimeout(function(){ check_div(); }, 500);
            count = 0;
        }
        else
        {
            count++;
            if(count < 40) setTimeout(function(){ check_div(); }, 500);
            else console.log('timed out');
        }       
    }
    </script>
</head>
<body>
    <div>
        Form
        <form id="formx" action="result.php" method="post" target="iframex">
            <input type="submit" />
        </form>
    </div>
    <div id="dynamic"></div>
    <iframe id='iframex' name="iframex" style="display:none" ></iframe>
</body>
</html> 
```

**1\. 在表单提交时，流数据被发送到 iframe。**

为此，我们只需将表单标签中的目标属性设置为 iframe 名称。

**2\. check_div() 每 0.5 秒运行一次，将#dynamic div 的文本与 iframe 的文本内容进行比较。**

如果它们之间存在差异，则将数据写入div并再次调用超时。如果没有差异，则超时计数器递增。如果计数小于 40（40 x .5 秒 = 20 秒），它会再次调用超时。如果没有，我们假设流已经完成。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-14T23:46:43.080

这是使用会话轮询的解决方案：

### HTML：

```
<!DOCTYPE html>
<html>
<body>
    <div id="content"></div>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script>
    var pollTimeout;
    function pollResult(){
        $.get('poll.php', function(response) {
            // Update #content with partial response
            $('#content').html(response);
            pollTimeout = setTimeout(pollResult, 1000);
        });
    }
    $.post('result.php', function(response) {
        // Result is loaded, stop polling and update content with final response
        clearTimeout(pollTimeout);
        $('#content').html(response);
    });
    // Start polling
    pollResult();
    </script>
</body>

</html> 
```

### 结果PHP：

```
<?php

class SemiStream{

    public function __construct(){
        @session_start();
        $_SESSION['semi_stream'] = '';
    }

    public function write($data){
        @session_start();
        $_SESSION['semi_stream'] .= $data;
        // We have to save and close the session to be
        // able to read the contents of it in poll.php
        session_write_close();
    }

    public function close(){
        echo $_SESSION['semi_stream'];
        unset($_SESSION['semi_stream']);
    }
}

$stream = new SemiStream();
$stream->write("Starting...<br />");

sleep(3);

$stream->write("Done with first long operation.<br />");

sleep(3);

$stream->write("Done with another long operation.<br />");
$stream->close();

echo 'Done.'; 
```

### 投票PHP：

```
<?php
session_start();
echo $_SESSION['semi_stream']; 
```

这工作，无需使用 PHP 的输出缓冲。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-15T20:34:04.820

查看 Pusher 服务，它似乎可以完全满足您的需求： http: [//pusher.com/](http://pusher.com/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-19T13:07:04.540

可能，问题是关于如何在您的应用程序中实现推送技术。我建议你看一下[这个问题，它有很好的例子](https://stackoverflow.com/questions/333664/simple-long-polling-example-code)

# ios - XCode 4.5 - 架构 armv7 的未定义符号

> ID：13250986
> 
> 赞同：0
> 
> 时间：2012-11-06T12:23:40.897
> 
> 标签：ios, xcode, ios6, unity3d, xcode4.5

我是 iOS 开发的新手，我被赋予了将旧版应用程序更新到 iOS6 的任务。该应用程序是使用 Unity 构建的。在 XCode 4.5 中，当我尝试在我的设备 (iPhone 4) 上运行 Unity-iPhone 应用程序时，我收到此错误：

```
Xcode cannot run using the selected device.
Choose a destination with a supported architecture in order to run on this device. 
```

我去了目标的构建设置，并注意到 armv6 是为架构和有效架构设置的。我将这两个设置都更改为标准（armv7，armv7s）。当我尝试运行该项目时，我得到了 104 个编译器错误，如下所示：

```
Undefined symbols for architecture armv7:
  "ForceInclude_BaseBehaviourManager()", referenced from:
      RegisterManagerClasses() in RegisterClasses.o 
```

因此，这不仅仅是将正确的框架导入项目的问题。这些都是源文件之一中的所有方法。对于 armv7，它们如何未定义？另外，如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:42:00.203

注意：要在设备中运行应用程序，设备 IOS 版本必须与 IOS 部署目标匹配，请参见下图：

只需使用您的设备 IOS 更改 IOS 部署目标。

选择Project->Select Info(tab)->从下拉框中选择IOS部署Target

![在此处输入图像描述](../Images/f3a4a4e3e58b01a85fd7a668587aab96.png)

另请注意：Xcode 4.5（及更高版本）不支持生成 armv6 二进制文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:29:41.560

我不确定您使用的是哪个版本的 Unity 引擎，但它是否支持 armv7？

因为如果它不支持，并且它只支持 armv6，那么您将不得不降级您的 Xcode 版本，以便使用编译 armv6 二进制文件的编译器，因为 Xcode 4.5 不这样做。

如果您使用的是支持 armv7 的 Unity 版本，则需要将最低部署版本设置为 iOS4.3

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T10:07:30.277

尝试架构 armv6 和 armv7再次
清理项目
构建。

# ide - Eclipse Juno 上的滴滴涕

> ID：13250989
> 
> 赞同：3
> 
> 时间：2012-11-06T12:23:52.173
> 
> 标签：ide, version, d, eclipse-juno

有没有人让 DDT（D 开发工具）在 Eclipse Juno 上工作？当我尝试安装 DDT 时，它抱怨 DLTK 版本错误。

**更新**：由于默认支持 DDT 版本 0.8 Eclipse Kepler 和 DLTK 5.0。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T12:34:33.670

这是可能的，但您需要安装旧的 dltk 版本，直到 DDT 作者将其移植到新版本。

相关评论：[http ://code.google.com/a/eclipselabs.org/p/ddt/wiki/Installation](http://code.google.com/a/eclipselabs.org/p/ddt/wiki/Installation)

引用布鲁诺：

```
The http://download.eclipse.org/releases/indigo update site contains DLTK 3.0, 
so the installation should still work as described above. There might be a problem if 
Eclipse update actually finds DLTK 3.0 but also finds 4.0 and is trying to install 4.0 if
some other plugin requires version 4.0\. Make sure Eclipse is not trying to get updated
to 4.0 . 
```

# c++ - UINT32 编译器版本不匹配 - 链接到旧库

> ID：13250990
> 
> 赞同：1
> 
> 时间：2012-11-06T12:23:52.283
> 
> 标签：c++, linker, uint32

我正在尝试链接一个 DLL，但我经常遇到`UINT32`.

该库是针对 4.1 版本的 Visual Studio 编译器编译的。我的组件的接口（它是 4.1，我现在正在移植到 2012）在`UINT32`其中定义了许多 s。在 VC4.1`UINT32`中不是由编译器定义的，因此它是`unsigned long`由程序员定义的，但从 VC6 开始，`UINT32`它被定义为`unsigned int`. 这让我的生活变得艰难。

我最初的反应是尝试将`UINT32`界面中的所有内容替换为`unsigned long`并重新编译。这是因为函数签名是相同的。然而`unsigned long`，2012 年的 a 是 64 位宽……而不是 32 位。在大多数情况下这不是问题，但我预见到标志参数和返回类型可能存在问题。

我想知道的是我是否错过了一个更明显的解决方案。我想定义一个不同的类型

```
typedef OAM_UINT32 unsigned long //in the library
typedef OAM_UINT32 unsigned int // in my component 
```

但是问题将与我对 UINT32 的两个定义已经存在的问题相同......对吗？

任何帮助将非常感激。

**问题**

客户端代码

```
#include <oam_if.h>
....
UINT32 uuid = getSomeLocalUserId();
UINT32 dwOamRetVal = dwOamGetUserDetails( uuid ); // LINK ERROR: Symbol not found 
```

oam_if.h

```
UINT32 dwOamGetUserDetails( UINT32 idOfUser ); 
```

编译库 (OAM) 时，UINT32 值被评估为`unsigned long`. 编译客户端组件时，UINT32 被评估为`unsigned int`. 链接器抱怨是因为它在 OAM 库中定义了一个符号，为该符号`dwOamGetuserDetails`rake 并返回一个`unsigned long`，但客户端正在调用一个函数，根据它应该采用一个`unsigned int`.

因此，虽然它们各自的输入都是 32 位长的无符号数字，但函数的签名是不同的，并且链接器会抱怨。

我能看到解决它的唯一方法是`unsigned long`直接定义所有内容。然而，OAM 将使用 32 位长数字，但客户端将使用 64 位数字！

**链接器错误示例**

> 错误 LNK2001：未解析的外部符号“public：virtual unsigned long __thiscall Message::getCallId(void)const”(?getCallId@Message@@UBEKXZ) oam.lib(OAM_SsRequest.obj)

这实际上是从库到组件的回调，因此在这种情况下，它正在寻找与库（unsigned long）定义的 UINT32 匹配的签名，但组件正在为其回调定义一个 unsigned int。

# python - 删除目录中所有非 utf-8 符号的文件

> ID：13250997
> 
> 赞同：0
> 
> 时间：2012-11-06T12:24:11.020
> 
> 标签：python, unicode, python-3.x, filenames

我有一组数据，但我只需要处理`utf-8`数据，所以我需要删除所有带有非`utf-8`符号的数据。

当我尝试使用这些文件时，我收到：

```
UnicodeDecodeError: 'charmap' codec can't decode byte 0x8d in position 3062: character maps to <undefined> and UnicodeDecodeError: 'utf8' codec can't decode byte 0xc1 in position 1576: invalid start byte 
```

我的代码

```
class Corpus:
        def __init__(self,path_to_dir=None):
                self.path_to_dir = path_to_dir if path_to_dir else []

        def emails_as_string(self):
                for file_name in os.listdir(self.path_to_dir):
                        if not file_name.startswith("!"):
                                with io.open(self.add_slash(self.path_to_dir)+file_name,'r', encoding ='utf-8') as body:
                                        yield[file_name,body.read()]                        

        def add_slash(self, path):
                if path.endswith("/"): return path
                return path + "/" 
```

`yield[file_name,body.read()]`我在这里和这里收到错误`list_of_emails = mailsrch.findall(text)`，但是当我使用 utf-8 时一切都很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:34:31.107

我怀疑你想`errors='ignore'`在`bytes.decode`. 有关更多信息，请参阅[http://docs.python.org/3/howto/unicode.html#unicode-howto](http://docs.python.org/3/howto/unicode.html#unicode-howto)和[http://docs.python.org/3/library/stdtypes.html#bytes.decode 。](http://docs.python.org/3/library/stdtypes.html#bytes.decode)

**编辑：**

这是一个示例，显示了执行此操作的好方法：

```
for file_name in os.listdir(self.path_to_dir):
    if not file_name.startswith("!"):
        fullpath = os.path.join(self.path_to_dir, file_name)
        with open(fullpath, 'r', encoding ='utf-8', errors='ignore') as body:
            yield [file_name, body.read()] 
```

使用`os.path.join`，您可以消除您的`add_slash`方法，并确保它可以跨平台工作。