# StackOverflow 问答 13674000-13674999

# c - 客户端：recv 传输端点未连接

> ID：13674007
> 
> 赞同：0
> 
> 时间：2012-12-02T21:24:46.930
> 
> 标签：c, sockets, networking

我正在尝试实现一个客户端-服务器程序。但是，虽然服务器程序运行良好，但客户端程序退出并显示错误：：recv：传输端点未连接。它让我困惑了很长一段时间。一些帮助将不胜感激！这是服务器程序::

```
#include <stdio.h>
#include <arpa/inet.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <unistd.h>
#include <string.h>
#include <stdlib.h>
#include <netinet/in.h>

int main()
{
    int sockid,newsockid,pid;
    struct sockaddr_in myaddr,clientaddr;
    socklen_t x;
    x=sizeof(clientaddr);
    char msg[20];
    sockid=socket(AF_INET,SOCK_STREAM,0);
    if(sockid == -1)
        perror("SOCKET");
    memset(&myaddr,0,sizeof(myaddr));
    myaddr.sin_family=AF_INET;
    myaddr.sin_port=htons(8888);
    myaddr.sin_addr.s_addr=inet_addr(INADDR_ANY);
    if(bind(sockid,(const struct sockaddr *)&myaddr,sizeof(myaddr)) == -1)
        perror("bind");
    listen(sockid,5);
    newsockid=accept(sockid,(struct sockaddr *)&clientaddr,&x);
    if(newsockid == -1)
        perror("accept");
    printf("NEW CLIENT ADDR:: %s",ntohs(clientaddr.sin_addr.s_addr));
    pid=fork();
    while(1)
    {   
        if(pid == 0)
        {
            memset(msg,'\0',20);
            if(recv(newsockid,msg,sizeof(msg),0) == -1)
                perror("recv");
            puts(msg);
            if(strcmp(msg,"exit") == 0)
            {
                close(newsockid);
                exit(getpid());
            }
        }
        if(pid!=0)
        {
            memset(msg,'\0',20);
            gets(msg);
            if(send(newsockid,msg,sizeof(msg),0) == -1)
                perror("send");
            if(strcmp(msg,"exit") == 0)
            {
                close(newsockid);
                exit(getpid());
            }
        }
    }
    return 0;
} 
```

这也是事物的客户端：

```
#include <stdio.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <arpa/inet.h>
#include <unistd.h>
#include <string.h>
#include <stdlib.h>
#include <netinet/in.h>

int main()
{
    int pid,sockfd;
    char msg[20];
    struct sockaddr_in myaddr;
    sockfd=socket(AF_INET,SOCK_STREAM,0);
    if(sockfd == -1)
        perror("socket");
    myaddr.sin_family=AF_INET;
    myaddr.sin_port=htons(8888);
    myaddr.sin_addr.s_addr=inet_addr("127.0.0.1");
    if(connect(sockfd,(struct sockaddr *)&myaddr,sizeof(myaddr)) == -1)
        perror("connect");
    pid=fork();
    while(1)
    {
        if(pid == 0)
        {
            memset(msg,'\0',20);
            if(recv(sockfd,msg,sizeof(msg),0) == -1)
            {
                perror("recv");
                exit(getpid());
            }
            puts(msg);
            if(strcmp(msg,"exit") == 0)
            {
                close(sockfd);
                exit(getpid());
            }
        }
        if(pid!=0)
        {
            memset(msg,'\0',20);
            gets(msg);
            if(send(sockfd,msg,sizeof(msg),0) == -1)
                perror("send");
            if(strcmp(msg,"exit") == 0)
            {
                close(sockfd);
                exit(getpid());
            }
        }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T22:12:15.600

服务器代码中有 2 个错误。

一个在这一行：

```
myaddr.sin_addr.s_addr=inet_addr(INADDR_ANY); 
```

该`inet_addr`函数需要一个字符串，而`INADDR_ANY`常量是一个全零的 IP 号。在更正此行之前，服务器代码因分段错误而崩溃（它真的对您有用吗？）。正确用法：

```
myaddr.sin_addr.s_addr=htonl(INADDR_ANY); 
```

此外，`printf`行不正确 - 地址不短，但很长，你也不能使用`%s` （它很可能会崩溃）。请注意，编译器（`gcc`至少）会发出警告 - 您应该始终启用并阅读编译器警告。作为快速修复，我将其更改为：

```
printf("NEW CLIENT ADDR:: %08x",ntohl(clientaddr.sin_addr.s_addr)); 
```

只要您可以读取十六进制的IP就可以了：）

通过这些修复它对我来说很好（我的意思是服务器和客户端） - 请注意，可能还有其他错误，我不得不承认我没有仔细阅读它。

# objective-c - 多个复选标记来自

> ID：13674008
> 
> 赞同：0
> 
> 时间：2012-12-02T21:24:50.080
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

我正在关注的教程：http: [//www.appcoda.com/ios-programming-tutorial-create-a-simple-table-view-app/](http://www.appcoda.com/ios-programming-tutorial-create-a-simple-table-view-app/)

我创建了一个包含 16 个单元格的表格视图。当我选择一行时，它将在其上显示复选标记。

但是当我滚动表格视图时，列表下方的另一个单元格上还会显示一个复选标记。这对选定的任何单元格重复。

```
 #import "FlightChecklistViewController.h"

    @interface FlightChecklistViewController ()

    @end

    @implementation FlightChecklistViewController

{
    NSArray *tableData;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    // Initialize table data
    tableData = [NSArray arrayWithObjects:@"Egg Benedict", @"Mushroom Risotto", @"Full Breakfast", @"Hamburger", @"Ham and Egg Sandwich", @"Creme Brelee", @"White Chocolate Donut", @"Starbucks Coffee", @"Vegetable Curry", @"Instant Noodle with Egg", @"Noodle with BBQ Pork", @"Japanese Noodle with Pork", @"Green Tea", @"Thai Shrimp Cake", @"Angry Birds Cake", @"Ham and Cheese Panini", nil];

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [tableData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"SimpleTableItem";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];
    }

    cell.textLabel.text = [tableData objectAtIndex:indexPath.row];
    return cell;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UIAlertView *messageAlert = [[UIAlertView alloc]
                                    initWithTitle:@"Row Selected" message:@"You've selected a row" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];

    // Display Alert Message
    [messageAlert show];

    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    cell.accessoryType = UITableViewCellAccessoryCheckmark;

    [tableView deselectRowAtIndexPath:indexPath animated:YES];

}

@end 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T03:01:11.820

您需要以某种方式存储有关已选择的行索引路径的信息。并根据它填充您的单元格。

```
#import "ViewController.h"

@interface ViewController ()
@property (nonatomic, strong) NSMutableArray *selectedCells;
@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.selectedCells = [NSMutableArray array];
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 100;
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *unifiedID = @"aCellID";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:unifiedID];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:unifiedID];
    }

    cell.textLabel.text = [NSString stringWithFormat:@"%u", indexPath.row];

    //if the indexPath was found among the selected ones, set the checkmark on the cell
    cell.accessoryType = ([self isRowSelectedOnTableView:tableView atIndexPath:indexPath]) ? UITableViewCellAccessoryCheckmark : UITableViewCellAccessoryNone;
    return cell;

}

//if a row gets selected, toggle checkmark    
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    if([self isRowSelectedOnTableView:tableView atIndexPath:indexPath]){
        [self.selectedCells removeObject:indexPath];
        cell.accessoryType = UITableViewCellAccessoryNone;
    } else {
        [self.selectedCells addObject:indexPath];
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }
}

-(BOOL)isRowSelectedOnTableView:(UITableView *)tableView atIndexPath:(NSIndexPath *)indexPath
{
    return ([self.selectedCells containsObject:indexPath]) ? YES : NO;
}

@end 
```

你会在[github上找到完整的示例代码](https://github.com/vikingosegundo/checkmark)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T22:09:02.977

问题是细胞被重复使用。因此，如果您将复选标记附件视图添加到更上方的单元格，它将在该单元格进一步向下重复使用时再次出现。添加/删除复选标记时，您应该将哪些已复选标记保存在与表格行相关的某个位置的数组中。然后，当您为表格视图提供一个新单元格时，您可以确定它是否需要复选标记并进行设置。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-02T22:22:51.223

最近我的一个应用程序遇到了同样的问题，我通过这样做解决了这个问题：

```
@property (nonatomic, strong) NSArray *list;

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.list = [[NSArray alloc] initWithObjects:@"foo", @"bar", nil];
}

- (NSString *)SettingsPlist
{
    NSString *paths = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *PlistPath = [paths stringByAppendingPathComponent:@"Settings.plist"];
    return PlistPath;
}

- (NSInteger)tableView:(UITableView *)tableView
 numberOfRowsInSection:(NSInteger)section
{
    return [[self list] count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *contentForThisRow = [[self list] objectAtIndex:[indexPath row]];
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];

    if(cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
    }

    NSDictionary *dict = [[NSDictionary alloc] initWithContentsOfFile:[self SettingsPlist]];

    NSString *row = [NSString stringWithFormat:@"%d",indexPath.row];

    if([[dict objectForKey:row]isEqualToString:@"0"])
    {
        cell.accessoryType = UITableViewCellAccessoryNone;
    }
    else
    {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }

    [[cell textLabel] setText:contentForThisRow];

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSMutableDictionary *plist = [NSMutableDictionary dictionaryWithContentsOfFile:[self SettingsPlist]];

    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

    NSString *row = [NSString stringWithFormat:@"%d",indexPath.row];

    if(cell.accessoryType == UITableViewCellAccessoryNone)
    {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
        NSString *on = @"1";
        [plist setObject:on forKey:row];
        [plist writeToFile:[self SettingsPlist] atomically:YES];
    }
    else if(cell.accessoryType == UITableViewCellAccessoryCheckmark)
    {
        cell.accessoryType = UITableViewCellAccessoryNone;
        NSString *off = @"0";
        [plist setObject:off forKey:row];
        [plist writeToFile:[self SettingsPlist] atomically:YES];
    }
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

# ruby - 在外壳外面跑得很薄

> ID：13674009
> 
> 赞同：1
> 
> 时间：2012-12-02T21:24:58.903
> 
> 标签：ruby, sinatra, rack, thin

我正在使用瘦来运行我的 Sinatra 应用程序，但是现在，当我关闭 shell 时，服务器停止了。是否可以在后台将其作为进程运行，并像我在 shell 中那样查看/管理日志？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T21:27:14.227

使用`-d`开关启动它的守护进程。默认情况下它将写入输出`log/thin.log`，或者您可以使用`-l`开关覆盖它。查看`thin -h`完整的选项列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T21:34:34.087

正如@Chris 提到的，您可以将其守护。

另一种方法是使用[`GNU Screen`](http://en.wikipedia.org/wiki/GNU_Screen)

这样您就可以在前台运行您的应用程序，然后关闭您的终端。

当您重新进入`Screen`会话时，您将拥有相同的环境，
就像您切换终端选项卡时一样。

# wordpress - 如何防止 git pull 覆盖文件？

> ID：13674014
> 
> 赞同：0
> 
> 时间：2012-12-02T21:25:15.057
> 
> 标签：wordpress, git, github, git-pull

我使用 Git 和 GitHub 将我在本地 Web 开发环境中所做的更改推送到我的 GitHub 帐户，然后我从那里将这些更新拉到我的实时生产站点。我正在使用 WordPress，所以我所做的是 .gitignore wp-config.php 文件，因为我的制作站点有自己独特的 wp-config.php 文件和自己的数据库凭据。当我 git 忽略此文件时，当我拉到我的生产站点时，它给了我以下错误：

```
error: Your local changes to the following files would be overwritten by merge:
wp-config.php
Please, commit your changes or stash them before you can merge.
Aborting 
```

当我执行 git pull 时，如何防止这个 wp-config.php 文件被覆盖（更具体地说是删除）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T21:32:19.547

这是您机器特定的配置文件。对于这种情况，最好使用构建工具。对您来说，最好在特殊文件上创建自定义配置`my-config.php`并将其包含在`wp-config.php`. 中也忽略`my-config.php`。`.gitignore`现在你永远不会看到这样的问题。

您将看到的是`my-config.php`找不到文件错误。并将其写在您的自述文件中。

我做这整件事`configure`，`make`即使项目是在[php](/questions/tagged/php "显示标记为“php”的问题")

如果这**不是配置文件**，并且您确定可以`commit`先执行更改，然后再执行`pull`。其他选项是`stash`已在错误消息中告知的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T21:27:30.060

您的更改不会被覆盖。这就是错误消息告诉您的内容。拉取失败是因为 git 不想覆盖您的更改。

为了让拉动发生并保留您的更改，请`git stash`在拉动之前执行。这将保存您的更改副本，并允许您毫无问题地拉取。然后`git stash pop`在拉取后将恢复您的更改。请注意，如果您拉动的更改`wp-config.php`与本地更改接触文件的同一部分，您可能会遇到合并冲突。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T21:28:30.450

另一方还没有生效的忽略文件。一旦它在那里，您将不会收到此消息。而且它仍然被跟踪。所以除了修改两边的.ignore文件外，还需要把两边都删掉，以后就不会碍事了。

如果你打算将 git 用作你的博客程序的一部分，也可以看看 octopress。

# vim - 基于外部文件搜索的高亮显示

> ID：13674016
> 
> 赞同：2
> 
> 时间：2012-12-02T21:25:20.750
> 
> 标签：vim, highlight

我有两个文本文件，一个是我目前正在工作的文件，另一个是字典。我想做的是使用后者作为输入来搜索第一个。我想突出显示所有匹配的行。

例如：

**文件1：**

```
I like eggs
I like meat
I don't like eggplant
My mom likes chocolate
I like chocolate too 
```

**文件2：**

```
meat
chocolate 
```

在此示例中，应突出显示这些行：

```
I like meat
My mom likes chocolate
I like chocolate too 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:36:27.660

该方法类似于我对您的[相关问题](https://stackoverflow.com/a/13679900/813602)给出的答案：使用`readfile()`，`join()`将线条转换为模式，然后使用`:match`。

以下是我如何在命令行上以交互方式构建它：

```
:match Search /.*\%(<C-R>=join(readfile('file2'), '\|')<CR>\).*/<CR> 
```

请注意，这种快速单行省略了错误处理、正则表达式转义等。如果您需要经常这样做，我建议您将其转换为自定义命令，就像我在链接答案中向您展示的那样。

# iphone - 如何清除变量的内容

> ID：13674019
> 
> 赞同：0
> 
> 时间：2012-12-02T21:25:32.877
> 
> 标签：iphone, objective-c

如何清除数组和 UIImageView 的内容？这样数组和 UIImageView 不会被删除，而是“清除”其中存储的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:38:38.300

您需要可变数组来“清除”，调用`removeAllObjects`方法：

```
[array removeAllObjects]; 
```

将`image`UIImageView 的属性设置为`nil`“清除”它：

```
imageView.image = nil; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T21:41:34.633

你不能改变一个`NSArray`. 不过，有一个为此`NSMutableArray`调用的方法。`removeAllObjects`

UIImageView 不*存储*任何内容。您可以通过将其`image`属性设置为 来从中删除任何关联的图像`nil`。

# python - 如何实现具有不同参数类型的python函数

> ID：13674020
> 
> 赞同：1
> 
> 时间：2012-12-02T21:25:34.847
> 
> 标签：python, duck-typing

我需要用python实现一个两个参数的函数。参数类型可以是：(String, String)、(String, List) 或 (List, List)。在 Java 中，我会使用重载来管理这种情况，但在 python 中，我只能考虑下一个解决方案：

```
def myFunction(param1, param2):
     if isinstance(param1, basestring) and isinstance(param2, basestring):
        # implementation 1
     elif isinstance(param1, basestring) and isinstance(param2, list):
        # implementation 2
     elif ...

     else:
         raise TypeError 
```

这是最好的方法吗？我是python新手。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T21:28:15.963

Duck typing 意味着测试方法，而不是使用`isinstance()`. 您打算*如何*处理输入？

例如，如果您将接受一个字符串，然后将该字符串拆分为换行符并像列表一样使用它，请测试`.splitlines()`：

```
if hasattr(arg1, 'splitlines'):
    arg1 = arg1.splitlines()
if hasattr(arg2, 'splitlines'):
    arg2 = arg2.splitlines()
# now arg1 and arg2 are presumed to be lists. 
```

# winapi - 手动获取现代 UI 主题颜色

> ID：13674026
> 
> 赞同：3
> 
> 时间：2012-12-02T21:26:15.947
> 
> 标签：winapi, windows-8, registry

有没有办法找出现代 UI 的当前主题颜色集？WinAPI 函数或注册表值对我来说是最好的解决方案。

通过当前的主题颜色，我的意思是[这个](http://s14.directupload.net/images/121202/ru6raz67.png)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T05:16:23.683

UxTheme.dll 中有一个名为 GetImmersiveUserColorSetPreference 的私有函数。如果将第一个参数设置为 true，它应该使用 GameScripting 提到的注册表中的值（并通知系统更改）。

[我在这里](http://blog.quppa.net/2013/01/02/retrieving-windows-8-theme-colours/)写了关于检索沉浸式/现代/地铁颜色的文章。请记住，您将无法在 WinRT Windows 应用商店应用程序中使用这些未记录的功能，因为它们将无法通过认证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T21:40:07.503

[在使用procmon.exe](http://technet.microsoft.com/de-de/sysinternals/bb896645.aspx)对我的系统进行反向工程后，我发现路径下的注册表项`HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\Accent\ColorSet_Version3`似乎是选定的颜色。

~~我可以使用注册表编辑器 (regedit.exe) 对其进行读写，所有更改都会立即应用。~~

**编辑：**经过一些进一步的研究，它似乎是只读的，更改了“不再”应用。路径上似乎有任何东西，`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\SystemProtectedUserData\S-1-5-21-3552576858-2522621019-3615910227-1001\AnyoneRead\Colors\ImmersiveColorIndex_Version3`但我无法更改值（即使具有管理员权限）

# sql - 如何获取 postgresql 中的前 10 个值？

> ID：13674031
> 
> 赞同：357
> 
> 时间：2012-12-02T21:27:03.947
> 
> 标签：sql, postgresql, sql-limit

我有一个简单的问题：

我有一张**`postgresql`**桌子：`Scores(score integer)`。

我怎样才能最快地获得最高的 10 分？

**更新：**

我将多次执行此查询，并以最快的解决方案为目标。

* * *

## 回答 #1

> 赞同：531
> 
> 时间：2012-12-02T21:29:52.473

为此，您可以使用[限制](http://www.postgresql.org/docs/current/static/queries-limit.html)

```
select *
from scores
order by score desc
limit 10 
```

如果性能很重要（什么时候不重要；-）寻找分数指数。

* * *

从 8.4 版本开始，您还可以使用标准 ( [SQL:2008](https://en.wikipedia.org/wiki/Select_(SQL)#FETCH_FIRST_clause) )[`fetch first`](https://www.postgresql.org/docs/8.4/static/sql-select.html#SQL-LIMIT)

```
select *
from scores
order by score desc
fetch first 10 rows only 
```

* * *

正如@Raphvanns 指出的那样，这会给你`first 10 rows`字面意思。要删除重复值，您必须选择[`distinct`](https://www.postgresql.org/docs/current/sql-select.html#SQL-DISTINCT)行，例如

```
select distinct *
from scores
order by score desc
fetch first 10 rows only 
```

[SQL小提琴](http://sqlfiddle.com/#!17/f2976/2/0)

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-12-02T21:31:34.783

似乎您正在寻找带有[LIMIT](http://www.postgresql.org/docs/9.3/static/queries-limit.html)子句`ORDER BY`的`DESC`结束顺序：

```
SELECT
 *
FROM
  scores
ORDER BY score DESC
LIMIT 10 
```

当然`SELECT *`会严重影响性能，所以请谨慎使用。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-12-31T00:31:53.927

请注意，如果前 10 个值中存在关联，您将仅获得前 10 行，而不是提供答案的前 10 个*值。*例如：如果前 5 个值是 10、11、12、13、14、15，但您的数据包含 10、10、11、12、13、14、15，那么您只会得到 10、10、11、12、13、 14 作为你的前 5 名`LIMIT`

这是一个解决方案，如果存在平局，它将返回超过 10 行，但您将获得`some_value_column`技术上排名前 10 的所有行。

```
select
  *
from
  (select
     *,
     rank() over (order by some_value_column desc) as my_rank
  from mytable) subquery
where my_rank <= 10 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-04-17T07:01:14.310

```
(SELECT <some columns>
FROM mytable
<maybe some joins here>
WHERE <various conditions>
ORDER BY date DESC
LIMIT 10)

UNION ALL

(SELECT <some columns>
FROM mytable
<maybe some joins here>
WHERE <various conditions>
ORDER BY date ASC    
LIMIT 10) 
```

# ios - 试图将苹果的页面控件示例合并到故事板视图控制器中

> ID：13674032
> 
> 赞同：1
> 
> 时间：2012-12-02T21:27:05.323
> 
> 标签：ios, uiscrollview, uipagecontrol, pagecontrol

我有一些图像我试图在类似于苹果页面控件示例的滚动视图中加载。我的应用程序因错误而崩溃

> 'NSInvalidArgumentException'，原因：'-[TutorialViewController loadScrollViewWithPage:]：无法识别的选择器发送到实例 0x687d0b0'

我想我对此已经足够了解，它告诉我我没有选择器的方法......但我不知道如何解决它！先感谢您。

头文件 //TutorialViewController.h #import

```
@interface TutorialViewController : UIViewController <UIScrollViewDelegate>
{    
    // To be used when scrolls originate from the UIPageControl
    BOOL pageControlUsed;

    int pageNumber;
}

@property (nonatomic, retain) NSArray *iPhoneTutorial;

@property (nonatomic, retain) IBOutlet UIScrollView *scrollView;
@property (nonatomic, retain) IBOutlet UIPageControl *pageControl;

@property (nonatomic, retain) NSMutableArray *viewControllers;

- (IBAction)changePage:(id)sender;

@end 
```

实施文件

```
//TutorialViewController.m
#import "TutorialViewController.h"
static NSUInteger kNumberOfPages = 3;

static NSString *NameKey = @"nameKey";
static NSString *ImageKey = @"imageKey";

@interface TutorialViewController (PrivateMethods)
- (void)loadScrollViewWithPage:(int)page;
- (void)scrollViewDidScroll:(UIScrollView *)sender;
@end

@implementation TutorialViewController
@synthesize scrollView, pageControl;

- (void)awakeFromNib
{
    // load our data from a plist file inside our app bundle
    NSString *path = [[NSBundle mainBundle] pathForResource:@"iPhoneTutorial" ofType:@"plist"];
    self.iPhoneTutorial = [NSArray arrayWithContentsOfFile:path];

    // view controllers are created lazily
    // in the meantime, load the array with placeholders which will be replaced on demand
    NSMutableArray *controllers = [[NSMutableArray alloc] init];
    for (unsigned i = 0; i < kNumberOfPages; i++)
    {
        [controllers addObject:[NSNull null]];
    }
    //self.viewControllers = controllers;
    //[controllers release];

    // a page is the width of the scroll view
    scrollView.pagingEnabled = YES;
    scrollView.contentSize = CGSizeMake(scrollView.frame.size.width * kNumberOfPages, scrollView.frame.size.height);
    scrollView.showsHorizontalScrollIndicator = NO;
    scrollView.showsVerticalScrollIndicator = NO;
    scrollView.scrollsToTop = NO;
    scrollView.delegate = self;

    pageControl.numberOfPages = kNumberOfPages;
    pageControl.currentPage = 0;

    // pages are created on demand
    // load the visible page
    // load the page on either side to avoid flashes when the user starts scrolling
    //
    [self loadScrollViewWithPage:0];
    [self loadScrollViewWithPage:1];
}

// load the view nib and initialize the pageNumber ivar
- (id)initWithPageNumber:(int)page
{
    pageNumber = page;
    return self;
}

- (void)scrollViewDidScroll:(UIScrollView *)sender
{
    // We don't want a "feedback loop" between the UIPageControl and the scroll delegate in
    // which a scroll event generated from the user hitting the page control triggers updates from
    // the delegate method. We use a boolean to disable the delegate logic when the page control is used.
    if (pageControlUsed)
    {
        // do nothing - the scroll was initiated from the page control, not the user dragging
        return;
    }

    // Switch the indicator when more than 50% of the previous/next page is visible
    CGFloat pageWidth = scrollView.frame.size.width;
    int page = floor((scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
    pageControl.currentPage = page;

    // load the visible page and the page on either side of it (to avoid flashes when the user starts scrolling)
    [self loadScrollViewWithPage:page - 1];
    [self loadScrollViewWithPage:page];
    [self loadScrollViewWithPage:page + 1];

    // A possible optimization would be to unload the views+controllers which are no longer visible
}

// At the begin of scroll dragging, reset the boolean used when scrolls originate from the UIPageControl
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView
{
    pageControlUsed = NO;
}

// At the end of scroll animation, reset the boolean used when scrolls originate from the UIPageControl
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    pageControlUsed = NO;
}

- (IBAction)changePage:(id)sender
{
    int page = pageControl.currentPage;

    // load the visible page and the page on either side of it (to avoid flashes when the user starts scrolling)
    [self loadScrollViewWithPage:page - 1];
    [self loadScrollViewWithPage:page];
    [self loadScrollViewWithPage:page + 1];

    // update the scroll view to the appropriate page
    CGRect frame = scrollView.frame;
    frame.origin.x = frame.size.width * page;
    frame.origin.y = 0;
    [scrollView scrollRectToVisible:frame animated:YES];

    // Set the boolean used when scrolls originate from the UIPageControl. See scrollViewDidScroll: above.
    pageControlUsed = YES;
}

- (void)viewDidLoad

{
    // Do any additional setup after loading the view, typically from a nib.
    [super viewDidLoad];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:35:45.913

你必须添加一个

```
- (void)loadScrollViewWithPage:(int)page 
```

添加视图的方法

像

```
switch(page) {
   case 0:
   myView1 = [[MyView1ViewController alloc] initWithNibName:@"MyView1ViewController" bundle:nil];
   [scrollView addSubview: myViewPage1.view]; 
  break;
} 
```

但是Apple Demo“PageControl”在File PhoneContentViewController.m中有这样一个方法

# java - java.io.FileWriter 重复字符？

> ID：13674033
> 
> 赞同：0
> 
> 时间：2012-12-02T21:27:09.677
> 
> 标签：java

给定一个输入文件（仅限 ASCII 文本），使用滑动窗口算法对其进行压缩。以下是您可能遵循的步骤的概要：

```
Read the file into an ArrayList of Characters

Initialize the window to the first N characters of the ArrayList where 0 < N < 256\. The window can be another ArrayList or it can be index markers that point to a beginning and ending position within the main ArrayList. You get to choose your approach.

See if the next byte after the window is contained in the window.

If so, then
    Scan forward and keep track of how many chars match
    Go to next occurance of first byte
    Scan forward and keep track of how many chars match
    Do this for all occurances of first byte within the window and use the position that has the highest match length.
    Write special marker, position, and match length to output file 

If not, then
    Write next byte to output file 

Slide the window forward either by one character or match length, depending on what you found in step 3

Close the output file 
```

我认为我的问题是对于输入文件中的每个字符，我将该字符两次写入输出文件。

我的代码：

```
public void compressAndSaveAs() throws IOException {
    //new FileWriter
    FileWriter output = new FileWriter("MuffinManCompressed.txt");
    (get length of window from user and set equal to windowSize)
    //creates an array to compare with the window array
    ArrayList <Character> comparisonArray = new ArrayList <Character> ();
    int ind = 0;
    for (int i = 0; i + windowSize + 1 < fileArray.size(); i++) {
        for (int b = ind; b <= windowSize + ind; b++) {
            window.add(fileArray.get(b));
        }
        ind++;
        comparisonArray.add(fileArray.get(i + windowSize + 1));
        int placeHolder = i;
        int marker = 0;
        i = 0;
        char test = comparisonArray.get(i);
        while (window.contains(test)) {
            i++;
            if ((i + windowSize + 1) >= fileArray.size()) {
                break;
            }
            comparisonArray.add(fileArray.get(i + windowSize + 1));
            test = comparisonArray.get(i);
            marker++;
        }
        i = placeHolder;
        System.out.print(i);
        System.out.println(window);
        if (marker < 4 && i == 0) {
            for (int length = 0; length < window.size(); length++) {
                try {
                    output.write(window.get(length));
                } 
                catch (IOException e) {
                    e.printStackTrace();
                }
            }
            for (int a = 0; a < comparisonArray.size(); a++) {
                try {
                    output.write(comparisonArray.get(a));
                } 
                catch (IOException e) {
                    e.printStackTrace();
                }
            }
            comparisonArray.clear();
            window.clear();
        }

        else if (i == 0 && marker >= 4){
            for (int length = 0; length < window.size(); length++) {
                try {
                    output.write(window.get(length));
                } 
                catch (IOException e) {
                    e.printStackTrace();
                }
            }
            try {
                output.write((int) 36);
                String firstFactor = Integer.toString(window.indexOf(comparisonArray.get(0)));
                String secondFactor = Integer.toString(comparisonArray.size());
                output.write(firstFactor);
                output.write(", ");
                output.write(secondFactor);
            }
            catch (IOException e) {
                e.printStackTrace();
            }
            comparisonArray.clear();
            window.clear();
        }

        else if (i != 0 && marker >= 4){

                try {
                    output.write(window.get(window.size() - 1));
                } 
                catch (IOException e) {
                    e.printStackTrace();
                }

            try {
                output.write((int) 36);
                String firstFactor = Integer.toString(window.indexOf(comparisonArray.get(0)));
                String secondFactor = Integer.toString(comparisonArray.size());
                output.write(firstFactor);
                output.write(", ");
                output.write(secondFactor);
            }
            catch (IOException e) {
                e.printStackTrace();
            }
            comparisonArray.clear();
            window.clear();
        }
        else if (i != 0 && marker < 4){

                try {
                    output.write(window.get(window.size() - 1));
                } 
                catch (IOException e) {
                    e.printStackTrace();
                }

                try {
                    output.write(comparisonArray.get(comparisonArray.size() - 1));
                } 
                catch (IOException e) {
                    e.printStackTrace();
                }
            }
            comparisonArray.clear();
            window.clear();
        }
    output.close();
} 
```

# java - 应用程序大小问题

> ID：13674035
> 
> 赞同：0
> 
> 时间：2012-12-02T21:27:25.340
> 
> 标签：java, android

我正在构建一个字典应用程序，我现在有一个问题。我的应用程序是 16MB，当我在手机上安装它时，数据库文件复制到数据文件夹，在管理应用程序部分我看到我的应用程序大小是 32MB（我的应用程序+数据文件夹）。

我不欺骗用户，我想说，我的应用程序是 16MB，但是当用户安装它时，它变成了 32MB。为什么？这是一个消极点，我想解决它。我希望我的应用在用户手机中仅使用 16MB。只是

我该如何解决这个问题？我必须直接在资产文件夹中读写还是有其他解决方案？这是低存储尺寸手机的问题。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T21:35:40.300

我不确定您的数据库是如何构建的，它是否是一个预加载的数据库，您只需在其中包含所有数据的 .db 文件，还是在您使用应用程序推送所有数据库内容然后在安装应用程序时，您实际上将所有数据安装在数据库中。

在后一种情况下，您将应用程序的大小加倍，因为您已经拥有要用于填充数据库的数据内容（在文件中）（在这种情况下为 16 mb）。然后您使用这些文件来实际创建您的数据库文件（又是 16mb），这会使应用程序的大小翻倍。

所以你可以做的是在一个 .db 文件中预填充你的数据库内容，然后直接使用这个文件作为你的应用程序中的 Db 文件（这将使它保持在 16mb）。遵循本教程：

[http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T21:36:39.603

不确定我完全理解你的情况。

您是否有一个大约 16MB 的字典，它作为字符串常量在您的代码或某些资源文件或其他东西中打包在您的应用程序中（使其大小为 16MB），然后，当您的应用程序安装或首次启动时，您还将此字典写入您的应用程序的数据库？

如果是这样，那么现在您有 2 个字典副本，使其大小为 32MB。

要解决这个问题，要么在你的应用程序中只保留一份副本，要么从某个地方下载字典以将其放入数据库，而不是将其作为常量存储在应用程序中。

# php - 新手While循环

> ID：13674038
> 
> 赞同：0
> 
> 时间：2012-12-02T21:27:32.757
> 
> 标签：php, while-loop

当我尝试显示 index.php 时出现以下错误警告：mysql_numrows() 期望参数 1 是资源，在第 18 行的 C:\xampp\htdocs\cards\index.php 中给出的布尔值

我不知道我是否没有正确连接到数据库，或者是否有其他错误。基本上我试图从我的表“卡片”中显示 3 行随机数据。我要显示数据的表中的列是“playerName”。我还不担心格式化数据。代码如下：

```
<?php
include_once 'header.php';
require_once 'config.php';

 $con = mysql_pconnect("localhost","*****","*****");
 mysql_select_db("USE cards",$con);
 $cards=0;
 if (!$con)
 {
 die('Could not connect: ' . mysql_error());
 }

 $sql = "SELECT * FROM cards ORDER BY RAND() LIMIT 3";

 $results = mysql_query($sql);
 $array = mysql_fetch_array($results);

 $num=mysql_num_rows($results);

 $i=0;
 while ($i < $num) {

 echo $rows['playerName'];
 $i++;
}

 include_once 'footer.php';

?> 
```

我知道这可能是一个简单的新手问题，但我感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T21:32:20.167

您的 mysql_select_db 调用应该只将数据库名称作为第一个参数，而不是整个 USE 语句。很可能它会静默失败并且不选择卡片数据库。然后查询失败（再次，静默）返回 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T23:36:38.943

两件事，回显一个数组不会打印它（echo $results;）而是使用 print_r($results) 或 var_dump($results) 另一件事，我认为错误是由于没有返回结果，但如果你使用var_dump 或 print_r 你将能够验证是否是这种情况:)

这里还有一个错字： $con = mysql_pconnect("localhost","jalexander","brunswick3"); 从连接中删除 p :)

此外，您可能想在这里用星号替换您的数据库凭据:)

最后，您声明了变量卡但从不使用它？

实际上还有一个，将 $rows[playerName] 更改为 $rows['playerName']

**要获取不同的行而不是使用 while 循环，您可以像这样使用 foreach：**

```
foreach($array as $row){
echo $row['playerName'];
} 
```

**或者使用 while 循环使用**

```
$i=0;
 while ($i < $num) {

 echo $rows[$i]['playerName'];
 $i++;
} 
```

它在您当前的代码中不起作用，因为您没有循环遍历数组的元素，只是每次都回显相同的元素

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T21:51:05.213

此外，它是 mysql_num_rows（不是 mysql_numrows）。

手册： http: [//php.net/manual/en/function.mysql-num-rows.php](http://php.net/manual/en/function.mysql-num-rows.php)

# jquery - Fancybox 跨域调用

> ID：13674039
> 
> 赞同：1
> 
> 时间：2012-12-02T21:27:33.367
> 
> 标签：jquery, fancybox, cross-domain

我想通过跨域调用在网页中使用fancybox弹出窗口。所以我在标题中插入了一个 js 行来完成所有的脏活。这意味着 this 负责在未加载的情况下调用 jQuery，调用 fancybox.js 及其 css。它还包含触发弹出窗口的功能。我试图在特定行中调用我需要的重要文件。所以我在fancybox正确执行后调用弹出窗口，如下所示：

```
 jQuery.getScript(
        "http://www.somedomain.com/fancybox/jquery.fancybox.pack.js?v=2.1.3",
        function(){
           jQuery(".fancybox").fancybox();
        }
    ); 
```

问题是我从萤火虫收到这些错误消息：

1.Uncaught TypeError: undefined is not a function for the first line of code in fancybox.js

2.Uncaught TypeError: Object [object Object] has no method 'fancybox' 当我调用fancybox 时，您可以在下面的代码中看到。

我已经在 DEMO 上传了我的代码[演示](http://jsfiddle.net/fakiolinho/r6BgS/5/)（这是 html 文件和头部的 js 链接调用的远程 js 脚本）。非常感谢。

# php - 任何异常的自定义错误处理程序

> ID：13674042
> 
> 赞同：2
> 
> 时间：2012-12-02T21:27:47.447
> 
> 标签：php, exception-handling, yii

问题是我按照这个主题做所有事情[http://www.yiiframework.com/doc/guide/1.1/en/topics.error](http://www.yiiframework.com/doc/guide/1.1/en/topics.error)，但是在我的控制器中我引发异常（ throw new Exception("error"); ） , yii 不要路由到我的自定义错误控制器并使用系统默认值。如何处理此类异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T22:01:13.987

你必须使用 Yii 自己的异常类之一：`CException`,`CDbException`或`CHttpException`. 从您提供的链接： [http ://www.yiiframework.com/doc/guide/1.1/en/topics.error#raising-exceptions](http://www.yiiframework.com/doc/guide/1.1/en/topics.error#raising-exceptions)

```
// if post ID is invalid
throw new CHttpException(404,'The specified post cannot be found.'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T08:43:07.873

如果 mysql 出现异常，请运行您的查询

```
$insertCommand = $model->getCommandBuilder()->createSqlCommand($sql,$baseParams+$relParams);
try {
        $insertCommand->execute();
} catch(CDbException $e) {
        // Here's a way to get to the error code for the statement in question.
        // These codes are standardized ANSI SQL "SQLSTATE" error codes.
        $sqlErrorCode = $insertCommand->pdoStatement->errorCode();
        // And to get to the class part of it, simple grab the two first characters.
        // The class should be the same regardless of DB vendor, while the rest of the code can differ.
        // For example one particular error was reported by PostgreSQL as 23505 but MySQL only said 23000.
        $sqlErrorCodeClass = substr($sqlErrorCode, 0, 2);
} 
```

# javascript - 在运行时更改视口比例？

> ID：13674048
> 
> 赞同：1
> 
> 时间：2012-12-02T21:28:16.263
> 
> 标签：javascript, html

我想在运行时设置视口比例 - 移动浏览器是否应该在设置后立即应用更改？这就是我正在尝试的：

```
var scale = 2.0;
var viewport = document.getElementById("viewport"); 
if (viewport != null) {
    viewport.setAttribute("content", 
        "initial-scale=" + scale + ", " +
        "maximum-scale=" + scale + ", " +
        "minimum-scale=" + scale + ", " +
        "user-scalable=no");
} 
```

但它似乎不起作用。基本上我想要一个按钮，按下时可以将视口比例加倍。我主要针对移动Safari。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:27:25.280

有几点需要考虑：

*   视口内容字符串应该用逗号分隔，而不是一系列语句。
*   `minimum-scale`可能应该在那里，因为我相信`initial-scale`仅用于页面加载。

# ruby-on-rails-3 - 状态机，命名下一个和上一个状态

> ID：13674053
> 
> 赞同：2
> 
> 时间：2012-12-02T21:28:34.717
> 
> 标签：ruby-on-rails-3, state-machine

我在 Rails 3.2.9 应用程序中使用 state_machine gem，并试图获取下一个状态的名称。

我可以列出所有状态：

```
 Order.state_machine.states.map &:name 
```

但是我在文档中看不到是否可以获得下一个州的名称。

我的模型中有这样的东西：

```
 state_machine :initial => 'stage_1', :use_transactions => false do
    event :next do
      transition :from => 'stage_1', :to => 'stage_2'
      transition :from => 'stage_2', :to => 'stage_3', :if => :is_valid?
      transition :from => 'stage_2', :to => 'stage_4' 
```

如果我在 state_2，我想显示 stage_3。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T22:51:21.067

您可以简单地使用辅助方法，例如

```
Order.state_events
Order.state_transitions

Order.state_paths.from_name
Order.state_paths.to_name 
```

检查[实例方法的文档](http://rdoc.info/github/pluginaweek/state_machine/master/frames)

# qt - 使用拆分索引拆分 QString

> ID：13674057
> 
> 赞同：2
> 
> 时间：2012-12-02T21:28:55.687
> 
> 标签：qt, qstring

我需要将一个 qstring 拆分为两个字符串，但只知道拆分器字符的索引。这是一个例子

```
input:
PineApple
3 

Output:
Pine  // 'e'  has index 3, so it is the splitter char and it belongs to the first part
Apple 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T21:37:05.867

如果我正确理解了您的问题，您可以使用[`left`](http://qt-project.org/doc/qt-4.8/qstring.html#left)and[`mid`](http://qt-project.org/doc/qt-4.8/qstring.html#mid)方法在 a 之前和之后提取字符串的部分`offset`：

```
quint32 offset = 4;
QString test("PineApple");
QString before = test.left(offset); // Pine
QString after = test.mid(offset); // Apple 
```

如果您希望最终得到一个`QStringList`（如果您使用过`split`），您可以像这样获得一个：

```
QStringList list;
list << before 
     << after; 
```

# java - 从函数内部更改字段

> ID：13674063
> 
> 赞同：2
> 
> 时间：2012-12-02T21:29:49.950
> 
> 标签：java, swing, serialization

好的，这应该是我现在的最后一个问题 :) 无论如何，我有一个称为 mode 的字符串和一个称为行和组件的 ArrayList，它们在我的程序中通过各种函数进行编辑。一切正常。但是当我从一个序列化的保存文件中加载时，我无法从函数中编辑这些值。加载后，如果我尝试更改 mode 的值或添加到其中一个数组列表，则更改会在该函数内发生，但是当该函数结束时它会恢复为旧值。加载后如何从函数内全局更改这些字段？

```
public class Main implements Serializable {

  ArrayList<Component> components = new ArrayList<Component>();
  ArrayList<Connection> lines = new ArrayList<Connection>();
  String mode = "";

  void makeErase() {
    mode = "erase";
    header.setText("Click something to erase it");
  }

  abstract class Component extends JLabel implements MouseListener,            
                                                     MouseMotionListener, 
                                                     Serializable {
    public void mousePressed(MouseEvent e) { 

      if (mode.equals("erase")) {
        drawPanel.remove(this);
        components.remove(this);
        for (Input input : inputs) {                    
          for (Connection connection : input.connections) {
            System.out.println("hey");
            drawPanel.remove(connection);
            lines.remove(connection);
            connection.output.connections.remove(connection);
          }
        }
      }

      void save() throws IOException {
        String savepoint = "C:\\apcs\\hi.txt";
        FileOutputStream fileOut = new FileOutputStream(savepoint);
        ObjectOutputStream out = new ObjectOutputStream(fileOut);

        for (Component c : components) {
          for (Output o : c.outputs) {
            for (Input i : o.inputsReceivingThis) {

            }
          }
         }
        ProjectState state = new ProjectState();
        out.writeObject(state);
        out.close();
        fileOut.close();

      }

      void load() throws IOException, ClassNotFoundException {
        ProjectState state;
        String loadpoint = "C:\\apcs\\hi.txt";
        FileInputStream fileIn = new FileInputStream(loadpoint);
        ObjectInputStream in = new ObjectInputStream(fileIn);
        state = (ProjectState) in.readObject();
        in.close();
        fileIn.close();
        drawPanel.removeAll();
        drawPanel.repaint();

        components.remove(components);
        lines.remove(lines);
        components=state.projectComponents;
        for (Component component : state.projectComponents) {
          component.addMouseListener(component);
          component.addMouseMotionListener(component);
          drawPanel.add(component);

          for (Output output : component.outputs) {
            for (Input input : output.inputsReceivingThis) {
              Connection c = new Connection(currentConnectionID, output, input);
              lines.add(c);
            }
          }
        }
      }
    }

    class ProjectState implements Serializable {
      ArrayList<Component> projectComponents;
      ArrayList<Connection> projectLines;
      public ProjectState() {
        projectComponents = components;
        projectLines = lines;
      }
    }
} 
```

# hibernate - 使用 Maven 将 Spring MVC 与 Hibernate 集成

> ID：13674075
> 
> 赞同：1
> 
> 时间：2012-12-02T21:31:05.003
> 
> 标签：hibernate, maven, spring-mvc

我花了很多时间尝试集成 Hibernate 和 Spring MVC。但我一次又一次遇到问题，最后一个对我来说是最难的。

我创建了一个简单的[Maven 项目](http://dl.dropbox.com/u/29572172/hibernate-spring.zip)并添加到 @Configuration-class 新 bean：

```
@Bean
    public DataSource dataSource() {
        DriverManagerDataSource dataSource = new DriverManagerDataSource();

        dataSource.setDriverClassName(env.getRequiredProperty(PROPERTY_NAME_DATABASE_DRIVER));
        dataSource.setUrl(env.getRequiredProperty(PROPERTY_NAME_DATABASE_URL));
        dataSource.setUsername(env.getRequiredProperty(PROPERTY_NAME_DATABASE_USERNAME));
        dataSource.setPassword(env.getRequiredProperty(PROPERTY_NAME_DATABASE_PASSWORD));

        return dataSource();
    } 
```

构建项目后，我在控制台中播下奇怪的输出：

```
 at net.sf.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228)
    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:280)
    at com.mvc.app.init.BaseConfig$$EnhancerByCGLIB$$14f5e201.dataSource(<generated>)
    at com.mvc.app.init.BaseConfig.dataSource(BaseConfig.java:43)
    at com.mvc.app.init.BaseConfig$$EnhancerByCGLIB$$14f5e201.CGLIB$dataSource$1(<generated>)
    at com.mvc.app.init.BaseConfig$$EnhancerByCGLIB$$14f5e201$$FastClassByCGLIB$$49506a23.invoke(<generated>)
    at net.sf.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228)
    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:280)
    at com.mvc.app.init.BaseConfig$$EnhancerByCGLIB$$14f5e201.dataSource(<generated>)
    at com.mvc.app.init.BaseConfig.dataSource(BaseConfig.java:43)
    at com.mvc.app.init.BaseConfig$$EnhancerByCGLIB$$14f5e201.CGLIB$dataSource$1(<generated>)
... 
```

所有尝试使用涉及控制器的链接都会导致：

```
exception

javax.servlet.ServletException: Servlet.init() for servlet dispatcher threw exception
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    java.lang.Thread.run(Unknown Source)

root cause

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class com.mvc.app.init.BaseConfig: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public javax.sql.DataSource com.mvc.app.init.BaseConfig.dataSource()] threw exception; nested exception is java.lang.StackOverflowError
    ... 
```

请给我建议如何避免这个错误，因为我没有想法。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T21:36:15.320

你有无限递归：

```
public DataSource dataSource() {
    DriverManagerDataSource dataSource = new DriverManagerDataSource();
    //...
    return dataSource();
} 
```

将最后一行更改为：

```
return dataSource; 
```

您实际上可以通过查看错误日志来判断：

> 工厂方法 [public javax.sql.DataSource com.mvc.app.init.BaseConfig. **dataSource()** ] 抛出异常；嵌套异常是 java.lang。**堆栈溢出错误**

注意[`DriverManagerDataSource`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/jdbc/datasource/DriverManagerDataSource.html)不适合生产使用。

# javascript - 显示多个事件源的事件取决于 Fullcalendar 中复选框的选择

> ID：13674076
> 
> 赞同：0
> 
> 时间：2012-12-02T21:31:10.487
> 
> 标签：javascript, jquery, ajax, plone, fullcalendar

我正在添加 Solgema Fullcalendar 中的功能 - [http://plone.org/products/solgema.fullcalendar/releases/2.1.2](http://plone.org/products/solgema.fullcalendar/releases/2.1.2) （使用复选框选择和显示事件）

我的 eventSourses 看起来像：

```
eventSources: [
            ...
            {
                url: '/admin_schedule/get_schedule_db_recurring_events_on_daysweek/',//"<?echo $data_path?>",
                type: 'GET',
                data: {sch_teacher_id: sch_teacher_id},
                backgroundColor: 'red',
            }

        ], 
```

我想为教师“过滤”事件实现复选框，勾选复选框。一开始只做一个复选框（后来做foreach封面）

```
<div class="box">
        <?php
        $js = 'onClick="rerender_schedule()"';
        echo form_checkbox('teacher', 'vika', FALSE, $js)." Vika";  
        ?>
</div> 
```

**按照我的想法，通过这段代码，fullcalendar 必须调用 rerender_schedule() 函数，该函数使用vika 的 sch_teacher_id**过滤来自 eventSource的数据

 **如果有人可以帮助使用 rerender_schedule() 函数，我将不胜感激，因为 ajax 不好。

编辑：（感谢托卡拉汉！）。现在只是一个开始。

1.  我的 3 个复选框：

    ```
     $data = array(
            'name'        => 'teacher',
            'class'       => 'teacher',
            'id'          => 'teacher',
            'value'       => '128',
            'checked'     => FALSE,
            'style'       => 'margin:10px',
            );

        echo form_checkbox($data); echo "Вика";  

        $data = array(
            'name'        => 'teacher',
            'class'       => 'teacher',
            'id'          => 'teacher2',
            'value'       => '111',
            'checked'     => FALSE,
            'style'       => 'margin:10px',
            );

        echo form_checkbox($data); echo "Вася"; 

        $data = array(
            'name'        => 'teacher',
            'class'       => 'teacher',
            'id'          => 'teacher3',
            'value'       => '1',
            'checked'     => FALSE,
            'style'       => 'margin:10px',
            );

        echo form_checkbox($data); echo "Саша"; 
    ```

2.  ajax 改变它们：

    ```
    $('.teacher').change(function (event) {
            events1.data.sch_teacher_id = $(this).val(); 
            events2.data.sch_teacher_id = $(this).val();
            events3.data.sch_teacher_id = $(this).val();
            $calendar.fullCalendar('refetchEvents');
        }); 
    ```

3.  eventSourses 的变量：

    ```
    var events1 = {
        url: 'url1',
        type: 'GET',
        data: {sch_teacher_id: $('#teacher').val() },
        success: function (response) {
            return response;
        }
    };
    var events2 = {
        url: 'url2',
        type: 'GET',
        data: {sch_teacher_id: $('#teacher').val() },
        backgroundColor: 'green',
        success: function (response) {
            return response;
        }
    };
    var events3 = {
        url: 'url3',
        type: 'GET',
        data: { sch_teacher_id: $('#teacher').val() },
        backgroundColor: 'red',
        success: function (response) {
            return response;
        }
    }; 
    ```

4.  我的 eventSources 调用

    ```
    eventSources: [
        events1,
        events2,
        events3
    ], 
    ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T23:56:51.517

您需要[refetchEvents](http://arshaw.com/fullcalendar/docs/event_data/refetchEvents/)，但在调用之前要小心更新数据参数（否则它将保持最初设置的值）

```
$('.CheckBoxClass').change(function () {
    events.data.sch_teacher_id = $(this).val();
    $('#calendar').fullCalendar('refetchEvents');
}); 
```

编辑：声明事件对象的代码：

```
var events = {
    url: 'url',
    type: 'GET',
    data: { Id: $('#divId').val() },
    success: function (response) {
        return response;
    }
};

$('#calendar').fullCalendar({
    events: events
}); 
```**

# wordpress - 如何在 tinymce 编辑器中删除 Wordpress 图像标题的 10 像素添加宽度？

> ID：13674077
> 
> 赞同：2
> 
> 时间：2012-12-02T21:31:20.803
> 
> 标签：wordpress, tinymce, caption

我正在使用一段代码来有效地删除 Wordpress 添加到网站前端标题图像的 10 像素宽度。但是，它仍然在 tinymce 编辑器中添加 10px：

```
<dl id="attachment_69" class="wp-caption alignleft" style="width: 310px" data-mce-style="width: 310px;"> 
```

我怎样才能删除这个 10px？我尝试通过在几个地方将“10 +”更改为 0 来修改核心（我知道这是个坏主意），但我没有任何运气。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T17:04:06.860

这是我们正在使用的。把它放在你的主题的functions.php中。

```
// Override img caption shortcode to fix 10px issue.
add_filter('img_caption_shortcode', 'fix_img_caption_shortcode', 10, 3);

function fix_img_caption_shortcode($val, $attr, $content = null) {
    extract(shortcode_atts(array(
        'id'    => '',
        'align' => '',
        'width' => '',
        'caption' => ''
    ), $attr));

    if ( 1 > (int) $width || empty($caption) ) return $val;

    return '<div id="' . $id . '" class="wp-caption ' . esc_attr($align) . '" style="width: ' . (0 + (int) $width) . 'px">' . do_shortcode( $content ) . '<p class="wp-caption-text">' . $caption . '</p></div>';
} 
```

这完全消除了 10px 问题并消除了对变通方法的需要。

# sql - 为什么我不能在 sql server 表中插入小数？

> ID：13674080
> 
> 赞同：7
> 
> 时间：2012-12-02T21:31:44.243
> 
> 标签：sql, sql-server

我有一个简单的查询：

```
INSERT INTO tblIndicators (RunID, EventTS, MA1t3) 
Values (65, '11/2/2012 2:25:00 AM', 1.0); 
```

我收到此错误消息：

> *消息 8115，级别 16，状态 8，第 1
> 行将数字转换为数字数据类型的算术溢出错误。*

Decimal 数据类型的精度为`(8,8)`. 所以有什么问题？？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-02T21:39:42.310

`decimal (8, 8)`表示您的所有 8 位有效数字都在小数点的右侧。1.0 太大了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T21:40:43.073

试试十进制 (8,2)

(8,8) 不会在 . 的左侧留下任何数字。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-04-28T17:36:10.050

8,8 表示最多可以存储 0.99999999 如果您需要存储像 12345678.12345678 这样的数字，您应该声明：十进制 (16,8)

解释这个声明：十进制（ {TotalDigits} ， {DigitsToTheRight} ）

# jquery - 仅在选择选项卡时隐藏选项卡内容之外的 div 元素，并在切换选项卡时再次显示它

> ID：13674081
> 
> 赞同：0
> 
> 时间：2012-12-02T21:31:47.407
> 
> 标签：jquery, html, css, tabs

选择第三个选项卡（Guia de Tallas）时，我需要隐藏本网站上的“相关”DIV，并在切换其他选项卡时再次显示。这可能吗？

这是网站：[http ://tinyurl.com/d6jk4gf](http://tinyurl.com/d6jk4gf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:12:15.010

您可以使用 javascript.js 文件中的代码将其隐藏。将此添加到`$('div.htmltabs ul li a').click`函数的末尾：

```
if (thisClass == "tab3") 
   $(".related").hide();
else
   $(".related").show(); 
```

# ruby-on-rails - 将 rails 应用程序上传到 heroku 会跳过资产

> ID：13674085
> 
> 赞同：0
> 
> 时间：2012-12-02T21:31:52.210
> 
> 标签：ruby-on-rails, heroku, push, commit

我正在尝试将我的rails应用程序上传到我的heroku帐户**，就像我之前做过几次（成功）**

```
heroku login (email and pass)
    rake assets:precompile 
    bundle install --without production
    git add --all
    git commit -am "commit_desc2"
    git push heroku master 
```

我得到我的应用程序时没有包含在标题中的所有 css 和 js。我认为这是一个资产提交问题。除了使用引导程序稍微改变设计之外，我不记得做过任何不同的事情。

这是heroku的头

```
<link href="/assets/application-6dc3bf401e7f79f69a2a156bdeeb7a00.css" media="all" rel="stylesheet" type="text/css" />
  <script src="/assets/application-14e3dc5612ffc200db37e141e57c5af2.js" type="text/javascript"></script> 
```

这是本地主机上的头

```
 <link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/bootstrapStyle.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/bootstrap_and_overrides.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/ratings.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/scaffolds.css?body=1" media="all" rel="stylesheet" type="text/css" />
  <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-transition.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-alert.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-modal.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-dropdown.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-scrollspy.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-tab.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-tooltip.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-popover.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-button.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-collapse.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-carousel.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-typeahead.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-affix.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap.js?body=1" type="text/javascript"></script>
<script src="/assets/index.js?body=1" type="text/javascript"></script>
<script src="/assets/ratings.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T21:46:37.007

从**[Rails 指南](http://guides.rubyonrails.org/asset_pipeline.html#in-development)**：

> 在开发模式下，资产按照清单文件中指定的顺序作为单独的文件提供。

您实际上并没有问过问题，但要明确一点：**您的资​​产没有被跳过。**

您在 localhost 中看到的（列出的所有文件）都包含在生产中（在单个文件中）`application.css`。`application.js`

在`config/evironments/development.rb`你有

```
config.assets.debug = true 
```

这导致

```
<%= stylesheet_link_tag "application" %>
<%= javascript_include_tag "application" %> 
```

进行扩展，为每个 javascript 和样式表创建单独的脚本和链接标签，这些标签将`//=require`通过 Sprockets 和 Rails 资产管道包含在您的行中。

在生产中（在 heroku 上），上述调试配置选项设置为 false，提供样式表和 javascript 的单个连接/压缩版本。

我敢肯定，如果您检查您的 Javascript 控制台以查看 localhost 中列出的任何 Javascript 文件中可用的变量/方法，`<head>`您会发现它们存在。生产中的 application.css 文件的内容也是如此。

**推荐阅读： http:** [//guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

# css - 如何仅使用 CSS 旋转图像？

> ID：13674086
> 
> 赞同：32
> 
> 时间：2012-12-02T21:31:55.927
> 
> 标签：css, image, rotation

我想仅使用 CSS 将图像旋转 90 度。

我可以进行旋转，但是图像的位置不是它应该的位置。首先，它会在同一个`<div>`. 其次，它的垂直维度会变得比包含的更大`<div>`。

这是我定义两个类的代码：

```
.imagetest img {
  transform: rotate(270deg);
  -ms-transform: rotate(270deg);
  -moz-transform: rotate(270deg);
  -webkit-transform: rotate(270deg);
  -o-transform: rotate(270deg);
  width: 100%;
}

.photo {
  width: 95%;
  padding: 0 15px;
  margin: 0 0 10px 0;
  float: left;
  background: #828DAD;
}
```

```
<article>
  <section class="photo">
    <div>Title</div>
    <div class="imagetest">
      <img src="https://picsum.photos/200/100"/>
    </div>
  </section>
</article>
```

有没有办法将图像保留在该部分中？我可以翻译和缩放图像，使其位于该部分内，但这只有在我事先知道图像大小的情况下才有效。我想要一种不依赖于大小的可靠方法。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-11-05T00:42:45.533

问题看起来像图像不是方形的，浏览器会这样调整。旋转后，通过更改图像边距确保尺寸保持不变。

```
.imagetest img {
  transform: rotate(270deg);
  ...
  margin: 10px 0px;
} 
```

数量将取决于图像的高度 x 宽度的差异。您可能还需要添加`display:inline-block;`或`display:block`让它识别边距参数。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-02T21:34:20.407

给父母一个样式`overflow: hidden`。如果它是重叠的兄弟元素，则必须将其放在具有固定高度/宽度的容器内，并为其赋予`overflow: hidden`.

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-01-29T15:54:58.420

我知道这个话题很老，但没有正确的答案。

旋转变换从元素的中心旋转元素，因此，更宽的元素将以这种方式旋转：

[![在此处输入图像描述](../Images/6b15abe9916305b2e9ad41a8e862a7c3.png)](https://i.stack.imgur.com/ckIa3.png)

`overflow: hidden`如您在此处看到的，应用隐藏最长的尺寸：

[![在此处输入图像描述](../Images/722c7dd4c5caf7507fca9c8a551d9091.png)](https://i.stack.imgur.com/XICEs.png)

```
img{
  border: 1px solid #000;
  transform:          rotate(270deg);
  -ms-transform:      rotate(270deg);
  -moz-transform:     rotate(270deg);
  -webkit-transform:  rotate(270deg);
  -o-transform:       rotate(270deg);
}
.imagetest{
  overflow: hidden
}
```

```
<article>
<section class="photo">
<div></div>
<div class="imagetest">
<img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSqVNRUwpfOwZ5n4kvVXea2VHd6QZGACVVaBOl5aJ2EGSG-WAIF" width=100%/>
</div>
</section>
</article>
```

所以，我要做的是一些计算，在我的例子中，图片是 455px 宽和 111px 高，我们必须根据这些尺寸添加一些边距：

*   左边距：（宽 - 高）/2
*   上边距：（高 - 宽）/2

在 CSS 中：

```
margin: calc((455px - 111px)/2) calc((111px - 455px)/2); 
```

结果：

[![在此处输入图像描述](../Images/06666148113482744e28eaf8c4b89025.png)](https://i.stack.imgur.com/3KWrx.png)

```
img{
  border: 1px solid #000;
  transform:          rotate(270deg);
  -ms-transform:      rotate(270deg);
  -moz-transform:     rotate(270deg);
  -webkit-transform:  rotate(270deg);
  -o-transform:       rotate(270deg);
  /* 455 * 111 */
  margin: calc((455px - 111px)/2) calc((111px - 455px)/2);
}
```

```
<article>
<section class="photo">
<div></div>
<div class="imagetest">
<img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSqVNRUwpfOwZ5n4kvVXea2VHd6QZGACVVaBOl5aJ2EGSG-WAIF" />
</div>
</section>
</article>
```

我希望它可以帮助某人！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-15T07:13:41.363

`transform: rotate(xdeg)`使用并应用于父组件执行旋转`overflow: hidden`以避免重叠效果

```
.div-parent {
   overflow: hidden
}

.div-child {
   transform: rotate(270deg);
} 
```

# facebook - 使用 node.js 从 Heroku 启动 Javascript 应用程序时，无法在 Facebook 选项卡上发布错误

> ID：13674088
> 
> 赞同：2
> 
> 时间：2012-12-02T21:32:14.253
> 
> 标签：facebook, node.js, heroku

我正在使用 Heroku 启动 HTML5/Javascript 游戏以显示在 facebook 选项卡上。但是，在我的 facebook 标签上，我收到以下错误：“CANNOT POST/”。你可以在这里看到它的样子：[https ://www.facebook.com/MelviaGames/app_198159916987846](https://www.facebook.com/MelviaGames/app_198159916987846)

我的 server.js 看起来像这样：

```
var express = require('express'),
    server = express.createServer();

server.use('/cocos2d', express.static(__dirname + '/cocos2d') );
server.use('/cocosDenshion', express.static(__dirname + '/cocosDenshion') );
server.use('/classes', express.static(__dirname + '/classes') );
server.use('/resources', express.static(__dirname + '/resources') );

server.get('/', function(req,res){
    res.sendfile('index.html');
    console.log('Sent index.html');
});

server.get('/api/hello', function(req,res){
   res.send('Hello Cruel World');
});
app.post('/', function(request, response) {
  response.redirect('/');
});
server.listen(process.env.PORT || 3000); 
```

我的 heroku 日志如下所示：

```
2012-12-02T10:58:08+00:00 heroku[router]: at=info method=GET path=/cocos2d/platform/CCClass.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=2ms service=4ms status=304 bytes=0
2012-12-02T10:58:09+00:00 heroku[router]: at=info method=GET path=/favicon.ico host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=3ms status=404 bytes=34
2012-12-02T10:58:09+00:00 heroku[router]: at=info method=GET path=/cocos2d/platform/CCCommon.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=14ms status=304 bytes=0
2012-12-02T10:58:09+00:00 heroku[router]: at=info method=GET path=/cocos2d/platform/platform.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=4ms service=4ms status=304 bytes=0
2012-12-02T10:58:09+00:00 heroku[router]: at=info method=GET path=/cocos2d/cocoa/CCGeometry.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=2ms service=4ms status=304 bytes=0
2012-12-02T10:58:10+00:00 heroku[router]: at=info method=GET path=/cocos2d/platform/CCTypes.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=1ms connect=2ms service=5ms status=304 bytes=0
2012-12-02T10:58:10+00:00 heroku[router]: at=info method=GET path=/cocos2d/cocoa/CCAffineTransform.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=5ms status=304 bytes=0
2012-12-02T10:58:11+00:00 heroku[router]: at=info method=GET path=/cocos2d/support/CCPointExtension.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=4ms service=6ms status=304 bytes=0
2012-12-02T10:58:11+00:00 heroku[router]: at=info method=GET path=/cocos2d/base_nodes/CCNode.js ho
st=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=3ms service=4ms status=304 bytes=0
2012-12-02T10:58:11+00:00 heroku[router]: at=info method=GET path=/cocos2d/platform/CCMacro.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=2ms service=4ms status=304 bytes=0
2012-12-02T10:58:12+00:00 heroku[router]: at=info method=GET path=/cocos2d/platform/CCConfig.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=3ms status=304 bytes=0
2012-12-02T10:58:12+00:00 heroku[router]: at=info method=GET path=/cocos2d/textures/CCTexture2D.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=2ms service=5ms status=304 bytes=0
2012-12-02T10:58:13+00:00 heroku[router]: at=info method=GET path=/cocos2d/textures/CCTextureCache.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=4ms status=304 bytes=0
2012-12-02T10:58:13+00:00 heroku[router]: at=info method=GET path=/cocos2d/actions/CCAction.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=9ms status=304 bytes=0
2012-12-02T10:58:13+00:00 heroku[router]: at=info method=GET path=/cocos2d/actions/CCActionInterval.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms se
rvice=3ms status=304 bytes=0
2012-12-02T10:58:14+00:00 heroku[router]: at=info method=GET path=/cocos2d/actions/CCActionManager.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=2ms service=8ms status=304 bytes=0
2012-12-02T10:58:14+00:00 heroku[router]: at=info method=GET path=/cocos2d/actions/CCActionEase.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=4ms status=304 bytes=0
2012-12-02T10:58:15+00:00 heroku[router]: at=info method=GET path=/cocos2d/layers_scenes_transitions_nodes/CCLayer.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=25ms service=4ms status=304 bytes=0
2012-12-02T10:58:16+00:00 heroku[router]: at=info method=GET path=/cocos2d/layers_scenes_transitions_nodes/CCTransition.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=2ms service=5ms status=304 bytes=0
2012-12-02T10:58:16+00:00 heroku[router]: at=info method=GET path=/cocos2d/sprite_nodes/CCSprite.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=3ms status=304 bytes=0
2012-12-02T10:58:16+00:00 heroku[router]: at=info method=GET path=/cocos2d/label_nodes/CCLabelTTF.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=2ms service=4ms status=304 bytes=0
2012-12-02T10:58:17+00:00 heroku[router]: at=info method=GET path=/cocos2d/text_input_node/CCIMEDispatcher.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=2ms service=4ms status=304 bytes=0
2012-12-02T10:58:17+00:00 heroku[router]: at=info method=GET path=/cocos2d/touch_dispatcher/CCTouchDelegateProtocol.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=4ms status=304 bytes=0
2012-12-02T10:58:17+00:00 heroku[router]: at=info method=GET path=/cocos2d/touch_dispatcher/CCTouchHandler.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=3ms status=304 bytes=0
2012-12-02T10:58:18+00:00 heroku[router]: at=info method=GET path=/cocos2d/touch_dispatcher/CCTouchDispatcher.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=3ms status=304 bytes=0
2012-12-02T10:58:18+00:00 heroku[router]: at=info method=GET path=/cocos2d/keypad_dispatcher/CCKeypadDispatcher.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=4ms status=304 bytes=0
2012-12-02T10:58:19+00:00 heroku[router]: at=info method=GET path=/cocos2d/CCDirector.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=3ms status=304 bytes=0
2012-12-02T10:58:19+00:00 heroku[router]: at=info method=GET path=/cocos2d/CCScheduler.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=4ms status=304 bytes=0
2012-12-02T10:58:20+00:00 heroku[router]: at=info method=GET path=/cocos2d/CCLoader.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=5ms status=304 bytes=0
2012-12-02T10:58:20+00:00 heroku[router]: at=info method=GET path=/cocos2d/platfor
m/CCApplication.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=6ms status=200 bytes=10927
2012-12-02T10:58:21+00:00 heroku[router]: at=info method=GET path=/cocos2d/platform/CCSAXParser.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=23ms status=200 bytes=7618
2012-12-02T10:58:24+00:00 heroku[router]: at=info method=GET path=/cocos2d/menu_nodes/CCMenu.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=39ms status=200 bytes=16592
2012-12-02T10:58:25+00:00 heroku[router]: at=info method=GET path=/cocosDenshion/SimpleAudioEngine.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=30ms status=200 bytes=15643
2012-12-02T10:58:26+00:00 heroku[router]: at=info method=GET path=/classes/AppDelegate.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=2ms service=11ms status=200 bytes=3058
2012-12-02T10:58:27+00:00 heroku[router]: at=info method=GET path=/api/hello host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=5ms status=200 bytes=17
2012-12-02T10:58:27+00:00 heroku[router]: at=info method=GET path=/resources/background.mp3 host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=53ms status=206 bytes=128313
2012-12-02T10:58:27+00:00 heroku[router]: at=info method=GET path=/resources/effect2.mp3 host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=7ms status=206 bytes=13407
2012-12-02T11:01:54+00:00 heroku[router]: at=info method=POST path=/ host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=3ms status=404 bytes=23
2012-12-02T11:09:28+00:00 app[web.1]: Sent index.html
2012-12-02T11:09:28+00:00 heroku[router]: at=info method=GET path=/ host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=4ms status=304 bytes=0
2012-12-02T11:09:28+00:00 heroku[router]: at=info method=GET path=/classes/cocos2d.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=2ms service=5ms status=304 bytes=0
2012-12-02T11:09:29+00:00 heroku[router]: at=info method=GET path=/cocos2d/platform/CCClass.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=9ms status=304 bytes=0
2012-12-02T11:09:29+00:00 heroku[router]: at=info method=GET path=/cocos2d/platform/CCCommon.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=3ms status=304 bytes=0
2012-12-02T11:09:29+00:00 heroku[router]: at=info method=GET path=/favicon.ico host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=5ms status=404 bytes=34
2012-12-02T11:09:29+00:00 heroku[router]: at=info method=GET path=/cocos2d/platform/platform.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=5ms status=304 bytes=0
2012-12-02T11:09:30+00:00 app[web.1]: Sent index.html
2012-12-02T11:09:31+00:00 heroku[router]: at=info method=GET path=/cocos2d/platform/CCCommon.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=4ms status=304 bytes=0
2012-12-02T11:09:31+00:00 heroku[router]: at=info method=GET path=/favicon.ico host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=3ms service=4ms status=404 bytes=34
2012-12-02T11:09:31+00:00 heroku[router]: at=info method=GET path=/cocos2d/platform/platform.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=3ms status=304 bytes=0
2012-12-02T11:09:32+00:00 heroku[router]: at=info method=GET path=/cocos2d/cocoa/CCSet.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=3ms status=304 bytes=0
2012-12-02T11:09:32+00:00 app[web.1]: Sent index.html
2012-12-02T11:09:32+00:00 heroku[router]: at=info method=GET path=/ host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=6ms status=304 bytes=0
2012-12-02T11:09:33+00:00 heroku[router]: at=info method=GET path=/cocos2d/platform/CCClass.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=3ms status=304 bytes=0
2012-12-02T11:09:33+00:00 heroku[router]: at=info method=GET path=/favicon.ico host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=3ms status=404 bytes=34
2012-12-02T11:09:33+00:00 heroku[router]: at=info method=GET path=/cocos2d/platform/CCCommon.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=5ms status=304 bytes=0
2012-12-02T11:09:33+00:00 heroku[router]: at=info method=GET path=/cocos2d/platform/platform.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=4ms status=304 bytes=0
2012-12-02T11:09:34+00:00 heroku[router]: at=info method=GET path=/cocos2d/cocoa/CCGeometry.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=4ms status=304 bytes=0
2012-12-02T11:09:34+00:00 heroku[router]: at=info method=GET path=/cocos2d/cocoa/CCSet.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=3ms service=5ms status=200 bytes=3699
2012-12-02T11:09:35+00:00 heroku[router]: at=info method=GET path=/cocos2d/platform/CCTypes.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=5ms status=304 bytes=0
2012-12-02T11:09:35+00:00 heroku[router]: at=info method=GET path=/cocos2d/cocoa/CCAffineTransform.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=3ms status=304 bytes=0
2012-12-02T11:09:35+00:00 heroku[router]: at=info method=GET path=/cocos2d/support/CCPointExtension.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=5ms status=304 bytes=0
2012-12-02T11:09:36+00:00 heroku[router]: at=info method=GET path=/cocos2d/base_nodes/CCNode.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=3ms status=304 bytes=0
2012-12-02T11:09:36+00:00 heroku[router]: at=info method=GET path=/cocos2d/platform/CCMacro.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=4ms status=304 bytes=0
2012-12-02T11:09:37+00:00 heroku[router]: at=info method=GET path=/cocos2d/platform/CCConfig.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=14ms service=4ms status=304 bytes=0
2012-12-02T11:09:37+00:00 heroku[router]: at=info method=GET path=/cocos2d/textures/CCTexture2D.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=5ms status=304 bytes=0
2012-12-02T11:09:37+00:00 heroku[router]: at=info method=GET path=/cocos2d/textures/CCTextureCache.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=2ms service=3ms status=304 bytes=0
2012-12-02T11:09:38+00:00 heroku[router]: at=info method=GET path=/cocos2d/actions/CCAction.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=2ms service=9ms status=304 bytes=0
2012-12-02T11:09:38+00:00 heroku[router]: at=info method=GET path=/cocos2d/actions/CCActionInterval.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=5ms status=304 bytes=0
2012-12-02T11:09:39+00:00 heroku[router]: at=info method=GET path=/cocos2d/layers_scenes_transitions_nodes/CCScene.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=4ms status=304 bytes=0
2012-12-02T11:09:40+00:00 heroku[router]: at=info method=GET path=/cocos2d/layers_scenes_transitions_nodes/CCLayer.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=2ms service=4ms status=304 bytes=0
2012-12-02T11:09:40+00:00 heroku[router]: at=info method=GET path=/cocos2d/layers_scenes_transitions_nodes/CCTransition.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=5ms status=304 bytes=0
2012-12-02T11:09:40+00:00 heroku[router]: at=info method=GET path=/cocos2d/sprite_nodes/CCSprite.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=4ms status=304 bytes=0
2012-12-02T11:09:41+00:00 heroku[router]: at=info method=GET path=/cocos2d/label_nodes/CCLabelTTF.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=8ms status=304 bytes=0
2012-12-02T11:09:41+00:00 heroku[router]: at=info method=GET path=/cocos2d/text_input_node/CCIMEDispatcher.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=3ms service=9ms status=304 bytes=0
2012-12-02T11:09:42+00:00 heroku[router]: at=info method=GET path=/cocos2d/touch_dispatcher/CCTouchHandler.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=2ms service=4ms status=304 bytes=0
2012-12-02T11:09:43+00:00 heroku[router]: at=info method=GET path=/cocos2d/keypad_dispatcher/CCKeypadDispatcher.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=6ms status=304 bytes=0
2012-12-02T11:09:44+00:00 heroku[router]: at=info method=GET path=/cocos2d/CCDirector.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=76ms status=304 bytes=0
2012-12-02T11:09:44+00:00 heroku[router]: at=info method=GET path=/cocos2d/CCScheduler.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=4ms service=65ms status=304 bytes=0
2012-12-02T11:09:45+00:00 heroku[router]: at=info method=GET path=/cocos2d/CCLoader.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=5ms status=304 bytes=0
2012-12-02T11:09:45+00:00 heroku[router]: at=info method=GET path=/cocos2d/CCDrawingPrimitives.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=4ms status=304 bytes=0
2012-12-02T11:09:45+00:00 heroku[router]: at=info method=GET path=/cocos2d/platform/CCApplication.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=4ms status=304 bytes=0
2012-12-02T11:09:46+00:00 heroku[router]: at=info method=GET path=/cocos2d/platform/CCSAXParser.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=6ms service=4ms status=304 bytes=0
2012-12-02T11:09:46+00:00 heroku[router]: at=info method=GET path=/cocos2d/platform/AppControl.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=5ms status=304 bytes=0
2012-12-02T11:09:47+00:00 heroku[router]: at=info method=GET path=/cocos2d/menu_nodes/CCMenuItem.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=5ms status=304 bytes=0
2012-12-02T11:09:47+00:00 heroku[router]: at=info method=GET path=/cocos2d/menu_nodes/CCMenu.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=4ms status=304 bytes=0
2012-12-02T11:09:47+00:00 heroku[router]: at=info method=GET path=/cocosDenshion/SimpleAudioEngine.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=6ms status=304 bytes=0
2012-12-02T11:09:48+00:00 heroku[router]: at=info method=GET path=/classes/AppDelegate.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=4ms status=304 bytes=0
2012-12-02T11:09:48+00:00 heroku[router]: at=info method=GET path=/classes/MyFourthApp.js host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=5ms status=304 bytes=0
2012-12-02T11:09:48+00:00 heroku[router]: at=info method=GET path=/resources/background.mp3 host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=6ms service=4ms status=304 bytes=0
2012-12-02T11:09:49+00:00 heroku[router]: at=info method=GET path=/resources/effect2.mp3 host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=1ms connect=1ms service=7ms status=304 bytes=0
2012-12-02T11:09:48+00:00 heroku[router]: at=info method=GET path=/api/hello host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=3ms status=200 bytes=17
2012-12-02T11:10:12+00:00 heroku[router]: at=info method=GET path=/favicon.ico host=stark-stream-2821.herokuapp.com fwd=115.64.155.218 dyno=web.1 queue=0 wait=0ms connect=1ms service=11ms status=404 bytes=34
2012-12-02T11:18:32+00:00 heroku[web.1]: Cycling
2012-12-02T11:18:35+00:00 heroku[web.1]: Stopping all processes with SIGTERM
2012-12-02T11:18:37+00:00 heroku[web.1]: Process exited with status 1
2012-12-02T11:18:37+00:00 heroku[web.1]: State changed from up to down
2012-12-02T11:18:37+00:00 heroku[web.1]: State changed from down to starting
2012-12-02T11:18:38+00:00 heroku[web.1]: Starting process with command `node server.js`
2012-12-02T11:18:39+00:00 heroku[web.1]: State changed from starting to up
2012-12-02T12:01:34+00:00 heroku[router]: at=info method=POST path=/ host=stark-stream-2821.herokuapp.com fwd=123.243.50.82 dyno=web.1 queue=0 wait=0ms connect=34ms service=7ms status=404 bytes=23
2012-12-02T21:14:54+00:00 heroku[router]: at=info method=POST path=/ host=stark-stream-2821.herokuapp.com fwd=123.243.50.82 dyno=web.1 queue=0 wait=0ms connect=2ms service=6ms status=404 bytes=23 
```

有没有人有同样的问题或知道如何解决它？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-15T22:59:55.237

如果您在 Node 中使用 express，则 express.createservver 已被弃用，因此您应该使用它。在 app.js 或 server.js 中添加 post call 可以解决该问题。

```
var express = require('express');

var http = require('http');

var app = express();

app.set('port', process.env.PORT || 80);

//DEFINE ALL ROUTES
app.get('/', routes.dashboard.index);
app.post('/*', function(request, response) {
  response.redirect('/');
});

//SETUP HTTP LISTENER

server = http.createServer(app); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T03:24:01.630

自己找到了答案，在 server.js 的底部添加以下行

```
server.post('/*', function(req, res){

  res.sendfile('index.html');
}); 
```

# javascript - 如何获取或记录具有当前焦点的元素的 ID，以便以后使用 javascript 检索

> ID：13674095
> 
> 赞同：-3
> 
> 时间：2012-12-02T21:32:51.950
> 
> 标签：javascript, html, dom

我想要的是保存 html 值，然后在单击名为 previous 的按钮时使用上一个函数显示它。
但是我忘记考虑的是它`document.getElementById('id')`不返回值，它返回类似**[object HTMLElement]**的东西。

我如何获得 id 的值？

```
var namevalue1 = document.getElementById('name');
var imagetitlevalue1 = document.getElementById('imagetitle');
var locationvalue1=document.getElementById('location') ;
var similaritiesvalue1 = document.getElementById('similarities');
var typevalue1 = document.getElementById('type');
var costvalue1 = document.getElementById('cost');
var datevalue1 = document.getElementById('date');
var pictureidvalue1 = document.getElementById('pictureid');

function previous()
{
    document.getElementById('name').innerHTML = namevalue1;
    document.getElementById('location').innerHTML = locationvalue1;
    document.getElementById('similarities').innerHTML = similaritiesvalue1;
    document.getElementById('type').innerHTML = typevalue1;
    document.getElementById('cost').innerHTML = costvalue1;
    document.getElementById('date').innerHTML = datevalue1;
    document.getElementById('pictureid').src = pictureidvalue1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:36:29.627

这取决于元素的类型，如果您想要元素内 HTML 的文本表示，请使用`innerHTML`

```
 document.getElementById("id").innerHTML 
```

如果您只想要元素及其后代中的文本，请使用`textContent`

```
 document.getElementById("id").textContent 
```

最后，如果您正在使用 <input> 元素，您可以使用`value`

```
 document.getElementById("id").value 
```

# apache - ApacheDS - 无法验证非明文密码的质量

> ID：13674099
> 
> 赞同：2
> 
> 时间：2012-12-02T21:33:26.537
> 
> 标签：apache, ldap, md5, apacheds

`cannot verify the quality of the non-cleartext passwords`尝试将条目添加到我的组织单元时出现错误。我在存储密码时使用**MD5哈希方法。**（带`userPassword`属性）

[一篇博客文章](http://thuberv7.blogspot.com/2012/10/apacheds-default-passwordpolicies.html)说解决方案是添加`ads-pwdcheckquality`值为 0 的属性；但这对我不起作用。并且在尝试添加此属性时；它给出了这样的警告：

![在此处输入图像描述](../Images/a0f4aa87228c9272ec63688a5cd83226.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T19:03:00.587

您不需要添加新属性，您需要编辑服务器配置并重新启动：

1-打开服务器文件夹中的config.ldif，搜索字符串：

`ads-pwdcheckquality: 2`

并将其更改为：

`ads-pwdcheckquality: 0`

2-之后，重新启动服务器并重试。该解决方案对我有用。

# emacs - 从 elisp 正确调用交互式脚本

> ID：13674100
> 
> 赞同：3
> 
> 时间：2012-12-02T21:33:28.290
> 
> 标签：emacs, elisp

我有一个想从 elisp 调用的外部命令行程序。使用 shell-command 这很容易，但是当命令行程序是交互式的时它不能正常工作，在我的特定情况下是：当我这样调用它时，调用的脚本在读取 stdin 时会看到 EOF：

```
 ;; upload command is a string with the name of
  ;; a python script and some args
  (shell-command upload-command
                 (get-buffer-create "*upload output*"))))) 
```

upload-command 标识的 python 脚本可能会询问一些是/否问题，并且可能会提示输入密码，我希望输入密码。理想情况下，所有这些交互都将发生在 minibuffer 中。

当通过 elisp 调用时，如何安排事情以便我的外部交互命令通过 minibuffer 与用户交互？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T22:22:16.453

最简单的方法是使用`make-comint`or `make-comint-in-buffer`：

```
(make-comint-in-buffer "upload-script-process" "*upload output*" upload-command) 
```

这将像缓冲区一样在缓冲区中运行脚本`shell`，因此它不能满足所有交互都发生在迷你缓冲区中的要求。但是，如果密码提示匹配，它将自动从 minibuffer 中读取掩码形式的*密码*`comint-password-prompt-regexp`。

请注意，`upload-command`在此示例中，此处需要是`exec-path`. 脚本的任何额外开关或其他参数都必须作为字符串参数传递给`make-comint`：

```
(make-comint-in-buffer "upload-script-process" "*upload output*" 
   upload-command nil "--verbose" "--other-option") 
```

有关更多详细信息，请参阅 Emacs 文档。

# android - 蓝牙广播

> ID：13674102
> 
> 赞同：23
> 
> 时间：2012-12-02T21:33:42.773
> 
> 标签：android, bluetooth, broadcast

我想使用蓝牙将数据从一台设备广播到附近的众多设备。现在，我知道蓝牙广播存在，但可以使用 Android 现有的 API 吗？如果没有，是否还有其他可用的 3rd 方 API 可以做到这一点？

关于蓝牙广播的另一个问题：即使广播开始后您没有在收听，您是否可以开始收听正在进行的广播并从中接收数据？例如，让设备 A 成为广播者，他在 5 秒内广播以下数据：

```
1 2 3 4 5 6 7 8 9 10 
```

设备 B 在整个广播过程中都收到了数据，所以他收到了：

```
1 2 3 4 5 6 7 8 9 10 
```

接收到的设备 C 仅在 2 秒后才开始收听，而设备 A 正在广播`5`。`5 6 7 8 9 10`他会按预期收到其余的 ( ) 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T20:00:19.283

由于在蓝牙广播期间没有确认数据包，因此在广播中稍后出现的从节点（接收器）和从一开始就在那里但没有收到任何数据包的从节点之间的主节点（发送者）没有区别.

所以，是的，如果蓝牙链接的所有一般条件都得到满足，设备 C 将接收来自 5 及以上的新数据包。

# sql - MVCC 数据库是否在事务中看到插入的行？

> ID：13674104
> 
> 赞同：3
> 
> 时间：2012-12-02T21:33:51.800
> 
> 标签：sql, mvcc

[MVCC](http://en.wikipedia.org/wiki/Multiversion_concurrency_control)数据库隔离模式是否允许正在进行的事务查看其他事务插入（和提交）的行？

例如，给定：

*   桌子`names[id BIGINT NOT NULL, name VARCHAR(30), PRIMARY KEY(id), UNIQUE(name)]`
*   交易 T1 和 T2，

```
T1: open transaction
T2: open transaction
T1: select * from names;
    insert into names(name) values("John");
    // do something
    commit;
T2: select * from names;
    insert into names values("John");
    // do something
    commit; 
```

T2 什么时候第一次意识到新的行？到`select`时候？到`insert`时候？还是`commit`当时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T23:52:32.507

不，它显示了数据库的快照。不会出现新行（幻读）。无论发生什么，快照都保持不变。

这通常通过使用时间戳标记插入的行来实现，并在读取时静默丢弃比事务开始时插入的行。

在您的示例中，T2 永远不会意识到新行，因为在提交后旧事务完成。只有新事务会看到插入的行（在本例中为“T3”）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T00:33:03.960

答案实际上取决于服务器实现以及唯一约束是否标记为可延迟。

我还没有为其他数据库测试过它，但是在 PostgreSQL（作为最杰出的开源 MVCC 数据库之一）中，在我的测试中复制你的设置 T2 失败了`INSERT`。但是，T2 无法看到 T1 通过使用 所做的任何更改`SELECT`。

我在 2 个单独的 SQL 连接中几乎同时执行了以下语句：

```
BEGIN;
SELECT * FROM names;
SELECT pg_sleep(10);
INSERT INTO names values('john');
SELECT pg_sleep(10);
COMMIT; 
```

一个成功，但另一个在 10 秒后失败：

```
ERROR:  duplicate key value violates unique constraint "names_pkey"
DETAIL:  Key (name)=(john) already exists. 
```

这是有道理的，因为[文档](http://www.postgresql.org/docs/9.1/static/index-unique-checks.html)说：

> 如果一个尚未提交的事务插入了冲突的行，那么潜在的插入者必须等待以查看该事务是否提交。如果它回滚，则没有冲突。如果它在没有再次删除冲突行的情况下提交，则存在唯一性违规。

但是，如果唯一性约束被标记为可延迟，则将在 COMMIT 时检查唯一性：

> 如果唯一性约束是可延迟的，则存在额外的复杂性：我们需要能够为新行插入索引条目，但将任何违反唯一性的错误推迟到语句结束甚至更晚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-09T22:00:02.667

这取决于事务隔离级别；SQL 标准实际上为 MVCC 数据库指定了 4 个级别。它们是（按严格程度递增的顺序）：

*   **阅读未提交**- 本质上，根本没有隔离。这不是一个值得关注的有趣案例，但在这种情况下，T2 显然会在 SELECT 时间看到新行。
*   **读取已提交**- 无法读取未提交的更新。这是 Postgres 的默认设置。在这种情况下，T2 将在 SELECT 时间看到新行，因为 T1 已经提交。
*   **可重复读取**- 所有读取将永远不会看到其他并发更新[1]，即使已提交。这是 Mysql+InnoDB 默认的。在这种情况下，T2 应该在 COMMIT 时间失败（带有序列化错误），尽管引擎可以提前知道 INSERT 不能成功并在 INSERT 时间提前失败，这取决于唯一性约束是否推迟到提交时间。
*   **可序列化**- 类似于可重复读取，但事务必须在逻辑上表现得好像它们一个接一个地执行。在这种情况下，与可重复读取的行为相同。

这里有趣的观察是，在 Postgres 的默认事务隔离级别下，T2在提交后*可以看到 T1 的更改。*这对大多数人来说可能是违反直觉的。

（请注意，mvp 的复制似乎在 INSERT 时间失败，即使我说读取提交应该在 COMMIT 时间失败；这是因为他在 T1 的 COMMIT 语句之前交错了 T2 的 SELECT 语句，这不是问题中提出的交错。）

[1] 从技术上讲，该标准允许在此隔离级别进行幻读，其中可以看到最近提交的插入，但我所知道的没有 MVCC 实现实际上允许这样做。

# wordpress - 简码中的 wp_enqueue_script

> ID：13674105
> 
> 赞同：-1
> 
> 时间：2012-12-02T21:33:53.577
> 
> 标签：wordpress, shortcode

嗨，所以我使用了[http://scribu.net/wordpress/optimal-script-loading.html](http://scribu.net/wordpress/optimal-script-loading.html)的一个很棒的教程，当这里使用一个名为 lightbox 的简码时，我无法加载脚本是我的代码。当它被调用时，我在页面上想与某人检查它是否正确编写。

```
add_shortcode('lightbox', 'lightbox_handler');
function lightbox_handler($atts) {
 $base = get_stylesheet_directory_uri();
    wp_enqueue_script('jquery-mousewheel', $base . '/js/jquery.mousewheel-3.0.6.pack.js', array('jquery'), null, true);
    wp_enqueue_script('jquery-fancybox', $base . '/js/jquery.fancybox.pack.js', array('jquery'), '1.0', true);
    wp_enqueue_script('jquery-fancybox-buttons', $base . '/js/jquery.fancybox-buttons.js', array('jquery-fancybox'), '1.0', true);
    wp_enqueue_script('jquery-fancybox-media', $base . '/js/jquery.fancybox-media.js', array('jquery-fancybox'), '1.0', true);
    wp_enqueue_script('jquery-fancybox-thumbs', $base . '/js/jquery.fancybox-thumbs.js', array('jquery-fancybox'), '1.0', true);

    wp_enqueue_style('jquery-fancybox', $base . '/css/jquery.fancybox.css', false, '1.0', true);
    wp_enqueue_style('jquery-fancybox-buttons', $base . '/css/jquery.fancybox-buttons.css', array('jquery-fancybox'), '1.0', true);
    wp_enqueue_style('jquery-fancybox-thumbs', $base . '/css/jquery.fancybox-thumbs.css', array('jquery-fancybox'), '1.0', true);
}
function lightbox( $atts, $content = null )  {

$defaults = apply_filters( 'toggle_shortcode_args',
    array(
    'title' => '',
    'id' => '',
    'type' => '',
    'rel' => '',
    'url' => '',
    )
);

extract( shortcode_atts( $defaults, $atts ) );

        $html .= '<a class="'.$id.'" rel="'.$rel.'" data-fancybox-group="gallery" href="'.$url.'" title="'.$title.'"><img src="'.$url.'" alt="" />';
        $html .= '</a>';

    return $html;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T22:16:28.677

第一点：该教程基于旧版本的 WordPress；不要跟随那个。现在：

[您在wp_register_script()](http://codex.wordpress.org/Function_Reference/wp_register_script)中指定的句柄必须是唯一的。您正在为所有脚本重用相同的句柄（fancybox）；这行不通。给每一个不同的句柄，例如“jquery-mousewheel”、“jquery-fancybox”、“jquery-fancybox-buttons”等。尝试坚持 WordPress 使用的既定命名习惯，请参阅[wp_enqueue_script() 默认脚本](http://codex.wordpress.org/Function_Reference/wp_enqueue_script#Default_scripts_included_with_WordPress)示例。

如果您希望脚本在页脚中输出，只需在 wp_register_script() （您有）中这样说；无需使用 wp_footer 操作。无论如何，样式都应该在页眉中输出，而不是在页脚中。

您可以告诉 WordPress 注册脚本和样式表并将其排入队列以输出，每个调用一次：[wp_enqueue_script()](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)和[wp_enqueue_style()](http://codex.wordpress.org/Function_Reference/wp_enqueue_style)。在您的简单情况下，无需注册，然后入队。

注册和入队脚本的最佳操作挂钩是“ [wp_enqueue_scripts](http://codex.wordpress.org/Plugin_API/Action_Reference/wp_enqueue_scripts) ”。除特殊情况外，尽量只使用那个。

加分项：在脚本名称已经包含版本号的情况下，您可以通过将 null 作为版本字符串传递来抑制 WordPress 附加的额外 '?ver=nnn'。

最后，[get_stylesheet_directory_uri()](http://codex.wordpress.org/Function_Reference/get_stylesheet_directory_uri)不接受任何参数。

注意：这会让你的脚本工作。您的链接教程所做的不同之处在于仅有条件地输出您的脚本，但是在 wp_enqueue_scripts() 手册页的底部链接了关于该主题的更好的教程。首先，让您的网站正常运行！

```
class fancy{
    static function init() {
        add_shortcode('lightbox', array(__CLASS__, 'handle_shortcode'));

        add_action('wp_enqueue_scripts', array(__CLASS__, 'wp_enqueue_scripts'));
    }

    static function handle_shortcode($atts) {
        self::$add_script = true;

        // actual shortcode handling here
    }

    static function wp_enqueue_scripts() {
        $base = get_stylesheet_directory_uri();
        wp_enqueue_script('jquery-mousewheel', $base . '/js/jquery.mousewheel-3.0.6.pack.js', array('jquery'), null, true);
        wp_enqueue_script('jquery-fancybox', $base . '/js/jquery.fancybox.pack.js', array('jquery'), '1.0', true);
        wp_enqueue_script('jquery-fancybox-buttons', $base . '/js/jquery.fancybox-buttons.js', array('jquery-fancybox'), '1.0', true);
        wp_enqueue_script('jquery-fancybox-media', $base . '/js/jquery.fancybox-media.js', array('jquery-fancybox'), '1.0', true);
        wp_enqueue_script('jquery-fancybox-thumbs', $base . '/js/jquery.fancybox-thumbs.js', array('jquery-fancybox'), '1.0', true);

        wp_enqueue_style('jquery-fancybox', $base . '/css/jquery.fancybox.css', false, '1.0', true);
        wp_enqueue_style('jquery-fancybox-buttons', $base . '/css/jquery.fancybox-buttons.css', array('jquery-fancybox'), '1.0', true);
        wp_enqueue_style('jquery-fancybox-thumbs', $base . '/css/jquery.fancybox-thumbs.css', array('jquery-fancybox'), '1.0', true);
    }
}

fancy::init(); 
```

PS：我怀疑 jquery.fancybox.pack.js 是 jquery.fancybox.js 的打包（即缩小）版本，所以如果是，则将其用作“jquery-fancybox”；你不需要两者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T22:06:39.830

`wp_register_script`每个脚本的第一个参数必须是唯一的（请参阅[codex](http://codex.wordpress.org/Function_Reference/wp_register_script)），因此您可能需要“fancybox.mousewheel”、“fancybox”、“fancybox.buttons”等名称来区分。我会检查，但我怀疑你只需要 fancybox.js 和 fancybox.pack.js 之一 - 我认为包文件是 fancybox.js 的缩小版本

但是您使用的是哪个版本的 WordPress？您提到的教程顶部的链接显示了在 WordPress 3.3+ 中执行此操作的一种更简洁的方法，无需类。

# java - 如何检查字符串是否包含数值

> ID：13674108
> 
> 赞同：2
> 
> 时间：2012-12-02T21:34:19.437
> 
> 标签：java, char

您好，基本上我尝试使用此代码

```
 for(int character=0; character<roomNo.length(); character++){
        if((Character.isDigit(roomNo.charAt(character)))) {
        }
    }
    return true; 
```

遍历一个字符串并查看它是否包含任何数字。我正在尝试创建一个方法来检查字符串是否为数字，如果是，则该方法应返回 true。到现在还不行？任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-02T21:36:18.020

您可以使用正则表达式检查：

```
roomNo.matches("\\d+"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T21:36:33.230

为什么不直接做`roomNo.matches("\\d+")`？

`\d`匹配任何数字，因此，`\d+`匹配任何只有数字的字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T21:40:44.507

由于它是一个房间号，我假设您正在寻找一个整数，所以我推荐 Integer.parseInt()。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T21:44:57.043

这种验证的显式循环的通常形式是：

```
for each character in the string
  if not acceptable
    return false
return true 
```

至少有两种替代方法可以避免显式循环，即正则表达式（已经建议）和尝试在 try-catch 中转换为适当的类型。

例如，如果您想要一个整数，请调用 Integer.parseInt 并捕获 NumberFormatException。如果发生异常，则返回 false。如果不是，则返回 true。转换策略对于更复杂的格式特别有用，例如双精度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T21:37:56.287

你可以这样

```
String numbers = "0123456789"
if(numbers.indexOf(roomNo.charAt(character)) >= 0)
... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-02T21:38:07.757

试试这个：

```
 for(int character=0; character<roomNo.length(); character++){
    if(!Character.isDigit(roomNo.charAt(character))) {
         return false;
    }
}
return true; 
```

或者正如其他人所说，使用正则表达式

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-02T22:00:58.320

我建议使用 Apache Commons 的 NumberUtils

[Apache Commons isNumber(String)](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/math/NumberUtils.html#isNumber%28java.lang.String%29)

[Apache Commons isDigits（字符串）](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/math/NumberUtils.html#isDigits%28java.lang.String%29)

个人偏好是使用经过验证的实现，而不是我自己的。

# php - MySQL：INDEX、UNIQUE、FOREIGN KEY 和 PRIMARY KEY 有什么区别？

> ID：13674109
> 
> 赞同：15
> 
> 时间：2012-12-02T21:34:22.167
> 
> 标签：php, mysql, sql, codeigniter

好的，所以我是 SQL 的新手。

我正在设置我的表，我对索引、键、外键感到困惑..

我有一个用户表和一个项目表。

我想使用用户（id）将项目附加到用户。

这是我到目前为止所拥有的：

```
DROP TABLE IF EXISTS projects;

CREATE TABLE projects (
    id int(8) unsigned NOT NULL,
    user_id int(8),
    name varchar(120) NOT NULL,
    description varchar(300),
    created_at date,
    updated_at date,
    PRIMARY KEY (id),
    KEY users_id (user_id)
) ENGINE=InnoDB;

ALTER TABLE projects (
    ADD CONSTRAINT user_projects,
    FOREIGN KEY (user_id) REFERENCES users(id),
    ON DELETE CASCADE
) 
```

那么我迷失的是**key**、**index**、**constraint**和**foreign key**之间的**区别是什么？**

 ******我一直在网上寻找，找不到新手的解释。

PS。我正在使用 phpactiverecord 并在模型中设置了关系

用户-> has_many('projects');

项目-> belongs_to('user');

不知道这是否与它有关，但我想我会把它扔在那里..

谢谢。

编辑：

我认为这可能与 Navicat 有关，所以我进入 WampServer -> phpMyAdmin 并运行了这个......

```
DROP TABLE IF EXISTS projects;

CREATE TABLE projects (
    id int(8) unsigned NOT NULL,
    user_id int(8) NOT NULL,
    name varchar(120) NOT NULL,
    description varchar(300),
    created_at date,
    updated_at date,
    PRIMARY KEY (id),
    KEY users_id (user_id),
    FOREIGN KEY (user_id) REFERENCES users(id)
) ENGINE=InnoDB; 
```

依然没有... ：（

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-02T21:53:56.080

扩展 Shamil 的答案：

**INDEX**类似于书后的索引。它提供了对该列中数据的简化查找，以便更快地对其进行搜索。有趣的细节：MyISAM 使用**哈希表**来存储索引，它为数据提供键，但深度与表大小仍然成线性比例。InnoDB对其索引使用**B 树结构。**B 树类似于嵌套集——它将数据分解为逻辑子组，这意味着搜索深度要小得多。因此，在 InnoDB 中按范围查找更快，而在 MyISAM 中查找单个键更快（尝试记住哈希表和二叉树的大 O）。

**UNIQUE INDEX**是一种索引，其中数据库中的每一行都必须具有该列或列组的唯一值。这对于防止重复很有用，例如对于用户表中的电子邮件列，您希望每个电子邮件地址只有一个帐户。重要的是，在 MySQL 中，`INSERT... ON DUPLICATE KEY UPDATE`如果发现重复的唯一索引匹配，即使它不是您的主键，语句也会执行更新。这是使用时要注意的一个陷阱`INSERT... UPDATE`具有唯一性的表上的语句。您可能会无意中覆盖记录！关于 MySQL 中唯一性的另一个注意事项 - 根据 ANSI-92 标准，NULL 值不被视为唯一，这意味着您可以在可为空的唯一索引列中拥有多个 NULL 值。尽管它是一个标准，但其他一些 RDBMS 在实现上有所不同。

**PRIMARY KEY**是一个 UNIQUE INDEX，它是表中任何给定行的**标识符**。因此，它**不能为 null**，并保存为**聚集索引**. 集群意味着数据在 PK 上按升序写入文件系统。这使得对主键的搜索明显快于任何其他索引类型（如在 MySQL 中，只有 PK 可能是您的聚集索引）。请注意，如果您的数据不是 AUTO_INCREMENTed，则集群也会引起 INSERT 语句的问题，因为如果您插入具有较低序号值的 PK 的新行，MySQL 将不得不在文件系统上移动数据。这可能会妨碍您的数据库性能。因此，除非您确定自己知道自己在做什么，否则请始终在 MySQL 中为您的 PK 使用自动递增的值。

**FOREIGN KEY**是对另一个表中的列的引用。它强制执行引用完整性，这意味着如果输入的值在引用的表中不存在，则不能在具有另一个表的外键的列中创建条目。在 MySQL 中，FOREIGN KEY 不会提高搜索性能。它还要求键定义中的两个表都使用 InnoDB 引擎，并且具有相同的数据类型、字符集和排序规则。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T21:36:23.387

KEY 只是 INDEX 的另一种说法。

UNIQUE 索引意味着该索引中的所有值都必须是唯一的，并且与该索引中的其他值不同。一个示例是表中的 Id 列。

PRIMARY KEY 是一个唯一索引，其中所有键列都必须定义为 NOT NULL，即必须设置索引中的所有值。理想情况下，每个表应该只有（并且可以有）一个主键。

FOREIGN KEY 是两个表之间的引用约束。此列/索引必须与引用表中的引用列具有相同的类型和长度。FOREIGN KEY 的一个示例是 userId，它位于用户登录表和用户表之间。请注意，它通常指向引用表中的 PRIMARY KEY。

```
http://dev.mysql.com/doc/refman/5.1/en/create-table.html 
```******

# objective-c - NSBezierPath 绘图

> ID：13674118
> 
> 赞同：13
> 
> 时间：2012-12-02T21:35:25.773
> 
> 标签：objective-c, cocoa, drawing, nsbezierpath

我想在 NSImage 上做一个圆角矩形轮廓，我认为使用 NSBezierPath 是最好的方法。但是，我遇到了一个问题：我没有画出漂亮的曲线，而是得到了这个：

![在此处输入图像描述](../Images/277912801b67dc5bce667dfe2342b9c9.png)

由于我无法理解的原因，NSBezierPath 绘制的圆形部分颜色比其他部分更深。

这是我正在使用的代码（在 drawRect: 自定义视图上调用）：

```
NSBezierPath* bp = [NSBezierPath bezierPathWithRoundedRect: self.bounds xRadius: 5 yRadius: 5];
[[[NSColor blackColor] colorWithAlphaComponent: 0.5] setStroke];
[bp stroke]; 
```

有任何想法吗？

## 编辑：

如果我将路径插入 0.5，一切都很好。但是为什么当我将路径偏移 10 个像素时会得到这个（例如）？

![在此处输入图像描述](../Images/bb2070482509044c35602dd4d2634d1a.png)

如果我理解正确，它也应该画一条细线......

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-12-02T22:10:30.513

许多渲染系统都源自 PostScript 绘图模型。Core Graphics 就是这些衍生系统之一。（这里有一些其他的：PDF、[SVG](http://www.w3.org/Graphics/SVG/)、[HTML Canvas 2D 上下文](http://www.w3.org/TR/2dcontext/)、[Cairo](http://www.cairographics.org/)。）

所有这些系统的想法都是用一条固定宽度的线划出一条路径。当您描边路径时，线**横跨**路径：线宽的一半在路径的一侧，线宽的一半在另一侧。这是一张图表，可以使这一点更清楚：

![路径行程](../Images/7b55274ee84eb37daae532883cd38843.png)

现在，当您描画一条位于视图边界的路径时会发生什么？一半的笔划将超出您的视图范围并被剪掉 - 未绘制。您只会看到落在视图边界内的笔划的一半。

当您使用圆角时，该角会从视图的边界向其中心拉开，因此角周围的更多笔划落在视图的边界内。因此，笔触似乎在圆角处变粗，如下所示：

![路径行程被剪裁](../Images/f76902ad32868e91a74ecc0386fe267a.png)

要解决此问题，您需要将路径插入线宽的一半，以便整个笔划沿整个路径落在视图边界内。默认线宽为 1.0，因此：

```
NSBezierPath* bp = [NSBezierPath bezierPathWithRoundedRect:
    NSRectInset(self.bounds, 0.5, 0.5) xRadius:5 yRadius:5]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-13T02:25:00.367

在 iOS 字段中，只需减去圆的半径即可，以防止被剪裁。

```
UIBezierPath *roundPath = [UIBezierPath bezierPath];
[roundPath addArcWithCenter:
CGPointMake(self.frame.size.width / 2, self.frame.size.height / 2)
 radius:(self.frame.size.width / 2 - 0.5) 
startAngle:M_PI_2 endAngle:M_PI * 3 / 2.f clockwise:YES]; 
```

# fabric - Python Fabric 角色定义和 ssh 密钥

> ID：13674124
> 
> 赞同：2
> 
> 时间：2012-12-02T21:36:10.217
> 
> 标签：fabric

[正如在Fabric 中使用 SSH 密钥文件](https://stackoverflow.com/questions/5327465/using-an-ssh-keyfile-with-fabric)中所讨论的，可以使用`env.key_filename`. 此设置如何与定义远程主机交互`env.roledefs`？

如果我设置 key_filename，Fabric 会尝试在所有主机上使用该密钥吗？如果不同的主机需要不同的密钥怎么办？

一种解决方法是为每组主机设置一个单独的任务，但是有没有一种方法可以利用 roledefs 功能`env.hosts`？`env.key_filename`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:47:07.657

您可以设置`env.key_filename`为文件名列表，然后将针对每个连接尝试每个文件名。任何更具体的内容，您都必须自己编写脚本。

从[这个文档](http://docs.fabfile.org/en/1.5/usage/env.html#key-filename)。

所以回答：

> .. 但是有没有办法利用 roledefs 功能？

不。

# java - 在 Springmvc 中配置注解

> ID：13674139
> 
> 赞同：0
> 
> 时间：2012-12-02T21:37:11.770
> 
> 标签：java, spring-mvc, annotations

运行我的 springmvc 应用程序时出现以下错误。在我的控制器文件中，我使用注释将 viewAll.view 映射到 displagy inventory/ListAll.jsp 但这似乎不起作用。我可以使用控制器文件中的 sysout 在控制台中看到消息“In ViewDVDController.viewAll()”。

如果我遗漏了一些映射，请你告诉我？

```
Error:

HTTP Status 404 - /SpringMVC/views/inventory/viewAll.jsp

--------------------------------------------------------------------------------

type Status report

message /SpringMVC/views/inventory/viewAll.jsp

description The requested resource (/SpringMVC/views/inventory/viewAll.jsp) is not available.

--------------------------------------------------------------------------------

Apache Tomcat/7.0.29 
```

索引.html

```
 <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Highview DVD Management</title>
    </head>
    <body>
     <p> This DVD Management Model contains the following modules</p>

     <ul>
      <li><a href="inventory/viewAll.view">View All DVDs</a> </li>
      <li><a href="inventory/addDVD.form">Add a DVD</a> </li>
     </ul>
    </body>
  </html> 
```

ViewDVDController.java

```
 @Controller
    public class ViewDVDController extends MultiActionController {
        public ViewDVDController(){
            System.out.println("In ViewDVDController()");
        }
        @Autowired
        private InventoryManager manager;

        public InventoryManager getManager(){
            return manager;
        }

        public void setManager(InventoryManager manager){
            this.manager=manager;
        }

        @RequestMapping(value="viewAll.view", method=RequestMethod.GET)
        public ModelAndView viewAll() throws Exception {
            System.out.println("In ViewDVDController.viewAll()");
            Collection<DVDInfo> all = manager.getAll();
            return new ModelAndView("ListAll","catalog",all);

        }

    } 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
  <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
       xmlns="http://java.sun.com/xml/ns/javaee" 
       xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
       xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
    <display-name>Spring MVCDemo</display-name>

    <servlet>
      <servlet-name>spring</servlet-name>
      <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    </servlet>

    <servlet-mapping>
      <servlet-name>spring</servlet-name>
      <url-pattern>/inventory/*</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
      <welcome-file>index.html</welcome-file>
    </welcome-file-list>

   </web-app> 
```

spring-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" 
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
   xmlns:cotext="http://www.springframework.org/schema/context"
   xmlns:mvc="http://www.springframework.org/schema/mvc"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
             http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
             http://www.springframework.org/schema/context
             http://www.springframework.org/schema/context/spring-context-3.0.xsd
             http://www.springframework.org/schema/mvc
             http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

   <mvc:annotation-driven/>
   <cotext:component-scan base-package="springmvc"/>     

   <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/views/inventory/"/>
    <property name="suffix" value=".jsp" />
   </bean>

   </beans> 
```

log4j 日志：

```
 22:31:38,370 DEBUG ctory.support.DefaultListableBeanFactory: 430 - Creating instance of bean 'org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator'
    22:31:38,372 DEBUG ctory.support.DefaultListableBeanFactory: 458 - Finished creating instance of bean 'org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator'
    22:31:38,372 DEBUG gframework.web.servlet.DispatcherServlet: 647 - Unable to locate RequestToViewNameTranslator with name 'viewNameTranslator': using default [org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1a0b94d]
    22:31:38,372 DEBUG ctory.support.DefaultListableBeanFactory: 245 - Returning cached instance of singleton bean 'viewResolver'
    22:31:38,373 DEBUG ctory.support.DefaultListableBeanFactory: 430 - Creating instance of bean 'org.springframework.web.servlet.support.SessionFlashMapManager'
    22:31:38,376 DEBUG ctory.support.DefaultListableBeanFactory: 458 - Finished creating instance of bean 'org.springframework.web.servlet.support.SessionFlashMapManager'
    22:31:38,377 DEBUG gframework.web.servlet.DispatcherServlet: 709 - Unable to locate FlashMapManager with name 'flashMapManager': using default [org.springframework.web.servlet.support.SessionFlashMapManager@16c14c0]
    22:31:38,377 DEBUG gframework.web.servlet.DispatcherServlet: 523 - Published WebApplicationContext of servlet 'spring' as ServletContext attribute with name [org.springframework.web.servlet.FrameworkServlet.CONTEXT.spring]
    22:31:38,377  INFO gframework.web.servlet.DispatcherServlet: 463 - FrameworkServlet 'spring': initialization completed in 804 ms
    22:31:38,377 DEBUG gframework.web.servlet.DispatcherServlet: 136 - Servlet 'spring' configured successfully
    22:31:38,383 DEBUG gframework.web.servlet.DispatcherServlet: 819 - DispatcherServlet with name 'spring' processing GET request for [/SpringMVC/inventory/viewAll.view]
    22:31:38,385 DEBUG .annotation.RequestMappingHandlerMapping: 213 - Looking up handler method for path /viewAll.view
    22:31:38,387 DEBUG .annotation.RequestMappingHandlerMapping: 220 - Returning handler method [public org.springframework.web.portlet.ModelAndView springmvc.presentation.ViewDVDController.viewAll() throws java.lang.Exception]
    22:31:38,388 DEBUG ctory.support.DefaultListableBeanFactory: 245 - Returning cached instance of singleton bean 'viewDVDController'
    22:31:38,390 DEBUG gframework.web.servlet.DispatcherServlet: 902 - Last-Modified value for [/SpringMVC/inventory/viewAll.view] is: -1
    In ViewDVDController.viewAll()
    siz of the collection is  2
    22:31:38,413 DEBUG ctory.support.DefaultListableBeanFactory:1498 - Invoking afterPropertiesSet() on bean with name 'viewAll'
    22:31:38,413 DEBUG gframework.web.servlet.DispatcherServlet:1178 - Rendering view [org.springframework.web.servlet.view.JstlView: name 'viewAll'; URL [/views/inventory/viewAll.jsp]] in DispatcherServlet with name 'spring'
    22:31:38,413 DEBUG pringframework.web.servlet.view.JstlView: 371 - Added model object 'modelAndView' of type [org.springframework.web.portlet.ModelAndView] to request in view with name 'viewAll'
    22:31:38,413 DEBUG pringframework.web.servlet.view.JstlView: 371 - Added model object 'org.springframework.validation.BindingResult.modelAndView' of type [org.springframework.validation.BeanPropertyBindingResult] to request in view with name 'viewAll'
    22:31:38,417 DEBUG pringframework.web.servlet.view.JstlView: 236 - Forwarding to resource [/views/inventory/viewAll.jsp] in InternalResourceView 'viewAll'
    22:31:38,420 DEBUG gframework.web.servlet.DispatcherServlet: 913 - Successfully completed request 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T23:12:24.013

最后，我得到了我的答案。我导入了错误的 ModelAndView 类 (org.springframework.web* *.portlet.* *ModelAndView) 而不是 org.springframework.web.* *servlet。**ModelAndView 在控制器文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T21:46:59.043

ViewDVDController 在什么包中？请注意**base-package**的值（在 cotext:component-scan 中）必须与您的包名称匹配。

# vba - 打开 Excel 文件后在 VBA 中复制图表

> ID：13674143
> 
> 赞同：1
> 
> 时间：2012-12-02T21:37:42.920
> 
> 标签：vba, ms-word, excel-2007

我在 Word2007 中有一个 VBA 模块，它有一个主子，它调用一个 OpenExcelFile 子来打开一个 Excel 工作簿。它成功打开，但是在我的主子中，我无法选择和复制特定图表。然后我想将图表作为图片粘贴到 word 中。

```
Const Fuelpath As String = "\\PATH\Fuel_Price_Screen.xls"

Sub Main()
OpenExcelFile (Fuelpath)
'''This is where I would like to Copy the only Chart on the first Excel Sheet (named "$$Screen," 
'''but I keep getting errors. I would like to paste it into the Word doc called 
'''"daily summary automation," which the VBA module is running in.
End Sub

Sub OpenExcelFile(ByVal Filepath As String)
Dim xlApp As Object
xlApp.Application.Visible = True
xlApp.Workbooks.Open (Fuelpath)
End Sub 
```

# c++ - WebP无损格式概述

> ID：13674145
> 
> 赞同：3
> 
> 时间：2012-12-02T21:38:00.610
> 
> 标签：c++, compression, codec, webp

我正在阅读官方的[WebP 无损比特流规范。](https://developers.google.com/speed/webp/docs/webp_lossless_bitstream_specification)我有一种感觉，该文件缺少一些解释。

让我描述一下规范的一些片段：

**1\. 简介——明确**

**2\. Riff 标头 - 清除**

**3\. 转型**

> 转换仅用于主级别 ARGB 图像：次分辨率图像没有转换，甚至没有表示转换结束的 0 位。

之前没有提到容器包含一些亚分辨率图像。这些是什么？如果规范中没有，它们在哪里描述？他们如何添加到*最终*图像中？

然后，在*预测器变换*段落中：

> 我们将图像分成正方形...

..什么图像？主*图像*还是次分辨率图像？如果图像不能被分成正方形（除了像素大小的正方形）怎么办？

> 预测数据的前 4 位以位数定义块的宽度和高度。块列数 block_xsize 用于二维索引。

这是否意味着图像宽度为 block_xsize * block_width ？

> 变换数据包含图像每个块的预测模式。

以什么方式，什么格式？

我不知道为什么我很难理解这一点。也许是因为我不是以英语为母语的人，或者因为描述太简洁了。

我将不胜感激*解码*此规范的任何帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T06:39:50.400

前面已经提到过。就在文件的顶部，它说：

> 该格式使用亚分辨率图像，递归地嵌入到格式本身中，用于存储有关图像的统计数据，例如使用的熵代码、空间预测器、颜色空间转换和颜色表。

这些是数据的数组（或颜色表中的向量），其中每个元素应用于实际图像中的像素块，例如 16x16 块。这些“亚分辨率图像”本身并不是被压缩图像的子样本。

格式描述称它们为图像，因为它们的存储方式与格式中的主图像完全相同。变换是对解码器的指令以应用于解压缩的主图像数据。通过为每个块提供霍夫曼码，熵图像用于解压缩主图像。

# android - 使用搜索栏填充框颜色（Android）

> ID：13674147
> 
> 赞同：0
> 
> 时间：2012-12-02T21:38:28.783
> 
> 标签：android

所以...我正在尝试填充一个 TextView，它根据活动顶部的红色、绿色和蓝色 SeekBars 的进度来扩展活动屏幕的整个下半部分。用户可以移动任何搜索栏，并且扩展活动下半部分的整个宽度和长度的 TextView 将使用正确的 RGB 配色方案填充，以匹配所有 3 个搜索栏的 1-100 移动。

关于如何做到这一点的任何想法？我已经用谷歌搜索了 Android 文档，但找不到我要找的东西。即使是让我知道该怎么做的链接也会很好:)

*我应该提到这里的代码在android VM上运行得很好

```
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.SeekBar;
import android.widget.SeekBar.OnSeekBarChangeListener;
import android.widget.TextView;

public class MainActivity extends Activity implements OnSeekBarChangeListener
{
    private SeekBar red;
    private SeekBar green;
    private SeekBar blue;

    private TextView progress1;
    private TextView progress2;
    private TextView progress3;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        red = (SeekBar)findViewById(R.id.seekBar1);
        red.setOnSeekBarChangeListener(this);
        green = (SeekBar)findViewById(R.id.seekBar2);
        green.setOnSeekBarChangeListener(this);
        blue = (SeekBar)findViewById(R.id.seekBar3);
        blue.setOnSeekBarChangeListener(this);
        progress1 = (TextView)findViewById(R.id.textView2);
        progress2 = (TextView)findViewById(R.id.textView4);
        progress3 = (TextView)findViewById(R.id.textView6);     
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) 
    {
        switch(seekBar.getId())
        {
        case R.id.seekBar1:
        progress1.setText(""+progress); 
        break;  
        case R.id.seekBar2:
            progress2.setText(""+progress);
            break;
        case R.id.seekBar3:
            progress3.setText(""+progress);
            break;
        }       

    }

    @Override
    public void onStartTrackingTouch(SeekBar arg0) 
    {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStopTrackingTouch(SeekBar arg0) 
    {
        // TODO Auto-generated method stub

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:08:25.307

将 SeekBars 配置为最大值为 255，然后在您的`onProgressChanged()`使用中`Color.argb()`（[文档](http://developer.android.com/reference/android/graphics/Color.html#argb%28int,%20int,%20int,%20int%29)）：

```
 int color = Color.argb(255, red.getProgress(), green.getProgress(), blue.getProgress());
  //you can also split that into the 3 channels if you wish
  //i'm assuming you actually want to show the resulting color
  progress1.setBackgroundColor(color); 
```

# ios - UIWebView LoadRequest 只工作一次？

> ID：13674149
> 
> 赞同：0
> 
> 时间：2012-12-02T21:38:37.067
> 
> 标签：ios, uiwebview

我有一个在 viewDidLoad 事件中加载网站的 webview：

```
- (void)viewDidLoad
{
[super viewDidLoad];

NSString *fullURL = @"http://www.mypage.net/geschenke/allproducts.php";
NSURL *websiteURL = [NSURL URLWithString:fullURL];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:websiteURL];
[webView2 loadRequest:requestObj];
} 
```

这很好用。在这个页面上，我有一些元信息，例如刚刚显示的产品的 ID。

现在我的应用程序中有一个 UIButton，当我单击它时，将执行以下代码：

```
-(IBAction)buttonClick:(id)sender{
NSString *lastId = [webView2 stringByEvaluatingJavaScriptFromString:@"document.getElementById('iphone-4').innerHTML;"];

NSString *fullURL = [NSString stringWithFormat:@"http://www.mypage.net/geschenke/allproducts.php?lastId=%@&likeIt=0", lastId];

NSURL *websiteURL = [NSURL URLWithString:fullURL];

NSLog(fullURL);

NSURLRequest *requestObj = [NSURLRequest requestWithURL:websiteURL];
[webView2 loadRequest:requestObj];
} 
```

如您所见，我正在加载相同的页面，但使用了新参数（lastID 和 likeIt）。我使用 stringByEvaluatingJavaScriptFromString 轻松解析 ID。

NSLog(fullURL) 命令记录*正确*的url！当我将它复制并粘贴到浏览器中时，它可以工作。

源代码本身也有效。当我加载 www.google.de 时，webView 会导航到新页面。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-31T10:10:51.897

尝试忽略缓存：

```
[NSURLRequest requestWithURL:websiteURL cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:0.0] 
```

# javascript - 获取函数表达式中的参数数量？

> ID：13674152
> 
> 赞同：8
> 
> 时间：2012-12-02T21:38:50.713
> 
> 标签：javascript

> **可能重复：**
> [获取函数的数量](https://stackoverflow.com/questions/4848149/get-a-functions-arity)

如何声明函数表达式，将其传递给定义的函数，并让定义的函数确定函数表达式有多少个参数？

请参阅此代码片段以供参考：

```
function getArgumentCount(fexp)
{
    return ...;
}

var fexp1 = function(a) { };
var fexp2 = function(a, b) { };

console.log(getArgumentCount(fexp1)); // Should output 1
console.log(getArgumentCount(fexp2)); // Should output 2 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-02T21:41:07.303

javascript 函数有一个 .length 属性

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/length](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/length)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T21:40:50.217

您可以使用 来执行此操作[`theFunction.length`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/length)，但我建议您不要这样做：除其他原因外：

*   它不适用于与 naïve [`Function.bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)shims 绑定的函数。
*   它不适用于本机功能。（例如`window.open`）¹

¹至少在 Chrome 上；它似乎在 Firefox 中工作。

# javascript - 如何正确使用 Backbone.js 集合来显示列表

> ID：13674153
> 
> 赞同：3
> 
> 时间：2012-12-02T21:38:56.397
> 
> 标签：javascript, backbone.js

我刚刚开始使用 Backbone，并且对某一点感到困惑。

我有一个显示文档列表的页面。

单击列表中的文档可打开完整文档以进行编辑。

据我了解，在 Backbone 中对该列表建模的正确方法是作为文档模型的集合。

```
var DocList = Backbone.Collection.extend({
  model: document
}); 
```

然而，文档模型将很大，具有许多属性。该列表不需要显示所有这些信息。

我想知道是否最好有类似以下的东西......

```
var ShortDoc = Backbone.Model.extend({});
var shortDoc = new Doc({ 
  id: id,
  title: docTitle 
});
var DocList = Backbone.Collection.extend({
  model: shortDoc
}); 
```

...其中 shortDoc 仅包含生成列表所需的属性。

还是最好将 Collection 与整个文档模型一起使用？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T21:46:34.660

请记住，您可以`Backbone.View`为同一个模型编写多个 s。虽然您可能有一个`DetailView`展示整个文档的文件，但您也可以自由地创建一个`ItemView`展示每个文件的重要部分的列表视图。虽然您的`DetailView`遗嘱包括厨房水槽，但`ItemView`可能仅限于炫耀标题：

```
var MyItemView = Backbone.View.extend({
  tagName: 'li',
  render: function () {
    this.$el.html('<h3>' + this.model.get('title') + '</h3>');
    return this;
  }
}); 
```

最后，如果您关心的是*数据*量：许多 Backbone 应用程序选择为应用程序中使用的每种模型保留一个集合。他们的状态需要在某个地方保持；为什么不在一个漂亮、有条理的列表中呢？当应用程序加载时，您不需要引导每个模型属性。您可能会选择加载标题（或任何您需要呈现初始列表的内容），并推迟获取模型，直到用户请求任何详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:32:39.953

您的问题标题中有 3 个不同的概念（类、实例和数据表示）。

你的定义应该是这样的：

```
var Doc = Backbone.Model.extend({});
var DocList = Backbone.Collection.extend({
    url: '/docs',
    model: Doc
}); 
```

如果您没有默认值，则在此执行阶段没有数据。然后，您开始使用可以拥有完整数据集（或仅部分数据）的模型填充您的集合，或者通过在客户端创建它们：

```
var myDocList = new DocList();
myDocList.create({title: 'The first doc'}); 
/* no need for an id here if you're using centralized persistence, because 
"create" calls "save" witch in turn does an http post to your server which 
should return a JSON representation of your model including its id (Backbone 
will include it in your model). */ 
```

或阅读它们的服务器端：

```
var myDocList = new DocList();
myDocList.fetch();
/* Backbone will do an http get at DocList.url and create Doc instances with the
   JSON array it should receive from your server*/ 
```

至于您的 docList 的表示，如果它是长 HTML 或复杂的 HTML，您确实应该将您的项目附加到一个新创建的元素，然后将此元素附加到您的文档，这可能比重新绘制每个项目快 10 倍左右.

# android - 将数据从 web 服务推送到 android 应用程序：C2DM

> ID：13674158
> 
> 赞同：2
> 
> 时间：2012-12-02T21:39:36.503
> 
> 标签：android, push-notification, android-c2dm, server-push

我有一个用例，我需要将一些信息从我的网络服务发送到 Android 应用程序。我刚刚了解了用于此类用例的 C2DM（如果我错了，请纠正我）。

有人知道使用此服务时可以预期多少延迟？在我的用例中，我希望消息在 1-2 秒内从网络服务发送到手机。

有人使用过 C2DM 并且知道平均消息延迟是多少？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T07:32:20.773

是的，您现在应该转移到 GCM：-

> GCM[在这里检查](http://developer.android.com/google/gcm/index.html)

如果您打算从任何**消息传递或推送通知功能**开始， 那么请**避免使用 C2DM**，因为**GCM（谷歌云消息传递）将获得更多支持**。它还具有更简单的 API 和更高的通知传递可靠性。

> [在此处检查](http://developer.android.com/google/gcm/adv.html)消息的可靠性和延迟

**只是一个想法**：

> 其他选择是在一定的时间间隔后轮询数据，那个时间显然会超过 5 秒左右**{您的选择}**。这样你会让用户有点不情愿，因为总是需要数据连接并且电池会消耗更多。所以这些东西将由 GCM 服务补充。但就消息传递而言，它不一定**可靠**。

# c++ - 将随机数分配给数组并检查重复项

> ID：13674160
> 
> 赞同：1
> 
> 时间：2012-12-02T21:39:42.840
> 
> 标签：c++, visual-c++

我被分配创建一个包含 100 个元素的数组并使用 rand () 函数为其分配随机值，并检查数组中是否存在重复项。我已经完成了代码并且运行良好，但我不确定它是实际检查重复项还是只是打印未找到的重复项，因为我已经运行了很多次，但它甚至一次都没有显示“找到重复值”

```
#include <iostream>
using namespace std;
void main ()
{
    int array1[100];
    for (int a=0; a<100; a++)
    {
        array1[a]=rand();
        cout<<array1[a]<<endl;
    }
    for(int b=0;b<100;b++)
    {
        for(int c=b+1;c<100;c++)
        {
            if(array1[b]==array1[c])
            {
                cout<<"Array contains duplicates\n";
                break;
            }
        }
    }
    cout<<"No Duplicates found"<<endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:44:29.397

由于`rand()`返回一个值，`[0, RAND_MAX)`因此其中两个在 100 个值中相等的可能性很小（`RAND_MAX`保证至少为 32k，但可能更大）。

您应该尝试使用模运算符缩小您生成的可能数字的范围：`rand()%MAX_VALUE`在`[0, MAX_VALUE)`.

实际上，通过解释[pidgeonhole 原则](http://en.wikipedia.org/wiki/Pigeonhole_principle)，如果您选择`MAX_VALUE < 100`，您肯定必须有一个副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T21:44:31.943

这就是功能和功能测试有用的地方。将您的重复检查代码移动到它自己的函数中。然后创建一个数组，使用您知道包含重复项的值进行初始化，将其传递给您的新检查函数，看看您是否得到预期的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T21:46:55.060

我建议您编写一些测试代码，而不是查看您的算法（我可能会或可能不会正确理解）。制作一个类似于 rand() 的 fake_rand() 函数，但每 10 个数字为 0，或类似的东西。让这个假函数**很**容易理解，或者你也必须为它编写测试代码。

然后，使用它而不是真实的来测试您的算法。

测试代码是一个非常有用和强大的概念，花点时间去 google 一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T22:19:37.917

正如克里斯指出的那样，使用独特是要走的路。作为一般规则，如果有库例程可以完成这项工作，请不要编写自己的循环。

```
#include <algorithm>
#include <cstdlib>
#include <iostream>
#include <iterator>
#include <ostream>
#include <vector>

template <typename RandomAccessIterator>
bool hasDuplicates(RandomAccessIterator first, 
    RandomAccessIterator last)
{
    typedef typename std::iterator_traits<RandomAccessIterator>
        ::value_type value_type;

    std::vector<value_type> v(first, last);
    std::sort(v.begin(), v.end());
    return std::unique(v.begin(), v.end()) != v.end();
}

int main()
{
    const int n = 100;
    int array1[n];

    // Seeding of rand would go here

    std::for_each(array1, array1 + n, 
        [](int& x){ x = std::rand(); });

    bool b = hasDuplicates(array1, array1 + n);

    std::cout << (b ? "Array contains duplicates" :
        "No duplicates found") <<
        std::endl;

    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T21:51:01.593

该代码看起来在功能上是正确的。请记住，在一组 100 个随机数（从 2^32 的总数字空间）中找到重复项的概率相当低，因此您没有找到此类实例并不奇怪。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-02T21:52:57.210

唔。当没有使用不同的起始值播种时，rand 总是返回相同的序列。所以你应该用不同的种子（可能来自当前时间）调用 srand ，否则当它们在第一次运行时都不同时，它们将永远不同。

# c# - 为 Windows 8 XAML 应用设置 UIElement 的位置

> ID：13674162
> 
> 赞同：1
> 
> 时间：2012-12-02T21:39:50.357
> 
> 标签：c#, xaml, windows-runtime, transform, uielement

我正在尝试根据这样的点击/单击设置图像的位置（注意“contentGrid”是 Page 的唯一子级并填充屏幕）

```
 private void contentGrid_Tapped(object sender, TappedRoutedEventArgs e)
 {
     Uri uri = new Uri("ms-appx:///Images/Test.png");
     BitmapImage bitmap = new BitmapImage(uri);
     Image image = new Image();
     image.Source = bitmap;

     // The .png is a 30px by 30px image
     image.Width = 30;
     image.Height = 30;
     image.Stretch = Stretch.None;

     Point tappedPoint = e.GetPosition(contentGrid);
     TranslateTransform posTransform = new TranslateTransform();
     posTransform.X = tappedPoint.X;
     posTransform.Y = tappedPoint.Y;
     image.RenderTransform = posTransform;
     contentGrid.Children.Add(image);         
 } 
```

结果是 Test.png 的图像在单击时出现在页面上，但不在我点击/单击的位置。它在视觉上偏移了页面宽度的一半，并向下偏移了页面高度的一半。

我试图在这里了解相对位置 - 将图像转换为用户实际点击/单击的点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T23:11:59.533

尝试将`Margin`图像设置为显示到鼠标点：

```
 private void contentGrid_Tapped(object sender, TappedRoutedEventArgs e)
   {
        Uri uri = new Uri("ms-appx:///Images/Test.png");
        BitmapImage bitmap = new BitmapImage(uri);
        Image image = new Image();
        image.Source = bitmap;

        // The .png is a 30px by 30px image
        image.Width = 30;
        image.Height = 30;
        image.Stretch = Stretch.None;

        image.HorizontalAlignment = System.Windows.HorizontalAlignment.Left;
        image.VerticalAlignment = System.Windows.VerticalAlignment.Top;
        Point tappedPoint = e.GetPosition(contentGrid);
        contentGrid.Children.Add(image);
        image.Margin = new Thickness(tappedPoint.X, tappedPoint.Y, 0, 0);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T15:45:08.387

`Grid`在您的情况下使用它很棘手。使用[画布](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.canvas.aspx)代替`Grid`.

```
Canvas.SetLeft(image, tappedPoint.X);
Canvas.SetTop(image, tappedPoint.Y);
canvas.Children.Add(image); 
```

# mysql - MySQL 5.1 #1005 - 无法创建表 'datacode.foto' (errno: 150) 错误

> ID：13674164
> 
> 赞同：1
> 
> 时间：2012-12-02T21:40:00.110
> 
> 标签：mysql, sql, phpmyadmin

我在 phpMyadmin，MySQL 5.1 版本中，我试图在下面运行这个 SQL，但是当我在 phpmyadin 上执行这个代码时，它给出了错误 Can't create table 'datacode.foto' (errno: 150) ，有人知道我的代码发生了什么？

```
CREATE  TABLE IF NOT EXISTS `projeto` (
`proj_id` INT NOT NULL AUTO_INCREMENT ,
  `proj_nome` VARCHAR(40) NULL ,
  `proje_descr` VARCHAR(700) NULL ,
  `proj_oque_fizemos` VARCHAR(200) NULL ,
  `proj_url` VARCHAR(250) NULL ,
  `proj_descr_url` VARCHAR(250) NULL ,
  PRIMARY KEY (`proj_id`) )
ENGINE = InnoDB;

CREATE  TABLE IF NOT EXISTS `categoria` (
  `cat_id` INT NOT NULL AUTO_INCREMENT ,
  `cat_nome` VARCHAR(45) NULL ,
  PRIMARY KEY (`cat_id`) )
ENGINE = InnoDB;

CREATE  TABLE IF NOT EXISTS `foto` (
  `foto_id` INT NOT NULL AUTO_INCREMENT ,
  `foto_url` VARCHAR(270) NULL ,
  `projeto_proj_id` INT NOT NULL ,
  PRIMARY KEY (`foto_id`) ,
  INDEX `fk_foto_projeto1_idx` (`projeto_proj_id` ASC) ,
  CONSTRAINT `fk_foto_projeto1`
    FOREIGN KEY (`projeto_proj_id` )
    REFERENCES `mydb`.`projeto` (`proj_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE  TABLE IF NOT EXISTS `projeto_por_categoria` (
  `projeto_proj_id` INT NOT NULL ,
  `categoria_cat_id` INT NOT NULL ,
  PRIMARY KEY (`projeto_proj_id`, `categoria_cat_id`) ,
  INDEX `fk_projeto_has_categoria_categoria1_idx` (`categoria_cat_id` ASC) ,
  INDEX `fk_projeto_has_categoria_projeto_idx` (`projeto_proj_id` ASC) ,
  CONSTRAINT `fk_projeto_has_categoria_projeto`
    FOREIGN KEY (`projeto_proj_id` )
    REFERENCES `mydb`.`projeto` (`proj_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_projeto_has_categoria_categoria1`
    FOREIGN KEY (`categoria_cat_id` )
    REFERENCES `mydb`.`categoria` (`cat_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T21:46:37.927

您正在引用`mydb`数据库中的表，而您的表实际上位于名为的数据库中`datacode`：

```
REFERENCES `mydb`.`projeto` (`proj_id` )
           ^^^^^^^--- change (or remove) this database qualifier 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T21:49:44.433

由于这些行，您会收到此错误：

```
REFERENCES `mydb`.`projeto` (`proj_id` )

REFERENCES `mydb`.`categoria` (`cat_id` ) 
```

如果你用它替换它们应该可以

```
REFERENCES `projeto` (`proj_id` )

REFERENCES `categoria` (`cat_id` ) 
```

这是构建： [http ://sqlfiddle.com/#!8/751c2](http://sqlfiddle.com/#!8/751c2)

# .net - LINQ to Entities 这么慢？

> ID：13674179
> 
> 赞同：0
> 
> 时间：2012-12-02T21:41:34.943
> 
> 标签：.net, linq, entity-framework, linq-to-entities

我在上下文（内存）中有实体，因为我用 Include() 加载了它们。

我有大约 25 个实体 (tph)，我正在对每个实体运行以下查询：

```
actTph.TrainingProgramHistory_ConditionAndLoadParameter.Where(x => x.Level == 10).Select(x => x.ConditionAndLoadParameter).ToArray(); 
```

TrainingProgramHistory_ConditionAndLoadParameter 和 TrainingProgramHistory_ConditionAndLoadParameter.ConditionAndLoadParameters 在内存中，因为执行这些查询时，SQL-profile 什么也不记录。

每个 TPH 有大约 20 个 TrainingProgramHistory_ConditionAndLoadParameter 相关实体。

运行此查询 25 次（在我的 25 个 TPH 实体上）大约需要 3 秒！

如果我重构这个：

```
List<ConditionAndLoadParameter> measuredCalps = new List<ConditionAndLoadParameter>();
                    foreach (TrainingProgramHistory_ConditionAndLoadParameter tphCalp in actTph.TrainingProgramHistory_ConditionAndLoadParameter)
                    {
                        if (tphCalp.Level == 10)
                        {
                            measuredCalps.Add(tphCalp.ConditionAndLoadParameter);
                        }
                    } 
```

然后它在 100 毫秒左右运行。

对于内存中的对象，Linq to Entities 怎么这么慢？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:01:28.910

好吧，是我的错:(

第一个片段在一个方法中，其中包含一个日志/跟踪行，其中显然使用了 lock()-s，即使从同一个线程调用此方法，调用这些锁也会降低性能。

在这种情况下，foreach 和 linq 查询在移除锁后产生了大致相同的性能。

# c++ - 无法让 QLabel 图像滚动

> ID：13674181
> 
> 赞同：1
> 
> 时间：2012-12-02T21:41:45.603
> 
> 标签：c++, qt, qlabel, qscrollarea

我正在努力让`QLabel`我设置的这个图像运行良好。我只需要让它滚动。我了解`QScrollArea`设置，但这不是`QScrollArea`.

我需要在`mainwindow.cpp`我的`QLabel`. 这是我设置我的区域`QLabel`以及我希望将其设置为能够滚动的区域。

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    QString filename = "C:/Users/SOYO/Desktop/Qt_GUI_C++/ParkOur/map.jpg";
    QImage image(filename);
    ui->labelMap->setPixmap(QPixmap::fromImage(image));

    QScrollArea *scrollArea = new QScrollArea;
    scrollArea->setBackgroundRole(QPalette::Dark);
    scrollArea->setWidget(ui->labelMap);
} 
```

`QScrollArea`如果没有它完全控制整个程序并显示所有图像，我不知道如何开始工作。

我只需要图像可滚动，请给我示例代码，它使一切更容易掌握。预先感谢您的协助。

PS我不希望滚动超过主小部件，只是其中`QLabel`包含图像的小部件。

# email - 发送到我的 Google Apps 地址的电子邮件有时会被退回

> ID：13674182
> 
> 赞同：0
> 
> 时间：2012-12-02T21:41:46.617
> 
> 标签：email, google-apps, email-bounces

我的域电子邮件托管在免费版 Google Apps 上。问题是偶尔/经常，发送给我的电子邮件会退回。有人向我转发了退回邮件：

```
Delivery to the following recipient failed permanently:

 steven@vanesoftware.com

Technical details of permanent failure:
Google tried to deliver your message, but it was rejected by the recipient domain. We
recommend contacting the other email provider for further information about the cause of 
this error. The error that the other server returned was: 554 554 5.7.1 
<steven@vanesoftware.com>: Recipient address rejected: Access denied (state 13). 
```

我的域托管在 hover.com 上，这是我的 DNS 条目的屏幕截图：

![DNS 截图](../Images/e16d207263c8badbae518345c4978243.png)

我做错了什么，或者我该如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T22:10:49.557

您的顶级域不能有 CNAME 记录。删除@CNAME 记录并创建一个指向 pl1705.pairlitesite.com 的 IP 地址的 A 记录，或者，如果您的 DNS 主机有一个，则使用 WebHop / HTTP 重定向。

周杰伦

# mysql - SQL 语法错误，我没有看到

> ID：13674183
> 
> 赞同：0
> 
> 时间：2012-12-02T21:41:50.480
> 
> 标签：mysql, sql, database

我的查询中有错误。这是查询：

```
select HourTime, count(*) from
(
select substring(time,1,2) as HourTime, count(*) as ActivityCount
from htmp_cs368 a
group by HourTime
)htmp
union
(
select substring(time,1,2) as HourTime, count(*) as ActivityCount
from atmp_cs368 a
group by HourTime
)atmp
group by HourTime DESC 
```

这是错误消息：

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that        corresponds to your MySQL server version for the right syntax to use near 'atmp
group by HourTime DESC' at line 12 
```

谁能看到我的错误在哪里？我很感激。这也是大型程序的一部分，因此是 java 标记。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T21:43:01.627

`GROUP BY`没有订单。您需要使用`ORDER BY`.

```
GROUP BY HourTime 
ORDER BY HourTime DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T21:44:43.237

我想你的意思是：

```
...
group by HourTime
order by HourTime desc 
```

# javascript - 我可以在哪里放置 JavaScript 数组？

> ID：13674184
> 
> 赞同：0
> 
> 时间：2012-12-02T21:41:58.507
> 
> 标签：javascript, arrays

我有一个家庭作业，要求我制作一个数组。我的代码有效，但我不确定它是否被视为使用数组。如果有人能为我澄清这一点并告诉我可以用数组替换哪些代码，我将不胜感激！

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Chapter 09 Arrays</title>
    </head>
    <body>
        <h1>Student Scores</h1>
        <form>
            <table>
                <tr style="background-color:grey">
                    <td width='25%' align='center'><b>First Name</B></td>
                    <td width='25%' align='center'><b>Last Name</b></td>
                    <td width='25%' align='center'><b>Score<b></td>
                    <td width='25%' align='center'>&nbsp;</td>
                </tr>
                <tr>
                    <td><input type="text" name="first_name" id='first_name'></td>
                    <td><input type="text" name="last_name" id='last_name'></td>
                    <td><input type="text" name="score" id='score' style='text-align:right'></td>
                    <td width='25%' align='center'>
                        <input type="button" value="Add Student Score" onClick='javascript:addScore();'>
                    </td>
                </tr>
            </table>
        </form>

        <h2>Student Scores</h2>
        <textarea rows="4" cols="50" readonly name='results' id='results'>
        </textarea>
        <br />
        Average Score: <input type="text" name="avg" id='avg' disabled="disabled"><br>
        <br />
        <input type="reset" value="Reset">
        <input type="button" value="Sort By Last Name" onClick='javascript:sortScore();'>
        <input type="button" value="Clear Scores" onClick='javascript:clearScores();'>
        <script type="text/javascript">
        var firstName = [];
        var lastName = [];
        var score = [];
        var aDisplay = [];

        function resetField() {
        }

        function clearScores() {
            firstName = [];
            lastName = [];
            score = [];
            aDisplay = [];
            document.getElementById('avg').value='';
            document.getElementById('results').value='';
            resetEntry();
        }

        function resetEntry() {
            document.getElementById('first_name').value='';
            document.getElementById('last_name').value='';
            document.getElementById('score').value='';
        }

        function addScore() {
            var tempFirstName = getFieldValue('first_name');
            var tempLastName = getFieldValue('last_name');
            var tempScore = getFieldValue('score');

            if (tempFirstName == '') {
                alert('Specify a value for first name');
                document.getElementById('first_name').focus();
                return;
            }

            if (tempLastName == '') {
                alert('Specify a value for last name');
                document.getElementById('last_name').focus();
                return;
            }

            if (tempScore == '') {
                alert('Specify a value for score');
                document.getElementById('score').focus();
                return;
            }

            temp = "";
            total = 0;
            var tempAvg = 0.0;
            firstName.push(getFieldValue('first_name'))
            lastName.push(getFieldValue('last_name'))
            score.push(getFieldValue('score'))
            aDisplay.push(getFieldValue('last_name') + "," + getFieldValue('first_name') + "," + parseInt(getFieldValue('score')))

            for(i = 0; i < score.length; i++) {
                total += parseInt(score[i]);
            }

            tempAvg = (total / score.length);
            tempAvg = tempAvg.toFixed(2);
            document.getElementById('avg').value = tempAvg;
            listScores();
            resetEntry();
        }

        function sortScore() {
            aDisplay.sort();
            listScores();
        }

        function listScores() {
            temp = "";
            document.getElementById('results').value = '';
            for(i = 0; i < aDisplay.length; i++) {
                temp += aDisplay[i] + "\n";
            }
            document.getElementById('results').value = temp;
        }
        function getFieldValue(p) {
            var v = "";
            if (document.getElementById(p) != null && document.getElementById(p).value > "") {
                v = document.getElementById(p).value;
            }
            return v;
        }
        clearScores();
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T21:45:08.307

在这里，我会尽力帮助你：

1.  通用术语[http://en.wikipedia.org/wiki/Array#In_computer_science](http://en.wikipedia.org/wiki/Array#In_computer_science)
2.  如果您在 JavaScript 编程语言的上下文中了解数组，那么（大多数情况下）您最好在 Mozilla 开发人员网络 (MDN) [https://developer.mozilla.org/en-US/docs/JavaScript/上阅读它参考/Global_Objects/数组](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)

由于这是你的家庭作业，试着理解这个术语是什么以及它在你的作业上下文中的含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T21:45:33.347

所有这些都非常清楚你使用数组，并且正确。

```
var firstName = [];
var lastName = [];
var score = [];
var aDisplay = [];
.......
firstName.push(getFieldValue('first_name')) 
lastName.push(getFieldValue('last_name')) 
score.push(getFieldValue('score')) 
aDisplay.push(getFieldValue('last_name') + "," + getFieldValue('first_name') + "," + parseInt(getFieldValue('score')))
.......
for(i=0;i<score.length;i++){
total += parseInt(score[i]);
} 
```

# blackberry-10 - 为什么我的 BlackBerry 10 原生应用程序不能横向运行？

> ID：13674185
> 
> 赞同：0
> 
> 时间：2012-12-02T21:42:09.610
> 
> 标签：blackberry-10

我有一个 BlackBerry 10 本机应用程序，它只能横向运行。我的标签`bar-descriptor.xml`下有以下代码`<qnx>`：

```
<initialWindow>
    <aspectRatio>landscape</aspectRatio>
    <autoOrients>false</autoOrients>
    <systemChrome>none</systemChrome>
    <transparent>false</transparent>
</initialWindow> 
```

但是，当我启动应用程序时，它总是以纵向模式启动。我还需要做什么才能使应用程序以横向模式启动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:41:35.693

您还必须在 qml 文件中定义它，即。关于信号创建完成

```
onCreationCompleted: {
        OrientationSupport.supportedDisplayOrientation = SupportedDisplayOrientation.DisplayLandscape;
} 
```

或者在 c++ 中，您可以在应用程序构造函数中定义它：

```
OrientationSupport::instance()
      .setSupportedDisplayOrientation(SupportedDisplayOrientation::DisplayLandscape); 
```

您在以下位置查看文档：[https ://developer.blackberry.com/cascades/documentation/dev/orientation/index.html](https://developer.blackberry.com/cascades/documentation/dev/orientation/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T22:58:23.120

事实证明，您必须在您的应用程序初始化代码中调用其中的`<initialWindow>`声明，以便告诉导航器方向已锁定。`bar-descriptor.xml``navigator_rotation_lock(true)`

[http://developer.blackberry.com/native/reference/com.qnx.doc.bps.lib_ref/com.qnx.doc.bps.lib_ref/topic/navigator_rotation_lock.html](http://developer.blackberry.com/native/reference/com.qnx.doc.bps.lib_ref/com.qnx.doc.bps.lib_ref/topic/navigator_rotation_lock.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-27T09:14:33.760

“我原来”在收到 NAVIGATOR_WINDOW_ACTIVE 时必须调用一些东西：

```
 bps_event_t *event = NULL;

    for (;;)
    {
        if (BPS_SUCCESS != bps_get_event(&event, 0))
        {
            fprintf(stderr, "bps_get_event failed\n");
            break;
        }

        if (event)
        {
            int domain = bps_event_get_domain(event);

            if (domain == navigator_get_domain())
            {
                UINT ID = bps_event_get_code(event);
                if (ID == NAVIGATOR_EXIT)
                {
                    exit_application = 1;
                }
                else if(ID == NAVIGATOR_WINDOW_ACTIVE)
                {
                   SetRotationDammIt();                                        
                }
             }
         }
     }
     //...
     void SetRotationDammIt()
     {
            int angle = 90;
            screen_set_window_property_iv( screen_win, SCREEN_PROPERTY_ROTATION, &angle);
            navigator_set_orientation(NAVIGATOR_RIGHT_UP, NULL);
     } 
```

不过，还有几件事需要解决。您需要将 X 与 Y 切换以获取分辨率，因为窗口本身仍处于纵向模式（X < Y），并且您还必须使用以下输入进行 switch-aroo：

```
 float RatioX = TouchX / PortraitX;
        float RatioY = TouchY / PortraitY;
        Vector2 Res( PortraitY, PortraitX );
        Vector2 RealCoords( RatioX * Res.x, RatioY * Res.y ); 
```

这似乎只发生在最新的模拟器上（版本 10.1.0.1720 并注意我没有物理设备，以防万一这对你不起作用），在旧的模拟器上它只适用于清单设置（出于某种原因），但我需要这个来播放 .wav 文件，因为旧文件不能。

# php - 屏幕会话中的 PHP SSH 终端

> ID：13674187
> 
> 赞同：1
> 
> 时间：2012-12-02T21:42:18.693
> 
> 标签：php, shell, libssh2

我正在尝试使用 libssh2 发送命令以连接到 CentOS 机器上的屏幕会话，（1）获取当前页面上的所有内容，然后（2）允许用户执行命令并获取这些命令的输出。

我已经探索了几种方法来完成这项工作，首先是连接屏幕会话，其次是向屏幕会话发送命令。

对于（1）我仍然不知道如何做到这一点。我正在寻找一个与我猜想的打印屏幕等效的 Shell，以便我可以在 PHP 中运行命令并获取输出并将其写入 PHP 输出。

对于（2），我尝试了以下各种排列：

```
screen -S `ls -1 /var/run/screen/S-root` -p 0 -X pwd 
```

尝试在屏幕会话中运行 pwd（假设只有一个正在运行），但没有返回任何输出，并且当手动连接到屏幕会话时，我没有看到我的命令运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T04:39:06.823

这是否符合您的要求？：

[http://phpseclib.sourceforge.net/ssh/examples.html#top](http://phpseclib.sourceforge.net/ssh/examples.html#top)

向下滚动到该页面的底部以查看更突出的示例。

# lucene.net - Lucene.Net 一步一步

> ID：13674188
> 
> 赞同：-1
> 
> 时间：2012-12-02T21:42:19.903
> 
> 标签：lucene.net

简要地说，我想要一个快速开始“逐步”使用 Lucene.Net 的示例。我的目标是在大量不同格式和不同语言的文档中搜索单词对的出现。但是现在，我想要第一步开始:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T00:52:09.220

请参阅此 SO 帖子以获取帮助您入门的良好资源：[Lucene.Net 入门资源？](https://stackoverflow.com/questions/2886456/resources-for-getting-started-with-lucene-net)

根据您要执行的操作，您可以选择按单词对进行搜索。如果您想搜索*john smith*并且只匹配*john smith*（不是*john blah blah smith*），那么您可以使用[PhraseQuery](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_3/api/all/org/apache/lucene/search/PhraseQuery.html)进行搜索。

# jquery - Oauth 的骨干网覆盖 collection.sync

> ID：13674189
> 
> 赞同：2
> 
> 时间：2012-12-02T21:42:28.490
> 
> 标签：jquery, backbone.js, oauth, yelp

我正在尝试将骨干用于本地项目，该项目永远不会看到真正的 Web 服务器，并且通过 AJAX 与 Yelp API 交互。Yelp API 要求我们使用 oauth 进行身份验证，并提供了[示例代码](https://github.com/Yelp/yelp-api/blob/master/v2/js/search.html)，我根据这些代码对自己的代码进行了建模。当我使用示例代码时，我没有遇到任何跨域问题或任何问题。但是，当我关闭浏览器安全选项时，我只会收到 400 错误响应。

我曾尝试按如下方式覆盖 fetch 方法：

```
fetch: function(options) {
  var accessor, message, parameterMap, parameters;
  if (!options) {
    options = {};
  }
  accessor = {
    consumerSecret: LOAF.auth.conserumerSecret,
    tokenSecret: LOAF.auth.accessTokenSecret
  };
  parameters = [];
  parameters.push(['oauth_consumer_key', LOAF.auth.consumerKey]);
  parameters.push(['oauth_consumer_secret', LOAF.auth.consumerSecret]);
  parameters.push(['oauth_token', LOAF.auth.accessToken]);
  parameters.push(['oauth_signature_method', 'HMAC-SHA1']);
  parameters.push(['location', "New York City"]);
  message = {
    'action': this.url,
    'method': 'GET',
    'parameters': parameters
  };
  OAuth.setTimestampAndNonce(message);
  OAuth.SignatureMethod.sign(message, accessor);
  parameterMap = OAuth.getParameterMap(message.parameters);
  parameterMap.oauth_signature = OAuth.percentEncode(parameterMap.oauth_signature);
  options.url = this.url;
  options.data = parameterMap;
  options.cache = true;
  options.dataType = 'json';
  options.success = this.onResponse;
  console.log("Attempting");
  console.log(options);
  return Backbone.Model.prototype.fetch.apply(this, options);
}, 
```

但这会产生 400 响应。我有一种感觉，因为我没有正确地进行 AJAX 调用，因为主干为我完成了大部分工作，并且可能会覆盖我正在设置的一些选项。我认为我需要做的是覆盖这个集合的“同步”方法，而不是只处理 OAuth 并自己解析响应。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:16:58.567

我不确定这是否是正确的做事方式，但它是这样工作的，所以这是我的解决方案。我覆盖了 fetch 并且从不调用默认的 fetch 方法。相反，我在 fetch 方法中进行了 ajax 调用，并有一个`onResponse`处理响应的方法，为响应创建模型（Yelp Businesses）。希望这可以帮助任何处于相同位置的人。

```
LOAF.YelpList = Backbone.Collection.extend({
  model: LOAF.Business,
  url: 'http://api.yelp.com/v2/search?',
  fetch: function(options) {
    var accessor, message, parameterMap, parameters;
    if (!options) {
      options = {};
    }
    accessor = {
      consumerSecret: LOAF.auth.consumerSecret,
      tokenSecret: LOAF.auth.accessTokenSecret
    };
    parameters = [];
    parameters.push(['callback', 'cb']);
    parameters.push(['oauth_consumer_key', LOAF.auth.consumerKey]);
    parameters.push(['oauth_consumer_secret', LOAF.auth.consumerSecret]);
    parameters.push(['oauth_token', LOAF.auth.accessToken]);
    parameters.push(['oauth_signature_method', 'HMAC-SHA1']);
    parameters.push(['location', "New York City"]);
    message = {
      'action': this.url,
      'method': 'GET',
      'parameters': parameters
    };
    OAuth.setTimestampAndNonce(message);
    OAuth.SignatureMethod.sign(message, accessor);
    parameterMap = OAuth.getParameterMap(message.parameters);
    parameterMap.oauth_signature = OAuth.percentEncode(parameterMap.oauth_signature);
    options.url = this.url;
    options.data = parameterMap;
    options.cache = true;
    options.dataType = 'jsonp';
    options.jsonpCallback = 'cb';
    options.success = this._onResponse;
    options.context = this;
    return $.ajax(options);
  },
  _onResponse: function(data, textStats, xhr) {
    debugger;
    var _this = this;
    return _.each(data.businesses, function(business) {
      var busModel;
      if (!_this.get(business.id)) {
        busModel = new LOAF.Business(business);
        return _this.add(busModel);
      }
    });
  }
}); 
```

有两点需要注意：

1.  初始代码本来可以工作，但 consumerSecret 拼写错误，导致 OAuth 调用不正确。这就是为什么我收到 400 错误。
2.  即使你解决了这个问题，也存在跨域调用的问题。切换到我使用的 AJAX 方法可以缓解这个问题。但是，可能存在一种方法来修复这个更原生于 Backbone 的问题。在我的项目的时间范围内，这是行不通的。

# hadoop - CDH 4.1：运行子错误：java.lang.OutOfMemoryError：Java 堆空间

> ID：13674190
> 
> 赞同：2
> 
> 时间：2012-12-02T21:42:33.577
> 
> 标签：hadoop, mapreduce, cloudera, hadoop-yarn

我试图克服突然出现的问题。在那个问题之前，我使用了旧的虚拟机。我已经下载了新的虚拟机，但仍然无法运行我的工作。我收到**Java 堆空间错误**。我已经读过这篇文章：[Hadoop 中的内存不足错误](https://stackoverflow.com/questions/8464048/out-of-memory-error-in-hadoop)

这是我来自 /etc/hadoop/conf 的配置：

*须藤 vi hadoop-env.sh*

```
# Extra Java runtime options.  Empty by default.
#export HADOOP_OPTS="-Djava.net.preferIPv4Stack=true $HADOOP_CLIENT_OPTS"
export HADOOP_CLIENT_OPTS="-Xmx256m $HADOOP_CLIENT_OPTS" 
```

这是我的*mapred-site.xml*

```
<property>
    <name>mapred.child.java.opts</name>
    <value>-Xmx256m</value>
  </property>
  <property>
    <name>io.sort.mb</name>
    <value>128</value>
  </property> 
```

没有什么帮助:(

这是控制台输出：

```
Deleted /var/log/hadoop-yarn/apps/cloudera/logs
12/12/02 16:31:45 INFO input.FileInputFormat: Total input paths to process : 1
12/12/02 16:31:45 INFO mapreduce.JobSubmitter: number of splits:13
12/12/02 16:31:45 WARN conf.Configuration: mapred.job.classpath.files is deprecated. Instead, use mapreduce.job.classpath.files
12/12/02 16:31:45 WARN conf.Configuration: mapred.jar is deprecated. Instead, use mapreduce.job.jar
12/12/02 16:31:45 WARN conf.Configuration: mapred.cache.files is deprecated. Instead, use mapreduce.job.cache.files
12/12/02 16:31:45 WARN conf.Configuration: mapred.output.value.class is deprecated. Instead, use mapreduce.job.output.value.class
12/12/02 16:31:45 WARN conf.Configuration: mapred.used.genericoptionsparser is deprecated. Instead, use mapreduce.client.genericoptionsparser.used
12/12/02 16:31:45 WARN conf.Configuration: mapreduce.map.class is deprecated. Instead, use mapreduce.job.map.class
12/12/02 16:31:45 WARN conf.Configuration: mapred.job.name is deprecated. Instead, use mapreduce.job.name
12/12/02 16:31:45 WARN conf.Configuration: mapreduce.reduce.class is deprecated. Instead, use mapreduce.job.reduce.class
12/12/02 16:31:45 WARN conf.Configuration: mapreduce.inputformat.class is deprecated. Instead, use mapreduce.job.inputformat.class
12/12/02 16:31:45 WARN conf.Configuration: mapred.input.dir is deprecated. Instead, use mapreduce.input.fileinputformat.inputdir
12/12/02 16:31:45 WARN conf.Configuration: mapred.output.dir is deprecated. Instead, use mapreduce.output.fileoutputformat.outputdir
12/12/02 16:31:45 WARN conf.Configuration: mapreduce.outputformat.class is deprecated. Instead, use mapreduce.job.outputformat.class
12/12/02 16:31:45 WARN conf.Configuration: mapred.map.tasks is deprecated. Instead, use mapreduce.job.maps
12/12/02 16:31:45 WARN conf.Configuration: mapred.cache.files.timestamps is deprecated. Instead, use mapreduce.job.cache.files.timestamps
12/12/02 16:31:45 WARN conf.Configuration: mapred.output.key.class is deprecated. Instead, use mapreduce.job.output.key.class
12/12/02 16:31:45 WARN conf.Configuration: mapred.working.dir is deprecated. Instead, use mapreduce.job.working.dir
12/12/02 16:31:46 INFO mapred.ResourceMgrDelegate: Submitted application application_1354455034384_0007 to ResourceManager at /0.0.0.0:8032
12/12/02 16:31:46 INFO mapreduce.Job: The url to track the job: http://localhost.localdomain:8088/proxy/application_1354455034384_0007/
12/12/02 16:31:46 INFO mapreduce.Job: Running job: job_1354455034384_0007
12/12/02 16:31:51 INFO mapreduce.Job: Job job_1354455034384_0007 running in uber mode : false
12/12/02 16:31:51 INFO mapreduce.Job:  map 0% reduce 0%
12/12/02 16:32:02 INFO mapreduce.Job: Task Id : attempt_1354455034384_0007_m_000005_0, Status : FAILED

Killed by external signal

12/12/02 16:32:15 INFO mapreduce.Job: Task Id : attempt_1354455034384_0007_m_000006_0, Status : FAILED
Error: Java heap space
12/12/02 16:32:19 INFO mapreduce.Job:  map 1% reduce 0%
12/12/02 16:32:29 INFO mapreduce.Job:  map 2% reduce 0%
12/12/02 16:32:29 INFO mapreduce.Job: Task Id : attempt_1354455034384_0007_m_000005_1, Status : FAILED
Error: Java heap space
12/12/02 16:32:36 INFO mapreduce.Job:  map 3% reduce 0%
12/12/02 16:32:40 INFO mapreduce.Job: Task Id : attempt_1354455034384_0007_m_000006_1, Status : FAILED
Error: Java heap space
12/12/02 16:32:43 INFO mapreduce.Job:  map 4% reduce 0%
12/12/02 16:32:51 INFO mapreduce.Job: Task Id : attempt_1354455034384_0007_m_000005_2, Status : FAILED
Error: Java heap space
12/12/02 16:32:53 INFO mapreduce.Job:  map 5% reduce 0%
12/12/02 16:33:00 INFO mapreduce.Job:  map 6% reduce 0%
12/12/02 16:33:03 INFO mapreduce.Job: Task Id : attempt_1354455034384_0007_m_000006_2, Status : FAILED
Error: Java heap space
12/12/02 16:33:07 INFO mapreduce.Job:  map 7% reduce 0%
12/12/02 16:33:15 INFO mapreduce.Job:  map 8% reduce 0%
12/12/02 16:33:15 INFO mapreduce.Job:  map 15% reduce 0%
12/12/02 16:33:15 INFO mapreduce.Job: Job job_1354455034384_0007 failed with state FAILED due to: 
12/12/02 16:33:15 INFO mapreduce.Job: Counters: 31
    File System Counters
        FILE: Number of bytes read=600
        FILE: Number of bytes written=349925
        FILE: Number of read operations=0
        FILE: Number of large read operations=0
        FILE: Number of write operations=0
        HDFS: Number of bytes read=105310577
        HDFS: Number of bytes written=0
        HDFS: Number of read operations=15
        HDFS: Number of large read operations=0
        HDFS: Number of write operations=0
    Job Counters 
        Failed map tasks=7
        Launched map tasks=12
        Other local map tasks=5
        Data-local map tasks=7
        Total time spent by all maps in occupied slots (ms)=597080
        Total time spent by all reduces in occupied slots (ms)=0
    Map-Reduce Framework
        Map input records=252675
        Map output records=15
        Map output bytes=992
        Map output materialized bytes=0
        Input split bytes=590
        Combine input records=0
        Spilled Records=0
        Failed Shuffles=0
        Merged Map outputs=0
        GC time elapsed (ms)=272051
        CPU time spent (ms)=112790
        Physical memory (bytes) snapshot=1094082560
        Virtual memory (bytes) snapshot=3678527488
        Total committed heap usage (bytes)=780533760
    File Input Format Counters 
        Bytes Read=105938372 
```

这是我的日志：

```
2012-12-02 16:36:13,072 INFO [main] org.apache.hadoop.metrics2.impl.MetricsSystemImpl: MapTask metrics system started
2012-12-02 16:36:14,405 INFO [main] org.apache.hadoop.mapred.YarnChild: Sleeping for 0ms before retrying again. Got null now.
2012-12-02 16:36:15,552 INFO [main] org.apache.hadoop.mapred.YarnChild: mapreduce.cluster.local.dir for child: /var/lib/hadoop-yarn/cache/yarn/nm-local-dir/usercache/cloudera/appcache/application_1354455034384_0008
2012-12-02 16:36:15,916 WARN [main] org.apache.hadoop.conf.Configuration: mapred.task.id is deprecated. Instead, use mapreduce.task.attempt.id
2012-12-02 16:36:15,919 WARN [main] org.apache.hadoop.conf.Configuration: mapred.task.is.map is deprecated. Instead, use mapreduce.task.ismap
2012-12-02 16:36:15,920 WARN [main] org.apache.hadoop.conf.Configuration: mapred.tip.id is deprecated. Instead, use mapreduce.task.id
2012-12-02 16:36:15,920 WARN [main] org.apache.hadoop.conf.Configuration: mapred.task.partition is deprecated. Instead, use mapreduce.task.partition
2012-12-02 16:36:15,921 WARN [main] org.apache.hadoop.conf.Configuration: mapred.local.dir is deprecated. Instead, use mapreduce.cluster.local.dir
2012-12-02 16:36:15,922 WARN [main] org.apache.hadoop.conf.Configuration: job.local.dir is deprecated. Instead, use mapreduce.job.local.dir
2012-12-02 16:36:15,922 WARN [main] org.apache.hadoop.conf.Configuration: mapred.cache.localFiles is deprecated. Instead, use mapreduce.job.cache.local.files
2012-12-02 16:36:15,922 WARN [main] org.apache.hadoop.conf.Configuration: mapred.job.id is deprecated. Instead, use mapreduce.job.id
2012-12-02 16:36:16,575 WARN [main] org.apache.hadoop.conf.Configuration: session.id is deprecated. Instead, use dfs.metrics.session-id
2012-12-02 16:36:18,332 INFO [main] org.apache.hadoop.mapred.Task:  Using ResourceCalculatorPlugin : org.apache.hadoop.yarn.util.LinuxResourceCalculatorPlugin@3582c132
2012-12-02 16:36:21,168 FATAL [main] org.apache.hadoop.mapred.YarnChild: Error running child : java.lang.OutOfMemoryError: Java heap space
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.<init>(MapTask.java:912)
    at org.apache.hadoop.mapred.MapTask$NewOutputCollector.<init>(MapTask.java:638)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:709)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:332)
    at org.apache.hadoop.mapred.YarnChild$2.run(YarnChild.java:152)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1332)
    at org.apache.hadoop.mapred.YarnChild.main(YarnChild.java:147)

2012-12-02 16:36:21,448 INFO [main] org.apache.hadoop.metrics2.impl.MetricsSystemImpl: Stopping MapTask metrics system...
2012-12-02 16:36:21,448 INFO [main] org.apache.hadoop.metrics2.impl.MetricsSystemImpl: MapTask metrics system stopped.
2012-12-02 16:36:21,448 INFO [main] org.apache.hadoop.metrics2.impl.MetricsSystemImpl: MapTask metrics system shutdown complete.
(&container_1354455034384_0008_01_000005�}stderr156WARNING: org.apache.hadoop.metrics.jvm.EventCounter is deprecated. Please use org.apache.hadoop.log.metrics.EventCounter in all the log4j.properties files.
stdout0syslog35152012-12-02 16:35:31,838 WARN [main] org.apache.hadoop.metrics2.impl.MetricsConfig: Cannot locate configuration: tried hadoop-metrics2-maptask.properties,hadoop-metrics2.properties
2012-12-02 16:35:32,283 INFO [main] org.apache.hadoop.metrics2.impl.MetricsSystemImpl: Scheduled snapshot period at 10 second(s).
2012-12-02 16:35:32,283 INFO [main] org.apache.hadoop.metrics2.impl.MetricsSystemImpl: MapTask metrics system started
2012-12-02 16:35:33,314 INFO [main] org.apache.hadoop.mapred.YarnChild: Sleeping for 0ms before retrying again. Got null now.
2012-12-02 16:35:34,339 INFO [main] org.apache.hadoop.mapred.YarnChild: mapreduce.cluster.local.dir for child: /var/lib/hadoop-yarn/cache/yarn/nm-local-dir/usercache/cloudera/appcache/application_1354455034384_0008
2 
```

接下来我可以尝试什么？请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T20:06:28.437

好的，看来问题已经解决了。这是我的 mapred-site.xml

```
<configuration>
  <property>
    <name>mapred.job.tracker</name>
    <value>0.0.0.0:8021</value>
  </property>

  <property>
    <name>mapreduce.framework.name</name>
    <value>yarn</value>
  </property>

  <property>
    <description>To set the value of tmp directory for map and reduce tasks.</description>
    <name>mapreduce.task.tmp.dir</name>
    <value>/var/lib/hadoop-mapreduce/cache/${user.name}/tasks</value>
  </property>

  <property>
    <name>jobtracker.thrift.address</name>
    <value>0.0.0.0:9290</value>
  </property>
  <property>
    <name>mapred.jobtracker.plugins</name>
    <value>org.apache.hadoop.thriftfs.ThriftJobTrackerPlugin</value>
    <description>Comma-separated list of jobtracker plug-ins to be activated.</description>
  </property>
  <property>
      <name>mapred.child.java.opts</name>
      <value>-Xmx512m</value>
  </property>
  <property>
      <name>io.sort.mb</name>
      <value>64</value>
  </property>
</configuration> 
```

这是我的 hadoop-env.sh：

```
export HADOOP_CLIENT_OPTS="-Xmx512m -XX:-HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/home/cloudera/heapdump $HADOOP_CLIENT_OPTS" 
```

我想问题在于应用的更改。只有重新启动对我有帮助。我试图重新启动服务 - 没有效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-26T19:39:49.593

也可以尝试将其设置`mapred.job.shuffle.input.buffer.percent`为 20%。默认情况下，这设置为 70%，如果您正在处理非常大的数据集，这可能会很多。

尝试在 mapred-site.xml 中设置此属性：

```
<property>
   <name>mapred.job.shuffle.input.buffer.percent</name>
   <value>0.20</value>
</property> 
```

有关更多性能调整，请参阅此文档：http: [//developer.amd.com.php53-23.ord1-1.websitetestlink.com/wordpress/media/2012/10/Hadoop_Tuning_Guide-Version5.pdf](http://developer.amd.com.php53-23.ord1-1.websitetestlink.com/wordpress/media/2012/10/Hadoop_Tuning_Guide-Version5.pdf)

希望有人觉得这很有用:)

# kendo-ui - Kendo UI - 将远程 jsonp 附加到模板

> ID：13674192
> 
> 赞同：1
> 
> 时间：2012-12-02T21:42:35.893
> 
> 标签：kendo-ui

我是剑道新手，遇到了一个问题。我正在尝试在我的剑道应用程序中添加一些远程 json，然后将其添加到模板/列表视图中。我可以在 chrome 开发工具网络选项卡和 console.log(this.view()); 中看到响应 在我的数据源更改方法中，我在控制台中获得了某种剑道代码，其中包含我的结果

![见截图](../Images/4000b16f21b13dee1a71f23406016063.png)

但我似乎无法将结果添加到我的模板中？这是我的代码，希望你能指出我正确的方向，因为我喜欢剑道，但需要解决这个问题才能继续前进……或者回到 jquery mobile。提前致谢。

```
<body onload="onBodyLoad()">

<!-- Home page -->
<div data-role="view" data-layout="default" id="home">
    <p>Home</p>
</div>

<div data-role="view" data-layout="default" id="search">
    <div class="form">
        <button id="getProperties" name="getProperties" value="Get Properties" data-role="button">Get Properies</button>
    </div>
    <ul id="resultListView"/>
</div>

<!-- Settings -->
<div data-role="view" data-layout="default" id="settings">
    <p>Some settings</p>
</div>

<!-- Layout -->
<section data-role="layout" data-id="default">
    <header data-role="header">
        <div data-role="navbar">My app</div>
    </header>
    <!--View content will render here-->
    <footer data-role="footer">
        <div data-role="tabstrip">
            <a data-icon="home" href="#home">Home</a>
            <a data-icon="search" href="#search">Search</a>
            <a data-icon="organize" href="#calculator">Calculator</a>
            <a data-icon="settings" href="#settings">Settings</a>       
        </div> 
    </footer>
</section>

<script src="js/jquery.min.js"></script>
<script src="js/kendo.all.min.js"></script>

<!-- Template for Property results, need to change below fields -->
<script type="text/x-kendo-template" id="propertiesListViewTemplate">
    <h4>${property_type}</h4>
    <p>${street_name}</p>
</script>

<script>
var app = new kendo.mobile.Application(document.body, 
{
    transition:'slide'
});

function onBodyLoad() {
    getProperties(onResult);
}

function getProperties(callback) {

    var template = kendo.template($("#propertiesListViewTemplate").html());

    var dataSource = new kendo.data.DataSource({
        transport: {
            read: {
                url: 'http://www.someurl.me/getproperties.php?postcode=hx59ay',
                dataType: "jsonp"
            }
        },

        schema: {
            data: "listing"
        },

        error: function(e) {
            console.log("Error " + e);
        },
        change: function() {
            $("#propertyResultListView").html(kendo.render(template, this.view()));
            console.log(this.view());
        }
    });
    dataSource.read();
    $("#propertyResultListView").kendoMobileListView({dataSource:dataSource,template: $("#propertiesListViewTemplate").html()});

}

function onResult(resultData) {
    console.log("Results " + listing); // This isnt getting logged in console...
    $("#propertyResultListView").kendoMobileListView({dataSource: kendo.data.DataSource.create({data:resultData}),
        template: $("#propertiesListViewTemplate").html()});
}

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T07:07:59.910

有几件事：

*   您没有 id="propertyResultListView" 的元素，但您使用它来创建列表视图。
*   如果您打算将数据源与 Kendo 小部件一起使用，您无需执行任何其他操作，只需指定它即可。例如，不需要手动处理更改事件和渲染模板 - 移动列表视图会自动完成。

[您可以在列表视图文档](http://docs.kendoui.com/getting-started/mobile/listview#binding-to-data)中找到更多信息。这里还有一些可能有帮助的演示：[http ://demos.kendoui.c​​om/mobile/listview/databinding.html](http://demos.kendoui.com/mobile/listview/databinding.html)

# c# - 从主页控制身份验证

> ID：13674193
> 
> 赞同：0
> 
> 时间：2012-12-02T21:42:42.523
> 
> 标签：c#, asp.net, oop, c#-4.0

我想在 asp.net 中控制用户身份验证。

假使，假设; 有两个来自 StackOverflow.aspx 和 Default.aspx 之类的网站。

我想使用以下代码获得经过身份验证的角色：

```
public List<Roles> GetAuthenticatedRolesByModuleName(string moduleName)
{
    //below I wrote psedeu code
    var roles = "Select * From SiteRoles Where ModuleName = "Admin";
    //...   
}
//This function returns a result set which includes roles authentication for `moduleName` parameter. 
```

我将使用当前登录系统的角色来控制它。

我想在 asp.net 的基本页面中这样做。

为了做到这一点，我做了一个`BasePage.cs`继承自`System.Web.UI.Page`. 我想将`GetAuthenticatedRolesByModuleName`函数写入`BasePage.cs`，当用户输入时，`StackOverflow.aspx`我想从`BasePage.cs`.

`StackOverflow.aspx`有页面加载事件，我想我必须控制`Init()`.

我用谷歌搜索并找到了一些来源，例如：[ASP.net“BasePage”类的想法](https://stackoverflow.com/questions/2064943/asp-net-basepage-class-ideas) ，但我并没有理解清楚。

我想从基本页​​面函数中获取角色（moduleName 是 stack-overflow --> `GetAuthenticatedRolesByModuleName(stack-overflow)`）并使用当前角色进行控制。如果用户未通过身份验证，我会将其重定向到`Default.aspx`.

```
Response.Redirect("Default.aspx"); 
```

我该怎么做？你能告诉我实现它的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:40:38.610

如果您使用`OnpreInit`或 制作一个基页以全局检查它，那么`OnInit`将是这样的：

```
public abstract class BasePage : System.Web.UI.Page
{
    protected override void OnPreInit(EventArgs e)
    {
        string cTheFile = HttpContext.Current.Request.Path;

        // here select what part of that string you won to check out
        if(!GetAuthenticatedRolesByModuleName(cTheFile))
        {
            // some how avoid the crash if call the same page again
            if(!cTheFile.EndsWith("Default.aspx"))
            {       
                Response.Redirect("Default.aspx", true);
                return ;
            }
        }

        // continue with the rest of the page
        base.OnPreInit(e);
    }
} 
```

但您也可以进行相同的检查并`global.asax`使用`Application_AuthenticateRequest`as：

```
protected void Application_AuthenticateRequest(Object sender, EventArgs e)
{
    // αυτό είναι το path...
    string cTheFile = HttpContext.Current.Request.Path;

    // here select what part of that string you won to check out
    if(!GetAuthenticatedRolesByModuleName(cTheFile))
    {
        // some how avoid the crash if call the same page again
        if(!cTheFile.EndsWith("Default.aspx"))
        {       
            Response.Redirect("Default.aspx", true);
            Response.End();

            return ;
        }
    }
} 
```

也许根据您的代码需要添加一些细节，但这是一般的想法。

# javascript - 谷歌地图 api 多个标记信息窗口仅显示最后一个元素

> ID：13674194
> 
> 赞同：2
> 
> 时间：2012-12-02T21:42:47.930
> 
> 标签：javascript, google-maps-api-3, google-maps-markers, infowindow

> **可能重复：**
> [带有 Infowindows 的 Google Maps API 多个标记](https://stackoverflow.com/questions/11106671/google-maps-api-multiple-markers-with-infowindows)

我正在为一个学校项目创建一个谷歌地图。作为一个 JavaScript 新手，我从网上找到的教程中获得了代码。我的问题是我有一组标记和多个信息窗口，但是每当你点击一个标记（不管是哪个），信息窗口只显示最后一个元素中的内容。现在我知道这个问题已经被多次提到了，不幸的是，我无法将其他帖子中提到的解决方案应用到我的工作中。

这里是地图的链接： [link to google maps](http://urloritdidnthappen.appspot.com/320001)

请让我知道如何解决我的问题。谢谢。

```
<html>
<head>
 <style>
    body { font-family: Helvetica; }
    .map-content h3 { margin: 0; padding: 5px 0 0 0; }
 </style>
 <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=true"/> 
 <script>
    // Set the Map variable
    var map;

    function initialize() {
        var myOptions = {
            zoom: 9,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        var all = [
            ["Location 1", "Summerdale Rd", "Elon", "NC",
            "27253", "36.150491", "-79.5470544"],
            ["Location 2", "7205 Olmstead Dr", "Burlington", "NC",
            "27215", "36.069974", "-79.548101"],
            ["Location 3", "W Market St", "Graham", "NC",
            "27253", "36.0722225", "-79.4016207"],
            ["Location 4", "Mt Hermon Rock Creek Rd", "Graham", "NC",
            "27253", "35.9826328", "-79.4165216"],
            ["Location 5", "415 Spring Garden St", "Greensboro", "NC",
            "27401", "36.06761", "-79.794984"]
            ];

        var infoWindow = new google.maps.InfoWindow;
        map = new google.maps.Map(document.getElementById('map_canvas'), myOptions);

        // Set the center of the map
        var pos = new google.maps.LatLng(36.0621881, -79.5101063);
        map.setCenter(pos);

        function infoCallback(infowindow, marker) {
            return function() {
                infowindow.open(map, marker);
            };
        }

        function setMarkers(map, all) {
            for (var i in all) {
                var name = all[i][0];
                var address = all[i][1];
                var city = all[i][2];
                var state = all[i][3];
                var zip = all[i][4];
                var lat = all[i][5];
                var lng = all[i][6];
                var latlngset;
                latlngset = new google.maps.LatLng(lat, lng);

    /*var marker = new google.maps.Marker({  
    map: map,  title: city,  position: latlngset  
    });*/

                var content = '<div class="map-content"><h3>' + name + '</h3>' + address + '<br />' + city + ', ' + state + ' ' + zip + '<br /><a href="http://maps.google.com/?daddr=' + address + ' ' + city + ', ' + state + ' ' + zip + '" target="_blank">Get Directions</a></div>';

    /*var infowindow = new google.maps.InfoWindow();
    for(var i=0; i<all.length; i++)
    {
    infowindow.setContent(content);
    google.maps.event.addListener(
    marker, 
    'click', 
    infoCallback(infowindow, marker)
    );

    }*/

                var infowindow = new google.maps.InfoWindow();

                for (var i = 0; i < all.length; i++) {
                    var marker = new google.maps.Marker({
                        map: map,
                        title: city,
                        position: latlngset
                    });

                    google.maps.event.addListener(marker, 'click', (function(marker, i) {
                        return function() {
                            infowindow.setContent(content);
                            infowindow.open(map, marker);
                        }
                    })(marker, i));
                }
            }
        }

        // Set all markers in the all variable
        setMarkers(map, all);
    };

    // Initializes the Google Map
    google.maps.event.addDomListener(window, 'load', initialize);
 </script>
 </head>

 <body>
    <div id="map_canvas" style="height: 100%; width: 100%;"></div>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-02T22:22:43.337

你可以试试这个

```
function initialize() {
    var myOptions = {
        zoom: 9,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var all = [
        ["Location 1", "Summerdale Rd", "Elon", "NC",
        "27253", "36.150491", "-79.5470544"],
        ["Location 2", "7205 Olmstead Dr", "Burlington", "NC",
        "27215", "36.069974", "-79.548101"],
        ["Location 3", "W Market St", "Graham", "NC",
        "27253", "36.0722225", "-79.4016207"],
        ["Location 4", "Mt Hermon Rock Creek Rd", "Graham", "NC",
        "27253", "35.9826328", "-79.4165216"],
        ["Location 5", "415 Spring Garden St", "Greensboro", "NC",
        "27401", "36.06761", "-79.794984"]
    ];
    var map = new google.maps.Map(document.getElementById('map_canvas'), myOptions);
    var infowindow = new google.maps.InfoWindow();
    for (var i = 0; i < all.length; i++) {
        var name = all[i][0], address = all[i][1], city = all[i][2],
        state = all[i][3], zip = all[i][4], lat = all[i][5], lng = all[i][6], 
        latlngset = new google.maps.LatLng(lat, lng);
        var content = '<div class="map-content"><h3>' + name + '</h3>' + address + '<br />' + city + ', ' + state + ' ' + zip + '<br /><a href="http://maps.google.com/?daddr=' + address + ' ' + city + ', ' + state + ' ' + zip + '" target="_blank">Get Directions</a></div>';
        var marker = new google.maps.Marker({
            map: map,
            title: city,
            position: latlngset
        });
        google.maps.event.addListener(marker, 'click', (function(marker, content) {
            return function() {
                infowindow.setContent(content);
                infowindow.open(map, marker);
            }
        })(marker, content));
    }

}
google.maps.event.addDomListener(window, 'load', initialize); 
```

# zend-framework2 - MasterSlaveFeature 操作方法

> ID：13674199
> 
> 赞同：4
> 
> 时间：2012-12-02T21:43:31.167
> 
> 标签：zend-framework2, zend-db, zend-db-table

我目前有使用 AbstractTableGateway 的 Db 模型，并且我的所有选择/插入/更新/删除查询都工作得很好。但现在我想添加 MasterSlaveFeature，我对如何做到这一点有点困惑。该文档并没有给出一个很好的例子：

[http://zf2.readthedocs.org/en/latest/modules/zend.db.table-gateway.html#tablegateway-features](http://zf2.readthedocs.org/en/latest/modules/zend.db.table-gateway.html#tablegateway-features)

我目前有这个设置：

```
namespace Login\Model;

use Zend\Db\TableGateway\Feature\MasterSlaveFeature;
use Zend\Db\TableGateway\Feature\FeatureSet;
use Zend\Db\TableGateway\AbstractTableGateway;
use Zend\Db\Sql\Select;
use Zend\Db\Sql\Expression;

class Passport extends AbstractTableGateway
{
public function __construct($adapter, $slave)
{
    $this->table = 'passport';

    $this->adapter = $adapter;

    $this->featureSet = new FeatureSet();
    $this->featureSet->addFeature(new MasterSlaveFeature($slave));

    $this->initialize();
}

public function Profile($employeeid)
{
    $result = $this->select(function (Select $select) use ($employeeid) {
        $select
            ->columns(array(
                'count' => new Expression('COUNT(*)'),
                'employeeid',
                'passwd',
                'group',
                'name',
                'status',
                'timezone',
                'timeformat',
                'locale',
                'max_search'
            ))
            ->where($this->adapter->getPlatform()->quoteIdentifier('employeeid') . ' = ' . $this->adapter->getPlatform()->quoteValue($employeeid))
            ->limit(1);
    });

    return $result->current();
} 
```

}

我传递了两个适配器 $adapter 和 $slave，每个都有相同的表，除了一个是空的，另一个实际上有数据。根据我应该工作的文档，但我觉得我在这里遗漏了一些东西，但不知道是什么。

$adapter 是有数据的主数据库 $slave 是没有数据的从数据库

我希望我的 SELECTS 从 $slave（当前没有数据）中获取数据，并且 Insert/Update/Delete 应该转到 $adapter。

有人可以帮我解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:33:06.387

更新：从 ZF 2.0.5 开始，有一个错误。配置正确。

更新：看起来这应该在 2.1 版本中解决

更新：我现在可以确认这已解决并在 2.0.7 和 2.1 中工作

# html - DotAll 和多行正则表达式

> ID：13674201
> 
> 赞同：4
> 
> 时间：2012-12-02T21:43:50.003
> 
> 标签：html, regex, powershell, powershell-3.0

我在 Powershell 中使用 Rexex 时遇到了一点麻烦。似乎有一个实施错误或什么的。

我要使用的文本是一个 html 文件，如下所示（Example1）：

```
<span>[Mobile: %mobile% |] Phone: %telephone% [| Fax: %faxNumber%]</span>
<Span> 
```

问题是，由 html 编辑器引起的，我也可能会得到这样的东西（Example2）：

```
<span>[Mobile: 

%mobile% |] Phone: %telephone% [| Fax: &nbsp;&nbsp;%faxNumber%]</span> 
```

如您所见，我们得到了换行符和 html 转义、固定空格`&nbsp;`。

我的 Powershell 正则表达式如下所示：

```
$x = $x -ireplace '(?ms)\[(.?){7}Fax(.*?)\]', 'MyReplacement1' 
```

还有这个

```
$x = $x -ireplace '(?ms)\[(.?){7}Mobile(.*?)\]', 'MyReplacement2' 
```

基本上**[**标记变量的开头，**]**标记变量的结尾。由此产生两个问题：

1.  由于我们有两个变量，移动和传真，我`(.?){7}`用来允许一些（这里正好是 7 个）字符并避免匹配*第一个 [ 靠近**Mobile***和*最后一个 ] 靠近**Fax***之间的孔部分（如果我会使用会发生这种情况）`(.*?)`而不是`(.?){7}`）。我不确定是否有替代方法，例如，我可以在起始 [ 和变量关键字“Fax”之间允许任意数量（而不是 7 个）字符。当添加诸如此类的内容时，这对于避免不匹配很有用`&nbsp;&nbsp;`（其中只有 7 个字符是不够的，就像我说的那样`(.*?)`会失败）。希望我能够解释它（有点难） - 如果没有：请随时提问！
2.  Powershells -replace 方法不提供设置正则表达式选项的方法，因此我必须使用 (?ms) 来设置 DotAll 和多行模式。如您所见，我在我的正则表达式模式中使用它。但是：当添加换行符时，***正如您在示例 2*****中的Mobile:**和**%mobile%**之间看到的那样，正则表达式失败并且没有任何内容被替换！

我非常感谢专业人士的任何帮助甚至正则表达式建议，以避免我现在没有考虑的任何进一步问题......

编辑：（示例 3）：

```
<span>[Mobile: 

%mobile% |] Phone: %telephone% [| Fax: 
%faxNumber%]</span> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-02T21:49:28.597

DotAll 模式的诀窍是使用`[\s\S]`而不是`.`. 这个字符类匹配**任何**字符（因为它匹配空格和非空格字符）。（与`[\w\W]`or一样`[\d\D]`，但空格似乎是一种约定。）

为了解决这个问题，`7`您可以简单地禁止`]`在您真正想要匹配的那个之前关闭（顺便说一下，这也使得 DotAll 变得不必要）。所以这样的事情应该适合你：

```
\[([^\]:]*)Fax([^\]]*)\] 
```

它看起来有点难看，但它只是意味着：

```
\[        # literal [
(         # capturing group 1
  [^\]:]* # match as many non-:, non-] characters as possible
)         # end of group 1
Fax       # literal Fax
(         # capturing group 2
  [^\]]*  # match as many non-] characters as possible
)         # end of group 2
\]        # literal ] 
```

[进一步阅读字符类。](http://www.regular-expressions.info/charclass.html)

请注意，这些模式`m`都不需要多行模式（你的和我的都不是），因为它所做的只是分别制作`^`和`$`匹配行的开头和结尾。但是没有一个模式包含这些元字符。所以修饰符不做任何事情。

我的控制台输出：

```
PS> $x = "<span>[Mobile: %mobile% |] Phone: %telephone% [| Fax: &nbsp;&nbsp;%faxNumber%]</span>"
PS> $x -ireplace '\[([^\]:]*)Mobile([^\]]*)\]', 'MyReplacement1'
<span>MyReplacement1 Phone: %telephone% [| Fax: &nbsp;&nbsp;%faxNumber%]</span>
PS> $x -ireplace '\[([^\]:]*)Fax([^\]]*)\]', 'MyReplacement2'
<span>[Mobile: %mobile% |] Phone: %telephone% MyReplacement2</span> 
```

# ajax - 在 ajax 或 jquery 中读取外部网页的源代码（没有 yql+JSON / 没有 php / 没有 iframe）

> ID：13674202
> 
> 赞同：3
> 
> 时间：2012-12-02T21:43:57.657
> 
> 标签：ajax, proxy, jquery-load, http-redirect

我想用 ajax 或 jquery 阅读 www.google.com 的 html 源代码（我不只是想显示源代码，我需要解析它，所以有 xmlhttp.responseText 很好）。

[读取外部网页的内容并获取特定元素](https://stackoverflow.com/questions/10430037)有一个很好的方式在服务器端使用 php [Javascript 可以读取任何网页的源代码吗？](https://stackoverflow.com/questions/680562)如果您尝试阅读本地域的页面，那就太好了

yql+JSON 是一种可能，如上所述，但看起来很慢而且开销很大

我更喜欢ajax，因为我不需要加载90k jquery lib，据我所知......

```
var xmlhttp=null;
var url = 'bot.html?url=http://google.com';  //must redirect in bot.html
//var url='http://www.google.com';  wont work, 0 xmlhttp.status error
if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();  //src says buggy for IE7
} else {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}

xmlhttp.open("GET",url,true);
xmlhttp.send(null);

xmlhttp.onreadystatechange=function() {
 if (xmlhttp.readyState==4 && xmlhttp.status==200) {
    document.getElementById("result").innerHTML= xmlhttp.responseText;
 }
} 
```

和jquery差不多...

```
$("#result").load(url); 
```

其他提到的stackoverflow中未提及的是如何处理 ?url= 。我做了（保留所有js）......

```
bot.html:
<head>
<script type="text/javascript">
var vars = query.split("&"); 
var pair = vars[0].split("=");
if (pair[0]=='url') {  // ex bot.html?url=http://www.google.com
    alert('hi '+pair[1]);
    window.location = pair[1];
    //top.location.href=pair[1];  or
}
</script>
... above jquery or ajax ...
<div id="result">Fill Me</div> 
```

所有这一切都适用于本地页面 var url='index.php' （没有重定向），但是，这些都不适用于外部链接，如 google.com，我似乎无法 var url='google.com'如果我尝试代理（如 jquery 所逃避的那样，没有示例，在上面提到的 stackoverflow 中）它会加载 bot.html （本身）的源（从不执行警报或重定向），我认为这是有道理的，因为它是加载，不做。我想我可以对 ajax 使用相同的代理技巧。

尝试通过 .htaccess 重定向/代理不适合此应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T21:59:09.367

我看不到您要使用问题中的第二段代码（从`bot.html`下往上）来完成什么。

但！我想我有一个解决方案给你。您可能遇到了同源策略（[维基百科](http://en.wikipedia.org/wiki/Same_origin_policy)或[MDN](https://developer.mozilla.org/en-US/docs/Same_origin_policy_for_JavaScript)文档），该策略基本上指出 XMLHttpObjects 不能向最初提供服务的域以外的域发出请求。这背后的想法是，如果在浏览器级别（换句话说，在比 JS 运行时本身更高的权限）没有这样的强制执行，外部脚本很容易通过更改提出此类请求的域或参数。

解决方法是改用脚本标签。[这是我从jQuery 源](http://code.jquery.com/jquery-1.8.3.js)代码中改编的一些代码（搜索“DOMContentLoaded”以获得相关部分）来做到这一点。我也不想包含整个 jQuery 库来发出跨域 Ajax 请求 - 我们正在测试客户端操作的速度，并且一些测试目标已经不需要 jQuery，因此包含它会扭曲测试.

```
function saveTime() {
    var s = document.createElement("script"), h = document.head || document.getElementsByTagName("head")[0] || document.documentElement;
    s.async = "async";
    s.type = "text/javascript";
    s.onreadystatechange = function(result) {
        // callback function
        // Append the result into the inner HTML here
    };
    s.src = url;
    h.insertBefore(s, h.firstChild);
} 
```

这应该可以满足您的需求，但您可能需要调整`type`属性以获取原始/完整的 HTML 内容。它将`<script>`带有您指定的源的标签附加到标签`url`的开头`<head>`（或正文，对于非常旧的 IE 版本）。我没有调整清理代码。如果您查看 jQuery 源代码，您会发现它们实际上有额外的处理程序，用于在请求完成或失败后从 DOM 中删除标记。

# php - AJAX 请求 INSERT 和 UPDATE 不起作用

> ID：13674212
> 
> 赞同：0
> 
> 时间：2012-12-02T21:45:15.603
> 
> 标签：php, jquery, ajax, json, mysqli

有人可以告诉我为什么这个 AJAX Post 请求不起作用。发送的默认 listId 为 0。 savedList 由 ListJSON 和 ListName 组成。代码如下。

```
$.post('save.php', {"id":listId, "list":JSON.stringify(savedList), 
function(savedListId) {
    listId = savedListId;
    alert('List saved');
    // Refresh to a) get out of edit mode and b) give a bookmarkable URL
    window.location = 'list.html?id='+listId;
}); 
```

服务器端如下：

```
if(empty($_POST['list'])) {
header('HTTP/1.0 400 Bad Request', true, 400);
exit('No list sent');
}

if( ! $decodedList = json_decode($_POST['list'])) {
header('HTTP/1.0 400 Bad Request', true, 400);
exit('List does not decode');
}

if(empty($_POST['id']) || $_POST['id']=="null") {
$sql = "INSERT INTO Lists SET ListJSON = ?, ListName = ?";
$query = $mysqli->prepare($sql);
$query->bind_param("ss", $_POST['list'], $decodedList->listName); 
$query->execute();

header('Content-type: application/json');
exit('"'.$mysqli->insert_id.'"');
} else {
$sql = "UPDATE Lists SET ListJSON = ?, ListName = ? WHERE ListID = ?";
$query = $mysqli->prepare($sql);
$query->bind_param("ssi", $_POST['list'], $decodedList->listName, $_POST['id']);

$query->execute();

header('Content-type: application/json');
exit('"'.(int)$_POST['id'].'"');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T18:45:04.530

尝试`(int)`在`$_POST['id']`. 我相信 javascript 将 id 作为字符串发送，但您正在尝试使用 mysqli 将其更新为 int。

# jquery - 发送数组时的jquery和ajax

> ID：13674215
> 
> 赞同：1
> 
> 时间：2012-12-02T21:45:48.763
> 
> 标签：jquery, ajax

我在 jQuery 中创建了一个函数，它将获取一些数据表单页面，然后它需要使用 ajax 发送数据。我已经测试过发送一些字符串作为数据并且一切正常，但是现在，当我出于某种原因需要发送数组时它不起作用。在控制台上我有：

```
["3"]
[] 
```

而且我没有警觉。数据类型可能有问题吗？

```
$("#save").click(function() {
   var sendArr= new Array();
   var arr = $(".sortable").map(function(){return this.innerHTML}).get();        
   for (var i = 0; i < arr.length; i++) {

       test =$(arr[i]).map(function() {  return $(this).attr("data-ex");    });
       console.log(test);
       sendArr[i]=test;
   }

        $.ajax({
      type: "POST",
      url: "http://localhost/someurl/",
      data:  {action:  sendArr}
    }).done(function( msg ) {
          alert( "Data Saved: " + msg );
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T21:53:30.060

gogic - 制作一个更简单的示例进行测试，然后从中构建。

```
$(function() {

var serialized = JSON.stringify({"msg" : "Hello!"});
$.ajax({
    url: myURL,
    type: 'POST',
    data: serialized,
    contentType: 'json',
    dataType: 'html'
}).done(function(obj) {
    $('div').html(obj.msg);
}).fail(function() {
    alert('Failed!');
});

}); 
```

dataType 是您期望收到的；contentType 是您要发送的内容。您的 JSON 必须使用 JSON.stringify(obj) 进行序列化。

此外，当您将数组作为 JSON 发送时，它应该如下所示：

```
var array_json = {"myArray" : [1, "example", 2, "array"]}
var serialized = JSON.stringify(array_json) 
```

使用 console.log 确保您创建的 JSON 有效。

# tridion - 使用 Tridion Anguilla 框架获取多媒体组件字节数组？

> ID：13674221
> 
> 赞同：7
> 
> 时间：2012-12-02T21:46:15.330
> 
> 标签：tridion

是否可以使用 Anguilla JavaScript API 获取存储在 Tridion 中的图像的字节数组？我想在 GUI 扩展弹出窗口中显示图像。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T22:09:51.910

我能想到的最简单的方法是使用这样的 URL 加载 MMC：

```
http://<hostname>/WebUI/Editors/CME/icon.png?uri=tcm:2-1151 
```

如果你使用这种方法，字节的实际加载与 Tridion 无关：你只是从 URL 加载图像。

你可能想用 JavaScript 构建 URL，所以从这样的东西开始（我无耻地从源代码中复制了它）：

```
p.multimediaUrl = $display.getMultimediaHandlerPath() + "?uri={0}"; 
```

## 更新

像往常一样，Mozilla Developer Connection 有一个很好的[例子来使用 XMLHttpRequest 加载二进制数据](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest#Handling_binary_data)。应用于这种情况，我似乎使用以下代码段获取数据：

```
var arraybuffer;
var xhr = new XMLHttpRequest();
xhr.open("GET", $display.getMultimediaHandlerPath() + '?uri==tcm%3A2-1151', true);
xhr.responseType = "arraybuffer"; 
xhr.onload = function(e) {
  arraybuffer = xhr.response; // not responseText
}
xhr.send(); 
```

# c++ - 如何让 Vim 突出显示 Visual Studio 等 C++ 语法错误？

> ID：13674223
> 
> 赞同：22
> 
> 时间：2012-12-02T21:46:16.557
> 
> 标签：c++, vim, syntax-error, syntax-highlighting

是否可以让 gVim 像 Visual Studio 一样实时突出显示 C++ 语法错误（下面的红色曲线）？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-03T07:55:39.947

简短的回答：是的，但它不会像在 IDE 中那样流畅/直接。

长答案：虽然 IDE 具有对一组（通常非常有限）编程语言的内置支持（和解析器等），但 Vim 是一个通用编辑器，因此必须依赖外部工具来进行语法检查. 内置方法是执行`:make`并接收*quickfix list*中的（语法或编译器）错误列表。有插件可以自动化；[Syntastic](http://www.vim.org/scripts/script.php?script_id=2736)是一种非常流行的工具，支持多种语言。

但是，由于 Vim 必须调用外部可执行文件并且几乎不支持异步运行任务，所以在您看到错误之前会有更多延迟。如果你离不开 IDE 的功能，那么两者都可以根据各自的优势使用：Vim 用于超高效的文本编辑，IDE 用于代码导航、调试和编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-20T00:46:07.717

VIM 多年来对我来说很好，但是当我意识到这个编辑器有多么有用以及用更多功能扩展这个编辑器是多么容易时，我转向了 Sublime Text 3。

现在，我在 Sublime Text 中编辑并在同一个应用程序中编译。我制作了一个语法荧光笔，以更好的方式显示错误，如果您单击错误，它会将您带到错误发生的地方。

遵循这些步骤，用 C++ 编写代码会比以前简单得多。

因此，在安装 sublime_text 并在获得文件夹后运行它之后`~/HOME/.config/sublime-text-3/`。如果您不熟悉 sublime_text，可以说您可以将修改添加到此文件夹 `~/HOME/.config/sublime-text-3/Packages/User`中。让我们从现在开始调用这个文件夹`$SUBLIME_CONFIG_DIR`。我将在这里向您展示的是如何为 C++ 添加构建系统以及如何**语法高亮**输出。

# 设置构建系统

通过添加一个名为`c++build.sublime-build`to的文件来创建您的构建系统，该文件`$SUBLIME_CONFIG_DIR`具有以下内容：

```
{
  "shell" : true,
  "cmd": ["make $file_base_name"],
  "file_regex": "^(..[^:]*):([0-9]+):?([0-9]+)?:? (.*)$",
  "selector": "source.c++",
  "working_dir": "${file_path}",
  "syntax" : "Packages/User/c++output.tmLanguage"
} 
```

我将解释每一行的作用。1.`"shell":true`简单地说，如果你在文件上调用 build，sublime 应该运行一个 shell 命令。2.`cmd`将在调用构建时执行。您可以使用 g++ 或其他任何东西来代替 make。我放在这里的这个构建配置是一个起点，你可以修改它并让它做你想做的事。3.`selector`告诉 sublime 哪些文件将自动使用此构建（在本例中为所有 c++ 文件） 4.`workig_dir`我将其设置为当前目录以使其更容易 5.`syntax`当您构建文件时，输出将在输出视图中显示为纯文本没有语法高亮。在这里，我将使用`C++output.tmLanguage`稍后将解释的文件，它可以帮助您获得更好的突出显示的输出，以便于调试。6.`file_regex`匹配输出中的错误行，如果有错误，双击错误，它会将您带到相应的文件。

# 添加新语法

有多种方法可以向 sublime 添加新的语法荧光笔。你可以使用JSON，然后将其转换为PList，你可以直接使用PList。为简单起见，只需将以下内容复制到名为`c++output.tmLanguage`. Sublime Text 在应用程序启动时自动选择 tmLanguage 文件以突出显示文件。

内容应如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
  <key>fileTypes</key>
  <array>
    <string>ssraw</string>
  </array>
  <key>name</key>
  <string>Mazanin</string>
  <key>patterns</key>
  <array>
    <dict>
      <key>match</key>
      <string>\b(error)\b</string>
      <key>name</key>
      <string>invalid.illegal</string>
    </dict>
    <dict>
      <key>match</key>
      <string>(warning|instantiation|note|required|candidate)</string>
      <key>name</key>
      <string>markup.quote</string>
    </dict>
    <dict>
      <key>match</key>
      <string>^.*:[0-9]+</string>
      <key>name</key>
      <string>support.variable.mazanin</string>
    </dict>
    <dict>
      <key>begin</key>
      <string>\[</string>
      <key>beginCaptures</key>
      <dict>
        <key>0</key>
        <dict>
          <key>name</key>
          <string>punctuation.definition.mazanin</string>
        </dict>
      </dict>
      <key>end</key>
      <string>\]</string>
      <key>endCaptures</key>
      <dict>
        <key>0</key>
        <dict>
          <key>name</key>
          <string>punctuation.definition.mazanin</string>
        </dict>
      </dict>
      <key>name</key>
      <string>comment.mazanin</string>
      <key>patterns</key>
      <array>
        <dict>
          <key>match</key>
          <string>\\.</string>
          <key>name</key>
          <string>source.mazanin</string>
        </dict>
      </array>
    </dict>
    <dict>
      <key>begin</key>
      <string>\(</string>
      <key>beginCaptures</key>
      <dict>
        <key>0</key>
        <dict>
          <key>name</key>
          <string>punctuation.definition.mazanin</string>
        </dict>
      </dict>
      <key>end</key>
      <string>\)</string>
      <key>endCaptures</key>
      <dict>
        <key>0</key>
        <dict>
          <key>name</key>
          <string>punctuation.definition.mazanin</string>
        </dict>
      </dict>
      <key>name</key>
      <string>storage.mazanin</string>
      <key>patterns</key>
      <array>
        <dict>
          <key>match</key>
          <string>\\.</string>
          <key>name</key>
          <string>source.mazanin</string>
        </dict>
      </array>
    </dict>
  </array>
  <key>scopeName</key>
  <string>source.cerr</string>
  <key>uuid</key>
  <string>ca03e751-04ef-4330-9a6b-9b99aae1c418</string>
</dict>
</plist> 
```

请记住将上面的 uuid（字符串）替换为唯一的 uuid。但是你怎么得到一个。打开 sublime-console 并输入以下内容：

```
import uuid
uuid.uuid4() 
```

现在你基本上完成了。打开您的 c++ 文件，在其上调用 build，您应该能够看到错误突出显示且可单击，如下所示（我使用 Dawn 主题）。

![这是一个简单程序的示例输出，该程序因错误行换行而失败](../Images/7a3ef5f485776a3259bb807da47ed579.png)

我个人更喜欢包装输出错误的行并快速解开它们，所以我在我的键盘映射中添加了这个快捷方式，`$SUBLIME_CONFIG_DIR/Default (Linux).sublime-keymap`其中说：

```
[
  {
    "keys": ["ctrl+shift+l"], "command": "toggle_setting", "args": {"setting": "word_wrap"}
  }
] 
```

现在，如果您按下`ctrl+shift+l`，您可以简单地包装/解包输出这在大多数错误很长且信息无用的情况下更有用。上面没有包装的例子看起来像：

![错误行未换行](../Images/3f97eeb94d5b8d60cdd3fd2b7cb1e817.png)

# 使用 YAML

你也可以使用 YAML 来描述你的语法高亮规则，这样更简洁，更容易修改。但是，您需要`PackageDev`在 sublime 上安装才能使用 YAML 语言。将以下文件放入您的`$HOME/.config/sublime-text-3/Packages/User`并用 sublime 打开它。按下`F7`，将为您生成语法文件。

```
# [PackageDev] target_format: plist, ext: tmLanguage
---
name: C++ Error Output
scopeName: source.boo
fileTypes: [boo]
uuid: 45319b4d-90f8-4ff1-9a66-c56ed5c408a4

patterns:
- include: '#pars'
- include: '#bracs'
- include: '#anglebracs'
- include: '#quotes'
- include: '#curlies'
- match: \b((e|E)rror)\b
  name: invalid.illegal
- match: (warning|instantiation|note|required|candidate)
  name: markup.quote
- match: ^[^\:\s]*(?=:)
  name: support.variable
- match: (?<=:)[0-9]+
  name: keyword.control

repository:
  bracs:
    name: markup.quote
    begin: \[
    beginCaptures:
      '0': {name: keyword}
    end: \]
    endCaptures:
      '0': {name: keyword}
    patterns:
    - include: $self
    - include: anglebracs
    - include: pars
  pars:
    name: variable.parameter
    begin: \(
    beginCaptures:
      '0': {name: keyword}
    end: (\)|$)
    endCaptures:
      '0': {name: keyword}
    patterns:
    - include: $self
    - include: anglebracs
  anglebracs:
    name: markup.raw
    begin: (?<!<)\<(?!\<)
    beginCaptures:
      '0': {name: keyword}
    end: \>
    endCaptures:
      '0': {name: keyword}
    patterns:
    - include: $self
    - include: pars
  quotes:
    name: markup.heading
    begin: ‘
    beginCaptures:
      '0': {name: keyword}
    end: ’
    endCaptures:
      '0': {name: keyword}
    patterns:
    - include: $self
    - include: anglebracs
    - include: pars
    - include: bracs
  curlies:
    name: markup.list
    begin: \{
    beginCaptures:
      '0': {name: keyword}
    end: \}
    endCaptures:
      '0': {name: keyword}
    patterns:
    - include: $self
    - include: anglebracs
    - include: pars
    - include: bracs
... 
```

[您可以在此处](http://manual.macromates.com/en/language_grammars)找到颜色名称列表

# java - 查找设置位的索引

> ID：13674224
> 
> 赞同：0
> 
> 时间：2012-12-02T21:46:25.347
> 
> 标签：java, bit-manipulation

这可能很简单，但我是位操作新手。我有一串位（比如警报字符串），我想找到其中所有 1 的索引号，以便我可以返回相关的警报或错误代码。例如，如果 alarm_string = 1011000 那么我的方法应该返回 3,4 和 6。如何使用位操作来做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:54:19.020

此方法应将您的位字段转换为设置位位置列表：

```
List<Integer> setBits(int in) {
  final List<Integer> setBits = new ArrayList<>();
  for (int i = 0; in != 0; i++, in >>= 1)
    if (i & 0 == 1) setBits.add(i);
  return setBits;
} 
```

如果您的输入只是一个字符串，那么问题真的很简单。

```
List<Integer> setBits(String in) {
  final List<Integer> setBits = new ArrayList<>();
  for (int i = in.length()-1, j = 0; i >= 0; i--, j++)
    if (in.charAt(i) == '1') setBits.add(j);
  return setBits;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T21:56:13.140

[`BitSet`](http://docs.oracle.com/javase/7/docs/api/java/util/BitSet.html)在幕后进行位操作。首先将 转换`String`为[`BitSet`](http://docs.oracle.com/javase/7/docs/api/java/util/BitSet.html). 然后，用于[`nextSetBit`](http://docs.oracle.com/javase/7/docs/api/java/util/BitSet.html#nextSetBit%28int%29)查找 1：

```
BitSet bs = new BitSet(inputString.length());

for (int i = 0; i < inputString.length(); ++i) {
  if (inputString[i] == '1') {
    bs.set(i);
  }
}

List<Integer> ones = new ArrayList<>();

 for (int i = bs.nextSetBit(0); i >= 0; i = bs.nextSetBit(i+1)) {
     ones.add(i);
 }

return ones; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T21:56:38.327

```
String bits = "1011000";

List<Integer> indices = new ArrayList<Integer>();

for(int i = bits.lenght()-1; i>=0; i--){
   if(bits.charAt(i).equalsIgnorCase("1")){
      indices.add(bits.lenght()-i);
   }
}equalsIgnoreCase 
```

# php - 从 Laravel Routes.php 调用控制器函数

> ID：13674226
> 
> 赞同：5
> 
> 时间：2012-12-02T21:46:34.800
> 
> 标签：php, post, controller, laravel

我`Orders_Controller`在 Laravel 中有一个名为 getOrders($user) 的函数。它调用原始数据库查询并构建一个 JSON 数组以返回。

我无法弄清楚如何从我的路由文件中调用此函数。

基本上我在路由中收到一个 POST，插入新订单，然后我想从此 Routes 函数调用 getOrders(user) 以获取给定用户的所有现有订单。

有人可以帮我弄清楚如何从 Routes.php 中调用这个函数吗？

路由.php

```
//Handle a new order POST
Route::post('order', array('do' => function() {
    ...
    ... //HANDLE POST DATA AND INSERT NEW ORDER
    ...

    //GET ALL ORDERS FOR THIS USER FROM ORDER CONTROLLER
    $userOrders = Order_Controller::myOrders($thisUser);
} 
```

order.php（在 Controllers 文件夹中）

```
class Order_Controller extends Base_Controller
{
    public function myOrders($user){
        return DB::query("SELECT ...");
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T22:07:21.353

正如 larauser 所建议的，您可以将 myOrders() 方法移动到模型并静态调用它。这是一个例子

```
class Order extends Eloquent {

    public static function myOrders($user)
    {
         // DB call here
    }
} 
```

然后在你的路线上你可以做

```
Route::post('order/(:num)', function($user)
{
    $userOrders = Order::myOrders($user);

    // Do stuff here
}); 
```

我猜你正在传递用户 ID，这就是我在路由中使用 (:num) 的原因。

希望有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T12:11:29.467

我使用了另一种方法，可能不正确，但它可能对您有用。

```
$userOrders = Controller::call('order@myOrders', array($thisUser))->content 
```

有关更多信息以及如何使用它，请查看[Controller 类](http://laravel.com/api/source-class-Laravel.Routing.Controller.html#117)的文档。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T21:57:17.820

myOrders 函数可能应该进入您的订单模型，因为它使用数据访问。然后，要调用它，您需要执行 Orders::myOrders($user)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-04T18:59:16.247

更简单的方法是将控制器作为类调用

```
Route::post( 'post', function() use ($user) {
  return (new OrderController)->myOrders($user);
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-02T22:10:29.813

路由.php

```
//Handle a new order POST
Route::post('orders/(:num)', function($user) {
    ...
    ... //HANDLE POST DATA AND INSERT NEW ORDER
    ...
});

Route::get('orders', function($user) {
   //GET ALL ORDERS FOR THIS USER FROM ORDER MODEL
   $userOrders = Order::myOrders($user)->get();
}); 
```

应用程序/模型/Order.php

```
class Order extends Eloquent
{
    public static function myOrders($user_id)
    {
        return Order::where_user_id($user_id);
    }
} 
```

# objective-c - 每次我“重玩”游戏时都会出现“幽灵”图像

> ID：13674231
> 
> 赞同：-2
> 
> 时间：2012-12-02T21:46:57.700
> 
> 标签：objective-c, ios, cocoa-touch

我正在创建一个游戏，其中物体从天上掉下来，用户必须用底部的可移动篮子图像来捕捉。当物体与篮子相交时，物体就消失了。

我还为用户提供了在第一轮之后重播的选项（带有游戏的 ViewController 通过情节提要 segue 重新加载）。问题是重播似乎保留了我上次玩游戏时离开篮筐的最后一个位置的隐形“幽灵”图像/占位符。

不知何故，我的篮子 CGRect 框架的最后一个位置被保存了。有什么方法可以在每次游戏重播之间删除它吗？

编辑：通过重新加载，我的意思是在游戏中的某个点之后，我启动了一个场景转换（我从一个 UIViewController 转到另一个）。然后，我在按下按钮后回到原来的 UIViewController。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T22:02:02.663

你错过了给我们代码，所以这个答案只能是热门。

删除篮子的最后一个位置`-viewWillApear:`

# post - 如何将此数据发布到 http 服务器？

> ID：13674237
> 
> 赞同：0
> 
> 时间：2012-12-02T21:47:54.193
> 
> 标签：post

为了控制我正在使用的 Web 服务，我需要发送以下数据的 POST 请求。当有点击事件或按钮按下时，我如何将其格式化为发送 POST 请求的 html？

```
 <sci_request version="1.0">
  <data_service>
    <targets>
      <device id="00000000-00000000-90A2DAFF-FF050000"/>
    </targets>
    <requests>
      <device_request target_name="myTarget"> 
        my payload string
      </device_request>
   </requests>
  </data_service> 
```

这是我尝试执行的 jquery 代码：

```
$('#button1').click(function(){$.post('--SERVER--', {--THE POST OF INFO FROM ABOVE--});}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-17T12:20:22.690

您可以选择一个 HTML 节点并将其代码作为字符串使用`.html()`（不包括父节点本身）。然后使用 . 将其转换为 XML 文档`$.parseXML()`。

请注意，未闭合的节点`sci_request`是有问题的，应该有一个闭合元素。如果缺少，jQuery 将无法解析为 XML。您可以通过解析完整 XML 结构的字符串而不是将其放在用户的 HTML 文档中来规避整个问题。

[http://jsfiddle.net/Cn3Pv/](http://jsfiddle.net/Cn3Pv/)

# c++ - 如何在 ubuntu 12.10 中隐藏 g++ c++11 编译警告

> ID：13674241
> 
> 赞同：3
> 
> 时间：2012-12-02T21:48:24.340
> 
> 标签：c++, ubuntu, c++11, g++, warnings

当我执行

```
g++ main.cpp 
```

我得到输出

```
main.cpp:9:17: warning: non-static data member initializers only available with -std=c++11 or -std=gnu++11 [enabled by default]
main.cpp:10:15: warning: non-static data member initializers only available with -std=c++11 or -std=gnu++11 [enabled by default]
main.cpp:11:16: warning: non-static data member initializers only available with -std=c++11 or -std=gnu++11 [enabled by default]
main.cpp:12:14: warning: non-static data member initializers only available with -std=c++11 or -std=gnu++11 [enabled by default]
main.cpp:13:13: warning: non-static data member initializers only available with -std=c++11 or -std=gnu++11 [enabled by default] 
```

现在如果我跑

```
g++ -std=c++11 main.cpp 
```

警告消失了，但我不想明确指定已启用的内容。我犹豫要不要创建一个简单的 bash 别名，因为如果我没记错的话，gcc 已经是某种别名了。无论如何这样做是否安全，或者是否有正确的方法可以在配置文件或其他内容中解决此问题？我正在使用默认存储库的 Ubuntu 12.10 x64 上运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T21:55:54.343

“我不想明确指定已经启用的东西”——实际上这几乎可以肯定是最低能量消耗的方法。将有许多其他可能性，从管道输出`grep -v`到重新编码和重新编译编译器工具链，但它们很可能都比仅将标志添加到命令行更难。

而且，如果您担心额外的字符和可能的别名冲突，您可以随时调用您的别名`g11`或类似名称。那么你只需要记住使用正确的名称，但是任何有脊柱的生物体都应该足够先进来处理它:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T21:51:10.283

GCC 系列编译器（gcc、g++ 等）接受`-w`禁用所有警告的开关 -**但您不想这样做。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T22:21:01.783

做别名确实是一种安全的方法。出于同样的原因，我将以下内容添加到了我的 .bashrc 文件中，并且它运行良好。

```
alias g++='g++ -std=c++11' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T08:07:44.880

这是 GCC 特有的，你必须明确地告诉它。如果您使用的是某些 IDE，只需转到项目选项并在那里指定 -std=c++11 即可。否则最好编写符合 C++03 的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T21:55:42.157

如果您编写代码，那么您可能会编写代码（为什么不，我们都期待 C++11），那么您*现在*需要添加标志。您可以在 make 文件中执行此操作，也可以在两行中执行类似的操作`/usr/local/bin/g++`：

```
#!/bin/bash
/usr/bin/g++ -std=c++11 "$@" 
```

通过在路径中较早，它将“赢得”默认`g++`二进制文件并为您调用它。

方便，但您的代码现在可能是不可移植的。一个权衡。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-03T01:14:31.813

`-std=c+11`在您选择的构建系统或 IDE 中指定。[您可以在此处](https://stackoverflow.com/questions/3349956/portable-c-build-system)了解各种构建系统。

# python - 在 PyDev 编辑器中换行

> ID：13674242
> 
> 赞同：2
> 
> 时间：2012-12-02T21:48:36.257
> 
> 标签：python, pydev, usability

是否可以在 PyDev 中设置文本换行？

对于 Python，这样的特性尤其重要，因为你不能随意使用换行符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-30T17:31:31.553

在 PyDev 中，Source/Wrap 段落菜单 (Ctrl+2, w) 自动换行当前行。您当然应该检查输出是否符合您的预期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T23:07:35.017

Python 语法取决于缩进。所以自动文本换行会破坏语法。但是你可以告诉 Python 在下一行继续一个语句。请参阅最大行长度下的样式指南：：http: [//www.python.org/dev/peps/pep-0008/](http://www.python.org/dev/peps/pep-0008/)

# mysql - WHERE 子句 IN TRIGGER 涉及 3 个表

> ID：13674246
> 
> 赞同：2
> 
> 时间：2012-12-02T21:48:54.917
> 
> 标签：mysql, sql, triggers, phpmyadmin, where

我的触发器如下所示：

```
create trigger money after update on `things`
for each row
begin
SET @c1 = (SELECT sum(`thing_cost`) from `things`);
SET @c2 = (SELECT sum(`salary`) from `dude_base`);
UPDATE `current` SET `curr_cash` = @c1 * @c2 / 100
end;
$$ 
```

但我需要添加如下内容：

```
WHERE id2 from things = id2 from current AND WHERE id1 from dude_base = is1 from current 
```

而不是“SELECT sum”的东西，因为我需要验证每一行。

而且我很难做到这一点而没有任何语法错误..

我正在使用最新的 phpmyadmin 开发 MySQL。

* * *

我也试过看这样的东西：

```
UPDATE table SET val=X WHERE someproperty = 1;
UPDATE table SET val=Y WHERE someproperty = 2; 
```

但它仍然没有成功。

# php - Codeigniter - 具有多个参数的搜索表单

> ID：13674256
> 
> 赞同：2
> 
> 时间：2012-12-02T21:49:51.843
> 
> 标签：php, codeigniter

基本上，此代码通过提取用户在表单中输入的数据来发挥作用，并连接到模型，该模型根据输入的信息执行查询搜索。

此代码有效，但仅当我同时输入 $no 和 $first 字段时才有效。但我需要它工作，这样用户才能输入 $no 并将其他变量留空。

我以为我可以使用某种 OR 语句，但我不确定如何实现它。任何帮助将不胜感激，如果它不够清楚，我对codeigniter还很陌生，我深表歉意。

控制器

```
 public function query()

{

    $no = $this->input->post('no');
    $first = $this->input->post('first');
    $this->load->model("test");
         $data['query']=$this->test->query($no,$first);
        $this->load->view('query',$data);

} 
```

模型

```
function query($no, $first)
{

 return $query = $this->db->get_where('table', array('no' => $no,
 'first' => $first ))->result();

} 
```

看法

```
<?php foreach($query as $row): ?>
<tr> 
    <td><?php echo $row->no; ?></td>
    <td><?php echo $row->date; ?></td>
    <td><?php echo $row->first; ?></td>

    </tr>
    <?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T21:56:51.863

跳过任何未提供的参数怎么样？

```
function query($no, $first)
{
  $where = array();

  if ($no != '') $where['no'] = $no;
  if ($first != '') $where['first'] = $first;

  if (empty($where))
  {
    return array(); // ... or NULL
  }
  else
  {
    return $query = $this->db->get_where('table', $where);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T21:57:47.910

例如

```
if(strlen($no)>0 && strlen($first)>0){
   $data['query']=$this->test->query($no,$first);
}else{
   $data['query']=$this->test->query($no);//or $first
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-07T07:30:19.103

您也可以使用默认参数概念。可以检查用户是否传递了两个参数，因此您可以调用模型并可以发送参数。

考虑到您的示例，我正在编写代码：

控制器

```
public function query()
{

$no = $this->input->post('no');
if($this->input->post('first'))
  $first = $this->input->post('first');
$this->load->model("test");
if($first != '')
  $data['query']=$this->test->query($no,$first);
else
  $data['query']=$this->test->query($no);
$this->load->view('query',$data);
} 
```

模型

```
function query($no, $first = null)
{

 return $query = $this->db->get_where('table', array('no' => $no,
 'first' => $first ))->result();

} 
```

看法

```
<?php foreach($query as $row): ?>
<tr> <td><?php echo $row->no; ?></td>
    <td><?php echo $row->date; ?></td>
    <td><?php echo $row->first; ?></td>
</tr>
<?php endforeach; ?> 
```

使用这个概念，您可以在不同的地方使用相同的功能。例如。您使用两个差异创建了搜索功能。用于搜索的参数，但使用默认参数概念，您可以使用相同的函数来搜索带有一个或两个参数的数据库。

我希望我对你有帮助！:)

# c++ - Eclipse 方法无法解析向量的向量

> ID：13674258
> 
> 赞同：5
> 
> 时间：2012-12-02T21:50:14.367
> 
> 标签：c++, eclipse

每当我尝试通过索引运算符访问向量元素的方法或字段时，例如`bar[0].push_back(0)`，`vector< vector< int > >`我从 eclipse 中得到“方法无法解析”的语义错误。

`g++ -Wall`代码用or编译得很好`clang++`- 这是一个简短的例子。

```
#include <set>
#include <vector>
#include <iostream>

int main()
{
    std::vector< std::vector < int > > bar(10);
    bar[0].push_back(0);    // eclipse "method 'push_back' could not be resolved
    (bar[0]).push_back(1);  // eclipse "method 'push_back' could not be resolved
    bar[0][0] = 0;      // This and all else is just fine for eclipse
    std::vector<int> &bar0 = bar[0];
    bar0.push_back(2);
    std::vector<int> *pbar0 = &bar[0];
    pbar0->push_back(3);
    return 0;
} 
```

我在`std::vector<std::pair<int, int> >::iterator`尝试访问时遇到了类似的问题`iter->first`。（字段 'first 无法解析）。

它是一个 C/C++ 项目，.cpp 文件，在 Eclipse 4.2.1 中，没有未解决的包含。

我在这里完全迷失了 - 我怎样才能摆脱这个日食错误？

更新：我也尝试过使用最新的可用版本：Juno Service Release 1。结果相同。

更新2：我实际上注意到一个全新的项目，不会发生错误，所以我应该能够最终确定是什么设置导致了这个错误。到目前为止，我无法识别任何东西，没有定义（非内置）符号，路径看起来也不错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T22:29:59.697

从头开始重新创建项目解决了这个问题。看来该项目是由以前的 eclipse 版本创建的，可能会导致问题。由于 .project 和 .cproject 中的大量更改，无法确定具体原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-30T09:57:37.027

通过Project-> clean and rebuild，这个问题就解决了。

# memory - 对于 n>1 的 n-gram，Stanford-nlp 分类器内存不足

> ID：13674260
> 
> 赞同：1
> 
> 时间：2012-12-02T21:50:45.137
> 
> 标签：memory, machine-learning, stanford-nlp

我正在尝试以 n-gram(n=>1,2,3) 作为特征运行 Stanford-nlp 分类器的[20 个新闻文本分类示例](http://www-nlp.stanford.edu/wiki/Software/Classifier/20_Newsgroups)，但我继续出现内存不足错误。遵循我正在使用的属性和运行它的命令：

```
2.useSplitWordNGrams=true
2.maxWordNGramLeng=3               
2.minWordNGramLeng=1               

java -mx1800m -cp $STANFORD_CLASSIFIER_JAR edu.stanford.nlp.classify.ColumnDataClassifier \
   -trainFile 20news-devtrain.txt -testFile 20news-devtest.txt \
   -2.useSplitWords -2.splitWordsRegexp "\\s+" -prop 20news1.prop 
```

对于 unigram，程序按预期运行。问题是我只有 4G 内存可用，我想知道是否可以用这么少的内存加载像这样的大型模型。

我试图通过将每篇文章的每个单词（在标记化之后）转换为唯一的整数 id 来减小数据的大小，方法是在内存中使用“单词，id”对保持哈希。这种方法设法减少了 25% 的大小，但仍然没有设法建立二元模型分类器。

我想在非常大的数据（网页）上使用 stanford-nlp，所以我真的需要知道我是否可以在合理的内存量下运行它。任何想法将不胜感激！

干杯，迪米特里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:57:07.400

我不能说斯坦福-NLP 代码，但我可以笼统地回答有关 n-gram 特征的问题。如果你的词汇表中有*v*个项目，那么一个朴素的二元模型有*v* ^2 个参数（而一个三元模型有*v* ^3）。你应该做的是找到最具辨别力的二元组，并将它们用作特征，如果你确定你想要 n-gram 特征。查看各种[特征选择](http://en.wikipedia.org/wiki/Feature_selection)方法来做到这一点。

# matlab - matlab求助：给我一个二阶微分方程，我需要用matlab求单位阶跃响应和脉冲响应吗？

> ID：13674262
> 
> 赞同：1
> 
> 时间：2012-12-02T21:50:55.027
> 
> 标签：matlab, matlab-guide, differential-equations

我有二阶微分方程

```
 d^2(y(t))/dt^2+ B1*d(y(t))/dt+ c1*y(t)=A1*x(t) 
```

t 以秒为单位并且大于 0。A1、B1、C1 是常数，它们等于：

```
A1= 3.8469x10^6
B1= 325.6907
C1= 3.8469x10^6 
```

这个系统是线性的、时不变的和随意的。该系统称为H1。我想用 Matlab 计算和绘制这个系统的脉冲响应函数 h1(t) 和单位阶跃响应函数 g1(t)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:12:13.983

在 MATLAB 中有一个非常漂亮的函数 dsolve，它接受一个字符串作为参数（类似于 ezplot）。您可能必须手动输入常量。但它会解决DE。

通常这些输出，尤其是像这样的输出会很讨厌，所以我建议使用 pretty 函数，至少尝试使其可读。

尝试输入：

帮助解决

进入matlab，看看你得到了什么:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T03:56:14.070

您可以使用 dsolve 找到脉冲响应，但您解决的问题与 ODE 略有不同。

脉冲响应是对 n-1 处的脉冲的自由响应，其中 n 是 ode 的阶数。您想求解 y(0)=0, dy/dt=1, x = 0（无强制）。

这是使用 MATLAB 执行此操作的方法。

```
% // symbolic variables
syms y(t) x(t)

% // these could be symbolic as well
A1= 3.8469E6
B1= 325.6907
C1= 3.8469E6

% // so that you can pass an argument to diff(y)
Dy = diff(y)

% // symbolically solve
ySol = dsolve(diff(diff(y,t),t)+B1*diff(y,t)+C1*y-A1*0,y(0)==0,Dy(0)==1)

% // use five digits only (shortens the result)
digits(5)
ySol = vpa(ySol)

% // show a human readable result
pretty(ySol)

% // solve by replacing the symbol t with the numerical value
f = @(t) subs(ySol, 't', t)

% // plot the function.  note you can analytically know a better range 
% // from A1, B1, C1, but I leave that to you
ezplot(f, [0 .06]) 
```

* * *

![结果](../Images/b125847c33c0b336bad5fe40dee07f0e.png)

* * *

![阴谋](../Images/f7d421126bc58d79da51cee124b36f2c.png)

恕我直言，更好的方法是将脉冲响应的解析解用于二阶 ODE。通过搜索可以轻松找到许多关于此的注释（例如[这些注释](http://www.egr.msu.edu/classes/me451/jchoi/2007/handouts/ME451_S07_lecture17.pdf)）。

对于阶跃响应，您可以使用卷积积分......但上述内容应该有助于使用 ode 求解器。

# eclipse - IDocument 的作业缓冲区

> ID：13674263
> 
> 赞同：2
> 
> 时间：2012-12-02T21:50:56.037
> 
> 标签：eclipse, eclipse-plugin

我为 Eclipse 创建了一个插件。如何将事件添加到 IDocument 的作业缓冲区？

情况：我需要在文本编辑器中禁用即时更改（当前刻有字符）。相反，我想将这些事件分配给缓冲区作业，以便在位于它们前面的作业之后执行。

# sql - 显示司机姓名和他们工作的班次

> ID：13674269
> 
> 赞同：-2
> 
> 时间：2012-12-02T21:51:30.177
> 
> 标签：sql, oracle

```
select dr_drvname, count(sh_wkflag)
from driver join shift on dr_drvnum = sh_drvnum
where sh_wkflag like '%T%'
group by dr_drvnum; 
```

“T”意味着真正的工作班次。如何从另一个表中使用计数和绘制名称？

驱动程序表包含所有名称。班次表包含 sh_wkflag，其值为 T 或 F，具体取决于班次是否已进行。我希望能够获得“T”的所有值并对其进行计数。显示由驱动程序表中的驱动程序编号分组的“T”编号，以及驱动程序表中的驱动程序名称。

只要我不显示驱动程序名称，查询就会运行，但我也需要显示名称。我得到的错误是， dr_drvname 不是按表达式分组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T22:48:30.020

啊哈！错误说明了一切。添加`dr_drvname`到`GROUP BY`子句中。按 分组是多余的`dr_drvnum`，但没关系。

```
select dr_drvname, count(sh_wkflag)
from driver join shift on dr_drvnum = sh_drvnum
where sh_wkflag like '%T%'
group by dr_drvnum, dr_drvname; 
```

# iphone - iPhone - 如何从第二个 UIViewController 获取 URL 以加载到第一个 UIViewController 中的 WebView

> ID：13674271
> 
> 赞同：0
> 
> 时间：2012-12-02T21:51:42.047
> 
> 标签：iphone, url, uiview, uiviewcontroller, uiwebview

我想要做的是我有一个书签系统，但我的问题是从第二个 UIViewController 中的 UITableView 获取 URL，并将选择的 URL 加载到第一个 UIViewController 中的 WebView 是可能的。我确实有一些代码，但这不起作用我需要解决我的问题

这是我目前拥有的代码

```
-(void)tableView:(UITableView*)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

    ViewController *controller = [[ViewController alloc]init];

    NSString *urlWeb = [subtitles objectAtIndex:indexPath.row];
    [controller.igiWebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urlWeb]]];

    [tableView deselectRowAtIndexPath:[tableView indexPathForSelectedRow] animated:YES];
    [self dismissViewControllerAnimated:YES completion:nil]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:47:29.607

Try this one

```
-(void)tableView:(UITableView*)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

ViewController *controller = [[ViewController alloc]init];

NSString *urlWeb = [subtitles objectAtIndex:indexPath.row];
[controller.igiWebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urlWeb]]];

[self.navigationController pushViewController:controller animated:YES];

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T13:23:41.573

您正在做的是初始化先前视图控制器的另一个实例，而不是使用加载到导航堆栈中的现有实例。因此，当您调用dismissViewController 方法时，您的视图将被关闭，并且您既没有使用新创建的实例也没有使用现有实例。我建议创建一个委托并使用它将选定的 URL 传递回 FirstViewController。`@interface`在 FirstViewController.h 中，在 FirstViewController类的块之外使用以下代码。

```
@protocol UserSelectionDelegate
-(void)userSelected:(NSString*)selectedURLString;
@end 
```

在 SecondViewController 的`@interface`块内，

```
id<UserSelectionDelegate> delegate; //Make a property of this as well 
```

并在 SecondViewController 的`didSelectRowAtIndexPath:`方法中使用：

```
-(void)tableView:(UITableView*)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

NSString *urlWeb = [subtitles objectAtIndex:indexPath.row];
[self.delegate userSelected:urlWeb];
[tableView deselectRowAtIndexPath:[tableView indexPathForSelectedRow] animated:YES];
[self dismissViewControllerAnimated:YES completion:nil];
} 
```

现在您所要做的就是返回 FirstViewController.m，在您创建 SecondViewController 的实例处添加`secondVCInstace.delegate = self;`，然后实现`userSelected:`将 URL 加载到 FirstViewController 的 webView 中的方法。

# twitter-bootstrap - Twitter Bootstrap 2中导航下方的某种间距问题

> ID：13674272
> 
> 赞同：0
> 
> 时间：2012-12-02T21:51:56.970
> 
> 标签：twitter-bootstrap, menu, navigation

是什么导致其他页面（例如关于、视频等）的顶部导航下方大约 20 像素的间距？您可以在主页上看到这不会发生并且是相同的代码。 [http://knitstitchmedia.com/sandbox/sellebrity/index.html](http://knitstitchmedia.com/sandbox/sellebrity/index.html)

我一直在寻找解决方案，并自己尝试了一些东西，但又一次空手而归。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T01:12:14.247

您`body` `padding-top`主页上的值与您在其他页面上的值不同。例如，您的主页上有以下内容：

```
 <style>
        body {
            padding-top: 45px;
            padding-bottom: 40px;
        }
    </style> 
```

但是在你的关于页面上，你有这个：

```
 <style>
        body {
            padding-top: 60px;
            padding-bottom: 40px;
        }
    </style> 
```

因此，只需同步所有标题，您的页面应该看起来不错。

# jquery - jQuery选择元素紧挨着另一个

> ID：13674275
> 
> 赞同：-1
> 
> 时间：2012-12-02T21:52:24.273
> 
> 标签：jquery, selector, addclass, next, list-definition

如果我有：

```
<dt>Title</dt>
<dd>Description</dd>

<dt>Title</dt>
<dd>Description</dd>

<dt>Title</dt>
<dd>Description</dd>

<dt>Title</dt>
<dd>Description</dd> 
```

我怎样才能制作一个选择器，以便当我单击一个 dt 时，紧随其后的 dd（并且只有那个 DD）被赋予一个类名？我试过 nextUntil() 和 next() 没有成功

这是为了让我正在做的事情更有效率

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T22:01:02.003

```
<script type="text/javascript">
    $(document).ready(function(){
        $('dt').click(function(){
            $(this).next('dd').addClass('bolder');
        });
    });
</script>

<style>
    .bolder {
        font-weight: bold;
    }
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T21:57:59.727

在不知道你的 js 代码长什么样的情况下，这样的东西可能对你有用吗？

[http://jsfiddle.net/GwpNp/](http://jsfiddle.net/GwpNp/)

```
$("#wrapper").on("click", "dt", function(e){
   $(this).next().addClass("red");
});

<div id="wrapper">
    <dt>Title</dt> <dd>Description</dd>  
    <dt>Title</dt> <dd>Description</dd>  
    <dt>Title</dt> <dd>Description</dd>  
    <dt>Title</dt> <dd>Description</dd>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T22:00:56.150

`next()`应该可以正常工作 - 'dt' 的点击处理程序应该可以解决问题：

`function dtClicked() { $(this).next().addClass("new-class"); }`

# html - 表单元素不浮动？

> ID：13674276
> 
> 赞同：1
> 
> 时间：2012-12-02T21:52:28.927
> 
> 标签：html, css, forms, layout

简单，愚蠢的问题。我似乎无法理解它（其中一个是愚蠢的时刻），所以我想我不妨在这里给某人一些简单的业力。HTML：

```
<form action="http://localhost/wall/wall_controller/send" method="post" accept-charset="utf-8">
<input type="text" name="p_name" value="Your name" class="name" maxlength="50" size="25"  />
<textarea name="p_text" cols="20" rows="5" class="message" maxlength="500" >Type your message here</textarea>
<input type="submit" name="send" value="Submit Post!"  />
</form> 
```

CSS：

```
.name, .message {
    float: left;
} 
```

为什么指定的元素没有像应有的那样向左浮动？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T21:54:45.767

您只能浮动`block`元素。将`display: block`规则添加到`.name, .message`.

# c++ - 在每对上同时运行

> ID：13674279
> 
> 赞同：-2
> 
> 时间：2012-12-02T21:52:32.843
> 
> 标签：c++, ppl

我有很多对象。我需要同时处理每一*对*（不是每一对，任意配对），但每个对象应该只串行处理。

我正在努力描述一种可以处理这个问题的算法，最好不涉及一堆锁。我从 Microsoft 获得了 PPL，因此我可以使用一些相当高级的并发函数。

最后，很多时候我会处理每个对象很少的配对——零和特别常见的配对。但多对多配对是我必须处理的边界条件。

对这种算​​法有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:37:51.843

如果您可以将算法构造为并行循环：parallel_for、parallel_for_each（迭代之间没有依赖关系）或您正在组合/合并解决方案的 parallel_reduction，那么 PPl 会非常有效。

如果您可以将算法构造为分而治之的递归，它也很有效。

你能重组你的算法的串行形式来适应这些吗？这将使并行化变得更容易。

您的描述不够具体，我无法给出具体建议，但您似乎正在尝试寻找不同的配对/防止重复工作。一些可能有用的技术（如果你更具体，你可能会得到更多）：

1）将所有元素放入一个集合/映射中，然后迭代唯一的元素。或者，如果您使用 concurrent_unordered_set / map 那么您可以检查插入方法的状态以检查并行循环中的唯一性。

2) 您还可以从使用 shared_ptr、std::future 或 async_future（参见文档）来帮助实现唯一性中受益。

3）如果您有更复杂的依赖关系，您可能需要查看 concurrency::task::then 或代理库。

# jquery - Jquery session - 一次执行脚本？

> ID：13674280
> 
> 赞同：1
> 
> 时间：2012-12-02T21:52:38.897
> 
> 标签：jquery

我有这个滑块，当你点击它时会打开/关闭，但我也让它在页面加载时打开，但现在问题是**它在每个页面上打开**（因为它在每个页面上）。

是否有可能以某种方式使其每次会话仅自动启动**一次？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T22:02:18.993

例如，如果您的意思是一个 php 会话：

```
$html = $someHtml;
if (!isset($_SESSION['firstTime'])) {
    $html .= "<script>myJavaScriptFunction();</script>";
    $_SESSION['firstTime'] = "Nope";
}
echo $html; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T22:09:16.363

您可以使用 cookie。

```
function setCookie(c_name,value,exdays){
    var exdate=new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
    document.cookie=c_name + "=" + c_value;
}

function getCookie(c_name){
    var i,x,y,ARRcookies=document.cookie.split(";");
    for (i=0;i<ARRcookies.length;i++){
      x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
      y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
      x=x.replace(/^\s+|\s+$/g,"");
      if (x==c_name){
        return unescape(y);
      }
    }
}

if(!getCookie("sliderOpen")){
 //Open your slider
 setCookie("sliderOpen", 1, 1/*time until cookie expires*/ );
} 
```

* * *

`setCookie()`及`getCookie()`功能来源：[http ://www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)

# .htaccess - Mod-Rewrite 从重写中排除特定链接

> ID：13674281
> 
> 赞同：1
> 
> 时间：2012-12-02T21:52:39.833
> 
> 标签：.htaccess, mod-rewrite

我有一个非常简单的 mod 重写脚本，将我的 php 变量放入 .html 文件中。但是它有效，我想确认我的谷歌网站管理员工具 url，它不工作，因为 url 结构正在被重写。如何排除特定项目？

```
RewriteEngine On
RewriteRule ^([^/]*)\.html$ /index.php?page=$1 [L] 
```

我想从重写过程中排除的 URL：

```
http://www.website.com/google149e37e6d0ddce9a.html 
```

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T21:56:27.773

```
RewriteEngine On
RewriteRule ^google149e37e6d0ddce9a.html$ - [L]
RewriteRule ^([^/]*)\.html$ /index.php?page=$1 [L] 
```

破折号是一个特殊值，意味着不会重写任何内容。[L] 在成功匹配时停止评估。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T23:38:44.247

我建议你使用类似的东西：

```
RewriteRule ^google[0-9a-f]+.html$ - [L] 
```

以便您以后可以上传验证文件而不会出现此问题。

# c++ - 错误：将元素加载到向量时出现无限循环

> ID：13674284
> 
> 赞同：0
> 
> 时间：2012-12-02T21:52:55.153
> 
> 标签：c++, data-structures, vector, infinite-loop

```
void initializeVectorFromFile(vector<SInventory> & inven){

        ifstream initData("inventoryData.txt");

    if(!initData){

        cout << "File could not be accessed! Press any key to terminate program...";
        _getch();
        exit(1);

    }

    while(!initData.eof()){

        SInventory item;

        initData >> item.itemID;

        getline(initData,item.itemName);

        initData >> item.pOrdered
                 >> item.menufPrice
                 >> item.sellingPrice;
        item.pInStore = item.pOrdered;
        item.pSold = 0;

        inven.push_back(item);

        cout << item.itemID << endl;

    }

    cout << "File Read Success!" << endl;

    initData.close();
} 
```

`.txt`我正在读取的文件包含按以下顺序结构化的数据：

```
int
string
int double double 
```

while 循环最后一行的输出作为文件中的第一个 itemID 重复。该`initData`流不会读取`.txt`文件中的后续条目。

```
1111
1111
1111
1111
1111
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T22:03:07.700

不要使用`while (!initData.eof())`- 永远。这几乎是一个有保证的错误。

我`SInventor`将从从文件中读取单个项目的代码开始：

```
std::istream &operator>>(std::istream &initData, SInventor &item) { 
    initData >> item.itemID;

    getline(initData,item.itemName);

    initData >> item.pOrdered
             >> item.menufPrice
             >> item.sellingPrice;
    item.pInStore = item.pOrdered;
    item.pSold = 0;    
    return initData;
} 
```

有了它，最简单的方法可能是不使用函数的其余部分，直接初始化向量：

```
std::ifstream infile("yourfile.txt");

std::vector<SInventor> inven((std::istream_iterator<SInventor>(infile)),
                              std::istream_iterator<SInventor>()); 
```

没有循环，没有针对 EOF 的混乱测试等，只是从一对迭代器初始化的向量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T21:59:58.620

您可以将 while 循环更改为

```
SInventory item;
while(initData >> item.itemID){
    ... 
```

或在 while 循环结束时跳过空格

```
 ws(initData); 
```

或定义一个`operator>>(istream&, SInventory &)`并做

```
SInventory item;
while(initData >> item){
    inven.push_back(item);
} 
```

# silverlight - xaml 中的 Silverlight Tookit 图表制作失败

> ID：13674287
> 
> 赞同：1
> 
> 时间：2012-12-02T21:53:23.393
> 
> 标签：silverlight, xaml, toolkit

在“设计”图表时，我遇到了一些我还没有解决的问题。现在的图表：http: [//imgbin.org/index.php ?page=image&id=10595](http://imgbin.org/index.php?page=image&id=10595)

1）我希望“AreaSeries”的线条与“LineSeries”具有相同的样式。正如您在图像中看到的，它根本没有样式：|。很可能与以下内容有关：

```
<ControlTemplate TargetType="toolkit:AreaDataPoint"> 
```

不正确，虽然我找不到正确的方法......是否有可能给“AreaSerie”的线和数据点另一个布局，或者是通过创建另一个具有相同布局的线系列来做到这一点的唯一方法数据点作为 AreaSeries？

2）当我通过脚本为 Y 轴设置最小值时：

```
(this.chart1.Axes[0] as LinearAxis).Minimum = UsersMin;
(this.chart1.Axes[1] as LinearAxis).Minimum = CumulativeMin; 
```

这将导致线条根本不显示：| （即使我将其设置为“1”，并且行在 1 以上）。如何设置最小值并保留我的图形？

3) 是否可以将文本放在 ContentControl 中的动态值前面？

```
<ContentControl Content="Users: {TemplateBinding DependentValue}" /> 
```

上面的代码不起作用，因为它认为 {TemplateBinding DependentValue} 只是一个文本，而不是要替换为数据的代码……是否可以在数据绑定前面放置一个文本？如果是这样，怎么办？

XAML 代码附在下面。

谢谢！

JB

```
 <toolkit:Chart.LegendStyle>
            <Style TargetType="FrameworkElement">
                <Setter Property="Width" Value="0" />
            </Style>
        </toolkit:Chart.LegendStyle>

        <toolkit:Chart.TitleStyle>
            <Style TargetType="ContentControl">
                <Setter Property="Foreground" Value="White" />
                <Setter Property="HorizontalAlignment" Value="Center" />
                <Setter Property="FontSize" Value="18" />
                <Setter Property="Margin" Value="0,0,0,0" />
                <Setter Property="Padding" Value="0,0,0,0"/>
            </Style>
        </toolkit:Chart.TitleStyle>

        <toolkit:Chart.PlotAreaStyle>
            <Style TargetType="Grid">
                <Setter Property="Background" Value="#AAFFFFFF" />
                <Setter Property="Margin" Value="0,0,0,0"/>
            </Style>
        </toolkit:Chart.PlotAreaStyle>

        <toolkit:Chart.Axes>
            <!-- Y-Axis custom range -->
            <toolkit:LinearAxis x:Name="Yusers"
                Orientation="Y"
                Title="Users"
                ShowGridLines="True"
                Foreground="#FF000088"
                FontSize="15" />
            <toolkit:LinearAxis x:Name="YCumulative"
                Orientation="Y"
                Title="Cumulative"
                Foreground="white"
                FontSize="15" />
        </toolkit:Chart.Axes>

        <!-- Daily data -->
        <toolkit:AreaSeries
            x:Name="Daily"
            ItemsSource="{Binding}"
            IndependentValueBinding="{Binding Date}"
            DependentValueBinding="{Binding Daily_User}"
            DependentRangeAxis="{Binding ElementName=Yusers}">
            <toolkit:AreaSeries.DataPointStyle>
                <Style TargetType="toolkit:AreaDataPoint">
                    <Setter Property="Background" Value="#FF001188" />
                    <Setter Property="IsTabStop" Value="False" />

                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="toolkit:AreaDataPoint">
                                    <ToolTipService.ToolTip>
                                        <StackPanel Margin="2,2,2,2">
                                            <ContentControl Content="Users:" />
                                            <ContentControl Content="{TemplateBinding DependentValue}" />
                                            <ContentControl Content="{TemplateBinding IndependentValue}" />
                                        </StackPanel>
                                    </ToolTipService.ToolTip>
                                    <Ellipse StrokeThickness="2" Height="20" Width="20" Stroke="#7F0011BF" Fill="Azure"/>
                                </Grid>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </toolkit:AreaSeries.DataPointStyle>
        </toolkit:AreaSeries>

        <!-- Cumulative data -->
        <toolkit:LineSeries
            x:Name="Cumulative"
            ItemsSource="{Binding}"
            IndependentValueBinding="{Binding Date}"
            DependentValueBinding="{Binding Cumulative_User}"
            DependentRangeAxis="{Binding ElementName=YCumulative}">
            <toolkit:LineSeries.DataPointStyle>
                <Style TargetType="toolkit:LineDataPoint">
                    <Setter Property="Background" Value="Black" />
                    <Setter Property="BorderBrush" Value="black" />
                    <Setter Property="BorderThickness" Value="2" />
                    <Setter Property="IsTabStop" Value="False" />

                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="toolkit:LineDataPoint">
                                <Grid x:Name="Root" Opacity="1">
                                    <ToolTipService.ToolTip>
                                        <StackPanel Margin="2,2,2,2">
                                            <ContentControl Content="Cumulative Users:" />
                                            <ContentControl Content="{TemplateBinding DependentValue}" />
                                            <ContentControl Content="{TemplateBinding IndependentValue}" />
                                        </StackPanel>
                                    </ToolTipService.ToolTip>
                                    <Ellipse StrokeThickness="2" Stroke="Black" Fill="Azure"/>
                                </Grid>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </toolkit:LineSeries.DataPointStyle>
        </toolkit:LineSeries>
    </toolkit:Chart> 
```

# php - PHP - 为日期添加间隔并使差异不起作用

> ID：13674289
> 
> 赞同：1
> 
> 时间：2012-12-02T21:53:29.943
> 
> 标签：php

我想倒计时多久，直到某些东西过期，但它不起作用。特别是，使用 datetime 的 diff 函数基本上返回一个什么都没有的 dateinterval（全 0）。这是代码：

```
 $created = new DateTime("2012-11-20");
    $expires = $created;
    $expires->add(new DateInterval("P14D")); //adds a week
    $timeLeft = $created->diff($expires);
    echo $timeLeft->format('%a days'); 
```

问题是这段代码总是返回 0 天..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T21:56:36.393

主要问题是您如何复制对象，您需要克隆对象..替换

```
$expires = $created; 
```

和

```
$expires = clone $created; 
```

完整代码

```
$created = new DateTime("2012-11-20");
$expires = clone $created;
$expires->add(new DateInterval("P14D")); //adds 14 days
$timeLeft = $created->diff($expires);
echo $timeLeft->format('%a days'); 
```

输出

```
14 days 
```

[观看现场演示](http://eval.in/4216)

# twitter-bootstrap - 带有 Twitter Bootstrap DatePicker 的 AngularJS 在外部单击后不会关闭

> ID：13674292
> 
> 赞同：2
> 
> 时间：2012-12-02T21:54:10.620
> 
> 标签：twitter-bootstrap, datepicker, angularjs

我正在开发一个使用 Twitter Bootstrap 和 AngularJS 构建的网站。日历输入栏会弹出一个日历，使用的是datepicker。这是代码：

```
 <div class="control-group {{errors.start_date.class}}">
      <label class="control-label">Start Date</label>
      <div class="controls">
        <input type="text" class="input-small" value="{{round.start_date | date:'MM/dd/yyyy'}}" data-ng-model="round.start_date" id="start_date" onfocus="$('#start_date').datepicker({format:'mm/dd/yyyy'});$('#start_date').datepicker('show');" required>
         <span class="help-block" data-ng-show="errors.start_date">{{errors.start_date.message}}</span>
      </div>
    </div> 
```

选择日期后，我单击日历弹出窗口之外的区域，但弹出窗口不会关闭。我尝试添加“autoclose：'true'”，如下面的代码所示，但弹出窗口仍然不会关闭。

```
 <div class="control-group {{errors.start_date.class}}">
      <label class="control-label">Start Date</label>
      <div class="controls">
        <input type="text" class="input-small" value="{{round.start_date | date:'MM/dd/yyyy'}}" data-ng-model="round.start_date" id="start_date" onfocus="$('#start_date').datepicker({format:'mm/dd/yyyy','autoclose':true});$('#start_date').datepicker('show');" required>
         <span class="help-block" data-ng-show="errors.start_date">{{errors.start_date.message}}</span>
      </div>
    </div> 
```

有人知道如何解决这个问题吗？实际上，如果日历弹出窗口在我单击日期后也会关闭，那就太好了。

2012-12-03 更新：以前，我已将 jquery-ui-1.9.2.custom.min.js 和此代码添加到我的控制器中：

```
$(".modal").draggable(); 
```

这就是我在日历弹出窗口之外单击时无法关闭它的原因。当我删除它们时，我可以关闭日历。但是，我希望能够使模态窗口可拖动并关闭日历。有没有办法做到这两点？此外，当我单击日期时，我仍然无法关闭日历。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:56:06.607

当使用 AngularJS 包含外部库时，您通常需要将它们包装在指令中，以便双向数据绑定和 DOM 事件正常工作。文档链接：[AngularJS 指令](http://docs.angularjs.org/guide/directive)

Twitter Bootstrap 和 jQuery UI 中的许多元素已经被 AngularUI 上的一群人方便地打包了，你可以在这里找到它们：http: [//angular-ui.github.com/](http://angular-ui.github.com/)。

以下是 date 指令的源代码：[https](https://github.com/angular-ui/angular-ui/blob/master/modules/directives/date/date.js)`link` ://github.com/angular-ui/angular-ui/blob/master/modules/directives/date/date.js ，AngularJS 将在函数中执行代码后加载指令，这是通常的 datepicker 事件侦听器的附加位置。

下面是一些示例代码，展示了 Twitter Bootstrap 表单 + 日期选择器输入在 AngularUI 中的外观，其中属性`data-ui-date`向 AngularJS 编译过程表明该元素是指令。您也可以省略该`data`部分，只将属性设置为`ui-date`.

```
 <div class="control-group">
        <label class="control-label">Start Date</label>
        <div class="controls">
            <input data-ng-model="round.start_date" data-ui-date="dateOptions" name="datepicker" type="text" class="input-medium" placeholder="">
        </div>
    </div> 
```

`dateOptions`只是在控制器或指令中某处设置的范围值，如下所示：

```
 $scope.dateOptions = {
        changeYear: false,
        changeMonth: false,
        nextText: '<i class=icon-arrow-right></i>',
        prevText: '<i class=icon-arrow-left></i>',
        dateFormat: 'yy-mm-dd'
    }; 
```

# javascript - Windows 8 Javascript 中来自 CreateFileAsync 的文件指针未定义

> ID：13674293
> 
> 赞同：0
> 
> 时间：2012-12-02T21:54:17.277
> 
> 标签：javascript, windows-8

使用 Visual Studio Express 在 Javascript 中编写 Windows 8 应用程序。我不确定我是否缺少链接依赖或其他东西，但我让我的游戏用户能够将他们的进度保存到文件中（至少是这样的想法）。但是，当我运行以下代码时，即使我可以在那里看到文件，文件指针似乎也是未定义的。看到我遗漏的任何东西了吗？

```
var myStats = new Array();
myStats[0] = myTitle;
myStats[1] = currPage;
myStats[2] = currStep;
myStats[3] = currTune;
myStats[4] = musicon;
myStats[5] = gameComplete;

var save01File = null;

            Windows.Storage.KnownFolders.documentsLibrary.createFileAsync("Asave01.dat", Windows.Storage.CreationCollisionOption.replaceExisting).done(

                function (file) {
                    save01File = file;
                },
                function (error) {
                    WinJS.log && WinJS.log(error, "sample", "error");
                });
            Windows.Storage.FileIO.writeLinesAsync(save01File, myStats).done(
                function () {
                },
            function (error) {
                WinJS.log && WinJS.log(error, "sample", "error");
                errCount++;
            });
            if (errCount == 0) {
                fileMenuTitle.text = "File Saved - Click Cancel";
                fileMenuTitle.text = fileMenuTitle.text + "\nto Return or Select Another File to Load";
                fileMenuTitle.color = "green";
            }
            else {
                fileMenuTitle.text = "There was an error saving that file.";
                fileMenuTitle.text = fileMenuTitle.text + "\nPlease Make Another Selection.";
                fileMenuTitle.color = "firebrick";
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T01:09:57.910

您需要在这里使用承诺模式：

```
var myStats = new Array();
myStats[0] = myTitle;
myStats[1] = currPage;
myStats[2] = currStep;
myStats[3] = currTune;
myStats[4] = musicon;
myStats[5] = gameComplete;

var save01File = null;

Windows.Storage.KnownFolders.documentsLibrary.createFileAsync("Asave01.dat", Windows.Storage.CreationCollisionOption.replaceExisting).then(function (file) {
    save01File = file;
    return Windows.Storage.FileIO.writeLinesAsync(file, myStats);
}).done(function() {
    fileMenuTitle.text = "File Saved - Click Cancel";
    fileMenuTitle.text = fileMenuTitle.text + "\nto Return or Select Another File to Load";
    fileMenuTitle.color = "green";
}, function (error) {
    WinJS.log && WinJS.log(error, "sample", "error");
    fileMenuTitle.text = "There was an error saving that file.";
    fileMenuTitle.text = fileMenuTitle.text + "\nPlease Make Another Selection.";
    fileMenuTitle.color = "firebrick";
}); 
```

# php - 使用 PHP exif_read_data 获取照片的“拍摄日期”而不是“修改日期”

> ID：13674296
> 
> 赞同：14
> 
> 时间：2012-12-02T21:54:27.937
> 
> 标签：php, image, exif

我正在使用 exif_read_data PHP 函数从照片中检索创建日期（请参见下面的代码。）从未修改的照片中检索到的日期返回“拍摄日期”。那些已被修改的 - “修改日期”。有没有办法获取照片的拍摄日期，而忽略“修改日期”字段？

```
$exif_data = exif_read_data ($filename);
if (!empty($exif_data['DateTime'])) {
    $exif_date = $exif_data['DateTime'];
} 
```

谢谢你。

编辑：我认为 $exif_data['DateTime'] 使用第一个可用的日期字段。由于未修改的图像对于“修改日期”和“拍摄日期”具有相同的值，因此在我的情况下它总是检索“修改日期”。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-07-19T02:25:32.503

好的，我知道这有点晚了，因为这个问题是在一年前发布的，但我发布这个答案是因为我有同样的问题，我丈夫向我展示了如何获得答案的一两个技巧，所以我正在分享它。编写一个 php 脚本打印出 exif_read_data 数组，你会发现各种有趣的信息。这（下）是在命令行上使用 print_r() 打印到标准输出的。如果向下滚动，您会看到两个非常有趣的键：[DateTime] => 2011:06:21 17:50:57 和 [DateTimeOriginal] => 2011:06:04 08:56:22

我希望这些能帮助你得到你需要的东西。

```
大批
(
    [文件名] => 海盗(F).JPG
    [文件日期时间] => 1405733742
    [文件大小] => 4017033
    [文件类型] => 2
    [MimeType] => 图像/jpeg
    [SectionsFound] => ANY_TAG, IFD0, THUMBNAIL, COMMENT, EXIF
    [计算] => 数组
        (
            [html] => 宽度=“2592”高度=“3888”
            [身高] => 3888
            [宽度] => 2592
            [IsColor] => 1
            [字节顺序摩托罗拉] => 1
            [ApertureFNumber] => f/16.0
            [缩略图.文件类型] => 2
            [Thumbnail.MimeType] => 图像/jpeg
        )

    [制作] => 佳能
    [型号] => 佳能 EOS DIGITAL REBEL XS
    [方向] => 1
    [X分辨率] => 4718592/65536
    [Y分辨率] => 4718592/65536
    [分辨率单位] => 2
    [软件] => QuickTime 7.6.9
    [日期时间] => 2011:06:21 17:50:57
    [主机计算机] => Mac OS X 10.5.8
    [YCbCr定位] => 1
    [Exif_IFD_Pointer] => 260
    [缩略图] => 数组
        (
            [压缩] => 6
            [X分辨率] => 4718592/65536
            [Y分辨率] => 4718592/65536
            [分辨率单位] => 2
            [JPEG 交换格式] => 628
            [JPEGInterchangeFormatLength] => 4867
            [YCbCr定位] => 1
        )

    [评论] => 数组
        (
            [0] => 苹果标记

        )

    [曝光时间] => 1/200
    [FNumber] => 16/1
    [曝光程序] => 2
    [ISOSpeedRatings] => 400
    [ExifVersion] => 0220
    [DateTimeOriginal] => 2011:06:04 08:56:22
    [日期时间数字化] => 2011:06:04 08:56:22
    [快门速度值] => 499712/65536
    [光圈值] => 524288/65536
    [ExposureBiasValue] => 0/1
    [测光模式] => 5
    [闪光] => 9
    [焦距] => 18/1
    [色彩空间] => 1
)

```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-03T02:44:45.737

解决方案比我想象的要容易。我指的是错误的标签。要获取日期，请使用：

$exif_data['DateTimeOriginal'];

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-02T22:04:50.593

```
echo "test1.jpg:<br />\n";
$exif = exif_read_data('tests/test1.jpg', 'IFD0');
echo $exif===false ? "No header data found.<br />\n" : "Image contains headers<br />\n";

$exif = exif_read_data('tests/test2.jpg', 0, true);
echo "test2.jpg:<br />\n";
foreach ($exif as $key => $section) {
foreach ($section as $name => $val) {
    echo "$key.$name: $val<br />\n";
}
} 
```

将输出

```
test1.jpg:
No header data found.
test2.jpg:
FILE.FileName: test2.jpg
FILE.FileDateTime: 1017666176
FILE.FileSize: 1240
FILE.FileType: 2
FILE.SectionsFound: ANY_TAG, IFD0, THUMBNAIL, COMMENT
COMPUTED.html: width="1" height="1"
COMPUTED.Height: 1
COMPUTED.Width: 1
COMPUTED.IsColor: 1
COMPUTED.ByteOrderMotorola: 1
COMPUTED.UserComment: Exif test image.
COMPUTED.UserCommentEncoding: ASCII
COMPUTED.Copyright: Photo (c) M.Boerger, Edited by M.Boerger.
COMPUTED.Copyright.Photographer: Photo (c) M.Boerger
COMPUTED.Copyright.Editor: Edited by M.Boerger.
IFD0.Copyright: Photo (c) M.Boerger
IFD0.UserComment: ASCII
THUMBNAIL.JPEGInterchangeFormat: 134
THUMBNAIL.JPEGInterchangeFormatLength: 523
COMMENT.0: Comment #1.
COMMENT.1: Comment #2.
COMMENT.2: Comment #3end
THUMBNAIL.JPEGInterchangeFormat: 134
THUMBNAIL.Thumbnail.Height: 1
THUMBNAIL.Thumbnail.Height: 1 
```

来源[http://php.net/manual/en/function.exif-read-data.php](http://php.net/manual/en/function.exif-read-data.php)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-02T22:12:35.847

不确定您从哪里获得信息，但[exif](http://en.wikipedia.org/wiki/Exif)信息取决于图像或捕获的设备。即使它修改了 exif 也可以被条带化

例子

```
array (size=7)
  'FileName' => string 'img.jpg' (length=7)
  'FileDateTime' => int 1332747844
  'FileSize' => int 22569
  'FileType' => int 2
  'MimeType' => string 'image/jpeg' (length=10)
  'SectionsFound' => string 'IFD0' (length=4)
  'COMPUTED' => 
    array (size=5)
      'html' => string 'width="338" height="506"' (length=24)
      'Height' => int 506
      'Width' => int 338
      'IsColor' => int 1
      'ByteOrderMotorola' => int 0 
```

这是一个有效的`exif`信息，但不包括

*   约会时间
*   拍摄日期
*   修改日期
*   日期时间原始
*   日期时间数字化

您确实需要重新考虑您的策略并使用`FileDateTime`唯一知道的始终存在的信息

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-03T02:02:37.477

日期时间信息存在于图像文件目录 (IFD) 中，它是[EXIF](http://en.wikipedia.org/wiki/Exchangeable_image_file_format)数据中的重复数据结构。要获取照片的拍摄日期并表示为原生 php [DateTime](http://php.net/manual/en/book.datetime.php)对象，您需要从右侧 IFD 部分获取它：

```
<?php
$filename  = "/path/to/your/image.jpg";
$exifData  = exif_read_data( $filename, 'IFD0');
$takenDate = NULL;

if( $exifData !== FALSE ) {
  if( array_key_exists('DateTime', $exifData ) ) {
    $takenDate = new DateTime( $exifData['DateTime'] );
  } else {
    // No DateTime field available
  }

} else {
  // No exif data available
} 
```

之后，您可以简单地验证 exif DateTime 数据：

```
is_null( $takenDate ); 
```

# php - 我应该什么时候关闭数据库连接？

> ID：13674298
> 
> 赞同：2
> 
> 时间：2012-12-02T21:54:41.707
> 
> 标签：php, mysql, database-connection

我正在使用连接到 MySQL 数据库

```
$dbh = new PDO("mysql:host=$db_host;dbname=$db_name", $db_user, $db_pass); 
```

在阅读论坛和教程时，它说在完成数据库连接后立即关闭数据库连接是一种很好的做法（尽管不是至关重要的）。所以我的问题是：我应该总是`$dbh = null;`在执行最后一次数据库操作时添加吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T21:58:02.890

当脚本完成执行时，连接会隐式关闭。您可能想要关闭连接的唯一原因是您打算打开另一个连接；即使这样，PDO 也支持多个并发连接。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-02T22:03:35.143

在 php 中，您不必经常关闭数据库连接。因为，在您的代码完成后，Web 服务器会关闭与数据库的所有连接，因为执行已结束。但在整个执行期间，出于安全原因，您应该关闭它。但是，如果您创建了一个 eg 守护程序，则出于安全和内存原因，您必须更频繁地关闭它。开放的连接对于直接 db 攻击总是很危险的，并且会保留一些内存。

# sql-server - SQL Server 2008 文件流文件大小贡献

> ID：13674301
> 
> 赞同：0
> 
> 时间：2012-12-02T21:55:02.703
> 
> 标签：sql-server, filestream, sql-server-2008-express

只是关于 SQL Server 2008 中的 Filestream 的一个问题：文件本身的大小是否对数据库的总大小有影响，或者因为 Filestream 存储在 NTFS 中的文件中，并将相对路径存储在数据库中（这是我相信 Filestream 发生了什么），只有文件路径的字符串长度很重要？

我知道最大`VARBINARY`大小仅与 NTFS 的大小无关。我问的是关于 10gb 大小限制的 SQL Server Express。假设您要存储一个 500mb 的文件，这个 500mb 的文件会占用 Express 版本可用的最大大小的 500 mb，还是只占用所存储文件路径的大小？

谢谢大家

对不起，如果问题有点绕：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T21:59:25.260

不，它不计入大小 [http://blogs.msdn.com/b/brian_swan/archive/2010/06/03/sql-server-express-size-limit-filestream-excepted.aspx](http://blogs.msdn.com/b/brian_swan/archive/2010/06/03/sql-server-express-size-limit-filestream-excepted.aspx)

# javascript - 滑块事件不适用于 jqm 1.8.2

> ID：13674304
> 
> 赞同：0
> 
> 时间：2012-12-02T21:55:19.973
> 
> 标签：javascript, jquery-mobile

我有一个 Jquery Mobile 滑块的工作 JSfiddle，它改变了 div 的比例。

我想将它与更新版本的 Jquery Mobile (1.8.2) 一起使用，但它不起作用。任何人都可以帮忙吗？

```
<div data-role="fieldcontain">
<input type="range" name="slider" id="slider" value="60" min="0" max="100" /></div>
<div id="proportion" style="border:1px solid #ccc; width:150px; height:150px;" /></div>​
<script>$("#slider").change(function() { sliderValue = $(this).val(); $("#proportion").width(sliderValue*3); $("#proportion").height(300-sliderValue*3); });​ </script> 
```

[http://jsfiddle.net/gsjBC/](http://jsfiddle.net/gsjBC/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:55:58.990

您使用的 jquery mobile 版本是旧版本（1.0b2），而当前稳定版本是 1.2 。jquery 1.8.2 可能与 jquery mobile 1.0b2 不兼容。因此您可能必须升级到最新版本的 jquery mobile。这是您使用 jquery mobile 1.2 而不是 1.0b2 的小提琴。

[http://jsfiddle.net/gsjBC/1/](http://jsfiddle.net/gsjBC/1/)

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script> 
```

# watir - 使用 WATIR，如何按下 Quibids.com 上的“立即出价”按钮

> ID：13674305
> 
> 赞同：2
> 
> 时间：2012-12-02T21:55:20.217
> 
> 标签：watir

我正在使用 Watir 尝试连接 Quibids“立即出价”（不是立即购买）按钮，但似乎无法获得以下命令的正确组合来单击该按钮：

```
browser.button(:value => 'Bid Now').click 
```

我可以填写页面上的文本字段，所以我的所有对象设置都是正确的。只是这个命令我无法开始工作。每次尝试都会给我一个找不到元素的错误。我也试过 :id 但没有任何效果，在工作了 2 个小时后，我想我会问。

以下是该按钮周围的 IE 中的 html，任何帮助将不胜感激。谢谢。

```
<p class="large-price">
    <span style="background-image: none;" class="price">$5.68</span>
    <span class="medium light-grey">USD</span>
</p>        

<p class="time large-timer2 red">00:00:06</p>

<h2 class="margin-five username-height">
    <span><img style="display: inline;" class="user-icon winning_avatar" src="https://s1.quibidscdn.com/n1/avatards/12.png" width="64" height="64"></span>
    <br>
    <span style="height: 30px;" class="winning">TOLLCOLLECTOR</span>
</h2>

<div id="298085604">
    <p>
        <a class="buttons bid large orange" href="#">Bid Now</a>
    </p>
</div>

<script>
$(document).ready(function(){
    AuctionDetail.updateSavings({"r":0,"v":0,"value":0});
});
</script>

<ul class="price-breakdown">
    <li>Value Price: 
        <span id="product_valueprice" class="float-right">$649.99</span>
    </li>

    <li>Bids Credit:
        <span class="float-right">- <span id="breakdown_bidsvalue">$0.00</span></span>
    </li>

    <li class="bid_breakdown last">
        <span id="breakdown_realbids">0</span> Real / <span id="breakdown_voucherbids">0</span> Voucher                         </li>   

    <li>Buy Now Price<span class="float-right breakdown_buynowtotal">$649.99</span>
    </li>
</ul>

<p>
<a id="buynowbtn" class="buynowbtn buttons large blue" href="#">
    Buy Now 
    <span class="clear"></span> 
    <span class="buynow-price breakdown_buynowbtn">$649.99</span>
</a>
</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:58:22.237

HTML 并未将其列为按钮。它将其列为链接- `<a>`。我从未使用过 WATIR 但鉴于命令是`browser.button`，看来您需要类似的东西`browser.link`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:02:37.163

如果您不进行文本扫描并使用可用的类，则该过程会更快：

我建议使用

```
 browser.a(:class => "buttons bid large orange").click 
```

相反，两者都可以工作，一般来说，如果你可以使用 html 会更好！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T13:57:47.263

我的朋友...

我的两种可能。

```
browser.div(:id, "298085604").text(:name "Bid Now").click 
```

或者

```
browser.div(:text, "Bid Now").click 
```

请记住，HTML 并未显示所有功能，仅显示浏览器识别的 HTML 代码。这就是编程语言的原因。例如（framework，NET）这些加密语言代码供最终用户使用。您无法完全看到该按钮。

祝你好运！

# c++ - 在可变参数模板类中使用可变参数的显式特化 [MSVS '12: Nov. '12 CTP: error C3522]

> ID：13674311
> 
> 赞同：3
> 
> 时间：2012-12-02T21:56:00.967
> 
> 标签：c++, visual-c++, c++11, variadic-templates

我正在尝试在子方法中扩展类的可变参数模板类型列表，如下所示：

```
template<typename... P>
struct Foo
{
    template<P...> // error C3522: 'P' : parameter
                   // pack cannot be expanded in this context
    static void Bar(P... a){}
}; 
```

这段代码有什么问题，还是只是 MSVS '12: Nov. '12 CTP 错误？

（是的，我知道这个例子中的显式模板特化是多余的。）

以上是我重现错误的最简单情况。完整的代码是：

```
template<typename FuncSignature>
class Callback;

template<typename R, typename... P>
class Callback<R (P...)>
{
public:

    Callback()                    : func(0), obj(0) {}

    Callback& operator=(const Callback& rhs)
    { obj = rhs.obj; func = rhs.func; return *this; }

private:
    typedef R (*FuncType)(const void*, P...);
    Callback(FuncType f, const void* o) : func(f), obj(o) {}

private:
    FuncType func;
    const void* obj;

    template<typename FR, typename... FP>
    friend class FreeCallbackFactory;
};

template<typename R, typename... P>
class FreeCallbackFactory
{
private:
    template<R (*Func)(P...)>
    static R Wrapper(const void*, P... a)
    {
        return (*Func)(a...);
    }

public:
    template<R (*Func)(P...)>
    inline static Callback<R (P...)> Bind()
    {
        return Callback<R (P...)>
            (&FreeCallbackFactory::Wrapper<Func>, 0);
    }
};
template<typename R, typename... P>
inline FreeCallbackFactory<R, P...>
    GetCallbackFactory(R (*)(P...))
{
    return FreeCallbackFactory<R, P...>();
}

void Test(){}

int main(int argc, char** argv){
Callback<void ()> cb = GetCallbackFactory(&Test).Bind<&Test>()
} 
```

它在 g++ 中编译得很好，所以我假设只是一个编译器错误，并且持续的发现仍然只指向这一点，除了显式地将它们一一扩展之外，是否有任何可能的解决方法？

* * *

**编辑：** [这已作为错误报告给编译器团队，补丁将在编译器的下一个版本中发布。[关联]](https://connect.microsoft.com/VisualStudio/feedback/details/773637/codename-milan-variadic-template-arguments-fail-to-expand-within-wrapping-template#details)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:04:15.120

代码看起来正确，但我怀疑它是否符合您的预期：声明

```
template <P...>
static void Bar(P... a); 
```

声明一个将`P...`值作为模板参数和函数参数的函数。也就是说，`P`需要的元素是允许非类型参数的类型（例如，整数、指针或引用），并且您需要在调用函数时提供它们各自的值作为模板参数。对这样的函数的调用看起来像这样（尽管 gcc 和 clang 似乎都不需要传递模板参数）：

```
Foo<int, int>::Bar<1, 2>(3, 4); 
```

也就是说，基于 gcc 和 clang 生成的错误消息，它们似乎不允许您创建成员函数模板的专业化，但我尚未在标准中验证这一点。我认为，您可能应该省略模板声明并使用

```
static void Bar(P... a); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:00:38.887

对我来说，代码看起来不正确。包扩展 P... 扩展为一组类型。根据您的目标，正确的做法是删除该`template<P...>`部分，在这种情况下，每个类模板实例都有一个 Bar() 方法，其参数与类相同。另一种情况是这是一个不相关的参数包，在这种情况下会生成一组无限的方法，在这种情况下，您必须声明该方法，如下所示：

```
template<typename... U> static void Bar(U...); 
```

我猜重用名称 P 不会很有用。

# javascript - xml onreadystatechange 问题

> ID：13674321
> 
> 赞同：0
> 
> 时间：2012-12-02T21:56:38.930
> 
> 标签：javascript, ajax, xmlhttprequest, readystate

我正在尝试解决问题`XMLHttpRequest`，但遇到了一个问题：

```
function x(url, callback) { //edited

    xmlHttp.onreadystatechange = function() {
        if ( xmlHttp.readyState == 4 && xmlHttp.status == 200 ) {
            callback(xmlHttp.responseText;) //edited
        } else {
            document.getElementById('content').innerHTML = '<div class="error">Ups, an error ocurred! Server response: <span>'+xmlHttp.responseText+'</span></div>';
        }
    }
    xmlHttp.open('GET', url, true);
    xmlHttp.send(null);
}

function y()
{
    var url = base_url + '?asa=test';
    x(url, function (response) { //edited
       console.log(response);
    });
} 
```

但我的问题是`if readyState == 4`. 的输出`console.log`始终是未定义的，永远不会进入`if`, 只有`else`，这是因为第一次`if`执行时，`readyState`其值为`1`。

所以，任何解决这个问题的方法，因为它让我发疯，我已经尝试了我现在能想到的一切。

## 更新

代码的格式，这是我最后一次尝试的，因为在我将它分开之前，在变量和我试图解决这个问题的各种事情中

顺便说一句，一个`console.log(xmlHttp.readyState)`inside`onreadystatechange`的函数，会一一输出：1、2、3、4

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T22:08:30.437

正如bergi 所说，请求是异步的。**这意味着 x 立即返回，稍后**调用 xmlHttp.onreadystatechange 。如果您需要对 y 内部的响应做某事，请将其作为回调传递，以便 x 可以在适当的时候调用它：

```
function x( callback )
{
    if( pseudocode: request is ok )
    {
        callback( response );
    }
}

function y()
{
    x( url, function( response )
    {
        // do something with the response.
    } );
} 
```

**更新**

xmlHttp.onreadystatechange 在 4 之前使用 readyState 1、2 和 3 调用。

```
if( state === 4 )
{
    if( statuscode === 200 )
    {
        // success
    }
    else
    {
        // failure
    }
}
/*else
{
    ignore states 1, 2 and 3
}*/ 
```

# python - 关于从 QThread 内部调用 QThread 之外的方法的几个问题 - 我的设计有缺陷吗？

> ID：13674322
> 
> 赞同：0
> 
> 时间：2012-12-02T21:56:44.157
> 
> 标签：python, multithreading, qt, pyqt

我有一个具有 GUI 线程和许多不同工作线程的应用程序。在这个应用程序中，我有一个`functions.py`模块，其中包含许多在整个应用程序中使用的不同“实用程序”功能。

昨天应用程序已经发布，一些用户（少数，但仍然）报告了应用程序崩溃的问题。我查看了我的代码并发现了一个可能的设计缺陷，并想与 SO 的可爱人员核实一下，看看我是否正确，这是否确实是一个缺陷。

假设我在我的`functions.py`模块中定义了这个：

```
class Functions:

    solveComputationSignal = Signal(str)
    updateStatusSignal = Signal(int, str)
    text = None

    @classmethod
    def setResultText(self, text):
        self.text = text

    @classmethod
    def solveComputation(cls, platform, computation, param=None):
        #Not the entirety of the method is listed here       
        result = urllib.urlopen(COMPUTATION_URL).read()
        if param is None:
            cls.solveComputationSignal.emit(result)
        else:
            cls.solveAlternateComputation(platform, computation)

        while not self.text:
            time.sleep(3)

        return self.text if self.text else False

    @classmethod
    def updateCurrentStatus(cls, platform, statusText):
        cls.updateStatusSignal.emit(platform, statusText) 
```

我认为这些方法本身就很好。此处定义的两个信号在 GUI 线程中连接。第一个信号弹出一个对话框，其中显示了计算。GUI线程调用该`setResultText()`方法并设置用户输入的结果字符串（如果有人知道更好的方法来等待用户输入文本，而不是睡眠并等待`self.text`变为True，请告诉我）。这`solveAlternateComputation`是同一类中的另一种自动解决计算的方法，但是，它也调用`setResultText()`设置结果文本的方法。

第二个信号也更新主 GUI 的状态栏文本。

更糟糕的是，我认为上述设计虽然可能存在缺陷，但并不是问题所在。

我相信问题在于我调用这些方法的方式，它来自工作线程（请注意，我有多个类似的工作人员，所有这些都是不同的“平台”）

假设我有这个（我有）：

```
class WorkerPlatform1(QThread):

    #Init and other methods are here

    def run(self):

        #Thread does its job here, but then when it needs to present the  
        #computation, instead of emitting a signal, this is what I do

        self.f = functions.Functions

        result = self.f.solveComputation(platform, computation)

        if result:
            #Go on with the task
        else:
            self.f.updateCurrentStatus(platform, "Error grabbing computation!") 
```

在这种情况下，我认为我的缺陷是线程本身没有发出任何信号，而是直接调用驻留在该线程之外的可调用对象。我是否认为这可能导致我的应用程序崩溃？虽然故障模块报告为QtGui4.dll

还有一件事：`Functions`类中的这两种方法几乎同时被许多线程访问。这甚至是可取的 - 让许多线程同时访问驻留在线程之外的方法吗？我会“混淆”我的程序吗？我问的原因是因为那些说应用程序没有崩溃的人报告说，经常`solveComputation()`返回不正确的文本 - 不是一直，而是经常。由于该`COMPUTATION_URL`服务器可能需要一些时间来响应（甚至超过 10 秒），是否有可能，一旦一个线程调用该方法，而`urllib`库仍在等待服务器响应，那么另一个线程可以调用它，导致它使用不同的`COMPUTATION_URL`，这会导致它在某些情况下返回不正确的值？

最后，我正在考虑解决方案：对于我的第一个（崩溃）问题，您认为正确的解决方案是直接`Signal`从线程本身发出 a，然后在 GUI 线程中连接它吗？这是正确的方法吗？

其次，对于`solveComputation`返回不正确的值，我会通过将该方法（和随附的方法）移动到每个`Worker`类来解决它吗？那么我可以直接给他们打电话，并希望每个线程都有正确的响应——或者，几十个不同的响应（因为我有那么多线程）？

谢谢大家，我为文字墙道歉。

**编辑**：我想补充一点，当与某些用户在控制台中运行时，会出现此错误`QObject: Cannot create children for a parent that is in a different thread. (Parent is QLabel(0x4795500), parent's thread is QThread(0x2d3fd90), current thread is WordpressCreator(0x49f0548)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T02:43:04.050

如果您真的将这样的`Functions`类与将结果存储在类属性上的类方法一起使用，那么您的设计就有缺陷，并在多个工作人员之间共享。它应该使用所有实例方法，并且每个线程都应该使用此类的一个实例：

```
class Functions(QObject):

    solveComputationSignal = pyqtSignal(str)
    updateStatusSignal = pyqtSignal(int, str)

    def __init__(self, parent=None):
        super(Functions, self).__init__(parent)
        self.text = ""

    def setResultText(self, text):
        self.text = text

    def solveComputation(self, platform, computation, param=None):
        result = urllib.urlopen(COMPUTATION_URL).read()
        if param is None:
            self.solveComputationSignal.emit(result)
        else:
            self.solveAlternateComputation(platform, computation)

        while not self.text:
            time.sleep(3)

        return self.text if self.text else False

    def updateCurrentStatus(self, platform, statusText):
        self.updateStatusSignal.emit(platform, statusText)

# worker_A
    def run(self):
        ...
        f = Functions()
# worker_B
    def run(self):
        ...
        f = Functions() 
```

另外，为了做你的`urlopen`，而不是做 sleep 来检查它什么时候准备好，你可以利用[`QNetworkAccessManager`](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qnetworkaccessmanager.html)来提出你的请求并使用信号在结果准备好时得到通知。

# javascript - 按下键时jQuery单击锚点

> ID：13674326
> 
> 赞同：0
> 
> 时间：2012-12-02T21:57:08.550
> 
> 标签：javascript, jquery

这就是我现在所拥有的——它应该模拟用户按下向左或向右箭头键时的锚点点击，但它没有——有什么想法吗？

```
 $('body').bind('keydown',function(e){
        if(e.keyCode == 39){
            $(".next > a").click();
        }
        else if(e.keyCode == 37){
            $(".back > a").click();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T22:02:30.180

触发`click`事件不会跟随链接 AFAIK，您需要获取 url 并手动执行：

```
location.href = $(".next > a").attr('href'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T22:08:50.190

```
$('body').bind('keydown',function(e){
    if(e.keyCode == 39){
        $(".next > a").get(0).click();
    }
    else if(e.keyCode == 37){
        $(".back > a").get(0).click();
    }
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-02T22:04:16.470

```
$('body').bind('keydown',function(e){
    if(e.keyCode == 39){
        $(".next > a").trigger('click');
    }
    else if(e.keyCode == 37){
        $(".back > a").trigger('click');
    }
}); 
```

使用触发器

# scala - scala脚本和应用程序的区别

> ID：13674327
> 
> 赞同：9
> 
> 时间：2012-12-02T21:57:13.827
> 
> 标签：scala

scala 脚本和 scala 应用程序有什么区别？请提供一个例子

我正在阅读的书说脚本必须始终以结果表达式结尾，而应用程序以定义结尾。不幸的是，没有给出明确的例子。

请帮我澄清一下

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T22:50:18.050

我认为作者的意思是一个常规的 scala 文件需要定义一个类或一个对象才能工作/有用，你不能使用顶级表达式（因为编译文件的入口点是 pre -定义）。例如：

```
println("foo")

object Bar {
    // Some code
} 
```

该`println`语句在文件的顶层是无效的`.scala`，因为唯一的逻辑解释是在编译时运行它，这实际上没有意义。

相比之下，Scala 脚本可以在顶层包含表达式，因为这些是在脚本运行时执行的，这又是有意义的。另一方面，如果 Scala 脚本文件只包含定义，那么它也是无用的，因为脚本不知道如何处理这些定义。但是，如果您以某种方式使用定义，那又可以了，例如：

```
object Foo {
    def bar = "test"
}

println(Foo.bar) 
```

后者作为 scala 脚本是有效的，因为最后一条语句是使用前一个定义的表达式，而不是定义本身。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-27T09:18:07.240

## 比较

脚本的特点：

*   与应用程序一样，脚本在运行之前被编译。实际上，编译器在编译之前会将脚本翻译成应用程序，如下所示。
*   无需自己运行编译器 - scala 在您运行脚本时为您完成。
*   感觉与 bash、python 或 ruby​​ 等脚本语言非常相似——您可以直接看到编辑的结果，并获得非常快速的调试周期。
*   您不需要提供`main`方法，因为编译器会为您添加一个。

*Scala 脚本*往往对可以在单个文件中实现的较小任务很有用。

*另一方面，当您的项目开始变得更加复杂时，*Scala 应用程序更适合。*它们允许将任务拆分为不同的文件和命名空间，这对于保持清晰很重要。*

 *## 例子

如果您编写以下脚本：

```
#!/usr/bin/env scala

println("foo") 
```

Scala 2.11.1 编译器会假装（[github 上的源代码](https://github.com/scala/scala/blob/v2.11.1/src/compiler/scala/tools/nsc/ast/parser/Parsers.scala#L410)）你写过：

```
object Main {
  def main(args: Array[String]): Unit =
    new AnyRef {
      println("foo")
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T22:04:25.377

好吧，我一直认为这是一个 Scala 脚本：

```
$ cat script

#!/usr/bin/scala
!#

println("Hello, World!") 
```

运行简单：

```
$ ./script 
```

另一方面，应用程序必须`.class`使用运行时显式编译和执行`java`。*

# c++ - 在混合 C/C++ 程序中协调 malloc 和 new 的“正确”方法是什么？

> ID：13674332
> 
> 赞同：19
> 
> 时间：2012-12-02T21:57:56.067
> 
> 标签：c++, c, memory-management, malloc, new-operator

我有一个混合的 C/C++ 程序。它包含一个针对 C 的 flex/bison 解析器，而其余部分是 C++。

作为 C 语言，生成的解析器和扫描器使用`malloc`、`realloc`和来管理它们的内存`free`。它们足以暴露钩子，允许我提交我自己的这些函数的实现。如您所料，（C++）程序的其余部分“想要”使用`new`,`delete`等。

做一点研究似乎表明相关标准并不能保证这种混合应该有效。特别是 C“堆”不一定是 C++“空闲区域”。看来这两个方案可以互相践踏。

最重要的是，有一天（很快）这个程序可能想要集成一个定制的堆实现，比如[tcmalloc](http://goog-perftools.sourceforge.net/doc/tcmalloc.html)，C 和 C++ 都使用。

**在这里做什么是“正确的”？**

考虑到集成 tcmalloc（它解释了如何与 C 程序链接）的愿望，我很想在 C++ 内存管理中找到一些跨类型、跨线程、跨所有内容的重载/挂钩/任何东西。有了它，我可以将所有 C++ 分配/释放调用指向它们的 C 等价物（这反过来又落在 tcmalloc 上。）

这样的泛银河全球 C++ 钩子是否存在？可能它已经在做我想做的事了，类似于`ios_base::sync_with_stdio`默认情况下如何秘密地结合 iostream 和 stdio？

我对讨论 stdio 与 iostream 不感兴趣，也不对切换解析器生成器或使用 C++ flex/bison 骨架（它们引入了独立的头痛）感兴趣。

**编辑**：请包括支持您的答案的 C++ 标准部分的名称。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-02T22:00:35.387

该标准*确实*保证混合两种分配变体将起作用。它*不允许*的是诸如调用`free`来自的内存之类的事情`new`，因为它们可能对这两种类型使用完全不同的竞技场。

如果你记得为给定的内存块调用正确的释放函数，你会没事的。如果您遵守规则，他们*不会*互相践踏，如果您不遵守规则，那么从技术上讲，*您正在*践踏，而不是他们:-)

* * *

C++11 标准的控制部分是如下`20.6.13 C library`声明：

*   函数`calloc`、`malloc`和是根据 C 标准提供的`free`。`realloc`
*   函数不使用`::operator new()`or `::operator delete()`。
*   这允许传统 C 的东西使用与普通 C++ 内存分配不同的内存领域。

鉴于您最终提出的建议，第二个要点很有趣，`tcmalloc`它取代了 C 传统函数并让 C++ 也使用它。

标准中有一个脚注解释了为什么他们不使用 let `malloc()`call `::operator new()`：

> 目的是通过调用 std::malloc() 或 std::calloc() 来实现 operator new()。换句话说，他们想要避免循环依赖。

但是，虽然它*允许* `operator new()`调用`malloc()`，但我不确定标准是否真的*需要*它。因此，为了安全起见，您可能希望同时注入`tcmalloc`C*和*C++ 领域。

您已经表明您已经知道如何为 C 执行此操作。对于 C++，只需在代码中提供整套全局`operator new()/delete()`函数即可完成，并适当地编写为`tcmalloc`在幕后调用。C++ 标准规定`3.7.4 Dynamic storage duration`：

> 该库为全局分配和释放函数提供默认定义。一些全局分配和释放函数是可替换的。
> 
> C++ 程序应最多提供一个可替换分配或解除分配函数的定义。任何此类函数定义都会替换库中提供的默认版本。
> 
> 以下分配和释放函数在程序的每个翻译单元的全局范围内隐式声明：
> 
> *   `void* operator new(std::size_t);`
> *   `void* operator new[](std::size_t);`
> *   `void operator delete(void*);`
> *   `void operator delete[](void*);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T22:54:26.217

行。挖出该标准的旧工作草案（2/28/2011 rev 3242。）似乎相关部分是`3.7.4 Dynamic storage duration`和`18.6.1 Storage allocation and deallocation`。

简而言之，我想要的泛银河钩子似乎是全局 new 和 delete 运算符本身。如果一个人尊重某些语义（在`3.7.4.1`and `3.7.4.2`: 基本上根据需要委托给`new_handler`）一个人被允许替换

```
void* operator new(std::size_t);
void* operator new[](std::size_t);
void operator delete(void*);
void operator delete[](void*); 
```

阻止整个 C++ 程序的默认内存管理。我仍然找不到证明@paxdiablo 正确的部分，但我愿意暂时使用它。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-02T22:21:57.800

您不必担心 Flex 或 Bison 生成的代码分配的任何内存；他们自己处理。其余的，只需使用`new`and `delete`。（并且 Flex 和 Bison 能够生成某种 C++。总的来说，我发现通过一个简单的脚本运行输出，使用`sed`足以使它们的输出真正与 C++ 兼容。）

# ios - 如何在谓词中引用对象 ID？

> ID：13674333
> 
> 赞同：0
> 
> 时间：2012-12-02T21:57:58.647
> 
> 标签：ios, core-data

我需要连接 2 个实体。第一个 - `Player`(attr = "name")，第二个 - `Profiles`(attr: "player_id", "command_id" 和其他东西)。`"player"`Profiles 和 Player 之间存在关系。我想显示个人资料实体，但使用玩家姓名而不是 player_ids。player_id 是`[[[_player objectID] URIRepresentation] absoluteString]`. 我该怎么打电话`[fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"player_id==player.<object id>"]]`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T17:31:51.497

我最初的方法是错误的。应该使用 NSManagedObject 子类对象而不是它们的 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T02:49:15.540

我认为您可能追求的是 Apple 的谓词变量替换。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdImporting.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdImporting.html)

向下滚动到“Cocoa Fundamental”并检查代码以了解 Apple 是如何做到的。

# php - PHP curl 登录时间过长

> ID：13674337
> 
> 赞同：2
> 
> 时间：2012-12-02T21:58:29.127
> 
> 标签：php, authentication, curl, digest

我有一个 Web 服务，可以在我的浏览器中使用，但不能在 PHP 脚本中使用 CURL 调用。

这里我使用的代码与发送的登录名/密码示例一起使用。

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_VERBOSE, true);
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_DIGEST);
curl_setopt($ch, CURLOPT_USERPWD,'BmN+GP4VBev5tVzJU/altsyXXw0PXYcunbT8F8EatlbpctBXZp1OO2ySQyekZb5729qQPkdwdDBoUxMjBu1mlvv5Bt90GGRwyvEHGTMlT9cjs5YRpBJxEhksVyoL1Z4pwLAq3gKSj+PGW0HQhOSr8h7lyMG+9HJjL7pKeeds+Byn+TYnaium1MsGFg4TiE6Ztvr6rVpdaJSI3einSABuC1PCnNPkbHEdtwdrd8DU2jKcQ1fzderhmuJQE6pls6wwQjWF6sCTUTo/upUHUe0p5GY+7pKCHBXgNEhRhx3JgweiJN8ErxoiPCCIOdOScAEfcgZOgqQDGsJqnhuQ/5fKqg==:passwordOfTheUser');
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLINFO_HEADER_OUT, true);
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_NOBODY, false);
curl_setopt($ch, CURLOPT_URL, $url);
$result = curl_exec($ch);
var_export(curl_getinfo($ch))."\n"; 
```

如果我查看 getInfo 的内容，我得到了这个

```
[...]
'request_header' => 'GET /uriNotRelevant.queryString=Data HTTP/1.1
Authorization: Digest     username="BmN+GP4VBev5tVzJU/altsyXXw0PXYcunbT8F8EatlbpctBXZp1OO2ySQyekZb5729qQPkdwdDBoUxMjBu1mlvv5Bt90GGRwyvEHGTMlT9cjs5YRpBJxEhksVyoL1Z4pwLAq3gKSj+PGW0HQhOSr8h7lyMG+9HJjL7pKeeds+Byn+TYnaium1MsGFg4TiE6Ztvr6rVpdaJSI3einSABuC1PCnNPkbHEdtwdrd8DU2jKcQ1fzderhmuJQE6pls6w", realm="SVCCompagnonRelay Digest Authentication", nonce="MTM1NDQ4Nzc2NjkzNjoxYTRhMThkOTk5Yjc4OWY1Y2Q0MWQ3NzY3NzRlYzFlYw==", uri="/uriNotRelevant.queryString=Data", cnonce="MTczNDU1", nc=00000001, qop="auth", response="c319b14a40bf54955b764117d7f4bbc3"
Host: example.org
Accept: */*
Cookie: MBLPRDSession=C7B717115F119BAAB5C5BC308DD7FB18; WASMBLPRD2AND=mbltrap21and

',
) 
```

您可以看到包含 login:password 的标头被截断。我尝试手动设置标题，但重现 DIGEST 协议更难

我不知道现在该怎么办:-(

您知道如何扩大摘要登录大小吗？

**Edit²：** 解决了问题，请参阅我的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:00:45.310

我搜索了 CURL 的源代码，发现了这个：

 ~~~~```
//http_digets.c
#define MAX_VALUE_LENGTH 256
#define MAX_CONTENT_LENGTH 1024 
```~~  ~~```
//urldata.c
#define MAX_CURL_USER_LENGTH 256
#define MAX_CURL_PASSWORD_LENGTH 256
#define MAX_CURL_USER_LENGTH_TXT "255"
#define MAX_CURL_PASSWORD_LENGTH_TXT "255" 
```

也许这就是为什么我的标题被 256 个字符截断的原因。我会尝试用更高的值重新编译 curl，看看它是否能解决问题。

我将 urldata.c 的数据更改为 4096 和 4095（是的，它很大），效果非常好。我用 PHP 解决了我的问题。我创建了另一个问题，我无法在命令行中使用 curl

```
#curl http://google.fr
curl: (2) Failed initialization 
```

但即使没有改变任何东西我也有这个问题。这与我的修改无关。也许版本对我的系统来说太更新了（最后一个）。这是另一个问题。无论如何，我不会在我的网络服务器的命令行中使用它。~~~~

# c - mktime() 段错误

> ID：13674338
> 
> 赞同：1
> 
> 时间：2012-12-02T21:58:29.957
> 
> 标签：c, segmentation-fault, mktime

我正在尝试向包含日期信息的事件结构重复添加一周。我这样做是为了在某个时间之前创建一个事件的多个实例。我的 mktime 函数出现段错误，其中 full_time = mktime(&caltime); 我不知道为什么。

```
void multiple(icalevent event, int is_location){
    icalevent temp;
    int rrule_bound = atoi(event.rrule);
    int rtime_bound = atoi(event.rtime);
    int start_bound = atoi(event.start);
    int stime_bound = atoi(event.stime);
    char buffer[9];
    struct tm caltime;
    time_t full_time;
    char time_str[15];

    temp = cpystruct(event, is_location); 
    while((start_bound <= rrule_bound) && (stime_bound <= rtime_bound)){
        memset(&caltime, 0, sizeof(struct tm));
        strncpy(time_str, temp.start, 9);
        strncat(time_str, temp.stime, 6);

        strptime(time_str, "%Y%m%d%H%M%S", &caltime);
        caltime.tm_mday += 7;
        full_time = mktime(&caltime);
        if(caltime.tm_isdst == 1){
            caltime.tm_hour -= 1;
        }
        full_time = mktime(&caltime);

        strftime(buffer, 9, "%Y%m%d", &caltime);
        start_bound = atoi(buffer);
        strncpy(temp.end, buffer, 8);
        strncpy(temp.start, buffer, 8);

        if((start_bound <= rrule_bound) && (stime_bound <= rtime_bound)){
            /*create a sort string*/

            calendar[percent_full] = cpystruct(temp, is_location);
            printst(calendar[percent_full]);
            percent_full++;
        }
        else{
            break;
        }

    }

    return;
    } 
```

`icalevent`结构：

```
 typedef struct{
        char start[9]; /*"YYYYMMDD*/
        char stime[7]; /*"HHMMSS"*/
        char end[9]; /*"YYYYMMDD"*/
        char etime[7]; /*"HHMMSS"*/
        char rrule[9]; /*"YYYYMMDD"*/
        char rtime[7]; /*"HHMMSS"*/
        char *location; /*"2343 fake street"*/
        char *summary; /*"Halloween party"*/
        char *sort_str; /*"YYYYMMDDHHMMSSHalloween party*/
     } icalevent 
```

*编辑*：

```
icalevent cpystruct(icalevent temp, int is_location) {
    icalevent perm;
    strncpy(perm.start, temp.start, 9);
    strncpy(perm.stime, temp.stime, 7);
    strncpy(perm.end, temp.end, 9);
    strncpy(perm.etime, temp.etime, 7);
    strncpy(perm.rrule, temp.rrule, 9);
    strncpy(perm.rtime, temp.rtime, 7);
    if(is_location) {
        perm.location = strdup(temp.location);
    } else {
        perm.location = NULL;
    }

    perm.summary = strdup(temp.summary);
    perm.sort_str = strdup(temp.sort_str);
    return perm;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:17:02.953

最有可能的是，您的问题不是`mktime`，而是您的副本语句之一。第一个是

```
strncat(time_str, temp.stime, 6); 
```

这`time_str`可能不是 NUL 终止的。

同样在这里

```
strncpy(temp.end, buffer, 8);
strncpy(temp.start, buffer, 8); 
```

`temp.end`并且`temp.start`可能在之前被 NUL 终止，但你不能确定。改用就好`strcpy`了。

下一个是

```
calendar[percent_full] = cpystruct(temp, is_location);
printst(calendar[percent_full]);
percent_full++; 
```

我看不到结尾的检查`calendar`。因此，可能会有超出日历末尾的写入。

顺便说一句，当你这样做时

```
if(caltime.tm_isdst == 1){
    caltime.tm_hour -= 1;
} 
```

`tm_hour`可能变成负数。

# c# - 保存 WPF 应用程序页面的状态

> ID：13674345
> 
> 赞同：1
> 
> 时间：2012-12-02T21:59:24.110
> 
> 标签：c#, wpf, wpf-controls, savestate

我正在 WPF 中创建一个软件，并且在该软件中，用户可以加载图像并配置地图。

基本上，一旦加载了（地图的）图像，用户就可以添加其他图像（如宝藏或怪物的图片等），将它们拖放到地图的图像中。

当用户关闭软件并重新打开它时，我希望在关闭应用程序之前打开最后一张图像，并且添加的 UI 元素位于同一个位置，就像用户设置的方式一样。

我能想到的一种方法是将图像文件存储在字节数组中，或者将文件位置和其他 UI 元素位置保存在文本文件中，并在每次加载应用程序时检查它。

但是，有没有更简单的方法来解决这个问题？有没有办法可以存储 WPF 应用程序页面的状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:47:47.097

也许您可以在退出时保存 Windows xaml 并在应用程序启动时重新加载。

```
 public MainWindow()
    {
        InitializeComponent();
        Loaded += new RoutedEventHandler(MainWindow_Loaded);
        Closing += new CancelEventHandler(MainWindow_Closing);
    }

    void MainWindow_Loaded(object sender, RoutedEventArgs e)
    {
       LoadExternalXaml();
    }

    void MainWindow_Closing(object sender, CancelEventArgs e)
    {
        SaveExternalXaml();
    }

    public void LoadExternalXaml()
    {
        if (File.Exists(@"C:\Test.xaml"))
        {
            using (FileStream stream = new FileStream(@"C:\Test.xaml", FileMode.Open))
            {
                this.Content = XamlReader.Load(stream);
            }
        }
    }

    public void SaveExternalXaml()
    {
        using (FileStream stream = new FileStream(@"C:\Test.xaml", FileMode.Create))
        {
            XamlWriter.Save(this.Content, stream);
        }
    } 
```

# algorithm - 找到最小化给定空间和约束点的距离的点？

> ID：13674352
> 
> 赞同：0
> 
> 时间：2012-12-02T22:00:15.183
> 
> 标签：algorithm, coordinates, computational-geometry, trigonometry, mathematical-optimization

我有一个关于算法的问题：

我们在 2D 空间中有一个固定点，我们称其为 S(x,y) 和两个连接的长度（L1 和 L2）。这两个链接在一个称为 E(x,y) 的公共关节处连接。我们在空间中有另一个点，它是 L2 的端点，我们称之为 F(x,y)。

所以我们 L1 有两个端点 S 和 E，而 L2 有 E 和 F。

当我们在空间中得到一个点 P(x,y) 时。我们如何找到最接近 P 的 F(x,y) 的坐标？我想找到将链接 L1 和 L2 带到那个点的 θ1 和 θ2 的角度？

[请参阅此链接以获取我的问题的图形表示](http://postimage.org/image/flgbcmbpx/)

* * *

请参阅这张图片[http://postimage.org/image/qlekcv1qz/](http://postimage.org/image/qlekcv1qz/)，您将能够看到我现在遇到的真正问题。

所以我把它表述为优化问题。目标函数在哪里：

```
 * arg min |P-F| 
```

具有约束 θ1 和 θ2，其中 θ1 ∈ [ O , π] 和 θ2 ∈ [ O , π/2]。

所以我们有，

```
 * xE = xS + L1  * Cosθ1  and yE = yS + L1 * Sinθ1
   * xF = xE + L2 * Cos (θ1 + θ2 )  and yF = yE + L2 * sin ( θ1 + θ2) 
```

这里我们的长度为 L1 = 105 和 L2 = 113.7，点 S 是原点，即 xS = O 和 yS = O。

你能否给我一个提示，如何编写我的函数或任何优化问题，让我得到 θ1 和 θ2 的值，从而使点 F 和点 P 之间的距离最小化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:35:11.730

因此，如果我理解正确，您的描述相当于有两个长度为 L1 和 L2 的刚性杆，L1 的一端固定在 S 处，另一端通过柔性接头连接到 L2（在某个未定义的点 E），而您想让 L2 的另一端（点 F）尽可能靠近某个点 P。如果是这种情况，那么：

```
 If |L1-L2| < |P-S| < |L1+L2| then F = P
 If |L1-L2| > |P-S| then F = S + (P-S)*|L1-L2|/|P-S|
 If |P-S| > |L1+L2| then F = S + (P-S)*|L1+L2|/|P-S| 
```

那是你要的吗？

见 imnage [http://postimage.org/image/l1ktt0qtb/](http://postimage.org/image/l1ktt0qtb/)

如果点 P 比点 S 更接近 |L1-L2| （假设它们不相等），那么点 F 不能“到达”点 P，即使 E 处的角度弯曲到 180 n 度。那么你能得到的最接近的是半径为|L1-L2|的圆上的某个地方。和中心 S。在这种情况下，最佳 F 由具有方向 (PS) 和幅度 |L1-L2| 的向量给出，上面是我的案例 2 和下面的图 A。请注意，如果 L1=L2，则永远不会出现这种情况。

如果点 P 与点 S 的距离大于距离 |L1+L2|，则点 F 不能“到达”点 P，即使 E 处的角度被拉直为 0 度。那么你能得到的最接近的是半径为 |L1+L2| 的圆上的某个地方。和中心 S。在这种情况下，最佳 F 由具有方向 (PS) 和幅度 |L1+L2| 的向量给出，上面是我的案例 3 和下面的图 B。

如果点 P 位于两个限制圆之间，则将有两种解决方案（一种如下图 3 所示，另一种是 L1 和 L2 反映在由矢量 PS 形成的镜像线中。在这种情况下，“最佳” F*等于*点 P。

如果你想知道 Theta1 和 Theta 2 的角度，那么这是一个不同的问题（我看到你现在已经添加了）。

对没有直角的三角形使用余弦规则。

规则是

```
 C = acos[(a^2 + b^2 - c^2)/(2ab)] 
```

其中三角形的边长为 a、b 和 c，C 是边 a 和 b 之间的夹角。您正在尝试生成一个边长为 l1、l2 和 d=|SP| 的三角形，只要没有两个长度（总和）比第三个短，这将是可能的。

通过适当地用 l1、l2 和 d 代替 a、b、anc c，您将能够求解每个内角 A、B 和 C。然后您可以使用这些角 A、B、C 加上角在向量 PS 和水平之间（也许称为 D？）来计算你的 theta1 和 theta2。

# testing - 从决策表到地图

> ID：13674358
> 
> 赞同：0
> 
> 时间：2012-12-02T22:01:01.177
> 
> 标签：testing, automated-tests, drools, fitnesse, fitnesse-slim

我想从 DecisionTable 或类似的东西创建一个动态数据结构。

据我所知，只有静态类型的数据结构是可能的，如下所示：

维基代码：

```
|should I buy milk|
|cash in wallet|credit card|broke?|
|0             |0          |yes   | 
```

这些列必须通过 setter 映射到夹具：setCashInWallet(int cash) 和 setCreditcard(int credit)。

我喜欢做的是更灵活的事情，每列都填充到一个列表中：

```
List<Map<String, Object>> decisionTable = new ArrayList<Map<String, Object>>();    
Map<String, Object> row = new  HashMap<String, Object>(); 
```

在测试的设置中，我指定了目标对象，例如：com.domain.MoneyIHave。在夹具中，我将通过反射将数据结构转换为 this 的实例。

用于向 drools 会话添加事实（数据结构）的 api 是松耦合的。

```
StatefulKnowledgeSession ksession = kbase.newStatefulKnowledgeSession();
for( Object fact : facts ) { //<----- loose baby!
    ksession.insert( fact );
}
ksession.fireAllRules();
ksession.dispose(); 
```

如果可能的话，我可以创建几个不受数据结构更改影响的固定装置。这些固定装置几乎可以处理所有情况。

但我找不到任何这样的例子。

Tnx 提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:28:23.670

你看过餐桌吗？

[http://fitnesse.org/FitNesse.UserGuide.SliM.TableTable](http://fitnesse.org/FitNesse.UserGuide.SliM.TableTable)

# cuda - 通过预取内在函数改进 CUDA SDK matrixMul

> ID：13674361
> 
> 赞同：0
> 
> 时间：2012-12-02T22:01:26.013
> 
> 标签：cuda, gpgpu, prefetch

这是 CUDA SDK (2.3) matrixMultiply 内核的一部分：

```
for (int a = aBegin, b = bBegin;
         a <= aEnd;
         a += aStep, b += bStep) {

    __shared__ float As[BLOCK_SIZE][BLOCK_SIZE];
    __shared__ float Bs[BLOCK_SIZE][BLOCK_SIZE];

    int XI=wA * ty + tx;
    int XII=wB * ty + tx;
    ////////////////////
    // PREFETCH BLOCK //
    ////////////////////
    AS(ty, tx) = A[a + XI];
    BS(ty, tx) = B[b + XII];

    __syncthreads();

    for (int k = 0; k < BLOCK_SIZE; ++k)
        Csub += AS(ty, k) * BS(k, tx);

    __syncthreads();
} 
```

此版本的矩阵乘法将切片带入共享内存并在共享内存带宽上执行计算。我想通过将下一次迭代的数据预取到 L1 缓存中来提高性能。[我按照这里](https://stackoverflow.com/questions/13265993/prefetch-in-cuda-through-c-code/13267888#13267888)的建议使用预取内在函数，并将以下命令插入到`PREFETCH BLOCK`上面：

```
 long long int k,kk;
    k=((long long int)A+aStep); if(k<=aEnd) prefetch_l1(k+XI);
    kk=((long long int)B+bStep); if(kk<=aEnd) prefetch_l1(kk+XII); 
```

经过测试，两个版本（有或没有预取）执行非常相似（平均 3 次运行）：

> *没有预取：* 6434.866211（毫秒）
> 
> *预取：* 6480.041016（毫秒）

**问题：**

我希望看到预取的一些加速，但我对结果感到困惑。任何机构都有理由说明为什么这两个实现非常接近？也许我正在执行错误的预取。

先感谢您。

**更多信息：**

显卡：特斯拉 C2050

CUDA 版本：4.0

```
inline __device__ void prefetch_l1 (unsigned int addr)
{

  asm(" prefetch.global.L1 [ %1 ];": "=r"(addr) : "r"(addr));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:05:10.727

预取（在任何架构上）仅在以下情况下才有用：

*   你有空闲的内存带宽和
*   您可以在正确的时间启动预取，即在实际需要数据之前足够远的时间以及在空闲内存带宽可用的时间。

如果您不能满足这些标准，那么预取将无济于事，甚至可能弊大于利。

# ruby-on-rails - 在 ajax 请求中渲染部分会导致错误

> ID：13674366
> 
> 赞同：0
> 
> 时间：2012-12-02T22:01:43.923
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, jquery

我有一个部分我试图通过 create.js.erb 加载，问题是当我可以从视图中加载部分时它加载得很好，但是当我尝试在 ajax 操作中调用它时，每个 [https都会得到一个 NoMethodError ://gist.github.com/4191176](https://gist.github.com/4191176)

**标签.rb**

```
class Hashtag < ActiveRecord::Base

  attr_accessible :text, :profile_image_url, :from_user, :created_at, :tweet_id, :hashtag, :from_user_name

 def self.pull_hashtag(hashtag)
  hashtag_scrubbed = hashtag
  Twitter.search("%#{hashtag}", :lang => "en", :count => 100, :result_type => "mixed").results.map do |tweet|
    unless exists?(tweet_id: tweet.id)
        create!(
            tweet_id: tweet.id,
            text: tweet.text,
            profile_image_url: tweet.user.profile_image_url,
            from_user: tweet.from_user,
        from_user_name: tweet.user.name, 
            created_at: tweet.created_at,
        hashtag: hashtag
        )   
        end     
    end
  end
end 
```

**hashtags_controller**

```
class HashtagsController < ApplicationController

    def home 

    end

    def vote
        @random_hashtags = Hashtag.order("RANDOM()").limit(4)
    end

    def show

    end

    def index

    end

    def create
        Hashtag.pull_hashtag(params[:hashtag])
        respond_to do |format|
        format.html { redirect_to vote_path }
        format.js
    end
     end
end 
```

**创建.js.erb**

```
$(".live-votes").slideDown(2222).prepend("<%= escape_javascript(render(:partial => 'shared/vote_tweets', :object => @random_hashtags)) %>") 
```

**_vote_tweet 部分**

```
<% @random_hashtags.each do |hashtag| %>
<div class="span4 twitter-spans-v1">
        <div id="tweet-block-v1" class="hashtag-tweet-database-container">
        <div class="tweet-block-border-v1">
        <div class="tweet-block-spacing-v1">
            <div class="twitter-block-author-v1">
            <a class="twitter-block-user-v1" target="_blank" href="https://twitter.com/<%= hashtag.from_user %>">
            <span class="twitter-author-image-v1"><img alt="" class="twitter-author-image-photo-v1" src="<%= hashtag.profile_image_url %>"></span>
            <span class="twitter-author-name-v1"><%= hashtag.from_user_name %></span>
            <span class="twitter-author-nickname-v1">@<%= hashtag.from_user %></span>
            </a>
            <iframe class="twitter-follow-button-v1" scrolling="no" frameborder="0" src="//platform.twitter.com/widgets/follow_button.html#align=right&button=grey&screen_name=<%= hashtag.from_user %>&show_count=false&show_screen_name=false&lang=en" allowtransparency="true">
            </iframe>
            </div>
        <div class="twitter-text-container-v1">
        <p class="twitter-text-field-v1">
        <%= hashtag.text %>
        </p>
        </div>
        <div class="twitter-footer-v1">
            <a class="twitter-view-details-v1" target="_blank"  href="https://twitter.com/<%= hashtag.from_user %>/statuses/<%= hashtag.tweet_id %>">
            <span class="tweet-date-v1"><%= hashtag.created_at.strftime("%d %b %Y") %></span>
            </a>
            <span class="twitter-vote-button-v1"><a href="#" class="btn btn-mini btn-primary">#WINNING</a>
</span>
            <script type="text/javascript" src="//platform.twitter.com/widgets.js"></script>
            <ul class="twitter-intent-ul-v1">
                <li class="twitter-intent-li-v1"><a href="https://twitter.com/intent/tweet?in_reply_to=<%= hashtag.tweet_id %>" class="twitter-intent-tweet" title="Reply"></a></li>
                <li class="twitter-intent-li-v1"><a href="https://twitter.com/intent/retweet?tweet_id=<%= hashtag.tweet_id %>"  class="twitter-intent-retweet" title="Retweet"></a></li>
                <li class="twitter-intent-li-v1"><a href="https://twitter.com/intent/favorite?tweet_id=<%= hashtag.tweet_id %>"  class="twitter-intent-favorite" title="Favorite"></a></li>
            </ul>
        </div>
        </div>
        </div>
        </div>
    </div>
                    <% end %> 
```

**错误**

```
NoMethodError in Hashtags#create

Showing ./app/views/shared/_vote_tweets.html.erb where line #1 raised:

undefined method `each' for nil:NilClass
Extracted source (around line #1):

1: <% @random_hashtags.each do |hashtag| %>
2: <div class="span4 twitter-spans-v1">
3:      <div id="tweet-block-v1" class="hashtag-tweet-database-container">
4:      <div class="tweet-block-border-v1">
Trace of template inclusion: app/views/hashtags/create.js.erb 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T00:23:29.613

是`:object => @random_hashtags`的，与给@random_hashtags 一个值不同，没有阅读手册我认为这是说你可以`vote_tweet`在部分“_vote_tveet”中使用一个变量（在这种情况下，`@random_hashtags`它具有必须启动的值） . 所以如果你仍然`@random_hashtags`在你的部分中使用并在控制器中给它一个值，那么你应该跳过`:object => @random_hashtags`create.js.erb 中的行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T22:42:07.217

如果我定义 @random_hashtags = Hashtag.order("RANDOM()").limit(4) 会有所帮助

在创建控制器中。

# ios - 如何修复这些 Apple Mach-O 链接器错误？

> ID：13674367
> 
> 赞同：4
> 
> 时间：2012-12-02T22:01:45.780
> 
> 标签：ios, xcode

我正在使用 Xcode 4.5。在尝试构建我刚开始使用的应用程序后，我收到以下 Apple Mach-O 链接器错误消息。

![在此处输入图像描述](../Images/4c1eab528b183c25da3805d3dba01820.png)

这是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-02T22:12:39.497

要修复前两个错误，请将 AdSupport 和 CoreLocation 框架添加到“Link with Binaries”构建阶段。

最后一个错误可能是由于您没有在“编译源”构建阶段中包含所有 .m 文件 - 丢失的文件可能称为 GHHaiku.m。

# c++ - 为什么我要重新定义；不同的基本类型？

> ID：13674368
> 
> 赞同：2
> 
> 时间：2012-12-02T22:01:48.270
> 
> 标签：c++, visual-c++

为什么我在 Visual C++ 中尝试此操作时会出现错误？

```
struct S { };
typedef S *S; 
```

C++[不让您`typedef`使用以前仅声明为`class`or`struct`](https://stackoverflow.com/a/612476/541686)的名称吗？
还是我误解了发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T22:16:09.837

C++ 确实允许您对现有的类名进行 typedef，但只能以非常受限的方式。一旦你宣布`struct S`你可以做

```
typedef struct S S; 
```

但你不能做

```
typedef struct S *S; // ERROR 
```

或者

```
typedef int S; // ERROR 
```

在第一种情况下，您重新定义`S`为*指针*的事实是破坏它的原因。

语言规范在 7.1.3/2 中说

> 在给定的非类作用域中，typedef 说明符可用于重新定义在该作用域中声明的任何类型的名称，以引用它已经引用的类型。

“已经引用”是关键部分。简而言之，您可以重新定义类名以代表*相同的*类类型，但不能代表*指向*该类类型的指针或其他任何东西。

* * *

前面提到的 C++ 标准部分也允许您编写重复的 typedef，例如

```
typedef int T;
typedef int T;
typedef int T; 
```

这在 C 中是非法的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T22:09:27.570

这在 C 中是可以的，因为结构名称不会与类型名称冲突 - 结构名称是`struct S`，类型名称是 just `S`。但是，在 C++ 中，所有名称都被认为来自同一个名称池，因此示例中的两个名称会发生​​冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T22:06:23.257

您正在尝试定义与“S”（结构名称）冲突的 S（typedef）。

# ios - 是否可以从侧面而不是底部滑入键盘

> ID：13674370
> 
> 赞同：1
> 
> 时间：2012-12-02T22:01:58.543
> 
> 标签：ios, uikeyboard, first-responder

当控件成为 First Responder 时，通常键盘会从底部滑入。如何更改该行为并使其从左侧或右侧滑入？这对我正在处理的特定 UI 更有意义。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T23:57:49.270

您可以尝试移动拦截`UIKeyboardWillShowNotification`事件的键盘框架。要检索键盘框架，请参阅[this answer](https://stackoverflow.com/a/6457567/846273)或[this other one](https://stackoverflow.com/a/10957980/846273)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T22:09:16.880

您可以创建自己的视图，用作键盘。

# python - 修改这个 Python 程序以只生成奇数的子集？

> ID：13674378
> 
> 赞同：0
> 
> 时间：2012-12-02T22:02:32.880
> 
> 标签：python, string, subset

我希望它将一组数字作为输入，例如 [1,2,3,4]，并且只给出具有奇数和的子集。例如，[1]、[1,2]、[2,3] 等。

我没有尝试太多，我不知道从哪里开始。抱歉，我对编程很陌生，但这是我到目前为止所拥有的。它生成所有可能的子集。

```
 def rsubsets(s):
        if len(s) == 0:
           return [[]]
        temp = rsubsets(s[1:])
        new = []
        for itm in temp:
           new.append(itm)
        n = len(new)
        for j in range(n):
           new[j] = new[j] + [s[0]]
        return temp + new 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T22:11:51.417

建立在您现有的功能上：

```
def odd_subsets(s):
    return [x for x in rsubsets(s) if sum(s) % 2 == 1] 
```

或者没有理解：

```
def odd_subsets(s):
    odd = []
    for subset in rsubsets(s):
        if sum(s) % 2 == 1:
            odd.append(subset)
    return odd 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T22:10:47.080

```
def odd_subsets(s):
    lRet = []
    for i in range(len(s)):
        lRet.extend([c for c in itertools.combinations(s,i+1) if sum(c)%2==1])
    return lRet 
```

如果您对使用初始功能一无所知，这是最简单的方法

```
def rsubsets(s):
    def all_subsets(s):
        if len(s) == 0:
           return [[]]
        temp = all_subsets(s[1:])
        new = []
        for itm in temp:
           new.append(itm)
        n = len(new)
        for j in range(n):
           new[j] = new[j] + [s[0]]
        return temp + new
    return [i for i in all_subsets(s) if sum(i)%2==1] 
```

这几乎是调用您的初始递归函数并过滤结果。

另一种方法是使用标志...

```
def rsubsets(s,bFilter=True):
    if len(s) == 0:
        return [[]]
    temp = rsubsets(s[1:],False)
    new = []
    for itm in temp:
       new.append(itm)
    n = len(new)
    for j in range(n):
       new[j] = new[j] + [s[0]]
    if bFilter:
        return [i for i in temp+new if sum(i)%2 ==1]
    return temp + new 
```

# javascript - Loading page with AngularJS routes

> ID：13674381
> 
> 赞同：1
> 
> 时间：2012-12-02T22:02:42.833
> 
> 标签：javascript, angularjs

I want to use Angular routes for creating small website for mobile. Is there any way to add loading icon while loading a partial and swap the entire page to the right when switching? (like in native mobile app animation

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T07:47:24.523

But change:

*   $beginRouteChange to $routeChangeStart
*   $endRouteChange to $routeChangeSuccess

and things will work.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T05:56:52.867

Check out [Misko's answer](https://stackoverflow.com/questions/11972026/delaying-angularjs-route-change-until-model-loaded-to-prevent-flicker/11972028#11972028) about delaying route changing. He links to an example, too which is helpful. Basically, you have to add to your routing logic a `resolve` function which will allow you to prevent showing of the new route until asynchronous calls are resolved, and observing the `$beginRouteChange` and `$endRouteChange` on the `$rootScope` ([example code here](http://mhevery.github.com/angular-phonecat/app/js/app.js))

# java - java.lang.ArrayIndexOutOfBoundsException 错误？

> ID：13674382
> 
> 赞同：0
> 
> 时间：2012-12-02T22:02:59.847
> 
> 标签：java, indexoutofboundsexception, arrays

我试图拆分一个数组，将一个部分存储在一个数组中，将另一部分存储在另一个数组中。然后我试图翻转 2 并将它们存储在一个新数组中。这就是我所拥有的

```
public int[] flipArray(){
        int value = 3;
        int[] temp1 = new int[value];
        int[] temp2 = new int[(a1.length-1) - (value+1)];
        int[] flipped = new int[temp1.length+temp2.length];

    System.arraycopy(a1, 0, temp1, 0, value);
    System.arraycopy(a1, value+1, temp2, 0, a1.length-1);
    System.arraycopy(temp2, 0, flipped, 0, temp2.length);
    System.arraycopy(temp1, 0, flipped, temp2.length, temp1.length); 
            return flipped;
    }
    private int[]a1={1,2,3,4,5,6,7,8,9,10}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:08:10.933

当您想要访问范围 [0, length - 1] 之外的数组元素时，您会得到 ArrayIndexOutOfBoundsException；

您可以自己找到问题，如果您使用调试器，或者在每次调用 System.arraycopy 之前放置一个 System.out.println(text)，您可以在其中输出源数组和目标数组的数组长度以及元素的数量复制

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T22:07:19.430

您的索引和数组长度已关闭：

```
public int[] flipArray(){
    int value = 3;
    int[] temp1 = new int[value];
    int[] temp2 = new int[a1.length - value];
    int[] flipped = new int[a1.length];

    System.arraycopy(a1, 0, temp1, 0, value);
    System.arraycopy(a1, value, temp2, 0, temp2.length);
    System.arraycopy(temp2, 0, flipped, 0, temp2.length);
    System.arraycopy(temp1, 0, flipped, temp2.length, temp1.length); 
    return flipped;
}
private int[]a1={1,2,3,4,5,6,7,8,9,10}; 
```

关键是要理解`System.arraycopy`不复制最后一个索引处的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T22:07:47.160

摆脱不必要的索引操作：

```
public int[] flipArray(){
int value = 3;
int[] temp1 = new int[value];
int[] temp2 = new int[a1.length - value];
int[] flipped = new int[temp1.length+temp2.length];

System.arraycopy(a1, 0, temp1, 0, value);
System.arraycopy(a1, value, temp2, 0, temp2.length);
System.arraycopy(temp2, 0, flipped, 0, temp2.length);
System.arraycopy(temp1, 0, flipped, temp2.length, temp1.length); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T22:09:55.887

这一行是错误的：

```
System.arraycopy(a1, value+1, temp2, 0, a1.length-1); 
```

您从位置 4 开始，想要复制 9 个元素。这意味着它会尝试将数组中索引 4 的元素复制到 12。

# c# - 使用 XmlTextReader 循环通过具有相同名称的 XML 属性

> ID：13674388
> 
> 赞同：0
> 
> 时间：2012-12-02T22:03:35.057
> 
> 标签：c#, xml

我正在用 XmlTextReader 做一些练习代码。我已经编写了一些非常基本的 XML，如下所示：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<task name="mixed_sprite_task_test">
    <sprite>
        <type>animatedSprite</type>
        <id>0</id>
        <name>animatedSprite</name>
        <fileName>iyezoz</fileName>
        <startingPositionX>200</startingPositionX>
        <startingPositionY>200</startingPositionY>
        <sheetSizeX>12</sheetSizeX>
        <sheetSizeY>35</sheetSizeY>
        <startingFrameX>0</startingFrameX>
        <startingFrameY>0</startingFrameY>
        <startingState>standing</startingState>
        <movementSpeed>15</movementSpeed>
        <frameDelay>0.055</frameDelay>
    </sprite>
    <sprite>
        <type>staticSprite</type>
        <id>0</id>
        <name>staticSprite</name>
        <fileName>Super_Mario_63</fileName>
        <startingPositionX>0</startingPositionX>
        <startingPositionY>0</startingPositionY>
    </sprite>
    <sprite>
        <type>simpleSprite</type>
        <id>0</id>
        <name>simpleSprite</name>
        <fileName>imgres</fileName>
        <startingPositionX>100</startingPositionX>
        <startingPositionY>100</startingPositionY>
        <movementSpeed>15</movementSpeed>
    </sprite>
</task> 
```

该文件显示我有一个`task`. 在任务中我有 3`sprite`秒。在我的代码中，我想遍历每个`sprite`并收集信息。

我可以毫无问题地从第一个获取数据`sprite`。是否有某种方法可以遍历具有同名属性的 xml？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T22:15:07.273

我更喜欢 Linq2Xml。

```
var xDoc = XDocument.Parse(xmlstring); //or XDocument.Load(filename);
var sprites = xDoc.Descendants("sprite")
                .Select(s=>s.Elements()
                            .ToDictionary(e=>e.Name.LocalName,e=>(string)e))
                .ToList(); 
```

您可以将其用作

```
var type = sprites[0]["type"]; 
```

或者可以采取安全行动

```
string delay;
if (sprites[1].TryGetValue("frameDelay", out delay))
{
    Console.WriteLine(delay);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T22:15:55.300

您可以选择所有名为“sprite”的节点

```
 var myXml = new XmlDocument();
  myXml.Load(myDocument);
  XmlNode rootElement = myXml.DocumentElement;
  foreach (XmlNode item in rootElement.SelectNodes(@"/task/sprite"))
  {
      // do stuff with node        
  } 
```

# c# - 使用 WIF 在 Asp.Net 4.5 上进行自定义身份验证

> ID：13674391
> 
> 赞同：2
> 
> 时间：2012-12-02T22:03:52.980
> 
> 标签：c#, .net, .net-4.5, wif

我使用声明设置了一个使用 Azure ACS 和 .net 4.5 的应用程序。我的应用程序也使用 Dropbox。我想知道我是否可以让用户单独使用 Dropbox 来识别他们自己。

当用户使用保管箱和唯一 ID 登录时，我从保管箱获得令牌。我在 .net 管道中的哪个位置告诉它我已经对用户进行了身份验证，这样的主体也在下一个请求中设置。

为了使示例简单，假设我有一个带有两个输入的表单。姓名，通过。如果名称是 1234 并且通过是 1234。那么我想告诉 asp.net 管道用户已通过身份验证。这可能吗？还是我需要创建自定义令牌处理程序以将其集成到 WIF 中？

**更新**

我发现了这一点：我想对解决方案发表评论，如果有安全问题我应该注意。

```
 var sam = FederatedAuthentication.SessionAuthenticationModule;
        if (sam != null)
        {
            var cp = new ClaimsPrincipal(new ClaimsIdentity(new List<Claim> {new Claim("Provider","Dropbox")}, "OAuth"));
            var transformer = FederatedAuthentication.FederationConfiguration.IdentityConfiguration.ClaimsAuthenticationManager;
            if (transformer != null)
            {
                cp = transformer.Authenticate(String.Empty, cp);
            }
            var token = new SessionSecurityToken(cp);
            sam.WriteSessionTokenToCookie(token);
        } 
```

所有代码：

```
public HttpResponseMessage get_reply_from_dropbox(string reply_from)
{
    var response = this.Request.CreateResponse(HttpStatusCode.Redirect);
    var q = this.Request.GetQueryNameValuePairs();
    var uid = q.FirstOrDefault(k => k.Key == "uid");
    if (!string.IsNullOrEmpty(uid.Value))
    {
        var sam = FederatedAuthentication.SessionAuthenticationModule;
        if (sam != null)
        {
            var cp = new ClaimsPrincipal(new ClaimsIdentity(new List<Claim> {new Claim("Provider","Dropbox")}, "OAuth"));
            var transformer = FederatedAuthentication.FederationConfiguration.IdentityConfiguration.ClaimsAuthenticationManager;
            if (transformer != null)
            {
                cp = transformer.Authenticate(String.Empty, cp);
            }
            var token = new SessionSecurityToken(cp);
            sam.WriteSessionTokenToCookie(token);
        }
    }

    response.Headers.Location = new Uri(reply_from);
    return response;
}
public async Task<string> get_request_token_url(string reply_to)
{

    var client = new HttpClient();
    client.DefaultRequestHeaders.Authorization =
        new AuthenticationHeaderValue("OAuth", 
            string.Format("oauth_version=\"1.0\", oauth_signature_method=\"PLAINTEXT\", oauth_consumer_key=\"{0}\", oauth_signature=\"{1}&\"",
            "<dropboxkey>","<dropboxsecret>"));
    var data = await client.GetStringAsync("https://api.dropbox.com/1/oauth/request_token");

    var pars = data.Split('&').ToDictionary(k=>k.Substring(0,k.IndexOf('=')),v=>v.Substring(v.IndexOf('=')+1));

    return "https://www.dropbox.com/1/oauth/authorize?oauth_token=" + pars["oauth_token"]
        + "&oauth_callback=<MYSITE>/api/dropbox/get_reply_from_dropbox?reply_from=" + reply_to;

} 
```

它通过用户请求身份验证 url 起作用，当用户对我的应用程序进行身份验证时，它返回到 get_reply_from_dropbox 并登录用户。

我还需要处理一些其他的事情，比如如果请求不是来自 Dropbox。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:40:25.400

我使用 WIF 3.5（不完全相同）为我的站点执行此操作，但它确实一起使用了 ACS+forms auth+OAuth，基本上它使用 form auth（您可以完全控制）或使用 ACS/OAuth 并将帐户链接在一起或者只使用 ACS/OAuth 本身。

但是，您将不得不以不同的方式处理注销。

[http://garvincasimir.wordpress.com/2012/04/05/tutorial-mvc-application-using-azure-acs-and-forms-authentication-part-1/](http://garvincasimir.wordpress.com/2012/04/05/tutorial-mvc-application-using-azure-acs-and-forms-authentication-part-1/)

DropBox 使用 OAuth，所以我会走那条路，然后如果您想“链接帐户”，请为链接到 DropBox Oauth 帐户的表单身份验证创建一个用户/密码。用户不一定要知道正在使用什么身份验证约定。ASP.NET MVC 4 在默认项目中内置了 OAuth/forms 身份验证。

# c# - 反序列化对象时没有对象错误的映射

> ID：13674395
> 
> 赞同：9
> 
> 时间：2012-12-02T22:04:10.530
> 
> 标签：c#, object, serialization, encoding, stream

我有以下 C# 代码，*它应该将*任意对象序列化为字符串，然后当然反序列化它。

```
public static string Pack(Message _message)
{
   BinaryFormatter formatter = new BinaryFormatter();

   MemoryStream original = new MemoryStream();
   MemoryStream outputStream = new MemoryStream();

   formatter.Serialize(original, _message);
   original.Seek(0, SeekOrigin.Begin);

   DeflateStream deflateStream = new DeflateStream(outputStream, CompressionMode.Compress);
   original.CopyTo(deflateStream);

   byte[] bytearray = outputStream.ToArray();

   UTF8Encoding encoder = new UTF8Encoding();
   string packed = encoder.GetString(bytearray);
   return packed;
} 

public static Message Unpack(string _packed_message)
{
    UTF8Encoding encoder = new UTF8Encoding();
    byte[] bytearray = encoder.GetBytes(_packed_message);

    BinaryFormatter formatter = new BinaryFormatter();

    MemoryStream input = new MemoryStream(bytearray);
    MemoryStream decompressed = new MemoryStream();

    DeflateStream deflateStream = new DeflateStream(input, CompressionMode.Decompress);
    deflateStream.CopyTo(decompressed); // EXCEPTION

    decompressed.Seek(0, SeekOrigin.Begin);

    var message = (Message)formatter.Deserialize(decompressed); // EXCEPTION 2
    return message;
} 
```

但问题是，无论何时运行代码，我都会遇到异常。使用上面的代码并如下所示调用它，我收到*InvalidDataException: Unknown block type。流可能已损坏。*在标记`// EXCEPTION`线上。

在搜索了这个问题之后，我试图放弃通货紧缩。这只是一个很小的变化： in `Pack`，`bytearray`从`original.ToArray()`和 in 中创建`Unpack`，我`Seek()` `input`代替`decompressed`和使用`Deserialize(input)`代替`decompressed`太。唯一改变的结果：异常位置和主体不同，但它仍然发生。我收到*SerializationException: No map for object '201326592'。*在`// EXCEPTION 2`.

我似乎没有看到有什么问题。也许这是整个序列化的想法……问题在于以某种方式管理*实例*是必要的`Message`，因为这些对象包含在服务器和客户端应用程序之间传输的信息。（序列化逻辑在两端引用的*.Shared* DLL 项目中，但是，现在，我只首先开发服务器端。）还必须告诉我，我只使用`string`输出，因为现在，服务器和客户端之间的TCP连接是基于字符串读写的。因此，它必须以某种方式降低到字符串的水平。

这是 Message 对象的样子：

```
[Serializable]
public class Message
{
    public MessageType type;
    public Client from;
    public Client to;
    public string content;
} 
```

（`Client`现在是一个空类，只有`Serializable`属性，没有属性或方法。）

这就是调用 pack-unpack 的方式（来自`Main()`...）：

```
 Shared.Message msg = Shared.MessageFactory.Build(Shared.MessageType.DEFAULT, new Shared.Client(), new Shared.Client(), "foobar");

 string message1 = Shared.MessageFactory.Pack(msg);
 Console.WriteLine(message1);

 Shared.Message mess2 = Shared.MessageFactory.Unpack(message1); // Step into... here be exceptions
 Console.Write(mess2.content); 
```

这是显示 IDE 中发生的情况的图像。控制台窗口中的输出是 的值`message1`。 ![显示异常发生和输出的图像](../Images/d00dd953f73e67c50a26c588b6e7e08f.png)

不幸的是，一些调查还显示问题可能在于`bytearray`变量。运行`Pack()`时，编码器创建字符串后，数组包含 152 个值，然而，在它被解码后`Unpack()`，数组有**160**个值。

我很感激任何帮助，因为我真的没有想法，遇到这个问题，进度就会受到影响。谢谢你。

# （更新）最终解决方案：

我要感谢大家的回答和评论，因为我已经找到了解决方案。谢谢你。

[Marc Gravell](https://stackoverflow.com/users/23354/marc-gravell)是对的，我错过了关闭，`deflateStream`因此，结果要么是空的，要么是损坏的。我花时间重新思考并重写了方法，现在它完美无缺。甚至通过网络流发送这些字节的目的也在起作用。

此外，正如[Eric J.](https://stackoverflow.com/users/141172/eric-j)所建议的，我已切换`ASCIIEnconding`到`string`使用.`byte[]``Stream`

固定代码如下：

```
public static string Pack(Message _message)
{
    using (MemoryStream input = new MemoryStream())
    {
       BinaryFormatter bformatter = new BinaryFormatter();
       bformatter.Serialize(input, _message);
       input.Seek(0, SeekOrigin.Begin);

       using (MemoryStream output = new MemoryStream())
       using (DeflateStream deflateStream = new DeflateStream(output, CompressionMode.Compress))
       {
           input.CopyTo(deflateStream);
           deflateStream.Close();

           return Convert.ToBase64String(output.ToArray());
       }
    }
}

public static Message Unpack(string _packed)
{
    using (MemoryStream input = new MemoryStream(Convert.FromBase64String(_packed)))
    using (DeflateStream deflateStream = new DeflateStream(input, CompressionMode.Decompress))
    using (MemoryStream output = new MemoryStream())
    {
        deflateStream.CopyTo(output);
        deflateStream.Close();
        output.Seek(0, SeekOrigin.Begin);

        BinaryFormatter bformatter = new BinaryFormatter();
        Message message = (Message)bformatter.Deserialize(output);
        return message;
    }
} 
```

现在一切都发生得恰到好处，如下图所示。这是最初的预期输出。*服务器*和*客户端*可执行文件相互通信并且消息传播......并且它被正确地序列化和反序列化。

![显示正确输出的图像](../Images/b17f9c87e591f01a12df0cd4de81fe67.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T22:34:47.867

除了现有的关于 Encoding vs base-64 的观察，请注意您还没有关闭 deflate 流。这很重要，因为compression-streams buffer：如果你不关闭，它可能不会写完。对于短流，这可能意味着它什么也不写。

```
using(DeflateStream deflateStream = new DeflateStream(
    outputStream, CompressionMode.Compress))
{
    original.CopyTo(deflateStream);
}
return Convert.ToBase64String(outputStream.GetBuffer(), 0,
    (int)outputStream.Length); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T22:15:39.427

您的问题很可能出在 UTF8 编码中。您的字节并不是真正的字符串，UTF-8 是一种具有不同字节长度的字符编码。这意味着字节数组可能与正确编码的 UTF-8 字符串不对应（例如，末尾可能缺少一些字节。）

尝试使用恒定长度编码的 UTF16 或 ASCII（生成的字符串可能包含控制字符，因此无法通过 HTTP 或电子邮件等方式打印或传输。）

但是如果你想编码为字符串，习惯上使用 UUEncoding 将字节数组转换为真正的可打印字符串，那么你可以使用任何你想要的编码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T22:24:41.837

当我对您的 Pack() 和 Unpack() 运行以下 Main() 代码时：

```
 static void Main(string[] args)
    {
        Message msg = new Message() { content = "The quick brown fox" };

        string message1 = Pack(msg);
        Console.WriteLine(message1);

        Message mess2 = Unpack(message1); // Step into... here be exceptions
        Console.Write(mess2.content);
    } 
```

我看到字节数组

```
byte[] bytearray = outputStream.ToArray(); 
```

是空的。

我确实稍微修改了您的序列化类，因为您没有发布包含类的代码

```
public enum MessageType
{
    DEFAULT = 0
}

[Serializable]
public class Message
{
    public MessageType type;
    public string from;
    public string to;
    public string content;
} 
```

我建议采取以下步骤来解决这个问题：

*   一路检查中间结果。您还看到数组中的 0 个字节吗？Pack() 返回的字符串值是多少？
*   处理完您的流后处理它们。最简单的方法是使用`using`关键字。

**编辑**

正如 Eli 和 Marc 正确指出的那样，您不能在 UTF8 字符串中存储任意字节。映射不是双射的（你不能在没有信息丢失/失真的情况下来回走动）。您将需要一个双射映射，例如 Marc 建议的 Convert.ToBase64String() 方法。

# ruby-on-rails - Rails、pjax 和标题标签

> ID：13674402
> 
> 赞同：0
> 
> 时间：2012-12-02T22:05:04.240
> 
> 标签：ruby-on-rails, ruby, http, pjax

我有方法：

```
# Set html <title>
def page_title lang
  if request.xhr?
    response.headers["X-PJAX-Title"] = t lang
  else
    @html_title = t lang
  end
end 
```

它应该有效，但我在语言环境中遇到俄语单词的问题：`Авторизация`，作为回应`ÐÐ²ÑÐ¾ÑÐ¸Ð·Ð°ÑÐ¸Ñ`=）

Pjax 在响应正文中接受标题标签，但将其添加到每个文件中——它不是 DRY 方式。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:17:17.870

如果你在控制器中设置你的页面标题，就像你在控制器中提到的那样，你可以有一个全局 pjax 回调

```
$(document).on('pjax:complete', function(event, request) {
  var title = request.getResponseHeader('X-PJAX-Title');
  $('document').attr('title',title);
}) 
```

# java - Java中是否有像Rectangle类这样的circle类

> ID：13674407
> 
> 赞同：14
> 
> 时间：2012-12-02T22:05:28.357
> 
> 标签：java, geometry, rectangles

嘿，我正在编写一个快速程序，遇到了一些需要使用圆圈进行碰撞检测的地方。但据我所知，只有 Rectangle 类具有 .intersects(Point p) 方法。有没有类似圆圈的东西我可以用同样的方式？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-02T22:08:49.810

您可以使用包中调用的类[`Ellipse2D`](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/Ellipse2D.html)，`java.awt.geom`因为它有一些似乎是您正在寻找的方法。宽度等于高度的椭圆是圆。

重载之一`contains`允许您测试圆点碰撞：

> ```
> boolean contains(double x, double y) 
> ```
> 
> 测试指定的坐标是否在 的边界内 `Shape`，如 insideness 的定义所述。

另一个调用的函数`intersects`允许您测试圆矩形碰撞：

> ```
> boolean intersects(double x, double y, double w, double h) 
> ```
> 
> 测试内部是否与`Shape`指定矩形区域的内部相交。

注意这`Ellipse2D`是一个抽象类；您将使用其中一个嵌套子类`Ellipse2D.Double`或`Ellipse2D.Float`，唯一的区别是用于存储维度的数据类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T22:08:31.253

有一个 ellipse2D，这就像正方形是矩形，圆形是椭圆一样。

[http://docs.oracle.com/javase/7/docs/api/java/awt/geom/Ellipse2D.html](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/Ellipse2D.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T22:08:35.957

[java.awt.Shape 也是。](http://docs.oracle.com/javase/7/docs/api/java/awt/Shape.html#intersects%28java.awt.geom.Rectangle2D%29)以及实现它的所有类：Arc2D、Arc2D.Double、Arc2D.Float、Area、BasicTextUI.BasicCaret、CubicCurve2D、CubicCurve2D.Double、CubicCurve2D.Float、DefaultCaret、[Ellipse2D](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/Ellipse2D.html)、Ellipse2D.Double、Ellipse2D.Float、GeneralPath、Line2D、 Line2D.Double, Line2D.Float, Path2D, Path2D.Double, Path2D.Float, 多边形, QuadCurve2D, QuadCurve2D.Double, QuadCurve2D.Float, Rectangle, Rectangle2D, Rectangle2D.Double, Rectangle2D.Float, RectangularShape, RoundRectangle2D, RoundRectangle2D.Double, RoundRectangle2D.Float

# asp.net - 如何保护 API

> ID：13674409
> 
> 赞同：0
> 
> 时间：2012-12-02T22:06:05.210
> 
> 标签：asp.net, json, ssl

我正在开发一个 API 作为 Windows 应用程序和数据库之间的中间人。网络服务器将只是一个 ASP。NET 通用处理程序返回 json。用户将登录应用程序，他们的凭据将通过网络传输。从那里我要做的是生成一个会话密钥，从那时起应用程序可以在每个请求中使用它。在可预见的将来，这不会是一个开放的 API。现在我想知道这是否足够安全？我怎样才能阻止人们使用提琴手来复制电话？有更好的方法吗？如果我使用 SSL 会有帮助吗？

我不想通过使用 oauth 使事情复杂化。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:25:46.870

使用 SSL。为了获得会话令牌，客户端应该使用通过 SSL 传输的用户名和密码来验证自己。一旦通过身份验证，令牌应通过 SSL 传输到服务器，以防止中间人攻击。

所以这是流程：

1.  客户端通过 SSL 将其凭据（用户名和密码）发送到 Web 方法
2.  Web 方法验证凭据并生成会话令牌并将此会话令牌返回给客户端。
3.  客户端在对受保护资源的后续请求中发送会话令牌。
4.  服务器验证令牌，如果有效则授予对受保护资源的访问权限。

您使用简单的[表单身份验证](http://msdn.microsoft.com/en-us/library/ff647070.aspx)来生成会话令牌。[FormsAuthentication.Encrypt](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.encrypt.aspx)和[FormsAuthentication.Decrypt](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.decrypt.aspx)方法对您来说可能是一个好的开始。表单身份验证令牌包含当前经过身份验证的用户的加密值。如果您在网络场中运行，请确保您的网络场的所有节点上都有静态[机器密钥](http://msdn.microsoft.com/en-us/library/ff649308.aspx)，否则在一个节点上加密的会话令牌可能无法在另一个节点上解密。

作为会话令牌的替代方案，您可以使用基于SSL 的[基本身份验证。](http://en.wikipedia.org/wiki/Basic_access_authentication)缺点是每次请求都会通过网络发送凭据。即使您使用 SSL，密码仍然通过网络传输，因此这种方法不如会话令牌安全，但更易于设置。

# sql - SQL：从不同的表中减去并使用 GROUP BY

> ID：13674418
> 
> 赞同：0
> 
> 时间：2012-12-02T22:07:00.920
> 
> 标签：sql, sql-server-2008-r2

我一直在试图找到解决我问题的答案。我了解如何从单独的表中减去，但不是在我需要它工作的上下文中。

```
 SELECT I.IngredientName AS 'Ingredient Name', QOH AS 'Quantity On Hand',       
      SUM(BrewLine.Quantity) AS 'Total Ingredient Used'
      FROM INGREDIENT I
      INNER JOIN BrewLine 
      ON I.IngredientName = BrewLine.IngredientName 
      GROUP BY I.IngredientName, QOH 
```

我需要另一个字段，从 SUM(BrewLine.Quantity) 中减去 QOH，以便在输出中保留一个“数量”。有什么方法可以解决这个问题？如果我只是减去它们，然后必须将它们包含在 GROUP BY 中。我的输出都是歪斜的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T22:13:12.623

您可以尝试使用分区函数而不是分组函数，我认为这是您想要完成的......

```
SELECT 
    I.IngredientName AS 'Ingredient Name', 
    QOH AS 'Quantity On Hand',    
    QOH - SUM(BrewLine.Quantity) OVER(PARTITION BY I.IngredientName) AS 'Amount'
FROM INGREDIENT I
INNER JOIN BrewLine 
      ON I.IngredientName = BrewLine.IngredientName 
```

# java - 需要此查询中的“前五个“id”

> ID：13674420
> 
> 赞同：0
> 
> 时间：2012-12-02T22:07:03.317
> 
> 标签：java, mysql

我早些时候有人帮助我并且已经接近，我需要从这个查询中获得前五个“id”。正在发生的事情是我正在获得一个 id 而不是前五名。有谁知道如何纠正这个？这是查询：

```
(
SELECT id,
     firstName,
     lastName,
     SUM(fileSize) AS TotalBytes,
     SUM(fileSize)/COUNT(*) AS Average
FROM   roster_cs368 AS a
JOIN htmp_cs368  AS b USING (id)
) UNION (
SELECT id,
     firstName,
     lastName,
     SUM(fileSize) AS TotalBytes,
     SUM(fileSize)/COUNT(*) AS Average
FROM   roster_cs368 AS a
JOIN atmp_cs368  AS b USING (id)
)
ORDER BY TotalBytes DESC
LIMIT 5 
```

谢谢你！这也是更大程序的一部分，因此是 java 标记。

这是架构：

```
mysql> select * from roster_cs368
-> ;
+--------+-----------+-----------+
| id     | firstName | lastName  |
+--------+-----------+-----------+
| apn7cf | Allen     | Newton    |
| atggg3 | andrew    | goebel    | 
```

主键在哪里，

```
mysql> select * from htmp_cs368;
+------------+----------+------------+----------+----------+-------+------+-------+----------------------+
| filePerms  | numLinks | id         | idGroup  | fileSize | month | day  | time  | fileName             |
+------------+----------+------------+----------+----------+-------+------+-------+----------------------+
| drwx------ |        2 | schulte    | faculty  |      289 | Nov   |    7 | 2011  | Java                 |
| -rw-r--r-- |        1 | schulte    | faculty  |      136 | Apr   |   29 | 2012  | LD                   |
| drwxr-xr-x |        3 | schulte    | faculty  |      177 | Mar   |   20 | 2012  | Upgrade              | 
```

这里没有主键，

```
mysql> select * from atmp_cs368;
+------------+----------+--------------+----------+----------+-------+------+-------+-----------------------------+
| filePerms  | numLinks | id           | idGroup  | fileSize | month | day  | time  | fileName                    |
+------------+----------+--------------+----------+----------+-------+------+-------+-----------------------------+
| drwxr-xr-x |        2 | remierm      | 203      |      245 | Sep   |   17 | 14:40 | 148360_sun_studio_12        |
| drwx---rwx |       31 | antognolij   | sasl     |     2315 | Oct   |   24 | 12:28 | 275                         |
| -rwx------ |        1 | kyzvdb       | student  |       36 | Sep   |   19 | 13:05 | 275hh                       | 
```

这里没有主键。

我的查询是：

```
produce a list of the five members of roster_cs368,
    and their ids who use the most space (number of bytes)
    in htmp_cs368 and atmp_cs368 in descending order--
    greediest first.  display total number of bytes and
    average size of file 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T22:10:18.703

你可以这样做：

```
SELECT * FROM(
(
SELECT id,
     firstName,
     lastName,
     SUM(fileSize) AS TotalBytes,
     SUM(fileSize)/COUNT(*) AS Average
FROM   roster_cs368 AS a
JOIN htmp_cs368  AS b USING (id)
) UNION (
SELECT id,
     firstName,
     lastName,
     SUM(fileSize) AS TotalBytes,
     SUM(fileSize)/COUNT(*) AS Average
FROM   roster_cs368 AS a
JOIN atmp_cs368  AS b USING (id)
)
) as somealias ORDER BY TotalBytes DESC
LIMIT 5 
```

# android - 如何获取活动历史堆栈的列表？

> ID：13674421
> 
> 赞同：32
> 
> 时间：2012-12-02T22:07:06.723
> 
> 标签：android, android-activity

我正在为我的应用程序中的一个问题而苦苦挣扎。我想提供一种方法来列出以前打开的活动的历史记录。

我认为有两种潜在的解决方案，但我不确定找到一种稳定的方法来实现其中任何一个。

*   以某种方式使用 SDK 中的函数。我尝试使用 getPackageManager() 和 getActivityManager() 但找不到任何合适的解决方案
*   实现我自己的历史，但是我将不得不覆盖 startActivity 并且我真的不想这样下去，因为一个活动可以以其他多种方式启动。

那么有没有办法使用 SDK 中的函数来做到这一点？

非常感谢。

编辑：

我有另一个想法，它有点不同。是否可以使用某种接收器来监听特定应用程序（我的）的“开始/完成活动”事件并跟踪堆栈历史记录？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2015-02-03T10:27:27.663

使用 ADB 命令：

```
adb shell dumpsys activity activities  # displays list of activities in back stack

adb shell dumpsys activity process  # displays list process in back stack

adb shell dumpsys activity intents  # displays list of pending intents in back stack

adb shell dumpsys activity broadcast  # displays list of broadcast in back stack

adb shell dumpsys activity services  # displays list of services running in back stack 
```

使用活动管理器：

```
ActivityManager m = (ActivityManager) ctx.getSystemService( ctx.ACTIVITY_SERVICE );
List<RunningTaskInfo> runningTaskInfoList =  m.getRunningTasks(10);
Iterator<RunningTaskInfo> itr = runningTaskInfoList.iterator();

while(itr.hasNext()){
    RunningTaskInfo runningTaskInfo = (RunningTaskInfo)itr.next();
    int id = runningTaskInfo.id;
    CharSequence desc= runningTaskInfo.description;
    int numOfActivities = runningTaskInfo.numActivities;
    String topActivity = runningTaskInfo.topActivity.getShortClassName();
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-12-02T22:43:40.340

> 那么有没有办法使用 SDK 中的函数来做到这一点？

不，对不起。

> 是否可以使用某种接收器来监听特定应用程序（我的）的“开始/完成活动”事件并跟踪堆栈历史记录？

如果您只支持 API 级别 14 及更高版本（又名 Android 4.0+），则可以使用`registerActivityLifecycleCallbacks()`on 。`Application`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-03T05:08:03.380

您可以使用以下方法：

```
ActivityManager am = (ActivityManager)this.getSystemService(Context.ACTIVITY_SERVICE);

int sizeStack =  am.getRunningTasks(2).size();

for(int i = 0;i < sizeStack;i++){

    ComponentName cn = am.getRunningTasks(2).get(i).topActivity;
    Log.d("", cn.getClassName());
} 
```

获取活动堆栈的列表。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-01-08T12:53:21.600

实现 Activity History 的一个非常简单的方法是使用类名

`activity_history_list`在你的定义`mainActivity`

```
public static List<String> activity_history_list; 
```

并且在`onStart()`您创建的每个活动中（例如`MainActivity`）

```
 @Override
    public void onStart() {
        super.onStart();

        activity_history_list.add(MainActivity.this.getClass().getSimpleName());
    } 
```

在另一个活动中（例如`SettingActivity`）

```
 @Override
        public void onStart() {
            super.onStart();

            MainActivity.activity_history_list.add(SettingActivity.this.getClass().getSimpleName());
        } 
```

您可以`activity_history_list`在任何地方访问`static`，您可以一次打印所有历史记录或通过以下方式访问历史记录中的特定活动`index`

# linq - 使用 Linq 将 Unicode 字符串插入数据库

> ID：13674424
> 
> 赞同：1
> 
> 时间：2012-12-02T22:07:24.557
> 
> 标签：linq, sql-server-2008, unicode, hebrew

当我尝试执行此操作时：

```
INSERT INTO [DB_NAME].[dbo].[Table]
([Column])
VALUES('some_hebrew_characters') 
```

我在列中只得到问号。如果我将其更改为 N'some_hebrew_characters' - 就可以了。为什么会这样？我怎样才能把它翻译成Linq？

如何使此表默认将所有数据视为 Unicode？我的列排序规则是希伯来语_CS_AI，服务器是 SQL 2008 R2。

谢谢！

- -编辑 - -

我刚刚注意到的一件事：即使我运行它

```
SELECT 'some_hebrew_characters' 
```

我的结果网格中出现问号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:51:43.643

您是否也忘记将您的列标记为 NVARCHAR ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:20:45.583

可能那是您的编辑器的默认编码不是 unicode。

可以肯定的是，将您的查询保存为 SQL SERVER Management Studio 中的 unicode 文件并重新运行它。

我认为如果您通过 Linq 获得结果，那将是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-20T13:08:13.277

您需要在 '' 前面加上字母 N

插入包含 unicode 字符的值时，您需要执行以下操作：

```
 insert into table_name(unicode_field) values (N'会意字') 
```

如果没有 N 前缀，它们将作为 ASCII 字符传递。

此外，请确保您要插入的列支持 unicode 字符 - 即 nchar、nvarchar、ntext。

# android - 阅读带有 atom 支持的 RSS 提要

> ID：13674425
> 
> 赞同：0
> 
> 时间：2012-12-02T22:07:35.000
> 
> 标签：android, rss, feed, atom-feed

您好，我正在寻找一个代码片段，甚至是一个更好的用于阅读 rss (atom) 提要的 android 库。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:11:57.940

[ROME](https://code.google.com/p/android-rome-feed-reader/)是一个用于 Android 的闭源源阅读器。如果您需要帮助，我已经广泛使用了[它的 J2SE 版本](http://rometools.jira.com)，但没有使用 Android 版本，所以请随时提问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-21T17:41:42.957

你也可以试试这个开源库： [https ://github.com/Pkmmte/PkRSS](https://github.com/Pkmmte/PkRSS)

它非常轻巧且易于使用。它默认支持 RSS2 和 Atom，但也允许您插入自己的自定义解析器。

例如，以下代码在后台加载提要 url：

```
 PkRSS.with(this).load(url).async(); 
```

GitHub页面上有更多详细信息。

# firefox - 谷歌浏览器将 h1 Tag 格式变小

> ID：13674426
> 
> 赞同：0
> 
> 时间：2012-12-02T22:07:38.453
> 
> 标签：firefox, google-chrome, css, cross-browser

我遇到了 chrome 的问题。h1 标签的格式比 IE 和 FF 中的要小。这里有2个截图： ![在此处输入图像描述](../Images/fa9aed16756fbc95ec755a60b0992105.png)

![在此处输入图像描述](../Images/dc7f41ccc8a2e7c6ecc3103e7368f893.png)

我不知道为什么会这样。你有？抱歉，我不想在这里发布 URL，因为它不应该被谷歌索引。但它就像 ssd[minus]vergleichen.de/ssds/technische-daten/881/ocz-vector-128gb-2,5-Zoll.html （只需 C+P 并将 [minus] 替换为 -）。

编辑：这是代码：

```
#producttitlecontent {
padding: 6px;
margin: 2px;
background: #FDE5CA;
border-top-left-radius: 4px;
border-top-right-radius: 4px;
}

#producttitlecontent h1 {
text-align: center;
color: #686868;
padding: 4px;
font-size: 1.7em Verdana;
}

<div id="producttitlecontent">
                       <img src="../images/bkbtn.png" alt="Zur&uuml;ck"    onClick="history.go(-1);return true;">
                        <h1 itemprop="name">OCZ Vector 128GB 2,5"(VTR1-25SAT3-128G) </h1>
           </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T22:17:14.423

用户代理 (Chrome) 内置样式表如下所示：

```
any(article,aside,nav,section) h1 {
font-size: 1.17em;
-webkit-margin-before: 1em;
-webkit-margin-after: 1em;
} 
```

因此，您放置它的**部分标签会导致此问题。**无论如何你可以避免使用section标签吗？我知道这并不理想，但我只是在解释正在发生的事情。

如果将**h1**标签移到部分标签之外，它会以更大的尺寸出现（我试过了）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T02:21:41.207

我同意@j08691 的观点，他对你的原始帖子发表了评论，并跟进提到了`inherited`价值观。这很可能发生在您的主体或包含元素上，甚至在文档级别的某个地方，您已经`font-size`在“主”元素上定义了 a，并且由于您使用了 em（但不限于。）其中的每一层主元素的字体大小将基于它进入的父元素，因此外部的 1.7em 在内部更小，内部更小，内部更小，并且值会根据其父元素计算的大小继续继承。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T22:14:28.847

好吧，我想我自己解决了。解决方案非常简单，我什至不敢发布它。我写

```
font-size: 1.7em Verdana; 
```

捂脸！无论如何，谢谢大家观看

# ruby - 在 OS X 10.8.1 上安装 Ruby 1.9.3 时出错

> ID：13674430
> 
> 赞同：3
> 
> 时间：2012-12-02T22:08:20.043
> 
> 标签：ruby

我正在尝试使用 rvm 升级 Ruby。我收到这个错误。第一篇文章。

```
macbook:bin stephentrovato$ rvm install 1.9.3
Installing Ruby from source to: /Users/stephentrovato/.rvm/rubies/ruby-1.9.3, this may         take a while depending on your cpu(s)...

ruby-1.9.3 - #fetching 
ERROR: Error running 'bunzip2 '/Users/stephentrovato/.rvm/archives/ruby-1.9.3-.tar.bz2'', please read /Users/stephentrovato/.rvm/log/ruby-1.9.3/extract.log
ruby-1.9.3 - #extracting ruby-1.9.3- to /Users/stephentrovato/.rvm/src/ruby-1.9.3
ERROR: Error running 'tar xf /Users/stephentrovato/.rvm/archives/ruby-1.9.3-.tar -C /Users/stephentrovato/.rvm/tmp/rvm_src_1714', please read /Users/stephentrovato/.rvm/log/ruby-1.9.3/extract.log
ERROR: There has been an error while trying to extract the source.  
Halting the installation.
ERROR: There has been an error fetching the ruby interpreter. Halting the installation. 
```

编辑：错误日志 - [2012-12-02 17:52:35] tar xf /Users/stephentrovato/.rvm/archives/ruby-1.9.3-.tar -C /Users/stephentrovato/.rvm/tmp/rvm_src_2516 tar：打开存档时出错：无法打开“/Users/stephentrovato/.rvm/archives/ruby-1.9.3-.tar”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:15:54.227

RVM 发生了一些奇怪的事情，它没有正确选择补丁级别。有很多引用`ruby-1.9.3-`应该是`ruby-1.9.3-p327`. 我认为这就是它无法获取存档的原因，应该与 Xcode 无关。

尝试更新您的 RVM `rvm get stable`，然后重试。

# javascript - 浮动导致滞后

> ID：13674436
> 
> 赞同：0
> 
> 时间：2012-12-02T22:08:47.070
> 
> 标签：javascript, jquery, html, css

在我的网站上，我使用带有浮动 div 的网格布局。作为分页过渡，我使用淡出。但是，我注意到，自从我开始使用浮动 div 后，动画就滞后了很多。我的灯箱淡入也滞后于浮动 div 的页面。知道如何阻止这种滞后吗？

这是一个[JSFiddle](http://jsfiddle.net/kBdrR/)。请注意，当浮动内容中有内容时，动画的滞后会更加明显，并且在我的包含 youtube 视频的灯箱上（视频本身开始太滞后）

布局：

```
<div id=container>
    <div id=float></div>
    <div id=float></div>
    <div id=float></div>

    <div id=float></div>
    <div id=float></div>
    <div id=float></div>

    <div id=float></div>
    <div id=float></div>
    <div id=float></div>
​&lt;/div>​​​​​​​​​​​​​ 
```

# assembly - 带有装配的斐波那契

> ID：13674441
> 
> 赞同：0
> 
> 时间：2012-12-02T22:09:02.620
> 
> 标签：assembly, x86

我试图用汇编语言制作一个斐波那契生成器，使用单独的函数以二进制（DispBinary）显示值，但看起来数字显示为 6、30、120 等。订单有问题吗我已经用于 imul 还是我切换了 eax 和 ecx？

```
 Main: 
         Call DispBinary ;display binary
         Mov Ecx, 6
         Mov Eax, 1
  L1: 
         IMul Eax, Ecx
         Call DispBinary
         Loop L1 
         Xor Eax, Eax 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-26T08:27:06.680

您可以使用此代码（rcx 代表 n，n=5）

```
ExitProcess PROTO

.data 

.code

main proc

mov rax,1
mov rbx,0
mov rcx,5
mov rdx,0 
push rdx

L1:
    mov rdx,rax
    add rdx,rbx
    push rdx
    mov rax,rbx
    mov rbx,rdx
    dec rcx
    cmp rcx,00h
    jnz L1
    nop

call ExitProcess

main endp

end 
```

# java - 与 miglayout 对齐错误

> ID：13674444
> 
> 赞同：0
> 
> 时间：2012-12-02T22:09:17.407
> 
> 标签：java, swing, miglayout

在 jframe 中，我使用 miglayout 作为主要 jpanel 位置。

在左侧面板中，我有 2 个 jpanel，我使用 boxlayout。

ComponentPanel 位于左上角，PropertyPanel 位于左下角。

```
 leftPanel = new JPanel();
    leftPanel.setLayout(new BoxLayout(leftPanel, BoxLayout.Y_AXIS));

    leftPanel.setMinimumSize(new Dimension(600, 600));

    add(leftPanel, BorderLayout.WEST);

    componentPanel = new ComponentPanel();
    propertyPanel = new PropertyPanel(); 
```

在 propertyPanel 构造函数中，我做

```
setLayout(new MigLayout("debug")); 
```

我明白了

![米格布局](../Images/fc25c773c9283195fcb3f5550388ca8d.png)

为什么面板设置为正确？

如果我动态添加一些空间。

![在此处输入图像描述](../Images/07f867d4320e561bef901b4197d6ed90.png)

我尝试对 miglayout 构造函数使用填充但没有成功。

绿色是leftPanel 红色是componentPanel

[http://imagepaste.nullnetwork.net/img/1354548433miglayout3.jpg](http://imagepaste.nullnetwork.net/img/1354548433miglayout3.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:50:20.757

使用 BorderLayout 而不是 BoxLayout 似乎更好......

```
leftPanel.setLayout(new BorderLayout());
leftPanel.add(componentPanel, BorderLayout.NORTH);
leftPanel.add(propertyPanel,BorderLayout.SOUTH); 
```

盒子布局问题？

# .htaccess - .htaccess mod 将文件夹重写到子域

> ID：13674445
> 
> 赞同：2
> 
> 时间：2012-12-02T22:09:17.473
> 
> 标签：.htaccess, mod-rewrite, subdomain, directory

所以我有主照片文件夹，我想让它成为子域样式，所以有 /images/ 和 /images/thumbs。我想要完成的是“转换”

```
/images/ -> images.domain.com 
```

和

```
/images/thumbs -> thumbs.domain.com 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:14:12.347

```
RewriteRule ^/?images/thumbs/(.*)$  http://thumbs.domain.com/$1
RewriteRule ^/?images/(.*)$   http://images.domain.com/$1  [L] 
```

此规则将 URL 重写为：`http://domain.com/images/lol.png` to `http://images.domain.com/lol.png`。和：`http://domain.com/images/thumbs/lol.png`到`http://thumbs.domain.com/lol.png`。 **没有外部重定向。**

# java - 检查密码代码

> ID：13674449
> 
> 赞同：1
> 
> 时间：2012-12-02T22:09:35.730
> 
> 标签：java, passwords, bluej

问题描述：

一些网站对密码施加了某些规则。编写一个检查字符串是否为有效密码的方法。假设密码规则如下：

*   密码必须至少包含八个字符。
*   密码仅由字母和数字组成。
*   密码必须至少包含两位数字。

编写一个程序，提示用户输入密码，如果遵守规则则显示“有效密码”，否则显示“无效密码”。

这是我到目前为止所拥有的：

```
import java.util.*;  
import java.lang.String;  
import java.lang.Character;  

/**
 * @author CD
 * 12/2/2012
 * This class will check your password to make sure it fits the minimum set     requirements.
 */
public class CheckingPassword {  

    public static void main(String[] args) {  
        Scanner input = new Scanner(System.in);  
        System.out.print("Please enter a Password: ");  
        String password = input.next();  
        if (isValid(password)) {  
            System.out.println("Valid Password");  
        } else {  
            System.out.println("Invalid Password");  
        }  
    }  

    public static boolean isValid(String password) {  
        //return true if and only if password:
        //1\. have at least eight characters.
        //2\. consists of only letters and digits.
        //3\. must contain at least two digits.
        if (password.length() < 8) {   
            return false;  
        } else {      
            char c;  
            int count = 1;   
            for (int i = 0; i < password.length() - 1; i++) {  
                c = password.charAt(i);  
                if (!Character.isLetterOrDigit(c)) {          
                    return false;  
                } else if (Character.isDigit(c)) {  
                    count++;  
                    if (count < 2)   {     
                        return false;  
                    }     
                }  
            }  
        }  
        return true;  
    }  
} 
```

当我运行程序时，它只检查密码的长度，我不知道如何确保它同时检查字母和数字，以及密码中至少有两位数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-21T19:18:53.837

假设有效密码具有：

*   8 个或更多字符，但不超过 16 个字符
*   一个或多个大写字符
*   一个或多个小写字符
*   一位或多位数字
*   一个或多个特殊字符（如 $、@ 或 !）

代码：

```
import java.util.Scanner;
public class Password {

public static void main(String[] args) {
    // TODO Auto-generated method stub
    int min =8;
    int max=16;
    int digit=0;
    int special=0;
    int upCount=0;
    int loCount=0;
    String password;
    Scanner scan = new Scanner(System.in);
    System.out.println(" Enter Your Password:");
        password = scan.nextLine();
    if(password.length()>=min&&password.length()<=max){
        for(int i =0;i<password.length();i++){
            char c = password.charAt(i);
            if(Character.isUpperCase(c)){
                upCount++;
            }
            if(Character.isLowerCase(c)){
                loCount++;
            }
            if(Character.isDigit(c)){
                digit++;
            }
            if(c>=33&&c<=46||c==64){
                special++;
            }
        }
        if(special>=1&&loCount>=1&&upCount>=1&&digit>=1){
            System.out.println(" Password is good:");
        }

    }

    if(password.length()<min){

        for(int i =0;i<password.length();i++){
            char c = password.charAt(i);
            if(Character.isLowerCase(c)){
                loCount++;
            }
            }

        if(loCount>0){
            System.out.println(" Password must be atleat "+min+" characters:");
            System.out.println(" You need atleast one upper case chracter:");
            System.out.println(" You need atleast one digit:");
            System.out.println(" You need atleast one special chracter:");

    }
    }
    else if(password.length()<min&&upCount>1){
        for(int i =0;i<password.length();i++){
        char c =password.charAt(i);
        if(Character.isLowerCase(c)){
            loCount++;
        }
         if(Character.isUpperCase(c)){
            upCount++;
        }
        }
        if(loCount>0&&upCount>0){
        System.out.println(" Password must be atleast "+min+" chracters:");
        System.out.println(" You need atleast one digit:");
        System.out.println(" You need atleast one special chracter:");
    }
    }
     if(password.length()>max||password.length()>=max&&upCount>1&&loCount>1&&digit>1){
         System.out.println(" Password is too long.Limit is "+max+" chracters:");
                 System.out.println(" You need atleast one special chracter:");

        }
      if(password.length()>=min&&password.length()<=max&&loCount>0&&upCount>0&&digit>0&&special==0){
         System.out.println(" You need atleast a special chracter");
     }
      if(password.length()>=min&&password.length()<=max&&loCount>0&&upCount>0&&digit==0&&special==0){
         System.out.println(" You need atleast one digit:");
         System.out.println(" You need atleast one special chracter:");
     }
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T22:24:27.903

你几乎明白了。虽然有一些错误：

*   您没有遍历密码的所有字符（`i < password.length() - 1`错误）
*   你从 1 而不是 0 开始
*   您在遇到第一个数字时立即检查位数是否至少为 2，而不是在扫描完所有字符后检查

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T22:43:33.713

如前所述，您应该首先检查所有密码字符。数一数你的数字，最后检查 count 是否小于 2。这是参考代码。

```
if (password.length() < 8) {   
        return false;  
    } else {      
        char c;  
        int count = 0;   
        for (int i = 0; i < password.length(); i++) {  
            c = password.charAt(i);  
            if (!Character.isLetterOrDigit(c)) {          
                return false;  
            } else if (Character.isDigit(c)) {  
                count++;     
            }  
        }  
        if (count < 2)   {     
            return false;  
        }  
    }  
    return true;  
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-28T09:29:09.657

```
public void run()
{
    String password= readLine("Insert Password: ");
    boolean len= true;
    boolean letter= true;
    boolean twodig= true;
       if (password.length() < 8) {   
         len = false;  
    } else {      
        char c;  
        int count = 0;   
        for (int i = 0; i < password.length(); i++) {  
            c = password.charAt(i);  
            if (!Character.isLetterOrDigit(c)) {          
                letter = false;  
            } else if (Character.isDigit(c)) {  
                count++;     
            }  
        }  
        if (count < 2)   {     
            twodig = false;  
        }  
    }  
    if(len ==true && letter == true && twodig == true)
    {
        System.out.println("This password is valid ");
    }
    else
    {
        System.out.println("This password is invalid");
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-12T03:33:46.600

封装方法；

/* 2\. 编写一个Java方法来检查一个字符串是否是一个有效的密码。密码规则：密码必须至少有十个字符。密码仅由字母和数字组成。密码必须至少包含两位数字。

预期输出：

1.  密码必须至少包含八个字符。
2.  密码仅由字母和数字组成。
3.  密码必须至少包含两位数字
    输入密码（您同意上述条款和条件。）：abcd1234
    密码有效：abcd1234 */

```
public class CheckPassword {

    public static String password;
    public static int disitCounter = 0;

    public static boolean isValid(String password) {

        if (password.length() >= 10 ) {
            for(int index = 0; index < password.length(); index++) {
                char passChar = password.charAt(index);
                if (!Character.isLetterOrDigit(passChar)) {
                    return false;
                }
                else {
                    if (Character.isDigit(passChar)) {
                        disitCounter++;
                    }
                }

            }

        }
        if(disitCounter < 2) {
            return false;
        }
        return true;
    }

    public static void main(String[] args) {
        password = "abcdefgh1w3";
        if(isValid(password)) {
            System.out.print("It is a valid password");
        }
        else {
            System.out.print("It is a invalid password");
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-07-27T00:16:41.830

```
package com.parag;

/*
 * @author Parag Satav
 */
public boolean check(String password) {

    boolean flagUppercase = false;
    boolean flagLowercase = false;
    boolean flagDigit = false;
    boolean flag = false;

    if (password.length() >= 10) {

        for (int i = 0; i < password.length(); i++) {

            if (!Character.isLetterOrDigit(password.charAt(i))) {
                return false;
            }

            if (Character.isDigit(password.charAt(i)) && !flagDigit) {
                flagDigit = true;

            }

            if (Character.isUpperCase(password.charAt(i)) && !flagUppercase) {
                flagUppercase = true;

            }

            if (Character.isLowerCase(password.charAt(i)) && !flagLowercase) {
                flagLowercase = true;
            }
        }
    }

    if (flagDigit && flagUppercase && flagLowercase) {
        flag = true;
        System.out.println("Success..");
    } else
        System.out.println("Fail..");

    return flag;
} 
```

# java - Log4j Fileappender 不会在应该的位置创建文件

> ID：13674454
> 
> 赞同：1
> 
> 时间：2012-12-02T22:09:50.903
> 
> 标签：java, logging, log4j, netbeans-7, fileappender

我正在尝试使用 Log4j filappender 登录到一个 html 文件。我的属性文件如下所示

```
log = C:\Log
log4j.rootLogger = DEBUG, FILE

# Define the file appender
log4j.appender.FILE=org.apache.log4j.FileAppender
log4j.appender.FILE.File=${log}/logfile.html

# Define the layout for file appender
log4j.appender.FILE.layout=org.apache.log4j.HTMLLayout
log4j.appender.FILE.layout.Title=log
log4j.appender.FILE.layout.LocationInfo=true 
```

但它没有在 C:\Log 创建日志文件，所以我认为我根本没有工作，但我发现它在我的 .netbeans 文件夹中创建了 logfile.html 和文件夹（C:Users\Peter. netbeans\7.1.1\config\GF3\domain1\Log）。我正在使用 Netbeans 7.1.1。我以前没有使用过 Log4j，老实说，我不知道它为什么会这样。有任何想法吗？

谢谢你的时间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T22:11:45.693

这是定义日志文件保存位置的行： `log4j.appender.FILE.File=${log}/logfile.html`

如果您将其更改为 `log4j.appender.FILE.File=C:/log/logfile.html` Then 它可能会起作用。

AFAIK，配置中的第一行`log = C:\Log`没有任何效果。您不能在配置文件中使用类似的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T22:15:06.290

第一行中的单个反斜杠可能是问题所在：

日志 = C:\日志

使用 C:\Log 或 C:/Log。

我会直接将路径写入

```
log4j.appender.FILE.File 
```

不使用日志 = C:\Log

# linux - Bash ASCII 实现

> ID：13674455
> 
> 赞同：4
> 
> 时间：2012-12-02T22:09:52.120
> 
> 标签：linux, bash, shell, unix

我已经开始学习 vim 并开始使用 bash 编写一个类似于 1978 年经典游戏 Space Invaders 的游戏的 shell 脚本。我对 ASCII 艺术比较陌生，我想知道以编程方式定义太空船等内容还是从文件中读取字符内容更好？如果是这样，您会推荐什么以及如何以编程方式解决它？

```
#!/bin/bash

function getShip() { 
declare -r FILENAME=/Users/demetriusford/space_ship

for index in $FILENAME; do
  cat $index
done
} 
```

文件内部：

```
 *   /\   *
   !__/()\__!
   /==:  :==\
     (/\/\) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T22:15:26.160

尽管你有可能赢得 2013 年“编程语言和程序之间最严重的不匹配”奖，但与竞争者如用 x86 编写的会计软件包、基于 COBOL 的操作系统或*任何*用 Pascal 编写的东西竞争 :-) ，您可能会发现直接在 bash 脚本中编写该形状更容易。

似乎没有迫切需要将形状与代码本身分开。

* * *

首先，这里有一个小脚本，它使用`tput`（curses 和 terminfo 数据库）沿窗口底部为您的船设置动画。

这不完全是`World of Warcraft`，但它应该是一个很好的起点。首先，我们将设置永远不会改变的东西，船和子弹字符串，以及各种屏幕坐标的东西：

```
#!/bin/bash

bull1=' *        * '
bull2='            '

ship1=' ^   /\   ^ '
ship2=' !__/()\__! '
ship3=' /==:  :==\ '
ship4='   (/\/\)   '

tput clear
((line1 = $(tput lines) - 6))
((line2 = line1 + 1))
((line3 = line2 + 1))
((line4 = line3 + 1))

((maxcol = $(tput cols) - 15)) 
```

然后我们将初始化相关变量并进入一个无限循环：

```
((bullline = 1))
((bullcol = 1))
((curcol = 1))
((coldir = 1))
while true ; do 
```

在循环内部，我们只需通过清空先前的值并写入新值来移动精灵。项目符号位置也在本节中更新。请注意，我们不需要显式地空白船舶，因为它被空格包围，无论如何都会使边缘字符空白：

```
 tput cup $bullline $bullcol ; echo "$bull2"
    if [[ $bullline -le 2 ]] ; then
        ((bullline = line1 - 1))
        ((bullcol = curcol))
    else
        ((bullline = bullline - 2))
    fi
    tput cup $bullline $bullcol ; echo "$bull1"

    tput cup $line1 $curcol ; echo "$ship1"
    tput cup $line2 $curcol ; echo "$ship2"
    tput cup $line3 $curcol ; echo "$ship3"
    tput cup $line4 $curcol ; echo "$ship4" 
```

然后我们简单地更新船的变量，让它左右移动，最后延迟一点，让动画更流畅：

```
 ((curcol = curcol + coldir))
    if [[ $curcol -eq $maxcol ]] ; then
        ((coldir = -coldir))
    else
        if [[ $curcol -eq 1 ]] ; then
            ((coldir = -coldir))
        fi
    fi
    sleep 0.1
done 
```

考虑到平台的限制，你最终得到的是一个看起来可以忍受的动画：

```
      * *

        ^ /\ ^
        !__/()\__!
        /==: :==\
          (/\/\)

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T22:15:34.603

在游戏中，通常有两种方法：

*   矢量图形：通过线、圆、三角形等定义对象。
*   图像：通过图像定义对象。

显然，在这两种情况下，对象定义都是从文件中读取的（否则您必须重新编译以更改艺术）。使用矢量图形，您可以获得更好的分辨率，而使用图像，您可以获得更美丽的艺术。请注意，最后，通常在第一种方法中还涉及图像（称为“纹理”）。

在 ASCII 艺术的情况下，也许图像（在文件中“绘制”的 ASCII 艺术）更好，因为无论如何您都没有太多的分辨率，而且很难通过定义线条和圆圈来获得漂亮的 ASCII 艺术。

游戏的 PS bash 脚本既有趣又非常不寻常！

# jquery - 函数不适用于所有具有相同类的 div

> ID：13674457
> 
> 赞同：0
> 
> 时间：2012-12-02T22:10:04.680
> 
> 标签：jquery, function, html, slideshow

我已经为包含在一个名为“mainSlide”的类的 div 中的图像创建了一个幻灯片，这非常有效，但是当我尝试创建另一个具有相同类名“mainSlide”的 div 时，我在第二个 div 上看不到任何幻灯片效果只是第一。

```
<div class="mainSlide">
<img src="img/1.jpg" style="display:none;" />
<img src="img/2.jpg" style="display:none;" />
<img src="img/3.jpg" style="display:none;" />
</div>
<br /><br /><br/><br />

<div class="mainSlide">
<img src="img/1.jpg" style="display:none;" />
<img src="img/2.jpg" style="display:none;" />
<img src="img/3.jpg" style="display:none;" />
</div>

<script type="text/javascript">
$(document).ready(function() {

slideShow();

function slideShow() {
    $allSlides = $('div.mainSlide img').length;
    $hiddenSlides = $('div.mainSlide img:hidden').length;

    if ($hiddenSlides == $allSlides) {
        $('div.mainSlide img:first').fadeToggle('slow', function() { slideShow(); });
    } else {
        $('div.mainSlide').find('img:visible').delay(5000).fadeToggle('slow', 
            function() {
                if ($(this).attr('src')==$('div.mainSlide img:last').attr('src')) {
                    $('div.mainSlide img:first').fadeToggle('slow', function() { slideShow(); });
                } else {
                    $(this).next('img').fadeToggle('slow', function() {slideShow();});
                }
            });
    }
}

});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:20:49.883

您的代码是在假设只有一个幻灯片放映的情况下编写的。

要处理多个幻灯片放映，您必须遍历`mainSlide`元素，并对`slideShow`每个元素执行函数中的所有操作。此外，您必须`mainSlide`在处理图像时将每个元素用作范围，以便代码仅适用于该元素中的图像。

```
$('div.mainSlide').each(function(i, slide){
  slideShow(slide);
});

function slideShow(slide) {

  $allSlides = $('img', slide).length;

  // and so on...

} 
```

# perl - 如何确定gettext的安装版本？

> ID：13674462
> 
> 赞同：5
> 
> 时间：2012-12-02T22:10:35.757
> 
> 标签：perl, dependencies, version, gettext

我有一个[Perl 模块](https://github.com/theory/dist-zilla-localetextdomain/)，它使用 GNU gettext 实用`xgettext`程序`msgfmt`、、、`msginit`和`msgmerge`。我从 SunOS 系统中得到了一些测试失败，当我查看它时，它似乎很古老。现在我正在跳过测试`msgfmt`并`xgettext`扼杀一个简单的`--version`选项。但我认为除非安装了相对现代版本的 GNU Gettext 实用程序，否则拒绝安装会更好。

那么，最好的方法是什么？我只想弄清楚安装了什么以及它是否支持我需要的选项，如果不满足这些依赖关系，则拒绝安装模块。`gettext --version`如果它以非 0 值退出，我应该运行并拒绝安装吗？或者可能有更规范的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T22:13:33.087

由于“gettext --version”应该总是在任何“当代”版本上返回一个值（例如，我刚刚在大约 1997 年的 Redhat 上尝试过它......它成功了！），这就足够了。

恕我直言...

# java - 反转数组的内容

> ID：13674466
> 
> 赞同：2
> 
> 时间：2012-12-02T22:11:30.577
> 
> 标签：java

**这是我需要做的**

能够反转可变大小的一维数组的内容，而无需使用另一个临时数组。

给定一个整数、数字的一维数组，编写 Java 代码就地反转数字的内容，而不使用临时数组来存储反转的内容。例如，如果 numbers 是 {12, 34, 50, 67, 88}，请提供将更改数字的代码，使其内容现在变为 {88, 67, 50, 34, 12}。

**这就是我所拥有的** 它无法正常工作。

```
public static int[] reverseArrayWithoutTempArray(int[] array) {

        double array [ ];

        array = new double [10];
        int [ ] num = {12, 34, 50, 67, 88};
        int i = 0;
        int  j = a.length - 1;
        for (i = 0; i < a.length / 2; i++, j—){
            int temp = a[i];
            a[i] = a[j];
            a[j] = temp;
          }
        return array;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T22:17:31.460

对于您提供的示例，它实际上可以正常工作。这就是我的代码的样子：

```
 public static int[] reverseArrayWithoutTempArray(int[] a) {
    int i = 0;
    int  j = a.length - 1;
    for (i = 0; i < a.length / 2; i++, j--){
        int temp = a[i];
        a[i] = a[j];
        a[j] = temp;
      }
    return a;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T22:15:30.487

就是这样：

```
public static void reverseArrayWithoutTempArray(int[] num) {
     int  j = num.length - 1;
     for (int i = 0; i < num.length / 2; i++, j --){
        int temp = num[i];
        num[i] = num[j];
        num[j] = temp;
     }
} 
```

调用此方法将如下所示：

```
int [] num = {12, 34, 50, 67, 88};
reverseArrayWithoutTempArray(num);
System.out.println(Arrays.toString(num)); //to log 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T22:19:08.693

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T22:15:20.027

如果这不是课程作业，您可以使用[`ArrayUtils.reverse`](http://commons.apache.org/lang/api/org/apache/commons/lang3/ArrayUtils.html).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T22:17:55.777

这行得通吗？（swap方法没有实现，但是你知道怎么做吧？）

```
public static void reverseIntArray(int[] input) {

        final int last = input.length - 1;
        if (last < 0) {
            return;
        }
        for (int i = 0; i < input.length / 2 + 1; i++) {
            if (last - i <= i) {
                return;
            }
            swap(input, i, last - i);
        }

    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-07T11:46:29.913

Assuming you know how to implement `swap` the following reverses a part of array in-place:

```
public void reverse(int[] a, int low, int hi) {
    while (low < hi) {
        swap(low++, hi--, a);
    }
} 
```

You can then reverse the entire array by calling `reverse(a, 0, a.length - 1)`.

# android - 如何以正确的方式在水平滚动视图中放置一个很长的表格布局？

> ID：13674470
> 
> 赞同：3
> 
> 时间：2012-12-02T22:11:58.690
> 
> 标签：android, horizontalscrollview, android-tablelayout

我尝试查看大量示例和帖子，但没有一个符合我的问题。

我需要制作一个包含许多列的很长（水平）的表格，因此不可能在单个屏幕上显示。而且我不想把表格弄得乱七八糟，因为以这种方式展示我的表格很重要。

我在下面粘贴了我的 XML 布局（包括主要的重要布局）

问题是如果我删除代码：

```
android:fillViewport="true" 
```

从**Horizo​​ntalScrollView**然后我的桌子在里面，被挤在一个地方，特别是在它的左侧。它甚至不使用这个 Horizo​​ntalScrollView 容器区域的大部分。

而且，如果我使用此代码，则此 Horizo​​ntalScrollView 会在其中显示我的整个表格 - 列被挤压以确保它们适合此滚动视图。

**我只想让这个滚动视图只显示适合屏幕宽度的表格布局的内容，这样我就可以滚动剩余的列。**但现在，我似乎没有靠近的地方。

那么我该如何解决我的问题呢？难道我做错了什么 ？

这也是我的 XML 布局。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
>

<HorizontalScrollView
    android:id="@+id/horizontalScrollView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:scrollbars="horizontal"
    android:fillViewport="true">
    <TableLayout
        android:id="@+id/bot_scoreBoard"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/table_shape"
        android:orientation="horizontal"
        android:stretchColumns="*" >

        <TableRow
            android:layout_height="fill_parent"
            android:layout_margin="2dp"
            android:background="#ffffff"
            >
            <TextView
            />
               ....
            more than 16 columns of made using TextView
 ....
        </TableRow>
    </TableLayout>

</HorizontalScrollView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T20:25:56.863

我得到了答案。那是因为我在使用

```
 android:stretchColumns="*" 
```

在表格布局中。

加上我的 TextView 是列，需要一些特定的宽度大小，而不仅仅是

```
android:layout_width="fill_parent" or "wrap_content" 
```

这些就是问题所在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T01:24:29.373

你应该`TableLayout`用`LinearLayout`.

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

<HorizontalScrollView
    android:id="@+id/horizontalScrollView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:fillViewport="true"
    android:scrollbars="horizontal" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:orientation="horizontal" >

        <TableLayout
            android:id="@+id/bot_scoreBoard"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/table_shape"
            android:orientation="horizontal"
            android:stretchColumns="*" >

            <TableRow
                android:layout_height="fill_parent"
                android:layout_margin="2dp"
                android:background="#ffffff" >

                <TextView />
           ....
        more than 16 columns of made using TextView
     ....
            </TableRow>
        </TableLayout>
    </LinearLayout>
</HorizontalScrollView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-28T14:55:32.687

你正在使用`android:stretchColumns="*"`你必须使用一些明确的价值`layout_width`来代替`match_parent`and `wrap_content`。

例如。`layout_width = "250dp"`

# javascript - 如何使用来自另一个函数的参数

> ID：13674471
> 
> 赞同：0
> 
> 时间：2012-12-02T22:12:09.527
> 
> 标签：javascript, html, dom, innerhtml

> **可能重复：**
> [使用 javascript 获取实际的 HTML 值](https://stackoverflow.com/questions/13674095/get-actual-html-values-using-javascript)

所以我在这里有两个问题。让我先解释一下我要做什么。我有一个页面上的值会发生变化，但是我想在它们更改之前获取值，保留它们，然后一旦按下按钮，将 html 更改为原始 html。现在首先我最大的问题是，当我尝试取消注释 initial2 函数时，它只是不起作用。它把我带到了网页，然后由于某种原因，html url 试图改变，它说它找不到页面。第二个，对我来说更容易理解的问题是函数 previousaccept 我无法使用来自 previousnames 函数的值。

```
function previousnames()
{
name= document.getElementById('name').innerHTML;
imagetitle= document.getElementById('imagetitle').innerHTML;
location=document.getElementById('location').innerHTML;
similarities = document.getElementById('similarities').innerHTML;
type = document.getElementById('type').innerHTML;
cost = document.getElementById('cost').innerHTML;
date = document.getElementById('date').innerHTML;
pictureid = document.getElementById('pictureid').src;
}

function previousaccept(name,imagetitle,location,similarities,value,type,cost,date,pictureid)
{
document.getElementById('name').innerHTML = name;
document.getElementById('location').innerHTML = location;
document.getElementById('similarities').innerHTML = similarities;
document.getElementById('type').innerHTML = type;
document.getElementById('cost').innerHTML = cost;
document.getElementById('date').innerHTML = date;
window.alert(pictureid);
document.getElementById('pictureid').src = pictureid;
}
window.onload=initial();
function initial()
{
myvalues;
previousnames;
}

/*
function initial2()
{
myvalues;
previousnames();
}*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:15:48.910

如果您设置`location`（即[window.location](https://developer.mozilla.org/en-US/docs/DOM/window.location)），则浏览器将转到新网页。这就是您在`previousnames()`此行的函数中所做的：

```
location=document.getElementById('location').innerHTML; 
```

如果您尝试使用名为 的全局变量`location`，请给它一个尚未被浏览器使用的不同名称。

此外，您应该显式声明您打算在函数之外使用的任何全局变量，而不是像您这样使用隐式声明的变量，这会使您的代码很容易出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T22:33:03.900

我认为这会做你想要的。关键是确保您尝试存储的变量的范围是函数可以访问它们。为此，我在函数`dataStore`的开头定义了一个空对象，并*在*onload 函数中`onload`定义了另外两个函数。将所有存储的数据放在一个对象中很方便，并且避免了命名问题（例如上一个答案中提到的 window.location 问题。）

 *```
window.onload = function() {
    var dataStore = {};

    function getInitialData() {
        dataStore = {
            name: document.getElementById('name').innerHTML,
            imagetitle: document.getElementById('imagetitle').innerHTML,
            // and so on... 
        }
    }

    function resetData() {
        document.getElementById('name').innerHTML = dataStore.name;
        document.getElementById('imagetitle').innerHTML = dataStore.imagetitle;
        // and so on...
    }
    getInitialData();
    //... then later when you want to reset all the values
    resetData();
}​ 
```*

# java - 下载内容时是绑定服务还是自定义线程？

> ID：13674476
> 
> 赞同：6
> 
> 时间：2012-12-02T22:12:41.060
> 
> 标签：java, android, caching, service, multitasking

我正在开发一个 Android 项目，其中我需要将一些图像加载到 GridView。图像可能在缓存中，如果缓存丢失，则查询 Internet 服务器。我的设计是使用两个线程来完成加载任务。一个线程读取缓存，一个线程下载。所以有 3 个线程，包括 UI 一个。它们每个都有自己的消息队列，并使用 Handler 进行通信。

我的问题是我是否应该在这种情况下使用绑定服务？其实我已经实现了上面的设计，看起来没什么问题，但是 GC 工作非常努力，这可以从 logcat 中推断出来。

另一个问题是当我使用 DDMS 监控线程时存在多个线程。这是因为在多个活动中使用了相同的加载机制。在调用 onPause() 时，我让线程退出了它的消息循环，我确信它们中只有两个同时处于活动状态。但我可以在 DDMS 中看到所有这些。（顺便说一句，为什么线程仍然存在？我让 thread = null;）

所以总而言之，我的问题是：这个加载任务能否从绑定服务中受益？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:32:46.863

那么为什么要使用多个线程？您需要在后台加载图像，完成后，将其显示在 UI 中。对于图像来自的 UI 来说，这真的无关紧要。并且使用多个线程并不能使它更快，只会消耗更多的内存。只需使用单个后台线程：首先它会命中缓存，如果没有命中则下载。

服务适用于您想要做一些不需要 UI 的事情。如果你需要实时更新 UI，服务没有多大意义。

# c - 如何从结构中读取数据指针？

> ID：13674483
> 
> 赞同：1
> 
> 时间：2012-12-02T22:13:27.687
> 
> 标签：c, pointers, struct

在我使用封闭库的 C 应用程序中，当接收操作完成时，我得到一个回调，在这个回调中，我使用的框架执行此操作

```
void callbackRX(event_t ID, callbackData_t *callbackData_p){
    rxData_t *dataPacket = (rxData_t *)(callbackData_p->params.rxInfo.dataInfo);
    //...
} 
```

`callbackData_t type`看起来像这样：

```
typedef struct
{
  status_t         status;     // callback status  
  union
  {   
    sync_t          rxSync;     
    rxInfo_t        rxData;    
  }params;

}callbackData_t; 
```

`rxInfo_t`是这样的：

```
typedef struct
{
   UINT32       dataInfo;       
}rxInfo_t; 
```

和`rxData_t`这样的结构：

```
typedef struct
{
   UINT16 *data_p;  // pointer to data

}rxData_t; 
```

`data_p`现在，在我的库提供的回调中，我需要从内部读出数据`dataPacket`，所以我尝试这样做

```
void callbackRX(event_t ID, callbackData_t *callbackData_p){
    rxData_t *dataPacket = (rxData_t *)(callbackData_p->params.rxInfo.dataInfo);
    // Read first byte of data from the data pointer
    int test;
    test = dataPacket->data_p[0]; 
```

}

但是我得到的数字只是一个非常大的整数，例如 14236，我应该读出 256，因为接收到的数据应该是 73 字节的大数组，从 开始`256`并计数到`512`等`1024`。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:17:05.517

您需要分配指针以指向您的实际数据。

例如：

```
typedef struct
{
   UINT16 *data_p;  // pointer to data

}rxData_t

...

  UINT16 buff[10] = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
  rxData_t my_data;
  my_data.data_p = buff;
  printf ("data[0]= %d\n", my_data.data_p[0]); 
```

# java - Hibernate 映射列表 - 索引

> ID：13674486
> 
> 赞同：1
> 
> 时间：2012-12-02T22:13:40.060
> 
> 标签：java, hibernate, sqlite, list, indexing

嗨，我的休眠有问题。当我尝试将列表保存到 SQLite 数据库时，它在存储在列表中的对象的 ID 上崩溃……在数据库中，第一个元素的编号为 0。列表的第一个元素已成功保存，但另一个给出了错误。

现在netbeans说：

严重：无法与会话 org.hibernate.StaleStateException 同步数据库状态：批量更新从更新 [0] 返回了意外的行数；实际行数：0；预期：1 ......

现在我的映射类

有清单

```
<class dynamic-insert="false" table="users" dynamic-update="false" mutable="true" name="DataClasses.User" optimistic-lock="version" polymorphism="implicit" select-before-update="false">

    <id name="ID" column="ID">
        <generator class="increment" />
    </id>

    <list name="notebooks" outer-join="true" lazy="false" cascade="all" >
        <key column="userID"/>
        <list-index column="ID"/>
        <one-to-many class="DataClasses.Notebook"/>
    </list>

</class> 
```

存储在列表中的对象

```
<class dynamic-insert="true" table="notebooks" dynamic-update="false" mutable="true" name="DataClasses.Notebook" optimistic-lock="version" polymorphism="implicit" select-before-update="false">

    <id name="ID" column="ID">
        <generator class="increment"/>
    </id>

    <property name="name" type="string" />
    <property name="text" type="string" />
    <many-to-one name="subject" lazy="false" outer-join="true" class="DataClasses.Subject" column="subject" cascade="all"/>
    <property name="lastModified"/>       
</class> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:45:57.997

我认为您需要将生成器类更改为“本机” - 然后让数据库增加键。

# android - 检查网站以显示通知

> ID：13674491
> 
> 赞同：1
> 
> 时间：2012-12-02T22:14:39.173
> 
> 标签：android, asynchronous, process, notifications, httprequest

假设地址`www.foo.com/notification.txt`经常使用格式化字符串更新，该字符串必须在 Android 设备中显示为通知。获取该字符串的最佳方法是什么？

我已经尝试了几件事。我最后一次尝试是创建一个扩展 BroadcastReceiver 的类并配置 ALARM_SERVICE 以重复调用它：

AndroidManifest.xml：

```
 <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"></uses-permission>
 <receiver  android:process=":remote" android:name="Alarm"></receiver>
    <receiver android:name=".AutoStart">
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED"></action>
        </intent-filter>
    </receiver> 
```

警报.java：

```
package br.com.mypackage.cfqm;
import java.io.BufferedReader;
import java.io.InputStreamReader;

import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.protocol.BasicHttpContext;
import org.apache.http.protocol.HttpContext;

import android.app.AlarmManager;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.net.Uri;
import android.os.StrictMode;
import android.preference.PreferenceManager;
import android.support.v4.app.NotificationCompat;
import android.support.v4.app.TaskStackBuilder;
import android.util.Log;
import android.widget.Toast;

public class Alarm extends BroadcastReceiver 
{    
    int period_ms = 5*60*1000;
    SharedPreferences prefs;
    String user;
    String pass;
    Context context;

    public void check_notifications(){
            //http request to get and parse the notifications
        String[] notifications = http_request("http://foo.com/notification.html")).split("\n");

        NotificationManager notificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
        notificationManager.cancelAll();
        int notification_next_id = 0;

        for (String notification_line:notifications){
            String[] notification = notification_line.split(";");
            if (notification.length==3)
                notify(notification_next_id++,notification[0],notification[1],notification[2]);
        }
    }

    public void notify(Integer id,String title,String text,String url){
            //displays a single notification
        NotificationManager notificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);

        NotificationCompat.Builder notificationBuilder =
            new NotificationCompat.Builder(context)
                .setSmallIcon(R.drawable.ic_action_search)
                .setAutoCancel(true)
                .setContentTitle(title)
                .setContentText(text);
        Intent resultIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));

        TaskStackBuilder stackBuilder = TaskStackBuilder.create(context);
        stackBuilder.addParentStack(Main.class);
        stackBuilder.addNextIntent(resultIntent);
        PendingIntent resultPendingIntent = stackBuilder.getPendingIntent(0,PendingIntent.FLAG_UPDATE_CURRENT);
        notificationBuilder.setContentIntent(resultPendingIntent);
        notificationManager.notify(id,notificationBuilder.build());
        Log.v("cfqm","notificado");

    }

    public String http_request(String url) {
            //makes a http request
        try {
            HttpClient httpClient = new DefaultHttpClient();
            HttpContext localContext = new BasicHttpContext();
            HttpGet httpGet = new HttpGet(url);
            HttpResponse response = httpClient.execute(httpGet, localContext);
            String result = ""; 

            BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
            String line = null;
            while ((line = reader.readLine()) != null)
              result += line + "\n";
            return result;
        }
        catch (Exception e){
            e.printStackTrace();
            return "";
        }

    }

     @Override
     public void onReceive(Context ctx, Intent intent) 
     {
         context = ctx;

         StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
         StrictMode.setThreadPolicy(policy); 

         // The function below will be called periodically
         check_notifications();
     }

     public void SetAlarm(Context context)
     {
         prefs = PreferenceManager.getDefaultSharedPreferences(context);
         user = prefs.getString("user","");
         pass = prefs.getString("pass","");

         AlarmManager am = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
         Intent i = new Intent(context, Alarm.class);
         PendingIntent pi = PendingIntent.getBroadcast(context, 0, i, 0);
         am.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), period_ms, pi); // Millisec * Second * Minute
     }

     public void CancelAlarm(Context context)
     {
         Intent intent = new Intent(context, Alarm.class);
         PendingIntent sender = PendingIntent.getBroadcast(context, 0, intent, 0);
         AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
         alarmManager.cancel(sender);
     }
 } 
```

如果我所做的只是记录一个字符串，我可以让函数 check_notifications 重复运行。但是无论我在里面使用 http_request 都会发生奇怪的事情，从应用程序崩溃到整个系统冻结。我知道我应该异步运行它。但是怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:17:26.763

你必须使用`AsyncTask`.

此处的 Android 文档： [Async Class](http://developer.android.com/reference/android/os/AsyncTask.html) 它非常简单。

此外，如果您希望它定期运行，请考虑使用`Service`（[服务类](http://developer.android.com/guide/components/services.html)）

此外，应用程序崩溃是因为您在主线程上运行某些东西，而不是在后台运行。因此，一切都会冻结，直到您从网页中获得结果。在该网页负载过重的情况下，您必须等待。

**异步类示例：**

```
 private class MyAsyncTask extends AsyncTask<URL, Integer, Integer> {

 protected Integer doInBackground(URL... urls) {
     int count = urls.length;
     long totalSize = 0;
//This is for many urls. If you download staff only from one url use url[0] instead of a for-loop. 
     for (int i = 0; i < count; i++) {
         //do something with url[i]
     }
     return 0; //or return some stats you can later use (eg how many bytes downloaded)
 }

 protected void onProgressUpdate(Integer... progress) {
//You can completely skip this method. It is to show a progress bar of how % is done
     setProgressPercent(progress[0]);

 }

 protected void onPostExecute(Integer result) {
//This is where everything finishes, and you got the result of your webpage

     showDialog("Downloaded " + result + " bytes");
 }
} 
```

然后，创建一个新的 AsyncTask 对象，并像这样启动任务：

```
asyncTaskObj.execute(...); 
```

# python - 调试 python gtk3 应用程序

> ID：13674492
> 
> 赞同：0
> 
> 时间：2012-12-02T22:14:39.160
> 
> 标签：python, glib, gtk3, gobject-introspection

我正在用 python 和 gtk3 编写一个文本编辑器，当我关闭一个窗口时，我不断从 glib 中的某个地方收到模糊的警告：

```
/usr/lib/python2.7/dist-packages/gi/types.py:47: Warning: invalid (NULL) pointer instance
  return info.invoke(*args, **kwargs) 
```

我该如何调试呢？我尝试在 gdb 中运行它，希望我可以从 g_logv 的断点中学到一些东西，但是警告出现但没有触发断点。由于[https://bugzilla.gnome.org/show_bug.cgi?id=670507](https://bugzilla.gnome.org/show_bug.cgi?id=670507) ，我也无法轻松替换日志处理程序。

我什至尝试更改消息中引用的 python 文件，以便它始终在该点打印 python 回溯，但无论是否发生错误都必须这样做，并且在每个 gobject 方法调用时都会调用它，所以很难解释结果，它仍然没有告诉我关于哪个指针为空的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:47:38.670

如果您想使用 gdb，只需运行脚本并将 G_DEBUG 环境变量设置为“fatal-warnings”（`G_DEBUG=fatal-warnings ./your-script.py`）。[GLib 手册的运行 GLib 应用程序](http://developer.gnome.org/glib/stable/glib-running.html)部分中有文档。

# ruby-on-rails - 在模型中创造条件

> ID：13674497
> 
> 赞同：0
> 
> 时间：2012-12-02T22:15:03.100
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我试图创造我的搜索条件，但我遇到了一些麻烦。

这是我正在尝试创建的方法。

```
def self.searchadv(title, place, category, date)
    !title.blank? ? conditions = ['title LIKE ?', "%#{title}%"] : conditions = []
    if conditions
        !place.blank? ? conditions << [' AND place LIKE ?', "%#{place}%"] :  conditions << []
        !place.blank? ? conditions << [' AND category LIKE ?', "%#{place}%"] :  conditions << []
        !place.blank? ? conditions << [' AND date LIKE ?', "%#{place}%"] :  conditions << []
    else 
        !place.blank? ? conditions << [' place LIKE ?', "%#{place}%"] :  conditions << []
        !place.blank? ? conditions << [' category LIKE ?', "%#{place}%"] :  conditions << []
        !place.blank? ? conditions << [' date LIKE ?', "%#{place}%"] :  conditions << []
    end
    find(:all, :conditions => conditions)
end 
```

它有效，直到我尝试附加 place 参数并收到此错误

> 错误数量的绑定变量（4 为 1）在：title LIKE ？

如果我删除这个：

```
if conditions
    !place.blank? ? conditions << [' AND place LIKE ?', "%#{place}%"] :  conditions << []
    !place.blank? ? conditions << [' AND category LIKE ?', "%#{place}%"] :  conditions << []
    !place.blank? ? conditions << [' AND date LIKE ?', "%#{place}%"] :  conditions << []
else 
    !place.blank? ? conditions << [' place LIKE ?', "%#{place}%"] :  conditions << []
    !place.blank? ? conditions << [' category LIKE ?', "%#{place}%"] :  conditions << []
    !place.blank? ? conditions << [' date LIKE ?', "%#{place}%"] :  conditions << []
end 
```

一切都很好，但我需要其他选项来创建我的搜索，我不明白为什么错误出现在“LiKE”中

有人可以帮助我吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T22:44:43.383

这非常难看，难以阅读/调试，因此容易出错

```
def self.searchadv(title, place, category, date)
  conditions              = {}
  conditions[:title]      = "%#{title}%" if title.present?

  if place.present?
    conditions[:place]    = "%#{place}%"
    conditions[:category] = "%#{category}%"
    conditions[:date]     = "%#{date}%"
  end

  where(conditions)
end 
```

**编辑**正如 OP 指出的那样，上面不允许通配符匹配。下面使用ARel的`matches`方法来完成这个。

```
def self.searchadv(title, place, category, date)
  offers     = self.arel_table
  predicates = []

  predicates << offers[:title].matches("%#{title}%") if title.present?

  if place.present?
    predicates << offers[:place].matches("%#{place}%")
    predicates << offers[:category].matches("%#{category}%")
    predicates << offers[:date].matches("%#{date}%")
  end

  if predicates.size > 1
    first = predicates.shift
    conditions = Arel::Nodes::Grouping.new(predicates.inject(first) {|memo, expr| Arel::Nodes::And.new(memo, expr)})
  else
    conditions = predicates.first
  end

  where(conditions).to_a
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T00:12:19.480

我首先尝试保留您的代码并且只尝试更正它，但是有很多不好的事情:) 这就是我将如何做到它保持与您使用的相同的结构（**但也许最好使用条件哈希正如@Deefour 的建议**）：

```
def self.searchadv(title, place, category, date)
  cond_ary = []
  cond_values = []
  unless title.blank?
    cond_ary << 'title LIKE ?'
    cond_values << "%#{title}%"
  end
  unless place.blank?
    cond_ary << 'place LIKE ? AND category LIKE ? AND date LIKE ?'
    cond_values.push("%#{place}%", "%#{place}%", "%#{place}%")
  end
  conditions = [ cond_ary.join(' AND ') ] + cond_values
  find(:all, :conditions => conditions)
end 
```

我可以建议您研究条件数组的外观，然后在 ruby​​ 控制台中使用数组。例如`ary << 1`，用`ary << [1,2,3]`, `ary.concat([1,2,3])`,`ary.push(1,2,3)`等查看数组会发生什么。

当你这样做时

```
expr ? x = 1 : x = 2 
```

最好用

```
x = expr ? 1 : 2 
```

# java - 按显示顺序获取组件

> ID：13674498
> 
> 赞同：1
> 
> 时间：2012-12-02T22:15:04.350
> 
> 标签：java, swing, jpanel, jcomponent

有没有办法根据它们在 JPanel 中显示的顺序（从左上到右下）而不是它们添加到 JPanel 的顺序来获取 JPanel 中的组件列表？

这似乎按照它们添加到面板的顺序获取组件

```
Component[] comps = myJPanel.getComponents(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T22:28:50.930

看一下[`Container#getFocusTraversalPolicy`](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#getFocusTraversalPolicy%28%29)，它返回一个[`FocusTraversalPolicy`](http://docs.oracle.com/javase/7/docs/api/java/awt/FocusTraversalPolicy.html)具有通过容器确定焦点移动的方法。

这（应该）为您提供组件的自然顺序（从布局管理器和焦点管理器的角度来看）

我会从[`FocusTraversalPolicy#getFirstComponent(Container)`](http://docs.oracle.com/javase/7/docs/api/java/awt/FocusTraversalPolicy.html#getFirstComponent%28java.awt.Container%29)和开始[`FocusTraversalPolicy#getComponentAfter(Container, Component)`](http://docs.oracle.com/javase/7/docs/api/java/awt/FocusTraversalPolicy.html#getComponentAfter%28java.awt.Container,%20java.awt.Component%29)

如果这不起作用，您可能需要为自己编写一个自定义[`Comparator`](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)并相应地对组件数组进行排序

**更新 - 焦点遍历示例**

```
public class ComponentOrder {

    public static void main(String[] args) {
        new ComponentOrder();
    }

    public ComponentOrder() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                BodyPane body = new BodyPane();

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(body);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

                Container focusRoot = body.getFocusCycleRootAncestor();
                FocusTraversalPolicy ftp = focusRoot.getFocusTraversalPolicy();
                Component comp = ftp.getFirstComponent(body);
                Component first = comp;
                while (comp != null) {
                    System.out.println(" - " + comp);
                    comp = ftp.getComponentAfter(focusRoot, comp);
                    if (comp.equals(first)) {
                        break;
                    }
                }
            }
        });
    }

    public class BodyPane extends JPanel {

        private JTextField fldFirstName;
        private JTextField fldMiddleName;
        private JTextField fldLastName;
        private JTextField fldDateOfBirth;
        private JTextField fldEMail;
        private JButton okButton;
        private JButton cancelButton;

        public BodyPane() {

            setLayout(new BorderLayout());
            add(createFieldsPane());
            add(createButtonsPane(), BorderLayout.SOUTH);

        }

        public JPanel createButtonsPane() {

            JPanel panel = new JPanel(new FlowLayout());
            panel.add((okButton = createButton("Ok")));
            panel.add((cancelButton = createButton("Cancel")));

            return panel;

        }

        protected JButton createButton(String text) {

            return new JButton(text);

        }

        public JPanel createFieldsPane() {

            JPanel panel = new JPanel(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.insets = new Insets(2, 2, 2, 2);
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.anchor = GridBagConstraints.WEST;

            panel.add(createLabel("First Name:"), gbc);
            gbc.gridy++;
            panel.add(createLabel("Middle Name:"), gbc);
            gbc.gridy++;
            panel.add(createLabel("Last Name:"), gbc);
            gbc.gridy++;
            panel.add(createLabel("Date of Birth:"), gbc);
            gbc.gridy++;
            panel.add(createLabel("EMail:"), gbc);

            gbc.gridy = 0;
            gbc.gridx++;
            gbc.weightx = 1;
            panel.add((fldFirstName = createField()), gbc);
            gbc.gridy++;
            panel.add((fldLastName = createField()), gbc);
            gbc.gridy++;
            panel.add((fldMiddleName = createField()), gbc);
            gbc.gridy++;
            panel.add((fldDateOfBirth = createField()), gbc);
            gbc.gridy++;
            panel.add((fldEMail = createField()), gbc);

            JPanel filler = new JPanel();
            filler.setOpaque(false);

            gbc.gridy++;
            gbc.weightx = 1;
            gbc.weighty = 1;
            panel.add(filler, gbc);

            return panel;

        }

        protected JLabel createLabel(String text) {

            return new JLabel(text);

        }

        protected JTextField createField() {

            JTextField field = new JTextField(12);
            return field;

        }
    }
} 
```

## 比较器示例

以下示例使用比较器来确定组件的流向。此版本将父容器中的所有组件转换为该容器坐标空间，因此应该可以将其与复合容器一起使用。

*nb*我偷了`javax.swing.LayoutComparator`受包保护的比较器（这对 SwingTeam 来说很好）并修改它以将组件坐标转换回父坐标空间

```
public class ComponentOrder {

    public static void main(String[] args) {
        new ComponentOrder();
    }

    public ComponentOrder() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                BodyPane body = new BodyPane();

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(body);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

                List<Component> components = new ArrayList<Component>(25);
                getContents(body, components);
                LayoutComparator lc = new LayoutComparator(body);
                lc.setComponentOrientation(body.getComponentOrientation());
                Collections.sort(components, lc);
                for (Component comp : components) {
                    System.out.println(comp);
                }
            }
        });
    }

    protected void getContents(Container container, List<Component> components) {
        for (Component comp : container.getComponents()) {
            components.add(comp);
            if (comp instanceof Container) {
                getContents((Container) comp, components);
            }
        }
    }

    public class BodyPane extends JPanel {

        private JTextField fldFirstName;
        private JTextField fldMiddleName;
        private JTextField fldLastName;
        private JTextField fldDateOfBirth;
        private JTextField fldEMail;
        private JButton okButton;
        private JButton cancelButton;

        public BodyPane() {
            setLayout(new BorderLayout());
            add(createFieldsPane());
            add(createButtonsPane(), BorderLayout.SOUTH);
        }

        public JPanel createButtonsPane() {
            JPanel panel = new JPanel(new FlowLayout());
            panel.add((okButton = createButton("Ok")));
            panel.add((cancelButton = createButton("Cancel")));
            return panel;
        }

        protected JButton createButton(String text) {
            return new JButton(text);
        }

        public JPanel createFieldsPane() {
            JPanel panel = new JPanel(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.insets = new Insets(2, 2, 2, 2);
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.anchor = GridBagConstraints.WEST;

            panel.add(createLabel("First Name:"), gbc);
            gbc.gridy++;
            panel.add(createLabel("Middle Name:"), gbc);
            gbc.gridy++;
            panel.add(createLabel("Last Name:"), gbc);
            gbc.gridy++;
            panel.add(createLabel("Date of Birth:"), gbc);
            gbc.gridy++;
            panel.add(createLabel("EMail:"), gbc);

            gbc.gridy = 0;
            gbc.gridx++;
            gbc.weightx = 1;
            panel.add((fldFirstName = createField("FirstName")), gbc);
            gbc.gridy++;
            panel.add((fldLastName = createField("LastName")), gbc);
            gbc.gridy++;
            panel.add((fldMiddleName = createField("MiddleName")), gbc);
            gbc.gridy++;
            panel.add((fldDateOfBirth = createField("DateOfBirth")), gbc);
            gbc.gridy++;
            panel.add((fldEMail = createField("EMail")), gbc);

            JPanel filler = new JPanel();
            filler.setOpaque(false);

            gbc.gridy++;
            gbc.weightx = 1;
            gbc.weighty = 1;
            panel.add(filler, gbc);

            return panel;
        }

        protected JLabel createLabel(String text) {
            JLabel label = new JLabel(text);
            label.setName(text);
            return label;
        }

        protected JTextField createField(String name) {
            JTextField field = new JTextField(12);
            field.setName("Field-" + name);
            return field;
        }
    }

    public class LayoutComparator implements Comparator<Component>, java.io.Serializable {

        private static final int ROW_TOLERANCE = 10;
        private boolean horizontal = true;
        private boolean leftToRight = true;

        private Component parent;

        public LayoutComparator(Component parent) {
            this.parent = parent;
        }

        void setComponentOrientation(ComponentOrientation orientation) {
            horizontal = orientation.isHorizontal();
            leftToRight = orientation.isLeftToRight();
        }

        public int compare(Component a, Component b) {
            if (a == b) {
                return 0;
            }

            // Row/Column algorithm only applies to siblings. If 'a' and 'b'
            // aren't siblings, then we need to find their most inferior
            // ancestors which share a parent. Compute the ancestory lists for
            // each Component and then search from the Window down until the
            // hierarchy branches.
            if (a.getParent() != b.getParent()) {
                LinkedList<Component> aAncestory = new LinkedList<Component>();

                for (; a != null; a = a.getParent()) {
                    aAncestory.add(a);
                    if (a instanceof Window) {
                        break;
                    }
                }
                if (a == null) {
                    // 'a' is not part of a Window hierarchy. Can't cope.
                    throw new ClassCastException();
                }

                LinkedList<Component> bAncestory = new LinkedList<Component>();

                for (; b != null; b = b.getParent()) {
                    bAncestory.add(b);
                    if (b instanceof Window) {
                        break;
                    }
                }
                if (b == null) {
                    // 'b' is not part of a Window hierarchy. Can't cope.
                    throw new ClassCastException();
                }

                for (ListIterator<Component> aIter = aAncestory.listIterator(aAncestory.size()),
                                bIter = bAncestory.listIterator(bAncestory.size());;) {
                    if (aIter.hasPrevious()) {
                        a = aIter.previous();
                    } else {
                        // a is an ancestor of b
                        return -1;
                    }

                    if (bIter.hasPrevious()) {
                        b = bIter.previous();
                    } else {
                        // b is an ancestor of a
                        return 1;
                    }

                    if (a != b) {
                        break;
                    }
                }
            }

            Point pa = SwingUtilities.convertPoint(a, a.getLocation(), parent);
            Point pb = SwingUtilities.convertPoint(b, b.getLocation(), parent);

            int ax = pa.x, ay = pa.y, bx = pb.x, by = pb.y;

            int zOrder = a.getParent().getComponentZOrder(a) - b.getParent().getComponentZOrder(b);
            if (horizontal) {
                if (leftToRight) {

                    // LT - Western Europe (optional for Japanese, Chinese, Korean)

                    if (Math.abs(ay - by) < ROW_TOLERANCE) {
                        return (ax < bx) ? -1 : ((ax > bx) ? 1 : zOrder);
                    } else {
                        return (ay < by) ? -1 : 1;
                    }
                } else { // !leftToRight

                    // RT - Middle East (Arabic, Hebrew)

                    if (Math.abs(ay - by) < ROW_TOLERANCE) {
                        return (ax > bx) ? -1 : ((ax < bx) ? 1 : zOrder);
                    } else {
                        return (ay < by) ? -1 : 1;
                    }
                }
            } else { // !horizontal
                if (leftToRight) {

                    // TL - Mongolian

                    if (Math.abs(ax - bx) < ROW_TOLERANCE) {
                        return (ay < by) ? -1 : ((ay > by) ? 1 : zOrder);
                    } else {
                        return (ax < bx) ? -1 : 1;
                    }
                } else { // !leftToRight

                    // TR - Japanese, Chinese, Korean

                    if (Math.abs(ax - bx) < ROW_TOLERANCE) {
                        return (ay < by) ? -1 : ((ay > by) ? 1 : zOrder);
                    } else {
                        return (ax > bx) ? -1 : 1;
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T21:59:53.797

虽然之前提交的解决方案很巧妙，但（总体上）满足我大部分要求的方法相当简单，并且依赖于窗口架构的左上角有零零（根）点。

由于确切的编码将取决于您选择使用哪些库，让我试探性地描述随后的过程：

任意一点到原点的距离`(x,y)`为`(x^2 + y^2)**(0.5)`。使用这个可以构造一个影子阵列，它用一个数字来镜像每一对。通过简单地对这些距离中的每一个进行关系升序排序，可以得出从左上到右下顺序的相当好的近似值。

有一些病态的例子应该避免（或至少理解）。例如，使用指向屏幕左上角的指南针将生成无限数量的点，这些点与原点的距离完全相同。

为了解决这个问题，可以简单地用一个乘数对`x`或`y`值进行预缩放，然后再对其进行平方并将其与所描述的另一个平方单位相结合。这将按比例`"y"`为高于`x`窗口左边缘的 a 提供更多价值，反之亦然。

# c - valgrind 不理解 bzero

> ID：13674514
> 
> 赞同：1
> 
> 时间：2012-12-02T22:16:27.850
> 
> 标签：c, gcc, memory-management, valgrind

我为两个我视为数组的指针分配了足够的内存：

```
// Allocate memory for both adj and deg
int *adjdeg = malloc(sizeof(int)*n*n);

adj = adjdeg;
deg = adjdeg + n*n - n; 
```

然后我使用`bzero`来自 string.h 的GNU 将`deg`“数组”中的值初始化为 0（`adj`“数组”不需要初始化为它，因为我在读取它之前写入它）。这工作正常，我的程序运行成功，但是每当我从`deg`(IE. `deg[0]`) 读取时，valgrind 都会报告许多关于使用初始化值的错误。这是我的电话`bzero`：

```
// My bzero call
bzero(deg, n); 
```

如果我删除对 bzero 的调用并使用如下循环，valgrind 会很高兴：

```
int i; 
for(i = 0; i < n; i++)
    deg[i] = 0; 
```

有没有办法告诉 valgrind bzero 正在正确初始化内存中的那个区域？我正在使用 gcc 4.6.3 和 valgrind 3.7.0

注意：如果我使用 valgrind`memset`而不是`bzero`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T22:25:06.013

你应该使用：

```
bzero(deg, n * sizeof(int)); 
```

实际上，您正在初始化`n`字节，而不是`n`整数。为了获得最大的可移植性，您可能应该使用`memset()`而不是`bzero()`，但您仍然需要`sizeof(int)`大小的乘数：

```
memset(deg, '\0', n * sizeof(int)); 
```

# algorithm - Multiway Cut Q-我们如何在多项式时间内显示解决方案？

> ID：13674520
> 
> 赞同：0
> 
> 时间：2012-12-02T22:16:57.953
> 
> 标签：algorithm

在多路切割问题中，输入是一个无向图 G= (V, E) 和一组终端节点 s1, s2....sk 在 V 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T22:44:23.073

1.  这个问题确实可以通过@Aasmund Eldhuset 提出的最小切割最大流量来解决，S1，S2 之间的最小切割实际上是为了分离 S1 和 S2 而需要删除的最小边集。
    请记住，最小切割问题说：

    > 给定一个图（加权，但您可以`w(e)=1`用于未加权版本的所有边），找到组合最小权重的边集 - 使得源 (S1) 和接收器 (S2) 将位于不同的连接组件中。

    请注意，这个问题正是您的问题 - 并且可以通过[Edmond Karp](http://en.wikipedia.org/wiki/Edmonds%E2%80%93Karp_algorithm)等一些算法解决- 它在多项式时间内运行

2.  通过对 (S1,S2) 和 (S2,S3) 重复该过程，您将获得 2 组边 E1（对于 S1,S2）和 E2（对于 S2,S3）。
    现在，请注意最佳解决方案（让它成为 OPT）不小于 E1 和 E2（否则 - 由于 OPT 的“切割”将 S1、S2 和 S2、S3 分开 - 它会作为答案返回，而不是E1 或 E2。
    由此我们可以得出结论`|OPT| >= max{|E1|,|E2|}`。注意`|E1 Union E2| <= |E1| + |E2| <= |OPT| + |OPT| = 2|OPT|`- 因此`E1 Union E2`是问题的 2 近似值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T22:29:57.187

这听起来像是功课，但我突然想到了一个提示：如果你把你的图变成一个流网络，其中每条边的容量为 1，并使用两个终端节点作为源和汇，你可以使用 Edmonds- Karp 在多项式时间内找到两个终端节点之间的流。当你找到最大流量时，*最小切最大流量定理*告诉你什么？

# jakarta-ee - Tomcat 6 看不到 jar 中的 bean

> ID：13674523
> 
> 赞同：0
> 
> 时间：2012-12-02T22:17:10.943
> 
> 标签：jakarta-ee, tomcat, jsf-2

从 JSF 1.2 迁移到 2.1 后，tomcat 看不到导出到 jar 文件的 bean。我将应用程序引擎导出到 jar 以用于测试和生产服务器。如果我将类文件复制到 WEB-INF/classes 它工作正常。

对于 JSF 1.2，这种方法是有效的。曾经使用 faces-bean.xml 定义所有 bean，现在我使用注解，而 faces-bean 中只有我无法使用注解定义的 bean。

我在网上找到要添加faces-config.xml，但我有。

我能做些什么来强制 tomacat6 从 jar 文件中查看 bean？

我的配置文件：

**面孔-confi.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_1.xsd"
version="2.1">
<component>
    <component-type>org.richfaces.OutputPanel</component-type>
    <component-class>my.package..UIOutputPanelWorkaround</component-class>
</component> 
```

在 web xml 中，我定义了一些带有 bean 和导航案例的文件：

```
<context-param>
<param-name>javax.faces.CONFIG_FILES</param-name>
<param-value>
        /WEB-INF/faces-config/faces-config.xml,
        /WEB-INF/faces-config/faces-beans-common.xml,
        /WEB-INF/faces-config/faces-beans-admin.xml,
        /WEB-INF/faces-config/faces-beans.xml,
        /WEB-INF/faces-config/faces-navigations.xml,
        /WEB-INF/faces-config/faces-navigations-admin.xml,      
        /WEB-INF/faces-config/faces-navigations-raports.xml
    </param-value> 
```

谢谢！问候

**更新：**

我在日志中发现的异常之一，myBean 使用注释。

```
WARNING: #{myBean.page1}: javax.el.PropertyNotFoundException: /include/sprawdzSzanse-box-v2.xhtml @34,164 action="#{myBean.page1}": Target Unreachable, identifier 'myBean' resolved to null
javax.faces.FacesException: #{myBean.page1}: javax.el.PropertyNotFoundException: /include/sprawdzSzanse-box-v2.xhtml @34,164 action="#{myBean.page1}": Target Unreachable, identifier 'myBean' resolved to null
at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:117)
at javax.faces.component.UICommand.broadcast(UICommand.java:315)
at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at my.package.LifecycleDecorator.execute(LifecycleDecorator.java:66)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at my.package.ie9fix.ie9fixFilter.doFilter(ie9fixFilter.java:41)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.tuckey.web.filters.urlrewrite.RuleChain.handleRewrite(RuleChain.java:176)
at org.tuckey.web.filters.urlrewrite.RuleChain.doRules(RuleChain.java:145)
at org.tuckey.web.filters.urlrewrite.UrlRewriter.processRequest(UrlRewriter.java:92)
at org.tuckey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java:381)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.myfaces.webapp.filter.ExtensionsFilter.doFilter(ExtensionsFilter.java:357)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:265)
at org.acegisecurity.intercept.web.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:107)
at org.acegisecurity.intercept.web.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:72)
at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
at org.acegisecurity.ui.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:166)
at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
at org.acegisecurity.providers.anonymous.AnonymousProcessingFilter.doFilter(AnonymousProcessingFilter.java:125)
at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
at org.acegisecurity.ui.rememberme.RememberMeProcessingFilter.doFilter(RememberMeProcessingFilter.java:142)
at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
at org.acegisecurity.wrapper.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:81)
at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
at org.acegisecurity.ui.AbstractProcessingFilter.doFilter(AbstractProcessingFilter.java:271)
at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
at org.acegisecurity.ui.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
at org.acegisecurity.context.HttpSessionContextIntegrationFilter.doFilter(HttpSessionContextIntegrationFilter.java:249)
at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
at org.acegisecurity.util.FilterChainProxy.doFilter(FilterChainProxy.java:149)
at org.acegisecurity.util.FilterToBeanProxy.doFilter(FilterToBeanProxy.java:98)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Thread.java:636)
Caused by: javax.faces.el.EvaluationException: javax.el.PropertyNotFoundException: /include/sprawdzSzanse-box-v2.xhtml @34,164 action="#{myBean.page1}": Target Unreachable, identifier 'myBean' resolved to null
at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:95)
at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:101)
... 58 more
Caused by: javax.el.PropertyNotFoundException: /include/sprawdzSzanse-box-v2.xhtml @34,164 action="#{myBean.page1}": Target Unreachable, identifier 'myBean' resolved to null
at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:107)
at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
... 59 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-05T21:41:55.380

显然我解决了这个问题。以前我无法回答太少的声誉，我忘记了这一点。

我添加到 MATA-INF faces-config.xml 中，该文件与类一起放置在 jar 文件中。

包含 faces-config.xml：

```
<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee/ http://xmlns.jcp.org/xml/ns/javaee/web-facesconfig_2_2.xsd"
    version="2.2">

</faces-config> 
```

抱歉迟到了，我希望它会帮助别人。

# asp.net - AppHarbor：不允许使用目录“/App_GlobalResources/”，因为应用程序已预编译

> ID：13674529
> 
> 赞同：12
> 
> 时间：2012-12-02T22:17:44.983
> 
> 标签：asp.net, webforms, appharbor, app-globalresources

我试图将我的 ASP.NET WebForms 应用程序部署到 AppHarbor。成功部署后，我得到

```
The directory '/App_GlobalResources/' is not allowed because the application is precompiled 
```

我在应用程序设置中禁用了预编译，但没有帮助。我该怎么办？我应该更改项目中的一些设置吗？它是服务器配置吗？

我找到了一个删除 PrecompiledApp.config 的解决方案，但我无法在 AppHarbor 上访问它。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-03-06T15:00:58.017

如果您的站点是预编译的，您需要做的就是确保从您的部署位置删除目录 /App_GlobalResources。

我遇到了完全相同的问题，当我删除这个目录时，一切都很好。

注意：最好对您的站点进行预编译，这样它会更快、响应更快，因此从部署文件夹中删除 precompiledapp.config 文件可能不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T12:26:53.960

诀窍不仅在于禁用应用程序设置中的预编译，还在于部署新版本以便重新启动应用程序。

# ios - 在 iOS 中实时更改播放曲目的速度（节奏）

> ID：13674531
> 
> 赞同：1
> 
> 时间：2012-12-02T22:18:02.720
> 
> 标签：ios, audio, core-audio

我正在编写一个基本上基于一个非常简单的 DJ 隐喻的应用程序。我希望能够通过调整滑块来实时更改曲目的速度。

这可以使用 AVAudioPlayer 类实时完成，还是只能在准备播放曲目时进行设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:02:13.957

不是使用 AVAudioPlayer 类，而是可能使用新的时间音高音频单元使用 iOS 音频单元 API 来播放您的曲目。

# c++ - 使用距离矩阵存储点之间的距离并找到最近的邻居

> ID：13674533
> 
> 赞同：0
> 
> 时间：2012-12-02T22:18:09.117
> 
> 标签：c++, arrays, multidimensional-array, distance

我需要帮助完成一项任务。我生成了两个平行数组来保存 8 个点的位置（一个保存 x 坐标，一个保存 y 坐标）。然后用户输入这些点的坐标。到目前为止，我的代码工作得非常好，但这是我需要帮助的地方：

我必须计算每对点之间的距离，然后将距离存储在二维数组中。这样做之后，我必须逐行打印距离数组。

这样做之后，我接下来必须使用距离矩阵（二维数组）来找到每个点的最近邻居。

任何帮助表示赞赏，让我知道是否需要详细说明。

这是我当前的代码，我不知道从哪里开始。

```
double distance(double x1,double y1,double x2 ,double y2)
{
double distance;

distance = sqrt((x2-x1)*(x2-x1) + (y2-y1)*(y2-y1));

return distance;
}

int main()
{
double xPoint[6];
double yPoint[6];
double matrix[6][6];

for(int i=0; i<6; i++)
{
    cout << "Enter the x coordinate for position " << i << ": " << endl;
    cin >> xPoint[i];
    cout << "Enter the y coordinate for position " << i << ": " << endl;
    cin >> yPoint[i];
}

for(int x =0; x<6; x++)
{
    for(int y=0; y<6; y++)
    {
        matrix[x][y] = distance()
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:40:18.660

```
#include <iostream>
#include<cmath>
using namespace std;

/*double distance(double x1,double y1,double x2 ,double y2)
 {
double x;

x= sqrt((x2-x1)*(x2-x1) + (y2-y1)*(y2-y1));

return x;
 }
*/
int main()
 {
double xPoint[6];
 double yPoint[6];
// double matrix[6][6];

 for(int i=0; i<6; i++)
    {
cout << "Enter the x coordinate for position " << i << ": " << endl;
cin >> xPoint[i];
cout << "Enter the y coordinate for position " << i << ": " << endl;
cin >> yPoint[i];
 }

  for(int i=0; i<5; i++)
   {
  // for(int i=0; i<6; i++){
double X=sqrt(pow(xPoint[i+1]-xPoint[i],2)+pow(yPoint[i+1]-yPoint[i],2));

 cout<<X<<"    ";
 cout<<endl;
 // }
 }
 } 
```

你想要这样吗？我可能不完全理解你的问题

# vim - 变量周围的 Vim 视觉选择

> ID：13674534
> 
> 赞同：4
> 
> 时间：2012-12-02T22:18:09.950
> 
> 标签：vim

我想知道是否有一种方法可以智能地选择变量，就像使用`va}`. 例如，有一些特定于语言的解析来区分 php 和 ruby​​。为了将来参考，最好利用它 - 最好围绕各种句法元素进行选择。

例如。我想`$array['testing']`在以下 php 行中进行选择：

```
$array['testing'] = 'whatever' 
```

或者，假设我想在`|item, index|`这里选择块参数列表：

```
hash.each_with_index { |item, index| print item } 
```

* * *

编辑：

特定的正则表达式可能会单独解决各种问题，但我觉得*应该*有一种方法可以利用句法分析来获得更强大的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T09:45:44.647

尽管您给定的示例可以使用内置的 Vim 文本对象快速选择（第一个只是`viW`，第二个我将使用`F|v,`），但我承认 Vim 的语法突出显示可能是运动和文本对象的良好来源。

我在[SyntaxMotion 插件](http://www.vim.org/scripts/script.php?script_id=2965)中看到了这个想法的第一个实现，我最近实现了一个类似的插件：[SameSyntaxMotion](http://www.vim.org/scripts/script.php?script_id=4338)。第一个定义了正常和可视模式的动作，但没有操作员挂起和文本对象。它不会跳过包含的子语法项目并使用与区分属性相同的颜色，而我的使用语法（可能更精确，但也更难掌握），并且也有文本对象（`ay`和`iy`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T10:53:38.680

你可以在 Vim中**定义你自己的任意文本对象。**

执行自定义文本对象的最简单方法是为 Visual 模式部分定义一个`:vmap`（或），为 Operator-pending 模式部分定义一个。例如，以下映射`:xmap``:omap`

```
xnoremap aC F:o,
onoremap aC :normal! F:v,<CR> 
```

让您选择一个冒号括起来的文本。尝试在下面的“冒号”一词上做`vaP`或：`daP`

```
Some text :in-colon-text: more of the same. 
```

参见[`:h omap-info`](http://vimdoc.sourceforge.net/htmldoc/map.html#omap-info)的另一个简短示例`:omap`。

* * *

但是，如果您不介意依赖**插件**，则可以[***使用 textobj-user***](http://www.vim.org/scripts/script.php?script_id=2100)。这是由 Kana Natsuno 编写的自定义文本对象的通用框架。已经有一些为该框架编写的优秀文本对象，例如我认为必不可少[*的 textobj-indent 。*](http://www.vim.org/scripts/script.php?script_id=2484)

使用它，您可以轻松地为变量实现文件类型相关的文本对象。并提供给所有人！

# java - 在java中拆分字符串数组

> ID：13674536
> 
> 赞同：0
> 
> 时间：2012-12-02T22:18:16.260
> 
> 标签：java, arrays, multidimensional-array

在某个索引中拆分字符串数组以使字符串矩阵删除您拆分的元素的最佳方法是什么。例如，对于字符串数组`["Good","Bad","Sad"]`，如果我将其拆分为 1，它将给我一个看起来像这样的字符串矩阵`[["Good"],["Sad"]]`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T22:19:38.240

您可以使用`ArrayList`而不是数组。从数组列表中删除随机元素非常容易，因为它是动态的。

```
ArrayList>String> list = new ArrayList<String>();
...
list.remove(1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T22:47:50.527

ivanovic 的回答很好地解释了如何使用 java Collection (List) 从字符串序列中简单地删除一个元素。这确实是实现该目标的直接方法（删除元素）。

但是，我对 OP 问题的理解是，他获取一个字符串数组作为参数，并希望返回一个二维字符串数组。“拆分索引”元素不应包含在结果字符串 [] [] 中。

因此，根据我的理解，我添加了另一个答案：

```
final String[] input = new String[] { "one", "two", "three", "four", "five", "six", "seven", "eight" };
        final int len = input.length;
        final int pos = 3;
        final String[][] result = new String[2][Math.max(pos, len - pos - 1)];
        result[0] = Arrays.copyOf(input, pos);
        result[1] = Arrays.copyOfRange(input, pos + 1, len); 
```

好吧，这甚至不是 java 方法，但它解释了如何获得结果。在上面的示例中，结果将是一个二维数组，`[[one, two, three], [five, six, seven, eight]]`

编辑：

将它包装在一个方法中很容易：

```
public static String[][] splitStringArray(String[] input, int pos) {
        final int len = input.length;
        final String[][] result = new String[2][Math.max(pos, len - pos - 1)];
        result[0] = Arrays.copyOf(input, pos);
        result[1] = Arrays.copyOfRange(input, pos + 1, len);
        return result;
    } 
```

请注意，错误处理部分不存在，例如 pos 出站处理、NPE 检查（输入）等。我相信您可以自己完成。

# javascript - 函数内高级javascript调用插件函数

> ID：13674539
> 
> 赞同：1
> 
> 时间：2012-12-02T22:18:31.380
> 
> 标签：javascript, jquery

```
 (function($) {
     $.fn.extend({
     clock: function(options) {
     var options = $.extend(defaults, options);
        .......
        .......
        return this.each(function() {
         var prev = function() {
                console.log("hello world!");
            alert('getweather');
            };
            $('#left').click(function() {alert(342);});

      });
})(jQuery); 
```

如何从下面的代码中调用插件函数 prev 和 $('#left')

```
 $.fn.clock().prev(); //doesn't work

 $.fn.clock('#left');   //doesn't work 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T22:22:56.550

根据提供的代码，您不能。是不可能的。该函数被分配给局部变量`prev`，它不会以任何方式暴露在局部范围之外。

如果你想让它可以访问，你需要将函数存储在某个地方，这样它就不会超出范围，然后提供一些接口，通常通过类似`$('my-element').clock('prev')`. [jQuery Plugin Authoring](http://docs.jquery.com/Plugins/Authoring)解释了这方面的最佳实践，特别是在[Plugin Methods](http://docs.jquery.com/Plugins/Authoring#Plugin_Methods)下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T22:23:56.920

这些是`anonymous`功能。即使它们在您的范围内，您也无法调用它们。

一种解决方法是触发`click`事件`#left`：

```
$('#left').trigger('click'); 
```

# c# - 处理请求流时出错。类型名称 ' ' 无效

> ID：13674540
> 
> 赞同：2
> 
> 时间：2012-12-02T22:18:31.083
> 
> 标签：c#, wcf, ef-code-first, odata

我正在使用实体框架 5.0 代码和 WCF 数据服务 5.0 构建应用程序

我有业务层、数据服务层和领域层，

在域层中，我拥有代表数据库表和其他模型的所有 POCO 实体（SomeContext），这个项目我也得到了 dbcontext。在 DataService 的数据服务层中引用

我在侧数据服务层中使用 datasvcutil.exe 创建了上下文引用，并在数据服务调用中编写了所有服务调用。从业务层调用。

保存时我收到以下错误错误处理请求流。类型名称“.DataService.Carrier”无效。

下面是我的保存方法（DataServiceContext 中的这个方法）

```
 public DataServiceResponse SaveCarriers(Carrier carrier)
        {
            this.AddToCarriers(carrier);
            return SaveChanges();
        } 
```

我错过了什么？有人可以指导我吗？

谢谢

# apache - mod_rewrite 将每个页面重定向到主页

> ID：13674541
> 
> 赞同：1
> 
> 时间：2012-12-02T22:18:32.673
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我在 www.decraciun.biz 上的 mod_rewrite 有问题
似乎每个页面都被重定向到主页。
我的 .htacces 文件如下所示：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

谢谢你，
拉杜-斯特凡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:06:45.000

您的 .htaccess 文件将每个不是文件或目录的请求重定向到主页。

该`RewriteCond ... !-f`行忽略对存在的文件的任何请求，并`RewriteCond ... !-d`忽略对存在的目录的任何请求。换句话说，如果有人请求一个存在的文件或目录，URL 不会被重写。否则，`RewriteRule`使用该行。它匹配任何 URL 并将其重写为`index.php/`后跟请求的 URL。

对现有文件或目录的请求是否也重定向到主页？

# javascript - 加载后跳转到 iframe

> ID：13674542
> 
> 赞同：0
> 
> 时间：2012-12-02T22:18:53.703
> 
> 标签：javascript, html, iframe, scroll

当有人点击时，我正在寻找我的网页以跳转到 iframe。我找到了一种效果很好的解决方案，那就是：http: [//jsfiddle.net/RGjCL/4/](http://jsfiddle.net/RGjCL/4/)

```
<ul>
    <li>
        <a href="javascript:void(0)" onclick="IFrameScroll('http://www.asdf.com')">Class Name</a>
    </li>
 </ul>

<script type="text/javascript">
    function IFrameScroll(link){
        window.myIframe.location=link;
        window.location.hash='myIframe'
    }
</script>
<IFRAME id = "myframe"  onload = "setIframeHeight( this.id )" name="myIframe"> 
```

我已经在我的网络上尝试过，它部分有效，除了它在加载之前滚动到 iframe 的事实，所以它不会走到底部那么远，因为一旦 iframe 加载，页面就会完全扩展。

有问题的网络如下：[http](http://www.clavederock.com.ar) ://www.clavederock.com.ar - 链接位于“Quienes Somos”“Programacion”和“Archivo”选项卡下。

我希望我说清楚了，所以你可以帮助我。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:38:45.500

尝试`window.location.hash='myIframe'`从函数移动`IFrameScroll()`到`setIFrameHeight()`，因此一旦 iframe 具有所需的大小，您将更改哈希。

编辑#3：

由于您需要等到 iframe 加载才能调整它的大小并且`window.location.hash`第二次在 chrome 中不起作用，您可以试试这个：

```
<script type="text/javascript">
    function IFrameScroll(link){

        window.myIframe.onload = function() {
            // this will ensure that the height will be updated after load
            setIframeHeight('myIframe');
            // This works on FF and IE, and let users to bookmark
            window.location.hash='myIframe';
            // and this will allow it to scroll the second time for chrome
            document.getElementById('myIframe').scrollIntoView(true);
        }

        window.myIframe.location=link;

    }
</script> 
```

我真的希望这能解决你的问题:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T22:44:28.563

您可以进行平滑滚动，而不是跳转到 iframe。在单击链接后，这将为 iframe 加载更多时间。

或者，可能更有效的是，您可以将 iframe 与页面的其余部分一起加载，但使其不可见。然后你只需要在用户点击链接时显示它

```
//load the page with the iframe hidden
//in css
#myIframe { visibility: hidden; }
//use jquery to make it visible when the user clicks the link
//you could do this with javascript if you don't want to import jQuery, but I find jQuery easier
$(document).ready(function() {
    $('#myAnchorTagId').click(
        function() {
            $('myIframe').css('visibiliy', 'visible')
        }
    )
}); 
```

# python - Python-如何在字典中找到多个值/键的平均值

> ID：13674544
> 
> 赞同：6
> 
> 时间：2012-12-02T22:19:09.450
> 
> 标签：python, dictionary, average

我有一本看起来像这样的字典。. .

```
CombinedDict = {'Abamectin': [63, 31, 53], 'Difenzoquat metilsulfate': [185, 49, 152], 'Chlorpyrifos': [14, 26, 56], 'Dibutyl phthalate': [25, -17, -18] 
```

等等。我总共有 48 个不同的键。

我想要得到的是三个数字的平均值。所以我会得到一个看起来像这样的字典。. .

```
 AvgDictName = {'Abamectin': [49], 'Difenzoquat metilsulfate': [128], 'Chlorpyrifos': [32], 'Dibutyl phthalate': [-3] . . . 
```

我试过用这条线

```
 AvgDictName = dict([(key, float(sum([int(i) for i in values])) / len(values)) for key, values in CombinedDict]) 
```

但是我得到*了太多的值来解压错误有* 什么想法吗？我认为也可以通过将 dict 放入列表并使用 len 和 sum 命令从列表中找到平均值然后转换回 dict 来完成，但我真的不知道该怎么做。谢谢，我觉得这应该很容易。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T22:21:49.717

你需要迭代[`CombinedDict.items()`](http://docs.python.org/2/library/stdtypes.html#dict.items)或者[`CombinedDict.iteritems()`](http://docs.python.org/2/library/stdtypes.html#dict.iteritems)如果你想解压到`key, values`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T22:23:20.913

`for x in dictionary: ...`遍历字典的键。

除非键本身是元组，`for a, b in dictionary`否则会出错，因为它会尝试将键解包为两个值。

对于迭代字典，您应该使用[`items()`](http://docs.python.org/2/library/stdtypes.html#dict.items), [`keys()`](http://docs.python.org/2/library/stdtypes.html#dict.keys), and [`values()`](http://docs.python.org/2/library/stdtypes.html#dict.values)（或它们`iter*`在 python 2.x 中的等价物）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:05:34.840

```
 python 3.2

    >>> [(i,sum(v)//len(v)) for i,v in t.items()] 
```

# c# - 子控件未呈现

> ID：13674546
> 
> 赞同：0
> 
> 时间：2012-12-02T22:19:34.047
> 
> 标签：c#, asp.net, custom-server-controls

我创建了一个自定义复合控件，其中包含来自该项目[https://googlevisnet.codeplex.com/](https://googlevisnet.codeplex.com/)的子控件（它是我检查过多次的谷歌图表的 .NET 库）。我正在使用 VisualStudio 2012 和一个简单的 C# 类库。

我像这样覆盖 CreateChildControl：

```
protected override void CreateChildControls()
    {
        Controls.Clear();

        //create the pie control
        GenderChart = new GVPieChart();
        GenderChart.Width = PieChartDimentions[0];
        GenderChart.Height = PieChartDimentions[1];
        GenderChart.ChartData(GenderDistributionTable);

        //create the bar control
        AgeChart = new GVColumnChart();
        AgeChart.Width = BarChartDimentions[0];
        AgeChart.Height = BarChartDimentions[1];
        AgeChart.ChartData(AgeDistributionTable);

        this.Controls.Add(GenderChart);
        this.Controls.Add(AgeChart);
    } 
```

并像这样覆盖渲染：

```
AgeChart.RenderControl(output); 
```

当我在页面上运行代码时，一切似乎都正常工作，并且我可以告诉控件正确呈现了该区域（我可以看到具有特定大小的 div），但是我看不到图表本身。

奇怪的是，它在那里工作了一会儿，然后又停止了，而我没有对代码进行任何更改。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T07:49:57.040

显然，解决问题的方法就像为控件添加 ID 一样愚蠢。受保护的覆盖无效 CreateChildControls() { Controls.Clear();

```
 //create the pie control
        GenderChart = new GVPieChart();
        GenderChart.ID = "genderChar";
        GenderChart.Width = PieChartDimentions[0];
        GenderChart.Height = PieChartDimentions[1];
        GenderChart.ChartData(GenderDistributionTable);

        ////create the bar control
        AgeChart = new GVColumnChart();
        AgeChart.ID = "ageChart";
        AgeChart.Width = BarChartDimentions[0];
        AgeChart.Height = BarChartDimentions[1];
        AgeChart.ChartData(AgeDistributionTable);

        this.Controls.Add(GenderChart);
        this.Controls.Add(AgeChart);
    } 
```

我不知道我怎么忘记了像 ID 这样重要的东西。我们的头脑在某些时候停止思考简单。

干杯:)

# ruby-on-rails - 数据库级别的模型属性数据验证

> ID：13674550
> 
> 赞同：0
> 
> 时间：2012-12-02T22:19:42.660
> 
> 标签：ruby-on-rails, migration

我想验证用户名不是以下之一。`["admin", "moderator", "mod", "administrator"]`.

我确实使用自定义验证器验证这些名称在模型级别是不允许的。

```
class User < ActiveRecord::Base
  ...
  validate :username_should_not_be

  def username_should_not_be
    not_allowed = ["admin", "moderator", "mod", "administrator"]
    if not_allowed.include?(username.downcase)
      error.add(:username, "is not allowed.")
    end
  end
  ...
end 
```

我想知道我是否也可以在数据库级别验证这一点（也许使用迁移文件？）。对于上述特定情况可以这样做吗？

[Rails 指南](http://guides.rubyonrails.org/active_record_validations_callbacks.html#why-use-validations)似乎也鼓励这种做法

> 在数据库级别使用一些约束可能是个好主意。此外，数据库级别的验证可以安全地处理一些在其他情况下难以实现的事情（例如在频繁使用的表中的唯一性）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-29T11:28:59.210

您可以使用 PostgreSQL 的 mv-postgresql gem 和 SQLite 的 mv-sqlite gem 来做到这一点。这两个 gem 都是 Migration Validator 项目的一部分（请参阅此处的详细信息：[https](https://github.com/vprokopchuk256/mv-core) ://github.com/vprokopchuk256/mv-core 。

使用该 gem，您可以在数据库级别定义验证。在你的情况下：

```
def up
  validates :users, :username, 
             exclusion: ["admin", "moderator", "mod", "administrator"]
end

def down
   validates :users, :username, exclusion: false
end 
```

然后您（最好）将该验证传播到您的模型：

```
class User < ActiveRecord::Base
  enforce_migration_validations
end 
```

结果：

```
User.new(username: 'admin').valid?
=> false

User.new(username:  'jasoki').valid?
=> true 
```

# c++ - 如何创建类型为抽象但对象将是派生类的数组（C++）

> ID：13674552
> 
> 赞同：2
> 
> 时间：2012-12-02T22:20:15.747
> 
> 标签：c++

我的问题是我需要能够创建一个包含 100 个对象的数组。然而，这些对象可能是四种不同的对象之一，所有这些对象最终都派生自一个抽象类。我可以使用 4 个单独的数组，但似乎我的老师只希望我们使用一个数组。

类结构是：DVD & VHS 来源于 Video，CD & Cassette 来源于 Audio，Audio & Video 来源于 Media。音频、视频和媒体都是抽象的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T22:23:09.513

你必须使用指针。您不能复制或分配派生类型，至少不能通过基类型的声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T23:05:49.237

对于数组 - 类型的大小必须已知（用于保留连续内存） - 类型可能不是抽象类（用于初始化类必须是可实例化的）

数组的唯一解决方案是使用指针间接寻址，因为指针的大小是已知的。您可以使用原始或智能指针指向基类。使用原始指针时，您必须在删除数组之前处理对象破坏。当您的数组本身驻留在堆上时，请不要忘记`delete []`。

为了克服这些问题，应该使用带有[智能指针的标准](http://en.wikipedia.org/wiki/Smart_pointer#C.2B.2B_smart_pointers)[容器](http://en.wikipedia.org/wiki/C++_Standard_Library)（如矢量）。只有这样，容器的简单删除才会删除所有媒体对象。如果容器应驻留在堆上，您还应该使用智能指针来保存它。

让自己熟悉这两个概念。如果你不知道什么类型最好使用 vector 和 shared_ptr 直到你知道得更好。

忘了说：你在标准库中找到的vector，你只能在C++11编译器中找到shared_ptr。如果您有较旧的编译器，则必须包含[boost 库](http://www.boost.org/doc/libs/1_52_0/libs/smart_ptr/shared_ptr.htm)。

# java - 当我将它传递给方法时，如何让我的用户输入访问我的 ArrayList

> ID：13674553
> 
> 赞同：2
> 
> 时间：2012-12-02T22:20:16.197
> 
> 标签：java

这是我到目前为止的代码。这是我在第 58 行得到的错误

> 需要不兼容的类型：找到 ArrayList：
> VendProduct

（Alt-Enter 显示提示）

//一台自动售货机分配多种产品

```
package newvendingmachine;

import java.util.ArrayList;
import java.util.Scanner;

//Tony Moore 

public class NewVendingMachine{
    //Set class data
    static String[] product = {"Chips", "M&Ms", "Peanuts", "Popcorn", "Snickers"};
    static Float[] cost = {.50f, .75f, .75f, .75f, .90f};
    static Integer[] inventory = {20, 20, 20, 20, 20};

    /** 
    * @param args the command line arguments
    */
    public static void main(String[] args) {
        ArrayList<VendProduct> vp = new ArrayList<>();
        for (int idx=0; idx<product.length; idx++) {
            vp.add(new VendProduct());
        }

        //Accept user input
        Scanner input = new Scanner(System.in);   
        int userInput;

        while (true) {
            // Display menu graphics

            System.out.println(" Options: Press your selection then press enter ");
            System.out.println(" 1\. "+product[0]+" ");
            System.out.println(" 2\. "+product[1]+" ");
            System.out.println(" 3\. "+product[2]+" ");
            System.out.println(" 4\. "+product[3]+" ");
            System.out.println(" 5\. "+product[4]+" ");
            System.out.println(" 6\. Quit ");

            userInput = input.nextInt(); 

            if (userInput <1 || userInput >6) {
                System.out.println("Please make a vaild selection");    
            }

            if (userInput >=1 || userInput <=6) {
                vp = (VendProduct)vp.get(userInput-1);
                vp.buyProduct();         
            }

            if (userInput == 6) {
                System.out.println("Thanks, and come back soon");
                break;
            }
        }   
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T22:24:36.123

`vp = (VendProduct)vp.get(userInput-1);`

`vp`是 VendProduct 的 ArrayList，但您试图将其设置为仅一个 VendProduct...

您应该创建一个类型的变量`VendProduct`并使用它，如下所示：

```
 VendProduct product = vp.get(userInput-1);
 product.buyProduct(); 
```

您也可以`vp.get(userInput-1).buyProduct();`直接在一行中进行。这取决于你。使用两行代码通常会使代码更简洁、更易于阅读。

# windows-phone-7 - 为 VS 2012 安装 Windows Phone SDK

> ID：13674554
> 
> 赞同：4
> 
> 时间：2012-12-02T22:20:19.550
> 
> 标签：windows-phone-7, visual-studio-2012

我使用的是 Windows 7，并且已经安装了 VS 2012 专业版。以前我安装了 Windows Phone 7 sdk。在 VS2010 中运行良好。

当我尝试在 VS 2012 中创建 WP7 项目时，我没有看到该选项。我尝试下载并重新安装 WP7 SDK，但系统提示修复/重新安装现有安装，这一定意味着它已经存在？让 WP 项目类型出现在 VS 2012 中是否有我缺少的技巧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T22:44:08.813

VS 2012 仅支持 Windows Phone 8 SDK。

您可以在 VS 2012 之上使用 Windows Phone 8 SDK 构建 Windows Phone 7.1 应用程序。 [http://blogs.msdn.com/b/visualstudio/archive/2012/10/30/introducing-windows-phone-sdk-8- 0.aspx](http://blogs.msdn.com/b/visualstudio/archive/2012/10/30/introducing-windows-phone-sdk-8-0.aspx)

# slideshow - 从指定的图像索引开始幻灯片

> ID：13674558
> 
> 赞同：1
> 
> 时间：2012-12-02T22:20:59.887
> 
> 标签：slideshow, jquery-dialog, galleria

我在我的网页上使用 Galleria 幻灯片。我想从指定的索引开始幻灯片放映。在代码中，我将参数传递给 JavaScript 函数，并在此函数中编写了一行 Galleria.configure('show', index); 所以我的功能是

```
function imgIndex(i) {
    index = i; 
    $( "#dialog" ).dialog( "open" );
    Galleria.configure('show', index);
} 
```

Galleria 也在页面中的弹出 jquery-dialog 中。HTML是

```
<div id="dialog" title="Galleria dialog">
<div id="galleria" style="float: left;  width: 100%; background-color: #000000;">
<script src="famous/list_images.php"></script>
<script>
  Galleria.run('#galleria', {
  dataSource: data,
  transition: 'slide',
  transitionSpeed: 800,
  responsive:true,
  thumbnails: false,
  clicknext: true,
  autoplay: true,
  height: 0.5625 
});
</script>
</div>
    </div> 
```

问题是当我第一次在指定索引的弹出对话框中单击图像幻灯片时。但是当我关闭对话框并想从另一个图像重新启动它时，Galleria 似乎没有对此做出反应，而是从上次的图像继续。

谢谢您的帮助。

# javascript - twitter bootstrap 崩溃一旦关闭就不会打开

> ID：13674559
> 
> 赞同：1
> 
> 时间：2012-12-02T22:21:02.710
> 
> 标签：javascript, jquery, twitter-bootstrap

我有一个带有 twitter bootstrap 折叠功能的图像滑块，滑块让你知道它的幻灯片何时发生了这样的变化。

```
 si.ev.on('rsBeforeAnimStart', function(){

    $('.collapse').collapse('hide');

  }); 
```

Twitter Bootstrap 折叠在这种情况下关闭，但如果我尝试通过单击按钮打开它，它不会再次打开

```
<button type="button" class="btn noDrag" data-toggle="collapse" data-target="#collapse_1">
 <h4 class="dropdown-toggle">Open Drop down</h4>
</button>   

<div id="collapse_1" class="gda_block collapse out"> .. content </div> 
```

# c# - 忽略正则表达式转义序列 C#

> ID：13674560
> 
> 赞同：6
> 
> 时间：2012-12-02T22:21:10.833
> 
> 标签：c#, regex, string

我无法告诉 Regex 忽略任何转义序列。

这是一些示例代码：

```
string input = "?";
foreach (Match m in Regex.Matches(input, "?"))
      {
         ...
      } 
```

但是当它执行时，它会抛出以下错误：解析“？” - 量词 {x,y} 什么都没有。

我只想要“？” 作为字符串处理。

谢谢。

编辑：我也试过：

```
foreach (Match m in Regex.Matches(input, "\?"))
                {
...
                } 
```

这告诉我这不是一个有效的转义序列。

我也试过：

```
foreach (Match m in Regex.Matches(input, "\x3f"))
                {
...
                } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-02T22:29:52.150

.NET 提供了一个自动为您进行任何转义的功能。每当您有某种输入字符串时，您想要*逐字*匹配（只是那里的字符），但您知道您使用正则表达式搜索，然后通过以下方法运行它们：

```
string pattern = Regex.Escape(literalString); 
```

这将处理任何可能是正则表达式元字符的字符。

[MSDN 上`Escape`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.escape.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T22:22:07.667

您需要对*正则表达式*引擎进行转义，`?`因为在正则表达式中作为量词具有特定含义：*`?`*

 *```
\? 
```

您还需要使用[逐字字符串文字](http://msdn.microsoft.com/en-us/library/362314fe.aspx)，因此`\`作为 C# 字符串转义序列没有特殊含义 - 这两个是等价的 -`@"\?"`和`"\\?"`.

所以：

```
string input = "?";
foreach (Match m in Regex.Matches(input, @"\?"))
{
     ...
} 
```

通常，反斜杠是正则表达式*中*`\`的转义序列。

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T22:23:56.827

你需要逃跑吗？作为 `\\?`

在正则表达式中而不是在文本中。

看看这篇文章：

[http://www.codeproject.com/Articles/371232/Escaping-in-Csharp-characters-strings-string-forma](http://www.codeproject.com/Articles/371232/Escaping-in-Csharp-characters-strings-string-forma)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T22:29:01.880

使用内置的 Escape 方法。

```
Regex.Escape("/") 
```

另请参阅[MSDN RegEx.Escape()](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.escape%28v=vs.90%29.aspx)**

# cloud-foundry - vmc 推送错误：nil:NilClass 的未定义方法“[]”

> ID：13674561
> 
> 赞同：1
> 
> 时间：2012-12-02T22:21:24.440
> 
> 标签：cloud-foundry

当尝试“vmc push hello”作为部署测试的 sinatra 示例应用程序时，我得到：

```
Time of crash:  
Sun Dec 02 14:11:52 -0800 2012  

NoMethodError: undefined method `[]' for nil:NilClass  

manifests-vmc-plugin-0.4.14/lib/manifests-vmc-plugin.rb:76:in `app_by_tag'  
manifests-vmc-plugin-0.4.14/lib/manifests-vmc-plugin.rb:81:in `find_apps'  
manifests-vmc-plugin-0.4.14/lib/manifests-vmc-plugin/plugin.rb:102  
mothership-0.3.0/lib/mothership/command.rb:78:in `instance_exec'  
mothership-0.3.0/lib/mothership/command.rb:78:in `invoke'  
mothership-0.3.0/lib/mothership/command.rb:82:in `instance_exec'  
mothership-0.3.0/lib/mothership/command.rb:82:in `invoke'  
mothership-0.3.0/lib/mothership/base.rb:50:in `execute'
vmc-0.4.2/lib/vmc/cli.rb:106:in `execute'
mothership-0.3.0/lib/mothership.rb:42:in `start'
vmc-0.4.2/bin/vmc:11
/usr/bin/vmc:19:in `load'
/usr/bin/vmc:19 
```

尝试使用 vmc 部署到“api.cloudfoundry.com”和使用命令“vmc push hello”和“vmc push”的微云时会发生这种情况

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:23:20.137

manifests-vmc-plugin (0.4.14) 存在问题，您可以做几件事之一；

*   使用旧版 VMC (3.2.23)
*   如果您已经安装了 vmc 0.4.1 和 manifests-vmc-plugin 0.4.13，请卸载 VMC 0.4.2 和 manifests-vmc-plugin 0.4.14。

如果您卸载所有版本的 VMC 和 manifests-vmc-plugin，您可以重新安装 vmc 0.4.1，然后卸载 manifests-vmc-plugin 0.4.14 并重新安装 manifests-vmc-plugin 0.4.13 这应该留下与旧旧版本相对应的“新”vmc 的工作版本。

希望一切都说得通。我还应该补充一点，这个问题将在接下来的 24 小时内得到解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T09:54:07.393

可以将 vmc gem 版本降级到以前的版本吗？sudo gem 卸载 vmc 并确保安全 sudo gem install vmc [working_version]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T18:38:10.240

跑步`gem update vmc`为我解决了这个问题。更新为 =>`manifests-vmc-plugin-0.4.17`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T09:49:25.030

进行推送时，请确保您位于正确的目录中。

作为一种解决方法，并验证此崩溃确实来自应用程序检测失败（正如堆栈跟踪似乎暗示的那样），您可以使用`vmc push --path <directory of your app contents>`

# php - Facebook Graph Api 在朋友墙上张贴

> ID：13674563
> 
> 赞同：-1
> 
> 时间：2012-12-02T22:21:49.423
> 
> 标签：php, facebook, facebook-graph-api

我在尝试使用我的应用程序中的 Facebook 图表发布到朋友墙的链接时遇到问题。我目前正在使用适用于 PHP 的 Facebook SDK，我可以毫无问题地向已登录用户的墙发帖，但无法向已登录用户的朋友发帖。我已请求扩展权限“publish_stream”，这是我使用的代码：

```
$args = array('message' => $message,
                            'link' => 'google.com',
                            'name' => 'Test!',
                            'caption' => 'Please click on the link',
                            'description' => 'description');
$result = $facebook->api("/$friendId/feed", 'POST', $args ); 
```

$friendId 有登录用户的朋友的 facebook id，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-02T22:36:59.847

快速浏览[FB API 参考](http://developers.facebook.com/docs/reference/api/post/)表明您可以`to`在此操作中将键值对设置为

> 在这篇文章中提及或定位用户

# php - MySQL，从搜索中检索字段

> ID：13674565
> 
> 赞同：-5
> 
> 时间：2012-12-02T22:21:54.863
> 
> 标签：php, mysql

我是使用 PHP 的 MySQL 新手，我已经创建了一个数据库和一个用于填充数据库的脚本，我所拥有的是一个插入 id 和电子邮件的表单。

现在我需要做的是创建一个搜索 ID 的脚本，然后一旦找到确切的 ID，我就可以获得与该 ID 相关联的电子邮件并对其进行处理。

根据一个字段搜索数据库然后提取另一个字段的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T22:23:26.043

SQL 使您能够非常简单地做到这一点：

```
SELECT email FROM users WHERE id = 123 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T22:24:02.723

看来您正在寻找类似 SELECT 的东西：

例如。：`SELECT email FROM <table> WHERE ID=<id>`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T22:26:06.983

> **警告：**
> 
> 请不要使用`mysql_*`函数来编写新代码。它们不再被维护并且社区已经开始了[弃用过程](http://news.php.net/php.internals/53799)。看到[**红框**](http://uk.php.net/manual/en/function.mysql-connect.php)了吗？
> 
> 相反，您应该了解[准备好的语句](http://en.wikipedia.org/wiki/Prepared_statement)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。[本文](http://php.net/manual/en/mysqlinfo.api.choosing.php)应该提供一些有关决定使用哪个 API 的详细信息。对于 PDO，这里有一个[很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

这相对容易。建立连接后（假设`$connection`为指针），您只需要执行以下查询：

```
$result = mysql_query("SELECT email FROM users_table WHERE user_id = 1", $connection);
$row = mysql_fetch_assoc($result); 
```

您请求的电子邮件值将作为 访问`$row['email']`。

但是，一旦您对在 PHP 中使用 MySQL 的知识水平有所满足，请**注意警告**并切换到`mysqli`or `PDO`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T22:34:24.513

看，你是新手，这里有一个教程：

[http://w3schools.com/php/func_mysql_fetch_array.asp](http://w3schools.com/php/func_mysql_fetch_array.asp)

但是就像 Whisperity 说的那样，学习它，并尽快转移到 PDO

# java - 如何获取 int 数组中的最低 3 个元素

> ID：13674568
> 
> 赞同：5
> 
> 时间：2012-12-02T22:22:05.613
> 
> 标签：java, arrays, math, minimum

嗨，我想获取数组的最低 3 个元素。最低是指最小值。我不能使用 collections.Sort 方法，因为我需要知道元素的索引。因此，我使用以下代码来获得最低的，但我需要知道如何获得最低的 3。

```
int minimum = grades[1];
int index = 1;

for(i=1; i<= numberOfStudents; i++){
    if (grades[i]<minimum){
        minimum = grades[i];
        index = i;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T22:29:16.437

这是一个非常简单的方法：

```
public static void main(String[] args) {
    int[] myArray = { 5, 8, 12, 9, 50, 11, 4 };

    System.out.println(Arrays.toString(myArray));
    System.out.println(Arrays.toString(getThreeLowest(myArray)));
}

private static int[] getThreeLowest(int[] array) {
    int[] lowestValues = new int[3];
    Arrays.fill(lowestValues, Integer.MAX_VALUE);

    for(int n : array) {
        if(n < lowestValues[2]) {
            lowestValues[2] = n;
            Arrays.sort(lowestValues);
        }
    }
    return lowestValues;
} 
```

这输出：

```
[5、8、12、9、50、11、4]
[4、5、8]

```

`Arrays.sort`只对本地数组进行调用，而不是对主数组进行调用。这样做的原因只是为了简化与`n`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T22:51:54.873

建立你所拥有的

```
 int[] grades = { 100, 99, 98, 97, 10, 95, 11, 9, 94 };
    int numberOfStudents = grades.length;

    int minimum = grades[1];
    int minimum2 = grades[1];
    int minimum3 = grades[1];
    int index = 1;
    int index2 = 1;
    int index3 = 1;

    for(int i=1; i< numberOfStudents; i++){
        if (grades[i]<minimum3 && grades[i]>=minimum2){
            minimum3 = grades[i];
            index3 = i;
        }
        if (grades[i]<minimum2 && grades[i]>=minimum){
            //We have a new 2nd lowest - shift previous 2nd lowest up
            minimum3 = minimum2;
            index3 = index2;
            minimum2 = grades[i];
            index2 = i;
        }
        if (grades[i]<minimum){
            //We have a new lowest - shift previous lowest up
            minimum3 = minimum2;
            index3 = index2;
            minimum2 = minimum;
            index2 = index;
            minimum = grades[i];
            index = i;
        }
    }
    System.out.println("Smallest is at " + index + " with value of " + minimum);
    System.out.println("Next Smallest is at " + index2 + " with value of " + minimum2);
    System.out.println("Next Smallest is at " + index3 + " with value of " + minimum3); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T22:28:07.497

这可能有点“太多”，但在我的脑海中，您可能会创建一个对象数组，每个对象都包含它在原始“等级”数组中的值和索引并对其进行排序？

我能想到的唯一另一种方法是通过数组并手动跟踪 3 个最低元素及其索引，就像你已经在做的那样......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-22T13:15:42.357

我们能做到吗

```
 int[] myArray = { 5, 8, 12, 9, 50, 11, 4 };
    Arrays.sort(myArray);
    System.out.println(myArray[0] +","+ myArray[1] +","+ myArray[2]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T22:28:01.647

取三个变量：最小的、第二小的和第三小的。以同样的方式找到最小的元素，在每个步骤中找到三个最小的元素。

您需要检查是否有任何元素小于最小数字，或者它在最小和第二小之间，或者它在第二小和第三小之间。

由于这可能是一项作业、任务或家庭作业，我不会在这里编写代码。

# php - 在 Drupal 视图中针对特定用户设置可见性规则

> ID：13674571
> 
> 赞同：0
> 
> 时间：2012-12-02T22:22:19.897
> 
> 标签：php, drupal, permissions, drupal-views

我在 Durpal 中设置了一个管理面板页面，它会拉取三个视图。将显示的视图取决于登录的管理员，因此三个管理员中的每一个都只能看到适用于他们的视图。我已将以下可见性规则添加到所有三个视图（使用各自的 uid）。

```
global $user;
if ($user->uid == 8090){
  return TRUE;
} else {
  return FALSE;
} 
```

有用。现在，我想更改它，以便管理员的同事也可以看到它。我试过这个：

```
global $user;
if ($user->uid == 8090 || 4090){
  return TRUE;
} else {
  return FALSE;
} 
```

员工现在可以正常看到它，但是，现在管理员可以看到除了他们的视图之外的其他视图，我们不希望出现这种情况。我是php的初学者，这是我第一次尝试。帮助？

我不知道我上面的描述是否足够清楚。基本上我想要这个：

视图 1：管理员 A 可见
视图 2：管理员 B
可见 视图 3：管理员 C 可见

变成这样：

视图 1：管理员 A 和助理 A
可见 视图 2：管理员 B 和助理 B
可见 视图 3：管理员 C 和助理 C 可见

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:31:32.807

您必须创建三个单独的管理员角色并使用此代码检查打印视图的条件

全局$用户；
if (in_array("Admin1", array_values($user->roles)))
{
$view = views_get_view('VIEWNAME');
if ($view->access('default')) {
print $view->preview('default');
}
}
else if (in_array("Admin2", array_values($user->roles)))
{

$view = views_get_view('VIEWNAME');
if ($view->access('default')) {
print $view->preview('default');
}

}
其他
{

$view = views_get_view('VIEWNAME');
if ($view->access('default')) {
print $view->preview('default');
}

}

将此代码粘贴到 page.tpl.php 中（或在相关页面中使用）并设置每个视图的访问权限。

我希望至少你能从中得到想法。

# c - 用完 ram 声明全局二维数组问题

> ID：13674574
> 
> 赞同：3
> 
> 时间：2012-12-02T22:22:48.153
> 
> 标签：c, arrays, multidimensional-array, bit-manipulation

我需要一种不同的方式来全局访问 160*160 位的数据，这不会导致我用完 ram。我正在尝试为 160*160 LCD 黑白屏幕创建一个后台缓冲区。所以 160*10 整数给了我 160*160 位，因为整数是 16 位。但是我的板上的 RAM 用完了。有没有人有办法在我不使用内存的情况下做到这一点？也许以某种方式分配？但我似乎无法找到分配二维数组的正确方法。有没有其他方法可以做到这一点？

编辑：它是一个 msp430 rbx430 板，（这里是它的图片链接[http://i.ytimg.com/vi/rr18why8wzY/0.jpg](http://i.ytimg.com/vi/rr18why8wzY/0.jpg)）并且是的 int 在这个设备上是 16 位的。longs 和 doubles 是 32 位的。该设备有 64k 内存，我以 16mhz 运行它。我要 3,200 字节

至于说有道理，怎么没有？我有一个 64k 设备，其中 int 是 16 位。我正在为 160*160 lcd 屏幕创建地图，使用 1 和 0 来跟踪像素何时打开或关闭。在我打开所有我想要的像素后，我把我的地图应用到液晶显示器上。这样我就不必绘制到液晶显示器然后擦除液晶显示器然后再次绘制。我可以简单地画，然后在上面画。这将使它不会闪烁。

有效地创建一个后台缓冲区来绘制到液晶显示器。

```
static int lcdPixels[160][10];

    /*Must call this before using RBX430_graphics*/
    void initGraphics(void)
    {

        int h = 0;
        int w = 0;

        for(h=0; h < ROW_SIZE; h++)
        {
            for(w=0; w < COLUMN_SIZE; w++)
            {
                lcdPixels[h][w] = 0;
            }
        }
    } 
```

---------------------------------这是剩下的------------ ----------

```
void pixelOn(int posX, int posY)
{
    // first grab the right column
    int column = ( ((float)posX/16.0f) + 0.9f);
    // next grab the right bit
    int bit = posX;
    while(bit > 16)
    {
        bit = bit - 16;
    }

    //turn on the bit/pixel
    lcdPixels[posY][column] |= (1 << bit);
}

void pixelOFF(int posX, int posY)
{
    // first grab the right column
    int column = ( ((float)posX/16.0f) + 0.9f);
    // next grab the right bit
    int bit = posX;
    while(bit > 16)
    {
        bit = bit - 16;
    }

    //turn off the bit/pixel
    lcdPixels[posY][column] &= ~(1 << bit);
}

/* Call this to commit the current backBuffer to the LCD display*/
void commitBuffer(void)
{
    int h = 0;
    int w = 0;
    int k = 0;

    for(h=0; h < ROW_SIZE; h++)
    {
        for(w=0; w < COLUMN_SIZE; w++)
        {
            for(k=0; k < INT_SIZE; k++)
            {
                if((lcdPixels[h][w] & (1 << k)) >> k)
                {
                    lcd_point(((w * 16) + k), h, ON);
                }
                else
                {
                    lcd_point(((w * 16) + k), h, OFF);
                }
            }
        }
    }
} 
```

所以我现在尝试使用 malloc 分配数组，这也是不行的。我想我不能这样做，160 * 160 位只是太多数据....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T00:07:30.983

你有 64K 的 RAM 还是 64K 的闪存？我认为 RBX430 上有一个 msp430f2274 (http://www.ti.com/product/msp430f2274)，它只有 1K 的 RAM。

# mysql - MySQL：更新...在重复键“另一个更新”上？

> ID：13674584
> 
> 赞同：2
> 
> 时间：2012-12-02T22:23:45.530
> 
> 标签：mysql, duplicates, sql-update

我偶然发现了一个问题，据说应该在单个 MySQL 查询中提供有效的解决方案，但我无法弄清楚（唉，我离 MySQL 专家还很远）。

该表具有以下列：A、B、C。（A、B）是主键（INT）。C - 是一个字符串。该表填充有记录。

在某些情况下，我需要将`x`A 列中的值更新为新值`y`。如果 A 中已经有一些记录`y`（可以同时有多个，对于 B 中具有不同值的记录），则出现“重复键”情况。在这种情况下，我需要为每个特定的`b`.

例子：

```
| 一个 | 乙| C
| 1 | 2 | 美国广播公司
| 1 | 4 | 国防军
| 2 | 2 | 全球健康指数
| 2 | 4 | JKL
| 2 | 5 | 移动网络运营商

```

在 A 中更新为 2 -> 1 后，我需要得到：

```
| 一个 | 乙| C
| 1 | 2 | ABCGHI
| 1 | 4 | DEFJKL
| 1 | 5 | 移动网络运营商

```

有一个众所周知的`INSERT ... ON DUPLICATE KEY UPDATE`说法。但是如何优雅地处理更新中的相同问题呢？我不确定`REPLACE`语句或`REPLACE`函数是否以及如何用于该任务。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T22:30:21.543

我认为，无论发生什么，您都需要两个陈述：

```
ALTER TABLE myTable ADD UNIQUE INDEX (A, B);

INSERT INTO myTable (A, B, C)
  SELECT 1, B, C
  FROM   myTable t
  WHERE  A = 2
ON DUPLICATE KEY UPDATE
  C = CONCAT(myTable.C, VALUES(C))
;

DELETE FROM myTable WHERE A = 2; 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/2e17b/1/0)上查看。

如果存在并发问题的风险，您显然需要在事务中执行这些以保持原子性。

# php - JqueryUI、Datepicker 和 Codeigniter：如何在加载时更改格式？

> ID：13674589
> 
> 赞同：0
> 
> 时间：2012-12-02T22:24:07.933
> 
> 标签：php, jquery-ui, codeigniter, datepicker

精简版：

在输入字段中，我有一个以“yy-mm-dd”格式显示的日期。我想通过 jqueryUI 获取它并将该日期格式化为 'dd. MM yy' 并将其放回输入字段。

我遇到的问题是，当我从该输入字段中获取值时，它不知道它是哪种格式。

长版：

在我的数据库中，我以典型的格式“yy-mm-dd”保存日期。但是，在使用日期选择器时，出于显示目的，我使用“dd. MM yy”，而在隐藏字段中，我保存“yy-mm-dd”。

当我加载条目以在显示的字段中编辑其日期时，它是“yy-mm-dd”，我也希望它是“dd. MM yy”。

```
$(function() {
    // in my rjquery.ui.datepicker-.... is the "dd. MM yy" set as dateFormat
    $.datepicker.setDefaults($.datepicker.regional['....']); 

    $( "#datepicker_date" ).datepicker({
        changeMonth: true,
        changeYear: true,
        altField: "#alt_date_field",
        altFormat: "yy-mm-dd" 
    });

}); 
```

我无法做的是当页面加载时，我猜`$(document).ready(function() {});`是获取#datepicker_date中的日期，将其转换为'dd。MM yy' 格式，然后将其放回#datepicker_date 字段中。

对于额外的好处，我想先看看它是什么格式，如果它是'yy-mm-dd'然后转换它（因为由于codeigniter中的验证，该字段将重新填充正确的格式，因为他们会采取正确的格式）。

有点：

```
$(document).ready(function() {
   if(  the_format_of_the_date_in_#datepicker_date == 'yy-mm-dd')
        //convert it to 'dd. MM yy' and set it to #datepicker_date

}); 
```

我希望我不会太混乱。我知道这很简单，但我无法让它发挥作用，我感谢任何帮助。

编辑：

我通过 php 和 codeigniter form_helper 和验证器 set_value() 方法加载数据。

```
echo form_label('Date:');
$data = array(
     'name'        => 'date',
     'id'       => 'datepicker_date',
     'readonly' => 'readonly'

 );
echo form_input($data, set_value('date', $date_loaded_via_controller)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T22:43:40.407

你可以试试这个（来自我工作项目的 CI 辅助函数）

```
$date_loaded_via_controller="2012-12-15"; // suppose you have this date
$date_loaded_via_controller=date_to_dmy($date_loaded_via_controller);
function date_to_dmy($dt)
{
    $date=explode(' ', $dt);
    $deli=strpos($dt, '/') ? '/':'-';
    $date=explode($deli, $date[0]);
    $newdt= $date[2].".".$date[1]." ".$date[0]; // for 15.12 2012
    return $newdt;
}
echo form_input($data, set_value('date', $date_loaded_via_controller)); 
```

您可以将此函数保存在帮助文件中并在使用前加载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:36:21.013

终于找到了答案。

如您所知，我使用两个字段，一个隐藏字段，一个用于演示，这样在数据库中保存了常用字段（'yy-mm-dd' 字段）。我一直在尝试做的是在从数据库加载日期进行编辑时从一种格式转换为另一种格式。

所以，与其我试图转换它，解决方案是简单地使用 datepickers 'setDate' 函数并让它处理它。

我通过在#alt_date_field 上添加日期选择器来做到这一点，并将altfield 和altformat 设置为用于显示的那个。

```
$("#alt_date_field").datepicker({
        dateFormat: "yy-mm-dd",
        altField: "#datepicker_date",
        altFormat: "dd. MM yy" 
    }); 
```

然后当页面加载时：

```
$(document).ready(function() {
    $('#ult_date_field').datepicker('setDate',$('#alt_date_field').val());
}); 
```

我在这里所做的是获取隐藏输入字段的值并使用 setDate 方法，以便它以正确的格式填充#datepicker_date。

# symfony - Symfony 控制器之前的一些逻辑

> ID：13674598
> 
> 赞同：1
> 
> 时间：2012-12-02T22:25:26.403
> 
> 标签：symfony, before-filter

我是 Symfony 的新手，我正在尝试将我当前的项目切换到它。

对于我的大多数控制器，我需要在执行控制器之前进行一些多重检查。然后，如果满足检查的某些条件，则转发它们并显示不同的视图，否则继续他们要求的内容。

例如，我有一组控制器，只有在用户在船员中时才应该执行，否则它会加载一个视图，说“你不在船员中”。

这在过程代码中非常简单，但在 OOP 中似乎变得更加复杂，现在在一个框架内，我似乎发现自己更加受限。

**如何在控制器执行之前添加逻辑？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:39:27.463

您想设置过滤前逻辑。在这里写一篇文章还不够简单，但这里有一个很好的教程。如果您对此有特定问题，请在此处发布，我会尝试在帮助下进行更新：http: [//symfony.com/doc/2.0/cookbook/event_dispatcher/before_after_filters.html](http://symfony.com/doc/2.0/cookbook/event_dispatcher/before_after_filters.html)

# c - 条件跳转或移动取决于未初始化的值 2D 数组

> ID：13674599
> 
> 赞同：0
> 
> 时间：2012-12-02T22:25:26.403
> 
> 标签：c, valgrind

嗨，我有这个问题：

```
tmpy = (int**)realloc(os,y*sizeof(int*));
os = tmpy;
tmpy=NULL;
for(i=0;i<y;i++) {
    tmpx = (int*)realloc(os[i],x*sizeof(int)); 
    os[i] = tmpx;
    tmpx=NULL;
} 
```

程序运行良好，但 valgrind 给出此错误：

```
==12513== Conditional jump or move depends on uninitialised value(s)
==12513==    at 0x402BF0D: realloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==12513==    by 0x8048760: main (main.c:55)
==12513==  Uninitialised value was created by a heap allocation
==12513==    at 0x402BF52: realloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==12513==    by 0x804871E: main (main.c:50)
==12513== 
```

怎么了？感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T22:29:01.223

假设d`os`的`realloc()`大小更大，那么`int*`有效添加的额外`os`将是未初始化的指针（由 访问`os[i]`）。这些未初始化的指针最终被传递到循环`realloc()`内：`for`

```
tmpx = (int*)realloc(os[i],x*sizeof(int)); 
```

传递给的指针`realloc()`必须是`NULL`或 先前由`malloc()`,`realloc()`或返回的值`calloc()`。在进入循环之前将附加设置为`int*`。请注意，不需要对返回值进行强制转换。`NULL``for``realloc()`

# android - Qt + Necessitas + Android - 拖放防止显示重绘

> ID：13674604
> 
> 赞同：0
> 
> 时间：2012-12-02T22:26:06.233
> 
> 标签：android, qt, drag-and-drop

当前的 ALPHA 4 版本的 Necessitas（Android 的 Qt 端口）存在拖放错误。拖放工作正常，除了它阻止事件循环阻止 GUI 获得重新绘制事件。我在项目错误跟踪器中报告了这个问题。 [https://bugs.kde.org/show_bug.cgi?id=304180](https://bugs.kde.org/show_bug.cgi?id=304180)

这可能会在下一个版本中得到解决，并且对于端口的开发人员来说似乎并不是什么阻碍，因为 Necessitas 仍然是 Beta 版。我想试一试，因为我要移植的东西需要它才能工作。

我需要熟悉事件循环和 Qt 内部的 Qt 大师的帮助。我从 Qt 文档中知道拖放实现依赖于平台，您可以阅读以下注释，

*注意：*在 Linux 和 Mac OS X 上，拖放操作可能需要一些时间，但此功能不会阻塞事件循环。在执行操作时，其他事件仍会传递给应用程序。在 Windows 上，Qt 事件循环在操作期间被阻塞。

查看 Qt 源代码，我在`QDropManager`其中实现了

> src/gui/kernel/qdnd_XXX.cpp

该文件对 X11、Win、MacOS 和 Symbian 有不同的实现。在 Necessitas Qt 中，它的 X11 版本用于构建。

有关如何解决此问题的任何指示都将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:17:30.357

您可以自己重新绘制所有必要的小部件。例如在 dragMoveEvent 调用 repaint() 函数。dragMoveEvents 正在成功生成。它适用于我在android上。

此外，您可以尝试为 QDrag 对象创建特殊线程。据我所知，QThreads 有自己的事件循环。但我还没有尝试过。

# php - 在没有 iTunes 的“字节范围”错误的情况下将 MP3 请求重定向到 Libsyn？

> ID：13674606
> 
> 赞同：0
> 
> 时间：2012-12-02T22:26:20.853
> 
> 标签：php, apache, http-headers, itunes, podcast

我将 Libsyn 用于几个播客，这是我以前从未遇到过的新问题。我发布我自己的 RSS 提要，并通过我自己的服务器重定向音频文件请求，以便我可以进行自己的日志记录。iTunes 拒绝我提交提要，并显示消息“您的提要有问题。您的剧集托管在不支持字节范围请求的服务器上。启用字节范围请求并再次尝试提交。”

显然，Libsyn 确实支持字节范围请求，所以问题似乎出在我重定向请求的方式上。这是我现有的播客一直有效的方法：

```
$id = 12345; // (the episode number)
$url = 'http://traffic.libsyn.com/myshow/myfile-'.$id.'.mp3';
header("Location: $url"); 
```

所以我尝试添加一些标题来让 iTunes 相信我确实支持字节范围请求。我已经尝试了几乎所有我能想到的组合：

```
$id = 12345; // (the episode number)
$filesize = 12345678; // (the size of my file on Libsyn)
$url = 'http://traffic.libsyn.com/myshow/myfile-'.$id.'.mp3';
header('HTTP/1.1 206 Partial Content');
header('Content-Type: audio/x-mp3');
header('Accept-Ranges: bytes');
header("Content-Length: $filesize");
header("Location: $url"); 
```

我在尝试将节目提交到 iTunes 时仍然收到错误消息，而且我没有想法。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T00:04:48.700

我鼓励发布有关此问题的许多其他人寻找不相关的错别字以及像我的问题一样愚蠢的东西。iTunes 返回的错误并不一定意味着它所说的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T23:11:41.480

您不能返回使单个 HTTP 响应既是成功（206）又是重定向（Location 标头，暗示 30x）。您需要自己提供内容，或者放弃日志记录。

# jsf - valueChangeListener 为 重新渲染时不起作用

> ID：13674614
> 
> 赞同：0
> 
> 时间：2012-12-02T22:28:07.310
> 
> 标签：jsf, richfaces

我在 jsf 页面顶部定义了一个弹出面板（id=PanelAddQueryCriteria），但它仅在用户选择一个菜单项（id=entityKind）并重新渲染该弹出面板后才启用它。但是，由于重新渲染，该弹出面板内的选择项（id=queryCriteriaAttr）不会在第一次值更改时触发更改侦听器（#{ceaDBBean.queryCriteriaAttrChanged}），并且仅在再次选择时触发...有帮助吗？这里的代码：

```
<rich:popupPanel id="PanelAddQueryCriteria">
  <h:form id="formAddQueryCriteria">
    <h:selectOneMenu id="queryCriteriaAttr" 
      value="#{ceaDBBean.queryCriteriaAttr}" required="true"
      valueChangeListener="#{ceaDBBean.queryCriteriaAttrChanged}">
      <f:selectItems value="#{ceaDBBean.ceaEntityKindAttrs}"/>
    </h:selectOneMenu>
  </h:form>
</rich:popupPanel>

<h:panelGrid id="searchPanel">
  <h:selectOneMenu id="entityKind" 
    value="#{ceaDBBean.entityKind}" required="true"
    valueChangeListener="#{ceaDBBean.entityKindChanged}">
    <a4j:ajax event="valueChange" render="addQueryCriteria" execute="@this" />
    <f:selectItems value="#{ceaDBBean.ceaEntityKinds}" />
  </h:selectOneMenu>

  <a4j:commandLink styleClass="no-decor" id="addQueryCriteria"
    render="PanelAddQueryCriteria" 
    disabled="#{empty ceaDBBean.entityKind}" 
    execute="@this" action="#{ceaDBBean.initAddQuryCriteria}"
    oncomplete="#{rich:component('PanelAddQueryCriteria')}.show()">
    <h:graphicImage id="addQueryCriteriaImg"
      value="/images/icons/common/new.gif" width="16" height="16"
      alt="#{adminMsg.addQueryCriteria}" />
      <rich:tooltip value="#{adminMsg.addQueryCriteria}" for="addQueryCriteria" />
  </a4j:commandLink>    
</h:panelGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:22:38.430

简短回答：这个问题是由[JSF issue 790](http://java.net/jira/browse/JAVASERVERFACES_SPEC_PUBLIC-790)引起的。改变

```
render="PanelAddQueryCriteria" 
```

经过

```
render="formAddQueryCriteria" 
```

或者，如果您实际上需要更新的面板比表单本身更多，

```
render="PanelAddQueryCriteria formAddQueryCriteria" 
```

* * *

长答案：阅读以下相关问题：

*   [<a4j:commandbutton> 操作仅在第二次单击时调用](https://stackoverflow.com/questions/10094615/jsf-a4jcomandbutton-action-call-on-secon-click)
*   [h:commandButton/h:commandLink 在第一次单击时不起作用，仅在第二次单击时起作用](https://stackoverflow.com/questions/11408130/jsf-commandbutton-works-on-second-click)

# c++ - 程序集最大整数除法

> ID：13674615
> 
> 赞同：3
> 
> 时间：2012-12-02T22:28:12.567
> 
> 标签：c++, c, assembly, x86

我有以下程序，它获取 2 个无符号长数字 (%u)，x 和 y，然后将 x 除以 y 并以这种格式打印结果：仅 X.YZ。

它适用于所有常规输入，例如：3/4 = 0.75、10/5=2.00、19/1000=0.01 等等。但是当我尝试 2^31/2 时，我得到一个“核心转储”错误。(2^31=2147483648)。

任何想法为什么？我想我在某个地方得到了垃圾值，但不知道在哪里以及为什么。

```
format: .string "Divide : %u / %u = %u.%.2d\n"

# operation divide
movl    %ebx,   %eax    #%eax=x
cltd    #sign extend eax to edx
divl    %esi    #x=x/y
pushl   %eax    #save %eax on stack
movl    %edx,   %eax    #%eax=xmody
cltd    #sign extend eax to edx
movl    $100,   %ecx    #%ecx=100
mull    %ecx    #multiply xmody by 100
divl    %esi    #divide by y
movl    %eax,   %edx
popl    %eax

pushl   %edx
pushl   %eax    #push x/y
pushl   %esi    #push y
pushl   %ebx    #push x
pushl   $format
call    printf 
```

非常感谢！:D

编辑：为澄清起见，我希望 1073741824（这是除法的结果）在 %eax 上，并且由于 2147483648 除以 2，因此模数应为 0。

所以在结果中我应该得到：1073741824.00，但是你可以看到它没有发生..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T23:31:01.040

您将 2^31 符号扩展为 64 位，这意味着它变为 0xffffffff80000000，当除以 2（使用无符号算术）时会导致溢出。显然您的输入是无符号的，因此您应该使用零扩展名（即 clear `edx`）。这样它就会产生预期的输出：

```
$ ./a.out
Divide : 2147483648 / 2 = 1073741824.00 
```

# http - 是否可以优化路由浏览器数据：尝试本地主机然后本地网络然后互联网

> ID：13674616
> 
> 赞同：0
> 
> 时间：2012-12-02T22:28:17.343
> 
> 标签：http, routing

假设我正在构建一个需要与 3 个可能的实体交换数据的 Web 应用程序：

*   在同一台机器上打开另一个打开的浏览器窗口。
*   仍在同一 Intranet 中的不同计算机上的浏览器。
*   Intranet 外部计算机上的浏览器。

是否有可能以某种方式对 HTTP 协议进行调整，以便以最佳方式路由数据？

*   如果传输在同一台机器上，那么请求甚至不应该到达路由器。
*   如果传输是在 Intranet 中进行的，则该请求绝不应该在整个 Internet 上进行传输。
*   如果传输在 Intranet 之外 - 那就这样吧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T22:34:52.667

这与 HTTP 无关。您想要的正是正确配置的路由所做的。

您需要一个正确配置的 DNS 和路由器的组合，并且与本地主机的通信永远不会通过路由器。

# c - 将单词添加到 Trie 结构字典

> ID：13674617
> 
> 赞同：0
> 
> 时间：2012-12-02T22:28:37.917
> 
> 标签：c, pointers, struct

我正在尝试创建一个可以插入单词的 trie 结构，但该结构必须完全像这样：

```
typedef struct tNode_t {
    struct tNode_t **l;
    char *w;
  } tNode; 
```

`**l`是一个指向 27 个指向 tNodes 的指针数组的指针，这就是我不明白的部分。

如果数组是指向 tNodes 的指针，我如何在其中插入单词？而且由于数组的大小是 27（26 个小写字母 az 和终止字符），您如何知道在哪里输入单词，具体取决于起始字母是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T22:46:16.210

让我们假设这个词是“出租车”。

粗略地说，成员`w`指向一个字符。列表中的 26 个节点`l`用于字母“a”到“z”。

给定单词“cab”，第一个字母是“c”，因此您将查看根节点指针 for `root->l[3]`，其中包含指向所有以“c”开头的单词的指针；叫它`tNode *letter = root->l[3];`。然后你会寻找`letter->l[1]`以'ca'开头的单词；`letter = letter->l[1];`. 然后，您将查找`letter->l[2]`以“cab”开头的单词。在这一点上，您知道您已经到了要搜索的单词的末尾，并`letter->w != 0`告诉您该单词是有效的，并为您提供了该单词的文本。在树的下方可能还有其他词（用于“出租车”、“电缆”、“阴谋集团”等）。

你会被教导一些关于这个的东西，或者给出一些规范。可能还有其他方法可以填写详细信息。

我不清楚使用动态分配的数组是否比`tNode *l[27];`在结构中使用更好（对声明进行适当调整），但这是一个单独的讨论。我愉快地假设列表中的第 27 个节点没有更深层次的意义。当然，您可以在网上查找此类内容：[维基百科](http://en.wikipedia.org/wiki/Radix_tree)往往是与计算机科学相关的非争议性问题的合理来源，但我尚未研究链接页面。

* * *

> `l`不是数组；它是一个指向指针数组的指针，这让我感到困惑。

指针变量过着双重生活——杰基尔博士和海德先生——并且可以被视为指针或（随便）数组。

如果你写`char *str`,`str`不是字符数组；它是一个指向字符数组（的第一个字符）的指针。您可以使用`str[i]`访问字符串中的`i`^(第 th 个)字符。同理，`char **argv`不是字符串数组；它是一个指向字符串数组（第一个字符串）的指针。您可以使用^(th)`argv[i]`参数访问主程序。`i`

在这个 trie 结构中，`l`不是 ; 的数组`tNode *`。它是指向 trie 结构数组（的第一个元素）的指针。但是您可以使用`trie->l[i]`来访问指向的列表中的`i`^(th)`trie->l` trie 结构。

* * *

### 工作代码

我之前没有尝试过，所以我根据您的数据结构将下面的代码放在一起。您需要调查它是否正式正确；下面的代码适用于给定的测试用例，并`valgrind`为代码提供了一个干净的健康状况（没有泄漏内存，没有内存滥用）。

该代码强制包含通常在头文件中的内容。就外界而言，trie 类型 ( `tNode`) 是不透明的。

```
#ifndef TRIE_H_INCLUDED
#define TRIE_H_INCLUDED

typedef struct tNode_t tNode;
extern void trie_add_word(tNode *trie, char const *word);
extern char const *trie_find_word(tNode *trie, char const *word);
extern void trie_print(tNode *trie);
extern tNode *trie_new(void);
extern void trie_free(tNode *trie);

#endif /* TRIE_H_INCLUDED */

/*#include "trie.h"*/
#include <assert.h>
#include <ctype.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <stdarg.h>

struct tNode_t
{
    struct tNode_t **l;
    char            *w;
};

static void db_print(char const *fmt, ...);

tNode *trie_new(void)
{
    tNode *trie = malloc(sizeof(tNode));
    assert(trie != 0);      // Abysmal way to validate memory allocation
    trie->w = 0;
    trie->l = (tNode **)calloc(27, sizeof(tNode *));
    assert(trie->l != 0);   // Abysmal way to validate memory allocation
    return(trie);
}

void trie_free(tNode *trie)
{
    assert(trie != 0);
    assert(trie->l != 0);
    for (size_t i = 0; i < 27; i++)
    {
        if (trie->l[i] != 0)
            trie_free(trie->l[i]);
    }
    free(trie->l);
    free(trie->w);
    free(trie);
}

static void add_word_suffix(tNode *trie, char const *word, char const *suffix)
{
    int c;
    assert(trie != 0);
    assert(trie->l != 0);
    db_print("-->> %s: word [%s], suffix [%s]\n", __func__, word, suffix);
    while ((c = *suffix++) != '\0')
    {
        if (isalpha(c))
        {
            db_print("---- %s: letter %c (index %d)\n", __func__, c, c - 'a' + 1);
            c = tolower(c) - 'a' + 1;
            assert(trie->l != 0);
            if (trie->l[c] == 0)
                trie->l[c] = trie_new();
            db_print("---- %s: recurse: [%s]/[%s]\n", __func__, word, suffix);
            add_word_suffix(trie->l[c], word, suffix);
            db_print("<<-- %s\n", __func__);
            return;
        }
    }
    if (trie->w != 0)
    {
        db_print("---- %s: trie already contains word [%s] at [%s]\n", __func__, word, trie->w);
        return;
    }
    trie->w = strdup(word);
    db_print("<<-- %s: inserted word [%s]\n", __func__, trie->w);
}

void trie_add_word(tNode *trie, char const *word)
{
    add_word_suffix(trie, word, word);
}

static char const *find_word_suffix(tNode *trie, char const *word, char const *suffix)
{
    int c;
    db_print("-->> %s: word [%s] suffix[%s]\n", __func__, word, suffix);
    for ( ; (c = *suffix) != '\0'; suffix++)
    {
        if (isalpha(c))
        {
            db_print("---- %s: letter %c\n", __func__, c);
            c = tolower(c) - 'a' + 1;
            if (trie->l[c] == 0)
                return(0);
            char const *rv = find_word_suffix(trie->l[c], word, suffix+1);
            if (rv == 0)
            {
                db_print("<<-- %s: missing [%s]/[%s]\n", __func__, word, suffix);
                return 0;
            }
            db_print("<<-- %s: found [%s] for [%s]/[%s]\n", __func__, rv, word, suffix);
            return rv;
        }
    }
    if (trie->w == 0)
    {
        db_print("<<-- %s: missing [%s]/[%s]\n", __func__, word, suffix);
        return 0;
    }
    db_print("<<-- %s: found [%s] for [%s]/[%s]\n", __func__, trie->w, word, suffix);
    return(trie->w);
}

char const *trie_find_word(tNode *trie, char const *word)
{
    return find_word_suffix(trie, word, word);
}

void trie_print(tNode *trie)
{
    assert(trie != 0);
    assert(trie->l != 0);
    if (trie->w != 0)
        printf("%s\n", trie->w);
    for (size_t i = 0; i < 27; i++)
    {
        if (trie->l[i] != 0)
            trie_print(trie->l[i]);
    }
}

static int debug = 0;

static void db_print(char const *fmt, ...)
{
    if (debug > 0)
    {
        va_list args;
        va_start(args, fmt);
        vprintf(fmt, args);
        va_end(args);
    }
}

int main(int argc, char **argv)
{
    tNode *trie = trie_new();

    /* Set debugging - and use argv */
    if (argc > 1 && argv[argc] == 0)
        debug = 1;

    /* First test */
    char const *word = "cab";
    trie_add_word(trie, word);
    char const *leaf = trie_find_word(trie, word);
    printf("Leaf word = %s\n", leaf);
    trie_free(trie);

    /* Second, more comprehensive test */
    static char const *words[] =
    {
        "cabal",         "cabbie",
        "cab",           "centre",
        "cinema",        "cold",
        "culminate",     "culmination",
        "duck",          "cabs",
        "amniocentesis", "amniocentesis",
        "amniocentesis", "cam",
        "cab",           "cab",
        "zulu",          "alpha",
        "bravo",         "Charlie",
        "delta",         "echo",
        "foxtrot",       "golf",
        "hotel",         "India",
        "Juliet",        "kilo",
        "Lima",          "Mike",
        "November",      "Oscar",
        "Papa",          "Quebec",
        "Romeo",         "Sierra",
        "Tango",         "uMBRelLA",
        "Victor",        "Whisky",
        "X-ray",         "Yankee",
        "Zulu",          "Aquarius",
    };
    size_t num_words = sizeof(words) / sizeof(words[0]);
    size_t counter = 0;

    /* First time, add every other word; second time, every word */
    for (size_t mod = 2; mod > 0; mod--)
    {
        trie = trie_new();
        printf("\nTest %zu\n", ++counter);
        for (size_t i = 0; i < num_words; i++)
        {
            if (i % mod == 0)
                trie_add_word(trie, words[i]);
            char const *leaf = trie_find_word(trie, words[i]);
            if (leaf == 0)
                printf("Word [%s] is missing\n", words[i]);
            else
                printf("Word [%s] for [%s]\n", leaf, words[i]);
        }
        printf("\nTrie:\n");
        trie_print(trie);
        trie_free(trie);
    }

    return(0);
} 
```

该代码`assert()`用于内存分配检查。这是方便但糟糕的风格。不要模仿。如果您愿意，您可以决定将`trie_find_word()`and`trie_add_word()`功能组合成一个函数。您可以通过将参数（任何参数）传递给测试程序来查看相当详细的诊断信息。

该代码使用 27 （不在宏或枚举中），但如果您删除`+ 1`出现在几个要转换`'a'`为的位置`1`（它会将其转换为），则它仅适用于数组中的 26 个元素`0`。

# php - 通过 PHP 中的 SoapClient 在 Sharepoint 2010 中进行模拟

> ID：13674618
> 
> 赞同：1
> 
> 时间：2012-12-02T22:28:48.983
> 
> 标签：php, sharepoint-2010, impersonation, soap-client

例如，我想在使用 SoapClient 获取列表信息时模拟 Sharepoint 中的用户。

我的理解是，我需要从 Sharepoint 为我想模拟的用户获取一个用户令牌，然后我可以使用它来以该用户的身份执行任何其他调用。

我能找到的只是在 C# 中执行此操作的信息，但我需要能够完全在 PHP 中执行此操作，最好是通过`SoapClient`.

以下是有关 Sharepoint 中的模拟的一些背景信息，包括 C# 中的代码片段：

[http://extreme-sharepoint.com/2012/05/30/impersonation-elevation-of-privileges/](http://extreme-sharepoint.com/2012/05/30/impersonation-elevation-of-privileges/)

# matlab - 计算大 x 的 4^x mod 2π

> ID：13674620
> 
> 赞同：6
> 
> 时间：2012-12-02T22:28:53.677
> 
> 标签：matlab, math, trigonometry, modulo, largenumber

我需要`sin(4^x)`在 Matlab 中用 x > 1000 进行计算，基本上是`sin(4^x mod 2π)`因为 sin 函数内部的值变得非常大，Matlab 为`4^1000`. 我怎样才能有效地计算这个？我更喜欢避免使用大数据类型。

我认为转换为类似的东西`sin(n*π+z)`可能是一个可能的解决方案。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-02T23:37:36.297

你需要小心，因为会有精度损失。sin 函数是周期性的，但 4^1000 是一个很大的数字。如此有效，我们减去 2*pi 的倍数以将参数移动到区间 [0,2*pi) 中。

4^1000 大约是 1e600，一个非常大的数字。因此，我将使用[MATLAB 中的高精度浮点工具进行](http://www.mathworks.com/matlabcentral/fileexchange/36534-hpf-a-big-decimal-class)计算。（事实上​​，当我编写 HPF 时，我的一个明确目标是能够计算像 sin(1e400) 这样的数字。即使你是为了好玩而做某事，正确地做仍然是有意义的。）在这种情况下，因为我知道我们感兴趣的幂大约是 1e600，所以我会以超过 600 位的精度进行计算，预计会因减法抵消而丢失 600 位。这是一个巨大的减法取消问题。想想看。该模运算实际上是前 600 位左右相同的两个数字之间的差异！

```
X = hpf(4,1000);
X^1000
ans =
114813069527425452423283320117768198402231770208869520047764273682576626139237031385665948631650626991844596463898746277344711896086305533142593135616665318539129989145312280000688779148240044871428926990063486244781615463646388363947317026040466353970904996558162398808944629605623311649536164221970332681344168908984458505602379484807914058900934776500429002716706625830522008132236281291761267883317206598995396418127021779858404042159853183251540889433902091920554957783589672039160081957216630582755380425583726015528348786419432054508915275783882625175435528800822842770817965453762184851149029376 
```

不超过这个数字的最接近的 2*pi 的倍数是多少？我们可以通过一个简单的操作得到它。

```
twopi = 2*hpf('pi',1000);
twopi*floor(X^1000/twopi)
ans = 114813069527425452423283320117768198402231770208869520047764273682576626139237031385665948631650626991844596463898746277344711896086305533142593135616665318539129989145312280000688779148240044871428926990063486244781615463646388363947317026040466353970904996558162398808944629605623311649536164221970332681344168908984458505602379484807914058900934776500429002716706625830522008132236281291761267883317206598995396418127021779858404042159853183251540889433902091920554957783589672039160081957216630582755380425583726015528348786419432054508915275783882625175435528800822842770817965453762184851149029372.6669043995793459614134256945369645075601351114240611660953769955068077703667306957296141306508448454625087552917109594896080531977700026110164492454168360842816021326434091264082935824243423723923797225539436621445702083718252029147608535630355342037150034246754736376698525786226858661984354538762888998045417518871508690623462425811535266975472894356742618714099283198893793280003764002738670747 
```

如您所见，前 600 位数字是相同的。现在，当我们将这两个数字相减时，

```
X^1000 - twopi*floor(X^1000/twopi)
ans =
3.333095600420654038586574305463035492439864888575938833904623004493192229633269304270385869349155154537491244708289040510391946802229997388983550754583163915718397867356590873591706417575657627607620277446056337855429791628174797085239146436964465796284996575324526362330147421377314133801564546123711100195458248112849130937653757418846473302452710564325738128590071680110620671999623599726132925263826 
```

这就是为什么我把它称为一个巨大的减法取消问题。这两个数字对于许多数字都是相同的。即使有 1000 位的准确度，我们也丢失了很多位。当您将这两个数字相减时，即使我们携带 1000 位数字的结果，现在也只有最高的 400 位数字是有意义的。

HPF 当然可以计算三角函数。但正如我们上面所展示的，我们应该只信任结果的大约前 400 位数字。（在某些问题上，sin 函数的局部形状可能会导致我们丢失更多的数字。）

```
sin(X^1000)
ans =
-0.1903345812720831838599439606845545570938837404109863917294376841894712513865023424095542391769688083234673471544860353291299342362176199653705319268544933406487071446348974733627946491118519242322925266014312897692338851129959945710407032269306021895848758484213914397204873580776582665985136229328001258364005927758343416222346964077953970335574414341993543060039082045405589175008978144047447822552228622246373827700900275324736372481560928339463344332977892008702220160335415291421081700744044783839286957735438564512465095046421806677102961093487708088908698531980424016458534629166108853012535493022540352439740116731784303190082954669140297192942872076015028260408231321604825270343945928445589223610185565384195863513901089662882903491956506613967241725877276022863187800632706503317201234223359028987534885835397133761207714290279709429427673410881392869598191090443394014959206395112705966050737703851465772573657470968976925223745019446303227806333289071966161759485260639499431164004196825 
```

所以我是对的，我们不能相信所有这些数字吗？我将进行相同的计算，一次以 1000 位精度计算，然后第二次以 2000 位计算。计算绝对差，然后取 log10。2000 位结果将作为我们的参考，与 1000 位结果相比基本准确。

```
double(log10(abs(sin(hpf(4,[1000 0])^1000) - sin(hpf(4,[2000 0])^1000))))
ans =
      -397.45 
```

啊。因此，在我们一开始的 1000 位精度中，我们丢失了 602 位。结果中的最后 602 位非零，但仍然是完全垃圾。这正如我所料。仅仅因为您的计算机报告高精度，您需要知道何时不信任它。

我们可以在不依赖高精度工具的情况下进行计算吗？当心。例如，假设我们使用 powermod 类型的计算？因此，计算所需的功率，同时在每一步取模。因此，以双精度完成：

```
X = 1;
for i = 1:1000
  X = mod(X*4,2*pi);
end
sin(X)
ans =
         0.955296299215251 
```

啊，但请记住，真正的答案是-0.19033458127208318385994396068455455709388...

因此，基本上没有任何重要意义。我们在该计算中丢失了所有信息。正如我所说，小心很重要。

发生的事情是在该循环的每一步之后，我们在模数计算中产生了微小的损失。但是后来我们将答案乘以 4，这导致误差增加了 4 倍，然后又增加了 4 倍，等等。当然，每一步之后，结果在数字末尾丢失了一点点. 最终的结果是完整的crapola。

让我们看看较小功率的操作，只是为了说服自己发生了什么。例如，在这里尝试 20 次方。使用双精度，

```
mod(4^20,2*pi)
ans =
          3.55938555711037 
```

现在，在 powermod 计算中使用循环，在每一步之后获取 mod。本质上，这会在每一步之后丢弃 2*pi 的倍数。

```
X = 1;
for i = 1:20
  X = mod(X*4,2*pi);
end
X
X =
          3.55938555711037 
```

但这是正确的值吗？同样，我将使用 hpf 计算正确的值，显示该数字的前 20 位。（因为我已经完成了 50 位的计算，所以我绝对相信前 20 位。）

```
mod(hpf(4,[20,30])^20,2*hpf('pi',[20,30]))
ans =
          3.5593426962577983146 
```

事实上，虽然双精度结果与显示的最后一位数字一致，但这些双精度结果实际上在第 5 个有效数字之后都是错误的。事实证明，我们仍然需要为这个循环携带超过 600 位的精度才能产生任何有意义的结果。

最后，为了彻底杀死这匹死马，我们可能会问是否可以进行更好的 powermod 计算。也就是说，我们知道 1000 可以分解成二进制形式（使用 dec2bin）为：

```
512 + 256 + 128 + 64 + 32 + 8
ans =
        1000 
```

我们是否可以使用重复平方方案来用更少的乘法来扩展大功率，从而减少累积误差？本质上，我们可能会尝试计算

```
4^1000 = 4^8 * 4^32 * 4^64 * 4^128 * 4^256 * 4^512 
```

但是，通过反复平方 4 来做到这一点，然后在每次操作后取 mod。然而，这会失败，因为模运算只会删除 2*pi 的整数倍。毕竟，mod 确实是为处理整数而设计的。所以看看会发生什么。我们可以将 4^2 表示为：

```
4^2 = 16 = 3.43362938564083 + 2*(2*pi) 
```

但是，我们可以将余数平方，然后再次使用 mod 吗？不！

```
mod(3.43362938564083^2,2*pi)
ans =
          5.50662545075664

mod(4^4,2*pi)
ans =
          4.67258771281655 
```

当我们展开这个表单时，我们可以理解发生了什么：

```
4^4 = (4^2)^2 = (3.43362938564083 + 2*(2*pi))^2 
```

去掉 2*pi 的整数倍数会得到什么？您需要了解为什么直接循环允许我删除 2*pi 的整数倍，但上面的平方运算却没有。当然，由于数值问题，直接循环也失败了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T22:31:09.343

我首先将问题重新定义如下：计算 4^1000 模 2pi。所以我们把问题一分为二。

使用一些数学技巧：

`(a+2pi*K)*(b+2piL) = ab + 2pi*(garbage)`

因此，您可以自己乘以 4 并在每个阶段计算 mod 2pi。当然，真正要问的问题是这件事的精确度是多少。这需要仔细的数学分析。它可能完全是废话，也可能不是。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-02T22:57:28.673

按照 Pavel 对 mod 的提示，我在 mathwors.com 上找到了一个用于高功率的 mod 函数。 [bigmod(number,power,modulo)](http://www.mathworks.com/matlabcentral/fileexchange/7908-big-modulo-function/content/bigmod.m)不能计算 4^4000 mod 2π。因为它只使用整数作为模数而不是小数。

这种说法不再正确：`sin(4^x)`is `sin(bidmod(4,x,2*pi))`.

# java - 我将要在 Java 中读取的 txt 文件放在哪里？

> ID：13674626
> 
> 赞同：17
> 
> 时间：2012-12-02T22:29:10.057
> 
> 标签：java, eclipse, io

如果我正在使用 Java 在 Eclipse 中构建一个应用程序，并且我希望该应用程序从一个 txt 文件中读取，我应该将 txt 文件放在包中的哪个位置以便不必指定它的路径（这样我就可以说“文件.txt")。我以为它应该放在 src 文件夹中，但它不起作用。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-02T22:32:44.353

右键单击项目文件夹，然后单击新建 -> 文件。该文件将位于项目文件夹中，而不是源文件夹中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T22:29:47.290

将文件放在运行 Java 应用程序的文件夹中（当前/工作文件夹）。如果您使用 Eclipse 的默认设置来运行您的应用程序，您应该将文件直接放在 Eclipse 项目文件夹中。要在 Eclipse 项目中创建文件，您可以简单地将其拖放到那里或右键单击 Eclipse 项目并创建一个新文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T22:34:51.767

可以做到这一点的方法是使用 .getResourceAsStream("file.txt")

[SO线程](https://stackoverflow.com/questions/1464291/how-to-really-read-text-file-from-classpath-in-java)

否决正确答案？奇怪...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T22:39:10.247

如果您不想指定路径，并且想使用 java.io.File API 从文件系统打开文件，则将其放在工作目录中。

在 Eclipse 中，工作目录默认为项目的根目录，但您可以在 Eclipse 运行配置中修改它（也可以查看它的设置）。它们可以在“运行 > 运行配置...”菜单选项下访问，工作目录设置位于 Java 程序的“参数”选项卡下。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-02T22:45:14.083

重要的是包含您的文件的目录位于类路径中。当您使用 Eclipse 的运行对话框来设置项目时，有一个类路径选项卡。您可以使用它了解类路径中已有的内容，并根据需要进行添加。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-03-04T16:32:26.327

正如@tschaible 上面提到的，Eclipse 工作目录默认为项目的根目录。因此，程序将从根级别查找文件。

但是，如果您打算从命令行运行程序，则它的行为会有所不同，因为工作目录默认为您从中运行 java 文件的文件夹（也称为 src 文件夹）。因此，在从命令行测试您的 java 程序时，牢记这种差异是很重要的。

# android - java.lang.ClassCastException：无法转换 android.widget.TextView

> ID：13674627
> 
> 赞同：8
> 
> 时间：2012-12-02T22:29:11.217
> 
> 标签：android, eclipse

```
12-01 00:36:28.058: E/AndroidRuntime(5062): Caused by: java.lang.ClassCastException: android.widget.TextView cannot be cast to android.widget.EditText 
```

如果有人知道，我会遇到错误然后告诉我......我将非常感谢

* * *

爪哇：

```
Log.d("Textra", title); 
Log.d("Dextra", des); 
EditText t=(EditText) findViewById(R.id.t); 
EditText d=(EditText) findViewById(R.id.des); 
t.setText(title); 
d.setText(des); 
```

XML:

```
<LinearLayout 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"> 

    <TextView 
        android:id="@+id/t" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:text="" 
        android:textAppearance="?android:attr/textAppearanceLarge" /> 

    <TextView 
        android:id="@+id/des" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:text=""/> 

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-12T07:14:25.903

删除 R.java 清理项目 保存文件 Build & Run

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-02T22:41:14.597

```
<TextView android:id="@+id/t" ... /> 
<TextView android:id="@+id/des" ... /> 
```

```
EditText t=(EditText) findViewById(R.id.t);
EditText d=(EditText) findViewById(R.id.des); 
```

你想要 TextViews 还是 EditTexts？

将 XML 更改为使用 EditTexts 或将 Java 更改为使用 TextViews ...

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-01T06:42:05.120

我可以通过使用 project/clean 清理项目来解决它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-29T12:38:02.500

如果存在清理问题，那么它可能会引发任何转换错误。我得到了这个：

```
Caused by: java.lang.ClassCastException: android.widget.EditText cannot be cast to android.widget.LinearLayout 
```

在 Eclipse 中，只需转到 Project > Clean & Select your project 来清理它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-26T13:46:36.390

您在 xml 中使用 textview，但在活动中您尝试 EditText t=(EditText) findViewById(R.id.t) - 不正确；使用 TextView t=(TextView) findViewById(R.id.t);

或将 xml TextView 更改为 EditText

# jquery - 检查是否使用jquery从另一个页面输入

> ID：13674629
> 
> 赞同：0
> 
> 时间：2012-12-02T22:29:25.123
> 
> 标签：jquery, firefox

我正在创建一个使用 jquery 的滚动效果的 wordpress 主题。

在您进入带有散列 URL 的页面之前，一切正常。

例如：

[http://www.domain.com/#contact](http://www.domain.com/#contact)

它只会转到页面底部。

这只发生在 firefox 而不是任何其他浏览器中……即使 IE 也可以：D

反正。

正如我所说，在您从另一个页面进入之前，一切都 100% 有效。

如果我删除用于滚动的 javascript，那么它会转到相关的 div.id，但是当我将代码添加回来时，它会停止工作。

此外，这只发生在页面底部附近的目的地。

我尝试在页脚而不是页眉中加载代码，以防它在从 wordpress 创建 div 之前读取 jquery，但这并不好。这没用。

这是我创建的 jquery。

```
jQuery(function(){

/***************************************************
        VERTICAL SCROLLING
***************************************************/
    jQuery('a#ublblogback').click(function(){ parent.history.back(); return false;});
    jQuery('#main a, a.internal, a.da-link,  #menu_nav a, .footer_inner a, #footerinternal').click(function(e){

        if (!jQuery(this).hasClass("thisisabloglink")) {
            e.preventDefault();
        }

        jQuery('div#main ul li:last-child').find('a').css('background','none');

        var $anchor = jQuery(this);
        var $section = jQuery($anchor.attr('href'));
        var topOffset = $section.offset().top;

        // Adjust extra offset if not primary section 
        if(!$section.parent('#wrapper').length){
            topOffset = topOffset - 0;
        }

        // Scroll page
        jQuery('html, body').stop().animate({
            scrollTop: topOffset
        }, 1500, 'easeInOutExpo');

    });

/***************************************************
        SCROLLING
***************************************************/
    jQuery(window).scroll(function(){

        var scrollOffset = jQuery(this).scrollTop();

        if(scrollOffset <= 125){
            jQuery('#logo').stop().animate({top: -scrollOffset}, 700);
            jQuery('#main').stop().animate({top: -scrollOffset + 155}, 50);
        }else{
            jQuery('#logo').stop().animate({top: -225}, 50);
            jQuery('#main').stop().animate({top: 0}, 50);
        }
    });
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T22:53:17.913

你的页面有链接吗？- 这可能是在初始站点访问时加载的，当您更改页面时，内容正在通过 ajax 加载，因此当函数在页面加载时运行时，您在 jquery 中引用的 dom 元素不存在。

一个可能的解决方案可能是替换您的 .click - 这一行：

```
jQuery('#main a, a.internal, a.da-link,  #menu_nav a, .footer_inner a, #footerinternal').click(function(e){ 
```

.on 像这样：

```
jQuery('body').on('click', '#main a, a.internal, a.da-link,  #menu_nav a, .footer_inner a, #footerinternal', function(e){ 
```

即使最初运行 jquery 时文档正文中不存在元素，这也会使代码运行。

我没有花很多时间在 wordpress 上，所以这有点像在黑暗中刺伤

# php - 连接到 Joomla 2.5 数据库并获取类别 ID 的最简单方法

> ID：13674632
> 
> 赞同：0
> 
> 时间：2012-12-02T22:29:36.590
> 
> 标签：php, joomla, easyblog

**我的情况**

我对 Joomla 很陌生，我安装了一个名为 EasyBlog 的组件。我想做的是`category_id`从`jos_easyblog_post`表格中获取特定的信息`post_id`，并将`echo`其放在模板上。我也不太确定是否可以将数据库连接脚本放在模板本身上？

`jos_easyblog_post`有几列，

```
id - Post Id
category_id - Category that post belongs to
Hits etc etc. 
```

让我们说`id`哪个帖子 ID 是 5，我怎样才能连接到数据库并去`jos_easyblog_post`查找帖子`id`5 并获取`category_id`与之关联的内容？多谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T22:40:18.720

使用 Joomla 等 CMS 的乐趣在于脚本变得简单。使用以下代码连接到数据库：

```
$db = JFactory::getDbo(); 
```

要使用 Joomla 2.5 标准从数据库表中获取结果，您可以尝试以下操作：

```
$db = JFactory::getDbo();
$query = $db->getQuery(true);
$query->select('category_id')
 ->from('#__easyblog_post')
 ->where('post_id = 5');
$db->setQuery($query);
$row = $db->loadResult();

echo $row; 
```

请注意，在定义 Joomla 数据库表时，前缀定义为`#__`

# python - Python 字典中的数据太多？

> ID：13674634
> 
> 赞同：1
> 
> 时间：2012-12-02T22:29:40.093
> 
> 标签：python, file, dictionary, loops

我有一个大约 10,000 行的文本文件。
典型的行如下所示：

```
'1 2/1/2011 9:30,ZQZ,200.02,B,500' 
```

如果我运行#1，我可以遍历整个文件，并`i`计算文件中的总行数。但是，如果我创建一个字典，在遍历文件时记录每一行中的数据（如 #2 所示），我将完成大约一半。我无法弄清楚为什么会这样。10,000 行数据是否可能太大而无法包含在字典中？我怎样才能确定这一点？#1 TheFile = open(file_name) TheFile.next()

```
i = 0
for l in TheFile:
   i += 1
   print i

#2
TheFile = open(file_name)
TheFile.next()
thedata = {}
i = 0
for l in TheFile:
   i += 1
   print i
   this_line = TheFile.next()
   the_info = this_line.split(',')
   the_ticker = the_info[1]
   #print type(the_info[1])
   #print this_line
   if the_ticker not in thedata.keys():
      thedata[the_ticker] = {}

   thedata[the_ticker]['trade'+ str(len(thedata[the_ticker]) + 1)] =
   {'the_trade_number':len(thedata[the_ticker]),
    'theTime':the_info[0],
    'thePrice':float(the_info[2]),
    'theTransaction':the_info[3],
    'theQuantity':int(the_info[4])} 
```

问题是＃2没有给我任何错误，这就是为什么我无法弄清楚问题所在

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T23:11:38.533

您的问题就在运行 #2 中：

```
for l in TheFile:
   i += 1
   print i
   this_line = TheFile.next() 
```

`l`已经有当前行，然后您使用`TheFile.next()`. 我敢打赌，如果您更改`this_line = TheFile.next()`为`this_line = l`，您将获得预期的结果。

# c++ - 线程安全的线程间队列

> ID：13674635
> 
> 赞同：0
> 
> 时间：2012-12-02T22:29:44.783
> 
> 标签：c++, boost, message-queue

我一直在寻找使用 boost 进行线程间通信的线程安全队列，但我没有找到任何类似的东西，所以我想出了自己的解决方案。
1-我使用ManualResetEvent [Boost相当于ManualResetEvent？](https://stackoverflow.com/questions/1501111/boost-equivalent-of-manualresetevent)

2-队列的代码

```
MessageQueue::MessageQueue()
{
}
void MessageQueue::Push(void * data)
{
    Locker.lock();
    Queue.push(data);
    Locker.unlock();
    Event.Set();
}
void * MessageQueue::Pop()
{
    void * data = NULL;
    Event.Wait();
    Locker.lock();
    data = Queue.front();
    Queue.pop();
    if(Queue.size() == 0)
    {
      Event.Reset();
    }
    Locker.unlock();
    return data;

 }
 void * MessageQueue::Peek()
 {
    void * data = NULL;
    Locker.lock();
    if(Queue.size() > 0)
    {
      data = Queue.front();
      Queue.pop();
      if(Queue.size() == 0)
         Event.Reset();
    }
    Locker.unlock();
    return data;
 }
 MessageQueue::~MessageQueue(void)
 {
 } 
```

它确实有效！但它是实现线程间通信队列的正确方法吗？，有更好的选择吗？

# glsl - glsl cast bool 浮动

> ID：13674637
> 
> 赞同：5
> 
> 时间：2012-12-02T22:29:51.353
> 
> 标签：glsl

我想设置一个`float`值`1.0`是否一个向量等于另一个，`0.0`如果向量不相等

```
if( v1 == v2 )  floatVal = 1.0 ;
else  floatVal = 0.0 ; 
```

但它不是“更快”还是只是设置的优化

```
floatVal = (v1 == v2) ; 
```

但它不起作用。您不能隐式（或显式）将浮点数转换为布尔值？有没有办法做到这一点，还是我必须使用`if`语句分支？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-03T08:43:47.900

你没试过“float(bool)”函数吗？

GLSLangSpec.Full.1.20.8.pdf 第 5.4.1 节说您可以进行所有这些转换。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-06T15:15:41.223

CuriousChettai 是对的。写吧：

```
floatVal = float(v1 == v2); 
```

如果您分配的值可能会丢失精度，则 GLSL 会给您一个编译错误。因此，您可以执行以下操作：

```
float f = 3;       // works
int i = 3.0;       // compiler-error
int j = int(3.0);  // works 
```

# c - 如何在 C 中对字符串进行切片？

> ID：13674640
> 
> 赞同：8
> 
> 时间：2012-12-02T22:30:07.570
> 
> 标签：c, string, cstring, slice

我需要找出一个字符数组是否以“ADD”开头。我知道使用 strcmp()，但我不知道如何获取前三个字符。我真的很讨厌使用 c-strings。我怎样才能得到一个char数组的一部分，比如`char buffer[1024]?`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-02T22:32:20.297

使用`strncmp("ADD", buffer, 3)`.

我不确定您所说的“切片”是什么意思，但里面的任何指针`buffer`都可以被视为切片。例如，如果是一个以then`buffer`开头的字符串，则与删除后的字符串相同。*需要注意*的是，然后是的一部分，修改 的内容会修改 的内容。反之亦然。`"ADD"``char *slice = buffer + 3``"ADD"`*`slice``buffer``slice``buffer`*

 *如果“切片”是指独立副本，那么您必须分配一个新的内存块并将感兴趣的部分复制`buffer`到您的内存中。库函数`strdup`和`strndup`为此很方便。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-02T22:32:51.390

使用[strncmp 。](http://pubs.opengroup.org/onlinepubs/009695399/functions/strncmp.html)假设缓冲区是要测试的变量，只是

```
strncmp (buffer,"ADD",3); 
```*

# c++ - 成员函数中的显式 `this->`

> ID：13674643
> 
> 赞同：2
> 
> 时间：2012-12-02T22:30:51.653
> 
> 标签：c++

我已经看到建议成员函数使用`this->`显式引用成员变量，以避免忘记声明成员变量并意外引用全局变量。如果他们认为这是一种合理的预防措施或不必要的冗长，会不必要地使代码的阅读复杂化，任何人都可以发表评论吗？有没有人在日常现实生活中真正做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T22:41:25.887

由于我经常实现类模板，因此我习惯于始终使用`this->`. 在类模板的上下文中，使用 限定名称是有用的另一个原因`this->`： 不依赖于模板参数的名称仅在第一阶段查找中查找，即从不查找依赖于模板参数的基类中的名称在基地。通过限定成员名称与`this->`他们成为依赖。例如：

```
#include <iostream>

void f() { std::cout << "::f()\n"; }

template <typename T>
class base
{
public:
    void f() { std::cout << "base::f()\n"; }
};

template <typename T>
class derived
    : public base<T>
{
public:
    void g() {
        f();
        this->f();
    }
};

int main()
{
    derived<int>().g();
} 
```

我在我`this->`的所有代码中都使用了限定，除非某些编码指南禁止我这样做（而且我认为编码指南的这一方面是愚蠢和错误的）。当然，在我自己的代码中，我限定了所有可以限定且不是自定义点的名称（例如，我不会限定`swap()`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T22:34:37.307

好吧，不，因为您通常不会经常使用全局变量，其名称会导致冲突。此外，您始终可以使用前缀来表示成员变量：

```
class C {
    int m_Foo;
    int mBar;
}; 
```

使用它真的会炸毁代码大小并影响可读性。考虑

```
class Foo {
    int a, b, c, d;

    int Bar () {
        return (a + b + (b / c) + d * (c + a));
    }
}; 
```

尝试`this->`在上面的示例中添加。

此外，每个优秀的编辑器都会根据变量的范围对变量进行不同的着色。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T22:35:50.817

虽然成员变量的一些约定是一件好事，但我认为`this->`它过于冗长，并试图解决一个很少有机会发生的问题。我使用`m_var`or`mVar`作为成员变量。

它让我想起了这种伪预防措施`if (3 == var)`，`if (var == 3)`以避免`if (var = 3)`. 现在的编译器总是能捕捉到。

可读的代码很重要。它可以防止错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T22:47:15.237

`this->`通常用于避免与全局变量或成员函数的参数混淆

*   供代码维护者阅读时使用
*   用于 IDE 中的自动完成

`m_`
您也可以通过使用前缀不那么冗长的成员来获得这些优势

# git - 无法推送到 git 存储库 - 权限被拒绝

> ID：13674647
> 
> 赞同：51
> 
> 时间：2012-12-02T22:31:12.150
> 
> 标签：git, github, ssh, ssh-keys, ssh-agent

我有以下问题：

```
$ git push -u origin master
Permission denied (publickey).
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists. 
```

我已经检查了这样做的连接：

```
$ ssh -vT git@github.com 
```

并且输出看起来不错，我得到了正确的身份验证。

在进一步检查时，我注意到：

```
$ ssh-add -l
The agent has no identities. 
```

我尝试运行 ssh-agent，但没有任何改变：

```
$ ssh-agent
SSH_AUTH_SOCK=/tmp/ssh-A1mhFqvqncuO/agent.766; export SSH_AUTH_SOCK;
SSH_AGENT_PID=767; export SSH_AGENT_PID;
echo Agent pid 767;
$ ssh-add -l
Could not open a connection to your authentication agent. 
```

我正在使用 Arch Linux。任何帮助将不胜感激！提前致谢！

[Github 诊断帮助在这里。](https://help.github.com/articles/error-permission-denied-publickey/)

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2013-08-01T12:04:31.143

我遇到了类似的问题，我的问题通过运行以下命令将我的密钥添加到已知密钥列表中得到了解决：

```
ssh-add ~/.ssh/id_rsa 
```

希望它也能解决你的问题。;)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-09T02:50:44.107

您需要在控制台中执行以下操作（*如果您使用 putty ssh 客户端*）：

1.  如果密钥不存在，则生成密钥：

    ```
    cd ~/.ssh && ssh-keygen -lf ~/.ssh/id_rsa.pub 
    ```

不要忘记密码，在这一步输入！

1.  将您的公钥输出到屏幕：

    ```
    cd ~/.ssh && cat id_rsa.pub 
    ```

2.  通过单击复制此字符串并将鼠标指针从开始输出移动到结束。无需按`Ctrl`+`V`或任何其他键。

3.  在 GitHub 上登录您的帐户并将此公钥添加到[https://github.com/settings/ssh](https://github.com/settings/ssh)

4.  现在你可以在本地使用你的 git。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-02T22:37:16.403

如果您还没有阅读它，您应该查看 GitHub 帮助页面以了解此错误：

*[错误：权限被拒绝（公钥）](https://help.github.com/articles/error-permission-denied-publickey)*

每次我遇到这个问题时，都是由于该页面上列出的最后一个问题：我没有将当前工作站的公钥附加到我的 GitHub 帐户。当然，GitHub 也提供了[如何将你的公钥附加到你的帐户的说明](https://help.github.com/articles/generating-ssh-keys/#step-4-add-your-ssh-key-to-your-account)。

* * *

**tl;博士**

确保您当前的公钥已附加到您的 GitHub 帐户。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-06-14T20:35:04.050

我认为这不会解决您的问题，因为您`ssh -vT git@github.com`直接测试并且它有效，但是您使用`ssh-agent`不当。你需要跑

```
$ eval `ssh-agent -s`
Agent pid 767
$ ssh-add -l
The agent has no identities. 
```

这将评估环境导出命令并允许您的`ssh-add`和`ssh`命令与代理通信。或者，您可以要求代理启动 shell、终端等，它会设置适当的环境：

```
$ ssh-agent bash
$ ssh-add -l
The agent has no identities. 
```

在这种情况下，shell 作为 的子运行，`ssh-agent`并且代理将在 shell 退出时关闭。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-09-19T12:39:12.823

我在我的 Ubuntu 上遇到了同样的问题，然后我意识到我处于`sudo`模式，一旦我`remote`没有`sudo`它就可以顺利访问。

这就是我解决问题的方法，希望它可以帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-04-26T08:50:54.180

就我而言，我在 GitLab 上遇到了这个问题，因为我使用的是非默认 SSH 密钥对路径。@NEO 的回答完美：

```
ssh-add ~/.ssh/other_id_rsa 
```

但是，每次打开新终端时，我都必须这样做。

要使此更改永久生效，您必须编辑`~/.ssh/config`并添加以下内容：

```
Host gitlab.company.com
RSAAuthentication yes
IdentityFile ~/.ssh/config/private-key-filename 
```

有关更多详细信息，请查看[gitlab 的文档](https://gitlab.com/help/ssh/README#working-with-non-default-ssh-key-pair-paths)。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-02-14T14:54:28.783

权限被拒绝（公钥）。我今天遇到了这个问题，但我终于找到了解决方案，并成功解决了我的问题。

也许你应该验证以下问题：</p>

1.  你有一个github账号
2.  git 配置你的用户名和-mail
3.  生成一个 ssh-key pri/pub 对并将公钥添加到您的 git 帐户，请检查这可能会给您帮助：[生成新的 ssh 密钥](https://help.github.com/articles/generating-a-new-ssh-key/)并且[无法推送 git 存储库“权限被拒绝”](https://stackoverflow.com/questions/13674647/cannot-push-to-git-repository-permission-denied)
4.  检查 ssh-key 是否成功添加：`ssh -V username@github.com`
5.  祝你好运！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-31T12:27:40.500

我会尝试从（[推送到 Git 返回错误代码 403 致命：HTTP 请求失败](https://stackoverflow.com/questions/7438313/pushing-to-git-returning-error-code-403-fatal-http-request-failed)）：

为了绝对能够使用 https 协议登录，您应该首先将您的身份验证凭据设置为 git 远程 URI：

```
git remote set-url origin https://yourusername@github.com/user/repo.git 
```

然后在尝试 git push 时会要求您输入密码。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-09-30T06:34:48.917

致命：无法访问“https://......”：请求的 URL 返回错误：403 如果您在推送代码时看到此错误，您在 Windows 中遵循此地址

**⇒ Control Panel\User Accounts\Credential Manager** 并在 GitHub 中删除过去的帐户

# iphone - 将搜索栏和网址栏合二为一（WebView）

> ID：13674650
> 
> 赞同：0
> 
> 时间：2012-12-02T22:31:17.087
> 
> 标签：iphone, xcode, uiwebview, uitextfield

因此，我正在从头开始为 iOS 设备更新我的 Web 浏览器应用程序，并且我正在尝试实现一些更*方便*的功能。现在似乎非常流行的一项功能，我收到了很多请求，就是将 Google 搜索栏和 URL 栏合二为一，就像 Chrome 应用程序一样。下面是 Google Chrome 应用程序的屏幕截图，如您所见，他们已经做到了，因此您可以输入“apple ipad”之类的搜索查询，它会返回“Apple iPad”的 Google 搜索页面，或者您可以输入 URL“ [http://apple.com/ipad/](http://apple.com/ipad/) ”，它会加载该 URL。

![iOS 上的谷歌浏览器](../Images/67cbe90dbe7e0a3b2c6161a740ef7521.png)

我浏览了整个互联网，但我能找到的只是有关如何使用 UITextField 的值搜索 Google 的教程。我有一种感觉，做到这一点的最好方法可能是进行“检查”。就像**输入**的值包含“http://”“www”。'.com' 或没有空格，然后将其作为 URL 加载，**如果**没有，则将其加载到 Google 搜索页面中，然后让 webview 加载 Google 搜索页面。

如果有人能告诉我正确的方向，那就太好了，或者甚至为我提供一些代码会更好。:)

谢谢！如果有人需要部分代码，请询问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T02:19:34.227

我已经快速编写了一个类并将其上传到我的 github 帐户，您可以使用该帐户位于[此处](https://github.com/kgellci/SUBar)

我还制作了一个关于如何使用这个类的快速视频，可以在[这里看到](http://www.youtube.com/watch?v=CxL4sYvAuyY&feature=youtu.be)

希望这可以帮助。

# c# - 使用异步目标包转换为异步，等待

> ID：13674654
> 
> 赞同：0
> 
> 时间：2012-12-02T22:32:09.177
> 
> 标签：c#, .net, multithreading, async-await

我有这个：

```
private void BtnCheckClick(object sender, EventArgs e)
{
        var a = txtLot.Text;
        var b = cmbMcu.SelectedItem.ToString();
        var c = cmbLocn.SelectedItem.ToString();
        btnCheck.BackColor = Color.Red;
        var task = Task.Factory.StartNew(() => 
                           Dal.GetLotAvailabilityF41021(a, b, c));
        task.ContinueWith(t =>
        {
                btnCheck.BackColor = Color.Transparent;
                lblDescriptionValue.Text = t.Result.Description;
                lblItemCodeValue.Text = t.Result.Code;
                lblQuantityValue.Text = t.Result.AvailableQuantity.ToString();
        },TaskScheduler .FromCurrentSynchronizationContext() );
        LotFocus(true);
} 
```

我按照 J. Skeet 的建议进入异步，在我的 .NET 4.0 应用程序中等待。我转换成这个：

```
private async void BtnCheckClick(object sender, EventArgs e)
{
        var a = txtLot.Text;
        var b = cmbMcu.SelectedItem.ToString();
        var c = cmbLocn.SelectedItem.ToString();
        btnCheck.BackColor = Color.Red;
        JDEItemLotAvailability itm = await Task.Factory.StartNew(() => Dal.GetLotAvailabilityF41021(a, b, c));
        btnCheck.BackColor = Color.Transparent;
        lblDescriptionValue.Text = itm.Description;
        lblItemCodeValue.Text = itm.Code;
        lblQuantityValue.Text = itm.AvailableQuantity.ToString();
        LotFocus(true);
} 
```

它工作正常。让我感到困惑的是，我可以在不使用 Task 的情况下做到这一点，而只需使用我的 Dal 的方法。但这意味着我必须修改我的 Dal 方法，这是我不想要的？

如果有人能用“简单”的话向我解释我所做的是否是最佳的以及为什么，我将不胜感激。

谢谢

Ps我的dal方法

```
public bool CheckLotExistF41021(string _lot, string _mcu, string _locn)
{
        using (OleDbConnection con = new OleDbConnection(this.conString))
        {
                OleDbCommand cmd = new OleDbCommand();
                cmd.CommandText = "select lilotn from proddta.f41021 " +
                                        "where lilotn = ? and trim(limcu) = ? and lilocn= ?";
                cmd.Parameters.AddWithValue("@lotn", _lot);
                cmd.Parameters.AddWithValue("@mcu", _mcu);
                cmd.Parameters.AddWithValue("@locn", _locn);
                cmd.Connection = con;
                con.Open();
                OleDbDataReader rdr = cmd.ExecuteReader();
                bool _retval = rdr.HasRows;
                rdr.Close();
                con.Close();
                return _retval;
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T22:43:08.627

不，这根本不是最优的。如果您无法将 DAL 层更改为异步，则使用 async/await 不会获得太多收益。您只是在单独的后台线程中运行您的阻塞 DAL 方法。如果您想要真正的收益，您应该修改您的 DAL 方法以使用异步 ADO.NET，即 BeginXXX 和 EndXXX 方法。一旦你这样做了，你将从 I/O 完成端口中获得真正的好处。在执行数据库调用期间，不会危及任何线程。

如果你不能修改你的 DAL 方法，无论你是使用`JDEItemLotAvailability itm = await Task.Factory.StartNew(() => Dal.GetLotAvailabilityF41021(a, b, c));`还是手动创建线程，真的，你什么都得不到。

# matlab - uigetfile 没有提取整个文件名

> ID：13674657
> 
> 赞同：1
> 
> 时间：2012-12-02T22:32:25.633
> 
> 标签：matlab

我正在使用 uigetfile 上传我的数据。我已经用日期标记了我的数据。所以我要上传的文件看起来像 Data-Dec01_11/45/35.txt 问题是 uigetfile 读取到第一个“/”，然后假定这是文件名的结尾。因此它提取文件名`Data-Dec01_11`。但是当然，当我加载该文件时，它不存在。如何强制 uigetfile 提取整个文件名？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T16:20:54.740

您不能在文件名中使用斜杠或反斜杠，因为它们可能会与文件分隔符混淆，就像您的情况一样。

您可以使用“regexpr”重命名文件，使其不包含非法字符，如[本 trhead 中所述](http://www.mathworks.com/matlabcentral/newsreader/view_thread/149298)。

为了您的方便，我在这里复制了他们建议的代码（我刚刚在示例字符串中添加了一个斜杠和一个反斜杠，以便您查看结果）：

```
% these characters are allowed
  legalchars = 'a-zA-Z0-9\-\ \_\.' ;
% illegal filename
  A = 'Some@charac\ters$are(not&allowed/.txt'
% replace every other character with an underscore
  B = regexprep(A,['[^' legalchars ']'],'_') 
```

# php - 使用正则表达式查找字符串的出现

> ID：13674658
> 
> 赞同：-4
> 
> 时间：2012-12-02T22:32:41.797
> 
> 标签：php, regex, string, match

我正在尝试使用正则表达式来搜索字符串始终为 5 个小写字母、2 个数字和一个小写字母的模式`p`。

例子：

```
ingja44p 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T22:36:10.750

[Internet 上](http://www.spaweditor.com/scripts/regex/)有许多实用程序可以帮助您编写和测试自己的正则表达式。但是，对于这种情况，您可以尝试以下操作：

```
$subject = "String to test";
$pattern = "#[a-z]{5}\d{2}p#";

if (preg_match($pattern, $subject)) {
   echo "A match was found.";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T22:36:14.513

```
preg_match('/[a-z]{5}[0-9]{2}p/'); 
```

/开始和结束模式：“/PATTERN/”

[az]{5} 表示长度为 5 的任何小写字母 az

[0-9]{2} 表示任意 2 位数字

p 的意思是，一个“p” :)

# c - Unix C - 便携式 WEXITSTATUS

> ID：13674660
> 
> 赞同：6
> 
> 时间：2012-12-02T22:32:45.867
> 
> 标签：c, unix, portability, freebsd, openbsd

我正在尝试获取子进程的退出代码。在 Linux 和 FreeBSD 上，我可以这样：

```
[0] [ishpeck@kiyoshi /tmp]$ uname
FreeBSD
[0] [ishpeck@kiyoshi /tmp]$ cat tinker.c 
#include <stdio.h>
#include <sys/wait.h>

int main(void)
{
    FILE *proc = popen("ls", "r");
    printf("Exit code: %d\n", WEXITSTATUS(pclose(proc)));
    return 0;
}
[0] [ishpeck@kiyoshi /tmp]$ gcc tinker.c -o tinker
[0] [ishpeck@kiyoshi /tmp]$ ./tinker
Exit code: 0
[0] [ishpeck@kiyoshi /tmp]$ grep WEXITSTATUS /usr/include/sys/wait.h 
#define WEXITSTATUS(x)  (_W_INT(x) >> 8) 
```

但是，在 OpenBSD 上，我收到了编译器的抱怨……

```
[0] [ishpeck@ishberk-00 /tmp]$ uname   
OpenBSD
[0] [ishpeck@ishberk-00 /tmp]$ cat tinker.c                                    
#include <stdio.h>
#include <sys/wait.h>

int main(void)
{
    FILE *proc = popen("ls", "r");
    printf("Exit code: %d\n", WEXITSTATUS(pclose(proc)));
    return 0;
}
[0] [ishpeck@ishberk-00 /tmp]$ gcc tinker.c -o tinker                          
tinker.c: In function 'main':
tinker.c:7: error: lvalue required as unary '&' operand
[1] [ishpeck@ishberk-00 /tmp]$ grep WEXITSTATUS /usr/include/sys/wait.h        
#define WEXITSTATUS(x)  (int)(((unsigned)_W_INT(x) >> 8) & 0xff) 
```

我真的不在乎它是如何完成的，我只需要退出代码。

这让我相信我在 Mac 上也会遇到这个问题：http: [//web.archiveorange.com/archive/v/8XiUWJBLMIKYSCRJnZK5#F4GgyRGRAgSCEG1](http://web.archiveorange.com/archive/v/8XiUWJBLMIKYSCRJnZK5#F4GgyRGRAgSCEG1)

有没有更便携的方式来使用 WEXITSTATUS 宏？还是有更便携的选择？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-02T22:50:01.730

OpenBSD 的实现在其参数上`WEXITSTATUS`使用地址运算符（一元`&`），有效地要求其参数具有存储空间。您正在使用没有存储空间的函数的返回值调用它，因此编译器会抱怨。

目前尚不清楚 OpenBSD 是否`WEXITSTATUS`符合 POSIX，但可以通过将返回值`pclose()`赋给变量来轻松解决该问题：

```
 int status = pclose(proc);
    printf("Exit code: %d\n", WEXITSTATUS(status)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-05-14T01:55:29.977

作为一些到达这里的人可能不会注意到的细节，**BSD 目标代码**需要该库：

```
#include <sys/wait.h> 
```

我也编译到**Linux**和**BSD**，并且在编译到**Linux**（使用）`WEXITSTATUS`时不需要那个库（我不知道为什么）就可以正常工作，但是在编译到**BSD**时（使用）失败了。**`gcc`**`clang`****

 ***** * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-26T21:09:31.693

如果您的应用程序死亡或以其他方式被终止，则返回状态是虚假的。您需要检查状态以查看退出值是否有效。请参阅 waitpid 的手册页。

```
if(WIFEXITED(status))
{
     use WEXITSTATUS(status);
} else if (WIFSIGNALED(status)) {
     use WTERMSIG(status);
} else {
     oh oh
} 
```****

# python - Python 的 string.format() 和 Unicode

> ID：13674663
> 
> 赞同：16
> 
> 时间：2012-12-02T22:33:09.737
> 
> 标签：python, unicode

我在使用 Python`string.format()`并将 Unicode 字符串传递给它时遇到问题。这类似于[这个较早的问题](https://stackoverflow.com/questions/1545263/utf-8-in-python-logging-how)，除了在我的情况下，测试代码在打印时爆炸，而不是在`logging.info()`调用时爆炸。将相同的 Unicode 字符串对象传递给日志处理程序可以正常工作。

这与旧`%`格式以及`string.format()`. 只是为了确保问题出在字符串对象上，而不是打印与我的终端交互不良，我尝试在打印之前将格式化的字符串分配给一个变量。

```
def unicode_test():
    byte_string = '\xc3\xb4'
    unicode_string = unicode(byte_string, "utf-8")
    print "unicode object type: {}".format(type(unicode_string))
    output_string = "printed unicode object: {}".format(unicode_string)
    print output_string

if __name__ == '__main__':
    unicode_test() 
```

字符串对象似乎假设它正在获取 ASCII。

```
% python -V
Python 2.7.2

% python ./unicodetest.py
unicode object type: <type 'unicode'>
Traceback (most recent call last):
  File "./unicodetest.py", line 10, in <module>
    unicode_test()
  File "./unicodetest.py", line 6, in unicode_test
    output_string = "printed unicode object: {}".format(unicode_string)
UnicodeEncodeError: 'ascii' codec can't encode character u'\xf4' in position 0: ordinal not in range(128) 
```

尝试转换`output_string`为 Unicode 没有任何区别。

> output_string = u"打印的 unicode 对象：{}".format(unicode_string)

我在这里错过了什么吗？字符串对象的文档似乎很清楚，这应该可以在我尝试使用它时起作用。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-02T22:50:47.417

不，这不应该起作用（你能引用文档中这样说的部分吗？），但如果格式模式是 unicode（或者使用旧格式将模式“提升”为 unicode 而不是尝试“降级”），它应该可以工作' 论点）。

```
>>> x = "\xc3\xb4".decode('utf-8')
>>> x
u'\xf4'
>>> x + 'a'
u'\xf4a'
>>> 'a' + x
u'a\xf4'
>>> 'a %s' % x
u'a \xf4'
>>> 'a {}'.format(x)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module> UnicodeEncodeError: 'ascii' codec 
  can't encode character u'\xf4' in position 0: ordinal not in range(128)
>>> u'a {}'.format(x)
u'a \xf4'
>>> print u"Foo bar {}".format(x)
Foo bar ô 
```

编辑：`print`如果无法使用控制台的编码对 unicode 字符串进行编码，则该行可能对您不起作用。例如，在我的 Windows 控制台上：

```
>>> import sys
>>> sys.stdout.encoding
'cp852'
>>> u'\xf4'.encode('cp852')
'\x93' 
```

在 UNIX 控制台上，这可能与您的区域设置有关。`|`如果您重定向输出（例如在 shell 中使用时），它也会失败。大多数此类问题已在 Python 3 中得到修复。

# ruby-on-rails - 表单中的复选框标签

> ID：13674666
> 
> 赞同：0
> 
> 时间：2012-12-02T22:33:30.720
> 
> 标签：ruby-on-rails, ruby, forms, checkbox, helpermethods

我正在寻找以下内容：所有用户的数组（在这种情况下只有 6 个），在他们的名字前面有一个复选框，从而生成游戏的可选玩家列表。

当前代码：

```
<%= form_for @game, url: games_path, :method => "post" do |f| %>
    <%= f.label :name %>
    <%= f.text_field :name, :value => "#{current_user.name}\'s Game" %>
    <%= f.fields_for :participants do |ff| %>
        <%= ff.label :user_id %>
        <%= ff.text_field :user_id %>
        <%= ff.check_box :user_id %>
    <% end %>
    <%= f.submit "Create Game", class: "btn btn-primary" %>
<% end %> 
```

我现在在我的控制器中有*3.times { @game.participants.build }*这有效地为我提供了 3 个文本字段，我可以在其中填写*参与者 ID*，以便在参与者表中记录（与游戏相关联）。

我现在已经四处寻找 1.5 小时，但我似乎无法找到正确的答案。我需要的是一种语法，它为我提供了所有当前用户（比如@users）的列表，并附有一个复选框。当我单击复选框时，它应该将其 ID 添加到参数中，并且我应该能够使用链接的参与者 ID 创建一个新游戏。但是，我遇到了一些附加到 check_box 的 ID 的问题，它似乎总是 1。我读过一些关于复选框对哈希来说很痛苦的东西，但我没有其他解决方案 atm。

我试过：

```
<% @users.each do |i| %>
        <%= check_box_tag "alternate_numbers[#{i}]" %> <%= i.name %><br />
<% end %> 
```

但我看不出有什么办法可以修复表格本身的一部分。

GamesController 代码（编辑）：

```
def new
    @users = User.paginate(page: params[:page])
    @games = current_user.games
    @game = Game.new
    3.times { @game.participants.build }
  end

def create
    @game = Game.new(params[:game])
    @newround = @game.rounds.new
    @newround.storyFragment = "New story!"
    if @game.save && @newround.save
      flash[:success] = "Created!"
      redirect_to game_path(@game.id)
    else
      redirect_to root_url
    end
  end 
```

描述起来非常模糊，因为我不确定如何实现这一点。

简而言之：check_box 应该包含循环中 user_id 的值。我现在正在使用 text_field 助手填写手动 ID，但我希望将复选框链接到视图中旁边的用户名。

任何指南/解决方案/提示？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T00:29:31.030

好的，所以你正在为一个新游戏制作一个表格。您现在必须将新游戏以及一些参与者提供给您的视图。

```
def new
  @game = Game.new
  @participants = User.all # or the users you want
end 
```

现在使用您认为的那些。你走在正确的轨道上。根据您的`create`操作方式：

```
<% @participants.each do |p| %>
  <%= check_box_tag "participants[#{p.id}]" %> <%= p.name %>
<% end %> 
```

我认为您缺少的[是`check_box_tag`](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-check_box_tag). `input`属性`name`就是论据。

您的控制器中似乎也有很多逻辑。请记住将逻辑保留在模型中，并且仅使用控制器将正确的对象提供给您的视图，并将它们用于保存，例如。俗话说，“胖模特，瘦控”。

# maven - Maven 仓库

> ID：13674669
> 
> 赞同：0
> 
> 时间：2012-12-02T22:34:03.667
> 
> 标签：maven

[我在这里](http://thedevelopercorner.blogspot.fr/2007/08/adding-repositories-to-maven-2.html)读到“您添加的存储库越多，您的构建速度就越慢”。真的吗 ？

我认为如果您有依赖项的工件版本在 .m2 文件夹中可用，那么甚至不会查询存储库，如果它不可用，那么 maven 将循环遍历它们直到找到正确的神器，不会再看下去了。因此，无论哪种情况，它都不会消耗额外的带宽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:18:07.823

如[this question所示](https://stackoverflow.com/questions/3560180/how-do-i-prevent-maven-2-from-searching-remote-repositories-for-specific-local-d)在某些情况下，Maven 会在远程存储库中搜索依赖项，即使它已经在您的本地存储库中可用。SNAPSHOT 依赖项或缺少 pom.xml 的依赖项会发生这种情况。所以我只能假设这篇博文可能意味着如果您的构建属于这些类别中的任何一个，Maven 将扫描您在每个构建中定义的远程存储库（实际上对于 SNAPSHOTS，您可以通过启用/禁用来限制 Maven 将扫描的存储库根据需要从每个存储库中获取快照）。如果可以' 找不到它正在寻找的东西，它当然必须在放弃之前扫描所有存储库，这意味着存储库越多，扫描所花费的时间就越多（在 SNAPSHOTS 的情况下，它无论如何都会扫描所有存储库，因为如果它在一个存储库中找到更新版本，则它无法“知道”另一个存储库不会拥有更新的版本）。即使在 Maven 实际找到它寻找的依赖项并停止搜索的情况下，找到依赖项的存储库也可能是最后一个扫描的存储库，因此所有其他存储库都在它之前被扫描。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T03:52:19.253

当您构建项目时，它会转到 m2 存储库以检查 jar 是否已经存在，如果没有，它会从中央存储库下载 jar。因此，如果一旦下载了 jars，构建项目就不会花费时间。

# xcode - 为 NSTableView 添加和删除按钮（Mac Interface Builder）

> ID：13674671
> 
> 赞同：5
> 
> 时间：2012-12-02T22:34:05.417
> 
> 标签：xcode, button, interface-builder

我正在尝试创建类似的东西 ![纽扣](../Images/ee5b32c299147a36614cb225d96fd5a8.png)

但我找不到任何指南或模板。[我在这里](https://stackoverflow.com/questions/10706357/nstableview-with-plus-and-minus-buttons)发现了一个老问题，但我无法按照说明进行操作（我只能制作一个按钮）

我怎样才能让它工作？即使在苹果的文档中我也找不到它......

非常感谢。

# c++ - 井字游戏的 MinMax 简单演示

> ID：13674672
> 
> 赞同：1
> 
> 时间：2012-12-02T22:34:10.550
> 
> 标签：c++, minimax, game-theory, alpha-beta-pruning

我一直在努力弄清楚 MinMax 算法是如何工作的，希望 alpha-beta 修剪算法能够工作。我对发生的递归感到困惑。

*   首先，每个中间板都得分吗？或仅终端游戏板。
*   其次，返回的究竟是什么？程序如何知道下一步该放在哪里？我看到我应该返回棋盘分数（在tictactoe中，-1,0,1）但是程序如何知道接下来应该播放哪个动作。

我曾尝试找到一个简单的 C 或 C++ 程序来证明这一点，但我运气不佳。我正在尝试学习这个算法，我可以为我的计算机编程课的其余部分创建一个演示文稿。

非常感谢！五

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T21:12:55.327

仅对终端位置（静止搜索后）进行评分。非终端位置将递归 minimax() 调用返回的分数与迄今为止返回的最佳分数进行比较。在 alpha-beta 的情况下，返回的分数也会与 alpha 值进行比较。

极小值的关键是产生一个分数。您的错误似乎是认为极小极大搜索功能需要返回最佳移动。它可以这样编码，但是对于您来说，在另一个执行移动、使用 minimax() 生成分数并取消执行移动的函数中使用顶级循环可能会更简单。跟踪得分最高的移动，并在循环完成或选择移动的时间用完时返回该移动。

# android - System.currentTimeMillis() 工作错误

> ID：13674673
> 
> 赞同：1
> 
> 时间：2012-12-02T22:34:14.510
> 
> 标签：android, time, stopwatch

我需要秒表，我使用了[http://www.goldb.org/stopwatchjava.html](http://www.goldb.org/stopwatchjava.html)

它效果不佳，所以我尝试每 1000 毫秒写出一次值：

```
stopWatch.start();
HandlerScrollBar.postDelayed(TtScroll,  1000);

private Runnable TtScroll = new Runnable() {
    public void run() {
        long time = stopWatch.getElapsedTime();
        HandlerScrollBar.postDelayed(TtScroll,(long) 1000);
        Log.d(TAG, Long.toString(time));            
    }
}; 
```

我可以在 CatLog 中看到每秒的时间值，这是结果：

![在此处输入图像描述](../Images/7f2cbf8adbb2bbad4e171c618b0dff41.png)

实时时间最长为 +5 毫秒，但在列中至少为 +3 秒！这怎么可能？这是一样的

```
new Date().getTime(). 
```

是否有一些 StopWatch 类可以按预期通过此测试？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T22:48:27.470

如果您正在测量经过的时间，并且希望它是正确的，则必须使用`System.nanoTime()`. 你不能使用`System.currentTimeMillis()`，除非你不介意你的结果是错误的。

**nanoTime**的目的是测量经过的时间，currentTimeMillis 的目的是测量挂钟时间。您不能将其中一个用于其他目的。原因是没有计算机的时钟是完美的。它总是漂移，偶尔需要纠正。

由于 nanoTime 的目的是测量经过的时间，因此不受任何这些小修正的影响。我建议选择 nanoTime()，因为它在这些微计算中具有更好的准确性。

用于极其精确地测量经过的时间。从它的javadoc：

```
long startTime = System.nanoTime(); 
```

// ... 正在测量的代码 ...

```
long estimatedTime = System.nanoTime() - startTime; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T22:50:19.893

似乎不可能。我从来没有`System.currentTimeMillis()`那样做。此外，您正在注销，`Log.d()`但您显示的 logcat 指示`Log.e()`. 你确定那是正确的 logcat 吗？

# jquery - Wordpress：当 jquery 入队时，如何让 jQuery 脚本工作？

> ID：13674685
> 
> 赞同：0
> 
> 时间：2012-12-02T22:35:50.783
> 
> 标签：jquery, wordpress

我在 header.php 文件中使用了 jQuery 的这个小片段：

```
<script>
jQuery(function($){
 $('#menu-classes h3 a').removeAttr("href");
});
</script> 
```

当我像这样包含 jQuery 时，它工作正常：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script> 
```

但是，如果我将 jQuery 包含在“正确”的 Wordpress 方式（入队）中，则它根本不起作用，如下所示：

```
<?php wp_enqueue_script('jquery'); ?> 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:57:46.127

最好坚持关于脚本的法典。

[wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)

> 使用 wp_enqueue_scripts 操作调用此函数，或使用 admin_enqueue_scripts 在管理端调用它，或使用 login_enqueue_scripts 登录屏幕。

那将是。

```
add_action( 'wp_enqueue_scripts', 'enqueue_theme_scripts' );

function enqueue_theme_scripts() {
 wp_enqueue_script( 'jquery' );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T23:54:55.080

因为正确的方法是在主题中进行`functions.php`，而不是在模板中进行。

正如@Zlatev 指出的那样，它必须封装在一个动作挂钩中。检查 Codex 以了解*真正*的官方方式。

此问答可能会有所帮助：[以正确的方式包含 jQuery 和 jQuery 文件](https://wordpress.stackexchange.com/q/45437/12615)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T00:10:54.240

您还需要在无冲突模式下使用它，

> jQuery(document).ready(function($) { .. stuff ... }

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-02T22:47:23.543

以防万一其他人遇到这个问题：

确保您的脚本包含在`<?php wp_head(); ?>`.

当然，这是在 Wordpress 中包含脚本的非官方方式，例如，如果您使用插件，可能会产生脚本冲突。官方的做法是在functions.php中注册脚本，然后入队。

# heroku - Heroku Toolbelt 安装问题

> ID：13674686
> 
> 赞同：2
> 
> 时间：2012-12-02T22:36:05.483
> 
> 标签：heroku, rvm, heroku-toolbelt

我卸载了 heroku gem 并安装了 Heroku Toolbelt，但在使用 RVM 时遇到了问题。

`heroku version`除了我当前的项目文件夹之外，命令在任何地方都有效。

在我的项目文件夹中，我得到

`'/Users/cmalpeli/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/rubygems_integration.rb:223:in 'block in replace_bin_path': can't find executable heroku (Gem::Exception) from ./bundler_stubs/heroku:16:in``

在我的项目目录中运行`which heroku`返回：

`./bundler_stubs/heroku`

它返回的其他任何地方

`/usr/bin/heroku`

我确信它与 RVM 有一些关系——但我不太明白它是如何工作的，所以希望能得到一些帮助。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T05:11:01.087

确保`heroku`不是你的一部分`Gemfile`——它不应该在那里。

然后删除`./bundler_stubs/heroku`：

```
rm -f ./bundler_stubs/heroku 
```

它可能`./bundler_stubs/heroku`是您项目的一部分并且由您的一位同事提交，存根不应该是项目的一部分。

# git - Git - 回滚到上一个提交

> ID：13674687
> 
> 赞同：1
> 
> 时间：2012-12-02T22:36:10.677
> 
> 标签：git, github

我正在和一个合作伙伴一起做一个 git 项目。我做了一些更改，然后意外添加并提交了比我预期更多的文件，并将它们推送到主存储库。如何将远程存储库回滚到最后一次提交，但保留我的本地副本以便我可以重新添加和正确提交？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T22:43:11.590

您可以告诉`git push`将遥控器推送到特定版本：

```
git push origin HEAD~1:master 
```

解释：

*   `origin`是远程仓库的名称
*   `HEAD~1`是 source-refspec - 要推送的修订。 `HEAD~1`表示当前 local 后面的一个提交`HEAD`。
*   `master`是 target-refspec - 要推送到的远程分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T22:43:53.333

答案取自这里：[如何撤消 Git 中的最后一次提交？](https://stackoverflow.com/questions/927358/undo-last-git-commit)

撤消提交并重做

```
$ git commit ...              (1)
$ git reset --soft HEAD^      (2)
$ edit                        (3)
$ git add ....                (4)
$ git commit -c ORIG_HEAD     (5)
This is what you want to undo

This is most often done when you remembered what you just committed is incomplete, or you misspelled your commit message, or both. Leaves working tree as it was before "reset".

Make corrections to working tree files.

Stage changes for commit.

"reset" copies the old head to .git/ORIG_HEAD; redo the commit by starting with its log message. If you do not need to edit the message further, you can give -C option instead. 
```

# javascript - 如何在js中找到页面中的所有链接并在它们之后添加复选框？

> ID：13674692
> 
> 赞同：-2
> 
> 时间：2012-12-02T22:37:31.913
> 
> 标签：javascript, jquery, checkbox

我知道如何找到所有链接，但我不知道如何在标记后以编程方式注入 html。我认为html最终应该是这样的：

`<a href="http:www.google.com> this is a useful website</a> <input type="checkbox" name="option" >`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T22:39:24.383

您可以在 JQuery 中简单地执行此操作，使用 [`after`](http://api.jquery.com/after/)：

```
$("a").after("<input type='checkbox' name='option' />"); 
```

**编辑**

受 RobG 评论的启发——仅适用于特定链接，更改选择器：

```
// select all a-tags that link to Google
$("a[href='http://www.google.com']") 
```

或者使用某种通配符：

```
// select all a-tags that contain any href tags (ie, exclude anchor tags)
$("a[href]") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T22:46:08.153

或者您可以使用纯 JavaScript 来完成此操作（尽管 jQuery 肯定会简化您的任务）：

```
var links = document.getElementsByTagName('a');

for (var i = 0, len = links.length; i < len; i++) {
    var chk = document.createElement('input');
    chk.type = 'checkbox';
    chk.value = links[i].textContent || links[i].innerText; // or whatever...
    chk.name = chk.value.replace(/(\s+)/g, ''); // or whatever...
    links[i].parentNode.insertBefore(chk, links[i].nextSibling);
} 
```

如果正如对[dbaseman 的回答](https://stackoverflow.com/a/13674706/82548)的评论中提出的那样，您使用某些`a`元素作为锚点，您应该考虑`id`在现有元素上使用 s 作为内部导航的目标，因为虽然命名为空，但`a`它是一种非常古老的技术，甚至IE现在都支持使用`id`s了。

但是，如果无法更改，则可以更改上述内容以合并`if`检查：

```
var links = document.getElementsByTagName('a');

for (var i = 0, len = links.length; i < len; i++) {
    if (links[i].href) {
        var chk = document.createElement('input');
        chk.type = 'checkbox';
        chk.value = links[i].textContent || links[i].innerText; // or whatever...
        chk.name = chk.value.replace(/(\s+)/g, ''); // or whatever...
        links[i].parentNode.insertBefore(chk, links[i].nextSibling);
    }
} 
```

此外，如果您希望将元素细化为`a`给定元素中包含的元素，只需使用特定节点代替`document`第一行：

```
var links = document.getElementById('onlyInThisElement').getElementsByTagName('a'); 
```

`id`首先使用of检索节点，`onlyInThisElement`然后仅在其中搜索`div`元素`a`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T22:50:14.580

您可以使用[links](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-7068919)集合获取页面中的所有链接。然后，您可以通过循环遍历集合并使用[insertBefore](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-952280727)和[nextSibling](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-6AC54C2F)或您希望使用的任何 jQuery 等效项来轻松附加一个复选框。

请注意，链接集合仅包括具有 HREF 属性的 A 元素，它不包括锚点（即具有 NAME 或 ID 且没有 HREF 的 A 元素）。

# matlab - 稀疏矩阵存储空间

> ID：13674696
> 
> 赞同：-1
> 
> 时间：2012-12-02T22:38:03.490
> 
> 标签：matlab, matrix, sparse-matrix

我需要以双数的形式获取稀疏矩阵的存储大小。我需要在运行时获取这些信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T23:05:02.680

您可以使用该命令`whos`获取变量使用的空间。

[http://www.mathworks.fr/fr/help/matlab/ref/whos.html](http://www.mathworks.fr/fr/help/matlab/ref/whos.html)

```
whos var_name

info=whos('var_name'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T23:05:21.927

非零元素连同它们的行索引一起被存储，所以

```
nnz(x); 
```

是一个很好的近似值，因为它返回[非零元素的数量](http://www.mathworks.co.uk/help/matlab/ref/nnz.html)。

如果您的稀疏矩阵变得异常大，您可以检查`nnz`以跟踪可能导致覆盖大量零元素的错误。

所以使用稀疏矩阵的有效性也可以用

```
s=size(m_sparse);
effectiveness = 1 - nnz(x)/(s(1)*s(2)) 
```

# c - 尝试接受套接字连接，检索并处理一条消息，然后将此消息写入终端

> ID：13674698
> 
> 赞同：1
> 
> 时间：2012-12-02T22:38:19.150
> 
> 标签：c, file, sockets, stream, file-descriptor

我需要编写一个程序来通过套接字检索和处理消息。我没有麻烦并且了解创建套接字，绑定套接字，监听传入连接然后接受它的过程。我无法从为接受的连接创建的文件流中接收消息。我的代码如下（我已经包含了几乎所有内容以供参考，但我认为问题出现在连接被接受之后......）：

```
int sockfd; // the socket file descriptor
int conn_fd; // the accepted connection file descriptor
FILE *conn_fs; // the file stream for the accepted connection
char *conn_buff;
//char conn_buff[LINE_MAX]; // a buffer to store the data received from the accepted connection

int main(int argc, char *argv[]) {
int port = 0;
if ((argc != 2) || (sscanf(argv[1], "%d", &port) != 1)) {
    fprintf(stderr, "Usage: %s [PORT]\n", argv[0]);
    exit(1);
}

if (port < 1024) {
    fprintf(stderr, "Port must be greater than 1024\n");
    exit(1);
}

struct sockaddr_in servaddr; // socket address structure (socket in address)
// set all bytes in socket address structure to zero, and fill in the relevant data members
memset(&servaddr, 0, sizeof(servaddr));
servaddr.sin_family = AF_INET;
servaddr.sin_addr.s_addr = htonl(INADDR_ANY);
servaddr.sin_port = htons(port); // port is the first argument given in the terminal

// tell the user the servaddr structure has been initialised.
//printf("servaddr structure has been initialised..\n\ncreating socket..\n");

// create the socket using IPv4 (AF_INET) and 2-way comms (SOCK_STREAM)
if ((sockfd = socket(AF_INET, SOCK_STREAM, 0)) < 0) { // socket() returns < 0 if an error occurs
    printf("error: creating the socket..\nexitting..\n");
    exit(EXIT_FAILURE);
}

// tell the user the socket has been created
//printf("socket created..\n\nbinding socket..\n"); 

// bind the socket to the socket address structure defined above
if (bind(sockfd, (struct sockaddr *) &servaddr, sizeof(servaddr)) < 0) { // bind() returns < 0 if an error occurs
    printf("error: binding the socket..\nexitting..\n");
    exit(EXIT_FAILURE);
}

// tell the user the socket is "bound"
//printf("socket is now \"bound\"..\n\nmarking the socket as passive..\n");

// set the socket to accept incoming connections (listen)
if (listen(sockfd, SOMAXCONN) < 0) { // listen() returns < 0 if an error occurs
    printf("error: marking the socket as a passive socket in the function listen()..\nexitting..\n");
    exit(EXIT_FAILURE);
}

// tell the user the socket is listening for incoming connections
printf("socket is now passive (listening)..\n\naccepting incoming connections..\n");

// accept an incoming connection
if (conn_fd = accept(sockfd, NULL, NULL) < 0) { // accept() returns < 0 if an error occurs
    printf("error: accepting an incoming connection..\nexitting..\n");
    exit(EXIT_FAILURE);
}

// tell the user a connection has been accepted
printf("a connection has been accepted..\n\ncreating a file stream for this connection..\n");
    /*
// open a file stream associated with conn_fd
if ((conn_fs = fdopen(conn_fd, "r+")) == NULL) { // fdopen() returns NULL if an error occurs
    printf("error: associating a stream to the connections file descriptor in the function fdopen()..\nexitting..\n");
    exit(EXIT_FAILURE);
}

    // echo out the incoming message
    /*while (fgets(conn_buff, LINE_MAX, conn_fd) != NULL) { // fill the conn_buff buffer with data from the file stream conn_fs. returns NULL on error or EOF
    //while (read(conn_fd,conn_buff,sizeof(char)*LINE_MAX) > 0) {
        printf(conn_buff);printf("OH HAIIIIIIIIIIIIIIIIIIIIIIIIII\n");
    } printf("OH HAI\n");*/        

    size_t len = 100;
    ssize_t read;
    while ((read = getline(&conn_buff, &len, conn_fs)) != -1) {
        printf("Retrieved line of length %zu :\n", read);
        printf("%s", conn_buff);
    }

    free(conn_buff);

    // check if there was an error
    if (ferror(conn_fs) != 0) { // returns nonzero if the error indicator is set for conn_fs (eg, if fgets() above returned NULL due to an error)
        printf("error: an error occurred whilst retrieving data from the stream..\nexitting..\n");
        exit(EXIT_FAILURE);
    }

// close the file stream associated with conn_fd
if (close((int) conn_fs) != 0) { // close the file stream
    printf("error: closing the file stream..\nexitting..\n");
    exit(EXIT_FAILURE);
}

exit(EXIT_SUCCESS);
} 
```

`while ((read = getline(...`当我运行程序时，它会在循环内停止。如果我按回车键刷新缓冲区，那么我会从终端获得“Retrieved line of length 1:”。我发现该程序（由于某种我无法理解的原因）是从标准输入读取的。它等待我输入任何内容，一旦我刷新缓冲区（即按回车键），它就会将其全部发回给我。关闭程序的唯一方法是使用 Ctrl+C。因此，我认为我的`if ((conn_fs = fdopen(conn_fd, "r+")) == NULL) {`陈述有问题。

我尝试了许多不同的从流中读取的方法（fread()、read()、getline()、fgets()、fgetc()...），它们都具有相同的效果。然后当我意识到问题一定是我如何打开文件流时，我尝试使用 fopen() 但无济于事。

我可能犯了一个愚蠢的错误，但有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:51:09.593

客户端永远不会关闭连接。

# php - 由于Javascript而动态加载页面时出现白色闪烁

> ID：13674700
> 
> 赞同：0
> 
> 时间：2012-12-02T22:38:43.143
> 
> 标签：php, javascript, dynamically-generated

我用 php 动态加载我的页面。

只有我的内容 div 中的信息会发生变化。

我有一个脚本可以在刷新时更改背景图像。但是当您浏览该站点时，它会发出白色闪光。

```
var totalCount = 6;
function ChangeBackground()
{
    var num = Math.ceil( Math.random() * totalCount );
    document.body.background = 'background/test/'+num+'.jpg';
} 
```

我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T22:41:40.607

我假设这是浏览器加载图像并尝试在完全下载之前显示它的问题。

查看[这篇文章](http://www.techrepublic.com/article/preloading-and-the-javascript-image-object/5214317)，了解有关在显示之前预加载图像的信息。

# bash - 计算 bash shell 脚本中的换行符

> ID：13674705
> 
> 赞同：2
> 
> 时间：2012-12-02T22:39:11.047
> 
> 标签：bash, shell

我根本无法让这个脚本工作。我只是想在不使用 wc 的情况下计算文件中的行数。这是我到目前为止所拥有的

```
FILE=file.txt
lines=0
while IFS= read -n1 char
do
if [ "$char" == "\n" ]
then
lines=$((lines+1))
fi
done < $FILE 
```

这只是一个更大的脚本的一小部分，它应该计算文件中的总字数、字符和行数。我无法弄清楚。请帮忙

问题是 if 语句条件永远不会为真。就好像程序无法检测到 '\n' 是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T23:14:42.753

你有两个问题。它们固定在以下位置：

```
#!/bin/bash
file=file.txt
lines=0
while IFS= read -rN1 char; do
if [[ "$char" == $'\n' ]]; then
    ((++lines))
fi
done < "$file" 
```

一个问题是`$'\n'`在测试中，另一个更微妙的是，您需要使用`-N`开关，而不是`-n`读取中的那个（`help read`更多信息）。哦，您还想使用该`-r`选项（当您的文件中有反斜杠时，请检查是否有反斜杠）。

我改变的小事：使用更健壮`[[...]]`的小写变量名（使用大写变量名被认为是不好的做法）。用算术`((++lines))`代替傻`lines=$((lines+1))`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T02:14:24.443

```
declare -i lines=0 words=0 chars=0
while IFS= read -r line; do
    ((lines++))
    array=($line)               # don't quote the var to enable word splitting
    ((words += ${#array[@]}))
    ((chars += ${#line} + 1))   # add 1 for the newline
done < "$filename"
echo "$lines $words $chars $filename" 
```

# php - 如何使用 PHP 将通过 file_get_contents 读取的 pdf 文件数据转换为可读的 utf-8 字符集格式

> ID：13674709
> 
> 赞同：0
> 
> 时间：2012-12-02T22:39:34.937
> 
> 标签：php, pdf, character-encoding, file-get-contents, iconv

我正在尝试从**.pdf**文件中读取和处理内容。此过程的目标是不使用原始 PHP 引导安装未附加的任何无关库。我尝试使用**file_get_contents**将读取的内容存储到字符串变量。问题出在**echo** -ing 这个内容上，都是胡言乱语。

我可以说，这是意料之中的，因为字符编码与浏览器支持的格式不同。我尝试使用 PHP 的**iconv**函数将编码从 ASCII 转换为 utf-8，CP1252 转换为 utf-8，反之亦然，但没有产生可读的输出.

所以问题是，与**.pdf**文件相关的字符编码是什么，以及如何将读取的内容从这些文件转换为浏览器支持的字符编码。谢谢。

# java - 两个节点之间的最短路径数

> ID：13674710
> 
> 赞同：-4
> 
> 时间：2012-12-02T22:39:37.843
> 
> 标签：java, shortest-path

我使用一个二维数组来存储网络的距离。`1`表示两个节点之间有连接，`0`表示没有连接：

```
 A     B    C   D

A    0     1    1   0   

B    1     0    0   1 

C    1     0    0   1

D    0     1    1   0 
```

![这是我想根据上面的数组向你展示的网络](../Images/b8516a70f63faeb433c924c710c8bc2c.png).

我想使用 Java 来查找最短路径的数量。例如，从节点 A 到节点 D 有 2 条路径。节点 B 到节点 C 也有 2 条路径。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T22:43:22.740

您遇到的问题称为“寻路”或“寻路”。有很多股票算法可以用来解决它。例如：

*   [Dijkstras 算法](http://en.wikipedia.org/wiki/Dijkstras_algorithm)
*   [A* 算法](http://en.wikipedia.org/wiki/A_star)

# .net - vb .net 自定义组件图标

> ID：13674712
> 
> 赞同：0
> 
> 时间：2012-12-02T22:40:02.913
> 
> 标签：.net, vb.net

如何向我的自定义组件添加图标，以显示在工具箱上？我有用vb设计的组件，我应该先制作一些dll还是activex？（我不喜欢，因为我还在开发）

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T03:38:45.673

```
 // [ToolboxBitmap(typeof(TextBox))]  // set default icons
    [ToolboxBitmap(@"C:\Documents and Settings\Joe\MyPics\myImage.bmp")]  // set own icons 
```

示例覆盖文本框：

```
private bool IsNum = true;

[ToolboxBitmap(typeof(TextBox))] 
        [PropertyTab("IsNumaric")]
        [DisplayName("IsNumaricTextBox")]
        [Category("EmsoftBehaviors")]
        [Description("If this is 'True' then textbox accept only numbers")]
        public bool IsNumaricTextBox
        {
            set
            {
                IsNum = value;
            }
            get
            {
                return IsNum;
            }
        } 
```

# iphone - Parse.com：带有 PFUser 的 PFQueryTableViewController

> ID：13674716
> 
> 赞同：0
> 
> 时间：2012-12-02T22:40:25.583
> 
> 标签：iphone, objective-c, ios, parse-platform

我在我的 iOS 应用程序中使用 Parse.com 框架。我想在一个`UITableView`. 我读到我可以使用`PFQueryTableViewController`来从解析云中查询数据并将其保存在`UITableView`. 我如何使用`PFQueryTableViewController`来查询`User`类`usernames`在 的一个部分中`UITableView`，以及在`friends`的`currentUser`另一部分中的`UITableView`，`friends`是我让每个`PFUser`人都拥有的数组变量。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:09:07.503

该类`PFQueryTableViewController`实际上仅用于单个查询-您的要求需要执行两个查询（一个用于`currentUsers`的朋友，一个用于所有`User`的`username`s。如果我是您，我将实现自己的表视图控制器分别在后台执行两个查询，并管理它自己的调用，以`reloadData`何时从 Parse 的每个部分返回数据`tableView`。

# algorithm - 简单：通过迭代法求解 T(n)=T(n-1)+n

> ID：13674719
> 
> 赞同：14
> 
> 时间：2012-12-02T22:40:42.907
> 
> 标签：algorithm, iteration

有人可以帮我吗？

> **使用迭代法求解。** T(n) = T(n-1) +n

步骤的解释将不胜感激。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-02T22:47:00.643

```
T(n) = T(n-1) + n

T(n-1) = T(n-2) + n-1

T(n-2) = T(n-3) + n-2 
```

依此类推，您可以在 T(n) 中替换 T(n-1) 和 T(n-2) 的值，以大致了解该模式。

```
T(n) = T(n-2) + n-1 + n

T(n) = T(n-3) + n-2 + n-1 + n
.
.
.

T(n) = T(n-k) + kn - k(k-1)/2    ...(1) 
```

对于基本情况：

```
n - k = 1 so we can get T(1) 
```

=> k = n - 1
替换 (1)

```
 T(n) = T(1) + (n-1)n - (n-1)(n-2)/2 
```

您可以看到它的阶数为 n ² => O(n ² )。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-02T22:43:11.763

展开它！

```
T(n) = T(n-1) + n = T(n-2) + (n-1) + n = T(n-3) + (n-2) + (n-1) + n 
```

以此类推，直到

```
T(n) = 1 + 2 + ... + n = n(n+1)/2   [= O(n^2)] 
```

前提是`T(1) = 1`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T22:47:09.543

在使用迭代的伪代码中：

```
function T(n) {
    int result = 0;

    for (i in 1 ... n) {
       result = result + i;
    }

    return result;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-22T19:50:26.837

另一种解决方案：

```
T(n) = T(n-1) + n
     = T(n-2) + n-1 + n
     = T(n-3) + n-2 + n-1 + n
     // we can now generalize to k
     = T(n-k) + n-k+1 + n-k+2 + ... + n-1 + n
     // since n-k = 1 so T(1) = 1
     = 1 + 2 + ... + n    //Here 
     = n(n-1)/2
     = n^2/2 - n/2
     // we take the dominating term which is n^2*1/2 therefor 1/2 = big O
     = big O(n^2) 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-12-01T14:11:27.603

**简易方法：**

```
T (n) = T (n - 1) + (n )-----------(1)
 //now submit T(n-1)=t(n)

T(n-1)=T((n-1)-1)+((n-1))
T(n-1)=T(n-2)+n-1---------------(2)

now submit (2) in (1) you will get
i.e T(n)=[T(n-2)+n-1]+(n)
T(n)=T(n-2)+2n-1 //simplified--------------(3)

 now, T(n-2)=t(n)
T(n-2)=T((n-2)-2)+[2(n-2)-1]
  T(n-2)=T(n-4)+2n-5---------------(4)
  now submit (4) in (2) you will get
   i.e T(n)=[T(n-4)+2n-5]+(2n-1)
  T(n)=T(n-4)+4n-6 //simplified
    ............
 T(n)=T(n-k)+kn-6
  **Based on General form T(n)=T(n-k)+k, **
  now, assume n-k=1 we know T(1)=1
            k=n-1

    T(n)=T(n-(n-1))+(n-1)n-6
    T(n)=T(1)+n^2-n-10
   According to the complexity 6 is constant

         So , Finally O(n^2) 
```

# qsub - 什么是“千兆字节秒”？

> ID：13674729
> 
> 赞同：9
> 
> 时间：2012-12-02T22:42:38.080
> 
> 标签：qsub, sungridengine

从 qstat (Sun Grid Engine) 联机帮助页：

> mem：作业的当前累积内存使用量，以 Gbytes 秒为单位。

这意味着什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-30T18:31:55.057

我找不到比可以找到该描述的手册页更好的文档。我认为 1 GB 秒是 1 GB 内存使用一秒。因此，如果您的代码使用 1 GB 1 分钟，然后使用 2 GB 两分钟，则累积的内存使用量为 1*60 + 2*120 = 300 GByte 秒。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-12-16T21:07:45.210

千兆字节-秒单位指定任务运行时每秒分配给该任务的内存量。

例子：

> *   **任务 1：** 1 GB * 10 秒 = 10 GB-秒
>     
>     
> *   **任务 2：** 0.128 MB * 10 秒 ~ 0.128 GB * 10 秒 = 1.28 gb-sec
>     
>     
> *   **任务 3：** 8 GB * 10 秒 = 80 GB-秒

在实践中，它通常用作 devops 指标或计费服务的方式，这些服务旨在在短时间内运行然后终止，例如 PaaS 云上的无服务器功能服务。

# php - 将数据从兄弟节点检索到匹配的节点

> ID：13674731
> 
> 赞同：3
> 
> 时间：2012-12-02T22:42:50.947
> 
> 标签：php, xml, xpath, simplexml, siblings

我正在使用 SimpleXML 遍历 xml 文档。我有一个带有 id 的数组（$ids），我正在检查 XML（工作表/表/行/单元格/数据）中是否存在匹配项。如果匹配，我希望能够从以下两个兄弟姐妹那里获取数据，但我不知道如何。

**从php：**

```
// $ids <---- array('8', '53', '38')

foreach ($thePositions->Worksheet->Table->Row as $row) {

    if($row->Cell->Data == true) {

        for ($i = 0; $i < count($ids); $i++) {
            foreach($row->Cell->Data as $data) {

                if ($data == $ids[$i]) {
                    echo 'match!';

                    /* 
                       Tried $siblings = $data->xpath('preceding-sibling::* | following-sibling::*');
                       but doesn't seem to work in this case.
                    */
                }
            }
        }
    }
} 
```

**xml：**

```
<?xml version="1.0"?>
<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:o="urn:schemas-microsoft-com:office:office"
 xmlns:x="urn:schemas-microsoft-com:office:excel"
 xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:html="http://www.w3.org/TR/REC-html40">
 <DocumentProperties xmlns="urn:schemas-microsoft-com:office:office">
  <LastAuthor>Herpa Derp </LastAuthor>
  <Created>2012-09-25T13:44:01Z</Created>
  <LastSaved>2012-09-25T13:48:24Z</LastSaved>
  <Version>14.0</Version>
 </DocumentProperties>
 <OfficeDocumentSettings xmlns="urn:schemas-microsoft-com:office:office">
  <AllowPNG/>
 </OfficeDocumentSettings>
 <ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel">
  <WindowHeight>14060</WindowHeight>
  <WindowWidth>25040</WindowWidth>
  <WindowTopX>25540</WindowTopX>
  <WindowTopY>4100</WindowTopY>
  <Date1904/>
  <ProtectStructure>False</ProtectStructure>
  <ProtectWindows>False</ProtectWindows>
 </ExcelWorkbook>
 <Styles>
  <Style ss:ID="Default" ss:Name="Normal">
   <Alignment ss:Vertical="Bottom"/>
   <Borders/>
   <Font ss:FontName="Calibri" x:Family="Swiss" ss:Size="12" ss:Color="#000000"/>
   <Interior/>
   <NumberFormat/>
   <Protection/>
  </Style>
  <Style ss:ID="s62">
   <Font ss:FontName="Courier" ss:Color="#000000"/>
  </Style>
 </Styles>
 <Worksheet ss:Name="Workbook1.csv">
  <Table ss:ExpandedColumnCount="5" ss:ExpandedRowCount="79" x:FullColumns="1"
   x:FullRows="1" ss:DefaultColumnWidth="65" ss:DefaultRowHeight="15">
   <Column ss:Index="2" ss:AutoFitWidth="0" ss:Width="43"/>
   <Column ss:AutoFitWidth="0" ss:Width="113"/>
   <Column ss:Index="5" ss:AutoFitWidth="0" ss:Width="220"/>
   <Row ss:Index="6">
    <Cell ss:Index="3" ss:StyleID="s62"/>
   </Row>
   <Row>
    <Cell ss:Index="3" ss:StyleID="s62"/>
   </Row>
   <Row>
    <Cell ss:Index="3" ss:StyleID="s62"/>
   </Row>
   <Row>
    <Cell ss:Index="2"><Data ss:Type="String">id</Data></Cell>
    <Cell ss:StyleID="s62"><Data ss:Type="String">latitude</Data></Cell>
    <Cell><Data ss:Type="String">longitude</Data></Cell>
   </Row>
   <Row>
    <Cell ss:Index="2"><Data ss:Type="Number">8</Data></Cell>
    <Cell ss:StyleID="s62"><Data ss:Type="Number">57.4999</Data></Cell>    // to be saved to $latutude
    <Cell><Data ss:Type="Number">15.8280</Data></Cell>    // to be saved to $longitude
   </Row>
   <Row>
    <Cell ss:Index="2"><Data ss:Type="Number">38</Data></Cell>
    <Cell><Data ss:Type="Number">56.5659</Data></Cell>
    <Cell><Data ss:Type="Number">16.1380</Data></Cell>
   </Row> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T23:36:03.463

看起来在这种 XML 的情况下，单元格总是按相同的顺序排列，因此可以按如下方式完成：

```
$ids = array('8', '53', '38');
foreach ($xml->Worksheet->Table->Row as $row) {
    $children = $row->children();
    if (count($children) == 3 && in_array(((string) $children[0]->Data), $ids)) {
        echo 'lat: ' . $children[1]->Data . ' lng: ' . $children[2]->Data . "\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T00:00:36.267

要求兄弟姐妹不起作用的原因是`<Data>`元素不是兄弟姐妹。他们更像是表亲——相邻`<Cell>`元素的孩子。

出于同样的原因，您不应该使用`foreach($row->Cell->Data as $data)`，因为这相当于`foreach($row->Cell[0]->Data as $data)`，即查看`<Data>`第一个节点的所有子`<Cell>`节点。由于 a 中只有一个`<Data>`元素`<Cell>`，您不妨只写`$data = $row->Cell[0]->Data`- 在这种情况下很好，因为您要查找的值位于行的开头。

您实际需要做的是遍历`<Cell>`s：`foreach($row->Cell as $cell) { $data = $cell->Data; /* ... */ }`

然后，您有几个选项可用于查找相邻单元格，包括 XPath。一种更“PHP-ish”的方式是使用数组索引（兄弟在 SimpleXML 循环/数组访问中以数字方式索引）：

```
foreach($row->Cell as $cell_index => $cell)
{
    $data = $cell->Data;
    if ($data == $ids[$i])
    {
        // Tip: always cast SimpleXML objects to string when you're done with their magic XMLiness
        $latitudes[$i] = (string)$row->Cell[ $cell_index + 1 ]->Data;
        $longitudes[$i] = (string)$row->Cell[ $cell_index + 2 ]->Data;
    }
} 
```

或者，您可以依赖您的 ID 始终位于第一列，而 lat 和 long 在接下来的两列中（毕竟这是一个电子表格！）并完全避免内部循环：

```
if ( $row->Cell[0]->Data == $ids[$i] )
{
    $latitudes[$i] = (string)$row->Cell[1]->Data;
    $longitudes[$i] = (string)$row->Cell[2]->Data;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T00:47:33.457

您可以完全在 XPath 中完成，无需任何循环，例如：

```
//Row[Cell/Data[. = '8' or . = '53' or . = '38']]/following-sibling::*[position() <= 2] 
```

在任何数据元素中搜索具有 id 的所有行，然后获取接下来的两个兄弟。

或者

```
//Row[Cell[1]/Data[. = '8' or . = '53' or . = '38']]/following-sibling::*[position() <= 2] 
```

如果确定 id 总是在第一个单元格中。（这也可以防止由于 id 与经度/经度相同而导致的错误）

或者

```
//Row[Cell[@ss:Index = "2"]/Data[. = '8' or . = '53' or . = '38']]/following-sibling::*[position() <= 2] 
```

如果 id 在索引为 2 的单元格中。

但在所有情况下，您都需要正确初始化命名空间

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T14:42:32.243

如果您有很多要匹配的 ID，另一种方法是根据其 ID 创建所有行的“散列”，然后查看该散列而不是循环搜索匹配项。

```
// Initialise an empty array to use as the hash
$rows_by_id = array();

// Loop over all the rows in the spreadsheet
foreach ($thePositions->Worksheet->Table->Row as $row) {
    // Skip rows with less than 3 cells
    if ( count($row->Cell) < 3 ) {
        continue;
    }

    // Take the ID from the first cell on the row
    $id = (string)$row->Cell[0]->Data;

    // Add this row to the hash, identified by it's ID
    $rows_by_id[$id] = array(
        'latitude'  => (string)$row->Cell[1]->Data,
        'longitude' => (string)$row->Cell[2]->Data
    );

    // Or if your IDs are not unique, and you want all matches:
    // $rows_by_id[$id][] = array( ... )
}

foreach ( $ids  as $required_id ) {
    // Retrieve the results from the hash
    if ( isset($rows_by_id[$required_id]) ) { 
        $matched_row = $rows_by_id[$required_id];

        echo "ID $required_id has latitude {$matched_row['latitude']} and longitude {$matched_row['longitude']}.\n";
    }
    else {
        echo "ID $required_id was not matched. :(\n";
    }

    // If you have non-unique matches, you'll need something like this:
    // $all_matched_rows = $rows_by_id[$required_id]; ... foreach ( $all_matched_rows as $matched_row )
} 
```

# mysql - MYSQL - 不正确的语法

> ID：13674740
> 
> 赞同：0
> 
> 时间：2012-12-02T22:43:23.937
> 
> 标签：mysql, stored-procedures

```
WHILE x > 1 DO
SET x = x - 1;    
SET totalTime =  SELECT CONCAT(FLOOR(HOUR(TIMEDIFF(end_time,start_time)) / 24), ' days ',

MOD(HOUR(TIMEDIFF(end_time,start_time)), 24), ' hrs ',

MINUTE(TIMEDIFF(end_time,start_time)), ' minutes ') AS total_Time 
```

我不明白为什么我有语法错误？

这是一个更大程序的一部分，但指出这个 aa 是不正确的

错误信息：SQL 错误 (1064)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 11 行的 'SELECT CONCAT(FLOOR(HOUR(TIMEDIFF(end_time,start_time)) / 24,'days',' 附近使用正确的语法

并且 totalTime 被声明为 VARCHAR(50)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T02:13:13.813

`SELECT`如果要设置变量的值，则不需要使用关键字。

```
SET totalTime = CONCAT(FLOOR(HOUR(TIMEDIFF(end_time,start_time)) / 24), ' days ',

MOD(HOUR(TIMEDIFF(end_time,start_time)), 24), ' hrs ',

MINUTE(TIMEDIFF(end_time,start_time)), ' minutes '); 
```

如果要使用`SELECT`关键字，那么正确的语法是：

```
SELECT CONCAT(FLOOR(HOUR(TIMEDIFF(end_time,start_time)) / 24), ' days ',

MOD(HOUR(TIMEDIFF(end_time,start_time)), 24), ' hrs ',

MINUTE(TIMEDIFF(end_time,start_time)), ' minutes ') INTO totalTime; 
```

记下添加的代码`INTO variable name`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T23:00:42.690

我认为可能是，因为`FLOOR`,`HOUR`等`TIMEDIFF`需要一个环境，`SELECT`例如：

```
WHILE x > 1 DO
SET x = x - 1;    
SET totalTime =  SELECT CONCAT( SELECT FLOOR( SELECT HOUR( SELECT TIMEDIFF(end_time,start_time)) / 24), ' days ',

SELECT MOD( SELECT HOUR( SELECT TIMEDIFF(end_time,start_time)), 24), ' hrs ',

SELECT MINUTE(SELECT TIMEDIFF(end_time,start_time)), ' minutes ') AS total_Time 
```

否则它可能不会将此 Words 解释为一种函数调用并引发“保留字”错误。（我假设`END WHILE;`您的代码中已经存在。）请检查并告诉我。

# algorithm - 交替拆分运算符方法

> ID：13674754
> 
> 赞同：0
> 
> 时间：2012-12-02T22:44:44.680
> 
> 标签：algorithm, fortran90

以下是我本周末为一些介绍性研究工作准备的一维水文代码（使用带有 Strang 分裂的哈密顿方法来演化变量 p & q）

```
 do
       if(num==1) then
          p2   = p(i) - (dt/2.)*q(i)/abs(q(i))   ! half step in P
          q(i) = q(i) + dt*p2                    ! full step in Q
          p(i) = p2 - (dt/2.)*q(i)/abs(q(i))     ! half step in P
          num=2
       elseif(num==2) then
          q2   = q(i) + (dt/2.)*p(i)             ! half step in Q
          p(i) = p(i) - dt*q2/abs(q2)            ! full step in P
          q(i) = q(i) + (dt/2.)*p(i)             ! half step in Q
          num=1
       endif
       t = t+dt
       if(t >= tend) exit
    enddo 
```

有没有比我这里更有效的方法来交替两种算法（这是减少虚假数据所必需的）？如果重要的话，p 和 q 每个大约有 100,000 个单元（代码是并行化的）。

编辑：我添加了`do`代码的 -loop 部分，而不仅仅是`if-elseif`部分。之后还有一个写入文件部分`endif`，但我认为这对于潜在的优化不是必需的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T17:06:12.987

我会重写代码以完全删除`if/then/else`：

```
integer :: num_steps, k
logical :: one_more

num_steps = tend/dt
one_more = (mod(num_steps,2) /= 0)

do k = 1,num_steps/2
   p2   = p(i) - (dt/2.)*q(i)/abs(q(i))   ! half step in P
   q(i) = q(i) + dt*p2                    ! full step in Q
   p(i) = p2 - (dt/2.)*q(i)/abs(q(i))     ! half step in P
   ! output
   q2   = q(i) + (dt/2.)*p(i)             ! half step in Q
   p(i) = p(i) - dt*q2/abs(q2)            ! full step in P
   q(i) = q(i) + (dt/2.)*p(i)             ! half step in Q
   ! output
enddo

if (one_more) then
   p2   = p(i) - (dt/2.)*q(i)/abs(q(i))   ! half step in P
   q(i) = q(i) + dt*p2                    ! full step in Q
   p(i) = p2 - (dt/2.)*q(i)/abs(q(i))     ! half step in P
   ! output
endif 
```

`t = t+dt`如果您需要输出操作的当前时间，您仍然可以在循环中的每个步骤之后使用该语句。

# android - getWritableDatabase() -Nullpoiter 异常 (android)

> ID：13674758
> 
> 赞同：2
> 
> 时间：2012-12-02T22:45:07.673
> 
> 标签：android, nullpointerexception, getwritabledatabase

每当我启动数据库时，我的应用程序就会崩溃。我已经为此工作了几天。（我在`databaseAdapter.java`这里只输入我的文件的重要代码片段）。我在`getWritableDatabase()`:中收到错误消息`NullPointerException`。

```
 private SQLiteDatabase db;
  static final boolean assertionsDisabled = false;
  private DBHelper dbHelper;
  // private Context context;

  public DatabaseAdapter(Context context) {
  dbHelper = new DBHelper(context, DATABASE_NAME, null, DATABASE_VERSION);
  }

  private static class DBHelper extends SQLiteOpenHelper {
  public DBHelper(Context context, String name, CursorFactory factory, int version) {
    super(context, name, factory, version);
  }

  @Override
  public void onCreate(SQLiteDatabase db) {

    try {
        db.execSQL(CREATE_TABLE_ENTRIES);
        //db = DBHelper.getWritableDatabase();

    } catch (SQLException e) {
    e.printStackTrace();
}
}

    @Override   
    public void onUpgrade(SQLiteDatabase db, int i, int j)
    {

        Log.w("mytag", (new StringBuilder("Upgrading from version ")).append(i).append(" to ").append(j).append(", which will destroy all old data").toString());
        db.execSQL("DROP TABLE IF EXISTS CREATE TABLE IF NOT EXISTS entries (_id INTEGER PRIMARY KEY AUTOINCREMENT, input_type INTEGER NOT NULL, activity_type INTEGER NOT NULL, date_time DATETIME NOT NULL, duration INTEGER NOT NULL, distance FLOAT, avg_pace INTEGER, avg_speed INTEGER,calories INTEGER, climb INTEGER, avg_heartrate INTEGER, comment TEXT, privacy INTEGER, gps_data BLOB );");
        onCreate(db);
    }

    }

     public DatabaseAdapter open()
     throws SQLException
      {
     db = dbHelper.getWritableDatabase();
 return this;
     } 
```

///////////////////////////////////////// //////////////////

编辑 1：我从 ActivityManualInput.java 代码中调用 databaseAdapter.java ///////////////////// 这是 ActivityManualInput.java 中的代码片段数据库适配器被称为

```
 public class ActivityManualInput extends ListActivity {

          //  Some code here
      private Context mContext;

          // Some code here          

         protected void onCreate(Bundle savedInstanceState) {
    //TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    setContentView(R.xml.manualinput);   

             // Some code here  

         Button btn = ((Button) findViewById(R.id.btnSave));

     View.OnClickListener myListener; 

    myListener= new View.OnClickListener(){
        @Override
    public void onClick(View v)
    {

  //  mDateTime = new GregorianCalendar(mYear, mMonth, mDay, mHour, mMinute);       
            mDateTime = new GregorianCalendar(2, 3, 1, 4,5);

    db = new DatabaseAdapter(mContext);
    db.open();
    // long id = db.insertEntry(mInputType, mActivityType, mDateTime, mDuration, mDistance, mCalories, mComment);
    long id = db.insertEntry(3, 3, mDateTime, 4, 5, 5, "ant");
    db.close();
    Toast.makeText(getApplicationContext(), "Entry #" + id + "Saved!", Toast.LENGTH_SHORT)
    .show();
    finish();
    }   
    };

    btn.setOnClickListener(myListener); 
```

///////// 日志文件...... /////////////////////

```
 12-03 06:03:00.318: W/dalvikvm(270): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
       12-03 06:03:00.318: E/AndroidRuntime(270): Uncaught handler: thread main exiting due to uncaught exception
       12-03 06:03:00.398: E/AndroidRuntime(270): java.lang.NullPointerException
       12-03 06:03:00.398: E/AndroidRuntime(270):   at        android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:98)
       12-03 06:03:00.398: E/AndroidRuntime(270):   at com.android.saud.lab3.DatabaseAdapter.open(DatabaseAdapter.java:147) 
       12-03 06:03:00.398: E/AndroidRuntime(270):   at com.android.saud.lab3.ActivityManualInput$1.onClick(ActivityManualInput.java:85)
       12-03 06:03:00.398: E/AndroidRuntime(270):   at android.view.View.performClick(View.java:2364)
       12-03 06:03:00.398: E/AndroidRuntime(270):   at android.view.View.onTouchEvent(View.java:4179)
       12-03 06:03:00.398: E/AndroidRuntime(270):   at android.widget.TextView.onTouchEvent(TextView.java:6541)
       12-03 06:03:00.398: E/AndroidRuntime(270):   at android.view.View.dispatchTouchEvent(View.java:3709)
       12-03 06:03:00.398: E/AndroidRuntime(270):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
       12-03 06:03:00.398: E/AndroidRuntime(270):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
       12-03 06:03:00.398: E/AndroidRuntime(270):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
       12-03 06:03:00.398: E/AndroidRuntime(270):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
       12-03 06:03:00.398: E/AndroidRuntime(270):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
       12-03 06:03:00.398: E/AndroidRuntime(270):   at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
       12-03 06:03:00.398: E/AndroidRuntime(270):   at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
       12-03 06:03:00.398: E/AndroidRuntime(270):   at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
       12-03 06:03:00.398: E/AndroidRuntime(270):   at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
       12-03 06:03:00.398: E/AndroidRuntime(270):   at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
       12-03 06:03:00.398: E/AndroidRuntime(270):   at android.os.Handler.dispatchMessage(Handler.java:99)
        12-03 06:03:00.398: E/AndroidRuntime(270):  at android.os.Looper.loop(Looper.java:123)
        12-03 06:03:00.398: E/AndroidRuntime(270):  at android.app.ActivityThread.main(ActivityThread.java:4363)
        12-03 06:03:00.398: E/AndroidRuntime(270):  at java.lang.reflect.Method.invokeNative(Native Method)
        12-03 06:03:00.398: E/AndroidRuntime(270):  at java.lang.reflect.Method.invoke(Method.java:521)
        12-03 06:03:00.398: E/AndroidRuntime(270):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
        12-03 06:03:00.398: E/AndroidRuntime(270):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
        12-03 06:03:00.398: E/AndroidRuntime(270):  at dalvik.system.NativeStart.main(Native Method)
        12-03 06:03:00.418: I/dalvikvm(270): threadid=7: reacting to signal 3
        12-03 06:03:00.418: E/dalvikvm(270): Unable to open stack trace file '/data/anr/traces.txt': Permission denied
        12-03 06:08:00.478: I/Process(270): Sending signal. PID: 270 SIG: 9 
```

编辑#2：上述错误已解决。现在我得到的应用程序不会崩溃。但数据并不存储在数据库中。错误在 return db.insert(TABLE_NAME_ENTRIES, null, contentvalues); databaseadapter.java 文件的行

```
 public long insertEntry(int i, int j, GregorianCalendar gregoriancalendar, long l, double d, 
    int k, String s)
      {
     ContentValues contentvalues = new ContentValues();
     contentvalues.put(KEY_INPUT_TYPE, Integer.valueOf(i));
     contentvalues.put(KEY_ACTIVITY_TYPE, Integer.valueOf(j));
     contentvalues.put(KEY_DATE_TIME, Long.valueOf(gregoriancalendar.getTimeInMillis() / 1000L));
      contentvalues.put(KEY_DURATION, Long.valueOf(l));
     contentvalues.put(KEY_DISTANCE, Double.valueOf(d));
     contentvalues.put(KEY_CALORIES, Integer.valueOf(k));
     contentvalues.put(KEY_COMMENT, s);
     return db.insert(TABLE_NAME_ENTRIES, null, contentvalues);   // Logcat is howing                
     error here
      } 
```

这是logcat

```
 12-03 08:51:10.608: E/Database(327): Error inserting input_type=3 calories=5 distance=5.0 duration=4 comment=ant date_time=-62096464100 activity_type=3
     12-03 08:51:10.608: E/Database(327): android.database.sqlite.SQLiteException: no such table: entries: , while compiling: INSERT INTO entries(input_type, calories, distance, duration, comment, date_time, activity_type) VALUES(?, ?, ?, ?, ?, ?, ?);
     12-03 08:51:10.608: E/Database(327):   at android.database.sqlite.SQLiteProgram.native_compile(Native Method)
     12-03 08:51:10.608: E/Database(327):   at android.database.sqlite.SQLiteProgram.compile(SQLiteProgram.java:110) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T22:56:54.530

**原始错误**

您尚未发布 LogCat 错误，但这是一个典型错误。我猜您正在尝试将 DatabaseAdapter 创建为不正确的字段变量，如评论中所述。

```
public class MainActivity extends Activity {
    // Do not do this! 
    //   This will case a NullPointerException later when your call getWritableDatabase()...
    //DatabaseAdapter dba = new DatabaseAdapter(this);

    // Do this instead:
    DatabaseAdapter dba;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        dba = new DatabaseAdapter(this); // Right way! 
```

引用的上下文`this`在注释掉的代码中无效。您必须等到上下文有效。你得到的第一个机会是在`onCreate()`.

* * *

**加法**
在这种情况下，您正在使用`new DatabaseAdapter(mContext);`但忘记初始化`mContext`所以它是`null`......

新的 LogCat 显示表条目不存在，原因是您不能将这些 SQL 命令链接在一起：

```
db.execSQL("DROP TABLE IF EXISTS CREATE TABLE IF NOT EXISTS entries ... 
```

这是一个语法错误，因此该表`entries`从未构建。这些必须是单独的命令：

```
db.execSQL("DROP TABLE IF EXISTS entries");
db.execSQL("CREATE TABLE IF NOT EXISTS entries ... 
```

不要忘记递增`DATABASE_VERSION`，以便在`onUpgrade()`.

希望这已经解决了您当前的问题。如果您遇到更多异常，请随时提出新问题。*祝你好运！*:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T03:51:46.443

您的数据库中的表是否被调用`entries`？

# octave - k-means 迭代输出数据+质心

> ID：13674760
> 
> 赞同：0
> 
> 时间：2012-12-02T22:45:24.397
> 
> 标签：octave, matlab, matlab-figure

我对`kmeans`Matlab 中的函数有疑问。我想做一个包含多个不同步骤的图的图，它显示了集群中心的演变/移动和集群数据的标记。问了我的一个已经玩过 k-means 函数的朋友，但他说那是不可能的。他是对的还是可以通过迭代绘制输入向量和质心的数据？如果可能，它是如何实现的？

先感谢您。

问候

# python - 评估“不受信任”用户的算法

> ID：13674761
> 
> 赞同：5
> 
> 时间：2012-12-02T22:45:27.877
> 
> 标签：python, security, web-applications, eval

我只是在玩弄一个想法，我想不出一种方法可以在后端解决这个问题而不会出现令人生畏的安全问题。

假设我想让用户有机会通过 web 服务创建简单的算法并在小列表中测试这些算法，例如，`range(0, 5)`然后通过另一个 web 服务、模板或电子邮件报告结果，这并不重要，这是评估打扰我。

使用蟒蛇：

```
class Algorithm(whatever):
    function = whatever.CharField(max_length=75) 
```

用户可能会输入如下内容：

```
'f(x)=x+(x/5)**0.75' 
```

当然，我可以使用`eval`，剥离任何内置插件，除“x”之外的字符串等，但这仍然可能是不幸的做法。

我唯一能想到的是*将任何评估功能移至 JavaScript 前端。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T16:54:59.877

`eval()`是邪恶的，在后端这样做是非常危险的。但是，它可以使用[python 沙箱](http://wiki.python.org/moin/SandboxedPython)安全地完成。但是如果沙盒在哪里失败，你就会被拥有。这不是一种非常“纵深防御”的方法。

更好的方法是在客户端评估有效负载......但是这是跨站点脚本（XSS）。防止攻击者利用此问题的一种方法是在客户端设置一个事件处理程序，在按下按钮时评估表单。如果攻击者可以构建执行 JavaScript 的 GET 或 POST 请求，那么他就可以利用 XSS 漏洞。还要确保设置`x-frame-options: deny`为防止[点击劫持](http://en.wikipedia.org/wiki/Clickjacking)。

# ruby-on-rails - Rails 应用程序中包含 Javascript 的问题

> ID：13674762
> 
> 赞同：3
> 
> 时间：2012-12-02T22:45:35.140
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, heroku, ruby-on-rails-3.2

我正在使用 Rails 3.2.8。部署应用程序后，访问包含 javascript 的视图：

```
<%= javascript_include_tag "epiceditor" %> 
```

Heroku 失败并显示此日志：

```
ActionView::Template::Error (/app/app/assets/javascripts/epiceditor.js.erb has already been required 
```

我已经检查了一些可能的解决方案，例如检查任何可能触发循环依赖的引用，或者只是删除它以防它被包含在其他地方，但事实并非如此。所以，如果我包含它，我会得到这个“已包含错误”，如果我不包含，则根本不包含该文件。

我的 config/application.rg 有这个

```
 config.assets.initialize_on_precompile = false 
```

applications.js 有这个：

```
//= require jquery
//= require jquery_ujs
//= require tabs 
```

可能需要注意标签引用的文件是“epiceditor.js.erb”，因为它有一些我需要的嵌入式 Rails 代码。

谢谢你的帮助

编辑：

我相信这是 Sprockets 中的一个错误。如果我将 Rails 更新到 3.2.9rc2，现在的错误是：ActionView::Template::Error (Asset logical path has no extension: epiceditor/.js

但当然，epiceditor 中的扩展名是 epiceditor.js.erb，我也尝试在 javascript_include_tag 中明确说明它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T20:45:22.533

我发现了这个错误。事实证明，在我正在调用的 .js.erb 文件中

```
<% asset_path 'epiceditor/' %> 
```

它应该扩展到放置所有史诗编辑器文件的路径，但实际上是以递归方式加载文件本身。这在开发环境中正确扩展，但在生产环境中没有。好笑，对吧？这样做的原因是添加了摘要。所以我用这个解决了整个问题：

```
<%= asset_path 'epiceditor/', :digest => false %> 
```

现在它确实扩展到目录，并且不落入递归陷阱。

希望这可以为某人节省一些时间！

# android - 如何在活动关闭时保持活动可运行线程但在活动再次启动时销毁线程

> ID：13674763
> 
> 赞同：0
> 
> 时间：2012-12-02T22:45:39.217
> 
> 标签：android, runnable

我的一个活动中有一个可运行的线程，该线程在活动开始时开始。即使我的活动完成，我也想保持线程运行，并且我想在相同的活动再次开始时销毁线程。这是可能的还是我必须尝试新的方法来实现我的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:00:07.090

我建议使用服务。只要你想让他们活多久，他们就活多久

```
public class MyService extends Service {
private static final String TAG = "MyService";

@Override
public IBinder onBind(Intent intent) {
    return null;
}

@Override
public void onCreate() {
    Toast.makeText(this, "My Service Created", Toast.LENGTH_LONG).show();
    Log.d(TAG, "onCreate");

}

@Override
public void onDestroy() {
    Toast.makeText(this, "My Service Stopped", Toast.LENGTH_LONG).show();
    //stop thread
}

@Override
public void onStart(Intent intent, int startid) {
    Toast.makeText(this, "My Service Started", Toast.LENGTH_LONG).show();
    Log.d(TAG, "onStart");
    //start thread (again)
} 
```

}

您必须在清单中声明您的服务

```
<service android:enabled="true" android:name=".MyService" /> 
```

启动和停止您的服务

```
startService(new Intent(this, MyService.class));
stopService(new Intent(this, MyService.class)); 
```

如果您想检查您的服务是否正在运行，您可以使用此代码

```
private boolean isMyServiceRunning() {
ActivityManager manager = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);
for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE)) {
    if (MyService.class.getName().equals(service.service.getClassName())) {
        return true;
    }
}
return false; 
```

}

# ios - UIToolBar BarButtonItem IBAction 不起作用

> ID：13674765
> 
> 赞同：2
> 
> 时间：2012-12-02T22:45:42.540
> 
> 标签：ios, uitoolbar

我已经使用 IB 向现有的 iPad 应用程序添加了 UIToolBar。然后我用 IB 将它连接到视图控制器并验证连接是否存在。但是，当我单击按钮时，视图控制器中的相应代码并未执行。

我打开了一个空项目并遵循相同的程序，一切都按预期工作。

我很好奇是否对我现有项目中阻止执行 IBAction 代码的不同之处有什么想法？

我正在使用 XCode 4.5.2 和 iOS 6.0（模拟器）进行开发。

任何想法都会受到赞赏，因为我真的很困惑！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-21T08:34:02.920

As casillic mentioned in the comments, I had this problem due to the UITapGestureRecognizer I was using this to listen for when the user tapped the background so I could dismiss the keyboard if the user is editing a field.

The UITapGestureRecognizer conflicts with the toolbar and causes the code to not be executed when a toolbar item is selected - instead (in my case) it runs the "dismiss keyboard" code I have in my listener for the tab gesture.

To get around this, I added my gesture recogniser to the housing UIScrollView for the text inputs instead of the main containing view.

e.g:

replaced this:

```
[self.view addGestureRecognizer:tap]; 
```

with this:

```
[scrollView addGestureRecognizer:tap]; 
```

(scrollView is hooked up as an IBOutlet for the UIScrollView on my storyboards)

# c++ - C++11 中的纯函数

> ID：13674767
> 
> 赞同：9
> 
> 时间：2012-12-02T22:46:06.970
> 
> 标签：c++, gcc, c++11

C ++ 11中的一个可以以某种方式`gcc`将函数（不是类方法）标记为`const`告诉它是**纯**的并且不使用全局内存而只使用它的参数吗？

我试过了`gcc`，`__attribute__((const))`这**正是**我想要的。但是在函数中触及全局内存时不会产生任何编译时错误。

**编辑 1**

**请小心**。我的意思是纯函数。**不是常数函数**。GCC 的属性有点混乱。纯函数只使用它们的参数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T23:01:17.480

你在找`constexpr`吗？这告诉编译器可以在编译时评估该函数。函数必须具有`constexpr`字面返回和参数类型，并且主体只能包含静态断言、类型定义、使用声明和指令以及一个返回语句。可以`constexpr`在常量表达式中调用函数。

```
constexpr int add(int a, int b) { return a + b; }

int x[add(3, 6)]; 
```

* * *

看过 的含义后`__atribute__((const))`，答案是否定的，你不能用标准 C++ 做到这一点。使用`constexpr`将达到相同的效果，但仅限于更有限的一组功能。但是，只要编译后的程序以相同的方式运行（as-if 规则），就没有什么可以阻止编译器自行进行这些优化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-18T15:07:13.050

因为这里已经提到了很多，所以让我们暂时忘掉元编程，它无论如何都是纯函数式的，而且离题了。**但是，可以使用非 constexpr 参数调用constexpr 函数*foo ，在这种情况下，* *foo*实际上是在运行时评估的纯函数**（我在这里忽略了全局变量）。但是您可以编写许多无法使用 constexpr 的纯函数，例如，这包括任何抛出异常的函数。

其次，我假设 OP 意味着*将 pure 标记*为供编译器检查的断言。GCC 的*pure*属性则相反，是 coder 帮助编译器的一种方式。

虽然 OP 问题的答案是否定的，但阅读尝试引入 pure 关键字（或*不纯*并让*pure*成为默认值）的历史非常有趣。

d-lang 社区很快发现“纯”的含义并不清楚。日志记录不应使函数不纯。在纯函数中应该允许不逃避函数调用的可变变量。具有不同地址的相同返回值不应被视为不纯。但 D 比扩展纯度更进一步。

所以d-lang社区引入了“弱纯”和“强纯”这两个词。但后来的争论表明，弱与强不是非黑即白，有灰色地带。见[D 中的纯度](http://klickverbot.at/blog/2012/05/purity-in-d/)

Rust 很早就引入了“纯”关键字；他们因为它的复杂性而放弃了它。在 Rust 中查看[纯度](https://mail.mozilla.org/pipermail/rust-dev/2013-April/003926.html)。

在“纯”关键字的巨大好处中，有一个丑陋的后果。一个模板化的函数可以是纯的也可以不是纯的，这取决于它的类型参数。这可能会增加模板实例化的数量。这些实例化可能只需要暂时存在于编译器中，而不需要进入可执行文件，但它们仍然可以延长编译时间。

在不修改语言的情况下，语法高亮编辑器可能会有所帮助。优化 C++ 编译器确实会考虑函数的纯粹性，它们只是不能保证捕获所有情况。

我很遗憾这个功能的优先级似乎很低。它使对代码的推理变得更加容易。我什至会争辩说，它会通过激励程序员以不同的方式思考来改进软件设计。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T23:00:44.950

仅使用标准 C++11：

```
namespace g{ int x; }

constexpr int foo()
{
    //return g::x = 42;  Nah, not constant
    return 42;      // OK
}

int main()
{} 
```

* * *

这是另一个例子：

```
constexpr int foo( int blah = 0 )
{
    return blah + 42;      // OK
}

int main( int argc, char** )
{
    int bah[foo(2)];            // Very constant.
    int const troll = foo( argc );  // Very non-constant.
} 
```

* * *

GCC 的含义`__attribute__( const )`在[GNU 编译器文档](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Function-Attributes.html#index-g_t_0040code_007bconst_007d-function-attribute-2507)中记录为……

> 许多函数除了参数之外不检查任何值，并且除了返回值之外没有任何效果。基本上这只是比`pure`下面的属性更严格的类，因为函数不允许读取全局内存。

人们可能会认为这意味着函数结果应该只取决于参数，并且函数应该没有副作用。

这允许比 C++11 更通用的函数类`constexpr`，它生成函数`inline`，将参数和函数结果限制为*文字类型*，并将函数体的“活动”语句限制为单个`return`语句，其中 (C++11 §7.1.5/3)

> — 用于初始化返回值（6.6.3、8.5）的每个构造函数调用和隐式转换都应是常量表达式（5.19）中允许的那些之一

`constexpr` `sin`举个例子，制作一个函数很困难（我认为不是不可能，但很困难） 。

但结果的纯度只对两方很重要：

*   当已知为纯时，编译器可以省略具有已知结果的调用。
    这主要是对宏生成代码的优化。用函数替换宏`inline`以避免愚蠢地生成相同的子表达式。

*   当已知是纯的时，程序员可以完全删除调用。
    这只是一个适当的*文档*问题。:-)

因此，与其寻找一种方法来`sin`用语言表达 eg 的纯度，我建议避免通过宏生成代码，并记录纯函数本身。

并`constexpr`用于实际上可能的功能（不幸的是，截至 2012 年 12 月，最新的 Visual C++ 编译器尚不支持`constexpr`）。

* * *

之前有一个[关于*pure*和`constexpr`](https://stackoverflow.com/questions/5462388/relation-betwean-constexpr-and-pure-functions). 主要是，每个`constexpr`函数都是*pure*，但反之则不然。

# backbone.js - 将 Marionette.ItemView 用于没有模型的视图？

> ID：13674770
> 
> 赞同：10
> 
> 时间：2012-12-02T22:46:18.787
> 
> 标签：backbone.js, marionette

`Marionette.ItemView`用于没有`model`与之关联的特定属性的视图类是否常规？

由于`Marionette.View`不打算直接使用，它`ItemView`作为一个具有方便的默认值和绑定的视图类似乎是有意义的。

或者，应该只求助于 using`Backbone.View`吗？如果是这样，有没有办法与`Backbone.View`Marionette 的事件和垃圾收集架构挂钩？

谢谢你的澄清！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-03T15:49:41.067

ItemView 可以在没有模型的情况下使用。我经常这样做。

如果您需要为 ItemView 指定数据，但 Backbone.Model 中没有该数据，则需要重写该`serializeData`方法：

```
 MyView = Marionette.ItemView.extend({
  serializeData: function(){
    return {
      my: "custom data"
    };
  }
}); 
```

基本的 Marionette.View 并不意味着直接使用，因为它本身不提供渲染功能。不过，这并不意味着您不能使用它来创建自己的基本视图类型。例如，您可以为您的应用程序构建一个视图类型，以处理渲染谷歌地图或第三方小部件或其他不需要 ItemView 具有的基于 Backbone.Model 的一般渲染的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:39:30.223

我刚刚发现您可以为此使用 templateHelper - 只需在您的 ItemView 声明中添加它：

```
templateHelpers: function() {
    return {
        message: this.message,
        cssClass: this.cssClass
    }
} 
```

然后在您的模板中：

```
<script type="text/html" id="notice-template">
    <span class="<%= cssClass %>"><%= message %></span>
</script> 
```

然后当你初始化视图时：

```
var noticeView = new App.Views.Notice();
noticeView.message = "HELLO";
App.noticeRegion.show(noticeView); 
```

我会对你对这个 Derick 的看法感兴趣吗？

# php - PHP 任务终止但未引发错误情况

> ID：13674771
> 
> 赞同：3
> 
> 时间：2012-12-02T22:46:30.917
> 
> 标签：php, error-handling, timeout

PHP 脚本正在使用 ZipArchive 类，并且可能运行时间很长。由于它正在默默地死去，但编写了一个部分 zip 文件，我将 error_log() 语句包装在 $zip->close() 周围。（ini_set 将错误记录设置到文件和 E_ALL 就在此代码之前） error_log("calling zip->close()"); $rc = $zip->close(); error_log("zip->close() 返回 $rc");

日志文件显示第一个 error_log，但从不显示第二个。unix top 命令显示进程运行的总 CPU 时间为 c。在它失效前 2.5 分钟。

我还尝试使用 set_error_handler() 捕获错误，并使用 error_log() 来记录捕获的处理程序。但是日志文件中没有显示任何内容。

我假设该过程正在被退回，可能是由 Apache（我无法控制 Apache 或 PHP）。

我的问题是：为什么我在 error_log 使用的文件中看不到这个错误？

感谢您提供规避问题的建议，但我的问题仍然存在：

**为什么我在日志中看不到这个错误？或者为什么我不能通过 set_error_handler() 捕捉到这个错误？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:49:30.593

```
set_time_limit(0); 
```

0 = 无限期

# binary-search-tree - 用斜线打印出二叉搜索树

> ID：13674772
> 
> 赞同：0
> 
> 时间：2012-12-02T22:46:45.127
> 
> 标签：binary-search-tree, breadth-first-search

[http://pastebin.com/dN9a9xfs](http://pastebin.com/dN9a9xfs)

这是我打印出二叉搜索树元素的代码。目标是按级别顺序显示它，用斜线将父级连接到每个子级。例如，序列 15 3 16 2 1 4 19 17 28 31 12 14 11 0 将在执行后显示为：

```
 15
        /  \
       3    16
      / \     \
     2   4    19
    /     \   / \
   1      12 17 28
  /      /  \     \
 0      11  14    31 
```

我已经研究了很长时间，但我似乎无法正确设置间距/缩进。我知道我编写了正确的算法来以正确的顺序显示节点，但是斜线刚刚关闭。这是我的代码的结果：http: [//imgur.com/sz8l1](http://imgur.com/sz8l1)

我知道我已经很接近答案了，因为我的显示器离我需要的并不远，而且我觉得这是一个非常简单的解决方案，但出于某种原因，我似乎做对了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:54:00.993

我现在没时间了，但这里有一个快速版本。*我没有阅读您的代码*（不懂 C++），所以我不知道我们的解决方案有多接近。

我稍微改变了输出格式。我使用了左节点而不是`/`左节点，`|`因此我根本不必担心左间距。

```
15
| \
3  16
|\   \
2 4   19
|  \  | \
1   | 17 28
|   |      \
0   12      31
    | \
    11 14 
```

这是代码。我希望你能从中得到你需要的东西。肯定有一些 Pythonisms 我希望映射到你正在使用的东西。主要思想是将每一行数字视为位置到节点对象的映射，并在每个级别按键对映射进行排序，并根据分配的位置迭代地将它们打印到控制台。然后生成一个新地图，其中包含相对于上一层中其父级的位置。如果发生冲突，则生成一个假节点以将真实节点撞到一条线上。

```
from collections import namedtuple

# simple node representation. sorry for the mess, but it does represent the
# tree example you gave.
Node = namedtuple('Node', ('label', 'left', 'right'))
def makenode(n, left=None, right=None):
    return Node(str(n), left, right)
root = makenode(
    15,
    makenode(
        3,
        makenode(2, makenode(1, makenode(0))),
        makenode(4, None, makenode(12, makenode(11), makenode(14)))),
    makenode(16, None, makenode(19, makenode(17),
                                makenode(28, None, makenode(31)))))

# takes a dict of {line position: node} and returns a list of lines to print
def print_levels(print_items, lines=None):
    if lines is None:
        lines = []
    if not print_items:
        return lines

    # working position - where we are in the line
    pos = 0

    # line of text containing node labels
    new_nodes_line = []

    # line of text containing slashes
    new_slashes_line = []

    # args for recursive call
    next_items = {}

    # sort dictionary by key and put them in a list of pairs of (position,
    # node)
    sorted_pos_and_node = [
        (k, print_items[k]) for k in sorted(print_items.keys())]

    for position, node in sorted_pos_and_node:
        # add leading whitespace
        while len(new_nodes_line) < position:
            new_nodes_line.append(' ')
        while len(new_slashes_line) < position:
            new_slashes_line.append(' ')

        # update working position
        pos = position
        # add node label to string, as separate characters so list length
        # matches string length
        new_nodes_line.extend(list(node.label))

        # add left child if any
        if node.left is not None:
            # if we're close to overlapping another node, push that node down
            # by adding a parent with label '|' which will make it look like a
            # line dropping down
            for collision in [pos - i for i in range(3)]:
                if collision in next_items:
                    next_items[collision] = makenode(
                        '|', next_items[collision])

            # add the slash and the node to the appropriate places
            new_slashes_line.append('|')
            next_items[position] = node.left
        else:
            new_slashes_line.append(' ')

        # update working position
        len_num = len(node.label)
        pos += len_num

        # add some more whitespace
        while len(new_slashes_line) < position + len_num:
            new_slashes_line.append(' ')

        # and take care of the right child
        if node.right is not None:
            new_slashes_line.append('\\')
            next_items[position + len_num + 1] = node.right
        else:
            new_slashes_line.append(' ')

    # concatenate each line's components and append them to the list
    lines.append(''.join(new_nodes_line))
    lines.append(''.join(new_slashes_line))

    # do it again!
    return print_levels(next_items, lines)

lines = print_levels({0: root})
print '\n'.join(lines) 
```

# jquery-mobile - 软键盘保持在搜索输入回车键上

> ID：13674773
> 
> 赞同：1
> 
> 时间：2012-12-02T22:46:50.187
> 
> 标签：jquery-mobile

我认为这是一种常见的模式：

1.  我有一个 jquery 移动搜索框`<input type="search"...>`
2.  输入回车时，执行提交，但键盘仍然存在（在我的android上）
3.  键盘隐藏在我的桌面开发环境中。

经过大量搜索，我尝试过：

```
 if (e.keyCode == 13) {

    console.log("Im here");

    $('.ui-input-text').trigger('blur');

    $(this).trigger('blur');

    $("input").trigger('blur');

    $("#goSomewhereElse").focus();

    $('input#SearchText').blur(); 

} 
```

似乎没有任何效果。关于如何隐藏键盘的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-09T05:02:13.020

```
if (event.keyCode == 13) 
{
  window.location.hash = '#submit_chat_msg';
} 
```

其中 'submit_chat_msg' 是按钮的 ID 或其他东西。

# timer - Timer1 RD16 位在 PIC18 单片机上有何作用？

> ID：13674775
> 
> 赞同：2
> 
> 时间：2012-12-02T22:47:05.823
> 
> 标签：timer, microcontroller, pic, microchip, pic18

我真的很困惑。手册说：

```
RD16: 16-bit Read/Write Mode Enable bit
1= Enables register Read/Write of Timer1 in one 16-bit operation
0= Enables register Read/Write of Timer1 in two 8-bit operations 
```

但是，实际上似乎没有任何方法可以通过一个 16 位操作进行 R/W！从数据表后面的内容以及我在网上阅读的内容来看，16位值仍然必须读作：

```
foo = TMR1L;
bar = TMR1H; 
```

并写成：

```
TMR1H = bar;
TMR1L = foo; 
```

除非我只是没有看到，否则 RD16 没有显示在 Timer1 框图中，并且似乎对任何东西都没有影响！

然而，我知道这不可能是真的，所以我在这里问：Timer1 RD16 位在 PIC18 微控制器上有什么作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T22:59:52.720

它在内部缓冲。置位后，对 TMR1L 寄存器的读取会导致实际的 16 位值被缓冲。TMR1L/H 指向缓冲区，而不是定时器。

# objective-c - 防止日历中的双重事件

> ID：13674777
> 
> 赞同：1
> 
> 时间：2012-12-02T22:47:10.670
> 
> 标签：objective-c, xcode

关于防止日历中发生双重事件的任何想法？我有一个按钮来插入一个新事件，但如果事件已经存在，我不想要这个！

这是我试过的

```
for (i=0; i<arrayofCalIDs.count; i++) {
                                      EKEvent* event2 = [eventStore eventWithIdentifier:  [arrayofCalIDs    objectAtIndex:i]];

if (event2 == nil) {

 //here I add the event
} 
```

# android - 使用 Windows Azure 在 Android 上推送通知

> ID：13674780
> 
> 赞同：1
> 
> 时间：2012-12-02T22:47:24.037
> 
> 标签：android, azure, push-notification, google-cloud-messaging

我花了很长时间寻找关于使用 Azure 实现 PUSH for Android 的指南，但没有成功。这还不可用吗？

如果没有，是否有另一种方法可以实现这一点，也许是通过使用从服务器端到另一个可以推送到 android 的服务的 HTTP 请求？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T22:59:21.033

Windows Azure 支持[通过移动服务推送通知，](https://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-push-ios/)这仍然是一个预览功能。目前仅支持 Windows Store、Windows Phone 和 iOS 应用。对 iOS 的支持已经很久没有提供了，这可能意味着微软也在其他平台上工作，比如 Android。

[您的另一个选择是自己构建一些东西，使用 GCM 等现有工具或使用Pushwoosh](http://www.pushwoosh.com)等第三方提供商。Pushwoosh 的优点在于他们有一个免费计划，他们支持 Android 并且[他们有一个 REST API](http://www.pushwoosh.com/programming-push-notification/pushwoosh-push-notification-remote-api/#PushserviceAPI-Method/messages/create)，可以从 Windows Azure 调用来创建通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T15:06:34.013

阅读在线文档似乎建议您需要在 Azure 中使用移动服务。您应该能够使用移动服务上的 Push 选项连接到连接到 Android 客户端的 Google Cloud Messaging。GCM 身份验证要求您将移动服务的 IP 地址添加到白名单。

但是有一种更简单的方法......我可以直接从我的 azure 网站访问 GCM API（在添加了在免费模式下不可用的 IP 地址之后）。要查看我的代码，请看[这里](https://github.com/fireydude/GCM_Sender)

# visual-studio-2012 - VSIX - 无法加载引用的 dll 的文件或程序集

> ID：13674782
> 
> 赞同：17
> 
> 时间：2012-12-02T22:47:45.550
> 
> 标签：visual-studio-2012, vsix, vspackage

[我的问题与这个](https://stackoverflow.com/questions/12110135/vsix-package-doesnt-include-referenced-projects-dependencies)问题非常相似，只是答案和解决方法对我不起作用。我也在 Visual Studio 2012 中。

我有一个引用另一个项目的 VSPackage，它依赖于其他 dll。每次我在调试中运行我的包时，我都会收到一个无法找到其他 dll 的异常。它们位于输出目录中，并且已签名。

我尝试通过 VSPackage 项目直接引用它们无济于事。

想法？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-07T15:15:01.470

存在此问题的原因是，如果您的扩展程序没有显式依赖这些程序集，Visual Studio 不会在您的扩展程序的文件夹中查找程序集。例如，在配置文件 (IoC config) 或 xaml 代码中设置的依赖关系。我知道这个问题的三个解决方案：

1.  您可以在 GAC 中部署这些程序集，Visual Studio 将加载它们。如果您使用为在 GAC 中使用而构建的第三方库（例如 MS Enterprise Library），则此方法很好。但是[VSIX 部署包](http://msdn.microsoft.com/en-us/library/ff363239.aspx)不允许在 GAC 中安装程序集，您可以使用 MSI 安装程序。

2.  对于 Visual Studio 2010/2012 的 VSPackages，您可以使用[ProvideBindingPath](http://msdn.microsoft.com/en-us/library/gg590213%28v=vs.100%29.aspx)属性。扩展所在的路径将添加到 Visual Studio 用于查找依赖程序集的路径中。如果您的扩展不包含 VSPackage，您可以将此属性添加到任何公共类（[请参阅此处](https://msdn.microsoft.com/en-us/library/gg590213(v=vs.100).aspx)）。

    ```
    [ProvideBindingPath] 
    public class MyVsPackage : Package 
    { /* ... */ } 
    ```

3.  您可以手动解析程序集名称。为此，您需要订阅 AssemblyResolve 事件，并且需要从处理程序返回所需的程序集。这是最灵活的方式，如果你不能使用以前的方法，这特别适合你。

    在我的 IntelliDebugger 项目中，我为它编写了一个类 ManualAssemblyResolver：

```
using System;
using System.Reflection;

namespace IntelliEgg.Debugger.Utility
{
    public class ManualAssemblyResolver : IDisposable
    {
        public ManualAssemblyResolver(Assembly assembly)
        {
            if (assembly == null)
                throw new ArgumentNullException("assembly");

            _assemblies = new[] {assembly};
            AppDomain.CurrentDomain.AssemblyResolve += OnAssemblyResolve;
        }

        public ManualAssemblyResolver(params Assembly[] assemblies)
        {
            if (assemblies == null)
                throw new ArgumentNullException("assemblies");

            if (assemblies.Length == 0)
                throw new ArgumentException("Assemblies should be not empty.", "assemblies");

            _assemblies = assemblies;
            AppDomain.CurrentDomain.AssemblyResolve += OnAssemblyResolve;
        }

        public void Dispose()
        {
            AppDomain.CurrentDomain.AssemblyResolve -= OnAssemblyResolve;
        }

        private Assembly OnAssemblyResolve(object sender, ResolveEventArgs args)
        {
            foreach (Assembly assembly in _assemblies)
            {
                if (args.Name == assembly.FullName)
                {
                    return assembly;
                }
            }

            return null;
        }

        private readonly Assembly[] _assemblies;
    }
} 
```

此类必须在第一次调用问题程序集之前创建（例如，在 Package::Initialize() 方法中）

# php - 我无法删除留在我的主页上的消息以从我的消息数据库和主页本身中删除

> ID：13674787
> 
> 赞同：0
> 
> 时间：2012-12-02T22:48:07.797
> 
> 标签：php, codeigniter

我正在尝试从我拥有的主页中删除消息，当我按下删除按钮时，我收到一些 php 错误消息，说我声明的字段都无效，以及数据库错误 - 未知列'='消息'' 'where 子句'。我正在尝试不仅从主页删除消息，而且还从数据库中删除消息。我已经在我的messagesTable 数组中清楚地说明了from、to 和message 字段，为什么他们说无效？我的函数被称为`delete($messageTable)`.

我的模型：

```
class Messages extends CI_Model
{

   private $messagesTable = 'messages'; 

   function Messages()
   {
      parent::__construct();
   }

   function addMessage($from, $to, $message)
   {
      $record = array(
        'to' => $to,
        'from' => $from,
        'message' => $message);
      $this->db->insert('messages', $record);   
   }

   function getMessages($user)
   {

      $this->db->select('*');
      $this->db->from('messages');
      //$this->db->where('to', $user);
      $messagesSet = $this->db->get();

      $messages = array ();

      foreach ($messagesSet->result() as $row)
      {
      $messages[] = array('from' => $row->from, 'message' => $row->message);

      } 

      return $messages;
   }

   function delete($messagesTable) {

      $messagesTable = array(
        $from  => 'from',
        $to  => 'to',
        $message => 'message');

          $this->db->select('*')->from('messages')->where($messagesTable);
          $this->db->delete($messagesTable);
    } 
```

}

我的观点：

```
 <div id="maincontent">
  <div id="primary">     
    <h2> Friends </h2> 
    <ul> 
       <?php foreach ($friends['mutual'] as $name):?>
       <li> 
       <?=anchor("profile/view/$name", $name)?>, (<?=anchor("home/drop/$name", 'drop')?>)
       </li>
        <?php endforeach?>
     </ul>
   <h2> Following </h2> 
    <ul>
      <?php foreach($friends['following'] as $name):?>
        <li>  <?=anchor("profile/view/$name", $name)?>, (<?=anchor("home/drop/$name", 'drop')?>)</li>
      <?php endforeach?>
    </ul>
    <h2> Followers </h2> 
    <ul>
     <?php foreach($friends ['followers'] as $name):?>
        <li>
          <?=anchor("profile/view/$name", $name)?>
        </li>
      <?php endforeach?>
    </ul>
  </div>  
  <div id="secondary">
    <h2> Messages</h2> 
    <ul> 
      <?php foreach($messages as $message):?>
          <li><?=$message['from']?> says...: "<?=$message['message']?>"(<?=anchor("home/delete/{$message['from']}", 'delete')?>)</li>      
         <?php endforeach?>    
    </ul>      
  </div>
</div> 
```

控制器：

```
 class Home extends CI_Controller 
 {
 function Home()
 {
 parent::__construct();
 $this->load->model('messages');
 $this->load->model('friends');
 $this->load->model("profiles");

 }

   function drop($member)
  {
   $username = $this->session->userdata('username');
   $this->friends->deleteFriend($username, $member);
   redirect('home');
  }

   function delete($messagesTable) {

$this->messages->delete($messagesTable);
$this->index();

    }

function index()
{

 $username = $this->session->userdata('username');
 $membername = $this->session->userdata('membername');
 $viewData['membername'] = $membername;
 $viewData['username'] = $username;
 $viewData['following'] = $this->friends->getFollowing($username);
 $viewData['followers'] = $this->friends->getFollowers($username);
 $viewData['messages'] = $this->messages->getMessages($membername);
 $viewData['friends'] = $this->friends->getFriends($username);

 $this->load->view('shared/header');
 $this->load->view('home/hometitle', $viewData);
 $this->load->view('shared/nav');
 $this->load->view('home/homeview', $viewData);
 $this->load->view('shared/footer');
}

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:09:13.170

这不应该

```
$messagesTable = array(
    $from  => 'from',
    $to  => 'to',
    $message => 'message'); 
```

是

```
$messagesTable = array(
    'from'  => $from,
    'to'  => $to,
    'message' => $message); 
```

??

# java - 如何更新richfaces中的inputTextarea

> ID：13674790
> 
> 赞同：0
> 
> 时间：2012-12-02T22:48:29.160
> 
> 标签：java, html, richfaces

我有属性“newItemInfo”的bean“RichFacesTreeNodeBean”，我用inputTextArea调用模式面板，它必须包含该属性的实际值，但它始终包含属性的第一个值。这是 index.xhtml 的一部分：

```
<rich:popupPanel id="editPanel">
    <h:form>
        <h:inputTextarea value="#{richFacesTreeNodeBean.newItemInfo}" />
        <!-- some buttons -->
    </h:form>
</rich:popupPanel> 
```

和 RichFacesTreeNodeBean.java：

```
@ManagedBean
@ViewScoped
public class RichFacesTreeNodeBean {
     private String newItemInfo;

public String getNewItemInfo() {
    return newItemInfo;
} 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:16:43.780

```
<h:form>
    <a4j:outputPanel layout="block" ajaxRendered="true"> 
         <h:inputTextarea value="#{richFacesTreeNodeBean.newItemInfo}" />
    </a4j:outputPanel>
</h:form> 
```

有用。

# python - QObject::connect: 不能将“QTextCursor”类型的参数排队

> ID：13674792
> 
> 赞同：4
> 
> 时间：2012-12-02T22:49:03.233
> 
> 标签：python, multithreading, qt, pyqt4

我试图从 PyQt 中的非主线程发送信号，但我不知道做错了什么！当我执行程序时，它会因以下错误而失败：

```
QObject::connect: Cannot queue arguments of type 'QTextCursor'
(Make sure 'QTextCursor' is registered using qRegisterMetaType().) 
```

这是我的代码：

```
 class Sender(QtCore.QThread):
        def __init__(self,q):
            super(Sender,self).__init__()
            self.q=q
        def run(self):

            while True:
                pass
                try: line = q.get_nowait()
             # or q.get(timeout=.1)
                except Empty: 
                    pass
                else: 
                   self.emit(QtCore.SIGNAL('tri()')) 
 class Workspace(QMainWindow, Ui_MainWindow):
    """ This class is for managing the whole GUI `Workspace'.
        Currently a Workspace is similar to a MainWindow
    """

    def __init__(self):  
try:
            from Queue import Queue, Empty
        except ImportError:
            while True:
    #from queue import Queue, Empty  # python 3.x
                print "error"

        ON_POSIX = 'posix' in sys.builtin_module_names

        def enqueue_output(out, queue):
            for line in iter(out.readline, b''):
                queue.put(line)
            out.close()

        p= Popen(["java -Xmx256m -jar bin/HelloWorld.jar"],cwd=r'/home/karen/sphinx4-1.0beta5-src/sphinx4-1.0beta5/',stdout=PIPE, shell=True, bufsize= 4024)
        q = Queue()
        t = threading.Thread(target=enqueue_output, args=(p.stdout, q)) 
          t.daemon = True # thread dies with the program
        t.start()
        self.sender= Sender(q)
         self.connect(self.sender, QtCore.SIGNAL('tri()'), self.__action_About)
        self.sender.start() 
```

我认为我将参数发送到线程的方式是错误的......我需要知道如何将参数发送到线程，在我的情况下我需要发送`q`到工作线程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-05-22T18:37:04.323

PyQt5 很新，但是当您尝试从不是“应用程序线程”的线程执行 GUI 操作时，这似乎会发生。我把它放在引号中是因为认为即使在相当简单的 PyQt5 应用程序中`QApplication.instance().thread()`总是返回相同的对象似乎是错误的。

要做的事情是使用信号/插槽机制从工作线程发送任何类型的数据（在我的情况下，通过扩展创建的线程`QtCore.QRunnable`，另一种模式显然是`QtCore.QThread`and `QtCore.QObject.moveToThread`，请参见[此处](https://stackoverflow.com/a/68782192/595305)）。

然后还包括检查所有可能从非“应用程序线程”接收数据的插槽方法。在执行期间以可视方式记录消息的示例：

```
def append_message(self, message):
    # this "instance" method is very useful!
    app_thread = QtWidgets.QApplication.instance().thread()
    curr_thread = QtCore.QThread.currentThread()
    if app_thread != curr_thread:
        raise Exception('attempt to call MainWindow.append_message from non-app thread')
    ms_now = datetime.datetime.now().isoformat(sep=' ', timespec='milliseconds')
    self.messages_text_box.insertPlainText(f'{ms_now}: {message}\n')
    # scroll to bottom
    self.messages_text_box.moveCursor(QtGui.QTextCursor.End) 
```

无意中直接从非“应用程序线程”调用它太容易了。

犯这样的错误然后引发异常是好的，因为它会为您提供显示罪魁祸首调用的堆栈跟踪。然后更改调用，使其改为向 GUI 类发送信号，该槽可以是 GUI 类（此处`append_message`）中的方法，或者是随后*调用*的方法`append_message`。

在我的示例中，我在上面包含了“滚动到底部”行，因为只有当我添加该行时，这些“无法排队”错误才开始发生。换句话说，完全有可能摆脱一定数量的不合规处理（在这种情况下，在每次调用时添加更多文本）而不会引发任何错误......只有稍后你才会遇到困难。为了防止这种情况，我建议具有 GUI 功能的 GUI 类中的每个方法都应该包括这样的检查！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T08:55:09.767

> 确保使用 qRegisterMetaType() 注册了“QTextCursor”。

您是否尝试使用`qRegisterMetaType`功能？

官方手册[说](http://doc.qt.digia.com/qt/qmetatype.html)：

> 该类用作编组 QVariant 和排队信号和插槽连接中的类型的帮助器。它将类型名称与类型相关联，以便可以在运行时动态创建和销毁它。使用 Q_DECLARE_METATYPE() 声明新类型，使它们可用于 QVariant 和其他基于模板的函数。**调用 qRegisterMetaType() 使类型可用于非基于模板的函数，例如排队的信号和槽连接**。

# r - buildModel 创建 as.POSIXlt.character(x, tz, ...) 错误

> ID：13674795
> 
> 赞同：0
> 
> 时间：2012-12-02T22:49:19.560
> 
> 标签：r, posixct

我正在尝试重建[此](http://www.liaad.up.pt/~ltorgo/DataMiningWithR/code3.html)代码。我遇到了很多错误，但这一个花了我一天的时间。

这是产生错误的命令。

```
rf <- buildModel(data.model,method='randomForest',
         training.per=c(start(GSPC),index(GSPC["1999-12-31"])),
         ntree=50, importance=T) 
```

错误和回溯：

```
> traceback()
8: stop("character string is not in a standard unambiguous format")
7: as.POSIXlt.character(x, tz, ...)
6: as.POSIXlt(x, tz, ...)
5: as.POSIXct(as.POSIXlt(x, tz, ...), tz, ...)
4: as.POSIXct.default(x)
3: as.POSIXct(x)
2: as.POSIXorDate(intersect(as.character(start.date.index), as.character(end.date.index)))
1: buildModel(data.model, method = "randomForest", training.per = c(start(GSPC), 
   index(GSPC["1999-12-31"])), ntree = 50, importance = T) 
```

[我在这里查看](https://r-forge.r-project.org/scm/viewvc.php/pkg/R/buildModel.R?view=markup&root=quantmod&pathrev=443)了 buildModel 的源代码：

```
"buildModel" <-
function(x,method,training.per,...) {

 as.POSIXorDate <- function(x) {
  class.of.index <- class(index(model.data))
  if("POSIXt" %in% class.of.index) {
    if("POSIXlt" %in% class.of.index) {
      x <- as.POSIXlt(x)
    } else {
      x <- as.POSIXct(x)
    }
  } else {
    x <- as.Date(x)
  }
  x
}

model.id=deparse(substitute(x))
if(length(training.per) != 2) stop("training.per must be of length 2");
model.data <- x@model.data;
start.date.index <- index(model.data[which(index(model.data) >= as.POSIXorDate(training.per[1]))])
end.date.index <- index(model.data[which(index(model.data) <= as.POSIXorDate(training.per[2]))])
training.dates <- as.POSIXorDate(intersect(as.character(start.date.index),
                                           as.character(end.date.index)));
method <- as.character(paste("buildModel.",method,sep=''));
training.data <- model.data[training.dates];
formula <- x@model.formula
mcall <- do.call(method,list(quantmod=x,training.data=training.data, ...));
x@fitted.model <- mcall$fitted;
x@model.inputs <- as.character(mcall$inputs);
x@build.date = as.character(Sys.time());
x@model.id <- paste(class(mcall$fitted)[length(class(mcall$fitted))],
                           as.numeric(Sys.time()),sep='');
x@training.data <- (training.dates);
invisible(x);
} 
```

我应该怎么办？

# c# - 从 ADO.NET 构建实体连接字符串

> ID：13674799
> 
> 赞同：1
> 
> 时间：2012-12-02T22:49:56.897
> 
> 标签：c#, asp.net, entity-framework

在我的网站中，我有常规的[ADO.NET](http://msdn.microsoft.com/en-us/library/aa286484.aspx)连接字符串，例如：、

现在[实体框架](http://msdn.microsoft.com/en-US/data/ef)将它自己的连接字符串添加到同一个数据库。

怎么可能只使用一个[ADO.NET](http://msdn.microsoft.com/en-us/library/aa286484.aspx)连接字符串并在运行时构建实体连接字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T23:08:15.193

您可以使用 EntityConnectionStringBuilder 在运行时动态生成连接字符串，但您仍然需要元数据

```
EntityConnectionStringBuilder entityBuilder =
    new EntityConnectionStringBuilder();
    //Set the provider name.
    entityBuilder.Provider = providerName;

    // Set the provider-specific connection string.
    entityBuilder.ProviderConnectionString = providerString;

    // Set the Metadata location.
    entityBuilder.Metadata = @"res://*/AdventureWorksModel.csdl|
                                res://*/AdventureWorksModel.ssdl|
                                res://*/AdventureWorksModel.msl";
using (EntityConnection conn =
    new EntityConnection(entityBuilder.ToString()))
{
    conn.Open();
    Console.WriteLine("Just testing the connection.");
    conn.Close();
} 
```

# php - 定期备份 MySQL 数据库的方法？

> ID：13674807
> 
> 赞同：0
> 
> 时间：2012-12-02T22:50:35.087
> 
> 标签：php, mysql, database, backup

在备份存储在 MySQL 数据库中的信息时，我想知道您推荐哪些选项。

也许我可以在我的服务器上安装一些现成的解决方案/插件来运行每日/每周备份？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T22:55:47.523

你用什么服务器？在 Linux 中，您可以使用命令转储 mysql`mysqldump`并将其放入以`cronjob`进行连续备份。此外，使用 bash 脚本，您可以将文件命名为备份日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T22:55:13.873

我使用 crontab 运行 unix bash 命令，我有一个备份文件夹`/var/www/backup`

```
#!/bin/bash

# Remove old backup files (after 7 days)
find /var/www/backup -mtime +7 -exec rm {} \;

# Create a backup file with today's date filename
TIME=`date +"%Y-%m-%B-%d"`
FILENAME="backup-$TIME.tar.gz"

# Compress the backup data
tar -cpzf /var/www/backup/$FILENAME /var/lib/mysql --exclude /var/lib/mysql/mysql.sock 
```

我排除了 mysql.sock 文件，因为那是套接字服务（不需要），这个脚本备份所有数据库......所以你可以为特定数据库更改这一行

```
tar -cpzf /var/www/backup/$FILENAME /var/lib/mysql/DATABASE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T23:02:35.907

正如 Prof83 所说，您可以创建一个 bash 文件，然后使用 cronjob 自动运行它。我要指出的一件有趣的事情是，您可以通过扩展 bash 脚本来使用 Dropbox 进行异地备份：[https ://github.com/andreafabrizi/Dropbox-Uploader/blob/master/dropbox_uploader.sh](https://github.com/andreafabrizi/Dropbox-Uploader/blob/master/dropbox_uploader.sh)

# google-chrome - Chrome svg-Font-Rendering 中断布局

> ID：13674808
> 
> 赞同：29
> 
> 时间：2012-12-02T22:50:36.147
> 
> 标签：google-chrome, layout, fonts, svg, font-face

我目前正在做一个小项目，我想**通过 @fontface 使用 webfonts**。

我实现的字体是这样的：

```
@font-face {
    font-family: 'CardoRegular';
    src: url('../fonts/Cardo104s-webfont.eot');
    src: url('../fonts/Cardo104s-webfont.eot?#iefix') format('embedded-opentype'),
         url('../fonts/Cardo104s-webfont.woff') format('woff'),
         url('../fonts/Cardo104s-webfont.ttf') format('truetype'),
         url('../fonts/Cardo104s-webfont.svg#CardoRegular') format('svg');
    font-weight: normal;
    font-style: normal; 
```

现在，您可能已经体验过 Chrome 无法**流畅地显示这些字体。**

![Chrome字体渲染问题](../Images/4c55fa4c74b3761458f296934a62d55a.png)

经过一番搜索，我找到了一个似乎可行的解决方案：您只需移动 css 的这一部分：

```
 url('../fonts/Cardo104s-webfont.svg#CardoRegular') format('svg'); 
```

所以你最终得到了这个：

```
@font-face {
    font-family: 'CardoRegular';
    src: url('../fonts/Cardo104s-webfont.eot');
    src: url('../fonts/Cardo104s-webfont.eot?#iefix') format('embedded-opentype'),
         url('../fonts/Cardo104s-webfont.svg#CardoRegular') format('svg'),
         url('../fonts/Cardo104s-webfont.woff') format('woff'),
         url('../fonts/Cardo104s-webfont.ttf') format('truetype');
    font-weight: normal;
    font-style: normal; 
```

现在 Chrome 以流畅的方式呈现字体，这很棒。

**但：**

出于某种原因，这有时会破坏布局。大约每三次加载页​​面时，我都会得到如下信息：

![Chrome 字体问题](../Images/eb86cb9b2d5a0692fce78a0ca0254d20.png)

一切都向左移动。更长的文本正在突破它们的容器。看起来真的很奇怪。

**有没有人遇到过这个问题？

我很乐意就此获得建议。**

随意看看自己： [在线查看 Fireflycovers.com](http://www.fireflycovers.com)

非常感谢！

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-01-15T19:27:23.447

我在自己的网站上遇到了这个确切的问题。

不要将 svg 放在顶部，而是保留原始格式，但添加一个媒体查询，如下所示。这将使 chrome 完美地渲染字体并修复布局中断。

```
@font-face {
   font-family: 'CardoRegular';
    src: url('../fonts/Cardo104s-webfont.eot');
    src: url('../fonts/Cardo104s-webfont.eot?#iefix') format('embedded-opentype'),
         url('../fonts/Cardo104s-webfont.woff') format('woff'),
         url('../fonts/Cardo104s-webfont.ttf') format('truetype'),
         url('../fonts/Cardo104s-webfont.svg#CardoRegular') format('svg');
    font-weight: normal;
    font-style: normal;
}

@media screen and (-webkit-min-device-pixel-ratio:0) {
    @font-face {
        font-family: 'CardoRegular';
        src: url('../fonts/Cardo104s-webfont.svg#CardoRegular') format('svg');

    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T21:07:17.127

我在几个站点上看到了相同的问题（或更糟）。大多数情况下，文本在其自身之上被粉碎在一起。

我目前唯一的解决方案是回到旧字体。您也可以尝试添加 CSS 规则：`-webkit-font-smoothing: antialiased;`进行小幅改进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-30T22:33:04.977

### 解决方法是重复`@font-face`规则。

您不一定需要在 Quka 的答案中的媒体查询中使用它，尽管这是仅针对 webkit 浏览器的好方法。

如果您`@font-face`完全复制您的声明（首先使用 svg 以获得更好的渲染效果），并将其粘贴到原始声明下方，那么时髦的布局/绘图问题就消失了。

只是说媒体查询在这里并不重要——它是重复的规则。这是一个非常奇怪的错误。如此愚蠢。

# asp.net - jQuery 验证引擎 - 使用正则表达式的必填字段

> ID：13674817
> 
> 赞同：1
> 
> 时间：2012-12-02T22:51:40.957
> 
> 标签：asp.net, jquery-validation-engine

我正在使用 asp.net 形式的 jQuery 验证引擎。如何**使用正则表达式**验证字段（必需） ？

[http://www.position-relative.net/creation/formValidator/](http://www.position-relative.net/creation/formValidator/)

```
jQuery(document).ready(function () {
    // binds form submission and fields to the validation engine
    jQuery("#aspnetForm").validationEngine('attach', {
        'custom_error_messages': {
            // Custom Error Messages for Validation Types
            '.reqSomeField': {
                'required': {
                    'message': "Please enter Some Field."
                }
            }
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T22:58:23.623

到目前为止，您尝试过什么？

但这里有一些可以帮助您入门的东西。它来自[文档](http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/)。

custom[regex_name] 将元素的值验证为预定义的正则表达式列表。

因此，首先您需要在 jquery-validation-engine.js 文件中创建自定义正则表达式，然后在表单字段中调用它。表单字段中的语法如下所示：

```
<input value="someone@nowhere.com" class="validate[required,custom[email]]" type="text" name="email" id="email" /> 
```

您是否尝试过简单地将此类添加到表单字段中？

```
<input value="" class="validate[required]" type="text" name="email" id="email" /> 
```

除了强制用户在字段中输入 SOMETHING 之外，这不会进行任何验证。但是，他们可以在字段中输入 $$$，并且表单会认为这是有效的。如果您正在执行内联验证，特别是使用此插件，您可能希望使用现有的电子邮件地址验证选项，包含字母和数字但没有标点符号的内容，仅数字字段等。预先存在的选项都列在文档中。

# java - 如何在Java中调用泛型枚举的实现方法？

> ID：13674818
> 
> 赞同：3
> 
> 时间：2012-12-02T22:51:42.173
> 
> 标签：java, generics, interface, parameters, enums

我正在尝试将枚举传递给一个方法，遍历该枚举值，然后调用该枚举在所有这些值上实现的方法。我在“value.getAlias()”部分收到编译器错误。它说“类型 E 的方法 getAlias() 未定义”我试图表明 E 实现了 HasAlias 接口，但它似乎不起作用。这可能吗，如果可以，我该如何修复下面的代码来做我想做的事？下面的代码只是为了展示我的过程，并不是我只想打印枚举中值的名称，而是为了证明我的问题。

```
public interface HasAlias{ String getAlias(); };

public enum Letters implements HasAlias
{
   A("The letter A"),
   B("The letter B");

   private final String alias;

   public String getAlias(){return alias;}

   public Letters(String alias)
   {
     this.alias = alias;
   }

}

public enum Numbers implements HasAlias
{
   ONE("The number one"),
   TWO("The number two");

   private final String alias;

   public String getAlias(){return alias;}

   public Letters(String alias)
   {
     this.alias = alias;
   }

}

public class Identifier
{
   public <E extends Enum<? extends HasAlias>> void identify(Class<E> enumClass)
   {
      for(E value : enumClass.getEnumConstants())
      {
         System.out.println(value.getAlias());
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T23:01:49.350

以下是将类型绑定到实现 HasAlias 的枚举的方法：

```
<E extends Enum<E> & HasAlias> 
```

一旦你做出这样的改变，剩下的就可以了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T23:00:41.473

以下代码编译并运行良好，因为 getEnumConstants() 是在 Class 上定义的。不用说这个类是一个Enum的类。

```
public class EnumExtended {

   static interface HasAlias{ String getAlias(); }

   static class Identifier {
      static void identify(Class<? extends HasAlias> enumClass ) {
         for( HasAlias value : enumClass.getEnumConstants()) {
            System.out.println( value.getAlias());
         }
      }
   }

   public static void main( String[] args ) {
      Identifier.identify( Letters.class );
      Identifier.identify( Numbers.class );
   }

   static enum Letters implements HasAlias {
      A("The letter A"),
      B("The letter B");

      private final String alias;

      @Override
      public String getAlias(){return alias;}

      Letters(String alias1) {
        this.alias = alias1;
      }
   }

   static enum Numbers implements HasAlias {
      ONE("The number one"),
      TWO("The number two");

      private final String alias;

      @Override public String getAlias(){return alias;}

      Numbers(String alias1) {
        this.alias = alias1;
      }
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T23:00:58.663

[我在另一篇文章中找到了答案](https://stackoverflow.com/questions/1070703/how-can-i-require-a-generic-parameter-to-be-an-enum-that-implements-an-interface)

通过参考上面的帖子，我能够将我的代码更改为以下内容以使其工作：

```
public <E extends Enum<?> & HasAlias> void identify(Class<E> enumClass)
{
    for(E value : enumClass.getEnumConstants())
    {
     System.out.println(value.getAlias());
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T22:56:11.983

是的，您必须在接口中声明您的函数。为了成为一个接口，它必须包含抽象类，即没有定义的函数。

所以在这里你忘记了正确声明你的函数。

```
 String getAlias(); 
```

# matlab - MATLAB 用轴绘制图

> ID：13674822
> 
> 赞同：0
> 
> 时间：2012-12-02T22:52:14.510
> 
> 标签：matlab, plot, axes

我一直在尝试用 MATLAB 中的 GUI 创建一个程序。当我尝试用 AXES 绘制信息时，我不知道该怎么做。我知道函数图，但我需要能够在图中重新调整大小和移动图，以便为输入 uicontrol 腾出空间。我不知道该怎么办。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T01:19:49.113

我现在手头没有 Matlab，但请尝试以下操作：

要在图形窗口中设置绘图轴的大小，请使用

```
set(gca,'Position',[left bottom width height]) 
```

请参阅 Mathworks 的坐标轴属性[站点](http://www.mathworks.com/help/matlab/ref/axes_props.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T02:57:11.730

有几种不同的方法可以解决这个问题。但我总是选择这样做的方式是：

坚持，稍等：

```
plot(...), xlim([xmin xmax), ylim(ymin ymax]) 
```

这应该设置您在轴上的界限。

# java - 使用 getGeneratedKeys() Java

> ID：13674823
> 
> 赞同：1
> 
> 时间：2012-12-02T22:52:22.070
> 
> 标签：java, jdbc

谁能看到我错过了这个 ResultSet 吗？我收到以下错误`customerID = rs.getInt(1)`：

```
public boolean addCustomer(Customer customer) {
    String customerSQL = "INSERT INTO Customer (first_name, last_name)"
            + "VALUES (?, ?)";
    String emailSQL = "INSERT INTO Email (customer_ID, email_address, primary_email)"
            + "VALUES (?,?,?)";
    int customerID = 0;

    try (Connection connection = getConnection();
            PreparedStatement customerPs = connection.prepareStatement(
                    customerSQL, new String[] {"CUSTOMER_ID"});
            //PreparedStatement idPs = connection.prepareStatement(idSQL);
            //PreparedStatement emailPs = connection.prepareStatement(emailSQL)
            )  {

        customerPs.setString(1, customer.getFirstName());
        customerPs.setString(2, customer.getLastName());
        customerPs.executeUpdate();
        ResultSet rs = customerPs.getGeneratedKeys();

        System.out.println("Result Set: " + rs.toString());
        customerID = rs.getInt(1);
        System.out.print("Customer ID: " + customerID);

    }
    catch(SQLException e)
    {
        System.err.println("Error: " + e);
        e.printStackTrace(System.out);
        return false;
    }

    return false;
} 
```

输出

```
run:
Bill Joel
this@that.com
those@these.com
wank@that.com

Result Set: org.apache.derby.impl.jdbc.EmbedResultSet40@61c70928
Error: java.sql.SQLException: Invalid cursor state - no current row.
java.sql.SQLException: Invalid cursor state - no current row.
        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source)
        at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Unknown Source)
        at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Unknown Source)
        at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)
        at org.apache.derby.impl.jdbc.EmbedConnection.newSQLException(Unknown Source)
        at org.apache.derby.impl.jdbc.ConnectionChild.newSQLException(Unknown Source)
        at org.apache.derby.impl.jdbc.EmbedResultSet.checkOnRow(Unknown Source)
        at org.apache.derby.impl.jdbc.EmbedResultSet.getColumn(Unknown Source)
        at org.apache.derby.impl.jdbc.EmbedResultSet.getInt(Unknown Source)
        at customeremailmanager.CustomerDB.addCustomer(CustomerDB.java:78)
        at customeremailmanager.CustomerEmailManager.main(CustomerEmailManager.java:24)
Caused by: java.sql.SQLException: Invalid cursor state - no current row.
        at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)
        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(Unknown Source)
        ... 11 more
BUILD SUCCESSFUL (total time: 1 second) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T22:54:02.080

在从 ResultSet 对象中检索行之前，您必须调用[**ResultSet.next() ：**](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#next%28%29)

```
ResultSet rs = customerPs.getGeneratedKeys();
           while(rs.next()){
            System.out.println("Result Set: " + rs.toString());
            customerID = rs.getInt(1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T22:54:58.263

您需要首先确保行可用。请参阅本[教程](http://docs.oracle.com/javase/tutorial/jdbc/basics/retrieving.html)，了解如何使用 ResultsSet 检索数据。

根据文档：

> 您可以通过游标访问 ResultSet 对象中的数据。请注意，此游标不是数据库游标。此游标是指向 ResultSet 中的一行数据的指针。**最初，光标位于第一行之前**。ResultSet.next 方法将光标移动到下一行。如果光标位于最后一行之后，则此方法返回 false。该方法通过while循环重复调用ResultSet.next方法来遍历ResultSet中的所有数据

例子：

```
while (rs.next()) {
       customerID = rs.getInt(1);
     } 
```

# python - python：在字典中创建一个列表

> ID：13674827
> 
> 赞同：1
> 
> 时间：2012-12-02T22:52:53.250
> 
> 标签：python, list, dictionary

我刚开始使用 python，我正在尝试创建一个程序来读取如下所示的文件：

```
AAA x 111
AAB x 111
AAA x 112
AAC x 123
... 
```

该文件有 50 行长，我试图将字母变成字典中的键以及与键对应的数字列表。

我希望输出看起来像这样：

```
{AAA: ['111', '112'], AAB: ['111'], AAC: [123], ...} 
```

这是我尝试过的

```
file = open("filename.txt", "r") 
readline = file.readline().rstrip()
while readline!= "":
    list = []
    list = readline.split(" ")
    j = list.index("x")
    k = list[0:j]
    v = list[j + 1:]
    d = {}
    if k not in d == False:
        d[k] = []
    d[k].append(v)
    readline = file.readline().rstrip() 
```

我的 if 语句不断出现语法错误，我无法弄清楚我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T22:55:27.957

在 if 语句的末尾需要冒号；这个版本应该可以工作：

```
 if k in d == False:
      d[k] = []
      d[k].append(v)
   else:
      d[k].append(v) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T22:57:28.423

你在末尾缺少冒号，你也可以这样写：

```
if k not in d:
    d[k] = [v]
else:
    d[k].append(v) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T23:05:54.453

让您的生活更轻松`defaultdict`

```
>>> out = defaultdict(list)
>>> with open('test.txt') as f:
      for line in f.readlines():
        x = line.split()
        out[x[0]].append(int(x[2])) 
```

如果可能，使用该`with`语句打开文件也是一个好习惯。您的原始示例有两个条目 as`str`和一个 as `int`，我刚刚将所有条目转换为`int`此处。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T23:01:45.107

听起来像是[defaultdict](http://docs.python.org/2/library/collections.html#collections.defaultdict)的工作！除了你丢失的冒号，正如其他人所提到的，你可以`if`用这个替换整个：

```
from collections import defaultdict # placed with your other imports, probably
....
d = defaultdict(lambda:[])
d[k].append(v) 
```

# ruby-on-rails - Sidekiq 在运行时创建队列

> ID：13674831
> 
> 赞同：1
> 
> 时间：2012-12-02T22:53:38.010
> 
> 标签：ruby-on-rails, ruby, sidekiq

我开始将 Sidekiq 用于一个小项目。

我想知道是否可以在运行时创建队列并启动它。

当我使用类似的东西时

```
Sidekiq::Client.push('queue' => 'anotherqueue', 'class' => TheWorker, 'args' => ['name', 'noname']) 
```

队列已创建，但我找不到启动它的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T16:18:21.927

您可以在第一次启动应用程序时清空队列，一旦您插入第一个项目，队列就会开始处理。不会达到同样的效果吗？

# javascript - 被跨域数据污染的画布

> ID：13674835
> 
> 赞同：21
> 
> 时间：2012-12-02T22:54:20.020
> 
> 标签：javascript, canvas, cross-domain, cors, mjpeg

我正在从我可以信任的第三方网站加载动态 jpeg。我正在尝试，`getImageData()`但浏览器（Chrome 23.0）抱怨说：

```
Unable to get image data from canvas because the canvas has been tainted by
cross-origin data. 
```

SO上有一些类似的问题，但他们使用的是本地文件，而我使用的是第三方媒体。我的脚本在共享服务器上运行，我不拥有远程服务器。

我尝试了`img.crossOrigin = 'Anonymous'`或`img.crossOrigin = ''`（请参阅[Chromium 博客上关于 CORS 的这篇文章](http://blog.chromium.org/2011/07/using-cross-domain-images-in-webgl-and.html)），但没有帮助。关于如何`getImageData`在具有跨域数据的画布上的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-02T23:34:19.833

crossOrigin 标志一旦被污染就无法重置，但如果您事先知道图像是什么，则可以将其转换为数据 url，请参阅 [将图像从数据 URL 绘制到画布](https://stackoverflow.com/questions/4773966/drawing-an-image-from-a-data-url-to-a-canvas)

但是不，您不能也不应该使用来自不支持 CORS 的外部来源的 getImageData()

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-12-13T08:37:14.937

虽然这个问题已经很老了，但问题仍然存在，网上几乎没有什么可以解决的。我想出了一个我想分享的解决方案：

您可以在没有先设置属性的情况下使用图像（或视频），`crossorigin`并测试是否可以通过 AJAX 向同一资源发送 HEAD 请求。如果失败，您将无法使用该资源。如果成功，您可以添加属性并重新设置图像/视频的来源，并附上时间戳，重新加载它。

此解决方法允许您向用户显示资源并在不支持 CORS 时简单地隐藏一些功能。

HTML：

```
<img id="testImage" src="path/to/image.png?_t=1234"> 
```

JavaScript：

```
var target = $("#testImage")[0];
    currentSrcUrl = target.src.split("_t=").join("_t=1"); // add a leading 1 to the ts
$.ajax({
    url: currentSrcUrl,
    type:'HEAD',
    withCredentials: true
})
.done(function() {
    // things worked out, we can add the CORS attribute and reset the source
    target.crossOrigin = "anonymous";
    target.src = currentSrcUrl;
    console.warn("Download enabled - CORS Headers present or not required");
    /* show make-image-out-of-canvas-functions here */
})
.fail(function() {
    console.warn("Download disabled - CORS Headers missing");
    /* ... or hide make-image-out-of-canvas-functions here */
}); 
```

在 IE10+11 和当前的 Chrome 31、FF25、Safari 6（桌面）中测试和工作。在 IE10 和 FF 中，当且仅当您尝试从 https 脚本访问 http 文件时，您可能会遇到问题。我还不知道有什么解决方法。

**2014 年 1 月更新：**

为此所需的 CORS 标头应如下所示（Apache 配置语法）：

```
Header set Access-Control-Allow-Origin "*"
Header set Access-Control-Allow-Headers "referer, range, accept-encoding, x-requested-with" 
```

仅 ajax 请求需要 x-header。据我所知，大多数浏览器都没有使用它

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-29T18:49:39.133

另外值得注意的是，如果您在本地工作，无论资源是否与`index.html`您正在使用的文件位于同一目录中，CORS 都将适用。对我来说，这意味着当我将它上传到我的服务器时，CORS 问题消失了，因为它有一个域。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-05-26T10:59:44.837

您可以在画布上使用图像的 base64，在转换为 base64 时，您可以在图像路径之前使用代理 URL ( [https://cors-anywhere.herokuapp.com/](https://cors-anywhere.herokuapp.com/) ) 以避免跨域问题

**在此处查看完整的详细信息**

[https://stackoverflow.com/a/44199382/5172571](https://stackoverflow.com/a/44199382/5172571)

```
var getDataUri = function (targetUrl, callback) {
    var xhr = new XMLHttpRequest();
    xhr.onload = function () {
        var reader = new FileReader();
        reader.onloadend = function () {
            callback(reader.result);
        };
        reader.readAsDataURL(xhr.response);
    };
    var proxyUrl = 'https://cors-anywhere.herokuapp.com/';
    xhr.open('GET', proxyUrl + targetUrl);
    xhr.responseType = 'blob';
    xhr.send();
};
getDataUri(path, function (base64) {
    // base64 availlable here
}) 
```

# jquery - 使用 jQuery 提交 ajax 表单，并接收另一个使用 jQuery 提交的表单

> ID：13674836
> 
> 赞同：0
> 
> 时间：2012-12-02T22:54:21.890
> 
> 标签：jquery, ajax, forms, jquery-validate

我正在创建一个应用程序，它将一个 DOM 对象作为子对象添加到另一个 DOM 对象，然后这个子对象可以拥有子对象。我正在使用表单提交和验证，如下所示。问题是，当我提交并收到 AJAX 响应时，我将新表单添加到 DOM，当提交时，它会绕过 initializeSubmit 函数并加载新页面。

```
jQuery(document).ready(function($) {
    $('#wpbody-content form').each(initializeSubmit);
});

function initializeSubmit () {
    var $ = jQuery,
        $form = $(this),
        options = {
            submitHandler: function() {
                var postdata = {},
                    $inputs = $form.find('input, textarea'),
                    edit_fields = {};
                $inputs.each( function () {
                    // gather postdata
                });
                $.ajax( {
                    type : 'POST',
                    dataType : 'html',
                    url : ajaxurl,
                    cache : false,
                    data : postdata,
                    success : function ( response ) {
                            $container = $form.parent();
                            $container.after(response);
                            $newform = $(response).find('form');
                            $newform.each(initializeSubmit);
                    }
                });
            }
        }

    $form.validate(options);
}; 
```

我还尝试在成功函数中使用 apply 而不是 each：

```
initializeSubmit.apply($newform); 
```

控制台日志显示了 $newform 的 jQuery 数组中的适当表单。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:08:13.230

我认为问题在于`$(response).find('form')`创建与`response`插入的DOM 不同的 DOM 转换`$container.after(response);`。

您需要确保`.find('form')`作用于实际插入的 DOM 节点。

尝试：

```
success : function ( response ) {
    var $response = $(response);
    $form.parent().after($response);
    $response.find('form').each(initializeSubmit);
} 
```

# file - 将文件内容从文件路径传送到单个文件 - UNIX

> ID：13674838
> 
> 赞同：1
> 
> 时间：2012-12-02T22:54:24.933
> 
> 标签：file, unix, pipeline, cat, tee

我有一个文件路径列表，并希望将每个文件中的数据放入一个公共文件中。文件路径列表在一个文件中，每行一个，所以我希望我可以做类似的事情：

```
cat listofpaths.txt >> combineddata.txt 
```

显然那是行不通的，因为那只会让我找到路径而不是其中的东西 - 嗯......

我可以使用[Python](http://www.python.org/)来做到这一点，但我假设有一个 1-liner 可以使用[UNIX](http://www.unix.org/)管道来做到这一点——有人知道它会是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T23:03:24.343

一个简单的解决方案：

```
cat listofpaths.txt | xargs cat >> combineddata.txt 
```

# c - char[] 和 char* 兼容性？

> ID：13674839
> 
> 赞同：1
> 
> 时间：2012-12-02T22:54:49.667
> 
> 标签：c, arrays, c-strings

本质上，这段代码会起作用吗？在你说“运行它看看！”之前，我刚刚意识到我的 cygwin 没有附带 gcc，而且它目前距离完成重新安装还有 40 分钟的时间。话虽如此：

```
char* words[1000];
for(int i = 0; i<1000; i++)
    words[i] = NULL;

char buffer[ 1024 ];

//omit code that places "ADD splash\0" into the buffer

if(strncmp (buffer, "ADD ", 4) == 0){
            char* temp = buffer + 4;
            printf("Adding: %s", temp);
            int i = 0;
            while(words[i] != NULL) i++;
            words[i] = temp;
} 
```

我主要不确定 line `char* temp = buffer + 4`，以及我是否可以按照我的方式分配 words[i] 。当我最终尝试在 40 分钟内编译它时，我会得到类型错误吗？

另外——如果这可行，为什么我不需要在 words[] 的每个元素上使用 malloc()？为什么我可以说`words[i] = temp`，而不是需要为 words[i] 分配内存 temp 的长度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T22:57:42.063

`char[]`衰减到`char*`函数调用和指针算术。

因此，乍一看，您的代码是有效的 C。

**编辑**

至于您添加的问题，您可以这样做，`word[i] = temp`因为类型是兼容的。编译器只检查类型安全（嗯，它做的更多，但是在为什么这是一个语法上有效的赋值的上下文中......）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T23:00:06.573

在 gcc 上对其进行了测试，它会起作用，但是除非您使用 c99 编译器，否则您需要在 for 循环之外声明 i 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T23:05:43.307

这可能行不通，因为 all`words[i]`将被设置为指向`buffer + 4`.

但是，您的基本想法很好：您可以按照相同的基本想法将大缓冲区“拆分”成较小的“单词”。但是，您需要确保您不指向缓冲区的相交区域，并且您所指向的区域是空终止的。

最后，每次都遍历`words[i]`查找下一个的想法`NULL`是次优的：您应该存储您写入的最后一个位置，在下一次写入时增加它，并删除`while(words[i] != NULL)`循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T00:43:43.563

关于你问题的最后一部分 -`words`是一个`array of pointers to character strings`并且写作`words[i] = temp`使该`ith`数组的元素指向字符串`temp`。

只要您不需要创建 words[i] 应该指向的 temp 的副本，就不需要`malloc`新的记忆。

# ruby-on-rails - Rails 没有路线匹配 {:controller=>"devise/products"}

> ID：13674840
> 
> 赞同：6
> 
> 时间：2012-12-02T22:54:51.413
> 
> 标签：ruby-on-rails, model-view-controller, devise, routes, partials

当我尝试登录或注册时，我的 rails 应用程序出现以下错误（我正在使用 Devise GEM 登录）。

```
Routing Error
No route matches {:controller=>"devise/products"} 
```

该应用程序的所有源代码都可以在这里找到：[https ://github.com/rossmc/topsnowboards](https://github.com/rossmc/topsnowboards)

我尝试将**application.html.erb**和**product/index.html.erb**`link_to`从以下位置更改为：

 ****```
<%= link_to 'sign in', new_user_session_path  %> 
```

至：

```
<%= link_to 'sign in', :controller => "/products", new_user_session_path %>. 
```

但这只会引发更多错误。

有趣的是，在我为购物车添加部分内容之前，登录功能和路线运行良好，我在上次提交时将其放入**application.html.erb中。**当我删除此部分时，路由错误消失了，但我丢失了部分**views/cart/_cart.html.erb**。

下面是我尝试登录并运行 rake routes 命令时的控制台转储。提前感谢您抽出宝贵时间查看此内容。

**控制台转储**

```
Connecting to database specified by database.yml
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at C:/Users/Ross/Documents/NCI-HDip/Server Side/PROJ - Server Side/site/config/routes.rb:16)

Started GET "/users/sign_up" for 127.0.0.1 at 2012-12-02 22:15:33 +0000
Processing by Devise::RegistrationsController#new as HTML
  Rendered C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.1.2/app/views/devise/shared/_links.erb (2.0ms)
  Rendered C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.1.2/app/views/devise/registrations/new.html.erb within layouts/application (106.0ms)
  [1m[36mProduct Load (0.0ms)[0m  [1mSELECT DISTINCT product_type FROM "products" [0m
  Rendered products/_product_typeDistinctList.html (54.0ms)
  Rendered cart/_cart.html.erb (91.0ms)
Completed 500 Internal Server Error in 834ms

ActionController::RoutingError (No route matches {:controller=>"devise/products"}):
  app/views/cart/_cart.html.erb:49:in `_app_views_cart__cart_html_erb__355880610_32436408'
  app/views/layouts/application.html.erb:53:in `_app_views_layouts_application_html_erb__478801204_33653088'

  Rendered C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.0ms)

Started GET "/cart/3" for 127.0.0.1 at 2012-12-02 22:15:39 +0000
Processing by CartController#add as HTML
  Parameters: {"id"=>"3"}
Completed 401 Unauthorized in 1ms

Started GET "/users/sign_in" for 127.0.0.1 at 2012-12-02 22:15:39 +0000
Processing by Devise::SessionsController#new as HTML
  Rendered C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.1.2/app/views/devise/shared/_links.erb (1.0ms)
  Rendered C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.1.2/app/views/devise/sessions/new.html.erb within layouts/application (11.0ms)
  [1m[35mProduct Load (0.0ms)[0m  SELECT DISTINCT product_type FROM "products" 
  Rendered products/_product_typeDistinctList.html (1.0ms)
  Rendered cart/_cart.html.erb (4.0ms)
Completed 500 Internal Server Error in 54ms

ActionController::RoutingError (No route matches {:controller=>"devise/products"}):
  app/views/cart/_cart.html.erb:49:in `_app_views_cart__cart_html_erb__355880610_32436408'
  app/views/layouts/application.html.erb:53:in `_app_views_layouts_application_html_erb__478801204_33653088'

  Rendered C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.0ms)

Started GET "/users/sign_in" for 127.0.0.1 at 2012-12-02 22:15:43 +0000
Processing by Devise::SessionsController#new as HTML
  Rendered C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.1.2/app/views/devise/shared/_links.erb (1.0ms)
  Rendered C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.1.2/app/views/devise/sessions/new.html.erb within layouts/application (9.0ms)
  [1m[36mProduct Load (0.0ms)[0m  [1mSELECT DISTINCT product_type FROM "products" [0m
  Rendered products/_product_typeDistinctList.html (1.0ms)
  Rendered cart/_cart.html.erb (4.0ms)
Completed 500 Internal Server Error in 51ms

ActionController::RoutingError (No route matches {:controller=>"devise/products"}):
  app/views/cart/_cart.html.erb:49:in `_app_views_cart__cart_html_erb__355880610_32436408'
  app/views/layouts/application.html.erb:53:in `_app_views_layouts_application_html_erb__478801204_33653088'

  Rendered C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.0ms) 
```

**耙路线**

```
C:\Users\Ross\Documents\NCI-HDip\Server Side\PROJ - Server Side\site>rake routes
                profiles GET    /profiles(.:format)                            profiles#index
                         POST   /profiles(.:format)                            profiles#create
             new_profile GET    /profiles/new(.:format)                        profiles#new
            edit_profile GET    /profiles/:id/edit(.:format)                   profiles#edit
                 profile GET    /profiles/:id(.:format)                        profiles#show
                         PUT    /profiles/:id(.:format)                        profiles#update
                         DELETE /profiles/:id(.:format)                        profiles#destroy
         lineitems_index GET    /lineitems/index(.:format)                     lineitems#index
          lineitems_show GET    /lineitems/show(.:format)                      lineitems#show
           lineitems_new GET    /lineitems/new(.:format)                       lineitems#new
          lineitems_edit GET    /lineitems/edit(.:format)                      lineitems#edit
         order_lineitems GET    /orders/:order_id/lineitems(.:format)          lineitems#index
                         POST   /orders/:order_id/lineitems(.:format)          lineitems#create
      new_order_lineitem GET    /orders/:order_id/lineitems/new(.:format)      lineitems#new
     edit_order_lineitem GET    /orders/:order_id/lineitems/:id/edit(.:format) lineitems#edit
          order_lineitem GET    /orders/:order_id/lineitems/:id(.:format)      lineitems#show
                         PUT    /orders/:order_id/lineitems/:id(.:format)      lineitems#update
                         DELETE /orders/:order_id/lineitems/:id(.:format)      lineitems#destroy
                  orders GET    /orders(.:format)                              orders#index
                         POST   /orders(.:format)                              orders#create
               new_order GET    /orders/new(.:format)                          orders#new
              edit_order GET    /orders/:id/edit(.:format)                     orders#edit
                   order GET    /orders/:id(.:format)                          orders#show
                         PUT    /orders/:id(.:format)                          orders#update
                         DELETE /orders/:id(.:format)                          orders#destroy
                         GET    /orders(.:format)                              orders#index
                         POST   /orders(.:format)                              orders#create
                         GET    /orders/new(.:format)                          orders#new
                         GET    /orders/:id/edit(.:format)                     orders#edit
                         GET    /orders/:id(.:format)                          orders#show
                         PUT    /orders/:id(.:format)                          orders#update
                         DELETE /orders/:id(.:format)                          orders#destroy
        new_user_session GET    /users/sign_in(.:format)                       devise/sessions#new
            user_session POST   /users/sign_in(.:format)                       devise/sessions#create
    destroy_user_session DELETE /users/sign_out(.:format)                      devise/sessions#destroy
           user_password POST   /users/password(.:format)                      devise/passwords#create
       new_user_password GET    /users/password/new(.:format)                  devise/passwords#new
      edit_user_password GET    /users/password/edit(.:format)                 devise/passwords#edit
                         PUT    /users/password(.:format)                      devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)                        devise/registrations#cancel
       user_registration POST   /users(.:format)                               devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)                       devise/registrations#new
  edit_user_registration GET    /users/edit(.:format)                          devise/registrations#edit
                         PUT    /users(.:format)                               devise/registrations#update
                         DELETE /users(.:format)                               devise/registrations#destroy
                products GET    /products(.:format)                            products#index
                         POST   /products(.:format)                            products#create
             new_product GET    /products/new(.:format)                        products#new
            edit_product GET    /products/:id/edit(.:format)                   products#edit
                 product GET    /products/:id(.:format)                        products#show
                         PUT    /products/:id(.:format)                        products#update
                         DELETE /products/:id(.:format)                        products#destroy
              cart_index GET    /cart/index(.:format)                          cart#index
               site_home GET    /site/home(.:format)                           site#home
               site_shop GET    /site/shop(.:format)                           site#shop
              site_guide GET    /site/guide(.:format)                          site#guide
              site_links GET    /site/links(.:format)                          site#links
            site_contact GET    /site/contact(.:format)                        site#contact
                    cart        /cart(.:format)                                cart#index
                                /cart/:id(.:format)                            cart#add
                                /cart/remove/:id(.:format)                     cart#remove
               clearCart        /clearCart(.:format)                           cart#clearCart
                    home        /home(.:format)                                site#home
                    shop        /shop(.:format)                                products#index
                   guide        /guide(.:format)                               site#guide
                   links        /links(.:format)                               site#links
                 contact        /contact(.:format)                             site#contact
                checkout        /checkout(.:format)                            cart#createOrder
                                /product_type/:id(.:format)                    products#product_type
               myprofile        /myprofile(.:format)                           profiles#myprofile
                    root        /                                              site#home 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-02T23:55:14.827

更仔细地查看您的堆栈跟踪：

```
Started GET "/users/sign_up" for 127.0.0.1 at 2012-12-02 18:47:23 -0500
Processing by Devise::RegistrationsController#new as HTML
  Rendered /home/jon/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/devise-2.1.2/app/views/devise/shared/_links.erb (0.3ms)
  Rendered /home/jon/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/devise-2.1.2/app/views/devise/registrations/new.html.erb within layouts/application (2.3ms)
  Rendered products/_search.html.erb (0.3ms)
  Product Load (0.1ms)  SELECT DISTINCT product_type FROM "products" 
  Rendered products/_product_typeDistinctList.html (0.5ms)
  Rendered cart/_cart.html.erb (0.7ms)
Completed 500 Internal Server Error in 14ms

ActionController::RoutingError (No route matches {:controller=>"devise/products"}):
  app/views/cart/_cart.html.erb:49:in `_app_views_cart__cart_html_erb___3785130162884562793_21827300'
  app/views/layouts/application.html.erb:59:in `_app_views_layouts_application_html_erb___2170720560050181211_22251920'

  Rendered /home/jon/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms) 
```

找到了？日志显示它已经渲染了一堆部分，低至`cart/_cart.html.erb`. 它甚至告诉你错误发生在第 49 行。现在第 49 行是什么？这个：

```
<%= link_to 'Keep Shopping', :controller => :products %>
<%= link_to 'Empty Cart', :controller => "cart", :action => "clearCart" %>
<%= link_to 'Proceed to Check Out', :controller => "cart", :action => "createOrder" %> 
```

[正如 Ryan 在以下评论](https://stackoverflow.com/questions/13674840/rails-no-route-matches-controller-devise-products/13675360#comment18772010_13675360)中正确指出的那样，Rails 正在寻找一个局部范围，`Devise`因为这是您正在渲染的范围。

更简单地说，您可以只向它提供路由名称（您将在 中找到的名称`rake routes`），您可以在其中添加`_path`帮助器以形成 URL。`products_path`最终成为`products#index`.

在你的情况下

```
<%= link_to 'Keep Shopping', products_path %>
<%= link_to 'Empty Cart', clearCart_path %>
<%= link_to 'Proceed to Check Out', checkout_path %> 
```

听你的堆栈跟踪，他们在和你说话！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-31T23:00:03.307

派对迟到了，但这是我的解决方案。只需在控制器前面加上“ **/** ”作为绝对控制器。有点长和丑陋，但返回控制器/动作的链接或通过的路由。我用它来构建从 sql 表驱动的菜单。

```
 # dynamic link_to
  def menu_link(params, html_options=nil)
    if params[:controller].present?
      link_to params[:display], {controller: "/#{params[:controller]}", action: params[:resource]}, default_navigation_options(html_options)
    elsif params[:route].present?
      link_to params[:display], params[:route], default_navigation_options(html_options)
    end
  end 
```****

# windows - pyhook 用户键盘

> ID：13674842
> 
> 赞同：2
> 
> 时间：2012-12-02T22:55:07.933
> 
> 标签：windows, python-2.7, pyhook, local-system-account

使用Windows 7，Python 2.7，我编写并编译了下面的代码（使用pyinstaller2-0），如果我通过右键单击启动它并选择以管理员身份运行，它工作正常，但是当我通过任务调度程序以系统用户身份启动它时，它不会记录任何键（等待 10 秒后，它只会创建一个空的输出文件）。我在想可能是因为我将它作为另一个帐户运行，它没有连接“正确的键盘”？

```
import threading
import pyHook
import pythoncom
import time

def OnKeyboardEvent(event):
    global keylog
    keylog.append(chr(event.Ascii))
    return 

class thekeylogger ( threading.Thread ):
    def run ( self ):
        hm = pyHook.HookManager()
        hm.KeyDown = OnKeyboardEvent
        hm.HookKeyboard()
        pythoncom.PumpMessages()
        return      

keylog = []
thekeylogger().start()
time.sleep(10)
keys = "".join(keylog)
output_file = open('c:\\project\\test.txt', 'w')
output_file.write(keys)
output_file.close() 
```

# php - 如何在 wordpress 中向动态菜单添加跨度

> ID：13674843
> 
> 赞同：0
> 
> 时间：2012-12-02T22:55:10.843
> 
> 标签：php, wordpress, menu

我在 wordpress 中有一个动态菜单`wp_nav_menu`，但是我想在其中一个列表项中添加一个跨度。

我将在静态 HTML 中演示这一点，向您展示我想要实现的目标。

我目前有这个...

```
<li><a href="#">Test</a></li> 
```

...但想实现这一目标...

```
<li><a href="#">Test<span>(icon)</span></a></li> 
```

反正有动态地做到这一点吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T23:04:35.620

我是否正确理解了您想要跨度内的图像图标的示例？如果是这样，您可以只使用 wordpress 为该特定 li 或锚标记生成的类/ID，并使用 CSS 为其提供右对齐的背景图像。您可能还必须将其设置为具有更宽的宽度以容纳图像。您甚至不需要添加跨度标签。

**这是修改后的答案，可以满足您的需求，因为我之前的答案并不是您想要的：**

```
<script type="text/javascript">
    jQuery('#menu-item-175 a').append('<span></span>')
</script> 
```

只需将 #menu-item-175 更改为要附加到的锚点周围的 li 的正确 ID。

# python - 通过 8 个近邻值提取光栅像素

> ID：13674845
> 
> 赞同：1
> 
> 时间：2012-12-02T22:55:15.980
> 
> 标签：python

我试图找出一种使用python 2.6提取植被冠层覆盖数据的方法，以排除所有8个邻居都为零值的所有零值。所有像素的值范围为 0-100（以百分比表示）。我想我可以做一个 IF/THEN 语句，只提取至少一个邻居大于零的像素，但我对 python 很陌生，甚至不知道从哪里开始为邻居编写脚本。

这背后的原因是编写一个脚本，该脚本将自动识别用于评估的长植被走廊，如道路、河流、电力线等（所有这些都应该至少有一些零值。但也排除大的空地（也有零值），因为它们对我的生物学评估没有好处。

感谢您的帮助

# xcode - Xcode中的QCView不显示图像导入器

> ID：13674848
> 
> 赞同：1
> 
> 时间：2012-12-02T22:55:44.613
> 
> 标签：xcode, quartz-composer

我有一个可以在 Quartz Composer 内部正常工作的组合，但是在将其加载到 Xcode 内部的 QCView 后，构建后无法显示来自导入器补丁（具体来说是图像导入器和 XML 导入器）的输入信息。

合成功能正常并响应键盘输入，仅此而已。这是我第一次真正尝试使用 Quartz Composer，所以我不知道在哪里查看 Xcode。任何帮助将不胜感激。

编辑：一些额外的，可能无用的信息。该合成用作屏幕保护程序并在 Quartz Composer Visualizer 中运行，但不在 Quicktime 中。Quicktime 只是显示一个有问题的图像。

# c++ - 如何将简单的类似 Lisp 的代码拆分为 C++ 中的标记？

> ID：13674849
> 
> 赞同：1
> 
> 时间：2012-12-02T22:55:44.183
> 
> 标签：c++, regex, parsing, token

基本上，该语言有 3 种列表和 3 种固定长度类型，其中之一是字符串。使用正则表达式检测标记的类型很简单，但是将它们拆分为标记并不是那么简单。

字符串用双引号表示，双引号用反斜杠转义。

编辑：

一些示例代码

```
{
     print (sum (1 2 3 4))
     if [( 2 + 3 ) < 6] : {print ("Smaller")}
} 
```

像这样的列表

*   () 是仅在必要时评估的参数列表。
*   [] 是用更漂亮的方式表达 2 个操作数操作的特殊列表。
*   {} 是始终被评估的列表。第一个元素是函数名，第二个是参数列表，如此重复。
*   任何东西 : 任何东西 [ : 任何东西 [: ...]] 转换为参数列表，其中包含由 :s 连接的元素。这只是为了使循环和条件看起来更好。

所有函数都接受一个参数。参数列表可用于需要更多功能的函数。您可以使用不同类型的 eval 函数来评估前和参数列表。（每个列表模型都有 eval 函数）

所以，如果你理解这一点，它的工作原理和 Lisp 非常相似，只是有不同的列表类型来美化代码。

编辑：@rici

`[[2 + 3] < 6]`也可以。正如我所提到的，仅在必要时才评估参数列表。由于`<`is 是一个需要长度为 2 的参数列表的函数，`(2 + 3)`因此必须以某种方式对其进行评估，它`[(2 + 3) < 6]`会以其他方式转换为`< (2 + 3) : 6`which equals to `< (2 + 3 6)`which is 和无效的参数列表`<`。但是我明白你的意思，在这种情况下自动解析应该如何工作并不是一件容易的事。我上面描述的版本是`[...]`使用类似的函数评估参数列表`eval_as_oplist (...)`但我想你是对的，因为这样，你不能在 a 中以常规方式使用参数列表，`[...]`即使你不这样做也是有问题的没有理由这样做，因为它不会导致更好的代码。`[[. . .] . .]`我同意，更好的代码也是如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:20:43.137

我建议使用具有 C++ 输出目标的 Flex（可能与 Bison）或 ANTLR。

由于 google 比在我自己的文件服务器上查找内容更简单，这里是其他人的示例：

[http://ragnermagalhaes.blogspot.com/2007/08/bison-lisp-grammar.html](http://ragnermagalhaes.blogspot.com/2007/08/bison-lisp-grammar.html)

此示例存在格式问题（可以通过在文本编辑器中查看 HTML 来解决）并且仅支持一种类型的列表，但它应该可以帮助您入门，并且肯定会显示如何将项目拆分为标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T17:31:17.557

与其发明自己的“类似 Lisp，但更简单”的语言，不如考虑使用现有的 Lisp（或 Scheme）实现并将其嵌入到 C++ 应用程序中。

虽然设计自己的语言，然后为它编写自己的解析器和解释器肯定很有趣，但你将很难想出比 Scheme 和它的众多实现更好的设计、更强大和更有效、更健壮的实现.

Chibi Scheme：[http](http://code.google.com/p/chibi-scheme/) ://code.google.com/p/chibi-scheme/特别适合嵌入 C/C++ 代码，它非常小而且速度很快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-06T14:42:42.833

我相信[Boost.Spirit](http://www.boost.org/doc/libs/1_53_0/libs/spirit/doc/html/index.html)将适合此任务*，前提*是您可以为您提出的语言构建与 PEG 兼容的语法。从这些例子中看不出是否是这种情况。

更具体地说，Spirit 有一个称为[utree](http://www.boost.org/doc/libs/1_53_0/libs/spirit/doc/html/spirit/support/utree.html)的通用 AST ，并且有将符号表达式（即 lisp 语法）解析为 utree 的示例代码。

您不必使用 utree 来利用 Spirit 的解析和词法分析功能，但您必须拥有自己的 AST 表示。也许这就是你想要的？

# mysql - 从数据库中删除项目但保留唯一ID

> ID：13674853
> 
> 赞同：0
> 
> 时间：2012-12-02T22:56:14.610
> 
> 标签：mysql, sql, postgresql

我是数据库新手。我有一个看起来有点像这样的 SQL 数据库：

```
BEGIN;
CREATE TABLE "country" (
    "id" integer NOT NULL PRIMARY KEY,
    "name" varchar(255) NOT NULL
)
;
CREATE TABLE "location" (
    "id" integer NOT NULL PRIMARY KEY,
    "name" varchar(255) NOT NULL,
    "coordinate" varchar(255) NOT NULL,
    "country_id" integer NOT NULL REFERENCES "country" ("id")
)
;
CREATE TABLE "item" (
    "id" integer NOT NULL PRIMARY KEY,
    "title" varchar(25) NOT NULL,
    "description" text NOT NULL,
    "date" datetime NOT NULL,
    "source" varchar(255) NOT NULL,
    "link" varchar(255) NOT NULL,
    "location_id" integer NOT NULL REFERENCES "location" ("id")
)
; 
```

如果我从数据库中删除**项目**条目，然后将新**项目**条目添加到数据库中，项目主键会发生什么情况？我的意思是，它会增加，还是会填补任何空白？

在我的情况下，我不能将数据库中不需要的条目保留为“active = no”条目，我需要完全删除它们，但我担心它会弄乱项目上的主键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:18:01.227

相对较少的应用程序实际上*需要*无间隙序列。大多数*确实*需要无间隙序列的应用程序都与会计有关。如果发票是连续编号的，审计员希望对所有发票进行说明，而您无法使用不连续的序列来做到这一点。（如果无法生成发票编号 30445，是因为它放错了地方，因为它从未存在过，还是因为有人输入了欺诈性发票？）

在 SQL 数据库中，不仅仅是 MySQL 也不仅仅是 PostgreSQL，dbms 生成的序列（自动增量、序列、大序列）不能保证是无间隙的。事实上，它们肯定会在众所周知的常见条件下产生差距。

这些类型的整数通常是在交易期间产生的。如果事务回滚，则该整数将被丢弃。没有尝试再次使用它。下一次成功 INSERT 到同一个表中将创建一个间隙。

从这样的表中删除行不会弄乱主键。它只是留下了一个空白。数量和差距都相对没有意义。

# javascript - 基于下拉菜单选择查询数据库

> ID：13674855
> 
> 赞同：0
> 
> 时间：2012-12-02T22:56:23.867
> 
> 标签：javascript, jquery, ruby-on-rails

如何根据下拉菜单选择查询我的数据库？

看法：

```
 <div class="field">
    <label>Category</label><br />

    <select name="category[id]" id="category_id">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    </select>
  </div> 
```

控制器：

```
 s = params[category_id]
   @users = User.where("status = ?", s) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:26:16.810

假设您通过 GET 或 POST 正确提交表单数据，您需要对代码进行以下更改

```
s = params[:category][:id] # <-- category[id] as a form field name is referenced like this through params
@users = User.where("status = ?", s) 
```

# c++ - C/C++ 中奇怪的地址转换？

> ID：13674856
> 
> 赞同：-1
> 
> 时间：2012-12-02T22:56:35.707
> 
> 标签：c++, pointers, memory-address

我不能说我知道 C/C++ 不好，但我遇到过有趣的语法。我有这个代码：

```
int i=7;
char* m=(char*)&i;
m[2]=9;
cout<<i; 
```

它的输出为 589831。所以有人可以详细解释一下这里发生了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T23:01:02.863

1.  一个 4 字节的整数用数字 7 填充。
2.  4 字节整数映射到四个单字节（字符）的数组。在 x86 这样的小端架构上，最低有效字节在数字中排在第一位，因此数组在内存中看起来像这样：`{ 07, 00, 00, 00 }`
3.  整数斜杠字节数组的第 3 个字节更改为 9。现在看起来像这样：`{ 07, 00, 09, 00 }`
4.  结果整数（十六进制 90007）被写入标准输出（十进制格式：589831）。

长话短说，这是一个如何在多字节整数中操作单个字节的示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T23:06:35.100

整数`i`很可能占用 4 个字节，以最低值在前（小端序）排列。在内存中，值如下所示：

```
0x07 0x00 0x00 0x00 
```

您更改了索引 2 处的值，所以现在它看起来像：

```
0x07 0x00 0x09 0x00 
```

如果您反转字节并将它们重新组合在一起，它们会使十六进制值 0x00090007 与十进制的 589831 相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T23:01:13.657

您将整数地址转换为 a`char*`然后使用数组表示法对其进行修改。这一步

```
m[2] = 9; 
```

和指针算术一样

```
*(m+2) = 9; 
```

也就是说，它正在修改地址为`m`+ 2字节的字节。因此，您已更改初始整数值中的字节之一（第 3 个）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T23:17:38.747

这是我对正在发生的事情的细分，然后是解释。

```
// An integer on the stack, probably 4 bytes big, but we can't say that for sure.
int i=7; // Looks like 0x0000007 in memory. Endianness needs to be considered.

// Treat that integer as a \0 terminated string.
char* m=(char*)&i; // Acts as an empty string since the first byte is a 0, but we can't count on that.

// Set the second byte to 9.
m[2]=9; // Results in i being 0x00090007 (589831 decimal) on whatever architecture you are running. Once again, can't count on it.

// Print the modified integer.
cout<<i; 
```

由于三个原因，这是一件非常危险和愚蠢的事情......

1.  您不应该指望架构的[字节序](https://en.wikipedia.org/wiki/Endianness)。您的代码最终可能会在具有不同底层表示形式的 CPU 上运行`int`。

2.  你不能指望`int`总是 4 个字节。

3.  你现在有一个`char*`如果你去对它执行字符串操作可能会导致崩溃。在您的特定情况下，它将打印一个空字符串，但该整数中没有 0 字节并继续读取堆栈的其他部分并不需要太多。

如果你*真的，真的，真的*需要这样做，首选的方法是使用[联合](https://en.wikipedia.org/wiki/Union_%28computer_science%29#C.2FC.2B.2B)，但这种小玩意很容易出错，联合几乎没有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T23:11:52.700

`int i=7`为整数保留 4 个字节的内存，并且取决于 CPU 架构（假设你的是 i86）会在内存中产生类似的东西 `7 0 0 0`

然后创建一个指针 m 指向`7 0 0 0`. 在`m[2] = 9`内存应该看起来像 之后`7 0 9 0`（数组从零开始）；

然后你打印出我

# web - Pharo Smalltalk 的类似 Sinatra 的网络框架

> ID：13674859
> 
> 赞同：4
> 
> 时间：2012-12-02T22:57:03.710
> 
> 标签：web, sinatra, smalltalk, web-frameworks, pharo

Pharo是否有类似[Sinatra](http://www.sinatrarb.com/)的网络框架？

或者 Zinc-HTTP 组件可以或多或少地开箱即用吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T13:01:39.403

根据您的具体需求，[Seaside-REST](http://code.google.com/p/seaside/wiki/SeasideRest)也可能很有趣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T12:18:11.570

Tim Felgentreff亲切地向我指出了**Ratpack**

[http://ss3.gemstone.com/ss/RatPack.html](http://ss3.gemstone.com/ss/RatPack.html)

他还有一个 github 存储库，其中可能包含更新的代码：

[https://github.com/timfel/ratpack](https://github.com/timfel/ratpack)

# jquery - jQuery图像循环不显示任何图像

> ID：13674866
> 
> 赞同：2
> 
> 时间：2012-12-02T22:57:50.083
> 
> 标签：jquery, html, web

我正在尝试在 jQuery 中创建一个非常基本的图片库。目标是让 3 张图像按顺序淡入和淡出。所以显示图像 1，淡入图像 2 等，然后整个事情再次循环。

到目前为止，我的 HTML 代码如下：

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Slider</title>
<style type="text/css">

.slider{
  width: 2848px;
  height: 2136px;
  overflow: hidden;
  margin: 30px auto;
}

.slider img{
  width:2848px;
  height:2136px;
  display:none;
}

</style>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
<script src="Slider2.js"></script>

</head>
<body onload="Slider2"();>
<div class="slider">
        <img id="1" src="31.jpg" border="0" alt="city"/>
        <img id="2" src="2vrtigo2.jpg" border="0" alt="roof"/>
        <img id="3" src="3.jpg" border="0" alt="sea"/>
</div>
</body> 
```

jQuery 代码如下所示：

```
function Slider2()
{
var total = $(".slider img").size();

for (i=1; i<=total; i+=1)
{
    $(".slider #"+i).fadeIn(600);
    $(".slider #"+i).delay(2000).hide;  
}} 
```

一个快速的语法说明，我还尝试在 For 循环的最后一个参数中使用 i++。此代码的结果是一个空白的白页。我知道一些 HTML 正在编译，因为巨大的 2848x2136 div 在浏览器上创建了滚动条。

如果有人可以帮助我，那将不胜感激。显然，我对 Web 编程比较陌生，并且希望能深入了解为什么这不起作用。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:33:32.000

有关语法问题，请参阅 Nelsons 的答案，但您的逻辑也完全错误，您的 jquery 将一次显示所有图像，您需要在延迟中引入一个乘数。

您在延迟中需要乘数的原因是，当您遍历 for 循环中的元素时，它不会运行 i=1 的循环，然后等待它完成，然后再运行 i=2 的循环，而是运行它们都在几毫秒内，为了让动画一个接一个地运行，您需要将每个动画延迟更长的时间。在我编辑的代码中，所有的淡入淡出同时发生，然后在触发淡入淡出之前每个图像都有不同的延迟。

您似乎在 hide() / show() 和 fadeIn() / fadeOut() 之间混淆： hide() / show() 作用于元素显示属性，将其设置为 none 或 block。fadeIn() / fadeOut() 作用于元素不透明度设置，在 0 和 1 之间设置动画。你需要选择一件事来改变。

我有一些你想要在 js fiddle 上工作的东西：http: [//jsfiddle.net/9mgu7/1/](http://jsfiddle.net/9mgu7/1/)

抱歉，我弄乱了您的代码，因为 js fiddle 似乎没有触发 onload 功能，并且我需要适合屏幕的图像 - 另外请注意，我所做的也无法正常工作，因为我没有考虑淡入/淡出时间在我的延迟中，动画中存在重叠，随着时间的推移会变得更糟 - 但那是你可以玩的东西。：

HTML：

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Slider</title>
</head>
<body>
    <div class="slider">
        <img id="img1" src="http://placehold.it/350x150/dddddd" border="0" alt="city"/>
        <img id="img2" src="http://placehold.it/350x150/444444" border="0" alt="roof"/>
        <img id="img3" src="http://placehold.it/350x150/111111" border="0" alt="sea"/>
    </div>
</body> 
```

CSS：

```
.slider{   
    width: 350px;
    height: 150px;
    overflow: hidden;
    margin: 30px auto;
    display:block;    
}  
.slider img{   
    width:350px;   
    height:150px;
    opacity:1;
} 
```

JS：

```
$(document).ready(function(){
    var total = $(".slider img").size();
    for (i=1; i<=total; i++)
    {
        $(".slider #img"+i).fadeIn(600).delay(2000*i).fadeOut(600);        
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T23:02:04.403

您缺少方法的结束参数`hide()`：

```
$(".slider #"+i).delay(2000).hide;
                                 ^^---Here, must be hide() 
```

您也可以将这两行写成一行，如下所示：

```
$(".slider #"+i).fadeIn(600).delay(2000).hide(); 
```

**更新：**
另外，您的以下行：

```
<body onload="Slider2"();> 
```

应该是这样的：

```
<body onload="Slider2();"> 
```

# android - 未找到活动异常。当代码改变时。需要帮助

> ID：13674869
> 
> 赞同：0
> 
> 时间：2012-12-02T22:57:57.187
> 
> 标签：android

我得到活动未找到异常。它与我一起使用 f9 具有相同的意图和表现。但是当我在联系活动代码中进行更改时，就会开始出现异常。
现在联系活动代码如下

```
public class Contact extends Activity {

   // @TargetApi(5)
    @Override
    public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);

            setContentView(R.layout.contactlist);

            Button btnSimple = (Button) findViewById(R.id.btnSimple);

            btnSimple.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {

                    Toast.makeText(getApplicationContext(),

                            " You clicked Simple ListView button", Toast.LENGTH_SHORT).show();

                    Intent intent = new Intent(v.getContext(), Upload_Contacts.class);
            });
    }}
                    startActivityForResult(intent, 0);

                } 
```

这是我的日志猫

```
12-03 03:42:12.128: D/AndroidRuntime(1130): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
12-03 03:42:12.128: D/AndroidRuntime(1130): CheckJNI is ON
12-03 03:42:12.728: D/AndroidRuntime(1130): Calling main entry com.android.commands.pm.Pm
12-03 03:42:12.758: D/AndroidRuntime(1130): Shutting down VM
12-03 03:42:12.778: D/dalvikvm(1130): GC_CONCURRENT freed 101K, 71% free 297K/1024K, external 0K/0K, paused 1ms+1ms
12-03 03:42:12.778: D/dalvikvm(1130): Debugger has detached; object registry had 1 entries
12-03 03:42:12.788: I/AndroidRuntime(1130): NOTE: attach of thread 'Binder Thread #3' failed
12-03 03:42:13.318: D/AndroidRuntime(1140): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
12-03 03:42:13.318: D/AndroidRuntime(1140): CheckJNI is ON
12-03 03:42:14.019: D/AndroidRuntime(1140): Calling main entry com.android.commands.am.Am
12-03 03:42:14.058: I/ActivityManager(61): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.fyp.smb/.Login } from pid 1140
12-03 03:42:14.098: D/AndroidRuntime(1140): Shutting down VM
12-03 03:42:14.108: D/dalvikvm(1140): GC_CONCURRENT freed 102K, 69% free 319K/1024K, external 0K/0K, paused 1ms+1ms
12-03 03:42:14.108: D/dalvikvm(1140): Debugger has detached; object registry had 1 entries
12-03 03:42:14.148: I/AndroidRuntime(1140): NOTE: attach of thread 'Binder Thread #3' failed
12-03 03:42:15.558: I/ActivityManager(61): Displayed com.fyp.smb/.Login: +1s484ms
12-03 03:42:17.248: I/ActivityManager(61): Starting: Intent { act=com.fyp.smb.MAIN cmp=com.fyp.smb/.Main } from pid 1121
12-03 03:42:19.408: I/ActivityManager(61): Displayed com.fyp.smb/.Main: +2s62ms
12-03 03:42:24.608: D/dalvikvm(127): GC_EXPLICIT freed 32K, 52% free 2886K/5895K, external 4738K/5293K, paused 148ms
12-03 03:42:40.268: I/ActivityManager(61): Starting: Intent { act=com.fyp.smb.CONTACTS cmp=com.fyp.smb/.Contact } from pid 1121
12-03 03:42:40.879: W/ActivityManager(61): Activity pause timeout for HistoryRecord{4078dc90 com.fyp.smb/.Main}
12-03 03:42:50.386: W/ActivityManager(61): Launch timeout has expired, giving up wake lock!
12-03 03:42:50.952: W/ActivityManager(61): Activity idle timeout for HistoryRecord{407eb998 com.fyp.smb/.Contact} 
```

这是我的意图。

```
Intent contact = new Intent("com.fyp.smb.CONTACTS");
                startActivity(contact); 
```

这是清单

```
<activity
            android:name=".Contact"
            android:label="@string/title_activity_login" >
            <intent-filter>
                <action android:name="com.fyp.smb.CONTACTS" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity 
```

为什么会发生错误，请提供任何解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:31:34.553

不管你如何写意图？

```
Intent contact = new Intent(getApplicationContext(), Contact.class);
            this.startActivity(contact); 
```

# objective-c - IKImageView 和 scrollToPoint: 或 scrollToRect:

> ID：13674870
> 
> 赞同：3
> 
> 时间：2012-12-02T22:58:00.957
> 
> 标签：objective-c, macos, imagekit, ikimageview

我尝试使用 IKImageView 只是因为它提供了许多内置功能。然而，它似乎也提供了内置的头痛。其中最新的是尝试通过记录的方法之一以编程方式滚动：

```
- (void)scrollToPoint:(NSPoint)point
- (void)scrollToRect:(NSRect)rect
- setImageZoomFactor:centerPoint: 
```

我无法进行任何滚动。目前还不清楚这些点或矩形应该是哪个坐标系，所以我尝试了许多值，但始终无法让它做任何事情。有没有人成功使用过这些？我找不到任何可以执行此操作的示例代码，无论是官方的还是其他的。

网上有不少关于 IKImageView 滚动条的讨论，我的快速实验似乎证明了原因，这确实不明显/困难。虽然理论上我可以这样做以编程方式滚动。

# java - 使用值对地图进行排序的最佳方法

> ID：13674871
> 
> 赞同：4
> 
> 时间：2012-12-02T22:58:16.307
> 
> 标签：java, sorting, map

```
private Map<Character, Integer> frequencies; 
```

我有一个`Map`with`Character`是 Key 和它相关`Integer`的 Value。

按价值排序的最佳/最快/有效方式是什么？

即地图可能有
a,1
c,10
p,5
s,7
排序后，它将是
a,1
p,5
s,7
c,10

我正在考虑使用优先队列和整数来做，但如果整数 val 是重复的，我会丢失 Character 值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T23:04:11.927

优先级队列是一种不错的方法 - 您需要做的就是从地图中[获取`Entry`集合](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#entrySet%28%29)，并覆盖 a`Comparator`作为队列的输入。

```
Map<Character,Integer> map = new HashMap<Character, Integer>();
map.put('a',1);
map.put('c',10);
map.put('p',5);
map.put('2',7);
PriorityQueue<Entry<Character, Integer>> pq = new PriorityQueue<Map.Entry<Character,Integer>>(map.size(), new Comparator<Entry<Character, Integer>>() {

    @Override
    public int compare(Entry<Character, Integer> arg0,
            Entry<Character, Integer> arg1) {
        return arg0.getValue().compareTo(arg1.getValue());
    }
});
pq.addAll(map.entrySet());
while (!pq.isEmpty()) {
    System.out.println(pq.poll());
} 
```

将产生（如预期）：

```
a=1
p=5
2=7
c=10 
```

* * *

**注意：**避免使用带键的 a`Set`或 a`Map`作为映射的值 - 因为它不能很好地处理重复值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T23:03:40.977

使用谷歌番石榴。它包含可以反转的 BiMap 实现，然后只对反转的映射键进行排序。

```
Map<Character, Integer> myMap = HashBiMap.create();
// put your values in myMap
Map<Integer, Character> inversed = myMap.inverse();
SortedMap<Integer, Character> sortedInversed = new TreeMap<Integer, Character>(inversed); 
```

所以只需迭代 sortedInversed

# java - 如何创建自己的单链表

> ID：13674875
> 
> 赞同：0
> 
> 时间：2012-12-02T22:58:29.837
> 
> 标签：java, linked-list

我正在尝试将适用于 ArrayLists 的代码转换为适用于单链表的代码。数组列表由之前创建的 Shape 对象组成，我知道工作。然后，可以将新形状添加到数组列表的末尾。此外，可以使用索引引用从此列表中删除特定形状。但是，当我将其切换到链接列表时，我并没有得到我需要的东西。这是数组列表的代码：

```
import java.util.ArrayList;

public class ShapeLinkedList {
    ArrayList<Shape> list = new ArrayList<Shape>();

    public ShapeLinkedList() {
    }

    public void addToRear(Shape shape) {
        list.add(shape);
        System.out.println("Added "+shape);
    }

    public Shape get(int index) {
        return list.get(index);
    }

    public int size() {
        return list.size();
    }

    public Shape remove(int index) {
        Shape temp = list.remove(index);
        System.out.println("Removed "+temp);
        return temp;
    }
} 
```

我不能更改方法的名称，我必须使用所有相同的方法。所以这就是我到目前为止的链表：

```
public class ShapeLinkedList {
    ShapeNode head;
    int count = 0;

    public ShapeLinkedList() {}

    public void addToRear(Shape shape) {
        ShapeNode end = new ShapeNode(shape);
        if (head == null) {
            head = end;
        }
        //loop through Linked List until we find the end of the list
        while (head.next != null) {
            head = head.next;
            count++;
        }
        //set the new node to the Shape shape and the next one will be null
        head.next = end;
        count++;
        //System.out.println("Added " + shape);
    }

    public Shape get(int index) {
        for (int i = 0; i <= index; i++) {

        }
        Shape rem = ;
        return rem
    }

    public int size() {
        return count;
    }

    public Shape remove(int index) {
        if (index == 0) {
            Shape temp = head;
            head = head.next;
        } else if () {
            Shape temp = ;
        }
        //System.out.println("Removed " + temp);
        return temp;
    }

    private class ShapeNode {
        Shape shp;
        ShapeNode next;

        public ShapeNode(Shape shp) {
            this.shp = shp;
            next = null;
        }
    }
} 
```

我需要帮助构建 Shape 的 getter，因为我不知道如何找到 LinkedList 的索引，也不知道如何在该索引处引用特定的形状类型。另外，我需要删除方法的帮助。我觉得一旦我获得了第一个遇到问题的吸气剂的必要信息，我应该能够解决我的第二个问题。有人有有用的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:52:15.043

```
 public Shape get(int index) {
        ShapeNode temp = head;
        while(index-- > 0) {
            temp = temp.next;
        }
        if(temp == null)
            throw new IndexOutOfBoundsException("Invalid index : " + index);
        Shape rem = temp.shp;
        return rem;
    } 
```

但这是`O(n)`链接列表。

# c - 遍历后被删除的表

> ID：13674879
> 
> 赞同：0
> 
> 时间：2012-12-02T22:59:30.320
> 
> 标签：c, pointers, linked-list, hashtable

出于某种原因，每当我访问表中的任何数据时，内容都会被替换为`null`. 该表是一个链表数组。

```
void print(struct foo ** bar) {
    struct foo ** helper = bar;
    for (i = 0; i < size; i++) {
        printf("%d: ", i);
        while (helper[i] != NULL) {
            printf("%s ", helper[i]->data);
            helper[i] = helper[i]->next;
        }
        printf("\n");
    }
    printf("\n");
} 
```

我尝试的任何方法都不起作用。该表打印一次，然后返回`null`第二次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T23:09:12.583

好吧，你修改你的数组

```
helper[i] = helper[i]->next; 
```

最终将其设置为 NULL。所以，你的问题不足为奇。

如果你想遍历你的哈希表，试试

```
struct foo *helper;
for (i = 0; i < tablesize; i++) {
    printf("%d: ", i);
    for (helper = bar[i]; helper != NULL; helper = helper->next)
        printf("%s ", helper->data);

    printf("\n");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T23:09:24.823

```
void print(struct foo ** bar) {

    int i;
    struct foo *ptr ;

    for (i = 0; i < tablesize; i++) {
        if (!bar[i]) continue;
        printf("%d: ", i);

        for (ptr=bar[i] ; ptr ; ptr = ptr->next ) {
            printf("%s ", ptr->data);
        }

        printf("\n");
    }
    printf("\n");
} 
```

# jpa - JPA 查询不起作用

> ID：13674881
> 
> 赞同：-1
> 
> 时间：2012-12-02T22:59:47.497
> 
> 标签：jpa

从表中获取用户 ID 的查询是什么？

表格是：

```
CREATE TABLE `UPLOADIMAGE` 
(
    `IMAGE_ID` int(11) NOT NULL AUTO_INCREMENT,
    `FILE_DATA` tinyblob,
    `FILE_NAME` varchar(255) DEFAULT NULL,
    `FILE_PATH` varchar(255) DEFAULT NULL,
    `USER_ID` int(11) DEFAULT NULL,
    PRIMARY KEY (`IMAGE_ID`),
    KEY `FKC057C7DA8B4610BF` (`USER_ID`),
    CONSTRAINT `FKC057C7DA8B4610BF` 
        FOREIGN KEY (`USER_ID`) REFERENCES `USER` (`USER_ID`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8; 
```

这是我获取用户标识的java代码：

```
public int showUserImageId(int userid)
{
    String askedQuery="select u.USER_ID from UPLOADIMAGE u where u.USER_ID = :id";
    TypedQuery<UploadImage> query =   
        entityManager.createQuery(askedQuery,UploadImage.class);
    entityManager.getTransaction().begin();
    query.setParameter("id", userid);
    int out= query.getSingleResult().getUser().getUserid();
    entityManager.getTransaction().commit();
    return out;
} 
```

我的 UploadImage 实体是：

```
 @Entity
  @Table(name="UPLOADIMAGE")
   public class UploadImage
    {

@Id
@GeneratedValue(strategy=GenerationType.AUTO)
@Column(name="IMAGE_ID")
private int imageid;

@Column(name="FILE_NAME")
private String fileName;

@Column(name="FILE_PATH")
private String filePath;

@JoinColumn(name="USER_ID")
@OneToOne(cascade= CascadeType.DETACH)
private User user;

@Column(name="FILE_DATA")
private CommonsMultipartFile FileData;
     } 
```

我得到的错误是：

```
 Exception in thread "main" java.lang.IllegalArgumentException:   org.hibernate.hql.ast.QuerySyntaxException: UPLOADIMAGE is not mapped [select  u.USER_ID from   UPLOADIMAGE u where u.USER_ID = :id]
at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1222)
at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1168)
at org.hibernate.ejb.AbstractEntityManagerImpl.createQuery(AbstractEntityManagerImpl.java:292)
at se.datalayer.guards.service.ImageUploadService.showUserImageId(ImageUploadService.java:162)
at se.datalayer.guards.main.Main.getUserIdFromImage(Main.java:70)
at se.datalayer.guards.main.Main.main(Main.java:48)
    Caused by: org.hibernate.hql.ast.QuerySyntaxException: UPLOADIMAGE is not mapped [select  u.USER_ID from UPLOADIMAGE u where u.USER_ID = :id]
at  org.hibernate.hql.ast.util.SessionFactoryHelper.requireClassPersister(SessionFactoryHelper.java:181)
at org.hibernate.hql.ast.tree.FromElementFactory.addFromElement(FromElementFactory.java:111)
at org.hibernate.hql.ast.tree.FromClause.addFromElement(FromClause.java:93)
at org.hibernate.hql.ast.HqlSqlWalker.createFromElement(HqlSqlWalker.java:315)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.fromElement(HqlSqlBaseWalker.java:3357)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.fromElementList(HqlSqlBaseWalker.java:3241)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.fromClause(HqlSqlBaseWalker.java:726)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:577)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:294)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:237)
at org.hibernate.hql.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:254)
at org.hibernate.hql.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:185)
at org.hibernate.hql.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:136)
at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:101)
at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:80)
at org.hibernate.engine.query.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:98)
at org.hibernate.impl.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:156)
at org.hibernate.impl.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:135)
at org.hibernate.impl.SessionImpl.createQuery(SessionImpl.java:1760)
at org.hibernate.ejb.AbstractEntityManagerImpl.createQuery(AbstractEntityManagerImpl.java:277)
... 3 more 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:08:27.210

JPQL 不使用表和列。它使用 JPA 实体及其持久字段。因此，要使用 JPQL 查询，您需要一个 JPA 实体`UploadImage`，映射到您的表，并包含持久字段（imageId、userId、filePath 等）。

然后查询看起来像

```
select u.userId from UploadImage u where u.userId = :userId 
```

JPA 是一个 ORM：对象关系映射器。重点是能够使用对象而不是关系数据。

也就是说，我并没有真正看到使用此用户 ID 作为参数从数据库中获取用户 ID 的意义。

# jquery-ui - 在带有服务器端数据的日期选择器上显示事件

> ID：13674884
> 
> 赞同：0
> 
> 时间：2012-12-02T23:00:01.613
> 
> 标签：jquery-ui, datepicker

我一直忙于为客户创建一个解决方案，但事实证明它比我想象的要困难一些。我正在使用 jQuery Datepicker 小部件从服务器端代码显示日历事件（每月视图）。以下代码中的所有内容都有效，除了 CSS。它没有改变任何东西，似乎我已经尝试了世界上的一切。

日历显示在页面加载 (MVC) 的月视图中，如果用户有事件，则该天应该有不同的背景颜色。此外，当用户每月更改时，会发生相同的逻辑（对服务器的 ajax 调用）。同样，这一切都运行良好。我更改背景颜色的指令不会。

```
<script type="text/javascript">
    $(document).ready(function () {

        $.expr[":"].exactly = function (el, i, m) {
            var s = m[3];
            if (!s) return false;
            return eval("/^" + s + "$/i").test($(el).text());
        };

        var currentYear = (new Date).getFullYear();
        var currentMonth = (new Date).getMonth();

        function getTheData(year, month) {
            var theYear = year;
            var theMonth = month;
            //alert(theYear + ", " + theMonth);

            $.post("GetMeSomeData", { year: theYear, month: theMonth }, function(data) {
                //cycle through the dates and address the CSS appropriately
                var i = 0;
                for (i = 0; i < data.length; i++) {
                    $('.ui-datepicker-calendar td a:exactly(' + data[i]['d'] + ')')
                        .css({ backgroundColor: 'blue' });
                }
            });
        }

        $('#date').datepicker({
            inline: true,
            beforeShowDay: getTheData(currentYear, currentMonth),
            onSelect: function (dateText, inst) {
                Date.prototype.toString = function () { return isNaN(this) ? 'NaN' : [this.getDate(), this.getMonth(), this.getFullYear()].join('/'); };
                d = new Date(dateText);
                //alert(d.getDate() + ", " + d.getFullYear());
                getTheData(d.getFullYear(), d.getDate());
            },
            onChangeMonthYear: function (year, month, inst) {
                //alert(year + ", " + month);
                getTheData(year, month);

            }
        });
    });

</script> 
```

# c++ - wxWidgets - 通过 DLL 将项目添加到 sizer

> ID：13674887
> 
> 赞同：1
> 
> 时间：2012-12-02T23:00:30.723
> 
> 标签：c++, visual-c++, user-interface, dll, wxwidgets

我有一个使用 wxWidgets（C++、MSVC）设置的 GUI，部分功能是通过 DLL 向 GUI 添加元素。本质上，我会将一个 sizer 传递给 DLL，它会根据 DLL 中的内容依次添加元素。

有人可以为我指出如何设置 DLL 的正确方向吗？我看过，但没有看到任何与我正在寻找的相似的东西。元素的编程对我来说很好，我只需要了解如何构造 DLL 编程。

帮助表示赞赏。

* * *

更新

我做了类似于[http://wiki.wxwidgets.org/Programs_That_Support_Plugins](http://wiki.wxwidgets.org/Programs_That_Support_Plugins)的事情。

本质上，每当我尝试从 DLL 中使用 wxWidgets 组件时，都会遇到访问冲突读取位置错误。

在 samplePlugin.cpp 中，如果我使用

```
void samplePlugin::PerformTasks()
{
   wxMessageBox(_("I would if I could..."));
} 
```

我得到了错误。但是，如果我使用

```
void samplePlugin::PerformTasks()
{
   MessageBox(0,"Testing this thing","Test",0);
} 
```

这不是 wxWidgets，而是操作系统原生的，消息框工作正常。

我试过添加 WXUSINGDLL;WXMAKINGDLL; 在 DLL 和 App 项目中的 MSVC 中的预处理器定义中。DLL 编译得很好，但在这种情况下我什至无法编译应用程序并获得异常。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T23:25:16.953

创建一个 DLL 项目并指定预处理器指令，例如 /DIFLOOR_EXPORTS_COMMONPLUGINBASE（此预处理器变量仅在 DLL 项目中）

然后创建一个标头，指定您的类是导入还是导出：

**CommonPluing.h**

```
#ifndef _COMMONPLUGIN_H
#define _COMMONPLUGIN_H

#if defined(__WXMSW__)
#ifdef IFLOOR_EXPORTS_COMMONPLUGINBASE
#define IFLOOR_API_COMMONPLUGINBASE __declspec(dllexport)
#else
#define IFLOOR_API_COMMONPLUGINBASE __declspec(dllimport)
#endif
#else
#define IFLOOR_API_COMMONPLUGINBASE
#endif

#endif // _COMMONPLUGIN_H 
```

然后创建导出的类并从第一个标题添加说明符：

**CommonConfigWindowBase.h**

```
class IFLOOR_API_COMMONPLUGINBASE CommonConfigWindowBase : public wxPanel 
{
    DECLARE_DYNAMIC_CLASS(CommonConfigWindowBase)
public:
    /// Constructors
    CommonConfigWindowBase();
    CommonConfigWindowBase(wxWindow *parent,
        wxWindowID winid = wxID_ANY,
        const wxPoint& pos = wxDefaultPosition,
        const wxSize& size = wxDefaultSize,
        long style = wxTAB_TRAVERSAL | wxNO_BORDER,
        const wxString& name = wxPanelNameStr);

    /// Pseudo ctor
    bool Create(wxWindow *parent,
        wxWindowID winid = wxID_ANY,
        const wxPoint& pos = wxDefaultPosition,
        const wxSize& size = wxDefaultSize,
        long style = wxTAB_TRAVERSAL | wxNO_BORDER,
        const wxString& name = wxPanelNameStr);

    virtual ~CommonConfigWindowBase();

    /// Reads config from the effect
    virtual bool ReadConfig(){return true;}

    /// Saves config to the effect
    virtual bool SaveConfig(){return true;}
}; 
```

创建可从主可执行文件调用的导出函数（您可能希望创建一个包装类并调用返回 wxWindow * 的方法）。您需要一个导出的方法来创建插件对象和删除它。你还需要一个！！！虚拟析构函数！！！对于导出的对象和您的窗口。所以假设 SportEffectPlugin 包含一个 wxWindow * CreateConfigWindow(wxWindow * parent) 方法：

**出口.cpp**

```
#include "stdwx.h"
#include "CommonConfigWindowBase.h"

IFLOOR_API_COMMONPLUGINBASE IFloorEffectPluginBase * CreatePlugin(const wxString& sBasePath, iFloorBlobVector * blobs)
{
    return new SportEffectPlugin(sBasePath, blobs);
}

IFLOOR_API_COMMONPLUGINBASE void DeletePlugin(IFloorEffectPluginBase * plugin)
{
    wxDELETE(plugin);
} 
```

然后在主应用程序中加载 DLL（您需要根据需要采用以下代码）：

**加载器.cpp**

```
bool IFloorSystem::LoadPlugins(bool forceProgramPath)
{
    if (!m_DefaultPlugin)
    {
        m_DefaultPlugin = new DefaultEffectPlugin(GetDefaultGraphicsPath());
        RegisterEffectPlugin(m_DefaultPlugin);
    }

    wxFileName fn;
    fn.AssignDir(GetPluginsPath(forceProgramPath));
    wxLogDebug(wxT("%s"), fn.GetFullPath().data());
    fn.AppendDir(wxT("effects"));
    wxLogDebug(wxT("%s"), fn.GetFullPath().data());
    if (!fn.DirExists())
        return false;
    wxDir dir(fn.GetFullPath());
    if (!dir.IsOpened())
        return false;

    // scan for plugins
    wxString filename;
    wxString ext = wxT("*.dll"); // TODO: change ext for different platforms
    bool bFound = dir.GetFirst(&filename, ext, wxDIR_FILES);
    while (bFound)
    {
        fn.SetFullName(filename);
        wxDynamicLibrary * dll = new wxDynamicLibrary(fn.GetFullPath());
        if (dll->IsLoaded())
        {
            wxDYNLIB_FUNCTION(CreatePlugin_function, CreatePlugin, *dll);
            if (pfnCreatePlugin)
            {
                IFloorEffectPluginBase* plugin = pfnCreatePlugin(GetDefaultGraphicsPath(), &IFloorStorage::Instance().GetBlobs());
                RegisterEffectPlugin(plugin);
                m_DllList.Append(dll);
                m_MapPluginsDll[plugin] = dll;
            }
            else
                wxDELETE(dll);
        }
        bFound = dir.GetNext(&filename);
    }
    return true;
} 
```

最后，您需要通过调用 DLL 中的函数来卸载插件并删除所有加载的对象：

```
bool IFloorSystem::UnRegisterEffectPlugin(IFloorEffectPluginBase * plugin)
{
    IFloorEffectPluginBaseList::compatibility_iterator it = m_Plugins.Find(plugin);
    if (it == NULL)
        return false;

    do 
    {
        wxDynamicLibrary * dll = m_MapPluginsDll[plugin];
        if (!dll) // Probably plugin was not loaded from dll
            break;

        wxDYNLIB_FUNCTION(DeletePlugin_function, DeletePlugin, *dll);
        if (pfnDeletePlugin)
        {
            pfnDeletePlugin(plugin);
            m_Plugins.Erase(it);
            m_MapPluginsDll.erase(plugin);
            return true;
        }
    } while (false);

    // If plugin is not loaded from DLL
    wxDELETE(plugin);
    m_Plugins.Erase(it);

    return true;
} 
```

# macos - 使用 pkgbuild 创建包时出现未知错误

> ID：13674890
> 
> 赞同：0
> 
> 时间：2012-12-02T23:00:42.910
> 
> 标签：macos, installation, pkgbuild

我遵循了几个教程——它们似乎都说了同样的话——关于如何使用 OS X 系统提供的`pkgbuild`工具创建可部署的平面包 (.pkg)。包总是生成得很好。但是，他们确实不想安装。

在提示更高权限后，运行图形 Apple 安装程序或命令行界面`installer`会提前中止安装，并给出一般的“未知错误”。

经过仔细调查几小时后，我发现我也无法安装其他软件包。甚至没有来自 OS X App Store 的更新和新安装。为什么我不能安装我自己的或任何其他软件包？发生了什么事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:00:42.910

安装程序守护程序服务本身没有响应。从活动监视器强制退出已安装的程序，或从命令行使用`sudo killall installd`.

# gcc - 何时对多个共享库使用某些优化，例如 -fwhole-program 和 -fprofile-generate

> ID：13674894
> 
> 赞同：10
> 
> 时间：2012-12-02T23:00:48.587
> 
> 标签：gcc, compiler-optimization, compiler-flags

可能是一个简单的答案；我对 GCC 文档中用于其中一些标志的语言感到非常困惑！

无论如何，我有三个库和一个使用这三个库的程序。我使用单独的（可能）不同的警告标志集分别编译我的每个库。但是，我使用相同的优化标志集编译所有三个库。

然后，我使用自己的一组警告标志和在库编译期间使用的相同优化标志来编译我在这三个库中链接的主程序。

1）我是否必须编译带有优化标志的库，或者我可以在编译最终程序并链接到库时只使用这些标志？如果是后者，它会优化这些库中的全部或部分代码（可能是被调用的代码）吗？

2）我想使用 -fwhole-program -flto -fuse-linker-plugin 和链接器插件黄金。我在哪个阶段使用这些进行编译......只是最终编译还是在编译库期间需要存在这些标志？

3) 与 2) 几乎相同，但是使用 -fprofile-generate -fprofile-arcs 和 -fprofile-use。我知道一个人首先使用生成运行程序，然后使用。但是，我必须使用生成/使用等编译每个库还是只编译最终程序？如果它只是最后一个程序，那么当我使用 -fprofile-use 进行编译时，它还会优化库功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-13T16:01:26.407

> 然后，我使用自己的一组警告标志和在库编译期间使用的相同优化标志来编译在这三个库中链接的主程序。

这里有两个步骤，没有一个。编译主程序以生成目标文件是第一步，然后将所有内容链接在一起以生成可执行二进制文件是第二步。

> 1）我是否必须编译带有优化标志的库，或者我可以在编译最终程序并链接到库时只使用这些标志？如果是后者，它会优化这些库中的全部或部分代码（可能是被调用的代码）吗？

必须为每个源代码文件指定优化标志和任何其他编译器级别的标志。每次编译源文件以生成目标文件时，都需要指定标志。然后生成库或可执行文件由链接器使用链接器的一组不同标志来完成。

> 2）我想使用 -fwhole-program -flto -fuse-linker-plugin 和链接器插件黄金。我在哪个阶段使用这些进行编译......只是最终编译还是在编译库期间需要存在这些标志？

您必须`-flto`在编译每个源代码文件（或您可用的源代码文件）时指定。在使用黄金链接器或 GNU ld 2.21 或更新版本时，您不需要指定`-fuse-linker-plugin`和。`-fwhole-program`有关详细信息，[请](https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)参阅`-flto`.

> 3) 与 2) 几乎相同，但是使用 -fprofile-generate -fprofile-arcs 和 -fprofile-use。我知道一个人首先使用生成运行程序，然后使用。但是，我必须使用生成/使用等编译每个库还是只编译最终程序？如果它只是最后一个程序，那么当我使用 -fprofile-use 进行编译时，它还会优化库功能吗？

同 2。需要为每个源代码文件指定这些标志，以便优化所有代码。

请注意，如果您没有源代码，您仍然可以链接未使用相同标志优化的静态或动态库，并且代码将起作用。也就是说，您可以混合在不同级别优化的代码。

# php - Jquery Uploader 未保存到站点根目录中的文件夹

> ID：13674896
> 
> 赞同：0
> 
> 时间：2012-12-02T23:00:56.437
> 
> 标签：php, jquery, file-upload

我正在尝试将 Jquery Uploader 集成到我的网站 >> [http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

我遇到的问题是我似乎无法将它保存到我要保存到的文件夹中。

在 UploadHander.php 我有以下设置>>

```
'script_url' => $this->get_full_url().'/',

        'upload_dir' => dirname($_SERVER['SCRIPT_FILENAME']).'./images/machinery/',

        'upload_url' => $this->get_full_url().'./images/machinery/', 
```

这会生成一个如下所示的图片上传网址 >>

[http://domain.com/rcsetch/up/server/php/machinery/image.jpg](http://domain.com/rcsetch/up/server/php/machinery/image.jpg)

除了将我的 php 文件放在网站的根目录之外，我不确定如何让它工作，因为我想要它做的是将文件上传到[http://domain.com/images/machinery](http://domain.com/images/machinery) 而不是在上传器的所有 php 文件所在的目录中创建一个文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:08:25.157

替换您的以下行：

```
'upload_dir' => dirname($_SERVER['SCRIPT_FILENAME']).'./images/machinery/', 
```

对于这个：

```
'upload_dir' => dirname($_SERVER['SCRIPT_FILENAME']).'/images/machinery/', 
```

由于`dirname()`返回目录名称而不结束`/`，您错误地设置了上传路径目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T01:57:52.023

尝试`$_SERVER['DOCUMENT_ROOT']`代替`$_SERVER['SCRIPT_FILENAME']`.

```
'upload_dir' => $_SERVER['DOCUMENT_ROOT'].'/images/machinery/', 
```

更多信息[在这里](http://php.net/manual/en/reserved.variables.server.php)。

# apache - Nginx 静态前端 + 动态重定向到后端的 apache

> ID：13674918
> 
> 赞同：-1
> 
> 时间：2012-12-02T23:03:41.470
> 
> 标签：apache, static, proxy, nginx, location

我正在尝试做一件非常简单的事情：Nginx 找到 *.php => 重定向到 Apache Nginx 找到 *.jpg => 尝试静态，如果不存在 => 重定向到 Apache

但是如果不重复代码我找不到解决方案：

```
 location ~* \.(css|js|png|jpeg|gif)$ {
            access_log off;
            expires 30d;
            try_files $uri @proxy;
    }

    location / {
            proxy_set_header X-Real-IP  $remote_addr;
            proxy_set_header Host $host;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_pass http://127.0.0.1:8080;
    }

    location @proxy {
            proxy_set_header X-Real-IP  $remote_addr;
            proxy_set_header Host $host;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_pass http://127.0.0.1:8080;
    } 
```

我想说在位置/使用@proxy 位置，但找不到如何做到这一点。任何想法？

谢谢。

科尔科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:35:53.447

我还采用的一种减少重复代码的解决方案是将所有代理设置放在服务器块中（或在辅助文件中，如本例中的[http://wiki.nginx.org/FullExample](http://wiki.nginx.org/FullExample)）并仅保留`proxy_pass`在位置. 要将 IP 也放在一个地方，您可以使用上游（它是默认模块）： [http ://wiki.nginx.org/HttpUpstreamModule](http://wiki.nginx.org/HttpUpstreamModule)

```
proxy_set_header X-Real-IP  $remote_addr;
proxy_set_header Host $host;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;

upstream _backend {
    server 127.0.0.1:8080;
}

location ~* \.(css|js|png|jpeg|gif)$ {
    access_log off;
    expires 30d;
    try_files $uri @proxy;
}

location / {
    proxy_pass http://backend;
}

location @proxy {
    proxy_pass http://backend;
} 
```

# java - 除以 2 个数字不返回正确

> ID：13674921
> 
> 赞同：1
> 
> 时间：2012-12-02T23:03:56.907
> 
> 标签：java, android, double, division

> **可能的重复：**
> [Java 整数除法：如何产生双精度数？](https://stackoverflow.com/questions/3144610/java-integer-division-how-do-you-produce-a-double)

当我将 2 个数字相除以尝试得到类似 0.90 的结果时，我不断得到 1.0 或 0.0

```
int number1 = 6517253;
int number2 = 7195629;
double number3 = number1 / number2; //returns 0.0 supposed to be 0.9057239 and I want 0.90
double number4 = number2 / number1; //returns 1.0 supposed to be 1.1040893 and don't really want that one 
```

如果我将 double 更改为 float，也会做同样的事情。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T23:04:23.267

您应该将其中一个操作数转换为`double`. 尝试：

```
double number3 = (double) number1 / number2;
double number4 = (double) number2 / number1; 
```

这是因为 Java 推断出`int / int`as的类型`int`，但是`double / int`推断出的类型为`double`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T23:06:23.977

将其中一个数字转换为双倍：

```
 double number3 = number1 / (double) number 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T23:06:48.743

java中对文字或整数变量的每个操作都返回一个整数类型（uint32），因此您需要对操作进行类型转换

```
double number3 = (double)number1/number2; 
```

# assembly - 8 位和 16 位处理器如何通过两个寄存器访问更多 RAM？

> ID：13674924
> 
> 赞同：6
> 
> 时间：2012-12-02T23:04:10.830
> 
> 标签：assembly, ram, memory-address, 8-bit, intel-8080

一直让我感到困惑的是 8 位计算机如何访问超过 256 字节的 RAM。我知道它必须使用两个寄存器，但是任何人都可以向我展示一个在汇编代码中会是什么样子的例子吗？

像：

```
mov a, [x]   ??? 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T23:12:44.253

假设我们在寄存器 L 和 H 中有 LOWER 和 HIGHER 8 位地址的一半。例如，我们要从地址 32770 dec = 8002 hex 读取字节。

```
mov l, 02h  ;lower byte of address
mov h, 80h  ;higher byte of address
mov a, [hl] ;a <-- [h*256 + l] 
```

CPU 中存在许多寻址模式。所以我们可以有一个不同的例子，例如只有一个寄存器和一个立即地址：

```
mov h, 80h
mov a, [2]  ;a <-- [h*256 + immediate] 
```

它始终取决于特定的 CPU 架构。例如 Zilog Z80 被称为 8 位 CPU，但它也包含许多 16 位指令。您可以像这样对其进行索引寻址：

```
mov ix, 8002h  ;base address of an array
mov a,[ix+20]  ;a <-- [ix + 20] i.e. read a byte from an array like ix[20] in C 
```

**注意：** 那些旧的 8 位 CPU 使用 8 位累加器，即它们只能在 8 位寄存器中计算数学和其他算术内容，因此它们在软件计算级别上是 8 位的。而且它们的内存访问单元是8位的，即一次只能读取或写入一个字节的内存，所以它们在硬件层面上也是8位的。那些 16 位指令很慢，它们实际上是连续执行一对 8 位操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T23:09:55.717

让我们考虑一下 8080（Z80 等），它有 8 位寄存器，但可以将寄存器配对以像 16 位寄存器一样工作。最常用的对可能是 HL，它是 H 表示地址的 8 个高位，L 表示地址的 8 个低位。其他寄存器对是 BC 和 DE——同样，大多数指令一次只使用该对中的一个寄存器，但少数可以将这对一起使用以处理 16 位数量（例如，至少在内存服务的情况下，有一个可以将 DE 添加到 HL）。

一些指令也可以直接使用 16 位地址：

```
jmp 01234h 
```

6502 有点类似，但它限制了一些指令使用 RAM 的前 256 个字节（又名“页面 0”）。更高版本（65816？）确实支持选择不同的物理地址，但这些地址将被视为第 0 页。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-27T15:48:41.197

[有很多技术可以实现这一点](https://en.wikipedia.org/wiki/RAM_limit#Fewer_than_16_address_pins)

Intel 8080 是一个 8 位 CPU，有 2 个寄存器 H 和 L 用于间接寻址，允许它寻址 16 位内存。16 位 8086 有 20 位地址和分段。80286 使用 24 位地址，高 16 位段是段描述符表的索引。32 位 x86 使用带有 PAE 的 36 位地址...

PIC微控制器在寄存器中有8位值与PC中的高位（或一些专用地址寄存器，我不记得了）合并形成13位地址（或更多，取决于架构）

微控制器（某些微处理器架构）中的另一种常见方式是[bank](https://en.wikipedia.org/wiki/Bank_switching)，您可以在其中更改 CPU 每次可以看到的“内存窗口”。

*   Intel 8051 有 4 个寄存器组，公共的一个始终可见，其余的可以通过组切换指令进行选择。某些版本可以使用银行作为代码地址，将其扩展到 2MB 的代码。
*   DOS 使用[EMS](https://en.wikipedia.org/wiki/Expanded_memory)和[XMS](https://en.wikipedia.org/wiki/Extended_memory#eXtended_Memory_Specification_.28XMS.29)中的内存库将较高的内存映射到较低的地址，以便访问超过 1MB 或 RAM。
*   32-bit Windows uses [Address Windowing Extensions](https://docs.microsoft.com/en-us/windows/desktop/Memory/address-windowing-extensions) in PAE mode to allow 32-bit processes to access more than 2GB of RAM

For more information you can [read here](https://electronics.stackexchange.com/a/109444/27052)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-03T06:38:53.223

6502 具有索引内存读取指令`lda $01200,Y`，并且`lda $1413,X`16 位地址被编码为指令的一部分。在任何时候，这种指令都会看到一个 256 字节的窗口。例如，为了访问接下来的 256 个字节，指令本身被修改为读取`lda $1300,Y`。

然后 8086 具有分段架构，其中每个内存访问都与隐式或显式段寄存器耦合。`mov reg,[bp]`并`push/pop`与堆栈段*ss*相关联，`[rep] movs`与 ds:[si], es:[di] 相关联；程序计数器/跳转与代码段*cs*相关联。

物理地址处于 8086 模式，计算方式为 stack_reg * 16 + 偏移量，尝试读取 seg_reg:[ffff] 处的字会导致段违规异常。

8086 架构中的 VGA 图形是通过将 64k 段映射到 ISA 总线的内存来实现的。此外，通过输入/输出指令对硬件进行编程，可以在图形板上选择不同的 64-k*页*。因此，可以将 320x200 x 256 彩色 VGA 限制提升到 640x480 SVGA。

# javascript - Javascript 表单验证：每个字段都调用相同的消息，也许是一些愚蠢的打字错误？

> ID：13674928
> 
> 赞同：1
> 
> 时间：2012-12-02T23:04:30.020
> 
> 标签：javascript, forms

我正在通过创建此表单验证来练习 Javascript。我只想让每个文本字段都有不同的错误消息。谁能解释我做错了什么？我没有错误这是我的代码：

```
 <html>
    <head>
    <script language="javascript">
        function ReloadTextDiv() { 
            var NewText = document.getElementById("naam").value; 
            NewText = NewText.replace(/\n/g, '<br />'); 
            var DivElement = document.getElementById("textDisplay"); 
            DivElement.innerHTML = NewText; 
        }
        function ReloadTextDiv2() { 
            var NewText = document.getElementById("email").value; 
            NewText = NewText.replace(/\n/g, '<br />'); 
            var DivElement = document.getElementById("textDisplay2"); 
            DivElement.innerHTML = NewText; 
        } 
        function ReloadTextDiv3() { 
            var NewText = document.getElementById("address").value; 
            NewText = NewText.replace(/\n/g, '<br />'); 
            var DivElement = document.getElementById("textDisplay3"); 
            DivElement.innerHTML = NewText; 
        }       
    </script>
    <script type='text/javascript'>
    function formValidator(){

        var naam = document.getElementById('naam');
        var address = document.getElementById('address');
        var email = document.getElementById('email');

        if(isname(naam, "Please enter only letters for your name")){
            if(isAlphanumeric(address, "Numbers and Letters Only for Address")){
                            if(emailValidator(email, "Please enter a valid email address")){
                                return true;
                            }
                        }
                    }

        return false;

    }

    function notEmpty(elem, helperMsg){
        if(elem.value.length == 0){
            alert(helperMsg);
            elem.focus();
            return false;
        }
        return true;
    }

    function isname(elem, helperMsg){
        var numericExpression = /^[0-9]+$/;
        if(elem.value.match(numericExpression)){
            return true;
        }else{
            alert(helperMsg);
            elem.focus();
            return false;
        }
    }

    function isaddress(elem, helperMsg){
        var alphaExp = /^[0-9a-zA-Z]+$/;
        if(elem.value.match(alphaExp)){
            return true;
        }else{
            alert(helperMsg);
            elem.focus();
            return false;
        }
    }

    function emailValidator(elem, helperMsg){
        var emailExp = /^[\w\-\.\+]+\@[a-zA-Z0-9\.\-]+\.[a-zA-z0-9]{2,4}$/;
        if(elem.value.match(emailExp)){
            return true;
        }else{
            alert(helperMsg);
            elem.focus();
            return false;
        }
    }

    </script>
    </head>
    <body>
    <div id="contact_form">  
    <form onsubmit='return formValidator()' >
      <fieldset> 
      <legend>Subscription info</legend>
        <label for="name">Username:</label>
        <input type="text" name="naam" id="naam" class="text" onKeyUp="ReloadTextDiv();" />
        <br />
        <label for="mail">E-mail:</label>
        <input type="text" name="email" id="email" class="text" onKeyUp="ReloadTextDiv2();"  />
        <br />
        <label for="address">Address:</label>
        <input type="text" name="address" id="address"  size="40" class="text" onKeyUp="ReloadTextDiv3();" />
        <legend><input type="submit" value="submit"></legend>
      </fieldset>
    </form>
    </div> 

    <p><span id="textDisplay"></span></p> 
    <p><span id="textDisplay2"></span></p> 
    <p><span id="textDisplay3"></span></p>  
    </body>
    <html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:17:17.383

好吧，我认为尝试将名称验证为数字并不是最合理的做法；）。

```
function isname(elem, helperMsg){
    var numericExpression = /^[0-9]+$/; // -> /^[a-zA-Z]+$/
    // ...
} 
```

# c++ - 为什么模板函数实例化不会被内联？

> ID：13674935
> 
> 赞同：7
> 
> 时间：2012-12-02T23:05:10.457
> 
> 标签：c++, templates

关于[作为模板参数传递的函数](https://stackoverflow.com/questions/1174169/function-passed-as-template-argument)，Ben Supnik 提供的社区 wiki 回答讨论了内联实例化函数模板的问题。

在该答案中是以下代码：

```
template<typename OP>
int do_op(int a, int b, OP op)
{
  return op(a,b,);
}

int add(int a, b) { return a + b; }

int (* func_ptr)(int, int) = add;

int c = do_op(4,5,func_ptr); 
```

答案继续这样说（关于最后一行，它实例化了函数 template `do_op`）：

> 显然，这并没有被内联。

我的问题是：为什么很明显这没有被内联？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T23:11:45.943

他的意思是（我认为）该`add`函数没有被内联。换句话说，编译器可能`do_op`像这样内联：

```
int c = func_ptr(4, 5); 
```

但它也不会`add`像这样内联：

```
int c = 4 + 5; 
```

然而，在这个简单的例子中，他可能错了。

通常，当您通过指针调用函数时，编译器无法（在编译时）知道您将调用什么函数，因此它无法内联该函数。例子：

```
void f1() { ... }
void f2() { ... }

void callThroughPointer() {
    int i = arc4random_uniform(2);
    void (*f)() = i ? f2 : f1;
    f();
} 
```

在这里，编译器不知道是否`callThroughPointer`会调用`f1`or `f2`，因此它无法内联`f1`or 或`f2`in `callThroughPointer`。

但是，如果编译器可以在编译时证明将调用哪个函数，则允许内联该函数。例子：

```
void f1() { ... }
void f2() { ... }

void callThroughPointer2() {
    int i = arc4random_uniform(2);
    void (*f)() = i ? f2 : f1;
    f = f1;
    f();
} 
```

在这里，编译器可以证明`f`永远是`f1`，所以它可以内联`f1`到`callThroughPointer2`. （这并不意味着它*会*内联`f1`……）

同样，在您在帖子中引用的示例中，编译器可以证明它`func_ptr`始终`add`在对 的调用中`do_op`，因此允许内联`add`。（这并不意味着它*会*内联`add`……）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T23:23:05.217

当通过函数指针调用函数时，编译器极不可能避免通过函数指针调用。只有当编译器能够证明它知道函数指针被初始化的是什么并且它不能被改变时，它才有可能避免通过函数指针调用函数，从而内联函数。在引用的设置中，即

```
int (* func_ptr)(int, int) = add; 
```

函数指针`func_ptr`是可修改的，因此编译器不能保证它永远不会改变。因此，它不可能内联对`add`.

如果代码片段确实是完整的，那么在初始化期间会发生一些事情，编译器实际上可以知道它`func_ptr`被初始化为包含`add`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-09-06T13:47:59.863

我认为，到目前为止，这里的讨论中遗漏了要点。首先，由于语法错误，测试代码甚至无法编译。大概意思如下：

```
template<typename OP>
int do_op(int a, int b, OP op) { return op(a,b); }
int add(int a, int b) { return a + b; }
int (*func_ptr)(int, int) = add;
int c = do_op(4, 5, func_ptr);
// int c = (*func_ptr)(4, 5); 
```

编译后，编译器将发出代码以实际调用 add() 函数。但是，当没有模板 as 编写时`int c = (*func_ptr)(4, 5);`，编译器也会发出对 add() 的调用。这是因为`func_ptr`在这个示例代码中是全局定义的，并且编译器必须注意另一个线程中的某些代码在其初始化和后续使用之间修改 func_ptr 的可能性。但这是全局可见函数指针的属性，与模板无关！除了一些本地标签的名称外，带有优化器的 GCC 为通过 func_ptr 对 add() 的模板化和非模板化调用产生完全相同的汇编器输出。不同的标签名称意味着，由于模板，优化器必须多转一轮，因此编译时间增加（就像所有模板一样），但代码和代码运行时间是相同的。

如果将 func_ptr 移动到函数内部的局部变量中，如下例所示，编译器可以肯定地跟踪对 func_ptr 的所有访问，从而优化所有内容，甚至不再调用 add() 函数，既不直接也不调用通过函数指针：

```
int testf(void) {
  int (*func_ptr)(int, int) = add;
  return do_op(4, 5, func_ptr);
} 
```

所以，总结一下：通过模板调用函数不会阻止优化器的工作。如果函数指针的值不能在编译时安全地确定，那么函数指针可能会造成伤害，但如果添加了模板，该问题不会恶化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T23:22:55.323

> 为什么很明显这没有被内联？

它不是。编译器没有理由不能内联该片段中的所有代码。

# sql - rake db：在暂存和生产环境中安全迁移

> ID：13674940
> 
> 赞同：2
> 
> 时间：2012-12-02T23:05:25.903
> 
> 标签：sql, ruby-on-rails, deployment, rake, production-environment

我喜欢在开发环境中使用 rake 来管理我的迁移，在那里我允许我的 rails 应用程序对开发数据库具有完全权限。

但是，在登台和生产环境中，我的应用程序只有写访问权限，没有更改表的能力。

我想继续`rake db:migrate`在登台和生产中使用，但问题是`rake db`使用与我的 rails 应用程序相同的用户，它没有足够的权限。

有谁知道解决这个问题的简单方法，而不必在我的 rails 应用程序中允许管理数据库权限。

例如，如果我可以指定`-username`以及`-password`何时运行`rake db`，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T23:21:39.360

您可以在您的用户/密码中为具有适当权限的用户指定一些`migration`连接并运行`config/database.yml`

```
RAILS_ENV=migration rake db:migrate 
```

**编辑**看起来像这样的东西可能会起作用（尽管我从未通过远程连接测试过它，只在本地测试过）。将以下内容添加到您的`config/database.yml`.

```
<%
require 'highline/import'

def request_input(msg, show_input = true)
  ask(msg) { |q| q.echo = show_input }
end
%>

migration:
  # Other connection information here (host, adapter, etc..)
  username: <%= request_input "Username:" %> 
  password: <%= request_input "Password:", false %> 
```

当你跑

```
RAILS_ENV=migration rake db:migrate 
```

系统将提示您输入连接的用户名和密码。确保添加

```
gem 'highline' 
```

到你的`Gemfile`.

来源：[http ://dzone.com/snippets/request-database](http://dzone.com/snippets/request-database)

# php - 评级向上和向下按钮

> ID：13674944
> 
> 赞同：1
> 
> 时间：2012-12-02T23:05:47.820
> 
> 标签：php, javascript, html

在我的网站上，我有一个评价按钮，用户（不需要在网站上拥有帐户）可以评价帖子/图片。我希望用户只能对内容进行一次评分。但是，如果他们再次点击评分，它应该只是扣除之前的评分，导致根本没有评分。所以它只是在 1 和 0 之间切换。

我知道有一种方法可以通过 IP 进行限制，但这不是最好的方法。我认为有一种方法可以通过 cookie 来检查用户之前是否按下了费率按钮或其他东西，但我不确定。

任何人都可以在这件事上指导我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T23:08:38.500

恕我直言，IP 是最可靠的，因为 cookie 过期。另一种方法是创建一个帐户:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T23:08:28.677

当然，可以使用 cookie，但请记住它们可能会被篡改。无法确定用户何时未注册和登录。

# mysql - 维护 MySQL 数据库表中元素的顺序或在 MySQL 的特定位置插入新行

> ID：13674946
> 
> 赞同：6
> 
> 时间：2012-12-02T23:05:48.883
> 
> 标签：mysql, database-design, schema, database-schema

我有一个数据库表，它维护一些信息并且需要保持顺序。本质上，如果我列出了元素 1 到 5，并且我想添加一个新元素，那么它可以插入现有行中的任何位置，可以在最后、5 之后、1 之前的开头或中间的某处，例如 3 之后. 有没有办法使用 MySQL INSERT 语句并指定我们应该在哪一行之后插入索引？

我想不会。所以我这样做的策略是创建另一个列'order_number'，它基本上记录了元素的顺序。例如，如果记录表有主键 (record_id) 和 order_number 并排列出，它看起来像这样：

```
 record_id     order_number

    1              1    
    2              2    
    3              3
    4              4
    5              5 
```

要在第 3 行之后向该行添加一个新元素，结果表将如下所示：

```
 record_id     order_number

    1             1
    2             2
    3             3
  **6**         **4**         <------ added row 
    4           **5**         <-- changed order_number
    5           **6**         <-- changed order_number 
```

在这种情况下，我可以通过简单地选择我想要的数据并提供 Order By order_number asc 子句来清楚地实现我想要的顺序。

但是，正如您所看到的，要进行简单的插入，它需要我更新出现在它之后的每一行的 order_number。预计该表至少有大量行（数量为 100,000），并且在每次插入操作时简单地更新每隔一行（因此锁定表）根本不可行。

在这种情况下，什么是更好的推荐策略？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-02T23:52:46.550

如果`order_number`不显示而仅用于排序，我建议您使用十进制数据类型而不是整数。这样，当您必须在两个现有行“之间”插入一行时，您可以设置为 order_number，即两个现有订单号的平均值。

在您的示例中：

```
 record_id     order_number

    1             1.0
    2             2.0
    3             3.0
  **6**           3.5          <---- added row 
    4             4.0           <-- no change
    5             5.0           <-- no change 
```

但是有一个问题，如果您在同一区域中继续插入数字，则某些订单号可能会导致您选择的数据类型的精度太接近，以至于无法相互区分。

为避免这种情况，您的插入过程将必须检查两个现有订单号是否太接近。在这种情况下，它可以重新分配其他附近行的一些订单号，“拉伸”上方和下方的订单号，为新值“腾出空间”。

您还可以有一个定期运行的“清理”过程，并在整个或大部分表格中执行此“拉伸”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T23:57:17.327

我找到了类似问题的答案：[https ://stackoverflow.com/a/6333717/1010050](https://stackoverflow.com/a/6333717/1010050)

总而言之，它会增加您将要添加的记录 ID 以下的所有记录 ID，以保持一致性。这仍然需要您更新所有记录 ID，因此它不是最有效的。与您的方法相比，它确实具有维护数据库中的物理订单的好处，而不仅仅是像您那样的虚拟订单。

我能想到的另一种方法是记录每条记录的子记录 ID 和父记录 ID，而不是订单号，类似于双向链接列表。然后在中间插入一个元素只需要更新另外两条记录，而不管表的大小。这与物理排序错误的解决方案具有相同的缺点，因此以有序方式从表中读取会更昂贵。

例如：

```
record_id        parent_id      child_id
   0                 NULL          1
   1                 0             2
   2                 1             NULL 
```

当我们在 之后插入一条记录`record_id = 1`时，表格变为：

```
record_id        parent_id      child_id
   0                 NULL          1
   1                 0             3
   2                 3             NULL
   3                 1             2 
```

*请注意只有 ID 1 和 2 的`parent_id`和`child_id`必须更改。*

我认为在这两种解决方案之间，要考虑的最重要的事情是您*最常见的操作*是什么：按顺序读出值，或者在中间某处写入一个新值。如果它正在读取，那么更新记录 ID 将是您维护数据库物理顺序的最佳选择。如果编写，那么您可以使用我建议的类似于双向链表的方法或您自己的排序方法来优化它。

**问题更新后总结：** 看到更新大部分记录是不可行的，那么我找到的另一个答案肯定是无效的。然而，将其视为类似于双向链表的解决方案仍然是合理的。

# android - 服务中的 findViewById

> ID：13674948
> 
> 赞同：1
> 
> 时间：2012-12-02T23:06:06.020
> 
> 标签：android, service, findviewbyid

我有一个可以通过 2 个活动调用“启动服务”的服务，我想在服务启动时更改图像视图，但是当我尝试“findViewById”时出现此错误。

```
The method findViewById(int) is undefined for the type Main 
```

我该怎么办 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T23:06:57.333

您应该更改`ImageView`活动，而不是服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:23:22.757

你应该区分`findviewByid(int)`和`Layout.inflate(int)`，所以我的建议是：

*   获取Activity中的父视图`Layout.inflate(int)`

*   使用父视图调用`findViewById(int)`

试一试，快乐的代码:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-02T23:11:34.650

您可以通过将上下文传递给服务并执行以下操作来做到这一点：

```
mContext.findViewById(int) 
```

但是如果你通过意图、静态方法或aidl（我建议意图或静态）调用活动的函数会更合乎逻辑，比如说“changeImage()”并让活动完成所有视图处理工作

# css - 缩进或填充表格列内容

> ID：13674952
> 
> 赞同：0
> 
> 时间：2012-12-02T23:06:36.477
> 
> 标签：css, padding

我正在寻找缩进表格列的内容，但不是表格标题行的内容。我在另一个线程上找到了一些代码，解决了只需要填充某些列的问题，但这也填充了表格标题行。

```
/* first column */
td:first-child {
padding-left: 20px;  
}

/* second column */ 
td:first-child + td {
padding-left: 10px;  
}

/* third columns */ {
td:first-child + td + td {
padding-left: 0;  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:08:31.260

在 HTML 的标题行中使用 TH 标签而不是 TD 标签。

# mysql - MySQL递归循环检测程序

> ID：13674955
> 
> 赞同：5
> 
> 时间：2012-12-02T23:06:48.517
> 
> 标签：mysql, stored-procedures, recursion, graph

我有以下过程，旨在检测无向图中的循环，该图中采用边（单边）和边集（边集）。还有两个参数，left_set（用于存储要传递给递归的必要边）和 cyclic（它是一个布尔值，最终确定图是否是循环的。

由于某种原因，检测在第一次递归之后不起作用。这是带有解释详细信息的注释的代码：

**我在 MYSQL 中实现了以下功能（以避免混淆）：**

-concat_set()：如果是空集，则返回两个集的连接，以说明放错位置的 ','

-remove_first()：从集合中移除第一个成员

-get_left_node()/get_right_node：返回边的节点，边之间的分隔符是':'，所以边看起来像这样'12:15'

```
CREATE PROCEDURE `is_cyclic`(
IN `singleedge` VARCHAR(15), 
IN `edgeset` VARCHAR(1024), 
IN 'left_set' VARCHAR(512), 
OUT `cyclic` BOOLEAN)

BEGIN
DECLARE se_left VARCHAR(5);
DECLARE es_left VARCHAR(5);
DECLARE se_right VARCHAR(5);
DECLARE es_right VARCHAR(5);
Call get_left_node(singleedge, se_left);
Call get_left_node(SUBSTRING_INDEX(edgeset, ',', 1), es_left);
Call get_right_node(singleedge, se_right);
Call get_right_node(SUBSTRING_INDEX(edgeset, ',', 1), es_right);

--is edgeset emptY?
    IF LENGTH(edgeset)= 0 AND LENGTH(left_set) = 0 THEN
        BEGIN

            SET cyclic= false;

        END;    

--are singeeledge and first edge in edgeset the same?        
    ELSEIF ((se_left = es_left
        OR se_left= es_right)
        AND( se_right = es_left
        OR se_right = es_right)) THEN
                    BEGIN
            set cyclic= true;
                        END;

--do singleedge and first edge in edgeset share any vertices?       
    ELSEIF se_left = es_left 
        OR se_left= es_right
        OR se_right = es_left
        OR se_right = es_right
        THEN
        --check for all possiblities
            BEGIN

                --if left vertex of singleedge and left vertex of current edge in front of edgeset are the same               
                IF se_left=es_left THEN
                                    BEGIN
                                    --test if the edge of combined uncommon vertices (forming concat(se_right,':',es_right)) exists in the remaining edgeset concatanated with the left_set
                                    CALL is_cyclic(concat(se_right,':',es_right),concat_set(left_set,remove_first(edgeset)), '', cyclic);
                                    --if the recursion returns cyclic=false, then remove the considered edge from edgeset and continue trying to match the original singleedge with the rest of edgeset
                                     IF cyclic=false THEN
                                        CALL is_cyclic(singleedge, remove_first(edgeset), left_set, cyclic);
                                      END IF;
                                     END;
                ELSEIF se_left= es_right THEN
                                    BEGIN
                                    CALL is_cyclic(concat(se_right,':',es_left), concat_set(left_set, remove_first(edgeset)), '', cyclic);
                                    IF cyclic=false THEN
                                        CALL is_cyclic(singleedge, remove_first(edgeset), left_set, cyclic);
                                     END IF;
                                     END;
                ELSEIF se_right=es_left THEN
                                    BEGIN
                                    CALL is_cyclic(concat(se_left,':',es_right), concat_set(left_set, remove_first(edgeset)), '', cyclic);
                                    IF cyclic=false THEN
                                        CALL is_cyclic(singleedge, remove_first(edgeset), left_set, cyclic);
                                    END IF;
                                    END;
                ELSE
                                    BEGIN
                                    CALL is_cyclic(concat(se_left,':',es_left), concat_set(left_set, remove_first(edgeset)), '', cyclic);
                                    IF cyclic=false THEN
                                        CALL is_cyclic(singleedge, remove_first(edgeset), left_set, cyclic);
                                    END IF;  
                                      END;
                                END IF;

            END;    

        ELSE
            BEGIN
                --if the current edge being considered from the edgeset does not contain any vertex in common with singleedge, set it aside into left_set and call is_cyclic recurisvely with the edge removed
                SET left_set = concat_set(left_set, SUBSTRING_INDEX(edgeset, ',', 1));
                CALL is_cyclic(singleedge, remove_first(edgeset), left_set, cyclic);
                END;

    END IF;
END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T04:50:12.827

尝试重置这个mysql变量：max_sp_recursion_depth，thread_stack

```
SET SESSION max_sp_recursion_depth = 10;
SET SESSION thread_stack = 250000; 
```

执行上述命令后，调用您的程序。串行执行这两个语句。根据您的要求增加**thread_stack**变量的大小。

# jquery - Meteor 和 jQuery：使用 cursor.observe 触发 jQuery css 操作

> ID：13674957
> 
> 赞同：0
> 
> 时间：2012-12-02T23:06:55.657
> 
> 标签：jquery, meteor

我正在使用流星创建一个简单的数据输入和可视化应用程序。当我尝试使用 jQuery 根据数据更改每个条目的一些 css 时，我遇到了问题。

我进行了设置，以便在添加条目时（使用 cursor.observe）计算高度值，然后使用 jQuery 将该值应用于 css，但实际上并没有这样做。我知道这些值是正确计算的，因为我使用控制台来显示它们。

这是因为在此代码运行时，这些条目的实际 html 尚未从模板构建？如果是这种情况，我可以在哪里粘贴这段代码，以便它在 html 存在之后运行 jQuery？

以下是与此问题相关的代码，任何帮助将不胜感激。

```
Template.mainPanel.Actions = function(){
    var actions = Actions.find()

    actions.observe({
        added: function(action){
            var entryHeight = action.Duration

            console.log("entryHeight: " + entryHeight)

            $('#vis' + action.ID).css({'height':entryHeight})
        }
    })

    return actions
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T01:10:30.373

我假设您的应用中有一些代码，例如：

```
<template name="mainPanel">
  {{#each Actions}}
    <div id="{{ID}}">Something</div>
  {{/each}}
</template> 
```

您正在与从 Template.mainPanel.Actions 返回您的操作光标配对。

您可以直接在 HTML 中包含样式的反应式把手，而不是用观察做一些复杂的事情，如下所示：

```
<template name="mainPanel">
  {{#each Actions}}
    <div id="{{ID}}" style="height: {{Duration}}px">Something</div>
  {{/each}}
</template> 
```

# linq-to-entities - 使用 linq 从表中获取最新日期

> ID：13674960
> 
> 赞同：0
> 
> 时间：2012-12-02T23:06:58.987
> 
> 标签：linq-to-entities

我有一张表格，其中包含各种燃料类型的燃料价格数据。每行都有一个 ID、日期，并且有 5 列用于不同的燃料类型。我无法提出一个 linq 查询来确定值不是 0 的每种燃料类型的最后一行数据的日期（如果插入了一行并且特定燃料类型没有可用的燃料价格，则插入的值因为该燃料类型为零，因为单元格不可为空）。

我尝试使用 LastorDefault 但这不起作用，因为有时特定类型的最后日期不在表的最后一行中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T21:56:48.693

可以为它配备一个 linq（和 SQL）查询。但是使用为规范化结构制作的语言处理非规范化的东西通常会变成一堆重复的嵌套语句（以及效率较低的查询计划）。无论如何你都会有重复，所以我会通过使用常规的 foreach 使它们尽可能简单：

```
var result = new FuelPriceSummary();
foreach(var price in context.FuelPriceData.OrderBy(p => p.Date).ToList())
{
    if (price.Price1 > 0)
        {result.Price1 = price.Price1; result.Date1 = price.date;}
    if (price.Price2 > 0)
        {result.Price2 = price.Price2; result.Date2 = price.date;}
    if (price.Price3 > 0)
        {result.Price3 = price.Price3; result.Date3 = price.date;}
    if (price.Price4 > 0)
        {result.Price4 = price.Price4; result.Date4 = price.date;}
    if (price.Price5 > 0)
        {result.Price5 = price.Price5; result.Date5 = price.date;}
} 
```

如果可以，请规范您的数据库设计。这将使查询变得容易得多。

# php - 忽略 preg_match_all 中的嵌套结果

> ID：13674963
> 
> 赞同：0
> 
> 时间：2012-12-02T23:07:06.510
> 
> 标签：php, regex, preg-match-all

我想对两个花括号内第一次出现的字符进行匹配，但忽略其中的字符。

```
{{some text here {{nested text here}} another text {{another nested text here}} final text}} 
```

所以结果一定是

```
some text here {{nested text here}} another text {{another nested text here}} final text 
```

但是这个搜索

```
preg_match_all("^\{{(.*?)\}}^", $string, $results); 
```

给我第一对括号内的那些：

```
$results[0][0] = nested text here
$results[0][1] = another nested text here 
```

有没有办法用 preg_match_all 实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T23:12:56.033

嵌套结构通常会导致正则表达式出现问题（因为它们使匹配的语言比正则更复杂）。PCRE 是允许匹配它们的引擎之一，因为它支持递归。如果你的双括号内从来没有一个大括号，你可以使用这个模式：

```
'/\{\{[^{}]*(?:(?R)[^{}]*)*\}\}/' 
```

Where`(?R)`将整个模式再次嵌套在自身内部。

我不确定 PCRE 的优化效果如何，但是您可以通过使所有重复都[具有所有格](http://www.regular-expressions.info/possessive.html)来提供一些帮助。这抑制了回溯，这在此处不是必需的，因为所有连续的重复都是互斥的：

```
'/\{\{[^{}]*+(?:(?R)[^{}]*+)*+ \}\}/' 
```

如果你确实允许单括号，你可以用前瞻做类似的事情，但这已经说明了为什么正则表达式不是真正为嵌套结构制作的（即使引擎支持它）：

```
'/\{\{(?:(?!\{\{|\}\}).)*(?:(?R)(?:(?!\{\{|\}\}).)*)*\}\}/' 
```

现在代替非`{}`字符，我们允许重复任何字符，除非它标志着 a`{{`或的开始`}}`。同样，使其具有所有格可能是一个好主意：

```
'/\{\{(?:(?!\{\{|\}\}).)*+(?:(?R)(?:(?!\{\{|\}\}).)*+)*+\}\}/' 
```

# c++ - C++ 自定义编译时检查

> ID：13674966
> 
> 赞同：0
> 
> 时间：2012-12-02T23:07:16.037
> 
> 标签：c++, compilation

假设我有两个矩阵类。一个矩阵是 2 x 2，另一个是 3 x 3，然后我将它们相乘。当然，我不能将两个维度不同的矩阵相乘。

我知道我可以构建运行时检查，但是有没有办法使用 c++ 语言构建编译时检查？因此，如果我尝试编译一个程序，其中两个不同维度的定义矩阵相乘，它将通过编译时错误。

```
Matrix *matrix1 = new Matrix(2,2);
Matrix *matrix2 = new Matrix(3,3);

Matrix_Multiply(matrix1,matrix2);  // compiler throws error on this line 
```

另外，当我们讨论这个主题时，是否有任何编程语言具有此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:13:11.970

答案取决于您的矩阵如何获得维度：如果维度是在运行时确定的，则没有编译时检查。但是，如果矩阵是编译时维度的，我认为您自然会最终进行编译时检查：

```
template <typename T, int Width, int Height>
class Matrix;

template <typename T, int M, int N, int O>
Matrix<T, M, O> operator* (Matrix<T, M, N> const& lhs, Matrix<T, N, O> const& rhs); 
```

也就是说，结果矩阵的大小由两个参数矩阵的大小推导出来。如果它们的维度不匹配，将找不到合适的乘法运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T23:14:58.723

您可以使用维度作为模板参数定义模板矩阵类。当你`operator*()`只为这个类型定义一个时，编译器会阻止这个类型与另一个相乘。

```
template<int rows, int cols> class matrix {
public:
    friend matrix operator*(const matrix &m1, const matrix &m2);
}; 
```

# objective-c - 如何显示自定义 NSWindow 的多个“克隆”

> ID：13674982
> 
> 赞同：1
> 
> 时间：2012-12-02T23:08:27.820
> 
> 标签：objective-c, xcode, cocoa, nswindow

我想在 TextEdit 应用程序上执行类似“新建”的操作。
每次按 cmd+n 或单击“新建”时，都会出现一个新窗口，您可以多次执行此操作。
如何实现这样的目标？我试过使用`NSWindowController`，但我一次只能显示 1 个窗口`[windowController showWindow:nil];`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:41:37.697

听起来好像您要构建的是基于文档的应用程序（它将自动为每个打开的文档管理一个窗口）。

有关详细信息，请阅读 Apple 的[基于文档的 Mac 应用程序编程指南](http://developer.apple.com/library/mac/#documentation/DataManagement/Conceptual/DocBasedAppProgrammingGuideForOSX/Introduction/Introduction.html)。

# javascript - HTML-Javascript 验证

> ID：13674987
> 
> 赞同：-1
> 
> 时间：2012-12-02T23:08:57.787
> 
> 标签：javascript, html, validation, function

嘿，我想检查提交时不应该有任何空文本框。所以我在提交按钮上插入了一个javascript，但它不起作用。所有 ID 名称均正确

```
function checkall()
{
    var a=window.document.getElementById("fname").value;
    var b=document.getElementById("lname").value;
    var c=document.getElementById("gender").value;
    var d=document.getElementById("dob").value;
    var e=document.getElementById("country").value;
    var f=document.getElementById("zip").value;
    var g=document.getElementById("email").value;
    var h=document.getElementById("pwd").value;
    if(a=="" || b=="" || c=="" || d=="" || e=="" || f=="" || g=="" || h=="" )
    {
        alert("bad");
        return false;
    }
    else
    {
        alert("good");
        return true;
    }
} 
```

提交按钮代码如下：

```
<input type="submit" value="Register" onClick="checkall()"/> 
```

帮帮我。我可能哪里出错了？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:10:07.937

您需要在`<form>`标签中调用此函数并让它返回函数的结果：

```
<form action="whatever" method="post" onSubmit="return checkall()"> 
```

# php - 在 Zend Framework 2 中无法访问 ServiceManager

> ID：13674988
> 
> 赞同：0
> 
> 时间：2012-12-02T23:09:03.173
> 
> 标签：php, frameworks, zend-framework2, servicemanager

我在 2.0.4。

我的文件：

[https://gist.github.com/4191490](https://gist.github.com/4191490)

根据[http://framework.zend.com/manual/2.0/en/modules/zend.service-manager.quick-start.html上的文档](http://framework.zend.com/manual/2.0/en/modules/zend.service-manager.quick-start.html)

如果一个类实现了ServiceManagerAwareInterface，那么它的对象将被服务管理器初始化。我做了同样的事情（参见我的源代码中的 BaseEntity.php）。但是，服务管理器从未初始化，因此无法从子类 Snippet 中获得。

问题：如何获取全局或模块的ServireManager 实例，以便访问其他服务？（大部分都是单例）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:14:36.450

`ServiceManagerAwareInterface`已弃用，并且不是自动注入
使用`ServiceLocatorAwareInterface`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T10:21:13.857

为了`ServiceManagerAwareInterface`按照建议工作，实例需要从`ServiceManager`. 这是因为如果找到该接口，则附加到`ServiceManager`注入 ServiceManager 的 Initalizer（您可以在 - 中看到这一点`Zend\Mvc\Service\ServiceManagerConfig`）。

您可以将您的类添加到 SevriceManager 配置中，然后将它们拉到您的`$sm`实例中，甚至修改您的 getTableGateway 以添加以下内容：

```
if ($prototype instanceof ServiceManagerAwareInterface)
{
    $prototype->setServiceManager($sm);
} 
```

# php - 使用 JQuery、PHP 和 MySQL 为实时统计页面优化多个连续的 ajax 调用

> ID：13674993
> 
> 赞同：1
> 
> 时间：2012-12-02T23:09:28.243
> 
> 标签：php, jquery, mysql, ajax, real-time

我有一个 PHP 脚本，它显示了通过 JQuery AJAX 调用为锦标赛评分网站加载的多个数据表。这些表格是实时计算的个人和团队得分。

每分钟检查一次每个表的新分数，并在需要时刷新。为此，每个表都会向分数的最后更新时间发送一个快速 ajax 请求......如果时间与表当前的时间不同，则用新数据刷新表。

我的问题是这些锦标赛可能会变得非常大，有许多参与者、团队、部门和分数，并且加载每个表都使用服务器资源。如果少数人正在查看实时统计数据，这没有问题，但是一旦超过 50 人连接到此统计数据页面，服务器就会开始严重滞后。

我想知道我可以做些什么来优化数据、ajax 调用或服务器本身以尽可能高效地运行，这样服务器就不会那么快达到顶峰。我已经梳理了 MySQL 调用，并尝试尽可能优化所有内容，但这似乎还不够。

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:30:52.057

您可以使用缓存，例如在您的架构中 memcache 非常适合。每次您的服务器收到请求时，您的 php 应用程序都会尝试从缓存中获取结果，如果未找到则执行查询。

现在您可以选择两种不同的方式：

*   简单，等待缓存过期时间。当缓存过期时，服务器会错过搜索并提交新的查询。这通常是一个短期缓存（秒或分钟）
*   hard，缓存在很远的将来过期，例如几小时甚至几天）。在这种情况下，您的应用程序会在每次更新数据库时刷新缓存内容。在这种情况下，很明显，几乎所有请求都命中了缓存（最佳性能）。

此示例基于简单方法，缓存键直接基于提交的 SQL。

 `````
global $memcache;
$memcache = new Memcache;

// Gets key / value pair into memcache ... called by mysql_query_cache()
function getCache($key) {
    global $memcache;
    return ($memcache) ? $memcache->get($key) : false;
}

// Puts key / value pair into memcache ... called by mysql_query_cache()
function setCache($key,$object,$timeout = 60) {
    global $memcache;
    return ($memcache) ? $memcache->set($key,$object,MEMCACHE_COMPRESSED,$timeout) : false;
}

// Caching version of mysql_query()
function mysql_query_cache($sql,$linkIdentifier = false,$timeout = 60) {
    if (($cache = getCache(md5("mysql_query" . $sql))) !== false) {
        $cache = false;
        $r = ($linkIdentifier !== false) ? mysql_query($sql,$linkIdentifier) : mysql_query($sql);
        if (is_resource($r) && (($rows = mysql_num_rows($r)) !== 0)) {
            for ($i=0;$i<$rows;$i++) {
                $fields = mysql_num_fields($r);
                $row = mysql_fetch_array($r);
                for ($j=0;$j<$fields;$j++) {
                    if ($i === 0) {
                        $columns[$j] = mysql_field_name($r,$j);
                    }
                    $cache[$i][$columns[$j]] = $row[$j];
                }
            }
            if (!setCache(md5("mysql_query" . $sql),$cache,$timeout)) {
                // If we get here, there isn't a memcache daemon running or responding
            }
        }
    }
    return $cache;
} 
````  `* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T23:15:56.810

缓存输出，每 1 或 5 分钟，刷新缓存...

所以我的意思是，只需将数据库输出写入文件，然后在那一分钟内的所有请求都使用该文件......每个请求，检查文件的年龄，如果超过 1 或 2 或 5 分钟（示例），删除缓存文件并重建它

这将允许 mysql 在那段时间休息...... Ajax 调用正是需要做的......只要你觉得你的间隔是必要的

一些示例 PHP：

```
$cache_expires = 2; # Minutes
if (file_exists("stats.cache") && filemtime("stats.cache")>time()-$cache_expires*60) {
  # Read cache
  $result = unserialize(file_get_contents("stats.cache"));
  # Display result
} else {
  # Query the database
  $result = get_stats_from_database();
  # Write cache
  file_put_contents("stats.cache",serialize($result));
  # Display result
} 
`````

# asp.net-mvc-4 - mvc 4中的客户端验证

> ID：13674999
> 
> 赞同：0
> 
> 时间：2012-12-02T23:10:42.453
> 
> 标签：asp.net-mvc-4

我的 web.config 中有以下内容...

```
<add key="ClientValidationEnabled" value="true" />
<add key="UnobtrusiveJavaScriptEnabled" value="true" /> 
```

...在我看来，我正在引用 jquery 验证...

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"></script> 
```

...但验证只发生在服务器上。我还需要做什么才能使客户端验证正常工作？我认为在我的模型属性上使用 [Required] 的数据注释，然后引用 jquery 验证文件，然后它将执行客户端验证......但显然还有更多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T17:04:59.523

在您选择的浏览器中使用 f12。并检查控制台是否有错误