# StackOverflow 问答 13198000-13198999

# android - 避免安卓相机默认保存

> ID：13198000
> 
> 赞同：-1
> 
> 时间：2012-11-02T15:12:17.650
> 
> 标签：android, android-intent, camera

我想知道是否可以避免相机意图将图片保存到图片库。我只想在内部存储中添加图片，所以我不希望图片在我的设备上保存两次。或者其他事情是，之后删除图片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:43:01.073

在研发过程中，我发现了这一点，它将彻底解决您的问题。

[拍摄相机意图照片后删除图库图像](https://stackoverflow.com/questions/6390163/deleting-a-gallery-image-after-camera-intent-photo-taken)

# security - PHPUnit/Selenium - 如何阻止谷歌浏览器显示 SSL 安全错误

> ID：13198004
> 
> 赞同：3
> 
> 时间：2012-11-02T15:12:34.827
> 
> 标签：security, google-chrome, ssl, selenium, phpunit

我在没有有效安全证书的服务器上运行我的 selenium 测试。因此，当我运行测试时，我必须在证书错误屏幕上单击“继续”才能开始我的测试。我正在尝试自动化我的测试，但不能，因为我必须为我的每个测试手动单击“继续”。

在为我的自动化测试启动 Chrome 时，有什么方法可以禁用 SSL 错误？

谢谢，

约翰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T15:55:43.500

Mac/Chrome 上的流程如下：

1.  使用有问题的证书加载站点，接受警告
2.  单击地址栏中带有 X 的锁，然后单击“证书信息”按钮
3.  将证书图片拖到桌面
4.  双击桌面上的 *.cer 文件，将其安装到钥匙串中
5.  根据说明，为当前用户或“系统”选择“登录”钥匙串
6.  点击“添加”
7.  添加证书后，选择适当的钥匙串，然后双击证书
8.  展开“信任”部分，并为“使用此证书时”选择“始终信任”

我没有 Windows 机器，但[Chrome 的](http://www.poweradmin.com/help/sslhints/Chrome.aspx)这篇文章参考[了这篇关于 IE](http://www.poweradmin.com/help/sslhints/ie.aspx)的文章，了解如何将证书安装到 Windows 证书存储区。

# c# - 将字符串保存为 svg 图像？

> ID：13198008
> 
> 赞同：1
> 
> 时间：2012-11-02T15:12:48.870
> 
> 标签：c#, .net, image, svg

任何想法如何将具有任何字体的字符串保存为 svg 图像？

我的意思是我们可以将字符串写入图像并保存，如下所示：

```
Bitmap bitmap = new Bitmap(1, 1);
Graphics graphics = Graphics.FromImage(bitmap);
//..
graphics.DrawString(myString, myFont, /*...*/);
bitmap.Save(@"somewhere"); 
```

我也可以将带有字体的字符串保存为 svg 图像吗？

# perl - 如何统一处理输入文件

> ID：13198010
> 
> 赞同：3
> 
> 时间：2012-11-02T15:12:55.077
> 
> 标签：perl

我有一个程序需要来自标准输入的输入，或者来自 .log 和 .log.gz 文件的混合输入。以下是我希望程序处理的三种类型的调用：

```
cat input.log | prog
prog < input.log
prog input.log input.log.gz 
```

该程序将所有输入文件视为一个。我希望利用 ARGV 统一处理所有输入：

```
while (<>) {
# process input
} 
```

我的目标是在同一个循环中处理 gz 文件。如何才能做到这一点？我想知道它有多乱。如果太糟糕，我将单独处理 gz。

我只能在 Perl 5.8.8 中使用核心模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:59:28.537

您不能真正做到这一点并获得钻石运算符的速记优势。

*   因为您将不得不处理输入句柄，所以您将需要`open`自己处理文件。
*   您可能可以使用`@ARGV`此功能，但只有重新打开`*::STDIN`这些文件才能轻松处理。

    ```
    my $file = shift;
    if    ( !$file )           {} # use STDIN as is.
    elsif ( $file =~ /\.gz$/ ) { 
        open( ::STDIN, '-|', "gunzip $file" ) or die "Could not open: $!!";
    }
    else {
        open( ::STDIN, '<', $file ) or die "Could not open $file: $!!";
    }

    while ( <> ) { 
        ...
    }
    close STDIN; 
    ```

# jquery - Bootstrap-datepicker (eyecon.ro) => 限制年份范围的选项

> ID：13198012
> 
> 赞同：0
> 
> 时间：2012-11-02T15:12:55.567
> 
> 标签：jquery, jquery-plugins

只是想知道是否有人想出了一种方法来设置一个选项来限制**http://www.eyecon.ro/bootstrap-datepicker/** Bootstrap Datepicker 插件的年份范围？

我想限制用户仅选择当前年份的能力，实际上是几年后的选择。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T15:22:24.643

我相信这个插件有 startDate 和 endDate 选项。至少，我在使用 eyecon.ro 的 datepicker 扩展管理的应用程序中使用它们。

因此，您可以执行以下操作：

```
$("#selecter").datepicker({

    startDate: '2012-11-02',
    endDate: '2014-12-31'
}); 
```

此外，我有代码来执行诸如禁用周末之类的操作——但这​​比简单的选项集要复杂一些。

# .net - Websync 4.0 PublisherNotAllowed

> ID：13198021
> 
> 赞同：0
> 
> 时间：2012-11-02T15:13:22.913
> 
> 标签：.net, asp.net-mvc, websync

我在使用 websync 4.0 时遇到了一个奇怪的问题：它在我的本地机器上运行良好，但是当我部署到测试服务器时出现此错误

```
System.Exception: Publication failed. result : {"channel":"\/n\/95e4d313-27eb-441b-966d-c8630f80ec9a","error":"606::Publisher access is disabled. Publisher access can be enabled by setting server[allowPublishers] to true in web.config.","ext":{"fm.meta":{"ticketID":""}}} 
```

问题是我在 .net 上开发了 2 个 Web 应用程序：

*   一个用于网站
*   一个用于 websync 服务器

在我添加的两个 web.config 文件中

```
 <WebSync>
    <server providerType="FM.WebSync.Server.Providers.Sticky.InProcProvider" httpDirectPublish="true"/>
  </WebSync> 
```

在 localhost（它工作得很好）上，两个 IIS 应用程序都指向 localhost。

从网站项目中，我通过 javascript 拨打电话订阅频道，它在我的机器和测试机器上都可以正常工作。

但是当我尝试发送消息（并邀请双方加入私人频道）时，它只能在我的本地机器上工作（此消息发送是通过 http post 到来自网站服务器的方法完成的，该方法发布到websync 服务器因此导致该错误。）

有任何想法吗？任何帮助将非常感激。

米海

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T04:52:00.603

您的网络同步“未读取 web.config”的原因是因为您使用的是不推荐使用的设置。该`httpDirectPublish`设置适用于 WebSync 3。对于 WebSync 4，此设置已重命名为`allowPublishers`。

WebSync 4 配置的文档在这里：[WebSync 4 Configuration Docs](http://docs.frozenmountain.com/websync4/#class=websync-configuration)

对于 WebSync 4，您上面的 web.config 片段应该如下所示：

```
<WebSync>
    <server allowPublishers="true" providerType="FM.WebSync.Server.InProcProvider" />
</WebSync> 
```

注意：这`FM.WebSync.Server.InProcProvider`是默认设置，因此您可以在技术上省略该配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T07:58:58.697

行。经过进一步调查，事实证明 Websync 没有读取 web.config 文件（出于某种未知原因）。我设法通过在代码中添加以下行来解决此问题：

```
Config.Current.Server.AllowPublishers = true; 
```

其中***Config***实际上是***fm.websync.server.config***

希望这可以帮助某人:)

# twitter - 无法摆脱 Twitter 分享按钮的“通过”文本

> ID：13198033
> 
> 赞同：0
> 
> 时间：2012-11-02T15:13:59.410
> 
> 标签：twitter

我正在使用 Rails 3.1.8 应用程序，在创建生成所需文本的 Twitter 共享按钮时遇到问题。这是按钮的 erb 代码：

`<a href="https://twitter.com/share" class="twitter-share-button" data-text="<%= some_text %>" data-size="large" data-count="none" data-dnt="true">Tweet</a>`

此按钮出现在包含特定用户制作的内容的页面上。我们称用户为“sam”。此代码生成的要在 Twitter 上共享的文本是：

> [some_text] [当前页面的网址] 通过@sam

我想删除“通过@sam”，但我不知道如何。如果我明确设置`data-via`，我可以更改“通过”短语所指的用户，但我不能让它消失。

[这个支持页面](https://dev.twitter.com/discussions/4168)建议省略`data-via`标签应该可以解决问题，但我发现它没有。

我已经在应用程序周围搜索以尝试找到设置此参数的位置，但我没有找到任何东西。然而，由于我对 Twitter 的东西很陌生，我可能没有在寻找正确的东西。

提前感谢您的帮助，如果我可以提供更多信息，请告诉我。

附录：我尝试将设置添加`data-via`到各种值，包括`false`、`"false"`和`""`，以及`?via=`向共享 URL 附加和类似的值。这些尝试中的每一个都导致了虚假的通过短语（例如“@false”），或者默认为“@sam”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:30:44.583

也许您包含或缓存了旧版本的 Javascript。

以[https://dev.twitter.com/docs/tweet-button](https://dev.twitter.com/docs/tweet-button)为例，在省略该`data-via`属性时会按预期工作。

```
<a href="https://twitter.com/share" class="twitter-share-button" data-text="Isn't this great!?" data-lang="en" data-size="large" data-count="horizontal">Tweet</a>

<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

*   工作示例：http: [//jsbin.com/uxopur/2/](http://jsbin.com/uxopur/2/)

# c++ - 让编译器做出最终选择使用哪种类型

> ID：13198041
> 
> 赞同：3
> 
> 时间：2012-11-02T15:14:18.757
> 
> 标签：c++, templates, constructor

这个问题需要 C++ 模板元编程知识，因为涉及（间接）表达式模板。我间接地说，因为它不是直接关于表达式模板的问题，而是涉及 C++ 类型计算。如果你不知道那是什么，请不要回答这个问题。

为了避免在没有足够背景信息的情况下提出问题，让我详细说明一下我要解决的一般问题，然后转到更具体的部分。

假设您有一个提供`Integer`s 的库，用户可以使用它进行计算，就像使用`int`s 一样。此外，可以从 构造`Integer`a `int`。就像：

```
Integer<int> i(2); 
```

在内部我的`Integer`类是一个类模板：

```
template<class T>
class Integer {
  // cut out
}; 
```

所以我可以在我喜欢的任何整数类型上定义它。

现在在不更改 API 的情况下，我想以一种方式更改库，即 if`Integer`是从 an 构造的，`int`它应该在内部由不同的类型表示，比如`IntegerLit`. 这样做的原因是我可以加快一些计算，因为我知道一个实例`Integer`是从一个创建的`int`（可以将它作为`int`参数传递给一个函数，而不是作为一个由基指针 + 单独数据描述的通用对象。这就像一个评论。）

从 an 构造时**类型不同**是很重要的，`int`因为我需要编译器根据是否从 an 构造来占用不同的代码路径`int`。我不能用运行时数据标志来做到这一点。（简而言之：编译器生成一个函数，该函数根据类型采用一个`int`或更通用的对象类型。）

话虽如此，我遇到了一个问题：当使用做这样的事情时：

```
Integer<int> a,b(2);

a = b + b; 
```

这里`a`应该是一般的`Integer`和`b`专门的`IntegerLit`。然而，我的问题是如何在 C++ 中表达这一点，因为用户可以自由地使用相同的类型`Integer`来定义她的变量。

使类型多态，即派生`IntegerLit`自`Integer`将不起作用。暂时看起来还不错。但是，由于用户创建了`Integer`（基类）的实例，因为它是基类，所以编译器会粘在表达式树中（这就是问题中涉及表达式模板的原因）。因此，这两种情况再次无法区分。在这一点上，做一个 RTTI 检查一个动态演员真的不是我想要的。

更有希望的似乎是将文字模板参数添加`bool lit`到类型中，说明它是否由 a 构造而成`int`。关键是不要为一个不是文字的情况指定转换规则，而是为另一种情况指定它。

但是，我无法让它发挥作用。如果不是从`int`. 否则它会失败，因为没有将 Integer 指定`true`为 的值`lit`。所以编译器搜索没有转换规则的默认实现。`Integer<int,true>`从`int`. _

```
template<class T,bool lit=false>
class Integer
{
public:
  Integer() {
    std::cout << __PRETTY_FUNCTION__ << "\n";
  }
  T F;
};

template<>
template<class T>
class Integer<T,true>
{
public:
  Integer(int i) {
    std::cout << __PRETTY_FUNCTION__ << "\n";
  }
  T F;
}; 
```

我开始想知道 C++ 是否可以实现这样的事情。

C++11 的一个新特性是否可以在这里提供帮助？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T15:18:57.897

不，这不是 C++ 的工作方式。如果你定义`b`为`Integer b`，那么它就是一个`Integer`。无论随后用于初始化的表达式如何，这都适用`b`。

此外，请考虑以下事项：`extern Integer b;`. 在其他地方有一个初始化 的表达式`b`，但编译器仍然必须在这里找出类型`b`有什么。（不是“将有”，而是“有”）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T15:34:48.293

无论如何，你不能这样做。但是使用“自动”你可以接近。

```
// The default case
Integer<int> MakeInt()
{
    return Integer<int>();
}

// The generic case
template <class T>
Integer<T> MakeInt(T n)
{
    return Integer<T>(n);
}

// And specific to "int"
Integer<IntegerLit> MakeInt(int n)
{
    return Integer<IntegerLit>(n);
}

auto a = MakeInt();
auto b = MakeInt(2);
auto c = MakeInt('c');
auto d = MakeInt(2.5); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T16:04:49.783

你不能那样做。一旦你说变量就是`Integer<int>`变量的类型。您*可以*做的是`Integer`根据使用的构造函数使底层代表发生变化，如下所示：

```
template<class T>
class Integer {
  // cut out
    Integer() : rep_(IntRep()) {}
    explicit Integer(int val) : rep_(IntLitRep(val)) {}

private:
    boost::variant<IntRep, IntLitRep> rep_;
}; 
```

然后，您可以轻松确定哪个变体版本处于活动状态，并在需要时使用不同的代码路径。

编辑：在这种情况下，即使 the 的类型`Integer`相同，您也可以轻松地使用模板函数使其表现为两种不同的类型（因为 rep 更改了有效类型）。

# rest - RESTful webservices：查询参数

> ID：13198043
> 
> 赞同：0
> 
> 时间：2012-11-02T15:14:22.180
> 
> 标签：rest, path, resteasy

我正在使用带有 RESTEasy 的 JAX-RS。

我想知道我们是否可以仅通过查询参数的顺序和数量来表示不同的资源？

例如

```
/customer/1234
/customer?id=1234
/customer?name=James 
```

我可以创建三种不同的方法，例如

```
@Path("customer/{id}")
public Response get(@PathParam("id") final Long id) {
..
}

@Path("customer?id={id}")
public Response get(@QueryParam("id") final Long id) {
..
}

@Path("customer?name={name}")
public Response get(@QueryParam("name") final String name) {
..
} 
```

这行得通吗，我可以通过区分这样的路径来调用不同的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:19:06.257

这是一个有效的`@Path`：

```
@Path("customer/{id}")        // (1) 
```

这些不是：

```
@Path("customer?id={id}")     // (2)
@Path("customer?name={name}") // (3) 
```

它们是相同的，因为归结为

```
@Path("customer") 
```

你可以使用它。

所以你*可以*有`(1)`and 之一`(2)`和`(3)`。但你*不能同时*拥有`(2)`和`(3)`。

`@QueryParam`参数*不是*`@Path`. _ 您*可以*像在方法签名中那样访问它们，但不能将 JAX-RS 的路由基于它们。

**编辑：**

您可以编写*一种*同时接受`id`和`name`as 的方法`@QueryParam`。这些查询参数是可选的。

```
@Path("customer")
public Response get(@QueryParam("id") final String id,
                    @QueryParam("name") final String name) {
    // Look up the Customers based on 'id' and/or 'name'
} 
```

# iphone - 检测设备的最佳方法是 iPhone 5

> ID：13198045
> 
> 赞同：1
> 
> 时间：2012-11-02T15:14:24.787
> 
> 标签：iphone, objective-c, ios, iphone-5

> **可能重复：**
> [如何检测 iPhone 5（宽屏设备）？](https://stackoverflow.com/questions/12446990/how-to-detect-iphone-5-widescreen-devices)

有没有人知道比检查屏幕高度更好的方法来检测设备是否是 iPhone 5？

```
[UIScreen mainScreen].bounds.size.height == 568.0; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T15:28:44.127

我使用以下宏：

```
#define IS_IPHONE ( [[[UIDevice currentDevice] model] isEqualToString:@"iPhone"] )
#define IS_HEIGHT_GTE_568 [[UIScreen mainScreen ] bounds].size.height >= 568.0f
#define IS_IPHONE_5 ( IS_IPHONE && IS_HEIGHT_GTE_568 ) 
```

然后我可以这样做：

```
if(IS_IPHONE_5)
{
    NSLog(@"i am an iPhone 5!");
}
else
{
    NSLog(@"This is not an iPhone 5");
} 
```

# c++ - 矩阵向量积函数的签名

> ID：13198048
> 
> 赞同：2
> 
> 时间：2012-11-02T15:14:32.090
> 
> 标签：c++, arrays, multidimensional-array, signature

我对 C++ 比较陌生，仍然对如何将数组作为参数传递和返回感到困惑。我想写一个简单的矩阵向量积`c = A * b`函数，签名像

```
times(A, b, c, m, n) 
```

其中`A`是二维数组，`b`是输入数组，`c`是结果数组，`m`和`n`是 的维度`A`。我想通过`m`and指定数组维度`n`，而不是通过`A`.

（并行）函数的主体是

```
int i, j;
double sum;

#pragma omp parallel for default(none) private(i, j, sum) shared(m, n, A, b, c)
for (i = 0; i < m; ++i) {
    sum = 0.0;
    for (j = 0; j < n; j++) {
        sum += A[i][j] * b[j];
    }
    c[i] = sum;
} 
```

1.  像这样的函数的正确签名是什么？
2.  现在假设我想在函数中创建结果数组 c 并返回它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:30:41.090

这是你应该使用的答案......所以解决这个问题的一个好方法是创建一个`struct`或`class`包装你的数组（好吧，数据缓冲区 - 我会使用 a `std::vector`）。而不是像这样的签名`times(A, b, c, m, n)`，而是使用这种语法：

```
Matrix<4,4> M;
ColumnMatrix<4> V;
ColumnMatrix<4> C = M*V; 
```

其中 M 的宽度/高度在`<4,4>`数字中。

Matrix 类的速写可能是（有点不完整——例如，没有 const 访问）

```
template<size_t rows, size_t columns>
class Matrix
{
private:
  std::vector<double> values;
public:
  struct ColumnSlice
  {
    Matrix<rows,columns>* matrix;
    size_t row_number;
    double& operator[](size_t column) const
    {
      size_t index = row_number * columns + column;
      Assert(matrix && index < matrix->values.size());
      return matrix->values[index];
    }
    ColumnSlice( Matrix<rows,columns>* matrix_, size_t row_number_ ):
      matrix(matrix_), row_number(row_number_)
    {}
  };
  ColumnSlice operator[](size_t row)
  {
    Assert(row < rows); // note: zero based indexes
    return ColumnSlice(this, row);
  }
  Matrix() {values.resize(rows*columns);}
  template<size_t other_columns>
  Matrix<rows, other_columns> operator*( Matrix<columns, other_columns> const& other ) const
  {
    Matrix<rows, other_columns> retval;
    // TODO: matrix multiplication code goes here
    return std::move(retval);
  }
};

template<size_t rows>
using ColumnMatrix = Matrix< rows, 1 >;

template<size_t columns>
using RowMatrix = Matrix< 1, columns >; 
```

以上使用了您的编译器可能没有的 C++0x 功能，并且可以在没有这些功能的情况下完成。

这一切的意义何在？您可以拥有看起来像数学并且在 C++ 中做正确事情的数学，同时非常高效，*这*就是“正确”的 C++ 方法。

`std::vector`如果您更习惯使用C++ 的某些功能（例如处理数组内存管理），还可以使用类似 C 的方式进行编程。但这是对这个问题的不同答案。:)

（注意：上面的代码尚未编译，也不是完整的 Matrix 实现。但是，您可以在野外找到基于模板的 Matrix 实现。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T15:52:41.267

所以不是“你应该宁愿”回答（我会留下，因为你真的应该宁愿！），这里是“你要求的”答案。

我会`std::vector`用来保存您的数组数据（因为它们具有 O(1) 移动功能）而不是 a `std::array`（这可以为您节省间接费用，但移动成本更高）。 `std::vector`是`malloc`'d（和`realloc`'d）缓冲区`std::array`的C++“改进”，而是`char foo[27];`样式缓冲区的C++“改进”。

```
std::vector<double> times(std::vector<double> const& A, std::vector<double> const& b, size_t m, size_t n)
{
  std::vector<double> c;
  Assert(A.size() = m*n);
  c.resize(n);

  // .. your code goes in here.
  // Instead of A[x][y], do A[x*n+y] or A[y*m+x] depending on if you want column or
  // row-major order in memory.
  return std::move(c); // O(1) copy of the std::vector out of this function
} 
```

您会注意到我稍微更改了签名，以便它返回 std::vector 而不是将其作为参数。我这样做是因为我可以，而且它看起来更漂亮！

如果您确实必须传入`c`函数，请将其作为 a 传入`std::vector<double>&`- 对 a 的引用`std::vector`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T15:52:13.043

法向量矩阵乘法如下：

```
friend Vector operator*(const Vector &v, const Matrix &m); 
```

但是如果要单独传递维度，则如下：

```
friend Vector mul(const Vector &v, const Matrix &m, int size_x, int size_y); 
```

由于 Vector 和 Matrix 将是 1d 和 2d 数组，它们看起来像这样：

```
struct Vector { float *array; };
struct Matrix { float *matrix; }; 
```

# terminal - 程序完成后保持 gnome 终端打开

> ID：13198056
> 
> 赞同：0
> 
> 时间：2012-11-02T15:14:53.660
> 
> 标签：terminal, gnome

该脚本会打开一个 gnome 终端和其中的 4 个选项卡，但是一旦程序完成，这些选项卡就会关闭，所以我看不到输出。当我手动运行每个程序时不会发生这种情况。即使程序完成，如何保持选项卡打开。

```
gnome-terminal --tab -e "optirun yarpserver" \
           --tab -e "sh -c 'sleep 20 ; optirun iCub_SIM'" \
           --tab -e "sh -c 'sleep 86 ; optirun simCartesianControl'" \
           --tab -e "sh -c 'sleep 116 ; optirun iKinCartesianSolver --context simCartesianControl/conf --part left_arm'" \ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:24:24.170

不确定如何在命令行上执行此操作（`man gnome-terminal`似乎没有指示特定选项，但您可以启动一个`gnome-terminal`，设置特定选项（其中一个是“当命令退出时：保持终端打开”），并将您的设置保存为特定配置文件。有一个用于选择要使用的特定配置文件的命令行选项，这样应该可以完成您想要的。

# apache-flex - 迁移到 Flex 4.6 后调整大小的按钮

> ID：13198057
> 
> 赞同：0
> 
> 时间：2012-11-02T15:15:00.470
> 
> 标签：apache-flex, button, migration, flex4.6

我正在将现有的 Flex 应用程序从 4.0 迁移到 4.6。升级后，按钮宽度在我的应用程序中调整大小，升级到 Flex 4.6 后边缘实际上位于面板组件之外。发生这种情况的任何原因？我读到升级到 Flex 4.6 后发生了一些外观变化，但仅此而已。

在我的应用程序中，我们定义了 spark 按钮，如下所示：

```
<s:Button xmlns:fx="http://ns.adobe.com/mxml/2009" 
      xmlns:s="library://ns.adobe.com/flex/spark" 
      xmlns:mx="library://ns.adobe.com/flex/mx"
      creationComplete="creationCompleteHandler(event)"
      height="25" styleName="dpransparentButton"> 
```

有简单的解决方法吗？我是否提供了足够的信息来获得我现在正在寻找的答案？

我在 Maven 构建的输出中看到了这些警告：

> [警告] C:\Projects\trunk\daip-flex-domain\src\main\flex\GroupLocation.as:[12,18] 没有为 GroupLocation 类指定构造函数。公共类 GroupLocation 扩展 GroupLocationBase {
> 
> [警告] C:\Projects\trunk\daip-flex-domain\src\main\flex\LocationNotam.as:[12,18] 没有为类 LocationNotam 指定构造函数。公共类 LocationNotam 扩展 LocationNotamBase {
> 
> [警告] swc 'C:\Projects\daip-library\trunk\daip-repository\com\adobe\flex\framework\framework\4.6.0.23201\framework-4.6.0.23201.swc' 有样式默认值并且在library-path，这意味着将在没有样式的情况下链接依赖项。这可能会导致使用输出 swc 的应用程序缺少皮肤。swc 应该放在外部库路径中。
> 
> [警告] C:\Projects\daip\trunk\daip-flex-gui\src\main\flex\ui\user\views\UserManagementView.mxml:[331,-1] 数据绑定将无法检测到“长度”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:37:20.340

默认填充已更改，您可以在控件中使用 paddingRight="0" paddingLeft="0"

# java - 位置和 GeoPoint distanceTo()

> ID：13198062
> 
> 赞同：1
> 
> 时间：2012-11-02T15:15:07.683
> 
> 标签：java, android, google-maps, location, geopoints

我有用户的位置（类位置）。和地理点列表。计算距离有什么功能吗？还是编写自己的函数是唯一的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:16:49.730

这是一个简单的数学方程式。见[欧几里得距离](http://en.wikipedia.org/wiki/Distance#Distance_in_Euclidean_space)

确保您的单位有意义。如果没有库函数来执行此操作，则编码完全是微不足道的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T15:18:33.647

[Openmap](http://openmap.bbn.com/)是一个使用地图构建应用程序的库。它具有用于计算两点之间的距离和方位角的类和方法。见类[Geo](http://openmap.bbn.com/doc/api/com/bbn/openmap/geo/Geo.html)。

如果库太大，您可以从 svn 下载源代码并仅复制 Geo 类及其依赖项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T15:31:12.253

我相信最简单的方法是使用 Android Location 类中的 distanceBetween 函数。

```
Location userLocation = new Location();
GeoPoint geoPoint = new GeoPoint();
float[] results = new float[3];
Location.distanceBetween(userLocation.getLatitude(), userLocation.getLongitude(), (geoPoint.getLatitudeE6()/1E6), (geoPoint.getLongitudeE6()/1E6), results); 
//result[0] = distance in m 
```

# apache - 如何从我的链接中删除“index.php”？

> ID：13198068
> 
> 赞同：1
> 
> 时间：2012-11-02T15:15:34.957
> 
> 标签：apache, .htaccess, codeigniter

通常我访问这样的页面：`http://localhost/codeigniter/index.php/auth/login` 但是我希望能够访问这样的页面：`http://localhost/codeigniter/auth/login`

我没有关于`http.conf`和`.htaccess`配置的信息。

我已经`$config['index_page'] = '';`设置`codeigniter/application/config/config.php`

我的 http.conf 文件是默认的，除了取消注释“ `LoadModule rewrite_module modules/mod_rewrite.so`”

我检查了许多提议的 .htaccess 文件，但我无法理解重写规则背后的逻辑。

这是对我来说最成功的`.htaccess`内容。它位于`/www/CodeIgniter/`。
（最成功的我的意思是这是唯一一个由 CodeIgniter 而不是由服务器创建的 404 错误。）

```
 RewriteOptions Inherit
Options -Indexes
Options +FollowSymLinks
RewriteBase /CodeIgniter/
# Set the default file for indexes
DirectoryIndex index.php

<IfModule mod_rewrite.c>

    # activate URL rewriting
    RewriteEngine on

    # do not rewrite links to the documentation, assets and public files
    RewriteCond $1 !^(images|assets|uploads|captcha)

    # do not rewrite for php files in the document root, robots.txt or the maintenance page
    RewriteCond $1 !^([^\..]+\.php|robots\.txt)

    # but rewrite everything else
    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>

    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.

    ErrorDocument 404 index.php

</IfModule> 
```

我讨厌要求直接解决方案，但不幸的是，这是我最后的手段：/你能给我一个正确的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:06:19.387

这是我的重复答案： [Codeigniter 与 localhost (XAMPP) 中的路径有关的问题](https://stackoverflow.com/questions/13146395/codeigniter-issues-with-paths-in-localhost-xampp/13154286#13154286)

请在项目文件夹中创建 .htaccess 文件并写入：

```
<IfModule mod_rewrite.c>
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite all other URLs to index.php/URL
RewriteRule ^(.*)$ index.php?url=$1 [PT,L] 

</IfModule>
<IfModule !mod_rewrite.c>
 ErrorDocument 404 index.php
</IfModule> 
```

您不需要在配置文件的 base_url 中定义：

```
$config['base_url'] = ''; // blank it. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:04:37.323

把它放在你的 htaccess 上

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond $1 !^(index\.php|resources|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
</IfModule> 
```

**确保在您的服务器上启用了重写模块**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T19:39:29.887

这是我发现对我有用的最简单的一个：-

```
RewriteEngine on
RewriteCond $1 !^(index\.php|resources|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

# m2eclipse - m2e 无法执行 wro4j 插件

> ID：13198069
> 
> 赞同：3
> 
> 时间：2012-11-02T15:15:41.507
> 
> 标签：m2eclipse, m2e, wro4j

我想在项目中使用 wro4j maven 插件。我使用 mvn 命令行工作，但不在 Eclipse/m2e 中工作。

我尝试了生命周期映射自定义和 wroj4j-m2e 集成插件。

这是生命周期映射自定义的错误：

> 目标 ro.isdc.wro4j:wro4j-maven-plugin:1.6.0:run 的执行默认值：插件 ro.isdc.wro4j:wro4j-maven-plugin:1.6.0 或其依赖项之一无法解析：失败收集 ro.isdc.wro4j:wro4j-maven-plugin:jar:1.6.0 () 的依赖项 (ro.isdc.wro4j:wro4j-maven-plugin:1.6.0:run:default:process-resources)

m2eclipse 的日志（在 .plugins\org.eclipse.m2e.logback.configuration 中）关于这个错误是空的，即使在 Eclipse maven 首选项中选择了调试输出。

*   m2e 版本：1.2.0.20120903-1050
*   eclipse 版本：Juno Service Release 1

这是 pom.xml （摘录）

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>test</groupId>
<artifactId>test-maven</artifactId>
<version>0.0.1-SNAPSHOT</version>

<properties>
    <wro4j.version>1.6.0</wro4j.version>
</properties>

<build>

    <plugins>
        <plugin>
            <groupId>ro.isdc.wro4j</groupId>
            <artifactId>wro4j-maven-plugin</artifactId>
            <version>${wro4j.version}</version>
            <executions>
                <execution>
                    <configuration>
                        <destinationFolder>${project.build.directory}/</destinationFolder>
                        <wroManagerFactory>ro.isdc.wro.maven.plugin.manager.factory.ConfigurableWroManagerFactory</wroManagerFactory>
                        <wroFile>${basedir}/src/main/config/wro.xml</wroFile>
                        <extraConfigFile>${basedir}/src/main/config/wro.properties</extraConfigFile>
                        <targetGroups>gss</targetGroups>
                        <cssDestinationFolder>${project.build.directory}/${project.build.finalName}/styles/</cssDestinationFolder>
                        <jsDestinationFolder>${project.build.directory}/${project.build.finalName}/scripts/</jsDestinationFolder>
                        <contextFolder>${basedir}/src/main/</contextFolder>
                        <ignoreMissingResources>false</ignoreMissingResources>
                        <wroFile>${basedir}/src/main/config/wro.xml</wroFile>
                    </configuration>
                    <phase>process-resources</phase>
                    <goals>
                        <goal>run</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>

    <!-- configure #!@ m2eclipse -->
    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.eclipse.m2e</groupId>
                <artifactId>lifecycle-mapping</artifactId>
                <version>1.0.0</version>
                <configuration>
                    <lifecycleMappingMetadata>
                        <pluginExecutions>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>ro.isdc.wro4j</groupId>
                                    <artifactId>wro4j-maven-plugin</artifactId>
                                    <versionRange>[1.0,]</versionRange>
                                    <goals>
                                        <goal>run</goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <execute>
                                        <runOnIncremental>true</runOnIncremental>
                                    </execute>
                                </action>
                            </pluginExecution>

                        </pluginExecutions>
                    </lifecycleMappingMetadata>
                </configuration>
            </plugin>

        </plugins>
    </pluginManagement>
</build> 
```

# asp.net-mvc-3 - 如何在 DbUpdateConcurrencyException 中加载多个相关实体

> ID：13198071
> 
> 赞同：3
> 
> 时间：2012-11-02T15:15:44.130
> 
> 标签：asp.net-mvc-3

我有 3 个相关的表

1.  个人实体：具有来自地址实体（地址和地址 1）的两个外键和来自所有者表的一个外键

2.  地址实体有一个来自 Owners 表的外键

人员视图具有来自地址实体的字段并在跟踪并发检查时

```
var entry = ex.Entries.Single();
var databaseValues = (Person)entry.GetDatabaseValues().ToObject();
var clientValues = (Person)entry.Entity; 
```

适用于 Person 字段。

但是，当我尝试访问

databasevalues.Address.City 或 databasevalues.Address1.City 它给出了一个空异常。我认为这是由于一开始没有加载地址实体

征求建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:40:17.497

您可以尝试在查询中显式加载相关实体：

```
IQueryable<Person> persons = DataContext.Persons.Where(p => p.City == "Hoboken").Include("Address") 
```

将为返回的人员实例显式加载相关地址条目。

另一种选择是禁用 edmx 文件中的延迟加载选项；打开文件，然后在属性面板中，设置 Lazy Loading = false。

# mysql - 如何重写查询以使其更快且符合 sql

> ID：13198079
> 
> 赞同：0
> 
> 时间：2012-11-02T15:16:09.517
> 
> 标签：mysql, sql

这个查询：

```
SELECT `subscribers`.`email_address`, `subscribers`.`first_name`, `subscribers`.`last_name`,
        GROUP_CONCAT( DISTINCT t1.value SEPARATOR '|' ) AS 'Colors', GROUP_CONCAT( DISTINCT t2.value SEPARATOR '|' ) AS 'Languages'
FROM `subscribers`
LEFT JOIN `subscribers_multivalued` AS `t1` ON subscribers.subscriber_id = t1.subscriber_id AND t1.field_id = 112
LEFT JOIN `subscribers_multivalued` AS `t2` ON subscribers.subscriber_id = t2.subscriber_id AND t2.field_id = 111
WHERE (list_id = 40) AND (state = 1)
GROUP BY `subscribers`.`email_address` , `subscribers`.`first_name` , `subscribers`.`last_name` 
```

使用执行计划：

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
1   SIMPLE  subscribers     ref     FK_list_id,state_date_added     FK_list_id  4   const   1753610     Using where; Using filesort
1   SIMPLE  t1  ref     subscriber_fk,field_fk  subscriber_fk   4   chad0598_mailablel.subscribers.subscriber_id    1    
1   SIMPLE  t2  ref     subscriber_fk,field_fk  subscriber_fk   4   chad0598_mailablel.subscribers.subscriber_id    1 
```

由于未知原因导致错误：一般错误：3 在 mysql 中写入文件“/tmp/MYzamaNT”（错误代码：28）时出错。

我通过subscriber_id insead 把它改写成这样的groupy：

```
SELECT `subscribers`.`email_address`, `subscribers`.`first_name`, `subscribers`.`last_name`,
        GROUP_CONCAT( DISTINCT t1.value SEPARATOR '|' ) AS 'Colors', GROUP_CONCAT( DISTINCT t2.value SEPARATOR '|' ) AS 'Languages'
FROM `subscribers`
LEFT JOIN `subscribers_multivalued` AS `t1` ON subscribers.subscriber_id = t1.subscriber_id AND t1.field_id = 112
LEFT JOIN `subscribers_multivalued` AS `t2` ON subscribers.subscriber_id = t2.subscriber_id AND t2.field_id = 111
WHERE (list_id = 40) AND (state = 1)
GROUP BY `subscribers`.`subscriber_id` 
```

这个查询的计划更好（不是文件排序）：

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
1   SIMPLE  subscribers     ref     FK_list_id,state_date_added     FK_list_id  4   const   1753610     Using where
1   SIMPLE  t1  ref     subscriber_fk,field_fk  subscriber_fk   4   chad0598_mailablel.subscribers.subscriber_id    1    
1   SIMPLE  t2  ref     subscriber_fk,field_fk  subscriber_fk   4   chad0598_mailablel.subscribers.subscriber_id    1 
```

它似乎在 mysql 中工作，并且比以前的查询快得多。虽然它可以在 mysql 中使用，但它不符合 sql 标准，但不应在字段列表中包含 GROUP BY 中不存在的聚合字段。我有办法使查询与最后一个查询一样快并使其符合 sql 吗？

我也尝试用这种方式重写它：

```
SELECT `subscribers`.`email_address`, `subscribers`.`first_name`, `subscribers`.`last_name`,
        t1.colors AS 'Colors', t2.languages AS 'Languages'
FROM `subscribers`
LEFT JOIN (SELECT subscriber_id, GROUP_CONCAT( DISTINCT value SEPARATOR '|' ) AS 'colors'
           FROM subscribers_multivalued
           WHERE field_id = 112
           GROUP BY subscriber_id)  t1 ON t1.subscriber_id = `subscribers`.`subscriber_id`
LEFT JOIN (SELECT subscriber_id, GROUP_CONCAT( DISTINCT value SEPARATOR '|' ) AS 'languages'
           FROM subscribers_multivalued
           WHERE field_id = 111
           GROUP BY subscriber_id)  t2 ON t2.subscriber_id = `subscribers`.`subscriber_id` 
```

这个查询的计划要糟糕得多：

```
1   PRIMARY     subscribers     ALL     NULL    NULL    NULL    NULL    23358546     
1   PRIMARY     <derived2>  ALL     NULL    NULL    NULL    NULL    900000   
1   PRIMARY     <derived3>  ALL     NULL    NULL    NULL    NULL    900000   
3   DERIVED     subscribers_multivalued     ALL     field_fk    field_fk    4       20621115    Using filesort
2   DERIVED     subscribers_multivalued     ALL     field_fk    field_fk    4       20621115    Using filesort 
```

我等不及它返回数据了；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:53:29.043

我会保留更快的。您还可以测试/基准测试此变体：

```
SELECT s.email_address, 
       s.first_name, 
       s.last_name,
       COALESCE(t1.Colors, '') AS Colors,
       COALESCE(t2.Languages, '') AS Languages
FROM subscribers AS s
  LEFT JOIN 
    ( SELECT t1.subscriber_id, 
          GROUP_CONCAT( DISTINCT t1.value SEPARATOR '|' ) AS Colors
      FROM subscribers AS s
        JOIN subscribers_multivalued AS t1
          ON s.subscriber_id = t1.subscriber_id 
      WHERE t1.field_id = 112
        AND s.list_id = 40 
        AND s.state = 1
      GROUP BY t1.subscriber_id 
    ) AS t1
    ON s.subscriber_id = t1.subscriber_id 
  LEFT JOIN 
    ( SELECT t2.subscriber_id, 
             GROUP_CONCAT( DISTINCT t2.value SEPARATOR '|' ) AS Languages
      FROM subscribers AS s
        JOIN subscribers_multivalued AS t2
          ON s.subscriber_id = t2.subscriber_id 
      WHERE t2.field_id = 111
        AND s.list_id = 40 
        AND s.state = 1
      GROUP BY t2.subscriber_id 
    ) AS t2
    ON s.subscriber_id = t2.subscriber_id 
WHERE s.list_id = 40 
  AND s.state = 1 ; 
```

如果`(field_id, subscriber_id, value)`在表中是唯一的`subscribers_multivalued`，也可以去掉这两个`DISTINCT`。

* * *

关于速度和效率，请检查您拥有的索引。这些将对您的版本和这个版本都有帮助：

*   在`subscribers`表中，一个索引`(list_id, state, subscriber_id)`要么`(state, list_id, subscriber_id)`

*   在表中，或 （次佳） 上`subscribers_multivalued`的索引。`(field_id, subscriber_id, value)``(field_id, subscriber_id)`

# javascript - 将 DOM 元素添加到 onclick 函数

> ID：13198081
> 
> 赞同：0
> 
> 时间：2012-11-02T15:16:12.350
> 
> 标签：javascript

我想将 DOM 元素添加到 HTML onclick 函数，但我不知道如何。当我向您展示一些代码时，问题可能会更清楚：

```
var element1 = document.createElement('div');
var element2 = document.createElement('div');

element1.setAttribute('onclick','function('+element2+')'); 
```

我知道你应该从

```
onclick="function(this...)" 
```

并像这样导航到我想要的元素，但我想知道是否有可能以上述方式做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:22:48.183

没有将元素映射到字符串的内置功能。如果您正在寻找将元素传递给处理程序的方法，请尝试：

```
var element1 = document.createElement('div');
var element2 = document.createElement('div');

element1.addEventListener('onclick',(function(element2){return function(){/* do something with element2 here*/})(element2)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T15:29:41.330

不知道你在这里的目标是什么，但没有必要做你正在做的事情......

这是链接或您打算单击的任何内容...

```
var someLink = document.getElementById('#some-link'); 
```

当你点击它时，你可以对一些 div 做一些事情......

```
someLink.onclick = function() {

  var element1 = document.createElement('div');
  var element2 = document.createElement('div');

  // Do something with element1 or element2
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T15:25:33.187

如果你可以使用 jQuery，你可以尝试这样的事情：

```
 $(someElement).click(function(){
       var element1 = document.createElement('div');
       var element2 = document.createElement('div');

       // Do something here
    }); 
```

# java - 有没有更简洁的方法来编写这个轮询循环？

> ID：13198083
> 
> 赞同：2
> 
> 时间：2012-11-02T15:16:15.083
> 
> 标签：java, loops, webdriver, polling, selenium-webdriver

我正在用 Java 中的 Selenium/WebDriver 编写自动化测试用例。我实现了以下代码来轮询现有的 WebElements，但由于我不是 Java 专家，我想知道是否有更简洁的方法来编写此方法：

```
/** selects Business index type from add split button */
    protected void selectBusinessLink() throws Exception
    {
        Calendar rightNow = Calendar.getInstance();
        Calendar stopPolling = rightNow;
        stopPolling.add(Calendar.SECOND, 30);
        WebElement businessLink = null;
        while (!Calendar.getInstance().after(stopPolling))
        {
            try
            {
                businessLink = findElementByLinkText("Business");
                businessLink.click();
                break;
            }
            catch (StaleElementReferenceException e)
            {
                Thread.sleep(100);
            }
            catch (NoSuchElementException e)
            {
                Thread.sleep(100);
            }
            catch (ElementNotVisibleException e)
            {
                Thread.sleep(100);
            }
        }
        if (businessLink == null)
        {
            throw new SystemException("Could not find Business Link");
        }
    } 
```

这一行让我觉得代码有点脏：

```
 while (!Calendar.getInstance().after(stopPolling)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:28:45.060

你可以做这样的事情

```
long t = System.currentMillis();   // actual time in milliseconds from Jan 1st 1970.
while (t > System.currentMillis() - 30000 )  {
   ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:28:49.580

以毫秒为单位使用系统时间怎么样？

```
Calendar calendar = Calendar.getInstance();
calendar.add(Calendar.SECOND, 30);
long stopPollingTime = calendar.getTimeInMillis();
while (System.currentTimeMillis() < stopPollingTime) {
  System.out.println("Polling");
  try {
    Thread.sleep(100);
  } catch (InterruptedException e) {
  }
} 
```

# c# - 添加 HttpClient 标头会生成带有一些值的 FormatException

> ID：13198090
> 
> 赞同：95
> 
> 时间：2012-11-02T15:16:36.547
> 
> 标签：c#, dotnet-httpclient, google-cloud-messaging

这发生在针对 Google Cloud Messaging 进行编码的上下文中，但适用于其他地方。

考虑以下：

```
var http = new HttpClient();
http.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("key=XXX"); 
```

和

```
var http = new HttpClient();
http.DefaultRequestHeaders.Add("Authorization", "key=XXX"); 
```

两者都生成 FormatException：

> System.FormatException : value key=XXX' 的格式无效。

解决方案是删除等号。

1.  深入研究反射器显示在添加新标头值时会运行大量验证和解析代码。为什么这一切都是必要的？这个客户不应该让我们走开吗？

2.  您如何转义等号以便添加此值成功？

* * *

## 回答 #1

> 赞同：214
> 
> 时间：2013-03-06T08:12:02.250

不确定是否仍然相关，但我最近遇到了同样的问题，并且能够通过调用不同的方法来添加标题信息来解决它：

```
var http = new HttpClient();
http.DefaultRequestHeaders.TryAddWithoutValidation("Authorization", "key=XXX"); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-04-12T07:53:43.097

对于您的“为什么所有这些（解析和验证）都是必要的”问题，答案是：**它是在 HTTP 标准中定义的。**

在[HTTP/1.1](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.8)和[RFC2617](http://www.ietf.org/rfc/rfc2617.txt)中，一个认证头（例如 WWW-Authenticate 和 Authorization）的值有两部分：**一个方案部分和一个参数部分**。

对于 HTTP 基本身份验证，方案为“基本”，参数可能类似于*“QWxhZGRpbjpvcGVuIHNlc2FtZQ==”*，因此整个标头变为：

```
Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ== 
```

这就是为什么您的“key=XXX”没有通过验证的原因，因为它缺少方案部分。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-03-12T17:46:06.360

当我在 Authorization 标头的末尾添加一个空格时，我遇到了这个错误并偶然发现了这篇文章。

```
this.bearerAuthHttpClient.DefaultRequestHeaders.Add("Authorization ", $"Bearer {token}"); 
```

您可以在授权后看到有问题的“ ”。

我花了大约 15 分钟才看到我的错字...

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-12-23T05:39:52.607

我通过以下方式设置 Authorization 标头解决了这个异常（我的 FormatException 由值中的逗号引起）：

```
var authenticationHeaderValue = new AuthenticationHeaderValue("some scheme", "some value");
client.DefaultRequestHeaders.Authorization = authenticationHeaderValue; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-11T12:05:29.333

今天早上我在处理一个不完全遵循 HTTP 规范的外部 API 时遇到了几个问题。

作为我发布的一部分，他们想要`Content-Type`and `Content-Disposition`，它不能添加到`HttpClient`对象中。要添加这些标头，您需要创建一个[HttpRequestMessage](https://msdn.microsoft.com/en-us/library/system.net.http.httprequestmessage(v=vs.118).aspx)。在那里，您需要将标题添加到`Content`属性中。

```
private HttpRequestMessage GetPostMessage(string uri, string contentType,
                                          string fileName, Stream content)
{    
    var request = new HttpRequestMessage
    {
        Content = new StreamContent(content),
        RequestUri = new Uri(uri),
        Method = HttpMethod.Post
    };

    // contentType = "video/mp4"
    request.Content.Headers.ContentType = new MediaTypeHeaderValue(contentType);

    //Need TryAddWithoutValidation because of the equals sign in the value.
    request.Content
           .Headers
           .TryAddWithoutValidation("Content-Disposition",
                                    $"attachment; filename=\"{Path.GetFileName(fileName)}\"");

    // If there is no equals sign in your content disposition, this will work:
    // request.Content.Headers.ContentDisposition = 
    //    new ContentDispositionHeaderValue($"attachment; \"{Path.GetFileName(fileName)}\"");

    return request;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-17T13:14:26.413

在我的例子中，我从 byte[] RowVersion SQL 字段生成 ETags 字符串值。所以我需要添加 wrap 生成的。即 AAAAAAAAF5s= string inside " 如下...

```
 var eTag = department.RowVersion.ToETagString();

        httpClient.DefaultRequestHeaders.Add(Microsoft.Net.Http.Headers.HeaderNames.IfMatch, $"\"{eTag}\"")

    public class DepartmentForHandleDto
    {
        public string Name { get; set; }
        public string GroupName { get; set; }
        public byte[] RowVersion { get; set; }
    }

    public static class ByteArrayExtensions
    {
        public static string ToETagString(this byte[] byteArray)
        {
            return Convert.ToBase64String(byteArray != null && byteArray.Length > 0 ? byteArray : new byte[8]);                    
        }
    } 
```

# wysiwyg - 如何在 wysihtml5 中修改 parser_rules？

> ID：13198092
> 
> 赞同：1
> 
> 时间：2012-11-02T15:16:39.583
> 
> 标签：wysiwyg, wysihtml5

我需要修改我的 img 元素的解析器规则。

目前它只支持非常有限的属性，限制数据类型如下：

```
 "img": {
                "check_attributes": {
                    "width": "numbers",
                    "src": "url",
                    "height": "numbers",
                    "data-sda": "url"
                }
            } 
```

如何使它支持更多的元素，如类或 id。

在我的解决方案中，我（用户）将图像拖放到编辑器中，正如我之前所说的那样，它是 wysihtml5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:37:24.313

github 上的这个拉取请求添加了看起来正是您正在寻找的功能：[扩展 checkAttributes 值类型](https://github.com/xing/wysihtml5/pull/258)。这是一个很小的变化；您可以在自己的副本上手动完成，而无需大惊小怪。

# jquery - 函数内的 jQuery removeClass 和 addClass

> ID：13198093
> 
> 赞同：1
> 
> 时间：2012-11-02T15:16:42.477
> 
> 标签：jquery, function, this, addclass

我得到以下菜单：

```
 <ul id="nav" class="nav">
    <li>
     <a class="navitem active" href="javascript:loadTab();">My Profile </a>
    </li>
    <li>
     <a class="navitem search" href="javascript:loadTab();"> Search </a>
    </li>
    <li>
     <a class="navitem" href="javascript:loadTab();">Favorites </a>
    </li>
   </ul> 
```

还有我的函数（加载在标题中的 .js 文件中）：

```
function loadTab() {
    jQuery(".navitem").removeClass("active");
       jQuery(".navitem").click(function () {
          jQuery(this).addClass("active");
       });
} 
```

删除“活动”类有效，将“活动”类添加到单击的元素不起作用。有任何想法吗？

最好的祝福！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:20:34.490

正如thatidiotguy 所说，您在错误的地方删除了课程。你想要这样的东西：

```
jQuery(".navitem").click(function (event) {
    event.preventDefault();

    jQuery(".navitem").removeClass("active");
    jQuery(this).addClass("active");
}); 
```

编辑：而且，不需要`javascript:loadTab();`在你的`a`标签中。`href`将它们的属性更改为`#`：

```
<ul id="nav" class="nav">
    <li>
        <a class="navitem active" href="#">My Profile </a>
    </li>
    <li>
        <a class="navitem search" href="#"> Search </a>
    </li>
    <li>
        <a class="navitem" href="#">Favorites </a>
    </li>
</ul> 
```

另外，我`event.preventDefault();`在链接的`click`事件处理程序中添加了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:18:15.450

这是因为每当您单击选项卡时，都会删除该类。然后，您会告诉选项卡在单击时调用 loadTab。这再次删除了类。Think Inception“梦中之梦”

# java - Maven 2 - 包 org.junit 不存在

> ID：13198095
> 
> 赞同：2
> 
> 时间：2012-11-02T15:16:47.377
> 
> 标签：java, maven, maven-2

即使存在 POM 中的依赖项，在我的 Maven 2 构建中也找不到 JUnit。

> `[ERROR] /project/web-test/src/java/com/domain/dialog/AbstractWebTest.java:[15,17] package org.junit does not exist`

可能是什么问题？`mvn compile -X`尚未提供关键信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:26:17.150

简单的问题是您的类`AbstractWebTest`没有正确位于下`src/test/java`，因为通常所有与测试相关的部分都必须位于`src/test/java`而不是`src/main/java`. 此外，您必须检查您的依赖项是否正确限定为`test`.

# jquery - jQuery Autocomplete 选择的值总是有尾随逗号

> ID：13198097
> 
> 赞同：0
> 
> 时间：2012-11-02T15:16:54.163
> 
> 标签：jquery, ajax, jquery-ui-autocomplete

我正在使用带有 MVC3 和 Razor 引擎的 jQuery 自动完成功能，它能够从我的 actionResult 中检索我的列表。但是，当我单击自动完成列表中的某个项目时，末尾总是有一个逗号。

**HTML**

```
<div class="editor-field">
    @Html.EditorFor(model => Model.group_name, new { ID = "group_name" })
    @Html.ValidationMessageFor(model => Model.group_name)
</div> 
```

**JS**

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#group_name").autocomplete('@Url.Action("LookUpGroupName")', // Call LookUpGroupName ActionResult in UserManager Controller
        {
        dataType: 'json',
        parse: function (data) {
            var rows = new Array();
            for (var i = 0; i < data.length; i++) {
                rows[i] = {
                    data: data[i],
                    value: data[i].group,
                    result: data[i].group
                }
            }
            return rows;
        },
        formatItem: function (row, i, max) {
            return row.group
        },
        width: 300,
        highlight: false,
        multiple: true
        //        multipleseparator: ","
    }); // End of autocomplete
});
</script> 
```

我输入字母 a 的请求的响应正文

```
[{"group":"A Tout France"},{"group":"Abba Blinds"},{"group":"Aberdeen Journals"},{"group":"Account suspended South West Media Group"},{"group":"Acumen Marketing Communications"},{"group":"Acumen Partners"},{"group":"adz media ltd"},{"group":"Aka Ltd"},{"group":"AL Marketing Communications"},{"group":"Alchemy Direct Media"}] 
```

如果我从使用我的自动完成功能中选择 A Tout France，则文本框中的值将是：

一个吹捧法国，

知道如何摆脱尾随逗号吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:41:45.277

```
multiple: true 
```

为所选的每个项目添加一个逗号，文档中的任何地方都没有解释。希望这可以节省一些人浪费的时间。

# google-fusion-tables - 多个下拉菜单

> ID：13198103
> 
> 赞同：3
> 
> 时间：2012-11-02T15:17:15.927
> 
> 标签：google-fusion-tables

如何创建具有多个下拉菜单的自定义地图？本质上，我所追求的模型是这张地图：

[http://www.lmcc.net/about/culture_map](http://www.lmcc.net/about/culture_map)

我想将地方分成不同的类别，并让它们可以通过不同的下拉菜单访问。我也喜欢显示该类别中所有地点的复选框的功能。

这是我必须通过 Fusion 表创建的东西吗？还是有其他方法？关于如何创建这样的地图的任何帮助都会很棒

谢谢！

# javascript - 如何知道从字段集中检查了哪个收音机

> ID：13198105
> 
> 赞同：1
> 
> 时间：2012-11-02T15:17:22.537
> 
> 标签：javascript, html, forms

我有以下代码：

```
 <fieldset id="dificuldade">
        <legend>Dificuldade:</legend>
        <input type="radio" name="dificuldade" value="facil"> Fácil </input>
        <input type="radio" name="dificuldade" value="medio"> Médio </input>
        <input type="radio" name="dificuldade" value="dificil"> Difícil </input>
    </fieldset>

    <fieldset id="tipo">
        <legend>Tipo de jogo:</legend>
        <input type="radio" name="Tipodejogo" value="somar"> Somar </input>
        <input type="radio" name="Tipodejogo" value="subtrair"> Subtrair </input>
        <input type="radio" name="Tipodejogo" value="dividir"> Dividir </input>
        <input type="radio" name="Tipodejogo" value="multiplicar"> Multiplicar </input>
    </fieldset>

    <input type="button" value="Começa" id="button" ></input>
</form> 
```

这是带有 html 和 js [http://jsfiddle.net/3bc9m/15/](http://jsfiddle.net/3bc9m/15/)的 jsfiddle 。我需要存储 2 个字段集的值，因此我可以根据选择的值生成游戏，但我的 javascript 没有返回其中任何一个。怎么了？有人告诉我 JQuery 要容易得多，但我不能使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:47:10.127

您在 jsFiddle 上的代码在大多数情况下似乎运行良好。唯一的问题是页面上不存在这些`output`元素`output2`。

因此，本应显示所选值的代码不起作用：

```
document.getElementById('output').innerHTML = curr.value;
document.getElementById('output2').innerHTML = tdj.value; 
```

实际检索所选值的部分工作正常。

只需将这两个元素添加到页面中，如下所示：

```
<p>Selected Values:</p>
<div id="output"></div>
<div id="output2"></div> 
```

可以在[此处](http://jsfiddle.net/3bc9m/34/)找到更新的 jsFiddle 。

**编辑**

如果仅选择一组中的单选按钮，则代码将失败。您可以使用此代码来查找选定的值：

```
document.getElementById('button').onclick = function() {

    var dif = document.getElementsByName('dificuldade');
    var tip = document.getElementsByName('Tipodejogo');

    var difValue;
    for (var i = 0; i < dif.length; i++) {
        if (dif[i].type === "radio" && dif[i].checked) {
            difValue = dif[i].value;
        }
    }

    var tipValue;
    for (var i = 0; i < tip.length; i++) {
        if (tip[i].type === "radio" && tip[i].checked) {
            tipValue = tip[i].value;
        }
    }

    document.getElementById('output').innerHTML = difValue;
    document.getElementById('output2').innerHTML = tipValue;
};​ 
```

更新的 jsFiddle 在[这里](http://jsfiddle.net/3bc9m/32/)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-02T15:25:44.733

考虑解决这个问题的这篇文章。它显示了一些 javascript 方法以及如何在 jQuery 中使用它。

[如何检查是否使用 JavaScript 选择了单选按钮？](https://stackoverflow.com/questions/1423777/how-can-i-check-if-a-radio-button-is-selected-in-javascript)

您是否有特定原因要按字段集分解它而不是直接按名称访问单选按钮？

# php - 向在 MediaWiki 中创建文章的每个用户发送感谢电子邮件

> ID：13198106
> 
> 赞同：3
> 
> 时间：2012-11-02T15:17:29.043
> 
> 标签：php, email, mediawiki

我希望我的 MediaWiki 在作者创建新文章时向他发送一封“谢谢”邮件。此方法是否有任何扩展可用？

或者：我正在从一个特殊页面创建文章。因此可以添加我自己的扩展程序并编写电子邮件脚本。但我很困惑如何获取作者的电子邮件 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:05:47.427

使用[`UserMailer`](http://svn.wikimedia.org/doc/classUserMailer.html)和[`MailAddress`](http://svn.wikimedia.org/doc/classMailAddress.html)类：

```
global $wgPasswordSender, $wgPasswordSenderName;

$from = new MailAddress( $wgPasswordSender, $wgPasswordSenderName );
$to = new MailAddress( $user );

$subject = "Thank you!";
$text = "This is a test. Blah blah blah...";

$status = UserMailer::send( $to, $from, $subject, $text );

if ( $status->isGood() ) {
    // Great, it worked!
} else {
    // Something went wrong, deal with it...
    // The $status object will have more information.
} 
```

构造`MailAddress`函数接受一个`User`对象或一个地址和一个名称。 [`$wgPasswordSender`](http://www.mediawiki.org/wiki/Manual%3a%24wgPasswordSender)是 MediaWiki 用于发送密码重置电子邮件和其他类似内容的默认电子邮件地址；你希望在你的`LocalSetting.php`.

# c# - 如何检查字符串是否不等于所有这些？

> ID：13198107
> 
> 赞同：4
> 
> 时间：2012-11-02T15:17:29.670
> 
> 标签：c#, linq, refactoring

尝试使用 LINQ 重写它：

```
if (mode != "A" && mode != "B" && mode != "C" && mode != "D" && mode != "E" && mode != "F" && mode != "G")
{
   continue;
} 
```

重构这个最清晰和简洁的方法是什么？我可以发誓我以前看过这样的帖子，但我现在找不到。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T15:21:54.907

您可以使用以下[`Contains`](http://msdn.microsoft.com/en-us/library/system.collections.ilist.contains.aspx)方法`IList<T>`：

```
IList<string> modes = new[]{"A","B","C","D","E","F","G"};
if (!modes.Contains(mode))... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T15:22:42.993

为字符串类编写扩展方法

```
public static bool In(this string s, params string[] values)
{
    return values.Any(x => x.Equals(s));
} 
```

这样称呼

```
if (!mode.In("A", "B", "C", "D","E","F", "G")
{
    continue;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T15:21:42.320

```
var modes = new[] { "A","B","C","D","E","F","G"};

if (modes.All(a => mode != a)) 
    continue; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T15:24:29.220

我一直使用这种扩展方法

```
public static bool IsIn(this string source, params string[] parms)
{
    return parms.Contains(source);
} 
```

并按如下方式使用它：

```
if (!mode.IsIn("A", "B", "C", "D", "E", "F", "G"))
{
    continue;
} 
```

下一步，如果你经常使用它，是

```
public static bool IsNotIn(this string source, params string[] parms)
{
    return !IsIn(source, params);
} 
```

你会变得更易读

```
if (mode.IsNotIn("A", "B", "C", "D", "E", "F", "G"))
{
    continue;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-02T15:28:38.147

```
string s = "ABCDEFG";
bool res = s.Any(item => { return (int)item > 64 && (int)item < 72; }); 
```

# php - 电子邮件验证码 - 是否为 uniqid？

> ID：13198108
> 
> 赞同：0
> 
> 时间：2012-11-02T15:17:35.190
> 
> 标签：php, mysql, pdo

所以我正在编写一个简单的用户系统，我希望用户验证他们的电子邮件地址（就像几乎所有其他网站一样）。您认为生成此字符串以用于验证用户的最佳方式是什么？

起初我以为我会只使用`uniqid()`，但当我更多地考虑它时，我应该记住哪种类型的安全问题。

PS。我正在使用带准备的 PDO（MySQL）；我应该对我的数据库操作进行哪些其他消毒？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:58:15.620

您希望能够生成一个很难在外部重现的字符串。例如，用户电子邮件地址的简单 SHA1 哈希很容易复制，因此不适合。

但是，由于散列函数的工作方式，您总是可以输入“秘密”，并且它会运行得很好。例如，生成一个用于此目的的长随机字符串常量并将其附加到用户的电子邮件地址，然后对其进行哈希处理。您还可以生成随机字符串作为验证令牌。

无论您使用哪种方法，请务必将您发送给用户的验证令牌记录在他们的记录列中，并在此列上为您的表编制索引，以便快速检索。稍后你会这样做：

```
SELECT * FROM users WHERE verification_token=? 
```

如果您可以找到与该令牌匹配的条目，则您知道它是有效用户，并且可以将其标记为已验证。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-02T15:37:00.307

用户的最佳解决方案 - 不使用电子邮件验证。这是一种非常古老和无聊的技术（很多用户使用 10minutemail）。

# c# - 无法使用 MS Exchange Server 2010 SP2 的 Web 服务以编程方式发送电子邮件

> ID：13198111
> 
> 赞同：1
> 
> 时间：2012-11-02T15:17:48.197
> 
> 标签：c#, .net, email, exchangewebservices, exchange-server-2010

我有一个使用 MS Exchange Server 2010 SP2 的 Web 服务发送电子邮件的应用程序 (C#)。它以前工作正常。但是，就在两周前，我遇到了问题。有时代码可以发送电子邮件，但有时不能。我收到如下错误消息（最后显示完整的错误消息）。

```
The request failed. Unable to connect to the remote server 
```

我的代码如下。

```
string ewsUrl = "https://xxxx.xxxx.com/ews/Exchange.asmx";
string userName = "xxxx";
string password = "xxxx";
string to = "xxxx@xxxx.com";
string cc = "xxxx@xxxx.com";

ExchangeService service = new ExchangeService();
service.Url = new Uri(ewsUrl);
service.UseDefaultCredentials = true;
service.Credentials = new WebCredentials(userName, password);

EmailMessage message = new EmailMessage(service);
message.Subject = subject;
message.Body = bodyHtml;
message.ToRecipients.Add(to);
message.CcRecipients.Add(cc);

message.SendAndSaveCopy(); 
```

我不知道出了什么问题。我相信该 URL 是正确的，它有时会起作用，但有时会不起作用。我在互联网上进行了搜索，但没有找到任何解决方案。**这与服务器配置有关吗？**我已经和我的 IT 人员谈过了，但他似乎对 Web 服务一无所知。请帮我。完整的错误消息如下。

```
The request failed. Unable to connect to the remote server
    at Microsoft.Exchange.WebServices.Data.ServiceRequestBase.ValidateAndEmitRequest(HttpWebRequest& request)
    at Microsoft.Exchange.WebServices.Data.SimpleServiceRequestBase.InternalExecute()
    at Microsoft.Exchange.WebServices.Data.MultiResponseServiceRequest`1.Execute()
    at Microsoft.Exchange.WebServices.Data.ExchangeService.InternalCreateItems(IEnumerable`1 items, FolderId parentFolderId, Nullable`1 messageDisposition, Nullable`1 sendInvitationsMode, ServiceErrorHandling errorHandling)
    at Microsoft.Exchange.WebServices.Data.ExchangeService.CreateItem(Item item, FolderId parentFolderId, Nullable`1 messageDisposition, Nullable`1 sendInvitationsMode)
    at Microsoft.Exchange.WebServices.Data.Item.InternalCreate(FolderId parentFolderId, Nullable`1 messageDisposition, Nullable`1 sendInvitationsMode)
    at Microsoft.Exchange.WebServices.Data.EmailMessage.InternalSend(FolderId parentFolderId, MessageDisposition messageDisposition)
    at Microsoft.Exchange.WebServices.Data.EmailMessage.Send() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:38:41.653

```
ServicePointManager.ServerCertificateValidationCallback = 
    delegate(object sender1,
             System.Security.Cryptography.X509Certificates.X509Certificate certificate,
             System.Security.Cryptography.X509Certificates.X509Chain chain,
             System.Net.Security.SslPolicyErrors sslPolicyErrors) 
    { return true; }; 
```

`message.CcRecipients.Add(cc);` 我认为您需要在和之间添加上述代码`message.SendAndSaveCopy();`

# javascript - 按类获取ID中的元素

> ID：13198113
> 
> 赞同：0
> 
> 时间：2012-11-02T15:17:52.690
> 
> 标签：javascript, jquery

我有一些 HTML：

```
<div id="bin">
    <span class="item1 selectMe">1</span>
    <span class="item2 selectMe">2</span>
    <span class="item3 dontSelectMe">3</span>
</div> 
```

我想返回一个数组，其中包含`selectMe`该类的 span 元素中的值。这是我写的：

```
var values = [];
$('#bin span.selectMe').each(function() {
    values.push($(this).text());
}); 
```

但是，当我打印`values`到控制台时，它总是空的。关于我为什么不迭代的任何想法`bin`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T15:20:29.657

以下应该有效，但是您在上面粘贴的内容似乎也应该：

```
var values = $('#bin span.selectMe').map(function(){
  return $(this).html();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T15:20:41.680

你所拥有的应该可以工作，但这里有一个更优雅的解决方案：

```
var values = $('#bin span.selectMe').map(function() {
    return $(this).text();
}).get(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T09:32:13.840

```
var values = [];
$('#bin').find('span.selectMe').each(function() {
     values.push($(this).text());
}); 
```

# c# - 为什么只有前两个验证器在我的 ASP.NET C# 网站上触发？

> ID：13198114
> 
> 赞同：0
> 
> 时间：2012-11-02T15:17:56.793
> 
> 标签：c#, asp.net, validation

我有一个表格，要求用户输入他们的名字、姓氏、电话号码、身份证号码、用户名和复选框以按顺序选择教师或学生。前两个文本框各有两个验证器，一个正则表达式：^[a-zA-Z-]*$ 和必填字段验证器。之后，我创建了一些自定义验证器，除了电话号码、身份证号码和用户名的文本框外，我还有一个“不知道？” 复选框以防他们忘记。因此，它会验证以确保他们输入了某些内容，如果没有，则确保选中复选框。现在，如果我启动站点并简单地单击确认按钮，则只有前两个字段会触发它们的验证，即名字和姓氏字段。现在，如果我输入名字和姓氏并再次单击确认按钮，其余验证器将正常触发。我怎样才能让它们一次全部触发？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:37:40.300

您的自定义验证器逻辑可能仅在服务器端实现。[`ClientValidationFunction`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.clientvalidationfunction.aspx)您可能必须通过编写 javascript 方法并在属性中指定它来在客户端提供验证逻辑。该链接还提供了有关如何在客户端实现它的示例。

# linux - 所有浏览器和操作系统的安全字体

> ID：13198119
> 
> 赞同：10
> 
> 时间：2012-11-02T15:18:07.883
> 
> 标签：linux, macos, fonts

> **可能重复：**
> [是否有任何标准包含网络安全字体列表](https://stackoverflow.com/questions/3828758/is-there-any-standard-that-has-a-list-of-web-safe-fonts)

是否有适用于所有浏览器和操作系统的安全字体列表？我一般使用 tahoma，Windows 没有任何问题，但我不知道 linux 或 mac 是否有问题

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T16:04:15.517

有**[这个页面](http://www.ampsoft.net/webdesign-l/WindowsMacFonts.html)**，我在我的 Firefox 剪贴簿中有它。它涵盖了一些最有用、最广泛使用的字体及其最接近的等价物。是的，它专注于 Windows 和 Mac。下面是字体渲染的*linux/ubuntu/gnome屏幕截图：*[页面底部。](http://www.ampsoft.net/webdesign-l/img/Font-list-Ubuntu7-Gnome.png)

**小心：**这个话题是有争议的。从纯粹的设计角度来看，这一点没有实际意义：没有等效的字体。绝不。使用核心系统字体，你的里程（和你的`ex`宽度）会有很大的不同，大多数人只会建议你不要开始。

如果你对排版很认真，无论如何你都应该使用**[fontsquirrel](http://www.fontsquirrel.com/)、[google web fonts](http://www.google.com/webfonts)或任何其他`@font-face`技巧**。有了这些，向后兼容性将（有点）成为一个问题，但不是通常认为与 linux 相关的问题。（那些家伙疯狂地更新）

不过，在某些极端情况下，我认为这种方法是明智的。EG 您可能正在搜索一种可读性很强的字体，并且不希望用户下载它。或者你可能爱上了一些广泛使用的商业字体，但由于某种原因不能/不会许可它。（例如，我个人喜欢 Palatino Linotype 在 Windows 上给我的可读性）

最后一句警告：**如果你的目标是移动设备，这种方法会让你发疯。**甚至不要开始，否则您将脆弱的灵魂暴露在 Mobile Safari 更新中毫无动机的恐怖的打击之下。在这种交火下，理智无法持续太久。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T15:26:00.327

简短的回答：没有

不能保证任何给定的浏览器/操作系统都支持特定的字体。

您可以指定浏览器从中选择第一个可用字体的字体系列，例如，

```
font-family: Arial, Helvetica, Sans-Serif; 
```

这可能是您最接近您想要的内容，因为它至少应该选择所需样式的内容，如果不是确切所需的字体。

您可以查看 Microsoft 的Web项目的[Core 字体。](http://en.wikipedia.org/wiki/Core_fonts_for_the_Web)这些字体可用于 Windows、OS X 和基于 Linux 的操作系统（以及其他），但同样不能保证这些字体在任何给定主机上都可用。

# google-chrome - 阻止用户使用 Google Chrome 编辑源代码

> ID：13198120
> 
> 赞同：0
> 
> 时间：2012-11-02T15:18:08.223
> 
> 标签：google-chrome

Google chrome 或其他浏览器允许客户端编辑 html 源代码。有没有办法防止这种情况，所以用户不能在网站上这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:19:18.790

不; 这基本上是不可能的。

您永远无法对客户端进行任何级别的控制。

# c++ - C++ 中的多线程应用程序

> ID：13198122
> 
> 赞同：4
> 
> 时间：2012-11-02T15:18:08.957
> 
> 标签：c++, multithreading, file-io

我正在开发一个用 C++ 编写的多线程应用程序。我使用一些临时文件在我的线程之间传递数据。一个线程将要处理的数据写入目录中的文件。另一个线程扫描目录中的工作文件并读取文件并进一步处理它们，然后删除这些文件。我必须使用这些文件，因为如果我的应用程序在什么时候被杀死，我必须保留尚未处理的数据。

但我讨厌使用多个文件。我只想使用一个文件。一个线程连续写入文件，另一个线程读取数据并删除已读取的数据。就像从顶部和底部填充容器一样，我可以从容器中获取和删除数据。如何在 C++ 中有效地做到这一点，首先有没有办法..？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T19:24:58.433

正如对您的问题的评论中所建议的那样，使用 SQLite 之类的数据库可能是一个非常好的解决方案。但是，如果您坚持使用文件，那么这当然是可能的。

我自己做过一次——使用文件在磁盘上创建了一个持久队列。

以下是有关如何实现这一目标的指南：

1.  该文件应包含一个标题，该标题指向下一个未处理的记录（条目）和下一个要写入的可用位置。
2.  如果记录具有可变长度，则每条记录都应包含一个标明记录长度的标头。
3.  您可能希望为每条记录添加一个标志，指示该记录是否已处理
4.  文件锁定可用于确保没有人读取正在写入的文件部分
5.  使用低级 IO - 不要使用任何类型的缓冲流，使用直接写入语义

这是读写的方案（可能有一些小的逻辑错误，但你应该能够从那里得到它）：

**读者**

1.  锁定文件头并读取它并解锁它
2.  转到最后一个记录位置
3.  读取记录头和记录
4.  在已处理标志打开的情况下写回记录头
5.  如果您不在文件末尾锁定标题并写入下一个未处理记录的新位置，否则写入一些标记以指示没​​有更多记录要处理
6.  确保要写入的下一条记录指向正确的位置

您可能还希望读者偶尔为您压缩文件：

1.  锁定整个文件
2.  将所有未处理的记录复制到文件的开头（您可能希望保留一些逻辑以免覆盖未处理的记录 - 仅当已处理空间大于未处理空间时才可能紧凑）
3.  更新标题
4.  解锁文件

**作家**

1.  锁定文件头并查看下一条记录要写入的位置然后解锁
2.  锁定文件从要写入的地方到记录的长度
3.  写入记录并解锁
4.  如果未处理的记录标记指示没有要处理的记录，则锁定标题让它指向新记录解锁标题

希望这能让你进入写作轨道

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T15:46:03.090

win32Api 功能`CreateFileMapping()`使进程能够共享数据，多个进程可以使用系统分页文件存储的内存映射文件。

几个不错的链接：

[http://msdn.microsoft.com/en-us/library/aa366551(VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa366551(VS.85).aspx)

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa366551(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366551(v=vs.85).aspx)

[http://www.codeproject.com/Articles/34073/Inter-Process-Communication-IPC-Introduction-and-S](http://www.codeproject.com/Articles/34073/Inter-Process-Communication-IPC-Introduction-and-S)

[http://www.codeproject.com/Articles/19531/A-Wrapped-Class-of-Share-Memory](http://www.codeproject.com/Articles/19531/A-Wrapped-Class-of-Share-Memory)

[http://www.bogotobogo.com/cplusplus/multithreaded2C.php](http://www.bogotobogo.com/cplusplus/multithreaded2C.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-01T11:21:14.660

您可以编写每行处理行的数据，每行的分隔符指示此记录是否处理

# ftp - 对等方的 FTP 连接 (ECONNRESET)

> ID：13198126
> 
> 赞同：0
> 
> 时间：2012-11-02T15:18:31.277
> 
> 标签：ftp, network-programming, opera, wireshark

在我们的硬件上，我们正在运行我们的自制 ftp-server。该服务器适用于 IE、FireFox、Safari、Opera 9 和 FileZilla 等浏览器。但是，如果我使用 Opera 12，连接会在两个 ftp 数据包之后关闭。服务器告诉我 errno=54 aka ECONNRESET。查看 WireShark 转储可以看到 Opera 发送了一个 RST 命令。我已经更改了包大小，但在两个 ftp 数据包之后再次失败。有谁知道为什么会发生这种情况？

Opera 12的**失败 WireShark**转储是（其中包 47 是 RST）：

```
No.     Time        Source                Destination           Protocol Info
  7 0.010108    172.22.4.229          172.22.6.88           FTP      Response: 331 Password required for user.
  8 0.010198    172.22.6.88           172.22.4.229          FTP      Request: PASS opera@
  9 0.011262    172.22.4.229          172.22.6.88           TCP      ftp > 54729 [ACK] Seq=57 Ack=30 Win=9987 Len=0
 10 0.013992    172.22.4.229          172.22.6.88           FTP      Response: 230 User logged in successfully.
 11 0.014073    172.22.6.88           172.22.4.229          FTP      Request: PWD
 12 0.015197    172.22.4.229          172.22.6.88           TCP      ftp > 54729 [ACK] Seq=91 Ack=35 Win=9995 Len=0
 13 0.016438    172.22.4.229          172.22.6.88           FTP      Response: 257 "/" is current directory.
 14 0.016524    172.22.6.88           172.22.4.229          FTP      Request: EPSV ALL
 15 0.017589    172.22.4.229          172.22.6.88           TCP      ftp > 54729 [ACK] Seq=122 Ack=45 Win=9990 Len=0
 16 0.018933    172.22.4.229          172.22.6.88           FTP      Response: 502 Command not implemented.
 17 0.019015    172.22.6.88           172.22.4.229          FTP      Request: REST 0
 18 0.020078    172.22.4.229          172.22.6.88           TCP      ftp > 54729 [ACK] Seq=152 Ack=53 Win=9992 Len=0
 19 0.021372    172.22.4.229          172.22.6.88           FTP      Response: 502 Command not implemented.
 20 0.021451    172.22.6.88           172.22.4.229          FTP      Request: TYPE I
 21 0.022550    172.22.4.229          172.22.6.88           TCP      ftp > 54729 [ACK] Seq=182 Ack=61 Win=9992 Len=0
 22 0.024777    172.22.4.229          172.22.6.88           FTP      Response: 200 Command TYPE successful.
 23 0.024856    172.22.6.88           172.22.4.229          FTP      Request: SIZE LOG-20120821120000-diagnostic-diag.txt
 24 0.025879    172.22.4.229          172.22.6.88           TCP      ftp > 54729 [ACK] Seq=212 Ack=106 Win=9955 Len=0
 25 0.028300    172.22.4.229          172.22.6.88           FTP      Response: 250 File size: 4626418 bytes (4517 kB)
 26 0.028381    172.22.6.88           172.22.4.229          FTP      Request: MDTM LOG-20120821120000-diagnostic-diag.txt
 27 0.029401    172.22.4.229          172.22.6.88           TCP      ftp > 54729 [ACK] Seq=252 Ack=151 Win=9955 Len=0
 28 0.030845    172.22.4.229          172.22.6.88           FTP      Response: 502 Command not implemented.
 29 0.030923    172.22.6.88           172.22.4.229          FTP      Request: MODE B
 30 0.032096    172.22.4.229          172.22.6.88           TCP      ftp > 54729 [ACK] Seq=282 Ack=159 Win=9992 Len=0
 31 0.033928    172.22.4.229          172.22.6.88           FTP      Response: 502 Command not implemented.
 32 0.034006    172.22.6.88           172.22.4.229          FTP      Request: PASV
 33 0.035098    172.22.4.229          172.22.6.88           TCP      ftp > 54729 [ACK] Seq=312 Ack=165 Win=9994 Len=0
 34 0.040963    172.22.4.229          172.22.6.88           FTP      Response: 227 Entering Passive Mode (172,22,4,229,225,144).
 35 0.041417    172.22.6.88           172.22.4.229          TCP      54730 > 57744 [SYN] Seq=0 Win=8192 Len=0 MSS=1460 WS=2 SACK_PERM=1
 36 0.041446    172.22.6.88           172.22.4.229          FTP      Request: RETR LOG-20120821120000-diagnostic-diag.txt
 37 0.042691    172.22.4.229          172.22.6.88           TCP      57744 > 54730 [SYN, ACK] Seq=0 Ack=1 Win=10000 Len=0 MSS=1426 SACK_PERM=1 WS=0
 38 0.042716    172.22.6.88           172.22.4.229          TCP      54730 > 57744 [ACK] Seq=1 Ack=1 Win=65596 Len=0
 39 0.043050    172.22.4.229          172.22.6.88           TCP      ftp > 54729 [ACK] Seq=363 Ack=210 Win=9955 Len=0
 40 0.046097    172.22.4.229          172.22.6.88           FTP      Response: 150 Opening data connection.
 41 0.057860    172.22.4.229          172.22.6.88           FTP-DATA FTP Data: 1426 bytes
 42 0.058711    172.22.4.229          172.22.6.88           FTP-DATA FTP Data: 622 bytes
 43 0.058723    172.22.6.88           172.22.4.229          TCP      54730 > 57744 [ACK] Seq=1 Ack=2049 Win=65596 Len=0
 44 0.063893    172.22.4.229          172.22.6.88           FTP-DATA FTP Data: 1426 bytes
 45 0.064826    172.22.4.229          172.22.6.88           FTP-DATA FTP Data: 622 bytes
 46 0.064843    172.22.6.88           172.22.4.229          TCP      54730 > 57744 [ACK] Seq=1 Ack=4097 Win=65596 Len=0
 47 0.070829    172.22.6.88           172.22.4.229          TCP      54730 > 57744 [RST, ACK] Seq=1 Ack=4097 Win=0 Len=0
 48 0.070921    172.22.6.88           172.22.4.229          TCP      54729 > ftp [FIN, ACK] Seq=210 Ack=393 Win=65204 Len=0
 49 0.072044    172.22.4.229          172.22.6.88           TCP      ftp > 54729 [ACK] Seq=393 Ack=211 Win=10000 Len=0
 50 0.095833    172.22.4.229          172.22.6.88           FTP      Response: 451 Requested action aborted. Internal errors.
 51 0.095898    172.22.6.88           172.22.4.229          TCP      54729 > ftp [RST, ACK] Seq=211 Ack=441 Win=0 Len=0 
```

Opera 9的**工作**WireShark 转储是：

```
No.     Time        Source                Destination           Protocol Info
  1 0.000000    172.22.6.88           172.22.4.229          TCP      54653 > ftp [SYN] Seq=0 Win=8192 Len=0 MSS=1460 WS=8 SACK_PERM=1
  2 0.001598    172.22.4.229          172.22.6.88           TCP      ftp > 54653 [SYN, ACK] Seq=0 Ack=1 Win=10000 Len=0 MSS=1426 SACK_PERM=1 WS=0
  3 0.001653    172.22.6.88           172.22.4.229          TCP      54653 > ftp [ACK] Seq=1 Ack=1 Win=65536 Len=0
  4 0.007399    172.22.4.229          172.22.6.88           FTP      Response: 220 FTP server ready.
  5 0.022517    172.22.6.88           172.22.4.229          FTP      Request: USER anonymous
  6 0.023565    172.22.4.229          172.22.6.88           TCP      ftp > 54653 [ACK] Seq=24 Ack=17 Win=9984 Len=0
  7 0.024861    172.22.4.229          172.22.6.88           FTP      Response: 331 Password required for user.
  8 0.024950    172.22.6.88           172.22.4.229          FTP      Request: PASS opera@
  9 0.026015    172.22.4.229          172.22.6.88           TCP      ftp > 54653 [ACK] Seq=57 Ack=30 Win=9987 Len=0
 10 0.028033    172.22.4.229          172.22.6.88           FTP      Response: 230 User logged in successfully.
 11 0.028104    172.22.6.88           172.22.4.229          FTP      Request: PWD
 12 0.029223    172.22.4.229          172.22.6.88           TCP      ftp > 54653 [ACK] Seq=91 Ack=35 Win=9995 Len=0
 13 0.031091    172.22.4.229          172.22.6.88           FTP      Response: 257 "/" is current directory.
 14 0.031182    172.22.6.88           172.22.4.229          FTP      Request: TYPE I
 15 0.032228    172.22.4.229          172.22.6.88           TCP      ftp > 54653 [ACK] Seq=122 Ack=43 Win=9992 Len=0
 16 0.033562    172.22.4.229          172.22.6.88           FTP      Response: 200 Command TYPE successful.
 17 0.033635    172.22.6.88           172.22.4.229          FTP      Request: SIZE LOG-20120821120000-diagnostic-diag.txt
 18 0.034655    172.22.4.229          172.22.6.88           TCP      ftp > 54653 [ACK] Seq=152 Ack=88 Win=9955 Len=0
 19 0.037077    172.22.4.229          172.22.6.88           FTP      Response: 250 File size: 4626418 bytes (4517 kB)
 20 0.037154    172.22.6.88           172.22.4.229          FTP      Request: MDTM LOG-20120821120000-diagnostic-diag.txt
 21 0.038224    172.22.4.229          172.22.6.88           TCP      ftp > 54653 [ACK] Seq=192 Ack=133 Win=9955 Len=0
 22 0.040705    172.22.4.229          172.22.6.88           FTP      Response: 502 Command not implemented.
 23 0.040880    172.22.6.88           172.22.4.229          FTP      Request: MODE B
 24 0.041977    172.22.4.229          172.22.6.88           TCP      ftp > 54653 [ACK] Seq=222 Ack=141 Win=9992 Len=0
 25 0.043267    172.22.4.229          172.22.6.88           FTP      Response: 502 Command not implemented.
 26 0.043318    172.22.6.88           172.22.4.229          FTP      Request: PASV
 27 0.044369    172.22.4.229          172.22.6.88           TCP      ftp > 54653 [ACK] Seq=252 Ack=147 Win=9994 Len=0
 28 0.050959    172.22.4.229          172.22.6.88           FTP      Response: 227 Entering Passive Mode (172,22,4,229,225,143).
 29 0.063995    172.22.6.88           172.22.4.229          TCP      54654 > 57743 [SYN] Seq=0 Win=8192 Len=0 MSS=1460 WS=8 SACK_PERM=1
 30 0.064032    172.22.6.88           172.22.4.229          FTP      Request: RETR LOG-20120821120000-diagnostic-diag.txt
 31 0.065473    172.22.4.229          172.22.6.88           TCP      57743 > 54654 [SYN, ACK] Seq=0 Ack=1 Win=10000 Len=0 MSS=1426 SACK_PERM=1 WS=0
 32 0.065507    172.22.6.88           172.22.4.229          TCP      54654 > 57743 [ACK] Seq=1 Ack=1 Win=65536 Len=0
 33 0.065831    172.22.4.229          172.22.6.88           TCP      ftp > 54653 [ACK] Seq=303 Ack=192 Win=9955 Len=0
 34 0.068242    172.22.4.229          172.22.6.88           FTP      Response: 150 Opening data connection.
 35 0.082611    172.22.4.229          172.22.6.88           FTP-DATA FTP Data: 1426 bytes
 36 0.083479    172.22.4.229          172.22.6.88           FTP-DATA FTP Data: 622 bytes
 37 0.083494    172.22.6.88           172.22.4.229          TCP      54654 > 57743 [ACK] Seq=1 Ack=2049 Win=65536 Len=0
 38 0.090274    172.22.4.229          172.22.6.88           FTP-DATA FTP Data: 1426 bytes
 39 0.091103    172.22.4.229          172.22.6.88           FTP-DATA FTP Data: 622 bytes
 40 0.091119    172.22.6.88           172.22.4.229          TCP      54654 > 57743 [ACK] Seq=1 Ack=4097 Win=65536 Len=0
 41 0.114112    172.22.4.229          172.22.6.88           FTP-DATA FTP Data: 1426 bytes
 42 0.114900    172.22.4.229          172.22.6.88           FTP-DATA FTP Data: 622 bytes
 43 0.114921    172.22.6.88           172.22.4.229          TCP      54654 > 57743 [ACK] Seq=1 Ack=6145 Win=65536 Len=0
 44 0.128935    172.22.4.229          172.22.6.88           FTP-DATA FTP Data: 1426 bytes
 45 0.128937    172.22.4.229          172.22.6.88           FTP-DATA FTP Data: 622 bytes
 46 0.128961    172.22.6.88           172.22.4.229          TCP      54654 > 57743 [ACK] Seq=1 Ack=8193 Win=65536 Len=0
 47 0.140241    172.22.4.229          172.22.6.88           FTP-DATA FTP Data: 1426 bytes
 48 0.141073    172.22.4.229          172.22.6.88           FTP-DATA FTP Data: 622 bytes
 49 0.141088    172.22.6.88           172.22.4.229          TCP      54654 > 57743 [ACK] Seq=1 Ack=10241 Win=65536 Len=0
 ......
1046 4.558687    172.22.6.88           172.22.4.229          TCP      54654 > 57743 [ACK] Seq=1 Ack=690177 Win=65536 Len=0
1047 4.570837    172.22.4.229          172.22.6.88           FTP-DATA FTP Data: 1426 bytes
1048 4.570878    172.22.6.88           172.22.4.229          TCP      54654 > 57743 [FIN, ACK] Seq=1 Ack=691603 Win=65536 Len=0
1049 4.570928    172.22.6.88           172.22.4.229          TCP      54653 > ftp [FIN, ACK] Seq=192 Ack=333 Win=65024 Len=0
1050 4.571776    172.22.4.229          172.22.6.88           FTP-DATA FTP Data: 622 bytes
1051 4.572142    172.22.4.229          172.22.6.88           TCP      57743 > 54654 [ACK] Seq=692225 Ack=2 Win=10000 Len=0
1052 4.572143    172.22.4.229          172.22.6.88           TCP      ftp > 54653 [ACK] Seq=333 Ack=193 Win=10000 Len=0
1053 4.581171    172.22.4.229          172.22.6.88           FTP-DATA FTP Data: 1426 bytes
1054 4.581216    172.22.6.88           172.22.4.229          TCP      54654 > 57743 [RST, ACK] Seq=2 Ack=693651 Win=0 Len=0
1055 4.591403    172.22.4.229          172.22.6.88           FTP      Response: 451 Requested action aborted. Internal errors.
1056 4.591460    172.22.6.88           172.22.4.229          TCP      54653 > ftp [RST, ACK] Seq=193 Ack=381 Win=0 Len=0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:38:20.187

根据 2007 年 3 月的 RFC 3659，大小响应具有以下结构：

```
size-response = "213" SP 1*DIGIT CRLF /
                error-response 
```

请注意，当发出 213 响应时，即没有错误时，格式必须与指定的完全相同。不允许多行响应。

我们的 ftp 服务器并非如此。但旧格式显然已被其他 ftp 客户端接受。

# facebook-graph-api - 通知触发事件

> ID：13198127
> 
> 赞同：1
> 
> 时间：2012-11-02T15:18:32.447
> 
> 标签：facebook-graph-api, notifications, push-notification, push

我有一个为我的客户服务的社交营销管理员。我希望能够在他们的 Facebook 粉丝页面上有新通知或在他们的位置签到时更新管理员。

目前，facebook 会向我发送电子邮件通知（例如，当有人在粉丝页面墙上发帖时）。我需要的是运行一个脚本，当有未读通知时更新我的​​管理员。

我不想要的是每分钟都必须运行一个 cron 作业来获取通知。我有很多客户和很多粉丝页面。这将变得非常费力。

facebook 有没有办法立即将通知推送到我的脚本页面，而不是每分钟查询一次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:21:32.450

页面的实时更新尚未涵盖提要内容。

> 目前，facebook 会向我发送电子邮件通知（例如，当有人在粉丝页面墙上发帖时）。我需要的是运行一个脚本，当有未读通知时更新我的​​管理员。

您可以将收到的邮件通过管道传输到脚本，让它分析邮件正文（发送到哪个页面），然后触发通知……

# node.js - Express 3 错误中间件未被调用

> ID：13198129
> 
> 赞同：19
> 
> 时间：2012-11-02T15:18:37.553
> 
> 标签：node.js, express

我正在尝试为我的快速应用程序设置错误处理并遇到以下问题。

我定义了一个错误中间件并将其添加为最后一个中间件：

```
// error handler
app.use(function(err, req, res, next) {

    console.log('JUST TESTING. ERROR HANLDER HAS BEEN CALLED...');
    next(err);
}); 
```

现在我希望每当发生错误时都会调用这个中间件：

```
app.get('/datenschutz', function(req, res, next){
        return next(new Error('Just testing')); // handle everything here
    }); 
```

但是我的中间件永远不会被调用！但是，浏览器确实会显示堆栈跟踪。这似乎有另一个中间件正在捕获此错误并在我对此进行任何处理之前对其进行处理。

问题是我不知道可以在哪里定义这个中间件，因为我有一个非常简单的设置：

```
// setup ssl for local testing
var
    app = express();

app.
    use(express.static(__dirname + '/public')).
    use(express.bodyParser()).
    use(express.cookieParser()); 
```

为什么我的错误处理中间件没有被调用？这种“默认”错误处理发生在哪里？

谢谢！

*** 编辑 *** 我看到中间件确实在工作。但是，如果我从另一个中间件函数调用它，就会出现这种情况。但是，如果错误发生在定义为快速路由（GET、POST 等）的函数内部，则不会调用它。这很奇怪。如果我将错误中间件添加到路由回调中，它就会起作用：

```
app.get('/testError', function(req, res, next){
        return next(new Error('Just testing')); // handle everything here
    }, function(err,req,res,next) {
        console.log('This error handler is called!!');
        return next();
    }); 
```

*** 编辑 2 - 找到可接受的解决方法 **** 我很惊讶它必须以这种方式完成。正如我在 express 中阅读了许多有关错误处理的条目/问题，但从未发现提到过这种可能性。但是，如果在路由回调中发生错误，则常规错误中间件处理程序似乎不会拾取它。您将需要在路由级别定义错误处理程序。

```
app.all('*', function(err,req,res,next) {
        console.log('This is a global error handler at route level....');
        return next(err);
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-16T09:08:06.513

我也遇到了这个问题，但是即使我在`app.user(app.router)`. 事实证明，我已经有一个我不知道的错误处理程序。

具体来说，如果你像我一样使用 express cli 生成一个应用程序，它会自动添加这个：

```
if ('development' == app.get('env')) {
  app.use(express.errorHandler());
} 
```

对我来说不幸的是，我在我的应用程序中添加了更多中间件，从而掩盖了这个声明，从而阻止了我的自定义错误处理程序被调用。

只需删除它，然后它应该可以正常工作。

在旁注中，我应该提到原始解决方案仍然有效 - 即使使用`app.use(express.errorHandler())`.

```
app.all('*', function(err,req,res,next) {
    console.log('This is a global error handler at route level....');
    return next(err);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-05T05:34:51.847

[从 Express 4 文档](http://expressjs.com/guide/error-handling.html)更新 Express 4 用户的答案。请参阅下面文档中的示例。请注意，`app.router`已弃用且不再使用。我还添加了一条虚拟路线以使排序清晰：

“在其他 app.use() 和路由调用之后，您最后定义错误处理中间件；例如：

```
var bodyParser = require('body-parser');

app.use(bodyParser());
app.get('/', function(req, res) {
    res.send('hello world');
})
app.use(function(err, req, res, next) {
  // logic
}); 
```

"

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T13:41:37.857

编辑 2 (sabtioagoIT) 有效。但只是对于那些错过它的人，emostar 的解决方案也有效。我知道将错误处理“使用”调用移到最后，但似乎有一个更简单的选项，正如 emoster 所建议的那样，使用 app.router （在错误处理“使用”调用之前）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-04T16:49:38.950

而不是制作

```
app.get('/datenschutz', function(req, res, next){
        return next(new Error('Just testing')); // handle everything here
    }); 
```

你可以安装[express-async-errors](https://github.com/davidbanham/express-async-errors#readme)

只是让

```
app.get('/datenschutz', function(req, res){
       throw new Error('Just testing');
    }); 
```

它按预期工作

# xcode - 如何在 Xcode 4.5“命令行工具”项目中设置工作逻辑单元测试目标？

> ID：13198130
> 
> 赞同：7
> 
> 时间：2012-11-02T15:18:39.683
> 
> 标签：xcode, unit-testing, linker-errors, xcode4.5, command-line-tool

无法为特定场景设置单元测试。这是我正在尝试的：

*   在 Xcode 4.5 中，我创建了一个简单的 OSX **“命令行工具”**应用程序项目（Foundation）。
    请注意，Xcode*不*提供自动将单元测试添加到“命令行工具”项目的选项——因此请不要建议勾选勾选框；它不存在：-/

*   在我的项目中，我创建了一个我想测试的简单示例类；例如“形状”。

*   我按照 Apple 的*Xcode Unit Testing Guide* for **[Setting Up Unit-Testing in a Project 中的](http://developer.apple.com/library/mac/#documentation/developertools/Conceptual/UnitTesting/02-Setting_Up_Unit_Tests_in_a_Project/setting_up.html)**说明进行操作：

    *   我在我的项目中添加了一个单元测试目标，并且

    *   我编辑了“测试”方案以在新目标中运行测试。

*   在测试项目的实现 (.m) 文件中，我`Shape.h`在方法中添加了导入和代码，`setUp()`以实例化形状并将其分配给实例变量。

那时，我决定看看事情是否会建立，以及默认测试是否会继续运行。但是，当我从菜单中选择**Product...Test**时，构建失败并出现以下错误：

```
Undefined symbols for architecture x86_64:
  "_OBJC_CLASS_$_Shape", referenced from:
      objc-class-ref in ExampleTests.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

解释这个错误不是问题。我觉得单元测试目标没有链接到包含 Shape 实现的二进制文件。但是，我（还）不了解 Xcode 单元测试和目标配置。所以：

为了使测试目标链接到命令行工具的结果输出，我需要做什么？我可以从单元测试目标链接到命令行可执行文件吗？Apple 的文档看起来特定于常规 OSX 应用程序 ( `*.app`) 和 iOS 应用程序，而这两者都不是。

我有我想在命令行工具设置中开发的业务逻辑类（开始），所以我想了解我需要做什么才能让单元测试目标在“命令行工具”中运行“项目类型。 *谢谢！*

（ps请注意，我对*从命令行运行我的单元测试**不*感兴趣——堆栈溢出已经提出了关于如何做到这一点的“类似”问题——而是*在*“命令行工具”类型的*项目*上运行单元测试，并且仍然来自 Xcode。）

 **** * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-12T15:36:02.673

我已经确定了一个我认为合适的解决方法，除了添加目标之外，它似乎没有明显的缺点。

简而言之：该解决方案涉及**添加一个静态库目标**，以利用 Xcode 围绕此类目标创建和运行单元测试代码的能力。然后命令行工具目标委托给静态库，其中定义了一个类似备用`main()`的函数，并由真正的`main()`入口点调用。命令行工具没有重要的代码，因此单元测试目标可以访问所有值得测试的东西。

以下是步骤：

*   在一个空的 Xcode 中，从菜单中选择*File...New Project*。

*   在出现的对话框中，选择*OS X...Application...Command Line Tool*。出于本示例的目的，我假设它被命名为*SampleCmd*。

创建基本命令行工具项目后：

*   从菜单中选择*File...New...Target*。

*   在出现的对话框中，选择*OS X...Framework & Library...Cocoa Library*。出于本示例的目的，我假设它被命名为*SampleCmdLogic*。

*   **选择类型*Static*，因此命令行工具将保持为独立的可执行文件。**

*   **确保选中*包含单元测试*框。**

创建静态库项目后：

*   将`main()`函数从复制`main.m`到`SampleCmdLogic.m`，替换`@implementation`块。（此文件将仅包含主入口点。可以为 Objective-C 类等添加其他文件。）  将函数**重命名**`libMain()`为.

*   在`SampleCmdLogic.h`中，为 new 添加声明`libMain()`，替换`@interface`块：
    `int libMain(int argc, const char * argv[]);`

*   在命令行工具中，在顶部`main.m`添加一个。`#import "SampleCmdLogic.h"`

*   在命令行工具中，将真实函数`main.m`的全部内容更改为：`main()`
    `return libMain(argc, argv);`

代码现已准备就绪，但需要执行链接步骤：

*   在 的项目设置中`SampleCmd`，在*Build Phases*下，展开*Target Dependencies*并添加 (+) SampleCmdLogic 作为依赖项。

*   在项目设置中`SampleCmd`，在*Build Phases*下，展开*Link Binary With Libraries*并添加 (+)`libSampleCmdLogic.a`

现在一切都准备好了。当您更改为 SampleCmd 目标并从菜单中选择*Product..Run*时，构建应该会成功并按预期生成输出。当您更改为 SampleCmdLogic 目标并从菜单中选择*Product...Test*时，构建应该会成功并且单元测试将运行。报告的单个问题将是 Xcode 在`SampleCmdLogicTests.m`. 这是意料之中的。

从此时开始，继续将所有逻辑和相应的测试添加到 SampleCmdLogic 目标。SampleCmd 目标保持简单，仅提供命令行工具入口点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T17:23:01.283

通常有许多额外的步骤可以将测试目标添加到应用程序项目 - 特别是我在[https://stackoverflow.com/a/12624873/246895](https://stackoverflow.com/a/12624873/246895)中描述的 Bundle Loader 和 Test Host 的设置。

但是当我使用命令行工具进行测试并尝试运行测试时，它所做的只是运行该工具。对于应用程序，它会经历启动应用程序、将测试包注入正在运行的应用程序、然后执行测试的阶段。但是这些阶段不适用于命令行工具。

因此，您需要的不是注入的测试包，而是运行测试的第二个命令行工具。然后设置您的类，以便它们针对测试工具以及您的实际工具。[gh-unit](https://github.com/gabriel/gh-unit)和[google-toolbox-for-mac](http://code.google.com/p/google-toolbox-for-mac/)都遵循这个模型，所以我会尝试它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T07:14:25.567

似乎最直接的问题只是`Shape`没有包含在新的测试目标中。尝试添加`Shape.m`到测试目标：

1.  在 Project Navigator 中单击 Shape.m
2.  打开实用程序视图（查看 -> 实用程序 -> 显示实用程序）
3.  在 Utilities 视图的 Target Membership 部分中，确保您的应用程序*和*测试目标都被选中。

我不知道这是否是您的设置问题的结束，但这似乎是您最直接的问题的可能候选者。***

# javascript - 如何将 HTML5 Canvas 保存为服务器上的图像？

> ID：13198131
> 
> 赞同：290
> 
> 时间：2012-11-02T15:18:46.833
> 
> 标签：javascript, php, ajax, html5-canvas

我正在从事一个生成艺术项目，我希望允许用户从算法中保存生成的图像。总体思路是：

*   使用生成算法在 HTML5 Canvas 上创建图像
*   图像完成后，允许用户将画布作为图像文件保存到服务器
*   允许用户下载图像或将其添加到使用该算法生成的图片库中。

但是，我被困在第二步。在谷歌的帮助下，我找到了这篇[博文](http://permadi.com/blog/2010/10/html5-saving-canvas-image-data-using-php-and-ajax/)，这似乎正是我想要的：

这导致了 JavaScript 代码：

```
function saveImage() {
  var canvasData = canvas.toDataURL("image/png");
  var ajax = new XMLHttpRequest();

  ajax.open("POST", "testSave.php", false);
  ajax.onreadystatechange = function() {
    console.log(ajax.responseText);
  }
  ajax.setRequestHeader("Content-Type", "application/upload");
  ajax.send("imgData=" + canvasData);
} 
```

和相应的PHP（testSave.php）：

```
<?php
if (isset($GLOBALS["HTTP_RAW_POST_DATA"])) {
  $imageData = $GLOBALS['HTTP_RAW_POST_DATA'];
  $filteredData = substr($imageData, strpos($imageData, ",") + 1);
  $unencodedData = base64_decode($filteredData);
  $fp = fopen('/path/to/file.png', 'wb');

  fwrite($fp, $unencodedData);
  fclose($fp);
}
?> 
```

但这似乎根本没有任何作用。

更多谷歌搜索出现了这个基于上一个教程的[博客文章。](http://www.kevinsookocheff.com/2011/07/27/saving-canvas-data-to-an-image-file-with-javascript-and-php/)没有太大不同，但也许值得一试：

```
$data = $_POST['imgData'];
$file = "/path/to/file.png";
$uri = substr($data,strpos($data, ",") + 1);

file_put_contents($file, base64_decode($uri));
echo $file; 
```

这个创建了一个文件（耶），但它已损坏并且似乎不包含任何内容。它也似乎是空的（文件大小为 0）。

我做错了什么真的很明显吗？我存储文件的路径是可写的，所以这不是问题，但似乎什么都没有发生，我不确定如何调试它。

### 编辑

按照 Salvidor Dali 的链接，我将 AJAX 请求更改为：

```
function saveImage() {
  var canvasData = canvas.toDataURL("image/png");
  var xmlHttpReq = false;

  if (window.XMLHttpRequest) {
    ajax = new XMLHttpRequest();
  }
  else if (window.ActiveXObject) {
    ajax = new ActiveXObject("Microsoft.XMLHTTP");
  }

  ajax.open("POST", "testSave.php", false);
  ajax.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
  ajax.onreadystatechange = function() {
    console.log(ajax.responseText);
  }
  ajax.send("imgData=" + canvasData);
} 
```

现在图像文件已创建并且不为空！似乎内容类型很重要，并且将其更改为`x-www-form-urlencoded`允许发送图像数据。

控制台返回（相当大的）base64 代码字符串，数据文件约为 140 kB。但是，我仍然无法打开它，并且它似乎没有被格式化为图像。

* * *

## 回答 #1

> 赞同：267
> 
> 时间：2012-11-02T15:51:08.890

以下是如何实现您需要的示例：

1.  **画一些东西**（取自[画布教程](http://www.html5canvastutorials.com/tutorials/html5-canvas-shape-fill/)）

```
<canvas id="myCanvas" width="578" height="200"></canvas>
<script>
  var canvas = document.getElementById('myCanvas');
  var context = canvas.getContext('2d');

  // begin custom shape
  context.beginPath();
  context.moveTo(170, 80);
  context.bezierCurveTo(130, 100, 130, 150, 230, 150);
  context.bezierCurveTo(250, 180, 320, 180, 340, 150);
  context.bezierCurveTo(420, 150, 420, 120, 390, 100);
  context.bezierCurveTo(430, 40, 370, 30, 340, 50);
  context.bezierCurveTo(320, 5, 250, 20, 250, 50);
  context.bezierCurveTo(200, 5, 150, 20, 170, 80);

  // complete custom shape
  context.closePath();
  context.lineWidth = 5;
  context.fillStyle = '#8ED6FF';
  context.fill();
  context.strokeStyle = 'blue';
  context.stroke();
</script>
```

2.  **将画布图像转换为 URL 格式（base64）**

    var dataURL = canvas.toDataURL();

3.  **通过 Ajax 将其发送到您的服务器**

```
 $.ajax({
      type: "POST",
      url: "script.php",
      data: { 
         imgBase64: dataURL
      }
    }).done(function(o) {
      console.log('saved'); 
      // If you want the file to be visible in the browser 
      // - please modify the callback in javascript. All you
      // need is to return the url to the file, you just saved 
      // and than put the image in your browser.
    });
```

3.  **在您的服务器上将 base64 保存为图像**（这是[在 PHP 中执行此操作的](https://stackoverflow.com/questions/1532993/i-have-a-base64-encoded-png-how-do-i-write-the-image-to-a-file-in-php)方法，每种语言都有相同的想法。可以[在此处找到](http://j-query.blogspot.com/2011/02/save-base64-encoded-canvas-image-to-png.html)PHP 中的服务器端）：

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2012-11-02T16:09:23.577

我两周前玩过这个，很简单。唯一的问题是所有的教程都只是谈论在本地保存图像。我是这样做的：

1）我设置了一个表单，以便我可以使用 POST 方法。

2) 用户绘制完成后，可以点击“保存”按钮。

3）单击按钮时，我获取图像数据并将其放入隐藏字段。之后我提交表格。

```
document.getElementById('my_hidden').value = canvas.toDataURL('image/png');
document.forms["form1"].submit(); 
```

4）提交表单时，我有这个小 php 脚本：

```
<?php 
$upload_dir = somehow_get_upload_dir();  //implement this function yourself
$img = $_POST['my_hidden'];
$img = str_replace('data:image/png;base64,', '', $img);
$img = str_replace(' ', '+', $img);
$data = base64_decode($img);
$file = $upload_dir."image_name.png";
$success = file_put_contents($file, $data);
header('Location: '.$_POST['return_url']);
?> 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2016-09-19T16:16:19.467

我认为您应该将图像转换为 base64，然后再转换为 Blob 并将其发送到服务器。当您使用 base64 图像时，会向服务器发送很多行。使用 blob，它只是文件。

您可以在下面使用此代码：

```
function dataURLtoBlob(dataURL) {
  let array, binary, i, len;
  binary = atob(dataURL.split(',')[1]);
  array = [];
  i = 0;
  len = binary.length;
  while (i < len) {
    array.push(binary.charCodeAt(i));
    i++;
  }
  return new Blob([new Uint8Array(array)], {
    type: 'image/png'
  });
}; 
```

和画布代码在这里：

```
const canvas = document.getElementById('canvas');
const file = dataURLtoBlob( canvas.toDataURL() ); 
```

之后，您可以将 ajax 与 Form 一起使用：

```
const fd = new FormData;

fd.append('image', file);

$.ajax({
  type: 'POST',
  url: '/url-to-save',
  data: fd,
  processData: false,
  contentType: false
}); 
```

* * *

> [**CoffeeScript**](https://coffeescript.org/)语法中的代码：

```
dataURLtoBlob = (dataURL) ->
  # Decode the dataURL
  binary = atob(dataURL.split(',')[1])
  # Create 8-bit unsigned array
  array = []
  i = 0
  while i < binary.length
    array.push binary.charCodeAt(i)
    i++
  # Return our Blob object
  new Blob([ new Uint8Array(array) ], type: 'image/png') 
```

和画布代码在这里：

```
canvas = document.getElementById('canvas')
file = dataURLtoBlob(canvas.toDataURL()) 
```

之后，您可以将 ajax 与 Form 一起使用：

```
fd = new FormData
# Append our Canvas image file to the form data
fd.append 'image', file
$.ajax
  type: 'POST'
  url: '/url-to-save'
  data: fd
  processData: false
  contentType: false 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2016-01-28T06:52:07.397

将画布图像发送到 PHP：

```
var photo = canvas.toDataURL('image/jpeg');                
$.ajax({
  method: 'POST',
  url: 'photo_upload.php',
  data: {
    photo: photo
  }
}); 
```

这是PHP脚本：
`photo_upload.php`

```
<?php

    $data = $_POST['photo'];
    list($type, $data) = explode(';', $data);
    list(, $data)      = explode(',', $data);
    $data = base64_decode($data);

    mkdir($_SERVER['DOCUMENT_ROOT'] . "/photos");

    file_put_contents($_SERVER['DOCUMENT_ROOT'] . "/photos/".time().'.png', $data);
    die;
?> 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2018-03-23T01:19:18.790

我做过类似的事情。必须将画布**Base64 编码的**图像转换为`Uint8Array Blob`.

```
function b64ToUint8Array(b64Image) {
   var img = atob(b64Image.split(',')[1]);
   var img_buffer = [];
   var i = 0;
   while (i < img.length) {
      img_buffer.push(img.charCodeAt(i));
      i++;
   }
   return new Uint8Array(img_buffer);
}

var b64Image = canvas.toDataURL('image/jpeg');
var u8Image  = b64ToUint8Array(b64Image);

var formData = new FormData();
formData.append("image", new Blob([ u8Image ], {type: "image/jpg"}));

var xhr = new XMLHttpRequest();
xhr.open("POST", "/api/upload", true);
xhr.send(formData); 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2014-02-06T05:15:04.350

如果要保存从 Javascript`canvas.toDataURL()`函数派生的数据，则必须将空白转换为加号。如果你不这样做，解码的数据就会损坏：

```
<?php
  $encodedData = str_replace(' ','+',$encodedData);
  $decocedData = base64_decode($encodedData);
?> 
```

[http://php.net/manual/ro/function.base64-decode.php](http://php.net/manual/ro/function.base64-decode.php)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-10-24T15:27:20.443

除了萨尔瓦多·达利的回答：

在服务器端不要忘记数据是 base64**字符串**格式。这很重要，因为在某些编程语言中，您需要明确地说这个字符串应该被视为**字节**而不是简单的 Unicode 字符串。

否则解码将不起作用：图像将被保存，但它将是一个不可读的文件。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-14T15:45:32.617

我刚刚制作了一个 imageCrop 和 Upload 功能

[https://www.npmjs.com/package/react-image-crop](https://www.npmjs.com/package/react-image-crop)

获取 ImagePreview （画布中的裁剪图像渲染）

[https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toBlob](https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toBlob)

```
canvas.toBlob(function(blob){...}, 'image/jpeg', 0.95); 
```

我更喜欢使用内容类型`image/jpeg`而不是`toDataURL`（巨大的 base64 字符串）以 blob 形式发送数据

我使用 SAS URL 上传到 Azure Blob 的实现

```
axios.post(azure_sas_url, image_in_blob, {
   headers: {
      'x-ms-blob-type': 'BlockBlob',
      'Content-Type': 'image/jpeg'
   }
}) 
```

# jquery - 如何从 ASP.NET MVC 控制器动态获取数据到 jQuery？

> ID：13198136
> 
> 赞同：8
> 
> 时间：2012-11-02T15:19:02.223
> 
> 标签：jquery, json, asp.net-mvc-3

我有一个 jQuery 函数，可以在单击 div 元素时获取该元素的预定义 ID 值。我想要做的是加载父元素的子元素，所以我打算使用 jQuery 动态构建一些 html。我不知道该怎么做，就是调用控制器（ASP.NET MVC 3）并让控制器向客户端返回一个集合。

我知道如何将 JSON 对象从 jQuery 发送到控制器，但不知道如何反过来。

提前致谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-02T19:01:55.610

以下是如何将数据从 Controller 发送到 json 的代码：

```
 $.ajax({
    url: '@Url.Action("GetData", "Home")',
    type: "GET",
    success: function (result) {
        $("#somediv").append(result.FirstName);
        $("#somediv").append(result.LastName);
        $("#somediv").append(result.Age);
    }
}); 
```

考虑一个像下面这样的类....

```
 public class User
 {
     public string FirstName { get; set; }
     public string LastName { get; set; }
 } 
```

你的动作应该是这样的。

```
public JsonResult GetData()  
{
   User user = new User();
   user.FirstName = "Yasser";
   user.LastName = "Shaikh";
   user.Age = 100;

   return Json(user, JsonRequestBehavior.AllowGet);
} 
```

[延伸阅读](http://yassershaikh.com/how-to-call-an-action-from-javascript-or-jquery-in-mvc-3-razor/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T15:27:56.113

样本：

**Javascript：**

```
$.ajax({
        type: 'POST',
        url: '@(Url.Action("SomeAction", "SomeController"))',
        data: someInputData,
        error: OnErrorFunction,
        success: function (data, textStatus, XMLHttpRequest) {
            alert(JSON.stringify(data));
        },
        dataType: "json"
    }); 
```

**控制器：**

```
public ActionResult SomeAction(InputDataType someInputData)
    {
        if (someInputData== null)
            return null;
        return new JsonResult {Data = SomeOutputData(someInputData)};
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T15:25:43.447

您可以使用 jquery[`ajax`](http://api.jquery.com/jQuery.ajax/)函数和 MVC Razor`Url`属性：

```
$.ajax({
    url: '@Url.Action("Home")',
    type: "GET",
    success: function (data) {
        $("my-div").append(data);
    }
}); 
```

success 属性的值是一个带有一个参数的函数：**data**。这是从您的控制器返回的结果。

# barcode - 创建条形码图像

> ID：13198139
> 
> 赞同：8
> 
> 时间：2012-11-02T15:19:09.677
> 
> 标签：barcode, html-email

我需要向数千名带有唯一条形码的客户发送电子邮件，以便他们可以在店内或在线兑换。

我们有一个要使用的优惠券/条形码列表，并且有一种方法可以将这些代码动态地拉入电子邮件中，这样客户就会看到一个唯一的代码。问题是我需要以某种方式生成使用唯一代码创建的数千个条形码图像。我该如何解决这个问题？

如果我们的电子邮件营销公司有这个功能，这将是完美的，但不幸的是他们没有： [http ://www.emaildirect.com/blog/2011/11/create-unique-barcodes-with-emaildirect/](http://www.emaildirect.com/blog/2011/11/create-unique-barcodes-with-emaildirect/)

任何帮助将不胜感激。

* * *

我找到了我的答案！

通过使用条形码生成器 www.barcodesinc.com，我生成了一个 URL 并将其输入到我的电子邮件中。

例如：[http ://www.barcodesinc.com/generator/image.php?code=999999999&style=197&type=C128B&width=200&height=50&xres=1&font=3](http://www.barcodesinc.com/generator/image.php?code=999999999&style=197&type=C128B&width=200&height=50&xres=1&font=3)

然后，我将 URL 中的 999999999 更改为我的条件代码，以更改为该人的特定代码，并带回该代码的条形码图像！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-10-04T14:48:59.970

我找到了我的答案！

通过使用条形码生成器 www.barcodesinc.com，我生成了一个 URL 并将其输入到我的电子邮件中。

例如：[http ://www.barcodesinc.com/generator/image.php?code=999999999&style=197&type=C128B&width=200&height=50&xres=1&font=3](http://www.barcodesinc.com/generator/image.php?code=999999999&style=197&type=C128B&width=200&height=50&xres=1&font=3)

然后，我将 URL 中的 999999999 更改为我的条件代码，以更改为该人的特定代码，并带回该代码的条形码图像！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T15:53:32.307

```
<img src="http://qrfree.kaywa.com/?s=8&d=your+text+here" alt="QRCode"/> 
```

或者

[http://qrfree.kaywa.com/?s=8&d=your+text+here](http://qrfree.kaywa.com/?s=8&d=your+text+here)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T15:48:44.493

我不是这方面的专家，也没有接触过 html，但您可以序列化每个图像并按照这个示例进行操作，该示例在给定字符串[的 QR 码上有一些示例代码。](http://www.dotnetutorial.com/display-code.aspx?id=19)

```
Imports ThoughtWorks.QRCode.Codec

Dim objQRCode As QRCodeEncoder = New QRCodeEncoder()
    Dim imgImage As Image
    Dim objBitmap As Bitmap

    objQRCode.QRCodeEncodeMode = QRCodeEncoder.ENCODE_MODE.BYTE
    objQRCode.QRCodeScale = 2
    objQRCode.QRCodeVersion = 5
    objQRCode.QRCodeErrorCorrect = ThoughtWorks.QRCode.Codec.QRCodeEncoder.ERROR_CORRECTION.L
    imgImage = objQRCode.Encode("Test Data")
    objBitmap = New Bitmap(imgImage)
    objBitmap.Save("C:\QRCode.jpg") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-27T13:29:55.610

嗨尝试与[http://www.linktagger.com](http://www.linktagger.com)取得联系，询问他们是否可以提供帮助。他们在地图和巴士总站上为我居住的城市提供企业类型的服务，因此它可能会对您有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-16T05:33:14.560

这是一个为条形码数组生成条形码的工作示例。我们也可以使用 pandas 从 csv 文件中检索数千个条形码。此示例调用 API 并将响应保存为从 API 调用获得的图像（.png 格式）。

进口舒蒂尔

导入请求

数据 = [11111111111, 22222222222222222, 33333333333333, 4444444444444]

url = ' [https://www.barcodesinc.com/generator_files/](https://www.barcodesinc.com/generator_files/) ' + 'image.php?'

对于数据中的 d：参数 = {

```
 'code': d,
    'style': '197',
    'type': 'C128B',
    'width': '200',
    'height': '50',
    'xres': '1',
    'font': '3',
}
    response = requests.get(url, params, stream=True)
    with open('image-%s.png' % d, 'wb') as out_file:
        shutil.copyfileobj(response.raw, out_file)
    del response 
```

# ios - “未找到有效的身份签名”-（Xcode 4.5.1）

> ID：13198142
> 
> 赞同：2
> 
> 时间：2012-11-02T15:19:14.480
> 
> 标签：ios, xcode, distribution, provisioning

我创建了我的分发配置文件，下载了它，然后当我将它添加到我的 Xcode 管理器时，配置文件是黄色的，上面写着：“未找到有效的身份签名”。

我已经在互联网上寻找解决方案，但我没有运气。请你帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T05:33:30.863

使用有效私钥导入分发证书

# git - 如何为单个存储库禁用 git 的凭证助手？

> ID：13198143
> 
> 赞同：59
> 
> 时间：2012-11-02T15:19:17.263
> 
> 标签：git

如果我在我的 中设置了凭据帮助程序，我`~/.gitconfig`如何在特定的 repo 中禁用/绕过它并且*不*使用凭据帮助程序？

我尝试编辑 repo 的`.git/config`文件以将属性清空，`credential.helper`如下所示：

```
[credential]
    helper = 
```

...但是当我这样做时，`git push`我收到以下错误消息，并且 Git`~/.gitconfig`无论如何都使用我的默认凭据助手：

```
git: 'credential-' is not a git command. See 'git --help'.

Did you mean this?
        credential 
```

我正在使用 git 版本 1.7.12。

（背景故事/用例：Git 被配置为使用`store`帮助程序，它将未加密的密码存储在磁盘上。`cache`帮助程序在此系统上不可用。我有几个存储库，我宁愿每次都输入密码而不是将其保存在磁盘上.)

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2016-04-05T19:52:39.410

使用 git 2.9（2016 年 6 月），这个 ( `helper =`) 将真正起作用！

请参阅[Jeff King (](https://github.com/peff) [)的](https://github.com/peff)[提交 2432137](https://github.com/git/git/commit/24321375cda79f141be72d1a842e930df6f41725)（2016 年 2 月 26 日） 。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 1b68962](https://github.com/git/git/commit/1b68962b29e39b0455e0f15d6b95edc65accb98c))^(中，2016 年 4 月 3 日）)[`peff`](https://github.com/peff)
^([`gitster`](https://github.com/gitster))

> 配置变量是累积的`credential.helper`，没有很好的方法可以从命令行覆盖它。
> 作为一种特殊情况，**现在将空字符串作为其值作为清除各种文件中指定值的信号**。

> ## `credential`: 让空的凭证规格重置助手列表

> 由于`credential.helper`键是一个多值配置列表，因此一旦设置了帮助器，就无法“取消设置”它。因此，如果您的系统`/etc/gitconfig`设置了一个，您永远无法避免运行它，而只能在顶部添加您自己的助手。

> 由于 for 的空值`credential.helper`是无意义的（它只会尝试运行“ `git-credential-`”），我们可以假设没有人使用它。让我们定义它来重置帮助列表，让您覆盖之前出现的低优先级实例。

* * *

更方便：使用 Git 2.26（2020 年第一季度），此覆盖甚至适用于任何值。

请参阅[提交 46fd7b3](https://github.com/git/git/commit/46fd7b390034eb5dde6a3f955e677c5260e4d10c)、[提交 82eb249](https://github.com/git/git/commit/82eb249853868582d8ba65e3afc5a7dcaeb620ea)、[提交 588c70e](https://github.com/git/git/commit/588c70e10f3511f85110512da97b188f3c581e53)、[提交 732f934](https://github.com/git/git/commit/732f93440831a9253ad5b9bd16a81e25e1901f22)、[提交 3fa0e04](https://github.com/git/git/commit/3fa0e046679b69ee7039a60674e9b16f83780e85)（2020 年 2 月 20 日），作者是[brian m。卡尔森（``）](https://github.com/)。
^(（由[Junio C Hamano 合并 -- `gitster`--](https://github.com/gitster)在[提交 2cbb058](https://github.com/git/git/commit/2cbb0586697585995908c325a0c70aad37602274)中，2020 年 3 月 5 日）)

> ## [`credential`](https://github.com/git/git/commit/82eb249853868582d8ba65e3afc5a7dcaeb620ea)：使用配置中最后一个匹配的用户名
> 
> ^(签字人：brian m. 卡尔森)

> 在代码库的其他任何地方，我们都使用最后一个匹配的配置选项是生效的规则。

> 这很有帮助，因为它允许更具体的配置设置（例如，每个 repo 配置）覆盖不太具体的设置（例如，每个用户配置）。

> **但是，在凭证代码中，我们没有遵守此设置，而是选择了我们拥有的第一个设置，并坚持使用它**。

> 这很可能确保我们从 URL 中选择值，我们希望在配置中兑现该值。

> 不过，两者都可以，所以让我们检查该值是否是我们通过协议连接获得的值，如果存在，它将来自 URL，如果是，则保留它。

> 否则，让我们用我们从配置中获得的最新版本覆盖该值，因此我们保留最后一个配置值。

* * *

注意：[user202729](https://stackoverflow.com/users/5267751/user202729)在[评论](https://stackoverflow.com/questions/13198143/how-do-i-disable-gits-credential-helper-for-a-single-repository/36435803#comment121539523_36435803)中添加：

> 如果凭据助手`A`设置为全局并且您想`B`在*本地*存储库中使用（*更改*，而不是删除助手），请使用：
> 
> ```
> git config --local credential.helper ''
> git config --local --add credential.helper B 
> ```
> 
> 第一个空项删除全局设置`A`。
> 
> 等效地，设置两条线`helper =`并`helper = B`在`.git/config`.

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2016-06-08T21:48:21.323

我尝试过并且效果很好的是：

```
$ git config --system --unset credential.helper 
```

但为了使其正常工作，我必须设置 git-bash.exe 具有管理员权限。

不幸的是，我认为这是一个全局变量。您应该测试并查看它是否适用于单个存储库。

祝你好运

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2017-05-17T19:30:15.827

除了[上面提到的 Git 2.9](https://stackoverflow.com/a/36435803/6309)`git config credential.helper=` ' '之外，您现在（Git 2.13.x/Git 2.14，2017 年第三季度）可以仅为一个*命令*（而不仅仅是给定仓库中的任何命令）禁用凭证帮助程序

 *这意味着`git -c credential.helper= clone /url/remote/repo`现在有效。

" `git clone --config var=val`" 是一种填充新存储库的每个存储库配置文件的方法，但是**当 val 为空字符串时它不能很好地工作**。
这已得到修复。

请参阅[Jonathan Nieder (](https://github.com/artagnon) [)的](https://github.com/artagnon)[提交 db4eca1](https://github.com/git/git/commit/db4eca1feaafa0669b7ba64c10314dfe8836576a)（2017 年 5 月 2 日） 。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 883247c](https://github.com/git/git/commit/883247c2fc1783b448fb8730284de85a758dc05d))^(中，2017 年 5 月 16 日）)[`artagnon`](https://github.com/artagnon)
^([`gitster`](https://github.com/gitster))

> ## `clone`: 处理空配置值`-c`
> 
> " `git clone --config`" 使用以下咒语将项目添加到配置文件，而不是替换现有值：
> 
> ```
> git_config_set_multivar_gently(key, value, "^$", 0) 
> ```
> 
> 只要没有现有值与 regex 匹配`^$`，它就会按预期工作并添加到配置中。但是，当一个值为空时，它会替换现有值。
> 
> 尝试`credential.helper`在克隆期间设置以使用特定帮助器而不继承自`~/.gitconfig`and时注意到`/etc/gitconfig`。
> 也就是说，我跑了：
> 
> ```
> git clone -c credential.helper= \
>      -c credential.helper=myhelper \
>      https://example.com/repo 
> ```
> 
> 打算产生配置：
> 
> ```
> [credential]
>      helper =
>      helper = myhelper 
> ```
> 
> 如果没有此补丁，将`helper =`不包含“ ”行，并`/etc/gitconfig`使用来自的凭据助手。

* * *

[请注意，提交 515360f](https://github.com/git/git/commit/515360f9e9be976344e3d21cf6f28dcd2ff3c4f9)后文档现在更加清晰：

凭证文档：使多助手行为更加突出

> Git 的配置系统通过按顺序读取多个配置文件来工作，从一般到具体：

*   一、系统配置`/etc/gitconfig`
*   然后是用户的配置（`~/.gitconfig`或`~/.config/git/config`）
*   然后是存储库配置 ( `.git/config`)

> 对于单值配置项，以最新值为准。
> 对于多值配置项，值按该顺序累积。
> 
> 例如，这允许在`~/.gitconfig`git 中全局设置一个凭证助手，它将尝试在所有存储库中使用，无论它们是否另外提供另一个助手。
> 这通常是一件好事——例如，我可以安装帮助程序来使用我的操作系统钥匙串并在全球范围内在短时间内缓存凭据。
> 
> 有时人们希望能够覆盖继承的设置。
> **对于`credential.helper`设置，这是通过在给它一个新值之前将配置项设置为空来完成的**。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-11-02T22:01:33.650

设置为空字符串的配置变量与未设置的变量不同。`.git/config`当变量已经设置时，不能强制取消设置`~/.gitconfig`。

此外`credential.helper`，这些变量之一是使用多个值，在这种情况下，这些值是从所有读取的配置文件中聚合的。

所以基本上你的选择似乎是：

*   要么不要使用`credential.helper`in `~/.gitconfig`; 仅为您想要的存储库设置商店助手，无论是在他们的`.git/config`，还是`~/.gitconfig`通过指定回购 URL，例如。

    ```
    [credential "https://specific.example.com/repo.git"]
    helper = store 
    ```

*   或实现您自己的助手，它对一组已配置的存储库没有任何作用，并委托给`git credential-store`其余的存储库。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-22T10:07:59.920

我也遇到了这个问题，因为我配置的第一个 credential.helper 总是在我想测试一个新的时执行。这是在 macOS 上使用 Apple 开发工具提供的 git。

列出配置并`git config --list`显示两个助手。

运行`git config --global --edit`没有显示第一个助手的设置。有点奇怪，配置助手时的 --global 与编辑配置时的 --global 范围不同。

另外，因为我想包含一个不同的助手，只是将其消隐并不能解决它。

终于找到了两个地方的设置：

*   `/Library/Developer/CommandLineTools/usr/share/git-core/gitconfig`
*   `/Applications/Xcode.app/Contents/Developer/usr/share/git-core/gitconfig`

从第一个中删除了凭据部分，但两个设置仍然使用`--list`. 在重新启动并尝试了 unset、unset-all --system、--global 等的每个组合后，我找到了第二个文件。

从该文件中删除了设置（同样只有一个），最后`--list`没有显示任何配置的助手。*

# javascript - spring mvc 3 动态列表绑定 + jquery + AJAX

> ID：13198145
> 
> 赞同：6
> 
> 时间：2012-11-02T15:19:18.297
> 
> 标签：javascript, spring, jquery, spring-mvc

我在 Spring 中遇到了动态列表绑定的问题。我正在尝试创建一个基本上如下所示的“添加联系人”页面：

[![联系表](../Images/c02f4c7c3770b3faa8ac507a277d2855.png)](https://i.stack.imgur.com/bLXox.png)

单击“添加电话”按钮时，我希望下方出现另一个“电话类型”和“电话号码”按钮，以便用户可以输入多个电话号码。这是我面临问题的地方。

下面是我的代码：

域类 - 联系人：

在我的表单中，名字、姓氏、电子邮件和生日是域类“联系人”的实例变量以及列表电话部分的电话类型和电话号码。

```
 @Entity
    @Table(name = "CONTACTS_JPA2")
    public class Contact {

    @Id
    @Column(name = "CONTACT_ID")
    @GeneratedValue
    private int Id;

    @Column(name = "FIRST_NAME")
    private String firstname;

    @Column(name = "LAST_NAME")
    private String lastname;

    @SuppressWarnings("unchecked") 
    @OneToMany(mappedBy = "contact", cascade = CascadeType.ALL)
    private List<Phone> phones = LazyList.decorate(new ArrayList<Phone>(),FactoryUtils.instantiateFactory(Phone.class));

    @Column(name = "EMAIL_ID")
    private String emailid;

    @Column(name = "BIRTHDAY")
    private Date birthday;

        /*Getters and Setters*/

    } 
```

上课电话：

```
 @Entity
    @Table(name = "PHONE")
    public class Phone {

    @Id
     @Column(name = "ID")
     private int Id;

    @Column(name = "PHONE_NBR")
    private String phonenumber;

    @Column(name = "PHONE_TYPE")
    private String phonetype;

    @ManyToOne()
    @JoinColumn(name = "CONTACT_ID")
    private Contact contact;

    /*Getters and Setter*/

    } 
```

HTML 表单（JSP）：

```
 <form:form id = "addcontactform" name="addcontact" method="POST" commandName="contact">
    <table>
      <tr>
       <td>First Name:</td>
       <td><form:input name = "firstname" id = "firstname" path="firstname" value=''/></td>
       <td>Last Name:</td>
       <td><form:input name = "lastname" id = "lastname" path="lastname" value=''/></td>
      </tr>
      <tr>
        <td>Email:</td>
        <td><form:input name = "emailid" id = "emailid" path="emailid"/></td>
      </tr>
      <tr>
        <td>Phone Type:</td>
        <td>
          <spring:bind path = "contact.phones[0].phonetype">
            <form:select id ="phonetype" name="phonetype" path="${status.expression}">
             <option value="-- Select Phone Type --">-- Select Phone Type --</option>
             <option value="Home">Home</option>
             <option value="Cell">Cell</option>
             <option value="Work">Work</option>
            </form:select>
        </spring:bind>
        </td>
        <td>Phone Number:</td>
        <td>
          <spring:bind path = "contact.phones[0].phonenumber">
            <form:input name = "phonenumber" id = "phonenumber" path="${status.expression}" value=''/>
          </spring:bind>
        </td>
        <td><form:button type = "button" id = "addphone">Add Phone</form:button>
      </tr>
      <tr>
       <td>Birthday:</td>
       <td><form:input id = "birthday" path="birthday" value=''/></td>
      </tr>
    </table>

    </div>
      <input type="submit" id = "mysubmit" name="mysubmit" value="Add Contact" />
    </div>

    </form:form> 
```

上述表单上的 Javascript：

我在这里要做的是，当单击“添加电话”按钮时，我会向服务器发送一个 AJAX 请求，其中包含要插入的行数。

```
 <script type="text/javascript" src="${pageContext.request.contextPath}/resources/scripts/jquery.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){

       $('#addphone').click(function(){ 
       phonecount++;
       alert('Addinh phone '+phonecount);

       $.get("displayaddphone", {count : phonecount},callback);

       function callback(data){
             alert('in Callback');
             $("#addphone").before(data);
       };
       return false;
    });
    </script> 
```

在 AJAX 请求上调用的控制器方法：它将行数添加到模型并返回一个 jsp - addnewphone.jsp

```
@RequestMapping(value = "/displayaddphone")
public String appendaddphone(@RequestParam(value="count") int addphonecount,ModelMap model){
    model.addAttribute("addphonecount", addphonecount);
    return "addnewphone";
} 
```

addnewphone JSP：这包含新行的 HTML 片段。

```
 <%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
    <%@ taglib uri="http://www.springframework.org/tags" prefix="spring" %>

    <tr>
       <td>Phone Type:</td>
       <td>
         <form:select id ="phonetype" name="phonetype" path="contact.phones[${addphnbr}].phonetype">
          <option value="-- Select Phone Type --">-- Select Phone Type --</option>
          <option value="Home">Home</option>
          <option value="Cell">Cell</option>
          <option value="Work">Work</option>
         </form:select>
       </td>

       <td>Phone Number:</td>
       <td>
         <form:input name = "phonenumber" id = "phonenumber" path="contact.phones[${addphnbr}].phonenumber" value=''/>
       </td>
    </tr> 
```

我正在尝试将此视图（包含在变量“数据”中）传递到上面 javascript 中的 AJAX 回调函数中，并使用 - $(“#addphone”).before(data) 将其添加到我原来的“添加联系人”表单中;

单击“添加电话按钮”时出现以下错误：

```
 SEVERE: Servlet.service() for servlet [appServlet] in context with path    [/ContactList-JPA2] threw exception [java.lang.IllegalStateException: Neither BindingResult  nor plain target object for bean name 'contact' available as request attribute] with root  cause
    java.lang.IllegalStateException: Neither BindingResult nor plain target object for   bean name 'contact' available as request attribute
at org.springframework.web.servlet.support.BindStatus.<init>(BindStatus.java:141)
at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(Abs tractDataBoundFormElementTag.java:178)
at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:198)
at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getName(AbstractDataBoundFormElementTag.java:164)
at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.writeDefaultAttributes(AbstractDataBoundFormElementTag.java:127)
at org.springframework.web.servlet.tags.form.AbstractHtmlElementTag.writeDefaultAttributes(AbstractHtmlElementTag.java:421)
at org.springframework.web.servlet.tags.form.SelectTag.writeTagContent(SelectTag.java:199)
at org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:102)
at org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79)
at org.apache.jsp.WEB_002dINF.views.addnewphone_jsp._jspx_meth_form_005fselect_005f0(addnewphone_jsp.java:117)
at org.apache.jsp.WEB_002dINF.views.addnewphone_jsp._jspService(addnewphone_jsp.java:76)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:690)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:477)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1157)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:927)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at com.springsource.insight.collection.tcserver.request.HttpRequestOperationCollectionValve.invoke(HttpRequestOperationCollectionValve.java:88)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

基本上，我正在尝试在单独的 jsp 中构建要添加到主页中的 HTML，并尝试将其动态添加到我的表单中。对于我的场景来说，这完全是正确的方法吗？请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T06:26:49.080

您在 jsp 中接受了诸如 contact.phones[${addphnbr}].phonetype 之类的内容。并且您的控制器没有将这些信息与 jsp 一起发送。这就是为什么这个错误。

您的控制器应该为您的 jsp 提供“联系人”属性。现在您正在向 jsp 发送“addphonecount”，但您似乎没有在 jsp 上使用它。您可能需要发送“联系人”。

```
@RequestMapping(value = "/displayaddphone")
public String appendaddphone(@RequestParam(value="count") int addphonecount,ModelMap model){
    // define "contact" object, suppose for example
    Contact contact = populateContact();
    model.addAttribute("contact", contact);
    return "addnewphone";
} 
```

# sql-server-2008 - 在不提供端口的情况下连接到 SQL Server 实例

> ID：13198148
> 
> 赞同：1
> 
> 时间：2012-11-02T15:19:20.310
> 
> 标签：sql-server-2008, port, ssms

我最近向服务器添加了另一个 SQL Server 2008 实例，并且希望能够连接到而无需在 SSMS 中指定新的端口号。这可能吗？

如果我使用，我可以连接`MyServer, 2434\Staging`

但是当我使用时失败`MyServer\Staging`

是否有我需要更改的设置或别名来设置？

谢谢您的帮助

# ios - iOS 中的大型 Base64 上传

> ID：13198152
> 
> 赞同：9
> 
> 时间：2012-11-02T15:19:31.127
> 
> 标签：ios, http, upload, base64

**说明：** 我需要在 HTTP POST 参数中发送一个 base 64 编码的字符串，该参数表示要上传的文件。

**当前方法：**我正在使用 ASIFormDataRequest 并将我的文件编码为 base64 字符串，如下所示：

```
NSData *data = [[NSFileManager defaultManager] contentsAtPath:@"my path here"];
NSString *base64Data = [data encodeBase64ForData]; 
```

但是，当上传大文件时，应用程序会耗尽内存并死于可怕的死亡！

**建议的解决方案：**现在有人知道我将如何处理，例如，从磁盘读取文件，将其转换为块中的 base64 字符串并将转换后的 base64 字符串附加到 HTTP 请求中的参数吗？

有效地避免将整个文件读入内存的任何方式。

任何投入将不胜感激！

我的完整http请求代码：

```
NSURL *url = [NSURL URLWithString:requestProgressURLString];
NSData *data = [[NSFileManager defaultManager] contentsAtPath:evidence.uri];
NSString *base64Data = [data encodeBase64ForData];
NSURL *fileURL = [[NSURL alloc] initWithString:evidence.uri];

request = [ASIFormDataRequest requestWithURL:url];

request.shouldAttemptPersistentConnection = false;
[request setShowAccurateProgress:YES];

[request setPostValue:accessToken forKey:@"AccessToken"];
[request setPostValue:[[fileURL path] lastPathComponent] forKey:@"Filename"];
[request setPostValue:evidence.name forKey:@"Title"];
[request setPostValue:base64Data forKey:@"FileData"]; //wants string value (base64 encoded)          
[request addRequestHeader:@"Content-Type" value:@"application/x-www-form-urlencoded"];
[request setTimeOutSeconds:60];
[request setUploadProgressDelegate:self];
[request setDownloadProgressDelegate:self];
[request setDelegate:self];
[request setDidFinishSelector:@selector(requestDone:)];
[request setDidFailSelector:@selector(requestWentWrong:)]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T12:42:13.167

我会把这个问题分成两个：

**1\. 将大文件分块编码为 Base64**
**2\. 上传该文件**

* * *

**1、大文件分块编码为Base64：**

找到一些将实例编码`NSData`为 Base64 的代码。然后使用一个`NSInputStream`读取块中的数据，对其进行编码并用于`NSOutputStream`写入临时文件。我找到了这个问题/答案：[Is it possible to base64-encode a file in chunks?](https://stackoverflow.com/questions/7920780/is-it-possible-to-base64-encode-a-file-in-chunks) 使块大小成为 3 的倍数，它应该可以工作。您可能希望将其移至后台线程。

**重要提示：**这将创建一个比原始文件大的临时文件。在那一刻，设备上必须有足够的空间。开始上传后，您可以将其删除。

* * *

**2\. 上传该文件**

看来你已经完成了。您可以`ASIFormDataRequest`像在示例中一样使用它。由于它制作了文件的私有副本（它构建了多部分 POST 文件），因此您可以删除您的副本。

如果您想通过并行化这些步骤来优化它，您将需要找到另一种上传多部分文件的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T12:24:46.647

您需要分块读取文件，而不是一次性读取文件

您可以使用输入流来执行此操作 Apple 在[此处提供了一些信息](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Streams/Articles/ReadingInputStreams.html)

基本上，您需要创建一个指向您的文件的 NSInputStream，如示例中所示

```
- (void)setUpStreamForFile:(NSString *)path {
    // iStream is NSInputStream instance variable
    iStream = [[NSInputStream alloc] initWithFileAtPath:path];
    [iStream setDelegate:self];
    [iStream scheduleInRunLoop:[NSRunLoop currentRunLoop]
        forMode:NSDefaultRunLoopMode];
    [iStream open];
} 
```

然后，您可以使用 NSStreamDelegate 方法分块读取数据 - (void)stream:(NSStream *)stream handleEvent:(NSStreamEvent)eventCode

苹果再次举一个例子

```
- (void)stream:(NSStream *)stream handleEvent:(NSStreamEvent)eventCode {

    switch(eventCode) {
        case NSStreamEventHasBytesAvailable:
        {
            if(!_data) {
                _data = [[NSMutableData data] retain];
            }
            uint8_t buf[1024];
            unsigned int len = 0;
            len = [(NSInputStream *)stream read:buf maxLength:1024];
            if(len) {
                [_data appendBytes:(const void *)buf length:len];
                // bytesRead is an instance variable of type NSNumber.
                [bytesRead setIntValue:[bytesRead intValue]+len];

                // DO SOMETHING with DATA HERE

            } else {
                NSLog(@"no buffer!");
            }
            break;
        } 
```

您选择的块大小需要平衡内存性能与网络性能，因为 HTTP 标头显然存在一些开销

您还可以通过直接发送您的 NSData 来进一步优化（从而节省 base64 开销）检查这篇文章

[iphone编程中的文件上传到HTTP服务器](https://stackoverflow.com/questions/936855/file-upload-to-http-server-in-iphone-programming)

# java - 获取 XML 节点的值

> ID：13198153
> 
> 赞同：4
> 
> 时间：2012-11-02T15:19:39.967
> 
> 标签：java, xml, dom

我知道如何在表单中使用 DOM 解析 XML 文档：

```
<tagname> valueIWant </tagname> 
```

但是，我现在尝试获取的元素是形式

```
<photo farm="9" id="8147664661" isfamily="0" isfriend="0" ispublic="1" 
       owner="8437609@N04" secret="4902a217af" server="8192" title="Rainbow"/> 
```

我通常`cel.getTextContent()`用来返回值，但在这种情况下不起作用。也没有`cel.getAttributes()`，我认为这会起作用......

理想情况下，我只需要获取 id 和 owner 数值。但是，如果有人可以帮助如何获得所有这些，那么我可以处理删除我以后不想要的部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:22:20.273

您要检索的是元素附加的不同属性的值。看看使用[`getAttribute(String name)`](http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/Element.html#getAttribute%28java.lang.String%29)方法来实现这个

如果您想检索所有属性，您可以使用[`getAttributes()`](http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/Node.html#getAttributes%28%29)并遍历它。这两种方法的一个例子可能是这样的：

```
private void getData(Document document){
    if(document == null)
        return;

    NodeList list = document.getElementsByTagName("photo");
    Element photoElement = null;

    if(list.getLength() > 0){
        photoElement = (Element) list.item(0);
    }

    if(photoElement != null){
        System.out.println("ID: "+photoElement.getAttribute("id"));
        System.out.println("Owner: "+photoElement.getAttribute("owner"));

        NamedNodeMap childList = photoElement.getAttributes();
        Attr attribute;

        for(int index = 0; index < childList.getLength(); index++){
            if(childList.item(index).getNodeType() == Node.ATTRIBUTE_NODE){
                attribute = ((Attr)childList.item(index));
                System.out.println(attribute.getNodeName()+" : "+attribute.getNodeValue());
            }else{
                System.out.println(childList.item(index).getNodeType());
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:25:11.307

就像是：

```
Element photo = (Element)yournode;
photo.getAttribute("farm"); 
```

将为您提供农场属性的值。您需要将节点视为元素才能访问这些属性 ( [doc](http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/Element.html#getAttribute%28java.lang.String%29) )。

# php - 如何将数组值添加到 solr 上的多值字段？

> ID：13198155
> 
> 赞同：1
> 
> 时间：2012-11-02T15:19:54.720
> 
> 标签：php, solr, multivalue

我正在构建一个基于标记的搜索引擎，所以我需要将我的数组添加到一个多值字段中，我搜索了该主题但找不到任何相关内容，我的数组是这样的，

```
$sub["E"] = array("as","bs","ds","fd"); 
```

我试过 $doc->addField("cat",$sub["E"]); 没用，我不想把它放在 foreach 循环中并得到 5 或 6 个 addField 对象，如果你能与我分享任何快捷方式，我会很高兴，谢谢 :)

# z3 - 在 Z3 中证明归纳事实

> ID：13198158
> 
> 赞同：5
> 
> 时间：2012-11-02T15:20:14.570
> 
> 标签：z3, smt

我试图在微软的 SMT 求解器 Z3 中证明一个归纳事实。我知道 Z3 通常不提供此功能，如[Z3 指南](http://rise4fun.com/z3/tutorial/guide)（第 8 节：数据类型）中所述，但是当我们限制要证明事实的域时，这似乎是可能的。考虑以下示例：

```
(declare-fun p (Int) Bool)
(assert (p 0))

(assert (forall ((x Int)) 
    (=> 
    (and (> x 0) (<= x 20))
    (= (p (- x 1)) (p x) ))))
(assert (not (p 20)))

(check-sat) 
```

求解器以 正确响应`unsat`，这意味着它`(p 20)`是有效的。问题是，当我们进一步放宽这个约束时（我们`20`在前面的例子中用任何大于 20 的整数替换），求解器的响应是`unknown`。

我觉得这很奇怪，因为 Z3 解决最初的问题并不需要很长时间，但是当我们将上限增加 1 时，它突然变得不可能了。我试图向量词添加一个模式，如下所示：

```
(declare-fun p (Int) Bool)
(assert (p 0))

(assert (forall ((x Int)) 
    (! (=> 
    (and (> x 0) (<= x 40))
    (= (p (- x 1)) (p x) )) :pattern ((<= x 40)))))
(assert (not (p 40)))

(check-sat) 
```

哪个似乎更好，但现在上限是 40。这是否意味着我可以更好地不使用 Z3 来证明这些事实，还是我错误地表述了我的问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T16:06:28.120

Z3 使用许多启发式方法来控制量词实例化。其中之一是基于“实例化深度”。Z3 用“深度”属性标记每个表达式。所有用户提供的断言都被标记为深度 0。当一个量词被实例化时，新表达式的深度会增加。Z3 不会使用标记为深度大于预定义阈值的表达式来实例化量词。在您的问题中，已达到阈值：`(p 40)`深度为 0，`(p 39)`深度为 1，`(p 38)`深度为 2，等等。

要增加阈值，您应该使用以下选项：

```
(set-option :qi-eager-threshold 100) 
```

这是使用此选项的示例：[http](http://rise4fun.com/Z3/ZdxO) ://rise4fun.com/Z3/ZdxO 。

当然，使用这个设置，Z3 会超时，例如 for `(p 110)`.

未来Z3会对“有界量化”有更好的支持。在大多数情况下，处理这种量词的最佳方法是扩展它。使用编程 API，我们可以在将表达式发送到 Z3 之前轻松“实例化”表达式。这是 Python 中的一个示例（[http://rise4fun.com/Z3Py/44lE](http://rise4fun.com/Z3Py/44lE)）：

```
p = Function('p', IntSort(), BoolSort())

s = Solver()

s.add(p(0))
s.add([ p(x+1) == p(x) for x in range(40)])
s.add(Not(p(40)))

print s.check() 
```

最后，在 Z3 中，包含算术符号的模式不是很有效。问题是Z3在求解之前对公式进行了预处理。然后，大多数包含算术符号的模式将永远不会匹配。有关如何有效使用模式/触发器的更多信息，请参阅[这篇文章](http://research.microsoft.com/en-us/um/people/moskal/pdf/prtrig.pdf)。作者还提供了一个[幻灯片](http://research.microsoft.com/en-us/um/people/moskal/pdf/prtrig-slides.pdf)。

# ruby-on-rails - memcache 和 rails 如何在最大限制下工作？

> ID：13198162
> 
> 赞同：0
> 
> 时间：2012-11-02T15:20:30.327
> 
> 标签：ruby-on-rails, memcached, cache-control

我试图了解当（如果）你填满分配的内存缓冲区时 memcache 是如何工作的。特别是我想了解缓存中键值对的生命周期。我说的是rails中的低级缓存操作，我直接创建键/值对。例如像这样的命令

```
Rails.cache.write key, cached_data

Rails.cache.fetch key 
```

假设为了论证，我有一个无限循环，它只是生成随机 UUID 作为键并存储随机数据。当缓存填满时会发生什么？较旧的项目是否会被淘汰，或者是否有一些特定的算法在幕后处理这种可能性？我在其他地方读过“缓存失效是一个难题”。

只是想了解它实际上是如何工作的。

也许一些简单的代码示例可以说明创建和销毁缓存数据的最佳方式？您是否必须明确定义条目何时到期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:25:58.190

MemcacheD 在幕后处理这个问题。看看这个问题 -

[Memcache 和过期项目](https://stackoverflow.com/questions/10122384/memcache-and-expired-items)

您可以定义过期参数，查看此 wiki 页面 -

[http://code.google.com/p/memcached/wiki/NewProgramming#Cache_Invalidation](http://code.google.com/p/memcached/wiki/NewProgramming#Cache_Invalidation)

对于特定于您的应用程序逻辑的缓存失效（而不仅仅是幕后的内存耗尽），删除功能将简单地删除数据。至于何时删除应用程序中的缓存数据，这很难说 - 因此您引用的关于缓存失效的引用很难。我可能建议您首先考虑 ActiveRecord 回调，例如 after_commit - [http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)，以便在数据库更改时轻松使缓存数据无效。

但这只是一个建议，那里有许多不同的缓存失效方案。

# iphone - 当我放大和缩小时，MKMapView 自定义引脚会发生变化

> ID：13198166
> 
> 赞同：1
> 
> 时间：2012-11-02T15:21:07.200
> 
> 标签：iphone, ios, mkmapview, mkannotationview

我正在制作一个使用 MKMapView 的应用程序。我添加了自定义引脚（带图像）。现在，当我放大然后缩小时，引脚会变回默认值（红色）。

这是我的代码：

```
 - (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>) annotation
    {
        static NSString* SFAnnotationIdentifier = @"Kamera";
        MKPinAnnotationView* pinView =
        (MKPinAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:SFAnnotationIdentifier];
        if (!pinView)
        {
            MKAnnotationView *annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation
                                                                             reuseIdentifier:SFAnnotationIdentifier];
            annotationView.canShowCallout = NO;

            UIImage *flagImage = [UIImage imageNamed:@"pinModer.png"];

            CGRect resizeRect;

            resizeRect.size = flagImage.size;
            resizeRect.size = CGSizeMake(40, 60);
            resizeRect.origin = (CGPoint){0.0f, 0.0f};
            UIGraphicsBeginImageContext(resizeRect.size);
            [flagImage drawInRect:resizeRect];
            UIImage *resizedImage = UIGraphicsGetImageFromCurrentImageContext();
            UIGraphicsEndImageContext();
            annotationView.image = resizedImage;
            annotationView.opaque = NO;

            UIImageView *sfIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"kameraNaprejModra.png"]];
            annotationView.leftCalloutAccessoryView = sfIconView;

            return annotationView;

    }    
    return nil;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:52:22.613

该代码没有处理`dequeue`返回非零的情况`pinView`（意味着它正在重新使用以前的注释视图）。

如果`pinView`不是`nil`，该方法将在返回`nil`注释视图的最后一行结束。

当您返回`nil`时，地图视图会绘制默认的注释视图，即红色大头针。

像这样调整代码：

```
if (!pinView)
{
    //no changes to code inside this if
    //...
    return annotationView;
}
//add an else part and return pinView instead of nil...
else
{
    pinView.annotation = annotation;
}

return pinView; 
```

# c# - 为什么我不能在没有方法的情况下设置类对象的属性值？

> ID：13198167
> 
> 赞同：0
> 
> 时间：2012-11-02T15:21:11.717
> 
> 标签：c#, function, object

我在设置属性时遇到了麻烦，并意识到我只能在函数或方法中设置属性。我的问题是为什么会这样？

这是我的有效代码：

```
public class SomeClass
{    
    Car car = new Car();

    public Car JustAMethod()
    {
        Car car = new Car();
        car.year = 2012;

        return car;
    }        
} 
```

为什么这不起作用：

```
public class SomeClass
{        
    Car car = new Car();
    car.year = 2012;//I get an error here
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T15:26:43.967

语言规范（大部分）禁止在类级别执行任意语句。所能做的就是为类的静态或实例成员指定默认值。

一般来说，所有代码都必须在类的方法中执行。

[正如 AntLaC 提到](https://stackoverflow.com/a/13198232/129655)的，您可以通过使用对象初始化语法指定值来解决此问题。由于可以在类级别定义对象（作为“静态或实例成员的默认值”），因此使用如下语法也可以：

```
public class SomeClass
{
    Car car = new Car() {
        year = 2012;
    };
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T15:24:55.587

因为这是语言规范要求的方式。

想象一下，如果可以在任何你喜欢的地方编写任何东西，将会发生什么混乱：我们最终会使用 PHP，而这当然*不是*C# 的设计目标。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-02T15:24:49.413

如果你想设置特定的属性，你可以在没有方法的情况下尝试这个

```
Car car = new Car()
          {
             year = 2012
          }; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T15:27:12.000

简单的答案是这些只是语言的规则。但是，您有几个选择：

> 创建一个构造函数，使 Car 需要一年时间：

```
public class SomeClass
{        
    Car car = new Car(2012);
} 
```

> 使用对象初始化器：

```
public class SomeClass
{        
    Car car = new Car() { Year = 2012 };
} 
```

> ```
> Use a method: 
> ```

```
public class SomeClass
{        
    Car car = InitializeCar(2012);

    private Car InitializeCar(int year)
    {
        Car car = new Car();
        car.Year = 2012;

        return car;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T15:25:42.880

您不能以这种方式设置属性，这是不允许的。您可以在构造函数/方法/属性中执行此操作。或者这样：

```
public class SomeClass{        
    Car car = new Car(){ year = 2012 };
} 
```

或者您可以将您的值传递给构造函数：

```
public class Car{
    public int year;
    public Car(int year){
        this.year = year;
    }
} 
```

和：

```
public class SomeClass{        
    Car car = new Car(2012);
} 
```

# r - 将 `expression()` 与 `\n` 组合

> ID：13198170
> 
> 赞同：7
> 
> 时间：2012-11-02T15:21:27.873
> 
> 标签：r, ggplot2, plotmath

我有一个 ggplot，我`expression(phantom(x) >=80)`在标签文本中使用了一个正确的大于或等于符号。

但是，我还需要 (N=...) 紧接在下面：

```
require(ggplot2)
.d <- data.frame(a = letters[1:6], y = 1:6)

labs <- c("0-9\n(N=10)","10-29\n(N=10)","30-49\n(N=10)", +
   "50-64\n(N=10)","65-79\n(N=10)", expression(phantom(x) >=80))

ggplot(.d, aes(x=a,y=y)) + geom_point() + 
   scale_x_discrete(labels = labs) 
```

![在此处输入图像描述](../Images/cf7593fa612f20e8b2cfbf09032de284.png)

我怎样才能将其`expression()`与逃生结合起来`\n`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-02T15:57:18.210

正如@otsaw 在他[对您之前的问题的回答中所说](https://stackoverflow.com/a/13196615/1451109)，`plotmath`（因此`expression`）不允许换行。
但是，作为 hack，您可以使用`atop`let`≥80`出现在`(N=10)`. 但是您很快就会看到它与其他标签不匹配：

```
labs <- c("0-9\n(N=10)","10-29\n(N=10)","30-49\n(N=10)", 
          "50-64\n(N=10)","65-79\n(N=10)", 
          expression(atop(phantom(x) >=80, (N==10)))) 
```

![在此处输入图像描述](../Images/4bf3d6650a70facd0d0bd927a6312fba.png)

因此，作为进一步的技巧，您可以将其他标签作为表达式传递：

```
labs <- c(expression(atop(0-9,(N==10))),expression(atop(10-29,(N==10))),
          expression(atop(30-49,(N==10))), expression(atop(50-64,(N==10))),
          expression(atop(65-79,(N==10))), expression(atop(phantom(x) >=80, (N==10)))) 
```

![在此处输入图像描述](../Images/bd7ec41446ed41aa490f98a6d59c236b.png)

但是当然你有@otsaw 解决方案（使用Unicode），它的罗嗦要少得多：

```
labs <- c("0-9\n(N=10)","10-29\n(N=10)","30-49\n(N=10)", 
          "50-64\n(N=10)","65-79\n(N=10)", 
          "\u2265 80\n(N=10)") 
```

![在此处输入图像描述](../Images/4a543d91936fae4cd8c206e7c32d9f45.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T00:06:53.340

另一种方法是使用最近存档的`tikzDevice`. 这将创建`tikz` 乳胶友好格式的图。

这将允许您将任何乳胶表达式作为字符串传递给您的标签。

它还有一个额外的好处，即您可以使用与整个文档相同的序言来编译文档，从而使字体等保持一致。

所有这些都可以使用knitr[自动化](http://yihui.name/knitr/)`opts_chunk$set(dev = 'tikz')`

# appdynamics - 如何删除 appdynamics 中的指标？

> ID：13198172
> 
> 赞同：0
> 
> 时间：2012-11-02T15:21:28.670
> 
> 标签：appdynamics

使用 AppDynamics 中的分析 -> 指标浏览器，您可以进入并查看树中的所有各种指标，但没有右键单击“编辑”选项。您如何修改/删除指标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:21:28.670

事实证明，如果您转到配置 -> 仪器 -> JMX 选项卡，然后瞧，您现在可以删除指标并修改/编辑它们。但没有别的地方。奇怪的。

# java - 春季复合豆？

> ID：13198177
> 
> 赞同：1
> 
> 时间：2012-11-02T15:21:50.090
> 
> 标签：java, spring, javabeans, ioc-container

假设我有自己的 bean，其中包含另一个硬编码的 bean。

如何将它与 Spring 配置结合起来？

第一种方法是使用工厂方法：

```
<bean id="bean1" class="myClass1"/>
<bean id="bean1.member" factory-bean="bean1" factory-method="getMember"/>
<bean id="bean2" class="myClass2">
   <property name="collaborator" ref="bean1.member"/>
</bean> 
```

另一种方法是使用EL：

```
<bean id="bean1" class="myClass1"/>
<bean id="bean2" class="myClass2">
   <property name="collaborator" value="#{bean1.member}"/>
</bean> 
```

在后一种情况下，Spring 没有实现依赖。无论如何，Eclipse 中的 Bean Graph 显示不相关的 bean。

有没有更好的方法？可能我可以实现一些接口，`MyClass1`以便将其视为容器或上下文？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T12:24:18.337

您应该为它创建一个单独的bean`bean1.member`并将其注入`bean1`

```
<bean id="bean3previouslyMember" class="myCompoundBean"/>

<bean id="bean1" class="myClass1">
   <property name="member" ref="bean3previouslyMember"/>
</bean>
<bean id="bean2" class="myClass2">
   <property name="collaborator" ref="bean3previouslyMember"/>
</bean> 
```

除非 myClass1 不可修改且没有 setter，否则这通常是我们所做的。

# html - 一个 div，页面的整个宽度，不中断流

> ID：13198182
> 
> 赞同：0
> 
> 时间：2012-11-02T15:21:55.503
> 
> 标签：html, css

在不破坏文档流的情况下，编写宽度为 100% 的 div（下图中的黄色部分）的最佳方法是什么？

![在此处输入图像描述](../Images/10915189a8cf8b598acc93605a2b074e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:25:17.387

```
div {position:absolute;} 
```

或 div {postion:fixed;} 会将其从文档流中删除，但您可能必须指定 left 和 top 以便在删除后将其放置在您想要的位置，具体取决于您使用的是哪一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T15:28:56.670

```
<div id="container">
    <div class="big">
        //content
    </div>
    <div class="small">
       //content
    </div>
</div> 
```

CSS：

```
.big
{
    background-color:#whatever;
}

.small
{
     width:75%;
     margin-left:auto;
     margin-right:auto;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T15:29:07.723

一个 div 将自动占据其父级的整个宽度（`<body>`在这种情况下）。如果你插入

```
style="clear:both" 
```

进入您要拉伸的 div，它将确保它不在任何其他元素旁边（遵循页面的正常流程），因此它将拉伸主体的宽度。

# iphone - iPhone 的自定义 UISlider

> ID：13198187
> 
> 赞同：0
> 
> 时间：2012-11-02T15:22:17.583
> 
> 标签：iphone, ios, ipad, ios5, ios4

我正在为 iPad 开发一个应用程序，它需要在 UISlider 中选择特定的数据间隔。滑块应该有两个滑块按钮，控件也应该允许间隔移动，即两个滑块按钮之间的区域以选择其他数据间隔。是否有任何自定义 UI 滑块可用于处理此问题。期待您的想法……提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T09:33:49.607

创建 UISlider 的两种方法

**第一种方式**

从 Programming 创建一个 UISlider。

现在您可以根据需要在其上设置图像。

这是在 UISlider 上放置图像的代码。

```
UISlider *slider = [[UISlider alloc] initWithFrame:CGRectMake(0.0, 0.0, 100.0, 30.0)];
[slider setColorPicker:colorPicker];
[slider setUseCustomSlider:NO];

[slider setThumbImage:[UIImage imageNamed:@"thumbSlider.png"] forState:UIControlStateNormal];

[slider setThumbImage:[UIImage imageNamed:@"thumbSlider.png"] forState:UIControlStateHighlighted];

[slider setMinimumTrackImage:[[UIImage imageNamed:@"grey_slide.png"] stretchableImageWithLeftCapWidth:10 topCapHeight:0] forState:UIControlStateNormal];

[slider setMaximumTrackImage:[[UIImage imageNamed:@"blue_slide.png"] stretchableImageWithLeftCapWidth:10 topCapHeight:0] forState:UIControlStateNormal];

[self.view addSubview:slider]; 
```

**创建自定义滑块的另一种方法**

现在仅通过 UIPanGestureRecognizer 创建一个带有两个图像的更多滑块。

在上面添加两个图像。一个像条带，另一个像拇指图像。

这是代码。

首先创建滑块..

```
UIImageView *imageback = [[[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 47)] autorelease];
imageback.image = [UIImage imageNamed:@"strip.png"];
imageback.backgroundColor = [UIColor clearColor];
[sliderView addSubview:imageback];

sliderImg = [[[UIImageView alloc] initWithFrame:CGRectMake(147.5, 27, 25, 25)] autorelease];
sliderImg.contentMode = UIViewContentModeScaleToFill;
sliderImg.image = [UIImage imageNamed:@"dot.png"];
sliderImg.backgroundColor = [UIColor clearColor];
sliderImg.userInteractionEnabled = YES;
[sliderView addSubview:sliderImg]; 
```

现在将 UIPanGestureRecognizer 应用到点图像..

```
UIPanGestureRecognizer *panGestureImg = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(panDetectedSlider:)];
[sliderImg addGestureRecognizer:panGestureImg];
[panGestureImg release]; 
```

**平移手势法。**

```
-(void)panDetectedSlider:(UIPanGestureRecognizer *)panRecognizer
{
    if ([panRecognizer state] == UIGestureRecognizerStateBegan)
    {
        //Start
    }
    else if([panRecognizer state] == UIGestureRecognizerStateChanged)
    {
        //Change
        CGPoint translation = [panRecognizer translationInView:sliderImg];
        CGPoint imageViewPosition = sliderImg.center;
        imageViewPosition.x += translation.x;
        sliderImg.center = imageViewPosition;
        [panRecognizer setTranslation:CGPointZero inView:sliderImg];
    }
    else if([panRecognizer state] == UIGestureRecognizerStateCancelled || [panRecognizer state] == UIGestureRecognizerStateFailed || [panRecognizer state] == UIGestureRecognizerStateEnded)
    {
        //End
    }
} 
```

# javascript - 过滤带有 HTML 标签的单元格

> ID：13198191
> 
> 赞同：0
> 
> 时间：2012-11-02T15:22:36.507
> 
> 标签：javascript, jquery, datatables

如何使 jQuery DataTables 插件的搜索功能忽略表格单元格内的 HTML 标记。示例：考虑一个包含字符串“

```
你好
```

"，当我输入 "Hello" 时，没有返回任何内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:36:03.373

使用`sType`或`mData`选项。这是来自数据表 api [http://datatables.net/usage/columns#mData](http://datatables.net/usage/columns#mData)，[http://datatables.net/usage/columns#sType](http://datatables.net/usage/columns#sType)的示例：

如果您只想在过滤时去除 html 标签，请使用 sType ：

```
"aoColumnDefs": [
      { "sType": "html", ... } // column[0] settings
    ] 
```

`aoColumnDefs`对于定义中的复杂值编辑，请`mData`在要过滤的列上使用：

```
"mData": function ( source, type, val ) {
        if (type === 'set') { 
          source.<data> = val;
          // Store the computed dislay and filter values for efficiency
          source.<data>_display = ...; // value to be display
          source.<data>_filter  = ...; // value for filtering
          return;
        }
        else if (type === 'display') {
          return source.<data>; // example source.price
        }
        else if (type === 'filter') {
          return source.<data>_filter; // this si that you are looking for.
        }
        // 'sort', 'type' and undefined all just use default value
        return source.<data>;
      } 
```

如果您以 JSON 格式获取数据，这就是解决方案。

# php - 使用php获取货币符号

> ID：13198197
> 
> 赞同：2
> 
> 时间：2012-11-02T15:22:50.360
> 
> 标签：php, character-encoding, locale, currency

我以下面的代码为例

```
$locale = 'cy_GB';
setlocale ( LC_MONETARY  , $locale );
$conv = localeconv();           
$currencyRateSymbol = $conv['int_curr_symbol'];
var_dump($currencyRateSymbol); 
```

问题是`string '�' (length=1)`我在寻找时得到`£`

这发生在我使用的每个语言环境中，包括泰铢、英镑和欧元。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T15:27:18.057

`length=1`表示它是一个字节长。“�”表示您正试图将其显示为 Unicode，而 Unicode 解码器无法正确解码此字节。以 UTF-8 编码的 £ 符号是两个字节。

尔格...

£ 符号未以 UTF-8 编码，但您试图将其解码为 UTF-8，因此它失败了。

如果系统上存在 UTF-8 版本的语言环境（例如`cy_GB.UTF-8`），请使用它，或者为尝试显示此内容的客户端指定正确的编码（可能是 ISO-8859-1）。

# python - 在 Django 中的两个模型之间搜索

> ID：13198198
> 
> 赞同：0
> 
> 时间：2012-11-02T15:22:57.157
> 
> 标签：python, django, templates, gis

我提前道歉，这个问题太宽泛了，但我需要一些帮助来概念化。

最终结果是我想启用基于半径的搜索。我正在使用 Django。为此，我有两个类：Users 和 Places。Users 类内部有一个函数，用于定义人们想要搜索的半径。在 Places 类中，我有一个函数，如果有人进入城市和州而不是邮政编码，则定义中点（即，如果有人进入纽约，NY 很多邮政编码与之相关，所以我需要找到中点）。

我把这两个部分放下了。所以现在我有一个人们想要搜索的半径，我知道（估计）这些地方。现在，我在将两者结合起来时遇到了巨大的困难，甚至在思考如何做到这一点。

我尝试在视图中进行相互搜索，但是当我在模板中循环遍历一个模型但尝试根据另一个模型的 if 语句显示结果时遇到了很多麻烦。

似乎自定义模板标签可以解决该问题，但我想确保我首先正确地概念化了问题。IE，

*   我想根据模板中的 if 语句进行显示吗？

*   或者我应该基于模型文件中的其他两个创建另一个类？

*   或者我应该为模型文件中的一个类创建一个新列？

我想我的最终问题是，基于我想要做什么（启用基于半径的搜索），大部分工作应该在哪里/如何完成？再次，如果问题过于宽泛，我深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:35:18.610

也许你可以把它放在呈现搜索页面的视图中。

假设你有一个像你一样的视图功能`search`：

1.  获取用户半径`request.user.get_radius`

2.  根据该半径搜索地点`relevant_places = Places.get_all_places_in_radius`

3.  将这些地方呈现给用户

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:25:52.533

根据您所描述的，我相信 GeoDjango 值得您花时间研究：[http ://geodjango.org/](http://geodjango.org/)

特别是如果你想启用基于半径的搜索，大部分繁重的工作已经由 GeoDjango 完成，你只需要花一些时间学习如何使用它（这只是你必须花费的时间的一小部分“重新发明轮子”，可以这么说）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T19:55:29.980

我只是决定将函数添加到视图中，以便用户输入后可以将信息直接输入到模型中。谢谢您的帮助。我可能最终会调查geodjango。

# css - CSS & PHP 中的图像对齐问题

> ID：13198199
> 
> 赞同：0
> 
> 时间：2012-11-02T15:22:59.913
> 
> 标签：css, wordpress

我对 CSS 和 PHP 的过程非常陌生，但是对于 Wordpress 和小部件，我正试图通过我的插件变得更好。

我试图让我的小推特鸟出现在我的推特内容消息旁边，但它仍然位于消息的顶部。

我试图实现的一个例子可以在这里找到。[http://globe-trekking.com/twitter_ideal.jpg](http://globe-trekking.com/twitter_ideal.jpg)（无法添加图片，因为这是我的第一篇文章）

我怎么能克服这个。

我的相关PHP代码是：

```
$widgetContent .= "<span class='entry-content'><img class='twitter_bird' src='http://globe-trekking.com/running/wp-content/themes/newscast/images/bird_blue_16.png'>{$entryContent}</span>"; 
```

完整的 PHP 代码是：

```
 $widgetContent .= '<ul>';
    if ( ! is_array( $tweets ) || count( $tweets ) == 0 ) {
        $widgetContent .= '<li class="wpTwitterWidgetEmpty">' . __( 'No Tweets Available', $this->_slug ) . '</li>';
    } else {
        $count = 0;
        foreach ( $tweets as $tweet ) {
            // Set our "ago" string which converts the date to "# ___(s) ago"
            $tweet->ago = $this->_timeSince( strtotime( $tweet->created_at ), $args['showts'], $args['dateFormat'] );
            //$entryContent .= '<li>';
            $entryContent = apply_filters( 'widget_twitter_content', $tweet->text, $tweet );
            $widgetContent .= "<span class='entry-content'><img class='twitter_bird' src='http://globe-trekking.com/running/wp-content/themes/newscast/images/bird_blue_16.png'>{$entryContent}</span>";
            $widgetContent .= " <span class='entry-meta'>";
            $widgetContent .= "<span class='time-meta'>";
            $linkAttrs = array(
                'href'  => "http://twitter.com/{$tweet->user->screen_name}/statuses/{$tweet->id_str}"
            );
            $widgetContent .= $this->_buildLink( $tweet->ago, $linkAttrs );
            $widgetContent .= '</span>';

            if ( 'true' != $args['hidefrom'] ) {
                $from = sprintf( __( 'from %s', $this->_slug ), str_replace( '&', '&amp;', $tweet->source ) );
                $widgetContent .= " <span class='from-meta'>{$from}</span>";
            }
            if ( !empty( $tweet->in_reply_to_screen_name ) ) {
                $rtLinkText = sprintf( __( 'in reply to %s', $this->_slug ), $tweet->in_reply_to_screen_name );
                $widgetContent .=  ' <span class="in-reply-to-meta">';
                $linkAttrs = array(
                    'href'  => "http://twitter.com/{$tweet->in_reply_to_screen_name}/statuses/{$tweet->in_reply_to_status_id_str}",
                    'class' => 'reply-to'
                );
                $widgetContent .= $this->_buildLink( $rtLinkText, $linkAttrs );
                $widgetContent .= '</span>';
            }
            $widgetContent .= '</span>';

            if ( 'true' == $args['showintents'] ) {
                $widgetContent .= ' <span class="intent-meta">';
                $lang = $this->_getTwitterLang();
                if ( !empty( $lang ) )
                    $linkAttrs['data-lang'] = $lang;

                $linkText = __( 'Reply', $this->_slug );
                $linkAttrs['href'] = "http://twitter.com/intent/tweet?in_reply_to={$tweet->id_str}";
                $linkAttrs['class'] = 'in-reply-to';
                $linkAttrs['title'] = $linkText;
                $widgetContent .= $this->_buildLink( $linkText, $linkAttrs );

                $linkText = __( 'Retweet', $this->_slug );
                $linkAttrs['href'] = "http://twitter.com/intent/retweet?tweet_id={$tweet->id_str}";
                $linkAttrs['class'] = 'retweet';
                $linkAttrs['title'] = $linkText;
                $widgetContent .= $this->_buildLink( $linkText, $linkAttrs );

                $linkText = __( 'Favorite', $this->_slug );
                $linkAttrs['href'] = "http://twitter.com/intent/favorite?tweet_id={$tweet->id_str}";
                $linkAttrs['class'] = 'favorite';
                $linkAttrs['title'] = $linkText;
                $widgetContent .= $this->_buildLink( $linkText, $linkAttrs );
                $widgetContent .= '</span>';
            }
            //$widgetContent .= '</li>';

            if ( ++$count >= $args['items'] )
                break;
        }
    }

    $widgetContent .= '</ul>'; 
```

我的 CSS 代码是：

```
.widget_twitter div {
padding:0;
width:280px;
}

.widget_twitter ul li {
margin-bottom:5px;
margin-left:0px;
clear:both;
}

.widget_twitter a {
text-decoration:none;
color:#333333;
margin: 0 10px 10px 0;
}
.widget_twitter a:visited {
text-decoration:underline;
color:#FF00FF;
}
.widget_twitter a:hover {
text-decoration:underline;
color:#0000CC;
}

.widget_twitter .follow-button,
.widget_twitter .xavisys-link {
margin:0 10px 10px 25px;
}
.widget_twitter .entry-content {
width:260px;
display: inline-block;
line-height:22px;
margin-top:10px; 
margin-left: 13px;

}

.widget_twitter .entry-content twitter_bird {
vertical-align:middle;
}
.widget_twitter .entry-meta {
display:block;
font-size:80%;
margin-bottom: 10px;
margin-left: 13px;
}

.widget_twitter .intent-meta a {
background-image: url('images/everything-spritev2.png'); /** from Twitter resources */
display: inline-block;
text-indent: -9999px;
margin: 0 10px 10px 0;
height: 16px;
width: 16px;
}
.widget_twitter .in-reply-to-meta {
margin: 0 10px 10px 0;
}
.widget_twitter .intent-meta a.in-reply-to {
 background-position: 0 center;
}
.widget_twitter .intent-meta a:hover.in-reply-to {
background-position: -16px center;
}
.widget_twitter .intent-meta a.favorite {
background-position: -32px center;
}
.widget_twitter .intent-meta a:hover.favorite {
background-position: -48px center;
}
.widget_twitter .intent-meta a.retweet {
background-position: -80px center;
}
.widget_twitter .intent-meta a:hover.retweet {
background-position: -96px center;
} 
```

任何帮助将不胜感激。我已经设法让它看起来“体面”，但除此之外，这是我尝试了很多事情的最后一步。

问候，丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:26:04.447

抱歉快速回答，可能是我错了，但尝试使用**float:left**作为鸟的图像。

# javascript - 网站使用热图

> ID：13198201
> 
> 赞同：4
> 
> 时间：2012-11-02T15:23:05.020
> 
> 标签：javascript, web-applications, heatmap

我有一个希望找到其使用模式的 Web 应用程序。

我希望能够跟踪（并生成）使用热图，我已经检查了[这个问题](https://stackoverflow.com/a/2496550/1031900)和[ClickHeat](http://www.labsmedia.com/clickheat/index.html)。
问题是这些对于跟踪点击有好处。我想通过跟踪鼠标光标位置来跟踪使用情况。
假设是鼠标主要位于用户看的地方......

`onmousemove`采样间隔是我目前拥有的。
是否有一个 JS 库可以更有效地执行此操作，或者至少在我的网站代码之外？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T15:26:50.543

试着看看 Patrick Wied 的这个[heatmap.js](http://www.patrick-wied.at/static/heatmapjs/)。请务必单击该`Display Website's RealTime Heatmap`按钮以查看它的运行情况。

> heatmap.js 库目前在 Firefox 3.6+、Chrome 10、Safari 5、Opera 11 和 IE 9+ 中受支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T15:31:31.973

如果您的网站非常小或愿意为此功能付费，您可能需要查看[https://mouseflow.com/](https://mouseflow.com/)。我从未使用过它，也不知道有人使用过它，但我已经对其进行了调查，似乎它可能是您正在寻找的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-08T07:54:03.217

etracker 提供了一个非常易于安装和免费的解决方案：

[https://www.etracker.com/en/etracker-products-realtime-webanalytics-visitor-voice/etracker-visitor-motion/visitor-motion-lite.html](https://www.etracker.com/en/etracker-products-realtime-webanalytics-visitor-voice/etracker-visitor-motion/visitor-motion-lite.html)

免费版每月提供 100 次免费页面展示。但是，不包括热图 - 仅在更高的计划中可用。但是您可以分析 100 位访客中每个人的动作。这应该会给您对访问者行为的第一印象。

# c# - 用最少的代码组合两个字符串

> ID：13198203
> 
> 赞同：-3
> 
> 时间：2012-11-02T15:23:09.840
> 
> 标签：c#, string

我有 2 个字符串。我想组合这两个字符串，只要组合字符串的字符数为 20 或更少。如果组合长度大于 20，我想截断第一个字符串，直到组合长度为 20。第二个字符串永远不会超过 2 个字符。

这很容易做到。但是，我正在寻找简短、优雅的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T15:29:29.553

```
string s1 = "some_string";
string s2 = "AB";

string s3 = s1.Substring(0, Math.Min(s1.Length, 20 - s2.Length)) + s2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T15:29:02.507

有几个扩展方法：

```
public static string Truncate(this string value, int len) {
   if (value.Length <= len) {
       return value;
   }
   return value.Substring(0, len);
}

public static string Combine(this string first, string second, int maxLen) {
   return first.Truncate(maxLen - second.Length) + second;
} 
```

然后你可以这样称呼它

```
str1.Combine("xx", 20); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T15:29:59.377

```
 string s1 = "12341324";
        string s2 = "jksand9n3";
        string combined = s1.Length+s2.Length >20 ? s1.Substring(0, 20 - s2.Length) + s2 : s1+s2; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T15:28:40.817

```
string str = (str1.Length + str2.Length > 20) ? 
(str1.Substring(0, 20-str2.Length) + str2) : 
(str1 + str2) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T15:31:51.843

```
string s3 = s1.Length + s2.Length <= 20 ? s1 + s2 : s1.Remove(20 - s2.Length) + s2; 
```

# asp.net - ASP.Net 状态服务内存不足，windbg 中找不到大会话

> ID：13198205
> 
> 赞同：3
> 
> 时间：2012-11-02T15:23:29.770
> 
> 标签：asp.net, session, out-of-memory, windb

环境是windows2008 X64

当我使用asp.net状态服务保持会话时，我发现aspnet_state.exe的内存增长缓慢，并且从未下降。几天后，进程内存不足。

所以我使用windbg检查转储，并找到以下信息。

**!dumpheap -stat**

```
000007feea261c38    22266      1959408 System.Collections.Hashtable
000007feea2601d8    86680      3467200 System.Collections.ArrayList
000007fee833eb60    11628      3813984 System.Web.HttpResponse
000007fee833e380    11628      4000032 System.Web.HttpContext
000007fee833e7c8    11628      4186080 System.Web.HttpRequest
000007feea261eb8    22297      4304928 System.Collections.Hashtable+bucket[]
000007feea25ae78    87792      5103632 System.Object[]
000007feea256970   114737     10454192 System.String
0000000000388220     2774     19328376      Free
000007feea25b328    81563     52155808 System.Char[] 
```

**!dumpheap -mt 000007feea25b328 -stat**

```
Statistics:
              MT    Count    TotalSize Class Name
000007feea25b328    81563     52155808 System.Char[]

Total 81563 objects 
```

**!dumpheap -mt 000007feea25b328 -max 2200 -stat**

```
Statistics:
              MT    Count    TotalSize Class Name
000007feea25b328    81547     51952128 System.Char[]
Total 81547 objects 
```

**!dumpheap -mt 000007feea25b328**

```
0000000090787af8 000007feea25b328     2072     
0000000090788348 000007feea25b328      216     
0000000090788df0 000007feea25b328      536     
0000000090789008 000007feea25b328      536     
0000000090789430 000007feea25b328      536     
0000000090789678 000007feea25b328      536     
0000000090789d28 000007feea25b328       32     
0000000090789db0 000007feea25b328     2072     
000000009078ada8 000007feea25b328      216     
000000009078b1b8 000007feea25b328      536     
000000009078b3d0 000007feea25b328      536     
000000009078b788 000007feea25b328      536     
000000009078b9d0 000007feea25b328      536     
000000009078c080 000007feea25b328       32     
000000009078c108 000007feea25b328     2072     
000000009078c958 000007feea25b328      216     
000000009078d3d8 000007feea25b328      536     
000000009078d5f0 000007feea25b328      536     
000000009078da18 000007feea25b328      536     
000000009078dc60 000007feea25b328      536     
000000009078e310 000007feea25b328       32 
```

**分贝 0000000090789db0 L?2072**

```
....

00000000`9078b160  00 00 00 00 00 00 00 00-70 69 25 ea fe 07 00 00  ........pi%.....
00000000`9078b170  03 00 00 00 32 00 30 00-30 00 00 00 00 00 00 00  ....2.0.0.......
00000000`9078b180  00 00 00 00 00 00 00 00-70 69 25 ea fe 07 00 00  ........pi%.....
00000000`9078b190  08 00 00 00 32 00 30 00-30 00 20 00 4f 00 4b 00  ....2.0.0\. .O.K.
00000000`9078b1a0  0d 00 0a 00 00 00 00 00-00 00 00 00 00 00 00 00  ................
00000000`9078b1b0  00 00 00 00 00 00 00 00-28 b3 25 ea fe 07 00 00  ........(.%.....
00000000`9078b1c0  00 01 00 00 00 00 00 00-32 00 30 00 30 00 20 00  ........2.0.0\. .
00000000`9078b1d0  4f 00 4b 00 0d 00 0a 00-00 00 00 00 00 00 00 00  O.K.............

....

00000000`9078b3d0  28 b3 25 ea fe 07 00 00-00 01 00 00 00 00 00 00  (.%.............
00000000`9078b3e0  58 00 2d 00 41 00 73 00-70 00 4e 00 65 00 74 00  X.-.A.s.p.N.e.t.
00000000`9078b3f0  2d 00 56 00 65 00 72 00-73 00 69 00 6f 00 6e 00  -.V.e.r.s.i.o.n.
00000000`9078b400  3a 00 20 00 34 00 2e 00-30 00 2e 00 33 00 30 00  :. .4...0...3.0.
00000000`9078b410  33 00 31 00 39 00 0d 00-0a 00 43 00 61 00 63 00  3.1.9.....C.a.c.
00000000`9078b420  68 00 65 00 2d 00 43 00-6f 00 6e 00 74 00 72 00  h.e.-.C.o.n.t.r.
00000000`9078b430  6f 00 6c 00 3a 00 20 00-70 00 72 00 69 00 76 00  o.l.:. .p.r.i.v.
00000000`9078b440  61 00 74 00 65 00 0d 00-0a 00 00 00 00 00 00 00  a.t.e........... 
```

所以，事实证明，我的大部分内存都被存储会话 http ok 和锁定响应使用（也得到一些字符串存储“423 锁定”），还有更多

**!gcroot 0000000090789db0**

```
Scan Thread 17 OSTHread b9d4
Scan Thread 19 OSTHread b46c
Scan Thread 20 OSTHread 2290
Scan Thread 21 OSTHread e9c
Scan Thread 22 OSTHread 1cf4
Scan Thread 23 OSTHread 12d0
Scan Thread 25 OSTHread 1668
Scan Thread 24 OSTHread 13ec
Scan Thread 26 OSTHread 10f18
Scan Thread 28 OSTHread 1a74
Scan Thread 27 OSTHread 11a0
Scan Thread 29 OSTHread 1cec
Scan Thread 30 OSTHread 6784
Scan Thread 31 OSTHread 77c4
Scan Thread 32 OSTHread 10b08 
```

我找不到对 Char 的任何引用。

我检查了！finalizequeue，只有几个对象可以完成..所以我很困惑..

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T05:46:43.767

下载*asp.net 网络分析器*并使用它来查看数据存储的内容和位置。

# jquery - HTML/引导选项卡

> ID：13198207
> 
> 赞同：2
> 
> 时间：2012-11-02T15:23:34.053
> 
> 标签：jquery, html, forms, validation, twitter-bootstrap

我已经把头撞在墙上一天了，现在试图找出一些简单的标签操作。我有 3 个选项卡，每个选项卡都包含表单的不同部分。当用户在第一个时，我需要禁用第二个和第三个。然后，当填写第一页并单击继续并且验证返回 true 时，我可以启用第二个选项卡并滑动到该选项卡。然后当他们完成第二页，点击继续，验证返回 true，我可以启用第三个选项卡并滑入它。主要的是我需要禁用这些选项卡，直到它们当前所在的选项卡得到验证。所以这是我的html：

```
<ul class="nav nav-tabs" id="myTab">
  <li><a href="#options">Options</a></li>
  <li><a href="#information">Information</a></li>
  <li><a href="#payment">Payment</a></li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="options">
    <form id="frmtype1" action="" name="frmtype1" method="post">
        <header>Registration Options</header>
        <br/>
        <label for="Reg_type1" class="checkbox">
            <input type="radio" name="Reg_type" id="Reg_type1" value="1"/>
        Registering myself with credit card or bank account
        </label>
        <br>
        <label for="Reg_type2" class="checkbox">
            <input type="radio" name="Reg_type" id="Reg_type2" value="2"/>
        Registering multiple people using credit card or bank account
        </label>
        <br>
        <label for="Reg_type3" class="checkbox">
            <input type="radio" name="Reg_type" id="Reg_type3" value="3"/>
        Registering using a purchase order
        </label>
        <div class="form-actions">
            <button class="btn" type="submit">Continue</button><span class="help-inline" style="display:none;">Please choose an option</span>
        </div>
    </form>             
  </div>
  <div class="tab-pane" id="information">...</div>
  <div class="tab-pane" id="payment">...</div>
</div> 
```

然后我的jQuery：

```
var val1 = $('#frmtype1').validate({
$('#myTab a[href="#information"]').tab('disabled'); //i have no idea how to prevent the user from navigating here so I just put disabled. Didn't work obviously
$('#myTab a[href="#payment"]').tab('disabled');
    errorPlacement: function(error, element) {}, //this is to prevent the standard error message from showing, rather you use the inline-text
    rules: {
        'Reg_type': {
            required: true
        }
    }
});

$('#frmtype1').submit(function(e) {
    /*This will validate the first page, if the user didn't select an option then it will display
    the inline text as an error message*/
    if(val1.form()) {
        $('.help-inline').hide();

    } else {
        $('.help-inline').show();
        return false;
    }
});

$('#myTab a').click(function (e) {
  e.preventDefault();
  $(this).tab('show');
}) 
```

所以首先，我如何禁用后续的选项卡，直到当前选项卡的表单被验证为真？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T18:48:11.377

基于[来自 Twitter Bootstrap 的默认选项卡](http://twitter.github.com/bootstrap/javascript.html#tabs)，我的方法是仅在需要时激活选项卡插件（因为选项卡实际上是禁用的，除非您激活它）：

```
function activateTab(selector) {
    $(selector).on('click.twbstab',function() { $(this).tab('show'); })
        .closest('.disabled').removeClass('disabled');
}

activateTab('#myTab a:first'); 
```

然后您可以使用您的验证过程来激活选项卡。

检查[jsfiddle 上的演示](http://jsfiddle.net/Sherbrow/nZaLY/)。我使用了一个附加类来显示一个选项卡被禁用。

```
<ul class="nav nav-tabs" id="myTab">
    <li class="disabled active"><a href="#home">Home</a></li>
    <li class="disabled"><a href="#profile">Profile</a></li>
    <li class="disabled"><a href="#messages">Messages</a></li>
    <li class="disabled"><a href="#settings">Settings</a></li>
</ul> 
```

```
.nav-tabs li.disabled { color: grey; }
.nav-tabs li.disabled a:hover { border-color: transparent; } 
```

您还可以在激活后使用类似的方法禁用选项卡：

```
function deactivateTab(selector) {
    $(selector).off('click.twbstab')
        .closest('li').addClass('disabled');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:44:44.780

jQuery UI 选项卡当然可以让您动态添加选项卡 - 请参阅**[此处的演示](http://jqueryui.com/tabs/#manipulation)**

代码的关键行是：

```
tabs.find( ".ui-tabs-nav" ).append( ... );//adds a new tab
tabs.append( ... );//append content top be selected by the new tab
tabs.tabs( "refresh" );//updates the internals and the screen 
```

我确信其他标签插件提供相同或相似的功能。

另一个选项是[EasyTabs](http://os.alfajango.com/easytabs/#collapsible-tab2)，它允许标签是“可取消的”（参见页面底部附近的“可折叠和可取消”演示） - 即。只有在满足某些条件时才能选择它们（演示中的确认对话框，但可能是您喜欢的任何内容）。这可能比动态添加选项卡更简单且更理想。

# asp.net - iOS：如何在继续之前执行 NSURLConnection 并获得响应？

> ID：13198212
> 
> 赞同：0
> 
> 时间：2012-11-02T15:23:54.960
> 
> 标签：asp.net, ios, xml, ios5, nsurlconnection

我正在尝试从我的服务器获取更新。我希望它拥有最新信息，所以我正在运行一个页面，如果响应是`"Complete"`而不是响应，`"Error"`那么我将继续使用 Update 方法从`xml`文件中获取最新信息。我的问题是在我的“主要”函数中的所有代码完成之前，不会调用委托方法。到那时，代码已经通过我的 if 语句检查`responseSuccess`is`TRUE`或`FALSE`. 我认为这是因为 NSURLConnection 是异步的……但我不确定如何修复它。如果我需要提供更多代码/信息，请告诉我。谢谢！

**主要的**

```
 if (UpdatingFlag)
    {
        NSLog(@"Cannot update while updating is in process...");
    } else {
        // run updates before getting information
        [self getResponse:@"http://url/path/to/file?function=myvalue"];

        [self setBottomBarToUpdating:@"Processing Please Wait..."];

        dispatch_queue_t queue = dispatch_queue_create("updateQueue", DISPATCH_QUEUE_CONCURRENT);

        UpdatingFlag = TRUE;

        if(responseSuccess)
        {
           dispatch_async(dispatch_get_main_queue(),^ {
              [self setBottomBarToUpdating:@"Updating..."];
              [self updateFromXMLFile:@"https://url/path/to/file.xml"];
           });
        }

        UpdatingFlag = FALSE;

        dispatch_barrier_async(queue,^ {
            dispatch_async(dispatch_get_main_queue(), ^{
                 [self setBottomBarToUpdated];
            });
        });

} 
```

**获取响应方法**

```
- (void) getResponse:(NSString *)url
{
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:url]
                                             cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:45.0];
    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    [connection start];

    if (connection) {NSLog(@"Connecting...");
    } else {NSLog(@"Didn't Connect Error...");}
} 
```

**委托方法**

```
#pragma mark NSURLConnection methods

- (void)connection:(NSURLConnection *)conn didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {
    NSLog(@"Did Receive Challenge");

    if ([challenge previousFailureCount] == 0) {
        NSURLCredential *newCredential;
        newCredential = [NSURLCredential credentialWithUser:@"user" password:@"pass" persistence:NSURLCredentialPersistenceNone];
        [[challenge sender] useCredential:newCredential forAuthenticationChallenge:challenge];
    } else {
        [[challenge sender] cancelAuthenticationChallenge:challenge];

        NSLog(@"Invalid Username and Password");

        UIAlertView * userNameAlert = [[UIAlertView alloc]initWithTitle:@"Error"
                                                                message:@"ErrorMsg"
                                                               delegate:self
                                                      cancelButtonTitle:nil
                                                      otherButtonTitles:@"OK", nil];
        [userNameAlert show];

    }

}

- (void)connection:(NSURLConnection *)conn didReceiveData:(NSData *)data {
    NSLog(@"Received Data Packet...");
    response = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    NSLog(@"Error, %@", error);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)conn {
    NSLog(@"Finished Loading");
    if([response rangeOfString:@"Complete"].location == NSNotFound) {
        // success
        responseSuccess = FALSE;
    } else {
        // failed
        responseSuccess = TRUE;
    }
}

- (BOOL)connection:(NSURLConnection *)conn canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace {
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:53:07.127

从服务器获取更新后要运行的任何代码都需要移动到（或从中调用）connectionDidFinishLoading: 方法。因此，您可以摆脱这些标志，而只在主代码中调用 getResponse。

# macos - bash for循环使用带空格的变量

> ID：13198215
> 
> 赞同：4
> 
> 时间：2012-11-02T15:24:06.377
> 
> 标签：macos, bash, for-loop, spaces

我在 Mac OS 10.7.x 上，需要询问网络服务以报告针对服务定义的接口以及针对每个服务设置的 dns 服务器。

```
servicesAre=`networksetup -listallnetworkservices | tail -n +2 | sed 's/.*/"&"/'` ; 
for interface in $servicesAre ; do 
      printf " \nFor $interface we have:\n \n" ; 
      networksetup -getdnsservers $interface ; 
done 
```

我的问题是接口的初始变量列表中的空格：

```
"USB Ethernet"  
"Display Ethernet"  
"Wi-Fi"  
"Bluetooth PAN" 
```

我如何通过这些？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T16:48:07.580

添加`IFS=$'\n'`到开头，但不要在 for 循环中的变量周围添加双引号。默认情况下，输入字段分隔符包括空格和制表符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T16:57:06.730

问题是您希望 for 循环每行循环一次，但 bash 中的 for 循环每个参数循环一次。通过将变量括在引号中，您可以将其复合为一个参数。为避免这种情况，我建议放弃 for 循环和变量，而改用[`read`](http://ss64.com/bash/read.html)while 循环：

```
networksetup -listallnetworkservices | tail -n +2 | sed 's/.*/"&"/' |
while read interface; do 
    printf " \nFor $interface we have:\n \n" ; 
    networksetup -getdnsservers $interface ; 
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T15:34:55.557

尝试用双引号将变量括起来：

```
servicesAre=`networksetup -listallnetworkservices | tail -n +2 | sed 's/.*/"&"/'` ; 
for interface in "$servicesAre"; do 
      printf " \nFor $interface we have:\n \n" ; 
      networksetup -getdnsservers "$interface" ; 
done 
```

# linux - 内核在启动时无限期挂起

> ID：13198218
> 
> 赞同：1
> 
> 时间：2012-11-02T15:24:09.607
> 
> 标签：linux, debugging, linux-kernel, kernel

我已经配置了内核`linux slob allocator`以实现最佳拟合算法。我构建并安装了内核映像，以便下次可以从它启动。现在，当我尝试启动这个内核时，它会无限期地挂起，光标甚至不会闪烁。在光标挂起之前打印以下消息：

```
[0.000325] pid_max: default: 32768 minimum: 301
[0.001461] Security Framework initialized
[0.002108] AppArmor: AppArmor initialized 
```

在此消息之后，光标将无限期挂起。我想知道一些内核调试技巧，这些技巧可以帮助我解决问题或阅读一些好书。我也配置`kdb`了但不知道如何在这种情况下使用它。任何帮助都会得到帮助！！

额外细节：

我已经修改了`slob_page_alloc`函数来实现`best-fit`算法，而算法又由`slob_alloc`函数调用。我在用`v3.6.2`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:31:09.807

基本上，您将需要对最佳拟合算法代码调用的外部例程进行存根（或模拟），以便可以将最佳拟合代码放入测试程序中。然后使用某种 C 单元测试套件和 C 覆盖工具来帮助确保您已经仔细测试了代码的所有分支和所有状态。（不幸的是，我目前对此类工具没有任何建议。）

# asp.net - 文本框 Bind() 默认值

> ID：13198219
> 
> 赞同：2
> 
> 时间：2012-11-02T15:24:22.527
> 
> 标签：asp.net, c#-4.0

是否可以将此文本框默认为今天的日期，而不使用代码隐藏并保留 Bind()？

```
<asp:FormView ...>
    <InsertItemTemplate>
        <asp:TextBox ID="txtDateInput" runat="server" Text='<%# Bind("DateCol") %>'>
        ...
    </InserItemTemplate>
</asp:FormView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T01:36:22.463

只需使用这个：

```
<asp:FormView ...>
<InsertItemTemplate>
    <asp:TextBox ID="txtDateInput" runat="server" Text=<%=DateTime.Now.ToString()%>>
    ...
</InserItemTemplate> 
```

当您绑定时，FormView 中的其他列将按应有的方式绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:36:38.230

最好的方法可能是在你的数据库端，

像这样

```
Select IdCol, 
       ISNULL(DateCol, GETDATE()) as DateCol,
       OtherCol
from yourTable 
```

如果是，请在此处提供您的`DateCol`默认日期`NULL`

# sql-server - FROM 中多表的 select 效果和 INNER JOIN 一样，那么 ON 子句是什么呢？

> ID：13198223
> 
> 赞同：1
> 
> 时间：2012-11-02T15:24:29.647
> 
> 标签：sql-server, tsql, inner-join

我有一个这样的查询：

```
SELECT
    *
FROM
    table1,
    table2 
```

我知道这有点相当于：

```
SELECT
    *
FROM
    table1
INNER JOIN
    table2
ON ??? 
```

但是，连接的结果 ON 子句是什么？

## 更新

在 SSMS 中进行一些测试后，这是我的发现

```
SELECT * FROM table1,table2 
```

给出相同的执行计划和相同的记录

```
SELECT * FROM table1 INNER JOIN table2 ON 1=1 
```

同样的事情

```
SELECT * FROM table1 CROSS JOIN table2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:25:45.050

定义它们关系的列。

```
SELECT  *
FROM  table1 
      INNER JOIN table2
           ON table1.ID = table2.ID 
```

实际上您显示的查询不是`equal`。第一个产生两个表上所有记录的笛卡尔积，换句话说`CROSS JOIN`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T15:31:24.027

```
SELECT
    *
FROM
    table1,
    table2 
```

相当于：

```
SELECT 
    * 
FROM 
    table1
CROSS JOIN 
    table2 
```

没有带有 CROSS JOIN 的 ON 语句。如果需要过滤 CROSS JOIN，请将其放在 WHERE 子句中。

```
WHERE table1.DateCreated <= table2.DateModified 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T19:19:02.727

在 SSMS 中进行一些测试后，这是我的发现

```
SELECT * FROM table1,table2 
```

给出相同的执行计划和相同的记录

```
SELECT * FROM table1 INNER JOIN table2 ON 1=1 
```

同样的事情

```
SELECT * FROM table1 CROSS JOIN table2 
```

# c# - 设置 Windsor 以在 FaultException 中包装异常

> ID：13198224
> 
> 赞同：0
> 
> 时间：2012-11-02T15:24:32.013
> 
> 标签：c#, wcf, castle-windsor, aop

我正在考虑 Windsor 方面的方面或拦截器，它可以捕获从 Web 服务抛出的已知异常并将其重新包装在`FaultException<T>`.

假设有合同

```
[ServiceContract]
public interface IMyContract
{
    [OperationContract]
    [FaultContract(typeof(MyException))]
    void DoSome();
} 
```

绑定到实现类的拦截器将`FaultContractAttribute`在操作上定义并在它捕获时`DoSome`重新抛出。`FaultException<MyException>``MyException`

这有任何意义吗？有什么注意事项吗？

您能否建议一个可以识别它何时在 WCF 上下文中执行并在这种情况下执行的实现。当不作为 WCF 服务执行时（例如，在单元测试中），这将重新引发所有异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T14:51:26.877

你可以试试这样的 Castle Windsor Interceptor：

```
public class FaultContractInterceptor : IInterceptor
{
    public void Intercept(IInvocation invocation)
    {
        try
        {
            invocation.Proceed();
        }
        catch (MyException myException)
        {
            var faultAttributes = invocation.Method.GetCustomAttributes(typeof (FaultContractAttribute), inherit: true) as FaultContractAttribute[];

            if (faultAttributes.Any(f => f.DetailType.FullName == typeof (MyException).FullName))
            {
                throw new FaultException<MyException>(myException, myException.Message);
            }
            else
            {
                throw;
            }
        }
    }
} 
```

# ios - 如何从视图控制器加载情节提要中的场景

> ID：13198227
> 
> 赞同：3
> 
> 时间：2012-11-02T15:24:34.910
> 
> 标签：ios, xcode, view, controller, storyboard

我正在开发一个使用 Storyboard 加载网页（使用 UIWebView）的应用程序（我对以前的 xib 也一无所知）。我已经为那个 UIWebView 创建了一个视图控制器，一切正常。问题是：由于以前的 iOS 版本不允许上传文件，我需要创建一个新视图（我认为它被称为场景），允许用户选择和发布图片。我能够分别开发两个视图并且它们按预期工作，但现在我需要根据用户想要将图片发布到服务器时触发的事件来连接它们。使用 shouldStartLoadWithRequest 我可以捕捉到该动作，然后如果 iOS 版本低于 6，我需要重定向到新视图（其中包含图像选择器和一个按钮以上传所选图像）。0 但在加载新控制器以显示该视图时我真的迷失了。使用按钮很简单，但我不知道如何在代码中调用。到目前为止，我有一个链接到该场景的视图控制器，并且我尝试了以下方法：

```
WritePostViewController *postViewController = [[WritePostViewController alloc] init];
[self.navigationController pushViewController:postViewController animated:YES]; 
```

甚至调用storybard：

```
UIStoryboard *sb = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
[sb instantiateInitialViewController];
UIViewController *vc = [sb instantiateViewControllerWithIdentifier:@"WritePostView"];
vc.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self presentViewController:vc animated:YES completion:NULL]; 
```

第一种方法什么都不做，第二种方法显示此错误日志：

*** WebKit 在 webView:decidePolicyForNavigationAction:request:frame:decisionListener:delegate: Storyboard () 中丢弃了一个未捕获的异常：Storyboard () 不包含标识符为“WritePostView”的视图控制器*

我一直在浏览和阅读很多东西，但没有什么能解决我的问题。这肯定是我对 iOS 了解不多的问题，但我真的被困住了。我会感谢任何帮助。

顺便说一句，我需要在发布文件后回来，但我可以想象它是相反的方向，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:02:37.033

如果您的代码位于视图控制器内（看起来是这样），您可以使用`self.storyboard`. 您也不需要`instantiateInitialViewController`，因为如果您的所有 UI 都来自同一个故事板，那么它已经完成了初始控制器的加载。

至于实际错误，它抱怨 @"WritePostView" 不是情节提要中任何视图控制器的公认名称。请注意，它在这里查找的**不是**控制器的类名，而是控制器的 Storyboard ID。（这是有道理的，因为您可以使用相同**类型**的控制器拥有不同的“场景”。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:02:03.207

好的，看来解决了。我只是在场景之间添加了一个*转*场

![转义标识符](../Images/71f6e44f3b7b486c2e5927cfba9ad524.png)

然后我只需要添加这个：

```
[self performSegueWithIdentifier:@"writePostViewSegue" sender:self]; 
```

它有效！无论如何，我不确定这是否是这样做的方法，所以如果有人知道更好，请告诉我。

干杯

# c - 在野牛中使用字符文字作为终端

> ID：13198231
> 
> 赞同：5
> 
> 时间：2012-11-02T15:24:44.800
> 
> 标签：c, bison, yacc, lex, flex-lexer

我试图理解 flex/bison，但文档对我来说有点困难，而且我可能严重误解了一些东西。这是一个测试用例： http: [//namakajiri.net/misc/bison_charlit_test/](http://namakajiri.net/misc/bison_charlit_test/)

文件“a”包含单个字符“a”。"foo.y" 有这样一个简单的语法：

```
%%

file: 'a' ; 
```

生成的解析器无法解析文件“a”；它给出了一个语法错误。

语法“bar.y”几乎相同，只是我更改了命名标记的字符文字：

```
%token TOK_A;

%%

file: TOK_A; 
```

然后在 bar.lex 中：

```
a       { return TOK_A; } 
```

这个工作得很好。

我在尝试直接使用字符文字作为野牛终端时做错了什么，就像在文档中一样？

我希望我的语法看起来像“语句：选择器'{'属性'：'值';' '}'”而不是“语句：选择器 LBRACE 属性冒号值 SEMIC RBRACE”...

我在 debian wheezy 中运行 bison 2.5 和 flex 2.5.35。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T15:31:06.833

*改写*

问题是运行时问题，而不是编译时问题。

问题是你有两个完全不同的词法分析器。

`bar.lex`分析器识别输入中的`a`an 并将其作为 TOK_A 返回并忽略其他所有内容。

`foo.lex`分析器回显每个字符，但仅此而已。

### foo.lex — 如所写

```
%{
#include "foo.tab.h"
%}

%% 
```

### foo.lex — 等效

```
%{
#include "foo.tab.h"
%}

%%
. { ECHO; } 
```

### foo.lex — 必需

```
%{
#include "foo.tab.h"
%}

%%
. { return *yytext; } 
```

* * *

## 工作代码

这是一些带有诊断打印的工作代码。

### foo-lex.l

```
%%
. { printf("Flex: %d\n", *yytext); return *yytext; } 
```

### foo.y

```
%{
#include <stdio.h>
void yyerror(char *s);
%}

%%

file: 'a' { printf("Bison: got file!\n") }
    ;

%%

int main(void)
{
    yyparse();
}

void yyerror(char *s)
{
    fprintf(stderr, "%s\n", s);
} 
```

### 编译和执行

```
$ flex foo-lex.l
$ bison foo.y
$ gcc -o foo foo.tab.c lex.yy.c -lfl
$ echo a | ./foo
Flex: 97
Bison: got file!

$ 
```

* * *

细节点：那个空白行是如何进入输出的？答：词法分析器把它放在那里。该模式`.`与换行符不匹配，因此换行符被视为存在规则：

```
\n    { ECHO; } 
```

这就是输入被接受的原因。如果将`foo-lex.l`文件更改为：

```
%%
.       { printf("Flex-1: %d\n", *yytext); return *yytext; }
\n      { printf("Flex-2: %d\n", *yytext); return *yytext; } 
```

然后重新编译并再次运行，输出为：

```
$ echo a | ./foo
Flex-1: 97
Bison: got file!
Flex-2: 10
syntax error
$ 
```

没有空行。这是因为语法不允许换行符出现在有效的“文件”中。

# ajax - AJAX避免重复代码

> ID：13198233
> 
> 赞同：0
> 
> 时间：2012-11-02T15:24:48.513
> 
> 标签：ajax, jquery, symfony

我正在使用 Symfony2.1 和 Doctrine2.1

我想将 AJAX 用于我网站上的许多功能、编辑标题、评价文章、即时创建实体等。

我的问题很简单：

我是否需要为每个功能创建一个 JQuery 函数，如下所示：

```
$('#specific-functionality').bind('click', function(e){

    var element = $(this);
    e.preventDefault();

    // the call
    $.ajax({
      url: element.attr('href'),
      cache: false,
      dataType: 'json',
      success: function(data){        

        // some custom stuff : remove a loader , show some value, change some css

      }
    });
  }); 
```

这对我来说听起来很沉重，所以我想知道 JS 端是否有任何框架，或者我可以使用什么特定方法来避免这种情况。我正在考虑按响应类型（html_content、布尔值、整数）重新组合项目，但也许已经存在一些可以很好地处理它的东西！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:56:03.377

据我了解，您要求更轻的 JQuery ajax 方法版本。有直接的 get/post 方法而不是使用 ajax。

> ```
>  $.get(element.attr('href'), {'id': '123'}, 
>     function(data) { 
>        alert(data); 
>     } 
>  ); 
> ```

配置错误功能

```
$.get(element.attr('href'), {'id': '123'}, function(data) {alert(data);})
.error(function (XMLHttpRequest, textStatus, errorThrown) {
                        var msg = jQuery.parseJSON(XMLHttpRequest.responseText);
                        alert(msg.Message);
}); 
```

此外，您可以传递回调函数来执行任何同步操作，例如

```
function LoadData(cb)
{
    $.get(element.attr('href'), { 'test': test }, cb);
} 
```

并打电话

```
LoadData(function(data) { 
alert(data);
otherstatements; 
}); 
```

对于进度条，您使用 JQuery ajaxStart 和 ajaxStop 函数而不是手动隐藏和显示它。请注意，页面上的每个 JQuery AJAX 操作都会触发它。

```
 $('#progress')
   .ajaxStart(function () {
   //disable the submit button
   $(this).show();
   })
   .ajaxStop(function () {
   //enable the button
   $(this).hide();
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T19:17:38.673

而不是`$('#specific-functionality').bind('click', function(e){`，试试这个：

```
$(".ajax").click(function(){

    var url = $(this).attr("href") ;
    var target = $(this).attr("data-target") ;
    if (target=="undefined"){
      alert("You forgot the target");
      return false ;
    }

    $.ajax(.... 
```

并在 html

```
<a class="ajax" href="..." data-target="#some_id">click here </a> 
```

我认为这是最简单的解决方案。如果您希望某些链接通过 ajax 工作，只需给它类“ajax”并放在`data-target`它应该输出结果的位置。所有自定义的东西都可以放在这些`data-something`属性中。

# c# - 对 Web 方法的 Ajax 请求返回文档对象而不是文本或 JSON

> ID：13198241
> 
> 赞同：0
> 
> 时间：2012-11-02T15:25:14.177
> 
> 标签：c#, ajax, json, jquery, webmethod

我有一个对 Web 服务的 ajax 调用，我想将一些 JSON 返回到视图中。但是，现在，如果我提醒调用结果，我会得到“对象文档”。我尝试改变内容类型，但没有骰子。这是当前状态下的 ajax 调用：

```
$.ajax({
    type: "GET",
    url: "services/offerService.asmx/getUploadedDocs",
    contentType: 'text/html',
    data: {offerID : offerId},
    success: function(result) {
        $.each(result, function(index) {
        alert(result.toString());
        $(element).closest('ul.uploadedDocs').append('<li id="uploadedDoc-'+(index+"") + '" class = "uploadedDocument"><span id="uploadedDocTitle">Title: '+ result["title"] + '</span><span id="uploadedDocUploadedBy>Uploaded By: ' + result["uploadedBy"] + '</span></li>');
        });                     
    }
}); 
```

这是网络方法：

```
[WebMethod]
public object getUploadedDocs(string offerID)
{
    string sql = "SELECT * FROM [dbo].[uploaded_documents] WHERE primary_offer_id = @offerId";
    IList<UploadedDocument> uploadedDocs = new List<UploadedDocument>();
    using (SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["production"].ToString()))
    {
        SqlCommand cmd = new SqlCommand(sql, conn);
        cmd.Parameters.Add("@offerId", SqlDbType.Int);
        cmd.Parameters["@offerId"].Value = offerID;
        DataTable dt = new DataTable();
        SqlDataAdapter adapter = new SqlDataAdapter(cmd);
        adapter.Fill(dt);
        adapter.Dispose();
        uploadedDocs = dt.ToList<UploadedDocument>();
    }

    StringBuilder json = new StringBuilder();
    json.Append("{");
    int count = 1;
    foreach (UploadedDocument doc in uploadedDocs)
    {
        json.Append("{doc"+count.ToString()+":"+"{\"title\": " + doc.docTitle + ", \"uploadedBy\": " + doc.uploadedBy + ", \"uploadDate\": " + doc.uploadDate.ToLongDateString() + "},");
    }
    if(json.ToString().Contains(","))
        json = json.Remove(json.ToString().LastIndexOf(','), 1);
    json.Append("}");
    return json.ToString();
} 
```

我可以将它`object()`作为 . 有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:34:20.423

首先，您需要将 ajax 调用中的 contentType 更改为“json”。

然后尝试调用

```
alert(JSON.stringify(result)); 
```

看看它给了你什么。假设您正在正确构建 json 对象，它应该可以工作。还下载[firebug](https://getfirebug.com/downloads)并查看返回的内容。

编辑：

我不确定您的 uploadDocs 对象是什么样的，但请尝试执行

```
return Json(uploadedDocs); 
```

在你的方法中。

JK，您正在使用 WebForms (?)，因此要将其解析为 Json 对象，请参见[此处](https://stackoverflow.com/questions/2482758/how-to-convert-an-object-list-into-json-in-asp-net)

# asp.net-mvc-3 - 如何使用控制器中的 imageid 从数据库中检索图像

> ID：13198242
> 
> 赞同：-1
> 
> 时间：2012-11-02T15:25:13.267
> 
> 标签：asp.net-mvc-3, jquery

使用这种方法将图像保存在 Web 目录中并将 URL 存储在数据库中，我将图像 URL 存储在数据库中。基于该图像 ID（我需要通过 Ajax 调用将此图像 ID 传递给控制器​​）​​。我需要检索图像。

我使用 jQuery 模板获得了图像 ID，因此我已将该图像 ID 传递给控制器​​。我应该在控制器、filepathresult 或 fileresult 中写什么？还是有其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:34:29.327

如果您请求具有物理文件的资源（AKA 导航到[URL](http://en.wikipedia.org/wiki/Uniform_Resource_Locator)），[IIS](http://en.wikipedia.org/wiki/Internet_Information_Services)将直接提供它（也就是说，如果您请求`www.mysite.com/Images/Image3.jpg`IIS 将直接提供它）。我真的不明白你在做什么，但如果你的意思是你使用 Ajax 调用具有图像 ID 的 MVC 控制器来获取图像的关联 URL，你可以做几件事。

1.  您可以简单地返回 URL 并使用 JavaScript 代码创建带有该 URL 的图像标记并将其插入[DOM](http://en.wikipedia.org/wiki/Document_Object_Model)中。
2.  您可以返回像 <img src="{yoururl}" /> 这样的视图，并使用 JavaScript 将其插入 DOM。
3.  您可以将图像直接存储在数据库中，并使用 File 方法返回指示正确[MIME](http://en.wikipedia.org/wiki/MIME)类型的图像位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:03:33.047

好吧，你有点糊涂了。

你有实际的图像文件，`file.jpg`你有文件的物理路径，`D:\some\path\to\file.jpg`.

您拥有文件的[URL](http://en.wikipedia.org/wiki/Uniform_Resource_Locator)路径和代理身份（您的 id）。

*   id：1337（一些随机数）
*   网址：？？？

第一个问题：

你说你正在存储 URL。真的是完整的网址吗？它只是图像的部分路径吗？路径是来自网站根目录还是应用程序根目录？它只是部分物理路径吗？

第二个问题：

你到底想做什么？

您只想获取图像的完整路径吗？如果您已经拥有 id，为什么还需要 Ajax 来执行此操作？如果需要从中获得任何性能，您可能需要重新考虑如何存储图像。

一旦图像获得了新的身份，在任何地方都使用这个新身份通常是有意义的。您可能应该考虑在文件上传后复制/重命名新身份的文件（并可能保存旧文件名以保存记录）。但是，如果您需要保持文件名（或多或少）原样，最好提供获取整组 id 的 URL 的能力，而不是单独发出 Ajax 请求 id-by- ID。

# html - 最大高度内的CSS最大高度

> ID：13198246
> 
> 赞同：1
> 
> 时间：2012-11-02T15:25:22.483
> 
> 标签：html, css

我正在尝试编写一个聊天页面，但我遇到了 div 大小的问题：/ 我有这样的结构：

```
<div class="page">
  <div class="chat-holder">
    <div class="chat-text">
    </div>
  </div>
</div> 
```

并且页面类是（假设屏幕的宽度和高度，所以它是

```
.page {
  width: 100%;
  height: 100%;
} 
```

我希望聊天持有者的宽度为 740 像素，高度应该是任意高度，但不超过浏览器高度和背景白色，聊天区域周围有 20 像素的填充（到目前为止，我试过这个）：

```
.chat-holder {
  background: #fff;
  width: 740px;
  max-height: 100%;
  padding: 20px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
} 
```

现在我的聊天区域我想在这个聊天支架内有一个 1 像素的黑色边框，如果聊天不大于浏览器减去 40 像素的填充，我希望它具有其中文本的大小。如果它更大，我希望它在里面滚动（到目前为止我试过这个）

```
.chat-text {
  width: 100%;
  max-height: 100%;
  border: 1px solid #000;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  overflow: auto;
} 
```

但这不起作用，聊天文本 div 离开了聊天持有者，正如我所见，这是因为最大高度在最大高度内不起作用。我希望有一个解决这个问题的方法，因为我真的不想使用 jQuery 或其他东西来修复它。

先感谢您

编辑：jsFiddle [http://jsfiddle.net/KjX7s/2/](http://jsfiddle.net/KjX7s/2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T15:59:31.423

您必须设置高度和最大高度：

```
.page {
  width: 100%;
  height: 100%;
}
.chat-holder {
  background: #fff;
  width: 740px;
  min-height: 20px;
  max-height: 100%;
  padding: 20px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
}
.chat-text {
  width: 100%;
  min-height: 20px;
  max-height: 100%;
  border: 1px solid #000;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  overflow: auto;
} 
```

见小提琴：http: [//jsfiddle.net/KjX7s/14/](http://jsfiddle.net/KjX7s/14/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:58:33.343

添加

```
 overflow: auto; 
```

里面`.chat-holder`。

并放置一个使用 CSS Calc() 计算的高度：

```
max-height: calc(100% - 41px); 
```

[http://jsfiddle.net/KjX7s/5/](http://jsfiddle.net/KjX7s/5/)

# expressionengine - HTTPS 和 HTTP ExpressionEngine 站点 URL 标记

> ID：13198247
> 
> 赞同：8
> 
> 时间：2012-11-02T15:25:23.100
> 
> 标签：expressionengine

我今天发现，如果您访问一个在文档头部的 css 链接路径中使用 {site_url} 标签的 EE 站点，如果您键入 https 而不是 http，该站点将无法加载 CSS 文件。

我已经通过使用 htaccess 文件强制进入 http 来解决这个问题，但我只是想知道 EE 中是否有一个设置可以更改以使两者都工作？

这仅发生在 Chrome 和 IE 上，我猜这取决于您的浏览器设置为允许安全性。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T16:00:08.190

我以前在这个问题[上](https://stackoverflow.com/questions/12200765/expressionengine-access-via-both-http-and-https)得到了一些很大的帮助。我希望它现在对你也有用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-02T20:23:23.650

很少有人知道您可以将协议相关的 URL 用于资产

例子：

```
<link rel="stylesheet" href="//www.site.com/site.css">
<script type="text/javascript" src="//www.site.com/site.js"></script> 
```

如果浏览器通过 HTTPS 在 SSL 中查看页面，那么它将使用 https 协议请求该资产，否则它将使用 HTTP 请求它。

这可以防止 IE 中出现可怕的“此页面包含安全和非安全项目”错误消息，从而使您的所有资产请求保持在同一协议中。

更多信息来自[这里](https://stackoverflow.com/questions/550038/is-it-valid-to-replace-http-with-in-a-script-srchttp)：

> 根据 RTF 3986：第 4.2 节，没有方案（http: 或 https:）的相对 URL 是有效的。如果客户端对此感到窒息，那么这是客户端的错，因为它们不符合 RFC 中指定的 URI 语法。
> 
> 你的例子是有效的，应该可以工作。我自己在流量很大的网站上使用了这种相对 URL 方法，并且投诉为零。此外，我们在 Firefox、Safari、IE6、IE7 和 Opera 中测试我们的网站。这些浏览器都理解 URL 格式

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-02T16:13:05.030

当我加载 CSS 和 JS 时，我从不使用我只是相对设置它的域。例如：

```
<link rel="stylesheet" href="/layout/styles/layout.css" > 
```

如果你试试这个，那行得通吗？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-02T17:32:16.610

您可以在`system/expressionengine/config/config.php`文件中使用 PHP 来动态设置 {site_url} 配置，包括协议。像这样的东西：

```
// Detect protocol and server host
$protocol = (isset($_SERVER["HTTPS"]) && $_SERVER["HTTPS"] == "on") ? "https://" : "http://";
$base_url = $protocol . $_SERVER['HTTP_HOST'];

// Set EE index page
$config['index_page'] = "";

// Set base and site URL
$config['base_url'] = $base_url . "/" . $config['index_page'];
$config['site_url'] = $config['base_url']; 
```

您可以在`config.php`. 但是`$config['site_url']`是什么影响`{path=""}`和`{stylesheet}`标签的输出。

有关更多想法，请参阅[NSM 的 Config Bootstrap 文件](http://ee-garage.com/nsm-config-bootstrap)或文章[为多个服务器配置 ExpressionEngine](http://old.kennwilson.com/2007/11/configuring-expression-engine-for-multiple-servers)。对于您可以设置的所有路径`config.php`，请参阅[EE2 Config Overrides](http://expressionengine.com/wiki/EE_2_Config_Overrides)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-08T18:52:56.983

我使用 Nginx。

我不知道为什么，但是如果我使用绝对 URL（完整路径）而不是相对 URL（[如 CreateSean 所说](https://stackoverflow.com/a/13199068/781824)的`/`在域中开始字符串，[如 Deviarte 所说](https://stackoverflow.com/a/13202543/781824)的那样在协议处开始字符串） ，资源在各种浏览器中的加载速度明显更快（或者是它们的相对 URL 加载速度较慢？我不知道。）。因此，他们的解决方案/实践（我曾经做过......现在仍然做的事情）都不适合我现在的环境。`//`

相反，我所做的是 config.php 中的以下内容：

```
$config['base_url'] = $_SERVER["scheme_url"];
$config['site_url'] = $_SERVER["scheme_url"]; 
```

请注意，如果它尚不存在，您可能必须向 PHP 提供 scheme_url。如果像我一样，您正在使用 php-fpm，只需将其添加到您的配置中作为/在您的 nginx 站点配置中需要的位置：

```
 fastcgi_param scheme_url "$scheme://$host/"; 
```

编辑：

查看 bootstrap/configs 和一些使用将协议添加到配置变量的方法（例如[上面 unexplainedBacn 的注释](https://stackoverflow.com/a/13200314/781824)）。默认情况下，Nginx 中没有 HTTPS 服务器变量，在 ssl 下的 php 虚拟主机配置中添加以下内容：

```
 fastcgi_param   HTTPS   on; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-21T07:17:15.530

全部，

以下是我如何使用 Apache 和 Config.php 文件重写 URL，以免触发浏览器的“非 SSL 内容警告”。我仍然在我的模板中使用 {path} 和 {stylesheet} 变量，因为它们太好了，不能放弃:)

**在 Apache 的 htaccess 文件中：**

```
# Set an Apache 'site_url' variable to http when accessed via http:
RewriteCond %{SERVER_PORT} 80
RewriteRule ^(.*)$ - [E=site_url:http://mysite.com]

# Set Apache 'site_url' variable to https when accessed via https
RewriteCond %{SERVER_PORT} 443
RewriteRule ^(.*)$ - [E=site_url:https://mysite.com] 
```

**然后在 system/expressionengine/config.php**

将以下两行添加到您的代码中（确保您没有在配置文件的其他位置设置这些变量）

```
$config['base_url'] = $_SERVER["site_url"];
$config['site_url'] = $_SERVER["site_url"]; 
```

据我了解，site_url 变量是 EE 用于 EE 中的 {stylesheets} 和 {paths} 的。

**谚语“最后一件事”：**

如果您仍然收到非 SSL 警告，只需查看源代码并在源代码中搜索“http://”。这些是罪魁祸首。它们是未使用 base_url/site_url 变量设置的硬编码链接。

您需要在您的帖子/模板/变量/片段中找到这些 http 调用，并用简单的 // 替换这些调用。
所以打电话给

```
http://example.com/some_file.html 
```

现在应该是这样的：

```
//example.com/some_file.html. 
```

这适用于绝对和相对 URL。

您设置为 EE 文件上传目录的路径也是如此。确保将这些目录的 url 更改为如下所示

```
//example.com/path/to/your/upload/directory 
```

瞧，你应该很高兴:)

# asp.net - 通过查询字符串将数组传递给 HttpHandler

> ID：13198250
> 
> 赞同：0
> 
> 时间：2012-11-02T15:25:35.307
> 
> 标签：asp.net, arrays, query-string, httphandler

我已经查看了所有内容，但找不到解决方案。更正：我找到了解决方案，但他们（我不能让他们）工作。

我通过查询字符串将数组传递给 HttpHandler。我读到你是这样读的：

```
Sub ProcessRequest(ByVal context As HttpContext) Implements IHttpHandler.ProcessRequest

    Dim request As HttpRequest = context.Request

    For u = 0 To request.QueryString("arrayIneed").Count - 1
        selectPONumber.Add(request.QueryString("arrayIneed")(u))
    Next 
```

这样做，无论查询字符串格式是 arrayIneed=data1,data2... 还是 arrayIneed=[data1,data2...]，都会将 = 之后的所有内容都切割成单个值。

请帮忙。提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:34:34.393

```
request.QueryString("arrayIneed") 
```

如果你需要它作为一个数组，只会拉出一个字符串，然后你需要将它分成一个

```
 dim arr = Request.QueryString("arrayINeed").Split(",")
 For Each s In arr
    selectPoNumber.Add(s)
 Next 
```

值得注意的是，如果您的 po 编号数组是整数之一，则必须将 s 转换为 int

# c# - C# JSON.net - 尝试将 JSON 反序列化为 C# 会导致正确数量的对象但没有设置属性

> ID：13198255
> 
> 赞同：1
> 
> 时间：2012-11-02T15:25:44.627
> 
> 标签：c#, json.net

我正在为 excel 开发一个自定义插件，我希望它从远程 Web 服务中获取项目列表。JSON 正在从 web servive 返回到 excel，但我无法将 JSON 转换为 C# 中的对象。

这是插件代码：

```
using Microsoft.Office.Tools.Ribbon;
using Newtonsoft.Json;
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Net;
using System.Text;
using System.Text.RegularExpressions;
using System.Diagnostics;
using System.Web;

namespace TestAddIn
{
    class Project
    {
        static string currentProject;
        static List<Project> validProjects;

        public int id { get; set; }
        public string name { get; set; }
        public int svar_reserved_space { get; set; }

        // Set the current project we're working on
        internal static void setCurrentProject(string path)
        {
            Match match = Regex.Match(path, @"^[A-Za-z]:\\(\w+)");

            Project.currentProject = match.Groups[1].Value;

            foreach (Project validProject in validProjects)
            {
                RibbonDropDownItem dropDown = Globals.Ribbons.Ribbon1.Factory.CreateRibbonDropDownItem();

                dropDown.Label = validProject.name;

                if (validProject.name.Equals(Project.currentProject))
                {
                    Globals.Ribbons.Ribbon1.projectComboBox.Items.Add(dropDown);
                }
            }
        }

        // Connect to a web service and get a list of valid projects
        internal static void getValidProjects()
        {
            string url = "http://192.168.118.128/projects/json";

            WebRequest webRequest;
            webRequest = WebRequest.Create(url);

            Stream objStream;
            objStream = webRequest.GetResponse().GetResponseStream();

            StreamReader objReader = new StreamReader(objStream);

            string sLine = objReader.ReadLine();

            Debug.WriteLine("begin: " + sLine);

            validProjects = JsonConvert.DeserializeObject<List<Project>>(sLine);

            Debug.WriteLine("end");
        }
    }
} 
```

使用此 json 时：

```
[{"Project":{"id":1,"name":"test1","svar_reserved_space":2}},{"Project":{"id":2,"name":"test2","svar_reserved_space":0}}] 
```

我在 validProjects 中有两个 Project 对象，但 id 和 svar_reserver_space 为 0，名称为 null。思想？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:32:18.833

使用一些插件/nuget 魔法，这是最简单的：

*   在 Visual Studio 中安装[Web Essentials](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)
*   添加 nuget 包[newtonsoft.json](http://json.codeplex.com/)
*   复制 JSON 输出字符串
*   将 JSON 粘贴为类

并使用此代码：

```
WebClient wc = new WebClient();
string json = wc.DownloadString("http://192.168.118.128/projects/json");
var a = JsonConvert.DeserializeObject<YourGeneratedMainClass>(json); 
```

`YourGeneratedMainClass`通过将 json 粘贴为类生成的类在哪里。

如果你使用上面的方法，你可能会看到它有一个父对象

```
public class Project
{
    public int id { get; set; }
    public string name { get; set; }
    public int svar_reserved_space { get; set; }
}

public class Parent
{
    public Project Project { get; set; }
} 
```

在这两个 SO 问题中有更多关于它的信息：

[Json.net 反序列化为 c# .net 2.0 中的对象列表](https://stackoverflow.com/questions/1941001/json-net-deseralize-to-a-list-of-objects-in-c-sharp-net-2-0)

[反序列化对象的所有值都设置为 Null](https://stackoverflow.com/questions/7853755/deserialized-object-has-all-values-set-to-null)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T15:47:07.693

我怀疑你需要 JSON 看起来像：

```
[{"id":1,"name":"test1","svar_reserved_space":2},{"id":2,"name":"test2","svar_reserved_space":0}] 
```

为了使用默认的 Json 反序列化。

# business-objects - Stimulsoft 中的多个业务对象

> ID：13198261
> 
> 赞同：2
> 
> 时间：2012-11-02T15:26:02.263
> 
> 标签：business-objects, stimulsoft

我们都熟悉 3 层编程我正在尝试使用 DTO 编程 3 层作为简单概念并使用 Stimul 创建测试报告但是在编写以下两个简单类的过程中遇到了麻烦

[http://uimg.in/images/2012/11/02/L6eHl.png](http://uimg.in/images/2012/11/02/L6eHl.png)

并且为了检索一些数据使用静态类和下面的数据（非常简单和常见）

[http://uimg.in/images/2012/11/02/9sVIb.png](http://uimg.in/images/2012/11/02/9sVIb.png)

在我的测试报告中，我需要为此目标获取大学本地学生的信息，我使用了非常简单的 linq join，如下所示

[http://uimg.in/images/2012/11/02/yvmJk.png](http://uimg.in/images/2012/11/02/yvmJk.png)

现在一切都是正确的，“list”变量返回正确的数据

[http://uimg.in/images/2012/11/02/7owOj.png](http://uimg.in/images/2012/11/02/7owOj.png)

现在让我们开始创建我的报告 1\. 在字典部分中，我添加新数据源并选择来自业务对象的数据 2\. 从“Common.dll”添加学生和学院类 3\. 将学生拖放到页面作为表格

[http://uimg.in/images/2012/11/02/HGSy.png](http://uimg.in/images/2012/11/02/HGSy.png)

**但我的问题是：为什么两列（大学名称 - 教授姓名）有重复记录？我怎样才能更正记录？！**

[http://uimg.in/images/2012/11/02/opy1Y.png](http://uimg.in/images/2012/11/02/opy1Y.png)

任何人都可以修改和更正我的附件吗？！

我认为在 StimulSoft 中应该是一种解决问题的方法 我没有看到代码有问题！似乎linq没有问题如果刺激可以接受**多个数据源**，当我将表数据源更改为学生时，我的问题将解决，学生数据正确但大学数据在我将表数据源更改为大学时重复，大学数据正确但学生数据是重复 ！！！

[http://uimg.in/images/2012/11/02/laSnz.png](http://uimg.in/images/2012/11/02/laSnz.png)

**附件 ：**

[http://www.putlocker.com/file/AAD881D281CCF8FB](http://www.putlocker.com/file/AAD881D281CCF8FB)

[http://www.smallfiles.org/download/3311/RptTest.rar.html](http://www.smallfiles.org/download/3311/RptTest.rar.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-24T12:47:13.547

你应该在你的选择查询中使用 distinct 并且你可以使用 lambda 表达式来区分你的模型

```
list = list.orderby(item => item.CollegeName).select(grp => grp.first()).tolist();

or for more column

list = list.orderby(item => item.CollegeName).ThenBY(item2 => item2.ProfName)select(grp => grp.first()).tolist(); 
```

希望做得好 Mahdi Ghafoorian

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:33:28.830

您应该设置业务对象之间的关系并使用它。

# c# - 带有 BooleanToVisibilityConverter 的显示/隐藏按钮不起作用

> ID：13198263
> 
> 赞同：2
> 
> 时间：2012-11-02T15:26:04.197
> 
> 标签：c#, .net, wpf, xaml, dependency-properties

在我的应用程序中，我想根据用户授权级别显示/隐藏一个按钮。如果用户是团队负责人，则应显示该按钮。如果用户不是团队负责人，则不应显示。

我尝试使用`BooleanToVisibilityConverter`资源字典中定义的 a 来解决此问题：

```
<BooleanToVisibilityConverter x:Key="VisibilityConverter" /> 
```

转换器的实现：

```
<Button Grid.Row="1" Grid.Column="5"
Click="TeamLeader_Click" Visibility="{Binding IsTeamLeader, Converter={StaticResource
VisibilityConverter}}" Style="{StaticResource ButtonStyleMenu}" /> 
```

在我的类后面的代码中，我使用依赖属性来更改按钮的可见性。

```
public static readonly DependencyProperty IsTeamLeaderProperty =
DependencyProperty.Register("IsTeamLeader", typeof(bool),
typeof(MainMenu), new FrameworkPropertyMetadata(false));

public bool IsTeamLeader
{
    get { return (bool)GetValue(IsTeamLeaderProperty); }
    set { SetValue(IsTeamLeaderProperty, value); }
} 
```

在我的用户控件的“加载事件”中，我初始化了我的属性，`false`因此按钮应该被折叠。

```
private void ViewPage_Loaded(object sender, RoutedEventArgs e)
{
   this.IsTeamLeader = false;
} 
```

但这行不通。无论`IsTeamLeader`属性在启动时具有哪个值，按钮始终可见。

所以你能帮我并给我一个提示我在哪里做错了吗？我的依赖属性实现有问题`BooleanToVisiblityConverter`还是有问题？要不然是啥？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:31:10.103

你必须`DataContext`像这样设置：

```
this.DataContext = this; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:26:42.210

看来（通过阅读评论）您尚未设置数据上下文。:-)

但是要在将来调试此问题，您应该从调试器中的已知情况返回。让我解释

1.  在转换器中放置一个断点。如果没有被调用，则绑定在源头失败；比如你发现的。如果它正在工作，（并且返回值是适当的）然后转到＃2。
2.  使依赖属性具有更改的处理程序并在其中放置一个断点，例如：

    ```
     public bool MyBoolProperty
        {
            get { return (bool)GetValue(MyBoolPropertyProperty); }
            set { SetValue(MyBoolPropertyProperty, value); }
        }

        /// <summary>
        /// Identifies the MyBoolProperty dependency property.
        /// </summary>
        public static readonly DependencyProperty MyBoolPropertyProperty =
            DependencyProperty.Register(
                "MyBoolProperty",
                typeof(bool),
                typeof(MyClass),
                new PropertyMetadata(false, OnMyBoolPropertyPropertyChanged));

        /// <summary>
        /// MyBoolPropertyProperty property changed handler.
        /// </summary>
        /// <param name="d">MyClass that changed its MyBoolProperty.</param>
        /// <param name="e">Event arguments.</param>
        private static void OnMyBoolPropertyPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            MyClass source = d as MyClass; // Breakpoint here...
            bool value = (bool)e.NewValue;
        } 
    ```

如果事件永远不会被触发......您在进入依赖关系的数据与您期望的类型之间存在类型不匹配。

上面的示例使用了一个值类型，并且该值类型很难不匹配，因此情况可能并非如此......但有时您将数据作为源接口，并且依赖属性无法将接口转换为其目标对象，即它期望什么。

# iphone - 在 iOS 中创建自定义视图

> ID：13198266
> 
> 赞同：-1
> 
> 时间：2012-11-02T15:26:14.633
> 
> 标签：iphone, ios, uiview

如何创建这样的自定义视图？像这样

![在此处输入图像描述](../Images/5e41a64ec8d4a6c01c0baa042f9d59cd.png)

任何人都有教程来制作像左侧视图一样的视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:30:22.820

这是一个很好的教程-> [http://www.raywenderlich.com/1768/how-to-make-a-custom-uiview-a-5-star-rating-view](http://www.raywenderlich.com/1768/how-to-make-a-custom-uiview-a-5-star-rating-view) 或者只是进行谷歌搜索。

您需要继承 UIView 并使用其他 UIView 子类（UILabel、UIImageView、...）或您自己的 CoreGraphics 进行自己的绘图。

对于您的示例，您可以为外部矩形制作一个 UIView，为内部制作另一个。您可以使用 view.layer 边框（您将需要 CG）。其他的只是 UILabel 和 UIImageView 的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:47:44.747

左侧的那个与 UITableView 的区别不大。您所需要做的就是将它放在情节提要上并使用其属性 - 就像您可以从情节提要本身设置行高一样。[要自定义“浏览礼物”、“生日”等标题 - 请参阅文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html)下的委托方法 tableView:viewForHeaderInSection 。

然后是关于如何在表格视图中实现行的水平滚动的优秀教程[。](http://www.raywenderlich.com/4680/how-to-make-an-interface-with-horizontal-tables-like-the-pulse-news-app-part-1)

# web-services - jaxws-maven-plugin：“org.mainco.orgws.OrganizationWebService”类不是端点实现类

> ID：13198270
> 
> 赞同：1
> 
> 时间：2012-11-02T15:26:21.527
> 
> 标签：web-services, maven, jax-ws, webservice-client

我正在使用 Maven 3.0.3。我想使用 jaxws-maven-plugin 生成本地 WSDL 文件，但对需要为“<SEI>”标签设置什么值感到困惑。我的 Maven 插件代码是

```
 <plugin>
                            <groupId>org.codehaus.mojo</groupId>
                            <artifactId>jaxws-maven-plugin</artifactId>
                            <executions>
                                    <execution>
                                            <goals>
                                                    <goal>wsimport</goal>
                                            </goals>
                                            <configuration>
                                                    <wsdlUrls>
                                                            <wsdlUrl>${wsdl.url}</wsdlUrl>
                                                    </wsdlUrls>
                                                    <sourceDestDir>${basedir}/src/main/java</sourceDestDir>
                                                    <packageName>org.mainco.orgws</packageName>
                                            </configuration>
                                    </execution>
                                    <execution>
                                            <!-- generate WSDL file from the compiled classes in tmp directory -->
                                            <id>generate wsdl file</id>
                                            <phase>process-resources</phase>
                                            <goals>
                                                    <goal>wsgen</goal>
                                            </goals>
                                            <configuration>
                                                    <sei>org.mainco.orgws.OrganizationWebService</sei>
                                                    <destDir>${basedir}/src/main/java</destDir>
                                                    <genWsdl>true</genWsdl>
                                                    <resourceDestDir>${basedir}/src/main/java</resourceDestDir>
                                                    <packageName>org.mainco.orgws</packageName>
                                            </configuration>
                                    </execution>
                            </executions>
                    </plugin> 
```

运行此（“mvn clean test”）时，只生成一个带有“@WebService”注释的接口......

```
./src/main/java/org/mainco/orgws/OrganizationWebService.java 
```

但是没有生成实现此交互的类。当我运行我的插件时，我得到了错误

```
[INFO] --- jaxws-maven-plugin:1.10:wsgen (generate wsdl file) @ orgsclient ---
The class "org.mainco.orgws.OrganizationWebService" is not an endpoint implementation class. 
```

我需要寻找什么类来确定如何填充 <sei> 标签？

**编辑：**根据评论，这是该类的代码。它绝对是巨大的，所以我省略了几个方法，但希望它有助于解释事情。

```
package org.mainco.myws;

import java.util.List;
import javax.jws.WebMethod;
import javax.jws.WebParam;
import javax.jws.WebResult;
import javax.jws.WebService;
import javax.xml.bind.annotation.XmlSeeAlso;
import javax.xml.ws.RequestWrapper;
import javax.xml.ws.ResponseWrapper;

/**
 * This class was generated by the JAX-WS RI.
 * JAX-WS RI 2.1.3-b02-
 * Generated source version: 2.1
 * 
 */
@WebService(name = "OrganizationWebService", targetNamespace = "http://mainco.org/myws/")
@XmlSeeAlso({
    ObjectFactory.class
})
public interface OrganizationWebService {

    /**
     * 
     * @param referenceDomain
     * @param appId
     * @return
     *     returns org.mainco.myws.ReferenceDomainResponse
     * @throws BusinessServiceFaultException
     */
    @WebMethod
    @WebResult(targetNamespace = "")
    @RequestWrapper(localName = "getReferenceDomain", targetNamespace = "http://mainco.org/myws/", className = "org.mainco.myws.GetReferenceDomain")
    @ResponseWrapper(localName = "getReferenceDomainResponse", targetNamespace = "http://mainco.org/myws/", className = "org.mainco.myws.GetReferenceDomainResponse")
    public ReferenceDomainResponse getReferenceDomain(
        @WebParam(name = "appId", targetNamespace = "")
        Integer appId,
        @WebParam(name = "referenceDomain", targetNamespace = "")
        ReferenceDomain referenceDomain)
        throws BusinessServiceFaultException
    ;

    /**
     * 
     * @param orgDatasetList
     * @param orgId
     * @param aiDomain
     * @param appId
     * @return
     *     returns org.mainco.myws.OrgData
     * @throws BusinessServiceFaultException
     */
    @WebMethod
    @WebResult(targetNamespace = "")
    @RequestWrapper(localName = "getOrgData", targetNamespace = "http://mainco.org/myws/", className = "org.mainco.myws.GetOrgData")
    @ResponseWrapper(localName = "getOrgDataResponse", targetNamespace = "http://mainco.org/myws/", className = "org.mainco.myws.GetOrgDataResponse")
    public OrgData getOrgData(
        @WebParam(name = "appId", targetNamespace = "")
        Integer appId,
        @WebParam(name = "orgId", targetNamespace = "")
        Integer orgId,
        @WebParam(name = "aiDomain", targetNamespace = "")
        AiDomain aiDomain,
        @WebParam(name = "orgDatasetList", targetNamespace = "")
        OrgDatasetList orgDatasetList)
        throws BusinessServiceFaultException
    ;

    /**
     * 
     * @param orgType
     * @param orgId
     * @param relationshipType
     * @param appId
     * @param educationPeriodCd
     * @param orgSubTypeCd
     * @return
     *     returns org.mainco.myws.ParentOrgData
     * @throws BusinessServiceFaultException
     */
    @WebMethod
    @WebResult(targetNamespace = "")
    @RequestWrapper(localName = "getParentOrgData", targetNamespace = "http://mainco.org/myws/", className = "org.mainco.myws.GetParentOrgData")
    @ResponseWrapper(localName = "getParentOrgDataResponse", targetNamespace = "http://mainco.org/myws/", className = "org.mainco.myws.GetParentOrgDataResponse")
    public ParentOrgData getParentOrgData(
        @WebParam(name = "appId", targetNamespace = "")
        Integer appId,
        @WebParam(name = "orgId", targetNamespace = "")
        Integer orgId,
        @WebParam(name = "relationshipType", targetNamespace = "")
        OrgRelationshipType relationshipType,
        @WebParam(name = "educationPeriodCd", targetNamespace = "")
        String educationPeriodCd,
        @WebParam(name = "orgType", targetNamespace = "")
        OrgType orgType,
        @WebParam(name = "orgSubTypeCd", targetNamespace = "")
        String orgSubTypeCd)
        throws BusinessServiceFaultException
    ;

    /**
     * 
     * @param appId
     * @param suppressRequestorEmail
     * @param orgDataChange
     * @param requestInfo
     * @return
     *     returns java.lang.Integer
     * @throws BusinessServiceFaultException
     */
    @WebMethod
    @WebResult(targetNamespace = "")
    @RequestWrapper(localName = "requestOrgDataChange", targetNamespace = "http://mainco.org/myws/", className = "org.mainco.myws.RequestOrgDataChange")
    @ResponseWrapper(localName = "requestOrgDataChangeResponse", targetNamespace = "http://mainco.org/myws/", className = "org.mainco.myws.RequestOrgDataChangeResponse")
    public Integer requestOrgDataChange(
        @WebParam(name = "appId", targetNamespace = "")
        Integer appId,
        @WebParam(name = "requestInfo", targetNamespace = "")
        OrgDataChangeRequestInfo requestInfo,
        @WebParam(name = "orgDataChange", targetNamespace = "")
        OrgDataChangeInfo orgDataChange,
        @WebParam(name = "suppressRequestorEmail", targetNamespace = "")
        Boolean suppressRequestorEmail)
        throws BusinessServiceFaultException
    ;

    /**
     * 
     * @param orgId
     * @param testProgram
     * @param appId
     * @param educationPeriodCd
     * @return
     *     returns org.mainco.myws.OrgReportsAvailableResponse
     * @throws BusinessServiceFaultException
     */
    @WebMethod
    @WebResult(targetNamespace = "")
    @RequestWrapper(localName = "getOrgReportsAvailable", targetNamespace = "http://mainco.org/myws/", className = "org.mainco.myws.GetOrgReportsAvailable")
    @ResponseWrapper(localName = "getOrgReportsAvailableResponse", targetNamespace = "http://mainco.org/myws/", className = "org.mainco.myws.GetOrgReportsAvailableResponse")
    public OrgReportsAvailableResponse getOrgReportsAvailable(
        @WebParam(name = "appId", targetNamespace = "")
        Integer appId,
        @WebParam(name = "orgId", targetNamespace = "")
        Integer orgId,
        @WebParam(name = "educationPeriodCd", targetNamespace = "")
            String educationPeriodCd,
        @WebParam(name = "testProgram", targetNamespace = "")
        TestProgramType testProgram)
        throws BusinessServiceFaultException
    ;

    /**
     * 
     * @param orgType
     * @param appId
     * @param educationPeriodCd
     * @param parentOrgId
     * @param orgSubTypeCd
     * @return
     *     returns java.util.List<org.mainco.myws.OrgChildrenList>
     * @throws BusinessServiceFaultException
     */
    @WebMethod
    @WebResult(targetNamespace = "")
    @RequestWrapper(localName = "getCrossProgramChildren", targetNamespace = "http://mainco.org/myws/", className = "org.mainco.myws.GetCrossProgramChildren")
    @ResponseWrapper(localName = "getCrossProgramChildrenResponse", targetNamespace = "http://mainco.org/myws/", className = "org.mainco.myws.GetCrossProgramChildrenResponse")
    public List<OrgChildrenList> getCrossProgramChildren(
        @WebParam(name = "appId", targetNamespace = "")
        Integer appId,
        @WebParam(name = "parentOrgId", targetNamespace = "")
        Integer parentOrgId,
        @WebParam(name = "educationPeriodCd", targetNamespace = "")
        String educationPeriodCd,
        @WebParam(name = "orgType", targetNamespace = "")
        OrgType orgType,
        @WebParam(name = "orgSubTypeCd", targetNamespace = "")
        String orgSubTypeCd)
        throws BusinessServiceFaultException
    ;

...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:16:47.733

这是一个错字：你已经 `<packageName>org.mainco.orgws</packageName>`在你的`pom.xml`但`OrganizationWebService`包中声明了`org.mainco.myws`吗？

# sql - 带有子选择的 clojureql 查询

> ID：13198271
> 
> 赞同：2
> 
> 时间：2012-11-02T15:26:23.763
> 
> 标签：sql, clojure, clojureql

给定一个具有以下结构的表：

```
CREATE TABLE transitions (id INT, ordering INT, item_id INT, action_id INT) 
```

是否有可能让 ClojureQL 生成这样的查询：

```
SELECT a.item_id, a.action_id
  FROM transitions a
 WHERE a.ordering = (SELECT MAX(b.ordering)
                       FROM transitions b
                      WHERE b.item_id = a.item_id
                    ) 
```

这将返回许多行，每个项目一个，指示该项目的最新转换。

我一直在考虑使用`join`，但担心我可能会遇到这个错误：[https ://github.com/LauJensen/clojureql/issues/114](https://github.com/LauJensen/clojureql/issues/114)

# c - 错误：“__attribute__”之前的预期主表达式；

> ID：13198272
> 
> 赞同：0
> 
> 时间：2012-11-02T15:26:36.230
> 
> 标签：c, solaris

我正在为 x86 的 Solaris 10 上编译一个 C 程序，这是一个链接的部分：

```
>yyerrlab1:/*Suppress GCC warning that yyerrlab1 is unused when no action*/
>#if defined (__GNUC_MINOR__)&&2093<=(__GNUC__*1000+__GNUC_MINOR__) 
> __attribute__((__unused__))
>#endif
>goto yyerrlab2; 
```

代码写在一个名为 yacc.y 的文件中。当我通过makefile编译程序时，结果是：

```
>bison -d -p syn yacc.y
>yacc.y:conflicts:7shifts/reduce
>mv yacc.tab.h yacc.h
>mv yacc.tab.c yacc.c
>yacc.tab.c: in function 'int synparse()';
>yacc.tab.c:1543:error:expected primary-expression before "__attribute__"
>yacc.tab.c:1543:error:expected ";" before "__attribute__" 
```

代码有什么问题？我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T15:44:14.603

[该代码使用称为属性](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html#Function-Attributes)的特定于 GCC 的语言扩展来指示标签可能未被使用。通常，GCC 会针对未使用的标签发出警告，因为它可能表明存在错误，但在这种情况下，由于代码是由 YACC 自动生成的，因此不确定它是否被使用。因此，此属性会在未使用时抑制警告。

您使用的编译器似乎不支持该`__attribute__`语法。该`#if`测试应该可以防止这种情况发生，但显然测试失败了，要么是因为您使用了一些不支持它的奇怪 GCC 变体，要么您使用的是假装是 GCC 的不同编译器。

要修复它，请尽可能切换到现代 GCC 版本，或者`#if`使用您的编译器将测试修改为 false。快速而肮脏的解决方法是`#if`完全删除标签，因为`__attribute__`标签不是正确性所必需的，它只是为了删除潜在的编译器警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:43:10.833

作为一个快速&肮脏的解决方法，从以下行中删除`yacc.y`：

```
#if defined (__GNUC_MINOR__)&&2093<=(__GNUC__*1000+__GNUC_MINOR__) 
 __attribute__((__unused__))
#endif 
```

使用此修改编译您的源代码时，它会导致一个关于未使用标签的警告`yyerrlab1`，您可以默默地忽略它。

此解决方案不会影响代码的预期功能。

# jquery - fadeIn()/fadeOut() 的问题；jQuery

> ID：13198274
> 
> 赞同：0
> 
> 时间：2012-11-02T15:26:50.047
> 
> 标签：jquery, fadein, fadeout, eventtrigger

通过“oncklick”功能获得了名为“notebutt”的按钮

功能很简单，用户点击按钮，div为fadeIn()，再次点击，div必须fadeout()；

```
 notebutt.bind("click", function () {
        var notediv = $(this).parent().find("div.notediv");
        // checking is notediv exist already, if not, creating one and do fadeIn(150);
        if (!notediv) {
        notediv = $('<div class="notediv" contenteditable="true"></div>');
        notediv.appendTo($(this).parent());
        notediv.offset({top: posT-47}).fadeIn(150);
        } else {
        // if got notediv created before, i must show or hide it with hideorshow(notediv);
                hideorshow(notediv);
        }

});
    // func that check's is div was showned or not
function hideorshow(div){
if ($(div).is(':visible')) {
    //hide if visible
    div.fadeOut();
} else {
        div.offset({top: posT-47});
        div.fadeIn();
}
}; 
```

乍一看，它应该像应该的那样工作，但是在按钮上点击 5-10 次后都出错了，div 在点击时随机闪烁，就像 fadeIn 和 fadeOut 同时运行一样，或者彼此有什么方法可以进行一些适当的触发检查 div 状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:31:18.427

在您的示例中，notediv 已经是一个 jquery 对象：

```
function hideorshow(div){
if (div.is(':visible')) { //replace $(div) by div
    //hide if visible
    div.fadeOut();
} else {
        div.offset({top: posT-47});
        div.fadeIn();
}
}; 
```

# c# - 控制台应用程序通过表单应用程序传入输入

> ID：13198276
> 
> 赞同：0
> 
> 时间：2012-11-02T15:26:54.223
> 
> 标签：c#, parameters, console-application

> **可能重复：**
> [从 C# 向控制台应用程序传递参数](https://stackoverflow.com/questions/3985088/passing-arguments-to-a-console-application-from-c-sharp)

我有一个从 Windows 窗体应用程序运行的控制台应用程序。目前它运行一个名为 dnaml.exe 的进程我需要点击 y 然后的可执行文件，有没有办法让我的 Windows 表单传递这个信息？我能够使用 Process 对象从表单启动它。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T15:30:12.753

您可以将其写入对象`StandardInput`的。`Process`

[http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.redirectstandardinput.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.redirectstandardinput.aspx)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-02T15:29:38.087

使用[Process.Start](http://msdn.microsoft.com/en-us/library/h6ak8zt5.aspx)的重载。

# android - Android：SQLite 插入异常

> ID：13198290
> 
> 赞同：-1
> 
> 时间：2012-11-02T15:27:47.653
> 
> 标签：android, sqlite, insert

大家好，我正在尝试找出我的代码中的插入异常。在开始之前，我开始插入字符串 EditText 我想先放入我自己的字符串。但是我从 logcat 收到错误消息。它们都是字符串类型，还有一个主键行也设置为自动增量。有没有人指导一下。

数据库活动

```
private static class DbHelper extends SQLiteOpenHelper {

        public DbHelper(Context context){
            super(context, DATABASE_NAME, null, DATABASE_VERSION);

        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL("CREATE TABLE " + DATABASE_TABLE +  " (" +
                        KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                        KEY_MODULECODE + " TEXT, " +
                        KEY_MODULENAME + " TEXT); "
                    );
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub
            db.execSQL("DROP TABEL IF EXISTS " + DATABASE_TABLE);
            onCreate(db);
        }
    }

    public database(Context c){
        myContext = c;
    }

    public  database openToWrite()throws SQLException{
        myHelper = new DbHelper(myContext);
        moduleDatabase = myHelper.getWritableDatabase();
        return this;
    }

    public  database openToRead()throws SQLException{
        myHelper = new DbHelper(myContext);
        moduleDatabase = myHelper.getReadableDatabase();
        return this;
    }
    public void close(){
    myHelper.close();
    }

    public void createEntry(String moduleCode, String moduleName) throws SQLException {
        ContentValues cv = new ContentValues();
        cv.put(KEY_MODULECODE,moduleCode);
        cv.put(KEY_MODULENAME,moduleName);
        moduleDatabase.insert(DATABASE_TABLE,null,cv);
        // TODO Auto-generated method stub

    }

    public Cursor getData() {

        String[] columns = new String [] {KEY_ROWID,KEY_MODULECODE, KEY_MODULENAME};
        Cursor c = moduleDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);

        return c;
    } 
```

}

主要活动

```
public class MyCourses extends Activity {

    static final String TEST = "com.example.mycoursetimetable.TEST";
    String [] MODULE;
    database MODULEDATABASE;  
    ListView listContent;
    Boolean didItWork;

    Cursor cursor;

        @Override
        public void onCreate(Bundle savedInstanceState) 
        {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_my_courses);

       listContent =(ListView)findViewById(R.id.list);
       MODULEDATABASE = new database(MyCourses.this);

       MODULEDATABASE.openToWrite();
       MODULEDATABASE.createEntry("TestCode", "TestName");
       MODULEDATABASE.close();

       MODULEDATABASE.openToRead();
       cursor = MODULEDATABASE.getData();
       MODULEDATABASE.close();

       listContent = (ListView)findViewById(R.id.list);

       TestCursorAdapter ca = new TestCursorAdapter(this, cursor, 0);

       listContent.setAdapter(ca);

        }

} 
```

光标适配器

```
public class TestCursorAdapter extends CursorAdapter {

    private LayoutInflater viewInflater;
    boolean didItWork;

    public TestCursorAdapter(Context context, Cursor c, int flags) {
        super(context, c, flags);
        // TODO Auto-generated constructor stub
        viewInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public void bindView(View v, Context context, Cursor c) 
    {

        TextView text_modulecode = (TextView)v.findViewById(R.id.labelModuleCode);
        TextView text_modulename = (TextView)v.findViewById(R.id.labelEditModuleFull);

        text_modulecode.setText(String.valueOf(c.getColumnIndex(database.KEY_MODULECODE)));
        text_modulename.setText(String.valueOf(c.getColumnIndex(database.KEY_MODULENAME)));

    }

    @Override
    public View newView(Context context, Cursor c, ViewGroup parent) {
        View v = viewInflater.inflate(R.layout.listcourses, parent, false);
        return v;
    }

} 
```

LogCat 第 80 行引用 moduleDatabase.insert(DATABASE_TABLE,null,cv);

```
10-21 22:42:19.812: E/Database(19591): Error inserting module_name=TestName module_code=TestCode
10-21 22:42:19.812: E/Database(19591): android.database.sqlite.SQLiteConstraintException: error code 19: constraint failed
10-21 22:42:19.812: E/Database(19591):  at android.database.sqlite.SQLiteStatement.native_execute(Native Method)
10-21 22:42:19.812: E/Database(19591):  at android.database.sqlite.SQLiteStatement.execute(SQLiteStatement.java:66)
10-21 22:42:19.812: E/Database(19591):  at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1426)
10-21 22:42:19.812: E/Database(19591):  at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1286)
10-21 22:42:19.812: E/Database(19591):  at com.example.mycoursetimetable.database.createEntry(database.java:80)
10-21 22:42:19.812: E/Database(19591):  at com.example.mycoursetimetable.MyCourses.onCreate(MyCourses.java:48)
10-21 22:42:19.812: E/Database(19591):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-21 22:42:19.812: E/Database(19591):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
10-21 22:42:19.812: E/Database(19591):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
10-21 22:42:19.812: E/Database(19591):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
10-21 22:42:19.812: E/Database(19591):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
10-21 22:42:19.812: E/Database(19591):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-21 22:42:19.812: E/Database(19591):  at android.os.Looper.loop(Looper.java:123)
10-21 22:42:19.812: E/Database(19591):  at android.app.ActivityThread.main(ActivityThread.java:4363)
10-21 22:42:19.812: E/Database(19591):  at java.lang.reflect.Method.invokeNative(Native Method)
10-21 22:42:19.812: E/Database(19591):  at java.lang.reflect.Method.invoke(Method.java:521)
10-21 22:42:19.812: E/Database(19591):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
10-21 22:42:19.812: E/Database(19591):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
10-21 22:42:19.812: E/Database(19591):  at dalvik.system.NativeStart.main(Native Method)
10-21 22:42:19.862: E/Cursor(19591): Invalid statement in fillWindow() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:16:20.987

你得到光标错误：`Invalid statement in fillWindow()`因为一个不稳定的数据库设置。实际上，您关闭了数据库两次，然后将关闭的数据库附加到列表视图中，从而将非活动光标附加到列表视图中，这似乎不对吗？最佳实践通常说您关闭光标，然后关闭数据库对象 - 按此顺序。通常，当您完成查询时，您可以将它们放在任何地方，但是由游标适配器支持的列表视图是特殊的。在列表视图打开并且您正在访问它的整个过程中，您需要打开光标，以便数据源像任何数组对象或任何数据容器一样可用。否则，您将收到一条错误消息`attempting to re-open an already-closed object`。*因此，恕*我直言，最好的放置位置是在您的`onDestroy()`方法中，当您的列表视图无论如何都被根除时。

```
@Override
    protected void onDestroy() {
        super.onDestroy();
        cursor.close();
        MODULEDATABASE.close();

    } 
```

现在，我必须告诉你，我对你在同一个活动中打开数据库的两个实例有些不满。我可能会因为这样说而遭到强烈反对，但`.getWritableDatabase()`实际上`.getReadableDatabase()`打开了相同的连接，它们并没有太大的不同。关闭一个连接以打开另一个连接根本不是一个好习惯，即使这看起来很谨慎。我并不是说您应该从应用程序中完全删除一种方法（getReadable），但是在同一个活动生命周期中打开这两种方法是为了争取花生。现在更是如此，因为我们刚刚确定光标必须在活动的整个过程中都是打开的。好吧，既然我们在讨论什么是必要的，什么不是，你实例化`listContent`了两次。

很抱歉解释冗长，但我想确保细节已经清楚。

# javascript - 如何修改 Tinypop 脚本以使 div 内容被删除而不是被隐藏？

> ID：13198292
> 
> 赞同：-1
> 
> 时间：2012-11-02T15:27:54.430
> 
> 标签：javascript, jquery, growl

我正在实施咆哮通知系统。我检查的大多数脚本都`hide()`在通知出现后使用一种方法。这使得 DOM 在超时后仍然存在于页面中。当我们有很多通知时，DOM 数量会不断增加。有人可以帮我处理这个脚本，这样我就可以真正删除 DOM 元素而不是设置一个`display:none`?

脚本：http: [//iabot.net/demo/tinypop/tinypop-1.0.js](http://iambot.net/demo/tinypop/tinypop-1.0.js)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:34:01.567

代替

```
// Hide the popup
hide: function() {
    fadeout.apply(this);
} 
```

和

```
// Remove the popup
hide: function() {
    this.parentNode.removeChild(this);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:38:59.913

我对这个特定的脚本库没有任何经验，但在我看来，您可以将底部原型块中的隐藏函数重写为此，这将从 DOM 中删除元素。

```
// Hide the popup
hide: function() {
    //fadeout.apply(this);
    this.parentNode.removeChild(this);
} 
```

（您不能直接删除元素，根据这个有用的 SO 答案[Remove element by id](https://stackoverflow.com/questions/3387427/javascript-remove-element-by-id)，因此您必须去其父级并要求删除其子级。）

显然这没有任何错误检查（它应该！）。

# php - 来自 SOAP API 的意外响应

> ID：13198294
> 
> 赞同：1
> 
> 时间：2012-11-02T15:28:06.327
> 
> 标签：php, xml, soap, soap-client

因此，我正在尝试在 php 中使用 SoapClient，但在构建 XML 时遇到了问题。我正在使用一个期望以下 XML 的肥皂 API：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"     xmlns:app="http://app.whatever.com/">
 <soapenv:Header/>
  <soapenv:Body>
   <app:WhateverCleanseAddress>
   <app:address>
    <address Address1="9100 Wilshire Blvd" Address2="Ste 900" Address3="" City="Beverly Hills" State="CA" Zip="90212" Country="USA"/>
   </app:address>
   </app:WhateverCleanseAddress>
 </soapenv:Body>
</soapenv:Envelope> 
```

我已经用soapui 做了一堆测试，这会返回正确的响应，但是我用SoapClient 进行的实际调用只返回一个错误。这是我提交的内容：

```
$addressdata = "<address Address1=\"9100 Wilshire Blvd\" Address2=\"Ste 900\" Address3=\"\" City=\"Beverly Hills\" State=\"CA\" Zip=\"90212\" Country=\"USA\" />";
$wsdl = 'http://www.whatever.com/WhateverWebSSAdapter.asmx?WSDL';

$client = New SoapClient($wsdl, array("trace" => 1, "exceptions" => 0));

$apiData = array(
"Address" => $addressdata
);

echo "<pre>";
print_r($client->WhateverCleanseAddress($apiData));
echo "</pre>"; 
```

我已经在网上搜索了一个很好的教程来形成这些请求，但是我没有任何运气找到显示 1:1 关系的东西，显示“如果你通过了 soap 客户端，它将提交这个”。我使用同样的技术来处理另一个完美运行的 api 调用......但在这里我看不出我做错了什么。

# powershell - 以 Select-String 作为添加内容的 Add-Content？

> ID：13198296
> 
> 赞同：3
> 
> 时间：2012-11-02T15:28:32.863
> 
> 标签：powershell

我的意图是查看文本文件 (C:\Users\pmaddox\Desktop\VaughnResers 资格 text.txt) 并找到特定日期并将包含所述日期的整行输入到第二个文件 (VaughnReserBatTest.txt) 中。我希望通过使用 Add-Content 的格式（位置“输入”）和 Select-String 的管道 Select-Object Line 将原始字符串从文本行带入 Add-Content cmdlet 来实现这一点，但到目前为止，我现在很幸运。 ..

我当前的脚本如下所示：

```
Add-Content \\Waqmed1\pmaddox$\VaughnReserBatTest.txt Select-String  C:\Users\pmaddox\Desktop\VaughnResers eligibility text.txt  -pattern "10/11/1988" | Select-Object Line 
```

我对powershell相当陌生，我相信我的答案在“创建和对象”方向或“修复你该死的代码”方向的某个地方。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:42:44.530

尝试

```
get-contentc "C:\Users\pmaddox\Desktop\VaughnResers eligibility text.txt" |
select-string -Pattern '10/11/1988' ) | select -expa line | 
add-content \\Waqmed1\pmaddox$\VaughnReserBatTest.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T15:37:58.673

假设包含所需行的文件名为 a.txt，而要写入所需行的文件名为 b.txt：

```
Get-Content .\a.txt | Select-String "10/11/1988" | Add-Content .\b.txt 
```

请注意，来自 a.txt 的所有匹配行都将写入 b.txt，因此如果有多个匹配项，那么您将向 b.txt 写入多个条目。如果您只想要第一个匹配项，则可以使用以下内容：

```
Get-Content .\a.txt | Select-String "10/11/1988"  | Select-Object -First 1 | Add-Content .\b.txt 
```

# mysql - 只需要对查询中的特定行进行分组

> ID：13198298
> 
> 赞同：0
> 
> 时间：2012-11-02T15:28:39.557
> 
> 标签：mysql, sql

请考虑以下简化的 MySQL 表：

```
id  | docID  | docTypeID | makeID | desc
1   | 1      | 1         | 1      | doc 1
2   | 1      | 1         | 2      | doc 2
3   | 2      | 2         | 1      | doc 3
4   | 3      | 3         | 2      | doc 4
5   | 1      | 1         | 4      | doc 5
6   | 2      | 2         | 5      | doc 6
7   | 4      | 1         | 1      | doc 7 
```

在此示例中，docID、docTypeID 和 makeID 都是外键。

当 docTypeID 1 的文档与多个品牌相关联时，我需要将这些文档组合在一起并返回一个特殊的品牌描述（“找到多个品牌”）。

我需要为这个示例表返回的是：

```
id  | docID  | docTypeID | makeID                | desc
1   | 1      | 1         | multiple makes found  | doc 1
3   | 2      | 2         | 1                     | doc 3
4   | 3      | 3         | 2                     | doc 4
6   | 2      | 2         | 5                     | doc 6
7   | 4      | 1         | 1                     | doc 7 
```

请注意，在 id 7 的情况下，仅找到一个 make，因此没有执行分组。

我不确定如何根据标准限制分组，或者是否可能。我希望这里的一位 SQL 天才可以提供帮助。如果需要任何其他信息，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T15:38:59.887

你可以写：

```
SELECT MIN(id) AS id,
       docID,
       docTypeID,
       CASE WHEN COUNT(1) > 1
            THEN 'multiple makes found'
            ELSE MIN(makeID)
        END AS makeID,
       MIN(desc) AS desc
  FROM simplified_mysql_table
 GROUP
    BY docID,
       docTypeID
       CASE WHEN docTypeID = 1
            THEN 0
            ELSE id
        END
; 
```

（注意`MIN(id)`and`MIN(desc)`可能不是来自相同的基础记录。如果这是一个问题，那么您需要稍微调整一下上面的内容。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T15:39:12.240

一个简单的分组，例如：

```
select min(id),docID,docTypeID,
  case when count(1) > 1 then 'multiple makes found' else min(makeID) end AS makeID, 
  min(`desc`) 
 from docs_table group by docID,docTypeID; 
```

应该这样做。假设`doc 6`和`doc 3`在相同的情况下。用[sqlFiddle](http://www.sqlfiddle.com/#!2/1d1be/10)验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T15:37:42.930

尝试：

```
Select id, DocId, DocTypeId, 
  Case MakeCount When 1 Then MakeId 
      Else 'multiple makes found' End MakeId, 
  Desc
From  (Select Min(id) Id, DocId, DocTypeId, 
            Count(Distinct MakeId) MakeCount, 
            Min(MakeId) MakeId, Min(desc) Desc
       From TableName
       Group By DocId, DocTypeId) 
```

# ruby-on-rails - 是否可以在不使用环境变量的情况下向“rake cucumber”发送参数？

> ID：13198300
> 
> 赞同：7
> 
> 时间：2012-11-02T15:28:39.663
> 
> 标签：ruby-on-rails, cucumber, rake

我看到可以将参数传递给 rake 任务：

```
task :task_name, :arg_name do |t, args| 
```

我想做的是将参数传递给黄瓜耙任务：

```
Cucumber::Rake::Task.new({:tags => 'db:test:prepare'}) do |t, args|
  t.cucumber_opts = ['--tags', #args?]
end 
```

这种事情可能吗？这样我可以做到：

```
rake cucumber:tags['tag1', 'tag2', ...] 
```

并让它只运行那些标签。大多数消息来源说要使用环境变量，我已经这样做了，但我更愿意以“正确”的方式提供参数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-09T00:10:21.587

您可以通过执行以下操作来使其工作：

```
task :task_name, :arg1 do |t, args|
  Cucumber::Rake::Task.new(:run) do |t|
    t.cucumber_opts = "--format pretty --tags @#{args[:arg1]}"
  end
  Rake::Task[:run].invoke()
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-21T14:37:52.400

这样做的一种方法是通过像这样的环境变量：`rake cucumber:tags TAGS=tag1,tag2`然后在你的 rake 任务中只是 parse `ARGV`。

```
tags = ARGV[1].gsub(/.+=/, '')

Cucumber::Rake::Task.new({:tags => 'db:test:prepare'}) do |t, args|
  t.cucumber_opts = ['--tags', tags]
end 
```

你也可以像这样让它更灵活

```
tags_index = ARGV.index {|a| a.start_with?('TAGS') }
tags = ARGV[tags_index].gsub(/.+=/, '') 
```

但可能你会更好地使用[OptionParser](http://ruby-doc.org/stdlib/libdoc/optparse/rdoc/classes/OptionParser.html)之类的东西。

# javascript - 如何引用显示的文本（解析的 HTML） - 它是 Javascript 客户端中可用的对象还是元素

> ID：13198304
> 
> 赞同：0
> 
> 时间：2012-11-02T15:28:45.400
> 
> 标签：javascript, object, browser, dom-events

**这是一个非常具体的问题**，与此处提出的更广泛的问题有关：

[抓取/复制/转换为变量：谷歌翻译文本（写入其他页面）客户端](https://stackoverflow.com/questions/13181794/grab-copy-convert-to-variable-google-translated-text-write-to-other-page-clie)

我读过 DOM（维基）：

> 为了呈现诸如 HTML 页面之类的文档，大多数 Web 浏览器使用类似于 DOM 的内部模型。每个文档的节点都组织在一个树结构中，称为 DOM 树，最顶层的节点称为“文档对象”。当 HTML 页面在浏览器中呈现时，浏览器会将 HTML 下载到本地内存中并自动解析它以在屏幕上显示该页面。DOM 也是 JavaScript 在 HTML 页面中传输浏览器状态的方式。

这很有趣，但它没有说明输出是“作为对象”的。

**然而，我们可以突出显示输出**或显示的文本，然后复制和粘贴。因此，highlight 和 copy 命令必须知道如何访问输出 - 因此它必须是一个对象**（是/否？）**。

如果这些命令可以访问输出……这就引出了一个问题：

**Javascript 也可以访问输出吗？** 如果是这样......它叫什么，它的脚本路径是什么。

例如典型的例子：

```
var x = document.getElementById("textarea_id").value; 
```

我可能需要：

```
var x = path_to_parsed_output.value; 
```

这个问题的答案必须在那里......但我已经查看了一些很好的参考网站，似乎没有一个可以直接解决这个问题。

我希望一些知识渊博的人简单地说一下，什么可能是一个明显的答案（如果你有知识就很明显）。

:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:22:27.587

是和不是。是的，您几乎可以通过 JavaScript 在 DOM 中访问任何您想要的东西。

但是没有对比根节点更靠后的节点的通用引用（同样，有几个例外）。

您要么必须使用树导航算法遍历 DOM，直到找到所需内容，要么必须为 HTML 节点提供定义特征并使用 DOM 访问方法，该方法将为您提供单个元素使用该属性 ( `id`) 或具有该属性 ( ) 的节点列表，`class`您必须对其进行迭代才能找到所需的内容。

...所以诀窍是找到您想要的节点的定义特征，以尽可能轻松地访问它。

但是，DOM 节点与对象并不是 1:1 的。
这意味着您对它作为对象所做的更改可能不会反映在 HTML 中，反之亦然（除非您使用的是特定于 DOM 的方法）。

关于 DOM 对象支持的内容，请阅读 Mozilla Developer Network 上的教程。
这是一个巨大的话题，不同的浏览器支持不同的东西。

# android - 在 Ajax 工作时点击 Android 后退按钮 (Jquery/PhoneGap)

> ID：13198306
> 
> 赞同：2
> 
> 时间：2012-11-02T15:28:54.100
> 
> 标签：android, jquery, ajax

假设我在页面加载后立即启动 Ajax 请求。如果我在 Ajax 完成之前快速按下后退按钮。“错误”事件将触发。应该的。

但是我怎么知道这个错误是“有效的”，而不是由用户点击安卓手机上的后退按钮引起的？这可能吗？

我正在使用 Jquery/PhoneGap。

# grid - winrt Grid RowDefinitions 更改取决于 VisualState

> ID：13198313
> 
> 赞同：0
> 
> 时间：2012-11-02T15:29:20.270
> 
> 标签：grid, windows-runtime, visualstates

VisualState 更改时是否可以更改 Grid.RowDefinition？我可以在故事板中提取我需要的样式或模板中的 Grid.RowDefinitions 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:06:25.347

您可以编写一个附加的行为/属性，根据参数更改网格行/列定义，但您也可以使用 WrapGrid、VariablieSizedWrapGrid 之类的东西，或者正如我在对您单独问题的回答中所说的那样 - 您可以单独使用具有不同布局的网格并根据视觉状态切换可见性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-25T22:14:56.837

在你的 VisualState.Setters

```
<VisualState.Setters>
               <Setter Target="row1.Height" Value="*"/>
</VisualState.Setters> 
```

在您的 Grid.RowDefinitions 中：

```
<Grid.RowDefinitions>
                <RowDefinition x:Name="row1" Height="auto"/>
</Grid.RowDefinitions> 
```

# c# - HttpWebResponse 不返回 404

> ID：13198316
> 
> 赞同：1
> 
> 时间：2012-11-02T15:29:32.417
> 
> 标签：c#, asp.net

我正在寻找网站上的一系列图像，这些图像可能存在也可能不存在，使用`HttpWebRequest`. 但是，即使使用不存在的图像 URL，响应仍然包含 200 OK 状态代码。

被检查的网站都使用自定义 404 页面，但在使用 Firebug/Fiddler 检查时返回正确的 404 代码。

```
public HttpStatusCode GetHeaders(string url)
{
    HttpStatusCode result = default(HttpStatusCode);

    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
    //request.AllowAutoRedirect = false;
    //request.Method = "GET";
    try
    {
        using (var response = request.GetResponse() as HttpWebResponse)
        {
            if (response != null)
            {
                result = response.StatusCode;
                response.Close();
            }
        }

        return result;
    }

    catch (Exception)
    {                    
        return HttpStatusCode.NotFound;                    
    }
} 
```

有任何想法吗？两周来，我一直试图断断续续地解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:38:20.237

服务器是否有可能将您重定向到可用的“未找到”页面？尝试停用自动重定向。

```
 webRequest.AllowAutoRedirect = false; 
  ...
  webRequest.Timeout = 1000; 
```

然后检查重定向。当这不起作用时，我想你必须解析网站并寻找像“未找到”这样的字符串......

# asp.net-mvc - Telerik Grid MVC中DetailView内的模板列

> ID：13198317
> 
> 赞同：0
> 
> 时间：2012-11-02T15:29:32.653
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, telerik, telerik-grid

页面加载时，我的嵌套模板列未出现在我的标记中。我正在尝试在另一个父网格的 DetailView 中加载带有模板列的网格。我可以看到我的数据正在传递，并且显然出现了 UnitPeriod 的“名称”，但在我的模板列中没有任何内容，因此看起来数据正在传递到网格中。我用萤火虫检查了源代码，该列总是加载为空。任何人都可以发现为什么？

```
<div>
@(Html.Telerik().Grid<RentableUnit>()
    .Name("RentableUnits")
    .Columns(columns =>
    {
        columns.Bound(e => e.UnitID).Hidden();
        columns.Bound(e => e.Name).Width(75);
    })
    .ClientEvents(events => events.OnRowDataBound("employees_onRowDataBound")
                            .OnDetailViewExpand("unit_onDetailViewExpand")
                            .OnDetailViewCollapse("unit_onDetailViewCollapse"))
    .DetailView(details => details.ClientTemplate(
        Html.Telerik().Grid<UnitPeriod>()
            .Name("UnitPeriod_<#= UnitID #>")
            .Columns(columns =>
                {
                    columns.Bound(o => o.Name);
                    columns.Template(@<text>
                     @foreach (Day day in item.Days)
                     {
                         if (!day.IsRentable)
                         {
                             <img src="../../Content/Images/Houses/icon_lokad.png"/>
                         }
                         else
                         {
                             <img src="../../Content/Images/Houses/icon_opid.png"/>
                         }
                     }
             </text>);
            })
            .ClientEvents(events => events.OnRowDataBound("orders_onRowDataBound"))
            .DataBinding(dataBinding => dataBinding.Ajax()
            .Select("SelectedUnitPeriod", "Home", new { unitId = "<#= UnitID #>" }))
            .ToHtmlString()
    ))
    .DataBinding(dataBinding => dataBinding.Ajax().Select("RentableUnits", "Home"))
    .Sortable()
    )
</div>

<script type="text/javascript">
    var derpinski = "";
    function expandFirstRow(grid, row) {
        if (grid.$rows().index(row) == 0) {
            grid.expandRow(row);
        }
    }

function loadTabGridContent(e) {
    var url = '/Home/TabGridContent/';
    $.ajax({
        type: 'GET',
        dataType: 'html',
        url: url,
        success: function (data) {
            alert('success');
            $('#TabGridContent').html(data);
        }
    });
}

function employees_onRowDataBound(e) {
    var grid = $(this).data('tGrid');
    expandFirstRow(grid, e.row);
}

function orders_onRowDataBound(e) {
    var grid = $(this).data('tGrid');
    expandFirstRow(grid, e.row);
}

function unit_onDetailViewExpand(e) {
    var mstRow = e.masterRow;
    var unitNumber = mstRow.cells[1].innerHTML;
    derpinski = derpinski + unitNumber + ",";
}

function unit_onDetailViewCollapse(e) {
    var mstRow = e.masterRow;
    var unitNumber = mstRow.cells[1].innerHTML;
    derpinski = derpinski.replace(unitNumber + ",", "");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:14:27.613

我发现嵌套网格不可能做到这一点。

我最终在我的自定义类中创建了一个字符串变量，并在 Telerik 网格中使用了 Bound 机制并在网格中编码了 html 字符串。这不是最漂亮的解决方案，但它可以满足我的需要。

像这样的东西：

```
[GridAction]
public ActionResult SelectedUnitPeriod(int unitId, string startDate)
{
    // Some stuff (just to abbreviate
    unitPeriodName = "";  // Created the row as string
    daystr = "";          // also with this one
    rentableUnitPeriods.Add(new RentableUnitPeriod(unitPeriod.UnitId, unitPeriodName, dayStr, unitPeriod.PrimaryImg));
    return View(new GridModel(rentableUnitPeriods));
} 
```

这就是我的诀窍:)

# javascript - javascript中的核心/基本功能是什么

> ID：13198322
> 
> 赞同：-4
> 
> 时间：2012-11-02T15:29:43.053
> 
> 标签：javascript

javascript是否具有一组核心功能。如果是这样，我在哪里可以找到它？

例如，Java 拥有所有 java.lang 包，它们实现了 String 等基本语言功能。在 javascript 中实现的等价函数（如 window.alert()）在哪里？每个 javascript 实现都附带一组核心/基本功能吗？这些功能是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:56:52.163

DOM 是单独记录的，就像[DOM 窗口参考页](https://developer.mozilla.org/en-US/docs/DOM/window)一样。（当我第一次开始认真使用 JavaScript 时，这也让我感到困惑。）

# ios - UICollectionViewController 如何调整单元格的大小？

> ID：13198323
> 
> 赞同：4
> 
> 时间：2012-11-02T15:29:52.630
> 
> 标签：ios, iphone, objective-c, uicollectionview, uicollectionviewcell

通过搜索如何在`UICollectionViewController`. 有一个`UITableViewController`方法：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
```

但是`UICollectionViewController`我找不到以编程方式执行此操作的方法。

我有一个，`UICollectionViewCell`但它显然不存在。

如何更改 a 中单元格的大小`UICollectionViewController`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T15:37:26.037

看起来你需要使用 UICollectionViewFlowLayout 和 UICollectionViewFLowLayoutDelegate 并实现

```
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath 
```

查看 Ray Wenderlich 教程： [http ://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12](http://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12)

# javascript - jquery/html失败，弹窗代码

> ID：13198326
> 
> 赞同：-2
> 
> 时间：2012-11-02T15:29:59.283
> 
> 标签：javascript, jquery, html, function, popup

我有 Jquery Jplayer 流式传输在线收音机，我有一个弹出按钮来打开收音机的新实例，让用户在每次页面加载时暂停内置收音机播放器浏览网站。

下面的代码是我试图让新窗口位于屏幕中央的 javascript 函数。我确实工作了......现在由于某种原因没有。

该链接在父页面加载时隐藏，并且不会被另一个图像隐藏（效果很好）。

```
 function ListenPopOut() {
    var pageURL = "Radio.php";
    var title = "Radio";
    var w = 436;
    var h = 340;

    var left = (screen.width/2)-(w/2);
    var top = (screen.height/2)-(h/2);
    window.open (pageURL, title, 'toolbar=no, location=no, directories=no, 
    status=no, menubar=no, scrollbars=no, resizable=no, width='+w+', 
    height='+h+', top='+top+', left='+left, false);
 };

<a href="javascript:;" class="popup-foot" onclick="ListenPopOut()"
 title="popup">popup</a> 
```

这是一个[JSFiddle](http://jsfiddle.net/zbNaV/4/)。有任何想法吗？怎么了？

更新：原始代码中缺少指向 jquery 的链接，抱歉新手错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:12:45.987

您的小提琴不起作用，因为您收到此错误

```
Uncaught ReferenceError: ListenPopOut is not defined 
```

错误的原因，你在小提琴上运行它，意味着方法是本地的。将其更改为head，它将运行。

[更新了 JSFiddle](http://jsfiddle.net/zbNaV/9/)

# iphone - 资源未在 iPhone 中显示

> ID：13198328
> 
> 赞同：-1
> 
> 时间：2012-11-02T15:30:06.573
> 
> 标签：iphone, ios

我已经构建了一个具有多个图像文件的应用程序。当我在模拟器中运行项目时，它已正确显示。但是当我尝试在 iPhone 中运行时，它会出错

> “找不到文件：/Users/wipro-mac1/Desktop/Work@ce/PleatcoApp/PleatcoApp/Resources/images/02-SEARCH-STORE-LOCATOR_03.png”

不显示每个 png 文件和图像。

应该是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:35:48.993

> “找不到文件：/Users/wipro-mac1/Desktop/Work@ce/PleatcoApp/PleatcoApp/Resources/images/02-SEARCH-STORE-LOCATOR_03.png”

这个错误出现在 iPhone 上的事实意味着您提供了一个非常糟糕的加载图像的路径。`/Desktop/`例如在 iPhone 文件系统上不存在。

您不提供文件路径来加载 iOS 中的资源，而是将文件添加到 Application Bundle，然后简单地按名称引用它们。例如，要在代码中加载图像，您需要执行以下操作：

1.  将`.png`文件添加到项目中。通过将其拖入 Xcode 并将其添加到您的预期目标来执行此操作。（通常是应用程序名称）。

    您将看到此屏幕，通常这应该可以满足您的需要。

    ![将文件复制到 Xcode 提示符中](../Images/85b743c4b84187a5230e652c4923cda8.png)

2.  在代码中，使用以下内容加载它：

    ```
    [UIImage imageNamed:@"02-SEARCH-STORE-LOCATOR_03"]; 
    ```

3.  使用您认为合适的图像。

没有任何代码可看，我无法完全帮助解决问题，但这是一个好的开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:21:43.750

这可能是一个区分大小写的文件名错误：

在模拟器中，如果你有文件“aFile.png”并将其加载为“afile.png”它工作正常

但在设备上找不到文件：iPhone/iPad 区分大小写

# android - onConfigurationChanged 不起作用

> ID：13198340
> 
> 赞同：-1
> 
> 时间：2012-11-02T15:30:43.810
> 
> 标签：android

我想听听方向变了

但它在 SDK 4.0 中不起作用

我发现 Manifest 必须修改 android:configChanges="orientation"

到 android:configChanges="orientation|screenSize"

但它有一个错误：

[清单的屏幕截图](https://dl.dropbox.com/u/90416799/screen_shot2.png)

然后我发现我在 Manifest 中没有“screenSize”选项

[清单中配置选项的屏幕截图](https://dl.dropbox.com/u/90416799/screen_shot.png)

错误信息是

`error: Error: String types not allowed (at 'configChanges' with value 'orientation| ScreenSize').`

我的清单有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:54:38.050

在清单中，您必须添加以下行。您输入了错误的语法，这就是它显示错误的原因。

```
android:configChanges="orientation|keyboardHidden" 
```

# joomla - 如何在 joomla 中向 k2 项目添加介绍性文本

> ID：13198346
> 
> 赞同：0
> 
> 时间：2012-11-02T15:31:04.537
> 
> 标签：joomla, add, joomla-k2

我认为我的问题很简单。在 k2 演示站点[http://demo.getk2.org/category-blog](http://demo.getk2.org/category-blog) 中，每篇文章都有一个与文章全文不同的介绍文本。我怎样才能添加这样的介绍性文字，因为我看不到任何类似的选项。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T15:52:50.610

您可以在查看文章时结合使用*Read More按钮和隐藏**Introtext*：

1.  *使用Read More*将介绍文本与文章应包含的*文本*分开。
**   在右侧，找到*Item view options*，然后将*Introtext*更改为*Hide*。*

 *![将文本与阅读更多内容分开](../Images/2ba03d341af5d13cf1a592905090f42e.png) ![隐藏简介](../Images/a67c51f2ae9e9bb8e6ea4c7fbf2e16fe.png)*

# c# - 使用 Linq 中的分组创建 Dictionary(of Dictionary)

> ID：13198355
> 
> 赞同：2
> 
> 时间：2012-11-02T15:31:31.453
> 
> 标签：c#, .net, vb.net, linq

我知道我可以用循环来做到这一点（事实上，我现在是，但我正在努力学习/提高我的 Linq 技能，我也希望它能提供更有效的解决方案。所以，这是我的场景：

假设我有以下 3 个列表（我只是在编一个类似的例子，所以请原谅这是愚蠢的）：

```
Dim lstTeachers as New List(of string)
Dim lstStudentsSex as New List(of string)
Dim lstStudentName as New List(of string) 
```

例如，它们如下：

```
lstTeachers:     lstStudentsSex:     lstStudentName:
Teacher 1        Male                Whatever Name 1
Teacher 2        Female              Whatever Name 2 
Teacher 1        Female              Whatever Name 3
Teacher 1        Female              Whatever Name 4
Teacher 2        Male                Whatever Name 5
Teacher 3        Male                Whatever Name 6
Teacher 3        Female              Whatever Name 7
Teacher 1        Male                Whatever Name 8
Teacher 1        Female              Whatever Name 9
Teacher 2        Male                Whatever Name 10 
```

每个列表中的每个条目都与具有相同索引的其他条目匹配 - 基本上就像一个数据表，只是存储在单独的列表中。

现在，假设我想使用以下值创建以下结构：

```
Dim dictTeacherSexName as New Dictionary(Of String, Dictionary(Of String, List(of String)))

Dict1_Key:        Dict1_Value / Dict2_Key:         Dict2_Value:
Teacher 1         Male                             Whatever Name 1
                                                   Whatever Name 8
                  Female                           Whatever Name 3
                                                   Whatever Name 4
                                                   Whatever Name 9
Teacher 2 ... 
```

...我希望这能解释我想要完成的事情。

现在，再次，我知道这可能是一个愚蠢的想法，但我也问它，因为我想提高我的 Linq 技能 - 特别是 Group By 和多个 Selects 仍然抓住我，所以请帮忙。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T15:43:30.863

这三个列表使事情变得有些困难，但并非不可能。您首先按照@fsimonazzi 的建议将列表压缩在一起，或者您将查询基于列表索引而不是列表条目本身。结果可能如下所示：

[*（C＃）*]

```
var result = Enumerable
    .Range(0, lstTeachers.Count)
    .GroupBy(i => lstTeachers[i])
    .ToDictionary(g => g.Key, g => g
        .GroupBy(i => lstStudentsSex[i])
        .ToDictionary(h => h.Key, h => h
            .Select(i => lstStudentName[i])
            .ToList()));

// result is Dictionary<string, Dictionary<string, List<string>>> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T15:36:39.737

您拥有包含离散信息的单独列表而不是包含 Student 实例的单个列表并不是很好。如果您想在此处使用 group by，您可能需要首先将集合一起[压缩](http://msdn.microsoft.com/en-us/library/dd267698.aspx)成一个带有三元组的单个可枚举，然后开始对该可枚举使用查询操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T16:43:51.653

这或多或少是 Spender 的解决方案，但这有效。

在 C# 中

```
var dict = lstTeachers.Zip(lstStudentsSex, (teacher, sex) => new { teacher, sex })
    .Zip(lstStudentName, (x, student) => new { x.teacher, x.sex, student })
    .GroupBy(x => x.teacher)
    .ToDictionary(g => g.Key, g => g.GroupBy(x => x.sex)
        .ToDictionary(p => p.Key, p => p.Select(x => x.student))); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T15:45:15.043

~~我只有 C#，不是 VB。提前道歉。~~

让我们从创建一个具有属性`teacher`, `sex`,的匿名对象列表开始`name`：

```
var singleList = lstTeachers
  .Zip(lstStudentsSex, (teacher, sex) => new {teacher, sex})
  .Zip(lstStudentName, (x,name) => new {x.teacher, x.sex, name}) 
```

现在我们可以把它变成字典词典：

```
singleList
  .GroupBy(x => x.teacher)
  .ToDictionary(
       g => g.Key, 
       g => g.ToDictionary(x => x.sex, x => x.name)) 
```

 ~~有关我的代码的更正版本，请参阅@nawfal。~~

# groovy - 如何在自定义 Gradle 插件中获取 $project.version？

> ID：13198358
> 
> 赞同：11
> 
> 时间：2012-11-02T15:31:31.503
> 
> 标签：groovy, gradle

在自定义 gradle 插件中，`project.version`似乎总是`unspecified`. 为什么以及如何`project.version`在自定义插件（类）中检索？

例如：

```
apply plugin: 'java'
apply plugin: MyPlugin

version = "1.0.0"

println "In build file: $project.version" 

class MyPlugin implements Plugin<Project> {
  public void apply(Project project) {
    project.task('myTask') {
      println "In plugin: $project.version"
    }
  }
} 
```

打印出来：

```
%> gradle -q myTask
  In plugin: unspecified
  In build file: 1.0.0 
```

除了我真的很想知道为什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-02T15:38:30.887

调用后设置属性`apply`

如果你搬家

```
version = "1.0.0" 
```

到前线

```
apply plugin: MyPlugin 
```

它应该工作

### 编辑

[按照彼得的回答](https://stackoverflow.com/a/13198744/6509)，您可以看到这也有效：

```
apply plugin: 'java'
apply plugin: MyPlugin

version = "1.0.0"

println "In build file: $project.version" 

class MyPlugin implements Plugin<Project> {
  public void apply(Project project) {
    project.task('myTask') {
      project.gradle.projectsEvaluated { 
        println "In plugin: $project.version"
      }
    }
  }
} 
```

延迟评估`$project.version`直到构建评估完成

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-02T15:53:52.700

处理评估顺序是编写插件时*的*挑战，需要一些知识和专业知识才能掌握。

请注意，在构建脚本中，插件在设置版本之前被应用（并因此被执行！）。这是常态，插件必须处理它。粗略地说，每当插件访问 Gradle 对象模型的可变属性时，它必须将该访问推迟到*配置阶段*结束。（在此之前，该属性的值仍然可以更改。）

Gradle 的一些 API（惰性集合、接受回调的方法等）为处理这个问题提供了特殊的支持。除此之外，您可以将受影响的代码包装在 中`project.gradle.projectsEvaluated { ... }`，或者使用更复杂的“约定映射”技术。

[Gradle 用户指南](http://gradle.org/docs/current/userguide/userguide_single.html)和[http://forums.gradle.org](http://forums.gradle.org)提供了有关这些主题的更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-30T20:15:43.337

[在这里](https://stackoverflow.com/questions/27050052/getversion-in-custom-gradle-plugin-is-always-unspecified/29354968#29354968)查看我的答案

您可以将此块放置在 projectEvaluated 闭包或 afterTask 闭包之后。我还没有测试过纯独立的，但它可能会起作用。

```
AppExtension android = (AppExtension) project.extensions.findByName("android")
String versionName = android.defaultConfig.versionName
String versionCode = android.defaultConfig.versionCode 
```

# perl - Perl中引用子类包名

> ID：13198361
> 
> 赞同：3
> 
> 时间：2012-11-02T15:31:58.593
> 
> 标签：perl, object, inheritance

我有以下。

```
package A;

sub new {
  my ($class) = @_;
  my $self = { };
  bless $self, $class;
  return($self);
}

sub run() {
  die "Task: ",__PACKAGE__,  "requires a run method";
}

package B;
use A;
our @ISA = qw(A);
sub new {
  my ($class) = @_;
  my $self = { };
  bless $self, $class;
  return($self);
}

package C;
use A;
my @Tasks;

sub new {
  my ($class) = @_;
  my $self = { };
  bless $self, $class;
  return($self);
}

sub add{
   my($self,$tempTask) = @_ ;
   push(@Tasks,$tempTask);
   $arraysize = @Tasks;
}

sub execute{
    foreach my $obj (@Tasks)
    {
            $obj->run();
    }
}
1; 
```

脚本

```
#!/usr/local/bin/perl
use strict;
use C;
use B;

my $tb = new C();
my $task = new B();
$tb->add($task);
$tb->execute(); 
```

包 B 没有运行方法，因此它默认为我想要的包 A 运行方法。此时我希望它打印出Package B的名称（会有很多不同的包继承Package A，但它没有。

目前它使用`__PACKAGE__`变量打印出包 A。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T15:38:58.890

一个对象是一个有福的参考。`__PACKAGE__`将始终等于当前包的名称。但`ref( $object )`会给你对象类的名称。还有[**`Scalar::Util::blessed`**](http://search.cpan.org/perldoc?Scalar%3a%3aUtil#blessed)，它不会给你非祝福参考的误报。

```
use Scalar::Util qw<blessed>;

my $obj   = bless {}, 'A';
my $class = ref( {} );       # HASH
$class    = blessed( {} );   # ''
$class    = ref( $obj );     # A
$class    = blessed( $obj ); # A 
```

所以在你的特殊情况下：

```
sub run() {
    die "Task: " . ref( shift ) . "requires a run method";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T15:41:50.910

用这个替换`A::run`代码...

```
die "Task: ", ref shift,  " requires a run method"; 
```

...将为您提供调用者对象所属的包（类）的名称（因为在对象上调用的每个方法的第一个参数是该对象本身，并将`ref`其类名作为字符串返回）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T15:51:00.560

[caller()](http://perldoc.perl.org/functions/caller.html)是对此的一般答案，因为它可以为您提供所需的任何堆栈帧，包括包名称。

# c++ - 如何将 QWindow 放入 QWidget 的布局中（Qt5）

> ID：13198367
> 
> 赞同：10
> 
> 时间：2012-11-02T15:32:12.540
> 
> 标签：c++, qt, qwidget, qt5

我想在一些小部件布局中将 QQuickView 插入到我的旧 qt4 应用程序中。如何在单个应用程序中混合 QWidget 和 QWindow？

有没有例子？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-27T23:52:55.110

这已在 Qt 5.1 中修复。引用 [1]

> 为了解决这个问题，Qt 5.1 引入了函数**QWidget::createWindowContainer()**。一个为现有 QWindow 创建 QWidget 包装器的函数，允许它存在于基于 QWidget 的应用程序中。现在可以将 QQuickView 或 QOpenGLContext 与小部件一起使用。

[1] [https://www.qt.io/blog/2013/02/19/introducing-qwidgetcreatewindowcontainer](https://www.qt.io/blog/2013/02/19/introducing-qwidgetcreatewindowcontainer)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T14:28:15.223

在 Qt-project bugtracker 上发现[了这个问题。](https://bugreports.qt-project.org/browse/QTBUG-25643)

评论中有一些解决方法。

# email - Magento 电子邮件翻译税

> ID：13198369
> 
> 赞同：0
> 
> 时间：2012-11-02T15:32:19.210
> 
> 标签：email, magento, translation

我正在尝试在我的新订单电子邮件模板中编辑“税”的翻译。

我做了什么？

*   显示内联模板提示并发送订单

这表明税收来自文件：frontend/base/default/template/tax/order/tax.phtml

当我在后面硬编码一些东西时： __('Tax'); ?> 它出现了。所以这意味着我确信我必须寻找“税务”翻译

我编辑了这些规则

*   “税”、“税”

至

*   “税”、“增值税”

里面的文件：

*   Mage_Catalog.csv
*   Mage_reports.csv
*   mage_Tax.csv
*   Mage_adminhtml.csv
*   Phoenix_BankPayment.csv
*   Mage_Sales.csv
*   Mage_Customer.csv
*   Mage_checkout.csv

刷新翻译块和 Magento 缓存。但不知何故，正确的翻译不会出现..

我什至检查了数据库的翻译，但那里没有条目。所以我确信它必须在 CSV 文件中！

在此先感谢，马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T08:26:51.043

它位于**Idev_OneStepCheckout.csv** 我必须添加另一个翻译规则，例如：

```
"Tax","VAT" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:08:53.423

您是否尝试过在主题中创建 translate.csv 文件？

应用程序/设计/前端/your_package/your_theme/locale/languagecode_COUNTRYCODE/translate.csv

对于美式英语，它将是 en_US（请确保您在管理面板->系统->配置->区域设置选项中使用此语言）

应用程序/设计/前端/your_package/your_theme/locale/en_US/translate.csv

然后添加新行

“税”、“增值税”

之后，您需要刷新翻译缓存。

# visual-studio - 在 Visual Studio 2012 报告 (.sdlc) 中为 null 时如何为可为空的 DateTime 赋予默认值

> ID：13198370
> 
> 赞同：1
> 
> 时间：2012-11-02T15:32:19.977
> 
> 标签：visual-studio, reporting-services, sdlc

我正在使用对象数据源编写 Visual Studio 2012 报告 (.sdlc)。对象数据源有一个可为空的 DateTime？财产。我想在为空时显示“-”，然后在不为空时将日期格式化为“dd-MMM-yy”。

我尝试了以下表达式，但总是在报告的 TextBox 中收到“#Error”。

注意：在这两次尝试中，TextBox 上的“格式”属性设置为“dd-MMM-yy”。

```
=IIf(IsNothing(Fields!OpenInDRMADate.Value), "-", Fields!OpenInDRMADate.Value)

=IIf(IsDate(Fields!OpenInDRMADate.Value), "-", Fields!OpenInDRMADate.Value) 
```

我认为“格式”属性依赖于 DateTime 类型，所以我尝试将值转换为表达式中的字符串，但仍然得到“#Error”

```
=IIf(IsNothing(Fields!OpenInDRMADate.Value), "-", FormatDateTime(Fields!OpenInDRMADate.Value, DateFormat.ShortDate))

=IIf(IsDate(Fields!OpenInDRMADate.Value), "-", FormatDateTime(Fields!OpenInDRMADate.Value, DateFormat.ShortDate)) 
```

如何为空 DateTime 值显示“-”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T23:04:00.783

我在标题文本框中的日期有同样的问题。

=IIF(ISDATE(Fields!LICENCEDDATE.value) = False, "", formatdatetime(IIF(IsDate(Fields!LICENCEDDATE.value) ="1",Fields!LICENCEDDATE.Value,"01/01/1900"),dateformat .ShortDate))

这有效

我只是不明白

formatdatetime(IIF(IsDate(Fields!LICENCEDDATE.value) ="1" <-- "1" 是什么意思？？？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T01:05:42.927

我想你可能有别的事情要做，因为我试过了

```
=IIf(IsNothing(Fields!OpenInDRMADate.Value), "-", Fields!OpenInDRMADate.Value) 
```

将 Format 属性设置为`dd-MMM-yy`并获取空日期的破折号。

我也试过

```
=IIf(IsNothing(Fields!OpenInDRMADate.Value), "-", FormatDateTime(Fields!OpenInDRMADate.Value, DateFormat.ShortDate)) 
```

没有 Format 属性，并再次得到空值的破折号。

这是在VS2008中。

也许您在该对象上有另一个导致问题的表达式（例如，颜色）？

# android - 令牌“11”上的语法错误，VariableDeclaratorId R.java 无效

> ID：13198371
> 
> 赞同：1
> 
> 时间：2012-11-02T15:32:22.487
> 
> 标签：android

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/11" />

</LinearLayout> 
```

就是这样，是android项目正常设置，我把它放进去，每个文件夹中的图像11与默认图标大小相同，由于这个错误，我无法让它进入模拟器，它甚至不会运行， 你能帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T15:34:35.843

使用包含字母的名称重命名您的可绘制对象：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/my_drw" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-30T06:47:57.643

我遇到了类似的问题。在我的项目**res**文件夹中没有**可绘制**文件夹。我创建了一个名为***“drawable”***的新文件夹，并将我的图像***xyz.jpg***添加到其中。但是我在**R.java 文件中遇到了同样的错误。**然后我将**ic_launcher.png**文件从**drawable-hdpi**文件夹复制到***drawable***并且它起作用了。不知何故，我感觉到该文件夹​​应该有**ic_launcher.png**图像。

# wpf - 单个 xaml 文件中的 MVVM 两个 Viewmodel

> ID：13198375
> 
> 赞同：0
> 
> 时间：2012-11-02T15:32:49.240
> 
> 标签：wpf, mvvm

我正在使用一个包含两个面板（左面板，右面板）的 xaml 文件。这意味着两个视图。我还对每个视图使用了两个 ViewModel。如何将 DataContext 绑定到这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T15:45:03.360

您需要每个都有自己的 ViewModel。您可能已经有一个包含多个 ViewModel 的 View。你有绑定到 List 的 ItemControl 吗？我通常会。

我将创建一个具有两个属性的 ViewModel。

```
public class ParentScreenViewModel : ViewModelBase
{

    public ViewModelBase LeftPanel 
    { 
        get {...}
        set {...}
    }

    public ViewModelBase RightPanel 
    { 
        get {...}
        set {...}
    }
} 
```

然后 XAML 将绑定到这些：

```
<Panel x:Name="LeftPanel" DataContext="{Binding LeftPanel}" />
<Panel x:Name="RightPanel" DataContext="{Binding RightPanel}" /> 
```

无论如何，这就是我会做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:36:15.210

您可以更改树视图中任何子元素的 DataContext。

否则，将两个面板设置为各自的 DataContext——它将优先于父容器（例如窗口或用户控件）的数据上下文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T15:36:44.870

如果你有两个 StackPanel，试试这个：

```
<StackPanel x:Name="spFirst" />

<StackPanel x:Name="spSecond" /> 
```

在代码隐藏中：

```
FirstViewModel vm1 = new FirstViewModel();

SecondViewModel vm2 = new SecondViewModel();

spFirst.DataContext = vm1;

spSecond.DataContext = vm2; 
```

[这里](http://sdrv.ms/SN1iLs)有示例（DoubleDataContextExample.zip）。

# android - SSL证书安卓

> ID：13198379
> 
> 赞同：0
> 
> 时间：2012-11-02T15:33:08.763
> 
> 标签：android, security, sockets, ssl

我在将证书导入应用程序时遇到问题。我用 keytool 创建了 BKS 密钥库。我把它放在 res/raw 文件夹中。我能够将其加载到Android。

```
InputStream inputStream = context.getResources().openRawResource(R.raw.enigma);
KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());
keyStore.load(inputStream, "android".toCharArray());
inputStream.close();

String algorithm = KeyManagerFactory.getDefaultAlgorithm();
KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(algorithm);
keyManagerFactory.init(keyStore, "android".toCharArray()); 
```

当我尝试调用 SSLServerSocket.accept() 时，我收到一个异常：“SSLException：找不到任何密钥存储条目来支持启用的密码套件”。

有什么问题？是否有在 Android 上创建 KeyStore 的教程。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:47:52.530

这是我的错误。我使用 OpenSSL 工具创建了自签名证书。但我忘了用 p12 对象的私钥打包这个证书。

# java - 动态更改从 Java JNI 连接池获得的连接的连接属性

> ID：13198380
> 
> 赞同：1
> 
> 时间：2012-11-02T15:33:12.813
> 
> 标签：java, jdbc, properties, connection, pool

我正在使用 Java 并从 JNI 连接池（Weblogic Server）中检索我的数据库连接。

我想为我检索到的连接设置连接属性 oracle.jdbc.V8Compatible="true"，因为如果未设置，则存在 Oracle 错误，该错误会在使用日期和时间戳时导致错误行为。

有很多已经存在的代码，以前的编码人员使用我认为是 hack 和不好的做法来解决 Oracle 错误。

所以无论如何，理想情况下，我想为我正在编写的较新代码设置 oracle.jdbc.V8Compatible="true"，但允许它保持为 false 以便向后兼容现有的遗留代码。我担心将其设置为“真”可能会破坏一些旧代码。看来，由于我正在从连接池中检索我的连接，因此除了复制池中的所有数据库连接以使它们各自具有不同的属性之外，可能没有一种简单的方法可以做到这一点，我不愿意做，因为有多个数据库在玩。

我只是想确认在从池中检索连接期间或在从池中检索连接之后，没有某种方法可以动态修改连接属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T14:09:12.473

我认为您的选择是，按优先顺序：

1.  在各处重构现有代码以正确处理 Timestamp 对象
2.  为您的代码使用单独的连接池
3.  编写从时间戳到日期的转换代码以维护旧代码。
4.  继续使用其他人已经开始的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T22:33:23.383

查看您的连接池是否可以通过 JNDI 公开它。然后就可以用ie Jconsole来改了。

# ruby-on-rails - Guard 启动一个控制台，显示带有 Time - INFO 的评论。怎么来的？

> ID：13198381
> 
> 赞同：1
> 
> 时间：2012-11-02T15:33:13.210
> 
> 标签：ruby-on-rails, guard, spork

[我今天根据 Michael Hartl 的 Rails 教程 ( http://youtu.be/FZ-b9oZpCZY](http://youtu.be/FZ-b9oZpCZY)和[http://ruby.railstutorial.org/chapters/static-pages#sec-advanced_setup](http://ruby.railstutorial.org/chapters/static-pages#sec-advanced_setup)中的高级设置设置了一个新的 Rails 应用程序）。我以前做过，但特别是 Guard 的输出非常不同。

首先，之前，Guard 会运行并坐在那里监听变化，而在新项目中，Guard 运行一个控制台。它仍然坐在那里并在发生更改时运行测试，但我想知道是否有人知道为什么会这样，特别是据我所知，我已经将这个项目设置为与我的其他项目完全相同（Gemfiles 完全相同）。

其次，所有输出消息都带有时间戳和前面的 INFO。再说一次，有谁知道这是为什么？

只是为了说明，这是一个旧项目的输出：

```
$ guard
Guard uses Growl to send notifications.
Guard is now watching at '/Users/billmurray/rails_projects/sample_app'
Starting Spork for RSpec
Using RSpec
Preloading Rails environment
Loading Spork.prefork block...
Spork is ready and listening on 8989!
Spork server for RSpec successfully started
Guard::RSpec is running, with RSpec 2!
Running all specs
Running tests with args ["--color", "--failure-exit-code", "2", "--format", "progress", "--format", "Guard::RSpec::Formatter::NotificationRSpec", "--out", "/dev/null", "--require", "/Users/billmurray/.rvm/gems/ruby-1.9.3-p194@rails3tutorial/gems/guard-rspec-1.2.1/lib/guard/rspec/formatters/notification_rspec.rb", "spec"]...
.........

Finished in 0.66338 seconds
9 examples, 0 failures

Randomized with seed 46867

Done. 
```

新应用程序也是如此。请注意控制台如何在底部启动。

```
$ guard
14:52:42 - INFO - Guard uses Growl to send notifications.
14:52:42 - INFO - Guard uses TerminalTitle to send notifications.
14:52:42 - INFO - Guard is now watching at '/Users/billmurray/rails_projects/new_app'
14:52:42 - INFO - Starting Spork for RSpec
Using RSpec
Preloading Rails environment
Loading Spork.prefork block...
Spork is ready and listening on 8989!
14:52:47 - INFO - Spork server for RSpec successfully started

14:52:47 - INFO - Guard::RSpec is running, with RSpec 2!
14:52:47 - INFO - Running all specs
Running tests with args ["--color", "--failure-exit-code", "2", "--format", "progress", "--format", "Guard::RSpec::Formatter::NotificationRSpec", "--out", "/dev/null", "--require", "/Users/billmurray/.rvm/gems/ruby-1.9.3-p194@rails3tutorial/gems/guard-rspec-1.2.1/lib/guard/rspec/formatters/notification_rspec.rb", "spec"]...
No examples found.

Finished in 0.00213 seconds
0 examples, 0 failures

Randomized with seed 11776

Done.

[1] guard(main)> 
```

这并没有阻止事情运行，但我想知道是什么原因造成的。我可能应该提到我正在使用 Mac OS X Mountain Lion。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T08:07:00.153

当您查看 Guard [CHANGELOG](https://github.com/guard/guard/blob/master/CHANGELOG.md)时，您会看到 Guard 1.5.0 附带了以下新功能：

*   使用 Pry 作为交互器。
*   使用 Lumberjack 作为可定制的记录器。

Guard 现在集成了[Pry](http://pryrepl.org/)以从用户（称为交互器）获取命令。交互器几乎从一开始就是 Guard 的一部分，但是使用 Pry，您可以获得一个插件 API，允许您向 Guard 添加自定义命令。您可以使用以下命令查看已注册的 Guard 命令：

`[1] guard(main)> help guard`

有关更多信息，请参阅[https://github.com/guard/guard#interactions](https://github.com/guard/guard#interactions)。

Lumberjack 是一个可配置的 Ruby 记录器，它允许您自定义 Guard UI 记录器，有关更多信息，请参阅[https://github.com/guard/guard#logger](https://github.com/guard/guard#logger)。

# graph-theory - 可以使用 O(n) 中的 BFS 计算加权图的最小成本路径吗？

> ID：13198383
> 
> 赞同：1
> 
> 时间：2012-11-02T15:33:16.227
> 
> 标签：graph-theory

我是图论的新手。我们从节点 (1,1) 开始，需要到达节点 (r,c) ，即可以想象一个矩形，其节点编号为 2D 笛卡尔平面，我们从左上角的节点开始搜索，需要到达右下角节点。从一个节点到另一个节点的遍历具有一定的权重，因此可以在 O(n) 中使用 BFS（Breadt First Search）解决加权图的最小成本路径吗？如果 BFS 不可能，您能否建议一些不同的算法。先谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:52:29.270

如果你是新手，那么你绝对应该看看[Dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)，这是最知名的算法，应该做你想做的事。您可以调整 BFS 来执行此操作，但它会非常慢（并且可能与 Dijkstra 做得更多或更少）。试试看，如果有任何问题再回来

# sql - SQL 中 > 0 是什么意思？

> ID：13198384
> 
> 赞同：5
> 
> 时间：2012-11-02T15:33:23.083
> 
> 标签：sql, sql-server, database, sql-server-2008

我有以下 SQL 语句。请告诉我我的翻译是否准确。我正在使用 MS SQL Server 2008。谢谢

```
(bld_sqft &gt; 0 OR bld_area &gt; 0) 
```

我的翻译

```
bld_sqft > 0 OR bld_area > 0 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T15:39:16.533

`&gt;`是一个 HTML 实体（通常因为 HTML`<>`用于标记而使用），它不是有效的 SQL，它不应该运行，除非它`>`在被发送到 SQL Server 之前被翻译。

有关 HTML 实体的信息，请参阅[http://dev.w3.org/html5/html-author/charref](http://dev.w3.org/html5/html-author/charref)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T15:35:58.020

你从哪里得到这个 SQL 语句？您是对的， > 转换为大于符号，但它被编码为实体字符引用。几乎就像在网页上显示编码值时按字面意思对待一样。

[编辑] 如您所见，当我输入该符号时，它实际上在我的帖子中呈现为 > 符号...

一个很好的提示是，如果您看到与号 (&) 后跟两到四个字符，然后是分号，那么它应该呈现不同的方式：

[http://www.htmlhelp.com/reference/html40/entities/special.html](http://www.htmlhelp.com/reference/html40/entities/special.html) [/编辑]

# html - HTML：“OnMouseOver”实现

> ID：13198385
> 
> 赞同：1
> 
> 时间：2012-11-02T15:33:24.207
> 
> 标签：html, css

我制作了一些代码，以在以 html 形式显示时仅显示有限的字符，我已将此代码包含在经典的 asp 文件中。“onmouseover”我必须显示整个文本。如何实现这一点。请提出一些答案。

代码：

```
<td align="center" class="chaos" width="80%" title="<%=trimtext%>" 
```

<%=len(trimtext,50)%>

```
In my code while displaying i`m dislaying only first 25 characters from string variable "trimtext".Onmouseover how can i dispalying complete text. 
```

或：帮我只显示 20 个字符，鼠标悬停显示完整的文本。请提出一些答案。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:38:36.143

好的....试试这个：

```
<html>
<head>
    <style type="text/css">
        #ddv{
            overflow-x:hidden;
            text-overflow: ellipsis;
            cursor: pointer;
        }
        #ddv:hover{
            overflow-x:visible;
        }
    </style>
</head>
<body>
<div id="ddv" style="width: 30px;">
    lskegfoehgfowehfgoqwhfoqwhfgoihqwogfihqwegf
</div>
</body>
</html> 
```

# flash - 无版本 FDT 缺少我的项目模板

> ID：13198386
> 
> 赞同：0
> 
> 时间：2012-11-02T15:33:27.607
> 
> 标签：flash, fdt

我刚刚升级到 FDT（新订阅模式），一切正常，然后用自定义模板创建了一个新项目 - 消失了！发现文件夹已移至 projectTemplateBackup，将其移回 projectTemplates... 但它仍然没有显示在新建项目向导中。是什么赋予了？此功能是否已删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:33:27.607

该功能尚未删除。

模板的内部版本发生了变化，因为我们修复了一些错误并在模板和模板处理中添加了新的小功能。现在版本是2.6

版本低于 2.6 的旧模板被隐藏，以尽量减少旧的不正确或不工作的模板对标准用户的干扰。

您可以增加模板的版本号并将它们复制到 projectTemplates 文件夹，它们应该可以再次使用。

# asp.net-mvc-3 - ASP.NET MVC3 区域操作视图位置

> ID：13198388
> 
> 赞同：2
> 
> 时间：2012-11-02T15:33:32.427
> 
> 标签：asp.net-mvc-3

我第一次在 MVC 中遇到这个。我在“新闻”中有区域“管理”和控制器，其中包含“列表”操作。

在调试中我得到了断点

```
public ActionResult List()
{
    return View(); // Breakpoint
} 
```

我到了那里

但引擎找不到查看“列表”

我收到错误：

```
The view 'List' or its master was not found or no view engine supports the searched locations. The following locations were searched:
~/Views/News/List.cshtml
~/Views/News/List.vbhtml
~/Views/Shared/List.cshtml
~/Views/Shared/List.vbhtml 
```

查看位置 Areas/Administation/News/List.cshtml 中的出口

为什么 Razor 不将区域名称粘贴到视图位置？

**更新：**

我找到了解决方案： [ASP.NET MVC 默认路由可通过区域路由访问](https://stackoverflow.com/questions/4612279/asp-net-mvc-default-routes-accessible-via-area-routes)

```
Route route = Routes.MapRoute(name, url, defaults, constraints, namespaces);
route.DataTokens["area"] = AreaName; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:17:32.120

`View()`当您在控制器中调用方法时，ASP.NET MVC 期望您有相应操作的匹配视图。所以基本上它告诉你你必须在你的 project的or文件夹中有一个名为`List.cshtml`(or `List.vbhtml`) 的文件。（您的控制器被调用，按照约定，视图在名称上搜索您可以转到[http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet -mvc-3](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3)看看它是如何工作的。`Views/Shared``Views/News/``NewsController`

区域是一种 MVC 功能，用于组织应用程序上的代码，但您可能缺少对它们的一些配置。[阅读此](http://www.c-sharpcorner.com/UploadFile/b19d5a/areas-in-Asp-Net-mvc3/)内容以获取更多信息。

# ios - NSMutableArray removeObjectAtIndex 在第二次执行时崩溃

> ID：13198389
> 
> 赞同：0
> 
> 时间：2012-11-02T15:33:33.827
> 
> 标签：ios, uitableview, cocoa-touch, nsmutablearray

我有一个表格视图，其中包含许多我希望能够删除的行。填充 tableview 的数据存储在 NSMutableArray 中。要删除一行上的数据，我调用：

```
- (void)deleteFromArray:(NSUInteger) number{
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];  //load NSUserDefaults
    NSMutableArray *storedArray = [[ NSMutableArray alloc] init];
    storedArray = [prefs objectForKey: @"mydata"];
    [storedArray removeObjectAtIndex:number];

    [prefs setObject:storedArray forKey:@"mydata"];
    [storedArray release];
    [prefs synchronize];

} 
```

从

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        subscribe *subscribeclass = [subscribe alloc];
        [subscribeclass deleteFromArray: indexPath.row];
        [myTableView reloadData];
    }
} 
```

这在我第一次删除一行时效果很好。但是当我删除第二行时，应用程序在 deleteFromArray 中的以下行崩溃：

```
[storedArray removeObjectAtIndex:number]; 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T15:40:57.173

来自您的 NSUserDefaults 的数组是 NSArray，而不是 NSMutableArray。你应该修改你的代码是这样的：

```
- (void)deleteFromArray:(NSUInteger) number{
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];  //load NSUserDefaults
    NSMutableArray *storedArray = [[prefs objectForKey:@"mydata"] mutableCopy];
    [storedArray removeObjectAtIndex:number];

    [prefs setObject:storedArray forKey:@"mydata"];
    [storedArray release];
    [prefs synchronize];
} 
```

这将创建不可变数组的副本并使其可变，以便您可以修改它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T15:43:36.753

您只能在默认值中存储不可变 NSArrays 的东西。即使对象是可变的，它也被存储为不可变的

所以而不是

```
 NSMutableArray *storedArray = [[ NSMutableArray alloc] init];
 storedArray = [prefs objectForKey: @"mydata"]; 
```

尝试：

```
 [NSMutableArray arrayWithArray:[prefs objectForKey: @"mydata"]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T15:41:14.180

问题是从 objectForKey 返回的数组是不可变的。所以你可以看到其他人做了什么：[Storing custom objects in an NSMutableArray in NSUserDefaults](https://stackoverflow.com/questions/537044/storing-custom-objects-in-an-nsmutablearray-in-nsuserdefaults)

# python - 创建形状文件

> ID：13198391
> 
> 赞同：3
> 
> 时间：2012-11-02T15:33:42.470
> 
> 标签：python, ogr

我想使用 2 个点创建一个 shapefile（一条线）。

我有以下脚本：

```
import ogr, sys, os

line=ogr.Geometry(ogr.wkbLineString)
line.AddPoint(10,10)
line.AddPoint(20,20)

driver=ogr.GetDriverByName('ESRI Shapefile')
ds=driver.CreateDataSource('C:\test.shp')
layer=ds.CreateLayer('test', geom_type=ogr.wkbLineString)
fieldDefn=ogr.FieldDefn('id', ogr.OFTInteger)
layer.CreateField(fildDefn)
featureDefn=layer.GetLayerDefn()
feature=ogr.Feature(featureDefn)
feature.SetGeometry(line)
feature.SetField('id',1)
layer.CreateFeature(feature) 
```

我有两个错误..

“错误 1：无法创建文件。shp 文件。错误 4：无法打开 Shapefile”

任何人都知道问题是什么？谁能帮我？非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-27T18:46:43.180

你忘了通知大地测量系统。下面的这种方式有效。

```
import ogr, sys, os
import osgeo.osr as osr

line=ogr.Geometry(ogr.wkbLineString)
line.AddPoint(10,10)
line.AddPoint(20,20)

driver=ogr.GetDriverByName('ESRI Shapefile')
ds=driver.CreateDataSource('test.shp')

srs = osr.SpatialReference()
srs.ImportFromEPSG(4326)

layer=ds.CreateLayer('test', srs, ogr.wkbLineString)
fieldDefn_=ogr.FieldDefn('id', ogr.OFTInteger)
layer.CreateField(fieldDefn_)
featureDefn=layer.GetLayerDefn()
feature=ogr.Feature(featureDefn)
feature.SetGeometry(line)
feature.SetField('id',1)
layer.CreateFeature(feature) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T15:42:45.473

您需要替换`\t`字符；它们表示 python 字符串文字中的制表符。要么加倍斜线，要么使用原始 python 字符串：

```
ds=driver.CreateDataSource('C:\\test.shp') 
```

或者

```
ds=driver.CreateDataSource(r'C:\test.shp') 
```

（注意`r`字符串开头的 ）。

# php - 在 PHPunit 中测试异常总是失败

> ID：13198392
> 
> 赞同：6
> 
> 时间：2012-11-02T15:33:44.760
> 
> 标签：php, exception, phpunit

我在 PHP 中有几个自定义异常：

```
class MainException extends Exception {};
class ExceptionOne extends MainException {};
class ExceptionTwo extends MainException {}; 
```

我在课堂上以两种简单的方法使用它们：

```
public function firstFunction($param) {
    if ($some_condition) {
        // do whatever
    } else {
        throw new ExceptionOne();
    }
}

public function secondFunction($param) {
    if ($some_condition) {
        // do whatever
    } else {
        throw new ExceptionTwo();
    }
} 
```

我还对这两个异常进行了 PHPUnit 测试，类似于：

```
public function testFirstException() {
    try {
        // anything
    } catch (Exception $e) {
        $this->assertType('ExceptionOne', $e);
        $this->assertType('MainException', $e);
    }
}
public function testSecondException() {
    try {
        // anything
    } catch (Exception $e) {
        $this->assertType('ExceptionTwo', $e);
        $this->assertType('MainException', $e);
    }
} 
```

如果我在浏览器中测试我的课程并故意使我的函数失败（使用与 PHPUnit 测试相同的东西），我可以看到`ExceptionOne`并`ExceptionTwo`在需要时提出。但是，当我使用 PHPUnit 对其进行测试时，我总是会失败：

```
1) testSecondException(SomeTest)
Failed asserting that <PHPUnit_Framework_ExpectationFailedException> is an instance of class "ExceptionTwo".
C:\test.php:67 
```

第 67 行是
`$this->assertType('ExceptionTwo', $e);`
，无论我尝试什么，它都会失败。我很确定我的情况是`secondFunction`正确的。第一个测试 ( `testFirstException`) 完美运行，我从来没有像第二个测试那样失败。
我想补充一点，我不应该在这里更改 PHPUnit 测试！

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T15:38:21.210

看起来你在你的 try/catch 中掩盖了一个不同的错误。如果您的 try 块中有测试断言，并且该断言失败，则将其作为异常抛出。尝试使用[`setExpectedException`](http://www.phpunit.de/manual/3.6/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.exceptions)而不是 try/catch 块：

```
public function testFirstException() {
    $this->setExpectedException('ExceptionOne');
    $fixture->firstFunction();
} 
```

您应该将`setExpectedException`调用放在您希望引发异常的行之前。

另一种选择是使用`@expectedException`docblock 注释。

```
/**
 * @expectedException ExceptionOne
 */
public function testFirstException() {
    $fixture->firstFunction();
} 
```

如果您想保留 try/catch 方法，同样适用：确保 try 块中的唯一行是应该引发异常的行。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-02T16:23:47.253

从您的评论到 cbuckley 的出色答案，测试似乎是这样编写的：

```
public function testFirstException() {
    try {
        // some code that is supposed to throw ExceptionOne
        $this->assertTrue(false, "Test failed");
    } catch (Exception $e) {
        $this->assertType('ExceptionOne', $e);
        $this->assertType('MainException', $e);
    }
} 
```

如果在测试期间没有抛出异常，`assertTrue`则用于确保测试失败。但是，这不起作用，因为失败的断言会引发不同的异常类型，从而导致错误消息令人困惑。

```
Failed asserting that <PHPUnit_Framework_ExpectationFailedException> 
is an instance of class "ExceptionOne". 
```

您可以使用`@expectedException`或来解决此问题`setExpectedException`。测试不仅会在抛出时通过`ExceptionOne`，而且在未抛出或抛出其他异常类型时也会失败。

```
/**
 * @expectedException ExceptionOne
 */
public function testFirstException() {
    // some code that is supposed to throw ExceptionOne
} 
```

当没有抛出异常时，错误消息是

```
Failed asserting that exception of type "ExceptionOne" is thrown. 
```

当抛出不同类型的异常时，您会看到

```
Failed asserting that exception of type "Exception" matches
expected exception "RuntimeException". 
```

这种测试异常的方法是

*   更容易写，
*   更容易阅读，
*   测试失败时更容易调试，
*   并且正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-05T20:47:53.903

`Try {}`使用 php 单元，您必须生成关于伪造响应中的任何方法的异常。

```
public function testFirstFunction() {
....
$this->methodOnGenerateExeption(Argumen::Any())->willReturn()->willThrow(\Exception::class);
$this->setExpectedException(\Exception::class);

  $this->classMockToTest->firstFunction($parameters)
} 
```

# java - 如何解析输入文件

> ID：13198393
> 
> 赞同：0
> 
> 时间：2012-11-02T15:33:46.683
> 
> 标签：java, parsing, java.util.scanner

所以我需要解析这个输入文件，我似乎无法弄清楚如何去做。我试过使用`scanner.Delimiter()`但仍然有问题。任何人有什么想法如何正确地做到这一点？

这是输入文件中的一行：

> 200.88.223.98 - - [01/Feb/2007:04:02:22 -0500] "GET /gallery/v/events/album02/contests/programmingContest05/?g2_GALLERYSID=3be9666f9c07e16b7f33e2ea8acb8dd2&g2_fromNavId=x33200.52"HTTP/4611"http:52" //cs.tcnj.edu/gallery/main.php?g2_view=comment.AddComment&g2_itemId=664&g2_return=http%3A%2F%2Fcs.tcnj.edu%2Fgallery%2Fv%2Fevents%2Falbum02%2Fcontests%2FprogrammingContest05%2F%3Fg2_GALLERYSID% 3D3be9666f9c07e16b7f33e2ea8acb8dd2&g2_GALLERYSID=3be9666f9c07e16b7f33e2ea8acb8dd2&g2_returnName=album" "Opera/6.01 (Windows 98; U) [en]"

假设分为以下几个部分：

1.  `address = 200.88.223.98`

2.  `date = 01/Feb/2007:04:02:22 -0500`

3.  `request = GET /gallery/v/events/album02/contests/programmingContest05/?g2_GALLERYSID=3be9666f9c07e16b7f33e2ea8acb8dd2&g2_fromNavId=x332be852 HTTP/1.1`

4.  `status = 200`

5.  `bytes = 52464`

6.  `refer = http://cs.tcnj.edu/gallery/main.php? g2_view=comment.AddComment&g2_itemId=664&g2_return=http%3A%2F%2Fcs.tcnj.edu%2Fgallery%2Fv%2Fevents%2Falbum02%2Fcontests%2FprogrammingContest05%2F%3Fg2_GALLERYSID%3D3be9666f9c07e16b7f33e2ea8acb8dd2&g2_GALLERYSID=3be9666f9c07e16b7f33e2ea8acb8dd2&g2_returnName=album`

7.  `agent = Opera/6.01 (Windows 98; U) [en]`

这是我试图解析它的代码的一部分：

```
Scanner scan = new Scanner(input);
scan.useDelimiter("[-']+");
while (scan.hasNextLine()) 
{
    String address = scan.next();
    String date = scan.next();
    String request = scan.next();
    int status = scan.nextInt();
    int bytes = scan.nextInt();
    String refer = scan.next();
    String agent = scan.next(); 
} 
```

显示以下错误：

```
Exception in thread "main" java.util.InputMismatchException      
  at java.util.Scanner.throwFor(Scanner.java:840) 
  at java.util.Scanner.next(Scanner.java:1461) 
  at java.util.Scanner.nextInt(Scanner.java:2091) 
  at java.util.Scanner.nextInt(Scanner.java:2050) 
  at Analyzer.start(Unknown Source) 
  at Driver.main(Unknown Source) 
Java Result: 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:28:42.300

想想这个。按空格分割行并提取数据

```
String s = "200.88.223.98 - - [01/Feb/2007:04:02:22 -0500] \"GET /gallery/v/events/album02/contests/programmingContest05/?g2_GALLERYSID=3be9666f9c07e16b7f33e2ea8acb8dd2&g2_fromNavId=x332be852 HTTP/1.1\" 200 52464 \"http://cs.tcnj.edu/gallery/main.php?g2_view=comment.AddComment&g2_itemId=664&g2_return=http%3A%2F%2Fcs.tcnj.edu%2Fgallery%2Fv%2Fevents%2Falbum02%2Fcontests%2FprogrammingContest05%2F%3Fg2_GALLERYSID%3D3be9666f9c07e16b7f33e2ea8acb8dd2&g2_GALLERYSID=3be9666f9c07e16b7f33e2ea8acb8dd2&g2_returnName=album\" \"Opera/6.01 (Windows 98; U) [en]\"";

  String arr [] = s.split(" ");

  for(int i =0 ;i<arr.length;i++){
      System.out.println(i+" - "+arr[i]);
  } 
```

输出是：

```
0 : 200.88.223.98
1 : -
2 : -
3 : [01/Feb/2007:04:02:22
4 : -0500]
5 : "GET
6 : /gallery/v/events/album02/contests/programmingContest05/?g2_GALLERYSID=3be9666f9c07e16b7f33e2ea8acb8dd2&g2_fromNavId=x332be852
7 : HTTP/1.1"
8 : 200
9 : 52464
10 : "http://cs.tcnj.edu/gallery/main.php?g2_view=comment.AddComment&g2_itemId=664&g2_return=http%3A%2F%2Fcs.tcnj.edu%2Fgallery%2Fv%2Fevents%2Falbum02%2Fcontests%2FprogrammingContest05%2F%3Fg2_GALLERYSID%3D3be9666f9c07e16b7f33e2ea8acb8dd2&g2_GALLERYSID=3be9666f9c07e16b7f33e2ea8acb8dd2&g2_returnName=album"
  11 : "Opera/6.01
  12 : (Windows
  13 : 98;
  14 : U)
  15 : [en]" 
```

所以第 0 个元素给出你的 ip，第 3 和第 4 个给出你的日期，第 6 和 7 个给出你的请求，这样你就可以提取你的数据。

# java - 在番石榴事件线程安全上更新 JTable 的模式

> ID：13198394
> 
> 赞同：0
> 
> 时间：2012-11-02T15:33:52.227
> 
> 标签：java, swing, concurrency, guava, tablemodel

## 初步问题

如何构建 JTable 以便在触发 Google Guava 事件时更新它（并保证它是线程安全的）？

简单的方法是做`model.setValueAt(aValue, row, column);`

两个问题：

*   使用JTableModel的标准数据结构，不知道自己在哪一行。
*   使用 JTableModel 的标准数据结构，我不能将此数据用于其他组件
*   这不是线程安全的（我认为）

我曾想过将 JTableModel 更改为使用 ConcurrentHashMap ，但似乎这不是扩展它的预期目的。我觉得这是一条通往奇怪错误的途径。

我在这一切中感到非常迷茫，如果你能提供一个我应该首先探索的指南，那将有很大帮助。

## 一个更明智的问题

事件不在 EVT 中。为了确保我跑了`SwingUtilities.isEventDispatchThread()`，结果是假的。

我现在认为我应该做的：

```
@Subscribe
public void handleMessage(DataStructure newInformation) {
  // handle the information

  SwingUtilities.invokeLater(new Runnable() {
    @Override
    public void run() {
        tableModel.setValueAt(...); // update table1
        tableModel2.setValueAt(...); // update table2
    }
  });
} 
```

如果我得到完全独立于表格的信息。我需要一种方法来了解信息与哪一行相关。
我总是可以循环浏览模型中的整个向量，但我正在寻找一个可以使用地图或数组的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T15:46:22.367

对 Swing 组件的每次更改都必须在事件分派线程中完成。您可以通过调用来测试您是否在事件调度线程中`SwingUtilities.isEventDispatchThread()`。如果返回 true，则可以直接修改模型。如果它返回 false，则必须在 EDT 中完成更新，方法是将其包装在使用`SwingUtilities.invokeLater()`(or `SwingUtilities.invokeAndWait()`) 执行的 Runnable 中：

```
SwingUtilities.invokeLater(new Runnable() {
    @Override
    public void run() {
        tableModel.setValueAt(...);
    }
}); 
```

你没有说这个事件是什么，你的表模型是什么，但是由于表模型，你当然需要能够找到与你得到的事件对应的行和列. 通常使用 AbstractTableModel 包装一个`List<SomeBean>`. 使用列表的方法，您应该能够找到`SomeBean`要更新的实例的索引。

编辑：

正如我所说，定义表模型的典型方法是扩展 AbstractTableModel，并基于包装的 List 实现方法。但是，只要实现了表模型契约，没有什么能阻止您使用 Map 代替或添加 List，并向模型添加其他方法。List 将用于实现方法`getValueAt()`,`getRowCount()`等，例如，映射将允许快速找到列表中对象的索引。当然，将所有内容封装到自定义表模型中并保持两个集合同步是您的工作。

也就是说，我会采用一个简单的解决方案，即在列表上进行迭代以找到合适的行，并且仅在您确实遇到性能问题时才尝试优化（这可能只发生在一个巨大的表中）。维护这两个集合可能比简单地在列表上循环具有更大的开销。不要过早优化：这是万恶之源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T18:06:55.680

我的一般建议是使用一个`AsyncEventBus`通过调用`Executor`实现的。这将导致该事件总线的所有事件处理程序仅在 EDT 上被调用。`execute(Runnable)``SwingUtilities.invokeLater(Runnable)`

如果您有很多不想在 EDT 上处理的事件*，*您可以使用两个事件总线，只有一个调用 EDT 上的事件处理程序（UI 事件总线）。然后您的 UI 组件订阅 UI 事件总线。然后，您可以让您的主事件总线使用向主事件总线注册的中间对象将某些类型的事件转发到 UI，该对象仅将其接收到的事件发布到 UI 事件总线。

# sql - 使用 SQL 选择与人员列表关联的最早付款

> ID：13198395
> 
> 赞同：0
> 
> 时间：2012-11-02T15:33:53.377
> 
> 标签：sql, database, oracle

在 Oracle 数据库（我认为是 11G）上进行 SQL 查询时遇到问题。

我需要对两个表进行查询。第一个包含人员的标识符。第二个包含付款（您可以将其视为工资），每条记录都与具有外键的人相关联。

我需要做的是检索已知的人员列表（比如说标识符 1、2、5 和 10），最旧的付款（基于付款日期）。

我首先做的是：

```
select id_person, MIN(payment_date) 
from payment where id_person in (1, 2, 5, 10)
group by id_person; 
```

这检索类似：

```
1   19940623
2   20100429
5   20100204
10  20100111 
```

现在，我如何为每个人获取与最早付款相对应的“付款”表的完整记录？

我想不出这样做的方法......

答案必须在单个 SQL 查询中（我不能为每个人打电话，这很容易做到......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:40:55.100

尝试

```
 select * from payment p
 where id_person in (1, 2, 5, 10)
    And payment_date =
       (Select Min(payment_date)
        From payment
        Where id_person = p.id_person) 
```

根据您的评论：如果支付表有一个键（主键或唯一索引），则解决方案很简单。如果是这样，假设密钥在列 paymentId 上，然后..

```
 select * from payment p
 where id_person in (1, 2, 5, 10)
    And paymentId =
       (Selcet paymentId From payment p2
        Where id_person = p.id_person
           And payment_date =
             (Select Min(payment_date)
              From payment
              Where id_person = p.id_person)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T15:42:53.507

怎么样

```
SELECT * FROM Payment INNER JOIN (
    SELECT id_person, MIN(payment_date) 
    FROM payment p 
    WHERE id_person IN (1, 2, 5, 10)
    GROUP BY id_person;
    )
    ON Payment.id_person = p.idPerson AND Payment.payment_date = p.payment_date 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T19:40:44.613

这应该这样做。

```
select *
from (
   select id_person, 
          payment_date,
          row_number() over (partition by id_person order by payment_date) as rn
   from payment
   where id_person ind (1,2,5,10)
) t
where rn = 1 
```

# dotnetopenauth - 使用 openAuthdotnet 创建登录页面，例如 DisQus

> ID：13198397
> 
> 赞同：0
> 
> 时间：2012-11-02T15:34:08.223
> 
> 标签：dotnetopenauth

我正在尝试使用 DotNetOpenAuth，但不幸的是无法成功实现它。包装随附的样品无法正常工作。任何人都可以指出一个好的教程，它一步一步地描述了如何实现 OAuth（对于 google、facebook，而不是 openId）我的目标非常高（创建像 DisQus 这样的登录页面）但我被困在第一步:)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T05:40:19.823

[从http://sf.net/projects/dnoa](http://sf.net/projects/dnoa)获取样本。他们应该工作。

# php - 每个结果显示图像限制一个？

> ID：13198398
> 
> 赞同：0
> 
> 时间：2012-11-02T15:34:17.963
> 
> 标签：php, sql, search

我有一个正在使用的搜索脚本。它按名称或位置查找用户。我正在尝试向在搜索中找到的每个用户添加图像。但是当我这样做时，即使不在搜索中，它也会列出每个用户的图像，并重复搜索的名称和图像十几次，如下所示：

image1.jp 用户：michael image1.jp 用户：michael image1.jp 用户：michael image1.jp 用户：michael image1.jp 用户：michael image1.jp 用户：michael

image2.jp 用户：eric image2.jp 用户：eric image2.jp 用户：eric image2.jp 用户：eric image2.jp 用户：eric image2.jp 用户：eric

等等。有人可以告诉我如何限制它只为搜索中出现的每个用户个人资料显示一张图片，而不会将搜索中出现的用户明显限制为 1？

这是我的代码：

```
<form method="get" action="">
<input type="text" name="query" class="search" placeholder="Search Name/Location" style="width:120px;"/>
<input type="image" src="../PTB1/assets/img/icons/loginarrow1.png" class="searchbutton" name="submit" value="Start Search" />
</form>

<?php
//PHP CODE STARTS HERE

if(isset($_GET['submit'])){

// Change the fields below as per the requirements
$db_host="localhost";
$db_username="root";
$db_password="";
$db_name="playtime";
$db_tb_atr_name="display_name";

//Now we are going to write a script that will do search task
// leave the below fields as it is except while loop, which will display results on screen

mysql_connect("$db_host","$db_username","$db_password");
mysql_select_db("$db_name");

$query=mysql_real_escape_string($_GET['query']);

$query_for_result=mysql_query("SELECT *
                        FROM ptb_profiles
                        WHERE display_name like '%".$query."%' 
        OR location LIKE '%".$query."%' OR orientation LIKE '%".$query."%'");
echo "<div class=\"results\">";
while($data_fetch=mysql_fetch_array($query_for_result))
{
        $search_set = get_searched_escorts();
        while ($searched = mysql_fetch_array($search_set)) {
    echo "<div class=\"spacing\"><a href=\"profile.php?id={$data_fetch['user_id']}\" class=\"search\">";
    echo "<img width=80px height= 80px src=\"data/photos/{$searched['id']}/_default.jpg\" class=\"boxgrid\"/> "; 
     echo substr($data_fetch[$db_tb_atr_name], 0,160);
    echo "</a></div>";

}
}

mysql_close();
}

?> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:40:12.333

尝试放置 GROUP BY user_id
$query_for_result=mysql_query("
SELECT *
FROM ptb_profiles
WHERE display_name like '%".$query."%'
OR location LIKE '%".$query."%' ORorientation LIKE '%".$查询。"%'
GROUP BY user_id");

# sql-server - SQL Server 2012：限制 count(*) 查询的最大行数

> ID：13198399
> 
> 赞同：3
> 
> 时间：2012-11-02T15:34:18.710
> 
> 标签：sql-server, sql-server-2012

有没有办法限制count（*）的最大值，所以它在找到N行后停止计算行数？

我尝试了**SET ROWCOUNT N**和**TOP N**，但是当我使用 SELECT count(*) FROM MyTable 时它们被忽略了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T18:36:31.563

```
SELECT Count(*)
FROM (
   SELECT TOP(@MaxRowCount) *
   FROM MyTable
) as q 
```

我认为您的`WITH`解决方案可能性能不佳，因为它必须迭代每一行来分配`ROW_NUMBER()`。我相信这里的解决方案会表现得更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:06:38.647

我自己找到了解决方案。

```
With OrderedRows AS(
    SELECT ROW_NUMBER() OVER (ORDER BY SomeColumn) AS RowNumber
    FROM MyTable
)
SELECT count(*) FROM OrderedRows WHERE RowNumber <= @MaxRowCount; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T15:38:56.967

在您进行计数后，您不会使用 IF 语句来执行此操作吗？

或者可能是一个子查询？

从用户 ID 所在的用户中选择 count(*) 作为用户计数（从用户中选择前 5000 个用户 ID）

这将使您的潜在用户数为 5000 或更少。

# ios - 滚动到 UITableView 的顶部（和底部）之外 - 因此 tableview 可以像 Picker 一样工作

> ID：13198402
> 
> 赞同：2
> 
> 时间：2012-11-02T15:34:30.407
> 
> 标签：ios, uitableview, uipickerview

我需要实现类似选择器的东西 - 选择器窗口位于项目滚动列表的中心。它需要与整个屏幕一样高（但不要宽）。自定义 Picker 似乎非常困难或不可能，所以我选择了 UITableView。

一切看起来和工作都很好，除了我无法将 tableview 滚动到顶部或底部之外以获取选择器窗口下的第一个或最后几个项目。

问题本质上是，有没有办法让 UITableView 滚动到项目列表的顶部或底部？

这是通过拖动列表以使第一项位于选择器窗口下方而生成的一些调试输出：

> 2012-11-02 10:28:55.426 testProject[23288:707] itemPicker 滚动到 0.000000，-297.000000

当然，它又回到：

> 2012-11-02 10:31:04.085 testProject[23288:707] itemPicker 滚动到 0.000000，-0.000000

我一放手。我需要它不要弹回来。我已经尝试了很多变化来调整 tableview 的内容偏移、反弹和 scrollsToTop，但没有任何乐趣。

希望这个问题比这个似乎在问同样问题的[封闭问题](https://stackoverflow.com/questions/8077926/scroll-scrollview-like-a-picker)更清楚。如果我的问题不清楚，请告诉我，我会尽力澄清。

# php - MySQL 时区查询

> ID：13198407
> 
> 赞同：2
> 
> 时间：2012-11-02T15:34:40.783
> 
> 标签：php, mysql, timezone

我有两个字段：`time_scan_start`和`time_scan_end`（时间戳字段）。

当我使用 PDO 打开与 MySQL 的连接时，我使用`SET NAMES utf8,time_zone = "+0:00";`.

现在，当我在 MySQL 中进行查询时，我必须使用 UTC 时间`WHERE time_scan_start >= UTC`还是需要使用 PHP 本地区域？MySQL 会自行调整吗？

我用 gmdate 和 date 做了一些测试，有时它可以工作，其他的则不行。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:49:13.077

如果要与`TIMESTAMP`字段进行比较，则需要使用服务器时区中的比较值。您可以通过以下方式确定服务器时区：

```
SELECT @@time_zone; 
```

因此，如果你已经执行

```
SET NAMES time_zone = "+0:00"; 
```

那么您将使用基于 UTC 的值。

这是因为`TIMESTAMP`字段以 UTC 存储在 MySQL 中，并在显示（或比较）之前转换为服务器的时区。

注意：如果您要与`DATETIME`字段或`TIME`字段进行比较，则需要在与将值插入字段时使用的时区相同的时区中使用比较值。

这是因为`DATETIME`和`TIME`字段存储在 MySQL 中没有任何时区信息，并且在显示（或比较）之前没有转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T23:56:15.413

MySQL`DATETIME`对时区一无所知。因此，您需要**决定哪个时区将是您的“默认”**（通常是 UTC），并使用该时区存储所有时间戳，`CONVERT_TZ`如有必要，请使用。

然后，对搜索执行相同操作，即将值转换为 UTC，然后在搜索中使用它们。

# javascript - tr 的第一个 td 中的复选框（只有一个）给出未定义的

> ID：13198410
> 
> 赞同：2
> 
> 时间：2012-11-02T15:34:44.493
> 
> 标签：javascript

我在jsp中有一个表格。它包含动态 tr。Tr 可以是一个或多个。当只有一个 tr 时出现问题。如果不止一个 tr，所有输入元素也将具有相同的名称。

```
function getRowIndex( el ) {
            while( (el = el.parentNode) && el.nodeName.toLowerCase() !== 'tr' );
            if( el ) 
            return el.rowIndex - 1;
      }

function enableDisableRow(rowIndex){
           if(document.formName.check_all[rowIndex].checked == true){
                 document.formName.text_all[rowIndex].disabled = false;
           }
}

<table>
   <tr>
      <td>
          <input type="checkbox" name="check_all"       onclick="enableDisableRow(getRowIndex(this))" />
      </td>
          <input type="text" name="text_all" value="Hello" />
      </td>
   </tr>
</table> 
```

问题是`document.formName.check_all.checked`当只有一行时我会变得未定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:20:40.847

`document.formName.check_all``nodeList`仅当表单中有多个同名元素时才会返回 a ，否则它将简单地返回`input`元素并在其上使用数组表示法将 return `undefined`，当您尝试访问其属性时会导致语法错误。

如果您在同一个表单中没有具有相同输入名称的不同表，则可以使用[`getElementsByName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByName)DOM 方法，该方法将始终返回 a `nodeList`，或在旧浏览器中兼容的类似数组的结构。

```
function getRowIndex(el) {
    while ((el = el.parentNode) && el.nodeName.toLowerCase() !== 'tr');
    if (el) return el.rowIndex; //NOTE: I've also removed the -1 here
}
function enableDisableRow(rowIndex) {
    var checkboxes = document.getElementsByName('check_all'),
        textboxes = document.getElementsByName('text_all');

    if (checkboxes[rowIndex].checked) {
        textboxes[rowIndex].disabled = false;
    }
} 
```

[**Fiddle**](http://jsfiddle.net/qEaje/) - 请注意，我仅使用 jQuery 来添加动态行，因此您可以使用单行和多行进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:58:08.667

```
if (document.formName.check_all[rowIndex].checked == true) {
    document.formName.text_all[rowIndex].disabled = false;
} 
```

`document.formName.check_all`不返回数组或`nodeList`. 它只是`input`元素。所以不要在上面使用数组索引。另一个问题是您没有名为 的元素或表单`"formName"`。试试这个：

```
function getRowIndex(el) {
    while ((el = el.parentNode) && el.nodeName.toLowerCase() !== 'tr');
    if (el) return el.rowIndex - 1;
}

function enableDisableRow(rowIndex) {
    if (document.formName.check_all.checked == true) {
        document.formName.text_all.disabled = false;
    }
} 
```

和 HTML：

```
<form name="formName">
    <table name="">
       <tr>
          <td>
              <input type="checkbox" name="check_all" onclick="enableDisableRow(getRowIndex(this))" />
          </td>
           <td>
              <input type="text" name="text_all" value="Hello" />
          </td>
       </tr>
    </table>
</form>​​​​​​​​​​​​ 
```

# java - 将带分隔符的字符串解析为数组

> ID：13198411
> 
> 赞同：16
> 
> 时间：2012-11-02T15:34:45.513
> 
> 标签：java, arrays, string, parsing, delimiter

我有一个包含这种类型行的文件：

"安道尔城|ad|安道尔城|20430|42.51|1.51"

我基本上只想有一个字符串数组，其中包含 | 之间的条目。分隔符：

[“安道尔城”、“广告”、“安道尔城”、“20430”、“42.51”、“1.51”]

这可以用正则表达式完成吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-02T15:36:17.877

是的，当您从文件中读取每一行时，对每一行使用 String.split()。

```
line.split("\\|"); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-11-02T16:27:19.440

另一种方法是使用`String.split(...)`

```
String s="Hi farshad zeinali/ how are you?/i have a question!/can you help me?";
String[] ss=s.split("/");
for(int i=0;i<ss.length;i++)
{
    System.out.println(ss[i]);
} 
```

# php - 捕获 jquery 表单数据

> ID：13198416
> 
> 赞同：1
> 
> 时间：2012-11-02T15:35:09.993
> 
> 标签：php, jquery, jformer

我正在使用 JFormer 创建一个表单，并且可以使用 json_encode($formValues) 查看数据，但我无法在服务器上捕获 $formValues。

```
 var fvalue = <?php json_encode($formValues) ?>;
   var ftarget = "http://home.server.com/regcreate.php?data=";
   var a = document.createElement("script");
   a.type = "text/javascript";
   a.src = ftarget + fvalue;
   document.body.appendChild(a); 
```

如果值很简单，则此方法有效。如果我尝试发送 json_encode($formValues) 它不起作用。它没有发送任何东西。我会以正确的方式解决这个问题吗？我可以使用 Jquery 序列化函数而不是 json_encode 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:43:02.080

嗨，如果您使用的是 Jquery，您可以序列化表单并使用 ajax 表单 POST 提交。请注意，它不是 PHP 序列化对象，您可以正常访问表单值 $_POST

```
$('#btnId').click(function () {       

    $.ajax({
        //this is the php file that processes the data and send mail
        url: "regcreate.php",

        //GET method is used
        type: "POST",

        data: $("#Form").serialize(),
        //Do not cache the page
        cache: false,

        //success
        success: function (html) {             
            //assuming that pgp page returns value boolean value
            if (html=='1') {                 
                //add success message
            } else alert('Sorry, unexpected error. Please try again later.');              
        }      
    });
}); 
```

# jquery - fadein() 和 fadeout() 一次所有子标签

> ID：13198421
> 
> 赞同：2
> 
> 时间：2012-11-02T15:35:27.527
> 
> 标签：jquery, css

我有 5 个跨度元素，我试图在图像顶部淡入和淡出。如果我没有包含在 span 标签中的子 html 元素，则以下代码可以正常工作，但是如果我在某些元素周围添加 p 标签，则它不起作用。我添加 p 标签的原因是我希望文本堆叠在一起而不是内联，这样它就适合我要显示的区域。

既然我已经添加了 p 标签，我怎样才能让 jQuery 再次工作？

**编辑**为了澄清，我只想一次显示一个跨度。在页面加载时，显示第一个跨度，然后当它淡出时，显示第二个跨度，依此类推。我可以在 p 标签单独淡入和淡出的地方得到它，但宁愿 span 标签淡入淡出。

以某种方式使用 CSS 来堆叠文本会更好吗？（我的 CSS 很差）

**HTML**

```
 <span class="my-text"><p>Some long </p> Text</span>
 <span class="my-text"><p>Some long </p> Text</span>
 <span class="my-text"><p>Some long </p> Text</span>
 <span class="my-text"><p>Some long </p> Text</span>
 <span class="my-text"><p>Some long </p> Text that goes <p>farther</p></span> 
```

**jQuery**

```
jQuery(document).ready(function() { 
var quoteIndex = -1,
quotes = jQuery('.my-text');

function showNextQuote() {
    ++quoteIndex;
    quotes.eq(quoteIndex % quotes.length)
        .fadeIn(2000)
        .delay(2000)
        .fadeOut(2000, showNextQuote);
}
showNextQuote();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:06:58.857

您不应该将块级元素 ( `p`) 放在内联元素 ( `span`) 中 - 这是无效的。

试试这个 -[**演示**](http://jsfiddle.net/apgr9/2/)

***HTML***

```
<div class="my-text"><p>Some long </p> Text 1</div> 
```

***jQuery***

```
jQuery(document).ready(function() {
    var quoteIndex = -1,
    quotes = jQuery('.my-text');

    jQuery(".my-text:gt(0)").hide();    

    function showNextQuote() {
        ++quoteIndex;
        quotes.eq(quoteIndex % quotes.length)
            .fadeIn(2000)
            .delay(2000)
            .fadeOut(2000, showNextQuote);
    }
    showNextQuote();
}); 
```

# jquery - 水平滚动条不滚动

> ID：13198432
> 
> 赞同：0
> 
> 时间：2012-11-02T15:36:05.833
> 
> 标签：jquery, wordpress

我可能错过了一些非常简单的东西，但我无法让它工作！我基于这个问题 - [Horizo​​ntal scrolling div using buttons](https://stackoverflow.com/questions/8561124/horizontal-scrolling-div-using-buttons)

它不会向左或向右滚动。

我也有这个错误：

![在此处输入图像描述](../Images/e2afd31e44f2eae926923ad7952f3cb7.png)

此外，当单击链接时，页面会重新加载/跳转，有没有办法解决这个问题？

```
 <div id="imgThumbs" class="scroller" style="height:97px;width: 306px; overflow: hidden; white-space: nowrap;">
                    <a href="#" id="left-button">Left</a>  
                    <a href="#" id="right-button">Right</a>
                    <div id="contentScroller">                         
                    <?php $counter = 1; while(the_repeater_field('images')): ?>                     
                        <a href="#" style="text-decoration:none!IMPORTANT;color:white!IMPORTANT;" class="showImg">
                            <img class="image-<?php echo $counter; ?>" src="<?php echo the_sub_field('image'); ?>" width="90" height="68" alt="<?php echo the_title(); ?> <?php echo $counter; ?>" />
                        </a>
                    <?php $counter++; endwhile; ?>
                    </div>
                </div>

                <script>
                jQuery(document).ready(function ($) {
                        $('#right-button').click(function {
                            $('#contentScroller').animate({
                            marginLeft: -="306px"
                            }, "fast");
                        });
                        $('#left-button').click(function {
                            $('#contentScroller').animate({
                            marginLeft: +="306px"
                            }, "fast");
                        });                     
                    });
                    </script> 
```

## 更新

我刚刚发现了别的东西……即使内容结束，您也可以继续左右滚动。因此，如果那里有 6 个图像，它会显示前 3 个，单击右键，显示下一个 3，单击右键并滚动到空白区域，再次单击，依此类推。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:17:31.620

在您的点击处理程序中，`function {`应该是`function() {`.

`marginLeft: -="305px"`是不正确的。-= 需要放在引号内。`marginLeft:"-=305px"`

**更新**

我没有对此进行测试，但基本上你需要做的是确保在做动画之前你不在左边或右边。您可能需要为您的应用程序对此进行一些修改，但它应该为您提供基本概念。

```
jQuery(document).ready(function ($) {
    $('#right-button').click(function() {
        if($('#contentScroller').css('marginLeft') > 0){
            $('#contentScroller').animate({
                marginLeft: "-=306px"
                }, "fast");
             });
         }

    $('#left-button').click(function() {
         if($('#contentScroller').css('marginLeft') < -1 * $('#contentScroller').width()){
            $('#contentScroller').animate({
                marginLeft: "+=306px"
                }, "fast");
            });                     
         }
    });
}); 
```

# devise - 为修改控制器设计未定义的“resource_params”

> ID：13198433
> 
> 赞同：0
> 
> 时间：2012-11-02T15:36:11.113
> 
> 标签：devise, controller

我正在为我的用户使用设计。我想在向他们发送邮件以更改密码后更改重定向。所以我创建了一个个人控制器 users/passwords_controller

```
 class Users::PasswordsController < Devise::PasswordsController

  def new
    super
  end

  # POST /resource/password
  def create
    self.resource = resource_class.send_reset_password_instructions(resource_params)

    if successfully_sent?(resource)
      respond_with({}, :location => after_sending_reset_password_instructions_path_for(resource_name))
    else
      respond_with(resource)
    end
  end

  def edit
    super
  end

  def update
    super
  end

  protected

    def after_sending_reset_password_instructions_path_for(resource_name)
      root_url
    end

    def assert_reset_token_passed
      if params[:reset_password_token].blank?
        set_flash_message(:error, :no_token)
        redirect_to root_url
      end
    end
end 
```

问题是控制器不再知道“resource_params”（在“create”的第一行）。

我真的不知道如何解决。我应该把资源放在哪里？

# excel - 使用 vba 访问 Oracle 数据

> ID：13198438
> 
> 赞同：0
> 
> 时间：2012-11-02T15:36:17.400
> 
> 标签：excel, vba

设置我的 con 对象时，我不断收到 424 错误

```
Dim con As Object
Dim rs As Object
Dim query As String
Set con = CreateObject(ADODB.Connection)
Set rs = CreateObject(ADODB.Recordset)

strCon = "Driver={Microsoft ODBC for Oracle}; " & _
"CONNECTSTRING=(jdbc:oracle:thin" & _
"(ADDRESS=(PROTOCOL=TCP)" & _
"(HOST=somehost)(PORT=10080))" & _
"(CONNECT_DATA=(SERVICE_NAME=somename))); uid=uid; pwd=pwd;" 
```

谁能让我不要我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:48:05.753

像这样：

```
Set con = CreateObject("ADODB.Connection")
Set rs = CreateObject("ADODB.Recordset") 
```

# mobile - 数据库提供移动设备宽度、高度和分辨率

> ID：13198440
> 
> 赞同：0
> 
> 时间：2012-11-02T15:36:21.023
> 
> 标签：mobile, device-detection

我正在寻找基于设备制造商和使用 java 的设备型号提供移动设备宽度、高度、分辨率和像素纵横比的数据库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:43:23.143

[51degrees.mobi](http://51degrees.mobi/Support/Documentation/Java.aspx)提供 Java 支持。您可以使用它查询设备属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:55:28.267

大玩家是[Device Atlas](https://deviceatlas.com/resources/download-enterprise-api)和[WURFL](http://www.scientiamobile.com/)。

两者都有您可以与 Java 一起使用的 API。但是，请注意它们不是免费的。

# javascript - 在 Javascript 中优化和实现冗长的函数数组

> ID：13198442
> 
> 赞同：0
> 
> 时间：2012-11-02T15:36:31.337
> 
> 标签：javascript, arrays, function, optimization, first-class-functions

我目前正在用 Javascript 实现一个模拟器，模拟平台的内存模型相当复杂，所以我通过一组函数进行读写，例如：

```
var MRead = [];
ReadBiosSpace = function(addr) { return (EnableBios ? BIOS[addr] : ROM[addr]); };
for (i = 0; i <= 0xFF; i++) { MRead[i] = ReadBiosSpace; };
function Read(addr) { return MRead[addr](addr); }; 
```

因为显然 Read 和 Write 函数会被非常频繁地调用（每条指令至少一次，主要执行是`Operators[Read(ProgramCounter)]()`）它们对性能非常敏感。

有没有可以做的性能优化？这是最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:42:41.737

如果`EnableBios`不经常更改，那么我能看到的唯一明显的增强是有两个不同的版本，`ReadBiosSpace`并在每次更改时将适当的版本重新分配给前 256 个位置。

这将避免每次访问这些位置之一时都必须调用三元运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:02:10.363

除了其他答案之外，您还可以使用它：

```
for (i = 0xFF - 1; i--) { MRead[i] = ReadBiosSpace; }; 
```

# javascript - 如何在 angular.bootstrap() 之后在 $rootScope 上设置值

> ID：13198443
> 
> 赞同：2
> 
> 时间：2012-11-02T15:36:34.663
> 
> 标签：javascript, angularjs

我正在使用 angular.bootstrap() 来初始化我的应用程序。在此之后，我想为我的 $rootScope 分配一些值。我正在尝试这个，但它对我不起作用：

```
var app = angular.module('myApp', []);
var modulesToLoad = ['myApp'];
angular.bootstrap(b, modulesToLoad);
app.run(function($rootScope) {
    $rootScope.isLoading = false;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T16:17:48.100

bootstrap 函数返回`$injector`，因此您可以执行以下操作：

```
var app = angular.module('myApp', []);
var modulesToLoad = ['myApp'];
var injector = angular.bootstrap(b, modulesToLoad);
injector.invoke(function($rootScope) {
    $rootScope.isLoading = false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-10T00:44:00.273

```
<body>
    {{globalText}}
    <div ng-controller="MyCtrl">
      {{localText}}
    </div> 

var myModule = angular.module('app2', []);
myModule.value('globalText', 'GLOBAL');
myModule.run(function($rootScope, globalText) {

  $rootScope.globalText = globalText;
});

myModule.controller('MyCtrl', function($scope) {
  $scope.localText = 'LOCAL';
}); 
```

# android - 将多个文件保存到 ZIP 而不保存它们并重新读取它们

> ID：13198445
> 
> 赞同：1
> 
> 时间：2012-11-02T15:36:40.313
> 
> 标签：android, android-file

我正在从字符串创建多个文件。

例如4个字符串；一个是 xml 格式，一个是 3 个 csv 格式。

我的问题是我是否必须先将这些字符串保存到一个文件中，然后再读取它，然后再写入 ZipOutputStream？只是看起来真的有点浪费。

**提前致谢**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:16:41.457

因此，这是我无需创建物理文件即可保存多个文件的解决方案。注意字符串大小。

```
for (int i =0; i <stringArray.size();i++) {
                String outString = stringArray.get(i);
                String fileName = null;
                if (i == 0) {
                    fileName = "StringOne.xml";

                } else if (i == 1) {
                    fileName = "StringTwo.csv";
                } else if (i ==2) {
                    fileName = "StringThree.csv";
                } else if (i == 3) {
                    fileName = "StringFour.csv";
                }
                Log.d("ZipCreation", "Creating "+fileName);
                // SAVE THE STRING AS A BYTE ARRAY IN MEMORY INSTEAD OF CREATING AND SAVING TO A NEW FILE
                ByteArrayOutputStream baos = new ByteArrayOutputStream();
                DataOutputStream byteOut = new DataOutputStream(baos);
                byte[] data = stringArray.get(i).getBytes("UTF-8");
                byteOut.write(data);
                byteOut.close();
                byte[] input = baos.toByteArray();

                ZipEntry entry = new ZipEntry(fileName);
                entry.setSize(input.length);
                zos.putNextEntry(entry);
                zos.write(input);
                zos.closeEntry();
            } 
```

**希望这可以帮助某人**

# objective-c - 有没有办法在 UIImageView 中显示部分图像？

> ID：13198451
> 
> 赞同：1
> 
> 时间：2012-11-02T15:37:01.030
> 
> 标签：objective-c, xcode, uiimageview

我只想在 UIImageView 中显示部分图像，而不是整个图像。我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T15:48:46.733

您可以尝试裁剪原始图像：

```
UIImage *myImage = [UIImage imageWithContentsOfFile:"my_image.png"]
CGRect *rect = CGRectMake(0, 0, 64, 64);
CGImageRef imageRef = CGImageCreateWithImageInRect([myImage CGImage], rect);
UIImage *topLeftImage = [UIImage imageWithCGImage:imageRef]]; 
CGImageRelease(imageRef); 
```

或者，如果您希望用户能够平移图像，您可以将图像添加到`UIScrollView`.

# c# - 验证 NullOrWhiteSpace 的 TextBoxStyle 的 MultiTrigger.Conditions

> ID：13198454
> 
> 赞同：1
> 
> 时间：2012-11-02T15:37:24.407
> 
> 标签：c#, .net, validation, multitrigger

我需要触发 NameTextBox 的样式，这样，当输入名称为空或空白时，TextBox 将自身着色为红色。样式已创建，如何将其与此条件相关联？现在，这是它的条件，但不包括空格：

```
 <MultiTrigger.Conditions>
        <Condition Property="Necessity"
                   Value="Mandatory" />
        <Condition Property="Text"
                   Value="" />
    </MultiTrigger.Conditions> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:42:03.973

即使我个人不是很喜欢这个界面，IDataErrorInfo 应该已经涵盖了您：[http://codeblitz.wordpress.com/2009/05/08/wpf-validation-made-easy-with-idataerrorinfo/](http://codeblitz.wordpress.com/2009/05/08/wpf-validation-made-easy-with-idataerrorinfo/)

另一种解决方案：将“IMultiValueConverter”添加到您的 MultiBinding，并修剪那里的文本。然后，您的 MultiBinding.Condition 将获得一个空字符串，即使该框已填充空格。

# grails - 有没有办法为非开发环境禁用 gsp 缓存

> ID：13198456
> 
> 赞同：0
> 
> 时间：2012-11-02T15:37:29.820
> 
> 标签：grails, grails-2.0

我正在寻找一个配置设置，它会告诉 Grails 2.1 不要在自定义环境中缓存。这在 Dev 中不需要，但如果您指定自定义环境，Grails 似乎会将其视为 Prod 并缓存 GSP。除了编写自定义 servlet 之外，是否有人对此有解决方案？是否有我可以在 Config.groovy 中设置的配置设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:48:01.593

有这个插件（我还没有测试它，但听起来你可能需要）： http: [//grails.org/plugin/cache-headers](http://grails.org/plugin/cache-headers)

并且有一个 Config.groovy 的设置：

```
grails.gsp.enable.reload=true 
```

这对性能不利，所以不要在生产环境中使用它！

# php - 在不安装 PDO 的情况下将 Php 与 sqlserver 连接

> ID：13198460
> 
> 赞同：0
> 
> 时间：2012-11-02T15:37:43.620
> 
> 标签：php, sql-server

我需要知道是否有任何方法可以`conect php with sqlserver without install a PDO`使用 php，我想避免安装 pdo 的原因是我有一个应用程序的生产环境，并且已经有大约 100 个应用程序正在运行，所以请求安装它，它将被拒绝它。

如果您有任何建议，它将对我有用。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:39:58.197

我猜你指的是连接到 Microsoft SQL Server。如果是这种情况，您已经安装了 php mssql_extension 并使用了扩展的本机功能。

[mssql php手册](http://php.net/manual/en/book.mssql.php)

***您担心安装 PHP 扩展。但无论如何你必须这样做，因为 php 核心不处理数据库连接。就是通过扩展你拥有这些能力。因此，必须安装 PDO 或 mssql 扩展。

你不会仅仅通过安装一个新的 php 扩展来破坏任何东西。您可以只安装扩展并告诉 apache（如果您正在使用它）重新加载而不是重新启动。这些不会影响您正在运行的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:42:01.310

> 并且已经有大约 100 个应用程序正在运行

您不会通过添加对 MSSQLserver 的 PDO 支持来增加正在运行的应用程序的数量。OTOH 大多数通过应用程序代理获取连接的方法都会增加正在运行的进程数量。

唯一有意义的其他选项是使用[ODBC](http://php.net/manual/en/book.uodbc.php)或 mssql 扩展 - 但如果尚未安装，那么它可能至少与本机 PDO 安装一样痛苦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T15:43:01.750

如果您的托管环境在 Windows 中，您可以使用 microsoft 提供的以下内容：

[http://www.microsoft.com/en-us/download/details.aspx?id=20098](http://www.microsoft.com/en-us/download/details.aspx?id=20098)

# java - 服务器端 Java 应用程序代码未编译 - 为什么？

> ID：13198461
> 
> 赞同：0
> 
> 时间：2012-11-02T15:37:56.763
> 
> 标签：java, eclipse, command-line, compiler-construction, rpc

```
package uk.ac.hw.oncrpc;
import org.acplt.oncrpc.*;
import org.acplt.oncrpc.server.*;

import uk.ac.hw.quizgame.Game;

import java.io.IOException;

public class quizServer extends quizServerStub {
    private double sum;

    public quizServer() throws OncRpcException, IOException {
        //sum = 0.0; May used quiz globals here
    }

    @Override
    public void start_1(String arg1) {
        // TODO Auto-generated method stub

    }

    @Override
    public String requestQuestion_1() {
        // TODO Auto-generated method stub
        String question = "What is the atomic number of lithium?";

        return question;
    }

    @Override
    public String checkAnswer_1(String arg1) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void quit_1(String arg1) {
        // TODO Auto-generated method stub

    }

    @Override
    public void help_1(String arg1) {
        // TODO Auto-generated method stub

    }

    public static void main(String[] args) {
        try { 
            quizServer server = new quizServer();
            System.out.println("Quiz ready");
            server.run();
        } catch ( Exception e ) { e.printStackTrace(System.out); }
    }

} 
```

对于上面的代码，我从编译器中得到以下信息

```
javac quizServer.java quizServer.java:2: error: package org.acplt.oncrpc does not exist import org.acplt.oncrpc.*; ^ quizServer.java:3: error: package org.acplt.oncrpc.server does not exist import org.acplt.oncrpc.server.*; ^ quizServer.java:5: error: package uk.ac.hw.quizgame does not exist import uk.ac.hw.quizgame.Game;
                        ^ quizServer.java:9: error: cannot find symbol public class quizServer extends quizServerStub {
                                ^   symbol: class quizServerStub quizServer.java:12: error: cannot find symbol
        public quizServer() throws OncRpcException, IOException {
                                   ^   symbol:   class OncRpcException   location: class quizServer quizServer.java:17: error: method does not override or implement a method from a  supertype
        @Override
        ^ quizServer.java:23: error: method does not override or implement a method from a  supertype
        @Override
        ^ quizServer.java:31: error: method does not override or implement a method from a  supertype
        @Override
        ^ quizServer.java:37: error: method does not override or implement a method from a  supertype
        @Override
        ^ quizServer.java:43: error: method does not override or implement a method from a  supertype
        @Override
        ^ quizServer.java:53: error: cannot find symbol
                        server.run();
                              ^   symbol:   method run()   location: variable server of 
```

输入 quizServer 11 错误

但我不明白为什么这会导致错误？我没有在 Eclipse IDE 中收到这些错误，那么为什么它们会出现在这里？

如果这是一个愚蠢的问题，真的很抱歉。我很少使用命令来编译，但在这种情况下我必须这样做，因为我需要一个命令来运行我的服务器代码，而另一个命令在同一台机器上运行我的客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:41:00.673

```
 package uk.ac.hw.quizgame does not exist import uk.ac.hw.quizgame.Game; 
```

您的应用程序中是否有使用此名称的包？如果没有（或）删除相关代码（或）您需要将适当的 jar 添加到类路径。

# xcode4.5 - 自上次工作以来未进行任何更改时，由于未捕获的异常“NSUnknownKeyException”而终止应用程序？

> ID：13198467
> 
> 赞同：2
> 
> 时间：2012-11-02T15:38:22.587
> 
> 标签：xcode4.5

自从上次工作以来，我没有对任何一个 ViewController 进行任何更改。我现在收到此错误。

> 2012-11-02 15:15:14.206 App[15247:c07] *** 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类不符合按键电话的键值编码。*** First throw call stack: (0x1d86012 0x11c3e7e 0x1e0efb1 0xc70711 0xbf1ec8 0xbf19b7 0xc1c428 0x3280cc 0x11d7663 0x1d8145a 0x326bcf 0x1ebe37 0x1ec418 0x1ec648 0x1ec882 0x27f4 0x11d7705 0x10e920 0x10e8b8 0x1cf671 0x1cfbcf 0x1ced38 0x13e33f 0x13e552 0x11c3aa 0x10dcf8 0x1ce1df9 0x1ce1ad0 0x1cfbbf5 0x1cfb962 0x1d2cbb6 0x1d2bf44 0x1d2be1b 0x1ce07e3 0x1ce0668 0x10b65c 0x2052 0x1f85 0x1) libc++ abi.dylib：终止调用抛出异常

任何人都可以帮助找出发生了什么变化和问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:43:31.317

使用符号查看堆栈跟踪会更有用......但通常的原因是 xib 或情节提要文件中的某些内容引用了代码中不存在的插座。如果在您的情况下是这样，那么看起来插座好像是命名的`phone`。

（我有点惊讶它只是说“这堂课”而不是告诉你它对哪一个不满意。）

# c# - FluentValidation 多个验证器

> ID：13198471
> 
> 赞同：16
> 
> 时间：2012-11-02T15:38:28.273
> 
> 标签：c#, .net, fluentvalidation

我可以向一个对象添加多个验证器吗？例如：

```
public interface IFoo
{
    int Id { get; set; }
    string Name { get; set; }
}

public interface IBar
{
    string Stuff { get; set; }
}

public class FooValidator : AbstractValidator<IFoo>
{
    public FooValidator ()
    {
        RuleFor(x => x.Id).NotEmpty().GreaterThan(0);
    }
}

public class BarValidator : AbstractValidator<IBar>
{
    public BarValidator()
    {
        RuleFor(x => x.Stuff).Length(5, 30);
    }
}

public class FooBar : IFoo, IBar
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Stuff { get; set; }
}

public class FooBarValidator : AbstractValidator<FooBar>
{
    public FooBarValidator()
    {
        RuleFor(x => x)
            .SetValidator(new FooValidator())
            .SetValidator(new BarValidator());
    }
} 
```

运行测试。

```
FooBarValidator validator = new FooBarValidator();
validator.ShouldHaveValidationErrorFor(x => x.Id, 0); 
```

我得到一个`InvalidOperationException`：

> 无法为表达式 x => x 自动确定属性名称。请通过调用“WithName”指定自定义属性名称。

有什么方法可以实现这一点，还是我试图以一种不应该使用的方式使用 FluentValidation？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-02T17:52:14.087

RuleFor 正在尝试创建属性级规则。您还可以使用 AddRule 函数添加通用规则。

使用它，我创建了一个复合规则概念证明。它接收一组其他验证器并运行它们。代码直接`yield break`来自. 我不确定如何处理它，所以我从源头上抓住了它。我没有追踪它的全部目的，但一切似乎都按原样工作:)`FluentValidator``DelegateValidator`

### 代码

```
public interface IFoo
{
    int Id { get; set; }
    string Name { get; set; }
}

public interface IBar
{
    string Stuff { get; set; }
}

public class FooValidator : AbstractValidator<IFoo>
{
    public FooValidator()
    {
        RuleFor(x => x.Id).NotEmpty().GreaterThan(0);
    }
}

public class BarValidator : AbstractValidator<IBar>
{
    public BarValidator()
    {
        RuleFor(x => x.Stuff).Length(5, 30);
    }
}

public class FooBar : IFoo, IBar
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Stuff { get; set; }
}

public class CompositeValidatorRule : IValidationRule
{
    private IValidator[] _validators;

    public CompositeValidatorRule(params IValidator[] validators)
    {
        _validators = validators;
    }

    #region IValidationRule Members
    public string RuleSet
    {
        get; set;
    }

    public IEnumerable<ServiceStack.FluentValidation.Results.ValidationFailure> Validate(ValidationContext context)
    {
        var ret = new List<ServiceStack.FluentValidation.Results.ValidationFailure>();

        foreach(var v in _validators)
        {
            ret.AddRange(v.Validate(context).Errors);
        }

        return ret;
    }

    public IEnumerable<ServiceStack.FluentValidation.Validators.IPropertyValidator> Validators
    {
        get { yield break; }
    }
    #endregion
}

public class FooBarValidator : AbstractValidator<FooBar>
{
    public FooBarValidator()
    {
        AddRule(new CompositeValidatorRule(new FooValidator(), new BarValidator()));
    }
} 
```

### 基本测试用例：

```
 [TestMethod]
    public void TestValidator()
    {
        FooBarValidator validator = new FooBarValidator();
        var result = validator.Validate(new FooBar());

    } 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-02-20T23:16:51.863

另一种可能性是覆盖Validate：

```
public override ValidationResult Validate(ValidationContext<FooBar> context)
{
    var fooResult = new FooValidator().Validate(context.InstanceToValidate);
    var barResult = new BarValidator().Validate(context.InstanceToValidate);

    var errors = new List<ValidationFailure>();
    errors.AddRange(fooResult.Errors);
    errors.AddRange(barResult.Errors);

    return new ValidationResult(errors);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-09-22T07:08:45.143

“包括规则。您可以包括来自其他验证器的规则，只要它们验证相同的类型。”

```
public class PersonValidator : AbstractValidator<Person> {
    public PersonValidator() {
        Include(new PersonAgeValidator());
        Include(new PersonNameValidator());
    }
} 
```

[https://docs.fluentvalidation.net/en/latest/including-rules.html](https://docs.fluentvalidation.net/en/latest/including-rules.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T15:41:48.800

如果这有助于您尝试做的事情，您可以使用 RuleSets 应用不同类型的验证：

[FluentValidation 规则集](http://fluentvalidation.codeplex.com/wikipage?title=CreatingAValidator&referringTitle=Documentation&ANCHOR#RuleSets)

# sql - 当触发器在表上时，不能使用带有 OUTPUT 子句的 UPDATE

> ID：13198476
> 
> 赞同：87
> 
> 时间：2012-11-02T15:38:39.620
> 
> 标签：sql, sql-server, sql-server-2008-r2

我正在执行`UPDATE`with`OUTPUT`查询：

```
UPDATE BatchReports
SET IsProcessed = 1
OUTPUT inserted.BatchFileXml, inserted.ResponseFileXml, deleted.ProcessedDate
WHERE BatchReports.BatchReportGUID = @someGuid 
```

这句话很好；直到在表上定义触发器。然后我的`UPDATE`语句将得到错误[334](http://msdn.microsoft.com/en-us/library/aa937592(v=sql.80).aspx)：

> 如果语句包含没有 INTO 子句的 OUTPUT 子句，则 DML 语句的目标表“BatchReports”不能有任何启用的触发器

现在 SQL Server 团队在一篇博文中解释了这个问题——[带有 OUTPUT 子句的 UPDATE——触发器——和 SQLMoreResults](https://techcommunity.microsoft.com/t5/sql-server/update-with-output-clause-8211-triggers-8211-and-sqlmoreresults/ba-p/383457)：

> 错误消息是不言自明的

他们还给出了解决方案：

> 应用程序已更改为使用 INTO 子句

除了我无法对整个博客文章做出判断。

所以让我问我的问题：我应该改变什么`UPDATE`才能使它起作用？

## 也可以看看

*   [带有 OUTPUT 子句的 UPDATE – 触发器 – 和 SQLMoreResults](http://blogs.msdn.com/b/sqlprogrammability/archive/2008/07/11/update-with-output-clause-triggers-and-sqlmoreresults.aspx)
*   [为什么不允许 MERGE 语句的目标表启用规则？](https://stackoverflow.com/questions/6504173/why-is-the-target-table-of-a-merge-statement-not-allowed-to-have-enabled-rules)
*   [语句包含没有 INTO 子句错误的 OUTPUT 子句](https://stackoverflow.com/questions/12537653/statement-contains-an-output-clause-without-into-clause-error)

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-11-02T16:04:06.790

**能见度警告**：不要[其他答案](https://stackoverflow.com/questions/13198476/cannot-use-update-with-output-clause-when-a-trigger-is-on-the-table/13198551#13198551)。它会给出不正确的值。继续阅读为什么它是错误的。

* * *

`UPDATE`鉴于在 SQL Server 2008 R2中工作所需的复杂性`OUTPUT`，我将查询更改为：

```
UPDATE BatchReports  
SET IsProcessed = 1
OUTPUT inserted.BatchFileXml, inserted.ResponseFileXml, deleted.ProcessedDate
WHERE BatchReports.BatchReportGUID = @someGuid 
```

到：

```
SELECT BatchFileXml, ResponseFileXml, ProcessedDate FROM BatchReports
WHERE BatchReports.BatchReportGUID = @someGuid

UPDATE BatchReports
SET IsProcessed = 1
WHERE BatchReports.BatchReportGUID = @someGuid 
```

基本上我停止使用`OUTPUT`. 这还不错，因为**Entity Framework 本身也**使用了同样的 hack！

希望~~2012~~ ~~2014~~ ~~2016~~ ~~2018~~ ~~2019~~ 2020 会有更好的实施。

* * *

## **更新：使用 OUTPUT 是有害的**

我们开始的问题是尝试使用该`OUTPUT`子句来检索表中的*“之后”*值：

```
UPDATE BatchReports
SET IsProcessed = 1
OUTPUT inserted.LastModifiedDate, inserted.RowVersion, inserted.BatchReportID
WHERE BatchReports.BatchReportGUID = @someGuid 
```

然后达到了SQL Server 中众所周知的限制（*“不会修复”错误）：*

> 如果语句包含没有 INTO 子句的 OUTPUT 子句，则 DML 语句的目标表“BatchReports”不能有任何启用的触发器

## 解决方法尝试 #1

所以我们尝试了一些我们将使用中间`TABLE`变量来保存`OUTPUT`结果的方法：

```
DECLARE @t TABLE (
   LastModifiedDate datetime,
   RowVersion timestamp, 
   BatchReportID int
)

UPDATE BatchReports
SET IsProcessed = 1
OUTPUT inserted.LastModifiedDate, inserted.RowVersion, inserted.BatchReportID
INTO @t
WHERE BatchReports.BatchReportGUID = @someGuid

SELECT * FROM @t 
```

除了因为不允许将 a`timestamp`插入表（甚至是临时表变量）而失败。

## 解决方法尝试 #2

我们偷偷知道 a`timestamp`实际上是一个 64 位（又名 8 字节）的无符号整数。我们可以将临时表定义更改为使用`binary(8)`而不是`timestamp`：

```
DECLARE @t TABLE (
   LastModifiedDate datetime,
   RowVersion binary(8), 
   BatchReportID int
)

UPDATE BatchReports
SET IsProcessed = 1
OUTPUT inserted.LastModifiedDate, inserted.RowVersion, inserted.BatchReportID
INTO @t
WHERE BatchReports.BatchReportGUID = @someGuid

SELECT * FROM @t 
```

这行得通，***除了值是错误的***。

我们返回的时间戳`RowVersion`不是 UPDATE 完成后时间戳的值：

*   **返回时间戳**：`0x0000000001B71692`
*   **实际时间戳**：`0x0000000001B71693`

这是因为`OUTPUT`我们表中的值**不是**UPDATE 语句末尾的值：

*   UPDATE 语句开始
    *   修改行
        *   时间戳已更新*（例如 2 → 3）*
    *   OUTPUT 检索新的时间戳*（即 3）*
    *   触发运行
        *   再次修改行
            *   时间戳已更新*（例如 3 → 4）*
*   UPDATE 语句完成
*   OUTPUT 返回**3** *（错误值）*

这表示：

*   我们没有得到时间戳，因为它存在于 UPDATE 语句（**4**）的末尾
*   相反，我们得到时间戳，因为它位于 UPDATE 语句（**3**）的不确定中间
*   我们没有得到正确的时间戳

修改行中*任何*值的**任何**触发器也是如此。不会在 UPDATE 结束时输出值。*`OUTPUT`*

 **这意味着您不能相信 OUTPUT 会返回任何正确的值。*

这个痛苦的现实记录在 BOL 中：

> 从 OUTPUT 返回的列反映了在 INSERT、UPDATE 或 DELETE 语句完成之后但在触发器执行之前的数据。

## Entity Framework 是如何解决的？

.NET Entity Framework 使用 rowversion 实现乐观并发。EF 依赖于在`timestamp`发布 UPDATE 后知道它存在的值。

由于您不能`OUTPUT`用于任何重要数据，Microsoft 的 Entity Framework 使用与我相同的解决方法：

## 解决方法 #3 - 最终 - 不要使用 OUTPUT 子句

为了检索*after*值，实体框架发出：

```
UPDATE [dbo].[BatchReports]
SET [IsProcessed] = @0
WHERE (([BatchReportGUID] = @1) AND ([RowVersion] = @2))

SELECT [RowVersion], [LastModifiedDate]
FROM [dbo].[BatchReports]
WHERE @@ROWCOUNT > 0 AND [BatchReportGUID] = @1 
```

不要使用`OUTPUT`.

是的，它受到竞争条件的影响，但这是 SQL Server 可以做的最好的事情。

# 那么 INSERT 呢？

做实体框架做的事情：

```
SET NOCOUNT ON;

DECLARE @generated_keys table([CustomerID] int)

INSERT Customers (FirstName, LastName)
OUTPUT inserted.[CustomerID] INTO @generated_keys
VALUES ('Steve', 'Brown')

SELECT t.[CustomerID], t.[CustomerGuid], t.[RowVersion], t.[CreatedDate]
FROM @generated_keys AS g
   INNER JOIN Customers AS t
   ON g.[CustomerGUID] = t.[CustomerGUID]
WHERE @@ROWCOUNT > 0 
```

同样，他们使用`SELECT`语句来读取行，而不是信任 OUTPUT 子句。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-11-02T15:43:06.207

要解决此限制，您需要做 `OUTPUT INTO ...`一些事情。例如，声明一个中间表变量作为目标，然后`SELECT`从中。

```
DECLARE @T TABLE (
  BatchFileXml    XML,
  ResponseFileXml XML,
  ProcessedDate   DATE,
  RowVersion      BINARY(8) )

UPDATE BatchReports
SET    IsProcessed = 1
OUTPUT inserted.BatchFileXml,
       inserted.ResponseFileXml,
       deleted.ProcessedDate,
       inserted.Timestamp
INTO @T
WHERE  BatchReports.BatchReportGUID = @someGuid

SELECT *
FROM   @T 
```

正如另一个答案中所警告的那样，如果您的触发器以影响您正在使用的列的方式写回`UPDATE`语句本身修改的行，`OUTPUT`那么您可能不会发现结果有用，但这只是触发器的一个子集。上述技术在其他情况下可以正常工作，例如触发器记录到其他表以进行审计，或者即使原始行被写回触发器中也返回插入的标识值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-13T09:14:41.380

为什么将所有需要的列放入表变量中？我们只需要主键，我们可以在 UPDATE 之后读取所有数据。使用事务时没有种族：

```
DECLARE @t TABLE (ID INT PRIMARY KEY);

BEGIN TRAN;

UPDATE BatchReports SET 
    IsProcessed = 1
OUTPUT inserted.ID INTO @t(ID)
WHERE BatchReports.BatchReportGUID = @someGuid;

SELECT b.* 
FROM @t t JOIN BatchReports b ON t.ID = b.ID;

COMMIT; 
```*

# c# - Hector 中的 KeySpace 和 KeySpaceDefinition 有什么区别？

> ID：13198481
> 
> 赞同：3
> 
> 时间：2012-11-02T15:38:57.473
> 
> 标签：c#, java, cassandra, hector

我对 Hector 和 Cassandra 的世界还比较陌生。
我熟悉 和 的`KeySpaces`概念`ColumnFamilies`。

`KeySpace`类型和类型有什么区别`KeySpaceDefinition`？
它们可以互换吗？

两种方法通过 Factory:
`CreateKeySpace()`和`CreateKeyspaceDefinition()`.

这两个电话有什么区别，我什么时候使用它们？

如果我想执行 CQL 查询，我需要使用`KeySpace`.

```
CqlQuery cq = new CqlQuery(keySpace, .., .., ..) 
```

如何`KeySpace`从集群中检索现有的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T15:57:42.723

Hector 文档……如果您是 Cassandra 的新手，那真是太可怕了……</p>

A`KeyspaceDefinition`描述 Cassandra 中的一个键空间，而 a`Keyspace`是一个引用现有键空间的对象，允许您指定 Hector 应该向哪个键空间发出请求。

您可能只需要`KeyspaceDefinition`在创建新文件或检索密钥空间上的信息时使用。`Keyspace`每次执行任何类型的请求（变异/查询）时，都需要一个对象。

检索现有的密钥空间是使用`HFactory.createKeyspace(String, Cluster)`. 请注意，这实际上并没有在 Cassandra 中*创建*密钥空间，它只是为 Hector 创建了一个对象。创建一个实际的键空间由`cluster.addKeyspace(KeyspaceDefinition)`.

# r - R igraph 包 - 改变箭头形状

> ID：13198486
> 
> 赞同：1
> 
> 时间：2012-11-02T15:39:11.467
> 
> 标签：r, igraph, shape

我对整个 R 编码问题还很陌生，但需要冒险进行我的社交网络分析和可视化。但是，我在 R 中使用的 igraph 包遇到了问题。虽然我能够更改线宽、类型、顶点颜色、形状等，但我无法更改箭头形状。我花了相当多的时间在网上搜索，但无济于事。我发现的唯一与我的情况直接相关的网站是：

[https://bugs.launchpad.net/igraph/+bug/1026648](https://bugs.launchpad.net/igraph/+bug/1026648)

因此，我想知道这里是否有人会知道该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:31:33.063

不，目前无法更改。

更准确地说，因为 igraph 是开源的，如果你真的致力于这样做并且有时间，你可以获取源代码并编写不同的形状。

或者，您可以以某种格式导出您的网络（可能 GraphML 或 GML 是最好的选择），然后使用其他一些软件来绘制它。例如[Gephi](http://gephi.org)现在很流行，它可能支持各种箭头形状。

# java - 我想要一个表单，在提交和验证后会打开一个包含结果的新选项卡。我使用该<h:form 2="" 3="" 4="" 3603="" target="_blank" 方法获取新选项卡，但它在新选项卡中显示验证错误。如果验证通过，我希望它只打开新选项卡。="" 我的猜测是唯一真正的跨浏览器解决方案是在提交时进行一些="" sjax="" 验证，但我不确定是否有任何库可以="" 问问题="" 2012-11-02t15:39:12.997="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 我想要一个表单，在提交和验证后会打开一个包含结果的新选项卡。我使用该<h:form="" 验证，但我不确定是否有任何库可以为我执行此操作。="" 那么，有没有一种方法可以验证并仅在验证通过时打开一个新窗口？="" 如果您可以使用某些="" ajax="" 行为使用="" javascript="" 调用验证，则可以使用如下onsubmit事件函数轻松完成：="" function="" fnsubmit(){="" var="" validated="performValidation();" if(validated){="" document.getelementbyid('formname').target="_blank" ;="" document.getelementbyid('formaname').submit();="" }="" javajsf="" 回答="" answer="" 由于您没有提供任何代码示例，我假设您在其中使用="" a<h:form="">和 a <h:commandbutton>。 如果是这样，你必须做一个简单的技巧来克服这个问题。您必须使用 a<a4j:commandbutton>而不是您的<h:commandbutton>并保持<h:commandbutton>隐藏。然后使用 的oncomplete事件<a4j:commandbutton>来判断是否click为<h:commandbutton>. <h:commandbutton仅当验证通过时才由 javascript="" 单击。="" <h:form="" target="_blank"><h:inputtext value="" required="true" id="txt"><rich:message for="txt"><h:commandbutton value="temp" id="btn" style="display:none;"></h:commandbutton></rich:message></h:inputtext></h:commandbutton仅当验证通过时才由></h:commandbutton></a4j:commandbutton></h:commandbutton></h:commandbutton></a4j:commandbutton></h:commandbutton></h:form>于 2012-11-04T05:27:44.033 回答 This answer is useful 0 我受到这个线程的启发，为我的问题找到了解决方案。所以我决定也发布我的。如果发生错误并且不打开带有打印页面的新选项卡，我需要留在同一个站点上。 <h:form target="#{printBean.isErrorHappened() ? '_self' : '_blank'}" id="formPrintSearchResult"><h:commandlink id="cmdLinkPrintSearchResult" value="Print overview" onmouseover="#{rich:element('checkForErrors')}.click();" action="#{printController.printSearch()}"></h:commandlink></h:form>如果您愿意，可以在 a4j:commandLink 上包含另一个操作来检查错误并在 printBean 中设置 errorHappened。 于 2013-05-29T08:37:03.343 回答 This answer is useful 0 如果您可以使用某些 AJAX 行为使用 JavaScript 调用验证，则可以使用如下onSubmit事件函数轻松完成： function fnSubmit(){ var validated= performValidation(); if(validated){ document.getElementById('formName').target="_blank"; document.getElementById('formaName').submit(); } } 于 2012-11-02T15:47:22.493 回答 Related 1 c - hwnd 到 ppm 问题 1 rest - web2py 可以通过 parse_as_rest 提供多对多表的 REST 数据吗？ 1 asp.net - 如何从母版页动态设置 SiteMapNode 标题？ASP.NET 3 sql-server - SQL Server Express - 工作和维护支持？ 2 ruby-on-rails - Ruby 版本未在 Heroku 上升级 3 r - 在具有预测变量列表的数据帧上使用 R 的 lm 1 map - 为什么绑定会影响我的地图类型？ 1 jquery - jQuery 范围，.each 5 algorithm - 图像插值（双三次或双线性）。如果没有相邻像素怎么办？ 1 caption - 如何结合 lightbox2 显示 rhinoslider 字幕？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13198487
> 
> 赞同：3
> 
> 时间：
> 
> 标签：java, jsf

我想要一个表单，在提交和验证后会打开一个包含结果的新选项卡。我使用该`<h:form target="_blank"`方法获取新选项卡，但它在新选项卡中显示验证错误。如果验证通过，我希望它只打开新选项卡。

我的猜测是唯一真正的跨浏览器解决方案是在提交时进行一些 SJAX 验证，但我不确定是否有任何库可以为我执行此操作。

那么，有没有一种方法可以验证并仅在验证通过时打开一个新窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T05:27:44.033

由于您没有提供任何代码示例，我假设您在其中使用 a`<h:form>`和 a `<h:commandButton>`。

如果是这样，你必须做一个简单的技巧来克服这个问题。您必须使用 a`<a4j:commandButton>`而不是您的`<h:commandButton>`并保持`<h:commandButton>`隐藏。然后使用 的`oncomplete`事件`<a4j:commandButton>`来判断是否`click`为`<h:commandButton>`.

`<h:commandButton`仅当验证通过时才由 javascript 单击。

```
<h:form target="_blank">
  <h:inputText value="" required="true" id="txt"/>
  <rich:message for="txt"/>
  <a4j:commandButton value="Submit" action="#{bean.someMethod()}"           
    oncomplete="if(#{!(facesContext.maximumSeverity.ordinal ge 2)}){
    #{rich:element('btn')}.click();}"/>
  <h:commandButton value="temp" id="btn" style="display:none;"/>
</h:form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T08:37:03.343

我受到这个线程的启发，为我的问题找到了解决方案。所以我决定也发布我的。如果发生错误并且不打开带有打印页面的新选项卡，我需要留在同一个站点上。

```
<h:form target="#{printBean.isErrorHappened() ? '_self' : '_blank'}"
     id="formPrintSearchResult">
     <h:commandLink id="cmdLinkPrintSearchResult"
          value="Print overview"
          onmouseover="#{rich:element('checkForErrors')}.click();"
          action="#{printController.printSearch()}" />
      <a4j:commandLink id="checkForErrors" style="display:none;" 
          render="formPrintSearchResult" />
</h:form> 
```

如果您愿意，可以在 a4j:commandLink 上包含另一个操作来检查错误并在 printBean 中设置 errorHappened。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T15:47:22.493

**如果您可以使用某些 AJAX 行为使用 JavaScript 调用验证**，则可以使用如下`onSubmit`事件函数轻松完成：

```
 function fnSubmit(){
     var validated= performValidation();
     if(validated){
         document.getElementById('formName').target="_blank";
         document.getElementById('formaName').submit();
     }
   } 
```

# windows - 在 Windows 中使用 CAPS LOCK 作为 Vim 模式切换键

> ID：13198488
> 
> 赞同：2
> 
> 时间：2012-11-02T15:39:13.277
> 
> 标签：windows, vim, keyboard

很多人都[询问](https://stackoverflow.com/questions/2176532/how-to-map-caps-lock-key-in-vim)并[写过](http://www.8t8.us/vim/vim.html)如何[映射`Caps Lock`到`Esc`](https://stackoverflow.com/questions/127591/using-caps-lock-as-esc-in-mac-os-x)or `Control`，但我想使用该`Caps Lock`键作为*插入*模式和*正常*模式之间的切换，我还没有找到任何解决如何做到这一点的东西。

（然后我想做`Shift``Caps Lock`一个`Caps Lock`人通常会做的事情，对于那些罕见的时候你需要`Caps Lock`，比如在输入长的 CONSTANT 名称时。但这真的是一个单独的问题，如果真的有办法完成的话，我稍后会谈到第一部分。所有这一切很可能是不可能的。）

这些天我主要在工作中使用 Windows，所以这是我目前最关心的。（由于这可能涉及某种仅限于 Windows 的黑客行为，因此我将针对我也使用的 OS X 提出一个单独的问题。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:11:06.353

您的请求不寻常，我建议您不要过多地偏离默认模式切换，但您可以尝试以下操作：

1.  首先，使用操作系统特定的方法（如您提到的链接中所述），您需要将您的`Caps Lock`密钥重新映射到另一个（未使用的，例如`F12`）密钥，因为特殊的 Caps Lock 不能在 Vim 中重新映射。
2.  然后，为改变模式的重新映射键定义两个 Vim 映射。

这是一个简单的例子：

```
:nnoremap <F12> a
:inoremap <F12> <Esc> 
```

然后，您可以使用 Caps Lock 键（重新映射到 F12）在插入模式和命令模式之间切换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T23:42:39.777

I don't think you can do this natively with Vim, but It looks like you could probably do this using AutoHotKey. I'm not an Autohotkey expert, but here's what I slapped together:

Taken from the example here:

This script uses Capslock key to give a hotkey 2 different outputs. I'm not sure if you need to use +; instead of : in the second part to switch to command mode.

```
n=0
Capslock::
On := 1
If On=True {
Send i
On := False
} Else {
Send :
On := True
}
Return 
```

The above script is untested, but *should* switch between sending i (for insert) or : (to insert command mode). Unfortunately this won't keep track of the current state VIM is in. You'd have to learn my AHK scripting for that (how to use variables, so when in insert and you hit keys like '?', '/', 'esc', ':', etc it would know to variable used to store the VIM mode in AHK as well as send the real code).

References:

[http://www.autohotkey.com/board/topic/68710-autohotkey-toggle-state-function/](http://www.autohotkey.com/board/topic/68710-autohotkey-toggle-state-function/) [http://www.autohotkey.com/docs/commands/SetNumScrollCapsLockState.htm](http://www.autohotkey.com/docs/commands/SetNumScrollCapsLockState.htm) [http://www.autohotkey.com/board/topic/42379-toggle-key/](http://www.autohotkey.com/board/topic/42379-toggle-key/)

For your second part it looks like it could be done with something like:

[http://www.autohotkey.com/board/topic/51215-completely-disable-capslock/](http://www.autohotkey.com/board/topic/51215-completely-disable-capslock/) [http://www.autohotkey.com/board/topic/61-use-capslock-as-a-toggle/](http://www.autohotkey.com/board/topic/61-use-capslock-as-a-toggle/) [http://www.autohotkey.com/board/topic/68710-autohotkey-toggle-state-function/](http://www.autohotkey.com/board/topic/68710-autohotkey-toggle-state-function/)

Not totally sure but you made to do the registry edit for VIM to recognize the Capslock change correctly:

[http://www.autohotkey.com/docs/misc/Remap.htm#](http://www.autohotkey.com/docs/misc/Remap.htm#registry)

# wcf - 如果我们在 WCF 客户端配置文件中将 maxStringContentLength 增加到 200000000，是否存在性能问题？

> ID：13198489
> 
> 赞同：1
> 
> 时间：2012-11-02T15:39:15.283
> 
> 标签：wcf, wcf-binding, wcf-client

当我在配置文件中使用默认绑定设置时出现此异常。

读取 XML 数据时已超出最大字符串内容长度配额 (8192)。可以通过更改创建 XML 阅读器时使用的 XmlDictionaryReaderQuotas 对象的 MaxStringContentLength 属性来增加此配额。

我能够通过将 maxStringContentLength 增加到 200000000 来解决错误。我还将其他最大大小增加到 200000000，如下所示。我不确定将最大尺寸随机更改为更大的数字是否会导致任何性能问题？我是否需要根据在我的情况下发送或接收的数据量来确定理想的最大大小？谢谢你的任何建议。

```
 <basicHttpBinding>
      <binding name="EPSoap" closeTimeout="00:01:00" openTimeout="00:01:00"
          receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
          bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="20000000" maxBufferPoolSize="20000000" maxReceivedMessageSize="20000000"
          messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
          useDefaultWebProxy="true">
        <readerQuotas maxDepth="32" maxStringContentLength="200000000" maxArrayLength="200000000"
            maxBytesPerRead="200000000" maxNameTableCharCount="200000000" />
        <security mode="Transport">
          <transport clientCredentialType="None" proxyCredentialType="None"
              realm="" />
          <message clientCredentialType="UserName" algorithmSuite="Default" />
        </security>
      </binding>
    </basicHttpBinding> 
```

# javascript - Alfresco、Tomcat6 和 javascript 处理 ISO 日期字符串

> ID：13198492
> 
> 赞同：1
> 
> 时间：2012-11-02T15:39:23.990
> 
> 标签：javascript, date, alfresco, activiti

我为我的 Alfresco/Activiti 工作流程编写的部分 webscripts 支持采用 ISO 格式的日期/时间的请求。

```
2012-10-23T16:52:08 
```

我在想 Javascript Date 对象应该能够处理这个问题，尤其是在 Alfresco 安装程序使用的 Tomcat 版本中。（Tomcat6 在 Window 2003 Server 上运行）。

够简单...

```
var dDate = new Date( "2012-10-23T16:52:08" ); 
```

这会导致日期无效。我意识到 ISO 日期格式处理是 ECMA 脚本规范的最新（2009-2010？）补充。

Tomcat6/Alfresco javascript 解析引擎可以处理 ISO 日期字符串吗？如果没有，有什么我可以更新的吗？

据此： [https](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse) ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse 我需要使用 Javascript 版本 1.8.5 如何更新 Alfresco/Tomcat 的 javascript 解析逻辑到那个版本，如果可能的话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:47:32.933

[Alfresco JavaScript API wiki 页面](http://wiki.alfresco.com/wiki/4.0_JavaScript_API)中描述了 Alfresco 特定的 JavaScript 函数

您想要的位是对象上的[实用功能](http://wiki.alfresco.com/wiki/4.0_JavaScript_API#Utility_Functions)`utils`之一：

> 来自 ISO8601 的日期（字符串）
> 
> ```
>  Parse a Date from ISO8601 formatted string 
> ```

因此，您需要执行以下操作：

```
 var dDate = utils.fromISO8601( "2012-10-23T16:52:08" ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T16:38:35.150

尝试将时区添加到日期，例如 2012-10-23T16:52:08+00:00 或 2012-10-23T16:52:08Z。MDN 上的文档指出它是 ISO 8601 的一个**子集**，可以从 JavaScript 1.8.5 使用，因此如果您指定完整格式，那么大概可以在旧版本中使用。

作为旁注，用于在 Alfresco 中解释服务器端 JS 的引擎是 Mozilla 的 Rhino。

# ruby-on-rails - Rails 权限：不同模型的不同类型权限

> ID：13198498
> 
> 赞同：1
> 
> 时间：2012-11-02T15:39:56.400
> 
> 标签：ruby-on-rails, activerecord, authorization

我正在重写一些 Rails 3 应用程序逻辑，我想请你对我的数据库建模动脑筋。

在我的应用程序中，用户可以访问页面、组和图片。作为多态关联，这很容易做到：

```
class Permission < ActiveRecord::Base
  belongs_to :resource, :polymorphic => true 
  belongs_to :user
end

class User < ActiveRecord::Base
  has_many :permissions
end

class Page < ActiveRecord::Base
  has_many :permissions, :as => :resource
end

# the same for Page and Picture 
```

但是，这些权限也需要具有不同的类型，例如 AdminPermission、CollaboratorPermission、OwnerPermission。我该怎么做呢？我希望能够做到这一点：

```
p = Page.first
u = User.first
u.admin_permissions.create(:resource => p) 

# should return AdminPermission class, not just Permission
per = User.first.permissions.first 
# should return Page
per.resource 
```

我的问题是：我该如何建模？为每个对象创建一个 Permission 类，而不是在一个类中完成所有这些会更好吗？有这样做的聪明方法吗？我不太喜欢为 Rails 使用角色/身份验证插件，因为它们依赖于用户作为特定角色。在这里，角色随权限而变化。用户可以是组的管理员，但也可以是图像的协作者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:52:44.163

如果您不需要滚动自己的授权，您可以查看[CanCan](https://github.com/ryanb/cancan)和 Ryan Bates[关于](https://github.com/ryanb/cancan/issues/147)如何为不同项目的不同用户定义不同能力的评论。您可以阅读它以获取完整的详细信息，但它涉及覆盖 current_ability 方法。

```
# in controller
def current_ability
  @current_ability ||= Ability.new(current_user, current_project)
end

# in Ability class
def initialize(user, project)
  if user.admin_for_project?(project)
    can :manage, :all
  else
    can :read, :all
  end
end 
```

# jquery - Jquery验证没有按预期工作

> ID：13198501
> 
> 赞同：0
> 
> 时间：2012-11-02T15:40:03.020
> 
> 标签：jquery, html, validation

我一直试图让它工作 2 天，但没有成功，尝试了所有关于它的教程并浏览了一些实际工作的代码，但没有任何用处。

很可能它会很容易找到，但我的 jquery 知识非常有限。

问题是我无法让验证正常工作，之前它仅适用于使用“Class = required email”属性的一个字段（电子邮件字段）。然而，那个人也停止了工作。

```
 $(document).ready(function(){
$("#forumulier").validate({
    rules: {
            telephone: {
                required: true,
                digits: true,
                        },

            name: {
                required: true,
                    },

            surname: {
                required: true,
                    },

            email: {
                required: true,
                email: true,
                }
            },
    messages: {
            telephone: {
                digits: "* voer een geldig telefoon nummer in"
                },
            name: {
                required: "* dit veld is verplicht"
                },
            surname: {
                required: "* dit veld is verplicht"
                },
            email: { 
                required: "* voer een geldig email adres in"
                }
            }
        submitHandler: function(form){
            return false;
            }
});
}) 
```

## ------

```
<form id="formulier" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
            <div class="group">
            <label for="name" class="label">Naam*:</label>
            <input type="text" name="name"/>
            </div>

            <div class="group">
            <label for="surname" class="label">Achternaam*:</label>
            <input type="text" name="surname"/>
            </div>

            <div class="group">
            <label for="email" class="label">Email*:</label>
            <input type="text" name="email" />
            </div>

            <div class="group">
            <label for="telephone" class="label">Telefoon*:</label>
            <input type="text" id="telephone" name="telephone" />
            </div>

            <label for="extra" class="label">Opmerkingen:</label>
            <textarea class="small-area"></textarea>

            <div class="clear"></div>

            <button type="submit" class="send">Verzenden</button>
        </form> 
```

感谢任何

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:45:07.700

```
 $(document).ready(function(){
$("#forumulier").validate({
    rules: {
            telephone: {
                required: true,
                digits: true
                        },

            name: {
                required: true
                    },

            surname: {
                required: true
                    },

            email: {
                required: true,
                email: true
                }
            },
    messages: {
            telephone: {
                digits: "* voer een geldig telefoon nummer in"
                },
            name: {
                required: "* dit veld is verplicht"
                },
            surname: {
                required: "* dit veld is verplicht"
                },
            email: { 
                required: "* voer een geldig email adres in"
                }
            },
        submitHandler: function(form){
            form.submit();
            }
});
}); 
```

看起来你只是有太多的逗号。您需要将代码通过 javascript 调试器，它会在您遇到简单的语法错误时通知您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:56:08.937

除了其他人用逗号指出的问题之外，您只是`formulier`在验证调用中拼错了，因此它没有将验证代码附加到任何东西（您使用了“for* *u* *mulier”）。

所以修复它：

```
$("#formulier").validate({
    rules: {
        telephone: {
            required: true,
            digits: true
                    },

        name: {
            required: true
                },

        surname: {
            required: true
                },

        email: {
            required: true,
            email: true
            }
        },
    messages: {
        telephone: {
            digits: "* voer een geldig telefoon nummer in"
            },
        name: {
            required: "* dit veld is verplicht"
            },
        surname: {
            required: "* dit veld is verplicht"
            },
        email: { 
            required: "* voer een geldig email adres in"
            }
        },
    submitHandler: function(form){
        return false;
        }
});​​​​ 
```

为每个对象中的最后一项删除了逗号。在 submitHandler 之前添加逗号。 `forumulier`更改为`formulier`.

现在看起来像这样：http: [//jsfiddle.net/ryleyb/Xn5YJ/](http://jsfiddle.net/ryleyb/Xn5YJ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T16:44:58.230

当您为验证设置消息时，您需要为您正在使用的每个验证设置一条消息：必需、日期、电子邮件等。

像这样。

```
messages: {
    telephone: {
        required: " your message here",
        digits: "* voer een geldig telefoon nummer in"

    },
    name: {
        required: "* dit veld is verplicht"
    },
    surname: {
        required: "* dit veld is verplicht"
    },
    email: { 
        required: "* voer een geldig email adres in",
        email: " your message here"
    }
},
submitHandler: function(form){
   form.submit();
} 
```

这应该适用于您的示例。

更新..这是一个完整的例子。我用过你的代码+我的。

```
<html>
<head>
    <title></title>
</head>
<body>
<form id="form" method="post" action="">
<div class="group">
<label for="name" class="label">Naam*:</label>
<input type="text" name="name"/>
</div>

<div class="group">
<label for="surname" class="label">Achternaam*:</label>
<input type="text" name="surname"/>
</div>

div class="group">
<label for="email" class="label">Email*:</label>
<input type="text" name="email" />
</div>

<div class="group">
<label for="telephone" class="label">Telefoon*:</label>
<input type="text" id="telephone" name="telephone" />
</div>

<label for="extra" class="label">Opmerkingen:</label>
<textarea class="small-area"></textarea>

<div class="clear"></div>

<input type="submit" class="send">
</form>​
<script type="text/javascript" src='https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js'></script>
    <script src='http://ajax.aspnetcdn.com/ajax/jquery.validate/1.10.0/jquery.validate.min.js'></script>
<script>
$(document).ready(function(){
$("#form").validate({
rules: {
telephone: {
required: true,
digits: true,
},
name: {
required: true,
},
surname: {
required: true,
},
email: {
required: true,
email: true,
}
},
messages: {
telephone: {
required: " your message here",
digits: "* voer een geldig telefoon nummer in"
},
name: {
required: "* dit veld is verplicht"
},
surname: {
required: "* dit veld is verplicht"
},
email: { 
required: "* voer een geldig email adres in",
email: " your message here"
}
},
submitHandler: function(form){
form.submit();
}
});
});          
</script>​​​​​​​​​​​​​​
</body>
</html> 
```

查看您的提交按钮。你有按钮类型='提交'。当我使用它时，它不起作用。将其更改为 input type='submit'

# php - PHP、.htaccess apache 统一 mod_rewrite 只需一个变量

> ID：13198509
> 
> 赞同：1
> 
> 时间：2012-11-02T15:40:25.920
> 
> 标签：php, apache, mod-rewrite, seo

我对 .htaccess 和 mod_rewrite 很陌生。我可以准备带有特定网址的 seo 友好网址。但是，我想制作一个为我统一一切的东西。

**例如;**

```
Original : http://www.domain.com/index.php?module=profile&id=1.
SEO : http://www.domain.com/profile/1
.htaccess Code: RewriteRule ^profile/(.*)  ?module=profile&id=$1 [L] 
```

如您所见，我必须在文件中指定`profile`任何其他模块名称`.htaccess`

我想做的是；

```
Original : http://www.domain.com/?request=module/profile/id/1/other/any
SEO : http://www.domain.com/module/profile/id/1/other/any 
```

然而 mod_rewrite 的相同逻辑并不适用。

```
RewriteRule ^(.*)  ?request=$1 [L] 
```

反正有这个问题吗？

我完整的.htaccess；

```
# Disable server signature
ServerSignature Off
####################################################################
# MOD REWRITE
####################################################################
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteBase /

RewriteRule (.*)  /index.php?request=$1 [L]

</IfModule> 
```

我可以毫无问题地使用它；

```
# Disable server signature
ServerSignature Off
####################################################################
# MOD REWRITE
####################################################################
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteBase /

RewriteRule ^/ index.php [L]

RewriteRule ^content/(.*) ?module=content&request=$1
</IfModule> 
```

**工作版**

```
# Disable server signature
ServerSignature Off
####################################################################
# MOD REWRITE
####################################################################
<IfModule mod_rewrite.c>
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteBase /

RewriteRule (.*) index.php?request=$1 [L]
</IfModule> 
```

但是我仍然需要至少指定一件事。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T15:49:58.793

我认为您的方法没有任何问题，您只需要一个小修复：

**编辑 2**

```
RewriteRule (.*)  index.php?request=$1 [L] 
```

就是这样。顺便提一句。您不妨将所有内容重定向到`index.php`并在超全局中查找请求参数`$_SERVER['REQUEST_URI']`。

**编辑**

问题出在这里：

```
<IfModule mod_deflate.c>        <<<<<
SetOutputFilter DEFLATE
# Don't compress
SetEnvIfNoCase Request_URI .(?:gif|jpe?g|png)$ no-gzip dont-vary
SetEnvIfNoCase Request_URI .(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip dont-vary
#Dealing with proxy servers
<IfModule mod_headers.c>        <<<<<
Header append Vary User-Agent
</IfModule>
</IfModule>                     <<<<< 
```

**编辑 3**

```
...
RewriteEngine on

# Pass any request not referring directly to a file or directory in the
# filesystem to index.php    
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*) index.php?request=$1 [L] 
```

# c# - 设计时组件属性的共享数据

> ID：13198510
> 
> 赞同：0
> 
> 时间：2012-11-02T15:40:40.773
> 
> 标签：c#, winforms, visual-studio, controls, design-time

我有一个实现`IExtenderProvider`. 一个属性包含对于用户在其项目中使用的组件的每个实例都应该相同的设置。（并且在每个实例中也可编辑）

在设计时通过多个用户控件实例共享信息的常用方法是什么？手动将其写入`app.config`是没有解决方案的，因为我需要一个用于此设置的 GUI。

提前致谢

芬尼克斯

如果仅在设计期间需要该属性，则提到的静态属性效果很好，但在我的情况下，在运行时也需要该属性。在这种情况下，每个实例都将在其设计时设置的值设置为静态属性。这意味着该值取决于实例的初始化顺序。

例子：

在设计时：

将组件添加到表单 1 并将值设置为“Form1”

将组件添加到表单 2 并将值设置为“Form2”

现在，对于这两个实例，设计器中的值都是“Form2”，但在运行时，如果加载了两个表单，则该值总是作为最后一个加载的那个。

这是因为设计者不会更改实例的初始化值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:22:39.850

要创建一个对所有实例*和*每个实例都通用的属性，您可以执行以下操作：

```
class MyObject
{
    // static members are common to all instances
    static string DefaultProperty1 = "Some Default";

    private string _Property1;
    public string Property1
    {
        get
        {
            // If the backing field is NULL, return the default
            if (_Property1 == null)
                return DefaultProperty1;
            // Otherwise, return the per-instance value
            return _Property1;
        }
        set { _Property1 = value; }
    }
} 
```

如果您希望它可以更改， DefaultProperty1 也可以是一个属性。

# java - 由另一个线程启动的 3 个线程的最佳实现是什么

> ID：13198511
> 
> 赞同：1
> 
> 时间：2012-11-02T15:40:41.233
> 
> 标签：java, multithreading, runnable

我需要在 Java 上实现这种情况：

我有 3 个线程用于 3 个不同的操作。每个动作都必须在不同的时间执行。例如，动作 1 必须每 60 分钟运行一次，动作 2 必须每 40 分钟运行一次，动作 3 必须每 120 分钟运行一次。

然后，我有一个线程来调用其他 3 个线程

什么是最好的实现？

使用计时器？，使用可运行？

做了一个“While true”并在里面做一个GetTime并比较知道我是否必须运行一些线程？

或者也许睡眠主线程？

感谢您的想法，并为我糟糕的英语感到抱歉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T15:44:01.773

你可以使用 Quartz API， http: [//quartz-scheduler.org/](http://quartz-scheduler.org/)这个 URL 会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:58:34.127

你可以争论几个月，哪个是最好的实现。

就个人而言，我很想使用 Timer 之类的东西，然后使用 Timer API 重复它。如果您只需要一个永远运行的重复任务，我什至不会使用特殊线程。如果你想有一个关闭开关，你可以让定时器运行一次，如果开关仍然打开，它可以启动另一个自己的实例。

# nhibernate - NHibernate 并发 Windows 服务 ASP.NET MVC 网站

> ID：13198517
> 
> 赞同：0
> 
> 时间：2012-11-02T15:41:06.923
> 
> 标签：nhibernate, concurrency, fluent-nhibernate, fluent

我有一个 Windows 服务和一个 ASP.NET MVC 2 应用程序，它们都使用 Fluent nHibernate (nHibernate 3) 连接到同一个数据库。

其中一个实体（称为 Profile）有一个字符串属性，其中包含图像的 url。

这个属性随机失去它的价值，我不知道是什么原因造成的。用户通过 MVC 前端更新它，但我的直觉是 windows 服务正在用实体的旧实例覆盖它的值（windows 服务更新同一类的另一个属性）。

有人可以解释/帮助如何调试这个或管理并发的最佳方法，我已经阅读了这个主题，但对 nHibernate 中的乐观和悲观锁定感到困惑。

亲切的问候

山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:48:00.870

一个选项可以`<version/>`与*Optimistic Locking*一起使用。有了这个，你就没有性能缺陷，而且你确信结果是你想要的。如果一个代理尝试更新另一个代理之前更新的记录，则该代理将失败。当然，您应该以某种方式处理该异常，但至少您没有脏更新/读取。要使用`<version/>` tou ，应在表中添加一列以维护版本。在标准 NH 映射中，文档是：

```
<version
        column="version_column"                            
        name="PropertyName"                                
        type="typename"                                    
        access="field|property|nosetter|ClassName"         
        unsaved-value="null|negative|undefined|value"      
        generated="never|always"                           
/> 
```

# .net - 在 MVC3 中如何将所有脚本移动到页面底部之前？

> ID：13198521
> 
> 赞同：3
> 
> 时间：2012-11-02T15:41:21.690
> 
> 标签：.net, asp.net-mvc-3, templates, view, scaffolding

在 MVC3 中，我可以轻松地将 jQuery 脚本标签移动到页面底部“_Layout.vbhtml”

```
<script src="@Url.Content("~/Scripts/jquery-1.8.2.min.js")" type="text/javascript"></script> 
```

但是，在 ASP.NET MVC3 中，当您使用编辑器模板创建控制器时，脚手架机制会执行大量工作，将文件添加到 Views 文件夹，例如 Create.cshtml、Delete.cshtml、Details.cshtml、Edit.cshtml 和Index.cshtml 等……它们是强类型的。

在这些 View 文件中，脚本标签位于 内`<body>`，但是如何在标签之前将这些标签添加到页面底部`</body>`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T15:50:13.140

您正在寻找的是部分[http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx)

`</body>`在标签上方添加一个部分。

```
@RenderSection("Scripts", false)
</body> 
```

然后在您的视图中，您可以定义将出现在此部分中的内容。

```
@section Scripts {
    <script>
        ...
    </script>
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T15:52:27.947

您可以构建一个 html 扩展功能，像这样

```
/// <summary>
///  This section is for adding a script to the <head> tag from a partial view (or any other place)
/// </summary>
private const string SCRIPTBLOCK_BUILDER = "_ScriptBlockBuilder_";

public static MvcHtmlString Script(this HtmlHelper htmlHelper, Func<object, HelperResult> template)
{
    htmlHelper.ViewContext.HttpContext.Items[SCRIPTBLOCK_BUILDER + Guid.NewGuid()] = template;
    return MvcHtmlString.Empty;
}

public static IHtmlString RenderScripts(this HtmlHelper htmlHelper)
{
    foreach (object key in htmlHelper.ViewContext.HttpContext.Items.Keys)
    {
        if (key.ToString().StartsWith(SCRIPTBLOCK_BUILDER))
        {
            var template = htmlHelper.ViewContext.HttpContext.Items[key] as Func<object, HelperResult>;
            if (template != null)
            {
                htmlHelper.ViewContext.Writer.Write(template(null));
            }
        }
    }
    return MvcHtmlString.Empty;
} 
```

然后就可以使用这两个功能了。在您的 _Layout.cshtml 中，您放置`@Html.RenderScripts()`了要呈现所有脚本的位置。

然后像这样将所有脚本包装在视图中

```
@Html.Script(
    @<script type="text/javascript">
         // Your scripts
    </script>
) 
```

# php - php错误不显示

> ID：13198525
> 
> 赞同：-2
> 
> 时间：2012-11-02T15:41:38.333
> 
> 标签：php, mysql, database-connection

我在尝试使用 PHP 链接到 MySQL 数据库时遇到了重大问题。php 脚本只是崩溃而没有回显任何错误消息。

为了追踪错误，我缩减了代码。即使是像简单的赋值操作这样微不足道的事情，它也会崩溃！

编码

```
<!DOCTYPE html>
<head>
    <title>
    </title>
</head>
<body>

Testing<br />

<?php

echo("hello")

$hostname_testserver = "stringvar";
echo(" no1 ")

?>

Testing <br />

</body>
</html> 
```

显示 nada：绝对没有任何源代码。黑屏，没有浏览器错误信息；没有。

让这件事如此奇特的是，我知道我已经成功地让 php 脚本在这台服务器上工作......正是使用这个分配。

所以很自然的事情更复杂，比如：

```
<?php

/*** mysql hostname ***/
$hostname = 'HOST';

/*** mysql username ***/
$username = 'NAME';

/*** mysql password ***/
$password = 'PASSWORD';

try {
    $dbh = new PDO("mysql:host=$hostname;dbname=DATABASE", $username, $password);
    /*** echo a message saying we have connected ***/
    echo 'Successfully connected with database<br />';

    /*** INSERT data ***/
    $count = $dbh->exec($insertion);

    /*** echo the number of affected rows ***/
    echo $count;

catch(PDOException $e)
    {
    echo $e->getMessage();
    }
?> 
```

连地面都爬不起来><

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T15:44:57.717

错误报告可能已禁用，快速查看表明您在 try 语句中缺少右括号

```
try {
    $dbh = new PDO("mysql:host=$hostname;dbname=DATABASE", $username, $password);

    echo 'Successfully connected with database<br />';

    $count = $dbh->exec($insertion);

    echo $count;
} //This one
catch(PDOException $e)
    {
    echo $e->getMessage();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:45:13.213

您的第一个脚本中有一些致命错误；你忘记了一些“;” 在您的回显语句之后（不需要括号顺便说一句）您应该显示 PHP 错误，或记录它们（并监视日志......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T19:46:23.257

# c++ - 继承实现不起作用

> ID：13198526
> 
> 赞同：1
> 
> 时间：2012-11-02T15:41:41.697
> 
> 标签：c++, inheritance, polymorphism

我有一个名为 Generator 的接口，如下所示：

```
class Generator{
public:
    virtual float getSample(Note &note)=0;
}; 
```

我的`Synth`班级正在实施它，如下所示：

```
class Synth : public Generator{
public:
    virtual float getSample(Note &note);
};

float Synth::getSample(Note &note){
    return 0.5;
} 
```

我正在尝试从我的 Note 类（具有生成器成员）中调用 getSample 方法

```
class Note : public Playable{
public:
    Generator *generator;
    virtual float getValue();
};

float Note::getValue(){
    float sample = generator->getSample(*this); // gets stuck here
    return sample;
} 
```

当我尝试运行时，它卡在上面代码中的标记行上。问题是我没有收到非常明确的错误消息。这是停止后我可以看到的：

![在此处输入图像描述](../Images/50df14eab53533cc6e7b5c2e6ef5ca11.png) ![在此处输入图像描述](../Images/6878ae5392fc1eadf33db2a74144cd52.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T15:43:28.767

似乎您从未初始化过 member `Note::generator`，因此在其上调用函数是未定义的行为。

尝试，作为测试：

```
float Note::getValue(){
    generator = new Synth;
    float sample = generator->getSample(*this); // gets stuck here
    return sample;
} 
```

如果可行，请返回并检查您的逻辑。使用 a`std::unique_ptr<Generator>`而不是原始指针。为`Node`. 在那里初始化指针。

# php - 创建后如何使用 PHP Buildpack？

> ID：13198537
> 
> 赞同：0
> 
> 时间：2012-11-02T15:42:11.040
> 
> 标签：php, heroku, buildpack

首先让我说我对 Heroku 很陌生。

我一直在查看他们的文档和其他人的文档，除非我要重新创建应用程序，否则我似乎无法找到“起点”。如有必要，我可以这样做，但宁愿不这样做。

我想定制他们的标准 PHP Buildpack： [https ://github.com/heroku/heroku-buildpack-php](https://github.com/heroku/heroku-buildpack-php)

我需要添加更多扩展（mbstring、gettext 等）

每次将它推送给主服务器时，看看它是如何构建的，似乎应该有一种相当简单的方法来构建它。

任何方向将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:11:58.203

我找到了答案：
[https ://devcenter.heroku.com/articles/buildpacks](https://devcenter.heroku.com/articles/buildpacks)

您需要复制他们的构建包：
[https ://github.com/heroku/heroku-buildpack-php/](https://github.com/heroku/heroku-buildpack-php/)

然后添加一个配置变量以从您的 builadpack 中读取

```
heroku config:add BUILDPACK_URL=https://github.com/[username]/heroku-buildpack-ruby 
```

# cocos2d-iphone - 使用 cocos2d-x 破冰或打破木板

> ID：13198547
> 
> 赞同：0
> 
> 时间：2012-11-02T15:42:53.170
> 
> 标签：cocos2d-iphone, cocos2d-x

在 cocos2d-x 中是否有任何方法可以将精灵切成两部分，或者可能是我可以在 cocos2dx 中制作的一些动画，通过它我可以将冰和木板分成两部分（就像它发生在功夫和空手道）。该应用程序是关于当用户在东西上滑动时的功夫技术它应该打破冰和木板等......

有什么不使用物理的吗？

问题在于用户从该点滑动的任何地方，精灵应该被剪切..否则我会采取一个单独的动画来打破僵局

谢谢 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:03:19.823

我认为解决这个问题的最佳方法是定义一个具有 CCSprite 数组的自定义 CCNode。用冰/木板的不同部分填充阵列并定位它们，使它们看起来像一个整体。定义 CCNode 的边界框，使其成为所有部分的总和，并使用对位置的滑动来检测命中。

# java - @Context 返回 Proxy 而不是 HttpServletRequest（代理范围内没有线程本地值）

> ID：13198550
> 
> 赞同：6
> 
> 时间：2012-11-02T15:43:03.463
> 
> 标签：java, dependency-injection, jersey, glassfish-3

我在理解为什么`@Context`依赖注入返回 $Proxy(random number) 实例而不是 HttpServletRequest 或 HttpServletResponse 的集合时遇到了一些问题。

我正在使用 Glassfish 3.1.2.2 和它的 Jersey(Jersey: 1.11.1) 版本，我的应用程序是作为 EAR 应用程序构建的。

我有简单的@Remote 接口，我在其中注释我的方法，REST 服务没有任何问题，但是当我尝试访问 HttpServletRequest 信息时，它只会导致问题。

我在会话 bean 中注释了私有字段：

```
@Context
private HttpServletRequest request;
@Context
private HttpServletResponse response; 
```

并且还创建了方法签名以包含 @Context 作为参数集：

```
@POST
@Path("authenticate")
@Consumes(MediaType.APPLICATION_FORM_URLENCODED)
@Produces(MediaType.APPLICATION_JSON)
public Response authenticate(@FormParam("username") String username, @FormParam("password") String password, @Context HttpServletRequest request, @Context HttpServletResponse response); 
```

当我尝试在输入后调试该方法时，我可以看到全局请求和响应对象为空，而本地方法实例为 $ProxyXXX 类型。

问题是我无法访问（或者我不确定如何访问）这些对象。根据网络上的教程，我应该可以使用它们，但是当我尝试访问这些时，就会抛出：

```
WARNING: StandardWrapperValve[RestDataService]: PWC1406: Servlet.service() for servlet RestDataService threw exception
java.lang.IllegalStateException: No thread local value in scope for proxy of class $Proxy245
    at com.sun.jersey.server.impl.ThreadLocalInvoker.invoke(ThreadLocalInvoker.java:93)
    at $Proxy245.getContextPath(Unknown Source) 
```

这就是我试图调用它们的方式（在这个例子中，我只是调用 getContextPath）

```
@Override
public Response authenticate(String username, String password, HttpServletRequest request, HttpServletResponse response) {

    System.out.println("just a test: " + request.getContextPath()); 
```

我在这里想念什么？有没有人遇到过类似的问题？

格雷格

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-10-04T18:57:53.077

要理解这个问题，您需要了解作用域的工作原理。为了描述发生了什么，这里有一个例子。假设你有这个

```
@Singleton
@Path("..")
public class SomeResource {

    @Context
    private HttpServletRequest request;
} 
```

这种情况带来的问题是，`HttpServletRequest`每次请求都会生成一个，但是资源类只创建一次，因为它是一个单例，所以最初`HttpServletRequest`创建时没有注入单例。

为了解决这个问题，Jersey 注入了一个代理。所以从概念上讲，结果更像

```
@Singleton
@Path("..")
public class SomeResource {

    @Context
    private ProxyHttpServletRequest proxyRequest;
} 
```

当请求进来时，实际`HttpServletRequest`被放入`ThreadLocal`一个*范围 context 中*。这不是一个精确的实现，但您可以将范围上下文想象为

```
public class RequestScopeContext {
    private static final ThreadLocal<HttpServletReqest> request
            = new ThreadLocal<>();

    public static HttpServletRequest get() { .. }
    public static void setRequest(HttpServletRequest request) { .. }
} 
```

当请求进入时，`HttpServletRequest`被设置到上下文中。`HttpServletRequest`当对内部进行调用时`SomeResource`，它实际上是在代理对象上进行的，该对象从 中获取请求`ThreadLocal`并转发调用。从概念上讲，你想象它看起来像

```
class ProxyHttpServletRequest {
    public String getContextPath() {
        HttpServletRequest request = RequestScopeContext.get();
        return request.getContextPath();
    }
} 
```

现在假设我们有这个

```
@Singleton
@Path("..")
public class SomeResource {

    @GET
    public Response get(@Context HttpServletRequest request) {
        ...
    }
} 
```

与此不同的是，请求不再注入到字段中，因此不需要代理。仅在调用该`HttpServletRequest`方法时才需要。所以泽西岛将注入实际请求而不是代理。

需要注意的是，这种模式不仅仅针对泽西岛。任何涉及 DI 和范围的框架，在尝试将较小范围的对象注入到较宽范围的对象时都将使用类似的代理模式。

* * *

**对 OP：**现在这不是您的确切问题。上述答案更有可能使大多数对代理有疑问的人受益。

在您的情况下，您说您正在尝试将其注入`HttpServletRequest`EJB `@Remote`。一方面，我什至不知道那*是*可能的。我的猜测是 EJB 引擎从不设置`ThreadLocal`. 因此，当泽西试图调用它时，上下文中没有任何内容。

`@Context`注释适用于 JAX-RS 组件，而不适用于 EJB 。我个人不知道如何将 an`HttpServletRequest`注入 EJB，因为我对 EJB 的工作不多。因此，任何面临您确切问题的人都需要搜索如何做到*这一点*。但就像我说的，我不认为这是搜索这个问题的大多数人。我想他们只是想知道为什么请求是代理而不是实际请求。所以这个答案更适合他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-04T17:58:05.717

我得到正确的会话和上下文对象不是同一个问题。就像这对我来说很好。

```
 public login login(request Request,@Context MessageContext context) {

                 HttpServletRequest httpServletRequest = context
                              .getHttpServletRequest(); 
```

}

# android - android，将图像放在视频帧上

> ID：13198561
> 
> 赞同：0
> 
> 时间：2012-11-02T15:43:30.543
> 
> 标签：android, image, video, merge, connect

有没有办法在每个视频帧上放置一个图像？我正在考虑它，我找到了一种方法，将每一帧提取到位图，合并 2 个图像（视频帧和指定图像）并将所有帧保存为视频。这是唯一的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-17T19:26:35.650

您可以使用[ffmpeg](https://ffmpeg.org/)库并运行如下内容：

ffmpeg -i input.mp4 -i logo.png -filter_complex "overlay=(main_w-overlay_w)/2:(main_h-overlay_h)/2" -codec:a copy output.mp4

[https://github.com/WritingMinds/ffmpeg-android-java](https://github.com/WritingMinds/ffmpeg-android-java)是将 ffmpeg 添加到您的 android 项目的好方法。检查[此问题](https://stackoverflow.com/questions/10918907/how-to-add-transparent-watermark-in-center-of-a-video-with-ffmpeg)以获取有关 ffmpeg 命令的更多信息。

# java - 创建文件并将其存储到外部存储

> ID：13198563
> 
> 赞同：1
> 
> 时间：2012-11-02T15:43:40.043
> 
> 标签：java, android, file-io

这对你来说可能是一个简单的破解，但我不明白为什么这段代码不会导致在我的 Android 外部文件系统中创建一个新文件？目录是正确创建的，但不是文件，而是我得到一个 java.io.FileNotFoundException：/mnt/sdcard/Mydir/MyFile，任何人都可以看到问题是什么，因为我无法看到它？

```
 //Generate a unique filename using date and time
    String fileName = "myFile_"+formatter_file_name.format(today)+".txt";

    //Get path to root
    String root = Environment.getExternalStorageDirectory().toString();

    //Create(if not exists) directory in root in which to store the reports 
    File myDir = new File(root + "/myDir");   
    myDir.mkdirs();

    //Create report file object
    File file = new File (myDir, fileName);

    //If file already exists delete id(this should not be able to happen)
    if (file.exists()) file.delete(); 

    try {
        FileOutputStream fout = new FileOutputStream(file);
        OutputStreamWriter osw = new OutputStreamWriter(fout); 

        // Write the string to the file
        osw.write("TEST STRING");

        //Ensure that everything has been written to the file and close 
        osw.flush();
        osw.close();
    } catch (Exception e) {
           e.printStackTrace();
    } 
```

我的清单中有正确的权限，我将插入一个检查以查看外部存储是否可用于写入，但我认为这不是问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:56:03.667

试试这个

```
try {
   File root = Environment.getExternalStorageDirectory();
   File myFile = new File(root +"/textfile.txt");
   myFile.createNewFile();

   FileOutputStream fOut = new FileOutputStream(myFile);
   OutputStreamWriter myOutWriter = 
         new OutputStreamWriter(fOut);
   myOutWriter.append("String entered in file");

   myOutWriter.close();
   fOut.close();
} catch (Exception e) {
   Toast.makeText(getBaseContext(), e.getMessage(),Toast.LENGTH_SHORT).show();

} 
```

# php - 出现语法错误，提供的所有代码

> ID：13198564
> 
> 赞同：-3
> 
> 时间：2012-11-02T15:43:42.430
> 
> 标签：php, syntax-error

我对 php 和 MySQL 有点陌生。我正在阅读教程并在单击编辑主题按钮时收到以下错误消息。我将包括我正在使用的所有适用代码。我相当确定问题出在数据库连接上，因为正在显示的错误是从 connection.php 页面打印的。

错误：

> 数据库连接失败：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“1”附近使用正确的语法

数据库：

```
 I have 1 database(widget_corp) with 3 tables 
   Tables:
   subjects(id, menu_name, position, visible), 
   pages(id, subject_id, menu_name, position, visible, content), 
   users(id, username, hashed_password) //this one is not used yet 
```

源代码：

```
 <?PHP require_once("includes/connection.php"); ?>
    <?PHP require_once("includes/functions.php"); ?>
    <?PHP
    if(isset($_POST['submit'])) {
    $errors = array();
    $required_fields = array('menu_name', 'position', 'visible');
    foreach($required_fields as $fieldname) {
    if(!isset($_POST[$fieldname]) || (empty($_POST[$fieldname]) && !is_numeric($_POST[$fieldname]))) {
    $errors[] = $fieldname;
    }
    }
    $fields_with_lengths = array('menu_name' => 30);
    foreach($fields_with_lengths as $fieldname => $maxlength) {
    if(strlen(trim(mysql_prep($_POST[$fieldname]))) > $maxlength) {
    $errors[] = $fieldname; }
    }
    if (empty($errors)) {
    // Perform Update
    $id = mysql_prep($_GET['subj']);
    $menu_name = mysql_prep($_POST['menu_name']);
    $position = mysql_prep($_POST['position']);
    $visible = mysql_prep($_POST['visible']);

    $query = "UPDATE subjects SET menu_name = '{$menu_name}',  position = {$position}, visible = {$visible} WHERE id = {$id}";
    $result = mysql_query($query, $connection);
    if(mysql_affected_rows() == 1) {
    // Sucess
    } else {
    // Failed
    }
    } else {
    } // end: if (isset($_POST['submit']))
    }
    ?>
    <?PHP find_selected_page(); ?>

    <?PHP include("includes/header.php"); ?>

    <table id="structure">
    <tr>
    <td id="navigation">
    <?PHP echo navigation($sel_subject, $sel_page); ?>
    </td>
    <td id="page">
    <h2>Edit Subject: <?PHP echo $sel_subject['menu_name']; ?></h2>           
    <form action="edit_subject.php?subj="<?PHP echo urlencode($sel_subject['id']); ?>" method="post">
    <p>Subject name:
    <input type="text" name="menu_name" value="<?PHP echo $sel_subject['menu_name']; ?>" id="menu_name" />
    </p>
    <p>Position:
    <select name="position">
    <?PHP
    $subject_set = get_all_subjects();
    $subject_count = mysql_num_rows($subject_set);
    // $subject_count +1 b/c we are adding a subject
    for($count=1; $count <= $subject_count+1; $count++) {
    echo "<option value=\"{$count}\"";
    if ($sel_subject['position'] == $count) {
    echo " selected";
    }
    echo ">{$count}</option>";
    }
    ?>
    </select>
    </p>
    <p>Visible:
    <input type="radio" name="visible" value="0"<?PHP
    if($sel_subject['visible'] == 0) { echo " checked"; }
    ?>/> No
    &nbsp;
    <input type="radio" name="visible" value="1" <?PHP
    if($sel_subject['visible'] ==1) {echo " checked"; }
    ?>  /> Yes
    </p>
    <input type="submit" name="submit" value="Edit Subject" />
    </form>
    <br />
    <a href="content.php">Cancel</a>
    </td>
    </tr>
    </table>
    <?PHP require("includes/footer.php"); ?> 
```

来自functions.php的适用函数

```
 function redirect_to($location = NULL) {
    if ($location != NULL) {
    header("Location: {$location}");
    exit;
    }
    }

    function navigation($sel_subject, $sel_page) {
    $output =  "<ul class=\"subjects\" >";
    $subject_set = get_all_subjects();
    while ($subject = mysql_fetch_array($subject_set)) {
    $output .= "<li";
    if ($subject["id"] == $sel_subject["id"]) {$output .= " class=\"selected\"";}
    $output .= "><a href=\"edit_subject.php?subj=" . urlencode($subject["id"]) . "\">{$subject["menu_name"]}</a></li>";

    $page_set = get_pages_for_subject($subject["id"]);  
    $output .= "<ul class=\"pages\">";
    while ($page = mysql_fetch_array($page_set)) {
    $output .= "<li";
    if ($page['id']==$sel_page['id']) {$output .= " class=\"selected\"";}
    $output .= "><a href=\"content.php?page=" . urlencode($page["id"]) . "\">{$page["menu_name"]}</a></li>";
    }
    $output .= "</ul>";
    }
    $output .= "</ul>";
    return $output;
    }

    function mysql_prep($value) {
    $magic_quotes_active = get_magic_quotes_gpc();
    $new_enough_php = function_exists( "mysql_real_escape_string" ); // i.e. PHP >= v4.3.0
    if ($new_enough_php) { //PHP v4.3.0 or higher
    // undo any magic quote effects so mysql_real_escape_string can do the work
    if($magic_quotes_active) { $value = stripslashes($value); }
    $value = mysql_real_escape_string($value);
    } else { //before PHP v4.3.0
    // if magic quotes aren't already on then add slahses manually
    if( !$magic_quotes_active ) { $value = addslashes($value); }
    // if magic quotes are active, then the slashes already exist
    }
    return $value;
    }

    function get_subject_by_id($subject_id){
    global $connection;
    $query = 'SELECT * FROM `subjects` WHERE `id`= ' . (int)$subject_id . 'LIMIT 1';
    $result_set = mysql_query($query, $connection);
    confirm_query($result_set);
    // REMEMBER:
    //if no rowes are returned, fetch array will return false
    if ($subject = mysql_fetch_array($result_set)) {
    return $subject;
    } else { 
    return NULL;
    }
    }

    function get_pages_for_subject($subject_id) {
    global $connection;
    $query = "Select * 
    FROM pages 
    WHERE subject_id={$subject_id} 
    ORDER BY position ASC";

    $pages_set = mysql_query($query, $connection);
    confirm_query($pages_set);
    return $pages_set;
    }

    function get_page_by_id($page_id){
    global $connection;
    $query = 'SELECT * FROM `pages` WHERE `id` = ' . (int)$page_id . ' LIMIT 1';
    $result_set = mysql_query($query, $connection);
    confirm_query($result_set);
    // REMEMBER:
    //if no rowes are returned, fetch array will return false
    if ($subject = mysql_fetch_array($result_set)) {
    return $subject;
    } else { 
    return NULL;
    }
    }

    function get_all_subjects() {
    global $connection;
    $query = "SELECT * FROM subjects ORDER BY position ASC";
    $subject_set = mysql_query($query, $connection);
    confirm_query($subject_set);    
    return $subject_set;                
    }

    function find_selected_page() {
    global $sel_subject;
    global $sel_page;

    if (isset($_GET['subj'])) {
    $sel_subject  = get_subject_by_id($_GET['subj']);
    $sel_page = NULL;
    } else if (isset($_GET['page'])) {
    $sel_subject = NULL;
    $sel_page = get_page_by_id($_GET['page']);
    } else{
    $sel_subject = NULL;
    $sel_page = NULL;
    }   
    }

    function confirm_query($result_set) {
    if (!$result_set) {
    die("Database connection failed: " . mysql_error());
    }
    } 
```

包含的页面

```
 header.php

    <html>
    <head>
    <title>Widget Corp</title>
    <link href="stylesheets/public.css" media="all" rel="stylesheet" type="text/css" />
    </head>
    <body>
    <div id="header">
    <h1>Widget Corp</h1>
    </div>
    <div id="main"></div></body></html> 
```

页脚.php

```
 </div>
    <div id="footer">Copyright 2007, Widget Corp</div>
    </body>
    </html>
    <?PHP
    if (isset($connection)){
    mysql_close($connection);
    }
    ?> 
```

连接.php

```
 <?PHP
    require("constants.php");
    $connection = mysql_connect(DB_SERVER, DB_USER, DB_PASS);
    if (!$connection) {
    die("Database connection failed: " . mysql_error());
    }
    $db_select = mysql_select_db(DB_NAME, $connection);
    if (!$db_select) {
    die("Database selection failed: " . mysql_error());
    }
    ?> 
```

常量.php

```
 <?PHP   
    // Database Constants
    define("DB_SERVER", "localhost");
    define("DB_USER", "root");
    define("DB_PASS", "********");
    define("DB_NAME", "widget_corp");
    ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T15:47:31.653

在functions.php中看起来像这样，你有这条线

```
$query = 'SELECT * FROM `subjects` WHERE `id`= ' . (int)$subject_id . 'LIMIT 1'; 
```

而且前面没有空格`LIMIT`。尝试更改`'LIMIT 1'`为`' LIMIT 1'`，看看会发生什么。

为了更快地发现这些错误，您只需要添加几行错误检查：

```
$result_set = mysql_query($query, $connection);
if (!$result_set) {
    echo "mysql_query() error: ", mysql_error($connection), "\nquery was: $query\n";
    die();
} 
```

然后，您还将看到您生成的 SQL，它可以快速发现错误。

# php - 购物车的MVC控制器设计

> ID：13198566
> 
> 赞同：0
> 
> 时间：2012-11-02T15:43:43.480
> 
> 标签：php, yii, shopping-cart

我正在使用基于 MVC 架构的 PHP YII 框架处理服装网站的购物车页面。购物车页面具有更新购物车中商品大小和数量的功能。

我可以在 中放置两个动作`CartPageController`，一个用于更新大小，另一个用于更新项目的数量，或者我可以只使用一个带有参数、大小或数量的动作，然后执行所需的操作。

就设计而言，哪种方法更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:59:48.290

就个人而言，我会坚持一种方法。这两个动作基本上都是*改变*动作。所以`change/quantity/4`和`change/size/M`可以以完全相同的方式处理。每个动作使用一种方法是有道理的，但由于控制器不是对数据进行*过多*处理的地方，因此控制器方法可能如下所示：

```
public function changeAction()
{
    $this->_model->change($arguments);//<-- let the Model-layer sort it out
} 
```

根据经验：控制器是将数据尽快推送到模型中的东西，模型层是所有逻辑所在的地方。至少对我而言，将更改操作拆分为单独的控制器方法感觉就像您的应用程序的内部工作正在*“转移”*到控制器

# windows-8 - 为什么 Windows 应用商店应用程序会使用 WebSockets 而不是原始 TCP？

> ID：13198569
> 
> 赞同：2
> 
> 时间：2012-11-02T15:44:05.523
> 
> 标签：windows-8, websocket, windows-runtime

在任何情况下，系统允许 Windows 商店（即 Metro）应用程序通过[WebSocket](https://www.rfc-editor.org/rfc/rfc6455)连接到特定主机，但不尝试与它建立原始 TCP 连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:21:24.903

您要求“*系统*允许应用程序”，但您不仅应考虑所涉及的两个端点（客户端、服务器），还应考虑中间的网络以及防火墙、代理等任何中介。

由于它与 HTTP 兼容的初始握手，WebSocket 连接比某个任意端口上的原始 TCP 连接更有可能成功。

但是，如果您将标准端口 443 上的安全 WebSocket 连接的成功率与端口 443 上的原始 TLS/TCP 连接的成功率进行比较，它们*可能*是相似的。

通常，如果中间人想要允许 HTTPS，他们将无法拦截、检查或阻止 TLS/443 ..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:57:12.753

关于为什么有人会使用 websockets 有一个很好的博客：http: [//lucumr.pocoo.org/2012/9/24/websockets-101/](http://lucumr.pocoo.org/2012/9/24/websockets-101/)

有人在 stackoverflow 上发布了关于利弊的帖子： [WebSockets vs raw TCP sockets in Flash](https://stackoverflow.com/questions/5966316/websockets-vs-raw-tcp-sockets-in-flash)

编辑：第二个帖子是关于flash的，但仍然有一些意义。

# c# - 带有弹出编辑器的自定义 DataGridView 控件

> ID：13198573
> 
> 赞同：1
> 
> 时间：2012-11-02T15:44:18.910
> 
> 标签：c#, winforms, datagridview, custom-controls

我已经实现了自定义`DataGridViewColumn`、、`DataGridViewCell`和`DataGridViewEditingControl`类，如[MSDN 示例](http://msdn.microsoft.com/en-us/library/7tas5c80%28v=vs.90%29.aspx#Y0)中所示。

我遇到的问题是，虽然`DateTimePicker`在 MSDN 示例中能够弹出它的日历选择器并让它出现在下面行的顶部，以及与之相邻的单元格；我的控件被困在 DGV 单元大小定义的空间内。我的控件由一个文本框和一个自动完成建议列表组成；所以我需要一种方法来显示列表，而不会使行高几倍。

由于我从 MSDN 中获取了示例，并且仅更改为交换和其他相关更改的扩展，`DateTimePicker`因此`MyControl`我认为魔术正在基`DateTimePicker`类中发生；但不知道我需要在控件中进行哪些更改才能使其行为相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T18:14:56.360

您实现的`DataGridViewEditingControl`大小，移动到单元格区域，并在单元格进入编辑模式时可见。除了编辑控件之外，您还需要一个“弹出控件”，您可以在编辑控件变为活动时创建它，并在它变为非活动时销毁它。

这是一个简单的 WinForms 弹出控件示例： http: [//www.codeproject.com/Articles/17502/Simple-Popup-Control](http://www.codeproject.com/Articles/17502/Simple-Popup-Control)

但是，如果您想要的只是一个具有自动完成功能的单元格，您可以使用 stock`DataGridViewTextBoxColumn`或`DataGridViewComboBoxColumn`.

[http://bytes.com/topic/c-sharp/answers/442061-autocompletestringcollection-text-box-datagridview-2-0-a](http://bytes.com/topic/c-sharp/answers/442061-autocompletestringcollection-text-box-datagridview-2-0-a)

# barcode - 在 Filemaker 中扫描条形码

> ID：13198577
> 
> 赞同：0
> 
> 时间：2012-11-02T15:44:40.680
> 
> 标签：barcode, filemaker

我需要在 Filemaker 5.5 中扫描条形码，但问题是 Filemaker 5.5 无法处理“ENTER”键，据我所知，条形码阅读器需要在 Filemaker 上启动脚本。如果有人对此有解决方案，那就太好了！（即使是一些插件也会很好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T01:41:08.333

如上所述，您可以通过最新版本的 FileMaker 中的脚本触发器来实现所需的操作。

FileMaker 5.5 中无法通过回车键触发脚本。脚本触发器还不存在。

回到我之前的 FM7 思维方式，您可以将要扫描的字段设置为一个按钮。该按钮触发您的脚本，脚本进入用户字段并暂停脚本。然后输入键将取消暂停。

还有其他方法。你会写插件吗？扫描后让用户按下按钮是否太麻烦？

# c# - 从 ListView 选定项中删除黑色边框样式

> ID：13198580
> 
> 赞同：0
> 
> 时间：2012-11-02T15:44:44.300
> 
> 标签：c#, wpf, listview, styles

我正在尝试创建一个自定义控件，如下所示：[https ://stackoverflow.com/a/13188979/637142](https://stackoverflow.com/a/13188979/637142)

到目前为止，我有一个列表视图：

```
<ListView Name="listBox1">

        <!-- Place items horizontaly -->
        <ListView.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal" ></StackPanel>
            </ItemsPanelTemplate>
        </ListView.ItemsPanel>

        <ListView.ItemContainerStyle>
            <Style TargetType="{x:Type ListViewItem}">
                <Style.Resources>                        
                    <!-- Background for Selected ListViewItem -->
                    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}"
                             Color="Yellow"/>
                </Style.Resources>
            </Style>
        </ListView.ItemContainerStyle>

        <!-- The items on the listview  -->
        <ListView.Items>
            <TextBlock Margin="5">Test1</TextBlock>
            <TextBlock Margin="5">Test2</TextBlock>
            <TextBlock Margin="5">Test3</TextBlock>
        </ListView.Items>

</ListView> 
```

我现在唯一的问题是当用户使用箭头键选择一个项目时。例如，如果我用鼠标选择一个项目，它的外观是这样的：

![在此处输入图像描述](../Images/98dcf66efb90e957a3ba856cc052b78b.png)

但是，如果我用箭头键选择相同的项目，它的外观是这样的：

![在此处输入图像描述](../Images/951533270ab280eb62439f92218a42a8.png)

**如何从所选项目中删除黑色虚线边框！**

我不想添加 previewKeyDown 事件，然后像处理它一样

```
 if (e.Key == Key.Left)
 {
         listBox1.SelectedIndex--;
         e.Handled = true;
 }
 else if (e.Key == Key.Right)
 {
         listBox1.SelectedIndex++;
         e.Handled = true;
 } 
```

因为我还希望能够使用 shift 键选择多个项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:57:14.407

`ListViewItem`有一个称为`FocusVisualStyle`定义边界的属性。

您可以简单地将属性设置为 null 以删除边框：

```
<ListView.ItemContainerStyle>
    <Style TargetType="{x:Type ListViewItem}">
        <Style.Resources>

            <!-- Background for Selected ListViewItem -->
            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}"
                        Color="Yellow"/>
        </Style.Resources>

        <!-- Make sure the dotted border is never shown on ListViewItem -->
        <Setter Property="FocusVisualStyle" Value="{x:Null}" />
    </Style>
</ListView.ItemContainerStyle> 
```

# java - 从查询字符串构建查询对象 - Objectify

> ID：13198587
> 
> 赞同：-2
> 
> 时间：2012-11-02T15:44:57.403
> 
> 标签：java, google-app-engine, objectify

`Query`是否可以使用带有查询字符串的 Objectify构建对象？我的意思是，我知道 Objectify 会构建如下查询：

```
Query<Foo> q = ofy().load().type(Foo.class);
q = q.filter("bar", b); 
```

但是，Objectify 是否有办法或任何计划能够从查询字符串构建查询对象，例如：

```
String query = "SELECT * FROM Foo WHERE bar = b";
List<Foo> foo = ofy().buildQuery(query).asList(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:35:44.087

目前，无法在 Objectify 中从查询字符串构建查询。

# python - Python“导入wx”错误

> ID：13198596
> 
> 赞同：1
> 
> 时间：2012-11-02T15:45:23.577
> 
> 标签：python, macos, wxpython

我最近安装了 python 2.7.3（来自 2.6），并且不小心在我的 Mac 上重新安装了 wxPython 2.8 unicode。现在，当我尝试导入 wx 时，我得到

```
>>> import wx
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/wxPython-unicode-2.8.12.1/lib/python2.7/site-packages/wx-2.8-mac-unicode/wx/__init__.py", line 45, in <module>
    from wx._core import *
  File "/usr/local/lib/wxPython-unicode-2.8.12.1/lib/python2.7/site-packages/wx-2.8-mac-unicode/wx/_core.py", line 4, in <module>
    import _core_
ImportError: dlopen(/usr/local/lib/wxPython-unicode-2.8.12.1/lib/python2.7/site-packages/wx-2.8-mac-unicode/wx/_core_.so, 2): no suitable image found.  Did find:
/usr/local/lib/wxPython-unicode-2.8.12.1/lib/python2.7/site-packages/wx-2.8-mac-unicode/wx/_core_.so: no matching architecture in universal wrapper 
```

为什么是这样？我做到了`defaults write com.apple.versioner.python Prefer-32-Bit -bool yes`，并且`print("%x" % sys.maxsize, sys.maxsize > 2**32)`仍然返回`('7fffffffffffffff', True)`。这是否意味着它在 64 位模式下运行？如果是这样，这就是我收到此错误的原因吗？

编辑：在 python2.6 中导入 wx 时也会发生这种情况。但是什么都不应该改变，因为我有相同版本的 wxPython。

另一个编辑：使用`arch`，我确定这是因为它在 64 位模式下运行。但是，尽管`Prefer-32-Bit -bool yes`. 为什么会这样？我注意到 /usr/bin/python 仍然运行 2.6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:02:40.067

这绝对是架构不匹配。不要将 python 作为 32 位运行，而是在编译 wx 之前尝试设置此环境变量：

```
export ARCHFLAGS='-arch x86_64' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-19T07:08:01.800

如果你想在 mac 中运行 Ride(robotframework)，我想我对你有同样的问题。你可以下载python版本（Mac OS X 32-bit i386/PPC安装程序），是的，你必须使用它而不是其他的。你可以从网上下载它：[https ://www.python.org/downloads/ release/python-2711/.](https://www.python.org/downloads/release/python-2711/.this)这是我在mac pro中运行的情况

# wcf - WCF 服务中的无意模拟

> ID：13198604
> 
> 赞同：1
> 
> 时间：2012-11-02T15:46:00.583
> 
> 标签：wcf, impersonation

（注意：我终于自己解决了这个问题，模拟结果并不是主要问题；但是，如果有人知道为什么会发生模拟，请告诉我。）

我们有一个从 Silverlight 应用程序调用的 WCF 服务（它们由同一个 Web 应用程序托管）。与操作本身花费的时间相比，调用服务的速度非常慢。WCF 跟踪日志使它看起来花费了两秒钟以上的时间来模拟（参见第五行）：

```
[15:32:3.193] From: Processing message 1.
[15:32:3.193] Activity boundary.
[15:32:3.193] Received a message over a channel.
[15:32:3.194] ServiceChannel information.
[15:32:5.539] Security Impersonation succeeded at the server.
[15:32:5.540] To: Execute 'MyNamespace.GetFloorplan'.
[15:32:5.540] Activity boundary.
[15:32:6.302] From: Execute 'MyNamespace.GetFloorplan'.
[15:32:6.302] Activity boundary.
[15:32:6.305] Sent a message over a channel.
[15:32:6.306] Activity boundary. 
```

这让我感到困惑，因为我认为模拟是您需要在配置中显式启用（或从代码触发）的东西。我刚作为顾问加入这个项目，所以我还没有对整个源代码的完整概述，但是源代码中的任何地方都不存在“模拟”或“模拟”文本。更令人困惑的是，`System.Threading.Thread.CurrentPrincipal.Identity`从服务内部返回一个没有名称的未经身份验证的身份，然后`System.Security.Principal.WindowsIdentity.GetCurrent().Name`返回`IIS APPPOOL\MyCustomAppPool`，因此模拟似乎并没有真正完成任何事情。

我们使用表单身份验证和 ASP.NET 兼容模式。当我禁用后者时（我不确定我是否可以永久执行此操作，因为可能存在依赖于它的功能我还不知道），`Security Impersonation succeeded at the server`从日志中消失，但和之间的时间差`Received a message over a channel.`仍然`To: Execute 'MyNamespace.GetFloorplan'.`几乎两秒钟。添加`[OperationBehavior(Impersonation = ImpersonationOption.NotAllowed)]`到操作没有帮助。

有谁明白这里发生了什么？（我的目标是摆脱模仿或任何占用这两秒钟的时间。）

* * *

我们在服务类上有以下属性（我知道理想情况下它们应该在接口上，但我还没有发现它们是否首先被放置在服务上）：

```
[ServiceContract(Namespace = "")]
[SilverlightFaultBehavior]
[AspNetCompatibilityRequirements(RequirementsMode = 
                                 AspNetCompatibilityRequirementsMode.Allowed)] 
```

这是我们的服务配置：

```
<system.serviceModel>
  <serviceHostingEnvironment aspNetCompatibilityEnabled="true" 
                             multipleSiteBindingsEnabled="true" />
  <behaviors>
    <serviceBehaviors>
      <behavior name="">
        <serviceMetadata httpGetEnabled="true" />
        <serviceDebug includeExceptionDetailInFaults="false" />
      </behavior>
    </serviceBehaviors>
  </behaviors>
  <bindings>
    <customBinding>
      <binding name="SilverlightServiceBinding">
        <binaryMessageEncoding />
        <httpTransport />
      </binding>
    </customBinding>
  </bindings>
  <services>
    <service name="MyNamespace.FloorplanService">
      <endpoint address="" binding="customBinding" 
                bindingConfiguration="SilverlightServiceBinding" 
                contract="MyNamespace.FloorplanService" />
      <endpoint address="mex" binding="mexHttpBinding" 
                contract="IMetadataExchange" />
    </service>
  </services>
</system.serviceModel> 
```

还有我们的客户端配置：

```
<system.serviceModel>
  <bindings>
    <basicHttpBinding>
      <binding name="BasicHttpBinding_FloorplanService" 
               maxBufferSize="2147483647" maxReceivedMessageSize="2147483647">
        <security mode="None" />
      </binding>
    </basicHttpBinding>
  </bindings>
  <client>
    <endpoint address="../Floorplan/FloorplanService.svc"
              binding="basicHttpBinding" 
              bindingConfiguration="BasicHttpBinding_FloorplanService"
              contract="FloorplanServiceProxy.FloorplanService" 
              name="BasicHttpBinding_FloorplanService" />
  </client>
</system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:27:21.777

事实证明，模拟消息是一条红鲱鱼（我应该明白这一点，因为它在禁用 ASP.NET 兼容模式时消失了，而请求仍然花费了几乎同样多的时间）。但是，WCF 跟踪日志确实为我指明了正确的方向：在实际调用操作之前，WCF 中显然发生了*一些*非常耗时的事情。最终，我们发现 Web 应用程序包含一个用户身份验证/授权类，由于配置不正确的依赖注入容器，每个请求都被调用多次，导致许多不必要的数据库请求。

Lesson learned (in case others stumble across the same problem): depending on your configuration, WCF may call authentication and authorization mechanisms before your code executes, and these may take up a non-negligible amount of time.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:55:12.693

它可能是您网站的 IIS 身份验证设置。

如果您启用了多个身份验证类型，并且它首先尝试其他身份验证类型之一。

# asp.net - 使用默认项目模板还是从头开始？

> ID：13198607
> 
> 赞同：0
> 
> 时间：2012-11-02T15:46:02.120
> 
> 标签：asp.net, web-config, asp.net-membership, visual-studio-2012

我正在使用`visual studio 2008`，现在我升级到`visual studio 2012`.

我对新界面有一些疑问：

我创建了一个新的 Web 应用程序来开始我的 asp.net 应用程序：

1.  这么多有组织的文件夹`(css,scripts,contents ...etc)`

    哪个更实用，更明智？根据我的要求使用所有这些文件夹和文件几乎没有更改，或者只是删除所有这些文件夹和文件并创建我自己的文件夹和文件，因为这些许多现成的部件可能会使开发人员和设计人员感到困惑？

2.  很多`Config`文件！！

    通常在根上但在 ( `Web.Debug.config and Web.Release.config`)内

    Bundle.config 和另一个在帐户文件夹中？只是我想知道为什么主配置有两个配置文件！

3.  很久以来我不使用会员所以我不知道这个问题是属于新的视觉工作室还是和以前一样。

    当我通过命令将成员表与我在 sql server 2008 上现有数据库中的表集成时`aspnet_regsql`。

    我发现新表都以`aspnet_`前缀（`aspnet_Membership`）开头，但是在使用新表设置连接字符串后运行我的应用程序时，如下所示：

    ```
    <connectionStrings>
        <clear/>
        <add name="DefaultConnection" providerName="System.Data.SqlClient" connectionString="Data Source=.;Initial Catalog=test_membership;Integrated Security=True" />
    </connectionStrings> 
    ```

并注册一个新用户，我发现新表的结构与我用命令添加的先前表的结构相同，`aspnet_regsql`但这次没有像 this( `Memberships`) 这样的前缀，并且我的用户数据存储在这些表上而不是第一个？？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T15:53:04.833

1.  这完全取决于您和您的团队，Microsoft 已经根据他们如何看待团队的工作方式制作了他们的模板，您的脚本在您的脚本文件夹中，css 文件在 css 文件夹中等等，这都是一种非常合理和合理的方式的工作。

2.  配置文件很好，它们是支持应用程序开发的一种新方式。Bundles.config 意味着您可以将脚本（和 CSS 文件）捆绑在一起，因此在将新脚本添加到您的应用程序时更容易使用 - 这很棒。

    Web.Debug.Config 和 Web.Release.config 实际上也很酷。这意味着您可以更改应用程序的 Debug 和 Release 模式之间的连接字符串，这可以节省您在服务器发布时进行通常的 web.config 更改。

3.  请阅读 .NET Membership system，这完全是另外一回事，自 .NET 2.0 以来一直存在。听起来，如果您想使用它，您需要将您的用户从旧的成员资格表链接到 .NET 成员资格表。

总而言之，听起来您需要阅读 .NET 4.0 / .NET 4.5 的新功能，而不是 Visual Studio 2012。

# java - Java 日历：获取两个日期/时间之间的差异 - 减一

> ID：13198609
> 
> 赞同：10
> 
> 时间：2012-11-02T15:46:17.800
> 
> 标签：java, date, calendar, datediff

我已经看到了很多关于这个主题的问题和答案，但没有一个解决我的特定问题。我扩展了 java Calendar 类（标准——没有第三方库），并且需要找出两个任意日期之间的**天数差异。**

方法：

1.  将两个日期的时间更改为午夜。
2.  将日期转换为毫秒。
3.  找出两个日期之间的差异。
4.  将结果除以一天中的毫秒数 (24 * 60 * 60 * 1000)。
5.  结果应该是天的差异。

有时是，有时不是。即使是同一天的测试也可以减少一个。这是怎么回事？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-02T17:08:26.473

[Joda Time](http://joda-time.sourceforge.net/) Library对此类问题有很好的支持：

```
LocalDate d1 = new LocalDate(calendar1.getTimeInMillis());
LocalDate d2 = new LocalDate(calendar2.getTimeInMillis());
int days = Days.daysBetween(d1, d2).getDays(); 
```

更新（来自@basil-bourque 的反馈）：

从 Java 8`java.time`开始，引入了新的时间库，现在可以使用没有外部依赖项的类似选项：

```
int days = Duration.between(calendar1.toInstant(), calendar2.toInstant()).toDays(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-06T20:40:36.277

正如其他用户所建议的，您还需要将日历的毫秒值设置为零以仅比较日期。这可以通过以下代码片段来实现：

```
someCalendar.set(Calendar.MILLISECOND, 0) 
```

另外，请注意时区变化（例如从冬季时间到夏季时间）可能意味着一天的时间多于或少于 86,400,000 毫秒。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-03-02T02:22:43.290

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-04-13T09:59:26.523

我已经写了一种更简单的方法来解决这个问题，即使我也面临同样的问题，即某些日期要多出一天。

这是我目前的做法，

```
 public long getDays(long currentTime, long endDateTime) {

    Calendar endDateCalendar;
    Calendar currentDayCalendar;

    //expiration day
    endDateCalendar = Calendar.getInstance(TimeZone.getTimeZone("EST"));
    endDateCalendar.setTimeInMillis(endDateTime);
    endDateCalendar.set(Calendar.MILLISECOND, 0);
    endDateCalendar.set(Calendar.MINUTE, 0);
    endDateCalendar.set(Calendar.HOUR, 0);

    //current day
    currentDayCalendar = Calendar.getInstance(TimeZone.getTimeZone("EST"));
    currentDayCalendar.setTimeInMillis(currentTime);
    currentDayCalendar.set(Calendar.MILLISECOND, 0);
    currentDayCalendar.set(Calendar.MINUTE, 0);
    currentDayCalendar.set(Calendar.HOUR, 0);

    long remainingDays = Math.round((float) (endDateCalendar.getTimeInMillis() - currentDayCalendar.getTimeInMillis()) / (24 * 60 * 60 * 1000));

    return remainingDays;
} 
```

以前我用的是这条线，其余的都是一样的：-

```
long remainingDays = TimeUnit.MILLISECONDS.toDays(
            Math.abs(expiryCalendar.getTimeInMillis() - currentDayCalendar.getTimeInMillis())); 
```

但似乎不适合我。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-02T15:46:17.800

您在第一步中通过将时间设置为午夜来识别问题：确保所有小时、分钟和秒都为零。但你走得还不够远！您还必须确保**毫秒**也被归零。

这里有一些代码可以做到这一点。

```
protected long truncate_to_seconds (long date_in_millis) {
    long l = date_in_millis / 1000L;
    l *= 1000L;
    return l;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-02T15:57:05.657

**我相信您需要**在计算差异之前从日期截断时间部分，如下所示：

```
 DateFormat formatter= new SimpleDateFormat("MM/dd/yyyy");
   String truncatedDateString1 = formatter.format(date1);
   Date truncatedDate1 = formatter.parse(truncatedDateString1);

   String truncatedDateString2 = formatter.format(date2);
   Date truncatedDate2 = formatter.parse(truncatedDateString2);

   long timeDifference = truncatedDate2.getTime()- truncatedDate1.getTime();

   int daysInBetween = timeDifference / (24*60*60*1000); 
```

希望这有效。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-29T06:58:47.560

根据您的要求，我有我的职责。我正在使用日历，在比较之前我将所有时间部分设置为 0。

```
 int countDays(Date dateBegin, Date dateEnd) {
    if (dateBegin == null || dateEnd == null)
        return 0;
    Calendar from = asCalendar(dateBegin); // asCalendar() Initialise a Calendar from a Date
    Calendar to = asCalendar(dateEnd);
    // Set the time part to 0
    from.set(Calendar.MILLISECOND, 0);
    from.set(Calendar.SECOND, 0);
    from.set(Calendar.MINUTE, 0);
    from.set(Calendar.HOUR_OF_DAY, 0);
    to.set(Calendar.MILLISECOND, 0);
    to.set(Calendar.SECOND, 0);
    to.set(Calendar.MINUTE, 0);
    to.set(Calendar.HOUR_OF_DAY, 0);
    int nbJours = 0;
    for (Calendar c = from ; c.before(to) ; c.add(Calendar.DATE, +1))
    {
        nbJours++;
    }
    for (Calendar c = from ; c.after(to) ; c.add(Calendar.DATE, -1))
    {
        nbJours--;
    }
    return nbJours;
    } 
```

# onedrive - 是否可以使用 Windows 8 Phone 模拟器登录 Microsoft 帐户？

> ID：13198614
> 
> 赞同：4
> 
> 时间：2012-11-02T15:46:33.780
> 
> 标签：onedrive, windows-phone-8, windows-phone-8-emulator

我最近尝试登录我的 Microsoft 帐户以测试一些需要它的功能（Skydrive、商店、许多其他东西）。但是，当我尝试登录时，我收到此错误：

“我们在登录时遇到问题...... 0x8000FFFF”

![在此处输入图像描述](../Images/92c86d2978bf01f27ae051606949e7ca.png)

它只是不受支持吗？您如何在没有物理 Windows 8 手机的情况下测试[Skydrive API之类的东西？](http://msdn.microsoft.com/en-us/live/ff621310)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T19:00:05.333

遗憾的是，在公开发布的 SDK 上是不可能的。以前在 SDK 的预发布版本中以及在封闭的公共测试版中都是可能的。

# c# - C# WPF 应用程序数据网格错误：对象引用未设置为实例

> ID：13198623
> 
> 赞同：-2
> 
> 时间：2012-11-02T15:46:46.633
> 
> 标签：c#, wpf, object, datagrid

我是`DataGrid`WPF C# 中的 s 新手。

我`DataGrid`在两个不同的选项卡控件上有两个 s。

现在其中一个可以工作（这意味着我能够动态创建和添加列并访问 datagrid1 及其方法）而使用另一个 datagrid2 我无法在任何私有方法中执行上述操作。（我复制粘贴的 datagrid1 属性并将其重命名为 datagrid2）但是使用 datagrid2，当我在 Windows_Loaded 方法中使用时，我可以做这些事情。

我究竟做错了什么？这是代码：

```
<my3:DataGrid AutoGenerateColumns="False" CanUserAddRows="False" 
CanUserDeleteRows="False" Block.TextAlignment="Center" HeadersVisibility="Column"  
AlternationCount="2" ItemsSource="{Binding}" IsReadOnly="True" 
AlternatingRowBackground="LightYellow" Margin="6,57.772,12.489,6" Name="datagrid2" 
xmlns:my3="http://schemas.microsoft.com/wpf/2008/toolkit">
</my3:DataGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:49:52.100

一般来说，永远不要尝试`UIElement`在构造函数中访问和操作 s。

相反，处理`Loaded`您的容器的事件（通常是 a `UserControl`、`Control`、`Window`或`Page`）并在那里操作您`UIElement`的 s 。

# c++ - 在 Visual Studio 2010 和 Windows 中使用文件描述符

> ID：13198627
> 
> 赞同：2
> 
> 时间：2012-11-02T15:46:56.750
> 
> 标签：c++, file, file-descriptor

我有一个 C++ 程序，它接受来自用户的一些文本并将其保存到文本文件中。以下是该程序的片段：

```
#include "stdafx.h"
#include <ctime>
#include <fcntl.h>
#include <iostream>
#include <string>
#include <string.h>
#include <sys/stat.h>
#include <sys/types.h>
#include <time.h>
#include <unistd.h>
#include <Windows.h>

using namespace std;

int file_descriptor;
size_t nob;

int check_file(const char* full_path) //Method to check whether a file already exists
{
    file_descriptor = open(full_path, O_CREAT | O_RDWR, 0777); //Checking whether the file exists and saving its properties into a file descriptor
}

void write_to_file(const char* text) //Method to create a file and write the text to it
{
    time_t current = time(0); //Getting the current date and time
    char *datetime = ctime(&current); //Converting the date and time to string

    nob = write(file_descriptor, "----Session----\n\n"); //Writing text to the file through file descriptors
    nob = write(file_descriptor, "Date/Time: %s\n\n", datetime); //Writing text to the file through file descriptors
    nob = write(file_descriptor, "Text: %s", text); //Writing text to the file through file descriptors
    nob = write(file_descriptor, "\n\n\n\n"); //Writing text to the file through file descriptors
} 
```

该程序存在三个主要问题：

1.  Visual Studio 告诉我它无法打开源文件`<unistd.h>`（没有这样的文件或目录）。

2.  标识符`open`未定义。

3.  标识符`write`未定义。

请问我该如何解决这些问题？我在 Windows 7 平台上使用 Visual Studio 2010。我想在我的程序中使用文件描述符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T16:09:55.403

Visual C++ 更喜欢这些函数的符合 ISO 标准的名称：[_open](http://msdn.microsoft.com/en-us/library/z0kc8e3z.aspx)和[_write](http://msdn.microsoft.com/en-US/library/1570wh78.aspx)。但是 POSIX 名称`open`和`write`工作正常。

您需要`#include <io.h>`访问它们。

除此之外，您的代码没有`write`正确使用该功能。您似乎认为它是 的另一个名称`printf`，POSIX 不同意。

* * *

此代码在 Visual C++ 中编译得很好。

```
#include <time.h>
#include <io.h>
#include <fcntl.h>

int file_descriptor;
size_t nob;

int check_file(const char* full_path) //Method to check whether a file already exists
{
    return open(full_path, O_CREAT | O_RDWR, 0777); // Checking whether the file exists and saving its properties into a file descriptor
}

void write_to_file(const char* text) // Function to write a binary time_t to a previously opened file
{
    time_t current = time(0); //Getting the current date and time

    nob = write(file_descriptor, &current, sizeof current);
} 
```

如果您创建一个`unistd.h`包含 的文件`#include <io.h>`，并将其粘贴到您的系统包含路径中，那么您将不需要任何代码更改（假设您的代码一开始就与 POSIX 兼容）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T15:49:14.380

`open`并且`write`是（Unix）平台特定的。文件访问的 C 标准方法是`FILE*`,`fopen`和`fwrite`.

如果你仍然想使用`open`/`write`你应该看看[http://msdn.microsoft.com/en-us/library/z0kc8e3z(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/z0kc8e3z(v=vs.100).aspx)。Microsoft 添加了对 open/write 的支持，但将（非 C 标准）函数重命名为`_open`/ `_write`。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-02T15:54:42.080

如果您想在 Windows 下使用此代码而不做任何更改，请尝试 Cygwin：[http ://www.cygwin.com/](http://www.cygwin.com/)

但是，正如另一个答案中已经建议的那样，使用 C 库 FILE 函数重写此代码要好得多。这适用于任何操作系统。

# z3 - Z3 支持 -m 选项

> ID：13198628
> 
> 赞同：1
> 
> 时间：2012-11-02T15:46:58.230
> 
> 标签：z3

在 unix 上，我正在尝试使用使用 Z3 的 AProVE。我下载并构建了源代码（4.1.2；虽然 z3 -version 显示 4.2）。AProVE 使用带有 -m 选项的 z3，但 4.2 不支持 -m。根据 AProVE 开发人员的说法，-m 在 z3 4.0 中可用。

如何获取支持 -m 的 z3 的源文件？或者，我的问题有简单的解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:17:36.553

默认情况下启用模型生成。我们不再需要提供选项`-m`。如果您无法更改 AProVE，您可以为 Z3 创建一个包装器，`-m`在调用 Z3 之前删除该选项。另一种选择是破解`shell\main.cpp`Z3 源代码中的文件。它包含一个名为

```
void parse_cmd_line_args(int argc, char ** argv) 
```

`-m`要包含一个不执行任何操作的虚拟选项，您只需包含一个新的`if-statement`.

```
 else if (strcmp(opt_name, "m") == 0) {
            // do nothing
        } 
```

# .net - 缺少 Visual Studio 2012 .NET Framework 2.0

> ID：13198629
> 
> 赞同：2
> 
> 时间：2012-11-02T15:46:58.210
> 
> 标签：.net, .net-2.0, visual-studio-2012

很奇怪的一个。

我有一台 Windows 8 开发机器，它在 Windows 功能中启用了 .NET 3.5，但在安装 Visual Studio 2012 后，我在新项目列表中看不到 .NET Framework 2.0。我可以看到 3.0 - 4.5，但没有低于它。问题是我需要支持一些特定的 .NET 2 应用程序。

我试过了：

1.  完全重新安装 Visual Studio。
2.  在 Windows 功能中关闭和打开 .net 3.5 支持
3.  在以上几点中多次重启
4.  使用此处提到的设置验证工具进行检查 ( [http://blogs.msdn.com/b/astebner/archive/2008/10/13/8999004.aspx](http://blogs.msdn.com/b/astebner/archive/2008/10/13/8999004.aspx)。它返回框架 2.0 已安装并且有效。

我难住了。任何想法都将不胜感激。同样，如果有人知道如何从 .NET 3.5 运行时 SP1 安装程序强制安装 .NET 2，我可能会试一试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:58:43.953

我不得不解决这个问题。与 2012 一起运行 Visual Studio 2010 似乎是一个问题。要解决这个问题，我必须：

1.  卸载两个版本的 Visual Studio
2.  关闭 .NET 3.5 运行时
3.  安装 Visual Studio 2010
4.  打开 .NET 3.5 运行时
5.  安装 Visual Studio 2012

我最初做了一个或多个这些，但只有当我按照这个特定的顺序做时它才有效。

# c# - gridview删除事件不起作用

> ID：13198634
> 
> 赞同：0
> 
> 时间：2012-11-02T15:47:08.640
> 
> 标签：c#, asp.net, gridview

我有一个带有自动生成的删除按钮的gridview。网格有一个数据键名，由于某种原因，我收到此错误：消息：索引超出范围。必须是非负数且小于集合的大小。参数名称：索引

我看过很多教程和例子。这段代码应该可以正常工作吗？

```
protected void grdBins_RowDeleting(object sender, GridViewDeleteEventArgs e)
{

    int rec_id = int.Parse(grdBins.DataKeys[e.RowIndex].Value.ToString());

     SqlCommand cmd = new SqlCommand();
     cmd.CommandText = "delete from t_run_schedule_lots  " +
                       "where rec_id = @id";

     cmd.Parameters.Add("@id", SqlDbType.Int).Value = rec_id ;

     cmd.CommandType = CommandType.Text;
     cmd.Connection = this.sqlConnection1;
     this.sqlConnection1.Open();
     //execute insert statement
     cmd.ExecuteNonQuery();
     this.sqlConnection1.Close();
     //re-populate grid */
    fill_grid();
     grdBins.EditIndex = -1;
     grdBins.DataBind(); 
     // this bit was just to see if I was capturing the ID field properly. 
    lblBins.Visible = true;
     lblBins.Text = rec_id.ToString();
} 
```

如果有人知道 C# 中的一个很好的例子可以完成这项工作，那将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:16:42.090

这是我为使其正常工作所做的工作：

```
GridViewRow row = (GridViewRow)grdBins.Rows[e.RowIndex];
            Label id = (Label)row.FindControl("Label9");

             SqlCommand cmd = new SqlCommand();
             cmd.CommandText = "delete from t_run_schedule_lots  " +
                               "where rec_id = @id";

             cmd.Parameters.Add("@id", SqlDbType.Int).Value = Convert.ToInt32(id.Text) ; 
```

虽然我不知道为什么 RowIndex 选项不起作用。无论如何，它现在正在工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:56:43.900

听起来您 `DataKeyNames="rec_id"`在 gridview aspx 中没有设置？如果您没有让页面知道它们是什么，则无法访问数据键

这是您的代码的重构版本。

```
protected void grdBins_RowDeleting(object sender, GridViewDeleteEventArgs e)
{
       int rec_id = int.Parse(grdBins.DataKeys[e.RowIndex].Value.ToString());
       using (SqlConnection conn = new SqlConnection(connectionString)){
            conn.Open();
            string cmdText = @"delete from t_run_schedule_lots
                               where rec_id = @id";
            using (SqlCommand cmd = new SqlCommand(cmdText, conn)){
                cmd.CommandType = CommandType.Text;
                cmd.Parameters.AddWithValue("@id", rec_id);
                cmd.ExecuteNonQuery();
            }
       }
       grd.EditIndex = -1;
       fill_grid();
       grdBins.DataBind(); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T15:57:49.880

我可能误解了您的问题，但根据[此处](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.editindex%28v=vs.100%29.aspx)EditIndex 属性是从零开始的，因此您不能将其设置为-1。将其设置为该值将引发 ArgumentOutOfRangeException。

# c# - Richtextbox 上的编号列表

> ID：13198635
> 
> 赞同：7
> 
> 时间：2012-11-02T15:47:09.147
> 
> 标签：c#, winforms, richtextbox

我正在尝试将编号列表功能添加到文本编辑器。RichTextbox 已经提供了`SelectionBullet`将选择更改为项目符号列表的属性。但我无法找到类似的属性来生成编号列表。是否有任何*标准方法*可以在 Richtextbox 上创建编号列表。***如果没有****，我将不得不自己实现它，所以可以帮助我做到这一点的代码片段会有所帮助*，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T16:19:48.803

我知道通常不接受链接作为一个好的答案，但是CodeProject 上的[带有搜索行编号、项目符号、打印、搜索支持的 RichTextBox](http://www.codeproject.com/Articles/18878/RichTextBox-with-Search-Line-Numbering-Bulleting-P)文章可能会对您正在寻找的内容有所帮助。

在本文中，作者将 RichTextBox 控件扩展为可以执行您所要求（以及更多）的操作，并且将代码发布在那里供所有人查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T18:35:07.727

好吧，我实现它如下。

```
 private void btnNumbers_Click(object sender, EventArgs e)
        {
            string temptext = rtbMain.SelectedText;

            int SelectionStart = rtbMain.SelectionStart;
            int SelectionLength = rtbMain.SelectionLength;

            rtbMain.SelectionStart = rtbMain.GetFirstCharIndexOfCurrentLine();
            rtbMain.SelectionLength = 0;
            rtbMain.SelectedText = "1\. ";

            int j = 2;
            for( int i = SelectionStart; i < SelectionStart + SelectionLength; i++)
                if (rtbMain.Text[i] == '\n')
                {
                    rtbMain.SelectionStart = i + 1;
                    rtbMain.SelectionLength = 0;
                    rtbMain.SelectedText = j.ToString() + ". ";
                    j++;
                    SelectionLength += 3;
                }

        }

        private void rtbMain_KeyDown(object sender, KeyEventArgs e)
        {//this piece of code automatically increments the bulleted list when user //presses Enter key
            int tempNum;
            if (e.KeyCode == Keys.Enter)
                try
                    {
                        if (char.IsDigit(rtbMain.Text[rtbMain.GetFirstCharIndexOfCurrentLine()]))
                        {
                            if (char.IsDigit(rtbMain.Text[rtbMain.GetFirstCharIndexOfCurrentLine() + 1]) && rtbMain.Text[rtbMain.GetFirstCharIndexOfCurrentLine() + 2] == '.')
                                tempNum = int.Parse(rtbMain.Text.Substring(rtbMain.GetFirstCharIndexOfCurrentLine(),2));
                            else tempNum = int.Parse(rtbMain.Text[rtbMain.GetFirstCharIndexOfCurrentLine()].ToString());

                            if (rtbMain.Text[rtbMain.GetFirstCharIndexOfCurrentLine() + 1] == '.' || (char.IsDigit(rtbMain.Text[rtbMain.GetFirstCharIndexOfCurrentLine() + 1]) && rtbMain.Text[rtbMain.GetFirstCharIndexOfCurrentLine() + 2] == '.'))
                            {
                                tempNum++;
                                    rtbMain.SelectedText = "\r\n" + tempNum.ToString() + ". ";
                                e.SuppressKeyPress = true;
                            }
                        }  
                    }
                 catch{}
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T22:54:11.443

这是我的答案......它易于阅读和改进。我采用了一种截然不同的方法，但添加了删除选择中的编号列表（如果它已经存在）的功能。请注意，到目前为止，我只对它进行了轻微的测试，它似乎工作得很好……但它可能需要进一步改进。

```
 private void btnOrdered_Click(object sender, EventArgs e)
    {
        string[] splitSelection = null;
        // If selection split selection else split everything
        if (this.txtCaptionEditor.SelectionLength > 0)
        {
            splitSelection = this.txtCaptionEditor.SelectedText.Replace("\r\n", "\n").Split("\n".ToCharArray());
        }
        else
        {
            splitSelection = this.txtCaptionEditor.Text.Replace("\r\n", "\n").Split("\n".ToCharArray());
        }
        bool Exists = false;
        for (int i = 0; i < splitSelection.GetLength(0); i++)
        {
            // If Ordered List Allready exists in selection then remove else add
            if (!string.IsNullOrEmpty(splitSelection[i]))
            {
                if (splitSelection[i].Substring(0, 2) == "1.") { Exists = true; }
            }
        }

        for (int i = 0; i < splitSelection.GetLength(0); i++)
        {
            int lineCount = (i + 1);
            if (Exists)
            {
                this.txtCaptionEditor.Text = this.txtCaptionEditor.Text.Replace(Convert.ToString(lineCount) + ".  ", "");
            }
            else
            {
                if(!string.IsNullOrEmpty(splitSelection[i]))
                {
                    this.txtCaptionEditor.Text = this.txtCaptionEditor.Text.Replace(splitSelection[i], Convert.ToString(lineCount) + ".  " + splitSelection[i]);
                }

            }
        }
    }

    private void txtCaptionEditor_KeyDown(object sender, KeyEventArgs e)
    {
        string[] splitSelection = this.txtCaptionEditor.Text.Replace("\r\n", "\n").Split("\n".ToCharArray());
        if (e.KeyCode == Keys.Enter)
        {
            // Get Current Line Position
            int currentLine = this.txtCaptionEditor.GetLineFromCharIndex(this.txtCaptionEditor.SelectionStart);
            // Only Run if the previous line is greater than zero
            if ((currentLine) >= 0)
            {
                // Loop through 100 possible numbers for match you can go higher 
                // If you think your numbered list could go above 100
                for (int i = 0; i < 100; i++)
                {
                    if (splitSelection[(currentLine)].Substring(0, 2) == Convert.ToString((i + 1)) + ".")
                    {
                        // If the substring of the current line equals a numbered list                value.. enumerate next line
                        this.txtCaptionEditor.SelectedText = "\n" + (i + 2) + ".  ";
                        e.SuppressKeyPress = true;
                    }
                }
            }
        }
    } 
```

# iphone - 核心数据 - UIManagedDocument 不会打开

> ID：13198638
> 
> 赞同：3
> 
> 时间：2012-11-02T15:47:11.357
> 
> 标签：iphone, ios, uimanageddocument

我正在使用 Core Data 来存储一些与每个用户相关的简单字符串。当应用程序第一次启动时，一切似乎都很好。数据库打开，我成功地保存和检索数据。

但是，经过一些使用后，有时`UIManagedDocument`我使用的应用程序启动时将无法打开。这是我使用的方法（在应用程序委托中完成）：

```
-(void)initManagedDocument{
@try {
    NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
    url = [url URLByAppendingPathComponent:@"DataBase"];

    self.managedDocument = [[UIManagedDocument alloc] initWithFileURL:url];

    if ([[NSFileManager defaultManager] fileExistsAtPath:[url path]]){

        [self.managedDocument openWithCompletionHandler:^(BOOL success){
            if (success) {
                [self documentIsReady];
            }else{
                NSLog(@"Could not open document");
            }

        }];

    }else{

        [self.managedDocument saveToURL:url forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success){

            if (success) {
                [self documentIsReady];
            }else{
                NSLog(@"Could not create document");
            }
        }];
    }
}
@catch (NSException *e) {

}

} 
```

此代码从我的应用程序的`didFinishLaunchingWithOptions`. if 语句的`saveToURL`一半最初被调用，并返回成功。然后在接下来的几个调用中`openWithCompletionHandler:`被调用，并成功返回。

但是，在使用该应用程序一段时间后，`openWithCompletionHandler:`返回成功 = FALSE。我不知道为什么，或者是如何`UIManagedDocument`搞砸的。URL 似乎仍然相同，并且`fileExistsAtPath`仍在返回`YES`。

有谁知道为什么会发生这种情况？或者，如果我有办法调试并找出导致打开失败的实际错误是什么？

# c# - 我可以人为地将用户的 sql 权限限制为对来自我的应用程序的任何连接都是只读的吗？

> ID：13198639
> 
> 赞同：6
> 
> 时间：2012-11-02T15:47:14.433
> 
> 标签：c#, sql, crystal-reports

我在构建的应用程序的安全性方面遇到问题......它是水晶报表查看器的包装器，可为用户提供一些附加功能。

有许多内部用户能够创建/修改 Crystal Reports。我已经做了一些测试，对于一个如此密切地处理连接到各种数据源的应用程序，它似乎一点也不关心这样做是否安全。没有什么能阻止我修改每个人都信任的现有水晶报告，使其变成恶意和有害的东西。所需要的只是一个带有以下 sql 的添加命令表：

```
DELETE FROM tbl_Employees; SELECT FROM tbl_Employees; 
```

事实上，您可以在水晶报表中执行用户有权执行的任何操作……只要它以 select 结尾。这引出了我的问题：有什么方法可以确保我的应用程序将与我们的 sql 服务器的任何连接限制为仅选择？我不能临时修改用户凭据，也不能使用单个只读帐户，因为我仍然需要将用户限制为他们的正常权限（即他们可以查询哪些数据库）。

我不是很有希望，因为我所读过的任何内容都没有让我相信我可以以这种方式限制连接。

另一方面，如果他们愿意，大多数制作报告的人可以采取更直接的方法来破坏我们的数据……但我认为这是一个很好的借口，不尽我所能确保我的应用程序尽可能安全。我似乎无法找到任何可行的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:18:00.433

**您应该使用只读帐户进行报告——没有例外！** 授予帐户对表和视图的 SELECT 权限以及 EXEC 权限功能（通过同义词公开）的访问权限。如果可能，请避免使用过程——它们通常是不必要的，并且您可能会无意中让用户访问修改数据库的过程（我的客户遇到的一种经历）。

** 编辑 **

我想这也取决于敏感数据的表示方式。

当报表运行时，您将在记录选择公式中添加一个行级过滤器。

如果敏感数据包含在少量表中，您可以使用基于角色的安全性（用户添加到组；角色分配到组）。

如果您使用的是 BusinessObjects Enterprise，则可以使用 Universe 来控制数据安全性。BusinessViews 也是一种选择；它们是支持动态/级联参数的原始（在 BusinessObjects 和 SAP 之前）语义层，但它们已经过时了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T02:17:09.330

好的，我将其作为答案，因为我仍然无法发布全球评论，但这是一个可以以某种方式帮助您的想法（我希望）。

我在 SQL Server 方面没有像在 Oracle DB 方面那样丰富的经验。在 Oracle DB 中，每个用户都有自己的空间。每个用户只能读取和修改其空间（Schema）内的数据库对象（表和其他东西），没有例外。然后，您可以为每个用户授予对他自己架构之外的特定对象的访问权限，这是一个合格的访问权限（如“只读”、“仅更新”等）。为了更容易维护这些授权，您可以创建角色，这些角色基本上是一组命名的授权，可以分配给特定用户。

好的，我很确定这对您来说没有什么新东西，但我的观点是：为了完成您正在寻找的内容，在 Oracle 环境中，您可以为每个用户使用数据库用户并控制对信息的访问（表格）通过那个（非常安全的）控件。

我很确定在 SQL Server 中，除了细微的差异之外，您可以执行相同的策略。希望这会引导您对解决该问题提出一些想法...

# matrix - 将函数输出作为 lisp 中矩阵转置的另一个函数参数传递

> ID：13198645
> 
> 赞同：0
> 
> 时间：2012-11-02T15:47:41.920
> 
> 标签：matrix, lisp, arguments, output

我正在用 lisp 编写矩阵转置函数。从以下代码可以看出我的做法：

```
(defun matrix-T (matrix)
  (cond ((null matrix) matrix)
        (t (list
            (do ((i 0 (+ i 1)))
                ((> i (length matrix)))
              (format t "(mapcar #'(lambda (x)(nth ~A x)) matrix)  %" i)))))) 
```

如您所见，我试图从 do 循环中获取输出以作为 list 函数的参数传递。但是，我只得到从 matrix-T 返回的 do 循环输出。无论如何我可以纠正这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:56:40.443

转置矩阵的一种非常简单直接的方法：

```
(defun transpose-matrix (matrix)
  (let ((result
         (make-array (reverse (array-dimensions matrix))
                     :element-type (array-element-type matrix))))
    (dotimes (i (array-dimension result 0) result)
      (dotimes (j (array-dimension result 1))
        (setf (aref result i j) (aref matrix j i))))))

(print
 (transpose-matrix
  #2A((1 2 3)
      (4 5 6))))
;; #2A((1 4) (2 5) (3 6)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:45:36.037

您需要实际运行 MAPCAR 并将其结果收集到一个列表中，而不仅仅是打印或将其作为字符串返回。

```
(defun matrix-T (matrix)
  (cond ((null matrix) matrix)
        (t (do ((i 0 (1+ i))
                (result '())
                (cols (length (car matrix))))
               ((>= i cols) (nreverse result))
             (push (mapcar #'(lambda (x) (nth i x)) matrix) result))))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-11T01:19:57.507

使用 mapcar* 进行转置的优雅方式

```
(defun transpose-matrix (matrix)
  (apply #'mapcar* #'list matrix))

(transpose-matrix '(("1" "a" "e") ("2" "b" "f") ("4" "c" "g") ("5" "d" "h")))

(("1" "2" "4" "5") ("a" "b" "c" "d") ("e" "f" "g" "h")) 
```

# android - 无法为调试器绑定到本地 XXXX

> ID：13198646
> 
> 赞同：11
> 
> 时间：2012-11-02T15:47:45.270
> 
> 标签：android, ddms

我不断`Can't bind to local XXXX for debugger`在控制台中收到消息，但不是针对 1 个端口，针对所有随机端口。[我已经完成了这个问题](https://stackoverflow.com/questions/3318738/i-get-error-in-ddmscant-bind-to-local-8600-for-debugger-why)中所说的，但没有运气。我运行的是Windows 8。**实际上，这些问题是在升级到Windows 8 之后开始的。**

```
[2012-11-02 16:40:41 - ddms] Can't bind to local 8627 for debugger
[2012-11-02 16:40:41 - ddms] Can't bind to local 8617 for debugger
[2012-11-02 16:40:42 - ddms] Can't bind to local 8605 for debugger
[2012-11-02 16:40:42 - ddms] Can't bind to local 8610 for debugger
[2012-11-02 16:41:46 - ddms] Can't bind to local 8611 for debugger
[2012-11-02 16:41:46 - ddms] Can't bind to local 8611 for debugger
[2012-11-02 16:41:47 - ddms] Can't bind to local 8611 for debugger
[2012-11-02 16:42:36 - ddms] Can't bind to local 8611 for debugger
[2012-11-02 16:42:38 - ddms] Can't bind to local 8611 for debugger
[2012-11-02 16:42:39 - ddms] Can't bind to local 8622 for debugger
[2012-11-02 16:42:39 - ddms] Can't bind to local 8608 for debugger
[2012-11-02 16:42:39 - ddms] Can't bind to local 8608 for debugger
[2012-11-02 16:42:48 - ddms] Can't bind to local 8609 for debugger
[2012-11-02 16:42:48 - ddms] Can't bind to local 8609 for debugger
[2012-11-02 16:43:32 - ddms] Can't bind to local 8609 for debugger
[2012-11-02 16:43:36 - ddms] Can't bind to local 8625 for debugger
[2012-11-02 16:43:36 - ddms] Can't bind to local 8619 for debugger 
```

我能做些什么？

*编辑*
我尝试了新安装的 Android SDK 和新的 Eclipse 安装。我也试过关闭我的防火墙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T11:27:28.413

我有同样的问题，没有一个给定的解决方案有效。然后我卸载了所有 JRE 7 并安装了最新的 JRE 6 ( [http://www.oracle.com/technetwork/java/javase/downloads/jre6downloads-1902815.html](http://www.oracle.com/technetwork/java/javase/downloads/jre6downloads-1902815.html) )。它立即解决了问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-09-11T09:34:51.697

**在cmd中打开platform-tools并运行这两个命令**

C:\Users\SH-PC-W8.1-3\AppData\Local\Android\Sdk\platform-tools

```
adb kill-server
adb start-server 
```

这完美地工作。

注意：选择您的平台工具位置

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-18T16:11:21.887

就我而言，此问题是由 AVG 防病毒软件引起的。我尝试添加异常并仅将其关闭以进行开发，但这没有用。我卸载了它，重新启动后问题解决了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-04T18:23:01.663

C:\WINDOWS\system32\drivers\etc\host

And should contain this line :

```
127.0.0.1       localhost 
```

If you have ipv6 ip address ::1 in your host file you need to delete or remark it.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-20T16:17:54.150

如果你在android studio中遇到“无法绑定到本地8700调试器”之类的错误，那么只需关闭模拟器然后再次打开模拟器，这次你一定不会看到错误，这发生在我身上

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-11T20:39:17.600

对于 Mac：检查您的 /etc/hosts 文件。确保 localhost 没有任何本地 ip。我添加并忘记了我为 localhost 添加了一个本地 IP（例如：192.168.2.1）。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-11-10T19:56:14.487

这可能不是那么有建设性，但我建议安装 Linux。:-)

在更严重的方面：安装 VMWare 或 VirtualBox 并从虚拟机中运行它，例如 Ubuntu 作为操作系统。您可以轻松地将 USB 驱动器映射到虚拟机。

# freepascal - Turbo Pascal 中数组的内存布局

> ID：13198650
> 
> 赞同：3
> 
> 时间：2012-11-02T15:47:55.063
> 
> 标签：freepascal, delphi, turbo-pascal

我们在 Turbo Pascal 中有一个旧应用程序，它可以将其内部状态保存到一个文件中，我们需要能够在 C# 应用程序中读取/写入这个文件。

旧应用程序通过转储各种内存数据结构来生成文件。在一个地方，应用程序只是转储了一个内存范围，这个内存范围包含一些数组。我试图找出实际数组元素之前的字节的用途。特别是，块中的前两项可以表示为：

```
type
  string2 = string[2];
  stringarr2 = array[0..64] of string2;
  string4 = string[4];
  stringarr4 = array[0..64] of string4; 
```

在数据文件中，我看到以下字节序列：

```
25 00 02 02 41 42 02 43 44 ... 
```

`25`是数组中元素的数量。是第`02 41 42`一个字符串元素，“AB”；这`02 43 44`是第二个字符串元素，“CD”，依此类推。我不知道`00 02`数组元素计数和第一个数组元素之间的含义。数组元素计数可能是`25 00`元素大小是`02`，但每个数组元素的大小实际上是 3 个字节。

在文件中 4 字符字符串数组开始的位置，我看到以下内容：

```
25 00 04 00 00 04 41 42 43 44 04 45 46 47 48 
```

同样，`25`这是数组中元素的数量；`04 41 42 43 44`是数组中的第一个元素，“ABCD”，依此类推。中间有字节`00 04 00 00`。也许他们是旗帜。也许它们是数组形状的某种指示（但我看不出它们是如何指示`02`一`04`维数组的）。

我无权使用 Turbo Pascal 来尝试将不同类型的数组写入文件，也无权安装 Free Pascal 之类的东西，因此我在这些方面进行实验的机会非常有限。

这些数组不是动态的，因为 Turbo Pascal 没有它们。

提前感谢任何尘土飞扬的回忆。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T17:08:30.223

Pascal 数组没有簿记数据。您有一个 5 字节数据结构数组 ( `string[4]`)，因此包含 65 个数据结构的数组占用 65*5=325 个字节。如果程序写的比这多，那是因为程序采取了特殊的措施，写得更多。当程序*天真*地用`SizeOf`. *因此，了解*这些字节含义的唯一方法是查找源代码或文档。仅仅知道它是 Turbo Pascal 是没有帮助的。

文件的第一部分可能故意与所有其他数组元素的大小相同。对于两个字符的字符串，“header”是三个字节，对于四个字符的字符串，“header”是五个字节，与字符串的大小相同。这将允许程序使用`file of string4`文件的数据类型，然后跳过文件的第一条记录。文件长度和标头中字符串长度之间的零可能属于这些字段中的任何一个，其余两个零字节可能只是填充符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T17:54:04.120

除了文件中各个字符串的布局外，您还需要考虑这些单字节字符来自哪个代码页。C# 字符是 unicode 2 字节字符。

如果幸运的话，原始文件数据仅包含 ASCII 7 位字符，涵盖了英文字母表的字符。如果原始数据包含“欧洲”字母，例如变音符号或重音字符，这些将是 128..255 范围内的“高 ascii”字符值。您需要执行编码转换才能在 C# 中正确查看这些字符。[代码页 1252 Windows Latin 1](http://msdn.microsoft.com/en-us/library/cc195054.aspx)将是一个很好的起点。

如果原始文件数据包含日文、中文、韩文、泰文或来自其他“东方”文字的字符，那么您有很多工作要做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T16:48:39.340

Turbo Pascal 字符串以长度字节为前缀。所以一个 string[2] 实际上是 3 个字节：length、char1 和 char2。string[2] 数组将在内存中一个接一个地保存所有字符串。如果您使用数组作为参数进行块写入，它将立即从第一个字符串开始，它不会写入任何标题等。因此，如果您有源代码，您应该能够看到它在数组之前写入的内容。

# wpf - 如何解决 MVVM 范式中的以下设计？（新）

> ID：13198654
> 
> 赞同：0
> 
> 时间：2012-11-02T15:48:06.260
> 
> 标签：wpf, mvvm, prism

我仍然从 MVVM 开始，并阅读了所有 MSDN Prism 示例，但我仍然想要一些关于以下设计问题的指导，我认为这将帮助我抓住 Prism 概念并加强我刚刚学到的东西

我有一个多窗口应用程序 - 每个窗口都有一个过滤器下拉控件。此过滤器控件的值将影响同一窗口内其他控件的显示，例如网格、图表等。

某些交互（例如，双击网格上的一行）将生成另一个窗口，该窗口将具有自己的单独过滤器控件，这将类似地影响仅在该窗口中的其他控件的显示

如何实现过滤器的这种行为来驱动它不知道的其他用户控件的显示，并将其行为限制为仅托管它的窗口？如何保持这些交互松散耦合？

我在想我需要使用 EventAggregator 并让过滤器控件在选择更改时发布更新事件？我是否以正确的方式思考这个问题？每个窗口都需要一个单独的 EventAggregator 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:10:05.230

您应该使用 发布过滤器通知`EventAggregator`，根据我的经验，这是最好的方法。您应该只使用一个`EventAggregator`作为所有订阅对象之间的集线器。

就像是：

```
MyNotificationChangedArgs args = new MyNotificationChangedArgs();
args.Payload = GetThePayload(someParameters);
myEventAggregator.GetEvent<NotificationFilterChangedEvent>().Publish(args); 
```

另一件真正有帮助的事情是依赖注入`EventAggregator`，例如通过`Unity`. 这样，您的所有控件都可以`EventAggregator`通过调用`UnityContainer.Resolve`方法简单地访问公共：

```
var myEventAggregator = myUnityContainer.Resolve<MyEventAggregator>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T17:25:37.617

是的，您正在以正确的方式考虑这一点。EventAggregator 是您正在做的事情的好工具。您需要在计划从中引发事件的每个窗口上都有 EventAggregator。您可以将 EA 注入您的构造函数或使用 ServiceLocator。这里有 2 个例子：

```
// Ctor injection
private IEventAggregator _eventAggregator;
public ViewModelBase(IEventAggregator eventAggregator)
{
_eventAggregator = eventAggregator;
}

// Service Locator
 ServiceLocator.Current.GetInstance<IEventAggregator>().GetEvent<YourEvent>().Publish(); 
```

现在，您需要创建一个 CompositePresentationEvent 供 EA 发布。您可以通过在 CPE 中包含有效负载来最大程度地减少创建的这些数量。像这样的东西：

```
public class NavigationSelectedEvent : CompositePresentationEvent<NavigationEnum.Destination>{} 
```

因此，现在您已准备好发布活动：

```
 _eventAggregator.GetEvent<NavigationSelectedEvent>().Publish(NavigationEnum.Destination.Home); 
```

然后订阅它 - 在有效负载上使用可选过滤器，这样您就不会浪费资源：

```
this.EventAggregator.GetEvent<NavigationSelectedEvent>().Subscribe(HandleNavigationEvent, ThreadOption.UIThread, false, i => i == NavigationEnum.Destination.Home); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T16:03:59.433

每个 View 都可以通过 ViewModel 访问 Model。为您的过滤器建模。然后视图绑定到使用过滤器的 ViewModel 表示。您的视图不必相互了解，它们只需绑定到模型。

# c++ - 指向对象的指针的未声明标识符向量

> ID：13198657
> 
> 赞同：0
> 
> 时间：2012-11-02T15:48:10.750
> 
> 标签：c++, undeclared-identifier

错误：Cell.h 的第 12 行：“演员”未声明的标识符。

如果我尝试在其上方转发声明，则表示有重新定义。我该怎么办？

演员.h：

```
#ifndef ACTOR_H
#define ACTOR_H
#include <iostream>
#include <vector>
#include <string>
#include "Cell.h"
using namespace std;

class Actor //Simple class as a test dummy. 
{
    public: 
        Actor();
        ~Actor();

};
#endif 
```

单元格.h：

```
#include <iostream>
#include <string>
#include <vector>
#include "Actor.h"
#ifndef CELL_H
#define CELL_H
using namespace std;

class Cell   // Object to hold Actors. 
{
    private:
    vector <Actor*> test;
public:
    Cell();
    ~Cell();
    vector <Actor*> getTest();
    void setTest(Actor*);
};

#endif 
```

细胞.cpp：

```
#include "Cell.h"
#include <vector>

vector<Actor*> Cell::getTest()  //These functions also at one point stated that
{                               // they were incompatible with the prototype, even 
}                               // when they matched perfectly.
void Cell::setTest(Actor*)
{
} 
```

我还可以做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:49:48.047

删除`#include "Cell.h"`from `Actor.h`，你就可以开始了。

通常，在可能的情况下更喜欢前向声明，并在必须的地方包括在内。我还将`#include "Actor.h"`from替换`Cell.h`为前向声明：`class Actor;`.

`cpp`如果需要，可以在文件中包含标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:50:11.630

您通过和`#include`之间的相互引用具有递归s 。`cell.h``actor.h`

中`Cell.h`，删除`#include <Actor.h>`。

在中，在 的定义上方`Cell.h`添加一行。`class Actor;``class Cell`

在`Cell.cpp`中，您*可能*需要添加`#include "Actor.h"`.

# c# - 在 Silverlight 的扩展方法中使用反射进行深度复制？

> ID：13198658
> 
> 赞同：3
> 
> 时间：2012-11-02T15:48:19.097
> 
> 标签：c#, silverlight, reflection, silverlight-5.0, deep-copy

因此，我试图找到一种通用扩展方法，该方法可以使用反射创建对象的深层副本，该方法可以在 Silverlight 中使用。在 Silverlight 中，使用序列化的深度复制不是很好，因为它在部分信任下运行并且 BinaryFormatter 不存在。我也知道反射会比序列化克隆更快。

最好有一个方法可以复制公共、私有和受保护的字段，并且是递归的，以便它可以复制对象中的对象，并且还能够处理集合、数组等。

我在网上搜索过，只能找到使用反射的浅拷贝实现。我不明白为什么，因为你可以只使用 MemberwiseClone，所以对我来说，那些实现是没用的。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:30:45.613

对于数据契约对象，我们使用了以下帮助方法在 Silverlight 中进行深度克隆：

```
public static T Clone<T>(T source)
        {

            DataContractSerializer serializer = new DataContractSerializer(typeof(T));
            using (MemoryStream ms = new MemoryStream())
            {
                serializer.WriteObject(ms, source);
                ms.Seek(0, SeekOrigin.Begin);
                return (T)serializer.ReadObject(ms);
            }
        } 
```

像这样使用：

```
var clone = CloneHelper.Clone<MyDTOType>(dtoVar); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T16:58:10.160

必需的命名空间：

```
using System.Reflection;
using System.Collections.Generic; 
```

方法：

```
 private readonly static object _lock = new object();

    public static T cloneObject<T>(T original, List<string> propertyExcludeList)
    {
        try
        {
            Monitor.Enter(_lock);
            T copy = Activator.CreateInstance<T>();
            PropertyInfo[] piList = typeof(T).GetProperties(BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance);
            foreach (PropertyInfo pi in piList)
            {
                if (!propertyExcludeList.Contains(pi.Name))
                {
                    if (pi.GetValue(copy, null) != pi.GetValue(original, null))
                    {
                        pi.SetValue(copy, pi.GetValue(original, null), null);
                    }
                }
            }
            return copy;
        }
        finally
        {
            Monitor.Exit(_lock);
        }
    } 
```

这并不是 Silverlight 所特有的——它只是普通的反射。

如所写，它仅适用于具有无参数构造函数的对象。要使用需要构造函数参数的对象，您需要传入一个带有参数的 object[]，并使用 Activator.CreateInstance 方法的不同重载，例如

```
T copy = (T)Activator.CreateInstance(typeof(T), initializationParameters); 
```

propertyExcludeList 参数是您希望从副本中排除的属性名称列表，如果您想复制所有属性，只需传递一个空列表，例如

```
new List<string>() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T16:31:15.417

你不能只使用常规的.NET 反射吗？将您的对象序列化为 a `MemoryStream`，然后将其反序列化。这将创建一个深层副本（最终使用反射），并且您几乎不需要任何代码：

```
T DeepCopy<T>(T instance)
{
  BinaryFormatter formatter=new BinaryFormatter();

  using(var stream=new MemoryStream())
  {
    formatter.Serialize(stream, instance);
    stream.Position=0;

    return (T)formatter.Deserialize(stream);
  }
} 
```

# android - 如何关闭 admob 测试

> ID：13198660
> 
> 赞同：1
> 
> 时间：2012-11-02T15:48:26.693
> 
> 标签：android, admob

过去几天我一直在使用 admob，但不知道如何关闭 admob 测试模式。我尝试了网站中的设置，但我仍然收到测试广告，而且它们完全无法在我的手机上运行。日志猫一直告诉我将我的手机添加为测试设备。好吧，我正在通过测试，我只想让事情正常运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:07:49.223

有几种方法可以关闭测试模式。

1.  如果您使用 XML 创建广告，您的 XML 中将包含如下所示的内容：`ads:testDevices="TEST_EMULATOR, THE_DEVICE_ID"`

2.  如果您使用 JAVA 创建广告，您可能会看到如下所示的内容：

    AdRequest.setTestDevices( new String[] {
    AdRequest.TEST_EMULATOR, "THE_DEVICE_ID", // 我的测试设备 ID } );

3.  如果上述方法均无效（无论出于何种原因），您始终可以登录您的 AdMob 帐户，进入“站点和应用程序”，将鼠标指针悬停在相关应用程序上，然后单击“管理设置”。然后，单击“应用程序设置”选项卡，您将看到“测试模式”选项。在那里，选择“禁用所有请求的测试模式”选项并点击底部的“保存设置”。

**注意：**我不使用 Java 亲自创建我的广告，因此您将不得不稍微调查一下

**旁注：**我个人总是依赖第三个选项。节省了我从字面上检查大约 65 个奇怪的 XML 并删除我的测试设备 ID 的工作。

# linux - grep 初始空间

> ID：13198662
> 
> 赞同：0
> 
> 时间：2012-11-02T15:48:32.497
> 
> 标签：linux, bash, grep

`man bash | grep "\-d"`

很多结果

`man bash | grep " \-d"`

没结果

这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T15:55:59.107

它实际上就是它的样子。没有空格，所以 grep 找不到任何空格。如果您检查以下的实际输出`man bash`：

```
man bash > data 
```

然后看看`data`你会发现，在屏幕上呈现为空间的东西实际上是一个转义序列。屏幕上看起来像这样：

```
May also be specified as -d. 
```

实际上是这样的：

```
May also be specified as ^[[1m-d^[[22m. 
```

您的终端可以很好地解释这些。grep 没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:55:21.723

`" \-d"`您是否从某个可能包含制表符或非 ascii 空格的地方剪切并粘贴了该文件？以下所有内容在我的 Ubuntu 12 Linux 3.2.0-32 系统上都可以正常工作，其中第`"`一个后面的空白是 ascii 空间。

```
man bash | grep  " \-d"
man bash | grep  " -d"
man bash | grep -- "-d"
man bash | grep -- " -d"
man bash | grep -- "-d" |wc
man bash | grep -- " -d" |wc 
```

后两种形式分别输出`43 300 2611`和`12 118 855`。which 标记选项结束对于`--`第四个和第六个项目不是必需的，其中模式以空格而不是破折号开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T16:04:24.573

> 男子重击 | grep "-d"

如果您正在搜索字符串“-d”

它给了我回应

但在这里

> 男子重击 | grep“-d”

您正在搜索字符串“-d”（注意 -d 之前的空格）。可能是“man bash”没有这样的字符串

但它给了我回应（我无法发布截图）

# javascript - 将 JS 应用程序部署到 Windows 8 获取 resources.pri 访问被拒绝错误

> ID：13198663
> 
> 赞同：2
> 
> 时间：2012-11-02T15:48:38.277
> 
> 标签：javascript, windows-8, visual-studio-2012

我正在尝试运行我的应用程序，但突然出现此错误。我不知道为什么。我没有改变任何东西。

**错误 3 错误：DEP0500：无法删除文件夹“C:\Users\Shane\Documents\Visual Studio 2012\Projects\App2\App2\bin\Debug\AppX”。拒绝访问路径“resources.pri”，**

我以管理员身份运行 VS2012，并从调试目录中删除了所有内容。我找不到有关如何摆脱此错误的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:14:09.977

看起来这是 Parallels 的一个错误。如果你杀死 prl_cc.exe 文件应该被解锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:37:32.333

您确定您的应用程序的所有实例（包括模拟器中的实例）都已终止吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T21:45:48.837

如果您在 Mac 上使用 Windows 和 Parallels，这似乎是一个已知问题，这里有一个解决方法：

[http://forum.parallels.com/showthread.php?267785-Parallels-Control-Center-is-incorrectly-locking-my-pri-files](http://forum.parallels.com/showthread.php?267785-Parallels-Control-Center-is-incorrectly-locking-my-pri-files)

# android - 有什么方法可以在您的网络上发现 Android 设备？

> ID：13198669
> 
> 赞同：61
> 
> 时间：2012-11-02T15:49:00.607
> 
> 标签：android, discovery, service-discovery

我希望能够在我的网络上发现 Android 设备，并可能检索一些关于它们的设备信息。这对于 Apple 设备来说非常容易，因为它们运行 Bonjour 服务。但是，我似乎找不到在 Android 上运行的任何类似服务。

这必须在不修改 Android 设备、安装某些服务或打开某些端口的情况下工作。它旨在以 Bonjour 帮助您找到普通 Apple 设备的方式与普通 Android 设备一起使用。即使能够验证设备是否运行 Android 就足够了。

* * *

**选择的答案**：虽然它不是最高评价的答案（还），但请看一下 Luis 的回复。正如他所提到的，您可以使用 DNS 查找（使用本地 DNS 服务器）来发现 Android 设备。我发现这有 100% 的成功率，因为​​ Android 强制设备使用主机名 android- ***_* ____**。这显然很难在手机上更改，即使它已植根。所以我认为这是一个非常准确的方法。谢谢，路易斯！

```
Example:
$ nslookup 192.168.1.104 192.168.1.1
Server:     192.168.1.1
Address:    192.168.1.1#53

104.1.168.192.in-addr.arpa  name = android-711c129e251f14cf.\001. 
```

* * *

**示例代码：**如果您想在 Java 中实现它（例如，在 Android 上运行），您不能轻易使用 getHostName()，因为它使用外部 DNS 服务器。例如，您想使用路由器上的本地 DNS 服务器。Luis 在下面提到，您可以修改 Wifi 连接的 DNS 服务器，但这可能会破坏其他事情。相反，我发现该`dnsjava`库对于发送有针对性的 DNS 请求非常有帮助。以下是使用该库的一些示例代码：

```
 String ipAddress = "104.1.168.192";
        String dnsblDomain = "in-addr.arpa";
        Record[] records;
        Lookup lookup = new Lookup(ipAddress + "." + dnsblDomain, Type.PTR);
        SimpleResolver resolver = new SimpleResolver();
        resolver.setAddress(InetAddress.getByName("192.168.1.1"));
        lookup.setResolver(resolver);
        records = lookup.run();

        if(lookup.getResult() == Lookup.SUCCESSFUL) {
              for (int i = 0; i < records.length; i++) {
                if(records[i] instanceof PTRRecord) {
                  PTRRecord ptr = (PTRRecord) records[i];
                  System.out.println("DNS Record: " + records[0].rdataToString());
                }
              }
        } else {
            System.out.println("Failed lookup");
        }

    } catch(Exception e) { 
        System.out.println("Exception: " + e);
    } 
```

这给了我输出：

```
DNS Record: android-711c129e251f14cf.\001. 
```

答对了。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-23T21:43:21.843

有一种非常简单的方法可以在几种不同的设备上给我带来积极的结果。

当设备连接到您的路由器时，它会收到一个 IP（即 DHCP）并在 DNS 中注册一个名称。注册的名称似乎总是以`android_nnnnnnnn`.

当然，您可以使用相同的方法命名任何计算机并欺骗检查，从而导致误报......

此外，我无法确保所有设备供应商都遵循相同的方法，但我发现它可以在我测试过的不同品牌（包括不同 SDK 级别）的一些设备中正常工作。

--已编辑--

**怎么做**

这取决于您将在何处运行代码以发现 Android 设备。假设您将在 Android 设备中运行代码：

1.  `ping`首先发现在您的网络中响应的设备。您可以使用我对这篇文章的回答中的代码：[execComd()](https://stackoverflow.com/questions/13534419/check-to-see-whether-root-was-granted/13535315#13535315)来运行 ping 命令。

2.  使用代码获取响应设备的名称：

    InetAddress inetAddress = InetAddress.getByName(string_with_ip_addr);

    字符串名称 = inetAddress.getCanonicalHostName();

--编辑2--

**概念证明**

下面的方法只是我上面写的概念的证明。

我正在使用`isReachable()`方法来生成 ICMP 请求，据说在许多帖子中它只适用于有根设备，用于测试它的设备就是这种情况。但是，我没有为运行此代码的应用程序授予 root 权限，因此我认为它无法设置 SIUD 位，这就是为什么有人声称此方法失败的原因。我想从有人在非根设备上测试它的角度来做这件事。

调用使用：

```
ArrayList<String> hosts = scanSubNet("192.168.1."); 
```

它在 中返回`hosts`响应 ping 请求的设备的名称列表。

```
private ArrayList<String> scanSubNet(String subnet){
    ArrayList<String> hosts = new ArrayList<String>();

    InetAddress inetAddress = null;
    for(int i=1; i<10; i++){
        Log.d(TAG, "Trying: " + subnet + String.valueOf(i));
        try {
            inetAddress = InetAddress.getByName(subnet + String.valueOf(i));
            if(inetAddress.isReachable(1000)){
                hosts.add(inetAddress.getHostName());
                Log.d(TAG, inetAddress.getHostName());
            }
        } catch (UnknownHostException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    return hosts;
} 
```

问候。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-21T17:36:56.107

Android 不会像 iOS 那样简单。没有 Bonjour 等价物。

Android 4.0 Ice Cream Sandwich 引入了[Wi-Fi Direct](http://developer.android.com/guide/topics/connectivity/wifip2p.html) Peer to Peer 网络。起初我希望它可以按照你的想法进行扫描，但它可以帮助 Android 设备在没有接入点的情况下进行通信，因此它们并不是真正“在你的网络上”。此外，ICS 仅在一小部分 Android 设备上运行。

与主动 netscan 方法不同，您将获得被动监控方法。如果您的网络是安全的，则可以嗅探加密数据包，但不方便。你必须

*   将您的网络接口置于[监控模式](http://en.wikipedia.org/wiki/Monitor_mode)
*   捕捉[四次握手](http://en.wikipedia.org/wiki/IEEE_802.11i-2004#The_Four-Way_Handshake)
*   使用网络的预共享密钥对其进行解密
*   这将为您提供解密流量所需的密钥

如果您想看到这一点，[Wireshark](http://wiki.wireshark.org/)支持[WPA 解密](http://wiki.wireshark.org/HowToDecrypt802.11)。

一旦您能够查看 Wi-Fi 流量，您会注意到 Android 设备倾向于与某些 Google 服务器进行通信，并且它们的 HTTP 连接具有[可以识别的用户代理字符串](http://www.useragentstring.com/pages/Android%20Webkit%20Browser/)。这是可行的被动解决方案的基础。

[Tenable Network Security](http://www.tenable.com/solutions/mobile-device-security)提供的产品似乎采用了这种方法。

## 另一个想法

@Michelle Cannon 提到了 Libelium 的 Meshlium Xtreme，它的方法不会让你一路走好（如果没有最新的 MAC 地址范围表的话）。但这可能是实现较小目标的一部分。你可以：

*   检测所有无线设备
*   使用 MAC 的组织唯一标识符 (OUI) 消除 Apple 设备
*   通过监控信号强度来判断它是移动设备，从而判断它是移动设备（移动设备往往会出现并消失）
*   您也许可以使用 MAC OUI 作为 Android 的提示
*   您可以使用 MAC OUI 作为提示，它不是 Android（而是笔记本电脑或无线网卡等）。

如果您愿意检测*可能是*Android 的设备，这可能是可行的。

# DHCP 指纹识别

@Michelle Cannon 建议使用 DHCP 指纹。一开始我并不确定，但我必须感谢他提出了简单被动扫描的最佳选择。作为一个警示性的尾巴，我想解释一下我为什么迟到了。

## 有些事情我们知道，认为我们不知道，有些事情我们认为我们知道但错了。

在很多方面，Android 使用 Linux 内核是件好事。但是，如果您想在网络上发现 Android 设备，那就不好了。Android 的 TCP/IP 堆栈是 Linux 的，因此 Android 设备看起来像 Linux 设备，或者我一开始是这么想的。但后来我意识到 Linux 有*很多*构建配置参数，所以当在网络上看到 Android 时可能会有一些与众不同的东西，但是什么？

DHCP 指纹识别使用设备请求的确切 DHCP 选项加上时间。为此，您通常需要一个最新的指纹数据库进行匹配。起初，[fingerbank 似乎](http://www.fingerbank.org/)在寻找这些数据，但后来我注意到他们的文件已经将近一年没有更新了。对于所有不同的 Android 设备类型，我认为为单个项目保留更新的指纹是不切实际的。

但后来我查看了 Android 的实际 DHCP 签名，我注意到了这一点：

```
Android 1.0:     dhcpvendorcode=dhcpcd 4.0.0-beta9
Android 1.5-2.1: dhcpvendorcode=dhcpcd 4.0.1
Android 2.2:     dhcpvendorcode=dhcpcd 4.0.15
Android 3.0:     dhcpvendorcode=dhcpcd-5.2.10 
```

Linux 通常使用 dhclient 作为其 DHCP 客户端，但 Android 使用的是 dhcpcd。Android 强烈倾向于尽可能使用以 BSD 风格许可的软件，而 dhcpcd 使用 BSD 许可。似乎 dhcpvendorcode 可以用作移动设备运行 Android 的有力指标。

## DHCP 监控

客户端在加入网络时使用 DHCP 获取 IP 地址，因此它在没有 IP 地址的情况下启动。它通过使用 UDP 广播进行初始交换来解决这个问题。在 Wi-Fi 上，即使使用 WPA，广播流量也不会加密。因此，您可以只在 UDP 端口 67 上侦听客户端到服务器的流量，而在 68 端口上侦听反向。您甚至不需要将网络接口置于混杂模式。您可以使用 Wireshark 等协议分析器轻松监控此流量。

我更喜欢编写代码来监控流量并决定使用 Python。我选择了 pydhcplib 来处理 DHCP 的细节。我对这个库的体验并不顺利。我需要手动下载并放置 IN.py 和 TYPES.py 支持文件。他们的数据包到字符串的转换将 dhcpvendorcode 留空。它确实正确解析了 DHCP 数据包，所以我只是编写了自己的打印代码。

下面是监控从客户端到服务器的 DHCP 流量的代码：

```
#!/usr/bin/python
from pydhcplib.dhcp_packet import *
from pydhcplib.dhcp_network import *
from pydhcplib.dhcp_constants import *

netopt = {
    'client_listen_port':"68",
    'server_listen_port':"67",
    'listen_address':"0.0.0.0"
}

class Server(DhcpServer):
    def __init__(self, options):
        DhcpServer.__init__(
            self,options["listen_address"],
            options["client_listen_port"],
            options["server_listen_port"])

    def PrintOptions(self, packet, options=['vendor_class', 'host_name', 'chaddr']):

        # uncomment next line to print full details
        # print packet.str()

        for option in options:
            # chaddr is not really and option, it's in the fixed header
            if option == 'chaddr':
                begin = DhcpFields[option][0]
                end = begin+6
                opdata = packet.packet_data[begin:end]
                hex = ['0','1','2','3','4','5','6','7','8','9','a','b','c','d','e','f']
                print option+':', ':'.join([(hex[i/16]+hex[i%16]) for i in opdata])
            else:
                opdata = packet.options_data.get(option)
                if opdata:
                    print option+':', ''.join([chr(i) for i in opdata if i != 0])
        print

    def HandleDhcpDiscover(self, packet):
        print "DHCP DISCOVER"
        self.PrintOptions(packet)
    def HandleDhcpRequest(self, packet):
        print "DHCP REQUEST"
        self.PrintOptions(packet)

    ##  def HandleDhcpDecline(self, packet):
    ##      self.PrintOptions(packet)
    ##  def HandleDhcpRelease(self, packet):
    ##      self.PrintOptions(packet)
    ##  def HandleDhcpInform(self, packet):
    ##      self.PrintOptions(packet)

server = Server(netopt)

while True :
    server.GetNextDhcpPacket() 
```

此代码基于 pydhcplib 的服务器示例，因为它像服务器一样侦听客户端请求。

当我的 Nexus 7 Android 4.2 平板电脑连接时，这个有趣的信息被捕获（编辑）：

```
DHCP REQUEST
vendor_class: dhcpcd-5.5.6
host_name: android-5c1b97cdffffffff
chaddr: 10:bf:48:ff:ff:ff

DHCP DISCOVER
vendor_class: dhcpcd-5.5.6
host_name: android-5c1b97cdffffffff
chaddr: 10:bf:48:ff:ff:ff 
```

主机名似乎具有固定的格式并且易于解析。如果您需要 IP 地址，您可以监控服务器到客户端的流量。注意：只有初始交换，即新客户端首次出现而没有 IP 地址时，才会被广播。不广播未来的租约延期等。

## [反向 DNS 查找](http://en.wikipedia.org/wiki/Reverse_DNS_lookup)

@Luis 发布了一个很棒的解决方案，它展示了越简单越好。即使在看到 Android 的 DHCP 客户端将 host_name 设置为 android-5c1b97cdffffffff 之后，我也不认为使用反向 DNS 查找向路由器询问它的名称列表。路由器将 host_name 添加到它的 DNS 服务器，因此如果设备的 IP 地址发生变化，您仍然可以访问设备。

在 DHCP 租用期间，host_name 预计将在 DNS 中保持列出。[您可以通过ping](http://en.wikipedia.org/wiki/Ping_(networking_utility))来检查设备是否仍然存在。

依赖 host_name 的一个缺点是可以通过多种方式进行更改。设备制造商或运营商很容易更改主机名（尽管经过搜索，我无法找到他们曾经拥有的任何证据）。有一些[应用程序可以更改主机名](https://play.google.com/store/apps/details?id=com.ramdroid.changehostname&hl=en)，但它们需要 root，所以这最多是一个边缘情况。

最后还有一个开放的[Android 问题 6111：允许指定](http://code.google.com/p/android/issues/detail?id=6111)当前有 629 颗星的主机名。在将来的某个时候，也许很快，在 Android 设置中看到可配置的 host_name 也就不足为奇了。因此，如果您开始依赖 host_name 来识别 Android 设备，请意识到它可能会从您下面被拉出来。

如果您正在进行实时跟踪，反向 DNS 查找的另一个潜在问题是您必须决定扫描的频率。（当然，如果您只是拍摄一次性快照，这不是问题。）频繁扫描会消耗网络资源，不频繁扫描会给您留下陈旧的数据。以下是添加 DHCP 监控的帮助：

*   启动时使用反向 DNS 查找查找设备
*   ping 设备以查看它们是否仍处于活动状态
*   监控 DHCP 流量以立即检测新设备
*   偶尔重新运行 DNS 查找以查找您可能错过的设备
*   如果您需要注意设备离开，请以所需的时间分辨率 ping 设备

虽然这并不容易（也不是 100% 准确），但有几种技术*可以*在您的网络上发现 Android 设备。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-18T04:49:34.567

AFAIK，Android 系统在其内置系统应用程序/服务堆栈上不提供任何[zeroconf应用程序/服务。](http://en.wikipedia.org/wiki/Zero_configuration_networking)要在连接到本地网络的实际设备上启用自动发现，您需要安装一些第三方 zeroconf 应用程序或开发自己的应用程序/服务并将其安装在实际设备上，一些 API 选项是：

*   [JmDNS](http://jmdns.sourceforge.net/)（用于 Apple 的 bonjour 协议）
*   [Cling](http://4thline.org/projects/cling/)（用于 Microsoft 的 UPnP 协议）
*   [Android NSD API](http://developer.android.com/training/connect-devices-wirelessly/nsd.html)（自 Android 4.1 起引入）

我不太清楚您的要求，如果您想要在普通 Android 设备上进行类似的操作（即自动发现和连接），您可能可以使用[Wi-Fi direct](http://developer.android.com/guide/topics/connectivity/wifip2p.html)，它现在可以在运行 Android 4.0 的某些更高版本的设备上使用，但是，它需要这两款设备都支持 Wi-Fi Direct，并且仅在关闭 Wi-Fi 的情况下创建临时 P2P 连接，就像具有更长范围的蓝牙连接一样：

![在此处输入图像描述](../Images/2b57b7ded94625971700eb5617bff480.png)

有关 Wi-Fi Direct API 支持，请查看官方指南 -[无线连接设备](http://developer.android.com/training/connect-devices-wirelessly/index.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-21T20:20:48.467

我在看这个想法

[http://www.libelium.com/smartphones_iphone_android_detection](http://www.libelium.com/smartphones_iphone_android_detection)

特别注意这一点

用户是否需要安装特定的应用程序或以某种方式进行交互才能被检测到？

不，扫描是静默进行的，Meshlium 只检测智能手机中集成的 Wifi 和蓝牙无线电发起的“信标帧”。用户只需打开两个无线接口中的至少一个即可。

很久以前，我在我的mac上使用一个叫做stumbler的应用程序来查找wifi网络，我认为这是相似的

其他想法

好吧，如果我需要确定本地网络上的安卓手机，我会怎么做。如果没有运行 dns 服务，我只有几种可能

如果 SSID 正在广播 - 什么都不能告诉我 IP 地址 - android 让您对主机命名有很多控制，所以我想您可以为您的 android 设备定义一个特定的 IP 范围。- 没用。

或者说我在网络上看到了一个未知设备，如果打开了蓝牙，那么我正在广播一个蓝牙设备签名 SDPP，我可以用它来推断我的设备类型。

如果我正在运行一个支持 android 的服务并且我想在我的网络上发现特定的 android 设备，那么我可以只为这些设备注册 mac 地址并在网络上监视它们。

除此之外，您需要在设备上运行 bonjour (dns-sd) 或 upnpp dameon。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-22T00:09:04.860

我从这个话题中学到了很多东西。

还有一种叫做 dhcp 指纹识别的东西，显然不同的设备与我们一直在讨论的那种网络扫描的行为不同，例如那些使用 NMAP 的 linux 扫描仪。这些探测器的行为地图可在互联网上获得。

[http://www.enterasys.com/company/literature/device-profiling-sab.pdf](http://www.enterasys.com/company/literature/device-profiling-sab.pdf)

[https://media.defcon.org/dc-19/presentations/Bilodeau/DEFCON-19-Bilodeau-FingerBank.pdf](https://media.defcon.org/dc-19/presentations/Bilodeau/DEFCON-19-Bilodeau-FingerBank.pdf)

[http://community.arubanetworks.com/t5/ArubaOS-and-Mobility-Controllers/COTD-DHCP-Fingerprinting-how-to-ArubaOS-6-0-1-0-and-above/td-p/11164](http://community.arubanetworks.com/t5/ArubaOS-and-Mobility-Controllers/COTD-DHCP-Fingerprinting-how-to-ArubaOS-6-0-1-0-and-above/td-p/11164)

[http://myweb.cableone.net/xnih/](http://myweb.cableone.net/xnih/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-18T16:14:45.443

**更新的回应**

抱歉，我没有正确理解原始问题。只有您的评论让我非常清楚，您不想在目标设备上安装*任何东西*，而只是想要一种在网络中发现随机电话的方法。

我不确定这是否真的可以按照您想要的方式进行。如果没有在 Android 上运行的任何网络发现服务，您将不会首先找到该设备。当然，您可以使用一些低级网络协议，但这只会让您知道存在某些东西，而不是它是什么（作为 Android 设备、PC 或其他任何东西）。

最有希望的方法是检查具有某种网络功能的预安装应用程序。例如，三星设备有 Kies Air（如果用户启用它），摩托罗拉正在使用 UPnP 作为他们的媒体服务器，如果我没记错的话，HTC 也有自己的东西。但是，所有供应商和运营商的所有 Android 设备上都没有安装任何应用程序。因此，您不能仅依赖其中之一，而是需要使用其特定协议和行为检查各种不同的服务，以获得有关设备的更多信息。而且，当然，用户必须启用该功能才能使用它。

**旧回应**

yorkw 列表的另一个替代品是高通公司的[AllJoyn](https://www.alljoyn.org/)。这是一个开源的跨平台发现和点对点通信框架，我自己过去已经使用过。

尽管 Qualcomm 是 AllJoyn 的主要赞助商，但这并不意味着您需要在定义中使用 Qualcomm 芯片组。事实上，AllJoyn 适用于任何芯片组，包括 Intel 和 nVidia。它不需要根植手机或对 Android 框架进行任何其他修改，只需使用 Wi-Fi 和/或蓝牙作为配对方法“开箱即用”即可。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-12-01T17:53:40.977

这是一个 ping 网络上的所有机器（假设您的网络是`192.168.1.x`）并对其名称进行反向查找的单行程序：

```
for i in {1..255}; do echo ping -t 4 192.168.1.${i} ; done | parallel -j 0 --no-notice 2> /dev/null | awk '/ttl/ { print $4 }' | sort | uniq | sed 's/://' | xargs -n 1 host 
```

需要 GNU 并行工作。您可以使用“brew install parallel”在 OSX 上安装它

从这里您可以查看命名的设备`android-c40a2b8027d663dd.home.`或其他任何内容。

然后，您可以尝试在设备上运行 nmap -O 以查看您还能发现什么：

```
sudo nmap -O android-297e7f9fccaa5b5f.home. 
```

但这并没有那么富有成效。

# svn - 在连接到 svn 存储库之前，我们可以在 jenkins 中使用隧道吗？

> ID：13198671
> 
> 赞同：0
> 
> 时间：2012-11-02T15:49:20.377
> 
> 标签：svn, jenkins

在访问我的`SVN`存储库之前，我需要创建一个`tunnel`这样的第一个：

```
ssh -L 9898:some_server.com:9898 user@another_server.com 
```

之后，我可以在`9898`我的`localhost`. 在创建 Jenkins 作业时，我可以提供 SVN url 作为`localhost`，并且 Jenkins 能够访问 repo，但我仍然需要在服务器上手动创建一个隧道。有什么方法可以让詹金斯自动化，这样如果对隧道的访问失败，那么它可以做隧道，然后再试一次？

我在用`Jenkins 1.487`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:19:39.133

当您使用脚本启动隧道并且 Jenkins 作业结束时，您的隧道是否在服务器上保持打开状态？

如果是这样，并且需要 SVN 轮询，我可以想到 2 个可能的解决方案：

1.  创建一个单独的作业，其唯一目的是运行上面的脚本。安排它每 2-3 分钟运行一次（或任何你在隧道上通常的超时时间）。这样，希望您的服务器将始终打开隧道。

2.  在您的原始工作中，使用此插件的条件构建后步骤：
    [https](https://wiki.jenkins-ci.org/display/JENKINS/Post+build+task)
    : //wiki.jenkins-ci.org/display/JENKINS/Post+build+task 解析 SVN 检出失败的日志，如果找到：
    2.1 运行您建立隧道的脚本
    2.2 使用 curl
    2.3 重新启动您的工作 您可以选择使用 text-finder 插件将此类构建标记为“不稳定”而不是失败
    [https://wiki.jenkins-ci.org/display/JENKINS/Text -finder+插件](https://wiki.jenkins-ci.org/display/JENKINS/Text-finder+Plugin)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T14:22:34.947

你需要一个像[pre-scm-buildstep这样的插件](https://wiki.jenkins-ci.org/display/JENKINS/pre-scm-buildstep)

这允许您在 SVN 签出之前执行构建步骤。
使用它，您可以配置一个步骤，在 SVN 结帐开始之前为您打开隧道。

但是，我怀疑 SVN 轮询在这种情况下是否有效。

**更新：** 在 OP 问题之后，这是另一种可能的解决方案：
[https](https://wiki.jenkins-ci.org/display/JENKINS/ScriptTrigger+Plugin)
://wiki.jenkins-ci.org/display/JENKINS/ScriptTrigger+Plugin 我自己没有使用它，但它允许执行自定义 shell 脚本而不是定期投票。您可以使用此自定义脚本先建立隧道，然后轮询 SVN 更改。但是，您必须编写自己的脚本来进行实际的 SVN 投票。就像检查工作区修订 ( `svn info <LocalCheckOut>|grep Revision`) 并根据存储库 ( `svn info <URL>|grep Revision`) 检查它一样简单。该插件将允许您以 cron 格式安排轮询频率。

另一种懒惰的做法是使用这个插件，建立隧道，进行 SVN 更新（无论是否有变化），然后让工作构建它。然后，您可以在真正的构建步骤之前进行常规**构建操作**，以检测是否实际上有新的结帐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:55:07.473

`Slav`我添加了上述答案中指定的插件，并在部分中编写了以下脚本`Run buildstep before SCM runs`：

```
instance_count=`ps x | grep -c 'ssh -L 9898:some_server.com:9898 user@another_server.com'`
if test $instance_count -lt 2 #two instances mean that one is of grep and other is the tunnel
then
    ssh -L 9898:some_server.com:9898 -t -t user@another_server.com&
fi 
```

有了这个，每当我点击' `Build now`'时，首先创建隧道，更新签入并完成构建。但是，不幸的是，在这种情况下轮询不起作用

# mysql - Zend_Date 和 Cronjob 的怪异行为

> ID：13198674
> 
> 赞同：1
> 
> 时间：2012-11-02T15:49:35.137
> 
> 标签：mysql, zend-framework, date, datetime

我们有一个 Cron 脚本，它可以检测 - 如果某些用户被踢出我们的应用程序。如果特定值为 1，我们可以检测到这一点 - 但在流中，没有设置新条目。脚本每小时运行一次。大多数未检测到。但自 2012-10-31 23:59:03 以来，每个用户都被检测到。如果我在本地机器上运行脚本，甚至在 cron 运行的同一台机器上运行脚本。一切都得到了应有的处理。首先，我们的脚本：

```
require_once ('cron_init.php');
ini_set('date.timezone', 'Europe/Berlin');
ini_set('max_execution_time', 30);
ini_set('memory_limit', -1);
error_reporting(E_ALL);
ini_set("display_errors", 1);

Zend_Date::setOptions(array('fix_dst' => true));

    $userinfos = new Repricing_Dbservices_Userinfos();
    $users = $userinfos->getUsersForRepricing();

    $repricingstream = new Repricing_Dbservices_Repricingstream();
    $error = new Repricing_Dbservices_Error();

if($users!==false AND count($users)>0){

    $counter = 0;
    $errCounter = 0;
    $jetzt = new Zend_Date();
    $jetzt->setTimezone('Europe/Berlin');
    $jetzt = $jetzt->get(Zend_Date::TIMESTAMP);

    foreach($users as $user){
        $stream = $repricingstream->getStreamLimit($user);

        $last = new Zend_Date($stream);
        $last->setTimezone('Europe/Berlin');
        $last = $last->get(Zend_Date::TIMESTAMP);

        $diff = (($jetzt-$last)/60);

        $error->setError(1, 'DIED', $diff, $user);

        if($diff > 50 ){
            $errCounter++;
            $userinfos->setUserFree($user);
            $error->setError(1, 'DIED', 'ANSTOSSEN', $user);
        }

        $counter++;
    }
    $error->setError(1, $errCounter, 'ANSTOSSEN_ALL', 'ALL');
} 
```

通常`$diff >= 0 AND $diff <= 4`，但是，我们发现，它`$diff`总是大约`381595`. 如果我们将它从 cron`$diff`中运行出来，那么它应该是这样的。我们还发现，`$jetzt`现在（应该如此）只是`$last`晚得多。`381595`之后。但那不应该。最后的流日期是完全正常的。我们无法理解这种行为。Zend_Date 与 cron。Bevor`2012-10-21 23:59:03`脚本运行 2 周，因为它应该。我们无法解释，怎么会。你能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:14:11.973

考虑一下：

```
$right = new Zend_Date('2012-11-01 12:12:12', Zend_Date::ISO_8601);
var_dump( $right->getIso() );        // 2012-11-01T12:12:12+00:00
var_dump( $right->getTimestamp() );  // 1351771932

$wrong = new Zend_Date('2012-11-01 12:12:12', null, 'en_US');
var_dump( $wrong->getIso() );        // 2012-01-11T12:12:12+00:00
var_dump( $wrong->getTimestamp() );  // 1326283932 
```

现在是真正的怪异部分：在我的 PC 上，这是默认的第二个行为 - 即，当 Zend_Date 构造函数没有额外的参数时。

关键是，Zend_Date 有点……在尝试解析日期时间字符串时太有帮助了。例如，它考虑了语言环境 - 但服务器和客户端的语言环境！如果无法在此语言环境的规则中解析字符串，它会*默默地*放弃 - 并尝试使用另一个规则。

这就是为什么`2012-10-29`被解析为`October, 29`（*尽管*语言环境建议，因为没有第 29 个月） - 但`2012-11-01`变成`January, 11`- 并且把你的脚本搞砸了。)

# objective-c - 如何在日历条目视图上着色按钮 (EKEventEditViewController)

> ID：13198680
> 
> 赞同：0
> 
> 时间：2012-11-02T15:49:57.143
> 
> 标签：objective-c, ios, uibutton, eventkit

我正在尝试以下方法来更改默认 EventKitUI -“添加事件”日历条目表上**的完成/取消按钮的色调。**

![日历条目表](../Images/139780a371259d31762602337f0d2dd1.png)

```
EKEventEditViewController *eventController = [[EKEventEditViewController alloc]init];    
eventController.editViewDelegate = self;

[[[eventController navigationItem]cancelButton]setTintColor:[UIColor blueColor]]; 
```

但是按钮仍然保持从前一个导航栏继承的颜色，如上图所示（奇怪的是，工作表没有从前一个导航栏接管导航栏的色调，这也是灰色的）。

如何访问和更改此视图上的按钮色调？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:51:38.213

我能够像这样更改导航栏的色调。

```
eventController.navigationBar.tintColor = [UIColor greyColor]; 
```

# c++ - 从 CPP 文件中的 C 文件访问变量

> ID：13198689
> 
> 赞同：1
> 
> 时间：2012-11-02T15:50:13.213
> 
> 标签：c++, c

我有一个程序，我被迫将一些 C 和 C++ 代码融合在一起。我在 C 中定义了一些全局变量，我需要在 C 和 C++ 文件中访问它们，但无法弄清楚。这是我所拥有的，它适用于 C 文件，但不适用于 CPP：

通道

```
#ifdef __cplusplus
extern "C" {
#endif

#ifndef _COMMON_H_
#define _COMMON_H_

extern char test[100];

#ifdef __cplusplus
}
#endif 
```

抄送

```
#include <windows.h>
#include <stdio.h>
#include "C.h"

char test[100] = "value"; 
```

CPlusPlus.cpp

```
#include "C.h"

int TestFunction() {
    // I need to access variable test here
} 
```

谢谢，本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T15:53:34.360

> > 假设问题是“我如何在`test`这里访问变量？”</p>

像这样：

```
#include "C.h"
#include <cstring>
int TestFunction() {
  return strcmp(test, "volvo");
} 
```

# sphinx - 运行两个 searchd 实例的问题

> ID：13198690
> 
> 赞同：3
> 
> 时间：2012-11-02T15:50:15.587
> 
> 标签：sphinx, ubuntu-10.04

我刚刚将我们的 Sphinx 服务器从 1.10-beta 更新到 2.0.6-release，现在我遇到了一些`searchd`. 以前我们可以`searchd`通过指定两个不同的配置文件来运行两个相邻的实例，即：

```
searchd --config /etc/sphinx/sphinx.conf
searchd --config /etc/sphinx/sphinx.staging.conf 
```

sphinx.conf 监听`9306:mysql41`, 和`9312`, 而 sphinx.staging.conf 监听`9307:mysql41`和`9313`。

然而，在我们更新到 2.0.6 之后，第二个实例永远不会启动。或者更确切地说.. 输出使它看起来像是开始了，并且创建了一个 pid 文件等。但由于某种原因，只有第一个 searchd 实例继续运行，第二个似乎立即关闭。因此，当尝试运行`searchd --config /etc/sphinx/sphinx.conf`两次（如果这是第一个启动的）抱怨 pid 文件正在使用中，尝试运行`searchd --config /etc/sphinx/sphinx.staging.conf`（如果这是第二个启动的实例）一次又一次地“启动”守护进程，只有没有新进程已创建.. 请注意，如果我在第一次创建进程时切换这些命令，那么`sphinx.conf`实例并没有真正启动。

我已经检查并重新检查了这些端口仅由`searchd`.

有人知道我接下来可以做什么/尝试吗？我已经在 ubuntu 10.04 LTS 上从源代码安装了它：

```
./configure --prefix /etc/sphinx --with-mysql --enable-id64 --with-libstemmer
make -j4 install 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T16:35:06.727

自我注意：**检查日志！**

RT 索引使用二进制日志来启用崩溃恢复。由于我的旧配置文件没有指定存储这些文件的路径，因此两个实例都`searchd`尝试写入相同的二进制日志。最后启动的实例当然不允许操作这些文件，因此以致命错误退出：

```
[Fri Nov  2 17:13:32.262 2012] [ 5346] FATAL: failed to lock
    '/etc/sphinx/var/data/binlog.lock': 11 'Resource temporarily unavailable'
[Fri Nov  2 17:13:32.264 2012] [ 5345] Child process 5346 has been finished, 
    exit code 1\. Watchdog finishes also. Good bye! 
```

解决方案很简单，确保在每个配置文件`binlog_path`的`searchd`配置部分中指定一个：

```
searchd
{
[...]
   binlog_path = /path/to/writable/directory
[...]
} 
```

# java - 泽西岛，JAXB 并获取一个扩展抽象类作为参数的对象

> ID：13198695
> 
> 赞同：4
> 
> 时间：2012-11-02T15:50:54.687
> 
> 标签：java, rest, service, jaxb, jersey

我想获取一个对象作为 POST 请求的参数。我有一个抽象超类，它被称为`Promotion`子类`Product`和`Percent`. 这是我尝试获取请求的方式：

```
@POST
@Consumes(MediaType.APPLICATION_XML)
@Produces(MediaType.APPLICATION_XML)
@Path("promotion/")
public Promotion createPromotion(Promotion promotion) {         
    Product p = (Product) promotion;
    System.out.println(p.getPriceAfter());      

    return promotion;
} 
```

以下是我在类定义中使用 JAXB 的方式：

```
@XmlRootElement(name="promotion")
@XmlSeeAlso({Product.class,Percent.class})
public abstract class Promotion {
    //body
}

@XmlRootElement(name="promotion")
public class Product extends Promotion {
    //body
}

@XmlRootElement(name="promotion")
public class Percent extends Promotion {
    //body
} 
```

所以现在的问题是当我发送一个带有这样的正文的 POST 请求时：

```
<promotion>
  <priceBefore>34.5</priceBefore>
  <marked>false</marked>
  <distance>44</distance>
</promotion> 
```

我尝试将其转换为 Product（在这种情况下，字段“标记”和“距离”来自 Promotion 类，“priceBefore”来自 Product 类）我得到一个例外：

```
java.lang.ClassCastException: Percent cannot be cast to Product. 
```

似乎`Percent`被选为“默认”子类。为什么会这样，我怎样才能得到一个对象`Product`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:51:03.807

由于您拥有具有相同根元素的整个继承层次结构，因此您需要利用该`xsi:type`属性来指定适当的子类型。

```
<promotion  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="product">
  <priceBefore>34.5</priceBefore>
  <marked>false</marked>
  <distance>44</distance>
</promotion> 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-using-xsitype.html](http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-using-xsitype.html)

* * *

**更新**

另一件要尝试的事情是给每个子类型一个不同的`@XmlRootElement`

```
@XmlRootElement // defaults to "product"
public class Product extends Promotion {
    //body
} 
```

然后发送以下 XML：

```
<product>
  <priceBefore>34.5</priceBefore>
  <marked>false</marked>
  <distance>44</distance>
</product> 
```

# javascript - jQuery 功能荧光笔插件

> ID：13198698
> 
> 赞同：1
> 
> 时间：2012-11-02T15:51:07.183
> 
> 标签：javascript, jquery, highlight

我正在寻找类似于[jQuery Highlighter](http://blog.dreamcss.com/jquery-plugin/jquery-highlighter-easy-to-use-jquery-plugin-to-highlight-any-part-of-site/)的东西。

他们建议不要在生产中使用它，因为它仍处于 alpha 阶段，所以我想知道你们是否有任何其他替代品，你们使用过并且喜欢。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:59:30.930

这里有几个例子：

[drawium.com](http://drawium.com/)现在对 beta 用户是免费的，所以现在不付费使用它还为时不晚。
而且[jQuery Joyride](http://www.zurb.com/playground/jquery_joyride_feature_tour_plugin)是在 MIT 许可下的，不用着急。:)

# python - UDP 服务器帧间隙

> ID：13198700
> 
> 赞同：2
> 
> 时间：2012-11-02T15:51:14.500
> 
> 标签：python, sockets, udp, schedule

我是 python 新手，并试图在这里获得一些帮助。我编写了一个代码来通过套接字传输 UDP 数据。我想每 50 微秒循环重新传输一次数据，但我只能每 3 秒发送一次！我确定我做错了什么，你能帮帮我吗？我已经粘贴了下面的代码：

```
import socket,codecs,binascii,re ,sched, time

UDP_IP = "XXX.XXX.XXX.XXX"

UDP_PORT = 30001
MESSAGE =  '\x00\x01\x02\x03\x04\x05\x06\x07\x08\t\n\x0b\x0c\r\x0e\x0f\x10\
x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f\x20'# !"#$%' #"\x00\x01\x02 "

s = sched.scheduler(time.time, time.sleep)    

def send_data(sc):

    sock = socket.socket(socket.AF_INET, # Internet

                     socket.SOCK_DGRAM) # UDP

    sock.sendto(MESSAGE, (UDP_IP, UDP_PORT))

    print""
    print""
    print""
    print""
    print""    
    sc.enter(0.000050, 1, send_data, (sc,)) 
    print time.time()
    print""
    print""

s.enter(0.0000050, 1, send_data, (s,))    
s.run() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:30:33.063

首先，每次发送数据时都创建一个新套接字会产生相当多的开销。一遍又一遍地安排新任务也会增加很多开销，从而进一步减慢程序的速度。print 命令会增加一些开销，尤其是在输出大量数据的情况下。

其他要考虑的事情包括所涉及的系统计时器的精度、与硬件的交互、python 是一种解释语言等，但相比之下它们都是次要的，所以你可以忽略它。如果你想写一些实时关键的东西，C 将是一个更好的选择。

所以无论如何，为了加快你的程序，我会摆脱耗时的部分：

```
import socket, time
# ...
def send_data():
    sock = socket.socket(socket.AF_INET,socket.SOCK_DGRAM)
    while True: #TODO: would require an abort condition
        sock.sendto(MESSAGE, (UDP_IP, UDP_PORT))
        time.sleep(0.00005) # don't count on this to be 100% accurate 
```

如果您不希望主程序阻塞，可以将其放入线程中：

```
from threading import Thread
t = Thread(target=send_data)
t.start() 
```

# android - Gson().toJson(Object); 不适用于此对象的 byte[] 属性

> ID：13198701
> 
> 赞同：1
> 
> 时间：2012-11-02T15:51:22.160
> 
> 标签：android, eclipse, json, bytearray, gson

我尝试使用 gson-2.2.2 库将对象转换为 Json 格式。如果我尝试转换没有 byte[] 属性的对象，它会成功转换。但是，如果我尝试转换具有 byte[] 属性的 onbject，它不会转换，它不会抛出任何异常并且不会进入下一行。

这是代码示例；

```
public class MyClass extends ABase{
private Integer ID;
public Integer getID(){
    return ID;
}
public void setID(Integer value){
    ID = value;
}

private byte[] Image;
public byte[] getImage(){
    return Image;
}
public void setImage(byte[] value){
    Image = value;
} 
```

}

我将这个类转换为另一个类中的 Json。oo 是一个动态创建的对象。oo 没有问题，它包含所有属性和值。

```
Class cls = Class.forName(className);                                       
ABase oo = (ABase) cls.newInstance();

//....Other related code

String s=new Gson().toJson(oo); 
```

* * *

编辑

很长一段时间后，它进入下一行。当我查看 s 的值时，它给出了这个信息；

> {"ID":733"FileName":"content://media/external/images/media/1883", Image":[-1,-40,-1,-31,85,41,69,120,105,102,0, 0,73,73,42,0,8,0,0,0,12,0,0,1,4,0​​,1,0,0,0,-64,12,0,0,1,1 ,4,0,1,0,0,0,-112,9,0,0,15,1,2,0,8,0,0,0,-98,0,0,0,16,1 ,2,0,9,0,0,0,-90,0,0,0,18,1,3,0,1,0,0,0,1,0,0,0,26,1, 5,0,1,0,0,0,-48,0,0,0,27,1,5,0,1,0,0,0,-40,0,0,0,40,1, 3,0,1,0,0,0,2,0,0,0,49,1,2,0,11,0,0,0,-80,0,0,0,50,1,2 ,0,20,0,0,0,-68,0,0,0,19,2,3,0,1,0,0,0,1,0,0,0,105,-121,4,0 ,1,0,0,0,-32,0,0,0,-38,2,0,0,83,65,77,83,85,78,71,0,71,84,45,78 ,55,48,48,48,0,0,78,55,48,48,48,88,88,76,82,73,0,0,50,48,49,50,58,49,49 ,58,48,50,32,50,50,58,50,49,58,51,52,0,72,0,0,0,1,0,0,0,72,0,0,0 ,1,0,0,0,25,0,-102,-126,5,0,1,0,0,0,18,2,0,0,-99,-126,5,0,1 ,0,0,0,26,2,0,0,34,-120,3,0,1,0,0,0,3,0,0,0,39,-120,3,0,1 ,0,0,0,-112,1,0,0,0,-112,7,0,4,0,0,0,48,50,50,48,3,-112,2,0, 20,0,0,0,34,2,0,0,4,-112,2,0,20,0,0,0,54,2,0,0,1,-110,10,0,1,0,0,0, 74,2,0,0,2,-110,5,0,1,0,0,0,82,2,0,0,3,-110,10,0,1,0,0,0, 90,2,0,0,4,-110,10,0,1,0,0,0,98,2,0,0,5,-110,5,0,1,0,0,0,106, 2,0,0,7,-110,3,0,1,0,0,0,2,0,0,0,9,-110,3,0,1,0,0,0,16, 0,0,0,10,-110,5,0,1,0,0,0,114,2,0,0,124,-110,7,0,66,0,0,0,-104,2,0 ,0,-122,-110,7,0,21,0,0,0,122,2,0,0,0,-96,7,0,4,0,0,0,48,49,48, 48,1,-96,3,0,1,0,0,0,1,0,0,0,2,-96,4,0,1,0,0,0,-64,12,0 ,0,3,-96,4,0,1,0,0,0,-112,9,0,0,2,-92,3,0,1,0,0,0,0,0, 0,0,3,-92,3,0,1,0,0,0,0,0,0,0,6,-92,3,0,1,0,0,0,0,0, 0,0,32,-92,2,0,7,0,0,0,-112,2,0,0,0,0,0,0,1,0,0,0,17,0, 0,0,9,1,0,0,100,0,0,0,50,48,49,50,58,49,49,58,48,50,32,50,50,58,50,49, 58,51,52,0,50,48,49,50,58,49,49,58,48,50,32,50,50,58,50,49,58,51,52,0,-107 ,1,0,0,100,0,0,0,25,1,0,0,100,0,0,0,-29,-1,-1,-1,100,0,0,0,0,0,0 ,0,100,0,0,0,25,1,0,0,100,0,0,0,-115,1,0,0,100,0,0,0,65,83,67,73,73,0, 0,0,85,115,101,114,32,99,111,109,109,101,110,116,115,0,79,79,69,73,48,56,0,0,5,0,1,0,7,0,4,0,0,0,48,49,48, 48,2,0,4,0,1,0,0,0,0,32,1,0,64,0,4,0,1,0,0,0,0,0,0,0, 80,0,4,0,1,0,0,0,1,0,0,0,0,1,3,0,1,0,0,0,0,0,0,0,0, 0,0,0,9,0,0,1,4,0​​,1,0,0,0,64,1,0,0,1,1,4,0​​,1,0,0,0, -16,0,0,0,3,1,3,0,1,0,0,0,6,0,0,0,18,1,3,0,1,0,0,0,1 ,0,0,0,26,1,5,0,1,0,0,0,76,3,0,0,27,1,5,0,1,0,0,0,84,3 ,0,0,40,1,3,0,1,0,0,0,2,0,0,0,1,2,4,0,1,0,0,0,92,3,0 ,0,2,2,4,0,1,0,0,0,-59,81,0,0,0,0,0,0,72,0,0,0,1,0,0, 0,72,0,0,0,1,0,0,0,-1,-40,-1,-37,0,-124,0,1,1,1,1,1,1,1 ,1,1,1,1,1,1,1,1,2,1,1,1,1,1,2,1,1,1,2,2,2,2,2,2,2 ,2,2,3,3,4,3,3,3,3,3,2,2,3,4,3,3,4,4,4,4,4,2,3,5,5 ,4,4,5,4,4,4,4,1,1,1,1,1,1,1,2,1,1,2,4,3,2,3,4,4,4 ,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4 ,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,-1,-35 ,0,4,0,4,-1,-64,0,17,8,0,-16,1,64,3,1,33,0,2,17,1,3,17,1, -1,-60,1,-94,0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,16,0,2,1, 3,3,2,4,3,5,5,4,4,0,0,1,125,1,2,3,0,4,17,5,18,33,49,65,6,19, 81,97,7,34,113,20,50,-127,-111,-95,8,35,66,-79,-63,21,82,-47,-16,36,51,98,114,- 126,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70, 71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,-125,-124,-123,-122,-,-121-,-11,-118 -110,-109,-108,-107,-106,-105,-104,-103,-102,-94,-93,-92,-91,-90,-89,-88,-87 ,-86,-78,-77,-76,-75,-74,-73,-72,-71,-70,-62,-61,-60,-59,-58,-57,- 56,-55,-54,-46,-45,-44,-43,-42,-41,-40,-39,-38,-31,-30,-29,-28,-27, -26,-25,-24,-23,-22,-15,-14,-13,-12,-11,-10,-9,-8,-7,-6,1,0,3 ,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10 ,11,17,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119,0,1,2,3,17,4,5,33 ,49,6,18,65,81,7,97,113,19,34,50,-127,8,20,66,-111,-95,-79,-63,9,35,51,82,-16,21,98,114,-47,10,22,36,52,-31,37,-15,23,24,25,26,38,39,40,41,42,53,54,55, 56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,-4-126,- 123,-122,-121,-120,-119,-118,-110,-109,-108,-107,-106,-105,-104,-103,-102,-94,-93, -92,-91,-90,-89,-88,-87,-86,-78,-77,-76,-75,-74,-73,-72,-71,-70,-62 ,-61,-60,-59,-58,-57,-56,-55,-54,-46,-45,-44,-43,-42,-41,-40,-39,- 38,-30,-29,-28,-27,-26,-25,-24,-23,-22,-14,-13,-12,-11,-10,-9,-8, -7,-6,-1,-38,0,12,3,1,0,2,17,3,17,0,63,0,-2,52,-31,-116,-20, 43,-71,55,49,-3,-29,48,-36,-92,-29,104,27,79,-45,39,-45,20,-41,64,-82,-93 ,-53,-33,-14,-100,-4,-60,117,-32,115,-97,113,-11,-51,122,49,-115,-102,63,54,-65,118,85,-72 ,-28,103,57,25,28,-87,27,79,0,3,-40,-10,21,-103,52,100,-74,73,-14,-127,3,-27, 45,-14,-12,7,-116,103,-97,-104,-110,56,-95,-108,-101,70,116,-95,118,62,-20,51,-87,63,47,-35,10,15,31,123,-13,-56,62,-75,66,70,-113,-53,-27,84 ,24,-44,71,-79,-122,6,50,71,94,-25,-81,94,-62,-111,-68,27,-35,25,-109,- 20,-37,-100,19,-114,3,125,-26,81,-57,56,-19,-57,-46,-79,102,-40,-92,-78,-95,42 ,-57,36,18,50,112,7,62,-93,-102,14,-54,109,-97,-1,-48,-2,20,-90,28,-100,-100, -11,43,-37,104,-55,-58,7,-25,-7,-42,92,-116,-65,49,-64,-50,-1,0,-108,99 ,56,-29,-41,-23,93,-82,39,-51,83,108,-93,33,4,-74,-35,-89,3,-111,-76,103,31, 79,78,69,83,112,-96,-28,40,13,-19,-58,43,54,-84,122,20,-39,93,-108,-18,32,1,-49 ,1,-70,-3,5,35,32,85,32,-32,18,-35,-77,-98,48,115,72,-21,-125,118,34,97,-23, -111,-49,80,61,42,55,-12,-54,-127,-4,62,-4,-48,111,7,-91,-103,-1,-47,-2 ,3,-56,7,29,120,59,115,-127,-109,-1,0,-22,-90,16,0,-64,-17,-49,114,120,-85,-110,1, -99,67,115,-114,-4,-98,-67,105,56,29,65,-57,-89,127,-83,64,9,-97,126,61,-5,-29,52,30 ,0,-56,-21,-58,123,30,-76,0,-36,109,61,-72,-4,-15,-114,-76,3,-23,-49,108,119,-6,-48,7,-1,-46 ,-2,1,15,78,9,56,60,113,-97,106,65,-58,61,50,7,94,62,-76,0,-103,63,-105,92,- 102,50,15,36,-32,-48,2,14,-97,-54,-113,76,-25,29,64,-6,80,1,-33,3,-90,122 ,-11,-59,7,-41,-81,-1,0,-86,-128,63,-1,-45,-2,0,7,-42,-127,-41, 3,-12,29,104,1,123,116,39,-7,81,-19,-111,-6,-30,-128,0,79,67,-8,3,-48,82,-25, 25,30,-98,-1,0,-46,-128,12,-9,-57,65,-40,-46,-106,6,-128,63,-1,-44, -2,55,-4,-127,-9,-94,5,48,0,32,-1,0,-85,61,80,-12,35,-41,-11,-12 ,52,-109,70,119,-30,79,-66,-85,-76,76,-96,46,10,-98,-128,-114,-93,-96,-81,69 ,43,-69,31,-102,-93,42,72,-50,-14,10,-56,120,-7,-101,28,-25,-116,-13,-41,- 23,-20,107,42,-30,53,27,85,-104,16,-91,-92,126,-69,-119,36,1,-110,79,92,-125,-6,126, 40,-94,-125,-18,-36,-5,124,-80,-52,56,24,-55,92,-106,56,-21,-20,-65,90,-89 ,52,65,-14,84,41,102,-32,14,90,69,32,18,78,126,-89,-11,34,-125,120,-67,19,50,-35,30,72,-54,-18,36,41,-53,-88,56,45,-49,4,-81,-75, 99,-49,6,-34,9,42,-39,-61,18,48,84,-98,-29,-7,80,118,83,122,-40,-1,-43,-2 ,21,-89,69,-40,113,-107,24,-17,-111,-116,-100,-125,-113,-16,-84,-87,-111,-58,87 ,-88,35,39,104,-58,113,-114,-125,21,-24,31,49,73,-108,37,24,-28,12,28,12,-100,100,12,14 ,-4,125,61,106,-84,-118,62,115,-14,-19,-50,-43,-63,-28,112,127,-89,-75,76,-94,-103,-35,77 ,-40,-124,-116,114,0,-55,29,-108,-12,-19,-11,-88,-118,16,-93,118,14,91,60,116,-29,- 37,-14,-84,78,-56,59,59,17,-78,96,29,-69,-127,-57,67,-64,24,39,-4,105,-123, 24,40,-32,3,-126,67,3,-13,118,-49,31,-91,6,-47,118,103,-1,-42,-2,4,8,63,-62, -71,-12,39,-81,126,122,127,-100,83,10,-112,51,-4,33,-79,-128,49,-113,127,-27,91,73,93,9, 52,-10,26,84,-114,79,-54,51,-98,-108,-46,-69,121,-28,124,-71,-32,103,-75,98,48,-37, -128,71,-65,30,-99,-1,0,-62,-103,-73,57,-56,28,112,50,49,-102,0,8,29,-56,-11,-24,105,57,25,56,-4,113,-126,61,-65,74,0,-1,-41,- 2,1,48,71,124,-32,118,20,-104,-50,120,-4,-69,-48,2,96,-114,56,-32,-32,117,-17,70,-34 ,79,110,125,48,63,-49,74,0,76,30,-57,-109,-23,-34,-128,56,-49,-89,-75,0,3,60,119, -12,20,-99,120,-28,-25,-16,-26,-128,63,-1,-48,-2,0,58,113,-8,122,82,-127,-22,56 ,-23,-23,64,7,35,-109,-41,56,-28,-30,-126,63,-97,-7,-1,0,62,-44,0, 99,0,-100,31,67,-38,-108,-126,50,79,126,5,0,55,24,7,57,-56,56,-10,-91,-63, -49,63,-88,-29,-67,0,127,-1,-47,-2,57,-103,28,-82,15,-54,-48,-27,88,21, -37,-68,-6,-127,-8,47,60,125,42,-92,-92,108,42,9,102,-36,65,-28,49,64,9,-34,57, -4,-77,-37,3,-91,122,81,87,103,-26,-67,-67,76,-39,22,71,87,118,27,10,-97,43,-106, -50,79,76,1,-45,28,85,9,35,60,51,-96,-37,-115,-92,99,107,-98,-7,7,30,-96 ,-2,84,53,-94,101,25,-14,-96,33,-120,64,14,-30,76,-97,127,-27,28,0,71,-88,-57 ,79,122,-91,42,56,-7,73,80,119,0,-118,-83,-9,-120,-36,72,-29,-13,-29,-46,-86,17,-45,83,88,109,99,50 ,85,-36,-65,59,-126,-86,70,1,44,28,-13,-114,72,-6,123,-16,13,102,93,35,-124,104,-101,110 ,67,-25,-3,95,81,-126,50,51,-50,57,63,-25,-102,-52,-21,-90,-10,63,-1, -46,-2,23,110,55,12,2,24,29,-65,32,-58,-26,35,-95,-6,-29,-97,-54,-77,36 ,66,78,14,6,1,92,17,-125,-7,-12,24,-11,-6,-41,-96,124,-83,55,100,101,-55,30,73, 61,-58,89,70,62,102,-64,-25,-100,125,42,-69,-122,-61,97,113,-50,-46,72,-58,126,-108,29,- 48,122,-40,-82,87,-100,-14,57,28,5,-17,-19,76,101,28,1,-126,50,51,-111,-55,-11, -4,-70,-42,83,-115,-99,-50,-88,61,6,108,32,-111,-64,-49,-54,59,-28,113,81,58, -114,0,-58,73,-49,35,-88,-88,58,35,43,-93,-1,-45,-2,5,-118,116,-50,24,112,64 ,7,0,98,-94,40,114,112,-89,111,83,-107,3,56,-49,-1,0,90,-70,12,96,-20,-11,27,- 77,25,110,62,81,-111,-45,20,-52,28,16,127,-117,-114,-71,35,-113,-13,-46,-77,-108,109,-86,54,16,-116,14,0,-56,-23,-51,38,-45,-113,-57,60,96,122,-42,96,52,-114 ,-104,3,111,78,71,-13,-90,-29,-73,-65,79,-81,90,0,-1,-44,-2,1,72,63,54 ,57,-49,79,80,7,52,-72,57,37,-121,-12,-1,0,61,-24,2,60,2,57,39,-81, -13,2,-105,105,-25,32,113,-57,3,-83,0,31,-106,123,30,-97,-25,-1,0,-81,73,-116,31 ,95,117,-29,52,0,115,-37,-41,-114,115,-118,76,117,-10,-12,28,80,7,-1,-43,-2,0,112,120,61,123,- 46,1,-109,-57,30,-108,0,-71,-3,15,126,-76,30,-103,28,118,-23,-42,-128,15,-90,122,- 14,64,-91,-58,57,96,64,-50,61,13,0,33,30,-99,-65,-50,104,57,-58,51,-45,-37 ,-23,64,31,-1,-42,-2,58,71,-104,50,-45,72,12,73,-113,-71,-2,-75,8,- 49,32,19,-112,57,111,92,-28,-43,107,-103,3,-77,-85,2,-126,64,3,50,-96,7,-8,113,- 114,61,127,-91,122,-80,90,31,-102,62,-98,-90,108,-88,124,-77,20,37,-118,-85,-28,-55,-128,114, -67,127,50,56,-50,56,-17,84,36,-28,-79,37,-97,115,96,-95,95,-97,-114,-8,-4,-7,-9,-51,93,-117,51,-40,-19,102,96,-40,32,-4,-2,88,44,8,61,1,-29 ,56,-32,-97,108,-42,100,-69,67,33,-61,-4,-93,-94,-73,76,-29,-98,-7,62,-36, -6,80,105,79,-79,71,110,14,-32,119,97,-74,-106,-37,-76,116,7,-27,-49,-4,11,-89,-21, 89,87,65,-50,-14,114,78,11,22,120,-2,101,24,-32,99,62,-66,-98,-76,89,61,-50,-102,111,67 ,-1,-41,-2,26,39,15,-79,78,-29,-68,55,-54,25,-127,32,31,110,-65,65,89,114,100,-31 ,20,-27,-113,82,-54,121,-57,92,-28,-1,0,-6,-77,94,-93,-121,99...-113,82,-54,121,-57,92,-28,-1,0,-6,-77,94,-93,-121,99...-113,82,-54,121,-57,92,-28,-1,0,-6,-77,94,-93,-121,99...

我必须将图像数据（我从图库中获取，通过使用其 uri（FileName 属性的值））作为字节 [] 发送到服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T13:37:00.263

看起来它工作得很好，只是需要很长时间才能完成。代码必须做很多工作才能以这种方式将大字节数组转换为文本。

`JSON`可能不是传输图像文件的好方法，当然不是作为字节值数组。这将需要很长时间才能转换。如果您可以控制服务器，则可以实现一种不同的方式来发送它，也许是作为一个常规的二进制数据流。

如果您必须使用`JSON`，最好将图像作为 Base64 编码字符串发送，[Codec](http://commons.apache.org/codec/) Apache Commons 库有代码可以做到这一点。

# java - 错误 java.lang.IllegalStateException：活动已被销毁

> ID：13198702
> 
> 赞同：4
> 
> 时间：2012-11-02T15:51:22.810
> 
> 标签：java, android, facebook, android-fragments

下面我在遇到这个问题时一直在尝试使用 Facebook SDK，每次运行下面的代码时，我似乎都会收到错误“java.lang.IllegalStateException：Activity 已被破坏”，我认为它有一些东西与碎片有关，有什么想法吗？

```
 11-02 15:24:29.212: E/AndroidRuntime(17034): FATAL EXCEPTION: main
 11-02 15:24:29.212: E/AndroidRuntime(17034): java.lang.RuntimeException: Unable to      start activity  ComponentInfo{com.example.facebooktest/com.example.facebooktest.FacebookTutorial}: java.lang.IllegalStateException: Activity has been destroyed 
```

上面是错误，下面是代码。

```
package com.example.facebooktest;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.view.Menu;
import android.view.ViewGroup.LayoutParams;
import android.widget.LinearLayout;
import android.widget.TextView;
import com.facebook.android.AsyncFacebookRunner;
import com.facebook.android.Facebook;

public class FacebookTutorial extends FragmentActivity {
    // --------- Facebook References ---------//
    private Fragment mainFragment;

    // application id from facebook.com/developers
    public static final String APP_ID = "434865303240706";
    // log tag for any log.x statements
    public static final String TAG = "FACEBOOK CONNECT";
    // permissions array
    private static final String[] PERMS = new String[] { "user_events" };
    // facebook vars
    private Facebook mFacebook;
    private AsyncFacebookRunner mAsyncRunner;
    // id text view
    private TextView mText;

    public static final int LOGIN = Menu.FIRST;
    public static final int GET_EVENTS = Menu.FIRST + 1;
    public static final int GET_ID = Menu.FIRST + 2;

    protected void initLayout() {
        LinearLayout rootView = new LinearLayout(this.getApplicationContext());
        rootView.setOrientation(LinearLayout.VERTICAL);

        this.mText = new TextView(this.getApplicationContext());
        this.mText.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT));
        rootView.addView(this.mText);

        this.setContentView(rootView);

    }

    // --------- Method called on create. ---------//

    public void onCreate(Bundle savedInstanceState) {

        if (savedInstanceState == null) {
            // Add the fragment on initial activity setup
            mainFragment = new Fragment();
            getSupportFragmentManager().beginTransaction()
                    .add(android.R.id.content, mainFragment).commit();
        } else {
            // Or set the fragment from restored state info
            mainFragment = (Fragment) getSupportFragmentManager()
                    .findFragmentById(android.R.id.content);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-02T16:05:11.753

你`onCreate`的缺失`super.onCreate(savedInstanceState);`，把它放在`if`声明之前，这应该可以解决问题。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if (savedInstanceState == null) {
        // Add the fragment on initial activity setup
        mainFragment = new Fragment();
        getSupportFragmentManager().beginTransaction()
        .add(android.R.id.content, mainFragment).commit();
    } else {
        // Or set the fragment from restored state info
        mainFragment = (Fragment) getSupportFragmentManager()
                .findFragmentById(android.R.id.content);
    }

} 
```

# java - Java：转换列表 到字符串

> ID：13198703
> 
> 赞同：54
> 
> 时间：2012-11-02T15:51:39.070
> 
> 标签：java

我该如何转换`List<Integer> to String`？例如，如果 my`List<Integer>`包含数字 1 2 和 3，如何将其转换为 String = "1,2,3"？每一个帮助将不胜感激。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-11-02T16:06:29.113

我想你可以简单地使用`List.toString()`如下：

```
List<Integer> intList = new ArrayList<Integer>();
intList.add(1);
intList.add(2);
intList.add(3);

String listString = intList.toString();
System.out.println(listString); //<- this prints [1, 2, 3] 
```

如果您不想`[]`在字符串中，只需使用子字符串，例如：

```
 listString = listString.substring(1, listString.length()-1); 
   System.out.println(listString); //<- this prints 1, 2, 3 
```

请注意：`List.toString()`使用`AbstractCollection#toString`方法，将列表转换为字符串，如上

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-11-02T15:55:43.953

与[番石榴](http://code.google.com/p/guava-libraries)：

```
String s = Joiner.on(',').join(integerList); 
```

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2019-09-04T08:33:43.503

在 vanilla Java 8（流）中，你可以做

```
// Given numberList is a List<Integer> of 1,2,3...

String numberString = numberList.stream().map(String::valueOf)
    .collect(Collectors.joining(","));

// numberString here is "1,2,3" 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-11-02T15:52:43.273

一种方法是：

`Iterate`在列表中，将每个项目添加到`StringBuffer`（或）`StringBuilder`并`toString()`在最后执行。

例子：

```
StringBuilder strbul  = new StringBuilder();
     Iterator<Integer> iter = list.iterator();
     while(iter.hasNext())
     {
         strbul.append(iter.next());
        if(iter.hasNext()){
         strbul.append(",");
        }
     }
 strbul.toString(); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-06-07T15:48:23.217

只是从流行的库（Apache Commons）中添加另一个（许多）选项：

```
import org.apache.commons.lang3.StringUtils;

String joinedList = StringUtils.join(someList, ","); 
```

请参阅文档：[https ://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#join-java.lang.Iterable-java.lang.String-](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#join-java.lang.Iterable-java.lang.String-)

* * *

来自其他人的评论的优雅选择（从 Java 8 开始）：

```
String joinedList = someList.stream().map(String::valueOf).collect(Collectors.joining(",")); 
```

# c# - 添加控件时如何让suspendlayout工作？

> ID：13198704
> 
> 赞同：1
> 
> 时间：2012-11-02T15:51:51.413
> 
> 标签：c#, winforms

我在窗体上显示的事件之后添加控件。尽管我调用了`SuspendLayout()`. 如何让布局暂停，以便控件仅在全部加载完成时显示？

```
 public partial class ControlCreateTest : Form
{
    public ControlCreateTest()
    {
        InitializeComponent();       
    }

    private void AsyncControlCreateTest_Shown(object sender, EventArgs e)
    {
        CreateControls();
    } 

    private void CreateControls()
    {
        SuspendLayout();
        int startPoint= 0;            
        for (int i = 0; i < 4; i++)
        {          
            UserControl control = new UserControl() { Text = i.ToString(), Height = 100, Width = 100 };
            control.Load += control_Load;
            Controls.Add(control);
            control.Top = startPoint;
            startPoint += control.Height;
        }

        ResumeLayout();
        Text = "Loading complete";
    }

    void control_Load(object sender, EventArgs e)
    {
        Thread.Sleep(500);
        RichTextBox newRichTextBox = new RichTextBox() { Height = 100, Width = 100 };
        UserControl control = sender as UserControl;
        control.Controls.Add(newRichTextBox);
        newRichTextBox.Text = "loaded";
    }     
} 
```

**更新**
似乎一旦这些表单开始加载......可见性和挂起调用立即被抛出窗口。当 Load 事件长时间运行时，这是相当麻烦的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:51:14.653

在开发者的默默无闻中受到一点攻击`Winforms`。无论如何...我在构造函数中将表单的宽度和高度设置为 1 像素。当调用显示时，我隐藏窗口并将窗口恢复到正常大小。在隐藏之前很难注意到这个小窗口。

这让我的例程启动并加载表单显示而不会令人头疼。

**更新**
当使用 ShowDialogue() 时，这个愚蠢的小技巧只有在 Form_Shown 将控制权返回给调用者之前设置 Visible = true 才有效。我发现如果您在 Form.Shown 中设置 Visible = true ，则将触发 Closing 事件...伙计，我喜欢 WINFORMS ....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:33:24.567

尝试使用 AddRange 一次添加所有控件：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.addrange.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.addrange.aspx)

# asp.net - 在 ASP.NET MVC 4 中接受 JSON

> ID：13198710
> 
> 赞同：3
> 
> 时间：2012-11-02T15:52:12.923
> 
> 标签：asp.net, asp.net-mvc, json

我有一个 JSON 被发送到 ASP.NET 的控制器函数，JSON 看起来像这样：

```
[{"Key":"Test23.txt","Size":6,"LastModified":"Thu, 01 Nov 2012 19:35:43 GMT"},
{"Key":"Test25.txt","Size":6,"LastModified":"Wed, 31 Oct 2012 21:02:51 GMT"},
{"Key":"Test28.txt","Size":6,"LastModified":"Thu, 01 Nov 2012 19:35:42 GMT"}] 
```

我将如何在 MVC 控制器方法中接受它以及如何解析它？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:57:33.563

如果匹配，Mvc 会自动将它绑定到 viewModel。

```
public ActionResult SaveFiles(List<FileViewModel> filesViewModel){

} 
```

你的 FileViewModel 会是这样的

```
public class FileViewModel
{
  public string Key {get;set}
  public int Size {get;set}
  public DateTime LastModified {get;set;}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:00:09.010

默认模型绑定器可以为您完成所有这些工作。无需使用任何第三方库。将集合传递给操作时，它们确实需要可索引。所以你必须使用`array`or `List`。

```
// First, define your input model.
public class MyModel
{
  public string Key { get; set; }
  public int Size { get; set; }
  public string LastModified { get; set; }
}

// NExt, use that model in your action.
public ActionResult MyAction(MyModel[] things)
{
} 
```

一切都应该为你准备好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T15:59:31.000

```
public class Item
{
  public string Key {get;set;}
  public int Size {get;set;}
  public DateTime LastModified {get;set;}
}

public ActionResult MyAction(List<Item> items)
{

} 
```

# c++ - D3DXCreateTextureFromFile 倒置且不居中

> ID：13198711
> 
> 赞同：1
> 
> 时间：2012-11-02T15:52:14.457
> 
> 标签：c++, directx

我是directx的新手，最后我设法加载了一个我想显示为背景图像/纹理的图像

定义图像

```
void setBGImage(std::string path)
{
    D3DXCreateTextureFromFileA(m_Device, path.c_str(), &m_BGImage);
    m_BGImageCenter = D3DXVECTOR3(450.0f, 250.0f, 0.0f); // Image is 900x500
} 
```

绘图图像

```
void DrawBackground()
{
    m_Sprite->Begin(D3DXSPRITE_OBJECTSPACE|D3DXSPRITE_DONOTMODIFY_RENDERSTATE);

    // Texture tiling
    /*
    D3DXMATRIX texScaling;
    D3DXMatrixScaling(&texScaling, 1.0f, 1.0f, 0.0f);
    m_Device->SetTransform(D3DTS_TEXTURE0, &texScaling);*/

    //D3DXMATRIX T, S, R;
    //D3DXMatrixTranslation(&T, 0.0f, 0.0f, 0.0f);
    //D3DXMatrixScaling(&S, 1.0f, 1.0f, 0.0f);
    //D3DXMatrixRotationZ(&R, 0.45f);
    //m_Sprite->SetTransform(&(S*T));

    m_Sprite->Draw(m_BGImage, 0, &m_BGImageCenter, 0, D3DCOLOR_XRGB(255, 255, 255));
    m_Sprite->Flush();

    m_Sprite->End();
} 
```

onResetDevice（在启动时被调用）

```
void onResetDevice()
{
    m_Sprite->OnResetDevice();

    // Sets up the camera 640 units back looking at the origin.
    D3DXMATRIX V;
    D3DXVECTOR3 pos(0.0f, 0.0f, -640.0f); // This distance is just a test value to get only the image and no white background/border as soon as I have it centered I will adjust it.
    D3DXVECTOR3 up(0.0f, 1.0f, 0.0f);
    D3DXVECTOR3 target(0.0f, 0.0f, 0.0f);
    D3DXMatrixLookAtLH(&V, &pos, &target, &up);
    m_Device->SetTransform(D3DTS_VIEW, &V);

    // The following code defines the volume of space the camera sees.
    D3DXMATRIX P;
    RECT R;
    GetClientRect(m_hWnd, &R);
    float width  = (float)R.right;
    float height = (float)R.bottom;
    D3DXMatrixPerspectiveFovLH(&P, D3DX_PI*0.25f, width/height, 0.0f, 1.0f);
    m_Device->SetTransform(D3DTS_PROJECTION, &P);

    // This code sets texture filters, which helps to smooth out disortions when you scale a texture.
    m_Device->SetSamplerState(0, D3DSAMP_MAGFILTER, D3DTEXF_LINEAR);
    m_Device->SetSamplerState(0, D3DSAMP_MINFILTER, D3DTEXF_LINEAR);
    m_Device->SetSamplerState(0, D3DSAMP_MIPFILTER, D3DTEXF_LINEAR);

    // This line of code disables Direct3D lighting.
    m_Device->SetRenderState(D3DRS_LIGHTING, false);

    // The following code specifies an alpha test and reference value.
    m_Device->SetRenderState(D3DRS_ALPHAREF, 10);
    m_Device->SetRenderState(D3DRS_ALPHAFUNC, D3DCMP_GREATER);

    // The following code is used to setup alpha blending.
    m_Device->SetTextureStageState(0, D3DTSS_ALPHAARG1, D3DTA_TEXTURE);
    m_Device->SetTextureStageState(0, D3DTSS_ALPHAOP, D3DTOP_SELECTARG1);
    m_Device->SetRenderState(D3DRS_SRCBLEND, D3DBLEND_SRCALPHA);
    m_Device->SetRenderState(D3DRS_DESTBLEND, D3DBLEND_INVSRCALPHA);

    // Indicates that we are using 2D texture coordinates.
    m_Device->SetTextureStageState(0, D3DTSS_TEXTURETRANSFORMFLAGS, D3DTTFF_COUNT2);
} 
```

当我使用这些方法渲染我的背景图像时，它会倒置显示，而不是居中（向右一点），我感觉高宽比不正确（图像有点模糊，感觉就像图像没有想象的那么高）。

![在此处输入图像描述](../Images/7c5aa6f388785712db63f1b3c2c2b3e9.png)

我尝试了什么？

我尝试调整各种坐标以便从另一侧查看图像，然后旋转它，但无论我尝试什么，它都变成了白色/不存在的背景。

将图像居中并不是什么大问题，我可以移动相机位置，但我很困惑，因为`m_BGImageCenter`应该在 Draw 方法中为我做这件事，而且它似乎不能 100% 正确工作。

我的问题（我想在这种情况下问多个问题是可以的）：

我怎样才能让图像不颠倒（我知道理论上你会怎么做，但我不知道怎么做，所以请给我坐标）。

为什么图像没有居中？

是否有可能`D3DXMatrixPerspectiveFovLH`包裹我的图像，因为它看起来有点模糊。

# c++ - 使用 Google Test、Clang 和 libc++ 构建测试时遇到问题

> ID：13198712
> 
> 赞同：8
> 
> 时间：2012-11-02T15:52:18.143
> 
> 标签：c++, cmake, clang, googletest, libc++

我尝试使用以下 CMake 配置构建 Google Test：

```
$ CMAKE_CXX_COMPILER="clang++" CMAKE_CXX_FLAGS="-std=c++11 -stdlib=libc++ -U__STRICT_ANSI__" cmake ../source 
```

构建显示 CMake 选择了正确的编译器，但我的编译器标志没有通过：

```
$ VERBOSE=1 make
...
/Users/jfreeman/local/bin/clang++    -I/Users/jfreeman/work/googletest/source/include -I/Users/jfreeman/work/googletest/source      -DGTEST_HAS_PTHREAD=1   -o CMakeFiles/gtest.dir/src/gtest-all.cc.o -c /Users/jfreeman/work/googletest/source/src/gtest-all.cc
...
/Users/jfreeman/local/bin/clang++    -I/Users/jfreeman/work/googletest/source/include -I/Users/jfreeman/work/googletest/source      -DGTEST_HAS_PTHREAD=1   -o CMakeFiles/gtest_main.dir/src/gtest_main.cc.o -c /Users/jfreeman/work/googletest/source/src/gtest_main.cc 
```

最终目标是我希望使用 Clang 和 libc++ 构建的项目能够使用 Google Test 构建测试。这意味着我也需要使用 libc++ 构建的 Google Test。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-02T17:07:38.567

在 CMake 的命令行中使用变量有时需要 -D（用于定义）标志。

```
 $ cmake -DCMAKE_CXX_COMPILER="clang++" -DCMAKE_CXX_FLAGS="-std=c++11 -stdlib=libc++ -U__STRICT_ANSI__"  ../source 
```

# javascript - 如何通过双击关闭 DateTimePicker

> ID：13198715
> 
> 赞同：3
> 
> 时间：2012-11-02T15:52:29.760
> 
> 标签：javascript, calendar, datetimepicker

我正在使用 jQuery DateTimePicker 插件（作者：[Trent Richardson](http://trentrichardson.com)），它只会在您选择日期和时间后关闭。但是，有些用户不关心时间，他们希望日历仅在选择日期后关闭。

我只在选择日期后设法关闭了日历，但我需要实现双击而不是单击。我怎么做？这是我的代码：

```
$(jqCompletedEndID).datetimepicker({  
    ampm: true, 
    onSelect: function(){
       $(this).datepicker("hide"); $(this).blur();
    }
}); 
```

我知道 Javascript 中有一个 dblclick 事件，但不确定如何在这种情况下应用它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:32:37.463

我遇到了完全相同的问题/要求。我尝试了与 Alex 的解决方案非常相似的方法，但它不起作用，因为 datetimepicker 似乎在选择一天时会擦除所有样式和事件绑定（我假设它正在重建，但尚未检查），因此无法dblclick 事件触发。

我想出了一个不漂亮但确实有效的解决方案。您可以使用 datetimepicker 的 onSelect 事件来绑定几个处理程序，如下所示：

（假设 this._$input 是对正在使用的输入控件的 jQuery 引用）

```
this._$input.datetimepicker({
...
onSelect: function() {
    var self = this;
    setTimeout(
            function () {
                $('.ui-datepicker-current-day').bind('click', function () { self._$input.datepicker('hide'); });
                $('.ui-datepicker-current-day').bind('dblclick', function () { self._$input.datepicker('hide'); });
            },
            0
        );
} 
```

您可能想知道为什么我会同时绑定单击和双击，尤其是鉴于我上面的声明，即双击不起作用。似乎在 Chrome、FireFox、Safari 和 Opera 中该事件会触发“click”事件，但在 IE 中它会触发“dblclick”事件。此外，如果您想知道 setTimeout，它是必需的，因为在方法完成之前不会构造弹出窗口，因此如果没有它执行这些选择器将不会返回任何内容。

毫无疑问，您已经注意到我的解决方案也会在单击当前选择的日期时关闭选择器，无论它是否是双击的一部分。在我的情况下这是故意的（我还在 beforeShow 事件中触发相同的逻辑来连接处理程序，因此单击当前选择的日期将始终关闭选择器）。在您的情况下，如果您希望它严格使用双击，我可以建议您跟踪点击之间的时间并确保它们在某个阈值内到达。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:33:20.540

您可以`doubleclick`在 html 标记本身上添加事件处理程序。您将为 datepicker 提供一个 emtpy div，因此将其修改为

```
<div id="datepicker" ondblclick="close()"></div> 
```

在`close()`函数中编写代码以隐藏`datepicker`div。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T15:56:49.460

尝试这个...

```
$('#datepicker').datepicker({
     //...
});

$('table.ui-datepicker-calendar a').bind('dblclick', function() {
   $('#datepicker').val();
}); 
```

# java - JGo 库。是否可以更改端口的图标？

> ID：13198717
> 
> 赞同：0
> 
> 时间：2012-11-02T15:52:37.670
> 
> 标签：java, swing

我正在使用 JGo 库。正是我的意思是这个项目[http://www.nwoods.com/components/java/jgo-overview.htm](http://www.nwoods.com/components/java/jgo-overview.htm)。

我的问题是是否可以更改节点内端口的图标。

例如，我正在使用`JGoBasicNode`并且我想更改其中的圆圈，该圆圈是某些图标/图片的默认节点端口形状。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:29:14.517

好的，我找到了答案。可以通过调用：

```
JGoPort port = new JGoPort(new Rectangle(new Dimension(10, 10)), image);
setPort(port); 
```

其中图像是一个`JGoImage`对象

# c++ - 按列排序后如何从 QTableWidget::item 获取正确的行（Qt BUG？）？

> ID：13198724
> 
> 赞同：0
> 
> 时间：2012-11-02T15:52:54.480
> 
> 标签：c++, qt, row, qtablewidgetitem

我正在做一些桌子的东西`Qt C++`，今天我在设置后发现了一些非常可疑的东西`sortEnabled(true)`。我想`QTableWidget`按列排序，这就是我将该属性设置为`true`. 从逻辑上讲，我已经得到了我想要的东西，但我注意到当我`double click`打开一个`row of a table`与其他行相对应的模态对话框时。我放在那张桌子上`QTableWidgetItem-s`。

```
 QTableWidgetItem* widgetItem = new QTableWidgetItem();
 widgetItem->setData(Qt::UserRole, it->id); 
```

在`double click signal`我使用 提取行项目时`QTableWidget::item(int aRow, int aCol)`，我将获得自定义唯一 ID（在我分配了唯一 ID 的每一行）。

关键是：单击列标题并排序后，我将获得排序前位于该位置的行的 ID。我现在得到的 ID 对应于其他行，因为我已按其他列排序。

我怎样才能摆脱这个问题？我做错什么了吗。或者我忘记将某些属性设置为真/假？

我认为这`sort`只会影响表格的视觉方面，但不会影响结构方式......

我只想要正确的 ID，仅此而已。

这是表格情况的简短示例：

排序前：

```
===id=======category==
|   47   |     b     |
|   48   |     a     |
|   49   |     c     |
|   50   |     d     |
====================== 
```

当双击`b`item(1,1) 时返回`correct QTableWidget*`和`ID = 47`

现在我单击类别标题进行排序

排序后：

```
===id=======category==
|   48   |     a     |
|   47   |     b     |
|   49   |     c     |
|   50   |     d     |
====================== 
```

当双击`a`item(1,1) 时返回`the old one QTableWidget*`和`ID = 47` **AGAIN**！ **我要的是 48 而不是 47..**

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:11:32.330

我不知道为什么它没有让你得到正确的物品，但你应该只听[`QTableWidget::itemDoubleClicked()`](http://qt-project.org/doc/qt-4.8/qtablewidget.html#itemDoubleClicked)向你发送实际物品的信号，这样你就不必四处寻找它。

# c++ - C++ 线程安全延迟加载

> ID：13198726
> 
> 赞同：4
> 
> 时间：2012-11-02T15:52:57.497
> 
> 标签：c++, multithreading, lazy-loading

我有一个类似于以下的属性：

```
private:
Foo* myFoo_m;

public:
Foo getMyFoo() const
{
    if (myFoo_m == NULL)
    {
       myFoo_m = new Foo();
       // perform initialization 
```

这在单线程环境中运行良好，但**在多线程环境中如何处理呢？**我发现的大多数信息都与静态单例有关，但在这种情况下， myFoo 是一个公共实例属性。

我将它从 C#（我可以使用 Lazy）和 Java（我可以使用双重检查锁定）移植过来，但在 C++ 中似乎没有直接的方法可以做到这一点。**我不能依赖任何外部库（没有 BOOST），这需要在 windows 和 linux 上工作。**我也不能使用 C++11。

任何见解都会很好。我是 C++ 新手。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T15:59:32.517

如果您有权访问**c++11**，则可以使用`std::mutex`lock 来防止多个线程初始化惰性部分。（注意：`std::mutex`仅在 VS2012 的 Windows 上可用）

您甚至可以使用以下命令对互斥锁执行范围获取`std::lock_guard`：

```
private:

std::mutex m_init_mutex;

public:

Foo getMyFoo() const
{
    {
       std::lock_guard<std::mutex> lock(m_init_mutex);
       if (myFoo_m == NULL)
       {
          myFoo_m = new Foo();
          // perform initialization
       }
    } 
```

**编辑**：OPs 现在声明 C++11 不是一个选项，但也许这个答案在未来会有用

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T16:15:13.633

通过说“没有 C++11”、“没有 Boost 或其他第三方代码”、“必须在 Windows 和 Linux 上工作”，你限制了自己使用特定于实现的锁定机制。

我认为您最好的选择是为自己定义一个简单的锁类，并实现它以在 Linux 上使用 pthread_mutex 并在 Windows 上使用 CriticalSection。可能您已经有了一些特定于平台的代码，以便首先启动线程。

您可以尝试使用 Windows Services for UNIX 之类的方法来避免编写特定于平台的代码，但可能不值得一锁。尽管它是由 Microsoft 提供的，但您可能还是会认为它是一个外部库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T16:07:20.973

**警告：**我没有看到“无 C++11”的要求，所以请忽略答案。

由于 C++11 要求静态变量初始化是线程安全的，因此您可能会认为这是一种“作弊”的简单方法：

```
Foo init_foo()
{
    // initialize and return a Foo
}

Foo & get_instance_lazily()
{
    static Foo impl = init_foo();
    return impl;
} 
```

该实例将在您第一次调用时被初始化`get_instance_lazily()`，并且是线程安全的。

# extjs - Ext.JS 有没有办法在网格面板上跟踪排序事件？

> ID：13198730
> 
> 赞同：0
> 
> 时间：2012-11-02T15:53:09.877
> 
> 标签：extjs, extjs4

我有两个表单域、一个选择列表和另一个网格面板。更改选择列表中的选择将触发其更改事件并触`datasourcechange`发网格面板侦听的自定义事件。这两个组件必须分开，因为它们以不同的形式使用，并不总是一起使用。

问题是当我对网格面板进行排序时，它会获取未过滤的记录列表。如果可用，我希望它重新应用选择列表中的过滤器。

我试过`remoteSort: false`了，但我想我可以做一些类似于选择列表如何触发面板正在侦听的事件的事情，但我需要一种方法来确定何时单击了列标题，无论是通过排序事件还是单击标题本身的事件，有人可以为此推荐最佳实践方法吗？

我们使用的是 Extjs 4.0.5，无法升级到 4.1.x。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T19:55:32.117

这是一个常见的问题。你需要做的是实现这样的事情：

1.  在选择列表中更改选择时，将所选值保存在网格存储中。

    var store = getGridStore(); // 你必须实现这个方法 store.selectedValue = theSelectedValue;

2.  接下来，您必须订阅 store 的 load 事件才能在执行请求之前应用过滤器。这是这样的：

    getGridStore().on('beforeload', function (store) { store.proxy.extraParams = { filteredByValue: store.selectedValue }, this);

我不知道您的实现如何，但这描述了总体思路。

# visual-studio - 在 Visual Studio 生成的类图中查找类？

> ID：13198736
> 
> 赞同：1
> 
> 时间：2012-11-02T15:53:32.350
> 
> 标签：visual-studio, class-diagram

我想了解我们项目中的类关系，所以我生成了我们从 Visual Studio 2012 获得的解决方案的类图。

但是我们的解决方案包含数百个类，生成的图表非常庞大。

我想知道是否有一个搜索功能我可以找到类并使用类名在类图中找到它？

我试过 Ctrl+F 但它似乎只搜索其他文件...我试图导出到其他格式以便我可以搜索它，但它似乎只支持导出到图像。

搜索功能是否存在？

# oop - OOP 中的附加类属性

> ID：13198739
> 
> 赞同：1
> 
> 时间：2012-11-02T15:53:46.430
> 
> 标签：oop, design-patterns

我有以下问题。

假设我们有第三方软件以下列方式向我们发送交易（atm 卡）信息：

> atm 卡 4**5048 借记 42 美元。231 美元左。

所以，我在每笔交易中都记下了金额、余额和卡号。

所以我创建类

```
class Transaction {
    private String mCardNo;
    private Double mAmount; // Actually. I dont store money as double, but let it be:)
    private Double mSumLeft;
} 
```

一天第二个软件出现并开始发送信息：

> atm 卡 4**5048 借记 42 美元：在 Apple Store 购买。231 美元左。

而且我认为获得有关用户购买地点的信息真是太棒了。有两种选择：扩展 Transaction 类或添加新属性“place”。

有一天新软件加了，现在我要支持3种消息了！

> atm 卡 Visa Classic 4**5048 借记 42 美元：在 Apple Store 购买。231 美元左。

天啊！而且我很确定它将包含超过 100 种类型的消息，其中包含唯一数量的属性（因为我现在大约有 50 个！）

那么存储附加属性的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:22:23.340

如果属性的数量变化很大，也许你应该将它们存储在一个类中（以避免子类的爆炸）作为一系列属性中的值，并用一个键（比如，，等）`Map`来标识它们。`String``Map<String, Double>``Map<String, Integer>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:01:24.823

你可以用这个走几条路线。

1.  保持事务类不变并将其用作基类，从它继承并为每种消息类型构建新类。
2.  将您需要的所有属性添加到一个事务类中——您不必在使用它时填充所有属性。

我个人更经常使用第二种方法，它更容易跟踪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T16:21:46.633

这取决于许多其他因素，例如您如何存储数据，数据是否被规范化或没有任何区别，会有数百万笔交易还是数百笔交易等等。

但是，仅从您提供的内容来看，如果您有数十种交易变体，那么为每种类型设置单独的类可能是不切实际的。通用事务类是一种更好的方法。但是，选择其中一种方法只是工作的一半。另一半是，无论您选择哪一个，确保您从一开始就正确设计您的课程。这要求您在进行实际设计之前花费一些时间来研究您拥有或将来可能获得的交易和各种类型。在全面了解问题（业务领域）本身之后，您将能够设计出更好的解决方案。

# html - html textarea注入换行符

> ID：13198743
> 
> 赞同：1
> 
> 时间：2012-11-02T15:53:47.277
> 
> 标签：html, css, textarea

我有一个奇怪的问题。

我有一个 html textarea，cols 设置为 84，如下所示：

```
<textarea id="caseNote_note0" class="txtArea" name="caseNote_note" style="line-height: 1.1em; height: 5em;" wrap="hard" rows="10" cols="84" tabindex="7">blah blah blah</textarea> 
```

该类`txtArea`定义为：

```
.txtArea {
            font-family:arial,sans-serif;
            font-size:1.0em;
            width:99%;
            rows:10;
            overflow:hidden;
            border:none;
            font-family:arial,sans-serif;
            margin: 0px 3px 0px 3px;
        } 
```

textarea 几乎覆盖了整个屏幕。

当用户输入数据时，所有的数据都会出现在你所期望的文本区域中。

但是，当您提交表单时，文本看起来像是在保存时注入了换行符。

IE

**保存前**：

*-------------------------------------------------- -----------------------------------------*

哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈

哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈

*-------------------------------------------------- -----------------------------------------*

**保存后**： *---------------------------------------------- ---------------------------------*

哈哈哈哈哈哈哈哈哈

哈哈哈哈哈哈哈哈哈

哈哈哈哈哈哈哈哈哈

哈哈哈哈哈哈哈哈哈

哈哈哈哈哈哈哈哈哈

哈哈哈哈哈哈哈哈哈

*-------------------------------------------------- -----------------------------------------*

如果我将 更改`cols`为大于 84（比如 150），则换行符会在稍后出现（即，在换行符之前显示更多的文本似乎被输入）。

文本也通过这些明显的神秘换行符保存在数据库表中。

一个解决方法是将 设置`cols`为非常高的值（例如 500），然后我想我不会遇到这个问题....但我宁愿知道*为什么*会发生这种情况。

任何帮助表示赞赏！

干杯

贾勒特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T15:56:02.897

删除`wrap`属性。这是不需要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T16:01:10.293

您的问题是由`wrap="hard"`HTML 中的属性引起的。您可以将其更改为`wrap="soft"`在屏幕上换行，但不将它们包含在提交的数据中。或者，您可以将其更改为`wrap="off"`完全关闭换行 - 然后 textarea 将包含一个水平滚动条。

[这](http://msdn.microsoft.com/en-us/library/ie/ms535152%28v=vs.85%29.aspx)是详细描述这一点的一页（这一页来自 Microsoft），但在网络上搜索*textarea wrap*会给您带来更多负载。

# c++ - 如何插入 Boost MPL 地图

> ID：13198745
> 
> 赞同：1
> 
> 时间：2012-11-02T15:54:01.887
> 
> 标签：c++, boost, template-meta-programming

我设法很好地使用了 Boost MPL 向量和列表，但我就是想不出地图。当我尝试插入其中时，我从 clang 3.1 得到“参数太少”（gcc 4.7 说了类似的话）。有一个版本的插入，其中第二个参数是 POS，它应该被忽略，所以我尝试在那里插入一个虚拟类型 (int)，但这只会给出一个新的和令人困惑的错误。

```
include <iostream>

#include <boost/mpl/key_type.hpp>
#include <boost/mpl/map.hpp>

using namespace boost;
using namespace mpl;

int main(){

  typedef pair<int_<3>, int_<6>> obj;

  std::cout << key_type<map<>, obj >::type::value << std::endl; //works

  std::cout << has_key<insert<map<>, obj>::type, obj)::type::value << std::endl; //complains on "too few template arguments for class template 'insert'

  std::cout << has_key<insert<map<>, int, obj>::type, obj)::type::value << std::endl; // gives "implicit instantiation of undefined template 'boost::mpl::insert<..."
} 
```

MPL 错误并不完全有帮助，即使是铿锵声，所以我只是不明白我在这里做错了什么？我敢肯定这很愚蠢。

[http://www.boost.org/doc/libs/1_51_0/libs/mpl/doc/refmanual/map.html](http://www.boost.org/doc/libs/1_51_0/libs/mpl/doc/refmanual/map.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:00:22.633

添加

```
#include <boost/mpl/insert.hpp> 
```

并更正括号，从 ')' 到 '>'

[http://liveworkspace.org/code/afb6632c3eb800412ea551f50c07fb0a](http://liveworkspace.org/code/afb6632c3eb800412ea551f50c07fb0a)

# sql - sql - 对同一列 DESC 和随机值进行分组/排序

> ID：13198746
> 
> 赞同：1
> 
> 时间：2012-11-02T15:54:02.067
> 
> 标签：sql, database, tsql

> **可能重复：**
> [SQL：如何以某种任意方式对查询结果进行排序/排序？](https://stackoverflow.com/questions/8305920/sql-how-to-sort-order-query-result-in-somewhat-arbitrary-manner)

我想订购这样的列（DESC 值）：c、b、a。但是在 DESC 的最后，我想显示值 g,h,i (如果存在) 。我需要对子查询的列进行联合吗？

这是到目前为止的 SQL 脚本：

```
SELECT cars,size from car_table
GROUP BY cars, size
ORDER BY cars DESC,size ASC 
```

汽车是我试图在其上运行多排序的列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:02:37.663

```
select cars, size
from car_table
group by cars, size
order by
  case 
     when cars in ('a', 'b', 'c') then cars
     else '1'
  end desc,
  case 
     when cars in ('g', 'h', 'i') then cars
     else '1'
  end 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!3/4ddc2/2)

**输出：**

```
| CARS | SIZE |
---------------
|    c |    1 |
|    b |    1 |
|    a |    1 |
|    g |    1 |
|    h |    1 |
|    i |    1 | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T15:59:53.447

你可以使用`CASE`：

```
SELECT cars,size 
from cars_table
GROUP BY cars, size
ORDER BY CASE WHEN cars in ('g','h','i') THEN 1 ELSE 0 END ASC
, cars DESC
, size ASC 
```

这是一个小提琴：[http ://www.sqlfiddle.com/#!3/d26a8/1/0](http://www.sqlfiddle.com/#!3/d26a8/1/0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T16:05:32.500

尝试这个...

```
SELECT cars,size
FROM (
   SELECT cars,size, CASE SUBSTRING(cars,1,1) 
            WHEN 'g' THEN '_z' 
            WHEN 'h' THEN '_y'
            WHEN 'i' THEN '_x'
                     ELSE '' END + cars AS order_cars
   FROM   car_table
   GROUP BY cars,size
) A

ORDER BY order_cars DESC,size ASC 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T15:58:59.990

UNION + Subquery 将是我的选择。

```
SELECT cars, size 
FROM 
(
    SELECT 1 OrderNumber, cars, size from car_table
    GROUP BY cars, size
    WHERE cars not in ('g','h','i')
    UNION ALL
    SELECT 2, cars, size from car_table
    GROUP BY cars, size
    WHERE cars in ('g','h','i')
) aSubQuery
ORDER BY OrderNumber ASC, cars DESC, size ASC 
```

# java - 如何使用 facebook connect in java 和 scribe 库注销用户？

> ID：13198748
> 
> 赞同：1
> 
> 时间：2012-11-02T15:54:08.337
> 
> 标签：java, facebook, authentication, openid

我正在使用**SCRIBE**库在我的应用程序中启用 Facebook 连接登录。我的问题是，每次我点击登录按钮登录并获取 access_token 后，我都在未经授权的情况下登录，因为我已登录 Facebook 并且 access_token 仍然处于活动状态。有没有办法强制 Facebook 退出或每次都向我询问新的 access_token，使用 cookie 或使用 connect.facebook.net/en_US/all.js 或只是在某个时候重定向它是个好主意到[https://www.facebook.com/logout.php?access_token=appId&confirm=1&next=http://localhost:8080/](https://www.facebook.com/logout.php?access_token=appId&confirm=1&next=http://localhost:8080/)。我知道关于这个话题有很多问题，但所有这些问题和建议的解决方案都让我感到困惑。这是处理 Facebook 响应的托管 bean 中的 my post 构造方法。

@PostConstruct public void init() { FacesContext context = FacesContext.getCurrentInstance(); HttpServletRequest req = (HttpServletRequest) 上下文 .getExternalContext().getRequest();

```
 responseCode = req.getParameter("code");
    System.out.println("The code is:   "+responseCode);

    //facebook data
    final String PROTECTED_RESOURCE_URL = "https://graph.facebook.com/me";
    final Token EMPTY_TOKEN = null;
    String apiKey = "MY_API_KEY";
    String apiSecret = "MY_API_SECRET";
    String callbackUrl="the-redirect_page_in_my_application";

    OAuthService service = new ServiceBuilder().provider(FacebookApi.class)
            .apiKey(apiKey).apiSecret(apiSecret)
            //.scope(SCOPE)
            .callback(callbackUrl).build();

    //get authorization Url
    String authorizationUrl = service.getAuthorizationUrl(EMPTY_TOKEN);

    Verifier v=new Verifier(responseCode);
    Token accessToken = service.getAccessToken(EMPTY_TOKEN, v);

    // Now let's go and ask for a protected resource!

    OAuthRequest request = new OAuthRequest(Verb.GET,
            PROTECTED_RESOURCE_URL);
    service.signRequest(accessToken, request);
    Response response = request.send();

    Gson gson = new GsonBuilder().create();
    FacebookUser faceUser = gson.fromJson(response.getBody(), FacebookUser.class);

    setUserName(faceUser.getName());
    setUserFacebook(faceUser.getUsername());
    setGender(faceUser.getGender());

    FacesContext.getCurrentInstance().responseComplete();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:24:09.433

您有多种选择：

1.  [将您的注销按钮绑定到 Facebook Javascript SDK 的 FB.logout() 函数。](https://developers.facebook.com/docs/reference/javascript/FB.logout/)这也可能会导致用户退出 Facebook.com 的副作用（因为您的应用程序可能一开始就负责让他们登录）
2.  [使用带有 HTTP DELETE 和用户访问令牌的 /me/permissions Graph API 端点来撤销该用户对您的应用程序的权限。](https://developers.facebook.com/docs/howtos/login/server-side-logout/)这里的缺点是用户下次登录您的应用程序时必须再次重新进行身份验证（并再次查看登录对话框）。
3.  存储一个告诉您某人已登录的会话变量。当他们注销时删除该变量并存储另一个表明他们已手动注销的会话变量。然后，如果存在第二个变量，在他们单击您应用程序中的登录按钮之前，不要自动重新验证它们。

# delphi - Delphi 软件包安装错误 - 未找到 DCU

> ID：13198749
> 
> 赞同：3
> 
> 时间：2012-11-02T15:54:11.943
> 
> 标签：delphi, package, pascal

我正在尝试从 VST SDk 安装 Delphi 包，我的问题是它说缺少 .dcu。.dcu 并没有丢失，并且在安装包之前它不存在，而是由 IDE 在安装过程中创建的，因此它不是从旧版本的 Delphi 预编译的。.pas 文件似乎并不完整。所有其他文件似乎都安装得很好，但这给我带来了很大的麻烦。我希望有人可以帮助我:) 我正在使用 Delphi 2010 顺便说一句。

在此先感谢：D [显示我的文件和错误的图像](http://postimage.org/image/viz7mah51/) [这是 SDK - 我使用 1.3](http://sourceforge.net/projects/delphiasiovst/files/Source%20Code/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:06:20.413

问题是编译器找不到源文件或 dcu 文件。

有几种方法可以解决这个问题。

1.  您可以通过以下方式将包含 .pas 文件的路径添加到您的库中`/tools/options/EnvironmentOptions/DelphiOptions/Library/LibraryPath`

2.  您可以将路径添加到项目的搜索路径中。在项目选项 ( `ctrl+shift+f11`)

3.  您可以将所需的每个文件添加到项目中。`shift+f11`

请注意，您还可以指向包含 .dcu 文件的文件夹，但这意味着您在调试时将无法单步执行代码。

我通常使用方法 1，因为这适用于您在此 IDE 中使用的所有未来项目。如果您创建许多使用同一个库的项目会很方便。其他一些人喜欢为每个项目指定这个，这样他们就可以完全控制项目的依赖关系。

# c# - 从 Windows 运行 EXE 从传递静态输入

> ID：13198750
> 
> 赞同：2
> 
> 时间：2012-11-02T15:54:12.057
> 
> 标签：c#, console-application

目前我有一个正在运行的进程，但它需要用户输入

```
y <return>
<return> 
```

我正在使用的代码如下

```
ProcessStartInfo psi = new ProcessStartInfo();
string exepath = Directory.GetParent(System.Reflection.Assembly.GetExecutingAssembly().Location).ToString();
Process proc = new Process();
psi.FileName = exepath + @"\lib\dnaml";
psi.RedirectStandardInput = true;
psi.Arguments = "y\r \r";
psi.UserShellExecute = true;
proc.StartInfo = psi;
proc.Start();
proc.WaitForExit(); 
```

我想硬输入这些输入。有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T16:07:11.020

该`Arguments`属性对应于命令行，而不是通过标准输入输入的数据。

该`RedirectStandardInput`物业是难题的一部分。然后您还需要写入连接到该`StandardInput`属性的流。另请注意，标准输入重定向与 不兼容`ShellExecute`，它需要`CreateProcess`工作。所以设置`UseShellExecute = false`。

```
psi.RedirectStandardInput = true;
psi.UseShellExecute = false;
proc.StartInfo = psi;
proc.Start();
proc.StandardInput.WriteLine("y ");
proc.StandardInput.WriteLine();
proc.WaitForExit(); 
```

# osgi - org.osgi.service.event.EventHandler 无法监听 EventAdmin 服务发布的事件

> ID：13198760
> 
> 赞同：1
> 
> 时间：2012-11-02T15:55:20.060
> 
> 标签：osgi, equinox

我正在尝试为 OSGi EventAdmin 服务运行演示应用程序，但我实现的 EventHandler 无法监听 EventAdmin 发布者发布的事件：

下面是 Event Publisher 的代码，后面是 Listener(EventHandler) 的代码：

```
public class Publisher implements BundleActivator{

static EventAdmin eventAdmin;
ServiceReference ref;
static HashMap properties= null;

@Override
public void start(BundleContext context) throws Exception {
    ref=context.getServiceReference(EventAdmin.class.getName());

    if(ref==null){
        System.err.println("Unable to aquire EventAdmin Ser Ref.");
    }

    eventAdmin=(EventAdmin) context.getService(ref);
    if(eventAdmin==null){
        System.err.println("unable to get service:EventAdmin");
    }

    properties=new HashMap();
    properties.put("XYZ", "Test");
    Event event = new Event("lnu/test/event/Demo", properties);
    eventAdmin.postEvent(event);
    System.out.println("event posted");

}

@Override
public void stop(BundleContext context) throws Exception {
    // TODO Auto-generated method stub
}
} 
```

监听器代码：

```
public class Listener implements BundleActivator, EventHandler {    

public void start(BundleContext context) {
Dictionary d = new Hashtable();

d.put(EventConstants.EVENT_TOPIC, "lnu/test/event/Demo" );

context.registerService( EventHandler.class.getName(),
this, d );
System.out.println("event handler is registered now");
}

public void stop( BundleContext context) {}

public void handleEvent(Event event ) {
System.err.println("Event has been captured");
System.out.println("getTopic: "+event.getTopic());
System.out.println("getproperty: "+event.getProperty("XYZ"));
}
} 
```

代码中的打印语句显示，发布者已经发布了事件，并且监听器注册到了EventHandler服务，但它仍然没有在监听器端调用handleEvent方法，不知道为什么？并且无法理解幕后发生的事情。没有运行时异常/错误。

使用的 IDE 是 Eclipse Juno Build id: 20120614-1722 with Equinox。

运行配置中包含以下目标平台捆绑包：

1.  org.eclipse.osgi
2.  org.eclipse.equinox.event
3.  org.eclipse.equinox.util
4.  org.eclipse.osgi.services

有人可以指出我缺少什么或做错了什么吗？或者，如果您有一些指向 OSGi EventAdmin 服务工作示例的链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:48:10.173

我猜你的监听器包是在发布者包已经发布事件之后注册的。

由于这个原因，在包的启动方法中测试这个很容易出错，除非您控制包的启动顺序。对于这个简单的测试，我建议您在发布者中启动一个单独的线程，每隔几秒发布一个事件。注册后，侦听器应该开始获取它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:44:22.113

确认您的侦听器包正在导入与 EventAdmin 包相同的 org.osgi.service.event 包。您的侦听器包可能包含 org.osgi.service.event 包，因此没有使用与 EventAdmin 包相同的 org.osgi.service.event 包。这可能是 EventAdmin 包不调用您的 EventHandler 服务的原因。它可能是别的东西，但这是需要检查的东西。

# php - 无法从 Zend_Search_Lucene 索引中检索值

> ID：13198763
> 
> 赞同：0
> 
> 时间：2012-11-02T15:55:25.890
> 
> 标签：php, zend-framework, lucene, zend-search-lucene

```
$index = Zend_Search_Lucene::create($indexpath);
$doc = Zend_Search_Lucene_Document_Html::loadHTMLFile ($targeturl);
$title = $doc->title;
$body = $doc->body;
$doc->addField(Zend_Search_Lucene_Field::Text('title', $title));
$doc->addField(Zend_Search_Lucene_Field::unStored('body', $body));
$doc->addField(Zend_Search_Lucene_Field::unIndexed('url', $targeturl));
$index->addDocument($doc);
$index->commit(); 
```

这就是我尝试使用 zend 创建索引的方式。这是通过名为 crawlerAction() 的操作完成的。

我试图从另一个名为 searchresultsAction() 的操作中获取数据；

```
$index = Zend_Search_Lucene::open($indexpath);
$hits =  $index->find($query);
foreach ($hits as $hit) 
{                   
    echo $hit->url;
    echo $hit->title; 
    echo $hit->body;
} 
```

其中，$query 是搜索字符串。

我没有得到任何输出，我得到 $hits 作为一个空数组。我不确定到目前为止我是否在代码中犯了任何错误。这是我第一次使用 zend 进行搜索。任何人都可以指出出了什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:47:09.597

我会和[Luke](http://code.google.com/p/luke/)一起查看索引，看看我的索引操作是否成功完成。

# c++ - 用于瓷砖水的 2D 元胞自动机

> ID：13198765
> 
> 赞同：1
> 
> 时间：2012-11-02T15:55:31.057
> 
> 标签：c++, sdl, game-physics, cellular-automata

我一直在尝试在我的游戏中实现基于 2D 瓷砖的水。我开始让瓷砖出现在屏幕上等。我有一个绘制每种瓷砖类型的绘图功能。我遇到的问题是，当我调用这个函数时，水的瓷砖不会改变位置。这让我相信这段代码运行不正常。在每个循环中都会调用此代码。这应该更新所有水瓦的质量。出于某种原因，什么都没有发生。水停留在原来的位置。我的瓷砖在瓷砖类的向量中只是

```
Tiles()
{
    TileProp // the type of tile (GROUND,AIR,WATER)
    Mass
    NewMass
} 

void App::SimulateCompression()
{
float Flow = 0;
float remainingmass = 0;

int ID = 0;

//Calculate and apply flow for each block
for (int X = 0; X < MAP_WIDTH; X++)
{
    for(int Y = 0; Y < MAP_HEIGHT; Y++)
    {
        //Skip inert ground blocks
        if(TileList[ID].TileProp == TILE_GROUND) continue;

        //Custom push-only flow
        Flow = 0;
        remainingmass = TileList[ID].Mass;
        if(remainingmass <= 0) continue;

        //The block below this one
        if(TileList[Rect2Lin(TILE_SIZE,X,(Y-1))].TileProp != TILE_GROUND)
        {
            Flow = GetStableWaterState(remainingmass + TileList[Rect2Lin(TILE_SIZE,X,(Y-1))].Mass /*mass[x][y-1]*/) - TileList[Rect2Lin(TILE_SIZE,X,(Y-1))].Mass;
            if(Flow > MinFlow){Flow *= 0.5; /*leads to smoother flow*/}
            int tempA = Min(MaxSpeed, remainingmass);
            if(Flow > tempA){Flow = tempA;}
            if(Flow < 0){Flow = 0;}

            TileList[ID].NewMass -= Flow;
            TileList[Rect2Lin(TILE_SIZE,X,(Y-1))].NewMass += Flow;
            remainingmass -= Flow;
        }

        if(remainingmass <= 0) continue;

        //Left
        if(TileList[Rect2Lin(TILE_SIZE,(X - 1),Y)].TileProp != TILE_GROUND)
        {
            //Equalize the amount of water in this block and it's neighbour
            Flow = (TileList[ID].Mass - TileList[Rect2Lin(TILE_SIZE,(X - 1),Y)].Mass)/4;
            if(Flow > MinFlow){Flow *= 0.5;}
            if(Flow > remainingmass){Flow = remainingmass;}
            if(Flow < 0){Flow = 0;}

            TileList[ID].NewMass -= Flow;
            TileList[Rect2Lin(TILE_SIZE,(X - 1),Y)].NewMass += Flow;
            remainingmass -= Flow;
        }

        if(remainingmass <= 0) continue;

        //Right
        if(TileList[Rect2Lin(TILE_SIZE,(X + 1),Y)].TileProp != TILE_GROUND)
        {
            //Equalize the amount of water in this block and it's neighbour
            Flow = (TileList[ID].Mass - TileList[Rect2Lin(TILE_SIZE,(X + 1),Y)].Mass)/4;
            if(Flow > MinFlow){Flow *= 0.5;}

            if(Flow > remainingmass){Flow = remainingmass;}
            if(Flow < 0){Flow = 0;}

            TileList[ID].NewMass -= Flow;
            TileList[Rect2Lin(TILE_SIZE,(X + 1),Y)].NewMass += Flow;
            remainingmass -= Flow;
        }

        if(remainingmass <= 0) continue;

        //Up. Only compressed water flows upwards
        if(TileList[Rect2Lin(TILE_SIZE,X,(Y + 1))].TileProp != TILE_GROUND)
        {
            Flow = remainingmass - GetStableWaterState(remainingmass + TileList[Rect2Lin(TILE_SIZE,X,(Y + 1))].Mass);
            if (Flow > MinFlow){Flow *= 0.5;}

            int tempB = Min(MaxSpeed, remainingmass);
            if(Flow > tempB){Flow = tempB;}
            if(Flow < 0){Flow = 0;}

            TileList[ID].NewMass -= Flow;
            TileList[Rect2Lin(TILE_SIZE,X,(Y + 1))].NewMass += Flow;
            remainingmass -= Flow;
        }
        ID++;
    }
}

ID = 0;
//Copy the new mass values 
for (int X = 0; X < MAP_WIDTH; X++)
{
    for (int Y = 0; Y < MAP_HEIGHT; Y++)
    {
        TileList[ID].Mass = TileList[ID].NewMass;
        ID++;
    }
}

ID = 0;
for(int X = 0; X < MAP_WIDTH; X++)
{
    for(int Y = 0; Y < MAP_HEIGHT; Y++)
    {
        //Skip ground blocks
        if(TileList[ID].TileProp == TILE_GROUND) continue;

        //Flag/unflag water blocks
        if(TileList[ID].Mass > MinMass)
        {
            TileList[ID].TileProp = TILE_WATER;
        }else
        {
            TileList[ID].TileProp = TILE_AIR;
        }
        ID++;
    }
}

//Remove any water that has left the map
for(int X = 0; X < MAP_WIDTH; X++)
{
    TileList[X].Mass = 0;
    TileList[Rect2Lin(TILE_SIZE,X,MAP_HEIGHT - 1)].Mass = 0;

}

for(int Y = 0; Y < MAP_HEIGHT; Y++)
{
    TileList[Rect2Lin(TILE_SIZE,0,Y)].Mass = 0;
    TileList[Rect2Lin(TILE_SIZE,(MAP_WIDTH - 1),Y)].Mass = 0;
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T06:48:43.067

> 好的，所以 ID 将变为 0，因为在 ID 达到 34 之后它只会留下两个嵌套的 for 循环......为什么会这样做？

```
//Calculate and apply flow for each block
for (int X = 0; X < MAP_WIDTH; X++)
{
    for(int Y = 0; Y < MAP_HEIGHT; Y++)
    {
        //Skip inert ground blocks
        if(TileList[ID].TileProp == TILE_GROUND) continue;

        ...

        ID++;
    }
} 
```

`TileList[34]`可能是地砖。在这一点上，你`if`一遍又一遍地点击它（因为你永远不会到达`ID++`循环的最后），直到你用尽`for`-loops。

试试这个：

```
//Calculate and apply flow for each block
for (int X = 0; X < MAP_WIDTH; X++)
{
    for(int Y = 0; Y < MAP_HEIGHT; Y++)
    {
        int ID = Rect2Lin(TILE_SIZE,X,Y));

        //Skip inert ground blocks
        if(TileList[ID].TileProp == TILE_GROUND) continue;

        ...
    }
} 
```

**编辑**：

好的，这适用于我的系统：

```
#include <GL/glut.h>
#include <vector>

using namespace std;

// simple Eigen::Matrix work-alike
template< typename T >
class Matrix
{
public:
    Matrix( const size_t rows, const size_t cols ) 
        : mStride( cols )
        , mHeight( rows )
        , mStorage( rows * cols ) 
    {}

    T& operator()( const size_t row, const size_t col )
    {
        return mStorage[ row * mStride + col ];
    }

    const T& operator()( const size_t row, const size_t col ) const 
    {
        return mStorage[ row * mStride + col ];
    }

    size_t rows() const { return mHeight; }
    size_t cols() const { return mStride; }

private:
    vector< T > mStorage;
    size_t mStride;
    size_t mHeight;
};

struct Cell
{
    enum Type{ AIR, GROUND, WATER };

    Cell() 
        : mType( AIR )
        , mMass( 0 )
        , mNewMass( 0 )
    {}

    Type mType;
    float mMass;
    float mNewMass;
};

const float MaxMass = 1.0f; 
const float MinMass = 0.0001f; 
const float MaxCompress = 0.02f; 
const float MaxSpeed = 1.0f;
const float MinFlow = 0.01f;

//Take an amount of water and calculate how it should be split among two
//vertically adjacent cells. Returns the amount of water that should be in 
//the bottom cell. 
float get_stable_state_b( float total_mass )
{
    if ( total_mass <= 1 )
    {
        return 1;
    } 
    else if ( total_mass < 2*MaxMass + MaxCompress )
    {
        return (MaxMass*MaxMass + total_mass*MaxCompress)/(MaxMass + MaxCompress);
    } 
    else
    {
        return (total_mass + MaxCompress)/2;
    }
}

template< typename T >
T constrain( const T& val, const T& minVal, const T& maxVal )
{
    return max( minVal, min( val, maxVal ) );
}

typedef Matrix< Cell > State;
void stepState( State& cur )
{
    for( size_t y = 1; y < cur.rows()-1; ++y )
    {
        for( size_t x = 1; x < cur.cols()-1; ++x )
        {
            Cell& center = cur( y, x );

            // Skip inert ground blocks
            if( center.mType == Cell::GROUND )
                continue;

            // Custom push-only flow
            float Flow = 0;
            float remaining_mass = center.mMass;
            if( remaining_mass <= 0 )
                continue;

            // The block below this one
            Cell& below = cur( y-1, x );
            if( below.mType != Cell::GROUND )
            {
                Flow = get_stable_state_b( remaining_mass + below.mMass ) - below.mMass;
                if( Flow > MinFlow )
                {
                    //leads to smoother flow
                    Flow *= 0.5;
                }
                Flow = constrain( Flow, 0.0f, min(MaxSpeed, remaining_mass) );

                center.mNewMass -= Flow;
                below.mNewMass += Flow;
                remaining_mass -= Flow;
            }

            if ( remaining_mass <= 0 ) 
                continue;

            // Left
            Cell& left = cur( y, x-1 );
            if ( left.mType != Cell::GROUND )
            {
                // Equalize the amount of water in this block and it's neighbour
                Flow = ( center.mMass - left.mMass ) / 4;
                if ( Flow > MinFlow )
                {
                    Flow *= 0.5;
                }
                Flow = constrain(Flow, 0.0f, remaining_mass);
                center.mNewMass -= Flow;
                left.mNewMass += Flow;
                remaining_mass -= Flow;
            }

            if ( remaining_mass <= 0 ) 
                continue;

            // Right
            Cell& right = cur( y, x+1 );
            if ( right.mType != Cell::GROUND )
            {
                // Equalize the amount of water in this block and it's neighbour
                Flow = ( center.mMass - right.mMass ) / 4;
                if ( Flow > MinFlow )
                {
                    Flow *= 0.5;
                }
                Flow = constrain(Flow, 0.0f, remaining_mass);
                center.mNewMass -= Flow;
                right.mNewMass += Flow;
                remaining_mass -= Flow;
            }

            if ( remaining_mass <= 0 ) 
                continue;

            // The block above this one
            Cell& above = cur( y+1, x );
            if( above.mType != Cell::GROUND )
            {
                Flow = remaining_mass - get_stable_state_b( remaining_mass + above.mMass );
                if( Flow > MinFlow )
                {
                    //leads to smoother flow
                    Flow *= 0.5;
                }
                Flow = constrain( Flow, 0.0f, min(MaxSpeed, remaining_mass) );

                center.mNewMass -= Flow;
                above.mNewMass += Flow;
                remaining_mass -= Flow;
            }
        }
    }

    for( size_t y = 0; y < cur.rows(); ++y )
    {
        for( size_t x = 0; x < cur.cols(); ++x )
        {
            cur( y, x ).mMass = cur( y, x ).mNewMass;
        }
    }

    for( size_t y = 0; y < cur.rows(); ++y )
    {
        for( size_t x = 0; x < cur.cols(); ++x )
        {
            Cell& center = cur( y, x );
            if( center.mType == Cell::GROUND ) 
            {
                center.mMass = center.mNewMass = 0.0f;
                continue;
            }
            if( center.mMass > MinMass )
            {
                center.mType = Cell::WATER;
            }
            else
            {
                center.mType = Cell::AIR;
                center.mMass = 0.0f;
            }
        }
    }

    // Remove any water that has left the map
    for( size_t x = 0; x < cur.cols(); ++x )
    {
        cur( 0, x ).mMass = 0;
        cur( cur.rows()-1, x ).mMass = 0;
    }
    for( size_t y = 0; y < cur.rows(); ++y )
    {
        cur( y, 0 ).mMass = 0;
        cur( y, cur.cols()-1 ).mMass = 0;
    }
}

void showState( const State& state )
{
    glPolygonMode( GL_FRONT, GL_LINE );
    glBegin( GL_QUADS );
    glColor3ub( 0, 0, 0 );
    for( size_t y = 0; y < state.rows(); ++y )
    {
        for( size_t x = 0; x < state.cols(); ++x )
        {
            glVertex2f( x+0, y+0 );
            glVertex2f( x+1, y+0 );
            glVertex2f( x+1, y+1 );
            glVertex2f( x+0, y+1 );
        }
    }
    glEnd();

    glPolygonMode( GL_FRONT, GL_FILL );
    glBegin( GL_QUADS );
    for( size_t y = 0; y < state.rows(); ++y )
    {
        for( size_t x = 0; x < state.cols(); ++x )
        {
            if( state( y, x ).mType == Cell::AIR )
                continue;

            float height = 1.0f;
            if( state( y, x ).mType == Cell::GROUND )
            {
                glColor3ub( 152, 118, 84 );
            }
            else
            {
                glColor3ub( 0, 135, 189 );
                height = min( 1.0f, state( y, x ).mMass );
            }

            glVertex2f( x+0, y );
            glVertex2f( x+1, y );
            glVertex2f( x+1, y + height );
            glVertex2f( x+0, y + height );
        }
    }
    glEnd();
}

State state( 20, 20 );
void mouse( int button, int button_state, int x, int y )
{
    float pctX = (float)x / glutGet( GLUT_WINDOW_WIDTH );
    float pctY = 1.0f - ( (float)y / glutGet( GLUT_WINDOW_HEIGHT ) );
    size_t cellX = pctX * state.cols();
    size_t cellY = pctY * state.rows();
    Cell& cur = state( cellY, cellX );

    if( button_state == GLUT_UP )
        return;

    if( button == GLUT_LEFT_BUTTON )
    {
        cur.mType = ( cur.mType == Cell::GROUND ? Cell::AIR : Cell::GROUND );
        cur.mMass = cur.mNewMass = 0.0f;
    }

    if( button == GLUT_RIGHT_BUTTON )
    {
        cur.mType = Cell::WATER;
        cur.mMass = cur.mNewMass = 1.0f;
    }
}

void display()
{
    static bool firstTime = true;
    if( firstTime )
    {
        firstTime = false;
        for( size_t y = 0; y < state.rows(); ++y )
        {
            for( size_t x = 0; x < state.cols(); ++x )
            {
                state( y, x ).mType = (Cell::Type)( rand() % 3 );
                state( y, x ).mMass = 1.0f;
                state( y, x ).mNewMass = 1.0f;
            }
        }  
    }

    glClearColor( 1, 1, 1, 1 );
    glClear( GL_COLOR_BUFFER_BIT );

    glMatrixMode( GL_PROJECTION );
    glLoadIdentity();
    glOrtho( 0, state.cols(), 0, state.rows(), -1, 1);

    glMatrixMode( GL_MODELVIEW );
    glLoadIdentity();

    stepState( state );
    showState( state );

    glutSwapBuffers();
}

void timer(int extra)
{
    glutPostRedisplay();
    glutTimerFunc(16, timer, 0);
}

int main( int argc, char **argv )
{
    glutInit( &argc, argv );
    glutInitDisplayMode( GLUT_RGBA | GLUT_DOUBLE );
    glutInitWindowSize( 640, 480 );
    glutCreateWindow( "Cells" );
    glutDisplayFunc( display );
    glutMouseFunc( mouse );
    glutTimerFunc(0, timer, 0);
    glutMainLoop();
    return 0;
} 
```

# matlab - Matlab+图论+比重分配

> ID：13198769
> 
> 赞同：0
> 
> 时间：2012-11-02T15:55:49.817
> 
> 标签：matlab, graph-theory, weighted

我想为边缘分配权重，使得（到达节点的权重）的总和与其自身的权重相加。

这是我尝试过的：

```
 clear all;
    close all;
    clc;
    %% building the graph
    g=graph;
    for k=1:6

     add(g,k,k+1)
     add(g,1,4)
     add(g,5,7)
    end
    %%assigining the statuses 0 and 1
    %label(g,1,'0');
    %label(g,2,'1');
    %label(g,3,'1');
    %label(g,4,'1');
    %label(g,5,'1');
    %label(g,6,'0');
    %label(g,7,'0');
    figure,ldraw(g);
    %x=rand(1,1);
    %y=rand(1,1)
    %% get line info from the figure
    lineH = findobj(gca, 'type', 'line');
    xData = cell2mat(get(lineH, 'xdata')); % get x-data
    yData = cell2mat(get(lineH, 'ydata')); % get y-data

    %% if an edge is between (x1,y1)<->(x2,y2), place a label at
    %%the center of the line, i.e. (x1+x2)/2 (y1+y2)/2 etc
    labelposx=mean(xData');
    labelposy=mean(yData');

    %% generate some random weights vectori.e. the probability matrix
    weights=rand(1,1,length(labelposx)) 

    % plot the weights on top of the figure
    text(labelposx,labelposy,mat2cell(weights), 'HorizontalAlignment','center',... 
                                        'BackgroundColor',[.7 .9 .7]);
    %%Transition matrix or markov matrix
    % Transition=[0 (1,2) 0 (1,4) 0 0 0;
    %    (2,1) 0 (2,3) 0 0 0 0;
    %    0 (3,2) 0 (3,4) 0 0 0;
    %    0 0 (4,3) 0 (4,5) 0 0;
    %    0 0 0 (5,4) 0 (5,6) (5,7);
    %    0 0 0 0 (6,5) 0 (6,7);
    %    0 0 0 0 (7,5) (7,6) 0];

    Transition= [0 weights(:,:,8) 0 weights(:,:,6) 0 0 0;
    weights(:,:,8) 0 weights(:,:,7) 0 0 0 0;
    0 weights(:,:,7) 0 weights(:,:,5) 0 0 0;
    weights(:,:,6) 0 weights(:,:,5) 0 weights(:,:,4) 0 0;
    0 0 0 weights(:,:,4) 0 weights(:,:,3) weights(:,:,2);
    0 0 0 0 weights(:,:,3) 0 weights(:,:,1);
    0 0 0 0 weights(:,:,2) weights(:,:,1) 0]
    %set_matrix
    %%dij-- Probability matrix
    sparse(Transition);
    d=[weights(:,:,8);weights(:,:,7);weights(:,:,5);weights(:,:,4);
     weights(:,:,3);weights(:,:,1);weights(:,:,1)]
    %%Si[k]-- matrix of the statuses(labels)
    %S=[0 1 1 1 1 0 0] 
```

![图形](../Images/4c6f53935499f0efad93f883c707b761.png)

例如：节点四的权重相加，加上它自己的权重应该等于1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T00:05:34.450

查看这个[带有固定总和](http://www.mathworks.com/matlabcentral/fileexchange/9700-random-vectors-with-fixed-sum)FEX 文件的漂亮随机向量生成器。我想这会回答你的问题。另请参阅此 SO 链接[Non biased return a list of n random positive numbers (>=0) so they sum == total_sum](https://stackoverflow.com/questions/3959021/non-biased-return-a-list-of-n-random-positive-numbers-0-so-that-their-sum)

# jenkins - Jenkins：在 RVM 环境中进行测试失败

> ID：13198770
> 
> 赞同：1
> 
> 时间：2012-11-02T15:55:51.023
> 
> 标签：jenkins, rvm

我在主机（Windows）上安装了 Jenkins，并与 Ubuntu 机器（Ubuntu 12.04）上的节点连接。它们已经一起运行了好几个月，但是几周前我开始遇到特定 Rails 项目的问题，这些项目应该在 Ubuntu 机器上运行测试。尽管已经安装了它，但它开始需要一些 rb-readline gem。

所以我决定将 /var/lib/jenkins/.rvm 目录移动到其他位置以强制重新安装 RVM。然后我从 Jenkins 中删除了 RVM 插件并再次添加它。毕竟，我让它重新安装了 RVM，但现在它无法在 RVM 环境中执行任何任务。如果我取消选中“在 RVM 管理的环境中运行构建”选项，则可以完成任务而不会出现错误（如果我删除了特定的构建步骤），但是如果设置了此选项，它甚至无法运行简单的`echo test`命令。

我将移动的 .rvm 目录返回到 /var/lib/jenkins/，但这无助于恢复所有内容。

这是错误消息（您可能会询问`/var/lib/jenkins/workspace/my-project`目录 - 是的，它存在）：

```
Started by user Name Name
Building remotely on Web tests in workspace /var/lib/jenkins/workspace/my-project
Checkout:my-project / /var/lib/jenkins/workspace/my-project - hudson.remoting.Channel@299bf5:Web tests
Using strategy: Default
Last Built Revision: Revision c595dcs8fthse8tw985t80wt5bst6volw8ebtt9g (origin/master)
Checkout:my-project / /var/lib/jenkins/workspace/my-project - hudson.remoting.LocalChannel@48283482
Fetching changes from 1 remote Git repository
Fetching upstream changes from https://TheUser:ThePassword@github.com/MyFirm/my-project.git
Commencing build of Revision c595dcs8fthse8tw985t80wt5bst6volw8ebtt9g (origin/master)
Checking out Revision c595dcs8fthse8tw985t80wt5bst6volw8ebtt9g (origin/master)
Capturing environment variables produced by 'rvm use 1.9.3'
$ bash -c export
$ bash -c "test ! -f ~/.rvm/scripts/rvm"
[my-project] $ bash -c "source ~/.rvm/scripts/rvm && rvm_install_on_use_flag=1 && rvm use --create 1.9.3 && export > rvm.env"
FATAL: Native Exception: 'class java.io.IOException'; Message: Cannot run program "bash" (in directory "\var\lib\jenkins\workspace\my-project"): java.io.IOException: error=2, No such file or directory; StackTrace: java.io.IOException: Cannot run program "bash" (in directory "\var\lib\jenkins\workspace\my-project"): java.io.IOException: error=2, No such file or directory
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:475)
    at hudson.Proc$LocalProc.<init>(Proc.java:244)
    at hudson.Proc$LocalProc.<init>(Proc.java:216)
    at hudson.Launcher$LocalLauncher.launch(Launcher.java:707)
    at hudson.Launcher$ProcStarter.start(Launcher.java:338)
Caused by: java.io.IOException: java.io.IOException: error=2, No such file or directory
    at java.lang.UNIXProcess.<init>(UNIXProcess.java:164)
    at java.lang.ProcessImpl.start(ProcessImpl.java:81)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:468)
    at hudson.Proc$LocalProc.<init>(Proc.java:244)
    at hudson.Proc$LocalProc.<init>(Proc.java:216)
    at hudson.Launcher$LocalLauncher.launch(Launcher.java:707)
    at hudson.Launcher$ProcStarter.start(Launcher.java:338)
    at hudson.Launcher$RemoteLaunchCallable.call(Launcher.java:932)
    at hudson.Launcher$RemoteLaunchCallable.call(Launcher.java:899)
    at hudson.remoting.UserRequest.perform(UserRequest.java:118)
    at hudson.remoting.UserRequest.perform(UserRequest.java:48)
    at hudson.remoting.Request$2.run(Request.java:287)
    at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679)

org.jruby.exceptions.RaiseException: Native Exception: 'class java.io.IOException'; Message: Cannot run program "bash" (in directory "\var\lib\jenkins\workspace\my-project"): java.io.IOException: error=2, No such file or directory; StackTrace: java.io.IOException: Cannot run program "bash" (in directory "\var\lib\jenkins\workspace\my-project"): java.io.IOException: error=2, No such file or directory
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:475)
    at hudson.Proc$LocalProc.<init>(Proc.java:244)
    at hudson.Proc$LocalProc.<init>(Proc.java:216)
    at hudson.Launcher$LocalLauncher.launch(Launcher.java:707)
    at hudson.Launcher$ProcStarter.start(Launcher.java:338)
Caused by: java.io.IOException: java.io.IOException: error=2, No such file or directory
    at java.lang.UNIXProcess.<init>(UNIXProcess.java:164)
    at java.lang.ProcessImpl.start(ProcessImpl.java:81)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:468)
    at hudson.Proc$LocalProc.<init>(Proc.java:244)
    at hudson.Proc$LocalProc.<init>(Proc.java:216)
    at hudson.Launcher$LocalLauncher.launch(Launcher.java:707)
    at hudson.Launcher$ProcStarter.start(Launcher.java:338)
    at hudson.Launcher$RemoteLaunchCallable.call(Launcher.java:932)
    at hudson.Launcher$RemoteLaunchCallable.call(Launcher.java:899)
    at hudson.remoting.UserRequest.perform(UserRequest.java:118)
    at hudson.remoting.UserRequest.perform(UserRequest.java:48)
    at hudson.remoting.Request$2.run(Request.java:287)
    at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679)

    at java.lang.ProcessBuilder.start(ProcessBuilder.java:475)
    at hudson.Proc$LocalProc.<init>(Proc.java:244)
    at hudson.Proc$LocalProc.<init>(Proc.java:216)
    at hudson.Launcher$LocalLauncher.launch(Launcher.java:707)
    at hudson.Launcher$ProcStarter.start(Launcher.java:338)
Caused by: java.io.IOException: Cannot run program "bash" (in directory "\var\lib\jenkins\workspace\my-project"): java.io.IOException: error=2, No such file or directory
    ... 5 more
Caused by: java.io.IOException: java.io.IOException: error=2, No such file or directory
    at java.lang.UNIXProcess.<init>(UNIXProcess.java:164)
    at java.lang.ProcessImpl.start(ProcessImpl.java:81)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:468)
    at hudson.Proc$LocalProc.<init>(Proc.java:244)
    at hudson.Proc$LocalProc.<init>(Proc.java:216)
    at hudson.Launcher$LocalLauncher.launch(Launcher.java:707)
    at hudson.Launcher$ProcStarter.start(Launcher.java:338)
    at hudson.Launcher$RemoteLaunchCallable.call(Launcher.java:932)
    at hudson.Launcher$RemoteLaunchCallable.call(Launcher.java:899)
    at hudson.remoting.UserRequest.perform(UserRequest.java:118)
    at hudson.remoting.UserRequest.perform(UserRequest.java:48)
    at hudson.remoting.Request$2.run(Request.java:287)
    at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679) 
```

在这台 Ubuntu 机器上直接安装了另一个 Jenkins 实例，如果我运行这个项目的构建，它会给我一个输出，就像之前损坏的 Jenkins 实例一样：`Please 'gem install rb-readline' or recompile ruby --with-readline`但不会抱怨 Java。因此，在 Ubuntu 网站上，一切似乎都没有损坏。

# c++ - 无法使用 SDL 线程

> ID：13198778
> 
> 赞同：0
> 
> 时间：2012-11-02T15:56:03.970
> 
> 标签：c++, multithreading, sdl

我正在使用带有 SDL 的 Visual Studio 2012，并且正在执行一个简单的线程任务，但我总是收到以下错误：

```
argument of type "int (mainGame::*)(void *ptr)" is incompatible with parameter of type "int (__cdecl *)(void *)" 
```

我得到的另一个错误：

```
error C3867: 'mainGame::gameEvents': function call missing argument list; use '&mainGame::gameEvents' to create a pointer to member 
```

函数是这样写的：

```
int gameEvents(void *ptr){
   //do things here.
return 0;
} 
```

这是我用来调用函数的代码：

```
SDL_Thread* gh;  
 gh = SDL_CreateThread(gameEvents,NULL); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:00:17.080

由于您使用的是 C++，因此您需要使用 C 链接声明您的函数，因为这是 SDL 所期望的，它本身就是一个 C 库：

```
extern "C" int gameEvents(void *ptr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T20:23:22.357

更改`gameEvents()`为`static`。否则，您的成员函数将为`this`指针提供一个“隐藏的”第一个参数，而 SDL 等 C API 不知道。

如果您需要访问实例数据，请执行以下操作：

```
static int mainGame::gameEvents(void *ptr)
{
   mainGame* game = (mainGame*)ptr;
   //do things here.
   return 0;
}

...

mainGame game;
SDL_Thread* gh;  
gh = SDL_CreateThread( mainGame::gameEvents, &game ); 
```

# javascript - 原型继承两次调用构造函数

> ID：13198782
> 
> 赞同：7
> 
> 时间：2012-11-02T15:56:26.630
> 
> 标签：javascript, inheritance, prototypal-inheritance

我正在开发一个使用原型继承的 JavaScript 项目。我决定使用它的方式如下：

```
var MySuperClass = function (param) {
    this.prop = param;
};
MySuperClass.prototype.myFunc = function () {
    console.log(this.prop);
};

var MySubClass = function (param) {
    MySuperClass.call(this, param);
};
MySubClass.prototype = new MySuperClass();
MySubClass.prototype.constructor = MySubClass;

var obj = new MySubClass('value');
obj.myFunc(); 
```

强调继承。

问题在于，如果我在每个类（超类和子类）的构造函数中放置一个 console.log，超类会被调用两次，一次是在`MySubClass.prototype = new MySuperClass();`没有任何参数的情况下传递给子类，一次是有参数当它在子类的构造函数中是“构造函数被盗”时。

如果我随后尝试保存这些参数，这可能会导致错误（这意味着我必须添加逻辑来处理空参数）。

现在，如果我这样做：

```
var MySubClass = function (param) {
    MySuperClass.call(this, param);
};
MySubClass.prototype = MySuperClass;
MySubClass.prototype.constructor = MySubClass; 
```

一切似乎都正常，但我以前从未见过有人这样做（在我的谷歌搜索中）。

任何人都可以向我解释第二个是否以及如何不正确（它似乎类似于 Crockford 继承函数）以及如何修复第一个不触发两次，如果可以的话？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T16:06:10.233

这样做不是正确的解决方案：

```
MySubClass.prototype = MySuperClass; 
```

您将函数本身设置为原型而不是原型对象，因此您不会继承您所期望的。

* * *

但你是对的。这样做会调用构造函数，这可能会导致问题。

```
MySubClass.prototype = new MySuperClass(); 
```

* * *

解决方案是使用`Object.create`设置继承。它为您提供了一个继承自提供的对象的新对象，但不调用任何构造函数。

```
MySubClass.prototype = Object.create(MySuperClass.prototype); 
```

现在您有一个分配给`MySubClass.prototype`继承自的对象`MySuperClass.prototype`，但您不必实际调用构造函数。

* * *

不符合 ES5 的实现将不支持`Object.create`，但您可以为其制作*（部分）*垫片。

```
if (!Object.create) {
    Object.create = function(proto) {
        function F(){}
        F.prototype = proto;
        return new F();
    };
} 
```

同样，这不是一个完整的 shim，但它的模拟刚好足以生成继承的对象，而无需调用引用原型对象的构造函数。

# spring - 不能将 @Qualifier 与 @Inject 和 autowire="byType" 一起使用

> ID：13198784
> 
> 赞同：0
> 
> 时间：2012-11-02T15:56:32.410
> 
> 标签：spring, autowired, inject, qualifiers

我有bean配置：

```
<bean id="PostLoginUpdater" class="xyz.auth.PostLoginUpdater" autowire="byType" /> 
```

和

```
public class PostLoginUpdater implements PostLoginStatePersonalizer {

    //@Qualifier("CustomerManager")
    @Inject
    //@Resource(name = "CustomerManager")      
    private CustomerManager customerManager;

    public void setCustomerManager(CustomerManager customerManager)
    {
        this.customerManager = customerManager;
    }
} 
```

因为有两个 bean 实现了 CustomerManager 我得到这个错误：

> 没有定义类型 [CustomerManager] 的唯一 bean：预期单个匹配 bean 但找到 2

如您所见，我尝试了几种组合（@Inject 和@Qualifier、@Ressource，只有@Qualifier）但我没有摆脱这个错误消息。

根据 Spring In Depth，[@Qualifier 可以与 @Inject 一起使用](http://www.springindepth.com/book/annotation-based-bean-config-dependency-injection.html)。如果我在 bean 配置中定义了 autowire="byType"，我不能一起使用它们吗？

而且我不使用`<context:annotation-config />`或`<context:component-scan />`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:01:04.523

如果您有多个相同类型的 bean，您应该能够使用“@Inject”和“@Qualifier”的组合。这是如何配置它 -

```
 <bean id="PostLoginUpdater" class="xyz.auth.PostLoginUpdater" autowire="byType" />
<bean id="firstManager" class="xyz.manager.CustomerManager" autowire="byType" >
    <qualifier>first</qualifier>
</bean>
<bean id="secondManager" class="xyz.manager.CustomerManager" autowire="byType" >
    <qualifier>second</qualifier>
</bean> 
```

如果您有两个 'CustomerManager' 类型的 bean，如上所示，您可以使用下面显示的代码段进行注入 -

```
 public class PostLoginUpdater implements PostLoginStatePersonalizer {

    @Inject
    @Qualifier("first")
    private CustomerManager customerManager;

    public void setCustomerManager(CustomerManager customerManager)
    {
        this.customerManager = customerManager;
    }
} 
```

另外，在旁注中 -

如果您继续使用其中一个 bean 比另一个更频繁，您可以使用 'primary' 属性。

例如，在上面的示例中，如果您总是倾向于使用“firstManager”，则可以将其标记为主要，如下所示。

```
<bean id="PostLoginUpdater" class="xyz.auth.PostLoginUpdater" autowire="byType" />
    <bean id="firstManager" class="xyz.manager.CustomerManager" autowire="byType" primary="true" >
    </bean>
    <bean id="secondManager" class="xyz.manager.CustomerManager" autowire="byType" >
        <qualifier>second</qualifier>
    </bean> 
```

如果您有上述配置，以下代码将在不使用限定符时始终注入“firstManager” -

```
public class PostLoginUpdater implements PostLoginStatePersonalizer {

    @Inject
    private CustomerManager customerManager;

    public void setCustomerManager(CustomerManager customerManager)
    {
        this.customerManager = customerManager;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T17:47:54.117

过去我在尝试将@Qualifier 与@Inject 一起使用时也遇到了麻烦。需要注意的一点是，有两个具有该名称的注解，一个在 Spring 中，一个在 Java 中：

```
org.springframework.beans.factory.annotation.Qualifier
javax.inject.Qualifier 
```

但是，如果使用 spring 框架之一，那么建议的用法是通过 @Component 或 @Named [@Component("beanName")] （如果已注释）或在`<bean>`定义中显式命名您的组件。请注意，自动装配需要 bean 名称，而不是示例中的类名称（即不要使用“CustomerManager”）。例如，如果您有两个像 Sashi 示例中的 bean 定义：

```
<bean id="firstManager" class="xyz.manager.CustomerManager" autowire="byType" >
    <qualifier>first</qualifier>
</bean>
<bean id="secondManager" class="xyz.manager.CustomerManager" autowire="byType" >
    <qualifier>second</qualifier>
</bean> 
```

然后像这样声明该字段：

```
@Inject
@Qualifier("firstManager") 
private CustomerManager customerManager; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T16:02:50.663

尝试按类型自动装配并同时指定名称没有任何意义。选择一种方法或另一种方法。

# wpf - 非扩展文本框/滚动查看器

> ID：13198789
> 
> 赞同：0
> 
> 时间：2012-11-02T15:56:35.383
> 
> 标签：wpf, xaml

我正在尝试将 TextBox 控件放置在一个相当大的面板中（使用 GridSplitter）。

我遇到的第一个问题是，当输入的文本变长时，TextBox 会自动调整大小。我在这个站点上找到了一个解决方案，它用边框包装 TextBox，然后将 TextBox 的宽度设置为边框的宽度（如下面的 XAML 所示）。这似乎工作。我提到这一点，以防它是我正在寻求帮助的问题的原因。

当前的问题是 TextBox 调整大小，但 ScrollViewer 在面板调整大小时立即启动。我想看到的是当 TextBox 缩小到最小宽度（而不是之前）时，ScrollViewer 会启动。

我目前使用的完整 XAML 如下所示。

```
<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" x:Class="NonExpandingTextBoxDemo.MainWindow" Height="350" Title="MainWindow" Width="525">
  <Grid>
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="Auto" />
      <ColumnDefinition Width="Auto" />
      <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
      <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <ScrollViewer Grid.Column="0" Grid.Row="0" HorizontalAlignment="Stretch" HorizontalScrollBarVisibility="Auto" VerticalAlignment="Stretch" VerticalScrollBarVisibility="Auto">
      <Border HorizontalAlignment="Stretch" Margin="20, 20, 20, 20" MinWidth="100" VerticalAlignment="Center">
        <TextBox Width="{Binding Mode=OneWay, Path=ActualWidth, RelativeSource={RelativeSource AncestorType={x:Type Border}, Mode=FindAncestor}}" />
      </Border>
    </ScrollViewer>
    <GridSplitter Grid.Column="1" Grid.Row="0" ResizeBehavior="PreviousAndNext" VerticalAlignment="Stretch" Width="3" />
    <TextBlock Grid.Column="2" Grid.Row="0" HorizontalAlignment="Center" Text="Right Panel" VerticalAlignment="Center" />
  </Grid>
</Window> 
```

问题是我错过了什么？我尝试了几件事，但似乎没有任何效果。

预先感谢您对此问题的任何指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-10T13:31:57.903

我的情况类似。我有一个滚动查看器包裹一个网格，我需要 TexBlock 与列一起展开并包裹文本。我能够通过创建一个转换器来实现这一点。

```
public class ValueConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        int width;

        if (int.TryParse(value.ToString(), out width) && width > 0)
        {
            return width - int.Parse(parameter.ToString());
        }

        return 0;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

包含 ScrollViewer 的名称是“scrollViewerDetails”，因此我将其宽度传递给转换器。ConverterParamter (170) 是我需要从总宽度中减去的第一列的宽度。

```
<TextBox Grid.Column="1" Grid.Row="4" HorizontalAlignment="Stretch"  Width="{Binding ElementName=scrollViewerDetails, Path=ActualWidth, Converter={StaticResource ValueConverter}, ConverterParameter=170}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:38:21.660

问题是 ScrollViewer。看，ScrollViewer 没有配置为在它变小时调整其子级的大小，而只是变大了。因此，您会看到子元素会增长但不会缩小。

为什么需要 ScrollViewer？

```
<Window x:Class="TextWrappingAtParentSize.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Name="FirstCol" MinWidth="100" Width="Auto" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
            <Border VerticalAlignment="Center" Margin="20, 20, 20, 20" >
                <TextBox Width="{Binding Mode=OneWay, Path=ActualWidth, RelativeSource={RelativeSource AncestorType={x:Type Border}, Mode=FindAncestor}}" TextWrapping="Wrap"/>
            </Border>
        <GridSplitter Grid.Column="1" Grid.Row="0" ResizeBehavior="PreviousAndCurrent" VerticalAlignment="Stretch" Width="3" />
        <TextBlock Grid.Column="2" Grid.Row="0" HorizontalAlignment="Center" Text="Right Panel" VerticalAlignment="Center" />
    </Grid>
</Window> 
```

通过将 MinWidth 放在列上，可能永远不需要滚动。但是，我意识到这可能只是一个示例，您可能还有其他需要滚动。

我可以继续寻找滚动解决方案。让我知道。

# java - 为什么我使用这个二叉树的概率如此之远？

> ID：13198795
> 
> 赞同：4
> 
> 时间：2012-11-02T15:56:52.287
> 
> 标签：java, queue, binary-tree, huffman-code

它基本上只是霍夫曼编码算法的一个实现，但是当我检查结束 BinaryTree（队列中唯一的项目）的概率时，它非常高。

```
// Make a BinaryTree for each item in CharOccurrences and add as an entry in initialQueue
for (int i = 0; i < charOccurrences.size(); i++) {
  BinaryTree<CharProfile> bTree = new BinaryTree<CharProfile>();
  bTree.makeRoot(charOccurrences.get(i));
  initialQueue.add(bTree);
}

// Create the BinaryTree that we're adding to the resultQueue
BinaryTree<CharProfile> treeMerge = new BinaryTree<CharProfile>();

// Create the CharProfile that will hold the probability of the two merged trees
CharProfile data;

while (!initialQueue.isEmpty()) {
  // Check if the resultQueue is empty, in which case we only need to look at initialQueue
  if (resultQueue.isEmpty()) {
    treeMerge.setLeft(initialQueue.remove());
    treeMerge.setRight(initialQueue.remove());

    // Set treeMerge's data to be the sum of its two child trees' probabilities with a null char value
    data = new CharProfile('\0');
    data.setProbability(treeMerge.getLeft().getData().getProbability() + treeMerge.getRight().getData().getProbability());
    treeMerge.setData(data);
  }
  else {
    // Set the left part of treeMerge to the lowest of the front of the two queues
    if (initialQueue.peek().getData().getProbability() <= resultQueue.peek().getData().getProbability()) {
      treeMerge.setLeft(initialQueue.remove());
    }
    else {
      treeMerge.setLeft(resultQueue.remove());
    }

    if (!initialQueue.isEmpty()) {
      // Set the right part of treeMerge to the lowest of the front of the two queues
      if (initialQueue.peek().getData().getProbability() <= resultQueue.peek().getData().getProbability()) {
        treeMerge.setRight(initialQueue.remove());
      }
      else {
        treeMerge.setRight(resultQueue.remove());
      }
    }
    // In the case that initialQueue is now empty (as a result of just dequeuing the last element), simply make the right tree resultQueue's head
    else {
      treeMerge.setRight(resultQueue.remove());
    }

    // Set treeMerge's data to be the sum of its two child trees' probabilities with a null char value
    data = new CharProfile('\0');
    data.setProbability(treeMerge.getLeft().getData().getProbability() + treeMerge.getRight().getData().getProbability());
    treeMerge.setData(data);
  }

  // Add the new tree we create to the resultQueue
  resultQueue.add(treeMerge);
}

if (resultQueue.size() > 1) {
  while (resultQueue.size() != 1) {
    treeMerge.setLeft(resultQueue.remove());
    treeMerge.setRight(resultQueue.remove());

    data = new CharProfile('\0');
    data.setProbability(treeMerge.getLeft().getData().getProbability() + treeMerge.getRight().getData().getProbability());
    treeMerge.setData(data);

    resultQueue.add(treeMerge); 
  }
} 
```

然后我最后有这个：

```
System.out.println("\nProbability of end tree: " 
    + resultQueue.peek().getData().getProbability()); 
```

这给了我：

> 结束树的概率：42728.31718061674

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T18:28:37.570

在 while 循环内移动以下行：

```
// Create the BinaryTree that we're adding to the resultQueue
BinaryTree<CharProfile> treeMerge = new BinaryTree<CharProfile>(); 
```

否则，一次迭代会添加`treeMerge`到`resultQueue`，而下一次可能会添加`treeMerge.setLeft(resultQueue.remove());`，这使得`treeMerge`它自己成为一个孩子......

# sql - 删除重复的批次数据

> ID：13198805
> 
> 赞同：1
> 
> 时间：2012-11-02T15:57:15.180
> 
> 标签：sql, sql-server, sql-server-2008

由于我的应用程序中的一个错误，为承载每个交付周期的每日记录而构建的表格被填充了很多次。

假设我从 6 月 1 日到 6 月 5 日有交货。我的表应该填充 5 条记录，每天一条。现在，我受到了严重破坏，因为我有许多相同内容的“批次”。

表格布局如下：

```
dummy_id       -- identity column
delivery_id    -- id of the delivery
on_date        -- the day
charge         -- the daily cost 
```

有没有一种优雅的方法来只保留第一批记录并删除所有交付时错误插入的批次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:04:04.183

删除所有重复项以`delivery_id, on_date, charge`保留最低的重复项`dummy_id`

```
;WITH cte
     AS (SELECT ROW_NUMBER() OVER (PARTITION BY delivery_id,
                                                on_date,
                                                charge
                                       ORDER BY dummy_id) RN
         FROM   YourTable)
DELETE FROM cte
WHERE  RN > 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:05:17.553

你可以试试：

这是为了知道您将删除哪些行：

```
SELECT * FROM YOUR_TABLE WHERE DUMMY_ID NOT IN (
   SELECT MIN(DUMMY_ID) FROM YOUR_TABLE GROUP BY DELIVERY_ID) 
```

这将删除这些行：

```
DELETE FROM YOUR_TABLE WHERE DUMMY_ID NOT IN (
   SELECT MIN(DUMMY_ID) FROM YOUR_TABLE GROUP BY DELIVERY_ID) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T16:06:34.843

尝试

```
DELETE FROM table WHERE dummy_id NOT IN (SELECT MIN(dummy_id) FROM table GROUP BY on_date) 
```

# sql - 具有两阶段匹配的 SQL 合并

> ID：13198812
> 
> 赞同：1
> 
> 时间：2012-11-02T15:57:38.643
> 
> 标签：sql, sql-server

我想在以下基础上使用 SQL Server 合并两个表：

```
IF the primary key (Operation) matches THEN
    If Source Date Matches Target Date
        Do nothing
    Else
        SET Target Revised_Date to Source Date
Else
    Insert Target Row from Source Row 
```

我在下面构建了一个 SQL 合并，它执行第一阶段，但看不到如何执行第二阶段。

```
MERGE 
    Completed_Operations AS target
USING 
    @Completed_Operation_Table AS source ON (target.Operation = source.Operation)
WHEN MATCHED THEN 
    UPDATE 
    SET target.Revised_Completion_Date  = source.Completion_Date,
            target.Revised_Pln_Hrs          = source.Pln_Hrs,
            target.Revised_Pln_Hrs_Capped   = source.Pln_Hrs_Capped,
            target.Revised_Act_Hrs          = source.Act_Hrs
WHEN NOT MATCHED THEN   
    INSERT (Operation, Orig_Completion_Date, Orig_Pln_Hrs, Orig_Act_Hrs, Revised_Completion_Date, Revised_Pln_Hrs, Revised_Act_Hrs)
    VALUES (source.Operation, source.Completion_Date, source.Pln_Hrs, source.Act_Hrs, NULL, NULL, NULL); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T21:36:51.430

在 WHEN 子句中可以添加附加条件

```
MERGE
Completed_Operations AS target
USING 
@Completed_Operation_Table AS source ON (target.Operation = source.Operation)
WHEN MATCHED AND (source.Date <> target.Date) THEN
  UPDATE 
    SET target.Revised_Completion_Date  = source.Completion_Date,
        target.Revised_Pln_Hrs          = source.Pln_Hrs,
        target.Revised_Pln_Hrs_Capped   = source.Pln_Hrs_Capped,
        target.Revised_Act_Hrs          = source.Act_Hrs
WHEN NOT MATCHED THEN
  INSERT (Operation, Orig_Completion_Date, Orig_Pln_Hrs, Orig_Act_Hrs, Revised_Completion_Date, Revised_Pln_Hrs, Revised_Act_Hrs)
  VALUES (source.Operation, source.Completion_Date, source.Pln_Hrs, source.Act_Hrs, NULL, NULL, NULL); 
```

# python - 有没有办法在 Python 中函数的每一行上装饰/执行操作？

> ID：13198821
> 
> 赞同：3
> 
> 时间：2012-11-02T15:58:14.793
> 
> 标签：python, metaprogramming, decorator, python-decorators, self-modifying

假设我有一个函数或方法在执行它所做的每个操作之前执行重复的操作，例如检查值，如下所示：

```
def myfunc():
    if mybool:
        do_operation_1()
    else:
        return

    if mybool:
        do_operation_2()
    else:
        return

    ... 
```

这些检查会重复进行，最终会浪费大量时间和键盘弹簧，尤其是在经常需要它们的时候。

如果您可以控制操作功能，例如，`do_operation_N`您可以使用检查布尔值的东西来装饰功能。

但是，如果您无法控制各个`do_operation_N`操作怎么办？如果，对于函数或方法中的每一行，我希望执行相同的检查，是否有某种方法可以“插入”它而不在每个操作行上明确写入？例如，是否有一些装饰魔法可以让我执行以下操作？

```
def magic_decorator(to_decorate):
    def check(*args, **kwargs):
        for call in to_decorate: #magic
            if mybool:
                to_decorate.do_call(call) #magic
            else:
                return #or break, raise an exception, etc
    return check

@magic_decorator
def myfunc():
    do_operation_1()
    do_operation_2()
    ... 
```

如果有办法实现这一点，我不在乎它是否使用装饰器；我只想用某种方式说“对于函数/方法 X 中的每一行，先做 Y”。

上面一个方法的“神奇”示例`do_call`是我所追求的简写，但它会遇到个别行的乱序执行的严重问题（例如，如果函数的第一行是变量赋值，它的其次是使用该变量，无序执行它们会导致问题）。

需要明确的是：外部控制函数执行的逐行顺序的能力*不是*我想要实现的：理想情况下，我只是实现一些以自然执行顺序执行操作的东西每次`myfunc`都做某事。如果“做某事”最终仅限于“调用函数或方法”（不包括赋值、`if`检查等），那很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T16:00:28.443

按顺序存储您的操作，然后使用循环：

```
ops = (do_operation_1, do_operation_2, do_operation_3)

for op in ops:
    if mybool:
        op()
    else:
        return 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-25T00:28:59.453

本质上，您可以从修饰函数中提取文件和行号，重新读取函数，将其编译为 AST，在 AST 中插入节点，然后编译 AST 并将其用作函数。

此方法可用于非常长的函数，如果您使用上述方法，这是一个问题。

# git - 恢复无效的 git 合并

> ID：13198823
> 
> 赞同：2
> 
> 时间：2012-11-02T15:58:30.780
> 
> 标签：git, branching-and-merging, git-merge

有多种资源会告诉你如何在 git 中恢复分支合并，以防你发现分支中的错误。如果分支未推送到上游，则此类合并之后的步骤将重置/纠正分支/合并中的错误，或者恢复/纠正分支/恢复恢复/合并中的错误。但是，这仅与分支代码中存在错误的情况有关。今天，我尝试恢复由于合并提交中解决冲突的方式而无效的合并。

之前的情况：

```
master o -- 1 -- C
        \      /
branch   a -- b 
```

将分支合并到 master 的开发人员在提交 1 中遇到了与其他人实现的代码相关的提交。他解决了冲突并提交了它们，从而创建了一个合并提交“c”。问题是他在这样做时引入了一个错误。我当时想做的是恢复这个合并并正确地重新合并它，创建一个看起来像这样的东西：

```
master o -- 1 -- C -- ~C -- C1
        \      /          /
branch   a -- b ---------- 
```

其中“~C”是还原的“C”，“C1”是正确的合并。不幸的是，我似乎无法做到这一点。

当然重置为 1 并将“分支”重新合并到“主”作品中，但是更改已经在上游，我不想做任何肮脏的把戏。

我在线程中找到的解决方案[撤消尚未推送的 Git 合并](https://stackoverflow.com/questions/2389361/undo-a-git-merge)并没有带我去任何地方。

我得到的最干净的想法是修复“C”中损坏的代码并将它们提交给“master”，但在这种情况下，你不会从 git 获得任何帮助，例如冲突文件列表或突出显示的冲突行，在这种情况下很有帮助。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:15:07.027

从 git 的角度来看，您尝试创建的图表没有意义。具体来说，使 C1 成为 ~C 和 b 的合并是很奇怪的，因为它们的合并基础是 b，所以没有什么可做的。

如果您不能或不会进行快进推送，那么您最好的选择是重新创建合并并在 ~C 现在所在的位置创建提交 C1。称之为“修复拙劣的冲突解决方案”并完成它 - 无需额外的合并混乱。

要创建这样的提交，首先创建正确合并的提交 C1，然后运行类似：

```
git reset --hard $(git commit-tree -p C -m "fix botched conflict resolutions" C1:) 
```

有关该行的解释，请参阅[此答案。](https://stackoverflow.com/a/13037386/1600898)

# javascript - 如何使用自动回发进行计算，以免屏幕闪烁

> ID：13198828
> 
> 赞同：0
> 
> 时间：2012-11-02T15:59:02.180
> 
> 标签：javascript, jquery, asp.net

我有一个表单，只要用户从 Web 表单的下拉列表中选择一个数字，它就会执行自动回发。自动回发运行下面的代码来计算表单的数量。

截屏：

![在此处输入图像描述](../Images/01b852c03fc94bc95a43464bd0251cd8.png)

问题是我每次重新计算/自动回发时屏幕上都会出现令人讨厌的闪烁。

是否有另一种编码方式来停止闪烁？

C＃

```
protected void Page_Load(object sender, EventArgs e)
{

    int intNum1 = 0;
    int intNum2 = 0;
    int intNum3 = 0;
    int totalt = 0;

    intNum1 = int.Parse(ddlNoadults.SelectedValue);
    intNum2 = int.Parse(ddlNoseniors.SelectedValue);
    intNum3 = int.Parse(ddlNochildren.SelectedValue);

    totalt = (intNum1 * 10) + (intNum2 * 8) + (intNum3 * 6);

    tbTotal.Text = totalt.ToString();

} 
```

问候

茶

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:03:19.193

使用 UpdatePanel 和 AJAXing 计算应该删除或至少大幅减少闪烁。

[http://www.asp.net/ajax/documentation/live/overview/UpdatePanelOverview.aspx](http://www.asp.net/ajax/documentation/live/overview/UpdatePanelOverview.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T01:19:34.553

你可以用 jquery/javascript 来做。本教程[**如何启动 jquery**](http://docs.jquery.com/Tutorials%3aGetting_Started_with_jQuery)将对您有所帮助。

```
$('#<%= ddlNoadults.ClientID &>', '#<%= ddlNoadults.ClientID &>', 
'#<%=ddlNoadults.ClientID &>').change(function(){
        calculate();
});

function calculate(){
    num1 = parseInt($('#<%= ddlNoadults.ClientID &>').val());
    num2 = parseInt($('#<%= ddlNoseniors.ClientID &>').val());
    num3 = parseInt($('#<%= ddlNochildren.ClientID &>').val());
    totalt = (num1 * 10) + (num2 * 8) + (num3 * 6);
    $('#<%= tbTotal.ClientID &>').val(totalt) 
}

$(document).ready(function(){
     calculate();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T16:55:08.717

假设您可以依赖您的用户在其浏览器中启用了 javascript，这是一个简单的客户端解决方案。

只需附加一个函数，将所选值与要触发计算的每个 ddl 的更改事件相加...

```
$("#id-of-ddl").change(callyoursumfunctionhere); 
```

# android - GridView 图片库 onClick 示例

> ID：13198838
> 
> 赞同：2
> 
> 时间：2012-11-02T15:59:33.267
> 
> 标签：android, image, gridview, onclick, android-asynctask

我是 Android 开发的新手，所以不要介意问我这样简单的问题。我正在尝试从示例[http://developer.android.com/guide/topics/ui/layout/gridview.html](http://developer.android.com/guide/topics/ui/layout/gridview.html)实现简单的画廊，但我不知道如何**让点击的缩略图全屏显示或类似的东西**。此外，如果有人可以向我解释如何在这种情况下通过**AsyncTask**从 url 加载图像，那将是非常好的。谢谢！！

# java-me - J2ME如何将短信从电脑发送到手机

> ID：13198839
> 
> 赞同：0
> 
> 时间：2012-11-02T15:59:36.347
> 
> 标签：java-me, sms, midp, wma

我有一个可以重复发送组消息的 Java me midlet，它在我的 WMA 控制台上运行良好。我如何部署它以便可以在真实设备上进行测试？

此外，我应该怎么做才能让它从 PC 发送短信到手机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T01:48:57.830

对于 J2ME 应用程序 ( .Jad & .Jar ) 的部署，可以使用以下方式，

*   通过 USB 电缆或蓝牙将设备与 PC 连接并传输文件，
*   将您的 .Jad 和 .Jar 文件放在基于实时 ip 的服务器上，并使用实时 ip+文件名作为设备浏览器中的路径下载到设备上

有关 J2ME 应用程序部署的更多信息，请访问以下链接 [http://www.developer.nokia.com/Community/Wiki/How_to_install_Java_ME_application_in_mobile_phone](http://www.developer.nokia.com/Community/Wiki/How_to_install_Java_ME_application_in_mobile_phone)

要从电脑向手机发送短信，请参阅我的[答案](https://stackoverflow.com/a/12605880/996493)。

# android - Smack 数据包侦听器未运行

> ID：13198840
> 
> 赞同：5
> 
> 时间：2012-11-02T15:59:38.730
> 
> 标签：android, xmpp, asmack

我正在尝试为 asmack 数据包编写一个侦听器。最终发生的是侦听器有时只是没有获取数据包并对其进行处理。这是一些代码：

```
try {

            XMPPMethods.getConnection().addPacketListener( new PacketListener() {
                    @Override
                    public synchronized void processPacket(Packet packet) {

                        if (packet.getPacketID().equals(lastCustomIQId)) {

                            android.os.Message msg = new android.os.Message();
                            msg.obj = privateData;
                            msg.what = XMPPMethods.ADD_CONTACT_RESULTS;
                            AddContact.addContactHandler.sendMessage(msg);
                        }
                    }
                }, new PacketIDFilter(lastCustomIQId)); 
```

请注意，这是在 asynctask 的 doInBackground(string... params) 部分内。

正在使用以下方式发送数据包：

```
JIDIQ.setPacketID(lastCustomIQId);
JIDIQ.setFrom(XMPPMethods.getCurrentUserFullUserName());
JIDIQ.setType(Type.GET);
XMPPMethods.getConnection().sendPacket(JIDIQ); 
```

JIDIQ 是一个 asmack IQ。这段代码大部分时间都正确运行。但有时 PacketListener 只是没有收到发送的数据包。我想知道我是否应该改用 PacketCollector，或者侦听器是否会以某种方式死亡。有谁知道为什么这不会收到数据包？任何有关该主题的知识将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T12:30:32.110

如果您的其他数据包侦听器之一抛出异常，这将发生。
每当一个数据包进来时，一个线程中的所有数据包侦听器都会受到打击，在一个 for 循环内。如果在数据包侦听器中引发异常，这将中止该线程并且不会触发进一步的数据包侦听器。

检测发生这种情况的最彻底的方法是重新编译 smack 并在`PacketReader.java`.

这是代码的相关部分。您可以看到任何抛出的异常都会导致线程中止，因为没有错误处理。

```
private class ListenerNotification implements Runnable {

    private Packet packet;

    public ListenerNotification(Packet packet) {
        this.packet = packet;
    }

    public void run() {
        for (ListenerWrapper listenerWrapper : connection.recvListeners.values()) {
            listenerWrapper.notifyListener(packet);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T00:29:40.483

我认为 PacketIDFilter 正在过滤数据包，因此您的数据包侦听器没有得到它们。

当您的数据包侦听器没有收到数据包时，请检查 smack 日志以查看数据包 ID 是否是数据包过滤器所期望的。

# c# - 在 Windows 上构建 Apache QPID 缺少 setup.py

> ID：13198846
> 
> 赞同：1
> 
> 时间：2012-11-02T16:00:03.977
> 
> 标签：c#, python, windows, apache, qpid

我是 Apache Qpid、Cmake 和 Python 的新手。我已经在 Debian 上成功构建了 Qpid 并运行了一些测试。我现在正在尝试在 Windows 上构建 Qpid，以便我可以编写 C# 客户端，但似乎有问题。当我运行 cmake 命令时，它最终会给我以下输出：

```
Please wait while cmake processes CMakeLists.txt files....

C:/Program Files (x86)/Python330/python.exe: can't open file 'setup.py': [Errno 2] No such file or directory

Variable Name: BUILD_ACL 
Description: Build ACL enforcement broker plugin
Current Value: ON
New Value (Enter to keep current value): 
```

我试图了解 setup.py 应该何时生成/下载。我找不到它，也找不到任何描述它应该何时生成或安装的文档。另外，有点跑题了，为什么 cmake 进程开始提示我 BUILD_ACL 和其他配置？

我使用以下命令为 VS 2008 和 2010 运行了 cmake，并且都产生了相同的输出：

```
cmake -i -G "Visual Studio 9 2008" .
cmake -i -G "Visual Studio 2010" . 
```

我正在使用来自 Apache 的以下文件来构建 Qpid：qpid-cpp-0.18.tar.gz

从上面的日志语句中可以看出，我使用的是 Python 3.3.0。

我了解 setup.py 是 Python 用于安装组件的文件。似乎 cmake 脚本正试图根据我通过搜索 setup.py 找到的 cmake 脚本的一部分在测试目录中安装一些东西。我认为这要么是在 Qpid tarball 中提供，要么是作为这个 cmake 过程的一部分生成的。

综上所述，我最终按住了输入键，接受了 cmake 的所有默认值，它生成了解决方案文件和项目文件。我能够在 VS2008 中打开生成的 Qpid 解决方案并构建一些项目。那么，这就提出了一个问题，为什么需要 setup.py？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T21:42:02.790

当在 users@qpid.apache.org 询问 Qpid 用户问题时，得到了很好的答复 qpid 开发人员对邮件列表的反应相当好。

`cmake -i`进行交互式配置。这就是它要求所有变量值的原因。`cmake`没有`-i`默认值。可以对系统应为“n”的变量回答“y”，从而生成无法正常工作的构建环境。尝试不使用`-i`开始。

使用两个不同的生成器在同一目录中运行两次 cmake 通常是一种不好的做法。在您的情况下，它将为 VS2008生成一个*.sln*文件和*.vcproj文件，并为 VS2010 生成一个**.sln*文件和*.vcxproj*文件。如果您进行源内构建，文件可能看起来相同，但实际上并非如此。运行这两个`cmake`命令后，文件将继续看起来相同。

再次解压缩源 tarball 并尝试`cmake`使用源外构建。

```
mkdir b32-vs2010
cd b32-vs2010
cmake -G "Visual Studio 2010" ..\qpidc-0.18 
```

目录*b32-vs2010*将包含您的 2010 解决方案和项目文件，以及所有生成的源文件。它使源目录保持干净并且没有生成的文件。

这应该在没有抱怨的情况下运行`setup.py`。如果您仍然遇到问题，请利用用户邮件列表。

# svn - 龟SVN删除项目并重新开始

> ID：13198849
> 
> 赞同：0
> 
> 时间：2012-11-02T16:00:12.680
> 
> 标签：svn, tortoisesvn

前几天我发布了关于使用 SVN 开关的帖子并得到了我需要的答案。简而言之，我工作的公司又增加了两个团队（在海上），svn 已成为噩梦。我尝试切换到他们的分支为他们测试一些东西，虽然它有效，但从那时起我们遇到了一些问题。我已经完成了所有工作，但无法让我的 svn 与他们的相同。我试过svn->clean，再次删除并拉入目录，没有任何效果。我想要做的是删除项目并运行新的结帐以重新开始。在项目中有三个目录。我可以只删除其中一个，主要的（我们可以称之为 main_dir ）然后将其拉回吗？看起来很简单，但在这一点上，这个烂摊子远非简单。

如果可能的话，我是否只需右键单击 main_dir 上的 svn->delete？那我怎么把它拉回来？

需要考虑的一件事。我没有提交我尝试过的一些事情，所以我想删除我所做的更改，所以看起来我没有什么可提交的，我认为删除它会做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:08:25.820

如果你真的想让一切都清楚，为什么你只想删除并签出三个目录之一？为什么不从头开始？

无论如何，不​​要执行 SVN 删除：这意味着您要让 SVN 在下一次提交时删除文件。您需要做的只是从磁盘中删除文件，然后重新签出。因此，您需要定期删除文件。

您是否考虑过阅读免费提供且非常易于阅读的[SVN 书](http://svnbook.red-bean.com/)？因为在我看来，您遇到问题只是因为您不了解 SVN 的基本功能（例如删除文件）。

# java - 掷两个骰子

> ID：13198859
> 
> 赞同：0
> 
> 时间：2012-11-02T16:00:54.487
> 
> 标签：java, probability

我正在编写一个程序，它应该返回滚动两个骰子的值。我希望用户能够选择指定类型的模具或选择自定义数量的面。因此，例如，我选择了三角形骰子，我将有一个 3 面骰子。

变量：

```
private int die = 1;
private int preselectedSides; 
```

我为处理菜单所做的开关中的情况如下所示：

```
switch(selection)
      case 1:
      premadeDice(3, 4, 6);
      x=1;
      break; 
```

接收方法如下所示：

```
//premade Dice Selection//
public int premadeDice(int triangle, int rectangle, int cube)
{         
    String choice;
    boolean flag = false;
    while (flag == false)
    {
        System.out.println("Enter in the shape you want your die to be");
        System.out.println("A triangle die has 3 sides. If this is what you want, type     \"triangle\"");
        System.out.println("A rectangle die has 4 sides. If this is what you want, type     \"rectangle\"");
        System.out.println("A cube die has 6 sides. If this is what you want, type     \"cube\"");
        choice = sc.next();

        if (choice.equalsIgnoreCase("triangle"))
        {
          System.out.println("You have chosen the triangle die."); 
          preselectedSides = triangle;
          flag = true;
        }

        else if (choice.equalsIgnoreCase("rectangle"))
        {
          System.out.println("You have chosen the rectangle die."); 
          preselectedSides = rectangle;  
          flag = true;
        }

        else if (choice.equalsIgnoreCase("cube"))
        {
          System.out.println("You have chosen the  traditonal cube die."); 
          preselectedSides = cube; 
          flag = true;
        }

        else
        {
            System.out.println("You have not entered in a valid die shape. Try again");
        }
    }//end while loop

    return preselectedSides;

}//end pre-made dice method 
```

我创建了一个 getter 来访问该返回值：

```
//getter for Die
public void getDie()
{
   System.out.println(preselectedSides);
} 
```

像这样称呼它：

> test.getDie();

我得到以下立方体的输出（或其他形状，我不断得到 1 和值） 1 6

我试过找到这个逻辑错误，但我没有看到。为什么一直输出第一？**如果需要，请要求澄清。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:06:13.557

这似乎是一大堆代码。您可以像这样简化它：

```
public class Die  
{  
   int sides;
  //get/set/constructor  
   ...
}  

public class DieRoller  
{  
    Die die;  

    public int roll()  
    {  
       Random generator = new Random();  
       return generator.nextInt(this.die.getSides());
    }  
} 
```

你可以像这样运行它：

```
public static void main(String[] args)  
{  
    System.out.println("Number of sides?");  
    Scanner sc = new Scanner(System.in);  
    Die currentDie = new Die(sc.nextInt());  
    System.out.println("Rolling");
    DieRoller roller = new DieRoller(currentDie);  
    int sideRolled = roller.roll();  
    System.out.println(String.format("You rolled %d on your %d sided die",sideRolled,currentDie.getSides()));
} 
```

# c# - 如何在一个代码范围内引用长名称的对象？

> ID：13198863
> 
> 赞同：0
> 
> 时间：2012-11-02T16:01:09.467
> 
> 标签：c#, reference

我有一个我使用的对象，它被放置在很多字典和列表中，所以当我调用它时，行变得很长，我希望能够使用它的引用快速做一些事情，像这样：

```
ref MyObject o = thingsStorageClass.dictionary[anotherDictionary[list.key]];
o.someField = value;
int i = o.integer;
DoStuff(o.specialSomething); 
```

但似乎我不能只放在`ref`本地对象初始化之前。如果不使用将对象作为参数的外部方法，我该如何做这样的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T16:02:29.067

只需删除`ref`它就会起作用，因为它是`o`class 的实例`MyObject`，所以它是引用类型。您不会以这种方式创建新实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T16:03:58.177

如果您正在谈论引用该对象，则只需将其分配给 a `variable`（删除`ref`关键字，这就是您所拥有的）。`var`如果您使用 C# 3.0 以上版本，则可以使用关键字进一步缩短它，例如

```
var o = thingsStorageClass.dictionary[anotherDictionary[list.key]]; 
```

或者，如果您指的是实际类型本身，那么您可以使用别名，例如

```
using MyPair = System.Collections.Generic.Dictionary<string, string>;
...
var o = new MyPair("key", "value"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T16:02:18.027

只需放下`ref`- 无论如何您都在指定类型。

```
MyObject o = thingsStorageClass.dictionary[anotherDictionary[list.key]];
o.someField = value;
int i = o.integer;
DoStuff(o.specialSomething); 
```

或使用`var o =`

# c - 是否可以在编译时获取枚举成员的值？

> ID：13198864
> 
> 赞同：7
> 
> 时间：2012-11-02T16:01:18.360
> 
> 标签：c, gcc, enums, c-preprocessor

是否可以在编译时获取枚举成员的值？

事实上，我希望能够做这样的事情：

```
enum { 
   FOO_FIRST = -1,
   FOO_A,
   FOO_B,
   FOO_C,
   FOO_LAST
};

#if FOO_LAST > 10
//...
#else
//..
#endif 
```

我知道他们`cpp`不知道变量、语法错误等；只有以（对）开头的东西`#`？但是枚举的成员具有固定大小，不能像 10（常量整数）值一样更改，并且编译器知道它的大小和值。那么，有没有可能进行这样的比较（就像我上面所做的那样）？我可以使用 gcc 扩展吗？

我不想用`#define`s 重写我所有的枚举，也不想花时间做一些宏的改变。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T16:11:43.290

只需使用`if`. 枚举可以在编译时进行评估就好了。编译器将优化不可能的分支：

```
if (FOO_LAST > 10) {
    // A
} else {
    // B
} 
```

编译器知道无法到达两个分支（A 和 B）中的哪一个，因此可以`if`完全消除。

但是请注意，您应该只直接使用枚举器。例如，在这个：

```
int num = FOO_LAST;
if (num > 10) {
    // A
} else {
    // B
} 
```

GCC 将保持*比较*`if`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T16:03:41.307

`#ifdef`由预处理器而非编译器解释。预处理器对 的值一无所知`enums`。所以这不是一个可行的方法。

# ios - iOS项目中的IcoMoon

> ID：13198866
> 
> 赞同：0
> 
> 时间：2012-11-02T16:01:24.713
> 
> 标签：ios, font-awesome

我成功地在我的 iOS 项目中加载了 FontAwesome，但我想知道是否也可以加载 IcoMoon 图标字体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:49:03.863

经过几次测试后，IcoMoon 现在可以正常工作了。问题与我的 Info.plist 文件有关。我已经删除并重新创建了它，现在安装了字体。

# tsql - tsql 确定价格趋势

> ID：13198867
> 
> 赞同：0
> 
> 时间：2012-11-02T16:01:29.277
> 
> 标签：tsql, grouping

我有一个 3 列的表

```
+---------------+-------------+------ +
| 仪器 ID | 日期 | 价格 |
+---------------+-------------+------ +
| 39 | 2012-10-31 00:00:00.000 | 150 |
| 39 | 2012-11-01 00:00:00.000 | 160 |
| 39 | 2012-11-01 00:00:00.000 | 200 |
| 40 | 2012-10-31 00:00:00.000 | 150 |
| 40 | 2012-11-01 00:00:00.000 | 140 |
| 40 | 2012-11-01 00:00:00.000 | 200 |
| 50 | 2012-10-31 00:00:00.000 | 150 |
| 50 | 2012-11-01 00:00:00.000 | 150 |
| 50 | 2012-11-01 00:00:00.000 | 150 |
+---------------+-------------+------ +
```

我需要接收下一个结果：

```
+--------------+------+
| 仪器 ID | 价格 |
+--------------+------+
| 39 | 200 |
| 40 | 0 |
| 50 | 150 |
+--------------+------+

```

规则：如果相同 InstrumentId 的价格在增长或等于 => 返回最后一个价格（这意味着每个下一个价格都大于或等于前一个价格。例如 Id 39：150 <= 160 <= 200 => 返回 200）如果有的话相同 InstrumentId 的价格低于先前 => 返回 0（请参阅 instrumentId 40）

我可以用光标来做到这一点......但我认为存在一个简单的解决方法来做到这一点。有任何想法吗？

测试数据：

```
DECLARE @table TABLE(
    instrumentId INT NOT NULL,
    priceListDate DATETIME NOT NULL,
    price DECIMAL NOT NULL 
)

INSERT INTO @table
(
    instrumentId,
    priceListDate,
    price
)
VALUES( 39, '2012-10-31 00:00:00.000',  150),
(39,'2012-11-01 00:00:00.000',  160),
(39,'2012-11-01 00:00:00.000',  200),
(40,'2012-10-31 00:00:00.000',  150),
(40,'2012-11-01 00:00:00.000',  140),
(40,'2012-11-01 00:00:00.000',  200),
(50,'2012-10-31 00:00:00.000',  150),
(50,'2012-11-01 00:00:00.000',  150),
(50,'2012-11-01 00:00:00.000',  150) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:53:08.607

让我知道这是否正常。我猜你的表中永远不会有 price = -1，我认为这会导致当前解决方案出现问题。

```
WITH    CTE
      AS ( SELECT   RN = ROW_NUMBER() OVER ( ORDER BY instrumentId ) ,
                    *
           FROM     @table
         )
SELECT  CASE WHEN MIN(X.xPrice) = -1 THEN 0
             ELSE MAX(X.xPrice)
        END 'price' ,
        X.instrumentId
FROM    ( SELECT    CASE WHEN [Current Row].instrumentId = [Next Row].instrumentId
                         THEN CASE WHEN [Current Row].price > [Next Row].price
                                   THEN -1
                                   ELSE [Current Row].price
                              END
                         ELSE CASE WHEN [Previous Row].instrumentId = [Current Row].instrumentId
                                   THEN CASE WHEN [Previous Row].price <= [Current Row].price
                                             THEN [Current Row].price
                                             ELSE -1
                                        END
                                   ELSE [Current Row].price
                              END
                    END 'xPrice' ,
                    [Current Row].RN ,
                    [Current Row].instrumentId
          FROM      CTE [Current Row]
                    LEFT JOIN CTE [Previous Row] ON [Previous Row].RN = [Current Row].RN
                                                    - 1
                    LEFT JOIN CTE [Next Row] ON [Next Row].RN = [Current Row].RN
                                                + 1
        ) X
GROUP BY X.instrumentId 
```

这可能看起来有点复杂，但基本思想是确定当前行的下一行和上一行，以便测试该行的价格列的值。

# database - 是否有命令检查实体框架中是否存在数据库？

> ID：13198869
> 
> 赞同：9
> 
> 时间：2012-11-02T16:01:35.577
> 
> 标签：database, entity-framework

我的问题可能措辞不佳，但在我的 global.asx 文件中我使用

```
 if (System.Diagnostics.Debugger.IsAttached)
        {
            var test = new TestDbSeeder(App_Start.NinjectWebCommon.UcxDbContext);
            test.seed();
       } 
```

这将检查是否附加了调试器并运行我的测试播种器，以便我的验收测试始终通过。

我需要检查数据库是否也存在，如果不先运行此代码：

```
 var test2 = new DataSeeder();
  test2.Seed(App_Start.NinjectWebCommon.UcxDbContext); 
```

此数据播种器是必须始终在数据库中的实际数据。是否有命令检查数据库是否存在，以便我可以运行该代码块。谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-02T16:03:18.557

[Database.Exists](http://msdn.microsoft.com/en-us/library/gg696617(v=vs.103).aspx)方法对你有用吗？

```
if (!dbContext.Database.Exists())
    dbContext.Database.Create(); 
```

**编辑＃1以回答评论**

```
public class DatabaseBootstrapper
{
    private readonly MyContext context;

    public DatabaseBootstrapper(MyContext context)
    {
        this.context = context;
    }

    public void Configure()
    {
        if (context.Database.Exists())
            return;

        context.Database.Create();
        var seeder = new Seeder(context);
        seeder.SeedDatabase();
    }
} 
```

那应该完全符合您的要求。在您的 global.asax 文件中...

```
public void Application_Start()
{
    var context = ...; // get your context somehow.
    new DatabaseBootstrapper(context).Configure();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-03-24T20:11:46.653

在 Entity Framework Core 中，它的工作方式如下：

```
namespace Database
{
    using Microsoft.EntityFrameworkCore.Infrastructure;
    using Microsoft.EntityFrameworkCore.Storage;

    public partial class MyContextClass
    {
        /// <summary>
        /// Checks if database exists
        /// </summary>
        /// <returns></returns>
        public bool Exists()
        {
            return (this.Database.GetService<IDatabaseCreator>() as RelationalDatabaseCreator).Exists();
        }
    }
} 
```

确保类名与您的数据库上下文类名相同，并且位于同一命名空间中。

像这样使用它：

```
var dbExists = (MyContextClass)db.Exists() 
```

资料来源：[StackOverflow 答案](https://stackoverflow.com/a/33931956/828184)

# sql-server-2008 - 几个基本的 Sql Profiler 问题

> ID：13198870
> 
> 赞同：2
> 
> 时间：2012-11-02T16:01:37.743
> 
> 标签：sql-server-2008, sql-server-profiler

（对不起这个冗长的问题，我会尽量简洁。）

我正在运行 SQL Server Profiler，并且正在解决一些性能问题。我对探查器的功能相对较新，并且我已将跟踪导出到表中，以便可以对数据运行查询。

我遇到的一件事是一些看似奇怪的行为，对跟踪导出生成的表的 TextData 字段进行选择查询。它可能与字段的数据类型（ntext，null）有关。我正在选择特定的值，但得到了意想不到的结果。例如，如果我这样做：

```
select * from [TraceAnalyzer].dbo.TraceTable 
```

我对这样的价值观感兴趣：

```
exec [Sproc_of_interest] @parm1=992 
```

我会做这样的查询：

```
select * from [TraceAnalyzer].dbo.TraceTable
where TextData like '%exec [Sproc_of_interest] @parm1=%' 
```

但返回结果为空。

另外，如果我进行如下查询：

```
select * from [TraceAnalyzer].dbo.TraceTable
where TextData like '%exec [Sproc_of_interest]%' 
```

我得到了意想不到的 TextData 值，比如`exec sp_reset_connection`

标准中的方括号会搞砸吗？我试过省略它们，但这只是排除了一切。我不知道 SQL 选择查询中的转义字符，但是当我从有问题的记录之一复制/粘贴值时，粘贴的值似乎不包含任何符合原始查询条件的内容。

任何见解将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:46:26.390

`[Sproc_of_interest]`在模式语法中被解释为匹配集合中的一个字符`S,p,r,o,c,_,o,f,_,i,n,t,e,r,e,s,t`。

以下是解决此问题的三种可能方法。

`[`1)用方括号转义

```
LIKE '%exec [[]Sproc_of_interest] @parm1=%' 
```

2）使用转义字符

```
LIKE 'exec \[Sproc_of_interest] @parm1=' ESCAPE '\' 
```

3）使用`CHARINDEX`而不是逃避任何东西

```
WHERE CHARINDEX('exec [Sproc_of_interest] @parm1=' , TextData) > 0 
```

# ruby-on-rails - 视图有链接时无法发送电子邮件

> ID：13198872
> 
> 赞同：1
> 
> 时间：2012-11-02T16:01:44.513
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, actionmailer

我正在使用 ruby​​ 1.9.3p194 和 Rails 3.2.3。

我在发送模板中包含链接的电子邮件时遇到问题。我写了以下代码：

邀请邮件程序.rb

```
def event_invitation(user, event)
  @user = user
  @event = event
  mail(:to => @user.email, :subject => "Invitation to participate in #{@event.name}   event")
end 
```

event_invitation.html.haml

```
Hello,

%br
%br

Your friend #{@event.user.full_name} has invited you to participate in #{@event.name}   event. If you want to accept
this invitation, use the following link: 

= link_to calendar_index_url, calendar_index_url

%br
%br

#{t('shared.team')} 
```

用户.rb

```
def xyz
   ...
   InvitationMailer.event_invitation(self, event).deliver
end 
```

如果我删除视图中的链接行，我可以接收电子邮件，但不能使用视图内的链接。但是日志显示已经发送了一封电子邮件。

日志

```
 Sent mail to abhimanyu@gmail.com (6117ms)
 Date: Fri, 02 Nov 2012 20:59:33 +0530
 From: invitation@dev.tld
 To: abhimanyu@gmail.com
 Message-ID: <5093e6dd6a275_14f733fc536034cd444087@Abhimanyus-iMac.local.mail>
 Subject: Invitation to participate in new event event
 Mime-Version: 1.0
 Content-Type: text/html;
 charset=UTF-8
 Content-Transfer-Encoding: 7bit

 Hello,
 <br>
 <br>
 Your friend Abhimanyu Kumar has invited you to participate in new event event. If you   want to accept
 this invitation, use the following link:
 <a href="http://localhost:3000/calendar">http://localhost:3000/calendar</a>
 <br>
 <br>
 Dev Team 
```

任何帮助找出问题将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:11:09.697

`default_url_options`您是否在环境配置文件中指定了 ActionMailer ？无论是在`config/environments/development.rb`或`config/environments/production.rb`（取决于您正在处理的环境）中，请确保包含以下内容：

```
config.action_mailer.default_url_options = { :host => "example.com" } 
```

在此处查看更多信息：http: [//api.rubyonrails.org/classes/ActionMailer/Base.html#label-Generating+URLs](http://api.rubyonrails.org/classes/ActionMailer/Base.html#label-Generating+URLs)

# php - Drupal 7：手动列出分类术语和具有这些术语的节点

> ID：13198873
> 
> 赞同：0
> 
> 时间：2012-11-02T16:01:46.040
> 
> 标签：php, drupal, drupal-7, drupal-modules

在 Drupal 7 块中，我试图在无序列表中列出特定词汇表的分类术语，并且还将任何已发布的节点作为该分类术语的一部分作为子项。

例子：

假设我有一个名为 Products 的词汇表，其中包含分类术语 Beer、Wine 和 Whiskey。说啤酒有 2 个附加的内容节点（Guinness & Budweiser）等等。

它最终应该看起来像这样：

*   啤酒 (2)
    *   吉尼斯
    *   百威
*   酒 (2)
    *   黑皮诺
    *   白仙粉黛
*   威士忌 (3)
    *   杰克丹尼
    *   制造商标记
    *   皇冠皇家

我已经弄清楚如何使用计数显示“仅”分类术语，但无法弄清楚如何打印与每个术语相关的所有已发布节点。这是我得到的：

```
<?php

$vid = 1; //vocabulary id

$query = "SELECT tid, name, count
FROM (
SELECT td.tid AS tid, name, COUNT(td.tid) AS count
FROM taxonomy_term_data AS td
JOIN taxonomy_index AS tn
  ON td.tid = tn.tid
JOIN node AS n
  ON n.nid = tn.nid
WHERE td.vid = ". $vid ."
  AND n.status = 1
GROUP BY td.tid
ORDER BY count DESC
) AS t
ORDER BY name ASC";

$result = db_query($query);

print '<ul>';   
foreach($result as $term) {
if ($term->count > 0) {
  print '<li>';
  echo l($term->name, "taxonomy/term/$term->tid").' ('.$term->count.')';
  print '</li>';
}
}
print '</ul>';    

?> 
```

这将产生以下输出：

*   啤酒 (2)
*   酒 (2)
*   威士忌 (3)

但是，如何让这些分类术语的子项显示属于该分类术语一部分的已发布节点？

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T07:54:13.343

这是创建视图的屏幕截图的分步说明，

[http://www.brightwebsitedesign.com/how-to-use-views-aggregator-to-create-taxonomy-term-count-block](http://www.brightwebsitedesign.com/how-to-use-views-aggregator-to-create-taxonomy-term-count-block)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:05:57.433

你绝对可以用视图来做到这一点。使用“字段”类型的视图。添加您的节点标题和“所有分类术语”（按您的词汇过滤）作为字段。添加指定未发布的过滤器和所需的节点类型。在视图的格式设置中，将“分组字段”设置为您的分类术语。可以选择指定排序。通常我按术语排序，然后是节点标题。

# php - 将 PDO db 对象实例传递给其他类函数

> ID：13198875
> 
> 赞同：2
> 
> 时间：2012-11-02T16:01:52.723
> 
> 标签：php, mysql, database, pdo

我在包含的文件中有一个 PDO 对象，当我在主页中使用它时效果很好。当我将它传递给一个对象以在其中使用它时，它根本不起作用。

我已经直接尝试并参考（函数 xxxx（&dbd）{ this->$db = &dbd }），根本不起作用，但是如果我传递另一种类型的值（作为字符串），它就完美了。如果我发送一个 $db = "olaola" 它可以工作，但如果它是一个 PDO 它会失败。我是php和英语的新手，所以请耐心等待：P

包含文件：

```
$username = "root";
$password = "*****";
$host = "localhost";
$dbname = "dbname";
$db = NULL;
$options = array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8');

try
{
    $db = new PDO("mysql:host={$host};dbname={$dbname};charset=utf8", $username, $password, $options);
}
catch(PDOException $ex)
{
    die("Failed to connect to the database: " . $ex->getMessage());
}

$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$db->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_ASSOC); 
```

主要：

```
$pagMenu = new pages($db); 
```

在页面类中：

```
class pages {

    private $db;

    function __construct($db) { 
        $this->$db = $db;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T16:04:50.707

语法是：

```
 $this->db = $db; 
```

不是`$this->$db`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-02T16:07:38.747

你应该做

```
$this->db = $db; 
```

代替

```
$this->$db = $db; 
```

第二种形式是[变量 variable](http://php.net/manual/en/language.variables.variable.php)，这意味着您将参数的值分配给名为变量内容的变量，如果该内容是 PDO 对象，它将返回错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-28T03:05:04.410

静态语法

```
$self::$variableName 
```

这种语法

```
$this->variableName 
```

# java - 为实现相同接口的两个子类定义一个泛型方法

> ID：13198879
> 
> 赞同：11
> 
> 时间：2012-11-02T16:02:06.497
> 
> 标签：java, generics, set

我正在用 Java 构建一个“联系人管理器”。

我有一个名为“ **Contact**的超类，它有两个基类；**PersonalContact**和**BusinessContact**。

我有一个名为**Event**的接口，它由**Birthday**和**Meeting**类实现。（Birthday 包含一个 DateTime 对象，而 Meeting 包含两个用于开始和结束时间的对象）。

**PersonalContact**拥有一组**生日**树，而**BusinessContact**拥有一组**会议。**

现在，在超类**Contact**中，我想创建一个名为“getEventsWithinPeriod()”的抽象方法，它将返回给定时间跨度内所有生日和/或会议的 TreeSet。

问题是，我不知道如何告诉抽象方法，然后基类方法返回什么。

例如，这是我在**Contact**中使用的代码；

`public abstract Set<Event> getEventsWithinPeriod(DateTime start, DateTime end);`

在 PersonalContact 中；

```
public Set<Birthday> getEventsWithinPeriod(DateTime start, DateTime end){

      Set<Birthday> birthdaysThatAreWithin = new TreeSet<Birthday>();
      //CODE
      return birthdaysThatAreWithin; 
```

但是，在编译器中，我说错了`Set<Birthday>` ；

“返回类型与 Contact.getEventsWithinPeriod(DateTime, DateTime) 不兼容”

> 我应该使用什么合适的条款和回报？为什么我当前的尝试是错误的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T16:07:39.987

你需要使用[`generic Types`](http://docs.oracle.com/javase/tutorial/java/generics/types.html)

```
public abstract class Contact<T extends Event> {
    public abstract Set<T> getEventsWithinPeriod(Date start, Date end);
}
public class BirthDay extends Contact<BirthDay> implements Event {

    @Override
    public Set<BirthDay> getEventsWithinPeriod(Date start, Date end) {
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-02T16:12:52.220

您有 3 个解决方案。

**解决方案 1**

首先，您可以使您的类通用，如下所示：

```
public abstract class Contact<E extends Event> {
    // ...

    public abstract Set<E> getEventsWithinPeriod(DateTime start, DateTime end);
} 
```

然后在你的具体实现中：

```
public class PersonalContact extends Contact<Birthday> {

    public Set<Birthday> getEventsWithinPeriod(DateTime start, DateTime end) { ... }
} 
```

这是最好的解决方案，但您有一些选择。

**解决方案 2**

您可以更改`birthdaysThatAreWithin`字段的类型：

```
Set<Event> birthdaysThatAreWithin = new TreeSet<Event>(); 
```

以及更改方法签名：

```
public Set<Event> getEventsWithinPeriod(DateTime start, DateTime end) { 
```

并像这样返回它。这会限制您，因为您不能再将事件用作`Birthday`实例。

**解决方案 3**

您还可以将您的方法签名（在您的抽象类和具体类中）更改为：

```
public Set<? extends Event> getEventsWithinPeriod(DateTime start, DateTime end) 
```

而不是改变任何其他东西。这与解决方案 2 具有相同的问题，如果不强制转换它们，您将无法将事件用作`Birthday`实例。

**编辑：** 2 和 3 的缺点是它们需要铸造。例如：

```
PersonalContact contact = ... ;
Set<Event> events = personalContact.getEventsWithinPeriod(start, end);
// I know all the events are birthdays, but I still have to do this:
for (Event event : events) {
    if (event instanceof Birthday) {
        Birthday birthday = (Birthday) event;
        // Do stuff with birthday
    } // else maybe log some error or something
} 
```

使用第一个解决方案，您将拥有：

```
PersonalContact contact = ... ;
Set<Birthday> birthdays = personalContact.getEventsWithinPeriod(start, end);
for (Birthday birthday : birthdays) {
    // Do stuff with birthday
} 
```

代码看起来更干净并且运行得更好，因为您不必进行`instanceof`检查以确保您没有获得`ClassCastException`. 你也可以有这样的东西：

```
public static void processBirthdaysFor(Contact<Birthday> birthdayContact, DateTime start, DateTime end) {
    Set<Birthday> birthdays = personalContact.getEventsWithinPeriod(start, end);
    for (Birthday birthday : birthdays) {
        // Do stuff with birthday
    }
} 
```

而且，如果您有另一个`Contact`具有`Birthday`事件的实现，则可以将它们传递给该`processBirthdaysFor`方法而无需进行任何更改。

*但是*，如果您只需要事件而不关心调用您的代码中的类型是什么`Contact.getEventsWithinPeriod`，那么解决方案 2 和 3*绝对*是您最好的选择。如果是这种情况，我个人会使用解决方案 2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T16:09:34.310

覆盖任何方法时方法签名应保持不变，您的签名应保持不变并在 PersonalContact 类中返回 Set

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T16:10:52.670

使用泛型时，您不想显式指定类型。您可以绑定类型，但您不想明确。

`Contact`将您的方法更改为

```
public abstract Set<T extends Event> getEventsWithinPeriod(DateTime start, DateTime end); 
```

并更改`PersonalContact`为

```
public Set<T extends Event> getEventsWithinPeriod(DateTime start, DateTime end){

      Set<T> birthdaysThatAreWithin = new TreeSet<Birthday>();
      //CODE
      return birthdaysThatAreWithin;
} 
```

那应该得到你想要的。

# javafx-2 - TableView 的 JavaFX 滚动事件处理

> ID：13198881
> 
> 赞同：1
> 
> 时间：2012-11-02T16:02:10.113
> 
> 标签：javafx-2

我的 JavaFX 项目有问题。有一瞬间我无法理解。据我了解，以下代码应该能够处理**table**的所有滚动事件，它是 TableView 的一个实例

```
 table.setOnScroll(new EventHandler<ScrollEvent>() {
            @Override
            public void handle(ScrollEvent scrollEvent) {
                System.out.println("Hello!");
                int i = 0;
                int length = table.getItems().size();
                for(Node n: table.lookupAll("TableRow")) {
                    if (n instanceof TableRow) {
                        TableRow row = (TableRow) n;
                        if(table.getItems().get(i).getType() == "fwfx") {                    
                            row.setStyle("-fx-background-color: forestgreen;");
                        }
                        i++;
                    }
                    if(i == length) {
                        break;
                    }
                }
            }
        }
    ); 
```

每当我启动应用程序时，它仅针对可见行正确突出显示行。我发现它是因为

```
table.lookupAll("TableRow") 
```

为我返回只有 17 个节点的集合。虽然

```
table.getItems().size() 
```

显示正确的行数。如果我向下滚动表格，我会看到突出显示的不适当的行。我有点迷路了。

所以问题是我如何正确处理我的表格的滚动事件？我需要处理表格的所有行，不仅是可见的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T12:41:42.180

所以最后我找到了处理滚动事件的方法，我想分享我的经验。使用[Scenic View](http://fxexperience.com/scenic-view/)我发现只有当您将鼠标滚轮滚动到**列标题**上时才会触发 TableView setOnScroll 事件。但是为了能够在光标位于表格数据上方时处理 ScrollEvent（我在示例中需要这样做），需要使用**EventFilter**来确定。比如下面的colde会处理TableView实例的**所有滚动事件**

```
 table.addEventFilter(ScrollEvent.ANY, new EventHandler<ScrollEvent>() {
            @Override
            public void handle(ScrollEvent scrollEvent) {
               System.out.println("Scrolled.");
            }
     }); 
```

Scenic View 也给了我一个关于 TableView 之后包含什么的提示

```
stage.show() 
```

已经奏效了。

尽管我仍然有错误突出显示的行）...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-09T19:38:58.430

监听滚动条值变化

```
for (Node node : dataTable.lookupAll(".scroll-bar"))
{
    if  (node instanceof ScrollBar && ((ScrollBar) node).getOrientation().equals(Orientation.VERTICAL))
    {
        ((ScrollBar) node).valueProperty().addListener(formatBUIScrollChangeEventHandler);
    }
} 
```

这将以任何形式的表格滚动触发。

花了几个小时终于在解决我自己的情况时提出了这个想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-16T07:25:26.293

这个问题很老，但您还没有发布/接受答案。

所以，这应该有帮助：`tableView.refresh()`. 自 Java 8u60 起，它在 JavaFX 中可用。

您必须在 ScrollEvent 中调用它。也可能通过排序和拖动 ScrollBar （请参阅我的答案[here](https://stackoverflow.com/questions/35066506/add-listener-on-tableview-scrollbar/40626220#40626220)）。

# git - 如何将 origin/master 移动到新分支？

> ID：13198882
> 
> 赞同：3
> 
> 时间：2012-11-02T16:02:12.080
> 
> 标签：git

在过去的某个时候，我不知何故设法在我的主分支中获得了一些实验性功能，这些功能被推到了原点。我本地的 master 分支没有实验功能，所以我要强行推出它。我不想丢失实验性更改，那么在我强制将本地主机推送到原点之前，有没有办法可以将原点/主机（或复制它）移动到新分支？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T16:07:31.553

```
git checkout origin/master
git branch -b master_with_experiments
git push origin master -f 
```

或者将那些提交的樱桃挑选`git cherry-pick <sha1>`到另一个分支，然后强制推送主控。

或者根据需要进行交互式 rebase 和重新排列提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:04:37.033

当然，只需使用`git branch experimental master`将您当前的 master 保存到本地分支。然后将master恢复到想要的状态并推送到服务器。最后，当您想与他人共享实验分支时，也可以使用`git push origin experimental`.

# javascript - javscript 多个值

> ID：13198884
> 
> 赞同：0
> 
> 时间：2012-11-02T16:02:26.310
> 
> 标签：javascript, onclick, onmousedown

我最近试图将多个值发送到 javascript 函数，例如：

```
<a onclick=myfunction(valA)><img onclick=myfunction(valB)></a> 
```

据我所知，这是不可能的，我想知道是否有任何方法可以将这些值发送到第三个函数。此函数可能处于“侦听”模式并返回值，但我真的不知道从哪里开始。

注意

我知道可以做类似 onclick=myfunction(valA,valB) 的事情，但我确实需要类似的东西：

```
<a onclick=myfunction(valA)><img onclick=myfunction(valB)></a> 
```

在此先感谢您的帮助。

埃米利亚诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:10:36.753

您可以将多个值传递给单个函数，如下所示：

```
<a onclick="myfunction(valA, valB, valC)"></a> 
```

如果您对每个值都有不同的函数，您可以简单地从这个单一的调用每个函数`myfunction(valA, valB, valC)`。它看起来像这样：

```
<script>
function myfunction(valA, valB, valC)
{
aFunction(valA);
bFunction(valB);
cFunction(valC);
}

function aFunction(valA) { /* do stuff */ }
function bFunction(valB) { /* do stuff */ }
function cFunction(valC) { /* do stuff */ }
</script> 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:04:55.587

这确实是可能的，但完全没有意义，因为它甚至没有达到你所说的目标。一个函数当然可以接受多个参数：

```
<a onclick="myfunction(valA, valB)">...</a> 
```

这执行了一次代码，`onclick`并将两个值传递给相同的范围/“工作单元”，可以这么说。

如果我误解了您，并且您确实希望每次单击每个可用参数执行一次此功能，那么您也可以这样做：

```
<a onclick="myfunction(valA); myfunction(valB);">...</a> 
```

# php - 如何使用 extjs4 网格更新选项更新 Mysql 上的数据

> ID：13198886
> 
> 赞同：0
> 
> 时间：2012-11-02T16:02:32.177
> 
> 标签：php, extjs4

大家好，我正在使用直接网格示例进行小数据更新部分，问题是我无法使用单元插件更新数据，我能够添加和删除，它可以直接更新到 db，但是当我编辑现有字段它没有在屏幕上显示任何错误和更新，我没有在网络区域或 chrome 控制台上看到任何 POST 响应我不知道为什么它没有发生

这是代码，请帮忙

```
Ext.onReady(function() {
    Ext.direct.Manager.addProvider(Ext.app.REMOTING_API);

    //added model inside onready
    Ext.define('PersonalInfo', {
        extend: 'Ext.data.Model',
        fields: ['id', 'name', 'address', 'state','st_one','st_two','st_three','st_for']
    });

    //separated store into unique var for guaranteeRange
    var store = Ext.create('Ext.data.Store', {
        id: 'store',
        model: 'PersonalInfo',
        autoLoad: true,
        proxy: {
            type: 'direct',
            api: {
                create:QueryDatabase.createRecord,
                read:QueryDatabase.getResults,
                update:QueryDatabase.updateRecords,
                destroy:QueryDatabase.destroyRecord
            }
        }
    });

    var rowEditing = Ext.create('Ext.grid.plugin.RowEditing', {
        clicksToMoveEditor: 1,
        autoCancel: false

    });

    var alphaSpaceTest = /^[-\sa-zA-Z]+$/;

    Ext.apply(Ext.form.field.VTypes, {
        //  vtype validation function
        alphaSpace: function(val, field) {
            return alphaSpaceTest.test(val);
        },
        // vtype Text property: The error text to display when the validation function returns false
        alphaSpaceText: 'Not a valid state.  Must not contain numbers.',
        // vtype Mask property: The keystroke filter mask
        alphaSpaceMask: /^[-\sa-zA-Z]+$/
    });

    // create the Grid
    var grid = Ext.create('Ext.grid.Panel', {
        //height: 550,
        //width: 800,
        cls: 'grid',
        title: 'Production Planning Control',
        store: store,
        columns: [{
            dataIndex: 'id',
            width: 50,
            text: 'ID'
        }, {
            dataIndex: 'name',
            flex: 0.5,
            text: 'ClientName',
            //pt 2
            allowBlank: false,
            field: {
                type: 'textfield',
                allowBlank: false
            }
        }, {
            dataIndex: 'address',
            flex: 0.5,
            text: 'Product Name',
            //pt 2
            allowBlank: false,
            field: {
                type: 'textfield',
                allowBlank: false
            }
        }, {
            dataIndex: 'state',
            flex: 0.8,
            text: 'No Of QtyRequired',
            //pt 2
            allowBlank: false,
            field: {
                type: 'textfield',
                allowBlank: false,
                //vtype: 'alphaSpace'
            }
        },{
            dataIndex: 'st_one',
            flex: 0.7,
            text: 'Station 1',
            //pt 2
            allowBlank: false,
            field: {
                type: 'textfield',
                //allowBlank: false,
                //vtype: 'alphaSpace'
            }
},
            {
            dataIndex: 'st_two',
            flex: 0.7,
            text: 'Station 2',
            //pt 2
            allowBlank: false,
            field: {
                type: 'textfield',
                //allowBlank: false,
                //vtype: 'alphaSpace'
            }
        },{
            dataIndex: 'st_three',
            flex: 0.7,
            text: 'Station 3',
            //pt 2
            allowBlank: false,
            field: {
                type: 'textfield',
                //allowBlank: false,
                //vtype: 'alphaSpace'
            }
        },
            {
            dataIndex: 'st_for',
            flex: 0.7,
            text: 'Station 4',
            //pt 2
            allowBlank: false,
            field: {
                type: 'textfield',
                //allowBlank: false,
                //vtype: 'alphaSpace'
            }
        }

        ],
        renderTo: Ext.getBody(),
        //pt 2
        plugins: [
            rowEditing
        ],
        dockedItems: [{
            xtype: 'toolbar',
            store: store,
            dock: 'bottom',
            //creating, add items
            items: [{
                iconCls: 'add',
                text: 'Add',
                handler: function() {
                    rowEditing.cancelEdit();
                    // create a record
                    var newRecord = Ext.create('PersonalInfo');
                    store.insert(0, newRecord);
                    rowEditing.startEdit(0, 0);

                    // write about this section in tutorial
                    var sm = grid.getSelectionModel();
                    grid.on('edit', function() {

                        var record = sm.getSelection();
                        store.record.commit();
                        //store.sync();
                        //e.record.commit();
                        //store.commitChanges();
                        store.remove(record);
                        store.load();
                        store.sync();
                        alert ('dome');

                    });
                }
            }, {
                iconCls: 'delete',
                text: 'Delete',
                handler: function() {
                    rowEditing.cancelEdit();
                    var sm = grid.getSelectionModel();
                    Ext.Msg.show({
                         title:'Delete Record?',
                         msg: 'You are deleting a record permanently, this cannot be undone. Proceed?',
                         buttons: Ext.Msg.YESNO,
                         icon: Ext.Msg.QUESTION,
                         fn: function(btn){
                            if(btn === 'yes') {
                                store.remove(sm.getSelection());
                                store.sync();
                            }
                         }
                    });
                }
            },
            {
                xtype: 'button',
                iconCls:'refresh',
                text: 'Refresh Grid',
            //  action: 'refresh',
                handler:function(){
                    //var reload=this.getGridPanel().getStore();
                    store.load();
                }

            }]
        }]
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:35:56.420

你可以使用`autoSync:true`store config 让它自动发布。

# image-processing - HoG 特征如何以图形方式表示？

> ID：13198889
> 
> 赞同：21
> 
> 时间：2012-11-02T16:02:44.590
> 
> 标签：image-processing, opencv, computer-vision, feature-extraction

我正在实现“用于人体检测的定向梯度直方图”中的定向梯度直方图特征，我想可视化结果。所有关于这些特性的论文都使用标准的可视化，但我找不到任何关于这些特性是如何生成的描述。我将不胜感激解释或有用的链接。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-04T07:54:16.807

你在论文中看到的可视化可以解释如下：

描述符由网格中覆盖图像窗口的 M*N 个单元组成。每个单元由边缘方向的直方图表示，其中离散化边缘方向的数量是一个参数（通常为 9）。细胞直方图通过“星”显示直方图中边缘方向的强度：特定方向越强，相对于其他方向的时间越长。

请注意，有多种归一化方案：局部方案，其中单元格仅相对于相邻单元格进行归一化（如 Dalal-Triggs 的原始论文中所示），或全局方案，其中方向长度由所有单元格归一化. 另请注意，一些作者对每个单元格使用多个局部归一化（例如我在下面提到的那个），但可视化仅显示一个（或它们的平均值）。

Felzenszwalb 等人开创性工作的 Matlab 代码。通过在图像上绘制细胞来可视化细胞，其中强度通过边缘的强度而不是长度来可视化。你可以在他们在这里提供的包中找到它[(DPM)](http://people.cs.uchicago.edu/~rbg/latent/)。查找名为 HOGpicture.m 的函数

下面的示例显示了一个自行车模型（来自 Felzenszwalb 等人），其 HoG 由 7*11 个单元组成，每个单元有 8 个方向

![自行车的 HoG 模型，取自 Felzenszwalb 等人](../Images/5bce805ac413cd2d78e27b5989cafa09.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-15T19:42:53.023

一个名为**[Jurgenwiki](http://www.juergenwiki.de/work/wiki/doku.php?id=public:hog_descriptor_computation_and_visualization)**的博客有一些示例代码（称为`get_hogdescriptor_visu()`），用于在 OpenCV 中可视化 HOG 描述符。过去，我将 Jurgenwiki 代码复制/粘贴到 C++ 文件中，将我的 HOG 功能传递到`get_hogdescriptor_visu()`中，可视化效果看起来不错。这是一个例子：

![在此处输入图像描述](../Images/0c2a782739ec5b231fbaf7e584fc57b8.png)

Jurgenwiki 代码的一个警告是它希望您使用默认`HOGDescriptor()`参数（例如 16x16 块、8x8 单元、9 个方向箱）。但是，如果您在 中使用自定义参数`HOGDescriptor`，您可以调整 Jurgenwiki 代码以匹配您的 HOG 参数。

[这篇 StackOverflow 帖子](https://stackoverflow.com/questions/10862542/hog-features-visualisation-with-opencv-hogdescriptor-in-c)也非常有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-16T18:11:48.463

最近在 iccv 2013 上发表了一篇关于可视化 HOG 特征的论文 (HOGles)，这可能很有帮助，代码可在此处获得[http://web.mit.edu/vondrick/ihog/#code](http://web.mit.edu/vondrick/ihog/#code)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-24T15:57:46.310

scikit-image 还提供 HOG 可视化： [http ://scikit-image.org/docs/dev/auto_examples/plot_hog.html](http://scikit-image.org/docs/dev/auto_examples/plot_hog.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-19T03:09:44.270

在这里，我想问一个问题，一个人走路的两个序列帧，我们提取每个图像的 HOG，然后对两个 HOG 进行差分。我想知道我们在最终的（差异）HOG 可视化中得到了什么信息。

谢谢

# email - 在 Magento 中创建发票和电子邮件

> ID：13198893
> 
> 赞同：1
> 
> 时间：2012-11-02T16:02:58.323
> 
> 标签：email, magento, invoice

我想在 Magento 中自动创建发票和电子邮件。发票创建似乎有效，但我正在让电子邮件部分工作......

```
 Mage::app();       
    $order = Mage::getModel('sales/order')->loadByIncrementId($orderid);

    try 
    {
        if(!$order->canInvoice())           {   
            Mage::throwException(Mage::helper('core')->__('Cannot create an invoice.'));
        }

        $invoice = Mage::getModel('sales/service_order', $order)->prepareInvoice();

        if (!$invoice->getTotalQty()) {
            Mage::throwException(Mage::helper('core')->__('Cannot create an invoice without products.'));
        }

        $invoice->setRequestedCaptureCase(Mage_Sales_Model_Order_Invoice::CAPTURE_ONLINE);
        $invoice->register();
        $transactionSave = Mage::getModel('core/resource_transaction')
            ->addObject($invoice)
            ->addObject($invoice->getOrder());
        $transactionSave->save();
    }       
    catch (Mage_Core_Exception $e) {

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-23T13:27:32.307

我知道我的反应有点晚，但对于找到此页面的其他人：

您需要添加发送电子邮件的代码。在注册行之后执行此操作：

* * *

```
$invoice->register();
$invoice->getOrder()->setCustomerNoteNotify(true);
$invoice->getOrder()->setIsInProcess(true);
$invoice->sendEmail(); 
```

* * *

setCustomerNoteNotify 用于表示客户是否必须收到电子邮件。

setIsInProcess 将订单状态更改为正在处理

# sql - 如何从 Oracle 中的表中选择具有顺序的范围行？

> ID：13198894
> 
> 赞同：1
> 
> 时间：2012-11-02T16:02:58.013
> 
> 标签：sql, oracle

在 Oracle 中没有限制，所以我使用了这个：

```
SELECT * 
FROM ( 
     SELECT m.*, ROWNUM r 
     FROM TABLE_NAME m  
     WHERE COL LIKE XYZ 
     ORDER BY ID ASC
     ) 
WHERE r BETWEEN 10 AND 20; 
```

但它仍然没有被订购。它是从 20 到 10 订购的，但不是整个桌子。我怎样才能做到这一点？

我想用`WHERE`子句订购整个表并获得范围内的表。上面的解决方案只在范围内排序。

* * *

**也许不那么令人困惑的解决方案（以防有人在这里搜索）：**

```
SELECT a.* from (
  SELECT b.*, ROWNUM r FROM ( 
    SELECT * FROM table ORDER BY id ASC  
  ) b  WHERE  (city LIKE '%abc%' OR city IS NULL)
) a where r between 5 and 10 
```

因此，最好将 order 放在中间条件中，然后将其他条件放在第二级，并将行号放在最外层。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:21:06.617

据我所知，您需要多一层嵌套，例如：

```
select b.* from (
 select a.*, rownum rnum from (
  select * from foo order by id
 ) a where rownum <= 20
) b where b.rnum >= 10; 
```

演示：

```
SQL> create table foo (id number);
Table created.
SQL> insert into foo
  2   select round(dbms_random.value(0, 1000))
  3   from dual
  4   connect by level <= 15;
15 rows created.
SQL> commit;
Commit complete. 
```

`rownum`在订购之前被“物化”，因此您的方法无法奏效，正如您所注意到的：

```
SQL> select foo.*, rownum from foo order by id;

    ID     ROWNUM
---------- ----------
        24     15
       148      5
       151      2
       225      7
       234     11
       292      1
       305      4
       351      9
       383      8
       394     13
       426     12
       477     10
       553      6
       594     14
       917      3
15 rows selected. 
```

所以嵌套一次以获得排序后的行号：

```
SQL> select a.*, rownum from (
  2   select * from foo order by id
  3  ) a;

    ID     ROWNUM
---------- ----------
        24      1
       148      2
       151      3
       225      4
       234      5
       292      6
       305      7
       351      8
       383      9
       394     10
       426     11
       477     12
       553     13
       594     14
       917     15
15 rows selected. 
```

但是你不能这样做`between`：

```
SQL> select a.*, rownum from (
  2   select * from foo order by id
  3  ) a where rownum between 5 and 10;

no rows selected 
```

这是因为`rownum`只有在一行进入结果集时才会获取一个值。并添加第二层以删除第一行：

```
SQL> select id, rnum from (
  2   select id, rownum rnum from (
  3    select id from foo order by id
  4   ) a where rownum <= 10
  5  ) b where b.rnum >= 5;

    ID   RNUM
---------- ----------
       234      5
       292      6
       305      7
       351      8
       383      9
       394     10

6 rows selected. 
```

# include - 包括来自不同文件的 sparql 子查询

> ID：13198902
> 
> 赞同：4
> 
> 时间：2012-11-02T16:03:19.960
> 
> 标签：include, subquery, rdf, sparql, redundancy

复杂的 SPARQL 查询构建起来很费力，而且难以阅读。有没有办法在 SPARQL 中“包含”子查询，例如使用“include queryX”行，这样可以避免每次在单独的更复杂的查询中写出重复的简单查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T17:36:57.187

[SPARQL FAQ](http://thefigtrees.net/lee/sw/sparql-faq#subqueries)提到了以下可能性：

> 可以使用 SPARQL 引擎完成非常有限的子查询形式，该引擎将通过创建一个由提交到 SPARQL 端点的嵌入式 SPARQL CONSTRUCT 查询组成的 URL 并提供此 URL 作为正在查询的 RDF 数据集。在实践中，这种技术通常效率低下，并且受到相关软件可能的 URL 最大长度限制。

[W3C wiki](http://www.w3.org/wiki/SPARQL/Extensoins/Subqueries)还提到了一些其他可能的解决方法。

# wpf - 将 WPF 用户控件序列化为 XElement 时如何保持绑定

> ID：13198905
> 
> 赞同：0
> 
> 时间：2012-11-02T16:03:34.370
> 
> 标签：wpf, binding, xelement

我正在尝试序列化一个自定义 WPF 用户控件，该控件具有一个带有绑定到名为“频率”的依赖项属性的文本块的网格。定义文本块的代码片段如下（用户控件的定义很长，贴在这里！）：

```
<TextBlock x:Name="FrequencyText" Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="2"
                               FontFamily="Arial Rounded MT"
                               Foreground="White" FontSize="10" FontWeight="DemiBold" Margin="3"
                               TextBlock.Text="{Binding Frequency, ElementName=FrequencyButtonControlA, Path=Frequency}"
                               TextAlignment="Center" VerticalAlignment="Center" HorizontalAlignment="Left" /> 
```

我正在开发一个编辑器工具，使用户能够将一些自定义控件排列到画布中并更改它们的属性，我需要为用户提供克隆现有元素的能力。为了做到这一点，我将控件序列化为一个 XElement，然后实例化一个新的。执行序列化的代码如下：

```
var contentXaml = (commsPanelItem.Content != null) ? XamlWriter.Save(commsPanelItem.Content) : string.Empty;
var serializedItem = new XElement(
"CommsPanelItem",
new XElement("Type", commsPanelItem.GetType().ToString()),
new XElement("Left", Canvas.GetLeft(commsPanelItem.UIElement)),
new XElement("Top", Canvas.GetTop(commsPanelItem.UIElement)),
new XElement("Width", commsPanelItem.Width),
new XElement("Height", commsPanelItem.Height),
new XElement("zIndex", Panel.GetZIndex(commsPanelItem.UIElement)),
new XElement("Content", contentXaml),
commsPanelItem.GetAttributesForSavingPanelInConfigurator() as XElement);
return serializedItem; 
```

我遇到的问题是，在序列化文本块时，“文本”字段不保留与“频率”依赖属性的绑定，它只是使用用户分配的值导出（“131.5”在以下示例）：

```
TextBlock Text="131.5" FontFamily="Arial Rounded MT" FontWeight="SemiBold" FontSize="10" Foreground="#FFFFFFFF" TextAlignment="Center" Name="FrequencyText" Margin="3,3,3,3" HorizontalAlignment="Left" VerticalAlignment="Center" Grid.Column="1" Grid.Row="1" Grid.ColumnSpan="2" 
```

我的问题是：有没有办法能够序列化依赖属性的绑定而不是实际值？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:53:54.470

使用在 FrameworkElements 上找到的“GetBinding”方法，而不是提取它的值：

```
BindingExpression bindingExpression = myTextBox.GetBindingExpression(TextBox.TextProperty); 
```

然后您可能可以序列化 BindingExpression。

# c# - 网络浏览器身份验证

> ID：13198906
> 
> 赞同：0
> 
> 时间：2012-11-02T16:03:39.053
> 
> 标签：c#, authentication

我正在寻找解决以下问题的想法。

我用 编写了一个 C# 应用程序`web browser`，它显示了一个小型 CMS 的管理页面。我不想将用户名和密码传递给页面，以便 C# Windows 应用程序的用户无需输入“用户名/密码”即可访问管理页面

我有以下想法，我不喜欢。用户保存在应用程序设置“用户名/密码”中。每次加载管理页面时，都应该加载 GET 变量。例如[http://www.mypage.de/administrastion/?user=username&pass=password](http://www.mypage.de/administrastion/?user=username&pass=password)

但这还不够安全。

任何想法，关于我怎样才能做得更好？

# android - 用于 Android 应用程序 tess4j 的 OCR

> ID：13198909
> 
> 赞同：0
> 
> 时间：2012-11-02T16:03:52.420
> 
> 标签：android, eclipse, ocr, tesseract

基本上是在设计一个应用程序，它将从 android 设备的默认摄像头捕获图像并将该图像显示在图像视图中！工作正常！够好了！

```
capt_but.setOnClickListener(new View.OnClickListener()
    {
        //@Override
    // TODO Auto-generated method stub          
             public void onClick(View v)
             {
                 Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
                 startActivityForResult(cameraIntent, CAMERA_REQUEST); 
             }
    }); 
}
    protected void onActivityResult(int requestCode, int resultCode, Intent data)
    {  
       if (requestCode == CAMERA_REQUEST && resultCode == RESULT_OK) 
       {  
            Bitmap photo = (Bitmap) data.getExtras().get("data"); 
            imageView.setImageBitmap(photo);
       }  
    } 
```

我的下一个任务是应用 tess4j OCR 功能，该功能基本上可以从我捕获的图像中提取字符！tess4j 基本上是 tesseract OCR 的 java 包装器！我正在 ECLIPSE 中编程！这是它的链接！

tess4j.sourceforge.net

我添加了我可以在开源文件中找到的所有 jar，并将它们添加到我创建的文件夹中，该文件夹是 eclipse 中主项目目录的 lib！我全部选择了它们并将它们添加到构建路径中！

然后我将我能找到的所有 dll 复制到主项目目录中！然后在上面的同一链接上使用一个示例，我将我的代码编写如下：

```
public void myfunction(Intent data)
    {
        Bitmap photo = (Bitmap) data.getExtras().get("data");
        Tesseract instance = Tesseract.getInstance(); // JNA Interface Mapping
        File imageFile = new File("myimage.tif");
        try 
        {   
            String result = instance.doOCR(imageFile)
            System.out.println(result);
        } 
        catch (TesseractException e)
        {
            System.err.println(e.getMessage());
        }
    } 
```

我的项目正在拾取 tesseract jar 并使我能够浏览 . 操作员！然而在网上，

```
String result = instance.doOCR(imageFile) 
```

我得到的错误是：

java.awt.image.BufferedImage 类型无法解析。它是从所需的 .class 文件中间接引用的

快速修复是：配置构建路径！

我不知道是什么问题！我正在努力找出问题所在！我在上面提到的步骤中遗漏了什么吗？我下载的 tess4j 还有其他文件！请帮助从上面的链接下载 tess4j 以检查下载中的文件！任何xml问题？或任何构建路径问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T14:19:21.847

> java.awt.image.BufferedImage 类型无法解析。

从该错误消息来看，Android 平台似乎`BufferedImage`不支持该类。 [Android API](http://developer.android.com/reference/packages.html)不包含该`java.awt.image`包。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-06T18:33:29.657

正如其他人所说`BufferedImage`，Android平台不支持。解决方案是使用Tess-two，它是Tess4j 等效的Tesseract wrapper api for android。

参考： [使用 tess-two 的 android 中的 OCR](http://www.codeproject.com/Tips/840623/Android-Character-Recognition)

虽然这很老了，但分享一下，以便其他人可能会发现它有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-05T04:53:08.943

我知道这个问题真的很老了。但是要修复您的错误，请导航到属性>java 构建路径> 库> 添加库并包含 JRE 系统库。:)

# java - apache commons 3.1 中的 httpClient 代理支持

> ID：13198910
> 
> 赞同：1
> 
> 时间：2012-11-02T16:03:53.193
> 
> 标签：java, apache, proxy, apache-commons

我正在使用 apache commons 3.1 来实现具有代理支持的 httpClient。我正在尝试通过代理连接到远程主机。代理服务器配置为没有任何身份验证，但是远程主机配置了身份验证。当我通过属性文件传递代理参数时，它会在执行时发出警告：

WARN - 所需的代理凭据不适用于 BASIC @xx.xx.xx.xx WARN - 请求抢先身份验证，但没有可用的默认代理凭据

但执行继续进行。

另一方面，当我通过 JVM 参数传递代理参数时，再次给出相同的警告并停止执行。

这种行为有什么具体原因吗？通过属性文件和通过 JVM arg 传递代理参数有什么区别吗？

这是代码：

```
if(System.getProperty("http.proxyHost") != null && System.getProperty("http.proxyPort") != null) {
            httpClient.getHostConfiguration().setProxy(System.getProperty("http.proxyHost"), Integer.parseInt(System.getProperty("http.proxyPort")));
        }
        else if(AMXAdminTask.props.getProperty("http.proxyHost") != null && AMXAdminTask.props.getProperty("http.proxyPort") != null) {
            httpClient.getHostConfiguration().setProxy(Propfile.props.getProperty("http.proxyHost"), Integer.parseInt(Propfile.props.getProperty("http.proxyPort")));
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:58:10.940

看起来您正在尝试将两种截然不同的事物结合起来。您在上面发布的代码正确地让您通过您的代理，但远程主机需要 BASIC 身份验证。下面的示例使用 Jersey 客户端（在现有项目中用于进行 RESTful 调用），但您应该了解您需要做什么。如果您坚持使用 Apache HttpComponents，请查看以下内容：http: [//hc.apache.org/httpcomponents-client-ga/tutorial/html/authentication.html](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/authentication.html)

```
import org.apache.commons.lang.StringUtils;

import com.sun.jersey.api.client.Client;
import com.sun.jersey.api.client.filter.HTTPBasicAuthFilter;
import com.sun.jersey.client.apache.ApacheHttpClient;
import com.sun.jersey.client.apache.config.ApacheHttpClientConfig;
import com.sun.jersey.client.apache.config.DefaultApacheHttpClientConfig;

public abstract class BaseProxyProvider {
    protected Client getHttpClient() {
        final DefaultApacheHttpClientConfig cc = new DefaultApacheHttpClientConfig();
        if (StringUtils.isNotEmpty(System.getProperty("http.proxyHost"))) {
            cc.getProperties()
                    .put(ApacheHttpClientConfig.PROPERTY_PROXY_URI,
                            "http://" + System.getProperty("http.proxyHost") + ":"
                                    + System.getProperty("http.proxyPort") + "/");
        }
        Client c = ApacheHttpClient.create(cc);

        c.addFilter(new HTTPBasicAuthFilter(WebAppPropertyReader.getProperties().getProperty(
                WebAppPropertyReader.SERVICE_USER), WebAppPropertyReader.getProperties().getProperty(
                WebAppPropertyReader.SERVICE_PASSWORD)));
        return c;
    }
} 
```

# codeigniter - 调用非对象、codeigniter 上的成员函数 insert()

> ID：13198914
> 
> 赞同：2
> 
> 时间：2012-11-02T16:03:59.380
> 
> 标签：codeigniter, insert

我正在尝试在codeigniter中将数据插入mysql。控制器类：

```
class Ci_insert extends CI_Controller
    {
        function __construct()
        {
            parent::__construct();
        }

        function index()
        {
            $data = array(
                          "USN" => "TRE5rCS89G",
                          "name" => "NITISH DOLAKASHARIA",
                          "branch" => "CS"
                          );

            $this->load->model('ci_insert_model');

            $this->ci_insert_model->addToDb($data);
        }

    } 
```

模型类：

```
class ci_insert_model extends CI_Model
    {
        function __construct()
        {
            parent::__construct();
        }
        function addToDb($data)
        {

            //var_dump($data);
            $this->db->insert('class_record',$data);
        }
    } 
```

但是当我尝试运行代码时，它显示`Fatal error: Call to a member function insert() on a non-object in C:\wamp\www\CodeIgniter\application\models\ci_insert_model.php on line 12`.

上面的代码有什么问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T19:24:50.610

你不见了`$this->load->database();`

`$this->db->method_name();`仅在加载数据库库时才有效。

如果您打算在整个应用程序中使用数据库，我建议将其添加到您的`autoload.php`in `/application/config/`.

正如其他人所提到的，`CI_`从你的类名中删除前缀。`CI_`为框架类保留。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-25T15:36:38.987

在配置文件夹中添加自动加载库打开 autoload.php 并设置`$autoload['libraries'] = array('database');`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-02T19:25:17.003

您必须`'$this->load->library('database')'`在模型之前使用`'$this->db->insert()'` 或自动加载数据库库。转到配置文件夹选择 autoload.php 搜索 $autoload['libraries'] 并将空数组（）替换为数组（'数据库'）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T17:12:57.027

试用。

控制器：insert.php

```
class Insert extends CI_Controller
{
    function __construct()
    {
        parent::__construct();
    }

    function index()
    {
        $data = array(
                      "USN" => "TRE5rCS89G",
                      "name" => "NITISH DOLAKASHARIA",
                      "branch" => "CS"
                      );

        $this->load->model('insert_model');

        $this->insert_model->addToDb($data);
    }

} 
```

型号：insert_model.php

```
class Insert_model extends CI_Model
{
    function __construct()
    {
        parent::__construct();
    }
    function addToDb($data)
    {

        //var_dump($data);
        $this->db->insert('class_record',$data);
    }
} 
```

请在类的第一个后面写大写，不要添加前缀`ci_`。

# bash - bash 文件中的活动 .bashrc 设置

> ID：13198917
> 
> 赞同：2
> 
> 时间：2012-11-02T16:04:07.030
> 
> 标签：bash

我没有使用默认的 python，而是在 .bashrc 中将“python”指向我自己的 python 版本。但是，当我编写一个 bash 脚本并在其中调用 python 时，它仍然使用默认的 python。为什么会这样，我该如何设置它，这样我就不必将“source ~/.bashrc”添加到每个 sh 文件中？谢谢

```
[yl@chh test]$ more test.sh 
echo `which python`
[yl@chh test]$ sh test.sh 
/usr/bin/python
[yl0@chh test]$ which python
alias python='~/tools/Python-2.7.3/python'
~/tools/Python-2.7.3/python 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:06:26.903

从`bash`手册页：

> 当 shell 不是交互式时，别名不会展开，除非 expand_aliases shell 选项使用 shopt 设置（参见下面 SHELL BUILTIN COMMANDS 下的 shopt 描述）。

更改您的 PATH 而不是为此使用别名可能会更好。

# ruby-on-rails - 如何在 Rails 中创建用户组模型？启用多重授权

> ID：13198920
> 
> 赞同：1
> 
> 时间：2012-11-02T16:04:20.067
> 
> 标签：ruby-on-rails, model

一个用户可以创建一个“组”，其他用户可以加入。每个组都有自己的管理员和版主等，可以做一些事情，比如创建帖子、邀请用户等。

我认为这里应该使用“has_many through”，但不确定授权，因为角色基于不同的组。CanCan 中设置的角色似乎不适合它，管理员仅适用于一组，而不是整个站点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:37:00.540

似乎是用户与其角色之间的混淆。一个“组”有许多“用户”。“用户”对组“ALPHA”具有一个（或多个）“角色”（管理员）。“用户”可能在另一个组“DELTA”上具有另一个角色（“侦听器”）。

Admin 是一个角色，Moderator 和 listener 是相同的角色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:34:50.440

你必须创建像 user.is_admin_of?(GroupObject) 这样的角色所以第一步是创建角色[https://github.com/timonv/rollable](https://github.com/timonv/rollable)

# vb.net - 通过 VB.NET 重命名 MSSQL 数据库中的列的正确过程是什么？

> ID：13198932
> 
> 赞同：1
> 
> 时间：2012-11-02T16:05:01.967
> 
> 标签：vb.net, sql-server-2008

我在重命名列时遇到问题。我的代码如下：

```
Using m_cnInterval
    Using m_CMDInterval = New SqlCommand()
        m_CMDInterval.Connection = m_cnInterval
        m_CMDInterval.CommandText = "EXEC sp_rename '[" & strClassColumnName(intClassArrayPosition) & "]', '[" & strRenameClassColumn(intClassArrayPosition) & "]', 'COLUMN'"
        m_CMDInterval.CommandType = CommandType.Text
        m_CMDInterval.ExecuteNonQuery()
    End Using
End Using 
```

我收到如下错误消息：

“参数@objname 不明确或声明的@objtype（列）错误”

我认为这个错误与我使用单引号和括号的方式有关。使用变量作为列名时还有另一种语法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:19:11.263

您需要在第一个参数中给出表的限定路径。尝试这样的事情：

```
m_CMDInterval.CommandText =
        String.Format("EXEC sp_rename '[{0}].[dbo].[{1}].[{2}]', '{3}', 'COLUMN'",
                      "databasename",
                      "tablename",
                      "old column name",
                      "new column name") 
```

在其中用变量填充值。新名称不能有括号 [] 否则它们会成为新名称的一部分（至少这是我在 SSMS 中测试时看到的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T23:31:57.620

我实际上最终使用了以下内容：

```
m_CMDInterval.CommandText = "EXEC sp_rename 'Interval.[" & strClassColumnName _
(intClassArrayPosition) & "]', '" & strRenameClassColumn(intClassArrayPosition) _
 & "', 'COLUMN'" 
```

我需要用列名指定表名。我使用了括号，因为列名中有一个空格。我不必在重命名的列名上使用方括号，即使它的名称中也有空格。

谢谢您的帮助！

# android - 在 SDCard Android 模拟器上找不到 vcf 文件

> ID：13198933
> 
> 赞同：0
> 
> 时间：2012-11-02T16:05:08.763
> 
> 标签：android, vcf-vcard

这是我将联系人导出到 SD 卡上的 VCF 文件的代码。但我在 SDCard 上找不到 vcf。帮我找到那个。提前致谢

获取 VCF 文件的代码：

```
public static void getVCF() 

{

 final String vfile = "POContactsRestore.vcf";

 Cursor phones = mContext.getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,null, null, null);

 phones.moveToFirst();
   for(int i =0;i<phones.getCount();i++)
   {
      String lookupKey =  phones.getString(phones.getColumnIndex(ContactsContract.Contacts.LOOKUP_KEY));
     Uri uri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_VCARD_URI, lookupKey);

    AssetFileDescriptor fd;
     try 
     {
         fd = mContext.getContentResolver().openAssetFileDescriptor(uri, "r");
         FileInputStream fis = fd.createInputStream();
         byte[] buf = new byte[(int) fd.getDeclaredLength()];
         fis.read(buf);
         String VCard = new String(buf);
         String path = Environment.getExternalStorageDirectory().toString() + File.separator + vfile;
         FileOutputStream mFileOutputStream = new FileOutputStream(path, true);
                    mFileOutputStream.write(VCard.toString().getBytes());           
         phones.moveToNext();                           
         Log.d("Vcard",  VCard);
     } 
     catch (Exception e1) 
     {
          // TODO Auto-generated catch block
          e1.printStackTrace();
     }

 }
} 
```

清单 // 许可

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:17:27.813

尝试：

```
 String path = Environment.getExternalStorageDirectory().getAbsolutePath() + file.separator + vfile; 
```

# c# - 公共领域很少是个好主意？

> ID：13198936
> 
> 赞同：3
> 
> 时间：2012-11-02T16:05:26.427
> 
> 标签：c#, .net-3.5

显然，公共领域很少是一个好主意，并且没有添加任何属性。

例如：

```
public class ClientGroupDetails
{
    public DateTime Col2;
    public String Col3;
    public Int32 Col4;

    public ClientGroupDetails(DateTime m_Col2, String m_Col3, Int32 m_Col4)
    {
        Col2 = m_Col2;
        Col3 = m_Col3;
        Col4 = m_Col4;
    }

    public ClientGroupDetails() { }
}

[WebMethod()]
public List<ClientGroupDetails> GetClientGroupDetails(string phrase)
{
    var client_group_details = new List<ClientGroupDetails>();

    using (connection = new SqlConnection(ConfigurationManager.AppSettings["connString"]))
    {
        using (command = new SqlCommand(@"select col2, col3, col4 from table1 where col1 = @strSearch", connection))
        {
            command.Parameters.Add("@strSearch", SqlDbType.VarChar, 255).Value = phrase;

            connection.Open();
            using (reader = command.ExecuteReader())
            {
                int Col2Index = reader.GetOrdinal("col2");
                int Col3Index = reader.GetOrdinal("col3");
                int Col4Index = reader.GetOrdinal("col4");

                while (reader.Read())
                {
                    client_group_details.Add(new ClientGroupDetails(
                        reader.IsDBNull(Col2Index) ? (Nullable<DateTime>)null : (Nullable<DateTime>)reader.GetDateTime(Col2Index),
                        reader.IsDBNull(Col3Index) ? null : reader.GetString(Col3Index),
                        reader.GetInt32(Col4Index)));
                }
            }
        }
    }

    return client_group_details;
}
} 
```

我的问题是，如何将使用公共字段的代码转换为属性？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-02T16:07:06.750

最简单的方法就是这样做：

```
public DateTime Col2 { get; set; }
public String Col3 { get; set; }
public Int32 Col4 { get; set; } 
```

这将使它们自动实现属性而不是字段。

请注意，我不同意您关于“公共领域从来都不是一个好主意”的说法——我同意它们*很少*是一个好主意，但是（很少）有时它们比公共属性更好用。对于公共字段何时*可能*合适的一些很好的论点，我建议阅读 Rico Mariani 的“基于价值的编程的十个问题”，包括[问题](http://blogs.msdn.com/b/ricom/archive/2006/08/31/performance-quiz-11-ten-questions-on-value-based-programming.aspx)和[答案](http://blogs.msdn.com/b/ricom/archive/2006/09/07/745085.aspx)。他为公共字段提供了强有力的案例，尤其是在没有非法值并且您期望常见用例包括频繁突变的情况下。

话虽如此，我确实认为，在您的具体情况下，转换为属性将是有益的。此外，我建议将其转换为*具有有意义名称的属性*（不是`Col2`，而是更像`Date`等）。

* * *

根据评论进行编辑：

你的全班会变成：

```
public class ClientGroupDetails
{
    public DateTime Col2 { get; set; }
    public String Col3 { get; set; }
    public Int32 Col4 { get; set; }

    public ClientGroupDetails(DateTime m_Col2, String m_Col3, Int32 m_Col4)
    {
        Col2 = m_Col2;
        Col3 = m_Col3;
        Col4 = m_Col4;
    }

    public ClientGroupDetails() { }
} 
```

但是，我建议重新修改它以获得更好的名称，即：

```
public class ClientGroupDetails
{
    // Not 100% sure what appropriate names should be here
    public DateTime Date { get; set; }
    public String Name { get; set; }
    public Int32 Id { get; set; }

    public ClientGroupDetails(DateTime date, String name, Int32 id)
    {
        this.Date = date;
        this.Name = name;
        this.Id = id;
    }

    // I also wouldn't include this unless you really need it...
    // public ClientGroupDetails() { }
} 
```

请注意，如果您在创建此类后不打算编辑值，则可以通过以下方式使它们公开可见以获取但不能设置的属性：

```
 public DateTime Date { get; private set; }
    public String Name { get; private set; }
    public Int32 Id { get; private set; } 
```

这将允许您的类（即：构造函数）设置值，但类之外的任何内容都不允许更改它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T16:09:04.210

您可以使用私有和公共关键字来提供对这些变量的访问。完整的（非懒惰的）方式是（这里`T`是一些类类型）

```
private T myT;
public T MyT
{
    get { return this.myT; }
    set { this.myT = value; }
} 
```

或者对于我们这些懒惰的人，你可以使用

```
public T MyT { get; set; } 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T16:06:29.400

这是属性语法的示例。在`get`and`set`块中，您现在可以像函数一样执行代码，因此您可以在将值分配给私有变量之前对其进行验证。您还可以从块中返回计算值，`get`而不仅仅是公开私有值。

```
private MyType _myField;

public MyType MyField
{
    get { return _myField; }
    set { _myField = value; }
} 
```

如果您只是隐藏私人成员，还有速记：

```
public MyType MyField { get; set; } 
```

# git - Gerrit 能否替代 Trac 进行问题跟踪和代码浏览

> ID：13198942
> 
> 赞同：3
> 
> 时间：2012-11-02T16:05:42.830
> 
> 标签：git, jenkins, trac, gerrit

我的系统包含：

*   多个`git`存储库，
*   `Trac 0.12.2`用于问题\功能跟踪、wiki 页面和代码浏览（差异等）
*   `Jenkins`对于 CI，它会在发布时推送版本更改`git`。

我想转移到`gerrit`它的代码审查功能，类似看门人的功能，并且因为它可以更好地与多个`git`存储库一起使用。

我的问题是可以`gerrit`替代`Trac`上述功能吗？
以及如何让 Jenkins 在发布时使用它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:46:38.257

Gerrit 非常适合代码审查和访问控制。它没有任何问题跟踪或 wiki 功能。您将需要为这些功能使用单独的系统。使用问题跟踪器 ID 标记您的 git 提交消息是很流行的，并配置 Gerrit 以在检测到这些标记时提供指向您的问题跟踪器的链接。

Gerrit 使用 gitweb 进行代码浏览。由于某些原因，Gitweb 并不理想，Google 正在开发一个替代系统，他们希望在准备好后将其开源。

将 Jenkins 与 Gerrit 集成的机会很多。例如，您可以让 Jenkins 运行正在审查的代码的测试构建，以确保它不会破坏构建。查看 gerrit-trigger 插件。

# coffeescript - Coffeescript 在选择框值更改时从列表中动态创建/调用函数

> ID：13198945
> 
> 赞同：0
> 
> 时间：2012-11-02T16:06:01.103
> 
> 标签：coffeescript, pixastic, jquery-select2

我正在使用[Pixastic 库](http://www.pixastic.com/lib/docs/)添加一些图像编辑工具。这个想法是用户可以从选择框中选择他们想要的图像或工具的一个方面，然后该工具将显示在选择框下方（我正在使用[select2](http://ivaynberg.github.com/select2/)）并且用户可以通过滑块进行编辑。这是我到目前为止所拥有的：

```
# This seeds the select2 options list   
imageToolsList = [
    {id: 'bl', text: 'Blur'}
    {id: 'bc', text: 'Brightness/Contrast'}
    {id: 'ca', text: 'Color Adjust (RGB)'}
    ...
]

#Creates a select box and calls imageTooler function when the value of the box is changed
$(".image_tools_select").each ->
    $(@).select2
        placeholder: "Select an adjustment tool."
        data: imageToolsList
    $(@).on("change", (i) ->
        imageTooler JSON.stringify(
            val: i.val
            clipName: $(@).closest('.clip').attr('id')
        )
    )

# The function called on the value that the select box is changed to
imageTooler = (i) ->
    imageData = jQuery.parseJSON(i)
    iId = imageData.val
    imageClipName = imageData.clipName
    newTool = "<div id=#{iId}><label>#{iId}</label><div class='slider#{iId}'></div></div>"
    $("##{imageClipName}").find(".imagetoolfields").append newTool 
```

This succeeds in appending the name of the editing tool and the correct slider div beneath the select box when a tool is chosen, but what I'd really like is dynamically create a slider function for that particular tool and image (there are multiple images on一个页面，每个页面都有自己的编辑工具带）。这是一个适用于“模糊”工具的滑块功能：

```
$('.sliderbl').slider
    min: 0
    max: 5
    value: 0.5
    step: 0.1
    range: "min"
    slide: (event, ui) ->
        $("#img_snapshot_16").pixastic("blurfast", {amount:ui.value}) 
```

有没有办法扩展 imageToolsList 使它看起来像：

```
imageToolsList = [
    {id: 'bl', text: 'Blur', tool: $("##{imageClipName}").pixastic("blurfast", {amount:ui.value}), sliderVals: {min: 0, max: 5, value: 0.5, step: 0.1, range: "min"} }
    ...
] 
```

然后为 中的每个工具动态创建 jQuery 滑块函数`imageTooler`，就像 div 和滑块 div 所做的那样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:16:33.153

对于任何复杂的东西，评论都会变得有点乏味，所以我会继续把它全部映射出来。我对何时何地定义了什么做了一些假设，但我认为这些假设并不重要。

我们将从一个简化的案例开始：只有一个与您在 中的对象相似的对象`imageToolsList`：

```
{
    id: 'bl'
    text: 'Blur'
    sliderVals: { min: 0, max: 5, value: 0.5, step: 0.1, range: "min" }
    tool: (imageClipName) ->
        (event, ui) -> $("##{imageClipName}").pixastic("blurfast", {amount:ui.value})
} 
```

我稍微调整了顺序并切换`tool`到返回函数的函数。我们不希望`pixastic`在您在 中定义对象字面量时发生调用`imageToolsList`，创建`tool`一个函数可以让我们将`pixastic`执行推迟到以后。由于我们（大概）不知道`imageClipName`定义时应该是什么`imageToolsList`，所以我们需要另一个函数来允许我们再次填充它，`pixastic`直到更晚才调用；因此该函数返回一个函数技巧。

鉴于其中之一，我们如何建立`slider`呼叫？我们需要做的就是复制`sliderVals`（避免更改`imageToolsList`）并填写`slide`函数：

```
sliderDef = { id: 'bl', ... }
doTheSliderThing = (imageClipName) ->
    slide = sliderDef.tool(imageClipName)
    args  = $.extend({ }, sliderDef.sliderVals, slide: slide)
    $(".slider#{sliderDef.id}").slider(args)

# And make it all go and pixastic-ify `#pancakes`.
doTheSliderThing('pancakes') 
```

`tool`是一个返回回调函数的函数，因此`sliderDef.tool(imageClipName)`为我们提供了适当的

```
(event, ui) -> $(...).pixastic(...) 
```

回调函数。

如果我们有一个`id`并且我们想要来自 的适当条目`imageToolList`，那么我们必须去寻找它：

```
# If the list is short:
[sliderDef] = (o for o in imageToolList when o.id == id) 
```

[`for`循环](http://coffeescript.org/#loops)返回一个数组，然后展开该[`[sliderDef]`数组](http://coffeescript.org/#destructuring)并将单个结果留在`sliderDef`. 如果`imageToolList`更长，那么您希望在得到结果后立即将循环短路并退出：

```
# Longer list, bail out as soon as we've found what we're looking for.
for o in imageToolList when o.id == 2
    sliderDef = o
    break 
```

或者更好的是，重新设计结构`imageToolList`以允许通过以下方式直接访问`id`：

```
# Even longer list: allow direct access by `id`.
imageToolList =
    bl: { text: 'Blur', sliderVals: { ... }, ... }
    ... 
```

然后我们可以做这样的事情：

```
doTheSliderThing = (id, imageClipName) ->
    sliderDef = imageToolList[id]
    slide     = sliderDef.tool(imageClipName)
    args      = $.extend({ }, sliderDef.sliderVals, slide: slide)
    $(".slider#{id}").slider(args)

# And make it all go and pixastic-ify `#pancakes` using `'bl'`.
doTheSliderThing('bl', 'pancakes') 
```

或者，如果您更喜欢简洁：

```
doTheSliderThing = (id, imageClipName) ->
    $(".slider#{id}").slider($.extend({ }
        imageToolList[id].sliderVals
        slide: imageToolList[id].tool(imageClipName)
    )) 
```

* * *

**更新评论**：如果你有这个：

```
sliderDefs = 
    bl: { text: 'Blur', sliderVals: { ... }, ... }
    ... 
```

然后你可以像这样构建slider2想要的东西：

```
opts = ({id: k, text: v.text} for k,v of sliderDefs) 
```

# objective-c - 如何更改 NSObject 类中的 UIviewController？

> ID：13198953
> 
> 赞同：0
> 
> 时间：2012-11-02T16:06:20.227
> 
> 标签：objective-c, ios, uiview, uiviewcontroller

我有一个名为 Packet 的类，它负责接收数据包。在这个类里面我想改变视图控制器当前的视图控制器是：`JoinViewController`。类定义为

```
@interface Packet : NSObject 
```

我已经尝试了以下代码，但它在这里不起作用是代码：

```
 case PacketTypeMytype:
    {
        GameViewController *gameViewController = [[GameViewController alloc] initWithNibName:@"GameViewController" bundle:nil];
        JoinViewController *join=[[JoinViewController alloc]initWithNibName:@"JoinViewController" bundle:nil];

        [[join navigationController]pushViewController:gameViewController animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:27:07.217

您需要将实例传递`JoinViewController`给数据包对象（作为弱引用），而不是创建一个新实例。

# c# - MVVM 设计问题

> ID：13198954
> 
> 赞同：0
> 
> 时间：2012-11-02T16:06:23.207
> 
> 标签：c#, wpf, xml, mvvm

我的问题是使用列表和列表视图进行操作。Listview 的 itemsSource 属性绑定到我的班级中的一个列表（比如列表）。

我想修改现有项目并将新项目添加到列表中。出于这个原因，我为 Contact(name, surname, ...) 类中的每个元素制作了文本框

现在，如果我想修改所选项目，我将每个文本框的 Text 属性设置为：

```
<TextBox Text="{Binding ElementName=listView1, Path=SelectedItem.Name}"/> 
```

如果我想创建新元素。我必须这样做：

```
<TextBox Text="{Binding ElementName=tempContact, Path=Name}"/> 
```

其中 tempContact 是最近通过按钮添加到列表中的 Contact 类的实例。

问题是我想同时添加和修改这个列表的元素，我需要一个想法。谁能帮我一把？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:21:48.557

我会向您的 ViewModel 添加一个属性，该属性是当前编辑的对象。然后，在您的 ViewModel 中创建一个命令以添加到列表中。例如，NewObjectCommand。在此命令中，您将切换当前正在编辑“新项目”的状态（可能是布尔值），创建新对象。如果您不添加新对象，您的 EditedObject 属性将返回列表中当前选定的对象，如果您正在添加，则返回正在编辑的新项目。

当状态更改并且 EditedObject 属性的逻辑值可以更改时，您将需要在 INotifiyPropertyChanged 接口上引发 PropertyChanged 事件以更新绑定。您应该将包含用于编辑对象的控件的 View 绑定到 ViewModel 的 EditedObject 属性，并确保 ListBox 绑定到 ViewModel 的列表，并且 ViewModel 可以跟踪列表中当前选定的对象。

您必须弄清楚是什么触发机制导致将对象添加到列表中，然后您必须在添加后将状态更改回所选项目。您可能还需要一些验证逻辑以及 IDataErrorInfo 或类似的一些

长话短说：

*   在 ViewModel 中创建状态变量
*   将 EditedObject 公开为属性；如果正在添加一个对象，则返回新对象，否则返回列表中当前选定的项目
*   绑定到那个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:25:33.017

要将项目添加到列表中`TextBox`，请在您的中创建一个字符串类型的属性，`ViewModel`并在属性更改时通知。您还必须为编辑创建一个类似的属性，并且还必须从`ListView`

```
string contactName;
public string ContactName
{
    get 
    {
       return contactName; 
    }
    set 
    {
       contactName = value; 
       OnPropertyChanged("ContactName");
    }
}

private string editedName;
public string EditedName
{
    get { return editedName; }
    set
    {
        editedName = value;
        OnPropertyChanged("EditedName");
    }
}

private int selectedIndex;
public int SelectedIndex
{
    get { return selectedIndex; }
    set
    {
        selectedIndex = value;
        OnPropertyChanged("SelectedIndex");
    }
} 
```

将`TextBoxe`s 和添加`ListBox`到您的视图并应用绑定。这是棘手的部分。因为，当您从 中选择一个项目时`ListView`，所选项目的索引必须存储在 SelectedIndex 属性中，所选联系人姓名应绑定到`TextBox`用于编辑值的联系人。

```
<ListBox  Name="contactNames" SelectedIndex="{Binding SelectedIndex}" ItemsSource="{Binding ContactNames}" SelectedItem="{Binding EditedName}" />
<TextBox Name="addNameTextBox" Text="{Binding ContactName}" />
<TextBox Name="editNameTextBox" Text="{Binding EditedName}" /> 
```

在处理按钮单击的 Command 方法中，添加逻辑以根据属性集添加或编辑项目。

```
if (EditedName != null && EditedName != string.Empty)
{                
    ContactNames[SelectedIndex] = EditedName;
    EditedName = string.Empty;
}
else if (ContactName!=null && ContactName != string.Empty)
{
    ContactNames.Add(ContactName);
    ContactName = string.Empty;
} 
```

不要忘记将您的列表创建为`ObservableCollection`. 否则，`LisView`将不会通知对列表所做的更改。

希望这可以帮助。

# mysql - MySQL修改datetime设置小时和分钟而不修改月、年、日

> ID：13198959
> 
> 赞同：3
> 
> 时间：2012-11-02T16:06:31.057
> 
> 标签：mysql

我有一个带有 DateTime 列的数据库，我想修改小时和分钟而不触及其他任何内容。我不能只添加一个间隔 b/c 值都不同。

例如

```
*************************************************
** What I've got       *|* What I want         **
************************|************************
** 2012-10-01 10:01:01 *|* 2012-10-01 23:59:59 **
** 2012-08-03 13:09:01 *|* 2012-08-03 23:59:59 **
** 2012-05-10 09:00:01 *|* 2012-05-10 23:59:59 **
** 2012-03-20 20:01:01 *|* 2012-03-20 23:59:59 **
************************************************* 
```

有没有办法从查询中做到这一点而不必涉及另一种编程语言？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-02T16:09:57.397

是的，你可以很容易地做到这一点：

```
UPDATE tablename SET columnname = CONCAT_WS(' ', DATE(columname), '23:59:59') 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-02T16:10:07.423

您可以`date_column`在提取列的当前`DATE()`值后将其设置为字符串。

```
UPDATE `table` SET `date_column` = CONCAT(DATE(`date_column`), ' 23:59:59') 
```

# android - 我想以编程方式将普通矩形图像转换为圆形图像

> ID：13198961
> 
> 赞同：3
> 
> 时间：2012-11-02T16:06:32.740
> 
> 标签：android, android-image, bmp

我想以编程方式将普通矩形图像转换为圆形图像，但不使用 xml，请参阅此链接 [Navigation Drawer (Google+ vs. YouTube)](https://stackoverflow.com/questions/11377472/slide-out-menu-like-android-google-and-youtube-style-slide-menu-not-like-faceb)。到目前为止，我关注了这个链接[如何在圆形图像视图中设置位图？](https://stackoverflow.com/questions/5882180/how-to-set-bitmap-in-circular-imageview)，但我只是让它在我的图像上画黑圈。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T09:35:04.760

```
Bitmap bitmap = BitmapFactory.decodeResource(convertView.getResources(), R.drawable.ic_launcher);
                Bitmap circleBitmap = Bitmap.createBitmap(bitmap.getWidth(), bitmap.getHeight(), Bitmap.Config.ARGB_8888);

                BitmapShader shader = new BitmapShader (bitmap,  TileMode.CLAMP, TileMode.CLAMP);
                Paint paint = new Paint();
                paint.setShader(shader);
                paint.setAntiAlias(true);

                Canvas c = new Canvas(circleBitmap);
                c.drawCircle(bitmap.getWidth()/2, bitmap.getHeight()/2, bitmap.getWidth()/2, paint);

                imgProfilePic.setImageBitmap(circleBitmap); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T17:24:11.587

```
public Bitmap dstBmp;
Bitmap getRoundedBitmapnow(Bitmap bitmap) 
{
 //         convert rectangle to square
        if (bitmap.getWidth() >= bitmap.getHeight()){

          dstBmp = Bitmap.createBitmap(
          bitmap, 
          bitmap.getWidth()/2 - bitmap.getHeight()/2,
             0,
             bitmap.getHeight(), 
             bitmap.getHeight()
             );

        }else{

          dstBmp = Bitmap.createBitmap(
          bitmap,
             0, 
             bitmap.getHeight()/2 - bitmap.getWidth()/2,
             bitmap.getWidth(),
             bitmap.getWidth() 
             );
        }
        //          create circle
        Bitmap output = Bitmap.createBitmap(dstBmp.getWidth(),
        dstBmp.getHeight(), Config.ARGB_8888);
        Canvas canvas = new Canvas(output);

        final int color = 0xff424242;
        final Paint paint = new Paint();

        final Rect rect1 = new Rect(0, 0, dstBmp.getWidth(), dstBmp.getHeight());
        final RectF rectF1 = new RectF(rect1);

        paint.setAntiAlias(true);
        canvas.drawARGB(0, 0, 0, 0);
        paint.setColor(color);
        canvas.drawOval(rectF1, paint);

        paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
        canvas.drawBitmap(dstBmp, rect1, rect1, paint);

        return output;

} 
```

# c# - 使用 console.readline 设置线程优先级？C＃

> ID：13198966
> 
> 赞同：1
> 
> 时间：2012-11-02T16:07:02.810
> 
> 标签：c#, multithreading, thread-priority

我想知道您是否可以通过让用户输入字符串（最低、低于正常等）来更改线程的优先级？据我所知，“ThreadPriority”是一个枚举，但我不知道该怎么做。

```
thread.Priority = ThreadPriority.BelowNormal 
```

如何将BelowNormal 更改为用户输入的内容（ReadLine）？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:11:25.840

```
thread.Priority = (ThreadPriority)Enum.Parse(typeof(ThreadPriority), Console.ReadLine()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:12:13.630

您可以使用[`Enum.Parse`](http://msdn.microsoft.com/en-us/library/system.enum.parse.aspx)，示例使用重载方法`ignoreCase`：

```
thread.Priority = (ThreadPriority)Enum.Parse(typeof(ThreadPriority), 
                                      "belownormal", true); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-02T16:11:50.867

您可以解析字符串并执行条件

```
string userinput = Console.ReadLine();
if (userinput.Contains("BelowNormal"))
{
    thread.Priority = ThreadPriority.BelowNormal;
} 
```

# java - 无法加载 ApplicationContext：在 bean 工厂中找不到持久性异常转换器

> ID：13198968
> 
> 赞同：1
> 
> 时间：2012-11-02T16:07:10.417
> 
> 标签：java, spring, hibernate, junit

我创建了一个抽象测试用例来测试我的 Spring MVC 控制器：

```
@SuppressWarnings("unused")
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration({"classpath:META-INF/spring/applicationContext.xml",
                        "classpath:META-INF/spring/applicationContext-jpa.xml",
                        "file:src/main/webapp/WEB-INF/spring/webmvc-config-test.xml"}) 
@PersistenceContext(name = "persistenceUnit")
public class TestableControllerTest {

    @Autowired
    ApplicationContext applicationContext;

    private MockHttpServletRequest request;
    private MockHttpServletResponse response;   
    private RequestMappingHandlerAdapter handlerAdapter;

    @Before
    public void setUp() {
        request = new MockHttpServletRequest();
        response = new MockHttpServletResponse();

        handlerAdapter = applicationContext.getBean(RequestMappingHandlerAdapter.class);
    }

    @Test
    public void testMethod() {

    }

    private Object getHandler(MockHttpServletRequest request) throws Exception {
        HandlerExecutionChain chain = null;  

        Map<String, HandlerMapping> map = applicationContext.getBeansOfType(HandlerMapping.class);  
        Iterator<HandlerMapping> itt = map.values().iterator();  

        while (itt.hasNext()) {  
            HandlerMapping mapping = itt.next();  
            chain = mapping.getHandler(request);  
            if (chain != null) {  
                break;  
            }   
        }  

        if (chain == null) {  
            throw new InvalidParameterException("Unable to find handler for request URI: " + request.getRequestURI());  
        }  

        return chain.getHandler();      
    }

} 
```

运行**mvn clean surefire-report:report**

结果是：

```
java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:236)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:134)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:113)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
    at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:103)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:74)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0': Initialization of bean failed; nested exception is java.lang.IllegalStateException: No persistence exception translators found in bean factory. Cannot perform exception translation.
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
    at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:728)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:449)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:103)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)
    ... 30 more
Caused by: java.lang.IllegalStateException: No persistence exception translators found in bean factory. Cannot perform exception translation.
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.detectPersistenceExceptionTranslators(PersistenceExceptionTranslationInterceptor.java:142)
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.<init>(PersistenceExceptionTranslationInterceptor.java:79)
    at org.springframework.dao.annotation.PersistenceExceptionTranslationAdvisor.<init>(PersistenceExceptionTranslationAdvisor.java:70)
    at org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor.setBeanFactory(PersistenceExceptionTranslationPostProcessor.java:103)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeAwareMethods(AbstractAutowireCapableBeanFactory.java:1475)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1443)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    ... 42 more 
```

这很奇怪，因为我的 persistence.xml 不仅配置了 JPA 方言：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.0" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="persistenceUnit" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5InnoDBDialect"/>
            <!-- value="create" to build a new database on each run; value="update" to modify an existing database; value="create-drop" means the same as "create" but also drops tables when Hibernate closes; value="validate" makes no changes to the database -->
            <property name="hibernate.hbm2ddl.auto" value="create"/>
            <property name="hibernate.ejb.naming_strategy" value="org.hibernate.cfg.ImprovedNamingStrategy"/>
            <property name="hibernate.connection.charSet" value="UTF-8"/>
            <!-- Uncomment the following two properties for JBoss only -->
            <!-- property name="hibernate.validator.apply_to_ddl" value="false" /-->
            <!-- property name="hibernate.validator.autoregister_listeners" value="false" /-->
            <property name="hibernate.hbm2ddl.import_files" value="dynamic.sql, static.sql"/>
        </properties>
    </persistence-unit>
</persistence> 
```

但我还在 applicationContext-jpa.xml 中明确注册了一个异常翻译器

```
<bean class="org.springframework.orm.hibernate4.HibernateExceptionTranslator"/> 
```

我一生都无法弄清楚为什么 bean factory 不提供此实例。任何想法或建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T02:39:38.327

任何类型的配置错误，例如 spring xml 文件中的 EMF 工厂 bean 定义中的 packagesToScan 属性都可能引发此错误 - 这个错误有点笼统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-09T13:10:55.040

在 pom.xml 中添加“spring-tx”maven 依赖项。如果在此依赖项的旧版本中运行，请升级到新版本。这将解决问题。

# c++ - 动态数组超出范围时是否释放内存

> ID：13198973
> 
> 赞同：2
> 
> 时间：2012-11-02T16:07:24.270
> 
> 标签：c++, scope, dynamic-arrays, dynamic-allocation

我正在为函数中的数组动态分配内存。我的问题是：一旦函数完成运行，内存是否被释放？

代码：

```
void f(){
    cv::Mat* arr = new cv::Mat[1];
    ...
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T16:09:43.853

`new`不，当指针超出范围时，不会自动释放分配的内存。

但是，您可以（并且*应该*）使用 C++11 `unique_ptr`，它在超出范围时处理释放内存：

```
void f(){
    std::unique_ptr<cv::Mat[]> arr(new cv::Mat[1]);
    ...
} 
```

C++11 还提供`shared_ptr`了您可能想要复制的指针。现代 C++ 应该努力使用这些“智能指针”，因为它们提供更安全的内存管理，几乎不会影响性能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T16:08:35.923

不它不是。你必须通过调用释放它

```
delete[] arr; 
```

但是你应该问问自己是否有必要动态分配。这将不需要显式的内存管理：

```
void f(){
    cv::Mat arr[1];
    ...
} 
```

如果需要动态大小的数组，可以使用`std::vector`. 向量将在内部动态分配，但会负责取消分配它的资源：

```
void f(){
    std::vector<cv::Mat> arr(n); // contains n cv::Mat objects
    ...
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-02T16:14:12.563

不。每个呼叫都`new`需要与`delete`某个地方的呼叫相匹配。

在您的情况下`arr` *，本身*是一个具有自动存储持续时间的变量。这意味着当它超出范围时`arr` *自身将被销毁。*但是指向的东西`arr`没有，因为*那*是一个没有自动存储持续时间的变量。

`arr`通过将原始指针包装在一个类中，该类在销毁自动对象时销毁存储的指针，可以利用它本身具有自动存储持续时间这一事实。该对象利用称为[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)的 idion来实现所谓的“智能指针”。由于这是精心设计的应用程序中非常常见的要求，因此 C++ 标准库提供了许多您可以使用的智能指针类。在 C++03 中，您可以使用

`std::auto_ptr`

在 C++11`auto_ptr`中已弃用并被其他几个更好的智能指针取代。其中：

`std::unique_ptr` `std::shared_ptr`

一般来说，使用智能指针代替原始（“哑”）指针是一个好主意，就像您在此处所做的那样。

如果您最终需要的是 C99 支持的动态大小的数组，那么您应该知道 C++ 没有直接支持它们。一些编译器（尤其是 GCC）确实支持动态大小的数组，但这些是特定于编译器的语言扩展。为了在仅使用可移植的、符合标准的代码时获得近似动态大小的数组，为什么不使用`std::vector`?

**编辑：** *分配给数组：*

在您的评论中，您描述了分配给该数组的方式，我认为这是这样的：

```
int* arr = new int[5];
arr[1] = 1;
arr[4] = 2;
arr[0] = 3; 
```

如果是这种情况，您可以`vector`通过调用来完成相同的操作`vector::operator[]`。这样做看起来使用与您在上面使用的非常相似的语法。一个真正的“陷阱”是，由于s 是动态大小的，因此在尝试将元素分配到 position 之前`vector`，您需要确保 s`vector`至少具有元素。这可以通过多种方式实现。 `N``N-1`

您可以从一开始就创建`vector`带有`N`项目的项目，在这种情况下，每个项目都将被初始化：

```
vector<int> arr(5); // creates a vector with 5 elements, all initialized to zero
arr[1] = 1;
arr[4] = 2;
arr[0] = 3; 
```

您可以`resize`事后的向量：

```
vector<int> arr; // creates an empty vector
arr.resize(5); // ensures the vector has exactly 5 elements
arr[1] = 1;
arr[4] = 2;
arr[0] = 3; 
```

或者，您可以使用各种算法来用元素填充向量。一个这样的例子是`fill_n`：

```
vector<int> arr; // creates empty vector
fill_n(back_inserter(arr), 5, 0);  // fills the vector with 5 elements, each one has a value of zero
arr[1] = 1;
arr[4] = 2;
arr[0] = 3; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T16:08:29.820

不，当然不。

*对于`new`您需要的每一个`delete`.*

*对于`new[]`您需要的每一个`delete[]`.*

由于您没有匹配项`delete[]`，因此您的程序已损坏。

（出于这个原因，使用 C++ 的成人方式是根本不使用`new`或指针。那么你就不会有这些问题。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-02T16:08:47.647

不。在堆上分配的数组，你必须在它超出范围之前删除它：

```
void f() {

    cv::Mat * arr = new cv::Mat[1];

    // ...

    delete [] arr;

} 
```

# sql - sql 与 AND 的混淆

> ID：13198974
> 
> 赞同：0
> 
> 时间：2012-11-02T16:07:26.883
> 
> 标签：sql

我对使用 AND 进行 SQL 查询有点困惑。

查询如下：

```
SELECT  count(cdr.id) as callTotal,
    sum(cdr.callDurationSeconds) as timeTotal,
    users.firstname,
    users.surname, 
    MAX(cdr.callDuration) as maxCallDuration,
    AVG(cdr.answeredTime) as avgAnswerTime,
    AVG(cdr.callDurationSeconds) as avgTimeTotal,
    cdr.userId, 
    COUNT(IF(cdr.callDurationSeconds > '0', 1, NULL)) AS answeredCalls
                 FROM cdr 
                 LEFT JOIN users ON cdr.userId = users.id
                 WHERE cdr.company = 'C47B0BCCDCE92F'
                 AND cdr.dateCreated LIKE '2012-11-02%'  
                 AND  cdr.userId = 'U4BC3128209B01'  
   OR  cdr.userId = 'U4A9FCCD73C6BB'  
   GROUP BY userId  ORDER BY users.surname ASC  ; 
```

我想按倒数第二行的日期进行查询，但随后我希望使用任何已发布的 cdr.userIds 检索项目。但是，在这种情况下，它似乎忽略了日期。我需要日期是非可选的，并在所选日期使用选择的 ID 检索任何数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:10:02.627

如果您不想在 SQL 中使用`OR`/`AND`运算符优先级（这是一个相当糟糕的主意），只需添加括号。

```
AND  (cdr.userId = 'U4BC3128209B01'  OR  cdr.userId = 'U4A9FCCD73C6BB') 
```

或者正如 Martin Smith 所指出的，在你的情况下，使用`IN`

```
AND cdr.userId IN  ('U4BC3128209B01','U4A9FCCD73C6BB') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:11:24.070

您可以`OR`像提到的其他人一样用括号括起来或像这样使用 IN

```
SELECT  count(cdr.id) as callTotal,
                         sum(cdr.callDurationSeconds) as timeTotal,
                         users.firstname,
                         users.surname, 
                         MAX(cdr.callDuration) as maxCallDuration,
                         AVG(cdr.answeredTime) as avgAnswerTime,
                         AVG(cdr.callDurationSeconds) as avgTimeTotal,
                         cdr.userId, 
                         COUNT(IF(cdr.callDurationSeconds > '0', 1, NULL)) AS answeredCalls
                 FROM cdr 
                 LEFT JOIN users ON cdr.userId = users.id
                 WHERE cdr.company = 'C47B0BCCDCE92F'
                 AND cdr.dateCreated LIKE '2012-11-02%'  
                 AND  cdr.userId IN ('U4BC3128209B01','U4A9FCCD73C6BB')  GROUP BY userId  ORDER BY users.surname ASC  ; 
```

这样就没有`OR`，所以没有混乱

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T16:11:31.480

如果我理解正确，您想选择具有该日期并具有特定 ID 的项目？

```
SELECT  count(cdr.id) as callTotal,
                         sum(cdr.callDurationSeconds) as timeTotal,
                         users.firstname,
                         users.surname, 
                         MAX(cdr.callDuration) as maxCallDuration,
                         AVG(cdr.answeredTime) as avgAnswerTime,
                         AVG(cdr.callDurationSeconds) as avgTimeTotal,
                         cdr.userId, 
                         COUNT(IF(cdr.callDurationSeconds > '0', 1, NULL)) AS answeredCalls
                 FROM cdr 
                 LEFT JOIN users ON cdr.userId = users.id
                 WHERE cdr.company = 'C47B0BCCDCE92F'
                 AND cdr.dateCreated LIKE '2012-11-02%'  
                     AND  cdr.userId IN('U4BC3128209B01','U4A9FCCD73C6BB')
                 GROUP BY userId  ORDER BY users.surname ASC  ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T16:10:24.280

在 SQL 中 AND 具有更高的顺序然后 OR 所以默认情况下你的 where 解析为

```
 WHERE (cdr.company = 'C47B0BCCDCE92F'
             AND cdr.dateCreated LIKE '2012-11-02%'  
             AND  cdr.userId = 'U4BC3128209B01')  OR  cdr.userId = 'U4A9FCCD73C6BB' 
```

你想在哪里

```
 WHERE cdr.company = 'C47B0BCCDCE92F'
             AND cdr.dateCreated LIKE '2012-11-02%'  
             AND  (cdr.userId = 'U4BC3128209B01'  OR  cdr.userId = 'U4A9FCCD73C6BB') 
```

使用括号，它会清除的东西。

# java - Hibernate 多对多关系

> ID：13198977
> 
> 赞同：1
> 
> 时间：2012-11-02T16:07:30.427
> 
> 标签：java, hibernate, many-to-many

我有两种映射类型，多对多相关。

```
@Entity
@Table(name = "students")
public class Student{

...

@ManyToMany(fetch = FetchType.EAGER)
@JoinTable(
    name = "students2courses",
    joinColumns = { @JoinColumn(
        name = "student_id",
        referencedColumnName = "_id") },
    inverseJoinColumns = { @JoinColumn(
        name = "course_id",
        referencedColumnName = "_id") })

public Set<Course> getCourses() {
    return courses;
}

public void setCourses(Set<Course> courses) {
    this.courses = courses;
}

...
} 
```

__

```
@Entity
@Table(name = "courses")
public class Course{

...

@ManyToMany(fetch = FetchType.EAGER, mappedBy = "courses")

public Set<Student> getStudents() {
    return students;
}

public void setStudents(Set<Student> students) {
    this.students = students;
}

...
} 
```

但是，如果我更新/删除课程实体，则不会在表 students2courses 中创建/删除记录。（学生实体更新/删除按预期进行）

我写了抽象类 HibObject

```
public abstract class HibObject {
    public String getRemoveMTMQuery() {
        return null;
    }
} 
```

由 Student 和 Course 继承。

在 DAO 中，我添加了以下代码（用于 delete() 方法）：

```
String query = obj.getRemoveMTMQuery();
if (query != null) {
    session.createSQLQuery(query).executeUpdate();
} 
```

我为 Course 重写了方法 getRemoveMTMQuery()

```
@Override
@Transient
public String getRemoveMTMQuery() {
    return "delete from students2courses where course_id = " + id + ";";
} 
```

现在它可以工作了，但我认为这是一个糟糕的代码。

有没有解决这个问题的最佳方法？

# c# - 普通 .NET 2 中缺少 SqlParameter 的 .TypeName 的解决方法

> ID：13198979
> 
> 赞同：2
> 
> 时间：2012-11-02T16:07:31.460
> 
> 标签：c#, sql-server, .net-2.0, sqlclient

在普通的 .NET2 框架（无服务包）中没有属性

```
System.Data.SqlClient.SqlParameter.TypeName 
```

我的应用程序是在安装了 .NET2 SP1 的机器上构建的。它在数百台其他机器上执行，其中一些没有 .NET2 SP1，可能他们不会安装它们，所以他们得到这个异常：

```
Method not found: 'Void System.Data.SqlClient.SqlParameter.set_TypeName(System.String)' 
```

从 c# 代码中，我执行使用 DataTable 对象作为输入的 SQL 脚本（没有存储过程调用，只是 sql 脚本），这意味着您必须从 c# 代码中定义表值参数的名称（执行存储过程时，此名称为在过程的声明中定义，您不必再次定义它）。显然，未安装 .NET2 SP1 时我无法执行此操作。

我的问题是：

**有没有办法使用普通的 .NET2 框架（未安装 SP1）从 C# 代码中定义表值参数的名称？如何在没有 .NET2 的 SP1 的情况下执行使用来自 c# 代码的表值输入的简单 sql 脚本？**

# django - Django - 使用 Base64 和 UTF-8 解码 MIME 标头

> ID：13198996
> 
> 赞同：0
> 
> 时间：2012-11-02T16:08:30.140
> 
> 标签：django, utf-8, base64, mime

我正在创建一个网络电子邮件界面来读取 IMAP 帐户。我在解码某个电子邮件标头时遇到问题。

我获得以下 From 标头（来自事件电子邮件的特定示例）：

```
('"=?UTF-8?B?QmVubnkgQmVuYXNzaQ==?=" <NOREPLY@NOREPLY.LOCKNLOADEVENTS.COM>', None) 
```

我将第一部分分开：

```
=?UTF-8?B?QmVubnkgQmVuYXNzaQ==?= 
```

根据一些研究，它显然是 Base64 编码的 UTF-8 标头。

我尝试使用 Base64 解码器对其进行解码：

```
# Separate sender name from email itself
first_part = header_text[1:header_text.index('" <')]
print "First part:", first_part

import base64
decoded_first_part = base64.urlsafe_b64decode(first_part)
print decoded_first_part 
```

但我得到一个

```
TypeError: Incorrect padding. 
```

任何人都可以帮我找出问题所在吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:19:13.523

```
>>> import base64
>>> base64.decodestring('QmVubnkgQmVuYXNzaQ==')
'Benny Benassi' 
```

但是您可能希望使用[适当的 IMAP 库](http://docs.python.org/2/library/imaplib.html)来执行此操作。

# ruby-on-rails - 正则表达式匹配 Ruby on Rails 中的 URL

> ID：13198997
> 
> 赞同：0
> 
> 时间：2012-11-02T16:08:32.803
> 
> 标签：ruby-on-rails, regex, ruby-on-rails-3, hyperlink

我环顾四周，但我还没有真正找到适合我个人情况100% 达成交易的答案。

在我的 Ruby 应用程序中，我有一个用户共享系统，成员可以在其中发布“东西”。嗯，有时会员会发布链接，我注意到随着网站的发展，越来越多的用户抱怨没有可点击的链接。

我将如何利用正则表达式来匹配帖子中链接的 url。此外，我将如何在我的模型中应用它？

谢谢你的帮助，在我所有的问题中，这对我来说真的很重要哈！

**编辑**

我想我的初始化帖子太模糊了......

我更想弄清楚如何在我的模型中使用正则表达式，而不是使用哪个正则表达式。

型号为`class Share`。并且会员的帖子呈现为`<%= share.content %>`内容是我的共享表中的一列以及可访问的属性......

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:48:04.277

尝试：

```
^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))? 
```

来自[关于 URLS 的 IETF 规范](http://www.apps.ietf.org/rfc/rfc3986.html)。它匹配包括“ftp://...”在内的所有 URL，因此您可能需要对其进行一些调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:14:58.927

自动链接会做到这一点。它被提取到它自己的宝石中......

[https://github.com/tenderlove/rails_autolink](https://github.com/tenderlove/rails_autolink)

示例用法：

```
auto_link("Go to http://www.rubyonrails.org and say hello to david@loudthinking.com")
# => "Go to <a href=\"http://www.rubyonrails.org\">http://www.rubyonrails.org</a> and
#     say hello to <a href=\"mailto:david@loudthinking.com\">david@loudthinking.com</a>" 
```

# php - 使用PHP按列显示CSV的随机行

> ID：13198998
> 
> 赞同：0
> 
> 时间：2012-11-02T16:08:32.513
> 
> 标签：php, csv, random

我想从 CSV 文件中随机选择一行并显示它，同时还可以通过 css/html 添加样式。理想情况下，我可以将每个键（随机选择的行）设置为单独显示（以设置样式）。

活动、描述、步骤 1、步骤 2、步骤 3、评论

可以显示为

**活动**
*描述*
- 第 1
步 - 第 2
步 - 第 3 步
**评论**

我一直在使用以下代码，但我无法将这些值分开来单独设置它们的样式。

```
<? 

$sep=","; // separator 
$mycsv=file("hopper-01.csv"); 
$row=rand(0,count($mycsv)-1); 
$data=explode($sep,$mycsv[$row]); 

$num = count ($data); 

for ($c=0; $c < $num; $c++) { 
  print $data[$c] . "<br>"; 
} 

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:14:51.440

您必须提前了解 CSV 的结构（而且您似乎知道）。在这种情况下，您只需要根据键设置不同的样式：

```
for ($c = 0; $c < $num; $c++) {
   switch ($c) {
      case 0:
         echo "<strong>" . $data[$c] . "</strong><br>";
         break;
      case 1:
         echo "<em>" . $data[$c] . "</em><br>";
         break;
      case 2:
      case 3:
      case 4:
         echo "- " . $data[$c] . "<br>";
   }
} 
```

...ETC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:23:38.717

```
 Try This code: 

   $newfilename="hopper-01.csv";
    $filename = fopen($newfilename,"r");
    $content="";

    $i=0;
    while(!feof($filename))
      {
    $content=fgetcsv($filename,100000,','); 
        if($content[0]!="")
          {
    echo $content[0];
    echo"<br>";
    echo $content[1];
    echo"<br>";
    echo $content[2];
    echo"<br>";
    echo $content[3];
    echo"<br>";
    echo $content[4];
    echo"<br>";
              }
      }

    fclose($filename); 
```