# StackOverflow 问答 13237000-13237999

# javascript - 将 X 天添加到指定日期

> ID：13237001
> 
> 赞同：1
> 
> 时间：2012-11-05T17:13:44.627
> 
> 标签：javascript, date

> **可能重复：**
> [如何将天数添加到今天的日期？](https://stackoverflow.com/questions/3818193/how-to-add-number-of-days-to-todays-date)

我想将 X days 添加到某个日期，其中 X 是我之前指定的数字。

例如。日期是`29/11/2012`（格式：）`DD/MM/YYYY`，我想`5`在这个日期上加上几天，所以输出应该是`03/12/2012`。

**我尝试了什么：**

```
var days_to_add = 5;
$myyear = 2012;
$mymonth = 11;
$myday = 29;
date = new Date();
date.setFullYear($myyear,$mymonth,$myday);
date.setDate(date.getDate()+(days_to_add-1));
alert(date.getDate()+'/'+date.getMonth()+'/'+date.getFullYear()); 
```

它正在工作，但只有当日期没有超过给定日期的下个月时，否则输出是好的。

你们有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T17:17:26.523

像这样更简单的东西？

```
 var fiveDaysLater = new Date( existingDate.getTime() );
 fiveDaysLater.setDate(fiveDaysLater.getDate() + 5); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T17:22:04.687

您的问题不在于添加日期，因为[setDate](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setDate)函数会根据需要自动增加年份或月份：

> 如果您指定的参数超出预期范围，setDate 会尝试相应地更新 Date 对象中的日期信息

但是您没有正确创建日期。改变

```
$myyear = 2012;
$mymonth = 11;
$myday = 29;
date = new Date();
date.setFullYear($myyear,$mymonth,$myday); 
```

至

```
$myyear = 2012;
$mymonth = 11;
$myday = 29;
date = new Date($myyear,$mymonth,$myday); 
```

Date 构造函数在 [0, 11] 中需要一个月。如果您希望 11 是 11 月而不是 12 月，请使用

```
date = new Date($myyear,$mymonth-1,$myday); 
```

并`getMonth`在 [0, 11] 中返回一个整数，这可能也让你感到惊讶。`date.getMonth()+1`如果您想使用通常的日期格式，则需要输出：

```
alert(date.getDate()+'/'+(date.getMonth()+1)+'/'+date.getFullYear()); 
```

如果要添加前导零，可以这样做：

```
alert(
     (date.getDate()<10 ? "0" : "") + date.getDate()
     +'/'+
     (date.getMonth()<9 ? "0" : "") + (date.getMonth()+1)
     +'/'+
     date.getFullYear() 
); 
```

[示范](http://jsfiddle.net/jMX6j/)

请注意，如果您有很多日期操作要做，您应该考虑使用类似[date.js](http://www.datejs.com/)的库。

# json - 如何使用 Handlebars.js、JSON 和多页 jQuery Mobile 获取动态页面？

> ID：13237003
> 
> 赞同：2
> 
> 时间：2012-11-05T17:13:47.143
> 
> 标签：json, jquery-mobile, handlebars.js

我的设置是 jQuery Mobile (JQM)、多页、JSON 和 Handlebars.js。

我有一个项目清单。每个项目链接到一个完整的页面描述。

```
<div data-role="page" id="document-library">

<div data-role="content">

    <ul>
    <div id="handlebarsDocuments">This will get replaced by handlebars.js</div>
    <script id="TemplateDocuments" type="text/x-handlebars-template">

        {{#documents}}
            <li style="float:left;padding:10px 0;width:100%;">
                <a href="#documentID{{documentID}}" data-transition="slide">
                    <strong>{{documentName}}</strong>
                </a>
            </li>
        {{/documents}}

    </script>
    </ul>

</div> 
```

URL 更改为 localhost/index.html#documentID20。太好了，链接有效。

问题是，我无法让页面加载特定于 documentID20 的数据。如果 JavaScript 位于 data-role="page" div 之外，JQM 不会启动它。另外，它是多页的，所以我认为在我点击链接之前数据需要在那里。

当我将把手包裹在 data-role="page" 周围时，它不起作用。

```
<div id="handlebarsDocView">This will get replaced by handlebars.js</div>
<script id="TemplateDocView" type="text/x-handlebars-template">
    {{#documents}}

         <div data-role="page" id="document{{documentID}}">

              <div data-role="content"> 
                   {{#each_when documents "documentID" "20"}}
                        {{documentName}}
                   {{/each_when}}
              </div>

         </div>

    {{/documents}}
</script> 
```

JSON文件看起来像......

```
{
"documents": [
    {
        "documentID": 20,
        "conversationID": 100,
        "documentName": "K1711EA1 Course",
        "timeStamp": "2012-10-09T12:51:50Z",
        "documentType": "documents"
    },
    {
        "documentID": 21,
        "coversationID": 100,
        "documentName": "K17E10CTEC Student",
        "timeStamp": "2012-10-09T07:51:50Z",
        "documentType": "pdf"
    }
]
} 
```

这已添加到我的 handlebars.js 文件中以获取 each_when 工作。

```
Handlebars.registerHelper('each_when', function(list, k, v, opts) {
console.log(arguments);
var i, result = '';
for(i = 0; i < list.length; ++i)
    if(list[i][k] == v)
        result = result + opts.fn(list[i]);
return result;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:50:45.837

```
<!DOCTYPE html> 
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Client Portal</title>
<link rel="stylesheet" href="stylesheets/styles.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
<script src="js/jquery.mobile-1.2.0.js?v=6"></script>
</head> 

<body onload="init()">

<script type="text/javascript" src="js/handlebars-1.0.rc.1.js"></script>

<!-- Document Library -->

<div data-role="page" id="document-library">

    <div data-role="content">

        <ul>
        <div id="handlebarsDocuments">This will get replaced by handlebars.js</div>

        <script id="TemplateDocuments" type="text/x-handlebars-template">

            {{#documents}}
                <li style="float:left;padding:10px 0;width:100%;">
                    <a href="#documentID{{documentID}}" data-transition="slide">
                        <strong>{{documentName}}</strong>
                    </a>
                </li>
            {{/documents}}

        </script>
        </ul>

    </div>

</div>

<!-- Document View-->

<script id="Foo" type="text/x-handlebars-template">

    {{#documents}}

        <div data-role="page" id="documentID{{documentID}}">

            Document Name {{documentName}}<br/>
            Document ID: {{documentID}}<br/>
            Conversation ID: {{conversationID}}

        </div>

    {{/documents}}

</script>

<script>
// Handlebar
var xhr;

        function init() {

            xhr = new XMLHttpRequest();
            xhr.onreadystatechange = xhr_onReadyStateChangeHandler;
            xhr.open("GET", "json/data.json");
            xhr.send(null);
        }
        function xhr_onReadyStateChangeHandler(evt) {
            if ((xhr.readyState === 4) && (xhr.status === 200)) {
                var src = document.getElementById("TemplateDocuments").innerHTML;

                var tmpl = Handlebars.compile(src);
                var json = JSON.parse(xhr.responseText);
                document.getElementById("handlebarsDocuments").innerHTML = tmpl(json);

                 src = $('#Foo').html();
                 tmpl = Handlebars.compile(src);
                $('#document-library').after(tmpl(json));

            }
        }
</script>
</body>
</html> 
```

# php - PHP JSON数据构建和表单提交重定向在一页上

> ID：13237004
> 
> 赞同：0
> 
> 时间：2012-11-05T17:13:49.680
> 
> 标签：php, javascript, json, redirect, form-submit

我正在尝试使用 PHP 和 Google Charts 构建一些图表。我有一个 PHP 页面，其中包含一个表单，用户可以在其中选择他们希望在图表上看到的信息。表单包含日期范围、总销售额、净额等数据。表单提交给 GraphData.php。在这里，我想根据从表单提交中收到的数据生成 MySql 查询。我使用该数据为 Google Charts 构建 JSON 对象。然后将包含用户 ID 和会话变量的表单提交到 Graphs.php 页面。这里我们使用 Ajax 来获取 JSON 数据并创建 Google Chart。我在将重定向/表单提交到 Graphs.php 时遇到问题。这可能吗？这是我的 GraphData.php 代码：

```
// mysql stuff here ....
$result = mysql_query($sql, $myconn) or die(mysql_error());

//start the json data in the format Google Chart js/API expects to recieve it
$data = array('cols' => array(array('label' => 'Month', 'type' => 'string'),
                          array('label' => 'Ticket Sales', 'type' => 'number'),
                          array('label' => 'Amount Bet', 'type' => 'number'),
                          array('label' => 'Amount Won', 'type' => 'number'),
                          array('label' => 'Total Net', 'type' => 'number')),
          'rows' => array());

// loop through the results and add them to the json object
while($row = mysql_fetch_row($result)) 
{
    $data['rows'][] = array('c' => array(array('v' => $row[0]), array('v' => $row[1]), array('v' => $row[2]), array('v' => $row[3]), array('v' => $row[4])));
}

echo json_encode($data);
echo("<FORM id='redirect' name='redirect' method='POST' action='Graphs.php'>
        <INPUT type='hidden' name='userid' value='$userid'>
        <INPUT type='hidden' name='session' value='$session'>'
      </form>");
?>
<script type="text/javascript">
function submit () {
var frm = document.getElementById("redirect");
frm.submit();
}
window.onload = submit;
</script> 
```

该页面成功重定向到 Graphs.php，但未提交表单，我收到一条错误消息，指出 JSON 字符串无效。我正在尝试做的事情真的可能吗？我只是做错了吗？还是有其他方法？对不起，如果这令人困惑。如果您想了解更多信息，请告诉我。任何帮助表示赞赏！提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:03:23.177

如果您有多个可能的值，您可以通过使用每个表单中的隐藏值来完全消除页面跳转，以使用 if/then 或 switch 语句来确定页面操作。作为伪：

```
if ($_POST[myHiddenInput]==null){
        (means the form hasn't been submitted)
        load or echo options form (form submits to this page)
}
else{
        (they submitted the filled out form)
        check the form for errors, re-populate and prompt if needed, etc.
        if no errors, query mysql (use PDO or face problems later),
         generate json from your sql response and use file_get_contents()
         or curl() google to get your chart, echo response to screen

} 
```

您可以小心地将 php 嵌套在 javascript 中，允许您拥有一个 php 函数来创建您的 json 并将其返回给 javascript 函数调用（即：jquery ajax 请求），请记住，这只发生在页面加载时。

# android - 如何将音频文件转换为字节

> ID：13237008
> 
> 赞同：1
> 
> 时间：2012-11-05T17:13:59.497
> 
> 标签：android, inputstream

我创建了以下程序，其任务非常简单：录制然后显示音频。我试图添加另一种方法，允许我以图形方式显示记录的样本。为此，我使用了一年前@Robby Pond 在另一个问题中提出的建议：

[http://stackoverflow.com/questions/5333908/fileinputstream-to-byte-array-in-android-application](http://stackoverflow.com/questions/5333908/fileinputstream-to-byte-array-in-android-application)

我的活动的核心是这样的：

```
import java.io.ByteArrayOutputStream;
import java.io.InputStream;

import android.app.Activity;
import android.content.Context;
import android.media.MediaPlayer;
import android.media.MediaRecorder;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class RecorderTutorial extends Activity implements OnClickListener{

    MediaRecorder mRecorder = new MediaRecorder();
    MediaPlayer mPlayer = new MediaPlayer();
    boolean isRecording = false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_recorder_tutorial);
    findViewById(R.id.play_back_button).setOnClickListener(this);
    findViewById(R.id.record_button).setOnClickListener(this);
    findViewById(R.id.draw).setOnClickListener(this);
    }

    public void onClick(View v) {

        mPlayer.stop();

        switch (v.getId()) {

            case R.id.play_back_button:

                if (!isRecording && !mPlayer.isPlaying()) {

                    try {
                        mPlayer.reset();
                        mPlayer.setDataSource("/sdcard/audio_demo.3gp");
                        mPlayer.prepare();
                        mPlayer.start();
                    } catch (Exception e) {

                    Toast.makeText(this, "Error playing back audio.",Toast.LENGTH_SHORT).show();

                    }

                }

            break;

            case R.id.record_button:

                if (isRecording) {

                    isRecording = false;
                    ((Button)(findViewById(R.id.record_button))).setText("record");
                    mRecorder.reset();

                } else {

                    try {

                        mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
                        mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
                        mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
                        mRecorder.setOutputFile("/sdcard/audio_demo.3gp");
                        mRecorder.prepare();
                        mRecorder.start();

                        ((Button)(findViewById(R.id.record_button))).setText("stop");

                        isRecording = true;

                    } catch (Exception e) {

                        Toast.makeText(this, "Error starting recorder.",Toast.LENGTH_SHORT).show();

                    }

                }

            break;

            case R.id.draw:

                final Context context = v.getContext();
                int bytesRead;

                try {

                    InputStream is = context.openFileInput("/sdcard/audio_demo.3gp");

                    ByteArrayOutputStream bos = new ByteArrayOutputStream();

                    byte[] b = new byte[1024];

                    while ((bytesRead = is.read(b)) != -1) {

                        bos.write(b, 0, bytesRead);

                }

                byte[] bytes = bos.toByteArray();

                System.out.println(" One random values is: "+bytes[5]+" \n");

                }catch(Exception e) {

                    Toast.makeText(this, "Error starting draw. ",Toast.LENGTH_SHORT).show();

                }

            break;
        }
    }

    @Override
    public void onDestroy() {

        if (isRecording) {

            Toast.makeText(this, "Recorder stopped.",Toast.LENGTH_SHORT).show();
            mRecorder.stop();

        }

        mRecorder.release();
        mPlayer.stop();
        mPlayer.release();
        super.onDestroy();

    }

} 
```

谁能告诉我为什么第三个选项 -R.id.draw case- 在我执行那部分代码时会在尝试中中断？我是否以错误的方法打开文件或类似的东西？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:17:20.663

使用 FileInputStream.read(byte[]) 你可以更有效地阅读。

一般来说，您不希望将任意大小的文件读入内存。

大多数解析器将采用 InputStream。也许您可以让我们知道您是如何使用该文件的，我们可以建议更合适的。

以下是如何使用 read() 的字节缓冲区版本：

```
byte[] buffer = new byte[1024];
int length;
while ((length = fis.read(buffer)) != -1) {
fileContent.append(new String(buffer));
 } 
```

# c# - 如何使用 Mongo C# Driver 的 BSONClassMap 将所有属性序列化和反序列化为字符串

> ID：13237009
> 
> 赞同：0
> 
> 时间：2012-11-05T17:14:00.260
> 
> 标签：c#, mongodb, bson

> > BsonClassMap.RegisterClassMap<X>(cm => { cm.AutoMap(); cm.GetMemberMap(x => x.date).SetSerializer(new dateSerializer());
> 
> ```
>  }); 
> ```

我收到一个错误，即项目已经包含一个键，如果我删除序列化程序，我会收到错误 ReadBsonType can only be called when state is Type 而不是 state is Value"

我该如何调试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:48:05.240

你可能有两个问题。

1) 项目已经包含一个密钥。您需要确保在与服务器进行任何通信之前进行类映射注册。此错误可能是由于在调用此 RegisterClassMap 之前对 X 进行了序列化。如果您确定这不是真的，堆栈跟踪会很有帮助。

2) 您对 dateSerializer 的实现可能不正确。如果您可以发布您的实现，我们将能够帮助调试它。可能需要一个单独的问题。

# php - 如何在编辑数据 php 中显示已选中或已选中？

> ID：13237014
> 
> 赞同：1
> 
> 时间：2012-11-05T17:14:14.983
> 
> 标签：php, arrays, checkbox

我有

```
<script type="text/javascript" language="javascript">
    function setCheckboxes3(act) {
        var e = document.getElementsByClassName('names');
        var elts_cnt  = (typeof(e.length) != 'undefined') ? e.length : 0;
        if (!elts_cnt) {
            return;
        }
        for (var i = 0; i < elts_cnt; i++) {
            e[i].checked = (act == 1 || act == 0) ? act : (e[i].checked ? 0 : 1);
        }
    }
</script>

<a href="javascript:setCheckboxes3(1);" class="chkmenu">Semua</a> |
<a href="javascript:setCheckboxes3(0);" class="chkmenu">Tidak Satupun</a> |
<a href="javascript:setCheckboxes3(2);" class="chkmenu">Balik Pilihan</a><br />

<input type="checkbox" name="listBidang[1]" class="names" value="1" />Pembinaan<br/>
<input type="checkbox" name="listBidang[2]" class="names" value="1" />Intelijen<br/>
<input type="checkbox" name="listBidang[3]" class="names" value="1" />Pengawasan<br/>
<input type="checkbox" name="listBidang[4]" class="names" value="1" />Pidum<br/>
<input type="checkbox" name="listBidang[5]" class="names" value="1" />Pidsus<br/>
<input type="checkbox" name="listBidang[6]" class="names" value="1" />Datun<br/> 
```

如何显示已选中或已签入编辑数据？？？（如果 0=未选中，如果 1=选中，则创建数组）

示例 100001

```
<input type="checkbox" name="listBidang[1]" class="names" value="1" checked="checked" />Pembinaan<br/>
<input type="checkbox" name="listBidang[2]" class="names" value="1" />Intelijen<br/>
<input type="checkbox" name="listBidang[3]" class="names" value="1" />Pengawasan<br/>
<input type="checkbox" name="listBidang[4]" class="names" value="1" />Pidum<br/>
<input type="checkbox" name="listBidang[5]" class="names" value="1" />Pidsus<br/>
<input type="checkbox" name="listBidang[6]" class="names" value="1" checked="checked" />Datun<br/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:16:50.457

如果未选中复选框，则其键不会出现在结果数据中。我认为更好的方法是：

```
<input type="checkbox" name="listBidang[]" value="Pembinaan" checked="checked" />Pembinaan
<input type="checkbox" name="listBidang[]" value="Intelijen" />Intelijen
<input type="checkbox" name="listBidang[]" value="Pengawasan" />Pengawasan
<input type="checkbox" name="listBidang[]" value="Datun" checked="checked" />Datun 
```

现在您的数据应如下所示：

```
$_GET["listBidang"]; // array("Pembinaan", "Datun"); 
```

空括号符号 ( `listBidang[]`) 将为您动态构建集合。省略任何未经检查的值。

如果没有选中的值`$_GET["listBidang"]`将**不会**被设置。您可能期望一个空数组，但是唉。因此，请确保您使用`isset`,`empty`或`array_key_exists`在尝试阅读之前检查它是否存在。

# sql - scope_identity 返回 null

> ID：13237015
> 
> 赞同：2
> 
> 时间：2012-11-05T17:14:21.177
> 
> 标签：sql, sql-server, tsql

我正在 SQL 服务器中编写一个 SP

```
ALTER PROCEDURE [dbo].[spAddUserBadge]
AS
BEGIN
    INSERT INTO dbo.SE_UserBadge
    (    
        [UID],
        BadgeID,
        BadgeAssignmentOrRenewalDate,
        BadgeExpiryDate ,
        AmountPaid, 
        Remarks ,
        AssignedBy          
    )
    VALUES
    (
        17,1, 12-12-2012, 12-12-2013, 0.00, '', ''
    )

    SELECT SCOPE_IDENTITY() AS id    
END
GO 
```

SCOPE_IDENTITY 为 NULL。我错在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T17:28:03.630

使用[OUTPUT](http://msdn.microsoft.com/en-us/library/ms177564.aspx)运算符将插入的值输出到表变量中，然后检查这些值。

**例子**

```
ALTER PROCEDURE [dbo].[spAddUserBadge]
AS
BEGIN
    DECLARE @TBL AS TABLE(ID1 INT, ID2 INT)

    INSERT INTO dbo.SE_UserBadge
    (    
        [UID],
        BadgeID,
        BadgeAssignmentOrRenewalDate,
        BadgeExpiryDate ,
        AmountPaid, 
        Remarks ,
        AssignedBy          
    )
    OUTPUT inserted.ID1, inserted.ID2 INTO @TBL
    VALUES
    (
        17,1, 12-12-2012, 12-12-2013, 0.00, '', ''
    )

    SELECT * FROM @TBL  
END
GO 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T17:19:45.743

scope_identity 只会在有身份字段的情况下返回一个值，请检查您是否有身份字段。

不幸的是，您不能使用 sql 将现有列更改为标识字段。为此，您必须使用 ALTER TABLE dbo.SE_UserBadge ADD 列名称 INT IDENTITY(1,1) 之类的东西创建一个新列。然后，您必须使用带有更新语句的 IDENTITY_INSERT dbo.SE_UserBadge ON 传输任何现有值。然后你可以删除旧列。

或者，如果表不是太大，您可以在 SSMS 中使用设计器视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T17:38:17.367

对于我所看到的，您在插入语句中为您的列 ID 提供了一个值，如果您想通过选择 scope_identity 来获取 ID，您需要将您的 ID 设置为身份主键。

这里是您创建表时的示例。

```
CREATE TABLE Person
(
    ID INT IDENTITY(1,1) NOT NULL PRIMARY KEY,
    Name VARCHAR(20),
    LastName VARCHAR(20),
) 
```

然后在您的存储过程中，您不需要提供 ID，这将自动生成

```
INSERT INTO Person (Name,LastName) VALUES ('YouName','YourLastName')

SELECT SCOPE_IDENTITY() AS ID 
```

我希望这对你有用。

# java - HTML.fromHTML - Android 中的标记处理程序

> ID：13237016
> 
> 赞同：2
> 
> 时间：2012-11-05T17:14:24.237
> 
> 标签：java, android, html

我有一个 TextView，我想将 HTML 设置为：

```
 HTML.fromHTML(); 
```

但是我想用标签处理程序过滤掉所有`<Img>`标签，并且我想将所有链接（src）保存在一个列表数组中。那可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T19:58:31.580

Yes this is possible. Yoo can use [jsoup](http://jsoup.org/) (Java HTML Parser) for easy HTML parsing i.e.

```
String url = "http://www.google.com";
List<String> images = new ArrayList<String>();
Document doc = Jsoup.connect(url).get();
Elements img = doc.select("img");
for (Element el : img)
{
    String imageUrl = el.attr("src");
    images.add(imageUrl);
} 
```

# apache - Apache rewritecond -U 不工作

> ID：13237021
> 
> 赞同：1
> 
> 时间：2012-11-05T17:14:41.050
> 
> 标签：apache, rewrite, rule

Apache 的重写条件是 -U，它假设检查 URL 是否可用。在我的环境中，我在不同的服务器上有不同的资源。所以我想检查服务器 A 上是否有资源可用，如果不使用服务器 B。在本地我没有问题，因为 -f 正在做这个技巧并检查文件是否存在于本地主机上。

所以问题是：任何人都可以确认 -U 是（不）工作并给我一个例子吗？

这不工作...

```
RewriteCond http://123.123.123.123:8080/resources/Php%{REQUEST_URI} -U
RewriteRule ^/(.*) http://123.123.123.123:8080/resources/Php/$1 [R,L] 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:51:28.513

确实只在`-U`apache 进程内部工作。您无法使用此规则检查某些远程 URL 是否有效……您需要找到其他热门方式来找出正确的服务器。

无论如何，您应该知道资源/URI 的位置，然后编写一条规则来路由请求或使用[RewriteMap](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritemap)编写静态映射。

# maven - 用于安装多个 3rd 方商业库的 Maven POM 文件

> ID：13237022
> 
> 赞同：22
> 
> 时间：2012-11-05T17:14:45.973
> 
> 标签：maven, maven-2, maven-3

我有一堆依赖于一组商业 3rd 方库的项目。我们目前没有公司存储库，所以我必须在我自己的本地存储库中安装这些库。

为每个文件运行`mvn install:installFile -Dpackaging=jar -Dfile=<file> -DgroupId=<groupId> -DartifactId=<artifactId> -Dversion=<version>`是相当乏味的。可以创建一个bat文件，但是有没有办法使用maven来做到这一点？

我正在考虑一个包含所有 jars 和单个 pom 文件的项目，其中包含所有组 id、工件 id、版本和文件名，然后可能只`mvn install`在该项目中运行，或者类似的东西。

这样的事情可能吗？

* * *

***注意：**我使用的是 Maven 3，但兼容 Maven 2 的解决方案也不错。*

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-05T17:29:46.830

您可以通过多次执行Maven 安装插件的[install-file目标来创建 pom.xml。](http://maven.apache.org/plugins/maven-install-plugin/install-file-mojo.html)假设这些文件已经在本地某处可用（或者您可以[使用 Wagon 插件](http://mojo.codehaus.org/wagon-maven-plugin/download-mojo.html)下载它们）。

```
 <project>
    <modelVersion>4.0.0</modelVersion>

    <groupId>org.somegroup</groupId>
    <artifactId>my-project</artifactId>
    <version>1.0</version>

    <build>
      <plugins>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-install-plugin</artifactId>
          <version>2.4</version/>
          <executions>
            <execution>
              <id>install1</id>
              <phase>package</phase>
              <goals>
                <goal>install-file</goal>
              </goals>
              <configuration>
                <file>lib/your-artifact-1.0.jar</file>
                <groupId>org.some.group</groupId>
                <artifactId>your-artifact</artifactId>
                <version>1.0</version>
                ... other properties
              </configuration>
            </execution>
            <execution>
              <id>install2</id>
              <phase>package</phase>
              <goals>
                <goal>install-file</goal>
              </goals>
              ... etc

            </execution>
            ... other executions
          </executions>
        </plugin>
      </plugins>
    </build>
  </project> 
```

因此，使用上面的 pom 片段`mvn package`应该可以解决问题。

有很好的[Maven POM 教程](http://www.sonatype.com/books/mvnref-book/reference/pom-relationships.html)和[POM 参考](http://maventest.apache.org/pom.html)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-10-02T14:44:08.100

最近发现了一个新的解决方案。基本上，您可以在项目中创建一个本地存储库，该存储库可以与其余的源代码一起签入。在这里写博客：[http](http://www.geekality.net/?p=2376) ://www.geekality.net/?p=2376 。

要点是将依赖项部署到项目中的文件夹。

```
mvn deploy:deploy-file
    -Durl=file:///dev/project/repo/
    -Dfile=somelib-1.0.jar
    -DgroupId=com.example
    -DartifactId=somelib
    -Dpackaging=jar
    -Dversion=1.0 
```

然后简单地让 Maven 知道它并通过你的`pom.xml`.

```
<repositories>
    <repository>
        <id>project.local</id>
        <name>project</name>
        <url>file:${project.basedir}/repo</url>
    </repository>
</repositories>

<dependency>
    <groupId>com.example</groupId>
    <artifactId>somelib</artifactId>
    <version>1.0</version>
</dependency> 
```

不是非常Maven'y，但它可以工作并且稍后将依赖项移动到公司存储库应该非常简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-03T14:38:47.513

只是添加到@eugene-kuleshov 提供的正确示例：

1.  一旦您在文件中配置了具有多次执行`maven-install-plugin`的目标，每个外部 jar 执行一次，您必须像往常一样在您的文件中使用这些 jar：`install-file``pom.xml``pom.xml`

    ```
    <dependency>
        <groupId>org.some.group</groupId>
        <artifactId>your-artifact</artifactId>
        <version>1.0</version>
    </dependency> 
    ```

    唯一将`maven-install-plugin`您的外部 jar 复制到本地`.m2`maven 存储库。就是这样。它不会自动将这些 jars 作为 maven 依赖项包含到您的项目中。

    这是一个小问题，但有时很容易错过。

2.  只要您将外部 jars 安装到存储库`<repositories>`中，您就不需要包含任何内容（这是默认设置）`pom``.m2`

# wcf - 使用 Visual Studio 2012 安装 Web 服务软件工厂

> ID：13237023
> 
> 赞同：3
> 
> 时间：2012-11-05T17:14:48.757
> 
> 标签：wcf, visual-studio-2012, wssf

我使用来自[http://servicefactory.codeplex.com的 Web 服务软件工厂实现了许多 WCF 服务](http://servicefactory.codeplex.com)

所有这些服务都是使用 Visual Studio 2010 实现的。有没有人在 Visual Studio 2012 中使用过 Web 服务软件工厂？在网站上，我看到一个只有源代码的 zip 文件。我不确定网站上提供的文档是否有可用于 Visual Studio 2012 的安装。如果是，我该如何安装？安装文件在哪里可用，安装它们的顺序是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T06:05:28.043

我面临同样的情况，这里是解决我的问题的步骤。

1.  下载扩展的源代码，与 VS 2012 兼容（codeplex 站点上提供 zip）
2.  安装 VS 2012 的 SDK ( [http://msdn.microsoft.com/en-US/vstudio/ff718165.aspx](http://msdn.microsoft.com/en-US/vstudio/ff718165.aspx) )
3.  安装可视化和建模 SDK ( [http://www.microsoft.com/en-us/download/details.aspx?id=30680](http://www.microsoft.com/en-us/download/details.aspx?id=30680) )
4.  重新加载解决方案
5.  重新加载解决方案中任何已卸载的项目（右键单击卸载项目并重新加载）
6.  最后构建解决方案并从名为“Service Factory Package”的项目的 bin 文件夹中获取所需的 VSIX 安装程序 Happy coding

# php - 通过 POST lwp-request 请求后 $_POST 为空

> ID：13237030
> 
> 赞同：0
> 
> 时间：2012-11-05T17:15:18.500
> 
> 标签：php, post, lwp

我正在从命令行（Ubuntu）发送 POST 请求：

```
echo -n '{"prop":"value"}' | POST -c -U "application/json" http://site.com/test 
```

服务器脚本输出它的 $_POST：

```
<?php 
  var_dump ($_POST);
?> 
```

我在输出中看到：`Content-Length: 16`，但作为服务器的响应，我得到

```
array(0){
} 
```

我错在哪里了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T17:25:14.177

`$_POST`包含作为普通表单数据提交的数据的键值对。因为您发送了 JSON 数据，所以它的解析方式不同。

您需要检索请求正文。您可以使用`http_get_request_body()`或将正文视为文件，使用`fopen('php://input')`. 阅读请求正文后，您可以使用`json_decode()`它来解析它。

```
$x = json_decode(http_get_request_body()); 
```

看：

*   **[http_get_request_body](http://php.net/manual/en/function.http-get-request-body.php)**
*   **[I/O 流包装器](http://us2.php.net/manual/en/wrappers.php.php)**

# php - Google Maps API v3 代码不起作用

> ID：13237031
> 
> 赞同：-3
> 
> 时间：2012-11-05T17:15:18.357
> 
> 标签：php, javascript, google-maps, google-maps-api-3

下面的代码用于在 PHP 页面上显示地图。单击侧栏上特定位置的链接时会显示标记或图钉。单击链接时，地图会缩放到单击链接的位置。我最初是在 V2 中编写代码，现在正尝试将其转换为 V3。地图显示在页面上，但是当我单击链接时，地图不会检索其位置。单击链接时，它会调用以下代码中的 showme() 函数。

这是 JavaScript 代码。

```
 var geoCoder = null;
    var marker = null;
    var center = false;
    var show_info = false;

    function initialize() {
        var mapOptions = {
            center: new google.maps.LatLng(10.4032173, - 61.3719045),
            zoom: 9,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map"),
        mapOptions);
    }

  function showAddress(address,description) {
   var infowindow = new google.maps.InfoWindow({content:description});
      geoCoder = new google.maps.Geocoder(); 
      if (geoCoder) {
        geoCoder.getPosition()(
          address,
          function(point) {
            if (point){
              if(center) map.setCenter(point, 13);
              marker = new google.maps.Marker(point);
              google.maps.event.addListener(marker, "click", function() {
                infowindow.open(point, description);
              });
              marker.setMap(marker);
                if(show_info) infowindow.open(point, description);
              }
            }
        );
      }
     geoCoder = null;
    }

    function showLatLng(lat,lng,description) {
            var point=new google.maps.LatLng(parseFloat(lat),parseFloat(lng));
            if (point){
              if(center) map.setCenter(point, 14);
              marker = new google.maps.Marker({position:point,
                                           map: map});

                var infowindow = new google.maps.InfoWindow({content:description});

              google.maps.event.addListener(marker, "click", function() {
                infowindow.open(point, description);
              });
              marker.setMap(maker);
                if(show_info)  infowindow.open(point, description);
              }
      }

    function showme(name, address, lat, lng, contact, Link) {
        var description = desc(name, address, contact, Link);
        center = true;
        show_info = true;
        if (lat || lng) showLatLng(lat, lng, description);
        else showAddress(address, description);
        return false;
    }

    function desc(name, address, contact, Link) {
        //var address = "<div class='googleTip'><div><h1>"+name+"</h1></div><p class='address'>"+address+"<br />"+contact+"<br />"+delivery+"</p><span class='mapLink'></span></div>";
        var Address = ["<div class='googleTip' style='color:#000000; padding:5px'><h3>",
        name, "</h3>", "<div>",
        address, "<br />",
        webLink, "</div></div>", ].join('');
        return Address;
    } 
```

我该如何解决。我对此感到沮丧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:35:10.017

您的“showMe 函数仍在使用 API v2 语法。GMarker 应该是 google.maps.Marker，GEvent.addListener 应该是 google.maps.event.addListener，map.openInfowindow 需要针对新语法进行调整，[请参阅文档](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow)，一些如下所示（未测试）：

```
function showLatLng(lat,lng,description) {
        var point=new google.maps.LatLng(parseFloat(lat),parseFloat(lng));
        if (point){
          if(center_point) map.setCenter(point, 14);
          marker = new google.maps.Marker({position:point,
                                           map: map});
          var infowindow = new google.maps.InfoWindow({content:description});

          google.maps.event.addListener(marker, "click", function() {
            infowindow.open(point, marker);
          });
          marker.setMap(map);
            if(show_info) infowindow.open(point, marker);
          }
  } 
```

地理编码器的回调函数也有同样的问题。

# linux - 挂载点下隐藏文件夹的大小

> ID：13237038
> 
> 赞同：3
> 
> 时间：2012-11-05T17:15:51.860
> 
> 标签：linux, storage, local-storage, mount

我试图猜测在 linux 系统上使用的磁盘。问题是，使用像 'du -kxa / |sort -g' 这样的命令，我发现使用的空间比文件系统报告的要少（19Gb 分区中的 8Gb）。我怀疑在几个挂载点下有隐藏的文件和文件夹。我无法卸载磁盘，因为它是生产机器并且不能轻易停止。

问题是：

在 linux 上，如何获取隐藏在挂载点下的文件夹和文件？有没有办法测量这个空间？

Linux版本：Redhat Enterprise linux server 5.3。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-05T17:27:08.023

这不是一个真正的编程问题，因此可能有一个更好的论坛。然而，作为一个快速的答案，这是绑定挂载有用的一件事。假设我有两个独立的文件系统`/usr`，并且`/usr/local`，您可以这样做来查看是否`/usr/local`隐藏了任何内容：

```
mkdir /tmp/usr
mount --bind /usr /tmp/usr
ls /tmp/usr/local
# clean up if necessary
umount /tmp/usr
rmdir /tmp/usr 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-05T17:29:18.267

隐藏文件（其名称以点开头）仅存在于`ls`命令和 shell 文件扩展中。否则，它们只是名称以点开头的文件。

此外，如果文件没有更多名称，文件仍然可以使用文件系统中的空间。这可能发生在文件仍由某个进程打开的情况下，该进程[unlink(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/unlink.2.html) -ed 其姓氏。

您可以使用`lsof`来找出哪些进程正在打开某些文件。您可以`/proc/1234/fd`用来获取进程 1234 的打开文件。

要获取某个目录下的隐藏文件，您可以使用

```
 find /some/dir -name '.*' -ls 
```

此外，文件在磁盘上使用的空间超过了其数据所需的空间。阅读有关[inode 指针结构](http://en.wikipedia.org/wiki/Inode_pointer_structure)、[inode](http://en.wikipedia.org/wiki/Inode)、[文件系统](http://en.wikipedia.org/wiki/File_system)、[ext4](http://en.wikipedia.org/wiki/Ext4)、[碎片](http://en.wikipedia.org/wiki/Fragmentation_%28computing%29)的更多信息……通常，非常小的文件（十几个字节）会占用两个磁盘扇区（例如一千字节）。

# c# - 自动化按钮 点击弹出窗口

> ID：13237041
> 
> 赞同：0
> 
> 时间：2012-11-05T17:15:55.323
> 
> 标签：c#, service

我打算编写一个服务来寻找一个弹出操作出现，如果弹出确实出现点击“确定”按钮。我没有编写服务的经验，甚至没有如何寻找弹出窗口的经验。我目前正在使用 AutoIT，但想在内部创建一些东西。我尝试使用谷歌，但我认为我没有问一个正确的问题。关于最佳方法的任何想法或建议在哪里寻找使用什么？

# google-app-engine - om.google.appengine.tools.admin.JspCompilationException：编译jsp文件失败

> ID：13237042
> 
> 赞同：1
> 
> 时间：2012-11-05T17:15:57.150
> 
> 标签：google-app-engine

我正在尝试在 Google 应用引擎中部署示例应用。它在本地运行良好，但在应用程序引擎中部署时出现此错误。下面是日志。任何帮助表示赞赏....

```
Preparing to deploy:
    Created staging directory at: '/tmp/appcfg2293558534073477148.tmp'
    Scanning for jsp files.
    Compiling jsp files.
com.google.appengine.tools.admin.JspCompilationException: Failed to compile jsp files.
Nov 5, 2012 8:43:06 AM org.apache.jasper.compiler.AntCompiler generateClass
SEVERE: Error compiling file: /tmp/appcfg2293558534073477148.tmp/WEB-    INF/classes/org/apache/jsp/pages/list_jsp.java     [javac] Compiling 1 source file
    [javac] ----------
    [javac] 1\. WARNING in /tmp/appcfg2293558534073477148.tmp/WEB-    INF/classes/org/apache/jsp/pages/list_jsp.java (at line 7)
    [javac]     public final class list_jsp extends org.apache.jasper.runtime.HttpJspBase
    [javac]                        ^^^^^^^^
    [javac] The serializable class list_jsp does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] 2\. WARNING in /tmp/appcfg2293558534073477148.tmp/WEB-INF/classes/org/apache/jsp/pages/list_jsp.java (at line 14)
    [javac]     private javax.el.ExpressionFactory _el_expressionfactory;
    [javac]                                        ^^^^^^^^^^^^^^^^^^^^^
    [javac] The field list_jsp._el_expressionfactory is never read locally
    [javac] ----------
    [javac] 3\. WARNING in /tmp/appcfg2293558534073477148.tmp/WEB-INF/classes/org/apache/jsp/pages/list_jsp.java (at line 15)
    [javac]     private org.apache.AnnotationProcessor _jsp_annotationprocessor;
    [javac]                                            ^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] The field list_jsp._jsp_annotationprocessor is never read locally
    [javac] ----------
    [javac] 4\. ERROR in /tmp/appcfg2293558534073477148.tmp/WEB-INF/classes/org/apache/jsp/pages/list_jsp.java (at line 17)
    [javac]     public Object getDependants() {
    [javac]                   ^^^^^^^^^^^^^^^
    [javac] The return type is incompatible with JspSourceDependent.getDependants()
    [javac] ----------
    [javac] 5\. ERROR in /tmp/appcfg2293558534073477148.tmp/WEB-INF/classes/org/apache/jsp/pages/list_jsp.java (at line 22)
    [javac]     _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    [javac]                                          ^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] The method getJspApplicationContext(ServletContext) is undefined for the type JspFactory
    [javac] ----------
    [javac] 6\. WARNING in /tmp/appcfg2293558534073477148.tmp/WEB-INF/classes/org/apache/jsp/pages/list_jsp.java (at line 33)
    [javac]     HttpSession session = null;
    [javac]                 ^^^^^^^
    [javac] The local variable session is never read
    [javac] ----------
    [javac] 7\. WARNING in /tmp/appcfg2293558534073477148.tmp/WEB-INF/classes/org/apache/jsp/pages/list_jsp.java (at line 34)
    [javac]     ServletContext application = null;
    [javac]                    ^^^^^^^^^^^
    [javac] The local variable application is never read
    [javac] ----------
    [javac] 8\. WARNING in /tmp/appcfg2293558534073477148.tmp/WEB-INF/classes/org/apache/jsp/pages/list_jsp.java (at line 35)
    [javac]     ServletConfig config = null;
    [javac]                   ^^^^^^
    [javac] The local variable config is never read
    [javac] ----------
    [javac] 9\. WARNING in /tmp/appcfg2293558534073477148.tmp/WEB-INF/classes/org/apache/jsp/pages/list_jsp.java (at line 37)
    [javac]     Object page = this;
    [javac]            ^^^^
    [javac] The local variable page is never read
    [javac] ----------
    [javac] 9 problems (2 errors, 7 warnings)

Nov 5, 2012 8:43:06 AM org.apache.jasper.compiler.AntCompiler generateClass
SEVERE: Javac exception
Compile failed; see the compiler error output for details.
    at org.apache.tools.ant.taskdefs.Javac.compile(Javac.java:933)
at org.apache.tools.ant.taskdefs.Javac.execute(Javac.java:757)
    at org.apache.jasper.compiler.AntCompiler.generateClass(AntCompiler.java:226)
at org.apache.jasper.compiler.Compiler.compile(Compiler.java:349)
    at org.apache.jasper.JspC.processFile(JspC.java:1192)
    at org.apache.jasper.JspC.execute(JspC.java:1341)
    at com.google.appengine.tools.development.LocalJspC.main(LocalJspC.java:18)
Nov 5, 2012 8:43:06 AM org.apache.jasper.compiler.AntCompiler generateClass
SEVERE: Environment: Compile: javaFileName=/tmp/appcfg2293558534073477148.tmp/WEB-INF/classes/org/apache/jsp/pages/list_jsp.java
classpath=/rhel5pdi/home/testuser/Desktop/softwares/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.3/appengine-java-sd 
```

# c++ - 如何避免 expr 中的溢出。A B C D

> ID：13237046
> 
> 赞同：161
> 
> 时间：2012-11-05T17:16:08.127
> 
> 标签：c++, c, integer-overflow

我需要计算一个看起来像: 的表达式 `A*B - C*D`，它们的类型是：`signed long long int A, B, C, D;` 每个数字都可以非常大（不会溢出它的类型）。虽然`A*B`可能导致溢出，但同时表达式`A*B - C*D`可能非常小。我怎样才能正确计算它？

例如：`MAX * MAX - (MAX - 1) * (MAX + 1) == 1`, where`MAX = LLONG_MAX - n`和 n - 一些自然数。

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-11-05T17:30:58.220

我猜这似乎太微不足道了。但是`A*B`是可以溢出的。

您可以执行以下操作，而不会丢失精度

```
A*B - C*D = A(D+E) - (A+F)D
          = AD + AE - AD - DF
          = AE - DF
             ^smaller quantities E & F

E = B - D (hence, far smaller than B)
F = C - A (hence, far smaller than C) 
```

这种分解可以**进一步进行**。
正如@Gian 指出的那样，如果类型是 unsigned long long，则在减法运算期间可能需要小心。

* * *

例如，对于您在问题中的情况，只需要一次迭代，

```
 MAX * MAX - (MAX - 1) * (MAX + 1)
  A     B       C           D

E = B - D = -1
F = C - A = -1

AE - DF = {MAX * -1} - {(MAX + 1) * -1} = -MAX + MAX + 1 = 1 
```

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2012-11-05T17:21:24.503

最简单和最通用的解决方案是使用不会溢出的表示，通过使用长整数库（例如[http://gmplib.org/](http://gmplib.org/)）或使用结构或数组表示并实现一种长乘法（即将每个数字分成两个 32 位的一半并执行如下乘法：

```
(R1 + R2 * 2^32 + R3 * 2^64 + R4 * 2^96) = R = A*B = (A1 + A2 * 2^32) * (B1 + B2 * 2^32) 
R1 = (A1*B1) % 2^32
R2 = ((A1*B1) / 2^32 + (A1*B2) % 2^32 + (A2*B1) % 2^32) % 2^32
R3 = (((A1*B1) / 2^32 + (A1*B2) % 2^32 + (A2*B1) % 2^32) / 2^32 + (A1*B2) / 2^32 + (A2*B1) / 2^32 + (A2*B2) % 2^32) %2^32
R4 = ((((A1*B1) / 2^32 + (A1*B2) % 2^32 + (A2*B1) % 2^32) / 2^32 + (A1*B2) / 2^32 + (A2*B1) / 2^32 + (A2*B2) % 2^32) / 2^32) + (A2*B2) / 2^32 
```

假设最终结果适合 64 位，您实际上并不需要 R3 的大多数位，也不需要 R4

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2012-11-05T17:57:54.560

请注意，这不是标准的，因为它依赖于环绕签名溢出。（GCC 具有启用此功能的编译器标志。）

但是如果你只是在 中进行所有计算`long long`，那么直接应用公式的结果：
`(A * B - C * D)`只要正确的结果适合`long long`.

* * *

这是一种解决方法，它仅依赖于实现定义的将无符号整数转换为有符号整数的行为。但这可以预期今天几乎适用于每个系统。

```
(long long)((unsigned long long)A * B - (unsigned long long)C * D) 
```

这会将输入转换到`unsigned long long`溢出行为被标准保证环绕的位置。最后转换回有符号整数是实现定义的部分，但现在几乎可以在所有环境中使用。

* * *

如果您需要更多迂腐的解决方案，我认为您必须使用“长算术”

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-11-05T17:46:37.640

这应该有效（我认为）：

```
signed long long int a = 0x7ffffffffffffffd;
signed long long int b = 0x7ffffffffffffffd;
signed long long int c = 0x7ffffffffffffffc;
signed long long int d = 0x7ffffffffffffffe;
signed long long int bd = b / d;
signed long long int bdmod = b % d;
signed long long int ca = c / a;
signed long long int camod = c % a;
signed long long int x = (bd - ca) * a * d - (camod * d - bdmod * a); 
```

这是我的推导：

```
x = a * b - c * d
x / (a * d) = (a * b - c * d) / (a * d)
x / (a * d) = b / d - c / a

now, the integer/mod stuff:
x / (a * d) = (b / d + ( b % d ) / d) - (c / a + ( c % a ) / a )
x / (a * d) = (b / d - c / a) - ( ( c % a ) / a - ( b % d ) / d)
x = (b / d - c / a) * a * d - ( ( c % a ) * d - ( b % d ) * a) 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-11-06T06:15:13.700

```
E = max(A,B,C,D)
A1 = A -E;
B1 = B -E;
C1 = C -E;
D1 = D -E; 
```

然后

```
A*B - C*D = (A1+E)*(B1+E)-(C1+E)(D1+E) = (A1+B1-C1-D1)*E + A1*B1 -C1*D1 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-11-05T17:24:56.637

您可以考虑计算所有值的最大公因数，然后在进行算术运算之前将它们除以该因数，然后再次相乘。然而，这假设存在这样的因子（例如，如果`A`、和恰好是相对素数，则它们将没有公因子）。`B``C``D`

同样，您可以考虑使用对数刻度，但这会有点吓人，取决于数值精度。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2012-11-05T20:43:37.080

如果结果适合 long long int，则表达式 A*BC*D 是可以的，因为它执行算术 mod 2^64，并会给出正确的结果。问题是要知道结果是否适合 long long int。要检测这一点，您可以使用以下技巧使用双打：

```
if( abs( (double)A*B - (double)C*D ) > MAX_LLONG ) 
    Overflow
else 
    return A*B-C*D; 
```

这种方法的问题在于，您受到双精度尾数（54 位？）的精度限制，因此您需要将乘积 A*B 和 C*D 限制为 63+54 位（或者可能更少）。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2012-11-05T17:26:08.487

您可以将每个数字写在一个数组中，每个元素都是一个数字，并将计算作为[polynomials](http://en.wikipedia.org/wiki/Polynomial)进行。取得到的多项式，它是一个数组，并通过将数组的每个元素乘以 10 到数组中位置的幂来计算结果（第一个位置是最大的，最后一个是零）。

数`123`可以表示为：

```
123 = 100 * 1 + 10 * 2 + 3 
```

您只需为其创建一个数组`[1 2 3]`。

您对所有数字 A、B、C 和 D 执行此操作，然后将它们作为多项式相乘。一旦你得到了多项式，你只需从中重建数字。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2012-11-05T23:42:53.363

虽然一个`signed long long int`不会持有`A*B`，但其中两个会持有。因此`A*B`可以分解为不同指数的树项，其中任何一个都适合`signed long long int`.

```
A1=A>>32;
A0=A & 0xffffffff;
B1=B>>32;
B0=B & 0xffffffff;

AB_0=A0*B0;
AB_1=A0*B1+A1*B0;
AB_2=A1*B1; 
```

对`C*D`.

按照直接的方式，可以对每一对进行减法运算`AB_i`，`CD_i`同样地，对每一对使用一个额外的进位位（准确地说是一个 1 位整数）。所以如果我们说 E=A*BC*D 你会得到类似的结果：

```
E_00=AB_0-CD_0 
E_01=(AB_0 > CD_0) == (AB_0 - CD_0 < 0) ? 0 : 1  // carry bit if overflow
E_10=AB_1-CD_1 
... 
```

我们继续将 的上半部分转移`E_10`到`E_20`（移动 32 并添加，然后擦除 的上半部分`E_10`）。

现在您可以`E_11`通过将带有正确符号（从非进位部分获得）添加到`E_20`. 如果这触发了溢出，结果也不适合。

`E_10`现在有足够的“空间”来取上半部分`E_00` （移位、加法、擦除）和进位位`E_01`。

`E_10`现在可能又变大了，所以我们重复转移到`E_20`.

此时，`E_20`必须变为零，否则结果不合适。由于转移，上半部分`E_10`也是空的。

最后一步是将下半部分再次转移`E_20`到`E_10`。

`E=A*B+C*D`如果符合的期望`signed long long int`成立，我们现在有

```
E_20=0
E_10=0
E_00=E 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2012-11-05T18:41:32.137

**如果**您知道最终结果可以用您的整数类型表示，则可以使用以下代码快速执行此计算。因为 C 标准规定无符号算术是模算术并且不会溢出，所以您可以使用无符号类型来执行计算。

下面的代码假设有一个相同宽度的无符号类型，并且有符号类型使用所有位模式来表示值（没有陷阱表示，有符号类型的最小值是无符号类型模数一半的负数）。如果这在 C 实现中不成立，则可以为此对 ConvertToSigned 例程进行简单调整。

下面使用`signed char`and`unsigned char`来演示代码。对于您的实现，更改to的定义和`Signed`to`typedef signed long long int Signed;`的定义。`Unsigned``typedef unsigned long long int Unsigned;`

```
#include <limits.h>
#include <stdio.h>
#include <stdlib.h>

//  Define the signed and unsigned types we wish to use.
typedef signed char   Signed;
typedef unsigned char Unsigned;

//  uHalfModulus is half the modulus of the unsigned type.
static const Unsigned uHalfModulus = UCHAR_MAX/2+1;

//  sHalfModulus is the negation of half the modulus of the unsigned type.
static const Signed   sHalfModulus = -1 - (Signed) (UCHAR_MAX/2);

/*  Map the unsigned value to the signed value that is the same modulo the
    modulus of the unsigned type.  If the input x maps to a positive value, we
    simply return x.  If it maps to a negative value, we return x minus the
    modulus of the unsigned type.

    In most C implementations, this routine could simply be "return x;".
    However, this version uses several steps to convert x to a negative value
    so that overflow is avoided.
*/
static Signed ConvertToSigned(Unsigned x)
{
    /*  If x is representable in the signed type, return it.  (In some
        implementations, 
    */
    if (x < uHalfModulus)
        return x;

    /*  Otherwise, return x minus the modulus of the unsigned type, taking
        care not to overflow the signed type.
    */
    return (Signed) (x - uHalfModulus) - sHalfModulus;
}

/*  Calculate A*B - C*D given that the result is representable as a Signed
    value.
*/
static signed char Calculate(Signed A, Signed B, Signed C, Signed D)
{
    /*  Map signed values to unsigned values.  Positive values are unaltered.
        Negative values have the modulus of the unsigned type added.  Because
        we do modulo arithmetic below, adding the modulus does not change the
        final result.
    */
    Unsigned a = A;
    Unsigned b = B;
    Unsigned c = C;
    Unsigned d = D;

    //  Calculate with modulo arithmetic.
    Unsigned t = a*b - c*d;

    //  Map the unsigned value to the corresponding signed value.
    return ConvertToSigned(t);
}

int main()
{
    //  Test every combination of inputs for signed char.
    for (int A = SCHAR_MIN; A <= SCHAR_MAX; ++A)
    for (int B = SCHAR_MIN; B <= SCHAR_MAX; ++B)
    for (int C = SCHAR_MIN; C <= SCHAR_MAX; ++C)
    for (int D = SCHAR_MIN; D <= SCHAR_MAX; ++D)
    {
        //  Use int to calculate the expected result.
        int t0 = A*B - C*D;

        //  If the result is not representable in signed char, skip this case.
        if (t0 < SCHAR_MIN || SCHAR_MAX < t0)
            continue;

        //  Calculate the result with the sample code.
        int t1 = Calculate(A, B, C, D);

        //  Test the result for errors.
        if (t0 != t1)
        {
            printf("%d*%d - %d*%d = %d, but %d was returned.\n",
                A, B, C, D, t0, t1);
            exit(EXIT_FAILURE);
        }
    }
    return 0;
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-11-05T17:51:59.363

您可以尝试将等式分解为不会溢出的较小组件。

```
AB - CD
= [ A(B - N) - C( D - M )] + [AN - CM]

= ( AK - CJ ) + ( AN - CM)

    where K = B - N
          J = D - M 
```

如果组件仍然溢出，您可以递归地将它们分解成更小的组件，然后重新组合。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2012-11-07T15:29:19.023

我可能没有涵盖所有边缘情况，也没有对此进行严格测试，但这实现了我记得在 80 年代尝试在 16 位 cpu 上进行 32 位整数数学时使用的技术。本质上，您将 32 位拆分为两个 16 位单元并分别使用它们。

```
public class DoubleMaths {
  private static class SplitLong {
    // High half (or integral part).
    private final long h;
    // Low half.
    private final long l;
    // Split.
    private static final int SPLIT = (Long.SIZE / 2);

    // Make from an existing pair.
    private SplitLong(long h, long l) {
      // Let l overflow into h.
      this.h = h + (l >> SPLIT);
      this.l = l % (1l << SPLIT);
    }

    public SplitLong(long v) {
      h = v >> SPLIT;
      l = v % (1l << SPLIT);
    }

    public long longValue() {
      return (h << SPLIT) + l;
    }

    public SplitLong add ( SplitLong b ) {
      // TODO: Check for overflow.
      return new SplitLong ( longValue() + b.longValue() );
    }

    public SplitLong sub ( SplitLong b ) {
      // TODO: Check for overflow.
      return new SplitLong ( longValue() - b.longValue() );
    }

    public SplitLong mul ( SplitLong b ) {
      /*
       * e.g. 10 * 15 = 150
       * 
       * Divide 10 and 15 by 5
       * 
       * 2 * 3 = 5
       * 
       * Must therefore multiply up by 5 * 5 = 25
       * 
       * 5 * 25 = 150
       */
      long lbl = l * b.l;
      long hbh = h * b.h;
      long lbh = l * b.h;
      long hbl = h * b.l;
      return new SplitLong ( lbh + hbl, lbl + hbh );
    }

    @Override
    public String toString () {
      return Long.toHexString(h)+"|"+Long.toHexString(l);
    }
  }

  // I'll use long and int but this can apply just as easily to long-long and long.
  // The aim is to calculate A*B - C*D without overflow.
  static final long A = Long.MAX_VALUE;
  static final long B = Long.MAX_VALUE - 1;
  static final long C = Long.MAX_VALUE;
  static final long D = Long.MAX_VALUE - 2;

  public static void main(String[] args) throws InterruptedException {
    // First do it with BigIntegers to get what the result should be.
    BigInteger a = BigInteger.valueOf(A);
    BigInteger b = BigInteger.valueOf(B);
    BigInteger c = BigInteger.valueOf(C);
    BigInteger d = BigInteger.valueOf(D);
    BigInteger answer = a.multiply(b).subtract(c.multiply(d));
    System.out.println("A*B - C*D = "+answer+" = "+answer.toString(16));

    // Make one and test its integrity.
    SplitLong sla = new SplitLong(A);
    System.out.println("A="+Long.toHexString(A)+" ("+sla.toString()+") = "+Long.toHexString(sla.longValue()));

    // Start small.
    SplitLong sl10 = new SplitLong(10);
    SplitLong sl15 = new SplitLong(15);
    SplitLong sl150 = sl10.mul(sl15);
    System.out.println("10="+sl10.longValue()+"("+sl10.toString()+") * 15="+sl15.longValue()+"("+sl15.toString()+") = "+sl150.longValue() + " ("+sl150.toString()+")");

    // The real thing.
    SplitLong slb = new SplitLong(B);
    SplitLong slc = new SplitLong(C);
    SplitLong sld = new SplitLong(D);
    System.out.println("B="+Long.toHexString(B)+" ("+slb.toString()+") = "+Long.toHexString(slb.longValue()));
    System.out.println("C="+Long.toHexString(C)+" ("+slc.toString()+") = "+Long.toHexString(slc.longValue()));
    System.out.println("D="+Long.toHexString(D)+" ("+sld.toString()+") = "+Long.toHexString(sld.longValue()));
    SplitLong sanswer = sla.mul(slb).sub(slc.mul(sld));
    System.out.println("A*B - C*D = "+sanswer+" = "+sanswer.longValue());

  }

} 
```

印刷：

```
A*B - C*D = 9223372036854775807 = 7fffffffffffffff
A=7fffffffffffffff (7fffffff|ffffffff) = 7fffffffffffffff
10=10(0|a) * 15=15(0|f) = 150 (0|96)
B=7ffffffffffffffe (7fffffff|fffffffe) = 7ffffffffffffffe
C=7fffffffffffffff (7fffffff|ffffffff) = 7fffffffffffffff
D=7ffffffffffffffd (7fffffff|fffffffd) = 7ffffffffffffffd
A*B - C*D = 7fffffff|ffffffff = 9223372036854775807 
```

在我看来它正在工作。

我敢打赌我错过了一些微妙之处，例如注意标志溢出等，但我认为本质就在那里。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2013-06-28T19:14:31.930

为了完整起见，由于没有人提到它，现在一些编译器（例如 GCC）实际上为您提供了一个 128 位整数。

因此，一个简单的解决方案可能是：

```
(long long)((__int128)A * B - (__int128)C * D) 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2012-11-05T17:28:03.000

`AB-CD = (AB-CD) * AC / AC = (B/C-D/A)*A*C`. 既不能溢出，`B/C`也`D/A`不能溢出，所以`(B/C-D/A)`先计算。由于根据您的定义，最终结果不会溢出，因此您可以安全地执行剩余的乘法运算并计算`(B/C-D/A)*A*C`出所需的结果。

请注意，如果您的输入也可能**非常小**，则`B/C`or`D/A`可能会溢出。如果可能，根据输入检查可能需要更复杂的操作。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2012-11-07T10:52:45.907

选择`K = a big number`（例如`K = A - sqrt(A)`）

```
A*B - C*D = (A-K)*(B-K) - (C-K)*(D-K) + K*(A-C+B-D); // Avoid overflow. 
```

* * *

为什么？

```
(A-K)*(B-K) = A*B - K*(A+B) + K^2
(C-K)*(D-K) = C*D - K*(C+D) + K^2

=>
(A-K)*(B-K) - (C-K)*(D-K) = A*B - K*(A+B) + K^2 - {C*D - K*(C+D) + K^2}
(A-K)*(B-K) - (C-K)*(D-K) = A*B - C*D - K*(A+B) + K*(C+D) + K^2 - K^2
(A-K)*(B-K) - (C-K)*(D-K) = A*B - C*D - K*(A+B-C-D)

=>
A*B - C*D = (A-K)*(B-K) - (C-K)*(D-K) + K*(A+B-C-D)

=>
A*B - C*D = (A-K)*(B-K) - (C-K)*(D-K) + K*(A-C+B-D) 
```

请注意，因为 A、B、C 和 D 是大数，因此`A-C`和`B-D`是小数。

# performance - LowProfileImageLoader 获取 OutOfMemoryException Windows Phone

> ID：13237048
> 
> 赞同：0
> 
> 时间：2012-11-05T17:16:29.833
> 
> 标签：performance, windows-phone-7, asynchronous, out-of-memory, loadimage

我正在使用 LowProfileImageLoader 异步加载图像而不会阻止 UI。

您可以从链接获取它：[LowProfileImageLoader](http://blogs.msdn.com/b/delay/archive/2011/03/03/quot-your-feedback-is-important-to-us-please-stay-on-the-line-quot-improving-windows-phone-7-application-performance-is-even-easier-with-these-lowprofileimageloader-and-deferredloadlistbox-updates.aspx)

如果 List 的 DataSource 有许多不同的链接，则一切正常。

**但是现在，我想使用所有相同 URL 的 DataSource 进行测试，所以在文件 TwitterService.cs 中，我编辑如下：**

```
private static void HandleGetFollowersResponse(IAsyncResult result)
        {
            var state = (GetFollowersState)result.AsyncState;
//#if DEBUG
            try
            {
//#endif
                //using (var response = state.Request.EndGetResponse(result))
                //{
                //    using (var stream = response.GetResponseStream())
                //    {
                //        var document = XDocument.Load(stream);
                //        Deployment.Current.Dispatcher.BeginInvoke(() =>
                //        {
                //            foreach (var user in document.Element("users_list").Element("users").Elements("user"))
                //            {
                //                state.Collection.Add(new TwitterUser(user.Element("screen_name").Value, new Uri(user.Element("profile_image_url").Value)));
                //            }
                //        });
                //        var nextCursor = document.Element("users_list").Element("next_cursor").Value;
                //        if ("0" == nextCursor)
                //        {
                //            // Load completed
                //            if (null != state.OnFollowersLoaded)
                //            {
                //                Deployment.Current.Dispatcher.BeginInvoke(() => state.OnFollowersLoaded());
                //            }
                //        }
                //        else
                //        {
                //            // Load the next set
                //            MakeGetFollowersRequest(state.ScreenName, nextCursor, state.Collection, state.OnFollowersLoaded);
                //        }
                //    }
                //}

                throw new WebException();
//#if DEBUG
            }
            catch (WebException)
            {
                 //No network access; create some fake users for debugging purposes
                for (var i = 0; i < 200; i++)
                {
                    state.Collection.Add(new TwitterUser("Fake User " + i, new Uri("http://4.bp.blogspot.com/-O-6vxSiyvbk/UClib6CiR0I/AAAAAAAAQaI/5Fr1dI-kQBI/s1600/Flowers+beauty+desktop+wallpapers.+(1).jpg")));
                }
                if (null != state.OnFollowersLoaded)
                {
                    Deployment.Current.Dispatcher.BeginInvoke(() => state.OnFollowersLoaded());
                }
            }
//#endif
        } 
```

**它将创建具有相同 URL 的 200 个项目的列表数据源进行测试。**

***在 LowProfileImageLoader.cs 中，我记录了应用程序的 currentUsedMemory：***

```
private static void WorkerThreadProc(object unused)
    {
            // Process pending completions
                    if (0 < pendingCompletions.Count)
                    {
                        // Get the Dispatcher and process everything that needs to happen on the UI thread in one batch
                        Deployment.Current.Dispatcher.BeginInvoke(() =>
                        {

                            while (0 < pendingCompletions.Count)
                            {

                                Logger.printUsedMemory();
                                }
                            }
                        }

    } 
```

Logger.printUsedMemory() 是帮助我记录我的应用程序当前使用的内存的辅助函数。不再在代码中进行任何编辑。

但是当运行我的应用程序时，结果很奇怪： **我得到了 OutOfMemoryException。**

***输出窗口中的文本日志（以字节为单位的已用内存）如下：***

```
 Used memory: 21966848
 Used memory: 25051136
 Used memory: 28442624
 Used memory: 32673792
 Used memory: 35512320
 Used memory: 39079936
 Used memory: 43364352
 Used memory: 46571520
 Used memory: 49815552
 Used memory: 53497856
 Used memory: 52514816
 Used memory: 55902208
 Used memory: 60452864
 Used memory: 62001152
 Used memory: 65503232 ~ 65.5mb
 Used memory: 69005312 ~ 69mb 
```

文本日志显示**加载图像后内存增加约 3mb** ，尽管**图像大小（来自 URL）只有 120kb。**

为什么 OutofMemoryException 会抛出？为什么垃圾回收不调用而我的内存稳定增加？

任何帮助都是非常恰当的。预先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T20:17:06.613

> 图像内存增加 ~ 3mb 虽然图像大小（来自 URL）只有 120kb

显示图像时，必须从 JPEG 解码，因此占用更多内存是正常的。尝试使用 Paint 将图像转换为 BMP 以查看它。

> 为什么 OutofMemoryException 会抛出？

您可能超过了 90 MB 的限制

> 为什么垃圾回收不调用而我的内存稳定增加？

查看这篇诺基亚文章：[考虑用使用数据虚拟化的 ListBox 替换图像替换长列表](http://www.developer.nokia.com/Community/Wiki/Best_practice_tips_for_delivering_apps_to_Windows_Phone_with_256_MB#Tip_.238_-_Consider_replacing_long_lists_with_images_with_ListBox_replacements_that_use_Data_Virtualization)

# javascript - http 标头 ajax 范围始终提供完整的站点

> ID：13237049
> 
> 赞同：1
> 
> 时间：2012-11-05T17:16:31.550
> 
> 标签：javascript, http-headers, range, greasemonkey

我尝试使用 Range-header 在 Greasemonkey 脚本中发送请求。请求的站点有点长，我知道我真正需要哪些部分，所以我想，与其请求整个站点下载，不如请求必要的 500 字节来加快速度。

但是，`Range: bytes=0-500`总是给我完整的网站。我也试过`Content-Range: bytes=0-500`了，它不起作用，并且`Content-Length:500`由于安全问题不允许再设置。

那么，有谁知道，为什么会这样？我正在使用 Greasemonkey 脚本：

```
 GM_xmlhttpRequest({
    method: 'GET',
    url: "http://colonel-strawberry.deviantart.com/",
     headers: {"Range": "bytes=0-500"}, 
    onload: function (responseDetails) {
      console.log(responseDetails);
    },
    onerror: function(responseDetails) {
      console.log("err:"+responseDetails);
    }
}); 
```

带有响应头：

```
Date: Mon, 05 Nov 2012 17:11:42 GMT
Content-Encoding: gzip
Transfer-Encoding: chunked
P3P: policyref="/w3c/p3p.xml", CP="NOI DSP COR CURa OUR STP"
Connection: Keep-Alive
Server: Apache
Vary: Accept-Encoding
Content-Type: text/html
Cache-Control: private
Keep-Alive: timeout=45 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T17:23:51.327

主机`colonel-strawberry.deviantart.com`似乎不支持字节范围的请求。

您需要从支持它们的服务器请求数据。

（我通过比较首先`curl -H "Range: bytes=50-60" $foo`在哪里，然后在我控制的服务器上的 URI 进行测试）。`$foo``http://colonel-strawberry.deviantart.com`

注意[HTTP 规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35.2)：

> 服务器可以忽略 Range 标头。

# php - 如何使用户能够使用 URI 语言标识符在语言之间切换

> ID：13237051
> 
> 赞同：1
> 
> 时间：2012-11-05T17:16:38.240
> 
> 标签：php, codeigniter, url

我正在使用这个[URI 语言标识符](https://github.com/EllisLab/CodeIgniter/wiki/URI-Language-Identifier)

```
http://localhost/internationalisation/index.php/en/
http://localhost/internationalisation/index.php/en/welcome/
http://localhost/internationalisation/index.php/en/contact/
http://localhost/internationalisation/index.php/es/
http://localhost/internationalisation/index.php/es/welcome/ 
```

我已经设置`$config['lang_ignore'] = FALSE;`，所以 URL 显示了我当前使用的语言，就像上面一样。

问题：如何让用户在语言之间切换？

View 中的这些代码不起作用：

```
<a href="<?php echo site_url('en'); ?>">English</a>
<a href="<?php echo site_url('es'); ?>">Spanish</a> 
```

因为他们产生这样的链接：

```
http://localhost/internationalisation/index.php/en/en
http://localhost/internationalisation/index.php/en/es 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:42:03.097

你有几个选择...

*   site_url 将始终在末尾返回 /en 或 /es 或路径的任何位，因此您可以使用字符串函数来破坏（删除）结束位并添加您自己的。

*   您可以设置具有站点名称并引用该站点名称的配置属性（“http://localhost/internationalisation/index.php”），然后附加您的语言标识符。

*   您可以将相对路径和 basename 函数与**FILE**魔术常量一起使用

> ```
> <?php echo basename(__FILE__) . '/en'; ?> 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T09:27:34.400

遵循 LastCoder 的第一个建议：

**配置：**

```
$config['lang_ignore'] = FALSE; 
```

**看法：**

```
<a href="<?php echo site_url('language/en'); ?>">English</a>
<a href="<?php echo site_url('language/es'); ?>">Spanish</a> 
```

**控制器：**

```
class Language extends CI_Controller
{
    public function __construct()
    {
        parent::__construct();

        $this->load->helper('url');

        $lang_uri_abbr = $this->config->item('lang_uri_abbr');

        if ($this->uri->segment(2) === false ||
            ! isset($lang_uri_abbr[$this->uri->segment(2)]))
        {
            redirect();
        }
        else
        {
            $site_url = substr(site_url(), 0, -2);

            redirect($site_url . $this->uri->segment(2));
        }
    }
} 
```

# android - Android HttpClient：使用 MultipartEntity 或 Entity 发送发布请求

> ID：13237054
> 
> 赞同：2
> 
> 时间：2012-11-05T17:16:47.893
> 
> 标签：android, entity, http-post, multipartentity

基于[此响应](https://stackoverflow.com/questions/13002547/android-httppost-with-parameters-and-file)，我了解到我必须使用 MultipartEntity 才能发送带有正文和参数的 http post 请求。

我不知道的是：一旦请求到达服务器端，它是否必须以不同的方式管理具有多部分实体的请求和仅具有实体的请求？

这个问题是因为我正在开发一个库，我必须选择如何将发布请求发送到服务器，如果我总是可以使用 MultipartEntity（更通用）或者我必须让用户选择使用什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:24:20.847

您谈论“服务器”就好像所有服务器都是相同的。我从经验中知道，有些服务器会要求您以不同的方式处理它。就我而言，我正在考虑 Java+Tomcat+apache-httpcommons

简而言之，是的，某些服务器会要求以不同方式处理它。

# php - PHP Google Calendar 从特定日历获取事件

> ID：13237055
> 
> 赞同：0
> 
> 时间：2012-11-05T17:16:49.190
> 
> 标签：php, google-calendar-api

我在 Google 日历中有 2 个或更多日历。我可以将事件添加到该特定日历，例如：

```
[...]
$client = Zend_Gdata_ClientLogin::getHttpClient($user, $pass, $service);
$service = new Zend_Gdata_Calendar($client);

//Set up  that loop again to find the new calendar:
$calFeed = $service->getCalendarListFeed();
foreach ($calFeed as $calendar) {
    if($calendar->title->text == "Calendar2")
         $appCalUrl = $calendar->content->src;
    }
}
[...]

try {

    $event           = $service->newEventEntry();
    $event->title    = $service->newTitle($title);

    $when            = $service->newWhen();
    $when->startTime = $start;
    $when->endTime   = $end;

    $event->when     = array($when);
    $newEvent        = $service->insertEvent($event, $appCalUrl);

    // fetch URI for edit, delete
    $uri = $newEvent->id->text;

} catch (Zend_Gdata_App_Exception $e) {
    echo "Error: " . $e->getResponse();
} 
```

$uri 会生成如下字符串： [http ://www.google.com/calendar/feeds/7b06drcai3lhc4lhhb0lgvv7sk%40group.calendar.google.com/private/full/ndp7g62tbbvknhi8bbhh9jfu9o](http://www.google.com/calendar/feeds/7b06drcai3lhc4lhhb0lgvv7sk%40group.calendar.google.com/private/full/ndp7g62tbbvknhi8bbhh9jfu9o)

然后，使用：

```
try {

     $title = "test2";
     $event = $service->getCalendarEventEntry($uri);
     $event->title = $service->newTitle($title);
    } catch (Zend_Gdata_App_Exception $e) {
    die("Error: " . $e->getResponse());
} 
```

这总是会导致错误，例如：BAD / Invalid URI

我一直在搜索，并且在多个示例中都说 URI 格式应该类似于：

```
getCalendarEventEntry('http://www.google.com/calendar/feeds/default/private/full/' . $id); 
```

仅获取 ID 也不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:52:07.007

找到遮阳篷：

字符串的格式是：

```
http://www.google.com/calendar/feeds/$calendar_id%40group.calendar.google.com/private/full/$event_id 
```

# android - 具有透明区域的 Android 位图

> ID：13237057
> 
> 赞同：2
> 
> 时间：2012-11-05T17:16:54.307
> 
> 标签：android, bitmap

如何在 Android 上使用 PNG 图像将多边形（由点集合指定）设置为透明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:20:05.003

为了实现这一点，您必须首先从 a 获取对资源的引用`BitmapFactory`：

```
Bitmap my_image = BitmapFactory.decodeResource(getResources(), R.drawable.[your_image]); 
```

然后，您必须使用该`setPixels()`方法在 PNG 上定义要透明的区域。我相信，透明度是通过将像素设置`Color`为 0 来实现的。

派生多边形将是您必须在应用程序中进行的一些计算，然后将多边形的尺寸传递给`setPixels()`方法。有关如何使用该方法的想法，请参阅从 Android 开发人员文档中获取的[此链接。](http://developer.android.com/reference/android/graphics/Bitmap.html)`setPixels()`

请注意，这假定您的 PNG 文件是**mutable**。你会得到一个`IllegalStateException`否则。

* * *

## 推导 N 边多边形的面积

这是您的问题变得更具挑战性的地方。由于您不能使用传统的面积公式（因为面积与此示例无关，而是与顶点所在的位置有关），您必须自己想办法计算必须透明的区域。

我能想到的一种方法是测试用户绘制线的一部分下方的所有像素并将它们标记为透明，直到遇到交叉点，然后重复此操作直到到达图像的底部。请参阅此图以供参考：

![在此处输入图像描述](../Images/bfe71d5a558f7f6f9219fc78305772a9.png)

此处的 ΔX 是任意定义的像素长度，可以增加以提高精度，也可以降低以提高性能。获得这种透明度的过程如下：

1.  获取最左侧的值，该值是用户绘制的顶点的一部分；
2.  向下移动图像（通过减小方法`Y`中的值`getPixel()`直到与另一个用户绘制的顶点发生碰撞，在使用时将像素更改为透明`setPixel()`并传入当前坐标；
3.  当与另一个顶点碰撞时，停止改变像素的透明度，而是**继续**向下解析列；
4.  同样，如果您到达另一个顶点，请开始将以下像素标记为透明；
5.  重复此操作，直到到达图像底部；
6.  将 X 值增加您预定义的常数 ΔX，并在下一列重复此操作。

请注意，在设置透明度和不设置透明度之间切换很重要（您可以使用 a`boolean`来保持状态），因为多边形可能“弯曲”并返回到您正在解析的列中。

# javascript - 获取敲除中被点击元素的索引

> ID：13237058
> 
> 赞同：12
> 
> 时间：2012-11-05T17:16:55.697
> 
> 标签：javascript, jquery, knockout.js

获取无序列表的单击元素索引的最佳方法是什么？

让我举个例子。假设我有以下 HTML 代码：

```
<ul data-bind="foreach: listItems">
    <li data-bind="click: $parent.itemClicked">
         <p data-bind="text: title"></p>
    </li>
</ul> 
```

现在我有以下 javascript 代码来获取索引：

...

```
self.itemClicked = function(data, item) {
    var index = $(item.target).index();
} 
```

...

但问题是如果目标元素是`<p>`例如，我得到不正确的结果。那么我应该如何获取被点击`<li>`元素的索引呢？淘汰赛是否有一些方法或者我应该以某种方式使用jquery？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-05T17:37:04.067

我推荐使用 Knockout 的`$index`context 属性。请参见下面的示例（[JsFiddle](http://jsfiddle.net/sturtevant/Knd6N/)）：

**HTML**

```
<!DOCTYPE html>
<html>
<body>
<ul data-bind="foreach: listItems">
    <li data-bind="click: $parent.itemClicked.bind($data, $index())">
         <p data-bind="text: title"></p>
    </li>
</ul>
</body>
</html>
​ 
```

**JavaScript**

```
var vmodel = {
    listItems: ko.observableArray([
        {title: "Able"},
        {title: "Baker"},
        {title: "Charlie"}]),
    itemClicked: function(index) {
        alert(index);
    }
};
ko.applyBindings(vmodel);​ 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-04-21T15:58:55.553

与其弄乱你的绑定，不如在事件函数中获取索引更漂亮。您可以使用,获取[绑定上下文](http://knockoutjs.com/documentation/binding-context.html)`event.target`[`ko.contextFor(element)`](http://knockoutjs.com/documentation/unobtrusive-event-handling.html)

```
self.click = function (data, event) {
    var context = ko.contextFor(event.target);
    console.log(context.$index());
}; 
```

# c# - vs2012负载测试不启动很多线程

> ID：13237059
> 
> 赞同：0
> 
> 时间：2012-11-05T17:16:58.457
> 
> 标签：c#, asp.net, web-services, visual-studio-2012

我已经建立了一个网络测试。

在其中我添加了写入文件。

我用 5 个虚拟用户创建了 loadtest，它们只运行上面的 webtest。

在`Graph view`我看到有 5 `Users load`。

最后我看到只有一行写入文件。

我需要以某种特殊方式定义分布吗？

我认为设置虚拟用户的数量就足够了。不？

顺便说一句，什么会导致我的负载测试在每次运行时恰好运行 10 分钟？

我不记得限制为 10 分钟

这是我的测试代码：

public class Settings_CacheExplosion : WebTest { //私有静态只读 ILog activityLog = LogManager.GetLogger("Activity");

```
 private static int _ctidsCounter { get; set; }

    public static int CtidsCounter
    {
        get
        {
            if (_ctidsCounter == 2000)
            {
                _ctidsCounter = 1000;
            }
            return _ctidsCounter++;
        }
        set
        {
            _ctidsCounter = value;
        }
    }

    public Settings_CacheExplosion()
    {
        this.PreAuthenticate = true;

        CtidsCounter = 1000;

        //log4net.Config.XmlConfigurator.Configure();
    }

    public override IEnumerator<WebTestRequest> GetRequestEnumerator()
    {
        WebTestRequest request1 = new WebTestRequest("http://clientservice.mam.qasite-services.com/settings");

        request1.Method = "POST";

        Debug.WriteLine(string.Format("ctid={0}", CtidsCounter));

        request1.QueryStringParameters.Add("ctid", CtidsCounter.ToString(), false, false);
        StringHttpBody request1Body = new StringHttpBody();
        request1Body.ContentType = "";
        request1Body.InsertByteOrderMark = false;
        request1Body.BodyString = "";
        request1.Body = request1Body;

        string path = @"Settings_CacheExplosion_log.txt";
        // This text is added only once to the file. 
        if (!File.Exists(path))
        {
            // Create a file to write to. 
            using (StreamWriter sw = File.CreateText(path))
            {
                sw.WriteLine(string.Format("ctid={0}", CtidsCounter));
            }
        }

        // This text is always added, making the file longer over time 
        // if it is not deleted. 
        using (StreamWriter sw = File.AppendText(path))
        {
            sw.WriteLine(string.Format("ctid={0}", CtidsCounter));
        }   

        yield return request1;
        request1 = null;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:55:37.330

检查您的书写方法是否不会覆盖现有条目。如果文件中已有文本，则需要使用附加选项。

# python - 在 CentOs 服务器上导入 GeoIP 时出现 python 错误

> ID：13237060
> 
> 赞同：1
> 
> 时间：2012-11-05T17:16:58.940
> 
> 标签：python, django

我正在使用 Django，当我使用 geoip 包或导入 GeoIP 时，我在 centos 上收到以下错误，而它在 ubuntu 12.04 上运行良好。

错误如下

```
 from django.contrib.gis.utils.geoip import GeoIP
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.6/site-packages/django/contrib/gis/utils/geoip.py", line 67, in <module>
    'Try setting GEOIP_LIBRARY_PATH in your settings.' % lib_name)
django.contrib.gis.utils.geoip.GeoIPException: Could not find the GeoIP library (tried "GeoIP"). Try setting GEOIP_LIBRARY_PATH in your settings. 
```

请尝试帮助我，没有这个我不能走得更远。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:27:11.317

尝试在您的两个系统上执行此操作：

```
$ echo $GEOIP_LIBRARY_PATH 
```

并比较输出。从错误消息中，听起来您将在 Ubuntu 上获得一个目录路径，并确保在 CentOS 上设置相同的路径，如下所示（在 centOS 系统上）：

```
$ export GEOIP_LIBRARY_PATH=$GEOIP_LIBRARY_PATH:<path returned from Ubuntu system> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:37:08.277

django geoip 代码使用 MaxMind 免费的 geoip 数据，该数据以专有的基于文件的“数据库”的形式分发。您可能为此缺少 rpm 包，之后您可以找到它提供的共享库并将 GEOIP_LIBRARY_PATH 设置为指向它。看起来既有[为 CentOS](http://fr2.rpmfind.net/linux/rpm2html/search.php?query=geoip&submit=Search%20...)[设置路径的示例，](https://docs.djangoproject.com/en/dev/ref/contrib/gis/geoip/)也有一些软件包。

# magento-1.7 - 如何将magento商店/安装从域切换到IP地址

> ID：13237062
> 
> 赞同：2
> 
> 时间：2012-11-05T17:17:13.593
> 
> 标签：magento-1.7

我正在尝试移动和设置一个基于 magento 的商店，它当前安装在这个域[http://www.smokewire.com](http://www.smokewire.com)上到一个新的服务器。我的客户希望将新服务器用作开发服务器，以开发新的新扩展以进行测试、升级等。他希望将开发服务器保留在 IP 地址上。这是我移动所有文件并创建/恢复数据库的服务器 IP：94.75.216.74（响应速度很慢）。您可以看到错误：处理您的请求时出现错误 提供的方案非法，只允许使用字母数字字符

恢复数据库后，我简单地更新了 core_config_data 表并将 web/unsecure/base_url 和 web/secure/base_url 中的值从[http://www.smokewire.com](http://www.smokewire.com)更改为 94.75.216.74，我认为这是我唯一需要做的事情吗？

但它看起来不像 :( 我已经尝试了一些我在网上找到的东西：在 /var/cache 文件夹中手动清理缓存，将 public_html 的文件权限更改为 0777 并将文件和组所有者更改为玻璃管道（帐户所有者）因为它们归apache所有。我仍然有同样的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T08:10:15.437

你总是可以使用像 development.smokewire.com 这样的子域。在您的 DNS 管理服务上设置子域并将其指向 94.75.216.74。然后，您可以在具有该域的新机器上设置一个命名虚拟主机来为您的 Magento 安装提供服务，并在您的 Magento 配置中使用该域。

如果您想禁止索引，请在根目录中创建 robots.txt 或编辑主题的 head.phtml 文件以添加适当的元。

要禁止常规用户访问，您可以在开发盒上为站点设置 HTTP 基本身份验证，或者如果您有 mod rewrite，您可以为所有用户设置默认页面，如果不是从特定 IP 访问，则重定向到该页面。

**编辑**：另外我忘了提一下，如果开发框没有启用 SSL，请在安全 URL 和不安全 URL 上使用 http 而不是 https。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:48:21.230

首先，这取决于您商店中的商店数量

如果您有一家商店，您可以简单地编辑您的 app/etc/local.xml

```
<config>
    <stores>
        <default>
            <web>
                <unsecure>
                    <base_url><![CDATA[http://94.75.216.74/]]></base_url>
                </unsecure>
                <secure>
                    <base_url><![CDATA[http://94.75.216.74/]]></base_url>
                </secure>
            </web>
        </default>
        <admin>
            <web>
                <unsecure>
                    <base_url><![CDATA[http://94.75.216.74/]]></base_url>
                </unsecure>
                <secure>
                    <base_url><![CDATA[http://94.75.216.74/]]></base_url>
                </secure>
            </web>
        </admin>
    </stores>
</config> 
```

如果您有 multistore，则需要创建将 base_url 更改为 94.75.216.74 的模块

就像是

```
$config = Mage::getConfig();
$config->setNode("stores/$code/web/unsecure/base_url", 'http://94.75.216.74/');
$config->setNode("stores/$code/web/secure/base_url", 'http://94.75.216.74/'); 
```

# asp.net - Ext.NET DirectMethod 抛出“...没有方法”错误

> ID：13237063
> 
> 赞同：1
> 
> 时间：2012-11-05T17:17:19.973
> 
> 标签：asp.net, ext.net

我正在尝试在后端分配处理程序。所以我目前有：

```
 foreach (Component comp in leftComponenets)
    {
        if (comp is TextField)
        {
            ((TextField)comp).Listeners.Focus.Handler = "Ext.net.DirectMethods.clickOnObject();";
        }
    } 
```

在 document.aspx.cs 文件中。它生成要添加到左侧面板的组件。有必要在后端进行，因为这是在页面渲染期间动态生成的（不是有限数量的元素）。我试图调用的方法是：

```
[DirectMethod]
public void clickOnObject()
{
    Response.Write("hwerlkjasdf;ljasdf");
} 
```

但是，似乎该方法没有添加到 javascript 中的 Ext.net.DirectMethods 对象中，因此无法调用它。我不确定如何在此阶段进行链接。我有一种感觉，这与我的函数位于不同的文件中而不是与页面本身内联的事实有关吗？我查看了许多示例，但似乎没有任何帮助。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T21:20:16.880

使用 [DirectMethod] 您不能直接写入响应流。根据您在上面提供的代码示例，如果您更改它会显示一个通知窗口，它应该可以工作。

**例子**

```
X.Msg.Notify("Message", "hwerlkjasdf;ljasdf").Show(); 
```

希望这可以帮助。

# json - 从用户活动 POST 批处理请求返回 JSON 数据

> ID：13237067
> 
> 赞同：0
> 
> 时间：2012-11-05T17:17:30.063
> 
> 标签：json, post, youtube-api, batch-processing, user-activity

我在批处理请求中的帖子如下所示：

```
<feed xmlns='http://www.w3.org/2005/Atom'
xmlns:media='http://search.yahoo.com/mrss/'
xmlns:batch='http://schemas.google.com/gdata/batch'
xmlns:yt='http://gdata.youtube.com/schemas/2007'>
<batch:operation type='query'/>
<entry>
<id>http://gdata.youtube.com/feeds/api/users/ytUser1</id>
</entry>
<entry>
<id>https://gdata.youtube.com/feeds/api/users/ytUser2</id>
</entry>
<entry>
<id>https://gdata.youtube.com/feeds/api/users/ytUser3</id>
</entry>
</feed> 
```

当然除了真正的用户和更多的用户。我得到的 xml 反馈很好。有没有办法使用 POST 请求 JSON 格式的数据？我知道在 GET 请求中使用 ?alt=json 会返回 json，但有可能吗？如果可以，如何在 POST 批处理请求中使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:11:51.683

您应该能够将 alt=json 添加到您将 POST 发送到的 URL。这通常适用于 POST 请求，即您可以发送 POST 以创建播放列表条目，并在您 POST 到的 URL 中包含 alt=json，并以 JSON 格式取回响应正文。如果它不适用于批量 POST 请求，我会感到惊讶。

# javascript - 将悬停、onmouseetner、onmouseleave 函数添加到 css 类、语法

> ID：13237068
> 
> 赞同：0
> 
> 时间：2012-11-05T17:17:34.327
> 
> 标签：javascript, jquery, css

我在基本语法方面遇到问题。我想使用 jquery 来选择 CSS 类中的所有元素，然后在用户将鼠标悬停在项目上时添加一个动作

```
$(".item").hover(function(){$(this).fadeTo(100, .1)}); 
```

是否也可以为 onmouseenter 和 onmouseleave 分配不同的功能？我在查找类似代码时遇到了一些麻烦。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T17:18:59.550

使用`.hover()`，您可以传递两个函数。

```
$(".item").hover(
    function(){$(this).fadeTo(100, .1)},
    function(){$(this).fadeTo(100, 1)}
); 
```

这些将被分配为`mouseenter`和`mouseleave`事件。

* * *

当然你也可以手动完成。

```
$(".item").mouseenter(function(){$(this).fadeTo(100, .1)})
          .mouseleave(function(){$(this).fadeTo(100, 1)}); 
```

* * *

或者您甚至可以重用相同的函数，并且只测试事件对象。

```
$(".item").hover(function(event){
    $(this).fadeTo(100, event.type === 'mouseenter' ? .1 : 1);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T17:25:31.987

是的，有可能。

```
$(".item").hover( function(){ /* onmouseenter */ }, function(){/* onmouseleave */} ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T17:19:48.947

`hover`可以采用一两个事件处理程序。如果提供了一个（如您的示例中所示），它将同时应用于`mouseenter`和`mouseleave`事件。如果提供了两个，则每个事件都有自己的处理程序。

更多信息在[文档](http://api.jquery.com/hover/)中。

从您的示例的外观来看，我假设您想将元素淡入 on `mouseleave`，如果是这样，请尝试以下操作：

```
$(".item").hover(
    function(){ $(this).fadeTo(100, .1) },
    function(){ $(this).fadeTo(100, 1)} ); 
); 
```

# django - 从 django 模板中的调查输入计算平均值

> ID：13237074
> 
> 赞同：0
> 
> 时间：2012-11-05T17:17:44.777
> 
> 标签：django, django-templates, python-2.7, django-views

我正在尝试在 django 模板页面上显示调查结果。我无法根据特定的人口统计数据和每个类别的评分来显示平均值。我已经将调查响应数据以整数形式保存在我拥有的调查表单视图中。这是我到目前为止剩下的：

```
#views.py
def statistics(request):
    male = Survey.objects.filter(gender='male')
    ...
    #Other demographics filtered
    ...

    def avgcalc(myDemographic, myCategory):
        ratings = []

        for x in myDemographic:
            ratings.append(myCategory)

        intTotal = 0
        intCount = 0
        intLenMyList = len(myDemographic)

        while(intCount <  intLenMyList):
            intTotal += ratings[intCount]
            intCount += 1

        return intTotal/intLenMyList
...
#rest of view rendering template, etc. 
```

现在是我遇到问题的地方。如何根据人口统计轻松显示每个类别的数据？例如，在我的模板中我想做

```
#template.html
Demographic: Male
Total responses for this demographic: {{ male|length }}
Average response for specific category: {{ avgcalc(male, category) }} 
```

{{ male|length }} 可以很好地显示男性受访者的数量，但是，在模板中，我不能使用 {{ avgcalc(male, category) }}。实际上，我已经设置了一个表格，并且大约有 20 个人口统计数据和十几个类别评级，所以如果可能的话，我希望避免将每一个都放在我的视图中（即 male_category_calc = avgcalc(male, category)对于每个人口统计和类别。这甚至可能吗，或者我需要做很长的路吗？只要它有效，我可以将每一个输入到我的模板中。感谢任何帮助或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:26:23.340

您可以使用 django 的自定义模板标签来做到这一点。

要计算平均值，您可能需要查看 django 的[聚合](https://docs.djangoproject.com/en/dev/topics/db/aggregation/)

它们具有 Avg 函数来计算特定字段的平均值。（在您的情况下是类别）

```
from django.db.models import Avg
Model.objects.all().aggregate(Avg('attribute')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:34:19.653

[您可以使用自定义模板标签或过滤器](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)扩展模板功能。像这个：

**foo_app/templatetags/foo_tags.py：**

```
from django import template
register = template.Library()

@register.filter
def avgcalc(myDemographic, myCategory):
    ratings = []

    for x in myDemographic:
        ratings.append(myCategory)

    intTotal = 0
    intCount = 0
    intLenMyList = len(myDemographic)

    while(intCount <  intLenMyList):
        intTotal += ratings[intCount]
        intCount += 1

    return intTotal/intLenMyList 
```

然后在你的**template.html**中：

```
{% load foo_tags %}

{{ male|avgcalc:category }} 
```

# sharepoint - 在 sharepoint 2010 中，从头开始创建 Web 模板还是导入它更好？

> ID：13237076
> 
> 赞同：0
> 
> 时间：2012-11-05T17:17:50.747
> 
> 标签：sharepoint, sharepoint-2010

我想知道大多数人在设置 Web 模板时会做什么。

他们是否在 sharepoint 中创建/自定义它，然后导出模板并在 Visual Studio 中打开它。或者他们是否从头开始创建模板（Visual Studio 中的新共享点项目）。

当模板导入到 Visual Studio 时，我觉得很烦人，因为创建了很多附加项目，例如 ContentTypes、ListInstances、Property Bags 等

我想知道这方面的专业方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:34:53.320

这取决于情况和需要，如果您尝试创建的模板很简单，则建议从头开始创建，但如果它很复杂，则应从共享点导入。

在我看来，最好将其导入，因为它可以保持结构并且可以更快地实施

希望这可以帮助

# timeout - 使用终端运行时 PHP 文件执行超时

> ID：13237081
> 
> 赞同：0
> 
> 时间：2012-11-05T17:18:28.507
> 
> 标签：timeout, php

我想`.php`通过终端运行文件（我有 CentOS），所以我想知道当我`.php`使用终端而不是 Apache 运行文件时，执行时间是否有任何限制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T17:20:24.677

时间限制应该是一样的。在`max_execution_time`你的`php.ini`. `set_time_limit(90)`例如，您可以在您的 php 代码中强制使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T17:58:45.060

您可以将该值设置为 0：

```
set_time_limit(0) 
```

这将完全防止超时。不过要小心。超时是有目的的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T17:21:04.200

您可以在脚本[http://php.net/manual/en/function.set-time-limit.php中使用 set_time_limit(n)](http://php.net/manual/en/function.set-time-limit.php)

# c++ - Qt：改变用户变量表示控件状态的改变

> ID：13237083
> 
> 赞同：1
> 
> 时间：2012-11-05T17:18:39.207
> 
> 标签：c++, qt, data-binding

是否可以通过更改用户定义变量的值（对更改值执行操作）来简单地指示某些 Qt 控件属性的更改。例如。我声明`int a`了多个函数经常使用的。现在我需要构建一个关系：`if ( a == 0 ) then`我的控件处于非活动状态`else`，我的控件处于活动状态。（我受到 C# 数据绑定的启发。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:24:59.043

[信号/插槽](http://doc.qt.digia.com/qt/signalsandslots.html)

在您的访问器方法中发出一个连接到您希望发生的操作的信号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:28:56.817

在 Qt 中，使用 QWidget::setEnabled 启用/禁用控件。您需要做的是创建一个子类，您的所有 gui 窗口都从该子类派生，您可以在其中定义一个设置此变量并调用 setEnabled 的函数。像这样：

```
class Widget : public QWidget
{
   ...
   MySetEnabled(bool b)
   {
      a = b;
      setEnabled(b);
   }

   int a;
}; 
```

# iis - URL 重写 - 从客户端检测到潜在危险的 Request.Path 值

> ID：13237085
> 
> 赞同：1
> 
> 时间：2012-11-05T17:18:51.920
> 
> 标签：iis, url-rewriting, iis-7.5

我有许多 URL 重写规则（它们都在下面列出）。当我浏览“http://domain.com”时，我被转发到“http://www.domain.com/R:”，并显示“从客户端检测到潜在危险的 Request.Path 值 (:) 。” 我希望能够在没有“www”的情况下浏览该站点并正确转发。我不确定如何更新或添加到我现有的重​​写规则。这是.Net 网站。我希望社区中的人能给我任何提示。

```
<rewrite>
<rules>
    <clear />
    <rule name="Change to Lower" enabled="true">
        <match url="[A-Z]" ignoreCase="false" />
        <conditions logicalGrouping="MatchAll" trackAllCaptures="false" />
        <action type="Redirect" url="{ToLower:{URL}}" redirectType="Permanent" />
    </rule>
    <rule name="Redirect to WWW" enabled="true" stopProcessing="true">
      <match url=".*" ignoreCase="false" />
      <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
        <add input="{HTTP_HOST}" pattern="^domain.com$" />
      </conditions>
      <action type="Redirect" url="http://www.domain.com/R:{0}" redirectType="Permanent" />
    </rule>
    <rule name="Redirect StockNo" stopProcessing="true">
        <match url="^vehicles/detail/default\.aspx$" />
        <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
            <add input="{REQUEST_METHOD}" pattern="^POST$" negate="true" />
            <add input="{QUERY_STRING}" pattern="^stockno=([^=&amp;]+)$" />
        </conditions>
        <action type="Redirect" url="{C:1}" appendQueryString="false" />
    </rule>
    <rule name="Rewrite StockNo" stopProcessing="true">
        <match url="^([0-9a-z\ ]+)$" />
        <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
            <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
        </conditions>
        <action type="Rewrite" url="vehicles/detail/default.aspx?stockno={R:1}" />
    </rule>
    <rule name="Redirect StockNo And Desc" enabled="false" stopProcessing="true">
        <match url="^vehicles/detail/default\.aspx$" />
        <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
            <add input="{REQUEST_METHOD}" pattern="^POST$" negate="true" />
            <add input="{QUERY_STRING}" pattern="^stockno=([^=&amp;]+)&amp;desc=([^=&amp;]+)$" />
        </conditions>
        <action type="Redirect" url="{C:1}/{C:2}" appendQueryString="false" />
    </rule>
    <rule name="Rewrite StockNo And Desc" enabled="false" stopProcessing="true">
        <match url="^([0-9a-z]+)/([0-9]{4}[^/]+)/?$" />
        <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
            <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
        </conditions>
        <action type="Rewrite" url="vehicles/detail/default.aspx?stockno={R:1}&amp;desc={R:2}" />
    </rule>
    <rule name="Redirect StockNo Desc And Vin" stopProcessing="true">
        <match url="^vehicles/detail/default\.aspx$" />
        <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
            <add input="{REQUEST_METHOD}" pattern="^POST$" negate="true" />
            <add input="{QUERY_STRING}" pattern="^stockno=([^=&amp;]+)&amp;desc=([^=&amp;]+)&amp;vin=([^=&amp;]+)$" />
        </conditions>
        <action type="Redirect" url="{C:1}/{C:2}/{C:3}" appendQueryString="false" />
    </rule>
    <rule name="Rewrite StockNo Desc And Vin" stopProcessing="true">
        <match url="^([0-9a-z]+)/([0-9]{4}[^/]+)/([0-9a-z]+)/?$" />
        <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
            <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
        </conditions>
        <action type="Rewrite" url="vehicles/detail/default.aspx?stockno={R:1}&amp;desc={R:2}&amp;vin={R:3}" />
    </rule>
    <rule name="Redirect Make And Model" stopProcessing="true">
        <match url="^vehicles/default\.aspx$" />
        <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
            <add input="{REQUEST_METHOD}" pattern="^POST$" negate="true" />
            <add input="{QUERY_STRING}" pattern="^make=([^=&amp;]+)&amp;model=([^=&amp;]+)$" />
        </conditions>
        <action type="Redirect" url="{C:1}/{C:2}" appendQueryString="false" />
    </rule>
    <rule name="Rewrite Make And Model" stopProcessing="true">
        <match url="^([a-z\ ]+)/([a-z\ ]+)/?$" />
        <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
            <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
        </conditions>
        <action type="Rewrite" url="vehicles/default.aspx?make={R:1}&amp;model={R:2}" />
    </rule>
    <rule name="Redirect Make Model And SubModel" stopProcessing="true">
        <match url="^vehicles/default\.aspx$" />
        <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
            <add input="{REQUEST_METHOD}" pattern="^POST$" negate="true" />
            <add input="{QUERY_STRING}" pattern="^make=([^=&amp;]+)&amp;model=([^=&amp;]+)&amp;submodel=([^=&amp;]+)$" />
        </conditions>
        <action type="Redirect" url="{C:1}/{C:2}/{C:3}" appendQueryString="false" />
    </rule>
    <rule name="Rewrite Make Model And SubModel" stopProcessing="true">
        <match url="^([a-z\ ]+)/([a-z\ ]+)/([a-z\ ]+)/?$" />
        <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
            <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
        </conditions>
        <action type="Rewrite" url="vehicles/default.aspx?make={R:1}&amp;model={R:2}&amp;submodel={R:3}" />
    </rule>
    <rule name="Redirect Make An Offer StockNo" stopProcessing="true">
        <match url="^Vehicles/Make-An-Offer\.aspx$" />
        <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
            <add input="{REQUEST_METHOD}" pattern="^POST$" negate="true" />
            <add input="{QUERY_STRING}" pattern="^stockno=([^=&amp;]+)$" />
        </conditions>
        <action type="Redirect" url="Vehicles/Make-An-Offer/{C:1}" appendQueryString="false" />
    </rule>
    <rule name="Rewrite Make An Offer StockNo" stopProcessing="true">
        <match url="^Vehicles/Make-An-Offer/([^/]+)/?$" />
        <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
            <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
        </conditions>
        <action type="Rewrite" url="Vehicles/Make-An-Offer.aspx?stockno={R:1}" />
    </rule>
    <rule name="Redirect Make An Offer StockNo And Desc" stopProcessing="true">
        <match url="^Vehicles/Make-An-Offer\.aspx$" />
        <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
            <add input="{REQUEST_METHOD}" pattern="^POST$" negate="true" />
            <add input="{QUERY_STRING}" pattern="^stockno=([^=&amp;]+)&amp;desc=([^=&amp;]+)$" />
        </conditions>
        <action type="Redirect" url="Vehicles/Make-An-Offer/{C:1}/{C:2}" appendQueryString="false" />
    </rule>
    <rule name="Rewrite Make An Offer StockNo And Desc" stopProcessing="true">
        <match url="^Vehicles/Make-An-Offer/([^/]+)/([^/]+)/?$" />
        <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
            <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
        </conditions>
        <action type="Rewrite" url="Vehicles/Make-An-Offer.aspx?stockno={R:1}&amp;desc={R:2}" />
    </rule>
    <rule name="Redirect to Default" enabled="true">
        <match url="(.*)default.aspx" ignoreCase="false" />
        <conditions logicalGrouping="MatchAll" trackAllCaptures="false" />
        <action type="Redirect" url="{R:1}" redirectType="Permanent" />
    </rule>
    <rule name="Add Trailing Slash" enabled="true">
        <match url="[^/]$" ignoreCase="false" />
        <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
            <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
            <add input="{URL}" pattern="\.axd$" ignoreCase="false" negate="true" />
        </conditions>
        <action type="Redirect" url="{URL}/" appendQueryString="false" redirectType="Permanent" />
    </rule>
</rules>
<outboundRules>
    <preConditions>
        <preCondition name="ResponseIsHtml1">
            <add input="{RESPONSE_CONTENT_TYPE}" pattern="^text/html" />
        </preCondition>
    </preConditions>
</outboundRules>
<rewriteMaps>
    <rewriteMap name="test" />
</rewriteMaps> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T19:44:29.640

在您的第二条规则中，看起来**R:**没有括在括号中：

`http://www.domain.com/R:{0}`应该`http://www.domain.com/{R:0}`

# xml - 使用 xpath 删除不可破坏的空格

> ID：13237089
> 
> 赞同：6
> 
> 时间：2012-11-05T17:19:01.103
> 
> 标签：xml, xpath

我有以下 xml 文档：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
<data>
<child1>&#160;Well, some  spaces and nbsps  &#160;</child1>
<child2>&#160; some more                  &#160;  or whatever          </child2>
<child3>         a nice text</child3>
<child4>how                              to get rid of all the nasty spaces&#160;          ?                                  </child4>
</data>
</root> 
```

我必须删除所有不可破坏的空格，连接文本并将其规范化。

我的 xpath 查询（它可以很好地用于连接和规范化 - 我已插入替换 'x' 仅用于测试目的）：

```
normalize-space(replace(string-join(//data/*,' '),'&#160;','x')) 
```

我的问题：我找不到`"&#160;"`-whitespace 来替换它。

期待您的回答，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T17:25:35.820

元素节点的字符串值被定义为其所有后代文本节点的串联，因此在 XSLT 转换中

```
normalize-space(translate(//data, '&#160;', '')) 
```

会做你需要的，*假设*你的文档只包含一个`data`元素 - 如果有多个`data`元素，那么这个表达式将只提取和规范化文档中第*一个* `data`元素的文本。

如果您在 XSLT 文件以外的地方使用 XPath 表达式，那么您将需要以不同的方式表示不间断空格字符。上面的示例之所以有效，是因为 XML 解析器`&#160;`在读取文件时将字符引用转换为不间断空格字符`.xsl`，因此 XPath 表达式解析器看到的是字符，而不是引用。例如，在 Java 中，我可以说

```
XPath.evaluate("normalize-space(translate(//data, '\u00A0', ''))", contextNode) 
```

因为`\u00A0`是在 Java 字符串文字中表示 nbsp 字符的方式。如果您使用另一种语言，则需要找到用该语言表示此字符的正确方法，或者如果您使用的是 XPath 2.0，则可以使用以下`codepoints-to-string`函数：

```
normalize-space(translate(//data, codepoints-to-string(160), '')) 
```

# objective-c - 来自 NSData 的 CGImageRef 为空，但 UIImage 不是？

> ID：13237090
> 
> 赞同：1
> 
> 时间：2012-11-05T17:19:03.647
> 
> 标签：objective-c, ios, uiimage, cgimageref

我正在尝试将一些图像加载移动到背景中。目前我正在后台加载 UIImages 但从我所阅读的内容来看，这不是建议的方法，而是我应该在后台加载 CGImageRef，然后在主线程中从它加载 UIImage。

问题是当我尝试创建一个时`CGImageRef`，它会返回为空。示例代码：

```
NSData * imageData = [NSData dataWithContentsOfFile: coverPath];
if(nil != imageData)
{
    UIImage * uiImage = [UIImage imageWithData: imageData];

    CGDataProviderRef provider = CGDataProviderCreateWithCFData((__bridge CFDataRef) imageData);
    CGImageRef imageRef = CGImageCreateWithPNGDataProvider(provider, NULL, true, kCGRenderingIntentDefault);

    NSLog(@"Test: %p, %p", imageRef, uiImage);
    CGDataProviderRelease(provider);
} 
```

哪个注销`Test: 0x0, 0x1c566bb0`。这意味着 imageRef 为空，但 uiImage 不是。有什么想法我在这里做错了吗？似乎这应该很简单？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T21:29:02.057

```
CGImageCreateWithPNGDataProvider() 
```

`nil`如果提供的数据不是 PNG 格式（例如 JPEG 或 TIFF），则返回。

```
[UIImage imageWithData: imageData] 
```

返回所有支持的图像文件格式（PNG、JPEG、TIFF 等）的图像

这就解释了为什么第一个函数会失败，而第二个函数会成功。

# iphone - UICollectionView willDisplayCell 委托方法？

> ID：13237102
> 
> 赞同：19
> 
> 时间：2012-11-05T17:19:52.490
> 
> 标签：iphone, ios, xcode, cocoa-touch, uicollectionview

无论如何，在显示单元格时侵入 UICollectionView 以调用 willDisplayCell 委托方法？

我需要这个来延迟加载，我用 UITableView 做得很好，但 UICollectionView 官方没有那种委托方法。

那么，有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-10-08T16:21:47.130

仅供参考，这已添加到 iOS 8 的 API 中：

```
- (void)collectionView:(UICollectionView *)collectionView willDisplayCell:(UICollectionViewCell *)cell forItemAtIndexPath:(NSIndexPath *)indexPath NS_AVAILABLE_IOS(8_0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T15:04:44.977

我正在做这样的事情`cellForItemAtIndexPath:`（用于延迟加载图像）：

*   如果我的模型有图像，只需将单元格的图像设置为它
*   如果模型没有图像，则启动异步加载
*   加载完成后，检查原始 indexPath 是否仍然可见
*   如果是这样，请调用`cellForItemAtIndexPath`原始 indexPath。由于图像现在存在于模型中，因此现在将设置单元格的图像。

看起来像这样：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {

    PhotoCell * cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"PhotoCell" forIndexPath:indexPath];
id imageItem = [self.photoSet objectAtIndex:indexPath.row];
        ImageManager * listingImage = (ImageManager *)imageItem;
        if(listingImage.image){
            cell.image = listingImage.image;
        } else {
            [listingImage loadImage:^(UIImage *image) {
                [collectionView reloadItemsAtIndexPaths:@[indexPath]];
                dispatch_async(dispatch_get_main_queue(), ^{
                    if ([[collectionView indexPathsForVisibleItems] containsObject:indexPath]) {
                        [(PhotoCell *)[collectionView cellForItemAtIndexPath:indexPath] setImage:image];
                    }
                });
            }];
        }
    }

    return cell;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-09T11:08:17.883

您可以使用`SDWebImage` [https://github.com/rs/SDWebImage](https://github.com/rs/SDWebImage)进行延迟加载。你可以有效地使用它`UICollectionView`。

* * *

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath *)indexPath {

/*---------
----Other CollectiveView stuffs------
-----------------*/
if([[NSFileManager defaultManager] fileExistsAtPath:YOUR_FILE_PATH  isDirectory:NO])
{
      imagView.image=[UIImage imageWithContentsOfFile:YOUR_FILE_PATH];
}
else
{
     UIActivityIndicatorView *act=[[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
     [imagView addSubview:act];
     act.center=CGPointMake(imagView.frame.size.width/2, imagView.frame.size.height/2);
     [act startAnimating];

     __weak typeof(UIImageView) *weakImgView = imagView; 
     [imagView setImageWithURL:[NSURL URLWithString:REMOTE_FILE_PATH] completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType){
    for(UIView *dd in weakImgView.subviews)
    {
        if([dd isKindOfClass:[UIActivityIndicatorView class]])
        {
            UIActivityIndicatorView *act=(UIActivityIndicatorView *)dd;
            [act stopAnimating];
            [act removeFromSuperview];
        }
    }
    NSString *extension=[YOUR_FILE_PATH pathExtension];

    [self saveImage:image withFileName:YOUR_FILE_PATH ofType:extension];
  }];
 }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-24T03:44:51.113

当我需要知道要显示的单元格的索引路径时，我有类似的情况。以 结束`- (void)collectionView:(UICollectionView *)collectionView didEndDisplayingCell:(UICollectionViewCell *)cell forItemAtIndexPath:(NSIndexPath *)indexPath`。据推测，一个是“didEndDisplaying”，另一个是“willDisplayed”。

# jquery - 较新的 jquery 版本是否向后兼容早期版本？

> ID：13237104
> 
> 赞同：2
> 
> 时间：2012-11-05T17:19:53.887
> 
> 标签：jquery, jquery-ui, backwards-compatibility

> **可能重复：**
> [jQuery 的向后兼容性有多好？](https://stackoverflow.com/questions/281438/how-good-is-jquerys-backward-compatibility)

我正在向我的网站添加一些新功能，这些功能需要更新的 jquery 和 jquery ui 版本。我有很多旧代码是为较早的 jquery/ui 版本编写的，我想知道仅加载较新版本是否安全。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:24:51.857

由于错误修复和改进，无法实现 100% 的兼容性。

# codeigniter - 查询中的 CodeIgniter 下拉菜单

> ID：13237107
> 
> 赞同：1
> 
> 时间：2012-11-05T17:20:08.950
> 
> 标签：codeigniter, html-select

我是 codeIgniter 的新手，我的数据库和下拉菜单有点问题。

这是我获取所需信息的功能...

```
protected $tbl_name = 'club';

public function get($id = 0, $object = TRUE)
    {
        // select * from users where id = 0
        // check if id is provided
        if($id) {
            // id provided - retrieve a specific user
            $query = $this->db->get_where($this->tbl_name, array('id' => $id));
            // check if object type is requested
            if($object) {
                // object is requested
                $data = $query->row();
            }
            else {
                // array is requested
                $data = $query->row_array();
            }
        }
        else {
            // id not provided - retrieve all users
            $query = $this->db->get($this->tbl_name);
            // check if object type is requested
            if($object) {
                // object is requested
                $data = $query->result();
            }
            else {
                // array is requested
                $data = $query->result_array();
            }
        }
        return $data;
    } 
```

这是我在控制器中调用它的地方

```
$data['clubname'] = $this->club_model->get(); 
```

这是我认为的下拉菜单

```
<tr><td><?php echo form_label('Club Name: ', 'clubname'); ?></td><td><?php echo form_dropdown('clubname', $clubname['name']); ?></td><td><?php echo form_error('clubname'); ?></td></tr> 
```

但我收到这些错误

```
A PHP Error was encountered

Severity: Notice

Message: Undefined index: name

Filename: individual/individual_club.php

Line Number: 7
A PHP Error was encountered

Severity: Warning

Message: Invalid argument supplied for foreach()

Filename: helpers/form_helper.php

Line Number: 331 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:52:38.863

问题在于你的`form_dropdown('clubname', $clubname['name'])`电话。第二个参数错误。 `form_dropdown`需要一个数组。 [见文档](http://codeigniter.com/user_guide/helpers/form_helper.html)

根据您的查询结果，您需要构建一个俱乐部数组。类似的东西：

```
// array is requested
$data = array();
foreach ($query->result_array() as $row)
{
   $data[$row['club_id']] = $row['club_name'];
} 
```

将`club_id`和替换`club_name`为您的表格的列名称作为俱乐部的名称和 ID。之后，将您的更改`form_dropdown`为`form_dropdown('clubname', $clubname)`.

像这样，`$clubname`就是一排俱乐部。

希望这可以帮助！

# html - z-index 和工具提示

> ID：13237108
> 
> 赞同：3
> 
> 时间：2012-11-05T17:20:17.133
> 
> 标签：html, css

我正在尝试在 css 中使用工具提示，它正在工作，但是当工具提示出现时我遇到了问题，因为 p 标签中的文本显示在我想显示在所有内容上的跨度内容“工具提示”上. 我一直在尝试使用 z-index，还定义了所有标签中的位置，但无法理解为什么它不起作用。我会感谢有关如何解决它的任何提示。

我有下一个 html 结构

```
 <div>
        <a class="tooltip">
            <p>Test1</p>
            <span>saassa</span>
        </a>
    </div> 
```

和CSS：

```
a.tooltip {
    outline: none;
    text-decoration: none;
    border-bottom: dotted 1px blue;
    display: inline;
    position: relative;
    padding: 0;
    background: none repeat scroll 0 0 #bcd9db;
    z-index: 20;
}

a.tooltip p {
    margin-bottom: 0px;
    display: inline;
    color: #006565;
    position: relative;
    z-index: 20;
}

a.tooltip > span {
    width: 25em;
    padding: 10px 20px;
    margin-top: 20px;
    margin-left: -85px;
    opacity: 0;
    visibility: hidden;
    z-index: 1000;
    position: absolute;
    font-family: Arial;
    font-size: 12px;
    font-style: normal;
    color: #000000;
    background: #FBF5E6;
    border: 2px solid #CFB57C;
    z-index: 1000;
}

a.tooltip:hover > span {
    opacity: 1;
    text-decoration: none;
    visibility: visible;
    overflow: visible;
    margin-top: 50px;
    display: inline;
    margin-left: -260px;
    background: #fbf5e6;
    position: absolute;
    z-index: 100000;
} 
```

我已经加载到 Fiddle，所以您可以看到它，只需将鼠标悬停在前三个链接中的任何一个上，您就会看到无法看到 div 的所有内容。 [http://jsfiddle.net/mtzcq/3/](http://jsfiddle.net/mtzcq/3/)

非常感谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T17:51:57.650

`z-index`从`a.tooltip`和中删除`a.tooltip p`。

[http://jsfiddle.net/mtzcq/7/](http://jsfiddle.net/mtzcq/7/)

这在 Firefox for Mac 中对我有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T17:51:29.690

En el código html tienes que quitar dentro del span los`H6`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T18:14:25.467

删除所有“Z-index”实例，除了 a.tooltip > span 中的实例

# z3 - 在 z3 中设置策略选项

> ID：13237109
> 
> 赞同：1
> 
> 时间：2012-11-05T17:20:20.753
> 
> 标签：z3

当使用 z3 解决 SMT2 文件并应用策略（例如，“(apply qfbv)”）时，如何为该策略设置选项？例如，QFBV 有一个选项“cache-all”，默认设置为 false。如何使用 SMT2 文件将其设置为 true？或者这不可能使用 SMT2 语言？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T17:46:36.323

您可以使用组合器`using-params`。组合`!`器是 的简写`using-params`。这是一个使用该策略的小示例`simplify`（在线试用：[http](http://rise4fun.com/Z3/JaZ) ://rise4fun.com/Z3/JaZ ）。

```
(declare-const x Int)
(declare-const y Int)

(assert (= (+ x 1) (+ y 3)))

(apply simplify)
(echo ">>>> Using arith-lhs := True, and eq2ineq := True")
(apply (using-params simplify :arith-lhs true :eq2ineq true))
;; ! is a shorthand for using-params
(apply (! simplify :arith-lhs true :eq2ineq true)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T17:51:40.227

您可以使用[using-params](http://rise4fun.com/Z3/tutorial/strategies)组合器。`(help-tactic)`在线输入[Z3 SMT](http://rise4fun.com/Z3/) 给我这个片段：

> `- (using-params <tactic> <attribute>*)`使用给定的属性执行给定的策略，其中`<attribute> ::= <keyword> <value>.`！是 using-params 的语法糖。

这是一个经过类型检查的示例（不确定是否有意义）：

```
(declare-const x (_ BitVec 16))
(declare-const y (_ BitVec 16))

(assert (= (bvor x y) (_ bv13 16)))
(assert (bvslt x y))

(apply (using-params qfbv :cache-all true)) 
```

# grails - Grails 域类抽象/非抽象动态检查

> ID：13237110
> 
> 赞同：0
> 
> 时间：2012-11-05T17:20:22.777
> 
> 标签：grails, groovy, grails-orm

我的控制器中有一个循环，它执行以下操作：

```
for(d in grailsApplication.domainClasses) {
    def c = d.getClazz().count()

    // construct table containing object instance counts
} 
```

我的意图是使用这个循环来计算我的数据库中非叶域类的实例。有没有办法查询域类本身以确定它是否是抽象的？我不确定框架是否自动添加了一些成员函数，因为我还是 Groovy/Grails 的新手。我在 Grails 文档中找不到任何解决它的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T02:38:48.567

在浏览 Groovy 文档几分钟后弄清楚了。可以在域类上调用函数 isAbstract() 来确定域类是否是类层次结构中的叶节点

# javascript - yearvalue 选项在 jquery datepicker 中不可见

> ID：13237112
> 
> 赞同：0
> 
> 时间：2012-11-05T17:20:24.847
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, datepicker

我们如何`dd-mm-yyyy`使用 jquery datepicker 以格式显示日期，我尝试使用下面的代码，但是，年份选项在 datepicker 中不可见。

```
jQuery("#formComp1_date").datepicker({    
       minDate: new Date(1, 1, 1900), 

   maxDate: new Date(dayValue, monthValue, yearValue),
        dateFormat: 'dd-mm-yyyy' ,
        changeMonth: true,

     changeYear: true,
     yearRange:"-90:+0"

 }); 
```

谢谢，巴拉吉。

# java - Java参数混淆

> ID：13237114
> 
> 赞同：3
> 
> 时间：2012-11-05T17:20:25.643
> 
> 标签：java, parameters, dispatch

在下面的代码中，为什么它不调用`o1.equals(o2);`即使并且引用类型的对象！`equals(Object o)``equals(EqualsTest et)``o1``o2``EqualsTest`

```
public class EqualsTest {
      public static <T> boolean equalTest(T o1, T o2) {
          return o1.equals(o2);
      }
      public static void main(String[] args) {
          EqualsTest et1 = new EqualsTest();
          EqualsTest et2 = new EqualsTest();
          System.out.println(et1.equals(et2));
          System.out.println(equalTest(et1, et2));
      }
      public boolean equals(Object o) {
          if (o instanceof EqualsTest) {
              System.out.println("equals(Object)");
              return true;
          }
          return false;
      }
      public boolean equals(EqualsTest et) {
          System.out.println("equals(EqualsTest)");
          return this.equals((Object)et);
      }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:24:21.653

编译器根据参数的[*声明*类型](https://stackoverflow.com/a/9362386/60462)找到对应的方法，而不是最具体的方法。由于您没有为 thee 指定任何内容`T`，因此它默认为`Object`，正如@nicholas.hauschild 正确指出的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T17:27:11.343

由于您使用了重载，因此方法在编译时链接，并且 Java 使用不太具体的参数类型将多态绑定到被调用者，在这种情况下是对象而不是 EqualsTest。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T17:41:01.770

正如我在评论中提到的，这是因为[`TypeErasure`](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)在 java 中。

检查生成的字节码`equalTest`。您可以清楚地看到它将调用具有`Object`作为参数的方法。

与调用`this.equals((Object)et)`which 将调用相同`Object method`

```
// Method descriptor #15 (Ljava/lang/Object;Ljava/lang/Object;)Z
// Signature: <T:Ljava/lang/Object;>(TT;TT;)Z
// Stack: 2, Locals: 2
public static boolean equalTest(java.lang.Object o1, java.lang.Object o2);
0  aload_0 [o1]
1  aload_1 [o2]
2  invokevirtual java.lang.Object.equals(java.lang.Object) : boolean [18] 
```

你需要的是

```
public static <T extends EqualsTest> boolean equalTest(T o1, T o2) {
    return o1.equals(o2);
} 
```

现在让我们检查生成的字节码。

```
public static boolean equalTest(EqualsTest o1, EqualsTest o2);
0  aload_0 [o1]
1  aload_1 [o2]
2  invokevirtual EqualsTest.equals(EqualsTest) : boolean [18]
5  ireturn 
```

如您所见，编译器已更改`Object`为特定类型，这是`EqualsTest`因为我们已经使用`Bounded Type`了，所以现在如果您调用`equalTest`它将调用方法`equalTest as parameter`

# image - 如何通过复选框控制多个叠加层？

> ID：13237116
> 
> 赞同：1
> 
> 时间：2012-11-05T17:20:35.620
> 
> 标签：image, checkbox, overlay

我有几个不同图层的地图。

一个图像基本上只是土地。另一个图像是其他一切透明的边界。另一个图像是各个国家的颜色，其他一切都是透明的。

我想在页面上有 2 个基本上是`Show borders? []`和的复选框`Show colors? []`。

我真的不确定如何让我的复选框除了被选中之外做任何事情。

希望有人可以提供帮助。

# windows-8 - 使用 JSONP 数据动态构建的 ListView 自动刷新

> ID：13237118
> 
> 赞同：1
> 
> 时间：2012-11-05T17:20:41.550
> 
> 标签：windows-8, winjs

我正在构建一个使用`GeoNames`& `Mediawiki/Wikipedia`API 的 HTML/JS 中的 Windows 8 应用商店应用程序。

来自 API 的 JSON 数据`GeoNames`填充到`Listview`. 奇怪的是，列表视图中的内容会自行刷新吗？
有人对可能出现的问题有任何指示吗？

此刷新每分钟发生一次。当我在`ListView`第一个项目之外的任何其他项目上时，刷新会强制将焦点返回到列表视图中的第一个项目。

我正在使用`Geolocator PositionChanged event`. 我没有`ReportInterval`为类的属性明确设置任何值`Geolocator`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:16:18.227

这是因为您有一些代码在 ListView 上设置 itemDataSource - 这不是因为您有一些正在完成的长轮询功能，并且一次又一次地设置数据吗？

# c# - Mvc 应用程序（默认）用户注册

> ID：13237122
> 
> 赞同：0
> 
> 时间：2012-11-05T17:20:53.717
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我从一开始就给定的默认值制作了一个 Mvc4 应用程序。

我需要将修改后的 UserProfile 存储在我的数据库中，因此我更改了 UserProfile 类以满足我的需求，还更改了 RegisterModel 类。现在，当我注册某人时，我有一个正确的视图，其中包含所有必要的字段，但是，当我打开服务器资源管理器进行检查时，我得到一个仅包含 UserId 和 UserName 的 UserProfile 表（但模型也应该有名字，姓氏、电子邮件等）。

为了正确存储它们，应该修改什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:05:46.800

几个月前我在同一个地方。问题之一是注册故事并没有完全开箱即用。例如，如果有人先注册然后链接他们的外部帐户，他们可能会获得多个个人资料。

成功登录后，我从 pages_OAuthMembership 表中提取用户 ID。

if (OAuthWebSecurity.Login(result.Provider, result.ProviderUserId, createPersistentCookie: true)) {

```
 var oAuthMembership = new EndeavorODataEntities().webpages_OAuthMembership
                .Where(u => u.ProviderUserId == result.ProviderUserId)
                .FirstOrDefault(x => x.Provider == result.Provider) ?? 
                new webpages_OAuthMembership
                        {
                            Provider = result.Provider,
                            ProviderUserId = result.ProviderUserId,
                        };

            TempData.Add("OAuthMembership", oAuthMembership);
            HttpContext.Response.Cookies.Add(new HttpCookie("UserId", oAuthMembership.UserId.ToString(CultureInfo.InvariantCulture)));

            return RedirectToAction("Summary", new { Controller = "Member", id = oAuthMembership.UserId.ToString(CultureInfo.InvariantCulture) }); 
```

从这里，我在另一个控制器上对我的自定义“会员”表进行单独调用，因为我将所有应用程序数据存储在与此 OAuthMember 表不同的单独数据库中。在我之前使用 ASP.NET Membership 提供程序数据库的经验中，我总是将它作为与我的应用程序分开的数据库，在多个应用程序中重用它。当然，如果您希望修改 UserProfile 或其他表，从上面的代码中可以看出，这只是一个 LINQ 语句。没有什么可以说您也不能在此处执行对 UserProfiles 表的连接。

在上面的这个例子中，我创建了一个 edmx 文件 OAuthMembership.edmx 并像任何其他数据库一样从 SQL 导入我的表。EndeavorODataEntities 是我的连接字符串的名称，webpages_OAuthMembership 是实际成员资格表的名称。

我添加了一些我使用过的其他资源，可能会对您有所帮助。

[http://blogs.msdn.com/b/webdev/archive/2012/08/22/extra-information-from-oauth-openid-provider.aspx](http://blogs.msdn.com/b/webdev/archive/2012/08/22/extra-information-from-oauth-openid-provider.aspx)

[http://blogs.msdn.com/b/pranav_rastogi/archive/2012/08/23/plugging-custom-oauth-openid-providers.aspx](http://blogs.msdn.com/b/pranav_rastogi/archive/2012/08/23/plugging-custom-oauth-openid-providers.aspx)

[http://blogs.msdn.com/b/webdev/archive/2012/08/24/customizing-the-login-ui-when-using-oauth-openid.aspx](http://blogs.msdn.com/b/webdev/archive/2012/08/24/customizing-the-login-ui-when-using-oauth-openid.aspx)

[http://blogs.msdn.com/b/webdev/archive/2012/09/12/integrate-openauth-openid-with-your-existing-asp-net-application-using-universal-providers.aspx](http://blogs.msdn.com/b/webdev/archive/2012/09/12/integrate-openauth-openid-with-your-existing-asp-net-application-using-universal-providers.aspx)

[http://blogs.msdn.com/b/webdev/archive/2012/09/19/configuring-your-asp-net-application-for-microsoft-oauth-account.aspx](http://blogs.msdn.com/b/webdev/archive/2012/09/19/configuring-your-asp-net-application-for-microsoft-oauth-account.aspx)

[http://blogs.msdn.com/b/rickandy/archive/2012/08/15/initializessimplemembership-attribute-and-simplemembership-exceptions.aspx](http://blogs.msdn.com/b/rickandy/archive/2012/08/15/initializesimplemembership-attribute-and-simplemembership-exceptions.aspx)

# ruby-on-rails - mongodb/rails“异常：找不到特殊索引：2d for：”

> ID：13237127
> 
> 赞同：2
> 
> 时间：2012-11-05T17:21:04.813
> 
> 标签：ruby-on-rails, mongodb, indexing, 2d

我有一个 Rails 应用程序，其中的索引有一些问题。我按名称搜索位置。首先我认为这是addresses.coords的问题，但我不确定。

搜索控制器的相关部分：

```
 @practices = Practice.published
  @practices = @practices.where(:"addresses.country" => params[:country].upcase) if  params[:country].present?

  if params[:location].present? && latlng = get_coordinates
    @practices = @practices.near_sphere(:"addresses.coords" => latlng).max_distance(:"addresses.coords" => get_distance )
  end

  # now find doctors based on resulting practices
  @doctors = Doctor.published.in("organization_relations.practice_id" => @practices.distinct(:_id)) 
```

完整的崩溃日志：

```
Moped::Errors::OperationFailure (The operation: #<Moped::Protocol::Command
  @length=255
  @request_id=646
  @response_to=0
  @op_code=2004
  @flags=[]
  @full_collection_name="um-contacts.$cmd"
  @skip=0
  @limit=-1
  @selector={:distinct=>"practices", :key=>"_id", :query=>{"deleted_at"=>nil,     "published_at"=>{"$lte"=>2012-11-05 15:17:14 UTC}, "addresses.country"=>"DE", "addresses.coords"=>{"$nearSphere"=>[13.4060912, 52.519171], "$maxDistance"=>0.01569612305760477}}}
  @fields=nil>
failed with error 13038: "exception: can't find special index: 2d for: { deleted_at: null, published_at: { $lte: new Date(1352128634313) }, addresses.country: \"DE\", addresses.coords: { $nearSphere: [ 13.4060912, 52.519171 ], $maxDistance: 0.01569612305760477 } }"

See https://github.com/mongodb/mongo/blob/master/docs/errors.md
for details about this error.):
  app/controllers/search_controller.rb:16:in `index' 
```

那是索引的结果，不知道如何从通过 has_many 嵌入的地址中查询它们。

```
> db.practices.getIndexes()

[

    {
    "v" : 1,
    "key" : {
        "_id" : 1
    },
    "ns" : "um-contacts.practices",
    "name" : "_id_"
}

] 
```

帮助将不胜感激！

编辑：看起来像 adresses.coords 的索引没有创建，

```
db.system.indexes.find()
{ "v" : 1, "key" : { "_id" : 1 }, "ns" : "um-contacts.users", "name" : "_id_" }
{ "v" : 1, "key" : { "_id" : 1 }, "ns" : "um-contacts.doctors", "name" : "_id_" }
{ "v" : 1, "key" : { "_id" : 1 }, "ns" : "um-contacts.collaborations", "name" : "_i
{ "v" : 1, "key" : { "_id" : 1 }, "ns" : "um-contacts.practices", "name" : "_id_" } 
```

但应该在实践课中创建：

```
class Practice
 ...
 embeds_many :addresses, cascade_callbacks: true, as: :addressable
 ...
 field :name, type: String
 field :kind, type: String
 field :slug, type: String

 index({"addresses.coords" => '2d'}, { min: -180, max: 180, background: true })
 index({name: 1})
 index({slug: 1}, { unique: true })
 ... 
```

任何人都知道它为什么会失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:17:55.640

尝试重新创建索引。对于蒙古人：

```
rake db:mongoid:create_indexes 
```

# neo4j - 春季数据neo4j忽略@Transient休眠注释？

> ID：13237133
> 
> 赞同：1
> 
> 时间：2012-11-05T17:21:34.127
> 
> 标签：neo4j, spring-data, hibernate-annotations, spring-data-neo4j

在我的一个 pojo 中，我使用过

```
 @RelatedTo(type = "User")
    @Transient
    private Set<User> users = new HashSet<User>(); 
```

它没有与 Hibernate 映射，为了让 hibernate 忽略这一点，我使用了@Transient，否则我得到了`Unknown field users`但现在`neo4j`也忽略了该字段。它不存储关系。如果我删除`@Transient` `neo4j`工作正常，但 Hibernate 正在执行。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:31:50.187

您是否使用带有“部分”参数的@NodeEntity 注释？这是跨商店设置所必需的，请查看手册：[http ://static.springsource.org/spring-data/neo4j/docs/2.2.0.RELEASE/reference/htmlsingle/#reference:cross-store](http://static.springsource.org/spring-data/neo4j/docs/2.2.0.RELEASE/reference/htmlsingle/#reference:cross-store)

# ruby-on-rails - rails erb 线宽

> ID：13237139
> 
> 赞同：0
> 
> 时间：2012-11-05T17:22:02.203
> 
> 标签：ruby-on-rails, erb

我目前尝试使用 link_to_function 调用 javascript 方法。

```
<%= link_to_function( r.cls.to_s.split("#").last ,
"loadDetails('#{Base64.encode64(r.cls.to_s).strip}');"  )%> 
```

问题是我得到一个 JS 错误：

```
Uncaught SyntaxError: Unexpected token ILLEGAL 
```

我认为发生这种情况是因为 rails 在我的代码中添加了一些换行符：

```
 onclick="loadDetails('aHR0cDovL3d3dy5vd2wtb250b2xvZ2llcy5jb20vT250b2xvZ3kxMzUxNzAy

NTA5Lm93bCNjMzM=');; return false;" 
```

我希望 link_to_funktion 打印出无链接中断的输出。

你知道如何存档吗？

**PS：**

当我转义 javascript 它仍然返回：

```
Uncaught SyntaxError: Unexpected token ILLEGAL 
```

# jquery - 防止在子元素中发生点击

> ID：13237141
> 
> 赞同：4
> 
> 时间：2012-11-05T17:22:15.273
> 
> 标签：jquery

我将一个事件设置为a `wrapper div`，但是在这里面`div`，我有一些`buttons`，我怎样才能**防止**这个`wrapper`事件发生在`buttons`？

**html**：

```
<div class="wrapper-alert"> <!-- click here will pop-up -->
   <div class="somethingElse"> <!-- click here will pop-up -->
      Some text            
   </div>
   <div class="this-is-my-action">
      <button class="inside-alert">Inside</button> <!-- click here will NOT pop-up-->
   </div>
   <div class="somethingElseTo"> <!-- click here will pop-up -->
      Some text            
   </div>
</div>​ 
```

我做了一个[**jsfiddle**](http://jsfiddle.net/NxnW2/37/)更清楚。

所以，基本上，如果我点击`wrapper-alert`一些消息会弹出，但如果我点击`button`另一件事会发生，**问题是按钮是包装器的孩子，所以2个事件会一次触发。**

我尝试了一些东西，`if (e.target !== this) return;`但只适用于一个`children`或一些基本结构。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T17:23:49.747

你可以使用`stopPropagation`方法。

> 防止事件在 DOM 树中冒泡，防止任何父处理程序收到事件通知。

```
$(".inside-alert").on("click", function(event){
     event.stopPropagation()
     alert('this is my BUTTON' + event.target); // dont pop-up anything
}); 
```

# javascript - 在ajax调用后使用点击不起作用

> ID：13237143
> 
> 赞同：2
> 
> 时间：2012-11-05T17:22:20.367
> 
> 标签：javascript, jquery, html, css, bootswatch

```
 $(document).ready(function () {
var user = 1;
 $("a.like").on("click", function () {
            var article = $(this).attr('data-article');
            $.ajax({
                type: "POST",
                url: "WebService.asmx/Like",
                data: "{ 'user': '" + user + "', 'article': '" + article + "' }",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    if(msg.d ==  1)
                    {
                        $(".like[data-article='" + article + "']").fadeOut(700).addClass('unlike').removeClass('like').stop().text('Unlike').fadeIn(700);
                    }
                },
                failure: function (msg) {
                    alert(msg.d);
                }
            });
        });

$("a.unlike").on("click", function () {
            var article = $(this).attr('data-article');
            $.ajax({
                type: "POST",
                url: "WebService.asmx/Unlike",
                data: "{ 'user': '" + user + "', 'article': '" + article + "' }",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    if(msg.d ==  1)
                    {
                        $(".unlike[data-article='" + article + "']").fadeOut(700).addClass('like').removeClass('unlike').stop().text('Like').fadeIn(700);
                    }

                },
                failure: function (msg) {
                    alert(msg.d);
                }
            });
        });
}); 
```

当我单击具有类的链接时，它工作正常，当我单击具有类的链接时，它与此不同。但是，当我单击同一链接两次时它不起作用！当我在互联网上搜索时，我发现我必须使用 live 而不是 click，但是 live 在 1.8 版本上已被弃用。我怎样才能使这种火灾多次？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T17:24:02.257

使用`jQuery.on()`：

```
$( document ).on( 'click', 'a.like', function () {
    // Do click stuff here
} ); 
```

[http://api.jquery.com/on/](http://api.jquery.com/on/)

您需要绑定`on`到始终存在的元素。（文档或一些主要的包装 div）。与动态元素一起使用`on`将不起作用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T17:25:11.707

如果你想使用`on`而不是`live`你需要写类似的东西

```
$('#container').on('click', '.a.unlike', function () { 
```

自从

```
$("a.like").on("click", function () { 
```

就像`bind()`它被弃用之前一样工作。

如果你想像我的第一个例子`on()`一样，`live()`你需要传递 3 个参数。

> .on() 方法将事件处理程序附加到 jQuery 对象中当前选定的元素集。从 jQuery 1.7 开始，[.on()](http://api.jquery.com/on/)方法提供了附加事件处理程序所需的所有功能。有关从旧 jQuery 事件方法转换的帮助，请参阅[.bind()](http://api.jquery.com/bind/)、[.delegate()](http://api.jquery.com/delegate/)和[.live()](http://api.jquery.com/live/)。要删除与 .on() 绑定的事件，请参阅 .off()。要附加仅运行一次然后自行删除的事件，请参阅 .one()

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T15:00:21.900

```
$(document).on("click","a.unlike", function () { 
```

是 on 的实时/委托格式。

[http://api.jquery.com/live/](http://api.jquery.com/live/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-02T20:27:21.517

在 ajax 调用之后 javascript 可以工作之前，您需要再次创建代码块的新实例，例如

```
<div class="clicks">
   //Ajax results comes here. For instance if we have sets of <a>Click me</a>, all we need to do is, when the call is successful we should construct our block of codes again because after document loads, javascript only read already existing elements.
</div>

var xhttp;
if (window.XMLHttpRequest) {
    xhttp = new XMLHttpRequest();
} else {
        // code for IE6, IE5
        xhttp = new ActiveXObject("Microsoft.XMLHTTP");`
        }

xhttp.onreadystatechange = function() {
    if(xhttp.readyState === 4 && xhttp.status === 200){
        $('.clicks').html(xhttp.responseText);
        //now re-create your functions here
        $('.clicks a').click(function(){
          alert('clicks worked after ajax call');
        });
    }
};
xhttp.open("GET","index.html",true);
xhttp.send(null); 
```

# c# - Visual Studio 2010 C#“已经定义了具有相同参数类型错误的成员。”

> ID：13237146
> 
> 赞同：6
> 
> 时间：2012-11-05T17:22:35.413
> 
> 标签：c#, types, parameters, member, defined

我在 Visual Studio 中遇到问题，它一直说我定义了一个具有相同参数类型的成员。我是 C# 编程的新手，我真的不知道该怎么做。这些是正在发生的错误：

> 错误 1 ​​类型“Secret.AddPage”已经定义了一个名为“AddPage”的成员，具有相同的参数类型
> 
> 错误 2 类型“Secret.AddPage”已经定义了一个名为“PhoneApplicationPage_Loaded”的成员，具有相同的参数类型

这是我到目前为止编写的代码，非常感谢任何帮助。

```
enter code here

using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;
using System.Device.Location;

namespace secret
{
public partial class AddPage : PhoneApplicationPage
{
    private string location = "";

    public AddPage()
    {
        InitializeComponent();

        GeoCoordinateWatcher myWatcher = new GeoCoordinateWatcher();
        var myPosition = myWatcher.Position;

        // Eftersom koden körs i emulatorn kan den inte få tillgång till riktiga GPS-värden
        // Därför hårdkodas koordinaterna till slottet i Gamla stan så att MSR MAPS Web Services
        //kan testas.

        double latitude = 40.717;
        double longitude = -74;

        if (!myPosition.Location.IsUnknown)
        {
            latitude = myPosition.Location.Latitude;
            longitude = myPosition.Location.Longitude;
        }

        myTerraService.TerraServiceSoapClient client = new myTerraService.TerraServiceSoapClient();

        client.ConvertLonLatPtToNearestPlaceCompleted += new EventHandler<myTerraService.ConvertLonLatPtToNearestPlaceCompletedEventArgs>(client_ConvertLonLatPtToNearestPlaceCompleted);

        client.ConvertLonLatPtToNearestPlaceAsync(new myTerraService.LonLatPt { Lat = latitude, Lon = longitude });
    }

    void client_ConvertLonLatPtToNearestPlaceCompleted(object sender, myTerraService.ConvertLonLatPtToNearestPlaceCompletedEventArgs e)
    {
        location = e.Result;

        //throw new NotImplementedException();
    }

    private void AppBar_Cancel_Click(object sender, EventArgs e)
    {
        navigateBack();
    }

    private void AppBar_Save_Click(object sender, EventArgs e)
    { // spara en ny anteckning

        if (location.Trim().Length == 0)
        {
            location = "Okänd";
        }

        navigateBack();

    }
    private void navigateBack()
    {
        NavigationService.Navigate(new Uri("/secret;component/NotesMainPage.xaml", UriKind.Relative));
    }

    private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e)
    {
        editTextBox.Focus();

    }
}
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-05T17:25:07.433

您正在创建一个部分类，因此您可能在另一个源文件中为您的部分类定义了这些成员。

您可以查看解决方案资源管理器，找到该源文件并将其从那里删除，或者您可以从当前部分类中删除这些成员。

您可能会看到：[部分类和方法（C# 编程指南）](http://msdn.microsoft.com/en-us/library/wa80x488%28v=vs.110%29.aspx)

要搜索包含部分类的其他源文件，请右键单击类名`AddPage`并选择`Go to Definition`. 您将在 Visual Studio 的 Find Symbol 结果窗口中看到多个结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T17:25:25.280

检查您已经在其中定义了`AddPage()`构造函数或`PhoneApplicationPage_Loaded()`方法的另一个部分类。您可以通过`Ctrl`+`F`并搜索方法签名的解决方案来实现此目的：

```
public AddPage() 
```

和

```
PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-17T08:39:25.117

我最近有一些非常相似的东西，结果发现在导入现有代码文件时我已经导入了`obj`目录本身！ ![视觉工作室屏幕截图](../Images/12e200592bb7a33fe24e6f85109e6331.png)

例如，该目录包含自动生成（并自动导入）的`MainWindow.g.i.cs`文件。所以我两次有效地包含了相同的部分类定义，因此出现了“已经定义”的错误。

这对其他人有何帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-06T04:25:08.387

我有一个项目，我在记事本++中打开了主program.cs，进行了一些编辑并“另存为”以在同一文件夹中复制文件。我后来在 Visual Studio 中打开了同一个项目，并在尝试编译时遇到了同样的错误。我只需要通过右键单击问题文件并选择“从项目中排除”来排除我从项目中复制创建的文件。做了一个构建和中提琴！该副本仍在文件夹中，只是未包含在构建中。 [![排除文件的屏幕截图](../Images/f650890be287186b553801a43f816d17.png)](https://i.stack.imgur.com/IBWWc.jpg)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-18T14:02:01.107

就我而言，这个错误的原因最终就这么简单。我在我的数据库项目中向我的 EDMX 添加了一个新的数据库表。我不小心勾选了使用方法生成类的框（但这些已经在项目中生成了）。之后的 EDMX 文件包含两个名称相似的类 AB.Context.tt 和 AB.xxx.Context.tt，并且都包含相同的方法。由于课程是部分的，因此出现了上述错误。

解决方案是删除意外和新添加的辅助 AB.xxx.Contex.tt 文件并重建项目。

# facebook-php-sdk - 随时发布到页面（离线访问）

> ID：13237150
> 
> 赞同：1
> 
> 时间：2012-11-05T17:22:49.877
> 
> 标签：facebook-php-sdk, offline, whmcs

我正在尝试制作一个集成到 WHMCS 中的应用程序，该应用程序将允许管理员设置将在特定时间放置在其 FB 页面墙上的帖子。

我正在使用一段代码，可以让我发布到页面上，但是当尝试从 CLI（Shell）运行 PHP 脚本时：

```
root@golf [~]# php -q /home/host/public_html/modules/addons/social/cron.php 
```

我收到以下消息：

> 请检查 Facebook API 设置，OAuthException: (#803) 您请求的某些别名不存在：0

有人可以告诉我这条消息的含义以及我如何使它工作。

此外，如果我有一段时间没有从 Web 界面访问该应用程序，则会显示以下消息：

> 例外：102：需要参数 uid 或会话密钥

然后该页面上会出现一个弹出窗口并刷新，该消息不再存在（直到我稍后回来）

能得到尽可能多的帮助会很棒。

丹尼尔柯林斯。

# javascript - 条形码阅读器选项卡，然后输入

> ID：13237152
> 
> 赞同：0
> 
> 时间：2012-11-05T17:22:57.817
> 
> 标签：javascript, jquery, html

我正在尝试找出一种将 A 返回函数作为选项卡的方法，反之亦然。当用户扫描条形码时，它会移动到下一个文本字段，然后在最后一个字段上提交表单。真的很确定这一点和 jquery/JavaScript 来实现它！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T17:30:01.547

条码扫描仪的默认行为是输入字符后跟“enter”。如果您的意思是希望扫描仪移至下一个字段，则可以使用以下内容阻止输入：

```
<form method="post">
<input type="text" name="barcode" id="b1" />
<input type="text" name="otherfield" id="b2" />
<input type="submit" id="submit" />
</form>
<script type="text/javascript">
$('#b1').keydown(function(e){
    if (e.keyCode == 13) { // barcode scanned!
        $('#b2').focus();
        return false; // block form from being submitted yet
    }
});
</script> 
```

# ios - 读取“设置包”简单值的值

> ID：13237154
> 
> 赞同：2
> 
> 时间：2012-11-05T17:23:04.830
> 
> 标签：ios, settings, nsuserdefaults, key-value

我在设置包中有一个非常简单的设置。它只是用拨动开关设置的 TRUE 或 FALSE 值。基于此，我的应用程序是否应该显示一个按钮。很简单。

但是当我读取该值时，我得到一个空值。我知道它设置正确，因为我可以在设置应用程序中看到它。

这是我读取值的方式

```
myButton.hidden = ![[NSUserDefaults standardUserDefaults] boolForKey:@"my key"]; 
```

我把那行放在 viewDidLoad 中，放在 applicationDidFinishLaunching 中，什么都没有！我一直为空。

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:30:13.227

请注意，如果用户没有触摸设置并且您没有为您的设置值提供任何默认值（在代码中），它们将返回为 null ...如果您想设置“实际”默认值（所以当您调用它们时）您将获得一些价值）到您必须执行的设置（您应该检查它们是否尚未设置）..

```
NSMutableDictionary *d=[[NSMutableDictionary alloc] init];
    //set the values for d
    NSDictionary *dict = [NSDictionary dictionaryWithDictionary:d];
    [[NSUserDefaults standardUserDefaults] registerDefaults:dict];
    [d release]; 
```

希望能帮助到你

# android - 在android中实现不同的PorterDuff模式

> ID：13237157
> 
> 赞同：5
> 
> 时间：2012-11-05T17:23:15.900
> 
> 标签：android, image-processing, porter-duff

我正在开发一个图片编辑工具，我需要在其中合并两个图像。大多数图像编辑工具（如 gimp）都使用**PorterDuff 模式**来合并或混合图像。我也在android中使用相同的方法。
由于 android 提供有限数量的 PorterDuff 模式，我无法达到预期的结果。所以，我正在考虑实现 android 中不包含的 PorterDuff 模式（重叠、强光、柔光、颜色燃烧、颜色减淡）。
问题是我不知道从哪里开始。因此，在这方面的任何参考或指导都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T11:02:31.247

这是在 android 中实现 Overlay PorterDuff 模式的方法：

```
public class MyPorterDuffMode
{

    public Bitmap applyOverlayMode(Bitmap srcBmp, Bitmap destBmp)
    {
        int width = srcBmp.getWidth();
        int height = srcBmp.getHeight();
        int srcPixels[] = new int[width * height];;
        int destPixels[] = new int[width * height];
        int resultPixels[] = new int[width * height];
        int aS = 0, rS = 0, gS = 0, bS = 0;
        int rgbS = 0;
        int aD = 0, rD = 0, gD = 0, bD = 0;
        int rgbD = 0;

        try
        {
            srcBmp.getPixels(srcPixels, 0, width, 0, 0, width, height);
            destBmp.getPixels(destPixels, 0, width, 0, 0, width, height);
            srcBmp.recycle();
            destBmp.recycle();
        }
        catch(IllegalArgumentException e)
        {
        }
        catch(ArrayIndexOutOfBoundsException e)
        {
        }

        for(int y = 0; y < height; y++)
        {
            for(int x = 0; x < width; x++)
            {
                rgbS = srcPixels[y*width + x];
                aS = (rgbS >> 24) & 0xff;
                rS = (rgbS >> 16) & 0xff;
                gS = (rgbS >>  8) & 0xff;
                bS = (rgbS      ) & 0xff;

                rgbD = destPixels[y*width + x];
                aD = ((rgbD >> 24) & 0xff);
                rD = (rgbD >> 16) & 0xff;
                gD = (rgbD >>  8) & 0xff;
                bD = (rgbD      )  & 0xff;

                //overlay-mode
                rS = overlay_byte(rD, rS, aS, aD);
                gS = overlay_byte(gD, gS, aS, aD);
                bS = overlay_byte(bD, bS, aS, aD);
                aS = aS + aD - Math.round((aS * aD)/255f);

                resultPixels[y*width + x] = ((int)aS << 24) | ((int)rS << 16) | ((int)gS << 8) | (int)bS;
            }
        }

        return Bitmap.createBitmap(resultPixels, width, height, srcBmp.getConfig());
    }

    // kOverlay_Mode
    int overlay_byte(int sc, int dc, int sa, int da) {
        int tmp = sc * (255 - da) + dc * (255 - sa);
        int rc;
        if (2 * dc <= da) {
            rc = 2 * sc * dc;
        } else {
            rc = sa * da - 2 * (da - dc) * (sa - sc);
        }
        return clamp_div255round(rc + tmp);
    }

    int clamp_div255round(int prod) {
        if (prod <= 0) {
            return 0;
        } else if (prod >= 255*255) {
            return 255;
        } else {
            return Math.round((float)prod/255);
        }
    }

} 
```

注意：在提取位图时，将配置设置为 ARGB_8888，这很重要。
任何时候您想要进行图像混合或颜色处理，您都需要确保您处于 ARGB_8888 模式，而不是 RGB_565 模式。直到 2.3，android 通常会默认为 RGB_565 模式，除非你明确告诉它这样做以节省内存。

```
BitmapFactory.Options opt = new BitmapFactory.Options();
opt.inPreferredConfig = Config.ARGB_8888; 
```

# java - Eclipse：我的一个文件的语法突出显示消失了

> ID：13237163
> 
> 赞同：25
> 
> 时间：2012-11-05T17:23:28.797
> 
> 标签：java, eclipse, syntax-highlighting

我试图在 Eclipse 中关闭未使用的文件，但不小心出错了。现在我看不到我的一个文件的语法突出显示。这是两个屏幕截图 - 第一个你可以看到文件，突出显示被破坏，第二个一切都很好： ![在此处输入图像描述](../Images/fdad0f2958a5c4eebb7cad3073f0b74a.png)![在此处输入图像描述](../Images/c83dae01b97a281d3ec6b59cf35054bd.png)

突出显示仅适用于该文件。此文件的扩展名是正确的。我试图仔细查看所有菜单按钮，但这次尝试失败了，我想 Eclipse 对于新手来说已经够难了。当然，我尝试在网络上查找信息，但找不到任何相关信息。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-11-05T17:26:04.360

我猜你不小心用“文本编辑器”打开了文件。请参阅下面的屏幕截图。

![使用文本编辑器打开](../Images/e83d03084c052c1c57e5f161716774f5.png)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-09-04T08:45:33.893

在**C/C++**中也是一种可扩展性模式，如果文件多`5000`行，则禁用语法突出显示。

![在此处输入图像描述](../Images/71a8f6436db802b54db2a3b19fd5fdba.png)

# mysql - 即使 SQL 查询找到行，Cakephp Auth login 也会返回 false

> ID：13237165
> 
> 赞同：1
> 
> 时间：2012-11-05T17:23:38.457
> 
> 标签：mysql, cakephp, authentication, pdo, components

我在 linux 机器上安装了 Cakephp 应用程序。已安装 Mysql 驱动程序并已删除 php-pecl-acl。Cookie 没有问题。用户和密码存在于数据库中。密码是数据库中的 CHAR(40)。

Auth->login() 方法**总是返回 false**，即使 sql 查询调试日志显示影响的行 = 1

```
array(
'log' => array(
    (int) 0 => array(
        'query' => 'SELECT `User`.`id`, `User`.`username`, `User`.`password`, `User`.`email`, FROM `somedatabase`.`users` AS `User`   WHERE `User`.`username` = 'someuser' AND `User`.`password` = '2d7a34c9ef8efa2cfdf4b89175f7edec1cd0ddda'    LIMIT 1',
        'params' => array(),
        'affected' => (int) 1,
        'numRows' => (int) 1,
        'took' => (float) 2
    )
),
'count' => (int) 1,
'time' => (float) 2 
```

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T13:07:37.013

我有同样的问题。我联系了我的服务器人员，他说我们没有安装 PECL 或 php-pdo 软件包。会有什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:38:00.843

听起来与我遇到的完全相同的问题最终成为与 PDO / PECL 相关的特定于服务器的问题：

[$this->Auth->login() 创建返回 1 行的正确查询，但 IF 检查失败（服务器特定问题）](https://stackoverflow.com/questions/11421213/this-auth-login-creates-correct-query-that-returns-1-row-but-fails-if-chec)

* * *

**编辑：** OP评论他如何修复：

> 我卸载了PECL，然后卸载了php-pdo并放回了原来的php.ini文件。之后，我从亚马逊重新安装了 mysql-php 和 php-pdo 包，它工作正常。你是对的，这是 pdo 安装的服务器问题。

# c# - gridview 停止在 Javascript 中具有带有 IF 条件的 Masterpage 的所有页面上工作

> ID：13237171
> 
> 赞同：2
> 
> 时间：2012-11-05T17:23:42.187
> 
> 标签：c#, javascript, asp.net, gridview, infragistics

我正在尝试基于 IF 条件的菜单项，该条件检查会话变量“具有访问权限”的布尔值。根据 IF 条件添加项目，但网格停止工作（网格的垂直滚动消失，记录显示超出页面高度）。

我在母版页客户端编写此代码，因此所有具有网格视图并具有此母版页的页面都停止运行。

这是导致页面问题的javascript代码

```
function mmLoadMenus() 
{
        if (window.mm_menu) 
           return;

window.mm_menu = new Menu("root",200,22,"Verdana, Arial, Helvetica,sans serif",10,"#FFFFFF","#1D4352","#6691BB","#9CCEF3","left","middle",3,0,400,-5,7,true,false,true,0,false,true);

        mm_menu.addMenuItem("Reports", "location='Reports.aspx'");

        if ('<%=Session["Has_Access_"]%>')
        {
            mm_menu.addMenuItem("My&nbsp;Activity", "location='MyActivity.aspx'");
        }
} 
```

只有当我把上面的如果检查时，代码才会导致gridview页面出现问题，否则添加菜单项没有问题。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:30:12.820

尝试使用：

```
 if ('<%=Session["Has_Access_"]%>' == 'true') 
```

# c# - 在 Windows Phone 中创建图像按钮的最佳方法是什么？

> ID：13237179
> 
> 赞同：-2
> 
> 时间：2012-11-05T17:24:04.620
> 
> 标签：c#, windows-phone-7, imagebutton

在 Android 中，我们可以使用在 .xml 文件中定义的选择器。在 Windows Phone 中，我们如何快速实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:28:37.097

您可以将图像添加到 Button 的 Content 属性中。

```
<Button>
<Button.Content>
<Grid>
<Image Name="Normal" Source="Resources/Image.png"/>
</Grid>
</Button.Content>
</Button> 
```

# sql - 将一个选择结果除以另一个选择结果

> ID：13237186
> 
> 赞同：4
> 
> 时间：2012-11-05T17:24:22.367
> 
> 标签：sql, oracle

我看过其他类似的问题，它们似乎与我尝试做的有点不同。

我有一个查询，我在其中选择两个计数值，并且我想将一个除以另一个。

这是我的工作代码：

```
SELECT (SELECT count(DISTINCT s.lastfirst) 
          FROM students s
          JOIN cc ON s.id = cc.studentid
          JOIN courses c on cc.course_number = c.course_number
         WHERE cc.schoolid='109'
           AND c.course_name LIKE 'AP %' 
           AND substr(cc.termid,0,1) <> '-'
           AND cc.dateenrolled BETWEEN to_date('08/01/2010','MM/DD/YYYY') AND  
               to_date('08/01/2011','MM/DD/YYYY')) as AP, 
       (SELECT count(DISTINCT s.lastfirst) 
          FROM students s
          JOIN cc ON s.id = cc.studentid
          JOIN courses c on cc.course_number = c.course_number
         WHERE cc.schoolid = '109'
           AND substr(cc.termid,0,1) <> '-'
           AND cc.dateenrolled BETWEEN to_date('08/01/2010','MM/DD/YYYY') 
           AND to_date('08/01/2011','MM/DD/YYYY')) as ttl
 FROM DUAL 
```

这是我打破它的地方：

```
SELECT (SELECT count(DISTINCT s.lastfirst) 
          FROM students s
          JOIN cc ON s.id = cc.studentid
          JOIN courses c on cc.course_number = c.course_number
         WHERE cc.schoolid='109'
           AND c.course_name LIKE 'AP %' 
           AND substr(cc.termid,0,1) <> '-'
           AND cc.dateenrolled BETWEEN to_date('08/01/2010','MM/DD/YYYY') 
           AND to_date('08/01/2011','MM/DD/YYYY')) as AP, 
       (SELECT count(DISTINCT s.lastfirst) 
          FROM students s
          JOIN cc ON s.id = cc.studentid
          JOIN courses c on cc.course_number = c.course_number
         WHERE cc.schoolid = '109'
           AND substr(cc.termid,0,1) <> '-'
           AND cc.dateenrolled BETWEEN to_date('08/01/2010','MM/DD/YYYY')
           AND to_date('08/01/2011','MM/DD/YYYY')) as ttl,
      (AP / ttl) as pcnt
 FROM DUAL 
```

有人可以告诉我这样做的*正确*方法吗？

谢谢你

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T17:27:02.793

最简单的答案就是将两个值相除：

```
SELECT (SELECT count(DISTINCT s.lastfirst) 

FROM students s
JOIN cc ON s.id = cc.studentid
JOIN courses c on cc.course_number = c.course_number    
WHERE cc.schoolid='109'    
AND c.course_name LIKE 'AP %'     
AND substr(cc.termid,0,1) <> '-'    
AND cc.dateenrolled BETWEEN to_date('08/01/2010','MM/DD/YYYY') 
    AND to_date('08/01/2011','MM/DD/YYYY')) /    
(SELECT count(DISTINCT s.lastfirst)     
FROM students s
JOIN cc ON s.id = cc.studentid
JOIN courses c on cc.course_number = c.course_number       
WHERE cc.schoolid = '109'    
AND substr(cc.termid,0,1) <> '-'    
AND cc.dateenrolled BETWEEN to_date('08/01/2010','MM/DD/YYYY') 
    AND to_date('08/01/2011','MM/DD/YYYY')) as quotient

FROM DUAL 
```

* * *

如果您想保留这些值并获得商，您可以这样做：

```
SELECT AP, ttl, AP/ttl AS quotient
FROM (
SELECT (SELECT count(DISTINCT s.lastfirst) 
          FROM students s
          JOIN cc ON s.id = cc.studentid
          JOIN courses c on cc.course_number = c.course_number
         WHERE cc.schoolid='109'
           AND c.course_name LIKE 'AP %' 
           AND substr(cc.termid,0,1) <> '-'
           AND cc.dateenrolled BETWEEN to_date('08/01/2010','MM/DD/YYYY') AND  
               to_date('08/01/2011','MM/DD/YYYY')) as AP, 
       (SELECT count(DISTINCT s.lastfirst) 
          FROM students s
          JOIN cc ON s.id = cc.studentid
          JOIN courses c on cc.course_number = c.course_number
         WHERE cc.schoolid = '109'
           AND substr(cc.termid,0,1) <> '-'
           AND cc.dateenrolled BETWEEN to_date('08/01/2010','MM/DD/YYYY') 
           AND to_date('08/01/2011','MM/DD/YYYY')) as ttl
 FROM DUAL) 
```

但是此时您也可以只在调用代码而不是 SQL 中进行除法，因为无论如何您只是选择了一个具有两个标量值的结果行。

# python - 如何发送带有到期日期的邮件，从收件箱中自动删除

> ID：13237189
> 
> 赞同：2
> 
> 时间：2012-11-05T17:24:35.900
> 
> 标签：python, smtp, gmail

这是通过python程序发送邮件的方法。

```
def Send_Mail(self, username, password, receiver, subject, body):
    username = str(username)
    password = str(password)
    receiver = str(receiver)
    subject = str(subject)
    body = str(body)
    Username = username
    Password = password
    Sender = username
    Destination = [receiver]
    Subject = subject
    Content = body
    text_subtype = 'html'
    SMTPserver = 'smtp.gmail.com'
    msg = MIMEText(Content, text_subtype)
    msg['Subject'] = Subject
    msg['From'] = Sender
    conn = SMTP(SMTPserver)
    conn.set_debuglevel(False)
    conn.login(Username, Password)
    conn.sendmail(Sender, Destination, msg.as_string())
    conn.close() 
```

通过调用此方法

```
Classname.Send_Mail(<emailid>,<password>,<destination email-id>,<subject>,<body> 
```

此代码运行良好，但需要在发送邮件时设置到期日期，以便发送的邮件必须在指定时间后自动从收件箱中删除。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-10-08T22:14:41.933

`Expiry-Date`被替换`Expires`为 SMTP 标头，以指示电子邮件消息的有用性到期。请参阅[RFC 4021 的相关部分](https://www.rfc-editor.org/rfc/rfc4021#section-2.1.50)。

也就是说，虽然它是标准化的，但我认为它并没有被广泛采用，并且标头并不能保证消息会被删除。不过， Microsoft Outlook 确实会[显示带有删除线样式的过期消息](https://support.office.com/en-us/article/Customize-your-email-message-cfc102b7-43bf-408b-8a47-f0c09b086d01#__toc257316818)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-13T08:03:59.110

在邮件中设置“Expiry-Date”标头，大多数客户都会承认它（并且要么过期，标记为已删除，请求许可等）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T17:37:59.650

据我所知，在 SMTP 或[其他与邮件相关的标准](http://www.faqs.org/rfcs/rfc2076.html#b)中的任何地方都没有“自动删除”之类的东西。此外，我从未听说过这样的“功能”。

所以答案是：**你不能**

（也许他们是支持此类事情的邮件客户端，但这将是“仅在客户端 X 中有效”功能。因此，为了获得更有用的答案，您必须提供目标客户端。）

# django - 表单错误不起作用。姜戈

> ID：13237192
> 
> 赞同：3
> 
> 时间：2012-11-05T17:24:43.417
> 
> 标签：django, forms

我阅读[了这篇](https://docs.djangoproject.com/en/1.4/topics/forms/)文章并发现代码中有错误 - 我可以通过表单发送“null”并且没有错误消息，它只是转到“感谢”页面。我可以在电子邮件字段中写“无”，结果将是相同的。如何解决？

**楷模：**

```
class Contact(forms.Form):
    title = forms.CharField(max_length=100)
    message = forms.CharField(max_length=255)
    sender = forms.EmailField() 
```

**意见：**

```
def contact(request):
    if request.method == 'POST': 
        form = Contact(request.POST) 
        if form.is_valid(): 
            title = form.cleaned_data['title']
            message = form.cleaned_data['message']
            sender = form.cleaned_data['sender']
            return HttpResponseRedirect('/thanks/') 
    else:
        form = Contact()
    return render(request, 'contact.html', {'form': form,}) 
```

**模板：**

```
<form action="/contact/" method="post">
{% csrf_token %}

    {{ form.non_field_errors }}

        {{ form.title.errors }}
        <label for="id_subject">Subject</label>
        {{ form.title }}

        {{ form.message.errors }}
        <label for="id_message">Text</label>
        {{ form.message }}

          {{ form.sender.errors }}
        <label for="id_sender">Email</label>
        {{ form.sender }}

    <p><input type="submit" value="Send" /></p>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T17:48:12.367

我已经得到了我的钱，你有混合的选项卡和空格。我有一段时间没看到这个了——以前很常见！

`return`无论在 POST 上发生什么，该声明似乎都在触发。

# c# - 用于验证确认密码的数据注释

> ID：13237193
> 
> 赞同：63
> 
> 时间：2012-11-05T17:24:44.313
> 
> 标签：c#, asp.net, data-annotations

我的用户模型有这些数据注释来验证输入字段：

```
[Required(ErrorMessage = "Username is required")]
[StringLength(16, ErrorMessage = "Must be between 3 and 16 characters", MinimumLength = 3)]
public string Username { get; set; }

[Required(ErrorMessage = "Email is required"]
[StringLength(16, ErrorMessage = "Must be between 5 and 50 characters", MinimumLength = 5)]
[RegularExpression("^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$", ErrorMessage = "Must be a valid email")]
public string Email { get; set; }

[Required(ErrorMessage = "Password is required"]
[StringLength(255, ErrorMessage = "Must be between 5 and 255 characters", MinimumLength = 5)]
public string Password { get; set; }

[Required(ErrorMessage = "Confirm Password is required"]
[StringLength(255, ErrorMessage = "Must be between 5 and 255 characters", MinimumLength = 5)]
public string ConfirmPassword { get; set; } 
```

但是，我无法确定如何确保确认密码与密码相同。据我所知，只有这些验证例程存在：`Required, StringLength, Range, RegularExpression`.

我可以在这里做什么？谢谢。

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-11-05T17:28:26.350

如果你正在使用`ASP.Net MVC 3`，你可以使用`System.Web.Mvc.CompareAttribute`.

如果您正在使用`ASP.Net 4.5`，它在`System.Component.DataAnnotations`.

```
[Required(ErrorMessage = "Password is required")]
[StringLength(255, ErrorMessage = "Must be between 5 and 255 characters", MinimumLength = 5)]
[DataType(DataType.Password)]
public string Password { get; set; }

[Required(ErrorMessage = "Confirm Password is required")]
[StringLength(255, ErrorMessage = "Must be between 5 and 255 characters", MinimumLength = 5)]
[DataType(DataType.Password)]
[Compare("Password")]
public string ConfirmPassword { get; set; } 
```

编辑：对于`MVC2`使用下面的逻辑，使用`PropertiesMustMatch`属性`Compare`[下面的代码是从默认项目模板复制的`MVCApplication`。]

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Property, AllowMultiple = true, Inherited = true)]
public sealed class PropertiesMustMatchAttribute : ValidationAttribute
{
    private const string _defaultErrorMessage = "'{0}' and '{1}' do not match.";
    private readonly object _typeId = new object();

    public PropertiesMustMatchAttribute(string originalProperty, string confirmProperty)
        : base(_defaultErrorMessage)
    {
        OriginalProperty = originalProperty;
        ConfirmProperty = confirmProperty;
    }

    public string ConfirmProperty { get; private set; }
    public string OriginalProperty { get; private set; }

    public override object TypeId
    {
        get
        {
            return _typeId;
        }
    }

    public override string FormatErrorMessage(string name)
    {
        return String.Format(CultureInfo.CurrentUICulture, ErrorMessageString,
            OriginalProperty, ConfirmProperty);
    }

    public override bool IsValid(object value)
    {
        PropertyDescriptorCollection properties = TypeDescriptor.GetProperties(value);
        object originalValue = properties.Find(OriginalProperty, true /* ignoreCase */).GetValue(value);
        object confirmValue = properties.Find(ConfirmProperty, true /* ignoreCase */).GetValue(value);
        return Object.Equals(originalValue, confirmValue);
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-06-29T18:57:41.113

您可以使用 compare 注释来比较两个值，如果您需要确保它不会在下游任何地方持久化（例如，如果您使用的是 EF）您还可以添加 NotMapped 以忽略任何实体-> DB 映射

有关可用数据注释的完整列表，请参见此处：

[https://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations(v=vs.110).aspx)

```
[Required]
[DataType(DataType.Password)]
public string Password { get; set; }

[Required]
[DataType(DataType.Password)]
[Compare("Password")]
[NotMapped]
public string ConfirmPassword { get; set; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-16T21:34:04.190

# 对于 Blazor`EditForm`验证

上面的答案对我不起作用，因为它没有显示任何消息。

```
 [AttributeUsage(AttributeTargets.Property, AllowMultiple = true, Inherited = true)]
    public sealed class PropertyMustMatchAttribute : ValidationAttribute
    {
        private const string _defaultErrorMessage = "'{0}' and '{1}' do not match.";

        public PropertyMustMatchAttribute(string originalProperty)
            : base(_defaultErrorMessage)
        {
            OriginalProperty = originalProperty;
        }

        public string OriginalProperty { get; }

        protected override ValidationResult IsValid(object value,
            ValidationContext validationContext)
        {
            var properties = TypeDescriptor.GetProperties(validationContext.ObjectInstance);
            var originalProperty = properties.Find(OriginalProperty, false);
            var originalValue = originalProperty.GetValue(validationContext.ObjectInstance);
            var confirmProperty = properties.Find(validationContext.MemberName, false);
            var confirmValue = confirmProperty.GetValue(validationContext.ObjectInstance);
            if (originalValue == null)
            {
                if (confirmValue == null)
                {
                    return ValidationResult.Success;
                }

                return new ValidationResult(ErrorMessage,
                    new[] { validationContext.MemberName });
            }

            if (originalValue.Equals(confirmValue))
            {
                return ValidationResult.Success;
            }

            return new ValidationResult(ErrorMessage,
                new[] { validationContext.MemberName });
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-19T06:12:47.233

其他数据注释是可选的。您可以根据需要添加这些，但您需要这样做以实现密码比较操作。

```
[Required]
[DataType(DataType.Password)]
public string Password { get; set; }

[Required]
[DataType(DataType.Password)]
[Compare("Password")]
public string ConfirmPassword { get; set; } 
```

# git - 更改 git 中的提交消息

> ID：13237194
> 
> 赞同：2
> 
> 时间：2012-11-05T17:24:44.703
> 
> 标签：git

> **可能重复：**
> [如何在 Git 中编辑不正确的提交消息？](https://stackoverflow.com/questions/179123/how-do-i-edit-an-incorrect-commit-message-in-git)

我正在尝试编辑先前提交的提交消息。

这是 git 日志输出：

```
commit B
Author my name
date   2
message 2

commit A
Author my name
date   1
message 1 
```

如何编辑消息1？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:28:02.610

`git rebase -i HEAD^^`应该让您选择更改最后两次提交，然后您可以选择修改提交 A 并更改其日志消息。请注意，这将更改提交 A 和提交 B 的哈希值，因此如果有人已经提取了您的更改，他们将遇到奇怪的冲突。

# jquery - 当目标类的多个实例在同一页面上时，如何使用jQuery计算单个块中的子项数

> ID：13237196
> 
> 赞同：4
> 
> 时间：2012-11-05T17:24:44.733
> 
> 标签：jquery, jquery-selectors

我在一个页面上有几个块列出了`Related Blog Posts`&等内容`Related Articles`。

这些块被编码以返回所有结果。但是为了避免列表太长，我默认列表只显示 3 个项目，并在“显示更多”按钮中工作，单击该按钮会触发手风琴效果以显示剩余项目（如果有）。

我遇到的问题是即使块没有超过 3 个项目，也会显示显示更多按钮。似乎`size()`是在计算两个块的子节点总数，而不是单独计算每个块。

当然，我可以针对 2 个独特的选择器并让它工作。但是我希望这个脚本可以重复使用，而不必每次我需要另一个手风琴块时都添加一个新的选择器。

我现在的方式是，每当您想对块应用手风琴效果时，您所要做的就是在包含 HTML 列表的任何块的外部包装器中添加一个“手风琴”类。

这是我的代码。

```
(function($) {
    $(document).ready(function() { 
        /**
         * Define variables
         */
        var parentSelector = $('.block-views .accordion ul'),
    controlsHTML = $('<div class="show-more"><button>Show More</button></div>'),
    count = $(parentSelector).children().size();

        /**
         * Wrap all items we want to show/hide except for the first 3
         */
        $(parentSelector).children().not(':nth-child(1), :nth-child(2), :nth-child(3)').wrapAll('<div class="slide-content" />');

        /**
         * Hide content that should be hidden by default
         */
        $('.slide-content').hide();

    /**
     * Insert open/close button if there are more than three items in list
     */
    if (count > 3) {
    $(controlsHTML).insertAfter(parentSelector);
    }

        /**
         * Build the expanding content container and attach it to a click event
         */
        $(".show-more button").toggle(
            function () {
                $(this).toggleClass('collapse');
                $(this).text("Show Less");
                $(this).parents('.item-list').find('.slide-content').slideDown();
            },
            function () {
                $(this).toggleClass('collapse');
                $(this).text("Show More");
                $(this).parents('.item-list').find('.slide-content').slideUp();
            }
        );
    });
}(jQuery)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:35:54.323

您需要遍历手风琴并检查每个手风琴的长度：

```
(function($) {
    $(function() { 

        $('.block-views .accordion ul').each(function(i,elm) {
            var ctrl = $('<div class="show-more"><button>Show More</button></div>'),
                count = $(this).children().length;
            if (count > 3) {
                $(this).after(ctrl);
            }
        });

        $(".show-more button").data('state', true).on('click', function () {
            var state = $(this).data('state');

            $(this).toggleClass('collapse').text("Show "+(state?'Less':'More'));
                   .parents('.item-list').find('.slide-content').slideToggle().data('state' !state);
        });
    });
}(jQuery));​ 
```

另请注意，以这种方式使用的切换也已弃用！

# mongodb - MongoDB 在数组中查找重复值

> ID：13237201
> 
> 赞同：2
> 
> 时间：2012-11-05T17:25:01.167
> 
> 标签：mongodb, pymongo

假设我有一个包含文档的集合——</p>

```
{
    'name': 'Hawaiian',
    'toppings': ['ham', 'cheese', 'pineapple'],
} 
```

或者——</p>

```
{
    'name': 'Peperonni',
    'toppings': ['cheese', 'pepperoni'],
} 
```

如何获取`topping`出现在多个文档中的所有 s 的列表？所以，对于上面的两个文件，它是`cheese`.

理想情况下，尽可能“接近”数据库——我知道我可以使用 获取所有配料的列表`distinct`，然后在应用程序级别遍历所有文档，但这太昂贵了。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T17:58:59.070

虽然查询很长，但你可以看看。这是 mongodb 2.2 的聚合框架

```
db.test2.aggregate({$project:{"toppings":1, "_id":0}}, {$unwind:"$toppings"}, {$group:{"_id":"$toppings", count:{$sum:1}}}, {$match:{count:{$gt:1}}}, {$project:{"_id":1}})

{ "result" : [ { "_id" : "cheese" } ], "ok" : 1 } 
```

解释我的查询步骤：

1.  只想要`toppings`场
2.  展开中的所有值`toppings`
3.  按值分组`toppings`并计算数量
4.  找出大于 1 的值的个数
5.  只获取价值（浇头），`count`不需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T17:37:01.057

我会得到所有浇头的列表，然后检查

```
db.coll.find({"topping": topping}).count() > 1 
```

请注意，我在 mongo shell 中尝试过，虽然 pymongo 语法完全相同，但我不确定在哪里实现计数 - 在 pymongo 或数据库中。

[编辑]

pymongo 似乎将 count() 委托给 mongodb，这样就不是完整的查询，而是由数据库执行计数操作。

# ipad - 以非程序员的身份创建 ipad 应用程序

> ID：13237202
> 
> 赞同：1
> 
> 时间：2012-11-05T17:25:03.963
> 
> 标签：ipad

有没有人有任何链接到为非程序员创建 iPad 应用程序的软件或网站？我正在寻找一种所见即所得的方法，在这种方法中，我可以将各种页面链接在一起以构建科学教育应用程序。

谢谢。

# functional-programming - 这是什么函数式编程语言？

> ID：13237205
> 
> 赞同：1
> 
> 时间：2012-11-05T17:25:07.147
> 
> 标签：functional-programming, lazy-evaluation

```
let    f x y = sqrt x+y
  in let g = f 4
  in     g 1 + g 2 
```

是`sqrt(4 + 1) + sqrt(4 + 2)`或`(sqrt(4) + 1) + (sqrt(4) + 2))`

?

这出现在[http://www.csse.monash.edu.au/~lloyd/tildeFP/1989SPE/](http://www.csse.monash.edu.au/~lloyd/tildeFP/1989SPE/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T20:39:14.160

很可能根本就没有，因为至少从 1960 年代起，语法就已经相当成熟，作为功能性伪代码/通用语言。

日期（1989 年修订）建议使用 Miranda 或 SASL，但它们都更倾向于`where`从句而不是`let`. （我什至不确定他们是否有`let`。）

因此，如果它是任何特定语言，最有可能的是[Lazy ML](http://www.csse.monash.edu.au/~lloyd/tildeFP/LML/)，它是 1980 年代初在 Chalmers 开发的。

# c# - 如何从第一个表中获取 ID 以记录第二个表？

> ID：13237210
> 
> 赞同：0
> 
> 时间：2012-11-05T17:25:14.177
> 
> 标签：c#, asp.net-mvc-3, visual-studio

如何从第一个表中获取 ID 以记录第二个表？回想一下 id 和自动生成的。

```
 [HttpPost]
    public ActionResult Create(Chamados chamados, InteracoesChamados interacoesChamados)
    {
        if (ModelState.IsValid)
        {
            db.Chamados.Add(chamados);
            //interacoesChamados.ChamadoId = chamados.ChamadoId;  
            db.InteracoesChamados.Add(interacoesChamados);

            db.SaveChanges();
            return RedirectToAction("Index");
        }

        return View(chamados);
    } 
```

评论以及我想要做什么。我需要从第一个表中获取代码并保存第二个记录。什么是最好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:29:03.413

通过查看代码，我假设 IteracoesChamados 是 Chamados 的孩子。如果是，那么设置

```
iteracoesChamados.Chamados = chamados 
```

ID 将自动分配。希望这可以帮助。

# javascript - Jquery BxSlider 插件帮助创建自定义左右箭头来浏览幻灯片

> ID：13237212
> 
> 赞同：0
> 
> 时间：2012-11-05T17:25:18.777
> 
> 标签：javascript, jquery, html, css, slider

我正在使用 Jquery [bxSlider](http://bxslider.com/)插件。我想要实现的是与[此页面](http://bxslider.com/)上显示的完全相同的示例。我知道如何创建滑块，我正在努力将左右箭头链接到上一张/下一张幻灯片。请有人帮忙，我可以想象这是一个非常简单的解决方案。

我有一个

```
<a href="" class="bx-prev">PREVIOUS</a> 
```

当单击该类时，javascript 需要以某种方式说明转到上一张幻灯片。

[这是他们的 API 页面](http://bxslider.com/options)

到目前为止我的代码：

```
<script type="text/javascript">
  $(document).ready(function(){
    $('#saucesslider').bxSlider({
    autoControls: false,
      });
});
  $(".bx-prev").click(function(){});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:12:42.477

这一切都在您链接到的页面上。无需自己设置 prev 和 next 链接，脚本会为您完成。

*   包括jQuery
*   包括bx滑块js
*   包括 bx 滑块 css

将每张幻灯片放在一个列表项中。

查看 jsfiddle.net/zCAMC/1/

# javascript - 在没有事件的情况下从 HTML 执行 javascript 函数

> ID：13237215
> 
> 赞同：3
> 
> 时间：2012-11-05T17:25:34.873
> 
> 标签：javascript, function, events

我希望从 HTML 页面调用 javascript 函数，并且我**不**希望它依赖于任何事件。该函数位于一个单独的 .js 文件中，因为我希望从许多网页中使用它。我也将变量传递给它。我试过这个：

HTML：

```
<script type="text/javascript" src="fp_footer2.js">
footerFunction(1_basic_web_page_with_links, 1bwpwl.html);
</script> 
```

fp_footer2.js 中的函数：

```
function footerFunction(path, file) {

document.write("<a href=" + path + "/" + file + " target='_blank'>Link to the original web page for this assignment.</a>");

return;
} 
```

（我也尝试将 fp_footer2.js 文件引用放在标题中，但无济于事。我不确定是否可以像在此示例中那样将其“内联”。如果不能，请告诉我。

PS：我知道我可以在 HTML 本身中使用一个简单的 'a href=""' 来做到这一点。为了我自己的好奇心，我想看看这是否可行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T17:29:34.053

如果 a`<script>`有 a `src`，则外部脚本将替换内联脚本。

您需要使用*两个*脚本元素。

您传递给函数的字符串也需要是实际字符串，而不是未定义的变量（或未定义变量的属性）。必须引用字符串文字。

```
<script src="fp_footer2.js"></script>
<script>
    footerFunction("1_basic_web_page_with_links", "1bwpwl.html");
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:28:29.707

JavaScript 将**在**您的页面呈现时运行。一个常见的错误是执行一个试图访问页面下方元素的脚本。这失败了，因为脚本运行时该元素不存在。

所以包含在`<head>`将在任何 DOM 内容可用*之前运行。*

如果您的脚本依赖于 DOM 元素的存在（例如页脚！），请尝试将脚本包含*在*DOM 元素之后。更好的解决方案是使用`document ready`事件（`$(document).ready()`在 jQuery 中）。或`window.onload`。

`documen ready`和之间的区别在于`window onload`它`document ready`会在 DOM 被渲染时触发；因此所有初始 DOM 元素都将可用。在`window onload`所有资源加载后触发，如图像。`window onload`如果您正在处理这些图像，这很有用。通常`document ready`是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T17:29:04.453

也许我误解了你的问题，但你应该能够做这样的事情：

```
<script type="text/javascript" src="fp_footer2.js"></script>
<script type="text/javascript">
   footerFunction(1_basic_web_page_with_links, 1bwpwl.html);
</script> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-05T17:29:39.647

您是否尝试过从 document.ready 调用它？

```
<script type="text/javascript">
  $(document).ready(function() {
    footerFunction(1_basic_web_page_with_links, 1bwpwl.html);
  });
</script> 
```

# android - Timepicker错误返回AM / PM android

> ID：13237223
> 
> 赞同：2
> 
> 时间：2012-11-05T17:26:16.997
> 
> 标签：android

我在显示一个人的计算睡眠周期的正确 AM/PM 时遇到问题。例如，用户点击早上 7:00 的醒来时间，应用程序应返回晚上 11:15 的睡眠时间。在我的应用程序中，它显示的是上午 11:15 而不是下午。

你能帮我解决我到目前为止所做的事情吗：

```
private TimePickerDialog.OnTimeSetListener timePickerListener = 
             new TimePickerDialog.OnTimeSetListener() {

        public void onTimeSet( TimePicker view, int selectedHour,
                int selectedMinute ) {
            // Gets current time
            Calendar c = Calendar.getInstance();

            hour = selectedHour;
            minute = selectedMinute;

            // set waking time into textview
            StringBuilder sb = new StringBuilder();
            if(hour>=12){                      
              sb.append(hour-12).append( ":" ).append(minute).append(" PM");
            }else{
              sb.append(hour).append( ":" ).append(minute).append(" AM");
            }
            wakingtime.setText(sb);

            // Assign hour set in the picker
            c.set( Calendar.HOUR, selectedHour );
            c.set( Calendar.MINUTE, selectedMinute );

            // Have Calendar calculate the substraction of hours and minutes
            c.add( Calendar.HOUR, SUB_HOUR );
            c.add( Calendar.MINUTE, SUB_MINUTE );

            // Get the hour and the minute calculated
            hour = c.get( Calendar.HOUR );
            minute = c.get( Calendar.MINUTE );

            StringBuilder sb2 = new StringBuilder();
            if(hour>=12){                      
              sb2.append(hour-12).append( ":" ).append(minute).append(" PM");
            }else{
              sb2.append(hour).append( ":" ).append(minute).append(" AM");
            }
            answer.setText(sb2);

            // set current time into textview
            //answer.setText( "You must go to bed at " + new StringBuilder().append(pad(hour))
                //  .append(":").append(pad(minute)) );

        }
    }; 
```

任何帮助都非常感谢！谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T17:59:47.393

请参阅上面在评论中与@Simon 的小讨论，您要设置的日历变量是Calendar.HOUR_OF_DAY。[这](http://developer.android.com/reference/java/util/Calendar.html#HOUR)是您正在设置和获得的内容。你想要低于那个的那个。

# android - 在带有交叉淡入淡出动画的视图之间切换

> ID：13237224
> 
> 赞同：8
> 
> 时间：2012-11-05T17:26:31.247
> 
> 标签：android

我写了一个能够在两个视图之间切换的小活动。现在我正在尝试添加一些动画（淡入/淡出效果）。谁能解释我如何做到这一点？

我自己尝试这样做有点错误（如果我很快单击按钮，我的应用程序就会冻结）。我使用下面列出的代码：

```
public class WelcomeActivity extends Activity {
private boolean isLogin = false;
private String KEY_IS_LOGIN = "KEY_IS_LOGIN";
private Animation anim_fadein;
private RelativeLayout welcome, login;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    welcome = (RelativeLayout)getLayoutInflater().inflate(R.layout.activity_welcome_menu, null);
    login = (RelativeLayout)getLayoutInflater().inflate(R.layout.activity_welcome_login, null);
    anim_fadein = AnimationUtils.loadAnimation(this, R.anim.anim_fadein);
    if (savedInstanceState != null)
        isLogin = savedInstanceState.getBoolean(KEY_IS_LOGIN, false);
    if (isLogin)
        setContentView(login);
    else
        setContentView(welcome);
}

@Override
public void onBackPressed() {
    if (isLogin) {
        setContentView(welcome);
        welcome.startAnimation(anim_fadein);
        isLogin = false;
    } else {
        super.onBackPressed();
    }
}

@Override
public void onSaveInstanceState(Bundle outState) {
    outState.putBoolean(KEY_IS_LOGIN, isLogin);
    super.onSaveInstanceState(outState);
}

public void onButton1Click(View v) {
    setContentView(login);
    login.startAnimation(anim_fadein);
}

public void onButtonLoginClick(View v) {
    Intent i = new Intent(getApplicationContext(), MainActivity.class);
    startActivity(i);
}

public void onButtonBackClick(View v) {
    setContentView(welcome);
    welcome.startAnimation(anim_fadein);
} 
```

动画 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<alpha
xmlns:android="http://schemas.android.com/apk/res/android"
android:fromAlpha="0.0"
android:toAlpha="1.0"
android:duration="800" /> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T17:44:36.013

我过去这样做的方法是使用[ViewFlipper](http://developer.android.com/reference/android/widget/ViewFlipper.html)类并利用包提供的内置动画功能。

这是有关如何执行此操作的示例；以我的经验，过渡非常顺利：

## XML 文件

```
<LinearLayout
    //Ommitted...
    <ViewFlipper
        android:id="@+id/[your_id_here]"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
            <RelativeLayout
                <!--Your first layout XML here...-->
            </RelativeLayout>
            <RelativeLayout
                <!--Your second layout XML here...-->
            </RelativeLayout>
    </ViewFlipper>
</LinearLayout> 
```

请注意，您不必使用相对布局，我只是为了清楚起见而使用它们。

## 实现动画

`ViewFlipper`在您的活动中获取对 的引用：

```
ViewFlipper v = (ViewFlipper) findViewById(R.id.[your_id]); 
```

根据需要设置动画：

```
v.setInAnimation(AnimationUtils.loadAnimation([your_activity_name].this, R.anim.[your_in_animation here]));
v.setOutAnimation(AnimationUtils.loadAnimation([your_activity_name].this, R.anim.[your_out_animation here])); 
```

请注意，您可以在位于以下目录的 Android 类文件中找到一些**非常好的预构建动画：**

```
[android-sdks]/samples/android-[VERSION_NUMBER_HERE]/ApiDemos/res/anim 
```

如果可以的话，我强烈推荐使用这些——它会为你节省很多时间。

现在，如果您希望在视图之间切换，请使用以下命令：

```
v.showNext();
v.showPrevious(); 
```

您可能需要稍微更改动画文件以确保动画正确过渡（即制作淡入淡出的*左右*动画）。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T08:06:37.747

我认为这个问题有两个主要解决方案

*   第一个是按照建议使用[ViewFlipper](http://developer.android.com/reference/android/widget/ViewFlipper.html)。
*   另一种是使用[此处](http://developer.android.com/training/animation/crossfade.html)描述的解决方案。

我更喜欢第二个，因为它在您的视图层次结构中不需要额外的 View 对象，第二个您可以在整个视图树中拥有 2 个视图。不仅在一个由 ViewFlipper 的位置定义的地方。

# iphone - 在 ARC 模式下初始化变量

> ID：13237225
> 
> 赞同：1
> 
> 时间：2012-11-05T17:26:32.137
> 
> 标签：iphone, objective-c, ios, cocoa

我已经开始将我的项目转换为在 ARC 下工作，我想知道下面的行为会如何。

据我了解，以下行会导致手动内存管理规则下的内存泄漏。

```
self.array = [[NSArray alloc] init]; 
```

并且建议使用自动释放对象，例如，

```
 self.array = [NSArray array] or
  array = [[NSArray alloc] init]; 
```

1.  因此，ARC 模式是否也会导致下一行的内存泄漏？

    `self.array = [[NSArray alloc] init];`

2.  当我们直接分配给数组（？）而不使用生成的setter时，这会导致数组过早释放吗？

    `array = [[NSArray alloc] init];`

请将数组视为实例变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T17:30:32.823

1）不，不泄漏。
2）不，应该也可以

ARC 的两种方式都是安全的。无论如何，您应该尽可能使用属性。您需要注意的唯一情况是：

如果您的属性很弱并且您分配了一个新创建的对象，例如`self.array = [[NSArray alloc] init]`，它将在下一行中消失。这在 ARC 中有点奇怪。但是如果你的属性很强大，你根本不需要关心内存的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T17:30:42.193

当您使用 ARC 时，编译器实际上会为您插入正确的保留和释放，因此您不必担心在这些情况下会出现内存泄漏。它有助于从“过渡”指南中阅读一些关于 ARC 的内容：

[http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)

# c# - C# 中的性能评估器

> ID：13237232
> 
> 赞同：-6
> 
> 时间：2012-11-05T17:27:06.607
> 
> 标签：c#, performance, performance-testing, evaluation, evaluator

我需要使用 C# 开发一个评估工具，该工具将在系统上运行数小时，然后显示系统的整体性能。

系统应该运行一项服务，我们想要评估该服务如何影响系统的性能。如果我可以使用“Windows 性能监视器”中可用的性能计数器，那就太好了……我不确定是否有任何 API 可供开发人员使用。

我只是在寻找建议...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:30:48.613

如果是我，我会使用 perfmon。优点是：

*   众所周知的数据归档模型，提供多种格式。
*   对数据进行切片和切块的现有工具，包括可视化。
*   如果客户关心，可以与其他系统集成（即让他们将数据吸入其他性能工具）。
*   别人的代码。:)

如果需要，您可以包装 perfmon 并以编程方式调用它。最坏的情况只是通过命令行调用它并以这种方式开始/停止收集。

当然，您也可以针对特定应用程序公开自己的性能计数器。对于我在 Windows 上能想到的几乎所有编程环境，都有大量的 API，当然包括 C#。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:31:55.947

我强烈建议您使用现有选项，例如自动收集 WPM 统计信息。

否则 C# 可能不是最佳选择，因为硬件几乎完全被运行时从代码中抽象出来。此外，该应用程序可能需要足够的资源和时间来污染您的结果。通常 C++ 和 C# 之间的性能成本可以忽略不计，但在这种情况下可能是一个问题。

祝你好运。

# oracle - 在 oracle 中创建具有 2000 列的表

> ID：13237234
> 
> 赞同：-6
> 
> 时间：2012-11-05T17:27:07.667
> 
> 标签：oracle

可以在 oracle 中创建超过 2000 列的表。列名应该是任何东西，类型也应该是任何东西。我不知道怎么写

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-05T17:29:16.160

不，这是不可能的。Oracle[限制每个表有 1000 列](http://docs.oracle.com/cd/B19306_01/server.102/b14237/limits003.htm)。

但是，为什么您首先要创建一个包含 2000 列的表呢？这强烈暗示您的架构非常需要一些规范化。如果您能解释您要解决的业务问题，我们几乎可以肯定地提出更合适的解决方案。

如果您确实确定要违反适当的规范化并且想要在循环中生成列，您可以执行类似的操作

```
DECLARE
  l_sql_stmt varchar2(1000);
BEGIN
  l_sql_stmt := 'CREATE TABLE violation_of_normalization( col1 number )';
  EXECUTE IMMEDIATE l_sql_stmt;

  FOR i IN 2 .. 900
  LOOP
    l_sql_stmt := 'ALTER TABLE violation_of_normalization ADD( col' || i || ' number )';
    EXECUTE IMMEDIATE l_sql_stmt;
  END LOOP;
END; 
```

做这样的事情是一个非常糟糕的主意，但它肯定是可能的。

# jquery - 点击事件后 Twitter Bootstrap 复选框按钮值更改

> ID：13237238
> 
> 赞同：3
> 
> 时间：2012-11-05T17:27:12.407
> 
> 标签：jquery, twitter-bootstrap, jquery-click-event

我有一个这样的复选框按钮组：

```
<div class="btn-group" id="id_group" data-toggle="buttons-checkbox">
  <button class="btn myclass" type="button" data-value="0">Value 0</button>
  <button class="btn myclass" type="button" data-value="1">Value 1</button>
</div> 
```

和 JS 事件处理程序：

```
$(".myclass").click(function(event) {
  console.log($(".myclass.active").length);
  console.log($(this).hasClass("active"));
}); 
```

我想获取`data-value`所有选中的按钮，但是在**单击**事件中，`active`尚未设置该类。这意味着，当我第一次单击按钮时，输出为：

```
>>> 0
>>> false 
```

下次我单击同一个按钮（即取消选中它）时，输出为：

```
>>> 1
>>> true 
```

这意味着`active`课程是在活动之后设置的。

如何在**单击**事件期间获取按钮的真实状态？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T11:29:54.080

我也遇到了点击事件和活动课程的时间问题！

进一步 davidkonrad 的回答并使用[这篇文章](https://stackoverflow.com/questions/10273307/how-do-i-turn-a-button-group-in-bootstrap-into-a-radio-style-input-to-my-form)，我想出了以下内容，以避免修改引导源，但比完全覆盖更轻量级。

```
var _old_toggle = $.fn.button.prototype.constructor.Constructor.prototype.toggle;

$.fn.button.prototype.constructor.Constructor.prototype.toggle = function () {
    _old_toggle.apply(this);

    if (this.$element.hasClass('active')) {
        this.$element.trigger('active')
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T00:56:31.697

如果每次将类`active`添加到按钮时都迫切需要一个事件，则可以修改 bootstrap.js。`active`在单击触发的小函数中设置/取消设置`Button.prototype.toggle`，第 1362-1370 行：

```
Button.prototype.toggle = function () {
    var $parent = this.$element.closest('[data-toggle="buttons-radio"]')

    $parent && $parent
      .find('.active')
      .removeClass('active')

    this.$element.toggleClass('active')
  } 
```

将其更改为

```
Button.prototype.toggle = function () {
    var $parent = this.$element.closest('[data-toggle="buttons-radio"]')

    $parent && $parent
      .find('.active')
      .removeClass('active')

    this.$element.toggleClass('active')

    if (this.$element.hasClass('active')) {
        this.$element.trigger('active')
    }
  } 
```

现在你有一个可以绑定的事件`.myclass`

```
$(".myclass").on('active', function() {
  console.log($(".myclass.active").length);
  console.log($(this).hasClass("active"));
}); 
```

或者，如果您认为上述内容太脏 - 您可以按照此处描述的框架扩展/修改 Button.prototype（添加方法、选项等）[如何扩展 Twitter Bootstrap 插件](https://stackoverflow.com/questions/9137311/how-to-extend-twitter-bootstrap-plugin/12689534#12689534)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T17:35:39.050

你推断正确。click 事件尚未更新活动类，因此当您搜索它们时，它不会返回。没有为类更改触发的事件。

但是，您可以做的是添加一个`setTimout`100 毫秒的时间，足以让点击事件触发。请注意，您可能需要调整延迟以允许事件传播。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-26T14:02:09.647

我使用 jQuery 的`data`管理来存储一个`active`状态，在按钮点击时切换它。也不是很好，但它的东西。

# eclipse - 如何在 Eclipse 中使用 svn？

> ID：13237241
> 
> 赞同：0
> 
> 时间：2012-11-05T17:27:28.583
> 
> 标签：eclipse, svn

我正在尝试创建自己的*SVN*服务器，以便可以在任何地方处理我的 android 项目。

我有一个 VPS 并安装了 svn，我设置了目录并在密码文件中添加了一个用途。

过了一会儿，我终于设法创建了一个项目

```
svn import -m "initial import" . file:///home/admin/svn/reposvn/testp/trunk 
```

但我不明白？我只能导入我服务器上的项目吗？如果是这样的话，我可以只使用 ftp 而完全不用担心 svn。

我想做的是有一个 url 可以在 eclipse 之类的东西中使用。我的子域指向`/home/admin/svn/`然后我输入`/reposvn`

所以我尝试了网址

```
http://(mydomain)/reposvn 
```

和

```
svn://(mydomain)/reposvn 
```

但都没有工作说在处理操作时检测到一个循环 svn: Redirected cycle detected for URL ....

我还使用 svnserve -d 设置了守护进程或其他任何东西

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:12:14.233

有一次我写了一篇关于这个的文章。我认为它将为您提供有关此问题的足够信息：[How to setup SVN version control over SSL with Apache to use in Eclipse。](http://www.devgems.net/?p=107)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:58:44.213

好的，我让它工作了我花了一段时间才弄清楚的一件事是 svn:// 用于 svnserve 守护程序，其中必须通过 Apache 设置 http:// 访问。

我删除了整个 svn 并重新安装/重新设置了所有内容，因此可能存在某种混乱的配置。

但是我设置了守护进程

```
svnserve -d --foreground -r /home/admin/svn 
```

然后我就可以连接到 svn://

[https://help.ubuntu.com/community/Subversion](https://help.ubuntu.com/community/Subversion)

谢谢

# login - Liferay 通过 CAS 登录，通过 Login Portlet 创建帐户功能

> ID：13237244
> 
> 赞同：0
> 
> 时间：2012-11-05T17:27:56.020
> 
> 标签：login, liferay, cas

我们使用 Liferay 6.1.0，OpenLDAP 用于存储用户，CAS 用于 SSO。我将 Liferay 配置为使用 CAS 登录。但是，只有单击右上角的“登录”链接才能通过 CAS 登录。用户也可以通过 Login portlet 登录，但不使用 CAS。首先，我认为我可以隐藏或删除登录 portlet 以强制用户通过 CAS 登录，但随后我丢失了登录 portlet 提供的“创建帐户”链接。而且我需要 Liferay 的创建帐户功能，因为它非常实用（例如，它将新用户导出到 LDAP）。

我怎样才能吃蛋糕呢？即提供Liferay 的创建帐户链接而不显示登录portlet 的其余部分，并且“强制”已经注册的用户仅通过CAS 登录？任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:01:37.213

回答我自己的问题，因为我终于弄明白了......

我创建了一个挂钩来替换Liferay 包中的 Tomcat 服务器目录`$TOMCAT/webapps/ROOT/html/portlet/login/login.jsp`所在的 JSP 文件。`$TOMCAT`（查看[Liferay 指南](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/hoo-4)，了解如何创建 JSP 挂钩。）

这个想法是测试是否启用了 CAS，如果是，则“隐藏”表单中的用户名、密码字段和登录按钮。我在 Liferay Shibboleth 插件中找到的测试条件。这是 JSP 的相关部分，从第 101 行或附近开始：

```
 <liferay-ui:error exception="<%= UserPasswordException.class %>" message="authentication-failed" />
        <liferay-ui:error exception="<%= UserScreenNameException.class %>" message="authentication-failed" />

    <%-- When CAS is enabled, don't show the normal login fields --%>
    <c:choose>
        <c:when test="<%= PrefsPropsUtil.getBoolean(company.getCompanyId(), PropsKeys.CAS_AUTH_ENABLED, PropsValues.CAS_AUTH_ENABLED) %>" >
            <%-- CAS is enabled --%>
            <div><p>
            Please sign in via CAS using the "Sign In" link in the upper right corner.
            </p></div>
        </c:when>
        <c:otherwise>   <%-- original login fields --%>
            <aui:fieldset> 
                <%
                String loginLabel = null;

                if (authType.equals(CompanyConstants.AUTH_TYPE_EA)) {
                    loginLabel = "email-address";
                }
                else if (authType.equals(CompanyConstants.AUTH_TYPE_SN)) {
                    loginLabel = "screen-name";
                }
                else if (authType.equals(CompanyConstants.AUTH_TYPE_ID)) {
                    loginLabel = "id";
                }
                %>

                <aui:input label="<%= loginLabel %>" name="login" showRequiredLabel="<%= false %>" type="text" value="<%= login %>">
                    <aui:validator name="required" />
                </aui:input>

                <aui:input name="password" showRequiredLabel="<%= false %>" type="password" value="<%= password %>">
                    <aui:validator name="required" />
                </aui:input>

                <span id="<portlet:namespace />passwordCapsLockSpan" style="display: none;"><liferay-ui:message key="caps-lock-is-on" /></span>

                <c:if test="<%= company.isAutoLogin() && !PropsValues.SESSION_DISABLED %>">
                    <aui:input checked="<%= rememberMe %>" inlineLabel="left" name="rememberMe" type="checkbox" />
                </c:if>
            </aui:fieldset>

            <aui:button-row>
                <aui:button type="submit" value="sign-in" />
            </aui:button-row>
        </c:otherwise>
        </c:choose>
        <%-- end of CAS-dependent login field part --%>

    </aui:form> 
```

诚然，这是一个 hack，但它确实有效。:-)

# java - 没有 cookie 的会话管理

> ID：13237254
> 
> 赞同：0
> 
> 时间：2012-11-05T17:28:35.713
> 
> 标签：java, session, session-cookies

我正在尝试使用 URLConnection 从网站上抓取数据。需要跟踪我的登录和会话，但该网站显然拒绝了 cookie。

我看不到该网站的 cookie。他们可以用来保存会话的替代方法是什么？我看到 URL 重写可能是一种选择。

如何在该网站上跟踪我的登录/会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:36:34.283

**encodeURL()**使用它来确保正确处理会话管理。它接收一个 URL，如果用户关闭了 cookie，它会将 jsessionid 以适当的格式附加到 URL，以被识别为会话标识符。

什么时候使用它？每次您有链接、表单操作、sendRedirect 或其他 URL 访问客户端时，您的应用程序都需要维护服务器端会话。服务器端转发和包含不需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T17:34:30.670

将会话 ID 存储在隐藏字段中是另一种选择。看看这个[教程](http://www.technicalinfo.net/papers/WebBasedSessionManagement.html)

# javascript - 日期在 IE 中返回 NAN

> ID：13237256
> 
> 赞同：-1
> 
> 时间：2012-11-05T17:28:42.307
> 
> 标签：javascript

> **可能重复：**
> [IE JavaScript 日期解析错误](https://stackoverflow.com/questions/3020508/ie-javascript-date-parsing-error)

此代码在 chrome 和 firefox 中运行良好，但在 IE 和 safari 中不起作用。它在 IE 中返回 NAN，在 safair 中返回无效日期。

```
var date = new Date("2012-10-17T08:15:19.500-05:00");
var now = new Date();
var difference = now - date;

document.write( "Date: " + date.toLocaleString() + "<br/>");
document.write( "Now: " + now.toLocaleString() + "<br/>");
document.write( "Difference: " + differenceToString(difference) );

function differenceToString(milliseconds) {
    var seconds = milliseconds / 1000;
    var numyears = Math.floor(seconds / 31536000);
    var numdays = Math.floor((seconds % 31536000) / 86400);
    var numhours = Math.floor(((seconds % 31536000) % 86400) / 3600);
    var numminutes = Math.floor((((seconds % 31536000) % 86400) % 3600) / 60);
    var numseconds = Math.floor((((seconds % 31536000) % 86400) % 3600) % 60);
    return numyears + " years, " + numdays + " days, " + numhours + " hours, " + numminutes + " minutes, " + numseconds + " seconds";
} 
```

[http://jsfiddle.net/RYS3R/](http://jsfiddle.net/RYS3R/)

任何想法都会有很大帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:43:23.017

您忘记了`Z`在时区偏移之前，根据[语言规范](http://es5.github.com/#x15.9.1.15)获取有效的 JS 解析日期-`YYYY-MM-DDTHH:mm:ss.sssZ±hh:mm`这是[它必须接受的唯一格式](http://es5.github.com/#x15.9.4.2)。尝试

```
var date = new Date("2012-10-17T08:15:19.500Z-05:00");
… 
```

# c# - Orchard CMS 博客视图/布局

> ID：13237264
> 
> 赞同：-1
> 
> 时间：2012-11-05T17:29:06.490
> 
> 标签：c#, asp.net-mvc, razor, orchardcms

我是 Orchard CMS 和 MVC 的新手，所以请考虑到这一点。任何帮助 - 越多越好 - 将受到极大的欢迎。

我想将小部件添加到我的博客摘要页面。实现这一目标的最佳方法是什么？我试过为层规则定义的博客摘要页面创建一个层，以便对这个页面是唯一的。但是，这只允许我将小部件添加到图层区域中。

我需要/想要做的是有效地创建一个带有标签云的侧边栏和一个显示其他帖子标题的博客卷，以及其他一些内容。这意味着将博客摘要内容移动到另一个区域，以便我可以将小部件放在一边。

这是正确的方法吗？如果是这样，我如何将摘要内容转移到另一个区域？如果这不是最好的方法，那是什么？？？

这是预测进来的地方？？？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T09:20:00.643

根据我对您问题的理解，我的回答是这样的。

如果您使用默认的 ThemeMachine，“主要内容”（即您的博客摘要页面）会被加载到 Content Zone - 它位于 ThemeMachine 的中间容器或区域中，两侧有两个 Aside Zones 或通常称为侧边栏. 为了实现您想要的效果，我会将 Tag Cloud 小部件和 Blogroll 小部件放入左侧/侧边栏或右侧，具体取决于您所追求的外观。

就是这样！

现在，这取决于您正在使用的主题，并且 Aside Zone(s) 是否实际可用，这由主题清单决定，主题清单是主题根目录中的 Theme.txt 文件。

现在，如果您想为这些小部件的显示时间设置规则，您可以使用管理仪表板中小部件区域中的图层来执行此操作。对此的详细信息将需要第二个问题；-) 因为我希望能回答您的第一个问题。

PS Projections 可用于替代博客摘要页面和博客小部件。并且可以更好地控制显示的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T17:50:24.190

我想我现在了解您要完成的工作，并且该解决方案要求您以两种方式之一修改主题，以最可接受的方式为准：

* * *

第一个是更可取的方式，但需要做更多的工作。您应该修改`Layout.cshtml`模板以将当前`Content`区域拆分为 2 -`Content`和`Aside`. 这在很大程度上依赖于模板的当前代码，但可能需要更改：

```
<section id="content-area">
    @Zone(Model.Content)
</section> 
```

到：

```
<section id="content-area">
    @Zone(Model.Content)
</section>
@if(Model.Aside != null){
<aside id="aside-area">
    @Zone(Model.Aside)
</aside>
} 
```

接下来，您需要更改 CSS 以使您`content-area`的 CSS 浮动在左侧，而`aside-area`浮动在右侧。

您还需要更改`Theme.txt`主题文件以添加`Aside`到区域列表中。

您现在可以将小部件添加到`Aside`区域。如果这些小部件应仅在特定情况下显示，则当您希望显示小部件时，您必须制作额外的图层，这些图层将在这些情况下处于活动状态。

* * *

第二种解决方案是您希望**仅**当博客以摘要模式显示时才显示这些小部件。此解决方案不是使用 Orchard 的常规方式，而是 Orchard 允许但在设计时并未考虑到这一点的技巧。尽管如此，我发现它在某些情况下很有用，所以就在这里。

更改`Theme.txt`为在区域列表中添加`Aside`区域。

在您的主题中创建一个新模板并将其命名`Content-Blog.cshtml`。编辑它，使其具有以下内容：

```
<section id="content-area">
    @Display(Model.Content)
</section>
@if(Layout.Aside != null){
<aside id="aside-area">
    @Display(Layout.Aside)
</aside>
} 
```

您还必须进行 CSS 更改以将您的`Aside`区域设置为内容的右侧。

现在您可以将小部件添加到`Aside`区域。请注意，现在您不必创建新图层，因为`Aside`区域显示的唯一时间是在`Content-Blog.cshtml`渲染时，并且仅在`Blog`以摘要模式显示时才渲染。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T13:04:35.197

最后，我能够找到相关视图，然后切换区域，使较窄的区域出现在右侧。然后创建一个投影以返回博客文章摘要并将其放置在左侧较大的区域中。

感谢所有试图提供帮助的人。我知道必须有一个简单的答案，因此我最初简化了问题。我没想到会引起这么多的悲伤。

# java - Java中的OR和AND函数？

> ID：13237276
> 
> 赞同：-3
> 
> 时间：2012-11-05T17:29:49.390
> 
> 标签：java, logic

Java中的`OR`和运算符是什么？`AND`我试过`or`,`system.or`和各种各样的东西，但没有找到任何东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T18:12:14.610

好吧，让我为你打破它............

**短路`And`和`Or`操作员：**

**与门：** `&&`

**或门：** `||`

**非短路`And`&`Or`运营商：**

**与门：** `&`

**或门：** `|`

**短路和非短路运算符的区别：**

`if (false && true)` **// 因为第一个语句是假的，它不会评估第二个条件**

`if (false & true)` **//即使第一个语句是假的，它仍然会评估第二个条件**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T17:30:28.030

嗯，你说的“逻辑门”是什么意思？你的意思是[`||`和`&&`](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/opsummary.html)？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T17:31:08.213

`||`是您用于 OR 的。

`&&`是您用于 AND 的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T17:31:49.117

检查运算符摘要@ Oracle

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/opsummary.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/opsummary.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T17:30:56.927

和是 && 和或是 || 请参阅：[http ://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-05T17:31:28.343

您在寻找`|| which is OR`和`&& which is AND`运营商吗？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-05T17:32:11.307

或者 -> || 和 -> &&

例如，如果 a == 1 和 b == 2 -> if (a == 1 && b == 2)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-18T13:40:55.197

必须导入 logicgate.* 应该能够让程序使用 AND ， OR 和 NOT 门（其他人不确定）

例子 ：

使用 AND 类创建变量和 2 个额外变量用于流程

```
 And and = new And();
 int no1 = 10 , no2 = 20; 
```

接下来，使用 AND 门逻辑执行该过程

```
 int answer = and.doOperation(no1,no2); 
```

使用其他逻辑门的相同工作流程

# bash - bash 读取命令

> ID：13237279
> 
> 赞同：3
> 
> 时间：2012-11-05T17:30:11.433
> 
> 标签：bash, shell

我尝试使用读取命令来捕捉用户输入的内容。

```
read -p "Please enter your name -> " -n 20 name 
```

但我发现我们无法纠正我们输入的内容。如何使“BackSpace”删除而不是添加？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T17:33:57.103

最简单的方法是使用`-e`标志来读取，这将使它使用 readline。

```
read -e -p "Please enter your name -> " -n 20 name 
```

您还可以更改终端设置 (stty)，以便删除退格而不是删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:37:51.107

您可以将用户输入的文本（或任何其他文本）通过管道传输`col -b`，例如：

```
name=`echo $name|col -b` 
```

这比使用命令选项更便携`-e`，`read`因为`-e`并非所有 Unix 系统都支持，例如 AIX（我认为它是 GNU/Linux 扩展）。

# php - 如何管理请求受限的 API 调用

> ID：13237287
> 
> 赞同：1
> 
> 时间：2012-11-05T17:30:33.223
> 
> 标签：php, mysql, sql, api, rate-limiting

我正在使用 tmdb API，它对请求有一个新的限制，即每个 IP 在 10 秒内有 30 个请求。我可以通过在 MySQL 中保存每最后 10 秒的请求数量的表来跟踪这些调用，但是如何使用不同的 IP 地址来完成此操作？

我的应用程序的工作方式是：

1.  从桌面应用程序向应用程序服务器发出请求。服务器端 php 然后进行搜索并返回数据。

2.  然后桌面应用程序对应用程序服务器进行不同的调用，然后依次对 tmdb (4-7) 和其他 api 进行几次 api 调用。

在某些情况下，可以有从几个搜索请求到几千个的任何地方。跟踪和延迟 api 调用以使其低于限制的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:52:00.743

如果您的服务器正在向具有速率限制的另一台服务器发送请求，则无论哪个客户端正在向您的服务器发出请求等，您都需要一种全局方式来跟踪来自您的服务器的请求。

我会使用一个平面文件，并为每个请求保存 unix 时间和一个分隔符，如果文件包含其中的十个，你已经完成了十个请求，你需要清理文件并删除任何较旧的时间戳不到十秒，这将为您提供最简单的 PHP 速率限制器形式。

当然有更高级的方法，但我会从那里开始，并确保你测试它，这样你就不会失去你的 API 访问等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T17:34:32.730

您可以使用 php sleep 功能来限制您发出请求的速率。或者确实使用类似 usleep 功能的东西通过给出你想要延迟的微秒数来停止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-12T19:11:21.643

[令牌桶算法](https://en.wikipedia.org/wiki/Token_bucket)可以做限速。我为你做了一个带有共享存储的线程安全实现：[bandwidth-throttle/token-bucket](https://github.com/bandwidth-throttle/token-bucket)

此示例将应用程序限制为每秒 3 个请求的全局消耗率：

```
use bandwidthThrottle\tokenBucket\Rate;
use bandwidthThrottle\tokenBucket\TokenBucket;
use bandwidthThrottle\tokenBucket\BlockingConsumer;
use bandwidthThrottle\tokenBucket\storage\PDOStorage;

$storage  = new PDOStorate("tmdb", $pdo);
$rate     = new Rate(3, Rate::SECOND);
$bucket   = new TokenBucket(30, $rate, $storage);
$consumer = new BlockingConsumer($bucket);
$bucket->bootstrap(30);

$consumer->consume(1);
$api->foo(); 
```

# mysql - 如何参考转换表

> ID：13237288
> 
> 赞同：0
> 
> 时间：2012-11-05T17:30:32.793
> 
> 标签：mysql, sql, triggers

我有这两张表：

```
create table possiede (
soc1 integer not null,
soc2 integer not null,
primary key (soc1,soc2),
perc double
);

create table contr (
soc1 integer not null,
soc2 integer not null,
primary key(soc1, soc2)
); 
```

我在通用 SQL 语法中有这两个触发器，我需要将它们转换为 MySQL 语法：

```
create trigger contrDir
after insert on possiede
for each row
when percent > 0.5 and (soc1,soc2) not in (select * from contr)
insert into contr values (soc1,soc2);

create trigger contrIndir
after insert on possiede
referencing new table as newTable
for each row
insert into possiede values
(select P.soc1, N.soc2, P.perc+N.perc
from newTable as N join possiede as P on N.soc1 = P.soc2); 
```

这是我的第一次尝试，但它给了我一个关于“引用”关键字的错误（“语法错误，意外 IDENT_QUOTED，期待 FOR_SYM”），我不确定翻译是否正确：

```
create trigger controllo
after insert on possiede
REFERENCING new table as newTable
for each row
begin
    insert into possiede (select P.soc1, N.soc2, P.perc+N.perc from
    newTable as N join possiede as P on N.soc1=P.soc2);
    if percent > 0.5 and (soc1,soc2) not in (select * from contr) then
    insert into contr values (soc1,soc2);
    end if;
end; 
```

正如您注意到的那样，由于某些 MySQL 限制，我不得不将两个触发器压缩为一个。谁能给我正确的翻译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:45:42.407

请将列名放在大括号内并使用`NEW_TABLE`. 此外，我认为这`IN CLAUSE within IF BLOCK`是不正确的，因为您正在检查两列（soc1 和 soc2）`select * from...`。请尝试使用更新后的查询，如下所示：

```
 CREATE TRIGGER controllo
  AFTER INSERT on possiede
  REFERENCING NEW_TABLE AS newTable
  FOR EACH ROW
   BEGIN
      INSERT INTO possiede (soc1, soc2, perc) 
      SELECT P.soc1, N.soc2, P.perc+N.perc 
      FROM newTable AS N JOIN possiede AS P ON N.soc1=P.soc2;
      IF percent > 0.5 and soc1 not in (select soc1 from contr)
          and soc2 not in (select soc2 from contr)
        THEN
          INSERT INTO contr VALUES (soc1,soc2);
      END IF;
    END; 
```

# maven - Maven tomcat插件依赖错误

> ID：13237290
> 
> 赞同：1
> 
> 时间：2012-11-05T17:30:39.370
> 
> 标签：maven, maven-tomcat-plugin

我有一个使用 1.1 版 tomcat maven 插件的完整项目。我试图切换到最后一个 maven tomcat 插件版本，在`pom.xml`：

```
<plugin>
            <groupId>org.apache.tomcat.maven</groupId>
            <artifactId>tomcat7-maven-plugin</artifactId>
            <configuration>
                <contextFile>src/main/webapp/META-INF/context.xml</contextFile>
            </configuration>
            <dependencies>      
                <dependency>
                    <groupId>mysql</groupId>
                    <artifactId>mysql-connector-java</artifactId>
                    <version>5.1.9</version>
                </dependency>
            </dependencies>
        </plugin> 
```

但是，使用`tomcat7:run`而不是`tomcat:run`我启动项目会收到以下错误：

```
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building group-organizer-server 1.0.0-BUILD-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] >>> tomcat7-maven-plugin:2.0:run (default-cli) @ group-organizer-server >>>
[INFO] 
[INFO] --- aspectj-maven-plugin:1.2:compile (default) @ group-organizer-server ---
[INFO] 
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ group-organizer-server ---
[debug] execute contextualize
[WARNING] Using platform encoding (MacRoman actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 1 resource 
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ group-organizer-server ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] <<< tomcat7-maven-plugin:2.0:run (default-cli) @ group-organizer-server <<<
[INFO] 
[INFO] --- tomcat7-maven-plugin:2.0:run (default-cli) @ group-organizer-server ---
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-parent/10/maven-parent-10.pom
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1:03.805s
[INFO] Finished at: Mon Nov 05 18:18:32 CET 2012
[INFO] Final Memory: 7M/81M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.tomcat.maven:tomcat7-maven-plugin:2.0:run (default-cli) on project group-organizer-server: Execution default-cli of goal org.apache.tomcat.maven:tomcat7-maven-plugin:2.0:run failed: Plugin org.apache.tomcat.maven:tomcat7-maven-plugin:2.0 or one of its dependencies could not be resolved: Failed to collect dependencies for org.apache.tomcat.maven:tomcat7-maven-plugin:jar:2.0 (): Failed to read artifact descriptor for org.apache.maven.doxia:doxia-sink-api:jar:1.0: Could not transfer artifact org.apache.maven:maven-parent:pom:10 from/to central (http://repo.maven.apache.org/maven2): No response received after 60000 -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1]     http://cwiki.apache.org/confluence/display/MAVEN/PluginResolutionException 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:06:22.013

昨天看起来 maven central 有一些问题。所以用 -U 再试一次

# java - 如何更新 ProgressDialog 片段

> ID：13237297
> 
> 赞同：2
> 
> 时间：2012-11-05T17:30:59.153
> 
> 标签：java, android, android-fragments, progressdialog

我需要从`AsyncTask`. 我知道如何使用 old 来做到这一点`ProgressDialog`，但现在这种显示对话框的方式已被弃用，我正在尝试对 Fragments 做同样的事情。

这是片段代码：

```
 public static class CustomProgressDialogFragment extends SherlockDialogFragment {

        static CustomProgressDialogFragment newInstance(Object... params){
            CustomProgressDialogFragment df = new CustomProgressDialogFragment();
            Bundle bundle = new Bundle();

            // Populate bundle with params (not shown)

            df.setArguments(bundle);
            return df;
        }

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            this.setCancelable(false);
            int style = DialogFragment.STYLE_NORMAL, theme = 0;
            setStyle(style,theme);
        }

        @Override
        public Dialog onCreateDialog(Bundle savedInstanceState) {
            Bundle bundle = this.getArguments();

            ProgressDialog dialog = new ProgressDialog(getActivity());

            // Get params from bundle and customize dialog accordingly (not shown)

            dialog.setCancelable(false);
            dialog.setIndeterminate(false);
            dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);

            return dialog;
        }
    } 
```

这就是我展示它的方式：

```
 FragmentTransaction ft = this.getSupportFragmentManager().beginTransaction();       
    CustomProgressDialogFragment dialogFragment = CustomProgressDialogFragment.newInstance(<My params here>);
    ft.disallowAddToBackStack();
    ft.add(dialogFragment, stringSet.tag);      
    ft.commitAllowingStateLoss(); 
```

现在我需要`incrementProgressBy`从 AsyncTask 调用对话框。有没有办法从 FragmentManager 检索底层对话框？这样做的正确方法是什么？（如果重新创建对话框，我不想泄露引用）。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T08:35:31.990

这可以实现调用[`DialogFragment.getDialog()`](http://developer.android.com/reference/android/support/v4/app/DialogFragment.html#getDialog%28%29)。`DialogFragment`可以像往常一样`FragmentManager.findFragmentByTag`检索.

# c# - BinaryFormatter 和反序列化。如何在流结束时停止？

> ID：13237303
> 
> 赞同：1
> 
> 时间：2012-11-05T17:31:29.780
> 
> 标签：c#, serialization, filestream

这可能可以通过 foreach 循环来完成。但是.. while / for 也应该工作。如果我有一个 MyClass 类，并且写了 100 个 MyClass 对象。反序列化时如何在文件末尾停止？提前致谢

```
FileStream inStr = new FileStream(@"file.dat", FileMode.Open);
BinaryFormatter bf = new BinaryFormatter();

MyClass myclass = new MyClass();

while (???) // What to put here? EOF / End of stream check
{
myclass = (MyClass)bf.Deserialize(inStr);
//...
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T17:35:02.663

如果您想保存和加载您`MyClass`为什么不保存 List 对象的列表。

### 节省

```
List<MyClass> list = new List<MyClass>();
// add to your list
FileStream stream = new FileStream(@"file.dat", FileMode.Create);
BinaryFormatter formatter = new BinaryFormatter();
formatter.Serialize(stream, list);
stream.Close(); 
```

### 加载

```
FileStream inStr = new FileStream(@"file.dat", FileMode.Open);
BinaryFormatter bf = new BinaryFormatter();
List<MyClass> list = bf.Deserialize(inStr) as List<MyClass>; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-12T08:44:51.823

也许试试这个：

```
while (inStr.Length != inStr.Position) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T17:34:17.710

我经常用

```
While(Stream.Peek != -1) 
```

# objective-c - 不理解块范围的示例

> ID：13237304
> 
> 赞同：2
> 
> 时间：2012-11-05T17:31:38.460
> 
> 标签：objective-c

在 Apple 块文档中是不要编写的代码示例：

```
void dontDoThisEither() {
  void (^block) (void);
  int i = random();
  if (i > 1000) {
    block = ^{printf("got i at: %d\n", i); };
  }
  // ...
} 
```

代码的注释说块文字范围是“then”子句。我不明白他们的意思，没有 then 子句，这大概就是他们将其放在引号中的原因。但是为什么他们把它放在引号中，与块的范围有什么关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:44:14.953

将 if 语句想象为： if *this* **then that** *else* **this other thing**

`{... block = ...}`是在语句的**那**部分。`if`也就是说，它是`dontDoThisEither()`函数作用域的一个子作用域。

因为块是在堆栈上创建的，并且仅在其声明范围内有效，这意味着该示例中的块分配*仅在语句的**then**范围内`if`*有效。

即考虑：

```
void dontDoThisEither() {
  void (^block) (void);
  int i = random();
  if (i > 1000) {
    block = ^{printf("got i at: %d\n", i); };
  }  else {
    block = ^{printf("your number is weak and small. ignored.\n");};
  }
  block();
} 
```

在`block();`执行时，它指向的块位于不再有效的范围内，并且行为将是未定义的（并且在现实世界的示例中可能会崩溃）。

# linux - 第二次调用 prctl() 不起作用

> ID：13237315
> 
> 赞同：1
> 
> 时间：2012-11-05T17:32:54.183
> 
> 标签：linux, process, fork

我尝试编写程序，实现下一个想法：启动后，使用fork（）的程序和：父进程在函数wait（）上停止（等待死亡子进程）；子进程使用 prctl(PR_SET_PDEATHSIG, SIGHUP) 和设置信号处理程序（它有助于检测父进程死亡）；在任何进程死亡后，程序再次使用 fork()。

```
void forking_process() {
  pid_t id;
  printf("forking_process is called!\n");
  if (id = fork())  {       
          parent_process_operation(); 
       } else {  
          child_process_operation();  
       }
}

void parent_process_operation() {
  int status = 0;
  printf("It's parent process! Pid = %d\n", (int)getpid());
  pid_t chid = wait(&status);
  printf("Terminated child process with PID = %d\n", chid);
  inform_about_parent_death(status);    
}

void child_process_operation() {
  printf("It's child process! pid = %d, ppid = %d\n", 
         (int)getpid(), (int)getppid());
  struct sigaction sa;
  memset(&sa, 0, sizeof(sa));
  sa.sa_handler = inform_about_parent_death;
  if (sigaction(SIGHUP, &sa, NULL)) 
        fprintf(stderr, "sigaction error\n");
  prctl(PR_SET_PDEATHSIG, SIGHUP);
  while(1) {
     printf("."); fflush(stdout);
     sleep(1);  
    }
 }

 void inform_about_parent_death(int i)  {
  printf("Process is dead. Restart!\n");
  forking_process();
 }

 int main (void) {
  forking_process();
  return EXIT_SUCCESS;
 } 
```

如果我运行此应用程序，并在另一个终端中杀死子进程 - 然后将创建子进程。如果我杀死父进程一次， - 信号处理程序启动并调用 fork()。如果我再次杀死父进程， - 信号处理程序没有响应。也就是说 - 第一个进程中的 prctl() 工作，但第二个子进程中的 prctl() 不起作用。为什么会发生？我怎样才能纠正它的程序？

# r - 具有颜色和大小属性的 hexbin 数据聚合

> ID：13237316
> 
> 赞同：1
> 
> 时间：2012-11-05T17:15:43.607
> 
> 标签：r, data-visualization

我有兴趣跨 2 个协变量（消费者属性和提供者属性）显示“大 n”序数比例调查响应信息。我正在使用 R 的 hexbin 包。我想让六边形的大小表示调查响应的数量和六边形的颜色来表示线性平均满意度响应。

我似乎找不到说明如何使用 hexbin 或其他现有软件包的文档。

编辑以获取更多说明：

我的数据结构如下：

```
csr_score pro_score rating
       15        16      8
       17        18     10
       19        12      4 
```

其中该数据帧的长度为 20,000 行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T19:14:05.933

您正在寻找的关键功能是`hexTapply`：

```
df <- data.frame (c = runif (1000), p = runif (1000), rating = rnorm (1000))
h <- hexbin (x=df$c, y = df$p, IDs = TRUE, xbins=5)
rating.binned <- hexTapply (h, df$rating, FUN=mean)

df.binned <- data.frame (c = h@xcm, p = h@ycm, freq = h@count, rating = rating.binned)
ggplot (df.binned, aes (x = c, y = p, col = rating, size = freq)) + geom_point () 
```

![在此处输入图像描述](../Images/17408bdd40528b6501801adf757460b0.png)

# jquery - 显示/隐藏 HTML 菜单

> ID：13237318
> 
> 赞同：0
> 
> 时间：2012-11-05T17:33:20.017
> 
> 标签：jquery, html

我有一个我创建的 HTML Jquery 菜单栏，我需要创建一个按钮来显示和隐藏菜单。

我认为我也可以在其中使用 JQUERY 通过单击菜单按钮来显示/隐藏菜单栏。

菜单栏就像这样 [http://codecanyon.net/theme_previews/2867525-jquery-dashboard-vertical-navigation?index=1](http://codecanyon.net/theme_previews/2867525-jquery-dashboard-vertical-navigation?index=1)

我在想我可以以某种方式将所有按钮折叠到顶部图标中？这可能吗？

**HTML**

```
<div class="sidebar">
    <div class="logo">
    </div>
    <ul>
        <li>
            <a href="#">Campaigns </a>
            <ul class="submenu">
                <li><a href="#">Sub Menu1</a></li>
                <li><a href="#">Sub Menu2</a></li>
            </ul>
        </li>
        <li>
            <a href="#">Links </a>
            <ul class="submenu">
                <li><a href="#">Sub Menu1</a></li>
                <li><a href="#">Sub Menu2</a></li>
            </ul>
        </li>
        <li>
            <a href="#">Media </a>
            <ul class="submenu">
                <li><a href="#">Sub Menu1</a></li>
                <li><a href="#">Sub Menu2</a></li>
            </ul>
        </li>
        <li><a href="#">History</a></li>
        <li>
            <a href="#">Messages </a>           
            <ul class="submenu">
                <li><a href="#">Sub Menu1</a></li>
                <li><a href="#">Sub Menu2</a></li>
            </ul>
        </li>
        <li>
            <a href="#">Maintenance </a>            
            <ul class="submenu">
                <li><a href="#">Sub Menu1</a></li>
                <li><a href="#">Sub Menu2</a></li>
            </ul>
        </li>
    </ul>
</div>

<div class="content">
    <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh     euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim     veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea     commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse     molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et     iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te     feugait nulla facilisi. Nam liber tempor cum soluta nobis eleifend option congue nihil     imperdiet doming id quod mazim placerat facer possim assum. Typi non habent claritatem     insitam; est usus legentis in iis qui facit eorum claritatem. Investigationes     demonstraverunt lectores legere me lius quod ii legunt saepius. Claritas est etiam     processus dynamicus, qui sequitur mutationem consuetudium lectorum. Mirum est notare quam     littera gothica, quam nunc putamus parum claram, anteposuerit litterarum formas humanitatis     per seacula quarta decima et quinta decima. Eodem modo typi, qui nunc nobis videntur parum     clari, fiant sollemnes in futurum.</p>
</div>

<script type="text/javascript"         src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<script type="text/javascript" src="js/custom.js"></script>
</body>
</html> 
```

**CSS** html { 高度：100%; }

```
body {
margin:0;
padding: 0;
height: 100%;
font-family: Arial;
font-size: 12px;
background: #f3f3f3;
}

*:focus {
border: none;
outline: none;
}

.content {
padding: 25px 25px 25px 250px;
}

.logo {
display: block;
text-indent: -9999px;
text-transform: capitalize;
background: url(../images/logo.png) no-repeat;
height: 90px;
}

.sidebar {
height: 100%;
min-height: 100%;
width: 213px;
background: url(../images/sidebarBg.png);
box-shadow: 0 0 8px #999;
float: left;
position: absolute;
top: 0;
}

/**  MENU  **/

ul {
margin: 0;
padding: 0;
list-style: none;
}

ul li {
background: url(../images/listBg.png) bottom no-repeat;
text-indent: 50px;
}

ul li a {
color: white;
display: block;
text-decoration: none;
padding: 21px;
width: 170px;
text-shadow: 1px 1px 0 #191b20;
position:relative;
}

ul li:hover {
background: url(../images/listBgGreen.png) no-repeat;
}

ul li a:hover, ul li:hover a {
color: white;
text-shadow: 1px 1px 0 #547829;
}

ul li a.dashboard {
background: url(../images/iconDashboard.png) 25px 50% no-repeat;
}

ul li a.pages {
background: url(../images/iconPages.png) 25px 50% no-repeat;
}

ul li a.media {
background: url(../images/iconMedia.png) 25px 50% no-repeat;
}

ul li a.history {
background: url(../images/iconHistory.png) 25px 50% no-repeat;
}

ul li a.messages {
background: url(../images/iconMessages.png) 25px 50% no-repeat;
}

ul li a.settings {
background: url(../images/iconSettings.png) 25px 50% no-repeat;
}

/**  SUB MENU  **/

ul li ul.submenu {
display: block;
z-index: 500;
top: 0;
}

ul li ul.submenu li {
background: url(../images/subMenuBg.png) bottom no-repeat;
}

ul li ul.submenu li a {
background: none;
padding: 13px;
width: 189px;
}

ul li ul.submenu li.last {
border-bottom: 1px solid #54575b;
background: url(../images/subMenuBg.png) top no-repeat;
}

ul li ul.submenu li.last a {
padding: 12px;
}

ul li:hover ul.submenu li a {
text-shadow: 1px 1px 0 black;
}

ul li ul.submenu li:hover {
background: url(../images/subMenuBgHover.png) bottom no-repeat;
}

/**  PIPS  **/

.pip {
display: block;
background: url(../images/pipBg.png);
padding: 3px 12px;
position: absolute;
top: 20px;
right: 25px;
color: white;
text-align: center;
text-indent: 0;
font-size: 10px;
border-top: 1px solid #1c1f23;
border-bottom: 1px solid #4c4f56;
border-radius: 30px;
-webkit-border-radius: 30px;
-moz-border-radius: 30px;
}

ul li:hover .pip {
background: url(../images/pipBgHover.png);
border-top: 1px solid #547829;
border-bottom: 1px solid #a4ce6b;

}

/**  SEARCH  **/

.search {
background: url(../images/listBg.png) no-repeat;
padding: 18px 15px;
width: 185px;
height: 29px;
}

.search input {
width: 125px;
padding: 7px 7px 7px 35px;
border:none;
margin: 0 0 0 10px;
background: #fff url(../images/search.png) 10px 50% no-repeat;
color: #808080;

box-shadow: inset 0 0 5px #ccc;
-webkit-box-shadow: inset 0 0 5px #ccc;
-moz-box-shadow: inset 0 0 5px #ccc;

border-radius: 30px;
-webkit-border-radius: 30px;
-moz-border-radius: 30px;
} 
```

**自定义.js**

```
$(document).ready(function() {

// Adds title attributes and classnames to list items

$("ul li a:contains('History')").addClass("dashboard").attr('title', 'Dashboard');
$("ul li a:contains('Links')").addClass("pages").attr('title', 'Pages');
$("ul li a:contains('Media')").addClass("media").attr('title', 'Media');
$("ul li a:contains('Campaigns')").addClass("history").attr('title', 'History');
$("ul li a:contains('Messages')").addClass("messages").attr('title', 'Messages');
$("ul li a:contains('Maintenance')").addClass("settings").attr('title', 'Settings');

// Add class to last list item of submenu

$("ul.submenu li:last-child").addClass("last");

$("ul li:has(ul)").hover(function(){
    $(this).find("ul.submenu").stop("true", "true").slideDown(500);
    }, function(){
    $(this).find("ul.submenu").stop("true", "true").slideUp(500);
});

}); 
```

希望这会有所帮助...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:58:23.383

固定...“显示：无；” 到菜单项

# vb.net - 在 VB.NET 中获取样式属性的特定部分

> ID：13237321
> 
> 赞同：0
> 
> 时间：2012-11-05T17:33:24.497
> 
> 标签：vb.net

如果我使用`.GetAttribute("style")`它并返回：

> 宽度：200 像素；高度：300 像素；背景图像：url（'http://someurl.com/image.png"）；位置：绝对；

我将如何获取背景图像 URL？

[编辑]我还应该提到背景图像时不时地变化，它不会保持不变。

[ 编辑 ] 我正在尝试从网络浏览器中的 bing 中提取背景图像。我想将背景设置为我的表单背景。

[编辑]

```
Try
            With bingCheck
                Dim bgDiv As HtmlElement = .Document.GetElementById("bgDiv")
                Dim imgUrl As String = bgDiv.Style("background-image").ToString

                Dim request As HttpWebRequest = DirectCast(HttpWebRequest.Create(imgUrl), HttpWebRequest)
                Dim response As Net.HttpWebResponse = DirectCast(request.GetResponse, Net.HttpWebResponse)
                Dim grabbedImage As Image = Image.FromStream(response.GetResponseStream)
                response.Close()

                Me.BackgroundImage = grabbedImage
                Me.Update()
            End With
        Catch ex As Exception
        End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:58:49.143

许多控件提供内置的样式集合。因此，您可以执行以下操作：

```
Dim sUrl As String = xMyControl.Style("background-image") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T19:33:08.430

```
Dim str = "width:200px;height:300px;background-image:url('http://someurl.com/image.png');position:absolute;"
Dim v = "background-image:url("
Dim i = str.IndexOf(v) + v.Length + 1
Dim j = str.IndexOf(")", i)
Dim url = str.Substring(i, j - i - 1) 
```

# javascript - 值不断返回未定义

> ID：13237323
> 
> 赞同：0
> 
> 时间：2012-11-05T17:33:49.513
> 
> 标签：javascript, web, prototype

不知道为什么我对这个结果一直不确定，任何帮助都会很棒。结果假设为以 x 值开头的数组。谢谢

```
var tester = [1,2,4];
Array.prototype.cons = function(x){
    function reduce(results,y){
        if(y == 1){
            results.unshift(x);
            return results;
        }
        else{
            results.push(this[y-1]);
            y = y-1;
            reduce(results, y);
        }
    }
    return reduce([], this.length);
}
document.getElementById('test').innerHTML = tester.cons(0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:44:18.183

你设计了你的`reduce`函数来*返回*结果，但是在你对它的递归调用中

```
else{
    results.push(this[y-1]);
    y = y-1;
    reduce(results, y);  // <--- HERE
} 
```

您没有对返回的值做任何事情（例如将其返回堆栈）。这意味着评估会继续您的功能，在其底部没有`return`声明。在 JavaScript 中，没有 return 语句意味着函数调用的返回值将是`undefined`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:47:49.713

如果您只是想将数组中的元素移到前面，则可以简单地使用它而不是递归地遍历数组。

```
var tester = [1,2,4];
Array.prototype.cons = function(x){
    // Copy the array. This only works with simple vars, not objects
    var newArray = this.slice(0);        

    // Check to make sure the element you want to move is in the array
    if (x < this.length) {
        // Remove it from the array
        var element = newArray.splice(x, 1);
        // Add to the beginning of the array
        newArray.unshift(element);
    }
    return newArray;
}
document.getElementById('test').innerHTML = tester.cons(4)​;​ 
```

编辑：制作了数组的副本

# multithreading - 线程中的无效句柄错误

> ID：13237325
> 
> 赞同：0
> 
> 时间：2012-11-05T17:33:52.180
> 
> 标签：multithreading, delphi

当我尝试使用此线程时，我不断收到“线程错误：句柄无效 (6)”，但我看不到问题。可以的话请帮忙，谢谢！

stackoverlow 抱怨我解释得不够充分。所以，我创建了一个线程类，它编译时没有任何错误，但是当我用执行调用它时，它似乎运行正常，但在析构函数中抛出了这个错误。

```
 tdownloadthread = class(tthread)
    private
      furl,
      ffilename,
      fmsg: string;
      fdl: tidhttp;
      readings,bpstotal,avgbps: int64;
      fpercent: word;
      fsuccess,fcanceled: boolean;
      start: tdatetime;
      fspeed,fremaining: string;
    public
      constructor create(url,filename: string);
      destructor destroy; override;
      procedure execute; override;
      procedure DlWork(ASender: TObject; AWorkMode: TWorkMode; AWorkCount: Int64);
      procedure cancel;

      property success: boolean read fsuccess;
      property canceled: boolean read fcanceled;
      property speed: string read fspeed;
      property percent: word read fpercent;
      property remaining: string read fremaining;
      property msg: string read fmsg;
  end;

constructor tdownloadthread.create(url,filename: string);
begin
  fsuccess:=false;
  fcanceled:=false;

  fdl:=tidhttp.Create(nil);
  fdl.OnWork:=dlwork;
  fdl.HandleRedirects:=true;

  furl:=url;
  ffilename:=filename;

  freeonterminate:=false;
end;

destructor tdownloadthread.Destroy;
begin
  fdl.Free;
end;

procedure tdownloadthread.cancel;
begin
  fdl.Disconnect;
  fcanceled:=true;
end;

procedure tdownloadthread.DlWork(ASender: TObject; AWorkMode: TWorkMode; AWorkCount: Int64);
var
  Http: TIdHTTP;
  ContentLength: Int64;
  i,h,m,esec,sec,rsec,bps: Integer;
  f: tdatetime;
begin
  Http := TIdHTTP(ASender);
  ContentLength := Http.Response.ContentLength;

  if (Pos('chunked', LowerCase(Http.Response.ResponseText)) = 0) and
     (ContentLength > 0) then
  begin
    fpercent := trunc(100*(AWorkCount / ContentLength));

    esec := secondsbetween(now, start);

    if (avgbps > 0) then
     begin
       i:=contentlength div avgbps;
       f:=incsecond(now, i);
       rsec:=secondsbetween(now, f);

       sec:=rsec - esec;

       h:=sec div 3600;
       m:=sec div 60 - H * 60;
       sec:=sec - (H * 3600 + M * 60) ;
    end;

    if (esec > 0) then
      bps:=(aworkcount div esec)
       else
      bps:=0;

    inc(readings);
    inc(bpstotal, bps);
    avgbps:=bpstotal div readings;

    if (avgbps / 1024 < 1024) then
      fspeed:=format('%2f KB/s', [avgbps / 1024])
       else
      fspeed:=format('%2f MB/s', [(avgbps div 1024) / 1024]);

    fremaining:=format('%s m %s s', [zero(m), zero(secno)]);
  end;
end;

procedure tdownloadthread.Execute;
var fn,cd: string;
    data: tmemorystream;
begin
  try
    start:=now;

    data:=tmemorystream.Create;

    fdl.Get(furl, data);
    cd:=fdl.Response.ContentDisposition;
    if (pos('filename=', cd) > 0) then
      fn:=extractfilepath(paramstr(0))+copy(cd, pos('=', cd)+1, length(cd))
         else
      fn:=ffilename;
    data.SaveToFile(fn);
    ffilename:=fn;
    fsuccess:=true;

    data.Free;
  except
    on e: exception do
      begin
        fsuccess:=false;
        fmsg:=e.Message;
      end;
  end;
end;

procedure testdownload;
var downloadthread: tdownloadthread;
begin
  downloadthread:=tdownloadthread.create('http://www.someurl.com/filename.old',extractfilepath(paramstr(0))+'filename.new');
  downloadthread.Execute;
  if downloadthread.canceled then showmessage('canceled');
  if downloadthread.success then showmessage('success');
  if not downloadthread.success then showmessage('error: '+downloadthread.msg);
  downloadthread.Free;
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T17:41:15.953

您忘记为 TThread 调用继承的 ctor：

```
constructor tdownloadthread.create(url,filename: string);
begin
  inherited create(true); // construct TThread
  fsuccess:=false;
  fcanceled:=false;

  fdl:=tidhttp.Create(nil);
  fdl.OnWork:=dlwork;
  fdl.HandleRedirects:=true;

  furl:=url;
  ffilename:=filename;

  freeonterminate:=false;
  resume; // actually run thread
end; 
```

此外，正如@LU RD 所指出的，无需直接调用 TThread 实例的 Execute() 方法 - 线程由操作系统直接执行。

至于释放它，有一些选择。按优先顺序：

1）根本不要释放它。如果您打算在应用程序运行期间进行多次下载，请将线程循环到生产者-消费者队列弹出，以便可以重新使用该线程来下载更多文件，而无需尝试释放它。

2) 在 try/finally 中释放其内部资源（例如 TidHTTP 实例）后，让线程实例释放自身（freeOnTerminate=true）。

-999999) 使用 OnTerminate 处理程序或任何其他可怕的 Delphi TThread 东西，如 TThread.WaitFor。

# java - 使用 HTML/JS/AJAX/Java 开发基于浏览器的多人纸牌游戏

> ID：13237330
> 
> 赞同：4
> 
> 时间：2012-11-05T17:33:56.127
> 
> 标签：java, javascript, jquery

我目前有一个用 Java 开发和工作的多人纸牌游戏，它正在控制台中工作。该游戏的格式类似于桥牌和黑桃，但没有竞标过程。这是一个四人游戏，玩家轮流玩牌。

我目前正在努力将其转换为基于浏览器的 web 应用程序，并添加 Spring MVC，并使用 HTML、JavaScript 和 AJAX 进行 UI 和与后端的通信。我有一个很好的想法，我想让它在单人游戏中对抗 AI，允许用户使用他们的卡片并使用 AJAX 调用从服务器获取接下来的三个游戏。

但是，我想知道我需要采取什么样的方法才能使它成为多人游戏。我看到了一些我不熟悉的对“套接字编程”的引用，但这些似乎围绕 Java 小程序，而不是基于浏览器的应用程序。

基本上，我正在寻找一种方法来确保当用户开始游戏并且其他人加入时，我如何确保他们连接到同一个游戏，并且能够看到彼此的游戏？我现在在为单人游戏完全开发 UI 之前问这个问题，因为我想避免完全重新设计以支持多人游戏功能。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T17:49:48.193

由于您正在创建多人游戏，因此您需要至少有一台服务器供您的客户端连接。由于您希望基于此浏览器，您很可能需要自己的服务器（而不是让其中一个客户端成为服务器）。当用户加入游戏时，它会登录到该用户所在的服务器上。当玩家执行动作时，服务器会处理该动作，然后向连接到该房间的每个其他客户端发送通知。此时客户端 UI 会更新。

过去，您无法使用纯 HTML / JavaScript 执行此操作，因为您无法打开套接字。这意味着，服务器无法通知客户端。但是在 HTML5 中，您应该能够使用 WebSockets 来实现您在中间使用服务器所做的事情。[WebSocket API](http://dev.w3.org/html5/websockets/)

但是，如果您不想使用 HTML5 WebSockets，还有另一种在 JavaScript 中模仿 Sockets 的技术。也就是说，服务器可以与客户端对话。这种技术称为长轮询。客户端向服务器发送请求以请求更新，如果没有可用的更新，服务器将保留该请求，直到有可用的更新并将其发送回客户端，此时他们再次发出更新请求。[简单的长轮询示例](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery)

另一种选择，如果您非常熟悉 Java，您可能希望查看[Google Web Toolkit](https://developers.google.com/web-toolkit/)。GWT 是 Java 的一个子集，它被编译为前端的 HTML 和 JavaScript，如果需要，可以创建一个服务器端 java 可执行文件，您可以将其与 TomCat 或其他 Web 服务一起使用。在此选项中，您有一些库允许您编写将编译为长轮询 JavaScript 的套接字样式代码。

祝你好运！

# android - 暂停或退出安卓游戏

> ID：13237333
> 
> 赞同：0
> 
> 时间：2012-11-05T17:34:16.423
> 
> 标签：android, game-engine, onpause

我正在开发一款包含所有典型内容的 Android 游戏：游戏循环、渲染器、面板……

问题是当我退出游戏时，它总是崩溃......我认为这是因为我没有正确停止游戏循环并且它继续。另外，当我“最小化”游戏或将手机切换为待机时，我想暂停它。

我应该在 onPause 和 onDestroy 中添加什么？

我只有这个：

```
@Override
public void surfaceDestroyed(SurfaceHolder holder) {

    super.surfaceDestroyed(holder);

    //Stop game loop:
    loop.setRunning(false);

    boolean retry = true;
    while (retry) 
    {           
        try 
        {
            //gameLoop.join();
            loop.stop();
            retry = false;
        } 
        catch (Exception e) 
        {
            // try again shutting down the thread
        }
    }
} 
```

但这还不够，只是为了退出。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:03:40.823

为了确保您的应用程序行为“正常”（通常意味着它按照您希望的方式运行），您应该覆盖包含游戏循环的活动中的`onPause()` and方法。`onResume()`鉴于您实际上并没有提供太多其他代码，因此您只是忘记实现这是有道理的。

例如，这里有一些抽象的伪代码来实现你的目标：

```
protected void onPause(){

   //Save the game state
   //Pause the game loop
   //Save any other data that need to be persistent throughout sessions
}

protected void onResume(){

   //Reinitialize game state
   //Reinitialize any other persistent data
   //Resume the game loop
} 
```

如果您以前从未开发过 Android 应用程序，这很容易被忽略，这是可以理解的。

有关 Android 活动状态的更多说明，请参阅[此](http://developer.android.com/images/activity_lifecycle.png)图片，取自 Android[活动](http://developer.android.com/reference/android/app/Activity.html)文档。

# c# - 文本框文本删除最后一个字符

> ID：13237336
> 
> 赞同：0
> 
> 时间：2012-11-05T17:34:24.653
> 
> 标签：c#, .net

如果字符串> 8，我需要删除最后一个字符

这怎么可能？

```
private void textBoxNewPassword_TextChanged(object sender, EventArgs e)
{
    if (textBoxNewPassword.TextLength == 9)
        textBoxNewPassword.Text = textBoxNewPassword.Text.Remove((textBoxNewPassword.Text.Length - 1), 1);
} 
```

该代码似乎什么也没做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:35:20.837

取一个 8 个字符的子字符串：

```
textBoxNewPassword.Text = textBoxNewPassword.Text.Substring(0, 8); 
```

更好的是，将`MaxLength`您的属性设置`TextBox`为 8。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T17:35:32.240

使用[String.Substring Method (Int32, Int32)](http://msdn.microsoft.com/en-us/library/aka44szs.aspx)，其中第一个参数是起始索引，第二个参数是字符数。此外，如果您需要检查长度是否大于 8，请执行以下操作：

```
if (textBoxNewPassword.Text.Length > 8)
    textBoxNewPassword.Text = textBoxNewPassword.Text.SubString(0,8); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T17:56:16.763

您使用 of 的精神`Remove()`并没有错，但是您忘记了 of 的第一个参数`Remove(int, int)`是[从零开始的](http://msdn.microsoft.com/en-us/library/d8d7z2kk.aspx)。因此，当您在`if`语句中确定长度为 9 时（在大多数情况下`TextBoxBase.TextLength`仅覆盖`TextBoxBase.String.Length`- 但不是所有情况），当您位于第 8 位时，您正在处理字符串中的最后一个字符。`Remove`如果您使用过，您的代码会起作用反而：

```
textBoxNewPassword.Text = textBoxNewPassword.Text.Remove((textBoxNewPassword.Text.Length - 2), 1); 
```

但我想每个人都同意这个`Substring`解决方案更干净、更不脆弱。我只提到这一点，所以我们可以理解为什么它显然一开始什么也没做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T17:39:54.587

完全按照您的问题进行操作

```
 private void textBoxNewPassword_TextChanged(object sender, EventArgs e)
    {
        if (textBoxNewPassword.Text.Length > 8)
        {
            textBoxNewPassword.Text = textBoxNewPassword.Text.Substring(0, textBoxNewPassword.Text.Length - 1);
        }
    } 
```

您说您只想删除超过 8 个字符的最后一个字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T17:44:40.107

这是一个可能的通用解决方案。

```
static void Main(string[] args)
    {
        string text = "The max length is seven".RemoveChars(7);

    }

    public static string RemoveChars(this string text, int length)
    {
        if (!String.IsNullOrEmpty(text) && text.Length > length)
            text = text.Remove(length, text.Length - length);
        return text;
    } 
```

希望这有帮助。

# java - 弹簧布局中的水平线

> ID：13237341
> 
> 赞同：1
> 
> 时间：2012-11-05T17:34:50.683
> 
> 标签：java, swing, layout, springlayout, jseparator

我有一个程序，在一个面板中有一堆字段，包括标签和文本字段。我需要用一条线以某种方式将它们分开，以便于阅读。

我的面板是用`SpringLayout`. `SpringLayout`我想知道是否有一种简单的方法可以在不将面板分成 2 部分的情况下 创建一条水平线，并在它们之间添加一个分隔面板。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T17:56:02.050

我认为最佳做法是创建另一个`JPanel`，但如果我正确理解了您的问题，也许可以创建一个替代方案`JSeparator`：

```
JSeparator separator = new JSeparator(SwingConstants.HORIZONTAL);
separator.setPreferredSize(new Dimension(200,3)); 
```

# android - Android - 检查请求是 GET 还是 POST

> ID：13237347
> 
> 赞同：5
> 
> 时间：2012-11-05T17:35:11.620
> 
> 标签：android, post, get, request, webviewclient

我需要在我的 Android 应用程序的 shouldInterceptRequest 中检查请求是 POST 还是 GET。请参见下面的代码：

```
public class CustomWebViewClient extends WebViewClient {

    ...

    @Override
    public WebResourceResponse shouldInterceptRequest(WebView view, String url) {
        if ("request is POST")
            Log.d("CustomWebViewClient", "request is a POST");
        else if ("request is GET")
            Log.d("CustomWebViewClient", "request is a GET");

        ...
    }
} 
```

是否可以在 WebViewClient 的扩展中确定这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-12T00:58:43.563

可以通过扩展 WebViewClient 来实现，但它可能涉及比您预期更多的工作。WebViewClient 中的回调方法由 JNI 调用，您无法调用它来获取标头和方法，因此最好的选择是使用 JavaScript。

该解决方案基于 kristof 对[http://code.google.com/p/android/issues/detail?id=9122#c21的评论](http://code.google.com/p/android/issues/detail?id=9122#c21)

## 1\. 创建一个名为 post_interceptor.js 的文件并放在 res/raw

### post_interceptor.js

```
HTMLFormElement.prototype._submit = HTMLFormElement.prototype.submit;
HTMLFormElement.prototype.submit = interceptor;

window.addEventListener('submit', function(e) {
    interceptor(e);
}, true);

function interceptor(e) {
var frm = e ? e.target : this;
    interceptor_onsubmit(frm);
    frm._submit();
}

function interceptor_onsubmit(f) {
    var jsonArr = [];
    for (i = 0; i < f.elements.length; i++) {
        var parName = f.elements[i].name;
        var parValue = f.elements[i].value;
        var parType = f.elements[i].type;

        jsonArr.push({
            name : parName,
            value : parValue,
            type : parType
        });
    }

    window.interception.customSubmit(JSON.stringify(jsonArr),
            f.attributes['method'] === undefined ? null : f.attributes['method'].nodeValue,
            f.attributes['enctype'] === undefined ? null : f.attributes['enctype'].nodeValue);
}

lastXmlhttpRequestPrototypeMethod = null;
XMLHttpRequest.prototype.reallyOpen = XMLHttpRequest.prototype.open;
XMLHttpRequest.prototype.open = function(method, url, async, user, password) {
    lastXmlhttpRequestPrototypeMethod = method;
    this.reallyOpen(method, url, async, user, password);
};
XMLHttpRequest.prototype.reallySend = XMLHttpRequest.prototype.send;
XMLHttpRequest.prototype.send = function(body) {
    window.interception.customAjax(lastXmlhttpRequestPrototypeMethod, body);
    lastXmlhttpRequestPrototypeMethod = null;
    this.reallySend(body);
}; 
```

## 2\. 创建一个名为 JavascriptPostIntercept 的 Java 类

根据需要更改包/类名称。

### JavascriptPostIntercept.java

```
public class JavascriptPostIntercept {

    public interface JavascriptPostInterceptInterface {
        public void nextMessageIsAjaxRequest(AjaxRequestContents contents);
        public void nextMessageIsFormRequest(FormRequestContents contents);
    }

    private static String sInterceptHeader;

    private JavascriptPostInterceptInterface mClient;

    public static String getInterceptHeader() {
        if (sInterceptHeader == null) {
            // Assuming you have your own stream to string implementation
            sInterceptHeader = StringUtils.readInputStream(
                Resources.getSystem().openRawResource(R.raw.post_interceptor));
        }
        return sInterceptHeader;
    }

    public static class AjaxRequestContents {
        private String mMethod;
        private String mBody;

        public AjaxRequestContents(String method, String body) {
            mMethod = method;
            mBody = body;
        }

        public String getMethod() {
            return mMethod;
        }

        public String getBody() {
            return mBody;
        }
    }

    public static class FormRequestContents {
        private String mJson;
        private String mMethod;
        private String mEnctype;

        public FormRequestContents(String json, String method, String enctype) {
            mJson = json;
            mMethod = method;
            mEnctype = enctype;
        }

        public String getJson() {
            return mJson;
        }

        public String getMethod() {
            return mMethod;
        }

        public String getEnctype() {
            return mEnctype;
        }
    }

    public JavascriptPostIntercept(JavascriptPostInterceptInterface client) {
        mClient = client;
    }

    @JavascriptInterface
    public void customAjax(final String method, final String body) {
        mClient.nextMessageIsAjaxRequest(new AjaxRequestContents(method, body));
    }

    @JavascriptInterface
    public void customSubmit(String json, String method, String enctype) {
        mClient.nextMessageIsFormRequest(new FormRequestContents(json, method, enctype));
    }
} 
```

## 3\. 创建你的 WebViewClient 子类

下面的代码仅获取最新请求的 HTTP 方法，这看起来足以满足您的要求，但显然 AjaxRequestContents 和 FormSubmitContents 上的其他方法将使您能够访问帖子正文和其他内容（如果需要）。

```
class MyWebViewClient extends WebViewClient implements JavascriptPostIntercept.JavascriptPostInterceptInterface {
    private String mLastRequestMethod = "GET";

    /// evaluate post_interceptor.js after the page is loaded
    @Override
    public void onPageFinished(WebView view, String url) {
        view.loadUrl("javascript: " + JavascriptPostIntercept.getInterceptHeader());
    }

    @TargetApi(11)
    @Override
    public WebResourceResponse shouldInterceptRequest(WebView view, String url) {
        if (mLastRequestMethod.equals("POST")) {
            // do stuff here...
        } else if (mLastRequestMethod.equals("GET")) {
            // do other stuff here...
        }
        // return something here...
    }

    @Override
    public void nextMessageIsAjaxRequest(JavascriptPostIntercept.AjaxRequestContents contents) {
        mLastRequestMethod = contents.getMethod();
    }

    @Override
    public void nextMessageIsFormRequest(JavascriptPostIntercept.FormRequestContents contents) {
        mLastRequestMethod = contents.getMethod();
    }
} 
```

## 4\. 创建合适的 JS-Java 链接

```
MyWebViewClient webViewClient = new MyWebViewClient();
mWebView.setWebViewClient(webViewClient);
mWebView.addJavascriptInterface(new JavascriptPostIntercept(webViewClient), "interception"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-20T15:56:08.520

的覆盖`shouldInterceptRequest(WebView view, WebResourceRequest request)`方法`WebViewClient`。

例如

```
@Override
public WebResourceResponse (WebView view, WebResourceRequest request) {
    Log.i("shouldInterceptRequest", "method:" + request.method)
} 
```

# sql-server-2008 - 使用复杂条件在同一服务器中的两个数据库之间检查和传输数据

> ID：13237352
> 
> 赞同：0
> 
> 时间：2012-11-05T17:35:22.883
> 
> 标签：sql-server-2008, dts

源 DB1.TB1 [ `ID, EAN, ASIN, NAME, CONDITION`]

```
 1,1001,20001,ps2,COD2,new
 2,1002,20002,xbox,HOLA,new
 3,1003,20003,xbox,Spider Man,used 
```

和 DB1.TB2 [ `ID, PRICE`]

```
 1,50 
 2,51
 3,61 
```

目标 DB2.TB1 [ `ID2, KID, EAN, GROUP, NAME, CONDITION, PRICE, DATE`]

```
 1,0013,10001,ps2,COD2,new
         2,0015,10002,xbox,HOLA,new
         3,0016,10003,xbox,Spider Man,used 
```

现在我需要在某些条件下将数据从源表传输到目标表：

*   `ID`两个表的 DB1 相同，`KID`是我们在组织中引用的实际“ID”。没有此 ID 的每个项目都应更新为`kID_max + 1`.

*   每件商品的运费取决于其`KID`名称。所以产品也必须按照这个分类，这取决于名称索引，例如 ps2 或 xbox。

作为一个初学者，这似乎太复杂了，我想知道一些关于如何解决这个问题的信息。

注意：DB1 中的表会定期更新，因此 DB2 表也必须相应地定期更新。

# objective-c - 如何调整 UILabel 的大小以适应内容？

> ID：13237353
> 
> 赞同：0
> 
> 时间：2012-11-05T17:35:27.053
> 
> 标签：objective-c, ios, xcode, uilabel

我的程序目前有 30 个 UILabel，其中可能包含一到三位数之间的数字。我希望我的 UILabel 在它们中的数字改变大小时水平扩展和收缩。目前文本正在缩小，UILabels 大小保持不变。

如果这可以仅使用 xib 文件来完成，那么这将比以编程方式完成更好，但如果这不可能，那也很好。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T17:38:41.787

设置好标签的文字后，在标签上调用`sizeToFit`。这将使标签足够大以容纳文本。

顺便说一句 - 你为什么需要这样做？为什么不让标签足够大以容纳可能的值并保留它们的大小？您认为缩小标签会带来什么好处？

# javascript - 如何将索引列添加到 Datatable？

> ID：13237355
> 
> 赞同：2
> 
> 时间：2012-11-05T17:35:30.870
> 
> 标签：javascript, datatables, ruby-on-rails-plugins

我想为我的数据表中的每一行添加一个行号。我正在使用来自[http://datatables.net](http://datatables.net)的插件告诉如何添加索引的页面是[http://datatables.net/release-datatables/examples/api/counter_column.html](http://datatables.net/release-datatables/examples/api/counter_column.html)

...但是我不知道如何实际实现它以使其工作。我对 jquery / javascript 知之甚少，这在这种情况下会有所帮助。我不知道把这段代码放在哪里让它工作（如果它有帮助，我也在使用 Ruby on Rails）

初始化代码为：

```
jQuery ->
  $('#staffs').dataTable
    sPaginationType: "full_numbers"
    bJQueryUI: true
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T18:18:06.963

这是来自 datatables.net 站点[DataTables 行号示例的示例](http://datatables.net/examples/api/counter_column.html)

```
$(document).ready(function() {
    $('#staffs').dataTable( {
        sPaginationType: "full_numbers",
        bJQueryUI: true,
        "fnDrawCallback": function ( oSettings ) {
            /* Need to redo the counters if filtered or sorted */
            if ( oSettings.bSorted || oSettings.bFiltered )
            {
                for ( var i=0, iLen=oSettings.aiDisplay.length ; i<iLen ; i++ )
                {
                    $('td:eq(0)', oSettings.aoData[ oSettings.aiDisplay[i] ].nTr ).html( i+1 );
                }
            }
        },
        "aoColumnDefs": [
            { "bSortable": false, "aTargets": [ 0 ] }
        ],
        "aaSorting": [[ 1, 'asc' ]]
    } );
} ); 
```

* * *

关于你的`SyntaxError: reserved word "function" on line 4 (in /home/ubuntu/ruby/scoreboard/app/assets/javascripts/staffs.js.coffee)'`错误

看看这个[rails，用咖啡脚本得到语法错误](https://stackoverflow.com/questions/10188363/rails-getting-syntax-error-with-coffee-script)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T19:02:01.300

jquery 是 javascript。您需要添加丹尼尔粘贴的代码

```
<script language="javascript"> 
```

和

```
</script> 
```

标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-28T13:39:37.730

我正在使用最新的 dataTable 1.10 和 gem [rails datatable 和](https://github.com/antillas21/ajax-datatables-rails) ajx

查找 DataTable 行号（序列号）

`def data outer = [] records.each_with_index do |record, index| outer << [ # comma separated list of the values for each cell of a table row # example: record.attribute, index + 1 + params[:start].to_i, record.company_name, record.id, record.patients.count, record.revenue_total ] end outer end`

# c# - 当我单击一行中的任意位置时，我可以在服务器端使用哪个 gridview 事件？

> ID：13237361
> 
> 赞同：0
> 
> 时间：2012-11-05T17:36:32.413
> 
> 标签：c#, asp.net, gridview

我在 gridview 行中有一个 onclientclick 事件，但是当我单击行上的任意位置时，我想调用服务器端方法。在不使用额外列 + 选择按钮 + onselectedindexchanged 的​​情况下，我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:44:29.027

我不确定您到底想在这里完成什么，但我认为您根本不需要使用网格视图事件。我假设您将使用一些 javascript 来处理行中任意位置的点击是否正确？您可以在现有列之一中放置一个 asp 链接按钮，使用 CSS 将其隐藏，使其不可见。然后让你的javascript点击按钮。然后链接按钮可以像平常一样拥有自己的支持方法。

您可能希望链接按钮执行命令而不是 onClick，以便您可以传递行索引或数据项 ID 的命令参数。

那会处理你的情况吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T17:43:43.050

我不认为有任何事件可以按原样使用。

您可能希望在 javascript/JQuery 中编写自定义函数以发布到您的 URL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T17:46:54.063

添加一个带有服务器端按钮单击处理程序的按钮。如果您不希望它可见，请使用 css 隐藏它 ( `display: none;`)。然后，您可以为您的 GridView 表连接一个客户端单击处理程序，`<tr>`并让它触发按钮的单击事件。

网格视图中的按钮：

```
<asp:LinkButton runat="server" CssClass="row-button" OnClick="ServerSideClickHandler" Text="Click me"/> 
```

CSS隐藏你的按钮：

```
.row-button { display: none; } 
```

使用 jQuery 的客户端处理程序：

```
$(document).ready(function() {
  $("tr").click(function() {
    $(".row-button", this).click();
  });
}); 
```

# javascript - 带有命名空间的 DOM 注入

> ID：13237364
> 
> 赞同：0
> 
> 时间：2012-11-05T17:36:52.427
> 
> 标签：javascript

我知道扩展 DOM 元素是一种不好的做法。但我想知道是否可以将方法注入命名空间下的特定元素。以下示例说明了我的意思。

```
var element = document.getElementById('my-element');

var inject = function (element) { 
    var nameSpace = element.nameSpace = {};
    nameSpace.method1 = function () {
        //do something
    }
    nameSpace.method2 = function () {
        //do something
    }
}

inject(element); 
```

这可以接受吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:49:30.377

我不确定扩展元素是您正在寻找的东西，而是从将侦听器添加到这些元素的代码的角度来看待它。

但是，放置这些处理程序的地方是命名空间的好地方。

例如：

```
var myNS = {};
myNS.count = 0;
myNS.method1 = function(){
  var out = document.getElementById("out");
  out.innerHTML = "Clicked " + myNS.count++ + " times!";        
};

window.onload = function(){
    var elem = document.getElementById('my-element');
    elem.addEventListener('click',myNS.method1, false);
};​ 
```

（请参阅此 jsFiddle 示例：http: [//jsfiddle.net/mori57/3CjEW/](http://jsfiddle.net/mori57/3CjEW/)）

# c# - 如何获取父方法名称？

> ID：13237365
> 
> 赞同：0
> 
> 时间：2012-11-05T17:36:53.270
> 
> 标签：c#, reflection, nunit

我正在使用 NUnit 和 Selenium WebDriver 编写 Web 测试。在每次测试结束时，我想获取浏览器的屏幕截图并保存图像。我希望图像名称与`Test`名称相同。但我无法获得测试方法名称。

下面是测试方法：

```
[Test]
public void AbcTest_ShouldPass()
{
    Assert.AreEqual(true, true);
} 
```

这`TearDown`是在每个之后运行的`Test`：

```
[TearDonw]
[MethodImpl(MethoImplOptions.NoInlining)]
public void TestCleanupNunit()
{
    var methodName = new List<string>();
    for (int i = 0; i < 30; i++)
        methodName.Add(i.ToString() + " is " + new StackTrace(i, true).GetFrame(0).GetMethod().Name);

} 
```

但是当我看的时候`methodName`，我找不到`AbcTest_ShouldPass`。

```
0 is TestCleanupNUnit
1 is InvokeMethod
2 is UnsafeInvokeInternal
3 is Invoke
4 is Invoke
5 is InvokeMethod
6 is InvokeMethod
7 is RunTearDown
8 is RunTest
9 is RunTest
10 is RunRepeatedTest
11 is RunTestInContext
12 is Run
13 is RunAllTests
14 is RunSuite
15 is RunSuiteInContext
16 is Run
17 is Run
18 is RunAllTests
19 is RunSuite
20 is RunSuiteInContext
21 is Run
22 is RunAllTests
23 is RunSuite
24 is RunSuiteInContext
25 is Run
26 is RunAllTests
27 is RunSuite
28 is RunSuiteInContext
29 is Run 
```

我看了这篇[文章](https://stackoverflow.com/questions/1310145/get-calling-function-name-from-called-function-in-c-sharp)，但它对我没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:21:12.673

Nunit Framework 提供 CurrentContext，它是 NUnit.Framework.TestContext 的成员。

TestContext.CurrentContext.Test.Name 将返回正在执行的测试的名称，而 TestContext.CurrentContext.Test.FullName 将返回从命名空间名称开始的完全限定名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:42:08.760

是的，因为您的测试不会调用测试拆解。测试运行程序调用您的测试用例，然后依次关闭测试。换句话说，您的测试用例方法调用与拆解位于堆栈跟踪的不同分支中。

您需要在某个地方的测试夹具中缓存您的方法名称。也许是一个私有成员变量，您在每个测试用例的方法中设置该变量。这不是很优雅，但这是我目前能想到的唯一方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T17:42:26.817

不幸的是，单元测试的 Setup 和 Teardown 方法不是作为同步调用堆栈的一部分运行的，而是由测试引擎处理的。因此，从 Teardown 方法观察到的调用堆栈将不包含作为测试的一部分运行的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T17:52:59.410

您可以只使用一个私有方法来保存您在每次测试结束时调用的屏幕截图，而不是让它在测试中拆除。然后您的堆栈跟踪将包含您所期望的测试用例方法。

我同意这种方法并不完美，因为您必须记住将其添加到每个测试用例中，但至少它是通用的并且不涉及硬编码字符串中的方法名称。

# android - Android 在 Web 视图中加载图像

> ID：13237366
> 
> 赞同：1
> 
> 时间：2012-11-05T17:36:55.303
> 
> 标签：android, webview, pinchzoom

我正在尝试使用 Web 视图来使用图像的捏合和缩放，就像在画廊中一样。

```
String imageUrl = "file:///local/dir/image.jpg"; // http://example.com/image.jpg
WebView wv = (WebView) findViewById(R.id.yourwebview);
wv.getSettings().setBuiltInZoomControls(true);
wv.loadUrl(imageUrl); 
```

XML

```
<WebView android:id="@+id/yourwebview"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent" /> 
```

现在，如果我想引用 res\drawable-hdpi 文件夹中的图片大象.jpg。我怎样才能在活动中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:54:33.963

如果它在资源文件夹中，则需要将资源可绘制对象转换为位图，然后将位图写出。[这](https://stackoverflow.com/a/3036187/1269727)是转换为位图的方法，您可以轻松地将其写入内部存储。

如果您只是想显示带有缩放等功能的图片，您可能想尝试以下操作：

```
Intent i = new Intent(ACTION_VIEW);
i.setDataAndType(imageUri, "image/*");
startActivity(i); 
```

[这](http://androidbook.blogspot.com/2009/08/referring-to-android-resources-using.html)向您展示了如何为资源图像构建 Uri - 您可以在 webview 解决方案中使用它。

# xml - Azure 上的 Elmah XML 日志文件

> ID：13237369
> 
> 赞同：1
> 
> 时间：2012-11-05T17:36:58.357
> 
> 标签：xml, azure, web-config, elmah

我想将我的 MVC 4 应用程序移动到 Azure，并且除了基本的 Azure Web 角色之外不会产生其他数据存储成本。目前，我将 Elmah 日志作为 xml 文件存储在 app_data 目录中。我还在那里保存了其他序列化数据文件。

在 Azure 中，我必须使用 LocalStorage，它适用于除 Elmah 之外的所有内容。Elmah 根据 web.config 中的 UNC 路径确定 xml 文件的存储位置，而不是文件路径。

反正有没有改变elmah参与Azure的localstorage模型？如果没有，我唯一的选择是内存中，当应用程序关闭或部署循环时会丢失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:15:34.673

两个回复：1) 致 DFBerry - 请参阅[这篇关于将 ELMAH 与 Azure 表存储结合使用的文章（包括 NuGet 包）。](http://www.wadewegner.com/2011/08/using-elmah-in-windows-azure-with-table-storage/)

2) 致盖伊——我现在正试图这样做，而我得到的是什么——ELMAH 没有记录任何东西，即使我知道我正在抛出异常。我用 XmlFileErrorLog 配置了它，并且路径指向 ~/App_Data。有一次我确实得到了一些东西，但那是在出现与 Elmah 本身有关的 Web.config 错误时。去搞清楚。但我相信你是对的——事实上，你可以写到 App_Data，但如果你将你的网站扩展到多个实例，你会遇到问题。所以我不明白为什么我会遇到这样的困难。

# macos - CUDA Toolkit 5.0 NSight 在 Mac OS X ML 上构建错误

> ID：13237371
> 
> 赞同：1
> 
> 时间：2012-11-05T17:37:02.773
> 
> 标签：macos, cuda, osx-mountain-lion, build-error, nsight

我的 CUDA Toolkit 5.0 发生了奇怪的事情。几天前，XCode 和 NSight Eclipse 插件都失去了构建最简单的 CUDA 相关项目的能力。XCode 使用 C++ 源文件的自定义构建规则成功构建项目：

```
 nvcc "INPUT_FILE_NAME" 
```

但控制台输出显示运行失败

```
 error: executable doesn't exist: '/Users/geraldus/Library/Developer/Xcode/DerivedData/CUDA_Hello_World-gzfzqivvsmeamfghnovopxapkdsz/Build/Products/Debug/CUDA Hello World'
    error: failed to launch '/Users/geraldus/Library/Developer/Xcode/DerivedData/CUDA_Hello_World-gzfzqivvsmeamfghnovopxapkdsz/Build/Products/Debug/CUDA Hello World' -- SBTarget is invaliderror: failed to launch '/Users/geraldus/Library/Developer/Xcode/DerivedData/CUDA_Hello_World-gzfzqivvsmeamfghnovopxapkdsz/Build/Products/Debug/CUDA Hello World' -- SBTarget is invalid 
```

并且 Eclipse NSight 输出总是显示 .o 文件丢失。

```
 **** Build of configuration Release for project Simple CUDA RT ****

    make all 
    Building file: ../src/Simple CUDA RT.cu
    Invoking: NVCC Compiler
    nvcc -O3 -gencode arch=compute_20,code=sm_20 -gencode arch=compute_35,code=sm_35 -odir "src" -M -o "src/Simple CUDA RT.d" "../src/Simple CUDA RT.cu"
    nvcc -O3   "src/Simple CUDA RT.o" "../src/Simple CUDA RT.cu"
    i686-apple-darwin11-llvm-g++-4.2: src/Simple CUDA RT.o: No such file or directory
    make: *** [src/Simple CUDA RT.o] Error 1

    **** Build Finished **** 
```

我该如何解决？是错误还是我的错误行为？

**更新 [2012 年 11 月 6 日 10:03 UTC]**

我试图以这种方式重建 CUDA 样本：

```
 cd /Developer/NVIDIA/CUDA-5.0/samples
    make clean
    make 
```

一切都没有错误地构建，二进制文件成功生成并且它们工作。但是 XCode 和 Eclipse 的情况仍然相同（即使在重新安装 Eclipse 和 CUDA Toolkit 之后）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T21:42:42.737

这看起来像一个权限问题。验证构建文件夹（以及其中的所有文件）是否可由当前用户写入。

**更新** 原来 Nsight EE 的实际问题是文件名中的空格。

# c - 大数按位右移

> ID：13237373
> 
> 赞同：-1
> 
> 时间：2012-11-05T17:37:04.353
> 
> 标签：c, bit-manipulation, clang

如果我这样做，为什么我得不到正确的答案：

```
long long number = 5500000000000000; // 16 digit number - 53bit
long long temp_number = 0;

temp_number = number >> 50;

printf("%d", temp_number); 
```

答案是：4

那不正确，我希望它显示 5。

亲切的问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T17:41:05.983

该数字的位模式是：

```
10011100010100011100010001010010000111100000000000000 
```

右移 50 位时，您实际上是丢弃了 50 个最低有效位，因此您剩下：

```
100 
```

巧合的是，这是4。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T17:41:51.833

```
5500000000000000 = 0000 0000 0001 0011 1000 1010 0011 1000 1000 1010 0100 0011 1100 0000 0000 0000 
```

当你移动 50 时，你会得到：

```
0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0100 = 4 
```

仅靠右移是无法达到 5 的。

# html - Selenium + Ruby - 在 Outlook 中选择 Onclick

> ID：13237374
> 
> 赞同：1
> 
> 时间：2012-11-05T17:37:05.943
> 
> 标签：html, ruby, selenium, selenium-webdriver

我正在尝试选择这个。

```
<td colspan=2 align="right" class="txtpad">
<input type="submit" class="btn" value="Sign in" onclick="clkLgn()" 
onmouseover="this.className='btnOnMseOvr'" onmouseout="this.className='btn'"        
onmousedown="this.className='btnOnMseDwn'">
<input name="isUtf8" type="hidden" value="1">
</td> 
```

然而，当我尝试这个时，

```
element3 = driver.find_element(:value, "Sign in")
element3.click 
```

它不起作用。

如何点击按钮登录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T19:22:40.947

find_element 不与 :value 一起使用。

实际上，它需要第一个参数作为您想要查找元素的方式，即通过 :css 或 :xpath，在包含数据的第二个字符串之后查找特定元素。

因此，在您的情况下，我们知道我们无法使用 :css 找到价值，但我们可以使用 :xpath 来做到这一点。

因此，在这种情况下，你可以试试这个

```
element3 = driver.find_element(:xpath, '//*[contains(@value, "Sign in")]').first
element3.click 
```

我在我的系统上试过这个。我认为这将完美运行。

# performance - 为什么在类属性中变异单元格数组如此缓慢？

> ID：13237377
> 
> 赞同：3
> 
> 时间：2012-11-05T17:37:20.587
> 
> 标签：performance, matlab

例如，我有以下课程：

```
classdef testclass < handle
    properties
            buckets
    end
    methods
        function tc = testclass(sz)
            tc.buckets = cell(1, sz);
        end
        function put(tc,k)
            tc.buckets{k}{1} = 1;
        end
    end
end 
```

下面的示例循环，我将性能与普通单元格数组进行比较：

```
tm = @java.lang.System.currentTimeMillis;

for N=[100 200 400 1000 2000 4000 8000]
    tc = testclass(N);
    Tstart = tm();
    for k=1:N
        tc.put(k);
    end
    Tend = tm();
    fprintf(1, 'filling hash class (size %d): %d ms\n', N, Tend - Tstart);

    arr = cell(1,N);
    Tstart = tm();
    for k=1:N
        arr{k}{1} = 1;
    end
    Tend = tm();
    fprintf(1, 'filling cell array (size %d): %d ms\n', N, Tend - Tstart);
end 
```

输出是：

```
filling hash class (size 100): 8 ms
filling cell array (size 100): 0 ms
filling hash class (size 200): 9 ms
filling cell array (size 200): 0 ms
filling hash class (size 400): 24 ms
filling cell array (size 400): 1 ms
filling hash class (size 1000): 108 ms
filling cell array (size 1000): 2 ms
filling hash class (size 2000): 370 ms
filling cell array (size 2000): 5 ms
filling hash class (size 4000): 1396 ms
filling cell array (size 4000): 10 ms
filling hash class (size 8000): 5961 ms
filling cell array (size 8000): 21 ms 
```

如您所见，普通单元阵列表现出“线性”性能（这是意料之中的），但包裹在一个类中的数组给出了可怕的二次性能。

我在 Matlab 2008a 和 Matlab 2010a 上对此进行了测试。

这是什么原因造成的？我该如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T20:21:37.603

Matlab 的真正威力只适用于那些知道要避免什么的人:)

正如您所注意到的，解释语言中 OOP 的一个主要问题（Matlab 并不孤单）是调用方法所涉及的相当惊人的开销。OOP 需要在 Matlab、Python 等中与在 C++、Fortran 等中完全不同的设计策略。

无论如何，您最好避免频繁调用方法，并尽可能多地向量化。

比较一下：

```
clc, clear classes    
feature accel off  % to make sure JIT doesn't throw things off

tm = @java.lang.System.currentTimeMillis;

for N = [100 200 400 1000 2000 4000 8000]

    tc = testclass(N);

    % call method inside loop
    Tstart = tm();
    for k=1:N
        tc.put(k);
    end
    Tend = tm();
    fprintf(1, 'filling hash class (loop, size %d)      : %d ms\n', N, Tend - Tstart);

    % call method only once
    Tstart = tm();
    tc.put(1:N);    
    Tend = tm();
    fprintf(1, 'filling hash class (vectorized, size %d): %d ms\n', N, Tend - Tstart);

    % cell-array direct assignment, looped version
    arr = cell(1,N);
    Tstart = tm();
    for k=1:N
        arr{k}{1} = 1;
    end
    Tend = tm();
    fprintf(1, 'filling cell array (loop, size %d)      : %d ms\n', N, Tend - Tstart);

    % cell-array direct assignment, vectorized version
    arr = cell(1,N);
    Tstart = tm();
    [arr{:}] = deal({1});
    Tend = tm();
    fprintf(1, 'filling cell array (vectorized, size %d): %d ms\n\n', N, Tend - Tstart);
end 
```

其中相关方法`testclass`被修改以处理矢量化和循环分配：

```
classdef testclass < handle
    properties
            buckets
    end
    methods
        function tc = testclass(sz)
            tc.buckets = cell(1, sz);
        end
        function put(tc,k)
            [tc.buckets{k}] = deal({1});
        end
    end
end 
```

结果：

```
filling hash class (loop, size 100)      : 5 ms
filling hash class (vectorized, size 100): 0 ms
filling cell array (loop, size 100)      : 0 ms
filling cell array (vectorized, size 100): 0 ms

filling hash class (loop, size 200)      : 7 ms
filling hash class (vectorized, size 200): 0 ms
filling cell array (loop, size 200)      : 0 ms
filling cell array (vectorized, size 200): 0 ms

filling hash class (loop, size 400)      : 15 ms
filling hash class (vectorized, size 400): 1 ms
filling cell array (loop, size 400)      : 1 ms
filling cell array (vectorized, size 400): 0 ms

filling hash class (loop, size 1000)      : 36 ms
filling hash class (vectorized, size 1000): 2 ms
filling cell array (loop, size 1000)      : 2 ms
filling cell array (vectorized, size 1000): 1 ms

filling hash class (loop, size 2000)      : 73 ms
filling hash class (vectorized, size 2000): 2 ms
filling cell array (loop, size 2000)      : 4 ms
filling cell array (vectorized, size 2000): 2 ms

filling hash class (loop, size 4000)      : 145 ms
filling hash class (vectorized, size 4000): 5 ms
filling cell array (loop, size 4000)      : 9 ms
filling cell array (vectorized, size 4000): 4 ms

filling hash class (loop, size 8000)      : 292 ms
filling hash class (vectorized, size 8000): 8 ms
filling cell array (loop, size 8000)      : 18 ms
filling cell array (vectorized, size 8000): 9 ms 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:21:39.760

> 这是什么原因造成的？我该如何解决它？

减速是使用对象的结果。作为程序员，对象会给你带来很多好处，但是，它们涉及开销。如果不放弃对象，您将无法绕过此开销。根据语言和您的特定实现，开销将是微不足道的或大量的。

我编写了一个简单的 C++ 程序，它创建一个包含成员数组和裸数组的对象。填充对象内部的数组比填充裸数组花费的时间要长得多。

```
#include <iostream>
#include <ctime>

static const int MAX_SIZE  = 1000000;

class Holder{
  public:
    void putValue(int val, int idx);
  private:
        int data[MAX_SIZE];
};

void Holder::putValue(int v, int i){
        data[i] = v;
}

int main(int argc, char **argv){

        Holder h;
        int data[MAX_SIZE];

        int j, i;
        clock_t begin, end;
        int outerLoop = 200;

        fprintf(stderr,"Testing array in object!\n");
        begin = clock();
        for ( j=0; j<outerLoop; j++)
                for (  i = 0; i<MAX_SIZE; i++)
                        h.putValue(i,i);
        end = clock();

        fprintf(stderr,"Done! El time:%3.3f\n", double(end - begin)/CLOCKS_PER_SEC);

        fprintf(stderr,"Testing naked array 2!\n");
        begin = clock();
        for ( j=0; j<outerLoop; j++)
                for ( i = 0; i<MAX_SIZE; i++)
                        data[i] = i;
        end = clock();
        fprintf(stderr,"Done! El time:%3.3f\n", double(end - begin)/CLOCKS_PER_SEC);

} 
```

这是输出：

> 测试对象中的数组！
> 
> 完毕！埃尔时间：1.413
> 
> 测试裸数组2！
> 
> 完毕！埃尔时间：0.690

# utf-8 - Babel 有类似 trivial-utf-8:write-utf-8-bytes 的功能吗？

> ID：13237378
> 
> 赞同：2
> 
> 时间：2012-11-05T17:37:31.943
> 
> 标签：utf-8, stream, lisp, common-lisp

我正在编写一个 HTTP 服务器并使用`trivial-utf-8:write-utf-8-bytes`它来响应请求。听说[Babel](http://common-lisp.net/project/babel/)和[trivial-utf-8](http://common-lisp.net/project/trivial-utf-8/)一样，但效率更高，所以我想尝试一下。搜索了一段时间后，我找不到任何类似的功能`write-utf-8-bytes`。我是不是误会了什么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T05:20:25.890

是的，Babel 有[string-to-octets](http://lispdoc.com/?q=string-to-octets)，它会产生你需要的结果`:encoding :utf-8`。

# linq - 使用反射与通用/动态 linq 谓词中的子属性进行比较

> ID：13237382
> 
> 赞同：3
> 
> 时间：2012-11-05T17:37:54.723
> 
> 标签：linq, generics, reflection, predicate, predicatebuilder

我必须一般为实体框架 Linq 查询构建一个比较谓词。我正在使用反射，并且能够毫无问题地构建单级 Lambda 表达式。但是，我开始陷入困境的地方是我有一个有关系的实体

```
public class Parent {
    public virtual Child child { get; set; }
    .... Other Stuff...
}

public class Child {
    public int property { get; set; }
    public virtual Parent parent { get; set; }
    .... Other Stuff.....
} 
```

我怎样才能将“Child.property”传递给反射，以便能够创建一个 lambda 表达式进行比较并得出一个类似于 item => item.Child.property == value 的 lambda 表达式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T18:04:11.807

我假设您想要一个支持嵌套属性的通用解决方案：

```
public Expression buildLambda(Type startingType, string propertyPath, object value) {

  var parameter=Expression.Parameter(startingType,"item");
  var valueExpression = Expression.Constant(value);
  var propertyExpression=propertyPath.Split('.').Aggregate(parameter,(Expression parent,string path)=>Expression.Property(parent,path));
  return Expression.Lambda(Expression.Equal(propertyExpression,valueExpression),parameter);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T17:52:55.587

我想你正在寻找这个：

```
ParameterExpression parameter = Expression.Parameter(typeof(Parent), "item");
Expression child = Expression.PropertyOrField(parameter, "child");
Expression childProperty = Expression.PropertyOrField(child, "property");
int value = 1;
Expression comparison = Expression.Equal(childProperty, Expression.Constant(value));

Expression<Func<Parent, bool>> lambda = Expression.Lambda<Func<Parent, bool>>(comparison, parameter);

var sample = new[] { new Parent() { child = new Child() { property = 1 } } };
var result = sample.Where(lambda.Compile()); 
```

# ember.js - 我们可以对 Ember 数据使用多态关系吗？

> ID：13237385
> 
> 赞同：1
> 
> 时间：2012-11-05T17:38:05.083
> 
> 标签：ember.js, active-model-serializers

我们有多种类型的“小部件”，可以在组中使用，并且在 Rails 中，我们有一个多态关系来返回所有小部件，无论类型如何。

例如，我们可以调用@group.widgets 来返回所有不同类型的小部件，而不管可能正在使用什么。

```
class Group < ActiveRecord::Base
  has_many :group_widgets

  def widgets
    group_widgets.map { |m| m.widget }
  end
end

class GroupWidget < ActiveRecord::Base
  belongs_to :group
  belongs_to :widget, polymorphic: true, dependent: :destroy
end 
```

如果我将 polymorphic => true 添加到序列化程序。例如：

```
class GroupSerializer < ActiveModel::Serializer
  attributes :id,
             :parent_id,
             :title,
             :group_type

  has_many :widgets, :polymorphic => true
end 
```

我似乎得到了一个递归循环，它以**SystemStackError (stack level too deep)**结束。

我在这里错过了一个技巧，还是这只是一些还不能完成的事情？

谢谢，丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T03:10:52.800

您是否尝试过在没有多态声明的情况下声明它？

```
has_many :widgets 
```

还要确保您的每个小部件类型都有为它们定义的序列化程序。

# javascript - Javascript（onclick）从图像数组中弹出更大的图像窗口

> ID：13237387
> 
> 赞同：0
> 
> 时间：2012-11-05T17:38:09.547
> 
> 标签：javascript, arrays, image, popup, onclick

我有一组填充页面的图像，我遇到的问题是想出一种从缩略图创建 ONCLICK 弹出图像窗口的方法（但弹出窗口需要是更大尺寸的图像）：

这是js代码：

```
var str = "<table>";
var imgFolder = "images/"; 

var cover = new Array();
    cover[0] = "kitchenHouseSale.jpg";
    cover[1] = "eatLive.jpg";
    cover[2] = "loveAnthonySale.jpg";

var coverone = new Array();
    coverone[0] = "casualVacancy.jpg";
    coverone[1] = "quiet.jpg";
    coverone[2] = "whirlAway.jpg";

var covertwo = new Array();
    covertwo[0] = "everyLastSale.jpg";
    covertwo[1] = "neilYoung.jpg";
    covertwo[2] = "soupSisters.jpg";

var title = new Array();
    title[0] = "The Kitchen House";
    title[1] = "Eat to Live";
    title[2] = "Love Anthony";

for (var i = 0; i < cover.length; i++)
{
   str += "<tr><td colspan='2'><h2>" + category[i] + "</h2></td></tr>";
   str += "<tr><td class='basket'><img src='" + imgFolder + cover[i] + "' width='108'    height='159'>
}

str += "</table>";
var elem = document.getElementById("table");
elem.innerHTML = str; 
```

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T19:39:56.387

我说得对吗？您希望用户单击图像，并且应该在弹出窗口中显示同一图像的更大版本？

看看 window.open() 然后：[http://w3schools.com/jsref/met_win_open.asp](http://w3schools.com/jsref/met_win_open.asp) 您必须指定图像的绝对路径 - 文件作为弹出窗口的 url，例如[http://your.domain .com/images/kitchenHouseSale.jpg](http://your.domain.com/images/kitchenHouseSale.jpg)。

然后，您可以将 onclick-handler 添加到 img-tag，如下所示：

```
<img src='" + imgFolder + cover[i] + "' width='108'    height='159' onclick="window.open('http://your.domain.com + this.src)" /> 
```

# jquery - AJAX 异步调用不会用数据更新控件

> ID：13237391
> 
> 赞同：0
> 
> 时间：2012-11-05T17:38:21.867
> 
> 标签：jquery, ajax

如果我使用非异步调用运行下面的代码，则控件 jqStatusID 将使用数据进行更新，但如果我使用异步调用，它将不会更新。Fiddler2 向我显示数据正常。这是为什么？我需要对控件进行刷新吗？

```
$(document).ready(function ()
{
  //Function2(true); //no errors, data comes in but jqStatusID is NOT updated
  Function2(false);  //works great
});

function Function2(async)
{
  $.ajax
  ({
    async: async
    , url: "svc/JobViewer.svc/JobViewer/GetStatusList"
    , cache: false
    , dataType: "json"
    , error: function (jqXHR, textStatus, errorThrown)
    {
      alert("Get Status List ajax error:\r\n" + errorThrown)
    }
    , success: function (data, textStatus, jqXHR)
    {
      $.each(data, function (key, value)
      {
        $(jqStatusID).append($("<option></option>").attr("value", value.StatusID).text(value.Name));
      });
    }
  });
} 
```

有任何想法吗？谢谢你！

# azure - 在 Azure Web 角色中自动安装应用程序初始化（SDK v1.8，Windows Server 2012）

> ID：13237393
> 
> 赞同：7
> 
> 时间：2012-11-05T17:38:38.513
> 
> 标签：azure, azure-web-roles

我看到 Microsoft 已将应用程序初始化作为 IIS 8.0 的一部分发布。不幸的是，默认情况下它没有在 Web 角色中启用。（我的意思是，未启用“应用程序初始化”作为 Web 服务器角色的一项功能。我知道 Web 角色具有 IIS 8。）

有谁知道我如何从启动脚本中启用它？我已经有一些启动脚本，但我不确定如何添加服务器角色功能。

模块本身出现在“服务器角色”->“Web 服务器 (IIS)”->“Web 服务器”->“应用程序开发”->“应用程序初始化”下的服务器管理器中。

遗憾的是，默认情况下未启用此功能，因为它将非常有用。

谢谢

克里斯

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-06T00:20:48.183

首先，您需要使用启动任务安装该功能：

```
PKGMGR.EXE /iu:IIS-ApplicationInit 
```

然后您需要在 IIS 中配置您的站点（**startMode**和**preloadEnabled**）：

```
public class WebRole : RoleEntryPoint
{
    public override void Run()
    {
        using (var serverManager = new ServerManager())
        {
            var mainSite = serverManager.Sites[RoleEnvironment.CurrentRoleInstance.Id + "_Web"];
            var mainApplication = mainSite.Applications["/"];
            mainApplication["preloadEnabled"] = true;

            var mainApplicationPool = serverManager.ApplicationPools[mainApplication.ApplicationPoolName];
            mainApplicationPool["startMode"] = "AlwaysRunning";

            serverManager.CommitChanges();
        }

        base.Run();
    }

    public override bool OnStart()
    {
        // For information on handling configuration changes
        // see the MSDN topic at http://go.microsoft.com/fwlink/?LinkId=166357.

        return base.OnStart();
    }
} 
```

[我写了一篇关于这个的博客文章](http://fabriccontroller.net/blog/posts/iis-8-0-application-initialization-module-in-a-windows-azure-web-role/)，你可以[在 GitHub 上找到一个示例应用程序](https://github.com/sandrinodimattia/WindowsAzure-IISApplicationInitializationModule)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:59:04.843

Web 角色绝对安装了 IIS 8.0。如果您将 Web 角色更改为 OSVersion=3，它将使用 IIS 8.0 将您的应用程序部署到 Windows Server 2012 映像。

如果您指的是 VM（Azure IaaS）？我要做的是从 Windows Server 2012 开始，远程桌面，根据需要安装核心服务器，对其进行 sysprep，捕获图像。这样，您就可以在 Azure 图像库中重复使用它。然后，您可以使用已设置/安装的 IIS 8.0 等从此基础映像启动许多 VM。

# ruby-on-rails - Rails simple_fields_for 无法隐藏：id

> ID：13237399
> 
> 赞同：2
> 
> 时间：2012-11-05T17:38:49.270
> 
> 标签：ruby-on-rails, ruby, simple-form

我一直在将 simple_form 与 HAML 一起用于 Rails

我有许多 line_items 他们有一个我从 Order 对象中检索到的唯一 ID

```
 = f.simple_fields_for :line_items do |line_items|
     .f.input :id unless @order.status?
     .f.input :cost unless @order.status? 
```

但是，每当我遍历这些列表时，我想隐藏（从表单中删除）line_items id，我尝试放置一个除非语句来删除其他参数并且它可以工作（例如：cost）但是对于 :id 它似乎是一个隐藏字段

```
 <input id="order_line_items_attributes_2_id" name="order[line_items_attributes][2][id]" type="hidden" value="26"> 
```

我怎样才能成功地从字段中删除 ID，就像我为 :cost 所做的那样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T16:30:50.697

试试这个：

`= f.simple_fields_for :line_items, include_id: false do |line_items|`

有关此的更多信息：http: [//apidock.com/rails/ActionView/Helpers/FormHelper/form_for](http://apidock.com/rails/ActionView/Helpers/FormHelper/form_for)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:47:22.657

Rails 认为您永远不需要编辑 :id，因此它变得困难或不可能。如果您想显示 :id，那很好，但显示 :id 以便可以编辑的理由有限。

我总是在表单中显示 id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T03:15:11.447

一个工作...

我通过渲染字段来欺骗系统，因为我使用 HTML 注释阻止它出现并阻止它被提交

```
/ =f.input :id unless @order.status? 
```

我使用 = 而不是 - 因为字段可以被渲染但是隐藏在 html 注释中

```
<!--<input class="hidden" id="order_line_items_attributes_2_product_id" name="order[line_items_attributes][2][product_id]" type="hidden" />--> 
```

# magento - 是否有完整的观察者事件列表？

> ID：13237400
> 
> 赞同：1
> 
> 时间：2012-11-05T17:38:52.183
> 
> 标签：magento

是否有可以收听的所有事件的完整列表？

如果此列表不存在，调试以获取所有事件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T18:19:48.803

你永远找不到完整的清单。但是，如果您访问 app/Mage.php，您可以在函数“dispatchEvent()”中放入一些调试代码，并随时记录所有事件。

```
$params = array();
foreach (array_keys($data) as $key) {
    if (is_object($data[$key])) {
        $params[] = $key.' ('.get_class($data[$key]).')';
    } else {
        $params[] = $key.' ('.gettype($data[$key]).')';
    }
}
Mage::log('event_name:'.$name.',event_passed_keys:'.implode('|',$params),null,'events.log',true); 
```

然后使用一些 excel 向导，您可以将它们解析为所有事件名称和传递给它的参数的列表。

许多编译列表甚至执行上面所示的 grep 的问题是许多事件是动态创建的。这使您可以辨别有哪些未列出的事件。

确保注释掉调试代码或 events.log 文件将在短时间内变得巨大。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T17:53:21.600

看看事件列表@

*   [http://www.nicksays.co.uk/magento_events_cheat_sheet/](http://www.nicksays.co.uk/magento_events_cheat_sheet/)

*   [使用 Event/Observer 自定义 Magento](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method)

或者

要在您的开发环境中记录特定页面的所有事件，您可以添加`Mage::log($eventName);`

在 /app/code/core/Mage/Core/Model/App.php

```
public function dispatchEvent($eventName, $args){
    Mage::log($eventName); 
    .... 
```

或者

```
grep -r Mage::dispatchEvent /path/to/your/Magento/* > events.txt 
```

阅读更多 @

*   [Magento 调用哪个事件？需要建立一个观察者](https://stackoverflow.com/questions/7016027/magento-which-event-is-called-need-to-build-an-observer)

*   [https://magento.stackexchange.com/questions/153/where-can-i-find-a-complete-list-of-magento-events](https://magento.stackexchange.com/questions/153/where-can-i-find-a-complete-list-of-magento-events)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-18T05:33:01.747

作为练习，我编写了一个 Bash 脚本来生成粗略的事件列表（它实际上充当 grep 的包装器，带有一些开关以提供上下文和可用参数）。

我已使用此脚本为 1.3.3.0 到 1.8.0.0 版本的默认 Magento 安装生成事件列表，代码可在 GitHub 上找到：

[https://github.com/Marko-M/magento-events-list/](https://github.com/Marko-M/magento-events-list/)

事件列表可在此处获得：

[https://github.com/Marko-M/magento-events-list/tree/master/magento-outofthebox](https://github.com/Marko-M/magento-events-list/tree/master/magento-outofthebox)

以及我博客上的后续文章：

[http://www.techytalk.info/bash-script-to-generate-list-of-events-for-magento-installation/](http://www.techytalk.info/bash-script-to-generate-list-of-events-for-magento-installation/)

请注意，由于许多事件名称是动态生成的，因此这些列表永远不会完整。

由于您的项目可能有扩展，并且它们会发送自己的事件，因此最好通过 grep 或使用我的脚本手动生成此列表。

干杯!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-13T16:33:49.163

一般的意思是为您感兴趣的任何特定事件设置观察者

见[https://magento.stackexchange.com/questions/314/how-to-know-the-magento-event-that-we-want-to-hook](https://magento.stackexchange.com/questions/314/how-to-know-the-magento-event-that-we-want-to-hook)

在 Logevent 模块中，config.xml

0.1

Maticode_Logevent_Model

```
<controller_action_predispatch>
    <observers>
        <Logevent>
            <type>singleton</type>
            <class>Logevent/observer</class>
            <method>controller_action_predispatch</method>
        </Logevent>
    </observers>
</controller_action_predispatch> 
```

和模型/observer.php

```
 <?php 
```

类 Maticode_Logevent_Model_Observer { public function controller_action_predispatch($observer) { Mage::log ( $observer->getEvent ()->getControllerAction ()->getFullActionName (),null, 'eventlog.log' ); }

}

这样，在

```
var/log/eventlog.log file 
```

您可以可视化任何测试操作的可能挂钩（单击按钮并检查您的日志）

# maven - Maven：强制 Jersey 使用特定的工件版本

> ID：13237405
> 
> 赞同：2
> 
> 时间：2012-11-05T17:39:09.937
> 
> 标签：maven, jersey, jena

我有一个 Maven 存储库，我在其中加载 Jena TDB 0.9.3（取决于 Jena ARQ 2.9.3）、Jersey 1.8 和[RMOnto 1.0](http://semantic.cs.put.poznan.pl/maven/put/semantic/RMOnto/1.0/)。正如您所料，重点是对语义数据集进行一些分析。

看起来 RMOnto 内置了 ARQ 2.8.7，就像“硬连线”一样。它的 pom 文件中没有任何明确的依赖关系，但 jar 文件包含一个`ARQ.class`. 这非常棘手，因为使用 Maven Enforcer Plugin 等您不会注意到它。

看起来这会导致 Jersey 使用 RMOnto 的 ARQ 版本，而不是 pom.xml 中定义的版本。这是一个[最小的例子](https://github.com/prayerslayer/Jersey-ARQ-RMOnto)。当您运行测试时（检查 ARQ.VERSION 是否等于 2.9.3），它会成功。当您构建项目并将其部署在 Tomcat 7 上时，您应该会看到 2.8.7 作为输出。

*   这种行为是预期的吗？为什么？
*   一个人怎么能强迫泽西岛使用 ARQ 2.9.3？
*   如果不可能，是否可以隔离 ROnto 以使用 2.8.7 而其他源使用 2.9.3？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T18:11:00.243

您应该首先在依赖项列表中定义 ARQ 2.9.3。通过这样做，您强制您的构建使用该特定版本。在选择要使用的工件时，依赖顺序是相关的。

* * *

## 更新

好的，我明白问题所在了。

*   根据 pom，RMOnto jar 显然是阴影的：http: [//semantic.cs.put.poznan.pl/maven/put/semantic/RMOnto/1.0/RMOnto-1.0.pom](http://semantic.cs.put.poznan.pl/maven/put/semantic/RMOnto/1.0/RMOnto-1.0.pom)。
*   `WEB-INF/lib`Tomcat 7以未定义的顺序加载罐子。这意味着即使您将 ARQ 2.9.3 定义为依赖项中的第一个，当应用程序在 Tomcat 中运行时也不会出现这种情况。[http://tomcat.apache.org/tomcat-7.0-doc/class-loader-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/class-loader-howto.html)
*   好消息是 Tomcat 总是`WEB-INF/classes`先`WEB-INF/lib`查找依赖项。

因此，您可以做的解决方法是确保将 ARQ 2.9.3 版本添加到`WEB-INF/classes`文件夹中。这可以使用[`maven-dependency-plugin`](http://maven.apache.org/plugins/maven-dependency-plugin/examples/unpacking-artifacts.html)：

```
<build>
    <plugins>
        <plugin>
            <artifactId>maven-dependency-plugin</artifactId>
            <executions>
                <execution>
                    <phase>prepare-package</phase>
                    <goals>
                        <goal>unpack</goal>
                    </goals>
                    <configuration>
                        <artifactItems>
                            <artifactItem>
                                <groupId>org.apache.jena</groupId>
                                <artifactId>jena-arq</artifactId>
                                <version>2.9.3</version>
                                <outputDirectory>${project.build.directory}/classes</outputDirectory>
                                <excludes>**/META-INF/</excludes>
                            </artifactItem>
                        </artifactItems>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

您的战争和爆炸战争现在将在`WEB-INF/classes`文件夹中包含来自 ARQ 2.9.3 的所有类。它们将在`WEB-INF/lib`文件夹中的任何 jar 文件之前加载。

**注意：**我没有在 Tomcat 上测试过，但我看不出它不起作用。

**NB2：**这是一个黑客。最好的办法是从 RMOnto jar 中删除 ARQ 包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T06:48:58.323

如果文件已被直接复制到 RMOnto .jar，则该行为是预期的。

在这种情况下，我想说最好的办法是将其硬编码，也就是直接从包中删除 ARQ 文件。打开RMOnto-1.0.jar包可以看到arq文件夹中的arq文件。您需要做的是打开 jar 文件（它只是一个 .zip），从那里删除 ARQ 文件，将编辑后的 ​​ROnto 包存储在您的版本控制/存储库中，然后从那里引用编辑过的包。此外，您需要在 pom 中为旧版本的 ARC 添加 excludes 语句，并保持对新版本的依赖。

如果您愿意，最好删除 RMOnto 的 pom 文件中未提及的其他依赖项，然后将它们添加到 RMOnto pom 文件中（并重建，如果您有源代码）。这样 Maven 机制就会知道它们。该文件似乎包含很多这样的依赖项，这将导致未来的头痛。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T23:36:54.697

You should file a defect report against RMOnto. Hard-wiring library code into a jar, instead of including it as a dependency you can manage in the POM, is definitely a bad idea that the code maintainer should fix.

# sql - SQL Server XML 查询：如何选择值？

> ID：13237407
> 
> 赞同：0
> 
> 时间：2012-11-05T17:39:17.233
> 
> 标签：sql, sql-server, xml

如何像这样从 xml 中选择文件名，即我只需要名称：

```
c:\temp\f1.txt
c:\temp\f2.txt 
```

像这样的 XML：

```
<root name="name" id="12">
<class1>
     <file name="c:\temp\f1.txt">
</class1>
<class1>
   <subclass1>
        <file name="c:\temp\f2.txt">
    </subclass1>
</class1>
</root> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:54:11.460

```
declare @XML xml 
set @XML = '
<root name="name" id="12">
  <class1>
       <file name="c:\temp\f1.txt"/>
  </class1>
  <class1>
     <subclass1>
          <file name="c:\temp\f2.txt"/>
      </subclass1>
  </class1>
</root>'

select T.N.value('@name', 'nvarchar(100)') as FileName
from @XML.nodes('//file') as T(N) 
```

# playframework - playframework 1.2.5 会话在插件和代码中是不同的

> ID：13237414
> 
> 赞同：0
> 
> 时间：2012-11-05T17:39:33.973
> 
> 标签：playframework, playframework-1.x

为什么playframework 1.2.5 中的session 是从plugin 改变的，然后是session 最终保存的时候。我的插件因此无法工作。

谢谢，院长

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T19:11:51.187

似乎是 ActionInvoker.java 中的一个错误

将此代码向上移动几行可以解决问题（我希望它不会破坏其他任何东西）..

```
 if(request.resolved) {
        //Well, I moved this here as resolve is being called twice and blowing away the first created session...
        //I wonder why they put this below
        return;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T05:42:13.773

从您的解释中不清楚代码位于何处以及将其移至何处。例如，如果将会话保存在**rawInvocation**方法中，则会话将被保存为 HTTP 线程的一部分，而不是操作调用程序线程。

当动作调用线程执行时，它将再次从 cookie 中读取会话，并且您将丢失之前对会话所做的任何更改。

# objective-c - iOS 6 中用于完成块的 dispatch_get_current_queue() 的替代方案？

> ID：13237417
> 
> 赞同：104
> 
> 时间：2012-11-05T17:39:39.983
> 
> 标签：objective-c, cocoa-touch, ios6, objective-c-blocks, grand-central-dispatch

我有一个接受块和完成块的方法。第一个块应该在后台运行，而完成块应该在调用该方法的任何队列中运行。

对于后者，我总是使用`dispatch_get_current_queue()`，但它似乎在 iOS 6 或更高版本中已被弃用。我应该改用什么？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-11-05T19:07:57.790

“在呼叫者所在的任何队列上运行”的模式很有吸引力，但最终不是一个好主意。该队列可以是低优先级队列、主队列或其他具有奇怪属性的队列。

我最喜欢的方法是说“完成块在具有以下属性的实现定义的队列上运行：x、y、z”，如果调用者想要更多控制权，则让块分派到特定队列。要指定的一组典型属性类似于“相对于任何其他应用程序可见队列的串行、不可重入和异步”。

** 编辑 **

Catfish_Man 在下面的评论中举了一个例子，我只是将它添加到他的答案中。

```
- (void) aMethodWithCompletionBlock:(dispatch_block_t)completionHandler     
{ 
    dispatch_async(self.workQueue, ^{ 
        [self doSomeWork]; 
        dispatch_async(self.callbackQueue, completionHandler); 
    } 
} 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-11-06T05:20:57.150

对于您所描述的 API，这从根本上是错误的方法。如果 API 接受块和完成块来运行，则以下事实必须为真：

1.  “要运行的块”应该在内部队列上运行，例如 API 私有的队列，因此完全在该 API 的控制之下。唯一的例外是 API 明确声明该块将在主队列或全局并发队列之一上运行。

2.  完成块应**始终**表示为元组（队列，块），除非与#1 相同的假设成立，例如完成块将在已知的全局队列上运行。此外，完成块应该在传入队列上异步调度。

这些不仅仅是风格点，如果您的 API 要避免死锁或其他边缘情况行为，它们是完全必要的，否则有一天会将您从最近的树上吊死。:-)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-08-12T23:21:34.213

其他答案很好，但对我来说，答案是结构性的。我有一个像这样的方法，在单例上：

```
- (void) dispatchOnHighPriorityNonMainQueue:(simplest_block)block forceAsync:(BOOL)forceAsync {
    if (forceAsync || [NSThread isMainThread])
        dispatch_async_on_high_priority_queue(block);
    else
        block();
} 
```

它有两个依赖项，它们是：

```
static void dispatch_async_on_high_priority_queue(dispatch_block_t block) {
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), block);
} 
```

和

```
typedef void (^simplest_block)(void); // also could use dispatch_block_t 
```

这样，我将调用集中在另一个线程上进行调度。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-11-05T18:18:39.740

首先你应该小心你的使用`dispatch_get_current_queue`。从头文件：

> 建议仅用于调试和记录目的：
> 
> 代码不得对返回的队列做出任何假设，除非它是全局队列之一或代码自己创建的队列。如果该队列不是 dispatch_get_current_queue() 返回的队列，则代码不能假定在队列上同步执行不会出现死锁。

你可以做以下两件事之一：

1.  保留对您最初发布的队列的引用（如果您通过 创建它`dispatch_queue_create`），并从那时起使用它。

2.  通过 使用系统定义的队列`dispatch_get_global_queue`，并跟踪您正在使用的队列。

实际上，虽然以前依靠系统来跟踪您所在的队列，但您将不得不自己做。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-07-31T08:36:04.867

Apple 已经弃用`dispatch_get_current_queue()`，但在另一个地方留下了一个漏洞，所以我们仍然能够获得当前的调度队列：

```
if let currentDispatch = OperationQueue.current?.underlyingQueue {
    print(currentDispatch)
    // Do stuff
} 
```

这至少适用于主队列。请注意，该`underlyingQueue`属性自 iOS 8 起可用。

如果你需要在原始队列中执行完成块，你也可以[`OperationQueue`](https://developer.apple.com/documentation/foundation/operationqueue)直接使用，我的意思是不用GCD。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-04-22T13:55:44.997

对于那些仍然需要进行队列比较的人，您可以按其标签或指定来比较队列。检查这个[https://stackoverflow.com/a/23220741/1531141](https://stackoverflow.com/a/23220741/1531141)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-03T22:55:39.537

这也是我的答案。所以我将谈谈我们的用例。

我们有一个服务层和 UI 层（以及其他层）。服务层在后台运行任务。（数据操作任务、CoreData 任务、网络调用等）。服务层有几个操作队列来满足 UI 层的需求。

UI 层依赖于服务层来完成它的工作，然后运行一个成功完成块。这个块可以有 UIKit 代码。一个简单的用例是从服务器获取所有消息并重新加载集合视图。

在这里，我们保证传递到服务层的块在调用服务的队列上分派。由于 dispatch_get_current_queue 是一个不推荐使用的方法，我们使用 NSOperationQueue.currentQueue 来获取调用者的当前队列。关于此属性的重要说明。

> 从正在运行的操作的上下文之外调用此方法通常会导致返回 nil。

由于我们总是在已知队列（我们的自定义队列和主队列）上调用我们的服务，这对我们来说效果很好。我们确实有服务A可以调用服务B的情况，而服务B可以调用服务C。由于我们控制了第一个服务调用的来源，我们知道其余的服务将遵循相同的规则。

因此 NSOperationQueue.currentQueue 将始终返回我们的队列或 MainQueue 之一。

# android - android服务被系统停止时如何响应

> ID：13237418
> 
> 赞同：1
> 
> 时间：2012-11-05T17:39:40.403
> 
> 标签：android, service

我有一个与系统停止时 Android 服务的行为有关的问题。据我了解，如果系统（OS）由于需要资源而停止服务，系统有责任重新启动它。在这种情况下，系统在停止服务时不会调用 onDestroy()，在启动服务时不会调用 onCreate()，而只会调用 onStartCommand()。

如果我在 onStartCommand() 中创建一个线程，当系统停止服务时我将如何清理线程。如果我不停止线程， onStartCommand() 将创建一个新线程。我认为，它可能归结为 onStartCommand() 参数（意图、标志和 startId）。当系统在停止服务后启动服务时，它们可能会有所不同，因为它需要资源。谁能告诉我当服务由 startService() 命令或系统本身启动时（停止后）参数有什么不同

我可以在 onCreate() 中创建线程，但我不确定系统停止服务时线程是否仍然存在。处理这种情况的最佳方法是什么。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T17:49:35.837

> 据我了解，如果系统（OS）由于需要资源而停止服务，系统有责任重新启动它。

这取决于你从什么返回`onStartCommand()`。`START_NOT_STICKY`，例如，意味着操作系统不必再次启动您的服务。

> 在这种情况下，系统在停止服务时不会调用 onDestroy()，在启动服务时不会调用 onCreate()，而只会调用 onStartCommand()。

它是否调用`onDestroy()`将取决于服务的停止方式（例如，直接或通过进程终止）。`onCreate()`但是，如果操作系统重新启动服务，它仍应调用新实例。

> 如果我在 onStartCommand() 中创建一个线程，当系统停止服务时我将如何清理线程。

确保在 中`onDestroy()`，发生了一些会导致线程消失的事情。要么`onDestroy()`将被调用（并且您的服务可以进行清理），要么您的进程正在被终止（并且您的线程随之消失）。

> 谁能告诉我当服务由 startService() 命令或系统本身启动时（停止后）参数有什么不同

`START_FLAG_REDELIVERY`传递给的标志中有一个，但AFAIK只有在你从`onStartCommand()`返回时才会设置。`START_REDELIVER_INTENT``onStartCommand()`

# c# - 如何在执行下一行代码之前等待文件保存？

> ID：13237419
> 
> 赞同：0
> 
> 时间：2012-11-05T17:39:42.163
> 
> 标签：c#, callback, save

> **可能重复：**
> [XMLDocument.Save 是原子操作吗？](https://stackoverflow.com/questions/2678079/is-xmldocument-save-an-atomic-operation)

我的程序中似乎有一个 Heisenbug。我需要导出一个 Xml 文件，然后重新导入它。问题是有时在 Xml 文件完成保存之前，程序会继续到下一行尝试重新导入它，因为它没有完成保存，应用程序会崩溃。当我调试它时，有足够的时间保存文件，这样程序就不会崩溃。

我可以使用`Thread.Sleep`，但在速度较慢的计算机上，如果花费时间过长，它可能仍会崩溃。

我`XmlDocument.Save`用来保存文件。我想知道是否有办法在文件完全保存时实现某种回调。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T17:49:40.830

怀疑杀毒软件。许多病毒扫描程序写得不好，并在您关闭文件时锁定文件，从而阻止任何程序打开它几秒钟。

看到这个问题：

*   [是否可以合理地解决扫描工作目录的防病毒软件？](https://stackoverflow.com/questions/964920/is-it-possible-to-reasonably-workaround-an-antivirus-scanning-the-working-direct)

# php - 在 Facebook 页面上发布的应用程序

> ID：13237420
> 
> 赞同：-1
> 
> 时间：2012-11-05T17:39:42.540
> 
> 标签：php, facebook, cron, access-token

我有一个允许用户管理他们的 Facebook 页面的应用程序。我在我的应用程序上做了一个部分，用户可以在其中将帖子放在队列中并对其进行编程以在将来发送。例如，页面管理员正在休假并准备一些要在离开时发送的帖子。

这是通过 cron 任务完成的，该任务在预定时间到来时发送帖子。问题是要在页面上写，我需要一个页面访问令牌，而我无法使用应用程序访问令牌获得它（或者找不到如何做到这一点）。

作为一项 cron 任务，根本没有用户交互，因此我既无法获得用户访问令牌也无法获得页面访问令牌。用户之前已授权具有 manage_pages 和 publish_stream 权限的 Facebook 应用程序。

我已经尝试了一切以将应用程序访问令牌交换为页面访问令牌但没有成功。

在努力思考并阅读（几乎）Facebook 上的所有文档后，我有了一个想法：也许我可以在用户准备要在未来发送的帖子并保存它时获取用户访问令牌。这里的问题是如果令牌过期或失效会发生什么。

任何帮助将不胜感激：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T00:37:16.137

您尝试做的需要`offline_access`已弃用，现在已被延长到期时间访问令牌所取代。

阅读：[https ://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

您可以只使用文档中给出的示例代码，并获得一个扩展的访问令牌，然后您可以将其保存到数据库中，以便在 cron 到达触发帖子的时间时进行检索。

示例：[https ://developers.facebook.com/docs/howtos/login/server-side-login/](https://developers.facebook.com/docs/howtos/login/server-side-login/)

# javascript - 如何在 JavaScript 中生成随机单词？

> ID：13237421
> 
> 赞同：8
> 
> 时间：2012-11-05T17:39:44.583
> 
> 标签：javascript, random

> **可能重复：**
> [从 JavaScript 数组中获取随机值](https://stackoverflow.com/questions/4550505/getting-random-value-from-an-array)

好的，所以我在这里有三个变量，每个变量是石头、纸或剪刀。使用 JavaScript，如何随机生成其中一个词？

到目前为止，它是这样的：

```
<!DOCTYPE html>
<html>
    <body>
        <button type="button" onclick="myFunction()"> Click me</button>

        <script>
            function myFunction()
            {
                var c="Rock";
                var d="Paper";
                var e="Scissors";
            }
        </script>
    </body>
</html> 
```

然后我将有一个名为 K 的变量，它将是石头纸或剪刀中的随机单词。所以它会像这样：

```
alert("The computer chose: " + k); 
```

那么如何让 JavaScript 在三个变量和`c`之间随机选择呢？`d``e`

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-05T17:41:22.043

利用：

```
var things = ['Rock', 'Paper', 'Scissor'];
var thing = things[Math.floor(Math.random()*things.length)];
alert('The computer chose:' + thing); 
```

[示范](http://jsfiddle.net/KDmwn/1/)

* * *

只是为了准确回答你的问题，假设你真的想保留你的三个全局变量，你可以这样做：

```
var c = "Rock";
var d = "Paper";
var e = "Scissors";
var thing = window['cde'.charAt(Math.floor(Math.random()*3))];
document.write('The computer chose: ' + thing); 
```

[示范](http://dystroy.org/stackoverflow/rockpaperscissor.html)

（但不要。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T17:42:15.177

您可以使用`Math.random()`获取 0 和 1 之间的随机数。

如果你想要一个介于 0 和 2 之间的整个随机数。（所以：0、1 或 2）。您可以使用：

```
Math.floor(Math.random()*3); 
```

请注意，`Math.round`( 而不是`floor`) 在这里是**错误**的，因为边缘值的机会较低，您实际上可能也会得到`3`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T17:44:01.443

你应该做一个数组：

```
var words = ['Rock', 'Paper', 'Scissors']; 
```

然后生成一个介于 0 和数组长度之间的随机数，小数点为 0：

```
var number = Math.floor(Math.random() * words.length); 
```

然后选择关键字是您刚刚创建的随机数的单词：

```
var word = words[number]; 
```

总共：

```
var words = ['Rock', 'Paper', 'Scissors'];
var word = words[Math.floor(Math.random() * words.length)]; 
```

# javascript - 使用 src 属性访问脚本标签的内容（包括模板）

> ID：13237427
> 
> 赞同：7
> 
> 时间：2012-11-05T17:40:21.433
> 
> 标签：javascript, jquery, handlebars.js

> **可能重复：**
> [使用 Handlebars.js 时如何将模板 js 外包到不同的文件](https://stackoverflow.com/questions/12035839/how-to-outsource-a-template-js-to-a-different-file-when-using-handlebars-js)

我正在使用手把。他们建议在文档正文中包含这样的模板：

```
<script id="entry-template" type="text/x-handlebars-template">
     template content
</script> 
```

我想通过 src 属性使用模板内容并将我的模板（大量）存储在单独的文件中。

```
<script src="/path/to/my.template" id="entry-template" type="text/x-handlebars-template"></script> 
```

问题是如何访问 co 的内容呢？

```
$('script#entry-template').html() //returns ""
$('script#entry-template').text() //returns "" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T17:42:36.687

您需要获取`src`属性的值，然后使用 XMLHttpRequest 请求 URI……此时最好不要使用 a `<script type="not-js">`。

浏览器不会自动下载未知的脚本类型，也不会让 JS 以编程方式访问脚本。您可以访问*内联*脚本，因为它们是 DOM 的一部分，而外部脚本不是。

# git - 同时上传到 FTP 和 GIT？

> ID：13237429
> 
> 赞同：1
> 
> 时间：2012-11-05T17:40:29.667
> 
> 标签：git, svn, bitbucket, atlassian-sourcetree

所以，我第一次在个人项目中使用版本控制系统。在过去，这一切都已经设置好了，对我来说相当简单，但这次我是自己设置的。

由于这是我正在使用的 Web 应用程序，因此我希望能够在提交文件时自动将文件上传到服务器。

不确定这是否可能，但我希望它是。手动提交和上传东西似乎很痛苦。

无论如何，如果它有助于我使用 git 使用 SourceTree 和 BitBucket。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:53:27.293

有一些实用程序可以帮助从 Git 存储库中通过 FTP 部署内容，例如[git-ftp](https://github.com/ezyang/git-ftp)。

这样，您可以按照您想要的方式使用您的 Git 存储库，并且只要您想将它部署到您的服务器时只需执行 git-ftp 脚本，它就会自动通过 FTP 传输这些东西。

我建议您在提交 btw 时不要自动部署所有内容。因为你实际上应该确保你刚刚提交的内容是完美的。将其分开是个好主意，尤其是当您可以仅使用单个命令进行部署时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:47:55.153

我在这里假设您询问的是 GIT，而不是 SVN。Bitbucket 不再支持 SVN 存储库。

您可以使用 GIT 挂钩自动化 FTP 部署。这意味着您可以在 GIT 事件中挂接脚本，例如当新提交到达存储库时，您可以执行自定义命令。

这是一篇博客文章，解释了如何设置，以便您使用 git hooks 进行实时部署：http: [//joemaller.com/990/a-web-focused-git-workflow/](http://joemaller.com/990/a-web-focused-git-workflow/)

我自己在几个网站上使用它，对此我很满意。

希望这可以帮助。

/保罗

# apache - Writev 不对某些文件使用 MMAP？

> ID：13237430
> 
> 赞同：1
> 
> 时间：2012-11-05T17:40:43.693
> 
> 标签：apache, io, mmap

我一直在阅读有关 writev 效率的文章，并遇到了一个非常有趣的声明。我读到对于某些文件大小，使用 writev 时不会执行非常小的大小（小于 16k）mmap。这个指控是真的吗？我一直在寻找任何 mmap 限制，但找不到任何东西？例如，如果文件大小为“X”，那么它将不会执行，或者类似的任何东西。任何帮助是极大的赞赏。

# c# - 在特定索引处注入 PowerPoint 幻灯片

> ID：13237437
> 
> 赞同：0
> 
> 时间：2012-11-05T17:41:28.277
> 
> 标签：c#, powerpoint, openxml

如何将幻灯片插入到特定索引处的现有 PowerPoint 演示文稿中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:44:13.550

请参阅 MSDN 上的以下页面：

[如何：将新幻灯片插入演示文稿](http://msdn.microsoft.com/en-us/library/cc850834.aspx)

有关 OOXml 演示文稿的其他操作方法，请参阅以下内容：

[http://msdn.microsoft.com/en-us/library/cc850828.aspx](http://msdn.microsoft.com/en-us/library/cc850828.aspx)

# wordpress - 同一台服务器上的新 wordpress 站点不接触旧站点，但接管 URL

> ID：13237438
> 
> 赞同：2
> 
> 时间：2012-11-05T17:41:28.720
> 
> 标签：wordpress, dns, nginx, rewrite

问题如下：一个新的 WordPress 站点将安装在与当前站点相同的 Nginx 服务器上。当前的（基于 Joomla）具有一些复杂的数据库功能，这些功能将被重用。即新站点将从旧站点检索其内容的一部分，使用 PHPs file_get_contents() 或 HTTPRequests。

我对当前站点一无所知，所以我担心当我尝试给它一个新地址时，我会破坏东西。这就是这个问题的基础，所以如果我在这里已经错了，请说出来。

现在我的想法是只安装一个 wordpress 站点，并将 wordpress 地址配置设置为域名，但不将该域名的服务器指针设置为新站点。现在我将向当前站点添加一个重写规则，它将所有传入流量重写到新站点（服务器上的目录），除非请求来自本地主机，因此新站点本身可以​​到达当前站点。

我对这种事情比较陌生，考虑我提出的解决方案也会提出问题。我的问题是我的解决方案是否有效，和/或有更好的方法吗？不幸的是，我不能只是去测试它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:55:52.917

从理论上讲，这种方法会奏效，但听起来相当脆弱。即使您知道自己在做什么，重写规则也可能非常棘手，因此“除非它来自本地主机”可能会让您陷入循环。

您说如果将现有站点移至新域或子域，您不确定现有站点是否会损坏，但尝试确实没有害处，因为您可以在尝试时保持现有域不变。

因此，如果现有站点位于 example.com，请尝试设置第二个虚拟主机，从 internal.example.com 为其提供服务。如果它有效（或至少提供您试图抓取的内容），请继续设置 Wordpress 站点并使用“内部”URL 获取内容。

但真正的问题是，现在您不得不同时维护 Joomla 站点和 Wordpress 站点。您尝试重用的复杂数据库功能是什么？是否有可能将其迁移到一个独立的 PHP 块中，然后您可以从 Wordpress 调用它？

# grid - Zurb 基金会语义网格问题

> ID：13237439
> 
> 赞同：1
> 
> 时间：2012-11-05T17:41:38.883
> 
> 标签：grid, semantic-markup, zurb-foundation

Zurb Foundation 很棒，除了语义网格之外的一切都很好。我安装了 zurb-foundation gem（最新的公开版本）；从 Zurb 官方网站到 index.html 和 app.scss 的语义网格复制粘贴标记示例和 Scss 示例，它工作不正确：页面对“中等景观”和较低格式没有响应，当我调整页面大小时 - 滚动条是出现。[我在https://groups.google.com/forum/?fromgroups=#!topic/foundation-framework-/Yjh_9f21foQ](https://groups.google.com/forum/?fromgroups=#!topic/foundation-framework-/Yjh_9f21foQ)和这个页面上发现了同样的问题- [http://szabinho.com/zurb/](http://szabinho.com/zurb/)很好地说明了我在说什么。大家可以给我看看Zurb的语义网格的实际例子吗？它是一个非常强大和酷炫的框架，但有一件事阻止了我使用——这个烦人的麻烦。希望你能帮助我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:31:14.973

在使用 Sass 和 mixins 编译我的语义网格时，我遇到了类似的问题。

我注意到 .row 设置了最小宽度：

```
.row {
  width: 960px;
  max-width: 100%;
  min-width: 768px;
  margin: 0 auto;
} 
```

所以这意味着所有行的宽度至少为 768px。你可以在 app.css 中覆盖这个设置（或者你正在使用 SASS 的 scss），如下所示：

```
.row {
  min-width: 0!important;
} 
```

我还注意到这个问题只在使用 SASS mixins 时发生`@include outerRow()`，`innerRow()`当我重新使用时，`<div class="row"><div class="twelve columns">`我没有收到这个错误。

# java - Red5 1.0.0 应用程序拒绝连接

> ID：13237447
> 
> 赞同：1
> 
> 时间：2012-11-05T17:42:14.873
> 
> 标签：java, red5, rtmp

我有一个 RED5 应用程序，它在 Red5 0.8.0 下工作（尽管它在几秒钟后断开了 RTMPT 上的连接）。我查看了最新版本（4441）并对应用程序进行了一些更改。现在我无法连接到应用程序。我每次都得到 - NetConnection.Connect.Rejected。

在我看到的日志中：

```
[INFO] [http-0.0.0.0-80-exec-3] org.red5.server.net.rtmp.codec.RTMPProtocolDecoder - Action connect
[WARN] [Red5_Scheduler_Worker-3] org.red5.server.net.rtmp.RTMPConnection - Closing RTMPMinaConnection from 0:0:0:0:0:0:0:1%0 : 52966 to localhost (in: 3458 out: 3262), with id 1 due to long handshake 
```

握手时间设置为15秒，所以一定够用了。在日志中，我什至没有尝试连接。我在启动、连接、断开方法中有一个方法名称的日志，但是这些不会显示。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T19:47:57.177

*由于长时间握手*也可能意味着您仍然打开了一些浏览器窗口，在您重新启动 red5 后尝试连接到应用程序。重新启动 red5 时，您总是必须关闭所有浏览器窗口。

此外，您需要查看的第一件事是 red5/error.log。
其他都不算数 :)
我猜你有一些启动问题，Red5 0.8 不是 100% 兼容最新版本。

塞巴斯蒂安

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:18:49.470

服务器拒绝连接的一个可能情况是用户身份验证失败。如果您在应用程序的连接方法中实现它，请检查用户是否获得身份验证。RTMP 连接关闭只是告诉您服务器在每 X 毫秒后对客户端进行 ping 操作，并且经过一定次数的此类试验后，服务器没有收到客户端的响应（称为握手超时）。在这种情况下，服务器关闭与“空闲”的连接' 客户。

# php - 使用 php 的 Drive API 中的凭据无效

> ID：13237448
> 
> 赞同：2
> 
> 时间：2012-11-05T17:42:16.590
> 
> 标签：php, oauth-2.0, google-drive-api, google-api-php-client

我正在尝试对用户在其驱动器中拥有的所有文件做一个简单的列表（在 php 中）。我想将访问令牌、用户 ID 和电子邮件保存在 bd 中并获取用户 ID 和电子邮件，我编写了以下代码：

```
(..)
$api=new Google_Client();
$api->setAccessToken($accessToken);
$api->setUseObjects(true);
$userInfoService = new Google_Oauth2Service($api);
$userinfo=$userInfoService->userinfo->get();
(..) 
```

在此示例的最后一行中，我收到此错误：

调用 GET [https://www.googleapis.com/oauth2/v2/userinfo 时](https://www.googleapis.com/oauth2/v2/userinfo)出错：(401) 凭据无效

但我打印了我发送的 accessToken 并且它是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T05:12:28.390

访问令牌在一小时后过期。也许您正在尝试重用已过期的访问令牌？

检查 DrEdit 应用程序以获取完整的 PHP 示例，该示例显示如何在数据库中正确存储凭据并在需要时恢复它们：

[https://developers.google.com/drive/examples/php](https://developers.google.com/drive/examples/php)

# c# - c#和java - hmacsha256 hash之间的区别

> ID：13237456
> 
> 赞同：9
> 
> 时间：2012-11-05T17:42:38.713
> 
> 标签：c#, java, encryption, hmac, sha256

我在Java中有以下代码：

```
byte[] secretKey = secretAccessKey.getBytes("UTF-8");
SecretKeySpec signingKey = new SecretKeySpec(secretKey, "HmacSHA256");
Mac mac = Mac.getInstance("HmacSHA256");
mac.init(signingKey);
byte[] bytes = data.getBytes("UTF-8");
byte[] rawHmac = mac.doFinal(bytes);
String result = javax.xml.bind.DatatypeConverter.printBase64Binary(rawHmac); 
```

以及 C# 中的以下代码：

```
UTF8Encoding enc = new UTF8Encoding();
byte[] secretKey = enc.GetBytes(secretAccessKey);
HMACSHA256 hmac = new HMACSHA256(secretKey);
hmac.Initialize();
byte[] bytes = enc.GetBytes(data);
byte[] rawHmac = hmac.ComputeHash(bytes);
string result = Convert.ToBase64String(rawHmac); 
```

字节数组“secretKey”和“bytes”是等价的，但字节数组“rawHmac”不同，字符串“result”不同。谁能明白为什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-05T17:44:57.057

不要这样做：

```
byte[] bytes = data.getBytes(); 
```

这将使用平台默认编码将字符串转换为字节数组。这可能因平台而异，而您想要可重复的东西。我建议使用 UTF-8：

```
byte[] bytes = data.getBytes("UTF-8"); 
```

（当然，对密钥做同样的事情。）

然后，您应该在 C# 中使用相同的编码 -*而不是*ASCII，除非您真的不想处理非 ASCII 字符。

```
byte[] bytes = Encoding.UTF8.GetBytes(data); 
```

之后您如何比较结果也不清楚 - 不要忘记它`byte`是用 Java 签名的，但在 C# 中是未签名的。出于比较目的，将哈希转换为十六进制或 base64 可能是最简单的。

编辑：我强烈怀疑最后一部分是问题 - 比较结果。

这里有两个简短但完整的程序（在 Java 中使用 iharder.net base64 转换器），它们产生相同的 base64 输出：

爪哇：

```
import java.util.*;
import javax.crypto.*;
import javax.crypto.spec.*;

public class Test {
    public static void main (String[] args) throws Exception {
        String secretAccessKey = "mykey";
        String data = "my data";
        byte[] secretKey = secretAccessKey.getBytes();
        SecretKeySpec signingKey = new SecretKeySpec(secretKey, "HmacSHA256");
        Mac mac = Mac.getInstance("HmacSHA256");
        mac.init(signingKey);
        byte[] bytes = data.getBytes();
        byte[] rawHmac = mac.doFinal(bytes);
        System.out.println(Base64.encodeBytes(rawHmac));
    }
} 
```

C＃：

```
using System;
using System.Security.Cryptography;
using System.Text;

class Test
{
    static void Main()
    {
        String secretAccessKey = "mykey";
        String data = "my data";
        byte[] secretKey = Encoding.UTF8.GetBytes(secretAccessKey);
        HMACSHA256 hmac = new HMACSHA256(secretKey);
        hmac.Initialize();
        byte[] bytes = Encoding.UTF8.GetBytes(data);
        byte[] rawHmac = hmac.ComputeHash(bytes);
        Console.WriteLine(Convert.ToBase64String(rawHmac));
    }
} 
```

两者的输出：

```
ivEyFpkagEoghGnTw/LmfhDOsiNbcnEON50mFGzW9/w= 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:16:00.190

正如所证明的，这是一个非问题，哈希值总是相同的。

在我的情况下，这个问题是无关的，Java 大写百分比编码在 UrlEncoder 上但 .NET 没有。

去展示隔离测试的重要性！

# jquery-mobile - 使用 changePage 打开对话框 - 未发送数据对象

> ID：13237457
> 
> 赞同：0
> 
> 时间：2012-11-05T17:42:41.573
> 
> 标签：jquery-mobile

```
$.mobile.changePage("verify.aspx", { transition: "pop", role: "dialog", data: $("#form1").serialize() }); 
```

我正在使用上述语法打开一个对话框，并尝试通过 data 参数发送表单数据，没有传递任何内容。

这是我打开对话框时在查询字符串中传递的内容：

```
#&ui-state=dialog&ui-state=dialog 
```

（作为旁注，此调用源自另一个对话框中的按钮，因此两个 ui-state=dialog's）

如您所见，没有表单数据。有什么想法可以将数据保存在 url 中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:32:19.173

回答我自己的问题：

发现您请求的对话框的 data-url 属性是使用相对 url 注入的。

通过执行以下操作：

```
$("#dialog").on("pagebeforecreate", function (evt) {
            var urlObj = $.mobile.path.parseUrl($(this).attr("data-url")); 
```

将使您可以访问 url，从而访问正确的查询字符串值。

# python - 使用 Pysandbox 实现在线 Python Shell

> ID：13237459
> 
> 赞同：1
> 
> 时间：2012-11-05T17:42:46.153
> 
> 标签：python, implementation, pysandbox

我想构建一个这样的在线 Python [shell](http://shell.appspot.com/)。目前我正在尝试在 Python 中构建一个模块，它执行以下操作

1.  创建一个新会话。
2.  运行作为字符串保存传递的代码并维护当前会话的环境变量。

我正在尝试使用[Pysandbox](https://github.com/haypo/pysandbox)来实现这一点。这是我到目前为止的努力

```
from sandbox import Sandbox, SandboxConfig
from optparse import OptionParser
import sys,traceback

class Runner:
    def __init__(self):
        self.options = self.parseOptions()
        self.sandbox = Sandbox(self.createConfig())
        self.localvars = dict()
    def parseOptions(self):
        parser = OptionParser(usage="%prog [options]")
        SandboxConfig.createOptparseOptions(parser, default_timeout=None)
        parser.add_option("--debug",
            help="Debug mode",
            action="store_true", default=False)
        parser.add_option("--verbose", "-v",
            help="Verbose mode",
            action="store_true", default=False)
        parser.add_option("--quiet", "-q",
            help="Quiet mode",
            action="store_true", default=False)
        options, argv = parser.parse_args()
        if argv:
            parser.print_help()
            exit(1)
        if options.quiet:
            options.verbose = False
        return options

    def createConfig(self):
        config = SandboxConfig.fromOptparseOptions(self.options)
        config.enable('traceback')
        config.enable('stdin')
        config.enable('stdout')
        config.enable('stderr')
        config.enable('exit')
        config.enable('site')
        config.enable('encodings')
        config._builtins_whitelist.add('compile')
        config.allowModuleSourceCode('code')
        config.allowModule('sys',
            'api_version', 'version', 'hexversion')
        config.allowSafeModule('sys', 'version_info')
        if self.options.debug:
            config.allowModule('sys', '_getframe')
            config.allowSafeModule('_sandbox', '_test_crash')
            config.allowModuleSourceCode('sandbox')
        if not config.cpython_restricted:
            config.allowPath(__file__)
        return config
    def Run(self,code):
        # log and compile the statement up front
        try:
            #logging.info('Compiling and evaluating:\n%s' % statement)
            compiled = compile(code, '<string>', 'single')
        except:
            traceback.print_exc(file=sys.stdout)
            return
        try:
            self.sandbox.execute(code)
        except:
            traceback.print_exc(file=sys.stdout)

def f():
    f = open('test.py')
    code = ''
    for lines in f:
        code = code+lines
    runner = Runner()
    runner.Run('a = 5')
    runner.Run('b = 5')
    runner.Run('print a+b')
f() 
```

我遇到了3个主要问题。

1.  如何很好地显示错误？例如，运行上面的代码会产生以下输出

    文件“execute.py”，第 60 行，运行 self.sandbox.execute(code) 文件“/home/aaa/aaa/aaa/pysandbox-master/sandbox/sandbox_class.py”，第 90 行，执行返回 self。 execute_subprocess(self, code, globals, locals) 文件“/home/aaa/aaa/aaa/pysandbox-master/sandbox/subprocess_parent.py”，第 119 行，在 execute_subprocess 中引发 output_data['error'] NameError: name 'a'没有定义

这里不受欢迎的是“execute.py”的调用回溯。我只希望函数返回以下错误。

```
NameError: name 'a' is not defined 
```

1.  如何维护当前会话的环境？例如，在上面的代码序列中

    a = 5
    b = 5
    打印 a+b

应该会产生输出 10。有什么想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-05T18:12:31.890

这应该可以工作，尽管您可能想要使用异常的输出：

```
from sandbox import Sandbox, SandboxConfig
from optparse import OptionParser
import sys,traceback

class Runner:
    def __init__(self):
        self.options = self.parseOptions()
        self.sandbox = Sandbox(self.createConfig())
        self.localvars = dict()
        self.code = ''
    def parseOptions(self):
        parser = OptionParser(usage="%prog [options]")
        SandboxConfig.createOptparseOptions(parser)#, default_timeout=None)
        parser.add_option("--debug",
            help="Debug mode",
            action="store_true", default=False)
        parser.add_option("--verbose", "-v",
            help="Verbose mode",
            action="store_true", default=False)
        parser.add_option("--quiet", "-q",
            help="Quiet mode",
            action="store_true", default=False)
        options, argv = parser.parse_args()
        if argv:
            parser.print_help()
            exit(1)
        if options.quiet:
            options.verbose = False
        return options

    def createConfig(self):
        config = SandboxConfig.fromOptparseOptions(self.options)
        config.enable('traceback')
        config.enable('stdin')
        config.enable('stdout')
        config.enable('stderr')
        config.enable('exit')
        config.enable('site')
        config.enable('encodings')
        config._builtins_whitelist.add('compile')
        config.allowModuleSourceCode('code')
        config.allowModule('sys',
            'api_version', 'version', 'hexversion')
        config.allowSafeModule('sys', 'version_info')
        if self.options.debug:
            config.allowModule('sys', '_getframe')
            config.allowSafeModule('_sandbox', '_test_crash')
            config.allowModuleSourceCode('sandbox')
        if not config.cpython_restricted:
            config.allowPath(__file__)
        return config
    def Run(self,code):
        code = '\n'.join([self.code,code])
        # log and compile the statement up front
        try:
            #logging.info('Compiling and evaluating:\n%s' % statement)
            compiled = compile(code, '<string>', 'single')
        except:
            traceback.print_exc(file=sys.stdout)
            return
        try:
            self.sandbox.execute(code)
        except:
            err = sys.exc_info()[1]
            print type(err), err
        else:
            self.code = code

def f():
    f = open('test.py')
    code = ''
    for lines in f:
        code = code+lines
    runner = Runner()
    runner.Run('a = 5')
    runner.Run('b = 5')
    runner.Run('print a+b')
f() 
```

# java - 在android应用程序中获取classes.dex的字节码

> ID：13237461
> 
> 赞同：0
> 
> 时间：2012-11-05T17:43:01.413
> 
> 标签：java, android, dalvik, disassembly

我正在尝试从 Android 应用程序编程中反汇编 classes.dex（或至少在 JVM 中获得类似字节码的东西）文件。我找到[了这个规范](http://source.android.com/tech/dalvik/dalvik-bytecode.html)，但我不明白 Dalvik VM 有字节码，还是只有汇编程序？它是否具有像 x86 不同的命令长度或与 JVM 相同的命令长度？DVM是否存在类似[此表的内容？](http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:27:19.117

这是我搜索的内容：[Dalvik opcodes](http://pallergabor.uw.hu/androidblog/dalvik_opcodes.html)。从这张表中，您可以了解命令的长度以及如何从 *.dex 中获取字节码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:54:14.907

该页面列出了所有字节码。您需要的是 .dex 文件格式：[http ://s.android.com/tech/dalvik/dex-format.html](http://s.android.com/tech/dalvik/dex-format.html)

您需要先解析 dex 文件，然后才能开始反汇编字节码，该字节码位于与方法关联的 code_item 结构中。

# java - JList添加第一个元素非常慢

> ID：13237464
> 
> 赞同：1
> 
> 时间：2012-11-05T17:43:11.597
> 
> 标签：java, swing, jlist, windowbuilder, defaultlistmodel

我正在向`JList`with添加一个字符串`DefaultListModel`，它需要几秒钟才能出现。有时，我可能必须单击`JList`才能显示列表。

我正在使用 Eclipse 靛蓝。当我在将元素添加到 JList 后设置断点时，执行速度很快。

我在网上搜索了*JList 很慢*，他们都在谈论将许多项目添加到列表中。我将第一个元素添加到列表中。

这是我的代码片段：

```
 private DefaultListModel function_list_model = new DefaultListModel();
    private JList list_functions = new JList(function_list_model);
//...
// Initialization code:
        JPanel panel_function_list = new JPanel();
        panel_function_list.setBounds(10, 53, 541, 220);
        panel_functions.add(panel_function_list);
        panel_function_list.setLayout(null);

        JLabel lblFunctions = new JLabel("Functions");
        lblFunctions.setHorizontalAlignment(SwingConstants.CENTER);
        lblFunctions.setBounds(235, 11, 99, 14);
        panel_function_list.add(lblFunctions);
        list_functions.setBorder(new LineBorder(new Color(0, 0, 0)));

        list_functions.setBounds(10, 42, 492, 177);
        list_functions.setFont(new Font("Courier New", Font.PLAIN, 12));
        list_functions.setPreferredSize(new Dimension(0, 150));
        list_functions.setMinimumSize(new Dimension(32767, 100));
        list_functions.setMaximumSize(new Dimension(32767, 100));
        JScrollPane scrollPane_functions = new JScrollPane(list_functions);
        scrollPane_functions.setBounds(10, 79, 541, 183);
        panel_functions.add(scrollPane_functions);

// Code to add a string:  
    String burger = new String("burger");
    function_list_model.addElement(burger); 
```

我还在 Eclipse 中使用 WindowBuilder。

那么如何提高性能`JList`呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T19:03:53.810

如果你想我可以生成新`Item`的`Char[]`并`doClick()`要求`JButton("Fire")`

```
import java.awt.*;
import java.awt.event.*;
import java.util.Date;
import javax.swing.*;
import javax.swing.event.*;

public class ListDemo extends JPanel implements ListSelectionListener {

    private JList list;
    private DefaultListModel listModel;
    private static final String hireString = "Hire";
    private static final String fireString = "Fire";
    private JButton fireButton;
    private JTextField employeeName;
    private javax.swing.Timer timer = null;
    private int delay = 3;
    private int count = 0;

    public ListDemo() {
        super(new BorderLayout());
        listModel = new DefaultListModel();
        listModel.addElement("Jane Doe");
        listModel.addElement("John Smith");
        listModel.addElement("Kathy Green");
        list = new JList(listModel);
        list.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        list.setSelectedIndex(0);
        list.addListSelectionListener(this);
        list.setVisibleRowCount(5);
        JScrollPane listScrollPane = new JScrollPane(list);
        JButton hireButton = new JButton(hireString);
        HireListener hireListener = new HireListener(hireButton);
        hireButton.setActionCommand(hireString);
        hireButton.addActionListener(hireListener);
        hireButton.setEnabled(false);
        fireButton = new JButton(fireString);
        fireButton.setActionCommand(fireString);
        fireButton.addActionListener(new FireListener());
        employeeName = new JTextField(10);
        employeeName.addActionListener(hireListener);
        employeeName.getDocument().addDocumentListener(hireListener);
        String name = listModel.getElementAt(list.getSelectedIndex()).toString();
        JPanel buttonPane = new JPanel();
        buttonPane.setLayout(new BoxLayout(buttonPane, BoxLayout.LINE_AXIS));
        buttonPane.add(fireButton);
        buttonPane.add(Box.createHorizontalStrut(5));
        buttonPane.add(new JSeparator(SwingConstants.VERTICAL));
        buttonPane.add(Box.createHorizontalStrut(5));
        buttonPane.add(employeeName);
        buttonPane.add(hireButton);
        buttonPane.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
        add(listScrollPane, BorderLayout.CENTER);
        add(buttonPane, BorderLayout.PAGE_END);
        start();
        System.out.println(new Date());
    }

    private void start() {
        timer = new javax.swing.Timer(delay * 10, updateCol());
        timer.start();
    }

    public Action updateCol() {
        return new AbstractAction("text load action") {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                listModel.addElement("Jane Doe");
                listModel.addElement("John Smith");
                listModel.addElement("Kathy Green");
                list.ensureIndexIsVisible(listModel.getSize()-1);
                count++;
                if (count >= 500) {
                    timer.stop();
                    System.out.println("update cycle completed");
                    System.out.println(new Date());
                }
            }
        };
    }

    class FireListener implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent e) {
            int index = list.getSelectedIndex();
            listModel.remove(index);
            int size = listModel.getSize();
            if (size == 0) { //Nobody's left, disable firing.
                fireButton.setEnabled(false);
            } else { //Select an index.
                if (index == listModel.getSize()) {
                    index--;
                }
                list.setSelectedIndex(index);
                list.ensureIndexIsVisible(index);
            }
        }
    }

    class HireListener implements ActionListener, DocumentListener {

        private boolean alreadyEnabled = false;
        private JButton button;

        HireListener(JButton button) {
            this.button = button;
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            String name = employeeName.getText();
            if (name.isEmpty() || alreadyInList(name)) {
                Toolkit.getDefaultToolkit().beep();
                employeeName.requestFocusInWindow();
                employeeName.selectAll();
                return;
            }
            int index = list.getSelectedIndex(); //get selected index
            if (index == -1) { //no selection, so insert at beginning
                index = 0;
            } else {           //add after the selected item
                index++;
            }
            listModel.insertElementAt(employeeName.getText(), index);
            //listModel.addElement(employeeName.getText());
            employeeName.requestFocusInWindow();
            employeeName.setText("");
            list.setSelectedIndex(index);
            list.ensureIndexIsVisible(index);
        }

        protected boolean alreadyInList(String name) {
            return listModel.contains(name);
        }

        @Override
        public void insertUpdate(DocumentEvent e) {
            enableButton();
        }

        @Override
        public void removeUpdate(DocumentEvent e) {
            handleEmptyTextField(e);
        }

        @Override
        public void changedUpdate(DocumentEvent e) {
            if (!handleEmptyTextField(e)) {
                enableButton();
            }
        }

        private void enableButton() {
            if (!alreadyEnabled) {
                button.setEnabled(true);
            }
        }

        private boolean handleEmptyTextField(DocumentEvent e) {
            if (e.getDocument().getLength() <= 0) {
                button.setEnabled(false);
                alreadyEnabled = false;
                return true;
            }
            return false;
        }
    }

    @Override
    public void valueChanged(ListSelectionEvent e) {
        if (e.getValueIsAdjusting() == false) {

            if (list.getSelectedIndex() == -1) {
                fireButton.setEnabled(false);
            } else {
                fireButton.setEnabled(true);
            }
        }
    }

    private static void createAndShowGUI() {
        JFrame frame = new JFrame("ListDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JComponent newContentPane = new ListDemo();
        newContentPane.setOpaque(true);
        frame.setContentPane(newContentPane);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

# knockout.js - 传递给 KO 点击绑定的打字稿成员方法以“错误”范围结束

> ID：13237467
> 
> 赞同：6
> 
> 时间：2012-11-05T17:43:27.073
> 
> 标签：knockout.js, typescript

我正在使用 KnockoutJS 和 Typescript 编写单页应用程序。

问题是这样的，我有一个 MainViewModel 方法：

```
public addToCase(email) {
    this.addToCaseVM.setEmail(email, this.getEmailBody());
}; 
```

我的页面中有一个电子邮件视图，其中有一个绑定在 html 中的“添加到案例”按钮，如下所示：

```
<a class="btn btn-info" data-bind="click: $root.addToCase" data-toggle="modal" href="#addToCaseModal"><i class="icon-plus-sign"></i>&nbsp;Add To Existing Case</a> 
```

$root 是我的 MainViewModel。单击此按钮时，函数的“电子邮件”参数是 MainViewModel 中正确选择的电子邮件，但函数的范围也是 EmailViewModel，而不是定义函数的 MainViewModel。

我理解为什么会发生这种情况，我对如何解决 Typescript 中的特定问题很感兴趣，因为我无法像在纯 JavaScript 中那样声明指向 MainViewModel 实例的指针：

```
var MainViewModel = (function(){ 
    var self = this; 

    this.addToCase = function(email) {
        self.addToCaseVM.setEmail(email, self.getEmailBody());
    };
})(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T10:08:31.473

我对此的解决方案是声明类方法并将其留空，直到调用构造函数，然后定义方法体。这样方法的范围将正确。

```
class MainViewModel {

    addToCase: (email) => void;

    constructor() {
        this.addToCase = (email) => {
            this.addToCaseVM.setEmail(email, this.getEmailBody());
        };
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T18:05:16.323

如果您`MainViewModel`是单例，那么您可以使用该模式来创建静态引用。

```
class MainViewModel {

    static self:MainViewModel;

    constructor() {
        self = this;
    } 

    addToCase = function(email) {
        MainViewModel.self.addToCaseVM.setEmail(email, MainViewModel.self.getEmailBody());
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T18:38:17.570

您可以使用函数文字，以便将父对象传递给 addToCase 函数，但这似乎是在解决问题而不是解决问题。

```
data-bind="click: function(data) {$root.addToCase(data,$root)}" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T18:59:17.867

您可以使用`() =>`来保留词法范围。

出于演示目的，我已将其制作为一个完整的示例，但您可以看到它只是`() =>`具有魔力的。

```
function setEmail(email: string, callback: Function) {
    callback();
}

class MainViewModel { 
    addToCase(email: string) {
        setEmail(email, () => {this.getEmailBody();});
    }

    getEmailBody() {
        alert('getEmailBody');
    }
}

var model = new MainViewModel();
model.addToCase('hello'); 
```

# jquery - 带有范围输入的 Jquery Tools 垂直滚动

> ID：13237471
> 
> 赞同：1
> 
> 时间：2012-11-05T17:44:00.520
> 
> 标签：jquery, input, range

我正在尝试使用 Jquery 工具范围输入来上下滚动 div。我已经实现了它，但它不能正常工作。

这是该页面的链接，位于“投资组合”选项卡上... [http://www.tripl3infinity.com/test/home](http://www.tripl3infinity.com/test/home)

我的问题是范围滑块和滚动 div 不“同步”。当页面首次加载时，滑块句柄位于输入范围的顶部，而 div 位于包含包装器的顶部。如果我用滑块向下滚动，然后回到范围输入的顶部，那么 div 的顶部就会有额外的空间。如果你尝试一下，你就会明白我的意思。

这是我正在使用的脚本...

```
$(function() {
//PORT RANGE SLIDER
// get handle to the scrollable DIV
var scroll = $("#portScrollable");
$(":range").rangeinput({ 
// slide the DIV along with the range using jQuery's css() method
onSlide: function(ev, step)  {
scroll.css({bottom: -step});
},
progress: false,
// set prescision
prescision: 0,
// initial value. also sets the DIV's initial scroll position
value: 100,
// this is called when the slider is clicked. we animate the DIV
change: function(e, i) {
scroll.animate({bottom: -i}, "fast");
},
// disable drag handle animation when when slider is clicked
speed: 0
}); 
```

提前感谢您的帮助！

# sql - 在 SQL 中舍入平均值时如何检索小数

> ID：13237477
> 
> 赞同：40
> 
> 时间：2012-11-05T17:44:19.820
> 
> 标签：sql, sql-server, sql-server-2008

这是我的 SQL 语句

```
SELECT ROUND(AVG(column_name), 100) 
FROM [database].[dbo].[table] 
```

我检索到的答案可能是 908 行`3`之间的数字范围。`1 - 5`

我需要它说`3.0`或`3.09`。这可能吗？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-11-05T17:49:03.997

平均值将与值具有相同的数据类型，因此转换值：

```
SELECT ROUND(AVG(CAST(column_name AS FLOAT)), 2) FROM [database].[dbo].[table] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T14:28:06.470

我不确定这是否会帮助你的骷髅癖，但试试这个

```
 SELECT CAST(AVG(CAST(column_name as DECIMAL(10,2))) AS DECIMAL(10,2))FROM [table_name] 
```

浮点数是近似值，另一方面，小数会使其更加精确，您可能需要阅读浮点数数学和小数。起初我为此感到挣扎，但有时仍然感到迷茫。希望这会帮助你。

在 C# 中，不确定我是否会因为在此处发布答案而遇到麻烦，但您是否尝试过将其转换为双精度并使用`ExecuteScalar()`

尝试这个：

```
 protected void Page_Load(object sender, EventArgs e)
    {
     SqlConnection conn= sqlconnectionstring;
     SqlCommand cmd = new SQLCommand("SELECT STATEMENT",conn);
     cmd.CommandType = CommandType.Text;
     conn.Open();
     Double result = Convert.ToDouble(cmd.ExecuteScalar());
     lblresult.text = "the result is " + result;
     conn.Dispose();
     cmd.Dispose();
    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-05T17:54:49.960

你甚至不需要在`ROUND`那里做一个，真的。您可以将您的值转换为`DECIMAL`，如下所示：

```
SELECT AVG(CONVERT(DECIMAL(16,2),YourColumn)) 
FROM YourTable 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-05T17:54:13.933

我不完全确定您要问什么，但我认为您希望以更高的精度返回数字。

您将调用包装在[ROUND](http://msdn.microsoft.com/en-us/library/ms175003.aspx)函数中，但如果您的列的数据类型没有任何大于 0 的精度（例如 int），则需要先将数据 CAST 或 CONVERT 转换为另一种类型。

以下是一些示例，说明了将数据转换为不同类型的[几种方法：](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

```
SELECT CAST(100 AS decimal(5, 2)) -- Gives you "100.00"
      ,CAST(100 AS float) --<== Gives you "100"
      ,CAST(100.0 AS float) --<== Gives you "100"
      ,CAST(100.01 AS float) --<== Gives you "100.01" 
```

另外，请查看[MSDN：数据类型 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms187752.aspx)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-28T13:58:21.387

```
CAST(AVG(column_name) AS DECIMAL(5, 2)) 
```

它显示 100 为 100.00 和 100.05 为 100.05

# javascript - 将转换后的 html 分配给服务器端控件

> ID：13237478
> 
> 赞同：0
> 
> 时间：2012-11-05T17:44:21.667
> 
> 标签：javascript, asp.net

我正在使用降价，并且我有一些输入，例如`**test**`这使得单词 test 出现在粗体**测试**中，并且我已经将它转换为 html 像这样“

```
 var converter1 = Markdown.getSanitizingConverter();
                var editor1 = new Markdown.Editor(converter1);
                editor1.run();

                var d = document.getElementById("wmd_input");
                var html = converter1.makeHtml(d.value);
                alert(html); 
```

这提醒`<b>test</b>`问题是我需要获取这个值，即`<b>test</b>`通过服务器端代码（asp.net）访问它。我尝试将它分配给这样的变量：

```
 document.getElementById("Label1").value = html; 
```

但它似乎不起作用，当我转到它背后的代码时，它显示`Label1`为空。这可能吗？

## 编辑

我试图将其更改为隐藏字段相同的问题：

```
<script type="text/javascript">
                (function () {
                    var converter1 = Markdown.getSanitizingConverter();
                    var editor1 = new Markdown.Editor(converter1);
                    editor1.run();

                    var d = document.getElementById("wmd_input");
                    var html = converter1.makeHtml(d.value);
                    alert(html);

                    document.getElementById('<%= h1.ClientID %>').value = html;
                    var h = document.getElementById('<%= h1.ClientID %>');
                    alert(h.value);
                })();
            </script> 
```

我遇到的问题是我有一个 asp.net 服务器端按钮，单击该按钮时我尝试执行此操作：

`Label1.Text = h1.Value;`

那就是将隐藏字段中的值存储到标签中，但这不起作用。当我在其中放置一个断点时，它显示`h1`为空`""`....所以我不确定是什么事件或如何执行此操作，以便当我对我的 textarea 进行更改时`wmd_input`，我应该能够在我的服务器端看到这些更改代码...

这是我的整个 asp.net 表单：

```
<html>
    <head>
        <title>PageDown Demo Page</title>
        <link rel="stylesheet" type="text/css" href="css/demo.css" />
        <script type="text/javascript" src="js/Markdown.Converter.js"></script>
        <script type="text/javascript" src="js/Markdown.Sanitizer.js"></script>
        <script type="text/javascript" src="js/Markdown.Editor.js"></script>
    </head>
    <body>
        <form id="myForm" runat="server">
            <div class="wmd-panel">
                <div id="wmd-button-bar"></div>
                <textarea cols="5" rows="5" id="wmd_input" class="wmd-input" runat="server"></textarea>
                <div id="wmd_preview" class="wmd-panel wmd-preview" runat="server"></div>
            </div>
            <asp:button id="Button1" runat="server" Text="Set" onclick="Button1_Click"></asp:button>
            <asp:button id="Button2" runat="server" Text="Get" onclick="Button2_Click"></asp:button><asp:label id="Label1" runat="server">Label</asp:label>
            <asp:HiddenField ID="h1" runat="server" EnableViewState="true" />
            <script type="text/javascript">
                (function () {
                    var converter1 = Markdown.getSanitizingConverter();
                    var editor1 = new Markdown.Editor(converter1);
                    editor1.run();

                    var d = document.getElementById("wmd_input");
                    var html = converter1.makeHtml(d.value);
                    alert(html);

                    document.getElementById('<%= h1.ClientID %>').value = html;
                    alert(document.getElementById('<%= h1.ClientID %>').value);
                })();
            </script>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:55:50.023

该`asp:Label`标签不是输入控件，因此它不会被发送回服务器。我建议使用`asp:HiddenField`or`asp:TextBox`代替。（Adil 的观点也很重要，您需要确保客户端 ID 确实是您认为的那样。）

* * *

这是一个对我有用的测试。在第一个页面加载时，标签显示“初始值”，但警报显示“更新”。回发后，标签也显示“已更新”。

**编辑**在客户端事件处理程序中添加了客户端更新逻辑。

```
<%@ Page Title="Test" Language="C#" AutoEventWireup="true" %>

<script runat="server">
    void Page_Load()
    {
        l1.Text = h1.Value;
    }
</script>

<html>
<body>
    <form runat="server">
        <asp:HiddenField runat="server" Value="initial value" ID="h1" />
        <asp:Label runat="server" ID="l1" />
        <asp:Button runat="server" Text="do postback" />
    </form>

    <script>
        document.getElementById('<%= Button1.ClientID %>').onclick = function () {
            document.getElementById('<%= h1.ClientID %>').value = 'updated';
            alert(document.getElementById('<%= h1.ClientID %>').value);
        };
    </script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T17:55:07.240

标签不张贴。您必须使用`input`or`textarea`元素 ( [`<asp:TextBox>`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.textbox.aspx))。如果您不希望用户看到标记源，也可以使用[`<asp:HiddenField>`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hiddenfield.aspx).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T18:05:12.603

你应该可以通过使用 knockoutjs 来做你想做的事[http://knockoutjs.com/examples/helloWorld.html](http://knockoutjs.com/examples/helloWorld.html) 你可以使用元素绑定。

# c# - 禁止在 WebBrowser 控件中单击或键入

> ID：13237485
> 
> 赞同：5
> 
> 时间：2012-11-05T17:44:45.793
> 
> 标签：c#, webbrowser-control

我正在使用 WebBrowser 控件。我需要禁用单击或键入。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T06:56:58.977

为了防止用户点击链接，我将`AllowNavigation`属性设置为`False`.

从技术上讲，用户仍然可以点击链接，他们只是不做任何事情。设置此属性后，更新`DocumentText`属性似乎不起作用，您需要`AllowNavigation`打开，设置 html 文本，然后关闭。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T17:56:31.340

你可以完全禁用 WebBrowser 控件我相信它支持启用禁用功能因此你可以阅读但你不能点击或输入

```
YouWebBrowserControllID.Enabled = false; 
```

在其他情况下试试这个

```
((Control)webBrowser1).Enabled = false; 
```

# mysql - 当特定值不存在时，在 mysql 结果中添加行

> ID：13237487
> 
> 赞同：0
> 
> 时间：2012-11-05T17:44:56.590
> 
> 标签：mysql

我正在尝试修改 MySQL 输出结果。

```
Select number_purchases, COUNT(number_purchases) as user_count
FROM user_order
GROUP BY number_purchases
ORDER BY number_purchases ASC 
```

所以我在第一列中获得了购买数量，在第二列中获得了购买该数量的用户数量。

我想稍微修改一下结果。我需要围绕这些线的功能：

> 如果 npb = 1, 2, 3... to 10 不存在，则添加缺少 npb 和相应的 user_count = 0 的行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:49:41.063

一种方法是创建一个包含所有数字的视图并左连接，然后使用 group by。但是根据[SQL SELECT 来获取前 N 个正整数](https://stackoverflow.com/questions/1475973/sql-select-to-get-the-first-n-positive-integers)，您将不得不创建一个表。

# iphone - 我的 iPhone5 应用程序在 4 英寸屏幕上显示为只有 3.5 英寸的应用程序，为什么？

> ID：13237488
> 
> 赞同：0
> 
> 时间：2012-11-05T17:45:16.863
> 
> 标签：iphone, objective-c, ios6, ios-simulator, iphone-5

我刚刚提交了我的 App iJobber 的更新。我没有 iPhone 5，所以我只用模拟器试了一下，在新 iPhone 上一切看起来都不错。

但是在朋友的 iPhone 5 上提交 App 并下载后，它只显示 3,5 英寸的 UI，而不是大屏幕的特殊 UI。

发生了什么？有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:48:36.827

为了在设备上触发稍高的“iPhone 5”模式，您需要包含一个`Default-568h@2x.png`文件。

# drupal - 在视图中的内容类型之间加入

> ID：13237489
> 
> 赞同：2
> 
> 时间：2012-11-05T17:45:27.103
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-views

我创建了一个内容类型：具有“节点引用”字段的地图，我可以在该字段上选择另一种内容类型的名称。它还有一个 Image 字段。

现在，我想创建一个视图。视图必须在每个字段图像下方映射内容类型引用中的数据字段

我需要帮助来设置视图...谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:32:17.800

进入查看页面。在`Relationships`部分下，单击以添加新的。

选择`Entity Reference: Referenced Entity`有描述的`A bridge to the Content entity that is referenced via THE_FIELD_REFERENCE`。

在字段部分单击以添加新字段。选择您的图像字段并单击添加，在`Relationships`选择您刚刚创建的关系下。

现在，图像应该出现在视图中。

希望这行得通……穆罕默德。

# c++ - 如何使用指针的二维向量

> ID：13237490
> 
> 赞同：0
> 
> 时间：2012-11-05T17:45:30.613
> 
> 标签：c++, pointers, stl, vector

实现高效二维向量的正确方法是什么？我需要将一组 Item 对象存储在 2d 集合中，这可以快速迭代（最重要）并且也可以快速找到元素。

我有一个 2d 指针向量，声明如下：

```
std::vector<std::vector<Item*>> * items; 
```

在构造函数中，我将其实例化如下：

```
items = new std::vector<std::vector<Item*>>();
items->resize(10, std::vector<Item*>(10, new Item())); 
```

我如何（正确）实现访问项目的方法？例如：

```
items[3][4] = new Item();

AddItem(Item *& item, int x, int y)
{
     items[x][y] = item;
} 
```

我使用指针的原因是为了获得更好的性能，这样我就可以通过引用传递东西。

如果有更好的方法来解决这个问题，请解释一下，但是我仍然对如何正确使用向量感兴趣。

编辑：为澄清起见，这是一个简单游戏中用于库存管理的类的一部分。设置的 10x10 向量表示作为设置大小的库存网格。Item 类包含项目类型、资源管理器中指向图像的指针、堆栈大小等。

我的指针使用是为了提高性能，因为这个类被迭代并使用图像指针在每一帧渲染整个库存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T18:40:59.400

似乎您事先知道矩阵的大小，并且该矩阵是平方的。虽然`vector<>`很好，但在这种情况下您也可以使用本机向量。

```
Item **m = new Item*[ n * n ]; 
```

如果要访问位置 r,c，则只需将 r 乘以 n，然后加上 c：

```
pos = ( r * n ) + c; 
```

因此，如果要访问位置 1、2 和 n = 5，则：

```
pos = ( 1 * 5 ) + 2;
Item * it =  m[ pos ]; 
```

此外，除了使用普通指针，您还可以使用智能指针，例如`auto_ptr`(obsolete) 和`unique_ptr`，它们或多或少相似：一旦它们被销毁，它们就会销毁它们指向的对象。

```
auto_ptr<Item> m = new auto_ptr<Item>[ n * n ]; 
```

唯一的缺点是现在您需要调用`get()`才能获取指针。

```
pos = ( 1 * 5 ) + 2;
Item * it =  m[ pos ].get(); 
```

在这里，您有一个总结了所有这些的课程：

```
class ItemsSquaredMatrix {
public:
    ItemsSquaredMatrix(unsigned int i): size( i )
        { m = new std::auto_ptr<Item>[ size * size ]; }
    ~ItemsSquaredMatrix()
        { delete[] m; }

    Item * get(unsigned int row, unsigned int col)
        { return m[ translate( row, col ) ].get(); }
    const Item * get(unsigned int row, unsigned int col) const
        { return m[ translate( row, col ) ].get(); }

    void set(unsigned int row, unsigned int col, Item * it)
        { m[ translate( row, col ) ].reset( it ); }

    unsigned int translate(unsigned int row, unsigned int col) const
        { return ( ( row * size ) + col ); }

private:
    unsigned int size;
    std::auto_ptr<Item> * m;
}; 
```

现在您只需要创建类`Item`。但是，如果您创建了一个特定的类，那么您必须`ItemsSquaredMatrix`为每条新数据进行复制。**在 C++ 中对此有一个特定的解决方案，涉及在模板**中转换上述类（提示：`vector<>`是一个模板）。由于您是初学者，因此将其`Item`作为抽象类会更简单：

```
class Item {
public:
    // more things...
    virtual std::string toString() const = 0;
}; 
```

并派生您将从它们创建的所有数据类。记得做演员，虽然...

如您所见，有很多未解决的问题，并且随着您不断揭开事物的面纱，会提出更多问题。享受！

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T18:16:22.663

对于数值工作，您希望将数据尽可能本地存储在内存中。例如，如果您正在制作一个`n`by`m`矩阵，您可能很想将其定义为

```
vector<vector<double>> mat(n, vector<double>(m)); 
```

这种方法有严重的缺点。首先，它不适用于任何适当的矩阵库，例如`BLAS`and `LAPACK`，它们期望数据在内存中是连续的。其次，即使这样做，也会导致内存中出现大量随机访问和指针间接，这会降低矩阵运算的性能。相反，您需要一个大小连续的内存`n*m`项块。

```
vector<double> mat(n*m); 
```

但是您实际上并不想为此使用 a `vector`，因为您随后需要手动将 1d 索引转换为 2d 索引。有一些库可以为您执行此操作`C++`。其中之一是[Blitz++](http://sourceforge.net/projects/blitz/)，但现在似乎没有太多开发。其他替代品是[犰狳](http://arma.sourceforge.net/)和[本征](http://eigen.tuxfamily.org/index.php?title=Main_Page)。有关更多详细信息，请参阅[此先前的答案](https://scicomp.stackexchange.com/questions/351/recommendations-for-a-usable-fast-c-matrix-library)。

`Eigen`例如，使用，矩阵声明将如下所示：

矩阵Xd mat(n,m);

并且您将能够以 访问元素`mat[i][j]`，并将矩阵乘以`mat1*mat2`，依此类推。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T18:18:41.010

第一个问题是为什么要指针。几乎没有任何理由拥有指向 an 的指针`std::vector`，而且你拥有指针向量的情况并不常见。你的定义应该是：

```
std::vector<std::vector<Item> > items; 
```

，或者至少（假设例如 Item 是多态层次结构的基础）：

```
std::vector<std::vector<Item*> > items; 
```

至于您的问题，最好的解决方案是将您的数据包装在某种类中，`Vector2D`该类包含一个`std::vector<Item>`as 成员，并进行索引计算以访问所需的元素：

```
class Vector2D
{
    int my_rows;
    int my_columns;
    std::vector<Item> my_data;
public:
    Vector2D( int rows, int columns )
        : my_rows( rows )
        , my_columns( columns )
    {
    }

    Item& get( int row, int column )
    {
        assert( row >= 0 && row < my_rows
                && column >= 0 && column < my_columns );
        return my_data[row * my_columns + column];
    }

    class RowProxy
    {
        Vector2D* my_owner;
        int my_row;
    public;
        RowProxy(Vector2D& owner, int row)
            : my_owner( &owner )
            , my_row( row )
        {
        }
        Item& operator[]( int column ) const
        {
            return my_owner->get( my_row, column );
        }
    };
    RowProxy operator[]( int row )
    {
        return RowProxy( this, row );
    }

    //  OR...
    Item& operator()( int row, int column )
    {
        return get( row, column );
    }
}; 
```

如果您放弃边界检查（但我不建议这样做），则 `RowProxy`可以是一个简单的`Item*`.

当然，您应该将上述内容复制到`const`.

# php - 为什么我的 xml 无法通过 XSD 验证？

> ID：13237493
> 
> 赞同：2
> 
> 时间：2012-11-05T17:45:46.073
> 
> 标签：php, xml, validation, xsd

我在一台服务器上的空值验证失败时遇到了一些问题，但它适用于我的所有其他服务器。该问题出现在较新的 PHP 版本 (5.3.8) 上，并且适用于稍旧的版本 (5.2.4)。

以下是一些失败的孤立元素：

XML 输入：

```
<clbburnfuelbias></clbburnfuelbias>
<clbburntimebias></clbburntimebias> 
```

XSD 验证：

```
 <xs:element name="clbburnfuelbias"  type="data-fuelbias"/>
  <xs:element name="clbburntimebias"  type="data-timebias"/>

  <xs:simpleType name="data-fuelbias">
    <xs:restriction base="xs:integer">
      <xs:minInclusive value="-9900"/>
      <xs:maxInclusive value="9900"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="data-timebias">
    <xs:restriction base="xs:integer">
      <xs:minInclusive value="-59"/>
      <xs:maxInclusive value="59"/>
    </xs:restriction>
  </xs:simpleType> 
```

错误：

> 错误 1824：元素“clbburnfuelbias”：该值不是原子类型“data-fuelbias”的有效值。错误 1824：元素“clbburntimebias”：该值不是原子类型
> “data-timebias”的有效值。

在运行 5.2.4 的不同服务器上使用完全相同的输入和 XSD 文件我没有收到任何错误，并且 xml 是有效的。

我尝试将 minOccurs="0" 添加到元素中，我也尝试指定 nullable="true" 但仍然出现错误。

# 更新：

使用 PHP 5.2.4 在我的服务器上似乎忽略了空值，并使用 5.3.8 拒绝了空值。我使用的一种解决方法是使用两个定义的联合，一个用于整数类型，一个用于空值：

XSD：

```
<xs:element name="clbburnfuelbias" minOccurs="0">
  <xs:simpleType>
    <xs:union memberTypes="data-fuelbias null-string"/>
  </xs:simpleType>
</xs:element>

<xs:simpleType name="data-fuelbias">
  <xs:restriction base="xs:integer">
    <xs:minInclusive value="-9900"/>
    <xs:maxInclusive value="9900"/>
  </xs:restriction>
</xs:simpleType>

<xs:simpleType name="null-string">
  <xs:restriction base="xs:string">
    <xs:length value="0"/>
  </xs:restriction>
</xs:simpleType> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T18:05:24.163

将元素设为可选 ( `minOccurs="0"`) 不会使其内容成为通配符。如果元素出现，它必须与声明的类型匹配。

如果元素具有属性，则使元素可空( `nillable="true"`) 允许元素为空，其中：`xsi:nil="true"``xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"`

```
<clbburnfuelbias xsi:nil="true"></clbburnfuelbias>
<clbburntimebias xsi:nil="true"></clbburntimebias> 
```

您也可以使用联合类型，它仅用于验证目的具有相同的含义：

```
<xs:simpleType name="data-fuelbias">
  <xs:union>
    <xs:restriction base="xs:integer">
      <xs:minInclusive value="-9900"/>
      <xs:maxInclusive value="9900"/>
    </xs:restriction>
    <xs:restriction base="xs:string">
      <xs:length value="0"/>
    </xs:restriction>
  </xs:union>
</xs:simpleType> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T19:43:57.037

看起来旧版本的 PHP 有一个错误，该错误已被修复。这些元素实例显然是无效的。

我为可以包含整数或不包含整数的元素定义简单类型的首选方法是使用 itemType=integer、minLength=0、maxLength=1 定义列表类型。我更喜欢联合类型的主要原因是它在模式感知的 XSLT 和 XQuery 中工作得更好。它也可能对某些数据绑定产品更有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T18:00:22.203

数据必须是您在 XSD 中指定的值之间的整数。您正在传递一个空值。至少......这就是它应该如何验证的方式。我认为您传递的 XML 不应该根据架构进行验证。

也许 PHP 版本之间的 XML 解析器版本不同，旧版本是宽容的。无论哪种方式，我读到该架构是这样说的：这两个字段必须只出现一次，并且必须包含 x 和 y 之间的整数（其中 x 和 y 在 minInclusive 和 maxInclusive 中指定）。空值应该无法通过验证。

# javascript - 猫鼬如何很好地处理密码编码？

> ID：13237494
> 
> 赞同：1
> 
> 时间：2012-11-05T17:45:48.077
> 
> 标签：javascript, node.js, encryption, mongoose

我想重构我的用户模式。这个决定的主要原因是我不想担心密码和盐的生成。所以我想将编码逻辑从预保存处理程序移动到设置器。不幸的是，我无法从 setter 访问对象的其他属性（如盐）。

因此，默认盐不起作用，并且用盐对密码进行编码也不起作用。

我目前的实现是：

```
var userSchema = new mongoose.Schema({

    username: { 
        type: String, 
        index: { unique: true, sparse: true }, 
        required: true, lowercase: true, trim: true
    },

    email: {
        type: String,
        index: { unique: true, sparse: true }, 
        required: true, lowercase: true, trim: true
    },

    salt: {
        type: String,
        select: false
    },

    password: {
        type: String,
        select: false
    },

    plainPassword: {
        type: String,
        select: false
    }

});

// FIXME: password encoding only on change, not always
userSchema.pre('save', function(next) {
    // check if a plainPassword was set
    if (this.plainPassword !== '') {
        // generate salt
        crypto.randomBytes(64, function(err, buf) {
            if (err) return next(err);
            this.salt = buf.toString('base64');
            // encode password
            crypto.pbkdf2(this.plainPassword, this.salt, 25000, 512, function(err, encodedPassword) {
                if (err) return next(err);
                this.password = new Buffer(encodedPassword, 'binary').toString('base64');
                this.plainPassword = '';
            }.bind(this));
        }.bind(this));
    }

    next();
});

// statics
userSchema.methods.hasEqualPassword = function(plainPassword, cb) {
    crypto.pbkdf2(plainPassword, this.salt, 25000, 512, function(err, encodedPassword) {
        if (err) return next(err);
        encodedPassword = new Buffer(encodedPassword, 'binary').toString('base64');
        cb((this.password === encodedPassword));
    }.bind(this));
}

module.exports = mongoose.model('User', userSchema, 'Users'); 
```

有人设法将加密转移到猫鼬二传手吗？

问候，博多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T21:27:51.073

You DO have access to other properties from within the setter with the use of the `this` keyword. For example:

```
userSchema.path('pass').set(function(v) {

  console.log(this); // Returns model instance

  return v;

}); 
```

However, setters are unfit for your use case. As you probably know, HMAC-SHA1 is super expensive and therefore will block unless performed asynchronously. Mongoose setters require the function to return a value and there is no way to route the result of crypto.pbkdf2()'s callback to the return value of the setter function. This is a limitation of asynchronous javascript and not Mongoose itself: you can't wrap an async call within a sync function, as this destroys the nature of the async chain.

Setters are most widely used for simple string manipulations and data sanitization.

Here is a demo for encryption using only instance methods:

```
// Model method
userSchema.methods.hashPassword = function(pass, callback) {
  // Generate salt (this should probably be async too)
  var salt = this.salt = crypto.createHash('md5').update(Math.random().toString()).digest('hex');
  // Salt and Hash password
  crypto.pbkdf2(pass, salt, 25000, 512, callback);
});

// Implementation
var user = new User({
  email: req.body.email
});
user.hashPassword(req.body.pass, function(err, hash){
  user.pass = hash; 
  user.save();
}); 
```

# android - Android UI 问题，按钮选择

> ID：13237496
> 
> 赞同：1
> 
> 时间：2012-11-05T17:46:04.513
> 
> 标签：android, xml

我是 android 新手，我刚刚了解了活动，我决定创建一些。

我的 MainActivity.java 是，

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button a = (Button) findViewById(R.id.button1);
    a.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            startActivity(new Intent(MainActivity.this, WidgetIntro.class));

            Button b = (Button) findViewById(R.id.button2);
            b.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    startActivity(new Intent(MainActivity.this, Alarm.class));

                    Button c = (Button) findViewById(R.id.button4);
                    c.setOnClickListener(new OnClickListener() {

                        public void onClick(View v) {
                            // TODO Auto-generated method stub
                            startActivity(new   Intent(MainActivity.this, Sms.class));

                            Button d = (Button) findViewById(R.id.button6);
                            d.setOnClickListener(new OnClickListener() {

                                public void onClick(View v) {
                                    // TODO Auto-generated method stub
                                    startActivity(new   Intent(MainActivity.this, Call.class));

                                    Button e = (Button)   findViewById(R.id.button3);
                                    e.setOnClickListener(new OnClickListener() {

                                        public void onClick(View v) {
                                            // TODO Auto-generated method stub
                                            startActivity(new Intent(MainActivity.this, Notes.class));

                                            Button f = (Button) findViewById(R.id.button5);
                                            f.setOnClickListener(new OnClickListener() {

                                                public void onClick(View v) {
                                                    // TODO Auto-generated method stub
                                                    startActivity(new Intent(MainActivity.this, Cbdata.class));

                                                }
                                            });
                                        }
                                    });

                                }
                            });

                        }
                    });
                }
            }); 
```

虽然这没有错误，并且我已经为每个按钮创建了一些文本来祝酒，但是当我在手机上安装我的应用程序时，我只能按照我给它们编号的顺序访问按钮，即“位置小部件” button 我的按钮 id 是 button1 所以除了这个按钮我可以选择任何其他按钮，一旦我选择了这个按钮，我只能选择按钮 2 而不能选择任何其他按钮，为什么会发生这种情况？

我的 activity_main.xml 代码

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<Button
    android:id="@+id/button7"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_marginBottom="26dp"
    android:text="About Us" />

 <Button
    android:id="@+id/button3"
    android:layout_width="125dp"
    android:layout_height="wrap_content"
    android:layout_above="@+id/button7"
    android:layout_alignParentRight="true"
    android:layout_marginBottom="36dp"
    android:text="Note Remainder" />

 <Button
    android:id="@+id/button2"
    android:layout_width="125dp"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button3"
    android:layout_alignBottom="@+id/button3"
    android:layout_alignParentLeft="true"
    android:text="Alarm" />

 <Button
    android:id="@+id/button4"
    android:layout_width="125dp"
    android:layout_height="wrap_content"
    android:layout_above="@+id/button2"
    android:layout_alignParentLeft="true"
    android:layout_marginBottom="40dp"
    android:text="SMS" />

<Button
    android:id="@+id/button6"
    android:layout_width="125dp"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button4"
    android:layout_alignBottom="@+id/button4"
    android:layout_alignParentRight="true"
    android:text="Call" />

<Button
    android:id="@+id/button1"
    android:layout_width="125dp"
    android:layout_height="wrap_content"
    android:layout_above="@+id/button6"
    android:layout_alignParentRight="true"
    android:layout_marginBottom="37dp"
    android:text="Location Widget" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="Hello User, Welcome to Mobile location Info! You Choose from the following options :"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<Button
    android:id="@+id/button5"
    android:layout_width="125dp"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/button1"
    android:layout_alignParentLeft="true"
    android:text="Save my locations" />

</RelativeLayout>

        }
    });
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:51:19.043

您已经在前一个按钮的 onClick 侦听器中定义了每个按钮的 onClick 侦听器。因此，当您单击前一个按钮时，第一个按钮之后的每个按钮只有一个分配的 onClick 侦听器。

相反，请执行以下操作：

```
Button a = (Button) findViewById(R.id.button1);
a.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        // TODO Auto-generated method stub
        startActivity(new Intent(MainActivity.this, WidgetIntro.class));
    }
});

Button b = (Button) findViewById(R.id.button2);
b.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            // TODO Auto-generated method stub
            startActivity(new Intent(MainActivity.this, Alarm.class));
   }
}); 
```

一个提示。一般来说，当你看到超过 3 个级别的右大括号时，像这样，你就知道有问题了：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:52:37.440

首先，如果问题只能访问按钮但您编号的顺序，我看到这是因为您已将每个按钮嵌入到另一个按钮中，要纠正此问题，让每个按钮侦听器成为 onCreate 方法的主要成员方法每个人都可以从 UI 获得平等的访问权限。希望有帮助:)

# java - Hadoop Mapreduce 多个输入文件

> ID：13237497
> 
> 赞同：5
> 
> 时间：2012-11-05T17:46:07.110
> 
> 标签：java, command-line, hadoop, mapreduce, command-line-arguments

所以我需要两个文件作为我的 mapreduce 程序的输入：City.dat 和 Country.dat

在我的主要方法中，我解析命令行参数，如下所示：

```
Path cityInputPath = new Path(args[0]);
Path countryInputPath = new Path(args[1]);
Path outputPath = new Path(args[2]);
MultipleInputs.addInputPath(job, countryInputPath, TextInputFormat.class, JoinCountryMapper.class);
MultipleInputs.addInputPath(job, cityInputPath, TextInputFormat.class, JoinCityMapper.class);
FileOutputFormat.setOutputPath(job, outputPath); 
```

如果我现在使用以下命令运行我的程序：

```
hadoop jar capital.jar org.myorg.Capital /user/cloudera/capital/input/City.dat /user/cloudera/capital/input/Country.dat /user/cloudera/capital/output 
```

我收到以下错误：

```
Exception in thread "main" org.apache.hadoop.mapred.FileAlreadyExistsException: Output directory /user/cloudera/capital/input/Country.dat already exists 
```

为什么它把它当作我的输出目录？我指定了另一个目录作为输出目录。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T18:15:12.300

根据堆栈跟踪，您的输出目录不为空。所以最简单的事情实际上是在运行作业之前将其删除：

```
bin/hadoop fs -rmr /user/cloudera/capital/output 
```

除此之外，您的参数以您的 main class 的类名开头`org.myorg.Capital`。这就是第零个索引的论点。（基于堆栈跟踪和您提供的代码）。

基本上，您需要将所有索引向右移动一个：

```
Path cityInputPath = new Path(args[1]);
Path countryInputPath = new Path(args[2]);
Path outputPath = new Path(args[3]);
MultipleInputs.addInputPath(job, countryInputPath, TextInputFormat.class, JoinCountryMapper.class);
MultipleInputs.addInputPath(job, cityInputPath, TextInputFormat.class, JoinCityMapper.class);
FileOutputFormat.setOutputPath(job, outputPath); 
```

不要忘记清除您的输出文件夹！

也给你一个小提示，你可以用逗号分隔文件“，”这样你就可以像这样通过一个调用来设置它们：

```
hadoop jar capital.jar org.myorg.Capital /user/cloudera/capital/input/City.dat,/user/cloudera/capital/input/Country.dat 
```

在你的java代码中：

```
FileInputFormat.addInputPaths(job, args[1]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T22:20:06.743

这里发生的是类名被认为是第一个参数！

默认情况下，第一个非选项参数是要调用的类的名称。应使用完全限定的类名。如果指定了 -jar 选项，则第一个非选项参数是包含应用程序的类和资源文件的 JAR 归档的名称，启动类由 Main-Class 清单头指示。

因此，我建议您将清单文件添加到您指定主类[的 jar中。](http://www.mkyong.com/java/how-to-add-your-manifest-into-a-jar-file/)您的 MANIFEST.MF 文件可能如下所示：

```
Manifest-Version: 1.0
Main-Class: org.myorg.Capital 
```

现在你的命令看起来像：

```
hadoop jar capital.jar /user/cloudera/capital/input/City.dat /user/cloudera/capital/input/Country.dat /user/cloudera/capital/output 
```

您当然可以只更改代码中使用的索引值，但这不是可取的解决方案。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-11-14T05:40:47.470

你能试试这个：

hadoop jar capital.jar /user/cloudera/capital/input /user/cloudera/capital/output

这应该读取单个输入目录中的所有文件。

# android - 从状态栏打开的活动未完成

> ID：13237499
> 
> 赞同：0
> 
> 时间：2012-11-05T17:46:12.517
> 
> 标签：android, android-intent, android-notifications

我创建了一个状态栏通知，它会在状态栏上给我一些消息，单击该消息会重定向到一个全新的布局。状态条码 -

```
NotificationManager mgr = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
         Intent notificationIntent = new Intent(this, TaskCompleteActivity.class);
         notificationIntent.putExtra(TasksDBAdapter.KEY_ROWID, rowId);
         notificationIntent.putExtra(TasksDBAdapter.KEY_TITLE, taskTitle);
         notificationIntent.putExtra(TasksDBAdapter.KEY_BODY, taskDesc);
         //notificationIntent.putExtra("NotificationId", );

         Log.i(TAG,"rowId in doReminderWork" + rowId);
         PendingIntent pi = PendingIntent.getActivity(this, 0, notificationIntent,PendingIntent.FLAG_ONE_SHOT);  

         Notification note=new Notification(android.R.drawable.stat_sys_warning,taskDesc,System.currentTimeMillis());                              
         note.setLatestEventInfo(this, taskTitle,taskDesc, pi);
         note.defaults |= Notification.FLAG_AUTO_CANCEL;
         note.defaults |= Notification.DEFAULT_SOUND;   
         note.defaults |= Notification.DEFAULT_VIBRATE; 
         // you need to clear the notification on click of status bar notification //
         note.flags |= Notification.FLAG_NO_CLEAR;                              
         // An issue could occur if user ever enters over 2,147,483,647 tasks. (Max int
         // value). 
         // I highly doubt this will ever happen. But is good to note. 
         int id = (int)((long)rowId);                                              
         mgr.notify(id, note); 
```

此布局有一个名为 Complete on click 的按钮，我正在删除数据库中的一行并调用 finish()。代码 -

```
public void completeTask(){
        taskDBAdapter.deleteReminder(rowId);
        this.finish();
    } 
```

在此之后，如果我从普通菜单打开我的应用程序，它仍然会向我显示具有完整按钮的相同布局，而不是我的登陆活动。为什么这个活动没有完成？

提前致谢，考希克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:23:37.963

我建议您在线查看 Notifications API 指南的最新更新。人们有时会对启动 Activity 以处理 Notification 时发生的事情感到惊讶。您应该为此使用的选项在指南中进行了描述。

一个相当简单的总结是，一个由 Notification 启动的 Activity 应该是一个单独的任务。如果 Activity 是应用程序的正常部分，则用户应使用“最近”来访问从通知启动的任务。如果 Activity 仅用于通知，那么一旦用户离开，任务就应该完成。

这种模式保留了用户对用户体验的期望。

就您而言，我很确定您开始的新 Activity 已被 TaskAffinity “卡住”到您的应用程序中。API 指南将向您展示如何解决这个问题。

# silverlight-5.0 - 将 NLog 2 与 Silverlight 5 一起使用

> ID：13237500
> 
> 赞同：0
> 
> 时间：2012-11-05T17:46:16.370
> 
> 标签：silverlight-5.0, nlog

有人用过 NLog 2 和 SL5 吗？

我在 NLog 主页上找不到 SL5 的 DLL。当我尝试引用 SL4 DLL 时，VS 2010 会说以下内容：

![在此处输入图像描述](../Images/8a675c1a1572a9a6e27b798428354049.png)

为什么？我认为可以在 SL5 项目中引用 SL4 DLL（但不能反过来）？

所以我检查了 NLog 源，打开它的 SL4 项目，将目标版本从 SL4 更改为 SL5，清理，构建并引用新创建的 DLL。虽然这似乎有效，但感觉不对。

有更好的想法吗？

**更新：**通过直接编辑我的 SL5 项目的 .csproj 文件来添加对为 SL4 构建的原始 NLog 2 DLL 的引用似乎也可以完成这项工作。我很困惑...

```
<Reference Include="NLog">
  <HintPath>..\Libraries\NLog\NLog.dll</HintPath>
</Reference> 
```

# javascript - jquery on() 没有注册第一次点击

> ID：13237501
> 
> 赞同：2
> 
> 时间：2012-11-05T17:46:17.323
> 
> 标签：javascript, jquery, ajax, click, submit

使用 jquery.on() 时我有奇怪的行为。

基本上，只是尝试创建一个时事通讯注册表单（可以动态生成，并且在初始 DOM 加载时不存在）并在 Ajax 中传递详细信息，但它没有注册第一次单击提交按钮，这意味着用户成功提交必须单击两次（仅在第二次单击时看到成功消息和“订阅”帖子）。

的HTML：

```
<div class="newsletter-widget grid-item masonry-brick">
    <input name="Email" type="email" placeholder="Please enter your email" required />
    <input type="submit" value="Subscribe" class="newslettersubmit"/> 
```

和 javascript（准备好文档）；

```
var newsletterFocus = $('.newsletter-widget').find('input[type=submit]');

$(document).on('submit', newsletterFocus, function (e) {
    e.preventDefault();
    var newsletterLinks = newsletterFocus;
    DD.newsletter.behavior(newsletterLinks);
}); 
```

以及对象内被调用的函数；

```
DD.newsletter = {

behavior: function (item) {
    item.click(function (e) {
        e.preventDefault();
        var where = $('.newsletter-widget').find('input[type=submit]').parents('section').attr('id');
        var email = $(this).siblings('[name$=Email]'),
        emailVal = email.val();
        DD.newsletter.subscribe(email, emailVal, where);
    });
},

subscribe: function (self, email, where) {
    $.ajax({
        type: "POST",
        data: '{"email":"' + email + '", "method":"' + where + '"}',
        url: '/Subscriber/Subscribe',
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (response) {
            self.val(response);
        },
        failure: function (msg) {
            self.val(msg);
        }
    });
},}); 
```

我尝试使用“点击”作为 on() 的操作，但这会在每次点击时注册一个事件，并且我会提交数千个表单！

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:52:28.460

将 div 容器更改为表单元素：

```
<form class="newsletter-widget grid-item masonry-brick"> 
```

您需要将提交事件注册到表单，而不是输入字段。这是您的表单提交的快速重构：

```
$(document).on('submit', '.newsletter-widget', function (e) {
  e.preventDefault();
  DD.newsletter.behavior(); //Submit the form via AJAX
}); 
```

如果您想将其与您的行为方法挂钩，只需打开点击：

```
behavior: function () {
  var where = $('.newsletter-widget').find('input[type=submit]').parents('section').attr('id');
  var email = $(this).siblings('[name$=Email]'),
  emailVal = email.val();
  DD.newsletter.subscribe(email, emailVal, where);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T17:54:40.710

第一次单击按钮将导致行为单击事件处理程序绑定到按钮。直接绑定行为，而不是在 click 事件处理程序中。

替换这个：

```
var newsletterFocus = $('.newsletter-widget').find('input[type=submit]');

$(document).on('submit', newsletterFocus, function (e) {
    e.preventDefault();
    var newsletterLinks = newsletterFocus;
    DD.newsletter.behavior(newsletterLinks);
}); 
```

和：

```
DD.newsletter.behavior($('.newsletter-widget input[type=submit]')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T17:57:00.033

它可能（我认为）应该是这样的：

```
DD.newsletter = {

behavior: function (item) {
        var where = $(item).parents('section').attr('id');
        var email = $(item).siblings('[name$=Email]'),
        var emailVal = email.val();  // why were you declaring this without 'var'?
        DD.newsletter.subscribe(email, emailVal, where);
},

subscribe: function (self, email, where) {
    $.ajax({
        type: "POST",
        data: '{"email":"' + email + '", "method":"' + where + '"}',
        url: '/Subscriber/Subscribe',
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (response) {
            self.val(response);
        },
        failure: function (msg) {
            self.val(msg);
        }
    });
},}); 
```

# xcode - xcode：如何使用 GCC_VERSION 字段指定 clang 版本？

> ID：13237502
> 
> 赞同：3
> 
> 时间：2012-11-05T17:46:24.343
> 
> 标签：xcode, gcc, llvm, clang

我正在运行 Xcode4.5。我们的项目从较旧的 Xcode 开始，并使用一个元文件指定编译器版本

```
GCC_VERSION = com.apple.compilers.llvm.clang.1_0 
```

据我所知，这指向旧版本的 LLVM，我想知道在哪里可以找到使用 Xcode4.5 指定最新 LLVM (4.1) 的规范版本号？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T21:05:20.870

> 据我所知，这指向旧版本的 LLVM，我想知道在哪里可以找到使用 Xcode4.5 指定最新 LLVM (4.1) 的规范版本号？

实际上，`GCC_VERSION = com.apple.compilers.llvm.clang.1_0`指向 Xcode 的“Locations”所指的 clang 工具集。

所以只需在“Xcode > Preferences > Locations > Locations (Tab) > Command Line Tools”中指定工具集，然后使用`GCC_VERSION = com.apple.compilers.llvm.clang.1_0`指定clang作为编译器。然后，您在首选项中指定的工具集定义了您正在使用的 clang 的版本/构建。

# c# - 面板不会停靠在我希望它们在 winforms 中的位置

> ID：13237504
> 
> 赞同：1
> 
> 时间：2012-11-05T17:46:31.943
> 
> 标签：c#, winforms

> **可能重复：**
> [Panel.Dock 填充忽略其他 Panel.Dock 设置](https://stackoverflow.com/questions/154543/panel-dock-fill-ignoring-other-panel-dock-setting)

似乎当我将面板放在 winforms 中时，我得到了意想不到的结果。如果我有 3 个面板，并且我将它们全部停靠在顶部，以便希望它们都是 1，那么我将最后一个面板停靠在应用程序的最顶部，而不是停靠在最后一个停靠面板的底部。

我想我对 winforms 面板中的停靠属性如何工作感到困惑！？每次我尝试布局我的应用程序时，我都会头疼，因为一个面板想要停靠在我不想要的地方。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T17:56:21.490

使用 Visual Studio 中的“[文档大纲](http://msdn.microsoft.com/en-us/library/46xf4h0w%28v=vs.80%29.aspx)”视图查看表单的层次结构。您将能够确保所有面板处于同一级别，在同一父级下，并且您将能够重新排序它们以更改停靠行为/优先级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T17:53:25.820

我做了更多的研究并在stackoverflow上发现了这个[问题](https://stackoverflow.com/questions/154543/panel-dock-fill-ignoring-other-panel-dock-setting)一旦我打开那个窗口并将面板向上移动到层次结构中，它完全符合我的预期和想要的方式。我知道必须有某种类型的控制层次结构我可以弄乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T18:04:05.473

Ypu应该检查[这个](https://stackoverflow.com/questions/154543/panel-dock-fill-ignoring-other-panel-dock-setting)

你可以尝试做：

```
 public partial class Form1 : Form
        {
            public Form1()
            {
                InitializeComponent();

                CreatePanels();
            }

            private void CreatePanels()
            {

//YOu should create panelGlobal on your winform and set DockStyle.Fill
                 panelGlobal.Controls.Add(CreatePanel("topPanel",DockStyle.Top,Color.Red));
                 panelGlobal.Controls.Add(CreatePanel("bottomPAnel", DockStyle.Bottom, Color.Gray));
                panelGlobal.Controls.Add(CreatePanel("fillPanel",DockStyle.Fill,Color.Snow));
            }

            private Panel CreatePanel(string panelName, DockStyle dockStyle,Color color)
            {
                return new Panel() { Name = panelName, Dock = dockStyle , BackColor=color};
            }
        } 
```

# c# - 如何访问 IKVM 移植的 Java 库的 .net 资源

> ID：13237505
> 
> 赞同：6
> 
> 时间：2012-11-05T17:46:31.410
> 
> 标签：c#, visual-studio-2012, ikvm

我正在使用 IKVM 将一些 java 库移植到我的 c# 项目中。库 api (StanfordNLP) 要求加载一个文件来训练 nlp 函数使用的统计模型。从文件系统加载文件已经运行了好几个星期，但我现在想将文件作为嵌入资源添加到 dll 中，而不是从文件系统中检索它。

问题是 java api 没有找到 .net 嵌入式资源。

以下是从文件系统检索文件时有效的代码片段：

```
public class SNLPModel
{
   public LexicalizedParser LP;

   public SNLPModel()
   {
      // Using a relative file path in the target build directory
      LP = LexicalizedParser.loadModel("models-stanford\\englishPCFG.ser.gz");
   }
} 
```

但是，当我将“englishPCFG.ser.gz”文件作为 Visual Studio 中的嵌入式资源（使用 VS2012）并更改代码以匹配时：

```
public class SNLPModel
{
   public LexicalizedParser LP;

   public SNLPModel()
   {
        // Using this line of code to verify that the file is being loaded as
        // an embedded resource. Running in debug, I have verified that it is, and
        // noted its complete name.
        string[] s = System.Reflection.Assembly.GetExecutingAssembly()
                        .GetManifestResourceNames();

        java.io.InputStream modelFile = java.lang.ClassLoader
              .getSystemResourceAsStream
              ("FeatureExtraction.StanfordNLP_Models.englishPCFG.ser.gz");

        java.io.ObjectInputStream x = new java.io.ObjectInputStream(modelFile);

        LP = LexicalizedParser.loadModel(x);
   }
} 
```

InputStream 对象 modelFile 始终返回 null。我尝试了各种形式的资源字符串，将前两个点（“.”）替换为正斜杠（“/”）、反斜杠（“\”）和双反斜杠（“\\”）。我开始怀疑 java.io 无法访问 .net 资源。java api 不能识别 .net 资源也就不足为奇了，但我认为 IKVM 可能会提供一个桥梁。我看到了对名为 IKVM.Internals.VirtualFileSystem 的引用，但只有一个引用 (http://old.nabble.com/Manual-by-name-embedded-resource-lookup--td31162421.html) 并且没有t 找到任何实际包含该类的 IKVM dll。

任何帮助将非常感激。我在用：

c#.NET 4.5

视觉工作室 2012

最新的斯坦福 NLP java 库

IKVM 7.0.4335.0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T07:35:50.387

在 IKVM 中没有对此的自动支持，但自己做起来真的很容易：

```
var asm = Assembly.GetExecutingAssembly();
var stream = asm.GetManifestResourceStream("FeatureExtraction.StanfordNLP_Models.englishPCFG.ser.gz");
var inp = new ikvm.io.InputStreamWrapper(stream);
var x = new java.io.ObjectInputStream(inp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-19T03:41:00.583

正确解决方案的提示位于您嵌入的文件的扩展名中。

如果它是普通的序列化 java 对象（如`english-left3words-distsim.tagger`），您可以像这样加载它

```
let model = "../english-left3words-distsim.tagger"
use fs = new FileStream(model, FileMode.Open)
use isw = new ikvm.io.InputStreamWrapper(fs)
let tagger = edu.stanford.nlp.tagger.maxent.MaxentTagger(isw) 
```

但是如果你的模型有扩展名`.gz`，这意味着文件被压缩了，你必须`java.util.zip.GZIPInputStream`在反序列化之前将输入流包装到

```
let model = "../englishRNN.ser.gz"
use fs = new FileStream(model, FileMode.Open)
use isw = new ikvm.io.InputStreamWrapper(fs)

use ois =
    if model.EndsWith(".gz")
    then
        let gzs = new java.util.zip.GZIPInputStream(isw)
        new java.io.ObjectInputStream(gzs)
    else new java.io.ObjectInputStream(isw)
let lp = edu.stanford.nlp.parser.lexparser.LexicalizedParser.loadModel(ois) 
```

# mysql - 只有 USAGE 特权的新用户能够删除表（MySQL）

> ID：13237509
> 
> 赞同：0
> 
> 时间：2012-11-05T17:46:41.150
> 
> 标签：mysql, sql

我从 root 用户登录到 MySQL。

运行命令：-

```
create user new; 
```

然后我以新用户身份登录。运行以下命令：-

```
use test;
show grants; 
```

输出是：-

```
GRANT USAGE ON *.* TO ''@'LOCALHOST' 
```

据我了解，新用户对此表没有删除表权限或任何与此相关的权限（USAGE 除外）。

但是，当我运行以下命令时：-

```
DROP TABLE test_table; 
```

查询成功。你能解释一下为什么会这样吗？如何禁止该用户删除表并撤销该用户的其他权限。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:59:06.740

根据[手册](http://dev.mysql.com/doc/refman/5.0/en/show-grants.html)，您需要考虑更多：

> SHOW GRANTS 仅显示显式授予指定帐户的权限。其他权限可能对帐户可用，但不会显示。例如，如果存在匿名帐户，则命名帐户可能能够使用其权限，但 SHOW GRANTS 不会显示它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:04:26.720

[http://dev.mysql.com/doc/refman/5.1/en/create-user.html](http://dev.mysql.com/doc/refman/5.1/en/create-user.html)提到 CREATE USER 在 mysql.user 表中创建一个新行，并为帐户分配任何权限。当您使用新用户运行 SHOW GRANTS FOR CURRENT_USER 时会得到什么？

# c++ - C++ 从文件读取到向量

> ID：13237512
> 
> 赞同：2
> 
> 时间：2012-11-05T17:46:51.580
> 
> 标签：c++, file, ifstream, ofstream

我正在尝试将字符串流式电话查找程序转换为流式文件。我遗漏了一些东西，但我被卡住了。我可以在 ofstream 过程中使用哪些成员来使其正常工作？

```
ofstream& process (ofstream &os, vector<PersonInfo> people)
{
    // for each entry in people
    for (vector<PersonInfo>::const_iterator entry = people.begin();
                entry != people.end(); ++entry) {    
        ofstream formatted, badNums; // objects created on each loop

        // for each number
        for (vector<string>::const_iterator nums = entry->phones.begin();
                nums != entry->phones.end(); ++nums) {  
            if (!valid(*nums)) {           
                badNums << " " << *nums;  // string in badNums
            } else                        
                // ``writes'' to formatted's string
                formatted << " " << format(*nums); 
        }
        if (badNums.empty())      // there were no bad numbers
            os << entry->name << " "    // print the name 
               << formatted.str() << endl; // and reformatted numbers 
        else                   // otherwise, print the name and bad numbers
            cerr << "input error: " << entry->name 
                 << " invalid number(s) " << badNums.str() << endl;
    }

    return os;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T18:05:07.657

首先，您不需要`ofstream`, 除非在您打开文件（创建实例）时。输出流接口由[`std::ostream`](http://en.cppreference.com/w/cpp/io/basic_ostream); [`std::ofstream`](http://en.cppreference.com/w/cpp/io/basic_ofstream)派生自此，同样 [`std::ostringstream`](http://en.cppreference.com/w/cpp/io/basic_ostringstream)（输出可以变成`std::string`），并且在大多数应用程序中，还有一些由本地程序员编写的其他应用程序。在您的情况下（如果我正确理解了问题），您想要的是：

```
std::ostream& process( std::ostream& os,
                       std::vector<PersonInfo> const& people )
    //  Note the use of a const reference above.  No point
    //  in copying the entire vector if you're not going to
    //  modify it.
{
    for ( std::vector<PersonInfo>::const_iterator entry = people.begin();
            entry != people.end();
            ++ entry ) {
        std::ostringstream formatted;
        std::ostringstream badNums;
        //  ...
        if ( badNums.str().empty() ) {
            os << ... << formatted.str() << std::endl;
        } else {
            os << ... << badNums.str() << std::endl;
        }
    }
    return os;
} 
```

注意不同的类型：`std::ostream`格式输出，独立于目标类型。 `std::ofstream`从它派生，并提供一个文件作为目标。 `std::ostringstream`派生自它，并提供一个`std::string`作为目标类型。并且`std::ostream` 接受一个`std::streambuf*`作为参数，并且您提供目标类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:05:50.033

看起来您不需要将`ofstream`s 用于此函数的内部部分。事实上，你根本不需要使用流，a`std::string`会这样做：

```
ofstream& process (ofstream &os, vector<PersonInfo> people)
{
    // for each entry in people
    for (vector<PersonInfo>::const_iterator entry = people.begin();
                entry != people.end(); ++entry) {    
        string formatted, badNums; // objects created on each loop

        // for each number
        for (vector<string>::const_iterator nums = entry->phones.begin();
                nums != entry->phones.end(); ++nums) {  
            if (!valid(*nums)) {           
                badNums += " " + *nums;  // string in badNums
            } else                        
                // ``writes'' to formatted's string
                formatted += " " + format(*nums); 
        }
        if (badNums.empty())      // there were no bad numbers
            os << entry->name << " "    // print the name 
               << formatted << endl; // and reformatted numbers 
        else                   // otherwise, print the name and bad numbers
            cerr << "input error: " << entry->name 
                 << " invalid number(s) " << badNums << endl;
    }

    return os;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T18:06:08.253

您永远不会将文件与 ostream 相关联，因此编译器不知道如何处理您写入其中的数据。

```
ofstream& process (ofstream &os, vector<PersonInfo> people)
{
    os.open("Data.txt"); //open file to be used
    if(!os.is_open())
        std::cerr << "Error opening file!\n";
    //rest of code goes here
} 
```

编辑：再次阅读您的程序后，我注意到您使用 ofstream 错误。Ofstream 用于打开和写入文件。该程序有很多语法和逻辑错误，我会在[这里](http://www.cplusplus.com/reference/iostream/ofstream/)阅读更多。

# xml - 在 VB.NET 中将信息附加到 XML 文件

> ID：13237514
> 
> 赞同：0
> 
> 时间：2012-11-05T17:46:59.193
> 
> 标签：xml, vb.net

```
<Setting1>
   <SubSetting1>Test1</SubSetting1>
   <SubSetting2>Test2</SubSetting2>
</Setting1>
<Setting2>
   <SubSetting1>Test3</SubSetting1>
   <SubSetting2>Test4</SubSetting2>
</Setting2> 
```

这只是一个参考 xml 文档的小例子。我正在尝试学习如何在不覆盖 xml 标记的情况下附加现有的 xml 文档。我的实际 xml 文档有更多节点（大约 40 个），我将所有新值（代替 Test1、Test2、..etc）放入一个列表中。以正确的顺序，所以我正在考虑使用 For 循环来写入值。

像这样的东西？

```
Public Sub example (ListofSettings As List(of String))
    Directory.SetCurrentDirectory(AppDomain.CurrentDomain.BaseDirectory)
    Dim myNodes, myChildren As XmlNodeList
    settingsFile.Load(SETTINGS_FILE_PATH)
    myNodes = settingsFile.GetElementsByTagName("Settings1")
For i as Integer = 0 to ListofSettings.count
For Each n As XmlNode In myNodes
        If n.Name = "Settings1" Then
            myChildren = n.ChildNodes
            For Each n1 As XmlNode In myChildren
                Select Case n1.Name
                    Case "SubSetting1"
                        writer.WriteElementString(**DONT WANT TO CHANGE TAG NAME**, ListofSettings.Item(i))
End Select
Next
End if    
Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T19:06:41.423

使用 Xmldocument.SelectSingleNode 并更改所需节点的 innerXml。有关示例，请参见[MSDN](http://msdn.microsoft.com/en-us/library/fb63z0tw.aspx)

# java - 使用堆栈和运算符优先级对后缀进行中缀

> ID：13237517
> 
> 赞同：1
> 
> 时间：2012-11-05T17:47:04.140
> 
> 标签：java, infix-notation, stack, postfix-notation

我知道在 SO 上已经有类似的问题，但我找不到解决我遇到的问题的问题。我正在尝试制作一种将中缀表示法表达式转换为后缀表示法的方法，同时实现运算符的优先级以获得正确的输出。我用常用的方法（push、pop、peek 等）制作了自己的堆栈类，它工作得非常好。我的问题是，对于更复杂的表达式，例如 A-(B+C^D^C)/D*B ，我得到了错误的输出。转换的结果应该是 ABCDC^^+D/B*- 而我不断得到 ABCDC^^+D/-B

这是我的方法：

```
 public static String infixToPostfix(char[] expressionArray, CharStack opStack){
    String output = "";
    int length = expressionArray.length;
    for(int i = 0; i < length; i++){    
        if(isOperatorOrBracket(expressionArray[i])){ 
            if(priorityAtInput(expressionArray[i]) >= priorityAtStack(opStack.peek())){
                opStack.push(expressionArray[i]);
            }else if(priorityAtInput(expressionArray[i]) == priorityAtStack(opStack.peek())){
                output = output + expressionArray[i];
            }else{
                while(opStack.peek() != '('){
                    output = output + opStack.pop();
                }
                opStack.pop();
            }
        }else{
            output = output + expressionArray[i];
        }
    }
    while(!opStack.empty()){
        if(opStack.peek() != '('){
            output = output + opStack.pop();
        }else if(opStack.peek() == '('){
            opStack.pop();
        }
    }
    return output;
} 
```

如果您需要任何组件方法，请告诉我。非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:43:44.230

盯着屏幕一个小时后，我发现了问题。谢天谢地，Eclipse 中的调试器！

```
public static String infixToPostfix(char[] expressionArray, CharStack opStack){
    String output = "";
    int length = expressionArray.length;
    for(int i = 0; i < length; i++){    
        if(isOperatorOrBracket(expressionArray[i])){ 
            if(priorityAtInput(expressionArray[i]) >= priorityAtStack(opStack.peek())){
                opStack.push(expressionArray[i]);
            }else if(priorityAtInput(expressionArray[i]) < priorityAtStack(opStack.peek())){
                while(priorityAtInput(expressionArray[i]) < priorityAtStack(opStack.peek())){
                    output = output + opStack.pop();
                    if(opStack.peek() == '('){
                        opStack.pop();
                        break;
                    }else if(priorityAtInput(expressionArray[i]) >= priorityAtStack(opStack.peek())){
                        opStack.push(expressionArray[i]);
                        break;
                    }
                }
            }else{
                while(opStack.peek() != '('){
                    output = output + opStack.pop();
                }
                opStack.pop();
            }
        }else{
            output = output + expressionArray[i];
        }
    }
    while(!opStack.empty()){
        if(opStack.peek() != '('){
            output = output + opStack.pop();
        }else if(opStack.peek() == '('){
            opStack.pop();
        }
    }
    return output;
} 
```

# java - 使用 JList 更新 DefaultListModel，在子类上使用扩展

> ID：13237519
> 
> 赞同：1
> 
> 时间：2012-11-05T17:47:43.140
> 
> 标签：java, swing, jlist, defaultlistmodel

试图解决一个问题，但我不明白为什么它不起作用。如果我用我的挪威评论和变量混淆了你，我很抱歉。

首先，这是我的 form.java 文件。

```
import java.awt.FlowLayout;
import java.awt.List;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;

import javax.swing.DefaultListModel;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JList;
import javax.swing.JOptionPane;
import javax.swing.ListSelectionModel;

public class Form implements ActionListener {

    String[] ansatt_type = {"Sjef","Mellomleder","Assistent"};
    String totlønn;

    // KOMPONENTER FOR GUI START
    JList ansatte;
    DefaultListModel model;

    JLabel label1 = new JLabel ();
    JComboBox ansatt_id = new JComboBox (ansatt_type);
    JButton add_me = new JButton ();
    JLabel lønn = new JLabel ();
    // KOMPONENTER FOR GUI SLUTT

    public Form () {

        // LAGER RAMME START
        JFrame ramme = new JFrame ();
        ramme.setBounds(0,0,275,400);
        ramme.setTitle("Ansatt kontroll");
        ramme.setLayout(new FlowLayout ());
        ramme.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // LEGGER TIL TEXT LABEL1
        label1.setText("Liste over ansatte: ");
        ramme.add(label1);

        // LEGGER TIL DEFAULTLISTMODEL
        model = new DefaultListModel();

        ansatte = new JList(model);
        ansatte.setBounds(0, 0, 200, 200);
        model.addElement("KU");
        ramme.add(ansatte);

        // LEGGER TIL DROPDWON LIST;
        ramme.add(ansatt_id);

        // LEGGER TIL ANSATT KNAPP
        add_me.setText("Legg til ny ansatt");
        ramme.add(add_me);
        add_me.addActionListener(this);

        // LEGGER TIL SAMLEDE LØNNSKOSTNADER
        totlønn = "Totale lønnskostnader er : eksempeltall";
        lønn.setText(totlønn);
        ramme.add(lønn);

        ramme.setVisible(true);
    }

    @Override
    public void actionPerformed(ActionEvent arg0) {
        JOptionPane.showMessageDialog(null, "Du har valgt: 

               "+ansatt_id.getSelectedItem()+"!" +  
               " Du blir nå videreført og kan legge til en ny ansatt");

        if(ansatt_id.getSelectedItem() == "Sjef"){
            System.out.println("Valgt Sjef");
            Sjef sj = new Sjef ();
            model.addElement(sj);    
            }

        if(ansatt_id.getSelectedItem() == "Mellomleder"){
            System.out.println("Valgt Mellomleder");
        }

        if(ansatt_id.getSelectedItem() == "Assistent"){
            System.out.println("Valgt Assistent");
        }
    } 
} 
```

我还有一个名为 Ansatt.java 的类文件，它扩展了几个类文件。我给你看一个。

首先是我的 Ansatt.java 文件；

```
import javax.swing.JOptionPane;

public class Ansatt extends Form {

    public String Navn;
    public int Lønn;
    public String Type;

    public Ansatt () {
    Navn = JOptionPane.showInputDialog(null, "Skriv inn navn på ny ansatt:  ");
    System.out.println("Ansatt lag til i liste");
    }

    public String toString(){
        return Navn + " " + Type;
    }
} 
```

以及扩展类 Sjef.java

```
public class Sjef extends Ansatt {

    public Sjef () {
        super();
        this.Lønn = 40000;
        this.Type = "Sjef";

    }
} 
```

一切正常，除了 ModelList 不会更新，我有一个工作示例，它几乎相同，但它只是在这个中不起作用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T21:06:11.423

您的问题是您的`String`比较`ActionListener`：

```
ansatt_id.getSelectedItem() == "Sjef" 
```

很可能不会回来`true`。你应该使用

```
"Sjef".equals( ansatt_id.getSelectedItem() ) 
```

其他比较也一样。

# python - py2exe ImportError：没有命名的模块

> ID：13237521
> 
> 赞同：4
> 
> 时间：2012-11-05T17:47:52.750
> 
> 标签：python, eclipse, py2exe, distutils

我已经实现了一个名为 myUtils 的包，它由文件夹“myUtils”、文件“ **init** .py”和一些名称为 !=“myUtils”的 *.py 文件组成。这个包包含在 myOtherProject.py 中，当我从 Eclipse 运行它们时可以找到/使用它们。

但是，当我在 myOtherProject.py 上运行 py2exe 时，生成的 exe 找不到此模块（错误消息“ImportError：没有名为 myUtils 的模块”）。我的 setup.exe 的修剪版本：

```
from distutils.core import setup
import py2exe, sys
sys.path.append(pathTo_myUtils)
import myUtils # this line works fine even if I comment out sys.path.append(...)
data_files_ = (('.', ["C:\\Python27\\DLLs\\MSVCP90.dll", 
                      "C:\\Python27\\lib\\site-packages\\Pythonwin\\mfc90.dll"]))
setup(windows=['myOtherProject.py'], options={'py2exe': {'excludes': ['tcl'], 'includes': ['myUtils'], 'dll_excludes': ['tk85.dll',  'tcl85.dll'] }}, data_files=data_files_) 
```

我该如何解决这个问题？我在 WinXP 上使用 Python 2.7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:01:12.527

把你的`sys.path.append()`行放在`import`声明之前。更好的是，修改您的 PYTHONPATH（我不确定如何在 Windows 上执行此操作，但我相信 Google 可以告诉您如何操作）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T17:14:02.597

我没有正确定义 PYTHONPATH；分号后有空格。代替

```
c:\aa\; c:\bb\; c:\cc\ 
```

它必须是

```
c:\aa;c:\bb;c:\cc 
```

**对于使用init** .py定义的包（包 MyPackage 对应于文件夹 MyPackage，其中包含**init** .py 和一些其他文件，没有 MyPackage.py），我需要添加到 PYTHONPATH 的路径不是

```
<path_to_MyPackage>\MyPackage 
```

只是

```
<path_to_MyPackage> 
```

...

# python - 没有名为 numpy 的模块

> ID：13237522
> 
> 赞同：18
> 
> 时间：2012-11-05T17:47:53.210
> 
> 标签：python, numpy

我安装了以下程序

1.  已安装 python 2.7
2.  numpy-1.6.2-python2.7
3.  Matplotlib-1.1.1-py2.7

我相信 numpy 已正确安装，因为当我在 python 解释器中键入 import numpy 时，它不会给我一个错误。我还可以检查安装的 numpy 的版本。

我在这一行的代码中收到以下错误

```
import numpy as np 
```

“Exceptions.ImportError：没有名为 numpy 的模块”

有谁知道这个问题的解决方案？谢谢！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-05T18:21:40.523

在终端：

sudo apt-get install python-numpy

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T18:08:59.457

听起来您安装了 PyScript 看到的另一个 Python 版本。最简单的解决方案是不使用 PyScript，但您可以通过重新安装/重新配置 PyScript 来修复它，以确保它指向您的 Python27 的相同位置/版本

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T18:16:14.977

您可能安装了多个版本的 python，请键入：

```
which python 
```

在您的终端中，查看当前的终端。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-18T02:36:31.987

我在 Mac 上有同样的问题。但我解决了。我有两个版本的 pip。看....

```
MacBook-Pro:WhiteBoxSMS4-master qinyao$ which pip
/Library/Frameworks/Python.framework/Versions/3.6/bin/pip
MacBook-Pro:WhiteBoxSMS4-master qinyao$ which pip2
/usr/local/bin/pip2 
```

所以，你需要检查你的 pip 版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-15T17:27:59.817

我在 Mac OS X 上遇到了同样的问题。

numpy 已安装在“/Library/Python/2.7/site-packages/numpy-override”，因此`import numpy`可以正常工作。

但是在 virtualenv 激活时会失败，并且使用非系统预安装的 python（例如 homebrew 或 macport）。

> ```
> $ which python
> /usr/local/bin/python 
> ```

通过在 virtualenv（使用 --no-site-packages 选项或不使用 --system-site-packages 创建）中再次安装它来修复。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-05T23:19:04.460

就像其他人提到的那样，您安装了多个版本的 python。通过键入检查：

```
which python 
```

然后你可以使用 she-bang 将你的脚本设置为你可以使用 numpy 的 python 版本（你在命令行上使用的那个）。

或设置您的 PYTHONPATH 变量

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-18T13:39:37.957

Pylab 是 matplotlib 的一部分；所以你可以简单地安装 matplotlib，你也会自动得到 pylab。

# jquery - 通过 jquery 更改/还原一些元素，具体取决于单击的按钮

> ID：13237524
> 
> 赞同：0
> 
> 时间：2012-11-05T17:47:53.903
> 
> 标签：jquery

我有一个页面，里面有一个列表和一些缩略图。页面加载时每个*li*的（简化）html ：

```
<a class="img" href="http://exemple.com">
   <img src="http://exemple.jpg" onmouseover="startFlipBook(...);" onmouseout="endFlipBook(...);">
</a> 
```

在那个页面中，我有一个“编辑”按钮。当我单击该按钮时，我加载了 jquery UI 可排序插件（因此用户能够对列表进行排序）。使用 javascript，我删除了图像上的*mouseover*和*mouseout*。我还禁用了对所有*a href*的点击。我愿意：

```
$("#edit").click(function() {
    $( "img" ).removeAttr('onmouseover').removeAttr('onmouseout');
    $( "a, .wrap" ).css('cursor','move');
    $( "a").click(function(){return false;});
}); 
```

到目前为止，它就像我想要的那样工作（虽然不确定这是最好的方法）。

现在，在编辑模式下，我有一个“取消”按钮。*点击该按钮应该将鼠标悬停*和*鼠标*悬停放回图像上，并且链接需要再次工作。

这是我的代码无法正常工作的地方。我愿意 ：

```
$("#cancel").click(function() {
    //No idea how I can get back my initial mouseover and mouseout with the correct parameter        
    $( "a, .wrap" ).css('cursor','auto');
    $( "a" ).click(function(){return true;});
}); 
```

链接保持不可点击，光标错误，我不知道如何放回我的*鼠标悬停*事件。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:54:12.637

在您的“取消”点击功能中......

```
$('a').unbind('click'); 
```

这将取消绑定返回 false 的 click 函数（禁用您的链接）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T18:46:18.263

您应该清除所有 'a' HTML 元素中的`onmouseover`and`onmouseout`属性。

```
<a class="img" href="http://example.com">
    <img src="http://example.jpg">
</a> 
```

在脚本中，您可以使用此解决方案：

```
$(document).ready(function(){
    // Add mouseenter and mouseleave event listener 
    $("a.img")
        .mouseenter(function(){ startFlipBook(...); })
        .mouseleave(function(){ endFlipBook(...); });

    // When click on Edit button
    $("#edit").click(function(){

        // Remove the mouseenter and mouseleave event listener
        $("a.img").unbind("mouseenter").unbind("mouseleave");
        $("a, .wrap").css('cursor','move');
        $("a").click(function(){return false;});
    });

    // When click on Cancel button
    $("#cancel").click(function() {

        // Add mouseenter and mouseleave event listener
        $("a.img")
            .mouseenter(function(){ startFlipBook(...); })
            .mouseleave(function(){ endFlipBook(...); });
        $( "a, .wrap" ).css('cursor','auto');
        // Remove the click event listener
        $( "a" ).unbind("click");
    });
}); 
```

你可以阅读更多关于 jQuery 函数的信息，我在上面写的：

[unbind](http://api.jquery.com/unbind/) : 移除事件监听
[mouseenter](http://api.jquery.com/mouseenter/) : 添加事件监听, 当鼠标进入一个区域
[mouseleave](http://api.jquery.com/mouseleave/) : 添加一个事件监听, 当鼠标离开一个区域

# mysql - MySQL重新格式化mysql结果以满足json hansontable

> ID：13237525
> 
> 赞同：1
> 
> 时间：2012-11-05T17:48:03.193
> 
> 标签：mysql, json, format

根据我之前解决的问题：[Re-arrange mysql result in an expected format for hansontable](https://stackoverflow.com/questions/13221142/re-arrange-mysql-result-in-an-expected-format-for-hansontable/13221932)。我要重新格式化mysql结果

> [“高级”],[“豪华 - 城市景观”],[“豪华 - 阳台”],[“小型套房”],[“安达曼一室公寓”]

进入

```
["Superior","Deluxe - City View","Deluxe - Balcony","Junior Suite","Andaman Studio"] 
```

从这些代码：

```
$sql_rName="select title from room_db where hotel='1' order by id asc";
$result_rName=mysql_db_query($dbname,$sql_rName);
while($rec_rName=mysql_fetch_array($result_rName)){
    $_rName=$rec_rName['title'];
    $_array[]=$_rName;
}
echo "{\"data\": ".json_encode($_array)."}"; 
```

mysql表：room_db ![room_db](../Images/f52de2aa054aef503ecaa748f7a7ce8e.png)

请建议。

附言。感谢 Olaf Dietsche 提供的所有这些帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:55:32.577

要制作正确的 JSON，请尝试：`

```
$result="select title from room_db where hotel='1' order by id asc";    
$messages = array();
            while($message_data = mysql_fetch_assoc($result)) {
                $message = array(
                'id' => $message_data['userid'],
                'title' => $message_data['title']
                );
                $messages[] = $message;
                }
                echo json_encode($messages);
            }
` 
```

并在 reseiver 端执行此操作：

```
`
data1=$.parseJSON(data);

            if(data1.length===0){

                $('#table > #table_body').append('<tr><td colspan="4" align="center" style="color:red">NO matching data </td></tr>');
                }
        else{
            for(var i=0;i<data1.length;i++)
            {
                $('#table > #table_body').append('<tr id="' + data1[i]['id'] +'"> <td id="' + data1[i]['id'] +'" align="center" <td>'+data1[i]['title']+'</td> </tr>');
            }
            }
            $('#table').append('</tbody>');

    ` 
```

# r - 使用 R 中的函数更改 Dataframe 中的值

> ID：13237526
> 
> 赞同：1
> 
> 时间：2012-11-05T17:48:08.837
> 
> 标签：r, dataframe

我有一个数据框，看起来像这样，但很大，所以我不能手动做任何事情：

```
 Bank  Country  KeyItem    Year    Value 
    A      AU     Income     2010     1000
    A      AU     Income     2011     1130
    A      AU     Income     2012     1160
    B      USA    Depth      2010     10000 
```

我想要做的是创建一个函数，我可以在其中选择 Bank、Keyitem 以及从哪一年开始，它返回一个数据框，其中的值作为第一个值的百分比。像这样：

```
 Bank  Country  KeyItem    Year    Value
    A      AU     Income     2010     100
    A      AU     Income     2011     113
    A      AU     Income     2012     116 
```

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T18:41:18.703

这是一个 data.table 解决方案，它应该是快速且内存高效的。

```
DF <- read.table(text="Bank  Country  KeyItem    Year    Value 
A      AU     Income     2010     1000
A      AU     Income     2011     1130
A      AU     Income     2012     1160
B      USA    Depth      2010     10000", header=TRUE, stringsAsFactors=FALSE)

library(data.table)
DT <- as.data.table(DF)
setkey(DT, Bank, KeyItem, Year)

DT[J("A", "Income")] #all entries where Bank is "A", and KeyItem is "Income"
DT[J("A", "Income")][Year >= 2010] #only those with year >= your year

DT[J("A", "Income")][Year >= 2010, Value/Value[1]] # result as vector
DT[J("A", "Income")][Year >= 2010, list(Value/Value[1])] # result as data.table

> DT[J("A", "Income")][Year >= 2010, pct:=list(Value/Value[1])] #result as data.table with all columns
   Bank KeyItem Country Year Value  pct
1:    A  Income      AU 2010  1000 1.00
2:    A  Income      AU 2011  1130 1.13
3:    A  Income      AU 2012  1160 1.16 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T18:11:10.750

我转而将[`plyr`](http://plyr.had.co.nz/)软件包仅用于此类任务：

```
library( "plyr" )

ddply( df, c("Bank", "KeyItem"), function(x) {
  base <- x[ min( x$Year ) == x$Year, "Value" ]
  x$Value <- 100 * x$Value / base
  return( x[ , c("Country", "Year", "Value") ] )
}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T18:14:16.293

尝试以下方法：（`df`是您的数据框）

选择标准：

```
bank <- "A"
keyItem <- "Income"
year <- 2011 
```

创建一个子集：

```
dat <- subset(df, Bank == bank & KeyItem == keyItem & Year >= year) 
```

计算百分比：

```
dat$Value <- dat$Value / dat$Value[1] * 100 
```

作为一个函数：

```
myfun <- function(df, bank, keyItem, year) {
   dat <- df[df$Bank == bank & df$KeyItem == keyItem & df$Year >= year, ]
   "[[<-"(dat, "Value", value = dat$Value / dat$Value[1] * 100)
}

myfun(df, "A", "Income", 2011) 
```

# haskell - Haskell中的替换算法

> ID：13237527
> 
> 赞同：4
> 
> 时间：2012-11-05T17:48:10.787
> 
> 标签：haskell, substitution

我正在尝试在 Haskell 中编写替换算法。我已经`Subst a`用一个构造函数定义了一个多态数据类型，`S::[(String, a)] -> Subst a`如下所示：

```
data Subst a = S [(String, a)] 
```

我现在想编写一个函数`single::String -> a -> Subst a`来构造一个只替换单个变量的函数

这是我尝试过的：

```
single::String -> a -> Subst a
single s1 (Subst a) = s1 a 
```

但是，我收到此错误：`Not in scope: data constructor 'Subst'`

有没有人知道我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T17:52:25.603

*数据构造函数和类型*构造函数不是一回事

 *在您的代码中，类型*构造函数*是*数据构造*函数`Subst`*`S`*

 *类型构造函数用于创建新类型，例如 in`data Foo = Foo (Maybe Int)` `Maybe`是*类型*构造函数，`Foo`是数据构造函数（以及类型构造函数，但您发现它们的名称可能不同）。*数据*构造函数用于创建类型的实例（也不要将此与创建多态类型的实例混淆，例如`Int -> Int`是 的实例`a -> a`）。

所以`S`当你想在你的`single`函数中进行模式匹配时，你需要使用它。不是`Subst`。

希望这是有道理的，如果没有，请告诉我:)

PS 数据构造函数在所有意图和目的上都是函数，这意味着您可以对它们执行与通常对函数执行的操作相同的操作。例如，您可以这样做`map Bar [a,b,c]`，它会将数据构造函数应用于每个元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T18:42:24.387

```
single :: String -> a -> Subst a
single str a = S [(str, a)] 
```

该`[(str, a)]`部件创建一个包含一个元素的列表。该元素是一个元组（或“对”），`str`作为元组的左侧部分和元组`a`的右侧部分。然后，上面的函数将该单元素列表包装在`S`构造函数中，以创建 a 类型`Subst`的值。

`str`结果是一个列表，其中包含从到 value的单个替换规则`a`。**

# c# - Spring.NET 等效于 Java Spring 数据访问用法

> ID：13237529
> 
> 赞同：1
> 
> 时间：2012-11-05T17:48:12.073
> 
> 标签：c#, java, spring, spring.net, data-access

Spring.NET 中的“SimpleJdbcCall”、“MapSqlParameterSource”和“BeanPropertySqlParameterSource”等价物是什么？如何在 Spring.NET 中编写下面的 Java：

```
publicvoid create(T object) {
if(object==null)
return null;
SimpleJdbcCall pspCreate = new SimpleJdbcCall(jdbcTemplate).withProcedureName("cr eate_sp").withReturnValue().declareParameters(new SqlOutParameter("id", Types.BIGINT));
SqlParameterSource in = new BeanPropertySqlParameterSource(object);
Map<String, Object> m = pspCreate.execute(in);
long id = m.containsKey(IDENTITY_VALUE)?(Long) m.get(IDENTITY_VALUE):0;
int resultCode =m.containsKey(RETURN_VALUE)?(Integer) m.get(RETURN_VALUE):0;
}

public List<T> retrieveAll(int pageNum, int pageSize) {
SqlParameterSource in = new MapSqlParameterSource()
.addValue("pageNum", pageNum, Types.INTEGER)
.addValue("pageSize", pageSize, Types.INTEGER);

SimpleJdbcCall pspRetrieveAll =new SimpleJdbcCall(jdbcTemplate).withProcedureName("re trieve_all_sp").withReturnValue().returningResultS et("LIST", BeanPropertyRowMapper.newInstance(UploadBatch.clas s)).returningResultSet(NO_OF_RECORDS, new RowMapper<Long>() {

@Override
public Long mapRow(ResultSet rs, int rowNum) throws SQLException {
return rs.getLong(1);
}
});
Map<String, Object> m = pspRetrieveAll.execute(in);
List<T> list=null;
if(m.containsKey(LIST))
list = (List<T>) m.get(LIST);

return list;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:25:50.347

使用 ADO.NET 章节检查数据访问：

[http://www.springframework.net/doc-latest/reference/html/ado.html](http://www.springframework.net/doc-latest/reference/html/ado.html)

# mod-rewrite - modrewrite 不使用 htaccess 重定向

> ID：13237530
> 
> 赞同：1
> 
> 时间：2012-11-05T17:48:13.937
> 
> 标签：mod-rewrite, url-rewriting

当我键入 domain.ca/keyword.html 时，它应该使用 domain.ca/keyword.php 进行渲染，但事实并非如此。这就是我的 htaccess 文件中的全部内容。

```
Options +FollowSymLinks
Options -Indexes

RewriteEngine On
RewriteBase /   

RewriteRule ^(.*)\.html$ $1.php [NC]

RewriteCond %{REQUEST_URI} !^/robots.txt$ [NC]
RewriteCond %{REQUEST_URI} robots\.txt [NC]
RewriteRule .* http://domain.ca/robots.txt [R=301,L] 
```

# python - 在句子字符串中查找单词的不同实现 - Python

> ID：13237533
> 
> 赞同：1
> 
> 时间：2012-11-05T17:48:30.050
> 
> 标签：python, string, nlp, stemming

*（这个问题是关于一般的字符串检查而不是自然语言处理本身，但如果你把它看作一个 NLP 问题，想象它不是当前分析器可以分析的语言，为了简单起见，我将使用英文字符串例如）*

假设只有 6 种可能的形式可以实现一个单词

1.  首字母大写
2.  带有“s”的复数形式
3.  带有“es”的复数形式
4.  大写+“es”
5.  大写+“s”
6.  没有复数或大写的基本形式

假设我想找到第一个实例的索引任何形式的单词`coach`出现在一个句子中，有没有更简单的方法来做这两种方法：

**长 if 条件**

```
sentence = "this is a sentence with the Coaches"
target = "coach"

print target.capitalize()

for j, i in enumerate(sentence.split(" ")):
  if i == target.capitalize() or i == target.capitalize()+"es" or \
     i == target.capitalize()+"s" or i == target+"es" or i==target+"s" or \
     i == target:
    print j 
```

**迭代尝试除外**

```
variations = [target, target+"es", target+"s", target.capitalize()+"es",
target.capitalize()+"s", target.capitalize()]

ind = 0
for i in variations:
  try:
    j == sentence.split(" ").index(i)
    print j
  except ValueError:
    continue 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:54:03.940

我建议看一下 NLTK 的 stem 包：http: [//nltk.org/api/nltk.stem.html](http://nltk.org/api/nltk.stem.html)

使用它，您可以“从单词中删除形态词缀，只留下词干。词干算法旨在删除那些所需的词缀，例如语法角色、时态、派生形态，只留下词干。”

如果当前 NLTK 未涵盖您的语言，则应考虑扩展 NLTK。如果你真的需要一些简单的东西并且不关心 NLTK，那么你仍然应该将你的代码编写为一个小的、易于组合的实用函数的集合，例如：

```
import string 

def variation(stem, word):
    return word.lower() in [stem, stem + 'es', stem + 's']

def variations(sentence, stem):
    sentence = cleanPunctuation(sentence).split()
    return ( (i, w) for i, w in enumerate(sentence) if variation(stem, w) )

def cleanPunctuation(sentence):
    exclude = set(string.punctuation)
    return ''.join(ch for ch in sentence if ch not in exclude)

def firstVariation(sentence, stem):
    for i, w  in variations(sentence, stem):
        return i, w

sentence = "First coach, here another two coaches. Coaches are nice."

print firstVariation(sentence, 'coach')

# print all variations/forms of 'coach' found in the sentence:
print "\n".join([str(i) + ' ' + w for i,w in variations(sentence, 'coach')]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:31:06.120

形态学通常是一种有限状态现象，因此正则表达式是处理它的完美工具。使用如下函数构建一个匹配所有案例的 RE：

```
def inflect(stem):
    """Returns an RE that matches all inflected forms of stem."""
    pat = "^[%s%s]%s(?:e?s)$" % (stem[0], stem[0].upper(), re.escape(stem[1:]))
    return re.compile(pat) 
```

用法：

```
>>> sentence = "this is a sentence with the Coaches"
>>> target = inflect("coach")
>>> [(i, w) for i, w in enumerate(sentence.split()) if re.match(target, w)]
[(6, 'Coaches')] 
```

If the inflection rules get more complicated than this, consider using [Python's verbose REs](http://docs.python.org/2/library/re.html#re.VERBOSE).

# c# - 创建 Metro 风格应用并将其添加到 openwith 上下文菜单

> ID：13237538
> 
> 赞同：0
> 
> 时间：2012-11-05T17:48:51.097
> 
> 标签：c#, windows-runtime, windows-store-apps, winrt-xaml, .net-4.5

我愿意创建一个类似于 Windows Photo Viewer 的 Metro 风格应用程序。

为此，我需要在 Openwith 上下文菜单中添加我的应用程序。此外，在 Windows 资源管理器中选择的图像文件应在我的照片查看器中打开。如何以选定的图像文件作为参数打开应用程序？

提前致谢

* * *

非常感谢@Filip

`OnFileActivated(FileActivatedEventArgs args)`我在中写了以下代码`App.xaml.cs`

```
protected override void OnFileActivated(FileActivatedEventArgs args)
        {
            // TODO: Handle file activation

            // The number of files received is args.Files.Size
            // The first file is args.Files[0].Name
            base.OnFileActivated(args);
            StorageFile file = args.Files[0] as StorageFile;

            Frame rootFrame = Window.Current.Content as Frame;

            if (rootFrame == null)
            {
                // Create a Frame to act as the navigation context and navigate to the first page
                rootFrame = new Frame();
                //rootFrame.SourcePageType = typeof(ImageViewer);

                if (args.PreviousExecutionState == ApplicationExecutionState.Terminated)
                {
                    //TODO: Load state from previously suspended application
                }

                // Place the frame in the current Window
                Window.Current.Content = rootFrame;
            }

            if (rootFrame.Content == null)
            {
                // When the navigation stack isn't restored navigate to the first page,
                // configuring the new page by passing required information as a navigation
                // parameter
                if (!rootFrame.Navigate(typeof(ImageViewer), file))
                {
                    throw new Exception("Failed to create initial page");
                }
            }
            // Ensure the current window is active
            Window.Current.Activate();
        } 
```

但是，我的应用在打开时不显示任何内容。那么，根据您的说法，缺陷可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T05:55:27.520

如果您编辑 Package.appxmanifest 以在清单编辑器的声明选项卡中添加文件类型关联 - 您的应用将成为可以打开您指定的文件类型的应用之一。然后，您只需向您的 App 类添加一个覆盖来处理文件激活，如[本文所述](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh779669.aspx#Y2358)：

```
protected override void OnFileActivated(FileActivatedEventArgs args)
{
   // TODO: Handle file activation

   // The number of files received is args.Files.Size
   // The first file is args.Files[0].Name
} 
```

# twitter-bootstrap - 引导数据表 - 更改箭头

> ID：13237539
> 
> 赞同：1
> 
> 时间：2012-11-05T17:48:56.517
> 
> 标签：twitter-bootstrap, datatables

我在哪里可以更改 Bootstrap 的 dataTables .js 文件中的默认“箭头”？我需要将当前箭头（← 和 →）更改为双箭头（« 和 »）。我一直在上下 dataTables.js 文件，但在任何地方都找不到。我现在开始把它归咎于我的交叉眼睛。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T17:58:08.850

如果您使用的是[http://datatables.net/blog/Twitter_Bootstrap_2](http://datatables.net/blog/Twitter_Bootstrap_2)上的指南- 您应该只查看 js 文件中的第 46 行和第 47 行（[http://datatables.net/media/blog/bootstrap_2/DT_bootstrap.js](http://datatables.net/media/blog/bootstrap_2/DT_bootstrap.js) )

```
$(nPaging).addClass('pagination').append(
            '<ul>'+
                '<li class="prev disabled"><a href="#">&larr; '+oLang.sPrevious+'</a></li>'+
                '<li class="next disabled"><a href="#">'+oLang.sNext+' &rarr; </a></li>'+
            '</ul>'
        ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:57:40.257

找到它 - 感谢古老的“到处搜索”功能。

找到 bootstrap 的 script.js 文件（在第 44 行找到我的）。

# d3.js - D3 非嵌套选择

> ID：13237541
> 
> 赞同：2
> 
> 时间：2012-11-05T17:49:00.223
> 
> 标签：d3.js

我想转换这个：

```
 var data = [['apples','red'], ["oranges", "orange"], ["bananas", "yellow"]]; 
```

进入：

```
 <div>
   <div>apples</div><div>red</div>
 </div>
 <div>
   <div>oranges</div><div>orange</div>
 </div>
 <div>
   <div>bananas</div><div>yellow</div>
 </div> 
```

我知道这一定很容易，但每个解决方案最终都会嵌套：

```
 <div>Apples<div>red</div></div> 
```

我熟悉表格或列表绘图解决方案，但在真正的问题中，第一个 div 有文本，第二个 div 包含一个图表，所以这不起作用。

这是我最近尝试取消嵌套：

```
var div3 = anchor.selectAll("#mydiv")
        .data(data);

div3
        .enter().append("div")
        .attr("class","one")
        .text(function(d) { return d[0];})

div3.selectAll("#mydiv .one")
        .data(function(d) {
            return [d[1]]; })
        .enter().append("div")
        .attr("class","two")
        .text(function(d) {
            return d;}) 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:03:51.747

这样做的标准方法如下：

```
var data = [['apples','red'], ["oranges", "orange"], ["bananas", "yellow"]];

d3.select("body").selectAll("div.outer")
    .data(data)          // data is array with length 3
  .enter().append("div") // will append 3 divs
    .attr("class", "outer")
  .selectAll("div.inner")
    .data(function(d) { return d; })
  .enter().append("div")
    .attr("class", "inner")
    .text(function(d) { return d; });​ 
```

见工作小提琴：http: [//jsfiddle.net/YaAkv/](http://jsfiddle.net/YaAkv/)

您尝试的代码存在很多问题。我建议阅读：

[用联接思考](http://bost.ocks.org/mike/join/ "用联接思考")

[嵌套选择](http://bost.ocks.org/mike/nest/ "嵌套选择")

和其他教程： [https ://github.com/mbostock/d3/wiki/Tutorials](https://github.com/mbostock/d3/wiki/Tutorials)

* * *

**编辑**

如果不同的数组项具有不同的含义，通常使用 Object 代替（http://fiddle.jshell.net/YaAkv/1/）：

```
var data = [{ fruit: 'apples', color: 'red'}, 
            { fruit: "oranges", color: "orange"},
            { fruit: "bananas", color: "yellow"}
           ];

var diventer = d3.select("body").selectAll("div.item")
    .data(data)
  .enter().append("div")
    .attr("class", "item");

diventer.append("div")
    .attr("class", "fruit")
    .text(function(d) { return d.fruit; });

diventer.append("div")
    .attr("class", "color")
    .text(function(d) { return d.color; }); 
```

然后输出将是：

```
<div class="item">
  <div class="fruit">apples</div>
  <div class="color">red</div>
</div>
<div class="item">
  <div class="fruit">oranges</div>
  <div class="color">orange</div>
</div>
<div class="item">
  <div class="fruit">bananas</div>
  <div class="color">yellow</div>
</div> 
```

这也可以通过以下方式使用原始二维数组来实现（http://fiddle.jshell.net/YaAkv/2/）：

```
var data = [['apples','red'], ["oranges", "orange"], ["bananas", "yellow"]];

var diventer = d3.select("body").selectAll("div.item")
    .data(data)
  .enter().append("div")
    .attr("class", "item");

diventer.append("div")
    .attr("class", "fruit")
    .text(function(d) { return d[0]; });

diventer.append("div")
    .attr("class", "color")
    .text(function(d) { return d[1]; }); 
```

* * *

**编辑**

不将选择存储在变量中的解决方案：

```
var data = [['apples','red'], ["oranges", "orange"], ["bananas", "yellow"]];

d3.select("body").selectAll("div.item")
    .data(data)
  .enter().append("div")
    .attr("class", "item")
    .each(function(d) {
      d3.select(this).append("div")
        .attr("class", "fruit")
        .text(d[0]);

      d3.select(this).append("div")
        .attr("class", "color")
        .text(d[1]);
    });

​ 
```

# xml - 格式化需要在xsl中完成

> ID：13237545
> 
> 赞同：0
> 
> 时间：2012-11-05T17:49:24.660
> 
> 标签：xml, xslt

我有以下由 xsl 文件形成的 pdf 报告，该 xsl 文件定义了此 pdf 报告的样式 下面是 url 请查看 pdf 报告.. [Pdf 报告](http://img839.imageshack.us/img839/4551/50782943.jpg)

使用的 xsl 文件是 ..

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.1" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:set="http://exslt.org/sets" extension-element-prefixes="set" exclude-result-prefixes="fo">
  <xsl:output method="xml" version="1.0" omit-xml-declaration="no" indent="yes"/>
   <xsl:template match="/">
    <fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format">
      <fo:layout-master-set>
        <fo:simple-page-master master-name="A4" page-width="21cm" page-height="29.7cm" margin-top="2cm" margin-bottom="1cm" margin-left="1cm" margin-right="1cm">
           <fo:region-body margin-bottom="2cm" margin-top="4cm"/>
          <fo:region-after extent="2cm"/>
          <fo:region-before extent="4cm"/>
        </fo:simple-page-master>
              </fo:layout-master-set>
      <fo:page-sequence master-reference="A4" initial-page-number="1">
        <fo:static-content flow-name="xsl-region-after">
            <fo:block border-bottom-style="solid" 
                               text-align="left" font-size="9pt"  >
               </fo:block>
          <fo:block font-size="9pt" text-align="end">
            <fo:table table-layout="fixed">
              <fo:table-column column-width="9.5cm"/>
              <fo:table-column column-width="9.5cm"/>
               <fo:table-body>
                <fo:table-row>
                        <fo:table-cell
                                        text-align="center">
                    <fo:block text-align="left">
                                            Run:
                                    <xsl:value-of select="substring(  DepartmentSalesReport/CurrentDate , 6, 2 )" />
                                        /
                                    <xsl:value-of select="substring(  DepartmentSalesReport/CurrentDate , 9, 2 )" />
                                        /
                                    <xsl:value-of select="substring(  DepartmentSalesReport/CurrentDate , 1, 4 )" />
                                        @
                                    <xsl:value-of select="DepartmentSalesReport/currentTime" />
                                        </fo:block>
                            </fo:table-cell>
                   <fo:table-cell text-align="right">
                    <!--fo:block space-before="8mm">
                      <xsl:text>Keep this report for 6 months</xsl:text>
                    </fo:block-->
                  </fo:table-cell>
                  <fo:table-cell >
                    <fo:block space-before="8mm">Page <fo:page-number/> of <fo:page-number-citation ref-id="terminator"/></fo:block>
                  </fo:table-cell>
                </fo:table-row>
              </fo:table-body>
            </fo:table>

          </fo:block>
        </fo:static-content>

        <fo:static-content flow-name="xsl-region-before">
          <fo:block text-align-last="center" space-after="1.5cm">
            <fo:table table-layout="fixed">
              <fo:table-column column-width="4cm"/>
              <fo:table-column column-width="10cm"/>
               <fo:table-column column-width="2cm"/>
               <fo:table-column column-width="2cm"/>
              <fo:table-body>
                <fo:table-row>
                  <fo:table-cell  font-size="9pt">
                    <fo:block>Store Number:
                      <xsl:value-of select="DepartmentSalesReport/store_code"/>
                    </fo:block>
                  </fo:table-cell>
                   <fo:table-cell text-align="center">
                             <fo:block  text-align-last="center" font-size="14pt" font-weight="bold" space-after="1mm">
                                <fo:inline text-decoration="underline">Department Sales Report</fo:inline>
                               </fo:block>
                  </fo:table-cell>
                  <fo:table-cell text-align="right"   font-size="9pt">
                     <fo:block > 
                        <xsl:value-of select="DepartmentSalesReport/tradingday"/>   
                     </fo:block>
                  </fo:table-cell>
                  <fo:table-cell text-align="right" font-size="9pt">
                    <xsl:variable name="date"><xsl:value-of select="DepartmentSalesReport/tradingdate"/></xsl:variable>
                    <fo:block> 
                        <xsl:value-of select="substring($date,5,2)"/>/<xsl:value-of select="substring($date,7,2)"/>/<xsl:value-of select="substring($date,1,4)"/>
                    </fo:block>
                  </fo:table-cell>
                </fo:table-row>
              </fo:table-body>
            </fo:table>
          <fo:table table-layout="fixed">
              <fo:table-column column-width="19cm"/>
          <fo:table-body>
                <fo:table-row>
                   <fo:table-cell text-align="center">
                                      <fo:block text-align-last="center" font-size="9pt" >
                                        Summary of Sales by department, only those
                                            departments with activity (Sales,
                                            refunds, voids) will appear on this
                                            report.Use this report to monitor sales in
                                            key departments and make merchandising
                                            decisions as needed.
                          </fo:block>
                  </fo:table-cell>
                </fo:table-row>
              </fo:table-body>
            </fo:table>
          </fo:block>
          <fo:block font-size="9pt" >
           <fo:table table-layout="fixed" >
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-column
                                column-width="6cm"
                                text-align="center"/>
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-column
                                column-width="1.8cm" 
                                text-align="center"/>
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-column
                                column-width="1.6cm"
                                text-align="center"/>
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-body>
                            <fo:table-row>
                            <fo:table-cell number-columns-spanned="9"> <fo:block color="black"
                        space-before.optimum="-8pt">
                        <fo:block border-bottom-style="solid" 
                               text-align="left" font-size="9pt"  />

                    </fo:block></fo:table-cell>
                            </fo:table-row>
                            <fo:table-row font-weight="bold">
                                <fo:table-cell number-columns-spanned="2">
                            <fo:block text-align="left"><xsl:text>-------------------------Department-------------------</xsl:text></fo:block>
                            </fo:table-cell>
                            <fo:table-cell number-rows-spanned="2">
                            <fo:block text-align="right"><xsl:text>Net Sales</xsl:text></fo:block>
                            </fo:table-cell>
                            <fo:table-cell number-rows-spanned="2">
                            <fo:block text-align="right"><xsl:text>Qty</xsl:text></fo:block>
                            </fo:table-cell>
                            <fo:table-cell number-rows-spanned="2">
                            <fo:block text-align="right"><xsl:text>% of Sales</xsl:text></fo:block>
                            </fo:table-cell>
                            <fo:table-cell number-columns-spanned="2">
                            <fo:block text-align="right"><xsl:text>--------Void--------</xsl:text></fo:block>
                            </fo:table-cell>
                                <fo:table-cell number-columns-spanned="2">
                            <fo:block text-align="right"><xsl:text>-------Return-------</xsl:text></fo:block>
                            </fo:table-cell>        
                                </fo:table-row>
                                <fo:table-row font-weight="bold">
                                    <fo:table-cell>
                                            <fo:block text-align="left">
                                                <xsl:text>#</xsl:text>
                                            </fo:block>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block text-align="left">
                                                <xsl:text>Description</xsl:text>
                                            </fo:block>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block text-align="right">
                                                <xsl:text>Qty</xsl:text>
                                            </fo:block>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block text-align="right">
                                                <xsl:text>Amount</xsl:text>
                                            </fo:block>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block text-align="right">
                                                <xsl:text>Qty</xsl:text>
                                            </fo:block>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block text-align="right">
                                                <xsl:text>Amount</xsl:text>
                                            </fo:block>
                                        </fo:table-cell>
                                </fo:table-row>
                    <fo:table-row >
                            <fo:table-cell number-columns-spanned="9" > <fo:block color="black"
                        space-before.optimum="-8pt">

                    </fo:block></fo:table-cell>
                            </fo:table-row>

                            </fo:table-body>
                            </fo:table>
          </fo:block>
          <fo:block border-bottom-style="solid" 
                               text-align="left" font-size="9pt"  />

     </fo:static-content>

        <fo:flow flow-name="xsl-region-body">
        <xsl:variable name="storeSales" select="sum(DepartmentSalesReport/DepartmentDesc/netSales)"/>
        <br/>
          <!--          <fo:block font-size="9pt" space-after="3mm" break-before="page">-->
            <xsl:for-each select="DepartmentSalesReport/DepartmentDesc">
                    <fo:block font-size="9pt" space-after="1mm">
                    <fo:table table-layout="fixed" >
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-column
                                column-width="6cm"
                                text-align="center"/>
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-column
                                column-width="1.8cm" />
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-column
                                column-width="1.6cm" />
                            <fo:table-column
                                column-width="1.6cm"
                                text-align="center"/>
                            <fo:table-column
                                column-width="1.6cm" />
                    <fo:table-body>
                        <xsl:variable name="levelNo"><xsl:value-of select="levelNbr"/></xsl:variable>
                                <xsl:variable name="levelCheck"><xsl:value-of select="level"/></xsl:variable>
                                <xsl:if test="$levelCheck!=''">
                                    <xsl:if test="$levelNo='2'">
                                    <fo:table-row>  
                                    <fo:table-cell number-columns-spanned="9">
                                    <fo:block>
                                           <xsl:text>&#160;</xsl:text>
                                    </fo:block>
                                    </fo:table-cell>
                                    </fo:table-row>
                                </xsl:if>
                     <fo:table-row >
                                        <fo:table-cell>
                                            <fo:block text-align="left">
                                                <xsl:value-of select="level"/>
                                            </fo:block>
                                        </fo:table-cell>

                                        <xsl:choose>
                                        <xsl:when test="$levelNo!='2'">
                                        <fo:table-cell>
                                            <fo:block text-align="left">
                                                <xsl:value-of select="prgpName"/>
                                            </fo:block>
                                        </fo:table-cell>
                                            </xsl:when>
                                        <xsl:otherwise>
                                            <fo:table-cell>
                                                <fo:block text-align="left">
                                                    ***DEPT TOTAL*** </fo:block>
                                            </fo:table-cell>
                                        </xsl:otherwise>
                                            </xsl:choose>
                                        <fo:table-cell>
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="format-number(netSales,'0.00')"/>
                                            </fo:block>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="format-number(prodCount,'0')"/>
                                            </fo:block>
                                        </fo:table-cell>

                                        <fo:table-cell>
                                            <xsl:variable name="salesPercentage"><xsl:value-of select="format-number((netSales div $storeSales)*100, '###,##0')"/></xsl:variable>
                                            <xsl:if test="$salesPercentage='NaN'">
                                            <fo:block text-align="right">
                                                <xsl:text>0</xsl:text>
                                            </fo:block>
                                            </xsl:if>
                                            <xsl:if test="$salesPercentage!='NaN'">
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="$salesPercentage"/>
                                            </fo:block>
                                            </xsl:if>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="format-number(postVoidQuantity,'0')"/>
                                            </fo:block>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="format-number(postVoidAmount,'0.00')"/>
                                            </fo:block>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="format-number(returnQuantity,'0')"/>
                                            </fo:block>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block text-align="right">
                                                <xsl:value-of
                                                    select="format-number(returnAmount,'0.00')"/>
                                            </fo:block>
                                        </fo:table-cell>
                                    </fo:table-row>
                        <xsl:if test="$levelNo='2'">
                                    <fo:table-row>  
                                    <fo:table-cell number-columns-spanned="9">
                                    <fo:block>
                                           <xsl:text>&#160;</xsl:text>
                                    </fo:block>
                                    </fo:table-cell>
                                    </fo:table-row>
                                </xsl:if>
                                    </xsl:if>
                    </fo:table-body>

                  </fo:table>
                </fo:block>

            </xsl:for-each>
        <fo:block border-bottom-style="solid" 
                               text-align="left" font-size="9pt"  />
           <fo:block  font-size="9pt" space-after="1mm" space-before="2mm">

<fo:table>
<fo:table-column column-width="1.5cm"/>
<fo:table-column column-width="4.5cm"/>

<fo:table-header>
  <fo:table-row>
    <fo:table-cell>
      <fo:block font-weight="bold"></fo:block>
    </fo:table-cell>
    <fo:table-cell>
     <fo:block text-align="left" space-after="1.5mm">
     <xsl:text>DEPARTMENT TOTALS</xsl:text></fo:block>
    </fo:table-cell>
  </fo:table-row>
</fo:table-header>

<fo:table-body>
  <fo:table-row>
    <fo:table-cell>
      <fo:block></fo:block>
    </fo:table-cell>
    <fo:table-cell>
      <fo:block><xsl:text>SS SALES</xsl:text> <xsl:value-of select="DepartmentSalesReport/store_code"/></fo:block>
    </fo:table-cell>
  </fo:table-row>
  <fo:table-row>
    <fo:table-cell>
      <fo:block></fo:block>
    </fo:table-cell>
    <fo:table-cell>
      <fo:block><xsl:text>CIGARETTE SALES</xsl:text></fo:block>
    </fo:table-cell>
  </fo:table-row>
   <fo:table-row>
    <fo:table-cell>
      <fo:block></fo:block>
    </fo:table-cell>
    <fo:table-cell>
      <fo:block space-after="1.5mm"><xsl:text>LIQUOR SALES</xsl:text></fo:block>
    </fo:table-cell>
  </fo:table-row>
   <fo:table-row>
    <fo:table-cell>
      <fo:block></fo:block>
    </fo:table-cell>
    <fo:table-cell>
      <fo:block><xsl:text>TOTAL FRONT END SALES</xsl:text></fo:block>
    </fo:table-cell>
  </fo:table-row>

</fo:table-body>

</fo:table>

</fo:block>

              <fo:block space-before="5mm" text-align="center" font-size="9pt" font-weight="bold" id="terminator">
                 <xsl:text></xsl:text>
          </fo:block>

        </fo:flow>

      </fo:page-sequence>
    </fo:root>
  </xsl:template>

</xsl:stylesheet> 
```

现在我在当前报告中添加了新行，如此链接所示，..[修改报告](http://imageshack.us/photo/my-images/823/sdfdu.jpg/)，但请告知正如您也看到我希望在 SS SALES 的前面打印 59997，也用红色箭头表示请告知需要在 xsl 中进行哪些修改才能实现这一点，为了了解数值为 59997 的目的是来自 xsl `<fo:block><xsl:text>SS SALES</xsl:text> <xsl:value-of select="DepartmentSalesReport/store_code"/></fo:block>`请告知如何在前面显示该值以及为此在当前 xsl 中需要进行什么格式化。

请建议大家，因为我因此而被困住了..!!任何帮助都将发自内心的感激。

以下是xml，请查看..！

```
<?xml version="1.0" encoding="UTF-8"?>
<Report Name="DepartmentSalesReport" Title="Department Sales Report"
    Description="Department Sales Report" Version="1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <InitParam Name="tradingdate" Type="java.lang.String" />
      <InitParam Name="tradingday" Type="java.lang.String" />
      <ReportBand BandType="HeaderBand" Name="DepartmentSalesReportBand">
        <ReportElement Type="Header" DataSource="OutletSQL">
        <DataField Name="store_code" Type="Data" FieldName="ORGU_CODE" />
        </ReportElement>
        <ReportElement Type="Header" DataSource="InitParams">
        <DataField Name="tradingdate" Type="Data" FieldName="tradingdate" />
        </ReportElement>
        <ReportElement Type="Header" DataSource="InitParams">
        <DataField Name="tradingday" Type="Data" FieldName="tradingday" />
        </ReportElement>
    </ReportBand>
    <ReportBand BandType="DetailBand" Name="Terminal">
        <ReportElement Type="Detail" Name="DepartmentDesc" DataSource="DataSql">
            <DataField Name="level" Type="Data" FieldName="LEVEL"/>
            <DataField Name="levelNbr" Type="Data" FieldName="LEVELNBR"/>
            <DataField Name="prgpName" Type="Data" FieldName="PRGP_NAME"/>
            <DataField Name="prodCount" Type="Data" FieldName="PROD_COUNT"/>
            <DataField Name="netSales" Type="Data" FieldName="NET_SALES"/>
            <DataField Name="postVoidQuantity" Type="Data" FieldName="POST_VOID_QUANTITY"/>
            <DataField Name="postVoidAmount" Type="Data" FieldName="POST_VOID_AMOUNT"/>
            <DataField Name="returnQuantity" Type="Data" FieldName="RETURN_QUANTITY"/>
            <DataField Name="returnAmount" Type="Data" FieldName="RETURN_AMOUNT"/>  

        </ReportElement>

        <ReportElement Type="Header" DataSource="DateSQL">
            <DataField Name="CurrentDate" Type="Data" FieldName="1" />
            <DataField Name="currentTime" Type="Data" FieldName="2" />
        </ReportElement>
    </ReportBand>
    <DataSource
        Type="walgreens.pos.maintenance.eod.DepartmentSalesReportDataSource"
        Name="DataSql"
        Statement="">
    </DataSource>
    <DataSource
        Type="com.pcmsgroup.v21.star.framework.application.reports.SpringReadOnlySQLStatement"
        Name="OutletSQL"
        Statement="select ORGU_CODE,OUTL_TRADE_DATE from outlet,org_unit where outlet.OUTL_ID = org_unit.OUTL_ID">
    </DataSource>

    <DataSource
        Type="com.pcmsgroup.v21.star.framework.application.reports.SpringReadOnlySQLStatement"
        Name="DateSQL"
        Statement="SELECT current date,current time FROM sysibm.sysdummy1">
    </DataSource>

</Report> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:12:29.790

为了查看生成 XSL-FO 的 XSLT，涉及到许多单独的表格，报告中的部门列表是当前总数的单独表格。对于列出部门的表，有九列

```
<fo:table table-layout="fixed">
   <fo:table-column column-width="1.6cm"/>
   <fo:table-column column-width="6cm" text-align="center"/>
   <fo:table-column column-width="1.6cm"/>
   <fo:table-column column-width="1.6cm"/>
   <fo:table-column column-width="1.8cm"/>
   <fo:table-column column-width="1.6cm"/>
   <fo:table-column column-width="1.6cm"/>
   <fo:table-column column-width="1.6cm" text-align="center"/>
   <fo:table-column column-width="1.6cm"/>
   <fo:table-body> 
```

但是，对于您的部门总计，该表只有两列

```
<fo:table>
   <fo:table-column column-width="1.5cm"/>
   <fo:table-column column-width="4.5cm"/>
   <fo:table-header> 
```

我怀疑你在这里真的想要三列，它们的长度对应于部门列表的前三列

```
<fo:table
   <fo:table-column column-width="1.6cm"/>
   <fo:table-column column-width="6cm"/>
   <fo:table-column column-width="1.6cm"/>
   <fo:table-header> 
```

然后，例如，对于您的总行数，而不是这样做......

```
<fo:table-row>
   <fo:table-cell>
      <fo:block/>
   </fo:table-cell>
   <fo:table-cell>
      <fo:block>
         <xsl:text>SS SALES</xsl:text>
         <xsl:value-of select="DepartmentSalesReport/store_code"/>
      </fo:block>
   </fo:table-cell>
 </fo:table-row> 
```

您只需添加一个新的表格单元格

```
<fo:table-row>
   <fo:table-cell>
      <fo:block/>
   </fo:table-cell>
   <fo:table-cell>
      <fo:block>
         <xsl:text>SS SALES</xsl:text>
      </fo:block>
   </fo:table-cell>
   <fo:table-cell>
      <fo:block>
         <xsl:value-of select="DepartmentSalesReport/store_code"/>
      </fo:block>
   </fo:table-cell>
 </fo:table-row> 
```

您可能需要对最终“总计”表中的所有行执行此操作

# java - 使用java接收RS-232C设备的数据

> ID：13237548
> 
> 赞同：0
> 
> 时间：2012-11-05T17:49:39.760
> 
> 标签：java, serial-port, rxtx

我最近购买了 USB 条形码扫描仪。它有 3 种不同的界面选择选项：

1.  RS-232C
2.  USB
3.  魔杖仿真

要求仅在Java（Rxtx API）的帮助下使用RS-232C接口接收扫描的条形码。据我所知，我需要在 RXTX 中定义一个 COM 端口才能开始与设备交互

但问题是我在 RS-232C 接口中使用时无法找到它的 COM 端口。

与 RS-232C 端口通信时有什么遗漏吗，如何找到端口号。

请帮助我。

更新：按照建议，我使用下面的代码（使用[JSSC](http://code.google.com/p/java-simple-serial-connector/)）扫描了我的系统中的所有串行端口

```
 import jssc.SerialPortList;

public class Main {

public static void main(String[] args) {
    String[] portNames = SerialPortList.getPortNames();
    for(int i = 0; i < portNames.length; i++){
        System.out.println(portNames[i]);
    }
}
} 
```

**需要注意的一点：当我连接我的条码扫描器并移除扫描器时，上面代码获得的端口列表没有变化。**

输出：COM3 COM11 COM18 COM32 COM33 COM34 COM35 COM36 COM37 COM38 COM39 COM40 COM42 COM45 COM52 COM53 COM59 COM60 COM61​​ COM62 COM63

输出后，我尝试使用以下代码一一监听上述每个端口：

导入 jssc.SerialPort；导入 jssc.SerialPortException；

公共类主要{

```
public static void main(String[] args) {
    SerialPort serialPort = new SerialPort("COM63"); //manually setting all the ports above one by one
    try {
        serialPort.openPort();//Open serial port
        byte[] buffer = serialPort.readBytes(10);
        System.out.println(buffer.toString());
        serialPort.closePort();//Close serial port
    }
    catch (SerialPortException ex) {
        System.out.println(ex);
    }
}
} 
```

我得到端口忙或没有输出（同时我继续使用我的条形码扫描仪扫描）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:54:14.443

[这是](https://stackoverflow.com/questions/1677565/automatically-detect-which-com-port-is-connected-to-a-usb-gsm-modem-using-java)StackOverflow 上其他地方发布的解决方案。基本上你需要从你的操作系统循环你可用的 comports 并显示/选择想要的。如果您对此有疑问，请发布一些代码供我们审核。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T19:21:03.960

我不熟悉这些 API，但对 COM 端口的电气端相当熟悉。与 USB 端口不同，没有自动“握手”来指示设备是否已连接。但是，界面中存在几条状态行。

除了 TD/RD 信号（发送数据/接收数据）之外，还有 RTS/CTS——请求发送和清除发送。RTS 和 CTS 在没有任何连接时会“未准备好”。

通常的协议是设备断言 RTS，然后另一端返回 CTS 以指示一切就绪。然而，由于计算机可以表现为“设备”或“调制解调器”（RS-232 知道的仅有的两件事），这一切都变得复杂了。结果是您可以有几种不同的引脚和信号配置，具体取决于这两个部分的假定模式。（如果你幸运的话，扫描仪文档会描述其中的一些内容。）

更复杂的事情是有 DSR/DTR 信号——数据集（调制解调器）就绪和数据终端就绪。在大多数 PC 配置中，这些都会被忽略，但并非总是如此。

因此，如果您的扫描速度不快，您可能需要查看[引脚分配](http://en.wikipedia.org/wiki/Serial_port#Pinouts)并使用电压表和一些跳线将您的物理端口设置为扫描仪可以找到的状态。然后将进行进一步的实验来确定如何设置状态信号以使扫描仪开始说话。

# android - 全屏视频播放器 - 导航栏后面的媒体控制器

> ID：13237554
> 
> 赞同：15
> 
> 时间：2012-11-05T17:49:52.193
> 
> 标签：android, fullscreen, android-videoview

我对隐藏在导航栏后面的媒体控制器有疑问（ICS 上的软导航键）。起初是好的（第一张图片），但是当导航栏第一次隐藏时，媒体控制器被调整大小以适应屏幕（正确），但当导航栏再次出现时（第二张图片）没有调整大小。广告也被移到后面（隐藏屏幕截图）。

如果我理解文档正确， *fitsSystemWindows*应该负责调整大小。但它不起作用。

我怎样才能做到这一点？谢谢你的帮助。

我正在 Galaxy Nexus 上对此进行测试。

XML 布局：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/playerLayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:animateLayoutChanges="true"
android:background="@color/black" >
<mynamespace.BKDVideoView
    android:id="@+id/videoview"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"/>
<mynamespace.SubtitleTextView
    android:id="@+id/subtitleText"
    style="@style/SubtitleOverlayText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom|center_horizontal"
    android:layout_marginBottom="30dp"
    android:gravity="center"
    android:visibility="gone"
    android:fitsSystemWindows="true"
    android:animateLayoutChanges="true"/>
<FrameLayout
    android:id="@+id/adLayout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="top|right"
    android:fitsSystemWindows="true"
    android:animateLayoutChanges="true"/>
<FrameLayout
    android:id="@+id/videoMediaControllerHolder"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fitsSystemWindows="true"
    android:animateLayoutChanges="true"/> 
```

BKDVideoView 是从 VideoView 的 GrepCode 复制而来的，带有一些自定义。我对 MediaController 做了同样的事情。在 MediaController 我这样称呼隐藏：

```
int newVis = SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN | SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION | SYSTEM_UI_FLAG_LAYOUT_STABLE;
    if (!visible)
    {
        newVis |= SYSTEM_UI_FLAG_LOW_PROFILE | SYSTEM_UI_FLAG_FULLSCREEN | SYSTEM_UI_FLAG_HIDE_NAVIGATION;
    }

    // mSystemUiHolder -> FrameLayout (playerLayout)
    mSystemUiHolder.setSystemUiVisibility(newVis); 
```

![没事的时候](../Images/684064fe52333222f24dcdaf3fedd31d.png) ![当它被覆盖时](../Images/854567b39cd8328bc78b4a880392bf72.png)

更新：如果您有同样的问题，请检查接受的答案中的评论。对于需要全屏显示的视图，请使用 sammyboy 代码。感谢双方。抱歉，我需要太多时间来解决这个问题，无法给你积分:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T11:25:37.053

这是系统栏问题。某些设备的 fill_parent 或 match_parent 实体具有完整的屏幕尺寸，并且无法识别系统栏的宽度和高度。我建议：以编程方式为视图赋予一个整数值。（计算系统栏的宽度和高度）。并从屏幕尺寸中删除某人的宽度或高度（横向或纵向模式）并将此值设置为视图。

[这里](https://stackoverflow.com/a/1016941/1631457)是如何获得屏幕尺寸等的答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T17:10:53.257

看看这个： [http ://bin-liu.blogspot.no/2012/03/how-to-hide-and-display-navigation-bar.html](http://bin-liu.blogspot.no/2012/03/how-to-hide-and-display-navigation-bar.html)

```
public void onLayoutClicked(View v) {
    view.setSystemUiVisibility(View.SYSTEM_UI_FLAG_HIDE_NAVIGATION);
} 
```

.

```
Display display = getWindowManager().getDefaultDisplay();     
Method mGetRawH = Display.class.getMethod("getRawHeight");
Method mGetRawW = Display.class.getMethod("getRawWidth");
int rawWidth = (Integer) mGetRawW.invoke(display);
int rawHeight = (Integer) mGetRawH.invoke(display); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T18:04:03.123

用于`bringToFront()`视图位于顶部

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T16:00:39.077

由于`VideoView`s 是`SurfaceView`s，因此它们的行为与普通 s 不同`View`。您需要通过指定以下内容来确保它保留在后台：

```
videoview.setZOrderMediaOverlay(false); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-23T19:08:06.620

`android:fitsSystemWindows="false"`在包含表面视图的框架布局中添加 。

以及您活动中的此代码

```
your_framelayout_here.setSystemUiVisibility(View.SYSTEM_UI_FLAG_LAYOUT_STABLE |View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN|View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION); 
```

# javascript - 滚动到页面底部100px时jQuery加载内容，触发多个事件

> ID：13237555
> 
> 赞同：13
> 
> 时间：2012-11-05T17:49:59.980
> 
> 标签：javascript, jquery, pagination, scroll

我希望一个事件在用户滚动并几乎到达页面底部时加载更多内容，例如距离底部大约 100 像素，问题是每次滚动页面较低的 100 像素时都会触发事件，因此，由于显而易见的原因，这是一个不可能发生的明显问题，所以我想知道如何才能做到最好，我已经在此处检查了其他答案/问题，但是部分有效的解决方案不适合我需要的要做，当我尝试更改它时，它每次都会完全冻结我的浏览器。这是问题： [检查用户是否滚动到底部](https://stackoverflow.com/questions/3898130/how-to-check-if-a-user-has-scrolled-to-the-bottom)

我正在查看的答案接近底部，但这是他建议的代码：

```
$(window).scroll(function() {
   if($(window).scrollTop() + $(window).height() > $(document).height() - 100) {
       $(window).unbind('scroll');
       alert("near bottom!");
   }
}); 
```

现在就像我说的那样，这确实有效并且可以防止多个事件被触发，问题是我需要触发无数个事件，比如当你到达底部时我加载了 100 行信息，但还有 1500 多行，我需要它每次都重复加载每一个信息量（一旦你每次到达页面的底部 100px 部分）

所以我试图做的是：

```
 function loadMore()
{
   alert("More loaded");
   $(window).bind('scroll');
 }

$(window).scroll(function() {
   if($(window).scrollTop() + $(window).height() > $(document).height() - 100) {
       $(window).unbind('scroll');
       loadMore();
   }
}); 
```

就像我说的那样，每次绑定部分都会立即冻结我的浏览器。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-05T17:56:39.740

我也有同样的问题。我遇到了这个[链接](http://ejohn.org/blog/learning-from-twitter/)，它真的很有帮助（并且有效）！

**更新：**我查看了代码，我认为当您重新绑定时，您缺少要重新绑定的功能。

[jsFiddle](http://jsfiddle.net/YM5dp/)

```
 function loadMore()
{
   console.log("More loaded");
    $("body").append("<div>");
   $(window).bind('scroll', bindScroll);
 }

 function bindScroll(){
   if($(window).scrollTop() + $(window).height() > $(document).height() - 100) {
       $(window).unbind('scroll');
       loadMore();
   }
}

$(window).scroll(bindScroll); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-28T12:49:40.667

这将对您有所帮助。

```
<script type="text/javascript">
var sIndex = 11, offSet = 10, isPreviousEventComplete = true, isDataAvailable = true;

$(window).scroll(function () {
 if ($(document).height() - 50 <= $(window).scrollTop() + $(window).height()) {
  if (isPreviousEventComplete && isDataAvailable) {

    isPreviousEventComplete = false;
    $(".LoaderImage").css("display", "block");

    $.ajax({
      type: "GET",
      url: 'getMorePosts.ashx?startIndex=' + sIndex + '&offset=' + offSet + '',
      success: function (result) {
        $(".divContent").append(result);

        sIndex = sIndex + offSet;
        isPreviousEventComplete = true;

        if (result == '') //When data is not available
            isDataAvailable = false;

        $(".LoaderImage").css("display", "none");
      },
      error: function (error) {
          alert(error);
      }
    });

  }
 }
 });
 </script> 
```

通过此链接查看整篇文章并详细说明如何触发多个事件。

[当浏览器滚动到jQuery中的页面末尾时加载更多内容](http://www.dotnetbull.com/2013/05/browser-scroll-to-end-of-page-in-jquery.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-19T21:54:37.043

我有同样的问题。为了解决这个问题，我使用 underscore.js 库来防止触发多个事件。链接在这里。[http://underscorejs.org/#throttle](http://underscorejs.org/#throttle)

# jsf-2 - 从 JSF 提交时，数据表中的 CDI bean 列表为空

> ID：13237557
> 
> 赞同：0
> 
> 时间：2012-11-05T17:50:25.917
> 
> 标签：jsf-2, cdi

请注意：这个问题是关于 CDI 范围的，因为我们在应用程序中使用 CDI 范围，而不是 JSF 范围。

1）RequestScoped（企业上下文）中的Controller Bean（TestController.java）称为index_cut.xhtml，当我们第一次来到这个页面时。

![在此处输入图像描述](../Images/9ab378417fbfd14162c0ad27f200de3d.png)

2）在“加载”按钮上，我们加载以下方法来填充 sapFinancialPeriodList 工作正常并显示数据

![<<XHTML 代码>>](../Images/234ba956ceadc5230ca1ff6c3df2bdca.png)

![<<JAVA代码>>](../Images/792148443e2fac92c4d7d2cca01b4e10.png)

![<<XHTML 代码>>](../Images/3c33290d96dade5024c8ed05d971798d.png)

3）更改页面内容并提交后，`sapFinancialPeriodList`在如下方法中显示为NULL——</p>

![<<JAVA代码>>](../Images/a430d763a273389fe13b04a9dc64288c.png)

![<< XHTML 结果 >>](../Images/f76a304a40bf0564fdf8a611d19cec9e.png)

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:04:30.857

您的 bean 是请求范围的，并且您仅在操作时加载数据模型，而不是在（后）构造时加载。当加载数据的操作完成后的 HTTP 响应时，该 bean 将被丢弃。随后的请求将获得一个全新的 bean 实例，所有属性都设置为默认值。但是，由于在（后）构造期间没有保留相同的数据模型，因此它保持为空。

在 JSF2 中，您可以使用`@ViewScoped`. 这样，只要您通过回发（返回`null`or `void`）与相同的视图交互，bean 就会存在。

在 CDI 中，您需要使用 来解决这个问题`@ConversationScoped`，而这又需要一些额外的样板文件，并在适当的时候`@Inject Conversation`完成`begin()`并调用。`end()`有关具体示例，另请参阅[在 JSF 2.0 中为向导模式使用什么范围？](https://stackoverflow.com/questions/9896813/what-scope-to-use-in-jsf-2-0-for-wizard-pattern/9897016#9897016).

另一种方法是通过命令链接/按钮将负责创建数据模型的参数传递给后续请求`<f:param>`，如下所示

```
<h:commandButton value="save" ...>
    <f:param name="period" value="#{bean.period}" />
</h:commandButton> 
```

然后在请求范围 bean 的（后）构造函数中重新创建完全相同的数据模型，如下所示

```
String period = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("period");
List<SapFinancialPeriod> sapFinancialPeriodList = someservice.list(period); 
```

*（如果您使用的是标准 JSF，那么上面的解决方法会更好`@ManagedProperty`；据我所知，CDI 没有注释可以让您将 HTTP 请求参数设置为 bean 属性）*

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)

* * *

**与具体问题无关**，即将推出的 JSF 2.2 使用带有新注释和新标签的新[“Faces Flow”](http://jdevelopment.nl/jsf-22/#730)特性以更好的方式解决了这一功能需求。`@FlowScoped``xmlns:j="http://java.sun.com/jsf/flow"`

# java - 如何正确关闭这些线程

> ID：13237560
> 
> 赞同：0
> 
> 时间：2012-11-05T17:50:34.497
> 
> 标签：java, multithreading

我想让 OptionPanel 使线程自己关闭。我知道它应该在线程类的 run 方法中完成，但我不知道我是否应该在那里同步一些东西。

*单击 JOptionPanel 中的正确选项后，如何使这些线程自行关闭？*

```
import javax.swing.JOptionPane;

public class Wat extends Thread {
    private char c;
    private int interv;
    private volatile boolean running = true;

    public Wat(char c, int interv) {
        this.c = c;
        this.interv = interv;
    }

    public void run() {

        while (running) {
            try {
                System.out.println(c);
                Thread.sleep(interv * 100);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }

    }

    public static void main(String[] args) {
        Wat w1 = new Wat('A', 3);
        Wat w2 = new Wat('B', 4);
        Wat w3 = new Wat('C', 5);
        w1.start();
        w2.start();
        w3.start();
        Object[] options = { "Shutdown A", "Shutdown B", "Shutdown C" };
        int option;
        while (w1.isAlive() || w2.isAlive() || w3.isAlive()) {
            option = JOptionPane.showOptionDialog(null,
                    "Which one would you like to shut?", "Threads",
                    JOptionPane.YES_NO_CANCEL_OPTION,
                    JOptionPane.QUESTION_MESSAGE, null, options, options[2]);
            switch (option) {
            case JOptionPane.YES_OPTION:
                w1.running = false;
                break;
            case JOptionPane.NO_OPTION:
                w2.running = false;
                break;
            case JOptionPane.CANCEL_OPTION:
                w3.running = false;
                break;
            }
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:52:20.283

鉴于您有：

```
Thread.sleep(interv * 100); 
```

我会考虑向每个线程发送[中断。](http://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html)中断将对`sleep()`方法执行此操作，并且它比循环布尔值（例如`while (!done) {....}`）的通常做法更具响应性。

除了上面链接的教程之外，请查看这篇关于[处理 InteruptedExceptions](http://www.ibm.com/developerworks/java/library/j-jtp05236/index.html)的 DeveloperWorks 文章。

# c# - 如何将工具提示数据绑定到用户控件的一部分？

> ID：13237563
> 
> 赞同：3
> 
> 时间：2012-11-05T17:51:04.200
> 
> 标签：c#, .net, wpf, xaml

我知道这个问题已经被问过很多次了，我在网上找到了一些解决方案，但我无法让它们中的任何一个起作用。我有一个自定义控件上有一些元素，我想在其中一个上放置一个绑定工具提示。这就是我到目前为止所拥有的。

```
<UserControl x:Class="DirectGraphicsControl.ColorBarView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:DirectGraphicsControl="clr-namespace:Windows.DirectGraphicsControl" mc:Ignorable="d" 
         SizeChanged="UserControlSizeChanged" MinWidth="95">
<DockPanel LastChildFill="True" Width="80" x:Name="_mainDockPanel">
    <TextBlock DockPanel.Dock="Top" x:Name="_title" x:FieldModifier="public" HorizontalAlignment="Center" Margin="0,2,0,2"/>
    <StackPanel Orientation="Vertical" DockPanel.Dock="Bottom" Margin="0,2,0,2"
                    x:Name="_bottomLabelsRegion" x:FieldModifier="public">
        <TextBlock x:Name="_unitName" x:FieldModifier="public" HorizontalAlignment="Center" VerticalAlignment="Bottom"/>
    </StackPanel>
    <Grid DataContext="{Binding ElementName=_mainDockPanel.Parent, Path=MyTooltip}" >
        <DirectGraphicsControl:DirectGraphicsControl x:Name="_directGraphicsControl"
                                                     MouseDoubleClick="HandleColorBarMouseDoubleClick" x:FieldModifier="public">
            <DirectGraphicsControl:DirectGraphicsControl.ToolTip>
                <ToolTip Content="{Binding Path=PlacementTarget.DataContext, 
                                   RelativeSource={RelativeSource Self}}"/>
            </DirectGraphicsControl:DirectGraphicsControl.ToolTip>
        </DirectGraphicsControl:DirectGraphicsControl>
    </Grid>
</DockPanel> 
```

这就是背后的代码。

```
/// <summary>
    /// The tool tip text
    /// </summary>
    public static readonly DependencyProperty TooltipProperty =
        DependencyProperty.Register(Reflection.GetPropertyName<ColorBarView>(m => m.MyTooltip),
                                    typeof(string), typeof(ColorBarView));

    /// <summary>
    /// The tool tip text
    /// </summary>
    public string MyTooltip
    {
        get { return "Test from binding"; }
    } 
```

属性后面的代码现在只返回一个硬编码的字符串，直到我可以真正让它工作，然后它会返回我想要的计算值。当前鼠标悬停在一个空框上。当我将工具提示的文本直接添加到 xaml 时，它显示得很好。这让我觉得它找不到绑定的位置。

我对 wpf 很陌生，所以任何建议都会很棒。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:54:17.983

查看 Visual Studio 输出选项卡。XAML 绑定错误会在那里打印出来，应该很容易从那里发现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T19:09:23.467

尝试将依赖属性更改为：

```
 public static readonly DependencyProperty TooltipProperty =
    DependencyProperty.Register(Reflection.GetPropertyName<ColorBarView>(m => m.MyTooltip),
                                typeof(string), typeof(ColorBarView),new PropertyMetadata("Test Value") ); 
```

并绑定到：

```
<Grid DataContext="{Binding ElementName=_myControl, Path=MyTooltip}" > 
```

# mysql - MySQL 查询消耗了系统 CPU 的过多处理器时间

> ID：13237570
> 
> 赞同：2
> 
> 时间：2012-11-05T17:51:49.177
> 
> 标签：mysql, sql

我有以下 MySQL 查询，它似乎消耗了系统 CPU 的过多处理器时间。

该查询假设获取上周评论数最多的新闻：

```
$timeago = strtotime("-1 week");

$query = "SELECT * , 
    news.id, 
    news.title, 
    news.state, 
    news.date, 
    COUNT(comments.module_id) as comments_count, 
    comments.module, 
    comments.state 
    FROM news 
    LEFT OUTER JOIN comments on comments.module_id = news.id AND comments.module = 'news' AND comments.state = '1' 
    WHERE news.state = '2' 
    GROUP BY news.id, news.title, news.date 
    ORDER BY news.date >= $timeago DESC, comments_count DESC limit 6";

$result = mysql_query($query) or die (mysql_error());
$data = mysql_fetch_assoc($result); 
```

查询服务器恰到好处，它会整理出上周评论数最多的新闻。新闻表中有 17,290 条记录。出于这个原因，我试图找出一种对 CPU 消耗有益的方式来修复查询。

欢迎大家提出意见。

解释计划说

| 编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外的

| 1 | 简单 | 新闻 | 参考 | 状态 | 状态 | 4 | 常量 | 17282 | 使用哪里；使用临时的；使用文件排序

| 1 | 简单 | 评论 | 参考 | 模块 ID | 模块 ID | 101 | sayasea_v2.news.id,常量,常量 | 4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:25:37.483

尝试将您的查询更改为：

```
SELECT * , 
news.id, 
news.title, 
news.state, 
news.date, 
COUNT(comments.module_id) as comments_count, 
comments.module, 
comments.state 
FROM news 
LEFT OUTER JOIN comments on comments.module_id = news.id  
WHERE news.state = '2' 
  AND comments.module = 'news' AND comments.state = '1'
GROUP BY news.id, news.title, news.date 
ORDER BY news.date >= $timeago DESC, comments_count DESC limit 6 
```

此外，如果您只需要对其进行评论的新闻，请使用`inner join`而不是`left outer join`.

# tridion - 获取具有核心服务的结构组 TCM URI 的子结构组

> ID：13237572
> 
> 赞同：5
> 
> 时间：2012-11-05T17:51:57.417
> 
> 标签：tridion, tridion-2011

给定具有核心服务的结构组 TCM URI，如何获取所有子结构组？

我尝试使用此代码：

```
ItemsFilterData sgFilter = new RepositoryItemsFilterData 
    { ItemTypes = new[] { ItemType.StructureGroup }, 
      Recursive = true, 
      BaseColumns = ListBaseColumns.Id };

XElement listXml;

using (CoreServiceClient client = _coreServiceProvider.GetCoreServiceClient())
{
    listXml = XElement.Parse(
              client.ProxyClient.GetListXml(structureGroupUri, sgFilter)
              .OuterXml);
} 
```

但我收到一条错误消息，提示“意外的项目类型：StructureGroup”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T18:20:47.767

从出版物的 URI 开始，这有效：

```
client.GetListXml("tcm:0-10-1", new RepositoryItemsFilterData { 
    ItemTypes = new[] { ItemType.StructureGroup }, 
    Recursive = true, 
    BaseColumns = ListBaseColumns.Id 
}) 
```

诀窍始终是找到正确的过滤器类型，在这种情况下是`RepositoryItemsFilterData`.

## 非工作样本

从结构组的 URI 开始，这将返回直接子结构组。请注意，这`Recursive = true`似乎在这里被忽略了。

```
client.GetListXml("tcm:10-328-4", new OrganizationalItemItemsFilterData { 
    ItemTypes = new[] { ItemType.StructureGroup }, 
    Recursive = true, 
    BaseColumns = ListBaseColumns.Id 
}) 
```

# java - 是否可以在不关闭流的情况下关闭阅读器？

> ID：13237578
> 
> 赞同：6
> 
> 时间：2012-11-05T17:52:20.703
> 
> 标签：java, inputstream, resource-leak

我有一个接受`InputStream`（二进制数据）并将其序列化为 XML 的方法。为此，它使用 base64 编码器和 a 包装流`Reader`以将其转换为字符数据。但是，由于`InputStream`作为参数传入，我认为关闭流是有害的副作用，并且合同规定`Reader.close()`它会这样做。如果我不关闭阅读器，编译器会警告我我有一个

> 资源泄漏：阅读器永远不会关闭

所以，我可以`@SuppressWarnings( "resource" )`在读者声明中添加一个，但这是正确的做法吗？我错过了什么吗？

这是实际的代码：

```
/**
 * Writes base64 encoded text read from the binary stream.
 * 
 * @param binaryStream
 *            The binary stream to write from
 * @return <code>this</code> XmlWriter (for chaining)
 * @throws IOException
 */
public XmlWriter binary( InputStream binaryStream ) throws IOException {
    Reader reader = new InputStreamReader( 
            new Base64InputStream( binaryStream, true, base64LineLength, base64LineSeparator.getBytes( charset ) ) );
    int bufferSize = 2048;
    int charsRead;
    char[] buffer = new char[bufferSize];
    while ( (charsRead = reader.read( buffer, 0, bufferSize )) >= 0 ) {
        writer.write( buffer, 0, charsRead );
    }

    return this;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:07:49.217

如果你是一个快乐的 Java 7 用户，试试这个：

```
try(InputStream binaryStream = /* ... */) {
    xmlWriter.binary(binaryStream);
} 
```

并且流已为您关闭。如果您不能使用 Java 7，我同意这不是`binary()`方法`close()`对流的责任。只需忽略警告，不要让工具驱动您的设计。没关系。

作为最后的手段，您可以编写一个轻量级的`Reader`忽略 包装器`close()`，但我不建议这样做，因为它会使遵循程序流程变得更加困难。

还让[Apache Commons IO](http://commons.apache.org/io/)帮助您[`IOUtils.copy()`](http://commons.apache.org/io/api-release/org/apache/commons/io/IOUtils.html#copy%28java.io.Reader,%20java.io.Writer%29)：

```
public XmlWriter binary( InputStream binaryStream ) throws IOException {
    Reader reader = new InputStreamReader( 
            new Base64InputStream( binaryStream, true, base64LineLength, base64LineSeparator.getBytes( charset ) ) );
    IOUtils.copy(reader, writer);
    return this;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:06:37.627

[这可能是Base64InputStream](http://grepcode.com/file/repo1.maven.org/maven2/commons-codec/commons-codec/1.4/org/apache/commons/codec/binary/Base64InputStream.java)工作方式中的一个“功能” ，即使您指定要读取的长度，如果您在显然不打算读取整个流时关闭它，它也会关闭底层流。

您可以将 binaryStream 包装在忽略关闭的 InputStream 中，或者您可以抑制警告。

# sql - 查询otrs数据库

> ID：13237579
> 
> 赞同：1
> 
> 时间：2012-11-05T17:52:23.263
> 
> 标签：sql, postgresql, otrs

我在从 OTRS 对 postgresql 数据库创建查询时遇到问题。我需要获取一个资产列表，其中包含一些存储在 CMDB 中的数据，但是我在存储数据的方式上遇到了问题。

就目前而言，此查询可以正常工作，但是一旦我添加另一个左联接以获取更多数据，它就会永远运行而不会返回任何结果。

据我所见，问题在于所有信息都包含在 xml_storage 表中，没有任何关系，因此我需要重复查询该表以获取数据。还有多种数据类型，其中整数在某些情况下存储为可变字符，这使我无法使用该值从通用目录中获取其他信息。

几天来我一直在用头撞砖墙，所以我真的很感激任何帮助

```
SELECT 
      asset_value,
      manufacturer_value,
      model_value,
      serial_value,
      fqdn_value,
      array_agg(service),
      purchasedate_value,
      status_value,
      configitem.configitem_number,
      configitem_version.name,
      general_catalog.name

    FROM 
      public.configitem_version,
      public.general_catalog,
      public.configitem 

    left join
      (SELECT
      xml_storage.xml_content_value AS asset_value,
      xml_storage.xml_key
      FROM
      public.xml_storage 
      WHERE
      xml_content_key = '[1]{''Version''}[1]{''Asset Number''}[1]{''Content''}')   as select_asset on last_version_id::int = select_asset.xml_key::int

    left join
      (SELECT
      xml_storage.xml_content_value AS manufacturer_value,
      xml_storage.xml_key
      FROM
      public.xml_storage 
      WHERE
      xml_content_key = '[1]{''Version''}[1]{''Manufacturer''}[1]{''Content''}' ) as select_manufacturer on last_version_id::int = select_manufacturer.xml_key::int

    left join
      (SELECT
      xml_storage.xml_content_value AS model_value,
      xml_storage.xml_key
      FROM
      public.xml_storage 
      WHERE
      xml_content_key = '[1]{''Version''}[1]{''Model''}[1]{''Content''}' ) as select_model on last_version_id::int = select_model.xml_key::int

    left join
      (SELECT
      xml_storage.xml_content_value AS serial_value,
      xml_storage.xml_key
      FROM
      public.xml_storage 
      WHERE
      xml_content_key = '[1]{''Version''}[1]{''SerialNumber''}[1]{''Content''}' ) as select_serial on last_version_id::int = select_serial.xml_key::int

    left join
      (SELECT
      xml_storage.xml_content_value AS fqdn_value,
      xml_storage.xml_key
      FROM
      public.xml_storage 
      WHERE
      xml_content_key = '[1]{''Version''}[1]{''FQDN''}[1]{''Content''}' ) as select_fqdn on last_version_id::int = select_fqdn.xml_key::int

    left join
      (SELECT 
      link_relation.source_key AS "configitem_id", 
      service.name AS "service"
      FROM 
      public.link_relation, 
      public.service
      WHERE 
      link_relation.target_key::int = service.id AND
      link_relation.target_object_id::int = 2 AND link_relation.source_object_id::int = 3
      UNION
      SELECT 
      link_relation.target_key AS "configitem_id", 
      service.name AS "service"
      FROM 
      public.link_relation, 
      public.service
      WHERE 
      link_relation.source_key::int = service.id AND
      link_relation.target_object_id::int = 3 AND link_relation.source_object_id::int = 2) as select_service on configitem.id = configitem_id::int

    left join
      (SELECT
      xml_storage.xml_content_value AS purchasedate_value,
      xml_storage.xml_key
      FROM
      public.xml_storage 
      WHERE
      xml_content_key = '[1]{''Version''}[1]{''PurchaseDate''}[1]{''Content''}' ) as select_purchasedate on last_version_id::int = select_purchasedate.xml_key::int

    left join
      (SELECT
      general_catalog.name AS status_value,
      general_catalog.id
      FROM
      public.general_catalog) as select_status on configitem.cur_depl_state_id::int = select_status.id::int

    WHERE
      configitem.last_version_id = configitem_version.id AND
      configitem.class_id = general_catalog.id AND
      (configitem.class_id = 32 OR configitem.class_id = 33)

    GROUP BY
      asset_value,
      manufacturer_value,
      model_value,
      serial_value,
      fqdn_value,
      purchasedate_value,
      status_value,
      configitem.configitem_number,
      configitem_version.name,
      general_catalog.name

    ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T08:43:47.397

您是否可以使用 OTRS API 而不是查询？以这种方式获取数据会更容易一些。此外，ImportExport 模块允许将数据导出到 .csv 文件；根据您的需要，这可能是一种选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-15T10:24:27.310

I ended up creating a quick and dirty web scraping script to get the data I wanted out. A better way, as previously mentioned, would have been to install the import/export library functions but the person with the required skill and permissions to add the extension was tied up. [https://github.com/OTRS/ImportExport](https://github.com/OTRS/ImportExport)

[https://github.com/colif/Python_Utils/blob/master/OTRS-Web-Scraper-Clean.py](https://github.com/colif/Python_Utils/blob/master/OTRS-Web-Scraper-Clean.py)

# c - 查找数组中每个元素的出现次数并更新与每个元素相关的信息

> ID：13237588
> 
> 赞同：0
> 
> 时间：2012-11-05T17:52:41.473
> 
> 标签：c, arrays, sorting

我有一个大的二维数组，`array[length][2]`. `length= 500000`. _

在`array[i][0]= hex number`, `array[i][1]= 0`或`1`中, 表示与每个十六进制数相关的一些信息。像这样：

```
array[i][0]    array[i][1]

e05f56f8           1

e045ac44           1

e05f57fc           1

e05f57b4           1

e05ff8dc           0

e05ff8ec           0

e05ff900           1 
```

我想得到一个新的数组，它存储：十六进制数、出现次数、相同十六进制数的数组 [i] [1] 的总和。

我这样写代码：

```
//First Sort the array according to array[][0]

int x,y,temp1,temp2;
  for (x=lines_num1-2;x>=0;x--)
    {
      for (y=0;y<=x;y++)
       {
        if(array[y][0]>array[y+1][0])
         {
            temp1=array[y][0];
            array[y][0]=array[y+1][0];
            array[y+1][0]=temp1;

            temp2=array[y][1];
            array[y][1]=array[y+1][1];
            array[y+1][1]=temp2;                
          }
       }
   }

// generate the new_array[][]
int new_array[length][3];
int n=0;
for (n=0; n<length; n++){
   new_array[n][0]=0;
   new_array[n][1]=0;
   new_array[n][2]=0;
}
int prev = array[0][0];
new_array[0][0]=array[0][0];
new_array[0][1]=1;
new_array[0][2]=array[0][2];
for (k=1;k<length;k++)
  {
     if (array[k][0] == prev)
       {
         new_array[n][1]=new_array[n][1]+1;
         new_array[n][2]=new_array[n][2]+array[k][0];
       }else{
         prev = array[k][0];
         new_array[n+1][0]=array[k][0];
         new_array[n+1][1]=new_array[n+1][1]+1;
         new_array[n+1][2]=new_array[n+1][2]+array[k][0];
         n++;
       }
   } 
```

但代码似乎不像我预期的那样工作。首先排序太慢了。而且似乎无法生成正确的 new_array。有关如何处理此问题的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:59:20.863

就个人而言，我会编写一个哈希函数来直接用十六进制值索引结果数组。然后很简单：

```
struct {
    unsigned int nocc;
    unsigned int nsum;
} result[/* ... */];

/* calculate the results */
for (i = 0; i < LENGTH; ++i) {
    int *curr = &array[i];
    unsigned int index = hash(curr[0]);    

    result[index].nocc++;
    result[index].nsum += curr[1];
} 
```

如果要对数组进行排序，请不要重新发明轮子：使用`qsort`标准 C 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:01:15.940

排序很慢，因为您使用冒泡排序对数据进行排序。冒泡排序具有二次平均复杂度，这意味着它必须执行超过 1000 亿次比较和交换才能对数组进行排序。因此，[永远不要使用冒泡排序](http://www.cs.duke.edu/~ola/bubble/bubble.html)。相反，学习使用[`qsort`](http://linux.die.net/man/3/qsort)库函数并将其应用于您的问题。

此外，您的排序代码至少有一个错误：在为数组的第二列交换值时，您得到的值是错误的列索引，`[3]`而不是`[1]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T18:06:37.750

对于您的场景，插入排序是正确的解决方案，在进行插入本身时，您可以进行 #count 和总和。排序完成后，您也将获得结果数组。

代码可能看起来像这样

```
int hex = 0, count = 0, sum = 0, iHole;
for (i=1; i < lines_num1 -1; i++)
{
     hex = array[i][0];
     count = array[i][1];
     sum = array[i][2];

     iHole = i
     // keep moving the hole to next smaller index until A[iHole - 1] is <= item
     while (iHole > 0 and array[iHole - 1][0] > hex)
       {
         // move hole to next smaller index
         A[iHole][0] = A[iHole - 1][0];
         A[iHole][1] = A[iHole - 1][1];
         A[iHole][2] = A[iHole - 1][2];
         iHole = iHole - 1
       }
     // put item in the hole
      if (array[iHole][0] == hex) 
      {
        array[iHole][1]++;
        array[iHole][2] += array[iHole][0];
       }
      else 
      {
        array[iHole][0]  = hex;
        array[iHole][1]  = 1;
        array[iHole][2]  = hex;
      }

   } 
```

所以制作第二个数组的成本就是排序本身的成本。O(n) 最好的情况，O(n^2) 最坏的情况，你不必再次旅行来求和和计数。

请记住，这种排序是就地排序。如果您不想影响原始数组，也可以使用指向新数组的 iHole 来完成。iHole 应该指向新数组的尾部而不是“i”

# c# - 以编程方式模拟鼠标拖动

> ID：13237593
> 
> 赞同：3
> 
> 时间：2012-11-05T17:53:04.983
> 
> 标签：c#, winforms, mouse

我有一个带有控件的 Windows 窗体应用程序。该控件由一个图表面板和一个我在其上绘制的画布组成。我想做的是以编程方式鼠标拖动面板，以便在画布的右边缘和画布上绘制的最后一个项目之间有一个特定的距离。我尝试了两种方法。两者都可以根据需要拖动面板，但我似乎无法获得我想要的运动精度。我编写了一个鼠标模拟器并尝试了两种方法。

方法一：

```
 if(this.ChartControl.ChartPanel.CanFocus)
 {
      // ... Focus the chart panel to be adjusted.
      this.ChartControl.ChartPanel.Focus();

      // ... Move cursor to lastBarScreenCoordinates on the chart panel to be adjusted.
      Cursor.Position = new Point(lastBarScreenCoordinates.X, lastBarScreenCoordinates.Y);

      MouseSimulator.SetMouseDragThresholds();

      // ... Move chart panel to required position.
      MouseSimulator.LeftMouseButtonDown(lastBarScreenCoordinates.X, lastBarScreenCoordinates.Y);
      MouseSimulator.MouseMove(lastBarScreenCoordinates.X-positionShift,
           lastBarScreenCoordinates.Y);
      MouseSimulator.LeftMouseButtonUp(lastBarScreenCoordinates.X-positionShift,
           lastBarScreenCoordinates.Y);

      MouseSimulator.ResetMouseDragThresholds(_cx_default, _cy_default);

      // ... Redraw the chart panel.
      this.ChartControl.ChartPanel.Refresh();

      // ... Reset cursor to its starting position.
      Cursor.Position = new Point(startingCursorX, startingCursorY);
 } 
```

方法二：

```
 if(this.ChartControl.ChartPanel.CanFocus)
 {
      // ... Focus the chart panel to be adjusted.
      this.ChartControl.ChartPanel.Focus();

      // ... Move cursor to lastBarScreenCoordinates on the chart panel to be adjusted.
      Cursor.Position = new Point(lastBarScreenCoordinates.X, lastBarScreenCoordinates.Y);

      MouseSimulator.SetMouseDragThresholds();

      // ... Move chart panel to required position.
      MouseSimulator.LeftMouseButtonDown(lastBarScreenCoordinates.X, lastBarScreenCoordinates.Y);
      Cursor.Position = new Point(lastBarScreenCoordinates.X-positionShift,
           lastBarScreenCoordinates.Y);
      WindowsCommunication.SendMessage(this.ChartControl.Handle, 0x200, IntPtr.Zero,IntPtr.Zero);
      MouseSimulator.LeftMouseButtonUp(lastBarScreenCoordinates.X-positionShift,
           lastBarScreenCoordinates.Y);

      MouseSimulator.ResetMouseDragThresholds(_cx_default, _cy_default);

      // ... Redraw the chart panel.
      this.ChartControl.ChartPanel.Refresh();

      // ... Reset cursor to its starting position.
      Cursor.Position = new Point(startingCursorX, startingCursorY);
 } 
```

我正在使用 SendInput 来模拟鼠标点击。这是示例鼠标左键按下代码...

```
 public static void LeftMouseButtonDown(int x, int y)
 {
      INPUT mouseInput = new INPUT();
      mouseInput.type = SendInputEventType.InputMouse;
      mouseInput.mkhi.mi.dx = CalculateAbsoluteCoordinateX(x);
      mouseInput.mkhi.mi.dy = CalculateAbsoluteCoordinateY(y);
      mouseInput.mkhi.mi.mouseData = 0;
      mouseInput.mkhi.mi.time = 0;
      mouseInput.mkhi.mi.dwFlags = MouseEventFlags.MOUSEEVENTF_LEFTDOWN;
      SendInput(1, ref mouseInput, Marshal.SizeOf(new INPUT()));
 } 
```

我计算鼠标的归一化绝对坐标如下......

```
 private static int CalculateAbsoluteCoordinateX(int x)
 {
      return ((x * 65536) + GetSystemMetrics(SystemMetric.SM_CXSCREEN) - 1) /
           GetSystemMetrics(SystemMetric.SM_CXSCREEN);
 } 
```

所以这里是精度问题。如果我使用方法 1（鼠标移动），最后绘制的项目与画布右边缘之间的测量距离与我在 positionShift 中设置的距离不同，并且光标位置差异不等于 positionShift。我最初认为这是由于指针弹道问题，所以我尝试使用方法 2。方法 2 确实给了我指针定位的精确度，但我仍然在面板移动但最后绘制的条与右边缘之间的距离方面遇到困难。画布不等于应有的 positionShift 量。它似乎总是关闭。我已经为此工作了很长时间，并且不知所措。我不确定这里发生了什么。如何通过模拟鼠标拖动提高画布拖动的精度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:14:34.000

那么你可以做的是，首先我相信 SendInput API 允许一个 AbsoluteValue 标志，所以不需要计算那些可能是问题但很可能不是问题的值。

尽管我很好奇您为什么要为此使用鼠标拖动操作。似乎您想要做的就是在每次绘制时重新定位画布某个指定的数量。如果是这种情况，为什么不直接在画布本身上明确设置它。此外，不清楚您使用的是纯 WinForms 还是 WPF。我相当肯定 Canvas 的不清楚之处仅适用于启用 WPF 的窗口。

话虽如此 WPF 修复，根据包含画布的对象，只需根据情况适当地设置其边距，因为我不知道您正在使用的数据，我对此不能说太多。但这是一个相对简单的想法，所以让我知道它是否有效，它应该给你，至少也接近，像素完美对齐。

WinForms，只需对您所说的“Canvas”对象执行上述操作，或使用对象的绝对坐标来移动它。

如果你能提供一个你正在处理的大致看起来的样本，也许我们可以更好地理解你的意思。

# php - 使用该页面的 url 从网页中提取标题

> ID：13237594
> 
> 赞同：-2
> 
> 时间：2012-11-05T17:53:12.577
> 
> 标签：php, html

> **可能重复：**
> [如何使用 php 从 html 中提取 img src、title 和 alt？](https://stackoverflow.com/questions/138313/how-to-extract-img-src-title-and-alt-from-html-using-php)

我想从 Digg.com 复制一些功能，当您发布新地址时，它会自动扫描 url 并找到页面标题。

请告诉它是如何在 php 中完成的......是否有任何其他可用的管理系统可以用来制作像 digg 这样的网站

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:56:57.807

您可以使用 file_get_contents() 从页面获取数据，然后使用 preg_match() 和正则表达式模式来获取数据`<title></title>`

```
'/<title>(.*?)<\/title>'/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:56:04.983

您可以使用对服务器的 Ajax 调用来实现此目的，您可以在其中卷曲 URL 并发送回您想要的所有详细信息。您可能对标题、描述、关键字等感兴趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T18:02:28.500

```
function get_title($url) {
  $ch = curl_init();
  $titleName = '';
  curl_setopt($ch, CURLOPT_URL, $url);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
  curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
  $data = curl_exec($ch);
  curl_close($ch);

  // data will contain the whole page you are looking for
  // You need to parse it for the string like this <title>Google</title>
  // start = strrpos($data, '<title>');
  // end = strrpos($data, '</title>');
  // substr($data, $start + 6, $end); 6 - length of title
  return $titleName;
} 
```

您需要实现更智能的解析方式，因为`<title >`谷歌`< /title>`它不会找到。

# python - Ruby系统调用不观察python脚本的路径

> ID：13237600
> 
> 赞同：3
> 
> 时间：2012-11-05T17:53:32.833
> 
> 标签：python, ruby, windows, cmd, system

这有效：

```
system "python \"C:/Program Files (x86)/Google/google_appengine/someScript.py\" 
```

这不起作用：

```
system "python \"someScript.py\" 
```

包含的目录`someScript.py`被添加到我的 windows`PATH`变量中，所以如果我打开一个 CMD 窗口并输入：

```
someScript.py 
```

它运行良好。

如何使我的 ruby​​ 脚本能够`someScript.py`在观察 windows 环境路径变量时调用，这样我就不必为 python 脚本指定绝对路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:56:49.960

Python*不*使用`$PATH`环境变量。

您始终必须在命令行上指定 python 脚本的完整路径。这可以是当前目录的相对路径，也可以是绝对路径。

`.py`具有扩展名的文件与 Python 可执行文件之间的关联是[单独的注册](http://docs.python.org/2/faq/windows.html#how-do-i-make-python-scripts-executable)，其中 Windows 在脚本文件位于当前搜索路径上之后执行 Python 可执行文件。Windows 在调用 Python 可执行文件时会将脚本的完整绝对路径传递给它。`system`当您使用绕过该查找直接执行 Python 可执行文件时。

您*可以*尝试在`system "someScript.py"` *不*使用`python`可执行文件的情况下直接执行 Python 脚本，但我对 Ruby 和 Windows 不够熟悉，不知道这是否`.py`符合 Windows 命令提示符使用的扩展注册。

# php - htaccess：RewriteEngine On 和 AuthUserFile 冲突

> ID：13237601
> 
> 赞同：1
> 
> 时间：2012-11-05T17:53:36.690
> 
> 标签：php, .htaccess, authentication, mod-rewrite

让我们考虑使用以下 .htaccess 保护的文件夹 www.mydomain.com/exemple：

.htaccess

```
AuthUserFile /root/FTPname/www/.htpasswd
AuthGroupFile /dev/null
AuthName "Restricted Access"
AuthType Basic
require valid-user 
```

我只想在用户具有特定 cookie 或引发错误（使用以下 [F] 标志）时才允许访问示例文件夹。然后我实现了以下代码：

.htaccess

```
RewriteEngine On
RewriteCond %{HTTP_COOKIE} !CookieName=CookieValue
RewriteRule .* - [F,L]

AuthUserFile /root/FTPname/www/.htpasswd
AuthGroupFile /dev/null
AuthName "Restricted Access"
AuthType Basic
require valid-user 
```

问题是当我加载没有cookie的示例文件夹时，它首先通过身份验证过程......我想先提出错误。有谁知道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:08:50.987

尝试使用新的环境变量“满足任何要求”。这里展示了两种技术： [.htaccess basic auth by virtual host?](https://stackoverflow.com/questions/7334307/htaccess-basic-auth-by-virtual-host) 一个使用 SetEnvIf，另一个使用 RewriteRule 来设置变量。由于 SetEnvIf 无法检测到 cookie，因此您将需要 RewriteRule。但是我在我的共享主机平台上发现 RewriteRule 无法使用“满足任何”。如果它适合你，它看起来像：

```
RewriteEngine On
RewriteCond %{HTTP_COOKIE} !CookieName=CookieValue
RewriteRule .* - [L,E=DENY:1]

AuthUserFile /root/FTPname/www/.htpasswd
AuthGroupFile /dev/null
AuthName "Restricted Access"
AuthType Basic

Order Deny,Allow
Satisfy any
Deny from all
Require valid-user
Allow from env=!DENY 
```

另请参阅：[htaccess 从基本身份验证中排除一个 url](https://stackoverflow.com/questions/8978080/htaccess-exclude-one-url-from-basic-auth)

请注意，您要保护的页面不包含图像、样式表等，它们会在页面本身没有触发身份验证请求时触发。

# git - Git：仅更改索引中文件的posix权限

> ID：13237611
> 
> 赞同：0
> 
> 时间：2012-11-05T17:54:15.420
> 
> 标签：git, git-index

和

```
git update-index --chmod=+x /path/to/file 
```

我可以设置（或在使用时取消设置`-x`）执行位，但是如何设置索引中文件的完整权限（例如`744`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:56:56.247

这是不可能的。Git 只跟踪存储库中文件的执行位，所有其他权限都被忽略，因为没有一种在不同机器和操作系统之间转移权限的好方法。

# ios - 找不到 facebookSDK 3.1.1 文件

> ID：13237619
> 
> 赞同：4
> 
> 时间：2012-11-05T17:54:40.180
> 
> 标签：ios, xcode4.5, facebook-ios-sdk, file-not-found

我使用 XCode 4.5

[我从https://github.com/downloads/facebook/facebook-ios-sdk/FacebookSDK-3.1.1.pkg](https://github.com/downloads/facebook/facebook-ios-sdk/FacebookSDK-3.1.1.pkg)下载了 SDK 3.1.1

然后我先拖动导入框架，它不起作用，所以我在构建阶段使用添加其他...的方法

我的项目中有这个：

![在此处输入图像描述](../Images/adbcd345d952346872f7510ef2505403.png)

这在我的构建阶段：

![在此处输入图像描述](../Images/b18dc60291980b53e5fa0eea58d7cad1.png)

但是当我像这样导入 FacebookSDK 库时

```
#import <FacebookSDK/FacebookSDK.h> 
```

我没有找到一个文件： ![在此处输入图像描述](../Images/b82b6651537c2916b8a2a23d0dcea218.png)

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T19:58:10.193

好的，我找到了解决方案。

实际上问题出在搜索路径类别中的我的框架搜索路径中。

我安装了几次 facebook 包并多次导入 facebookSDK.framework，它会在我的框架搜索路径中自动添加链接。

我刚刚删除了所有链接并手动重新创建了一个正确的链接并且它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T01:01:37.110

如果你有 facebooksdk.frame 工作但它不工作，试试这个。删除框架，删除它。清除您的框架搜索路径。如果您在团队中工作，请再次拖动 FacebookSDK.frame 并更新您的框架工作路径。 ![相对路径](../Images/66023a07b824fca34f3a7679b2358d2b.png)

# c# - Ravendb Savechanges(); 运行时间太长？

> ID：13237621
> 
> 赞同：2
> 
> 时间：2012-11-05T17:54:41.033
> 
> 标签：c#, asp.net-mvc-3, ravendb

RavenDB 遇到了一个奇怪的问题

```
public ActionResult Save(RandomModel model)
{
//Do some stuff, validate model etc..

RavenSession.Store(model);
RavenSession.SaveChanges();

var newListOfModels = RavenSession.Query<RandomModel>().ToList();
return View("randomview",newListOfModels);
} 
```

newListOfModels 不包含我刚刚使用 store 方法添加的模型。

但是，如果我在 savechanges 之后添加一个 Thread.Sleep(100) ，则存储的模型将包含在新列表中。

我是否以错误的方式将内容存储和保存到 RavenDB？

我应该怎么做？

当然，可以通过将传入模型添加到 newListOfModels 并在例如 basecontrollers onactionexecuted 方法之后运行 SaveChanges 来解决问题。

我主要关心的是为什么我需要延迟线程，然后才能查询文档会话并在那里找到我新添加的模型。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T19:55:05.490

RavenDB 索引本质上是陈旧的。[从文档中](http://ravendb.net/docs/client-api/querying/stale-indexes)：

> RavenDB 在后台线程中执行数据索引，每当有新数据进入或现有数据更新时执行。将此作为后台线程运行允许服务器快速响应，即使大量数据已更改，但在这种情况下，您可能会查询过时的索引。

所以你需要在查询时告诉 RavenDB 等待索引被重新定义。

您可以进行各种`WaitFor...`自定义，您很可能需要以下`WaitForNonStaleResultsAsOfLastWrite`选项：

```
var newListOfModels = RavenSession
    .Query<RandomModel>()
    .Customize(x => x.WaitForNonStaleResultsAsOfLastWrite()).ToList(); 
```

# sql - 将数据复制到另一个表中

> ID：13237623
> 
> 赞同：191
> 
> 时间：2012-11-05T17:54:44.220
> 
> 标签：sql, sql-server, sql-server-2008

如何在 SQL Server 中将数据从一个表复制/附加到另一个具有相同架构的表中？

**编辑：**

假设有一个查询

```
select * 
into table1 
from table2 
where 1=1 
```

它`table1`使用与 中相同的模式和数据创建`table2`。

是否有任何像这样的简短查询仅将整个数据复制到已经存在的表中？

* * *

## 回答 #1

> 赞同：377
> 
> 时间：2012-11-05T17:56:46.413

如果两个表确实是相同的架构：

```
INSERT INTO newTable
SELECT * FROM oldTable 
```

否则，您必须指定列名（`newTable`如果要为所有列指定值并以与 的模式相同的顺序选择列，则列列表是可选`newTable`的）：

```
INSERT INTO newTable (col1, col2, col3)
SELECT column1, column2, column3
FROM oldTable 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2017-10-13T14:15:43.743

如果新表不存在并且您想使用所有内容制作旧表的副本，那么简单的方法可以在 SQL Server 中使用。

```
SELECT * INTO NewTable FROM OldTable 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-11-05T17:58:27.337

这是正确的方法：

```
INSERT INTO destinationTable
SELECT * FROM sourceTable 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-05-27T08:21:03.573

```
INSERT INTO table1 (col1, col2, col3)
SELECT column1, column2, column3
FROM table2 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-11-05T17:56:14.743

试试这个：

```
INSERT INTO MyTable1 (Col1, Col2, Col4)
   SELECT Col1, Col2, Col3 FROM MyTable2 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-11-05T17:59:13.177

试试这个：

```
Insert Into table2
Select * from table1 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-06-29T03:23:14.427

```
INSERT INTO DestinationTable(SupplierName, Country)
SELECT SupplierName, Country FROM SourceTable; 
```

列名相同不是强制性的。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-04-25T11:30:33.877

插入带有条件的选定列

```
INSERT INTO where_to_insert (col_1,col_2) SELECT col1, col2 FROM from_table WHERE condition; 
```

将所有数据从一个表复制到另一个具有相同列名的数据。

```
INSERT INTO where_to_insert 
SELECT * FROM from_table WHERE condition; 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2020-05-07T05:02:04.077

```
CREATE TABLE `table2` LIKE `table1`;
INSERT INTO `table2` SELECT * FROM `table1`; 
```

第一个查询将创建结构 from `table1`to `table2`，第二个查询将数据 from `table1`to`table2`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-07-24T07:52:20.627

**将一个表的所有列复制到另一个表：**

```
INSERT INTO table2
SELECT * FROM table1
WHERE condition; 
```

**仅将一个表中的一些列复制到另一个表中：**

```
INSERT INTO table2 (column1, column2, column3, ...)
SELECT column1, column2, column3, ...
FROM table1
WHERE condition; 
```

**您可以通过执行以下命令来复制或“克隆”表的内容：**

```
CREATE TABLE new_table AS SELECT * FROM original_table; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-10-19T10:07:38.597

-- 对于 Sql Server 用户。

如果您没有新表，那么您可以创建与旧表具有相同结构的新表，并将数据从旧表复制到新表。例如：

```
select * into new_table
from old_table; 
```

您也可以复制列/表结构，以及一些数据。例如：

```
select * into new_table
from old_table 
where country = 'DE'; 
```

# httprequest - RabbitMQ HTTP API 调用 aliveness-test 返回 404 但其他调用有效

> ID：13237628
> 
> 赞同：13
> 
> 时间：2012-11-05T17:55:14.200
> 
> 标签：httprequest, rabbitmq

使用 HTTP API 时，我尝试调用活动性测试以进行监控。目前我正在使用 curl 和以下命令进行测试：

```
 curl -i http://guest:guest@localhost:55672/api/aliveness-test/ 
```

我得到以下回复：

```
HTTP/1.1 404 Object Not Found
Server: MochiWeb/1.1 WebMachine/1.9.0 (someone had painted it blue)
Date: Mon, 05 Nov 2012 17:18:58 GMT
Content-Type: text/html
Content-Length: 193

<HTML><HEAD><TITLE>404 Not Found</TITLE></HEAD><BODY><H1>Not Found</H1>The requested document was not found on this server.<P><HR><ADDRESS>mochiweb+webmachine web server</ADDRESS></BODY></HTML> 
```

当发出仅列出用户或虚拟主机的请求时，请求成功返回：

```
$ curl -I http://guest:guest@localhost:55672/api/users

HTTP/1.1 200 OK
Server: MochiWeb/1.1 WebMachine/1.9.0 (someone had painted it blue)
Date: Mon, 05 Nov 2012 17:51:44 GMT
Content-Type: application/json
Content-Length: 11210
Cache-Control: no-cache 
```

我正在使用 RabbitMQ 的最新稳定版本 (2.8.7) 并且显然安装了管理插件以供 API 与用户调用一起使用（由于它包含公司数据而忽略了响应，但正如预期的那样只是常规 JSON ）。

互联网上没有太多关于此呼叫失败的信息，所以我想知道是否有人以前见过这个？

谢谢，克里斯蒂安

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-06T10:45:21.583

事实证明，虚拟主机名称开头的“/”不是隐含的，即使作为 URL 的一部分也是如此。为了让它工作，我只是改变了我的请求：

```
curl -i http://guest:guest@localhost:55672/api/aliveness-test/ 
```

到

```
curl -i http://guest:guest@localhost:55672/api/aliveness-test/%2F 
```

由于 %2F 是 '/' HTTP 编码，我的请求现在查询名为 '/' 的虚拟主机并返回 200 响应，如下所示：

```
{"status":"ok"} 
```

# android - Android 虚拟设备 (AVD) -- 我应该选择哪个 CPU/ABI？

> ID：13237629
> 
> 赞同：39
> 
> 时间：2012-11-05T17:55:15.810
> 
> 标签：android, android-emulator

创建 AVD 时，可以为 CPU/ABI 选择三个选项：

*   手臂
*   米普斯
*   英特尔凌动

有什么区别，我应该选择哪个？有没有一款可以覆盖大多数设备？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-05T18:03:13.337

根据 android 开发人员文档，您实际上应该为您打算在其上运行代码的每个框架和平台创建一个虚拟设备，也就是说，目前市场上的大多数移动设备都在 ARM 架构上运行..您仍然应该测试您的您的代码支持的框架的每个级别的不同虚拟设备上的代码。

> **推荐系统映像**
> 。尽管您可能有一个或多个 Android 设备来测试您的应用程序，但您的应用程序支持的每个 Android 版本都不太可能有一台设备。最好为您的应用支持的所有 Android 版本下载系统映像，并使用 Android 模拟器测试您在其上运行的应用。

[http://developer.android.com/sdk/installing/adding-packages.html](http://developer.android.com/sdk/installing/adding-packages.html)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-05T18:00:59.723

90% 的移动设备由 ARM 供电。所以这将是一个更好的选择

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-05T18:02:25.557

您应该选择 ARM，因为它是几乎手机使用的旧处理器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-10T15:51:59.597

Atom Emulation 速度更快，所以我会使用它们在 arm 模式或真手机上进行开发和最终测试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-01T01:22:18.407

> 当今的 Android 手机中使用了三种主要的 CPU 架构。ARM 可能是最常见的，因为它针对电池消耗进行了优化。ARM64 是原始 ARM 架构的演进，支持 64 位处理以实现更强大的计算，并且它正在迅速成为新设备的标准。

来自：[https ://android.gadgethacks.com/how-to/android-basics-see-what-kind-processor-you-have-arm-arm64-x86-0168051/](https://android.gadgethacks.com/how-to/android-basics-see-what-kind-processor-you-have-arm-arm64-x86-0168051/)

# javascript - 将 Javascript 动态写入新的 HTML 页面

> ID：13237630
> 
> 赞同：0
> 
> 时间：2012-11-05T17:55:19.113
> 
> 标签：javascript, html

我在下面的代码中尝试通过单击按钮将一些 javascript 动态写入新的 html 页面。

然而，我在尝试这样做时遇到错误，理论上我得到“未终止的字符串常量”，这应该有效：

```
var html     =  '<!DOCTYPE html>\n'
html    +=  '<html>\n'
html    +=  '<head>\n'
html    +=  '<script type="text/javascript">\n'
html    +=  'function testme() {\n'
html    +=  'alert("the test worked!")\n'
html    +=  '}\n'       
html    +=  '</script>\n'
html    +=  '</head>\n'
html    +=  '<body>\n'
html    +=  '</body>\n'
html    +=  '</html\n'

window.open('','').document.write(html) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:57:14.230

您在最后一行缺少一个结束 >

```
html    +=  '</html\n'  <-- Missing a greater than 
```

应该

```
html    +=  '</html>\n' 
```

如果代码是内联的并且不在外部脚本中，您将需要分解结束脚本标记。

```
html    +=  '</scr' + + 'ipt>\n'; 
```

另外，使用分号。

现在 window.open, document.write 行看起来很奇怪。大多数开发人员会将其编写为

```
var winPop = window.open('','');
winPop.document.open();
winPop.document.write(html);
winPop.document.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:30:10.770

只是一个提示，您可以使用多行而不是`html +=`每行都只需在行尾添加反斜杠，这样：

```
html = '<html>\n  \
        <head>\n \
        <script type="text/javascript">\n \
            function testme() {\n \
                alert("the test worked!")\n \
            }\n \
        </script>\n \
        </head>\n \
        <body>\n \
        </body>\n \
        </html>\n  '; 
```

但是，您的代码中有一些缺陷，您忘记了`>`就像`</html>` epascarello**说**的那样，分解脚本标签。

但是，您可能想查看是否要使用弹出窗口打开不同的 html 文档，甚至是 php 文件，从那时起您可以获取`$_GET`值并用它填充您的自定义值。什么会更可靠。

[查看 w3c 关于 $_GET](http://www.w3schools.com/php/php_get.asp)

# html - 使用 HTML 和 CSS 在一行上的标题间距不均匀

> ID：13237632
> 
> 赞同：0
> 
> 时间：2012-11-05T17:55:26.273
> 
> 标签：html, css

我想将表单上方的标题不均匀地放在一行上，并且不确定使用 HTML 和 CSS 执行此操作的最佳方法是什么。我过去使用过跨度标签和填充，但这在不同的浏览器中工作方式不同，并且不能正确排列。我确定有更好的方法将所有标题包装在跨度标签中。非常感谢你的帮助。我附上了我想要实现的图像。![在此处输入图像描述](../Images/af255fce45091d3fd11cce18455059f1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:03:31.900

如果您使用表格，单元格将根据其中的内容自动调整大小。在纯粹处理表格数据时，表格仍然很有用。或者，您可以为每个标题单元格分配一个类以设置特定宽度。

```
<table cellpadding="5" cellspacing="5" width="100%">

<tr>

    <td>one</td>
    <td>this one needs more space and will grow</td>
    <td>this guy isn't as long</td>
    <td>short</td>

</tr> 
```

​</p>

JSFiddle 示例：http: [//jsfiddle.net/JdSy2/](http://jsfiddle.net/JdSy2/)

# mysql - MySQL Group 在 Select 上选择的行

> ID：13237633
> 
> 赞同：1
> 
> 时间：2012-11-05T17:55:29.347
> 
> 标签：mysql

假设我有下表：

```
Room | Seats | Occupied
-----------------------
a1      20       10
b2      15       15
c3      45       30
d4      20       15
e5      10       10 
```

我有一个麻烦（只是不知道如何做到这一点）生成一个 SELECT 语句，该语句将合并一些房间并总结它们的值并返回以下内容：

```
Room | Seats | Occupied
-----------------------
a1      20       10
b2c3d4  80       60
e5      10       10 
```

如何才能做到这一点？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:19:21.610

```
select room,
       sum(seats) as seats,
       sum(occupied) as occupied
from your_table
group by case when room in ('b2', 'c3', 'd4') 
              then 'b2c3d4'
              else room
         end 
```

# types - 采访 - 整数的大小

> ID：13237637
> 
> 赞同：0
> 
> 时间：2012-11-05T17:55:53.937
> 
> 标签：types, computer-science, primitive-types

我刚刚接受了电话面试，他们问了我这个问题：

“整数的大小是多少，计算出这个的方程式是什么？”

我不知道（好吧，我有点愚蠢），但这只是让我很想找出答案。我个人的猜测是以 2 为底数。但我不知道。

有人有想法么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:34:46.200

似乎问这个问题是为了让你问他们：

*   `integer`您希望该类型编码的最大值是多少？

假设他们说我们想要`MAX_VALUE`成为整数类型可以拥有的最大值。

这将我们带到了等式。由于我们使用位对其进行编码，因此我们需要`log_2(MAX_VALUE)`位来对任何大小为 的正值进行编码`MAX_VALUE`。以 2 为底的对数在那里，因为使用大小的位模式，`n`您可以编码到`2^n`不同的值。因此，如果您想知道最大位模式需要多长时间进行编码`MAX_VALUE`，您需要计算`log`因为：

```
2^(log_2(MAX_VALUE)) = MAX_VALUE 
```

现在这没关系，除非您还想对数字 0 进行编码。如果您也想对 0 进行编码，那么在 0 和 MAX_VALUE 之间有 MAX_VALUE+1 个数字，因此您需要`log_2(MAX_VALUE+1)`位来对它们进行编码。

另一个重要的问题是`MIN_VALUE`我们要编码的是什么？

所以总的来说你有`MAX_VALUE + 1 + abs(MIN_VALUE)`不同的价值观，所以你需要：

```
bits_needed = log_2(MAX_VALUE + 1 + abs(MIN_VALUE)) 
```

正如其他人所提到的，在 java`int`中有`max_value = 2,147,483,647`和`min_value = -2,147,483,648`. 当你进行计算时，你得到`log_2(4294967296)`等于 32。所以 32 位是 java 中整数类型的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:10:28.143

我认为他要求整数的范围。在 Java 中，大小是 4 个字节，所以应该从 -2^31 到 2^31-1？既然他要了方程式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T18:01:34.787

问题不清楚，您是否正在寻找不同编程语言的整数位大小？或者您想知道 int 的 MAX 值。

顺便说一句，在 java 中，int 是 32 位，最大值是 2^31-1=2,147,483,647

# java - 使用 printf() 将输出格式化为网格

> ID：13237638
> 
> 赞同：1
> 
> 时间：2012-11-05T17:55:55.810
> 
> 标签：java, arrays, string, printf

我正在尝试使用 printf() 语句对输出进行网格化。

字符串是通过使用两个 for 循环迭代的二维数组生成的

例子：

```
 String[][] arr =
    {
      {"*", "2", "1", "*", "1"},
      {"*", "2", "1", "*", "1"},
      {"*", "2", "1", "*", "1"},
      {"*", "2", "1", "*", "1"},
      {"*", "2", "1", "*", "1"}
    }

    for(int i = 0; i < arr.length; i++)
    {
       for(int j = 0; j < arr[0].length; j++)
       {
          System.out.printf("%s", arr[i][j]);
       }
    } 
```

我基本上想要代码中出现的输出（作为 5x5 网格），但是关于格式化的教程不是很容易理解，而且大多数不处理这种格式。

理想情况下，输出应如下所示：

```
 * 2 1 * 1
    * 2 1 * 1
    * 2 1 * 1
    * 2 1 * 1
    * 2 1 * 1 
```

我的问题是，除了我将如何使用 printf() 字符执行此操作之外，在嵌套的 for 循环中使用这些字符是否会遇到任何问题？此外，我了解 %s 的来源，但任何进一步的符号使用都超出了我的范围。有人可以解释为什么他们会使用他们为此使用的符号和字符吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:57:55.873

您需要在结束`System.out.println();`后添加一个`inner loop`以在换行符中打印下一行：-

```
for(int i = 0; i < arr.length; i++)
{
   for(int j = 0; j < arr[0].length; j++)
   {
      System.out.printf("%s ", arr[i][j]);
   }
   System.out.println();
} 
```

有关各种的更多详细信息，`format specifier`请参阅此链接：-

*   [http://docs.oracle.com/javase/tutorial/java/data/numberformat.html](http://docs.oracle.com/javase/tutorial/java/data/numberformat.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:01:20.463

Java 中 printf() 类型的参考：http: [//docs.oracle.com/javase/7/docs/api/java/util/Formatter.html](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html)

代码：

```
 for(int i = 0; i < arr.length; i++) {
       for(int j = 0; j < arr[0].length; j++) {
        //System.out.printf("%s", arr[i][j]);
          System.out.printf("%s ", arr[i][j]);
        //The added space will pad the end after each character
       }
       System.out.println();
       //After each pass printing all the characters of your array,
       //this will add a line return.
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T18:01:40.713

```
String[][] arr =
    {
      {"*", "2", "1", "*", "1"},
      {"*", "2", "1", "*", "1"},
      {"*", "2", "1", "*", "1"},
      {"*", "2", "1", "*", "1"},
      {"*", "2", "1", "*", "1"}
    }

for(int i=0 ; i<arr.length ; i++){

      for(int j=0 ; j<arr.length[i] ; j++){

         System.out.printf("%s ", arr[i][j]);

   }

     System.out.prinln();

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-16T21:49:38.437

现在 Java 8 已经发布，您可以使用以下内容：

```
System.out.printf("%s", Grid.print(width, height, this::showCell)); 
```

您需要将其添加为单独的格式化程序函数：

```
public String showCell(Integer x, Integer y) {
    return arr[x][y];
} 
```

# postgis - 使用 postgis 计数功能和计数 0

> ID：13237645
> 
> 赞同：1
> 
> 时间：2012-11-05T17:56:10.500
> 
> 标签：postgis

我只使用了一个星期的 postgis，我已经被卡住了。我正在与纽约 gDB 合作。这是此页面上解释的一个：[http ://workshops.opengeo.org/postgis-intro/about_data.html](http://workshops.opengeo.org/postgis-intro/about_data.html)

我正在尝试列出“伍德黑文-里士满山”附近的街区以及位于这些街区的地铁站数量。

现在当我查看地图时，我看到有 7 个。其中一个是 Glendale，它没有地铁站，当我写查询时，它不会列出它。我希望它被列出并显示 '0 ' 为计数。

```
select n2.name, n2.geom, count(u.geom)
into glendale
from nyc_neighborhoods n1, nyc_neighborhoods n2, nyc_subway_stations u
where n1.name='Woodhaven-Richmond Hill'
    and (st_touches(n1.geom, n2.geom) or st_overlaps(n1.geom, n2.geom)) and ST_Contains(n1.geom, u.geom)
group by n2.name, n2.geom 
```

我知道问题是这样的：和 ST_Contains(n1.geom, s.geom) 因为它是格伦代尔的错......

谢谢 ！

# c# - VB.NET 到 C# 的转换

> ID：13237646
> 
> 赞同：-2
> 
> 时间：2012-11-05T17:56:11.113
> 
> 标签：c#, .net, vb.net, converter

我正在尝试将一段代码转换为 C#，但我无法理解它：

```
For iItem = LBound(arrItems) To UBound(arrItems)
    If InStr(arrItems(iItem), strFieldName & "=") = 1 Then
        strFindField = Mid(arrItems(iItem), Len(strFieldName) + 2)
        Exit For
    End If
Next 
```

声明怎么了`if`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:14:19.137

该工具似乎无法生成非常惯用的 C#，因此我将手动为您翻译以提供对比。

```
foreach (var item in arrItems)
{
   if(item.IndexOf(strFieldName + "=") == 0)
   {
      strFindField = item.Substring(strFieldName.Length + 2);
      break;
   }
} 
```

这应该模仿您在这里所做的事情，但是很难说出循环的意图是什么。另外，请注意，`.Substring`如果您向其提供超出其范围的数字，则会引发异常，而`Mid`只会返回一个空字符串。但是，由于尚不清楚如何使用此循环的返回，因此很难说处理此语义更改的最合适的选项是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:57:32.200

```
for (iItem = Information.LBound(arrItems); iItem <= Information.UBound(arrItems); iItem++) {
    if (Strings.InStr(arrItems(iItem), strFieldName + "=") == 1) {
        strFindField = Strings.Mid(arrItems(iItem), Strings.Len(strFieldName) + 2);
        break; // TODO: might not be correct. Was : Exit For
    }
} 
```

[http://www.developerfusion.com/tools/convert/vb-to-csharp/](http://www.developerfusion.com/tools/convert/vb-to-csharp/)

# f# - f# 统一时类型约束无限的接口

> ID：13237649
> 
> 赞同：3
> 
> 时间：2012-11-05T17:56:15.180
> 
> 标签：f#

我在获取具有类型约束的接口以正常工作时遇到问题。

这是类型

```
type LeftistHeap<'a when 'a : comparison> =
...
    interface IHeap<LeftistHeap<'a>, 'a> with
...
        member this.Insert (x : 'a) = LeftistHeap.insert x this 
```

和界面

```
type IHeap<'a when 'a : comparison> =
    inherit System.Collections.IEnumerable
    inherit System.Collections.Generic.IEnumerable<'a>
...
type IHeap<'c, 'a when 'c :> IHeap<'c, 'a> and 'a : comparison> =
    inherit IHeap<'a>
...
    abstract member Insert : 'a -> 'c 
```

这段代码没问题

```
let insertThruList l h  =
    List.fold (fun (h' : LeftistHeap<'a>) x -> h'.Insert  x  ) h l 
```

但是如果我尝试概括接口的代码

```
let insertThruList l h  =
    List.fold (fun (h' : IHeap<_,'a>) x -> h'.Insert  x  ) h l 
```

我在 h'.Insert 处收到此错误

> 类型不匹配。期望一个 'b
> 但给定一个 IHeap<'b,'a>
> 当统一 ''b' 和 'IHeap<'b,'a>' 时，结果类型将是无限的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T18:35:46.460

编译器是对的：您试图`'c`在需要`IHeap<'c,_>`. 由于`'c :> IHeap<'c,_>`，一种解决方案就是插入一个向上转换：

```
let insertThruList l h =
    List.fold (fun (h' : IHeap<_,_>) x -> h'.Insert  x :> _) h l 
```

或者，您可以表明您不希望输入（完全）是 an `IHeap<_,_>`，而是一些特定的子类型：

```
let insertThruList l h =
    List.fold (fun (h' : #IHeap<_,_>) x -> h'.Insert x) h l 
```

这可能是您真正想要的（类型更具体）。这相当于更详细的定义：

```
let insertThruList<'c,'a when 'a : comparison and 'c :> IHeap<'c,'a>> l h =
    List.fold (fun (h' : 'c) x -> h'.Insert x) h l 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T18:36:05.980

这对你的情况有用吗？

```
let insertThruList l (h : 'T when 'T :> IHeap<'T, 'a> )  =
    List.fold (fun (h' : 'T) x -> h'.Insert  x  ) h l 
```

# php - SQLSTATE [HY000]：一般错误：2053

> ID：13237655
> 
> 赞同：2
> 
> 时间：2012-11-05T17:56:31.603
> 
> 标签：php, mysql, pdo, laravel

我在我的 PHP 项目中随机收到此错误。我正在使用 Laravel 框架。我搜索了一下，发现这是由于 PDO 引起的问题。我试图在错误发生之前记录我试图运行的查询，当我通过 MySQL 复制并运行相同的查询时，它运行得非常好。以下是代码片段：

```
foreach($batches as $batch){
        $query_post = "INSERT INTO posts (`fb_post_id`, `page_id`, `from_user_id`,`to_user_id`, ".
                        "`object_id`, `from`,`to`, `message`, `picture`,`link`, `icon`, `type`,`name`, ".
                        "`status_type`, `privacy`,`caption`, `description`,`story`, `actions`, `created_time`, ".
                        "`comment_count`,`like_count`, `created_at`) VALUES ";
        $query = '';
        foreach($batch as $row){
            $comma_separated = implode("','", $row);
            $query .= "('".$comma_separated."'),";
        }
        $query_post .= $query;
        $query_post= substr($query_post, 0, -1);
        $query_post= utf8_encode($query_post);
        Log::write('info', ' POST QUERY : '.$query_post);
        DB::query($query_post);
    } 
```

在循环中运行几次后，我收到错误：SQLSTATE[HY000]: General error: 2053 in laravel/database/connection.php 第 293 行。如果有人能给我一个合理的解决方案，那将是一个很大的帮助。

PS：几次运行意味着一个随机数，它不会在某个特定点发生。我的 PHP 版本是 5.3.10，我在 5.4.4 上也遇到了同样的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-09T10:24:43.623

Use:

`DB::statement()` instead of `DB::query()`

Hope it help you.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-05T08:07:44.557

实际上，laravel 建议的是使用正确的语句进行操作

```
DB::delete()
DB::update()
DB::insert()
DB::select() 
```

原因是因为 statement() 不返回更新、插入和删除的受影响行响应

当然 select 返回选定的结果集合，这将始终允许您更好地记录和解释您的代码

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T18:20:19.470

那这个呢？

```
foreach($batches as $batch){
    $query_post = "INSERT INTO posts (`fb_post_id`, `page_id`, `from_user_id`,`to_user_id`, ".
                    "`object_id`, `from`,`to`, `message`, `picture`,`link`, `icon`, `type`,`name`, ".
                    "`status_type`, `privacy`,`caption`, `description`,`story`, `actions`, `created_time`, ".
                    "`comment_count`,`like_count`, `created_at`) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)";
    Log::write('info', ' POST QUERY : '.$query_post);
    DB::query($query_post,$batch);
} 
```

使用参数化查询可能会更好并解决问题......也许。真的不知道您传递给它的数据。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-04-24T10:30:38.233

使用执行，而不是查询。select 返回选定的结果集合，这将始终允许您更好地记录和解释您的代码

# mysql - mysql中是否有类似于运算符重载的机制？

> ID：13237659
> 
> 赞同：0
> 
> 时间：2012-11-05T17:56:42.557
> 
> 标签：mysql, sql

假设我有一个表，其中有列 days('mon','tue','wed','thu','fri')，我如何实现星期顺序（而不是字典顺序）到他们？

例如。

```
'mon'<'tue' //produce true

'fri'>'wed' //true

'fri'<'thu' //false 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:59:49.313

不是你想要的方式：

```
ORDER BY CASE day
    WHEN 'mon' THEN 1
    WHEN 'tue' THEN 2
    ...
    WHEN 'sun' THEN 7
END 
```

**编辑：**您还可以创建第二个表：

```
day_name day_order
======== =========
mon              1
tue              2
...
sun              7 
```

... 并在选择时加入和排序。

最后但同样重要的是，将天数存储为数字 :)

# php - 忽略第一行

> ID：13237664
> 
> 赞同：-3
> 
> 时间：2012-11-05T17:56:50.537
> 
> 标签：php, regex

我需要一个忽略第一行的正则表达式模式，例如：

```
test
test
test 
```

应该匹配最后两个**测试 test**，第一个应该被跳过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:59:07.633

与其混淆你的正则表达式，不如吃掉程序中提供正则表达式的第一行。未经测试的代码如下：

```
$file_handle = fopen("myfile", "r");
$throwAway = fgets($file_handle);
while (!feof($file_handle)) {
   $line = fgets($file_handle);
   yourMagicFunction($line);
  }
fclose($file_handle); 
```

从[这里获取的代码](http://www.ibm.com/developerworks/library/os-php-readfiles/)

我通常推荐更容易管理的过程。必须担心您的正则表达式的下一个维护者会查看它并想知道为什么它会占用第一行而不是让单独的程序执行该功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:03:08.210

使用正则表达式模式

```
(?!\A)^.*\Z 
```

带有多行`m`和单行（全点）`s`修饰符

所以在 PHP

```
/(?!\A)^.*\Z/ms 
```

# java - 将组件粘贴到 JScrollPane 上

> ID：13237678
> 
> 赞同：0
> 
> 时间：2012-11-05T17:57:45.927
> 
> 标签：java, swing, jpanel, jscrollbar

我有一个程序可以将一堆组件添加到`JPanel`（in `JScrollbar`）中。但是，由于它添加了很多组件，因此大多数组件都不适合可见区域（`Viewport`）。

当所有内容加载完毕并且我开始向下滚动时，我注意到组件在进入该`Viewport`区域时正在对齐并设置它们的位置。这导致我`JScrollPane`高于必要的水平。这使它在我到达终点时“突然”（组件突然向上移动（正确对齐），*视口也是如此*也是如此）。

我尝试调用`repaint()`and `validate()`，但没有任何效果。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T18:14:51.490

我建议发布[SSCCE](http://sscce.org/)以准确复制您的特定问题。

我做了一个简短的例子，可能会引导你走向正确的方向。

基本上只会添加 225`JButton`秒`JPanel`，`GridLayout`然后添加到`JScrollPane`.

![在此处输入图像描述](../Images/fafec9bda4d53a28d740a7c2d219b31e.png)

```
import java.awt.Dimension;
import java.awt.GridLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class JScrollPaneOfComponents {

    /**
     * Default constructor for ScrollBarOfComponents.class
     */
    public JScrollPaneOfComponents() {
        initComponents();
    }

    /**
     * Initialize GUI and components (including ActionListeners etc)
     */
    private void initComponents() {
        JFrame jFrame = new JFrame();
        jFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel panel = new JPanel(new GridLayout(15, 15));

        //create 225 JButtons and add them to JPanel;
        for (int i = 0; i < (15*15); i++) {
            panel.add(new JButton(String.valueOf((i + 1))) {
                //make buttons bigger for demonstartion purposes
                @Override
                public Dimension getPreferredSize() {
                    return new Dimension(100, 100);
                }
            });
        }

        JScrollPane scrollpane = new JScrollPane(panel) {
            //size the JScrollPane purposelfully smaller than all components
            @Override
            public Dimension getPreferredSize() {
                return new Dimension(300, 300);
            }
        };

        //add scrollpane to frame
        jFrame.add(scrollpane);

        //pack frame (size JFrame to match preferred sizes of added components and set visible
        jFrame.pack();
        jFrame.setVisible(true);
    }

    public static void main(String[] args) {

        /**
         * Create GUI and components on Event-Dispatch-Thread
         */
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    //set nimbus look and feel
                    for (UIManager.LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                        if ("Nimbus".equals(info.getName())) {
                            UIManager.setLookAndFeel(info.getClassName());
                            break;
                        }
                    }
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException e) {
                    e.printStackTrace();
                }
                //create new instance of GUI
                JScrollPaneOfComponents test = new JScrollPaneOfComponents();
            }
        });
    }
} 
```

# iphone - GWT CssResource 和使用@media 来支持大屏幕和小屏幕

> ID：13237680
> 
> 赞同：4
> 
> 时间：2012-11-05T17:57:52.710
> 
> 标签：iphone, css, gwt, desktop, cssresource

我正在使用 GWT 的 ClientBundle 和 CssResource 来提取我的 css 定义。

我想根据屏幕尺寸设置视口。你知道如何在 CssResource 中实现这一点吗？

我失败的尝试......为了便于测试，我使用了背景阴影。但是对于所有设备，背景都是绿色的。

```
body {background-color:green;}

@media only screen and (max-width:480px) {
body {background-color:red;}
} 
```

GWT [v2.5] 编译器发出警告：[WARN] 第 x 行第 12 列：遇到“屏幕”。期待其中之一：“{”“，”

只是一个警告，但在这种情况下，它不容忽视。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T15:13:58.657

GWT [v2.5] 不支持媒体查询。如果你想使用它，你必须做一个解决方法：

*   在您的客户端捆绑接口中，将您的源 css 标记为 TextResource：

    @Source("mycss.css") TextResource myCss();

*   转到您的 entryPoint 类并注入您的资源：

    StyleInjector.inject(AppBundle.INSTANCE.carouselCss().getText());

通过这样做，您将失去从 CssResource 扩展的接口 MyCss 并允许您从 UIBinder 调用 css 类等。但是，至少，您可以使用媒体查询。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-07T12:45:42.457

[GWT 2.5.1 添加了](https://code.google.com/p/google-web-toolkit/issues/detail?id=4911)对[CSS2 @media 规则](http://www.w3.org/TR/CSS2/media.html#at-media-rule)（例如`@media print { /* ... */ }`）的支持。但是，尚不支持 CSS3 @media 规则；那是[问题 8162 - CSSResource 和 CSS3](https://code.google.com/p/google-web-toolkit/issues/detail?id=8162)。

[Bart Guijt 建议的](https://code.google.com/p/google-web-toolkit/issues/detail?id=4911#c8)一个很好的解决方法是将“仅屏幕和（最大宽度：480px）”CSS 放入单独的文件中，并在@media 规则中动态注入生成的 CSS 文本。

如果你有：

```
public interface MyResources extends ClientBundle {
    @Source("my.css")
    public MyCssResource desktopCss();

    @Source("my-mobile.css")
    public MyCssResource mobileCss();
} 
```

然后在您的内部`EntryPoint`添加：

```
final MyResources resources = GWT.create(MyResources.class);
StyleInjector.injectAtEnd("@media only screen and (max-width:480px) {" +
            resources.mobileCss().getText() +
        "}"); 
```

这类似于[user1311201 建议的解决方法](https://stackoverflow.com/a/15837465/196844)`TextResource`，但有一个额外的好处，您可以使用混淆的 CSS 类名和其他功能。`CssResource`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-06T09:38:44.070

如果是一点点改变，您也可以使用@eval 作为解决方法，如下所示

```
@eval BG_COLOR com.google.gwt.user.client.Window.getClientWidth()<480?"red":"green";  

body {background-color:BG_COLOR;} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-19T11:22:20.713

我知道自从第一次提出这个问题以来有点晚了，但我最近遇到了同样的问题。

我的回答与 Daniel Trebbien 建议的类似，但有细微的变化。

我在本节的主要课程中完成所有工作，因为我在同一个项目中有几个部分。

首先，初始化变量：

```
 private final CssResource style;
    private final TextResource mobile; 
```

在资源类中，在主类中：

```
 @Source("main.css")
    CssResource style();

    @Source("mobile.css")
    TextResource mobile(); 
```

在资源类之外，但在主类中：

```
 private void scheduleFinally() {
        StyleInjector.injectAtEnd("@media screen and (max-width:900px) {" +
                this.resources.mobile().getText() +
            "}");
    } 
```

然后，我有点“初始化”这两个 css：

```
 this.style = this.resources.style();
    this.style.ensureInjected();

    this.mobile = this.resources.mobile();
    scheduleFinally(); 
```

# asp.net - ASP.NET 配置文件丢失值

> ID：13237684
> 
> 赞同：0
> 
> 时间：2012-11-05T17:58:00.953
> 
> 标签：asp.net, asp.net-profiles

我们开发了一个购物车脚本，使用 Profile 为匿名用户保存购物车。过去我们使用了所有类型的状态管理、cookie、会话等，我们发现配置文件是管理购物车的最佳方式。

问题是有时用户保存的个人资料消失，购物车项目是空的。我们在 global.asax 中添加了所有错误并通过电子邮件发送给我们，但没有错误，购物车只是空的。我们发现这在所有最终步骤（登录、注册、运输、付款、结论）中添加了一个检查购物车项目的功能。有时，用户去登录、注册、发货……付款时所有物品都丢失了。我们每天有超过 1000 次访问该站点，并且这种情况每周发生一到两次，因此非常断断续续。

什么能让profile失去他的状态？有什么方法可以调试或解决这个随机问题？我们怀疑该用户正在丢失 cookie，这是我们无法阻止的。如果发生这种情况，有什么方法可以将 cookie 保存在会话中或另一个 cookie 以恢复配置文件（如果它消失了）？

谢谢大家的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T14:39:15.727

如果您使用 MS Sql-Server 作为 DBMS，则必须执行 aspnet_regsql.exe。并将此代码添加到 web config 。. .

# wpf - 从 View 输入创建对象并将其传递给 ViewModel（在 MVVM 中）

> ID：13237688
> 
> 赞同：0
> 
> 时间：2012-11-05T17:58:16.463
> 
> 标签：wpf, entity-framework, xaml, mvvm, viewmodel

最近我正在使用**[MVVM](http://en.wikipedia.org/wiki/Model_View_ViewModel)**概念开发我的第一个项目（我使用**[WPF](http://en.wikipedia.org/wiki/Windows_Presentation_Foundation)**）。在开始编写代码之前，我已经阅读了很多关于**MVVM的教程（例如著名**[的 J.Smith 的教程）。](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)在我开始编码之前，我读过的所有内容都很清楚......

 **问题很简单：在*视图*层我有一个带有`TextBox`es 的表单。比方说几个`TextBox`es，即：**Name** , **Surname** , **Phone number**。当用户填写所有这些并单击**OK** -按钮时，我想将新人（具有指定的个人详细信息）添加到我的本地**数据库**（我使用*Entity Framework*作为[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)）。

为此，我需要编写如下内容：

```
<Button Name="MyButton" Command="MyRelayCommandWhichNeedsAllOfTheTextboxes" Content="OK" /> 
```

使用`CommandParameter`我可以将一个对象从*View*传递到*ViewModel*。有很多文本框，所以这可能不是一个好主意。

从*XAML*我可以分配给`CommandParameter`需要由用户填写的整个表单。但是，在*ViewModel*中，我需要知道所有文本框的名称。MVVM 的主要假设是所有层（视图、视图模型和模型）都必须是独立的。

最好的解决方案是什么？如何将输入数据从表单传递到*ViewModel*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:14:28.980

我建议将中继命令作为您的视图模型的一部分——这样，当命令被触发时，您将可以访问您需要的所有属性。

**XAML：**

```
<Button Name="SurnameTextBox" Text="{Binding Surname,Mode=TwoWay}" />
<Button Name="MyButton" Command="{Binding MyRelayCommand}" Content="OK" /> 
```

**查看型号：**

```
public class MyViewModel : INotifyPropertyChanged
{
    // (note, raise property changed on the setter
    public string Surname { get; set; }

    public ICommand MyRelayCommand { get; set; }

    public MyViewModel
    {
        // set the command callback here
        MyRelayCommand = new RelayCommand(OKCommandHandler); 
    }

    private void OKCommandHandler(object parameter)
    {
        // save the record here using Surname, etc
        // (note that you don't even need to use parameter, so you can just ignore it)
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T18:39:35.543

您不需要将数据从表单传递到 viewmodel，因为您的 viewmodel 已经拥有所有数据。

您的视图模型通过属性将所有数据公开给您的视图并绑定到它。看看 dbaseman 的回答。**

# php - Symfony2 中监听器的命名

> ID：13237689
> 
> 赞同：5
> 
> 时间：2012-11-05T17:58:20.770
> 
> 标签：php, events, symfony, listener

我已经阅读了一些关于 Symfonys 事件系统的指南/教程。但我仍然不确定命名最佳实践。不幸的是，大多数文档都使用默认场景，如登录等。所以这里有一个游戏的例子：

命令评估某种匹配结果。它会触发这样的适当事件：

```
$dispatcher->dispatch('game_bundle.match_won', new MatchWonEvent($match, $winner)); 
```

现在我想注册几个听众来处理这个事件，例如一个用于将其发布到获胜者的 Facebook 页面，另一个用于为获胜者预订成就。在示例中，我发现处理登录事件的侦听器主要被称为类似`LoginListener`，但这个名称不应该与它的实际使用相关，而不是与它相关的事件吗？因为现在在我的示例中，我需要一个`MatchWonListener`，但它是否应该同时包含 Facebook 和成就逻辑？那将使事件系统变得无用......不是更好`FacebookListener`吗？这也可以轻松地将更多与 Facebook 相关的事件添加到示例中。`onMatchWon($event)``AchievementListener``onMatchWon($event)``FacebookListener`

我对样本中的命名感到困惑，现在不确定。我完全错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T20:46:37.333

没有关于如何命名事件的“最佳实践”。但是，如果您在事件之后命名侦听器，我认为这完全违背了事件的目的。目标是能够让系统的不同部分相互交互，而不会产生耦合和混合问题。

因此，考虑到您已经走到了创建事件以分离关注点的地步，为什么要将所有不同的逻辑混合到一个侦听器中？在这种情况下，您不妨直接调用而不是调度事件。

我个人反对“onMatchWon”之类的名称，因为这并没有描述该方法的作用。假设您想收听比赛获胜事件并更新获胜用户的成就。我可能会有一些用户管理服务或带有方法的排序`updateAchievements(MatchWonEvent $event)`。但我认为这更像是一个品味问题，或者如果你愿意的话。

# javascript - 如何正确处理“body”jquery 事件以关闭下拉列表

> ID：13237690
> 
> 赞同：1
> 
> 时间：2012-11-05T17:58:19.617
> 
> 标签：javascript, jquery, html, events, menu

我正在尝试制作一个与保管箱仪表板非常相似的下拉菜单，如果您单击用户名，则会出现一个弹出菜单。再次单击用户名将关闭弹出窗口（每次单击时都会切换它）。

需要注意的是，单击弹出按钮本身*以外*的任何位置也会将其关闭。

到目前为止，我几乎可以正常工作，但不是 100%。如果您直接单击实际的“body”元素，它将按原样关闭弹出窗口。我的意思是我的网站有一个 .wrapper 元素，它不会占据页面的整个高度。底部有一条细条，没有实际的元素覆盖它，只有`<body>`标签。任何地方`.wrapper`或其他元素占用空间（即使是 100% 宽度的不可见包装），如果您单击任何有元素的地方（除了主体），它都不会关闭窗口。

javascript:

```
// FLYOUT menu 
$flyout = $('.flyout ul'),
 flyoutDuration = 120;

$('.flyout h3 a').click(function(e) {
    e.preventDefault();
    $flyout.fadeToggle(flyoutDuration);
});

$(document).on('click',function(e) { 
    if ( $(e.target).parents($flyout).length === 0 ) { 
        $flyout.fadeOut(flyoutDuration); 
    }
}); 
```

HTML

```
<body>
    <div class="blackbar">
        <div class="container clearfix">
            <a href="/"><div class="icon logo"></div></a>
            <div class="flyout">
                <h3>
                    Welcome back, <a href="#">username</a>
                </h3>
                <div class="menu">
                    <ul>
                        <li><a href="#"><div class="users"></div>Users</a></li>
                        <li><a href="#"><div class="groups"></div>Groups</a></li>
                        <li><a href="#"><div class="configuration"></div>Configuration</a></li>
                        <li><a href="#"><div class="logout"></div>Logout</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="wrapper">
        <! -- content here -->
    </div>
</body> 
```

预期的行为应该是您单击的任何不是 .flyout 后代的元素都应该关闭窗口（包括`.blackbar`徽标等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T19:56:40.510

老实说 - 当我做这样的事情并且我不希望在“框”内点击来关闭元素时 - 我会阻止点击冒泡。

```
// FLYOUT menu 
$flyout = $('.flyout ul'),
 flyoutDuration = 120;

$('.flyout h3 a').click(function(e) {
    e.preventDefault();
    $flyout.fadeToggle(flyoutDuration);
});

$('.flyout').click(function(e) {
  e.stopPropagation();
  e.preventDefault();
});

$(document).on('click',function(e) { 
  if(flyout-open) {
        $flyout.fadeOut(flyoutDuration); 
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T09:00:20.867

Jquery Menu Click -**单击**主体上的任意位置将关闭菜单

在我的情况下，如果单击主链接或链接外部（即 html/body 上的任何位置），我想关闭下拉菜单

[http://jsfiddle.net/austinnoronha/k2Lwj/](http://jsfiddle.net/austinnoronha/k2Lwj/)

```
var toggleClick = function(){

    var divObj = $(this).next();
    var nstyle = divObj.css("display");

    if(nstyle == "none"){
        divObj.slideDown(false,function(){
            $("html").bind("click",function(){
                divObj.slideUp();
                $("html").unbind("click");
            });
        });
    }
};

$(".clickme").click(toggleClick); 
```

# c# - 达到 HiDef XNA 4.0

> ID：13237691
> 
> 赞同：0
> 
> 时间：2012-11-05T17:58:21.323
> 
> 标签：c#, xna, xna-4.0, xna-3.0

我正在将一个项目从 XNA 3.1 转换为 XNA 4.0，我收到了这个错误：

> 错误 1 ​​XNA Framework Reach 配置文件不支持顶点着色器模型 3.0。J:\Utad\Mestrado\2Ano\Disserteção\Novos softwares\xna\Codigo\VisualizadorXNA\VisualizadorXNA\VisualizadorXNAContent\BumpCylinder.fx VisualizadorXNA

经过一些研究，我发现我必须在我的项目中从 Reach 更改为 HiDef。之后，错误消失了，但其他错误出现了。我从未见过这种错误，并且在互联网上的任何地方都找不到解决方案，错误如下：

> 错误 17 参数 1：无法从 'Microsoft.Xna.Framework.GameTime [c:\Program Files (x86)\Microsoft XNA\XNA Game Studio\v4.0\References\Windows\x86\Microsoft.Xna.Framework.Game .dll]' 到 'Microsoft.Xna.Framework.GameTime' J:\Utad\Mestrado\2Ano\Disserteção\Novos softwares\xna\Codigo\VisualizadorXNA\VisualizadorXNA\VisualizadorXNA\Game1.cs 208 35 VisualizadorXNA

这个错误非常奇怪。我可以在这方面使用一些帮助。

最好的问候， 豪尔赫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:00:09.343

I'd clear the solution, and would remove the "bin" and "obj" folders and every file with a suffix like "cache" or "user" in every project.

If it continues giving fails, I would remove the "Microsoft.Xna.Framework" references and I would add again to ensure are right.

# javascript - 如何判断复选框是否被选中？

> ID：13237692
> 
> 赞同：0
> 
> 时间：2012-11-05T17:58:23.920
> 
> 标签：javascript, jquery, html, forms

我需要能够判断是否选中了复选框以进行一些基本验证。问题：我无权访问生成它的 PHP。没有添加类，或者大多数表单都具有基本的checked=checked。定位选中框的最简单方法是什么？

[http://www.inpresence.in/event-registration?ee=4](http://www.inpresence.in/event-registration?ee=4)

编辑：吓坏了！这是代码，我只需要针对选中的框，其他一切都在工作。jquery 的 :checked 方法在复选框中使用了checked=checked，但该复选框不存在。

```
 $(document).ready(function(){
    //when the submit button is clicked...
    $("input.btn_event_form_submit").click(function(){

    //find the value of the drop down with one evening or four evenings
    var priceOption = $("#price_option-4").val();

    //match a string ending with "one evening" as the first numbers will be randomly generated by php
    var oneEvening = /^\d{2}\|One Evening$/.test(priceOption);

    //match a string ending with "four evenings" as the first numbers will be randomly generated by php
    var fourEvenings = /^\d{2}\|Four Evenings$/.test(priceOption);

    //HOW DO I GET THE CHECKED BOXES?!
    var checkedBoxCount = $('#dates-1351733097 .valid').is(':checked').length;

    //if one evening is selected make sure the checked boxes count does in fact equal one
    if(oneEvening && checkedBoxCount != 1){
        //if it doesn't alert the user and return false
        alert('You must select one date');
        return false;
    }

    //if one evening isn't selected, four is. make sure the count does indeed in 4
    else if (fourEvenings && checkedBoxCount != 4){
        //if it doesnt alert the user and return to the form
        alert('You must select four dates');
        return false;
    }

    //else, everything checks out!
    else {
        return;
    }

});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:59:45.427

您是否尝试过使用 jquery 来解决此问题？ [http://jquery-howto.blogspot.co.uk/2008/12/how-to-check-if-checkbox-is-checked.html](http://jquery-howto.blogspot.co.uk/2008/12/how-to-check-if-checkbox-is-checked.html)

```
$('#edit-checkbox-id').is(':checked'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T18:02:14.490

使用此 JavaScript 代码，您可以检查是否选中了复选框：

```
var isChecked = document.getElementById("my-checkbox").checked; 
```

或者使用 jQuery：

```
var isChecked = $('#my-checkbox').is(':checked'); 
```

编辑：试试这个并告诉我它是否有效：

```
var checkedBoxCount = $('#dates-1351733097 .valid:checked').length; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T18:00:08.897

使用 jquery`:checked`选择器。[http://api.jquery.com/checked-selector/](http://api.jquery.com/checked-selector/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T18:00:41.533

这将为您提供所需的 javascript 布尔值：

```
document.getElementById("Nov.12-4_1").checked 
```

您可以查看源代码并找到元素以查看它们拥有的任何 id。

其他答案：OP 没有指定他想要一个 jquery 答案。如果他到目前为止还没有使用 jquery 做任何事情。我认为仅仅为此添加它会有点矫枉过正。

# r - 用 ggplot 绘制时间：绘图中增加了小时可能是由于夏令时？

> ID：13237697
> 
> 赞同：0
> 
> 时间：2012-11-05T17:58:53.167
> 
> 标签：r, ggplot2

如果这已经回答，请原谅我，但我在档案中找不到这个问题。

我正在尝试在 x 轴上绘制一些带有时间的数据。问题是它绘制了一个额外的小时的时间。例如，晚上 7 点在情节中变为晚上 8 点。我认为这可能是由于日期处于夏令时期间（4 月至 10 月）。当我将日期更改为例如 11 月时，ggplot2 绘制得很好。我怎样才能解决这个问题？由于数据框中的时间是正确的时间（不需要 +1 小时）。我知道我可以在时间 -1 小时的位置创建一个新列，但似乎 ggplot2 应该从一开始就在正确的时间绘制它。

谢谢！

带有一些随机数据的代码：

```
library(lubridate)
library(ggplot2)
ee = read.table(textConnection('Timestamp Temp.Diff
  "5/14/2011 19:00" -0.385
  "5/14/2011 19:10" -0.535
  "5/14/2011 19:20" -0.484
  "5/14/2011 19:30" -0.409
  "5/14/2011 19:40" -0.385
  "5/14/2011 19:50" -0.215'), header=TRUE)
ee$Timestamp <- mdy_hm(ee$Timestamp)
ggplot(data=ee, aes(x=Timestamp, y=Temp.Diff)) + geom_point() 
```

![显示增加小时的图](../Images/d13cd10a1edc81140008c28841cb88c2.png)

# c++ - 如何在一台机器上同时构建 vc9 和 vc10 版本的 Boost？

> ID：13237700
> 
> 赞同：1
> 
> 时间：2012-11-05T17:59:05.320
> 
> 标签：c++, boost

我同时安装了 vc9 和 vc10。我可以成功构建vc10 Boost，但我无法构建vc9版本。我试过“bootstrap.bat vc9”，但没有帮助。升压为 1.51。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T18:19:59.883

参考[Boost.Build V2 用户手册](http://www.boost.org/boost-build2/doc/html/bbv2/overview/invocation.html)

一种可能的变体是：

```
booststrap.bat
b2 --build-type=complete toolset=msvc-9.0,msvc-10.0 address-model=64 variant=debug,release threading=multi link=static 
```

PS 1.52 版 Boost 今天发布

# c# - 如何在不删除数据库的情况下更改模型？

> ID：13237705
> 
> 赞同：0
> 
> 时间：2012-11-05T17:59:12.090
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2010

如果我对模型进行任何更改，现在我必须删除并重新创建数据库。我要解决什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:09:28.067

手动更改数据库。确保您`Prevent saving changes that require table re-creation`在 SQL Server Management Studio 的设计器下的选项中未选中

![在此处输入图像描述](../Images/8b936e2a5980995127dcc5024793d103.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:03:26.353

您将需要手动更改数据库。

有一些自动化工具可以帮助您进行反思，例如[http://visualstudiogallery.msdn.microsoft.com/df3541c3-d833-4b65-b942-989e7ec74c87](http://visualstudiogallery.msdn.microsoft.com/df3541c3-d833-4b65-b942-989e7ec74c87)或[http://www.huagati.com/dbmltools/](http://www.huagati.com/dbmltools/)

# css - Chrome 是否在 z-indexes 方面退步（或者我做错了什么）？

> ID：13237713
> 
> 赞同：2
> 
> 时间：2012-11-05T17:59:54.530
> 
> 标签：css, google-chrome, z-index

我在生产中拥有的网站导航作为 3 个选项卡工作，单击时会出现 3 个相应内容中的每一个。

**我刚刚意识到它在Chrome 22**上不起作用（尽管我有 90% 的把握在一年前网站上线时在 Chrome 上测试过它），但在**IE9**和**FF16**上完全没问题。

这是我的问题的摘要：http: [//jsfiddle.net/be7mQ/3/](http://jsfiddle.net/be7mQ/3/)

如您所见，只有 3 个选项卡中的最后一个选项卡可以悬停（并因此单击）在**Chrome 22**上。就像 Chrome 为每个元素创建了一个新的 z-index 堆栈，`.tab-container`而不是仅显示所有元素`z-index:21`的其余内容。

所有元素都是`position:fixed`或`position:absolute`，我看不出那里有什么问题，有人吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T18:11:57.927

> 就像 Chrome 为每个元素创建了一个新的 z-index 堆栈，`.tab-container`而不是仅显示所有元素`z-index:21`的其余内容。

这种行为是在 Chrome 22 中有意引入的。带有 的框`position: fixed`将在基于 WebKit 的浏览器中创建新的堆叠上下文，无论它们如何`z-index`，都会导致您当前看到的行为。

更多关于[这里](http://updates.html5rocks.com/2012/09/Stacking-Changes-Coming-to-position-fixed-elements)。据说它被提议作为对 CSS2.1 规范的修订，以帮助移动实现（移动 WebKit 浏览器上已经发生了相同的行为）；[在这组会议记录](http://lists.w3.org/Archives/Public/www-style/2012Oct/0115.html)中，它在一定程度上得到了解决，但正如我所见，规范还没有任何实际的变化——确实；工作组尚未达成共识。

我同意微软的兼容性问题；我可以看到这打破了现代网站的相当大一部分。解决方法基本上是情境性的并且完全取决于受影响布局的性质，从而加剧了该问题，正如此处的其他答案所证明的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T11:00:39.730

BoltClock 的答案是一个，如前所述，每种情况都需要对此进行特定修复，但这就是我解决自己损坏的网站的方法：

[http://jsfiddle.net/be7mQ/13/](http://jsfiddle.net/be7mQ/13/)

即将我以前所有的`position:fixed`div 放在一个唯一的`position:fixed`父级中，该父级`#tabs`必须`z-index:1`在 Chrome22 以外的浏览器上强制使用新堆栈。

这样，在新`#tabs`元素中，我可以像以前一样自由地使用 z-indexes。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T18:12:40.663

由于您使用的是固定位置，因此该`top: 0`属性将使您的最后一个元素悬停在所有其他元素上。不要定位标签元素，而是更改标签容器的顶部，如下所示。

将您的 HTML 更改为

```
<div class="tab-container info">
    <div id="info" class="tab">I<br/>N<br/>F<br/>O</div>    
</div>

<div class="tab-container news">
    <div id="news" class="tab">N<br/>E<br/>W<br/>S</div>    
</div>

<div class="tab-container shop">
    <div id="shop" class="tab">S<br/>H<br/>O<br/>P</div>    
</div>​ 
```

和你的 CSS

```
.info{
    top:0px;
}
.news{
    top:100px;
}
.shop{
    top:200px;
}​ 
```

**[小提琴](http://jsfiddle.net/be7mQ/7/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T18:19:22.657

因为你正在使用

```
height: 100% 
```

在 .tab-container{ 上，最后一个与其他所有内容重叠，因此只有第三个（最后一个）用于悬停。尝试从标签容器的 css 中删除 height: 100% 。有用！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T18:15:59.273

`height: 100%`从中删除`.tab-container`。第三个选项卡的高度覆盖了前两个选项卡。当我在你的小提琴中这样做时，它们都是可点击的。

# c# - CLR2 编译的 C# COM 不适用于 .Net 4

> ID：13237715
> 
> 赞同：2
> 
> 时间：2012-11-05T17:59:59.287
> 
> 标签：c#, com, clr, clr4.0

有谁知道为什么在 CLR2 (.Net 3.5) 下编译的 C# 创建的 COM 库在仅与 CLR4(.Net 4) 一起使用时不起作用？COM 的 CLR2 中的 CLR4 中缺少什么？

我们在 app.config 中使用适当的启动来让 C# 在 CLR4/.Net 4 下运行：

```
<startup>
  <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
</startup> 
```

在尝试创建我们的 COM 接口之前，所有 C# 的东西都有效。它提供了以下例外：

> 无法加载运行时。（来自 HRESULT 的异常：0x80131700）

当我们尝试从 C++ 创建 COM 接口时，我们会遇到同样的问题。

一旦我们安装了 CLR2 (.Net 3.5)，所有的 COM 东西都开始工作了。我们想知道发生了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T18:14:57.717

该程序集已注册为*需要*CLR v2，但您明确禁止使用 .config 文件加载该版本。您需要在 .config 文件中添加一个*额外*的信息来表示“我知道，但没关系”。像这样：

```
<startup useLegacyV2RuntimeActivationPolicy="true">
   <supportedRuntime version="v4.0"/>
</startup> 
```

请注意，您有意绕过 .NET 4 中添加的进程内并行版本控制功能。明确添加了一项新功能，以允许应用程序加载多个版本的 CLR 以支持具有不同的 COM 服务器CLR 版本要求。这当然听起来像你的情况。在这种情况下，更兼容的鼠标陷阱是允许加载两个版本的 CLR：

```
<startup>
   <supportedRuntime version="v4.0"/>
   <supportedRuntime version="v2.0.50727"/>
</startup> 
```

* * *

另一个非常重要的细节是这个 .config 文件的名称和位置。这是不直观的，但 CLR 从启动 EXE 的目录和名称中找到 .config 文件。因此，如果您从本地 C++ 程序（例如 c:\foo\bar.exe）测试此 [ComVisible] 服务器，则必须将文件命名为“bar.exe.config”并将其复制到 c:\foo 目录。将 .config 文件与具有 DLL 名称的 DLL 放在同一目录中将*不起作用*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T19:06:41.163

在 .NET 4 中编译程序集后，您可能需要使用 regasm.exe 来更新 RuntimeVersion。如果重新编译不是一个选项，您可能会将注册表中的 RuntimeVersion 从 v2.0.50727 更改为 v4.0.30319。这对我有用。我在这里找到了类似的答案：[Using a .NET-2.0-targeted COM DLL in the GAC on a .NET-4-only system](https://stackoverflow.com/questions/4373482/using-a-net-2-0-targeted-com-dll-in-the-gac-on-a-net-4-only-system)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T19:13:32.713

CLR 版本写在 .dll 文件头中，其值由 regasm 工具复制到注册表。然后激活器尝试使用指定的确切 CLR 版本运行组件。要让 CLR 4 运行在 CLR 2 程序集中实现的组件，您可以手动更改注册信息 (Classes/{clsid}/InprocServer32/component-version/RuntimeVersion) 或`useLegacyV2RuntimeActivationPolicy`按照上一个答案中的描述进行设置（配置文件确实可以转到本机 .exe 旁边，这没什么问题）。

# c - GTK 中的启动画面

> ID：13237716
> 
> 赞同：2
> 
> 时间：2012-11-05T18:00:06.893
> 
> 标签：c, gtk, splash-screen

我是 GTK 的新手，我正在使用它在 C 中创建 UI。我创建了一个启动屏幕，我可以在指定的几秒钟后使用该函数将其关闭`g_timeout_add(100, function_to_call, NULL);`。启动画面效果很好。但问题是当进一步扩展我的程序时（即）关闭启动屏幕后，我希望自动显示另一个窗口，但事实并非如此。两扇窗户同时打开。这是我的程序。

```
gboolean function_to_call(gpointer data){
    gtk_quit_main();
    return(FALSE);
}
int main (int argc, char *argv[]){
    GtkWidget *window, *image, *another_window;
    gtk_init(&argc, &argv);
    .
    .
    .
    .
    .
    .
    .
    g_timeout_add (100, function_to_call, NULL);
    gtk_main ();
    /*if my program is till this, splash screen closes after 1 sec . But when i try
     *to define another window from here onwards and call gtk_widget_show() and gtk_main() 
     *again for another_ window, window and another_window both open together and window  
     *doesn't close after 1 sec. */
} 
```

任何形式的帮助都是值得赞赏的。
谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T20:40:52.307

您的 function_to_call 不会在此处关闭您的启动窗口，它会结束 gtk_main 事件循环。您不需要结束事件循环。

相反，您想要在您的`function_to_call`, 中隐藏（或销毁）您的启动窗口并显示您的下一个窗口（`gtk_widget_hide()`, `gtk_widget_show()`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T13:47:42.063

我创建了一个启动画面头文件，如下所示。

```
#include <gtk/gtk.h>

/* Close the splash screen */
gboolean close_screen(gpointer data)
{
  gtk_widget_destroy((GtkWidget*)data);
  gtk_main_quit ();
  return(FALSE);
}

int Show_Splash_Screen(char* image_name,int time,int width,int height)
{
  GtkWidget  *image, *window;
  window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
  gtk_widget_set_size_request (window, width, height);
  gtk_window_set_decorated(GTK_WINDOW (window), FALSE);
  gtk_window_set_position(GTK_WINDOW(window),GTK_WIN_POS_CENTER_ALWAYS);
  gtk_window_set_resizable(GTK_WINDOW(window), FALSE);
  image=gtk_image_new_from_file(image_name);
  gtk_container_add(GTK_CONTAINER(window), image);
  gtk_widget_show_all (window);
  g_timeout_add (time, close_screen, window);
  gtk_main ();
  return 0;
} 
```

只需包含此文件并显示启动屏幕调用函数 Show_Splash_Screen("image_path",time_in_seconds,width_of_image_in_pixels,height_of_image_in_pixels);

# c# - 重复 AMMediaType

> ID：13237729
> 
> 赞同：0
> 
> 时间：2012-11-05T18:00:57.603
> 
> 标签：c#, video, directshow, directshow.net

我可以复制一个 VideoInfoHeader，它是 AMMediaType 的一部分，其中包含以下几行：

```
AMMediaType mediaType = new AMMediaType();
VideoInfoHeader videoInfo = new VideoInfoHeader();
(pSampleGrabber as ISampleGrabber).GetConnectedMediaType(mediaType);
videoInfo = (VideoInfoHeader)Marshal.PtrToStructure(mediaType.formatPtr, typeof(VideoInfoHeader)); 
```

我从[SampleGrabber 获得的参数不正确](https://stackoverflow.com/questions/7788076/samplegrabber-parameter-is-incorrect)以及互联网上的其他资源。但是我无法复制整个 AMMediaType-Structure。指向 VideoInfoHeader 的指针丢失。

所以我想知道是否存在一个辅助函数将 AMMediaType 复制到内存中的不同位置，查找 VideoInfoHeader 之类的指针并将 VideoInfoHeader 的内容和其他引用数据复制到新位置（包括将 formatPtr 指向正确的位置） .

我在以下场景中使用它：我检索视频输入设备的所有可能的 IPin 媒体类型，并在 Windows.Forms - Combobox 中显示 AMMediaTypes。当我从组合框中读取 SelectedObject 时，指向 VideoInfoHeader 的指针为零。这是在构建过滤器图时无法使用我选择的引脚配置进行连接的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:58:56.367

`AMMediaType`aka`AM_MEDIA_TYPE`结构由常规成员和额外分配的由`formatPtr`. 后者是一个字节数组，其含义取决于格式类型。结构和从属内存块通常都使用特定的 COM 分配器。

复制结构是复制其成员并复制后面的字节数组`formatPtr`。该结构还包括`pUnk`应该是 COM 接口的成员，但它通常是`null`. 它是非空的是有效的，但多年来我不记得它实际使用的一个案例，特别是视频和音频媒体类型。

# sql - 我们如何在 SQL Server 2008 中对所有列名使用 ISNULL？

> ID：13237736
> 
> 赞同：12
> 
> 时间：2012-11-05T18:01:23.390
> 
> 标签：sql, sql-server-2008

我有个问题

我试过了`google`，但看起来他们不喜欢`*`

我正在使用 SQL Server 2008。

我有以下数据库表：

```
 P_Id   ProductName UnitPrice   UnitsInStock    UnitsOnOrder
------------------------------------------------------------------------
   1    Jarlsberg   10.45                 16    15
   2    Mascarpone  Null                  23    NULL 
   3    Gorgonzola  15.67                  9    20 
```

如果我需要`null`用我知道的字符串替换它：

```
 SELECT ISNULL(UnitsOnOrder,'No Data') FROM tbl 
```

**问题**

*   如何使用`ISNULL()`多列名称？
*   是否可以与它一起使用`*`

*像*

```
SELECT ISNULL(* , 'NO data') FROM tbl 
```

我认为这会很棘手，因为数据类型，你不能将字符串传递给`INT`数据类型，所以我该如何解决这个问题

**更新**

好的，如果我使用`ISNULL(`) 的数据类型`int`将返回`0` 对我来说将是一个值，我怎样才能传递空字符串呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-05T18:06:52.950

您可以在同一 SQL 语句中对不同的列多次使用 ISNULL，但必须为每列单独编写：

```
SELECT
    ISNULL(ProductName, 'No Data') AS ProductName,
    ISNULL(CAST(UnitPrice AS NVARCHAR), 'No Data') AS UnitPrice, 
    ISNULL(CAST(UnitsInStock AS NVARCHAR), 'No Data') AS UnitsInStock,
    ISNULL(CAST(UnitsOnOrder AS NVARCHAR), 'No Data') AS UnitsOnOrder
FROM tbl 
```

如果您正在构建动态 SQL 查询，理论上您可以收集表中的列列表并生成一个查询，每个查询都带有 ISNULL。例如：

```
DECLARE @SQL nvarchar(max)

SET @SQL = 'SELECT '

SELECT @SQL = @SQL + 'ISNULL(CAST([' + sc.name + '] AS NVARCHAR), ''No Data'') AS [' + sc.name + '],'
FROM sys.objects so
INNER JOIN sys.columns sc ON sc.object_id = so.object_id
WHERE so.name = 'tbl'

-- Remove the trailing comma
SELECT @SQL = LEFT(@SQL, LEN(@SQL) - 1) + ' FROM tbl'

EXEC sp_sqlexec @SQL 
```

此代码在将某些列类型（如时间戳）转换为 nvarchar 时存在问题，但它说明了该技术。

请注意，如果在值为 null 时应返回另一列，则可以像这样使用[COALESCE](http://msdn.microsoft.com/en-us/library/ms190349.aspx)表达式：

```
SELECT COALESCE(ProductName, P_Id) AS Product... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T18:42:13.603

试试这个...

```
ISNULL (COALESCE (column1, column2), 'No Data') 
```

您需要包含所有列名，但不能使用 *

COALESCE 返回其参数列表中的第一个非空值，因此如果它们都为空，它将返回空

# iphone - 用于异步请求的 ios 循环

> ID：13237741
> 
> 赞同：0
> 
> 时间：2012-11-05T18:01:53.357
> 
> 标签：iphone, ios, delegates

我必须异步发出多个 http 请求（一次一个请求）。对于循环我这样做：

```
-(void) Foo1
{
    [makerequest];
}

-(void) requestCompletes
{
   //Do something
   [self Foo1:[array objectAtIndex:i++]];
}

viewDidLoad
{
         [self Foo1:[array objectAtIndex:0]];
} 
```

但是在完成处理程序中循环对我来说似乎不是一个好主意。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:16:46.997

不，这不是正确的方法。iOS 平台有一个[NSOperationQueue](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSOperationQueue_class/Reference/Reference.html#//apple_ref/doc/uid/TP40004592)类，它允许你调度操作。通过创建您自己的任何操作（[NSInvocationOperation](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSInvocationOperation_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40005505)、[NSBlockOperation](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSBlockOperation_class/Reference/Reference.html#//apple_ref/doc/uid/TP40008157)或[NSOperation](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSOperation_class/Reference/Reference.html)）的子类并使用它来包装[NSURLRequest](http://developer.apple.com/library/ios/#documentation/cocoa/reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40003762)，您可以通过调用轻松添加和执行 Web 请求

```
[operationQueue addOperation:requestOperation]; 
```

# hyperlink - Jasper Reports - 设置超链接以打开其他报告并传输集合类型参数

> ID：13237742
> 
> 赞同：0
> 
> 时间：2012-11-05T18:01:55.840
> 
> 标签：hyperlink, jasper-reports, subreport

这可以做到吗？我试过了，但参数没有传输。只有第一个选择的值出现在生成的链接中，然后在单击超链接时打开的报告中，我得到空值。

谢谢

jrxml超链接代码：

```
<textField hyperlinkType="RemotePage" hyperlinkTarget="Blank">
<reportElement uuid="1e57b233-2612-4956-8808-070dc9bcb2f5" x="548" y="30" width="222" height="17"/>
   <textElement textAlignment="Right"><font size="12"/>         </textElement>
   <textFieldExpression><![CDATA["RawData >> Click Here"]]></textFieldExpression>
    <hyperlinkTooltipExpression><![CDATA["Click to view RawData"]]></hyperlinkTooltipExpression>
    <hyperlinkParameter name="_report">
    <hyperlinkParameterExpression><![CDATA["repo:/Team_Reports/CIR_RawData"]]></hyperlinkParameterExpression>
    </hyperlinkParameter>
    <hyperlinkParameter name="Project_Sets2">
    <hyperlinkParameterExpression><![CDATA[$P{Project_Sets}]]></hyperlinkParameterExpression>
    </hyperlinkParameter>
        </textField> 
```

# ios5 - 同步按钮状态的最佳实践

> ID：13237743
> 
> 赞同：1
> 
> 时间：2012-11-05T18:02:00.763
> 
> 标签：ios5, uibutton, state

我想知道是否有一些推荐的方法来同步ios中的一些按钮状态。例如，我有 5 个按钮，我想将它们用作我的数据的过滤器 - 它们都应该同步工作。So when one is selected i want the other other ones unselected. 我可以简单地取消选择所有按钮并在每次选择按钮时只重新选择我想要的那个。有没有更好的方法来实现这一目标？我也想看看这个`Key Value Observing`机制，但这里非常欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:42:48.493

[GeneralMike对取消选择所有按钮](https://stackoverflow.com/questions/13315253/ios-table-view-how-to-deselect-all-buttons-in-all-cells)的另一个问题给出的一个答案 是使用 UISegmentedControl 或 UISwitches。虽然这是一种不同的情况，但它可能符合您的要求。

# nested - 嵌套表达式语言在 mule 中不起作用

> ID：13237745
> 
> 赞同：1
> 
> 时间：2012-11-05T18:02:10.543
> 
> 标签：nested, expression, mule

我试图在 mule 中使用嵌套表达式，但它不起作用。

```
<When evaluator="json"     expression="status/#groovy:message.getSessionProperty('user')]='Active'"> 
```

但是当我尝试使用静态方式时，它正在工作。

```
<When evaluator="json" expression="status/john='Active'"> 
```

我正在使用 mule 3.3.0 版本。有人提到嵌套表达式在 mule 3.3.0 中工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T19:17:39.357

最好的方法是连接表达式而不是嵌套它们。

例如，当条件如下所示：

```
<when expression="#[json:status]/#[groovy:message.getSessionProperty('user')]='Active'"> 
```

请注意，自 Mule 3.3.0 以来，默认和推荐的表达式语言是[MEL](http://www.mulesoft.org/documentation/display/MULE3USER/Mule+Expression+Language)

# c# - 将数据库表映射到类

> ID：13237748
> 
> 赞同：1
> 
> 时间：2012-11-05T18:02:16.723
> 
> 标签：c#, asp.net, orm, mapping

我正在用 ASP.NET MVC2 编写一个应用程序。在我正在关注的注册教程中，作者提到将数据库表映射到我的`User`类，以便在用户通过验证检查后轻松插入用户，但他没有解释如何做到这一点。

这些是我`User`班级的属性：

```
public string Username { get; set; }
public string Email { get; set; }
public string Password { get; set; }
public string ConfirmPassword { get; set; } 
```

他们也有 DataAnnotation 验证。我还在名为的远程服务器（托管在我的大学）上创建了一个数据库表，`Users`其中包含以下字段：

```
Id
Username
Email
Password 
```

如何映射它们，然后轻松地将用户保存到数据库？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:05:39.237

你可以试试：

**[LINQ 到 SQL](http://msdn.microsoft.com/en-us/library/bb386976.aspx)**

LINQ to SQL 是 .NET Framework 3.5 版的一个组件，它提供了用于将关系数据作为对象进行管理的运行时基础结构。

**[编程指南](http://msdn.microsoft.com/en-us/library/bb399408.aspx)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:08:29.400

您可以使用一些众所周知的 ORM 解决方案。我会推荐[实体框架](http://www.asp.net/entity-framework)。[这个](http://www.codeproject.com/Articles/37932/Simple-Sample-with-Entity-Framework)代码项目示例是一个很好的起点

# .net - 在 .NET 中绘制节点网络，屏幕刷新太慢

> ID：13237752
> 
> 赞同：0
> 
> 时间：2012-11-05T18:02:28.133
> 
> 标签：.net, drawing, 2d

我正在尝试为节点网络的可视化表示创建一个 .NET 应用程序。节点是可以用鼠标拖动的 Drawing.Rectangle 实例，并使用 Graphics.DrawLine 建立连接。如下所示。

![网络](../Images/0a0939ed3365219bffe1f22235bf3c28.png)

为了避免在拖动矩形时重绘矩形而留下丑陋的火车，我在组件上调用 Graphics.Clear 并在每次调用 Mouse_Move 时重绘每个矩形和线条。但这会导致非常丑陋的闪烁效果，因为我认为它的调用速度不够快......

是否有一些 .NET 功能或更好的方法来重绘这个场景，使刷新看起来更流畅？

我的代码：

```
 private void NodesPanel_MouseMove(object sender, MouseEventArgs e)
    {
        if (MouseButtons.Left == e.Button)
        {

            if (currentlyClickedNode != null)
            {
                surface.Clear(Color.White);
                drawUnselectedNodes();
                drawConnections();

                if (!ClickedNodeGate) // Clicked on the node
                {
                    currentlyClickedNode.setPosition(e.X - QuestNode.NODE_WIDTH / 2, e.Y - QuestNode.NODE_HEIGHT / 2);
                    currentlyClickedNode.drawMe(surface, penl);
                }
                else // clicked on the gate
                {
                    drawingLine = true;
                    currentlyClickedNode.drawMe(surface, penl);
                    DrawingHelper.DrawLine(surface, penl, currentlyClickedNode.getGatePosition(), new Vector2D(e.X, e.Y));
                }
            }
        }
    } 
```

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:06:50.580

这是一个非常复杂的话题，实际上有成千上万种不同的方法可以做到这一点。您将不得不了解更多有关 Windows 图形和窗口子系统的信息。您可能想从[http://shop.oreilly.com/product/0790145369079.do开始](http://shop.oreilly.com/product/0790145369079.do)

# symfony - Symfony 2 app_dev.php 错误

> ID：13237755
> 
> 赞同：0
> 
> 时间：2012-11-05T18:02:38.600
> 
> 标签：symfony

当我使用其他计算机访问我的 app_dev.php 时出现错误。

**错误 1：**

> 注意：require(): 1\. h->opened_pa​​th=[null] h->filename=[/var/www/trunk/app/../vendor/symfony/src/Symfony/Component/ClassLoader/DebugUniversalClassLoader.php]在 /var/www/trunk/app/bootstrap.php.cache 第 1197 行

**错误 2：**

> 注意： require(): apc_cache_find [1182224] 在 /var/www/trunk/app/bootstrap.php.cache 第 1197 行

**错误 3：**

> 注意：require(): 1\. h->opened_pa​​th=[null] h->filename=[/var/www/trunk/app/../vendor/symfony/src/Symfony/Component/HttpKernel/Debug/ErrorHandler。 php] 在第 55 行的 /var/www/trunk/vendor/symfony/src/Symfony/Component/ClassLoader/DebugUniversalClassLoader.php

**错误 4：**

> 注意：require():apc_cache_find [1051245] in /var/www/trunk/vendor/symfony/src/Symfony/Component/ClassLoader/DebugUniversalClassLoader.php 第 55 行致命错误：未捕获的异常 'ErrorException' 和消息'

**错误 5：**

> 注意：require(): 1\. h->opened_pa​​th=[null] h->filename=[/var/www/trunk/app/../vendor/symfony/src/Symfony/Component/HttpKernel/Debug/ExceptionHandler。 php] 在 /var/www/trunk/vendor/symfony/src/Symfony/Component/ClassLoader/DebugUniversalClassLoader.php 第 55 行 /var/www/trunk/vendor/symfony/src/Symfony/Component/HttpKernel/Debug/错误处理程序.php:67

**堆栈跟踪 ：**

> **堆栈跟踪：#0** /var/www/trunk/vendor/symfony/src/Symfony/Component/ClassLoader/DebugUniversalClassLoader.php(55): Symfony\Component\HttpKernel\Debug\ErrorHandler->handle(8, 'require() : 1\. h...', '/var/www/trunk/...', 55, 数组)
> 
> **堆栈跟踪：#1** /var/www/trunk/vendor/symfony/src/Symfony/Component/ClassLoader/DebugUniversalClassLoader.php(55): Symfony\Component\ClassLoader\DebugUniversalClassLoader::loadClass()
> 
> **堆栈跟踪：#2** [内部函数]：Symfony\Component\ClassLoader\DebugUniversalClassLoader->loadClass('Symfony\Compone...')
> 
> **堆栈跟踪：#3** /var/www/trunk/app/bootstrap.php.cache(491): spl_autoload_call('Symfony\Compone...')
> 
> **堆栈跟踪：＃4** /var/www/trunk/ in /var/www/trunk/vendor/symfony/src/Symfony/Component/HttpKernel/Debug/ErrorHandler.php 第 67 行

在 config.php 上没问题，在 app.php 上报错 500

我该如何解决这个通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-09T13:18:33.247

尝试`composer install`并`app/console cache:clear`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-14T08:52:54.263

尝试这个

```
sudo rm -rf var/*
sudo chown -R username:www-data main-dir/
sudo chmod -R 777 var
sudo rm -rf vendor
composer install 
```

# sql-server - 如何将 G-WAN 连接到 SQL Server？

> ID：13237756
> 
> 赞同：0
> 
> 时间：2012-11-05T18:02:39.187
> 
> 标签：sql-server, g-wan

我有一个运行 G-WAN 和 CentOS 的 Web 服务器。我试图找出连接到 Microsoft SQL Sever 数据库的最佳方法。在这一点上，我最需要做的是从 G-WAN 处理程序进行简单插入，没什么特别的。

有人对此有经验吗？

我的语言偏好是 C#，尽管 C++ 或 C 也可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:59:28.733

我没有使用 MS-SQL 服务器的经验，但我想您必须使用“连接器”（可能是 OBDC 客户端库）。

为此目的存在几个 Linux 库。

除此之外，这里有几个建议：

1) C# 在 G-WAN v3.9+ 中可用

2) 如果您的 C# 代码在没有 G-WAN 的情况下工作，那么它也可以在从 G-WAN 执行时工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:25:35.977

我看到了 libsdb C 库[http://siag.nu/libsdb/](http://siag.nu/libsdb/)（但没有尝试过）。

支持的数据库：

Gdbm、Ingres、Lago、 **Microsoft SQL**、Mimer、MiniSQL、Mysql、Sqlite 版本 2 和 3、Postgresql、Oracle、Shsql/quisp、Sybase、Text（内置明文引擎）

# java - 在 SwingWorker 中渲染游戏地图的 Java 无法正常工作

> ID：13237757
> 
> 赞同：1
> 
> 时间：2012-11-05T18:02:45.053
> 
> 标签：java, multithreading, user-interface, rendering, swingworker

我目前正在开发一款游戏，它需要在 JPanel（或其他容器）上绘制类似网格的地图。为了在合理的时间内实现这一点并保持我的 UI 响应，我将容器的图形对象传递给一个地图渲染器，它是 SwingWorker 的子类。然后我调用地图渲染器的执行方法，它开始实际绘制地图。绘图完成后会打印一条消息。这一切都是在我按下 M 键时开始的。

实际的问题是，绘制地图只是第一次成功。当我反复按 M 键时，我再也没有收到任何其他完成的消息。此外，当我 ALT-TAB 退出我的应用程序（以全屏独占模式运行）并重新进入时，我的地图不再可见。

我怀疑问题出在没有直接在 EDT 线程中绘制或没有正确传递我的地图渲染器已准备好。

这是我的地图渲染器类：

```
 public class MapRenderer extends SwingWorker<Void, Void> {

private Graphics2D g;
private WorldMap map;
private int x, y, w, h, l;

@Override
protected Void doInBackground() throws Exception {
    drawMap();
    return null;
}

@Override
protected void done() {
    super.done();
    System.out.println("Done");
}

private void drawMap() {
    int rw = w + 1;
    int rh = h + 1;

    if (rw >= map.getSize())
        rw = map.getSize();
    if (rh >= map.getSize())
        rh = map.getSize();

    for (int i = 0; i < rw; i++) {
        for (int j = 0; j < rh; j++) {
            g.setColor(map.getTiles()[x + i][y + j].getColor());
            g.fillRect(i * l, j * l, l, l);
            if (l > 2) {
                g.setColor(Color.DARK_GRAY);
                g.drawRect(i * l, j * l, l, l); 
            }
        }
    }
}

public void setGraphics(Graphics2D g) {
    this.g = g;
}

public void setMap(WorldMap map) {
    this.map = map;
}

public void setViewPoint(Rectangle viewPoint, int squareSize) {
    this.x = (int) viewPoint.getX();
    this.y = (int) viewPoint.getY();
    this.w = (int) viewPoint.getWidth();
    this.h = (int) viewPoint.getHeight();
    this.l = squareSize;
}
    } 
```

这是调用 execute() 方法的地方：

```
private void initializeKeyBindings() { 
    this.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("M"), "M");
    this.getActionMap().put("M", new AbstractAction() {
        private static final long serialVersionUID = 1L;
        @Override
        public void actionPerformed(ActionEvent e) {
            drawMap(getGraphics());
        }
    });
}

public void drawMap(Graphics g) {
    mapRenderer.setGraphics((Graphics2D) g);
    mapRenderer.setViewPoint(new Rectangle(0, 0, 1600 / 4, 900 / 4), 4);
    mapRenderer.execute();
} 
```

对于任何草率的编码，我深表歉意，我保证将来会清理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:35:27.610

实现 SwingWorker 的类的一个实例只能运行一次。因此，您应该在每次执行代码时创建一个新实例。从您提供的代码来看，您似乎使用的是同一个实例。因此它会第一次工作，但不能连续调用：

```
public void drawMap(Graphics g) {
    mapRenderer.setGraphics((Graphics2D) g);
    mapRenderer.setViewPoint(new Rectangle(0, 0, 1600 / 4, 900 / 4), 4);
    mapRenderer.execute();
} 
```

# css - 菜单栏项目不占用相同的宽度 (HTML/CSS)

> ID：13237765
> 
> 赞同：1
> 
> 时间：2012-11-05T18:03:15.103
> 
> 标签：css, html, position

**目标：**我希望菜单项彼此占用相同的空间。拉伸显示空间时，我不希望菜单项折叠到自己的行。相反，我希望他们越来越靠近。

* * *

**尝试1：**

```
<!DOCTYPE html>
<head>
    <meta charset="utf-8">
</head>

<style>
    #container{
        width: 100%;
    }

    #navigation{
        width: 100%;
        background: #333;
        display: table;
    }
    #navigation ul{
        margin:0px auto;
        padding: 0 0 0 0;
        display: table-row;

    }
    #navigation li{
        list-style-type: none;
        display: inline;
        display: table-cell;
    }
    #navigation li a{
        float: left;
        /*padding: 5px 10.2%;*/
        padding: 5px;
        color: #FFFFFF;
        text-decoration: none;
        text-align: center;
    }
    #navigation li a:hover{ 
        background: #1C5EC2; 
    }
</style>

</head>
<body>
    <div id="container">
        <div id="navigation">
            <ul>
                <li><a href="#" alt="Home"        >Home</a>        </li>
                <li><a href="#" alt="Games"       >Games</a>       </li>
                <li><a href="#" alt="High Scores" >High Scores</a> </li>
                <li><a href="#" alt="Contact Us"  >Contact Us</a>  </li>
            </ul>
        </div>
    </div>
</body>
</html> 
```

尽管这些项目都水平放置在一起，但它们的间距并不相等。此外，突出显示它们不会像我想要的那样遮蔽那么宽的区域。

* * *

**尝试2：**

```
<!DOCTYPE html>
<head>
    <meta charset="utf-8">
</head>

<style>
    #container{
        width: 100%;
    }

    #navigation{
        float: left;
        width: 100%;
        background: #333;
    }
    #navigation ul{
        margin: 0;
        padding: 0;
    }
    #navigation ul li{
        list-style-type: none;
        display: inline;
    }
    #navigation li a{
        display: inline;
        float: left;
        padding: 5px 10.3%;
        color: #FFFFFF;
        text-decoration: none;
    }
    #navigation li a:hover { background: #1C5EC2; }
</style>

</head>
<body>
    <div id="container">
        <div id="navigation">
            <ul>
                <li><a href="#" alt="Home"        >Home</a>        </li>
                <li><a href="#" alt="Games"       >Games</a>       </li>
                <li><a href="#" alt="High Scores" >High Scores</a> </li>
                <li><a href="#" alt="Contact Us"  >Contact Us</a>  </li>
            </ul>
        </div>
    </div>
</body>
</html> 
```

这个例子几乎正是我想要的。关于这一点的一切都是正确的，除了将显示尺寸拉伸得更小会将菜单项放在其他项目下方的一行上。

* * *

我怎样才能采取第一次尝试的非包装行为，并将其应用于我的第二次尝试？我的目标是有一个不包装菜单项的第二次尝试的工作实现。

*注意：我涉及到单独的 CSS 文件和 html，但我只包含了我认为解决问题所需的内容。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T18:34:26.010

在这里 - 我做了一个小提琴。这是你想要的？ [关联](http://jsfiddle.net/5mErT/18/)

我已经更改了您的`li`和`a`元素的 CSS：

```
#navigation ul li {

    list-style-type: none;
    float: left;
    width: 25%;    
    text-align: center;
}

#navigation li a {

    color: #FFFFFF;
    text-decoration: none;
    padding: 5px 0px;
    display: block;    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-31T05:05:02.427

感谢[oksushi](https://gist.github.com/oksushi/3754361/)，这将无需设置宽度且末尾没有额外空间即可完成：

## [http://jsfiddle.net/VBcUM/](http://jsfiddle.net/VBcUM/)

## HTML

```
<ul>
  <li><a href="#">Lorem ipsum</a></li>
  <li><a href="#">Dolor</a></li>
  <li><a href="#">Sit</a></li>
  <li><a href="#">Amet</a></li>
  <li><a href="#">Consectetur</a></li>
  <li><a href="#">Adipiscing</a></li>
</ul> 
```

## CSS

```
ul {
  padding: 0;
  display: table;
  width: 100%;
  table-layout: fixed;
}
li {
  display: table-cell;
}
a {
  display: block;
  padding: 1em;
  text-align: center;
  background: white;
}
a:hover {
  background: lime;
} 
```

# wcf - WCF ChannelFactory IDuplexSessionChannel

> ID：13237766
> 
> 赞同：2
> 
> 时间：2012-11-05T18:03:16.333
> 
> 标签：wcf, channel, channelfactory

我正在使用 a`ChannelFactory`通过发送原始肥皂请求与外部服务进行通信。我有一个使用`IDuplexSessionChannel`. 我尝试创建一个`IRequestChannel/IRequestSessionChannel`using `binding.BuildChannelFactory<T>()`，但这不起作用（抛出异常）。从我在线阅读的内容来看，双工通道可以像请求通道一样使用，您可以在其中调用服务方法并立即获得响应。我想知道下面的代码是否实现了这一点。`ChannelFactory`我到处搜索以查看and的示例`IDuplexSessionChannel`，但找不到任何东西。最后，如果这是一个 IDuplexChannel 而不是 IDuplexSessionChannel，那么实现会有什么不同，因为一个是会话的，另一个不是？

```
IChannelFactory factory;
IChannel        channel;

Binding         binding = GetBindingFromConfig( bindingName );
EndpointAddress address = new EndpointAddress( endpointAddress );

if( binding.CanBuildChannelFactory<IDuplexSessionChannel>() )
{
    factory = binding.BuildChannelFactory<IDuplexSessionChannel>();
    factory.Open();
    channel = ( (IChannelFactory<IDuplexSessionChannel>)factory ).CreateChannel( address );
    channel.Open();

    ( (IDuplexSessionChannel)channel ).Send( requestMessage );
    ( (IDuplexSessionChannel)channel ).TryReceive( Timespan.MaxValue, out responseMessage );
} 
```

这是我的配置文件：

```
<netTcpBinding>
    <binding
        name="xyz"
        closeTimeout="00:01:00"
        openTimeout="00:01:00"
        receiveTimeout="00:10:00"
        sendTimeout="00:01:00"
        transactionFlow="false"
        transferMode="Buffered"
        transactionProtocol="OleTransactions"
        hostNameComparisonMode="StrongWildcard"
        listenBacklog="10"
        maxBufferPoolSize="524288"
        maxBufferSize="10485760"
        maxConnections="10"
        maxReceivedMessageSize="10485760">

        <readerQuotas
            maxDepth="32"
            maxStringContentLength="8192"
            maxArrayLength="10485760"
            maxBytesPerRead="4096"
            maxNameTableCharCount="16384" />

        <reliableSession
            ordered="true"
            inactivityTimeout="00:10:00"
            enabled="false" />

        <security mode="Transport" />
    </binding>
</netTcpBinding> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:14:36.107

我找到了解决问题的方法，这里是：

```
ChannelFactory<IRequestChannel> factory;
IRequestChannel                 channel;

Binding         binding = GetBindingFromConfig( bindingName );
EndpointAddress address = new EndpointAddress( endpointAddress );

factory = new ChannelFactory<IRequestChannel>( binding, address );

// Since this endpoint uses sessions, we have to allow sessions to prevent an exception.
factory.Endpoint.Contract.SessionMode = SessionMode.Allowed;

factory.Open();
channel = factory.CreateChannel( address );
channel.Open();

responseMessage = channel.Request( requestMessage ); 
```

学分：http: [//blogs.msdn.com/b/drnick/archive/2007/06/25/changeing-the-channelfactory-contract.aspx](http://blogs.msdn.com/b/drnick/archive/2007/06/25/changing-the-channelfactory-contract.aspx)

# javascript - Math.random() 和 Math.floor() 为什么要一起使用？

> ID：13237774
> 
> 赞同：-4
> 
> 时间：2012-11-05T18:03:42.963
> 
> 标签：javascript, function

生成的数字是否可能在 30 到 90 之间。或者它只是在 0 到 n 之间生成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:04:53.937

生成 0 到 60 之间的数字（您似乎知道它是如何工作的），然后添加 30。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:05:32.467

```
// Returns a random integer between min and max
// Using Math.round() will give you a non-uniform distribution!
function getRandomInt(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
} 
```

来自[Mozilla 开发者网络](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/random)

# java - DL 查询和 OWL

> ID：13237777
> 
> 赞同：0
> 
> 时间：2012-11-05T18:03:57.797
> 
> 标签：java, ontology, owl, protege, dlquery

我在 protege 中创建了一个本体。

我有一个名为AlcoholicBeverage 的类，在这个类下有子类Beer、Wine。这些子类是不相交的。

我有一个名为 Person 的类（没有子类）。另一个名为 Behavior 的类有两个子类“PositiveChange”和“NegativeChange”。

我有一个对象属性“使用”，其中包含两个子属性“饮用”和“消费”。“使用”属性的域是 Person 类，范围是 AlcoholicBeverage 类。

NegativeChange 类具有用“使用一些酒精饮料”的声明指示的超类。

当我编写诸如“使用一些啤酒”或“喝一些啤酒”或“喝一些啤酒”之类的 DL 查询时，它应该将其归类为 NegativeChange，但事实并非如此。但是，它只在我写“使用一些酒精饮料”时进行分类，这与酒精饮料超类部分中的定义完全相同。它不考虑类或对象继承。我希望它应该将 Beer 归类为酒精饮料或将“消费”对象属性归类为“使用”对象属性。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:03:05.060

根据您制定的查询，您似乎想要检索*正在使用酒精的人*。

使用您当前的构造，由于*using*对象属性的域，Behavior 类首先被“错误地”归类为 Person。*此外，您应该使用一些 AlcoholicBeverage*将匿名表达式声明为**等效**于 NegativeChange 类，而不是像现在这样的超类。*使用一些啤酒*或*喝一些葡萄酒*的查询将被正确分类在 NegativeChange 下。

检索酒精消费者的语义正确解决方案是创建一个名为 AlcoholConsumer 的类，它是 Person 的子类。酒精消费者的等效定义是*使用一些酒精*饮料。使用[Brain](http://loopasam.github.com/Brain/)实现：

```
public static void main(String[] args) throws BrainException {
    //Declare all the axioms
    Brain brain = new Brain();
    brain.addClass("AlcoholicBeverage");
    brain.addClass("Beer");
    brain.subClassOf("Beer", "AlcoholicBeverage");
    brain.addClass("Wine");
    brain.subClassOf("Wine", "AlcoholicBeverage");
    brain.addClass("Person");
    brain.addObjectProperty("using");
    brain.addObjectProperty("drinking");
    brain.subPropertyOf("drinking", "using");
    brain.addObjectProperty("consuming");
    brain.subPropertyOf("consuming", "using");

    brain.addClass("AlcoholConsumer");
    brain.subClassOf("AlcoholConsumer", "Person");
    brain.equivalentClasses("AlcoholConsumer", "using some AlcoholicBeverage");

    //Add the queries
    brain.addClass("Query1");
    brain.equivalentClasses("Query1", "using some Beer");

    brain.addClass("Query2");
    brain.equivalentClasses("Query2", "drinking some Beer");

    brain.addClass("Query3");
    brain.equivalentClasses("Query3", "consuming some Wine");

    List<String> subClasses = brain.getSubClasses("AlcoholConsumer", false);
    //Should list all the queries
    System.out.println(subClasses);

   brain.sleep();
   brain.save("/home/samuel/Desktop/so.owl");
} 
```

# css - Safari 在使用 @media (width/height/background-size) 缩放时不会正确计算 rem 单位

> ID：13237782
> 
> 赞同：12
> 
> 时间：2012-11-05T18:04:13.647
> 
> 标签：css, safari, media-queries, font-size, dimensions

在 css 中使用 rem 作为单位时，缩放在 Safari（PC 和 Mac）中实际上不起作用。

示例位于[http://jsfiddle.net/L25Pz/3/](http://jsfiddle.net/L25Pz/3/)

标记：

```
<div>
    <img src="http://www.google.com/images/srpr/logo3w.png" />
    <p>Lorem ipsum dolor sit amet</p>
</div> 
```

​ CSS：

```
html { font-size:62.5% }

div { background:url(http://www.google.com/images/srpr/logo3w.png); background-size:275px 95px; background-size:27.5rem 9.5rem; background-repeat:no-repeat; }
img { width:27.5rem; height:9.5rem; }
p { font-size:5rem; }

@media only screen and (max-width: 500px) {
    html { font-size:50%;} /* should render everything * 0.8 */
} 
```

​ ​ ... 当浏览器窗口宽于 600 像素时，会以 275 像素 * 95 像素的大小呈现图像 - 在所有浏览器中。此外，当触发媒体查询时，图像和背景将其宽度和高度调整为 220px * 76px。

但是 - 使用 Safari，宽度和高度设置为 247px * 75px。这不是* 0.8，它是别的东西......

另一方面，段落的字体大小正确呈现：40px 连接查询时。

如果你问我，那就太奇怪了。有人有解决方案吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-07T09:16:03.483

您需要设置`-webkit-text-size-adjust`为`none`，否则 webkit 会将字体大小放大到可读大小：

```
@media only screen and (max-width: 500px) {
    html { font-size:50%; -webkit-text-size-adjust:none; }  /* should render everything * 0.8 */  
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-11-29T22:36:01.600

我通过改变像素百分比解决了这个问题

```
 @media (max-width: 96em) {
     html {
        font-size: 8px;
        }
     } 
```

浏览器使用**16px**的标准字体大小。当我们使用*rem*进行适配时，为了计算简单我们指定字体大小为16px的62.5%，即1em = 10px。当我们适应其他分辨率时，我们会按比例改变这个值。例如，对于 1280px 的分辨率，它将是

1920/1280=1.5、62.5/1.5=41.667(%)。

在 1440 像素 - 62.5/(1920/1440)=46.875(%)。

除了 Safari 之外的所有浏览器都知道在媒体查询中字体大小被指定为百分比。我通过将百分比转换为像素解决了这个问题。

1280：41,667% * 16 像素 = 6.66672 像素

1440：16 * 0,46875 = 7,5。

等等。

# image - 在博客上添加 svg 图像作为标题

> ID：13237784
> 
> 赞同：2
> 
> 时间：2012-11-05T18:04:22.077
> 
> 标签：image, header, svg, blogger

我是一个完整的菜鸟。我在 illustrator 上设计了一个 svg 图像。如何将其作为标题放在博客上？看到网上有关于代码的教程，但是不知道在html编辑器的哪里粘贴代码，也不知道怎么把我的svg文件变成代码——然后粘贴到html编辑器上。任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:03:47.900

要获取 svg 图像的代码，只需使用任何文本编辑器打开它并复制其中的所有内容。

# maven - Nexus Repo 使用 Maven 提供 503，但不使用浏览器

> ID：13237785
> 
> 赞同：12
> 
> 时间：2012-11-05T18:04:25.940
> 
> 标签：maven, nexus

我刚刚在远程服务器上创建了一个 Nexus 存储库。如果我访问本地计算机上的浏览器，我可以看到 pom 文件。但是，当我尝试 mvn clean compile 时，我看到...

```
http://server:8081/nexus/content/repositories/thirdparty/com/class/module/1.0.0/module-1.0.0.pom. Return code is: 503, ReasonPhrase:Service Unavailable. -> 
```

我知道 503 意味着它无法获得服务，但这让我很震惊，因为我在浏览器中看到它很好。

我在我的 settings.xml 中配置了代理，如果我删除对第三方依赖项的引用，我会很好地得到中央部门。

有任何想法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-06T14:07:19.793

问题与代理有关...

当我在我的 Settings.xml 中配置代理时，它对外部站点非常有效，但是，它搞砸了内部站点（例如我的 nexus 存储库）。因此，我从我的 settings.xml 中删除了代理，将其添加到我的 nexus 服务器，然后将中央存储库镜像到我的中央存储库的 nexus 版本。

现在一切都按预期工作......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-21T19:52:57.923

问题在于您的代理设置。当前设置将导致对 localhost 的所有请求都通过代理，该代理将无法与 localhost 连接，因此返回 503。

要解决此问题，请将以下内容添加到 settings.xml 文件中的代理设置：
localhost

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-05T12:03:14.270

我发现当我没有配置代理时会发生这种情况。如果我添加了一个损坏的代理配置，它排除了我真正访问的所有内容，它就可以工作。

```
<proxies>
    <proxy>
        <active>true</active>
        <protocol>http</protocol>
        <host>broken.com</host>
        <port>3128</port>
        <nonProxyHosts>mymaven|myotherrepo:8080|foo|baa</nonProxyHosts>
    </proxy>
</proxies> 
```

大概 maven 正在从某个地方获取默认代理配置，但我还没有找到在哪里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-16T11:11:51.277

是的，在我的情况下，这是代理问题。如果你使用 gradle，你可以用 systemProp.http.nonProxyHosts=192.168.* 设置 gradle.properties 文件，当目标 ip 是那个时。可以解决它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-14T06:05:13.767

我为这个问题苦苦挣扎了很久。尝试了这个问题的两个答案，还尝试了我在互联网上可以找到的所有其他内容，但无济于事。

然后我更改了`distributionManagement`pom.xml 部分中的 URL。我使用了我的 PC 名称而不是“localhost”。

如：mypcname:8081/blahblah 而不是 localhost:8081/blahblah

它开始奇迹般地工作。

# python - 在 python-2.7 的 sqlite3 的嵌套循环中使用多个游标

> ID：13237788
> 
> 赞同：20
> 
> 时间：2012-11-05T18:04:32.667
> 
> 标签：python, sqlite, python-2.7

我在嵌套循环中的单个 sqlite 数据库上使用多个游标时遇到问题。我找到了一个适合我的解决方案，但它是有限的，而且我还没有看到在线记录这个特定问题。我发布这个是这样的：

*   有明确的问题/解决方案可用
*   看看有没有更好的解决方案
*   也许我在`sqlite3`python 模块中发现了一个缺陷

我的 Python 应用程序将社交关系数据存储在 sqlite 中。数据集包括两个表之间的一对多关系：myConnections 和 sharedConnections。前者每个连接都有一行。sharedConnections 表有 0:N 行，具体取决于共享的连接数。为了构建结构，我使用了嵌套循环。在外部循环中，我访问 myConnections 中的每一行。在内部循环中，我填充了 sharedConnections 表。代码如下所示：

```
curOuter = db.cursor()  
for row in curOuter.execute('SELECT * FROM myConnections'):    
    id  = row[0]  
    curInner = db.cursor()  
    scList = retrieve_shared_connections(id)  
    for sc in scList:  
        curInner.execute('''INSERT INTO sharedConnections(IdConnectedToMe, IdShared) VALUES (?,?)''', (id,sc))  
db.commit() 
```

结果很奇怪。该`sharedConnections`表在 中获取前两条记录的重复条目`myConnections`。他们有点整理。A 的连接，B 的连接，然后是 A，然后是 B。初步结结巴巴后，处理正确！例子：

```
myConnections
-------------
a   
b  
c  
d  

sharedConnections
-------------
a->b  
a->c  
b->c  
b->d  
a->b  
a->c  
b->c  
b->d 
```

解决方案不完善。不是使用来自外部循环游标的迭代器，而是 I `SELECT`，然后`fetchall()`遍历结果列表。由于我的数据集很小，这没关系。

```
curOuter = db.cursor()
curOuter.execute('SELECT * FROM myConnections'):
rows = curOuter.fetchall()
for row in rows:    
    id  = row[0]
    curInner = db.cursor()
    scList = retrieve_shared_connections(id)
    for sc in scList:
        curInner.execute('''INSERT INTO sharedConnections(IdConnectedToMe, IdShared) VALUES (?,?)''', (id,sc))
db.commit() 
```

你有它。在嵌套循环中对同一个 sqlite 数据库中的不同表使用两个游标似乎不起作用。更重要的是，它不会失败，它只会给出奇怪的结果。

*   这真的是最好的解决方案吗？
*   有更好的解决方案吗？
*   这是一个应该解决的缺陷吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-12-03T21:08:31.447

这看起来像您遇到[问题 10513](http://bugs.python.org/issue10513)，已在 Python 2.7.13、3.5.3 和 3.6.0b1 中修复。

处理事务的方式存在错误，在某些情况下会重置**所有游标状态。**这导致重新`curOuter`从头开始。

解决方法是升级，或者在您可以升级之前，不要在事务提交中使用游标。通过使用`curOuter.fetchall()`你实现了后者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T20:56:10.990

您可以建立一个行列表以插入内部循环，然后在循环外建立 cursor.executemany() 。这不能回答多光标问题，但可能是您的解决方法。

```
curOuter = db.cursor()
rows=[]
for row in curOuter.execute('SELECT * FROM myConnections'):    
    id  = row[0]    
    scList = retrieve_shared_connections(id)  
    for sc in scList:

        rows.append((id,sc))
curOuter.executemany('''INSERT INTO sharedConnections(IdConnectedToMe, IdShared) VALUES (?,?)''', rows)  
db.commit() 
```

更好的是只从 myConnections 中选择 ID：

```
curOuter.execute('SELECT id FROM myConnections') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-01T23:07:08.290

虽然构建内存列表似乎是最好的解决方案，但我发现使用显式事务可以减少外部查询中返回的重复次数。这将使它类似于：

```
with db:
    curOuter = db.cursor()
    for row in curOuter.execute('SELECT * FROM myConnections'):    
        id  = row[0]
        with db:
            curInner = db.cursor()  
            scList = retrieve_shared_connections(id)  
            for sc in scList:  
                curInner.execute('''INSERT INTO sharedConnections(IdConnectedToMe, IdShared) VALUES (?,?)''', (id,sc)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-08T16:31:07.453

这有点老了，我明白了。但是当偶然发现这个问题时，我想知道 sqlite3 在 python-2.7 中是否仍然存在这样的问题。让我们来看看：

```
#!/usr/bin/python
import sqlite3
import argparse
from datetime import datetime

DBFILE = 'nested.sqlite'
MAX_A = 1000
MAX_B = 10000

parser = argparse.ArgumentParser(description='Nested SQLite cursors in Python')
parser.add_argument('step', type=int)
args = parser.parse_args()

connection = sqlite3.connect(DBFILE)
connection.row_factory = sqlite3.Row
t0 = datetime.now()

if args.step == 0:
    # set up test database
    cursor = connection.cursor()
    cursor.execute("""DROP TABLE IF EXISTS A""")
    cursor.execute("""DROP TABLE IF EXISTS B""")
    # intentionally omitting primary keys
    cursor.execute("""CREATE TABLE A ( K INTEGER )""")
    cursor.execute("""CREATE TABLE B ( K INTEGER, L INTEGER )""")
    cursor.executemany("""INSERT INTO A ( K ) VALUES ( ? )""", 
        [ (i,) for i in range(0, MAX_A) ])
    connection.commit()
    for row in cursor.execute("""SELECT COUNT(*) CNT FROM A"""):
        print row['CNT']

if args.step == 1:
    # do the nested SELECT and INSERT
    read = connection.cursor()
    write = connection.cursor()
    for row in read.execute("""SELECT * FROM A"""):
        bs = [ ( row['K'], i ) for i in range(0, MAX_B) ]
        for b in bs: # with .executemany() it would be twice as fast ;)
            write.execute("""INSERT INTO B ( K, L ) VALUES ( ?, ? )""", b)
    connection.commit()
    for row in connection.cursor().execute("""SELECT COUNT(*) CNT FROM B"""):
        print row['CNT']

elif args.step == 2:
    connection = sqlite3.connect(DBFILE)
    connection.row_factory = sqlite3.Row
    control = connection.cursor()
    ca = cb = 0 # will count along our expectation
    for row in control.execute("""SELECT * FROM B ORDER BY K ASC, L ASC"""):
        assert row['K'] == ca and row['L'] == cb
        cb += 1
        if cb == MAX_B:
            cb = 0
            ca += 1
    assert ca == MAX_A and cb == 0
    for row in connection.cursor().execute("""SELECT COUNT(*) CNT FROM B"""):
        print row['CNT']

print datetime.now() - t0 
```

输出是

```
$ ./nested.py 0
1000
0:00:04.465695
$ ./nested.py 1
10000000
0:00:27.726074
$ ./nested.py 2
10000000
0:00:19.137563 
```

该测试是使用

```
$ python
Python 2.7.6 (default, Jun 22 2015, 17:58:13) [GCC 4.8.2] on linux2
>>> import sqlite3
>>> sqlite3.version
'2.6.0'
>>> sqlite3.sqlite_version
'3.8.2' 
```

当我们`commit`在包中时情况会发生变化，例如通过缩进`connection.commit()`上述测试脚本的第 1 步。这种行为很奇怪，因为只有光标的*第二个* `commit`会`write`重置`read`光标，完全如 OP 中所示。在摆弄了上面的代码之后，我假设 OP 没有*像*`commit`示例代码中所示那样做，而是在`commit`包中做了。

[备注：如另一个问题的答案](https://stackoverflow.com/a/21995787/3991164)中所建议的那样，从单独的连接中绘制游标`read`并支持 packaged不起作用，因为s 将针对外部锁运行。`write``commit``commit`

# android - 在 xml 文件 Android 中引用其他项目

> ID：13237794
> 
> 赞同：0
> 
> 时间：2012-11-05T18:05:09.987
> 
> 标签：android

我在我的 Eclipse 工作区中导入了一个 android 项目，但我看到它的 xml 文件中有以下代码：

```
../../../SalesforceSDK/res/values/sdk.xml 
```

所以我`SalesforceSDK`也在同一个工作区中导入了项目。我仍然无法构建我的项目。当我在 xml 中更改某些内容（删除一些 ../）文件时，eclipse 显示红色错误标记。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:11:54.930

如果它在同一个工作区中......就像......SalesforceSDK和YourProject在同一个文件夹中......您对SalesforceSDK的引用应该看起来像

`android.library.reference.1=..\\SalesforceSDK`

在 project.properties ..

您应该只在 Eclipse 中进行设置（右键单击项目属性 -> Android -> 单击库下的“添加”.. 然后选择您的 SalesforceSDK），而不是手动编辑 XML 文件

# java - 如何在不使用微控制器的情况下使用 Java/.net/c 旋转电机

> ID：13237797
> 
> 赞同：0
> 
> 时间：2012-11-05T18:05:19.403
> 
> 标签：java, c++, c, rotation, using

如何在不使用微控制器的情况下使用 Java/.net/c 旋转电机？我知道 Java/.net/c/c++ 中的编程，但我不知道使用端口通信的端口和旋转电机。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:14:39.090

有一种方法可以做到这一点（没有任何其他微控制器）。简单的方法是使用`speaker and/or mic ports`which use `simple dc voltage control`。但是您需要通过您编写的程序控制音量。使用其中一个扬声器`output signal`驱动电机，然后将麦克风提供`feedback`给计算机。希望这会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T18:13:25.077

你怎么把电机和电脑连接起来？如果它使用 USB 连接，那么可能你必须编写驱动程序软件。或者您可以在可能必须使用微控制器的情况下使用串行通信。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T18:14:19.140

首先，这取决于您使用的电机类型（交流电、直流电和步进电机）以及您与电机的接口方式。您将需要在您正在编程的控制器和电机本身之间进行某种电源控制（H 桥是最常见的一种）。此控制器的要求将限制您可以执行的操作。

在最简单的情况下，您可以将比特流写入连接到电机的功率放大器的 DAC（数模转换器）。

任何比这更复杂的东西，您都需要微型或模拟驱动器电路。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T18:14:56.030

如果您的计算机上有一个并行端口，您可以使用它来控制例如步进电机（并且您可以使用诸如 RXTX 之类的库通过 Java 来控制它），但您仍然需要外部硬件作为电源，否则您可能烧掉你的主板。

# macos - org.apache.httpd：已经加载

> ID：13237799
> 
> 赞同：15
> 
> 时间：2012-11-05T18:05:25.240
> 
> 标签：macos, apache

我对apache有这个奇怪的问题：

```
$ apachectl configtest

Syntax OK 
```

配置没问题，在一分钟前它实际上还在工作，在我关闭它之前。

```
$ sudo apachectl start
org.apache.httpd: Already loaded 
```

不，这不对：

```
$ ps ax | grep httpd
58204 s000  R+     0:00.00 grep httpd 
```

让我们试着阻止它：

```
$ sudo apachectl stop 
```

好像停了对吧？让我们尝试重新启动它：

```
$ sudo apachectl start
$ sudo apachectl start
org.apache.httpd: Already loaded 
```

所以它必须在运行，但它不在`ps ax`，它根本不起作用。

```
$ sudo apachectl stop
$ sudo apachectl stop
launchctl: Error unloading: org.apache.httpd 
```

试图从自动启动中删除它：

```
$ sudo launchctl unload -w /System/Library/LaunchDaemons/org.apache.httpd.plist
$ sudo launchctl unload -w /System/Library/LaunchDaemons/org.apache.httpd.plist
launchctl: Error unloading: org.apache.httpd 
```

但是当我尝试启动它时它是一样的，它假装它启动但它没有。错误日志中也没有任何内容。帮助！

OS X 10.8.2 山狮

**更新：**

重启后：

```
$ sudo apachectl start
Password:
org.apache.httpd: Already loaded

$ sudo launchctl load -w /System/Library/LaunchDaemons/org.apache.httpd.plist
org.apache.httpd: Already loaded

$ ps ax | grep httpd
7300 s000  R+     0:00.00 grep httpd 
```

所以我现在实际上没有网络服务器。

**解决方案：**

经过研究，`org.apache.httpd.plist`我发现 apache 是由一个 ruby​​ 脚本控制的，该脚本`/usr/sbin/http-wrapper`运行时出现了一些问题，因为我已经更换了系统 ruby​​ 解释器。这为我修复了它：

```
ln -s /System/Library/Frameworks/Ruby.framework/Versions/Current/usr/bin/ruby /usr/bin/ruby 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T22:05:58.343

手动运行服务器并修复报告的错误：

```
root#> /usr/sbin/httpd -k start 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-01T03:04:01.800

我的解决方法是在 httpd.conf 中关闭“...apache_access_log combine”。

我今天粗鲁地面临着同样的小挫折，尽管就像 glasnhos-，没有红宝石包装。@glasnhost，你事后的想法告诉了我.. 当天早些时候，我在 apache httpd.conf 周围使用工具，玩弄日志。我已经打开了这两条*几乎相同*的行中的第二条（带引号和不带引号；注意一个有扩展名`.log`；而另一个是下划线`_log`）。

```
 # CustomLog "/Applications/MAMP/logs/apache_access.log" combined
       CustomLog /Applications/MAMP/logs/apache_access_log combined 
```

同样，奇怪的是，这个问题直到几个小时后才吓到我的系统。多亏了这个线程，我的系统恢复了健康！*没有上升的信心..*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T21:22:13.557

阅读这篇文章和尼克在 11 月 5 日的回复，我尝试以 root 用户身份在终端运行 /usr/sbin/http-wrapper。我收到了这个输出

```
titanium:~ root# /usr/sbin/httpd-wrapper
(2)No such file or directory: httpd: could not open error log file /private/var/log/apache2/error_log.
Unable to open logs
titanium:~ root# 
```

然后我检查了 /private/var/log/apache2 文件夹不存在。我创建了它并为每个人设置了权利。

```
titanium:log root# mkdir /private/var/log/apache2      
titanium:log root# chmod 777 /private/var/log/apache2/
titanium:log root# 
```

这个对我有用！
注意：如果您关心安全性，请给 /private/var/log/apache2 而不是 777 提供更受限制的权限。

# sql - 平均超过难以定义的分区

> ID：13237801
> 
> 赞同：5
> 
> 时间：2012-11-05T18:05:32.350
> 
> 标签：sql, postgresql, null, aggregate-functions, window-functions

我有这张桌子：

```
create table t (value int, dt date);

 value |     dt     
-------+------------
    10 | 2012-10-30
    15 | 2012-10-29
  null | 2012-10-28
  null | 2012-10-27
     7 | 2012-10-26 
```

我想要这个输出：

```
 value |     dt     
-------+------------
    10 | 2012-10-30
     5 | 2012-10-29
     5 | 2012-10-28
     5 | 2012-10-27
     7 | 2012-10-26 
```

当表格按日期降序排序时，我希望将空值以及前一个非空值替换为前一个非空值的平均值。在此示例中，值 15 是接下来两个空值的前一个非空值。所以 15 / 3 = 5。

[SQL小提琴](http://www.sqlfiddle.com/#!12/6a0c7/1)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T19:12:29.593

我发现了一个非常简单的解决方案：

```
SELECT max(value) OVER (PARTITION BY grp)
      / count(*)  OVER (PARTITION BY grp) AS value
      ,dt
FROM   (
   SELECT *, count(value) OVER (ORDER BY dt DESC) AS grp
   FROM   t
   ) a; 
```

[**-> sqlfiddle**](http://www.sqlfiddle.com/#!12/6a0c7/2)

由于`count()`忽略`NULL`值，您可以使用运行计数（窗口函数中的默认值）快速分组值（-> `grp`）。

每个组都有*一个*非空值，因此我们可以使用 min / max / sum 在另一个窗口函数中得到相同的结果。除以成员的数量（`count(*)`这次是计算`NULL`值！），`grp`我们就完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T18:34:14.670

作为一个谜，这是一个解决方案......实际上它可能会根据您的数据的性质而表现得非常糟糕。无论如何，请注意您的索引：

```
create database tmp;
create table t (value float, dt date); -- if you use int, you need to care about rounding
insert into t values (10, '2012-10-30'), (15, '2012-10-29'), (null, '2012-10-28'), (null, '2012-10-27'), (7, '2012-10-26');

select t1.dt, t1.value, t2.dt, t2.value, count(*) cnt 
from t t1, t t2, t t3 
where 
    t2.dt >= t1.dt and t2.value is not null 
    and not exists (
        select * 
        from t 
        where t.dt < t2.dt and t.dt >= t1.dt and t.value is not null
    ) 
    and t3.dt <= t2.dt 
    and not exists (
        select * 
        from t where t.dt >= t3.dt and t.dt < t2.dt and t.value is not null
    ) 
group by t1.dt;

+------------+-------+------------+-------+-----+
| dt         | value | dt         | value | cnt |
+------------+-------+------------+-------+-----+
| 2012-10-26 |     7 | 2012-10-26 |     7 |   1 |
| 2012-10-27 |  NULL | 2012-10-29 |    15 |   3 |
| 2012-10-28 |  NULL | 2012-10-29 |    15 |   3 |
| 2012-10-29 |    15 | 2012-10-29 |    15 |   3 |
| 2012-10-30 |    10 | 2012-10-30 |    10 |   1 |
+------------+-------+------------+-------+-----+
5 rows in set (0.00 sec)

select dt, value/cnt 
from (
    select t1.dt , t2.value, count(*) cnt 
    from t t1, t t2, t t3 
    where 
        t2.dt >= t1.dt and t2.value is not null 
        and not exists (
            select * 
            from t 
            where t.dt < t2.dt and t.dt >= t1.dt and t.value is not null
        ) 
    and t3.dt <= t2.dt 
    and not exists (
        select * 
        from t 
        where t.dt >= t3.dt and t.dt < t2.dt and t.value is not null
    ) 
    group by t1.dt
) x;

+------------+-----------+
| dt         | value/cnt |
+------------+-----------+
| 2012-10-26 |         7 |
| 2012-10-27 |         5 |
| 2012-10-28 |         5 |
| 2012-10-29 |         5 |
| 2012-10-30 |        10 |
+------------+-----------+
5 rows in set (0.00 sec) 
```

解释：

*   t1 是原始表
*   t2 是表中日期最小且具有非空值的行
*   t3 都是介于两者之间的行，因此我们可以按其他行分组并计数

对不起，我不能更清楚。这对我来说也很困惑:-)

# .net - 控制作为委托方法的参数

> ID：13237811
> 
> 赞同：0
> 
> 时间：2012-11-05T18:06:12.750
> 
> 标签：.net, vb.net, multithreading, user-interface, controls

我不确定如何处理这个问题的标题，所以我会描述我的情况，希望我清楚我的疑问。（如果标题有更好的建议，我会改变它）

在过去的几天里，我一直在阅读有关使用该场景修改多线程和 GUI 控件的信息。我的问题涉及将要更改的控件作为我的委托和方法的参数传递。假设我有一个 ListView1，我想向它添加一个组（这是一个简单的体验，代码很少）

根据我见过的例子，这样做的方法是

```
Private Delegate Sub ResultsAddGroup_Delegate(ByVal FondsGroup As ListViewGroup)

Private Sub ResultsAddGroup(ByVal FondsGroup As ListViewGroup)
    If Me.ListView1.InvokeRequired Then
        Dim d As New ResultsAddGroup_Delegate(AddressOf ResultsAddGroup)
        Dim ParamArgs() As Object = New Object() {FondsGroup}
        Me.ListView1.BeginInvoke(d, ParamArgs)
    Else
        Me.ListView1.Groups.Add(FondsGroup)
    End If
End Sub 
```

我通常喜欢将控件作为参数传递，以保持代码清晰，并使方法或函数远离特定的控件对象。如果我想将 ListView 作为上述情况的参数传递，如下所示：

```
Private Delegate Sub ResultsAddGroup_Delegate(ByVal LView As ListView, ByVal FondsGroup As ListViewGroup)

Private Sub ResultsAddGroup(ByVal LView As ListView, ByVal FondsGroup As ListViewGroup)
    If LView.InvokeRequired Then
        Dim d As New ResultsAddGroup_Delegate(AddressOf ResultsAddGroup)
        Dim ParamArgs() As Object = New Object() {LView, FondsGroup}
        LView.BeginInvoke(d, ParamArgs)
    Else
        LView.Groups.Add(FondsGroup)
    End If
End Sub 
```

这会代表多线程和控制更改目的的任何问题吗？如果是这样，是否有另一种方法可以在不指定控件的情况下执行此操作？

另一方面，我通常执行我的方法的方式是否有任何问题（如上所述，将控件作为参数传递）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T21:52:10.190

我自己在几个项目中使用了第二种模式。它似乎可以完成这项工作，因为 Ctrl.InvokeRequired 是线程安全的。使用控件作为参数很好，因为它只是一个对象引用。

我认为在第一个代码块中，对象数组初始化中有一个小错误，这是有意的：

```
Dim ParamArgs() As Object = New Object() {FondsGroup} 
```

但是我会犹豫是否要更改它，以防我遗漏一些东西:)

# python - 断言错误：？

> ID：13237812
> 
> 赞同：-1
> 
> 时间：2012-11-05T18:06:15.550
> 
> 标签：python

我已经写了这个函数，但我不断收到断言错误，我不知道为什么？？？

```
 def amino(codonfile, DNA):
        """This function reads the 64-line codon file and then converts the DNA string entered into an amino acid string."""
        codonfile = []
        for line in codonfile:
            x,y = line.split()
            if DNA == dict[x]:
                return dict[y]
    codonfile = open("codon.txt","r")   
    codonfile.close

    assert(amino("codon.txt","TTT")== "Phe")
    assert(amino("codon.txt","TTATTCTTGTCT")== "LeuPheLeuSer")
    assert(amino("codon.txt","TTAGGGCCCTAC")== "LueGlyProTyr")
    print("passed") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T18:11:25.330

您的代码是专利废话，并且总是会返回`None`.

您忽略了打开的文件，将文件名传递给您的函数，然后将*其*替换为一个空列表，因此您最终会遍历该空列表并且不会产生任何结果。

最后，您的每个`assert`语句都会将结果 ( `None`) 与一个字符串进行比较，该字符串永远不会匹配，因此会失败。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T18:26:45.570

我假设您正在尝试解决与[您之前的问题中列出的相同的问题](https://stackoverflow.com/questions/13237253/read-file-into-dictionary)。这次包括你的代码做得很好。

这是您的代码的一些问题。

```
def amino(codonfile, DNA):
    """This function reads the 64-line codon file and then converts the DNA string entered into an amino acid string."""
    codonfile = []
    for line in codonfile: 
```

`codonfile`作为 的参数提供`amino`，但您立即用空列表覆盖它！因为`codonfile`是一个空列表，所以没有什么可以迭代的。您的 for 循环循环零次。而是这样做：

```
def amino(codonfile, DNA):
    with open(codonfile, 'r') as f:  # opens the file and assigns to f
        for line in f: 
```

现在，你的 for 循环内部也很混乱。

```
 for line in codonfile:
        x,y = line.split()
        if DNA == dict[x]:
            return dict[y] 
```

此时没有字典命名`dict`。（但有一个内置`dict`类型，所以不要使用该名称）。*相反*，您需要用`codonfile`. 在您的 for 循环之前，您需要创建一个字典来保存这些项目。像这样做：

```
codon_table = {} # brackets for an empty dictionary
for line in f:
    x, y = line.split()
    codon_table[x] = y 
```

最后一点是使用`codon_table`来翻译 DNA 字符串。您需要将其`DNA`分成 3 个字母并从`codon_table`. 然后你需要将这些翻译加入一个字符串并返回它。

我把最后一段作为练习留了下来。试一试，如果您无法获得它，请将您尝试过的内容作为另一个问题发布。

# sql-server - 从 Windows 服务访问 SQL Server 主数据库的权限被拒绝

> ID：13237818
> 
> 赞同：1
> 
> 时间：2012-11-05T18:06:27.847
> 
> 标签：sql-server

我有一个 Windows 服务（作为本地系统运行），它需要在本地 SQL Server Express 2012 中创建/删除一个数据库。这样做会产生一条错误消息：

> “数据库 'master' 中的 CREATE DATABASE 权限被拒绝。”

我可以作为本地管理员连接到实例并创建/删除数据库。本地系统在本地 SQL Server 上没有系统管理员权限吗？如果没有，我如何授予它权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T05:15:42.577

原来本地系统不在 sysadmin 组中（仅在公共组中）。

# c# - C# 基于角色的桌面应用程序管理

> ID：13237819
> 
> 赞同：0
> 
> 时间：2012-11-05T18:06:33.753
> 
> 标签：c#, desktop-application

我非常熟悉在 ASP.NET 中处理角色（角色成员资格），但我希望我的桌面应用程序具有相同的身份验证和授权功能。C# / .Net Framework 是否提供这样的功能。
仅供参考，我打算使用 MySQL 作为数据库。如果在其他数据库中实现了任何提供基于角色的管理的框架，我将很乐意切换到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:08:20.557

您可以在桌面应用程序中使用会员库，如果您不想使用数据库来存储会员信息而是依赖域安全性，甚至可以指定 AD 提供程序。

成员资格位于 System.Web dll 中，您必须引用它并在您的桌面项目中相应地配置您的 app.config。

# c# - ASP.NET Web 服务 - 返回 JSON

> ID：13237822
> 
> 赞同：0
> 
> 时间：2012-11-05T18:06:40.937
> 
> 标签：c#, json, web-services

我有一个名为 SalesService 的 Web 服务，它将信息作为“SalesInfo”实例返回。此 Web 服务将从 Windows 应用程序调用。

我想知道是否可以以 JSON 格式从 Web 服务发送结果？

请记住，它是从 Windows 应用程序而不是 Web 应用程序调用的。我想知道我们如何将 JSON 从 web 服务发送到 windows 应用程序.. 这样 XML 序列化就不会发生。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:19:35.947

这取决于您拥有的 Web 服务的类型。

*   如果是 WCF，您可以使用 WebInvoke 属性和 WebMessageFormat.Json 来设置 JSON 响应。有关示例，请参见[这篇文章。](https://stackoverflow.com/questions/2086666/wcf-how-do-i-return-clean-json)

*   如果您使用的是 ASP.NET MVC 项目并希望返回 JSON，请使用[Json 对象](http://msdn.microsoft.com/en-us/library/dd504936%28v=vs.98%29.aspx)：

例如：

```
public JsonResult Index()
{
    return Json(new { name = "John Doe" });
} 
```

*   如果您使用的是 WebAPI，则需要在请求上设置[Content-Type 标头](https://stackoverflow.com/questions/9847564/how-do-i-get-mvc-4-webapi-to-return-json-instead-of-xml-using-chrome)，其余的由 WebAPI 处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:13:43.100

以 JSON 格式发送响应是可能的，并且相对简单。由客户来解密它。

Windows 应用程序需要反序列化来自 web 应用程序的 JSON 结果。命名空间中的 .NET 4 中有一个 JSON 库`System.Runtime.Serialization.Json`。如果您需要它的早期版本，您可能需要查看 JSON.Net - [http://james.newtonking.com/pages/json-net.aspx](http://james.newtonking.com/pages/json-net.aspx)

# r - 在R中的两个glm模型之间执行anova（）时如何提取p值

> ID：13237824
> 
> 赞同：7
> 
> 时间：2012-11-05T18:06:47.567
> 
> 标签：r, model, regression, glm, anova

所以，我试图比较两个模型，fit1 和 fit2。

最初，我只是在做 anova(fit1,fit2)，这产生了我理解的输出（包括 p 值）。

然而，当我将我的模型从基于 lm() 的模型切换到基于 glm() 的模型时，anova(fit1,fit2) 现在产生了残差自由度、残差偏差和 Df 偏差，我无法解释它们（资源解释这些指标似乎很少）。我希望为两个模型之间的比较提取 p 值，但由于某种原因 anova(fit1,fit2, test='Chisq') 不起作用。有什么建议么？

我意识到，根据我的 glms 中的链接功能，卡方可能不是最合适的测试，但我在适当的上下文中使用了“F”，也有类似的失望。

这个问题其他人熟悉吗？建议？非常感谢！

例子：

```
make_and_compare_models <- function(fitness_trait_name, data_frame_name, vector_for_multiple_regression, predictor_for_single_regression, fam){
        fit1<-glm(formula=as.formula(paste(fitness_trait_name,"~", paste(vector_for_multiple_regression, sep="+"))), family=fam, data=data_frame_name)
        print ("summary fit 1")
        print(summary(fit1))
        fit2<- glm(data=data_frame_name, formula=as.formula(paste(fitness_trait_name,"~",predictor_for_single_regression)), family=fam)

        print("summary fit 2")
        print(summary(fit2))
        print("model comparison stats:")
        mod_test<-anova(fit2,fit1)

        ##suggestion #1
        print(anova(fit2,fit1, test="Chisq"))

        #suggestion #2
        print ("significance:")
    print (1-pchisq( abs(mod_test$Deviance[2]),df=abs(mod_test$Df[2])))

        }

data<-structure(list(ID = c(1L, 2L, 4L, 7L, 9L, 10L, 12L, 13L, 14L, 
15L, 16L, 17L, 18L, 20L, 21L, 22L, 23L, 24L, 25L, 27L, 28L, 29L, 
31L, 34L, 37L, 38L, 39L, 40L, 41L, 43L, 44L, 45L, 46L, 47L, 48L, 
49L, 52L, 55L, 56L, 59L, 60L, 61L, 62L, 63L, 65L, 66L, 67L, 68L, 
69L, 71L), QnWeight_initial = c(158L, 165L, 137L, 150L, 153L, 
137L, 158L, 163L, 159L, 151L, 145L, 144L, 157L, 144L, 133L, 148L, 
151L, 151L, 147L, 158L, 178L, 164L, 134L, 151L, 148L, 142L, 127L, 
179L, 162L, 150L, 151L, 153L, 163L, 155L, 163L, 170L, 149L, 165L, 
128L, 134L, 145L, 147L, 148L, 160L, 131L, 155L, 169L, 143L, 123L, 
151L), Survived_eclosion = c(0L, 1L, 0L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 0L, 1L, 
1L, 1L, 1L, 0L, 1L, 1L, 0L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 0L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), Days_wrkr_eclosion_minus20 = c(NA, 
1L, NA, 3L, 0L, 2L, 0L, 1L, 0L, 0L, 0L, 1L, NA, 0L, 7L, 1L, 0L, 
1L, 0L, 1L, 2L, 2L, NA, 2L, 3L, 2L, 2L, NA, 0L, 1L, NA, NA, 0L, 
0L, 0L, 0L, 3L, 3L, 3L, 1L, 0L, 2L, NA, 1L, 0L, 1L, 1L, 3L, 1L, 
2L), MLH = c(0.5, 0.666666667, 0.555555556, 0.25, 1, 0.5, 0.333333333, 
0.7, 0.5, 0.7, 0.5, 0.666666667, 0.375, 0.4, 0.5, 0.333333333, 
0.4, 0.375, 0.3, 0.5, 0.3, 0.2, 0.4, 0.875, 0.6, 0.4, 0.222222222, 
0.222222222, 0.6, 0.6, 0.3, 0.4, 0.714285714, 0.4, 0.3, 0.6, 
0.4, 0.7, 0.625, 0.555555556, 0.25, 0.5, 0.5, 0.6, 0.25, 0.428571429, 
0.3, 0.25, 0.375, 0.555555556), Acon5 = c(0.35387674, 0.35387674, 
0.35387674, 0.35387674, 0.35387674, 0.35387674, 0.35387674, 0, 
0, 1, 0, 1, 0.35387674, 0, 0, 0.35387674, 1, 1, 0, 0, 0, 1, 0, 
0.35387674, 0, 1, 1, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 
0, 0, 1, 0, 0, 0, 1, 0, 0.35387674), Baez = c(1, 1, 1, 0.467836257, 
1, 1, 0, 0, 1, 1, 0, 0.467836257, 1, 0, 0, 0, 0, 1, 0, 0, 0, 
0, 0, 0.467836257, 1, 1, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0, 1, 
1, 0, 0, 1, 1, 0, 0, 1, 0, 1, 1, 1), C294 = c(0, 1, 0, 0, 1, 
0.582542694, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 1, 1, 0, 1, 0, 0, 
0, 1, 1, 0, 0, 0.582542694, 1, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1, 
1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1), C316 = c(1, 1, 0, 0, 0.519685039, 
0.519685039, 0, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 0.519685039, 0, 
1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0.519685039, 1, 0, 1, 
1, 0, 0.519685039, 1, 0.519685039, 1, 1, 1, 0.519685039, 0.519685039, 
0, 0.519685039, 0.519685039, 0), i_120_PigTail = c(1, 1, 0, 1, 
0.631236443, 0.631236443, 1, 1, 1, 1, 1, 0, 0.631236443, 1, 1, 
1, 0, 0.631236443, 1, 1, 1, 0, 0, 1, 1, 1, 0.631236443, 0, 1, 
1, 0, 1, 0.631236443, 1, 0, 1, 0, 0, 1, 0.631236443, 0.631236443, 
0, 1, 0, 0.631236443, 0.631236443, 1, 0.631236443, 0.631236443, 
1), i129 = c(0L, 1L, 1L, 0L, 1L, 0L, 1L, 1L, 0L, 1L, 0L, 0L, 
1L, 0L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 0L, 1L, 1L, 0L, 0L, 0L, 0L, 
0L, 0L, 1L, 0L, 1L, 0L, 0L, 0L, 1L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L), Jackstraw_PigTail = c(0L, 1L, 1L, 0L, 
1L, 1L, 0L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 0L, 0L, 0L, 0L, 0L, 
1L, 0L, 1L, 1L, 1L, 1L, 0L, 1L, 1L, 1L, 1L, 1L, 0L, 1L, 0L, 1L, 
0L, 1L, 1L, 0L, 1L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), Neil_Young = c(0.529636711, 
0, 1, 0, 0.529636711, 0.529636711, 1, 1, 0, 1, 1, 1, 0, 0, 1, 
1, 1, 0, 0, 1, 1, 0, 1, 1, 0, 0, 1, 0, 1, 1, 0, 0, 1, 0, 1, 0, 
1, 1, 0, 1, 0, 0, 0, 1, 0, 1, 1, 0, 1, 1), Ramble = c(0, 0, 0, 
0, 0.215163934, 0.215163934, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 
0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0.215163934, 0, 
0, 1, 0, 1, 0, 0, 0, 0, 1, 1, 1, 0.215163934, 0, 0, 0, 0), Sol_18 = c(1, 
0, 1, 1, 1, 0, 0, 1, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 
0, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 1, 0, 1, 1, 0.404669261, 
1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1)), .Names = c("ID", "QnWeight_initial", 
"Survived_eclosion", "Days_wrkr_eclosion_minus20", "MLH", "Acon5", 
"Baez", "C294", "C316", "i_120_PigTail", "i129", "Jackstraw_PigTail", 
"Neil_Young", "Ramble", "Sol_18"), class = "data.frame", row.names = c(NA, 
-50L))

make_and_compare_models("QnWeight_initial", data, c("Acon5","Baez","C294","C316","i_120_PigTail","i129","Jackstraw_PigTail","Neil_Young","Ramble","Sol_18"), "MLH", "gaussian") 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T18:37:29.220

“更大”或更复杂的模型与嵌套或“简化”模型之间的偏差差异（渐近地）分布为卡方变量，这两个模型的自由度不同。因此，您将提取偏差估计和自由度的差异，并将其与 pchisq(deviance, diff(df)) 进行比较。“p 值”只是 1 减去该值。

```
> 1-pchisq(3.84,1)
[1] 0.05004352 
```

如果您在 glm 帮助页面中运行第一个示例，然后添加一个没有“处理”变量的简化模型，您会得到：

```
glm.D93.o <- glm(counts ~ outcome, family=poisson())
 anova.res <-anova(glm.D93, glm.D93.o)
 anova.res
#------------
Analysis of Deviance Table

Model 1: counts ~ outcome + treatment
Model 2: counts ~ outcome
  Resid. Df Resid. Dev Df    Deviance
1         4     5.1291               
2         6     5.1291 -2 -2.6645e-15
#---------------
 str(anova.res)
Classes ‘anova’ and 'data.frame':   2 obs. of  4 variables:
 $ Resid. Df : num  4 6
 $ Resid. Dev: num  5.13 5.13
 $ Df        : num  NA -2
 $ Deviance  : num  NA -2.66e-15
 - attr(*, "heading")= chr  "Analysis of Deviance Table\n" "Model 1: counts ~ outcome + treatment\nModel 2: counts ~ outcome" 
```

因此，在查看了事物如何存储在对象本身中之后，这给出了“结果”的 p 值：

```
 1-pchisq( abs(anova.res$Deviance[2]), abs(anova.res$Df[2]))
[1] 1 
```

这将是治疗+结果模型与仅治疗模型的相应程序：

```
> glm.D93.t <- glm(counts ~ treatment, family=poisson())
> anova.res2 <-anova(glm.D93, glm.D93.t)
> 1-pchisq( abs(anova.res2$Deviance[2]), abs(anova.res2$Df[2]))
[1] 0.06547071 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T18:21:06.127

如果您的 2 个模型是**嵌套**的，那么您可以使用 2 个模型的偏差变化来查看包含额外参数的模型是否产生了改进的拟合。如果模型 1 包含`k`参数，而模型 2 包含这些相同`k`的参数加上一个附加参数，则偏差的变化遵循（近似）具有自由度的`m`卡方分布。`m`您可以使用此检验统计量来查看模型 2 是否是对模型 1 的改进。

如果您是该领域的新手，我强烈建议您阅读有关 GLM 的介绍性文本

# java - facebook 支付订阅，价格硬编码

> ID：13237827
> 
> 赞同：0
> 
> 时间：2012-11-05T18:06:55.847
> 
> 标签：java, facebook, payment, subscription

正如我所看到的[facebook 支付订阅文档](https://developers.facebook.com/docs/payments/subscriptions/ "订阅")，价格在每次创建订阅时都会引用的开放图形 html 对象 (fbpayment:price) 中硬编码。我想知道在用户创建订阅时是否有一些解决方法来设置价格。即订阅订单中的某种参数或类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T19:05:35.523

我可能误读了该文档，但从该文档中：

```
There may be zero or more `alternate_price` properties, to allow the application to price subscriptions differently for different currencies. 
```

和

```
An app can define multiple subscriptions associated with the app. However a user can have only one active subscription at any time for that app. 
```

这不涵盖您的用例吗？

# sql-server-2008 - SQL Server 2008 查询填充空值

> ID：13237830
> 
> 赞同：0
> 
> 时间：2012-11-05T18:07:09.887
> 
> 标签：sql-server-2008

我需要查询下表

桌子

```
ClienName   Bal0    Bal1    Bal2        Bal3        Bal4        Bal5        Bal6    
--------------------------------------------------------------------------------
A           600     600     NULL        NULL        NULL        NULL        NULL    
B           Null    100     NULL        NULL        NULL        NULL        NULL    
C           NULL    NULL    200          NULL       NULL        NULL        NULL        
D           NULL    NULL    NULL        NULL        NULL        130         130     
E           510     510     NULL        510         510         NULL        NULL    
F           170     170     NULL        170         170         NULL        170 
G           210     210     NULL        210         210         210         210     
H           20      20      NULL        20          NULL        NULL        NULL 
```

**结果：我想看到上面的表如下，哪个查询可以做到？请帮忙**

```
ClienName   Bal0    Bal1    Bal2        Bal3        Bal4        Bal5        Bal6    
--------------------------------------------------------------------------------
A           600     600     600         600         600         600         600     
B           100     100     100         100         100         100         100     
C           200     200     200         200         200         200         200     
D           130     130     130         130         130         130         130         
E           510     510     510         510         510         510         510     
F           170     170     170         170         170         170         170 
G           210     210     210         210         210         210         210     
H           20      20      20          20          20          20          20 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T18:11:12.023

假设我从非常有限的示例集中了解您想要什么，只需浏览表格并逐列填写即可。

向前一传：

```
UPDATE theTable
SET Bal1 = Bal0
WHERE Bal1 IS NULL AND Bal0 IS NOT NULL;

UPDATE theTable
SET Bal2 = Bal1
WHERE Bal2 IS NULL AND Bal1 IS NOT NULL;

... 
```

反过来：

```
UPDATE theTable
SET Bal5 = Bal6
WHERE Bal5 IS NULL AND Bal6 IS NOT NULL;

UPDATE theTable
SET Bal4 = Bal5
WHERE Bal4 IS NULL AND Bal5 IS NOT NULL;

... 
```

这也（假设“Bal”表示平衡，并且数字与时间有关）随着时间的增加处理列中不同值的情况。

* * *

如果您只想要第一个非空列，请尝试使用`COALESCE`运算符：

```
SELECT ClienName, COALESCE(Bal0, Bal1, Bal2, Bal3, Bal4, Bal5, Bal6) AS firstBal
FROM theTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:24:47.417

如果您只想查询最大值（假设每行只有一个值）而不更新现有表，那么您可以这样做

```
declare @table table(clientname varchar(5), bal0 int, 
                    bal1 int, bal2 int, bal3 int, bal4 int, bal5 int, bal6 int)

insert into @table 
select 'A', 600, 600, null, 600, 600, null, null
UNION ALL
select 'B', null, 120, null, null, 120, null, null

;with cte as (
select clientname, (SELECT MAX(val) 
                    FROM (VALUES (bal0),(bal1),(bal2),(bal3),
                          (bal4),(bal5),(bal6)) AS value(val)) As mCOL
from @table 
)

select t.clientname, mCOL as bal0, mCOL as bal1, mCOL as bal2, mCOL as bal3, 
mCOL as bal4, mCOL as bal5, mCOL as bal6
from @table t inner join cte c on t.clientname = c.clientname 
```

# iphone - ios 在自定义视图和视图控制器之间传递数据

> ID：13237832
> 
> 赞同：0
> 
> 时间：2012-11-05T18:07:26.953
> 
> 标签：iphone, objective-c, ios, ipad

我是iOS开发的初学者。我有一个自定义视图：

```
@interface MyView : UIView { 
```

在 ViewController 中，我将此视图添加为子视图（以另一种方式做会更好，也许在 Storyboard 中？）：

```
MyView *myView = [[MyView alloc]initWithFrame:myFrame];
[self.view addSubview:myView]; 
```

在其中，我跟随屏幕上的触摸，我有一个 touchesEnded 方法：

```
-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    // myValue is a class variable of MyView
    myValue = doSomething();
} 
```

现在，如何获取`myValue`ViewController 中的值？也许可以`touchesEnded`在 MyView 内部调用的侦听器或回调？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:11:23.910

好吧，一种简单的方法是在 中保留对视图控制器的引用`MyView`，例如，定义如下属性：

```
@property (weak,nonatomic) MyViewController *viewController; 
```

然后在视图控制器中分配`myView.viewController = self`. 这样你就可以调用视图控制器上的任何方法`MyView`，例如，`[viewController myView:self changedValue:myValue]`或其他。

（而且，是的，可以直接在情节提要中添加自定义视图子类。只需在情节提要中添加一个泛型`UIView`并将其类更改为`MyView`。）

当然有许多替代方法，例如通知，或者只是`MyView`从视图控制器轮询一个属性，如果它只在某些时候感兴趣，等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:18:28.793

例如，您可以在视图的*touchesEnded*方法中发布*NSNotification ：*

 *```
[[NSNotificationCenter defaultCenter] postNotificationName:@"ViewDidTouch" object:self]; 
```

在您的视图控制器中收听此通知。要实现这一点，请在视图控制器的方法*viewDidLoad*中添加一行：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(onViewDidTouch:) name:@"ViewDidTouch" object:nil]; 
```

然后在您的视图控制器中实现以下方法：

```
- (void) onViewDidTouch:(NSNotification*)notification
{
    // do something
} 
```*

# algorithm - 游戏的 Min-Max 评估函数

> ID：13237837
> 
> 赞同：0
> 
> 时间：2012-11-05T18:08:01.753
> 
> 标签：algorithm, artificial-intelligence, evaluation, minmax

我正在开发一个游戏（坦克游戏 2D），（例如 -[链接](https://dl.dropbox.com/u/25500756/Problem%20solved/posts/3%20tankgame%201/screenshot.png)）AI 播放器。我的玩家将是其他 5 个玩家之一（也是 AI），他们为获得最大硬币而玩游戏，随机出现在网格的某个地方。（看看上面给出的图片）。玩家也可以互相射击。并且健康包也随机出现在网格中的某个位置。

因此，为了使用最小最大树并找出最聪明的下一步行动，我必须构建一个评估函数。问题出现在这里，我以前没有使用过这种评估功能的经验。我应该遵循任何指导方针还是有一种通用的方法来做到这一点我的意思是我有一些想法，我不确定它是否会做工作。你能建议我应该研究哪个领域吗？我用谷歌搜索了很多东西，但没有合适的教程或类似的东西。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T18:32:38.113

基本上，对游戏进行评估的最佳做法是：

*   **玩游戏**- 试着看看你试图避免哪些情况，哪些是好的。尝试将这些情况制定为一般评估。
*   **研究**——有人可能已经研究过这个或类似的问题，如果是这样的话——也许有一些文章或其他材料暗示了一些启发式函数。

**我要做的如下：**

1.  创建一组启发式函数，每个函数都描述游戏的一个方面（与最近敌人的距离、敌人的火线、我的生命值条……）。我会玩这个游戏来尽可能地扩展这个列表，当然也会在网上寻找其他人可能会为这个/类似游戏找到的想法。
2.  从第一步开始，我们实际上得到了一组函数：`h_1(board),h_2(board),...,h_n(board)`- 但我们仍然不知道我们的启发式函数是什么
3.  我会尝试找到一些参数`a_1,a_2,...,a_n`，并创建我的启发式函数：
    `h(board) = a_1 * h_1(board) + a_2 * h_2(board) + ... + a_n * h_n(board`
    现在的问题是 - 如何获取这些参数。请注意，现在我们有一个优化问题。
    这个特定问题的一个解决方案是蒙特卡洛学习。

**蒙特卡洛学习：**

蒙特卡洛学习的想法是创建一个代理列表（AI），每个代理都用一些随机值初始化`a_1,...,a_n`- 并在它们之间进行比赛。
比赛结束后`a_1,...,a_n`，根据表现最好的代理更改每个代理的值，然后重新运行比赛。（一种方法类似于[遗传算法](http://en.wikipedia.org/wiki/Genetic_algorithm)中的“生成”步骤- 交叉和突变，但还有其他方法）。

最后——蒙特卡洛学习过程应该给你很好的价值`a_1,...,a_n`——这将为你提供一个很好的启发式功能。

# java - 上个月的java周数

> ID：13237839
> 
> 赞同：0
> 
> 时间：2012-11-05T18:08:14.750
> 
> 标签：java, calendar

在java中如何获得上个月的周数，从星期一开始的一周

```
cal.setFirstDayOfWeek(Calendar.MONDAY); 
```

`cal`是`Calendar`实例

如果一周的第一天不是星期一，则返回 0。所以上周必须算上前几个月，这是我的要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:45:40.230

你的问题不是很清楚，但可能你正在寻找这样的东西：

```
Calendar cal = Calendar.getInstance();
cal.setTime(new Date()); // today's date
// previous month from today
cal.add(Calendar.MONTH, -1);
// get to the 1st week
cal.add(Calendar.DATE, -7 * (cal.get(Calendar.DAY_OF_MONTH)/7));
// Get to the 1st Mon of last month
cal.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY);
// # of days in last month
int maxDay = cal.getActualMaximum(Calendar.DAY_OF_MONTH);
// print # of week since Mon of last month
int numWeeks = ((maxDay-cal.get(Calendar.DATE))/7)+1;
System.out.printf("# of weeks from Mon in last month: %d%n", numWeeks); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:33:50.880

又快又脏（鉴于我在上面的评论中提出的要求）：

```
public static void main(String[] args) {       

    Calendar cal = Calendar.getInstance();
    cal.add(Calendar.MONTH, -1);
    cal.set(Calendar.DAY_OF_MONTH,1);
    while ( cal.get(Calendar.DAY_OF_WEEK) != Calendar.MONDAY ) {
        cal.add(Calendar.DAY_OF_WEEK, 1);
    }
    int startingMonth = cal.get(Calendar.MONTH);
    int numberOfWeeks = 0;

    while (cal.get(Calendar.MONTH) == startingMonth ) {          
        cal.add(Calendar.WEEK_OF_MONTH, 1);            
        numberOfWeeks++;                        
    }
    System.out.println("weeks in last month:" + numberOfWeeks);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T19:15:02.930

如果你想计算上个月的所有星期一，你是：

```
public int getNofWeeks() {
    Calendar cal = Calendar.getInstance();        
    while (cal.get(Calendar.DAY_OF_WEEK) != Calendar.MONDAY) {
        cal.roll(Calendar.DATE, false);
    }        
    int currentMonth = cal.get(Calendar.MONTH);
    int previousMonth = (currentMonth + 12 - 1) % 12;
    int prePreviousMonth = (currentMonth + 12 - 2) % 12;
    int nofWeeks = 0;        
    do {
        int month = cal.get(Calendar.MONTH);
        if (month == previousMonth) {
            nofWeeks++;
        }
        if (month == prePreviousMonth) {
            break;
        }
        cal.roll(Calendar.WEEK_OF_YEAR, false);            
    } while (true);        
    return nofWeeks;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-11T19:56:38.807

# eclipse - SQLite onCreate 异常

> ID：13237840
> 
> 赞同：-1
> 
> 时间：2012-11-05T18:08:15.757
> 
> 标签：eclipse, sqlite, exception

我不知道发生了什么。有什么线索吗？

```
11-05 18:02:01.195: D/dalvikvm(641): Not late-enabling CheckJNI (already on)
11-05 18:02:01.595: E/Trace(641): error opening trace file: No such file or directory (2)
11-05 18:02:01.907: E/SQLiteLog(641): (1) near "Table": syntax error
11-05 18:02:01.915: D/AndroidRuntime(641): Shutting down VM
11-05 18:02:01.915: W/dalvikvm(641): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
11-05 18:02:01.925: E/AndroidRuntime(641): FATAL EXCEPTION: main
11-05 18:02:01.925: E/AndroidRuntime(641): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.cookbook.adiel/com.cookbook.adiel.MainActivity}: android.database.sqlite.SQLiteException: near "Table": syntax error (code 1): , while compiling: CREATE TABLE Stories Table(row id INTEGER PRIMARY KEY,Story name TEXT,Recipe ingredients TEXT,Clean recipe TEXT, )
11-05 18:02:01.925: E/AndroidRuntime(641):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
11-05 18:02:01.925: E/AndroidRuntime(641):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
11-05 18:02:01.925: E/AndroidRuntime(641):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
11-05 18:02:01.925: E/AndroidRuntime(641):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
11-05 18:02:01.925: E/AndroidRuntime(641):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-05 18:02:01.925: E/AndroidRuntime(641):  at android.os.Looper.loop(Looper.java:137)
11-05 18:02:01.925: E/AndroidRuntime(641):  at android.app.ActivityThread.main(ActivityThread.java:4745)
11-05 18:02:01.925: E/AndroidRuntime(641):  at java.lang.reflect.Method.invokeNative(Native Method)
11-05 18:02:01.925: E/AndroidRuntime(641):  at java.lang.reflect.Method.invoke(Method.java:511)
11-05 18:02:01.925: E/AndroidRuntime(641):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-05 18:02:01.925: E/AndroidRuntime(641):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-05 18:02:01.925: E/AndroidRuntime(641):  at dalvik.system.NativeStart.main(Native Method)
11-05 18:02:01.925: E/AndroidRuntime(641): Caused by: android.database.sqlite.SQLiteException: near "Table": syntax error (code 1): , while compiling: CREATE TABLE Stories Table(row id INTEGER PRIMARY KEY,Story name TEXT,Recipe ingredients TEXT,Clean recipe TEXT, )
11-05 18:02:01.925: E/AndroidRuntime(641):  at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
11-05 18:02:01.925: E/AndroidRuntime(641):  at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
11-05 18:02:01.925: E/AndroidRuntime(641):  at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
11-05 18:02:01.925: E/AndroidRuntime(641):  at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
11-05 18:02:01.925: E/AndroidRuntime(641):  at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
11-05 18:02:01.925: E/AndroidRuntime(641):  at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:31)
11-05 18:02:01.925: E/AndroidRuntime(641):  at android.database.sqlite.SQLiteDatabase.executeSql(SQLiteDatabase.java:1663)
11-05 18:02:01.925: E/AndroidRuntime(641):  at    android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1594)
11-05 18:02:01.925: E/AndroidRuntime(641):  at com.cookbook.adiel.StoryDatabaseHandler.onCreate(StoryDatabaseHandler.java:40)
11-05 18:02:01.925: E/AndroidRuntime(641):  at android.database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:252)
11-05 18:02:01.925: E/AndroidRuntime(641):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:164)
11-05 18:02:01.925: E/AndroidRuntime(641):  at com.cookbook.adiel.StoryDatabaseHandler.addStory(StoryDatabaseHandler.java:55)
11-05 18:02:01.925: E/AndroidRuntime(641):  at com.cookbook.adiel.MainActivity.onCreate(MainActivity.java:50)
11-05 18:02:01.925: E/AndroidRuntime(641):  at android.app.Activity.performCreate(Activity.java:5008)
11-05 18:02:01.925: E/AndroidRuntime(641):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
11-05 18:02:01.925: E/AndroidRuntime(641):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
11-05 18:02:01.925: E/AndroidRuntime(641):  ... 11 more 
```

我猜它与 onCreate 方法有关，所以在这里。数据库处理程序 onCreate 方法：

```
private static final String DATABASE_TABLE = "Stories Table";

// table column names
private static final String KEY_ROWID = "row id";
private static final String KEY_STORYNAME = "Story name";
private static final String KEY_INGREDIENTS = "Recipe ingredients";
private static final String KEY_RECIPE = "Clean recipe";

public StoryDatabaseHandler(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

// Creating table
@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub
    String CREATE_STORIES_TABLE = "CREATE TABLE " + DATABASE_TABLE + "("
            + KEY_ROWID + " INTEGER PRIMARY KEY," + KEY_STORYNAME
            + " TEXT," + KEY_INGREDIENTS + " TEXT," + KEY_RECIPE + " TEXT,"
            + " )";
    db.execSQL(CREATE_STORIES_TABLE);
} 
```

如果是别的东西，我会把要求的东西放上去。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T19:03:21.220

这是因为您的表名是`Stories Table`. 将其更改为类似`StoriesTable`. 当然也可以更改列名。

# javascript - 检查兄弟节点是否有文本内容

> ID：13237843
> 
> 赞同：2
> 
> 时间：2012-11-05T18:08:28.403
> 
> 标签：javascript, dom

我想遍历javascript中的兄弟节点。我使用 document.getElementById 并且我想检查它的兄弟是否有任何文本内容。如果不是，我想检查父节点的兄弟姐妹。

```
<!DOCTYPE html>
<html>
<head>
<script>
function changeSize()
{
var x=document.getElementById("compman");
if (x.parentNode && x.parentNode.textContent) {
alert("My input has a value!");
} 

y=x.nextSibling;
alert(y.nodeValue);
alert(x.parentNode.textContent);

}
</script>
</head>
<body>

<a href="http://sample_url"   id="pd_cp_mov_0_B004JMY312" > 

<img src="http://samplepic.jpg" width="50" alt="" class="faceout" height="50" border="0" id="compman">
<span class="cpAsinTitle">Hocus Pocus</span> 
<div>
sample text
</div>
</a>
<p>test content</p>
<p class="s2"> sample content 2 </p>
<br><br>
<input type="button" onclick="changeSize()" value="Change size of image">

</body>
</html> 
```

在上面的内容中，我得到了 img 标签。现在我想检查它的兄弟是否有任何文本内容。在这种情况下，它具有 Hocus Pocus 的值。如果它没有文本值，我想检查其父级的兄弟姐妹。所以应该返回测试内容。

# python - 将 Django 应用程序部署到 Heroku

> ID：13237845
> 
> 赞同：0
> 
> 时间：2012-11-05T18:08:31.697
> 
> 标签：python, django, git, heroku

```
 Pushing to git@heroku.com:lebab.git

-----> Heroku receiving push
-----> Python/Django app detected
-----> Preparing Python interpreter (2.7.2)
-----> Creating Virtualenv version 1.7.2
       New python executable in .heroku/venv/bin/python2.7
       Also creating executable in .heroku/venv/bin/python 
```

*** 省略 ***

```
 -----> Discovering process types

         !     Heroku push rejected due

 to an unrecognized error.
     !     We've been notified, see http://support.heroku.com if the problem persists.

    To git@heroku.com:lebab.git
     ! [remote rejected] master -> master (pre-receive hook declined)
    error: failed to push some refs to 'git@heroku.com:lebab.git' 
```

我制作了 django 应用程序，所以我尝试将它部署到 heroku。并得到错误。什么意思？有任何想法吗？如果我应该提供更多信息，我会的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:52:44.373

只需要 manage.py + requirements.txt... :|

# python - python - matplotlib - 创建一个多线图，下面有结果摘要

> ID：13237854
> 
> 赞同：4
> 
> 时间：2012-11-05T18:09:15.043
> 
> 标签：python, graph, matplotlib

我正在为多线图开发python自动化。下面是我将在 excel 中手动创建的示例。

![示例图表](../Images/2aa2628f7fb5a96a10086dc3c42469c8.png)

我目前的代码如下：

```
 plt = pyplot
    plt.plot(channel_list, udp_dl_values, label="UDP DL")
    plt.plot(channel_list, tcp_dl_values, label="TCP DL")
    plt.plot(channel_list, udp_ul_values, label="UDP UL")
    plt.plot(channel_list, tcp_ul_values, label="TCP UL")
    plt.grid() 
```

想知道我是否可以使用脚本创建上述内容？

谢谢，

帕思

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T18:52:09.137

来自[http://matplotlib.org/users/screenshots.html#table-demo](http://matplotlib.org/users/screenshots.html#table-demo)

```
#!/usr/bin/env python
import matplotlib

from pylab import *
from matplotlib.colors import colorConverter

#Some simple functions to generate colours.
def pastel(colour, weight=2.4):
    """ Convert colour into a nice pastel shade"""
    rgb = asarray(colorConverter.to_rgb(colour))
    # scale colour
    maxc = max(rgb)
    if maxc < 1.0 and maxc > 0:
        # scale colour
        scale = 1.0 / maxc
        rgb = rgb * scale
    # now decrease saturation
    total = sum(rgb)
    slack = 0
    for x in rgb:
        slack += 1.0 - x

    # want to increase weight from total to weight
    # pick x s.t.  slack * x == weight - total
    # x = (weight - total) / slack
    x = (weight - total) / slack

    rgb = [c + (x * (1.0-c)) for c in rgb]

    return rgb

def get_colours(n):
    """ Return n pastel colours. """
    base = asarray([[1,0,0], [0,1,0], [0,0,1]])

    if n <= 3:
        return base[0:n]

    # how many new colours to we need to insert between
    # red and green and between green and blue?
    needed = (((n - 3) + 1) / 2, (n - 3) / 2)

    colours = []
    for start in (0, 1):
        for x in linspace(0, 1, needed[start]+2):
            colours.append((base[start] * (1.0 - x)) +
                           (base[start+1] * x))

    return [pastel(c) for c in colours[0:n]]

axes([0.2, 0.2, 0.7, 0.6])   # leave room below the axes for the table

data = [[  66386,  174296,   75131,  577908,   32015],
        [  58230,  381139,   78045,   99308,  160454],
        [  89135,   80552,  152558,  497981,  603535],
        [  78415,   81858,  150656,  193263,   69638],
        [ 139361,  331509,  343164,  781380,   52269]]

colLabels = ('Freeze', 'Wind', 'Flood', 'Quake', 'Hail')
rowLabels = ['%d year' % x for x in (100, 50, 20, 10, 5)]

# Get some pastel shades for the colours
colours = get_colours(len(colLabels))
colours.reverse()
rows = len(data)

ind = arange(len(colLabels)) + 0.3  # the x locations for the groups
cellText = []
width = 0.4     # the width of the bars
yoff = array([0.0] * len(colLabels)) # the bottom values for stacked bar chart
for row in xrange(rows):
    bar(ind, data[row], width, bottom=yoff, color=colours[row])
    yoff = yoff + data[row]
    cellText.append(['%1.1f' % (x/1000.0) for x in yoff])

# Add a table at the bottom of the axes
colours.reverse()
cellText.reverse()
the_table = table(cellText=cellText,
                  rowLabels=rowLabels, rowColours=colours,
                  colLabels=colLabels,
                  loc='bottom')
ylabel("Loss $1000's")
vals = arange(0, 2500, 500)
yticks(vals*1000, ['%d' % val for val in vals])
xticks([])
title('Loss by Disaster')

show() 
```

![带条形图的示例](../Images/87f3fabcbc953594520b86247c1c1261.png)

编辑：可以通过使用默认的 matplotlib 颜色循环（蓝色、红色、绿色……）和线图来简化此示例，如下所示：

```
import numpy as np
import matplotlib.pyplot as plt

#Create a figure and axes with room for the table
fig = plt.figure()
ax = plt.axes([0.2, 0.2, 0.7, 0.6])

#Create labels for the rows and columns as tuples
colLabels = ('36', '40', '44', '48', '149', '153', '157', '161', '165')
rowLabels = ('UDL DL', 'UDP UL', 'TCP DL', 'TCP UL')

#Table data as a numpy array
tableData = np.array([[  36.7128,  37.684,   38.283,  48.425,   32.839, 36.424, 34.440, 31.642, 35.710],
        [  36.7128,  37.684,   38.283,  48.425,   32.839, 36.424, 34.440, 31.642, 35.710],
        [  36.7128,  37.684,   38.283,  48.425,   32.839, 36.424, 34.440, 31.642, 35.710],
        [  36.7128,  37.684,   38.283,  48.425,   32.839, 36.424, 34.440, 31.642, 35.710]])

#Get the current color cycle as a list, then reset the cycle to be at the beginning
colors = []     
while True:
    colors.append(ax._get_lines.color_cycle.next())
    if colors[0] == colors[-1] and len(colors)>1:
        colors.pop(-1)
        break

for i in xrange(len(colors)-1):
    ax._get_lines.color_cycle.next()

#Show the table
table = plt.table(cellText=tableData,
                  rowLabels=rowLabels, rowColours=colors,
                  colLabels=colLabels,
                  loc='bottom')

#Make some line plots
x = np.linspace(0,10,100)                  
ax.plot(x,np.sin(x))
ax.plot(x,-1*np.sin(x))
ax.plot(x,np.cos(x))
ax.plot(x,-1*np.cos(x))

#Turn off x-axis ticks and show the plot              
plt.xticks([])
plt.show() 
```

![带线条的示例图](../Images/2b3dc54a114cea6c1955096e799439c0.png)

# php - 在 PHP 和 .tpl 中为元数据添加描述

> ID：13237855
> 
> 赞同：1
> 
> 时间：2012-11-05T18:09:16.103
> 
> 标签：php, meta-tags

我是 PHP 编程新手，我有一个需要一些 SEO 的网站。这是一个 PHP 站点，文件是 .tpl。对于它的描述，它有

```
<meta name="description" content="<?php echo $description; ?>" /> 
```

如何在不破坏 PHP 的情况下对描述和关键字进行硬编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:25:31.360

我认为使用包含您的元信息的数组可能是合适的。

```
$meta = array();
$meta["description"] = 'My site';

foreach($meta as $key => $value)
{
    echo '<meta name="'.$key.'" content="'.$value.'"/>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:15:52.587

您可以在包含模板之前在 .php 文件中定义 $description （以及您喜欢的任何变量。例如：

```
$description = 'My site';
$keywords = 'my, site';

// the code to include the template 
```

# php - fseek()：提供的参数不是有效的流资源

> ID：13237857
> 
> 赞同：1
> 
> 时间：2012-11-05T18:09:24.370
> 
> 标签：php, geocoding, geo

不知道我做错了什么，但这个错误让我发疯了。我不断从以下这些代码中收到“fseek()：提供的参数不是有效的流资源”错误：

```
public function _geoip_seek_country($ipnum) {
    $offset = 0;
    for ($depth = 31; $depth >= 0; $depth--) {
        if ($this->flags & $this->GEOIP_MEMORY_CACHE) {
            $enc = mb_internal_encoding();
            mb_internal_encoding('ISO-8859-1');

            $buf = substr($this->memory_buffer,
                2 * $this->record_length * $offset,
                2 * $this->record_length);

            mb_internal_encoding($enc);
        } elseif ($this->flags & $this->GEOIP_SHARED_MEMORY) {
            $buf = @shmop_read ($this->shmid,
                2 * $this->record_length * $offset,
                2 * $this->record_length );
        } else {
      fseek($this->filehandle, 2 * $this->record_length * $offset, SEEK_SET) == 0
                or die("fseek failed");
            $buf = fread($this->filehandle, 2 * $this->record_length);
        }
        $x = array(0,0);
        for ($i = 0; $i < 2; ++$i) {
            for ($j = 0; $j < $this->record_length; ++$j) {
                $x[$i] += ord($buf[$this->record_length * $i + $j]) << ($j * 8);
            }
        }
        if ($ipnum & (1 << $depth)) {
            if ($x[1] >= $this->databaseSegments) {
                return $x[1];
            }
            $offset = $x[1];
        } else {
            if ($x[0] >= $this->databaseSegments) {
                return $x[0];
            }
            $offset = $x[0];
        }
    }
    trigger_error("error traversing database - perhaps it is corrupt?", E_USER_ERROR);
    return false;
} 
```

该文件确实存在并将权限设置为 777。

```
$this->filehandle = fopen($filename,"rb")) 
```

已经是真的了。不知道为什么一直说

> 提供的参数不是有效的流资源

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-25T16:28:02.887

尝试检查 $gi->filehandle 资源。但我认为你必须在这段代码之前搜索问题

```
if (is_resource($gi->filehandle)) {
      fseek($this->filehandle, 2 * $this->record_length * $offset, SEEK_SET) == 0 or die("fseek failed");
      $buf = fread($this->filehandle, 2 * $this->record_length);
} 
```

# objective-c - 从函数返回的块的内存管理

> ID：13237859
> 
> 赞同：3
> 
> 时间：2012-11-05T18:09:27.397
> 
> 标签：objective-c

如果我有一个返回块的类函数，我需要在块的内存管理方面做任何事情吗？

```
typedef BOOL (^Block)(ParamType* param);

+ (Block) makeBlock: (SeedParamType* seed)
{
    return ^BOOL (ParamType* param)
    {
        // do something with seed
        return someBoolVal;
    };
}

@interface SomeClass() 
@property (copy, nonatomic) Block                 theBlock;
@end 
```

我是否需要在内存管理方面明确地做任何事情，或者 ARC 会在这种情况下处理所有事情？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:14:22.487

假设手动保留/释放，该代码无效。您需要返回该块的副本。你甚至可以这样做：

```
+ (Block) makeBlock: (SeedParamType* seed)
{
    return [[^BOOL (ParamType* param)
    {
        // do something with seed
        return someBoolVal;
    } copy] autorelease];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T18:21:32.407

有了 ARC，你会没事的。那里有足够的信息让它知道如何管理它。

语法有点错误，应该是：

```
+ (Block) makeBlock: (SeedParamType*) seed
{
    return ^BOOL (ParamType* param)
    {
        // do something with seed
        return someBoolVal;
    };
} 
```

# unit-testing - 面试 - 测试值

> ID：13237860
> 
> 赞同：0
> 
> 时间：2012-11-05T18:09:31.030
> 
> 标签：unit-testing, computer-science

好的，假设我有一个函数可以检查给定数组中哪个是重复次数最多的数字。

然后需要测试此功能，并且需要使用特定值进行测试以确保该功能正常工作（单元测试） - 这些值是什么？我很困惑。

Ps 为什么我需要使用这些值，为什么我不能只调试代码，或者，把它写在笔和纸上，看看结果应该是什么，然后将它与输出的值匹配？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T18:19:09.680

角落案例。

*它可以处理底片*

```
Array = [-5, -5, -5, 5, 5, 5, 5] expected : 5
Array = [-5, -5, -5, -5, 5, 5, 5] expected : -5 
```

*它如何处理模棱两可的情况*

```
Array = [1,1,1,2,2,2] expected = ?? (See spec for expected)
Array = [1,2,3,4,5,6] expected = ?? 
```

*它如何处理任意大的整数*

```
Array = [999999999999999, 999999999999999, 999999999999999, -99999999999999999]
expected = 999999999999999; 
```

*它如何处理任意大的数组*

```
Array = [0,0] + {i : 1 < i < 9999999999999, i is an int }
expected = 0; 
```

*它如何处理空值*

```
Array = null; 
expected = null; 

Array = [null, 1, 2, 3, 3, 3]
expected = 3;

Array = [null, null, null, 1, 2, 3, 3]
Expected = null or 3 depending on spec. 
```

为什么要进行单元测试而不仅仅是调试？

1.) 调试假设您知道已经存在错误。如果我们总是通过查看代码就知道所有错误，我们根本不需要测试，我们会不会？

2.) 通常我们对函数规范的未定义区域比代码中的错误更感兴趣。你从来没有告诉我你如何处理数组中的空值......你需要在你的 api '完成'之前在你的规范中指定它

3.) 对于这个特殊的功能，手工操作很容易。但是如果你正在计算一个函数的雅可比矩阵的行列式呢？你真的不想在纸上做那件事吗？

4.) 在企业环境中，形式化的测试可以防止团队在关键时刻偷工减料，这对公司来说是非常有害的，而且由于代码稳定性的降低，净总和会增加而不是减少开发时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T18:11:45.710

这些值是测试值。在您的示例中，您可能有一个包含最频繁出现的数组 [1,2,2,3]，一个带有平局 [1,1,2,2,3] 的数组和一个空数组 [] 来测试最有趣的边缘情况。

# c# - 针对 POCO 进行模式匹配的库

> ID：13237861
> 
> 赞同：2
> 
> 时间：2012-11-05T18:09:37.053
> 
> 标签：c#, pattern-matching

是否有人知道.NET 库可以针对对象图提供良好的模式匹配（认为对象而不是文本的正则表达式）？

我能想到的最接近的东西是[Ometa](http://www.tinlizzie.org/ometa/)，但 .NET 版本似乎垂死了。

**编辑**

这个问题与我正在研究的一个想法有关，该想法更多地处于研发阶段。有问题的应用程序接受[规范](http://en.wikipedia.org/wiki/Specification_pattern)并将它们传递到存储库，然后使用实体框架将它们（使用它们的 lambda）转换为 SQL。

作为一种通用技术，这可以正常工作。但是，对于某些查询，结果非常慢。这个想法是在存储库中有一些优化规则，检查传入的规范是否与优化的手写查询之一匹配。

例如，假设我们正在使用如下模型的规范：

```
 class Person
 {
     public string FirstName { get; set; }
     public string LastName { get; set; }
     List<PhoneNumber> PhoneNumbers { get; set; }
 }

 class PhoneNumber
 {
     public string Number { get; set; }
     public PhoneNumberType PhoneNumberType { get; set; }
 }

 enum PhoneNumberType
 {
      Cell,
      Landline
 } 
```

然后我们的基本规格是：

```
 interface ISpecification<T>
 {
     Expression<Func<T,bool>> Predicate { get; }
 }

 class GetPersonByPhoneNumberTypeSpecification : ISpecification<Person>
 {
      public PhoneNumberType PhoneNumberType { get; set; }

      public Expression<Func<Person,bool>> Predicate
      {
            return a => a.PhoneNumbers.Any(b => b.PhoneNumberType == PhoneNumberType);
      }
 }

 class GetPersonRequest
 {
      ISpecification Specification { get; set; }
 } 
```

在存储库中，我们可能有一个手写查询来选择与他们相关联的特定电话号码类型并希望在查询匹配时使用它的人。

整点无需编写大量代码来检查整个可组合规范就可以说，给定的请求具有给定的“形状”。想象一下这样的对象匹配语言。

另一种思考方式可能是对对象而不是 XML 的 XPath 查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T19:01:35.963

我不相信这不能仅仅通过 linq 来实现。

但是你可以实现[解释器模式](http://en.wikipedia.org/wiki/Interpreter_pattern)。

# java - 没有任何 ORM 的延迟加载/初始化设计模式

> ID：13237863
> 
> 赞同：3
> 
> 时间：2012-11-05T18:09:56.347
> 
> 标签：java, lazy-loading, spring-jdbc

我使用 Spring JDBC 将数据从数据库加载到业务模型实体中。我的 DAO 接口由扩展 JdbcDaoSupport 类的类实现，这些类负责使用 RowMapper 类创建实体。然后我有一个外观类，它包含所有 DAO 接口并充当我的模型类（业务逻辑类）请求业务实体的网关。由于没有延迟加载，所有业务实体数据都会立即加载。这对于大多数情况来说都很好，但在某些情况下，我确实想懒惰地从数据库中加载数据。

例如，我从数据库中获取所有订单，并且希望仅在日期满足特定条件（业务逻辑）时才加载订单详细信息。这是我设计的一个简单示例。我正在寻找改进设计的方法，以便在需要时支持延迟加载订单明细数据。您可以在业务逻辑类中看到，ProcessOrder 方法仅在 Order Date 为 Today 时才需要 Order 详细信息，否则不关心详细信息。但是，当通过外观类查询 Order 时，我的 DAO 会加载所有 Order Details。

我知道一种方法是在 DAO 和 Facade 类中公开 GetOrderDetails 方法，并允许业务逻辑类在需要时加载它。但是，它对我不起作用。我刚刚在这里提到了一个非常简单的案例，但是可能存在业务对象被传递到另一个转换层的复杂场景，我不希望这些层负责加载数据的惰性部分。

此外，另一种可能性是使用像 Hibernate 这样的 ORM 工具。但是，在我的应用程序中，这种情况可能仅适用于极少数地方，并且感觉使用 ORM 工具来实现这种行为是一种矫枉过正。

我不是在寻找任何超级花哨的东西，只是一个简单的设计来让我的特殊情况发生这种情况。感谢您的任何帮助/建议。

```
class Order // Simple POJO business entity
{
   int OrderID;
   Date OrderDate;
   Collection<OrderDetail> OrderDetails; // Need to load lazily
}

class OrderDetail //Simple POJO business entity
{
   Order order;
   int ItemID;
   double Cost;
   int Quantity;
}

// DAO Interface
interface OrderDAO
{
   Order getOrder(int aOrderID);
}

// Concrete DAO class
JdbcOrderDao extends JdbcDaoSupport implements OrderDao
{
   Order getOrder(int aOrderID)
   {
      Order order = getJdbcTemplate.query(....., new OrderRowMapper());
      populateOrderDetails(order);
      return order;
   }

   private PopulateOrderDetails(Order aOrder)
   {
      //Query the DB and fill the Order details data.
   }

   private class OrderRowMapper implements ParameterizedRowMapper<Order>
   {
      // Code implemented to create and return the business entity from the resultset;
   }
}

// Facade class that hides the DAO interface and exposes the business methods
ServiceFacade
{
   private OrderDAO orderDAO;

   public Order GetOrder(int aOrderID)
   {
      return orderDAO.getOrder(aOrderID);
   }
}

// Business Logic class
BusinessModelLoader
{
   List<Order> Orders = new ArrayList<Order>();
   LoadOrders()
   {
     for(Integer orderID : allOrderIDs)
       Orders.add(facade.getOrder(orderID));
   }

   ProcessOrders()
   {
      for(Order order: Orders)
      {
         if (order.OrderDate == Today)
         {
            List<OrderDetail> details = order.OrderDetails; // Need to perform lazy loading here automatically
            // Do something with details
         }
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-11-01T09:05:46.040

延迟获取背后的主要思想是定义如何获取数据而不是自己获取数据，这意味着`order.getOrderDetails()`调用的时间正是应该触发查询的时间。实现这一点的一种方法是通过在这种情况下`getOrderDetails()`扩展模型来装饰方法`OrderRowMapper`，对于您的示例，这看起来像这样

```
class Order // Simple POJO business entity
{
    int OrderID;
    Date OrderDate;
    Collection<OrderDetail> OrderDetails; // Need to load lazily

    public void setOrderDetails(Collection<OrderDetail> orderDetails) {
        this.OrderDetails = OrderDetails;
    }

    public Collection<OrderDetail> getOrderDetails() {
        return OrderDetails;
    }

}

class OrderDetail //Simple POJO business entity
{
    Order order;
    int ItemID;
    double Cost;
    int Quantity;
}

// DAO Interface
interface OrderDAO
{
    Order getOrder(int aOrderID);
}

// Concrete DAO class
class JdbcOrderDao extends JdbcDaoSupport implements OrderDao
{
    Order getOrder(int aOrderID)
    {
        Order order = getJdbcTemplate().queryForObject("...", new OrderRowMapper(this));
        return order;
    }

    public void populateOrderDetails(Order aOrder)
    {
        //Query the DB and retrieve the order details
    }

    private class OrderRowMapper implements RowMapper<Order>
    {
        private JdbcOrderDao dao;

        public OrderRowMapper(JdbcOrderDao dao) {
            this.dao = dao;
        }

        @Override
        public Order mapRow(ResultSet rs, int rowNum) throws SQLException {
            Order order = new Order() {
                @Override
                public Collection<OrderDetail> getOrderDetails() {
                    dao.populateOrderDetails(this);
                    return super.getOrderDetails();
                }
            };
            // set other fields
            return order;
        }

    }
} 
```

所以你的商务舱现在会触发查询

```
// Business Logic class
class BusinessModelLoader
{
   List<Order> Orders = new ArrayList<Order>();
   LoadOrders()
   {
     for(Integer orderID : allOrderIDs)
       Orders.add(facade.getOrder(orderID));
   }

   ProcessOrders()
   {
      for(Order order: Orders)
      {
         if (order.OrderDate == Today)
         {
            Collection<OrderDetail> details = order.getOrderDetails(); // performs lazy loading here automatically
            // Do something with details
         }
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-24T19:22:43.543

JPA 执行此操作的方式是执行另一个查询以获取满足该条件的每个订单的每个 orderDetails 实体。

它会在您在代码中调用它的那一刻进行获取。

```
order.getOrderDetails() 
```

因此，如果您要实现它，为什么不只做 JPA hibernate 所做的事情。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-05T18:36:30.177

根据我能理解你的问题，这是我的回复。

您想在 Order 对象中延迟加载 Order Details。为此，您必须`LAZY=true`在映射文件中设置您的订单详细信息集合，或者`fetch=FetchType.LAZY`如果您正在使用注释。

现在，当您查询 Order 对象时，直到需要时才会加载 Order 详细信息。

现在由于在 DAO 类中执行 getOrder 后会话将关闭，因此您将无法在业务层使用延迟加载的对象。为此，在返回对象之前在您的 DAO 方法中执行以下操作

```
Hibernate.initialize(order.getOrderDetails()); 
```

我希望我回答了你的问题。

# android - 编译新的 Android API 以在我的应用程序中使用

> ID：13237864
> 
> 赞同：0
> 
> 时间：2012-11-05T18:09:55.867
> 
> 标签：android, api

举个简单的例子， [String.isEmpty()](http://developer.android.com/reference/java/lang/String.html#isEmpty%28%29)在 API 级别 9 中可用。

如果我想在面向 API 级别低于 9 的应用程序中使用此方法，我将如何处理？

是不是只要找到这个方法的源代码，然后导入类/方法那么简单？- 也许用我自己的包名重命名它以供参考？

我可以编译一个我希望使用的新 API 类的单独 jar 吗？

这是[支持库](http://developer.android.com/tools/extras/support-library.html)对选定 API 所做的吗？

我是否完全误解了 Android 框架的一些基础知识？如果我有，请友善点，也许可以给我一些阅读材料的链接！

[这篇文章](https://stackoverflow.com/questions/11374118/why-old-android-phone-cannot-run-new-api-app)提出了一个类似的问题，但答案并没有为我解决上述所有问题。

我提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:15:26.433

> 是不是只要找到这个方法的源代码，然后导入类/方法那么简单？- 也许用我自己的包名重命名它以供参考？

对于像这样微不足道的事情，就像将实现复制并粘贴到您自己的某个静态方法中一样简单。您无法更改`String`数百万设备上的实现，因此您无法设置`isEmpty()`API`String`级别 8 或更低。但是，您可以使用从源代码中看到的实现借用`StringCompat`的静态方法创建一个类。`isEmpty()`

> 我可以编译一个我希望使用的新 API 类的单独 jar 吗？

这将取决于“新 API 类”是什么。

> 这是支持库对选定 API 所做的吗？

有点。在某些情况下，Android 支持包进行了其他修改，以允许代码在旧设备上运行。例如，在 Fragment 的原生 API Level 11 实现中，fragment 与 any 一起工作`Activity`；在 Android 支持包中，片段与`FragmentActivity`.

Android 支持包中的其他代码片段可能是其原生对应代码的直接克隆，但包和/或类名更改除外。

# c - 如何在编译期间检查 C 函数的有效输入？

> ID：13237865
> 
> 赞同：6
> 
> 时间：2012-11-05T18:09:58.077
> 
> 标签：c, compiler-errors, embedded

我正在为微控制器编写嵌入式 C 代码。代码必须在三个不同的电路板之间共享，并且输入/输出配置是在运行时在初始化期间从一些表中设置的。

微控制器有 24 个 ADC 通道，我有一个功能可以设置或清除一个引脚作为 ADC 通道。这意味着函数的输入可以包含 0 到 23（在表中设置），仅此而已。

我想放置某种预处理器或编译器“东西”，可以识别函数接收到 0-23 以外的值并抛出某种错误或警告，并防止代码编译以防有人输入无效值桌子。

有人对如何最好地做到这一点有一些建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T18:17:41.570

在大多数编译器（预处理器）上，您可以使用该`#error`指令。

IE

```
#define ADC_CHANNEL 34
#if ADC_CHANNEL > 23
#error ADC_CHANNEL exceeds maximum allowed value
#endif 
```

上面会抛出一个错误，并且不会编译。

然后使用 ADC_CHANNEL 作为函数的输入。

或者您可以制作`ADC_CHANNEL`一个`enum`, 并定义`ADC_CHANNEL_0 = 0`, `ADC_CHANNEL_1 = 1`... `ADC_CHANNEL_23 = 23`。然后让你的函数采用 type `ADC_CHANNEL_t`，或者你想调用它的任何东西，这样如果使用枚举类型作为参数调用函数，就没有办法使用越界值。

例子：

```
typedef enum {ADC_CHANNEL_0 = 0,
              ADC_CHANNEL_1 = 1,
              ADC_CHANNEL_2 = 2,
              // ...etc...
              ADC_CHANNEL_22 = 22,
              ADC_CHANNEL_23 = 23} adc_channel_t;

void setClearAdcPin(adc_channel_t adcChannel) {
    // ...function body...
} 
```

（从技术上讲，您不需要`= 0`,`= 1`等，因为编译器会从顺序中推断出来。默认情况下`enum`s 从 0 开始并为每个值递增 1。但是手动定义每个值更安全，并且可以让您做事就像只包括您可能使用的 3 个可能的 ADC 通道，即使它们不是连续的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T18:30:53.557

您可以通过这个肮脏的技巧检查编译器（而不是预处理器）中的范围：

```
const char PIN = 23;
struct check_23 {
    unsigned long bits: PIN+9;
}; 
```

如果 PIN > 23，这将不会编译

然后，为确保您的函数仅提供编译时常量作为参数，您提供宏而不是函数：

```
#define CONCAT(a, b) a##b
#define MAKESTRUCTNAME(a,b) CONCAT(a,b)

#define PinFunction(PinArg)\
struct MAKESTRUCTNAME(PinCheckStruct, __LINE__) {\
    unsigned long bits: (PinArg)+9;\
};\
RealPinFunction(PinArg);\ 
```

# cocos2d-iphone - Cocos2d,高清视网膜显示iPad

> ID：13237867
> 
> 赞同：0
> 
> 时间：2012-11-05T18:10:11.277
> 
> 标签：cocos2d-iphone

是否必须更新到最新的 cocos2d 才能获得 ipad 的视网膜显示以及 iPad 上的视网膜显示使用什么后缀？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T20:15:09.180

cocos2d 1.1 和 2.0 都支持 iPad Retina

后缀是

> -ipadhd

# java - 无法理解类数组

> ID：13237873
> 
> 赞同：0
> 
> 时间：2012-11-05T18:10:32.630
> 
> 标签：java

这是一个简短的代码片段：

```
someMethod ClassA getClassA() {
  List<ClassA.ClassB> classAType = Lists.newArrayList();
  //Now classAType is loaded with stuff here
  return ClassA.load(classAType.toArray(new ClassA.ClassB[classAType.size()]));
}

public abstract class ClassA {
  //Constructor
  public static abstract class ClassB {
    //some method
  }
} 
```

我不明白的部分是`return`声明。我想知道这`ClassA.ClassB[classAType.size()]`意味着什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:24:02.593

该`getClassA()`方法首先创建一个包含`ClassA.ClassB`由返回的对象的列表`Lists.newArrayList()`。然后，它`ClassA`通过调用`ClassA.load()`传递一个参数的静态方法返回：一个`ClassA.ClassB`与`classAType`.

这段代码：

```
classAType.toArray(new ClassA.ClassB[classAType.size()]) 
```

可能看起来有点复杂，但它只是创建了一个包含列表中所有元素的数组`classAType`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:21:42.657

```
new ClassA.ClassB[classAType.size()] 
```

`ClassA.ClassB`返回大小对象的数组`classAType.size()`

因为`ClassAType`is a `List`created with `Lists.newArrayList()`(`Lists.newArrayList()`这里没有定义所以下一部分是一个假设)，`classAType.size()`是 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T18:22:12.257

它正在设置数组的大小。但是它将为 0，因为您从未在 arraylist 中放置任何内容。代码没有多大意义......

# google-app-engine - “找不到 ssl 包。” GAE生产警告

> ID：13237878
> 
> 赞同：3
> 
> 时间：2012-11-05T18:10:54.347
> 
> 标签：google-app-engine

我知道这个问题没有太多信息，我希望有人以前见过类似的东西。

我在 GAE PRODUCTION 日志中收到以下警告：

```
W 2012-11-04 12:23:11.529 /base/python27_runtime/python27_lib/versions/1/lib/cacerts/urlfetch_cacerts.txt missing; without this urlfetch will not be able to validate SSL certificates

W 2012-11-04 12:23:11.529 No ssl package found. urlfetch will not be able to validate SSL certificates. 
```

这些似乎是从 python2.7 运行时发出的，而不是我的任何代码或我正在使用的库。

我在本地 dev_appserver 上没有看到这些警告

有人知道我错过了什么吗？

# php - 从 php.ini 包含的路径自动加载命名空间类

> ID：13237883
> 
> 赞同：1
> 
> 时间：2012-11-05T18:11:16.470
> 
> 标签：php, namespaces, autoload, spl-autoload-register, spl-autoloader

我有一个在项目外部目录中命名空间的类。该目录包含在`include_path`指令中。我想用一个`spl_autoload`类来自动加载该类。但是，我只得到错误。它似乎只是试图从项目目录加载文件。

这是一台 Windows 机器，但我希望它可以在 Windows 或 Linux 机器上工作

```
##incude_path directive##
include_path = ".;C:\xampp\php\PEAR;C:\Users\Joey\Dropbox\web\global_includes;C:\Users\Joey\Dropbox\web\global_includes\utility;C:\Users\Joey\Dropbox\web\global_includes\utility\arrayTools"

    //index.php
    require 'bootstrap.php';

    $array = array('Hello','world');
    $array[] = array('Hello','world','2');
    $array[2][1] = array('Hello','world',3);

    echo '<p>The number of dimesions: '.utility\arrayTools\arrayTools::numberOfDimensions($array).'</p>';

    //bootstrap.php
    spl_autoload_register('autoLoader::autoLoad');

    class autoLoader
    {
      public static function autoLoad($file)
      {
          if(is_string($file)){
              if(file_exists("$file.php")){
                  try{
                     include "$file.php";
                  }catch(Exception $exc){
                      echo '<pre><p>'.$exc->getMessage().'</p>'.$exc->getTraceAsString().'</pre>';
                  }
              }
          }
      }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:45:17.467

我找到了解决方法，但必须有比这更好的方法

```
<?php
//bootstrap.php
spl_autoload_register('autoLoader::autoLoad');

class autoLoader
{
    public static function autoLoad($file)
    {
        if(is_string($file)){
            $path_and_file = self::fileExists($file);
            if($path_and_file !== FALSE){
                include $path_and_file;
            }else{
                //This is for debugging purposes on dev only
                throw new Exception("$file Does Not exsist");
            }
        }else{
            throw new Exception('Classes must be a string');
        }
    }

    protected static function fileExists($file)
    {
        $include_paths = explode(';',get_include_path());
        foreach($include_paths as $path){
            if(file_exists("$path\\$file.php")){
                return "$path\\$file.php";
            }elseif(file_exists(str_replace('\\','/',"$path\\$file.php"))){
                return str_replace('\\','/',"$path\\$file.php");
            }
        }

        return FALSE;
    }

} 
```

# mysql - MySql 中的 LIMIT 子句似乎不适用于 IN() 子查询

> ID：13237891
> 
> 赞同：1
> 
> 时间：2012-11-05T18:11:50.930
> 
> 标签：mysql, subquery, limit

假设，我有如下 SQL 语句。

```
SELECT country_id, country_name 
FROM country 
WHERE country_id 
IN(SELECT country_id FROM state 
   WHERE LENGTH(state_name)>=5 
   ORDER BY LENGTH(state_name) DESC); 
```

它使用指定的子查询从`country`表中获取表中对应州名称`state`长度超过 5 个或更多字符的所有国家/地区。

在按降序排序后，我只想检索表中对应的**前 5 个州**的长度为 5 个或更多字符的国家/地区。`state`

在这种情况下，`LIMIT`带有子查询的子句似乎不起作用，以下查询也不起作用。

```
SELECT country_id, country_name 
FROM country 
WHERE country_id 
IN(SELECT country_id FROM state 
  WHERE LENGTH(state_name)>=5 
  ORDER BY LENGTH(state_name) DESC 
  LIMIT 5); 
```

与子查询一起使用的`LIMIT`子句导致如下指定的错误。

> 这个版本的 MySQL 还不支持 'LIMIT & IN/ALL/ANY/SOME 子查询'

我正在使用 MySql 版本 5.1.48

有没有办法解决这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T18:14:04.837

您将需要用针对同一子查询的子句替换该`IN()`子句。`INNER JOIN`正如错误消息所说，子查询`LIMIT`根本不支持。`IN()`

```
SELECT 
  country.country_id, 
  country.country_name 
FROM
  country
  /* JOIN the main `country` table against a subquery that retrieves the limited country_id set */
  INNER JOIN (
    SELECT country_id 
    FROM state 
    WHERE LENGTH(state_name)>=5 
    ORDER BY LENGTH(state_name) DESC 
    LIMIT 5
  ) subq ON country.country_id = subq.country_id 
```

### [这是一个演示](http://sqlfiddle.com/#!2/3210a/2)

*（是的，我知道加拿大人不称他们为“州”，当然 GBR 也不会）*

# html - 如何从纯文本转换为 URL 编码的 html

> ID：13237895
> 
> 赞同：0
> 
> 时间：2012-11-05T18:11:55.973
> 
> 标签：html, text, hex

我需要知道如何将文本消息转换为 URL 编码的 html。（我的意思是实际发送到 Web 服务器的 HTML 代码）

对话示例：

**文本：** `Hello, Brother!`
**HTML：** `Hello%2C+Brother%21`

如果有人帮助我，将非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:14:09.077

[`encodeURIComponent`](http://www.devguru.com/technologies/javascript/17447.asp)您可以使用 JavaScript 的方法对客户端进行 URL 编码。如果您使用 jQuery 等 JavaScript 库，当您将数据封装在对象中时，它们会为您处理它，例如，[`jQuery.get()`](http://api.jquery.com/jQuery.get/)使用`data`参数。

# javascript - jQuery重复元素

> ID：13237901
> 
> 赞同：2
> 
> 时间：2012-11-05T18:12:22.490
> 
> 标签：javascript, jquery, tags, element

我的代码使用户最多可以选择 5 个标签，显示标签并计算数量。

```
$(document).ready(function(e) {

    var tagname = "";
    var count = 0;  

    $(".tagchoose").click(function(){ 
        count++;
        if(count < 6) {
        $("#tagselectshow").html("Tags Selected: " + count + " tags selected");
        tagname = "<span class='selectedtg'>" + $(this).html() + "</span> / ";
        $("#displaythetags").append(tagname);
        }
    });

    $("#deletetags").click(function(){ 
        count = 0;  
        tagname = "";

        $("#tagselectshow").html("Tags Selected: " + count + " tags selected");
        $("#displaythetags").html(tagname); 
    });

}); 
```

不幸的是，目前代码不限制重复标签的选择，我想为用户添加限制，使其无法选择相同的标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:24:31.670

您可以将选定的标签保存在一个数组（标签）中，然后当用户添加标签时检查该项目不在数组中。

```
$(document).ready(function(e) {

    var tagname = "";
    var count = 0;
    var tags = [];
    var thisHTML = $(this).html();

    $(".tagchoose").click(function() {
        count++;
        if ($.inArray(thisHTML, tags) == -1){
        if (count < 6) {
            $("#tagselectshow").html("Tags Selected: " + count + " tags selected");
            tagname = "<span class='selectedtg'>" + thisHTML + "</span> / ";
            $("#displaythetags").append(tagname);
            tags.push(thisHTML);
        }
        }else{
          alert('Tag already chosen');            
        }
    });
    .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:16:19.460

将**选定的类**添加到选定的元素，然后添加您的逻辑..

```
$(document).ready(function(e) {

    var tagname = "";
    var count = 0;

    $(".tagchoose").click(function() {
        var $this = $(this);
        if ($this.hasClass('selected')) {
            $this.removeClass('selected');
        }
        else {
            $this.addClass('selected');
            count++;
            if (count < 6) {
                $("#tagselectshow").html("Tags Selected: " + count + " tags selected");
                tagname = "<span class='selectedtg'>" + $(this).html() + "</span> / ";
                $("#displaythetags").append(tagname);
            }
        }

    });

    $("#deletetags").click(function() {
        count = 0;
        tagname = "";

        $("#tagselectshow").html("Tags Selected: " + count + " tags selected");
        $("#displaythetags").html(tagname);
    });

});​ 
```

# python - 向前数算出a在时间b之后的时间

> ID：13237903
> 
> 赞同：1
> 
> 时间：2012-11-05T18:12:29.307
> 
> 标签：python, datetime

我需要一种方法来找出一个 datetime.time 在另一个 datetime.time 之后有多长时间 很简单，但是......问题是我的时间值是 24 小时制的，所以它不像从另一个值否定一个值那么简单。相反，如果我要及时计数并且在午夜时间循环，我需要计算 time_b 在 time_a 之后多长时间，即

```
time_a = 09:00
time_b = 04:00 
```

这里 time_b 是 time_a 之后的 19 小时

```
def time_after_time(time_a, time_b):

    a_hour = time_a.hour
    a_minute = time_a.minute
    b_hour = time_b.hour
    b_minute = time_b.minute

    out_hour = b_hour - a_hour
    out_minute = b_minute - a_minute

    if out_hour < 0:
        out_hour += 24

    if out_minute < 0:
        out_hour -= 1
        out_minute += 60

    return datetime.time(out_hour, out_minute) 
```

这是我的第一次尝试，但它给出了错误的结果。

谁能想到一个更清洁/正确的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T19:25:40.990

这是我的解决方案：

```
def time_after_time(time_a, time_b):
    time_a_min = time_a.hour * 60 + time_a.minute
    time_b_min = time_b.hour * 60 + time_b.minute
    out_min = time_b_min - time_a_min
    if out_min < 0:
        out_min += 24 * 60
    return datetime.time(out_min / 60, out_min % 60) 
```

您可以在[codepad.org](http://codepad.org/QMXWjZXR)上对其进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:15:12.147

```
timedif = DATETIME_1 - DATETIME_2
print timedif 
```

确保您使用 datetime.datetime 时间...

您可以将 datetime.time 转换为 datetime

```
datetime.datetime.combine(datetime.datetime.now().date(),datetimeTime_obj) 
```

是 09:00 - 10:00 = 1 小时还是 25 小时？那么最长是24小时吗？

```
import datetime

time_a = datetime.time(9,00)
time_b = datetime.time(5,0)
dte = datetime.datetime.now().date()

dt_a = datetime.datetime.combine(dte,time_a)

dt_b = datetime.datetime.combine(dte,time_b)
time_dif = dt_b - dt_a
time_dif2 = dt_a - dt_b
print "TimeDif:",time_dif,time_dif2
#output: 20:00:00 , 04:00:00 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T18:33:24.080

根据我的经验，无论*何时*从外部来源收到基于 24 小时的时间戳，都应立即在内部将其转换为绝对时间，例如从 1970 年开始的秒数。例如，参见`C`https [： //stackoverflow.com/a/12859648/318716](https://stackoverflow.com/a/12859648/318716) 的方法来做到这一点。

一旦你*这样做*了，那么简单的时间减法就变得容易和有效。

如果你*不*这样做，那么最终会出现时间戳***相差 48 小时的问题。***

例如，如果您正在分析历史存档数据或回放，则此类转换*有时*不应基于当前日期/时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T19:02:01.517

***第二个答案***（我不建议这样做，原因在我的第一个答案中给出）。在`C`你可以有：

```
int time1MinusTime2Positive(int t1, int t2) { // returns dt from 0 to <24 hours
    return fmod(t1 - t2 + 100 * 24 * 60 * 60, 24 * 60 * 60);
}

int time1MinusTime2(int t1, int t2) { // returns dt between -12 and +12 hours
    const int dt = t1 - t2;
    if (dt > 24 * 60 * 60 / 2)
       return dt - 24 * 60 * 60;
    else if (dt < -24 * 60 * 60 / 2)
       return dt + 24 * 60 * 60;
    else
       return dt;
} 
```

在这里，输入时间表示为从午夜开始的秒数，或者从 1970 年开始的秒数，或者从 1900 年开始的秒数——这无关紧要。输出以秒为单位，相对于“当前”午夜，无论“当前”可能意味着什么。

# java - 从 C 驱动器加载 Java 代码中的图像

> ID：13237908
> 
> 赞同：3
> 
> 时间：2012-11-05T18:12:57.760
> 
> 标签：java, image, swing, jframe

我是 Java 新手。我只是想将图像加载为背景`JFrame`。我想做的是从 C 驱动器（那不是我的工作区）获取图像，所以我做了什么`Board.java`：

```
 ImageIcon i = new ImageIcon("C:/image.png");
   img =i.getImage(); 
```

并尝试将它画成这样：

```
 public void paint(Graphics g )
    { 
    super.paint(g);
    Graphics2D  g2d= (Graphics2D) g;
    g2d.drawImage(img, 0, 100, null);
    } 
```

然后我像这样打电话给我的主班

```
 public static void main(String[] args) 
   {
    JFrame frame= new JFrame(" Game") ;
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(1200, 365);
    frame.setVisible(true);
    frame.add(new Board());

   } 
```

但是我没有显示任何图像，所以添加是合法的方式`Image`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T18:54:17.323

*   不要`paint()`覆盖`JFrame`
*   `setSize()`在设置为可见之前不要调用`JFrame`宁可使用`JFrame#pack()`
*   养成使用*/*的习惯，不管平台是否支持。

这是我做的一个例子：

![在此处输入图像描述](../Images/a36d1c8b61a2f8ee8818fa3b739188c8.png)

*   创建`JPanel`/`JLabel`实例
*   `paintComponent(..)`在`JPanel`/中覆盖`JLabel`
*   覆盖`getPreferredSize()`以返回尺寸正确的尺寸/组件`Image`
*   添加`JPanel`/`Jlabel`到`JFrame`实例
*   打包`JFrame`_`JFrame#pack()`
*   设置`JFrame`可见

**测试.java：**

```
//necessary imports
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Image;
import java.io.File;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class Test {

    static String filename = "c:/test.jpg";//your file path and name here use / as it will work on linux platforms too so get into the habbit

    /**
     * Default constructor
     */
    public Test() throws Exception {
        initComponents();
    }

    /**
     * Initialize GUI and components (including ActionListeners etc)
     */
    private void initComponents() throws Exception {
        JFrame frame = new JFrame("Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        final Image background = ImageIO.read(new File(filename));
        final Dimension jpanelDimensions = new Dimension(new ImageIcon(background).getIconWidth(), new ImageIcon(background).getIconHeight());

        frame.add(new JPanel() {
            @Override
            protected void paintComponent(Graphics grphcs) {
                super.paintComponent(grphcs);
                grphcs.drawImage(background, 0, 0, null);
            }

            //return a JPanel that matches images size
            @Override
            public Dimension getPreferredSize() {
                return jpanelDimensions;
            }
        });

        frame.setResizable(false);

        //pack frame (size JFrame to match preferred sizes of added components and set visible
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {

        /**
         * Create GUI and components on Event-Dispatch-Thread
         */
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    //set nimbus look and feel
                    for (UIManager.LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                        if ("Nimbus".equals(info.getName())) {
                            UIManager.setLookAndFeel(info.getClassName());
                            break;
                        }
                    }
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException e) {
                    e.printStackTrace();
                }
                try {
                    //create GUI instance
                    Test test = new Test();
                } catch (Exception ex) {
                    ex.printStackTrace();
                }
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:20:53.763

使用 Swing，您必须使用paintComponent() 来代替paint()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T18:17:15.703

改用此格式位置

```
C:\\1.png 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T18:24:34.970

在您的代码中：

移到`frame.add(new Board());`之前`frame.setVisible(true);`，即：

另外，添加`frame.pack();`

```
public static void main(String[] args) 
{
    JFrame frame= new JFrame("Game") ;
    frame.add(new Board());
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(1200, 365);
    frame.pack();
    frame.setVisible(true);
} 
```

一旦 JFrame 设置为可见，就应该只有事件调度线程才能触摸它。

作为旁注，除非您确切知道自己在做什么，否则请覆盖`paintComponent()`而不是：http: [//docs.oracle.com/javase/tutorial/uiswing/painting/closer.html](http://docs.oracle.com/javase/tutorial/uiswing/painting/closer.html)`paint()`

要点是它`paint()`实际上负责调用以下内容：`paintComponent()`、`paintBorder()`和`paintChildren()`。因此，如果您只是`paint()`盲目地覆盖，它将以您可能不希望的方式改变您的组件的行为。

# php - 显示几天前而不是日期

> ID：13237909
> 
> 赞同：1
> 
> 时间：2012-11-05T18:13:01.167
> 
> 标签：php, mysql, date-format

我的网站上有一个评论区，每条评论以正常日期格式（2012 年 11 月 5 日）发布时都会显示...但我想显示“1 天前”甚至“3 小时前”正常格式......这是我到目前为止的内容：

```
SELECT p.poll_id, p.title, date_format(c.posted, '%D %b %y') as time, COUNT( c.poll_id ) AS count, u.username
FROM users AS u
JOIN polls AS p ON u.user_id = p.user_id
LEFT JOIN comment AS c ON p.poll_id = c.poll_id
LIMIT 5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:15:21.850

使用[日期差异函数](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_datediff) 评估日期差异

```
SELECT p.poll_id, p.title,  DATEDIFF(NOW(), c.posted) AS daysold, COUNT( c.poll_id ) AS   count, u.username
  FROM users AS u
  JOIN polls AS p ON u.user_id = p.user_id
  LEFT JOIN comment AS c ON p.poll_id = c.poll_id
  LIMIT 5 
```

# mercurial - 更新已克隆到我的机器的 mercurial 存储库

> ID：13237912
> 
> 赞同：1
> 
> 时间：2012-11-05T18:13:34.460
> 
> 标签：mercurial

我在两台不同的虚拟机上有一个 mercurial repo，并在其中一台机器上处理 repo，并将更改推送回在线 repo。有没有办法在我的第二个虚拟机上更新 repo 而无需重新克隆 repo？

我尝试了 hg update 但没有奏效。

编辑：我想通了。

*   汞拉
*   汞更新

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T18:14:48.543

您需要使用`hg pull`从在线回购中提取。

假设这是您在第一个 VM 上所做的：

```
$ hg ci
$ hg push http://path_to_online_repo 
```

这是您在第二个 VM 上需要的：

```
$ hg pull http://path_to_online_repo
$ hg update 
```

# android - android如何将hashset放在适配器中以在listview中使用

> ID：13237918
> 
> 赞同：3
> 
> 时间：2012-11-05T18:13:57.970
> 
> 标签：android, listview, android-arrayadapter, hashset

这是我的问题，例如

我有一个定义对象 Receipt 的类，该类在 HashSet 中包含所有收据

```
public static Set<Receipt> allInstances = new HashSet<Receipt>(); 
```

这里我也有 getNumber()、getDate() 等所有的 getter

现在在 android 我想在 ListView 中显示收据我已经有类 public 类 ReceiptListFragment 扩展 ListFragment

这里 o OnCreate 方法我该怎么办？

我想要我的代码的最高性能 我已经看到了带有 ViewHolder 的 listview 和 arrayadapter 以在网络中获得最高性能代码

我真正的问题是因为我有一个带有对象的 HashSet，我无法在 getView 方法中的适配器类中获取 getNumber 来在 textview 中设置文本，这是我认为这样做的唯一方法

```
for(Receipt r : Receipt.allInstances){
TextView tv = (TextView) v.findViewById(R.id.receipt_row);
tv.setText("" + r.getNumber()); 
```

动态添加

但是这样做我没有使用适配器性能会怎样？也因为我有一个 HashSet 我没有位置也可能有重复的对象（这是正常的和有意的）

我应该像以前一样做一个循环并将所有哈希集传输到一个列表只是为了使用列表视图并执行 setListAdapter 这在性能方面看起来不是很好，因为对象的数量可能很高

就性能而言，最好动态地执行它或将所有对象传递到列表并使用带有视图的适配器等，就像那里的所有示例一样

还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T02:13:35.470

如果你想使用列表，你可以试试这个：

```
ArrayList<Receipt> receiptsList = new ArrayList<Receipt>(allInstances); 
```

创建你`adapter`的`receiptsList`并使用`setListAdapter(adapter)`. 看看这里：[http ://www.vogella.com/articles/AndroidListView/article.html#listfragments](http://www.vogella.com/articles/AndroidListView/article.html#listfragments)

# haskell - 在 Haskell 中使用元组定义递归数据类型

> ID：13237921
> 
> 赞同：11
> 
> 时间：2012-11-05T18:14:10.023
> 
> 标签：haskell

我无法在 Haskell 中定义新的数据类型。

我正在尝试创建一个数据类型`NumPair`，它将是一个包含两个整数或一个整数和另一个的元组`NumPair`。

例如，`(2, 2), (0, 5), (1, (2, 3)) and (0, (4, (3, 121)))`应该都是有效`NumPairs`的。

这是我为尝试执行此操作而编写的代码：

```
data NumPair = (Int, Int) | (Int, NumPair) deriving (Eq, Show) 
```

有人可以解释为什么这不起作用以及我应该怎么做吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-05T18:21:35.870

您需要为每个备选方案添加构造函数名称：

```
data NumPair = Pair (Int, Int) | More (Int, NumPair) deriving (Eq, Show) 
```

这些构造函数名称使您可以对数据类型进行模式匹配，如下所示：

```
f :: NumPair -> A
f (Pair (x, y )) = ...
f (More (x, np)) = ... 
```

然后，您可以使用构造函数来构建一个值（这就是它们被称为构造函数的原因）：

```
myNumPair :: NumPair
myNumPair = More (1, More (2, Pair (3, 4))) 
```

还有另外两种方法可以改进你的类型。Haskell 构造函数具有对多个字段的内置支持，因此您可以直接在构造函数中列出值，而不是使用元组，如下所示：

```
data NumPair = Pair Int Int | More Int NumPair deriving (Eq, Show) 
```

您可以改进它的另一种方法是认识到您刚刚为非空列表编写了类型。非空列表的最佳实现位于`Data.List.NonEmpty`包`semigroups`中，您可以[在此处找到](http://hackage.haskell.org/packages/archive/semigroups/0.8.4.1/doc/html/Data-List-NonEmpty.html)。

然后你的类型就变成了：

```
type NumPair = NonEmpty Int 
```

...并且您可以从该模块免费获得一堆非空列表上的功能。

**编辑**：nm 让我注意到你可能想要的是：

```
data NumPair = Pair (Int, Int) | More ((Int, Int), NumPair) 
```

...相当于：

```
type NumPair = NonEmpty (Int, Int) 
```

不同之处在于，后一个允许您附加整数对，而前一个跟随您的问题类型仅允许您附加整数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T19:28:12.080

你想要的是一个“真正的联合”类型，它在 Haskell 中是不存在的。Haskell 仅提供*标记*的联合，程序员必须将附加信息附加到所有数据。使用真正的联合与标记的联合需要权衡取舍；我不会试图以一种或另一种方式卖给你。但是，您*可以*通过使用提供真正联合类型的语言（例如 Typed Racket）来完全按照需要定义类型。

```
#lang typed/racket

(define-type Num-Pair
  (Rec R
    (U (Pair Integer Integer)
       (Pair Integer R))))

(: foo Num-Pair)
(define foo '(0 . (4 . (3 . 121)))) 
```

# php - Mysql_fetch_array 显示值为 0 或 1 的警告

> ID：13237935
> 
> 赞同：-1
> 
> 时间：2012-11-05T18:14:55.747
> 
> 标签：php, mysql, xampp, mamp, lamp

我的 SQL 查询计算满足条件的行数。有时这个值是 0 或 1。这将产生一个关于返回布尔值的错误。

如何避免这种情况？我不应该使用`mysql_fetch_array`吗？

```
// Query the db to count the # of comments.
$price_change_dbo = 
    mysql_query("
        SELECT COUNT(1) AS comment_count 
        FROM comments 
        WHERE user_id = '{$user_id}';"
    );

// Use the result. 
$price_change_row = mysql_fetch_array($price_change_dbo); 
```

这是警告：

```
Warning: mysql_fetch_array() expects parameter 1 to be resource, 
         boolean given in /Applications/MAMP/... on line 1. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:19:06.267

您应该检查结果是否为*false*。当查询 sql 命令时发生错误时，就会发生这种情况。如果结果是*false*，你应该打印错误

```
echo mysql_error(); 
```

（但是，您应该考虑使用 PDO 或 mysqli，因为不推荐使用 mysql_ 方法）。

最后，你的 SQL 是错误的。删除 {}，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T18:23:03.157

正如评论所说，`mysql_`不再推荐使用函数系列。

但是，为了解释实际发生的事情：

`mysql_query`不会直接返回您的计数结果，它会创建一个资源并返回一个数字标识符，其他`mysql_`函数将使用该标识符来获取该资源。

然后错误消息告诉您，您得到的不是资源，而是布尔值。通常，这意味着您`mysql_query`失败并返回`false`而不是资源标识符。

因此，您应该首先检查结果是否正确`false`并采取相应的行为。例如，用于`mysql_error`检查查询出了什么问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T18:19:10.073

我认为你的 sql 查询不好：

```
 "  SELECT COUNT(1) AS comment_count 
    FROM comments 
    WHERE user_id = '".$user_id."'" 
```

这些花括号会导致您的查询出错。这导致 mysql_query 不是有效资源，这就是 mysql_fetch_array 抱怨的原因

# r - 偏移量在二项式 GLM 中不起作用

> ID：13237940
> 
> 赞同：5
> 
> 时间：2012-11-05T18:15:18.073
> 
> 标签：r, glm

我正在尝试使用`glm( family='binomial')`.

这是模型：

```
model<-glm(f_ocur~altitud+UTM_X+UTM_Y+j_sin+j_cos+temp_res+pp, 
           offset=(log(1/off)), data=mydata, family='binomial') 
```

`mydata`有 76820 个观测值。响应变量 (f_ocur) 为 0-1。
该数据是更大数据集的*样本*，因此设置偏移量的想法是考虑到此处使用的数据代表要分析的真实数据的样本。

由于某种原因，偏移量不起作用。当我运行这个模型时，我得到了一个结果，但是当我运行相同的模型但没有偏移量时，我得到的结果与以前的模型完全相同。我期待一个不同的结果，但没有区别。

难道我做错了什么？偏移量是否应该与线性预测变量一起使用？像这样：

```
model <- glm(f_ocur~altitud+UTM_X+UTM_Y+j_sin+j_cos+temp_res+pp+offset(log(1/off)), 
             data=mydata, family='binomial') 
```

模型准备好后，我想将其与新数据一起使用。新数据将是验证此模型的数据，此数据具有相同的列。我的想法是使用：

```
validate <- predict(model, newdata=data2, type='response') 
```

我的问题来了，预测函数是否考虑了用于创建模型的偏移量？如果不是，我应该怎么做才能获得新数据的正确概率？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T18:44:17.490

我认为对数偏移与泊松族一起使用。如果是二项式，则不应使用对数。检查链接[https://stats.stackexchange.com/questions/25415/using-offset-in-binomial-model-to-account-for-increased-numbers-of-patients](https://stats.stackexchange.com/questions/25415/using-offset-in-binomial-model-to-account-for-increased-numbers-of-patients)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-16T03:43:43.163

看看你的问题，我猜你的主要问题是为什么偏移没有任何区别。

[从@Ben Bolker Rpub ( https://rpubs.com/bbolker/logregexp](https://rpubs.com/bbolker/logregexp) )中窃取一句话：“生态学（和其他地方）一个非常常见的情况是生存/二元结果模型，其中个体（每个测量一次）不同“

因此，在此基础上，我建议您可能正在寻找的代码：

```
model <- glm(f_ocur~altitud+UTM_X+UTM_Y+j_sin+j_cos+temp_res+pp, 
       data=mydata, family = binomial(link = cloglog),offset=log(1/off)) 
```

下面是一个小例子，它表明不仅有和没有偏移的结果不同，而且使用 AICc 模型选择，尽管“时间”与“站点”混淆，但更好的模型排名更高。

```
library(AICcmodavg)

set.seed(1)
time <- c(rep(1,50),rep(2,50))
site <- c(rep("site 1",50),rep("site 2",50))
surv <- c(rbinom(50,1,prob=0.7),rbinom(50,1,prob=0.7^2))

my.data <- data.frame(surv, site, time)

# setup AICc model list
Cand.models <- list( )

Cand.models[[1]] <- glm(surv ~ 1, data=my.data, family = binomial(link = cloglog), offset=log(1/time))
Cand.models[[2]] <- glm(surv ~ 1, data=my.data, family = binomial(link = cloglog))
Cand.models[[3]] <- glm(surv ~ site , data=my.data, family = binomial(link = cloglog), offset=log(1/time))

# create a vector of names to trace back models in set
Modnames <- paste("mod", 1:length(Cand.models), sep = " ")

# generate AICc table
aictab(cand.set = Cand.models, modnames = Modnames, sort = TRUE) 
```

# python - python中嵌套字典的排序列表

> ID：13237941
> 
> 赞同：13
> 
> 时间：2012-11-05T18:15:20.807
> 
> 标签：python, sorting, dictionary

我有类似的东西

```
[
    {
        "key": { "subkey1":1, "subkey2":"a"  }
    },
    {
        "key": { "subkey1":10, "subkey2":"b" }
    },
    {
        "key": { "subkey1":5, "subkey2":"c" }
    }
] 
```

并且需要：

```
[
    {
        "key": { "subkey1":10, "subkey2":"b" }
    },
    {
        "key": { "subkey1":5, "subkey2":"c" }
    },
    {
        "key": { "subkey1":1, "subkey2":"a" }
    }
] 
```

非常感谢！

编辑：我想按 subkey1 排序，这以前不清楚。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-05T18:19:23.880

[对函数](http://docs.python.org/2/library/functions.html#sorted)和[方法](http://docs.python.org/2/library/stdtypes.html#mutable-sequence-types)使用`key`关键字：[`sorted()`](http://docs.python.org/2/library/functions.html#sorted)[`sort()`](http://docs.python.org/2/library/stdtypes.html#mutable-sequence-types)

```
yourdata.sort(key=lambda e: e['key']['subkey'], reverse=True) 
```

演示：

```
>>> yourdata = [{'key': {'subkey': 1}}, {'key': {'subkey': 10}}, {'key': {'subkey': 5}}]
>>> yourdata.sort(key=lambda e: e['key']['subkey'], reverse=True)
>>> yourdata
[{'key': {'subkey': 10}}, {'key': {'subkey': 5}}, {'key': {'subkey': 1}}] 
```

这假设*所有*顶级字典都有一个`key`键，假设它是一个带`subkey`键的字典。

有关更多详细信息和技巧，请参阅[Python Sorting HOWTO](http://wiki.python.org/moin/HowTo/Sorting)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T18:20:27.173

假设您要按列表`d['key']['subkey']`中每个字典的值排序`d`，请使用以下命令：

```
sorted(yourdata, key=lambda d: d.get('key', {}).get('subkey'), reverse=True) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-05T18:17:53.050

```
sorted(yourdata, reverse=True) 
```

# ruby-on-rails - 部署到子目录的错误 URL

> ID：13237954
> 
> 赞同：0
> 
> 时间：2012-11-05T18:16:28.837
> 
> 标签：ruby-on-rails, ruby-on-rails-3, apache, passenger, dragonfly-gem

在我看来，我有：

```
<a href="<%= @project.file.url %>"><%= @project.file.name %></a> 
```

在本地，在开发中，一切正常，我可以下载文件。但是在生产中的 VPS 上，我得到了 404：

```
[Mon Nov 05 18:28:40 2012] [error] [client 88.7.246.152] File does not exist: 
  /srv/http/media, referer: http://www.stanosas.it/copisteria/projects/1 
```

没有踪迹`log/production.log`

`link_to`工作正常。

这是我的 Apache（乘客）设置[https://gist.github.com/4018657](https://gist.github.com/4018657)

我在子文件夹中访问我的应用程序，例如`www.myapp.com/copisteria`

这是`config/initializers/dragonfly.rb` [https://github.com/enricostano/copisteria/blob/master/config/initializers/dragonfly.rb](https://github.com/enricostano/copisteria/blob/master/config/initializers/dragonfly.rb)

这是`config/application.rb` [https://github.com/enricostano/copisteria/blob/master/config/application.rb](https://github.com/enricostano/copisteria/blob/master/config/application.rb)

任何提示？

编辑： Apache 或Passenger 似乎无法识别URL 中的子目录。

# python - 没有命令关键字的 Python Argparse

> ID：13237955
> 
> 赞同：0
> 
> 时间：2012-11-05T18:16:29.200
> 
> 标签：python, python-3.x, argparse

所以，我想做的是 Python 代码中的 LS Mimic。

我已经完成了大部分命令，但是我有一件事我找不到解决方案

所以，如果`ls`命令得到这个命令行，

`ls test1`

它应该找到该`test1`目录，然后`ls`在该目录中执行。

但是，由于我只能找到在实际使用之前创建需要关键字的参数的方法，所以我找不到这样做的方法。

不可能是这样的

`ls -move_dir test1`

如果程序认为没有命令也没关系，它会按照上面的方式处理。（它将找到该目录并运行`ls`）

请帮我 ！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T18:31:40.947

这有帮助吗？

```
import argparse
p = argparse.ArgumentParser()
p.add_argument('a', nargs='*')
res = p.parse_args()
print res.a 
```

结果：

```
% python test.py 1 2 3
['1', '2', '3'] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-05T18:29:40.913

尝试研究使用`sys.argv[]`

# javascript - Colspan for Scriptaculous/Prototype DOM 元素

> ID：13237958
> 
> 赞同：1
> 
> 时间：2012-11-05T18:16:38.903
> 
> 标签：javascript, html, scriptaculous

我使用 scriptaculose/prototype Builder 来创建 TR 和 TD。colspan 在 IE 中不起作用，但在 FF 和 Chrome 中起作用。你在这个问题上有什么经验吗？

这在 IE 中不起作用，但在 FF 和 Chrome 中起作用：

`Builder.node('td',{'colspan':'12','class':'bdr-bottom'},(noteText))`

这适用于 IE、FF 和 Chrome：

```
for (var i=1; i<numCols; i++)
{       
    noteRowSpan=Builder.node('td',{'class':'bdr-bottom'},(''));     
    $(noteRow2).insert($(noteRowSpan));  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:22:19.657

谢谢。我正在使用新元素，它工作正常。如何使用嵌套的新元素？代码不起作用：

```
noteRow1= new Element('tr',                           
                       new Element('td',{'class': 'bld rt'},'Date:'),
                       new Element('td').update(noteText)
                       ); 
```

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T02:31:22.893

如果您使用`new Element()`下面的类似内容，则不需要加载 scriptaculous 库，除非您需要效果 - 这些都内置在代码 PrototypeJS 框架中。

这个

`Builder.node('td',{'colspan':'12','class':'bdr-bottom'},(noteText))`

可以改为

`new Element('td',{'colspan':12,'class':'bdr-bottom'}).update(noteText);`

这个

```
for (var i=1; i<numCols; i++)
{       
    noteRowSpan=Builder.node('td',{'class':'bdr-bottom'},(''));     
    $(noteRow2).insert($(noteRowSpan));  
} 
```

可以改成这个

```
for(var i=1 ; i<numCols; i++)
{
    noteRowSpan = new Element('td',{'class':'bdr-bottom'});
    $(noteRow2).insert(noteRowSpan);
    //if noteRow2 is created with new Element() you don't need to re-extend it do it like this
    noteRow2.insert(noteRowSpan);
} 
```

**编辑跟进**

该`new Element()`方法的参数不是子元素，而是您要创建的元素的属性。

为了你想做的事

```
noteRow1= new Element('tr',                           
                   new Element('td',{'class': 'bld rt'},'Date:'),
                   new Element('td').update(noteText)
                   ); 
```

应该这样做

```
noteRow1= new Element('tr');
noteRow1.insert(new Element('td',{'class': 'bld rt'}.update('Date:'));
noteRow1.insert(new Element('td').update(noteText)); 
```

或链接在一起

```
noteRow1= new Element('tr').insert(new Element('td',{'class': 'bld rt'}).update('Date:')).insert(new Element('td').update(noteText)); 
```

也作为指南的注释 - 您可以单击评论链接以提出后续问题

# r - data.table 返回多行

> ID：13237960
> 
> 赞同：-1
> 
> 时间：2012-11-05T18:16:54.123
> 
> 标签：r, data.table

我正在尝试为 data.table 中的某些组返回多个列。我使用一个函数来分隔一个值列表并为每个组计算一个向量。我想为这样的表返回这些值

```
address1, time1, value1
address1, time2, value2
address1, time3, value3 
```

我将 time1-time2 分组在一个函数中，并希望返回类似这样的内容

```
address1,sum(value1),       mean(value1)                     (by timegr1)
address1,sum(value2+value3),mean(value2+value3)              (by timegr2) 
```

我设法计算了所有值，只是无法格式化结果，因此它将两个时间组放在不同的行中，并将总和和平均值保持在同一行中。

编辑这里是代码：

```
v <- data.table(address =c(1,1,1,1),time=c(1,50,51,52),value=c(1,2,3,4))

fun <- function(time,value) {
data <- data.table(time=time,value=value)
#this split depends on a number of criteria
k <- split(data,c(0,rep(1,nrow(data)-1))) 
k1 <- sapply(k,function(x) c(mean(x$value),sum(x$value)))
return(k1)
}

v1 <- v[,fun(time,value),by=address] 
```

V1作为

```
 address V1
1:       1  1
2:       1  1
3:       1  3
4:       1  9 
```

我真的需要类似的东西

```
 address  mean sum
1: 1        1    1
2: 1        3    9 
```

多谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T19:25:08.370

要返回多行，data.table 应用的函数应该返回一个向量或向量列表，如下例所示。

```
library(data.table)

(dat <- data.table(expand.grid(sub=1:4, score=1:4), key="sub"))
#     sub score
#  1:   1     1
#  2:   1     2
#  3:   1     3
#  4:   1     4
#  5:   2     1
#  6:   2     2
#  7:   2     3
#  8:   2     4
#  9:   3     1
# 10:   3     2
# 11:   3     3
# 12:   3     4
# 13:   4     1
# 14:   4     2
# 15:   4     3
# 16:   4     4

dat[,list(stat=c("mean","sd"), value=c(mean(score),sd(score))),by=sub]
#    sub stat    value
# 1:   1 mean 2.500000
# 2:   1   sd 1.290994
# 3:   2 mean 2.500000
# 4:   2   sd 1.290994
# 5:   3 mean 2.500000
# 6:   3   sd 1.290994
# 7:   4 mean 2.500000
# 8:   4   sd 1.290994 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T00:13:54.017

我只能分两步实现

```
fun <- function(x) {
    c(0,rep(1,length(x)-1)) 
}

v <- data.table(address =c(1,1,1,1),time=c(1,50,51,52),value=c(1,2,3,4))

v1 <- v[,group:=fun(time),by=address]

v2 <- v1[,list(mean=mean(value),sum=sum(value)),by=list(address,group)]

   address group mean sum
1:       1     0    1   1
2:       1     1    3   9 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-13T16:16:18.777

这个老问题已经有了一个公认的答案。但是，答案似乎无法重现问题中显示的预期结果，或者看起来过于复杂，恕我直言。

如果我理解正确，OP 希望`address`通过一个依赖于`time`. 分组变量的计算可以在传递给`by`参数的列表表达式中即时完成。无需`group`事先创建单独的变量或`split()`在函数中使用。

使用当前 CRAN 版本 1.10.4-3`data.table`的解决方案是单行的：

```
v[, .(mean = mean(value), sum = sum(value)), by = .(address, timegrp = (1:nrow(v)) == 1L)] 
```

> ```
>  address timegrp mean sum
> 1:       1    TRUE    1   1
> 2:       1   FALSE    3   9 
> ```

OP 的预期结果不包含第二个分组变量。由于 OP 选择的方法，这可能只是偶然发生的。但是，如果需要移除，可以通过以下方式实现：

```
v[, .(mean = mean(value), sum = sum(value)), by = .(address, timegrp = (1:nrow(v)) == 1L)][
  , timegrp := NULL][] 
```

> ```
>  address mean sum
> 1:       1    1   1
> 2:       1    3   9 
> ```

或者，`time`可以按以下方式分组

```
v[, .(mean = mean(value), sum = sum(value)), by = .(address, timegrp = time %/% 10)] 
```

> ```
>  address timegrp mean sum
> 1:       1       0    1   1
> 2:       1       5    3   9 
> ```

# html - 如何并置 DIV 和 Anchor

> ID：13237961
> 
> 赞同：1
> 
> 时间：2012-11-05T18:17:01.847
> 
> 标签：html, css

这是我的 HTML：

```
<DIV class = "parent">
   <DIV class = "child">
   <Anchor ...>
</DIV> 
```

如何确保 DIV 和 Anchor 兄弟姐妹居中且彼此相邻？

谢谢，凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:20:18.903

你可以这样做：

1.  将您的`.child`div 设置为`display: inline`.

2.  为您的父 div 设置宽度，并将其左右边距设置为`auto`

CSS看起来像：

```
div.child { display: inline; }
div.parent { width: 400px; margin: 0 auto; } 
```

根据您的需要调整父宽度。

请参阅工作[**演示**](https://tinker.io/ca725)。

# ios - 如何在 iPhone 模拟器上重置 Twitter 访问权限

> ID：13237962
> 
> 赞同：2
> 
> 时间：2012-11-05T18:17:03.317
> 
> 标签：ios, ios-simulator, acaccount

标题就是问题。注意：这个问题仅限于 iOS 模拟器 - 在设备上运行得更好。

我正在构建一个通过 iPhone 上的 Twitter 帐户访问 Twitter 的客户端。它做的第一件事是通过`requestAccessToAccountsWithType:options:completion:`ACAccountStore 方法请求对帐户的许可。如果只有一个帐户，完成处理程序将选择该帐户，并在多个帐户时允许用户选择一个帐户。此外，如果访问被拒绝，它会显示有关功能受限的警报。

我正在尝试验证该方法的完成处理程序，尤其是访问被拒绝的部分，但我对此并不感到高兴。

我的第一个想法是检查设置>隐私> Twitter。没有列出任何应用程序（即使我的应用程序实际上正在访问该帐户），所以我不能在那里修改它。我已经尝试过设置>常规>重置>重置位置和隐私，但那里也没有任何乐趣。似乎也没有菜单项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T18:29:48.267

这是一种硬核的重置方式，但是如果您尝试过的其他方法不起作用，那么应该这样做。转到iOS模拟器->重置内容和设置...

![如何重置内容和设置](../Images/5517d310ec238d14a5be809a2c5d28be.png)

# vba - 调整脚本 - 从外部源复制数据

> ID：13237968
> 
> 赞同：-1
> 
> 时间：2012-11-05T18:17:34.203
> 
> 标签：vba, excel, copy

我现在正在使用一个运行良好的脚本（如下），尽管使用它需要大量的手动工作，而且效果不是我需要的 100%。

我希望此脚本始终复制固定文件 (MIS_rapport.csv) 的内容并将其粘贴到其他工作簿的活动工作表中，称为 Based.xls

有什么帮助吗？

提前致谢！

```
Private Declare Function SetCurrentDirectoryA Lib _
 "kernel32" (ByVal lpPathName As String) As Long

Sub ChDirNet(szPath As String)
     SetCurrentDirectoryA szPath
End Sub

Sub Combine_Workbooks_Select_Files()
     Dim MyPath As String
     Dim SourceRcount As Long, Fnum As Long
     Dim mybook As Workbook, BaseWks As Worksheet
     Dim sourceRange As Range, destrange As Range
     Dim rnum As Long, CalcMode As Long
     Dim SaveDriveDir As String
     Dim FName As Variant

    With Application
         CalcMode = .Calculation
         .Calculation = xlCalculationManual
         .ScreenUpdating = False
         .EnableEvents = False
     End With

    SaveDriveDir = CurDir
     ChDirNet "C:\"

    FName = Application.GetOpenFilename(filefilter:="Excel Files (*.xl*), *.xl*", _
                                         MultiSelect:=True)
     If IsArray(FName) Then
         Set BaseWks = Workbooks.Add(xlWBATWorksheet).Worksheets(1)
         rnum = 1
         For Fnum = LBound(FName) To UBound(FName)
             Set mybook = Nothing
             On Error Resume Next
             Set mybook = Workbooks.Open(FName(Fnum))
             On Error GoTo 0
             If Not mybook Is Nothing Then
                 On Error Resume Next
                 With mybook.Worksheets(1)
                     Set sourceRange = .Range("A1:W300")
                 End With
                 If Err.Number > 0 Then
                     Err.Clear
                     Set sourceRange = Nothing
                 Else
         If sourceRange.Columns.Count >= BaseWks.Columns.Count Then
                         Set sourceRange = Nothing
                     End If
                 End If
                 On Error GoTo 0

                If Not sourceRange Is Nothing Then

                    SourceRcount = sourceRange.Rows.Count

                    If rnum + SourceRcount >= BaseWks.Rows.Count Then
                         MsgBox "Not enough rows in the sheet. "
                         BaseWks.Columns.AutoFit
                         mybook.Close savechanges:=False
                         GoTo ExitTheSub
                     Else
                         Set destrange = BaseWks.Range("A" & rnum)
                         With sourceRange
                             Set destrange = destrange. _
                                             Resize(.Rows.Count, .Columns.Count)
                         End With
                         destrange.Value = sourceRange.Value

                        rnum = rnum + SourceRcount
                     End If
                 End If
                 mybook.Close savechanges:=False
             End If
         Next Fnum
         BaseWks.Columns.AutoFit
     End If
ExitTheSub:
    With Application
         .ScreenUpdating = True
         .EnableEvents = True
         .Calculation = CalcMode
     End With
     ChDirNet SaveDriveDir
 End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:48:02.610

**打开一个单独的文件：**

```
ChDir "[Path here]"                          'get into the right folder here
Workbooks.Open Filename:= "[Path here]"      'include the filename in this path

'copy data into workbook using: Sheets("workbookname").Range("A2") or_
'select sheets and use ActiveSheet.

ActiveWindow.Close                          'closes out the file 
```

阅读我在其他帖子上的完整答案以[获取](https://stackoverflow.com/questions/12951946/excel-vba-open-workbook-perform-actions-save-as-close/12955462#12955462)更多上下文

# android - Android 服务失去互联网连接

> ID：13237972
> 
> 赞同：2
> 
> 时间：2012-11-05T18:17:59.240
> 
> 标签：android, service, connection

我开发了一个应用程序来经常通过 HttpPost 向 Internet 发送数据。该应用程序分为两部分：

1）无限运行的服务，2）用户可以设置一些数据连接的东西时的活动。

服务属性：

1) 作为前台服务运行，2) 涉及 WakeLock（设置了标志 PARTIAL_WAKE_LOC）。

活动连接到服务，当用户选择“开始”按钮（设置一些特定选项后）时，它应该每 10 秒向服务器发送一次数据。如果用户没有“单击”按钮并点击返回，则活动完成，服务也完成。但是，选择“开始”后，服务启动（调用startService（）），这意味着它不会在活动后销毁并继续运行，直到用户选择“停止”，即调用stopService（）。

该解决方案运行良好，但取决于手机型号，它有时会在工作几个小时后停止发送任何内容，因为数据传输终止。甚至浏览器也无法显示任何页面。有时打开和关闭“使用数据包数据”会有所帮助，但更多时候不会。重启手机总能解决问题。最奇怪的是，浏览器可以整天不间断地工作。我准备了一个带有 JS 代码的特殊页面，它强制浏览器每 10 秒（使用 AJAX）请求一些数据，并且它可以完美运行许多小时。当我启动我的应用程序时，它会发送数据，比如说，2-3 小时没有任何问题，然后突然互联网连接关闭。

我不知道是什么导致了这些问题。任何帮助，将不胜感激。我不显示代码，因为它很长。

先感谢您！

**编辑**

导致问题的设备是搭载 Android 2.3.6（内核版本 2.6.35.7）的三星 Galaxy Pocket GT-S5300。

# module - zend 框架 2 导入模块 js

> ID：13237977
> 
> 赞同：0
> 
> 时间：2012-11-05T18:18:22.947
> 
> 标签：module, zend-framework2

我不知道如何在我的新模块 Zend Framework 2 中导入一个文件 javascript。

代码位于：vendor\name-module\js\test.js

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:22:56.630

关于什么：

```
$this->headScript()->prependFile('../../vendor/name-module/js/test.js'); 
```

`../`回到公共`../../`进入主应用程序

确保`echo $this->headScript();`在布局或视图中

如果您想为每个控制器使用一个 javaScript 文件，请像这样使用它：

```
use Zend\View\Renderer\PhpRenderer;

...

public function indexAction()
{
    $headScript = new PhpRenderer();
    $headScript->headScript()->appendFile('../../vendor/name-module/js/test.js');
} 
```

编辑：

你可以使用`public`文件夹。创建一个名为的文件夹`js`并将 JavaScript 文件放在那里，然后使用：

```
$headScript->headScript()->appendFile('/js/test.js'); 
```

# struts - 使用struts2框架时，可以在视图组件中使用非Struts标签吗？

> ID：13237982
> 
> 赞同：1
> 
> 时间：2012-11-05T18:18:56.830
> 
> 标签：struts

我是 struts2 框架的新手。我写了一个小应用程序并使它工作。但是我们的客户端非常特定于它的外观和客户端验证计划使用 Jquery 作为前端层。

想知道我可以在正在使用的 JSP 中实现或编写非 struts 标签吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:00:44.940

Struts2 为服务器端验证提供了一个很好的选择，通过 Java、XML 或 Annotations...

顺便说一句，如果您真的只想执行客户端验证，

好的，

您可以将在任何非 struts JSP 或 HTML 中使用的相同 javascript 库放入 JSP...

只需导入它们并开始使用它们。

# wxwidgets - 启动时发布配置-1

> ID：13237987
> 
> 赞同：0
> 
> 时间：2012-11-05T18:19:20.103
> 
> 标签：wxwidgets, codeblocks

我试图用发布配置编译我用 Code::Blocks 制作的一个小程序，但我得到了这个错误。由于我不是真正的专家，有人可以解释一下发生了什么吗？调试配置工作正常。我不知道如何解决不匹配的日志状态。抱歉，如果您需要一些代码片段来帮助我，我可以在需要时提供。谢谢！

```
#0 (    0xb7fdd424 in __kernel_vsyscall() (??:??)
#1 0xb77651df   raise() (/lib/i386-linux-gnu/libc.so.6:??)
#2 0xb7768825   abort() (/lib/i386-linux-gnu/libc.so.6:??)
#3 0xb7ab03db   wxVLogFatalError (szFormat=0x80a615c L"Mismatch between the program and library build versions detected.\nThe library used 2.8 (debug,Unicode,compiler with C++ ABI 1002,wx containers,compatible with 2.6),\nand your program used 2.8(no debug"..., argptr=0xbffff574 "\360M\n\b|K\n\b\\O\n\b\\\301\a\b") (../src/common/log.cpp:144)
#4 0xb7ab0443   wxLogFatalError (szFormat=0x80a615c L"Mismatch between the program and library build versions detected.\nThe library used 2.8 (debug,Unicode,compiler with C++ ABI 1002,wx containers,compatible with 2.6),\nand your program used 2.8(no debug"...) (../src/common/log.cpp:152)
#5 (    0xb7a608f7 in wxAppConsole::CheckBuildOptions(optionsSignature=0x805edd4 "2.8 (no debug,Unicode,compiler with C++ ABI 1002,wx containers,compatible with 2.6) (../src/common/appbase.cpp:427)
#6 (    0x080545a8 in ??() (??:??)
#7 0xb7aa22a6   wxEntryStart(argc=@0xbffff670: 1, argv=0x8093d88) (../src/common/init.cpp:273)
#8 0xb7aa25df   wxInitialize(argc=1, argv=0x8093d88) (../src/common/init.cpp:479)
#9 0xb7aa2750   wxInitializer(argv=0x8093d88, argc=<optimized out>, this=<synthetic pointer>) (../include/wx/init.h:81)
#10 (   wxEntry(argc=@0xb7b8f6d0: 1, argv=0x8093d88) (../src/common/init.cpp:417)
#11 0xb7aa2846  wxEntry(argc=@0xbffff6d0: 1, argv=0xbffff764) (../src/common/init.cpp:460)
#12 (   0x08052f2b in ??() (??:??)
#13 0xb77504d3  __libc_start_main() (/lib/i386-linux-gnu/libc.so.6:??)
#14 (   0x08053555 in ??() (??:?? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:25:40.443

看起来您的发布库和包含文件来自不同版本的 wxWidgets。

尝试构建示例程序之一。如果这样可行，那么您的项目配置有问题 - 您需要代码块专家的帮助来解决这个问题。如果它不起作用，那么您的 wxWidgets 安装有问题 - 尝试获取并构建新安装。

# c - 在 fork()-ing 之后孩子没有执行

> ID：13237992
> 
> 赞同：0
> 
> 时间：2012-11-05T18:19:25.120
> 
> 标签：c, linux, exec, fork, runtime-error

```
int status=0;
int PID = fork();
if(PID == 0)
{
   char *path = strcat(pathToken,strcat("/",command));
   printf("path: %s\n",path);
   execl(path,command,"-l",NULL);
}
else if(PID>0)
{
   printf("pid: %d. ",PID);
   printf("I'm parent process\n");
   wait(&status);
} 
```

输出：

```
pid: 20027\. I'm parent process 
```

为什么进不去`if(PID==0)`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T18:21:58.137

您正在尝试在以下位置修改字符串文字：

```
strcat("/",command) 
```

这会导致未定义的行为。

strcat 的声明是：

```
char * strcat ( char * destination, const char * source ); 
```

并将源字符串的副本附加到目标字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T18:24:38.707

> 问：为什么不输入“if pid == 0”）？

A：应该是这样的：）

两个建议：

1) 在调试器下单步执行，在调用“execl()”之前查看“路径”是什么。我想你会感到惊讶。

2) 请务必检查代码中“execl()”的错误状态。永远不要假设它不会失败，如果确实如此，请确保打印有意义的错误消息（和/或优雅地恢复）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T18:29:24.713

尝试更改此行

```
char *path = strcat(pathToken,strcat("/",command)); 
```

到

```
char * path = malloc(strlen(pathtoken) +
                     strlen(command) + 2); /* 1 for null + one for / */
strcpy(path, pathToken);
strcat(path, "/");
strcat(path, command); 
```

我认为这应该可以解决问题。

# jquery - JQuery + SVG 对象：正确捕获点击事件

> ID：13237995
> 
> 赞同：4
> 
> 时间：2012-11-05T18:19:37.047
> 
> 标签：jquery, html, jquery-selectors, svg

好的，我正在尝试捕获菜单项上的点击事件

这是我的html：

```
<nav>
<ul>
    <li class="active left" id="profileLink">
        <object type="image/svg+xml" data="public/img/nav/profile.svg">    
                <img src="public/img/nav/profile.png" alt="Blue Square"/>     
        </object>
    </li>
    <li class="left" id="suggestionsLink">
        <object type="image/svg+xml" data="public/img/nav/suggestions.svg">    
                <img src="public/img/nav/suggestions.png" alt="Blue Square"/>     
        </object>
    </li>
    <li class="right" id="settingsLink">
        <object type="image/svg+xml" data="public/img/nav/settings.svg">    
                <img src="public/img/nav/settings.png" alt="Blue Square"/>     
        </object>
    </li>
    <li class="right" id="statisticsLink">
        <object type="image/svg+xml" data="public/img/nav/statistics.svg">    
                <img src="public/img/nav/statistics.png" alt="Blue Square"/>     
        </object>
    </li>

    <li class="middle" id="friendsLink">
        <object type="image/svg+xml" data="public/img/nav/friends.svg">    
                <img src="public/img/nav/friends.png" alt="Blue Square"/>     
        </object>
    </li>
</ul> 
```

这是我正在使用的脚本：

```
 $("#wrapper").on("click", '#friendsLink', function(){
       console.log('test');
       loadFriends();
    }); 
```

当我使用脚本选择一个普通的 a-tag 时，它工作得很好，但在这个 svg 对象上它根本不起作用。请注意，单击 li 元素的填充区域时它确实有效。但不是在单击 svg 图像区域时。

此线程中的帖子表明 svg dom 与 html dom 不同，因此 jquerys 事件失败。

[jQuery 选择器 + SVG 不兼容？](https://stackoverflow.com/questions/3294553/jquery-selector-svg-incompatible)

尝试处理 svg 元素上的点击事件时该怎么办？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T19:23:30.587

如果您想使用`<object>`，您必须将点击处理放在 svg 内容上，即`<svg>`public/img/nav/profile.svg 等的根元素。

如果要保持原样处理，则需要使用`<image>`元素作为`<svg>`容器而不是`<object>`元素。这有其自身的限制，例如没有脚本和回退。

第三种选择可能是在每个 svg 元素上放置一个绝对定位的透明 div，并在其上处理 onclick。

您必须选择最适合您需求的解决方案。

# java - 是否有用于将谓词定义为类似 SQL 的字符串的 Java 库？

> ID：13237998
> 
> 赞同：7
> 
> 时间：2012-11-05T18:19:50.017
> 
> 标签：java, sql, el, predicate, lambdaj

Lambdaj（和其他一些类似的库）提供了一个`having`函数，允许我像这样定义谓词（直接来自[lambdaj 功能](http://code.google.com/p/lambdaj/wiki/LambdajFeatures)页面的示例）：

```
List<Person> oldFriends = 
    filter(having(on(Person.class).getAge(), greaterThan(30)), meAndMyFriends); 
```

我非常希望能够使用简单的字符串语法来定义我的 Java 谓词对象`"age > 30"`——类似于 SQL where 子句——所以上面的过滤器变成了这样：

```
List<Person> oldFriends = 
    filter(having(Person.class, "age > 30"), meAndMyFriends); 
```

是否存在这样的库，或者任何人都可以为我自己构建的查询解析部分推荐一些构建块？我实际上并不介意它创建什么样的谓词（hamcrest、guava 等）。

在我的脑海中，我可以想到它支持的许多事情：平等和不等式，自定义和原始类型，和/或/不是，括号，`LIKE`（用于字符串），`in(...)`枚举的解释名称，属性的属性。

这是一个更复杂的谓词的示例：

```
"salesCount > 10 and (country='UK' or city='New York')
and attitude not in (MENACING, RUDE)
and product.name <> 'Widget' " 
```

（此示例假定应用谓词的类（例如`SalesPerson`类）具有方法 getSalesCount()、getCountry() 和 getCity()，以及 getAttitude()（返回枚举）。它还有一个属性getProduct，它返回一个带有方法 getName 的类型）。

**动机**：我们有一个客户端-服务器系统，它有多种语言 API（目前是 Java 和 C#）；我正在为用户寻找一种与语言无关的方式来指定一个谓词，该谓词过滤一组对象，这些对象的确切内容只有服务器进程（用 Java 编写）知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T08:51:28.647

我会看看[MVEL](http://mvel.documentnode.com/)。它支持类似的表达式：

`(user.name == 'John Doe') && ((x * 2) - 1) > 20`

曾经在项目中使用它来表达客户的一些基本业务规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:23:29.087

不确定这样的库是否已经存在，但您可以使用 groovy 即时编译/评估此类表达式。