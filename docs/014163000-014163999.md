# StackOverflow 问答 14163000-14163999

# java - 如何从 Java 将项目添加到 XML 字符串数组然后保存？

> ID：14163000
> 
> 赞同：-1
> 
> 时间：2013-01-04T18:45:57.873
> 
> 标签：java, android, xml, save, arrays

我有一个如下的 XML 文件：

```
<string-array name="Cube_type_entries">
    <item>2x2x2</item>
    <item>3x3x3</item>
    <item>4x4x4</item>
    <item>5x5x5</item>
    <item>6x6x6</item>
    <item>7x7x7</item>
    <item>8x8x8</item>
    <item>9x9x9</item>
    <item>Pyraminx</item>
    <item>Megaminx</item>
    <item>Clock</item>
</string-array>
<string-array name="Cube_type_values">
    <item>x2</item>
    <item>x3</item>
    <item>x4</item>
    <item>x5</item>
    <item>x6</item>
    <item>x7</item>
    <item>x8</item>
    <item>x9</item>
    <item>Pyraminx</item>
    <item>Megaminx</item>
    <item>Clock</item>
</string-array> 
```

（它有资源标签，还有其他需要的东西）

而且，我想向 Cube_type_entries 添加一个项目，以便用户可以自定义他想要的内容。所以，用户点击了一个 Enter 按钮，我有代码，但我不知道如何将它插入到字符串数组中然后保存它。（我不是在寻找动态的，我只是希望它能够不时地将其保存到表格中）

那么，如何添加到 XML 字符串数组，然后将其保存在 Java 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T18:53:56.043

你可以将你的 xml 加载到对象中，我认为 simpleXML 是一个可以与 android 一起使用的库。

# php - 创建文本文件会引发错误

> ID：14163002
> 
> 赞同：0
> 
> 时间：2013-01-04T18:46:03.840
> 
> 标签：php

我是一个php初学者。我希望每次打开网页时都创建一个不存在的文件。但是每次运行程序时，我都会收到一个错误，提示我没有创建文件。这是我的代码：

```
$ip=$_SERVER["REMOTE_ADDR"];
if(!isset($_COOKIE['firsttime'])){
  setcookie('firsttime', 'no');
  $myfile = 'file/form'.$ip.'.txt';
  if(file_exists($myfile) == FALSE){
    $fo = fopen($myfile, 'w');
    $code = '<form action = "" method = "post">';
    fwrite($fo, $code);
    fclose($fo);
  }else{
    unlink($myfile);
    $file = new File();
  }

} 
```

我的错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T18:48:33.563

```
$ourFileName = "testFile.txt";
$ourFileHandle = fopen($ourFileName, 'w') or die("can't open file");
fclose($ourFileHandle); 
```

这样做打开一个文件，如果文件不存在，它将创建该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T18:52:25.290

不完全确定，但这会导致一个非常奇怪的文件名。

```
$myfile = 'file/form'.$ip.'.txt'; 
```

如果我的 ip 是 1.0.0.01.23 （真的很随机​​而且很奇怪），文件名将是：

```
file/form.1.0.0.01.23..txt 
```

尝试在记事本中保存具有该名称的文件。

# jquery - 使用父元素的属性设置 img src 的值

> ID：14163004
> 
> 赞同：1
> 
> 时间：2013-01-04T18:46:11.903
> 
> 标签：jquery, list, attributes

我有一个产品列表，在每个带有 jquery 的 li 元素中，我想在 li 元素的 img 中的属性 data-thumb 中显示图像。即在每个 li 元素中将 img src 的值设置为 data-thumb 的值，但是在加载时我想显示已经存在的 ajax-loader.gif。有人能引导我走向正确的方向吗？

例子：

```
<li data-id="7" data-thumb="http://test.com/assets/pdc/thumbs/66.png" data-img="http://test.com/assets/pdc/img/66.png" data-country="Australia" data-company="Big Farm" data-app="Tea" data-brand="Big Farm" data-package="500" class="product air-500 cat7">
    <img class="tip" data-country="Australia" data-brand="Big Farm" src="assets/img/ajax-loader.gif">
</li> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T18:49:58.773

试试这个：

```
// Loop through all lis with class product
$('li.product').each(function(){
    // grab a reference to the current li
    var $el = $(this);
    // get the url from its data-thumb attribute
    var url = $el.data('thumb');
    // create a new Image element to load into
    var img = new Image();
    // load callback for the new image
    img.onload = function() {
        // find the first image inside the li
        // and change its src to the url we just loaded
        $el.find('img')[0].src = url;
    }
    // set the src of our temp Image to start loading
    img.src = url;
}); 
```

代码背后的想法是，创建一个`Image`未附加到 DOM 的新元素，并将您的 url 加载到其中。加载后，替换内部`<img>`url。所以微调器应该在加载图像时显示，然后它应该被实际图像替换（现在从浏览器的缓存中加载）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T18:57:25.087

你可以做

```
$('li.product').each(function() {
    var $this = $(this);
    $this.find("img").attr("src", $this.data("thumb"))
}); 
```

# c - 堆栈与原始数据类型的内存分配

> ID：14163006
> 
> 赞同：1
> 
> 时间：2013-01-04T18:46:31.577
> 
> 标签：c, memory-management, malloc

在 C 中声明结构时，说：

```
typedef struct my_stuct {
 int x;
 float f;
} STRT; 
```

如果我们想创建这个结构的一个实例并使用它，我们需要显式调用 malloc，获取一个指向这个结构的内存位置的指针，然后才能实际初始化/使用结构的任何成员：

```
STRT * my_struct_instance = (STRT *) (malloc(sizeof(STRT))); 
```

但是，如果我声明一个原始数据类型（比如“int a;”）然后想要对其进行初始化（或对其执行任何其他操作），我不需要在执行任何操作之前通过调用 malloc 显式为其分配内存空间对其进行操作：

```
// we do not need to do a malloc(sizeof(i)) blah blah here. Why?
i = 10; 
```

你能解释一下这种不一致的原因是什么吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T18:49:20.057

没有不一致。这两种方法中的每一种都可以与原语和 一起使用`structs`：

```
 STRT s1 = {1, 2};
  int i1 = 1;

  STRT *s2 = (STRT *)malloc(sizeof(STRT));
  int *i2 = (int *)malloc(sizeof(int));
  ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T18:58:28.427

在您的 malloc 示例中，您使用的是指针。正如您所说，这种不一致是因为可以通过多种方式初始化指针。它并不总是由新的内存分配初始化，但它也可以初始化为指向现有的内存块。因此，语言不可能假定变量应该在堆上分配：

```
STRT* my_struct_instance; // here I assume (incorrectly) that it is automatically allocated on the heap
my_struct_instance->x = 0; // ERROR: uninitialized use of that variable 
```

不知道这是否回答了你的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T18:51:25.767

你可以做：

```
int i; 
```

或者

```
int *i = (int*) malloc(sizeof(int)); 
```

就像你可以做的一样

```
STRT my_struct_instance; 
```

或者

```
STRT * my_struct_instance = (STRT *) (malloc(sizeof(STRT))); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T18:52:10.063

两种方式都可以，没有矛盾。

**堆**

```
int* a= malloc(sizeof(int));
*a=10;
STRT* b= malloc(sizeof(STRT));
b->x=1; 
b->f=1.0; 
```

**堆**

```
int a=10;
STRT b= {1, 1.0}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T18:54:11.453

```
STRT * my_struct_instance = (STRT *) (malloc(sizeof(STRT))); 
```

使用动态存储；

```
int a; 
```

使用自动存储（我现在使用 C++ 名称，但在 C 中可能类似地调用它）。所以，这是两个完全不同的东西。`int a;`是本地的，在（在大多数实现中）堆栈上（尽管堆栈不是相关的实现细节）；`SRTR * [...]`是动态的，在（在大多数实现中）堆上（尽管同样，堆不是相关的实现细节）。

所以，没有矛盾。说有一个就像说苹果和橙子之间存在不一致 - 但当然有，因为您正在比较苹果和橙子。（问题的其他部分没有意义，因为它们是基于假设苹果和橙子是一回事）。

# c# - 捕捉文本框滚动事件？

> ID：14163007
> 
> 赞同：12
> 
> 时间：2013-01-04T18:46:33.123
> 
> 标签：c#, winforms, events, controls, scrollbar

文本框或richtextbox，我唯一想要的是在滚动条移动时触发一个功能。

我已经找到了 GetScrollPos 和 SetScrollPos。我想过定期检查滚动条的位置，但必须有更好的方法。那么，更好的方法是什么？

更新：使用 WinForms

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T18:56:37.613

假设 WinForms，您可以尝试 pinvoking：

```
public class MyRTF: RichTextBox {

  private const int WM_HSCROLL = 0x114;
  private const int WM_VSCROLL = 0x115;
  private const int WM_MOUSEWHEEL = 0x20A;

  protected override void WndProc(ref Message m) {
    base.WndProc(ref m);

    if (m.Msg == WM_VSCROLL || m.Msg == WM_HSCROLL || m.Msg == WM_MOUSEWHEEL) {
      // scrolling...
    }
  }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-02T19:19:41.153

修改了接受的答案以包括 Horizo​​ntalScrollPosition 和 VerticalScrollPosition 属性（用于获取和设置滚动位置）和 ScrollChanged 事件（使用 .NET 的 ScrollEventArgs）。ScrollChanged 还将在关键导航和文本修改以及选择拖动、控件调整大小和字体大小调整期间触发。

```
 /// <summary>
  /// TextBox with support for getting and setting the vertical scroll bar
  /// position, as well as listening to vertical scroll events.
  /// </summary>
  public class ScrollTextBox : System.Windows.Forms.TextBox
  {

     public ScrollTextBox()
     {  _components = new System.ComponentModel.Container();
        // Calculate width of "W" to set as the small horizontal increment
        OnFontChanged(null);
     }

     [  System.ComponentModel.DefaultValue(0)
     ,  System.ComponentModel.Category("Appearance")
     ,  System.ComponentModel.Description
        (  "Gets or sets the vertical scroll bar's position"
        )
     ]
     public int VerticalScrollPosition
     {  set { SetScroll(value, Win32.WM_VSCROLL, Win32.SB_VERT); }
        get { return GetScroll(Win32.SB_VERT); }
     } 

     [  System.ComponentModel.DefaultValue(0)
     ,  System.ComponentModel.Category("Appearance")
     ,  System.ComponentModel.Description
        (  "Gets or sets the horizontal scroll bar's position"
        )
     ]
     public int HorizontalScrollPosition
     {  set { SetScroll(value, Win32.WM_HSCROLL, Win32.SB_HORZ); }
        get { return GetScroll(Win32.SB_HORZ); }
     } 

     [  System.ComponentModel.Description
        (  "Fired when the scroll bar's vertical position changes"
        )
     ,  System.ComponentModel.Category("Property Changed")
     ]
     public event System.Windows.Forms.ScrollEventHandler ScrollChanged;

     // Fire scroll event if the scroll-bars are moved
     protected override void WndProc
     (  ref System.Windows.Forms.Message message
     ){ base.WndProc(ref message);
        if(message.Msg == Win32.WM_VSCROLL
        || message.Msg == Win32.WM_HSCROLL
        || message.Msg == Win32.WM_MOUSEWHEEL
        )  TryFireScrollEvent();
     }

     // Key-down includes navigation keys, but also typing and pasting can
     // cause a scroll event
     protected override void OnKeyDown
     (  System.Windows.Forms.KeyEventArgs e
     ){ base.OnKeyDown(e);
        TryFireScrollEvent();
     }

     protected override void OnKeyUp
     (  System.Windows.Forms.KeyEventArgs e
     ){ base.OnKeyUp(e);
        TryFireScrollEvent();
     }

     // Resizing can alter the word-wrap or fit the content causing the text
     // to scroll
     protected override void OnResize
     (  System.EventArgs e
     ){ base.OnResize(e);
        TryFireScrollEvent();
     }

     // Clicking an empty space can move the carot to the beginning of the
     // line causing a scroll event
     protected override void OnMouseDown
     (  System.Windows.Forms.MouseEventArgs e
     ){ base.OnMouseDown(e);
        TryFireScrollEvent();
     }

     protected override void OnMouseUp
     (  System.Windows.Forms.MouseEventArgs e
     ){ base.OnMouseUp(e);
        TryFireScrollEvent();
     }

     // If the mouse button is down, a text selection is probably being done
     // where dragging the selection can caues scroll events
     protected override void OnMouseMove
     (  System.Windows.Forms.MouseEventArgs e
     ){ base.OnMouseMove(e);
        if(e.Button != System.Windows.Forms.MouseButtons.None)
           TryFireScrollEvent();
     }

     // Changing the size of the font can cause a scroll event. Also, when
     // scrolling horizontally, the event will notify whether the scroll
     // was a large or small change. For vertical, small increments are 1
     // line, but for horizontal, it is several pixels. To guess what a
     // small increment is, get the width of the W character and anything
     // smaller than that will be represented as a small increment
     protected override void OnFontChanged
     (  System.EventArgs e
     ){ base.OnFontChanged(e);
        using(System.Drawing.Graphics graphics = this.CreateGraphics())
           _fontWidth = (int)graphics.MeasureString("W", this.Font).Width;
        TryFireScrollEvent();
     }

     protected override void Dispose
     (  bool disposing
     ){ if(disposing && (_components != null))
           _components.Dispose();
        base.Dispose(disposing);
     }

     private void SetScroll
     (  int value
     ,  uint windowsMessage
     ,  int scrollBarMessage
     ){ Win32.SetScrollPos
        (  (System.IntPtr)this.Handle
        ,  scrollBarMessage
        ,  value
        ,  true
        );
        Win32.PostMessage
        (  (System.IntPtr)this.Handle
        ,  windowsMessage
        ,  4 + 0x10000 * value
        ,  0
        );
     }

     private int GetScroll
     (  int scrollBarMessage
     ){ return Win32.GetScrollPos
        (  (System.IntPtr)this.Handle
        ,  scrollBarMessage
        );
     }

     // Fire both horizontal and vertical scroll events seperately, one
     // after the other. These first test if a scroll actually occurred
     // and won't fire if there was no actual movement
     private void TryFireScrollEvent()
     {  // Don't do anything if there is no event handler
        if(ScrollChanged == null)
           return;
        TryFireHorizontalScrollEvent();
        TryFireVerticalScrollEvent();
     }

     private void TryFireHorizontalScrollEvent()
     {

        // Don't do anything if there is no event handler
        if(ScrollChanged == null)
           return;

        int lastScrollPosition = _lastHorizontalScrollPosition;
        int scrollPosition = HorizontalScrollPosition;

        // Don't do anything if there was no change in position
        if(scrollPosition == lastScrollPosition)
           return;

        _lastHorizontalScrollPosition = scrollPosition;

        ScrollChanged
        (  this
        ,  new System.Windows.Forms.ScrollEventArgs
           (  scrollPosition < lastScrollPosition - _fontWidth
              ?  System.Windows.Forms.ScrollEventType.LargeDecrement
              :  scrollPosition > lastScrollPosition + _fontWidth
              ?  System.Windows.Forms.ScrollEventType.LargeIncrement
              :  scrollPosition < lastScrollPosition
              ?  System.Windows.Forms.ScrollEventType.SmallDecrement
              :  System.Windows.Forms.ScrollEventType.SmallIncrement
           ,  lastScrollPosition
           ,  scrollPosition
           ,  System.Windows.Forms.ScrollOrientation.HorizontalScroll
           )
        );

     }

     private void TryFireVerticalScrollEvent()
     {

        // Don't do anything if there is no event handler
        if(ScrollChanged == null)
           return;

        int lastScrollPosition = _lastVerticalScrollPosition;
        int scrollPosition = VerticalScrollPosition;

        // Don't do anything if there was no change in position
        if(scrollPosition == lastScrollPosition)
           return;

        _lastVerticalScrollPosition = scrollPosition;

        ScrollChanged
        (  this
        ,  new System.Windows.Forms.ScrollEventArgs
           (  scrollPosition < lastScrollPosition - 1
              ?  System.Windows.Forms.ScrollEventType.LargeDecrement
              :  scrollPosition > lastScrollPosition + 1
              ?  System.Windows.Forms.ScrollEventType.LargeIncrement
              :  scrollPosition < lastScrollPosition
              ?  System.Windows.Forms.ScrollEventType.SmallDecrement
              :  System.Windows.Forms.ScrollEventType.SmallIncrement
           ,  lastScrollPosition
           ,  scrollPosition
           ,  System.Windows.Forms.ScrollOrientation.VerticalScroll
           )
        );

     }

     private int _lastVerticalScrollPosition;
     private int _lastHorizontalScrollPosition;
     private int _fontWidth;
     private System.ComponentModel.IContainer _components = null;

     private static class Win32
     {

        public const uint WM_HSCROLL    = 0x114;
        public const uint WM_VSCROLL    = 0x115;
        public const uint WM_MOUSEWHEEL = 0x20A;
        public const int  SB_VERT       = 0x1;
        public const int  SB_HORZ       = 0x0;

        [System.Runtime.InteropServices.DllImport("user32.dll")]
        public static extern int SetScrollPos
        (  System.IntPtr hWnd
        ,  int nBar
        ,  int nPos
        ,  bool bRedraw
        );
        [System.Runtime.InteropServices.DllImport("user32.dll")]
        public static extern int GetScrollPos
        (  System.IntPtr hWnd
        ,  int nBar
        );

        [  System.Runtime.InteropServices.DllImport
           (  "User32.Dll"
           ,  EntryPoint = "PostMessageA")
        ]
        public static extern bool PostMessage
        (  System.IntPtr hWnd
        ,  uint msg
        ,  int wParam
        ,  int lParam
        );

     }

  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-12T18:18:59.883

更好——隐藏`MouseWheel`事件：[https ://stackoverflow.com/a/26672097/1037948](https://stackoverflow.com/a/26672097/1037948)

```
public Form1()
{
    InitializeComponent();
    textBox1.MouseWheel += textBox1_MouseWheel;
}

void textBox1_MouseWheel(object sender, MouseEventArgs e)
{
    throw new NotImplementedException();
} 
```

# java - Hibernate JPA 搜索两个连接表

> ID：14163012
> 
> 赞同：0
> 
> 时间：2013-01-04T18:47:15.947
> 
> 标签：java, spring, hibernate, jpa, hibernate-criteria

我对 Spring 中的 Hibernate 和 JPA 实现非常陌生，所以基本上已经建立了一个 MySQL 5 数据库，它映射到下面的域对象。

我试图`Location`在`Company_Details`桌子上搜索，但我不知道如何同时搜索`Product_Details`班级`Product_Name`

如果有人可以提供帮助，那就太好了。

**公司_详情**

```
@Entity
public class Company_Details implements Serializable{

/**
 * 
 */
private static final long serialVersionUID = 3336251433829975771L;

@Id
@GeneratedValue
private Integer Id;
private String Company;
private String Address_Line_1;
private String Address_Line_2;
private String Postcode;
private String County;
private String Country;
private String Mobile_Number;
private String Telephone_Number;
private String URL;
private String Contact;
private String Logo_URL;
private double Amount_Overall;
private double Amount_Paid;
private Timestamp Date_Joined;
private int Account_Details;
@OneToMany(fetch = FetchType.EAGER, mappedBy = "Company_Id")
private List<Product_Details> products;

public Integer getId() {
    return Id;
}

public void setId(Integer id) {
    Id = id;
}

public String getCompany() {
    return Company;
}

public void setCompany(String company) {
    Company = company;
}

public String getAddress_Line_1() {
    return Address_Line_1;
}

public void setAddress_Line_1(String address_Line_1) {
    Address_Line_1 = address_Line_1;
}

public String getAddress_Line_2() {
    return Address_Line_2;
}

public void setAddress_Line_2(String address_Line_2) {
    Address_Line_2 = address_Line_2;
}

public String getPostcode() {
    return Postcode;
}

public void setPostcode(String postcode) {
    Postcode = postcode;
}

public String getCounty() {
    return County;
}

public void setCounty(String county) {
    County = county;
}

public String getCountry() {
    return Country;
}

public void setCountry(String country) {
    Country = country;
}

public String getMobile_Number() {
    return Mobile_Number;
}

public void setMobile_Number(String mobile_Number) {
    Mobile_Number = mobile_Number;
}

public String getTelephone_Number() {
    return Telephone_Number;
}

public void setTelephone_Number(String telephone_Number) {
    Telephone_Number = telephone_Number;
}

public String getURL() {
    return URL;
}

public void setURL(String uRL) {
    URL = uRL;
}

public String getContact() {
    return Contact;
}

public void setContact(String contact) {
    Contact = contact;
}

public String getLogo_URL() {
    return Logo_URL;
}

public void setLogo_URL(String logo_URL) {
    Logo_URL = logo_URL;
}

public double getAmount_Overall() {
    return Amount_Overall;
}

public void setAmount_Overall(double amount_Overall) {
    Amount_Overall = amount_Overall;
}

public double getAmount_Paid() {
    return Amount_Paid;
}

public void setAmount_Paid(double amount_Paid) {
    Amount_Paid = amount_Paid;
}

public Timestamp getDate_Joined() {
    return Date_Joined;
}

public void setDate_Joined(Timestamp date_Joined) {
    Date_Joined = date_Joined;
}

public int getAccount_Details() {
    return Account_Details;
}

public void setAccount_Details(int account_Details) {
    Account_Details = account_Details;
}

public List<Product_Details> getProducts() {
    return products;
}

public void setProducts(List<Product_Details> products) {
    this.products = products;
} 
```

**产品详情**

```
@Entity
   public class Product_Details implements Serializable{

/**
 * 
 */
private static final long serialVersionUID = 6477618197240654478L;

@Id
@GeneratedValue
private Integer Id;
private Integer Company_Id;
private String Product_Name;
private String Description;
private String Main_Photo_URL;
private String Other_Photo_URLS;
private Integer Total_Bookings;
private double Average_Rating;
private Integer Number_Of_Slots;
private Integer Time_Per_Slot;
private double Price_Per_Slot;
private String Monday_Open;
private String Tuesday_Open;
private String Wednesday_Open;
private String Thursday_Open;
private String Friday_Open;
private String Saturday_Open;
private String Sunday_Open;
private String Dates_Closed;

public Integer getId() {
    return Id;
}
public void setId(Integer id) {
    Id = id;
}
public Integer getCompany_Id() {
    return Company_Id;
}
public void setCompany_Id(Integer company_Id) {
    Company_Id = company_Id;
}
public String getProduct_Name() {
    return Product_Name;
}
public void setProduct_Name(String product_Name) {
    Product_Name = product_Name;
}
public String getDescription() {
    return Description;
}
public void setDescription(String description) {
    Description = description;
}
public String getMain_Photo_URL() {
    return Main_Photo_URL;
}
public void setMain_Photo_URL(String main_Photo_URL) {
    Main_Photo_URL = main_Photo_URL;
}
public String getOther_Photos_URLS() {
    return Other_Photo_URLS;
}
public void setOther_Photos_URLS(String other_Photo_URLS) {
    Other_Photo_URLS = other_Photo_URLS;
}
public Integer getTotal_Bookings() {
    return Total_Bookings;
}
public void setTotal_Bookings(Integer total_Bookings) {
    Total_Bookings = total_Bookings;
}
public double getAverage_Rating() {
    return Average_Rating;
}
public void setAverage_Rating(double average_Rating) {
    Average_Rating = average_Rating;
}
public Integer getNumber_Of_Slots() {
    return Number_Of_Slots;
}
public void setNumber_Of_Slots(Integer number_Of_Slots) {
    Number_Of_Slots = number_Of_Slots;
}
public Integer getTime_Per_Slot() {
    return Time_Per_Slot;
}
public void setTime_Per_Slot(Integer time_Per_Slot) {
    Time_Per_Slot = time_Per_Slot;
}
public double getPrice_Per_Slot() {
    return Price_Per_Slot;
}
public void setPrice_Per_Slot(double price_Per_Slot) {
    Price_Per_Slot = price_Per_Slot;
}
public String getMonday_Open() {
    return Monday_Open;
}
public void setMonday_Open(String monday_Open) {
    Monday_Open = monday_Open;
}
public String getTuesday_Open() {
    return Tuesday_Open;
}
public void setTuesday_Open(String tuesday_Open) {
    Tuesday_Open = tuesday_Open;
}
public String getWednesday_Open() {
    return Wednesday_Open;
}
public void setWednesday_Open(String wednesday_Open) {
    Wednesday_Open = wednesday_Open;
}
public String getThursday_Open() {
    return Thursday_Open;
}
public void setThursday_Open(String thursday_Open) {
    Thursday_Open = thursday_Open;
}
public String getFriday_Open() {
    return Friday_Open;
}
public void setFriday_Open(String friday_Open) {
    Friday_Open = friday_Open;
}
public String getSaturday_Open() {
    return Saturday_Open;
}
public void setSaturday_Open(String saturday_Open) {
    Saturday_Open = saturday_Open;
}
public String getSunday_Open() {
    return Sunday_Open;
}
public void setSunday_Open(String sunday_Open) {
    Sunday_Open = sunday_Open;
}
public String getDates_Closed() {
    return Dates_Closed;
}
public void setDates_Closed(String dates_Closed) {
    Dates_Closed = dates_Closed;
} 
```

}

```
@Service
public class ProductServiceImpl implements ProductService{

private final static Logger LOG =   Logger.getLogger(ProductServiceImpl.class.getName()); 

@PersistenceContext
EntityManager em;

@Transactional
public List<Company_Details> search(Search search) {
    LOG.info("Entering search method");
    CriteriaBuilder builder = em.getCriteriaBuilder();
    CriteriaQuery<Company_Details> c = builder.createQuery(Company_Details.class);
    Root<Company_Details> companyRoot = c.from(Company_Details.class);
    c.select(companyRoot);
    c.where(builder.equal(companyRoot.get("County"),search.getLocation()));
    return em.createQuery(c).getResultList();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T00:42:06.623

您需要两个标准：Company_Details 类的标准和 Product_Details 类的标准

然后

```
Criteria crit1 = session.createCriteria(Company_Details.class);
crit1.add(restriction) 

Criteria crit2 = crit1.createCriteria("products");
crit2.add(restriction)

// Then query crit1
List results = crit1.list(); 
```

# jquery - Jquery trigger() 在 end2end 测试中的角度场景测试运行器中不起作用

> ID：14163016
> 
> 赞同：1
> 
> 时间：2013-01-04T18:47:35.833
> 
> 标签：jquery, angularjs, jasmine

我知道在角度“控制器”中绑定到 jquery 事件不符合这个框架理念，但它允许我将 asp.net mvc 项目中的视图逐步迁移到角度。这适用于运行时，但我无法测试它。如果我在“控制器”中的输入字段上绑定了 jquery 事件“keydown”，并且我尝试在我的测试场景中触发（）这个事件（我正在使用 angular-scenario.js），这个事件根本不会在“控制器”中收到。我不能使用 input().enter() 因为这个输入不是模型的一部分（正如我在开始时所说的......）。问题：是否可以从场景中触发事件？如果不是，我应该使用不同的测试运行器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T08:28:16.420

上面的链接指向一个角度 UT 而不是 e2e 案例，您可以通过其查询 api 在 e2e 中触发一个 dom 事件，例如

```
 element('#something_id').query(function(el, done){
        var evt = document.createEvent('Event');
        evt.initEvent('focus', false, true);
        el[0].dispatchEvent(evt);
        done();
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T19:01:06.913

您可以查看 AngularJS 测试。它们用于`browserTrigger(element, 'keydown');`触发元素上的 DOM 事件。

这是[来自AngularJS源的示例](https://github.com/angular/angular.js/blob/master/test/ng/directive/ngKeySpec.js)

# java - Android 应用程序在启动时停止工作

> ID：14163025
> 
> 赞同：0
> 
> 时间：2013-01-04T18:48:07.097
> 
> 标签：java, android

当我在 AVD 中启动它时，我的应用程序停止工作。给我“不幸的是 {app name} 已停止工作。”

这是我运行时的日志：

```
01-07 10:52:06.162: E/AndroidRuntime(771): FATAL EXCEPTION: main
01-07 10:52:06.162: E/AndroidRuntime(771): java.lang.IllegalStateException: Could not     execute method of the activity
01-07 10:52:06.162: E/AndroidRuntime(771):  at  android.view.View$1.onClick(View.java:3597)
01-07 10:52:06.162: E/AndroidRuntime(771):  at android.view.View.performClick(View.java:4202)
01-07 10:52:06.162: E/AndroidRuntime(771):  at android.view.View$PerformClick.run(View.java:17340)
01-07 10:52:06.162: E/AndroidRuntime(771):  at android.os.Handler.handleCallback(Handler.java:725)
01-07 10:52:06.162: E/AndroidRuntime(771):  at  android.os.Handler.dispatchMessage(Handler.java:92)
01-07 10:52:06.162: E/AndroidRuntime(771):  at android.os.Looper.loop(Looper.java:137)
01-07 10:52:06.162: E/AndroidRuntime(771):  at android.app.ActivityThread.main(ActivityThread.java:5039)
01-07 10:52:06.162: E/AndroidRuntime(771):  at java.lang.reflect.Method.invokeNative(Native Method)
01-07 10:52:06.162: E/AndroidRuntime(771):  at java.lang.reflect.Method.invoke(Method.java:511)
01-07 10:52:06.162: E/AndroidRuntime(771):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-07 10:52:06.162: E/AndroidRuntime(771):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-07 10:52:06.162: E/AndroidRuntime(771):  at dalvik.system.NativeStart.main(Native Method)
01-07 10:52:06.162: E/AndroidRuntime(771): Caused by: java.lang.reflect.InvocationTargetException
01-07 10:52:06.162: E/AndroidRuntime(771):  at java.lang.reflect.Method.invokeNative(Native Method)
01-07 10:52:06.162: E/AndroidRuntime(771):  at java.lang.reflect.Method.invoke(Method.java:511)
01-07 10:52:06.162: E/AndroidRuntime(771):  at android.view.View$1.onClick(View.java:3592)
01-07 10:52:06.162: E/AndroidRuntime(771):  ... 11 more
01-07 10:52:06.162: E/AndroidRuntime(771): Caused by: java.lang.ArrayIndexOutOfBoundsException: length=0; index=0
01-07 10:52:06.162: E/AndroidRuntime(771):  at com.ultimanaire.MainActivity.playGame(MainActivity.java:38)
01-07 10:52:06.162: E/AndroidRuntime(771):  ... 14 more 
```

这是我第一次发布问题时忘记添加的 MainActivity.java 的代码。有人说第 18 行，即：

```
if (sub.isChecked()) { 
```

以下是 MainActivity.java 的所有代码：

```
package com.ultimanaire;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.CheckBox;

public class MainActivity extends Activity {

    String[] subjects = {};

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void playGame(View view) {
        int r = 0;
       CheckBox t = (CheckBox)findViewById(R.id.subject_math);
        CheckBox y = (CheckBox)findViewById(R.id.subject_science);
        CheckBox u = (CheckBox)findViewById(R.id.subject_history);
        CheckBox i = (CheckBox)findViewById(R.id.subject_foreign_language);
        CheckBox[] stored_subjects =  {t, y, u, i};
        for(CheckBox sub : stored_subjects) {

            if (sub.isChecked()) {
                 subjects[r] = (String) sub.getText();
            r = r +1;
            }

        }

        Intent intent = new Intent(this, GameActivity.class);
        intent.putExtra("SUBJECT", subjects);
        startActivity(intent);
    }

} 
```

所以，我已经弄清楚为什么空指针会发生并修复它，然后它带来了另一个，并设法修复它，但现在它又出现了另一个我无法弄清楚的问题。我将代码编辑为我现在如何修复它，以及给出空指针的行。日志猫也更新了。设备上的相同消息会给出“不幸的是 appname 已停止工作，但在打开应用程序时没有，现在它打开了它，但是当我使用 playGame 方法作为 onClick 的播放按钮计时时它会这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T18:49:57.883

```
17:56:19.114: E/AndroidRuntime(901): Caused by: java.lang.NullPointerException 01-04 17:56:19.114: E/AndroidRuntime(901): at com.ultimanaire.MainActivity.(MainActivity.java:18) 01-04 17:56:19.114: 
```

基于堆栈跟踪，这是由于`NullPointerException`在第 18 行`MainActivity.java`。

没有发布有问题的代码，因此我们无法预测是什么原因造成`NullpointerException`的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:05:36.290

您正在获取数组索引超出范围异常，因为您将其初始化为

`String[] subjects = {};`

所以它的长度是0。你正在尝试使用它来访问它

```
subjects[r] = (String) sub.getText(); 
```

这会引发异常。两种选择：

1> 将其初始化为

`String[] subjects = null;`

然后加

```
subjects = new String[stored_subjects.length]; 
```

这将提供动态 String[]。大小将取决于复选框数组的长度。

2> 将其初始化为

```
String[] subjects = new String[4]; 
```

如果它只是一个静态数组。因为根据您的代码，您的复选框数组将包含 4 个元素。希望能帮助到你。

# javascript - 在 angularjs 中显示聚合列表

> ID：14163027
> 
> 赞同：14
> 
> 时间：2013-01-04T18:48:10.260
> 
> 标签：javascript, angularjs

在我的模型中，我的数据类似于：

```
$scope.list = [{id:0,tags:['tag1','tag2']},{id:2,tags:['tag2']}}; 
```

我想显示带有复选框的标签列表（包含“tag1”和“tag2”的唯一值）。希望是这样的：

```
<div ng-repeat="tag in list.tags">
    <label class="checkbox">
        <input type="checkbox" ng-model="filter.tag" />
        {{tag}}
    </label>
</div> 
```

如果我对列表进行硬编码，我知道如何根据检查的内容过滤主列表，但不知道如何自动生成唯一标签列表。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-04T20:27:58.613

您正在寻找执行三个操作：

*   从每个项目中获取标签数组`$scope.list`
*   将它们展平成一个数组
*   从此数组中获取唯一值

您可以使用纯 JavaScript 来做到这一点，但为了使事情变得更容易，我建议使用[Underscore](http://underscorejs.org/)，这是一个库，可让您访问许多用于操作和检查数组、对象等的函数。

让我们从这段代码开始：

```
$scope.list = [
  {id: 0, tags: ['tag1', 'tag2']},
  {id: 1, tags: ['tag2']},
  {id: 2, tags: ['tag1', 'tag3', 'tag4']},
  {id: 3, tags: ['tag3', 'tag4']}
]; 
```

现在，让我们执行第一个操作：从`tags`属性中获取每个对象的数组`$scope.list`。Underscore 提供的[`pluck`](http://underscorejs.org/#pluck)方法，正是我们所需要的。

> **采摘** `_.pluck(list, propertyName)`
> 
> map 最常见用例的一个方便版本：提取属性值列表。

使用 pluck，我们可以得到以下信息：

```
var tags = _.pluck($scope.list, 'tags');
// gives us [['tag1', 'tag2'], ['tag2'], ['tag1', 'tag3', 'tag4'], ['tag3', 'tag4']] 
```

现在，我们想要展平该数组。

> **展平** `_.flatten(array, [shallow])`
> 
> 展平嵌套数组（嵌套可以到任何深度）。如果您通过浅层，则数组将仅展平一个级别。

```
tags = _.flatten(tags);
// gives us ['tag1', 'tag2', 'tag2', 'tag1', 'tag3', 'tag4', 'tag3', 'tag4'] 
```

最后，您只需要每个标签的一个实例。

> **别名** `_.uniq(array, [isSorted], [iterator])`：`unique`
> 
> 生成数组的无重复版本，使用 === 来测试对象是否相等。如果您事先知道数组已排序，则为 isSorted 传递 true 将运行更快的算法。如果要基于转换计算唯一项，请传递迭代器函数。

```
tags = _.unique(tags)
// gives us ['tag1', 'tag2', 'tag3', 'tag4'] 
```

我们可以将它们与 Underscore 的有用[`chain`](http://underscorejs.org/#chain)方法结合在一起，将它们链接在一起。让我们在返回唯一标签的范围内创建一个函数：

```
$scope.uniqueTags = function() {
  return _.chain($scope.list)
    .pluck('tags')
    .flatten()
    .unique()
    .value();
}; 
```

由于这是一个函数，它总是返回唯一的标签，无论我们在`$scope.list`事后添加或删除项目。

现在您可以使用`ng-repeat`on`uniqueTags`显示每个标签：

```
<div ng-repeat="tag in uniqueTags()">
  <label class="checkbox">
    <input type="checkbox" ng-model="filter.tag" />
    {{tag}}
  </label>
</div> 
```

这是一个演示此技术的工作 jsFiddle：http: [//jsfiddle.net/BinaryMuse/cqTKG/](http://jsfiddle.net/BinaryMuse/cqTKG/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T22:58:53.573

使用自定义过滤器获取唯一的标签集/数组，适用于 ng-repeat：

```
.filter('uniqueTags', function() {
    return function(list) {
        var tags = {};
        angular.forEach(list, function(obj, key) {
            angular.forEach(obj.tags, function(value) {
                tags[value] = 1;
            })
        });
        var uniqueTags = []
        for (var key in tags) {
            uniqueTags.push(key);
        }
        return uniqueTags;
    }
}); 
```

我首先将标签放入一个对象中，这会自动赋予我们唯一性。然后我将其转换为数组。

使用如下：

```
<div ng-repeat="tag in list | uniqueTags"> 
```

[小提琴](http://jsfiddle.net/mrajcok/4Bu8Z/)。

* * *

以下可能不会做我认为您可能想要/期望它做的事情：

```
<input type="checkbox" ng-model="filter.tag"> 
```

这不会在控制器范围（即使用 ng-repeat 的范围）上`filter.tag1`创建$scope 属性。`filter.tag2`ng-repeat 的每次迭代都会创建自己的子作用域，因此上面的 ng-model 将`filter.tag`在每个 ng-repeat 子作用域上创建作用域属性，如我的小提琴所示。

# jquery - SCRIPT5：访问被拒绝。在ie9上

> ID：14163035
> 
> 赞同：1
> 
> 时间：2013-01-04T18:48:45.527
> 
> 标签：jquery

我的网站无法使用 ie 访问。并且出现在 ie 开发者工具中的问题说“

```
SCRIPT5: Access is denied.

jquery-1.8.3.min.js, line 2 character 69317 
```

我试过这个链接[SCRIPT5: Access Denied on IE9 due to jQuery.min CDN file in Wordpress](https://stackoverflow.com/questions/12232475/script5-access-denied-on-ie9-due-to-jquery-min-cdn-file-in-wordpress)

并尝试使用 JQuery 的“开发版本”但没有成功。并再次尝试使用jquery 1.8.1 完整版和迷你版再次不成功。

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:35:03.020

我找到了解决方案。这是因为我在页面的某个地方注册了另一个 JavaScript，而那个 js 文件让我遇到了问题。

很抱歉打扰大家。

# android - 菜单充气机的最佳实践

> ID：14163038
> 
> 赞同：-1
> 
> 时间：2013-01-04T18:48:51.627
> 
> 标签：android

我已经看到有两种方法可以做到这一点：

创建一个变量，然后使用该变量调用 .inflate

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menu_add, menu);
    return true;
} 
```

并且直接分配给方法

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.menu_add, menu);
    return true;
} 
```

是否有正确和错误的方法来做到这一点，或者它们本质上是一样的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:50:34.693

它们本质上是一样的。但是，使用变量方法的优点是调试（如果您想查看充气机本身）和性能（如果您要多次使用充气机）。如果您只使用它一次，就像在第二个示例中一样，那么放弃该变量可能会更好地提高性能，尽管总体上的差异可以忽略不计。

# iphone - VIewController/Views 上的数据保留

> ID：14163044
> 
> 赞同：1
> 
> 时间：2013-01-04T18:49:13.640
> 
> 标签：iphone, objective-c, ios, xcode, ios6

有一个快速的问题：

我有 2 个视图控制器及其关联的视图。

第一个 VC 有通过掩码着色的图像。[这是](http://coffeeshopped.com/2010/09/iphone-how-to-dynamically-color-a-uiimage)我将使用的技术的链接。

第二个 VC 和视图只是一个包含随机内容的设置屏幕。

假设这种情况：

1.  加载第一个带有图像的VC并完成着色

    注意：着色是随机的，值不会存储在任何地方。有这么多图像，很难将所有这些随机颜色存储在变量中。

2.  在第一个 VC 上，用户按下导航到设置屏幕的按钮

3.  现在通过模态操作加载第二个 VC

4.  在第二个 VC 上，用户按下“返回”按钮以返回到前一个 VC，在这种情况下是第一个 VC。

问题：在导航期间和导航回第一个 VC 之后，我以编程方式随机选择的图像和颜色是否仍然可见，或者我会丢失那些随机生成的颜色？如果不是，我如何确保在 First VC 上呈现的内容将在任何导航操作中保持不变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:53:25.277

只要 View Controller 留在导航堆栈上，它所保存的所有数据在您返回时仍然有效。将任意数量的视图控制器推送到堆栈顶部不会对第一个视图控制器执行任何操作，但是一旦您将第一个视图控制器从堆栈中弹出，它将丢失它拥有的所有数据，除非以其他方式保存并重新加载（在变量中例如，在 App Delegate 中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T18:53:34.037

除非您释放第一个视图，否则您不会丢失您创建的图像。由于您在第一个视图之上显示第二个视图，因此所有图像都将在那里。您不必担心保存颜色或图像。您可以在第一个视图控制器上推送任意数量的视图控制器。

请注意，这仅在您不删除/弹出/关闭第一个视图控制器或其视图时才有效。

# azure - GitHub 部署到 Azure 不起作用

> ID：14163045
> 
> 赞同：0
> 
> 时间：2013-01-04T18:49:16.987
> 
> 标签：azure, github

我正在使用 GitHub 部署到 Azure 站点，但由于某种原因，我没有看到 wwwroot 文件夹中的任何文件。看来部署不会在星期四进行。我确实看到了存储库文件夹中的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T00:18:16.397

您没有指定在设置部署时所做的工作。但是，以下是对我有用的：

1.  通过以下说明设置用于 Git 部署的 Azure 网站：http: [//www.windowsazure.com/en-us/develop/net/common-tasks/publishing-with-git/](http://www.windowsazure.com/en-us/develop/net/common-tasks/publishing-with-git/)

2.  创建 GitHub 存储库

3.  在 Git 中初始化本地工作文件夹。推送到回购。从事物的声音来看，你已经做到了。

4.  然后，您需要确保将您的 Azure 网站与您的 GitHub 存储库链接起来。在门户中，转到 Azure 网站的“部署”部分，然后单击：

![在此处输入图像描述](../Images/dfc4bf9ec282d69e9504665355e6cc46.png)

如果您在同一个浏览器中登录 GitHub，它会很快要求您指定正确的存储库，就是这样。

这是我怀疑您可能没有完全完成的步骤，或者您选择了错误的存储库。

连接后，每次您将提交推送到存储库中的主分支时，Azure 都会拉取和部署。

# selenium - 无法在多个虚拟机上使用 selenium 网格注册节点

> ID：14163059
> 
> 赞同：0
> 
> 时间：2013-01-04T18:50:09.477
> 
> 标签：selenium, grid

我正在尝试做一个场景，我的脚本在一个虚拟机（Win 7）上。我使用以下方法启动此 VM 上的集线器： start java -jar selenium-server-standalone-2.25.0.jar -role hub 10.0.3.15:8000/grid/register

我还在这个虚拟机上启动了一个 IE9 浏览器节点：java -Dwebdriver.iexplore.driver='IEDriverServer.exe' -jar selenium-server-standalone-2.25.0.jar -role webDriver -hub localhost:4444/grid/console -浏览器“浏览器名称=iexplore，平台=WINDOWS，版本=9”-端口5555

接下来我需要做的是：使用 Win XP 在另一个 VM 上启动 IE8 浏览器节点：我使用以下内容： java -Dwebdriver.iexplore.driver='IEDriverServer.exe' -jar selenium-server-standalone-2.25.0 .jar -role webdriver -hub 169.254.204.90:5555/grid/console -browser "browserName=iexplore,platform=WINDOWS,version=8" - 端口 5556

但它似乎没有在第二个虚拟机上启动节点。我真的被困住并试图弄清楚。

任何帮助，将不胜感激。如果您有任何问题，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:52:30.930

您可以使用 testng 或 junit 并行运行它们，我需要有关您如何运行它们的更多信息。

对于 testng，您可以在此处阅读文档：http: [//testng.org/doc/documentation-main.html#parallel-running](http://testng.org/doc/documentation-main.html#parallel-running)

举个例子：

```
<suite name="My suite" parallel="methods" thread-count="5"> 
```

# odbc - Apache Web 服务器问题中来自 CGI 脚本的 Python DB 访问

> ID：14163062
> 
> 赞同：1
> 
> 时间：2013-01-04T18:50:26.073
> 
> 标签：odbc

我有一个 python 脚本，当在 Apache 环境（在 RedHat 上）之外运行时，它通过 ODBC 正确连接到远程 MS SQL Server 并按预期返回数据。它使用安装在 /opt/microsoft/sqlncli/lib64/libsqlncli-11.0.so.1790.0 的 ODBC 驱动程序。

当从 Apache Web 服务器运行与 CGI 脚本相同的 python 代码时，会出现错误提示

```
conn = pyodbc.connect('DSN=MY_DSN;UID=user1;PWD=pw1'); 
```

> [Fri Jan 04 11:51:59 2013] [error] [client 172.19.1.136] ('01000', "[01000] [unixODBC][Driver Manager]Can't open lib '/opt/microsoft/sqlncli/lib64 /libsqlncli-11.0.so.1790.0' : 找不到文件 (0) (SQLDriverConnect)")

路径和文件 /opt/microsoft/sqlncli/lib64/libsqlncli-11.0.so.1790.0 确实存在。就像我在从 shell 运行脚本时所说的那样，它工作正常。在 httpd 中执行时无法加载上述库。

我试图在 httpd.conf 中添加一个目录条目，但这似乎没有帮助。

我该如何解决这个问题？

# java - 使用包创建 .jar 文件

> ID：14163065
> 
> 赞同：0
> 
> 时间：2013-01-04T18:50:36.647
> 
> 标签：java, netbeans

我创建了一个简单的 .jar 文件，其中包含一个接口定义和两个类。然后我将其添加到 netbeans 项目中。使用 netbeans gui 浏览时，所有类都显示在 .jar 的默认包中。但是，在 netbeans 项目中，我不能使用 .jar 文件中定义的任何类。当我尝试使用它时，它说找不到符号。

以下是我创建 jar 文件的方法：

```
javac Funizor.java RequestStatus.java DrugInformation.java 
```

然后

```
jar cvf furnizor.jar Furnizor.class RequestStatus.class DrugInformation.class 
```

# php - How to add calculation functions in php option value when pulling from mysql?

> ID：14163070
> 
> 赞同：0
> 
> 时间：2013-01-04T18:50:57.223
> 
> 标签：php, mysql, option

This may be a very simple question, but I've tried many different ways to attempt this only to find syntax errors. I have the following code:

```
 $query = "SELECT * FROM plyr where posid = '4' order by teamname";
 $result = mysql_query($query);
 while($row = mysql_fetch_assoc($result))
 {
 [
     $dd .= "<option value='{$row['name']}'>{$row['name']}, {$row['teamname']}]</option>";
 } 

 echo"<label for=\'choice4[]\'>Select Two Players:</label><br>
 <select multiple=\"multiple\" name=\"choice4[]\">
 <option value=\"$dd\">$dd</option>
 </select>"; 
```

to which I'd like to add some statistical averages to $dd. The statistics are stored in my db as integers, so I need to do some on the fly calculations to get averages to display. For example, I'd like to add PPG but need to add in an equation for pts/gm and not sure how to do that. I've tried to do {$row['pts'/'gm']} and {$row['pts']/$row['gm']} and other methods but I'm not hitting on the right one. Any help is very appreciated!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:02:56.573

for the calcuations part. i would suggest specifically casting those rows as integers/floats. use intval for whole numbers and floatval for decimals.

`$ppg = intval($row['pts']) / floatval($row['gm']);`

for the creating selects, i like to do it like this:

```
$query = "SELECT * FROM plyr where posid = '4' order by teamname";
$result = mysql_query($query);

$select = '<select name="whatever">';
while($row = mysql_fetch_assoc($result)) {
    $ppg = intval($row['pts']) / floatval($row['gm']);
    $select .= "<option value='".$row['name']."'>".$row['name'].", ".$row['teamname']."PPG: ".$ppg."</option>";
}
$select .= '</select>';
echo ($select); 
```

but that's just me. i perfer the ".$var." syntax over the {$var} syntax.

**UPDATE:** i added the PPG calculation into the while loop and appended it into your select value. but you realize that this calculation will happen for ever row in your while loop right? if you wanted to do an overall, perhaps add the values to an array and use them outside your loop. e.g.

```
$query = "SELECT * FROM plyr where posid = '4' order by teamname";
$result = mysql_query($query);

$arr = array();

$select = '<select name="whatever">';
while($row = mysql_fetch_assoc($result)) {
    $arr[] = array(
        'pts' => intval($row['pts']),
        'gm' => floatval($row['gm'])
    );
    $select .= "<option value='".$row['name']."'>".$row['name'].", ".$row['teamname']."</option>";
}
$select .= '</select>';

//calculate average PPG
$pts = 0;
$gm = 0;
foreach($obj in $arr) {
    $pts += $obj['pts'];
    $gm += $obj['gm'];
}
$ppg = ($pts / count($arr)) / ($gm / count($arr));
echo ("average PPG: ".$ppg);
echo ($select); 
```

im not really sure what PPG is or how you want to use it. but i hope one of these examples helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T18:57:32.140

Why not set your variables in your `while` function, and do the math there? I'm not sure exactly what you're trying to add/subtract/divide/etc. but here's a start. If you let me know what you're wanting to do, maybe I can better understand and come up with a solution.

```
<?php

$query = "SELECT * FROM plyr where posid = '4' order by teamname";
$result = mysql_query($query);
while($row = mysql_fetch_assoc($result)) {
     $dd = '<option value="'.$row['name'].'">'.$row['name'].','.$row['teamname'].'</option>';
     // math equation
     $PPG = $pts / $gm;
}

 echo '<label for="choice4[]">Select Two Players:</label><br>
 <select multiple="multiple" name="choice4[]">
 <option value="'.$dd.'">'.$dd.'</option>
 </select>';

?> 
```

# haskell - 如何在 Haskell 中强制评估？

> ID：14163072
> 
> 赞同：33
> 
> 时间：2013-01-04T18:51:00.457
> 
> 标签：haskell, lazy-evaluation

我对 Haskell 比较陌生，我正在尝试学习如何使用 do 表示法按顺序执行不同的操作。特别是，我正在编写一个程序来对算法（一个函数）进行基准测试

```
foo :: [String] -> [String] 
```

为此，我想编写一个类似的函数

```
import System.CPUTime

benchmark :: [String] -> IO Integer
benchmark inputList = do
                         start <- getCPUTime
                         let r = foo inputList
                         end <- getCPUTime
                         return (end - start) -- Possible conversion needed. 
```

最后一行可能需要转换（例如到毫秒），但这不是这个问题的主题。

这是测量在某些参数 inputList 上计算函数 foo 所需时间的正确方法吗？

换句话说，在动作执行`foo inputList`之前，表达式会完全减少吗？`end <- getCPUTime`还是`r`只会绑定到 thunk `foo inputList`？

更一般地说，如何确保在执行某些操作之前完全评估表达式？

* * *

这个问题是几个月前在程序员身上问的（见[这里](https://softwareengineering.stackexchange.com/questions/160580/how-to-force-evaluation-in-haskell)），那里有一个被接受的答案，但由于它属于堆栈溢出，它已被关闭为题外话。该问题无法移至堆栈溢出，因为它已超过 60 天。因此，与版主一致，我在这里重新发布问题并自己发布已接受的问题，因为我认为它包含一些有用的信息。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-04T18:53:07.593

*最初由用户[ysdx](https://softwareengineering.stackexchange.com/users/27332/ysdx) [在程序员上](https://softwareengineering.stackexchange.com/a/160587/48260)给出的答案：*

> 实际上，您的版本不会对您的算法进行基准测试。由于`r`未使用，因此根本不会对其进行评估。
> 
> 你应该可以用[DeepSeq](http://www.haskell.org/ghc/docs/7.4.1/html/libraries/deepseq-1.3.0.0/Control-DeepSeq.html)做到这一点：
> 
> ```
> benchmark :: [String] -> IO Integer
> benchmark inputList = do
>                      start <- getCPUTime
>                      let r = foo inputList
>                      end <- r `deepseq` getCPUTime
>                      return (end - start) 
> ```
> 
> ( ) 是一些“魔术”表达式，它强制在返回之前`a `deepseq` b`进行完整/递归评估。`a``b`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-04T19:37:53.627

我会使用语言扩展[-XBangPatterns](http://www.haskell.org/ghc/docs/7.4.1/html/users_guide/bang-patterns.html)，我发现在这种情况下很有表现力。所以你必须说“ `let !r = foo inputList`”，如：

```
{-# LANGUAGE BangPatterns #-}
import System.CPUTime

benchmark :: [String] -> IO Integer
benchmark inputList = do
                         start <- getCPUTime
                         let !r = foo inputList
                         end <- getCPUTime
                         return (end - start) 
```

# inheritance - 由于 lodash 合并功能，CoffesScript 中的继承无法正常工作

> ID：14163073
> 
> 赞同：2
> 
> 时间：2013-01-04T18:51:07.317
> 
> 标签：inheritance, backbone.js, coffeescript, lodash

我在 CoffeeScript 中使用 Backbone.js 进行编程，并且在与 lodash 和合并函数相关的继承方面存在问题。

有一个超类

```
class NavigationView extends Backbone.View
  config:
    test:
      string: "Test" 
```

以及从它派生的两个类

```
class SubView extends NavigationView

  initialize: ->
      # Setting the view's template property using the Underscore template method
    _.merge @config, {
        test:
          string: "bla"
      }

class IndexView extends NavigationView
... 
```

如果我在 SubView 的函数中更改初始化配置变量，它也会在 IndexView 的实例中更改。

我在 BackBone.Router 类中像这样实例化我的对象：

```
index: () ->
    # Instantiates a new view which will render the header text to the page
    new IndexView()

  sub: () ->
    new SubView() 
```

我创建了一个小提琴来展示它：http: [//jsfiddle.net/hijolan/9VeND/](http://jsfiddle.net/hijolan/9VeND/)

任何想法如何做到这一点？

最好的问候， hijolan

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T22:40:13.043

您的问题是[`_.merge`](http://lodash.com/docs#merge)就地修改了它的第一个参数：

> `_.merge(object [, source1, source2, …])`
> 
> 将源对象的可枚举属性合并到`destination`对象中。

请注意，文档所说的`destination`真正意味着`object`. 的目的`merge`是成为一个深度版本，[`_.extend`](http://underscorejs.org/#extend)并且下划线文档明确说明了会发生什么：

> **延长** `_.extend(destination, *sources)`
> 
> **将源**对象中的所有属性复制到**目标**对象，然后返回**目标**对象。

您会注意到 lodash 的[`extend`(AKA `assign`)](http://lodash.com/docs#assign)也会混淆参数名称：

> `_.assign(object [, source1, source2, …])`
> 
> 将对象自己的可枚举属性分配`source`给`destination`对象。

`object`当他们说的时候，他们的意思是`destination`。

当你这样做时：

```
class NavigationView extends Backbone.View
  config:
    test:
      string: "Test" 
```

最终`config`附加到原型上`NavigationView`，因此完全相同的`config`对象将被`NavigationView`其子类看到。这意味着这`@config`是`config`您的原型`initialize`：

```
_.merge @config, { test: { string1: "blub" } } 
```

所以`_.merge`会将新值合并到原型中`config`，这使得更改一直可见到`NavigationView`它的所有子类。如果你追溯继承，你会发现`@config`在那个上下文中是 from`NavigationView`所以你`_.merge`只是一种棘手和令人困惑的写作方式：

```
_.merge NavigationView::config, ... 
```

问题的根源在于`_.extend`并`_.merge`修改了他们的第一个论点。摆脱这个陷阱的方法是提供一个可安全写入的目标对象：

```
@config = _.merge { }, @config, { test: { string1: 'blub' } }
# ----------------^^^ 
```

演示：http: [//jsfiddle.net/ambiguous/7j2FM/](http://jsfiddle.net/ambiguous/7j2FM/)

# jms - 从独立客户端连接到远程 JMS 队列时出现问题

> ID：14163074
> 
> 赞同：3
> 
> 时间：2013-01-04T18:51:07.037
> 
> 标签：jms

我是 JMS 新手，从我的独立客户端连接到远程 JMS 队列时遇到问题。任何有关解决此问题的提示将不胜感激。

现在我有一个在多个客户端上运行的 JavaFX 独立应用程序和一个在远程 Unix 机器上运行的 glassfish 服务器 3.1.2.2。我很难将独立应用程序中的消息推送到驻留在服务器上的队列中。

Client Mc：Windows PC（未安装服务器） Remote Mc：Unix（已安装 GlassFish 3.1.2.2）

**服务器上的 JMS 资源：**

JMS 目标资源

JNDI 名称：**jms/ReferralQueue**
物理目的地名称：**ReferralQueue**
资源类型：**javax.jms.Queue**

JMS 连接工厂

池名称：**jms/ReferralConnectionFactory**
JNDI 名称：**jms/ReferralConnectionFactory**
资源类型：**javax.jms.QueueConnectionFactory**

JMS 服务类型：**嵌入式**
JMS 消息存储类型：**文件**

**连接服务器的客户端代码：**

jms.properties：

org.omg.CORBA.ORBInitialHost= **UNIX MC URL**
org.omg.CORBA.ORBInitialPort= **7676**

服务定位器设计实现资源缓存

```
public class JMSServiceLocator {

    private static JMSServiceLocator singletonService = null;
    private static QueueConnectionFactory qFactory;
    private static Queue queue;
    private InitialContext context;
    private static Properties properties = new Properties();
    private Map cache;

    static {
        try {
            singletonService = new JMSServiceLocator();
        } catch (Exception e) {
            //error handling
        }
    }

    private JMSServiceLocator() {
        try {
            loadProperties();
            context = new InitialContext(properties);
            cache = Collections.synchronizedMap(new HashMap());
        } catch (Exception e) {
            //error handling
        }
    }

    public static JMSServiceLocator getInstance() {
        return singletonService;
    }

    public QueueConnectionFactory getQueueConnectionFactory() {

        String qConnFactoryName = "jms/ReferralConnectionFactory";
        qFactory = null;
        try {

            System.out.println("/********************Comment after Testing*****************************/");
            Hashtable env = context.getEnvironment();
            System.out.println("**env.size::" + env.size());
            Enumeration names = env.keys();
            while (names.hasMoreElements()) {
                String str = (String) names.nextElement();
                System.out.println("**" + str + "=" + env.get(str));
            }
            System.out.println("/**********************************************************************/");

            if (cache.containsKey(qConnFactoryName)) {
                qFactory = (QueueConnectionFactory) cache.get(qConnFactoryName);
            } else {
                qFactory = (QueueConnectionFactory) context.lookup(qConnFactoryName);
                cache.put(qConnFactoryName, qFactory);
            }
        } catch (Exception e) {
            //error handling
        }
        return qFactory;
    }

    public Queue getQueue() {
        String queueName = "jms/ReferralQueue";
        queue = null;
        try {
            if (cache.containsKey(queueName)) {
                queue = (Queue) cache.get(queueName);
            } else {
                queue = (Queue) context.lookup(queueName);
                cache.put(queueName, queue);
            }
        } catch (Exception e) {
          //error handling
        }        
    return queue;
    }

    private static void loadProperties() {
        //Load jms properties
    }
} 
```

**最终向服务器发送消息：**

```
JMSServiceLocator jmsLocator = JMSServiceLocator.getInstance();

QueueConnectionFactory qConnFactory = jmsLocator.getQueueConnectionFactory();
qConnection = qConnFactory.createQueueConnection();
session = qConnection.createSession(false, ession.AUTO_ACKNOWLEDGE);
queue = jmsLocator.getQueue();

// Push and publish the message
messageProducer = session.createProducer(queue);
textMessage = session.createTextMessage();
textMessage.setText(message);
messageProducer.send(textMessage); 
```

嗯......现在我观察到一个奇怪的行为......

我在客户端机器上创建了一个新的 GlassFish 3.1.2.2 服务器实例，没有 jndi、没有连接工厂，也没有 jms 队列。

我已经启动了这个服务器实例并执行了独立的客户端应用程序。奇怪的是，一切正常，消息直接被推送到远程队列。

有没有人遇到过这种问题？我怀疑只有在启动服务器实例（可能是任何随机实例，完全不相关）时，应用程序才可能在类路径中加载依赖的 GlassFish jar。

我的独立应用程序类路径中有以下 jar：

*C:\Program Files\glassfish-3.1.2.2\glassfish\lib\gf-client.jar *C:\Program Files\glassfish-3.1.2.2\glassfish\lib\appserv-rt.jar *C:\Program Files \glassfish-3.1.2.2\glassfish\lib\install\applications\jmsra\imqbroker.jar *C:\Program Files\glassfish-3.1.2.2\glassfish\lib\install\applications\jmsra\imqjmsra.jar

我还在[Oracle JMS](https://forums.oracle.com/forums/thread.jspa?threadID=2482195&tstart=0)和[GlassFish](http://www.java.net/forum/topic/glassfish/glassfish/issue-connecting-remote-jms-queue-standalone-client#comment-826995)论坛上发布了这个，但没有找到解决方案。对此问题的任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:28:43.037

我想你现在发现了问题所在：

客户端上缺少 JMS 客户端 jar（客户端 Mc：Windows PC（未安装服务器））。

您不需要在客户端上安装完整的 Glassfish，而只需要 JMS 客户端 jar (gf-client.jar) 以及 gf-client.jar 引用的所有其他 jar。

# windows-8 - 用于阿拉伯语的 Windows 8 Metro 风格字体

> ID：14163077
> 
> 赞同：4
> 
> 时间：2013-01-04T18:51:19.877
> 
> 标签：windows-8, fonts, microsoft-metro, arabic

我搜索了 Windows 8 现代 Metro 风格中使用的字体，我发现了 segeo，但它在阿拉伯字符中的显示与 Windows 8 上的不同，我使用的是 Windows 7。

只是我想获得 win 8 segeo（新版本）的所有字体和这张图片中用于阿拉伯语的字体 ![在此处输入图像描述](../Images/a5133a7ab6e0b31cdc9e9a6cebd4785e.png)

感谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T09:45:03.217

我发现它们是 segoe ui light，与英语相同，但 Windows 8 附带的版本与 Windows 7 中的版本不同。您可以将它们从 Windows 8 的字体文件夹中的任何 segoe 字体复制到您的字体文件夹并替换旧的。

# ruby-on-rails - 如何获取使用轮胎声明索引的类列表？

> ID：14163079
> 
> 赞同：1
> 
> 时间：2013-01-04T18:51:35.443
> 
> 标签：ruby-on-rails, ruby, elasticsearch, tire

我为`spec_helper`.

```
module TireHelper
  def clear_tire_index_for(*resources)
    resources.each do |res|
      res.index.delete
      res.tire.create_elasticsearch_index
      res.index.refresh
    end
  end
end 
```

我想得到我的清单`resources`。

我需要它，因为我想在每个规格之前清除所有轮胎指数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T23:33:13.343

您可以使用[索引别名 API](http://www.elasticsearch.org/guide/reference/api/admin-indices-aliases.html)：

```
aliases = Tire::Configuration.client.get(Tire::Configuration.url + '/_aliases').body
MultiJson.load(aliases).keys
=> ["index_1", "index_2", ...] 
```

要删除所有索引，只需调用：

```
RestClient.delete 'http://localhost:9200' 
```

不过要小心 ：）

# sql - 阅读行但先搜索

> ID：14163081
> 
> 赞同：1
> 
> 时间：2013-01-04T18:51:41.600
> 
> 标签：sql, sql-server, sql-server-2008

*   我想制作一个导入系统，它将查看一个数据源并将新记录复制到另一个数据源中。
*   每月我想将一些表数据从一个数据源复制到另一个数据源

源表名：`srcTable`
目标表名：`destTable`

假设源表中的第一个月我有：

> ID 名称
> 1 约翰
> 3 拉胡尔
> 5 安德鲁

所有三行将被复制到`desTable`

假设源表中的第二个月我有

> Id 名称
> 1 约翰
> 3 拉胡尔
> 5 安德鲁
> 6 维卡斯
> 7 索南
> 8 迪维亚

首先 Sql 应该获取最后`desTable`
一行并将该行匹配到`srcTable`
并从中提取所有新记录`scrTable`并复制到`desTable`

......

请让我知道如何编写查询来实现上述目的。如果有更短的方法，那也会有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:34:15.810

You can write a stored procedure for do this action and execute that every time you want. for this action you can from bellow query: (Part 1 for insert new data, Part 2 for update change data)

```
Insert Into DestinationTable(ID, Name)
Select  ID, Name
    From    SoiurceTable
    Where   Not Exists
            (Select *
                From    TDestinationTablest
                Where   DestinationTable.ID =   SoiurceTable.ID)
Go
Update  DestinationTable
    Set DestinationTable.Name  =    SoiurceTable.Name
    From    DestinationTable, SoiurceTable
        Where   DestinationTable.ID     =   SoiurceTable.ID 
```

I hope it's helpful.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:13:39.883

由于您只关心添加新记录，而无需处理更新或删除...如果目标表中不存在该记录，您可以简单地从源表添加记录：

```
INSERT INTO destTable (ID, Name)
SELECT s.ID, s.Name
FROM 
    srcTable s 
    LEFT OUTER JOIN destTable d ON d.ID = s.ID
WHERE
    d.ID IS NULL 
```

# oop - 执行后输出的设计模式？

> ID：14163082
> 
> 赞同：0
> 
> 时间：2013-01-04T18:51:45.850
> 
> 标签：oop, design-patterns

我正在编写一个执行执行作业（运行一堆脚本）并在最后以几种不同格式输出报告的系统。

我正在寻找有关此报告应如何工作的某种见解。是否有适用于此的设计模式或最佳实践？

例如，我的报告代码在 Reporter 类中，具有用于不同格式和目标的子类。

这个 Reporter 类是否应该是无所不知的，可以访问系统中的所有其他内容（因此它可以提取它需要的内容）？系统是否应该在 Reporter 执行时将信息“输入”到 Reporter 中，这样它就没有任何特殊访问权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:14:49.853

这个网站上的其他问题已经回答了我的问题：访问者设计模式是我正在寻找的。

# graphite - 使用通配符绘制指标时，有没有办法强制对匹配指标进行排序？

> ID：14163090
> 
> 赞同：4
> 
> 时间：2013-01-04T18:52:03.267
> 
> 标签：graphite

我有两个使用以下指标的图表：

图1：oldMethod.latencies_msec.percentiles.p{25,50,75,90,95,99}

图2：newMethod.latencies_msec.percentiles.p{25,50,75,90,95,99}

我希望这两个图表对相似的指标使用相同的颜色。我不太关心颜色，但希望两个图中的两个 p25 具有相同的颜色，两个 p50 具有相同的颜色等等。

如果我不使用通配符并为每个图表使用 6 条不同的数据线，并以相同的方式为两个图表对指标进行排序，那么我会得到一致的颜色，但如果我使用通配符，则指标的排序似乎是任意的。

无论如何要解决订购问题吗？如果没有深入了解度量排序背后的逻辑，那将是有帮助的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-20T21:28:51.937

有一些作品可以解决这个问题。这是 github 中的链接 - [https://github.com/graphite-project/graphite-web/pull/831](https://github.com/graphite-project/graphite-web/pull/831)。您可能必须使用 sortByName(aliasByNode(your_metrics_here, position)) 来获得更短的名称，这些名称可以方便地进行排序，以便以正确的顺序呈现指标。您还必须确保在所有图表中具有相同数量的节点才能获得所需的结果。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-26T00:17:57.663

您可以手动为指标分配颜色，如下所示：

&target=color(my.data.here,"蓝色")

见 bgcolor

[http://graphite.readthedocs.org/en/1.0/url-api.html#bgcolor](http://graphite.readthedocs.org/en/1.0/url-api.html#bgcolor)

现在订购，您可以使用以下内容：

目标=限制（sortByMaxima（my.data.here，8）

# ruby-on-rails - Sublime Test 2 RubyTest 没有显示任何结果

> ID：14163091
> 
> 赞同：1
> 
> 时间：2013-01-04T18:52:05.603
> 
> 标签：ruby-on-rails, sublimetext2

我正在关注 Ruby on Rails 教程。在 Sublime Text 2 中测试 RubyTest (CMD+Shift+R; CMD+Shift+T; CMD+Shift+E) 时，什么也没有出现。窗口在我的测试文件下方打开，它显示“Building”，但随后“Building”消失了，什么都没有了。没有测试，没有绿色，红色，什么都没有。

我已经按照描述添加了 RubyTest，并按照概述从命令行打开。需要更多帮助进行故障排除。

使用 OSX Lion、Ruby 1.9.3、Rails 3.2.10。我的 Guard 和 Spork 测试很好。我的 RubyTest 设置是根据[RubyTest.sublime-settings](https://github.com/maltize/sublime-text-2-ruby-tests/blob/master/RubyTest.sublime-settings)

有什么想法或地方可以开始吗？我对此很陌生，但该死的固执，所以我想解决，而不是“继续前进”。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:28:36.617

我想我可能有适合您的解决方案，因为我刚刚遇到了同样的问题并解决了它。

`"Building..."`首先，通过深入 Sublime Text 2 控制台 ( )找出导致RubyTest 错误的原因`View > Show Console`。

这是我的控制台输出：

```
Running rspec spec/requests/static_pages_spec.rb -l15
Traceback (most recent call last):
  File "./sublime_plugin.py", line 337, in run_
  File "./exec.py", line 154, in run
  File "./exec.py", line 45, in __init__
UnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position 72: ordinal not in range(128)
reloading /Users/Jonathan/Library/Application Support/Sublime Text 2/Packages/User/RubyTest.last-run 
```

从[这里开始](http://sublimetext.userecho.com/topic/120265-non-ascii-character-bug-in-build-system-using-shell-true/)，事实证明 ST2 尝试评估所有 shell 表达式。

从同一个链接，这是我修复它的方法：转到并从第 45 行的循环开始`Library > Application Support > Sublime Text 2 > Packages > Default`编辑：`exec.py``for`

```
for k, v in proc_env.iteritems():
    path_vars = os.path.expandvars(v)
    if isinstance(path_vars, unicode):
        path_vars = path_vars.encode(sys.getfilesystemencoding())
        proc_env[k] = path_vars 
```

希望这能解决您的问题！

# php - PHP cURL XML 示例在大多数情况下有时会返回空白

> ID：14163092
> 
> 赞同：2
> 
> 时间：2013-01-04T18:52:05.067
> 
> 标签：php, xml, unix, curl

这是我的代码示例：

```
function xmlPostStore($post_xml, $url, $port) {
    $ch = curl_init(); // initialize curl handle
    curl_setopt($ch, CURLOPT_URL, $url); // set url to post to
    curl_setopt($ch, CURLOPT_FAILONERROR, 1); // Fail on errors
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,1); // return into a variable
    curl_setopt($ch, CURLOPT_PORT, $port); //Set the port number
    curl_setopt($ch, CURLOPT_TIMEOUT, 15); // times out after 15s
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post_xml); // add POST fields
    $data = curl_exec($ch);
    curl_close($ch);
    return $data;
} 
```

我要发送的内容：

```
$XML = "<?xml version=\"1.0\" encoding=\"utf-8\"?>
        <SendConfig>
            <Request>
                <key>passphrase</key>
            </Request>
        </SendConfig>";

$reply = xmlPostStore($XML, "http://www.urlhere.com/test.php", "80"); 
```

test.php 只是一个简单的 XML 返回：

```
echo "<?xml version='1.0' encoding='utf-8'?>
<response>
    <config>
        <test>it works</test>
    </config>
</response>"; 
```

当我在一台服务器上测试它时，它 100% 的时间都有效。我收到回复，没有问题。

当我在我们的主服务器上测试它时，它没有返回任何东西，大多数时候，大约 98% 的时间它是空白的。无需任何代码更改，它将随机工作并随机停止。我难住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T02:49:49.863

原来我认为打开防火墙以允许传入和传出连接的只是允许传入，而不是传出。我还在 resolv.conf 下解决了 DNS 错误，现在一切正常。

# objective-c - 如何获取 UIBarButtonItem 的框架？

> ID：14163099
> 
> 赞同：3
> 
> 时间：2013-01-04T18:52:16.303
> 
> 标签：objective-c, ios, cocoa-touch

我正在尝试获取 UIBarButtonItem 的框架，它只是继承自 UIBarItem/NSObject。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T18:52:16.303

在 iOS 5.0、5.1 和 6.0 中，使用以下方法。也可以轻松修改此方法以与 UIToolBar 一起使用。

```
- (UIControl *) findBarButtonItem:(UIBarButtonItem *)barButtonItem
{
    UINavigationBar *toolbar = self.navigationController.navigationBar;
    UIControl *button = nil;
    for (UIView *subview in toolbar.subviews) {
        if ([subview isKindOfClass:[UIControl class]]) {
            for (id target in [(UIControl *)subview allTargets]) {
                if (target == barButtonItem) {
                    button = (UIControl *)subview;
                    break;
                }
            }
            if (button != nil) break;
        }
    }

    return button;
} 
```

用法：

```
UIControl *barButton = [self findBarButtonItem:myBarButtonItem];
CGRect barButtonFrame = barButton.frame; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-20T21:00:07.337

这种方式最适合我：

```
UIView *targetView = (UIView *)[yourBarButton performSelector:@selector(view)];
CGRect rect = targetView.frame; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-04T19:04:18.237

我知道您发布此问题是为了发布您找到的答案。我想我会添加一个替代解决方案，该解决方案没有在未来的 iOS 更新中中断的风险。

如果您`UIBarButtonItem`使用自定义视图创建您的，那么您可以`customView`访问`UIBarButtonItem`. 的`frame`将`customView`反映其在工具栏或导航栏中的位置。

显然，此解决方案会阻止您使用标准的系统定义按钮。但是您可以使用自己的图像轻松复制它们。

通常，您将使用的自定义视图将`UIButton`带有适当的图标图像。一个技巧是确保您启用按钮的`showsTouchWhenHighlighted`属性，以便获得通常的高亮效果。

使用`UIButton`您将在`UIBarButtonItem`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-04T03:13:24.703

这是一种无需求助于无证行为或假设的方法。

不要使用 UIBarButtonSystemItem，而是使用带有自定义视图的 UIBarButtonItem。您可以使用以下技术从 UIBarButtonSystemItem 获取图像：

[在 UIButton 中使用 UIBarButtonItem 图标](https://stackoverflow.com/questions/21187885/use-uibarbuttonitem-icon-in-uibutton/36556318)

# c# - 用于指定显示格式的自定义属性

> ID：14163103
> 
> 赞同：1
> 
> 时间：2013-01-04T18:52:30.720
> 
> 标签：c#, string-formatting, custom-attributes

首先让我说我不知道​​这特别*需要*自定义属性，但[`DisplayFormatAttribute`](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.displayformatattribute.aspx "显示格式属性")最接近我正在寻找的意图。

* * *

**我想要什么**

我希望能够为类的属性指定字符串格式，如下所示：

```
public class TestAttribute
{
    [CustomDisplayFormatAttribute(DataFormatString = "{0}")]
    public int MyInt { get; set; }

    [CustomDisplayFormatAttribute(DataFormatString = "{0:0.000}")]
    public float MyFloat { get; set; }

    [CustomDisplayFormatAttribute(DataFormatString = "{0:0.0}")]
    public float MyFloat2 { get; set; }

    [CustomDisplayFormatAttribute(DataFormatString = "{0:dd/MM/yyyy}")]
    public DateTime MyDateTime { get; set; }
} 
```

...并且能够像这样使用它：

```
TestAttribute t = new TestAttribute()
        {
            MyDateTime = DateTime.Now,
            MyFloat = 1.2345678f,
            MyFloat2 = 1.2345678f,
            MyInt = 5
        };
Console.WriteLine(t.MyDateTime.ToFormattedString());
Console.WriteLine(t.MyFloat.ToFormattedString());
Console.WriteLine(t.MyFloat2.ToFormattedString());
Console.WriteLine(t.MyInt.ToFormattedString()); 
```

* * *

**到目前为止我做了什么**

我已成功创建自定义属性`CustomDisplayFormatAttribute`并将其应用于我的元素，但是在不了解我的`TestAttribute`类的情况下我无法获取该属性。

我的第一个想法是使用扩展方法来处理它，因此是`ToFormattedString()`函数。

话虽如此，理想情况下我将能够调用类似的函数`ToFormattedString()`并让它处理查找显示格式并将值应用于它。

* * *

**我的问题**

1.  这可能使用 C#
2.  我怎样才能获得这个（或类似的）功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:35:29.090

当您在方法中时，无法检索`TestAttribute`类或其属性。`ToFormattedString()`另一种方法是向该方法传递一个额外的参数，该参数是获取属性的表达式。我听说处理 Linq 表达式很昂贵，您需要测试您的情况是否属实：

```
public interface IHaveCustomDisplayFormatProperties
{
}

public class TestAttribute : IHaveCustomDisplayFormatProperties
{
    [CustomDisplayFormatAttribute(DataFormatString = "{0}")]
    public int MyInt { get; set; }

    [CustomDisplayFormatAttribute(DataFormatString = "{0:0.000}")]
    public float MyFloat { get; set; }

    [CustomDisplayFormatAttribute(DataFormatString = "{0:0.0}")]
    public float MyFloat2 { get; set; }

    [CustomDisplayFormatAttribute(DataFormatString = "{0:dd/MM/yyyy}")]
    public DateTime MyDateTime { get; set; }
}

public static class IHaveCustomDisplayFormatPropertiesExtensions
{
    public static string FormatProperty<T, U>(this T me, Expression<Func<T, U>> property)
        where T : IHaveCustomDisplayFormatProperties
    {
        return null; //TODO: implement
    }
} 
```

可以这样使用：

```
TestAttribute t = new TestAttribute()
{
    MyDateTime = DateTime.Now,
    MyFloat = 1.2345678f,
    MyFloat2 = 1.2345678f,
    MyInt = 5
};
Console.WriteLine(t.FormatProperty(x => x.MyDateTime));
Console.WriteLine(t.FormatProperty(x => x.MyFloat));
Console.WriteLine(t.FormatProperty(x => x.MyFloat2));
Console.WriteLine(t.FormatProperty(x => x.MyInt)); 
```

# java - 无法检索命令行选项

> ID：14163105
> 
> 赞同：1
> 
> 时间：2013-01-04T18:52:33.163
> 
> 标签：java, command-line

我一直在努力解决这个问题。没有错误，但我没有看到想要的答案：

```
public class Clopts {
    private static Options options = null; 

    private static final String InputDir = "i";
    private static final String OutputDir = "o";
    private String input;
    private CommandLine cmd = null; 

    static{
            options = new Options();
            options.addOption(InputDir, false, "Input Directory");
            options.addOption(OutputDir, false, "Output Directory. " + OutputDir );
        }

    public static void main(String[] args) {
        Clopts cliProg = new Clopts();
        cliProg.loadArgs(args);
    }

    private void loadArgs(String[] args){
        CommandLineParser parser = new PosixParser();
        try {
            cmd = parser.parse(options, args);
        } catch (ParseException e) {
            System.err.println("Error parsing arguments");
            e.printStackTrace();
            System.exit(1);
        }

        if (cmd.hasOption(InputDir)){
            input = cmd.getOptionValue(InputDir);
            System.out.println(input); // This is always null :(
        }
    }
} 
```

虽然我正在传递论点`-i foo -o bar` 但我没有看到 foo 或 bar 每次我看到的都是空的。

我也想在主模块中打印。我如何从命令行获取选项，然后打印出选项是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T19:01:56.820

当您定义您的选项时：

```
options.addOption(InputDir, false, "Input Directory");
options.addOption(OutputDir, false, "Output Directory. " + OutputDir ); 
```

这`false`意味着他们不接受争论。如果您想要一个选项值，您必须`true`在此处指定。

# intuit-partner-platform - 状态 - SyncStatusParam 返回所有对象

> ID：14163109
> 
> 赞同：1
> 
> 时间：2013-01-04T18:52:54.007
> 
> 标签：intuit-partner-platform

我正在尝试使用 SyncStatusParam 来检索对象的状态。相反，它返回了甚至发送到 QuickBooks 云的所有对象。如果我回去使用已弃用的 NgIdSet，那么它工作正常。

我发送的 XML 是：

```
<?xml version="1.0" encoding="UTF-8"?>
<SyncStatusRequest xmlns="http://www.intuit.com/sb/cdm/v2" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<OfferingId>ipp</OfferingId>
<SyncStatusParam>
<IdSet><Id idDomain="NG">11019504</Id></IdSet>
<SyncToken>1</SyncToken>
<ObjectType>Bill</ObjectType>
</SyncStatusParam>
</SyncStatusRequest> 
```

# ruby-on-rails - Rails 的动态段（参数）中允许使用哪些字符？

> ID：14163111
> 
> 赞同：1
> 
> 时间：2013-01-04T18:53:06.480
> 
> 标签：ruby-on-rails, regex, routing

我正在使用 Rails，并且有一个用户输入的字段可以成为 URL 中的参数。我想添加一个验证，阻止用户输入任何会导致路由错误的字段，因为目前如果用户输入一个类似的值，我们会收到错误“没有路由匹配 [GET]...”到目前为止，我知道句号和斜线是不允许的...

我应该使用什么正则表达式进行验证？或者 Rails 默认使用什么正则表达式来处理动态段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:54:32.763

由于没有人真正回答过这个问题，因此只是建议了解决方法。（如果您在合适的情况下使用它们，这可能会更好。）我尝试找到导致问题的字符。我测试了标准美式键盘上所有可用的标点符号。我还测试了空间和（水平）选项卡。我没有测试任何扩展的 Unicode 标点符号，也没有测试控制字符。

我发现使用 webrick 和 Composite_primary_keys gem 在 Rails 3.2.9 中引起问题的字符是：

```
,/.% 
```

要验证字段不包含这些字符：

```
validates :field_name, :format => { :with => /\A[^,\/\.%]*\z/, 
  :message => "commas, slashes, periods, and percent signs (,/.%) are not allowed"} 
```

我尝试的许多其他字符在 URL 中直接无效，但 Rails 会自动对它们进行 URL 编码，因此它们不会引起问题。

正如在原始问题的评论中提到的，这些字符中的一些可以通过配置 Rails 而不是默认值来启用，但这样做会禁用 Rails 的其他功能。要启用它们，您需要在路由定义中添加`:constraints`或`:id`设置。

我还没有完全测试启用所有这些字符，但我相信后果是：

```
Ch 启用使用的后果
-- ------------------------------------------
, 不得使用 gem Composite_primary_keys
/ 限制路由到子项目的能力
. 禁用自动格式处理
%不确定是否可以启用

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:01:45.823

也许您可以让用户插入任何内容，而不是使用 to_params + parameterize 来编写 url，如果您想要一些正则表达式，请查看 parameterize 源代码。

to_params 示例，文档和源代码见： [http ://apidock.com/rails/ActiveSupport/Inflector/parameterize](http://apidock.com/rails/ActiveSupport/Inflector/parameterize)

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-14T10:39:23.997

来自 action_pack action_dispath/journey/path/pattern.rb 中的 rails 代码

```
@separator_re = "([^#{separator}]+)" # where separator comes from @separators = "/.?" 
```

因此，用于匹配动态段的默认正则表达式似乎是：

```
/([^\/\.\?])/ 
```

# python - 使用 Boto 从 CloudFormation 模板返回输出？

> ID：14163114
> 
> 赞同：6
> 
> 时间：2013-01-04T18:53:17.753
> 
> 标签：python, amazon-web-services, boto, amazon-cloudformation

我正在尝试使用 Boto 从 CloudFormation 模板中检索输出列表。我在文档中看到有一个名为`boto.cloudformation.stack.Output`. 但我认为这是未实现的功能。这目前可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T21:28:27.083

如果您进行`describe_stacks`调用，它将返回一个 Stack 对象列表，其中每个对象都有一个`outputs`属性，即`Output`对象列表。

那是你要找的吗？

# javascript - 以一定的精度同时运行图像过渡和动画？

> ID：14163125
> 
> 赞同：1
> 
> 时间：2013-01-04T18:54:07.740
> 
> 标签：javascript, jquery, image

我正在建立一个网站作为一些大学课程的一部分，我的登陆页面设计相当雄心勃勃，旨在让我的教授惊叹。

它需要许多不同类型的图像，jpeg、png 和动画 gif，这些似乎都会对加载时间和优雅度产生负面影响。

所以我正在构建的是一个以舞台为主题的小图像轮播，我试图让它做的是：

```
Roll curtain up revealing first image   
Roll curtain down & change to second image
Roll curtain up revealing second image 
Roll curtain down & change to third image
Roll curtain up revealing third image
and so on.. looping through the images indefinitely 
```

在此过程中，有一个简单的动画聚光灯 gif 覆盖图像轮播，不断运行。

我知道有很多方法可以实现这一点，我正在努力寻找最流畅和精确的方法。到目前为止，我设法构建的是一个不太令人惊叹的基本图像轮播，以及一个仅在大多数浏览器上第一次卷起的窗帘（它只在 Dreamweaver CS5 上不断地上下滚动）。

我在这里问是因为我尝试了多种不同的方法，并且已经在网上搜索了 3 天，试图找到一个相关的例子来工作。任何建议将不胜感激。

**[您可以在此处](http://www.domscodestage.com/LPAC%20site/)**查看工作示例

这是我的javascript：

```
$(document).ready(function() {
var imgs = ['images/logopic.png','images/lobby.png','images/worksofshake.jpg','images/worksofshake.jpg'];
var cnt = imgs.length;
setInterval(Slider, 6000);

function Slider() {
    $('#imageSlide').fadeOut("fast", function() {
        $(this).attr('src', imgs[(imgs.length++) % cnt]).fadeIn("slow");
    });
$("#curtaindown").animate({height:"95%"});
    /*$("#curtaindown").animate({height:"75%"});
    $("#curtaindown").animate({height:"50%"});
    $("#curtaindown").animate({height:"30%"});*/
    $("#curtaindown").animate({height:"5%"},5000);
    $("#curtaindown").animate({height:"95%"},5000);
    $(".leadinfo").hide();
    }
}); 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T19:25:43.417

此解决方案假定在页面加载时，窗帘遮住了图像，并且第一张图像已设置在#imageSlide 上。我没有测试过，但总体思路应该是正确的。此解决方案的一个问题是，如果互联网连接不佳，则可能会在图像实际下载完成之前拉开窗帘。考虑到这一点有点混乱，所以我没有进入它。

```
var imgs = [...];
var nextImage = 1;
var $image = $('#imageSlide');
var $curtain = $('#curtaindown');

hideCurtain();
preloadNextImage();
// Show the next image in 6 seconds
setTimeout(showNextImage, 6000);

function showNextImage() {
  showCurtain(function(){       
    // Set the img tag to the new image
    $image.attr('src', imgs[nextImage]);

    nextImage++;
    if (nextImage.length >= imgs.length)
      nextImage = 0;
    preloadNextImage();

    // After the curtain is hidden, wait 5 more seconds before
    // switching to the next one.
    hideCurtain(function(){
        setTimeout(showNextImage, 5000);
    });
  });
}

function showCurtain(onComplete) {
  $curtain.animate({height:'95%'},
      { duration: 500,
        complete: onComplete });
}

function hideCurtain(onComplete) {
  $curtain.animate({height:'5%'},
      { duration: 500,
        complete: onComplete });
}

function preloadNextImage() {
  // Start downloading the next image.
  (new Image()).src = imgs[nextImage];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:26:38.677

我最终确定了一个非常简单的实现，即使我相当确定它在逻辑上不应该。如果有人可以评论解释为什么它确实有效，我将非常感激。

这是我最终使用的代码：

```
<script type="text/javascript">

$(document).ready(function() {

    $("#scroller_container_top").hide();

    var imgs = ['images/logopic.png','images/lobbywithcaption.jpg','images/seatswithcaption.jpg','images/worksofshake.jpg'];
var cnt = imgs.length;
setInterval(Slider, 10000);

function Slider() {
    $('#imageSlide').fadeOut("slow", function() {
        $(this).attr('src', imgs[(imgs.length++) % cnt]).fadeIn("slow");

    });

    $("#curtaindown").animate({height:"5%"},5000);
    $("#curtaindown").animate({height:"95%"},5000);     

};

</script> 
```

# asp.net - GridView 嵌套在 DataList 中

> ID：14163130
> 
> 赞同：0
> 
> 时间：2013-01-04T18:54:17.350
> 
> 标签：asp.net, vb.net, gridview, nested, datalist

这似乎应该是一个简单的答案，但我到处搜索，似乎找不到我想要做的事情，我对此很陌生，所以我可能会遗漏一些东西......希望有人能提供帮助.

这样做的目的是显示我要送修的扫描仪（dl）的装箱单，并且每个维修问题都有注释（gv）。我能够让 dl 正确显示，但我根本无法让 gv 显示。即使我对“问题密钥”进行硬编码。我得到一个 Object not set to object 错误。显然我不能保持硬编码，所以我尝试从 dl 中提取问题密钥（通过 DataKey）并将其传递给 gv，我得到“索引超出范围”。（当我通过它出现-1）。

这是我正在使用的代码....谢谢

```
Sub LoadShippingList()
    dlShippingList.DataSource = WarehouseManager.GetScannerIssuesByScannerStatus(WarehouseManager.ScannerStatus.PendingShipForRepair)
    dlShippingList.DataBind()
End Sub

Protected Sub dlShippingList_ItemDataBound(sender As Object, e As System.Web.UI.WebControls.DataListItemEventArgs) Handles dlShippingList.ItemDataBound
    Dim dList As DataList = CType(sender, DataList)
    Dim intScannerIssueKey As Integer = dList.DataKeys(e.Item.ItemIndex)

    Dim gv As GridView
    gv = CType(e.Item.FindControl("gvShippingListIssueNotes"), GridView)
    gv.DataSource() = WarehouseManager.GetScannerIssueNotes(intScannerIssueKey)
    gv.DataBind()

End Sub

<asp:Panel ID="pnlShippingList" runat="server">
            <asp:Label ID="lblShippingListCaption" runat="server" Text="Shipping List" SkinID="PageTitle"></asp:Label>
            <br />
            <asp:DataList ID="dlShippingList" runat="server" GridLines="Both" DataKeys="ScannerIssueKey" DataKeyField="ScannerIssueKey">
                <HeaderTemplate>
                    <table>
                        <tr>
                            <td>
                                <asp:Label ID="lblShipmentNumberCaption" runat="server" Text="Shipment:" SkinID="FieldLabel"></asp:Label>
                            </td>
                            <td>
                                <asp:Label ID="lblShipmentNumber" runat="server" SkinID="FeedbackMessageSmallDark"></asp:Label>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <asp:Label ID="lblShipmentDateCaption" runat="server" Text="Date:" SkinID="FieldLabel"></asp:Label>
                            </td>
                            <td>
                                <asp:Label ID="ShipmentDate" runat="server" SkinID="FeedbackMessageSmallDark"></asp:Label>
                            </td>
                        </tr>
                    </table>
                </HeaderTemplate>
                <ItemTemplate>
                    Issue #:<asp:Label ID="lblScannerIssueKey" runat="server" Text='<%# Eval("ScannerIssueKey") %>'></asp:Label>
                    Scanner #:
                    <asp:Label ID="Label1" runat="server" Text='<%# Eval("ScannerKey") %>'></asp:Label>
                    Subject:<asp:Label ID="Label2" runat="server" Text='<%# Eval("IssueDescription") %>'></asp:Label>
                    <br />
                    Notes:<br />
                    <asp:GridView ID="gvShippingListIssueNotes" HorizontalAlign="Left" runat="server"
                        Font-Size="Medium" EmptyDataText="No Notes" AutoGenerateColumns="false" SkinID="SimpleGrid">
                        <RowStyle VerticalAlign="Top" HorizontalAlign="Center" />
                        <Columns>
                            <asp:BoundField HeaderText="Notes" DataField="Notes" />
                            <asp:BoundField HeaderText="User" DataField="UserEntered" />
                            <asp:BoundField HeaderText="Date" DataField="DateAndTime" />
                        </Columns>
                    </asp:GridView>
                    <br />
                </ItemTemplate>
                <FooterTemplate>
                    Weissmans's 6750 Manchester Avenue St. Louis MO 63139</FooterTemplate>
            </asp:DataList>
            <br />
        </asp:Panel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:44:22.847

我想我找到了自己的答案....在 DataList 的 ASP 中，我在 vb 上添加了 onItemDataBound="dlShippingList_ItemDataBound" 我取出... 处理 dlShippingList.ItemDataBound SOFAR，它似乎工作得很好！

# javascript - Fancybox 无法使用

> ID：14163135
> 
> 赞同：3
> 
> 时间：2013-01-04T18:54:41.767
> 
> 标签：javascript, jquery, fancybox

似乎无法让 Fancybox 工作 - 它只是链接到第一张图片。我得到错误：未捕获的类型错误对象#一个对象没有方法'fancybox'。

**HTML**

```
<a class="fancybox" data-thumbnail="http://staging.timeoutchicago.com/sites/timeoutchicago.com/files/imagecache/timeout_slideshow_player_thumbnail/P1010923.JPG" href="http://staging.timeoutchicago.com/sites/timeoutchicago.com/files/imagecache/timeout_492x330/P1010923.JPG"><img alt="" src="http://staging.timeoutchicago.com/sites/timeoutchicago.com/files/toclogo.jpg"></a>

<br />

<a class="fancybox" data-thumbnail="http://fancyapps.com/fancybox/demo/2_s.jpg" href="http://fancyapps.com/fancybox/demo/2_b.jpg"></a>​ 
```

**Javascript**

```
<script type="text/javascript">
    $(document).ready(function() {
        $(".fancybox").attr('rel', 'gallery').fancybox({
            helpers: {
                thumbs: {
                    width: 40,
                    height: 40,
                    source: function(current) {
                        return $(current.element).data('thumbnail');
                    }
                }
            }
        });
    });
</script> 
```

**标题**

```
<!-- Add jQuery library -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>

<!-- Add fancyBox -->
<link rel="stylesheet" href="/fancybox/source/jquery.fancybox.css?v=2.1.3" type="text/css" media="screen" />
<script type="text/javascript" src="/fancybox/source/jquery.fancybox.pack.js?v=2.1.3"></script> 
```

根据 Chrome 开发者工具中的源代码，它似乎确实在拉入外部文件。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T19:46:02.330

嗯。看起来 jquery 被加载了两次。曾经与

```
<!-- Add jQuery library -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 
```

和另一个（更难找到）

`http://staging.timeoutchicago.com/sites/timeoutchicago.com/files/advagg_js/js_13ec2e29dba08b369ccfdde54d836ec0_8.js`

看起来您正在使用 drupal 并进行了一些谷歌搜索，听起来它为您注入了一个 jquery 版本（jQuery JavaScript Library v1.3.2）

发生错误的原因是两个库之间的冲突。尝试遵循此更新 [http://drupal.org/project/jquery_update](http://drupal.org/project/jquery_update)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T19:45:43.243

您正在引入两个版本的 jQuery。

当你`jQuery(".fancybox").jquery`从控制台执行时，你会得到`1.3.2`. 毫无疑问，这与fancybox不兼容。

jQuery 1.8.2 通过 Google CDN 加载您的显式`script`标记请求。

jQuery 1.3.2 是作为 的一部分加载的`http://staging.timeoutchicago.com/sites/timeoutchicago.com/files/advagg_js/js_13ec2e29dba08b369ccfdde54d836ec0_8.js`，它来自 Drupal 为自己的目的注入这个库。

为了将来参考，我能够通过使用 Chrome 开发者工具找到这个文件，按文件大小排序（最大的在前），然后查看 JS 文件......之后很快就找到了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-27T20:20:56.487

我遇到了同样的问题，我通过更改该行中的双引号来解决它：

```
$(".fancybox").fancybox(); 
```

单引号：

```
$('.fancybox').fancybox(); 
```

有点“陷阱”，因为 fancyBox 网站有双引号。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-11-24T08:41:30.873

如果有什么不起作用：

```
 parent.window.document.getElementById("fancybox-wrap").style.display = 'none'; 
```

这个隐藏的fancybox。

# java - 将带有来自 Fragment 的值的 Bundle 传递给新的 Activity

> ID：14163137
> 
> 赞同：0
> 
> 时间：2013-01-04T18:54:52.887
> 
> 标签：java, android, android-fragments, android-activity, bundle

我正在尝试将带有整数值的包从片段活动页面传递到新的活动页面。但是整数似乎没有被传递，因此它的值始终为 0。是什么导致了这个问题？我错过了什么吗？

这是片段活动：

```
public class TravelogueSEOPageFragment extends SherlockFragment {

    //method here that creates the bundle to be passed on to the new activity
    public void Map(View v){
        Intent offlineMapView = new Intent(v.getContext(), TOfflineMapView.class);
        Bundle b = new Bundle();
        b.putInt("id", travelogueID);
        offlineMapView.putExtras(b);
        startActivity(offlineMapView);
    }
} 
```

这是新的 Activity 类：

```
public class TOfflineMapView extends Activity{

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Bundle b = getIntent().getExtras();
        int tID = b.getInt("id");

        ...//remove unnecessary codes
    }
} 
```

所以我的 tID 永远为 0。这是错误的做法吗？

# jquery - jquery删除然后追加并做一些onclick

> ID：14163138
> 
> 赞同：0
> 
> 时间：2013-01-04T18:55:05.417
> 
> 标签：jquery, onclick, append

准备好文档后，我有一个 onclick 函数，它使用 class=project 更改某些元素的 css。如果由于另一个事件使用 .remove() 删除了那些带有 class=project 的元素，那么由于另一个事件使用 .append() 和 class=project 追加新元素，我的 onclick 事件不应该改变 CSS 仍然有效，因为新元素有 class=project?

它看起来不像，但有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T18:59:26.177

不，您需要再次使用事件处理程序委托或绑定新元素，因为它们在绑定时不存在。

```
$('.project').on('click',function(){...}) // <-- elements must exist at time of binding

$('body').on('click','.project',function(){...}) // <-- event handler is attached to an ancestor element - which is body in this example
// the ancestor element will now listen to events from elements with class=project and handle the events as they bubble up 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T18:59:03.340

尝试使用`.detach`而不是`.remove`. 但是，听起来您想使用委托。至少：

```
$(document).on('click', '.project', function () { 
```

而不是使用`document`，您应该尝试使用更具体的选择器，例如`.project`元素容器的父级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T06:58:39.970

我了解了 jQuery 的 .delegate，它确实想要我想要的。我可以删除并附加我想要的所有内容。我希望这对其他人有所帮助。

# ajax - 搜索好友 FQL 很慢

> ID：14163140
> 
> 赞同：1
> 
> 时间：2013-01-04T18:55:10.937
> 
> 标签：ajax, facebook, facebook-fql

我允许用户使用 keyup javascript 函数通过 ajax 请求搜索他们的 facebook 朋友。

ajax 请求调用一个 php 操作，该操作使用 fql 搜索用户的朋友并输出 10 个朋友。这个 ajax 请求平均需要 5 秒，所以对于打字来说不够快，有什么方法可以让我的代码更快或更高效？

```
$params = array("method"=> "fql.query", "query"=> "SELECT uid, name, pic FROM user WHERE strpos(lower(first_name), '$data') >= 0 AND uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) ORDER BY first_name LIMIT 10 ", "callback"=> "");

$friends  =  $facebook->api($params);
$this->view->friends = $friends; 
```

其中 $data 包含要搜索的名称。然后我在我的视图中以 html 格式输出它。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:55:15.533

每次用户添加角色时都发出新请求并不是一个好主意。您应该使用页面本身一次加载所有朋友。或者更好的是，您可以在页面完全加载后使用 AJAX 透明地执行此操作。

然后，您将避免任何缓慢的请求，因为您已经获得了用户的朋友。结果立竿见影。为此，我建议您使用[jQuery Autocomplete 插件](http://jqueryui.com/autocomplete/)。

# cakephp - 如何在 CakePHP 中将两个 HABTM 保存在一种形式中？

> ID：14163143
> 
> 赞同：2
> 
> 时间：2013-01-04T18:55:21.467
> 
> 标签：cakephp

我有两个模型业务和用户。它们通过 HABTM 关系相关联。

一切都在使用烘焙的控制器、模型和视图。

现在我正在尝试将这两种模型组合成一种形式，以便用户可以输入带有用户信息的公司名称。

这是表格：

```
 Form->create('User'); ?>

    Form->input('Business.name', array('label' => __('Business name')));
    echo $this->Form->input('User.email');
    echo $this->Form->input('User.firstname');
    echo $this->Form->input('User.lastname');
    echo $this->Form->input('User.password');
    echo $this->Form->input('User.phone_cell', array('type' => 'text'));
    echo $this->Form->input('User.phone_home', array('type' => 'text'));
    echo $this->Form->input('User.phone_work', array('type' => 'text'));
    ?>

    Form->end(__('Submit')); ?> 
```

我能够使其工作的唯一方法是先保存用户，然后获取用户 ID，然后通过添加具有新 ID 的用户数组来保存业务。

```
 if ($this->User->save($this->request->data)) {
        $this->request->data['User'] = array('User' => array(0 => $this->User->id));
    if ($this->User->Business->save($this->request->data)) {
        // User saved
    } else {
        // User not saved
    }
    } else {
        $this->Session->setFlash(__('The user could not be saved. Please, try again.'));
    } 
```

我尝试了 saveAll 方法但没有成功。是否可以针对单个保存优化 CakePHP 方式？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:56:06.547

我能够让它自己与几个名为`User`and的模型一起工作`Group`。这是我的代码中的一些片段，以显示我是如何做到的：

用户控制器.php

```
public function edit($id = null) 
{
    $this->User->id = $id;

    if ($this->request->is('get')) {
        //On page load load the user data
        $this->request->data = $this->User->read();
    } else {
       //Saving
       if ($this->User->save($this->data)) {
           //....snipped...
        } else {
           $this->Session->setFlash('Unable to update the user.');
        }
    }

    //Build $groups array for form
    // Only admins can assign admin rights
    if ($this->isMember('Admin')) {
        $this->set('groups',$this->User->Group->find('list'));
    } else {
        $this->set('groups',$this->User->Group->find('list',array(
            'conditions' => array(
                'Group.name !=' => 'Admin'
            )
        )));
    }
    //...more snipping...
} 
```

edit.ctp（查看）

```
 echo $this->Form->create('User', array('action' => 'edit'));
    echo $this->Form->input('User.username');
    echo $this->Form->input('Group',array(
            'type' => 'select',
            'multiple' => true,
            'label' => "Group (Select multiple entries with CTRL)",
            'size' => count($groups)
        )
    );
    //More snipping 
```

使用该示例，您如何验证`Business.name`输入的内容是否有效并且可以与 HABTM 关系匹配？在这种情况下，我的强制选择列表。我的模型非常简单，所以我没有包括它。

你对`debug($this->data);`vs.的输出是什么`debug($this->request->data)`？

# php - 键入时 PHP 变量的读取方式不同

> ID：14163146
> 
> 赞同：0
> 
> 时间：2013-01-04T18:55:31.330
> 
> 标签：php, variables

我有一个非常不寻常的问题。当我使用此脚本发布到 Blogger 时，例如，当我实际输入博客 ID 时，它可以完美运行

```
$blogID = '2542513707206115453'; 
```

`uri`但是，当我让脚本自动抓取博客 ID 时，即使脚本抓取的数字与我输入的数字完全相同，它也会给我带来关于无效的错误。

```
require_once 'Zend/Loader.php';
Zend_Loader::loadClass('Zend_Gdata');
Zend_Loader::loadClass('Zend_Gdata_Query');
Zend_Loader::loadClass('Zend_Gdata_ClientLogin');

$blog = file_get_contents($link.'/feeds/posts/default');
preg_match('/tag:blogger.com,1999:blog-(.*?)-/', $blog, $blogID);
$blogID = rtrim($blogID[1], date("Y"));

$service = 'blogger';
$client = Zend_Gdata_ClientLogin::getHttpClient($user, $pass, $service, null,
    Zend_Gdata_ClientLogin::DEFAULT_SOURCE, null, null,
    Zend_Gdata_ClientLogin::CLIENTLOGIN_URI, 'GOOGLE');

$gdClient = new Zend_Gdata($client);

$entry = $gdClient->newEntry();
$entry->title = $gdClient->newTitle($title);
$entry->content = $gdClient->newContent($body);
$entry->content->setType('text');  
$uri = 'http://www.blogger.com/feeds/'.$blogID.'/posts/default';
$createdPost = $gdClient->insertEntry($entry, $uri);
$idText = split('-', $createdPost->id->text);
$newPostID = $idText[2]; 
```

我不知道这怎么会发生，因为`$blogID`无论是刮掉还是打字，它都是完全相同的数字。是的，我已经两次和三次检查了刮擦时它是完全相同的数字。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T18:59:10.773

这个电话有什么意义？

```
$blogID = rtrim($blogID[1], date("Y")); 
```

rtrim 中的第二个选项指定应从字符串末尾修剪哪些字符。由于您使用的是日期（`2013`目前），因此您正在尝试从字符串中消除 ANY 、和`2`chars `0`。`1``3`

这意味着，鉴于您的

```
$blogID = '2542513707206115453'; 
```

你最终会得到

```
$blogID = '254251370720611545';
                             ^--- see? no 3 
```

这**不是**同一个数字

# c# - 在 Windows 8 商店 C# 应用程序中使用 WSDL Web 服务：无法解析基类或接口

> ID：14163149
> 
> 赞同：5
> 
> 时间：2013-01-04T18:55:34.650
> 
> 标签：c#, wsdl, windows-store-apps

我在 Eclipse 中用 Java 编写了一个简单的 WSDL Web 服务。以下是该服务的 Java 代码原型：

```
public static String vriteAnnouncement(String title, String body){
    ...
} 
```

我已经使用 Microsoft 工具为此 WSDL 服务生成了一个代理类，`wsdl.exe`并使用开发人员命令提示符 Visual Studio 2012 中的以下命令将其设为 dll：

```
wsdl /l:CS /protocol:SOAP WriteAnnouncement.wsdl
csc /t:library /r:System.Web.Services.dll /r:System.Xml.dll WriteAnnouncementService.cs 
```

在我的 Windows 8 Store 应用程序中，我添加了对此 dll 的引用，然后在 MainPage.xaml.cs 中添加了以下代码：

```
WriteAnnouncementService was = new WriteAnnouncementService(); 
```

当我尝试运行该应用程序时，出现此错误：

> *类型“System.Web.Services.Protocols.SoapHttpClientProtocol”在未引用的程序集中定义。
> 您必须添加对程序集“System.Web.Services，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b03f5f7f11d50a3a”的引用。
> C:\Users...\MainPage.xaml.cs 第 27 行第 13 列*

然后我添加了对 System.Web.Service 的引用并重建了应用程序。现在我收到以下错误：

> *无法解析类型“System.Web.Services.Protocols.WebClientProtocol”引用的程序集“System，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”中的基类或接口“System.ComponentModel.Component” :\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\System.Web.Services.dll*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T20:16:19.923

您是否有理由使用 wsdl.exe 生成代理？

我不是 bcl 的 Windows 8 存储子集的专家，但我建议使用 svcutil 从已知的 wsdl 生成代理，因为生成的代理支持较新的 Web 服务子系统。生成的代理继承自基类库中的不同类。对我来说，较新的子系统更有可能在受限环境中无缝工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T14:29:46.133

Adding service reverence via "Add Service Reference" solved the problem. ![enter image description here](../Images/f72aa6e44bb4106e6c51415532c73ccd.png)

![enter image description here](../Images/fc158a58b25bc8bea2f731fa6dc8d30f.png)

But I have an other problem with the generated reference.cs file. There are multiple errrors about ambigous calls.

> The call is ambiguous between the following methods or properties: 'GyteKiosk.ServiceReference1.WriteAnnouncementClient.ConfigureEndpoint(System.ServiceModel.Description.ServiceEndpoint, System.ServiceModel.Description.ClientCredentials)' and 'GyteKiosk.ServiceReference1.WriteAnnouncementClient.ConfigureEndpoint(System.ServiceModel.Description.ServiceEndpoint, System.ServiceModel.Description.ClientCredentials)' Reference.cs 115 13

**UPDATE!**

I have solved the ambigous call promlem too. Step by step solution for ambigous call:

1.  My service class name was "WriteAnnouncement" and the service method name was "vriteAnnouncement". Changed method name to just "write".
2.  Recreated Web Service in Eclipse without any test client.
3.  Took the WSDL file and placed in project folder.
4.  Deleted previously added service reference and readded service reference. Gave neme to service reference as "WAServRef"

To use service in project:

1.  Add `using GyteKiosk.WAServRef;` to page code whic you will use service in.
2.  Call your service where you want to use:

    ```
     WriteAnnouncementClient wac = new WriteAnnouncementClient();
        Task<GyteKiosk.WAServRef.writeResponse> wres = wac.writeAsync("Gyte Kiosk", "Gyte Kiosk");
        String result = wres.Result.Body.writeReturn;
        this.pageTitle.Text = result; 
    ```

# ruby-on-rails - Rails - 属性编写器方法无法访问对象值

> ID：14163163
> 
> 赞同：0
> 
> 时间：2013-01-04T18:57:24.420
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有一个研究模型，它有很多领域，但我在 1 方面遇到了麻烦

**职业名称**

所以在我的学习模型中我有这个

```
class Study < ActiveRecord::Base
  attr_accessible :profesion_related, :profesion_name
  attr_accessor :profesion_related

  def profesion_related=(id)
    if id.present?
      if self.study_type_id == 4
        if self.country_id == 170
           #some code here
        else
           profesion_parent = Profesion.find(id)
           new_profesion = Profesion.create({g_code: profesion_parent.g_code, mg_code: profesion_parent.mg_code, name: self.profesion_name})
           self.profesion = new_profesion
        end
      end
    end
  end
end 
```

但我在创建专业时遇到错误，因为 self.profesion_name 为 nil

如果在我的控制器中我这样做

```
 def create
    @study = Study.new(params[:study])
    respond_to do |format| 
      #here  
      puts @study.to_yaml 
      if @study.save
       .....
  end 
```

我将在控制台中看到profesion_name 有一个值，但如果我这样做

```
class Study < ActiveRecord::Base
  ...

  def profesion_related=(id)
    puts self.to_yaml
    ....
  end
end 
```

我可以看到 self.profesion_name 是空的

为什么会发生这种情况？

# c# - C# 访问 IEnumerable 集合

> ID：14163166
> 
> 赞同：2
> 
> 时间：2013-01-04T18:57:30.050
> 
> 标签：c#, ienumerable

我对使用收藏还很陌生，所以请耐心等待我的行话甚至可能不准确。

我让 PetaPoco 将查询结果作为 IEnumerable 返回，每个结果一个集合。我想评估集合以从每个集合中的特定字段获取特定字符串。到目前为止，我能够迭代 Enumerable 并且似乎能够根据下面的代码段访问对象但是当我在调试中查看 c.Language 时，它​​只是字符串的第一个字符（例如，c.Language 应该等于“ JPY”它仅等于“J”）

我这样做完全错了吗？感谢您的建议

```
public void AddContactOrder(object sender, EventArgs e)
    {
        IEnumerable OrderFact = new OrdersFactsController().getOrderFacts(base.ModuleId);
        IEnumerator enumerator = OrderFact.GetEnumerator();
        var test = "";
        List<string> lang = new List<string>();
        while (enumerator.MoveNext())
        {

            OrderFact c = (OrderFact)enumerator.Current;
            if (c.Language == "JPY")
            {
                test = "okay";
            }

        } 
```

}

getorderFacts() 返回一个 IEnumerable，其中 T 是 OrderFact

```
public class OrderFact
{
    public int ID { get; set; }
    public int ModuleId { get; set; }
    public string ProdCode { get; set; }
    public string Language { get; set; }
    public string Currency { get; set; }
    public string KeyCodes { get; set; }
    public string OrderSourceCode { get; set; }
    public string OfferingCode { get; set; }
    public string JobNumber { get; set; }
    public DateTime CreatedDate { get; set; }
    public DateTime ModifiedDate { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T19:04:49.107

你最好只使用一个 foreach 循环：

```
foreach (var c in new OrdersFactsController().getOrderFacts(base.ModuleID))
{
    if (c.Language == "JPY")
        test = "okay";
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-04T19:08:53.587

您可以使用`System.Linq`的[`Any`扩展方法](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.any.aspx)：

```
public void AddContactOrder(object sender, EventArgs e)
{
    var orderFacts = new OrdersFactsController().getOrderFacts(base.ModuleId);
    var test = orderFacts.Any(x => x.Language == "JPY") ? "okay" : "";

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-04T19:07:14.013

```
 public void AddContactOrder(object sender, EventArgs e)
    {
        IEnumerable<OrderFact> orderFacts = new OrdersFactsController().getOrderFacts(base.ModuleId);
        var test = "";
        if(orderFacts.Any(x => x.Language == "JPY")) test="okay";
    } 
```

林克！

# ms-access-2010 - 创建具有不均匀字段数的不均匀联合查询

> ID：14163170
> 
> 赞同：1
> 
> 时间：2013-01-04T18:57:36.930
> 
> 标签：ms-access-2010

有没有一种方法可以创建具有奇数字段的联合查询。联合查询的前半部分只有 5 个字段，后半部分将有 7 个字段

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:58:53.407

不，但你可以有虚构的领域：

```
 SELECT RealField1, RealField2, RealField3, RealField4 FROM Table
 UNION ALL
 SELECT Null As RealField1, Null As RealField2, RealField3, RealField4 FROM Table 
```

# ruby-on-rails - 带有 HTTP 缓存的新 Relic Javascript

> ID：14163171
> 
> 赞同：1
> 
> 时间：2013-01-04T18:57:40.040
> 
> 标签：ruby-on-rails, newrelic

我正在我的应用程序中实现 HTTP 缓存，但注意到 New Relic gem 放置在页面末尾的 Javascript 会针对每个请求进行更改。看起来它可能是某种时间戳。

这是一个例子：

```
NREUMQ.push(["nrfj","beacon-3.newrelic.com","aff3157301","1021194","dl4IQBBfX1tcF01fRVBcFRsBUUdSXgoQTw==",1,2709,new Date().getTime(),"","","","",""]); 
```

还有一秒钟：

```
NREUMQ.push(["nrfj","beacon-3.newrelic.com","aff3157301","1021194","dl4IQBBfX1tcF01fRVBcFRsBUUdSXgoQTw==",4,2514,new Date().getTime(),"","","","",""]); 
```

使用此页面的缓存版本的客户是否会导致 New Relic 的报告不准确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:52:40.887

我联系了 New Relic 支持，他们提供了以下回复：

> 缓存页面将在其 RUM 页脚中包含陈旧的（先前生成的）应用程序和排队时间。New Relic 可以通过将后端总时间与应用程序和队列时间进行比较来检测缓存页面。当应用程序和队列时间的总和大于后端总时间时，New Relic 假定页面已缓存并将应用程序和队列时间聚合为零的请求。

# php - 显示选项中的错误答案

> ID：14163173
> 
> 赞同：5
> 
> 时间：2013-01-04T18:57:46.317
> 
> 标签：php, html, mysql, mysqli

数据库表结构：

**会话表（又名考试表）**

```
SessionId(auto)  SessionName
137              XULWQ 
```

**问题表：**

```
SessionId  QuestionId  OptionId
137        1           5
137        2           2 
```

**Option_Table 表：**

```
OptionId  OptionType
1         A-C
2         A-D
3         A-E
4         A-F
5         A-G
6         A-H
7         A-I
8         A-J
9         A-K
10        A-L
11        A-M
12        A-N
13        A-O
14        A-P
15        A-Q
16        A-R
17        A-S
18        A-T
19        A-U
20        A-V
21        A-W
22        A-X
23        A-Y
24        A-Z
25        True or False
26        Yes or No 
```

**答案表：**

```
 AnswerId(auto) SessionId  QuestionId  Answer
   200            137        1           B
   201            137        1           D
   202            137        2           F
   203            137        2           A
   204            137        2           C 
```

我想创建一个页面，我希望它显示每个问题的错误答案。

我正在考虑通过检索每个问题的选项类型来做到这一点，显示属于该选项类型的所有字母答案，然后从字母答案中删除正确答案，以便只留下不正确的答案。

选项数组：

```
$option = array();

$option[1]= array(A,B,C);  
$option[2]= array(A,B,C,D);  
$option[3]= array(A,B,C,D,E);  

...

$option[23]= array(A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y);
$option[24]= array(A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z);
$option[25]= array(True,False);  
$option[26]= array(Yes,No); 
```

我的问题是在本节之后我需要帮助。如何使用 mysqli/php 和我目前拥有的数据库在这个数组之后开始检索错误的答案？

**更新：**

下面显示了显示每个问题的正确答案的 sql：

```
 SELECT
      q.QuestionContent, 
      o.OptionType, 
      q.NoofAnswers, 
      GROUP_CONCAT(DISTINCT Answer ORDER BY Answer SEPARATOR '') AS Answer, 
      r.ReplyType, 
      q.QuestionMarks
    FROM Question q
    LEFT JOIN Answer an
      ON q.QuestionId = an.QuestionId
    LEFT JOIN Reply r 
      ON q.ReplyId = r.ReplyId 
    LEFT JOIN Option_Table o 
      ON q.OptionId = o.OptionId 
    group by q.QuestionContent 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/4bb52/12)

这将返回结果：

```
|      QUESTIONCONTENT | OPTIONTYPE | NOOFANSWERS | ANSWER | REPLYTYPE | QUESTIONMARKS |
----------------------------------------------------------------------------------------
| Name these 2 flowers |        A-F |           2 |      C |  Multiple |             5 |
|         What is 2+2? |        A-D |           1 |    ABD |    Single |             5 | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:00:21.287

我认为你需要`<a href="<?php echo $pages[$currentPages+1] ?>">Continue</a>`. 否则你不会输出任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T02:29:40.107

您的问题是，按照您`Option_Table`的设计方式，对列进行解码`OptionType`以找出所有可能的答案需要一些重要的外部知识。

（确实，您没有在您的问题中提供足够的信息让我确定到底该怎么做；我可以猜测`OptionTypes`您向我展示的那些，但我不确定是否有，或者可能是，其他人。）

最好用一个更简单的表替换（或至少增加）该表，该表对于 each`OptionId`仅列出所有可能的选项，如下所示：

```
CREATE TABLE Options (
  OptionId INTEGER NOT NULL,
  OptionAnswer CHAR(1) NOT NULL,  -- or whatever type Answer.Answer has 
  PRIMARY KEY (OptionId, OptionAnswer)
);

INSERT INTO Options VALUES
  (1, 'A'), (1, 'B'), (1, 'C'),
  (2, 'A'), (2, 'B'), (2, 'C'), (2, 'D'),
  -- ...
  (25, 'T'), (25, 'F'),
  (26, 'Y'), (16, 'N'); 
```

然后，您可以使用如下查询找到每个问题的所有正确和错误答案：

```
SELECT
  q.QuestionContent, 
  q.NoofAnswers, 
  GROUP_CONCAT(DISTINCT Answer ORDER BY Answer SEPARATOR '') AS RightAnswers, 
  GROUP_CONCAT(DISTINCT
    CASE
      WHEN Answer IS NULL THEN OptionAnswer
      ELSE NULL
    END
    ORDER BY OptionAnswer SEPARATOR '') AS WrongAnswers, 
  r.ReplyType, 
  q.QuestionMarks
FROM Question q
LEFT JOIN Reply r 
  ON q.ReplyId = r.ReplyId 
LEFT JOIN Options o 
  ON q.OptionId = o.OptionId
LEFT JOIN Answer an
  ON q.QuestionId = an.QuestionId AND o.OptionAnswer = an.Answer
GROUP BY q.SessionId, q.QuestionId 
```

这是[关于 SQLize 的演示](http://www.sqlize.com/oq7kQnTyP5)（稍作更改以跳过示例表中未包含的列）。

* * *

**编辑：**另一种解决方案是在 PHP 中构建错误答案列表。例如，如果是一个包含原始查询中的单行`$row`的对象（例如由返回的），您可以计算如下错误答案：[`mysqli_fetch_object()`](http://php.net/mysqli_fetch_object)

```
// Do this (preferably) before looping over the rows:
$specialOptionTypes = array(
    'Yes or No' => array( 'Y', 'N' ),
    'True or False' => array( 'T', 'F' ),
);

// Do this for each row:
if ( array_key_exists( $row->OptionType, $specialOptionTypes ) ) {
    $options = $specialOptionTypes[ $row->OptionType ];
} else if ( preg_match( '/^([A-Z])-([A-Z])$/', $row->OptionType, $match ) ) {
    $options = range( $match[1], $match[2] );
} else {
    // issue warning about unrecognized option type
    $options = array();
}
$right = str_split( $row->Answer );  // or explode() on a delimiter, if any
$wrong = array_diff( $options, $right );
$row->WrongAnswers = implode( '', $wrong );  // if you actually want a string 
```

[这是 ideone.com 上的演示](http://ideone.com/fqKZMd)，基于您的示例查询输出。

# ruby - 如何让我的 gem 依赖于 json_pure 或 json？

> ID：14163177
> 
> 赞同：1
> 
> 时间：2013-01-04T18:58:32.543
> 
> 标签：ruby, json, gem

由于 json_pure 和 json gem 是兼容的，有没有办法创建另一个依赖于任何一个的 gem？

如果没有，安装后的 gem 是否是检查其中一个 json gem 并警告是否未安装的好地方？

还有其他解决方案吗？

更新 - 对@tadman 作出澄清的回应

如果可以“强制”其中一个或另一个，那么强制不是一件坏事，对吗？你关于“强迫”的问题是一个修辞问题，暗示我的问题的答案是“不”。

另外，我的印象是人们通常不会查看每个依赖项并问：“我需要这个吗？”

关于缺少依赖项的错误消息-在我看来，仅在用户尝试运行其应用程序时才告诉用户缺少的 dep 是不可接受的用户体验。他们需要早点知道，这就是我为什么提到安装后消息的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:12:47.340

为什么要强制这种依赖？只需将其列为要求，让用户选择他们喜欢的。

规范必须列出您想要的`Gemfile`那些宝石，并且不支持在多个选项之间进行选择。该`.gemspec`文件遵循相同的结构。

要成为一个好公民，您的 gem 应该通过提供描述问题和补救措施的简洁明了的消息来避免加载其中一个失败。这将避免丑陋和令人困惑的堆栈跟踪。

# javascript - 我可以使用 target="" 以某种方式 - 还是我必须使用 javascript 来满足这个要求？

> ID：14163181
> 
> 赞同：0
> 
> 时间：2013-01-04T18:58:52.107
> 
> 标签：javascript, html, window, launch

我有一个页面，其中包含多个指向多个外部应用程序的链接。要求是让所有应用程序在一个新窗口中启动——但只有一个新窗口。换句话说，如果用户返回链接页面，任何新的启动都需要转到同一个（已经启动的）窗口。

有没有办法使用基本的 HTML 来做到这一点，还是我必须使用 javascript？target="_blank" 或 target="_new" 显然每次点击都会启动一个新窗口。我在这里的环境很奇怪，所以我不能使用 JQuery，而且很多添加的脚本往往会与正在发生的事情发生冲突，所以基本的 HTML 是理想的。

只是想确保我没有遗漏任何东西，而且这不能仅使用 HTML 来完成。建议表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T19:00:34.983

您可以使用`target="myexternalapplications"`名称“externalapplications”创建或重用一个窗口。对于目标，值 _blank、_top 只是特殊值。

# objective-c - 如何在 Xcode 中逐行读取支持文件？

> ID：14163185
> 
> 赞同：-2
> 
> 时间：2013-01-04T18:59:06.430
> 
> 标签：objective-c, xcode, parsing

我目前正在为 OS X 制作 Xcode 4.5.1 中的网页浏览程序，并且正在尝试处理书签列表。我希望做的是有一个名为 Bookmarks.txt 的支持文件，我会在其中列出这样的书签：

```
Google
http://www.google.com/
Apple
http://www.apple.com/
Microsoft
http://www.microsoft.com/ 
```

我已经看过很多讨论这个的页面，但没有一个适用于我正在做的事情。我现在拥有的是

```
NSMutableArray *list;

NSString *contents;
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"Bookmarks" ofType:@"txt"];
if (filePath) {
    content = [NSString stringWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:nil];

    for (NSString *line in [contents componentsSeparatedByString:@"\n"]) {
        [list addObject:line];
    }
} 
```

以及 Dave DeLong 的方法，但我得到了 Dave DeLong 的各种错误，而这个没有任何反应。任何帮助都会很棒，但我刚刚开始使用 Xcode，并且知道的很少。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:11:55.643

您的对象未初始化。

```
NSMutableArray *list = [[NSMutableArray alloc] init];
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"Bookmarks" ofType:@"txt"];
if (filePath) {
    NSString * content = [NSString initWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:nil];
    for (NSString *line in [contents componentsSeparatedByString:@"\n"]) {
        [list addObject:line];
    }
} 
```

# sql - 具有设定列数的动态 where 子句

> ID：14163188
> 
> 赞同：0
> 
> 时间：2013-01-04T18:59:20.843
> 
> 标签：sql

我从任意来源引入参数，可能有 1,2 或 3 个参数需要作为 sql 查询中的 where 子句传递。

如何编写此查询，以便无论传递什么参数，查询都将使用尽可能多的参数运行。我刚在想：

```
Passed in: x=1,y=null,z=5

//Do some simple checks and assign local variables when the value are not null.

if(arg == null) 
{
arg = (/*some wild card that allows any value to be returned*/)
}
else{
arg = arg
} 
```

生成的子句： WHERE X=localx AND Y=(ANY VALUE) AND Z=localz

在这个例子中我可以为 Y 使用什么，这样我就可以避免动态创建一个带有可变数量的 args 的字符串？我发现自己很难阐明这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T19:02:44.000

我将假设 SQL Server。使用 ISNULL 命令并在未提供时使所有传入参数为空。

```
SELECT *
FROM Table
WHERE ISNULL(@Param1,Field1)=Field1
AND ISNULL(@Param2,Field2)=Field2
AND ISNULL(@Param3,Field3)=Field3
AND ISNULL(@Param4,Field4)=Field4
AND ISNULL(@Param5,Field5)=Field5 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T20:34:23.480

如果任何字段可能具有 NULL 值，则更好的解决方案是：

```
SELECT *
FROM Table
WHERE (@Param1 is null or @Param1 = Field1) and
      (@Param2 is null or @Param2 = Field2) and
      (@Param3 is null or @Param3 = Field3) and
      (@Param4 is null or @Param4 = Field4) and
      (@Param5 is null or @Param5 = Field5) 
```

这与使用的解决方案之间的主要区别在`isnull`于此版本处理字段中的 NULL 值。`isnull(@param1, field1) = field1`当 @param1 为 NULL 且 field1 为 NULL 时，表达式返回 false。`@Param1 is null or @Param1 = Field1`当两者都为 NULL 时，表达式返回 true。

# java - JPQL（Hibernate 实现）选择与连接问题

> ID：14163192
> 
> 赞同：0
> 
> 时间：2013-01-04T18:59:27.700
> 
> 标签：java, hibernate, war, jpql

我在使用 JPQL（使用 Hibernate）时遇到了一些困难。

我有 2 个实体：

```
package org.oscarehr.common.model;

import java.util.List;
import java.util.ArrayList;
import java.util.Iterator;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Table;
import javax.persistence.OneToMany;
import javax.persistence.PrePersist;
import javax.persistence.JoinColumn;
import javax.persistence.CascadeType;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;

@Entity
@Table(name="spireAccessionNumberMap")
public class SpireAccessionNumberMap extends AbstractModel<Integer> {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer id;
    @Column(name="uaccn")
    private Integer uaccn;

    @OneToMany(cascade=CascadeType.ALL, fetch=FetchType.EAGER)
    @JoinColumn(name="uaccn_id", referencedColumnName="id")
    private List<SpireCommonAccessionNumber> commonAccessionNumbers = new ArrayList<SpireCommonAccessionNumber>();

    public SpireAccessionNumberMap() {
    }

    public SpireAccessionNumberMap(Integer uniqueAccn) {
        this.uaccn = uniqueAccn;
    }

    //@Override
    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }   

    public Integer getUniqueAccessionNumber() {
        return uaccn;
    }

    public void setUniqueAccessionNumber(Integer uaccn) {
        this.uaccn = uaccn;
    }

    public List<SpireCommonAccessionNumber> getCommonAccessionNumbers() {
        return commonAccessionNumbers;
    }

    @PrePersist
    public void prePersist() {
        Iterator<SpireCommonAccessionNumber> i = this.commonAccessionNumbers.iterator();
        SpireCommonAccessionNumber commonAccessionNumber;
        while(i.hasNext()) {
            commonAccessionNumber = i.next();
            commonAccessionNumber.setUniqueAccessionId(this.uaccn);         
        }
    }

} 
```

和

```
package org.oscarehr.common.model;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Table;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;

@Entity
@Table(name="spireCommonAccessionNumber")
public class SpireCommonAccessionNumber extends AbstractModel<Integer> {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer id;
    @Column(name="caccn")
    private String caccn;
    @ManyToOne
    @JoinColumn(name="uaccn_id", referencedColumnName="id")
    private Integer uaccn_id;

    //@Override
    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }   

    public String getCommonAccessionNumber() {
        return caccn;
    }

    public void setCommonAccessionNumber(String caccn) {
        this.caccn = caccn;
    }

    public Integer getUniqueAccessionId() {
        return uaccn_id;
    }

    public void setUniqueAccessionId(Integer uaccn_id) {
        this.uaccn_id = uaccn_id;
    }
} 
```

基本上，我有一个“地图”对象，它有一个与之关联的唯一编号。地图对象有一个“链接”到 1 个或多个“commonNumber”对象，这些对象存储一个“common”数字。

这个想法是能够使用 JPQL 和 'Dao's 将许多常见的数字映射到一个唯一的数字。

但是，当我部署我的 java WAR 文件时，我收到此错误：

```
2013-01-04 13:42:12,344 INFO  [Version:14] Hibernate Commons Annotations 3.1.0.GA
2013-01-04 13:42:12,347 INFO  [Version:16] Hibernate EntityManager 3.4.0.GA
2013-01-04 13:42:17,753 ERROR [ContextLoader:215] Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [spring_jpa.xml]: Invocati
on of init method failed; nested exception is org.hibernate.AnnotationException: @OneToOne or @ManyToOne on org.oscarehr.common.model.SpireCommonAccessionNumber.uaccn_
id references an unknown entity: java.lang.Integer
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
        at org.oscarehr.common.web.OscarSpringContextLoader.createWebApplicationContext(OscarSpringContextLoader.java:97)
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:199)
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:45)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:943)
        at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:778)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:504)
        at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1385)
        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:306)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
        at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1389)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1653)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1662)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1642)
        at java.lang.Thread.run(Thread.java:679)
Caused by: org.hibernate.AnnotationException: @OneToOne or @ManyToOne on org.oscarehr.common.model.SpireCommonAccessionNumber.uaccn_id references an unknown entity: java.lang.Integer
        at org.hibernate.cfg.ToOneFkSecondPass.doSecondPass(ToOneFkSecondPass.java:81)
        at org.hibernate.cfg.AnnotationConfiguration.processEndOfQueue(AnnotationConfiguration.java:456)
        at org.hibernate.cfg.AnnotationConfiguration.processFkSecondPassInOrder(AnnotationConfiguration.java:438)
        at org.hibernate.cfg.AnnotationConfiguration.secondPassCompile(AnnotationConfiguration.java:309)
        at org.hibernate.cfg.Configuration.buildMappings(Configuration.java:1148)
        at org.hibernate.ejb.Ejb3Configuration.buildMappings(Ejb3Configuration.java:1226)
        at org.hibernate.ejb.EventListenerConfigurator.configure(EventListenerConfigurator.java:173)
        at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:854)
        at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:425)
        at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:131)
        at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:257)
        at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:310)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
        ... 28 more 
```

我在这里有点不知所措……我尝试过用不同的方法将“通用”对象映射到“地图”对象，但我不断出错。

任何人都可以为我阐明这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:11:34.227

@ManyToOne 的映射似乎应该如此。

```
@ManyToOne()
@JoinColumn(name="uaccn_id")
private SpireAccessionNumberMap spireAccessionNumberMap;

public SpireAccessionNumberMap getSpireAccessionNumberMap() {
    return spireAccessionNumberMap;
}

public void setSpireAccessionNumberMap(
        SpireAccessionNumberMap spireAccessionNumberMap) {
    this.spireAccessionNumberMap = spireAccessionNumberMap;
} 
```

OneToMany 端需要以下映射。

```
@OneToMany(cascade=CascadeType.ALL, fetch=FetchType.EAGER,mappedBy="spireAccessionNumberMap")
private List<SpireCommonAccessionNumber> commonAccessionNumbers = new ArrayList<SpireCommonAccessionNumber>(); 
```

# excel - 使用 Excel VBA 从包括空列在内的多个列表生成组合

> ID：14163198
> 
> 赞同：1
> 
> 时间：2013-01-04T18:59:59.010
> 
> 标签：excel, combinations, vba

我有两张表格，Sheet1 有一堆信息，有 4 个空列，Sheet2 有 4 个列表，每个列表下都有一堆内容。例子：

列表1：A、B、C
列表 2：D、E、F、G
列表 3：H、I、J、K、L、M
列表 4：N

我想用列表的所有组合填充 Sheet1 中的空列，并为生成的每个组合复制原始 Sheet1 内容。示例：（只是一个大概的想法，没有特定的顺序）

内容XYZ|(空)|(空)|(空)|(空)
内容XYZ|A|(空)|(空)|(空)
内容XYZ|B|(空)|(空)|(空)
...
ContentXYZ|(empty)|D|(empty)|(empty)
...
ContentXYZ|(empty)|(empty)|(empty)|N
...
ContentXYZ|B|F|(empty)|(empty)
。 ..
内容XYZ|(空)|G|(空)|N
...
内容XYZ|(空)|E|K|N
...
内容XYZ|C|G|M|N

我已经完成了复制部分并被困在组合部分。这是我到目前为止所拥有的，如果有人可以帮助我完成其余的工作，请提前感谢！

```
Sub DupSubGroup()

    b = 1
    d = 1
    f = 1
    h = 1

    Do

        Sheets(1).Activate
        Sheets(1).Range("A1:F1").Copy
        erow = Sheets(1).Cells(Rows.Count, 1).End(xlUp).Offset(1, 0).Row
        ActiveSheet.Paste Destination:=Sheets(1).Rows(erow)

    ...

    Loop While b <= Sheet2.Columns("B:B").SpecialCells(xlVisible).Rows.Count And d <=    Sheet2.Columns("D:D").SpecialCells(xlVisible).Rows.Count And f <= Sheet2.Columns("F:F").SpecialCells(xlVisible).Rows.Count And h <= Sheet2.Columns("H:H").SpecialCells(xlVisible).Rows.Count 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T16:43:39.907

如果您正在寻找一个创建所有排列的循环，这里是一个示例：

```
Sub Test()
  Dim List1 As Variant, List2 As Variant, List3 As Variant
  List1 = Array("A", "B", "C", "D")
  List2 = Array(1, 2, 3)
  List3 = Array(True, False)

  Dim I1 As Integer, I2 As Integer, I3 As Integer, R As Integer
  R = 1
  For I1 = 0 To UBound(List1)
    For I2 = 0 To UBound(List2)
      For I3 = 0 To UBound(List3)
        Cells(R, 1) = List1(I1)
        Cells(R, 2) = List2(I2)
        Cells(R, 3) = List3(I3)
        R = R + 1
      Next I3
    Next I2
  Next I1
End Sub 
```

# html - 文本对齐中心不起作用

> ID：14163201
> 
> 赞同：1
> 
> 时间：2013-01-04T19:00:11.707
> 
> 标签：html, css, alignment

在我的网站上，我有一个位置固定的页脚，我想将居中的文本放入其中。奇怪的是，无论我做什么，文本都不会居中，而是总是在左边。

```
<div id="footer">  
Copyright 2013 © LolStreamGallery - <a href="TermsofUse.html">Terms of Use</a>
</div> 
```

CSS：

```
#footer {
    text-align:center;  
    position:fixed;
    bottom:0px;
    height:30px;
    background-color:#ededed;
    font-family: "Myriad Pro";
    font-size:14px;
} 
```

也许你也想知道 Body 的 CSS：

```
body {
    background-color:#ededed;
    /*text-align:left;*/
    margin:0;
    padding:0px; 
} 
```

如您所见，我已经尝试过评价正文默认对齐，但没有效果。任何人的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T19:04:11.153

将其更改为：

```
#footer {
    text-align:center;  
    position:fixed;
    bottom:0px;
    height:30px;
    background-color:#ededed;
    font-family: "Myriad Pro";
    font-size:14px;
    width:100%; // added
} 
```

**[jsFiddle 现场演示](https://jsfiddle.net/BlackSRC/w7qvg8d8/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T19:04:53.333

您的页脚需要延伸到底部。将 width:100% 添加到您的#footer 样式元素。

```
#footer {
    text-align:center;  
    position:fixed;
    bottom:0px;
    height:30px;
    width:100%;
    background-color:#ededed;
    font-family: "Myriad Pro";
    font-size:14px;
} 
```

[http://jsfiddle.net/4zqbX/](http://jsfiddle.net/4zqbX/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T19:11:22.967

当您设置`#footer`为 时`position: fixed`，它不再有宽度。所以从技术上讲， 的内容`#footer`仍然以 为中心`#footer`，但是`#footer`从其内容的宽度中获取它的宽度。因此，您必须摆脱`position: fixed`或提供`#footer`宽度。如果你添加`width: 100%`它`#footer`应该工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T19:05:35.370

也许您需要为#footer 添加宽度

```
#footer {
    text-align:center;  
    position:fixed;
    bottom:0px;
    height:30px;
    background-color:#ededed;
    font-family: "Myriad Pro";
    font-size:14px;
    /*New*/
    width:100%;
}​ 
```

测试：http: [//jsfiddle.net/h6crw/1/](http://jsfiddle.net/h6crw/1/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-04T19:05:47.987

这是因为文本在 的中心`div`，但是如果添加边框，您会看到`div`与文本一样大。

只需在页脚中添加一个`width:100%;`即可完成。

# safari - 当javascript将焦点更改为另一个输入时，iOS6 Safari键盘关闭

> ID：14163203
> 
> 赞同：4
> 
> 时间：2013-01-04T19:00:33.033
> 
> 标签：safari, ios6, keyboard, focus, contenteditable

目前我正在开发一个用于移动设备的网络应用程序，我正在使用 javascript 事件将焦点从一个 contenteditable div 移动到另一个。在大多数移动设备上，一切都很好，键盘也没有隐藏。我已经在 android firefox 和 chrome 以及 iOS5 和 iOS6 safari 上对此进行了测试。在 iOS6 Safari 上，我发现将焦点从一个 div 移动到另一个 div 将关闭键盘而不改变焦点，而不是像在所有其他浏览器上一样保持键盘显示。

例如，如果我有

```
<div contenteditable="true" id="1">Stuff</div>
<div contenteditable="true" id="2">Things</div> 
```

和

```
$("#1").on("keydown", function() {
  $("#2").focus();
});
$("#2").on("keydown", function() {
  $("#1").focus();
}); 
```

然后我希望在每个 div 中交替输入字符，这在大多数移动浏览器上都会发生，除了 iOS6 safari。

您可以在我在[http://jsfiddle.net/8jj56/2/制作的 JSfiddle 中找到一个简化示例](http://jsfiddle.net/8jj56/2/)

如何为 iOS6 获得相同的键盘行为？

# sqlite - 在 Windows Corona 模拟器中处理数据库文件：数据库磁盘映像格式错误

> ID：14163207
> 
> 赞同：1
> 
> 时间：2013-01-04T19:00:55.490
> 
> 标签：sqlite, coronasdk

在我的 Corona SDK 应用程序中，我将一个 sqlite 数据库文件复制到另一个位置，然后打开它。它在 Mac OS 上的 Corona Simulator 以及 Android 版本中运行良好。但它在 Windows 8 上的 Corona Simulator 中不起作用。第一次数据库操作后出现的错误消息是“数据库磁盘映像格式错误”。

我在 Corona 网站 [http://developer.coronalabs.com/forum/2011/07/09/sqlite-db-being-corrupted-windows上找到了问题描述](http://developer.coronalabs.com/forum/2011/07/09/sqlite-db-being-corrupted-windows)

有人知道这个问题的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-12T02:26:43.780

以为我会发布答案，尽管这是为未来的搜索者发布的：

Windows 在为模拟器复制文件时很挑剔。它要求您指定数据库将作为二进制文件进行读取和写入：

```
local fileSource = io.open( pathSource, "rb" ) 
local fileDest = io.open( pathDest, "wb" ) 
```

虽然它在 Mac Corona Simulator 中工作正常而无需指定二进制读/写，但它是 Windows 开发所必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T22:28:01.243

我知道这是旧的，但链接上的代码的实际问题（除了布赖恩伯顿博士已经提到的）是他们没有关闭初始打开的文件以防万一。所以而不是：

```
if( file == nil )then
     -- Doesn't Already Exist, So Copy it In From Resource Directory
    pathSource = system.pathForFile( dbName, system.ResourceDirectory )
    fileSource = io.open( pathSource, "r" )
    contentsSource = fileSource:read( "*a" )

    -- Write Destination File in Documents Directory
    pathDest = system.pathForFile( dbName, system.DocumentsDirectory )
    fileDest = io.open( pathDest, "w" )
    fileDest:write( contentsSource )

    -- Done
    io.close( fileSource )
    io.close( fileDest )
end 
```

您应该在末尾添加和 ELSE 子句，如下所示：

```
if( file == nil )then
     -- Doesn't Already Exist, So Copy it In From Resource Directory
    pathSource = system.pathForFile( dbName, system.ResourceDirectory )
    fileSource = io.open( pathSource, "rb" )
    contentsSource = fileSource:read( "*a" )

    -- Write Destination File in Documents Directory
    pathDest = system.pathForFile( dbName, system.DocumentsDirectory )
    fileDest = io.open( pathDest, "wb" )
    fileDest:write( contentsSource )

    -- Doneb
    io.close( fileSource )
    io.close( fileDest )
else
    io.close(file)
end 
```

干杯!

# c++ - 如何将 C++ 目标文件与 ld 链接

> ID：14163208
> 
> 赞同：42
> 
> 时间：2013-01-04T19:01:23.323
> 
> 标签：c++, linker, linker-errors, ld, libstdc++

我正在尝试使用 ld 而不是 g++ 链接 C++ 的输出。我这样做只是为了学习如何做，而不是出于实际目的，所以请不要建议只用 g++ 来做。

看看[这个问题](https://stackoverflow.com/questions/6704780/using-only-g-works-but-not-g-c-and-ld)，这个人在运行 ld 命令时会遇到同样的错误：

```
$ ld test.o -o test.out
ld: warning: cannot find entry symbol _start; defaulting to 00000000004000e8
test.o: In function `main':
test.cpp:(.text+0x1c): undefined reference to `strcasecmp'
test.cpp:(.text+0x23): undefined reference to `std::cout'
test.cpp:(.text+0x28): undefined reference to `std::ostream::operator<<(int)'
test.cpp:(.text+0x2d): undefined reference to `std::basic_ostream<char, std::char_traits<char> >& std::endl<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&)'
test.cpp:(.text+0x35): undefined reference to `std::ostream::operator<<(std::ostream& (*)(std::ostream&))'
test.o: In function `__static_initialization_and_destruction_0(int, int)':
test.cpp:(.text+0x75): undefined reference to `std::ios_base::Init::Init()'
test.cpp:(.text+0x7a): undefined reference to `__dso_handle'
test.cpp:(.text+0x84): undefined reference to `std::ios_base::Init::~Init()'
test.cpp:(.text+0x89): undefined reference to `__cxa_atexit'
ld: test.out: hidden symbol `__dso_handle' isn't defined
ld: final link failed: Bad value 
```

链接帖子中的答案表明将 C++ 库添加为链接器参数将解决问题，所以我尝试了

```
ld test.o -o test.out -llibstd++ 
```

这是他们的建议，我还尝试了许多其他库名称，例如 libstdc++ 或 stdc++。但我总是会收到一个看起来像的错误

```
ld: cannot find -llibstd++ 
```

我做错了什么，如何使用 ld 链接我的目标文件？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-04T19:03:43.120

如果您`g++`使用该`-v`标志运行，您将看到它使用的链接线。这是一个简单的示例程序：

```
#include <iostream>

int main(void)
{
    std::cout << "Hello, world!" << std::endl;
    return 0;
} 
```

以及运行的输出`g++ -v -o example example.cpp`：

```
Using built-in specs.
Target: x86_64-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.4.4-14ubuntu5.1' --with-bugurl=file:///usr/share/doc/gcc-4.4/README.Bugs --enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.4 --enable-shared --enable-multiarch --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.4 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-objc-gc --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu
Thread model: posix
gcc version 4.4.5 (Ubuntu/Linaro 4.4.4-14ubuntu5.1) 
COLLECT_GCC_OPTIONS='-v' '-o' 'example' '-shared-libgcc' '-mtune=generic'
 /usr/lib/gcc/x86_64-linux-gnu/4.4.5/cc1plus -quiet -v -D_GNU_SOURCE example.cpp -D_FORTIFY_SOURCE=2 -quiet -dumpbase example.cpp -mtune=generic -auxbase example -version -fstack-protector -o /tmp/ccV8qjvd.s
ignoring nonexistent directory "/usr/local/include/x86_64-linux-gnu"
ignoring nonexistent directory "/usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../x86_64-linux-gnu/include"
ignoring nonexistent directory "/usr/include/x86_64-linux-gnu"
#include "..." search starts here:
#include <...> search starts here:
 /usr/include/c++/4.4
 /usr/include/c++/4.4/x86_64-linux-gnu
 /usr/include/c++/4.4/backward
 /usr/local/include
 /usr/lib/gcc/x86_64-linux-gnu/4.4.5/include
 /usr/lib/gcc/x86_64-linux-gnu/4.4.5/include-fixed
 /usr/include
End of search list.
GNU C++ (Ubuntu/Linaro 4.4.4-14ubuntu5.1) version 4.4.5 (x86_64-linux-gnu)
    compiled by GNU C version 4.4.5, GMP version 4.3.2, MPFR version 3.0.0-p3.
GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072
Compiler executable checksum: d92fbc2d715a3b7e0f4133f0c40053e4
COLLECT_GCC_OPTIONS='-v' '-o' 'example' '-shared-libgcc' '-mtune=generic'
 as -V -Qy -o /tmp/ccGHR0pc.o /tmp/ccV8qjvd.s
GNU assembler version 2.20.51 (x86_64-linux-gnu) using BFD version (GNU Binutils for Ubuntu) 2.20.51-system.20100908
COMPILER_PATH=/usr/lib/gcc/x86_64-linux-gnu/4.4.5/:/usr/lib/gcc/x86_64-linux-gnu/4.4.5/:/usr/lib/gcc/x86_64-linux-gnu/:/usr/lib/gcc/x86_64-linux-gnu/4.4.5/:/usr/lib/gcc/x86_64-linux-gnu/:/usr/lib/gcc/x86_64-linux-gnu/4.4.5/:/usr/lib/gcc/x86_64-linux-gnu/
LIBRARY_PATH=/usr/lib/gcc/x86_64-linux-gnu/4.4.5/:/usr/lib/gcc/x86_64-linux-gnu/4.4.5/:/usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../lib/:/lib/../lib/:/usr/lib/../lib/:/usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../:/lib/:/usr/lib/:/usr/lib/x86_64-linux-gnu/
COLLECT_GCC_OPTIONS='-v' '-o' 'example' '-shared-libgcc' '-mtune=generic'
 /usr/lib/gcc/x86_64-linux-gnu/4.4.5/collect2 --build-id --eh-frame-hdr -m elf_x86_64 --hash-style=gnu -dynamic-linker /lib64/ld-linux-x86-64.so.2 -o example -z relro /usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../lib/crt1.o /usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../lib/crti.o /usr/lib/gcc/x86_64-linux-gnu/4.4.5/crtbegin.o -L/usr/lib/gcc/x86_64-linux-gnu/4.4.5 -L/usr/lib/gcc/x86_64-linux-gnu/4.4.5 -L/usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../lib -L/lib/../lib -L/usr/lib/../lib -L/usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../.. -L/usr/lib/x86_64-linux-gnu /tmp/ccGHR0pc.o -lstdc++ -lm -lgcc_s -lgcc -lc -lgcc_s -lgcc /usr/lib/gcc/x86_64-linux-gnu/4.4.5/crtend.o /usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../lib/crtn.o 
```

哇，真是一团糟。方便的是，链接线是最后一个，所以你可以很容易地看到发生了什么。

正如您在下面的评论中注意到的那样，前端正在使用`collect2`而不是`ld`. 幸运`collect2`的是，它只是`ld`. 这是一个使用它的例子：

首先让我们生成一个目标文件：

```
$ ls
example.cpp
$ c++ -c example.cpp
$ ls
example.cpp example.o 
```

然后我们将使用前端链接它以查看链接行：

```
$ c++ -v -o example example.o
Using built-in specs.
Target: x86_64-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.4.4-14ubuntu5.1' --with-bugurl=file:///usr/share/doc/gcc-4.4/README.Bugs --enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.4 --enable-shared --enable-multiarch --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.4 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-objc-gc --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu
Thread model: posix
gcc version 4.4.5 (Ubuntu/Linaro 4.4.4-14ubuntu5.1) 
COMPILER_PATH=/usr/lib/gcc/x86_64-linux-gnu/4.4.5/:/usr/lib/gcc/x86_64-linux-gnu/4.4.5/:/usr/lib/gcc/x86_64-linux-gnu/:/usr/lib/gcc/x86_64-linux-gnu/4.4.5/:/usr/lib/gcc/x86_64-linux-gnu/:/usr/lib/gcc/x86_64-linux-gnu/4.4.5/:/usr/lib/gcc/x86_64-linux-gnu/
LIBRARY_PATH=/usr/lib/gcc/x86_64-linux-gnu/4.4.5/:/usr/lib/gcc/x86_64-linux-gnu/4.4.5/:/usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../lib/:/lib/../lib/:/usr/lib/../lib/:/usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../:/lib/:/usr/lib/:/usr/lib/x86_64-linux-gnu/
COLLECT_GCC_OPTIONS='-v' '-o' 'example' '-shared-libgcc' '-mtune=generic'
 /usr/lib/gcc/x86_64-linux-gnu/4.4.5/collect2 --build-id --eh-frame-hdr -m elf_x86_64 --hash-style=gnu -dynamic-linker /lib64/ld-linux-x86-64.so.2 -o example -z relro /usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../lib/crt1.o /usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../lib/crti.o /usr/lib/gcc/x86_64-linux-gnu/4.4.5/crtbegin.o -L/usr/lib/gcc/x86_64-linux-gnu/4.4.5 -L/usr/lib/gcc/x86_64-linux-gnu/4.4.5 -L/usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../lib -L/lib/../lib -L/usr/lib/../lib -L/usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../.. -L/usr/lib/x86_64-linux-gnu example.o -lstdc++ -lm -lgcc_s -lgcc -lc -lgcc_s -lgcc /usr/lib/gcc/x86_64-linux-gnu/4.4.5/crtend.o /usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../lib/crtn.o 
```

然后扔掉二进制文件，并链接我们自己（通常，我只是复制/粘贴该行，但为了更易于阅读，我使用`\`s 以多行方式进行）：

```
$ ls
example  example.cpp  example.o
$ rm example
$ ls
example.cpp example.o
$ ld                                                              \
> --build-id                                                      \
> --eh-frame-hdr                                                  \
> -m elf_x86_64                                                   \
> --hash-style=gnu                                                \
> -dynamic-linker                                                 \
> /lib64/ld-linux-x86-64.so.2                                     \
> -o example                                                      \
> -z relro                                                        \
> /usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../lib/crt1.o      \
> /usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../lib/crti.o      \
> /usr/lib/gcc/x86_64-linux-gnu/4.4.5/crtbegin.o                  \
> -L/usr/lib/gcc/x86_64-linux-gnu/4.4.5                           \
> -L/usr/lib/gcc/x86_64-linux-gnu/4.4.5                           \
> -L/usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../lib           \
> -L/lib/../lib                                                   \
> -L/usr/lib/../lib                                               \
> -L/usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../..                  \
> -L/usr/lib/x86_64-linux-gnu                                     \
> example.o                                                       \
> -lstdc++                                                        \
> -lm                                                             \
> -lgcc_s                                                         \
> -lgcc                                                           \
> -lc                                                             \
> -lgcc_s                                                         \
> -lgcc                                                           \
> /usr/lib/gcc/x86_64-linux-gnu/4.4.5/crtend.o                    \
> /usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../lib/crtn.o 
```

最后，运行它！

```
$ ls
example example.cpp example.o
$ ./example 
Hello, world! 
```

您可以通过删除一些参数来显着缩短该链接行。这是我经过一些实验后想出的最小集合：

```
$ ld                                                              \
> -dynamic-linker                                                 \
> /lib64/ld-linux-x86-64.so.2                                     \
> -o example                                                      \
> /usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../lib/crt1.o      \
> /usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../lib/crti.o      \
> /usr/lib/gcc/x86_64-linux-gnu/4.4.5/crtbegin.o                  \
> example.o                                                       \
> -L/usr/lib/gcc/x86_64-linux-gnu/4.4.5                           \
> -lstdc++                                                        \
> -lc                                                             \
> /usr/lib/gcc/x86_64-linux-gnu/4.4.5/crtend.o                    \
> /usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../lib/crtn.o 
```

这组标志和库当然取决于您的程序使用的库函数和语言特性。

# asp.net - 通过 GET 的 Mvc Web API 复杂对象查询

> ID：14163210
> 
> 赞同：10
> 
> 时间：2013-01-04T19:01:25.273
> 
> 标签：asp.net, rest, asp.net-mvc-4, asp.net-web-api

有没有办法通过“GET”查询 web api，但参数中有复杂的对象？

到目前为止，我看到的所有示例似乎都表明我必须使用“POST”。但我不想使用“POST”，因为这是一个查询，同时我不想要一个有 16 个参数的函数，因为那会很脆。

```
public Product Get(int id, string name, DateTime createdBy, string stockNumber, ... ) 
    { 
          ...
    } 
```

我希望将上述内容变成：

```
public Product Get(ProductQuery query) 
    { 
          ...
    } 
```

有没有办法做到这一点？以及如何使 HttpClient 与上述服务一起工作。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-04T22:13:41.313

您可以`ProductQuery`传递参数`[FromUri]`。

假设这是您的`ProductQuery`课程：

```
public class ProductQuery
{
    public int Id { get; set; }
    public string Name { get; set; }
    public DateTime CreatedBy { get; set; }
    public string StockNumber { get; set; }
} 
```

`[FromUri]`您可以使用...注释您的操作参数

```
 public Product Get([FromUri] ProductQuery productQuery)
    {...} 
```

...并且具有`ProductQuery`(ie `Id`, `Name`, ...) 的属性可以从 Uri 中的查询字符串传入：

```
http://.../api/products?Id=1&Name=Product1&CreatedBy=1/4/2013&StockNumber=ABC0001 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T19:05:31.983

您可能想查看 Web API 中的 OData 支持 - 也许这会满足您的需求？取决于查询的实现有多复杂！

[http://blogs.msdn.com/b/alexj/archive/2012/08/15/odata-support-in-asp-net-web-api.aspx](http://blogs.msdn.com/b/alexj/archive/2012/08/15/odata-support-in-asp-net-web-api.aspx)

# python - 使用ndimage在python中旋转

> ID：14163211
> 
> 赞同：3
> 
> 时间：2013-01-04T19:01:33.500
> 
> 标签：python, rotation, scipy

我需要使用 Python 旋转文件夹中的大量图像。我发现，可以使用`ndimage.rotate`. 但是我遇到了一个问题，因为图像没有被旋转：我等待和等待，这需要很长时间......

这是我的代码中讨论的部分：

```
for image in filelist:
    print 'Checking ', os.path.basename(image)
    im = misc.imread(image)
    geom = im.shape
    print geom
    if geom[1] > geom[0]:
        # Some code to determine the way image should be rotated, which 
        # calculates angle
        print 'Rotating ', os.path.basename(image)
        rotated = ndimage.rotate(im, angle, reshape = False)
        print 'Rotated ', os.path.basename(image)
        misc.imsave(image, rotated)
    else:
        print os.path.basename(image), ' is OK' 
```

当我运行它时，它的运行速度非常慢，每张图像大约 20 秒。如何更快地做到这一点？我将不胜感激。

以防万一，我不是专业程序员。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-04T22:57:08.387

解决方案是使用 PIL 而不是 ndimage，如 deinonychusaur 建议的那样。你可能想看看这里：pythonware.com/library/pil/handbook/introduction.htm

它拥有使用 PIL 编写程序所需的一切。

# operating-system - iPod Nano 6G/7G 运行什么操作系统？

> ID：14163212
> 
> 赞同：2
> 
> 时间：2013-01-04T19:01:35.197
> 
> 标签：operating-system, ipod

根据我在网上阅读的大量文章，第 6 代和第 7 代 iPod nano 不运行 iOS。

[Mac 崇拜：触摸屏 iPod Nano 不运行 iOS](http://www.cultofmac.com/57467/apple-touchscreen-ipod-nano-does-not-run-ios/)

如果是这种情况，我很想知道他们实际运行的是什么操作系统。它是基于 iOS/OS X 的，还是完全不同的自定义操作系统？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-05T09:26:54.380

根据这篇文章（以及我公认的脆弱记忆），最初的 iPod（即在 iPhone/iPod touch 之前）都运行一个名为“Pixo”的操作系统：

[http://en.wikipedia.org/wiki/Pixo](http://en.wikipedia.org/wiki/Pixo)

所以它甚至与达尔文都没有关系。原始 iPod 一代（纳米等）的更新版本基本上只是“重新皮肤”看起来更像 iOS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-15T04:37:01.933

IPod Nano 7G 运行 1.0.2 PC，这是一个 IOS 风格的操作系统，但不是正确的 IOS。我不知道Itunes是否会为它提供软件更新，但你永远不知道！

希望这回答了你的问题，马修

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T15:35:01.490

嗯，它只是某种嵌入式操作系统，Apple 从来没有费心告诉我们。它不是 iOS 或 Mac OSX，因为这会占用太多的计算能力并推高价格和功耗。它可能只是一个嵌入式马赫系统。

更多信息：[http ://en.wikipedia.org/wiki/IPod#Software](http://en.wikipedia.org/wiki/IPod#Software)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-08T23:39:43.690

截至 2014 年 1 月 8 日，iPod Nano 7 使用 1.0.3 PC。我不知道底层内核，但我认为它是 Darwin。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-07-01T14:48:36.997

*   iPod nano 6gen 正在运行 ios 3.0.9
*   iPod nano 7gen 正在运行 ios 3.9.9
*   iPod nano 5gen 正在运行 ios 2.9.9

*   iPod touch 2 是 ios 4.2.1

*   iPod touch 3 是 ios 5.0.1
*   iPod touch 4 是 ios 6.1.3

# google-app-engine - 开发控制台上的 GAE 队列统计数字错误

> ID：14163214
> 
> 赞同：1
> 
> 时间：2013-01-04T19:01:52.463
> 
> 标签：google-app-engine

我在一些代码中看到非常奇怪的行为，这些代码检查队列的 QueueStatistics 以查看当前是否有任何任务正在运行。据我所知，没有任何任务正在运行，并且在过去 12 多个小时内没有任何任务在排队。开发控制台证实了这一点，称队列中有 0 个任务。

不过，在我的调试器中查看 QueueStatistics 信息，确认我的进程正在退出，因为它在队列中看到了大约 500 多个（!!!）任务。它还说它在过去一分钟内运行了超过 1000 个任务，但在过去一小时内运行了 0 个任务。如果我通过 ETA Usec 进行解析，则时间是“准确地”显示的，好像 ETA 在提取 QueueStatistics 的下一分钟内。

每当我重新运行我的 servlet 时，这种情况就会反复发生，而 servlet 所做的第一件事就是检查队列统计信息。没有其他 servlet、任务或 cron 作业正在运行，因为这是我的本地开发服务器。然而，队列统计数据继续坚持我有数百个任务正在运行。

我找不到任何其他关于此行为的报告，但感觉我必须在这里遗漏一些关于队列统计的重要内容。我使用的代码非常简单：

```
Queue taskQueue = QueueFactory.getQueue("myQueue");
QueueStatistics stats = taskQueue.fetchStatistics();
if (stats.getNumTasks() > 0) { return; } 
```

我错过了什么？本地开发服务器上的队列统计信息是否完全不可靠？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:05:40.053

如果它在部署时按预期工作，那么这就是要遵循的标准。

很多事情都不像在部署环境中那样工作（并行线程不是并行的，在撰写本文时，后端支持在解决它们方面有些破坏）所以部署部署部署！

另一个例子是通道 API。在本地使用时，它使用轮询，如果您查看日志/浏览器调试，您会看到 100 个。但是部署后一切都很好，并且可以按预期工作。

# apache - Apache HTTP 服务器在一段时间后开始阻止请求

> ID：14163215
> 
> 赞同：1
> 
> 时间：2013-01-04T19:01:53.803
> 
> 标签：apache

我的主机使用 Apache 服务器，我从同一个客户端应用程序连接到相同的 url，每分钟发出 10-20 个请求，一段时间后服务器开始阻止客户端应用程序，显示地址无法访问和连接被拒绝等错误。我是确保这不是连接问题，因为它始终可以重现。

任何想法如何设置服务器，使其不会阻止客户端应用程序的 IP 地址？

# php - 将 cakephp 应用程序部署到主机后，我得到“间接修改重载属性...”

> ID：14163220
> 
> 赞同：1
> 
> 时间：2013-01-04T19:02:04.747
> 
> 标签：php, cakephp

我将我的 PHPCake 上传到我的托管网站，但我开始间接修改重载属性 AppModel::$MyModel 没有效果

在这个模型中，我与另一个模型有关联，所以当我尝试通过

```
$this->MyModel->OtherModel->id = $id; 
```

我得到了错误。它在我的电脑上工作，但它在网站上不起作用。不确定网站 php 配置是否不支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:58:27.107

```
$this->MyModel->OtherModel-> id = id; 
```

缺少 id 之前的 $。

仔细检查您的模型关系。“OtherModel”必须与“MyModel”相关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:55:20.297

对不起。原来是模型文件名的问题。它对网站中的大写字母很敏感，但在计算机中似乎并不介意。顺便说一句，我使用 Mac OSX 作为 MAMP 的测试环境。

# sql - 使用 PostgreSQL 进行多项目路径查询

> ID：14163226
> 
> 赞同：1
> 
> 时间：2013-01-04T19:02:45.303
> 
> 标签：sql, postgresql, common-table-expression, recursive-query

使用以下 PostgreSQL 9.2.2 表：

```
 id    | parent_id
--------+----------
 body   | null
 head   | body
 mouth  | head
 eye    | head
 tooth  | mouth
 tongue | mouth
 sclera | eye
 cornea | eye 
```

我需要一个输出，其中列出了每个非父母子女的所有直接间接父母，例如：

```
tooth   mouth
tooth   head
tooth   body
tongue  mouth
tongue  head
tongue  body
sclera  eye
sclera  head
sclera  body
cornea  eye
cornea  head
cornea  body 
```

我试过搜索，我的结果只显示了使用递归的单项查询，比如：

```
WITH RECURSIVE t AS ( 
SELECT  parent_id, id 
FROM    item_tree 
WHERE   child_id = id 
UNION ALL 
SELECT  it.parent_id, it.id
    FROM    item_tree it 
JOIN    t 
ON  it.child_id = t.parent_id
) 
SELECT  id, child_id 
FROM    t 
```

我可以在外部编写一个循环替换`id`每次，但它只能在 SQL 中完成吗？

@丹尼尔，

这是原始查询的输出：

```
 id     parent_id
  ------ ---------
  cornea eye
  cornea NULL
  cornea head
  cornea body
  sclera eye
  sclera head
  sclera NULL
  sclera body
  tongue body
  tongue head
  tongue NULL
  tongue mouth
  tooth  body
  tooth  head
  tooth  mouth
  tooth  NULL 
```

然而，如果你用一个空过滤的 select 语句将它括起来，即使你删除了内部的空过滤器，它也会提供所需的内容，如下所示：

```
 select * from (
     WITH RECURSIVE t(id,parent_id) AS ( 
     select id,parent_id from item_tree i
     UNION ALL
     select t.id,i.parent_id from item_tree i JOIN t on i.id=t.parent_id 
     )
     select * from t order by id
  ) t1 where parent_id is not null; 
```

无论如何，我已经点击了复选标记，因为这可能是一个错误（我已经尝试通过 jdbc 和在 pgAdmin3 中使用相同的输出运行这两个查询）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:59:35.313

假设表的结构是**item_tree** ( `id`text, text )，递归查询可以从定义它们的叶子元素开始（即，它们不是任何东西的父元素），并且必须过滤`parent_id`具有 null 的顶级元素，`parent_id`也：

```
select id,parent_id from item_tree i
 where parent_id is not null and
  id not in  (select parent_id from item_tree where parent_id is not null) 
```

然后将 (parent_id,id) 关系爬到树的顶部。

完整查询：

```
WITH RECURSIVE t(id,parent_id) AS ( 
select id,parent_id from item_tree i where parent_id is not null 
   and id not in  (select parent_id from item_tree where parent_id is not null)
UNION ALL
 select t.id,i.parent_id from item_tree i JOIN t on i.id=t.parent_id 
)
select * from t order by id; 
```

**编辑**：上面的查询在其输出中包括层次结构顶部的 NULL。为了排除它们，可以改用这个修改后的版本。最终结果应该与带有外部过滤的已编辑问题中的查询相同。

```
WITH RECURSIVE t(id,parent_id) AS ( 
select id,parent_id from item_tree i where parent_id is not null 
   and id not in  (select parent_id from item_tree where parent_id is not null)
UNION ALL
 select t.id,i.parent_id from item_tree i JOIN t on i.id=t.parent_id
   where i.parent_id is not null 
)
select * from t order by id; 
```

# php - php脚本上的502网关错误

> ID：14163227
> 
> 赞同：0
> 
> 时间：2013-01-04T19:02:46.087
> 
> 标签：php, webserver, cpanel, http-error

我收到错误消息

> 502 Bad Gateway 网关收到无效的 HTTP 响应或意外断开与原始服务器的连接。

在执行一段时间后（例如 30-40 秒）在我的服务器上运行一些 PHP 脚本时。我检查了 cpanel 中的错误日志，但那里没有任何反映。我确定这不是因为我的脚本崩溃，因为它在我的 localhost 上运行良好。顺便说一句，我正在使用共享主机。

PS-正如你们中的一些人所问的那样，这是[脚本](http://pastebin.com/SNjv4HeV)，我正在使用 curl 从 Microsoft Academic 网站上抓取有关研究论文的数据，这纯粹是出于学术目的。

# intellij-idea - Intellij IDEA：无法编译 java 代码

> ID：14163229
> 
> 赞同：1
> 
> 时间：2013-01-04T19:02:57.100
> 
> 标签：intellij-idea

每当我尝试编译/运行 java 代码时，我都会得到以下信息。

```
Compilation completed with 1 error and 0 warnings in 2 sec
1 error
0 warnings
java: Cannot find JDK '1.6' for module 'balh'  <= ERROR 
```

在“项目 SDK”中设置和选择 SDK 路径我在 RHEL 6.2 上使用 IDEA 12

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:09:04.040

确保您的依赖项在该特定模块中包含 Java 1.6。

![IntelliJ 11，显示打开依赖项选项卡的模块页面。](../Images/94dfa844419dfa46f6bb396e3794567c.png)

在这里，我的模块 SDK 是 Java 1.7，但想法相同 - 如果 Java 1.6 未出现或不可用，请使用项目 SDK 或使用“新建”对话框在您的框中找到它。

# .net - System.Net 套接字的非常奇怪的自发断开连接

> ID：14163230
> 
> 赞同：3
> 
> 时间：2013-01-04T19:03:01.293
> 
> 标签：.net, sockets, connect, system.net

我有一个自发断开的 System.Net 套接字，尤其是当我在 Visual Studio 2010 调试器中查询其状态 TWICE 时。

它是这样实例化的：

```
 _TCPConn = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp); 
```

后来我连接并设置了一个循环来观察它的“已连接”属性。. .

```
 _TCPConn.Connect(this.IPAddress, REMOTE_TCP_PORT);

      // loop to figure out why / when we're disconnecting ...
      int loops;
      bool bState = false;
      for (loops = 0; loops < 100; loops++)
      {
          bState = _TCPConn.Connected;
          if (!_TCPConn.Connected) 
          {
              break;
          }
          Thread.Sleep(1000);
      } 
```

在 Connect 调用之后，它的 Connected 属性在调试器中立即为**true**，并且网络嗅探器显示与主机的成功连接。

但是，如果我在调试器中再次检查 Connected 属性，它会显示为**false**。

如果我没有在循环中设置任何断点，它将一直通过循环（100 秒），当它退出时，我第一次在调试器中查看时Connected 属性为**true ，下一次为****false**。

如果我让它循环 10 或 15 秒并设置断点，那么我第一次查看调试器时它会是**真的，而我第二次查看它时会是****假**的，然后它会在那一点上退出循环，证明它是不仅仅是调试器的工件 - 它确实设置为 false。

当它断开连接时，网络嗅探器上没有相关的活动，即它没有被主机断开连接。

这是一个单线程应用程序。我开始研究这个，因为后来当我尝试使用我的套接字时，我经常发现它断开连接并试图找出原因。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-07T15:16:26.147

该问题似乎是 Visual Studio 2010 Express 调试器中的错误。

正如我在上面的评论中提到的，这种在调试器中第二次触摸时自发断开连接的奇怪行为发生在两台单独的 PC 上——一台 XP 机器和一台 Win 7 PC。为了添加更多细节，XP 机器连接到一台工业设备，而 Win7 PC 连接到本地主机。两台 PC 都运行 Visual C# 2010 Express。

因此，我随后使用完整的专业版 Visual Studio 2010 进行了尝试，但没有遇到此类行为。

The original disconnect problem that caused me to start looking in the debugger in the first place was then easy to find once the debugger was no longer disconnecting me. I think this was one of the weirdest problems I've ever seen in 30 years of programming.

# javascript - 使用 querySelectorAll 为新创建的元素创建一个循环

> ID：14163233
> 
> 赞同：0
> 
> 时间：2013-01-04T19:03:07.220
> 
> 标签：javascript, loops, indexing, selectors-api

我想要做的是使用该`querySelectorAll()`函数创建一个循环，我可以在其中定位我使用我`<li/>`创建的函数创建的每个新元素`getInput()`（效果很好）。我想用它`console.log()`来测试它，这样当我点击每个`<li/>`项目时，它会确认我已经在控制台中这样做了。这种`querySelectorAll()`方法对我来说是新的，而且我在学习 Javascript 方面也很陌生。因此，任何建议和解释都会非常有帮助。谢谢。

```
function getInput() {
    var liValue = theForm.elements.input.value;  
    var liNew = document.createElement("li");
    liNew.innerHTML += liValue;
    var list = document.getElementById("ulList");
    list.appendChild(liNew); 
    deleteLi;
 }

 function deleteLi() {
    var handlers = document.querySelectorAll("li");
    for (var i = 0; i < handlers.lenghth; i++) {
        handlers[i].onclick = console.log("you got me");
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:25:05.230

只需在创建元素时添加点击处理程序。运行您发布的 qSA 并选择所有`li`元素，即使是您已经创建的元素。

```
function getInput() {
    var liValue = theForm.elements.input.value;  
    var liNew = document.createElement("li");
    liNew.onclick = function() { console.log("clicked!"); };
    liNew.innerHTML += liValue;
    var list = document.getElementById("ulList");
    list.appendChild(liNew); 
} 
```

# colorbox - jquery colorbox：第一个图像未加载

> ID：14163234
> 
> 赞同：1
> 
> 时间：2013-01-04T19:03:09.160
> 
> 标签：colorbox

我对颜色框有一个奇怪的问题。第一个图像拒绝在幻灯片的第一个周期加载。在随后的循环中，它加载正常。

页面链接：[http ://www.moongraf.com/ddf/weddings.html](http://www.moongraf.com/ddf/weddings.html)

点击文字中的照片库链接

用于测试的图像大小低于 8k，因此不是图像大小问题。幻灯片播放速度是4000，比较慢。

我更新了另一个页面，使用与头部内容中的 css/js 文件相同的链接可以正常工作：[http ://www.moongraf.com/ddf/eventsOLD.html](http://www.moongraf.com/ddf/eventsOLD.html)

我一定错过了一些东西，但我找不到任何看起来有问题的东西。任何帮助，将不胜感激。

编辑：我找到了答案。Dreamweaver 正在重写我的代码并删除指向 jquery.min.js 的链接。好的。

# c++ - 存储在文件中的 boost multi_index_container 的持久性

> ID：14163235
> 
> 赞同：2
> 
> 时间：2013-01-04T19:03:10.997
> 
> 标签：c++, boost, mmap, boost-interprocess, boost-multi-index

我可以依赖在内存映射文件中分配的 boost multi_index_container 吗？这种“数据库”可以在具有相同字节序的计算机之间移植吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T19:44:08.457

不，这不安全。内存映射文件中第一个字节的地址不能保证在调用之间是相同的。

Boost 的内存映射文件需要一个`hint`，但这只是一个提示。

所以在第一次调用中，内存可能位于`0xBAADF00D`. 在第二次调用时，它可能位于`0xF00DBAAD`. 结构中的指针将不再有效，因为它们将指向内存 around`0xBAADF00D`而不是 around `0xF00DBAAD`。

作为一个严重的问题，它*通常*可能在测试中起作用，因为`hint`通常可能会遵守 - 但有时该内存地址已经存在东西，并且`hint`必须忽略。

（还有其他部分让这变得非常困难——但上面的内容让它变得非常不可行）。

现在，像这样的策略可以工作，但需要对所讨论的数据结构进行非常侵入性的内省。为了使数据结构具有正确的偏移量，您必须执行 DLL 重新寻址之类的过程，到那时您还不如将其序列化为平面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-02T07:33:24.583

借助[Boost.Interprocess 的内存映射文件](http://www.boost.org/doc/html/interprocess/sharedmemorybetweenprocesses.html#interprocess.sharedmemorybetweenprocesses.mapped_file)并稍加注意，您可以将其持久化`multi_index_container`；映射位于不同地址的问题可以使用[*偏移量*](http://www.boost.org/doc/html/boost/interprocess/offset_ptr.html)而不是指针来解决，而 Boost.MultiIndex 已准备好处理该问题：请参阅[此示例](http://www.boost.org/libs/multi_index/doc/examples.html#example12)，其中实现了一种简单的数据库，一次访问多个进程。

这就是说，使用内存映射文件进行持久化是一种非常脆弱的方法，因为它只有在这些参数完全相同的情况下才有效：

*   机器架构
*   操作系统版本
*   编译器版本
*   编译参数（例如，可能会影响填充）
*   使用的所有相关库的版本（包括 Boost），因为 ABI 可能会因版本而异
*   我忘记了其他一些方面:-)

考虑到一切，使用@alfC 建议的Boost.Serialization 可能是跨不同环境的*可移植持久性的最佳解决方案。*如果您担心速度，像这样的混合方法可能会起作用：

*   当在同一台机器上使用相同结构的多个进程（理想情况下，在同一个可执行文件之外）的会话和上下文中，内存映射容器。
*   一旦会话完成（或每隔一段时间以防止崩溃等），使用 Boost.Serialization 可移植地保持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-01T21:20:59.320

如果您想要将`multi_index`一个计算机从一台计算机传输到另一台计算机，最好的办法是使用 Boost.Serialization，它开箱即用：

[http://www.boost.org/doc/libs/1_60_0/libs/multi_index/doc/tutorial/creation.html#serialization](http://www.boost.org/doc/libs/1_60_0/libs/multi_index/doc/tutorial/creation.html#serialization)

```
#include <boost/archive/text_oarchive.hpp>
#include <boost/archive/text_iarchive.hpp>
#include <fstream>
...
void save(const employee_set& es)
{
  std::ofstream ofs("data");
  boost::archive::text_oarchive oa(ofs);
  oa<<es;
}

void load(employee_set& es)
{
  std::ifstream ifs("data");
  boost::archive::text_iarchive ia(ifs);
  ia>>es;
}
...
employee_set es; // a multi_index type
... // fill it with data
save(es);
...
employee_set restored_es;
load(restored_es); 
```

# python - Django manage.py 在项目文件夹外创建

> ID：14163239
> 
> 赞同：1
> 
> 时间：2013-01-04T19:03:17.320
> 
> 标签：python, django

我使用这个命令开始了一个 django 项目

```
django-admin.py startproject mysite 
```

然后我在当前文件夹（madhu131313）中获得了文件夹 mysite。在 madhu131313 文件夹中，我得到了 mysite ，在 mysite 中又得到了另一个 mysite 文件夹。在顶部*mysite*文件夹中，我有 manage.py 文件夹，在内部*mysite*文件夹中，我有**init** .py ，settings.py ，urls.py ，wsgi.py 。但是根据我正在关注的讲师（在我关注的两本书中) 他得到了 mysite 目录，因为他有**init** .py ,manage.py,settings.py ,urls.py 。

谁能说出为什么会这样。我使用的是 python 2.7

抱歉，如果我在任何地方出错，我是该网站的新手，也是 django 的初学者

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T19:17:04.917

您所描述的是 django 1.4 的正常行为：外部 mysite 是项目名称，内部是您的“主”包。

也许您正在遵循旧的说明，即旧的 django 版本？

# mysql - 使用联接表获取总和

> ID：14163240
> 
> 赞同：0
> 
> 时间：2013-01-04T19:03:20.450
> 
> 标签：mysql, select, join, group-by

如何`SUM`使用查询`JOIN`表进行查询，我有两个表，我的表是`laporan`和`laporan_pengeluaran`。

**桌拉波兰**

```
id  name    shell
9   loli    12000
10  ardi    24000
11  dian    5500 
```

**表 laporan_pengeluaran**

```
id  laporan_id  harga
1   9           15000
2   9           29000
3   10          7500
4   10          5000
5   11          3000
6   11          3000 
```

我的问题，如何通过连接表获得 SUM，在表 laporan 中按 id/name 分组，所以我想得到如下结果：

```
id  name    shell   harga
9   loli    12000   44000
10  ardi    24000   12500
11  dian    5500    6000 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T19:05:52.130

您可以连接这两个表，然后`sum(harga)`得到结果。如果你知道你的表中总会有`laporan`值，`laporan_pengeluaran`那么你可以使用`INNER JOIN`：

```
select l.id,
  l.name,
  l.shell,
  sum(lp.harga) harga
from laporan l
inner join laporan_pengeluaran lp
  on l.id = lp.laporan_id
group by l.id, l.name, l.shell 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/2a64a/2)

如果表中可能缺少`laporan`值，请`laporan_pengeluaran`使用`LEFT JOIN`：

```
select l.id,
  l.name,
  l.shell,
  sum(lp.harga) harga
from laporan l
left join laporan_pengeluaran lp
  on l.id = lp.laporan_id
group by l.id, l.name, l.shell 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/2a64a/3)

结果是：

```
| ID | NAME | SHELL | HARGA |
-----------------------------
|  9 | loli | 12000 | 44000 |
| 10 | ardi | 24000 | 12500 |
| 11 | dian |  5500 |  6000 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:06:44.373

```
SELECT
  laporan.id AS id,
  laporan.name AS name,
  laporan.shell AS shell,
  IFNULL(SUM(laporan_pengeluaran.harga),0) AS harga
FROM laporan
LEFT JOIN laporan_pengeluaran ON laporan.id=laporan_pengeluaran.laporan_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T07:05:17.893

尝试这个：

```
SELECT l.id, l.name, l.shell, SUM(lp.harga) harga 
FROM laporan l 
LEFT JOIN laporan_pengeluaran lp ON l.id = lp.laporan_id 
GROUP BY l.id; 
```

检查这个[**SQL FIDDLE 演示**](http://sqlfiddle.com/#!2/2a64a/6)

**输出：**

```
| ID | NAME | SHELL | HARGA |
-----------------------------
|  9 | loli | 12000 | 44000 |
| 10 | ardi | 24000 | 12500 |
| 11 | dian |  5500 |  6000 | 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T19:08:00.890

试试这个查询

```
SELECT
    l.id,
    l.name,
    IFNULL(lp.TCount,0) as Total
FROM laporan as l   
LEFT JOIN (
            SELECT 
                laporan_id,
                SUM(harga) as TCount
            FROM    laporan_pengeluaran
            GROUP BY laporan_id
            ) as lp ON lp.laporan_id = l.id 
```

# sql-server-2008-express - SQL Server 2008 Express 和 Windows 身份验证

> ID：14163241
> 
> 赞同：0
> 
> 时间：2013-01-04T19:03:28.020
> 
> 标签：sql-server-2008-express

我有一个 SQL Server 2008 Express 实例正在运行，我可以`sqlexpress`使用 sqlcmd 使用默认帐户访问服务器。

现在，我在运行 SQL Server 的机器上创建了一个新的 Windows 帐户，并创建了一个`sqlexpress`使用 Windows 身份验证的登录名。此帐户将专门用于备份。

当我尝试使用以下登录并运行备份脚本时（此备份脚本适用于默认帐户`sqlexpress`）

```
sqlcmd -S (local)\mywinusr -i TestBkup.sql 
```

我得到错误

> *HResult 0xFFFFFFFF，级别 16，状态 1
> SQL Server 网络接口：错误定位服务器/实例指定 [xFFFFFFFF]。
> Sqlcmd：错误：Microsoft SQL Server Native Client 10.0：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。检查实例名称是否正确以及 SQL Server 是否配置为允许远程连接。有关详细信息，请参阅 SQL Server 联机丛书。
> Sqlcmd：错误：Microsoft SQL Server Native Client 10.0：登录超时已过期。用户登录失败。*

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:08:17.797

sqlcmd -S 指定服务器，您已指定 (local)\mywinusr。这表明您将用户名作为实例传递。您的 sqlexpress 的服务器名称应为：

```
(local)\sqlexpress 
```

如果您以这个新用户身份登录，那么您只需指定 -E 为“受信任的连接”

如果您需要连接，请使用

```
-U domain\username and -P password 
```

希望这可以帮助

# c# - 在 Windows Phone 隔离存储中序列化原始对象

> ID：14163242
> 
> 赞同：1
> 
> 时间：2013-01-04T19:03:30.547
> 
> 标签：c#, windows-phone-7

我已经阅读了如何将数据保存到隔离存储中的教程，但它们展示了如何将文本或 XML 数据放在那里。我只想将原始对象保存在存储中（确切地说`List<Tuning> list`）然后读取它。`Tuning`只是一个类。

怎么做？我正在使用 C#。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T20:29:21.917

It isn't possible to persist an *object* in isolated storage. How would your program know how to put / get data in an organized way?.

You need to serialize your objects into a format that you can write to and read from storage.

You said you have read tutorials, but [here](http://www.codeproject.com/Articles/156254/Simple-Data-Serialization-on-WP7 "Serializing Object") is another one that may help serializing your class.

# android - 如何使用 Google Maps Android API v2 禁用 3d 建筑物

> ID：14163243
> 
> 赞同：11
> 
> 时间：2013-01-04T19:03:30.157
> 
> 标签：android, google-maps

我最近开始使用 Maps Android Api (V2) 并与自定义图块叠加层集成。我成功地添加了叠加图像，但是当叠加在 3d 建筑物上时它们看起来很傻。我希望能够在全局范围内或针对特定建筑物关闭 3d 建筑物，以便我的平铺图像不会干扰 3d 图像。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-06-12T14:56:47.607

似乎他们再次改变了他们的行为以禁用显示 3D 建筑：

```
GoogleMap.setBuildingsEnabled(false); 
```

[谷歌地图安卓参考](http://developer.android.com/reference/com/google/android/gms/maps/GoogleMap.html#setBuildingsEnabled%28boolean%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T23:07:50.753

看起来谷歌纠正了这个问题。当我在它们上面绘制叠加层时，3d 建筑物不再出现。

# mpi - 提升 mpi 断言失败

> ID：14163247
> 
> 赞同：1
> 
> 时间：2013-01-04T19:03:53.370
> 
> 标签：mpi, boost-mpi

我正在使用 boost-mpi，但我遇到了一个我很难弄清楚的错误。我正在使用 recv 调用，并且 boost 代码中的断言失败：

```
void boost::mpi::binary_buffer_iprimitive::load_impl(void *, int): Assertion `position+l<=static_cast<int>(buffer_.size())’ 
```

这来自位于 boost/mpi/detail/ 中的文件 binary_buffer_iprimitive.hpp。

这在我第一次收到时不会发生，所以我知道这不是我每次发送/接收调用的一般错误。我认为这个断言是检查缓冲区是否足够大以容纳正在接收的数据，但我什至不确定。如果是这种情况，什么会导致缓冲区不够大？难道不应该通过潜在的提升来解决这个问题吗？

```
for (unsigned int i=0;i<world.size();i++)
    {
        if (particles_to_be_sent[i].size()>0)
        {
            ghosts_to_be_sent[i].part_crossed_send()='b';
            world.isend(i,20,particles_to_be_sent[i]);
        }
    }

    mpi::all_to_all(world,ghosts_to_be_sent,ghosts_received);

    //receive particles
    for (int recv_rank=0;recv_rank<world.size();recv_rank++)
    {
        if (ghosts_received[recv_rank].part_crossed_send()=='b')
        {
            world.recv(recv_rank,20,particles_received); //this line fails
            for (unsigned int i=0;i<particles_received.size();i++)
            {
                //do stuff
            }
        }

        for (unsigned int j=0;j<ghosts_received[recv_rank].ghosts_to_send().size();j++)
        {
            //do stuff
        }
    } 
```

# android - Android - 在手机上支持仅平板电脑的应用程序

> ID：14163252
> 
> 赞同：2
> 
> 时间：2013-01-04T19:04:21.437
> 
> 标签：android, android-fragments, android-activity, android-fragmentactivity

我有一个目前仅在平板电脑（Honeycomb+）上受支持的应用程序。应用程序中的典型屏幕在 Activity 中有 2 个片段，就像新闻阅读器应用程序一样。Fragment A 的点击会在 Fragment B 中显示相应的内容。现在的问题是，我如何在手机上支持这个应用程序（Froyo+）？这与支持来自活动的片段正好相反。任何形式的帮助/建议都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:37:10.070

你必须做这样的事情： ![在此处输入图像描述](../Images/c31afd7da0c9e23e3d1efa4587416f9a.png)

*   创建一个布局，一个用于手机，一个用于平板电脑。

**布局/main.xml：**

```
<LinearLayout
android:id="@+id/handset"
[...]
>
</LinearLayout> 
```

**布局大/sw400dp：**

```
<LinearLayout 
  [...]
  >

    <fragment android:name="com.bla.bla.FirstFragment"
              android:id="@+id/first_fragment"
              [...]
              />

     <fragment android:name="com.bla.bla.SecondFragment"
              android:id="@+id/second_fragment"
              [...]
              />

</LinearLayout> 
```

*   现在在您的 FragmentActivity 中检查这一点：

* * *

```
if (findViewById(R.id.handset) != null) {
    // it's a handset device and you can add a Fragment to this View
    }

 FirstFragment firstFragment = new FirstFragment();
 getSupportFragmentManager().beginTransaction().add(R.id.handset, firstFragment).commit(); 
```

*   如果`R.id.handset`返回 null 那么它是一个平板电脑，在这种情况下，静态添加的 Fragments 将由它们的 Fragments 类处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:18:16.077

在手机上，平板电脑上每次更新片段的点击都会启动一个包含该片段的新活动。

这或多或少是唯一要做的事情： * 在一个活动中封装较少的片段，通常是一个片段 * 将这些新活动链接在一起。

您的活动将只是一种新的粘合剂，您将重用片段。

此外，请注意平板电脑应用程序中片段之间的通信，您必须在活动中移动其中的一部分。

# function - 使用 FORTRAN 阅读和打印

> ID：14163253
> 
> 赞同：0
> 
> 时间：2013-01-04T19:04:26.170
> 
> 标签：function, fortran, gfortran, fortran95

我需要编写一个可以读取和打印 .dat 文件的 Fortran 程序。

（文件 homework_6.dat 包含书籍记录：名称（最多 25 个字符）、出版年份（4 位整数）、价格（6 位实数）、ISBN（13 位整数）。编写程序读取文件（homework_6\. dat）并按以下格式打印（在屏幕上或到另一个文件中）详细信息：

```
 Publish   
          Name                        Year    ($)        ISBN
       -------------------------      ----   ------     -------------
       Principles of Combustion       2005    107.61     9780471046899
       An Introduction to Comb        2011    193.99     9780073380193 
       Guide to Fortran               2009     71.95     9781848825420
       Modern Fortran Explain         2011    100.00     9780199601417
       Introduction to Program        2012    200.00     9780857292322) 
```

这是我写的

```
program dat
implicit none
character (len=25) :: Name
integer :: i, publish_year, ISBN
real :: price 
open(unit=7, file="homework_6.dat", status="old", action="readwrite")
do i=1, 10
read (unit=7,fmt="(a25,i4,f3.2,i13)") Name, publish_year, price, ISBN
write (unit=7,fmt="(a25,i4,f3.2,i13)") Name, publish_year, price, ISBN
end do
close(unit=7)
end program dat 
```

但是 Fortran 说第 8 行有错误

我不知道该怎么办 ：（

索尼娅（国际电联）

**- 编辑 -**

所以我尝试编写一个程序，但执行后我仍然有错误

```
program dat
    implicit none
    character (len=25) :: Name
    character (len=13) :: ISBN
    integer :: i, publish_year
    real :: price 
    open(unit=10, file="homework_6.dat", status="old", action="readwrite")
    open(unit=11, file="output_hw6.dat")
    !Comment: these below 3 lines are for skipping 3 heading your input
    read(10,*)
    read(10,*)
    read(10,*)
    do i=1, 10
    read (10,*) Name, publish_year, price, ISBN
    write (11,1) Name, publish_year, price, ISBN
    1 format(a25,2x,i4,2x,f3.2,2x,a13)
    end do
    close(unit=10)
    end program dat 
```

我在第 14 行有一个错误。错误 52，字段 DAT 中的无效字符 - 在第 14 行的文件 homework.f95 中 [+01b3]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:52:02.100

您正在使用列表定向格式阅读，但这不起作用。书名中有空格，编译器不会找到它的结束位置以及年份的开始位置。

您必须使用格式。提示：在读取语句中使用格式字符串，而不是带有标签的格式语句。格式将类似于您的输出格式。

另一个提示，您的价格输出格式太短。我推荐f6.2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T21:08:37.253

在第 8 行将 unit=7 替换为 7。但问题是您正在从 homework_6.dat 读取并写入同一个文件。您可以在屏幕上打开新文件或输出。我已修改您的代码以从您显示的数据文件中读取，假设它在数据之前有 3 行标题。

```
 program dat
    implicit none
    character (len=25) :: Name
    integer :: i, publish_year, ISBN
    real :: price 
    open(unit=7, file="homework_6.dat", status="old", action="readwrite")
    open(unit=8, file="output_hw6.dat")
    !Comment: these below 3 lines are for skipping 3 heading your input                 
    read(7,*)
    read(7,*)
    read(7,*)
    do i=1, 10
    read (7,*) Name, publish_year, price, ISBN
    write (8,1) Name, publish_year, price, ISBN
    1 format(a25,2x,i4,2x,f3.2,2x,i13)
    end do
    close(unit=7)
    end program dat 
```

您的硬件问题可以通过咨询任何初学者的 Fortran 书籍来轻松解决。

# javascript - Javascript中奇怪的下拉菜单问题

> ID：14163259
> 
> 赞同：3
> 
> 时间：2013-01-04T19:04:34.563
> 
> 标签：javascript, jquery, html-table

我对`dropdown`菜单有一个奇怪的问题。

我有

```
company.prototype.buildTable=function(){
  var thisObj=this;

  tableTD = createElement('td');
  tableTD.onclick=function(){thisObj.edit(this);}
  this.table.appendChild(tableTD);  //append td to the table

  // more td

}

company.prototype.edit = function(thisRow) {
  $thisRow=$(thisRow);
  var menu=document.createElement('select');
      menu.className='menu';

   //employees is an array containing employee info

   for(var i=0; i<employees.length; i++){

           var option=document.createElement('option');
               option.className='option';
               option.innerHTML=employees[i].name;
               option.value=employees[i].email;

            menu.appendChild(option);
         }

   $thisRow.append(selectMenu);
} 
```

我可以在我的 td 中看到一个`dropdown`菜单。但是，当我单击菜单时，我必须按住鼠标以保持选项打开，否则选项菜单将关闭。即使我按住鼠标并选择一个选项，`dropdown`菜单值也不会改变（它仍然显示选择菜单中的第一个选项）。我希望我能很好地解释我的问题。

谁能帮我解决这个奇怪的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:57:42.383

IIRC，将选项附加为 DOM 元素存在一些奇怪的跨浏览器问题。添加选项的首选方法很简单：

```
menu.options[i] = new Option(employees[i].name, employees[i].email); 
```

**编辑**：

[不要在 select 上使用 appendChild](https://stackoverflow.com/questions/3611615/are-add-and-appendchild-the-same-for-select-dom-objects)，也[不要在 select 元素上使用 innerHTML](https://stackoverflow.com/questions/2738254/javascript-innerhtml-not-working-with-html-select-menus)。TL;DR：`HTMLSelectElement`很特别，在 IE 中有怪癖

# java - JSF - 为什么 SessionScoped 类的实例未初始化？

> ID：14163260
> 
> 赞同：0
> 
> 时间：2013-01-04T19:04:42.750
> 
> 标签：java, jsf, jboss, managed-bean

我不想在 selectOneMenue 中显示我的枚举类 [license] 的值。

```
<h:selectOneMenu id="licenseclassmenue" >
            <f:selectItem itemLabel="select license"/>
                <f:selectItems value="#{licenseCodes.licenseCodes}"/>
            </h:selectOneMenu><br /> 
```

我的 licenseCode 类：

```
/**
 * convert enum to array of strings
 * 
 * */
@ManagedBean(name = "licenseCodes" )
@SessionScoped
public class LicenseCodes {

public SelectItem[] getLicenseCodes() {
    SelectItem[] licenses = new SelectItem[License.values().length];
    int i = 0;
    for (License l : License.values()) {
        licenses[i++] = new SelectItem(l, l.name());
    }
    return licenses;
}

} 
```

枚举

```
public enum License {
A("A"),B("B"),C("C");

    private String value;

    private License(String v) {
        this.value = v;
    };

} 
```

当我部署项目时，selectOneMenue 中不会有任何许可证。在调试过程中，我注意到永远不会调用 getLicenseCodes()。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:43:04.030

这是你的课：

```
package so.question14163260;

import javax.annotation.PostConstruct;
import javax.faces.bean.ManagedBean;
import javax.faces.model.SelectItem;

@ManagedBean(name = "licenseCodes")
@SessionScoped
public class LicenseCodes {

    private SelectItem[] licenses;

    public LicenseCodes() {
        System.out.println("================Inside===============");
    }

    @PostConstruct
    public void init() {
        SelectItem[] licenses = new SelectItem[License.values().length];
        int i = 0;
        for (License l : License.values()) {
            licenses[i++] = new SelectItem(l, l.name());
        }

        setLicenses(licenses);
    }

    public SelectItem[] getLicenses() {
        return licenses;
    }

    public void setLicenses(SelectItem[] licenses) {
        this.licenses = licenses;
    }
} 
```

这是xhtml：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">

    <h:head></h:head>
    <h:body>
        <h:selectOneMenu id="licenseclassmenue" >
            <f:selectItem itemLabel="select license"/>
                <f:selectItems value="#{licenseCodes.licenses}"/>
            </h:selectOneMenu>
    </h:body>
</html> 
```

这是屏幕截图

![在此处输入图像描述](../Images/bb4af4868493a9fca33bf819c7cd7a6b.png)

如您所见，它正在工作。

## 更新

我忘记`@SessionScoped`在测试时添加注释。现在添加后它也起作用了。

# objective-c - Xcode 项目比较工具

> ID：14163261
> 
> 赞同：2
> 
> 时间：2013-01-04T19:04:44.777
> 
> 标签：objective-c, ios, xcode, svn, project-management

我在跟踪其他开发人员所做的更改时遇到了问题。

注意：由于某些原因不使用 SVN。

[那么，除了使用kDiff](http://kdiff3.sourceforge.net/%22kDiff%22)进行单个文件比较之外，还有什么更好的方法。这对于大量文件来说太烦人了。

比如寻找整个项目的比较，在 Xcode 中创建的项目。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T19:46:56.133

您可以使用作为 Xcode 包的一部分提供的 FileMerge *。*这将采用两个目录并比较植根于该点的树的内容，仅显示一棵树中的文件，两棵树中不同的文件等。对于不同的文件，您将获得标准的视觉差异。这应该可以快速轻松地为您提供所需的东西，我们实际上将它与 svn 结合使用来比较分支、检查合并等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:16:00.097

您可以使用*任何其他*SCM，这是一种跟踪更改的**自然方式**（“源代码管理...”）

如果您仍然想让自己的生活更艰难，您可以使用*任何*特定于操作系统的工具，它可以比较目录，而不仅仅是单独的文件

# python - Python Regex 上完全匹配的数字或数字限制

> ID：14163262
> 
> 赞同：3
> 
> 时间：2013-01-04T19:04:47.423
> 
> 标签：python, regex

我正在使用 Python 2.7.3 我有以下功能：

```
def is2To4Numbers(q):
    if re.match('[0-9]{2,4}',q):return True
    else: return False 
```

我试图将位数限制为 2 到 4。但我得到了这些结果。

```
>>> is2To4Numbers('1235')
True

>>> is2To4Numbers('1')
False

>>> is2To4Numbers('12345')
True

>>> is2To4Numbers('1234567890')
True 
```

我似乎无法获得正确的限制。我应该如何解决这个问题？除了使用 {m,n} 还有其他方法吗？还是我什至正确使用 {m,n} ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-04T19:06:08.240

您的正则表达式只查找存在于您的较大数字中的 2 到 4 位数字。添加这个：

```
'^[0-9]{2,4}$' 
```

仅使用内置数字测试并添加大于和小于检查可能会容易得多，如下所示：

```
def is2To4Numbers(q):
    try:
        return 10 <= int(q) <= 9999
    except:
        return False 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-04T19:19:49.653

如果您想在较大的字符串中精确搜索 2 到 4 位数字，因此不能使用`^`and`$`作为模式的一部分，那么您可以使用[负后瞻](http://docs.python.org/2/library/re.html#regular-expression-syntax)( `?<!`) 和负前瞻 ( `?!`)：

```
import re

def is2To4Numbers(q):
    return bool(re.search(r'''(?x)    # verbose mode
                              (?<!\d) # not preceded by a digit 
                              \d{2,4} # 2-to-4 digits
                              (?!\d)  # not followed by a digit
                              ''',q))

tests = ['1', '12', '123', '1234', '12345', 'foo12', '123bar']
for test in tests:
    print('{t:6} => {r}'.format(t = test, r = is2To4Numbers(test))) 
```

产量

```
1      => False
12     => True
123    => True
1234   => True
12345  => False
foo12  => True
123bar => True 
```

# arduino - 有关修复此“eclipse cdt -l 错误”的任何想法

> ID：14163266
> 
> 赞同：1
> 
> 时间：2013-01-04T19:04:53.973
> 
> 标签：arduino, eclipse-cdt, avr

我正在尝试将我的 AVR 跨目标应用程序链接到我的 AVR 跨目标库。该库名为 Lib328P，应用程序名为 LibTest。我已经构建了库并验证了 .a 存在于文件系统中。

我正在尝试通过右键单击项目>单击 C/C++ Build> Settings > AVR C++ Linker> Libraries 来链接库

这是控制台的输出。

```
**** Build of configuration Debug for project LibTest ****
 make all 
 Building target: LibTest.elf
 Invoking: AVR C++ Linker
 avr-g++ -Wl,-Map,LibTest.map,--cref -L"C:\Users\kempsa\indigo_workspace\Lib328P" -mmcu=atmega328p -o "LibTest.elf"  ./something.o   -lLib328P
 c:/arduino-0023/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/bin/ld.exe: cannot find -lLib328P
 make: *** [LibTest.elf] Error 1

 **** Build Finished **** 
```

我查看了其他帖子，他们建议删除 lib 和 .a 后缀。我已经在这样做了。任何帮助，将不胜感激。

谢谢！山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T08:08:00.880

在您的情况下，链接器期望找到该文件：

C:\Users\kempsa\indigo_workspace\Lib328P\libLib328P.a

你确定它出现在那个位置吗？还是在子文件夹中，可能是 Release 或 Debug？

* * *

这是对我有用的过程：

添加要与您的程序链接的库时，您需要输入**两个**条目。通过导航到以下位置可以在项目属性页面上找到这些条目：

C/C++ 构建 > 设置

在右侧窗格中，请务必在顶部下拉框中选择您正在构建的任何配置。（有时我会更改错误的配置，并想知道为什么这些更改似乎没有发生。）

在“工具设置”选项卡上是一个导航树。在该树上，选择

AVR C++ 链接器 > 库

右侧窗格中有两个列表框：库和库路径。这些是您添加两个条目的位置。

1.. 在顶部框中，单击加号或 + 图标。在这里您只需输入库基本名称。这是没有“lib”和没有“.a”的库名称

例如，我有一个“LibCore328v101”。
这将导致链接器查找文件“libLibCore328v101.a”

2.. 在底部框中，单击加号或 + 图标。在此处添加查找该库文件的路径。

2a. 您只需键入包含 .a 文件的文件夹的路径即可。

2b。您可以单击 Workspace... 按钮并导航到包含您的库的文件夹。如果您将库和程序保存在同一个工作区中，这是指定路径的更好方法。我用这个，在我的例子中这个文本是创建的

“${workspace_loc:/LibCore328v101/Release}”

这本质上是库的相对路径。这意味着您可以创建工作区的完整副本，并且包含的​​所有库仍然是正确的。

当您在控制台窗口中看到链接器输出时，您应该会看到这两个选项。在我的示例中，这些是：

-lLibCore328v101 (小写 ell) -L"F:\arduino-src\tt-wb-trunk-hg\LibCore328\Release" (大写 ell)

可以看到Eclipse插件已经将相对路径转换为当前绝对路径。链接器将在内部将“lib”和“.a”添加到库名称中。

您可以根据需要重复此过程添加任意数量的库和路径。

对于您的多目标程序，您为每个构建目标创建不同的配置。因此，您可以使用“DebugNano”“DebugTiny”等代替 Debug 和 Release。对于每个配置，更改库的路径。

# php - 使用 Facebook Connect 使用 HTTP 请求闯入应用程序

> ID：14163273
> 
> 赞同：0
> 
> 时间：2013-01-04T19:05:30.743
> 
> 标签：php, security, facebook-apps

我有一个基于 PHP 的投票应用程序，它需要 Facebook 登录（使用 PHP SDK）。您需要连接您的 Facebook 帐户才能投票。我们决定使用 Facebook 登录来防止投票欺诈。

使用 Facebook 帐户登录后，会发生以下情况：

*   登录页面包含隐藏变量——userId、accessToken、姓名、电子邮件、性别、位置、家乡和指向用户个人资料的链接——所有这些都是从 Facebook 登录返回的。
*   用户在投票中选择一个选项，然后应用程序会记录他的选择以及他的身份详细信息（在第一点中列出）。

现在，问题就在这里。我可以用虚假的身份信息模拟 HTTP 请求，但应用程序仍然认为这是一个合法请求，因此记录了投票。因此，有人可以设置一个脚本来生成随机识别详细信息，通过 HTTP 请求发送它们，最终导致大量欺诈选票。

也许，在投票结束后，我们可以使用配置文件 URL 进行测试，以查看配置文件是否存在，但这里有两个问题：

*   入侵者可以使用有效用户配置文件 URL 列表来创建欺诈投票。如果他这样做了，我们不知道投票是否是欺诈。
*   防止欺诈投票不是比以后整理更好的主意吗？

那么，有没有办法只允许通过应用程序进行合法登录？类似于记录投票前的测试。

我想，验证码可以提供帮助，但这会干扰我们希望用户拥有的快速投票体验。

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T19:11:06.587

把这些东西放在表格中，什么都不做不是做到这一点的方法。

这应该如何工作：

1.  用户通过 FB 进行身份验证。
2.  用于`$uid = $facebook->getUser();`获取刚刚登录的用户的userid，如果为0，则登录失败。
3.  将 uid 存储在用户的会话中。
4.  让他们投票。
5.  当投票进入时，将 uid 拉出会话。确保它不为零，确保他们之前没有投票（如果这是一个限制）并添加他们的投票。

**编辑**
由于我不完全了解 FB API 可用的各种方法，因此我将在此问题上遵从@Igy（请参阅他关于检索访问令牌以验证帐户的评论）。不过，我不知道用户必须具备什么能力才能伪造 API 返回的帐户 ID。

# android - ListView中的Android空指针异常

> ID：14163276
> 
> 赞同：0
> 
> 时间：2013-01-04T19:05:39.760
> 
> 标签：android, listview, nullpointerexception, android-arrayadapter

我有一个简单的 ListView 和一个 ArrayAdapter。但是当android去绘制屏幕时，我每次都会得到一个空指针异常。这是堆栈：

```
Thread [<1> main] (Suspended (exception NullPointerException))  
    <VM does not provide monitor information>   
    ArrayAdapter.createViewFromResource(int, View, ViewGroup, int) line: 392    
    ArrayAdapter.getView(int, View, ViewGroup) line: 362    
    ListView(AbsListView).obtainView(int, boolean[]) line: 2210 
    ListView.measureHeightOfChildren(int, int, int, int, int) line: 1244    
    ListView.onMeasure(int, int) line: 1155 
    ListView(View).measure(int, int) line: 12775    
    LinearLayout(ViewGroup).measureChildWithMargins(View, int, int, int, int) line: 4709    
    LinearLayout.measureChildBeforeLayout(View, int, int, int, int, int) line: 1385 
    LinearLayout.measureVertical(int, int) line: 670    
    LinearLayout.onMeasure(int, int) line: 563  
    LinearLayout(View).measure(int, int) line: 12775    
    FrameLayout(ViewGroup).measureChildWithMargins(View, int, int, int, int) line: 4709 
    FrameLayout.onMeasure(int, int) line: 293   
    FrameLayout(View).measure(int, int) line: 12775 
    LinearLayout(ViewGroup).measureChildWithMargins(View, int, int, int, int) line: 4709    
    LinearLayout.measureChildBeforeLayout(View, int, int, int, int, int) line: 1385 
    LinearLayout.measureVertical(int, int) line: 670    
    LinearLayout.onMeasure(int, int) line: 563  
    LinearLayout(View).measure(int, int) line: 12775    
    PhoneWindow$DecorView(ViewGroup).measureChildWithMargins(View, int, int, int, int) line: 4709   
    PhoneWindow$DecorView(FrameLayout).onMeasure(int, int) line: 293    
    PhoneWindow$DecorView.onMeasure(int, int) line: 2240    
    PhoneWindow$DecorView(View).measure(int, int) line: 12775   
    ViewRootImpl.performTraversals() line: 1117 
    ViewRootImpl.handleMessage(Message) line: 2505  
    ViewRootImpl(Handler).dispatchMessage(Message) line: 99 
    Looper.loop() line: 137 
    ActivityThread.main(String[]) line: 4514    
    Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
    Method.invoke(Object, Object...) line: 511  
    ZygoteInit$MethodAndArgsCaller.run() line: 790  
    ZygoteInit.main(String[]) line: 557 
    NativeStart.main(String[]) line: not available [native method] 
```

代码也很简单。XML：

```
<LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#0099cc"
    tools:context=".FullscreenActivity"
    android:orientation="vertical">

    <ListView
        android:id="@+id/status_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

和代码：

```
 String test[] = {"Line 1","Line 2"};

    ListView status = (ListView) findViewById(R.id.status_view);
    ArrayAdapter<String> statusList = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,R.id.status_view,test);     
    status.setAdapter(statusList); 
```

我见过很多做同样事情的例子，大多数人在有一个包含一些空指针的字符串数组时都会遇到这个错误。如您所见，这里不是这种情况。以前有人和这个打过架吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:20:34.300

以下是`ArrayAdapter`您正在使用的官方 java 文档：

> 公共 ArrayAdapter（上下文上下文、int 资源、int textViewResourceId、T[] 对象）
> 
> 在 API 级别 1 构造函数中添加
> 
> **上下文** 当前上下文。
> 
> **resource**包含在实例化视图时使用的布局的布局文件的资源 ID。
> 
> **textViewResourceId** 要填充的布局资源中 TextView 的 id
> 
> **objects** 要在 ListView 中表示的对象。

所以第二个参数应该是布局文件，其中包含列表中的行项目的视图，而不是列表。布局应该是列表中的一行...

第三个值应该是作为第二个参数给出的布局中文本视图的 id，其中列表视图可以插入存储在字符串数组中的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:34:17.787

you should not use "this" just like the way you are using, instead use ActivityName.this .. means you should write activity name before "this"

if your activity is

```
ActivityName extends Activity { 
```

}

then

```
String test[] = {"Line 1","Line 2"};

ListView status = (ListView) findViewById(R.id.status_view);
ArrayAdapter<String> statusList = new ArrayAdapter<String>(ActivityName.this,android.R.layout.simple_list_item_1,test);     
status.setAdapter(statusList); 
```

# c# - 需要通过一个List 到控制器中的 Http Post

> ID：14163281
> 
> 赞同：2
> 
> 时间：2013-01-04T19:06:02.287
> 
> 标签：c#, asp.net-mvc-3

我正在将一个列表传递给视图。在视图中，我需要传回该列表。它包括一个可编辑的复选框，这是我真正需要的项目。显示的所有其他字段仅用于只读目的。如果用户想要将项目指定为许可，则他们选中 isClearance 复选框。因此，当他们点击保存按钮时，它会点击 HttpPost Index()。但是，它传回一个空值。如果我将它更改为只是一个模型对象，而不是列表，它就可以正常工作。

这是控制器索引：

```
 public ActionResult Index()
    {
        List<ClearanceViewModel> cc = new List<ClearanceViewModel>();
        ClearanceViewModel c = new ClearanceViewModel();
        c.sku = "123";
        c.title = "Test1";
        c.includeOnSite = true;
        c.productID = 123;
        c.salePrice = Convert.ToDecimal(2.99);
        c.RetailPrice = Convert.ToDecimal(4.99);
        c.isClearance = false;
        cc.Add(c);

        c.sku = "123";
        c.title = "Test1";
        c.includeOnSite = true;
        c.productID = 123;
        c.salePrice = Convert.ToDecimal(2.99);
        c.RetailPrice = Convert.ToDecimal(4.99);
        c.isClearance = false;
        cc.Add(c);

        return View(cc);
    } 
```

这是视图：

```
@model List<PMS.Models.ClearanceViewModel>
@{    
ViewBag.title = "Clearance List";    
}
<fieldset>
<legend><span>Clearance List</span></legend>
@using (Html.BeginForm())
{
if (Model.Count() > 0)
{    
    <table class="list">
        <tr> 
            <th>Sku</th>
            <th>Title</th>
            <th>Include On Site</th>
            <th>Sale price</th>
            <th>Retail Price</th>
            <th>Quantity</th>
            <th>Clearance</th>
        </tr>
        @foreach(var item in Model)
        {
            @Html.HiddenFor(modelItem => item.productID);
            <tr>    
                <td>@Html.DisplayFor(modelItem => item.sku)</td>
                <td>@Html.DisplayFor(modelItem => item.title)</td>
                <td>@Html.DisplayFor(modelItem => item.includeOnSite)</td>
                <td>@Html.DisplayFor(modelItem => item.salePrice)</td>
                <td>@Html.DisplayFor(modelItem => item.RetailPrice)</td>
                <td>@Html.DisplayFor(modelItem => item.quantity)</td>
                <td>@Html.EditorFor(modelItem => item.isClearance)</td>        
            </tr>
        }
    </table>
   <p>
            <input type="submit" value="Save" />
    </p>

}
}
</fieldset> 
```

这是控制器中的 HttpPost（clearanceModel 在到达 foreach 循环时为空，此时它应该有一个项目列表）：

```
 [HttpPost]
    public ActionResult Index(List<ClearanceViewModel> clearanceModel)
    {
        foreach (ClearanceViewModel item in clearanceModel)
        {
            if (item.isClearance == true)
            {
                // get the product object, so we can add it to the product Promotion of                      clearance
                var product = _unitOfWork.ProductRepository.Get(filter: p => p.productID == item.productID).FirstOrDefault();

                // Make sure that it isn't already in the product promotion for clearance
                var productPromotion = _unitOfWork.ProductPromotionRepository.Get(filter: pp => pp.productID == product.productID && pp.promotion.Name == "Clearance").FirstOrDefault();

                //add the product promotion
                if (productPromotion == null)
                {
                    // get the clearance promotion
                    var promotion = _unitOfWork.PromotionRepository.Get(filter: pr => pr.Name == "Clearance").FirstOrDefault();
                    if (promotion != null)
                    {
                        ProductPromotion promo = new ProductPromotion();
                        promo.productID = product.productID;
                        promo.promotionID = promotion.promotionID;
                        promo.onDate = DateTime.Now;
                        promo.offDate = null;
                        promo.canOverwrite = true;
                        _unitOfWork.ProductPromotionRepository.Create(promo);
                        _unitOfWork.SaveChanges();
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T19:19:33.757

模型绑定不适用于 foreach 循环。您必须使用 for 循环。这样，索引器`[i]`用于为生成的 html 中的每个输入元素创建唯一的名称属性。

```
@for (int i = 0; i < Model.Count; i++)
        {
            @Html.HiddenFor(modelItem => modelItem[i].productID);
            <tr>    
                <td>@Html.DisplayFor(modelItem => modelItem[i].sku)</td>
                <td>@Html.DisplayFor(modelItem => modelItem[i].title)</td>
                <td>@Html.DisplayFor(modelItem => modelItem[i].includeOnSite)</td>
                <td>@Html.DisplayFor(modelItem => modelItem[i].salePrice)</td>
                <td>@Html.DisplayFor(modelItem => modelItem[i].RetailPrice)</td>
                <td>@Html.DisplayFor(modelItem => modelItem[i].quantity)</td>
                <td>@Html.EditorFor(modelItem => modelItem[i].isClearance)</td>        
            </tr>
        } 
```

有关模型绑定集合的一个很好的解释，请查看[这篇文章](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:13:19.573

您需要一个模型绑定器来绑定列表，或者一个显示模板。现在生成的列表项名称是：item.sku、item.title 等。标准模型绑定器无法将其绑定到列表。

# javascript - 如何将我的脚本嵌套在表格中

> ID：14163282
> 
> 赞同：1
> 
> 时间：2013-01-04T19:06:03.810
> 
> 标签：javascript, html, nested, html-table

我希望这是一个非常简单的问题，但是我想不到的每一件事都行不通。问题是我有一个表格元素，其中有一行 TH 和几行从 js 文件中导入。但是，当我打开页面时，实际的表格出现在页面底部，从其他文件导入的所有内容都出现在表格的正上方。

我认为问题出在我的 HTML 中，而不是我的 Javascript 文件中。代码如下。我还附上了一张结果看起来像什么的图片

![](../Images/2a073ae63981caa66f5b51c9dc272155.png)

```
<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Backbone.js Web App</title>
        <link rel="stylesheet" href="css/style.css" />      
    </head>
    <body>
        <div id="wrapper">
            <h1 id="frisbee_league">Frisbee league</h1>
            <article id="league">
                <nav class="actions">
                    <ul>
                        <li id="filter">
                            <label>Show:</label>

                        </li>
                    </ul>
                        <form id="addTournament" action="#" class="form-2">
                            <h1>Add tournament</h1>
                            <label for="name">Name:</label><input id="name" placeholder="Tournament name" type="text" />
                            <label for="schedulingFormat">Format:</label><input id="schedulingFormat"  placeholder="Scheduling format" type="text" />
                            <div class="clearfix"><input type="submit" id="add" value="Add" /></div>
                        </form>
                    </ul>
                </nav>

                            <table id="leagues">
                <tr>
                    <th>Team</th>
                    <th>Format</th>
                    <th>W</th>
                    <th>L</th>
                    <th>Sets won</th>
                    <th>Sets lost</th>
                    <th>Set Difference</th>
                    <th>Points won</th>
                    <th>Points lost</th>
                    <th>Points Difference</th>
                </tr>
                <div class="tournaments"></div>

            </table>

        </article>

     </div>

        <script id="tournamentTemplate" type ="text/template">
                    <td><%= name %></td>
                    <td><%= schedulingFormat %></td>
                    <td><%= Win %></td>
                    <td><%= Lost %></td>
                    <td><%= Sw %></td>
                    <td><%= Sl %></td>
                    <td><%= Sd %></td>
                    <td><%= Pw %></td>
                    <td><%= Pl %></td>
                    <td><%= Pd %></td>
                    <td><a href="#" class="delete">Delete</a></td>
        </script>

        <!-- Libraries -->
        <script src="js/libs/jquery-1.7.1.min.js"></script>
        <script src="js/libs/json2.js"></script>
        <script src="js/libs/underscore-min.js"></script>
        <script src="js/libs/backbone-min.js"></script>

        <!-- Application -->
        <script src="js/app/app.js"></script>
        <script src="js/app/models/tournamentModel.js"></script>
        <script src="js/app/collections/leagueCollection.js"></script>
        <script src="js/app/views/tournamentView.js"></script>
        <script src="js/app/views/leagueView.js"></script>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:10:37.410

```
 <script id="tournamentsTemplate" type ="text/template">
          <tr>
                <td><%= name %></td>
                <td><%= schedulingFormat %></td>
                <td><%= Win %></td>
                <td><%= Lost %></td>
                <td><%= Sw %></td>
                <td><%= Sl %></td>
                <td><%= Sd %></td>
                <td><%= Pw %></td>
                <td><%= Pl %></td>
                <td><%= Pd %></td>
                <td><a href="#" class="delete">Delete</a></td>
          </tr>
    </script> 
```

# javascript - 淡出元素

> ID：14163289
> 
> 赞同：0
> 
> 时间：2013-01-04T19:06:22.093
> 
> 标签：javascript, jquery, css, fade

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T19:22:49.277

你的代码很好。

[您可以在这里](http://jsfiddle.net/jve7P/)看到它的实际效果。

所以错误在别处。例如，在 jQuery 导入中（*是的，我得到了关于这个的提示；）*），它可能看起来像这样：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:07:43.897

# makefile - 什么会在 Makefile 中成为一个好的可移植清洁目标？

> ID：14163290
> 
> 赞同：0
> 
> 时间：2013-01-04T19:06:23.217
> 
> 标签：makefile, portability

`clean`可移植 Makefile 目标 的适当形式是什么？`$(RM)`对我不起作用。我在 Windows (7) 命令提示符和 Eclipse 中工作。他们都报告了相同版本的make（我的路径上有多个）：

```
make --version 
GNU Make 3.82
Built for i386-pc-mingw32
Copyright (C) 2010  Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law. 
```

在 Eclipse 中：

```
make clean 
rm -f *.o testScaffolding_* runner.cpp runner.exe *.d 
```

从命令：

```
rm -f *.o testScaffolding_* runner.cpp runner.exe *.d
process_begin: CreateProcess(NULL, rm -f *.o testScaffolding_* runner.cpp runner.exe *.d, ...) failed.
make (e=2): The system cannot find the file specified.
make: *** [clean] Error 2 
```

都报告`$(OS)`为`Windows_NT`和`$(RM)`。`rm -f`我也安装了它，如果我在 Makefile 中调用它，两个环境都会报告相同的路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:40:29.313

这是迄今为止我想出的最好的。您可以指定`UNAME`为环境变量或在命令行上。如果未指定，它会尝试运行 uname。如果失败，则假定为 Windows。随后，您对自己的 shell 环境有一个合理的猜测，并可以适当地定义相应的命令。

请注意，这仅进行了有限的测试，我仅认为它是功能性的，而不是优雅或“正确”的。此外，可执行扩展（`.exe`与无）之类的可能通过使用`$(OS)`.

```
ifeq ($(strip $(UNAME)),)
# if not already specified, try running uname
UNAME = $(shell uname)
endif

ifeq ($(strip $(UNAME)),)
# if still not specified, assume Windows
UNAME = Windows
endif

ifeq ($(UNAME),Windows)
define TO_WIN
$(subst /,\,$1)
endef
define MKDIR
-mkdir $(call TO_WIN,$1)
endef
define RM
del $(call TO_WIN,$1)
endef
CAT := type
else
define MKDIR
mkdir -p $1
endef
define RM
rm -f $1
endef
CAT := cat
endif 
```

# java - ArrayList 之间的区别 列表 = 新的 ArrayList (); 和收藏 list1 = 新的 ArrayList ();

> ID：14163291
> 
> 赞同：4
> 
> 时间：2013-01-04T19:06:33.507
> 
> 标签：java

我不明白之间的区别：

1.  `ArrayList<Integer> list = new ArrayList<Integer>();`
2.  `Collection<Integer> list1 = new ArrayList<Integer>();`

类`ArrayList`扩展了实现接口`Collection`的类，所以类`ArrayList`实现了`Collection`接口。也许`list1`允许我们使用`Collection`接口中的静态方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-04T19:08:47.707

接口没有静态方法 [在 Java 7 中]。`list1`只允许访问 中的方法`Collection`，而`list`允许访问 中的所有方法`ArrayList`。

* * *

最好声明一个具有其最不具体的可能类型的变量。因此，例如，如果您更改`ArrayList`为`LinkedList`或`HashSet`出于任何原因，您不必重构大部分代码（例如，客户端类）。

想象一下你有这样的东西（仅用于说明目的，不可编译）：

```
class CustomerProvider {
    public LinkedList<Customer> getAllCustomersInCity(City city) {
        // retrieve and return all customers for that city
    }
} 
```

然后你决定实现它返回一个`HashSet`. 也许有一些客户端类依赖于您返回的事实`LinkedList`，并调用`HashSet`没有的方法（例如`LinkedList.getFirst()`）。

这就是为什么你最好这样做：

```
class CustomerProvider {
    public Collection<Customer> getAllCustomersInCity(City city) {
        // retrieve and return all customers for that city
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T19:13:26.033

我们在这里处理的是**interface**和**implementation**之间的区别。

接口是一组方法，与这些方法的实现方式无关。当我们将一个对象实例化为具有实际上是的类型时，`interface`我们的意思是，它是一个实现了其中所有方法的对象`interface`......但不提供访问其中任何方法的权限`class`实际上提供了这些实现。

当您实例化一个具有实现类型的对象时`class`，您就可以访问该对象的所有相关方法`class`。由于这`class`是实现一个`interface`，您可以访问接口中指定的方法，以及实现类提供的任何附加功能。

你为什么想做这个？好吧，通过将对象的类型限制为`interface`，您可以切换到新的实现，而不必担心更改其余代码。这使它变得更加灵活。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T19:57:50.293

`Collection`正如其他人所说，不同之处在于，当您将其指定为变量类型时，您仅限于接口定义的方法。但这并不能回答您为什么要这样做的问题。

原因是数据类型的选择为使用代码的人提供了信息。特别是当用作函数的参数或返回类型时（外部程序员可能无法访问内部）。

根据具体情况，以下是不同类型选择可能会告诉您的信息：

*   `Collection`- 一组对象，没有进一步的保证。这个对象的消费者可以迭代集合（不保证迭代顺序），并且可以知道它的大小，但不能做任何其他事情。
*   `List`- 一组具有特定顺序的对象。当您遍历这些对象时，您将始终以相同的顺序获取它们。您还可以通过索引从集合中检索特定项目，但您不能对此类检索的性能做出任何假设。
*   `ArrayList`- 一组具有特定顺序的对象，可以通过索引在恒定时间内访问。

尽管您没有询问它们，但这里有一些其他集合类：

*   `Set`保证每个`equals()`方法不包含重复项的一组对象。不保证这些对象的迭代顺序。
*   `SortedSet`一组不包含重复项的对象，并且始终以特定顺序迭代（尽管集合不保证该特定顺序）。
*   `TreeSet`一组没有重复的有序对象，显示`O(logN)`插入和检索时间。
*   `HashSet`一组没有重复的对象，它们没有固有的顺序，但提供（摊销的）恒定时间访问。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T19:09:09.783

唯一的区别是您通过 Collection 接口提供对 list1 的访问，而您通过 ArrayList 接口提供对 list2 的访问。有时，通过受限接口提供访问很有用，因为它促进了封装并减少了对实现细节的依赖。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T19:10:59.823

当您对“list1”执行操作时，您将只能从 Collection 接口访问方法（get、size 等）。通过将“list”声明为 ArrayList，您可以访问仅在 ArrayList 类中定义的其他方法（例如，ensureCapacity 和 trimToSize。

将变量声明为您需要的最不具体的类通常是最佳实践。因此，如果您只需要 Collection 中的方法，请使用它。通常在这种情况下，这意味着使用 List，它可以让您知道它是有序的并且可以处理重复项。

使用最不具体的类/接口允许您在以后自由更改实现。例如，如果您稍后了解到 LinkedList 将是一个更好的实现，如果您将变量定义为 List，您可以在不破坏所有代码的情况下更改它。

# javascript - Css动态设置数组中元素的大小

> ID：14163295
> 
> 赞同：-6
> 
> 时间：2013-01-04T19:06:48.990
> 
> 标签：javascript, jquery, html, css

我有一个元素数组，它们有标签 class='element'。如何在加载时动态设置每个元素的高度？当我尝试设置

```
$('.element').css('height',sizeOfContent+'px'); 
```

它改变了每个 .element 的高度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T23:27:36.227

从字面上理解您的问题，并根据您的有限标记提出一个想法：

[**jsFiddle 演示**](http://jsfiddle.net/cfHhz/)

**HTML**

```
<div id="box1" class="element"></div>
<div id="box2" class="element"></div>
<div id="box3" class="element"></div> 
```

**CSS**

```
.element {
  width: 50px;
  height: 50px;
  float: left;
  margin: 20px;
  border: 3px dashed black;
}

#box1 {
  background-color: red;
}

#box2 {
  background-color: blue;
}

#box3 {
  background-color: green;
} 
```

**JS**

```
$(document).ready(function() {

    // Grab all elements on the page with classname '.element'
    var myElements = $('.element');

    // These are the sizes we need to change dynamically.
    // As seen in jsFiddle CSS panel, the original height for the above classname is 50px;
    var sizeOfContent = [ "100", "200", "300"];

    // Here, we run a .each() iteration and use the zero indexed value to match the corrisponding height as provided in variable sizeOfContent.
    $(myElements).each(function(index) {

        // Activate the console.log to view results in the browers console.
        //console.log( this );

        // jQuery css will automatically use pixle value when not specified
        $(this).css('height', sizeOfContent[index]);

    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:11:24.457

我想这可能是你想要做的？将每个设置`.element`为特定高度？ `sizOfContent`将为每个元素设置这种方式，您没有提供设置 sizOfContent 的代码 - 所以我把它放在评论中

```
$.each('.element' , function(){
   var sizeOfContent = // dynamically set sizOfContent
// maybe something like this..
// var sizOfContent = $(this).parent().height();
// ** you wouldn't need an each loop just set to parents height, but you see how it can be dynamically set    
   $(this).css('height',sizeOfContent+'px');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T19:27:11.707

问题是`$('.element')`使用该类捕获所有元素。这就是它的作用。你需要一个唯一的标识符，例如`$('#element1')`但是因为你没有告诉我们这些元素是如何创建的，是什么`sizeOfContent`或者它是如何派生的，所以不可能在代码中提供解决方案，所以这里是文字。

我只能假设您正在遍历您提到的数组，所以

如果您正在创建对象并附加到页面，请添加`.css('height',sizeOfContent+'px');`到将存在类似内容的 jQuery 链中，`.appendTo('body')`或者给它们一个 ID 并使用`$('#element' + i).css('height',sizeOfContent+'px');`

```
$.each(thearray, function(i,data){ // or perhaps for (i in thearray) {
    var sizeOfContent= some formula;
    div=$('<div class="element">').appendTo('#somewrapper').css('height',sizeOfContent+'px');
}); 
```

信息太少，无法回答。

# jquery - 无法从 XML 变量加载 Google 地图标记

> ID：14163297
> 
> 赞同：0
> 
> 时间：2013-01-04T19:07:09.620
> 
> 标签：jquery, ajax, google-maps, google-maps-api-3

我到处搜索并尝试找到其他问题的原因无济于事。我有一个搜索表单来检索 xml 数据，并且数据返回得很好。

> 响应标头
> 
> Content-Type text/xml;charset=utf-8 Date Fri, 04 Jan 2013 19:00:52 GMT Server Apache Transfer-Encoding chunked Via 1.1 decfpxy1 (NetCache NetApp/6.0.2)
> 
> 回复：

```
<markers><marker id="1" lat="48.153938" lng="17.108459" /></markers> 
```

但是，我的`data`变量没有在加载标记的脚本中插入任何内容，并且出现此错误：

> TypeError: xml 未定义 [中断此错误]
> 
> var 标记 = xml.documentElement.getElementsByTagName("marker");

这是代码：

```
function SendData() {

    var FromDateUnformatted = $('#from').val().split('/');
    var FromDate = FromDateUnformatted[2] + '-' + FromDateUnformatted[0] + '-' + FromDateUnformatted[1] + ' 00:00:00';
    var ToDateUnformatted = $("#to").val().split('/');
    var ToDate = ToDateUnformatted[2] + '-' + ToDateUnformatted[0] + '-' + ToDateUnformatted[1] + ' 23:59:59';
    var MusicStyles = $("#music").val();
    var Locations = $("#locations").val();
    var FromPrice = $("#entrance-price").slider("values", 0);
    var ToPrice = $("#entrance-price").slider("values", 1);
    var IsOutdoors = +$('#IsOutdoors').is(':checked');
    var HasPatio = +$('#HasPatio').is(':checked');

    $.ajax({
        type: "POST",
        url: "MapSearchxml.php",
        data: {
            dataFromDate: FromDate,
            dataToDate: ToDate,
            dataMusicStyles: MusicStyles,
            dataLocations: Locations,
            dataFromPrice: FromPrice,
            dataToPrice: ToPrice,
            dataIsOutdoors: IsOutdoors,
            dataHasPatio: HasPatio
        },
        beforeSend: function (html) { // this happens before actual call
            $("#results").html('Please Wait');
            $("#searchresults").show();
            $(".phpFromDate").html(FromDate);
        },
        success: function (data) {
            //clearOverlays();
            var xml = data.responseXML;
            var markers = xml.documentElement.getElementsByTagName("marker");

            for (var i = 0; i < markers.length; i++) {
                var name = markers[i].getAttribute("id");
                var point = new google.maps.LatLng(
                parseFloat(markers[i].getAttribute("lat")), parseFloat(markers[i].getAttribute("lng")));

                var html = "<b>" + point + "</b>hello <br/>";
                var icon = new google.maps.MarkerImage("redmarker.png");

                var marker = new google.maps.Marker({
                    map: map,
                    position: point,
                    icon: icon.icon,
                    shadow: icon.shadow
                });

                bindInfoWindow(marker, map, infoWindow, html);
            }
        }
    });

    function bindInfoWindow(marker, map, infoWindow, html) {
        google.maps.event.addListener(marker, 'click', function () {
            infoWindow.setContent(html);
            infoWindow.open(map, marker);
        });
    }

} 
```

这是 PHP 文件本身：

```
$result = mysql_query($query);
if (!$result) {
  die('Invalid query: ' . mysql_error());
}

header("Content-type: text/xml");

echo '<markers>';

while ($row = @mysql_fetch_assoc($result)){
  echo '<marker ';
  echo 'id="' . parseToXML($row['ID']) . '" ';
  echo 'lat="' . parseToXML($row['LAT']) . '" ';
  echo 'lng="' . parseToXML($row['LNG']) . '" ';
  echo '/>';
}

echo '</markers>'; 
```

我已经使用此代码的变体来检索静态 xml php 文件而没有任何问题，但是使用此代码，我无法从这篇文章中获取结果并将它们正确插入到我的标记生成器中。

我在这里和谷歌上做了大量的研究，我似乎无法在任何地方找到任何替代品。

你知道可能是什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T20:07:46.263

提供给成功回调的第一个参数不是 (jq)XHR 对象，而是数据（取决于请求，这可能是字符串、解析为对象的 JSON 字符串或**文档**）。

他们都没有财产`responseXML`。

因此，您可以直接使用该文档：

```
var xml = data; 
```

或使用第三个参数：

```
success: function (data,status,jqXHR) {
         var xml = jqXHR.responseXML;
         //....
         } 
```

但无论你做什么，你最好`dataType:'xml'` 为请求指定，以确保成功的结果将是一个 xml-document 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T21:21:40.223

您的“map”变量是 onload 函数的本地变量，它在运行 AJAX 回调例程的全局上下文中不可用，因此在此处使用它时定义不正确：

```
 var marker = new google.maps.Marker({
                map: map,
                position: point,
                icon: icon.icon,
                shadow: icon.shadow
            }); 
```

要使其全局化，请`var map;`在全局上下文中（在任何函数之外）执行 a，然后在您的 onload 函数中对其进行初始化（就像现在一样，只需从它前面删除“var”）。

# html - 禁用 Flash 对象的点击行为

> ID：14163301
> 
> 赞同：-2
> 
> 时间：2013-01-04T19:07:27.273
> 
> 标签：html

```
<!-- Begin of mycountdown.org script -->
<div align="center" style="margin: 15px 0px 0px 0px">
    <noscript>
        <div align="center" style="width: 140px; border: 1px solid #ccc; background: #000000; color: #F9F9FF; font-weight: bold; font-size: 12px;">
            <a style="text-decoration: none; color: #F9F9FF;" href="http://mycountdown.org/My_Countdown/My_Countdown/">My Countdown</a>
        </div>
    </noscript>
    <script type="text/javascript" src="http://mycountdown.org/countdown.php?cp3_Hex=0F0200&cp2_Hex=000000&cp1_Hex=F9F9FF&ham=0&img=&hbg=0&hfg=0&sid=0&fwdt=150&lab=1&ocd=My+Countdown&text1=SONY 50 inch LCD TV&text2=EXPIRES&group=My Countdown&countdown=My Countdown&widget_number=3010&event_time=1357776000&timezone=America/New_York"></script>
</div>
<!-- End of mycountdown.org script --> 
```

这是一个倒计时时钟，但是当您单击它时，它会链接到我不想要的网站。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T19:14:51.040

位于标签`<a>`内。`<noscript>`如果您启用了 JavaScript（大多数人都这样做），则此代码将被忽略。因此，移除锚将不起作用。

实际的点击功能是由`<noscript>`代码下方的 JavaScript 生成的。这是从外部源 (http://mycountdown.org/countdown.php...) 加载的。

如果您直接访问该 URL，您将看到各种标记被注入到页面中。这就是可点击区域的来源。由于它正在加载 Flash 电影，我怀疑你可以改变行为，即点击事件是在电影中处理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T19:22:27.500

点击行为在 Flash 对象中定义。因此，您需要原始动作脚本文件来删除链接并将其重新编译为 SWF 对象。如果您不拥有代码，则不能这样做。（实际上你可以对整个事情进行逆向工程。）

[另一种选择可能是在http://mycountdown.org/](http://mycountdown.org/)的文档中搜索一些参数（如果有的话），它允许传入一个 URL。在那里，您可以使用`#`URL 来不链接另一个页面。或者也许有一个参数可以用来禁用点击行为。

或者您可以尝试[使用 JavaScript 禁用事件](http://api.jquery.com/event.preventDefault/)，但我怀疑这会与 Flash 一起播放。

**一个可行的解决方案**是[在柜台上方放置](http://jsfiddle.net/feeela/KCQ5V/4/)[另一层（即一些`DIV`](http://jsfiddle.net/feeela/KCQ5V/4/)） 。这样做，Flash 动画将无法识别点击。这确实禁用了点击，但从我的角度来看，这是一个肮脏的黑客。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T19:09:53.150

为什么不简单地删除链接？

```
<a style="text-decoration: none; color:#F9F9FF;" href="http://mycountdown.org/My_Countdown/My_Countdown/">My Countdown</a> 
```

或转换它

```
<a style="text-decoration: none; color:#F9F9FF;" href="#">My Countdown</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T19:45:06.943

您不能通过 Flash 对象处理单击事件，您需要代码并删除 Flash 中的链接。

# android - Android 操作栏填充选项卡宽度

> ID：14163302
> 
> 赞同：3
> 
> 时间：2013-01-04T19:07:27.833
> 
> 标签：android, android-actionbar, android-progressbar, android-tabs

我使用自定义视图在每个操作栏选项卡中包含了一个进度条。我希望进度条的宽度与选项卡指示器的宽度相匹配。但是，自定义视图覆盖的区域在选项卡内设置了边距，因此我无法将进度条扩展到整个选项卡宽度。完成这项工作的最佳方法是什么？

下面是它现在的样子......

![选项卡中的进度条](../Images/27afe959ff0ac15986cce38ca0f64a91.png)

进度条设置为匹配父宽度。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="match_parent"
android:layout_margin="0dp"
>
        <TextView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/tab_title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text = "Day 1"
        android:textAllCaps="true"
        android:textStyle="bold"
        android:textSize="13dp"
        android:layout_gravity="center"
        android:gravity="center"
        android:paddingTop="18dp"
        />

        <ProgressBar 
            style="@android:style/Widget.Holo.ProgressBar.Horizontal"
            android:id="@+id/tab_progress"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_marginBottom="1dp"
            />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:39:29.613

解决方案是为 androidActionBarTabStyle 实现自定义主题。这是使用时定义的视图的包含`setCustomView`我遇到的一件事是，在创建样式作为主题时，它必须以 Theme 为前缀，例如： `Theme.MyTheme`

如果您不包含`Theme.`前缀，则不会应用您的主题。

在样式文件中，我定义了这种样式：

```
<style name="withProgress" parent="@android:style/Widget.Holo.Light.ActionBar.TabView.Inverse">
    <item name="android:padding">0dp</item>
</style> 
```

然后在主题中。

`<item name="android:actionBarTabStyle">@style/withProgress</item>`

事实证明，它看起来很糟糕，但如果有人正在寻找类似的东西，那就是这样做的。

# windows - Wix 项目模板安装后在 VS2012 中没有出现

> ID：14163305
> 
> 赞同：3
> 
> 时间：2013-01-04T19:07:43.117
> 
> 标签：windows, installation, wix, installshield

我已经安装了 WiX 3.7 以在 VS 2012 中创建安装程序。但是 VS2012 Prof 版中没有 WiX 项目模板。

我尝试了一些网络上可用的解决方案，但没有结果。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:35:39.390

我不确定您在 Wix 项目模板中指的是什么，但有用于 EXE 文件和 MSI 文件的模板。和别的。这是我的 VS2012 + wix 3.7 照片。顺便说一句，它很好用。![在此处输入图像描述](../Images/c7e2625d5e12b7b1d0b70ad4c60628f0.png)

# objective-c - iOS 应用程序 NSInvalidArgumentException

> ID：14163308
> 
> 赞同：0
> 
> 时间：2013-01-04T19:07:53.673
> 
> 标签：objective-c, ios, uitextview

我一直在尝试解决我的 iOS 应用程序中涉及 rangeOfString 的错误数小时，最终能够追踪我的应用程序崩溃的位置。我的应用程序将 TextViewA 设置为 MainTextView 的前半部分。应该添加什么if语句来检查nil？

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[__NSCFString rangeOfString:options:range:locale:]: nil argument'
*** First throw call stack: 
```

.

```
[[myViewController tvTextFirstHalf] setText:[[mainTextView.text componentsSeparatedByString:[[myViewController tvTextMiddle]text]] objectAtIndex:0]]; 
```

..................................................... ..................................................

现在没有可用于编程的内存：调用 malloc 不安全

2013-01-04 14:30:58.138 类型 [7279:c07] 分隔符：（空）

2013-01-04 14:30:58.138 类型[7279:c07] mainTextView: ; 层 = ; contentOffset: {0, 0} > 2013-01-04 14:30:58.139 Type[7279:c07] mainTextView.text: TESTTTTTTT f f.

2013-01-04 14:30:58.142 类型 [7279:c07] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“*** -[__NSCFString rangeOfString:options:range:locale:]: nil argument'

***首先抛出调用栈：

(0x1a5d012 0x1882e7e 0x1a5cdeb 0xf78688 0xf87d88 0xfd05df 0x165ec 0x15dc6 0x1fd7b 0x56d8d5 0x56db3d 0xf74e83 0x1a1c376 0x1a1be06 0x1a03a82 0x1a02f44 0x1a02e1b 0x221d7e3 0x221d668 0x4be65c 0x2c5d 0x2b85)

libc++abi.dylib：终止调用抛出异常（gdb）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:18:00.933

这个 oneliners 在 obj-C 中不被认为是一个好的做法（我知道，这是有争议的）。

尝试打破：

```
[[myViewController tvTextFirstHalf] setText:[[mainTextView.text componentsSeparatedByString:[[myViewController tvTextMiddle]text]] objectAtIndex:0]]; 
```

进入一些更易于调试的代码：

```
NSString *separator = [[myViewController tvTextMiddle]text];

NSLog (@"separator: %@", separator);
NSLog (@"mainTextView: %@",mainTextView);   //is this one nil?
NSLog (@"myViewController.tvTextMiddle: %@", myViewController.tvTextMiddle); //what about this one??
NSLog (@"mainTextView.text: %@",mainTextView.text);

NSArray *components = [mainTextView.text componentsSeparatedByString:separator];

NSLog (@"we found %d components", components.count);

NSString *result = (NSString *)[components objectAtIndex:0];

NSLog (@"result should be: %@", result);

[[myViewController tvTextFirstHalf] setText:result]; 
```

代码当然会中断，但至少你会知道问题出在哪里。

你可以改变最后四行，然后像这样：

```
if (components.count >= 1)
{
    NSString *result = (NSString *)[components objectAtIndex:0];
    NSLog (@"result should be: %@", result);
    [[myViewController tvTextFirstHalf] setText:result];    
}
else
{
    [[myViewController tvTextFirstHalf] setText:@"empty!"];
} 
```

**编辑：**

从`NSLog`您发布的内容中，很明显您的分隔符`[[myViewController tvTextMiddle]text]`为空。请注意，null 与空字符串不同。它是未分配的字符串。

我的猜测是，实际上你`tvTextMiddle`是 null （或者如果你使用的是 XIB 文件，它没有正确连接到`IBOutlet`）。

您可以通过添加（在断线之前的某处）来检查：

```
NSLog (@"myViewController.tvTextMiddle: %@", myViewController.tvTextMiddle); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:15:09.383

崩溃是由于这个调用`componentsSeparatedByString`。如果您的 textview 为 nil 或没有文本，则会发生崩溃。

所以添加一个条件，如：

```
if(mainTextView.text.length != 0 && [myViewController tvTextMiddle]text].length != 0)
{
  [[myViewController tvTextFirstHalf] setText:[[mainTextView.text componentsSeparatedByString:[[myViewController tvTextMiddle]text]] objectAtIndex:0]];
} 
```

# sql-server - T-SQL Cross Join 获取缺失值

> ID：14163312
> 
> 赞同：4
> 
> 时间：2013-01-04T19:08:07.643
> 
> 标签：sql-server, tsql, sql-server-2008-r2

这是我的问题的一个简单示例。我有一个创建报告的存储过程。

```
DECLARE @Report TABLE
(Product VARCHAR(10),
Purchases MONEY default (0) 
)
DECLARE @Range TABLE
(minP MONEY,
maxP MONEY,
Descrip VARCHAR(50)
)

INSERT @Range
VALUES(0,1,'0-1'),
(2,5,'2-5'),
(6,10,'6-10')

INSERT @Report(Product, Purchases)
VALUES('A',1),
('A',5),
('B',10)

SELECT r.Product, r.Purchases, x.Descrip  
FROM @Report r CROSS JOIN @Range x 
WHERE r.purchases BETWEEN x.minp AND x.maxp 
```

结果如下所示：

```
Product Purchases   Descrip
A   1.00    0-1
A   5.00    2-5
B   10.00   6-10 
```

我怎样才能让结果看起来像这样：

```
Product Purchases   Descrip
A   1.00    0-1
A   5.00    2-5
A   0   6-10
B   0   0-1
B   0   2-5
B   10.00   6-10 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T19:20:45.690

这应该这样做：

```
SELECT B.Product, ISNULL(C.Purchases,0) Purchases, A.Descrip
FROM @Range A
CROSS JOIN (SELECT DISTINCT Product
            FROM @Report) B
LEFT JOIN @Report C
    ON B.Product = C.Product 
    AND C.Purchases BETWEEN A.minP AND A.maxP
ORDER BY B.Product, Purchases 
```

[这是一个演示](http://sqlfiddle.com/#!3/16be6/1)供您尝试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T19:21:14.113

你可以尝试这样的事情：

*   交叉加入具有范围的不同产品列表以获得每个组合。
*   左加入这个交叉加入的列表与原始报告原始数据填写购买数据。
*   连接关系将与您的原始`where`子句具有相同的逻辑（加上链接`product`）

## 示例查询

```
SELECT
  r2.Product,
  coalesce(r.Purchases, 0) as Purchases,
  x.Descrip  
FROM 
  (select distinct Product from @Report) r2 CROSS JOIN @Range x
    left join @Report r on r.purchases BETWEEN x.minp AND x.maxp
                        and r.product = r2.product 
```

## 样本输出（[**演示**](http://www.sqlfiddle.com/#!6/d41d8/1876)）：

```
| PRODUCT | PURCHASES | DESCRIP |
---------------------------------
|       A |         1 |     0-1 |
|       A |         5 |     2-5 |
|       A |         0 |    6-10 |
|       B |         0 |     0-1 |
|       B |         0 |     2-5 |
|       B |        10 |    6-10 | 
```

我会假设您的实际数据比这复杂得多。例如，如果在一个范围内有多次购买，我不确定您期望什么样的结果。但这至少应该让你开始。

# ios - 在 Objective-C 中从 PDF 中提取可编辑字段

> ID：14163313
> 
> 赞同：5
> 
> 时间：2013-01-04T19:08:08.630
> 
> 标签：ios, objective-c, xcode, pdf, form-fields

我一直在研究在我的 iOS 应用程序中使用 PDF 有一段时间了。我已经解决了一些难题，例如扫描操作员并在 UIWebView 中显示 PDF。但是，我真正需要做的是识别PDF 文档中的**可编辑字段。**

理想情况下，我希望能够直接与字段交互，但这听起来非常困难，而且不是明显的第一步。我已经在与可以以这种方式操作 PDF 的 Windows 服务进行交互，并且可以解决识别可编辑字段、在表单视图中从用户那里收集字段数据并将该数据发送回服务器的问题。问题是我看不到如何识别这些字段。我正在与政府发布的 PDF 进行交互，例如 I-9 和 W-4，因此我无法控制 PDF 的创建或字段的命名。这就是为什么我需要动态提取它们。任何帮助和/或参考将不胜感激。

我正在使用 Apple 的 Quatrz 2D Programming guide 中的 [this reference](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_pdf_scan/dq_pdf_scan.html"PDF Document Parsing")扫描 PDF 时触发操作员回调，但这并不能帮助我找到可编辑的字段。

我也只是简单地加载一个带有 PDF 数据的 UIWebView 以显示给用户。

```
[_webView loadData:decodedData MIMEType:@"application/pdf" textEncodingName:@"utf-8" baseURL:nil]; 
```

更新：

我构建了一个 PDF Helper 类（如下所示）来遍历目录中所有可能的对象类型。最初我没有处理数组中的嵌套字典，所以我没有看到表单字段。一旦我解决了这个问题，我意识到我必须考虑到父引用，以避免循环递归调用会启动无限循环。下面的代码显示了来自文档目录的大量信息。现在我只需要解析它来隔离我需要的表单字段。

PDFHelper.h

```
#import <Foundation/Foundation.h>

id selfClass;

@interface PDFHelper : NSObject

@property (nonatomic, strong) NSData *pdfData;
@property (nonatomic, strong) NSMutableDictionary *pdfDict;
@property (nonatomic) int catalogLevel;

-(NSArray *) copyPDFArray:(CGPDFArrayRef)arr referencingDictionary:(CGPDFDictionaryRef)dict referencingKey:(const char *)key;
-(NSArray *) getFormFields;
-(CGPDFDictionaryRef) getDocumentCatalog;

@end 
```

PDFHelper.m

```
#import "PDFHelper.h"
#import "FileHelpers.h"
#import "Log.h"

@implementation PDFHelper

@synthesize pdfData = _pdfData;
@synthesize pdfDict = _pdfDict;
@synthesize catalogLevel = _catalogLevel;

-(id)init
{
    self = [super init];
    if(self)
    {
        selfClass = self;
        _pdfDict = [[NSMutableDictionary alloc] init];
        _catalogLevel = 1;
    }

    return self;
}

-(NSArray *) getFormFields
{
    CGPDFDictionaryRef acroForm = NULL;
    if (CGPDFDictionaryGetDictionary([self getPdfDocDictionary], "AcroForm", &acroForm))
        CGPDFDictionaryApplyFunction(acroForm, getDictionaryObjects, acroForm);
    return [_pdfDict objectForKey:@"XFA"];
}

-(CGPDFDictionaryRef) getDocumentCatalog
{
    CGPDFDictionaryRef docCatalog = [self getPdfDocDictionary];
    CGPDFDictionaryApplyFunction(docCatalog, getDictionaryObjects, docCatalog);
    return docCatalog;
}

-(CGPDFDictionaryRef) getPdfDocDictionary
{
    NSURL *pdf = [[NSURL alloc] initFileURLWithPath:[FileHelpers pathInLibraryDirectory:@"file.pdf"]];

    [_pdfData writeToFile:[pdf path] atomically:YES];

    CGPDFDocumentRef pdfDocument = CGPDFDocumentCreateWithURL((__bridge CFURLRef)pdf);
    CGPDFDictionaryRef returnDict = CGPDFDocumentGetCatalog(pdfDocument);
    return returnDict;
}

void getDictionaryObjects (const char *key, CGPDFObjectRef object, void *info) {

    NSString *logString = [[NSString alloc] initWithString:[NSString stringWithFormat:@"key: %s", key]];
    for (int i = 0; i < [selfClass catalogLevel]; i++)
        logString = [NSString stringWithFormat:@"-%@", logString];
    [Log LogDebug:logString];

    CGPDFDictionaryRef contentDict = (CGPDFDictionaryRef)info;

    CGPDFObjectType type = CGPDFObjectGetType(object);
    switch (type) {
        case kCGPDFObjectTypeNull: {            
                [Log LogDebug:[NSString stringWithFormat:@"*****pdf null value"]];
            break;
        }
        case kCGPDFObjectTypeBoolean: {
            CGPDFBoolean objectBoolean;
            if (CGPDFObjectGetValue(object, kCGPDFObjectTypeBoolean, &objectBoolean)) {
                NSString *logString = [[NSString alloc] initWithString:[NSString stringWithFormat:@"pdf boolean value: %@", [NSNumber numberWithBool:objectBoolean]]];
                for (int i = 0; i < [selfClass catalogLevel]; i++)
                    logString = [NSString stringWithFormat:@"-%@", logString];
                [Log LogDebug:logString];
                [[selfClass pdfDict] setObject:[NSNumber numberWithBool:objectBoolean]
                                        forKey:[NSString stringWithCString:key encoding:NSUTF8StringEncoding]];
            }
            break;
        }
        case kCGPDFObjectTypeInteger: {
            CGPDFInteger objectInteger;
            if (CGPDFObjectGetValue(object, kCGPDFObjectTypeInteger, &objectInteger)) {
                NSString *logString = [[NSString alloc] initWithString:[NSString stringWithFormat:@"pdf integer value: %ld", (long int)objectInteger]];
                for (int i = 0; i < [selfClass catalogLevel]; i++)
                    logString = [NSString stringWithFormat:@"-%@", logString];
                [Log LogDebug:logString];
                [[selfClass pdfDict] setObject:[NSNumber numberWithInt:objectInteger]
                                        forKey:[NSString stringWithCString:key encoding:NSUTF8StringEncoding]];
            }
            break;
        }
        case kCGPDFObjectTypeReal: {
            CGPDFReal objectReal;
            if (CGPDFObjectGetValue(object, kCGPDFObjectTypeReal, &objectReal)) {
                NSString *logString = [[NSString alloc] initWithString:[NSString stringWithFormat:@"pdf real value: %ld", (long int)objectReal]];
                for (int i = 0; i < [selfClass catalogLevel]; i++)
                    logString = [NSString stringWithFormat:@"-%@", logString];
                [Log LogDebug:logString];
                [[selfClass pdfDict] setObject:[NSNumber numberWithInt:objectReal]
                                        forKey:[NSString stringWithCString:key encoding:NSUTF8StringEncoding]];
            }
            break;
        }
        case kCGPDFObjectTypeName: {
            const char *name;
            if (CGPDFDictionaryGetName(contentDict, key, &name))
            {
                NSString *dictName = [[NSString alloc] initWithCString:name encoding:NSUTF8StringEncoding];
                if (dictName)
                {
                    NSString *logString = [[NSString alloc] initWithString:[NSString stringWithFormat:@"pdf name value: %@", dictName]];
                    for (int i = 0; i < [selfClass catalogLevel]; i++)
                        logString = [NSString stringWithFormat:@"-%@", logString];
                    [Log LogDebug:logString];
                    [[selfClass pdfDict] setObject:dictName
                                            forKey:[NSString stringWithCString:key encoding:NSUTF8StringEncoding]];
                }
            }
            break;
        }
        case kCGPDFObjectTypeString: {
            CGPDFStringRef objectString;
            if (CGPDFObjectGetValue(object, kCGPDFObjectTypeString, &objectString)) {
                NSString *logString = [[NSString alloc] initWithString:[NSString stringWithFormat:@"pdf string value: %@", (__bridge NSString *)CGPDFStringCopyTextString(objectString)]];
                for (int i = 0; i < [selfClass catalogLevel]; i++)
                    logString = [NSString stringWithFormat:@"-%@", logString];
                [Log LogDebug:logString];
                [[selfClass pdfDict] setObject:(__bridge NSString *)CGPDFStringCopyTextString(objectString)
                                        forKey:[NSString stringWithCString:key encoding:NSUTF8StringEncoding]];
            }
            break;
        }
        case kCGPDFObjectTypeArray: {
            CGPDFArrayRef objectArray;
            if (CGPDFObjectGetValue(object, kCGPDFObjectTypeArray, &objectArray)) {
                NSArray *myArray=[selfClass copyPDFArray:objectArray referencingDictionary:contentDict referencingKey:key];
                [[selfClass pdfDict] setObject:myArray
                                        forKey:[NSString stringWithCString:key encoding:NSUTF8StringEncoding]];

            }
            break;
        }
        case kCGPDFObjectTypeDictionary: {
            CGPDFDictionaryRef objectDictionary;
            if (CGPDFObjectGetValue(object, kCGPDFObjectTypeDictionary, &objectDictionary)) {
                NSString *logString = @"Found dictionary";
                for (int i = 0; i < [selfClass catalogLevel]; i++)
                    logString = [NSString stringWithFormat:@"-%@", logString];
                //[Log LogDebug:logString];
                NSString *keyCheck = [[NSString alloc] initWithUTF8String:key];
                if (![keyCheck isEqualToString:@"Parent"] && ![keyCheck isEqualToString:@"P"])
                {
                    [selfClass setCatalogLevel:[selfClass catalogLevel] + 1];
                    CGPDFDictionaryApplyFunction(objectDictionary, getDictionaryObjects, objectDictionary);
                    [selfClass setCatalogLevel:[selfClass catalogLevel] - 1];
                }
            }
            break;
        }
        case kCGPDFObjectTypeStream: {
            CGPDFStreamRef objectStream;
            if (CGPDFObjectGetValue(object, kCGPDFObjectTypeStream, &objectStream)) {

                CGPDFDictionaryRef dict = CGPDFStreamGetDictionary( objectStream );

                CGPDFDataFormat fmt = CGPDFDataFormatRaw;
                CFDataRef streamData = CGPDFStreamCopyData(objectStream, &fmt);
                NSData *data = [[NSData alloc] initWithData:(__bridge NSData *)(streamData)];
                [data writeToFile:[FileHelpers pathInDocumentDirectory:@"data.dat"] atomically:YES];
                NSString *dataString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
                //if (!dataString) {
                //    dataString = [[NSString alloc] initWithData:(__bridge NSData *)(streamData) encoding:NSUTF16StringEncoding];
               // }

                NSString *logString = [[NSString alloc] initWithString:[NSString stringWithFormat:@"pdf stream length: %ld - %@", (long int)CFDataGetLength( streamData ), dataString]];

                for (int i = 0; i < [selfClass catalogLevel]; i++)
                    logString = [NSString stringWithFormat:@"-%@", logString];
                [Log LogDebug:logString];

                NSString *keyCheck = [[NSString alloc] initWithUTF8String:key];
                if( dict && ![keyCheck isEqualToString:@"Parent"] && ![keyCheck isEqualToString:@"P"])
                {
                    [selfClass setCatalogLevel:[selfClass catalogLevel] + 1];
                    CGPDFDictionaryApplyFunction(dict, getDictionaryObjects, dict);
                    [selfClass setCatalogLevel:[selfClass catalogLevel] - 1];
                }
            }
        }
    }
}

- (NSArray *)copyPDFArray:(CGPDFArrayRef)arr referencingDictionary:(CGPDFDictionaryRef)dict referencingKey:(const char *)key
{
    int i = 0;
    NSMutableArray *temp = [[NSMutableArray alloc] init];

    NSString *logString = [[NSString alloc] initWithString:[NSString stringWithFormat:@"pdf array count: %zu", CGPDFArrayGetCount(arr)]];
    for (int i = 0; i < [selfClass catalogLevel]; i++)
        logString = [NSString stringWithFormat:@"-%@", logString];
    [Log LogDebug:logString];

    for(i=0; i<CGPDFArrayGetCount(arr); i++){
        CGPDFObjectRef object;
        CGPDFArrayGetObject(arr, i, &object);
        CGPDFObjectType type = CGPDFObjectGetType(object);
        switch(type){
            case kCGPDFObjectTypeNull: {
                NSString *logString = [[NSString alloc] initWithString:[NSString stringWithFormat:@"pdf array null(%d)", i]];
                for (int i = 0; i < [selfClass catalogLevel]; i++)
                    logString = [NSString stringWithFormat:@"-%@", logString];
                [Log LogDebug:logString];
                break;
            }
            case kCGPDFObjectTypeBoolean: {
                CGPDFBoolean objectBool;
                if (CGPDFObjectGetValue(object, kCGPDFObjectTypeBoolean, &objectBool)) {
                    NSString *logString = [[NSString alloc] initWithString:[NSString stringWithFormat:@"pdf array boolean value(%d): %@", i, [NSNumber numberWithBool:objectBool]]];
                    for (int i = 0; i < [selfClass catalogLevel]; i++)
                        logString = [NSString stringWithFormat:@"-%@", logString];
                    [Log LogDebug:logString];
                    [temp addObject:[NSNumber numberWithBool:objectBool]];
                }
                break;
            }
            case kCGPDFObjectTypeInteger: {
                CGPDFInteger objectInteger;
                if (CGPDFObjectGetValue(object, kCGPDFObjectTypeInteger, &objectInteger)) {
                    NSString *logString = [[NSString alloc] initWithString:[NSString stringWithFormat:@"pdf array integer value(%d): %ld", i, (long int)objectInteger]];
                    for (int i = 0; i < [selfClass catalogLevel]; i++)
                        logString = [NSString stringWithFormat:@"-%@", logString];
                    [Log LogDebug:logString];
                    [temp addObject:[NSNumber numberWithInt:objectInteger]];
                }
                break;
            }
            case kCGPDFObjectTypeReal:
            {
                CGPDFReal objectReal;
                if (CGPDFObjectGetValue(object, kCGPDFObjectTypeReal, &objectReal))
                {
                    NSString *logString = [[NSString alloc] initWithString:[NSString stringWithFormat:@"pdf array real(%d): %ld", i, (long int)objectReal]];
                    for (int i = 0; i < [selfClass catalogLevel]; i++)
                        logString = [NSString stringWithFormat:@"-%@", logString];
                    [Log LogDebug:logString];
                    [temp addObject:[NSNumber numberWithInt:objectReal]];
                }
                break;
            }
            case kCGPDFObjectTypeName:
            {
                const char *name;
                if (CGPDFDictionaryGetName(dict, key, &name))
                {
                    NSString *dictName = [[NSString alloc] initWithCString:name encoding:NSUTF8StringEncoding];

                    if (dictName)
                    {
                        NSString *logString = [[NSString alloc] initWithString:[NSString stringWithFormat:@"pdf array name value(%d): %@", i, dictName]];
                        for (int i = 0; i < [selfClass catalogLevel]; i++)
                            logString = [NSString stringWithFormat:@"-%@", logString];
                        [Log LogDebug:logString];
                        [[selfClass pdfDict] setObject:dictName
                                                forKey:[NSString stringWithCString:key encoding:NSUTF8StringEncoding]];
                    }
                }
                break;
            }
            case kCGPDFObjectTypeString:
            {
                CGPDFStringRef objectString;
                if (CGPDFObjectGetValue(object, kCGPDFObjectTypeString, &objectString))
                {
                    NSString *tempStr = (__bridge NSString *)CGPDFStringCopyTextString(objectString);
                    NSString *logString = [[NSString alloc] initWithString:[NSString stringWithFormat:@"pdf array string(%d): %@", i, tempStr]];
                    for (int i = 0; i < [selfClass catalogLevel]; i++)
                        logString = [NSString stringWithFormat:@"-%@", logString];
                    [Log LogDebug:logString];
                    [temp addObject:tempStr];
                }
                break;
            }
            case kCGPDFObjectTypeArray :
            {
                CGPDFArrayRef objectArray;
                if (CGPDFObjectGetValue(object, kCGPDFObjectTypeArray, &objectArray))
                {
                    NSArray *tempArr = [selfClass copyPDFArray:objectArray referencingDictionary:dict referencingKey:key];
                    [temp addObject:tempArr];
                }
                break;
            }
            case kCGPDFObjectTypeDictionary :
            {
                CGPDFDictionaryRef objectDict;
                NSString *keyCheck = [[NSString alloc] initWithUTF8String:key];
                if (CGPDFObjectGetValue(object, kCGPDFObjectTypeDictionary, &objectDict) && ![keyCheck isEqualToString:@"Parent"] && ![keyCheck isEqualToString:@"P"])
                {
                    [selfClass setCatalogLevel:[selfClass catalogLevel] + 1];
                    CGPDFDictionaryApplyFunction( objectDict, getDictionaryObjects,  objectDict);
                    [selfClass setCatalogLevel:[selfClass catalogLevel] - 1];
                }
                break;
            }
            case kCGPDFObjectTypeStream :
            {
                CGPDFStreamRef objectStream;
                if (CGPDFObjectGetValue(object, kCGPDFObjectTypeStream, &objectStream))
                {
                    CGPDFDictionaryRef streamDict = CGPDFStreamGetDictionary( objectStream );
                    CGPDFDataFormat fmt = CGPDFDataFormatRaw;
                    CFDataRef streamData = CGPDFStreamCopyData(objectStream, &fmt);
                    NSString *dataString = [[NSString alloc] initWithData:(__bridge NSData *)(streamData) encoding:NSUTF8StringEncoding];

                    NSString *logString = [[NSString alloc] initWithString:[NSString stringWithFormat:@"pdf array stream length: (%d): %ld - %@", i, (long int)CFDataGetLength( streamData ), dataString]];

                    for (int i = 0; i < [selfClass catalogLevel]; i++)
                        logString = [NSString stringWithFormat:@"-%@", logString];
                    [Log LogDebug:logString];

                    NSString *keyCheck = [[NSString alloc] initWithUTF8String:key];
                    if( streamDict && ![keyCheck isEqualToString:@"Parent"] && ![keyCheck isEqualToString:@"P"])
                    {
                        [selfClass setCatalogLevel:[selfClass catalogLevel] + 1];
                        CGPDFDictionaryApplyFunction( streamDict, getDictionaryObjects, streamDict );
                        [selfClass setCatalogLevel:[selfClass catalogLevel] - 1];
                    }
                }
            }

        }
    }
    return temp;
}

@end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T13:52:11.737

“可编辑字段”是指可以使用 Acrobat 或 Adob​​e Reader 填写的表单元素类型？

这些字段不是实际页面描述的一部分。如果您查看 PDF 规范文档，您会在第 12.7 章中找到“交互式表单”的描述，其中解释了文档的字段字典从文档目录中名为“AcroForm”的元素开始存储。

据我所知，iOS 确实允许您访问文档目录，因此您必须在该目录字典中找到“AcroForm”字段，然后进入字段字典结构以收集您想要的信息。完整文档中的所有字段都以分层方式存储在此位置。

# jsf - 之间的不一致行为 和

> ID：14163317
> 
> 赞同：0
> 
> 时间：2013-01-04T19:08:20.233
> 
> 标签：jsf, primefaces, commandlink, commandbutton

我有一个删除确认对话框：

```
 <p:confirmDialog id="deleteConfirmDialog"
    header="#{i18n['confirm-deletion']}"
    widgetVar="pnp_delete_confirmDialog" closeable="false"
    appendToBody="true">
    <f:facet name="message">
      <h:outputFormat id="deleteConfirmMessage"
        value="#{i18n['confirm-subscription-deletion']}">
        <f:param value="#{subscriptions.deleteSelected.title}" />
      </h:outputFormat>
    </f:facet>
    <h:form id="pnpConfirmDeleteForm">
      <p:commandButton id="deleteActionConfirmed"
        action="#{subscriptions.delete}" value="#{i18n['delete']}"
        type="button" process="@this" update=":pnpEditForm :pnpExistingForm"
        oncomplete="pnp_delete_confirmDialog.hide()" />
      <p:commandLink id="deleteActionConfirmedLink"
        action="#{subscriptions.delete}" process="@this"
        update=":pnpEditForm :pnpExistingForm"
        oncomplete="pnp_delete_confirmDialog.hide()">#{i18n['delete']}</p:commandLink>
      <p:commandButton id="deleteActionCancelled" value="#{i18n['cancel']}"
        type="button" onclick="pnp_delete_confirmDialog.hide()" />
    </h:form>
  </p:confirmDialog> 
```

您会注意到`deleteActionConfirmed`按钮和`deleteActionConfirmedLink`链接具有完全相同的操作、流程、更新和完成属性。但是，链接按预期工作，按钮什么也不做。查看生成的标记：

```
<form enctype="application/x-www-form-urlencoded"
  action="/primefaces-quickstart/xhtml/pnp-configuration.xhtml" method="post"
  name="pnpConfirmDeleteForm" id="pnpConfirmDeleteForm">
  <input type="hidden" value="pnpConfirmDeleteForm" name="pnpConfirmDeleteForm">
  <button type="button"
    class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only"
    name="pnpConfirmDeleteForm:deleteActionConfirmed"
    id="pnpConfirmDeleteForm:deleteActionConfirmed" role="button"
    aria-disabled="false">
    <span class="ui-button-text">Delete</span>
  </button>
  <a
    onclick="PrimeFaces.ab({source:'pnpConfirmDeleteForm:deleteActionConfirmedLink',process:'pnpConfirmDeleteForm:deleteActionConfirmedLink',update:'pnpEditForm pnpExistingForm',oncomplete:function(xhr,status,args){pnp_delete_confirmDialog.hide();}});return false;"
    class="ui-commandlink" href="#"
    id="pnpConfirmDeleteForm:deleteActionConfirmedLink">Delete</a>
  <button type="button" onclick="pnp_delete_confirmDialog.hide();"
    class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only"
    name="pnpConfirmDeleteForm:deleteActionCancelled"
    id="pnpConfirmDeleteForm:deleteActionCancelled" role="button"
    aria-disabled="false">
    <span class="ui-button-text">Cancel</span>
  </button>
  <input type="hidden" autocomplete="off"
    value="7076449462381240234:-2976764560029615800" id="javax.faces.ViewState"
    name="javax.faces.ViewState">
</form> 
```

您可以看到没有为按钮生成 onclick，其中有链接。我错过了什么还是这是primefaces中的错误？如果是错误，除了使用带有样式的链接使它们看起来像按钮之外，还有其他解决方法吗？

我在 tomcat 6.0.32（servlet 2.5，el 2.1）上使用 mojarra 2.1.14 和 primefaces 3.4.2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T19:29:22.057

啊……简单的错误。的 type 属性`p:commandButton`决定了行为。看来，通过设置`type='button'`我已经把它变成了（取自primefaces用户指南）：

> **按按钮**
> 
> 按钮用于执行自定义 javascript 而不会导致 ajax/非 ajax 请求。创建一个按钮集类型为“按钮”。
> 
> `<p:commandButton type="button" value="Alert" onclick="alert(‘Prime’)" />`

切换类型提交解决了这个问题。经验教训...如果使用按钮，`type='button'`会导致组件忽略任何服务器端`action`。

# c# - 列表 绑定到组合框

> ID：14163318
> 
> 赞同：0
> 
> 时间：2013-01-04T19:08:20.707
> 
> 标签：c#, wpf, list, binding, combobox

我的列表有问题，该列表绑定到`ComboBox`.

`List`：_

```
private List<string> _CourseList = new List<string>();
public List<string> CourseList
        {
            get { return _CourseList; }
            set
            {
                _CourseList = value;
                OnPropertyChanged("CourseList");
            }
        } 
```

的 XAML 代码`ComboBox`：

```
<ComboBox x:Name="cbxCourse" Height="23" MinWidth="100" Margin="5,1,5,1" VerticalAlignment="Top" ItemsSource="{Binding Path=CourseList}" IsEnabled="{Binding Path=CanExport}" SelectedIndex="{Binding Path=CourseListSelectedIndex}" SelectedItem="{Binding Path=CourseListSelectedItem}" SelectionChanged="cbxCourse_SelectionChanged"/> 
```

`List`现在我从另一个线程填充：

```
void Database_LoadCompleted(object sender, SqliteLoadCompletedEventArgs e)
{
    foreach (DataTable Table in DataSetDict[CampagneList[0]].Tables)
    {
        CourseList.Add(Table.TableName);
    }
} 
```

一切看起来都很好，并且`ComboBox`改变了它的项目。当我尝试更新MainThread 中的`ComboBox`( ) 时：`CourseList`

```
 private void cbxCampagne_SelectionChanged(object sender, EventArgs e)
    {
        if (cbxCampagne.SelectedItem != null)
        {
            CourseList.Clear();
            foreach (DataTable Table in DataSetDict[CampagneList[_CampagneListSelectedIndex]].Tables)
            {
                CourseList.Add(Table.TableName);
            }
    } 
```

改变的所有元素`CourseList`（我可以在 a 中看到它`Textbox`）但`ComboxBox`没有任何反应。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:14:47.290

`CourseList`尝试更改`ObervableCollection<T>`

[http://msdn.microsoft.com/en-us/library/ms668604.aspx](http://msdn.microsoft.com/en-us/library/ms668604.aspx)

Binding 仅在`CourseList`设置时（分配列表时）通知 UI，而不是在其内容更改时通知 UI。

[来自工作线程的 MainThread 上的 Invoke 事件的](https://stackoverflow.com/questions/12709183/invoke-event-on-mainthread-from-worker-thread)一些代码

这表明`List<>`一旦分配意志就不会改变并且`ObservableList<>`意志会改变。

视图模型

```
//Viewmodel
public class WindowViewModel : INotifyPropertyChanged
{
    private volatile bool _canWork;
    private List<string> _items;
    private ObservableCollection<string> _obervableItems;

    public WindowViewModel()
    {
        //Queue some tasks for adding and modifying the list
        ThreadPool.QueueUserWorkItem(AddItems);
        ThreadPool.QueueUserWorkItem(ModifyItems);

        //Create a background worker to do some work and then we can bind the output to
        //our ObservableList
        var obervableWorker = new BackgroundWorker();
        obervableWorker.DoWork += ObervableWorkerOnDoWork;
        obervableWorker.RunWorkerCompleted += ObervableWorkerOnRunWorkerCompleted;

        obervableWorker.RunWorkerAsync();
    }

    private void ObervableWorkerOnRunWorkerCompleted(object sender, RunWorkerCompletedEventArgs runWorkerCompletedEventArgs)
    {
        var items = ObservableItems as ObservableCollection<string>;

        var workerItems = runWorkerCompletedEventArgs.Result as List<string>;

        foreach (var workerItem in workerItems)
        {
            items.Add(workerItem);
        }

        for (int i = 50; i < 60; i++)
        {
            var item = items.First(x => x == i.ToString());
            items.Remove(item);
        }
    }

    private void ObervableWorkerOnDoWork(object sender, DoWorkEventArgs doWorkEventArgs)
    {
        Thread.Sleep(100);
        int count = 0;
        var items = new List<string>();
        while (100 > count++)
        {
            items.Add(count.ToString());
        }

        doWorkEventArgs.Result = items;
    }

    private void ModifyItems(object state)
    {
        while (!_canWork)
        {
            Thread.Sleep(100);
        }
        var items = Items as List<string>;
        for (int i = 50; i < 60; i++)
        {
            items.RemoveAt(i);
        }
    }

    private void AddItems(object state)
    {
        Thread.Sleep(100);
        int count = 0;
        var items = Items as List<string>;
        while (100 > count++)
        {
            items.Add(count.ToString());
        }
        _canWork = true;
    }

    public IEnumerable<string> Items
    {
        get { return _items ?? (_items = new List<string>()); }
        set { _items = new List<string>(value);
            OnPropertyChanged();
        }
    }

    public IEnumerable<string> ObservableItems
    {
        get { return _obervableItems ?? (_obervableItems = new ObservableCollection<string>()); }
        set { _obervableItems = new ObservableCollection<string>(value); OnPropertyChanged();}
    }

    public event PropertyChangedEventHandler PropertyChanged;

    [NotifyPropertyChangedInvocator]
    protected virtual void OnPropertyChanged([CallerMemberName] string propertyName = null)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

窗户

```
//Window.Xaml
<Window x:Class="ComboBox.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:comboBox="clr-namespace:ComboBox"
        Title="MainWindow" Height="350" Width="525">
    <Window.DataContext><comboBox:WindowViewModel /></Window.DataContext>
    <Grid>
        <ComboBox Width="200" Height="22" ItemsSource="{Binding Items}"></ComboBox>
        <ComboBox Margin="0,44,0,0" Width="200" Height="22" ItemsSource="{Binding ObservableItems}"></ComboBox>
    </Grid>
</Window> 
```

这可以很容易地修改为使用 Dispatcher Invoke：使用 Dispatcher.Invoke[从非主线程更改 WPF 控件](https://stackoverflow.com/questions/1644079/how-can-i-use-the-dispatcher-invoke-in-wpf-change-controls-from-non-main-thread)

# ios - 带有 UITableView 和 UIGestureRecognizer 的 UIView 突然停止手势识别

> ID：14163319
> 
> 赞同：0
> 
> 时间：2013-01-04T19:08:27.850
> 
> 标签：ios, xcode, uitableview, uigesturerecognizer

我的应用程序有一个包含`UITableView`. 我`UIPanGestureRecognizer`在视图中添加了一个。我使用 GestureRecognizer 来调整 TableViews 的宽度。

调整 TableView 的宽度时，表格中的单元格也会自动调整大小。

首先，这非常有效。- 突然调整大小后，GestureRecognizer 不再触发。在另一个视图区域（tableView 除外）中，GestureRecognizer 仍然可以正常工作。

我是否旋转设备，GestureRecognizer 会再次开始工作一段时间。

我有同样的情况，`UICollectionView`而不是 TableView - 一切正常。

解决问题的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:46:53.010

我想出了以下方法，这对我来说很好。

我将`UIGestureRecognizerDelegate`-Protocol 添加到我的 ViewController 并添加了以下功能：

```
-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer{
    return YES;
} 
```

# php - 搜索素数的方法永远循环

> ID：14163325
> 
> 赞同：0
> 
> 时间：2013-01-04T19:08:56.197
> 
> 标签：php, primes

我完全被困在这里。下面这个简单的代码刚刚停止工作。我调整了一些变量，现在它循环了一分钟，然后什么也没显示。问题应该出在方法`isPrime`或`collectPrimes`. 有任何想法吗？提前致谢。

```
<?php

class PrimeNumbers
{
    const COLUMNS = 5;
    const MAX_PRIMES = 100;
    public $primes = array();

    public function isPrime($z) {
        for ($i = 2; $i < $z; $i++)
        {
            if (($z % $i) == 0) {
                return false;
            }   
        }
        return true;
    }

    public function collectPrimes() {
        $currentNumber = 1;
        while (count($this->primes) <= $this::MAX_PRIMES) {
            if ($this->isPrime($currentNumber)) {
                array_push($this->primes, $currentNumber);
                $currentNumber++;
            }
        }
    }

    public function outputGrid() {
        $columnCounter = 0;
        $output = "";

        $output .= "<table>";

        foreach ($this->primes as $prime) {
            if ($columnCounter == 0) {
               $output .= "<tr>";
            } else if ($columnCounter == $this::COLUMNS) {
                $output .= "</tr>";
                $columnCounter = 0;
            }
            $columnCounter++;
            $output .= "<td>".$prime."</td>";
        }

        $output .= "</table>";
        return $output;
    }
}

?>
<html>
<head><title>1000 Primzahlen</title></head>
<body>

<?php 

  $pr = new PrimeNumbers();
  $pr->collectPrimes();
  echo $pr->outputGrid();
  var_dump($pr->primes);

?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:15:30.807

移到`$currentNumber++`if 子句之外。

每当您的代码达到非质数时，它就会在该数字处停止，并且不会继续增加`$currentNumber`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:30:27.563

Not sure if that would help, but class constants in PHP shall be accesses with the keyword `self`

```
$this::COLUMNS    ====> self::COLUMNS
$this::MAX_PRIMES ====> self::MAX_PRIMES 
```

# r - ggplot 条正在跨越它们不属于的其他日期

> ID：14163327
> 
> 赞同：1
> 
> 时间：2013-01-04T19:09:01.267
> 
> 标签：r, ggplot2

```
dput(df)
structure(list(Month = structure(c(15248, 15522), class = "Date"), 
    Value = c(1, 3)), .Names = c("Month", "Value"), row.names = 1:2, class = "data.frame")

ggplot(df, aes(Month, Value)) + 
  geom_bar(fill = "orange", size = .3, stat = "identity", position = "identity") +
  geom_smooth(data = df, aes(Month, Value, group = 1), method = "lm", 
              size = 2, color = "red") + 
  scale_x_date(breaks = "1 month", labels = date_format("%b-%Y"), 
               limits = as.Date(c('2011-01-01','2013-01-01'))) 
```

ggplot 中的条形图也超过了其他日期。我确实收到此警告消息：

```
Warning message:
In qt((1 - level)/2, df) : NaNs produced 
```

有没有办法将垃圾箱放置到所属日期，而不是交叉到其他日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T19:37:31.730

简化了绘图代码。无需在每个几何图形中写入数据框名称、x 和 y 值。

要更改条形宽度，可以使用参数`width=`in 。`geom_bar()`

```
ggplot(df, aes(Month, Value)) + 
  geom_bar(fill="orange",stat="identity",width=15)+
  geom_smooth( method="lm", size=2, color="red")+
  scale_x_date(breaks = "1 month", labels=date_format("%b-%Y"), limits = as.Date(c('2011-01-01','2013-01-01'))) 
```

您会收到错误消息，因为您的数据框仅包含两个值（您不能只使用两个值进行回归）。如果确实只有两个值，则替换

```
geom_smooth( method="lm", size=2, color="red") 
```

和

```
geom_line(size=2, color="red") 
```

# php - 将变量传递给 Laravel4 中的视图

> ID：14163330
> 
> 赞同：1
> 
> 时间：2013-01-04T19:09:06.703
> 
> 标签：php, layout, view, controller, laravel

我对所有这些 PHP 框架都很陌生。我曾经使用 phpbb 的模板函数、语言支持和会话创建了自己的框架。我把它们变成了一个模型视图框架。我认为这太复杂了，并寻找了一个新的框架。

现在我正在使用 laravel，它非常好，但我仍然不知道如何处理控制器和视图。这是我卡住的部分。

我通过在根文件夹中创建一个 file.php 并创建一个 .html 文件样式文件夹来使用我的 phpbb 框架。phpbb的框架可以通过调用渲染一个html文件

```
$template->set_filenames(array(
'body' => 'file.html'
)); 
```

但是我可以将每个变量从 controller.php 传递给 file.html，如下所示：

```
$template->assign_var('THREAD_ID', $row['id']);
$template->assign_var('THREAD_NAME', $row['title']);

even cycles were too easy

while ($row = $db->sql_fetchrow($result))
{
    $template->assign_block_vars('post_row', array
    (
        'ID'    =>  $row['post_id'],
        'COUNT' => $count++,
        'USERNAME' => $row['post_username'],
        'DATE' => $row['post_datetime'],
        'ENTRY' => $row['post_entry'],
    )
    );
}

 and then for rendering the view

 $template->set_filenames(array(
 'body' => 'file.html'
 )); 
```

这是我在laravel中无法理解的。我正在使用它，但是当我将它用于另一个变量时，它给了我错误。

```
$this->layout->nest('content', 'index', array(
  'data' => 'pokeçu'
)); 
```

在文档中，他们仅针对一个变量做了示例。我不知道如何继续我的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T19:27:04.657

我假设您使用的是 Laravel 3，因为那是当前的稳定版本。[Laravel 文档中](http://laravel.com/docs/views#binding-data-to-views)有一节介绍了这一点。基本上，您将以最适合您的应用程序的方式使用 View 类。记住，你的控制器方法（或路由闭包）总是会*返回*一些东西，通常是一个 View 实例。要将数据绑定到该视图，最简单的方法是使用 with($data[, $value]) ，其中 $data 是关联键值数组，或者 $data 是键而 $value 是值。例如：

```
public function get_index()
{
    $thread = array('id'=>23, 'name'=>'Skidoo');
    return View::make('home.index')->with($thread);
} 
```

注意返回。您无需立即退货。您还可以实例化 View 对象，并将数据直接绑定到它：

```
public function get_index()
{
    $view = View::make('home.index');
    $view->thread = array('id'=>23, 'name'=>'Skidoo');
    $view->welcome = 'Welcome to My Site!';
    return $view;
} 
```

除了文档之外，还有几本最近可用的教程书籍。查看 Laravel 网站[http://laravel.com/上的学习部分](http://laravel.com/)

# iphone - 在编译时将根证书添加到受信任的存储区

> ID：14163342
> 
> 赞同：0
> 
> 时间：2013-01-04T19:10:02.500
> 
> 标签：iphone, objective-c, ios, ipad, cocoa

我正在尝试在 iOS 的受信任商店中添加我们的根证书之一。我只是好奇这是否可以在编译时完成？我见过不同版本的人创建 p12，但实际上我只是想将它添加到受信任的存储中，以便服务器可以在 SSL 握手期间识别出这是一个受信任的域。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:11:04.230

不，您不能将其添加为受信任的根 - 也不是在编译时或运行时

# makefile - 用于将具有多个扩展名的文件复制到目标目录的 Makefile 规则

> ID：14163344
> 
> 赞同：0
> 
> 时间：2013-01-04T19:10:03.833
> 
> 标签：makefile

我想将文件从源目录复制到目标目录。我想避免复制未更改的文件。因此，我正在尝试利用 make 功能来检查带有`%.:%.`规则的较新文件。

现在，在这种情况下，源和目标 EXTENSION 是相同的。其他地方有目标文件，但图形资产没有。

我`make`用来复制图像。

```
TARGET := target

SOURCE := source
GRAPHICS := $(foreach dir,$(SOURCE), $(wildcard $(dir)/*.jpg ) $(wildcard $(dir)/**/*.jpg ) $(wildcard $(dir)/*.png ) $(wildcard $(dir)/**/*.png ) $(wildcard $(dir)/*.gif ) $(wildcard $(dir)/**/*.gif )  )

JPG = $(GRAPHICS:.jpg=.tmp)
PNG = $(GRAPHICS:.png=.tmp)
GIF = $(GRAPHICS:.gif=.tmp) 
```

然后使用以下规则将文件复制到目标目录：

```
%.tmp:%.jpg
    find $< | cpio -p -d -v $(TARGET) 
```

## 问题

1.  是否可以在此处字符串替换目标目录
2.  从而使用 make newer 功能？

我试过了

```
 JPG = $(GRAPHICS:$(TARGET).jpg=.tmp) 
```

但这失败了`No rule to make target`。是否只能比较同一目录中的源和对象？

可以制定一条规则，使源和对象是相同的扩展吗？

```
%.jpg:%.jpg 
```

我能想到的最接近的是：

```
$(TARGET)%.jpg:%.jpg 
```

但这永远不会运行。即使在清洁之后。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T19:53:28.887

这是解决方案。

这个“设置”保持不变。

```
TARGET := target

SOURCE := source GRAPHICS := $(foreach dir,$(SOURCE), $(wildcard $(dir)/*.jpg ) 
$(wildcard $(dir)/**/*.jpg ) $(wildcard $(dir)/*.png ) $(wildcard $(dir)/**/*.png ) 
$(wildcard $(dir)/*.gif ) $(wildcard $(dir)/**/*.gif )  ) 
```

现在为 $GRAPHICS 字符串中的所有（空格分隔）值添加前缀

```
TARGET_GRAPHICS := $(addprefix $(TARGET)/, $(GRAPHICS) ) 
```

*   请注意， patsubst aka -- `TARGET_GRAPHICS := $(patsubst %, $(TARGET)/%, $(GRAPHICS) )`-- 仅适用于第一个条目。也许我做错了。

为每种文件类型提供模式匹配。在这里随心所欲。就我而言，将输入复制到目标目录中。cpio 将创建所需的目录。cp -p 也可以根据需要工作。

```
$(TARGET)/%.jpg : %.jpg 
     @echo "--- .jpg copying " $< " to " $@ " into dir " $(<D)
     @find $< | cpio -p -d -v $(TARGET)

$(TARGET)/%.png : %.png 
    @echo "--- .png copying " $< " to " $@
    @find $< | cpio -p -d -v $(TARGET)

$(TARGET)/%.gif : %.gif
@echo "--- .gif Copying " $< " to " $@
@find $< | cpio -p -d -v $(TARGET) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-30T11:59:11.117

`d1/d2/f.png`所以你想让into的副本`out/d1/d2/f.png`利用*make*的依赖检查？

```
out/d1/d2/f.png: d1/d2/f.png
out/d1/d2/f.png: 
    cp $< $@ 
```

添加一个jpg文件`d3/g.jpg`说，

```
out/d3/g.jpg: d3/g.jpg
out/d1/d2/f.png: d1/d2/f.png

out/d1/d2/f.png out/d3/g.jpg: 
    cp $< $@ 
```

我们可以使用静态模式规则更清晰地表达这一点。

```
out/d3/g.jpg out/d1/d2/f.png: out/% %
    cp $< $@ 
```

好的。所以添加你的`${GRAPHICS}`和充实的东西

```
outdir := out/
targets := $(addprefix ${outdir},${GRAPHICS})

.PHONY: all
all: ${targets} ; : $@ Success

${targets}: ${outdir}%: %
    echo $< | cpio -d -p ${outdir} 
```

并行也是安全的，因此`make -j9`可以很好地锻炼你的 8 个 CPU。

# c++ - 为什么 ->[] 在 C++ 中不是运算符？（取消引用数组指针的下标运算符）

> ID：14163347
> 
> 赞同：13
> 
> 时间：2013-01-04T19:10:15.697
> 
> 标签：c++, programming-languages, operators

我知道问*为什么？*对这个网站来说是个坏问题，因为我们不知道。但是我的意思是，它可以代替询问，*有哪些可能的原因？*

我发现自己自然而然地写作，

```
foo->[i]; 
```

并惊讶地发现它不起作用。我的意思是写：

```
(*foo)[i]; 
```

我相信大多数人已经明白我的意思，但要清楚，我想

```
bar.subscript(i);
foo->subscript(i); 
```

将类似于

```
bar.operator[](i);
foo->operator[](i); 
```

**但情况似乎并非如此。为什么？**我确定我一定是以错误的方式看待某些事情，但我不知道是什么。我知道的理论很少，所以外行的解释将不胜感激。

**如果我的类比没有明显的错误，那么语言的设计者可能将操作员排除在外的一些可能原因是什么？**是模棱两可的吗？（如果是这样，那么误认为是什么？）

* * *

根据@chris 的建议，我想在编辑中加入一些评论，因为我并没有像我应该做的那样清楚：

> *OP 正在提议 operator->[]，这是两者的结合。*
> - 克里斯

> *他在问为什么他想要的东西不存在，而不是为什么他试图编写的代码不起作用。*
> ——马修“齿轮”奥兰多

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T19:20:05.830

**operator->**的权限必须是成员的名字。我猜一个显式的**operatorXYZ**算作成员的名称，所以**foo->operator[]**是允许的。但是，诸如**[]**之类的随机标记不能算作成员的名称，因此**foo->[i]**是不允许的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T19:26:26.210

> 该语言的设计者可能将操作员排除在外的一些可能原因是什么？

1：没有人提议。如果它没有被提议，它就不会进入语言。

2：看起来不对。`operator->`可能返回一个指针，但在语言中*使用*它是“引用这个指针并访问一个成员”。这就是语言将要做的事情`->`。所以当有人看到时`->[]`，它看起来不正确。在所有其他情况下，右边的东西`->`是某种形式的成员标识符。

3：因为与语言有关的事情远比改变这样的小事情要重要得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T19:27:52.740

我想原因是在 C++ 中你很有可能会使用`vector`（或`array`在 C++1 中）而不是指向 C 数组的指针。在以 C++ 为中心的解决方案中，不需要这样的运算符，因此它可能被认为是编译器的额外工作，而几乎没有好处。

如果您需要一个二维数组，那么`foo[0][i]`已经可以使用 C 数组了。

# .net - 通过 LINQ 中的大集合进行分页

> ID：14163348
> 
> 赞同：1
> 
> 时间：2013-01-04T19:10:16.717
> 
> 标签：.net, linq

我不了解`Skip`LINQ 中的方法 - 我有从 Web 服务返回的数据。数据相当大，并且随着时间的推移而增长，所以现在我需要翻阅记录。

我使用的代码是这样的：

```
var res = proxy.FP_MEDIA_COUNT
    .Where(x => 
        x.Lot.ProductGroup.Promotion.Calendar.PriceGroup != null &&      
        ((x.Lot.ProductGroup.Promotion.Calendar.Year > RetYear) || 
        (x.Lot.ProductGroup.Promotion.Calendar.Year == RetYear && 
        ((x.Lot.ProductGroup.Promotion.Calendar.Season == RetSeason) || 
        (x.Lot.ProductGroup.Promotion.Calendar.Season == NextSeason))))
    )
    .Select(x => new { 
        PromoID = x.Lot.ProductGroup.Promotion.PromotionID, 
        Year = x.Lot.ProductGroup.Promotion.Calendar.Year, 
        Season = x.Lot.ProductGroup.Promotion.Calendar.Season, 
        BU = x.Lot.ProductGroup.Promotion.Calendar.PriceGroup.PriceGroupName, 
        Metric = x.Lot.Metric, 
        Lot = x.Lot, 
        Media = x.Media, 
        MediaType = x.Media.MediaType, 
        MediaSubType = x.MediaSubType 
     })
     .Take(10)
     .ToArray(); 
```

我看到了如何使用该`Take`方法并且我有点理解该`Skip`方法但是任何时候我将它放在该`Take`方法之前我都会收到错误消息：

> 执行命令定义时发生错误。

这真的没有帮助。

任何人都可以告诉我该`Skip`方法应该放在哪里或更好的方法吗？

# jquery - Jquery UI选项卡在选项卡更改时变慢，数据过多

> ID：14163349
> 
> 赞同：1
> 
> 时间：2013-01-04T19:10:16.180
> 
> 标签：jquery, performance, tabs, rendering, jquery-ui-tabs

我有一个用 C# 编写的页面，使用更新面板，在这个面板内有一些选项卡，其中包含来自 sql server 的绑定数据。

所有数据都在页面加载时绑定，然后在更改所选选项卡时，显示新表非常慢（在初始化页面加载时绑定，而不是在选项卡更改时绑定）。

有什么办法让它不那么慢吗？考虑到数据不再绑定，我认为时间浪费在渲染上。

# webhooks - Dwolla 交易 ids 关系

> ID：14163351
> 
> 赞同：0
> 
> 时间：2013-01-04T19:10:20.277
> 
> 标签：webhooks, dwolla

我刚刚完成了一笔交易。事务 Id 通过 webhook 报告为整数 XXXX132。当我查看接收方的 Dwolla 站点时，接收方的 id 是 XXXX131，而 .25c 费用的 id 是 XXXX130。

我可以断言对于任何交易，id 都是数字的，并且关系是：

费用 id：N 接收方 id：N + 1 发送方 id：N + 2

如果没有，我如何确定所有 id，因为 web 挂钩只报告其中一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T01:46:20.010

你是对的。我们按以下顺序创建交易：必要时 Dwolla 费用，必要时促进者费用，接收方，发送方。请小心假设 SenderId - 2 是 Dwolla 费用，因为对于交易 <= 10，这将是一些随机交易，而不是您的交易费用。

这可能会随时更改，因此我不会根据此信息做出重要决定。

# php - 如何检查今天的日期是否与PHP中的给定日期相同

> ID：14163353
> 
> 赞同：1
> 
> 时间：2013-01-04T19:10:40.993
> 
> 标签：php, javascript

我正在尝试检查 PHP 文件中的今天日期是否为 = 04/01/2013。我编写了以下 JS 脚本。但是我遇到了一些错误。不知道为什么。请帮忙

```
//This function will return if today is the date that we are looking for
function isToday($time) // midnight second
{
    alert('1');
    return (strtotime($time) === strtotime('today'));
 } 
```

使用以下方法进行测试：

```
if (isToday('2013-04-01 00:00:00.0') )
{
  alert('Yes true');
}
else
{
  alert("No false');
} 
```

请帮助如何比较今天的日期 = 04/01/2013。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T19:15:37.243

如果您想在 JavaScript 中进行日期/时间比较，最好检查一下之前提出的这个问题：

[Javascript 相当于 php 的 strtotime()？](https://stackoverflow.com/questions/4048204/javascript-equivalent-of-phps-strtotime)

这是 JavaScript 中的 strtotime 等价物。

这是一个简短的例子：

```
var d = new Date("2013-04-01");
if(d == new Date()) {
    alert('yes')
} else {
    alert('no')
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T19:16:23.840

在 PHP 中：

```
// Get the time
$serverDate = date('d/m/Y',time());

// Date to check against
$dateToCheck = '04/01/2013';

if($dateToCheck == $serverDate) {
  alert('Yes true');
} else {
  alert('No false');
} 
```

# html - 我无法弄清楚哪个选择器导致文本重新出现在 Chrome 的音频播放器中，即使它在 Firefox 中运行良好

> ID：14163355
> 
> 赞同：0
> 
> 时间：2013-01-04T19:10:47.267
> 
> 标签：html, css

好的，我用 soundmanager2 创建了一个播放器。现在它播放了，我进一步定制了它，但有一个问题我似乎无法解决。当用户将鼠标悬停在播放器上时，文本会下降，但一旦他们离开盒子并且音乐播放/暂停，文本就会再次上升，直到我将鼠标悬停在播放器上。我无法弄清楚是什么导致了chrome，因为它在firefox和ie中运行良好。

这里的页面，这样你就可以更好地理解我的意思：[http ://tinyurl.com/agvmue​​o](http://tinyurl.com/agvmueo)

现在，我不知道该怎么做，这真的让我很沮丧。

这里是 CSS，以防万一：

```
.ui360,
.sm2-360ui{position:relative}
.ui360,.sm2-360ui{min-width:50px;min-height:50px}
.sm2-360ui{width:50px;height:50px}
.ui360,.ui360 *{vertical-align:middle}
.sm2-360ui{position:relative;display:inline-block;float:left;display:inline}
.sm2-360ui.sm2_playing,.sm2-360ui.sm2_paused{z-index:10}
.ui360 a{float:left;display:inline;position:relative;color:#000;text-decoration:none;left:3px;top:18px;text-indent:50px}
.ui360 a.sm2_link{text-indent:0}
.ui360 a,.ui360 a:hover,.ui360 a:focus{padding:2px;margin-left:-2px;margin-top:-2px}
.ui360 a:hover,.ui360 a:focus{outline:none}
.ui360 .sm2-canvas{position:absolute;left:0;top:-15px}
.ui360 .sm2-timing{position:absolute;display:block;left:0;top:0;width:100%;height:100%;margin:0;font:11px "helvetica neue",helvetica,monaco,lucida,terminal,monospace;color:#666;text-align:center;line-height:50px}
.ui360 .sm2-timing.aligntweak{text-indent:1px}
.ui360 .sm2-cover{position:absolute;left:0;top:0;width:100%;height:100%;z-index:2;display:none;background-image:url(data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==)}
.ui360 .sm2-360btn{position:absolute;display:block;top:50%;left:50%;width:50px;height:50px;margin-left:-25px;margin-top:-25px;cursor:pointer;z-index:3}
.ui360 .sm2-360data{display:inline-block;font-family:helvetica}
.sm2-inline-block .ui360 .sm2-360btn,.ui360 .sm2-360ui.sm2_playing .sm2-360btn,.ui360 .sm2-360ui.sm2_paused .sm2-360btn{width:22px;height:22px;margin-left:-11px;margin-top:-11px}
.ui360 .sm2-360ui.sm2_playing .sm2-cover,.ui360 .sm2-360ui.sm2_paused .sm2-cover{display:block}
.ui360 .sm2-360ui.sm2_playing .sm2-timing{visibility:visible}
.ui360 .sm2-360ui.sm2_buffering .sm2-timing{visibility:hidden}
.ui360 .sm2-360ui .sm2-timing,.ui360 .sm2-360ui .sm2-360btn:hover + .sm2-timing,.ui360 .sm2-360ui.sm2_paused .sm2-timing{visibility:hidden}
.ui360 .sm2-360ui.sm2_dragging .sm2-timing,.ui360 .sm2-360ui.sm2_dragging .sm2-360btn:hover + .sm2-timing{/* paused + dragging */visibility:visible}
.ui360 .sm2-360ui.sm2_playing .sm2-360btn,.ui360 .sm2-360ui.sm2_dragging .sm2-360btn,.ui360 .sm2-360ui.sm2_dragging .sm2-360btn:hover,.ui360 .sm2-360ui.sm2_dragging .sm2-360btn-playing:hover{background:transparent;cursor:auto}
.ui360 .sm2-360ui.sm2_buffering .sm2-360btn,.ui360 .sm2-360ui.sm2_buffering .sm2-360btn:hover{background:transparent url(../images/icon_loading_dots.gif) no-repeat 50% 50%;opacity:0.5;visibility:visible}
.sm2-inline-list .ui360,.sm2-inline-block .ui360{position:relative;display:inline-block;float:left;_display:inline;margin-bottom:-15px}
.sm2-inline-list .ui360{margin-right:-2px}
.sm2-inline-block .ui360{margin-right:8px}
.sm2-inline-list .ui360 a{display:none}
ul.ui360playlist{list-style-type:none}
ul.ui360playlist,ul.ui360playlist li{margin:0;padding:0}
div.ui360 div.metadata{display:none}
div.ui360 a span.metadata,div.ui360 a span.metadata *{vertical-align:baseline}
.ui360-vis,.ui360-vis .sm2-360ui,.sm2-inline-list .ui360-vis{width:180px;height:150px}
.ui360-vis{position:relative;padding-top:1px;padding-bottom:1px;margin-bottom:-18px;padding-left:248px;margin-left:0;background-position:22.6% 50%}
.sm2-inline-list .ui360-vis{cursor:pointer}
.ui360-vis a{font:14px "helvetica neue",helvetica,monaco,lucida,terminal,monospace;white-space:nowrap;text-indent:0;top:46%}
.sm2-inline-list .ui360-vis a{line-height:256px;top:auto}
.ui360-vis .sm2-360ui{margin-left:-256px}
.ui360-vis .sm2-timing{font:bold 24px "helvetica neue",helvetica,monaco,lucida,terminal,monospace;color:#333;text-align:center;line-height:150px;text-indent:0}
.sm2-inline-list .ui360-vis,.sm2-inline-list .ui360-vis .sm2-360ui{margin-left:0}
.sm2-inline-list .ui360-vis{transition:all 1s;-moz-transition:all 1s;-webkit-transition:all 1s;-o-transition:all 1s;border-radius:15px 15px 15px 15px;-moz-border-radius:15px;-webkit-border-radius:15px 15px 15px 15px;-o-border-radius:15px 15px 15px 15px;margin:10px;border:2px solid #e6e6e6;padding-left:0;background-position:50% 50%;overflow:hidden;behavior:url(PIE.htc);position:relative}
.sm2-inline-list .ui360-vis .sm2-360ui{margin-left:-1px;margin-top:-1px}
.sm2-inline-list .ui360-vis:hover{border-radius:100px 100px 100px 100px;-moz-border-radius:100px;-webkit-border-radius:100px 100px 100px 100px;-o-border-radius:100px 100px 100px 100px;overflow:hidden;behavior:url(PIE.htc);position:relative}
.sm2-inline-list .ui360-vis a{position:absolute;display:inline;left:0;bottom:0;top:1px;width:100%;height:100%;height:256px;overflow:hidden;transition:all 1s;color:#333;font-size:16px;margin:0;padding:0;line-height:250px;line-height:250px;text-align:center;transition:all 1s;-moz-transition:all 1s;-webkit-transition:all 1s;-o-transition:all 1s}
.sm2-inline-list .ui360 a:hover{background-color:transparent;line-height:800px;line-height:800px}
.sm2-inline-list .ui360-vis:hover .sm2-360ui,.sm2-inline-list .ui360-vis a.sm2_link:hover,.sm2-inline-list .ui360-vis a.sm2_link:active,.sm2-inline-list .ui360-vis a.sm2_link:focus{}
.sm2-inline-list .ui360-vis:hover a.sm2_link{line-height:800px;line-height:800px}
.ui360-vis .sm2-360btn,.ui360-vis .sm2-360ui.sm2_paused .sm2-360btn,.ui360-vis .sm2-360ui.sm2_playing .sm2-360btn{width:48px;height:48px;margin-left:-24px;margin-top:-24px}
.ui360-vis,.ui360-vis .sm2-360ui.sm2_paused .sm2-360btn,.ui360-vis .sm2-360btn-default{background:transparent url(../images/360-button-vis-play.png) no-repeat 50% 50%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAABuVBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADv7++lpaXr6+uAgIDk5OQzMzPt7e1tbW3n5+dgYGDW1tZNTU10dHQ5OTnw8PCvr6/e3t6JiYlAQEDb29vo6OgrKyuqqqrq6uq4uLjf399AQEDGxsbq6uqAgIDY2Nje3t61tbXp6enU1NTu7u7r6+vl5eXt7e2fn5/n5+fDw8Ph4eHv7+/t7e3CwsLW1tbu7u7b29vw8PDm5uYgICDp6enY2Nji4uLo6Ojm5uakpKTS0tLPz8/h4eHw8PDs7Ozj4+Pa2trg4ODx8fHT09Pk5OTPz8/S0tLBwcGmpqawsLCOjo7h4eHn5+fo6OgAAADY2NjNzc3n5+cAAADd3d3Gxsbu7u7t7e0AAADX19fl5eXi4uLf39/Hx8fn5+fs7Ozg4ODR0dHX19e4uLjv7+/z8/P09PTy8vL19fXv7+/n5+fx8fH29vbs7Ozq6urm5ubo6Ojw8PDu7u7p6enr6+sAAAB/f3/Z2dn39/fh4eGOjo4ODg7t7e3l5eWWlpba2tqjo6NVVVXk5OTe3t65ubnMzMzExMTf39/GxsampqZiYmJNcTiZAAAAbXRSTlMAAQIEAwcFCAb5EdAImAXpB6oIUAoLCfsgZQ0EVrsGEr4ZYQgbsgpUYxikNd/aatQQli+R7rlUUdas6+8I+VaFruoOOV/S8Nq5sWL8UqmKUFsuHyTcrtsJm0z7C49V3NMKkdKXuk7S7oVeVSv7tAAEVwAAAu5JREFUeF6llmVz3DwURmNLsr1pmJmZmZmxzMwsybS8gXJfhl9cKXbHEK+TmZ4P/nDnOXN1NbalHD8CQ7QRGDmhnIQhBDYQnkhheRECSVIQQrLMHookAciUkHhBw1zVwuLShcJIpPDC0uJC1VxDQTaFx1srSvM3DUxU1TRVlWBjM7+0opUrQaupLSnrLK7ELIepwaCYmbiyuLOspJY38eeLykdGxzDhYQfKCmOjI+VFPkMQYF7NZD0l2DgFJrR+siYPegxBzBvqeoQxpgGw8qOuoTz3HGw9udUPCaFZIORhdS5blZOHjXWDBIdABusanb0S4MpqEw4XcNPqCrQFQQTN+XwPQ8CY5jcDUbB3KLdlg6hnQDZacqEgWA3a2rF6Jri9zWohwI6dXXK2QHZ3OqBw0qC7B6vnAPd0sxZMkHr7VNPD34YZgNrXK3EBSgPU9HJ4eIQDDDogQS4ow4QJxy4+MmKs4oYJZFhhggjQuMoKHoHzn3bsQx1HQOTClOkXLP6lviZTtjCjmn7B5g/izqszliBHTB+HDhl3PSJbwnxSS3n45HDkVLXkvCWg5Uws7eHgJ98/uKqxzLI9w3o6oXuwhd+OPNVEet0WtnU9/sWNJfz1u6cY1/VtLghQuRgk/PmBmT7hogJPXo3L8YQed3Nw8PWfuB89Eb8scUGUrl33DfH/N93BGeH6NUnkArh1O5FOuNETp2GR27cAE/iaJu6mz8HdCQnan+i96XQmdgaZ9PQ9+xMVoPJgNhrNhBKNzj5Q+E/AavH4SSz6OZRo7Mlj3oDDp7jyPJoKJfr8CpvAOUrQi6eppJaVZOrpCwTdP1cgr93UjKxoN9dka2KX8ealZtBADO3lG2+e7xRAd7Y0igOg2tYdBKD/CBIBenf/lYGJD2y8uv8OgaBDDkry3v57SlQXhL7f35OlwJOXGUBBl571JykmzCIE02T/s0tIASyf/R6Arr59fcM62G+8fnsVhdwFwq4Ov345Of/15wd0RYY81HHUTQAAAABJRU5ErkJggg==);background-image:url(../images/360-button-vis-play.png);_background:transparent url(../images/360-button-vis-play.gif) no-repeat 50% 50%;cursor:pointer}
.ui360-vis:hover .sm2-360btn,.ui360-vis .sm2-360btn-default:hover,.ui360-vis .sm2-360ui.sm2_paused .sm2-360btn:hover{background:transparent url(../images/360-button-vis-play-light.png) no-repeat 50% 50%;_background:transparent url(../images/360-button-vis-play.gif) no-repeat 50% 50%;cursor:pointer}
.ui360-vis .sm2-360ui.sm2_playing .sm2-360btn:hover,.ui360-vis .sm2-360btn-playing:hover{background:transparent url(../images/360-button-vis-pause-light.png) no-repeat 50% 50%;_background:transparent url(../images/360-button-vis-pause-light.gif) no-repeat 50% 50%;cursor:pointer}
.ui360-vis{background-position:21% 50%;_background:transparent url(../images/360-button-vis-play.gif) no-repeat 21% 50%}
.ui360-vis .sm2-360btn-default{_background:transparent url(../images/360-button-vis-play.gif) no-repeat 50% 50%}
.ui360-vis .sm2-360ui.sm2_dragging .sm2-360btn{visibility:hidden} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:35:52.807

It's not because of your css, it's because of your javascript. The text is supposed to do that because it disappears on hover, and it returns to it's default state when you are not hovering. And it happens in Firefox also.
What you have to do is `display: none` on the `<a href="#">Text</a>` when the user plays the audio, and `display: block` when it stops.

# javascript - 更改推荐人的值

> ID：14163356
> 
> 赞同：9
> 
> 时间：2013-01-04T19:10:51.323
> 
> 标签：javascript, http-referer

> **可能重复：**
> [如何在 Javascript 中手动设置 REFERER 标头？](https://stackoverflow.com/questions/9580575/how-to-manually-set-referer-header-in-javascript)

如何更改 的值`document.referrer`？

我试过这个

```
<body>
<center><a href="test.php" target="_self">self</a></center>
<script type="text/javascript">
    alert( document.referrer);
    document.referrer="test";
    alert( document.referrer);
</script>
</body> 
```

它不起作用，有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T20:39:17.567

不能直接修改referrer，但是可以使用[`history.pushState()`](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)/[`history.replaceState()`](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)将一个新的URL推送到浏览器历史记录中（前提是你要推送的URL同域），然后当你离开时，新的URL就是referrer .

请注意，使用操作历史记录`pushState`会添加一个新的历史记录条目，但正在查看的页面保持不变，用户必须按浏览器的“返回”按钮两次才能返回一个*实际*页面。

但是，如果您使用`replaceState`，从要隐藏引荐来源网址的页面返回将转到新设置的 URL，因此请确保无论您用什么替换它，都会以某种方式将用户重定向回原始页面，而不是将其发送到404 或完全不同的页面。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T19:20:07.733

该属性是只读的 - 这当然意味着您无法更改它。

你可以在这里读更多关于它的内容：

*   [https://developer.mozilla.org/en-US/docs/DOM/document.referrer#Notes](https://developer.mozilla.org/en-US/docs/DOM/document.referrer#Notes)
*   [http://msdn.microsoft.com/en-us/library/ie/ms534365(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms534365(v=vs.85).aspx)

# c# - 在 switch 语句中使用数据网格值

> ID：14163358
> 
> 赞同：0
> 
> 时间：2013-01-04T19:11:01.530
> 
> 标签：c#, datagrid, switch-statement

在我的程序中，我有一个 datagridview 表`c_tbl`，它从 SQL Server 获取数据并填充 datagridview。我有一个贯穿每一行的 for 循环。现在我有一个 switch 语句，它应该检查每一行并获取值，以便我可以比较它并在该行中添加其他数据。

这就是它的样子

```
for(int i=0; i<c_tbl.rows.count; i++){
      switch("this is where i need the argument that will check the row and column value)
      {
         case "string value that gets compared"
                  //add in values to column on same row. 
       }
} 
```

我最初有类似的东西

```
switch(c_tbl.Column[0][i]) 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:20:01.617

您可以像这样循环遍历[DataTable](http://msdn.microsoft.com/en-us/library/system.data.datatable%28v=VS.100%29.aspx)：

```
foreach (DataRow row in c_tbl.Rows)
{
    foreach (DataColumn col in c_tbl.Columns)
    {
        switch (row[col].ToString())
        {
        }
    }
} 
```

# php - 运行简单的 PHP 文件或调用单个 PHP 函数（与简单的 PHP 文件相同）哪个更好？

> ID：14163360
> 
> 赞同：-2
> 
> 时间：2013-01-04T19:11:06.360
> 
> 标签：php

我有 2 个 PHP 文件（两者的输出相同）

第一个文件代码

```
<?php
function sampleCode()
{
//code here
}
//end function
sampleCode();
?> 
```

第二个文件代码

```
<?php
//code here
?> 
```

当我不需要召回或包含时，哪个更好和更少使用 CPU？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T19:16:20.617

如果这真的是唯一的区别，那么理论上版本一应该会稍微慢一些，因为您还有两个额外的任务要执行：设置函数并执行它。

但是在现代系统上，这种差异通常很小，与*实际*代码通常产生的负载相比，它是无关紧要的。所以这更多是从架构的角度来回答的问题，而不是基于性能比较。

# python - 如何在 Python 中简单地输入隐藏词

> ID：14163361
> 
> 赞同：-3
> 
> 时间：2013-01-04T19:11:13.437
> 
> 标签：python, string, hide

我是初学者，我将用 Python 创建一个简单的 Hangman 游戏。我希望玩家输入一个单词，但不要在 Python Shell 上显示并且能够将其作为变量进行操作。

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T19:12:07.407

我认为，[getpass 模块](http://docs.python.org/2/library/getpass.html)可能是您正在寻找的。

# php - 在 $_POST 中使用变量循环似乎不起作用

> ID：14163365
> 
> 赞同：0
> 
> 时间：2013-01-04T19:11:24.967
> 
> 标签：php, forms, loops, post, snmp

我正在编写一个小脚本来对 APC 电源条进行电源控制。我的脚本运行良好，但我将它扩展到一个有 24 个插座的单元，我不希望脚本为每个端口关闭、重新启动和打开电源部分，所以我决定使用循环如下：

```
 for ($Outlet = 1; $Outlet <= 24; $Outlet++) {
    //Power On
    if(isset($_POST['APCPowerOnA$Outlet'])) {
         $shell_command = "snmpset -v 1 -c $community $apc01_ip $mib.$Outlet i 1"; 
         $return=array();
         exec($shell_command, $return);
     }
    //Power Off
    if(isset($_POST['APCPowerOffA$Outlet'])) {
         $shell_command = "snmpset -v 1 -c $community $apc01_ip $mib.$Outlet i 2"; 
         $return=array();
         exec($shell_command, $return);
     }
    //Reboot
    if(isset($_POST['APCPowerRebootA$Outlet'])) {
         $shell_command = "snmpset -v 1 -c $community $apc01_ip $mib.$Outlet i 3"; 
         $return=array();
         exec($shell_command, $return);
     } 
```

我将此文件包含在另一个文件中，该文件的每个端口具有以下代码：

```
 <form method="post" action="[XXX]">
   <input type="submit" name="APCPowerOnA1" value="Power On" id="APCPowerOnA1" />
   <input type="submit" name="APCPowerOffA1" value="Power Off" id="APCPowerOffA1" />
   <input type="submit" name="APCPowerRebootA1" value="Reboot Port" id="APCPowerRebootA1" />
   </form> 
```

注意 action="[XXX]" 只是这个论坛的一个占位符，不要在公共论坛上提供 url :)

每个端口使用其中一个，每次将 ID 和名称增加 1（此示例为端口 1）。

当我运行脚本时，将变量： $Outlet 替换为 say 1 端口响应命令，但是当我尝试循环它时，似乎没有任何效果。当我对“APCPowerOnA$Outlet”进行回显时，我得到 APCPowerOn1、APCPowerOn2 ... APCPowerOn24，那么为什么 POST 不起作用？我错过了一些明显的东西？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T19:13:48.697

您需要双引号才能在字符串中插入变量：

```
$_POST['APCPowerOnA$Outlet'] =>  $_POST["APCPowerOnA$Outlet"] 
```

或者，您可以使用字符串连接：

```
$_POST['APCPowerOnA' . $Outlet] 
```

如果您不执行其中一项操作，那么您实际上是在访问 index `APCPowerOnA$Outlet`。

# django - Django 模板错误：TemplateDoesNotExist at /homepage/index.html

> ID：14163367
> 
> 赞同：1
> 
> 时间：2013-01-04T19:11:39.483
> 
> 标签：django

我正在尝试让 Django 开发服务器加载具有以下设置的模板，但它抛出了错误

```
TemplateDoesNotExist at /

homepage/index.html 
```

下面是我编辑的文件，试图让它工作

blog/blog/settings.py - （删掉与这个问题有关的部分）

```
import os

TEMPLATE_DIRS = (
os.path.join( os.path.dirname(__file__), 'templates' ),
) 
```

博客/应用程序/主页/views.py

```
from django.shortcuts import render_to_response

def index(request):
    return render_to_response('homepage/index.html') 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T19:50:36.117

默认情况下，Django 使用两个模板加载器来定位模板：

```
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
) 
```

首先，文件系统加载器检查 TEMPLATE_DIRS 中的所有目录以查看它是否可以找到命名模板。如果失败，app_directories 加载器将在当前应用程序的 /templates/ 目录中查找命名模板。通过这种方式，您可以使用可轻松覆盖的可重用应用程序提供默认模板。

在您的情况下，Django 将在此处查找模板：

```
blog/blog/templates/homepage/index.html
blog/apps/homepage/templates/homepage/index.html 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T19:23:43.107

你给你的`TEMPLATE_DIRS`. 该`settings.py`文件`blog`在 project的 package 中`blog`，但您的`templates`文件夹在`blog`project 中，而不是在`blog`package 中。您必须提供项目的绝对目录并加入`templates`它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-29T22:43:50.970

在 django 1.10 中，导航到父项目目录中的 path/to/settings.py，查找：

`TEMPLATES = [.....]``DIR:`并在选项中指定 path/to/project_directory

例如（在我自己的情况下）：

```
TEMPLATES = [
{
    'BACKEND': 'django.template.backends.django.DjangoTemplates',
    'DIRS': [
        '/xampp/htdocs/advisory_portal'
    ],
    'APP_DIRS': True,
    'OPTIONS': {
        'context_processors': [
            'django.template.context_processors.debug',
            'django.template.context_processors.request',
            'django.contrib.auth.context_processors.auth',
            'django.contrib.messages.context_processors.messages',
        ],
    },
},
] 
```

# xml - 在 Qt 中包含 XML 库

> ID：14163370
> 
> 赞同：2
> 
> 时间：2013-01-04T19:11:57.203
> 
> 标签：xml, qt, include

我有一些问题，包括 Qt 中的几个库：

```
#include <QXmlStreamWriter> 
```

这些位于我班级的顶部，Qt Core 包含在 Pro 文件中（我正在使用 Qt 创建器），只是我之前做过数百次的完全正常的包含（包括这个）。

这个小镇即使我在我的班级中没有声明任何 QXmlStreamWriter 的内容，编译器也会在我编译它时抛出这个错误：（缩短了完整路径）

```
Qt\4.8.1\mingw\include\QtCore\qxmlstream.h:471: error: 'void QXmlStreamWriter::writeStartElement(const QString&, const QString&)' cannot be overloaded 
```

错误出现在“包含”行本身。目前，班上的其他人绝对没有任何东西可以用它做任何事情。

这是它包含的类：

```
#include "charactersheetlayout.h"
#include "ui_charactersheetlayout.h"
#include <QDir>
#include <QDebug>
#include <QXmlStreamWriter> //This is where the compiler complains. 

characterSheetLayout::characterSheetLayout(QWidget *parent) :
    QWidget(parent),
    ui(new Ui::characterSheetLayout)
{
    ui->setupUi(this);
//Just checking that a folder exists, nothing important.
    if(!QDir("csTemplates").exists())
    {
        this->createDefaultTemplate();
    }
} 
```

头文件没有任何与 QXmlStreamWriter 相关的内容。

感谢我得到的任何帮助:-)

编辑：根据要求提供头文件，注意每个函数和变量目前实际上不包含任何代码。

```
#ifndef CHARACTERSHEETLAYOUT_H
#define CHARACTERSHEETLAYOUT_H

#include <QWidget>

namespace Ui {
class characterSheetLayout;
}

class characterSheetLayout : public QWidget
{
    Q_OBJECT

public:
    explicit characterSheetLayout(QWidget *parent = 0);
    ~characterSheetLayout();
    int validateSheet();
    void promptError(QString error);
    void standard3_5();

private:
    Ui::characterSheetLayout *ui;
    void createDefaultTemplate();
};

#endif // CHARACTERSHEETLAYOUT_H 
```

轮廓：

```
QT       += core gui
QT       += webkit
QT       += network

TARGET = dndManager
TEMPLATE = app
CONFIG += release

SOURCES += main.cpp\
        mainwindow.cpp \
    startscreen.cpp \
    createadventure.cpp \
    charactersheetlayout.cpp \
    gameui.cpp \
    character.cpp \
    characterscreen.cpp \
    gamescreen.cpp \
    settings.cpp \
    wikidisplay.cpp \
    admincharacterscreen.cpp \
    server.cpp \
    participant.cpp \
    connectionmanager.cpp \
    client.cpp

HEADERS  += mainwindow.h \
    startscreen.h \
    createadventure.h \
    charactersheetlayout.h \
    gameui.h \
    character.h \
    characterscreen.h \
    gamescreen.h \
    settings.h \
    wikidisplay.h \
    admincharacterscreen.h \
    server.h \
    participant.h \
    connectionmanager.h \
    client.h

FORMS    += mainwindow.ui \
    startscreen.ui \
    createadventure.ui \
    charactersheetlayout.ui \
    gameui.ui \
    characterscreen.ui \
    gamescreen.ui \
    settings.ui \
    wikidisplay.ui \
    admincharacterscreen.ui 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T01:19:24.833

您需要在文件中添加**XML 模块**`.pro`：

```
QT += xml 
```

# objective-c - 随机数选择器始终仅在应用程序首次启动时选择相同的数字

> ID：14163371
> 
> 赞同：0
> 
> 时间：2013-01-04T19:11:57.273
> 
> 标签：objective-c, ios, cocoa-touch

我使用生成一个随机数字符串

```
int rNumber = rand() %100000000 + 1;
_certificateReferenceField.text = [[NSString alloc] initWithFormat: @"C/R %d", rNumber]; 
```

当应用程序首次启动或来自后台时，它最初总是选择相同的数字`c/R16808`？再按一次没问题，一切正常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T19:15:20.880

rand() 不是一个好的随机数生成器，这样做

```
NSInteger rNumber = arc4random() % 100000000 + 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T19:15:37.917

您需要使用`srand`. 一个常见的用途是：

```
srand(time(NULL)); 
```

在任何调用之前调用它`rand`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T19:24:21.983

您可以使用

```
srandom(time(NULL)); 
```

随机化您的随机数生成。

然后用于`random()`生成随机数。

# java - 方法修改方法超出范围

> ID：14163372
> 
> 赞同：2
> 
> 时间：2013-01-04T19:11:59.120
> 
> 标签：java, arrays, theory

我今天有一个非常有趣的问题。我正在尝试修改一个数组，但方法修改了另一个甚至没有调用的数组。

a) 造成麻烦的部分方法

```
public static void place2(String output, int position,furniture furniture_array[], char room_grid[][]) {

    int i=0;
    int j=0;

    furniture_array[position].setXY(i, j);
    char grid1[][] = room_grid;
    char grid2[][] = room_grid;
    char grid3[][] = room_grid;
    char grid4[][] = room_grid;
    pasteToArray(i, j, grid1, furniture_array[position]);
} 
```

b）粘贴到数组

这是一个非常简单的方法，它接收 input_array 并且在这个数组中它将过去数组，它是一个对象值。

```
public static char[][] pasteToArray(
    int x, int y, char input_array[][], furniture furniture_to_be_placed) {

    char[][] result=input_array;

    for (int i = 0; i <= furniture_to_be_placed.getSize(); i++) {
        for (int j = 0; j <= furniture_to_be_placed.getSize(); j++) {
            result[x + i][y + j] = furniture_to_be_placed.furn_grid[i][j];
        }
    }
    return result;
} 
```

我的问题是什么？

1.  为什么输入 A、B 和结果 C 的方法会修改 D？（相对名称）

我自己已经做了什么来解决它： -

1.  调试代码 - 找到导致问题的方法
2.  25分钟无助的哭泣包括咒骂
3.  检查全局变量
4.  将所有方法输入重命名为相对中性名称

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T19:13:50.637

grid1、grid2、grid3 和 grid4 都是对同一个二维数组的引用。改变一个值将改变所有值。

这段代码...

```
char grid1[][] = room_grid;
char grid2[][] = room_grid;
char grid3[][] = room_grid;
char grid4[][] = room_grid; 
```

不会创建 4 个 room_grid 副本，而是创建 4 个对同一内存块的不同引用。

# mysql - Rails MySQL 连接太多

> ID：14163378
> 
> 赞同：12
> 
> 时间：2013-01-04T19:12:19.623
> 
> 标签：mysql, ruby-on-rails, ruby

我有一个 Rails 2.3 应用程序保持打开太多 MySQL 连接。不到一天（大约 400rpm）后，一个进程与我们使用的两台 mysql 服务器建立了 83 个 ESTABLISHED 连接。

我们使用的是 mysql2 gem (0.2.18)，mysql 客户端是：`mysql Ver 14.12 Distrib 5.0.77, for redhat-linux-gnu (i686) using readline 5.1`.

如何解决这些泄漏发生的位置？在我们的测试中，我们永远无法泄漏连接，它仅在生产中。

在 MySQL 中，我们可以运行`show processlist;`查看打开的连接。在应用服务器上，我们可以计算每个 pid 的连接数`sudo netstat -ntp | grep 3306 | grep ESTABLISHED | awk '{print $7}' | sort | uniq -c | sort -n`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T21:38:33.373

我通过将“wait_timeout：300”添加到我们的 database.yml 来解决此问题。虽然这确实关闭了未使用的 mysql 连接，但它并没有解释它们的来源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T21:52:55.657

一个随机的想法：fork mysql2 gem，在 Mysql2::Client#initialize 中添加一些调试，然后正常运行您的应用程序。您可以在客户端初始化时打印几行堆栈，并追踪导致泄漏的原因。

* * *

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-18T05:59:49.280

值得一提的是，我们的登台服务器上也出现了同样的问题——它达到了与 mysql 的最大连接数。我发现直接从命令行运行服务而不是使用启动脚本以某种方式解决了这个问题。

我还没有找到导致问题的启动脚本中的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-30T10:42:29.770

我收到了**太多连接**错误，因为我使用建立连接来访问多个模型中的其他数据库。

我有这些模型

```
class InternetReference < ActiveRecord::Base
  establish_connection :db_webserver
end

class InternetEmployee < ActiveRecord::Base
  establish_connection :db_webserver
end 
```

解决方案是在一个抽象模型中打开连接，并从这个模型继承：

```
class AppsWebserver < ActiveRecord::Base
  self.abstract_class = true
  establish_connection :apps_webserver
end

class InternetReference < AppsWebserver
end

class InternetEmployee < AppsWebserver
end 
```

现在，Rails 可以正确处理连接。

# javascript - 选中复选框时将价格添加到总价

> ID：14163381
> 
> 赞同：1
> 
> 时间：2013-01-04T19:12:30.647
> 
> 标签：javascript, asp.net

I would like to add a $5.00 charge whenever the txtBwayEDUGift checkbox is selected. 我目前拥有的 javascript 代码是在未选中复选框时减少金额，但在选中时不收取费用。如果需要，我可以提供附加代码。

这是我的 aspx 页面中的输入类型：

```
<input type="checkbox" name="txtBwayEDUGift" id="txtBwayEDUGift" onchange="checkboxAdd(this);" checked="checked" /> 
```

这是我的javascript：

```
{
    var divPrevAmt;
    if (type == 0)
    {
        divPrevAmt = document.getElementById("divBwayGiftPrevAmt");
    }
    else if (type == 1)
    {
        divPrevAmt = document.getElementById("divBwayEDUGiftPrevPmt");
    }
    var txtAmt = document.getElementById(obj);
    var amt = txtAmt.value;
    amt = amt.toString().replace("$","");
    amt = amt.replace(",","");
    var prevAmt = divPrevAmt.innerHTML;
    try
    {
        amt = amt * 1;
    }
    catch(err)
    {
        txtAmt.value = "";
        return;
    }
    if (amt >= 0) //get the previous amount if any
    {
        if (type == 0)
        {
           if (prevAmt.toString().length > 0)
           {
                prevAmt = prevAmt * 1;
           }
           else
           {
                prevAmt = 0;
           }
        }
        else if (type == 1)
        {
           if (prevAmt.toString().length > 0)
           {
                prevAmt = prevAmt * 1;
           }
           else
           {
                prevAmt = 0;
           }
        }
    //now update the master total
    var total = document.getElementById("txtTotal");
    var dTotal = total.value.toString().replace("$","");
    dTotal = dTotal.replace(",","");
    dTotal = dTotal * 1;
    var newTotal = dTotal - prevAmt;
    newTotal = newTotal + amt;
    divPrevAmt.innerHTML = amt.toString();
    newTotal = addCommas(newTotal);
    amt = addCommas(amt);
    txtAmt.value = "$" + amt;
    total.value = "$" + newTotal;
   }
   else
   {
        txtAmt.value = "";
        return;
   }
}
function disable()
{
    var txtTotal = document.getElementById("txtTotal");
    var txt = txtTotal.value;
    txtTotal.value = txt;
    var BwayGift = document.getElementById("txtBwayGift");
    BwayGift.focus();
}
function addCommas(nStr)
{
    nStr += '';
    x = nStr.split('.');
    x1 = x[0];
    x2 = x.length > 1 ? '.' + x[1] : '';
    var rgx = /(\d+)(\d{3})/;
    while (rgx.test(x1)) {
        x1 = x1.replace(rgx, '$1' + ',' + '$2');
    }
    var newTotal = x1 + x2;
    if (newTotal.toString().indexOf(".") != -1)
    {
        newTotal = newTotal.substring(0,newTotal.indexOf(".") + 3);
    }
    return newTotal;
}
function checkChanged()
{
    var cb = document.getElementById("cbOperaGala");
    if (cb.checked == true)
    {
        var tableRow = document.getElementById("trCheckbox");
        tableRow.style.backgroundImage = "url('images/otTableRowSelect.jpg')";
    }
    else if (cb.checked == false)
    {
        var tableRow = document.getElementById("trCheckbox");
        tableRow.style.backgroundImage = "";
    }
}
function alertIf()
{
    var i = 0;
    for (i=5;i<=10;i++)
    {
        try{
        var subtotal2 = document.getElementById("txtSubTotal" + i);
        var dSubtotal2 = subtotal2.value;
        dSubtotal2 = dSubtotal2.replace("$","");
        dSubtotal2 = dSubtotal2 * 1;}
        catch (Error){dSubtotal2 = 0}
        if (dSubtotal2 > 0)
        {
            alert("You have selected the I want it all package, \n however you have also selected individual tickets to the same events. \n If you meant to do this, please disregard this message.");
            break;
        }
    }
}

function disableEnterKey(e)
{
 var key;      
 if(window.event)
      key = window.event.keyCode; //IE
 else
      key = e.which; //firefox      

return (key != 13);
}

    //Add $5.00 donation to cart

    function checkboxAdd(ctl) {
    if (ctl.checked == true) {
    //            alert("adding $5");
        calculateTotal(5, "A");
    } else {
    //            alert("deducting $5");
        calculateTotal( 5, "S");
    }
} 

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:49:08.213

我不明白这个场景的背景。当用户单击复选框时，您是否向服务器发出 HTTP 请求？或者这是一个简单的表单 POST 页面？在`calculateTotal()`做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T15:35:12.603

我想到了。所以我所拥有的功能很好。

```
//Add $5.00 donation to cart
function checkboxAdd(txtBwayEDUGift) {
    if (txtBwayEDUGift.checked == true) {
//            alert("adding $5");
        calculateTotal(5, "A");
    } else {
//            alert("deducting $5");
        calculateTotal(5, "S");
    }
} 
```

但我需要添加一个加载功能：

```
function load() {
    calculateTotal(5, "A");
}

<body onload="load()"> 
```

除了添加对我的 c# 页面的引用之外：

```
if (txtBwayEDUGift.Checked)
        {
            addDonations(5.00, 93);
        } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-04T19:18:50.730

你可以使用 jQuery :)

```
$(txtBwayEDUGift).change(calculateTotal(5, "S")); 
```

# javascript - 括号中的构造函数

> ID：14163382
> 
> 赞同：5
> 
> 时间：2013-01-04T19:12:32.010
> 
> 标签：javascript

我试图了解在以下返回语句中 Date 构造函数周围额外括号的使用：

```
if (!Date.now) {
  Date.now = function now() {
    return +(new Date); // <-- ???
  };
} 
```

[资源](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/now)

是否存在不能省略这些括号的极端情况？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-17T01:19:53.200

括号不是必需的。

```
return +new Date; 
```

也可以。需要括号来帮助理解表达式，但它们也可以更改评估的默认优先顺序。此顺序在 ECMAScript 的词汇语法部分中定义。

[http://www.ecma-international.org/ecma-262/5.1/#sec-A.1](http://www.ecma-international.org/ecma-262/5.1/#sec-A.1)

# c# - 使用 linq 和实体框架获取按日期排序的朋友的帖子

> ID：14163383
> 
> 赞同：0
> 
> 时间：2013-01-04T19:12:36.140
> 
> 标签：c#, linq, entity-framework

我有一个应用程序，其中有一个`aspnet_Users`存储我的用户的`FriendMapping`表，一个包含所有用户朋友的表（朋友被定义为站点上的其他用户），最后我有一个`Posts`包含用户写的帖子的表。

我正在尝试进行 linq 查询以获取所有用户朋友的帖子：

```
public static IQueryable<FriendMapping>(this MyEntites context, Guid userId){
    return (from friendMapping in context.FriendMapping
            .Include('aspnet_Users.Posts')
            select friendMapping).Where(x=>x.UserId == userId);
} 
```

这将返回所有用户的朋友并包括他们的帖子。我如何做到这一点，以便我可以获取我所有朋友的帖子和 OrderByDate 的列表。我也想使用`.Take()`并`.Skip()`能够分段获得结果。有人有想法么？

如果我遍历结果并编译了一个列表，那么该查询是否必须首先执行导致不必要的数据检索？`foreach`也许是一种在构建帖子列表并从那里排序/过滤之后如何避免使用循环的方法

# performance - Cognos 属性的含义 用于参数信息

> ID：14163384
> 
> 赞同：1
> 
> 时间：2013-01-04T19:12:43.850
> 
> 标签：performance, cognos

我正在尝试了解 cognos 报告工作室中的“用于参数信息”属性。在这个链接：[http](http://www-01.ibm.com/support/docview.wss?uid=swg21341901) ://www-01.ibm.com/support/docview.wss?uid=swg21341901 什么意思`'set to Yes are checked for parameter information first'`

这是否意味着它将检查是否提供了参数值？但是它无论如何都会检查所有强制参数。通过将此属性设置为“否”，我们已经看到了一些性能改进。为什么将其设置为“否”会提高性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:55:10.283

复杂报表的参数解析可能非常昂贵。Cognos 必须在您的报告/仪表板界面上找出在某些查询可以运行之前需要哪些提示等...当您有参数到参数依赖项或过滤器时，这会变得更加复杂。特别是当您有交互式报告时，您可以在其中进行参数控制与您的报表创建仪表板交互效果的同一页面。

您可以将 Use Parameter For Info 视为一个很好的提示，可帮助 Cognos 了解哪些查询专门用于提供参数信息以帮助优化报告执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T08:36:31.240

该属性位于查询级别。
通常，最好的做法是进行针对提示值的小查询。
当 Cognos 加载报告时，它会搜索可以找到参数值的位置。
如果将使用参数信息的小查询设置为是，它将首先搜索这些查询，这可以提高性能，尤其是在内部有很多查询的大报表上。
可以在此处找到更多信息：

[参数信息的用途](http://www-01.ibm.com/support/docview.wss?uid=swg21341901)
和此处：
[Cognos 8.3 Prompt Query Hint Settings](http://businessintelligence.ittoolbox.com/groups/technical-functional/cognos8-l/cognos-83-prompt-query-hint-settings-3336788)

# coding-style - Modelica 风格指南

> ID：14163386
> 
> 赞同：9
> 
> 时间：2013-01-04T19:12:51.867
> 
> 标签：coding-style, modelica

对于许多编程语言，都有可用的样式指南，例如Python 的[PEP8](https://www.python.org/dev/peps/pep-0008/)、此[Matlab 样式指南](http://www.datatool.com/downloads/matlab_style_guidelines.pdf)或[Google 的样式指南](http://code.google.com/p/google-styleguide/)。对于 Modelica，我找到了[用户指南中描述的约定](https://build.openmodelica.org/Documentation/Modelica.UsersGuide.Conventions.html)，但是有更全面的可用吗？并且，理想情况下，一个有助于重新格式化、缩进等的工具？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T14:44:48.870

Modelica 用户指南中的指南是我唯一知道的。这个话题在设计会议上已经讨论过好几次了，[我写了一篇论文](https://www.modelica.org/events/Conference2003/papers/h31_parser_Tiller.pdf)讨论了这个话题，但并没有真正提出具体的指导方针。

部分问题在于，虽然 Modelica 协会可能有他们的指导方针（如你所见），但它们并不代表任何可能不同的特定商业或行业指导方针。换句话说，我可以设想有许多不同的指导方针，这些指导方针是针对特定类型的模型或特定行业惯例量身定制的。但是 Modelica 是我唯一特别了解的（尽管如果使用的大型组织确实有自己的正式风格指南，我不会感到惊讶）。

# c# - 在报表查看器（rdlc）中，如何通过表达式设置第一列的背景颜色

> ID：14163388
> 
> 赞同：1
> 
> 时间：2013-01-04T19:12:57.547
> 
> 标签：c#, asp.net, reportviewer2008

我为整行设置了背景颜色，但是如果颜色设置为表达式，则它不适用于第一列。如果我只是将它设置为一种颜色，即红色，它就可以正常工作。如果我在左侧插入一个虚拟列，它就可以正常工作（但虚拟列不起作用，大概是因为它是第一个？？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:31:53.197

仍然不知道为什么会这样，添加一个虚拟的第一列是我目前的解决方案。

# c# - 您的 SQL 语句的某些部分嵌套得太深。重写查询或将其分解为更小的查询

> ID：14163390
> 
> 赞同：16
> 
> 时间：2013-01-04T19:12:58.687
> 
> 标签：c#, asp.net-mvc, entity-framework

我的控制器中有调用以下方法的操作：

```
public IQueryable<AaaUserContactInfo> getcontactinfo(long[] id)
{
    var organizationsiteids = from accountsitemapping in entities.AccountSiteMappings
                            where id.Any(accountid => accountsitemapping.ACCOUNTID == accountid)
                            select accountsitemapping.SITEID;

    var usersdepts = from userdept in entities.UserDepartments
                    join deptdefinition in entities.DepartmentDefinitions on userdept.DEPTID equals deptdefinition.DEPTID
                    where organizationsiteids.Any(accountid => deptdefinition.SITEID == accountid)
                    select userdept;

    var contactsinfos = from userdept in usersdepts
                    join contactinfo in entities.AaaUserContactInfoes on userdept.USERID equals contactinfo.USER_ID
                    select contactinfo;

    return  contactsinfos;
} 
```

但是当我运行应用程序并导航到操作方法时，将在视图级别引发以下错误：-

```
System.Data.EntityCommandExecutionException was unhandled by user code
  HResult=-2146232004
  Message=An error occurred while executing the command definition. See the inner exception for details.
  Source=System.Data.Entity
  StackTrace:
       at System.Data.EntityClient.EntityCommandDefinition.ExecuteStoreCommands(EntityCommand entityCommand, CommandBehavior behavior)
       at System.Data.Objects.Internal.ObjectQueryExecutionPlan.Execute[TResultType](ObjectContext context, ObjectParameterCollection parameterValues)
       at System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)
       at System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator()
       at System.Data.Entity.Internal.Linq.InternalQuery`1.GetEnumerator()
       at System.Data.Entity.Infrastructure.DbQuery`1.System.Collections.Generic.IEnumerable<TResult>.GetEnumerator()
       at System.Linq.Enumerable.Count[TSource](IEnumerable`1 source)
       at ASP._Page_Views_Home_CustomersDetails_cshtml.Execute() in c:\Users\Administrator\Desktop\new app DEMO2\MvcApplication4 - LATEST -\MvcApplication4\Views\Home\CustomersDetails.cshtml:line 6
       at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
       at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
       at System.Web.WebPages.StartPage.RunPage()
       at System.Web.WebPages.StartPage.ExecutePageHierarchy()
       at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
       at System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance)
       at System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer)
       at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
       at System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
       at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
       at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
  InnerException: System.Data.SqlClient.SqlException
       HResult=-2146232060
       Message=Some part of your SQL statement is nested too deeply. Rewrite the query or break it up into smaller queries.
       Source=.Net SqlClient Data Provider
       ErrorCode=-2146232060
       Class=15
       LineNumber=105
       Number=191
       Procedure=""
       StackTrace:
            at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
            at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
            at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
            at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
            at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
            at System.Data.SqlClient.SqlDataReader.get_MetaData()
            at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
            at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite)
            at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite)
            at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
            at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
            at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
            at System.Data.Common.DbCommand.ExecuteReader(CommandBehavior behavior)
            at System.Data.EntityClient.EntityCommandDefinition.ExecuteStoreCommands(EntityCommand entityCommand, CommandBehavior behavior)
       InnerException: 
```

那么是什么导致了这个错误呢？？

更新：- ![在此处输入图像描述](../Images/d0ed764a87022d159301b08418ab4bc0.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-04T19:19:08.683

LINQ 的大多数命令都采用延迟执行。它会一直等到您实际调用数据，然后再将查询发送到该数据库。在这里，看起来所有这些查询都被推迟到稍后，当您尝试从contactInfos 中获取某些内容时。

我会尝试让它执行，比如在某个地方抛出一个 .ToList() ，以尝试减少 SQL 中否则会发生的嵌套。

编辑：由于根据评论，您似乎在第一次查询时遇到了错误，您能否尝试并让它说出来`where id.Contains(accountsitemapping.ACCOUNTID)`？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-22T14:19:28.670

为了将来参考，您可以使用以下命令记录生成的 SQL：

```
var db = new DbContext();
db.Database.Log = Console.Write; 
```

这将使您能够确定哪个部分嵌套得更深。从那里，您可能必须重新编写查询以在第二步中加载昂贵的计算。或者考虑将其编写为存储过程。

# asp.net - 带前导零的 asp.net 验证表达式军事时间

> ID：14163398
> 
> 赞同：3
> 
> 时间：2013-01-04T19:13:39.027
> 
> 标签：asp.net, regex, validation

我正在使用这个表达式`^(([0-9])|([0-1][0-9])|([2][0-3])):(([0-9])|([0-5][0-9]))$`，它非常适合用冒号验证军事时间......我如何修改它以使其在 10 次以下时需要前导零？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:18:12.040

Git 摆脱了`([0-9])|`朝开始的表达式。那只允许一位数字。之后的东西| 需要两位数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T19:16:38.070

只需删除第一个交替：

```
^(([0-1][0-9])|([2][0-3])):(([0-9])|([0-5][0-9]))$ 
```

它是一个允许个位数小时数的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-11T16:05:18.510

```
^(([0-1][0-9])|([2][0-3])):(([0-5][0-9]))$ 
```

此版本要求小时和分钟均为 2 位数字。

# python - 使用 Python strptime 将日期字符串列表转换为日期时间非常慢

> ID：14163399
> 
> 赞同：15
> 
> 时间：2013-01-04T19:13:40.320
> 
> 标签：python, numpy

我有包含表示 ISO 格式日期的字符串列表的数据文件。目前，我正在阅读它们：

```
mydates = [ datetime.datetime.strptime(timdata[x], "%Y-%m-%dT%H:%M:%S") for x in range(len(timedata)) ] 
```

这看起来很简单，但是在处理约 25000 个日期的大型列表时速度非常慢 -> 每个转换列表大约 0.34 秒。由于我有数千个这样的列表，我正在寻找一种更快的方法。但是，我还没有找到一个。dateutil 解析器的性能更差......

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-04T19:23:01.533

这是一种将速度提高 3 倍的方法。

原始版本：

```
In [23]: %timeit datetime.datetime.strptime("2013-01-01T01:23:45", "%Y-%m-%dT%H:%M:%S")
10000 loops, best of 3: 21.8 us per loop 
```

更快的版本：

```
In [24]: p = re.compile('[-T:]')

In [26]: %timeit datetime.datetime(*map(int, p.split("2013-01-01T01:23:45")))
100000 loops, best of 3: 7.28 us per loop 
```

这显然远没有`strptime()`.

**编辑：**使用单个正则表达式来提取日期组件稍微快一点：

```
In [48]: pp = re.compile(r'(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})')

In [49]: %timeit datetime.datetime(*map(int, pp.match("2013-01-01T01:23:45").groups()))
100000 loops, best of 3: 6.92 us per loop 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-04T23:48:16.677

索引/切片似乎比@NPE 使用的正则表达式更快：

```
In [47]: def with_indexing(dstr):                              
   ....:     return datetime.datetime(*map(int, [dstr[:4], dstr[5:7], dstr[8:10],
   ....:                               dstr[11:13], dstr[14:16], dstr[17:]])) 

In [48]: p = re.compile('[-T:]')

In [49]: def with_regex(dt_str):
   ....:     return datetime.datetime(*map(int, p.split(dt_str)))

In [50]: %timeit with_regex(dstr)
100000 loops, best of 3: 3.84 us per loop

In [51]: %timeit with_indexing(dstr)
100000 loops, best of 3: 2.98 us per loop 
```

我认为如果您使用文件解析器[`numpy.genfromtxt`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.genfromtxt.html)，`converters`参数和快速字符串解析方法，您可以在不到半秒的时间内读取和解析整个文件。

我使用以下函数创建了一个包含大约 25000 行、ISO 日期字符串作为索引和 10 个数据列的示例文件：

```
import numpy as np
import pandas as pd

def create_data():
    # create dates
    dates = pd.date_range('2010-01-01T00:30', '2013-01-04T23:30', freq='H')
    # convert to iso
    iso_dates = dates.map(lambda x: x.strftime('%Y-%m-%dT%H:%M:%S'))
    # create data
    data = pd.DataFrame(np.random.random((iso_dates.size, 10)) * 100,
                        index=iso_dates)
    # write to file
    data.to_csv('dates.csv', header=False) 
```

比我使用以下代码来解析文件：

```
In [54]: %timeit a = np.genfromtxt('dates.csv', delimiter=',',
                                   converters={0:with_regex})
1 loops, best of 3: 430 ms per loop

In [55]: %timeit a = np.genfromtxt('dates.csv', delimiter=',',
                                   converters={0:with_indexing})
1 loops, best of 3: 391 ms per loop 
```

[pandas](http://pandas.pydata.org/)（基于 numpy）有一个基于 C 的文件解析器，它甚至更快：

```
In [56]: %timeit df = pd.read_csv('dates.csv', header=None, index_col=0, 
                                  parse_dates=True, date_parser=with_indexing)
10 loops, best of 3: 167 ms per loop 
```

# java - 具有junit风格差异的Hamcrest Matcher

> ID：14163410
> 
> 赞同：5
> 
> 时间：2013-01-04T19:14:53.483
> 
> 标签：java, json, junit, hamcrest, matcher

我正在使用 Hamcrest Matcher 来比较两个 JSON 对象。compare 方法使用 Gson 解析器。

匹配器效果很好，但是当两个 JSON 不相同时，我只能显示如下消息：

```
Expected: <[{"data":"data1","application":{"id":"1"}}]>
     but: <[{"data":"data1","application":{"id":"2"}}]> 
```

这不是很有帮助，我想显示哪些元素不匹配，例如junit的assertEquals：

```
expected:<...a1","application":{"[filtered":false,"id":"1"]...> but was:<...a1","application":{"[id":"2"...> 
```

有没有办法做到这一点？

**编辑：**

```
@Override
protected void describeMismatchSafely(JsonElement item, 
                                      Description mismatchDescription) {
    //mismatchDescription.appendValue(item);
    assertEquals(item.toString(), originalJson.toString());
} 
```

但这会给我：

```
expected:<...a1","application":{"[filtered":false,"id":"2"]...> 
but  was:<...a1","application":{"[id":"1","filtered":false],...> 
```

请注意，唯一的区别在于“id:1”和“id:2”，但 junit 也向我显示 JSON 中的不同排序作为错误的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T05:56:32.380

到目前为止我能做的最好的：

```
@Override
protected void describeMismatchSafely(JsonElement expectedJson, 
                                      Description mismatchDescription) {

  mismatchDescription.appendValue(expectedJson).appendText("\ndifference:\n");

  try {
     assertEquals(expectedJson.toString(), originalJson.toString());
  }
  catch (ComparisonFailure e) {
     String message = e.getMessage();
     message = message.replace("expected:", "");
     message = message.replace("but was:", "");
     message = message.replaceFirst(">", ">\n");
     mismatchDescription.appendText(message);
  }
} 
```

这给了我

```
Expected: <[{"data":"data1","application":{"id":"1"}}]>
     but: <[{"data":"data1","application":{"id":"2"}}]>
difference:
<...a1","application":{"[filtered":false,"id":"2"],...>
<...a1","application":{"[id":"1","filtered":false],...> 
```

# mobile - 如何以编程方式打开 dojox 移动组合框

> ID：14163415
> 
> 赞同：1
> 
> 时间：2013-01-04T19:15:10.337
> 
> 标签：mobile, combobox, dojo

我正在使用 dojox/mobile/ComboBox 小部件，并希望以编程方式打开它。

尝试使用 require("dijit/registry").byId("").openDropDown(); 但源评论说......“只有在 this.dropDown 已创建并准备好显示时才被调用（即，它的数据已加载）。”，它似乎不是:(

调用 _onClick 也无济于事。

任何帮助将不胜感激。

盖伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:19:01.693

我和你有同样的问题。

dojox.mobile.ComboBox 导致 android 键盘显示。

我的工作是像这样以编程方式创建组合框：

```
 var myCombo = new ComboBox({
                store: registry.byId('your data list'),
                value: ''
            },"theDomInput");
            myCombo.startup(); 
```

然后在我的 index.html 中，我有一个只读集的字段，如下所示：

```
<input id="theDomInput" type="text" readonly/> 
```

启动函数需要在组合框的点击事件之前调用。

这对我有用。如果您想出更好的方法，请告诉我。

# c# - 黑白棋游戏颜色检测

> ID：14163425
> 
> 赞同：1
> 
> 时间：2013-01-04T19:15:47.013
> 
> 标签：c#, winforms, visual-studio-2010, multidimensional-array

我正在使用 c# 重新创建经典游戏黑白棋，以提高我的编程技能，但是当我检查颜色时遇到问题。到目前为止，我已经设法从左侧和顶部反转颜色，但它不能正常工作，它只会在我击中板上的最后一个方块时反转颜色。

任何帮助将非常感激

这是一张可以解释我的意思的图片（代码如下）的![在此处输入图像描述](../Images/e984c1bd0111f5b0c7240e44a6826b5d.png)意思

我拥有的代码：

```
namespace praprevers
{
    public partial class Form1 : Form
    {
        private Button[,] squares;
        //private Button[,] r0;
        public Form1()
        {
            InitializeComponent();

            squares = new Button[4, 4];
            squares = new Button[,] {
                                    {btn_0_0, btn_0_1, btn_0_2, btn_0_3},
                                    {btn_1_0, btn_1_1, btn_1_2, btn_1_3},
                                    {btn_2_0, btn_2_1, btn_2_2, btn_2_3},
                                    {btn_3_0, btn_3_1, btn_3_2, btn_3_3}
                                    };

        }

        int _turn = 0;
        private void DrawColor(object sender, EventArgs e)
        {

           Button b = sender as Button;
            string[] btnData = b.Name.Split('_');
            int x = int.Parse(btnData[1]);
            int y = int.Parse(btnData[2]);

            //check for possible combinations 
            int top = x - 3;
            int botton = x +3;

            int left = y - 3;
            int right = y + 3;

           for (int l = 0; l < 4; ++l)
            {
                if (top >= 0 && squares[top, y].BackColor == Color.Black)
                {
                    squares[top + l, y].BackColor = Color.Black;

                }
                else if (left >= 0 && squares[x, left].BackColor == Color.Black)
                {
                    squares[x, left + l].BackColor = Color.Black;
                }
           }
            if (_turn == 0)
            {
                _turn = 1;
                b.BackColor = Color.Black;

            }
            else
            {
                _turn = 0;
                b.BackColor = Color.Red;

            }
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            foreach (Button sqrr in squares)
            {
                sqrr.Click += new System.EventHandler(this.DrawColor);
            }

        }

    }
} 
```

# python - Python 和 Django OperationalError (2006, 'MySQL server has gone away')

> ID：14163429
> 
> 赞同：34
> 
> 时间：2013-01-04T19:16:02.943
> 
> 标签：python, mysql, django, nginx, django-middleware

原文：我最近开始从我的一些旧代码中获取 MySQL OperationalErrors，并且似乎无法追溯问题。由于它以前可以工作，我认为它可能是软件更新破坏了某些东西。我正在将 python 2.7 与 django runfcgi 与 nginx 一起使用。这是我的原始代码：

**视图.py**

```
DBNAME = "test"
DBIP = "localhost"
DBUSER = "django"
DBPASS = "password"
db = MySQLdb.connect(DBIP,DBUSER,DBPASS,DBNAME)
cursor = db.cursor()

def list(request):
    statement = "SELECT item from table where selected = 1"
    cursor.execute(statement)
    results = cursor.fetchall() 
```

我尝试了以下方法，但仍然无法正常工作：

**视图.py**

```
class DB:
    conn = None
    DBNAME = "test"
    DBIP = "localhost"
    DBUSER = "django"
    DBPASS = "password"
def connect(self):
    self.conn = MySQLdb.connect(DBIP,DBUSER,DBPASS,DBNAME)
def cursor(self):
    try:
        return self.conn.cursor()
    except (AttributeError, MySQLdb.OperationalError):
        self.connect()
        return self.conn.cursor()

db = DB()
cursor = db.cursor()

def list(request):
    cursor = db.cursor()
    statement = "SELECT item from table where selected = 1"
    cursor.execute(statement)
    results = cursor.fetchall() 
```

目前，我唯一的解决方法是`MySQLdb.connect()`在每个使用 mysql 的函数中执行。我还注意到，当使用 django's 时`manage.py runserver`，我不会遇到这个问题，而 nginx 会抛出这些错误。我怀疑我的连接超时，因为`list()`在启动服务器的几秒钟内被调用。我正在使用的软件是否有任何更新会导致此问题/是否有任何解决方法？

编辑：我意识到我最近写了一个中间件来守护一个函数，这就是问题的原因。但是，我不知道为什么。这是中间件的代码

```
def process_request_handler(sender, **kwargs):
    t = threading.Thread(target=dispatch.execute,
        args=[kwargs['nodes'],kwargs['callback']],
        kwargs={})
    t.setDaemon(True)
    t.start()
    return
process_request.connect(process_request_handler) 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-07-22T22:40:05.090

有时如果您看到“OperationalError: (2006, 'MySQL server has gone away')”，那是因为您发出的查询太大。例如，如果您将会话存储在 MySQL 中，并且您试图在会话中放入一些非常大的东西，就会发生这种情况。要解决此问题，您需要增加 MySQL 中 max_allowed_pa​​cket 设置的值。

默认值为 1048576。

所以查看当前值为默认值，运行以下SQL：

```
select @@max_allowed_packet; 
```

要临时设置新值，请运行以下 SQL：

```
set global max_allowed_packet=10485760; 
```

要更永久地解决此问题，请创建一个至少包含以下内容的 /etc/my.cnf 文件：

```
[mysqld]
max_allowed_packet = 16M 
```

编辑 /etc/my.cnf 后，如果您不知道如何，则需要重新启动 MySQL 或重新启动机器。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-01-10T22:26:47.097

根据[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/gone-away.html)，当客户端无法向服务器发送问题时会引发错误消息，这很可能是因为服务器本身已关闭连接。在最常见的情况下，服务器将在（默认）8 小时后关闭空闲连接。这可以在服务器端进行配置。

[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/gone-away.html)提供了许多其他可能的原因，可能值得研究一下它们是否适合您的情况。

`connect()`调用每个函数（可能最终不必要地创建新连接）的替代方法是使用`ping()`连接对象上的方法进行调查；这将使用尝试自动重新连接的选项来测试连接。我努力在网上为该方法找到一些[体面的文档，但](http://www.neotitans.com/resources/python/mysql-python-connection-error-2006.html)[这个问题](https://stackoverflow.com/questions/12564828/sleeping-processes-in-mysql)的答案可能会有所帮助。 `ping()`

请注意，在处理事务时自动重新连接可能很危险，因为重新连接会导致隐式回滚（并且似乎是自动重新连接不是 MySQLdb 实现功能的主要原因）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-12T15:36:38.740

这可能是由于数据库连接从主线程复制到您的子线程中。在使用 python 的多处理库生成不同的进程时，我遇到了同样的错误。连接对象在分叉期间在进程之间复制，并且在子线程中进行数据库调用时会导致 MySQL OperationalErrors。

这是解决这个问题的一个很好的参考：[Django multiprocessing and database connections](https://stackoverflow.com/questions/8242837/django-multiprocessing-and-database-connections)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T10:48:49.423

检查是否允许在一个线程中创建 mysql 连接对象，然后在另一个线程中使用它。

如果禁止，请使用 threading.Local 进行每线程连接：

```
class Db(threading.local):
    """ thread-local db object """
    con = None

    def __init__(self, ...options...):
        super(Db, self).__init__()
        self.con = MySQLdb.connect(...options...)

db1 = Db(...)

def test():
    """safe to run from any thread"""
    cursor = db.con.cursor()
    cursor.execute(...) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-06T18:34:37.690

我也一直在为这个问题而苦苦挣扎。我不喜欢在 mysqlserver 上增加超时的想法。正如`CONNECTION_MAX_AGE`提到的那样，自动重新连接也不起作用。不幸的是，我最终包装了像这样查询数据库的每个方法

```
def do_db( callback, *arg, **args):
    try:
        return callback(*arg, **args)
    except (OperationalError, InterfaceError) as e:  # Connection has gone away, fiter it with message or error code if you could catch another errors
        connection.close()
        return callback(*arg, **args)

do_db(User.objects.get, id=123)  # instead of User.objects.get(id=123) 
```

正如您所看到的，我宁愿捕获异常，也不愿每次在查询之前 ping 数据库。因为捕获异常是一种罕见的情况。我希望 django 自动重新连接，但他们似乎[拒绝](https://code.djangoproject.com/ticket/21597)了这个问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-13T15:40:39.707

关于此类警告的最常见问题是您的应用程序已达到`wait_timeout`MySQL 的值。

我在使用 Flask 应用时遇到了同样的问题。

以下是我的解决方法：

```
$ grep timeout /etc/mysql/mysql.conf.d/mysqld.cnf 
# https://support.rackspace.com/how-to/how-to-change-the-mysql-timeout-on-a-server/
# wait = timeout for application session (tdm)
# inteactive = timeout for keyboard session (terminal)
# 7 days = 604800s / 4 hours = 14400s 
wait_timeout = 604800
interactive_timeout = 14400 
```

**观察：**如果您通过 MySQL 批处理模式搜索变量，值将按原样显示。但是如果你执行`SHOW VARIABLES LIKE 'wait%';`or `SHOW VARIABLES LIKE 'interactive%';`，为 , 配置的值`interactive_timeout`将出现在两个变量中，我不知道为什么，但事实是，为每个变量配置的值在 '/etc/mysql/mysql.conf.d/ mysqld.cnf'，将被 MySQL 尊重。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-04-26T09:43:46.900

对我来说，这是在调试模式下发生的。

所以我在调试模式下尝试了持久连接，查看链接：[Django - Documentation - Databases - Persistent connections](https://docs.djangoproject.com/en/2.2/ref/databases/)。

在设置中：

```
'default': {
       'ENGINE': 'django.db.backends.mysql',
       'NAME': 'dbname',
       'USER': 'root',
       'PASSWORD': 'root',
       'HOST': 'localhost',
       'PORT': '3306',
       'CONN_MAX_AGE': None
    }, 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-12-24T21:01:08.097

当您在不进入数据库的耗时操作之后尝试使用连接时，可能会出现此错误。由于连接有一段时间没有使用，MySQL 超时，连接被静默丢弃。

您可以尝试`close_old_connections()`在耗时的非 DB 操作之后调用，以便在连接不可用时打开新连接。`close_old_connections()`请注意，如果您有交易，请勿使用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-04T20:59:08.203

这段代码有多少年了？至少从 0.96 开始，Django 就在设置中定义了数据库。我能想到的唯一另一件事是多数据库支持，这改变了一些事情，但即使是 1.1 或 1.2。

即使您需要特定视图的特殊数据库，我认为您最好在设置中定义它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-07-22T15:10:39.617

SQLAlchemy 现在有一篇关于如何使用 ping 对连接的新鲜度持悲观态度的文章：

[http://docs.sqlalchemy.org/en/latest/core/pooling.html#disconnect-handling-pessimistic](http://docs.sqlalchemy.org/en/latest/core/pooling.html#disconnect-handling-pessimistic)

从那里，

```
from sqlalchemy import exc
from sqlalchemy import event
from sqlalchemy.pool import Pool

@event.listens_for(Pool, "checkout")
def ping_connection(dbapi_connection, connection_record, connection_proxy):
    cursor = dbapi_connection.cursor()
    try:
        cursor.execute("SELECT 1")
    except:
        # optional - dispose the whole pool
        # instead of invalidating one at a time
        # connection_proxy._pool.dispose()

        # raise DisconnectionError - pool will try
        # connecting again up to three times before raising.
        raise exc.DisconnectionError()
    cursor.close() 
```

并进行测试以确保上述工作正常：

```
from sqlalchemy import create_engine
e = create_engine("mysql://scott:tiger@localhost/test", echo_pool=True)
c1 = e.connect()
c2 = e.connect()
c3 = e.connect()
c1.close()
c2.close()
c3.close()

# pool size is now three.

print "Restart the server"
raw_input()

for i in xrange(10):
    c = e.connect()
    print c.execute("select 1").fetchall()
    c.close() 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-05-04T14:40:23.773

我遇到了这个问题，并且没有更改配置的选项。我终于发现问题出在我的 50000 条记录循环中出现了 49500 条记录，因为那是我再次尝试（在很久以前尝试过）访问我的第二个数据库的时候。

所以我更改了我的代码，以便每隔几千条记录，我再次触摸第二个数据库（使用一个非常小的表的 count() ），然后修复它。毫无疑问，“ping”或其他一些接触数据库的方法也会起作用。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-10-31T12:34:19.343

这个错误很神秘，因为 MySQL 没有报告它断开连接的原因，它只是消失了。

这种断线的原因似乎有很多。我刚刚发现的一个是，如果查询字符串太大，服务器会断开连接。这可能与`max_allowed_packets`设置有关。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-01-16T07:14:31.770

首先，您应该确保 MySQL 会话和全局环境`wait_timeout`和`interactive_timeout`值。其次，您的客户端应该尝试重新连接到低于这些环境值的服务器。

# matlab - 如何在 Matlab 中使用经过训练的神经网络在真实系统中进行分类

> ID：14163430
> 
> 赞同：4
> 
> 时间：2013-01-04T19:16:08.013
> 
> 标签：matlab, machine-learning, neural-network, classification

我在包含语音特征和加速度计测量的数据集上使用 Matlab 神经网络工具箱训练了前馈神经网络。Targetset 包含数据集的两个目标类：0 和 1。训练、验证和性能都很好，我已经为这个网络生成了代码。

现在，我需要实时使用这个神经网络来识别模式，并在我针对先前训练的 NN 测试新数据集时生成 0 或 1。但是当我发出命令时：

```
 c = sim(net, j) 
```

其中“j”是一个新的数据集[24x11]；取而代之的是 0 或 1 我将其作为输出（我假设我得到正确分类的百分比，但本身没有分类结果）：

```
c =

  Columns 1 through 9

    0.6274    0.6248    0.9993    0.9991    0.9994    0.9999    0.9998    0.9934    0.9996

  Columns 10 through 11

    0.9966    0.9963 
```

那么有什么命令或方法可以让我真正看到分类结果吗？任何帮助都非常感谢！谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T19:23:11.757

我不是 matlab 用户，但从逻辑的角度来看，你错过了一个重要的点：

神经网络的输入是单个向量，您正在传递一个矩阵。因此，matlab 认为您想要对一堆向量（在您的情况下为 11 个）进行分类。所以你得到的向量是这 11 个向量中每一个的输出激活。

输出激活是一个介于 0 和 1 之间的值（我猜你使用的是 sigmoid），所以这是完全正常的。您的工作是获得最适合您的数据的阈值。您可以通过对训练/测试数据的交叉验证或仅选择一个（0.5？）来获得此阈值，然后查看结果是否“好”并在需要时进行修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T21:49:35.310

NN 通常使用逻辑函数将其输出转换为 (0,1) 内的值。这不是百分比或概率，只是确定性的相对度量。无论如何，这意味着您必须手动使用阈值（例如 0.5）来区分这两个类别。很难找到哪个阈值最好，因为您必须在精度和召回率之间进行最佳权衡。

# java - spring context jndi 属性查找包含所有道具，包括系统道具，而不仅仅是我需要的一组

> ID：14163437
> 
> 赞同：1
> 
> 时间：2013-01-04T19:16:28.460
> 
> 标签：java, spring, servlets, glassfish

我正在使用 glassfish 3.1、spring 3.2 和 jdk 1.7。

我在 Glassfish 中配置了两个自定义 JNDI 资源。一个称为“配置”，另一个称为“映射”。但是当我在代码中引用其中一个时，它实际上具有两个和所有系统属性（catalina.base 等）的属性。我只想要一套，不是全部3套。

我已经设置好了，所以我得到了 spring 上下文文件中的属性：

```
<jee:jndi-lookup id="mappingsJndi" jndi-name="mappings" resource-ref="true" />
<bean id="propertyMappings" class="org.springframework.context.support.PropertySourcesPlaceholderConfigurer">
        <property name="ignoreUnresolvablePlaceholders" value="true"/>
        <property name="propertiesArray">
            <list>
                <ref bean="mappingsJndi"/>
            </list>
        </property>
    </bean> 
```

我在 servlet 中引用它。它是这样注入的：

```
@Autowired
Properties[] propertyMappings; 
```

注入有效，但它包含 3 个属性对象而不是一个。有没有办法解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T19:23:00.703

看来我想通了。而不是像这样引用 propertyMappings bean：

```
@Autowired
Properties[] propertyMappings; 
```

我只是直接引用 JNDI 查找：

```
@Autowired
Properties mappingsJndi; 
```

# android - 无法根据当前位置在 Google Map v2 上绘图

> ID：14163438
> 
> 赞同：2
> 
> 时间：2013-01-04T19:16:28.637
> 
> 标签：android, api, google-maps, maps

我需要在地图上画一条路径。为此，我从新的谷歌地图开始考虑使用折线。我的问题是我的应用程序可以工作，但它没有在地图上绘制任何东西。我希望它在每次我改变位置时绘制，基本上是为了绘制我的路径。

```
public class MapActivity extends FragmentActivity implements LocationListener {
    GoogleMap               myMap;
    Location                lastLocation;
    private LocationManager locManager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.map_layout);
        myMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();
        myMap.setMapType(GoogleMap.MAP_TYPE_HYBRID);

        locManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        boolean networkEnabled = locManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
        if (!networkEnabled) {
            Toast.makeText(this, "network not enabled", 0);
        }

    }

    @Override
    protected void onResume() {
        super.onResume();
        locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, this);

    }

    @Override
    public void onLocationChanged(Location location) {
        if (location != null) {
            lastLocation=locManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
            Polyline line=myMap.addPolyline(new PolylineOptions().add(new LatLng(location.getLatitude(),location.getLongitude())).color(Color.RED));

        }
    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:22:45.893

线至少需要两个点。您正在尝试仅使用一个点来绘制一条线。这将绘制一条无限小的线，您将很难看到它，因为它无限小。

如果要画线，请使用两个或更多点。如果您想在一个点上绘制某些东西，请使用标记，而不是折线。

# c - 使用微软编译器减少opencl内置向量类型的功能？

> ID：14163444
> 
> 赞同：0
> 
> 时间：2013-01-04T19:17:11.763
> 
> 标签：c, opencl, header-files

我在 opencl (v1.1) 中使用了 char 向量类型，并且正在搜索 vector.lo 和 vector.hi 扩展，但只能访问 cl_char 数组。通过搜索 opencl 头文件，我发现了以下清单，这表明这些扩展可用于 GNUC 和“严格 ansi”。

```
/* Define cl_vector types in cl_platform.h */
/* ---- cl_charn ---- */
typedef union
{
  cl_char  CL_ALIGNED(2) s[2];
#if defined( __GNUC__) && ! defined( __STRICT_ANSI__ )
  __extension__ struct{ cl_char  x, y; };
  __extension__ struct{ cl_char  s0, s1; };
  __extension__ struct{ cl_char  lo, hi; };
#endif
#if defined( __CL_CHAR2__) 
  __cl_char2     v2; 
#endif  
}cl_char2;

// other vector type definitions follow... 
```

它是否正确？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:57:03.650

这种“减少的功能”是由错误引起的。详细信息可在[Khronos Public Bugzilla (Bug 413)中找到](http://www.khronos.org/bugzilla/show_bug.cgi?id=413)

[Bug 413 - Workaround](http://www.khronos.org/message_boards/viewtopic.php?f=28&t=3990)中描述了一些**“草率”**的解决方法。请注意，这仅限于 ms 编译器。

# java - 从 Windows 命令提示符执行 Java 程序（NCBO 提取工具）不起作用...用户指南使用 Linux 语法

> ID：14163449
> 
> 赞同：0
> 
> 时间：2013-01-04T19:17:29.573
> 
> 标签：java, linux, jar, classpath, i2b2

我正在尝试从 Windows 命令提示符运行 Java 命令行程序，以从 BioPortal (http://bioportal.bioontology.org) 提取和生成本体文件。它似乎找不到类，但也许我的 CLASSPATH 参数语法不正确。设置参考（NCBO 用户指南和 NCBO 提取工具 zip 文件）可以在我的问题底部找到。这些说明基于 Linux 语法，但我在 Windows 中运行它。

**Linux 命令（来自用户指南）：**

```
java -classpath endorsed_lib/*:genlib/i2b2Common-core.jar:lib/commons/*:lib/log4j/*:lib/jdbc/*:lib/spring/*:* edu.harvard.i2b2.ncbo.extraction.NCBOOntologyExtractAll -ont {5 digit ontology id} -apikey {API key from http://bioportal.bioontology.org/account} -outputFileName {output file path} 
```

*Linux -classpath 参数包括：*

```
endorsed_lib/*
genlib/i2b2Common-core.jar or genlib/* (only 1 jar file)
lib/commons/*
lib/log4j/*
lib/jdbc/*
lib/spring/*
* 
```

**Windows 命令（不起作用）：**

```
java -cp ".\endorsed_lib;.\genlib;.\lib\commons;.\lib\jdbc;.\lib\log4j;.\lib\spring;." edu.harvard.i2b2.ncbo.extraction.NCBOOntologyExtractAll -ont 47178 -apikey 68775b88-c12f-472c-9192-71f9b282309c -outputFileName 47178_stagingFile.txt 
```

*来自 Windows 命令提示符的错误：*

```
Error: Could not find or load main class edu.harvard.i2b2.ncbo.extraction.NCBOOntologyExtractAll 
```

*Windows -cp (CLASSPATH) 参数包括以下路径：*

```
\NCBOExtractionTools_1.1\Release_1_1\endorsed_lib\;
\NCBOExtractionTools_1.1\Release_1_1\genlib\;
\NCBOExtractionTools_1.1\Release_1_1\lib\commons\;
\NCBOExtractionTools_1.1\Release_1_1\lib\jdbc\;
\NCBOExtractionTools_1.1\Release_1_1\lib\log4j\;
\NCBOExtractionTools_1.1\Release_1_1\lib\spring\;
\NCBOExtractionTools_1.1\Release_1_1\; 
```

==================

**指导：**

[https://community.i2b2.org/wiki/download/attachments/5670011/NCBO_Extraction_Users_Guide_1-1.pdf?version=2&modificationDate=1344357357000](https://community.i2b2.org/wiki/download/attachments/5670011/NCBO_Extraction_Users_Guide_1-1.pdf?version=2&modificationDate=1344357357000)

说明从第 8 页（共 16 页）开始。我在第 9 页。

在用户指南中，它引用了一个 NCBO 实用程序。可以在这里下载：

[https://www.i2b2.org/software/download.html?d=310](https://www.i2b2.org/software/download.html?d=310)

单击标有“文件下载”的蓝色超链接或单击下面的链接（截至 2013 年 1 月 4 日的链接）> 然后单击“我接受”> 将文件 (NCBOExtractionTools_1.1.zip) 保存到本地计算机 > 提取 zip 文件

*这是从 i2b2 NCBO 实用程序中提取的文件列表，因此您可以查看我们可用的 jar 文件：*

```
\NCBOExtractionTools_1.1\Release_1_1\endorsed_lib
\NCBOExtractionTools_1.1\Release_1_1\ExtractionApplicationContext.xml
\NCBOExtractionTools_1.1\Release_1_1\FileList.txt
\NCBOExtractionTools_1.1\Release_1_1\genlib
\NCBOExtractionTools_1.1\Release_1_1\hierarchy.log
\NCBOExtractionTools_1.1\Release_1_1\i2b2_license_2.1-1159.txt
\NCBOExtractionTools_1.1\Release_1_1\lib
\NCBOExtractionTools_1.1\Release_1_1\log4j.properties
\NCBOExtractionTools_1.1\Release_1_1\NCBOExtraction_1.1.jar
\NCBOExtractionTools_1.1\Release_1_1\STAGING_FILES
\NCBOExtractionTools_1.1\Release_1_1\endorsed_lib\jaxb-api.jar
\NCBOExtractionTools_1.1\Release_1_1\endorsed_lib\jaxb-LICENSE.txt
\NCBOExtractionTools_1.1\Release_1_1\endorsed_lib\stax-api-1.0.1.jar
\NCBOExtractionTools_1.1\Release_1_1\endorsed_lib\stax-api-LICENSE.txt
\NCBOExtractionTools_1.1\Release_1_1\endorsed_lib\wstx-asl-3.0.1.jar
\NCBOExtractionTools_1.1\Release_1_1\endorsed_lib\wstx-LICENSE.txt
\NCBOExtractionTools_1.1\Release_1_1\genlib\i2b2Common-core.jar
\NCBOExtractionTools_1.1\Release_1_1\lib\commons
\NCBOExtractionTools_1.1\Release_1_1\lib\jdbc
\NCBOExtractionTools_1.1\Release_1_1\lib\log4j
\NCBOExtractionTools_1.1\Release_1_1\lib\spring
\NCBOExtractionTools_1.1\Release_1_1\lib\commons\apache-2.0license.txt
\NCBOExtractionTools_1.1\Release_1_1\lib\commons\commons-codec-1.3.jar
\NCBOExtractionTools_1.1\Release_1_1\lib\commons\commons-collections-2.1.1.jar
\NCBOExtractionTools_1.1\Release_1_1\lib\commons\commons-dbcp-1.2.2.jar
\NCBOExtractionTools_1.1\Release_1_1\lib\commons\commons-exec-1.0.jar
\NCBOExtractionTools_1.1\Release_1_1\lib\commons\commons-httpclient-3.0.jar
\NCBOExtractionTools_1.1\Release_1_1\lib\commons\commons-logging-1.0.4.jar
\NCBOExtractionTools_1.1\Release_1_1\lib\commons\commons-pool-1.3.jar
\NCBOExtractionTools_1.1\Release_1_1\lib\jdbc\ojdbc14.jar
\NCBOExtractionTools_1.1\Release_1_1\lib\jdbc\sqlserver2005
\NCBOExtractionTools_1.1\Release_1_1\lib\jdbc\sqlserver_jTDS
\NCBOExtractionTools_1.1\Release_1_1\lib\jdbc\sqlserver2005\sqljdbc.jar
\NCBOExtractionTools_1.1\Release_1_1\lib\jdbc\sqlserver2005\sqlserver_licence.rtf
\NCBOExtractionTools_1.1\Release_1_1\lib\jdbc\sqlserver_jTDS\jtds-1.2.2.jar
\NCBOExtractionTools_1.1\Release_1_1\lib\jdbc\sqlserver_jTDS\LICENSE
\NCBOExtractionTools_1.1\Release_1_1\lib\log4j\log4j-1.2.8.jar
\NCBOExtractionTools_1.1\Release_1_1\lib\log4j\log4j-LICENSE.txt
\NCBOExtractionTools_1.1\Release_1_1\lib\spring\apachelicence-2.0.txt
\NCBOExtractionTools_1.1\Release_1_1\lib\spring\spring-2.0.jar 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:25:27.380

**这根据@Brian 的评论有效：**

```
java -cp ".\endorsed_lib\*;.\genlib\*;.\lib\commons\*;.\lib\jdbc\*;.\lib\log4j\*;.\lib\spring\*;.\*" edu.harvard.i2b2.ncbo.extraction.NCBOOntologyExtractAll -ont 47178 -apikey {key} -outputFileName 47178_stagingFile.txt 
```

# jsf-2 - ExternalContext.dispatch() 不工作

> ID：14163457
> 
> 赞同：4
> 
> 时间：2013-01-04T19:18:01.233
> 
> 标签：jsf-2, primefaces

在 p:ajax 调用中，侦听器调用包含

```
 FacesContext.getCurrentInstance().getExternalContext().dispatch("/uri.jsf"); 
```

不起作用。我在行上设置了一个断点，它在执行时保持在同一点。它不会继续前进，我必须重新启动服务器才能再次运行应用程序。

```
 FacesContext.getCurrentInstance().getExternalContext().redirect("/uri.jsf"); 
```

重定向工作得很好。但我想要分派的页面转发以导航到另一个页面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T20:11:11.033

[`ExternalContext#dispatch()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#dispatch%28java.lang.String%29)不支持ajax请求。它会导致 JSF 呈现 JavaScript ajax 引擎无法理解的给定资源的 HTML 输出。ajax 请求必须返回一个特殊的 XML 响应，该响应可以被 JavaScript ajax 引擎理解。

[`ExternalContext#redirect()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#redirect%28java.lang.String%29)支持ajax请求。它将自动返回一个特殊的 XML 响应，指示 JavaScript ajax 引擎调用给定 URL 的调用（您可以在[此答案](https://stackoverflow.com/questions/13366936/jsf-filter-not-redirecting-after-initial-redirect/13369719#13369719)`window.location`中找到 XML 示例）。

您有 2 个选项：

1.  使其成为非 ajax 请求。
2.  执行正常的 JSF 导航。

发出非 ajax 请求很可能不是`<p:ajax>`. 在这种情况下，执行正常导航确实是您唯一的选择。

```
FacesContext context = FacesContext.getCurrentInstance();
context.getApplication().getNavigationHandler().handleNavigation(context, null, "/uri.jsf"); 
```

如果出现 ajax 请求，它将自动强制[`render="@all"`](http://docs.oracle.com/javaee/6/api/javax/faces/context/PartialViewContext.html#setRenderAll%28boolean%29)使用新内容。

# mysql - mySQL 相关子查询

> ID：14163462
> 
> 赞同：3
> 
> 时间：2013-01-04T19:18:38.177
> 
> 标签：mysql, join, subquery, correlated-subquery

尝试编写一个 mysql 查询并遇到很多困难。

我有两个表（项目：关于项目的信息，和 itemReview：项目的评论）

我想做的是选择属于特定位置的所有项目（这是我的外部查询所做的），然后对于外部查询中的每个项目，获取 itemReview 表中所有评级字段的平均值

这是我的尝试：

```
SELECT 
    Item.idDish, 
    Item.dateAdded, 
    Item.dateModified, 
    Item.fidLocation, 
    Item.category, 
    Item.description, 
    Item.price, 
    Item.name, 
    Item.fullImageName, 
    Item.thumbnailImageName, 
    sub.rating
FROM Item 
JOIN (
        SELECT 
            AVG(ItemReview.rating) AS rating 
        FROM ItemReview 
        WHERE ItemReview.fidItem = Item.idItem
    ) AS sub
WHERE Item.fidLocation = '63'; 
```

但mySQL说：'where子句'中的未知列'Item.idItem'

任何帮助将不胜感激！谢谢！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T19:21:26.607

您正在尝试访问`Item.idItem`子查询的内部，但它在那里不可用。你应该使用这样的东西：

```
SELECT 
    Item.idDish, 
    Item.dateAdded, 
    Item.dateModified, 
    Item.fidLocation, 
    Item.category, 
    Item.description, 
    Item.price, 
    Item.name, 
    Item.fullImageName, 
    Item.thumbnailImageName, 
    sub.rating
FROM Item 
JOIN 
(
    SELECT fidItem, AVG(ItemReview.rating) AS rating 
    FROM ItemReview 
    GROUP BY ItemReview.fidItem
) AS sub
   ON sub.fidItem = Item.idItem
WHERE Item.fidLocation = '63'; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T19:21:40.087

询问：

```
SELECT 
    Item.idDish, 
    Item.dateAdded, 
    Item.dateModified, 
    Item.fidLocation, 
    Item.category, 
    Item.description, 
    Item.price, 
    Item.name, 
    Item.fullImageName, 
    Item.thumbnailImageName, 
    (   SELECT 
            AVG(ItemReview.rating) AS rating 
        FROM ItemReview 
        WHERE ItemReview.fidItem = Item.idItem
    ) AS rating
FROM Item 
WHERE Item.fidLocation = '63' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T19:23:36.580

您不能以这种方式引用“外部”表。**bluefeet**已经提出了一种解决方案，另一种解决方案也适用于您的情况：

```
SELECT 
Item.idDish, 
Item.dateAdded, 
Item.dateModified, 
Item.fidLocation, 
Item.category, 
Item.description, 
Item.price, 
Item.name, 
Item.fullImageName, 
Item.thumbnailImageName, 
(SELECT AVG(ItemReview.rating) AS rating 
    FROM ItemReview 
    WHERE ItemReview.fidItem = Item.idItem
) as rating
FROM Item 
WHERE Item.fidLocation = '63'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T19:22:02.837

尝试这个：

```
SELECT i.idDish, i.dateAdded, i.dateModified, i.fidLocation, i.category, 
       i.description, i.price, i.name, i.fullImageName, 
       i.thumbnailImageName, ir.rating 
FROM Item i 
LEFT JOIN (SELECT fiditem, AVG(ItemReview.rating) AS rating 
           FROM ItemReview
           GROUP BY fiditem) ir ON ir.fidItem = i.idItem 
WHERE i.fidLocation = '63'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T19:22:19.937

尝试这个

```
SELECT 
    Item.idDish, 
    Item.dateAdded, 
    Item.dateModified, 
    Item.fidLocation, 
    Item.category, 
    Item.description, 
    Item.price, 
    Item.name, 
    Item.fullImageName, 
    Item.thumbnailImageName, 
    sub.rating,
    Item.idItem
FROM Item 
JOIN (
        SELECT 
            AVG(ItemReview.rating) AS rating ,
            fidItem
        FROM ItemReview 
        GROUP BY fidItem
    ) AS sub on sub.fidItem = Item.idItem
WHERE Item.fidLocation = '63'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-04T13:03:56.700

那这个呢：

```
SELECT 
    Item.idDish, 
    Item.dateAdded, 
    Item.dateModified, 
    Item.fidLocation, 
    Item.category, 
    Item.description, 
    Item.price, 
    Item.name, 
    Item.fullImageName, 
    Item.thumbnailImageName, 
    sub.rating
FROM Item myTable
JOIN (
        SELECT 
            AVG(ItemReview.rating) AS rating 
        FROM ItemReview 
        WHERE ItemReview.fidItem = myTable.idItem
    ) AS sub
WHERE Item.fidLocation = '63'; 
```

在这里，您为主查询命名并在子查询中引用新表名。使用原始表名会导致 MySQL 不知道要使用什么表。

# php - 如何使用 PHP 解析这种 HTML 代码？

> ID：14163465
> 
> 赞同：0
> 
> 时间：2013-01-04T19:18:50.283
> 
> 标签：php, html-parsing

首先，我在 SO 上找到了一些线程，例如[here](https://stackoverflow.com/questions/3627489/php-parse-html-code)，但这并不是我想要的。

这是我拥有的文本示例：

`Some text bla bla bla bla<br /><b>Date</b>: 2012-12-13<br /><br /><b>Name</b>: Peter Novak<br /><b>Hobby</b>: books,cinema,facebook`

所需的输出：

```
2012-12-13
Peter Novak
books,cinema,facebook 
```

我需要将此信息保存到我们的数据库中，但我不知道如何在`<b>`标签之间检测值（例如`Date`），然后立即检测值（在这种情况下`: 2012-12-13`）......

对于这方面的每一个帮助，我将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:41:32.373

由于要遍历的 DOM 不多，因此 DOM 遍历工具对此无能为力。

这应该有效：

1）删除`b`标签之前的所有内容。

2) 删除`b`标签。DOM 遍历工具可以做到这一点，但如果它们是纯文本，即使是正则表达式也可以做到，它可以在同一遍中删除冒号和随后的空格：`<b\s*>[^<]+</b\s*>:\s*`

3）将标签序列更改 `br`为裸换行符（你真的想要吗？）。DOM 遍历工具可以做到这一点，但正则表达式也可以：`(?:<br\s*/?>)+`

```
$html = preg_replace('#^[^<]+#', "", $html);
$html = preg_replace('#<b\s*>[^<]+</b\s*>:\s*#', "", $html);
$html = preg_replace('#(?:<br\s*/?>)+#', "\n", $html); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:31:03.887

If `<b>Date</b>`, `<b>Name</b>`, `<b>Hobby</b>` and the `<br />`'s will always be there in that way, I suggest you use [strpos()](http://nl3.php.net/manual/en/function.strpos.php) and [substr()](http://nl3.php.net/manual/en/function.substr.php).

For instance, to get the date:

```
// Get start position, +13 because of "<b>Date</b>: "
$dateStartPos = strpos($yourText, "<b>Date</b>") + 13;
// Get end position, use dateStartPos as offset
$dateEndPos = strpos($yourText, "<br />", $dateStartPos);
// Cut out the date, the length is the end position minus the start position
$date = substr($yourText, $dateStartPos, ($dateEndPos - $dateStartPos)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T20:30:54.467

使用[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/manual.htm)您可以轻松实现这一点（就像 jQuery 一样）

```
include('simple_html_dom.php');
$html = str_get_html('Some text bla bla bla bla<br /><b>Date</b>: 2012-12-13<br /><br /><b>Name</b>: Peter Novak<br /><b>Hobby</b>: books,cinema,facebook'); 
```

或者

```
$html = file_get_html('http://your_page.com/'); 
```

然后

```
foreach($html->find('text') as $t){
    if(substr($t, 0, 1)==':')
    {
        // do whatever you want
        echo substr($t, 1).'<br />';
    }
} 
```

**该示例的输出如下所示**

```
2012-12-13
Peter Novak
books,cinema,facebook 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T19:44:04.447

假设格式是一致的，那么[`explode`](http://php.net/manual/en/function.explode.php)可以为您工作：

```
<?php
$text = "Some text bla bla bla bla<br /><b>Date</b>: 2012-12-13<br /><br /><b>Name</b>: Peter Novak<br /><b>Hobby</b>: books,cinema,facebook";
$tokenized = explode(': ', $text);
$tokenized[1] = explode("<br", $tokenized[1]);
$tokenized[2] = explode("<br", $tokenized[2]);
$tokenized[3] = explode("<br", $tokenized[3]);

$date = $tokenized[1][0];
$name = $tokenized[2][0];
$hobby = $tokenized[3][0];

echo $date;
echo $name;
echo $hobby;

?> 
```

# java - setContentView(R.layout.activity_main) 与 getMenuInflater().inflate(R.menu.activity_main, menu)

> ID：14163466
> 
> 赞同：2
> 
> 时间：2013-01-04T19:19:00.420
> 
> 标签：java, android, inflate

为什么我必须告诉我的活动它的布局应该是两次？

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main); // <--
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu); // <--
    return true;
} 
```

这两种方法有什么区别？我什么时候应该使用一个，什么时候使用另一个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T19:20:09.670

它们是两个不同的东西。名字告诉你。`R.layout.activity_main`是你的布局，`R.menu.activity_main`是你的**菜单**。

`setContentView()`设置 Activity 的布局。它包括按钮、文本视图等。

`onCreateOptionsMenu()`使您在按下菜单键时看到的菜单或填充 Android 3.0+ 上的 ActionBar。

他们做两件完全不同的事情。`setContentView()`经常需要（除非你有一个空的`Activity`），`onCreateOptionsMenu()`是可选的，取决于你是否需要显示更多选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T13:28:53.227

gen 文件夹内的 java 文件将定义布局、ID 和菜单静态类。你会从那里得到这个想法。

# jquery - JQuery 按钮不起作用

> ID：14163467
> 
> 赞同：-2
> 
> 时间：2013-01-04T19:19:03.787
> 
> 标签：jquery

它使用 PHP、JQuery 和 HTML，但问题在于使用 JQuery 和 HTML 的按钮：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>New Aircraft Fleet</title>
    <link rel="stylesheet" type="text/css" href="./css/style.css">
    <link rel="stylesheet" href="./css/flick/jquery.ui.all.css">
    <script src="./jquery-ui.js"></script>
    <script src="./ui/jquery.ui.core.js"></script>
    <script src="./ui/jquery.ui.widget.js"></script>
    <script src="./ui/jquery.ui.button.js"></script>

<script>
    $(function() {
        $( "input[type=submit], a, button" )
            .button()
            .click(function( event ) {
                event.preventDefault();
            });
    });
</script>

</head>
<body>

    <form action="new_aircraft_fleet_process.php" method="post">
    <table>

    <tr><td class="forms">Registration: </td><td><input maxlength="6"  type="text" name="registration" size="15"/></td></tr>

    <tr><td></td><td><input type="submit" value="Insert Submit"/></td></tr>
    </table>
</form>

</body>
</html> 
```

该按钮不起作用。如果你推它，没有任何反应。我想要什么按钮做的形式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:24:14.887

1.您没有包含`jquery.js`在您的来源中。

```
src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" 
```

1.  你应该设置你的输入 tpye`button`

2.  你应该使用提交（）。

    $("form").submit(function() {

    });

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:25:19.337

您首先不包括 jQuery Source ..

jQuery UI 需要 jQuery 作为依赖项。

```
var $elems = $("input[type=submit], a, button");

$elems.button();

$elems.on('click', function(event) {
    event.preventDefault();
});​ 
```

# c# - c#多线程同时访问列表框>数据丢失（选择/删除）

> ID：14163469
> 
> 赞同：0
> 
> 时间：2013-01-04T19:19:29.750
> 
> 标签：c#, multithreading, thread-safety, simultaneous-calls

我有一个带有 URL 列表的 ListBox。

我有 2 个线程获取这些 URL 并将它们处理成一个函数。

我的线程 1 采用`items[0]`ListBox 的，我的线程 2 采用`items[1]`.

线程捡起物品后，立即使用`Items.RemoveAt(0 or 1)`

我使用这种方法的问题是一些 URL 被处理了两次，有些甚至没有。

没有办法标记 URL 或其他东西吗？我对多线程不太熟悉

PS：在我的示例中，我说我使用了 2 个线程，实际上我使用了 5 个线程。

提前致谢

编辑：使用`concurentqueue`系统：

```
 Thread th1;
    Thread th2;
    Thread th3;
    Thread th4;
    Thread th5;
    ConcurrentQueue<string> myQueue= new ConcurrentQueue<string>();
    Int queueCount = 0;

    private void button2_Click(object sender, EventArgs e)
    {
    //initialize objects and query the database
        DBconnect conn;
        conn = new DBconnect();
        string query = "SELECT Url FROM Pages WHERE hash = ''";
        List<string> result = conn.Select(query);
        for (int i = 0; i < result.Count(); i++)
        {
    //For all rows found, add them to the queue
            myQueue.Enqueue(result[i]);
        }
    //start the 5 threads to process the queue              
        th1 = new Thread(ProcessTorrent);
        th2 = new Thread(ProcessTorrent);
        th3 = new Thread(ProcessTorrent);
        th4 = new Thread(ProcessTorrent);
        th5 = new Thread(ProcessTorrent);
        th1.Start();
        th2.Start();
        th3.Start();
        th4.Start();
        th5.Start();

    }

    private void ProcessTorrent()
    {
    //Start an unlimted task with continueWith
        Task tasks = Task.Factory.StartNew(() =>
        {
    //Check if there are still items in the queue
            if (myQueue.Count > 0)
            {
                string queueURL;
                bool haveElement = myQueue.TryDequeue(out queueURL);
        //check if i can get an element from the queue
                if (haveElement)
                {
        //start function to parse the URL and increment the number of items treated from the queue
                    get_torrent_detail(queueElement);
                    Interlocked.Increment(ref queueCount);
                    this.Invoke(new Action(() => label_total.Text = (myQueue.Count() - queueCount).ToString()));

                }
            }
        });
    //continue the task for another queue item
        tasks.ContinueWith(task =>
        {
            ProcessTorrent();
        });
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T19:27:35.670

听起来您正在使用 UI 控件来协调多个线程之间的任务。

这是一个非常糟糕的主意。

相反，您应该将任务排队到`ConcurrentQueue<T>`or`BlockingCollection<T>`中，并让其他线程从队列中获取项目并处理它们。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-04T19:22:59.650

是的，这是因为 oyu 不同步对列表的访问。

基本上阅读文档 C#, LOCK 语句。访问列表时加锁。这可以防止多个线程同时访问它。

然后，您总是会立即将顶部项目 (items[0]) 删除。

> 我对多线程不太熟悉

我真的很喜欢人们表现出这种态度。你能想象一个厨师，作为一名专业厨师在餐馆工作，说“啊，我不熟悉烤箱，你知道”。或者医生说“好吧，我这里有问题，我不知道如何打针”。鉴于今天我们生活在一个五彩缤纷的世界，这句话只是以一种糟糕的方式尖叫。

# javascript - JQuery 高亮不起作用

> ID：14163470
> 
> 赞同：-2
> 
> 时间：2013-01-04T19:19:32.930
> 
> 标签：javascript, jquery, ruby-on-rails-3, coffeescript

我正在使用 JQuery 来使用 JQuery 本身的文档方面所描述的突出显示效果。 [jQuery 高亮](http://docs.jquery.com/UI/Effects/Highlight)

但是在 tr 或 td 元素上使用它时，我遇到了这个异常：

```
Uncaught TypeError: Object [object Object] has no method 'effect' 
```

我尝试使用像 hide() 这样的简单效果，并且效果确实有效。有人可以帮我吗？我在这里想念什么？

这是我正在使用的代码：

```
 $('.small_form').live "ajax:success", (event, xhr)->
    $(@).parents('tr').effect("highlight", {}, 3000) 
```

它在咖啡脚本中，我还确保 ajax 请求有效。因为我使用此事件获得了其他效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T19:26:19.753

加载 jQuery 后将其添加到您的页面中。

```
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script> 
```

effect 方法是 jQuery UI 的一部分，在尝试使用时需要！

# html - 强调通过 CSS/JS 逐渐消失？

> ID：14163473
> 
> 赞同：1
> 
> 时间：2013-01-04T19:19:41.927
> 
> 标签：html, css, underline

仅使用 CSS/JS 是否有可能实现这种效果？

[http://i.imgur.com/s2RYR.jpg](http://i.imgur.com/s2RYR.jpg)

我只是想知道如果没有图像这是否可行，任何答案都将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:37:38.057

“彼得斯出去”？？您的意思是向右和向左淡出的两条线（顶部和底部） - 是的。如果您制作一个宽度和高度可能为 1px（或 2）的 div，您可以对其应用 css 渐变（具有透明度），它会正常工作。不过，您将不得不接受 IE 世界中的一些限制。您可以使用[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)来设计渐变。

# sql - 在插入命令中将变量添加到现有列名

> ID：14163474
> 
> 赞同：1
> 
> 时间：2013-01-04T19:19:43.133
> 
> 标签：sql, vb.net, variables

我有个问题。我在堆栈和其他网站上研究了这个问题，但没有找到答案。我想要一个插入命令，将字符串附加到现有列名。我有一张表，在不同的月份多次具有相同的列。列示例：**name1**为一月，**name2**为二月。**address1**代表 1 月，**address2**代表 2 月，以此类推。我遇到的唯一想法是如何将变量传递到列的数据中，我需要将变量添加到已经存在的列名中，这样我就不会有多个插入命令。这是我的代码。

```
 If MonthDDL.SelectedValue <> "" Then
        Select Case MonthDDL.SelectedValue  
            Case Is = "January"
                Month = "0"
                monthVar = "January"
            Case Is = "February"
                Month = "1"
                monthVar = "February"
            Case Is = "March"
                Month = "2"
                monthVar = "March"
            Case Is = "April"
                Month = "3"
                monthVar = "April"
            Case Is = "May"
                Month = "4"
                monthVar = "May"
            Case Is = "June"
                Month = "5"
                monthVar = "June"
            Case Is = "July"
                Month = "6"
                monthVar = "July"
            Case Is = "August"
                Month = "7"
                monthVar = "August"
            Case Is = "September"
                Month = "8"
                monthVar = "September"
            Case Is = "October"
                Month = "9"
                monthVar = "October"
            Case Is = "November"
                Month = "10"
                monthVar = "November"
            Case Is = "December"
                Month = "11"
                monthVar = "December"
                'Case Else
        End Select
        selDate = MonthDDL.SelectedValue
    Else
        lblSelect.Visible = True
    End If

DBCONN.Open()
        Dim SqlUpdate = New SqlCommand("SELECT * FROM table WHERE variable = '" + Session("sessionvariable") + "'", DBCONN)

MonthDDL.SelectedValue = monthVar And dr.HasRows = True Then
                SqlUpdateCommd = New SqlCommand("UPDATE table SET [table].[name] '"+ Month +'" = '" & contact & "',[table].[address]'"+ Month +'" = '" + address + "' WHERE variable = '" & Session("sessionvariable") & "'", DBCONN)
        ElseIf MonthDDL.SelectedValue = monthVar And dr.HasRows = False Then
            SqlUpdateCommd = New SqlCommand("INSERT INTO table (name '"+ Month +'", address '"+ Month +'", variable) Values ('" + contact + "', '" + address + "', Session("sessionvariable") + "')", DBCONN) 
```

这可能吗？我是否接近以正确的方式解决这个问题。我为措辞道歉，我是 vb.net 的新手。我什至不确定要搜索什么，这可能就是我没有真正偶然发现答案的原因。先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:25:23.017

德赖特是正确的。您真的不应该这样做，因为除其他外，如果变量是用户可定义的，它会使您的应用程序容易受到 SQL 注入攻击。重新设计数据库模式会更好，更简单，这样您就不会有这样的重复列。

但是，您的代码失败的可能原因是您在变量值之前和之后附加了撇号，例如：

```
"[table].[name '" & variable & "']" 
```

请注意，上面的语句实际上会评估为如下内容：

```
"[table].[name '1']" 
```

但是，你真正想要的可能是这样的：

```
"[table].[name1]" 
```

因此，要做到这一点，您需要执行以下操作：

```
"[table].[name" & variable & "]" 
```

然而，正如我所说，像这样构建动态 SQL 不仅是一个坏主意，而且还表明数据库模式设计不佳。

# linq - 用于将记录添加到数据库的 Linq/Entity Framework 语法

> ID：14163477
> 
> 赞同：1
> 
> 时间：2013-01-04T19:19:52.237
> 
> 标签：linq, entity-framework

我需要使用实体框架将记录添加到数据库中。由于我是使用这种语法的新手，我不确定如何正确编写代码（以下是我的最佳猜测）。

首先，代理必须将他们的信息插入到`Agent`表中。此表生成一个自增主键，称为`SymNumber`. 然后我需要将`SymNumber`其用作插入`AgentIdentification`表的主键。

我已经多次运行此代码，但没有出现错误，但是由于我正在使用单元测试来测试代码，因此我无法确定是否正确添加了代理。其次，我知道一个事实，即在第一次插入后我没有正确抓取表格`SymNumber`生成的内容。`Agent`这是在 Linq 代码中设置为 0 的 int 值，并且在插入 `SymNumber`期间不会更改。`AgentIdentification`

任何帮助将不胜感激！

```
 AgentResourcesEntities _db = new AgentResourcesEntities();

        try
        {
            Agent agent = new Agent();
            agent.EntityType = "P";
            agent.FirstName = agentNewTraining.FirstName;
            agent.LastName = agentNewTraining.LastName;
            agent.LastChangeOperator = agentNewTraining.Requestor;
            agent.LastChangeDate = DateTime.Now;
            if (!String.IsNullOrEmpty(agentNewTraining.NameSuffix)) agent.NameSuffix = agentNewTraining.NameSuffix;

            _db.Agent.AddObject(agent);

            AgentIdentification agentIdentification = new AgentIdentification();
            agentIdentification.SymNumber = agent.SymNumber;
            agentIdentification.ReferenceType = "S";
            agentIdentification.DummyReference = 0;
            agentIdentification.LastChangeOperator = agentNewTraining.Requestor;
            agentIdentification.LastChangeDate = DateTime.Now;

            _db.AgentIdentification.AddObject(agentIdentification);

            return true;
        }
        catch (Exception)
        {
            return false;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:35:58.227

First you need to call

```
_db.SaveChanges(); 
```

to get your changed persisted.

But if you want also synchronize (get the new generated value) your `agent.SymNumber` you will need to call `SaveChanges()` right after adding it to context.

So the code will be like:

```
/// ...... ////
_db.Agent.AddObject(agent);
_db.SaveChanges();

AgentIdentification agentIdentification = new AgentIdentification();
agentIdentification.SymNumber = agent.SymNumber;  // sym number is now synchronized from DB
 ///...../////

_db.AgentIdentification.AddObject(agentIdentification);
_db.SaveChanges(); 
```

But if `SymNumber` is foreign key so the `AgentIdentification` has could have reference to some `Agent` instance, you can just tie those instances with that reference and would not need to call that additional `SaveChanges()` in the middle.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:28:03.740

`_db.SaveChanges()`插入后调用。

# matlab - 文本扫描迭代

> ID：14163479
> 
> 赞同：1
> 
> 时间：2013-01-04T19:19:59.437
> 
> 标签：matlab, textscan

我有一些文件要处理，但我正在使用的中间缺少文件

> 对于 i=1：文件；
> 
> fid = fopen(['Raw',num2str(i),'.txt']);
> 
> D = textscan(fid1,'%*f %f%*f%*f%*f% *f%f%* [^\n]','delimiter',';','headerlines',50,'CollectOutput' , 1);
> 
> fclose(fid);

现在，当我按顺序整理文件时，程序的其余部分运行良好

即，我的文件夹中有 100,200 个任意数量的文件，依次为 Raw1.txt、Raw2.txt、Raw3.txt、...。

一旦缺少 Raw1.txt、Raw4.txt、Raw5.txt 等文件，我就会遇到麻烦

我如何迭代我的文本扫描，以便它可以忽略文件编号？

谢谢

编辑 ：

通过丢失文件，我主要是指“原始”之后的数字

我的文件生成为 Raw1、Raw2、Raw3............ Raw400.txt

当所有文件都井井有条并且存在时，我没有问题。

当我有一些缺失或跳跃时，例如 Raw1 。Raw2........ Raw10, Raw15, Raw16 我有麻烦，因为从 Raw10.txt 跳转到 Raw15.txt 如果我的文件从 Raw1.txt 以外的任何地方开始，我也会遇到同样的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:14:05.990

[`exist`](http://www.mathworks.com/help/matlab/ref/exist.html)在 matlab 文档中查找。像这样的东西应该工作：

```
for i=1:file;

    if exist(['Raw',num2str(i),'.txt'], 'file')
       % File exists!
       fid = fopen(['Raw',num2str(i),'.txt']);
       D = textscan(fid1,'%*f %f%*f%*f%*f%f%f%[^\n]','delimiter',';', 'headerlines',50,'CollectOutput', 1);
       fclose(fid);
    end

end 
```

请注意， 也会`exist(Name, 'file')`检查**文件的目录**，因此要么给出完整的文件名（即带路径），要么尝试类似`if exist(Name, 'file') == 2`

# .net - 如何使用 Visual Studio Setup projct 检测依赖项并中止安装

> ID：14163484
> 
> 赞同：3
> 
> 时间：2013-01-04T19:20:17.857
> 
> 标签：.net, visual-studio-2010, visual-studio-setup

在使用使用 Visual Studio 2010 创建的安装程序安装和应用程序之前，我需要检测 2 个条件。

**检测现有应用程序**

除非已经安装了另一个应用程序，否则我不需要安装应用程序。例如，如果 PC 上未安装 MS Office，则会提醒用户并中止安装。

**检测安装在 GAC 中的程序集**

我还需要检查程序集是否在 GAC 中。检查 GAC 中是否有特定版本或更高版本是理想的。

我不想包含程序集或安装先决条件。我只需要验证它是否已安装，如果没有提醒用户并中止安装。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T23:01:53.220

处理这种情况的最好方法是使用启动条件

您可以通过右键单击您的设置项目并选择来打开启动条件编辑器

`View`->`Launch Conditions`

![在此处输入图像描述](../Images/a0cfeef02b37d06d813a765eff9016f8.png)

**检测现有应用程序**

一种检测现有应用程序的方法，您可以设置注册表搜索和启动条件（右键单击搜索目标机器 -> 添加注册表搜索）

登记处搜索办公室 10 的属性可能是

```
Name: Search for Office 10
Property: OFFICE10REGISTRY
RegKey: SOFTWARE\Microsoft\Office\10.0\Common\InstallRoot
Root: vsdrrHKLM
Value: Path 
```

然后您可以使用这些属性添加启动条件

```
Name: Office Installed Condition
Condition: OFFICE10REGISTRY
Message: Office 10 not detected 
```

如果您想搜索任何 Office 版本，您可以创建多个注册表搜索，然后使用`OFFICE10REGISTRY OR OFFICE11REGISTRY OR OFFICE12REGISTRY`.

**检测安装在 GAC 中的程序集**

这次你添加一个文件搜索来搜索 gac 中安装的文件。

```
Name:Search for Assembly In GAC
Depth: 5
FileName: Microsoft.JScript.dll
Folder: [WindowsFolder]\assembly\GAC\Microsoft.JScript
MaxVersion: 8
MinVersion: 7
Property: JSCRIPTEXISTS 
```

请注意，文件名是 dll，文件夹遵循命名空间的模式。另请注意，如果需要，您可以仅指定最低版本。

然后添加启动条件

```
Name: Assembly Gac Condtion
Condition: JSCRIPTEXISTS
Message: Missing JScript 
```

完成后，最终结果可能如下所示

![在此处输入图像描述](../Images/2bb61a3930c9888de15d03fbe1889790.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:06:57.420

由于您需要进行 2 次检查，我建议您通过派生 Installer 类来编写自定义安装步骤 (http://msdn.microsoft.com/en-us/library/79e7ka7s(v=vs.100).aspx)

在这里你应该重写 OnBeforeInstall 方法并编写你的逻辑来检查

1.  如果安装了先决条件应用程序
2.  如果程序集在 GAC 中

如果任一检查失败，您可以抛出异常，安装将停止。

对于 prereq 应用程序，我建议您检查注册表配置单元。Windows 为每个已安装的应用程序创建一个注册表项。

对于 GAC 检查，我建议您尝试在不指定路径的情况下反射加载程序集。如果程序集加载，可以安全地假设它在 GAC 中

希望这可以帮助

干杯，丹麦

# facebook - 保留 Facebook 点赞、301 重定向、href 标签和规范 URL

> ID：14163490
> 
> 赞同：1
> 
> 时间：2013-01-04T19:20:50.273
> 
> 标签：facebook, wordpress, facebook-like

> **可能重复：**
> [如何通过 301 重定向移动 URL 并保留页面的 Facebook 点赞和 Open Graph 信息？](https://stackoverflow.com/questions/7197919/how-can-i-move-a-url-via-301-redirect-and-retain-the-pages-facebook-likes-and-o)

我们最近将我们的网站从自定义 CMS 迁移到了 Wordpress，我们正在拼命地保留喜欢的内容。

在开发过程中，我们只是通过 href 标记将新 URL 中的 Like 按钮指向旧 URL。喜欢转移罚款。

```
<fb:like href='$url' send='false' layout='button_count' width='150' show_faces='false'></fb:like> 
```

`$url`旧网址在哪里

当我们上线时，所有喜欢都重置为零，我猜我们同时通过 .htaccess 设置了 301 重定向。

奇怪的是，我对 FB 评论框使用了相同的程序，并且所有评论都完美转移了！

```
<div class="fb-comments" data-href="$url" data-width="500"></div> 
```

有没有人对此有任何见解？除了 facebook like box 上的 href 标签之外，我还需要在其他地方存储旧版 url 吗？

例如，我注意到 OG:url 指向当前页面，FB 调试器工具证明了这一点。

也许原始 URL 需要保持活动状态——不仅仅是通过 301？

另请注意，FB 喜欢在未经过 301 处理的页面上仍然可以正常工作。[以这个页面为例。](http://www.craftbeer.com/beer-studies/beer101-course)

[这是一个例子](http://www.craftbeer.com/craft-beer-muses/should-the-shaker-pint-glass-go-away)带有喜欢重置的旧帖子的示例。原始网址是：www.craftbeer.com/pages/stories/craft-beer-muses/show?title=should-the-shaker-pint-glass-go-away

新帖子跟踪喜欢就好了。

感谢您提供任何帮助！

# lucene - 使用边缘 NGrams 进行索引以进行预输入

> ID：14163491
> 
> 赞同：3
> 
> 时间：2013-01-04T19:20:58.983
> 
> 标签：lucene, elasticsearch

我试图让 Elasticsearch 索引一些文档以获取预先输入的建议。据我所知，Elasticsearch 中的边缘 NGram 处理是由下面的 Lucene 提供的。不幸的是，事实证明 Lucene 在这方面的文档对我来说很难理解。我想出的最好的方法是基于[https://gist.github.com/988923](https://gist.github.com/988923)，但它似乎不起作用（具有这些设置的索引仅返回完整单词的匹配项，就好像设置没有存在）：

```
{
  "settings":{
    "index":{
      "analysis":{
        "analyzer":{
          "typeahead_analyzer":{
            "type":"custom",
            "tokenizer":"edgeNGram",
            "filter":["typeahead_ngram"]
          }
        },
        "filter":{
          "typeahead_ngram":{
            "type":"edgeNGram",
            "min_gram":1,
            "max_gram":8,
            "side":"front"
          }
        }
      }
    }
  }
} 
```

我真的不知道分析器、标记器和过滤器是如何结合在一起的——我什至想要一个过滤器吗？我应该只有一个标记器吗？当我为要使用的文档编制索引时，是否必须参考这些设置？如何找出 Lucene 下面对给定索引使用的设置？我该如何调试？帮助 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:00:08.693

我使用 edgeNGram 解决了这个问题。以下是我用来完成此任务的映射和分析。

```
{
"analysis": {
    "analyzer": {
        "str_search_analyzer": {
            "tokenizer": "standard",
            "filter": [
                "lowercase"
            ]
        },
        "str_index_analyzer": {
            "tokenizer": "standard",
            "filter": [
                "lowercase",
                "substring"
            ]
        }
    },
    "filter": {
        "substring": {
            "type": "edgeNGram",
            "min_gram": 1,
            "max_gram": 10,
            "side": "front"
        }
    }
} 
```

}

```
{
"index_name": {
    "properties": {
        "location": {
            "type": "geo_point"
        },
        "name": {
            "type": "string",
            "index": "analyzed",
            "search_analyzer": "str_search_analyzer",
            "index_analyzer": "str_index_analyzer"
        }
    }
} 
```

}

一个重要的脚注是，我需要使用带有 AND 运算符的匹配查询来正确查询。

希望这可以帮助。

# python - 可选参数一直指向相同的值

> ID：14163496
> 
> 赞同：0
> 
> 时间：2013-01-04T19:21:19.090
> 
> 标签：python

> **可能的重复：**
> [Python 中的“Least Astonishment”：可变默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)

我正在尝试编写一个在 Python 2.7.3 中随机化列表的函数。这样做的代码是这样的：

```
import random

def randomize_list(l, new=[]):
    if not len(l):
        return new

    print id(l), id(new)

    l1 = list(l)

    new.append(l1.pop(
        random.choice(list(range(len(l1))))
    ))

    return randomize_list(l1, new) 
```

如果我导入此函数并多次调用它，`id(new)`, 总是返回相同的值，并且每次后续调用都会`randomize_function`将项目添加到先前调用的结果中。因此，例如：

```
>>> a = [1,2,3,4]
>>> randomize_list(a)
35192344 35234016
16126176 35234016
16126536 35234016
16126896 35234016
[2,3,4,1]
>>> randomize_list(a)
35192344 35234016
35193488 35234016
35193344 35234016
16126608 35234016
[2,3,4,1,3,2,1,4]
... and so on 
```

为什么会发生这种情况，我该如何解决？

# javascript - 使用 Ajax 上传 DOM 图像 - 将图像转换为文件？

> ID：14163502
> 
> 赞同：3
> 
> 时间：2013-01-04T19:22:09.493
> 
> 标签：javascript, ajax, image, file, upload

我需要上传图片。在上传图像之前，我从文件输入中获取它，使用画布调整它的大小，然后将结果保存为 DOM 中的图像元素。如何将我的 Image 对象转换为文件对象，以便我可以使用 ajax 上传它？

编辑：

这是我所做的：

```
$.fitIn = function( size, bbox ) {

    var r = size.w / size.h;

    if( r > bbox.w / bbox.h ) {
        var newW = bbox.w,
            newH = newW / r;

    } else {
        var newH = bbox.h,
            newW = newH * r;
    }

    return { w: newW, h: newH };
};

$.resizeImage = function( image, newW, newH, outputFormat ) {

    if( null == outputFormat ) {
        var temp = image.src.split( '.' );
        outputFormat = temp[temp.length - 1];
    }

    var canvas = document.createElement( 'canvas' );
    canvas.width = newW;
    canvas.height = newH;

    var context = canvas.getContext( '2d' );
    context.drawImage( image, 0, 0, newW, newH );

    var newImage = document.createElement( 'img' );
    newImage.src = canvas.toDataURL( 'image/' + outputFormat );

    return newImage;
};

$.createThumb = function( image ) {

    var newSize = $.fitIn(
        { w: image.width, h: image.height },
        { w: THUMB_W, h: THUMB_H }
    );

    return $.resizeImage( image, newSize.w, newSize.h, THUMB_FORMAT );
}; 
```

进而 ：

```
var originalImage = document.getElementById('testImage');
var newImage = lwf.resizeImage(originalImage, 480, 270); 
```

（$ 不是 jquery）

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T19:34:00.860

如果有的话，您可以使用 canvas.toDataURL() 来获取 base64 编码的字符串。将其发送到服务器，对其进行解码并将其保存为文件。

# android - Android - 保存统计数据（来自 Tamagotchi 应用程序）

> ID：14163506
> 
> 赞同：1
> 
> 时间：2013-01-04T19:22:28.310
> 
> 标签：android, save, sharedpreferences

我有一个名为 Stats 的类和一个 Main Activity。Stats 类具有一些值，例如：生命、饥饿、睡眠、级别等，带有 Getter 和 Setter 方法。

如何在应用程序关闭后保存我的统计信息并在应用程序启动时加载统计信息？（统计类没有活动）我用 SharedPreference 尝试过，但失败了。我应该用别的东西试试吗？

解决方案：我上了一个带有静态方法的课程。静态的，因为我想在其中包含 getter 和 setter。即使没有它也可以，但它太复杂了。然后传递应用程序的上下文和设置器的值。以及吸气剂中的上下文。

```
package at.android.dertestloerk;

import android.content.Context;
import android.content.SharedPreferences;
import android.preference.PreferenceActivity;

public class SettingsLoerg extends PreferenceActivity {

    private static final String KEY_HUNGER = "key_hunger";
    private static final String KEY_SLEEP = "key_sleep";
    private static final String KEY_LIFE = "key_life";
    private static final String KEY_LEVEL = "key_level";

    public static SharedPreferences getPrefs(Context context) {

        return context.getSharedPreferences("PreferenceLoerg", Context.MODE_PRIVATE);

    }

    public static int getHunger(Context context) {
        return getPrefs(context).getInt(KEY_HUNGER, -1);
    }

    public static void setHunger(int hunger, Context context) {
        getPrefs(context).edit().putInt(KEY_HUNGER, hunger).commit();
    }

    public static int getSleep(Context context) {
        return getPrefs(context).getInt(KEY_SLEEP, -1);
    }

    public static void setSleep(int sleep, Context context) {
        getPrefs(context).edit().putInt(KEY_SLEEP, sleep).commit();
    }

    public static int getLife(Context context) {
        return getPrefs(context).getInt(KEY_LIFE, -1);
    }

    public static void setLife(int life, Context context) {
        getPrefs(context).edit().putInt(KEY_LIFE, life).commit();
    }

    public static int getLevel(Context context) {
        return getPrefs(context).getInt(KEY_LEVEL, -1);
    }

    public static void setLevel(int level, Context context) {
        getPrefs(context).edit().putInt(KEY_LEVEL, level).commit();
    }
} 
```

# android - 在 Android 中使用 YouTube 数据 API

> ID：14163513
> 
> 赞同：3
> 
> 时间：2013-01-04T19:22:48.730
> 
> 标签：android, youtube-api, gdata-api

我正在尝试在我的 android 应用中使用 YouTube Data Api。当我尝试将它作为 java 项目运行时，它运行良好，没有任何错误。但是当我尝试在我的 android 应用程序中做同样的事情时，应用程序强制关闭。这是 logcat 的输出和我的代码。

LOGCAT 的输出

```
01-05 00:13:17.198: E/AndroidRuntime(627): FATAL EXCEPTION: main
01-05 00:13:17.198: E/AndroidRuntime(627): java.lang.ExceptionInInitializerError
01-05 00:13:17.198: E/AndroidRuntime(627):  at com.example.allinonedata.YouTubeManager.retrieveVideos(YouTubeManager.java:29)
...
01-05 00:13:17.198: E/AndroidRuntime(627): Caused by: java.lang.NoClassDefFoundError: com.google.gdata.data.media.MediaSource 
```

这是代码 mainactivity.java

```
 package com.example.allinonedata;
 import java.util.List;

  import android.os.Bundle;
  import android.app.Activity;
  import android.view.Menu;

   public class MainActivity extends Activity {
String clientID = "JavaCodeGeeks";
String textQuery = "nexus 4";
int maxResults = 1;
boolean filter = true;
int timeout = 2000;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    YouTubeManager ym = new YouTubeManager(clientID);
    try{
    List<YouTubeVideo> videos = ym.retrieveVideos(textQuery, maxResults, filter, timeout);

    for (YouTubeVideo youtubeVideo : videos) {
        System.out.println(youtubeVideo.getWebPlayerUrl());

        System.out.println("Thumbnails");
        for (String thumbnail : youtubeVideo.getThumbnails()) {
            System.out.println("\t" + thumbnail);
        }
        System.out.println(youtubeVideo.getEmbeddedWebPlayerUrl());
        System.out.println("**************************************************");
    }
    }
    catch(Exception e)
    {

    }
} 
```

}

youtubemanager.java

```
 package com.example.allinonedata;

 import java.net.URL;
 import java.util.LinkedList;
 import java.util.List;

 import com.google.gdata.client.youtube.YouTubeQuery;
 import com.google.gdata.client.youtube.YouTubeService;
 import com.google.gdata.data.media.mediarss.MediaThumbnail;
 import com.google.gdata.data.youtube.VideoEntry;
 import com.google.gdata.data.youtube.VideoFeed;
 import com.google.gdata.data.youtube.YouTubeMediaContent;
 import com.google.gdata.data.youtube.YouTubeMediaGroup;

 public class YouTubeManager {

private static final String YOUTUBE_URL = "http://gdata.youtube.com/feeds/api/videos";
private static final String YOUTUBE_EMBEDDED_URL = "http://www.youtube.com/v/";

private String clientID;

public YouTubeManager(String clientID) {
    this.clientID = clientID;
}

public List<YouTubeVideo> retrieveVideos(String textQuery, int maxResults, 
        boolean filter, int timeout) throws Exception {

    YouTubeService service = new YouTubeService(clientID);
    service.setConnectTimeout(timeout); // millis
    YouTubeQuery query = new YouTubeQuery(new URL(YOUTUBE_URL));

    query.setOrderBy(YouTubeQuery.OrderBy.RELEVANCE);
    query.setFullTextQuery(textQuery);
    query.setSafeSearch(YouTubeQuery.SafeSearch.NONE);
    query.setMaxResults(maxResults);

    VideoFeed videoFeed = service.query(query, VideoFeed.class);        
    List<VideoEntry> videos = videoFeed.getEntries();

    return convertVideos(videos);

}

private List<YouTubeVideo> convertVideos(List<VideoEntry> videos) {

    List<YouTubeVideo> youtubeVideosList = new LinkedList<YouTubeVideo>();

    for (VideoEntry videoEntry : videos) {

        YouTubeVideo ytv = new YouTubeVideo();

        YouTubeMediaGroup mediaGroup = videoEntry.getMediaGroup();
        String webPlayerUrl = mediaGroup.getPlayer().getUrl();
        ytv.setWebPlayerUrl(webPlayerUrl);

        String query = "?v=";
        int index = webPlayerUrl.indexOf(query);
        String embeddedWebPlayerUrl = webPlayerUrl.substring(index+query.length());
        embeddedWebPlayerUrl = YOUTUBE_EMBEDDED_URL + embeddedWebPlayerUrl;
        ytv.setEmbeddedWebPlayerUrl(embeddedWebPlayerUrl);

        List<String> thumbnails = new LinkedList<String>();
        for (MediaThumbnail mediaThumbnail : mediaGroup.getThumbnails()) {
            thumbnails.add(mediaThumbnail.getUrl());
        }           
        ytv.setThumbnails(thumbnails);

        List<YouTubeMedia> medias = new LinkedList<YouTubeMedia>();
        for (YouTubeMediaContent mediaContent : mediaGroup.getYouTubeContents()) {
            medias.add(new YouTubeMedia(mediaContent.getUrl(), mediaContent.getType()));
        }
        ytv.setMedias(medias);

        youtubeVideosList.add(ytv);

    }

    return youtubeVideosList;

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T07:30:05.960

google-api-java-client（与 gdata-client 不同，它确实支持 Android）以前不支持 Youtube Data API，但随着 v3 的发布，现在已经纠正了；这个客户端现在有很好的 Youtube 支持，应该可以为你提供你需要的东西。有关详细信息和代码示例，请参见此处：

[https://developers.google.com/api-client-library/java/apis/youtube/v3](https://developers.google.com/api-client-library/java/apis/youtube/v3)

以及此处的入门指南

[https://developers.google.com/youtube/v3/getting-started](https://developers.google.com/youtube/v3/getting-started)

# python - Python 从路径导入

> ID：14163515
> 
> 赞同：0
> 
> 时间：2013-01-04T19:22:52.663
> 
> 标签：python, import, path

我正在使用portable-python，但无法找到将.py 文件链接到portable-python 解释器的方法（这意味着我不能只是双击我的脚本来运行它们）。我一直在通过将脚本拖到路径可移植python检查然后导入它们来解决这个问题。

前任：

```
import random_py_file 
```

但是有没有办法用绝对/相对路径替换文件名？

前任：

```
import C:\file\script.py 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:25:34.370

这适用于linux；但是，我不确定 Windows。本质上，您正在做的是添加一条路径，python 将在其中查找您的脚本。

```
sys.path.append('C:\file')
import script 
```

[在这里](http://docs.python.org/2/using/windows.html#excursus-setting-environment-variables)查看如何使其永久化。

# database - yii CActiveRecord with()

> ID：14163517
> 
> 赞同：3
> 
> 时间：2013-01-04T19:22:56.073
> 
> 标签：database, foreach, yii

我有以下代码，当我调用我的 find 方法时，它向我显示：第 784 行的 CActiveFinder 中的“为 foreach() 提供的参数无效”：

```
$pk=array();
784             foreach($this->_pkAlias as $name=>$alias)
785             {
786                 if(isset($row[$alias]))
787                     $pk[$name]=$row[$alias];
788                 else    // no matching related objects
789                     return null;
790             }
791             $pk=serialize($pk); 
```

到达此代码时失败：

```
$objCampanie = $modelCampanii->with('stocs')->findAll(); 
```

Campanii类的关系：

```
 * @property Stoc[] $stocs
* @property Vanzari[] $vanzaris
public function relations()
{
    return array(
        'stocs' => array(self::HAS_MANY, 'Stoc', 'id_campanie'),
        'vanzaris' => array(self::HAS_MANY, 'Vanzari', 'id_campanie'),
    );
} 
```

类 Stoc 的关系

```
* @property Produse $codProdus
* @property Campanii $idCampanie
* @property Vanzari[] $vanzaris
public function relations()
{
    return array(
        'codProdus' => array(self::BELONGS_TO, 'Produse', 'cod_produs'),
        'idCampanie' => array(self::BELONGS_TO, 'Campanii', 'id_campanie'),
        'vanzaris' => array(self::HAS_MANY, 'Vanzari', 'cod_produs'),
    );
} 
```

哪里有问题？为什么它不检索我的代码？

表结构： Campanii：

```
CREATE TABLE IF NOT EXISTS `campanii` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`nume` varchar(255) NOT NULL,
`data_comanda` date NOT NULL,
`data_scadenta` date NOT NULL,
PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=7 ; 
```

股票：

```
CREATE TABLE IF NOT EXISTS `stoc` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`id_campanie` int(11) NOT NULL,
`cod_produs` varchar(10) NOT NULL,
`cantitate` int(11) NOT NULL,
`pret` double NOT NULL DEFAULT '0',
PRIMARY KEY (`id`),
KEY `id_campanie` (`id_campanie`),
KEY `cod_produs` (`cod_produs`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=6 ;
--
-- Constraints for table `stoc`
--
ALTER TABLE `stoc`
  ADD CONSTRAINT `stoc_ibfk_1` FOREIGN KEY (`id_campanie`) REFERENCES `campanii` (`id`),
  ADD CONSTRAINT `stoc_ibfk_2` FOREIGN KEY (`cod_produs`) REFERENCES `produse` (`cod`); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T21:39:58.667

问题是由于`stoc`表中缺少主键。原因如下：

```
private function populateRecord($query,$row)
{
    // determine the primary key value
    if(is_string($this->_pkAlias))  // single key
    {
        if(isset($row[$this->_pkAlias]))
            $pk=$row[$this->_pkAlias];
        else    // no matching related objects
            return null;
    }
    else // is_array, composite key
    {
        $pk=array();
        foreach($this->_pkAlias as $name=>$alias)
        {
            if(isset($row[$alias]))
                $pk[$name]=$row[$alias];
            else    // no matching related objects
                return null;
        }
        $pk=serialize($pk);
    }
... 
```

上面的代码来自 CActiveFinder。如您所见，如果表的 _pkAlias 不是字符串，则它假定它是一个数组，而不检查是否存在任何主键。

因此，当您调用 时`with('stocs')`，CActiveFinder 会尝试填充相关记录（意思`populateRecord`是被调用），它会尝试将 PK 作为其正常过程的一部分，因此由于缺少 PK 而失败。

归根结底，这是框架代码中错误假设的结果。它可以通过简单地创建一个 PK 来解决（如您所见）。

您可以从第 385 行开始查看 CActiveFinder，以了解 的值`_pkAlias`是如何设置的。

[https://github.com/yiisoft/yii/blob/1.1.13/framework/db/ar/CActiveFinder.php](https://github.com/yiisoft/yii/blob/1.1.13/framework/db/ar/CActiveFinder.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T08:00:24.587

在 Yii 框架从 1.1.11 更新到 1.1.14 后，我在 CActiveFinder(834) 中遇到了同样的错误。更新前一切正常，所有主键都已设置。

经过一番挣扎后，我发现清理 YiiCache 时错误消失了（我在配置中启用了 CDbCache）。

`TRUNCATE YiiCache`或者`DELETE FROM YiiCache`

# python - Z3Py 中的替换

> ID：14163518
> 
> 赞同：1
> 
> 时间：2013-01-04T19:22:56.877
> 
> 标签：python, z3

似乎`substitute(f,t)`Z3Py 中的函数`f`在进行替换之前首先进行了简化。有没有办法禁止这样做？

我希望发生以下行为：

```
f = And(x,Not(x))
result = substitute(f,*[(Not(x),BoolVal(True))])  #sub Not(x) => True
#if we simplify f first then the result = False,  but if we do the substitution first then result = x 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T02:26:58.367

不幸的是，该`substitute`过程是使用可以在简化期间应用替换的简化器来实现的。`substitute`Python 过程调用`Z3_substitute`文件[api_ast.cpp](http://z3.codeplex.com/SourceControl/changeset/view/c430fe26aa30#src/api/api_ast.cpp)中的Z3 C API 。在内部，简化器称为`th_rewriter`（理论重写器）。

话虽如此，我同意这不好，在某些情况下可能非常不方便。我将在下一个版本中更改它。

# python - 在 wxpython 应用程序中创建我自己的教程

> ID：14163519
> 
> 赞同：1
> 
> 时间：2013-01-04T19:22:58.483
> 
> 标签：python, wxpython

我创建了自己的 wxpython 应用程序并使用 PyInstaller 编译它。我有一个包含在应用程序中的教程（只是一个记事本文件）。我的 python 代码只是打开文件（os.startfile），用户可以阅读它。但是，我想构建我自己的大多数应用程序中看到的教程/故障排除指南。我缺少这个或 wxpython 对话框的模板吗？

当我尝试用谷歌搜索时，我得到的只是 wxpython 教程本身（没有帮助）。

我希望能够拥有索引教程、搜索能力和故障排除指南。

任何帮助/方向将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:30:19.790

The closer widget I know in wx is the wizard dialog [wx.wizard](http://wxpython.org/docs/api/wx.wizard.Wizard-class.html).
You have a tutorial [here](http://www.blog.pythonlibrary.org/2011/01/27/wxpython-a-wizard-tutorial/)

It has not searching facilities, etc but probably you could add them programmatically

# ruby-on-rails - 如何在 PSQL 中删除唯一的多列索引？

> ID：14163521
> 
> 赞同：0
> 
> 时间：2013-01-04T19:22:58.833
> 
> 标签：ruby-on-rails, activerecord, postgresql-9.1, psql

我已将以下索引添加到我的一张表中：

```
add_index :referral_codes, [:campaign, :subscriber], unique: true 
```

然后我想通过添加它来测试速度增益，但我无法从我的 psql 数据库中删除索引。根据文档，这是不可能的，但据我所知，他们没有提供任何解释：

[删除索引](http://www.postgresql.org/docs/9.2/static/sql-dropindex.html)

...使用此选项时需要注意几个注意事项。只能指定一个索引名称，不支持 CASCADE 选项。（因此，不能以这种方式删除支持 UNIQUE 或 PRIMARY KEY 约束的索引。）...

我最终回滚了我的迁移进行检查，但必须有一个原生的 psql 方式，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T00:20:23.917

您可以使用 SQL 删除任何 PG 索引：

```
DROP INDEX <INDEX NAME> 
```

rails 会自动为您生成索引名称。如果您使用以下命令连接到数据库，您可以看到已定义索引的列表`psql`：`\di`。这将输出当前为您的数据库定义的索引列表。只需将名称复制到`DROP INDEX`命令中，就可以了。

# sql - SQL 不同框结果

> ID：14163526
> 
> 赞同：1
> 
> 时间：2013-01-04T19:23:16.720
> 
> 标签：sql

不知道怎么用文字写出来

```
Column A.       Col. B.           Col. C
123456\.           Xxx.               Abbd
123456\.           Yyy.               Bbbd
765432\.           Xxx.               1234
765432\.           Yyy.                5167
987654\.           Zzz.                Abcd
987654\.           Yyy.                Dbca 
```

不同的col。A 当 B 是 xxx 返回 col.A 和 col. B 和 C 其中 B 是 Yyy

```
Results
123456\. Yyy.   Bbbd
765432\.  Yyy.  5167 
```

但不返回

```
987654 yyy dbca 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:27:58.443

好的，所以你需要`JOIN`反对同一张桌子，其中一侧返回`Column A`where `B`= `Xxx.`。使用这些，获取`B = Yyy.` `987654`不会返回的行，因为它没有行`ColB = 'Xxx.'`

```
SELECT
  main.ColumnA,
  main.ColB,
  main.ColC
FROM 
  yourtable main
  /* Join a second instance of the table which will be limited by ColB = Xxx */
  JOIN yourtable xids ON main.ColumnA = xids.ColumnA
WHERE
  /* And limit the main instance to ColB = Yyy */
  main.ColB = 'Yyy.'
  AND xids.ColB = 'Xxx.' 
```

[http://sqlfiddle.com/#!2/b65d0/3](http://sqlfiddle.com/#!2/b65d0/3)

# windows - 如何在 Windows XP 中为特定应用程序使用特定代理地址？

> ID：14163527
> 
> 赞同：0
> 
> 时间：2013-01-04T19:23:19.900
> 
> 标签：windows, proxy, ip, network-protocols

我有一个聊天客户端应用程序。当我通过该应用程序连接到互联网并与其他人聊天时，该应用程序使用我的 ISP 的 IP 连接到互联网并通过该 IP 传输数据。我可以使用特定的代理地址，例如：(50.17.156.80:3128) 来强制该聊天应用程序连接到互联网并通过此 IP 传输数据吗？

这是 IP：50.17.156.80 & 这是端口：3128

请注意：如果需要，我们可以在浏览器中使用代理地址来连接互联网。

那么，我可以为聊天应用程序使用相同的系统，以便它通过该代理 IP 传输数据吗？如果是，请告诉我如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:40:05.557

您可以使用 Proxifier 并添加代理服务器，然后为使用此代理服务器的聊天应用程序定义规则。

1.  代理服务器...
2.  代理规则...设置

# jquery - 如何使用jQuery模拟点击href

> ID：14163528
> 
> 赞同：-4
> 
> 时间：2013-01-04T19:23:21.470
> 
> 标签：jquery, href, eventtrigger

我无法在文档加载时触发点击事件到 href。

我读了一些答案，但没有人工作。这是因为我以一种特殊的方式使用 thiese ；它用于模拟标签。

这是我的html代码：

```
<div align="center">
    <ul id="tabs">
      <li><a href="#tabArticles" id="TA">Articles</a></li>
      <li><a href="#tabUtilisateurs" id="TU">Utilisateurs</a></li>
    </ul>
    <div class="container" id="tabArticles">
    ....
    </div>
    <div class="container" id="tabUtilisateurs">
    ....
    </div>
</div> 
```

模拟标签的css代码：

```
#tabs {
    border:0px; 
    height:0px;  
    padding-top:0px;
    -moz-box-shadow: inset 0 -2px 2px #dadada;
    -webkit-box-shadow:inset  0 -2px 2px #dadada;
    box-shadow: inset 0 -2px 2px #dadada;
    border-top-left-radius:4px;  
    border-top-right-radius:4px;
}
#tabs li {
    float:left; 
    list-style:none; 
    border-top:1px solid #ccc; 
    border-left:1px solid #ccc; 
    border-right:1px solid #ccc; 
    margin-right:5px; 
    border-top-left-radius:3px;  
    border-top-right-radius:3px;
    -moz-box-shadow: 0 -2px 2px #dadada;
    -webkit-box-shadow:  0 -2px 2px #dadada;
    box-shadow: 0 -2px 2px #dadada;
}
#tabs li a {
    font-family:Arial, Helvetica, sans-serif; 
    font-size:13px;
    font-weight:bold; 
    color:#000000; 
    padding:7px 14px 6px 12px; 
    display:block; 
    background:#dddddd;  
    border-top-left-radius:3px; 
    border-top-right-radius:3px; 
    text-decoration:none;
    background: -moz-linear-gradient(top, #ebebeb, #cccccc 10%);  
    background: -webkit-gradient(linear, 0 0, 0 10%, from(#ebebeb), to(#cccccc));  
    border-top: 1px solid white; 
    text-shadow:-1px -1px 0 #fff;
    outline:none;
}

#tabs li a.inactive{
    padding-top:5px;
    padding-bottom:5px;
    color:#bbbbbb;
    background: -moz-linear-gradient(top, #dedede, #cccccc 75%);  
    background: -webkit-gradient(linear, 0 0, 0 75%, from(#dedede), to(white));  
    border-top: 1px solid white; 
}
#tabs li a:hover, #tabs li a.inactive:hover {
    border-top: 1px solid #dedede;
    color:#000000;
}

.container{ 
    clear:both;          
    padding:10px 0px; 
    width:1110px; 
    background-color:#ccc; 
    text-align:left;     
} 
```

（我在互联网上找到它：它工作正常！）

默认情况下，显示“tabArticles”。但有时我想在文档加载时显示“TabUtilisateurs”。我尝试：

*   用 jQuery 触发“点击”，
*   window.location.href = "#tabUtilisateurs",
*   编程一个事件（一个相当复杂的......）。

=> 什么都没发生！！

任何想法 ？

谢谢您的帮助 ！！

PS 在关于 javascript 代码的评论之后：我的 javascript 代码非常繁重（jQuery-ui 对话框表单和 jqGrids）并且可以工作。有趣的部分（标签是主题）是这样的：

```
$(function() {
    var largeurTab = Math.round((screen.width - 1120) / 2) + 50; // Où doivent se situer les onglets

    $('#tabs li a:not(:first)').addClass('inactive');
    $('.container:not(:first)').hide();

    $('#tabs').css("padding-left", largeurTab);

    if($("#fonction").text() == "user") { // Affichage de l'onglet Utilisateurs - this test works !
        var href = $("#TU").attr('href');
        alert("href = " + href);
        window.location.href = href;
    } 

.... here the dialogs, grids, and so on .....

} 
```

我确切地说，我只想显示“tabUtilisateurs”选项卡，而不需要真正的鼠标点击，而是通过任何方式模拟它。我正在寻找好的 javascript 代码；这就是为什么我没有先向您展示任何 javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:13:22.587

我只在页面加载开始时控制选项卡：

```
if($("#fonction").text() == "user") { // Affichage de l'onglet Utilisateurs
    $('#tabs li a:not(#TU)').addClass('inactive');
    $('.container:not(#tabUtilisateurs)').hide();
} else {
    $('#tabs li a:not(:first)').addClass('inactive');
    $('.container:not(:first)').hide();
} 
```

只有两个选项卡；将来可能会有更多：我将放置一个开关/案例结构来显示正确的选项卡。

谢谢大家！！我喜欢这个网站！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:24:16.243

为什么不只显示您想要的选项卡而不是“单击”它？您是否正在尝试同时运行额外的代码？

```
if($("#fonction").text() == "user") { // Affichage de l'onglet Utilisateurs - this test works !
    //hide current tab
    $('#tabs li a').filter('.inactive').addClass('inactive');
    $('.container:visible').hide();
    //show new tab
    $('#tabs li a#TA').removeClass('inactive');
    $('.container#TA').show();
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-04T19:26:19.877

由于您还没有显示一些 JS 代码，所以我做了一个。`click_tab`选择所需的选项卡。

请参阅此[JSFiddle](http://jsfiddle.net/4gCWn/2/)。

当您想在文档加载时选择一个选项卡时，只需`click_tab()`使用适当`div`的`id`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-04T19:28:13.503

获取链接并使用其默认的单击方法。

```
document.getElementById("TA").click(); 
```

或者使用 jQuery

```
$("#TA").get(0).click(); 
```

# javascript - 新的 phonegap 项目因 TypeError 失败：未定义不是第 1 行的函数

> ID：14163529
> 
> 赞同：1
> 
> 时间：2013-01-04T19:23:31.750
> 
> 标签：javascript, ios, cordova

试图让 phonegap 在 iPhone 上工作。对于一个完全空白的项目，除了用于调试的 jsconsole 和 cordova.ios.js 文件之外，只要应用程序加载，我就会不断收到错误：

```
file:///var/mobile/Applications/19E49099-C481-44B4-8803-07A0390EA3B3/pplats.app/www/index.html:1link
TypeError: 'undefined' is not a function 
```

我无法从堆栈跟踪中获得更多信息。为什么我会收到 TypeError？这里完全没有想法。

HTML 文件：

```
 <!DOCTYPE html>
<html>
<head>
    <title></title>
    <script src="cordova.ios.js"></script>
    <script src="http://jsconsole.com/remote.js?79F01FAA-19A6-40C2-B32F-7FEF1D5E3998"></script>
</head>
<body>
testing......
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:28:39.403

你的项目目录结构是什么样的？

我的猜测是这与`src="cordova.ios.js"`链接有关，您是否尝试过为 js 文件指定绝对或根相对（`/path-to-file/cordova.ios.js`）路径？

# python - 有没有类似 Python 导出的东西？

> ID：14163532
> 
> 赞同：7
> 
> 时间：2013-01-04T19:23:49.837
> 
> 标签：python, python-module

我们一直使用 python 的导入机制来导入模块和变量以及其他东西..但是，有什么可以作为导出的吗？像：

我们从一个模块中导入东西：

```
from abc import * 
```

那么我们可以像这样导出吗？：

```
to xyz export * 
```

或将 a、b、c 导出到 program.py

我知道这个问题不是这里要问的典型类型的问题..但只是出于好奇..我检查了python控制台，没有任何东西作为“导出”存在..也许它以不同的名称存在。 .?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T20:17:20.830

首先，导入你想要导出内容的模块，这样你就有了对它的引用。然后将要导出的内容分配为模块的属性：

```
# to xyz export a, b, c
import xyz
xyz.a = a
xyz.b = b
xyz.c = c 
```

要进行通配符导出，您可以使用循环：

```
# to xyz export *
exports = [(k, v) for (k, v) in globals().iteritems() if not k.startswith("_")]
import xyz
for k, v in exports: setattr(xyz, k, v) 
```

*（请注意，我们在导入模块之前*收集要导出的对象列表，这样我们就可以避免导出对我们刚刚导入自身的模块的引用。）

这基本上是猴子修补的一种形式。它有它的时间和地点。当然，要使其工作，必须执行“导出”的模块本身；简单地导入将要修补的模块不会神奇地意识到某处的其他代码将对其进行修补。

# ruby-on-rails - 在rails中渲染多个erb

> ID：14163535
> 
> 赞同：1
> 
> 时间：2013-01-04T19:24:02.063
> 
> 标签：ruby-on-rails, ruby, templates, rendering, erb

我有带有所有必需标题和导航栏的layour/application.html.erb。我只在身体部分有产量。

我的dashboard.html.erb 是一组图表的希望页面。我想用不同的 erb 和自己的 javascript 编写每个图表。于是画了个草图，

dashboard.html.erb 为：

```
<div> hello </div>
<%= render 'hierarchical' %> 
```

和

仪表板/_hierarchical.html.erb 为：

```
<head>
<%= javascript_include_tag "_hierarchical.js" %>
</head>

<div id="chart">
    test something
</div> 
```

我想我需要阅读更多关于 ruby​​ 的信息，但我需要快速帮助，以便我可以让我的示例演示应用程序尽快运行。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:30:52.727

I was doing it wrong without using :partial symbol.

This code worked

```
<div> hello </div>
<%= render :partial => 'hierarchical' %> 
```

# jboss7.x - JBoss 7 中的全局 web.xml 配置

> ID：14163539
> 
> 赞同：5
> 
> 时间：2013-01-04T19:24:26.273
> 
> 标签：jboss7.x

在 JBoss 4.2.3 中，我们可以在

[jboss_server]/deploy/jboss-web.deployer/conf/web.xml

这将被所有部署的应用程序采用。我们使用它来配置上下文参数、servlet 和默认标记文件。

我们在战争文件中部署了数十个应用程序，这是一个非常方便的工具。

这在 JBoss 7.1.1 中是如何实现的？我用谷歌搜索和搜索，但似乎找不到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-19T16:52:42.470

您可以尝试 Web 片段（Servlet API 3.x 的一部分）。您将能够使用一个 META-INF/web-fragment.xml 文件（在一些 WEB-INF/lib/my-common-context.xml 中）将相同的一组过滤器、映射、侦听器、变量应用于每个 Web 应用程序的上下文。 jar，所以它很容易作为一个简单的依赖项进行管理）。

# php - 使用 PHP 为 Apache 设置实际的 DOCUMENT_ROOT

> ID：14163540
> 
> 赞同：1
> 
> 时间：2013-01-04T19:24:30.153
> 
> 标签：php, document-root

我试图在不同的目录中拥有同一个 PHP 应用程序的多个版本。编写应用程序时，它必须位于 Apache 的 Document_root 中。

我已经尝试过`$_SERVER['DOCUMENT_ROOT'] = '/htdocs/version2';`，但这仅适用于使用`$_SERVER['DOCUMENT_ROOT'].'filename.php'`.

执行的所有其他文件都在原始根目录 /htdocs/version1 中。

如何使 document_root 实际更改为 PHP 会话而不仅仅是设置变量`$_SERVER['DOCUMENT_ROOT']`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:11:46.223

你不需要做任何你正在做的事情（至少你刚才写的，比如服务器的东西）。

**情况1。**

如果您想将 2 个文件夹用作单独的网站（在本地计算机上），只需将这 2 个文件夹复制到 htdocs 文件夹中即可。利用

`http://localhost/vesion1`//版本 1 实际上是您复制的文件夹名称.. 和版本 2 也是

```
http://localhost/vesion2 
```

访问它们的条目。

ps：如果这不起作用，您应该编辑您的网站配置.php 文件并将主 url / 路径更改为版本 1 / 或版本 2 即！（这实际上是你的问题，而不是“服务器根”。）

如果您设置了数据库驱动的 url，您应该为您的复制/粘贴网站创建新数据库（或手动强制新的主 url/路径）。

对于 ie.. 你可以有 10 个“版本”，只有一个数据库，或者 10 个版本，有 10 个数据库（数据库）。

**情况2。**

如果您想使用一个 index.php（根索引）运行 2 个版本/站点 - 实际上不是 2 个版本，但更像是“2 个网站合一” - 您应该编辑 .htaccess 文件以跳过根索引 / 或不是。

我有点困惑你想要达到的目标，但我想情况 1 是可行的（如果你想在本地机器上这样做）。

# magento - 复制现有 Magento 站点以在本地运行

> ID：14163543
> 
> 赞同：2
> 
> 时间：2013-01-04T19:24:56.863
> 
> 标签：magento, xampp

我很难使用 xampp 在本地运行我的 Magento 网站。我已将 public_html 中的所有内容下载到 htdocs 文件夹中。当我加载时它给了我一个错误

> SQLSTATE[HY000] [1045] 用户'mySite_magstore'@'localhost'的访问被拒绝（使用密码：YES）

我加载了 phpmyadmin 面板来检查密码，但它不是从我的网站加载一个，而是我在本地拥有的新密码。我敢肯定我在这里也错过了一步。

我在网上找到的所有信息都是关于在 xampp 上建立一个新站点，但找不到任何关于使用现有站点的信息。任何帮助或链接都会有所帮助。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T20:54:47.120

如果您想在您的机器中创建一个测试环境，请尝试以下步骤：

导出您的实时数据库

将其导入本地计算机

进入 core_config_data 表并更改以下的“值”：

```
 web/unsecure/base_url 
```

和：

```
web/secure/base_url 
```

到：

```
http://127.0.0.1/ 
```

进去：

```
app/etc/local.xml 
```

并将用户名和密码更改为正确的

**编辑：**

感谢[Cooper Maruyana](https://stackoverflow.com/users/1159949/cooper-maruyama)提出这个问题：

如果上一步没有帮助删除“var”文件夹中的*所有内容。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T20:43:18.377

检查您`app\etc\local.xml`的以下行

```
<password><![CDATA[]]></password> 
```

我确定您已经为生产服务器设置了一些密码，但是在您的本地服务器上您的 root 用户没有任何密码。因此，您需要删除该密码并在 core_config 表中设置您的基本 URL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T21:37:46.523

有两种可能的选择：一种是将数据库从服务器复制到本地主机，正如 pzirkind 在他的回答中所说明的那样。如果您想使用完全相同的数据库，即您想使用您的实时数据库，则第二个选项：您需要调整您的 app/etc/local.xml 文件以指向数据库服务器 IP 地址。目前那里应该有“localhost”。删除它并放置数据库服务器IP地址。如果您已在数据库上设置用户以允许远程访问（phpmyadmin 中的范围为 %），那么这也可以。但是，我不会推荐这个选项。我有时只使用它在开发和暂存区域之间共享数据库，但从不用于实时站点。因此，我强烈推荐 pzirkind 的方法！

# internet-explorer - 无法使用 Selenium 选择单选按钮

> ID：14163544
> 
> 赞同：0
> 
> 时间：2013-01-04T19:25:00.403
> 
> 标签：internet-explorer, xpath, selenium, radio-button, selenium-webdriver

我正在尝试学习 Selenium WebDriver (Internet Explorer)。在这个过程中，我已经开始自动化 sprint.com 以选择手机和个人计划。以下是我正在遵循的步骤：

1.  打开 sprint.com
2.  选择只是浏览 --> 个人
3.  导航到商店 --> 电话
4.  输入 Zip = 22042 并开始购物
5.  点击任何电话
6.  点击加入购物车
7.  点击个人计划
8.  选择无限计划（这里我失败了）

以下是我尝试的代码片段：

```
driver.findElement(By.xpath("//input[@value=\"pln2860004prd\"]")).click(); 
```

我可以通过使用相同的 xpath 来读取属性。

```
System.out.println("NAME: " + driver.findElement(By.xpath("//input[@value=\"pln2860004prd\"]")).getAttribute("name")); 
```

请帮忙！

兰詹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:12:46.713

尝试这个？

```
"//input[@name='selectMinutes' and @value='pln2860004prd']" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:55:14.457

Internet Explorer 是一个令人讨厌的测试浏览器。

这可能是由于多种原因。但很可能是因为该元素没有焦点。

所以在点击之前先设置好**焦点**：

```
if (element instanceof Locatable) {
    Locatable remoteElement = (Locatable) inputElement;          
    remoteElement.getLocationOnScreenOnceScrolledIntoView();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T20:15:38.073

我不同意 asgoth... 我认为当您了解如何处理窗口句柄等时，驱动 IE 就好了。

试试这个（假设“驱动程序”是测试套件的静态成员）：

```
public static void mouseClickByLocator( String cssLocator ) {    
     String locator = cssLocator;    
     WebElement el = driver.findElement( By.cssSelector( locator ) );    
     Actions builder = new Actions(driver);    
     builder.moveToElement( el ).click( el );    
     builder.perform();    
} 
```

# java - IndexOutOfBoundsException...知道错误的含义但需要帮助调试吗？

> ID：14163545
> 
> 赞同：-5
> 
> 时间：2013-01-04T19:25:01.720
> 
> 标签：java

创建一个程序来生成随机数并将它们放入偶数或奇数数组中，但得到相同的错误消息？如果有人知道如何更好地格式化，请帮助！

```
 import static java.lang.Math.*;
    import java.util.Random;

    public class Unit8
    {
public static void main ( String [ ] args )
{   
    int [ ] randomNum = new int [100] ;

    for ( int x = 0; x <= randomNum.length; x++ )
    {
        randomNum [ x ] =  (int) (Math.random ( ) * 25 ); 
    }
    int sum = 0;
    int [ ] oddArray = new int [ 100 ] ;
    for ( int x = 0; x <= randomNum.length; x++ )
    {
        if (randomNum [ x ] % 2 != 0 )
            sum += oddArray [ x ];      

    }
    int sum2 = 0;
    int [ ] evenArray = new int [ 100 ] ;
    for ( int x = 0; x <= randomNum.length; x++ )
    {
        if (randomNum [ x ] % 2 == 0 )
            sum2 += evenArray [ x ] ; 
    }
    display ( oddArray );
    display1 ( evenArray );

}
public static void display ( int [ ] oddArray)
{
    System.out.println ( oddArray );
}
public static void display1 ( int [ ] evenArray )
{
    System.out.println ( evenArray );
}
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T19:26:10.733

你*的 for 循环*是罪魁祸首。条件不应该有`<=`，而只是`<`。

代替： -

```
for ( int x = 0; x <= randomNum.length; x++ ) 
```

和： -

```
for ( int x = 0; x < randomNum.length; x++ ) 
```

因为您不想访问索引 - `randomNum.length`，因为它将是`OutOfBounds`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T19:26:19.913

此行导致错误

```
 for ( int x = 0; x <= randomNum.length; x++ ) 
```

在 java 数组索引从 0 开始，数组 randomNum 的索引从 0 到 99。 randomNum.length 返回数组可以容纳的元素数，即 100 。

通过做 `x <= randomNum.length;`

在 for 循环中，您尝试访问数组中的 101th(randomNum[100]) 元素；哪个不存在，因此是例外

所以替换 for 循环以包含`for ( int x = 0; x < randomNum.length; x++ )`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T19:26:23.877

错误在这里：

```
for (int x = 0; x <= randomNum.length; x++) { 
```

您应该将其更改为：

```
for (int x = 0; x < randomNum.length; x++) { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T19:52:04.957

我找到了和其他人一样的解决方法。但是，我还注意到您正在打印出 2 个仅包含数字 0 的数组。您根本没有使用随机数来更新偶数或奇数数组。此外，这两种显示方法是相同的。您不需要为每个数组使用单独的方法，因为您可以使用 display 方法打印出两个数组。这也适用于变量。只要您不再使用它，您就可以重用相同的变量（就像`index`我编写的代码中的变量一样）。我更新了代码以简化它，并修复了您遇到的所有错误，如下所示：

```
public class PrintOddAndEvenArrays {

public static void main(String[] args) {
    int[] randomNum = new int[500];

    for (int x = 0; x < randomNum.length; x++) {
        randomNum[x] = (int) (Math.random() * 25);
    }
    int index = 0;
    int[] oddArray = new int[100];
    for (int x = 0; x < randomNum.length; x++) {
        if(index == 100){
            break;
        }
        if (randomNum[x] % 2 != 0){
            oddArray[index] = randomNum[x];
            index++;
        }
    }
    index = 0;
    int[] evenArray = new int[100];
    for (int x = 0; x < randomNum.length; x++) {
        if(index == 100){
            break;
        }
        if (randomNum[x] % 2 == 0){
            evenArray[index] = randomNum[x];
            index++;
        }
    }
    display(oddArray);
    display(evenArray);

}

public static void display(int[] Array) {
    for(int a = 0; a < Array.length-1;a++){
        System.out.print(Array[a]+ ", ");
        if(a == Array.length-2){
            System.out.print(Array[a+1]);
        }
    }
    System.out.print("\n");
}

} 
```

为了将来参考，自己调试，控制台中打印的错误通常会告诉您参考哪一行来修复错误。首先了解错误是什么以及如何修复它。通常，快速的 Google 搜索可以让您了解错误以及如何修复它。然后，一旦您可以运行程序，请检查您的输出与所需的输出并进行相应的更改。对于更复杂的错误，您必须自己调试，因为代码会更长，其他人也更难理解。祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T19:27:18.347

您在循环中使用 <= randomNum.length，它将从 0 变为 100。您的数组 randomNum 确实从 0 开始，但它只有 100 个空格：它从 0 变为 99

将循环更改为： -

```
for (int x = 0; x < randomNum.length; x++) { 
```

进一步看，在您的“显示”功能中，您只会得到一个地址，您必须这样做

```
public static void display(int[] oddArray) {
    for(int i=0; i<oddArray.length;i++)
        System.out.println(oddArray[i]);
} 
```

更进一步，你的功能都搞砸了，你永远不会填满你的奇数数组和偶数数组。此外，您不需要三个循环，您可以合而为一。

我认为这是一个家庭作业，所以我不会给你一个完整的工作代码，但祝你好运

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-04T19:27:22.823

这是你的错误：

```
for ( int x = 0; x <= randomNum.length; x++ ) 
```

它应该是

```
for ( int x = 0; x < randomNum.length; x++ ) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-04T19:27:25.957

下次调试时，只需在循环上放置一个断点并在调试模式下运行它。然后，您可以在逐行运行时检查值。

# function - AS3：将变量传递给子函数时遇到问题

> ID：14163549
> 
> 赞同：0
> 
> 时间：2013-01-04T19:25:20.420
> 
> 标签：function, variables, actionscript, constructor, parent

我最近更改了显示对象的构造函数以验证它们是否在舞台上。但是，这完全破坏了我将值传递给子函数的能力。例如（为清楚起见，删除了很多代码）：

家长：

```
public var var1:uint;
public var var2:uint;
public var childFunction:ChildFunction;

public function createChild():void
{
    childFunction = new ChildFunction( var1, var2 );
    addChild( childFunction );
} 
```

孩子：

```
public var varA:uint;
public var varB:uint;

public function ChildFunction( varA:uint, varB:uint )
{
    trace( varA, varB );

    if ( stage )
    {
        onAddtoStage();
    }
    else
    {
        addEventListener( Event.ADDED_TO_STAGE, onAddtoStage );
    }
}

public function onAddtoStage( e:Event = null ):void
{
    trace( varA, varB );
} 
```

在这个例子中，我会在第一个跟踪中得到正确的值`var1`和`var2`，但在第二个跟踪中得到 0 和 0。反复测试表明，离开构造函数后，一旦离开构造函数，varA和varB的值就被完全忘记了，即使它们被声明为公共变量。

我承认我对动作脚本有很多不了解，但这让我摸不着头脑。任何帮助深表感谢。我知道我可以从孩子那里查看父母中的变量，但这对我的需要不起作用；我需要将值传递下来并存储它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:29:39.873

这是范围的问题。

当您`trace( varA, varB );`进入时`ChildFunction`，它使用作为参数传入 的`varA`and 。`varB`

当您`trace( varA, varB );`进入 时`onAddToStage`，它使用的是从未更改过的 and，因此应该是它们的默认值 0 `public var varA:uint;`。`public var varB:uint;`

我假设您打算做的是`ChildFunction`在其构造函数中设置 的公共数据：

```
public function ChildFunction( varA:uint, varB:uint )
{
    trace( varA, varB );
    this.varA = varA;
    this.varB = varB;

    if ( stage )
    {
        ... 
```

# wcf - 添加 WCF 客户端标记前缀

> ID：14163552
> 
> 赞同：0
> 
> 时间：2013-01-04T19:25:25.323
> 
> 标签：wcf

我试图让我的 .NET WCF 客户端通过 SOAP11 与基于 JAVA 的 Web 服务对话。

我遇到的问题是网络服务期望`<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Header></s:Header><s:Body><web:SayHello xmlns:web="http://webservice.com/"...`

而 .NET 提供以下内容：

`<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Header></s:Header><s:Body><SayHello xmlns="http://webservice.com/"...`.

基本上 SayHello 元素，即方法**没有**以命名空间指针***web*****为前缀， xmlns**声明也没有。

我的想法是截取消息并重新组装 XML，我将在其中手动附加前缀。我不喜欢这种解决方法。

如果有人知道更优雅的解决方案，我将不胜感激。

提前致谢。

N。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:45:26.657

我找到了答案，但我仍然必须编辑截获的消息。

答案在这里 [https://stackoverflow.com/a/6500146/354484](https://stackoverflow.com/a/6500146/354484)由 carlosfigueira 提供的链接回答。

如果有人仍然知道解决方案，例如基于配置的属性，那么请回来。

干杯，

N。

# php - Php Memcached 故障转移：服务器被标记为死机

> ID：14163554
> 
> 赞同：1
> 
> 时间：2013-01-04T19:25:26.680
> 
> 标签：php, memcached, pecl

我正在尝试对 PHP 使用 PECL/Memcached 扩展。我启用了一致的哈希。所以我有两个 memcached 服务器正在运行。首先，我使用 set 分配 1000 个键值对。这确保我在两台服务器上都有足够的密钥。现在我尝试从缓存中获取值。一切正常，直到我关闭一台服务器。在我的脚本中，我尝试获取该值，如果找不到，我将其设置。但我看到的只是**服务器被标记为已死**

有没有人使用 PECL/Memcached 获得一致的散列？

# couchdb - Couchdb 视图生成

> ID：14163556
> 
> 赞同：0
> 
> 时间：2013-01-04T19:25:29.753
> 
> 标签：couchdb, couchdb-futon

我正在学习couchdb，所以我有一个非常基本的问题。假设我有一个名为`email`where 文档的沙发数据库：

```
{
  "_id": "fe7759fdf36t",
  "status": "sent",
  "sent_at": 1357151443,
}

{
  "_id": "ewrwe4a38d2353",
  "status": "failed",
  "sent_at": 2347151421,
}

{
  "_id": "f4559fjffd2353",
  "status": "sent",
  "sent_at": 11715154,
} 
```

我想创建两个视图

1) 检索所有文档 where `status = sent`
2) 检索所有文档 where `status = failed and sent_at > 11715157`
3) 检索所有按`sent_at`降序/升序排序的文档`status = sent`

对于（1），我写道，

```
{
    "_id": "_design/sentdoc",
    "_rev": "2-dd88de7196c06eed41d2d83a958f0388",
    "views": {
        "query": {
            "map": "function(doc) { if(doc.status == 'sent') {emit(doc_id, doc);} }"
        }
    }
} 
```

我想我在那里做错了什么，所以它不起作用。谁能建议如何编写所有这三个视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:24:48.490

创建这样的视图

```
函数（文档）{
  发射（[doc.status，doc.sent_at]，doc）；
}

```

**查询 #1**

在您的 curl 语句（或 Ruby 库或其他）中尝试这些参数

```
开始键 = [“发送”]
endkey = [“已发送”，{}]

```

**查询 #2**

```
startkey = [“失败”，11715157]
endkey = [“失败”，{}]

```

**查询 #3**

```
开始键 = [“发送”]
endkey = [“发送”，{}]
降序=真

```

我没有对此进行测试，但应该为您指明正确的方向。

# javascript - Measure Node.js total inbound/outbound traffic generated through net.server

> ID：14163558
> 
> 赞同：3
> 
> 时间：2013-01-04T19:25:33.010
> 
> 标签：javascript, node.js, express

I got that nifty App I work on, now to calculate some scenarios I'd like to know how much inbound / outbound traffic is generated per session by the app itself. I don't want to use the browser for this but to gather that info from the server side.

nodejs net.server does not have any methods that fit the description, I found only net.socket methods:

`socket.bytesRead` The amount of received bytes.

`socket.bytesWritten` The amount of bytes sent.

do they apply to the traffic generated through net.server? any existing node_modules that gather that kind of stats?

Thanks in advance

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T20:41:30.347

Well, that's because [`net.server`](http://nodejs.org/api/net.html#net_class_net_server) uses [`net.socket`](http://nodejs.org/api/net.html#net_class_net_socket). To get the totals, you will have to add `bytesRead` and `bytesWritten` to the totals once the socket is closed. Example:

```
const net = require("net");

var server = net.createServer(function (c) {
    c.on('close', function () {
        // add to the totals
        server.bytesSent += c.bytesWritten;
        server.bytesReceived += c.bytesRead;
    });

    c.write('Hello world!\r\n');
    c.pipe(c);
    c.end();
});

server.bytesReceived = 0;
server.bytesSent = 0;

server.listen(3000);

var time = process.hrtime();
setInterval(function (){
    process.stdout.write('\u001B[2J\u001B[0;0f');
    var diff = process.hrtime(time)[0] + process.hrtime(time)[1]/1000000000;
    var bpsSent = Math.round(server.bytesSent/diff) || 0;
    var bpsReceived = Math.round(server.bytesReceived/diff) || 0;
    console.log("Running node.js %s on %s-%s", process.version, process.platform, process.arch);
    console.log("Memory usage: %d bytes", process.memoryUsage().rss);
    console.log("Uptime: %ds", Math.round(process.uptime()));
    console.log("Open connections: %d", server.connections);
    console.log("In: %d bytes (%d bytes/s)", server.bytesReceived, bpsReceived);
    console.log("Out: %d bytes (%d bytes/s)", server.bytesSent, bpsSent);
}, 100); 
```

If you need to update the totals in real-time (when data is received/sent), you can instead add the length of the buffers directly to the totals when they are written/read. This is especially good when you have sockets that are open for a long time and transferring large amounts of data.

```
var server = net.createServer(function (c) {
    var oldWrite = c.write;
    c.write = function(d) {
        if (!Buffer.isBuffer(d)) {
            d = new Buffer(d);
        }
        oldWrite.call(this, d);
        server.bytesSent += d.length;
    };

    c.on('data', function(d){
        server.bytesReceived += d.length;
    });

    c.write('Hello world!\r\n');
    c.pipe(c);
    c.end();
}); 
```

# xml - Explain this XML entity notation and reference

> ID：14163563
> 
> 赞同：1
> 
> 时间：2013-01-04T19:25:59.760
> 
> 标签：xml, dtd

Given the following XML file, what do the `DOCTYPE`, `ENTITY`, `SYSTEM`, `&entity` (reference?) represent?

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE root [
        <!ENTITY entity SYSTEM "./entity.xml">
]>

<root>
    <element attribute="value">
        &entity; 
        <child>
           <!-- some more nested -->
        </child>
    </element>
</root> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T19:27:03.463

It is the schema of the XML, in [DTD](http://en.wikipedia.org/wiki/Document_Type_Definition) format.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T19:30:54.337

The DOCTYPE declaration is specifying the root element (`root`).

The entity declaration (`ENTITY`) is pointing to the file `entity.xml` on the system (`SYSTEM`).

The entity reference (`&entity;`) references the entity declaration named `entity`. The easiest way to think of it is that `&entity;` is replaced with everything that is in `entity.xml`.

Here's a good link that covers entities (including parameter entities): [http://www.w3.org/TR/2004/REC-xml-20040204/#sec-entity-decl](http://www.w3.org/TR/2004/REC-xml-20040204/#sec-entity-decl)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T19:30:57.407

It is the format in which the XML is written. This is specifically written in DTD format. For more information I suggest [this](http://www.ldodds.com/delta/dtd_guide.html) guide that quickly explains how to read and understand said DTD format.

Also for more information about entities specifically, try [this link](http://www.w3schools.com/dtd/dtd_entities.asp) as well.

# android-layout - Android 开发者：实例化视图和在 XML 布局中定义视图有什么区别

> ID：14163564
> 
> 赞同：0
> 
> 时间：2013-01-04T19:25:59.877
> 
> 标签：android-layout, android-view

我是Android开发的新手。

我有带有 ADT 的 Eclipse（sdk 版本：17，Android 4.2）。

我不明白有什么区别：

*   **定义**一个视图（通过ADT 提供的**可视化编辑器**或直接在当前活动对应的**XML 布局文件中）**

和

*   **实例化**视图（将**上下文作为参数传递**），例如：**TextView tv = new TextView(getContext());** （取自：[Android 上的“上下文”是什么？](https://stackoverflow.com/questions/3572463/what-is-context-in-android)，第一个答案）

和

*   **实例化**视图（不将**上下文作为参数传递**），例如：**TextView tv = new TextView();**

提前感谢您的任何建议。

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T09:40:41.013

要使用您的术语：

当`View`在 XML 中定义一个（或 ADT 编辑器 - 它只是为您创建 XML）时，它仍然需要由布局充气器充气。布局充气器将为`View`您实例化（s）。这可以在幕后完成 - 例如当您调用时`Activity.setContentView()`，或直接使用`View.inflate()`. 充气器实际上只是通过 XML 运行并实例化它包含的所有视图。

实例化 a`View`时，您给它`Context`提供了对资源的引用 - 因此它可以加载图像、字符串、尺寸等 - 以及其他与 Android 相关的功能（您现在可能可以忽略）。

你不能在`View`没有上下文的情况下实例化 a 。

# javascript - DataTables按属性而不是数组索引过滤对象数组

> ID：14163565
> 
> 赞同：2
> 
> 时间：2013-01-04T19:26:06.530
> 
> 标签：javascript, jquery, jquery-datatables

我想创建一个可以应用于多个数据表的日期范围过滤器。我遇到的问题是，即使当我到达数组中的过滤器函数时，我将我的 aaData 值作为对象数组传递。这不会起作用，因为数组中日期值的索引在我的应用程序中的各种数据表中是不同的，我宁愿能够通过类似这样的属性的点表示法来做到这一点。

```
$.fn.dataTableExt.afnFiltering.push(
        function( oSettings, aData, iDataIndex ) {
            var iMin = document.getElementById('start-datepicker').value;
            var iMax = document.getElementById('end-datepicker').value;

            // Create Minimum Date Object
            var iMinDate = new Date(iMin);

            // Create Maximum Date Object
            var iMaxDate = new Date(iMax);

            // Create Date Column Object
            var iDateStr = aData.date;
            var iDate = new Date(iDateStr);

            if ( iMinDate < iDate && iDate < iMaxDate )
            {
                return true;
            }
            return false;
        }
    ); 
```

我的初始化类似于这个[http://live.datatables.net/iyavud/7/edit#source](http://live.datatables.net/iyavud/7/edit#source)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:06:37.963

这可能是一个 hack，但它似乎可以通过 oSettings.aoData 对象和 iDataIndex 参数获取数据。

```
$.fn.dataTableExt.afnFiltering.push(
        function( oSettings, aData, iDataIndex ) {
            var iMin = document.getElementById('start-datepicker').value;
            var iMax = document.getElementById('end-datepicker').value;

            // Create Minimum Date Object
            var iMinDate = new Date(iMin);

            // Create Maximum Date Object
            var iMaxDate = new Date(iMax);

            // Create Date Column Object
            var rowData = oSettings.aoData[iDataIndex]._aData;
            var iDateStr = rowData.date;
            var iDate = new Date(iDateStr);

            if ( iMinDate < iDate && iDate < iMaxDate )
            {
                return true;
            }
            return false;
        }
    ); 
```

# ruby-on-rails - 在 pg_audit_log 中设置 current_user

> ID：14163571
> 
> 赞同：3
> 
> 时间：2013-01-04T19:26:21.390
> 
> 标签：ruby-on-rails, ruby-on-rails-3, logging

我想使用 pg_audit_log 登录 Rails 应用程序。审核日志不仅必须显示已更改的列，还必须显示进行这些更改的用户。文档没有显示如何执行此操作，但在查看 pg_audit_log 源（postgresql_adapter.rb）后，我看到它从线程局部变量 ala 中读取用户信息：

```
current_user = Thread.current[:current_user] 
```

我考虑过在过滤器之前和之后设置/取消设置，如下所示：

```
Thread.current[:current_user] = current_user 
```

（使用控制器中的 current_user 辅助方法来获取当前登录的用户），但这似乎很危险。我现在花时间尝试了解 Rails 请求周期和线程如何交互，以便更好地了解危险程度。同时，我很好奇当前使用 pg_audit_log 的任何 SO 用户是否已经解决了每次用户对记录进行更改时将 user_id 和 user_unique_name 记录到日志表的需要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T12:19:43.377

按照您描述的方式设置当前用户是一种常见的方法。例如，参见[http://rails-bestpractices.com/posts/47-fetch-current-user-in-models](http://rails-bestpractices.com/posts/47-fetch-current-user-in-models)

一些示例代码可能如下所示：

```
# in your model
class User < ActiveRecord::Base
  def self.current
    Thread.current[:current_user]
  end
  def self.current=(user)
    Thread.current[:current_user] = user if user.nil? || user.is_a?(User)
  end
end

# in your controller
class ApplicationController < ActionController::Base
    before_filter :set_current_user
    def set_current_user
      User.current = user_signed_in? ? current_user : nil
    end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T06:48:34.273

依靠`Thread.current`哈希来提供对控制器管理的对象的模型级访问确实是有争议的。例如，请参阅以下内容：

[Rails 中 Thread.current[] 使用的安全性](https://stackoverflow.com/questions/7896298/safety-of-thread-current-usage-in-rails)

令人担忧的是，`pg_audit_log`gem 中没有记录此特定功能。

假设您没有积极探索 gem 的源代码，并且假设您已经独立决定`Thread.current[:current_user] = something`在自己的应用程序中进行定义，以实现自己的目的。在这种情况下，`pg_audit_log`会在您不知情的情况下审核该对象。

诚然，这个名称`current_user`被普遍接受，表示由身份验证例程定义的当前登录用户，很难将这个潜在的错误想象为一个具体问题，但从设计的角度来看呢？哎哟。

另一方面，由于您知道自己在做什么，因此确保`Thread.current[:current_user]`在每个响应周期的开始/结束时设置/取消设置应该使过程安全。至少这是我从阅读有关该主题的大量帖子中收集到的。

干杯，朱塞佩

# ios6 - presentViewController 不会垂直

> ID：14163578
> 
> 赞同：1
> 
> 时间：2013-01-04T19:27:02.133
> 
> 标签：ios6

这段代码展示了我的新视图控制器，但它是从右侧而不是从底部向上进入的。我不知道如何让它做一个垂直动画。有什么想法吗？

```
UINavigationController *navigationController = [[UINavigationController alloc]
                                            initWithRootViewController:newDeal];
navigationController.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
[self presentViewController:navigationController animated:YES completion: nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:36:59.993

我找到了——我的 segue 设置为“Push”而不是“Modal”。一旦我将样式设置为 Modal 并转换为“Cover Vertical”，它就完美地工作了。

# wordpress - WordPress 计数帖子错误

> ID：14163583
> 
> 赞同：1
> 
> 时间：2013-01-04T19:27:12.647
> 
> 标签：wordpress, counting

我正在尝试做的事情：帖子可以分为 A 或 B 类型。我想做一个存档，计算有多少帖子被归类为 A，有多少在 B 中，以及总数。

问题：我的代码算作 A 类的 12 个帖子。B 类算 5。但两个类别都算 12。

为什么？

我的代码：

```
$posts_a = new WP_Query('cat=5&category__and=30');
$count_a = $posts_a->post_count;
//gives 12

$posts_b = new WP_Query('cat=5&category__and=29');
$count_b = $posts_b->post_count;
//gives 5

$posts_all = new WP_Query('cat=5');
$count_all = $posts_all->post_count;
//gives 12\. It should be at least 12+5. 
```

我不想只是总结 A+B。我想知道出了什么问题。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T19:35:25.660

It doesn't look like you have just two categories, looking at your queries. From what I can, there are three categories, A, B and C.

There are 12 posts in categories A and B, and 5 in categories A and C, from what I can see from your queries and results.

You are also using category__and incorrectly, which may be the cause of the confusion.

Can you tell me what are the two category IDs you are searching for? I will post the queries after you mention them.

Edit: You probably need this:

```
$posts_a = new WP_Query(array('category__and'=>array(5,30),'posts_per_page'=>-1));
$count_a = $posts_a->post_count;

$posts_b = new WP_Query(array('category__and'=>array(5,29),'posts_per_page'=>-1));
$count_b = $posts_b->post_count;

$posts_all = new WP_Query('cat=5&posts_per_page=-1');
$count_all = $posts_all->post_count; 
```

Also, this is probably an obvious answer and I don't know your category structure, but is 29 a child category of 30?

# sql - SQL Server 中的 over 子句

> ID：14163585
> 
> 赞同：3
> 
> 时间：2013-01-04T19:27:16.813
> 
> 标签：sql, sql-server, sql-server-2008, tsql, analytic-functions

我有以下查询

```
select * from 
(
        SELECT distinct 
        rx.patid
       ,rx.fillDate
       ,rx.scriptEndDate
       ,MAX(datediff(day, rx.filldate, rx.scriptenddate)) AS longestScript
       ,rx.drugClass
       ,COUNT(rx.drugName) over(partition by rx.patid,rx.fillDate,rx.drugclass) as distinctFamilies
       FROM [I 3 SCI control].dbo.rx
       where rx.drugClass in ('h3a','h6h','h4b','h2f','h2s','j7c','h2e')
       GROUP BY rx.patid, rx.fillDate, rx.scriptEndDate,rx.drugName,rx.drugClass

) r
order by distinctFamilies desc 
```

产生的结果看起来像 ![在此处输入图像描述](../Images/db8e20711f3b715cf91b6dbe6c63dcaf.png)

这应该意味着表格中的两个日期之间的 patID 应该有 5 个唯一的药物名称。但是，当我运行以下查询时：

```
select distinct *
    from rx 
    where patid = 1358801781 and fillDate between '2008-10-17' and '2008-11-16' and drugClass='H4B' 
```

我返回的结果集看起来像

![在此处输入图像描述](../Images/e5d89df99bd6d474274b10d30061ba35.png)

您可以看到，虽然实际上在 2008 年 10 月 17 日和 2009 年 1 月 15 日之间为第二个查询返回了五行，但只有三个唯一名称。我尝试了各种修改 over 子句的方法，但都具有不同程度的不成功。如何更改我的查询，以便仅在为每一行指定的时间范围内找到**唯一的 s？** `drugName`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T20:40:03.240

试一试：

```
 SELECT DISTINCT
  patid, 
  fillDate, 
  scriptEndDate, 
  MAX(DATEDIFF(day, fillDate, scriptEndDate)) AS longestScript,
  drugClass,
  MAX(rn) OVER(PARTITION BY patid, fillDate, drugClass) as distinctFamilies
FROM (
  SELECT patid, fillDate, scriptEndDate, drugClass,rx.drugName,
  DENSE_RANK() OVER(PARTITION BY patid, fillDate, drugClass ORDER BY drugName) as rn
  FROM [I 3 SCI control].dbo.rx
  WHERE drugClass IN ('h3a','h6h','h4b','h2f','h2s','j7c','h2e')
)x
GROUP BY x.patid, x.fillDate, x.scriptEndDate,x.drugName,x.drugClass,x.rn
ORDER BY distinctFamilies DESC 
```

不确定 DISTINCT 是否真的有必要 - 因为你已经使用它了。

# ios - 为 UITextView 设置高度约束

> ID：14163590
> 
> 赞同：3
> 
> 时间：2013-01-04T19:27:34.103
> 
> 标签：ios, uitextview, autolayout

我对 iOS 开发相当陌生，并且很难根据其内容调整 UITextView 的大小。我找到了几个计算字符串渲染大小和/或更新文本视图的帧大小的示例，但是我似乎无法让这些工作。

当我将 UITextView 添加到我的视图时，它会添加一个高度约束，我认为它会将其锁定到特定高度。如何解决它，通过代码更新约束，和/或让我的 UITextView 垂直调整大小以显示我的内容？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T21:22:31.353

你可以创建一个出口到垂直尺寸约束，然后调整`.constant`约束的属性来修改你的文本视图的高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T20:54:07.057

UITextView 继承自 UIScrollView。作为其逻辑的一部分，它会更改其 contentSize 属性的高度，以允许用户垂直滚动到 TextView 内容的任何部分。

我建议使用 UITextView 的 ContentSize 属性来确定您的内容到底有多“高”。然后，您可以相应地设置 UITextView 的框架。

或者：您可以使用 NSString+UIKitAdditions 类别中的正确方法来计算文本的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T19:31:30.420

If you don't want autolayout then disable it in the xib file.

If you want to change the contraint and it's value this [tutorial](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2) will help you to deal with autolayout.

# javascript - javascript中的数组搜索

> ID：14163592
> 
> 赞同：3
> 
> 时间：2013-01-04T19:27:37.730
> 
> 标签：javascript, arrays, search

我在javascript中有一个数组和一个变量，如下所示：

```
var numArr = ["one", "two", "three"];
var searchNum = "four"; 
```

我想在 numArr 中搜索“四”，如果不存在，则执行一些语句......如

```
if (searchNum not in numArr)
{
    // do this
} 
```

javascript 是否有任何函数可以在任何数组中搜索并返回真或假，而无需我编写大量搜索代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T19:28:23.900

使用[`indexOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)：

```
if ( numArr.indexOf(searchNum) > -1 ) {

} else {} 
```

如果 find 失败，该方法将返回 -1 `searchNum`。否则它将返回找到它的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-24T13:52:40.923

您还可以使用：

```
var result = [];
    for(i=0;i<listdata.names.length;i++){
        var n = listdata.names[i].toLocaleLowerCase();
        var s = x('input').value.toLocaleLowerCase();
        if(n.indexOf(s) != -1){result.push(listdata.names[i]);}
    } 
```

通过这种方式，我们可以从输入值和现有值数组中输出结果。

有点典型的理解但是..... :)

# php - 我如何在php中获取给定年份的哪一个月？

> ID：14163594
> 
> 赞同：1
> 
> 时间：2013-01-04T19:27:45.507
> 
> 标签：php, datetime, posix

我得到了年日（1-366），我需要弄清楚它在哪个月，我该怎么做？好吧，我实际上有一个日期字符串，例如：年，日或年，一天中的分钟，秒，我最终想从中创建一个 POSIX 时间戳，我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T19:34:17.130

If you have PHP >= 5.3, then you can use [`DateTime::createFromFormat`](http://php.net/manual/en/datetime.createfromformat.php).

```
$day = 176;
$date = DateTime::createFromFormat('z', $day);
echo $date->getTimestamp();  // 1372275280 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T19:33:58.687

```
<?php
$year=2013;
$d=360;
echo date("m",strtotime("1/1/$year + $d days")) 
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T19:30:15.343

Use the date function to get a posix time stamp.

To get the month of a certain date, use intval(date('m'), mktime($h,$m,$s,$month,$day,$year))

# linux - 使用 rc.local 脚本时遇到问题

> ID：14163596
> 
> 赞同：2
> 
> 时间：2013-01-04T19:27:51.527
> 
> 标签：linux, bash, raspberry-pi

你好，堆栈交换，

我正在尝试使用 Raspberry Pi 从电视屏幕上制作一种 Kiosk 显示单元。我认为这将是一个足够简单的过程，编写一个启动脚本，将 LXDE、x11vnc 和 chromium 激活到我想要的页面，然后就完成了。但不幸的是，我似乎无法让我的 rc.local 脚本完全按照我的意愿工作，我不知道为什么。这是我添加到 rc.local 的代码

```
su pi -c startx&
su pi -c x11vnc -display :0 -q -usepw -rfbport 5901
su pi -c chromium --kiosk --incognito "http://www.springwater.ca/" 
```

当机器启动时，它将运行 startx 命令，但不会运行 x11vnc 或 chromium 命令。我在这里错过了什么吗？还是我以完全错误的方式解决这个问题？

谢谢，

```
Michael 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T19:35:33.570

It will take several seconds before the X server loads and is able to accept connections, but with your &, x11vnc and chromium will try and fail immediately.

After the startx line, you could add a simple `sleep 30` to give it time to start, or maybe even poll it:

```
until xwininfo -root -display :0; do sleep 1; done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T19:37:39.273

我在 Raspberry 上使用“nodm”（作为 Debian 中的软件包或从此处获取：[http](http://www.enricozini.org/sw/nodm/) ://www.enricozini.org/sw/nodm/ ）登录我的用户并启动 LXDE。然后按照此处所述自动启动所有需要的应用程序：[http](http://wiki.lxde.org/en/Autostart) ://wiki.lxde.org/en/Autostart 。

编辑以回答评论：在 Debian 中，您可以在文件 /etc/default/nodm 中配置用户（和其他东西）。我已经设置了参数：

```
 # User to autologin for
    NODM_USER=dashboard 
```

最好的祝愿，马蒂亚斯

# extjs - EXT JS 一次多次提交

> ID：14163608
> 
> 赞同：1
> 
> 时间：2013-01-04T19:29:02.177
> 
> 标签：extjs

我正在尝试在 EXTJS 中进行组提交。我知道您可以将 store.add() 与模型数组一起使用，但它只是多次调用 POST Web 服务。有谁知道最佳实践，或者这是否可能？我在后端使用 JPA/hibernate。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:41:40.077

当然是，我不知道您的商店模型配置，但您可以通过配置来完成

```
autoSync: false, batchUpdateMode: 'complete' 
```

在您的商店中，并且：

```
batchActions: true 
```

在您的代理上，并`sync()`在您完成将记录添加到商店后调用。

# java - 具有多个条件的 for 循环

> ID：14163613
> 
> 赞同：0
> 
> 时间：2013-01-04T19:29:42.940
> 
> 标签：java, for-loop

我有一个数组

```
int[] arr = {9,20,-2,-45,23,5,1}; 
```

我正在使用

```
java.util.Arrays.sort(arr); 
```

for 循环：

```
for(int i =0;(i<arr.length) && (arr[i] > 0) ; i++) 
```

由于这种情况，似乎不起作用`(arr[i] > 0)`。我想不出为什么这不起作用的原因。令人惊讶的是，以下循环以预期的方式工作：

```
for(int i =0;(i<arr.length) && (arr[i] != 0) ; i++) 
```

和

```
for(int i =0;(i<arr.length) && (arr[i] < 0) ; i++) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T19:32:38.160

`java.util.Arrays.sort(int[] arg);`按升序排序，因此`arr[0]`排序后的第一个值 ( ) 将为 -45。`for(int i =0;(i<arr.length) && (arr[i] > 0) ; i++)`自 以来的第一次迭代将是错误的`arr[0] == -45`，因此`(arr[0] > 0)`是错误的。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T19:33:14.400

对数组进行排序后，`-45`成为第一个元素，因此`> 0`检查立即评估为`false`.

另一方面，对前两个元素`< 0`求值，对整个数组求值。`true``!= 0``true`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T19:33:27.237

本质上，在您对数组进行排序后，*您的循环将永远不会运行。*

该条件`arr[i] > 0`无效，因为您将遇到的第一个元素将小于 0。

`arr[i] != 0`只要您的数组中没有 0，该条件就会一直运行。

该条件`arr[i] < 0`仅适用于前两个元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T19:38:20.390

第一个循环在第一项之前停止，因为`arr[0]`它是负数。

如果您只想在循环中获取正元素，正确的语法是：

```
 for (int i = 0; (i < arr.length) ; i++) {
        if (arr[i]> 0) {
            // Do stuff
        }
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-04T19:44:23.437

`Arrays.sort()`默认情况下，将根据给定数组的`natural order`. 因为`int`那将意味着上升。鉴于此，以下是您的 3 个循环的播放方式：

```
for (int i =0; (i<arr.length) && (arr[i] > 0); i++) 
```

当循环初始化`i=0`和`arr[0] = -45`. 这没有通过检查中的第二个条件`(arr[i] > 0)`，并且循环被“跳过”。

```
for (int i =0; (i<arr.length) && (arr[i] != 0); i++) 
```

`0`因为您的数组中没有值为 的元素`(arr[i] != 0)`总是计算为`true`。这样一来，循环就会沿着数组的长度插入。

```
for (int i =0; (i<arr.length) && (arr[i] < 0); i++) 
```

这个循环应该只打印数组的前 2 个元素，`arr[0] = -45`并且`arr[1] = -2`. 与第一个循环相同的推理。

**总结一下：**

如果你想打印整个排序数组，你唯一关心的就是不要跑过数组的两端并导致`IndexOutOfBoundsException`. 因此，只需从 开始，`0`直到到达`arr.length`。您可能还想查看[.](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Arrays.html#sort%28int%5b%5d%29)`Arrays.sort()`

# f# - 如何在 F# 中使用复杂查询来查询 RavenDB

> ID：14163614
> 
> 赞同：3
> 
> 时间：2013-01-04T19:29:44.910
> 
> 标签：f#, nosql, ravendb

我正在使用不稳定的 RavenDB 2.0。是否可以使用 F# 中的 lambda 或类似技术（linq？）查询 RavenDB 2.0？

这是意图示例代码。我正在尝试获取过去 72 小时内的所有帖子。它是错误的，但它使想法得到了理解。

```
static member public GetTopPosts _ =
    use store = (new DocumentStore(Url = Docs.serverUrl, DefaultDatabase = Docs.dbName )).Initialize()
    use session = store.OpenSession()
    let result = session.Query<Post>().Where(fun x -> x.Date > DateTime.Now - new TimeSpan(72,0,0))
    ... 
```

这样的事情怎么可能完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T19:08:31.340

是的，你可以这样做。

[你可以在FAKE](https://github.com/fsharp/FAKE/blob/develop/src/deploy.web/Fake.Deploy.Web.DataProviders/Fake.Deploy.Web.RavenDb/Provider.fs#L68)中找到一个这样的例子

在您的情况下，您的查询看起来像这样

```
let getTopPostsAsOf date =
    use session = docStore.OpenSession()
    query {
       for post in session.Query<Post>() do
       where (post.Date > date)
       select post
    } |> Seq.toArray 
```

这将被调用

```
let result = getTopPostsAsOf (DateTime.Now - TimeSpan.FromHours(72)) 
```

有几点需要注意。

1.  DocumentStore 应该在应用程序启动时创建一次，并且只创建一次。

2.  Also typically only a small set of library calls can be used within the query expressions, hence why I pass in the already computed date. The reason for this is because these expression trees end up getting serialized and executed within raven db engine.

# c# - 1.000.000 is not a valid value for Double c#

> ID：14163616
> 
> 赞同：1
> 
> 时间：2013-01-04T19:29:58.063
> 
> 标签：c#, asp.net, .net, globalization

> **Possible Duplicate:**
> [How to convert culture specific double using TypeConverter?](https://stackoverflow.com/questions/2688949/how-to-convert-culture-specific-double-using-typeconverter)

I am getting an exception while trying to parse an "1.000.000" string to `Double` by using `TypeConverter`. I looked at the `System.Globalization.NumberFormatInfo` at the moment of exception and it looks like this:

```
{System.Globalization.NumberFormatInfo}
    CurrencyDecimalDigits: 2
    CurrencyDecimalSeparator: ","
    CurrencyGroupSeparator: "."
    CurrencyGroupSizes: {int[1]}
    CurrencyNegativePattern: 8
    CurrencyPositivePattern: 3
    CurrencySymbol: "TL"
    DigitSubstitution: None
    IsReadOnly: false
    NaNSymbol: "NaN"
    NativeDigits: {string[10]}
    NegativeInfinitySymbol: "-Infinity"
    NegativeSign: "-"
    NumberDecimalDigits: 2
    NumberDecimalSeparator: ","
    NumberGroupSeparator: "."
    NumberGroupSizes: {int[1]}
    NumberNegativePattern: 1
    PercentDecimalDigits: 2
    PercentDecimalSeparator: ","
    PercentGroupSeparator: "."
    PercentGroupSizes: {int[1]}
    PercentNegativePattern: 2
    PercentPositivePattern: 2
    PercentSymbol: "%"
    PerMilleSymbol: "‰"
    PositiveInfinitySymbol: "Infinity"
    PositiveSign: "+" 
```

Everyting seems fine to parse "1.000.000" but it says "1.000.000" is not a valid value for `Double`. What is the problem? I tried to override `Thread.CurrentThread.CurrentCulture` but it did not work either.

EDITED :::::::::

This seems to solve my problem as well. TypeConverter actually works without ThousandSeperator. I added one and it started to work.

possible duplicate of How to convert culture specific double using TypeConverter? – Rasmus Faber [How to convert culture specific double using TypeConverter?](https://stackoverflow.com/questions/2688949/how-to-convert-culture-specific-double-using-typeconverter)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T19:37:20.173

试试这个`NumberFormatInfo`：

```
var s = "1.000.000";
var info = new NumberFormatInfo
{
    NumberDecimalSeparator = ",", 
    NumberGroupSeparator = "."
};
var d = Convert.ToDouble(s, info); 
```

您可以更改`NumberDecimalSeparator`为其他内容，只要它不同于`NumberGroupSeparator`.

编辑：`NumberFormatInfo`您指定的应该也可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T19:51:03.007

`Most normal numerical types have parse methods. Use TryParse if you're unsure if it's valid (Trying to parse "xyz" as a number will throw an exception)`

`For custom parsing you can define a NumberFormatInfo like this:`

```
var strInput = "1.000.000";
var numberFormatInfo = new NumberFormatInfo
{
    NumberDecimalSeparator = ",",
    NumberGroupSeparator = "."
};
double dbl = Double.Parse(strInput, numberFormatInfo); 
```

这个解决方案也可以

```
var format = new System.Globalization.NumberFormatInfo();
format.NumberDecimalSeparator = ",";
format.NumberGroupSeparator = ".";
double dbl2 = Double.Parse("1.000.000", format); 
```

# jquery - Bootstrap - 将侧边导航扩展到页面底部。身高 100%

> ID：14163619
> 
> 赞同：3
> 
> 时间：2013-01-04T19:30:15.063
> 
> 标签：jquery, css, twitter-bootstrap

几天来一直在尝试将我的侧导航扩展到页面底部，我已经谷歌搜索并到处寻找。人们继续说要在您的 HTML 和正文上设置 100% 的高度，并在导航周围使用最小高度：100% 的容器 div，但是这些都不起作用。

开始认为这在 Twitter Bootstrap 中是不可能的，因为它是浮动的。

我不能真正使用绝对位置或任何东西，因为我需要它来保持完全响应。我在 span 2 中有一个侧面导航，我的内容在 span10 的右侧。

导航代码：

```
<div class="span2">                
    <div class="span10 shadow-right fill" style="background-color: #860038; min-height: 100%;     overflow: hidden;">

    <ul class="side-nav">
      <a href="dashboard/index"><li class="side-box-active">My   Dashboard</li></a>
      <a href="dashboard/control_panel"><li class="side-box">Control Panel</li></a>
      <a href="dashboard/support"><li class="side-box">Support</li></a>
    </ul>

    </div>
</div> 
```

还有我的 CSS：

```
html, body {
    height: 100%;
}

.fill { 
    min-height: 100%;
    height: 100%;
}
    .side-nav {
      list-style: none;
      margin: 0 !important;
    }

    .side-nav li {
      margin-top: 20px;
      padding-top: 16px;
      margin-bottom: 20px;
      padding-left: 16px;
      cursor: pointer;
      color: #860038;
    }

    .side-nav li a{
      font-size: 15px;
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T19:34:27.840

看起来您缺少导航的父容器上的`fill`类。`<div class="span2>`所以应该是`<div class="span2 fill">`。另外，我假设您的跨度也嵌套在一行和容器中，这也需要被告知扩展 100%；应该是这样的：

```
<div class="container fill">
  <div class="row fill">
    <div class"span2 fill">
      <ul class="side-nav fill">
      </ul>
    <div>
  </div>
</div> 
```

# sql - How can I order by a date in string format properly?

> ID：14163621
> 
> 赞同：8
> 
> 时间：2013-01-04T19:30:20.630
> 
> 标签：sql, sql-server, sql-server-2005

I have a table with the following fields in an SQL Server 2005 database:

*   `id, integer`
*   `value, string`
*   `create_date, datetime`

New data is constantly being inserted into this table (tens of thousands of records per day) so I use the following query to compare how much data has been inserted on different days.

```
SELECT CONVERT(varchar(10), create_date, 101) as 'Date', COUNT(*) as 'Record Count',
FROM the_table
GROUP BY CONVERT(varchar(10), create_date, 101)
ORDER BY 'Date' desc 
```

This query returns data looking like this:

```
12/20/2012 | 48155
12/19/2012 | 87561
12/18/2012 | 71467 
```

However, when running this query today, I noticed the sorting did not work as expected with multiple years worth of data in the database. Instead of the data for this year being at the very top of the result set, it ended up at the bottom (records omitted for clarity)

```
06/29/2012 | 9987
01/04/2013 | 15768
01/03/2013 | 77586
01/02/2013 | 23566 
```

I understand **why** this is happening, as my formatted date is simply a string, and sql server can't possibly be expected to sort it as anything but a string. But I would like the ordering to be accurate. How can I achieve this? (the most recent day always appearing first)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-04T19:36:35.987

Thanks to Oded's suggestion I changed my order by clause and this seems to give me what I want:

```
SELECT CONVERT(varchar(10), create_date, 101) as 'Date', COUNT(*) as 'Record Count',
FROM the_table
GROUP BY CONVERT(varchar(10), create_date, 101)
ORDER BY MIN(create_date) desc 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T19:40:30.697

您可以将日期作为日期数据类型包含在 中`GROUP BY`，然后在`ORDER BY`

```
SELECT top 100 CONVERT(varchar, create_date, 101) as 'Date', COUNT(*) as 'Record Count'
FROM constituent
GROUP BY CONVERT(varchar, create_date, 101), CONVERT(date, create_date)
ORDER BY CONVERT(date, create_date) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T19:40:42.423

您可以将日期截断为上午 12:00，而不是转换为字符串：

```
SELECT dateadd(dd, datediff(dd, 0, create_date), 0) as 'Date'
     , COUNT(*) as 'Record Count',
  FROM the_table
 GROUP BY dateadd(dd, datediff(dd, 0, create_date), 0)
 ORDER BY dateadd(dd, datediff(dd, 0, create_date), 0) desc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T02:28:00.877

数据是否**必须**只有您指定的两列？如果没有，您可以选择截断为午夜的日期（如[user1948904](https://stackoverflow.com/users/1948904/user1948904)建议的那样）以及格式化日期字段，然后按日期字段排序。然后，您可以忽略任何使用数据的日期字段。

编辑以更正原始查询中的错误，并将格式化日期字段添加到`GROUP BY`，这是必需的。

```
SELECT DATEADD(DAY, 0, DATEDIFF(DAY, 0, create_date)) AS raw_date,
        CONVERT(VARCHAR(10), create_date, 101) AS 'Date',
        COUNT(*) AS 'Record Count',
FROM the_table
GROUP BY DATEADD(DAY, 0, DATEDIFF(DAY, 0, create_date)),
        CONVERT(VARCHAR(10), create_date, 101)
ORDER BY raw_date DESC 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T21:18:00.103

您可能可以 substr 然后按年份 desc 排序，然后按月份 asc 和日期 asc 排序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-14T10:02:52.443

我发现其他答案不适合我的情况，因为我不想要额外的冗余日期列，或者`GROUP BY`如果我没有真正聚合查询中的任何信息（假设 OP 的问题包括`count(*)`- 我的情况是相同的，除了我'没有汇总）。

这个解决方案使用一个`DATEADD()`实际上并没有做任何事情来强制 SQL Server 将其视为实际日期并返回正确的顺序。

```
SELECT    [Date]  = CONVERT(varchar(10), t.[create_date], 101)
          [Thing] = t.[other_column]     -- that I don't want to aggregate
FROM      [db].[dbo].[mytable] t
ORDER BY  DATEADD(dd, 0, t.[create_date]) DESC 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-04T19:34:15.100

I don't know anything about sql-server but I'll try to help. You should replace this column with one that is a Date type. I'm sure sql-server will know how to sort that correctly.

If that isn't an option for you, maybe in sql-server you can order by a function that converts the string to a date type.

* * *

But it already looks like you're using a date type here. I think you should just expand your query to include the date column in the select as the date type and sort by that column instead of the converted column.

# csv - Not recognised as "Arff data files file"

> ID：14163623
> 
> 赞同：1
> 
> 时间：2013-01-04T19:30:28.653
> 
> 标签：csv, weka, arff

I had .txt file and I opened it and saved it as *.csv* file.

Now I try to open it in weka and I got this type of error: `Null`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:54:23.907

Weka 使用**ARFF**作为**标准数据文件格式**。

由于您没有给出新创建的**CSV**的示例，我建议您阅读有关Weka 中**CSV文件的内容。**[http://weka.wikispaces.com/Can+I+use+CSV+files%3F](http://weka.wikispaces.com/Can+I+use+CSV+files%3F)

我的意见是你应该**把你的数据格式化为 ARFF 格式**，你不会有任何问题。

这是一个小**例子**：

```
@relation ball

@attribute color {white, orange, brown}
@attribute diameter real
@attribute forma {circle, oval}
@attribute weight real
@attribute type {fotbal, pingpong, basket}

@data
white,10,circle,1000,fotbal
white,9,circle,800,fotbal
orange,1,circle,10,pingpong
white,1,circle,10,pingpong
brown,15,circle,1300,basket
brown,16,circle,1400,basket
white,9,circle,901,fotbal
white,10,circle,850,fotbal
orange,1,circle,8,pingpong
white,1,circle,9,pingpong
brown,16,circle,1350,basket
brown,16,circle,1401,basket 
```

# android - How to change Language in android WebView

> ID：14163624
> 
> 赞同：1
> 
> 时间：2013-01-04T19:30:27.630
> 
> 标签：android, webview, android-webview, locale

How can I change content language in my WebView. My exampe (below) works good, but it changing only when I change phone language. The problem is when I change language **inside of my App** - menu, text, names etc. changing except content in webview.

```
public class WebViewActivity extends Activity {

WebView mWebView;

        public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.web_view_activity); // ID Activity

    mWebView = (WebView) findViewById(R.id.webview); // ID webview
    mWebView.getSettings().setJavaScriptEnabled(true); // Enable JavaScript
    mWebView.getSettings().setAllowFileAccess(true); // File access

            String lang = Locale.getDefault().getLanguage();
    String filename = "www/index.html";
    if (lang.equals("en")) {
      filename = "www/index.en.html";
    }
    mWebView.loadUrl("file:///android_asset/" + filename); 
```

LANGUAGE CLASS

```
import java.util.Locale;

import android.content.Intent;
import android.content.SharedPreferences;
import android.content.res.Configuration;
import android.content.res.Resources;
import android.os.Bundle;
import android.preference.Preference;
import android.preference.ListPreference;
import android.preference.PreferenceManager;
import android.preference.PreferenceActivity;

import com.training.MainActivity;
import com.training.programs.R;

public class LanguageLocale extends PreferenceActivity implements
        Preference.OnPreferenceChangeListener {

    PreferenceManager manager;
    ListPreference listPreference;
    SharedPreferences sharedPreference;
    Locale RUSSIAN= new Locale("ru", "ua");
    @SuppressWarnings("deprecation")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.layout.language_option_preference);
        sharedPreference = PreferenceManager.getDefaultSharedPreferences(this);

        manager = getPreferenceManager();
        listPreference = (ListPreference) manager.findPreference("language_setting");

        listPreference.setOnPreferenceChangeListener(this);
    }

    @Override
    public boolean onPreferenceChange(Preference preference, Object newValue) {

        Resources resource = getResources();
        Configuration config = resource.getConfiguration();

        int pos = Integer.parseInt((String) newValue);
        if (pos == 1) {
            sharedPreference.edit().putString("language", "en").commit();
            config.locale = Locale.ENGLISH;
            listPreference.setValue("1");

        } else if (pos == 2) {
            sharedPreference.edit().putString("language", "ru").commit();

            config.locale = RUSSIAN;
            listPreference.setValue("2");
        } else {
            sharedPreference.edit().putString("language", "auto").commit();
            config.locale = Locale.getDefault();
            listPreference.setValue("0");
        }

        getBaseContext().getResources().updateConfiguration(config, null);

        Intent intent = new Intent();
        intent.setClass(this, MainActivity.class);
        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        this.startActivity(intent);
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:42:57.540

您可能会将您的应用程序 lang 保留在某个位置，因此您应该添加一个方法来获取正确的 lang ：

```
private String mLang;
public String getMyAppLang(){        
    if (mLang==null)
        mLang = Locale.getDefault().getLanguage();
    return mLang;
}
 public void setMyAppLang(String lang){
    mLang = lang;
 } 
```

当用户在您的应用程序中修改语言时，您`setMyAppLang(lang);`
在活动代码中调用 And：

```
String lang = getMyAppLang(); 
```

代替：

```
String lang = Locale.getDefault().getLanguage(); 
```

# sql - SQL Server Variable Truncate

> ID：14163627
> 
> 赞同：0
> 
> 时间：2013-01-04T19:30:48.600
> 
> 标签：sql, sql-server, sql-server-2008

I know you could Truncate a Table or Table variable but is there a way to also truncate a variable ?

```
DECLARE @HiddenMe NVARCHAR(MAX)

SET  @HiddenMe = (select XYZ.abc)

If LEN(@HiddenME) >= 1800000  Then would like to truncate @HiddenMe . 
```

Please let me know . FYI, am using sql 2008

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T19:34:33.983

By truncate, I assume you mean truncating all data past a certain point, not dropping all data (like a table truncate). This should work.

```
SET  @HiddenMe=SUBSTRING(@HiddenMe,1,1800000) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T19:35:06.577

You can use [`LEFT()`](http://msdn.microsoft.com/en-us/library/ms177601.aspx):

```
set @HiddenME = left(@HiddenME, 1800000) 
```

So your script will be like this:

```
DECLARE @HiddenMe NVARCHAR(MAX)

SET  @HiddenMe = 'lets test a longish string to trim after a certain number of characters'

if LEN(@HiddenME) >= 1800000
  set @HiddenME = left(@HiddenME, 1800000) 
```

See [SQL Fiddle with Demo](http://sqlfiddle.com/#!3/d41d8/7525)

# haskell - MultiParamTypeClasses, FunctionalDependencies, and calling ambiguous functions

> ID：14163629
> 
> 赞同：3
> 
> 时间：2013-01-04T19:30:52.673
> 
> 标签：haskell, typeclass, functional-dependencies

With functional dependencies, I can declare the `Foo` class:

```
class Foo a b c | a -> b where
    foo1 :: a -> b -> c
    foo2 :: a -> c 
```

and when I call `foo2`, everything works fine. The compiler knows which instance to use because of the dependency.

But if I remove the dependency to create `Foo'`:

```
class Foo' a b c where
    foo1' :: a -> b -> c
    foo2' :: a -> c 
```

everything still compiles fine, but now whenever I try to call `foo2'` GHC throws an error about not being able to resolve which instance to use because `b` is ambiguous.

Is it ever possible to call `foo2'` without error? If so, how? If not, why doesn't it generate a compilation error?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T01:52:21.313

在这种情况下调用是不可能的`foo2'`，因为正如 Daniel Fischer 所说，没有办法确定使用哪个实例。例如，如果您有：

```
instance Foo' Int Int Int where
    foo2' x = x

instance Foo' Int Bool Int where
    foo2' x = x + 1 
```

这两个`foo2'`s 具有相同的类型签名，因此无法确定调用哪一个。

解决此问题的常用方法是使用代理：

```
data Proxy a = Proxy

class Foo'' a b c = where
    foo2'' :: Proxy b -> a -> c 
```

您使用它来选择哪个实例：

```
foo'' (Proxy :: Proxy Bool) 42 
```

# oauth - How to save refresh tokens?

> ID：14163632
> 
> 赞同：30
> 
> 时间：2013-01-04T19:30:58.297
> 
> 标签：oauth, oauth-2.0

I'm trying to add authentication feature to my application. The authentication server implements **oauth 2.0**

I'm not sure how to save the **refresh_token**. I want to save it to a file, so next time when the application starts and there is a refresh_token available, it can ask for a new **access_token**. The user won't need to re-login again.

But this doesn't sound secure to me, because if someone copies my file that has the refresh_token to another computer, he can hack into my account.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-04T22:36:01.020

您描述的攻击是正确的。必须安全地存储刷新令牌才能按预期使用。据我了解，您正在构建一个独立的应用程序。因此，您可以依靠文件系统安全性来防止未经授权的用户复制刷新令牌。您可能也想对刷新令牌使用加密，但密钥需要绑定到本地计算机上的用户会话（否则，用户需要在“登录”过程中提供它才能使用应用程序解密刷新令牌）。

考虑阅读 OAuth WG 的主题，该主题讨论了与所述问题类似的问题并提供了一些指导： [https ://www.ietf.org/mail-archive/web/oauth/current/msg02292.html](https://www.ietf.org/mail-archive/web/oauth/current/msg02292.html)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-05-24T05:28:39.847

刷新令牌用于获取访问权限（此过程需要 HTTP 基本身份验证）。因此，除非用户拥有您的 (id,secret) 组合，否则他无能为力。但是，必须非常认真地考虑刷新令牌的存储。

这是我的两分钱：

1.  将您的令牌存储在数据库中

2.  每当您使用刷新令牌获取访问令牌时，也会重置刷新令牌。（Oauth2.0 有这个特性，你也可以让刷新令牌不变，但是从安全角度来看，保持它的变化和更新数据库是明智的）

希望这能提供一些见解！

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-01-04T22:36:27.120

您的担忧是对的 - 您不应该保存刷新令牌。这样做会危及客户的数据（并且您知道原因；您在问题中写了它）。oAuth 不应该以这种方式工作。您应该将刷新令牌保留在内存中。

# windows - Keyboard-only column block selection in GVim Win32, or why does Ctrl-Q not emulate Ctrl-V when mswin.vim is included?

> ID：14163642
> 
> 赞同：20
> 
> 时间：2013-01-04T19:31:42.137
> 
> 标签：windows, windows-xp, vi, vim

I want to be able to select columnar blocks using only the keyboard when I use GVim on Windows, but I do not seem to be able to do so when using gvim (7.2) on Windows XP. *Edit: For convenience, it is preferable to make the selection with arrow keys as is commonly done in other versions of vi/vim.*

In a terminal, when using vim, to define a block, one may select columnar blocks by pressing `Ctrl-V` and by conveniently moving the cursor *with the arrow keys*.

When using GVim on mswin, `Ctrl-V` is mapped to a paste operation. Every reference found on this topic mentions that on mswin, `Ctrl-Q` is set to act the same way that `Ctrl-V` works on other platforms, but this does not work for me.

After research indicated that the `Ctrl-Q` behavior is implemented through the inclusion of mswin.vim, it seemed that perhaps mswin.vim was not being loaded by GVim. mswin.vim is apparently loaded via _vimrc. It seemed that perhaps mswin.vim was not loading, so perhaps _vimrc was not setup correctly, but...

`C:\Program Files\Vim\_vimrc` exists contains:

```
source $VIMRUNTIME/mswin.vim
behave mswin 
```

`C:\Program Files\Vim\vim72\mswin.vim` exists and contains:

```
" Use CTRL-Q to do what CTRL-V used to do
noremap <C-Q>       <C-V> 
```

`C:\Program Files\Vim\_vimrc` should load since Edit | Settings Window in the GVim graphical menu loads this file for editing, and it is clear that `C:\Program Files\Vim\vim72\mswin.vim` is loading because one can insert a syntax error in that file and GVim will complain about it when it starts up (it was backed it up for testing and restored to prevent accidental corruption).

When `Ctrl-Q` is pressed, the cursor changes in the same way that it changes when you block select text using the mouse, but any cursor movement at this point causes the cursor to change back to a normal cursor. It does not matter whether one continues to hold `Ctrl`, `Ctrl-Q`, or not.

*Edit: `Ctrl-Q` enters block selection mode as indicated by the cursor change since other cursor movement commands extend the block, however, the original intent of this question was to learn how to use the arrow keys (in the same manner that they are able to be used in other implementations of the editor) though this was not explicitly stated in the original, unanswered revisions of the question.*

It is possible to visually select columnar blocks by pressing `Alt` while holding down the left-mouse button, but `Alt` during arrow key motion after pressing `Ctrl-Q` also does not work.

Research also seemed to indicate that pressing `v` in command-mode would enter visual-mode, and that perhaps this was relevant, but using this does not seem to help the situation.

`C:\Program Files\Vim\vimfiles` does not contain anything except an empty directory structure. `C:\Documents and Settings\username` does not contain vim configuration files, nor does `C:\Documents and Settings\username\My Documents`. Other `C:\Documents and Settings\username` locations, where application-specific or local settings are commonly stored, also appear not to have vim settings. The same is true for %HOMEDRIVE% and for the environment variables.

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-04T20:06:49.417

仅使用键盘在 Win32 上的 GVim 中直观地选择列块的一种方法是按下，释放它，然后在使用箭头键选择列块的同时`Ctrl-Q`按住键。`Shift`

为什么`Ctrl-Q`列选择会以这种方式运行尚不清楚，但这并不重要，因为目标是仅使用键盘来选择列块。在 Vim 中，用于选择块`Shift`时不使用。`Ctrl-V`

`:help mswin`没有提到`CTRL-V`替代方案的这种细微差别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T20:23:24.773

最好的办法是从你的 vimrc 中删除这些行。它们完全没有必要，并且改变了太多基本的 Vim 特性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T11:37:03.993

`noremap <C-Q> <C-V>`mswin.vim 中的将原始命令重新映射为`Ctrl`+ `Q`。

如果包含 mswin.vim，按`Ctrl`+后`Q`，指示模式应切换到*Visual Block*，并且任何移动（例如`j`、`l`、`w`）都会扩展视觉选择。如果这对你不起作用，你可能有一些干扰。

这些运动命令本身是重新映射的，还是有一个`autocmd`on `CursorMoved`？！尝试禁用您的插件 ( `vim --noplugin`) 和大部分`.vimrc`.

请注意，光标键通常不会构成正确的移动（并且它们在 Vim 中的使用是不受欢迎的）。

您认为扩展选择的正确（也是唯一）方法（使用移动的光标键）只是 的结果`:set selectmode=key`，正如`:behave mswin`.

# iframe - iframe 内的 selenium webdriver 元素是可点击的，但 moveToElement 会导致 MoveTargetOutOfBoundsError

> ID：14163644
> 
> 赞同：0
> 
> 时间：2013-01-04T19:31:43.493
> 
> 标签：iframe, selenium, hover, webdriver

我有一个带有 iframe 的页面。iframe 内部是一个表格。当用户将鼠标移到该表上时，会出现一些元素。我想单击其中一个元素。

我认为我的一些第一步应该是选择 iframe，然后选择 moveToElement(table)。但这会导致 MoveTargetOutOfBoundsError。

奇怪的是，我能够选择 iframe 并单击表格。点击不会抱怨元素的 x,y 坐标，但 moveToElement 会抱怨。**为什么？**（不幸的是，单击表格执行的操作会导致我想要消失的那些按钮，所以这不是一个选项。）

我怎样才能完成我想要的（选择 iframe，将鼠标悬停在表格上，等待按钮出现，单击其中一个按钮）？

版本信息：

```
Build info: version: '2.28.0', revision: '18309', time: '2012-12-11 15:53:30'
System info: os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.6.0_37' 
```

下面是点击表格成功的java代码：

```
driver.switchTo().defaultContent();
driver.switchTo().frame("frameId");
WebElement e = driver.findElement(By.id("foo"));
e.click(); 
```

这是抱怨表位置的java代码：

```
driver.switchTo().defaultContent();
driver.switchTo().frame("frameId");
WebElement e = driver.findElement(By.id("foo"));
Actions builder = new Actions(driver);
builder.moveToElement(e).build().perform(); // error happens in moveToElement() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:28:47.513

我认为您必须滚动查看：

```
if (element instanceof Locatable) {
    Locatable remoteElement = (Locatable) inputElement;          
    remoteElement.getLocationOnScreenOnceScrolledIntoView();
} 
```

如果你想将鼠标悬停在一个元素上，你必须扩展一下上面的内容：

```
if (element instanceof Locatable) {
    Locatable hoverItem = (Locatable) element;
    hoverItem.getLocationOnScreenOnceScrolledIntoView();
    Mouse mouse = ((HasInputDevices) webDriver).getMouse(); 
    mouse.mouseMove(hoverItem.getCoordinates());
} 
```

# javascript - Using FileUploadField extension with extjs3.4

> ID：14163645
> 
> 赞同：2
> 
> 时间：2013-01-04T19:31:47.957
> 
> 标签：javascript, file-upload, extjs

Trying to handle with the FileUploadField extension for ExtJS 3.4 provided on Examples web page (http://dev.sencha.com/deploy/ext-3.4.0/examples/form/file-upload.html), **I can't get any of the tree examples to be as it is shown on web page**. And of course, can't get them work as they might.

When I specify a "FileUpLoadField" on my application, there appear two "browse.." buttons: It seems that one belongs to the ExtJS extension and another belongs to the browser. On the other hand appear what it seems to be two textfields and there's no Icon.

I've got the FileUpLoadField" extension copying code that's provided on: [http://dev.sencha.com/deploy/ext-3.4.0/examples/ux/fileuploadfield/FileUploadField.js](http://dev.sencha.com/deploy/ext-3.4.0/examples/ux/fileuploadfield/FileUploadField.js)

I've put this code on a .js file and added it as a library on my app.

I suppose this issue is related with browser/ExtJS extension I'm using.

**Could anyone try to explain what I'm doing wrong?**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T02:26:27.990

您可能没有在代码中添加指向 FileUploadField.css 的链接。

# objective-c - 这个方法签名是什么意思

> ID：14163649
> 
> 赞同：1
> 
> 时间：2013-01-04T19:31:57.260
> 
> 标签：objective-c, afnetworking, block

我正在查看 AFNetworking 的源代码（我是 Objective-C 和 AFNetworking 的菜鸟），并试图理解一些继承的代码。看起来它们是不返回任何内容的块，传入 AFHTTPRequestOperation 以及响应或 NSError。这是块定义吗？最后的成功/失败意味着什么？我认为这类似于成功：MyParam(NSString *)my_param。就像一句话就足够了。

```
- (void)getPath:(NSString *)path
     parameters:(NSDictionary *)parameters
        success:(void (^)(AFHTTPRequestOperation *operation, id responseObject))success
        failure:(void (^)(AFHTTPRequestOperation *operation, NSError *error))failure
{ 
```

任何帮助表示赞赏。提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T19:37:19.970

和参数是块`success`，`failure`Apple 对 C 编程语言的扩展。块与匿名函数指针非常相似。

在这个场景中，它扮演了一个插入式回调函数的角色。如果成功获取路径，则`success`调用回调，或者`failure`调用回调。

签名分别指定了这些回调块应接受的参数。这些参数的实际值将由该 AFNetworking 调用提供。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T19:41:52.973

是的，这些是块。您看到的第一件事，开头的`success`/是方法名称的一部分，当您将它传递给方法时，您将在该参数之前放置它。`failure`表示该`void`块不返回任何值。尖叫声“`^`我是一个街区！” 在你。该块有两个参数；a`AFHTTPRequestOperation *`被称为`operation`块内，而 a`id`被称为`responseObject`块内。末尾的`success`/是整个块参数的名称，用于在接收它的方法中引用它。`failure`

# java - 为什么 File.exists 返回误报

> ID：14163652
> 
> 赞同：1
> 
> 时间：2013-01-04T19:32:20.847
> 
> 标签：java, android, file, file-io

我的 android File.exists 功能有一个奇怪的问题。下面是我的代码

```
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        super.onCreateView(inflater, container, savedInstanceState);
        View view = inflater.inflate(R.layout.fragment_file_browser, container);

        DataBaseHelper tmpHelper = new DataBaseHelper(getActivity());
        ButtonInfoContainer infoContainer = tmpHelper.getVideoWithId(videoId);

        //Tmp way to use this. When UX is finished will create a better way.
        File f = new File(Environment.getExternalStorageDirectory() + "/aslkfj");
        Log.i(StaticValues.TAG, Environment.getExternalStorageDirectory() + "/aslkfj");

        LinearLayout tmpView2 = (LinearLayout) view.findViewById(R.id.custom_recordings);
        if(f.exists());
        {
            Log.i(StaticValues.TAG, "f exists");

            String[] tmp = f.list();
            View tmpView = null;

            if(tmp != null)
            {
                for(int i = 0; i < tmp.length; i ++)
                {   
                    tmpView = inflater.inflate(R.layout.list_item, null);
                    TextView tmpText = (TextView) tmpView.findViewById(R.id.product_name);
                    tmpText.setText(tmp[i]);
                    tmpView2.addView(tmpView);
                }
            }
        }
        return view;
    } 
```

一切都很酷，但奇怪的是 File.exists 对我返回了误报。它总是说文件存在（虽然只是在这个应用程序中）。上面给出的路径 /aslkfj 不存在，但是当我运行此代码时，我的 logcat 输出 f 存在。为什么会发生这样的事情。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-04T19:34:31.563

你有一个`semi-colon`在你的`if`条件结束： -

```
if(f.exists());  <-- Semi-colon here is causing problem 
```

因此，以下块只是一个本地块，无论您的 if 条件评估为什么，都会执行该块。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-04T19:34:34.403

你有一个严重的错字：

```
if(f.exists()); 
```

`;`基本上忽略了该声明`if`。

这对于快速条件非常方便，例如：

```
if(f.exists())
    Log.i(StaticValues.TAG, "f exists"); 
```

但是这里有一个oopies。

# java - 如何在android中执行root进程（su）并从中写入/读取命令

> ID：14163654
> 
> 赞同：1
> 
> 时间：2013-01-04T19:32:32.810
> 
> 标签：java, android, process, stream

我正在尝试以 root 权限执行命令，我试试这个（仅作为示例）：

```
Process process = Runtime.getRuntime().exec(new String[]{"su","-c","whoami"});

BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));
String line;

while ((line = reader.readLine()) != null) {
    result += line;
    Log.d(TAG,"RESULT:"+result);
} 
```

但是我需要在一个循环中调用它一百次，所以这种方式非常慢并且总是显示一个对话框，其中包含授予 root 权限的消息，所以我如何创建一个`su`使用输入连续写入和读取的单一进程和输出流？我知道两者都使用，但我不知道如何编写和读取命令的结果。谢谢你的帮助。

# iphone - 无法执行转场

> ID：14163655
> 
> 赞同：0
> 
> 时间：2013-01-04T19:32:34.867
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我有两个视图，一个有两个按钮和一个pickerview，另一个有一些文本......第一个视图中的一个按钮是“TODAY”按钮，然后是一年中所有日子的选择器视图，然后是另一个按钮“CHOOSE”，第二个按钮获取在pickerview上选择的日期，并通过带有标识符“mySegue”的模态segue将我们带到下一个视图，并根据所选日期显示个性化内容。第一个按钮应该获取今天的日期，并将我们带到下一个视图，其中包含当天日期的个性化内容。但我无法让它与我的代码一起使用！我尽力解释它...

```
-(IBAction)today:(id)sender{

    NSDate *date = [NSDate date];

    NSDateFormatter *dateFormat = [[NSDateFormatter alloc]init];

    [dateFormat setDateFormat:@"dd MMM"];

    NSString *dateString = [dateFormat stringFromDate:date];

    test.text = dateString;

    if (dateString == @"04 jan") {

        [self performSegueWithIdentifier:@"mySegue" sender:self];
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:38:17.930

您应该使用比较字符串`isEqualToString`，而不是`==`

```
if([dateString isEqualToString:@"04 jan"]){
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:40:59.627

除了@Tim 刚才所说的之外，您应该使用`04 jan`小写字母`04 Jan`。所以改为使用`isEqualToString`并比较`04 Jan`。

# python - 我们可以在 python profiling 中找到内置方法调用的位置吗？

> ID：14163657
> 
> 赞同：7
> 
> 时间：2013-01-04T19:32:45.757
> 
> 标签：python, cprofile

当我使用 cProfile 分析我的 python 代码时，大部分时间都有很多 {built-in method...}。它们可能是第三方 API 或我的 C/Fortran 扩展。问题是我们能否轻松找到这些方法在 python 脚本中的调用位置？谢谢！

# javascript - 有没有办法在 MongoDB 识别的 JSON 中表示 ISODate 和 ObjectID 字段？

> ID：14163658
> 
> 赞同：2
> 
> 时间：2013-01-04T19:32:49.887
> 
> 标签：javascript, json, node.js, mongodb, node-mongodb-native

我正在尝试将 JSON 文件导入节点内的 MongoDB。这是我正在尝试做的事情：

```
db.open(function(err, db) {
  if(!err) {
    db.collection('orgs', {safe: true}, function(err, collection) {
      if (err) {
        console.log("The 'orgs' collection doesn't exist. Creating it with sample data...");
        db.collection('orgs', function(err, collection) {
          orgs = require("../data/orgs.json");
          collection.insert(orgs, {safe:true}, function(err, result) {});
        });
      }
    });
  }
}); 
```

请注意，NodeJS 可以将 JSON 自动导入为 JSON，这很好，但 JSON 不处理 ISODate 或 ObjectID 之类的对象。这是我尝试导入的 JSON 数据的片段：

./data/orgs.json：

```
 {
    "stub": "apple",
    "name":"Apple, Inc.",
    "timezone": "America/New_York",
    "currency": "USD",
    "plans": [
      {"planId":1, "dtStart": {"$date":"2012-12-07 12:34:56"}},
      {"planId":0, "dtStart": {"$date":"2012-12-05 23:45:02"}, "dtEnd": {"$date":"2012-12-07 12:34:56"}}
    ]
  } 
```

我正在为 Node.js 使用 mongodb 本机驱动程序。

我尝试使用日期的整数表示，但它不起作用。

有没有办法在 MongoDB 识别的 JSON 中表示 ISODate 和 ObjectID 字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T20:08:00.087

您不能在 中存储日期和其他自定义对象`JSON`，因为 in 仅支持字符串、数字、布尔值和`null`'s。所以，从`JSON`你那里加载它们应该以某种方式从它们的字符串表示中恢复它们。当然，您可以使用`BSON`代替，`JSON`因为它支持所有这些数据类型，但有更好的方法来解决您的问题。

由于您已经使用`require` 而不是`JSON.parse`加载和解析 JSON 数据，因此您可以再做一步并使用`JavaScript`数据的表示而不是 pure `JSON`：

```
var ObjectID = require('mongodb').ObjectID;

module.exports = {
  stub: "apple",
  name: "Apple, Inc.",
  timezone: "America/New_York",
  currency: "USD",
  plans: [
    {
      planId: new ObjectID("1"),
      dtStart: new Date("2012-12-07 12:34:56")
    },
    { 
      planId: new ObjectID("0"),
      dtStart: new Date("2012-12-05 23:45:02"),
      dtEnd: new Date("2012-12-07 12:34:56")
    }
  ]
} 
```

在这种情况下，您将能够使用`new Date`并`new ObjectID`创建日期和对象 ID。

**注意**您可以使用`require('bson').ObjectID`代替`require('mongodb').ObjectID`，结果将是相同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-12-04T17:27:30.820

我们使用类似的东西：

```
 import ejson from 'mongodb-extended-json';
    import animals from './fixtures/Animals.json';
    const array = ejson.deserialize(animals) 
```

json就像

`{ "_id" : { "$oid" : "54ebb..." }, "created" : { "$date" : "2015-02-23T23:19:54.674+0000" }}`

# haskell - Pi 求和无限运行

> ID：14163659
> 
> 赞同：1
> 
> 时间：2013-01-04T19:32:50.703
> 
> 标签：haskell

> **可能的重复：**
> [无限列表的有限理解](https://stackoverflow.com/questions/10336392/finite-comprehension-of-an-infinite-list)

我一直在玩 Haskell，所以我尝试在一定程度上尝试计算 Pi，但是，该解决方案似乎无缘无故地无限运行。我似乎无法弄清楚。

这是我目前拥有的：

```
numerPi :: Int -> Int
numerPi k = (-1)^(k+1)
denomPi :: Int -> Int
denomPi k = 2*k - 1
termPi :: Int -> Float
termPi k = fromIntegral(numerPi(k)) / fromIntegral(denomPi(k))
quarterPi = sum([termPi(x) | x <- [1..], termPi(x) > 0.00001]) 
```

在 ghci 中做事`4 * quarterPi`似乎永远在继续。如果这个问题太简单了，我很抱歉，但我无法让它发挥作用，而且谷歌也没有丝毫帮助。

**[编辑：这是无限列表](https://stackoverflow.com/questions/10336392/finite-comprehension-of-an-infinite-list)**的有限理解的副本****

# javascript - 枚举 JSON 主从数组

> ID：14163661
> 
> 赞同：0
> 
> 时间：2013-01-04T19:33:01.470
> 
> 标签：javascript, json, knockout.js

我有一个视图模型，其中包含我要绑定到的 2 个相关（主​​/详细）数组。

```
 var ViewModel = function (data) {
        var self = this;
        self.CategoryList = ko.observableArray(data.CategoryList);
        self.ItemList = ko.observableArray(data.ItemList);
   } 
```

`{ categoryID: 1, name: "Red Items" }`其中 Category 是等数组

和 Item 是一个`{ itemID: 1, categoryID: 1, name: "Red Widget" }`等数组

我有几个类别，可能有几百个项目。我正在努力解决如何在我的视图模型中以一种可以枚举类别并获取相关项目或跨所有项目并获取类别的方式来表示这些。

在两个列表上维护重复信息似乎效率不高，而且我不想通过网络发送比需要更多的数据。

一种方法：创建 Item 和 Category 对象并修改原型以包含过滤（ko.computed）功能。`category.Items()`或者`item.Category().Name`，但鉴于我需要加载和保存数据，我不是 100% 如何在 knockout.js 中最好地完成此任务。

我不喜欢简单的 JSON 对象数组。假设我走函数/原型路线，我该如何加载和保存我的对象数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:06:28.000

我认为您需要比数组更好的数据结构，因为-正如您所说-保留重复信息并不是最佳选择。为什么不用一个数组来列出你的类别，而不是使用一个哈希表，或者我们在 javascript 中简单地知道一个对象？

```
{
    1: "Red Items",
    2: "Blue Items",
    3: "Green Items",
    4: "Yellow Items",
} 
```

（您可以使用简单的方法从数组创建哈希）

```
var createHashFromArray = function(arr) {
  var hash = {}
  for (var i = 0, var len = arr.length; i < len; i++)
    hash[i] = arr[i];
  return hash;
} 
```

从那里，您可以根据需要的类别绑定您的 viewModel。您甚至可以将它们设置为动态数组`ko.computed`，以便在视图中组织它们。

```
<div data-bind="foreach: redItemsOnly">
  <span data-bind="text: itemId">ID</span>
  <span data-bind="text: name">NAME</span>
</div> 
```

在你的javascript中......

```
self.redItemsOnly = ko.computed(function() {
return ko.utils.arrayFilter(self.ItemList(), function(item) 
{
    return self.CategoryHash[item.categoryID] === "Red Items"
});
}, self) 
```

我不确定这是否是您想要的，但我希望这种方法可以帮助您找到其他方法来满足您的需求。

# asp.net - 在 Visual Studio 2012 Express Web 中找不到发布网站选项

> ID：14163664
> 
> 赞同：2
> 
> 时间：2013-01-04T19:33:02.643
> 
> 标签：asp.net, visual-studio-2012, asp.net-4.5

我使用文件 > 新网站 > Aps.net 空网站创建了一个空网站（不是项目）。通常当我点击构建时，有一个“发布网站”选项。但是，我在这里看不到。我所能看到的只是构建和重建解决方案。我究竟做错了什么？即使我右键单击该网站，它也只是给了我一个构建选项，而不是发布。我以前使用的是 VS 2010，它有 Publish 选项。

![在此处输入图像描述](../Images/d6dd24eb1a631308b31619678a6c1252.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:36:09.453

发布仅支持 Web*应用程序*项目，不支持*网站*项目。

[http://msdn.microsoft.com/en-us/library/dd547590.aspx](http://msdn.microsoft.com/en-us/library/dd547590.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T19:56:47.157

我不知道这是否在所有情况下都是如此，但我只是卸载了 VS 2012 Web Express，删除了 Microsoft Visual Studio 11 文件夹中的内容，然后安装了专业版。可能Express版没有这个，但是安装专业版后，我确实有“发布网站”选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-17T12:32:30.210

我相信这个问题可以通过从这个网页下载和安装相关的网络发布更新来解决：http: [//msdn.microsoft.com/library/jj161045](http://msdn.microsoft.com/library/jj161045)

我在 Visual Web Developer 2010 Express 中遇到了同样的问题。当我安装更新时，我可以使用“发布网站”选项。

编辑：您可能会发现，当您单击“发布网站”时，您会收到如下错误：

> 未找到导入的项目“C:\ProgramFiles\MSBuild\Microsoft\VisualStudio\v11.0\WebSites\microsoft.website.publishing.targets”。确认声明中的路径正确，并且该文件存在于磁盘上。

我通过进入“website.publishproj”（在我的网站打开的解决方案资源管理器中找到）解决了这个问题，并像这样“硬连线”了 WebPublishTargetsVersion 元素：

```
<WebPublishTargetsVersion>10.5</WebPublishTargetsVersion> 
```

出于某种原因，现有代码返回 11.0，而不是 10.5。

如果您更新版本，像这样硬连线可能会在以后导致问题。所以请谨慎行事。

# c++ - 为什么 C++11 不支持这样的名称查找？

> ID：14163667
> 
> 赞同：5
> 
> 时间：2013-01-04T19:33:46.157
> 
> 标签：c++, c++11, namespaces, argument-dependent-lookup, name-lookup

```
struct A
{
    enum InnerEnum { X };

    A(InnerEnum x)
    {}
};

int main()
{
    A a(X);
} 
```

编译器抱怨：`error C2065: 'X' : undeclared identifier`

编译器知道构造函数的参数类型是什么，所以当我将 X 作为参数传递时，编译器应该知道它是一个有效参数。

我知道这不是 ADL（Argument-dependent Name Lookup，也称为 Koenig Lookup），但我认为它很有用且非常方便。因为我不必写如下：

```
A a(A::X); 
```

我认为 ADL 规则应该推广到这种情况。

我对吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-04T19:46:13.063

C++ 中的函数调用受函数重载决议的约束。重载决议由参数类型驱动。即语言专门在那个方向“起作用”：*从*参数类型*到*具有给定名称的函数的特定版本。

您提议引入一个反向过程 - 基于函数名称的参数类型推导。这在一般情况下不起作用。它可能在只有一个候选函数（如您的示例中）的情况下起作用，但同样，这与在函数重载时的一般情况下起作用的原则相反。

当然，当对非限定名称`X`进行名称查找时`X`，除了您的`A::X`. 我认为它很容易变得非常违反直觉。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T19:47:00.963

> 我认为 ADL 规则应该推广到这种情况。

不，谢谢。

C++ 有一些（令人讨厌的）惊喜（您知道哪种其他语言需要`explicit`作为关键字？），我认为您的示例没有足够的优点添加到这个意外语言规则列表中，这些规则会在意外情况下阻碍我的代码。

如果您发现在 class-name 后面加上两个冒号需要额外的输入，那么 C++ 语法的一般巴洛克性质现在肯定会让您失望吗？

# mysql - 慢查询，状态='排序结果'mysql

> ID：14163674
> 
> 赞同：1
> 
> 时间：2013-01-04T19:34:11.897
> 
> 标签：mysql, performance, indexing

我已经生成了查询

```
select 
    mailsource2_.file as col_0_0_, 
    messagedet0_.messageId as col_1_0_, 
    messageent1_.mboxOffset as col_2_0_, 
    messageent1_.mboxOffsetEnd as col_3_0_, 
    messagedet0_.id as col_4_0_ 
from MessageDetails messagedet0_, MessageEntry messageent1_, MailSourceFile mailsource2_ 
where messagedet0_.id=messageent1_.messageDetails_id 
and messageent1_.mailSourceFile_id=mailsource2_.id 
order by mailsource2_.file, messageent1_.mboxOffset; 
```

解释说没有完全扫描并且使用索引：

```
+----+-------------+--------------+--------+------------------------------------------------------+---------+---------+--------------------------------------+------+----------------------------------------------+
| id | select_type | table        | type   | possible_keys                                        |key     | key_len | ref                                  | rows | Extra           |
+----+-------------+--------------+--------+------------------------------------------------------+---------+---------+--------------------------------------+------+----------------------------------------------+
|  1 | SIMPLE      | mailsource2_ | index  | PRIMARY                                              |file    | 384     | NULL                                 | 1445 | Using index; Using temporary; Using filesort |
|  1 | SIMPLE      | messageent1_ | ref    | msf_idx,md_idx,FKBBB258CB60B94D38,FKBBB258CBF7C835B8 |msf_idx | 9       | skryb.mailsource2_.id                | 2721 | Using where           |
|  1 | SIMPLE      | messagedet0_ | eq_ref | PRIMARY                                              |PRIMARY | 8       | skryb.messageent1_.messageDetails_id |    1 |           |
+----+-------------+--------------+--------+------------------------------------------------------+---------+---------+--------------------------------------+------+----------------------------------------------+

CREATE TABLE `mailsourcefile` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `file` varchar(127) COLLATE utf8_bin DEFAULT NULL,
  `size` bigint(20) DEFAULT NULL,
  `archive_id` bigint(20) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `file` (`file`),
  KEY `File_idx` (`file`),
  KEY `Archive_idx` (`archive_id`),
  KEY `FK7C3F816ECDB9F63C` (`archive_id`),
  CONSTRAINT `FK7C3F816ECDB9F63C` FOREIGN KEY (`archive_id`) REFERENCES `archive` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1370 DEFAULT CHARSET=utf8 COLLATE=utf8_bin 
```

我还有文件和 mboxOffset 的索引。SHOW FULL PROCESSLIST 表示 mysql 正在对结果进行排序，并且需要几分钟。结果集大小为 5M 记录。我该如何优化呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T23:07:43.123

优化总是很棘手。为了减少执行时间，我认为您可能需要进行**某种**预煮。

如果文件名相似（例如 /path/to/file/1、/path/to/file/2），对它们进行排序将意味着大量的字节比较，可能会因 unicode 编码而变得复杂。我会在插入时计算文件名的哈希值（例如 MD5()），然后使用它进行排序。

如果文件已经很好地分布（例如后缀假脱机名称），您可能需要提出一些插入方案：

1.  简单地从某个连接表中读取记录将自动以正确的顺序生成它们；这可能不会节省很多时间，但它会快速为您提供一些数据，以便您开始处理，或者
2.  找到一种方法来为数据提供一个“窗口”，这样就不需要一次处理所有数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T09:00:08.243

不要认为查询本身有很多优化。连接会使其更具可读性，但如今的 iirc mysql 完全能够检测到这类结构并自行规划连接。

可能有帮助的是增加 tmp_table_size 和 max_heap_table_size 以允许此查询的结果集保留在内存中，而不必将其写入磁盘。

> 内存中临时表的最大大小是 tmp_table_size 和 max_heap_table_size 值中的最小值

[http://dev.mysql.com/doc/refman/5.5/en/internal-temporary-tables.html](http://dev.mysql.com/doc/refman/5.5/en/internal-temporary-tables.html)

解释中的“使用临时”表示它正在使用临时表（再次参见上面的链接） - 由于大量数据，它可能会被写入磁盘（再次，请参见上面的链接以获取更多信息） . 单独的文件列在 1 到 384 字节之间，所以让我们将一半用于我们的估计并忽略其余列，这导致结果集中每行 192 字节。

```
1445 * 2721  =   3,931,845 rows
     * 192   = 754,914,240 bytes
     / 1024 ~=     737,221 kb
     / 1024 ~=         710 mb 
```

这肯定超过了 max_heap_table_size（16,777,216 字节），而且很可能超过了 tmp_table_size。

不必将这样的结果写入磁盘肯定会提高速度。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T21:30:35.197

正如@raheel shan 上面所说，您可能想尝试一些`JOIN`：

```
select 
    mailsource2_.file as col_0_0_, 
    messagedet0_.messageId as col_1_0_, 
    messageent1_.mboxOffset as col_2_0_, 
    messageent1_.mboxOffsetEnd as col_3_0_, 
    messagedet0_.id as col_4_0_ 
from 
  MessageDetails messagedet0_ 
inner join 
  MessageEntry messageent1_ 
on 
  messagedet0_.id = messageent1_.messageDetails_id 
inner join 
  MailSourceFile mailsource2_ 
on 
  messageent1_.mailSourceFile_id = mailsource2_.id
order by 
  mailsource2_.file, 
  messageent1_.mboxOffset 
```

如果钥匙关了，我很抱歉，但我想我已经传达了这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T10:25:56.207

使用连接编写查询，例如

**选择**

mailsource2_.file 作为 col_0_0_，messagedet0_.messageId 作为 col_1_0_，messageent1_.mboxOffset 作为 col_2_0_，messageent1_.mboxOffsetEnd 作为 col_3_0_，messagedet0_.id 作为 col_4_0_

**来自** MessageDetails m0

**内部连接** ​​MessageEntry m1 **on** m0.id = m1.messageDetails_id

****在** m1.mailSourceFile_id = m2.id上**内部加入** MailSourceFile m2**

 ****按** m2_.file、m1_.mboxOffset 排序；

在看到你的解释后，我发现了 3 件我认为不好的事情

1 个文件在额外列中排序

2 类型列中的索引

3个密钥长度为384

如果您减少密钥长度，则考虑到您使用的字符集和部分索引，您可能会快速检索

在这里，您可以为 order by 执行强制索引并使用索引进行连接（创建适当的多列索引并分配它们）记住，在同一个表中存在列的情况下排序总是好的

索引类型表示它正在扫描整个索引列，这是不好的**

# android - TypedArray.getInteger() 和 TypedArray.getInt() 有什么区别？

> ID：14163682
> 
> 赞同：9
> 
> 时间：2013-01-04T19:34:32.913
> 
> 标签：android, android-preferences, android-xml, typed-arrays

查看 TypedArray 的源代码（[链接](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/content/res/TypedArray.java)），我似乎无法弄清楚这两种方法之间的区别是什么。`getInt()`与 基本相同`getInteger()`，但最后有一个我不明白的小补充。有人可以向我解释吗？

我需要知道区别的原因是我正在实现一个自定义的 Preference 子类，并获得我需要 override 的默认值`onGetDefaultValue()`，它从 TypedArray 中获取一个整数。例子：

```
@Override
protected Object onGetDefaultValue(TypedArray a, int index)
{
    return a.getInteger(index, DEFAULT_VALUE);
} 
```

我在这里使用`getInteger()`，但如果`getInt()`更好，那么我将使用它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T19:44:40.233

他们只是有不同的“一切都失败了”的情况。他们都返回`int`一个有效的`int`和`defValue`。`null`不同之处在于他们如何处理这两种情况。

从[链接](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/content/res/TypedArray.java)：

```
/*
 * Copyright (C) 2008 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

TypedValue v = mValue;
if (getValueAt(index, v)) {
    Log.w(Resources.TAG, "Converting to int: " + v);
    return XmlUtils.convertValueToInt(
        v.coerceToString(), defValue);
}
Log.w(Resources.TAG, "getInt of bad type: 0x"
      + Integer.toHexString(type));
return defValue; 
```

这是您所指的额外内容。它似乎正在将未知值转换为字符串，然后转换为整数。如果您存储了`"12"`或存储了一些等效的值，这可能会很有用。

如果`getInteger`它不是`null`并且不是`int`. 相反，如果所有其他方法都失败，则`getInt`返回默认值。

Also note that the behavior of them in this odd case is different enough that calling one superior to the other in every case would be incorrect. The best solution is the one that matches your expectations for failure.

# localization - 寻找本地化国家、语言和地区名称的来源

> ID：14163685
> 
> 赞同：6
> 
> 时间：2013-01-04T19:34:36.033
> 
> 标签：localization, internationalization, multilingual

我寻找世界主要语言名称、国家名称和领土名称的来源，这些名称已本地化为一长串语言。

语言的本地化名称示例：

```
 EN EN English
 EN ES Inglés
 ES EN Spanish
 ES ES Español 
```

西南欧某个国家的本地化名称示例：

```
 ES ES España
 ES FR Espagne
 ES EN Spain 
```

知道我可以从哪里获取/构建它吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-05T18:57:55.313

您可以在此处的 Unicode 通用区域设置数据存储库 (CLDR) 中找到您要查找的信息：http: [//cldr.unicode.org/](http://cldr.unicode.org/)

数据以 XML 格式提供，因此您需要将其导入数据库。

[CLDR 为语言名称](http://www.unicode.org/cldr/charts/by_type/code_lists.languages.html)和[领土（国家、大陆等）](http://www.unicode.org/cldr/charts/by_type/code_lists.territories.html)名称发布人类可读的图表。在每个部分中，每种语言或地区都有一个部分，由标准化代码标识。然后每个部分的行给出一个本地化名称，以及使用该本地化名称来指代语言或地区的语言的代码。

底层 CLDR 数据采用 XML 格式。您查找的语言和地区名称位于目录[repos/cldr/trunk/common/main/](http://unicode.org/repos/cldr/trunk/common/main/)中，每种语言都有一个 XML 文件，其中包含本地化为该语言的各种语言和地区的名称。例如，该文件[`es.xml`](http://unicode.org/repos/cldr/trunk/common/main/es.xml)具有语言（“español”、“inglés”）和国家（“España”）的西班牙语名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:09:49.833

对于国家名称，您可以使用[geonames](http://www.geonames.org/AM/other-names-for-armenia.html)，例如这里是西南欧国家的备用名称[列表](http://www.geonames.org/ES/other-names-for-spain.html)。Geonames 有一个[API 和数据转储](http://www.geonames.org/export/)，您可以在程序中使用它们。

对于语言名称，[此列表](http://www.verbix.com/languagenames/de.html)可能很有用

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-13T22:24:47.860

[HERE](http://www.odditysoftware.com/download/download.php?filename=countries-list.zip)是一个多种格式的数据库。祝你好运，用当地俚语学习所有这些语言。

# twitter - 将推文拉入 Corona SDK 中的 tableview

> ID：14163686
> 
> 赞同：0
> 
> 时间：2013-01-04T19:34:37.783
> 
> 标签：twitter, lua, tableview, coronasdk

我有兴趣构建一个表格视图以从 Twitter 个人资料中提取推文。使用 Corona SDK，到目前为止我发现的唯一 twitter 选项是 webview，但我们希望在 tableview 中显示推文。有没有办法做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T02:28:52.603

不幸的是，Corona SDK 的大多数 Twitter 示例都是发送推文，而不是构建可以读取推文的客户端。Corona SDK 可以很好地与 Twitter 等 RESTful 服务配合使用，在示例代码中，有一个 twitter 应用程序可以发送一条推文，其中包含所有必要的 oAUTH 代码，以允许您连接到 Twitter 并执行操作。获取该示例程序并对其进行更改以获取推文列表并不难。

将这些数据返回到 Corona SDK 应用程序后，您可以使用 widget.newTableVew() API 调用来构建可滚动的推文列表。

但我目前不知道有一个例子可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-08T22:37:04.067

实际上，我最近找到了解决此问题的方法。它可能并不优雅，但它确实有效。我首先用我想要关注的推文创建了一个 RSS 提要。然后我将 RSS 数据（story.description 等）直接输入到 tableview 中。效果很好。Corona 有很多 RSS 提要阅读器的例子，所以你不应该有任何麻烦拼凑在一起。

# java - Importing list from java.awt or java.utils

> ID：14163687
> 
> 赞同：40
> 
> 时间：2013-01-04T19:34:40.683
> 
> 标签：java

I am new to java so maybe this is very trivial question.

But I just noticed that when i declared

```
List myList = new ArrayList(); 
```

Eclipse IDE gave me bunch of options for "List" error.

Mainly.. the top 2 one got me curious.

What is the difference if I use java.awt vs java.utils ??

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-01-04T19:35:46.043

`java.awt.List` is [List component](http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/List.html) (like drop down list), it not a collection/datastructure.

> What is the difference if I use java.awt vs java.utils ??

You can't use List/Collection specific methods like [iterator](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#iterator%28%29).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T19:36:38.507

awt.List is a List component used in GUI where as java.util.List is an interface for the lists data structure

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T19:36:16.560

`java.awt.List` is an awt component. Don't use it in your case. You need `java.util.List`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-07T11:57:53.203

AWT 或抽象窗口工具包是 java 中的 GUI 工具包，包含 2D 元素所需的类。awt.list 用于获取应用程序中的选择框/下拉列表。

在您的情况下使用 util.list 。

# jquery - jquery mobile手动调用页面插件

> ID：14163689
> 
> 赞同：0
> 
> 时间：2013-01-04T19:34:45.983
> 
> 标签：jquery, css, jquery-mobile, responsive-design

我需要知道如何做到这一点。

现在，当我不在手机（手持）设备上时，它正在将页面加载到同一页面中。因此，我需要测试一些条件，就像媒体查询一样。例如：测试某个元素是否隐藏，然后才调用插件

我不知道这是否会比页面重定向更好，但我必须看看？

**我怎样才能做到这一点？**

jquery mobile 仅用于小屏幕使用（手持设备）。媒体查询工作正常。我设置它的方式是它隐藏页面上的所有内容并仅显示移动部分。

```
@media screen and (max-width: 555px),
screen and (max-device-width: 480px)
{ 
#wrap,#footer,#masker{display:none;}
#p-mobi{ display:block;}
} 
```

和

```
<div data-role="page" id="p-mobi">

</div> 
```

谢谢，理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:51:46.233

可用的选项很少。

根据您的需要，这应该是最好的一个：

1.  [https://github.com/borismus/device.js](https://github.com/borismus/device.js)

    这完全是客户端检测，无需自定义 js 脚本，只需使用此自定义链接标签并将其匹配到所需的设备大小即可。

    例如：

    ```
    <link rel="alternate" href="http://foo.com" id="desktop" media="only screen and (touch-enabled: 0)">
    <link rel="alternate" href="http://m.foo.com" id="phone" media="only screen and (max-device-width: 640px)">
    <link rel="alternate" href="http://tablet.foo.com" id="tablet" media="only screen and (min-device-width: 641px)"> 
    ```

    更多可以在这里找到：[https ://github.com/borismus/device.js](https://github.com/borismus/device.js)

2.  或者使用[这个](http://detectmobilebrowsers.com/)脚本来检测浏览器类型，然后使用这个 js 加载器来决定应该使用哪个 js 文件。

    例子：

    ```
    yepnope({
        test : Modernizr.geolocation,
        yep  : 'normal.js',
        nope : ['polyfill.js', 'wrapper.js']
    }); 
    ```

    还有一件事 yephope.js 与 jQuery 不兼容，因此您需要做一些[修复](http://scott.donnel.ly/yepnope-jquery-document-ready/)。

我的建议，坚持选项 1。

# python - 匹配两个包含字符串的列表

> ID：14163691
> 
> 赞同：2
> 
> 时间：2013-01-04T19:35:04.937
> 
> 标签：python, list, match

我是 Python 的初学者，在匹配两个包含字符串的列表时遇到了问题，

我使用正则表达式从 txt Metafile 中提取了 Landsat 图像的波段名称，并有一个这样的列表；

```
bant = ['LT5YYYYYYYYYYYYYXXX02_B1.TIF', 'LT5YYYYYYYYYYYYYXXX02_B2.TIF','LT5YYYYYYYYYYYYYXXX02_B3.TIF', 'LT5YYYYYYYYYYYYYXXX02_B4.TIF', 'LT5YYYYYYYYYYYYYXXX02_B5.TIF', 'LT5YYYYYYYYYYYYYXXX02_B6.TIF', 'LT5YYYYYYYYYYYYYXXX02_B7.TIF'] 
```

“YYYYYYYYYYYYYY”是随场景变化的乐队特定名称。我将每个字符串分配给一个变量，然后分配给一个新列表。

```
 bant1 = bant[0]
        bant2 = bant[1]
               .
               .
        bant7 = bant[6]
        bant = [bant1,bant2,bant3,bant4,bant5,bant6,bant7] 
```

此外，通过使用 Python os 模块，我提取了与 txt Metafile 位于同一目录中的 GeoTIFF 文件的名称，如下所示；

```
import os
import re
def mtl():
file=[]
path = os.getcwd()
for filelist in os.listdir(path):
    if filelist.endswith(".TIF"):
        file.append(filelist) 
```

输出：

```
file = ['LT5YYYYYYYYYYYYYXXX02_B1.TIF', 'LT5YYYYYYYYYYYYYXXX02_B2.TIF'] 
```

所以我遇到的问题是如何比较这两个列表，“bant”和“file”。并打印在列表中找到的波段是 bant1、bant2。文件列表中的字符串数量是可变的（可能某些文件被用户删除，因此不包含在文件列表中）。

对不起我的英语不好。感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T19:39:56.517

您在寻找[固定的交叉点](http://docs.python.org/2/tutorial/datastructures.html#sets)吗？

```
In [16]: bant = ['LT5YYYYYYYYYYYYYXXX02_B1.TIF', 'LT5YYYYYYYYYYYYYXXX02_B2.TIF','LT5YYYYYYYYYYYYYXXX02_B3.TIF', 'LT5YYYYYYYYYYYYYXXX02_B4.TIF', 'LT5YYYYYYYYYYYYYXXX02_B5.TIF', 'LT5YYYYYYYYYYYYYXXX02_B6.TIF', 'LT5YYYYYYYYYYYYYXXX02_B7.TIF']

In [17]: file = ['LT5YYYYYYYYYYYYYXXX02_B1.TIF', 'LT5YYYYYYYYYYYYYXXX02_B2.TIF']

In [18]: set(bant).intersection(file)
Out[18]: set(['LT5YYYYYYYYYYYYYXXX02_B1.TIF', 'LT5YYYYYYYYYYYYYXXX02_B2.TIF']) 
```

注意`set`s 是无序的，所以返回的结果可能与or`set(bant).intersection(file)`给出的顺序不对应。如果您需要保留 的顺序，那么您可以使用`bant``file``bant`

```
fileset = set(file)
[b for b in bant if b in fileset] 
```

* * *

此外，您的定义方法`file`可以简化为：

```
import glob
files = glob.glob('*.TIF') 
```

* * *

可以打印

> 通过使用 bant = [bant1,bant2,bant3,bant4,bant5,bant6,bant7] 列表找到（或匹配）的波段是 bant1, bant2"。

但在我们这样做之前，我可以尝试劝阻您不要命名`bant`: `bant1`、`bant2`等中的项目吗？

你说项目的数量在`bant`运行之前是未知的，那么你是如何为每个项目赋予自己的变量名的呢？这是可以做到的，但不是必须的。改用 Python 索引：`bant[0]`代替`bant1`，`bant[1]`代替`bant2`等。通过这样做，您将能够比尝试为每个项目提供编号变量名称`bant`更容易地进行编程。`bant`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T19:52:41.590

附带说明，不要命名变量`file`——它是内置类型的名称（在 Python 2.x 中），因此使用它会导致混淆。此外，拥有一个文件名列表并调用它`file`而不是`filenames`.

天真的方法是使用嵌套`for`循环：

```
print('The bands found (or matches) are', end=' ')
for band in bant:
    for filename in filenames:
        if band == filename:
            print(band + ',', end=' ')
            break
print() 
```

但是您可以使用`in`运算符来简化此操作：

```
print('The bands found (or matches) are', end=' ')
for band in bant:
    if band in filenames:
        print(band + ',', end=' ')
print() 
```

如果您使用的是 Python 2.x 而不是 3.x，则需要稍作更改：

```
print 'The bands found (or matches) are',
for band in bant:
    if band in filenames:
        print band + ',',
print 
```

如果要打印索引而不是每个匹配波段的值，可以使用`enumerate`让您同时迭代索引和波段，如下所示：

```
print('The bands found (or matches) are', end=' ')
for i, band in enumerate(bant):
    if band in filenames:
        print('bant{},'.format(i), end=' ')
print() 
```

无论如何，您可能会注意到这`,`在最后留下了额外的内容。为了解决这个问题，您需要跟踪您是否已经打印了任何波段，并`,`在除第一个之外的每个波段之前打印一个。那会很快变得丑陋。

为了解决这个问题，您通常希望建立一个匹配集合，然后您可以使用`join`. 像这样：

```
matches = []
for i, band in enumerate(bant):
    if band in filenames:
        matches.append('bant{}'.format(i))
print('The bands found (or matches) are', ', '.join(matches)) 
```

干净多了。但是您可以通过使用列表推导来使这更简单：

```
matches = ['bant{}'.format(i) for i, band in enumerate(bant) if band in filenames] 
print('The bands found (or matches) are', ', '.join(matches)) 
```

如果您阅读了理解和等效列表，您应该能够看到它们是如何做同样的事情的，但无需显式创建列表并`append`一遍又一遍地调用它。

现在，如果您考虑一下，您可能会注意到您正在对整个列表进行`filenames`一次线性搜索`band`。当只有 8 个波段和 6 个文件名时，这并不重要，因为最坏的情况是 48 个比较，但如果每个都有 1000 个呢？1000000 次比较将花费更长的时间。

如果你`filenames`变成 a `set`，每个`band in filenames`只进行 1 次比较，而不是 N 次比较，所以如果每个有 1000 次，你将只进行 1000 次比较而不是 1000000 次。所以：

```
filenameset = set(filename)
matches = ['bant{}.format(i) for i, band in enumerate(bant) if band in filenameset]
print('The bands found (or matches) are', ', '.join(matches)) 
```

您可以进行进一步的改进，但只要您了解为什么会这样，您就完成了。

# ruby-on-rails - rspec steak acceptance test with i18n html keys

> ID：14163698
> 
> 赞同：2
> 
> 时间：2013-01-04T19:35:25.220
> 
> 标签：ruby-on-rails

How I could test I18n html keys with the rspec steak gem?

```
feature 'about page - not signed in user' do

   background do
     visit '/about'
   end

  scenario 'visit about page' do
   page.should have_content(I18n.t("pages.about.headline_html"))
   page.should have_content(I18n.t("pages.about.body_html"))
  end

end 
```

I always get following:

```
..FF

Failures:

 1) about page - not signed in user visit about page
 Failure/Error: page.should have_content(I18n.t("pages.about.headline_html"))
   expected there to be content "<h1>About</h1>" in "About" 
```

Anybody an idea?

I already tried:

```
page.should have_content(I18n.t("pages.about.headline_html").html_safe) 
```

EDIT: If I include

```
include ActionView::Helpers::SanitizeHelper 
```

into my feature and I do like that:

```
headline = strip_tags(I18n.t("pages.about.headline_html"))
body = strip_tags(I18n.t("pages.about.body_html"))
page.should have_content(headline)
page.should have_content(body) 
```

everything works.

What do you think about this solution? Seems to be a bit hacky I think..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-05T13:56:56.547

我认为这应该适合你： page.html.should include(I18n.t("pages.about.headline_html"))

类似的问题在这里：[Capybara: should have html content](https://stackoverflow.com/questions/15981820/capybara-should-have-html-content)

# javascript - 推送到多维数组Javascript

> ID：14163699
> 
> 赞同：1
> 
> 时间：2013-01-04T19:35:27.480
> 
> 标签：javascript, arrays, push

我有以下代码：

```
 data_array =  {
                      full_name: 'fullname',
                      items: [],
                      address_full: 'address'
                  };

        first = {
            'data-opPrice'  : '1a',
            'data-stdPrice' : '1b',
            'state'         : '1c'
        };
        second = {
            'data-opPrice'  : '2a',
            'data-stdPrice' : '2b',
            'state'         : '2c'
        };          
        data_array.items.push(first);
        data_array.items.push(second);

    alert(data_array['items'][1].data-opPrice); 
```

我希望得到警报“2a”。但什么也没有发生。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T19:38:20.763

这是因为`-`在`data-opPrice`. `-`是减法。

```
alert(data_array['items'][1]['data-opPrice']); 
```

[http://jsfiddle.net/t9c7L/1/](http://jsfiddle.net/t9c7L/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T19:37:13.053

你可能想要：

```
data_array.items[1]['data-opPrice']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T19:38:33.537

尝试

```
alert(data_array['items'][1]['data-opPrice']); 
```

因为否则它是一个操作（数据**减去**opPrice）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T19:41:48.993

用这个：

```
data_array.items[1]['data-opPrice'] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T19:48:23.917

使用命名约定，不要在属性名称上使用破折号（减号）。

所以请遵循以下规则：http: [//javascript.crockford.com/code.html](http://javascript.crockford.com/code.html)

然后编写如下代码：

```
data_array =  {
                  full_name: 'fullname',
                  items: [],
                  address_full: 'address'
              };

    first = {
        'dataOpPrice'  : '1a',
        'dataStdPrice' : '1b',
        'state'         : '1c'
    };
    second = {
        'dataOpPrice'  : '2a',
        'dataStdPrice' : '2b',
        'state'         : '2c'
    };          
    data_array.items.push(first);
    data_array.items.push(second);

alert(data_array.items[1].dataOpPrice); 
```

# sql-server - SSIS Logging to SQL Server

> ID：14163700
> 
> 赞同：7
> 
> 时间：2013-01-04T19:35:27.627
> 
> 标签：sql-server, logging, ssis

I am a novice to SSIS. I have created a package with few Sequence Containers and few Tasks within them. The package will be scheduled to run automatically and thus I want capture the run time errors and status like number of rows inserted/updated/deleted to my own logging table in the SQL database.

I was thinking of using the SSIS Logging to SQL Server feature to log the entries to the default tables and then create a SQL Task to insert them into my own logging tables. Is that a good way to do it? Or do you suggest other better ways?

Also I couldnot get the SSIS logging to work properly. I found an online blog [How to create an error log or custom error log within an SSIS Package?](https://stackoverflow.com/questions/5772667/how-to-create-an-error-log-or-custom-error-log-within-an-ssis-package) that describes the process to use SSIS logging to log entries to the SQL Server. However, unlike explained in the blog,

I cannot see either the `dbo.sysssislog` or `dbo.sp_ssis_addlogentry` tables created in my SQL Server database. What must I be doing wrong? Here are the steps I followed -

1.  Went to SSIS Logging
2.  Selected Provider Type as SQL Server
3.  Added the OLEDB connection for Configuration
4.  Went to the Detail tabs on each sequence container and chose appropriate events
5.  Clicked "Save..."
6.  Provided the location and name for the XML file
7.  Saved the package and ran it. Still cannot see those ssis table or procedure in the database. I am using SQL 2008R2.

Any suggestions and recommendations greatly appreciated.

Thanks in advance.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-04T20:15:21.933

查看列表中的**#3**。记下该数据库的位置。

在 SSMS 中导航到该数据库。展开数据库（单击左侧的加号）。

对于表位置：

展开**表**文件夹。展开**系统表**文件夹。该表应该在那里可见。它的名字是`dbo.sysssislog`。

对于程序位置：

展开**可编程性**文件夹。展开**系统存储过程**文件夹。存储过程应该是可见的。它的名字是`dbo.sp_ssis_addlogentry`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-31T17:31:32.340

回覆。用户数据库中 sysssislog sys 表的可见性（在系统表文件夹内）。我已经使用“将事件的日志条目写入 SQL Server 数据库”设置了 SSIS 包（2008 R2）的日志记录，并指定了用户 DB。之后我运行了 SSIS 包。我在系统表文件夹中找到了 sysssislog（它包含预期的数据）。之后我决定测试这个表是“在每次运行 SSIS 包时创建的”。我删除了这张桌子。我再次运行 SSIS 包。表 sysssislog 确实是创建的（在用户表中），并且包含正确的数据，好的。

但是，从那以后我在 SSMS 的系统表中就看不到它了。换句话说，该表存在（例如存在于 sysobjects、systables 等中），但未显示在 SSMS 对象对象资源管理器的列表中。我知道这不是 SSIS 错误（SSIS 确实在每次运行时重新创建此表），但它是 SSMS 错误（它以某种方式丢失了此表的元数据）。

我多次删除此表并再次运行 SSIS 包，它确实是重新创建的，并且每次都重新填充上次运行的 SSIS 包中的数据。

但我从来没有能够在对象浏览器中看到它（当然我已经在任何级别刷新它，关闭/重新打开 SSMS - 由于任何原因，这个表从未出现过）。我能够在 MSDB 数据库中看到这个系统表（但它是空的）。

我重复为不同的数据库创建日志记录（为不同的数据库创建新连接）。SSIS 运行，创建了 sysssislog 表并且可以在系统表中看到（但是，再一次，如果我将删除此表，则在对象浏览器中重新创建时将不会再看到它）。

只是想分享，有趣的错误。MS QA 从未对此进行测试（在此表创建的第二个和后续实例中，来自 SSIS 的 SSMS 中表创建通知）。

阿列克谢

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-07T21:44:53.300

对于日志记录，我通常通过变量获取我想要的信息，然后在流程结束时，我执行了一个存储过程，它将记录插入到“ProjectLog”表中。不确定它是否理想，但它对我们有用。

原因：*错误消息可以自定义，因此可能更容易阅读和排除故障。*我们有带有自定义、易于理解的错误消息的“OnError”任务（例如，“流程未执行。文件 x 缺少 x 列/字段所需的数据”。*可以添加对您的组有价值的数据以满足业务需求.

*请注意，这是我们执行的附加步骤，除了带有每天覆盖的错误日志记录的文本文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-13T10:12:03.133

即使您已启用 SSIS 日志记录，并且如果您尝试执行任务（不执行实际包），则不会在 msdb 或提到的连接管理器中创建 sysssislog 表。

# php - PHP/MySQL nearest neighbor - long binary sequence

> ID：14163701
> 
> 赞同：0
> 
> 时间：2013-01-04T19:35:29.500
> 
> 标签：php, mysql, arrays, binary

Given an array of a series of long numbers (equal length) - 0101101111, 0111101111, 0101101101, etc.

Find closest match to 0101101001

OK, that's the short version. The long version is a form with 11 Yes(1) and No(0) questions (product finder). Since we know that the database may not contain an exact match to the n^r solutions = 2048, we need to find the closest match or, possibly, the closest two or three matches.

I'm guessing we need to compare each number in each position and rank the result, but I'm stuck on the solution - if I am even going about it in the right direction.

Thanks!!

***I did a quick check against popnoodle answer below***... using **$lookslike=11100110011;** running foreach, generated sql and ran in phpMyAdmin against a table of 6 "answers".

Answers were ranked as follows:

Answer -- rank

11100110011 -- 11
11100110010 -- 10
11100110000 -- 9
00000111010 -- 6
00000111111 -- 6
01101100110 -- 6

*edit for ranking explanation - 11 of 11 matches, 10 of 11 matches, 9 of 11 matches, 6 of 11 matches...

Very nice.

Added modified PHP manual example of multiple choice answers:

```
<?php
// Client Answers
$input = 'abcdbcdabcd';

// array of answers to check against
$answers  = array('abcdbddabcd', 'abcbbcdabcd', 'abcdbcccccd');

// no shortest distance found, yet
$shortest = -1;

// loop through words to find the closest
foreach ($answers as $answer) {

    // calculate the distance between the input word,
    // and the current word
    $lev = levenshtein($input, $answer);

    // check for an exact match
    if ($lev == 0) {

        // closest word is this one (exact match)
        $closest = $answer;
        $shortest = 0;

        // break out of the loop; we've found an exact match
        break;
    }

    // if this distance is less than the next found shortest
    // distance, OR if a next shortest word has not yet been found
    if ($lev <= $shortest || $shortest < 0) {
        // set the closest match, and shortest distance
        $closest  = $answer;
        $shortest = $lev;
    }
}

echo "Input answer: $input\n" . "<br />";
if ($shortest == 0) {
    echo "Exact match found: $closest\n" . "<br />";
} else {
    echo "Possible Alternative: $closest?\n" . "<br />";
    echo "Levenshtein Distance: $lev\n";
}

?> 
```

Returns:

Input answer: abcdbcdabcd
Possible Alternative: abcbbcdabcd?
Levenshtein Distance: 3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:57:54.743

我对 SQL 了解不多，所以这可能不是最巧妙的方法，但到目前为止还没有其他人做出贡献。

比较每个位置的每个字符并对结果进行排名。

rank = 给定比较字符串“0101101001”中与每行答案字符串中相同的字符数，所以（注意，您在问题中说的是 11，但给出了 10 个数字作为示例）

```
0101101001 against 0101101001 gives a rank of 10 
0101101001 against 1101101001 gives a rank of 9
0101101001 against 1111111001 gives a rank of 7
0101101001 against 0001100111 gives a rank of 6 
```

作为 SQL

```
SELECT answers,
    ( #looking for 0101101001
    IF (substring(answers,1,1)=0, 1, 0) 
    + IF (substring(answers,2,1)=1, 1, 0)
    + IF (substring(answers,3,1)=0, 1, 0)
    + IF (substring(answers,4,1)=1, 1, 0)
    + IF (substring(answers,5,1)=1, 1, 0)
    + IF (substring(answers,6,1)=0, 1, 0)
    + IF (substring(answers,7,1)=1, 1, 0)
    + IF (substring(answers,8,1)=0, 1, 0)
    + IF (substring(answers,9,1)=0, 1, 0)
    + IF (substring(answers,10,1)=1, 1, 0)
    ) 
AS rank
FROM yesno 
ORDER BY 
    ( #looking for 0101101001
    IF (substring(answers,1,1)=0, 1, 0) 
    + IF (substring(answers,2,1)=1, 1, 0)
    + IF (substring(answers,3,1)=0, 1, 0)
    + IF (substring(answers,4,1)=1, 1, 0)
    + IF (substring(answers,5,1)=1, 1, 0)
    + IF (substring(answers,6,1)=0, 1, 0)
    + IF (substring(answers,7,1)=1, 1, 0)
    + IF (substring(answers,8,1)=0, 1, 0)
    + IF (substring(answers,9,1)=0, 1, 0)
    + IF (substring(answers,10,1)=1, 1, 0)
    ) 
DESC 
```

作为 PHP

```
function getAnswers($lookslike)
{
    /* expects "binary" string
    returns the answers and rank (0 to string length) ordered by closest match first 
    */  

    foreach (str_split($lookslike) as $i=>$bit){
        $ifs[]='IF (substring(answers,' . ($i+1) . ',1)=' . $bit . ', 1, 0) ';
    }

    // use your db class
    return $db->select_many('
        SELECT answers,
            ( '. implode(' + ', $ifs) .' ) 
        AS rank
        FROM yesno 
        ORDER BY 
            ( '. implode(' + ', $ifs) .' ) 
        DESC
    ');
} 
```

**没有检查我的代码**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T02:18:26.463

Sounds like what you are looking for is called the [Levenshtein distance](http://en.wikipedia.org/wiki/Levenshtein_distance).

It's fairly straightforward and not difficult to implement in whichever language you'd like.

[Here is how to implement the function in MySQL](http://www.artfulsoftware.com/infotree/queries.php#552)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T02:46:28.867

如果您将信息作为位掩码存储在整数字段中，我认为您可以通过一些位操作获得相同的结果：

```
SELECT value 
FROM TABLE
ORDER BY BIT_COUNT(~(value ^ test)) DESC 
```

test 是您要测试的值。

一个例子是 test 是 11001 并且 value 是 10101：

*   11001 异或 10101 = 01101
*   二进制反转 (~) = 10010
*   计算 1 的位数 ( `BIT_COUNT`) = 2
*   并反转排序

实际上，我认为您可以将其缩短为：

```
SELECT value 
FROM TABLE
ORDER BY BIT_COUNT(value ^ test) 
```

这本质上是在计算不同的位，因此升序排序应该返回您需要的内容。

# database - adding rows to a DataTable

> ID：14163703
> 
> 赞同：0
> 
> 时间：2013-01-04T19:35:37.720
> 
> 标签：database, ms-access

I am trying to insert records into an Access table from a SQL database. When I step through, I add 5 rows but when I am done, the rows aren't in the table. I know I am missing something easy, but I sure can't figure it out.

```
OdbcConnection ocn = new OdbcConnection
("Driver={Microsoft Access Driver (*.mdb)};Dbq=C:\\my.mdb;Uid=Admin;Pwd=;");
ocn.Open();
OdbcDataAdapter adapter = new OdbcDataAdapter
    (@"SELECT * FROM FROM Nodes Order by Node ASC", ocn);

da.InsertCommand = new OdbcCommand(@"INSERT INTO NODES(Node,Descriptor,NDisabled,GroupNum,LocalAddress
                            TurnOffPolling,CommOffSig,MaintSig,CollectAuditSig,SkipHistory,KeepAwake,DialUp,KeepAwakeDate,ModelNumber)
                            VALUES(@Node,@Descriptor,@NDisabled,@Groupnum,@LocalAddress,
                            @TurnOffPolling,@CommOffSig,@maintSig,@CollectAuditSig,@SkipHistory,@KeepAwake,@DialUp,@KeepAwakeDate,@ModelNumber)", ocn);
                        da.InsertCommand.Parameters.Add("@Node", OdbcType.VarChar);
                        da.InsertCommand.Parameters.Add("@Description", OdbcType.VarChar);
                        da.InsertCommand.Parameters.Add("@NDisabled", OdbcType.Bit);
                        da.InsertCommand.Parameters.Add("@GroupNum", OdbcType.Int);
                        da.InsertCommand.Parameters.Add("@LocalAddress", OdbcType.Int);
                        da.InsertCommand.Parameters.Add("@TurnOffPolling", OdbcType.Bit);
                        da.InsertCommand.Parameters.Add("@CommOffSig", OdbcType.VarChar);
                        da.InsertCommand.Parameters.Add("@MaintSig", OdbcType.VarChar);
                        da.InsertCommand.Parameters.Add("@CollectAuditSig", OdbcType.VarChar);
                        da.InsertCommand.Parameters.Add("@SkipHistory",OdbcType.Bit);
                        da.InsertCommand.Parameters.Add("@KeepAwake",OdbcType.Bit);
                        da.InsertCommand.Parameters.Add("@DialUp",OdbcType.Bit);
                        da.InsertCommand.Parameters.Add("@KeepAwakeDate",OdbcType.VarChar);
                        da.InsertCommand.Parameters.Add("@ModelNumber",OdbcType.Int);

DataTable tbl = new System.Data.DataTable();
adapter.Fill(tbl);
while(SqlDataReader.Read())
{
    DataRow nrow = tbl.NewRow();
        nrow["Node"] = rdr["Node"];
    tbl.Rows.Add(nrow); //I see the tbl.Rows.Count increase by one here
}
tbl.AcceptChanges();
adapter.Update(tbl);

ocn.Close(); 
```

When I open the table, the records aren't in the table. Can somebody tell me what I'm doing wrong here please?

Thanks in advance, Bob

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:38:26.107

改变：

```
tbl.AcceptChanges();
adapter.Update(tbl); 
```

至

```
adapter.Update(tbl);
tbl.AcceptChanges(); 
```

而且我看不到您在哪里为您提供`OdbcDataAdapter`（`InsertCommand`或`UpdateCommand`or `DeleteCommand`）来执行数据库表的适当更新。

# asp.net - 如何让房间可用？

> ID：14163711
> 
> 赞同：-2
> 
> 时间：2013-01-04T19:36:34.473
> 
> 标签：asp.net

我正在一个提供酒店预订服务和旅游信息的网站上工作。问题是如何在预订期到期后提供房间......这实际上是一个网站，我正在用 ASP.NET 编写它，背后的代码是 C#.NET。使用的后端是 SQL Server 2005。我只是想问一下，在预订房间的客户退房后，有什么逻辑可以让房间可用。我的意思是，这个房间现在可供任何其他客户使用。假设，我在 2013 年 1 月 1 日预订了房间 A 三天。在这些日子里，如果任何其他客户想要预订这个房间，它应该被锁定，并且应该提示客户预订另一个房间。因此，简而言之，房间应该在客户退房当天可用，也应该可供其他客户使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:55:42.693

为 tblRoom 创建一个属性，例如具有布尔数据类型的 IsAvailable。

然后在客户类中为您的客户创建一个方法：

```
void Customer::leave()
{
   //set tblRoom.IsAvailable = true;
} 
```

注意：当客户保留它时，您应该使用类似的东西：

```
void Customer::AcquireRoom(ref Customer c)
{
   Room room= new Room();
   room.IsAvailable =false;
   c.room =room;

} 
```

使用应该创建您的表和您的程序类，如下所示： ![在此处输入图像描述](../Images/132ed42cef00433eb1b06171423173fb.png)

# php - 客户提交表单后如何将mysql数据发送到电子邮件？

> ID：14163716
> 
> 赞同：-2
> 
> 时间：2013-01-04T19:36:48.280
> 
> 标签：php, mysql, database, email

客户填写表格后，表格数据将被发送到 mysql，并且将向我发送一封电子邮件，其中仅包含客户提交的最后一个表格数据。一切正常，但唯一**的问题是电子邮件中的“mysql 数据”不是内联文本**。那么，如何做到这一点呢？我在做PHP。我只有两周的 PHP 经验。示例代码如下。请帮忙。

```
<?php

define('DB_NAME', 'sandi565_form11');
define('DB_USER', '********');
define('DB_PASSWORD', '********');
define('DB_HOST', 'localhost');

$link = mysql_connect (DB_HOST, DB_USER, DB_PASSWORD);

if (!$link) {
    die('Could not connect: ' . mysql_error());
}

$db_selected = mysql_select_db(DB_NAME, $link);

if (!$db_selected) {
    die('Can\'t use ' . DB_NAME . ': ' . mysql_error());
}

//Start Posting the data in Mysql database from Form Input

$value = $_POST['input1'];
$value2 = $_POST['MAmount'];

$sql = "INSERT INTO demo (input1, MAmount) VALUES ('$value', '$value2')";

if (!mysql_query($sql)) {
    die('Error: ' . mysql_error());

}

//start print the database on form processing page

$data = mysql_query("SELECT * FROM demo ORDER BY ID DESC LIMIT 1")
 or die(mysql_error()); 
 Print "<table border cellpadding=3>"; 
 while($info = mysql_fetch_array( $data )) 
 { 
 Print "<tr>"; 
 Print "<th>ID:</th> <td>".$info['ID'] . "</td> "; 
 Print "<th>Input1:</th> <td>".$info['input1'] . "</td> "; 
 Print "<th>MAmount:</th> <td>".$info['MAmount'] . " </td></tr>"; 
 } 
 Print "</table>"; 

mysql_close();

//end print the database on form processing page

//start emailing the data

date_default_timezone_set('Asia/Kolkata');

require_once('class.phpmailer.php');
//include("class.smtp.php"); // optional, gets called from within class.phpmailer.php if not already loaded

$mail             = new PHPMailer();

//$body             = preg_replace("[\]",'',$body);

$mail->IsSMTP(); // telling the class to use SMTP
$mail->Host       = "ssl://stevie.********.org"; // SMTP server
$mail->SMTPDebug  = 1;                     // enables SMTP debug information (for testing)
                                           // 1 = errors and messages
                                           // 2 = messages only
$mail->SMTPAuth   = true;                  // enable SMTP authentication
$mail->SMTPSecure = "ssl";                 // sets the prefix to the servier
$mail->Host       = "stevie.********.org";      // sets GMAIL as the SMTP server
$mail->Port       = 465;                   // set the SMTP port for the GMAIL server
$mail->Username   = "contact@********.com";  // GMAIL username
$mail->Password   = "********";            // GMAIL password

$mail->SetFrom('contact@********.com', 'HAL');

//$mail->AddReplyTo("user2@gmail.com', 'First Last");

$mail->Subject    = "Halmira 469";
//$body             = "gdssdh";

//THE PROBLEM IS HERE WHEN I WANT TO SEND THE DATA AS BODY TO EMAIL FROM MYSQL IT IS NOT WORKING. SHOWING ERROR MESSAGE BODY EMPTY.

$Body = "Print the data"; @MYSQL_CONNECT("localhost","********","********");
@mysql_select_db("sandi565_form11");
$query["SELECT * FROM demo ORDER BY ID DESC LIMIT 1"];
$result = @MYSQL_QUERY($query);

//$mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test

$mail->MsgHTML($body);

$address = "********@gmail.com";
$mail->AddAddress($address, "user2");

//$mail->AddAttachment("images/phpmailer.gif");      // attachment
//$mail->AddAttachment("images/phpmailer_mini.gif"); // attachment

if(!$mail->Send()) {
  echo "Mailer Error: " . $mail->ErrorInfo;
} else {
  echo "Message sent!";
}
//end email the data

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:39:22.390

哇，它甚至应该工作吗？

```
$Body = "Print the data"; @MYSQL_CONNECT("localhost","********","********");
@mysql_select_db("sandi565_form11");
$query["SELECT * FROM demo ORDER BY ID DESC LIMIT 1"];
$result = @MYSQL_QUERY($query); 
```

错误的函数名称（大写字母），然后查询未正确分配给字符串

尝试

```
$Body = "Print the data"; mysql_connect("localhost","********","********");
@mysql_select_db("sandi565_form11");
$query="SELECT * FROM demo ORDER BY ID DESC LIMIT 1";
$result = mysql_query($query); 
```

# if-statement - 可移动类型 MTEntryAsset Else 语句不起作用

> ID：14163719
> 
> 赞同：2
> 
> 时间：2013-01-04T19:37:07.980
> 
> 标签：if-statement, movabletype, mt

我正在尝试获取我的可移动类型博客的条目摘要，以在图像上显示标题以某种方式格式化的图像（如果将用于此目的，则标记图像），并以另一种方式显示标题，如果没有图像。但是，我无法让 else 语句正常与 MTEntryAsset 一起使用。如果没有使用“图像”类型标记为“主页”的 EntryAssets，它什么也不做。

```
<mt:entryassets tag="homepage" type="image" limit="1"> 
     <div class="image_entrie_header"><img src="<mt:assetthumbnailurl>"></div>
     <h3 class="blog_entry_headingimg"><a href="<mtentrypermalink>"><mt:entryTitle></a></h3>
<mt:else>
     <h3 class="blog_entry_heading"><a href="<mtentrypermalink>"><mt:entryTitle></a></h3>
</mt:entryassets> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T01:03:45.207

我不相信 EntryAssets 标签支持`<mt:Else>`，但你可以通过一点 Movable Type 逻辑来实现这一点。

使用一些简单的标签，您将能够执行以下操作：

```
<mt:If tag="EntryCategory">
  <p>Filed under <$mt:EntryCategory$></p>
<mt:Else>
  <p>Uncategorized</p>
</mt:If> 
```

但是由于您的块标签 EntryAssets 是一个复杂的标签，带有多个[模板标签修饰符](http://www.movabletype.org/documentation/appendices/modifiers/)，其中一个也称为`tag`，这将不起作用。我们可以使用这样的 Movable Type[变量](http://www.movabletype.org/documentation/appendices/tags/var.html)来伪造它：

```
<$mt:Var name="asset_found" value="0"$>
<mt:EntryAssets tag="homepage" type="image" limit="1">
  <$mt:Var name="asset_found" value="1"$>
  Your code here
</mt:EntryAssets>
<mt:Unless name="asset_found">
  Show this if none found
</mt:Unless> 
```

`asset_found`注意我们设置变量的第一行`0`并不是 Movable Type 严格要求的，但是如果你在同一个模板的多个地方使用这个块，最好重置变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T14:10:04.020

查理的解决方案很好；但让我提出一个替代方案：[Extra Tags 插件](https://github.com/endevver/mt-plugin-extratags)有一个名为 EntryHasAssets 的标签。与 Charlie 的解决方案相比，此标签的好处是模板更精简，也许更易于阅读。

```
<mt:EntryHasAssets>
    <mt:entryassets tag="homepage" type="image" limit="1"> 
        <div class="image_entrie_header"><img src="<mt:assetthumbnailurl>"></div>
       <h3 class="blog_entry_headingimg"><a href="<mtentrypermalink>"><mt:entryTitle></a></h3>
    </mt:entryassets>
<mt:Else>
    <h3 class="blog_entry_heading"><a href="<mtentrypermalink>"><mt:entryTitle></a></h3>
</mt:EntryHasAssets> 
```

我没有做过任何性能测试：我不知道 Charlie 的原生解决方案是比这个插件的标签快还是慢。添加插件确实会增加开销，但对于像 ExtraTags 这样编写良好的小型插件来说，开销是最小的。我可能只会使用本机解决方案，除非我还在这个插件中使用了另一个标签，只是为了保持干净。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T14:22:46.760

[mt:Else](http://www.movabletype.org/documentation/appendices/tags/else.html)与[mt:If](http://www.movabletype.org/documentation/appendices/tags/if.html)和[mt:Unless](http://www.movabletype.org/documentation/appendices/tags/unless.html)一起使用。未定义为封闭标记如 mt:Entries、mt:Comments、mt:Categories 没有结果时的条件。

Charlie 建议的解决方案是我们如何在支持 SuperAssets 系列插件的模板中编码缺少条目资产。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T20:50:57.790

您的解决方案不起作用的原因是因为您在那里使用的 mt:Else 标签不能作为“mt:entryassets”标签的否定。

查理上面概述的解决方案非常有效。

Dan 的插件与他给您的模板示例配合得非常好。您可能想知道的是，Dan 的插件更智能，可以让您做更多改进的工作。

# forms - Zend 2 验证器如何工作？

> ID：14163727
> 
> 赞同：0
> 
> 时间：2013-01-04T19:37:29.667
> 
> 标签：forms, validation, zend-framework2

我有一个表单和一个用户模型。在控制器中，我将表单验证器设置为`$user->getInputFilter()`. 这样可行。

然后我在表单中添加了一个验证码，没有任何其他代码，它似乎可以自行验证。所以我怀疑每个元素也可以有自己的验证器，无论表单的“全局”验证器如何，它都会被调用。

我正在使用[“Factory Backed Form extension”](http://framework.zend.com/manual/2.0/en/modules/zend.form.quick-start.html#factory-backed-form-extension)构建我的表单，并采用[此代码](http://framework.zend.com/manual/2.0/en/modules/zend.validator.set.html#form-elements)并像这样添加它（似乎正确，密码字段确实有`'name' => 'password'`）：

```
$this->add(array(
    'name' => 'password_confirm',
    'attributes' => array(
        'type' => 'password',
        'required' => true,
    ),
    'options' => array(
        'label' => 'Confirm Password',
    ),
    'validators' => array(
        array('identical', false, array('token' => 'password'))
    )
)); 
```

但这并不有效（总是通过）。查看其他代码示例，将输入过滤器添加到单个元素似乎确实不错。如上所述，验证码似乎可以自我验证，但为什么不这样呢？我知道我可以自己检查和使用`$form->addError($message)`，但我正在努力学习 Zend，所以我想尽可能多地利用它。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:31:47.917

创建您的自定义验证密码检查。在这里回答：http: [//zend-framework-community.634137.n4.nabble.com/Validation-identical-in-the-form-td671430.html](http://zend-framework-community.634137.n4.nabble.com/Validation-identical-in-the-form-td671430.html)

# java - 如何获取 Maven 元数据？

> ID：14163732
> 
> 赞同：1
> 
> 时间：2013-01-04T19:37:39.830
> 
> 标签：java, maven, metadata

我想为我的 pom.xml 文件中定义的所有依赖项创建一个执行摘要，在这个摘要中我必须包括我的每个依赖项的许可类型。

有什么方法可以自动获取这些信息？也许一些Maven插件？还是可以让我获得此元数据的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T19:45:05.390

执行：

```
mvn project-info-reports:dependencies 
```

将生成一个很好的报告`target/site/dependencies.html`

# python - Zope 接口继承：为什么它没有出现在 interface.providedBy() 中？

> ID：14163733
> 
> 赞同：1
> 
> 时间：2013-01-04T19:37:43.437
> 
> 标签：python, zope.interface

我希望当我使接口`IB`继承自`IA`，然后用于查询（实现）`interface.providedBy()`的实例时，我会在列表中看到和。然而，情况似乎并非如此。`B``IB``IA``IB`

```
from zope import interface

class IA(interface.Interface):
    pass

class IB(IA): # We inherit from IA
    pass

class B(object):
    interface.implements(IB)

if __name__ == '__main__':
    b = B()
    print 'Does B() provide IA? %s' % IA.providedBy(b)
    print 'providedBy(B()): %s' % list(interface.providedBy(b)) 
```

运行此代码会产生以下输出：

```
Does B() provide IA? True
providedBy(B()): [<InterfaceClass __main__.IB>] 
```

如果`B()`提供`IA`，如输出的第一行所示，为什么没有`IA`出现在输出的第二行？

更新：我通过使用以下解决方法解决了这个问题。我没有兴趣查看任何提供程序类、基类 (zope.interface.Interface) 或结果中的任何类型的重复项，所以我做了以下操作。

```
def getAllInterfaces(obj):
    all_ifaces = set()

    def buildSet(ifaces):
        for iface in ifaces:
            if iface != interface.Interface:
                all_ifaces.add(iface)
                buildSet(iface.__bases__)

    buildSet(list(interface.providedBy(obj)))
    return tuple(all_ifaces) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T01:15:05.827

providedBy 只返回立即提供的接口。有关如何获取所有接口的示例，请参见[https://github.com/Pylons/substanced/blob/master/substanced/util/init **.py** #L398 。](https://github.com/Pylons/substanced/blob/master/substanced/util/__init__.py#L398)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-10T10:04:42.257

获取所有提供的接口的简短形式是这样的：

```
from zope.interface.declarations import Declaration
from zope.interface import providedBy

allProvidedInterfaces = list(Declaration(providedBy(b)).flattened()) 
```

它基于@chris-mcdonough 的提示和此方法：[https ://github.com/Pylons/substanced/blob/a897f4a0518c51b6e093cc5af39fa326f23752c2/substanced/util/init .py# **L426**](https://github.com/Pylons/substanced/blob/a897f4a0518c51b6e093cc5af39fa326f23752c2/substanced/util/__init__.py#L426)

# asp.net - 使用另一个框架运行 ServiceStack

> ID：14163736
> 
> 赞同：1
> 
> 时间：2013-01-04T19:37:47.760
> 
> 标签：asp.net, servicestack

我有一个旧的 ASP.NET（Web 表单）网站，我想在其中添加一些由 ServiceStack 3.9.33.0 提供的 API 优点。该站点作为 IIS 中的应用程序托管，因此所有 URI 的路径都以 TheApplication 开头；例如[http://www.thedomain.com/TheApplication/HeresAPage.aspx](http://www.thedomain.com/TheApplication/HeresAPage.aspx)。

我想以[http://www.thedomain.com/TheApplication/api/widgets/](http://www.thedomain.com/TheApplication/api/widgets/) {id} 格式添加一个 RESTful api 部分。但是，我似乎无法正确路由并且总是以 404 结束。

我已经阅读了有关[与另一个框架并排运行 ServiceStack](https://github.com/ServiceStack/ServiceStack/wiki/Run-servicestack-side-by-side-with-another-web-framework)的文章，但如果我没看错的话，它只解决了 URI 的 api 部分位于根目录的情况；例如[http://www.thedomain.com/api/widgets/](http://www.thedomain.com/api/widgets/) {id}。由于各种原因，我需要将 api 部分保留在 TheApplication 下。

我需要在我的 web.config 位置路径、httpHandler 路径、AppHost.Configure 方法和/或 Route 属性中包含什么才能实现这一点？

# objective-c - 在 iOS6 中将 MKAnnotation 添加到 MKMapView 时崩溃

> ID：14163738
> 
> 赞同：0
> 
> 时间：2013-01-04T19:37:52.003
> 
> 标签：objective-c, ios6, mkmapview, mkannotation

我正在尝试遍历数组中的地址，对它们进行地理编码并作为注释添加到 MKMapview。这是我遇到的崩溃：[LocationAnnotation 坐标]：无法识别的选择器发送到实例 0x205ce5c0 这是我的代码：

```
#import <UIKit/UIKit.h>
#import "MapKit/MapKit.h"
#import <CoreLocation/CoreLocation.h>

@interface LocationAnnotation : NSObject<MKAnnotation>
{
    CLLocationCoordinate2D  coordinate;
    NSString    *mTitle;
    NSString    *mSubTitle;
    NSInteger tag;
}
@property(nonatomic)NSInteger tag;
@end

    @interface RoadmapMerchantMapView : UIView<CLLocationManagerDelegate,MKMapViewDelegate>
    {
        MKMapView * mapView;
        CLLocationManager * currentLocation;
        CLLocationCoordinate2D fuelLocationCoordinate;
        NSString * typeSearch;
        NSArray * allStations;
        LocationAnnotation * stationAnn;
    }

    - (id)initWithFrame:(CGRect)frame withData:(NSArray *)data;
    @end

#import "RoadmapMerchantMapView.h"

@implementation LocationAnnotation

-(NSString *) title
{
    return mTitle;
}

-(NSString *) subtitle
{
    return mSubTitle;
}

-(id)initWithCoordinate:(CLLocationCoordinate2D)Mycoordinate Title:(NSString *)title subTitle:(NSString *)subTitle annIndex:(int)index{
    mTitle = title;
    mSubTitle = subTitle;
    coordinate = Mycoordinate;
    return self;
}

@end

@implementation RoadmapMerchantMapView

- (id)initWithFrame:(CGRect)frame withData:(NSArray *)data
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code

    }

    [self layoutLocation:data];
    return self;
}

-(void)zoomToUserLocation:(CLLocationCoordinate2D)userLocation
{
    MKCoordinateRegion region;

    region.center = userLocation;
    region.span = MKCoordinateSpanMake(3.0, 3.0);
    region = [mapView regionThatFits:region];
    [mapView setRegion:region animated:YES];
}

-(void)drawMap {
    mapView = [[MKMapView alloc]initWithFrame:self.bounds];
    mapView.mapType = MKMapTypeStandard;
    mapView.delegate = self;
    [self addSubview:mapView];
}

-(void)layoutLocation:(NSArray*)items
{    
     [self drawMap];

    allStations = [[NSArray alloc]initWithArray:items];
    if ([allStations count]>0) {
        for (int i=0; i<1; i++) {
            NSDictionary * itemNo = [items objectAtIndex:i];

            NSString * fullAddress = [NSString stringWithFormat:@"%@,%@,%@,%@",[itemNo objectForKey:@"address"],[itemNo objectForKey:@"city"],[itemNo objectForKey:@"state"],[itemNo objectForKey:@"zip"]];

            CLGeocoder * geoCoder = [[CLGeocoder alloc]init];
            [geoCoder geocodeAddressString:fullAddress completionHandler:^(NSArray *placemarks, NSError *error) {

                if (error) {
                    NSLog(@"Geocode failed with error: %@", error);
                    return;
                }

                if(placemarks && placemarks.count > 0)
                {
                    CLPlacemark *placemark = placemarks[0];
                    CLLocation *location = placemark.location;
                    CLLocationCoordinate2D coords = location.coordinate;
                    NSLog(@"Latitude = %f, Longitude = %f",
                          coords.latitude, coords.longitude);
                    NSString * name = [itemNo objectForKey:@"name"];
                    stationAnn = [[LocationAnnotation alloc]initWithCoordinate:coords Title:name subTitle:@"Offer" annIndex:i];
                    //stationAnn.tag = i;
                    [mapView addAnnotation:stationAnn];

                }
            }];
        }

    }
    else {

        UIAlertView * av = [[UIAlertView alloc]initWithTitle:@"Not Found" message:@"There are no station in your area. Select state to get more results." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [av show];
        }

}

- (MKAnnotationView *)mapView:(MKMapView *)theMapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    static NSString * stationLoc = @"stationIdentifier";
    MKPinAnnotationView * customPinView = [[MKPinAnnotationView alloc]initWithAnnotation:annotation reuseIdentifier:stationLoc];
    customPinView.pinColor = MKPinAnnotationColorGreen;
    customPinView.animatesDrop = YES;
    customPinView.canShowCallout = YES;

    UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    NSUInteger index = [(LocationAnnotation *)annotation tag];
    rightButton.tag = index;
    [rightButton addTarget:self
                    action:@selector(showDetails:)
          forControlEvents:UIControlEventTouchUpInside];
    customPinView.rightCalloutAccessoryView = rightButton;

    return customPinView;
}

-(void) showDetails:(id)sender {
    NSLog(@"Tag:%d",[sender tag]);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:50:19.770

您的 LocationAnnotation 类没有实现`-coordinate`方法。您已经创建了实例变量，但没有创建返回其值的方法：

```
- (CLLocationCoordinate2D)coordinate {
    return coordinate;
} 
```

# php - 如何更改个人资料网址

> ID：14163743
> 
> 赞同：-1
> 
> 时间：2013-01-04T19:38:11.240
> 
> 标签：php, .htaccess, profile

您好，我正在使用 php 并编辑我的 .htaccess 文件，我正在尝试制作它以便用户可以键入：

website.com/users/1 实际上是 website.com/profile.php?id=1

现在我找到了其他资源来帮助我完成这项工作，但每当我这样做时，它都会破坏主题，因此它只是一个具有纯黑白内容、没有背景颜色、标题等的页面。

我如何成功地做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:45:05.383

你可以在你的 htaccess 文件中尝试这样的事情：

```
RewriteEngine On
RewriteRule ^users/([0-9]+)$  profile.php?id=$1  [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T19:55:54.223

你可以试试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} /users/([^/]+)/?
RewriteRule .* http://website.com/profile.php?id=%1   [L] 
```

它将静默映射：

`http://website.com/users/anything`

至：

`http://website.com/profile.php?id=anything`

# android - 将 OrmLiteSqliteOpenHelper 与 DAO 类一起使用

> ID：14163746
> 
> 赞同：1
> 
> 时间：2013-01-04T19:38:17.403
> 
> 标签：android, sqlite, module, dao, inject

我正在使用以下库：

ormlite-android-4.28.jar ormlite-core-4.28.jar roboguice-2.0.jar guice-3.0-no_aop.jar guice-assistedinject-3.0-rc2.jar android-support-v13.jar

我所有的注射服务都运行良好，但我在以下情况下遇到问题。我创建了一个 DaoProvider 如下；

```
public class DaoProvider<T extends DatabaseEntity, ID> implements Provider<Dao<T, ID>> 
```

我的 AbstractModule 类看起来像这样；

```
bind(new TypeLiteral<Dao<CityPersist, Integer>>() {
        }).toProvider(new DaoProvider<CityPersist, Integer>(ormLiteSqliteOpenHelper.getConnectionSource(), CityPersist.class)) 
```

我的 CityDao 是这样的；

```
@ImplementedBy(CityDaoImpl.class)
public interface CityDao
    extends Dao<CityPersist, Long>
{
    ConnectionSource getConnectionSource();

    CityPersist create(JSONObject json);

    CityPersist findByCityId(String cityId);
} 
```

我遇到的问题是尝试在 AbstractModule 中创建 ConnectionSource。如果使用 roboguice 1 我可以设置以下内容；

```
public ClientServicesModule(OrmLiteSqliteOpenHelper ormLiteSqliteOpenHelper)
    {
         super();
         this.ormLiteSqliteOpenHelper = ormLiteSqliteOpenHelper;
    } 
```

通过在我的 Application 类中创建一个新的 AbstractModule 。但是，我见过任何可以让我在 roboguice 2 中创建相同内容的地方。

有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:42:35.743

找到了解决方案；

由 abstractmodules 类更新如下；

```
bind(DealsDao.class).toProvider(new DaoProvider<DealPersist, DealsDao>(OpenHelperManager.getHelper(context, DatabaseHelper.class).getConnectionSource(),Deal.class)).in(Scopes.SINGLETON); 
```

然后我的助手类看起来像这样；

```
public class DatabaseHelper
    extends OrmLiteSqliteOpenHelper
{

    private static final String LOG_TAG = "DatabaseHelper";
    private static final String DATABASE_NAME = "Data.db";
    private static final int DATABASE_VERSION = 1;
    private Dao<Deal, Integer> dealDAO = null;

    public DatabaseHelper(Context context)
    {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    /**
     * This is called when the database is first created. Usually you should call createTable statements here to create the tables that will store
     * your data.
     */
    @Override
    public void onCreate(SQLiteDatabase db, ConnectionSource connectionSource)
    {
        try
        {           
            TableUtils.createTable(connectionSource, Deal.class);
        }
        catch (SQLException ex)
        {           
            throw new RuntimeException(ex);
        }
    }

    /**
     * This is called when your application is upgraded and it has a higher version number. This allows you to adjust the various data to match the
     * new version number.
     */
    @Override
    public void onUpgrade(SQLiteDatabase db, ConnectionSource connectionSource, int oldVersion, int newVersion)
    {

    }

} 
```

现在一切正常！它结合了不同的解决方案......

# c# - c#中的数据库和程序组织

> ID：14163747
> 
> 赞同：1
> 
> 时间：2013-01-04T19:38:18.503
> 
> 标签：c#, sql, database, linq, relational

首先让我给你一些背景。

我有一些看起来像这样的数据：

*   亚军1 | 日期1 | 时间1 | 圈数1 | 时间2 | 圈数2 | ... | 时间50 | 圈数50
*   亚军1 | 日期2 | 时间1 | 圈数1 | 时间2 | 圈数2
*   亚军1 | 日期3 | 时间1 | 圈数1 | ... | 时间32 | 第 32 圈

含义：跑步者在每个日期有不同的总时间和圈数。

这是我如何创建 SQL 数据库的模型：

（对不起ASCII艺术，但这是我的第一个问题）

```
|Runner  |     |RunnerTimes   |    |Time    |
|RunnerID|-----|RunnerTimesID |----|TimeID  |
               |RunnerID      |    |Laps    |
               |TimeID        |    |Duration|
               |Date          | 
```

我的问题是我有一些在数据库之前创建的代码：

```
public class iRunner
{
    public int[] laps;
    public TimeSpan[] duration;
}
public static class RunnerFunctions
{
    public static double AverageLaps(iRunner runner)
    {
        return runner.laps.Average();
    }
} 
```

所以我可以使用以下方法获取所有跑步者数据：

```
Runner runner = dbContext.Runner.Where(item=>item.RunnerID == 1); 
```

然后我必须“转换”为类格式：

```
iRunner r = new iRunner();
r.Laps =  runner.RunnerTimes.Select(a=>a.Laps).toArray();
r.Duration = runner.RunnerTimes.Select(a=>a.Duration).toArray(); 
```

然后我实际上可以调用预先存在的方法：

```
Double average = RunnerFunctions.Average(runner); 
```

有了背景知识，下面是我的问题：

1.  这是在 SQL 中对数据建模的正确方法吗？
2.  有没有更好的方法将我的 SQL 结构“转换”为现有的类和函数？

一些额外的数据：

1.  我上面显示的结构是假的，但与我的实际结构相似
2.  我在一张表中转换了 3000 个条目，从数据库中检索所有数据需要 500 毫秒，但转换为现有的类结构需要大约 4 分钟。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:48:21.243

您的架构设计与我使用的非常接近：

```
Runner 
========
id  -- autoincrement

Run
==========
runnerId  -- fk to Runner.id
startedAt  -- timestamp
laps  -- int count
duration  -- int duration in milliseconds/seconds 
          -- (unless your RDBMS has a 'duration' type). 
```

`RunnerTimes`目前似乎没有那么有用，除非您最终向我们提供更多“真实世界”信息。
尤其是在运行次数如此多变的情况下，这是我推荐的。

就个人而言，我发现预先存在的代码有点可疑（它真的有这样的公共数据成员吗？）。另外，为什么你不能做一般的数据库端（直接，或者如果 Linq-to-SQL 支持它，那样）？检索的 500 毫秒和转换的 4 分钟听起来都长得离谱；每个跑步者有多少行？你有必要的索引吗？并且对相关框架知之甚少，但我怀疑它`runner.RunnerTimes.Select(...)`所做的工作超出了应有的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:56:29.950

如果代码首先存在，您可以考虑将代码优先方法与实体框架一起使用。

[实体框架代码优先：让我们尝试一下](http://www.codeproject.com/Articles/318010/Entity-Framework-Code-First-Let-s-Try-It)

# sql - 如何将案例条件放在我的存储过程中

> ID：14163751
> 
> 赞同：0
> 
> 时间：2013-01-04T19:38:27.943
> 
> 标签：sql, sql-server, sql-server-2008

我在存储过程中有这个查询。

在上面的查询中，我有@UpdateBy 字段，我需要检查@Updateby 字段是否为NULL 或Empty，我需要获取AddedBy 字段。我如何需要为这种情况更新我的查询？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T19:40:41.197

也许`(CASE WHEN Isnull(@UpdateBy,'') = '' THEN @AddedBy ELSE @UpdateBy END)`。

编辑：以上是总体思路。下面是它在存储过程的选择中的样子。（不要忘记做两次，因为 UNION）：

```
...
    ,Current_record.value('inserted[1]/@Status','VARCHAR(10)') AS Status
    ,(CASE
        WHEN Isnull(Current_record.value('inserted[1]/@UpdatedBy','VARCHAR(100)'),'' ) = '' THEN Current_record.value('inserted[1]/@AddedBy','VARCHAR(100)')
        ELSE Current_record.value('inserted[1]/@UpdatedBy','VARCHAR(100)')
        END
    ) as UpdatedBy,
    ,CAST(Current_record.value('inserted[1]/@BaVariableId','VARCHAR(100)') AS INT) AS VariableId
... 
```

# logging - Barnyard2 认为 snort 日志是空的

> ID：14163754
> 
> 赞同：1
> 
> 时间：2013-01-04T19:38:51.897
> 
> 标签：logging, snort, spool

我在 Amazon EC2 linux 服务器上设置了 snort，其中包含一条记录所有传入 TCP 数据包的规则。我用 mysql 安装了 barnyard 以将这些日志记录到数据库中。Snort 运行良好，当我使用纯文本登录时，`-K ascii`我可以在日志文件中看到所有 TCP 数据包。`/var/log/snort`当我以unified2格式登录时，我还可以看到所有的 snort.log.timestamp 文件。

我的问题是，当我运行 barnyard2 时，它在这些日志中找不到任何信息。我得到反馈，例如：

> 关闭的假脱机文件 /var/log/snort/snort.log.timestamp。读取 0 条记录。

我检查了日志，他们确实有数据。似乎我错过了某种配置，它阻止了谷仓读取线轴。

# ruby-on-rails - 用户模型不会保存

> ID：14163757
> 
> 赞同：0
> 
> 时间：2013-01-04T19:39:01.940
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我的控制器中有以下代码，无法弄清楚为什么用户没有被保存。当我查看数据库时，它永远不会进入操作邮件程序，并且用户尚未更新。

```
def students
 if current_user.welcomed == false 
    current_user.welcomed = true
    if current_user.save
      UserMailer.welcome(current_user).deliver
    end  
 end 
end 
```

有任何想法吗？谢谢。

**编辑：**

此外，我已经验证它确实进入`if current_user.welcomed == false`但从未进入保存条件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:17:09.413

在@nash 的建议下。替换`save`为`save!`显示该用户未通过我在最初创建该用户后编写的验证

# stack - Highcharts：获取系列堆栈

> ID：14163758
> 
> 赞同：1
> 
> 时间：2013-01-04T19:39:06.567
> 
> 标签：stack, highcharts, series

highcharts 中的堆叠列具有系列中定义的堆叠，如下所示（[http://www.highcharts.com/demo/column-stacked-and-grouped](http://www.highcharts.com/demo/column-stacked-and-grouped)）：

```
series: [{
                name: 'John',
                data: [5, 3, 4, 7, 2],
                stack: 'male'
            }, {
                name: 'Joe',
                data: [3, 4, 4, 2, 5],
                stack: 'male'
            }] 
```

但我无法弄清楚如何从系列中获取对堆栈名称的引用。有没有办法从系列对象中获取堆栈？我特别需要它作为工具提示：

```
 tooltip: {
      formatter: function() {
        return '<b>'+ this.series.stack // is undefines
                +'</b><br/>'+ this.series.name +': '+ this.y;    
        }
    }, 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T19:49:44.270

你需要`this.series.options.stack`改用。
该`series.options`对象包含在构建图表时为该系列设置的选项

```
tooltip: {
    formatter: function() {
      return '<b>'+ this.series.options.stack + '</b><br/>'+ this.series.name +': '+ this.y;    
    }
} 
```

**[访问图表/系列选项 | Highchart & Highstock @ jsFiddle](http://jsfiddle.net/jugal/v3yCR/)**

# java - onUpgrade() 未被调用 - Android

> ID：14163759
> 
> 赞同：0
> 
> 时间：2013-01-04T19:39:08.360
> 
> 标签：java, android, sqlite

我在表中添加了一个列 ( `SUM`)。我认为重写/重新创建我的表所需要做的就是创建我的变量，`DATABASE_VERSION`但这不起作用。我的`onUpgrade()`方法中需要一些东西吗？

版本变量：

```
private static final int DATABASE_VERSION = 3; 
```

构造函数：

```
public DatabaseHelper(Context context) { 
    super(context, DB_NAME, null, DATABASE_VERSION); 
} 
```

onUpgrade() 和 onCreate() 方法：

```
 public void onCreate(SQLiteDatabase db) {
    db.execSQL("CREATE TABLE " + TABLE + " ("
            + RANK + " INTEGER PRIMARY KEY AUTOINCREMENT,"
            + SCORE + " LONG,"
            + PERCENTAGE + " INTEGER,"
            + SUM + " LONG"
            + ");");
}

public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {} 
```

LogCat 输出

```
01-04 02:00:24.635: E/AndroidRuntime(6224): FATAL EXCEPTION: main
01-04 02:00:24.635: E/AndroidRuntime(6224): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.test/com.example.test.Results}: android.database.sqlite.SQLiteException: no such column: sum (code 1): , while compiling: SELECT sum FROM HighscoresList
01-04 02:00:24.635: E/AndroidRuntime(6224):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-04 02:00:24.635: E/AndroidRuntime(6224):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-04 02:00:24.635: E/AndroidRuntime(6224):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-04 02:00:24.635: E/AndroidRuntime(6224):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-04 02:00:24.635: E/AndroidRuntime(6224):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-04 02:00:24.635: E/AndroidRuntime(6224):     at android.os.Looper.loop(Looper.java:137)
01-04 02:00:24.635: E/AndroidRuntime(6224):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-04 02:00:24.635: E/AndroidRuntime(6224):     at java.lang.reflect.Method.invokeNative(Native Method)
01-04 02:00:24.635: E/AndroidRuntime(6224):     at java.lang.reflect.Method.invoke(Method.java:511)
01-04 02:00:24.635: E/AndroidRuntime(6224):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-04 02:00:24.635: E/AndroidRuntime(6224):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-04 02:00:24.635: E/AndroidRuntime(6224):     at dalvik.system.NativeStart.main(Native Method)
01-04 02:00:24.635: E/AndroidRuntime(6224): Caused by: android.database.sqlite.SQLiteException: no such column: sum (code 1): , while compiling: SELECT sum FROM HighscoresList
01-04 02:00:24.635: E/AndroidRuntime(6224):     at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
01-04 02:00:24.635: E/AndroidRuntime(6224):     at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
01-04 02:00:24.635: E/AndroidRuntime(6224):     at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
01-04 02:00:24.635: E/AndroidRuntime(6224):     at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
01-04 02:00:24.635: E/AndroidRuntime(6224):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
01-04 02:00:24.635: E/AndroidRuntime(6224):     at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:37)
01-04 02:00:24.635: E/AndroidRuntime(6224):     at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:44)
01-04 02:00:24.635: E/AndroidRuntime(6224):     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1314)
01-04 02:00:24.635: E/AndroidRuntime(6224):     at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1253)
01-04 02:00:24.635: E/AndroidRuntime(6224):     at com.example.test.DatabaseHelper.check(DatabaseHelper.java:82)
01-04 02:00:24.635: E/AndroidRuntime(6224):     at com.example.test.Results.showResults(Results.java:111)
01-04 02:00:24.635: E/AndroidRuntime(6224):     at com.example.test.Results.onCreate(Results.java:60)
01-04 02:00:24.635: E/AndroidRuntime(6224):     at android.app.Activity.performCreate(Activity.java:5104)
01-04 02:00:24.635: E/AndroidRuntime(6224):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-04 02:00:24.635: E/AndroidRuntime(6224):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-04 02:00:24.635: E/AndroidRuntime(6224):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T19:41:10.903

你的`onUpgrade()`方法是空的：

```
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {} 
```

在最基本的级别上，您需要添加代码以删除现有表并调用`onCreate()`，然后再次递增`DATABASE_VERSION`。

```
private static final int DATABASE_VERSION = 4; 
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.exec("DROP TABLE IF EXISTS " + TABLE);
    onCreate(db);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T19:41:40.427

是的，`onUpgrade`您需要实际更新表格，即添加列：

```
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    if (oldVersion < 3) {
        db.execSQL("ALTER TABLE " + TABLE + " ADD COLUMN " + SUM + " LONG");
    }
} 
```

如果需要/需要，您可能还想返回并填充每行的有效“总和”值。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-04T19:42:34.967

您需要在以下位置重新创建表`onUpgrade`：

```
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {}
    db.execSQL("DROP TABLE IF EXISTS " + TABLE);
    onCreate(db);
} 
```

或者添加列：

```
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {}
    db.execSQL("ALTER TABLE " + TABLE + " ADD COLUMN `SUM` LONG");
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-04T19:49:04.400

您需要实现 onUpgrade 方法并执行必要的表更改。

如果您需要保留现有数据（或想要采用“正确”方法），您应该执行 ALTER TABLE 语句来添加新列并可能标识默认值或使用正确值更新现有行。与“托马斯”所说的相同。

这是一个例子：

```
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
{
    Log.d(TAG, "Upgrading database from version " + oldVersion + " to version  " + newVersion);

    if (newVersion == 3)
    {
        //Moved IO configuration data into flat file, so removing servicedata table.
        db.execSQL(DB_DROP_SERVICEDATA_V3);
    }
    else if (newVersion == 2)
    {
        db.execSQL(DB_ALTER_MESSAGE_V2);
    }
    else
    {
        db.execSQL("drop table if exists " + TABLE_ACCOUNT);
        db.execSQL("drop table if exists " + TABLE_MESSAGE);
        //Old table just checking.
        db.execSQL("drop table if exists servicedata");

        onCreate(db);
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-04T19:44:09.960

是的，这就是`onUpgrade()`目的。

```
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    if (oldVersion < 3) {
        upgradeToVersion3();
    }

    // good pattern is to make these incremental updates to ensure that everyone
    // will end up with the same version no matter what version he/she has now
    if (oldVersion < 4) {
        // upgradeToVersion4()
    }

}

private void upgradeToVersion3() {
    db.execSQL("alter table " + TABLE + " add column SUM LONG");
} 
```

# knockout.js - Knockout JS Ajax 调用未填充可观察数组

> ID：14163763
> 
> 赞同：2
> 
> 时间：2013-01-04T19:39:28.287
> 
> 标签：knockout.js, knockout-2.0

下面的示例显示了一个使用 Json 填充的可观察数组，然后您可以根据“类型”将结果过滤到 2 个列表中。

在我尝试从 ajax 调用中加载完全相同的 Json 之前，这一切都很好！

奇怪的是，如果我在脚本中添加警报，它就会正常工作......

[http://jsfiddle.net/spdKE/3/](http://jsfiddle.net/spdKE/3/)

```
<h2>Brand</h2>
<ul id="list-dimensions" data-bind="foreach: filteredDimensions('BRAND')">
    <li>
        <div class="item">ID</div> <span data-bind="text: $data.id"</span>
    </li>
</ul>
<h2>Area</h2>
<ul id="list-dimensions" data-bind="foreach: filteredDimensions('AREA')">
    <li>
        <div class="item">ID</div> <span data-bind="text: $data.id"</span>
    </li>
</ul>​

function ProductDimensionsViewModel () {
        var self = this;
        self.dimensions = ko.observableArray();

        var baseUri = 'api/product_dimensions.php';

        /*$.getJSON(baseUri, function(data){
            success: self.dimensions = data;
        });*/

        $.ajax({
            type: 'GET',
            url: baseUri,
            data: {},
            context: this,
            success: function(data) {
                self.dimensions = data
            },
            dataType: 'json'
        });

        self.filteredDimensions = function(type) {
        return $.map(self.dimensions, function(dimension) {
                if (dimension.type == type) {
                    return dimension;
                }
            });
        }

    }

        ko.applyBindings(new ProductDimensionsViewModel()); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T20:20:35.600

您正在替换变量，而不是更新它：

```
...
success: function(data) {
  self.dimensions = data
},
... 
```

Observables 以这种方式更新：

```
...
success: function(data) {
  self.dimensions(data)
},
... 
```

我不会使用`filteredDimensions('AREA')`，因为一旦您的页面被渲染，它就会被调用。使用可观察对象，将值存储在变量`currentFilter`中，然后通过模板加载正确的视图。此外，如果您只有两个过滤器，更好的方法是使用两种方法：`filterByArea`和`filterByBrand`.

*编辑*：添加示例：http: [//jsfiddle.net/jjperezaguinaga/spdKE/4/](http://jsfiddle.net/jjperezaguinaga/spdKE/4/)

# asp.net-mvc-3 - 如何读取由 ajax 调用发送到 mvc 中的控制器的序列化表单的内容？

> ID：14163764
> 
> 赞同：0
> 
> 时间：2013-01-04T19:39:29.010
> 
> 标签：asp.net-mvc-3, asp.net-ajax

使用 MVC 3

我有一个保存 mvc questionare 表单的按钮。该表单将包含 50 个或更多问题以及用户答案。我决定对表单进行序列化，而不是将答案放在一个数组中发送给控制器。不确定如何阅读表格并获取问题 ID 和答案？

阿贾克斯调用：

```
$.ajax({
        url: '/Question/SaveQuestionaire',
        type: 'POST',
        cache: false,
        dataType: 'json',
        data: $("#SignupForm").serialize(), // creates an object for you 
```

看法：

```
@using COPSGMIS;
@model IEnumerable<COPSGMIS.Models.Quiz>

@{
    ViewBag.Title = "Questionaire";
}
<h2>Questionaire</h2>
  <input type="hidden" id="currentstep" name="currentstep" />
   @using (Html.BeginForm("Questionaire", "Question", FormMethod.Post, new { id = "SignupForm" }))
   {
       <div id="wizardtemplate">       
            @foreach (var step in Model)       
            {
              <fieldset class="wizard">
                <div class="page_Title"> @Html.DisplayFor(modelItem => step.Title)</div>               
                @foreach (var question in step.Results)
                {
                ... code removed ....
                <label for="question">@Html.DisplayFor(modelItem => question.NumberedQuestion)</label>  
                 @Html.Raw(Html.DisplayControl(question.QuestionID, question.Choices, question.AnswerValue,question.ControlType)) 
                 </div>                               
                 @Html.Partial("_Comment", question)
               <hr />
                }
              </fieldset>
            } 
```

呈现的 HTML：

```
<label for="question">3\. This is a sample question (2) for the questionare?</label>  
                 <div class='answer'><input type='date' id='3' name='3' value='2012-12-10' /></div> 
                 </div>                               
 ... code removed ....

 <label for="question">4\. This is a sample question (3) for the questionare?</label>  
                 <div class='answer'><input type='text' id='4' name='4' value='999' /></div> 
                 </div> 
```

模型：

```
 public class Quiz
    {
        public int ReviewID { get; set; }
        public int StepID { get; set; }
        public string Title { get; set; }
        public virtual IEnumerable<Result> Results { get; set; }
    } 
```

我需要帮助

```
[HttpPost]
        public ActionResult SaveQuestionaire(int reviewid, Serialized? form)
.... code here 
```

**更新的代码**请看这里

我的阿贾克斯电话：

```
function saveQuestioniare() {
           alert('Here');
           $.ajax({
            url: '/Question/SaveQuestionaire',
            type: 'POST',
            cache: false,
            dataType: 'json',
            data: {reviewid: 8, col:$("#SignupForm").serialize()},
                error: function (jqXHR, textStatus, errorThrown) {
                    alert(errorThrown);
                },
            success: function (json) {
                alert("hERE!");
            }
        });
    } 
```

我的控制器：

```
 [HttpPost]
        public ActionResult SaveQuestionaire(int? id, FormCollection col)
        {
            using (var db = new NexGenContext())
            {
                foreach (var key in col.AllKeys.Where(q => !q.Contains("Comment_")))
                {
                    var answer = col[key];
                    int questionId = Convert.ToInt32(key);
                    db.Database.ExecuteSqlCommand(
                            "EXEC SP_AddUpdateResponse @QuestionID, @Reviewer, @AnswerValue, @ReviewID",
                            new SqlParameter("@QuestionID", questionId),
                            new SqlParameter("@Reviewer", "TEST - CG"),
                            new SqlParameter("@AnswerValue", answer),
                            new SqlParameter("@ReviewID", id)
                        );
                }
            }
            return Json("save", JsonRequestBehavior.AllowGet);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:36:20.503

你有没有尝试过

```
$.ajax({
        url: '/Question/SaveQuestionaire',
        type: 'POST',
        cache: false,
        dataType: 'json',
        data: {model:$("#SignupForm").serialize()}, 
```

在服务器端

```
[HttpPost]
public ActionResult SaveQuestionaire(int? reviewid, IList<Quiz> model) 
```

或获取已发布表单值的老式方法`FormCollection`

```
[HttpPost]
 public ActionResult SaveQuestionaire(int? reviewid, FormCollection col) 
```

# joomla - JFactory::getUser() 给出奇怪的结果

> ID：14163765
> 
> 赞同：0
> 
> 时间：2013-01-04T19:39:35.460
> 
> 标签：joomla, joomla2.5

我正在创建一个涉及检查用户 ID 的扩展。[基本上我通过这里](http://docs.joomla.org/JFactory/getUser)`JFactory::getUser();`的示例 2运行一个潜在的用户名。我的代码是

```
$user_id=&JFactory::getUser($name);
if($user_id->id==0) {      //Line 79
  $profile_link = $name;
} else {    
  $profile_link = '<a href="'.JRoute::_('index.php?option=com_comprofiler&task=userProfile&user='.$user_id->id).'">' . $name . '</a>';
}
echo $profile_link; 
```

只是为了澄清，我刚刚选择了代码的相关部分。如您所见，如果用户名是有效用户，那么我将链接到他们的社区构建者个人资料。否则我只是回显名称（这是通过名称列表的 foreach 循环运行的）。

我遇到了 2 个问题——这似乎是意料之外的。

1.  首先，如果名称不存在。Joomla 将其作为系统消息区域中的错误发布。

    `JUser: :_load: User xxxx does not exist`

还有一个php错误（注意我在上面的代码中指出了第79行）

```
Notice: Trying to get property of non-object in MODULEROOT/tmpl/default.php on line 79 
```

1.  其次，如果用户已注销，则 Joomla 发现该名称是否有效`$user_id->id`为 0。尽管文档明确说明这应该运行`regardless of the status of the current user`

有人能看出这段代码有什么问题吗？或者知道`JFactory::getUser()`自从为 Joomla 2.5 编写该文档以来，标准是否发生了变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-05T16:20:40.197

如果您检查 JFactory 类，在 %joomlaFolder%/libraries/joomla/factory.php 方法 getUser($id = null) （第 210 行，对我来说）在里面使用 JUser，似乎问题是在获取当前会话时出现，然后，您可以直接使用[JUser](http://api.joomla.org/Joomla-Platform/User/JUser.html)方法 getInstance 而不是[JFactory::getUser](http://api.joomla.org/Joomla-Platform/JFactory.html#getUser)，您的代码将像这样更改

前：

```
$user_id=&JFactory::getUser($name); 
```

后：

```
$user_id=&JUser::getInstance($name); 
```

由于两者都返回 JUser 对象，其余代码保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T05:09:57.870

在您的场景中，您可以做的不是使用 Joomla 内置函数，而是可以进行 SQL 查询（数据库调用）来检索用户数据。

例如：

```
SELECT * FROM users WHERE name = 'xxx'; 
```

如果查询返回结果，您可以继续链接配置文件，否则您可以回显错误消息。

这也将自动解决您遇到的第二个问题。

如果您有任何问题，请告诉我。

# javascript - 我可以自定义哪个属性控制事件的开始吗？

> ID：14163766
> 
> 赞同：0
> 
> 时间：2013-01-04T19:39:38.473
> 
> 标签：javascript, jquery, jquery-plugins, fullcalendar

我正在从服务中取回这个 json 结构

```
{
  Start: <some date>,
  End: <some date>,
  Title: 'Some Title'
} 
```

fullcalendar 要求我提供小写的开头、结尾和标题，有没有办法将其配置为接受大写版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T07:11:55.420

我认为您正在寻找的是[http://arshaw.com/fullcalendar/docs/event_data/startParam/](http://arshaw.com/fullcalendar/docs/event_data/startParam/)。创建 fullcalendar 实例时，可以在事件数据中声明 startParam 和 endParam。我自己没有尝试过，但应该可以正常工作。让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:07:52.243

您将创建一个新对象，然后在其中添加每个属性。

```
var obj = {
    Start: 10,
    End: 20,
    Title: "Some Title"
};

var newObj = {};

for (var i in obj) {
    newObj[i.toLowerCase()] = obj[i];
}

console.log(newObj); // {start: 10, end: 20, title: "Some Title"} 
```

# android - 将图像加载到 Gridview

> ID：14163774
> 
> 赞同：0
> 
> 时间：2013-01-04T19:40:20.327
> 
> 标签：android

我正在尝试使用通用图像加载器将图像加载到网格视图中，但是当活动加载时我的应用程序似乎正在崩溃，我无法识别问题。我正在从数组中加载图像，然后调用图像适配器来填充它们。

所有帮助将不胜感激:)

```
public class MainActivity extends Activity {

String[] imageUrls;

DisplayImageOptions options;
protected ImageLoader imageLoader = ImageLoader.getInstance();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Bundle bundle = getIntent().getExtras();
    imageUrls = bundle.getStringArray(Extra.IMAGES);

    options = new DisplayImageOptions.Builder()
        .showStubImage(R.drawable.stub_image)
        .showImageForEmptyUri(R.drawable.image_for_empty_url)
        .cacheInMemory()
        .cacheOnDisc()
        .bitmapConfig(Bitmap.Config.RGB_565)
        .build();

    GridView gridView = (GridView) findViewById(R.id.gridview);
    gridView.setAdapter(new ImageAdapter());

}

public class ImageAdapter extends BaseAdapter {
    @Override
    public int getCount() {
        return imageUrls.length;
    }

    @Override
    public Object getItem(int position) {
        return null;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final ImageView imageView;
        if (convertView == null) {
            imageView = (ImageView) getLayoutInflater().inflate(R.layout.item_grid_image, parent, false);
        } else {
            imageView = (ImageView) convertView;
        }

        imageLoader.displayImage(imageUrls[position], imageView, options);

        return imageView;
    }
} 
```

}

日志错误：

```
01-04 14:43:40.990: E/AndroidRuntime(11510): FATAL EXCEPTION: main
01-04 14:43:40.990: E/AndroidRuntime(11510): java.lang.RuntimeException: ImageLoader must be init with configuration before using
01-04 14:43:40.990: E/AndroidRuntime(11510):    at com.nostra13.universalimageloader.core.ImageLoader.displayImage(ImageLoader.java:175)
01-04 14:43:40.990: E/AndroidRuntime(11510):    at com.nostra13.universalimageloader.core.ImageLoader.displayImage(ImageLoader.java:131)
01-04 14:43:40.990: E/AndroidRuntime(11510):    at com.example.breaktheglass.ImageGridActivity$ImageAdapter.getView(ImageGridActivity.java:96) 
```

所以我添加了这个：

```
ImageLoader.init(ImageLoaderConfiguration.createDefault(this)); 
```

在我调用 imageloader（在 .getInstance 下方）之前，它只是给了我这个错误：

```
Syntax error on token "init", Identifier expected after this token 
```

我不太确定从这里去哪里..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:52:10.403

只需像这样更改您的代码序列，

```
protected ImageLoader imageLoader;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    imageLoader = ImageLoader.getInstance();
    imageLoader.init(ImageLoaderConfiguration.createDefault(this)); 
```

让我知道发生了什么。。

有关更多详细信息，请查看[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

# javascript - Nested Resizables - 如何破坏父级而不是子级？

> ID：14163781
> 
> 赞同：0
> 
> 时间：2013-01-04T19:40:38.053
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-resizable

我使用 jQuery UI 嵌套了可调整大小。

```
<div id="outer">
  <div id="inner"></div>
</div>

$("#outer").resizable();
$("#inner").resizable(); 
```

我想破坏外部可调整大小，但不是内部。不幸的是，只是这样做......

```
$("#outer").resizable("destroy"); 
```

...也打破了内部可调整大小。目前我可以让它工作的唯一方法是首先销毁孩子，然后销毁父母，然后重新初始化孩子。

```
$("#inner").resizable("destroy");
$("outer").resizable("destroy");
$("#inner").resizable(); 
```

虽然这在一个简化的例子中是可以的，但在实践中它是一个令人头疼的问题，因为我的可调整大小的 init 很复杂，而且不容易在运行中重做。

有谁知道任何其他解决方法/补丁可以让我破坏外部可调整大小并保持内部可调整大小而不必破坏和重新创建内部？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-18T08:24:14.640

我的方法是扩展可调整大小的小部件，并覆盖其 _destroy 方法。将原始的 _destroy 方法复制到您的扩展小部件并替换

```
find(".ui-resizable-handle") 
```

和

```
children(".ui-resizable-handle") 
```

整个代码如下：

```
$.widget( "ui.customResizable", $.ui.resizable, {
    _destroy: function() {

        this._mouseDestroy();

        var wrapper,
            _destroy = function(exp) {
                $(exp).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing")
                    //The only place you need to change is replace find with children.
                    .removeData("resizable").removeData("ui-resizable").unbind(".resizable").children(".ui-resizable-handle").remove();
            };

        //TODO: Unwrap at same DOM position
        if (this.elementIsWrapper) {
            _destroy(this.element);
            wrapper = this.element;
            this.originalElement.css({
                position: wrapper.css("position"),
                width: wrapper.outerWidth(),
                height: wrapper.outerHeight(),
                top: wrapper.css("top"),
                left: wrapper.css("left")
            }).insertAfter( wrapper );
            wrapper.remove();
        }

        this.originalElement.css("resize", this.originalResizeStyle);
        _destroy(this.originalElement);

        return this;
    }
} ); 
```

比使用您的扩展小部件而不是原始的可调整大小。

```
$("#outer").customResizable();
$("#inner").customResizable();
$("#outer").customResizable("destroy"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:45:19.567

你可以试试这个：

```
var inner_clone = $('#inner').clone(true);
$('#outer').resizable('destroy');
$('#inner').replaceWith(inner_clone); 
```

使用 .clone(true)*应该*保持可调整大小的功能。

# objective-c - 屏幕颜色反转如何在 OS X 中工作？

> ID：14163788
> 
> 赞同：6
> 
> 时间：2013-01-04T19:41:15.073
> 
> 标签：objective-c, cocoa, colortransform

这就是 OS X 内置的颜色反转功能可以将您的屏幕变成：

![在此处输入图像描述](../Images/4c6a4fa5d58d3c1aeafe0d8c470aa367.png)

它可以反转所有颜色，将它们变成灰度，调整对比度。现在我想建立自己的实现，因此需要专业人士的建议。

无法捕捉倒置屏幕让我认为倒置是一种调整层，位于所有窗口之上，根本不暴露于交互事件。是这样吗？它是通过OpenGL库完成的吗？

我不研究实际的编码帮助，而是解决问题的设计/方法。在我的目标应用程序中，我需要定义输出颜色音调并应用颜色转换规则（输入 => 输出）。

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-04T21:46:31.433

Mac OS 进行颜色反转的方式（可能）是通过使用[Quartz Display Services](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/Quartz_Services_Ref/Reference/reference.html)来修改显卡的 gamma 表。

显卡有两个这样的表，用于在合成到最终帧缓冲区后修改颜色输出。其中之一可以由应用程序修改，以改变屏幕显示任何 RGB 值的方式。

这是反转显示的代码：

```
//ApplicationServices includes CoreGraphics
#import <ApplicationServices/ApplicationServices.h>

int main(int argc, const char * argv[])
{
    CGGammaValue table[] = {1, 0};
    CGSetDisplayTransferByTable(CGMainDisplayID(), sizeof(table) / sizeof(table[0]), table, table, table);
    sleep(3);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-04T20:36:08.920

在某种程度上，您可以使用 Core Image 过滤器来做到这一点。但是，这是私有 API，因此您需要小心，因为这些东西可能会在未来的 OS X 版本中更改或消失，并且您显然无法将您的应用程序提交到 App Store。~~我认为公共 API 不可能发生这样的事情。~~

***编辑：***有关使用公共 API 的更好方法，请参阅 Nikolai Ruhe 的回答。你可以用核心图像滤镜做一些你不能用伽玛表做的事情（例如应用模糊滤镜等），所以我会在这里留下我的答案。

这是一个如何反转窗口后面的示例：

```
//Declarations to avoid compiler warnings (because of private APIs):
typedef void * CGSConnection;
typedef void * CGSWindowID;
extern OSStatus CGSNewConnection(const void **attributes, CGSConnection * id);
typedef void *CGSWindowFilterRef;
extern CGError CGSNewCIFilterByName(CGSConnection cid, CFStringRef filterName, CGSWindowFilterRef *outFilter);
extern CGError CGSAddWindowFilter(CGSConnection cid, CGSWindowID wid, CGSWindowFilterRef filter, int flags);
extern CGError CGSSetCIFilterValuesFromDictionary(CGSConnection cid, CGSWindowFilterRef filter, CFDictionaryRef filterValues);

@implementation AppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    [self.window setOpaque:NO];
    [self.window setAlphaValue:1.0];
    [self.window setBackgroundColor:[NSColor colorWithCalibratedWhite:0.0 alpha:0.1]];
    self.window.level = NSDockWindowLevel;

    CGSConnection thisConnection;
    CGSWindowFilterRef compositingFilter;
    int compositingType = 1; // under the window
    CGSNewConnection(NULL, &thisConnection);
    CGSNewCIFilterByName(thisConnection, CFSTR("CIColorInvert"), &compositingFilter);
    NSDictionary *options = [NSDictionary dictionaryWithObject:[NSNumber numberWithFloat:3.0] forKey:@"inputRadius"];
    CGSSetCIFilterValuesFromDictionary(thisConnection, compositingFilter, (CFDictionaryRef)options);
    CGSAddWindowFilter(thisConnection, (CGSWindowID)[self.window windowNumber], compositingFilter, compositingType);    
}

@end 
```

（改编自[Steven Troughton Smith 在此处的文章](http://blog.steventroughtonsmith.com/2008/03/using-core-image-filters-onunder.html)）

![截屏](../Images/5e4b4c73d0040afeca25e3f9d1563a7d.png)

效果并不完美，因为出于某种原因，窗口必须具有不完全透明的背景颜色，但它非常接近。

要影响整个屏幕，您可以创建一个已`ignoresMouseEvents`设置为的无边框窗口`YES`（以便您可以单击它）。

您可以尝试使用其他过滤器，但并非所有过滤器都适用于此。`CGS...`在这个反向工程的标头中有一些关于函数的信息： [http ://code.google.com/p/undocumented-goodness/source/browse/trunk/CoreGraphics/CGSPrivate.h](http://code.google.com/p/undocumented-goodness/source/browse/trunk/CoreGraphics/CGSPrivate.h)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-27T22:27:29.530

OS X 本身的方式是通过一组未记录的 CoreGraphics API 调用。我认为它们没有在任何官方头文件中声明，但您始终可以自己声明原型。

```
// clang -g -O2 -std=c11 -Wall -framework ApplicationServices

#include <stdio.h>
#include <ApplicationServices/ApplicationServices.h>

CG_EXTERN bool CGDisplayUsesInvertedPolarity(void);
CG_EXTERN void CGDisplaySetInvertedPolarity(bool invertedPolarity);

int
main(int argc, char** argv)
{
    bool isInverted = CGDisplayUsesInvertedPolarity();
    printf("isInverted = %d\n", isInverted);

    sleep(2);
    CGDisplaySetInvertedPolarity(!isInverted);
    printf("Polarity is now: %d\n", CGDisplayUsesInvertedPolarity());

    sleep(2);
    CGDisplaySetInvertedPolarity(isInverted);
    printf("Polarity is now: %d\n", CGDisplayUsesInvertedPolarity());

    return 0;
} 
```

其他辅助功能也有类似的 API 调用，例如灰度：

```
CG_EXTERN bool CGDisplayUsesForceToGray(void);
CG_EXTERN void CGDisplayForceToGray(bool forceToGray); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T19:44:55.357

[本文](https://stackoverflow.com/questions/1165107/how-do-i-invert-a-colour-color-c-net)解释了另一个用户如何反转他的颜色，但这不会是叠加，它仍然可以实现您的目标。尽管这是在 C# 中，这可能是您的基本前提，因为这些相同的想法可以在 Obj-c 中工作。

基本上这篇文章说在 HSV 模式下转换你的 RGB 颜色然后反转色调值。为此，您必须将 Hue 更改为 360-Hue，然后转换回 RGB 模式。

# django - Django模板：优化模板的更新

> ID：14163789
> 
> 赞同：0
> 
> 时间：2013-01-04T19:41:25.073
> 
> 标签：django, django-templates

一个菜鸟问题可以肯定。我有一个包含多个移动部分的模板，我正在寻找构建这个 django 的最佳方式的方向`response`。

考虑这样的模板：

`<div>`显示 complex_calculation_1 + a 的结果`button`以更新此 div 的数据`<\div>`

`<div>`显示 complex_calculation_2 + a 的结果`button`以更新此 div 的数据`<\div>`

`<div>`显示 complex_calculation_3 + a 的结果`button`以更新此 div 的数据`<\div>`

`<div>`显示 complex_calculation_4 + a`button`更新整个页面的结果`<\div>`

每个计算的输出很容易保存。目前，每次`button`推送 a 时，我都会重新计算特定的计算，然后重新渲染整个页面，这会导致`forloop`所有部分的多次迭代。

我希望能够以最佳方式缓存模板的每个部分（那会是什么？），提供一个`response`只更新需要更新的页面部分并适当地呈现更新的页面。

所以我的问题是：我应该如何以创造最大效率的方式处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:15:30.540

使用`jquery`and`ajax`仅更新模板的特定部分，假设：

```
<div>
    <span id="data_1"> Display results of complex_calculation_1 + </span>
    <button class="data_btn" span_id="data_1">Update</button>
<\div>

<script>
 $('.data_btn').click(function(){
    // send post data which you need in `data` variable
    $.ajax({
        type: 'POST',
        url: '{% url 'url_name_for_your_view_here' %}',
        data: {'csrfmiddlewaretoken': '{{csrf_token}}'},
        dataType: "text",
        success: function(response) {
            $($(this).attr('span_id')).text(response.data);
            //where response.data is the data which you want to display
        },
        error: function(rs, e) {
            alert(rs.responseText);
            alert('Oops! something went worng..');
         }
     });
  });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:04:43.027

如果您可以假设，该站点访问者启用了 JavaScript，您可以使用[ajax](http://api.jquery.com/jQuery.ajax/)来发送您的数据，在单独的视图中执行计算并将其发布回您的站点 - 这样整个页面就不会重新加载，并且看起来十分优雅。

当然，任何访问者都应该能够使用您的网站，即使他的浏览器不支持 JavaScript，但是，如果它只是少数访问者，那么我就不会为这些罕见的情况而优化它，就让它保持原样是。

我不确定 Django 中的缓存机制，所以如果你真的不能依赖 Ajax，我不会提出任何建议。

# java - 如何在 JSTL 中为不同的语言环境调用不同的方法

> ID：14163800
> 
> 赞同：0
> 
> 时间：2013-01-04T19:41:56.667
> 
> 标签：java, jsp, localization, jstl, el

在一个 JSP 页面中，我得到了一个 bean `School`，它有一个名为`getDescription(String Locale)`. 如果我通过`en_US`它将返回英文文本，并且`fr_CA`它将返回法文文本。

我使用 fmt 标签没有问题，例如：`<fmt:message key="school_list.title2"/>`对于静态内容，但是有没有办法可以为 bean 传递参数，所以我可以使用类似：`${school.description}`或`${school.description(locale)}`？

有没有使用标准 EL 和 JSTL 处理这个问题的好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:23:49.637

把它放进豆子里。添加一个 getDescription() 方法，该方法使用当前语言环境调用现有方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T03:45:45.407

你试过用`#{school.getDescription(locale)}`吗？

*   另请参阅：[JSP EL、JSF EL 和统一 EL 之间的区别](https://stackoverflow.com/a/4812883/401881)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T14:55:15.990

如果您[使用的是 JSP 2.2](https://stackoverflow.com/questions/13017348/passing-parameters-to-beans-method-from-jsp#13020121)，那么您可以使用`${school.getDescription(locale)}`或按照@Med 的建议使用[延迟语法](http://docs.oracle.com/javaee/6/tutorial/doc/bnahr.html)。

如果您的环境不提供 JSP 2.2，那么如果您至少有 JSP 2.0，那么您可以将方法调用包装在一个通用[函数](http://docs.oracle.com/javaee/5/tutorial/doc/bnahq.html#bnaio)中，该函数采用您的 bean、要调用的方法名称和参数列表，并反射性地调用该方法。然后你做一些这样的事情：`${f:invoke(bean, 'getDescription', locale)}`.

如果您使用的是 JSP 1.2，那么您可以获得与 JSP 2.0 中的函数类似的行为，但使用标签代替（函数是在 JSP 2.0 中添加的）。

# python - 如何解决 xml.etree.ElementTree.iterparse() 中的 Unicode 错误？

> ID：14163801
> 
> 赞同：4
> 
> 时间：2013-01-04T19:42:00.030
> 
> 标签：python, xml, unicode, python-3.x, elementtree

我正在使用 Python`xml.etree.ElementTree`模块的`iterparse()`方法读取一个巨大的（多千兆字节）XML 文件。问题是在某些 XML 文件的文本中偶尔会出现 Unicode 错误（或者至少 Python 3 认为是 Unicode 错误）。我的循环是这样设置的：

```
import xml.etree.ElementTree as etree

def foo():
    # ...
    f = open(filename, encoding='utf-8')
    xmlit = iter(etree.iterparse(f, events=('start', 'end')))
    (event, root) = next(xmlit)
    for (event, elem) in xmlit: # line 26
        if event != 'end':
            continue
        if elem.tag == 'foo':
            do_something()
            root.clear()
        elif elem.tag == 'bar':
            do_something_else()
            root.clear()
    # ... 
```

当遇到带有 Unicode 错误的元素时，我收到以下回溯错误：

```
Traceback (most recent call last):
  File "<path to above file>", line 26, in foo
    for (event, elem) in xmlit:
  File "C:\Python32\lib\xml\etree\ElementTree.py", line 1314, in __next__
    self._parser.feed(data)
  File "C:\Python32\lib\xml\etree\ElementTree.py", line 1668, in feed
    self._parser.Parse(data, 0)
UnicodeEncodeError: 'utf-8' codec can't encode character '\ud800' in position 16383: surrogates not allowed 
```

由于错误发生在`for`循环迭代之间，我可以包装`try`块的唯一位置是`for`循环之外，这意味着我无法继续下一个 XML 元素。

我的解决方案优先级如下：

1.  接收一个不必要有效的 Unicode 字符串作为元素的文本，而不是引发异常。
2.  接收替换或删除无效字符的有效 Unicode 字符串。
3.  跳过带有无效字符的元素并继续下一个。

我如何在不亲自修改`ElementTree`代码的情况下实现这些解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T20:08:42.727

首先，关于 ElementTree 的所有东西在这里可能都无关紧要。尝试仅枚举由返回的文件`f = open(filename, encoding='utf-8')`，您可能会得到相同的错误。

如果是这样，解决方案是覆盖默认编码错误处理程序，如[文档中所述](http://docs.python.org/3.2/library/functions.html#open)：

> errors 是一个可选字符串，它指定如何处理编码和解码错误——这不能在二进制模式下使用。如果存在编码错误，则传递 'strict' 以引发 ValueError 异常（默认值 None 具有相同的效果），或者传递 'ignore' 以忽略错误。（请注意，忽略编码错误会导致数据丢失。）“替换”会导致在存在格式错误的数据的位置插入替换标记（例如“？”）。编写时，可以使用 'xmlcharrefreplace'（替换为适当的 XML 字符引用）或 'backslashreplace'（替换为反斜杠转义序列）。已使用 codecs.register_error() 注册的任何其他错误处理名称也是有效的。

所以，你可以这样做：

```
f = open(filename, encoding='utf-8', errors='replace') 
```

这符合您的第二个优先级——无效字符将被替换为`'?'`.

没有办法满足您的首要任务，因为没有办法表示“非必要有效的 Unicode 字符串”。根据定义，Unicode 字符串是一系列 Unicode 代码点，这就是 Python 处理该`str`类型的方式。如果你有无效的 UTF-8 并且想把它变成一个字符串，你需要指定它应该*如何*变成一个字符串——这就是，`errors`是什么。

或者，您可以以二进制模式打开文件，并将 UTF-8 作为`bytes`对象单独保留，而不是尝试将其转换为 Unicode`str`对象，但是您只能使用处理`bytes`对象的 API。（我相信 的`lxml`实现`ElementTree`实际上可以做到这一点，但内置的不能，但不要引用我的话。）但即使你这样做了，它也不会让你走得太远，因为 XML代码本身会尝试解释无效的 UTF-8，然后*它*需要知道你想对错误做什么，这通常会更难指定，因为它更远。

最后一点：

> 由于错误发生在 for 循环迭代之间，因此我可以包装 try 块的唯一位置是 for 循环之外，这意味着我无法继续到下一个 XML 元素。

好吧，您实际上不必使用`for`循环；您可以将其转换为带有显式调用的`while`循环。`next`任何时候你需要这样做，这通常表明你做错了——但有时这表明你正在处理一个损坏的库，这是唯一可用的解决方法。

这个：

```
for (event, elem) in xmlit: # line 26
    doStuffWith(event, elem) 
```

等效于：

```
while True:
    try:
        event, elem = next(xmlit)
    except StopIteration:
        break
    doStuffWith(event, elem) 
```

现在，有一个明显的地方可以添加一个`try`——尽管你甚至不需要；您可以将另一个附加`except`到现有的`try`.

问题是，你要在这里做什么？无法保证迭代器在抛出异常后能够继续。事实上，所有创建迭代器的最简单方法都*无法*做到这一点。在这种情况下，您可以自己测试是否属实。

在极少数情况下，当你需要它并且它实际上有帮助时，你可能想要把它包起来。像这样的东西：

```
def skip_exceptions(it):
    while True:
      try:
          yield next(it)
      except StopIteration:
          raise
      except Exception as e:
          logging.info('Skipping iteration because of exception {}'.format(e)) 
```

然后，您只需执行以下操作：

```
for (event, elem) in skip_exceptions(xmlit):
    doStuffWith(event, elem) 
```

# cakephp-2.0 - 使用 CakePHP2 中的现有数据填充 ACO/ARO 表

> ID：14163803
> 
> 赞同：3
> 
> 时间：2013-01-04T19:42:12.853
> 
> 标签：cakephp-2.0, acl

我正在为我的 CakePHP 2 应用程序实现一个基于组（角色）的 ACL 系统。

现在，我知道 ACL 会根据我的数据未来的变化自动填充 aco/aro 表，但是我如何根据现有数据填充这些表？我发现很少有文档涵盖管理现有数据的方式。

这是我拆分模型的方法。

Group 模型既是请求者又是受控者。有4组。

```
public $actsAs = array(
        'Acl' => array('type' => 'both')
) 
```

我有一个用户模型，它受控并绑定到组以用于请求者的行为。现有用户不到 11000 人。

```
public $actsAs = array(
        'Acl' => array('type' => 'controlled')
)

function bindNode($user) {
        return array('model' => 'Group', 'foreign_key' => $user['User']['group_id']);
} 
```

我还有其他一些受控制的模型。这些模型是 Client（260 个条目）、Note（不到 500 个条目）和 Registration（大约 20000 个条目）。

```
public $actsAs = array(
        'Acl' => array('type' => 'controlled')
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:48:06.650

事实证明，我误解了什么是 ACO 模型。我唯一真正需要的是组的 4 个 ARO 条目。ACO 没有用，因为我不需要对同一类型的模型进行不同的 aros 访问。

# perforce - 如何使用命令行在 perforce 中移动目录？

> ID：14163806
> 
> 赞同：10
> 
> 时间：2013-01-04T19:42:27.703
> 
> 标签：perforce

我正在尝试将目录移动到 perforce 中的另一个目录。这是通过命令行。我能找到的唯一移动项目的命令是移动命令，它只移动单个文件。他们是一种将一个目录中的所有文件移动到另一个目录的方法吗？我的目录结构有很多级别，必须发出命令来移动每个级别是很乏味的。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-04T19:45:21.737

您可以使用`p4 move`移动整棵树。但在此之前，必须打开移动目录中的所有文件以进行编辑或添加。

例如：

```
p4 edit //xyz/...
p4 move //xyz/... //abc/... 
```

将移动所有*已跟踪*的文件`//xyz`及其子目录。

（参见[文档](http://www.perforce.com/perforce/r12.2/manuals/cmdref/move.html):)

# c# - LongListSelector 中的错误滚动

> ID：14163815
> 
> 赞同：0
> 
> 时间：2013-01-04T19:43:00.353
> 
> 标签：c#, silverlight, windows-phone-7, longlistselector

我有一个 LLS，它显示了 2 组朋友（在线和离线）。我的问题：当我开始滚动 LLS - 它有 2 个变体：1) LLS 滚动良好，2) 它不滚动。当它不滚动时 - 我开始在不同的地方垂直滚动屏幕，并在屏幕的某个地方找到 LLS 开始滚动的位置。但！第二次 - 在这个地方 LLS 不滚动，我再次尝试在屏幕上找到 LLS 滚动的地方。看起来 LLS 的滚动查看器会随机更改位置和大小。这是我的LLS：

```
 <controls:PanoramaItem Header="1">
            <Grid Height="500" >
                <toolkit:LongListSelector Name="AllFriendsList" Height="500" Width="420" 
                ItemTemplate="{StaticResource citiesItemTemplate}"
                ListHeaderTemplate="{StaticResource citiesListHeader}" 
                ListFooterTemplate="{StaticResource citiesListFooter}"
                GroupHeaderTemplate="{StaticResource groupHeaderTemplate}"
                GroupItemTemplate="{StaticResource groupItemTemplate}" >
                    <toolkit:LongListSelector.GroupItemsPanel>
                        <ItemsPanelTemplate>
                            <toolkit:WrapPanel/>
                        </ItemsPanelTemplate>
                    </toolkit:LongListSelector.GroupItemsPanel>

                </toolkit:LongListSelector>
            </Grid>
        </controls:PanoramaItem> 
```

和风格：

```
 <DataTemplate x:Key="citiesListHeader">
        <Border Background="Purple">
            <TextBlock Text="Cities Header" />
        </Border>
    </DataTemplate>
    <DataTemplate x:Key="citiesListFooter">
        <Border Background="Green">
            <TextBlock Text="Cities Footer" />
        </Border>
    </DataTemplate>

    <!-- The template for city items -->
    <DataTemplate x:Key="citiesItemTemplate">
        <StackPanel Grid.Column="1"  VerticalAlignment="Top">
            <Line Style="{StaticResource Line1}" ></Line>
            <Line Style="{StaticResource Line2}" ></Line>
            <TextBlock Margin="75,15,40,0" FontSize="30" Name="Name" Text="{Binding Name}" Tap="GetUserInfo" />
            <Image HorizontalAlignment="Left" Width="75" Name="Photo" >
                <Image.Source>
                    <BitmapImage UriSource="{Binding Image}" CreateOptions="BackgroundCreation" />
                </Image.Source>
            </Image>
        </StackPanel>
    </DataTemplate>

    <!-- The group header template, for groups in the main list -->
    <DataTemplate x:Key="groupHeaderTemplate">
        <Border Background="YellowGreen" Margin="6">
            <TextBlock Text="{Binding Title}" FontSize="40" Foreground="Black"/>
        </Border>
    </DataTemplate>

    <DataTemplate x:Key="groupItemTemplate" >
        <Border Background="YellowGreen" Width="99" Height="99" Margin="6">
            <TextBlock Text="{Binding Title}" FontSize="40" Foreground="Black"/>
        </Border>
    </DataTemplate> 
```

我没有更改控件名称，我从[这里](http://www.windowsphonegeek.com/articles/wp7-longlistselector-in-depth--part2-data-binding-scenarios)取了它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:03:14.900

在 DataTemplate 中的 StackPanel 上放置透明背景。命中测试系统必须有像素才能使用，即使它们是透明的。但是，不要疯狂地在任何地方添加背景，否则您的帧速率会下降。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T09:22:45.793

问题在于滚动仅适用于控件。因此，如果我将鼠标放在图像或文本块上 - 它滚动正常（我的 LLS 有没有任何控件的空白位置），当我尝试在空白位置滚动时 - 它不会滚动。

# javascript - 使用 jQuery 突出显示简单的文本

> ID：14163817
> 
> 赞同：3
> 
> 时间：2013-01-04T19:43:05.147
> 
> 标签：javascript, jquery

首先，是的，我知道那里有很多突出显示的 jquery 插件，我已经看过它们，它们让我很满意，但是现在有一个问题要问我！

为什么要使用 7kb 的插件？这应该用两行代码来解决......

这就是我正在做的事情，我正在我的 web 应用程序中搜索并且我想突出显示匹配的部分，例如我输入“ `ab`”作为搜索查询，然后我将由 Ajax 将这些结果加载到我的 HTML 中：

```
<div class="blah"><h3><a>Abicert</a></h3></div>
<div class="blah"><h3><a>The aboony test</a></h3></div>
<div class="blah"><h3><a>Abnormal abiba!!!</a></h3></div> 
```

所以在上面的结果中，每个“ `ab`”都应该被突出显示，比如：

**Ab** icert

**验血**_

**ab**正常**ab** iba ！！！

所以，我的 jQuery 是：

```
$('.blah h3 a').each(function(){
    var text = $(this).text();
    var searched_text = 'ab';
    // MY QUESTION HERE - How to highlight part of this text
}); 
```

**我需要提到的另一件事是：**用户可能输入“ `ab anotherquery`”作为他的搜索查询，所以这应该用空格展开，并且在结果中每个“ `ab`”和“ `anotherquery`”都应该突出显示。

我想学习这个，这不是我用现成的插件无法解决的事情......

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T19:56:18.750

使用 RegExp 和[preg_quote](http://kevin.vanzonneveld.net/techblog/article/javascript_equivalent_for_phps_preg_quote/)（负责处理正则表达式中使用的字符）。

```
function preg_quote( str ) {
    // http://kevin.vanzonneveld.net
    // +   original by: booeyOH
    // +   improved by: Ates Goral (http://magnetiq.com)
    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // +   bugfixed by: Onno Marsman
    // *     example 1: preg_quote("$40");
    // *     returns 1: '\$40'
    // *     example 2: preg_quote("*RRRING* Hello?");
    // *     returns 2: '\*RRRING\* Hello\?'
    // *     example 3: preg_quote("\\.+*?[^]$(){}=!<>|:");
    // *     returns 3: '\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:'

    return (str+'').replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g, "\\$1");
}

$('.blah h3 a').each(function(){
    var text = $(this).text();
    var searched_text = 'ab la';
    var keywords = searched_text.split(' ');
    keywords = $.map(keywords, preg_quote);
    $(this).html(text.replace(new RegExp("(" + keywords.join('|') + ")" , 'gi'), "<b>$1</b>"));
});​ 
```

这将按空格打破搜索查询并用 < **b** >包装每个匹配项

[演示（JSFiddle）](http://jsfiddle.net/RTn3h/)

# iphone - 为什么更改 CAGradientLayer 的值会导致“自动”动画？我该如何避免呢？

> ID：14163819
> 
> 赞同：1
> 
> 时间：2013-01-04T19:43:14.713
> 
> 标签：iphone, ios, core-animation

> **可能重复：**
> [如何防止 CALayer 出现隐式动画？](https://stackoverflow.com/questions/3884242/how-to-prevent-calayer-from-implicit-animations)

我使用 CAGradientLayer 作为 UIView 的图层蒙版。目的是有可能只显示 UIView 的一部分，并响应用户输入，通过修改 CAGradientLayer 来更改可见的视图部分。

所有这一切都很好，但是我遇到了一个问题：为了更改 UIView 的可见部分，我修改了 CAGradientLayer 的以下属性的值：

起点终点位置

我在动画块之外更改了这些值，但是更改在屏幕中是动画的。看起来它是用默认的短动画执行的（可能一秒钟长，很难说）。

我的问题是，为什么要进行动画更改？以及如何防止动画？（其实我也想要一个动画，但是自己控制的，不是这个默认的）。

作为补充观察，我知道所有这些属性（startPoint、endPoint 和位置）都被标记为可动画的，但我的理解是这仅意味着它们可以设置在动画块内以使更改动画化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T19:57:55.787

许多动画属性都有默认动画。设置它们时，会发生默认动画。

您可以通过在动画块中设置属性来覆盖默认动画。每当您更改动画块中的属性时，该属性的任何先前动画都会被您的新动画替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T21:28:02.903

对 CALayer 的大多数更改都发生在隐式动画下（例如，它们是自动动画的）。为防止这种情况，请将您的更新包装在以下代码中：

```
[CATransaction begin];
[CATransaction setDisableActions:YES];
// Your changes to the layer here...
[CATransaction commit]; 
```

# arrays - 数组变异算法

> ID：14163820
> 
> 赞同：5
> 
> 时间：2013-01-04T19:43:27.467
> 
> 标签：arrays, algorithm, sorting, diff

我正在寻找以下问题的解决方案：

给定一个数组“a”和一个数组“b”，找到一组操作，当应用于“a”时，将“a”转换为“b”。

例如，鉴于我有：

```
a = [1,2,3]
b = [3,2,4]
c = transmute(a, b) 
```

我现在希望 c 包含以下内容：

```
[["remove", 0], ["add", 2, 4], ["swap", 0, 1]] 
```

按照给定的顺序在“a”上添加这些操作应该会产生“b”：

```
[1,2,3] => [2,3] => [2,3,4] => [3,2,4] 
```

这是 Ruby 中一个非常幼稚的实现：[https](https://gist.github.com/4455256) ://gist.github.com/4455256 。这个假设数组中没有重复项（这不是一个好的假设）。我认为它也是 O(n²)，如果有更高性能的东西会很好。

有没有已知的算法可以做到这一点？我可以做任何进一步的阅读吗？您对如何改进有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T15:30:45.090

您可以**分阶段进行**以解决此问题。根据我的想法，应该有3个阶段。O(N) 解决方案将是可能的。

将数组 A 复制到数组 C 中，将数组 B 复制到数组 D 中。

1.  现在，比较 2 个数组 C 和 D。**删除**C 中不存在于 D 中的元素。这些是需要从数组 A 中删除的元素。如果我们在这一步使用 HashMap，那么可以在上）
2.  再次比较 C 和 D，删除 D 中不在 C 中的元素。这些元素本质上就是我们将**添加到数组**A中的元素。
3.  所以，现在我们有 2 个数组 - **C 和 D，它们本质上具有相同的元素**。我们只**需要看看如何交换这些元素以使它们看起来相似**。
4.  一旦它们看起来相似，我们就可以**将 A 中缺少的元素添加到 D**中。将您在步骤 2 中删除的元素重新添加到数组 D 中。通过与原始数组 A 进行比较，可以按照正确的顺序添加它们。

因为，步骤 1、2、4 相当简单。我将解释**如何使用掉期的顺序**。让我们举个例子。如果当前我们的数组 C 看起来像 1,3,2 而 D 看起来像 3,2,1。我们将 D 中每个索引处的值与 C 中的相应值进行比较。如果它们不同，则我们标记从 C 中的元素到 D 中的元素的有向边。因此，在索引 0 处，C 有 1，D 有 3。它们是不同，因此我们绘制从 1 到 3 的有向边。1->3。同样，我们为索引 1 绘制一条从 3 到 2 的边。为索引 2 绘制一条从 2 到 1 的边。

这将我们引向**DAG**。你可以试试 DFS 之类的各种东西，看看，我将在这里说明结果。没有。交换数将是**（图中的节点数 - 1）**。**图的 DFS 遍历将告诉交换发生的顺序**。

注意：如果数组中有重复的元素，则需要更多的簿记，但相同的解决方案将起作用。

如果您无法通过 DAG 交换算法的阶段。请看@handcraftsman 引用的问题，即[字符串转置算法](https://stackoverflow.com/questions/3075853/string-transposition-algorithm)。它针对同一问题提出了类似的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T00:58:12.567

这是一个解决方案：

```
get the token-index pairs of all tokens in the source string
get the token-index pairs of all tokens in the target string

from both sets remove the values that are in the other set.

foreach token-index in the source set
   if the target set has the token at the same location
      remove it from both sets, this is a match created by a previous swap
   get the target token at the source index
   if the source set has the target token (at any index)
      create a swap command to swap the source token at source index with
         the target token at its index in the source
      remove the token-index from the source set
      remove the target token-index from the target set
      add a token-index for the target token at the new index to the source set
      loop without moving to the next token-index

create remove commands for any remaining token-indexes in the source set
create add commands for any remaining token-indexes in the target set 
```

这是一个快速的 C# 实现：

```
private static IEnumerable<ICommand> GetChangeCommands(string source, string target)
{
    var unmatchedSourceTokens = GetUnmatchedTokenIndexes(source, target);
    var unmatchedTargetTokens = GetUnmatchedTokenIndexes(target, source);

    var commands = new List<ICommand>();

    foreach (var tokenIndexList in unmatchedSourceTokens)
    {
        var sourceToken = tokenIndexList.Key;
        var sourceStringSourceTokenIndexes = unmatchedSourceTokens[sourceToken];

        foreach (var sourceLoopIndex in tokenIndexList.Value.ToList())
        {
            var sourceIndex = sourceLoopIndex;
            bool swapped;
            do
            {
                swapped = false;
                if (sourceIndex >= target.Length)
                {
                    continue;
                }
                var targetToken = target[sourceIndex];
                if (targetToken == sourceToken)
                {
                    sourceStringSourceTokenIndexes.Remove(sourceIndex);
                    unmatchedTargetTokens[targetToken].Remove(sourceIndex);
                    continue;
                }
                List<int> sourceStringTargetTokenIndexes;
                if (!unmatchedSourceTokens.TryGetValue(targetToken, out sourceStringTargetTokenIndexes) ||
                    !sourceStringTargetTokenIndexes.Any())
                {
                    continue;
                }
                var targetIndex = sourceStringTargetTokenIndexes.First();
                commands.Add(new SwapCommand(sourceIndex, targetIndex));
                sourceStringTargetTokenIndexes.RemoveAt(0);
                sourceStringSourceTokenIndexes.Remove(sourceIndex);
                sourceStringSourceTokenIndexes.Add(targetIndex);
                unmatchedTargetTokens[targetToken].Remove(sourceIndex);
                swapped = true;
                sourceIndex = targetIndex;
            } while (swapped);
        }
    }

    var removalCommands = unmatchedSourceTokens
        .SelectMany(x => x.Value)
        .Select(x => new RemoveCommand(x))
        .Cast<ICommand>()
        .OrderByDescending(x => x.Index)
        .ToList();

    commands.AddRange(removalCommands);

    var insertCommands = unmatchedTargetTokens
        .SelectMany(x => x.Value.Select(y => new InsertCommand(y, x.Key)))
        .Cast<ICommand>()
        .OrderBy(x => x.Index)
        .ToList();

    commands.AddRange(insertCommands);

    return commands;
}

private static IDictionary<char, List<int>> GetUnmatchedTokenIndexes(string source, string target)
{
    var targetTokenIndexes = target.Select((x, i) => new
                                                            {
                                                                Token = x,
                                                                Index = i
                                                            })
                                    .ToLookup(x => x.Token, x => x.Index)
                                    .ToDictionary(x => x.Key, x => x.ToList());

    var distinctSourceTokenIndexes = new Dictionary<char, List<int>>();
    foreach (var tokenInfo in source.Select((x, i) => new
                                                            {
                                                                Token = x,
                                                                Index = i
                                                            }))
    {
        List<int> indexes;
        if (!targetTokenIndexes.TryGetValue(tokenInfo.Token, out indexes) ||
            !indexes.Contains(tokenInfo.Index))
        {
            if (!distinctSourceTokenIndexes.TryGetValue(tokenInfo.Token, out indexes))
            {
                indexes = new List<int>();
                distinctSourceTokenIndexes.Add(tokenInfo.Token, indexes);
            }
            indexes.Add(tokenInfo.Index);
        }
    }
    return distinctSourceTokenIndexes;
}

internal class InsertCommand : ICommand
{
    private readonly char _token;

    public InsertCommand(int index, char token)
    {
        Index = index;
        _token = token;
    }

    public int Index { get; private set; }

    public string Change(string input)
    {
        var chars = input.ToList();
        chars.Insert(Index, _token);
        return new string(chars.ToArray());
    }

    public override string ToString()
    {
        return string.Format("[\"add\", {0}, '{1}']", Index, _token);
    }
}

internal class RemoveCommand : ICommand
{
    public RemoveCommand(int index)
    {
        Index = index;
    }

    public int Index { get; private set; }

    public string Change(string input)
    {
        var chars = input.ToList();
        chars.RemoveAt(Index);
        return new string(chars.ToArray());
    }

    public override string ToString()
    {
        return string.Format("[\"remove\", {0}]", Index);
    }
}

internal class SwapCommand : ICommand
{
    private readonly int _targetIndex;

    public SwapCommand(int sourceIndex, int targetIndex)
    {
        Index = sourceIndex;
        _targetIndex = targetIndex;
    }

    public int Index { get; private set; }

    public string Change(string input)
    {
        var chars = input.ToArray();
        var temp = chars[Index];
        chars[Index] = chars[_targetIndex];
        chars[_targetIndex] = temp;
        return new string(chars);
    }

    public override string ToString()
    {
        return string.Format("[\"swap\", {0}, {1}]", Index, _targetIndex);
    }
}

internal interface ICommand
{
    int Index { get; }
    string Change(string input);
} 
```

示例用法：

```
const string source = "123";
const string target = "324";
var commands = GetChangeCommands(source, target);
Execute(source, target, commands);

private static void Execute(string current, string target, IEnumerable<ICommand> commands)
{
    Console.WriteLine("converting".PadRight(19) + current + " to " + target);
    foreach (var command in commands)
    {
        Console.Write(command.ToString().PadRight(15));
        Console.Write(" => ");
        current = command.Change(current);
        Console.WriteLine(current);
    }
} 
```

样本输出：

```
converting         123 to 324
["swap", 0, 2]  => 321
["remove", 2]   => 32
["add", 2, '4'] => 324

converting         hello to world
["swap", 1, 4]  => holle
["remove", 4]   => holl
["remove", 2]   => hol
["remove", 0]   => ol
["add", 0, 'w'] => wol
["add", 2, 'r'] => worl
["add", 4, 'd'] => world

converting         something to smith
["swap", 1, 2]  => smoething
["swap", 2, 6]  => smiethong
["swap", 3, 4]  => smitehong
["swap", 4, 5]  => smitheong
["remove", 8]   => smitheon
["remove", 7]   => smitheo
["remove", 6]   => smithe
["remove", 5]   => smith

converting         something to sightseeing
["swap", 1, 6]  => simethong
["swap", 6, 3]  => simotheng
["swap", 3, 5]  => simhtoeng
["swap", 2, 8]  => sightoenm
["remove", 8]   => sightoen
["remove", 7]   => sightoe
["remove", 5]   => sighte
["add", 5, 's'] => sightse
["add", 7, 'e'] => sightsee
["add", 8, 'i'] => sightseei
["add", 9, 'n'] => sightseein
["add", 10, 'g'] => sightseeing 
```

以下是上面示例中明显的一些低效率：它交换将要删除的令牌它删除然后重新添加令牌

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T19:55:08.287

这个答案可能有用： [字符串转置算法](https://stackoverflow.com/questions/3075853/string-transposition-algorithm)

看看编辑距离算法

# sql-server - SSAS 浏览器类未注册错误

> ID：14163821
> 
> 赞同：0
> 
> 时间：2013-01-04T19:43:25.850
> 
> 标签：sql-server, browser, ssas

您好，当我尝试在 Business Intelligence Studio 中使用多维数据集浏览器时出现以下错误。重新安装 OWC 2003 的标准解决方案不起作用。我确实在开发机器上安装了几个版本的 SQL，并且想知道这是否可能是一些帖子提到的问题，但没有详细说明。干杯，克里斯。

SSAS 类未注册（HRESULT 异常：0x80040154 (REGDB_E_CLASSNOTREG)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T05:16:10.510

我避免使用多维数据集浏览器——它不可靠、不能扩展并且不能准确反映用户体验或客户端工具生成的 MDX。您的客户/用户没有使用 OWC 2003 - 对吗？

IMO 您应该使用您的用户正在使用的客户端工具，以便您看到他们将看到的结构，并生成他们将获得的 MDX 和结果。

我更喜欢 Excel 来浏览多维数据集。它有许多优点，例如保存“查询”和结果，轻松比较来自多个查询/来源的结果，非常可扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T08:54:04.323

我卸载了我拥有的 SQL 2008 R2 以及 2008 并重新安装了 OWA，它开始工作了。

# jpa - org.eclipse.persistence.exceptions.QueryException：查询执行期间从行中读取的主键被检测为空

> ID：14163825
> 
> 赞同：7
> 
> 时间：2013-01-04T19:43:42.890
> 
> 标签：jpa, eclipselink, primary-key

我正在尝试查询 JPA 上的一些数据，这是我的查询：

```
@Override
    public List<HorarioAtencion> findByPeriodo(Person person, int dia, int mes, int anno) {
        Query busqueda = em.createNativeQuery("Select * from HorariosAtencion where " +
                                              "idPerson = ?1 AND "+
                                              "DAY( fechaInicio) <= ?2 AND MONTH( fechaInicio ) <= ?3 AND YEAR( fechaInicio) <= ?4 AND "+
                                              "DAY( fechaFin) >= ?2 AND MONTH( fechaFin ) >= ?3 AND YEAR( fechaFin ) >= ?4 ORDER BY TIME(fechaInicio)", HorarioAtencion.class);
       busqueda.setParameter(1,person.getId());
       busqueda.setParameter(2, dia);
       busqueda.setParameter(3, mes);
       busqueda.setParameter(4, anno);
       return busqueda.getResultList();
    } 
```

此查询返回结果，但会触发下一个异常：

```
Caused by: Exception [EclipseLink-6044] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.QueryException
Exception Description: The primary key read from the row [ArrayRecord(
     => 1
     => 13
     => 2013-01-04 12:25:00.0
     => 2013-01-04 12:25:00.0
     => true
     => true
     => true
     => true
     => true
     => true
     => true)] during the execution of the query was detected to be null.  Primary keys must not contain null.
Query: ReadAllQuery(referenceClass=HorarioAtencion sql="Select * from HorariosAtencion where idPerson = ? AND DAY( fechaInicio) <= ? AND MONTH( fechaInicio ) <= ? AND YEAR( fechaInicio) <= ? AND DAY( fechaFin) >= ? AND MONTH( fechaFin ) >= ? AND YEAR( fechaFin ) >= ? ORDER BY TIME(fechaInicio)") 
```

这是如何引起的，我该如何解决？

实体类的列定义：

```
private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "id")
    private Integer id;

    @Basic(optional = false)
    @Column(name = "fechaInicio")
    @Temporal(TemporalType.TIMESTAMP)
    private Date fechaInicio;

    @Basic(optional = false)
    @Column(name = "fechaFin")
    @Temporal(TemporalType.TIMESTAMP)
    private Date fechaFin;

    @Basic(optional = false)
    @Column(name = "domingo")
    private boolean domingo;

    @Basic(optional = false)
    @Column(name = "lunes")
    private boolean lunes;

    @Basic(optional = false)
    @Column(name = "martes")
    private boolean martes;

    @Basic(optional = false)
    @Column(name = "miercoles")
    private boolean miercoles;

    @Basic(optional = false)
    @Column(name = "jueves")
    private boolean jueves;

    @Basic(optional = false)
    @Column(name = "viernes")
    private boolean viernes;

    @Basic(optional = false)
    @Column(name = "sabado")
    private boolean sabado;

    @JoinColumn(name = "idPersona", referencedColumnName = "id")
    @ManyToOne(optional = false)
    private Persona idPersona; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-07T04:44:01.053

您使用的是什么数据库，它为列名返回什么？

**默认情况下， EclipseLink**在较新的版本中区分大小写，除非将`eclipselink.jpa.uppercase-column-names`持久属性设置为 true。

`"ID"`如果数据库在您将列名定义为小写时将其返回为大写，这可能是本机查询的问题`"id"`。

尝试更改注释中的列定义以匹配数据库使用的内容或添加值为 true 的属性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-18T18:09:54.887

问题是 eclipselink 区分大小写。有一个“提示”可以解决这个问题。在 persistence.xml 文件中的 properties 元素之间放置以下内容：

```
<!-- Hint to solve "The primary key read from the row [DatabaseRecord(...)] during the execution of the query was detected to be null." errors.-->
<property name="eclipselink.jpa.uppercase-column-names" value="true"/> 
```

这将以不区分大小写的方式处理列名并消除错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-13T01:53:51.197

找到这个线程[https://forums.oracle.com/thread/614380](https://forums.oracle.com/thread/614380)。

postgres 和 EclipseLink 也有同样的问题。

解决方法：将主键列改为大写即：

选择 id**作为“ID”**，field1, field2,..., fieldn from table ....

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T19:47:43.213

`HorariosAtencion`在表中的某处，在`null`与主键对应的字段中找到了一个值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T19:23:02.817

要么在 HorariosAtencion /Persona 的一个/多个主键上有空值。仔细检查您的数据库。

或者您需要设置角色ID而不是引用对象，请尝试

```
public List<HorarioAtencion> findByPeriodo(Person person, int dia, int mes, int anno) {
    Query busqueda = em.createQuery("from HorariosAtencion where " +
                                          "idPerson = ?1 AND "+
                                          "DAY( fechaInicio) <= ?2 AND MONTH( fechaInicio ) <= ?3 AND YEAR( fechaInicio) <= ?4 AND "+
                                          "DAY( fechaFin) >= ?2 AND MONTH( fechaFin ) >= ?3 AND YEAR( fechaFin ) >= ?4 ORDER BY TIME(fechaInicio)", HorarioAtencion.class);
   busqueda.setParameter(1,person);
   busqueda.setParameter(2, dia);
   busqueda.setParameter(3, mes);
   busqueda.setParameter(4, anno);
   return busqueda.getResultList();
} 
```

或者

```
public List<HorarioAtencion> findByPeriodo(Person person, int dia, int mes, int anno) {
    Query busqueda = em.createNativeQuery("Select * from HorariosAtencion where " +
                                          "**idPerson.id** = ?1 AND "+
                                          "DAY( fechaInicio) <= ?2 AND MONTH( fechaInicio ) <= ?3 AND YEAR( fechaInicio) <= ?4 AND "+
                                          "DAY( fechaFin) >= ?2 AND MONTH( fechaFin ) >= ?3 AND YEAR( fechaFin ) >= ?4 ORDER BY TIME(fechaInicio)", HorarioAtencion.class);
   busqueda.setParameter(1,person.getId());
   busqueda.setParameter(2, dia);
   busqueda.setParameter(3, mes);
   busqueda.setParameter(4, anno);
   return busqueda.getResultList();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-23T16:25:51.237

我遇到了同样的问题，我找到了解决方案，尝试从 em.createNativeQuery 行中删除“HorarioAtencion.class”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-04T20:04:25.237

> ...从行 [ArrayRecord(...

表示`HorariosAtencion`记录正常。有两个 ID、两个日期和所有布尔值。`1`可能是 ID 值。所以，我怀疑异常是指*相关* `Persona`实体。是否有`Persona`带有空 PK 的 s？

# perl - 在信号上运行脚本

> ID：14163826
> 
> 赞同：1
> 
> 时间：2013-01-04T19:43:43.437
> 
> 标签：perl

我正在尝试建立一个事件队列。我希望能够将记录添加到我的数据库中的事件队列表中，然后有一个单独的脚本通过并执行事件。

有没有办法让“Executer”脚本坐在那里等到它收到事件已添加到表中的信号？显然，我不能随机查询数据库，因为那样会非常浪费。

我知道这是一个广泛的问题，所以不要求牵手，只是在正确的方向上指出一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:58:10.200

如果您的数据库有任何解决此问题的方法，那么它将是特定于数据库的。例如，在 PostgreSQL 中，您可以使用`LISTEN`/ `NOTIFY`。

您还可以使用其他东西来通知执行器唤醒，从简单的系统信号（`$SIG{...}`各种）到 UDP 数据包，再到完整的作业队列和通知系统。

但实际上，我怀疑你需要担心这个。您是否真的计算过检查工作的琐碎选择需要多长时间？可能在单毫秒范围内。如果每隔几秒轮询一次数据库，性能影响可以忽略不计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T22:53:32.707

一些 DBMS 支持这一点。作为 MySQL 中的示例，您可以使用 UDF 并从触发器执行外部程序。您使用的是什么 DBMS？

# php - 复杂的 MySQL 查询的问题

> ID：14163838
> 
> 赞同：1
> 
> 时间：2013-01-04T19:44:38.690
> 
> 标签：php, mysql, mybb

对不起，我不能很好地解释这一点。我正在尝试编写一个 MyBB 插件，该插件会在几天后锁定一个线程。表中的重要列`threads`是`tid, fid, lastpost, lastpostuserid, closed, sticky`。`posts`桌子`pid, tid, fid, dateline`有。

`fid`我有一个需要运行的论坛列表 ( )。它需要更新那些论坛中在一定天数内没有响应的所有线程，忽略来自机器人发布的特定用户 ID 的帖子。它需要更新`lock`, `sticky`, `fid`（用于移动线程），或发布回复。

该插件在 PHP 中，所以如果我需要处理任何结果，我可以在那里完成。

我的问题是我对基本 SELECT 或 UPDATE 命令的 SQL 查询不是很熟悉，而且我不确定需要将其分解为哪些查询。

**更新：** 好的，这篇文章不是很清楚。

我有的表：

`threads`：`tid, fid, subject, prefix, icon, poll, uid, username, dateline, firstpost, lastpost, lastposter, lastposteruid, views, replies, closed, sticky, numratings, totalratings, notes, visible, unapprovedposts, attachmentcount, deletetime`

`posts`：`pid, tid, replyto, fid, subject, icon, uid, username, dateline, message, ipaddress, longipaddress, includesig, smilieoff, edituid, edittime, visible, posthash`

我需要的：

我需要锁定（将锁定字段更新为 1）、粘滞（将粘滞字段更新为 1）或移动（将 fid 更改为指定值）或回复（创建具有正确 tid 的新帖子等）具有指定 fid（论坛 id）的线程。

我遇到的麻烦是我不知道如何分解它。我知道 SQL 可以执行非常复杂的查询，从而避免我执行多个查询并解析结果。

伪代码：

1.  查找所有具有`fid`$fid 且`lastpost`少于 $days 天前且`lastposterid`不是 $userid 的线程（机器人发布的用户）

2.  对于`fid`具有`lastposterid`$userid 的线程，获取`tid`. 查找所有在`posts`that 中`tid`，`uid`不是 $userid 的帖子，最高`dateline`的是 $days 之前的帖子。存储`tid`.

3.  获取带有这些`tid`s 的线程 - 现在我们拥有所有线程的最后一个响应不是来自 bot 超过 $days 前的响应。

4.  如果指定了这些线程，则更新这些线程的 lock、sticky 或 fid 字段。

5.  如果设置了回复，则创建一个新帖子以响应该线程。

这样有意义吗？我知道我不擅长解释这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:36:13.267

我过去使用 mysql 完成了类似的任务，方法是使用 mysql 的“事件”以特定的时间间隔自动执行任务——比如 SQL 的 cron。

看看：[这里是教程](http://www.sitepoint.com/how-to-create-mysql-events/)，[这里是 MySQL 的文档](http://dev.mysql.com/doc/refman/5.5/en/create-event.html)。

**更新：**

我仍然不确定我是否完全理解你的问题，因为措辞有点令人困惑（你描述了一个名为线程的表，但随后提到“对于 fid 中的线程”），但我认为你想要完成的可以通过（有些复杂的）更新来完成。

这个问题可能应该移至 dba.stackexchange.com ......但您所要求的似乎是子查询的更新。标记为移至 dba。

# objective-c - os x 10.8 中 com.apple.loginitems.plist 的格式

> ID：14163841
> 
> 赞同：0
> 
> 时间：2013-01-04T19:44:54.960
> 
> 标签：objective-c, macos

os x 10.8 中 ~/Library/Preferences/com.apple.loginitems.plist 的格式是什么？我开发儿童控制应用程序并想检查不同的用户帐户启动项列表。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:50:10.650

这是一个[二进制属性列表](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man5/plist.5.html)。[`plutil(1)`](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man5/plist.5.html)如果要将其编辑为文本，可以使用将其转换为 XML。对于二进制编辑，请使用[`CFBinaryPList.c`](http://opensource.apple.com/source/CF/CF-550/CFBinaryPList.c).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:43:55.377

通常（也许总是？）你可以打电话

`[NSDictionary dictionaryWithContentsOfFile:[@"~/Library/Preferences/com.apple.loginitems.plist" stringByStandardizingPath]]`

并直接从 plist 文件加载字典。也就是说，当然，假设您是从 Cocoa 应用程序中执行此操作的。

# android - Android-Jquery Mobile/Phonegap App 底部的空白区域

> ID：14163843
> 
> 赞同：2
> 
> 时间：2013-01-04T19:44:59.537
> 
> 标签：android, cordova, jquery-mobile

我正在为 android 开发 jquery mobile/phonegap 中的应用程序。问题是屏幕底部的空白。屏幕截图会更好地帮助它。我在互联网上搜索过，但找不到合适的答案。

截图：http: [//img248.imageshack.us/img248/5922/jquerymobile.png](http://img248.imageshack.us/img248/5922/jquerymobile.png)

代码：

```
<!DOCTYPE html> 
<html> 
    <head> 
        <title>Slider Stop</title> 
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <script type="text/javascript" charset="utf-8" src="js/cordova-1.8.0.js"></script>
        <link rel="stylesheet" href="js/jquery.mobile-1.2.0.min.css" />
        <script type="text/javascript" src="js/jquery-1.81.js"></script>
        <script type="text/javascript" src="js/jquery.mobile-1.2.0.min.js"></script>

    </head> 
    <body>

        <div data-role="page" id="home">
        <div data-role="header">
            <h1>App</h1>
        </div>
            <div data-role="content">
                <p>
                <ul data-role="listview" data-inset="true" data-theme="c">
                    <li id="listitem">Swipe Right to view Page 1</li>
                </ul>
                </p>
            </div>
                 <div data-role="footer">
        <h4>Footer content</h4>
    </div>
        </div>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T19:53:08.540

尝试将“页脚” div 向下发送：

```
<div data-role="footer" data-position="fixed"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T20:10:08.720

我遇到了同样的问题，但是由于我正在适应的网络应用程序非常动态并且没有“页脚”div，因此我无法使用 cleondz 提供的解决方案。

我发现在我的情况下，我必须使用一种解决方法，如果滚动不是真的需要，就禁用滚动。

我用[这个链接](http://networkprogramming.wordpress.com/2012/11/13/selectively-prevent-vertical-scrolling-in-phonegap-app/ "选择性地防止 PhoneGap 应用程序中的垂直滚动")来实现它。

```
function isDraggablePage(e)
{
    if($(‘.ui-page-active’).attr(‘draggable’)==”true”)
    {
        return true;
    }
    return false;
}

function setDraggableProperty(e)
{
    if (!isDraggablePage(e))
    {
        e.preventDefault();
    }
}

window.addEventListener(‘touchmove’, setDraggableProperty(e), true); 
```

几年前我就不再使用 Javascript——我现在是一名 Android 开发人员——所以我不确定代码是否正常，但它可以工作。

# youtube-api - YouTube 数据 API v3，Web 应用程序，403 使用限制访问未配置

> ID：14163844
> 
> 赞同：5
> 
> 时间：2013-01-04T19:44:59.890
> 
> 标签：youtube-api

我在尝试访问 YouTube Data API v3 时遇到问题。这是我在发送有效请求时得到的 json 响应：

```
{
 "error": {
  "errors": [
   {
    "domain": "usageLimits",
    "reason": "accessNotConfigured",
    "message": "Access Not Configured"
   }
  ],
  "code": 403,
  "message": "Access Not Configured"
 }
} 
```

我的一个有效请求示例：

```
https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=5&q=funny&key=*my_valid_api_browser_key* 
```

这是我在 Google API 控制台中的服务设置的屏幕截图：

[http://imgur.com/GA747](https://imgur.com/GA747)

此外，我已经注册了应用程序，它有一个项目 ID 和客户 ID。我还尝试将上面示例中的 api_key 参数（我的有效请求 URL 之一）与有效的 api*服务器*密钥交换（我相信这仅在请求来自与密钥关联的 IP 地址时才有效，我可以这样做是因为我可以从正确的服务器发出 API 请求）；但是，我仍然得到完全相同的结果。

YouTube 数据 API v3 公开了吗？它似乎是在 2012 年 12 月 12 日发布的 YouTube 数据 API v3 视频时公开发布的：[http](http://www.youtube.com/watch?v=tlcWiP7OLFI) ://www.youtube.com/watch?v=tlcWiP7OLFI 。我想我可能是错的。

关于为什么我可以获得此特定响应而不是具有与我的查询匹配的预期视频列表的响应的任何其他想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-05T04:49:21.650

杰夫，您的电子邮件推荐解决了我的问题。我从引用字段中删除了所有行。现在，在我的 Google API 控制台中，在该项目的 API 访问屏幕上，标题为“浏览器应用程序的密钥（带有引用者）”的部分下有一个“引用者”字段，内容为 --> 引用者：允许任何引用者。

现在，我从 API 获得了准确的 JSON 响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-18T08:10:19.490

我遇到了同样的问题，删除所有引用者似乎并不能解决问题，因为我认为 YouTube API 可以保存您的 IP，并且之前添加了引用者并阻止它，我必须创建另一个没有任何引用者的 API 密钥，它解决了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-16T16:14:57.620

如果您使用 google api v3，这是解决该问题的简单方法，您只需`youtube api`通过 Google Console Dashboard 启用。[https://console.developers.google.com](https://console.developers.google.com)

# java - 如何在 Jython 中扩展 java TimerTask 并将参数传递给它？

> ID：14163850
> 
> 赞同：1
> 
> 时间：2013-01-04T19:45:05.943
> 
> 标签：java, jython, timertask, jython-2.5

我正在尝试`TimerTask`在 Jython 中扩展 a 以从某些传感器读取数据，然后每隔一秒通过网络发送该数据。为此，我需要将阅读器和服务器对象（以及一些事件对象）传递给`TimerTask`对象。当我尝试通过该`Timer.schedule`方法执行此操作时，出现此错误：

```
File "C:\Documents\src\iButtonHandler.py", line 61, in run
TypeError: org.python.proxies.iButtonHandler$IButtonTimerTask$1(): expected 0 args; got 4 
```

我收集该`Timer.schedule`方法调用 的运行方法`TimerTaskObject`，但为什么不先调用`__init__`呢？我也尝试将参数添加到我`TimerTask`的`run`方法中，但我得到了同样的结果。

这是我的代码：

```
class IButtonTimerTask(TimerTask):

    def init(self, reader, server, enterPressed, runComplete):
        self.__reader = reader
        self.__server = server
        self.__enterPressed = enterPressed
        self.__runComplete = runComplete

    def run(self):
        iButtonData = self.__reader.getAllValues()
        self.__server.sendData(iButtonData):
        if self.__enterPressed.isSet():
            self.cancel()
            self.__runComplete.set()

class IButtonHandler(threading.Thread):

    def __init__(self, port, container, enterPressedEvent, exitEvent):

        threading.Thread.__init__(self, name='iButton Handler Thread')
        print 'creating ibutton thread'
        self.__container = container
        self.__reader = IButtonContainerReader(self.__container)
        self.__containerId = self.__reader.getID()
        self.__server = MyServer(port, name=self.__containerId)
        self.__enterPressed = enterPressedEvent
        self.__exitEvent = exitEvent
        self.__runComplete = threading.Event()
        self.start()

    def run(self):
        print 'ibutton thread running'
        if self.__server.listen():
            timer = Timer()
            timer.schedule(IButtonTimerTask(self.__reader, self.__server, self.__enterPressed, self.__runComplete), 0, 1000)

        self.__runComplete.wait()
            print 'iButton handler %s exiting' %self.__containerId
            timer.cancel()
            self.shutDown()
            return 
```

我看到在纯 Java 中，您只需扩展`TimerTask`并调用`new MyTimerTask(...)`该`Timer.schedule`方法。我似乎无法让它在 Jython 中以这种方式工作。我究竟做错了什么？

谢谢你看看这个！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:03:15.633

你`init`应该被称为`__init__`：

```
class IButtonTimerTask(TimerTask):

    def __init__(self, reader, server, enterPressed, runComplete):
        ^^    ^^ 
```

# mathematical-optimization - C# 中的 Solver Foundation 比 Excel 的求解器有更大的错误

> ID：14163852
> 
> 赞同：1
> 
> 时间：2013-01-04T19:45:10.957
> 
> 标签：mathematical-optimization, solver, linear-programming, ms-solver-foundation

我开始在 WPF/C# 应用程序中使用 Solver Foundation，它应该替换解决线性问题的 Excel 工作表，如下所示：

*   混合 A：（20% A + 70% B + 10% C）
*   混合 B：（35% A + 65% C）
*   混合 C：（10% A + 80% B + 10% D）

我需要多少每种混合物才能尽可能接近（15% A + 70% B + 10% C + 5% D）。

非常简单，即使对于 Excel。所以...我在 OML 字符串中创建了这个模型，并使用 Solver Foundation 对其进行求解，但结果与我在 Excel 中得到的结果不同，并且在每种情况下，我得到的二次误差在 Solver Foundation 结果中都更大（在 Excel 表中检查）。

有什么方法可以配置求解器以获得与 Excel 中相同的结果？如果您需要查看 OML，请询问，我会更新问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:22:31.983

您确定要尽量减少相同的结果吗？

也许这两种方法使用了不同的差异测量。

例如，您似乎正在测量 R^2 作为您的解决方案，这是您的 C# 代码用来衡量与完美距离的度量吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T02:00:35.647

我试过你的问题。如下所示，MSF 产生了相似的残差，如果不是更小的话。

我的 Microsoft Solver Foundation 的 C# 代码：

```
using System;
using Microsoft.SolverFoundation.Services;

namespace akMSFStackOverflow
{
    class Program
    {
        static void Main(string[] args)
        {
            SolverContext context = SolverContext.GetContext();             

            Decision a = new Decision(Domain.RealNonnegative, "A");
            Decision b = new Decision(Domain.RealNonnegative, "B");

            Model model = context.CreateModel();
            model.AddDecisions(a, b);

            Term c = 1.0 - a - b;                      //  a + b + c sum up to 100%
            Term errA = (a * 0.20 + b * 0.35 + c * 0.10) - 0.15;  //  resulting percentage of A should be 15%
            Term errB = (a * 0.70 + c * 0.80) - 0.70;
            Term errC = (a * 0.10 + b * 0.65) - 0.10;
            Term errD = (c * 0.10)            - 0.05;
            Term goal = errA * errA + errB * errB + errC * errC + errD * errD;

            //  ingredients sum up to 100% of the required volume
            //  constraint is not necessary as c is defined to be 1 - a - b
            model.AddConstraints("total", 1.0 == a + b + c);

            model.AddGoal("goal", GoalKind.Minimize, goal);

            // could specify the IPM solver, as we have a quadratic goal 
            Solution solution = context.Solve();

            Report report = solution.GetReport();
            Console.WriteLine("a={0} b={1}", a, b);
            Console.Write("{0}", report);
        }
}
} 
```

结果：

```
goal: 0,000173076935386814

A: 0,369230770226158
B: 0,0846153845073738 
```

Excel 2010 求解器提出：

```
goal: 0.00017308

A: 0.36923685
B: 0.08461443 
```

# c++ - 什么时候修改链表？

> ID：14163856
> 
> 赞同：2
> 
> 时间：2013-01-04T19:45:26.517
> 
> 标签：c++, c, list, linked-list

所以我对链表如何工作以及它们如何在 C++ 中保持引用有点困惑。

例如，我有一个列表，可以说**myList**，我想打印它的项目。
我从学校知道我必须将我的列表复制到另一个列表以在打印过程后保持**myList相同。**

```
Node* n;
n = myList;
while(n)
{
    printf("%d ",n->val);
    n=n->next;
} 
```

好的，所以我在另一个列表 n 中有一个 myList 的副本（具有相同的指针）。在我遍历 n 之后， myList 是相同的，但具有与 n 相同的指针。

如果 n 改变了为什么 myList 没有改变（相同的指针，对吗？）？

现在如果我说：

```
Node* n;
n = myList;
n->next = NULL;//or n->next=another node -doesn t matter 
```

现在在第二个例子中 myList 也被改变了。

你能给我解释一下吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T19:56:33.070

我认为您对实际列表结构和对列表结构的引用之间的区别有些困惑。

在您的第一个示例中，关于遍历列表，您在遍历之前基本上有这种情况，您有两个对同一个列表的引用：

```
o-->o-->o-->o-->o-->NULL
^
|
 \_ myList, n 
```

遍历列表后看起来像这样：

```
o-->o-->o-->o-->o-->NULL
^                   ^
|                   |
 \_ myList           \_ n 
```

如果您没有复制对列表头部的引用来遍历它，那么您将在遍历后得到以下结果：

```
o-->o-->o-->o-->o-->NULL
                    ^
                    |
                     \_ myList 
```

因为您不再有指向列表头部的指针，所以您无法访问该列表。

在你的第二个例子中，你有这个：

```
o-->o-->o-->o-->o-->NULL
^
|
 \_ myList, n 
```

你把它变成这样：

```
 _________________
 /                 \
o   o-->o-->o-->o-->NULL
^
|
 \_ myList, n 
```

这种转换改变了列表的实际结构，这将反映在对该列表的所有引用中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T19:48:19.483

如果您更改指针`n`，它将与指针的值`mylist`不同......它们是两个独立的指针，最初指向同一个对象，因为您`n`从 in 的值的副本生成 的初始值`mylist`。

话虽如此，如果`n`自初始化以来，您还没有从 in 的值调整 的值`mylist`，那么这两个指针指向同一个对象。如果您取消引用任何一个指针并修改它们指向的对象，那么两个指针，因为它们指向同一个对象，将反映对所指向对象的更改。

最后，因为你只是简单地复制`mylist`into的值`n`，所以只有一个链表......你没有制作列表的“深度”副本。因此，如果您修改任一指针指向的实际列表节点，则实际列表将被修改。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-04T19:48:36.963

`n = myList;``n`指向与 相同的元素`myList`。它们本质上是相同的——除了你可以重新分配之外`n`，但是当它们指向同一个位置时，你并没有真正制作列表的副本——只是指向第一个节点的指针的副本。

因为它们指向同一个位置，所以`n->next = NULL;`会修改这两个列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T19:53:26.037

您没有创建单独的列表，也没有修改原始列表；您只需使用`n`to 依次指向每个元素遍历列表（有点像通过数组索引）。

# xsd - 如何从 http wsdl url 访问 xsd 文件？

> ID：14163866
> 
> 赞同：2
> 
> 时间：2013-01-04T19:46:07.150
> 
> 标签：xsd, wsdl, soapui, filenotfoundexception

我有 wsdl 网址。但是通过代码测试它是一个很大的问题。所以找到了 SoapUI，并认为它可以模拟数据以便轻松调用它并找到正确的参数集。我将浏览器的 wsdl url 输出保存到 file.wsdl 并加载到 SoapUI 中，但收到 xsd 文件丢失的错误。但是如何找出 xsd 文件呢？有没有办法从 http url 中提取 xsd 文件并将其放在与 wsdl 相同的文件夹中。?

我以前没有使用过 Web 服务，感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T03:38:49.980

严格处理您的问题是在同一文件夹中捕获 XSD 内容...

理论上，询问涉及两个主要步骤：

*   通过递归地遵循所有外部引用（wsdl:import 和/或 xsd:include/xsd:import 语句）下载文件。
*   修复文件之间的所有引用，如果原始文件不在同一个文件夹中。

如果您有 .NET 平台，则可以使用[disco.exe](http://msdn.microsoft.com/en-us/library/cy2a3ybs%28v=vs.100%29.aspx)。它会自动下载，但不会修复 XSD 文件之间的引用。

当我必须这样做时，我使用[QTAssistant](http://www.paschidev.com)（我与它相关联）。在 WSDL 组下的工具选项卡中有一个实用程序。

![在此处输入图像描述](../Images/9ed390e14eed27a017d2a1cc36c2afcd.png)

根据需要填写提示，然后按**Load**。无论找到什么文件，都将列在**External** ... 列表中。

![在此处输入图像描述](../Images/095991995c3f2f125a243e6cedb79616.png)

当文件和路径符合您的任何期望时，按 OK，您就完成了。

# java - 从静态方法错误消息中引用的非静态方法？

> ID：14163869
> 
> 赞同：-4
> 
> 时间：2013-01-04T19:46:26.677
> 
> 标签：java, static

编写一个程序来计算单利，并且必须使用单独的方法来返回计算并进行计算。

```
public class Unit7B
{
   public static void main ( String [ ] args ) 
   {
       double p = Input.getDouble ("Enter the principal");
       double i = Input.getDouble ("Enter the interest rate");
       double n = Input.getDouble ("Enter the number of years");

       double result = simpleInterest( p, i, n); 
       System.out.println (result);
   }

   public double simpleInterest (double p, double i, double n)
   {
       return ( p * ( Math.pow ( 1.0 + i , n ) ));
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T19:49:52.397

您需要标记`simpleInterest`为静态方法：

```
public static double simpleInterest (double p, double i, double n)
{
    return ( p * ( Math.pow ( 1.0 + i , n ) ));
} 
```

这是因为非静态方法需要类实例，而静态方法不需要。为了使用您的非静态方法，您必须使用以下内容创建类：

```
Unit7B unit = new Unit7B();
unit.simpleInterest(p, i, n); 
```

# iphone - Default-568h@2x.png 正在缩放

> ID：14163871
> 
> 赞同：1
> 
> 时间：2013-01-04T19:46:36.487
> 
> 标签：iphone, ios

我有一个 640 x 1136 像素的 Default-568h@2x.png 图像。它在 4" 模拟器上显示不正确，显示启动图像时缩放了一些。不是很多，但图像有一个圆圈，并且清楚地显示为一个椭圆形。

“应用程序启动期间隐藏”复选框不会更改拉伸。（状态栏样式默认，并且在检查复选框并未检查时可见启动图像时，它在启动图像时不会显示。）

我无法显示图形，客户不喜欢这样，但圆圈是一个轻微的椭圆形。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T20:18:30.690

确保您使用 SDK 6.0 运行 4'' 模拟器。iOS 5.1 不支持 4'' 屏幕，所以会发生奇怪的事情（拉伸，或者在某些情况下是双状态栏）。

可悲的是，模拟器将允许您同时选择 SDK 5.1 和 4'' 设备。

# objective-c - 是否可以使用 3 个文本字段制作 UIAlertView？

> ID：14163879
> 
> 赞同：0
> 
> 时间：2013-01-04T19:47:05.900
> 
> 标签：objective-c, cocoa-touch, ios6, uialertview

当用户将联系人添加到他的地址簿时，我需要输入名字、中间名和姓氏。

PS： **最后我找到了 control**，它允许：[https ://github.com/eaigner/CODialog](https://github.com/eaigner/CODialog)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:15:24.983

> 你能推荐一些我可以用的东西吗？

我会通过[`presentViewController:animated:completion:`(ios 5+)](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW75)或[`presentModalViewController:animated:`ios <5 (deprecated)呈现模态视图](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/doc/uid/TP40006926-CH3-SW29)

如果你想坚持使用 alertview，你可以在[cocoacontrols.com](http://www.cocoacontrols.com/controls/tweetbot-like-uialertview-and-uiactionsheet-replacement)上找到替代品。

* * *

[从文档：](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIAlertView_Class/UIAlertView/UIAlertView.html#//apple_ref/doc/uid/TP40006802-CH3-DontLinkElementID_2)

> **子类化注释**
> UIAlertView 类旨在按原样使用，不支持子类化。此类的视图层次结构是私有的，不得修改。

添加文本视图正在修改视图层次结构，并可能导致应用商店提交被拒绝。

* * *

使用[此类别](http://www.glimsoft.com/01/07/how-to-inspect-subviews-hierarchy-of-any-uiview/)，您可以轻松检查任何视图的视图层次结构。（或`po [alertView recursiveDescription]`在调试器控制台上使用）

**注意：这是绝不应该在实际应用程序中使用的代码。**

```
UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"title"
                                                        message:@"msg"
                                                       delegate:nil
                                              cancelButtonTitle:@"ok"
                                              otherButtonTitles: nil];

    UITextField *textFiled = [[UITextField alloc] initWithFrame:CGRectMake(12.0, 45.0, 260.0, 25.0)];
    [textFiled setText:@"dont try that at home"];
    [alertView addSubview:textFiled];
    [alertView show];
    [alertView printSubviewsWithIndentation:4]; 
```

我们将记录这个层次结构

```
[0]: class: 'UIImageView'
[1]: class: 'UILabel'
[2]: class: 'UILabel'
[3]: class: 'UIAlertButton'
   [0]: class: 'UIImageView'
   [1]: class: 'UIButtonLabel'
[4]: class: 'UITextField' 
```

导致这个

![alertview 乱七八糟的截图](../Images/dc4d2230f13ac8681013f2e63ae9b760.png)

textView 只是放置在所有其他视图之上。实际上它必须放在`[2]: class: 'UILabel'`. 我们可以通过摆弄视图层次结构（循环并重新排列它）或通过子类化 UIAlertView 和覆盖来做到这一点`layoutSubviews`。这两件事，苹果都不想要。

所以总结一下，如果涉及到 UIAlertView，你有 3 个选项：

1.  照原样接受它（请记住，某些形式的输入可通过预定义的样式获得）
2.  使用其他一些视图控制器来呈现模态视图
3.  使用替代品。但不是 UIAlertView 的子类。

* * *

* * *

**但是，如果有人仍然相信弄乱视图层次结构*是*一个好主意并且比我和苹果的工程师更了解**，这里是代码

```
UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"title"
                                                    message:@"Please read carefully the next 3 lines"
                                                   delegate:nil
                                          cancelButtonTitle:@"ok"
                                          otherButtonTitles: nil];

[alertView show];

CGFloat height = 25.0;

UILabel *msgLabel = [[alertView subviews] objectAtIndex:2];

UITextField *textField1 = [[UITextField alloc] initWithFrame:CGRectMake(msgLabel.frame.origin.x, msgLabel.frame.origin.y+msgLabel.frame.size.height, msgLabel.frame.size.width, height)];
[textField1 setText:@"dont try that at home"];
[textField1 setBackgroundColor:[UIColor whiteColor]];
UITextField *textField2 = [[UITextField alloc] initWithFrame:CGRectOffset(textField1.frame, 0, height + 4)];
[textField2 setText:@"REALLY! dont try that at home"];
[textField2 setBackgroundColor:[UIColor whiteColor]];

UITextField *textField3 = [[UITextField alloc] initWithFrame:CGRectOffset(textField2.frame, 0, height + 4)];
[textField3 setText:@"REALLY! dont try that at home"];
[textField3 setBackgroundColor:[UIColor whiteColor]];

NSArray *followringSubviews = [[alertView subviews] subarrayWithRange:NSMakeRange(3, [[alertView subviews] count] - 3)];
[followringSubviews enumerateObjectsUsingBlock:^(UIView *view, NSUInteger idx, BOOL *stop) {
    view.frame = CGRectOffset(view.frame, 0, 3*height);

}];
[alertView addSubview:textField1];
[alertView addSubview:textField2];
[alertView addSubview:textField3];

alertView.frame = CGRectUnion(alertView.frame, CGRectOffset(alertView.frame, 0, 80)); 
```

结果：

![在此处输入图像描述](../Images/d3d32314f9b78b6b150f4e3264b7ddce.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:48:54.087

你希望你可以这样做。

```
UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"title" message:@"msg" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:nil];
UITextField *txtField = [[UITextField alloc] initWithFrame:CGRectMake(12.0, 45.0, 260.0, 25.0)];
txtField.text=@"anoop here";
[alertView addSubview:txtField];
[alertView show]; 
```

编辑：

即使是自定义视图也可以完成您的工作。（正如您在我之前的编辑中看到的那样。）

创建具有自定义形状大小、颜色、文本大小等的自定义视图，然后将其显示为模型窗口。

编辑2：

上面的代码不会在 iOS7 上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-19T09:37:57.937

使用附件视图属性进行警报视图

```
 UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"change Password " message:@"" delegate:nil cancelButtonTitle:@"NO" otherButtonTitles:@"YES", nil];
     CGRect frame = CGRectMake(0, 0, self.view.frame.size.width, 300);
     UIView *view = [[UIView alloc] initWithFrame:frame];

    UITextField* text1 = [[UITextField alloc] initWithFrame: CGRectMake(10, 10,self.view.frame.size.width-125, 30)];
    text1.backgroundColor=[UIColor whiteColor];
    UITextField* text2 = [[UITextField alloc] initWithFrame: CGRectMake(10, 45, self.view.frame.size.width-125, 30)];
    text2.backgroundColor=[UIColor whiteColor];
    UITextField* text3 = [[UITextField alloc] initWithFrame: CGRectMake(10, 80, self.view.frame.size.width-125, 30)];
    text3.backgroundColor=[UIColor whiteColor];
    text1.layer.borderColor=[UIColor lightGrayColor].CGColor;
    text1.layer.borderWidth=1;
    text2.layer.borderColor=[UIColor lightGrayColor].CGColor;
    text2.layer.borderWidth=1;
    text3.layer.borderColor=[UIColor lightGrayColor].CGColor;
    text3.layer.borderWidth=1;
    text1.placeholder=@"  Enter  old password ";
   [view addSubview:text1];
   [view addSubview:text2];
   [view addSubview:text3];
    [alertView setValue:view forKey:@"accessoryView"];
    view.backgroundColor = [UIColor whiteColor];
    [alertView show]; 
```

# r - 使用 ddply 时拆分列

> ID：14163882
> 
> 赞同：3
> 
> 时间：2013-01-04T19:47:33.340
> 
> 标签：r, plyr

我正在使用 ddply 并且坚持输出的排列方式。这是我正在使用的代码。如您所见，最终输出 (timeseries.out) 在一列中包含原始数据和预测数据。

```
data <- data.frame(Product = c(rep("Shampoo",5),rep("Soap",5)),
               TSdata = rnorm(10, 1, 10))

tsfun <-function(y){
  arima.out <- arima(y$TSdata)
  arima.fc <- predict(arima.out, n.ahead=5)
  return (data.frame(c(y$TSdata, arima.fc$pred)))
}

library(plyr)
timeseries.out <- ddply(data, .(Product), tsfun) 
```

我真正想要的是一列中的原始数据，以及另一列中的预测数据，其中 NA 填充空白点。

```
data.out <-data.frame(Product = timeseries.out[1:10,1],
       Data = c(timeseries.out[1:5,2], rep("NA",5)),
       Forecast = c(rep("NA",5),timeseries.out[6:10,2])) 
```

如何更改 tsfun 的返回值，使其看起来像 data.out？我尝试了很多事情，但要么得到错误，要么得到错误的结果。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:07:19.573

通过更改返回值，我能够得到我想要的输出。感谢 joran 让我思考正确的道路。

对 return 语句的简单修改，因此输出两列而不是一列

```
return (data.frame(y$TSdata, as.numeric(arima.fc$pred))) 
```

修改返回值以适应具有 NA 的两列的所需输出

```
return (data.frame(c(y$TSdata, rep(NA, length(arima.fc$pred))),
                   c(rep(NA, length(y$TSdata)), arima.fc$pred))) 
```

# php - 保存元组或等效于会话

> ID：14163886
> 
> 赞同：0
> 
> 时间：2013-01-04T19:47:52.327
> 
> 标签：php, session, tuples, session-variables

当用户选择一个项目时，我必须将一组唯一项目存储到 $_SESSION。每个项目没有唯一的 ID，我使用 itemName 和 storeID 的组合。将每个元组（或类似的对象/固定数组）存储到 Session 中的数组的合适方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T19:51:20.650

我会让 foreach 存储一个数组，其中包含该商店中所有选定的项目。例如：

```
$_SESSION['items'] = array(
                       "store1" => array("item1", "item2",...),
                       "store2" => array("item1", "item2",...),
                       ...
); 
```

# javascript - 当您要搜索具有特定值的多个 HtmlObject 时，哪个 javascript 代码更有效？

> ID：14163887
> 
> 赞同：1
> 
> 时间：2013-01-04T19:48:07.347
> 
> 标签：javascript, jquery, performance

我试图找出哪个 javascript 代码更有效，例如当我搜索多个 JavaScript 跨度时。

使用 jquery 的这种模式：

```
$('span[value='+value+']') 
```

或使用标准 javascript 的此模式：

```
function gEBI(id) {
    return document.getElementById(id);
}
var spans = gEBI("content").getElementsByTagName('span'); 
for (i = 0; i < this.spans.length; i++)
 { 
     if (this.spans[i].getAttribute("value") == valueThis ) { // operations } 
 } 
```

还有一个问题，搜索通常是更有效的 jquery 或标准 JavaScript

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T22:01:40.467

在现代浏览器（IE8 及更高版本）中，jQuery 将比手动搜索 DOM 快得多。

现代浏览器支持`querySelector`and `querySelectorAll`，它允许使用 CSS 查询找到节点，并且比旧的 DOM 方法快得多。如果这些功能可用，jQuery 会使用这些功能，因此它可以从速度提升中受益。

但是，如果您真的追求速度，不需要古老的浏览器支持，并且只使用基本的 CSS2.1 级别的查询（例如您那里的查询），请直接使用 querySelector。这将比 jQuery 更快：

```
// If you only need just one
var span = document.querySelector('span[value='+value+']');
// If there's more than one span like that
var spans = document.querySelectorAll('span[value='+value+']'); 
```

[http://caniuse.com/#search=querySelector](http://caniuse.com/#search=querySelector)

# tomcat - Keytool 不断给 SHA256 sigalg 而不是请求的 alg

> ID：14163889
> 
> 赞同：6
> 
> 时间：2013-01-04T19:48:15.333
> 
> 标签：tomcat, ssl, keytool, csr

我在 java 中使用 Keytool 来生成密钥库/CSR 以提交给证书颁发机构。

我的 CA 只支持 MD5withRSA 和 SHA1withRSA

每次我使用 keytool 创建密钥库并导出 CSR 时，我都会得到一个 SHA256withRSA 签名算法。

我已经尝试手动设置 -sigalg 但无论我尝试将其设置为 md5 还是 sha1，它都会一直转到 sha256

有人可以告诉我我做错了什么

```
keytool -genkey -alias server -keyalg RSA -sigalg SHA1withRSA -keysize 2048 -keystore www_mydomain_com.jks -dname "CN=www.mydomain.com,OU=it, O=mycompany, L=thecity, ST=thestate, C=US" && keytool -certreq -alias server -file www_mydomain_com.csr -keystore www_mydomain_com.jks

keytool -genkey -alias server -keyalg RSA -sigalg MD5withRSA -keysize 2048 -keystore www_mydomain_com.jks -dname "CN=www.mydomain.com,OU=it, O=mycompany, L=thecity, ST=thestate, C=US" && keytool -certreq -alias server -file www_mydomain_com.csr -keystore www_mydomain_com.jks 
```

这两个命令都创建了一个显示 SHA256withRSA 的 csr

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T20:20:25.693

您应该将 -sigalg SHA1WithRSA 参数添加到实际生成 CSR 的第二个 keytool 调用中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-05T20:13:11.633

$ keytool -genkey -alias selfsignedcert -keyalg RSA -sigalg **SHA1withRSA -keypass** privatepassword -keystore identity.jks -storepass password -validity 365

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-21T11:10:50.600

您必须在创建 CSR（而不是密钥库）时分配 sigalg：

```
$ keytool -certreq -alias <alias> -keystore <keystore>.jks -file <file>.csr -sigalg SHA1WithRSA 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-12T03:09:36.173

sha1 已过期且仅在 2016 年之前有效。您必须升级到 sha2。试试看，让我知道这是否能解决您的问题。-杰德A

# html - 浮动标题到两个不同的 div

> ID：14163896
> 
> 赞同：1
> 
> 时间：2013-01-04T19:48:32.660
> 
> 标签：html, css

这是一个演示问题的小提琴[http://jsfiddle.net/mjmitche/MMWXj/1/](http://jsfiddle.net/mjmitche/MMWXj/1/) 我有一个“关于”部分和一个“技能”部分。如果您单击其中任何一个部分的标题，则会出现一个显示相关内容的下拉菜单。如果“关于”是打开的，那么点击打开“技能”就会关闭。这里“关于”已被点击...

```
 About

   this is About content revealed by click

 Skills 
```

而这里的“技能”已被点击

```
About
Skills

this is Skills content revealed by click 
```

与其将“关于”标题和“技能”标题堆叠在一起，我希望它们并排浮动，但每个 div 中内容的行为相同，就像这样（如果技能标题有被点击）

```
About Skills

   this is Skills content revealed by click 
```

这是基本的 html 结构（我暂时保留了一些不必要的位，因为担心一旦找到问题的解决方案，将这些位重新插入会改变事情）。

如果您能解释如何实现这一目标，我将不胜感激...

```
<div id="who">
    <h1 class="who closed">About</h1>
    <div class="content">
      <div id="latest" class="three_columns">

        <p>
          <strong>Boo!</strong>
        </p>

      </div>
    </div>
    </div>

 <div id="what">
    <h1 class="what closed">Skills</h1>
    <div class="content">
      <div id="consulting" class="three_columns">

        <p>
          <strong>Boo2!</strong>
        </p>

      </div>
    </div>
    </div> 
```

-- CSS

```
div.content { width: 500px; overflow: hidden; margin-left: auto; margin-right: auto;} /* This clears the floats of the child elements, see http://www.sitepoint.com/blogs/2005/02/26/simple-clearing-of-floats/ */
div.three_columns { float: left; width: 290px; margin: 0px; padding: 10px;  }

#latest{
    padding-left: 30px;
}

/* General headline styles */
/*h1 { font-size: 40px; margin: 0px; padding: 10px; cursor: pointer; }
h2 { font-size: 16px; }*/

h1.who, h1.what, h1.how {
    margin-left: auto;
    margin-right: auto;
    width: 80%;
    text-align: center;

}

h2.who, h2.what, h2.how {
    margin-left: auto;
    margin-right: auto;
    width: 80%;
    text-align: center;
}

.blue { color: #00b9f1; }
.green { color: #99cc00; }

/* General link styles - Colors: pink #ec008b, blue #00b9f1, dark gray #222, light gray #ebebeb; */
/*a { color: #222222; text-decoration: none; }
h1.hover, a:hover { color: #ec008b; cursor: pointer; }
h1.active, a:active { color: #00b9f1; cursor: pointer; }*/

/* General list styles */
ul { margin: 0px; padding: 0px; }
ul li { margin: 0px; padding: 0px; list-style: none; }

#cent {

    margin-left: auto;
    margin-right: auto;
    width:
}

/*** Styles for the main content sections ***/
div#who, div#what, div#how { height: 100%; margin: 0px; padding: 0px; } 
```

JS

```
$(function() {

    // Hide all closed sections
    $(".closed").next().hide();

    // Add slide functions to all sections (h1 elements)
    $("h1").click(function () {
        if($(this).is('.closed')) {
            $(".open").delay(200, function() { $(this).next().slideUp("slow"); });
            $(this).delay(200, function() { $(this).next().slideDown("slow"); });
            $("h1").deactivateElement();
            $(this).activateElement();
        }
        else if($(this).is('.open')) {
            $(this).delay(200, function() { $(this).next().slideUp("slow"); });
            $(this).deactivateElement();
        }
    });

    // Add a function to toggle the CSS styles
    $("a#style_switcher").click(function () { flag = !flag; dark.disabled = flag; });

    // Add hover functions to all sections (h1 elements)
    $("h1").hover(function() { $(this).addClass('hover'); }, function() { $(this).removeClass('hover'); });

    // Delay the call to (slide) functions
    // => http://james.padolsey.com/javascript/jquery-delay-plugin/
    $.fn.delay = function(time, callback) {
        jQuery.fx.step.delay = function() {};
        return this.animate( { delay: 1 }, time, callback);
    }

    // Set an element class to 'open' or 'closed'
    $.fn.activateElement = function() { switchClasses($(this), 'open', 'closed'); }
    $.fn.deactivateElement = function() { switchClasses($(this), 'closed', 'open'); }

    // Do this at start
    initialize();
    $(".who").delay(600, function() { $(this).next().slideDown("slow"); });
    $(".who").activateElement();
});

// Initialization function
function initialize () {
    flag = true;
    dark = document.getElementById("dark_css");
    dark.disabled = flag;

    // Set year in copyright section
    document.getElementById('year').innerHTML = (new Date()).getFullYear();
}

// Utility function for switching/toggling classes
function switchClasses (element, classToAdd, classToRemove) {
    element.addClass(classToAdd);
    element.removeClass(classToRemove);
    // De/Activate the given element
    (classToAdd == 'open') ? element.addClass('active') : element.removeClass('active');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:57:44.087

将 last 和 First CSS 类更改为：

```
/*** Styles for the main content sections ***/
div#who, div#what, div#how 
{ 
   height: 100%;
   margin: 0px;
   padding: 0px;
   float:left; // new
}

div.content 
{ 
   position:absolute; //new
   width: 500px;
   overflow: hidden;
   margin-left: auto;
   margin-right: auto;
} 
```

已编辑！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:52:43.443

尝试使用[jQuery Tabs](http://jqueryui.com/tabs/)，听起来像您正在寻找的功能。

下面是一个示例，说明您可以重组 HTML 以使用 jQuery 选项卡：

```
<div class="tabs">
  <ul>
    <li>
      <a href="#who">About</a>
    </li>
    <li>
      <a href="#what">Skills</a>
    </li>
  </ul>
  <div id="who">
    <div class="content">
      <div id="latest" class="three_columns">

        <p>
          <strong>Boo!</strong>
        </p>

      </div>
    </div>
  </div><!-- #who -->
  <div id="what">
    <div class="content">
      <div id="consulting" class="three_columns">
        <p>
          <strong>Boo2!</strong>
        </p>
      </div>
    </div>
  </div><!-- #what -->
</div><!-- .tabs --> 
```

# java - 用整数终止进程

> ID：14163898
> 
> 赞同：0
> 
> 时间：2013-01-04T19:48:34.500
> 
> 标签：java, arrays

我的任务是获取数字并将它们与它们的出现一起打印。我必须用整数终止进程，`0`但我用字符串来做`x`。

这是我的代码：

```
import java.util.Scanner;

public class yasf{
    public static void main(String[] args) {
        int[] numbers = new int[101];
        int num;
        Scanner scan = new Scanner(System.in);
        System.out.println("Enter a number between 0-100 inclusive. x terminates:");
        String numString = scan.nextLine();

        // The input treminated with x;
        while (!numString.equalsIgnoreCase("x")) {
            num = Integer.parseInt(numString);
            numbers[num] = numbers[num] + 1;
            System.out.println("Enter a number between 0-100 inclusive. x terminates:");
            numString = scan.nextLine();
        }
        for (int i = 0; i <= 100; i++) {
        if (numbers[i] != 0 && numbers[i] == 1)
            System.out.println(i + ": " + numbers[i] + " time");
        else if (numbers[i] > 1 && numbers[i] != 0)
            System.out.println(i + ": " + numbers[i] + " times");
        else
            System.out.print("");
    }

} 
```

}

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:57:04.350

如果您仍想接受“0”作为有效输入，请删除第一个实例

```
System.out.println("Enter a number between 0-100 inclusive. x terminates:");
String numString = scan.nextLine(); 
```

并使您的主 while 循环看起来像这样

```
do{
  System.out.println("Enter a number between 0-100 inclusive. x terminates:");
  numString = scan.nextLine();
  num = Integer.parseInt(numString);
  numbers[num] = numbers[num]+1;
}while (!numString.equalsIgnoreCase("0")); 
```

# sql - 为 postgres 配置 zend 应用程序

> ID：14163905
> 
> 赞同：1
> 
> 时间：2013-01-04T19:49:01.060
> 
> 标签：sql, postgresql, zend-framework, zend-db-table

我一直使用 Application_Model_DbTable 来处理数据库，但我使用的是 MySql。我像这样配置了我的 application.ini：

```
resources.db.adapter = PDO_MYSQL 
resources.db.params.host = localhost
resources.db.params.username = admin    
resources.db.params.password = 12345
resources.db.params.dbname = daedu
resources.db.params.charset = utf8 
```

并使用了 dbtable 的标准函数，例如 fetchAll 或 insert。如何获得相同的结果，但使用 PostgreSQL？

我已经安装了 PostgreSQL，并且通过 pgAdmin III 我已经制作了数据库和表。问题是如何使用 db-table 将它连接到 Zend？

我是这样配置的：

```
resources.db.adapter = PDO_PGSQL 
resources.db.params.host = localhost
resources.db.params.port = 5432
resources.db.params.username = postgres 
resources.db.params.password = 12345
resources.db.params.dbname = postgres
resources.db.params.charset = utf8 
```

我通过 dbtable 使用它，如下所示：

```
class Application_Model_DbTable_Postrgres extends Zend_Db_Table_Abstract
{
    protected $_name = 'postgres';

    public function insert(){
        $data = array(
            'name' => "dan"
        );

        $this->insert($data);
    }
} 
```

在控制器中：

```
$f = new Application_Model_DbTable_Postrgres();
$f->insert(); 
```

但是页面没有打开（错误是：net::ERR_EMPTY_RESPONSE）并且表中没有新的插入，当我尝试`fetchAll`在 db 表中时，我得到应用程序错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:12:29.573

解决了问题！如何？我在 public/index.php 文件中打开了开发模式：

```
// Define application environment
defined('APPLICATION_ENV')
    || define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 'development')); 
```

错误显示我的表中没有 Prymary Key。我用 SQl 添加了它，它是！一切正常！所以这种将 Zend 连接到 PostgreSQL 的方式是完全正确的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T21:19:03.007

```
resources.db.adapter = PDO_PGSQL 
```

您需要安装[PDO_PGSQL](http://php.net/manual/en/ref.pdo-pgsql.php)。

# mysql - SQL推荐系统

> ID：14163907
> 
> 赞同：1
> 
> 时间：2013-01-04T19:49:05.320
> 
> 标签：mysql, sql, system, recommendation-engine

目前，我已经从 last-fm 数据集中的一个子集中过滤掉了所有噪音，并且我正在尝试在这个子集之上构建一个推荐系统。

基本上我的数据集在数据库中包含以下内容：

> 用户名 | 艺术家 | 艺术家 | 全剧

例子：

```
00000c289a1829a808ac09c00daf10bc3c4e223b 8bfac288-ccc5-448d-9573-c33ea2aa5c30 红辣椒 691
```

我想要实现的是所有用户的列表以及他们听过特定艺术家的全部播放。例如，包含红辣椒的整数 (totalplays) 的列表。问题在于，当我查询以下内容时：

`SELECT userid, totalplays FROM dataset WHERE artist = 'red hot chili peppers'`我只会获取至少听过红辣椒 1 次的用户（数据集不包含从未听过艺术家的用户条目）。

我希望它也包含这些整数，以便将其中两个结果集与 Pearson 相关性进行匹配，以便我可以构建推荐系统。（我已经实现了这个）。

我尝试构建一个临时表，其中包含所有不同的用户 ID，然后使用数据集上的内部连接更新播放量；但不幸的是，这需要太长时间。

我听说过`IF EXISTS`SQL 中的可能性，但我并不熟悉它们。谁能指出我正确的方向？

再说一遍：我想得到一个用户的总播放量（不需要计算总和，因为这我已经完成了！）例如，名为“红辣椒”的艺术家。即使用户在数据集中没有收听他们的记录（因此为该用户返回 0）。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T19:56:00.423

试试这个

```
SELECT A.USERID, coalesce(X.totalplays,0) totalplays
FROM (SELECT DISTINCT USERID FROM dataset) A
LEFT OUTER JOIN  (
SELECT userid, totalplays FROM dataset 
WHERE artist = 'red hot chili peppers') X ON A.userid = X.userid 
```

如果您有单独的用户表，那么

```
SELECT A.USERID, coalesce(X.totalplays,0) totalplays
FROM UserTable A
LEFT OUTER JOIN  (
SELECT userid, totalplays FROM dataset 
WHERE artist = 'red hot chili peppers') X ON A.userid = X.userid 
```

# c# - 使用空格填充对长度进行字符串验证的正确方法

> ID：14163908
> 
> 赞同：1
> 
> 时间：2013-01-04T19:49:07.190
> 
> 标签：c#, string, validation, csv, properties

我必须从我的数据库生成一个 csv 文件。我正在使用 C#，我可以做到这一点。我的问题更多与验证有关。我正在考虑这样做：

```
public class MyObject
{
 private string myString;
 public string MyString
 {
   get
   {
     return this.myString;
   }
   set
   {
     this.myString = value.Remove(15).PadRight(15);
   }
} 
```

显然 15 是该字段的最大长度。这是一种愚蠢的处理方式吗？我愿意接受建议。这只是这个程序的冰山一角，它将生成许多不同的 csv，我想确保我建立了一个可持续的模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T19:53:56.863

这种模式的问题是您将错过任何不良记录，因为您只是通过简单地处理数据来吞下异常。但是，如果这就是您想要的，那么它就是完美的。

另一种方法是将这些记录推送到错误列表中，并让用户确定在完成后如何处理它们。所以，你可以这样做：

```
public sealed class BadRecords
{
    private static BadRecords _instance;
    public static BadRecords Instance
    {
        if (_instance == null) { _instance = new BadRecords(); }
        return _instance;
    }

    private BadRecords() { this.List = new List<MyObject>(); }

    public List<MyObject> List { get; set; }
}

public class MyObject
{
 private string myString;
 public string MyString
 {
   get
   {
     return this.myString;
   }
   set
   {
     if (value.Length > 15) { BadRecords.Instanse.List.Add(this); }
     else { this.myString = value.Remove(15).PadRight(15); }
   }
} 
```

但是，您的解决方案仍然存在一个问题，您实际上并不仅仅是使用前 15 个字符。事实上，您拥有的代码会在少于 15 个字符的字符串上出错。考虑更像这样的事情：

```
this.myString = value.Length > 15 ? value.Substring(0, 15) : value; 
```

如果你坚持吞下错误。

但是，在我提供的解决方案中，您可以简单地使用它：

```
this.myString = value.PadRight(15); 
```

因为我们已经检查过它是否大于 15 个字符。

# php - Prestashop 填充数据库表错误

> ID：14163910
> 
> 赞同：0
> 
> 时间：2013-01-04T19:49:16.003
> 
> 标签：php, mysql, browser, prestashop

今天我尝试安装 Prestashop（我之前尝试过）但是它不起作用。这是我的做法（图片库）： http: [//goo.gl/hiqE3](http://goo.gl/hiqE3) 我真的不知道出了什么问题，我尝试了至少 6 次下载所有文件，从服务器删除所有文件，删除数据库，重新上传文件并重试。但它没有工作在最后一部分它说“填充数据库表”

我可以看到互联网上有很多人（如[http://goo.gl/AiI0P](http://goo.gl/AiI0P)）有同样的问题，但所有的指南都没有真正为我工作（我可能做错了）。

但我找到了解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:49:16.003

我可以打开 Firefox 并做与在 Chrome 中完全相同的操作。然后它起作用了。很奇怪，但很真实

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-02T15:13:31.193

cd 到 presta 安装目录。cd 到日志文件夹。在此文件夹中有日志文件，例如 20150102_installation.log。阅读文件的内容以获得更明智的错误原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-22T18:10:38.877

我刚刚在我的 VPS 上安装了 prestashop 版本 1.6.0.9。运行 debian 7。

我使用了文档中描述的过程，下载、解压缩然后复制到服务器。

在安装过程中，我遇到了与您完全相同的错误。我的解决方案涉及将 zip 文件复制到服务器，而不是解压缩文件的集合。

我猜在复制文件的过程中，一个错误导致了文件的损坏。无论如何，在此之后安装运行完美。

D

# algorithm - 将任意长度的位向量压缩/散列到定义的长度

> ID：14163913
> 
> 赞同：1
> 
> 时间：2013-01-04T19:49:27.253
> 
> 标签：algorithm, hash, language-agnostic, compression

给定一个输入位串，我正在寻找一些压缩/散列算法来生成长度为 64 位的输出，并且误报最少。

实现此目的的一种方法是使用布隆过滤器。但是，据我了解，布隆过滤器使用*k*哈希函数，并且对于最小的误报率，数字*k*取决于输入位串的长度，在我的情况下，这不是固定的。

此外，我不能使用加密哈希函数，因为它们的计算成本很高。

任何提示/参考？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T06:55:20.893

CityHash系列散列函数[速度](http://code.google.com/p/cityhash/)极快，非加密，并具有出色的散列属性。

# android - 打印 WebView 的内容

> ID：14163914
> 
> 赞同：1
> 
> 时间：2013-01-04T19:49:29.077
> 
> 标签：android

我有一个显示精美条形图的 Web 视图。我基本上需要对其进行截图（整个 HTML 文档，而不仅仅是 webview 控件中当前可见的区域）并将其填充到 PDF 中。HTML 文件由我的应用程序生成，因此我可以添加任何我想要的内容。使用 PDF 也不是问题。

问题是如何将呈现的 HTML 文档作为位图抓取？关于高级方法的想法会有所帮助。

请注意，HTML 图形是使用 DHTML 而不是画布完成的，因此[此处](https://stackoverflow.com/questions/10320883/how-to-print-a-webview)描述的解决方案不适用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T21:56:57.003

如果您可以使用流为生成的图像开始生成 pdf，则路径是：

```
Picture picture = webView.capturePicture();
Bitmap  b = Bitmap.createBitmap(picture.getWidth(), picture.getHeight(), 
                                Bitmap.Config.ARGB_8888);

Canvas c = new Canvas( b );        
picture.draw( c );

FileOutputStream out = null;
byte[] byteArchadeImage = null;

try {
    out = new FileOutputStream(new File("/sdcard/snapshot/view-cutted.jpg"));

    if ( out != null ) {
        b.compress(Bitmap.CompressFormat.JPEG, 100, out);
        out.flush();
        out.close();
    }
} catch( Exception e ) {
    Log.e("MSG", e.getLocalizedMessage());    
} 
```

您可以使用任何在 android 上运行的 pdf 生成工具重定向流以生成 pdf。我相信 iText 就是一个例子。

# teamcity - 如何在代理上安装或使用常用构建工具

> ID：14163915
> 
> 赞同：1
> 
> 时间：2013-01-04T19:49:28.657
> 
> 标签：teamcity, teamcity-7.0

我在 TeamCity 构建期间使用[YUICompressor](http://yuilibrary.com/projects/yuicompressor/)压缩文件。我想知道将 yuicompressor-2.4.7.jar 文件发送给我的 TeamCity 代理的最佳方法和常见做法以及将文件放在哪里。

我不确定通常的做法是手动将文件放在代理机器上，还是以某种方式使文件成为另一个构建的一部分并使用该构建的工件。

是否有通过 TeamCity 将此类文件推送给代理的自动化方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-25T15:44:44.720

TeamCity 支持使用 .tools 文件夹将工具自动分发给代理。以下是详细信息：[http ://confluence.jetbrains.com/display/TCD8/Installing+Agent+Tools](http://confluence.jetbrains.com/display/TCD8/Installing+Agent+Tools)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T08:01:50.473

只需将其保存在存储库中。这是 CI 最佳实践。

# java - 静态初始化块跳过

> ID：14163917
> 
> 赞同：2
> 
> 时间：2013-01-04T19:49:36.410
> 
> 标签：java, static

非公共类`Out`中的静态初始化块不运行，而静态嵌套类中的静态初始化块`snOut`运行。这如何以及为什么可能？

```
public class staticNested {

    static{
        System.out.println("In staticNested");
    }

    static class sn{

        static{
            System.out.println("sn in staticNested");
        }

        void p(){
            System.out.println("In static nested class method p");
        }
    }

    public static void main(String [] args){
        sn n = new sn();
        n.p();

        Out.snOut no = new Out.snOut();
        no.p();
    }
}

 class Out{

     static{
         System.out.println("In Out"); //Skips this
         System.out.println("Here");  //Skips this
     }

     static class snOut{

         static {
             System.out.println("In snOut in Out");
         }

            private int x;

            void p(){
                System.out.println("In snOut in outside Class out: " + x);
            }

        }
    } 
```

这是输出：

```
In staticNested
sn in staticNested
In static nested class method p
In snOut in Out
In snOut in outside Class out: 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T19:57:13.650

根据[JLS 8.1.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.1.3)

在静态上下文中声明的内部类**I的****实例没有词法封闭实例**。

在您的代码中，您试图访问静态类**sn**，因此根据规范它不会有任何封闭类。这就是封闭类的静态块没有执行的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T19:53:19.170

实际上，在您的代码中，您并没有自己使用该类`Out`。这就是为什么Java没有初始化它并且没有调用它的静态部分的原因。

UPD.：解释。您的代码导致类的初始化`Out.snOut`，但这不是类初始化的原因`Out`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T19:56:15.663

你的内部类是静态的。这意味着它们就像外部类一样，它们类型的对象可以在不需要父对象的情况下进行初始化。所以这里的父对象永远不会被初始化，它们的静态初始化块也不会被执行。

# java - 如何使用外部文件夹创建 jar

> ID：14163921
> 
> 赞同：0
> 
> 时间：2013-01-04T19:49:55.693
> 
> 标签：java, eclipse, jar, directory, external

我在 Eclipse 中有一个带有 src 文件夹和另一个外部文件夹的 java 项目。这在 Eclipse 中有效，但是如何正确导出这两个文件夹以在没有 Eclipse 的情况下运行程序？

# linux - Linux shell脚本查找和重命名文件以删除后缀？

> ID：14163922
> 
> 赞同：3
> 
> 时间：2013-01-04T19:50:02.537
> 
> 标签：linux, bash, shell

我有一些像这样命名的文件：

file1.c.keep.apple

file2.c.keep.apple

我正在尝试编写一个 shell 脚本，以便我将后缀作为参数传递（在本例中为`apple`），它将重命名所有删除`.keep.apple`.

示例执行：

`script.sh apple`

导致上面的文件被重命名为

文件1.c

文件2.c

到目前为止，我有

```
 #! /bin/sh
 find . -type f -name \'*.keep.$1\' -print0 | xargs -0 rename 's/\(.keep.*)$//' 
```

并且文件不会被重命名。我知道这`find`部分是正确的。我认为我重命名的正则表达式是错误的。我怎样才能让脚本按我想要的方式工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T19:53:00.270

> 我知道这`find`部分是正确的

除非它不是。

```
find . -type f -name "*.keep.$1" -print0 | ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T19:57:07.363

更新了，试试这个：

```
#!/bin/bash

SUFFIX=$1;

find . -type f -name "*keep.${SUFFIX}" | while read -r file;
do 
    nfile=`echo $file | sed "s/\.keep\.${SUFFIX}//g"`; 
    mv "$file" "$nfile" 2>/dev/null; 
done 
```

它在这里运行：

```
jgalley@jgalley-debian:/test5$ cat replace.sh 
#!/bin/bash

SUFFIX=$1;

find . -type f -name "*keep.${SUFFIX}" | while read -r file;
do 
    nfile=`echo $file | sed "s/\.keep\.${SUFFIX}//g"`; 
    mv "$file" "$nfile" 2>/dev/null; 
done
jgalley@jgalley-debian:/test5$ find .
.
./-filewithadash.keep.apple
./dir1
./dir1/file
./dir1/file2.keep.orange
./dir2
./dir2/file2
./file with spaces
./file.keep.orange
./file.keep.somethingelse.apple
./file.orange
./replace.sh
jgalley@jgalley-debian:/test5$ ./replace.sh apple
jgalley@jgalley-debian:/test5$ find .
.
./-filewithadash
./dir1
./dir1/file
./dir1/file2.keep.orange
./dir2
./dir2/file2
./file with spaces
./file.keep.orange
./file.keep.somethingelse.apple
./file.orange
./replace.sh
jgalley@jgalley-debian:/test5$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T20:13:37.110

我会说你需要：

```
find . -type f -name "*.keep.$1" -print0 | xargs -0 rename "s/\.keep\.$1$//" 
```

请注意以下限制：

*   重命名可能并非随处可用。
*   `find -print0`并且`xargs -0`是 GNU 扩展，可能并非在所有 Unix 上都可用。
*   如果您的第一个参数包含正则表达式专用的字符，则结果可能不是您想要的。（例如`yourscript "a*e"`）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T20:46:48.267

如果您可以假设 bash 和大于 4 的 bash 版本（支持 globstar），那么这是一个干净的 bash-only 解决方案：

```
#!/usr/bin/env bash

(($#)) || exit 1

shopt -s globstar nullglob
for f in **/*.keep."$1"; do
    mv -- "$f" "${f%.keep.$1}"
done 
```

或者，这是一个使用`find`和`while read`循环的解决方案（假设 GNU 或 BSD 找到）：

```
find . -type f -name "*.keep.$1" -print0 | while IFS= read -r -d '' f; do
    mv -- "$f" "${f%.keep.$1}"
done 
```

有关此解决方案的更多详细信息，请参阅[http://mywiki.wooledge.org/BashFAQ/030](http://mywiki.wooledge.org/BashFAQ/030)。

此外，您可以使用以下方法实现您想要做的`find`事情`-exec`：

```
find . -type f -name "*.keep.$1" -exec sh -c 'mv -- "$2" "${2%.keep.$1}"' _ "$1" {} ';' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T20:23:28.287

这个怎么样？

```
[spatel@us tmp]$ x=aa.bb.cc
[spatel@us tmp]$ y=${x%.cc}
[spatel@us tmp]$ echo $y
aa.bb

[spatel@us tmp]$ x=aa.bb.cc
[spatel@us tmp]$ y=${x%.bb.cc}
[spatel@us tmp]$ echo $y
aa 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-19T20:59:17.283

如果你可以简单地 glob 文件，你可以这样做

```
rename '.keep.apple' '' * 
```

否则你会用你已经拥有`*`的`find`+替换。`xargs`

注意这里的`rename`意思是`rename`从`util-linux`。在某些系统上，它的安装方式类似于`rename.ul`而不是`rename`.

# c++ - 继承中的虚拟关键字

> ID：14163924
> 
> 赞同：-1
> 
> 时间：2013-01-04T19:50:05.397
> 
> 标签：c++, inheritance, virtual

> **可能重复：**
> [在 C++ 中，什么是虚拟基类？](https://stackoverflow.com/questions/21558/in-c-what-is-a-virtual-base-class)

在此代码中，当创建 DR 对象时，字符串“Hello World”应打印 4 次，而不是仅打印 3 次。**为什么会这样**？据我推测，这是因为 mid1 和 mid2 实际上是继承的。 **有人能解释一下当我们虚拟继承一个类时会发生什么，更重要的是它什么时候有用，为什么？**

```
#include <iostream>

struct BS
{
  BS()
  {
    std::cout << "Hello World" << std::endl;
  }
  unsigned int color;
};

struct mid1 : virtual public BS { };
struct mid2 : virtual public BS { };
struct mid3 : public BS { };
struct mid4 : public BS { };

struct DR : public mid1, public mid2, 
            public mid3, public mid4 { };

int main(int argc, char** argv) 
{ 
  DR d;
  return 0; 
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T20:31:05.107

让我们看一个简化的例子：

```
class base {};

class mid1 : public base {};
class mid2 : public base {};

class derived1 : public mid1, public mid2;

class mid1a : virtual public base {};
class mid2a : virtual public base {};

class derived2 : public mid1a, public mid2a {}; 
```

如果我们为这些绘制对象图，我们会得到这样的结果：

![在此处输入图像描述](../Images/3e533fd716090590044e4575cabe4abd.png)

当中间类使用虚拟继承时，派生类只包含基类的单个实例，而不是每个中间类的单独实例。

在您的情况下，这会导致基类的三个实例而不是四个。

# cakephp - 登录后如何返回 CakePHP 中的引用页面

> ID：14163925
> 
> 赞同：7
> 
> 时间：2013-01-04T19:50:07.243
> 
> 标签：cakephp, authentication, login, session-variables, referrer

返回引用页面时遇到问题：

```
first url: http://site.com/venue/apartments/1564/venue-name
referer url: null 
```

在这个页面我可以编辑里面的东西，所以我有一个`login`按钮可以进入登录页面，登录成功后我想回到`first url`.

```
second url: http://site.com/users/login
referer url: http://site.com/venue/apartments/1564/venue-name 
```

当我尝试登录时，由于 CakePHP 操作规则，我必须刷新登录页面以检查凭据，`problem`从这里开始：

```
third url: http://site.com/users/login
referer url: http://site.com/users/login 
```

通过刷新页面，并检查控制器`login`操作中的凭据，`users`我得到了与以前相同的页面，现在我无法返回`first url`.

我通过在 AppController 中设置会话变量尝试了一些解决方案，该变量检查我是否不在`login`操作页面中并执行以下操作：

```
AppController.php

public function beforeFilter () {
    $this->setRedirect();
}

public function setRedirect () {
    if ($this->request->params['controller'] != 'users' && $this->request->params['action'] != 'login') {
        $this->Session->write('redir', array('controller'=>$this->request->params['controller'], 'action'=>$this->request->params['action'], implode($this->request->params['pass'], '/')));
    }
} 
```

通过测试会话变量，`debug($this->Session->write('redir'));`一切似乎都很完美，直到我开始`login`行动：

```
UsersController.php

public function login () {
    if ($this->request->is ('post')){
        if ($this->Auth->login()) {
            $redir = $this->Session->read('redir');
            if (!empty($redir)) {
                $this->redirect ($redir);
            } else {
                $this->redirect ($this->Auth->redirect());
            }
        }
    }
} 
```

这样做会破坏应用程序，如果我`debug($redir);`得到：

```
array(
    'controller' => 'js',
    'action' => 'jquery',
    (int) 0 => 'plugin/jquery.validata.1.7.min' // just a jquery plugin loaded in default.ctp
) 
```

代替

```
array(
    'controller' => 'venue',
    'action' => 'apartments',
    (int) 0 => '1564/venue-name'
) 
```

如果我`debug($redir);`在整个站点的任何其他视图中，一切正常，我得到正确的数据。

我想在某种会话保护例程中`$this->Auth->login()`采取行动，但这对我来说完全是无稽之谈。

如何将登录的用户重定向到不是`login`查看页面的最后一页？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-02T15:42:09.783

你试过这个：`$this->redirect(Controller::referer());`？

我必须重新阅读你的整个问题才能确定，但​​这也应该有效：`$this->redirect( $this->referer() );`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-10-10T17:55:55.550

我使用会话来保持上次访问的 url，如果登录成功，用户将被重定向到它。

首先在 AppController.php 中，我将 url 保存在会话中，登录和注销操作除外：

```
public function beforeFilter() {
    $url = Router::url(NULL, true); //complete url
    if (!preg_match('/login|logout/i', $url)){
        $this->Session->write('lastUrl', $url);
    }
} 
```

在登录操作的 UserController.php 中，我有以下代码：

```
public function login() {
    if ($this->request->is('post')) {
        if ($this->Auth->login()) {
            if ($this->Session->read('lastUrl')){
                $this->redirect($this->Session->read('lastUrl'));
                exit;
            }else{
                return $this->redirect($this->Auth->redirect());
            }
        }
        $this->Session->setFlash(__('Invalid username or password'));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-26T11:34:18.160

我这样做是这样的：

```
public function login() {
    if ($this->request->is('post')) {
        if ($this->Auth->login()) {
            $this->redirect($this->Session->read('referer'));
        } else {
            $this->Session->setFlash(__('Não foi possível efetuar o login. Usuário ou senha inválidos'), 'default', array('class' => 'alert alert-danger'));
        }
    } else {
         $this->Session->write('referer', $this->referer());
    }
} 
```

# intellij-idea - 关闭文档的键盘快捷键？

> ID：14163933
> 
> 赞同：10
> 
> 时间：2013-01-04T19:50:45.057
> 
> 标签：intellij-idea, keyboard-shortcuts

是否有一个键盘快捷键可以关闭用`Ctrl`+打开的文档窗口`q`？`ESC`钥匙似乎不起作用，谷歌搜索对我来说也没有成功。如果有帮助的话，我在 OSX 上使用跨平台键盘映射。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2015-01-13T08:02:04.263

### 问题

正如我在评论中所说，

> 我刚开始使用 IntelliJ，ESC 工作了大约 1 周。然后我改变了一些东西，最后需要 Shift-ESC。恼人的！我无法弄清楚我改变了什么。

我终于弄清楚为什么ESC停止工作了。初始安装 IntelliJ 后，该对话框被视为“弹出窗口”。如果您使用 Ctrl+Q 打开此弹出窗口，然后单击右上角的图钉图标，它会将弹出窗口变为普通对话框。此对话框的行为与其他视图一样，可通过 Shift+ESC 关闭。

### 修复

要恢复弹出行为，请单击齿轮图标（右上角）并确保选中“显示工具栏”。单击大红色 X 图标。这会将其返回到弹出模式。

我的生活变得更好了。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-04T21:24:24.380

Shift-Escape 应该可以解决问题

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-01T09:51:51.703

只需取消选中 pin 模式图标（右上角）：

[![在此处输入图像描述](../Images/cefe3899bd02eb5f53cbc2f7bca09f8e.png)](https://i.stack.imgur.com/utc1K.png)

然后文档窗口变成一个弹出窗口：

[![在此处输入图像描述](../Images/91142c2b4d71a5a74955174cb0cdba97.png)](https://i.stack.imgur.com/GfAAs.png)

然后您可以按 Esc 将其关闭。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-12T08:01:57.800

当然，Shift-Esc 是一个有用的技巧，但它本身并不能解决问题。问题是文档工具窗口出现在工具窗口栏上。要关闭它，请按 Ctrl+Q 3 次（直到文档工具窗口从工具窗口栏中消失）。之后，Ctrl+Q 将像以前一样工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-24T09:55:24.247

我点击了图钉，因为我不想要弹出行为。那么`Shift-Escape`确实不能做到这一点（如Windows中所述），但您可以`Alt+F4`按照以下修复使用。

**如果您不想要弹出行为但想要窗口行为的修复（Alt+F4 关闭）**

在`Upper right`,

1.  通过单击“固定”按钮固定窗口
2.  单击齿轮图标并选择“窗口模式”
3.  然后单击众所周知`Alt+F4`的关闭窗口。

[![窗口模式](../Images/fa75f956c9f54da2ec555933006d1115.png)](https://i.stack.imgur.com/Abmkc.png)

# javascript - Knockout.js 使用“with”绑定问题

> ID：14163937
> 
> 赞同：1
> 
> 时间：2013-01-04T19:51:03.333
> 
> 标签：javascript, asp.net-mvc, knockout.js

我有一个具有以下设置（或多或少）的应用程序：

**JS**

```
var ObjectVM = function(data) {
    var me = this;
    me.name = ko.observable(data.name);
    //Set other properties
    ...

    me.isSelected(false);
};
var VM = function () {
    var me = this;
    me.Records = [];
    me.Selected = ko.observable(undefined);
    me.Select = function (rec) {
        if (rec.hasChanges == undefined) {
            //attach editable functionality
            ko.editable(record);
        }
        rec.isSelected(true);
        rec.beginEdit();
        if (me.Selected() != undefined) {
            if (me.Selected().hasChanges()) {
                me.Selected().rollback();
            }
            me.Selected().isSelected(false);
            me.Selected().commit();
        }
        me.Selected(rec);
        //Do some hiding/showing of form...
    };
    me.Init = function(){
       $.ajax({...,
          success: function(data){
          for(var i = 0;i< data.length;i++){
           me.Records.push(new ObjectVM(data[i]));
          }
       }
    };
}; 
```

**HTML**

```
<div>
     RECORDS DISPLAY GRID (Pretend it's a table with 5 columns and 10 rows)
</div>
<div data-bind="with: Selected">
   <form id="editRec">
     <label>Name</label>
      <input data-bind="value: name" />
   </form>
</div> 
```

我在调用 VM 选择功能的表行上有一个单击绑定设置。使用“with”绑定在 Selected() 未定义时删除表单，并在 Selected() 有记录时添加回来。每次发生这种情况时，我都会丢失附加到表单的验证、选项卡和事件绑定（非 KO 绑定）。该应用程序运行良好，但在记录之间更改时会出现一些性能问题，因为它必须重新添加表单、设置验证、ui 配置和绑定。

有没有办法让表单留在页面上，保持我的绑定和设置，还是每次更改 Selected 值时我都会被迫处理命中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:40:55.700

目前，绑定将其内容视为模板，并在值更改`with`时重新呈现。`with`避免重新渲染的唯一方法是不使用`with`.

```
<div>
   <form id="editRec">
     <label>Name</label>
      <input data-bind="value: Selected().name" />
   </form>
</div> 
```

当然，如果`Selected`有时可以`undefined`，这将不起作用，您必须寻找其他解决方案。最好的方法是使用自定义绑定来设置您的事件处理程序、验证、选项卡等。

```
<!--ko with: Selected-->
<div data-bind="setUpStuff: true">
   <form id="editRec">
     <label>Name</label>
      <input data-bind="value: name" />
   </form>
</div>
<!--/ko--> 
```

避免重新渲染并支持`undefined`值的第三种选择是使用 Knockout 2.2 和`if`绑定（并避免`with`）。在 2.2 中，`if`绑定只会在值变为 false 时重新渲染，但不会在它从一个 true 值变为另一个时重新渲染。

```
<!--ko if: Selected-->
<div data-bind="setUpStuff: true">
   <form id="editRec">
     <label>Name</label>
      <input data-bind="value: Selected().name" />
   </form>
</div>
<!--/ko--> 
```

# ruby-on-rails - ActiveRecord::ConnectionNotEstablished 在 rake 任务中

> ID：14163938
> 
> 赞同：7
> 
> 时间：2013-01-04T19:51:12.787
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, postgresql-9.1

我正在创建一个 rake 任务来删除一些表和触发器。

我的耙子任务：

```
task :remove_rubyrep do
  sql = <<-SQL
    DROP TABLE rr_logged_events, rr_running_flags, rr_pending_changes;
  SQL
  ActiveRecord::Base.establish_connection
  ActiveRecord::Base.connection.execute(sql)
end 
```

我试着这样运行：

```
rake remove_rubyrep
RAILS_ENV=development rake remove_rubyrep 
```

问题是 rake 任务错误：

```
rake aborted!
ActiveRecord::ConnectionNotEstablished 
```

关于如何允许 rake 任务连接到数据库以执行原始 sql 的任何建议？谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-04T19:55:42.560

您没有在 rake 任务中加载 rails 应用程序，因此 ActiveRecord 永远不会创建数据库连接。

将您的 rake 任务更改为：

```
task :remove_rubyrep => :environment do 
```

之后，您将不再需要“建立连接”行

# ruby-on-rails - Rails 更新表单问题？

> ID：14163940
> 
> 赞同：0
> 
> 时间：2013-01-04T19:51:22.113
> 
> 标签：ruby-on-rails, ruby-on-rails-3

任何人都可以解释更新表单的以下奇怪行为吗？

*   模型 post.rb 包含以下定义

    ```
    class Post < ActiveRecord::Base
      attr_accessible :id, :name, :content
      validates :id, :presence => true, :numericality => { :greater_than_or_equal_to => 100}, :uniqueness => true 
    end 
    ```

*   控制器 posts_controller.rb 以这种方式定义更新方法

    ```
    class PostsController < ApplicationController
      def update
        @post = Post.find(params[:id])

        respond_to do |format|
          if @post.update_attributes(params[:post])
            format.html { redirect_to @post, notice: 'Post was successfully updated.' }
            format.json { head :no_content }
          else
            format.html { render action: "edit" }
            format.json { render json: @post.errors, status: :unprocessable_entity }
          end
        end
      end 
    ```

*   部分视图 _form.rb 还包含使用脚手架生成的标准表达式

    ```
    <%= form_for(@post) do |f| %>
      ...
      <div class="field">
        <%= f.label :id %><br />
        <%= f.number_field :id %>
      </div>
      <div class="field">
         <%= f.label :name %><br />
         <%= f.text_field :name %>
      </div>
      <div class="field">
        <%= f.label :content %><br />
        <%= f.text_area :content %>
      </div>
      <div class="actions">
        <%= f.submit %>
      </div>
    <% end %> 
    ```

    * * *

问题描述：

1.  在更新表单中， :id 的无效值给出为 42
2.  验证助手处理无效的输入值 (< 100) 并传递通知“Id 必须大于或等于 100”并且数据**不会**更新
3.  :id 的字段被替换为一些正确的值，如 123 并再次提交更新帖子按钮
4.  ***Rails 不是表单接收和更新数据库，而是在 PostsController#show 中***抛出异常 ActiveRecord::RecordNotFound

     ****找不到 id=42 的帖子**** 

 *这里发生了什么 ？为什么会出现异常以及为什么再次传递旧值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:10:22.777

那么问题是在你的控制器中你正在这样做：

```
@post = Post.find(params[:id]) 
```

你传入的 ID 为 42。因此控制器开始尝试查找 ID 为 42 的 Post 对象。但是，没有 ID 为 42 的 Post 对象，因此会引发错误。它甚至从来没有接到你的`update_attributes`电话，甚至从来没有去你的验证。

您必须从这个错误中解救出来，或者使用如果没有找到记录`find_by_id`将返回的方法。`nil`

另外，我想知道，您为什么要让您的用户手动输入 ID？他们不应该知道这件事。这个 ID 应该与主键不同吗？然后考虑添加一个不同的列，比如`identifier`or`key`或其他东西，以减少这种情况下的歧义。如果你试图操纵 ID 可能会遇到很多问题（实际上想到它可能是 Rails 允许的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:38:24.240

`update_attributes`方法不更新主键或只读属性。更重要的是，在更新 SQL 语句的条件中`update_attributes`使用`id`属性`WHERE`，因此如果您更改了`id`属性，您最终将更新已经具有此 ID 的记录（或者如果 db 中不存在该 ID，则根本不更新） .

作为一种解决方法，您必须自己编写更新 SQL 语句，或者通过创建具有所需 id 的新记录（复制旧属性并设置新 id）并删除旧记录来两次访问数据库。

也就是说，我同意@MrDanA 的观点，即更新主键不是一个好主意，我认为您应该考虑另一种方法来解决您的问题。*

# spring - 玉兰花 addinclude

> ID：14163941
> 
> 赞同：0
> 
> 时间：2013-01-04T19:51:22.807
> 
> 标签：spring, jsp, spring-mvc, content-management-system, magnolia

使用 Blossom 2 和 Magnolia 4.5，我正在尝试做这样的事情：

```
@Controller
@Template(id = "topicpages:pages/topics", title = "MyTemplate")
public class TopicTemplate {
...
@TabFactory("DialogInclude2")
public void topicTagTab2(TabBuilder tab){
tab.addInclude("topicpages/pages/topicLayout.jsp");
}
...
} 
```

代码还有一点点，但我认为这是相关的部分。问题是，当我尝试以这种方式包含 JSP 时，我收到以下错误：2013 年 1 月 3 日下午 2:48:33 org.springframework.web.servlet.DispatcherServlet noHandlerFound WARNING: No mapping found for HTTP request with DispatcherServlet 中的 URI [/.magnolia/dialogs/topicpages/pages/topicLayout.jsp]，名称为“控制器”

我熟悉[http://wiki.magnolia-cms.com/display/WIKI/Creating+a+custom+control+with+DialogInclude](http://wiki.magnolia-cms.com/display/WIKI/Creating+a+custom+control+with+DialogInclude)上关于 dialoginclude 的教程，但我不知道该怎么做：“对于一个使用控件的对话框，它需要定义一个名为 controlType 的内容节点，其值为 'include' 和另一个命名文件，其值为要包含的 JSP 的位置。” 因为我所有的对话都是通过 Blossom 创建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:00:37.387

来自 forum.magnolia-cms.com：

回复：使用 addInclude 创建自定义 Magnolia 控件

# 2 tmattsson 发表于 2013 年 1 月 8 日上午 11:04:27

`/.magnolia/dialogs/topicpages/pages/topicLayout.jsp`因为您指定了 JSP 的相对路径，所以为呈现您的控件而发出的包含请求。这就是它以 . 开头的原因`/.magnolia/dialogs/`。如果不打算这样做，则应使用 JSP 的绝对路径。该请求由`DispatcherServlet`名为Spring 的 Spring 处理，该 Spring`controller`没有与此路径匹配的控制器（处理程序）。

尝试将 JSP 直接放在`WEB-INF`文件夹中，看看是否可以使用`addInclude("/WEB-INF/topicLayout.jsp")`.

如果您尝试对`include`Spring执行操作`DispatcherServlet`，其中控制器将呈现控制器（处理程序），那么您可以在模块描述符中配置它并将其定位`include`到它和其中的控制器。在这种情况下，`.jsp`扩展是不必要的。它可能是这样的：`addInclude("/custom-controls/topicLayout");`

请注意，`WEB-INF`出于安全原因，将 JSP 文件保存在外部无法访问它们的文件夹中始终是一个好主意。同样，您应该注意在管理界面中添加的用于支持编辑器的功能不应从外部公开。下面映射的所有内容都`/.magnolia`受到保护，需要登录。

希望有帮助！

// 托比亚斯

# ruby - Ruby 脚本挂在错误的 PG 连接调用上

> ID：14163943
> 
> 赞同：4
> 
> 时间：2013-01-04T19:51:31.367
> 
> 标签：ruby, postgresql, libpq

我有一个 Ruby 脚本，它连接到 postgres 数据库，运行一些查询，然后关闭/返回数据给用户。

该脚本工作正常，但如果我给它一个错误的主机名，整个脚本就会挂起，我必须按 ctrl-Z 退出。我知道要解决这个问题，我需要查看`libpq`postgres 的后端，但我不知道如何将它全部包装到我的 ruby​​ 脚本中。我正在使用`Ruby 1.8`和`pg gem`处理 postgres 的东西，调用打开连接：

```
myConnection = PGconn.connect(host,port,pgOptions,pgTTY,name,user,password) 
```

（options 和 tty 只是空白字符串）

任何帮助/提示/建议都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:39:46.697

有一个 connect_timeout 选项，因此您可以这样做： USING STRING connection_string = "host=YOUR_HOST port=YOUR_PORT connect_timeout=YOUR_TIMEOUT PERIOD" PGconn.connect(connection_string)

PGconn.connect 还提供了一个更加 ruby​​esque 的哈希表示法

:host => YOU_HOST, :port => YOUR_PORT, :connect_timeout => YOUR_TIMEOUT_PERIOD

您也可以将其包装在开始救援中，以便在连接超时时不会运行其余代码

免责声明：我没有实际测试过，但它是 pg gem 文档的一部分

[http://deveiate.org/code/pg/](http://deveiate.org/code/pg/)

# java - 提交表单时如何防止 PasswordTextField 清除文本？

> ID：14163944
> 
> 赞同：2
> 
> 时间：2013-01-04T19:51:44.113
> 
> 标签：java, html, forms, apache, wicket

我有一个按钮，当我单击此按钮时，会提交表单并进行验证。如果密码无效，我希望在提交表单后将其保留在那里。

我尝试将密码保存在一个名为的 var 中`passwordStr`，然后用这个 var 设置 PasswordTextField 的模型对象，所有这些都在`onSubmit()`表单的方法中。虽然没有工作。

有没有办法做我想做的事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T21:36:29.477

打电话`PasswordTextField#setResetPassword(false)`。这是JavaDoc：

> 指示字段的内容是否应在每次呈现时重置的标志。如果`true`，则在呈现字段时清空内容。这对于登录表单很有用。如果`false`，则将模型的内容放入字段中。这对于模型内容应该可编辑或重新提交的输入表单很有用。

# java - TestNG“失败的测试”输出可以使用换行符吗？

> ID：14163946
> 
> 赞同：1
> 
> 时间：2013-01-04T19:51:50.450
> 
> 标签：java, unit-testing, testing, tdd, testng

当我运行我的 TestNG 测试时，我得到以下针对失败测试的截断输出：

```
Failed tests: retrievedDataFromService(com.mydomain.ServiceTest): The returned data is not correct:(..) 
```

Assert.fail() 中的实际字符串是这样的：

```
StringBuilder msg = new StringBuilder("The returned data is not correct:");
msg.append("\n expected = ");
msg.append("<xml>some data</xml>");
msg.append("\n was = ");
msg.append("<xml>some other data</xml>"); 
```

如果我从消息中删除换行符，则会显示所有内容：

```
Failed tests: retrievedDataFromService(com.mydomain.ServiceTest): The returned data is not correct: expected = <xml>some data</xml> was = <xml>some other data</xml> 
```

有没有办法让 TestNG 在“失败的测试”输出中显示换行符？

# http - 在请求模块中使用 Keep Alive - Python 2.7

> ID：14163949
> 
> 赞同：0
> 
> 时间：2013-01-04T19:52:01.853
> 
> 标签：http, rest, python-2.7, keep-alive, python-requests

我的互联网连接有问题。大约 50% 的情况下，由于 DNS 查找失败，网页无法加载。只需重新加载页面即可，我可以这样浏览。但是，我也在为我的项目使用 REST api 服务。当我运行程序时，它不断地重复调用这个网络服务，数百次。由于我的问题，我最多可以成功连接 3-4 次（当我很幸运时），然后最终我得到连接错误 - “超过最大重试次数”。当我在请求模块中遇到这个 Keep Alive 属性时，我正在探索我的选择。它是自动的，我不能强行让它工作。我如何让这个工作？

PS - 我知道解决我的互联网连接问题会解决它，但我一周后要搬家，所以我不想在这里浪费时间。还需要完成我的项目，所以请帮助pppp！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T11:50:39.290

You could try setting up your application or operating system to use a known good DNS server like 8.8.8.8

EDIT: You can also bypass the DNS by adding the host name and IP address of the REST service to yor hosts file.

# oracle - Oracle Forms：如何通过弹出菜单在窗口之间传递变量

> ID：14163957
> 
> 赞同：1
> 
> 时间：2013-01-04T19:52:55.970
> 
> 标签：oracle, oracleforms, popupmenu

我已经为主表创建了一个表单，现在我想在右键单击字段并选择“详细信息”时打开另一个显示详细信息的表单。

如何获取“ITEM ORDER”并将值传递给新表单以显示相关信息？如果没有说清楚，请评论。谢谢

![示例图片](../Images/8b5a4e1e5835f777dfe5b67f0254872b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T00:21:29.303

call_form 或 open_form 过程的参数之一是参数列表。您可以使用此参数列表来传递参数。在来电表格上：

1.  创建参数列表

2.  将参数添加到参数

3.  call_form 使用这个参数列表：

> ```
> DECLARE
>     fParams ParamList := null;
> BEGIN 
>   fParams := Get_Parameter_List('SOME_NAME'); 
>   IF (not Id_Null(fParams)) THEN 
>     destroy_parameter_list(fList);
>   END IF;
> 
>   fParams := Create_Parameter_List('SOME_NAME');
>   Add_Parameter(fParams, 'PARAM_NAME', TEXT_PARAMETER, 'PARAM_VALUE'); 
>   OPEN_FORM('Form_Name', ACTIVATE, SESSION, NO_SHARE_LIBRARY_DATA, fParams);
> END; 
> ```

在被调用表单上：您必须在参数部分声明参数，其名称与 add_parameter 中使用的**名称相同。**之后，您可以使用`:parameter.param_name.`

注意一点：**不能**在数据块的 where 子句中使用`:parameter`。将参数复制到另一个数据块项并使用这个。

# c - 幻灯片拼图应用程序，DFS

> ID：14163959
> 
> 赞同：2
> 
> 时间：2013-01-04T19:53:03.453
> 
> 标签：c

我在解决滑动难题时遇到以下问题。我处于状态，我可以确定谜题是否可以解决。而且我已经创建了将空标题向左、向右、向上和向下移动的函数，如果可以移动，它们返回 2D 数组，否则返回 0。我将初始配置存储在二维数组中。

我选择了有限的 DFS 来解决这个问题。所以我需要创建类似树（或链表）结构的东西，我的初始配置将是根目录。然后它将有（2,3 或 4）个孩子，具体取决于零的位置。这些节点将包含具有下一个配置的 int **array（由函数返回：*toLeft、toRight、toUp 和 toDown*）。

所以我可以使用递归来创建下一个节点，直到有目标配置。然后我可以“返回”到根目录并打印出这些步骤。例如：
[5] LEFT
[7] UP
...
END

但是我在创建链表时遇到了问题。到目前为止，我只有：

```
typedef struct Node{
int **array;
struct Node *left;
struct Node *right;
struct Node *up;
struct Node *down;
}Node; 
```

如何将节点添加到列表中，如何确定它是左、右、上、下？谢谢你。

**编辑**

所以根据建议（已删除）我编辑了我的代码并添加了新功能......

```
 typedef struct Node{
    int **array;
    struct Node *left;
    struct Node *right;
    struct Node *up;
    struct Node *down;
    struct Node *parent;
    }Node;

Node* newNode(Node *parent, int **array){
    Node* u;
    u = malloc(sizeof(Node));
    if (u == NULL){
    printf("OUT OF MEMORY!");
    /* Free memory here.*/
    exit(1);
    }
    u->array = array;
    u->down = NULL;
    u->right = NULL;
    u->up = NULL;
    u->left = NULL;
    u->parent = parent;
    return u;
}

void setLeftNode(Uzel *parent, Uzel *child) {
  parent->left = child;
    }
/* setRightNode,Up,Down...*/

int isLeftChild (Node *node){
    if (node->parent == null) {return 0;}
    else{
        if (node->parent->left == node){return 1;}
        else{return 0;}
    }
}
/*is Right,Up,Down...*/ 
```

我添加了根： Node* root = newNode(NULL, array);

所以我的问题是：
1\. 我怎样才能创建另一个节点（使用递归和来自他们父母的数组（更改拼图配置））？
2\. 如何调用setLeftNode、setRightNode等？

感谢您的时间。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:17:19.880

我同意Spudd86。您不需要显式构建状态数组树。只有当前路径中的那些就足够了，并且这些可以保留在堆栈上的指针中。

大致像这样的东西应该可以工作：

```
int dfs(int **state, int depthLimit, const char **steps) {
    if (isFinalState(state))
        return 1;

    if (depthLimit <= 0)
        return 0;

    int *newState;

    if (tryMoveLeft(state, &newState)) {
        if (dfs(newState, depthLimit, steps + 1)) {
            steps[0] = "left";
            freeState(newState);
            return 1;
        } else {
            freeState(newState);
        }
    }

    // The same for right, up, down ...

    // If no of the previous returns was taken, then this branch isn't the right one
    return 0;
} 
```

`isFinalState()`如果状态对应于已解决的难题，`tryMoveLeft()`则应返回，如果向左移动有效，则应返回，如果有效则返回新分配`freeState()`的状态，并且应释放状态数组。输出将存储在数组步骤中，在开始搜索之前必须将其分配到足够的大小。

这并不能完全回答您的要求，但我希望它无论如何都会有所帮助:-D

# javascript - 如何动态添加基于另一个标签价值？

> ID：14163963
> 
> 赞同：0
> 
> 时间：2013-01-04T19:53:18.970
> 
> 标签：javascript, forms, select, dynamic

对于注册表单，我正在寻找一种方法，根据用户在表单字段中选择的数字 (#) 为用户提供更多选项。

我已经搜索并找到了一种使用 javascript 执行此操作的方法，但它不允许标记，但它确实接受等，但不是下拉菜单字段。

```
 <fieldset>
    <legend>Step 2/3: Virtual Machine Options</legend>
                    <div>
                        <label for="vmammount">Order # VM's</label>
                        <select name="vmammount" required="required">
                            <option value=""></option>
                            <option value="1">1</option>
                            <option value="2">3</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>                        
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                        </select>
                    </div>
                    <div>
                        <label for="vmos">VM OS 1</label>
                        <select name="vmos" required="required">
                            <option value=""></option>
                            <option value="1">Windows Server 2008</option>
                            <option value="2">Windows XP</option>
                            <option value="3">Debian</option>
                            <option value="4">CentOS</option>
                        </select>
                    </div>
<div>
                        <label for="vmos">VM OS 2</label>
                        <select name="vmos" required="required">
                            <option value=""></option>
                            <option value="1">Windows Server 2008</option>
                            <option value="2">Windows XP</option>
                            <option value="3">Debian</option>
                            <option value="4">CentOS</option>
                        </select>
                    </div>
                </fieldset> 
```

OS 1 字段始终可见，随后的其他选择字段取决于用户选择从 1 到 10 的值的第一个字段。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:01:19.857

你可以试试这个，[http://supunk.blogspot.se/2009/01/creating-select-list-using-javascript.html](http://supunk.blogspot.se/2009/01/creating-select-list-using-javascript.html)

这是一些稍微修改的代码

```
var numSelects = 3; //change this to the value of the first select
var foo = document.getElementById("fooBar");
for(var i = 0; i <= numSelects; i++)
{
/* create select */
var select = document.createElement("select");
select.setAttribute("name", "mySelect_" + i);
select.setAttribute("id", "mySelect_" + i);
select.style.width = "300px";

var option;

for( var j = 0; j <= 5; j++ )
{
 /* we are going to add two options */
 /* create options elements */
 option = document.createElement("option");
 option.setAttribute("value", "value_" + i "_" + j);
 option.innerHTML = "Text #" + j + " in box #" + i "!";
 select.appendChild(option);
 }
 foo.appendChild( select );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T21:36:05.693

如果您可以使用 jQuery：

```
$("#labelID").change(function(){
    switch($(this).val()){
        case "1":
            $("#VMOS1").show();
            break;
        case "2":
            $("#VMOS2").show();
            break;
    }
}) 
```

这只是一个粗略的示例，您应该向元素添加 id 和类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T21:16:20.770

我可能不理解您的问题，但您可以使用[Knockout.js](http://www.knockoutjs.com)之类的框架轻松完成此操作，该框架允许您定义客户端视图模型来处理注册表单的状态。

查看模型

```
var ViewModel = function () {
    var self = this;

    this.vmaValue = ko.observable(1);
    this.vmaOptions = ko.observableArray([1, 2, 3, 4, 5]);
}

ko.applyBindings(new ViewModel()); 
```

标记

```
<select data-bind="options: vmaOptions, value: vmaValue"></select>

<!-- ko if: vmaValue() === 1 -->
<div>
    <label for="vmos">VM OS 1</label>
    <select name="vmos" required="required">
        <option value=""></option>
        <option value="1">Windows Server 2008</option>
        <option value="2">Windows XP</option>
        <option value="3">Debian</option>
        <option value="4">CentOS</option>
    </select>
</div>
<!-- /ko -->

<!-- ko if: vmaValue() === 2 -->
<div>
    <label for="vmos">VM OS 2</label>
    <select name="vmos" required="required">
        <option value=""></option>
        <option value="1">Windows Server 2008</option>
        <option value="2">Windows XP</option>
        <option value="3">Debian</option>
        <option value="4">CentOS</option>
    </select>
</div>
<!-- /ko -->​ 
```

这是一个小提琴： http: [//jsfiddle.net/vEQ9d/](http://jsfiddle.net/vEQ9d/)请注意，此示例已大大简化，您可以使用 Knockout 做更多事情，然后我在这里展示的内容包括使用来自服务器，很难在小提琴中展示所有这些。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T20:17:38.473

最好的方法是在 HTML / PHP 中创建所有 os 选择元素......但仅在必要时显示它们。这里是一个 jQuery 的例子，它也可以使用普通的 javascript，但需要至少 10 倍的 mutch 代码行。

[http://jsfiddle.net/vuPwM/2/](http://jsfiddle.net/vuPwM/2/)

```
<fieldset>
    <legend>Step 2/3: Virtual Machine Options</legend>
        <div>
            <label for="vmammount">Order # VM's</label>
            <select name="vmammount" id="vmammount" required="required">
                <option value=""></option>
                <option value="1">1</option>
                <option value="2">3</option>
                <option value="3">3</option>
                <option value="4">4</option>
            </select>
        </div>
        <div id="vmos_block">
            <div class="vmos" id="vmos_block_1">
                <label for="vmos_1">VM OS 1</label>
                <select name="vmos[1]" id="vmos_1" required="required">
                    <option value=""></option>
                    <option value="1">Windows Server 2008</option>
                    <option value="2">Windows XP</option>
                    <option value="3">Debian</option>
                    <option value="4">CentOS</option>
                </select>
            </div>

            <div class="vmos" id="vmos_block_2">
                <label for="vmos_2">VM OS 2</label>
                <select name="vmos[2]" id="vmos_2" required="required">
                    <option value=""></option>
                    <option value="1">Windows Server 2008</option>
                    <option value="2">Windows XP</option>
                    <option value="3">Debian</option>
                    <option value="4">CentOS</option>
                </select>
            </div>

            <div class="vmos" id="vmos_block_3">
                <label for="vmos_3">VM OS 3</label>
                <select name="vmos[3]" id="vmos_3" required="required">
                    <option value=""></option>
                    <option value="1">Windows Server 2008</option>
                    <option value="2">Windows XP</option>
                    <option value="3">Debian</option>
                    <option value="4">CentOS</option>
                </select>
            </div>

            <div class="vmos" id="vmos_block_4">
                <label for="vmos_4">VM OS 4</label>
                <select name="vmos[4]" id="vmos_4" required="required">
                    <option value=""></option>
                    <option value="1">Windows Server 2008</option>
                    <option value="2">Windows XP</option>
                    <option value="3">Debian</option>
                    <option value="4">CentOS</option>
                </select>
            </div>
        </div>
</fieldset>

<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
    $('.vmos').hide();

    $("#vmammount").change(function () {
        $('.vmos').hide();

        if ($(this).val() < 1) {
            return false;
        }

        for (var i = 1; i <= $(this).val() ; i++) {
              $('#vmos_block_' + i).show();          
        }

        return true;
    });
});//]]>  

</script> 
```

# java - Netbeans：库不包含在项目文件夹中

> ID：14163966
> 
> 赞同：3
> 
> 时间：2013-01-04T19:53:28.267
> 
> 标签：java, netbeans

我需要将一个 netbeans 项目打包为一个 zip，以便我可以将它发送给几个开发人员。但是，我已经将一个库构建为另一个项目，并使用 netbeans“添加项目”选项将其作为一个库包含在内。

然而....

libray 永远不会添加到项目文件夹中...是否可以更改包含 jar 的设置，以便其他开发人员可以解压缩项目并使用“开箱即用”？

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T16:20:19.373

不确定这是否是您需要的：

1.  右键单击您的项目->**`Properties`**
2.  **`Libraries`**-> **`Libraries Folder`**->**`Browse`**
3.  选择文件夹*`[Step 1]`*（例如插入`./lib`- 如果不存在则创建目录）-> 下一步
4.  根据需要设置*操作**`[Step 2]`*，也许默认操作（“*使用现有...* ”）已经是您需要的
5.  **`Finish`**

这会 ...

*   在你的项目文件夹中创建一个通用的 Lib 目录
*   如果您*清理并构建*项目，则 dist 目录中将有一个 lib 文件夹，其中包含项目的所有库

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-03T10:19:08.020

仅当项目是 java 应用程序项目时，Netbeans 才会将 jar 打包到 lib 文件夹中。即它应该是一个具有main 方法的类的java 项目。它应该在项目属性的运行类别中指定。如果您运行 clean 和 build，dist 文件夹将包含应用程序 jar，并且该库将作为 jar 添加到 lib 文件夹下。然后可以压缩 dist 文件夹的内容并与其他开发人员共享。他们应该能够开箱即用地执行它。注意：应用程序 jar 的清单文件将具有库的类路径条目。

如果您对非应用程序的 java 项目需要相同的行为，请修改 ant 脚本。

# javascript - 如何使 FancyBox 不隐藏原始内联块

> ID：14163967
> 
> 赞同：2
> 
> 时间：2013-01-04T19:53:32.260
> 
> 标签：javascript, jquery, fancybox, fancybox-2

我正在尝试使用 Fancybox 来“扩展”页面上的内联元素以使其更易于阅读。在它的原始位置，元素是可见的，但样式显示在一个小滚动框中。在那下面是一个展开链接。单击链接调用 Fancybox 将元素放入 Fancybox。

这一切都很好。

但是当您单击关闭时，它会将原始元素放回原来的位置，但它会将 style="display:none" 作为属性添加到元素中，导致文本消失。

这是一个显示发生了什么的最小案例示例。

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Fancy Box data test</title>
    <meta name="generator" content="BBEdit 10.5" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
    <script type="text/javascript" src="fancybox/source/jquery.fancybox.js"></script>
    <script type="text/javascript" src="fancybox/source/jquery.fancybox.pack.js"></script>
    <link rel="stylesheet" href="/fancybox/source/jquery.fancybox.css" type="text/css" media="screen" />
    <script type="text/javascript" >
        jQuery.noConflict();
        jQuery(document).ready( function() {
            jQuery("a#inline").fancybox(
                {
                'hideOnContentClick': true
                })
            }
        );
    </script>
    <style type="text/css">
        .agreement-content { 
            overflow:auto; 
            height:12em; 
            padding:10px; 
            background-color:#fbfaf6; 
            border:1px solid #bbb6a5; 
            width: 300px;
            margin: 30px;
            }
    </style>
</head>
<body>
<p>
This is testing having FancyBox "expand" a custom field.
<p>

<div class="agreement-content">
    <div id="lightCoH">
<p>
    Supported neglected met she therefore unwilling discovery remainder. Way sentiments two indulgence uncommonly own. Diminution to frequently sentiments he connection continuing indulgence. An my exquisite conveying up defective. Shameless see the tolerably how continued. She enable men twenty elinor points appear. Whose merry ten yet was men seven ought balls. 
</p>

<p>
Blind would equal while oh mr do style. Lain led and fact none. One preferred sportsmen resolving the happiness continued. High at of in loud rich true. Oh conveying do immediate acuteness in he. Equally welcome her set nothing has gravity whether parties. Fertile suppose shyness mr up pointed in staying on respect. 
</p>

    </div>
</div>
<a id="inline" href="#lightCoH">Expand</a>
</body>
</html> 
```

查看 Chrome 的开发者工具元素视图中的源代码，您可以看到它更改了`<div id="lightCoH">`.

当页面加载它就像上面的源代码一样。

当您单击展开链接时，它变为`<div class="fancybox-placeholder" style="display: none;"></div>`

当你关闭花哨的盒子时，它会变成`<div id="lightCoH" style="display: none;">`

我尝试在其中放置一个空的样式属性，以为它会拾取它并将其重置为其原始设置，但没有运气。

也许这就是 Fancybox 无法正常工作的方式——仅适用于不可见的内联元素。如果是这样，是否有解决方法，也许使用 afterClose 回调？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T22:37:10.847

只需添加一个回调即可恢复内联内容，例如：

```
afterClose: function() {
    $("#lightCoH").show();
} 
```

见**[JSFIDDLE](http://jsfiddle.net/GauH5/)**

**顺便说一句**，`hideOnContentClick`是 Fancybox v1.3.x 的一个选项……你必须`closeClick`改用。检查[https://stackoverflow.com/a/8404587/1055987](https://stackoverflow.com/a/8404587/1055987)了解更多信息

# javascript - Cakephp，JsHelper 在“更新”上调用 javascript 函数？

> ID：14163968
> 
> 赞同：1
> 
> 时间：2013-01-04T19:53:33.047
> 
> 标签：javascript, ajax, cakephp

我有一个这样的 js 辅助方法：

```
$this->Js->get('#colorRB' . $key)->event('change', $this->Js->request(array(
            'controller' => 'designer',
            'action' => 'setParameters', $colorHex['id'], $colorHex['hex_code'], $cNr, False
                ), array(
            'update' => '#testDiv',
            'async' => true,
            'method' => 'post',
            'dataExpression' => true
        ))
); 
```

发生“更新”时是否可以调用javascript方法-> *reloadJs() ？*或者如何重建方法来做到这一点？我只对调用动作“setParameters”感兴趣，而不是它返回的任何东西。之后我需要调用 javascript，这需要在因为 ut 取决于操作的作用之后完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T00:28:50.783

您可以按照方法中的定义在回调中运行 JavaScript [`request()`](http://api20.cakephp.org/class/js-base-engine-helper#method-JsBaseEngineHelperrequest)。'update' 键只是一种自动更新 div 的便捷方式，它没有别的作用。请求成功后运行JS，例如：

```
$this->Js->get('#colorRB' . $key)->event('change', $this->Js->request(array(
    'controller' => 'designer',
    'action' => 'setParameters', $colorHex['id'], $colorHex['hex_code'], $cNr, False
        ), array(
    'success' => 'reloadJs()',
    'async' => true,
    'method' => 'post',
    'dataExpression' => true
))
); 
```

# makefile - 要求 makefile 打印变量值

> ID：14163969
> 
> 赞同：4
> 
> 时间：2013-01-04T19:53:33.947
> 
> 标签：makefile, gnu-make

我有一些生成的 GNUmakefiles，我需要从中提取变量的值。

有没有一种简单的方法可以在不修改 makefile 的情况下查看变量的值？

仅供参考，变量包含 emacs c-macro-expand 函数所需的一些包含文件的路径。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T12:59:53.573

您可以创建一个包装器 makefile，其中包括必要的 GNUmakefiles 并打印变量。例如，`wrapper.mk`使用内容创建

```
include GNUmakefile

$(info $(value VAR_NAME)) 
```

然后使用`-n`标志调用 Make（请参阅@jeberle 的[答案](https://stackoverflow.com/a/14164367/545027)）：

```
make -f wrapper.mk -n  # will print the variable value to stdout 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T20:22:35.237

你可以这样做：

```
$ make -n -p | grep VAR 
```

挑选价值

标志是：

```
-n  # don't really make
-p  # print database 
```

# android - Android GCM 推送通知 - 向一组设备发送消息

> ID：14163970
> 
> 赞同：1
> 
> 时间：2013-01-04T19:53:36.603
> 
> 标签：android, google-api, push-notification, google-cloud-messaging

我有一个包含用户名数据库的服务器。我还有一个 Android 应用程序，用户将在其中向服务器数据库注册一个用户名，并将设备注册到服务器的 GCM 部分。

我目前在我的服务器代码中使用 GCM 演示，它将向每个注册的设备多播一个推送通知。但是，我希望将推送通知发送给某些用户，而不是每个注册的 GCM 设备。

我的第一个想法是将数据库中的每个用户与他们的 GCM regID 相关联。这行得通吗？我已经阅读了有关 regID 更改或重复的内容，这使得它为此目的听起来有点不稳定。

任何关于如何实现向某些设备发送消息的想法都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:28:43.983

我可能不完全理解您的主要担忧，但这里有一些想法。

*   您是对的，Google 可以更改 GCM RegistrationID，您的应用程序有责任使用新的 RegistrationID 更新服务器。
*   您当然应该将数据库中的用户与其各自的 GCM RegistrationID 相关联，因为用户拥有多个设备的可能性很高。
*   通过数据库尖叫并为每个用户/每个设备发送消息应该没有问题，但是如果您只想向用户发送一次消息，则必须随机选择用户/设备组合。

同样，我不确定我是否完全理解您的困境，但也许这会帮助您思考可能的解决方案。

# .htaccess - htaccess 重写规则 - 非标准 URL - 根域后的问号？

> ID：14163972
> 
> 赞同：1
> 
> 时间：2013-01-04T19:53:41.973
> 
> 标签：.htaccess

绕圈子试图获得正确的约定但没有成功......我将如何重定向以下场景：

```
 http://www.domain.com/?page=FINDUS 
```

至

```
 http://www.domain.com/findus.php 
```

# python - mysql数据库无法在django上运行

> ID：14163973
> 
> 赞同：0
> 
> 时间：2013-01-04T19:53:55.380
> 
> 标签：python, mysql, django, python-module

```
DATABASES = {
'default': {
    'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
    'NAME': 'djangodb',             
    'USER': 'root',                 
    'PASSWORD': '',                 
    'HOST': '',                    
    'PORT': '',                      
} 
  } 
```

我创建了一个数据库 djangodb 现在我尝试使用此命令创建表

```
./manage.py syncdb 
```

我希望得到

```
Creating table auth_message
Creating table auth_group
Creating table auth_user
Creating table auth_permission
Creating table django_content_type
Creating table django_session
Creating table django_site
Creating table blog_blogpost 
```

但我得到这个错误：

```
django.core.exceptions.ImproperlyConfigured: Error loading  MySqldb module: no module named MySqldb 
```

我什至尝试设置主机 127.0.0.1 。任何人都可以弄清楚发生了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T19:55:26.790

你安装了 MySQL-python 吗？

```
pip install mysql-python 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T19:56:56.533

从[文档](https://docs.djangoproject.com/en/dev/topics/install/#get-your-database-running)：

> 如果您使用 MySQL，则需要`MySQL-python`1.2.1p2 或更高版本的软件包。您还需要阅读 MySQL 后端的特定于数据库的说明。

# java - Java getConstructor() 方法

> ID：14163979
> 
> 赞同：2
> 
> 时间：2013-01-04T19:54:34.500
> 
> 标签：java

```
import java.util.*;
import java.text.*;
import java.lang.reflect.*;

public class Test {
String name;
public Test()
{
System.out.println("In Construtor");
}
public Test(String name)
{
this.name=name;
System.out.println("In Construtor paramitarized-----"+name);
}

public int q() {
    System.out.println("working");
    return 1;

}
public static void main(String args[] ) throws Exception {
    Class c=Class.forName("Test");
    Test t=(Test)c.newInstance();
    t.q();
    Constructor cons[]=c.getConstructors();
    for(Constructor ci:cons)
    ci.newInstance();
    Constructor<?> pcon=c.getConstructor(String.class);
    pcon.newInstance();
    System.out.println(Test.class.getName());
    }
} 
```

我只是想掌握 Class 和 ClassLoader Classes 的概念。现在这一行`Constructor<?> pcon=c.getConstructor(String.class);`显示 IllegalArgumentException: 为什么？

谢谢 Jon Skeet :) 我用这个和它的工作改变了我的代码

```
Class c=Class.forName("Test");
        Test t=(Test)c.newInstance();
        t.q();

        Constructor<?> pcon=c.getConstructor(String.class);
        pcon.newInstance("arijit");
        System.out.println(Test.class.getName()); 
```

但是当我使用 -Xlint 进行编译时，它给出了下面提到的警告： Uncheck call getConstructor(java.lang.Class....) as a member of raw type java.lang.Class

这是什么意思？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T19:58:37.110

你误诊了。这不是引发异常的语句 - 这是：

```
ci.newInstance(); 
```

您正在尝试为*两个*构造函数调用它（由于`for`循环） - 所以当它调用无参数构造函数时会很好，但当它调用带参数的构造函数时不会`String`。您必须根据当时`ci`引用的构造函数更改该调用以传递正确数量的参数。

你以后有同样的问题：

```
pcon.newInstance(); 
```

这次你*知道*有一个`String`参数（你刚刚要求一个带有字符串参数的构造函数）所以你*绝对知道*你应该提供一个`String`参数，例如

```
pcon.newInstance("foo"); 
```

此外，您应该尝试找出您认为是`getConstructor()`呼叫失败的原因。异常应该给你一个堆栈跟踪，上面有正确的行……能够准确地诊断问题很重要，所以这次有必要看看哪里出了问题。

# screenshot - 尝试将屏幕截图添加到我的 FB 应用程序详细页面，我看不到添加任何选项？

> ID：14163980
> 
> 赞同：1
> 
> 时间：2013-01-04T19:54:38.710
> 
> 标签：screenshot, helper, facebook-page

我正在尝试将屏幕截图添加到我的 FB 应用程序详细页面，但是我已阅读指南，但在实际详细页面上看不到添加任何内容的选项？这阻止了我提交完成的 APP 详细页面。

我想知道如何添加屏幕截图（选项按钮在哪里），因为我看不到任何选项！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:33:02.223

您必须在“设置 > 基本”部分添加“使用 Facebook 登录的网站”站点 url，之后您可以在“应用详情”部分底部看到“屏幕截图”上传区域。

# sockets - 通过 Web 套接字进行通信的协议

> ID：14163985
> 
> 赞同：11
> 
> 时间：2013-01-04T19:55:04.480
> 
> 标签：sockets, web-applications, websocket, protocols, rpc

我正在使用大型且复杂的服务器端组件处理项目的客户端。客户端将在其他上下文中部署为移动应用程序。

对于客户端-服务器通信，有两种相反的观点：

*   使用 REST
*   使用网络套接字

就个人而言，我不介意采用哪种方法，只要生成的 API 经过深思熟虑、易于理解和可扩展即可。

从之前在复杂的基于 C++ 的应用程序上使用 TCP 套接字的经验来看，我知道滚动你自己的语法/协议会很快变得不一致、混乱且难以管理。

是否有任何通用样式或协议（如 REST 或 SOAP）用于使用 Web 套接字进行客户端-服务器通信？在设计您自己的客户端-服务器通信方案/协议方面是否有任何指南或最佳实践？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-11-18T11:45:56.207

你看过[WAMP](http://wamp.ws/)吗？

从上面的页面：

WebSocket 协议已经内置在现代浏览器中，并提供双向、低延迟的基于消息的通信。然而，同样地，WebSocket 它是相当低级的，只提供原始消息传递。

现代 Web 应用程序通常需要更高级别的消息传递模式，例如发布和订阅以及远程过程调用。

这是 WebSocket 应用程序消息传递协议 (WAMP) 进入的地方。WAMP 将 RPC 和 PubSub 的更高级别的消息传递模式添加到 WebSocket - 在一个协议中。

从技术上讲，WAMP 是一个官方注册的 WebSocket 子协议（运行在 WebSocket 之上），它使用 JSON 作为消息序列化格式。

WAMP 采用开放式 Web 标准，旨在易于使用和实施。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T15:49:06.257

杰西，没有任何有意的轻视，我将在研究后回答我自己的问题。

我没有遇到任何与 REST 等效的东西。当前的趋势似乎是使用[JSON](http://json.org)来发送和接收对象。这在面向 JavaScript 的世界中似乎是明智的，并且允许消息在收到时立即更新数据。

例如：

*   [https://developer.mozilla.org/en-US/docs/WebSockets/Writing_WebSocket_client_applications](https://developer.mozilla.org/en-US/docs/WebSockets/Writing_WebSocket_client_applications)
*   [http://blog.new-bamboo.co.uk/2010/2/10/json-event-based-convention-websockets](http://blog.new-bamboo.co.uk/2010/2/10/json-event-based-convention-websockets)

我尝试按照这些思路编写自己的协议。但是，我遇到的最完整定义的协议是[JSON-RPC](http://www.jsonrpc.org/specification)。该协议的另一个优点是，如果您在混合套接字和 HTTP 应用程序中编写，则可以在 HTTP 和 WebSockets 上使用相同的消息传递系统。

我遇到的另一种方法是将现有的消息传递协议“移植”到 WebSockets（不管它们是否使用 JSON）。因此，例如，[XML-RPC](http://xmlrpc.scripting.com/spec)（JSON-RPC 的基础）可以相当简单地重新实现，以便在套接字上使用。事实上，[SOAP](http://www.w3.org/TR/soap12-part1/)也可以通过套接字重新实现。

[尽管上述链接之一是STOMP](http://stomp.github.com/stomp-specification-1.2.html)，但我遇到了一个不错的小型协议。这也可以移植 -[确实有](http://jmesnil.net/stomp-websocket/doc/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T10:55:05.093

假设使用 java，我喜欢 Cometd (www.cometd.org) 作为一种消息传递机制，它位于 http、websocket 甚至 spdy 等协议之上，或者任何新协议出现。类似的东西的吸引力在于您编写该 api 并且它无缝地整理出对于给定的客户端/服务器组合的最佳底层协议是什么。如果您使用的是旧 IE，那么它会恢复到正常的 http，但如果它是新的 IE，那么它可能会选择 websockets。如果您使用的是 chrome 或 firefox，那么您将获得 spdy，当基于 spdy 的 http/2.0 登陆时，您将能够更新 cometd 并免费获得它。此外，在 websocket 之上使用更高级的协议，您可以在通过隧道和失去连接等情况下获得消息恢复等功能。

所以就个人而言，我并不认为 REST 和 websocket 是竞争或对立的，它们是不同的生物。REST 是一种由 HTTP 风格的无状态环境产生的解决方案，并且玩弄了 url 的约定，而 websocket 是 http 的替代协议。使用 REST，您不太可能会担心预热 TCP 连接，以便获得更好的吞吐量，但这些事情在可能更长寿命的连接（如 websocket 或 spdy）中变得更加常见。虽然带有流水线的 http/1.1 是一个选项，但由于支持乏善可陈，直到最近移动浏览器才真正开始默认使用它，它并没有发挥其潜力。

# c++ - 为什么我的 C++/QT 应用程序在 Linux x86_64 上的 nanosleep() 中崩溃？

> ID：14163995
> 
> 赞同：2
> 
> 时间：2013-01-04T19:55:31.817
> 
> 标签：c++, linux, qt, crash, qtwebkit

我在 x86_64 上的 Ubuntu 12.10 下运行用 Qt/C++ 编写的服务器端 webkit 渲染器。Qt 是定制的 4.8.4 以及 qtwebkit 2.3。

在大约 5% 的渲染任务中，应用程序会这样崩溃（gdb 日志）：

```
This GDB was configured as "x86_64-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from /home/something...done.
[New LWP 27328]
[New LWP 27825]
[New LWP 27807]
[New LWP 28981]
[New LWP 27808]
[New LWP 28387]
[New LWP 28575]
[New LWP 28837]
[New LWP 28879]
[New LWP 28891]
[New LWP 27326]
[New LWP 28420]
[New LWP 28681]

warning: Can't read pathname for load map: Input/output error.
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".
Core was generated by `/home/something'.
Program terminated with signal 11, Segmentation fault.
#0  0x00007f793a58183d in nanosleep () at ../sysdeps/unix/syscall-template.S:82
82  ../sysdeps/unix/syscall-template.S: No such file or directory.
#0  0x00007f793a58183d in nanosleep () at ../sysdeps/unix/syscall-template.S:82
#1  0x00007f793a5816dc in __sleep (seconds=0) at ../sysdeps/unix/sysv/linux/sleep.c:138
#2  0x00007f793db80014 in ?? () from /usr/local/qt-4.8.4-git/lib/libQtWebKit.so.4
#3  0x00007f793db80309 in ?? () from /usr/local/qt-4.8.4-git/lib/libQtWebKit.so.4
#4  0x00007f793b09de9a in start_thread (arg=0x7f7934b41700) at pthread_create.c:308
#5  0x00007f793a5b5cbd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:112
#6  0x0000000000000000 in ?? ()
(gdb) quit 
```

这怎么可能？我能做些什么来减轻这种崩溃？

*更新：*此处其他线程的回溯：http: [//pastie.org/5623164](http://pastie.org/5623164)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T00:10:35.853

事实证明，这是一个错误的回溯。在用相同的构建但使用调试符号替换 libQtWebKit 后，我​​得到了一个完全不同的回溯，这是有意义的。

tl; dr - nanosleep() 中没有崩溃，这只是 gdb 的错误解析。

# mysql - 在具有多行的 INSERT 上生成 MAX(field1)+1

> ID：14163996
> 
> 赞同：0
> 
> 时间：2013-01-04T19:55:38.713
> 
> 标签：mysql

我有这张桌子（叫它`tableA`）：

```
id (PK, autoincrement)
field1 (integer)
field2 (integer) 
```

我想从另一个表中插入一些记录，如下所示：

```
INSERT INTO tableA (field1, field2)
SELECT *something*, tableB.field2
FROM tableB; 
```

现在，我需要`field1`在每一行中填充一个新整数，类似于`id`填充方式（类似于“ `MAX(field1)+1`”）。有没有办法做到这一点，也许使用子查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:27:58.270

I am not 100% sure that there isn't any concurrency issue here, but I would start with a trigger like this:

```
CREATE TRIGGER ins_your_table BEFORE INSERT ON your_table 
FOR EACH ROW
  SET new.field1=case when new.field1 is null then
      coalesce((select max(field1)+1 from your_table),1)
    else new.field1 end
;

insert into your_table (field1, field2) values (10, 1),(11, 2),(12, 3);

select * from your_table;

| ID | FIELD1 | FIELD2 |
------------------------
|  1 |     10 |      1 |
|  2 |     11 |      2 |
|  3 |     12 |      3 |

delete from your_table;

insert into your_table (field1, field2) values (10, 1),(11, 2),(12, 3);
insert into your_table (field2) values (4),(5),(6);

select * from your_table;

| ID | FIELD1 | FIELD2 |
------------------------
|  1 |     10 |      1 |
|  2 |     11 |      2 |
|  3 |     12 |      3 |
|  4 |     13 |      4 |
|  5 |     14 |      5 |
|  6 |     15 |      6 | 
```

See some examples on [this fiddle](http://sqlfiddle.com/#!2/3a2c7/1/0).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:59:53.980

我想出了这个：

```
SET @newVAL = (SELECT MAX(field1) FROM tableA);
INSERT INTO tableA (field1, field2)
SELECT @newVAL := @newVAL+1, tableB.field2
FROM tableB 
```

这个想法是首先获取 MAX 值`field1`，将其存储在一个变量中，然后在每个选定的行上递增它。