# StackOverflow 问答 13160000-13160999

# python - Pinax 在win7 下用eclipse 运行吗？

> ID：13160002
> 
> 赞同：0
> 
> 时间：2012-10-31T14:15:05.257
> 
> 标签：python, django, eclipse, pinax

我已经安装了 pinax，并创建了一个项目`pinax-admin`

然后我将该项目复制到一个空的 django-eclipse 项目中，并想从 Eclipse 控制台运行 synchdb，但我只得到：

```
Traceback (most recent call last):
  File "C:\Users\marcus\Desktop\wseclipse\testpinax\testsite\manage.py", line 20, in <module>
    execute_from_command_line()
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 261, in fetch_command
    klass = load_command_class(app_name, subcommand)
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 69, in load_command_class
    module = import_module('%s.management.commands.%s' % (app_name, name))
  File "C:\Python27\lib\site-packages\django\utils\importlib.py", line 35, in import_module
    __import__(name)
  File "C:\Python27\lib\site-packages\django\core\management\commands\syncdb.py", line 8, in <module>
    from django.core.management.sql import custom_sql_for_model, emit_post_sync_signal
  File "C:\Python27\lib\site-packages\django\core\management\sql.py", line 6, in <module>
    from django.db import models
  File "C:\Python27\lib\site-packages\django\db\__init__.py", line 11, in <module>
    if DEFAULT_DB_ALIAS not in settings.DATABASES:
  File "C:\Python27\lib\site-packages\django\utils\functional.py", line 184, in inner
    self._setup()
  File "C:\Python27\lib\site-packages\django\conf\__init__.py", line 42, in _setup
    self._wrapped = Settings(settings_module)
  File "C:\Python27\lib\site-packages\django\conf\__init__.py", line 95, in __init__
    raise ImportError("Could not import settings '%s' (Is it on sys.path?): %s" % (self.SETTINGS_MODULE, e))
ImportError: Could not import settings 'testpinax.settings' (Is it on sys.path?): No module named testpinax.settings
Finished "manage.py syncdb" execution. 
```

我在我的 postgresql 数据库中创建了表，但是当我想运行该项目时，我得到：

```
Traceback (most recent call last):
  File "C:\Users\marcus\Desktop\wseclipse\testpinax\testsite\manage.py", line 20, in <module>
    execute_from_command_line()
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 261, in fetch_command
    klass = load_command_class(app_name, subcommand)
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 69, in load_command_class
    module = import_module('%s.management.commands.%s' % (app_name, name))
  File "C:\Python27\lib\site-packages\django\utils\importlib.py", line 35, in import_module
    __import__(name)
  File "C:\Python27\lib\site-packages\django\core\management\commands\runserver.py", line 8, in <module>
    from django.core.servers.basehttp import AdminMediaHandler, run, WSGIServerException, get_internal_wsgi_application
  File "C:\Python27\lib\site-packages\django\core\servers\basehttp.py", line 26, in <module>
    from django.views import static
  File "C:\Python27\lib\site-packages\django\views\static.py", line 95, in <module>
    template_translatable = ugettext_noop(u"Index of %(directory)s")
  File "C:\Python27\lib\site-packages\django\utils\translation\__init__.py", line 75, in gettext_noop
    return _trans.gettext_noop(message)
  File "C:\Python27\lib\site-packages\django\utils\translation\__init__.py", line 48, in __getattr__
    if settings.USE_I18N:
  File "C:\Python27\lib\site-packages\django\utils\functional.py", line 184, in inner
    self._setup()
  File "C:\Python27\lib\site-packages\django\conf\__init__.py", line 42, in _setup
    self._wrapped = Settings(settings_module)
  File "C:\Python27\lib\site-packages\django\conf\__init__.py", line 95, in __init__
    raise ImportError("Could not import settings '%s' (Is it on sys.path?): %s" % (self.SETTINGS_MODULE, e))
**ImportError: Could not import settings 'testpinax.settings' (Is it on sys.path?): No module named testpinax.settings** 
```

但是当我查看我的项目时，您可以看到 settings.py 文件在那里：

![在此处输入图像描述](../Images/6fa155227f6b355429f54861286bee92.png)

我究竟做错了什么？

PS.：我正在运行 win7、eclipse indigo 和 postgresl 1.16

**更新**

```
>>> import sys
>>> print sys.path
['', 'C:\\Python27\\lib\\site-packages\\setuptools-0.6c11-py2.7.egg', 'C:\\Pytho
n27\\lib\\site-packages\\pip-1.2.1-py2.7.egg', 'C:\\Windows\\system32\\python27.
zip', 'C:\\Python27\\DLLs', 'C:\\Python27\\lib', 'C:\\Python27\\lib\\plat-win',
'C:\\Python27\\lib\\lib-tk', 'C:\\Python27', 'C:\\Python27\\lib\\site-packages'] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:31:14.823

错误消息要求您将`testpinax`文件夹附加到`PYTHONPATH`环境变量中，查看[此](https://stackoverflow.com/questions/101268/hidden-features-of-python#113833)wiki 条目以获取有关如何实现该目标的可能解决方案。

问题可能源于您没有从`testpinax`文件夹启动脚本。

# ruby-on-rails - 从 heroku 连接到 EC2 上的 postgresql

> ID：13160005
> 
> 赞同：0
> 
> 时间：2012-10-31T14:15:15.047
> 
> 标签：ruby-on-rails, postgresql, heroku, amazon-ec2

我从 Heroku 应用程序连接到 EC2 上的外部 Postgresql 数据库时遇到问题。问题似乎与 EC2 上的许可有关。

我已经完成了以下操作： - 在端口 5432（我的 postgresql 端口）上为我的安全组添加了 098166147350/default - 使用“公共 DNS”地址（ec2-xxxx.compute-1.amazonaws.com）连接到站点。

我尝试连接的数据库在欧盟而不是美国东部地区作为heroku应用程序，不知道这是否有什么不同？

无论如何，如果我将 0.0.0.0/0 添加到 5432 它确实有效，所以我想它必须是安全设置。

任何人都知道问题可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:52:39.543

我从 Heroku 支持回来了：显然，不同的 i 区域（us-east (heroku) -> eu (my db)）在添加这样的安全组时有所不同。所以他们建议在我的帐户上从 us-east 到欧盟的 VPN 隧道。或者只是 0.0.0.0/0 并依赖 SSL 和良好的密码。

# c# - 使用 facebook c# SDK 发布后未上传图片

> ID：13160006
> 
> 赞同：1
> 
> 时间：2012-10-31T14:15:14.800
> 
> 标签：c#, facebook, facebook-graph-api, facebook-c#-sdk

我正在使用 Facebook c# SDK 在用户墙上发布状态和图像。

我可以发布状态，但图片未发布

这是我的代码：

```
[HttpPost]
    public ActionResult PostPhotoOnWall(HttpPostedFileBase file)
    {
        var client = new FacebookClient();

        // Post to user's wall
        var postparameters = new Dictionary<string, object>();

        postparameters["access_token"] = Session["access_token"].ToString();
        postparameters["picture"] = "http://localhost:8691/Content/themes/base/images/12WIPJ50240-2V91.jpg";

        var result = client.Post("/me/feed", postparameters);

        return View("PostPhoto");
    } 
```

用户墙上状态张贴没有图像。

谁能帮我 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:06:52.720

我解决了，下面是代码

```
[HttpPost]
    public ActionResult PostPhotoOnWall(HttpPostedFileBase file)
    {
        var filename = Path.GetFileName(file.FileName);

        var client = new FacebookClient();

        // Post to user's wall
        var postparameters = new Dictionary<string, object>();
        var media = new FacebookMediaObject
        {
            FileName = filename,
            ContentType = "image/jpeg"
        };
        var path = Path.Combine(Server.MapPath("~/Content/themes/base/images"),filename);
        file.SaveAs(path);

        byte[] img = System.IO.File.ReadAllBytes(path);
        media.SetValue(img);

      postparameters["source"] = media;
        postparameters["access_token"] = Session["access_token"].ToString();
     //   postparameters["picture"] = "http://localhost:8691/Content/themes/base/images/12WIPJ50240-2V91.jpg";

        var result = client.Post("/me/photos", postparameters);

        return View("PostPhoto");
    } 
```

# android - AVD/Eclipse 移动网络设置“数据已启用”错误

> ID：13160016
> 
> 赞同：1
> 
> 时间：2012-10-31T14:15:57.387
> 
> 标签：android, eclipse, logcat

每当我在我的 AVD 中取消选中“启用数据”（设置-> 移动网络设置）时，我都会收到以下错误，我失去了 LogCat 连接，我必须重新启动 AVD/Eclipse：

```
[2012-10-31 16:11:07 - Unexpected error while launching logcat. Try reselecting the device.] device not found
com.android.ddmlib.AdbCommandRejectedException: device not found
    at com.android.ddmlib.AdbHelper.setDevice(AdbHelper.java:752)
    at com.android.ddmlib.AdbHelper.executeRemoteCommand(AdbHelper.java:373)
    at com.android.ddmlib.Device.executeShellCommand(Device.java:462)
    at com.android.ddmuilib.logcat.LogCatReceiver$1.run(LogCatReceiver.java:109)
    at java.lang.Thread.run(Unknown Source) 
```

这种行为是预期的吗？我可以做些什么来“重新附加”LogCat 吗？

编辑：我在第二台电脑上试过这个。这次没有错误日志，但 LogCat 通信仍然丢失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:37:18.873

我猜想取消选择“启用数据”时禁用的数据通信包括 logcat 用来连接手机的数据通信（我一直认为它是某种串行端口，但我猜它使用网络，而不是。 .)。

所以，我很确定没有解决方法，即在与 avd 的通信关闭时，您无法与 avd 通信；但是，由于 afaik logcat 的行为有点像 a `tail -f logfile`，因此一旦重新打开数据并将 logcat 重新连接到设备，您应该能够读取“丢失”的日志条目（如果它没有自动执行此操作，则应该重新连接选项，如果没有，您仍然可以使用 sdk 中的命令行工具来读取日志）。

# php - 我将如何在我自己的 Magento 模块中重新创建在 CMS->Pages 中看到的页面网格列表

> ID：13160017
> 
> 赞同：0
> 
> 时间：2012-10-31T14:15:59.243
> 
> 标签：php, magento-1.7, magento

我在后端创建了一个 Magento 管理模块，它有自己的菜单和页面，并试图`CMS->Pages`在我自己的页面上重新创建它的网格中的每个页面的列表，然后添加我自己的列。

到目前为止，在为管理部分打开模板提示后，我已经看到原始 Magento CMS 部分模板是从`adminhtml\default\default\template\widget/grid.phtml`.

我已将此文件的内容复制到我的页面，但当然，`$this`原始使用的引用在我自己的模块页面上没有与之关联的相同加载类/数据。

谁能告诉我我是否符合这一点，或者我如何可以达到与 相同的效果`CMS->Pages`，但在我自己的页面上并添加我自己的专栏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:11:04.267

为此，您可以创建一个扩展 /app/code/core/Mage/Adminhtml/Block/Cms/Block/Grid.php 的自定义模块

假设您要向 cms 表添加数据库字段

创建/app/code/local/RWS/CmsGrid/etc/config.xml

```
<global>
   <blocks>
      <adminhtml>
        <rewrite>
          <cms_block_grid>RWS_CmsGrid_Block_Cms_Block_Grid</cms_block_grid>
        </rewrite>
      </adminhtml>
   </blocks>
</global> 
```

创建/app/code/local/RWS/CmsGrid/Block/Cms/Block/Grid.php

```
class RWS_CmsGrid_Block_Cms_Block_Grid extends Mage_Adminhtml_Block_Cms_Block_Grid
{

   protected function _prepareColumns()
   {

      $this->addColumn('xxxxxx', array(
          'header'    => Mage::helper('cms')->__('Xxxxx'),
          'align'     => 'left',
          'index'     => 'title',
     ));
     .......... 
```

查看更多信息

*   [Magento - 覆盖 Adminhtml 块](https://stackoverflow.com/questions/1876897/magento-overriding-adminhtml-block)

*   [http://www.atwix.com/magento/adding-custom-attribute-to-a-cms-page/](http://www.atwix.com/magento/adding-custom-attribute-to-a-cms-page/)

# mysql - MySQL使用索引构建/链接表

> ID：13160020
> 
> 赞同：1
> 
> 时间：2012-10-31T14:16:10.170
> 
> 标签：mysql, database, database-design, phpmyadmin

我已经完成了为学校课程目录设计表结构。我正在使用四个表`majors`，，，，`courses`。下面我详细介绍了每个表的组成部分。一些表将使用基于. 我是数据库新手，正在努力在我的数据库中构建这些表。如何使这些表与 using 链接在一起？或者有没有更好的方法来为我的目的构建这些表。如果可能的话，提供一个查询来创建这些表会很棒。`course_hours``course_date``course_id``course_id`

希望我对变量使用正确的类型（、、、`int`等`varchar`）`text`。

餐桌**课程示例**

```
id serial
course_name varchar
course_code varchar
description text 
```

**course_dates 表示**例（使用索引）

```
id int
course_id int
year date
semester int 
```

**course_hours 表示**例（使用索引）

```
id int
course_id int
hours int 
```

**表专业**示例（一对多关系索引）

```
 major_id int
 course_id int 
 major_name varchar 
```

**因此，填充的数据库将包含以下内容：**

桌子`courses`

```
course_id course_code course_name       course_description
1     INF1000     Visual Studio I   "Basic programming"
2     INF1001     Visual Stuido II  "More programming" 
```

表`course_dates`（春季0个，秋季1个，全年2个）

```
id course_id year semester
1  1         2012 0
2  1         2013 1
3  2         2013 1 
```

桌子`course_hours`

```
id course_id course_hours 
1  1         3 
2  1         4 
3  2         4 
```

桌子`majors`

```
id course_id major_name
1  1         Computer Engineering 
2  1         Information Systems 
3  2         Network Administrator 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T14:38:20.073

我会做一些重组：

*   为课程添加小时数并删除 course_hours 表（我认为将小时数提取到单独的表没有任何优势）
*   course_dates 最好命名为学期，字段为年（int）和学期（int）
*   专业应该只解释每个专业，所以取出 course_id 并将其放入外部参照表
*   将所有表格重命名为单数形式（只是样式偏好）

给你一个结构，如： ![ERD](../Images/13b630869d6ea6e91e9aafbf22b91f2b.png)

编辑：让它回到一个mysql盒子。这是这个结构的脚本。请记住，您可能想要更改字符集和引擎类型，因为它们可以根据每个数据库进行更改，默认情况下这些可能没问题

```
CREATE TABLE IF NOT EXISTS `course` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(100) NOT NULL,
  `code` varchar(10) NOT NULL,
  `description` varchar(500) DEFAULT NULL,
  `hours` tinyint(6) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `course_semester_xref` (
  `course_id` int(11) NOT NULL,
  `semester_id` int(11) NOT NULL,
  PRIMARY KEY (`course_id`,`semester_id`),
  KEY `semester_id` (`semester_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE IF NOT EXISTS `major` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) NOT NULL,
  `description` varchar(500) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `major_course_xref` (
  `major_id` int(11) NOT NULL,
  `course_id` int(11) NOT NULL,
  PRIMARY KEY (`major_id`,`course_id`),
  KEY `course_id` (`course_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE IF NOT EXISTS `semester` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `year` smallint(6) NOT NULL,
  `semester` tinyint(4) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

ALTER TABLE `course_semester_xref`
  ADD CONSTRAINT `course_semester_xref_ibfk_2` FOREIGN KEY (`semester_id`) REFERENCES `semester` (`id`),
  ADD CONSTRAINT `course_semester_xref_ibfk_1` FOREIGN KEY (`course_id`) REFERENCES `course` (`id`);

ALTER TABLE `major_course_xref`
  ADD CONSTRAINT `major_course_xref_ibfk_2` FOREIGN KEY (`course_id`) REFERENCES `course` (`id`),
  ADD CONSTRAINT `major_course_xref_ibfk_1` FOREIGN KEY (`major_id`) REFERENCES `major` (`id`); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:48:46.460

> 表 course_hours
> 
> id course_id course_hours
> 1 1 3
> 2 1 4
> 3 2 4

如果`course_hours`对应`course_dates, year + semester`，则应将其集成到`course_dates`中，否则无法将其链接在一起，并且会保存不必要的附加表。

# svn - 在 Subclipse 中重新集成分支

> ID：13160025
> 
> 赞同：2
> 
> 时间：2012-10-31T14:16:27.480
> 
> 标签：svn, merge, subclipse, svn-reintegrate

我的问题与以下问题基本相同，只是我使用的是带有 svn 1.6.17 的 subclipse，但从未真正得到回答。

[在 Subversion 1.5 中将分支重新集成到主干时缺少范围错误消息](https://stackoverflow.com/questions/2472249/problem-reintegrating-a-branch-into-the-trunk-in-subversion-1-5)

我已将所有更改合并到似乎工作正常的分支中。但是，当我尝试将分支重新集成回主干时，出现以下错误：

> 仅当修订 16530 到 24993 之前从 Trunk-Repo-URL 合并到重新集成源时，才能使用重新集成，但情况并非如此。

然后它列出了一些缺少范围的文件。

当我去分支并查看这些文件的历史记录时，它们都在修订版 24992（我相信它们在合并时都有问题需要纠正）。主干逻辑上具有较旧的修订版。

任何指向我哪里出错的指针，因为错误似乎在告诉我做我已经做过的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:14:14.853

错误来自 Subversion 本身。这意味着这些文件具有子树合并信息，表明它们尚未将所有更改合并到其中。解决问题的方法应该是将所有修订从主干合并到项目的根目录。这应该清理子树合并信息以指示这些文件已将所有修订合并到它们。

在这种情况下，历史文件上的修订号是没有意义的。该消息与错误中列出的子树上的 svn:mergeinfo 相关。同样，对其父级进行完全合并并提交结果，应该清理它。

# php - PHP_APC 扩展导致 WAMP 服务器出错

> ID：13160027
> 
> 赞同：0
> 
> 时间：2012-10-31T14:16:31.387
> 
> 标签：php, caching, apc

我有 Windows 2003 Webserver 和 Apache 2.2.23 和 php 5.3.18 VC9 ts。当我添加 php_apc 3.1.9 扩展时，它工作了一个多小时并关闭了 Apache。我只能使用 Apache Monitor 上的停止和启动按钮重新启动 apache，因为重新启动按钮会弹出错误消息并使 Apache 失败。apc 的新 beta 版本不起作用，旧版本也不起作用。也许新版本的php与apc冲突？我没有别的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:20:01.680

发生此类错误的最常见原因是如果您有 PHP 线程安全并且您尝试设置不安全扩展或相反...

获取线程安全和非线程安全的 apc 扩展，并尝试使用它们中的每一个运行您的 apache..

# php - Sphinx - API 返回的结果似乎忽略了标题列

> ID：13160028
> 
> 赞同：0
> 
> 时间：2012-10-31T14:16:36.257
> 
> 标签：php, sphinx

我已经设置了最新版本的 Sphinx，并且正在使用 PHP API。

目前，API 返回的结果似乎与搜索守护进程的结果完全不同。看起来 API 结果完全忽略了数据库中的标题列。因此，“页内”结果是无意义的，因为即使搜索查询包含出现在标题中的关键词，结果也不会显示具有匹配标题的文档（它们被埋在 1000 个中间的某个地方+ 结果）。

下面是 sphinx 配置和与 API 交互的 PHP 脚本。

[http://pastebin.com/mLmawDh9](http://pastebin.com/mLmawDh9)

```
 // PHP script
    $cl = new SphinxClient();
    $cl->SetServer($CONF['sphinx_host'], $CONF['sphinx_port']);
    $cl->SetFieldWeights(array("title"=>10));
    $cl->SetLimits(0, 1000);
    $result = $cl->Query($q); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:39:23.283

已经取得了一些进展 - 请忽略这个问题以下有此查询的最新响应 [Sphinx PHP API order 与 Search Daemon 不同](https://stackoverflow.com/questions/13162698/sphinx-php-api-order-differs-from-search-daemon)

# sencha-touch - Compass - 获取生成的精灵图的宽度和高度

> ID：13160038
> 
> 赞同：2
> 
> 时间：2012-10-31T14:17:18.673
> 
> 标签：sencha-touch, extjs, sencha-touch-2, sass, compass-sass

我正在构建一个 Sencha Touch 移动应用程序，并使用该功能通过 Compass 创建图像精灵图。

有什么方法可以计算图像映射的大小（宽度和高度）并将其作为变量放入您的 SCSS 文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:30:37.237

在 Compass 中，[image-height](http://compass-style.org/reference/compass/helpers/image-dimensions/#image-height)和[image-width](http://compass-style.org/reference/compass/helpers/image-dimensions/#image-width)是获取图像尺寸的函数。将它们与您的精灵图一起使用看起来像这样（警告，未经测试）：

```
// Assuming $my-sprites is your sprite map variable
$map-path: sprite-path($my-sprites);

$map-height: image-height($map-path);
$map-width: image-width($map-path); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-26T10:58:31.537

在最新版本的 Sass (3.4) 中， sprite-path() 返回完整的文件系统路径，而 image-width() 需要相对于图像目录的路径。但是有一个简单的解决方案：

```
sprite-width($sprite-map);
sprite-height($sprite-map); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-08T12:57:06.903

您可以使用神奇的维度函数`<map>-sprite-height`和`<map>-sprite-width`.

```
// Note: "my-icons" represents the folder name that contains your sprites.

@import "my-icons/*.png";
$box-padding: 5px;
$height: my-icons-sprite-height(some_icon);
$width: my-icons-sprite-width(some_icon);

.somediv {
  height:$height + $box-padding;
  width:$width + $box-padding;
} 
```

查看[官方文档](http://compass-style.org/help/tutorials/spriting/)以获取更多详细信息。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-01T05:32:44.273

Ext.getBody().getSize() 让你得到屏幕的高度和宽度，但我认为你不能在 SASS 中写这个

# php - 如何在没有相同父级的类之间共享代码？

> ID：13160039
> 
> 赞同：1
> 
> 时间：2012-10-31T14:17:20.433
> 
> 标签：php, php-5.2

我有外部库的 A、B 类，我的 A2 类扩展 A，B2 扩展 B。A2 类和 B2 类的代码完全相同。我可以分享吗？代码做一些工作并调用父函数：

```
class A2 extends A
{
  function func1($var1, $var2,...)
  {
     ...
     ... Do some job
     ...
     return parent::func1($var1, $var2,...);
  }
  function func2($var1, $var2,...)
  {
     ...
     ... Do some job
     ...
     return parent::func2($var1, $var2,...);
  }
  ...
  ...
  ...
}

class B2 extends B
{
  function func1($var1, $var2,...)
  {
     ...
     ... Do some job
     ...
     return parent::func1($var1, $var2,...);
  }
  function func2($var1, $var2,...)
  {
     ...
     ... Do some job
     ...
     return parent::func2($var1, $var2,...);
  }
  ...
  ...
  ...
} 
```

我坚持使用 PHP 5.2.x 并且`allow_url_include=off`（由于客户限制），

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:21:07.447

如果 A2 和 B2*完全相同*，则将其转换为自己的类，而不是让它扩展现有的类。然后，您可以将该类的对象传递给实际需要使用它的任何其他对象。

另请参阅：[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:36:16.573

从另一个方向来看这似乎是一个好主意。A 类和 B 类具有不同的代码，但 A2 和 B2 具有相同的代码，因此我们将那段代码称为 C。您需要的是 A2 和 B2 类，其中 A2 具有 A 和 C 的功能，并且B2 具有 B 和 C 的功能。你能让 C 成为 A 和 B 的超类吗？然后，您只需直接使用这两个类，无需重复代码。

# sql - 用于连接并在多列中给出结果的 SQL 语句

> ID：13160047
> 
> 赞同：-2
> 
> 时间：2012-10-31T14:17:42.263
> 
> 标签：sql, oracle, join, pivot

任何人都可以帮助我使用 sql 语句来产生以下结果吗？

```
Table Person
Person_ID  Name
1          John
2          Paul

Table Declaration
Decl_ID             Person_ID   Amount
1                   1               10
2                   2               12
3                   1               99
4                   1               24 
```

SQL 语句的结果应如下所示：

```
Name    Amount1 Amount2 Amount3
John    10      99      24
Paul    12 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:33:56.940

您没有指定 RDBMS，但这基本上是`pivot`您的数据库有权访问该功能的情况。如果没有，那么您可以使用 a`case`和聚合函数进行复制。

~~**MySQL**：~~

 ~~```
select name,
  sum(case when group_rn = 1 then amount else 0 end) Amount1,
  sum(case when group_rn = 2 then amount else 0 end) Amount2,
  sum(case when group_rn = 3 then amount else 0 end) Amount3
from
(
  select name,
    @num := if(@name = `name`, @num + 1, 1) as group_rn,
    @name := `name` as dummy,
    amount
  from
  (
    select p.name,
      d.amount,
      d.decl_id
    from person p
    inner join declaration d
      on p.person_id = d.person_id
  ) src
  order by name
) p
group by name 
```~~ 

~~请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/6f262/15)~~

在 SQL Server 和 Oracle 中，该`PIVOT`函数存在：

**SQL 服务器**：

```
select name,
  [1] as Amount1,
  [2] as Amount2,
  [3] as Amount3
from
(
  select p.name,
    d.amount,
    row_number() over(partition by p.name order by d.amount) rn
  from person p
  inner join declaration d
    on p.person_id = d.person_id
) src
pivot
(
  sum(amount)
  for rn in ([1], [2], [3])
) p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/920da/3)

如果您想要转换为列的数量未知，您可以创建动态版本。

编辑，您说您使用的是 Oracle，所以 oracle 的具体答案如下：

**Oracle** 11g 具有以下`pivot`功能：

```
select name,
  Amount1,
  Amount2,
  Amount3
from
(
  select p.name,
    d.amount,
    row_number() over(partition by p.name order by d.amount) rn
  from person p
  inner join declaration d
    on p.person_id = d.person_id
) src
pivot
(
  sum(amount)
  for rn in ('1' as Amount1, '2' as Amount2, '3' as Amount3)
) p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/949b4/1)

如果您不在 Oracle 11g 上，则需要使用`CASE`with 聚合函数：

```
select name,
  sum(case when rn = 1 then amount else 0 end) Amount1,
  sum(case when rn = 2 then amount else 0 end) Amount2,
  sum(case when rn = 3 then amount else 0 end) Amount3
from
(
  select p.name,
    d.amount,
    row_number() over(partition by p.name order by d.amount) rn
  from person p
  inner join declaration d
    on p.person_id = d.person_id
) src
group by name 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/949b4/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:48:38.447

我认为你正在寻找的是一个动态的支点。问题是当您需要动态数据透视时，您需要将查询作为字符串执行。

查找示例：[http ://www.sqlhub.com/2009/05/generic-stored-procedure-for-pivot-in.html](http://www.sqlhub.com/2009/05/generic-stored-procedure-for-pivot-in.html)

# c# - 方法名称的预定义宏

> ID：13160049
> 
> 赞同：5
> 
> 时间：2012-10-31T14:17:48.680
> 
> 标签：c#, asp.net, webforms, c-preprocessor

在 C++ 中，有预定义的宏，例如`__FUNCTION__`，它们编译为使用宏的函数名的字符串文字。

```
void MyFunc()
{
    printf("I'm in %s!", __FUNCTION__); // I'm in MyFunc!
} 
```

C#有类似的东西吗？我希望为 asp.net 网络表单执行此操作：

```
public string MyProperty
{
    get { return (string)ViewState[__PROPERTY__]; }
    set { ViewState[__PROPERTY__] = value; }
} 
```

显然这不起作用（否则我不会问这个问题），我想知道 C# 中是否有类似的东西不使用反射或与使用字符串文字相比有任何负面的性能影响`"MyProperty"`。

这有望减少我的拼写错误，但我可以想到其他一些有用的例子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-28T03:40:09.757

[C# 的预处理器不支持具有关联值（如 C++）的宏，但是您可以通过编译器生成的Caller Information](http://msdn.microsoft.com/en-us/library/hh534540.aspx "来电者信息")使用支持 C# 5.0 及更高版本（因此至少是 VS2012+）的编译器来完成您尝试做的事情。具体来说，通过System.Runtime.CompilerServices*命名空间中的**CallerMemberNameAttribute*。根据您的问题代码，我创建了以下示例来说明如何去做您想做的事情：

 *```
using System;

class ViewState
{
    public string this[string propertyName]
    {
        get { return propertyName; }
        set { }
    }
};
class View
{
    ViewState mState = new ViewState();

    static string GetCallerName(
        [System.Runtime.CompilerServices.CallerMemberName] string memberName = "")
    {
        return memberName;
    }

    public string MyProperty
    {
        get { return (string)mState[GetCallerName()]; }
        set { mState[GetCallerName()] = value; }
    }
};
class Program
{
    static void Main(string[] args)
    {
        var view = new View();
        Console.WriteLine(view.MyProperty);

        Console.ReadKey();
    }
}; 
```

“MyProperty”将打印到控制台。编译时，编译器会将 GetCallerName 的 memberName 参数的默认值替换为调用构造的（属性、方法等）名称。所以程序员不需要代码维护

还应该注意的是，这还有一个额外的好处，就是能够很好地使用混淆工具，只要它们发生在编译后。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T14:25:49.930

您可以使用[StackTrace 和 StackFrame](http://msdn.microsoft.com/en-us/library/system.diagnostics.stackframe.getmethod.aspx)来获取当前方法的名称

```
StackTrace st = new StackTrace(); 
StackFrame sf = st.GetFrame(1);
string method = sf.GetMethod().ToString(); 
```

对于属性，返回的方法名称将包含魔法`get_`或`set_`前缀。

但是，我认为您不能像在 C++ 中那样真正将其重构为内联宏或函数。但是，如果您确实重构了一个实用方法来干燥它，您可能只需将 StackTrace 弹出一步来记录调用者的信息？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T14:35:43.390

我不知道`ViewBag`ASP.NET WebForms 中是否有类似的东西。万一没有，滚动你自己并不难。然后，您可以将其包装`ViewState`在该类中，并根据需要获得常规的属性成员访问权限。

```
public class ExpandoViewState : DynamicObject
{
    private readonly StateBag _viewState;

    public ExpandoViewState(StateBag viewState)
    {
        _viewState = viewState;
    }

    public override bool TryGetMember(GetMemberBinder binder, out object result)
    {
        result = _viewState[binder.Name];
        if (result != null)
            return true;
        return base.TryGetMember(binder, out result);
    }

    public override bool TrySetMember(SetMemberBinder binder, object value)
    {
        _viewState[binder.Name] = value;
        return true;
    }
}

...

dynamic state = new ExpandoViewState(ViewState);
var val = (string)state.MyProperty;
state.MyProperty = "hi"; 
```*

# java - 默认构造函数调用带有 null 的 InterfaceConstructor

> ID：13160052
> 
> 赞同：4
> 
> 时间：2012-10-31T14:18:22.530
> 
> 标签：java

我尝试这样做：

```
public class Demo{
public Demo() {
    Demo(null)
}
public Demo(Interface myI) {
    ...
}
} 
```

我希望`Demo()`构造函数调用`Demo(Interface)`构造函数，`null`但是 eclipse 在我调用的行上抱怨“Demo(null) is undefined” `Demo(null)`。我必须改变什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T14:20:06.703

不应该`Demo(null)`只是`this(null)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T14:20:12.990

您正在尝试调用尚未定义的*方法。*`Demo`

例如

```
class A {
   public A() {
      this(1); // calls constructor A(int)
      A(1); // calls method A(int)
   }
   public A(int i) {} // constructor A(int)
   public void A(int i) {} // method A(int)

   public A A(A a) { return a; } // method A(A) which returns A
} 
```

如果您希望构造函数调用另一个构造函数，则需要使用`this()`like

```
public Demo() {
    this(null);
} 
```

# java - 支持 Java-web-start 的 CDI 容器

> ID：13160061
> 
> 赞同：0
> 
> 时间：2012-10-31T14:18:48.940
> 
> 标签：java, ioc-container, cdi, java-web-start

哪些 CDI 容器支持使用 java-web-start 启动？

# php - Joomla Component MVC 变量在 View 和 Controller 之间传递

> ID：13160062
> 
> 赞同：0
> 
> 时间：2012-10-31T14:19:05.703
> 
> 标签：php, model-view-controller, joomla

我对 Joomla 以及他们实现 MVC 架构的方式相对较新。它与我习惯的方式（Code Igniter 等）略有不同，我在将数据传递给视图时遇到了一些问题。

我在控制器中创建了一个名为“getInitClubs”的函数，它会在页面运行时自动运行，因此我从“view.html”文件中调用了这个函数。

这是我的代码：

控制器功能：

```
public function getInitClubs() {
        $model =& $this->getModel('directory');
        $init_clubs = $model->clubResults($conds = array());
        return $init_clubs;
    } 
```

型号功能：

```
public function clubResults($conds) {
    $query = "SELECT * FROM vyj20_contact_details";
    if(isset($conds['city'])) {
        $query .= " WHERE state = '" . mysql_escape_string($conds['city']) . "'";
    }
    if(isset($conds['suburb'])) {
        $query .= " AND suburb = '" . mysql_escape_string($conds['suburb']) . "'";
    }
    $this->_db->setQuery($query);
    $results = $this->_db->loadObjectList();
    return $results;
} 
```

现在我知道模型和控制器代码有效，这不是问题，问题实际上是从控制器函数“getInitClubs”中提取结果并通过视图显示它们。

如何从视图中调用控制器函数（就像在 Code Igniter MVC 上一样）以收集结果进行显示？我已经尝试过，但似乎无法弄清楚！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:31:17.883

`JView`实例有`getModel()`方法。您将获得访问[静态注册表](https://github.com/dongilbert/joomla-cms/blob/master/libraries/joomla/application/component/controller.php#L594)的模型实例，该注册表在所有组件之间共享。在这种`JController`情况下，您应该更改该模型的状态，在这种`JView`情况下，您应该提取数据。

MVC 设计模式中的视图应该从模型层获取信息并使用模板渲染它，或者在某些情况下只发送一个简单的 HTTP 标头。在这方面，Joomla 对 MVC 模式有着令人惊讶的出色表现。

> [**PS**自 PHP 5.0 发布以来（大约在 2005 年左右），您在分配对象时不需要使用引用。它实际上是有害的，因为它与*refcount 混淆*了。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:59:29.773

你的控制器功能应该是这样的。

```
$model =& $this->getModel('directory');
$init_clubs = $model->clubResults($conds = array());
$view = $this->getView('view_name', 'html'); // get the view
$view->assignRef('data_list', $init_clubs); // set the data to the view
$view->display(); // show the view 
```

阅读更多

[开发模型-视图-控制器组件](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/1.5/Introduction)

[模型-视图-控制器](http://docs.joomla.org/Model-View-Controller)

[开发模型-视图-控制器组件/](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Introduction)

[模型视图控制器](http://www.phpwact.org/pattern/model_view_controller)

# jquery - 在 .each() 循环中使用 ajax

> ID：13160063
> 
> 赞同：0
> 
> 时间：2012-10-31T14:19:10.307
> 
> 标签：jquery, each

我正在尝试在 tr 循环中使用 ajax。

这是我的代码：

```
var i=0;
$("tr").each(function() {
var row = datastring;
console.log("I = " + i);
$.ajax({
    type: 'POST',
    url: 'somelinkgoeshere.com',
    data: row,
    success: function(){console.log("Success")},
    error: function(){console.log("Error")}
});
i++;
});​ 
```

## 预期结果

**因此，我希望按 console.log 必须按以下顺序**返回日志的顺序触发事件：

1.  我 = 0
2.  成功或错误
3.  我 = 1
4.  成功或错误

## 实际结果

但是在我运行代码后，console.log 按以下顺序返回日志

1.  我 = 0
2.  我 = 1
3.  成功或错误
4.  成功或错误

***所以这意味着我的 ajax 函数在我的每个循环完成后被调用。但我不希望函数循环，除非 ajax 请求竞争。***

如果您需要更多解释，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:32:07.230

正如多次提到的，Ajax 是异步的。这意味着其他功能和代码可以同时运行，这样做的好处是浏览器不必等待请求完成后才能继续执行页面 JS。想象一下，如果您在一个页面上有十几个 Ajax 请求，而一台服务器需要 30 秒来响应会是什么样子……

但是，如果您仍想同步运行请求，可以将`async`标志设置为`false`：

```
var i = 0;
$("tr").each(function() {
    var row = datastring;
    console.log("I = " + i);
    $.ajax({
        type: 'POST',
        url: 'somelinkgoeshere.com',
        data: row,
        async: false,
        success: function() {
            console.log("Success")
        },
        error: function() {
            console.log("Error")
        }
    });
    i++;
});​ 
```

PS 你不需要手动递增`i`，jQuery`.each()`可以提供：

```
$("tr").each(function(i) {
    var row = datastring;
    console.log("I = " + i);
    $.ajax({
        type: 'POST',
        url: 'somelinkgoeshere.com',
        data: row,
        async: false,
        success: function() {
            console.log("Success")
        },
        error: function() {
            console.log("Error")
        }
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:21:54.357

你必须设置`async`为假。

```
$.ajax({
    type: 'POST',
    url: 'somelinkgoeshere.com',
    async: false,
    data: row,
    success: function(){console.log("Success")},
    error: function(){console.log("Error")}
}); 
```

但这并不是最好的做法，因为它可能会锁定浏览器，而 AJAX 的全部意义在于异步。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T14:23:11.810

使用`async=false`.

这是 jQuery 文档的引用：

> asyncBoolean 默认值：true 默认情况下，所有请求都是异步发送的（即默认设置为 true）。如果您需要同步请求，请将此选项设置为 false。跨域请求和 dataType: "jsonp" 请求不支持同步操作。请注意，同步请求可能会暂时锁定浏览器，从而在请求处于活动状态时禁用任何操作。从 jQuery 1.8 开始，不推荐在 jqXHR ($.Deferred) 中使用 async: false ；你必须使用完整/成功/错误

或回调。

# google-drive-api - 自定义多步骤 Google 表单

> ID：13160067
> 
> 赞同：1
> 
> 时间：2012-10-31T14:19:17.747
> 
> 标签：google-drive-api, google-forms

我已经完成了几个自定义的 Google 表单，您可以将这些表单`<form>...</form>`放入您自己的文件中。他们提交就好了。

我不知道如何将其应用于多步骤或多页表单。我能想到的唯一解决方案是将它构建为一个巨大的单一形式，以及`.show()`使它`.hide()`看起来像一个多步骤的必要位。这显然远非理想。

有人对此有真正的解决方案吗？

`<form>...</form>`这是我之前提到的扩展解释：

```
<script type="text/javascript">var submitted=false;</script>
<iframe name="hidden_iframe" id="hidden_iframe" style="display:none;" onload="if(submitted) {window.location='thanks.html';}"></iframe>
<form action="YOUR-GOOGLE-FORM-ACTION-URL" method="post" target="hidden_iframe" onsubmit="submitted=true;" class="custom eight columns" id="ss-form">
    <label>
    <input>...
    <input type="submit" ....>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:19:24.810

为什么不为此使用 Google 表单？[http://support.google.com/drive/bin/answer.py?hl=en&answer=87809](http://support.google.com/drive/bin/answer.py?hl=en&answer=87809)

Google Forms 允许您在其他页面上创建、共享和嵌入表单，并将响应馈送到您可以通过 Google Drive 访问的 Google 电子表格中。

这也将允许您创建自定义表单路径，这些路径将根据表单反馈将用户带到不同的地方：

> **将问题拆分为多个页面**
> 
> 例如，如果您创建了一个长表单，并且希望您的受访者更容易填写，您可以添加分页符。从添加项目下拉菜单中，选择分页符。

创建分页符后，您需要对表单问题/答案进行操作以“跳转”到该特定分页符。

此页面有助于为分页符提供目标：http: [//support.google.com/drive/bin/answer.py ?hl=en&answer=141062&topic=1360904&ctx=topic](http://support.google.com/drive/bin/answer.py?hl=en&answer=141062&topic=1360904&ctx=topic)

> **页面导航以及如何嵌入表单**
> 
> 如果您在表单中添加了分页符，则可以根据表单中先前的答案添加不同的问题集，并允许人们跳过不相关的部分。
> 
> 带有“根据答案转到页面”选项的多项选择题允许根据回答将表单受访者直接引导到特定页面，而页面导航会根据您的选择自动将表单受访者路由到特定页面。例如，您可以创建一个表单，要求您的受访者选择他们的语言，然后引导他们回答​​以他们的语言编写的问题。然后，可以使用分页符中的页面导航将它们全部自动路由回同一页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-12T16:43:26.673

我也一直在寻找解决这个问题的方法。

我在这里找到的最全面的教程：来自 Dillon 的[http://morning.am/tutorials/how-to-style-google-forms-redux/ 。](http://morning.am/tutorials/how-to-style-google-forms-redux/)然而，每次您更改表单时，它都包含大量的手动定制。更方便的是一个 javascript 可以为你做这件事，我认为有人在网络上的某个地方出售这样的脚本。

另一个有希望的可能性是谷歌自己通过他们的谷歌应用脚​​本平台： http: [//www.jellybend.com/2013/01/15/create-custom-forms-with-gui-builder-and-google-apps- script/](http://www.jellybend.com/2013/01/15/create-custom-forms-with-gui-builder-and-google-apps-script/)使用此选项，至少可以确保遵守 google 允许的使用指南。然而它已被弃用。真可惜。

# wpf - MVVM 页面导航

> ID：13160069
> 
> 赞同：0
> 
> 时间：2012-10-31T14:19:28.963
> 
> 标签：wpf, mvvm, navigation

已经开始遵循 mvvm 模式的 WPF 应用程序并遇到了问题。我有一个客户页面，其中包含许多搜索并返回客户列表。当我双击一条记录时，我希望能够导航到客户视图，以便用户可以查看/编辑详细信息。

如果不使用 MVVMLight 或 WAF 或 PRISM（因为我一直在努力完全进入 PRISM ！！！）而不强迫我的视图模型了解我的应用程序，这是否可能？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:47:45.157

Some people use [Dependency Injection](http://martinfowler.com/articles/injection.html) to connect VMs with Views in a decoupled way. Take a look at [Unity](http://msdn.microsoft.com/en-us/library/ff647347.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:49:03.970

我会使用一个单独的/底层的 shell 视图和视图模型，只包含你的 ui 布局的结构（一些用于定位导航、菜单、搜索或内容区域的网格）

然后定位您的应用程序视图/控制外壳视图。（也许有一些可见性绑定）

shell viewmodel 的主要目的是协调你的 ui 的流程。例如，应该根据子控件的某些事件隐藏或显示什么控件。

您可以在搜索中使用事件处理程序，该事件处理程序已在 shell 视图模型中注册，以显示/隐藏您的不同内容视图。

另一种方法可能是 ContentPresenter。

# sql - Oracle 11g 和 SQL TOP 查询

> ID：13160074
> 
> 赞同：2
> 
> 时间：2012-10-31T14:19:59.847
> 
> 标签：sql, oracle11g

使用时`SELECT TOP 5 * FROM SOMETABLE`给我一个错误

*ORA-00923: 在预期的地方找不到 FROM 关键字*

我正在使用 Oracle 11g 。我知道`rownum`用于做同样的事情，但只是想知道 Oracle 根本不支持 SQL TOP 使用？为了使 SQL TOP 在 Oracle 中工作需要做任何额外的事情吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-31T14:21:31.213

甲骨文不支持`TOP`。采用`ROWNUM`

```
SELECT * FROM your_table
WHERE ROWNUM <= 5 
```

[SQLFiddle 示例](http://sqlfiddle.com/#!4/9de39/2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T14:21:33.543

不，Oracle 不支持`TOP`.

正如您所指出的，最好的方法是使用`rownum`. 另一种选择是分析功能[`ROW_NUMBER`](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions137.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-04T04:48:59.547

关键字，`rownum`虽然它让你说不。的记录，只有在应用该`order by`子句后才这样做（如果有的话）。

因此，如果 SQL 服务器查询如下所示，它将为您提供 10 条最近创建的记录。

```
Select TOP 10 * from mytable order by created_date desc 
```

但是为了适应 Oracle，当您编写此代码时，它会为您获取 10 条记录（可能不是最新的）并按降序排列它们，这不是您想要的。

```
Select * from mytable where rownum < 10 order by created_date desc 
```

因此，使用这样的附加选择进行编写会有所帮助：

```
SELECT * FROM (Select * from mytable order by created_date desc) where rownum < 10 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-31T14:21:23.717

SQL TOP 不适用于 Oracle。

# css - 仅当元素具有特定子元素时才向元素添加规则

> ID：13160079
> 
> 赞同：6
> 
> 时间：2012-10-31T14:20:14.720
> 
> 标签：css, less

有没有办法只在元素有某个子元素时才向它添加 CSS 规则？我知道用 CSS 不可能做到这一点，但我不确定是否可以用 LESS 做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T14:21:45.673

如果 CSS 无法实现，那么 LESS 也无法实现，它编译为普通的旧版原生 CSS。

问题是，LESS 是在不了解它所应用的 HTML 的情况下编译的，也没有任何客户端脚本。因此，使用 LESS 无法实现仅使用 CSS 无法实现的任何事情。

您可以通过使用客户端 javascript 来实现您想要的，或者您可以等到 CSS4 出现，然后使用父选择器来达到您想要的效果。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-31T14:23:24.737

这在 CSS 或 LESS 中是不可能的。

我建议你最好的选择是 jQuery。

如果您的父元素是`.parent`并且您的孩子是`.child`，您可以这样做：

```
$('.parent:has(.child)').addClass('myClass'); 
```

请参阅示例：http: [//jsfiddle.net/d8Lz5/](http://jsfiddle.net/d8Lz5/)

# html - 我们可以使用 HTML 创建联系表单并在没有服务器端程序的情况下发送邮件吗？

> ID：13160080
> 
> 赞同：-1
> 
> 时间：2012-10-31T14:20:22.317
> 
> 标签：html, email

我想创建仅使用 HTML 发送电子邮件的应用程序 .. ？可能吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:22:04.427

```
<a href="mailto:someone@example.com?subject=Read+Me&body=Happy+Candy+Day">click me</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:20:49.893

当然，您可以使用[`mailto`](http://en.wikipedia.org/wiki/Mailto)链接：

```
<a href="mailto:someone@example.com?Subject=Hello%20again&body=How%20are%20you"> 
```

# iphone - customCell 中的 UITableView 隐藏一个按钮也隐藏其他单元格的下一个按钮

> ID：13160081
> 
> 赞同：2
> 
> 时间：2012-10-31T14:20:24.987
> 
> 标签：iphone, ios, ipad, uitableview

例如，当您正在观看带有加号按钮的单元格的 tableView 时，当我按下该按钮时，它会隐藏当前按钮，但是当我滚动 tableview 时，其他 customCells 上的其他一些按钮也会被隐藏，但我没有隐藏它们。请帮帮我。如何适应这个问题。

![在此处输入图像描述](../Images/1d0d6ea59cf1294f8fb257492096b9b5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:00:14.827

UITableView 正在缓存单元格，这意味着它不会始终存储所有单元格，这在内存方面非常出色。它的问题是，当单元被重用时，它没有引用存储在该单元中的值。通常所做的是，存储在动态单元格中的所有值都存储在单独的 NSMutableArrays 中。

对于您的问题，您可以添加一个带有布尔值的数组，指示它们是否隐藏，并在`tableView:cellForRowAtIndexPath:`委托方法中使用

```
cell.hidden = [[self.yourArray objectAtIndex:indexPath.row] boolValue]; 
```

在按钮回调方法中，您应该更改 hidden 属性以及更新数组中的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:06:08.310

我会这样做：

首先你必须跟踪按钮的状态： **显示** 或 **隐藏**

这是通过将状态保存在**NSMutableArray中来完成的**

在`viewDidLoad`方法中添加以下内容

```
NSMutableArray *shownButtons = [[NSMutableArray alloc] init]; 
```

然后在您`tableView:cellForRowAtIndexPath`执行以下操作

```
NSString *tmpIndexPathString = [NSString stringWithFormat:@"%d",indexPath.row];
if ([shownButtons containsObject:tmpIndexPathString])
{
    [cell.myButton setHidden:YES];
}
else
{
    [cell.myButton setHidden:NO];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T14:52:09.797

在`tableView:cellForRowAtIndexPath:`委托方法中，您需要遍历所有可见单元格：

```
for (UITableViewCell *cell in [self.tableView visibleCells]) {
    // now you have a cell that you can update
} 
```

您还必须记住更新您的数据源，以便滚动表格将相应地更新单元格而不显示加号按钮。例如，如果您要更新数据源，您可以重新加载上述 for 循环中的单元格。

# c# - MailSystem.Net 删除邮件，IndexOnServer 属性 = 0

> ID：13160089
> 
> 赞同：6
> 
> 时间：2012-10-31T14:20:57.280
> 
> 标签：c#, imap

我正在使用[MailSystem.NET](http://mailsystem.codeplex.com)并尝试从服务器中删除一条消息。问题是 IndexOnServer 属性为 0，我收到以下错误：

```
Command "store 0 +flags.silent (\Deleted)" failed : 121031084812790 BAD Error in IMAP command STORE: Invalid messageset 
```

这是我的代码：

```
 Imap4Client client = new Imap4Client();
    client.Connect(account.Server, account.Username, account.Password);
    var inbox = client.SelectMailbox("Inbox");
    MessageCollection messages = inbox.SearchParse("SINCE " + DateTime.Now.AddHours(-hours).ToString("dd-MMM-yyyy"));

    foreach (Message newMessage in messages)
    {
        inbox.DeleteMessage(newMessage.IndexOnServer, true);
    } 
```

如何获取消息的正确索引以便删除它？

* * *

**编辑：**

使用基于 1 的标准循环的建议的问题是计数器索引不会与消息索引同步，因为在我的情况下，我正在搜索仅检索特定的消息子集（据我了解） .

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T22:47:21.833

您可以尝试按 UID 进行删除，该**UID**对于每条消息应该更可靠和唯一。这在过去对我来说效果很好。

**编辑：**由于删除消息会导致所有索引向下移动一个，因此您可以使用两个单独的计数器。一个用于跟踪您何时遍历整个框（messagesLeft），另一个将跟踪当前消息索引，如果删除一条消息，该索引将减 1（因为它会在一行中向上移动一个位置）。

```
Mailbox box = client.AllMailboxes["inbox"];
Fetch fetch = box.Fetch;
int messagesLeft = box.Count;
int msgIndex = 0;

while (messagesLeft > 0)
{
    msgIndex++;
    messagesLeft--;
    Message email = fetch.MessageObject(msgIndex);

    if (criteria)
    {
        box.UidDeleteMessage(fetch.Uid(msgIndex), true);
        msgIndex--;
    }
} 
```

* * *

为了回应您的评论，这里有一个更完整的示例，说明如何使用 UID 进行删除而不关心数字位置/索引。

```
class Email
{
       int UID { get; set; }
       DateTime Sent { get; set; }
       public string Body { get; set; }
       // put whichever properties you will need
}

List<Email> GetEmails(string mailbox);
{
    Mailbox box = client.AllMailboxes[mailbox];
    Fetch fetch = box.Fetch;

    List<Email> list = new List<Email>();
    for (int x = 1; x <= box.MessageCount; x++)
    {
        Message msg = fetch.MessageObject(x);
        list.Add(new Email() { } // set properties from the msg object
    }

    return list;
}

void DeleteEmail(Email email, string mailbox)
{
       Mailbox box = client.AllMailboxes[mailbox];
       box.UidDeleteMessage(email.Uid, true);
}

static void Main()
{
    List<Email> emails = GetEmails("inbox");
    emails = emails.Where(email => email.Sent < DateTime.Now.AddHours(-hours))
    foreach (Email email in emails)
         DeleteEmail(email);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T22:29:07.997

这是来自文档的官方示例。而不是 inbox.search("all") 将其更改为您的搜索查询等。

[http://mailsystem.codeplex.com/discussions/269304](http://mailsystem.codeplex.com/discussions/269304)

```
 //action_id is the Message.MessageId of the email
    //action_flag is the Gmail special folder to move to (Trash)
    //copying to Trash removes the email from the inbox, but it can't be moved back once done, even from the web interface
    public static void move_msg_to(string action_id, string action_flag)
    {
        Imap4Client imap = new Imap4Client();
        imap.ConnectSsl("imap.gmail.com", 993);
        imap.Login("heythatsme@gmail.com", "heythatsmypassword");

        imap.Command("capability");

        Mailbox inbox = imap.SelectMailbox("inbox");
        int[] ids = inbox.Search("ALL");
        if (ids.Length > 0)
        {
            Message msg = null;
            for (var i = 0; i < ids.Length; i++)
            {
                msg = inbox.Fetch.MessageObject(ids[i]);
                if (msg.MessageId == action_id)
                {
                    imap.Command("copy " + ids[i].ToString() + " [Gmail]/" + action_flag);
                    break;
                }
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-20T04:27:35.523

只需将 1 添加到消息索引。

```
 foreach (Message newMessage in messages)
{
    inbox.DeleteMessage(newMessage.IndexOnServer + 1, true);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-13T07:22:57.783

尝试先删除最后一条消息，然后删除倒数第二条，然后再删除第一条消息。

如果您已设置删除和删除，则消息编号会更改。

# jasper-reports - 当框架缩小时，相对于最高对象选项不起作用

> ID：13160090
> 
> 赞同：1
> 
> 时间：2012-10-31T14:20:57.010
> 
> 标签：jasper-reports, border, frame, ireport

在报告中，有两个框架在同一组中，并且选择了相对于最高对象选项。

在其中一个帧由于内容溢出而扩展的情况下，第二帧相对于第一帧扩展。

在这种情况下，当第一个框架由于从内部删除的文本框而缩小时，当设置为空时删除行选项时，框架的高度会降低，尽管相对于最高对象选项应该确保，即第一帧的大小与组中最高帧的大小相同。

JasperReports 4.7.1 中出现问题。

我能做些什么来解决这个问题？

代表问题的图像：

![样本](../Images/8ac419492bb4cfcfcec09e725e448af4.png)

由于隐私问题，内容已被删除。

# .net - 显示控件时，子控件重新定位在自动滚动表单上

> ID：13160098
> 
> 赞同：1
> 
> 时间：2012-10-31T14:21:21.070
> 
> 标签：.net, winforms, autoscroll

我有一个`AutoScroll`设置为 true 的表单。窗体上的某些控件在窗体启动时是不可见的，但它们的位置已经设​​置。一旦控件变为可见，就会相对于 current 计算位置`AutoScrollPosition`，这是完全不需要的。

知道如何防止这种情况吗？

我尝试在控件首次显示时设置位置，如下所示：

```
 void OnControlVisibleChanged(object sender, EventArgs e)
    {
        Control ctl = (Control)sender;
        if (ctl.Visible)
        {
            ctl.Location = Point.Add(ctl.Location, new Size(this.AutoScrollPosition));
            ctl.VisibleChanged -= OnControlVisibleChanged;
        }
    } 
```

它适用于某些控件，而其他控件则无效。我不知道为什么。
编辑：似乎当控件变为可见时，真正的 AutoScrollPosition 会发生变化，但`AutoScrollPosition`属性不会立即更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:50:46.160

`AutoSize = True`似乎会干扰您的代码。我不知道这是否是唯一的失败点，但这在我的测试中有效：

```
void OnControlVisibleChanged(object sender, EventArgs e) {
  Control ctl = (Control)sender;
  if (ctl.Visible) {
    bool moveOK = true;
    if (ctl.GetType().GetProperty("AutoSize") != null) {
      if ((bool)ctl.GetType().GetProperty("AutoSize").GetValue(ctl, null)) {
        moveOK = false;
      }
    }
    if (moveOK) {
      ctl.Location = Point.Add(ctl.Location, new Size(this.AutoScrollPosition));
    }
  }
} 
```

# objective-c - 检查文件是否为空

> ID：13160101
> 
> 赞同：0
> 
> 时间：2012-10-31T14:21:29.357
> 
> 标签：objective-c, cocoa, file, size

我确信有一种简单的方法可以做到这一点，但我不记得了。

如何使用 Objective-C 检查某个文件是否为空？最好不加载其内容（以防文件不为空）。

我想过，`[[NSData dataWithContentsOfFile: PATH] length]`但加载整个文件只是为了知道它有多大。没有更有效的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T14:23:15.897

如果“空”是指其中绝对没有任何内容（0 字节），则可以执行以下操作：

```
NSFileManager *manager = [NSFileManager defaultManager];
if ([manager fileExistsAtPath:path]) {
    NSDictionary *attributes = [manager attributesOfItemAtPath:path error:nil];
    unsigned long long size = [attributes fileSize];
    if (attributes && size == 0) {
        // file exists, but is empty.
    }
} 
```

# ruby-on-rails - 使用 Ruby on Rails 下载大文件

> ID：13160104
> 
> 赞同：1
> 
> 时间：2012-10-31T14:21:41.740
> 
> 标签：ruby-on-rails, apache, download

我内部使用的小项目类似于“文件共享门户，如sharerapid”，它将使用大约100人。我在下载大文件时遇到问题。小文件（< 200 MB）下载速度很快，但最大的文件会阻塞我的服务器 2-5 分钟。也许问题出在内存上，我有 2 GB 内存。我下载文件的代码：

```
def custom_send(userfile)
    file = userfile.attachment.file.url.to_s.split("?").slice(0..-2).join("?")
    send_file "#{Rails.root.to_s}/public#{file}" , filename: userfile.name, x_sendfile: true
end 
```

我不知道问题出在哪里，在我的本地主机上的开发模式下是可以的，但问题出在公共虚拟服务器（ubuntu 12）上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:31:10.883

您使用的是什么网络服务器？最可能的原因是该请求在单线程环境中阻塞了进一步的请求。

解决您的问题的最佳方法是将文件托管在 amazon s3 上并在那里链接到它们。如果文件必须保留在本地，您可以尝试类似这样的操作：

[http://www.therailsway.com/2009/2/22/file-downloads-done-right/](http://www.therailsway.com/2009/2/22/file-downloads-done-right/)

# windows-installer - 在 ORCA 中查找 MSI 安装的文件

> ID：13160109
> 
> 赞同：1
> 
> 时间：2012-10-31T14:21:56.533
> 
> 标签：windows-installer, orca

我正在尝试使用 ORCA 诊断 MSI，并且我想知道安装程序安装的所有文件的列表。

在 ORCA 中打开 MSI 后，我看到了一个“文件”表，但我想确认那里是否显示了有关所有已安装文件的信息以及如何破译它。

征用 MSI 安装的所有文件的万无一失的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T15:03:01.340

没有万无一失的方法，因为 MSI 有多种机制来确定安装哪些文件并在运行时修改它们的安装位置。

您可以做的一件事是通过执行管理安装来提取 MSI。

```
msiexec /a foo.msi TARGETDIR=C:\EXTRACTHERE /qb 
```

这应该让您对安装程序可以安装的所有内容有一个很好的了解。它不会显示任何目录重定向、条件安装、重复文件或自定义操作修改的资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T18:03:41.337

优秀的第三方 Windows Installer 工具之一可能是您创建程序包和解决程序包故障的最有效解决方案。Orca.exe 的优点是免费包含在 SDK 中，但可能难以使用。另一种选择是[在对部署进行故障排除时启用用户计算机上的详细日志记录，](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/ff48d995-fe6f-4d1b-898d-67574ed3c5b7#verbose_logging)并尝试使用[Wilogutl.exe](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/09aa03ba-992f-47ab-999b-ebdfe85c1ea7)工具。

详细日志包含安装包可能安装的每个功能和组件的条目。该日志告诉安装之前该功能或组件的状态、安装请求的状态以及安装程序离开该功能或组件的状态。有关详细信息，请参阅有关[检查功能、组件、文件的安装](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/c4547e5d-ea71-494f-9d92-c7fef23bcc0f)的 MSDN 文档。

Wilogutl.exe 协助分析来自 Windows Installer 安装的日志文件，并显示针对日志文件中发现的错误的建议解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T14:42:56.180

您需要一些按快照原理工作的软件。它在安装之前和之后扫描系统（文件，注册表），这些快照等同并且您收到结果。

我正在使用免费工具[Panda Quickshot](http://dm-soft.narod.ru/)，也可以尝试[SysTracer](http://www.blueproject.ro/systracer)（不是免费的）。或者在谷歌中找到一些东西。

# maven - maven 项目的依赖项如何在运行时对其可用？

> ID：13160111
> 
> 赞同：-1
> 
> 时间：2012-10-31T14:22:04.127
> 
> 标签：maven, dependencies, communication

我在一个 maven 项目（项目 A）中有我的 POJO 和 DAO 我在另一个 maven 项目中创建了一个服务，收集了我需要的 DAO（在项目 B 中）我创建了第三个带有 swing gui 主类的 maven 项目（项目 C )

项目 C 依赖于 B，B 依赖于 A。

当我声明我的服务（项目 B）以使用函数将数据提取到 gui（项目 C）时，我在服务的资源使用上得到一个 Java 空指针异常。

项目不能仅通过依赖项进行通信，还是我需要一些反序列化等？

LOGIC POJO(实现可序列化) -> DAO -> 服务 -> GUI

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:50:07.807

因此，您似乎正在执行项目 C 中的代码。了解这些项目的类型会有所帮助。. . 但让我们假设它们是罐子。默认情况下，jar 不会被构建为在其自身内部包含所有依赖项。这是因为 Maven 期望您像 Java 社区中的大多数人一样使用 jar，即它们与所需的所有其他 jar 一起安装到运行时中。如果每个 jar 都将其完全依赖关系树包含在自身内部，那将是一团糟。因此，您似乎期望 Maven 构建将您的所有依赖链拉入您的项目 C 的最终工件中，但这并没有发生。

有几种方法可以让您的依赖项进入您的最终工件。假设您的 swing 项目是一个 jar，您可以使用程序集插件的“jar-with-dependencies”程序集类型来执行此操作。它会生成一个包含所有依赖项的 jar。

[http://maven.apache.org/plugins/maven-assembly-plugin/descriptor-refs.html#jar-with-dependencies](http://maven.apache.org/plugins/maven-assembly-plugin/descriptor-refs.html#jar-with-dependencies)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:02:41.063

这是我从我的 Maven 项目（项目 A）[http://www.java2s.com/Code/Java/Spring/LoadconfigwithFileSystemXmlApplicationContext.htm中获取数据所需的](http://www.java2s.com/Code/Java/Spring/LoadconfigwithFileSystemXmlApplicationContext.htm)

# javascript - 单击图像时如何将鼠标坐标传递给支持bean

> ID：13160116
> 
> 赞同：1
> 
> 时间：2012-10-31T14:22:21.227
> 
> 标签：javascript, jsf

当用户单击图像时，我尝试了各种将鼠标坐标放入支持 bean 的方法。我可以在 javascript 中获取坐标，然后调用 ajax 侦听器，但参数不在请求中。

我的js：

```
if (!cis) var cis = {}
if (!cis.sarwinds) {
  var focusLostTimeout
  cis.sarwinds = {   
    errorHandler: function(data) { 
      alert("Error occurred during Ajax call: " + data.description) 

    },

    updateZoomValues: function(input, event) { 

       jsf.ajax.addOnError(cis.sarwinds.errorHandler)
          var offset = jQuery(input).offset();       

          jsf.ajax.request(input, event, { 
             render: "imagePan2 message",
             x: event.pageX - offset.left,
             y: event.pageY - offset.top
          })
    },

    getGraphicImageId: function(input) {
      var clientId = new String(input.name)
      var lastIndex = clientId.lastIndexOf(":")
      return clientId.substring(0, lastIndex) + ":imagePan2"
    }
  } 
} 
```

我的 jsf 页面元素：

```
 <h:graphicImage id="imagePan2" library="images" styleClass="wind_map" name="testImage.jpg" style="#{SarWindsImagesBean.imageStyle('testImage.jpg')}">
           <f:ajax event="click" onevent="cis.sarwinds.updateZoomValues(this, event)" listener="#{SarWindsImagesBean.zoomInClick}" render="imagePan2 message"/>
    </h:graphicImage> 
```

我的支持豆：

```
 public void zoomInClick(AjaxBehaviorEvent event) {
    double width;
    double height;
    double top;
    double left;
    double mouseX;
    double mouseY;
    String fileName = "testImage";

    Map<String, String> reqParams = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap();
    mouseX = Double.parseDouble(reqParams.get("x"));
    mouseY = Double.parseDouble(reqParams.get("y"));

    width = imageItems.get(fileName).getImageWidth() * 1.1;
    height = imageItems.get(fileName).getImageHeight() * 1.1;

    // We need the mouse position on the image here, and we need to calculate
    top = mouseY - ((mouseY - imageItems.get(fileName).getImageTop()) * 1.1);
    left = mouseX - ((mouseX - imageItems.get(fileName).getImageLeft()) * 1.1);

    if (this.imageLock == false){

        imageItems.put(fileName, new SarWindImageItem(width, height, top, left));
    } else {
        Iterator<String> it = imageItems.keySet().iterator();
        while (it.hasNext()) {

                String key = (String)it.next();

                imageItems.put(key, new SarWindImageItem(width, height, top, left));
            }
    }
} 
```

reqParams 为空。

担

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:13:43.813

`<input type="image">`通常可以在这种情况下使用。自上世纪 90 年代以来，它就随着表单提交传递了坐标。不需要 JS 诡计。

如果您确实发现需要通过 JS 获取这些值，这里有一个解决方案：

[通过 javascript 从 <input type='image'> 获取点击坐标](https://stackoverflow.com/questions/6969096/get-click-coordinates-from-input-type-image-via-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:02:53.077

你使用的方式`jsf.ajax.request()`并不完全正确。`<f:ajax>`已经创建了一个，但是您在其中嵌套了另一个*（*`onevent`请注意，`onevent`被调用了三次；在发送请求之前，在响应到达之后以及在更新 HTML DOM 之后）。这是不对的。

从技术上讲，您应该调用`jsf.ajax.request()`该`onclick`属性并`<f:ajax>`完全删除它。但是，这基本上需要将 替换为在方法中执行请求参数收集工作`<h:graphicImage>`的自制软件，以便可以正确更新适当的模型值。`UIComponent``decode()`

忘记使用`jsf.ajax.request()`独立的。仅当您真正开发自定义时才应使用它，`UIComponent`其中您在`decode()`.

普通的普通 HTML`<input type="image" name="foo">`为此提供了一个坐标将作为参数发送`foo.x`的方法。`foo.y`这在 JSF 中有效`<h:commandButton image="some.png">`，但是，当您使用`<f:ajax>`. 所以忘记这一点。

您最好的选择是使用所需坐标设置隐藏输入值，然后以通常的方式将这些隐藏输入绑定到托管 bean 属性。

例如

```
<h:form>
    <h:graphicImage id="image" name="image1.png">
        <f:ajax event="click" execute="x y" listener="#{bean.listener}" />
    </h:graphicImage>
    <h:inputHidden id="x" value="#{bean.x}" />
    <h:inputHidden id="y" value="#{bean.y}" />
</h:form>

<h:outputScript>
    jQuery("img[id$=':image']").on("mousedown", function(event) {
        var $form = jQuery(this).closest("form");
        $form.find("input[id$=':x']").val(event.pageX);
        $form.find("input[id$=':y']").val(event.pageY);
    });
</h:outputScript> 
```

*（注意：`jQuery.on()`仅从 1.7 开始可用，如果您使用的是旧版本，请`jQuery.bind()`改用）*

和

```
@ManagedBean
@RequestScoped
public class Bean {

    private Integer x;
    private Integer y;

    public void listener() {
        System.out.println(x + ", " + y);
    }

    // ...
} 
```

请注意，我还修复了您获取鼠标位置的错误方法。您只是返回了图像元素本身的位置，而不是鼠标指针在其上的位置。

# java - 关闭 GAE 任务队列日志

> ID：13160119
> 
> 赞同：1
> 
> 时间：2012-10-31T14:22:29.633
> 
> 标签：java, google-app-engine, logging, configuration, task-queue

我正在使用 Google App Engine 的推送任务队列的 Java 版本。当我构建我的应用程序时，在构建和测试期间从任务队列中吐出的日志量是*荒谬*的！如果我的程序中存在某种错误，并且我必须通读构建日志以找出哪个测试失败，那么在尝试挖掘无尽的任务队列日志记录时，将很难找到问题测试。我认为解决方案应该是一个简单的配置，如[Java Task Queue Configuration Page](https://developers.google.com/appengine/docs/java/config/queue)中所定义，但我找不到这样的日志记录配置。

# android - 如何从将另一个类扩展为 Activity 的 java 类返回值

> ID：13160120
> 
> 赞同：0
> 
> 时间：2012-10-31T14:22:30.453
> 
> 标签：android, android-activity

假设我有以下主要活动：

```
public class MwConsoleActivity extends Activity {

    private classChild child = null;    

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        child = new classChild();
    }
} 
```

然后考虑类“classChild”的实现：

```
public class MwBondingAgent extends SapereAgent {

    MwBondingAgent(){}

    public void AddEventListener(childAddedEvent event) {

       //Send the data of event back to the main activity

    }
} 
```

我尝试使用 IntentServices 但无法将值接收回主要活动。我将采取什么方法？

干杯阿里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:41:47.100

您可以使用和 intentFilter 来收听广播。将此添加到活动中：

```
 IntentFilter intentFilter = new IntentFilter(
                "com.unique.name");
        mReceiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                //extract our message from intent
                String msg_for_me = intent.getStringExtra("some_msg");
             }
        };
        //registering our receiver
        this.registerReceiver(mReceiver, intentFilter); 
```

在您的班级中，将此添加到您要通知活动的部分：

```
Intent i = new Intent("com.unique.name").putExtra("some_msg", "I have been updated!");
this.sendBroadcast(i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:38:08.137

您应该使用观察者/听众模式。

[http://www.vogella.com/articles/DesignPatternObserver/article.html](http://www.vogella.com/articles/DesignPatternObserver/article.html)

在使用 MVC 架构模式时，它是最常用的设计模式之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T14:39:46.970

您的问题很不清楚，但我认为您想要的是实现对您的活动的回调。您可以使用界面来执行此操作。

```
public class MwConsoleActivity extends Activity implements MwBondingAgent{

    private classChild child = null;    

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        child = new classChild();
    }

    @Override
    public void gotEventData(EventData myEventData) {

        //to whatever you want with myEventData
    }
} 
```

在你的另一个班级。

```
public class MwBondingAgent extends SapereAgent {

    private MwBondingAgentCallback activityCallback;

    MwBondingAgent(Activity callback){

         activityCallback = callback;
    }

    public void AddEventListener(childAddedEvent event) {

        //Send the data of event back to the main activity
        EventData myEventData = //got some event data;
        //Send it back to activity
        activityCallback.gotEventData(myEventData);
    }

    public interface MwBondingAgentCallback {

        public void gotEventData(EventData myEventData);
    }
} 
```

# asp.net - chrome上的telerik radgrid .net导出按钮问题

> ID：13160121
> 
> 赞同：1
> 
> 时间：2012-10-31T14:22:37.467
> 
> 标签：asp.net, telerik, telerik-grid, telerik-reporting

我的网络表单上有一个 radgrid，并显示了一个导出按钮。我的问题是在 IE 和 Mozilla 上，当您单击按钮时，它会弹出 csv 的下载窗口。但是对于 chrome，它会立即在浏览器本身上显示数据。因此，您必须解决将导出保存在单独文件中的问题。

想知道我是否应该设置任何设置来防止这种情况并且只显示弹出窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:42:08.123

不需要设置调整，因为它已经被修复并且在下一个稳定的 chrome 版本中：

[问题 152911：CSV 文件以文本形式打开，未下载](http://code.google.com/p/chromium/issues/detail?id=152911#c58)

> 没有什么可以更新你的。该修复已合并到稳定分支，并将在下一个常规稳定版本中。我们没有给出我们发布的预计日期，因为太多的因素会影响它们。
> 
> -评论 59

我会耐心等待，因为 Chrome 团队已经解决了这个问题。

# javascript - html5音乐游戏/应用程序的javascript计时

> ID：13160122
> 
> 赞同：2
> 
> 时间：2012-10-31T14:22:40.337
> 
> 标签：javascript, html, timing

我真的很快就会开始为[www.daveconservatoire.org 开发](http://www.daveconservatoire.org)一系列基于音乐的应用程序。

目前阻碍我的是，通过阅读各种文章/帖子等，我无法确定使用 javascript 在应用程序中产生准确的计时是否现实。我们所说的正确时间可能只有 10 毫秒。

例如，一个更简单的应用程序是节拍器，它可以设置为以给定的间隔滴答声 - 例如，60BMP 将要求每秒播放一次滴答声。

这可以通过 javascript/html5 实现吗？我发现的所有节拍器示例都是用 Flash 编写的，大概是因为在 JS 中很难使用准确的计时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T15:58:55.990

我发现你的问题很有趣，所以我决定自己做一个小测试。Javascript 的 setInterval 函数似乎不足以做一个节拍器类型的应用程序。所以我建立了一个使用当前时间的自定义“类”，它似乎在 +-3 毫秒内是准确的。你的旅费可能会改变。代码在这里：http: [//jsfiddle.net/66YJz/](http://jsfiddle.net/66YJz/)。

```
// Custom timer class

// f = function to call
// m = ms
function timer(f, m)
{
    var target_time = (new Date()).getTime() + m;
    var margin = 3;

    setInterval(function(){
        var now = (new Date()).getTime();
        var dif = target_time - now;
        // If within acceptable timeframe, call function
        if (dif <= margin && dif >= -margin) {
            target_time = now + m + dif;
            f();
        }
        // For some reason we missed the time frame.
        // Skip and move on to next
        if (dif < -margin ) {
           target_time += m;
           //margin += 1;
        }
    },
    1);
} 
```

我只是把它掀了起来，所以我相信还有很大的改进空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-03T20:05:17.003

[JavaScript 中的高分辨率时间](https://dvcs.w3.org/hg/webperf/raw-file/tip/specs/HighResolutionTime/Overview.html)有一个正在进行中的规范。

但是，在它有用之前，情况会更加棘手。

我找到了一个关于这个主题的有趣教程：http: [//www.html5rocks.com/en/tutorials/audio/scheduling/](http://www.html5rocks.com/en/tutorials/audio/scheduling/)

它详细介绍了所涉及的各种问题，并提出了一些看似合适的方法，特别是如果您想要对 WebAudio 进行排序。我自己还没有对其进行测试，但这里有一些文章中的重要引述来描述这些问题以及如何有效地解决这些问题的概述：

> JavaScript 计时 API 最糟糕的部分是，尽管 Date.now() 的毫秒精度听起来不错，但 JavaScript 中计时器事件的实际回调（通过 window.setTimeout() 或 window.setInterval）布局、渲染、垃圾回收、XMLHTTPRequest 和其他回调很容易被扭曲数十毫秒或更长时间——简而言之，主执行线程上发生的任何事情。

...

> [给定示例] 设法允许速度控制同时保持坚如磐石的计时方式是一种协作：一个每隔一段时间触发一次的 setTimeout 计时器，并在未来为单个音符设置 Web 音频调度。setTimeout 计时器基本上只是检查是否需要根据当前速度“很快”安排任何音符，然后安排它们......

他们还建议可以使用 requestAnimationFrame 代替 setTimeout，从而实现与图形的精确同步；这将是游戏的自然方法。

本教程不涵盖如果不是 WebAudio 尝试排序的人可能会做什么。在我有点模糊的情况下，我实际上想通过网络控制 SuperCollider 的一个实例。为了使其工作，我可以调整建议的方法，将执行时间指定为每个 OSC 消息的一部分，并允许 scsynth 调度程序代替 WebAudio 调度程序。

但是，可能还有其他不太容易适应的情况：例如，使用音符消息控制普通 MIDI 合成器将无法使用这种方法。[WebMIDI 规范草案](http://www.w3.org/TR/webmidi/)的作者预计它将与我在此答案开头提到的高分辨率时间 API 一起使用。

# c# - 拖放需要数学修复

> ID：13160125
> 
> 赞同：2
> 
> 时间：2012-10-31T14:22:52.557
> 
> 标签：c#, silverlight

我在 Silverlight 4 中的 RichTextBox 有拖放行为，但我遇到了一个小问题。

我希望用户能够“抓取” RichTextBox 的任何边框并拖放它。RichTextBox 应该相对于用户“抓取”RichTextBox 的位置拖动。但是，一旦用户开始拖动，RichTextBox 就会“捕捉”到鼠标位置的中间，而不是保持相对于鼠标位置的位置。

因此，如果我抓住右下角，如下所示...

[https://skydrive.live.com/redir?resid=DCC93DD825EF3F43!658](https://skydrive.live.com/redir?resid=DCC93DD825EF3F43!658)

它在拖动开始时“捕捉”到鼠标位置的中间，如下所示...

[https://skydrive.live.com/redir?resid=DCC93DD825EF3F43!659](https://skydrive.live.com/redir?resid=DCC93DD825EF3F43!659)

这是我的拖动代码。我假设我的数学是错误的（在 MouseMove 事件中）？？？

* * *

```
public class CustomRichTextBox : RichTextBox
{
    private bool isDragging = false;

    protected override void OnMouseLeftButtonDown(MouseButtonEventArgs e)
    {
        base.OnMouseLeftButtonDown(e);

        bool isDragAllowed = false;
        Point pt = e.GetPosition(this);

        if (pt.Y >= 0 && pt.Y <= this.BorderThickness.Top)
            // Allow dragging if the mouse is down on the top border
            isDragAllowed = true;
        else if (pt.Y >= (this.RenderSize.Height - this.BorderThickness.Bottom) && pt.Y <= this.RenderSize.Height)
            // Allow dragging if the mouse is down on the bottom border
            isDragAllowed = true;
        else if (pt.X >= 0 && pt.X <= this.BorderThickness.Left)
            // Allow dragging if the mouse is down on the left border
            isDragAllowed = true;
        else if (pt.X >= (this.RenderSize.Width - this.BorderThickness.Right) && pt.X <= this.RenderSize.Width)
            // Allow dragging if the mouse is down on the right border
            isDragAllowed = true;

        if (!isDragAllowed)
            return;

        this.CaptureMouse();
        isDragging = true;
    }

    protected override void OnMouseMove(MouseEventArgs e)
    {
        base.OnMouseMove(e);

        if (isDragging)
        {
            CustomRichTextBox elem = this;
            CompositeTransform ct = (CompositeTransform)elem.RenderTransform;
            UIElement parent = (UIElement)elem.Parent;

            ct.TranslateX = e.GetPosition(parent).X - (parent.RenderSize.Width / 2);
            ct.TranslateY = e.GetPosition(parent).Y - (parent.RenderSize.Height / 2);
        }
    }

    protected override void OnMouseLeftButtonUp(MouseButtonEventArgs e)
    {
        base.OnMouseLeftButtonUp(e);

        isDragging = false;
        this.ReleaseMouseCapture();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:13:16.830

这里缺少的是拖动开始位置的**参考点。**在鼠标移动事件中，您试图将控件转换为鼠标的当前位置，而不是当前位置*和*原始*位置*之间的增量。

或者通过使用相对坐标，您可以存储鼠标单击相对于控件的位置，然后在 OnMove 处将其从当前位置中减去。这就是下面示例中发生的情况。

请注意，这是没有 CompositeTransform 的 WPF。减去父级的 RenderSize 对我来说似乎是一个错误，或者它可能是 WPF 和 Silverlight 的差异，无论如何我希望这有助于解决它：

```
public class CustomRichTextBox : RichTextBox
{
    private bool isDragging = false;
    private Point draggingPoint;

    protected override void OnPreviewMouseLeftButtonDown(MouseButtonEventArgs e)
    {
        base.OnPreviewMouseLeftButtonDown(e);

        bool isDragAllowed = false;
        Point pt = e.GetPosition(this);

        if (pt.Y >= 0 && pt.Y <= this.BorderThickness.Top)
            // Allow dragging if the mouse is down on the top border
            isDragAllowed = true;
        else if (pt.Y >= (this.RenderSize.Height - this.BorderThickness.Bottom) && pt.Y <= this.RenderSize.Height)
            // Allow dragging if the mouse is down on the bottom border
            isDragAllowed = true;
        else if (pt.X >= 0 && pt.X <= this.BorderThickness.Left)
            // Allow dragging if the mouse is down on the left border
            isDragAllowed = true;
        else if (pt.X >= (this.RenderSize.Width - this.BorderThickness.Right) && pt.X <= this.RenderSize.Width)
            // Allow dragging if the mouse is down on the right border
            isDragAllowed = true;

        if (!isDragAllowed)
            return;

        draggingPoint = pt;

        this.CaptureMouse();
        isDragging = true;
    }

    protected override void OnPreviewMouseMove(MouseEventArgs e)
    {
        base.OnPreviewMouseMove(e);

        if (isDragging)
        {
            CustomRichTextBox elem = this;
            TransformGroup ct = new TransformGroup();
            UIElement parent = (UIElement)elem.Parent;

            TranslateTransform tr = new TranslateTransform(
                e.GetPosition(parent).X - elem.RenderSize.Width + this.BorderThickness.Left - draggingPoint.X,
                e.GetPosition(parent).Y - elem.RenderSize.Height + this.BorderThickness.Top - draggingPoint.Y);

            ct.Children.Add(tr);

            elem.RenderTransform = ct;
        }
    }

    protected override void OnPreviewMouseLeftButtonUp(MouseButtonEventArgs e)
    {
        base.OnPreviewMouseLeftButtonUp(e);

        isDragging = false;
        this.ReleaseMouseCapture();
    }
} 
```

# html - html中div的最大宽度

> ID：13160127
> 
> 赞同：1
> 
> 时间：2012-10-31T14:22:54.937
> 
> 标签：html

我正在做一个水平日历。我今天正在测试一些东西，我想知道它是否是一个错误，或者它是否真的是浏览器的限制。

简而言之，我想拥有无限的宽度。日历在一个 div 内，并且会溢出到无限。

插入一个非常大的范围后，我意识到我的宽度实际上是 0px。然后搜索后。我发现宽度有奇怪的行为。

*   35791375px 像素宽度为 0px
*   35791374px 背景消失
*   35791373px div 正确显示

并且想知道实际上适用于所有浏览器的实际最大宽度是多少。这些数字很奇怪。它们不是 8 的因数。

这是一个示例标记。

```
<div class="calendar" style="overflow: hidden; width: 1000px;">
   <div class="scroll" style="width: 35791375px;">
       <div class="month">...</div>
       ...
       <div class="month">...</div>
   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:58:33.357

我想你会在这里找到答案：

[最大页面长度的浏览器限制](https://stackoverflow.com/questions/1076622/browser-limitation-with-maximum-page-length)

基本上，您的浏览器可以显示的数量是有限制的。
...顺便说一句，35791375 像素大约是 7.5 英里。

# sql - SQL 查询：最后一个、倒数第二个、倒数第三个..值 (Microsoft SQL)

> ID：13160129
> 
> 赞同：0
> 
> 时间：2012-10-31T14:23:03.820
> 
> 标签：sql, sql-server-2012-express

我正在尝试为运动队建立报告。结果存储在 SQL 数据库中，如下所示： ![桌子](../Images/81480fca901b3e01922c113973e784b7.png)

对于报告，我需要用相应的结果填充 Home2-Away4 列。意思是：

想象一下：ID=10 和 Home(no.) (Team#) = 1 --> **Home1** =前**一场**比赛的结果是 ID=3，球队在客场比赛，结果是 0 (=home1)。这是我已经做过的，但是**Home2** =**两场**前的结果，因为**Home3** =**三**场前的结果，依此类推。

这是我如何做到的：

```
SELECT top 1 [result_home] from (SELECT Top 2 [result_home] FROM 
(SELECT top 2 [result_home]  from [Table]
where [ID] < 10  and ( [Home(no.)]=1 or [Away(No.)]=1 ) order by [ID] desc  ) top2     )top1 
```

（微软 SQL Server Express 2012 顺便说一句。）

我编写了一个小的 Java 代码，它决定是从 result_home 还是 result_away 中选择。

基本问题是：如何查询两天前的比赛结果？

提前致谢。

亲切的问候

斯特凡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:48:00.843

我认为您需要[LAG](http://msdn.microsoft.com/en-us/library/hh231256.aspx)功能。最简单的情况是这样的：

```
[Home1] = LAG(result_Home, 1) OVER(PARTITION BY [Home(no.)] ORDER BY ID), 
```

但是，它并不像这样简单，因为您需要引用 home 或 away，因此您需要首先取消透视数据

```
SELECT  ID,
        Type,
        TeamID,
        Result
FROM    T
        CROSS APPLY 
        (   VALUES 
                ('Home', [Home(no.)], Result_Home), 
                ('Away', [Away(no.)], Result_Away)
        ) Upvt (Type, TeamID, Result); 
```

这意味着您可以在一个列中访问每个团队的结果，无论是主场还是客场（对于滞后功能）。

然后使用这个未透视的数据，您应用滞后来获得前 4 个结果（我使用过`ORDER BY ID`，但我假设我缺少一个日期字段？）：

```
SELECT  *,
        [Result1] = LAG(Result, 1) OVER(PARTITION BY TeamID ORDER BY ID),
        [Result2] = LAG(Result, 2) OVER(PARTITION BY TeamID ORDER BY ID),
        [Result3] = LAG(Result, 3) OVER(PARTITION BY TeamID ORDER BY ID),
        [Result4] = LAG(Result, 4) OVER(PARTITION BY TeamID ORDER BY ID)
FROM    (Previous Query) 
```

然后，一旦您获得了每支球队每场比赛的前 4 个结果，您就可以将未透视的数据重新组合在一起，以使主队和客队再次位于同一行，从而提供完整的查询：

```
WITH Results AS
(   SELECT  ID,
            Type,
            TeamID,
            Result
    FROM    T
            CROSS APPLY 
            (   VALUES 
                    ('Home', [Home(no.)], Result_Home), 
                    ('Away', [Away(no.)], Result_Away)
            ) Upvt (Type, TeamID, Result)
), Results2 AS
(   SELECT  *,
            [Result1] = LAG(Result, 1) OVER(PARTITION BY TeamID ORDER BY ID),
            [Result2] = LAG(Result, 2) OVER(PARTITION BY TeamID ORDER BY ID),
            [Result3] = LAG(Result, 3) OVER(PARTITION BY TeamID ORDER BY ID),
            [Result4] = LAG(Result, 4) OVER(PARTITION BY TeamID ORDER BY ID)
    FROM    Results
)
SELECT  Home.ID,
        [Home(no.)] = Home.TeamID ,
        [Away(no.)] = Away.TeamID,
        [Result_Home] = Home.Result,
        [Result_Away] = Away.Result,
        [Home1] = Home.Result1,
        [Home2] = Home.Result2,
        [Home3] = Home.Result3,
        [Home4] = Home.Result4,
        [Away1] = Away.Result1,
        [Away2] = Away.Result2,
        [Away3] = Away.Result3,
        [Away4] = Away.Result4
FROM    Results2 AS Home
        INNER JOIN results2 AS Away
            ON Away.ID = Home.ID
            AND Away.Type = 'Away'
WHERE   Home.Type = 'Home'
ORDER BY ID; 
```

**[SQL Fiddle 示例](http://www.sqlfiddle.com/#!6/1ccc3/1)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:42:32.987

看起来您正在寻找`ROW_NUMBER()`函数或其他窗口函数

就像是

```
;with cte as 
(
    select id, home as team, result_home as score from yourtable
    union
    select id, away, result_away from yourtable
),
games as
(
    select *, ROW_NUMBER() over (partition by team order by id) as gameday
    from cte
)   
    select  *
    from (select team, score, gameday from games) src
    pivot
    (max(score) for gameday in ([1],[2],[3],[4],[5],[6]))p 
```

如果您知道每支球队的个人比赛日，那么两场比赛前就是本场比赛的比赛日 - 2，依此类推。

# c# - 如何确定 c# 中的 dns 更改？

> ID：13160131
> 
> 赞同：4
> 
> 时间：2012-10-31T14:23:03.900
> 
> 标签：c#, events, dns, event-log

我想监控dns地址的变化。所以我需要跟踪 dns 的变化。我现在正在用线程做。我得到 dns 并将其保存文件，然后我每 10 秒比较一次，但我需要更具体的解决方案。例如，有什么活动吗？这是代码：

获取域名：

```
public List<string> GetDns()
    {
        List<string> dns = new List<string>();
        NetworkInterface[] networkInterfaces = NetworkInterface.GetAllNetworkInterfaces();
        foreach (NetworkInterface networkInterface in networkInterfaces)
        {
            if (networkInterface.OperationalStatus == OperationalStatus.Up)
            {
                IPInterfaceProperties ipProperties = networkInterface.GetIPProperties();
                IPAddressCollection dnsAddresses = ipProperties.DnsAddresses;
                foreach (IPAddress dnsAdress in dnsAddresses)
                {
                        dns.Add(dnsAdress.ToString());
                }
            }
        }
        return dns;
    } 
```

这是比较：

```
string[] xmlDns = xmlData.GetDatas("DNSs", "Dns");
        List<string> dns = getData.GetDns();
        for (int i = 0; i < xmlDns.Length; i++)
        {
                if ( xmlDns[i].Equals( dns[i]))
                {
                    this.Invoke(new MethodInvoker(delegate()
                    {
                        listBoxCheck.Items.Add(xmlDns[i] + " DNS was not changed.");
                    }));
                }
                else
                {
                    this.Invoke(new MethodInvoker(delegate()
                    {
                        listBoxCheck.Items.Add(xmlDns[i] + " DNS adress was changed as " + dns[i] );
                    }));
                }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:35:03.450

DNS 是基于请求的。没有从 DNS 服务器到客户端的事件。您可能会使用 TTL（生存时间）元数据，它会告诉您 DNS 记录何时到期。

这是一个库，它公开 API 以查询给定的 dns 服务器[SimpleDNS](http://www.simpledns.com/dns-client-lib.aspx)和获取[TTL 值](http://www.simpledns.com/help/dnsclientlib/html/P_JHSoftware_DnsClient_Response_Record_TTL.htm)的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:27:09.517

您可以使用 WMI 查询来查询您的 DNS。循环查询并将返回的结果与之前的结果进行比较。当值发生变化时弹出一个消息框（或触发你的事件或其他东西）。

您必须使用 System.Management 命名空间才能完成此操作，或者管理命名空间可能包含用于查看 dns 的功能。但是这个我不确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:30:18.300

[@Candide 写道，DNS 中没有事件，](https://stackoverflow.com/a/13160334/486504)这并不完全正确。特别是对于更改通知。

如果您控制 DNS 服务器，则可以将其设置为作为客户端向您发送 NOTIFY 消息。每当权威 DNS 服务器希望从属服务器更新区域内容时，就会（不保证，但最常见）发送此类消息。然后，您可以以您喜欢的任何方式对这些做出反应。大多数 DNS 服务器实现可能仅默认将 NOTIFY 消息发送到列出的名称服务器，但也可以配置为将它们发送到其他主机（例如，在 BIND 9 中，这是使用`also-notify {}`区域配置中的指令完成的）。

我不确定您将如何实施它；NOTIFY 是 DNS 协议的一部分，因此您实际上是在编写一个用途有限的 DNS 服务器实现来侦听这些消息并对其采取行动。您至少需要监视 UDP 和 TCP 上的端口 53（我相信实际上通知几乎总是在 UDP 上发送，但该标准还允许 TCP 传输），整理收到的任何 NOTIFY 消息，然后采取行动他们。

此外，由于不能保证交付它们，因此您还需要一个后备机制。

这是否是一个可行的选择完全取决于情况。

# c++ - 如何重放快速修复日志

> ID：13160132
> 
> 赞同：2
> 
> 时间：2012-10-31T14:23:05.117
> 
> 标签：c++, visual-studio-2008, quickfix

我确实看到以前有人问过这个问题，但我还没有看到答案。有没有办法重播 quickfix 日志文件？我的应用程序启动了会话，接收数据，quickfix 记录数据，我的应用程序崩溃。当我重新启动时，我想简单地重播日志文件中的所有内容。可以这样做吗？

或者，如果没有，是否有人有示例说明如何以编程方式请求重新发送所有会话消息或将接收序列号重置为 1？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T20:39:57.597

不，不是。

FIX 是一种双向通信协议。您不能只“重播”一侧；这真的没有意义。

这就像说您希望爱丽丝重新开始与鲍勃的对话，但爱丽丝必须从她之前所说的文字记录中读出她的台词。您无法保证 Bob 会说出他之前所说的话，并且 Bob 可能只是感到困惑。

现在，如果您正在谈论某种测试工具，其中一方面是“播放”预定的数据......好吧，您应该在您的问题中更加具体。也就是说，QuickFIX 不提供执行此类操作的功能，并且并不真正适合执行此操作。您最好编写一个将这些消息写入原始套接字的独立工具。（我的公司实际上已经编写了这样的测试工具。）

关于序列号，请检查“ `ResetOn<XXX>`”配置设置。您可能需要 ResetOnLogon 等。（确保您的发起人的 seq# 策略与您的交易对手的相同，否则您将遇到问题。）

如果您认为必须以编程方式重置您的序列号，那么您可能做错了什么。四年的 QF 邮件列表教会了我这一点。我从未见过任何人合法地需要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:45:48.167

确保配置文件中的设置设置为在登录时不重置。当您在崩溃后重新连接时，您将自动重新发送所有错过的消息。

# sybase - Sybase - 授予每个人访问表的权限

> ID：13160137
> 
> 赞同：1
> 
> 时间：2012-10-31T14:23:18.340
> 
> 标签：sybase, privileges

我需要任何用户能够访问 Sybase 中的特定表。就我而言，SELECT 权限就足够了。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T14:26:59.297

GRANT SELECT ON my_table TO PUBLIC

# python - 取回字节对象而不是上传的文件

> ID：13160139
> 
> 赞同：1
> 
> 时间：2012-10-31T14:23:20.673
> 
> 标签：python, file-upload, python-3.x, bytesio

Python 3.2，Apache，无框架

我有一个表格来上传文件：

```
<form action="Files/Admin/Upload" method="post" enctype="multipart/form-data">
    <input type="file" name="upload_file" style="width:100%">
    <input type="submit" class="button" value="Upload">
</form> 
```

还有一些选择框，但我不想混淆这个问题。最终目标是加密给定文件，并将其存储在某个地方，然后将其解密并返回。我设法让加密/解密工作，但不是一个pdf文件，而是一个字节字符串（在浏览器中打开它说：

```
b'%PDF-1.4 %âãÏÓ <snip...> 
```

所以我去掉了加密和解密和保存，我现在只是想让它给我刚刚上传的确切文件：

```
import cgi
tmp = cgi.FieldStorage()
dat = tmp['upload_file']
import mimetypes
gtype,encoding = mimetypes.guess_type(dat.filename)
print ('Content-type:', gtype+'\n')
print (dat.file.read()) 
```

这给了我：

![Adobe 错误](../Images/f0e4993f7043763985e322dadef48912.png)

我现在已经用两种不同的 pdf 进行了尝试，并且都给出了相同的信息。

一个文本文件返回一个原始文本的字节串：

```
b'STUFF - \xa7112.7\r\n1\r\nSTUFF\r\n8\r\nSTUFF <snip...> 
```

更改代码以包含处置：

```
import cgi
tmp = cgi.FieldStorage()
dat = tmp['upload_file']
import mimetypes
gtype,encoding = mimetypes.guess_type(dat.filename)
print ('Content-type:', gtype)
print ('Content-Disposition: attachment; filename="'+dat.filename+'"\n')
print (dat.file.read()) 
```

并且使用文本文件给了我通常的下载或保存，但文本文件只是相同的字节字符串，而不是实际文件。

我花了最后一天试图找到能让谷歌给我答案的准确的单词组合，但是在所有适用的（非常少，令人惊讶的）结果中，它们都表现得好像这是一个基本的操作，应该可以正常工作。我发现有关从二进制文件中读取并正确打开它们的内容，除了上传的文件是临时文件，而不是保存的文件，它在内存中并且 open 不是它的有效方法。我还看到了有关在 python 中设置文件服务器的内容，但他们谈论的是设置实际服务器，而不仅仅是吐出单个文件。我需要设置一个完整的服务器来取回文件吗？

我确定我在这里犯了一些非常愚蠢的新手错误，但我就是不知道是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T15:23:26.907

`print`总是包含一个额外的换行符，它会破坏二进制 PDF 文件。传递`end=`参数或写入`sys.stdout`：

```
#!/usr/bin/env python3
import sys
import cgi
tmp = cgi.FieldStorage()
dat = tmp['upload_file']
import mimetypes
gtype,encoding = mimetypes.guess_type(dat.filename)

sys.stdout.buffer.write (b'Content-type:' + gtype.encode('ascii') + b'\r\n\r\n')
sys.stdout.buffer.write (dat.file.read()) 
```

# c# - 事件在错误的线程中？

> ID：13160140
> 
> 赞同：1
> 
> 时间：2012-10-31T14:23:21.230
> 
> 标签：c#, wpf, multithreading

我有一个关于线程的问题。

我有一个 WPF 应用程序，它应该显示一些查询的状态。为此，我创建了一个类，它在多个线程（后台工作人员）中运行多个查询。我还创建了一个事件，因此我可以在查询运行时做出反应。

```
 private void cmdStart(object sender, RoutedEventArgs e)
    {
        QuerySetup qs = new QuerySetup();
        //Filling qs with some data
        //...
        SqlProxy sql = new SqlProxy();
        sql.QueryCompleted += new SqlProxy.QueryCompletedEventHandler(sql_QueryCompleted);

        //Starts the backgroundworker
        sql.RunSQL(qs);
    }

    private void sql_QueryCompleted(QueryResult qr)
    {
        lstStatus.Items.Clear();
        lstStatus.Items.Add(qr.RuntimeTotal);
        //... and some more...
    } 
```

现在我收到一条错误消息，告诉我，我无法访问 lstStatus，因为它由不同的线程拥有。

但为什么？事件不应该与 GUI 在同一个线程中吗？我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T14:25:52.377

不会。
大多数非 UI 组件会在非 UI 线程（通常是 ThreadPool 线程）中引发回调

您可以调用`Dispactcher.BeginInvoke`在 UI 线程上运行代码：

```
Dispactcher.BeginInvoke(new Action(delegate {
    ...
})); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T14:27:36.663

不，该事件不会在 UI 线程上执行。

虽然它很容易解决，但您应该调用与 UI 线程上的 GUI 元素交互的代码：

```
private void sql_QueryCompleted(QueryResult qr)
{
    Dispatcher.BeginInvoke(new Action(() => { 
        lstStatus.Items.Clear();
        lstStatus.Items.Add(qr.RuntimeTotal);
        //... and some more...
    });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T20:15:04.340

Dispatcher.BeginInvoke 总是有助于从其他线程更新控件。此外，如果您使用 Backgroundworker 类并从 DoWork 引发事件，则会在 DoWork 线程上引发事件处理程序。如果您从 Backgroundworker 的 WorkCompleted 事件中引发事件，它将在您启动 Backgroundworker 的线程上引发，该线程可以是您的 UI 线程（此处不需要 Dispatcher）。Backgroundworker.ProgressChanged 事件也是如此。

# wicked-pdf - 带有 wicked-pdf 的动态页脚

> ID：13160142
> 
> 赞同：1
> 
> 时间：2012-10-31T14:23:24.257
> 
> 标签：wicked-pdf

是否有可能让 wicked-pdf 呈现单个多页文档的不同页脚？因此，第 1 页将有一个页脚说明一件事，而第 2 页将有一个页脚说明另一件事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:33:12.773

如果您在此处查看示例以使用 javascript 进行自定义页面编号：

[https://github.com/mileszs/wicked_pdf#page-numbering](https://github.com/mileszs/wicked_pdf#page-numbering)

您应该能够编写一些 javascript 逻辑来说明如果 page > 1，然后做一些特别的事情。

另一种方法是使用 WickedPdf.new.pdf_from_string 构建您的第 1 页 pdf，然后在另一个 pdf_from_string 中构建文档的其余部分，并使用 PDFtk 将它们拼接在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-19T16:53:03.753

为了做这样的事情，我认为最好使用**部分文件**！然后在主页中您可以指定宽度、高度并使用`<%= yield %>`或`<%= rende 'partial_file' %>`。断腿:)

# java - 具有未知元素类型的休眠映射

> ID：13160145
> 
> 赞同：0
> 
> 时间：2012-10-31T14:23:30.690
> 
> 标签：java, hibernate, map, hbmxml

我想知道是否可以定义一个未知（对象）元素类型的地图。
我有一个定义了以下地图的对象：

```
Map<String, Object> attributes = new HashMap<String, Object>(); 
```

有时一个属性可以是一个`String`，有时它可以是一个`java.util.Date`
在Hibernate中有什么优雅的方式来处理这样一个数据对象吗？
顺便说一句，我正在使用 HBM XML

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:30:25.013

**不。**

只要讲道理。你怎么把它放到数据库中？没有列，可以存储你扔给它的任何东西——那不会是[1NF](http://en.wikipedia.org/wiki/First_normal_form)

**是的。**

好吧，如果您将其序列化为字符串，并将其存储在 BLOB 中，那么您就可以做任何事情。但这不是一个优雅的解决方案，它可能会带来比以前更多的问题。就像您自己（或适当的库）必须实现从 String 表示的转换，但要避免这种问题正是您使用 Hibernate 的原因，不是吗？

**结论**

如果一个字段在一种情况下需要存储字符串，而`public class Whatchamacallit`在另一种情况下需要存储日期或实例，那么是时候重新考虑类层次结构了——您可能只需要超类的子类。

**额外的**

这种“属性”类型的数据库结构必须谨慎使用，并且要格外小心！随着结构变得越来越大，这可能导致吞吐量非常低......

# magento - Mage::registry() 不在方法之间进行

> ID：13160147
> 
> 赞同：0
> 
> 时间：2012-10-31T14:23:35.993
> 
> 标签：magento

Mage::registry 在方法之间不成立。想法？（是的，首先调用 displayOrder）。

```
public function displayOrderAction()
{
    $this->loadLayout();
    $post        = $this->getRequest()->getPost();
    $block       = $this->getLayout()->getBlock('returner.displayorder');
    $returnOrder = Mage::getModel('returner/order')->getOrder($post['increment_id'], $post['email']);
    Mage::register( 'returnOrder', $returnOrder );
    $this->renderLayout();
}

public function verifyItemsAction()
{
    $post  = $this->getRequest()->getPost();
    $order = Mage::registry('returnOrder');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:33:13.830

据我所知 Mage::registry() 是一个全局变量，仅在该页面内传递信息。由于“verifyItems”是生成的新页面，因此不应执行..您可能希望改用会话

# wpf - 如何在 wpf 中更改数据网格中行的背景颜色？

> ID：13160148
> 
> 赞同：0
> 
> 时间：2012-10-31T14:23:39.110
> 
> 标签：wpf, c#-4.0, wpfdatagrid

如果行项的值超过某个值，我想更改数据网格中行的背景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:51:51.363

[这](https://stackoverflow.com/questions/1113822/conditional-formatting-in-wpf-toolkit-datagrid)是在不使用过程代码的情况下直接在 XAML 中执行此操作的方法，而 XAML 正是样式所属的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:30:11.427

您可以在`LoadingRow`事件中执行此操作，如下所示：

```
private void dataGridLoadingRow(object sender, DataGridRowEventArgs e)
{
    YourObject rowContext = e.Row.DataContext as YourObject;

    if (rowContext != null)
    {
        if (rowContext.YourValue > _someValue)
            e.Row.Background = new SolidColorBrush(Colors.Green);
    }
} 
```

# iphone - 如何在不区分大小写的情况下从字符串数组中获取第一个字符

> ID：13160150
> 
> 赞同：0
> 
> 时间：2012-10-31T14:23:44.700
> 
> 标签：iphone, objective-c, ipad, nsmutablearray, nsarray

在我的 iPhone 应用程序中，我有一系列的刺痛。

从那个字符串我需要得到第一个字符的数组。为此，我实现了如下逻辑。它有效，但在此我已经检索了 twicw 1.Small 字母和 2.Capital 字母的字符。

即使是小写字母，我也只需要大写字母。

像只有**“A”**代表**美洲、非洲和美洲，antantica**

```
contactIndex = [[NSMutableArray alloc] init];

      for (int i=0; i<[contactsArray count]-1; i++){
            //---get the first char of each state---
            char alphabet = [[contactsArray objectAtIndex:i] characterAtIndex:0];
            NSString *uniChar = [NSString stringWithFormat:@"%C", alphabet];

            //---add each letter to the index array---
            if (![contactIndex containsObject:uniChar])
            {            
                  [contactIndex addObject:uniChar];
            }        
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:30:01.300

您可以使用良好的老式 C 函数：`toupper(str)`

或者您可以使用以下`uppercaseString()`方法：

```
NSString* changeString = [upperString uppercaseString]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T14:32:39.547

请参阅示例，这将起作用

```
NSMutableArray *contactsArray = [[NSMutableArray alloc] initWithObjects:@"America",@"Africa",@"america",@"antantica", nil];    

for (int i=0; i<[contactsArray count]; i++){

        NSString *alphabet = [[contactsArray objectAtIndex:i] uppercaseString];

        NSString *firstCharactor = [alphabet substringToIndex:1];

       [contactIndex addObject:firstCharactor];

        NSLog(@"%@",firstCharactor);

 } 
```

# objective-c - 如何在不影响块的情况下删除 presentViewController 语句？

> ID：13160151
> 
> 赞同：0
> 
> 时间：2012-10-31T14:23:46.430
> 
> 标签：objective-c, ios, uiview

我有以下代码：

```
 - (void)startGameWithBlock:(void (^)(Game *))block
{
    GameViewController *gameViewController = [[GameViewController alloc] initWithNibName:@"GameViewController" bundle:nil];
    gameViewController.delegate = self;

    [self presentViewController:gameViewController animated:NO completion:^
    {
        Game *game = [[Game alloc] init];
        gameViewController.game = game;
        game.delegate = gameViewController;
        block(game);
    }]; 
```

}

其中分配 GameViewController 呈现它，然后分配 Game 对象。最后，它会调用您的块来执行特定于游戏类型的初始化

我已经阅读了有关 Blocks 的内容，它在 gameviewcontroller loadView 之后触发了该块我希望代码以与现在相同的方式运行，但没有当前视图请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:38:20.007

如果我理解你的话，你根本不想展示`gameViewController`. 所以你想这样做：

```
- (void)startGameWithBlock:(void (^)(Game *))block
{
    GameViewController *gameViewController = [[GameViewController alloc] initWithNibName:@"GameViewController" bundle:nil];
    gameViewController.delegate = self;

    Game *game = [[Game alloc] init];
    gameViewController.game = game;
    game.delegate = gameViewController;
    block(game);
} 
```

这有两个问题。

1.  一旦你离开这个函数，就没有对你的硬引用，`gameViewController`所以它会再次被释放。您可以通过在任何视图控制器引用的属性中定义一个属性`self`并分配给它来解决这个问题。
2.  您的`block`-call 可能包含依赖于`gameViewController`显示的代码。如果不是这种情况，你应该没问题。

希望这可以帮助。

# android - 联想平板电脑不支持 c2dm 服务器块或不支持？

> ID：13160155
> 
> 赞同：2
> 
> 时间：2012-10-31T14:24:12.540
> 
> 标签：android, configuration, android-c2dm

我一直在为联想平板电脑寻找 c2dm 服务器，因为我的老板决定为我们的安卓平板电脑使用绝对管理。我想知道联想的thinkpad平板电脑是否支持c2dm？我在他们的论坛上有一个类似的问题，但联想支持需要很长时间才能在他们的支持论坛上回复您。继承人的白皮书将提供更多详细信息，因此我不会过多偏离主题： [http](http://www.absolute.com/shared/datasheets/am-mdm-ds-e.pdf) : //www.absolute.com/shared/datasheets/am-mdm-ds-e.pdf 我将引用引用 google c2dm 的行从第 2 页开始：“某些无法访问 google c2dm 服务的 android 系统可能不受支持”

我需要尽快完成这项工作，有人可以帮我解决这个问题吗？

实际问题是，当打开绝对管理应用程序时，我让它与绝对 mdm 服务器通信，该服务器在设备向 c2dm 服务器发送请求后联系。但在让它与 mdm 服务器通信的过程中，它给了我错误消息：“注册失败：连接错误”

某个地方没有联系或删除谷歌的 c2dm 服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:31:07.367

将其放入您的应用程序并在联想平板电脑上启动

```
 // Make sure the device has the proper dependencies
GCMRegistrar.checkDevice(context);
// Make sure the manifest was properly set - comment out this line
// while developing the app, then uncomment it when it's ready.
GCMRegistrar.checkManifest(context); 
```

我认为，如果联想设备支持谷歌账户，它们应该支持 c2dm/gcm

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T14:36:02.497

您是否知道 C2DM 已被弃用并且他们不接受任何新用户？[根据他们的网站](https://developers.google.com/android/c2dm/?hl=de)

```
Important: C2DM has been officially deprecated as of June 26, 2012\. This means that C2DM
has stopped accepting new users and quota requests. No new features will be added to C2DM. 
However, apps using C2DM will continue to work. Existing C2DM developers are encouraged to 
migrate to the new version of C2DM, called Google Cloud Messaging for Android (GCM). See the 
C2DM-to-GCM Migration document for more information. Developers must use GCM for new 
development. 
```

# ruby-on-rails - 发送 HTML 电子邮件

> ID：13160157
> 
> 赞同：0
> 
> 时间：2012-10-31T14:24:15.770
> 
> 标签：ruby-on-rails, amazon-web-services, html-email

我有一个 ruby​​ 应用程序，我想发送 HTML 电子邮件。在我的邮件文件夹中，我有相应的 html.erb 文件。在 dev(localhost) 和 staging(on heroku) 中，html 电子邮件可以正常发送，但是当我尝试在产品中发送 HTML 电子邮件（托管在 AWS 上）时，我不断收到文本电子邮件，而不是 html 电子邮件。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:30:19.943

尝试添加明确的内容类型标头：

```
mail :to => some@address.com, :subject => "your subject", :content_type => "text/html" 
```

# css - 元素上的 Firefox 空白奇怪错误

> ID：13160161
> 
> 赞同：5
> 
> 时间：2012-10-31T14:24:46.810
> 
> 标签：css, firefox, firebug

我已经包含了[一个视频链接，该视频](https://docs.google.com/open?id=0B47tip0c_KEtN0s3YW5oUGRUQVE)深入描述了这一点，但基本上 Firefox 正在向元素添加左/右空格，从而使感知到的填充不同于 Chrome 和 IE。如果我修改 Firebug 中的值并改回来，那么空白就消失了，并且一开始就按照我的预期工作。这很令人沮丧，有什么想法吗？

请观看[视频](https://docs.google.com/open?id=0B47tip0c_KEtN0s3YW5oUGRUQVE)以获得准确的描述。

谢谢

更新 1：这是一个您可以检查代码的测试服务器，它可能与视频略有不同，但问题仍然相同。[test.audrey-oxenhorn.gotpantheon.com](http://test.audrey-oxenhorn.gotpantheon.com)

更新 2：它似乎是 :first-letter FF 有问题的伪元素。我认为这是一个实际的浏览器错误，但现在不确定如何解决。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T16:32:16.053

好的，我想通了！

在尝试在 JSfiddle 上重新创建它之后，我发现 :first-letter 伪元素导致了这个问题。然后我做了一些搜索，发现这是[Firefox 中一个已知的浏览器错误，](https://bugzilla.mozilla.org/show_bug.cgi?id=385615)自 2007 年以来一直开放。这里有一个类似的[问题](https://stackoverflow.com/questions/7548255/is-there-a-css-workaround-for-firefox-bug-inline-block-first-letter-with-cha)。由于我能够通过 Firebug 触发重排/重绘来纠正该问题，因此我怀疑该问题与前面提到的问题相同，因此我使用以下代码触发了该块元素上的重排：

```
@-moz-keyframes bugfix { from { padding-right: 1px ; } to { padding-right: 0; } }

.sf-menu a {
  -moz-animation: bugfix 0.001s;
} 
```

问题解决了，我将 bugzilla 报告链接到这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:31:47.447

您可能需要应用 CSS 主重置。您可以在这里找到：http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

在 CSS 文档的开头应用它。或者检查你的父 CSS 声明。继承可能有问题。

希望这可以帮助！

# java - 如何加载文件名包括变音符号的资源 JAR？

> ID：13160162
> 
> 赞同：10
> 
> 时间：2012-10-31T14:24:47.727
> 
> 标签：java, encoding, jar, java-web-start

我正在开发一个 Java Webstart 应用程序。这应该从 JNLP 文件的资源部分中包含的 JAR 文件中收集资源。

应用程序语言是德语，因此 JAR 中的一些文件夹/文件包含字符*'ä'、'ö'、'ü' 或 'ß'*。如果我启动此应用程序，则会引发以下异常：

```
java.lang.IllegalArgumentException: MALFORMED
at java.util.zip.ZipCoder.toString(Unknown Source)
at java.util.zip.ZipInputStream.readLOC(Unknown Source)
at java.util.zip.ZipInputStream.getNextEntry(Unknown Source)
at com.sun.deploy.net.HttpDownloadHelper.decompressWrite(Unknown Source)
at com.sun.deploy.net.HttpDownloadHelper.download(Unknown Source)
at com.sun.deploy.cache.Cache.downloadResourceToTempFile(Unknown Source)
at com.sun.deploy.cache.Cache.downloadResourceToCache(Unknown Source)
at com.sun.deploy.net.DownloadEngine.actionDownload(Unknown Source)
at com.sun.deploy.net.DownloadEngine.getCacheEntry(Unknown Source)
at com.sun.deploy.net.DownloadEngine.getCacheEntry(Unknown Source)
at com.sun.deploy.net.DownloadEngine.getResourceCacheEntry(Unknown Source)
at com.sun.deploy.net.DownloadEngine.getResourceCacheEntry(Unknown Source)
at com.sun.deploy.net.DownloadEngine.getResource(Unknown Source)
at com.sun.javaws.LaunchDownload$DownloadTask.call(Unknown Source)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

*如果我在记事本 ++*中打开 JAR 文件，则表示编码为 ANSI。因此，我将其更改为 UTF-8，但它甚至无法编译。

我正在使用*Netbeans 7.2*。对于开发，我将 JAR 文件作为库包含在内，这样它就列在资源部分中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:27:03.043

我现在像这样使用JDK中的[JAR工具](http://docs.oracle.com/javase/tutorial/deployment/jar/build.html)

```
jar cf <jar-file-name> <input-file(s)> 
```

它工作得很好。

我不完全理解它为什么会起作用，因为生成的 JAR 文件的编码仍然是 ANSI。

# c# - LinqToSql 将单个 C# 变量转换为多个 SQL 参数

> ID：13160163
> 
> 赞同：4
> 
> 时间：2012-10-31T14:24:50.337
> 
> 标签：c#, linq-to-sql

我在 C# 中有一个变量，我在 LinqToSql 查询中多次使用它。生成的 SQL 两次声明变量，即使它是 C# 中的同一个物理变量

C#

```
const string abc = "ABC";
var test = (from f in DataContext.Foo
            where f.Name == abc || f.Description == abc
            select f.Field1).ToList(); 
```

生成的 SQL

```
exec sp_executesql N'SELECT [t0].[Field1]
FROM [dbo].[Foo] AS [t0]
WHERE ([t0].[Name] = @p0) OR ([t0].[Description] = @p1)',N'@p0 varchar(3),@p1 varchar(3)',@p0='ABC',@p1='ABC' 
```

注意到@p0 和@p1 都是'ABC'。

我尝试将 C# 变量设为常量，看看是否有帮助，但没有区别。

鉴于它是 C# 中的同一个物理变量，是否可以让 LinqToSql 只传递这个变量一次？这只是一个简单的例子，但在更复杂的查询中，我多次传递同一个变量，我最终会在 SQL 中得到一些不必要的参数。

请忽略实际的 SQL - 这只是一个示例，它可能是我感兴趣的任何 SQL，为什么参数被声明两次，即使它是 C# 中的同一个变量。

Gavin 使用“let”的建议生成了以下 SQL：

```
exec sp_executesql N'SELECT [t1].[Field1]
FROM (
    SELECT [t0].[Field1], @p0 AS [value]
    FROM [dbo].[Foo] AS [t0]
    ) AS [t1]
WHERE ([t1].[Name] = [t1].[value]) OR ([t1].[Name] = [t1].[value])',N'@p0 nvarchar(3)',@p0=N'ABC' 
```

所以参数声明了一次，但现在使用的是内部 SELECT。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:43:05.860

试试下面的。我没有任何设置来测试它，但它可能只是解决问题。

```
const string abc = "ABC";
var test = (from f in DataContext.Foo
            let search = abc
            where f.Name == search || f.Description == search
            select f.Field1).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:29:00.280

这就是你的 Linq2Sql。

我认为一些额外的参数甚至不会对您的系统产生明显的性能影响。

如果您想提高性能，您可能应该查看系统的其他部分。

我并不是说这个查询是完美的（它不是），但你可能不应该担心它。

如果您迫切希望获得这些重复参数的装备，而不是编写存储过程并手动构建查询。

# javascript - 将值从 Javascript 返回到 HTML 按钮并将其传递

> ID：13160164
> 
> 赞同：-2
> 
> 时间：2012-10-31T14:24:50.617
> 
> 标签：javascript, jquery, html, return-value

很多网络技术都在我头上，所以我想知道是否有人可以帮助我。我在网页上有一个按钮，单击该按钮会调用`jQuery.ajax`发布请求 javascript 函数。该函数使用成功来稍微操作返回的数据。

我需要将发送回的数据返回到 html 端，以便稍后在其他 javascript 函数中使用。混淆在于它是一个调用此函数的html按钮。我需要此信息，以便在单击另一个按钮时，我可以将此数据与另一个 post call 一起发送。

有人可以指出我开始的方向吗？除了实际传递信息（换句话说，按钮和 ajax 调用）之外，所有功能都已经到位。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:39:59.800

您可以在页面中创建一个全局变量/对象，并使用您的帖子返回的任何数据更新此对象。

所以：

```
var dataStore = {};  (Could any type: array, {}, string, etc..) 
```

在您的成功回调中：

```
dataStore.happyValue = data.happyData; 
```

在这种情况下，数据将对用户完全隐藏，您可以随时或多或少地使用它。

您还可以从成功回调中获取返回的值并将其分配给页面中的元素。这可能是一个隐藏的输入，div，等等。

在此示例中，我使用数据属性存储数据：

```
<div data-store="" id="some-div">.....</div> 
```

在您的成功回调中：

```
$('#some-div').data('store',data.happyData); 
```

然后，您可以稍后通过以下方式访问您的数据：

```
$('#some-div').data('store'); 
```

您最终使用和坚持的方法实际上取决于您要完成的工作以及您希望代码的可扩展性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:26:38.407

您可能需要将值存储在全局变量中。

或者将其存储在隐藏的输入元素中。

# c# - C# MeasureString 不起作用，没有结果

> ID：13160167
> 
> 赞同：0
> 
> 时间：2012-10-31T14:25:08.950
> 
> 标签：c#

解决：

> 在项目设置中禁用“优化代码”后，现在一切正常

* * *

我在三个项目中有以下代码......一个新创建的空白项目和两个实际项目。在新创建的空白一一实际项目中，它可以工作。但在第三个项目中，它没有。

```
System.Drawing.Bitmap m = new System.Drawing.Bitmap((int)(this.NomLabel.Size.Width * pcntDbl), (int)(this.NomLabel.Size.Height * pcntDbl));
System.Drawing.Graphics g = System.Drawing.Graphics.FromImage(m);
System.Drawing.Font stringFont = new System.Drawing.Font("Arial", (float)(this.NomLabel.Font.Size * pcntDbl), System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
float foo = g.MeasureString(this.NomLabel.Text, stringFont).Width; 
```

当我说不时，错误是“当前上下文中不存在 foo”是尝试访问 foo 时的错误。我把所有东西都放在一个 try/catch 块中，没有任何东西被抛出。我不能使用 foo （显然，但我需要）并且不确定这里发生了什么。相同的代码适用于新创建的空白项目。奇怪的是，将最后一行更改为

```
string foo = g.MeasureString(this.NomLabel.Text, stringFont).Width.ToString(); 
```

成功将浮点数发送到字符串，但我无法将其转换回双精度或整数，它做同样的事情。同样，我的意思是它看起来像是在我单步执行代码行时执行了它，但没有做任何事情。任何人都知道发生了什么或我可以尝试什么？谢谢！

顺便说一句，对于那些想知道的人来说，这个项目太大了，无法将它放在一个新项目中。

编辑：TextRenderer.MeasureString 做同样的事情。看起来它执行但在尝试将宽度保存到 int 变量时没有返回任何内容。

编辑2：我刚刚添加了一个

```
int temp = (int)foo; 
```

虽然我现在可以读取 foo 变量，但我无法读取 temp 变量。

编辑 3： this 所在的函数由构造函数调用。我这样做是为了显式调用此函数而不是在构造函数中调用，但它仍然不起作用。我还在这段代码上方为 NomLabel 设置了 SuspendLayout()，并将其移至此代码下方，但仍然无法正常工作。

当执行 foo 行并移动到 temp 行时，我可以看到 foo 变量及其值。但是一旦我到达临时行并尝试执行它，它就会跳转到下一行代码，我什么也看不到。同样，所有这些在全新项目中都可以正常工作，所以我不明白这个项目可能存在什么问题。

编辑 4：我将现有的（损坏的）csproj 文件复制到空白项目中，从中删除了旧文件和引用，添加了我的空白（新）文件并且它不起作用。我认为它与 csproj 文件有关，因为它是唯一随着空白项目而改变的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:14:47.493

在项目设置中禁用“优化代码”后，现在一切正常。

# module - Joomla 文章在主页中打开

> ID：13160168
> 
> 赞同：0
> 
> 时间：2012-10-31T14:25:10.153
> 
> 标签：module, joomla, hide, mainwindow, joomla-article

我的主页上有一张幻灯片。当我点击幻灯片中显示的文章时，文章会在同一主页中打开。

一切都保持不变，文章显示在一切的中间。如何解决此问题以仅显示文章？

我正在使用 Joomla 2.5 版

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:30:20.460

[http://extensions.joomla.org/extensions/style-a-design/modules-management/10307](http://extensions.joomla.org/extensions/style-a-design/modules-management/10307)

这是 Joomla 的一个已知问题。如果您单击内部链接，它将显示页面上的所有模块。解决方案是使用高级模块管理器 - 上面的链接来控制模块显示在哪些页面上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:39:59.620

我的 Joomla 知识有点生疏，但据我记得，看起来您的所有模块都出现在每个页面上，而不仅仅是您想要的主页。有两种方法可以处理这个问题：

1.  进入模块设置并确保从菜单项框中仅选择“主页”。
2.  在您的主页模板中，检查您是否使用“frontpage”组件（option=com_frontpage）。如果是，则显示主页模块容器，否则仅显示内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-27T17:43:42.133

*解决方案从问题迁移到答案*：

> 我用高级模块管理器试了一下；安装时出现错误：
> 
> > NNI_NOT_COMPATIBLE_PHP
> 
> 后来就没用了。我发现一篇关于这个问题的文章解决了我的问题： [https ://docs.joomla.org/How_to_control_module_display_when_linking_to_an_article_with_no_menu_item](https://docs.joomla.org/How_to_control_module_display_when_linking_to_an_article_with_no_menu_item)
> 
> 现在每篇文章打开时都没有不需要的模块。
> 
> 此问题的原因是文章未​​链接到任何菜单项。创建隐藏菜单并将文章添加为子菜单项可以解决问题。

# proxy - 使用 Nginx 阻止 IP 在代理后面

> ID：13160173
> 
> 赞同：4
> 
> 时间：2012-10-31T14:25:45.103
> 
> 标签：proxy, nginx, ddos

我在这里运行一个 Nginx 1.2.4 网络服务器，并且我在我的主机代理后面以防止 ddos​​ 攻击。使用此代理的缺点是我需要从额外的标头中获取真实的 IP 信息。例如，在 PHP 中，它可以很好地工作`$_SERVER[HTTP_X_REAL_IP]`。

现在，在我支持我的主机代理之前，我有一种非常有效的方法可以通过这样做来阻止某些 IP：`include /etc/nginx/block.conf`并允许/拒绝那里的 IP。

但现在由于代理，Nginx 看到所有流量来自 1 个 IP。

我已经配置了 Nginx，`--with-http_realip_module`所以我现在应该能够从人们那里获得真实的 IP。

在我的 nginx.conf 中，我添加了：

```
real_ip_header X-Forwarded-For;
include blockips.conf; 
```

我也试过：

```
real_ip_header X-Real-IP;
include blockips.conf; 
```

在这两种情况下，blockips.conf 中列出的 IP 都不会被阻止。同样在我的日志文件中，我没有看到真实的 IP，但只显示了代理 IP。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:51:58.460

我解决了。

不得不补充：

```
set_real_ip_from 0.0.0.0; 
```

IP`0.0.0.0`是代理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-19T11:35:36.020

*   确保您启用了[http://nginx.org/en/docs/http/ngx_http_realip_module.html](http://nginx.org/en/docs/http/ngx_http_realip_module.html)

*   `set_real_ip_from 123.123.255.0;`

    或对于一系列 IP：

    `set_real_ip_from 123.123.255.0/255;`

    其中 IP`123.123.255.0`是代理 IP / IP

**小心**：设置`set_real_ip_from 0.0.0.0/0;`可能是一个潜在的安全问题，因为它将允许任何带有标头的传入请求，例如`X-Forwarded-For`设置真实 ip。即使在特殊情况下这可能有用，它几乎肯定会为 nginx 中的 ip 阻塞创建一种规避方法。感谢@phylae 在他的评论中澄清。

# android - ScrollView 不滚动

> ID：13160178
> 
> 赞同：3
> 
> 时间：2012-10-31T14:25:52.493
> 
> 标签：android, scrollview

我在 FrameLayout 中有一个 ScrollView。ScrollView 有一个子 LinearLayout。我以编程方式将 ImageViews 添加到此 LinearLayout 中。我希望滚动视图水平滚动。

```
<FrameLayout 
                        android:id="@+id/imgScroll"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:background="@drawable/avatar_block">

                        <ScrollView
                            android:id="@+id/avatarScrollView"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content" 
                            android:layout_gravity="center" 
                            android:fillViewport="true"> 

                            <LinearLayout
                                android:id="@+id/scrollLayout"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content" 
                                android:gravity="left">

                            </LinearLayout>
                        </ScrollView>

                        <RelativeLayout 
                         android:layout_width="match_parent"
                             android:layout_height="match_parent">
                                     <!-- 2 ImageViews -->
                        </RelativeLayout>
    </FrameLayout> 
```

这就是我添加 ImageViews 的方式（目前将图像硬编码为可绘制对象）

```
LinearLayout inScrollLayout = (LinearLayout) findViewById(R.id.scrollLayout);
for(int i = 0; i < imgArray.length; i++)
{
    ImageView imgView = new ImageView(this);
    imgView.setImageResource(R.drawable.icon);  
    imgView.setPadding(0, 0, 40, 0);
    inScrollLayout.addView( imgView);
} 
```

ImageViews 被添加到布局中，但最后一张图像缩小了它的大小，我无法滚动。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T14:30:25.687

ScrollView 不水平滚动，您需要 Horizo [​​ntalScrollView](http://developer.android.com/reference/android/widget/HorizontalScrollView.html)。

# c# - 如何在我的视图中单击按钮从我的会话[“购物车”]中删除一个项目？

> ID：13160183
> 
> 赞同：2
> 
> 时间：2012-10-31T14:26:24.540
> 
> 标签：c#, javascript, ajax, asp.net-mvc, asp.net-mvc-3

这是我用于购物车的两个操作结果：

我使用 ajax 将 productids 添加到我的会话购物车的第一个操作：

```
public ActionResult AddToCart(int ProductImageId)
{
    List<int> cart = (List<int>)Session["cart"];
    if (cart == null)
    {
        cart = new List<int>();
    }
    cart.Add(ProductImageId);

    Session["cart"] = cart;

    return new JsonResult() { Data = new { Status = "Success" } };
} 
```

第二个动作是我将它填充到我的模型中，以便我可以在我的视图中使用它：

```
public ActionResult ShoppingCart()
        {
        var cart = Session["cart"] as List<int>;
        var products = cart != null ? cart.Select(id => 
             {
                 var productImage = repository.GetProductByID(id);
                 return new ProductsViewModel
                    {
                        Name = productImage.Products.Name,
                        Description = productImage.Products.Description.Substring(0, productImage.Products.Description.IndexOf(".") + 1),
                        price = productImage.Products.Price,
                        ProductId = productImage.Products.Id,
                        Image = productImage.ImageUrl,
                        ProductImageId = productImage.Id
                    };
             }) : new List<ProductsViewModel>();

      return View(products);
        } 
```

现在我有一个在购物车视图中显示产品的视图。

显示的每个产品都有一个按钮，上面写着“删除”

我的问题是如何以最佳方式从会话购物车中删除产品？

Actionresult 应该是什么样子？

我创建了一个 Ajax 脚本来获取当有人单击此处的删除按钮时需要删除的产品的 ID：

```
 $(function () {
            $(".a").live("click", function () {
                var $this = $(this),
            ProductImageId = $this.data('ProductImageId');
                $.ajax({
                    url: '/Home/Action',  // <- I have not created a actionresult yet
                    type: "post",
                    cache: false,
                    data: { ProductImageId: ProductImageId },
                    success: function (data) {
                        data = eval(data);
                        $this.addClass('productSelected');
                    },
                    error: function (result) {
                        $(".validation-summary-errors").append("<li>Error connecting to server.</li>");
                    }

                });
            });

        }); 
```

如果我对 javascript 的想法是正确的，如果我想通过我收到的 ID 删除产品，actionresult 应该是什么样子？

我想它应该看起来像这样：

```
public ActionResult DeleteProductFromCart(int ProductImageId)
{
 // code..
} 
```

如果我仍然认为正确，我应该如何在括号内编码`DeleteProductFromCart`？

任何形式的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:33:43.847

我认为它应该与添加非常相似。我添加了一个额外的检查，因为尝试从购物车中删除不存在的东西是不合逻辑的

```
public ActionResult DeleteProductFromCart(int ProductImageId)
{
    List<int> cart = (List<int>)Session["cart"];
    if (cart == null)
    {
        return new JsonResult() { Data = new { Status = "ERROR" } };
    }
    cart.Remove(ProductImageId);

    return new JsonResult() { Data = new { Status = "Success" } };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:33:08.540

```
public ActionResult DeleteProductFromCart(int ProductImageId)
{
    var cart = Session["cart"] as List<int>;
    cart.Remove(ProductImageId);

    ... return result
} 
```

# c# - 按位比较 .exe 和 .dll 与包含的 AssemlyInfo.cs

> ID：13160184
> 
> 赞同：2
> 
> 时间：2012-10-31T14:26:27.660
> 
> 标签：c#, dll, comparison, exe, assemblyinfo

背景：

我被指控试图想出一种新方法来比较使用 AssemblyInfo 嵌入版本号的 dll 和 exe。每次我们进行新构建时，版本都会相应增加。但是，在部署新版本时，我们只想复制实际更改过的 dll 和 exe，但嵌入的版本号似乎总是如此。

为了解决这个问题，系统目前只是依靠比较文件大小，但我的任务是注意到这似乎不够好，因为尽管它发生了变化，但我们未能部署新的 exe；他们只是碰巧有相同的文件大小。我们不知道这种情况发生的频率有多高，所以我们需要对此做一些事情，但如果可能的话，我们希望在替换 dll 和 exe 方面仍然很聪明，这样用户就不会每次都被迫关闭 UI我们真的只需要替换 UI 不使用的文件。

因此，我的问题是，是否有一种聪明的方法可以通过使用 AssemblyInfo 将 exe 和 dll 与嵌入式版本进行比较，同时忽略元数据本身。我环顾四周越多，似乎这可能是不可能的，但我认为在放弃并切换到每次更换所有东西之前都值得一问。

感谢帮助！

编辑：我想我真正希望的一件事是与某些偏移量进行按位比较。AssemblyInfo 是否总是在特定点编译，例如作为比较中可以考虑的页眉或页脚？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T14:42:26.717

Eric Lippert[已经介绍过这个](http://blogs.msdn.com/b/ericlippert/archive/2012/05/31/past-performance-is-no-guarantee-of-future-results.aspx)：

> **是否两次编译相同的 C# 程序可以保证产生相同的二进制输出？**
> 不。
> 嗯，这是一个很容易写的博客。
> ...
> C# 编译器的设计从不会两次生成相同的二进制文件。每次运行时，C# 编译器都会在每个程序集中嵌入一个新生成的 GUID，从而确保没有两个程序集是逐位相同的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T14:34:25.883

不要更新所有文件中的版本号。而是仅更新已更改的特定文件中的版本。这将需要在您的构建过程中进行一些更改，但它会解决您的问题。

# android - 检查数据库是否有记录

> ID：13160185
> 
> 赞同：-1
> 
> 时间：2012-10-31T14:26:34.837
> 
> 标签：android, android-sqlite

我已经编写了代码来检查数据库是否有值，如果数据库有记录，我想移动到一个活动，如果没有记录，我想移动到另一个活动。但是我的代码总是移动到一个活动。

```
final Cursor cursor = dbHelper.fetchAllRecords();

        if(cursor!=null)
        {
            Intent i4=new Intent(MainActivity.this,MyMenu.class);
            startActivity(i4);
            this.finish();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:29:25.647

```
 if(cursor!=null && cursor.getCount() > 0)
    {
        Intent i4=new Intent(MainActivity.this,MyMenu.class);
        startActivity(i4);
        this.finish();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:30:45.057

用它来检查记录

```
public boolean isDataAvailable()
    {

        SQLiteDatabase db = mdbHelper.getReadableDatabase();
        Cursor cursor = null;
        try {
        cursor = db.rawQuery("SELECT Count(*) FROM"+ TABLE_NAME, null);
        cursor.moveToFirst();
            int rowCount = cursor.getInt(0);
        if(rowCount>0)
        return true;
        else
            return false;   
        }catch (Exception e) {
            return false;   
        }
        finally {
            if (cursor != null && !cursor.isClosed())   cursor.close();
            }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T14:37:46.513

创建一个方法来获取您的 dbhelper 中的计数并使用此查询
示例

```
"SELECT COUNT(word) as WORD_COL FROM " + WORD_TABLE 
```

这会将计数发回给您，因此如果计数为 0，则表示没有记录

# powershell - 在 PowerShell 中使用 Invoke-Command 在 GACUTIL 中安装程序集（无权限）

> ID：13160188
> 
> 赞同：1
> 
> 时间：2012-10-31T14:26:45.637
> 
> 标签：powershell, gac

我尝试运行一个调用命令的 PowerShell 脚本。在该命令中，我想将程序集写入 GAC。

这是代码：

```
invoke-command -computername COMPUTERNAME -scriptblock { 
$gacUtil = "${Env:ProgramFiles(x86)}\Microsoft SDKs\Windows\v7.0A\Bin\NETFX 4.0 Tools\gacutil.exe"; 
& $gacutil '/nologo' '/if' '\\fileserver\..\Assembly.dll' 
} 
```

PowerShell 然后返回此错误：

```
Failure adding assembly to the cache: Administrator permissions are needed to use the selected options. Use an administrator command prompt to complete these tasks. 
```

经过一番谷歌搜索后，我`-Credential`在调用命令中添加了一个参数（使用管理员凭据），但这仍然不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:48:17.457

错误来自要放入 GAC 的程序集 ('\fileserver..\Assembly.dll')，而不是 gacutil.exe。

[Christian](https://stackoverflow.com/users/520612/christian)发布的一个很好的替代方案：嗯，谷歌搜索只给了我这种[在 GAC 中远程安装程序集的方法](http://www.cptloadtest.com/2005/07/26/Remote-Deployment-To-The-GAC.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-08T01:25:57.073

当我们遇到此问题时，需要在管理员模式下运行命令提示符。希望这个答案对您有所帮助。

# libgdx - 如何创建皮肤文件以在 libgdx 中使用

> ID：13160190
> 
> 赞同：2
> 
> 时间：2012-10-31T14:26:51.467
> 
> 标签：libgdx

我一直在寻找来自 libgdx SVN 的 skinpacker，但没有成功。然后我知道它已经不存在了。所以，问题是我如何创建一个 skin.json 文件以在我的 libgdx 项目中使用。你知道任何允许我使用 GUI 来创建皮肤的工具吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-20T05:31:41.870

正如[Gnurfos 所说](https://stackoverflow.com/a/13620897/4794)，您需要运行`TexturePacker2`以生成皮肤文件。我发现设置一个[助手类](https://github.com/donkirkby/vograbulary/blob/22eb206cddab4e3685536f65aeeaf6e3a813920a/vograbulary-test/src/com/github/donkirkby/vograbulary/AssetPacker.java)很有帮助，这样我就不必记住所有的路径信息。

```
public class AssetPacker {
    public static void main(String[] args) throws Exception {
        TexturePacker2.process(
                "assets-raw/skin", 
                "../vograbulary-android/assets/data/ui", 
                "uiskin.atlas");
    }
} 
```

[以下是我项目的README 文件](https://github.com/donkirkby/vograbulary/blob/22eb206cddab4e3685536f65aeeaf6e3a813920a/README.md#contributing)中的一些相关说明。

> 要编辑图形文件，请编辑 vograbulary-test/assets-raw 的内容，然后运行 ​​vograbulary-test/src/com.github.donkirkby.vograbulary.AssetPacker。要更改字体，请按照运行 Hiero 的说明进行操作。启动 Hiero，打开 vograbulary-test/assets-raw/default.hiero 设置文件，然后将字体文件保存在 vograbulary-android/assets/data/ui/default.fnt 上。这也将生成 default.png，您需要将其移回 vograbulary-test/assets-raw/skin/default.png。最后，再次运行 AssetPacker。

皮肤的原创在[另一个问题](https://stackoverflow.com/q/18526116/4794)中描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T07:34:27.327

使用最新版本，您不再需要 SkinPacker.jar。

这是我的做法：

```
CLASSPATH=$LIB_DIR/gdx-tools.jar:$LIB_DIR/gdx.jar
CLASSNAME=com.badlogic.gdx.tools.imagepacker.TexturePacker2
INPUTDIR=uiskin_elements
OUTPUTDIR=.
java -classpath $CLASSPATH $CLASSNAME $INPUTDIR $OUTPUTDIR uiskin.atlas 
```

这会生成一个 uiskin.atlas 和 uiskin.png，假设您将所有 .png 放在一个名为 uiskin_elements 的目录中。

# c# - 如何将 ASP.NET 页面转换为 PDF 并下载（值不是静态的）

> ID：13160191
> 
> 赞同：3
> 
> 时间：2012-10-31T14:26:53.033
> 
> 标签：c#, html

我开发了一个网页，允许用户像注册表单一样输入值。在保存数据时，我需要提供一个选项以将页面下载为 PDF 格式。

我尝试了以下方法：

1.  我尝试使用 itextsharp dll。问题是我没有得到 PDF 文件中的所有内容。示例图像和样式未正确转换。
2.  我尝试了一些第三方工具，例如（SautinSoft 的 PdfVision、ConvertApi、pdfcrowd）组件。所有的 dll 都将 URL 作为参数并转换为 PDF。通过这种方式，服务器端的 HTML 代码被转换为 PDF。我输入的值不在 PDF 中。

我从网上获得的示例代码（sautinsoft）。

```
 SautinSoft.PdfVision v = new SautinSoft.PdfVision();
        v.PageStyle.PageSize.Letter();
        byte[] pdf = v.ConvertHtmlFileToPDFStream(@"http://en.wikipedia.org/wiki/Main_Page");
        if (pdf != null)
        {
            Response.Buffer = true;
            Response.Clear();
            Response.ContentType = "application/PDF";
            Response.AddHeader("Content-Disposition:", "attachment; filename=Result.pdf");
            Response.BinaryWrite(pdf);
            Response.Flush();
            Response.End();
        } 
```

**对于（itextsharp）**

```
protected override void Render(HtmlTextWriter writer)
{
MemoryStream mem = new MemoryStream();
StreamWriter twr = new StreamWriter(mem);
HtmlTextWriter myWriter = new HtmlTextWriter(twr);
base.Render(myWriter);
myWriter.Flush();
myWriter.Dispose();
StreamReader strmRdr = new StreamReader(mem);
strmRdr.BaseStream.Position = 0;
string pageContent = strmRdr.ReadToEnd();
strmRdr.Dispose();
mem.Dispose();
writer.Write(pageContent);
CreatePDFDocument(pageContent);

}

public void CreatePDFDocument(string strHtml)
{

string strFileName = HttpContext.Current.Server.MapPath("test.pdf");
// step 1: creation of a document-object
Document document = new Document();
// step 2:
// we create a writer that listens to the document
PdfWriter.GetInstance(document, new FileStream(strFileName, FileMode.Create));
StringReader se = new StringReader(strHtml);
HTMLWorker obj = new HTMLWorker(document);
document.Open();
obj.Parse(se);
document.Close();
ShowPdf(strFileName);

}

public void ShowPdf(string strFileName)
{
Response.ClearContent();
Response.ClearHeaders();
Response.AddHeader("Content-Disposition", "inline;filename=" + strFileName);
Response.ContentType = "application/pdf";
Response.WriteFile(strFileName);
Response.Flush();
Response.Clear();
} 
```

如果您有更好的解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:32:16.903

您可以尝试这个库来实现您想要实现的目标

[http://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/)

这是有关如何使用它的教程

[https://gist.github.com/2341776](https://gist.github.com/2341776)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:40:30.963

在之前的工作中，我们为 Persits Software AspPDF.NET（和“经典”AspPDF）支付了许可证，该软件运行良好。没有应用 CSS 或图像被排除在 PDF 之外没有任何问题——尽管太公平了，我们从不使用任何可以被认为是“高级”CSS 的东西。我认为您可以尝试一个免费演示，该演示会在您购买并应用注册密钥之前为您制作的 PDF 添加水印。

# javascript - 显示带有警报的 JSON 数组的数据

> ID：13160195
> 
> 赞同：1
> 
> 时间：2012-10-31T14:27:06.367
> 
> 标签：javascript, jquery, arrays, json

> **可能重复：**
> [我有一个嵌套的数据结构/JSON，我怎样才能访问一个特定的值？](https://stackoverflow.com/questions/11922383/i-have-a-nested-data-structure-json-how-can-i-access-a-specific-value)

我想显示 JSON 数组的数据，我试过了，但它不起作用：

```
var Content = [{
    "01":[{"text":"blablablablabla","foo":"abeille :o"}],
    "02":[{"text":"blobloblobloblo","fuuu":"bzzzz :)"}],
    "03":[{"text":"blibliblibli","fiii":"bzzoooo ;)"}]
}];
alert(Content.01.foo); 
```

这个怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T14:28:22.127

您需要引号和数组索引。

```
 //   v---index 0 of the Array
Content[0]["01"][0].foo
   //            ^---index 0 of the Array
   //     ^----^---square brackets and quotes 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T14:29:54.557

`Content`是一个包含对象的数组，而不是对象。

标识符不能以数字开头，因此您不能使用它们来访问以数字开头的属性。您必须使用方括号表示法（基于字符串）而不是基于标识符的点表示法。

对象中的每个数字属性都包含一个包含对象的数组，而不是对象。

```
alert(Content[0]['01'][0].foo) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T15:13:01.003

你用的没用`[]`

对象 - {} 数组 - []

有关 sintax JSON 的更多详细信息，请查看**[此处](http://www.json.org/)**

用这种方式修改你的代码

```
var Content = {
    "01":{"text":"blablablablabla","foo":"abeille :o"},
    "02":{"text":"blobloblobloblo","fuuu":"bzzzz :)"},
    "03":{"text":"blibliblibli","fiii":"bzzoooo ;)"}
};
alert(Content['01'].foo); 
```

# image - 水晶报表洋红色图像背景而不是透明

> ID：13160197
> 
> 赞同：0
> 
> 时间：2012-10-31T14:27:12.183
> 
> 标签：image, background, crystal-reports, transparent

我正在使用 OLE 对象在 Crystal 报表的列表中显示图像。其目的是不必将图像数据存储在数据集中，而是存储在计算机本地路径中。

图像是具有透明背景的 .PNG 文件。我看到所有带有洋红色背景的图像！ ![在此处输入图像描述](../Images/58025278350b8d3274104025b9a49293.png)

有没有办法使背景透明？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:19:35.730

不幸的是，水晶报告不支持图像的图像透明度。我不知道任何解决方法，并且已经看了很多次，希望有人能解决。

# objective-c - 如何格式化 NSString 输出？

> ID：13160198
> 
> 赞同：-2
> 
> 时间：2012-10-31T14:27:13.453
> 
> 标签：objective-c, nsstring, format, output

我有一个我正在使用的股票市场计算器，它在标签中显示了操作的总利润。问题是输出是`3984.00`，这不是我们在巴西的正确格式，即`3.984,00`. 那么，我如何获得`3984.00`输出`3.984,00`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:41:10.773

就像 DrummerB 说的，看看[NSNumberFormatter](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html)。

假设您当前的语言环境是巴西，您可以按照以下方式做一些事情：

```
NSString *output = @"3984.00";

NSNumber *number = [NSNumber numberWithDouble:[output doubleValue]];
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
NSString *groupingSeparator = [[NSLocale currentLocale] objectForKey:NSLocaleGroupingSeparator];
[formatter setNumberStyle:NSNumberFormatterDecimalStyle];
[formatter setMinimumFractionDigits:2];
[formatter setMaximumFractionDigits:2];
[formatter setGroupingSeparator:groupingSeparator];
[formatter setGroupingSize:3];
[formatter setAlwaysShowsDecimalSeparator:YES];
[formatter setUsesGroupingSeparator:YES];

NSString *desiredString = [formatter stringFromNumber:number]; 
```

编辑：忘记添加 minimumFractionDigits。

# jquery - jQuery 验证插件。两个自定义规则不起作用

> ID：13160201
> 
> 赞同：0
> 
> 时间：2012-10-31T14:27:29.020
> 
> 标签：jquery, jquery-validate

我正在使用 jQuery 验证引擎，并且我有两个自定义规则需要用于一个字段。我已经一个一个地尝试了它们，它们工作正常。我如何连接两者？

```
class="validate[required,custom[OFS, onlyLattinLetters], maxSize[140]]" 
```

或者

```
class="validate[required,custom[OFS], custom[onlyLattinLetters], maxSize[140]]" 
```

不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:34:13.033

您是否尝试过在插件初始化函数中声明它们而不是内联类？

```
$(document).ready(function() {
    $('#myForm').validate({
        rules: {
            myField: { 
                required: true,
                OFS: true,
                onlyLattinLetters: true,
                maxSize: 140
            }
        }
    });
}); 
```

**编辑**：

我建议完全避免使用内联代码；我认为它更难维护，使您的 HTML 冗长，并且将功能与您的演示样式混合在一起。

我还删除了我在 jQuery 讨论论坛中找到的下面的示例（[请参阅编辑历史记录](https://stackoverflow.com/posts/13160319/revisions)），因为我找不到任何有关正确语法和用法的官方文档。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-31T15:19:24.187

如果你必须使用内联，使用 Add 方法来创建你的两个自定义规则，我会做一个来展示

```
 jQuery.validator.addMethod("onlyLattinLetters", function(value, element) {
 return this.optional(element) || \p{IsBasicLatin}.test(value); 
 // or replace before .test() whatever your regex is 
 }, "Only in Latin numbers please"); 
```

那么你可以使用你的验证调用，从内联中删除 custom[]

```
 class="validate[required, OFS, onlyLattinLetters, maxSize[140]]" 
```

确实更好的方法是 Sparky672 的 validate() 插件初始化，但如果你必须使用内联上述工作

# mysql - 从表中删除重复的行

> ID：13160203
> 
> 赞同：2
> 
> 时间：2012-10-31T14:27:37.273
> 
> 标签：mysql, phpmyadmin

> **可能重复：**
> [删除 MySQL 中的重复行](https://stackoverflow.com/questions/3311903/remove-duplicate-rows-in-mysql)

我想在一个巨大的表中为单个属性创建一个唯一索引，但是有重复的值，所以我需要删除重复。只能删除重复的记录。phpmyadmin 或 mysql 查询中执行此操作的最佳解决方案是什么？

我想出的唯一解决方案是选择另一个表，但我更愿意从原始表中删除数据。

该表看起来像这样（我想把唯一索引放在`id`）

```
|id|...
+--+---
| 1|x
| 2|a   <-- duplicity
| 2|b   <-- duplicity
| 3|c
| 4|d 
```

这将是最好的结果

```
|id|...
+--+---
| 1|x
| 2|a
| 3|c
| 4|d 
```

这也是可以接受的结果

```
|id|...
+--+---
| 1|x
| 3|c
| 4|d 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T14:34:15.353

```
ALTER IGNORE TABLE my_table ADD UNIQUE INDEX (id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:56:32.110

```
DELETE FROM table 
WHERE id IN 
   (SELECT id FROM table, (SELECT id, count(*) dNum FROM table GROUP BY id) x 
     WHERE id = x.id      
   ORDER BY id DESC LIMIT dNum-1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T14:31:50.860

```
DELETE  a 
FROM    tableName a
        LEFT JOIN
            (
                SELECT id, min(colName) x
                FROM tableName
                GROUP BY id
            ) c
        ON a.id = c.id AND
            a.colName = c.x
WHERE c.id IS NULL; 
```

*   [**查看 SQLFIDDLE 演示**](http://sqlfiddle.com/#!2/0da14/1)

# objective-c - UIScrollView 和 zoomScale

> ID：13160206
> 
> 赞同：1
> 
> 时间：2012-10-31T14:27:42.500
> 
> 标签：objective-c, ios, uiview, uiscrollview

我有一个滚动视图和两个子视图，其中一个图像视图和一个按钮视图包含一些与图像视图有线条的热点。我想放大/缩小并相应地移动热点。我遇到的问题是我无法将热点保留在我想要的地方，也无法在这里找到解决方案。

这是我在 viewDidLoad 中的代码

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // set the tag for the image view
    [imageView setTag:ZOOM_VIEW_TAG];

    imageScrollView.delegate = self;

    float sexy = [imageScrollView frame].size.height  / [imageView frame].size.height;
    initialZoom = sexy;
    [imageScrollView setZoomScale:sexy animated:NO];
    [imageScrollView setMinimumZoomScale:sexy];
    [imageScrollView setContentInset:UIEdgeInsetsMake(-30, 0, 0, 0)];
    scaleStart =  imageScrollView.zoomScale;
    buttonView = [[UIView alloc]init];
    buttonView.frame = imageScrollView.frame;

    [imageScrollView addSubview:buttonView];

    button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [button addTarget:self
               action:@selector(buttonClicked:)
     forControlEvents:UIControlEventTouchDown];
    [buttonView addSubview:button];

    [button setTitle:@"Button x" forState:UIControlStateNormal];

    button.frame = CGRectMake(200.0, 400.0, 520.0, 150.0);
    imageView.center = self.view.center;
    imageScrollView.maximumZoomScale = MAX_ZOOM_SCALE;

    //setting an orientation notifier
    UIDevice *device = [UIDevice currentDevice];                    //Get the device object
    [device beginGeneratingDeviceOrientationNotifications];         //Tell it to start monitoring the accelerometer for orientation
    NSNotificationCenter *nc = [NSNotificationCenter defaultCenter];    //Get the notification centre for the app
    [nc addObserver:self                                            //Add yourself as an observer
           selector:@selector(orientationChanged:)
               name:UIDeviceOrientationDidChangeNotification
             object:device];    
  } 
```

我正在尝试实现我的其余代码

```
- (void)scrollViewDidZoom:(UIScrollView *)aScrollView 
```

使用 aScrollView.zoomScale 属性没有任何运气。

并将按钮视图移动到正确的位置。我遇到的问题是，当我放大（完全放大）时，缩放比例为 0.53454，而当我（完全）缩小时，我得到的值为 0.37261，为什么会发生这种情况，我不会再次获得第一个价值？

我怎么能做我想做的事？

当放大/缩小时，我想要谷歌地图之类的东西，并且地点保持在原位而不放大自己。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:09:21.177

这个怎么样？

如果您希望某些东西在缩放时保持自己的比例，您可以制作另一个包含它的视图。这就像将一个视图分为两个视图。一个负责缩放，另一个负责处理保持比例的东西。这就是我这样做的原因。

# asp.net - Web 部署：如何将文件保存在特定目标文件夹中

> ID：13160208
> 
> 赞同：6
> 
> 时间：2012-10-31T14:27:46.383
> 
> 标签：asp.net, asp.net-mvc-3, one-click-web-publishing

**设想**

*   Visual Studio 2012 web 发布：web Deploy 方法。
*   选择了“在目标位置删除其他文件”选项。
*   带有“上传”文件夹的 MVC3 网站

**问题**

如何在不从部署设置中删除“删除附加文件...”选项的情况下将现有文件保留在上传文件夹的目标位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:44:39.990

显然你可以用 wpp.targets 文件来做到这一点。然后只跳过你想要的文件夹...

```
<ItemGroup>
  <MsDeploySkipRules Include="SkipErrorLogFolder1"> 
    <SkipAction>Delete</SkipAction> 
    <ObjectName>FolderPath</ObjectName> 
    <AbsolutePath>ErrorLog</AbsolutePath> 
  </MsDeploySkipRules> 
</ItemGroup> 
```

看这里，先看那里：

[用于跳过目录的 MSbuild 命令行参数](https://stackoverflow.com/questions/12982061/msbuild-command-line-parameter-for-skipping-the-directory)

# firefox - Firefox 16 中基于浏览器的 YouTube 上传意外中止

> ID：13160214
> 
> 赞同：5
> 
> 时间：2012-10-31T14:28:16.883
> 
> 标签：firefox, ssl, youtube-api, firefox-16

我有一个常规的基于 YouTube 浏览器的上传表单，如下所示。它在 IE、Chrome 和旧版本的 Firefox 中运行良好。但是，我的 Firefox 16.0.2 只是挂在 POST 上。我已经用 Firefox 16.x 在其他计算机上复制了这个问题。

***如果我通过将 YouTube 的 URL 从https** ://uploads.gdata.youtube.com*更改为***http** :* //uploads.gdata.youtube.com 来手动覆盖 SSL，文件会正确上传。

更奇怪的是，Firebug的*Net*选项卡上根本没有记录该请求。在 Firefox 的*Web Console*上，我可以看到请求，但完全没有响应和状态代码。然后，如果我使用启用了*解密 HTTPS 流量*选项的 Fiddler，则文件上传正确。

任何人都知道会发生什么或如何在不*解决*问题的情况下监控 SSL 流量？

```
<!DOCTYPE html>
<html>
    <head><title>YouTube Test</title></head>
    <body>
        <form id="frmYouTube" enctype="multipart/form-data" method="post" action="https://uploads.gdata.youtube.com/action/FormDataUpload/YOU_TUBE_URL?nexturl=https%3a%2f%2fMY.DOMAIN.COM%2fDIR_1%2fDIR_2%3fid2%3dLOCAL_ID">
        <table>
            <tr><td><input type="file" name="file" /></td></tr>
            <tr><td>
                    <input type="hidden" name="token" value="MY_YOUTUBE_TOKEN" />
                    <input type="submit" value="Upload" />
            </td></tr>
        </table>
        </form>
</body>
</html> 
```

YouTube url 和令牌是在后端使用 ASP.Net 和 Google.GData.YouTube 库生成的。这是该代码的一部分：

```
public class BaseModel
{

    public string SITE_YOUTUBE_APP_NAME = "";
    public string SITE_YOUTUBE_DEV_KEY = "";
    public string SITE_YOUTUBE_USERNAME = "";
    public string SITE_YOUTUBE_PASSWORD = "";
    public string YOUTUBE_CATEGORY = "";

    public FormUploadToken FormToken;

    public void Load()
    {

        YouTubeRequestSettings settings = new YouTubeRequestSettings(
            SITE_YOUTUBE_APP_NAME, SITE_YOUTUBE_DEV_KEY,
            SITE_YOUTUBE_USERNAME, SITE_YOUTUBE_PASSWORD);

        YouTubeRequest request = new YouTubeRequest(settings);

        Video newVideo = new Video();

        string title = "Test Title";

        string description = "Test Description";

        newVideo.Title = title;
        newVideo.Tags.Add(new MediaCategory(YOUTUBE_CATEGORY, YouTubeNameTable.CategorySchema));
        newVideo.Keywords = "test";
        newVideo.Description = description;
        newVideo.YouTubeEntry.Private = false;

        FormToken = request.CreateFormUploadToken(newVideo);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:32:45.917

根据我的测试，基于 YouTube 浏览器的上传非常喜怒无常，有时它可以正常工作（1-5% 的机会），但大多数时候它不起作用，我只是在 Windows 7 上使用 Firefox 16 使用 54.243.53.37/Home/Index 上传了一个视频，但我知道大多数时候它不会初始化。

但是，禁用防火墙会增加成功上传的机会。不知道为什么会这样（当然这可能只是幸运的观察）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T19:14:22.607

由于现在可以使用 Firefox 17 并且 Google 并不完全支持 Firefox 16 的此功能，因此我添加了警告，提醒使用 Firefox 16 的用户升级到 Firefox 17 或使用其他浏览器。不理想，但考虑到在 Firefox 16 上失败的测试用户数量，这是唯一合理的解决方案。

# python - 链接到 emacs 中的 python 模块

> ID：13160217
> 
> 赞同：5
> 
> 时间：2012-10-31T14:28:22.530
> 
> 标签：python, django, emacs, ide

我正在研究 emacs 作为 Eclipse 的替代品。Eclipse 中我最喜欢的功能之一是能够将鼠标悬停在几乎任何 python 对象上并获取其源列表，然后单击它以直接转到另一个文件中的代码。

我知道这在 emacs 中一定是可能的，我只是想知道它是否已经在某个脚本中实现了，如果是这样，如何在 emacs 上启动和运行它。

看起来我的版本是 24.2 版。

另外，由于我将进行 Django 开发，如果有一个可以理解 Django 模板语法的插件，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:40:10.253

我也从 Eclipse 切换到了 Emacs，我必须说，在适应了更多以文本为中心的代码探索方式之后，我一点也不怀念这个特性。

在 Emacs 中，您可以只打开一个 shell 提示符（Mx shell）。然后从 Emacs shell 中运行 IPython，一切就绪。我通常将屏幕水平分成两半，并使底部窗口更薄，这样它就像以前的 Eclipse 控制台一样。

我在我的 .emacs 中添加了一个功能，可以让我“聚焦”底部窗口​​并将其交换到顶部窗口。因此，当我编码时，如果遇到想要查看源代码的内容，我只需键入 Cx c 将 IPython shell 切换到顶部窗口，然后键入 %psource < code thing > 它将显示资源。

这涵盖了我曾经在 Eclipse 中快速获取源代码的 95% 以上的用例。我也不关心需要输入 Cx b 或 Cx Cf 来打开代码文件。事实上，经过大约 2 或 3 个小时的编程，我发现几乎我可能需要的每个缓冲区都已打开，我只需键入 Cx b <文件名开头>，然后按制表符完成它。

由于我在打字方面变得更加熟练并且不需要将注意力转移到鼠标上，我认为现在这实际上比 Eclipse 中的“快速”鼠标悬停加 F3 策略更快。启动时，在底部打开 IPython 比非交互式 Eclipse 控制台要好得多。您可以使用 Mp 和 Mn 之类的东西来获得 IPython 在通过命令返回方面的前后行为。

我想念的一件事是 IPython 中的制表符补全。为此，我认为有一些附加组件可以做到这一点，但我还没有投入时间来安装它们。

如果您想查看我上面提到的选项的任何 elisp 代码，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:47:44.933

Check [ropemacs](http://rope.sourceforge.net/ropemacs.html) (a refactoring library). It has a "go to definition" command (`C-c g`) that works as expected (and opens the file if it needs to).

If you don't want to spend a lot of time configuring emacs for python, have a look at this [package](https://github.com/gabrielelanaro/emacs-for-python).

I don't know about any plugin that understands Django template syntax, sorry.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T11:30:39.527

代表 python-mode.el 打开了一个功能请求

[https://blueprints.launchpad.net/python-mode/+spec/go-to-definition](https://blueprints.launchpad.net/python-mode/+spec/go-to-definition)

py-complete-goto-definition 应该已经在函数上工作

# c# - 可以应用哪种设计模式来构建需要来自两个数据读取器的数据的对象？

> ID：13160219
> 
> 赞同：2
> 
> 时间：2012-10-31T14:28:24.247
> 
> 标签：c#, sql-server, design-patterns

我是一名有兴趣了解“设计模式”的新手程序员。我从多个站点阅读了很多关于设计模式的信息，但大多数都使用特定模式的非常基本的应用程序。

我的目标是组成一个包含来自多个表的数据的对象。我正在使用存储库模式从我的数据库中的一个表中提取所需的数据。但我还需要第二张表中的其他数据。（在我看来，使用 Joins 会使这不必要地复杂化）这是我不确定下一步该做什么的地方。工厂模式会是最好的吗？ETC...

在大多数情况下，至少一些关于如何做到这一点的指导会有所帮助，而不一定是实际的“代码”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:32:21.170

有趣的是，您已经找到了答案。您在问题中说“撰写”。[Builder](http://en.wikipedia.org/wiki/Builder_pattern)设计模式专注于逐步构建一个复杂的对象，它几乎总是构建一个 Composite

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:37:40.553

您是否考虑过 DataMapper 类型的模式（[http://martinfowler.com/eaaCatalog/dataMapper.html](http://martinfowler.com/eaaCatalog/dataMapper.html)）。

这种模式适用于存储库，因为存储库可以组合和执行查询，而数据映射器获取结果（数据读取器）并构建相关对象。

[http://martinfowler.com/eaaCatalog/repository.html](http://martinfowler.com/eaaCatalog/repository.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T14:32:49.160

不确定这会有多建设性，但我会做的是得到两个对象并从两个部分组成第三个对象。

```
MyObjectA a = GetFromDataReader1();
MyObjectB b = GetFromDatareader1();
MyCompositeObject c = MyCompositeObject.FromParts(a,b);

class MyCompositeObject
{
 // all your properties you need
  public static MyCompositeObject FromParts(MyObjectA a, MyObjectB b) 
  { //return a new MyCompositeObject here
  }
} 
```

# perl - 如何在 Windows 机器上运行 Perl 脚本？

> ID：13160223
> 
> 赞同：-4
> 
> 时间：2012-10-31T14:28:40.330
> 
> 标签：perl

这个问题的免费解决方案是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T14:32:44.233

有[Strawberry Perl](http://strawberryperl.com/)或[ActiveState ActivePerl](http://www.activestate.com/activeperl)（有一个免费的 ActivePerl 社区版）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T14:36:33.040

[Cygwin](http://www.cygwin.com/)（不仅仅是 perl，但您可以在与其原生环境更相似的环境中使用 perl）

# c# - .net 中的 System.Threading.Task 库，特别是 Parallel.ForEach

> ID：13160224
> 
> 赞同：-2
> 
> 时间：2012-10-31T14:28:41.140
> 
> 标签：c#, .net, multithreading, parallel-extensions

我查看了微软关于 MSDN 上的任务的教程......它显示的内容很好，但我仍然有问题在那里的例子......在这个 URL 找到：[MSDN Link](http://msdn.microsoft.com/en-us/library/dd460699.aspx)

他们展示了一个示例，其中展示了 Parallel.ForEach() 静态方法调用。在那个方法调用中，它们有四个参数……第一个参数必须是一个整数数组吗？或者它可能是所有线程都在处理的任何类型的集合或对象？看起来第二个参数是一个 Action，它是一个不返回值（或 void）的委托。第二个变量到底是干什么用的？线程本地初始化程序？为什么初始化为0？这里到底设置了什么？第三个参数只是一个委托（或我想用的函数点）是 lambda 表达式的右侧实际函数吗？例如，我可以把一个实际函数的名称放在那一边，而不必在那里写出来吗？例如...

```
 public int localSum(int n, ParallelLoopState loopState, int localSum) {
        localSum += n;
        Console.WriteLine("Thread={0}, n={1}, localSum={2}", Thread.CurrentThread.ManagedThreadId, n, localSum);
        return localSum;
    }

(n, loopState, localSum) => localSum(int n, ParallelLoopState loopState, int localSum), 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:36:01.107

看起来像[这样的重载](http://msdn.microsoft.com/en-us/library/dd991486.aspx)：

```
public static ParallelLoopResult ForEach<TSource, TLocal>(
    IEnumerable<TSource> source,
    Func<TLocal> localInit,
    Func<TSource, ParallelLoopState, TLocal, TLocal> body,
    Action<TLocal> localFinally
) 
```

你在哪里：

```
Parameters

source
    Type: System.Collections.Generic.IEnumerable<TSource>

    An enumerable data source.

localInit
    Type: System.Func<TLocal>

    The function delegate that returns the initial state of the local data for each task.

body
    Type: System.Func<TSource, ParallelLoopState, TLocal, TLocal>

    The delegate that is invoked once per iteration.

localFinally
    Type: System.Action<TLocal>

    The delegate that performs a final action on the local state of each task. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:37:31.290

第二个参数是一个`Action<int>`类似于普通`foreach`循环体的参数。最简单的使用方法`Parallel.ForEach`是双参数重载：

```
Parallel.ForEach(myIntegers, i => loopBody(i));

// non-parallel equivalent
foreach(int i in myIntegers)
{
    loopBody(i);
} 
```

`myIntegers`可以是任意`IEnumerable<int>`的，因此不一定是数组。

# objective-c - 无法从对象创建 BOOL

> ID：13160225
> 
> 赞同：3
> 
> 时间：2012-10-31T14:28:42.077
> 
> 标签：objective-c, cocoa, core-data, osx-mountain-lion, xcode4.5

我正在关注 mac os x 的 cocoa 编程指南，第 4 版。在第 32 章中我弄乱了代码，并且我没有备份它，所以我不得不从 big nerd 牧场下载解决方案。
该项目是关于核心数据关系的，有一个类Employee和一个类Department。

员工.h：

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@class Department;

@interface Employee : NSManagedObject

@property (nonatomic, copy) NSString * firstName;
@property (nonatomic, copy) NSString * lastName;
@property (nonatomic, retain) Department *department;
@property (nonatomic, readonly) NSString *fullName;

@end 
```

员工.m：

```
#import "Employee.h"
#import "Department.h"

@implementation Employee

@dynamic firstName;
@dynamic lastName;
@dynamic department;

+ (NSSet *)keyPathsForValuesAffectingFullName
{
    return [NSSet setWithObjects:@"firstName", @"lastName", nil];
}

- (NSString *)fullName
{
    NSString *first = [self firstName];
    NSString *last = [self lastName];
    if (!first)
        return last;
    if (!last)
        return first;
    return [NSString stringWithFormat:@"%@ %@", first, last];
}

@end 
```

部门.h：

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@interface Department : NSManagedObject

@property (nonatomic, retain) NSString * deptName;
@property (nonatomic, retain) NSSet *employees;
@property (nonatomic, retain) NSManagedObject *manager;
@end

@interface Department (CoreDataGeneratedAccessors)

- (void)addEmployeesObject:(NSManagedObject *)value;
- (void)removeEmployeesObject:(NSManagedObject *)value;
- (void)addEmployees:(NSSet *)values;
- (void)removeEmployees:(NSSet *)values;

@end 
```

部门.m：

```
#import "Department.h"
#import "Employee.h"

@implementation Department

@dynamic deptName;
@dynamic employees;
@dynamic manager;

- (void)addEmployeesObject:(Employee *)value
{
    NSLog(@"Dept %@ adding employee %@",
          [self deptName], [value fullName]);
    NSSet *s = [NSSet setWithObject:value];
    [self willChangeValueForKey:@"employees"
                withSetMutation:NSKeyValueUnionSetMutation
                   usingObjects:s];
    [[self primitiveValueForKey:@"employees"] addObject:value];
    [self didChangeValueForKey:@"employees"
               withSetMutation:NSKeyValueUnionSetMutation
                  usingObjects:s];
}

- (void)removeEmployeesObject:(Employee *)value
{
    NSLog(@"Dept %@ removing employee %@",
          [self deptName], [value fullName]);
    Employee *manager = (Employee *)[self manager];
    if (manager == value) {
        [self setManager:nil];
    }
    NSSet *s = [NSSet setWithObject:value];
    [self willChangeValueForKey:@"employees"
                withSetMutation:NSKeyValueMinusSetMutation
                   usingObjects:s];
    [[self primitiveValueForKey:@"employees"] removeObject:value];
    [self didChangeValueForKey:@"employees"
               withSetMutation:NSKeyValueMinusSetMutation
                  usingObjects:s];
}

@end 
```

我有那些核心数据关系和实体：

![部门](../Images/f2ff5dc0a38f2237e77e622a18a80b10.png)

![员工](../Images/2fbc2cfc39ce4b5d2032f7e95bdf94b1.png)

我还使用一些数组控制器将核心数据值绑定到一些出口。
完整的项目可以在[这里](http://www.bignerdranch.com/book/cocoa_programming_for_mac_os_x_th_edition_)找到。，第 32 章（与我的相同）在“下载解决方案”中。如果您需要更多代码来理解此错误，请告诉我：

```
2012-10-31 15:27:43.977 Departments[1229:303] Cannot create BOOL from object (
) of class _NSControllerArrayProxy
2012-10-31 15:27:43.989 Departments[1229:303] Cannot create BOOL from object (
) of class _NSControllerArrayProxy 
```

似乎不建议发布整个项目，但如果您说可以，我可以这样做。

PS：我使用的是从解决方案下载的代码，它是相同的但它不起作用，可能是因为我有更高版本的xcode。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-31T14:37:52.447

看起来像一个绑定问题。您可能有一个“启用”或“隐藏”绑定（采用 BOOL）与无法转换为 BOOL 的属性相关联。

# php - Yii authManager 业务规则在哪里写？

> ID：13160235
> 
> 赞同：3
> 
> 时间：2012-10-31T14:29:07.803
> 
> 标签：php, yii, rbac

我在我的项目中使用 Yii 的 authManager 来处理 RBAC。我对这个概念相当陌生。

我的问题是关于编写和存储业务规则。由于我使用的是 CDbAutManager，所有内容都存储在数据库中。这对于存储哪个用户具有哪个角色是有意义的，因为用户是动态增长的。但是，业务规则似乎也存储在那里。我不确定我是否理解。

我需要为“updateOwnPost”写一条规则。这不应该写在某个地方的 PHP 文件中，以便可以轻松移植项目吗？如果我用相同的代码启动一个新网站，我想保留规则而不是用户......

此外，这些规则有多复杂？我真的没有看到自己在数据库中编写 20 行规则......

我的问题有两个：

首先，一般来说，为什么要这样实现，正常的做事方式是什么？

其次，我可以开始了，我可以让我的业务规则成为对真实 PHP 文件的函数调用吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:33:32.073

答案：

1), 是的，商务规则通过 CDbAuthManager 存储在数据库中。您始终可以创建自己的 AuthManager（“是”CAuthManager）并做任何您想做的事情。Bizrules 通常是简单的 PHP 代码片段。你的情况也不例外。这种实现的例子见：[https ://stackoverflow.com/a/13110311/570009](https://stackoverflow.com/a/13110311/570009)

2) 我相信您可以调用“[可调用](http://php.net/manual/en/language.types.callable.php)”PHP 代码，并且无论如何，PHP bizrule 代码都是通过 eval() IIRC 运行的。

# php - array_merge 与索引

> ID：13160237
> 
> 赞同：0
> 
> 时间：2012-10-31T14:29:16.667
> 
> 标签：php, arrays

```
<?php 

$one = array(11 => 'a', 12 => 'b', 13 => 'c');
$two = array(14 => 'd', 15 => 'e');

print_r(array_merge($one, $two)); 
```

这还给我：

```
Array
(
    [0] => a
    [1] => b
    [2] => c
    [3] => d
    [4] => e
) 
```

我想收到：

```
Array
(
    [11] => a
    [12] => b
    [13] => c
    [14] => d
    [15] => e
) 
```

如何将两个数组与索引合并？这可能吗？如果是，如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T14:32:17.930

带有数字键的数组的键将被 丢弃`array_merge`。相反，使用`+`运算符而不是`array_merge`：

```
print_r $one + $two; 
```

这会产生：

```
Array
(
    [11] => a
    [12] => b
    [13] => c
    [14] => d
    [15] => e
) 
```

或者，使用字符串键而不是数字键。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T14:33:17.610

你有没有尝试过？

`$three = $one + $two;`

这应该保留密钥

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-31T14:33:37.070

这是一个可能的解决方案。

```
$one = array(11 => 'a', 12 => 'b', 13 => 'c');
$two = array(14 => 'd', 15 => 'e');

function array_merge_values()
{
  $args = func_get_args();

  $result = $args[0];
  for ($_ = 1; $_ < count($args); $_++)
    foreach ($args[$_] as $key => $value)
    {
      if (array_key_exists($key,$result))
        $result[$key] += $value;
      else
        $result[$key] = $value;
    }
  return $result;
}

var_dump(array_merge_values($one,$two)); 
```

输出

```
array (size=5)
  11 => string 'a' (length=1)
  12 => string 'b' (length=1)
  13 => string 'c' (length=1)
  14 => string 'd' (length=1)
  15 => string 'e' (length=1) 
```

使用 print_r

```
Array
(
 [11] => a
 [12] => b
 [13] => c
 [14] => d
 [15] => e
) 
```

# c - 忽略我不想在文本文件中复制的字符串

> ID：13160238
> 
> 赞同：0
> 
> 时间：2012-10-31T14:29:21.987
> 
> 标签：c, linux, file

假设我有一个不想复制到文本文件中的 ip 列表。这就是我所做的..例如我不想复制`192.168.5.20.`..

在我的 temp.txt 文件中，我有 ip：

```
192.168.5.20
192.168.5.10
192.168.5.30
192.168.5.50
192.168.5.12 
```

-

```
char *data = "192.168.5.20";

char buff[100];
FILE *in, *out;

in = fopen("/tmp/temp.txt", "r");

while(fgets(buff,sizeof(buff),in) !=NULL){

        if(!strstr(buff, data)){

        printf("copying to ip.txt\n");
        out = fopen("/tmp/ip.txt", "a");
        fprintf(out,"%s",buff);
        fclose(out);
        }

}
if(feof(in)){

printf("Closing file descriptor and renaming ip.txt to temp.txt\n");
fclose(in);
rename("/tmp/ip.txt", "/tmp/temp.txt");
} 
```

它可以离开`192.168.5.20`ip.. 但我的问题是 temp.txt 只有一个 ip.. 例如`192.168.5.20`

现在我想忽略它，所以当我打开 temp.txt 文件时它应该是空白的。但是当我打开我的 temp.txt 文件时，ip 仍然`192.168.5.20`存在？.. 为什么会这样？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:51:52.360

`/tmp/ip.txt`仅当其中至少有一行`/tmp/temp.txt`不包含要忽略的模式时，才会创建该文件。

```
if(!strstr(buff, data)){
    printf("copying to ip.txt\n");
    out = fopen("/tmp/ip.txt", "a");
    fprintf(out,"%s",buff);
    fclose(out);
} 
```

因此，如果`/tmp/temp.txt`仅包含一行，并且包含要忽略的模式，`/tmp/ip.txt`则创建 no 并`rename`失败，设置`errno`为`ENOENT`.

检查与

```
#include <errno.h>
#include <string.h>

int fail = rename("/home/dafis/Doesntexist", "/home/dafis/doesexist");
if (fail) {
    int en = errno;
    if (en)
        perror(strerror(en));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:52:46.777

如果仅`192.168.5.20`在文件 temp.txt 中存在，则您甚至没有进入 while 循环。这意味着您没有打开（如果不存在则创建）ip.txt。所以重命名失败并且 temp.txt 保持不变。您可以尝试更改您的代码如下

```
 if (feof(in))
   {
      if(0 == out)
         out = fopen("ip.txt", "a");
      printf("\nrename returned %d",rename("ip.txt", "temp.txt"));

      printf("Closing file descriptor and renaming ip.txt to temp.txt\n");
      fclose(in);
   } 
```

请在代码中添加一些 NULL 检查。节省宝贵的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T15:07:58.783

```
char *unwanted = "192.168.5.20";

char buff[100];
FILE *in, *out;
unsigned cnt;

in = fopen("/tmp/temp.txt", "r");
out = fopen("/tmp/ip.txt", "w");

if (!in || !out) exit(EXIT_FAILURE);

for (cnt=0; fgets(buff,sizeof buff,in) ; ){
        if(strstr(buff, unwanted)) continue;
        fprintf(out,"%s",buff);
        cnt++;
        }

fclose(out);
fclose(in);

 /* note: this will maintain the original file if it **only** consists
 ** of lines with the (unwanted) pattern in it.
 ** IMHO you'd better do the rename unconditionally; an empty file
 ** would be the correct result if all the lines match.
 */
if(cnt){ 
    printf("Closing file descriptor and renaming ip.txt to temp.txt\n");
    rename("/tmp/ip.txt", "/tmp/temp.txt");
    } 
```

# java - 我看不到 jat jar 文件

> ID：13160243
> 
> 赞同：-3
> 
> 时间：2012-10-31T14:29:49.843
> 
> 标签：java, c, swing

我在我的电脑中使用了所有 jar 文件的 jar 可执行文件（java 图标）f。格式化电脑后，我安装了 JDK，但我无法在该 jar 文件上安装 jar 文件，即 Java 图标，它看起来像 winrar 文件，如何将其视为 jar 文件。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:33:09.157

[默认情况下](http://www.rarlab.com/otherfmt.htm)，Winrar 会将自身与`.jar`文件关联。打开 Winrar，找到文件类型设置并取消选中`.jar`. Windows 应默认恢复为使用 Java 打开。

# java - 如何为 JButton 设置“非常深的蓝色”背景颜色？

> ID：13160250
> 
> 赞同：2
> 
> 时间：2012-10-31T14:30:09.103
> 
> 标签：java, swing, jbutton, uicolor

我正在尝试创建一个看起来像这样的简单按钮-

![在此处输入图像描述](../Images/a58be85e1f31a2866939a81972af909d.png)

```
JButton connectBtn = new JButton("Connect");
        Color blue = new Color(77,176,230);    
        connectBtn.setBackground(blue); 
```

但问题是背景蓝色并没有看起来那么暗。

我已经尝试了以下所有可能性，但没有用:-(

```
connectBtn.setBackground(Color.blue);

connectBtn.setBackground(Color.BLUE.brighter());

connectBtn.setBackground(Color.decode("#0099cc"));//i tried simply #0099cc just to get any dark background 
```

请帮助我将此颜色设置为 JButton 背景。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:42:35.927

PrintScreen -> Paint -> Colorpicker 告诉我按钮的颜色是

```
1691D9 
```

或者

```
(22,145,217) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T15:20:57.093

[`Zoom`](https://stackoverflow.com/a/3742841/230513)显示您的按钮涂有渐变，其中包括几种蓝色阴影以及抗锯齿文本。您可能需要一个合适的`ButtonUI`，如此处所示[，](https://stackoverflow.com/a/5755124/230513)使用`GradientPaint`. 请注意使用`RenderingHints`建议别名设置。

# vb.net - 在 vb.net 中使用变量调用集合属性

> ID：13160253
> 
> 赞同：1
> 
> 时间：2012-10-31T14:30:22.233
> 
> 标签：vb.net

我正在尝试使用变量调用集合中的属性。我有多个属性，我不想使用 case 语句来获取信息。这是代码示例

```
Sub Main()
    MessageBox("Total: " & GetNum("Total","1"))
    MessageBox("Night: " & GetNum("Night","1"))
End Sub

Private Function GetNum(ByVal pstrProp AS String, ByVal pstrNum AS String) As Double
    Dim lobjProperties as New Properties
    'this is where the issue is
    return lobjProperties."pstrProp"(pstrNum)
End Function

Public Class Properties
    Public ReadOnly Property Total(ByVal pstrNum As String) As Double
        Get
            Select Case pstrNum
                Case "1"
                    Return 48
                Case "2"
                    Return 30
                Case Else
                    Return 0
            End Select
        End Get
    End Property
    Public ReadOnly Property Night(ByVal pstrNum As String) As Double
        Get
            Select Case pstrNum
                Case "1"
                    Return 9
                Case "2"
                    Return 9
                Case Else
                    Return 0
            End Select
        End Get
    End Property
End Class 
```

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:13:25.140

如果您确实需要确定在运行时调用哪个属性，最好使用反射，但走这条路的缺点是您会丢失编译时检查。如果决定调用哪个属性的代码拼错了属性怎么办？运行时错误和崩溃。

你也可以在你的`Properties`类中使用字典对象。你可以像这样设置一个字典对象：

```
Private m_nightValues As New Dictionary(Of String, Double)
m_nightValues("1") = 9
m_nightValues("2") = 9 
```

在`Night`属性中，说类似

```
Dim value As Double
If m_nightValues.TryGetValue(pstrNum, value) Then
    Return value
Else
    Return 0
End If 
```

相当动态，同时保留语法检查。

# php - Zend Dispatch - 从控制器返回变量->动作

> ID：13160256
> 
> 赞同：1
> 
> 时间：2012-10-31T14:30:40.533
> 
> 标签：php, zend-framework

我对 Zend 有一点问题。我正在尝试发出一些虚假的 HTTP 请求，并在`module->controller->action`执行后返回在该操作中设置的随机变量。就像在变量设置的情况下一样`view->assign(,)`- 我可以稍后从视图文件 (.phtml) 访问它们。

这是我的代码的一部分：

`/application/controller/IndexController.php`

```
<?php
class IndexController extends Zend_Controller_Action
{
    public function init(){}
    public function indexAction()
    {
        #$this->view seems to be a NULL value from the fake request, so I can't pass variables to it 
        //$this->view->x = 'y';
        echo 'test';
        return array(
            'x' => 'y'
        );
    }
} 
```

`/public/index2.php`

```
<?php
//--cut--
$application->bootstrap();
$options = array(
    'action' => 'index',
    'controller' => 'index',
    'module' => 'default'
);
if( isset($options['action'], $options['module'], $options['controller']) )
{

    $request = new Zend_Controller_Request_Http ();
    $request->setModuleName($options['module'])->setActionName($options['action'])->setControllerName($options['controller']);  
    $frontController = Zend_Controller_Front::getInstance ()->returnResponse ( true );

    $response = new Zend_Controller_Response_Http ();

    $frontController->getDispatcher ()->dispatch ( $request, $response );
    echo '$response:<b>Zend_Controller_Response_Http</b><br>';
    //This returns me the body of what I echo in the indexAction but not the variables.
    var_dump($response);
} 
```

太感谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:46:51.793

您将无法以您尝试的方式（在视图/MVC 之外）获取视图参数。这是因为在您的情况下，动作控制器仅在调度方法（ ）`IndexController`期间存在于内存中。`IndexAction`

使用类定义的参数`view`仅在调用时引用`view->render()`，然后仅生成 HTML。

**但是，您可以从控制器操作**中获取用户定义的变量（公共范围），如下所示：

```
 class IndexController extends Zend_Controller_Action
    {
        public function indexAction()
        {
            /** The view class uses PHP's magic set/get/isset methods to
            NULL any access to values that are protected (or more precisely 
            have a underscore _ prefix for the property name)

            hence $this->_view = null;
            **/

            /** we do however have access to this view (or create a new one if not already
            defined within the action controller) with: **/

            $view = $this->initView();

            /** An array of the public controller parameters **/
            $viewParams    = $view->getVars(); 

        }
    } 
```

此外，现在可以简化分派这些请求的代码：

```
$front = Zend_Controller_Front::getInstance();
$front->setRequest(
    new Zend_Controller_Request_Http()->setParams($options)
)->dispatch(); 
```

*注意：我使用的是 1.11 版本*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T21:08:46.347

如果要在请求派发时给view赋值，可以在indexAction中创建一个Zend_View实例并赋值，如下图：

```
 public function indexAction()
   {
     echo "test";
     $view = new Zend_View();
     $view->setBasePath(APPLICATION_PATH."/views/");
     $view->x = 'y';
     echo $view->render("index/index.phtml");
   } 
```

尝试将变量嵌入到索引视图脚本中，您的响应的 var_dump 将包含回显的“测试”和 index.phtml 输出。

如果要将数组返回到响应，请使用 json：

```
 public function indexAction()
      {
         $array = array('x' => 'y');
         echo json_encode($array);
       } 
```

index2.php：

```
 //.....
        var_dump($response);
        var_dump(json_decode($response->getBody())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T14:37:23.017

您需要为此扩展 Zend_Controller_Action，因为标准 Action 没有接收返回的变量。

# c# - 获取数组中的枚举元素

> ID：13160257
> 
> 赞同：5
> 
> 时间：2012-10-31T14:30:41.657
> 
> 标签：c#, for-loop, enums, foreach, minesweeper

我需要弄清楚如何在数组中的枚举上获取元素。基本上，我有一个 9x9 按钮网格。我有两个包含这些值的多维数组。一个包含他们的名字（如果名字是 43），这意味着 5 向下，4 横（因为它们从 0 开始）。该名称也与数组中自身的 ELEMENT 相同。

```
string[,] playingField = new string[9, 9];
enum CellType { Empty, Flag, Hidden, Bomb }
CellType[,] cells = new CellType[9, 9]; 
```

按钮的名称保存在playField 中。
每个单元格的状态都保存在单元格中（如果它是空的，有炸弹等）

感谢 AbdElRaheim 提供上述内容。我这样做的原因是我可以获得一个按钮名称（与元素名称完全相同），这在两个数组中都是相同的。
例如：我可以这样做：

```
string dim1 = Convert.ToString(btn.Name[0]);
string dim2 = Convert.ToString(btn.Name[1]);
if (cells[Convert.ToInt32(dim1), Convert.ToInt32(dim2)] == CellType.Bomb) 
```

（请原谅我糟糕的转换。我稍后会修复它；））上面的作用是让我查看您单击的单元格下方是否有炸弹。

但是，我现在需要做的，基本上与此相反。在上面我**知道**我想要比较它**的元素名称，因为元素名称与按钮名称相同。**`Bomb`但是，现在我需要做的是通过获取`cells`.

我不知道该怎么做，我试过：

```
foreach (CellType Bomb in cells)
{ 
```

但它什么也没做。我需要在“单元格”中找到所有“炸弹”并返回元素名称。这样我就可以使用该元素名称，将其转换为字符串，并使用我的`StringToButton`方法创建对按钮的引用。

这是我目前正在这样做的方式，供参考，并帮助您更好地理解，但请注意这不是我想继续这样做的方式。我想按照我上面询问的方式来做:)

```
foreach (string i in minedNodes)
{
    Button buttonName = StringToButton(Convert.ToString(i));
    buttonName.Image = new Bitmap(dir + "mine.png");
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:42:47.087

如果您正在寻找一种遍历单元格数组的方法，您可以这样做：

```
int oi, ii;
for (oi = 0; oi <= cells.GetUpperBound(0); ++oi)
{
    for (ii = 0; ii <= cells.GetUpperBound(1); ++ii)
    {
        System.Diagnostics.Debug.WriteLine(
            "Checking: " + oi + "," + ii + " : " + cells[oi, ii].ToString()
        );
    }
} 
```

然后，您可以保存对符合您所需值的单元格 [oi, ii] 内容的引用列表。

# jquery - 从 .wav 文件中获取持续时间

> ID：13160262
> 
> 赞同：0
> 
> 时间：2012-10-31T14:31:15.467
> 
> 标签：jquery, html, web-applications, jquery-plugins, html5-audio

我正在寻找可以在网站上播放 wav 文件的东西，但我想突出显示波形或水平条，然后以秒为单位显示选定的持续时间（HTML 文本）。

例如，60 秒的 wav 文件：

![在此处输入图像描述](../Images/723394dc0e94fc98be63d0a4e3c55770.png)

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:39:53.530

我为你找到了这个旧书签。您将在示例中找到所需的一切：http: [//neutroncreations.com/blog/building-a-custom-html5-audio-player-with-jquery/](http://neutroncreations.com/blog/building-a-custom-html5-audio-player-with-jquery/)

它解释了如何构建水平条、如何加载文件以及如何计算持续时间。

问候 ;）

# vb.net - 如何根据其中一个属性分解列表？

> ID：13160263
> 
> 赞同：0
> 
> 时间：2012-10-31T14:31:15.950
> 
> 标签：vb.net, list

我有一个 x 数量的对象列表，每个对象都有一个关联的 guid，对应于它所属的组 (object.groupGUID)。在此列表中，可以说 3 个不同的组 guid。我想按 groupGUID 将此列表分解为 3 个单独的列表。关于如何解决这个问题的任何建议？我可以将 find 方法与与 GUID 相关的搜索条件一起使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:35:22.680

您可以使用 Linq 创建一个`Dictionary(Of Guid, List(Of YourClass))`：

```
Dim dict As Dictionary(Of Guid, List(Of Foo)) =
        list.GroupBy(Function(obj) obj.groupGUID).
        ToDictionary(Function(grp) grp.Key, Function(grp) grp.ToList()) 
```

现在您可以查找 GUID：

```
Dim objectsForGivenGuid As List(Of Foo) = dict(yourGuid) 
```

# html - 创建多个共享导航菜单的网页

> ID：13160267
> 
> 赞同：0
> 
> 时间：2012-10-31T14:31:26.540
> 
> 标签：html

> **可能重复：**
> [避免重复的 html](https://stackoverflow.com/questions/7177995/avoid-repeated-html)

我打算创建一个包含许多网页的网站，这些网页由导航菜单共享。

例如：www.apple.com

我是否必须使用相同的菜单代码创建单独的 html 文件，或者是否有更简单的方法来完成相同的任务？（使用 javascript、php 等）

（使用 Dreamweaver CS3）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:36:16.660

您可以使用捆绑编程语言中的文件包含或母版页来执行此操作。

这是一个网站，详细介绍了各种不同语言的内容。

[关联](http://webdesign.about.com/od/ssi/a/aa052002a.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:34:37.390

for php
make a file with name nav.php
add all code for navigation bar in it
and after that include this file in all the other webpages with proper location
using following code

```
include "nav.php"; 
```

for example

```
<body>
<?php include "nav.php" ?>

<!--some other elements -->
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T14:35:23.733

有多种选择。你可以有一个菜单 div 来包含菜单。然后在页面加载时使用 javascript 资源对其进行更新。

或者，您可以使用 Joomla 等 CMS 为您的站点定义模板，然后在该模板中创建页面。这可能是您的首选路线，因为它避免了 javascript 的可访问性问题，并使您能够根据需要轻松地重新命名您的网站（例如万圣节品牌销售等）

# java - 如何使用基本java计算两个日期之间的差异

> ID：13160273
> 
> 赞同：0
> 
> 时间：2012-10-31T14:31:53.967
> 
> 标签：java

我刚开始上大学，基本上刚开始使用java，我想知道如何编写代码来计算两个日期之间的天数，但不使用需要毫秒的程序以及我在其他答案中看到的此类事情。所以这是我创建的代码，但它不能完美运行它大部分时间都会错过一天或类似的东西。请我真的需要你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:56:37.607

取自： http: [//www.staff.science.uu.nl/~gent0113/calendar/isocalendar_text5.htm](http://www.staff.science.uu.nl/~gent0113/calendar/isocalendar_text5.htm)

一种方法可以是从两个日期的固定时间计算天数，然后减去这些天数。这将为您提供日期 1 和日期 2 之间的天数差异

以下方法返回自以来经过的天数`0 January 0 CE`

```
public int calculateDate( int day, int month, int year) {
  if (month < 3) {
      year--;
      month = month + 12;
  } 
  return 365 * year + year/4 - year/100 + year/400 + ((month+1) * 306)/10 + (day - 62); 
} 
```

现在在您的代码中，您应该计算两个日期自 0BC 以来的天数，然后减去它们：

```
public void run() {
 ....

 int dayDifference = calculateDate(day1, month1, year1) - calculateDate(day2, month2, year2);

....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:35:00.660

使用 SimpleCalendar 或 GregorianCalendar 类...

但是根据您发布的内容，我不确定如何最好地建议使用这两个...我将很快起草一个简单的示例。

经过一番思考，我将把它留在这里[Java 中两个日期之间的天数差异？](https://stackoverflow.com/questions/3299972/difference-in-days-between-two-dates-in-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-06T02:12:09.220

# jquery - 如何在 Jquery DataTables 中使用 sName 属性

> ID：13160279
> 
> 赞同：1
> 
> 时间：2012-10-31T14:32:15.760
> 
> 标签：jquery, jquery-datatables

我从服务器获取 json 格式的数据，我使用下面的代码在页面上呈现它。但无法在列（即单元格）上设置属性“名称”。sName 是我应该用来为每个单元格设置“名称”属性的正确属性吗？
这是我的数据表代码。

```
$('#' + self.dom.tableID).dataTable({
            "asStripeClasses": [self.ui.rowClass],
            "bPaginate": true,
            "bLengthChange": false,
            "bFilter": true,
            "iDisplayLength": 15,
            "bSort": true,
            "bInfo": false,
            "bAutoWidth": true,
            "sDom": "tip",
            "aoColumns": [
                { "mDataProp": "name", "sClass": self.ui.nameCellClass, "sWidth": "35%", "sTitle": "Name" },
                { "mDataProp": "email", "sTitle": "Email"},
                { "mDataProp": "phone", "sTitle": "Phone"},
                { "mDataProp": "organizationName", "sTitle": "Organization"},
                { "mDataProp": "organizationRenewDate", "sTitle": "Expires on", "sWidth": "100px", "sType": "date"}

            ],
            "oLanguage": {
                "sZeroRecords": "No matching members found."
            }
        }); 
```

顺便说一句，我需要每个单元格上的“名称”属性将数据发送回服务器端代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:18:46.887

似乎您正在尝试创建输入，因此当您发布表单时，数据会被发送回服务器？

在这种情况下，您需要使用`fnRender`（旧方式）或`mRender`（新方式）将输入元素写入单元格。像下面这样的东西应该让你走上正轨：

```
{
    mDataProp: "name",
    sTitle: "Name",
    mRender: function(data, type, full) {
        switch(type){
            case 'display':
                return '<input type="text" name="name[]" value="' + data + '" />';
            default:
                return data;
        }
    }
} 
```

**编辑**

根据您的评论，我猜您需要更多类似的东西：

```
fnRowCallback: function(nRow, aData, iDisplayIndex, iDisplayIndexFull) {
    //replace 1 with whichever cell you need
    $('td:nth-child(1)', nRow).attr('name', "WhateverNameYouWant");
} 
```

# javascript - 如何将一个简单的语法转换为在 PEG.js 中有效的东西（预期为“a”但找到了“a”）

> ID：13160281
> 
> 赞同：1
> 
> 时间：2012-10-31T14:32:18.380
> 
> 标签：javascript, parsing, peg, pegjs

我刚开始玩 PEG.js 并且遇到了语法问题（大大简化了调试）：

```
start
  = presingle single
  / preplural plural

presingle
  = "a"
  / "b"

preplural
  = "b"
  / "c"

single
  = "d"
  / "e"

plural
  = "dd"
  / "ee" 
```

我正在使用[https://pegjs.org/online](https://pegjs.org/online)

此语法无法解析`bdd`。

```
Line 1, column 3: Expected "a" but "d" found. 
```

这是 PEG 无法做到的事情，还是我可以将我的语法转换成可以解析它的东西？

PS如果我尝试解析（错误地建议？）`bda`我得到无意义的错误：

```
Line 1, column 3: Expected "a" but "a" found. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:10:15.743

此语法仅更改 start 中子句的顺序，适用于 bdd

```
start = 
   preplural plural /
    presingle single

presingle
  = "a"
  / "b"

preplural
  = "b"
  / "c"

single
  = "d"
  / "e"

plural
  = "dd"
  / "ee" 
```

对于 bda 显示错误第 1 行第 3 列：应为“dd”或“ee”但找到“a”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-18T22:38:10.543

好消息是，现代版本的 pegjs 给出了错误消息：“第 1 行，第 3 列：预期输入结束，但找到了“d”。” 当给定输入 bdd。

这是您所期望的，因为它首先匹配单个匹配，并且由于“b”和“d”匹配，它假设它是好的。正如@HBP 所建议的那样，颠倒顺序会强制它首先匹配复数，并且只有当它们不存在时，它才会尝试单数，这会给出您期望的结果。

# redmine - Redmine 未启动 - 对象未丢失常量问题

> ID：13160288
> 
> 赞同：1
> 
> 时间：2012-10-31T14:32:35.260
> 
> 标签：redmine

尝试安装新插件（已卸载）后，我的 redmine 应用程序无法启动，我真的找不到发生了什么。

这是回溯：

```
*** Exception ArgumentError in PhusionPassenger::Railz::ApplicationSpawner (Object is not missing constant Issue!) (process 834):
from /usr/lib/ruby/vendor_ruby/active_support/dependencies.rb:443:in `load_missing_constant'
from /usr/lib/ruby/vendor_ruby/active_support/dependencies.rb:106:in `const_missing'
from /usr/lib/ruby/vendor_ruby/active_support/dependencies.rb:118:in `const_missing'
from /usr/lib/ruby/vendor_ruby/active_support/dependencies.rb:124:in `send'
from /usr/lib/ruby/vendor_ruby/active_support/dependencies.rb:124:in `const_missing'
from /usr/share/redmine/app/models/project.rb:40
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `require'
from /usr/lib/ruby/vendor_ruby/active_support/dependencies.rb:184:in `require'
from /usr/lib/ruby/vendor_ruby/active_support/dependencies.rb:291:in `require_or_load'
from /usr/lib/ruby/vendor_ruby/active_support/dependencies.rb:451:in `load_missing_constant'
from /usr/lib/ruby/vendor_ruby/active_support/dependencies.rb:106:in `const_missing'
from /usr/lib/ruby/vendor_ruby/active_support/dependencies.rb:118:in `const_missing'
from /usr/lib/ruby/vendor_ruby/active_support/dependencies.rb:463:in `load_missing_constant'
from /usr/lib/ruby/vendor_ruby/active_support/dependencies.rb:122:in `const_missing'
from /usr/share/redmine/app/models/principal.rb:22
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `require'
from /usr/lib/ruby/vendor_ruby/active_support/dependencies.rb:184:in `require'
from /usr/lib/ruby/vendor_ruby/active_support/dependencies.rb:291:in `require_or_load'
from /usr/lib/ruby/vendor_ruby/active_support/dependencies.rb:250:in `depend_on'
from /usr/lib/ruby/vendor_ruby/active_support/dependencies.rb:162:in `require_dependency'
from /usr/share/redmine/vendor/plugins/redmine_git_hosting/init.rb:3:in `evaluate_init_rb'
from /usr/share/redmine/vendor/rails/railties/lib/rails/plugin.rb:158:in `evaluate_init_rb'
from /usr/lib/ruby/vendor_ruby/active_support/core_ext/kernel/reporting.rb:11:in `silence_warnings'
from /usr/share/redmine/vendor/rails/railties/lib/rails/plugin.rb:154:in `evaluate_init_rb'
from /usr/share/redmine/vendor/rails/railties/lib/rails/plugin.rb:48:in `load'
from /usr/share/redmine/vendor/rails/railties/lib/rails/plugin/loader.rb:38:in `load_plugins'
from /usr/share/redmine/vendor/rails/railties/lib/rails/plugin/loader.rb:37:in `each'
from /usr/share/redmine/vendor/rails/railties/lib/rails/plugin/loader.rb:37:in `load_plugins'
from /usr/share/redmine/vendor/rails/railties/lib/initializer.rb:369:in `load_plugins'
from /usr/share/redmine/vendor/rails/railties/lib/initializer.rb:165:in `process'
from /usr/share/redmine/vendor/rails/railties/lib/initializer.rb:113:in `send'
from /usr/share/redmine/vendor/rails/railties/lib/initializer.rb:113:in `run'
from /usr/share/redmine/config/environment.rb:49
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `require'
from /usr/lib/ruby/1.8/phusion_passenger/railz/application_spawner.rb:303:in `preload_application'
from /usr/lib/ruby/1.8/phusion_passenger/railz/application_spawner.rb:252:in `initialize_server'
from /usr/lib/ruby/1.8/phusion_passenger/utils.rb:255:in `report_app_init_status'
from /usr/lib/ruby/1.8/phusion_passenger/railz/application_spawner.rb:237:in `initialize_server'
from /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb:194:in `start_synchronously'
from /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb:163:in `start'
from /usr/lib/ruby/1.8/phusion_passenger/railz/application_spawner.rb:213:in `start'
from /usr/lib/ruby/1.8/phusion_passenger/spawn_manager.rb:262:in `spawn_rails_application'
from /usr/lib/ruby/1.8/phusion_passenger/abstract_server_collection.rb:126:in `lookup_or_add'
from /usr/lib/ruby/1.8/phusion_passenger/spawn_manager.rb:256:in `spawn_rails_application'
from /usr/lib/ruby/1.8/phusion_passenger/abstract_server_collection.rb:80:in `synchronize'
from /usr/lib/ruby/1.8/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
from /usr/lib/ruby/1.8/phusion_passenger/spawn_manager.rb:255:in `spawn_rails_application'
from /usr/lib/ruby/1.8/phusion_passenger/spawn_manager.rb:154:in `spawn_application'
from /usr/lib/ruby/1.8/phusion_passenger/spawn_manager.rb:287:in `handle_spawn_application'
from /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb:352:in `__send__'
from /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb:352:in `main_loop'
from /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb:196:in `start_synchronously'
from /usr/lib/phusion_passenger/passenger-spawn-server:61 
```

Redmine 版本：1.3.2.stable(MySQL) Ruby 版本：1.8.7

# c++ - 当 URL 不正确时 curl_easy_perform 崩溃

> ID：13160290
> 
> 赞同：3
> 
> 时间：2012-10-31T14:32:41.060
> 
> 标签：c++, multithreading, curl, libcurl

我在尝试使用`libcurl`. 该程序与多个线程一起工作，每个需要下载文件的线程都会创建一个`libcurl`句柄来使用。

当 URL 正确时，一切正常，但如果 URL 中有错误，程序就会崩溃。在调试模式下，如果 URL 不正确，则`curl_easy_perform`返回错误连接代码并且程序可以工作。相反，它在发布时崩溃。

我该如何解决这个错误？

这是我用来下载文件的代码，不相关的代码已被禁止：

```
LoadFileFromServer
(
    string& a_sURL
)
{
    string  sErrorBuffer;

    struct DownloadedFile updateFile = { sFilenameToWrite,  // name to store the local file if succesful
                                         NULL };            // temp buffer

    CURL*   pCurl = curl_easy_init();

    curl_easy_setopt( pCurl, CURLOPT_URL, a_sURL.data() );
    curl_easy_setopt( pCurl, CURLOPT_FOLLOWLOCATION, 1L );
    curl_easy_setopt( pCurl, CURLOPT_ERRORBUFFER, sErrorBuffer );
    curl_easy_setopt( pCurl, CURLOPT_WRITEFUNCTION, BufferToFile );
    curl_easy_setopt( pCurl, CURLOPT_WRITEDATA, &updateFile );
    curl_easy_setopt( pCurl, CURLOPT_NOPROGRESS, 0 );
    curl_easy_setopt( pCurl, CURLOPT_CONNECTTIMEOUT, 5L );

    CURLcode res = curl_easy_perform( pCurl );

    curl_easy_cleanup( pCurl );
}

int BufferToFile
( 
    void *  a_buffer, 
    size_t  a_nSize, 
    size_t  a_nMemb, 
    void *  a_stream 
)
{
    struct DownloadedFile *out = ( struct DownloadedFile * ) a_stream;
    if( out && !out->stream ) 
    {
        // open file for writing 
        if ( 0 != fopen_s( &( out->stream ), out->filename.c_str(), "wb" ) )
            return -1;
        if( !out->stream )
            return -1; /* failure, can't open file to write */
    }

    return fwrite( a_buffer, a_nSize, a_nMemb, out->stream );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:40:53.447

libcurl 要求给定的 URL 是指向它可以读取的有效缓冲区的指针。如果不是，则故障出在您的代码中。

如果您将正确的指针传递给（以零结尾的）字符串，则该字符串可以是正确的 URL，也可以不是正确的 URL，但 libcurl 不应因此而崩溃（据我所知，它不会崩溃）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T13:48:28.643

首先，您可以检查提供它们的函数的所有返回码，看看是否一切都像您假设的那样工作。

其次，Curl 是 C，而不是 C++，它不会产生异常。

第三，如果您的 C 程序崩溃，那么所有代码​​都是相关的，C 程序可能会以各种有趣的方式崩溃，而实际原因可能与 Curl 无关，或者可能是。

你做了太多的假设。

迈克尔

# objective-c - 带有导航控制器的 iOS 6 方向

> ID：13160291
> 
> 赞同：1
> 
> 时间：2012-10-31T14:32:43.170
> 
> 标签：objective-c, xcode, uinavigationcontroller, ios6, uideviceorientation

我有一个在 ios 5 上运行良好的应用程序，我正在尝试升级我的应用程序以在 ios 6 上运行，我已经阅读了大量有关使用 ios 6 方向的问题和教程，

我的问题是当我调用我的 rootViewController 时，它对我的​​工作正常，但是当我推动任何 viewController 时，方向看起来很糟糕，因为我使用方向来更改视图大小（我的应用程序支持任何方向）

这是我的代码：

```
AppDelegate:

UINavigationController *nav =[ [UINavigationController alloc] initWithRootViewController:theView]  ;
self.window.rootViewController = nav;

- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window  // iOS 6
{

return UIInterfaceOrientationMaskAll;

}

myFirstViewController:

-(NSUInteger)supportedInterfaceOrientations{

return UIInterfaceOrientationMaskAll;
 }

 -(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration{

    [self viewWillAppear:NO];
 }

 -(BOOL)shouldAutorotate{
 return YES;
  }

- (void)viewWillAppear:(BOOL)animated
{

[super viewWillAppear:NO];
if ( [[UIDevice currentDevice].systemVersion floatValue] >= 6.0){
    if (pointRange.location != NSNotFound) {

UIInterfaceOrientation interfaceOrientation = [[UIDevice currentDevice] orientation];

if( (interfaceOrientation >= 3)  ) {
     width=1024;
    self.view.frame=CGRectMake(0, 0, 1024, 768);

}

if   ( (interfaceOrientation == 1) || (interfaceOrientation == 2 )) {

    width=768;
    self.view.frame=CGRectMake(0, 0, 768, 1024);

}}
....etc 
```

我在第二个视图中也做了同样的事情，希望能找到原因！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T07:34:55.517

你总是可以像这样对 UINavigationController 进行扩展

```
@implementation UINavigationController (RotationFix)

-(NSUInteger)supportedInterfaceOrientations
{
    return [self.topViewController supportedInterfaceOrientations];
}

-(BOOL)shouldAutorotate
{
    return YES;
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:21:36.433

即使我遭受了 2 天的痛苦.. 经历了许多教程、博客、论坛，甚至是苹果文档。

到目前为止，我了解到，在 iOS 6 中，应用程序的每个模板都应该以不同的方式处理。

到目前为止，讨论仅针对基于视图的应用程序，这些更改不适用于基于导航的应用程序或基于 tabBar 的应用程序。

最后我得到了解决方案，就像这样

实现这两种类型的子类`UITabBarController`或`UINavigationController`.

从这个[博客](http://code.shabz.co/post/32051014482/ios-6-supportedorientations-with-uinavigationcontroller)知道。感谢 Shabbir 的解决方案。

# logging - 通过 log4j 配置文件添加我自己的 appender

> ID：13160297
> 
> 赞同：0
> 
> 时间：2012-10-31T14:33:02.343
> 
> 标签：logging, log4j

我制作了自己的附加程序：

```
class MyAppender : public AppenderSkeleton
{...
void MyAppender ::append(const spi::LoggingEventPtr& event, Pool& p)
{
    LogString log;
    log4cxx::helpers::Pool pool;
    printf("test\n");
    getLayout()->format(log, event, pool);
    ...
}
...
 boolean requiresLayout(){return false; }
...
} 
```

我还通过 log4j 配置文件添加了它：

```
log4j.appender.MYAPPND=org.apache.log4j.MyAppender 
log4j.appender.MYAPPND.layout=org.apache.log4j.PatternLayout
log4j.appender.MYAPPND.layout.ConversionPattern=%d{ISO8601} %d{%Z} [%-5p] [%t] [%c] [%C{1}.%M(%L)] - %m%n

log4j.logger.file.name = DEBUG, MYAPPND 
```

在 getLayout()->format(log, event, pool) {segmentation fault} 之前它工作得很好。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:46:28.480

我编辑了我的问题和答案现在就在那里（如果可能，所有代码都需要打印）。所以，问题在于覆盖方法`requiresLayout`。它返回`false`，并且`true`是正确的解决方案。

# function - 为什么我的函数告诉我类型不匹配？

> ID：13160299
> 
> 赞同：1
> 
> 时间：2012-10-31T14:33:06.607
> 
> 标签：function, ms-access, vba

我正在尝试使以下功能起作用：

```
Private Function FirstOfMonth(MonthsAgo As Integer) As Date
  FirstOfMonth = DateSerial(Year(Now()), Month(Now() - MonthsAgo), 1)
End Function 
```

我传入的值如下：

```
FirstOfMonth(4) 
```

该函数的目的是返回月份第一天的日期“MonthsAgo”。

但是，每当我运行它时，它都会告诉我类型不匹配。

我是编程新手，所以如果有人能指出我哪里出错的正确方向，我将不胜感激。这让我在解决一个相当简单的问题时放慢了速度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:38:34.707

我认为你的意思是：

```
' Note the brackets change around 'Month(Now()) - MonthsAgo'
FirstOfMonth = DateSerial(Year(Now()), Month(Now()) - MonthsAgo, 1) 
```

但是，即使这样也行不通。考虑月份是一月 (1) 的情况。在那种情况下，您最终会得到一个`2012/-3/1`显然完全是胡说八道的日期！

您将需要使用[DateAdd](http://msdn.microsoft.com/en-us/library/cb7z8yf9%28v=vs.84%29.aspx)函数：

```
DateAdd("m", 4, Now()) 
```

所以你的整个功能看起来像

```
Private Function FirstOfMonth(MonthsAgo As Integer) As Date
    Dim newDate
    newDate = DateAdd("m", 0 - MonthsAgo , Now())
    FirstOfMonth = DateSerial(Year(newDate), Month(newDate), 1)
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:37:42.237

您必须将 FirstOfMonth(4) 传递给“日期”变量

# bash - 在 bash 命令行中将十六进制字符串转换为 ascii

> ID：13160309
> 
> 赞同：74
> 
> 时间：2012-10-31T14:33:38.290
> 
> 标签：bash, hex

我有很多这种字符串，我想找到一个命令将其转换为 ascii，我尝试使用`echo -e`and `od`，但它不起作用。

```
0xA7.0x9B.0x46.0x8D.0x1E.0x52.0xA7.0x9B.0x7B.0x31.0xD2 
```

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2015-05-06T17:58:56.567

这对我有用。

```
$ echo 54657374696e672031203220330 | xxd -r -p
Testing 1 2 3$ 
```

`-r`告诉它将十六进制转换为 ascii，而不是它的正常模式做相反的事情

`-p`告诉它使用普通格式。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-10-31T17:33:07.777

此代码会将文本`0xA7.0x9B.0x46.0x8D.0x1E.0x52.0xA7.0x9B.0x7B.0x31.0xD2`转换为具有等效值的 11 字节流。这些字节将被写入标准输出。

```
TESTDATA=$(echo '0xA7.0x9B.0x46.0x8D.0x1E.0x52.0xA7.0x9B.0x7B.0x31.0xD2' | tr '.' ' ')
for c in $TESTDATA; do
    echo $c | xxd -r
done 
```

正如其他人指出的那样，这不会导致可打印的 ASCII 字符串，原因很简单，即指定的字节不是 ASCII。您需要发布有关如何获得此字符串的更多信息，以便我们为您提供帮助。

工作原理： xxd -r 将十六进制数据转换为二进制（如反向 hexdump）。xxd 要求每行以该行第一个字符的索引号开始（在某事上运行 hexdump 并查看每行如何以索引号开始）。在我们的例子中，我们希望该数字始终为零，因为每次执行只有一行。幸运的是，我们的数据在每个字符之前已经有零作为 0x 符号的一部分。小写的 x 被 xxd 忽略了，所以我们要做的就是将每个 0xhh 字符通过管道传递给 xxd 并让它完成工作。

tr 将句点转换为空格，以便 for 将其正确拆分。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2020-03-19T13:29:20.753

您可以使用`xxd`：

```
$cat hex.txt
68 65 6c 6c 6f
$cat hex.txt | xxd -r -p
hello 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-07-18T18:14:01.883

你可以使用这样的东西。

```
$ cat test_file.txt
54 68 69 73 20 69 73 20 74 65 78 74 20 64 61 74 61 2e 0a 4f 6e 65 20 6d 6f 72 65 20 6c 69 6e 65 20 6f 66 20 74 65 73 74 20 64 61 74 61 2e

$ for c in `cat test_file.txt`; do printf "\x$c"; done;
This is text data.
One more line of test data. 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-02-24T12:28:22.347

您提供的值是 UTF-8 值。设置后，数组：

```
declare -a ARR=(0xA7 0x9B 0x46 0x8D 0x1E 0x52 0xA7 0x9B 0x7B 0x31 0xD2) 
```

将被解析以打印每个值的明文字符。

```
for ((n=0; n < ${#ARR[*]}; n++)); do echo -e "\u${ARR[$n]//0x/}"; done 
```

并且输出将产生一些可打印字符和一些不可打印字符，如下所示：

[![在此处输入图像描述](../Images/2ef9a82f44ddf459a32fc357736c65a2.png)](https://i.stack.imgur.com/c4clL.png)

使用以下`echo`命令将十六进制值转换为明文：

```
echo -e "\x<hex value here>" 
```

并使用以下`echo`命令将 UTF-8 值转换为纯文本：

```
echo -e "\u<UTF-8 value here>" 
```

然后使用以下`echo`命令将八进制转换为纯文本：

```
echo -e "\0<octal value here>" 
```

当您有不熟悉的编码值时，请花时间检查常见编码方案中的范围以确定值所属的编码。然后从那里转换很快。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-12-02T16:11:50.303

由于`echo -e`错误的转义，您一定会失败。以下代码适用于我的类似输出`your_program with arguments`：

```
echo -e $(your_program with arguments | sed -e 's/0x\(..\)\.\?/\\x\1/g') 
```

但是请注意，您的原始十六进制字符串由不可打印的字符组成。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-10-15T12:54:30.280

制作这样的脚本：

```
#!/bin/bash

echo $((0x$1)).$((0x$2)).$((0x$3)).$((0x$4)) 
```

例子：

`sh converthextoip.sh c0 a8 00 0b`

结果：

192.168.0.11

# android - 应用内结算：未找到项目

> ID：13160310
> 
> 赞同：1
> 
> 时间：2012-10-31T14:33:39.390
> 
> 标签：android, in-app-billing

关于“未找到项目”错误的另一个问题。

*   我在开发控制台中创建了项目。
*   我的应用程序和 Google Play 中的产品 ID 是相同的。
*   我的项目已发布
*   我的项目由 Google 管理
*   我等了 1 天，因为我已经发布了我的项目。
*   我使用的是测试帐户，而不是开发帐户。
*   我正在真实设备上进行测试。
*   我正在使用作为草稿上传到 Google Play 的签名 APK。
*   Google Play 静态请求运行良好。

但是 Google Play 仍然出现“找不到项目”错误。

PS我想知道，也许问题是我的帐户是在一周前注册的？

# asp.net-mvc - MVC4 存储和调用用户密码

> ID：13160311
> 
> 赞同：0
> 
> 时间：2012-10-31T14:33:42.453
> 
> 标签：asp.net-mvc, security, passwords

目前我正在使用 MVC4 进行一个项目，其中我们有一个服务参考来查看数据库以返回我们的内容。服务参考要求我每次拨打电话时都提供用户名/密码。

什么是最好的做法？我应该加密密码然后将其保存到 cookie 中还是应该向用户颁发 Auth Token？还是会有第三种选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:46:37.090

第一的。不。只是不要。永远永远永远永远不会存储用户密码。绝不。我是认真的。绝不。在任何情况下。没有缓解因素。没有什么比你打破这条规则更重要的了。曾经。如果您唯一的选择是违反此规则（例如，通过您无法控制的第三方服务），请拒绝这样做。让某人，某处让步。如果必须，请辞掉工作。我就是这么严重。

如果您保存用户密码，您将破坏用户与软件之间的信任。如果被黑客入侵，您正在使密码可被发现，并且这些密码可以重新用于做讨厌的事情（例如进入某人的银行账户并拿走他们所有的钱）。如果您保存密码，您将成为整个互联网安全问题的一部分。我不在乎你认为自己有多小，或者数据可能有多不相关。某人的密码控制对许多您可能不知道的重要事情的访问。

所以不要这样做。只是不要。

现在，开始解决您的实际问题。如何处理这个问题因情况而异。此服务是否与 Web 服务器位于同一域中？它在你的控制之下吗？能不能换个界面？你在开发服务吗？请说明情况。

# c - 警告：建议在分配周围使用括号作为真值

> ID：13160315
> 
> 赞同：-6
> 
> 时间：2012-10-31T14:33:58.977
> 
> 标签：c, if-statement, compiler-warnings

我有这段代码，但有一些我不明白的地方

当我编译以下代码时：

```
#include <stdio.h>
#include <stdlib.h>

int main() {

double x=1;
double y=0;

  if (x!=y)
  {
    printf("x!=y\n");
  }
  if (x=y)
  {
  printf("x=y\n");
  }

  return 0;
} 
```

我收到以下警告：*警告：建议在分配周围使用括号作为真值*

当我运行程序时，我得到以下输出

```
x!=y
x=y 
```

如果'='不是为了比较而只是将y中的值放入x中，为什么要打印x = y。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T14:40:18.880

编译器警告您表达式的结果`x = y`在条件中使用；我提到这一点，即使它似乎与您的实际问题无关，因为*这些天，通常*这意味着有一个错字，而作者打算改写`==`。

关于这个问题：由于`x = y`评估为`y`(a `double`) 并且`y`为零，因此结果是`false`因为这就是 C 标准所说的应该发生的事情。从 6.3.1.2 开始：

> 当任何标量值转换为 _Bool 时，如果该值比较等于 0，则结​​果为 0；否则，结果为 1。

因此，运行此代码不应**打印**“等于”消息，就像[它对我一样](http://ideone.com/8dArrc)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:36:53.973

您使用了错误的运算符：`=`是赋值，`==`是真正的比较（相等）。编译器会检测到这一点并警告您，以防万一这可能不是故意的（您更有可能进行比较而不是赋值）。这是完全有效的 C（因此它只是一个警告，没有错误）。只是为了确保它是故意的，它要求您在周围添加括号：`if ((x=y))`。这不会在代码方面造成任何差异，但它表明返回值是单独使用的，而赋值只是其中的一部分（难以描述）。

编辑：由于分配，两行都被打印：

*   `x!=y`计算结果为 true - 因此打印第一行。
*   `x=y` is an assignment, which is essentially saying that `x` should take the value of `y`, which is `0` in this case.

As such the second line shouldn't be written (as `0` evaluates to false), but in general, I'd say it's either a bug or some precision error (this shouldn't happen with a simple assignment of `0`, but you never know).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T14:37:50.917

```
if (x!=y)           // This tests if x is not the same value as y
{
  printf("x!=y\n"); // if x is not the same value as y print this
}

if (x=y)            // This assigns x the value of y, the tests the new value of x
{
  printf("x=y\n");  // if y was not 0, then print this
} 
```

我想你想要：

```
if (x == y) // if x is the same value as y 
```

第二次检查

**编辑**
阅读您的评论后，我看到您得到了两个打印件......我不确定您使用的是什么编译器，但我无法重现您的结果。你确定代码被正确复制了吗？当我跑步时，我只会`x!=y`按照我的解释得到预期的结果。

用 gcc 运行你的代码，你会正确地看到它......我所能想到的就是你正在使用一些奇怪的非 C 标准编译器运行，它在分配 y 之前检查 x 的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T14:37:31.883

相等运算 is`==`和`=`is 赋值运算符

正确的形式是`if(x == y)`，但它也会运行它`if(x=y)`

因为在这种情况下， if 将首先评估 ，然后它会从to和之后`x=y`分配一个值，表达式将被视为， 然后它会评估。`y``x``if(x)`

现在这里如果`x`有`0`，那么`if(x)`将视为假，否则为真。

因此，`x=y`不会将打印作为输出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T14:37:36.823

这是一个建议，也许你正在打错字。

通常，您将拥有：

```
if(condition) 
```

在您的情况下，条件是一个赋值，因此 if 总是评估为 true 因此编译器的建议。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T14:38:36.540

Daniel Fischer 已回答您的问题。您正在测试是否 x=y。它没有，所以你的第一个测试是真的。然后将 y 分配给 x，它在工作时返回 true，并导致输出第二个 print 语句。

# uml - Rational Software Architect - 调色板窗口中的类元素缺少图标？

> ID：13160316
> 
> 赞同：1
> 
> 时间：2012-10-31T14:34:00.830
> 
> 标签：uml, class-diagram

我一直在尝试使用 Rational Architect 在 UML 2.0 中创建一个类图。

但是，当我查看调色板选项时，没有可供类单击并在图表上定位类项的图标。

截屏：

![在此处输入图像描述](../Images/854d1439e1d42653fb738906d8d1bd76.png)

按照这里的示例[，](http://people.cis.ksu.edu/~harmon/cis540f09/CIS540-lab2.pdf)在第 2 页上，您可以清楚地看到调色板有一个“类”图标

为什么我找不到？它是我必须使用的特定类型的项目或模型吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:55:38.143

问题解决了，

在“用例”视图而不是“模型”视图中。

![在此处输入图像描述](../Images/8fef5fde53e022643ac96c52431fbc2d.png)

# jsp - 使用属性中的jsp标签来自定义jsp标签

> ID：13160318
> 
> 赞同：0
> 
> 时间：2012-10-31T14:34:09.680
> 
> 标签：jsp, jsp-tags

我有一个带有 url 属性的自定义 JSP 标记。如何将调用另一个 jsp 标记的结果传递给该属性，特别是使用 ?

```
<m:customTag url="<spring:url value='/root'>" /> 
```

传入 url 的值是“”，而不是 spring 将 url 解析为的值。我使用 RequestContextAwareTag 和 getRequestContext().getRequestDataValueProcessor() 完成了一种解决方法，类似于 spring url 标签的工作方式。但我仍然想知道上面的代码是否可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:43:35.033

您可以使用 url 标记的 var 属性。我认为这可能会有所帮助：

```
<spring:url value="/root" var="someUrl">
<m:customTag url="${someUrl}" /> 
```

# ruby-on-rails - 如何存根 after_create 回调保存！在模型中？

> ID：13160324
> 
> 赞同：4
> 
> 时间：2012-10-31T14:34:33.217
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec, mocking

我收到以下错误：

输出：

```
1) LabelsController#create label is new creates a new label
   Failure/Error: post :create, attributes[:label], format: :json
   NoMethodError:
     undefined method `save!' for nil:NilClass
   # ./app/models/labeling.rb:17:in `update_target' 
```

在标签模型中：

```
after_create :update_target

def update_target
   self.target.save!
end 
```

测试：

```
require 'spec_helper'
describe LabelsController do
  before(:each) do
    controller.stub(:current_user).and_return(mock_model(User))
    stub_request(:any, "www.example.com").to_return(status: 200)
  end
  describe "#create" do
    context "label is new" do
      it "creates a new label" do
        attributes = {
          label: {
            name: "test",
            labeling: {
              target_type: "Link", target_id: 1
            }
          }
        }
        response.status.should == 200
        post :create, attributes[:label], format: :json
      end
    end
  end
end 
```

标签控制器：

```
 def create
    label = Label.find_by_name(params[:name])

    labeling = label.labelings.build do |lb|
      lb.user_id     = current_user.id
      lb.target_type = params[:labeling][:target_type]
      lb.target_id   = params[:labeling][:target_id]
    end

    if labeling.save
      render json: {
        name: label.name,
        id: label.id,
        labeling: {
          id: labeling.id
        }
      }
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:23:54.703

从外观上看，您在数据库中没有 ID 为 1 的 Target，因此您引用`self.target`返回值的位置为 nil。在您的情况下，我要做的是首先创建一个目标，然后将其 id 传递给属性哈希：

```
target = Traget.create!
attributes = {
          label: {
            name: "test",
            labeling: {
              target_type: "Link", target_id: target.id
            }
          }
        } 
```

这样你就不需要存根任何东西。如果你真的必须存根方法，你可以使用 RSpecs any_instance 方法：

```
Labeling.any_instance.stub(:update_target).and_return(true) 
```

# java - 如何在 Java 中获取二维向量属性（内部向量的计数、每个内部向量中的元素计数）？

> ID：13160325
> 
> 赞同：-1
> 
> 时间：2012-10-31T14:34:38.813
> 
> 标签：java, vector

我在 Java 中有称为数据的向量的字符串向量。我可以访问这个向量元素：

```
(Vector) data.get(i)).get(j); 
```

如何获得内部向量 (i) 的计数和每个内部向量 (j) 中的元素计数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:47:49.143

Use `Vector.size()` to get collection size. While this would solve your immediate problem:

```
int innerCount = ((Vector)data).size();
for (Object v: data) {
   int elementCount = ((Vector)v).size();
   ...
} 
```

would suggest to use generics here to avoid casting:

```
int innerCount = data.size();
for (Vector v: data) {
   int elementCount = v.size();
   ...
} 
```

Also `ArrayLists` are typically used now since the introduction of the Collections API in Java 2\. See [ArrayLists vs Vectors](https://stackoverflow.com/questions/300519/arraylist-vs-vectors-in-java-if-thread-safety-isnt-a-concern.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:41:16.330

内部向量的数量：

```
((Vector)data).size(); 
```

每个内部向量的元素数：

```
for(Vector v : (Vector)data) {
    int nrElemsInCurrentInner = v.size();
} 
```

# .htaccess - 数百个 URL 的 Htaccess 重定向

> ID：13160330
> 
> 赞同：2
> 
> 时间：2012-10-31T14:34:53.593
> 
> 标签：.htaccess, joomla

我有数百个 URL 的旧网站，看起来像这样：

> http:www.domain.com/Contact.asp?Pid=344
> 
> http:www.domain.com/Contact.asp?Pid=345
> 
> http:www.domain.com/Contact.asp?Pid=346

等等 ...

我需要将所有这些永久移动到 1 个单个 URL：

> http:www.domain.com/contact

我试过这个：

```
RewriteCond %{QUERY_STRING} Contact.asp?Pid=([0-999]+) 

RewriteRule ^http://www.domain.com/contact? [L,R=301] 
```

但效果不好。

老网站使用`ASP`。新网站建立在`Joomla`. 该域将是旧站点的域

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T01:54:40.433

你很近。您需要`%{QUERY_STRING}`像以前一样使用变量，但 var*不*包含 URI-path (the `Contact.asp?`) 部分。此外，您`RewriteRule`缺少正则表达式模式。尝试：

```
RewriteCond %{QUERY_STRING} Pid=([0-999]+) 

RewriteRule ^/?Contact\.asp$ http://www.domain.com/contact? [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:51:34.870

```
RewriteRule ^Contact.asp?Pid=(\d) /contact? [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T14:51:53.763

您那里只有联系页面吗？您可以只对整个目录进行 301 处理，因为它们都移动到一个 URL。

```
RewriteEngine on
RewriteBase /
RewriteRule ^/(.*)$ http://www.domain.com/$1 [R=301,L] 
```

# git - Git 工作流/部署

> ID：13160335
> 
> 赞同：6
> 
> 时间：2012-10-31T14:35:07.033
> 
> 标签：git, deployment, initialization, workflow, installation

我是 Git 新手，并试图将我的网站从 SVN 转移到 GIT 以进行版本控制和部署。

我有许多开发人员将在他们的本地机器上工作，我有 3 台服务器，“开发”、“暂存”和“生产”。

我一直在阅读有关 Git 工作原理的书籍和视频，所以我认为我现在对它非常熟悉，例如添加、提交等，但是我需要有关工作流程和部署的建议。

我需要知道的第一件事是在哪里初始化 GIT 存储库。它是否需要在“生产”服务器上，然后我在“登台”和“开发”上克隆它，每个开发人员也将它克隆到他们的本地机器上？

其次，每个服务器都应该有自己的分支吗？即“开发”将有一个“开发”分支，“暂存”将有一个“暂存”分支，“生产”将有一个“生产”分支？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T14:51:32.283

我最近也将我的团队从 SVN 转移到了 Git，我们有 3 个服务器的相同设置，prod、stg 和 dev..

**对于迁移过程**，首先`sudo apt-get install git-svn`，然后..

```
$ git svn clone [subversion_repository_url] /path/to/git/repository
$ cd /path/to/git/repository
$ git remote add origin [gir_repo_url]
$ git push origin master 
```

**对于工作流**，

[这个](http://nvie.com/posts/a-successful-git-branching-model/)标题为“***一个成功的 Git 分支模型***”的链接非常有用。它需要如何为团队使用*“生产 - 登台 - 开发*”类型的工作流程。

**关于部署**：

在每台服务器上，我们所做的是，每台服务器在文件系统的某个地方都有 git repo。要部署，我将需要部署的相应分支存档并将其解压缩到 /srv/www/ 文件夹中。

例如，**在 Prod 上**，部署*master 分支*，

```
sudo git archive --format zip --output output.zip master -0 
```

^“master”表示您要压缩的分支。这不包括 .git 文件夹。然后解压到/srv/www/文件夹里面，`sudo unzip output.zip -d /srv/www/app/` [这相当于一个`svn export`命令。](https://stackoverflow.com/questions/160608/how-to-do-a-git-export-like-svn-export)

**对于暂存服务器**，我们通常签出*Release 分支*或*Dev 分支*之一..

**对于开发服务器**，我们签出任何一个*需要执行测试的任何*功能分支。**

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T14:56:35.213

您在这里有 3 个问题：如何部署、如何构建分支以及如何构建/托管存储库。

**如何构建分支？**

你可以从简单的开始。你已经有了一个 SVN 存储库，所以如果你有一个主干和分支，你可以在 git 中以同样的方式设置它们。如果这对您不起作用，请仅在您发现需要时进行更改。

如果您想要更高级的东西，请查看[git flow](http://nvie.com/posts/a-successful-git-branching-model/)。另一个很好的工作流程是[github 使用](http://scottchacon.com/2011/08/31/github-flow.html)的工作流程。它的设计比 git flow 更简单。

**如何托管存储库？**

一种简单的方法是像使用 SVN 一样进行操作。在中央服务器上有一个中央存储库。每个人都在中央服务器上推拉。另一种选择是为某种首席开发人员提供“官方”存储库，当他们获得领导的批准时，该领导将从贡献开发人员那里提取其他更改。有很多方法可以做到这一点。你只需要决定什么最适合你。

**我该如何部署？**

同样，这也不需要从您的 SVN 工作流程中进行更改。你可能正在`svn update`从每个盒子里做一个。我只是`git pull`对每个盒子做一个，并保持其他一切都一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T14:56:17.833

很大程度上取决于最终适合你的东西。

[此处另一个答案](https://stackoverflow.com/a/13160693/149998)中链接的分支模型是一个非常好的起点。

通常，您将拥有一个`master`代表已发布代码的分支。

暂存取决于您要暂存的内容 - 我们的团队有一个名为的单独分支`staging`，由持续集成服务器的暂存构建使用。可以将不同的功能合并到此分支中以在暂存时对其进行测试。

部署将取决于您是使用 CI 还是直接从 repo 中的分支部署。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T17:03:37.630

我制定了自己的策略。它最初是基于 nvie 的：

[http://dymitruk.com/blog/2012/02/05/branch-per-feature/](http://dymitruk.com/blog/2012/02/05/branch-per-feature/)

它允许临时混合和匹配已完成的功能。该策略的基石是每次迭代从历史中的同一位置开始每个特征。*

# c# - 我将如何处理 .NET 对象哈希码？

> ID：13160338
> 
> 赞同：6
> 
> 时间：2012-10-31T14:35:15.963
> 
> 标签：c#, .net

C# 中的对象有四种方法 - { `Equals`, `GetType`, `ToString`, `GetHashCode`}。
有人可以用哈希码做什么样的有用的事情？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-31T14:36:32.160

> 有人可以用哈希码做什么样的有用的事情？

快速找到*可能*相等的对象。

特别是，这种方法通常被[`Dictionary<TKey, TValue>`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)(for the keys) 和[`HashSet<T>`](http://msdn.microsoft.com/en-us/library/bb359438.aspx).

但是，您不应该*假设*具有相同哈希码的对象是相等的。有关更多信息，请参阅[Eric Lippert 的博客文章，以及有关使用哈希码的更一般性讨论的](http://blogs.msdn.com/b/ericlippert/archive/2011/02/28/guidelines-and-rules-for-gethashcode.aspx)[Wikipedia 哈希表](http://en.wikipedia.org/wiki/Hash_table)页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T14:36:50.793

> 哈希码是一个数值，用于在相等性测试期间识别对象。它还可以用作集合中对象的索引。
> 
> GetHashCode 方法适用于散列算法和数据结构，如散列表。
> 
> GetHashCode 方法的默认实现不保证不同对象的唯一返回值。此外，.NET Framework 不保证 GetHashCode 方法的默认实现，它返回的值在不同版本的 .NET Framework 之间是相同的。因此，此方法的默认实现不得用作散列目的的唯一对象标识符。
> 
> GetHashCode 方法可以被派生类型覆盖。值类型必须重写此方法以提供适合该类型的散列函数并在散列表中提供有用的分布。为了唯一性，哈希码必须基于实例字段或属性的值，而不是静态字段或属性。
> 
> 用作 Hashtable 对象中的键的对象也必须覆盖 GetHashCode 方法，因为这些对象必须生成自己的哈希码。如果用作键的对象未提供有用的 GetHashCode 实现，则可以在构造 Hashtable 对象时指定哈希码提供程序。在 .NET Framework 2.0 版之前，哈希码提供程序基于 System.Collections.IHashCodeProvider 接口。从 2.0 版开始，哈希码提供程序基于 System.Collections.IEqualityComparer 接口。

[- 来自 MSDN](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T14:39:21.320

基本思想是，如果两个对象具有不同的哈希码，它们就是不同的。如果它们具有相同的哈希码，则它们可能不同或相等。

要检查集合中是否存在对象，您可以首先检查哈希码，如果您正在比较整数，这会很快，然后只对具有相同哈希码的对象进行更准确的测试。

例如，这用于集合类中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T15:26:09.880

# 获取哈希码

`GetHashCode`只为这两种类型的利益而存在

->**哈希表**

->**通用字典**

GetHashCode 为您提供各种键以获得良好的`hashtable`性能。

# 等于

`null-safe`当编译时类型未知时，Equals 提供相等比较。它的签名是

`public static bool Equals(object A,object B)`.

所以你不能使用像这样的运算符，`==`或者`!=`在编译时类型未知。你必须使用`Equals`

它在编写泛型类型时很有用

例如：

```
class Test<T>
{
    T value;
    public void SetV(T newValue)
   {
   if(object.Equals(newValue,value))
   //We have to use Object.Equals cant use == or !=since they cannot bind to unknown type at compile time
   }
} 
```

# 字符串

它返回`texual representation`类型实例的默认值。此方法被所有内置类型覆盖

# 获取类型

`GetType`在运行时进行评估。它可以帮助我们了解类型的`name`, `assemby`, `base type`.. 和其他

# java - 定义dom中属性的顺序

> ID：13160339
> 
> 赞同：1
> 
> 时间：2012-10-31T14:35:16.790
> 
> 标签：java, dom

我目前正在研究 DOM，我想知道如何更改标签数据的位置，例如

我创建了元素：

```
propElement = document.createElement("prop"); 
```

道具正在打开标签。

然后

```
propElement.setAttribute("name", "name1");

propElement.setAttribute("name2", "name2"); 
```

问题是，尽管我将 set 方法 name2 放在 name1 之后，但我会在 name1 之前的标签 name2 中看到。

如何更改订单？

*（注意；我使用的是 Java DOM API，而不是 JavaScript。）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:36:37.040

你不能，元素上的属性顺序并不重要。实际上，在实时 DOM 中，*没有*顺序。顺序似乎只存在于与 DOM 的*序列化*形式（例如，HTML 标记等）相关的情况下。即便如此，除了与无效文本有关的命令外，该命令没有任何意义（更多内容见下文）。

属性基本上是对象的简单属性（它们附加到的 DOM 元素）。它们绝对没有顺序，实际上它们在 DOM 中的[`NamedNodeMap`](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-1780488922)表示是“......不以任何特定顺序维护”。

重要的是要记住 DOM 描述了一个对象模型。DOM的*序列化形式*可能是文本的（例如，定义 DOM 的 HTML 文档），但 DOM 不是。在 HTML 文档中，由于它是线性文本（从上到下，从左到右），定义一个属性的文本自然必须在描述另一个属性的文本之前，但这并不**意味着**属性的任何顺序生成的 DOM 对象，因为它们根本没有顺序。所以这：

```
<div a="1" b="2">...</div> 
```

描述与此***完全相同***的元素：

```
<div b="2" a="1">...</div> 
```

结果元素是 a `div`，它有一个`a`带有 value的属性和一个带有value`1`的属性。`b``2`

这与在程序源中为对象设置属性完全相同。考虑一些假设`obj`的 with`x`和`y`属性。这段代码：

```
obj.a = 1;
obj.b = 2; 
```

...产生与此代码**完全相同的对象：**

```
obj.b = 2;
obj.a = 1; 
```

...提供`a`并且`b`确实是简单的字段（不是可能有副作用的隐藏函数调用），这对于 DOM 中的属性是正确的。

*DOM的文本*（序列化）形式中的属性顺序可能很重要，并且它仅与**无效**文本有关：如果多次指定相同的属性，则仅使用给定的第一个值，因为多次指定同一个属性是无效的。这些值不会合并，后续值不会覆盖前一个值。仅使用第一个。

所以这个**无效的**HTML：

```
<div class="foo" class="bar">...</div> 
```

...实际上导致`div`with `class` `"foo"`(`"bar"`根本不存在)。但这只是处理*无效*序列化表单的一种应对机制。

# forms - 如何使服务器信任客户端验证？

> ID：13160340
> 
> 赞同：1
> 
> 时间：2012-10-31T14:35:17.493
> 
> 标签：forms, html, tornado

我发现有时 - 说 -*应用程序必须有两个验证：客户端和服务器端*。

我的问题：有没有办法制作一种加密的信任消息，所以只有服务器和客户端才能理解，所以服务器会避免表单验证，因为当我在 python 中添加正则表达式进行验证时，这个增加了我的申请响应时间！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T17:23:10.563

即使您使用“加密的信任消息”，也不能保证来自客户端的消息甚至是合法的。您应该始终在客户端进行验证，这样用户就不必等待服务器响应被告知刚刚提交的表单中的某些内容不正确。您必须始终在服务器端验证来自客户端的任何输入。如果您的正则表达式很慢，那只意味着它效率不高。你需要努力改进它。

# jquery - 单击时为 .html() 获取延迟的 jQuery

> ID：13160345
> 
> 赞同：1
> 
> 时间：2012-10-31T14:35:33.203
> 
> 标签：jquery, jquery-deferred

我有一个点击处理程序，它通过模板方法获取要注入的 HTML 字符串。现在它不能从回调中异步返回 HTML 字符串，但我听说如果我使用 jQuery defereds 我可以实现这一点。但是，我仍然不确定在阅读它们之后我将如何构建它。

这是我的代码的简化版本：

```
var api_response;

var templates = {

    inputSurveyList: function(){

        coApi.get_survey_list(function(data){
            api_response = data;
        });

        var buildSurveyList = function() {
            var element_list = '';
            $.each(api_response, function(index, survey){
                element_list += '<option value="' + survey.survey_id + '">' + survey.name + '</option>\n'
            });
            return element_list
        }

        var template = '<select class="input-survey-list" name="state">\n' + buildSurveyList() + '</select>';
        return template;
    }
}

$(foo).click(function(){
    $(bar).html(templates.inputSurveyList());
}) 
```

这就是 API 方法的样子：

```
var Request = function(method, parameters, callback, errback){
    var self = this;
    this.method = method;
    this.parameters = parameters;
    this.callback = callback;
    this.errback = errback;

    this.send = function(){
        $.ajax({
            dataType: 'json',
            type: 'POST',
            data: JSON.stringify({method: self.method, params: self.parameters}),
            url: '/api',
            success: function(data, textStatus, jqXHR){
                self.callback(data.response);
            },
            error: function(jqXHR, textStatus, errorThrown){
                if (self.errback) {
                    self.errback(ajaxRequest);
                }
            }
        });
    }
}

var coAPI = {
    // Project Calls
    get_survey_list: function(callback, errback){
        var request = new Request('get_survey_list', {}, callback, errback);
        request.send();        
    },
    autocomplete_us_cities: function(term, callback, errback){
        var request = new Request('autocomplete_us_cities', {term: term}, callback, errback);
        request.send();
    },

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:43:45.813

您的 $.ajax 需要自行返回，因此`return $.ajax({...})`，`get_survey_list: functi...`您需要`return request.send()`

现在你可以这样使用它：

```
var templates = {

    inputSurveyList: function(callback){

        if (!callback) return; // if there's no callback, why generate template?

        var api_response = coApi.get_survey_list();

        var buildSurveyList = function(data) {
            var element_list = '';
            $.each(data, function(index, survey){
                element_list += '<option value="' + survey.survey_id + '">' + survey.name + '</option>\n'
            });
            return element_list
        }

        api_response.done(function(data){
            var template = '<select class="input-survey-list" name="state">\n' + buildSurveyList(data) + '</select>';
            callback.call(null,template);
        });
    }
}

$(foo).click(function(){
    templates.inputSurveyList(function(template){
        $(bar).html(template);
    });
}); 
```

如果您愿意，您可以进一步修改它，让 inputSurveyList 返回它自己的延迟对象。

# iphone - Xcode 索引频繁并在框架文件中搜索/加载项目时需要时间

> ID：13160346
> 
> 赞同：0
> 
> 时间：2012-10-31T14:35:36.537
> 
> 标签：iphone, xcode, ipad, indexing, xcode4.5

我在使用 Xcode 时遇到了一个奇怪的问题，它会保持索引并且需要很长时间才能做到这一点。搜索功能也无法正常工作。它搜索所有框架/库文件而不是项目文件。我尝试了我的另一个项目，但该项目没有问题。所以我想这是我的项目有问题......但我无法找到。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:47:47.780

找到了我自己问题的答案...我删除了 .xcodeproject 包中的工作区文件。然后当我在 xcode 中打开项目时，仍然需要时间，因为它在项目下有整个“应用程序”文件夹。我删除了对它的引用并重新打开它，现在它工作正常。它对我来说并没有影响 git 存储库。

# android - 果冻豆上TextView的requestFocus慢

> ID：13160352
> 
> 赞同：18
> 
> 时间：2012-10-31T14:36:00.763
> 
> 标签：android, performance, android-4.2-jelly-bean

我正在开发一个应用程序，它有 4 个用于输入数据的文本字段，并且在将焦点从一个移到另一个时遇到了性能问题。当一个字段输入了一个字符时，我使用 addTextChangedListener 来监视文本并将焦点移动到下一个文本字段。这在 4.1.1 之前的 android 版本上运行良好，但由于在 4.1.1 上进行测试，当您在焦点出现在下一个字段中之前按下一个键时会出现明显的滞后。这意味着如果用户快速键入，按键可能会丢失。

我有一个使用以下代码的简单应用程序

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    one = (EditText)findViewById(R.id.editText1);
    two = (EditText)findViewById(R.id.editText2);

    one.addTextChangedListener(new TextWatcher() {

        @Override
        public void afterTextChanged(Editable s) {
            two.requestFocus();

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
            // TODO Auto-generated method stub

        }
    });
} 
```

这突出了这个问题。在基于 4.0.4 的设备上运行时一切都很好，但在 4.1.1 上移动焦点需要一段时间。

我已经在 2 款不同的三星 Galaxy s3 上进行了测试，一款为 4.0.4，另一款为 4.1.1。

有没有其他人看过这个？

非常感谢

保罗

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-12T18:58:05.313

*我不知道该问题是否有解决方案*......但我可能有一个“hack”，可以在问题存在时提供**替代解决方案：**

1.  将 EditText 放在屏幕外。（我通常使用RelativeLayout 将其设置在右边距的右侧）。

2.  设置`onTouchListener`为可见的 EditText（并将 EditText 设置为不可点击）。应该将`onTouchListener`焦点放在隐藏的 EditText 上。

3.  在隐藏的 EditText 上`addTextChangedListener`，为添加或删除的每个字符设置一个对可见 EditTexts 进行适当更改的选项。

**例子：**

如果我有 4 个 ID 为 PIN 的 EditTexts: `A`、和一个 EditText `B`，屏幕外有一个 id ：`C``D``hidden`

每当我收到`hidden`我写的第一个字符时`A`。

每当我收到第二个字符时，`hidden`我都会写`B`.

`hidden`每当我在我删除的第二个字符上收到删除时`B`。

...

我在我的一个应用程序上做类似的事情，没有问题。

# jquery - 将自定义类添加到工具提示

> ID：13160357
> 
> 赞同：35
> 
> 时间：2012-10-31T14:36:10.140
> 
> 标签：jquery, css, twitter-bootstrap

我想设计（css）一些 bootstrap-tooltip.js 工具提示，而不影响所有工具提示。我尝试了许多不同的解决方案，但我总是最终向触发工具提示的元素添加一个类。

这是我尝试过的：

```
$(function(){
  $("[id$=amount]").tooltip({
    trigger: 'manual',
    placement: 'right'
  }).addClass("test"); // <--- This does not help me. Class just ends up 
});                    //      in the trigger element. Se html output 
                       //      from firebug below... 
```

但随后该类最终出现在触发工具提示的元素中：

```
<input 
     id="list_wishes_attributes_0_amount" 
     class="test"  <!-- The class I tried to add to the tooltip ended up here. -->
     type="text" 
     tabindex="3" 
     size="30" 
     rel="tooltop" 
     name="list[wishes_attributes][0][amount]" 
     min="0" 
     data-original-title="Only numbers please"
/> 
```

如何为我的工具提示分配自定义类，而不是触发它的输入字段？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-11-03T03:00:40.923

**（2021 年 3 月 23 日更新，包括 Boostap 5）**

**在 Bootstrap 4 之前：**

```
$().tooltip({
  template: '<div class="tooltip CUSTOM-CLASS"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'
}) 
```

* * *

**引导程序 4：**

```
$().tooltip({
  template: '<div class="tooltip CUSTOM-CLASS" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>'
}) 
```

* * *

**Bootstrap 5：** 他们增加了在源代码中添加自定义类的功能，因此更容易做到。

```
$().tooltip({
  customClass: 'CUSTOM-CLASS'
}) 
```

**纯Javascript：**

```
var exampleEl = document.getElementById('example')
var tooltip = new bootstrap.Tooltip(exampleEl, {customClass: 'CUSTOM-CLASS'}) 
```

**或在 html 中：**

```
<a href="http://stackoverflow.com" data-bs-custom-class="CUSTOM-CLASS" title="Some Helpful Info!" role="tooltip">Stackoverflow.com</a> 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-04-26T14:41:00.900

我使用的方法是通过 JQuery 将一个类直接附加到元素（在 Bootstrap 3 中工作）。这有点棘手，因为您需要通过父`data`属性找到隐藏的自动生成元素。

```
$('#[id$=amount]')
  .tooltip()
    .data('bs.tooltip')
      .tip()
      .addClass('custom-tooltip-class'); 
```

我更喜欢这个而不是覆盖模板，因为它比所有额外的 HTML 更简洁、更简洁。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-04-14T08:35:26.887

***（更新：2021 年 2 月 21 日）***

## 引导程序 5

可以通过添加`customClass`选项（在 JS 中）或`data-bs-custom-class="..."`在 HTML 中添加选项来使用自定义类，如官方文档中所述：

[https://getbootstrap.com/docs/5.0/components/tooltips/#options](https://getbootstrap.com/docs/5.0/components/tooltips/#options)

* * *

## 引导程序 4 / 引导程序 3

我为 Bootstrap Tooltip 插件创建了一个小扩展，它允许我们通过使用`customClass`Javascript 中的参数或通过`data-custom-class`HTML 中的属性来为工具提示添加自定义类。

### 用法

*   通过`data-custom-class`属性：

`data-custom-class="tooltip-custom"`- 使用类构建工具提示`tooltip-custom`。

```
<button type="button" class="btn btn-default" data-toggle="tooltip" data-placement="top" data-custom-class="tooltip-custom" title="Custom tooltip example">Tooltip example</button> 
```

*   通过`customClass`参数：

`customClass: 'tooltip-custom'`

```
$('.my-element').tooltip({
    customClass: 'tooltip-custom'
}); 
```

### 设置：

代码因使用的 Bootstrap 版本（v3、v4-alpha 或 v4）而异。

### 引导程序 v4

**Javascript**

```
;(function($) {

  if (typeof $.fn.tooltip.Constructor === 'undefined') {
    throw new Error('Bootstrap Tooltip must be included first!');
  }

  var Tooltip = $.fn.tooltip.Constructor;

  // add customClass option to Bootstrap Tooltip
  $.extend( Tooltip.Default, {
    customClass: ''
  });

  var _show = Tooltip.prototype.show;

  Tooltip.prototype.show = function () {

    // invoke parent method
    _show.apply(this,Array.prototype.slice.apply(arguments));

    if ( this.config.customClass ) {
        var tip = this.getTipElement();
        $(tip).addClass(this.config.customClass);
    }

  };

})(window.jQuery); 
```

**CSS**

```
.tooltip-custom .tooltip-inner {
  background-color: #5b2da3;
}
.tooltip-custom.bs-tooltip-top .arrow:before {
  border-top-color: #5b2da3;
}
.tooltip-custom.bs-tooltip-right .arrow:before {
  border-right-color: #5b2da3;
}
.tooltip-custom.bs-tooltip-left .arrow:before {
  border-left-color: #5b2da3;
}
.tooltip-custom.bs-tooltip-bottom .arrow:before {
  border-bottom-color: #5b2da3;
} 
```

**萨斯**

```
@mixin tooltip-custom($bg-color, $color: $tooltip-color) {

  .tooltip-inner {
    background-color: $bg-color;
    @if $color != $tooltip-color {
      color: $color;
    }
  }

  &.bs-tooltip-top .arrow:before {
    border-top-color: $bg-color;
  }

  &.bs-tooltip-right .arrow:before {
    border-right-color: $bg-color;
  }

  &.bs-tooltip-left .arrow:before {
    border-left-color: $bg-color;
  }

  &.bs-tooltip-bottom .arrow:before {
    border-bottom-color: $bg-color;
  }

} 
```

**示例**： [https ://jsfiddle.net/zyfqtL9v/](https://jsfiddle.net/zyfqtL9v/)

**2020 年 1 月 8 日更新：与最新的 Bootstrap 版本（4.4.1）兼容：** [https ://jsfiddle.net/ep0mk94t/](https://jsfiddle.net/ep0mk94t/)

* * *

### 引导程序 v3.3.7

**Javascript**

```
(function ($) {

  if (typeof $.fn.tooltip.Constructor === 'undefined') {
    throw new Error('Bootstrap Tooltip must be included first!');
  }

  var Tooltip = $.fn.tooltip.Constructor;

  $.extend( Tooltip.DEFAULTS, {
    customClass: ''
  });

  var _show = Tooltip.prototype.show;

  Tooltip.prototype.show = function () {

    _show.apply(this,Array.prototype.slice.apply(arguments));

    if ( this.options.customClass ) {
        var $tip = this.tip()
        $tip.addClass(this.options.customClass);
    }

  };

})(window.jQuery); 
```

**CSS**

```
.tooltip-custom .tooltip-inner {
  background-color: #5b2da3;
}
.tooltip-custom.top .tooltip-arrow {
  border-top-color: #5b2da3;
}
.tooltip-custom.right .tooltip-arrow {
  border-right-color: #5b2da3;
}
.tooltip-custom.left .tooltip-arrow {
  border-left-color: #5b2da3;
}
.tooltip-custom.bottom .tooltip-arrow {
  border-bottom-color: #5b2da3;
} 
```

**示例**： [https ://jsfiddle.net/cunz1hzc/](https://jsfiddle.net/cunz1hzc/)

* * *

### 引导 v4.0.0-alpha.6

**Javascript**

```
;(function($) {

  if (typeof $.fn.tooltip.Constructor === 'undefined') {
    throw new Error('Bootstrap Tooltip must be included first!');
  }

  var Tooltip = $.fn.tooltip.Constructor;

  // add customClass option to Bootstrap Tooltip
  $.extend( Tooltip.Default, {
      customClass: ''
  });

  var _show = Tooltip.prototype.show;

  Tooltip.prototype.show = function () {

    // invoke parent method
    _show.apply(this,Array.prototype.slice.apply(arguments));

    if ( this.config.customClass ) {
      var tip = this.getTipElement();
      $(tip).addClass(this.config.customClass);
    }

  };

})(window.jQuery); 
```

**CSS**

```
.tooltip-custom .tooltip-inner {
    background-color: #5b2da3;
}
.tooltip-custom.tooltip-top .tooltip-inner::before, 
.tooltip-custom.bs-tether-element-attached-bottom .tooltip-inner::before {
    border-top-color: #5b2da3;
}
.tooltip-custom.tooltip-right .tooltip-inner::before, 
.tooltip-custom.bs-tether-element-attached-left .tooltip-inner::before {
    border-right-color: #5b2da3;
}
.tooltip-custom.tooltip-bottom .tooltip-inner::before,
.tooltip-custom.bs-tether-element-attached-top .tooltip-inner::before {
    border-bottom-color: #5b2da3;
}
.tooltip-custom.tooltip-left .tooltip-inner::before,
.tooltip-custom.bs-tether-element-attached-right .tooltip-inner::before {
    border-left-color: #5b2da3;
} 
```

**SASS**混合：

```
@mixin tooltip-custom($bg-color, $color: $tooltip-color) {

  .tooltip-inner {
    background-color: $bg-color;
    @if $color != $tooltip-color {
     color: $color;
  }
}

&.tooltip-top,
&.bs-tether-element-attached-bottom {
  .tooltip-inner::before {
    border-top-color: $bg-color;
  }
}

&.tooltip-right,
&.bs-tether-element-attached-left {
  .tooltip-inner::before {
    border-right-color: $bg-color;
  }
}

&.tooltip-bottom,
&.bs-tether-element-attached-top {
  .tooltip-inner::before {
    border-bottom-color: $bg-color;
  }
}

&.tooltip-left,
&.bs-tether-element-attached-right {
  .tooltip-inner::before {
    border-left-color: $bg-color;
  }
} 
```

}

**示例**： [https ://jsfiddle.net/6dhk3f5L/](https://jsfiddle.net/6dhk3f5L/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-21T11:38:06.347

也许这可以帮助像它帮助我的人：

将自定义类添加到“生成的”工具提示节点：

```
$(document).ready(function() {
    $(".my-class").tooltip({
        tooltipClass:"my-custom-tooltip"
    });
}); 
```

作为 body 元素的最后一个子元素的示例输出：

```
<div id="ui-tooltip-1" role="tooltip" class="ui-tooltip ui-widget ui-corner-all ui-widget-content my-custom-tooltip" style="top: 295px; left: 908px; display: block;">
    <div class="ui-tooltip-content">My title contnet</div>
</div> 
```

应用于这个问题的逻辑：

```
$(function(){
  $("[id$=amount]").tooltip({
    trigger: 'manual',
    placement: 'right'
    tooltipClass:'test'
  })
}); 
```

使用 jQuery UI 测试 - v1.10.3

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-15T19:32:30.763

如果选择器返回许多工具提示，则可以 替代[此答案：](https://stackoverflow.com/a/29879041/1159167)

```
$("[id$=amount]")
  .tooltip()
  .each((i, el)=> $(el).data('bs.tooltip').tip().addClass('test')); 
```

（*引导程序 2 和 3 应该没问题*）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-03-13T05:16:01.153

在工具提示元素中添加自定义类/ID，如下所示：

```
<span class="red-tooltip" data-toggle='tooltip' data-placement='top' data-original-title='Print wisely'>Here tooltip is needed</span> 
```

触发脚本如下，

```
$('.red-tooltip').on('show.bs.tooltip', function(){
    $($(this).data('bs.tooltip').tip).addClass('yourclassname');
}); 
```

为类“yourclassname”添加 css 属性。

```
.redtooltip.tooltip > .tooltip-inner{
    background-color:#FF5257;
    box-shadow: 0px 0px 4px 0px #FF5257 !important;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-31T15:08:42.543

尝试将`html`选项设置为`true`并将类似的内容`<span class="test">YOUR TEXT</span>`插入`title`选项中。

```
$(function(){
  $("[id$=amount]").tooltip({
    trigger: 'manual',
    placement: 'right',
    html: true,
    title: '<span class="test">YOUR TEXT</span>'
  });
}); 
```

老实说，我不确定这是否会奏效，但我相信值得一试。

**编辑**：阅读[这篇文章后](https://stackoverflow.com/questions/12639708/modifying-twitter-bootstraps-tooltip-colors-based-on-position)，它可能会更有帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-31T21:02:27.140

在 之前`.addClass`，尝试添加`.parent()`直到获得父级`div`。另外——你总是可以使用 jQuery 选择器来找到`div`你想要的并从那里更新 CSS。

# jquery - 第二次点击输入类型按钮jquery

> ID：13160362
> 
> 赞同：0
> 
> 时间：2012-10-31T14:36:21.220
> 
> 标签：jquery

我有下面的代码，我想在第二次点击时有默认的输入类型按钮

```
 $(function () {
            $('.inputbutton').on('click', function (e) {
                e.preventDefault();
                $(this).css("background-color", "gray");                    
            });
        }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T14:42:37.080

据我了解，您只想删除单击时添加的内联 CSS？

为什么不通过外部样式表切换按钮和样式上的类？

```
$(function () {
    $('.inputbutton').on('click', function (e) {
        e.preventDefault();
        $(this).toggleClass('is-highlighted');
    });
}); 
```

当然，在你的 CSS 中，你必须相应地设置类的样式

```
.is-highlighted {
    background-color: gray;
} 
```

如果您真的想坚持使用“通过 javascript 添加的内联样式”解决方案，只需检查 style 属性是否已设置，如果是，请使用[.removeAttr()将其删除](http://api.jquery.com/removeAttr/)

在我看来，样式属于样式表而不是 javascript 文件。（当然这条规则也有例外）

# node.js - 从 WebRole 中的 node.js 与 azure 队列通信时出错

> ID：13160366
> 
> 赞同：0
> 
> 时间：2012-10-31T14:36:32.547
> 
> 标签：node.js, azure

尝试使用 node.js azure 包版本 0.6.6 在 azure 队列上创建消息时出现此错误：{"code":"ECONNREFUSED","errno":"ECONNREFUSED","syscall":"connect "}

它只发生在已部署的 WebRole 中，但在本地和 Azure 网站中运行良好。我需要这个在 webrole 中，因为我需要一个 SSL 证书。

我使用这种方法部署了角色：[https ://www.windowsazure.com/en-us/develop/nodejs/tutorials/getting-started/](https://www.windowsazure.com/en-us/develop/nodejs/tutorials/getting-started/)

我在日志中看到的一个错误可能有助于诊断。

```
Application has thrown an uncaught exception and is terminated:
TypeError: Cannot read property 'statusCode' of null
    at E:\approot\node_modules\azure\lib\services\queue\queueservice.js:295:54
    at Request._callback (E:\approot\node_modules\azure\lib\services\core\serviceclient.js:197:9)
    at E:\approot\node_modules\azure\node_modules\request\main.js:122:22
    at Request.<anonymous> (native)
    at Request.emit (events.js:67:17)
    at ClientRequest.<anonymous> (E:\approot\node_modules\azure\node_modules\request\main.js:224:10)
    at ClientRequest.emit (events.js:67:17)
    at Socket.socketErrorListener (http.js:1188:9)
    at Socket.emit (events.js:67:17)
    at Array.0 (net.js:301:14) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T23:31:02.273

我通过在 github repo 上发布问题得到了答案：

[https://github.com/WindowsAzure/azure-sdk-for-node/issues/434](https://github.com/WindowsAzure/azure-sdk-for-node/issues/434)

答：我在发布之前从 web.config 中删除了 EMULATED env var。有一个错误（在 0.6.7 版本中修复）阻止将 web.cloud.config 替换为 web.config

谢谢马克考尔！

# javascript - javascript/jquery 函数作用域

> ID：13160367
> 
> 赞同：1
> 
> 时间：2012-10-31T14:36:33.123
> 
> 标签：javascript, jquery, scope

```
 function onMouseClickFunction() {

    $mapCanvas.click(function (e) {
        var x = cursor.getCursorPositionInCanvasX(e.pageX),
            y = cursor.getCursorPositionInCanvasY(e.pageY); 
```

这个例子中的变量范围是什么，它是函数 onMouseclickFunction 还是 jquery 的匿名函数？

我要说的是，javascript 使用提升在其父函数的顶部创建变量，那么在这个例子中提升是在哪里完成的呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T14:37:43.570

每个正确声明的变量都将始终具有当前函数的局部范围。

由于您`var`正确使用了该语句，因此您的`x`和`y`变量对于您的匿名函数是本地的。

* * *

如果您希望能够从您的`onMouseClickFunction`函数中访问这些变量，您应该在`click`事件处理程序之外声明它们。您仍然可以从单击处理程序中访问它们，因为该函数本身是在`onMouseClickFunction`函数中声明的。

这被称为 JavaScript 的作用域链查找：如果您使用的变量尚未在本地作用域内声明，JavaScript 将在当前变量上方的作用域中查找它（在匿名函数的情况下，它是外部`onMouseClickFunction`）。如果它也没有在那里声明，它将继续向上查找范围，直到它到达全局范围。

如果在作用域链的任何地方都找不到该变量，它将被声明为*全局作用域中*的新变量。这就是为什么必须*始终*使用语句声明变量的原因`var`，就像您所做的那样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T14:38:14.623

假设您的意思是变量`x`和`y`，那么它就是传递给 的匿名函数`click()`。

`var`总是作用于*当前*函数。

> 我要说的是，javascript 使用提升在其父函数的顶部创建变量，那么在这个例子中提升是在哪里完成的呢？

提升意味着当您使用 时`var`，该变量将被限定为函数的范围，即使您之前曾尝试使用它。

IE

```
function () {
    var x = 1;

    function () {
         alert(x);
         var x = 2;
    }
} 
```

如果调用了内部函数，它会发出警报`undefined`，因为在内部函数的范围内`var x = 2`创建了一个新函数（被提升），但是直到警报之后才会发生分配（因为没有提升分配）。`x``var`

问题中的所有`var`语句都出现在它们出现的函数的顶部，因此提升没有区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T14:43:58.417

您在这里创建的是一个[闭包](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope#Nested_functions_and_closures)。

因此，匿名函数将继承 onMouseClickFunction 的作用域，但变量 x 和 y 仅在匿名函数的作用域内。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T14:38:55.750

它将是后者（匿名函数），因为这是声明变量的函数。

# visual-studio-2010 - 在 Silverlight 4 中找不到 PagedCollectionView（再次？是）

> ID：13160369
> 
> 赞同：2
> 
> 时间：2012-10-31T14:36:48.010
> 
> 标签：visual-studio-2010, silverlight, silverlight-4.0, pagedcollectionview

我知道这听起来很多余，但遗憾的是，我在网上找到的这个问题的答案没有帮助我。

我正在运行 Visual Studio 2010，并为我的项目使用 Silverlight 4 SDK（2011 年 4 月版）。（在属性中设置，我仔细检查了）

我确实添加了“使用 System.Windows.Data;” 在我的 .cs 文件的开头。

然而，编译器仍然给我关于我对 PagedCollectionView 的调用的“未找到”错误。

当我键入“System.Windows.Data.”时，补全给了我很多建议，但没有“PagedCollectionView”……我从 P 开始的第一个建议是“PropertyGroupDescription”。

这个有用的工具刚刚从地球表面消失了吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:42:25.063

您需要`System.Windows.Data`为[PagedCollectionView](http://msdn.microsoft.com/en-us/library/system.windows.data.pagedcollectionview%28v=vs.95%29.aspx)添加对程序集的引用。

命名空间`System.Windows.Data`用于多个程序集中，例如`System.Windows`包含`PropertyGroupDescription`

# c# - 打开csv时如何在csv中保留第一个0并另存为Excel

> ID：13160371
> 
> 赞同：0
> 
> 时间：2012-10-31T14:36:52.220
> 
> 标签：c#, excel, csv

我以“姓氏；生日；名字”的格式创建了 csv 文件。生日的格式为 ddmmyyyy（例如 01121989 或 09111983）。

当我在 Excel 中打开它时，它没有显示第一个“0”。

1.  我可以转义此符号以在 Excel 中显示完整日期吗？
2.  当我使用选项“另存为”从 Excel 中保存此文件时，它在生日中丢失了第一个“0”。有可能防止这种情况吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T14:46:14.343

而不是像通常使用数据连接那样打开 csv。

为此，转到您的功能区项目数据>来自文本

浏览到您的 CSV，然后选择打开。现在您将获得一个文本到列的窗口，您可以在其中将特定列属性设置为文本（而不是常规或数字）。这样就可以使用完整的字符集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T14:44:31.927

打开文件后，右键单击列字母（例如`B`）并选择`Format Cells`。然后选择`Custom`，并将格式设置为`00000000`。这会将前导添加`0`到所有缺少的单元格中，当您将其另存为时`.csv`，它也会将前导导出`0`到输出文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T14:42:38.383

这是典型的 Excel。您可以考虑使用单引号：

```
A,'01121989',B 
```

如果您使用程序读取此文件，您可以轻松清除这些单引号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T14:42:27.000

将日期单元格格式化为文本。

右键单击，设置单元格格式，在*类别*下选择文本。

通常，当您在 Excel 中输入某个数字时，您会看到它向右对齐，如果您在文本格式的单元格中输入相同的数字，它将向左对齐，并且开头的任何零都将被保留。

# ios - 如何在任何应用程序中获取当前选定的文本？

> ID：13160374
> 
> 赞同：0
> 
> 时间：2012-10-31T14:37:03.163
> 
> 标签：ios, cocoa-touch

我想从任何应用程序中获取选定的文本。有没有办法将它发送到我的应用程序？在android中有一个分享按钮，但iOS是如何做到的呢？或者还有其他方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:48:36.427

您可以根据需要使用 UIPasteBoard API：[https ://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIPasteboard_Class/Reference.html](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIPasteboard_Class/Reference.html)

但是，由于应用程序在 iOS 上被沙盒化，并且不像您在 Android 开发中习惯的那样打开，因此应用程序无法与每个应用程序进行通信。

# javascript - 如何在没有重定向 url 的情况下验证 instagram？没有服务器

> ID：13160375
> 
> 赞同：6
> 
> 时间：2012-10-31T14:37:19.083
> 
> 标签：javascript, oauth-2.0, client-side, instagram

我正在尝试为 instagram 编写客户端身份验证，但是我想在没有重定向 uri 的情况下这样做，我不会托管服务器。

[https://instagram.com/oauth/authorize/?client_id=CLIENT-ID&redirect_uri=REDIRECT-URI&response_type=token](https://instagram.com/oauth/authorize/?client_id=CLIENT-ID&redirect_uri=REDIRECT-URI&response_type=token)

开发 api 声明这是隐式方式，但是我找不到解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T18:55:33.127

简短的回答是，你不能没有重定向 uri。

这就是 OAuth 的工作原理。您至少需要一个 uri 才能接收访问令牌。不过，可以使用简单的 Web 服务器将 uri 托管在 localhost 上。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-07T06:08:44.347

遵循[客户端（隐式）身份验证](http://instagram.com/developer/authentication/)流程。使用您在 Instagram 开发者门户注册的应用程序的凭据。因此，将 CLIENT-ID 和 REDIRECT-URI 从该 url 更改为您注册应用程序的凭据。

从您的应用程序中，将用户发送到该链接。如果他们接受，他们将被重定向到重定向 uri（它应该在您的应用程序中的某个位置）。在他们被重定向的页面上，该页面将有一个包含访问令牌的哈希。

从 url 获取它并使用它从 instagram api 请求数据。您将需要 jsonp 来处理请求。查看类似线程中[的示例](https://stackoverflow.com/a/10527857/1001094)

# android - Android重复警报调用服务

> ID：13160377
> 
> 赞同：2
> 
> 时间：2012-10-31T14:37:21.333
> 
> 标签：android, android-service

我试图通过后台服务每隔 1 分钟向服务器发送一次 GPS 坐标。它第一次为你调用服务，但不会重复。

设置闹钟的代码：

```
Intent gpsIntent = new Intent(CheckInActivity.this, GoogleMapService.class);
                    gpsPendingIntent = PendingIntent.getService(CheckInActivity.this, 0, gpsIntent, 0);
                    AlarmManager alarmManager_gps = (AlarmManager)getSystemService(ALARM_SERVICE);

                    Calendar calendar_gps = Calendar.getInstance();
                    calendar_gps.add(Calendar.SECOND, 20);
                    alarmManager_gps.setRepeating(AlarmManager.RTC_WAKEUP, calendar_gps.getTimeInMillis(), TimeUnit.MINUTES.toMillis(1), gpsPendingIntent); 
```

服务

```
 public class GoogleMapService extends Service {

private boolean gps_enabled = false;
private boolean network_enabled = false;
private static Location sLocation;   
private LocationManager locManager;
private LocationListener locListener = new MyLocationListener();
private CallBack callback;

@Override
public void onCreate() {

}

@Override
public IBinder onBind(Intent intent) {

    Log.w(null,"GPS Service called");
    locManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
    try {
        gps_enabled = locManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
    } catch (Exception ex) {
    }
    try {
        network_enabled = locManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
    } catch (Exception ex) {
    }

    if (gps_enabled) {
        locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locListener);
    }
    if (network_enabled) {
        locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locListener);
    }

    callback = new CallBack() {

        public void onResult(Boolean result) {
            // TODO Auto-generated method stub

        }

        public void onProgress() {
            // TODO Auto-generated method stub

        }
    };

    return null;
}

@Override
public void onDestroy() {
    super.onDestroy();
}

@Override
public void onStart(Intent intent, int startId) {       
    super.onStart(intent, startId);
}

@Override
public boolean onUnbind(Intent intent) {
    return super.onUnbind(intent);
}

class MyLocationListener implements LocationListener {

    public void onLocationChanged(Location location) {
        if (location != null) {
            // This needs to stop getting the location data and save the battery power.
            locManager.removeUpdates(locListener);
            sLocation = location;
            Model.coordinates = location.getLatitude() + "," + location.getLongitude();
            try{
                SendGPSCoordinatesOperation task = new SendGPSCoordinatesOperation(callback);
                task.execute("");
                Log.w(null,"Sent");
            }
            catch(Exception e){
                Log.w(null,"Couldn't be sent");
            }
            Log.w(null,"The coordinates are"+Model.coordinates);
        }
    }

    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }
}

} 
```

编辑：AndroidManifest 代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:44:27.763

用这个...

```
private void setLocationSendingAlarm() {

        AlarmManager alarmManager = (AlarmManager) getApplicationContext().getSystemService(Context.ALARM_SERVICE);
        Intent intent = new Intent(getApplicationContext(), GoogleMapService.class);
        intent.putExtra("locationSendingAlarm", true);
        PendingIntent   pendingIntent = PendingIntent.getService(this, 987654321, intent,0);
        try {
            alarmManager.cancel(pendingIntent);
        } catch (Exception e) {

        }
        int timeForAlarm=60000;

        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,System.currentTimeMillis()+timeForAlarm, timeForAlarm,pendingIntent);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:42:17.997

```
gpsPendingIntent = PendingIntent.getService(CheckInActivity.this, 0, gpsIntent, PendingIntent.FLAG_UPDATE_CURRENT); 
```

# php - PHP 表单提交和解析

> ID：13160381
> 
> 赞同：2
> 
> 时间：2012-10-31T14:37:23.210
> 
> 标签：php, forms, parsing

我希望使用 PHP 从该站点获取一些随机段落： [http ://watchout4snakes.com/CreativityTools/RandomParagraph/RandomParagraph.aspx](http://watchout4snakes.com/CreativityTools/RandomParagraph/RandomParagraph.aspx)

启动提交按钮（不需要填写文本字段）并仅解析生成的随机文本的最短代码集是什么？

似乎无法让提交作品工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:41:44.427

尝试简单地发布页面。或此网址[http://watchout4snakes.com/CreativityTools/RandomParagraph/RandomParagraph.aspx?_ *VIEWSTATE =％2FwEPDwUINTQyOTcxOTkPZBYCZg9kFgQCAg9kFgICAQ9kFgICAQ9kFgQCBw8PFgIeBFRleHRlZGQCCQ8PFgQfAGUeB1Zpc2libGVoZGQCAw8PFgIfAAU4Q29weXJpZ2h0IDIwMDcgd2F0Y2hvdXQ0c25ha2VzLmNvbS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5kZGTorXr6Gf6R0THMyZRJWZJWtrWHYw％3D％3D＆* _EVENTVALIDATION =％2FwEWBAKs0KOMDAKf643lBALimIbkBQLx2ZbtAfvuWUuGYHixchu％2FJnnxDjXxcnqg＆TMPL％24main％24txtSubject = TMPL％24main％24txtObject = TMPL％24main％ 24btnNew=新建+段落](http://watchout4snakes.com/CreativityTools/RandomParagraph/RandomParagraph.aspx?__VIEWSTATE=/wEPDwUINTQyOTcxOTkPZBYCZg9kFgQCAg9kFgICAQ9kFgICAQ9kFgQCBw8PFgIeBFRleHRlZGQCCQ8PFgQfAGUeB1Zpc2libGVoZGQCAw8PFgIfAAU4Q29weXJpZ2h0IDIwMDcgd2F0Y2hvdXQ0c25ha2VzLmNvbS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5kZGTorXr6Gf6R0THMyZRJWZJWtrWHYw==&__EVENTVALIDATION=/wEWBAKs0KOMDAKf643lBALimIbkBQLx2ZbtAfvuWUuGYHixchu/JnnxDjXxcnqg&tmpl%24main%24txtSubject=&tmpl%24main%24txtObject=&tmpl%24main%24btnNew=New%20Paragraph)

您只需要获取`span.randomSentence`内容。 [这](http://simplehtmldom.sourceforge.net/)可以帮助做到这一点。

**编辑**
我测试过的代码：

```
$url = 'http://watchout4snakes.com/CreativityTools/RandomParagraph/RandomParagraph.aspx?__VIEWSTATE=/wEPDwUINTQyOTcxOTkPZBYCZg9kFgQCAg9kFgICAQ9kFgICAQ9kFgQCBw8PFgIeBFRleHRlZGQCCQ8PFgQfAGUeB1Zpc2libGVoZGQCAw8PFgIfAAU4Q29weXJpZ2h0IDIwMDcgd2F0Y2hvdXQ0c25ha2VzLmNvbS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5kZGTorXr6Gf6R0THMyZRJWZJWtrWHYw==&__EVENTVALIDATION=/wEWBAKs0KOMDAKf643lBALimIbkBQLx2ZbtAfvuWUuGYHixchu/JnnxDjXxcnqg&tmpl%24main%24txtSubject=&tmpl%24main%24txtObject=&tmpl%24main%24btnNew=New%20Paragraph';

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE); 
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.0.3705; .NET CLR 1.1.4322; Media Center PC 4.0)'); 
$c = curl_exec($ch); 
curl_close($ch); 

$p = strpos($c, '<span id="tmpl_main_lblPara" class="randomSentence">');
if ($p !== false) {
    $s = substr($c, $p);
    $pcs = explode('</span>', $s);
    echo $pcs[0];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T16:08:21.543

更灵活的方式 - 动态获取视图状态和事件验证：

```
<?php
$url = 'http://watchout4snakes.com/CreativityTools/RandomParagraph/RandomParagraph.aspx';

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE); 
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.0.3705; .NET CLR 1.1.4322; Media Center PC 4.0)'); 
$c = curl_exec($ch); 
curl_close($ch); 

//__VIEWSTATE
$viewstate = '';

//__EVENTVALIDATION
$eventvalidation = '';

// Fetch VIEWSTATE
$p1 = '<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="';
$p = strpos($c, $p1);
if ($p !== false) {
    $s = substr($c, $p+strlen($p1));
    $pcs = explode('"', $s);
    if (!empty($pcs[0])) {
        $viewstate = $pcs[0];
    }
}

// Fetch EVENTVALIDATION
$p1 = '<input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="';
$p = strpos($c, $p1);
if ($p !== false) {
    $s = substr($c, $p+strlen($p1));
    $pcs = explode('"', $s);
    if (!empty($pcs[0])) {
        $eventvalidation = $pcs[0];
    }
}

// PUT YOUR OBJECT & SUBJECT HERE
$postvalues = array(
    'tmpl$main$txtSubject' => '',
    'tmpl$main$txtObject' => '',
    'tmpl$main$btnNew' => 'New Paragraph',
);

$url = 'http://watchout4snakes.com/CreativityTools/RandomParagraph/RandomParagraph.aspx?__VIEWSTATE='.urlencode($viewstate).'&__EVENTVALIDATION='.urlencode($eventvalidation).'&tmpl%24main%24txtSubject='.urlencode($postalues['tmpl$main$txtSubject']).'&tmpl%24main%24txtObject='.urlencode($postalues['tmpl$main$txtObject']).'&tmpl%24main%24btnNew=New%20Paragraph';

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE); 
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.0.3705; .NET CLR 1.1.4322; Media Center PC 4.0)'); 
$c = curl_exec($ch); 
curl_close($ch); 

$t = '<span id="tmpl_main_lblPara" class="randomSentence">';
$p = strpos($c, $t);
if ($p !== false) {
    $s = substr($c, $p + strlen($t));
    $pcs = explode('</span>', $s);

   echo $pcs[0]; 
} 
```

# python - 您如何查看导入模块中的导入失败？

> ID：13160382
> 
> 赞同：0
> 
> 时间：2012-10-31T14:37:23.427
> 
> 标签：python, python-2.7, portable-applications

我需要制作一个便携式应用程序以放置在设备上，并且我只想放置所需的模块，因此不会有所有标准模块，所以我需要查看我的应用程序需要什么，但如果该模块缺少一些导入，我看不到那是因为它给出了一个错误而没有明确说明该模块中的失败原因：

```
Traceback (most recent call last):
  File "./packaging.py", line 30, in <module>
    import simplejson
ImportError: No module named simplejson 
```

有没有办法查看该模块中的导入究竟失败了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:39:45.560

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:14:46.037

可能是该字符串`/usr/lib/python2.7/dist-packages`不在您的`sys.path`文件夹列表中，因此在尝试导入模块或包时不会搜索它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T14:39:43.427

您可以捕获异常，以了解发生了什么问题并适当地处理它们：

```
try:
   import simplejson
except ImportError:
   print "simplejson module not found"
   #or do something else here, may be install that module 
```

# postgresql - 我的 PostgreSQL 自动在字段值之后插入许多空格字符

> ID：13160388
> 
> 赞同：7
> 
> 时间：2012-10-30T03:37:23.863
> 
> 标签：postgresql

当我在 PostgreSQL 中插入数据时，它会在字段值之后自动插入许多空格。

我很累修复它，但我找不到任何东西

![](../Images/afdc43f3ac706212d4239a9a9c2e3625.png)

例如：我想在“名称”列中插入值“约翰”。它在 John 之后插入空格。

```
->> 'John______________________________________________________________' 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-31T13:23:17.277

`character`是一种不应该使用的糟糕数据类型。这只是原因之一。请参阅[字符类型 - postgresql 手册](http://www.postgresql.org/docs/current/interactive/datatype-character.html)。

将这些字段更改为`text`或`varchar(n)`。`text`在`check`需要的地方限制长度通常是最好的选择。

```
ALTER TABLE thetable ALTER COLUMN colname TYPE text; 
```

顺便说一句，如果您发布 SQL 和 - 最好 - 运行该 SQL 的输出，它会更容易回答您的问题`psql`，这会产生可复制和粘贴的纯文本输出。

# proxy - 如何配置 gearman_proxy 来处理 worker 和 gearmand 之间的入站流？

> ID：13160399
> 
> 赞同：1
> 
> 时间：2012-10-31T14:37:44.817
> 
> 标签：proxy, gearman

我们配置了一个集中的 Nagios / Mod_Gearman 和多个 Gearman 工作人员来监控我们的服务器。我需要监控在远程站点上部署 Gearman 工作人员的远程服务器。但是，出于安全原因，我想颠倒这些工人和 neb 模块之间的初始连接方向（禁止从工人到我们网络的非通信流）。Gearman 代理似乎是解决方案，因为它只是将工作从“中央”齿轮指令放入另一个齿轮指令。

我想知道是否可以配置 gearman 代理以将信息发送到远程 gearmand 并从中获取检查结果而无需打开入站流？

不幸的是，该文档没有提供有关此的用例。你知道我能找到更多关于 gearman 代理配置的文档吗？

# c# - 在 C# 中与 C/C++ 例程交互会导致 rip

> ID：13160404
> 
> 赞同：4
> 
> 时间：2012-10-31T14:37:54.077
> 
> 标签：c#, dll, pinvoke, dllimport, interopservices

我有一个供应商的 API 调用，我想在我的 C# [Windows 窗体](http://en.wikipedia.org/wiki/Windows_Forms)应用程序中使用它。问题是，无论我尝试什么[P/Invoke](http://en.wikipedia.org/wiki/Platform_Invocation_Services)，我都会在线路上崩溃，说明调用使堆栈不平衡。我尝试与供应商合作，但他们没有 Visual Studio 2012，也没有任何 C# 或[.NET](http://en.wikipedia.org/wiki/.NET_Framework)经验，经过几次来回电子邮件，他们基本上解决了问题。

这是他们的官方 C/C++ 声明

```
const char *<dll name here>(int Param1,
                            const char *Param2,
                            const char *Param3,
                            unsigned long Param4,
                            unsigned short Param5,
                            unsigned short Param6,
                            unsigned short Param7,
                            unsigned short Param8,
                            unsigned short Param9); 
```

这是我尝试过的最近的 P/Invoke DLLImport 行。

```
[System.Runtime.InteropServices.DllImport(
    "<dll name here>", EntryPoint = "<AnsiFunctionName>", ExactSpelling = true,
    CharSet = System.Runtime.InteropServices.CharSet.Ansi, SetLastError = true)]
public static extern String <AnsiFunctionName>(int Param1,
                                               String Param2,
                                               String Param3,
                                               ulong Param4,
                                               Int16 Param5,
                                               Int16 Param6,
                                               Int16 Param7,
                                               Int16 Param8,
                                               Int16 Param9); 
```

这是实际的错误消息：

> 主题行：检测到 PInvokeStackImbalance
> 
> 调用 P/Invoke 函数 '' 使堆栈失衡。这可能是因为托管 PInvoke 签名与非托管目标签名不匹配。检查 P/Invoke 签名的调用约定和参数是否与目标非托管签名匹配。

我尝试了各种方法，甚至设置了一个 void 返回类型。我尝试不使用返回类型。我尝试代替 Strings、StringBuilders 和 IntPtrs。无论我尝试了什么，都没有任何效果。

在阅读 Stack Overflow 上的一篇文章后，我向供应商提到返回字符串是危险的，永远不应该这样做。他们的回应是：

> *“该页面上提到的字符串返回问题不适用于我们的函数。它们返回指向静态分配字符串的指针，因此您不需要释放它（并且不能尝试这样做）。看起来像“UnmanagedType.LPStr”应该可以工作（尽管 IntPtr 的东西也应该可以工作，通过适当的转换或转换）。*

更新#1：正如评论中提到的，在这篇文章之前，我一直在使用 uint，而不是 ulong。我只是认为我让比较看起来更好。uint 和 ulong 都不起作用。

更新 #2：也许给出实际的函数名称会有所帮助。它是犰狳 CreateCodeShort3A。展望未来，我使用的是纯 .NET，但我仍然需要与之交互，只是目前还不太可能。不仅如此，这个问题让我很好奇为什么我不能解决像 P/Invoke 这样看似简单的问题。毕竟，有多少种变化？（不是一个严肃的问题）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:15:44.947

以下是我可以看到的可能性：

1.  返回值不应该是`String`. 使用`IntPtr`并转换为字符串`Marshal.PtrToStringAnsi`。
2.  C++ 类型`unsigned long`应与`uint`. 您`ulong`在 C# 中使用了 64 位类型。在 Windows 上的 C++ 中，`unsigned long`是无符号的 32 位类型。
3.  C++ 类型`unsigned short`应与`ushort`.
4.  C++ DLL 使用的调用约定可能是`cdecl`. 添加`CallingConvention = CallingConvention.Cdecl`到您的[P/Invoke](http://en.wikipedia.org/wiki/Platform_Invocation_Services)。
5.  不要`SetLastError`用于这样的功能。这与通过返回错误条件的 Win32 API 函数一起使用`GetLastError`。这个 DLL 文件几乎可以肯定没有。

所以 P/Invoke 应该看起来像这样：

```
[DllImport(@"mydll.dll", CallingConvention=CallingConvention.Cdecl)]
public static extern IntPtr FunctionName(
    int Param1, 
    string Param2, 
    string Param3, 
    uint Param4, 
    ushort Param5, 
    ushort Param6, 
    ushort Param7, 
    ushort Param8, 
    ushort Param9
); 
```

# c# - 在 asp.net mvc3 中使用 dotnet high 图表向样条图添加多个系列

> ID：13160405
> 
> 赞同：1
> 
> 时间：2012-10-31T14:37:56.027
> 
> 标签：c#, asp.net-mvc, charts, highcharts, dotnethighcharts

我正在使用 dotnet 高图表和 asp.net mvc3。我在向样条图添加多个系列时遇到问题。

这段代码基本上每秒更新一次图表。

这适用于一个数据系列。但我需要添加多个数据系列。

请帮助我为此代码添加多个系列。

提前致谢

```
public ActionResult SplineUpdateEachSecond()
{
     List<object> points = new List<object>(20);
     DateTime now = DateTime.Now;
     Random rand = new Random();
     for (int i = -19; i <= 0; i++)
          points.Add(new { X = now.AddSeconds(i), Y = rand.NextDouble() });

     Highcharts chart = new Highcharts("chart")
            .SetOptions(new GlobalOptions { Global = new Global { UseUTC = false } })
            .InitChart(new Chart
                       {
                           DefaultSeriesType = ChartTypes.Spline,
                           MarginRight = 10,
                           Events = new ChartEvents
                                    {
                                        Load = "ChartEventsLoad"
                                    }
                       })
            .AddJavascripFunction("ChartEventsLoad",
                                  @"// set up the updating of the chart each second
                                   var series = this.series[0];
                                   setInterval(function() {
                                      var x = (new Date()).getTime(), // current time
                                         y = Math.random();
                                      series.addPoint([x, y], true, true);
                                   }, 1000);")
            .SetTitle(new Title { Text = "Live random data" })
            .SetXAxis(new XAxis
                      {
                          Type = AxisTypes.Datetime,
                          TickPixelInterval = 150
                      })
            .SetYAxis(new YAxis
                      {
                          Title = new YAxisTitle { Text = "Value" },
                          PlotLines = new[]
                                      {
                                          new YAxisPlotLines
                                          {
                                              Value = 0,
                                              Width = 1,
                                              Color = ColorTranslator.FromHtml("#808080")
                                          }
                                      }
                      })
            .SetTooltip(new Tooltip { Formatter = "TooltipFormatter" })
            .AddJavascripFunction("TooltipFormatter",
                                  @"return '<b>'+ this.series.name +'</b><br/>'+
                                   Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', this.x) +'<br/>'+ 
                                   Highcharts.numberFormat(this.y, 2);")
            .SetLegend(new Legend { Enabled = false })
            .SetExporting(new Exporting { Enabled = false })
            .SetSeries(new Series
                       {
                           Name = "Random data",
                           Data = new Data(points.ToArray())
                       });

        return View(chart);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:52:30.770

[这里](http://dotnethighcharts.codeplex.com/releases/view/85324)有例子。

假设，有一个类返回如下系列：

```
public class ChartsData
{
     //public static Series Hestavollane
     //public static Series Voll 
} 
```

第一个系列：

```
public static Series Hestavollane = new Series
                                    {
                                        Name = "Hestavollane",
                                        Data = new Data(new object[]
                                                       {
                                                            4.3, 5.1, 4.3, 5.2, 5.4, 4.7, 3.5, 4.1, 5.6, 7.4, 6.9, 7.1,
                                                            7.9, 7.9, 7.5, 6.7, 7.7, 7.7, 7.4, 7.0, 7.1, 5.8, 5.9, 7.4,
                                                            8.2, 8.5, 9.4, 8.1, 10.9, 10.4, 10.9, 12.4, 12.1, 9.5, 7.5,
                                                            7.1, 7.5, 8.1, 6.8, 3.4, 2.1, 1.9, 2.8, 2.9, 1.3, 4.4, 4.2,
                                                            3.0, 3.0
                                                       })
                                    }; 
```

第二系列：

```
public static Series Voll = new Series
                            {
                                Name = "Voll",
                                Data = new Data(new object[]
                                                {
                                                    0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.1, 0.0, 0.3, 0.0,
                                                    0.0, 0.4, 0.0, 0.1, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
                                                    0.0, 0.6, 1.2, 1.7, 0.7, 2.9, 4.1, 2.6, 3.7, 3.9, 1.7, 2.3,
                                                    3.0, 3.3, 4.8, 5.0, 4.8, 5.0, 3.2, 2.0, 0.9, 0.4, 0.3, 0.5, 0.4
                                                })
                            }; 
```

应用于图表

```
.SetSeries(new[] { ChartsData.Hestavollane, ChartsData.Voll }) 
```

# iphone - iOS 6 中不推荐使用方向

> ID：13160407
> 
> 赞同：5
> 
> 时间：2012-10-31T14:37:59.383
> 
> 标签：iphone

看起来 avcapturevideopreviewlayer 的方向在 iOS 6 中已被贬低。有人知道新代码吗？这是我当前（折旧）的代码：

```
[self setPreviewLayer:[[AVCaptureVideoPreviewLayer alloc] initWithSession:[self captureSession]]];
[[self previewLayer] setVideoGravity:AVLayerVideoGravityResizeAspectFill];
previewLayer.orientation = UIInterfaceOrientationLandscapeRight; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-31T14:54:01.970

你检查过文档吗？只有一行：

> 图层的方向。（在 iOS 6.0 中已弃用。请改用[videoOrientation](http://developer.apple.com/library/ios/#Documentation/AVFoundation/Reference/AVCaptureConnection_Class/Reference/Reference.html#//apple_ref/occ/instm/AVCaptureConnection/videoOrientation) (AVCaptureConnection)。）

所以使用：

```
[[AVCaptureVideoPreviewLayer connection] setVideoOrientation: AVCaptureVideoOrientationLandscapeRight]; 
```

或者

```
AVCaptureVideoPreviewLayer.connection.videoOrientation= AVCaptureVideoOrientationLandscapeRight; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-07T09:27:17.877

我尝试使用 videoOrientation(AVCaptureConnection) 而不是已弃用的方向(AVCaptureVideoPreviewLayer)，但它不再旋转视频预览。

我替换了这个：

```
AVCaptureVideoPreviewLayer *previewLayer = ...;
previewLayer.orientation = AVCaptureVideoOrientationLandscapeRight; 
```

有了这个：

```
AVCaptureVideoPreviewLayer *previewLayer = ...;
previewLayer.connection.videoOrientation = AVCaptureVideoOrientationLandscapeRight; 
```

但它没有旋转视频预览。问题是我在将 AVCaptureDeviceInput 添加到我的 AVCaptureSession 之前添加并修改了 AVCaptureVideoPreviewLayer。因此我的 AVCaptureVideoPreviewLayer 的连接为空。解决方案是在我将 AVCaptureDeviceInput 添加到我的 AVCaptureSession 之后添加 AVCaptureVideoPreviewLayer。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-05T02:50:20.123

就像@Nikolai 发布的那样，请改用 AVCaptureVideoPreviewLayer 的连接`videoOrientation`属性。

（我再次发布这个的原因是因为他的代码可能有点混乱，因为它看起来像是`connection`一个类方法。希望这个例子能说明问题。）

替换以下内容：

```
AVCaptureVideoPreviewLayer *previewLayer = ...;
previewLayer.orientation = UIInterfaceOrientationLandscapeRight; 
```

和：

```
AVCaptureVideoPreviewLayer *previewLayer = ...;
previewLayer.connection.videoOrientation = AVCaptureVideoOrientationLandscapeRight; 
```

# android - 使用引用 JAXBContext 的 API 创建 Android 应用程序

> ID：13160412
> 
> 赞同：2
> 
> 时间：2012-10-31T14:38:11.973
> 
> 标签：android, jaxb

我是一名计算机科学本科生，我正在创建一个使用 API 与执行服务器交互的 Android 应用程序。

服务器获取一个 xml 文件并对其进行各种处理（获取数据、处理数据等），然后将数据作为输出返回。输入和输出都通过此 API 进行交换。

问题是 API 引用`javax.xml.bind`了例如 JAXBContext 中的代码，而 android 的核心中没有 javax.xml.bind 包。（一个众所周知的问题）

互联网上可行的解决方案似乎正在重新打包我需要的代码，但我不知道到底应该是什么。

由于 和 中的 API 引用类`javax.xml.bind`，`javax.net`我想我必须从这两个包中提取代码并使其成为 API 的一部分*（我可以访问 API 源）*，然后重新打包 API。但是，我猜**javax.xml.bind 中的类可能依赖于 Android 不支持的其他类，** javax.net 也是如此。（如果这是愚蠢的想法，请原谅我......）

所以有人知道**：**是否有类，javax.xml.bind 和 javax.net 中的哪些代码取决于，android 不支持？

真的有点棘手的问题..

**如果您能提供一种解决方法，使 Android 应用程序能够调用引用 javax.xml.bind 中的代码的 API，**我将不胜感激。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T19:13:09.237

试试 JiBX (http://jibx.sourceforge.net/)，它是一个体积小、速度快、兼容 Android 的 XML 绑定框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T23:05:25.753

我最终重新打包了那些存在于标准 Java 库中但不存在于 Android 中的包。基本上，只需获取所有丢失包的源代码，然后将它们放入 API 源并将它们重命名为与原始名称不同的名称，然后更改 API 中引用这些方法的相应代码（您必须使用不同的名称，否则这些包中的代码引用方法仍会在核心库中查找方法（即 Android API）

无论如何，希望它有所帮助。如果你有同样的问题。

如果你有更好的建议。请分享！**

# python - Python“模块”对象没有属性错误-导入的模块

> ID：13160419
> 
> 赞同：0
> 
> 时间：2012-10-31T14:38:28.490
> 
> 标签：python, django, dnspython

我在我的 Django 项目中导入和使用 Python 的 dnspython 或 easyzone 模块时遇到问题。我也在 DJango 之外尝试过这个脚本，但也遇到了同样的问题，所以我很确定这个问题与框架无关。

我有一个简单的脚本，可以打开并解析里面的 dns 记录的区域文件。我在导入 easyzone 或 dns 模块时没有问题，但是当我尝试访问其中的任何方法时，我收到此错误：

```
Traceback (most recent call last):
    File "fabfile.py", line 6, in <module>
    z = easyzone.zone_from_file('example.com', '/var/namedb/example.com')
AttributeError: 'module' object has no attribute 'zone_from_file' 
```

我已经安装了 dnspython 并通过 easy_install 轻松安装，没有任何问题。我可以在脚本顶部导入模块而不会出错，它甚至会在 IDE 帮助程序中向我显示库的路径。但是，当尝试访问 easyzone 或 dns 中的任何方法时，我得到一个错误，IDE 上的代码完成也不会列出任何方法，这让我相信这是一个路径问题或我是如何导入它们的。

这是我失败的代码：

```
import os
import csv
import easyzone
import dns

z = easyzone.zone_from_file('example.com', '/var/namedb/example.com') 
```

查看代码中的模块内部，我可以清楚地看到这些方法存在，我做错了什么无法访问它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:40:30.627

您需要更正导入；来自开发者[源代码托管主页](https://bitbucket.org/chrismiles/easyzone/)：

```
from easyzone import easyzone
z = easyzone.zone_from_file('example.com', '/var/namedb/example.com') 
```

# php - 在 PHP 脚本中，连接/发送查询到数据库时应该如何处理异常？

> ID：13160420
> 
> 赞同：2
> 
> 时间：2012-10-31T14:38:31.800
> 
> 标签：php, mysql, database, exception, pdo

以下是我可能的解决方案：

1)`exit()`用于终止脚本。（问题：影响整个页面内容的加载，而不仅仅是来自数据库的数据）

2）在页面中嵌入一个`<div>`元素，专门用于显示可能的异常。

标准方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T14:42:37.730

如何处理数据库中的异常并没有真正的“标准”方法。这完全取决于具体的用例。例如，如果在第一种情况下无法建立数据库连接，则可能适合重定向到错误页面并立即向站点管理员发送电子邮件通知。另一方面，如果您无法执行单次插入（无论出于何种原因），则通知用户他们正在尝试的操作无法完成并要求他们再试一次*可能更合适。*

异常本质上是一种让*您*（而不是您正在使用的编程语言或库）决定在出现问题时如何处理的方式。几乎总是，您会想要记录错误，然后由您决定最合适的响应。

也就是说，处理异常的适当方式是在您的应用程序中最有意义的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T21:59:43.970

选项 1) 不整洁，因为它提供了糟糕的用户体验

选项 2) 是首选。

使用 PDO，以下代码将显示异常并将其与时间戳一起存储。

```
try {  
    $dbh = new PDO("mysql:host=$host;dbname=$database", $username, $password);  
    $dbh->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );  
    $stmt = $dbh->prepare("INSERT INTO table ( column ) values ( value )");  
    $stmt->execute(); 
    }  
catch(PDOException $e) {  
    echo "I'm sorry I'm afraid you can't do that.". $e->getMessage() ;// Remove or modify after testing 
    file_put_contents('PDOErrors.txt',date('[Y-m-d H:i:s]'). $e->getMessage()."\r\n", FILE_APPEND);  
} 
```

在测试后的生产站点上，应将 echo 语句修改为

```
echo "I'm sorry I'm afraid you can't do that."; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T04:47:55.913

I was faced with the same problem in my project. First, I thought of a solution similar to that of [david strachan](https://stackoverflow.com/users/1211934/david-strachan), but eventualy I realized that this solution was not complete. I still need to have the debug information, but those should not be displayed to the user.

I came up with a solution that displayes to the user a message stating "System error, please try again, if the error persists, then please contact support". And also, at the same time, the error message is logged to an error-log file.

Here are the details:

```
function logException ($exception) {

    // Construct the error message to add to the log file
    $logDate = date("l, F j, Y  H:i:s");            
    $logMessage = "Date: " . $logDate . "\n";
    $logMessage = $logMessage . "Error Message: ". $exception->getMessage() . "\n";
    $logMessage = $logMessage . "Error Code: ". $exception->getCode() . "\n";
    $logMessage = $logMessage . "Error File: ". $exception->getFile() . "\n";
    $logMessage = $logMessage . "Error Line: ". $exception->getLine() . "\n";
    $logMessage = $logMessage . "Error Trace:\n". $exception->getTraceAsString() . "\n";
    $logMessage = $logMessage . "\n\n**************************************" . "\n\n\n";

    // Construct a log file name similar to the name of the script file that cause the error
    $info = pathinfo($exception->getFile());
    $extension = "." . $info["extension"];
    $logFile =  "../logs/" .  basename($exception->getFile(), $extension) . ".log";

    // Add the error message to the log file            
    error_log($logMessage, 3, $logFile);

    // Message to return to the user
    $errorMessage = "System error, please try again, if the error persists, then please contact support.";

    return $errorMessage;
} 

try {  
    $dbh = new PDO("mysql:host=$host;dbname=$database", $username, $password);  
    $dbh->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );  
    $stmt = $dbh->prepare("INSERT INTO table ( column ) values ( value )");  
    $stmt->execute(); 
}  

// Catching all sorts of errors, including PDO errors
catch (Exception $e) {
    $message = logException ($e);
    $data['message'] = $message;
    $data['isSuccessful'] = false;
} 
```

Please note the following:

1.  The error message is saved to a log file
2.  The log file is saved to a logs folder. The name of the log file is derived from the name of the file that generated the error. For example, if the file that caused the error is called "script.php", then the log file will be called "script.log" and will be saved inside the logs folder.
3.  The catch statement is catching all sorts of exceptions, and is not only restricted to PDO errors.

Now, you have a problem, what if you would like to throw an exception that would like the user to see (for example, you would like to throw an exception such as "This is wrong, try agian")? Well, I did come up with a solution that is extended over this one, but it is out of your questoin. But if you still would like to know, then please let me know.

Cheers.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T14:43:15.737

您应该在日志文件中记录您的异常，并使用它来分析出了什么问题。但是从用户的角度来看，您应该向他们展示友好的陈述，例如“抱歉您的请求无法处理”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T14:43:11.727

try - catch 是我在 php 中处理异常的标准方式......如下所示：[PHP EXCEPTIONS](http://php.net/manual/en/language.exceptions.php)

```
try{
    some code here
}catch(Exception $e){
    failed response here
} 
```

编辑详细说明：这只是捕获异常的一种方法。当一个人被抓住时该怎么办是留给开发商的价值判断。如果这是问题所在，我很抱歉。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T14:44:06.097

您必须找到自己的方法来捕获错误。我正在使用

```
try { QUERY } catch(Exception $e) { Log and display error } 
```

# c# - 同时编译32bit和64bit项目

> ID：13160422
> 
> 赞同：1
> 
> 时间：2012-10-31T14:38:34.703
> 
> 标签：c#, visual-studio-2010, compilation

我使用 Visual Studio 2010 并遇到问题。我有一个包含 15 个或更多项目的解决方案，其中一些只能编译为 64 位，其他只能编译为 32 位。例如

我的解决方案

*   我的客户
*   我的客户端框架
*   我的服务器
*   我的服务器框架
*   我的实用程序...

MyClient 引用 MyClientFramework 和 MyUtils 并且应该编译为 32 位。MyServer 引用 MyServerFramework 和 MyUtils 并且应该编译为 64 位。实际我只能编译64位项目，然后更改配置编译32位项目。我想同时编译和调试整个解决方案。*.csproj 文件必须如何配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:42:13.110

按钮下方有一个`Batch Build`条目`Build`，您可以使用它。它将提供选择所需的项目和配置。缺点是`Batch Build`不允许添加新条目，因此如果您需要同一项目的 32 位和 64 位实例，您可能需要`msbuild`直接从命令行调用并指定项目和所需的目标（请参阅此处的参考[http ://msdn.microsoft.com/en-us/library/vstudio/ms164311.aspx](http://msdn.microsoft.com/en-us/library/vstudio/ms164311.aspx)）。

# flash - 在 Flash 中使用内置 Like

> ID：13160425
> 
> 赞同：-1
> 
> 时间：2012-10-31T14:38:40.193
> 
> 标签：flash, facebook-like, facebook-opengraph, built-in

使用新的 Open Graph API，是否可以在 Flash 中创建点赞按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:53:47.460

我认为这已经有一段时间了。例如： http: [//labs.byhook.com/2010/08/03/facebook-like-button-in-flash/](http://labs.byhook.com/2010/08/03/facebook-like-button-in-flash/)

API 有一个 AS3 包装器（基本上是一组通过 ExternalInterface 调用 JS API 的 AS 对象）。你可以在这里得到它：[http ://code.google.com/p/facebook-actionscript-api/](http://code.google.com/p/facebook-actionscript-api/)

该页面上的链接也很有用：

[http://www.adobe.com/devnet/facebook](http://www.adobe.com/devnet/facebook)

[http://developers.facebook.com/](http://developers.facebook.com/)

[http://groups.google.com/group/facebook-actionscript-api](http://groups.google.com/group/facebook-actionscript-api)

很难找到 AS3 API 的最新示例，因此值得记住的是，它只是 JS 版本的包装，可以很容易地在 Google 上搜索其教程。

# java - 拉取数据 jsoup

> ID：13160428
> 
> 赞同：0
> 
> 时间：2012-10-31T14:38:50.320
> 
> 标签：java, jsoup

我正在尝试使用 jsoup 打印拉出“10 - 50”的文本，但我似乎无法正确拉出它。这是HTML代码：

```
 <dd>
        <time itemprop="datePublished">21 October 2012</time>
       </dd>
       <dt>
        Current Version:
       </dt>
       <dd itemprop="softwareVersion">
        1.0
       </dd>
       <dt itemprop="operatingSystems" content="Android">
        Requires Android:
       </dt>
       <dd>
        2.3.3 and up
       </dd>
       <dt>
        Category:
       </dt>
       <dd>
        <a href="xxx">Entertainment</a>
       </dd>
       <dt>
        Installs:
       </dt>
       <dd itemprop="numDownloads">
        10 - 50
        <div class="normalized-daily-installs-chart" style="width: 105px;">
         <img src="xxx" />
         <p>last 30 days</p>
        </div>
       </dd>
       <dt>
        Size:
       </dt>
       <dd itemprop="fileSize">
        12M
       </dd> 
```

我试过这段代码，但它打印“1.0 10 - 50 last 30 days 12M €0.69 Everyone”

```
import java.io.IOException;
import java.io.InputStream;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

public class googletest {
    public static void main(String[] args) throws IOException {

        Document doc = Jsoup
                .connect("private url"
                        )
                .get();
        Elements spans = doc.select("dd[itemprop]");
        System.out.println(spans.text());

    }

} 
```

我只是想单独打印字符串 10 - 50 没有其他值，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:52:34.390

我看到两个问题。首先，您需要加强您的选择表达式，以便它只返回 itemprop 等于 numDownloads ex的元素`[itemprop=numDownloads]` 现在您的`spans`变量应该有一个只有一个元素的元素集合。您可以使用 访问此元素 `spans.first()` 一旦您拥有一个元素，您可以使用该`ownText()`方法返回作为该元素的直接子元素的文本（避免任何其他子元素的文本）。

```
public class googletest {
    public static void main(String[] args) throws IOException {

        Document doc = Jsoup
                .connect("private url"
                        )
                .get();
        Elements spans = doc.select("dd[itemprop=numDownloads]");
        System.out.println(spans.first().ownText());

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:50:18.150

请试试

```
Element dts = doc.select("dd[itemprop]").get(0);
   System.out.println(dts.text()); 
```

# apache-flex - ActionScript Workers 可以用来做数据库操作吗？

> ID：13160430
> 
> 赞同：1
> 
> 时间：2012-10-31T14:38:54.860
> 
> 标签：apache-flex, sqlite, actionscript

我正在 AIR 中编写一个非常繁重的应用程序。我设法克服了所有内存泄漏问题。但是由于后台数据库操作（同步），性能会下降。

我的问题是我可以使用 ActionScript Workers 来执行此类后台任务吗？

谢谢，英德拉吉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-02T04:49:26.247

当然可以。但是您需要注意的一件事是您需要在 Worker 中创建、`File`或与数据库文件相关的任何其他实例。在其他地方创建它们然后将它们传递给工人会麻烦你。`SQLConnection``ByteArray`

如果您还在寻找一种使用 ActionScript 工作者的简单方法，您可能会发现这个库也很有帮助。[https://github.com/myflashlab/easyAS-Worker](https://github.com/myflashlab/easyAS-Worker)

# parsing - 在服务器上解析与在 localhost 上解析

> ID：13160432
> 
> 赞同：0
> 
> 时间：2012-10-31T14:39:15.963
> 
> 标签：parsing

这是我的代码：

```
if (amount != -1)
    returnJson.Add("<p style=\"color: black;\">" + double.Parse(res_q.Replace(",", ".")) * amount + " " + res_i + "</p>");
else
    returnJson.Add("<p style=\"color: black;\">" + res_q + " " + " ") + res_i + "</p>"); 
```

并且无论程序执行到 if 还是 else，如果 res_q="1,5"，这将在服务器上返回 15，在本地返回 1.5。

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:11:37.000

问题在于逗号。

我想在我的程序中应用全球化。使用 CultureInfo.InvariantCulture 是我需要的答案。或者简单地用点替换逗号。

# javascript - 您如何读取分配给 AngularJS 指令的值

> ID：13160434
> 
> 赞同：19
> 
> 时间：2012-10-31T14:39:21.297
> 
> 标签：javascript, angularjs

我有一个角度指令，它是一个自定义属性，可能包含如下值：

```
<div my-directive="myVal"></div> 
```

如何从指令的链接函数中读取 myVal（作为字符串）？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-31T14:49:25.630

传递的值位于作为第三个参数传递给链接函数的属性对象上。它位于与指令名称匹配的属性下。

```
app.directive('myDirective', function() {
   return {
       restrict: 'A',
       link: function(scope, elem, attr) {
            //read the passed value
            alert(attr.myDirective);
       }
   }
}); 
```

# javascript - 将历史状态替换为同一路径后，Javascript 使用哈希重定向

> ID：13160438
> 
> 赞同：2
> 
> 时间：2012-10-31T14:39:34.857
> 
> 标签：javascript, redirect, backbone.js

我有两个同时发生的主干模型更改事件：

1.  `change:path`替换当前历史状态并修补页面上的一些链接，
2.  `change:language`应该使用额外的哈希重定向到新路径

重定向应该取代替换状态，但如果提供了散列，则不会发生这种情况。我正在尝试让它在 Chrome 中工作。

此代码不会重定向：

```
// in change:path event
window.history.replaceState({state: 1}, "", "/new_path");

// in change:language event
window.location.replace("/new_path#hash"); 
```

但是没有哈希它可以按预期工作：

```
// in change:path event
window.history.replaceState({state: 1}, "", "/new_path");

// in change:language event
window.location.replace("/new_path"); 
```

有没有办法让它与哈希一起工作？我知道我可以添加一些时间戳来使新 url 完全不同，但我希望 url 是干净的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:05:45.263

我设法以一种不太干净的方式解决了它，但我仍在寻找更好的解决方案：

```
// change:path event
window.history.replaceState({state: 1}, "", "/new_path");

// change:language event
setTimeout(function(){
  // make sure it runs after replaceState in change:path
  window.history.replaceState({}, "", "/"); 
  window.location.replace("/new_path#hash");
}, 10); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:06:48.280

看起来最好的方法是不使用该`replace`方法，而只是将位置设置为一个整体。像这样：

```
window.location.href = 'http://www.sitename.com/new_path#hash'; 
```

# ruby-on-rails - 如何删除活动记录查询中的引号

> ID：13160441
> 
> 赞同：3
> 
> 时间：2012-10-31T14:39:42.657
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试根据使用以下查询的 id 集合从多个表中检索记录，它工作正常。

**活动记录查询：**

> Song.order("songs.id desc"). 包括（：艺术家）。包括（：专辑）。joins("LEFT JOIN 艺术家 ON song.artist_id = Artists.id"). joins("LEFT JOIN 专辑 ON song.album_id = albums.id"). 在哪里（“（歌曲.id）
> 
> > IN (#{song_ids*','})
> 
> AND (LOWER(songs.title) LIKE :term OR LOWER(artists.name) LIKE :term OR LOWER(albums.title) LIKE :term)", :term => "%#{terms[index].downcase}% ")

**PG查询输出：**

> SELECT "songs".* FROM "songs" LEFT JOIN 艺术家 ON song.artist_id = Artist.id LEFT JOIN 专辑 ON song.album_id = albums.id WHERE (
> 
> > (songs.id) IN (4,5,28,37,46,48)
> 
> AND (LOWER(songs.title) LIKE '%wo%' OR LOWER(artists.name) LIKE '%wo%' OR LOWER(albums.title) LIKE '%wo%')) ORDER BY song.id desc

但是，当我尝试将查询修改为以下活动

**记录查询时：**

> Song.order("songs.id desc"). 包括（：艺术家）。包括（：专辑）。joins("LEFT JOIN 艺术家 ON song.artist_id = Artists.id"). joins("LEFT JOIN 专辑 ON song.album_id = albums.id"). 在哪里（“（歌曲.id）
> 
> > 在 (:song_ids)
> 
> AND (LOWER(songs.title) LIKE :term OR LOWER(artists.name) LIKE :term OR LOWER(albums.title) LIKE :term)",

```
 :term => "%#{terms[index].downcase}%",:song_ids => song_ids*',') 
```

**PG查询输出：**

> SELECT "songs".* FROM "songs" LEFT JOIN 艺术家 ON song.artist_id = Artist.id LEFT JOIN 专辑 ON song.album_id = albums.id WHERE (
> 
> > (songs.id) IN ('4,5,28,37,46,48')
> 
> AND (LOWER(songs.title) LIKE '%wo%' OR LOWER(artists.name) LIKE '%wo%' OR LOWER(albums.title) LIKE '%wo%')) ORDER BY song.id desc

由于单引号，上述查询不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T01:23:00.660

尝试替换`:song_ids => song_ids*','`为`:song_ids => song_ids`.

在您的原始代码中，您将 song_ids 转换为字符串，该字符串被转义，并用单引号表示它是一个字符串。这仅将数组作为参数传递，rails 将发挥作用并将其转换为类似 4,5,28,37,46,48 的内容（您仍然需要括号）。

# php - PHP远程图像在浏览器中打开但imagecreatefromgif：无法打开流：操作失败

> ID：13160451
> 
> 赞同：1
> 
> 时间：2012-10-31T14:40:10.540
> 
> 标签：php

我经营一个购物网站，并试图将此远程 gif 图像的副本以 jpg 格式保存到我的服务器。

```
$i='http://www.medexsupply.com/images/RO1R910C.GIF';

$imagejpg = imagecreatefromgif($i); 
```

它给出了以下错误：

```
Warning: imagecreatefromgif(): Couldn't resolve host name in /home/xxxxx/public_html/xxxxxxx/file.php on line 46

Warning: imagecreatefromgif(http://www.medexsupply.com/images/RO1R910C.GIF): failed to open stream: operation failed in /home/xxxxx/public_html/xxxxxxx/file.php on line 46 
```

在第 46 行，代码是 `$imagejpg = imagecreatefromgif($i);`

我有 128MB 内存限制的专用服务器，用于 php 脚本。

allow_url_fopen 已打开。

我可以修改服务器上的任何设置。

我可以复制数千个其他远程图像，但不能复制此图像和其他一些站点的图像。

有人可以帮忙吗。

如果您想了解更多信息，请回复。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:48:14.943

There is a DNS issue with your domain, which explains the "could not resolve host" message.

From my browser, I can access your images. Yet from a different machine, I get:

```
$ dig www.medexsupply.com

; <<>> DiG 9.7.3 <<>> www.medexsupply.com
;; global options: +cmd
;; connection timed out; no servers could be reached 
```

At this point in time, it could be possible that Sandy is the cause, as I see you are hosted with Rackspace in New York and, from the machine that gave the error above, I cannot ping their nameservers.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:51:25.163

[如果fopen 包装器](http://www.thaicreate.com/php-manual/filesystem.configuration.html#ini.allow-url-fopen)已启用，则 URL 可以用作具有此功能“imagecreatefromgif”的文件名。有关如何指定文件名和支持的协议/包装器[列表的更多详细信息，请参阅 fopen() 以获取支持的 URL 协议列表](http://www.thaicreate.com/php-manual/wrappers.html)。

# java - Ant 用 [java] 为我的标准输出添加前缀

> ID：13160452
> 
> 赞同：3
> 
> 时间：2012-10-31T14:40:14.673
> 
> 标签：java, ant, stdout

我有一个简单的 Java 应用程序，它由 Ant 脚本构建和执行。

当我`System.out.println("x")`在代码中说时，会有以下输出：

```
...
run:
    [java] x
... 
```

我想要的只是：

```
...
run:
x
... 
```

没有前缀`[java]`。

* * *

*首屏下方：*

我知道有开关`-emacs`（愚蠢的名字，顺便说一句）。但是，这也会删除所有其他`[...]`前缀 - 在类似`clean`or的任务中`compile`。我想保留这些，并且我希望在 Ant 脚本中进行更改，而不是在 Ant 开关中。

相关的 Ant 代码为：

```
 <target name="run" depends="jar">
        <java fork="true" jar="MyCoolProgram.jar"/>
    </target> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T02:30:25.397

ANT 使用 java.lang.System.setOut/setErr 将标准输出/标准错误重定向到它自己的输出代码。但是，您可以使用 java.io.FileDescriptor.out/err 字段取回原始标准输出/错误。您需要使用 FileOutputStream 打开这些字段，然后依次在这些字段上打开 java.io.PrintStream：

```
import java.io.*;
...
PrintStream out = new PrintStream(new FileOutputStream(FileDescriptor.out));
PrintStream err = new PrintStream(new FileOutputStream(FileDescriptor.err)); 
```

然后，这将适用于任何自定义 ANT 任务，以及您使用 `<java fork="false">`. 因此，您可以避免此代码的前缀，同时保留它用于任何其他任务。

但是，当您使用 启动时`<java fork="true">`，传递给您的子进程的标准输出和标准错误由 ANT 控制，上述技术将不起作用。如果您确实必须在单独的 JVM 中运行代码，则可以选择编写自己的 ANT 任务来启动此代码。

另一种可行的技术是使用 System.console() 而不是 System.out() 进行输出。但是，这仅在您的 ANT 脚本以交互方式执行时才有效，而不是在被例如 Hudson 构建调用的情况下，并且这同样不适用于分叉的 JVM。

# nhibernate - 保持与 NH 会话无关的 Castle DynamicProxy

> ID：13160453
> 
> 赞同：0
> 
> 时间：2012-10-31T14:40:15.573
> 
> 标签：nhibernate, interceptor, castle, castle-dynamicproxy

我的会话使用 NHInterceptor 向模型添加 INotifyPropertyChanged 支持。

```
// I use the session generated here to fetch Data
public class SessionServiceImpl : ISessionService
{
    [Inject]
    public ISessionFactory SessionFactory { get; set; }

    [Inject]
    public NhChangeNotificationInterceptorImpl ChangeNotificationInterceptor { get; set; }

    public ISession GetSession() // reduced code here
    {
        return SessionFactory.OpenSession(ChangeNotificationInterceptor);
    }
}

// This is the interceptor implementation
public class NhChangeNotificationInterceptorImpl : EmptyInterceptor, IInterceptor
{
    [Inject]
    public ISessionFactory SessionFactory { get; set; }

    [Inject]
    public ViewModelProxyFactory ProxyFactory { get; set; }

    public override object Instantiate(string entityTypeName, EntityMode entityMode, object id)
    {
        Type type = Type.GetType(entityTypeName); 

        if (type == null) { /* Throw Exception*/ }
        bool isViewModel = false;
        while (type != typeof(object))
        {
            Type tempType = type.BaseType;
            if (tempType == typeof(ViewModelBase))
            {
                isViewModel = true;
                break;
            }
        }

        if (entityMode == EntityMode.Poco && isViewModel)
        {
            var instance = ProxyFactory.CreateProxy(type);
            SessionFactory.GetClassMetadata(entityTypeName).SetIdentifier(instance, id, entityMode);
            return instance;
        }
        return base.Instantiate(entityTypeName, entityMode, id);
    }
} 
```

ProxyFactory 使用 Castle 创建添加更改通知功能的代理。这意味着我**所有**的对象都来自数据库作为城堡代理，它们是 AFAIK 透明的。

每当我将其中一个 NH Generated MVVM-proxy 传递给 时`Session.Save()`，一切都很好。

现在，随着数据驱动应用程序的发展，我还需要创建新实例并保存它们。我可以创建模型类型的实例并通过会话保存它们。创建一个 MVVM 代理实例（使用 Ninject 确保全部使用相同的 SessionFactory 和 ProxyFactory 实例）并将其放入`Session.Save()`以下结果中：

* * *

```
"NHibernate.MappingException".
  Message=No persister for: Castle.Proxies.FieldDescriptionProxy
  Source=NHibernate
  StackTrace:
       at NHibernate.Impl.SessionFactoryImpl.GetEntityPersister(String entityName)
       at NHibernate.Impl.SessionImpl.GetEntityPersister(String entityName, Object obj)
       at NHibernate.Event.Default.AbstractSaveEventListener.SaveWithGeneratedId(Object entity, String entityName, Object anything, IEventSource source, Boolean requiresImmediateIdAccess)
       at NHibernate.Event.Default.DefaultSaveOrUpdateEventListener.SaveWithGeneratedOrRequestedId(SaveOrUpdateEvent event)
       at NHibernate.Event.Default.DefaultSaveEventListener.SaveWithGeneratedOrRequestedId(SaveOrUpdateEvent event)
       at NHibernate.Event.Default.DefaultSaveOrUpdateEventListener.EntityIsTransient(SaveOrUpdateEvent event)
       at NHibernate.Event.Default.DefaultSaveEventListener.PerformSaveOrUpdate(SaveOrUpdateEvent event)
       at NHibernate.Event.Default.DefaultSaveOrUpdateEventListener.OnSaveOrUpdate(SaveOrUpdateEvent event)
       at NHibernate.Impl.SessionImpl.FireSave(SaveOrUpdateEvent event)
       at NHibernate.Impl.SessionImpl.Save(Object obj)
       at Interpretation.UI.Service.Impl.Dao.FieldDao.SaveFields(IList`1 fields, ISession session) in C:\...\FieldDao.cs:Zeile 51.
  InnerException: 
```

* * *

任何想法这里出了什么问题（或者我可能忘记了什么）？

**编辑：**现在让它工作了，但是为什么我必须将识别逻辑（见下面的代码）添加到在外部创建的实例的拦截器中，而在内部创建的实例可以按原样保留？

```
 public override string GetEntityName(object entity)
    {
        Type type = entity.GetType();
        if (type.FullName.StartsWith("Castle.Proxies") &&
            type.FullName.EndsWith("Proxy"))
        {
            return type.BaseType.FullName;
        }
        return base.GetEntityName(entity);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:02:37.747

实现 GetEntityName 方法就成功了。

```
public override string GetEntityName(object entity)
{
    Type type = entity.GetType();
    if (type.FullName.StartsWith("Castle.Proxies") &&
        type.FullName.EndsWith("Proxy"))
    {
        return type.BaseType.FullName;
    }
    return base.GetEntityName(entity);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:18:22.193

[文章和示例代码](http://msdn.microsoft.com/en-us/magazine/ee819139.aspx)（拦截实体创建）演示了使用动态代理来实现 (WPF) 更改通知。如那里所见，您必须在 NHibernate 和外部使用相同的代理生成器来实现对 NHibernate 代理的识别（参见类 DataBindingIntercepter 方法 GetEntityName）。

> 为什么我必须为外部创建的实例添加识别逻辑（参见下面的代码）到拦截器，而内部创建的实例可以按原样保留？

ISession 上的方法仅将实例添加到字典中以在 Flush 上搜索脏实例。由于加载的所有实例都自动成为该字典的一部分，因此会话立即“了解”实体并且在 SaveOrUpdate 中不执行任何操作。对于来自外部的其他实例，它首先必须获取适当的映射（使用默认为类全名的实体名称）才能知道哪些属性形成主键。

# java - NUMA 架构如何影响 ActivePivot 的性能？

> ID：13160456
> 
> 赞同：11
> 
> 时间：2012-10-31T14:40:25.000
> 
> 标签：java, olap, numa, activepivot

我们正在将 ActivePivot 应用程序迁移到新服务器（4 插槽 Intel Xeon，512GB 内存）。部署后，我们启动了我们的应用程序基准测试（这是大型 OLAP 查询与实时事务并发的混合）。测得的性能几乎比我们以前的服务器慢两倍，以前的服务器具有相似的处理器，但内核数量减少了两倍，内存减少了两倍。

我们调查了两台服务器之间的差异，看起来大的一台具有**NUMA 架构**（非统一内存访问）。每个 CPU 插槽在物理上接近内存的 1/4，但距离其余部分更远……运行我们的应用程序的 JVM 分配了一个大的全局堆，每个 NUMA 节点上都有该堆的随机部分。我们的分析是内存访问模式非常随机，CPU 内核经常浪费时间访问远程内存。

我们正在寻找有关在 NUMA 服务器上利用 ActivePivot 的更多反馈。我们可以配置 ActivePivot 多维数据集或线程池、更改查询、配置操作系统吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-05T14:28:10.643

Peter described the general JVM options available today to reduce the performance impact of NUMA architectures. To keep it short a NUMA aware JVM will partition the heap with respect to the NUMA nodes, and when a thread creates a new object, the object is allocated in the NUMA node of the core that runs that thread (if the same thread later uses it, the object will be in the local memory). Also when compacting the heap the NUMA aware JVM avoids moving large data chunks between nodes (and reduces the length of stop-the-world events).

So on any NUMA hardware and for any Java application the **-XX:+UseNUMA** option should probably be enabled.

But for ActivePivot that does not help much: ActivePivot is an in-memory database. There are real-time updates but the bulk of the data resides in the main memory for the life of the application. Whatever the JVM options, the data will be split among NUMA nodes, and the threads that execute queries will access memory randomly. Knowing that most sections of the ActivePivot query engine run as fast as memory can be fetched, the NUMA impact is particularly visible.

So how can you get the most from your ActivePivot solution on a NUMA hardware?

There is an easy solution when the ActivePivot application only uses a fraction of the resources (we find that it is often the case when several ActivePivot solutions run on the same server). For instance an ActivePivot solution that only uses 16 cores out of 64, and 256GB out of a TeraByte. In that case you can restrict the JVM process itself to a NUMA node.

On Linux you prefix the JVM launch with the following option ( [http://linux.die.net/man/8/numactl](http://linux.die.net/man/8/numactl) ):

```
numactl --cpunodebind=xxx 
```

If the entire server is dedicated to one ActivePivot solution, you can leverage the ActivePivot Distributed Architecture to partition the data. If there are 4 NUMA nodes, you start 4 JVMs hosting 4 ActivePivot nodes, each one bound to its NUMA node. With this deployment queries are distributed among the nodes, and each node will perform its share of the work at max performance, within the right NUMA node.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-31T14:46:27.470

您可以尝试使用`-XX:+UseNUMA`

[http://docs.oracle.com/javase/7/docs/technotes/guides/vm/performance-enhancements-7.html](http://docs.oracle.com/javase/7/docs/technotes/guides/vm/performance-enhancements-7.html)

如果这没有产生您期望的结果，您可能不得不使用`taskset`将 JVM 锁定到特定套接字，并有效地将服务器分成四台机器，每台机器都有一个 JVM。

我观察到具有更多套接字的机器对其内存（甚至是本地内存）的访问速度较慢，并且始终为您提供所需的性能提升。

# serial-port - WinCE 与 PC USB 通讯

> ID：13160461
> 
> 赞同：3
> 
> 时间：2012-10-31T14:40:50.830
> 
> 标签：serial-port, usb, windows-ce, activesync, serial-communication

我们正在开发一些设备，我们需要为所需功能之一找到好的解决方案。

问题是我们需要在 PC 上通信 WinCE 6.0 (ARM) 和 Windows。最简单的方法当然是 COM 端口，但在我们的情况下这是不可能的（所有串行端口都在 WinCE 上使用，我们不想再添加一个）。第二种选择是 LAN，但对我们来说它不是最好的选择，原因有几个。

所以我们可以使用第三种选择。USB 到 USB 通信，但如何做到这一点？当然，WinCE 是 USB 设备，PC 是 USB 主机，所以所有硬件基础知识都满足了。

我们可以使用主动同步，但它几乎没有问题： - WinCE 6.0 无法与 WMDC 一起使用（设备上的驱动程序在将设备与 PC 连接后崩溃）并且我没有找到任何解决方案，所以在这种情况下我们需要在 PC 端使用 WinXP（旧的 ActiveSync）——我们需要过滤与主动同步的通信，只针对我们的应用程序，不允许使用其他非授权软件（我知道这是不可能获得的）。

因此，我们需要做的最好的方法是像标准 COM（串行通信）一样通过 USB 进行通信。问题是，它是如何制作的，我们是否需要在 WinCE 上编写驱动程序并在 Windows (PC) 上编写驱动程序，或者有更好的解决方案？也许一些 WinCE 6.0 的驱动程序可以在 PC 端模拟虚拟 COM（当然允许在 WinCE 端对其进行标准读/写）？有人可以告诉我这样的东西是否存在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T20:46:50.597

我们可能为我们的问题找到了最佳解决方案。我们在 ActiveSync 上使用 TCP/IP（通过 USB 的标准 WinSock 连接）。这是可能的，因为 ActiveSync 为主机 PC 提供了 IP 地址。它可以通过类似的方式获得（在 WinCE 上）：

```
std::string lIPAddress = "ppp_peer";
struct hostent * lH = gethostbyname(lIPAddress.c_str());

DEBUGMSG(ZONE_ERROR, (TEXT("Addr: %S\r\n"), lH->h_addr_list[0])); // just a debug info
lServerAddress.sin_addr.S_un.S_addr = *(u_long *)lH->h_addr_list[0]; 
```

当然这不是完整的例子，它只是一个示例:)

# perl - 完全删除一个数组元素

> ID：13160462
> 
> 赞同：0
> 
> 时间：2012-10-31T14:41:06.197
> 
> 标签：perl

**目标**：从数组中删除特定值

我写了一个脚本，它运行良好，但我对我编写它的方式不满意。所以我很想知道有没有更好的方法来写它。请考虑以下用例：

我有一个嵌套的哈希/哈希/数组...如下所示。我需要删除`local`名称中包含的任何数组值：

```
#!/usr/bin/perl -w
use strict;
use Data::Dumper;

my $hash = { esx1 => 
                    { cluster   => "clu1",
                      fd        => "fd1",
                      ds        => [ 
                                        'ds1',
                                        'ds2',
                                        'localds',
                                    ],  
                    },  
            esx2 => 
                    { cluster   => "clu2",
                      fd        => "fd2",
                      ds        => [ 
                                        'ds3',
                                        'ds4',
                                        'dslocal',
                                    ],  
                    },  
            };  

foreach my $a ( keys %$hash )
{
    foreach ( 0..$#{ $hash->{$a}->{ds} } ) 
    {   
        delete $hash->{$a}->{ds}->[$_] if $hash->{$a}->{ds}->[$_] =~ /local/i;
        @{ $hash->{$a}->{ds} } = grep defined, @{ $hash->{$a}->{ds} };
    }   
}

print Dumper ($hash); 
```

所以脚本会删除“ `localds`”和“ `dslocal`”并保持其他所有内容不变。

**问题**：

1.  有没有更简洁的方法来编写`foreach ( 0..$#{$hash->{$a}->{ds} } )`循环
2.  如果我不写`grep`上面的行，则结果数组的值包含`local`已删除但被替换为`undef`. 为什么会这样。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T15:06:41.747

`delete`用于哈希中的元素。它碰巧通过一个怪癖的实现在数组上工作，但不应该依赖它。

对于数组，您想使用拼接。

```
splice @{ $ref->{to}->{array} }, $index, 1, (); 
```

`$index`这将替换以空列表开头的 1 元素子`()`列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T15:08:14.320

为什么首先遍历数组并删除元素，然后查找“未删除”节点（旁注 - 这`grep`应该在循环之外）？您可以从一开始就寻找好的节点！将整个循环替换为：

```
foreach my $a ( keys %$hash )
{
    @{ $hash->{$a}->{ds} } = grep { !/local/i } @{ $hash->{$a}->{ds} };
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T14:52:59.960

不是更整洁，但是：

```
foreach my $a ( keys %$hash )
{
    my $temp;
    foreach ( @{ $hash->{$a}->{ds} } ) 
    {   
        push(@$temp, $_) unless $_ =~ /local/i;
    }
    $hash->{$a}->{ds} = $temp;
} 
```

删除不会改变数组结构，它只是改变数组内容。因此，在您的方法中，您需要 grep 查找已定义的条目以创建所需结构的新数组，然后覆盖旧数组。

编辑：这在[perldoc page for delete上有更好的解释](http://perldoc.perl.org/functions/delete.html)

> delete() 也可以用于数组和数组切片，但它的行为不那么直接。尽管 exists() 会为已删除的条目返回 false，但删除数组元素永远不会更改现有值的索引；为此使用 shift() 或 splice()。但是，如果所有被删除的元素都落在数组的末尾，则数组的大小将缩小到仍然为存在（）测试为真的最高元素的位置，如果没有，则缩小为 0。

编辑：

正如 mob splice 所指出的，它将做你想做的事：

```
foreach my $a ( keys %$hash )
{
    for(0..$#{ $hash->{$a}->{ds} } ) 
    {   
        splice( @{ $hash->{$a}->{ds} }, $_, 1 ) if $hash->{$a}->{ds}->[ $_ ] =~ /local/i;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T15:06:54.620

```
for my $h (values %$hash){
    $h->{ds} = [ grep { $_ !~ /local/i } @{$h->{ds}} ];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T15:00:04.433

您可以使用 List::MoreUtils qw/first_idx/ 来获取 /local/ 的索引，如下所示

```
first_idx { $_ =~ /local/i } @{$hash->{$a}->{ds}}; 
```

然后用它做你想做的事。

# c++ - 功能实现：进程还是线程划分？

> ID：13160464
> 
> 赞同：1
> 
> 时间：2012-10-31T14:41:08.707
> 
> 标签：c++, linux, qt, ipc, embedded-linux

我正在开发一个在嵌入式 Linux 平台上运行的应用程序（C++ 与 Qt 相结合的图形部分）。我需要知道如何将应用程序划分为不同的“核心”，每个核心负责处理应用程序的不同部分，以提高应用程序本身的稳定性、效率和安全性。

我的疑问是：将功能划分为线程还是分叉不同的进程更方便？

让我提供一个应用程序的功能视图：每个用户界面都有不同的用户界面，允许用户或多或少地做相同的事情（不要介意数据一致性，我已经解决了这个问题）。这些接口中的每一个都必须作为独立的（就像同一系统的不同终端一样）。我希望他们所有人都从同一个“核心”发送和接收消息，该“核心”将负责更新应用程序数据或做其他适当的事情。

实现内部“核心”和用户界面之间划分的最佳方式是什么？

当然我错过了一些知识，但到目前为止我想出了两个选择：1 - 从父亲“核心”派生一个孩子，让孩子执行一个特定的 UI 程序（我没有这样做的实际经验，所以如何，在在这种情况下，我可以让父亲和孩子进行交流吗（记住孩子是一个新进程）？） 2 - 为每个核心和 UI 创建不同的线程。

我需要这个划分，因为要求应用程序尽可能稳定，并且能够在崩溃的情况下重新启动 UI。还要记住，整个应用程序不会有无限的内存和资源可用。

提前感谢您的帮助，问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T23:12:21.907

在嵌入式系统中采用单独的进程路线可能是一个不错的选择，原因有以下几个：

*   组件的解耦：将组件作为单独的进程运行是最终的解耦。当项目变得非常大时通常很有用

*   安全和权限管理：很可能在嵌入式系统中，某些组件需要提升权限才能控制设备，而其他组件则是潜在的安全隐患（例如面向网络的组件），您希望以尽可能少的权限运行。其他可能的场景是需要实时线程或能够`mmap()`使用大量系统内存的组件。任何一个的过度分配都会以无法恢复的方式锁定您的系统。

*   可靠：如果系统的某些部分失败，您可能会重新生成系统的某些部分，让其余部分继续运行

建立这样的安排实际上比这里的其他人建议的要容易 - Qt 对[dbus](http://www.freedesktop.org/wiki/Software/dbus)的支持非常好- 它很好地照顾了您的 IPC，并在 Linux 桌面中广泛用于系统管理功能。

至于您描述的场景，您可能希望守护应用程序的“核心”，然后允许来自 UI 组件的客户端通过 dbus 连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:49:00.100

在不同的线程中运行 UI 不会给您带来太多额外的稳定性——其他线程可能会破坏您的引擎堆，即使您终止线程，它所拥有的任何资源也不会被回收。

您可以通过在引擎和 UI 之间设置一堵非常强大的抽象墙来稍微提高稳定性。所以这并不是完全徒劳的。

多个进程需要很多圈才能跳过——您需要一种 IPC（进程间通信）方法。

请注意，IPC 和在较小程度上的抽象墙会增加程序的开销。

要问的一个重要问题是“在 UI 和引擎之间必须传递多少数据？” -- 如果数据足够少（比如从 UI 到引擎的“启动任务”，从引擎到 UI 的“这个任务完成了 50%”），IPC 就不那么麻烦了。如果你是一个实时全屏更新图像的交互式绘画应用程序，IPC 更烦人，更不实用。

现在，一个关于 Qt 和 IPC 的快速 google 告诉我，有一个用于嵌入式 linux 的 Qt 扩展，它允许 Qt 信号和插槽在进程之间传递消息：Qt COMmunications Protocol (QCOP)。我遇到过这样的框架的一个问题是，与相对简单的协议相比，它很容易导致客户端和服务器状态之间的纠缠，从而损害通信管道另一端的稳定性。

# java - 在同一页面上处理没有请求的丢失文件下载链接

> ID：13160468
> 
> 赞同：2
> 
> 时间：2012-10-31T14:41:18.880
> 
> 标签：java, jsf, jakarta-ee, jsf-2

当相应文件丢失时，处理点击文件下载链接的最佳做法是什么？

具体情况是DB中存在附件实体，只指向文件名，文件存储路径可以单独/单独配置。这适用于旧版应用程序，必须得到支持。

这可能吗？这样的代码看起来如何？我试过

```
 if ( file.canRead() )
    {
        byte[] data = FileUtils.readFileToByteArray( file );

        // goes to code like here: http://balusc.blogspot.de/2006/05/pdf-handling.html
        downloadFile( attachment.getFileName(), data );
    }
    else
    {
        this.log.errorv( "Attachment {0} not found in configured storage path {1}", file, this.storagePath );

        FacesContext facesContext = FacesContext.getCurrentInstance();

        facesContext.addMessage( null,
                                 new FacesMessage( FacesMessage.SEVERITY_ERROR, "Failed.",
                                                   "Downlosding file " + file + " failed! File doesn't exist in the configured storage path " + this.storagePath ) );

        // ???
        facesContext.responseComplete();
    } 
```

但这会导致

```
XML-Verarbeitungsfehler: Kein Element gefunden
Adresse: https://localhost:8181/cmc-compliance/view/prototype/collisionManager.xhtml
Zeile Nr. 1, Spalte 1: 
```

（天哪`<rant>`，我讨厌……呃不**喜欢****~~int18ned~~**错误消息……有人应该摆脱认为这是个好主意的人…… ）**`</rant>`**

 **好的，上面的意思类似于“XML 处理错误：未找到元素 + 第 1 行，第 1 列”

我的代码显然不是正确的方法......

我在数据表中使用 JSF 代码：

```
<h:commandLink action="#{attachmentManager.downloadAttachment(att)}">
    <h:graphicImage library="images/icons" name="page_white.png" />
    <h:outputText value="#{att.fileName}" />
</h:commandLink> 
```

理想情况下，我想要的是显示一条 JSF 消息（或 PrimeFaces 咆哮），然后将页面保持原样，即无需再次在同一页面上发出完整的请求。

你怎么做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:15:12.480

`facesContext.responseComplete();`你基本上是在阻止 JSF 呈现响应。因此，客户端检索到一个完全空的响应。网络浏览器正试图充分利用它。网络浏览器只知道请求的资源具有`.xhtml`文件扩展名。所以网络浏览器假定它是一些 XML 内容。然后网络浏览器尝试将空响应解析为 XML。但由于根本没有 XML 元素，它因给定错误而惨遭失败。即要求 XML 格式良好的文档具有*至少*一个根 XML 元素。

删除该`facesContext.responseComplete();`行并以通常的方式从该方法返回。您应该*只*`facesContext.responseComplete();`在您自己*已经*写入响应时使用，例如在这种特殊情况下提供文件下载。

* * *

> *OMG，我讨厌 int18ned 错误消息...有人应该摆脱认为这是个好主意的人...*

只需在平台特定设置中相应地更改操作系统平台默认区域设置。对于 Windows，可以在此处找到带有屏幕截图的相关答案：[Getting OS language in java](https://stackoverflow.com/questions/10862507/getting-os-langage-in-java/10862745#10862745)。如果程序本身（例如 Firefox/Chrome）也有一些与语言环境相关的设置，您可能还想在程序本身中更改它。**

# javascript - 图库中的图像在 IE 中不显示

> ID：13160473
> 
> 赞同：1
> 
> 时间：2012-10-31T14:41:35.430
> 
> 标签：javascript, html, internet-explorer

我正在尝试创建一个照片库。当我在 Firefox、Chrome 和 Safari 中查看它时，它可以完美运行并符合预期。但是（毫不奇怪），IE 无法正确显示图像。

我已经确定了这样的问题： 1.）大图像不显示，但是，您仍然可以右键单击图像应该存在的空间并将图像保存到您的计算机。2.）图库自动滚动到最后一张图片。

该站点尚未上线，因此这里是相关的 javascript、css 和 html：

```
 /*Time for the CSS*/

/*body, html { color: rgb(155, 152, 144); } this does not fix miscoloration of template*/
/* possible IE fixes:
 *
 * <meta http-equiv="X-UA-Compatible" content="IE=7"/>
 */

.slider{

    width: 640px; Same as width of the large image
    position: relative;
    /*Instead of height we will use padding*/
    padding-top: 320px; /*That helps bring the labels down*/

    margin: 100px auto;

    /*Lets add a shadow*/
    box-shadow: 0 10px 20px -5px rgba(0, 0, 0, 0.75);
}

/*Last thing remaining is to add transitions*/
.slider>img{
    position: absolute;
    left: 0; top: 0;
    transition: all 0.5s;
}

.slider input[name='slide_switch'] {
    /* display none for radio buttons is not compatable with IE,
     * using (potential) fix from http://www.jotform.com/answers/23448-IE-problem-with-radio-buttons
     */ 
    /*display: none;*/
    position: absolute; left: -9999px;
}

label { display: block; cursor: pointer; line-height: 20px; padding-bottom: 9px;  }

.slider label {
    /*Lets add some spacing for the thumbnails*/
    margin: 18px 0 0 18px;
    border: 3px solid #999;

    float: left;
    cursor: pointer;
    transition: all 0.5s;

    /*next two css properties are for IE-------------------------------*/
    zoom: 1;
    filter: alpha(opacity = 60);
    /*Default style = low opacity*/
    opacity: 0.6;
}

.slider label img{
    display: block;
}

/*Time to add the click effects*/
.slider input[name='slide_switch']:checked+label {
    border-color: #666;
    /*next two css properties are for IE----------------------------------*/
    zoom: 1;
    filter: alpha(opacity = 100);
    opacity: 1;
}
/*Clicking any thumbnail now should change its opacity(style)*/
/*Time to work on the main images*/
.slider input[name='slide_switch'] ~ img {
    /*next two css properties are for IE----------------------------------*/
    zoom: 1;
    filter: alpha(opacity = 0);
    opacity: 0;
    transform: scale(1.1);
}
/*That hides all main images at a 110% size
On click the images will be displayed at normal size to complete the effect
*/
.slider input[name='slide_switch']:checked+label+img {
    /*next two css properties are for IE----------------------------------*/
    zoom: 1;
    filter: alpha(opacity = 100);
    opacity: 1;
    transform: scale(1);
}
/*Clicking on any thumbnail now should activate the image related to it*/ 
```

这是（一些）HTML：

```
<!--MAIN PAGE HERE-->

    <h1>advancement photo galley!</h1>
    <h3>great stuff!!!</h3>

     <!--
We will make a slider with stylized thumbnails using CSS3
The markup is very simple:
Radio Inputs
Labels with thumbnails to detect click event
Main Image

thumbnail images are 100x50
full size images are 600x300???
-->
<div class="slider">
    <input type="radio" name="slide_switch" id="id1"/>
    <label for="id1"><img src="images/1.jpg" width="100" alt="1" /></label><!--this image is the thumbnail image-->
    <img src="images/1.jpg" alt="1"/><!--this one is the larger displayed image-->

    <input type="radio" name="slide_switch" id="id2" checked="checked"/>
    <label for="id2">
        <img src="images/2" width="100" alt="1"/>
    </label>
    <img src="images/2.jpg" alt="1"/>

    <input type="radio" name="slide_switch" id="id3"/>
    <label for="id3">
        <img src="images/3" width="100" alt="1"/>
    </label>
    <img src="images/3.jpg" alt="1"/>

    <input type="radio" name="slide_switch" id="id4"/>
    <label for="id4">
        <img src="images/4.jpg" width="100" alt="1"/>
    </label>
    <img src="images/4.jpg" alt="1"/>

    <input type="radio" name="slide_switch" id="id5"/>
    <label for="id5">
        <img src="images/5.jpg" width="100" alt="1"/>
    </label>
    <img src="images/5.jpg" alt="1"/>

    <input type="radio" name="slide_switch" id="id6"/>
    <label for="id6">
        <img src="images/6.jpg" width="100" alt="1"/>
    </label>
    <img src="images/6.jpg" alt="1"/>

    <input type="radio" name="slide_switch" id="id7"/>
    <label for="id7">
        <img src="images/7.jpg" width="100" alt="1"/>
    </label>
    <img src="images/7.jpg" alt="1"/>

    <input type="radio" name="slide_switch" id="id8"/>
    <label for="id8">
        <img src="images/8.jpg" width="100" alt="1"/>
    </label>
    <img src="images/8.jpg" alt="1"/>

    <input type="radio" name="slide_switch" id="id9"/>
    <label for="id9">
        <img src="images/9.jpg" width="100" alt="1"/>
    </label>
    <img src="images/9.jpg" alt="1"/>

    <input type="radio" name="slide_switch" id="id10"/>
    <label for="id10">
        <img src="images/10.jpg" width="100" alt="1"/>
    </label>
    <img src="images/10.jpg" alt="1"/>
</div>

<br><br><br>
<img src="arrow.jpg" id="current" onclick="this.answer.value=Scroll();" alt="arrow">
writeNum();

<!-- We will use PrefixFree - a script that takes care of CSS3 vendor prefixes
You can download it from http://leaverou.github.com/prefixfree/ -->
<script src="http://thecodeplayer.com/uploads/js/prefixfree.js" type="text/javascript"></script>
<p><br><br><br>
this is an image gallery for advancement services

these are words describing what is going on on this page

all of this is really important imformations</p> 
```

提前感谢您的任何帮助/建议。出于安全原因，我不得不省略许多细节，我希望这是足够的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:56:11.470

我要尝试的第一件事是为图像添加一个高度属性。尽管从规范中对宽度和高度属性进行了贬值，以支持在 css 中设置它们，但 oldIE 依赖于它们，因此最好同时拥有它们。基本上，如果缺少其中一个值，则假定您的意思是 0 高度。愚蠢，我知道，但这对你来说是 oldIE。大多数其他浏览器都会做正确的事情并查看图像数据以找出它的尺寸。

我还注意到您的宽度设置为`width="100"`. 可能值得指定单位：`width="100px"`.

# java - 我应该如何在 Hibernate Query 中使用 COLLATE

> ID：13160476
> 
> 赞同：3
> 
> 时间：2012-10-31T14:41:44.563
> 
> 标签：java, sql, hibernate, collate

我正在尝试在 Hibernate SQL 查询中使用 COLLATE 语句，但是它无法识别该语句。

```
CONSULTA: FROM Articulos WHERE activo=0 
              and (codigodearticulo like '%CIN EMB%' COLLATE='Modern_Spanish_CI_AI'
              or descripcion like '%CIN EMB%' COLLATE='Modern_Spanish_CI_AI'  
              or descripcionadicional like '%CIN EMB%' COLLATE='Modern_Spanish_CI_AI' )
              and codigodelinea in
              (select CODIGODELINEA from Lineas where CATAUTOPARTES='1') 
```

当应用程序编译时，Hibernate 返回此异常：

```
- line 1:107: unexpected token: COLLATE
- line 1:107: unexpected token: COLLATE
- line 1:107: unexpected token: COLLATE
- Error hibernate: unexpected token: COLLATE near line 1, column 107 
```

我找不到问题，在 MSSQL Server 中它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-16T20:56:02.920

不幸的是，HQL 并不能完全替代 SQL，而且似乎根本不允许指定排序规则。

它可以在 Criteria 查询中指定。看到[这个答案](https://stackoverflow.com/a/16996115/279872)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-17T12:10:37.703

而不是在 HQL 中：

```
String hql = "SELECT e" +
    " FROM EntityJPA e" +
    " WHERE e.mycolumn COLLATE 'utf8_bin' = 'VALUE'"

Query query = entityManager.createQuery(hql); 
```

您可以像这样使用本机查询

```
String sql = "SELECT t" +
    " FROM entity_table t" +
    " WHERE t.mycolumn COLLATE 'utf8_bin' = 'VALUE'" 
```

并以原生查询方式执行它：

```
Query query = entityManager.createNativeQuery(sql); 
```

这是一个更简单的解决方案，因为要记住本机查询会创建对目标数据库的 SQL 语言（在我们的例子中是 mySQL）的依赖。

对我们来说，这仍然是可以接受的，因为使用不同数据库引擎的可能性非常低。

# c# - 这段代码 [理论上] 是线程不安全的吗？

> ID：13160479
> 
> 赞同：0
> 
> 时间：2012-10-31T14:41:57.977
> 
> 标签：c#, multithreading, deadlock, manualresetevent

我在编写的代码中遇到了奇怪的死锁。

这个想法是实现一个异步操作，它的**Stop**是同步的——调用者必须等到它完成。我已将完成实际工作的部分简化为简单的属性增量（`++Value`见下文）；但实际上，调用了一个对线程非常敏感的重型 COM 组件。

我遇到的死锁是在`Stop()`我明确等待识别已完成操作的手动重置事件的方法中。

有什么想法我可能做错了吗？代码应该是独立的并且可以自行编译。

```
using System;
using System.ComponentModel;
using System.Threading;
using System.Windows.Forms;

using ThreadingTimer = System.Threading.Timer;

namespace CS_ManualResetEvent
{
    class AsyncOperation
    {
        ThreadingTimer   myTimer;                 //!< Receives periodic ticks on a ThreadPool thread and dispatches background worker.
        ManualResetEvent myBgWorkerShouldIterate; //!< Fired when background worker must run a subsequent iteration of its processing loop.
        ManualResetEvent myBgWorkerCompleted;     //!< Fired before the background worker routine exits.
        BackgroundWorker myBg;                    //!< Executes a background tasks
        int              myIsRunning;             //!< Nonzero if operation is active; otherwise, zero.

        public AsyncOperation()
        {
            var aTimerCallbac = new TimerCallback(Handler_Timer_Tick);
            myTimer = new ThreadingTimer(aTimerCallbac, null, Timeout.Infinite, 100);

            myBg = new BackgroundWorker();
            myBg.DoWork += new DoWorkEventHandler(Handler_BgWorker_DoWork);

            myBgWorkerShouldIterate = new ManualResetEvent(false);
            myBgWorkerCompleted = new ManualResetEvent(false);
        }

        public int Value { get; set; }

        /// <summary>Begins an asynchronous operation.</summary>
        public void Start()
        {
            Interlocked.Exchange(ref myIsRunning, 1);

            myTimer.Change(0, 100);

            myBg.RunWorkerAsync(null);
        }

        /// <summary>Stops the worker thread and waits until it finishes.</summary>
        public void Stop()
        {
            Interlocked.Exchange(ref myIsRunning, 0);

            myTimer.Change(-1, Timeout.Infinite);

            // fire the event once more so that the background worker can finish
            myBgWorkerShouldIterate.Set();

            // Wait until the operation completes; DEADLOCK occurs HERE!!!
            myBgWorkerCompleted.WaitOne();

            // Restore the state of events so that we could possibly re-run an existing component.
            myBgWorkerCompleted.Reset();
            myBgWorkerShouldIterate.Reset();
        }

        void Handler_BgWorker_DoWork(object sender, EventArgs theArgs)
        {
            while (true)
            {
                myBgWorkerShouldIterate.WaitOne();

                if (myIsRunning == 0)
                {
                    //Thread.Sleep(5000);   //What if it takes some noticeable time to finish?

                    myBgWorkerCompleted.Set();

                    break;
                }

                // pretend we're doing some valuable work
                ++Value;

                // The event will be set back in Handler_Timer_Tick or when the background worker should finish
                myBgWorkerShouldIterate.Reset();
            }

            // exit
        }

        /// <summary>Processes tick events from a timer on a dedicated (thread pool) thread.</summary>
        void Handler_Timer_Tick(object state)
        {
            // Let the asynchronous operation run its course.
            myBgWorkerShouldIterate.Set();
        }
    }

    public partial class Form1 : Form
    {
        private AsyncOperation myRec;
        private Button btnStart;
        private Button btnStop;

        public Form1()
        {
            InitializeComponent();
        }

        private void Handler_StartButton_Click(object sender, EventArgs e)
        {
            myRec = new AsyncOperation();
            myRec.Start();

            btnStart.Enabled = false;
            btnStop.Enabled = true;
        }

        private void Handler_StopButton_Click(object sender, EventArgs e)
        {
            myRec.Stop();

            // Display the result of the asynchronous operation.
            MessageBox.Show (myRec.Value.ToString() );

            btnStart.Enabled = true;
            btnStop.Enabled = false;
        }

        private void InitializeComponent()
        {
            btnStart = new Button();
            btnStop  = new Button();
            SuspendLayout();

            // btnStart
            btnStart.Location = new System.Drawing.Point(35, 16);
            btnStart.Size = new System.Drawing.Size(97, 63);
            btnStart.Text = "Start";
            btnStart.Click += new System.EventHandler(Handler_StartButton_Click);

            // btnStop
            btnStop.Enabled = false;
            btnStop.Location = new System.Drawing.Point(138, 16);
            btnStop.Size = new System.Drawing.Size(103, 63);
            btnStop.Text = "Stop";
            btnStop.Click += new System.EventHandler(Handler_StopButton_Click);

            // Form1
            ClientSize = new System.Drawing.Size(284, 94);
            Controls.Add(this.btnStop);
            Controls.Add(this.btnStart);
            Text = "Form1";
            ResumeLayout(false);
        }
    }

    static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new Form1());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:07:38.597

似乎您要做的只是执行一个异步任务，该任务从按下一个按钮开始，并在按下另一个按钮时停止。鉴于此，您似乎使任务过于复杂。考虑使用为取消异步操作而设计的东西，例如`CancellationToken`. 异步任务只需要在`while`循环中检查取消令牌的状态（而不是`while(true)`），并且该`stop`方法变得像在`CancellationTokenSource`.

```
private CancellationTokenSource cancellationSource;
private Task asyncOperationCompleted;

private void button1_Click(object sender, EventArgs e)
{
    //cancel previously running operation before starting a new one
    if (cancellationSource != null)
    {
        cancellationSource.Cancel();
    }
    else //take out else if you want to restart here when `start` is pressed twice.
    {
        cancellationSource = new CancellationTokenSource();
        TaskCompletionSource<object> tcs = new TaskCompletionSource<object>();
        asyncOperationCompleted = tcs.Task;
        BackgroundWorker bgw = new BackgroundWorker();
        bgw.DoWork += (_, args) => DoWork(bgw, cancellationSource);
        bgw.ProgressChanged += (_, args) => label1.Text = args.ProgressPercentage.ToString();
        bgw.WorkerReportsProgress = true;
        bgw.RunWorkerCompleted += (_, args) => tcs.SetResult(true);

        bgw.RunWorkerAsync();
    }
}

private void DoWork(BackgroundWorker bgw, CancellationTokenSource cancellationSource)
{
    int i = 0;
    while (!cancellationSource.IsCancellationRequested)
    {
        Thread.Sleep(1000);//placeholder for real work
        bgw.ReportProgress(i++);
    }
}

private void StopAndWaitOnBackgroundTask()
{
    if (cancellationSource != null)
    {
        cancellationSource.Cancel();
        cancellationSource = null;

        asyncOperationCompleted.Wait();
    }
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-31T15:01:47.003

将此代码放在 ++Value 下；在 Handler_BgWorker_DoWork 中。然后在调试窗口中看到输出时按下按钮。然后发生死锁。

```
 int i = 0;
            while (i++ < 100) {
                System.Diagnostics.Debug.Print("Press the button now");

                Thread.Sleep(300);
                Application.DoEvents();
            } 
```

# html - GPS坐标在使用网络的黑莓9800中不起作用

> ID：13160480
> 
> 赞同：0
> 
> 时间：2012-10-31T14:41:57.057
> 
> 标签：html, cordova, blackberry, geolocation, blackberry-webworks

我正在使用 HTML5 Geo-location API 来获取 GPS 坐标

```
navigator.geolocation.getCurrentPosition(geolocationSuccess, 
                                     [geolocationError], 
                                     [geolocationOptions]); 
```

这适用于除 Blackberry 9800 以外的所有版本。我在 blackberry webworks 中使用 api。有人可以帮帮我，黑莓9800是否支持上述api，或者我必须做其他事情。

或者任何人都可以告诉我任何用于地理定位的黑莓网络工程扩展。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:01:05.873

这是在 BlackBerry WebWorks 应用程序中检索 GPS 坐标的正确方法。

确认您的设备通常可以检索 GPS 坐标。如果它适用于除一台以外的某些设备，那么我认为这是一个连接问题。尝试这个：

1) 打开设置 --> 设备 --> 位置设置 2) 确保“位置服务”设置为“开启”。
3) 打开菜单，选择“刷新位置”

您应该会在此屏幕的“位置”部分看到填充的 GPS 坐标。这些值将被发送到 navigator.geolocation.getCurrentPosition() 方法。如果这些值仍然为空，那么您的应用也将获得空值。

希望有帮助。

# php - Gmail 使用原始“TO”地址而不是“FROM”地址进行回复

> ID：13160482
> 
> 赞同：2
> 
> 时间：2012-10-31T14:41:59.073
> 
> 标签：php, codeigniter, email, gmail

使用[CI 的电子邮件库](http://codeigniter.com/user_guide/libraries/email.html)，我有以下代码向用户发送密码：

```
$email_html_message         =   '<html><body>'.
                                        'Your password is '.$password.'<br>'.
                                        '<a href="'.  base_url().'">Login to MySite</a>'.
                                        '</body></html>';

        $config['charset']  =   'iso-8859-1';
        $config['mailtype'] =   'html';
        $this->email->initialize($config);

        $this->email->from('ray@MySite.com', 'MySite Admin');
        $this->email->to($user_email);
        $this->email->subject('Your MySite Login');
        $this->email->message($email_html_message);
        $this->email->send(); 
```

我在两个帐户上测试了这段代码：Gmail 和我的 ISP 的 smtp 电子邮件帐户。

两个测试都发送了一封电子邮件，但问题是：

如果我点击通过 gmail 回复，回复地址是电子邮件发送到的地址：

![在此处输入图像描述](../Images/1e8435b64c9c4d9e30cbb866655ac354.png)

当我通过 Windows Mail（例如我的 smtp 帐户）单击回复时，不会发生这种情况。

这是带有来自 gmail 标题的“原始消息”：

```
Delivered-To: ray023@gmail.com
Received: by 10.114.17.8 with SMTP id k8csp412473ldd;
        Wed, 31 Oct 2012 07:27:06 -0700 (PDT)
Received: by 10.220.142.79 with SMTP id p15mr18061226vcu.71.1351693626443;
        Wed, 31 Oct 2012 07:27:06 -0700 (PDT)
Return-Path: <bounce-cgi-moo.ray023@yourhostingaccount.com>
Received: from mailout12.yourhostingaccount.com (mailout12.yourhostingaccount.com. [65.254.253.98])
        by mx.google.com with ESMTP id p5si2963631vcv.55.2012.10.31.07.27.05;
        Wed, 31 Oct 2012 07:27:05 -0700 (PDT)
Received-SPF: pass (google.com: domain of bounce-cgi-moo.ray023@yourhostingaccount.com designates 65.254.253.98 as permitted sender) client-ip=65.254.253.98;
Authentication-Results: mx.google.com; spf=pass (google.com: domain of bounce-cgi-moo.ray023@yourhostingaccount.com designates 65.254.253.98 as permitted sender) smtp.mail=bounce-cgi-moo.ray023@yourhostingaccount.com
Received: from mailscan13.yourhostingaccount.com ([10.1.15.13] helo=mailscan13.yourhostingaccount.com)
    by mailout12.yourhostingaccount.com with esmtp (Exim)
    id 1TTZG5-0005Lf-Dt
    for ray023@gmail.com; Wed, 31 Oct 2012 10:27:05 -0400
Received: from impout01.yourhostingaccount.com ([10.1.55.1] helo=impout01.yourhostingaccount.com)
    by mailscan13.yourhostingaccount.com with esmtp (Exim)
    id 1TTZG2-0007KY-GM
    for ray023@gmail.com; Wed, 31 Oct 2012 10:27:02 -0400
Received: from cgi1703.yourhostingaccount.com ([10.1.12.150])
    by impout01.yourhostingaccount.com with NO UCE
    id HqT21k00s3EEVBe01qT2XN; Wed, 31 Oct 2012 10:27:02 -0400
X-Authority-Analysis: v=2.0 cv=IICA+3TG c=1 sm=1 a=0bVzInp0yugA:10
 a=UT1nndvi2uwA:10 a=e1QP36Bl1McA:10 a=Gm7PUgscJ9MA:10 a=jPJDawAOAc8A:10
 a=mM4-eZ0ns8IA:10 a=PgEUWBzPAAAA:8 a=2RTERvT5bsMA:10 a=t2MNXjrCa7SdDSCJ3MYA:9
 a=wPNLvfGTeEIA:10 a=_W_S_7VecoQA:10 a=MvC2+Uy32Q89d9+Fzzoamg==:117
X-EN-OrigOutIP: 10.1.12.150
X-EN-IMPSID: HqT21k00s3EEVBe01qT2XN
Received: from moo.ray023 by cgi1703.yourhostingaccount.com with local (Exim)
    id 1TTZFR-0003Hw-20
    for ray023@gmail.com; Wed, 31 Oct 2012 10:26:25 -0400
X-EN-Info: U=moo.ray023 P=/index.php
X-EN-CGIUser: moo.ray023
X-EN-CGIPath: /index.php
X-EN-OrigIP: 173.191.128.136
To: ray023@gmail.com
Subject: =?iso-8859-1?Q?Your_MySite_Login?=
X-PHP-Originating-Script: 3651509:Email.php
User-Agent: CodeIgniter
Date: Wed, 31 Oct 2012 10:26:24 -0400
From: "MySite Admin" <ray@MySite.com>
Reply-To: "ray@MySite.com" <ray@MySite.com>
X-Sender: ray@MySite.com
X-Mailer: CodeIgniter
X-Priority: 3 (Normal)
Message-ID: <5091351101295@MySite.com>
Mime-Version: 1.0
Content-Type: multipart/alternative; boundary="B_ALT_50913511012dd"
X-EN-Timestamp: Wed, 31 Oct 2012 10:26:25 -0400
Sender:  "MySite Admin" <ray@MySite.com>

This is a multi-part message in MIME format.
Your email application may not support this format.

--B_ALT_50913511012dd
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Your password is Login to MySite

--B_ALT_50913511012dd
Content-Type: text/html; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

<html><body>Your password is <br><a href=3D"http://MySite.com/">Logi=
n to MySite</a></body></html>

--B_ALT_50913511012dd-- 
```

关于如何用gmail解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T02:42:20.583

在测试了一个雅虎邮件帐户和一个单独的 Gmail 帐户（两者都可以正常工作）之后，我发现问题只出在我的 gmail 帐户上。

经过一番搜索，我发现了一个[关于 SO 的好问题，](https://stackoverflow.com/questions/2421234/gmail-appearing-to-ignore-reply-to)它把我指向[了这篇文章](http://productforums.google.com/forum/#!category-topic/gmail/composing-and-sending-messages/ZRZA5KkTPAA)（特别注意用粗体表示）：

> 我在将邮件发送到我的 Gmail 帐户的 PHP 联系表单中遇到了同样的问题。如果“发件人”地址与“收件人”地址相同，或者**在 GMail 设置中配置为“发送为...”帐户之一，Gmail 会回复“收件人”地址而不是“回复-讲话。**一个简单的解决方法是指定一个非 Gmail 的“发件人”地址。现在它可以工作了，Gmail 正确地尊重了“回复”地址。毫无疑问，这是 Gmail 中的一个错误。

粗体部分是我的 Gmail 的设置方式。

# c# - 如何给出格式 DateTime.Date？

> ID：13160483
> 
> 赞同：-1
> 
> 时间：2012-10-31T14:41:58.323
> 
> 标签：c#, .net, datetime

DateTime dt = DateTime.Now dt.Date 创建为 31.10.2012 00:00:00。它创建为 dd.mm.yyyy 格式，但我需要 dd/mm/yyyy。我可以使用： return new DateTime(d.Year, d.Month, d.Day, 0, 0, 0); 它将为我创建 dd/mm/yyyy 解决方案？请不要翻译字符串。我需要日期时间...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T14:44:32.550

只是转换成字符串的方式，`DateTime`本身没有格式：

```
var result = DateTime.Now.Date
                     .ToString("dd/MM/yyyy", CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T14:44:36.203

该`DateTime`结构不会在内部存储任何格式信息。如果要将`DateTime`实例输出为格式化字符串，只需[`ToString()`](http://msdn.microsoft.com/en-us/library/8tfzyc64.aspx)使用正确的格式字符串调用：

```
var date = DateTime.Now;
var formattedString = date.ToString("dd/MM/yyyy", CultureInfo.InvariantCulture); 
```

如果您需要有关在格式字符串中确切使用哪些说明符的更多信息，请查看：

[MSDN - 自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T14:46:17.197

```
var dt = DateTime.Now;
var stringDt = dt.Date.ToString("dd/MM/yyyy"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T14:46:48.713

`System.DateTime`没有任何格式。您可以按格式查看其字符串表示形式。试试这个

```
Console.WriteLine(DateTime.Now.Date.ToString("dd'/'MM'/'yyyy")); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T14:47:45.430

在您的情况下，您可以简单地使用：

```
dt.ToString("dd/MM/yyyy"); 
```

无论如何，您可以使用 DateTime 的字符串格式：[Here](http://www.geekzilla.co.uk/View00FF7904-B510-468C-A2C8-F859AA20581F.htm)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T14:59:04.233

`DateTime`，数字类型和大多数其他类型不以格式化方式存储它们的值。相反，他们使用二进制表示来存储数据。如果要向用户显示此数据，则必须将其转换为字符串。此转换涉及格式化数据。

```
string formattedDate = DateTime.Now.ToString("dd/MM/yyyy",
                                             CultureInfo.InvariantCulture); 
```

或者

```
Console.WriteLine("Date = {0:dd/MM/yyyy}", DateTime.Now); 
```

`Console.WriteLine`将日期转换为字符串，以便将其写入控制台。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-25T08:20:53.193

DateTime 结构中始终存储有日期和时间。如果您需要单独提取日期作为文本，您可以执行以下操作。

```
var date = DateTime.Now.ToString("d");
Console.WriteLine(date); 
```

这将按照系统中设置的区域性指定的格式打印日期。dotnet 框架支持的标准日期时间格式字符串列表可以在[这里找到](https://msdn.microsoft.com/en-us/library/az4se3k1(v=vs.110).aspx)

# javascript - 显示，隐藏 DIV 鼠标悬停，鼠标悬停

> ID：13160484
> 
> 赞同：7
> 
> 时间：2012-10-31T14:42:03.007
> 
> 标签：javascript, jquery, html, css

我想用 div 创建一个简单的下拉菜单，但我有这个问题：当我的按钮 div 显示很好但是当鼠标从我的链接字段（在这种情况下显示/隐藏文本）中消失时，我的 div 会隐藏。如何更改我的隐藏区域按钮？因为在我的文件中，我无法在下拉 div 中选择链接。

HTML 代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Papermashup.com | Sliding Div</title>
<script src="jquery.js" type="text/javascript"></script>
<script src="dropdown/drop.js" type="text/javascript"></script>
<link type="text/css" href="dropdown/drop.css" rel="stylesheet"/>

</head>

<body>
 <a href="#" class="show_hide">Show/hide</a><br />
    <div class="slidingDiv" style="width:103px;height:60px;">
        <img alt="" height="80" src="images/dropdown.png" width="103">
    </div>
</body>
</html> 
```

CSS 代码：

```
.show_hide {
    display:none;
} 
```

JavaScript 代码：

```
$(document).ready(function(){

    $(".slidingDiv").hide();
    $(".show_hide").show();

$('.show_hide').mouseover(function(){
    $(".slidingDiv").slideToggle();
});
$('.show_hide').mouseout(function(){
    $(".slidingDiv").slideToggle();
});

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T14:44:56.373

您需要将链接和 div 包装到同一个容器中，然后在那里绑定事件。

```
<div class="wrapper">
    <a href="#" class="show_hide">Show/hide</a><br />
    <div class="slidingDiv" style="width:103px;height:60px;">
        <img alt="" height="80" src="images/dropdown.png" width="103">
    </div>
</div> 
```

然后，而不是将事件委托给 show_hide，将其绑定到类“包装器”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T14:57:51.583

除了@roacher 的回答，您还需要通过设置宽度将包装器 div 紧紧地裁剪到图像上。

您还可以将`mouseover`/`mouseout`配对替换为[悬停](https://stackoverflow.com/questions/608788/css-hover-vs-javascript-mouseover)

最后，我不确定您是否要将滑动 div 的高度（60 像素）设置为小于图像（80 像素）？

[jsFiddle](http://jsfiddle.net/wR5D6/1/)在这里

# eclipse - 如何以编程方式“在项目资源管理器中显示”

> ID：13160485
> 
> 赞同：1
> 
> 时间：2012-10-31T14:42:04.140
> 
> 标签：eclipse, plugins, project, explorer

我开发了一个 Eclipse 视图，在该视图中我处理的元素也是工作区中的资源。我想以编程方式在 Project Explorer 中选择资源，例如“导航 > 在 Project Explorer 中显示”。我手里已经有了 IResource。

我怎样才能做到这一点 ？

我看过这个线程：[如何以编程方式更改包资源管理器中的选择](https://stackoverflow.com/questions/11335491/how-to-programmatically-change-the-selection-within-package-explorer) 这与我想要的完全一样，除了项目资源管理器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:48:32.507

*ProjectExplorer* extends from *CommonNavigator*, so there should be the method:

```
public void selectReveal(ISelection selection); 
```

If not, look for "*setSelection(ISelection, boolean)*"
Put your IResource in a IStructuredSelection or something..

# perl - Perl unicode 哈希键查找

> ID：13160489
> 
> 赞同：1
> 
> 时间：2012-10-31T14:42:18.307
> 
> 标签：perl, unicode

我对 perl 中的 unicode 和 unicode 感到非常困惑。

我从 MySQL db 得到了这个哈希值。

```
my $hashFromDB = { "Ves\x{101}kha" => "some value" }; 
```

但我只知道这种符号形式的密钥

```
my $key = "Ves\u0101kha"; 
```

如何将 \uXXXX 表示法转换为 \x{xxx} 以便我可以使用密钥获取值。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T15:00:12.347

`\x{}`Perl 中的 escape 几乎与`\u`JS 中的 escape 一样。您只需使用里面的代码`{}`，就像在您的第一个片段中一样：

```
my $key = "Ves\x{101}kha";
my $value = $hashFromDB->{$key}; 
```

如果您有文字字符串`\u`，我假设这意味着“\u 后跟 4 个十六进制数字以形成代码点编号”，只需使用正则表达式对其进行预处理，它将用具有相同代码的真实字符替换此类序列：

```
$key =~ s/\\u([a-fA-F0-9]{4})/chr(hex($1))/ge; 
```

顺便说一句，`\u`在 Perl 中有不同的含义 - 它大写下一个符号。您可以[在文档中查看完整的转义列表](http://p3rl.org/perlrebackslash)。

# c# - 使用 .NET 4.5 解压缩受密码保护的 ZIP 文件

> ID：13160490
> 
> 赞同：35
> 
> 时间：2012-10-31T14:42:19.850
> 
> 标签：c#, .net, zip, .net-4.5

Microsoft 在 .NET 4.5 中引入了对 ZIP 文件处理的改进[Microsoft 在System.IO.Compression](http://msdn.microsoft.com/en-us/library/3z72378a.aspx)。即[ZipArchive](http://msdn.microsoft.com/en-us/library/system.io.compression.ziparchive.aspx)和[ZipFile](http://msdn.microsoft.com/en-us/library/system.io.compression.zipfile.aspx)类。但是，我还没有看到使用本地 .NET ZIP 文件处理密码保护文件的方法。有没有办法做到这一点？（我知道有相当不错的 3rd 方 zip 文件库，这不是问题。）

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-31T14:57:35.260

不幸的是没有。.Net Framework 4.5 不支持受密码保护的 zip 文件。在这种情况下，您必须切换到著名的 3rd 方库之一。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-01-14T00:04:03.380

正如所指出的，[DotNetZip](https://dotnetzip.codeplex.com/)是您的朋友。解压缩 zip 文件非常简单

```
using ( ZipFile archive = new ZipFile( @"c:\path\to\your\password\protected\archive.zip",) )
{
  archive.Password = "your-pass-word-here" ;
  archive.Encryption = EncryptionAlgorithm.PkzipWeak ; // the default: you might need to select the proper value here
  archive.StatusMessageTextWriter = Console.Out;

  archive.ExtractAll( @"c:\path\to\unzip\directory\", ExtractExistingFileAction.Throw ) ;
} 
```

根据我的经验，DotNetZip 的运行速度与[Info-Zip 的](http://www.info-zip.org/pub/infozip/)开源[解压缩](http://www.info-zip.org/pub/infozip/)实用程序一样快，并且使用的内存量大致相同。

* * *

**编辑注释：** DotNetZip 曾经住在 Codeplex。Codeplex 已关闭。Codeplex仍然[提供](https://dotnetzip.codeplex.com/)旧存档。看起来代码已经迁移到 Github：

*   [https://github.com/DinoChiesa/DotNetZip](https://github.com/DinoChiesa/DotNetZip)。貌似是原作者的repo。
*   [https://github.com/haf/DotNetZip.Semverd](https://github.com/haf/DotNetZip.Semverd)。这看起来是当前维护的版本。它还通过 Nuget 打包在[https://www.nuget.org/packages/DotNetZip/](https://www.nuget.org/packages/DotNetZip/)

* * *

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-01-13T23:39:43.743

离子方法很棒。我尝试了其他三种方法，这是迄今为止最好的。不要浪费时间，好好利用它。

[https://dotnetzip.codeplex.com/wikipage?title=PS-Examples](https://dotnetzip.codeplex.com/wikipage?title=PS-Examples)

支持密码加密和其他 zip 选项。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-31T14:52:20.083

在查看4.5 框架提供的[方法](http://msdn.microsoft.com/en-us/library/system.io.compression.ziparchive.aspx)时，没有一种方法允许使用 zip 文件输入密码。正如您在问题中提到的，第 3 方将是您最好的选择。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-03-29T22:34:21.923

本地 .net 4.5 库中似乎不支持受密码保护的 zip 文件，类似于 Windows 资源管理器中似乎不支持的方式，即使使用 Windows 10 也是如此！有些人报告说他们使用 3rd 方 DotNetLib 存在 zip 损坏问题，因此请确保您进行广泛测试，如果您确实走这条路或尝试使用[SharpZipLib](http://icsharpcode.github.io/SharpZipLib/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-03T15:25:28.103

我发现在 c# Install PM 中解压的方法非常简单
（如果有新版本，你可以找到！）

```
Install-Package Ionic.Zip -Version 1.9.1.8 
```

代码 C#

```
string zipFile = @"C:\Users\Fesslersoft\Desktop\ZipTest\Test.zip";
string targetDirectory = @"C:\Users\Fesslersoft\Desktop\ZipTest\";

using (Ionic.Zip.ZipFile zip = Ionic.Zip.ZipFile.Read(zipFile))
{
    zip.Password = "1234";
    zip.ExtractAll(targetDirectory, Ionic.Zip.ExtractExistingFileAction.DoNotOverwrite);
}

Console.WriteLine("Zip file has been successfully extracted.");
Console.Read(); 
```

来源：[https ://codesnippets.fesslersoft.de/extract-a-password-protected-zip-file-using-dotnetzip/](https://codesnippets.fesslersoft.de/extract-a-password-protected-zip-file-using-dotnetzip/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-31T13:54:16.710

对于那些以 .Net Standard 2.0 为目标的用户，SharpZipLib 做得很好，可以将内存中受密码保护的 zip 文件优雅地提取到字节 []。

[https://github.com/icsharpcode/SharpZipLib](https://github.com/icsharpcode/SharpZipLib)

在相同的情况下尝试了 Ionic，但可以使用 ZipInputStream 提取文件，这会生成损坏的提取字节数组。

# .net - DataGrid 滚动条拇指在滚动期间更改大小

> ID：13160491
> 
> 赞同：2
> 
> 时间：2012-10-31T14:42:23.147
> 
> 标签：.net, wpf, datagrid, scrollbar, virtualization

我有一个网格，其中有不同高度的行。我注意到当我向下滚动网格时，滚动条拇指会改变它的高度。

经过一番调查，我发现这是由 UI 虚拟化引起的：网格不会创建所有项目，因此它不知道网格的总高度，因此它通过计算平均行高来确定总高度它确实创建的行，并将其乘以行数。这会导致拇指在滚动期间更改其大小，因为虚拟化会创建新项目并销毁不再显示的项目，这会使网格认为总网格大小已更改。

**我的问题**：有没有一种方法可以使用自己的启发式方法自己设置滚动拇指大小？最好采用非侵入式的方式，这样我就不必重新模板化我的控件。禁用虚拟化不是一种选择。

![](../Images/ad6f6481516940b97a6ab004e9491e56.png) ![](../Images/7cc6ec1b4f502a007a879fad1fc0c851.png)

注意：我使用的是 DevExpress DataGrid，但这种行为也发生在 WPF DataGrid 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:52:42.017

您是否考虑过使用模板来设置[滚动条的样式](http://www.codeproject.com/Articles/37366/Styling-A-ScrollViewer-Scrollbar-In-WPF)？

*请注意，您可以在链接中专门设置拇指*样式...
关于您的评论，您还可以尝试绑定到 DataGrid 中的项目数并执行任何计算，以根据数字使拇指的大小动态化的项目。

# javascript - 需要自动刷新的多个页面，每个页面都保存了不同的选项

> ID：13160496
> 
> 赞同：3
> 
> 时间：2012-10-31T14:42:26.683
> 
> 标签：javascript, jquery, session, cookies, fragment-identifier

我目前正在开发一个用户登陆页面以构建自定义循环地图的项目。当用户选择地图类型时，一个新的浏览器选项卡（这是直接发生的，我在这件事上没有发言权）打开那个特定的地图循环器。有速度、开始和停止时间的控件，以及启用 15 分钟自动刷新的复选框。目前，我使用 JQuery 来捕获下拉列表和复选框，将值保存到 cookie，然后在页面刷新时将它们加载回来。

这显然工作正常，除了在气象学中，我可能需要打开和循环两张地图。有时甚至更多。如果我使用 cookie，则第二个地图将使用值作为第一个。如果我更改第二张地图的选项，第一张地图将使用这些选项刷新。这并不理想。

我看到会话和 cookie 是一样的。如果我打开选项卡，这些值将在每个地图循环器中持续存在。我的另一个选择可能是在 URL 上使用主题标签，并在此处保留选择的值并在刷新时将其解析回。我错过了什么吗？我宁愿不使用主题标签，因为它看起来很乱，但我不知道如何在 cookie 中使用不同值的多个选项卡。如果用户打开了 10 个标签怎么办？我的问题是，对于这个应用程序，哪个是实现的最佳解决方案？

我们在页面中使用 javascript/JQuery 和 php。我们的产品必须兼容 Chrome、Firefox 和 IE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:25:36.877

选项卡是指浏览器选项卡还是同一页面上的 div？如果您的标签是一页上的元素，只需用 uniq 数据装饰它们

```
<div class="mytab" data-session="1">
//tab data
</div>
<div class="mytab" data-session="2">
//tab data
</div> 
```

当您刷新数据时：

```
$('.mytab[data-session]').each(function(){
   $.post('/refres', { sessionId : $(this).data('session')}, function(html){
      $(this).html(html);
   })
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:40:27.957

如果您在每个选项卡上使用新选项卡，则创建隐藏的会话密钥

```
<input type="hidden" value="@Guid.NewGuid().ToString()" id="sessionKey" /> 
```

刷新并保存时将其传递给控制器​​。对用户隐藏

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T14:54:52.640

为匹配单个地图的 cookie 数据添加一个唯一 ID。所以 map2 上的 option1 变成了 map2option1

# visual-studio-2008 - Visual Studio 2008 - 不会进入调试模式或加载 ASP.NET Web 应用程序

> ID：13160497
> 
> 赞同：1
> 
> 时间：2012-10-31T14:42:29.520
> 
> 标签：visual-studio-2008, asp.net-mvc-2, visual-studio-debugging

我整个早上都在做开发，现在突然，当我按 F5 从我的 Visual Studio 中加载 ASP.NET Web 应用程序时，Web 应用程序从未成功加载，我无法进入调试模式.

我在我的应用程序的 Global.asax 文件中设置了一个断点，以查看它是否崩溃，并且我在断点行的左侧得到了“空圆圈”。当我将鼠标悬停在断点上时，我看到一个工具提示，上面写着“断点不会被命中。没有为此文档加载任何符号。”

我可能会做些什么来导致这种情况？

谢谢。

编辑 - 此外，当我实际在调试模式下运行并打开 Debug -> Windows -> Modules 窗口时，我什至在模块列表中都看不到我的任何 .dll。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:00:33.433

答案是我不得不删除这个文件夹的内容：

C:/Users/Adam/AppData/Local/Temp/Temporary ASP.NET Files/root/

# dll - tcpclient C3145

> ID：13160512
> 
> 赞同：1
> 
> 时间：2012-10-31T14:43:13.420
> 
> 标签：dll, global, tcpclient

我目前正在使用 Visual Studio C++ 生成 .dll 以便在两个程序之间传输数据：本质上，一个程序会在事件发生时通知另一个程序。我正在尝试通过 TcP 客户端套接字来执行此操作。

我的头文件是这样的：

```
#include <string>

using namespace std;

extern "C"
{
    __declspec (dllexport) bool trackerConnect( char* ipAddress, int port );
    __declspec (dllexport) void sendEvent ( char* ev);
    __declspec (dllexport) void disconnect();
} 
```

我的 .cpp 文件看起来像这样

```
#define WIN32_LEAN_AND_MEAN

#include "logEvents.h"
#using "system.dll"

using namespace System;
using namespace System::Net;
using namespace System::Net::Sockets;
using namespace System::Text;

TcpClient^ logClient;
NetworkStream^ logStream;

bool trackerConnect( char* ipAddress, int port )
{
    /*Connects to server, gets stream, and returns whether the connection was
    successful or not*/
}

void sendEvent ( char* ev )
{
    /*Converts ev into a Byte array and sends it to the server to notify it 
    that an event has occurred*/
}

void disconnect ()
{
    //closes the connection with the server
} 
```

鉴于所有三个函数都需要访问 TcPClient，我将其声明为全局变量。但是，当我编译时，我收到错误 C3145：全局或静态变量可能没有托管类型。如果我不能将 TcPClient 声明为全局变量，我应该如何在三个函数中使用它？

# php - 当 groupOfUniqueNames 用于定义组时，如何查找用户所属的所有 LDAP 组

> ID：13160514
> 
> 赞同：0
> 
> 时间：2012-10-31T14:43:15.333
> 
> 标签：php, ldap

当我连接到 LDAP 服务器并检索用户时，我得到了正确的用户记录，但我没有看到任何 memberOf、isMemberOf 或任何其他类似的属性来告诉我他们在哪些组中：

```
$query = "(&(uid={$username})(objectClass=person))";
$result = ldap_search($ldapconnection, $context, $query);
$user = ldap_get_entries($ldapconnection, $result); 
```

但是，如果我检索 LDAP 组，则可以看到包含所有正确用户的用户列表：

```
$query = "(&({cn=".$groupname.")(objectClass=groupOfUniqueNames))";
$result = ldap_search($ldapconnection, $context, $query);
$group = ldap_get_entries($ldapconnection, $result); // Users in array attribute 
```

这些组是动态的 groupOfUniqueNames 组，每个用户都是该组的唯一成员。

我是否遗漏了什么，或者服务器未配置为显示 memberOf (MS AD)？有没有办法在不遍历每个组的情况下获得特定用户的成员资格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:40:31.337

我不确定为什么您没有从查询中获取 memberOf 属性，但是您应该能够通过以下方式检索用户的组成员身份：

```
$query = "(&(objectClass=groupOfUniqueNames)(uniqueMember=" . $username . "))"; 
```

看起来 uniqueMember 默认情况下没有索引（http://msdn.microsoft.com/en-us/library/windows/desktop/ms680520(v=vs.85).aspx），所以如果您有权这样做，并遇到性能问题，可能值得索引它。

# java - 运行时的 java.lang.NullPointerException

> ID：13160515
> 
> 赞同：0
> 
> 时间：2012-10-31T14:43:23.820
> 
> 标签：java, android

我不明白为什么它返回给我这个错误，请帮助我！:(这是错误：

```
10-31 15:33:28.595: E/Trace(7356): error opening trace file: No such file or directory (2)
10-31 15:33:29.125: E/AndroidRuntime(7356): FATAL EXCEPTION: main
10-31 15:33:29.125: E/AndroidRuntime(7356): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.appuniradiocesena/com.example.appuniradiocesena.SwipeyTabsSampleActivity}: java.lang.NullPointerException
10-31 15:33:29.125: E/AndroidRuntime(7356):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
10-31 15:33:29.125: E/AndroidRuntime(7356):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
10-31 15:33:29.125: E/AndroidRuntime(7356):     at android.app.ActivityThread.access$600(ActivityThread.java:140)
10-31 15:33:29.125: E/AndroidRuntime(7356):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
10-31 15:33:29.125: E/AndroidRuntime(7356):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-31 15:33:29.125: E/AndroidRuntime(7356):     at android.os.Looper.loop(Looper.java:137)
10-31 15:33:29.125: E/AndroidRuntime(7356):     at android.app.ActivityThread.main(ActivityThread.java:4898)
10-31 15:33:29.125: E/AndroidRuntime(7356):     at java.lang.reflect.Method.invokeNative(Native Method)
10-31 15:33:29.125: E/AndroidRuntime(7356):     at java.lang.reflect.Method.invoke(Method.java:511)
10-31 15:33:29.125: E/AndroidRuntime(7356):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
10-31 15:33:29.125: E/AndroidRuntime(7356):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
10-31 15:33:29.125: E/AndroidRuntime(7356):     at dalvik.system.NativeStart.main(Native Method)
10-31 15:33:29.125: E/AndroidRuntime(7356): Caused by: java.lang.NullPointerException
10-31 15:33:29.125: E/AndroidRuntime(7356):     at com.example.appuniradiocesena.SwipeyTabsSampleActivity.onCreate(SwipeyTabsSampleActivity.java:77)
10-31 15:33:29.125: E/AndroidRuntime(7356):     at android.app.Activity.performCreate(Activity.java:5184)
10-31 15:33:29.125: E/AndroidRuntime(7356):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
10-31 15:33:29.125: E/AndroidRuntime(7356):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
10-31 15:33:29.125: E/AndroidRuntime(7356):     ... 11 more 
```

这是我运行时的第一堂课：

```
import java.io.IOException;
import java.net.URI;
import java.net.URISyntaxException;
import java.util.List;
import java.util.TimerTask;

import net.moraleboost.streamscraper.ScrapeException;
import net.moraleboost.streamscraper.Scraper;
import net.moraleboost.streamscraper.Stream;
import net.moraleboost.streamscraper.scraper.IceCastScraper;
import android.annotation.TargetApi;
import android.content.Context;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.StrictMode;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.MenuItem.OnMenuItemClickListener;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageButton;
import android.widget.ProgressBar;
import android.widget.TextView;
import android.widget.Toast;

public class SwipeyTabsSampleActivity extends FragmentActivity {
private Button streamButton;

private ImageButton playButton;

private TextView textStreamed;
private TextView textSong;

private boolean isPlaying;

private StreamingMediaPlayer audioStreamer;

private SwipeyTabs mTabs;
private ViewPager mViewPager;

private static final String [] TITLES = {
    "Live Stream",
    "Palinsesto",
    "Programmi",
    "Eventi",
};

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_swipeytab);

    mViewPager = (ViewPager) findViewById(R.id.viewpager);
    mTabs = (SwipeyTabs) findViewById(R.id.swipey_tab);

    SwipeyTabsPagerAdapter adapter = new SwipeyTabsPagerAdapter(this,
            getSupportFragmentManager());
    mViewPager.setAdapter(adapter);
    mTabs.setAdapter(adapter);
    mViewPager.setOnPageChangeListener(mTabs);
    mViewPager.setCurrentItem(0);
/*
    Inizializza();

    //new AsyncTaskProc().execute();

    //new Timer().schedule(new IceCastPoll(), 1000);
     */
}

private void startStreamingAudio() {
    try { 
        final ProgressBar progressBar = (ProgressBar) findViewById(R.id.progress_bar);
        if ( audioStreamer != null) {
            audioStreamer.interrupt();
        }

        audioStreamer = new StreamingMediaPlayer(this, textStreamed, playButton, streamButton,progressBar);
        audioStreamer.startStreaming("http://r35798.ovh.net:8000/listen",1677, 214);
        streamButton.setEnabled(false);
    } catch (IOException e) {               
    }

}
private void Inizializza()
{
    textStreamed = (TextView) findViewById(R.id.text_kb_streamed);
    streamButton = (Button) findViewById(R.id.button_stream);
    streamButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            startStreamingAudio();
        }});

    playButton = (ImageButton) findViewById(R.id.button_play);
    playButton.setEnabled(false);
    playButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            if (audioStreamer.getMediaPlayer().isPlaying()) {
                audioStreamer.getMediaPlayer().pause();
                playButton.setImageResource(R.drawable.button_play);
            } else {
                audioStreamer.getMediaPlayer().start();

                audioStreamer.startPlayProgressUpdater();
                playButton.setImageResource(R.drawable.button_pause);
            }
            isPlaying = !isPlaying;
        }});
}
private class SwipeyTabsPagerAdapter extends FragmentPagerAdapter implements
SwipeyTabsAdapter {

    private final Context mContext;

    public SwipeyTabsPagerAdapter(Context context, FragmentManager fm) {
        super(fm);

        this.mContext = context;
    }

    @Override
    public Fragment getItem(int position) {
        return SwipeyTabFragment.newInstance(TITLES[position]);
    }

    @Override
    public int getCount() {
        return TITLES.length;
    }

    public TextView getTab(final int position, SwipeyTabs root) {
        TextView view = (TextView) LayoutInflater.from(mContext).inflate(
                R.layout.swipey_tab_indicator, root, false);
        view.setText(TITLES[position]);
        view.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                mViewPager.setCurrentItem(position);
            }
        });

        return view;
    }

}

public void onPageScrollStateChanged(int arg0) {
    // TODO Auto-generated method stub

}

public void onPageScrolled(int arg0, float arg1, int arg2) {
    // TODO Auto-generated method stub

}

public void onPageSelected(int arg0) {
    // TODO Auto-generated method stub

}
//////////////////////////////////////

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    menu.add("Uscita").setOnMenuItemClickListener(
            new OnMenuItemClickListener() {
                public boolean onMenuItemClick(MenuItem item) {
                    Toast.makeText(getApplicationContext(),
                            "Uscita Programma", Toast.LENGTH_SHORT).show();
                    finish();
                    System.exit(0);

                    return true;
                }
            });
    ;

    return true;
}

public class IceCastPoll extends TimerTask {

    public IceCastPoll() {

    }

    @TargetApi(9)
    public void run() {
        Scraper scraper = new IceCastScraper();
        try {

            List<Stream> streams=null;
            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
            StrictMode.setThreadPolicy(policy);
            streams = scraper.scrape(new URI("http://r35798.ovh.net:8000"));            
            for (Stream stream: streams) {
                Toast.makeText(getApplicationContext(),stream.getCurrentSong(), Toast.LENGTH_LONG).show();
                //textSong.setText((stream.getCurrentSong()));
            }
        }
        catch (URISyntaxException e) {

            System.out.println(e.getMessage());
        }
        catch (ScrapeException e) {

            System.out.println(e.getMessage());
        }

    }

}

class AsyncTaskProc extends AsyncTask<Void, String, Void> {
    List<Stream> streams=null;

    protected void onPostExecute()
    {

        textSong =(TextView) findViewById(R.id.textViewCurrentSong);

        try {
            for (Stream stream: streams) {

                textSong.setText((stream.getCurrentSong()));
            }
        } catch (Exception e) {
            //Toast.makeText(getApplicationContext(),e.toString(), Toast.LENGTH_SHORT).show();

        }

    }
    @TargetApi(9)
    @Override
    protected Void doInBackground(Void... unused) {

        Scraper scraper = new IceCastScraper();

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);

        try {
            streams = scraper.scrape(new URI("http://r35798.ovh.net:8000/"));
        } catch (ScrapeException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            //Toast.makeText(getApplicationContext(),e.toString(), Toast.LENGTH_LONG).show();
        } catch (URISyntaxException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            //Toast.makeText(getApplicationContext(),e.toString(), Toast.LENGTH_LONG).show();
        }

        return (null);
    }

}
} 
```

当我尝试编译和运行应用程序崩溃时，我不明白为什么。谢谢;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:50:20.230

这是堆栈的重要部分：

```
Caused by: java.lang.NullPointerException
    at com.example.appuniradiocesena.SwipeyTabsSampleActivity.onCreate(SwipeyTabsSampleActivity.java:77) 
```

--> 你应该`NullPointerException`通过查看`SwipeyTabsSampleActivity.java`.

也许您正在调用`findViewById()`布局中不存在的 ID？（这将使该方法返回`null`）

# c# - 从 SQL 数据库中读取 int 值

> ID：13160521
> 
> 赞同：1
> 
> 时间：2012-10-31T14:43:45.263
> 
> 标签：c#, database, int

请问有人可以帮我避免读取数据库中类型的值

> int s = dr["IdSociete"]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:45:45.933

避免像这样的空值转换，否则 ti 会给你一个错误

```
if(dr["IdSociete"]!=DBNull.Value)
   int s =  Convert.ToInt32(dr["IdSociete"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:51:04.417

您是否正在尝试获取列的类型？如果“dr”是 System.Data.DataRow，那么您可以通过以下方式访问“IdSociete”的列类型：

```
var columnType = dr.Table.Columns["IdSociete"].DataType; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T14:44:32.960

你可以使用**[Int32.TryParse](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)**

```
int number;
bool result = Int32.TryParse(dr["IdSociete"], out number); 
```

# javascript - 在 JavaScript 中检查数组是否包含具有特定属性值的对象？

> ID：13160522
> 
> 赞同：8
> 
> 时间：2012-10-31T14:43:45.907
> 
> 标签：javascript, arrays, object

如果我有类似的东西

```
[Object(id:03235252, name:"streetAddress"), Object(id:32624666, name:"zipCode")...] 
```

如何从该数组中**删除****名称设置为**“zipCode”的对象？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-31T14:48:31.750

如果你需要修改现有的 Array，你应该使用`splice()`.

```
for (var i = array.length - 1; i > -1; i--) {
    if (array[i].name === "zipCode")
        array.splice(i, 1);
} 
```

请注意，我正在反向循环。这是为了处理当您执行 a 时`.splice(i, 1)`，数组将被重新索引的事实。

如果我们进行前向循环，我们还需要在`i`每次执行 a 时进行调整`.splice()`以避免跳过索引。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-31T14:45:51.350

```
arr = arr.filter(function (item) {
  return (item.name !== 'zipCode');
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T14:45:50.023

```
var i = array.length;
while(i-- > 0) {
    if (array[i].name === "zipCode")
        array.splice(i, 1);
} 
```

*   向后循环遍历数组（因此拼接时不必跳过索引）
*   检查每个项目的名称，如果它是“邮政编码”
    *   如果是，请使用`yourArray.splice(index,1)`;将其拼接起来。

然后：

*   如果有多个名称的值可能为“zipCode”，请继续
*   打破循环

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-01T11:03:03.717

## 更新的建议

由于在数组上做原型是不好的做法，因此更新了这个答案，所以让使用建议的人在这里编写更好的代码是一个更好的选择：

```
const myArr = [
  {
    name: "lars",
    age: 25
  }, {
    name: "hugo",
    age: 28
  }, {
    name: "bent",
    age: 24
  }, {
    name: "jimmy",
    age: 22
  }
];

const findAndRemove = (array, prop, value) => {
  return array.filter((item) => item[prop] !== value);
}

const newArr = findAndRemove(myArr, 'name', 'jimmy')

console.log(newArr) 
```

可以在**[这里找到并测试新代码](https://codepen.io/sp90/pen/jOrNzwE?editors=0010)**

## 老建议

~~这也可以通过阵列上的原型来完成~~

 ~~```
Array.prototype.containsByProp = function(propName, value){
      for (var i = this.length - 1; i > -1; i--) {
        var propObj = this[i];
          if(propObj[propName] === value) {
            return true;
        }
      }
    return false;
} 

var myArr = [
  {
    name: "lars",
    age: 25
  }, {
    name: "hugo",
    age: 28
  }, {
    name: "bent",
    age: 24
  }, {
    name: "jimmy",
    age: 22
  }
];

console.log(myArr.containsByProp("name", "brent")); // Returns false
console.log(myArr.containsByProp("name", "bent")); // Returns true 
```~~ 

~~代码也可以在**[这里找到和测试](http://codepen.io/sp90/pen/rOjoEm)**~~

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-24T09:56:31.043

这可能是一个**详细而简单**的解决方案。

```
//plain array
var arr = ['a', 'b', 'c'];
var check = arr.includes('a');
console.log(check); //returns true
if (check)
{
   // value exists in array
   //write some codes
}

// array with objects
var arr = [
      {x:'a', y:'b'},
      {x:'p', y:'q'}
  ];

// if you want to check if x:'p' exists in arr
var check = arr.filter(function (elm){
    if (elm.x == 'p')
    {
       return elm; // returns length = 1 (object exists in array)
    }
});

// or y:'q' exists in arr
var check = arr.filter(function (elm){
    if (elm.y == 'q')
    {
       return elm; // returns length = 1 (object exists in array)
    }
});

// if you want to check, if the entire object {x:'p', y:'q'} exists in arr
var check = arr.filter(function (elm){
    if (elm.x == 'p' && elm.y == 'q')
    {
       return elm; // returns length = 1 (object exists in array)
    }
});

// in all cases
console.log(check.length); // returns 1

if (check.length > 0)
{
   // returns true
   // object exists in array
   //write some codes
} 
```

# android - IntelliJ：让 GridLayout 工作

> ID：13160523
> 
> 赞同：11
> 
> 时间：2012-10-31T14:43:52.767
> 
> 标签：android, grid-layout

我尝试在我的应用程序中使用 GridLayout，但它不起作用。我使用了这个教程：[IntelliJ 和 android.support.v7.widget.GridLayout](https://stackoverflow.com/questions/12468606/intellij-and-android-support-v7-widget-gridlayout)

但它仍然无法正常工作。

我收到以下错误：

```
error: No resource identifier found for attribute 'columnCount' in package 'android'
error: No resource identifier found for attribute 'rowCount' in package 'android' 
```

任何进一步的提示？

编辑：使用我的实际 XML：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              xmlns:grid="http://schemas.android.com/apk/res-auto"
              android:layout_width="350dp"
              android:layout_height="fill_parent"
              android:orientation="vertical">

    <EditText android:layout_height="wrap_content"
              android:layout_width="fill_parent"
              android:cursorVisible="false"
              android:id="@+id/txtName"/>

    <android.support.v7.widget.GridLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            grid:columnCount="3"
            grid:rowCount="2">

        <TextView   
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="1,1" />

    </android.support.v7.widget.GridLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-05-06T13:59:26.610

今天我为此苦苦挣扎，在[android开发网站上](http://developer.android.com/tools/support-library/features.html)我找到了更简单的解决方案以及为什么它们会出现问题。v7 库中的 GridLayout 未与 v7 appcompat 库连接，因此您必须手动添加 v7 gridlayout 库依赖项。

如果您使用 gradle 则`build.gradle`只需添加

```
dependencies {
    ...
    compile 'com.android.support:gridlayout-v7:23.2.0'
} 
```

一切都应该正常工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:57:30.033

您需要使用完整的包和类名：

```
<android.support.v7.widget.GridLayout> 
```

并添加命名空间，以便其他控件使用默认包：

```
xmlns:grid="http://schemas.android.com/apk/res-auto" 
```

# objective-c - 我可以在父类中检测 UITableView 委托吗？

> ID：13160525
> 
> 赞同：0
> 
> 时间：2012-10-31T14:43:58.123
> 
> 标签：objective-c, ios, xcode, uitableview, viewcontroller

我有一个导入两个 TableViewControllers 的 ViewController。

我有在这些子类中执行的委托/数据源方法，但是无论如何 ViewController 是否可以判断每个 TableView 何时执行了委托方法 didSelectRowAtIndexPath 等方法，或者我是否必须在每个 tableviewcontroller 中添加方法以轮询单元格是否已经被选中？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:55:39.363

那么你可以创建一个`@protocol`这样的：

```
@protocol MyChildViewControllerDelegate<NSObject>
@optional
- (void)tablView:(UITableView *)tv didSelectRowInChildViewControllerAtIndexPath:(NSIndexPath*)indexPath;
@end 
```

现在`MyChildViewControllerDelegate`在类中`ChildViewController`创建一个属性`@synthesize`，如下所示：

```
@property(assign, nonatomic) id<MyChildViewControllerDelegate> delegate; 
```

现在，当在父类中创建一个实例时，`ChildViewController`通过如下方式分配委托`self`：

```
ChildViewController *ch = [[ChildViewController alloc] initWithBlahBlah];
ch.delegate = self; 
```

并实施`MyChildViewControllerDelegate`方法。

现在，当您收到任何`UITableViewDelegate`回调时，`ChildViewController`通过委托告诉您的父类。

```
- (void)tableView:(UITableView *)tView didSelectRowAtIndexPath:(NSIndexPath *)iPath
{
      [delegate tablView:tView didSelectRowInChildViewControllerAtIndexPath:iPath];
} 
```

而不是自己制作，你`MyChildViewControllerDelegate`也可以使用苹果提供的`UITableViewDelegate`（你觉得舒服）。

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T15:19:05.930

您可以定义自己的通知，例如“MyDidSelectRowAtIndexPathNotification”，并使您的主视图控制器成为此通知的观察者：

```
#define kMyDidSelectNotification @"MyDidSelectRowAtIndexPathNotification"
[[NSNotificationCenter defaultCenter] addObserver:self 
    selector:@selector(myDidSelectAction:) name:kMyDidSelectNotification object:nil]; 
```

然后，在您的实现中`tableView:didSelectRowAtIndexPath`，您可以简单地为所有观察者触发此通知：

```
[[NSNotificationCenter defaultCenter] 
    postNotificationName:kMyDidSelectNotification object:nil]; 
```

您可以在此处看到`UITableViewCell`，如果需要，您可以在通知中传递 或其他对象。您的通知处理程序（`myDidSelectAction:`在这种情况下）接收一个`NSNotification`对象，该对象将包含您在 postNotification 操作中传递的对象。

在我看来，虽然协议也可以工作，但设置起来更复杂。

查看[Notification Center](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)的文档。

# c++ - C++ 类出现错误 (SDL)

> ID：13160526
> 
> 赞同：-2
> 
> 时间：2012-10-31T14:43:58.027
> 
> 标签：c++, class, sdl

> **可能重复：**
> [什么是未定义的引用/未解决的外部符号错误，我该如何解决？](https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix)

嗨，我是菜鸟，我刚开始学习它们。我需要有关此代码的帮助，因为我不知道为什么会收到此错误。

这是我的代码

主文件

```
 #include "stdafx.h"
    #include "player.h"

SDL_Surface* screen = NULL;

void init()
{
    SDL_Init( SDL_INIT_VIDEO );

    //Set up screen
    screen = SDL_SetVideoMode( 640, 480, 32,  SDL_DOUBLEBUF |SDL_HWSURFACE |SDL_SWSURFACE);

    //SDL_BlitSurface( hello, NULL, screen, NULL );

        _putenv("SDL_VIDEO_CENTERED=1"); // Center the window 
    SDL_Init(SDL_INIT_VIDEO);
    SDL_WM_SetCaption("SDL Animation", "SDL Animation");
    //screen = SDL_SetVideoMode(SCREEN_WIDTH, SCREEN_HEIGHT, 0, SDL_DOUBLEBUF |SDL_HWSURFACE |SDL_SWSURFACE);
    SDL_EnableKeyRepeat(0, 1600000);
    if(screen == NULL){
         printf("SDL_Init failed: %s\n", SDL_GetError());
    }

}

int _tmain(int argc, _TCHAR* argv[])
{   
    init();
    //SDL_Surface* sprite = SDL_BlitSurface(sprite,rcSprite, screen, &rcSprite);

    Player player;

    //Update Screen
    SDL_Flip( screen );

    SDL_FreeSurface(screen); 
    return 0;
} 
```

播放器.h

```
 #ifndef PLAYER_H
#define PLAYER_H

#include "SDL.h"
#include "SDL_image.h"
#include "SDL_TTF.h"

class Player
{
public:
    Player (){
        HP = 20;
        playerScore = 0;
        playerSpeed = 10;
        playerJump = 20;
    }
    ~Player();
    int getScore() { return playerScore;}
    void setSpeed(int speed) { int playerSpeed = speed;}
    void setJump (int jump) {playerJump = jump;}
    void movePlayer(int x ,int y);
    void runRightAnim (SDL_Rect* clip);
    void runLeftAnim (SDL_Rect* clip);
    void drawPlayer(int x, int y, SDL_Surface* source, SDL_Surface* destination);
    static SDL_Rect sprite;
private:
    static int HP;
    static int playerScore;
    static int playerSpeed;
    static int playerJump;
    static int animRate;

};

#endif 
```

和最后一个 player.cpp

```
 #include "stdafx.h"

#include "SDL.h"
#include "SDL_image.h"
#include "SDL_TTF.h"

#include "player.h"

void Player::runRightAnim(SDL_Rect* clip)
{

}

void Player::runLeftAnim(SDL_Rect* clip)
{

}

void Player::drawPlayer(int x, int y, SDL_Surface* source, SDL_Surface* destination)
{
     SDL_Rect dst;
          dst.x = x;
          dst.y = y;
     SDL_BlitSurface(source,NULL,destination,&dst);
     //SDL_BlitSurface(selectionCanvas, NULL, canvas, selectionRect);
} 
```

错误是

```
1>main.obj : error LNK2019: unresolved external symbol "public: __thiscall Player::~Player(void)" (??1Player@@QAE@XZ) referenced in function _wmain
1>main.obj : error LNK2001: unresolved external symbol "private: static int Player::playerJump" (?playerJump@Player@@0HA)
1>main.obj : error LNK2001: unresolved external symbol "private: static int Player::playerSpeed" (?playerSpeed@Player@@0HA)
1>main.obj : error LNK2001: unresolved external symbol "private: static int Player::playerScore" (?playerScore@Player@@0HA)
1>main.obj : error LNK2001: unresolved external symbol "private: static int Player::HP" (?HP@Player@@0HA) 
```

代码显然没有完成，但我只想摆脱这个错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:47:42.187

"unresolved external" errors occur when you declare and attempt to use a function, but you don't implement it. In particular:

> 1>main.obj : error LNK2019: unresolved external symbol "public: __thiscall Player::~Player(void)" (??1Player@@QAE@XZ) referenced in function _wmain

Is because though you have a declaration for `Player::~Player()`:

```
class Player
{
public:
  /* ... */
    ~Player(); 
```

This method is never implemented.

Fix this error by implementing the methods in question.

**Edit:** Additionally, your class has static member variables which are declared but never defined. Your declaration is here:

```
class Player
{
/* ...  */
private:
    static int HP;
    static int playerScore;
    static int playerSpeed;
    static int playerJump;
    static int animRate;

}; 
```

But this declaration does not define the variables. You must define and initialize these statics, else you will get (are getting) unresolved externals here as well.

Generally somewhere in the cpp file:

```
int Player::playerScore = 0; 
```

As an aside, you are using `static` member variables for a class which appears to be instantiatable multiple times. If you do this:

```
Player a;
Player b; 
```

to instantiate multiple `Player` objects, because the member variables are declared `static` they will each "share" the same `playerScore` etc. This doesn't make a lot of sense when looking at your code. You probably won't want these to be `static`s.

# java - 从java中创建的球数组制作2个新的球数组

> ID：13160534
> 
> 赞同：2
> 
> 时间：2012-10-31T14:44:10.173
> 
> 标签：java, arrays, eclipse

我目前正在 Eclipse 中编写一个 Java 台球游戏小程序。我在小程序的开头声明了一个包含 16 个球的数组，它在 start() 方法中处理所有球的定位，如下所示：

```
Ball b[] = new Ball[16];

public void start()
{
b[0] = new Ball(200,425,0,0);
b[1] = new Ball(200, 140, 0, 0);
b[2] = new Ball(190, 120, 0, 0);
b[3] = new Ball(210, 120, 0, 0);
b[4] = new Ball(180, 100, 0, 0);
b[5] = new Ball(200, 100, 0, 0);
b[6] = new Ball(220, 100, 0, 0);
b[7] = new Ball(170, 80, 0, 0);
b[8] = new Ball(190, 80, 0, 0);
b[9] = new Ball(210, 80, 0, 0);
b[10] = new Ball(230, 80, 0, 0);
b[11] = new Ball(160, 60, 0, 0);
b[12] = new Ball(180, 60, 0, 0);
b[13] = new Ball(200, 60, 0, 0);
b[14] = new Ball(220, 60, 0, 0);
b[15] = new Ball(240, 60, 0, 0);
} 
```

这些球的颜色为 b[0] 为母球，b[5] 为黑球，其他球为红色或黄色，具体取决于它们在三角形中的位置。

我需要做的是从原始数组中制作另外 2 个数组，其中第一个将只是红球，例如 b[1]、b[3]、b[4]……等等。第二个就是黄球，例如 b[2]、b[6]、b[7]……等等。

我想知道的是是否可以制作一个数组的 2 个数组，只取红球和黄球的值？如果是这样，如何以及什么是编写这些数组的最有效方法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:51:30.453

即使您似乎不是很有经验，但问题的目的是完全有道理的。您不需要创建新的 Ball 实例，只需从先前定义的数组中获取这些实例：

```
Ball reds[] = new Ball[7];
Ball yellows[] = new Ball[7];

for(int i=1;i<b.length;i++) {
  if(i!=5) {
    if(i%2==0) {
      yellows[i/2-1]=b[i];
    } else {
      reds[i<5?(i/2):(i/2-1)]=b[i];
    }
  }
} 
```

这将遍历球，从索引 1 到 15，我们省略了数字 5，这取决于循环变量除以 2 的余数。

**编辑**嘿，这并不像最初看起来那么简单，漏掉 5 号球需要一些技巧......

# asp.net - WIF 登录在 IE9 中过早过期

> ID：13160536
> 
> 赞同：0
> 
> 时间：2012-10-31T14:44:24.550
> 
> 标签：asp.net, wif

我创建了一个 STS 和一个能够通过 WIF 使用 STS 进行身份验证的依赖网站。在除 IE9 之外的所有浏览器中，这都运行良好。在 IE9 中，在登录并使用依赖网站大约 5 分钟后（不一致，但通常在 5 到 10 分钟后发生），用户被重定向回 STS 以再次登录。

但是，用户并没有真正退出 STS。如果用户只是刷新 STS 的登录页面，则会打开一个新选项卡并将其带回依赖网站。

我对这种行为非常困惑，只能在 IE9 中重现。有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-01T14:58:08.003

听起来您的会话 cookie 过期太早了。您可以检查您网站的 web.config 并查看您在 cookie 处理程序中设置的 persistentSessionLifetime（如果有的话）吗？

这篇文章有一些细节：

[如何使用 WIF / SAML 令牌 / FedAuth cookie 增加会话超时](https://stackoverflow.com/questions/5452488/how-do-i-increase-session-timeout-with-w-i-f-saml-tokens-fedauth-cookie)

# iphone - 保存 UIBezierPaths

> ID：13160537
> 
> 赞同：1
> 
> 时间：2012-10-31T14:44:25.217
> 
> 标签：iphone, objective-c, ios, xcode, uibezierpath

是否可以保存大量 UIBezierPaths？如果是这样，怎么办？我尝试将它们全部放入 NSMutableArray（和 NSMutableDictionary）中，然后将该数组/字典保存到 NSUserDefaults 但我收到此警告：

```
*** -[NSUserDefaults setObject:forKey:]: Attempt to insert non-property value '(
"<UIBezierPath: 0x20b9ca10>",
"<UIBezierPath: 0x20a1dbf0>",
"<UIBezierPath: 0x20b9e550>",
)' of class '__NSArrayM'.  Note that dictionaries and arrays in property lists must also contain only property values. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T14:50:06.370

尝试使用此代码

```
-(void)saveData :(NSMutableArray *)dataArray;
{
    NSFileManager *filemgr;
    NSString *docsDir;
    NSArray *dirPaths;

    filemgr = [NSFileManager defaultManager];

    // Get the documents directory
    dirPaths = NSSearchPathForDirectoriesInDomains(
                                                   NSDocumentDirectory, NSUserDomainMask, YES);

    docsDir = [dirPaths objectAtIndex:0];

    // Build the path to the data file
    NSString *dataFilePath = [[NSString alloc] initWithString: [docsDir
                                                                stringByAppendingPathComponent: @"data.archive"]];

    [NSKeyedArchiver archiveRootObject:
     dataArray toFile:dataFilePath];
}

-(NSMutableArray *)loadData;
{
    NSFileManager *filemgr;
    NSString *docsDir;
    NSArray *dirPaths;

    filemgr = [NSFileManager defaultManager];

    // Get the documents directory
    dirPaths = NSSearchPathForDirectoriesInDomains(
                                                   NSDocumentDirectory, NSUserDomainMask, YES);

    docsDir = [dirPaths objectAtIndex:0];

    // Build the path to the data file
    NSString *dataFilePath = [[NSString alloc] initWithString: [docsDir
                                                                stringByAppendingPathComponent: @"data.archive"]];

    // Check if the file already exists
    if ([filemgr fileExistsAtPath: dataFilePath])
    {
        NSMutableArray *dataArray;

        dataArray = [NSKeyedUnarchiver
                     unarchiveObjectWithFile: dataFilePath];

        return dataArray;
    }
    return NULL;
} 
```

应该可以正常工作，我测试了这个保存 BezierPath 并且似乎工作正常。我创建了一个名为archiving 的类，它处理在手机中保存和加载数组和字典。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T15:28:55.870

这是另一种直接归档/取消归档 UIBezierPath 的解决方案：

```
- (NSURL *)documentsDirectory
{
    return [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
}

- (void)archivePath:(UIBezierPath*)bPath withName:(NSString *)archiveName
{
    NSString *savePath = [[[self documentsDirectory] URLByAppendingPathComponent:archiveName] path];
    [NSKeyedArchiver archiveRootObject:bPath toFile:savePath];
}

- (UIBezierPath *)unarchivePathWithName:(NSString *)archiveName
{
    return (UIBezierPath *)[NSKeyedUnarchiver unarchiveObjectWithFile:[[[self documentsDirectory] URLByAppendingPathComponent:archiveName] path]];
} 
```

我没有进行任何错误检查或验证文件是否存在，但如果您确定那里有文件，这将有效。以下是如何使用它的示例：

```
UIBezierPath *bez = [UIBezierPath bezierPathWithRect:CGRectMake(0, 0, 500, 100)];
[bez appendPath:[UIBezierPath bezierPathWithOvalInRect:CGRectMake(0, 0, 200, 200)]];
[self archivePath:bez withName:@"path.archive"];
UIBezierPath *bez2 = [self unarchivePathWithName:@"path.archive"]; 
```

# database - 如何在 redis 中使用哈希存储这些数据

> ID：13160540
> 
> 赞同：1
> 
> 时间：2012-10-31T14:44:27.703
> 
> 标签：database, nosql, redis

我想存储一个与此类似的结构。这个想法是可以提取具有相同 id 的所有描述，我在 reddis 中没有看到很多示例，我认为文档非常基本。有人可以告诉我吗？

```
user:id:12:description:"nice"
user:id:12:description:"bad"
user:id:15:description:"nothing_especial"
... 
```

我知道这可以通过 hset 实现，我尝试过类似的方法：

```
hset user id 12
hset user description "nice"
... 
```

但问题是，当我尝试在不同时间插入相同的键时，HSET 会覆盖内容值，最后我有相同的但具有不同的值

在文档中，我看到了一个示例，但使用了 Set，是这样的（我不明白他们为什么使用简单的集合....）：

```
$ redis-cli set news:1:title "Redis is simple"
OK
$ redis-cli set news:1:url "http://code.google.com/p/redis"
OK
$ redis-cli lpush submitted.news 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:16:15.607

我做了这个，起初我想到了这个，但它是有限的，因为我不能为每个用户提供一个以上的描述：

```
hset user id:1:deal "yeaaaaaaaah"
hset user id:1:description "sometifjjapodsifj"

hget user id:1:deal
    >yeaaaaaaaah
hget user id:1:description
    >sometifjjapodsifj 
```

最后的解决方案是这样的：

```
hset user1 description1 "asdoifjasdpofjaspdo"
hset user1 description2 "aosdifj"
hset user2 description1 "asdoijfaodsifj"
hset user2 description2 "asdoifjaposdifjaposdifjasdf"

hgetall user2
    >description1=asdoijfaodsifj
    >description2=asdoifjaposdifjaposdifjasdf 
```

# java - 循环被覆盖，初学者 Java

> ID：13160547
> 
> 赞同：0
> 
> 时间：2012-10-31T14:44:44.610
> 
> 标签：java

这个循环有问题（我认为）。当循环执行时，它会清除保存在变量 userHandValue 中的数据。我已经尝试了不同的循环来解决它，但我认为一切都很好，只是没有将抽到的新牌添加到手牌中。当你运行程序时，你会明白我在说什么。你可以从一手总点数达到 13 的牌开始，然后当你击球时，你的手牌总点数可以达到 10 点。我只是认为它没有按照应有的方式连接。

请记住，我是新来的，所以如果格式对你的口味来说太乱了，不要关闭我的帖子，请提供建议（帮助解决实际问题也很好）。谢谢你。

```
do {
 if (userHandValue < 21) {
     System.out.println("Would you like to hit? (Y/N)");
     hit = dataIn.readLine();
     hit = hit.toUpperCase();
 }
 again = hit.compareTo("Y") == 0;
 if (again) {
     // users next card draw
     randomGenNum = (int)((range * Math.random()) + 1)*2;
     // assigning the user hand value & card, pulling index from array
     tempUserHandValue = arrayCardValues[randomGenNum];
     // Check if the user was dealt an ace
     if ((tempUserHandValue != 11) && (randomGenNum >= 2) && (randomGenNum <= 5)) {
         tempUserHandValue = userHandValue + 10;
     }
     userCard = arrayCardSuites[randomGenNum];
     // displaying values to the screen
     System.out.println("Your next card is " + userCard);
     // adding new card to total hand value and displaying to user
     userHandValue = userHandValue + tempUserHandValue;
     System.out.println("Your new total hand value is: " + (userHandValue));
}
} while (again); 
```

这是一切：

```
/*
 *This is a simple BlackJack game written by C. Auito and D. Harrington for CS241\. 
 *Code snippets were taken from the following open source files:
 * http://www.dreamincode.net/forums/topic/75554-blackjack-game/
 * update test
 * 
 */
package blackjackclassproject;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

/**
 * @author C. Auito <chris.auito@gmail.com>
 */
public class BlackJackClassProject {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) throws IOException {
        BufferedReader dataIn = new BufferedReader(new InputStreamReader(System.in));

        //Declare Variables
        boolean again = true;
        //int again = 0;
        do {
            double range = 26;
            int randomGenNum;
            int kitty = 1000;
            int yourBet;
            int userHandValue = 0;
            int userDrawnValue;
            int dealerHandValue = 0;
            int dealerDrawnValue;
            String playAgain;
            String hit = "";
            String strBetAmount;
            String userCard, dealerCard;
            int[] arrayCardValues = {0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 6, 6, 6, 6,
                7, 7, 7, 7, 8, 8, 8, 8, 9, 9, 9, 9, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10};
            String[] arrayCardSuites = {
                "", "", "Ace/Clubs", "Ace/Diamonds", "Ace/Hearts", "Ace/Spades",
                "2/Clubs", "2/Diamonds", "2/Hearts", "2/Spades", "3/Clubs", "3/Diamonds", "3/Hearts", "3/Spades",
                "4/Clubs", "4/Diamonds", "4/Hearts", "4/Spades", "5/Clubs", "5/Diamonds", "5/Hearts", "5/Spades",
                "6/Clubs", "6/Diamonds", "6/Hearts", "6/Spades", "7/Clubs", "7/Diamonds", "7/Hearts", "7/Spades",
                "8/Clubs", "8/Diamonds", "8/Hearts", "8/Spades", "9/Clubs", "9/Diamonds", "9/Hearts", "9/Spades",
                "10/Clubs", "10/Diamonds", "10/Hearts", "10/Spades", "Jack/Clubs", "Jack/Diamonds", "Jack/Hearts",
                "Jack/Spades", "Queen/Clubs", "Queen/Diamonds", "Queen/Hearts", "Queen/Spades", "King/Clubs",
                "King/Diamonds", "King/Hearts", "King/Spades"
            };
            //get bet amount from user
            System.out.println("How much do you want to bet?");
            strBetAmount = dataIn.readLine();
            yourBet = Integer.parseInt(strBetAmount);
            //draw three cards (one card face up for dealer, two for player)
            //dealer first drawn card
            randomGenNum = (int) ((range * Math.random()) + 1) * 2;
            //assigning the dealer hand value & card, pulling index from array
            dealerHandValue = arrayCardValues[randomGenNum];
            //Check if the dealer was just dealt an ace
            if ((randomGenNum >= 2) && (randomGenNum <= 5)) {
                dealerHandValue = dealerHandValue + 10;
            }
            int tempDealerHandValue = dealerHandValue;
            dealerCard = arrayCardSuites[randomGenNum];
            //displaying values to the screen
            System.out.println("The dealer is showing a " + dealerCard);
            //dealers second drawn card
            randomGenNum = (int) ((range * Math.random()) + 1) * 2;
            //assigning the dealer hand value & card, pulling index from array
            dealerHandValue = arrayCardValues[randomGenNum];
            //Check if the dealer got an ace
            if ((dealerHandValue != 11) && (randomGenNum >= 2) && (randomGenNum <= 5)) {
                dealerHandValue = dealerHandValue + 10;
            }
            dealerCard = arrayCardSuites[randomGenNum];
            //users first drawn card
            randomGenNum = (int) ((range * Math.random()) + 1) * 2;
            //assigning the user hand value & card, pulling index from array
            userHandValue = arrayCardValues[randomGenNum];
            //Check if the user was just dealt an ace
            if ((randomGenNum >= 2) && (randomGenNum <= 5)) {
                userHandValue = userHandValue + 10;
            }
            int tempUserHandValue = userHandValue;
            userCard = arrayCardSuites[randomGenNum];
            //displaying values to the screen
            System.out.println("Your first card is " + userCard);
            //users second drawn card
            randomGenNum = (int) ((range * Math.random()) + 1) * 2;
            //assigning the user hand value & card, pulling index from array
            userHandValue = arrayCardValues[randomGenNum];
            //Check if the user got an ace
            if ((userHandValue != 11) && (randomGenNum >= 2) && (randomGenNum <= 5)) {
                userHandValue = userHandValue + 10;
            }
            userCard = arrayCardSuites[randomGenNum];
            //displaying values to the screen
            System.out.println("Your second card is " + userCard);
            System.out.println("Your total hand value is: " + (tempUserHandValue + userHandValue));
            //check for the either player having a blackjack(hand value = 21)
            if ((dealerHandValue == 21) && (userHandValue != 21)) {
                //dealer = 21 user != 21 dealer wins, kitty - bet, game over 
            }
            if ((dealerHandValue != 21) && (userHandValue == 21)) {
                //user = 21 dealer != user wins, kitty + bet, game over
            }
            if ((dealerHandValue == 21) && (userHandValue == 21)) {
                //dealer and user = 21 noone wins, users kitty is not changed, game over
            }
            //if neither player has 21 continue through the loop
//start the users loop
            //while(userHandValue < 21)
            if (userHandValue < 21) {
                System.out.println("Would you like to hit? (Y/N)");
                hit = dataIn.readLine();
                hit = hit.toUpperCase();
            }
            if (hit.compareTo("Y") == 0) {
                again = true;
            } else {
                again = false;
            }
            if ((again) == (true)) {
                //users next card draw
                randomGenNum = (int) ((range * Math.random()) + 1) * 2;
                //assigning the user hand value & card, pulling index from array
                tempUserHandValue = arrayCardValues[randomGenNum];
                //Check if the user was dealt an ace
                if ((tempUserHandValue != 11) && (randomGenNum >= 2) && (randomGenNum <= 5)) {
                    tempUserHandValue = userHandValue + 10;
                }
                userCard = arrayCardSuites[randomGenNum];
                //displaying values to the screen

                System.out.println("Your next card is " + userCard);
                //adding new card to total hand value and displaying to user
                userHandValue = userHandValue + tempUserHandValue;
                System.out.println("Your new total hand value is: " + (userHandValue));
            }
        } while (again == true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:04:46.277

您在循环中声明了几个变量（包括`userHandValue`），这意味着在每次迭代中都会为它们创建一个新实例。

所有需要在迭代之间携带状态的变量都应该在循环之外声明，或者它们应该声明为类属性。

# c# - Gridview 更新按钮

> ID：13160549
> 
> 赞同：0
> 
> 时间：2012-10-31T14:44:54.240
> 
> 标签：c#, sql, gridview

我有一个带有按钮的 GridView，它将所有行设置为编辑模式（这是我想要的）。但是我想知道是否有一种方法可以创建一个按钮，用我的更改更新整个网格视图。这是这背后的代码。

```
<asp:GridView ID="gvUsers" runat="server" AutoGenerateColumns="False" 
        onrowcommand="gvUsers_RowDataBound">
    <Columns>

       <asp:TemplateField HeaderText="labelID" Visible="false">
            <ItemTemplate>
                <asp:Label ID="ID" runat="server" Text='<%# Eval("id") %>' />
            </ItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField HeaderText="First Name">
            <ItemTemplate>
                <asp:Label ID="labelfirstname" Visible='<%# !(bool) IsInEditMode %>' runat="server" Text='<%# Eval("firstname") %>' />
                <asp:TextBox ID="txtFirstName" Visible='<%# IsInEditMode %>' runat="server" Text='<%# Eval("firstname") %>' />
            </ItemTemplate>
        </asp:TemplateField>
         <asp:TemplateField HeaderText="Last Name">
            <ItemTemplate>
                <asp:Label ID="labellastname" Visible='<%# !(bool) IsInEditMode %>' runat="server" Text='<%# Eval("lastname") %>' />
                <asp:TextBox ID="txtLastName" Visible='<%# IsInEditMode %>' runat="server" Text='<%# Eval("lastname") %>' />

            </ItemTemplate>
        </asp:TemplateField>

    </Columns>
    </asp:GridView>

<asp:Button ID="Button1" runat="server" Text="Edit Mode" onclick="Button1_Click1" />
<asp:Button ID="Button2" runat="server" Text="View Mode" onclick="Button2_Click1" /> 
```

这是c#

```
 private bool isEditMode = false;
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            BindData();
        }
    }
    private void BindData()
    {

        string connectiongString = "Data Source=WSCJTCSQ1;Initial Catalog=LiquorStore;Integrated Security=True";
        SqlConnection myConnection = new SqlConnection(connectiongString);
        SqlDataAdapter ad = new SqlDataAdapter("SELECT id, firstname, lastname, nickname FROM Company", myConnection);
        DataSet ds = new DataSet();
        ad.Fill(ds);
        gvUsers.DataSource = ds;
        gvUsers.DataBind();

    }

    protected bool IsInEditMode
    {

        get { return this.isEditMode; }

        set { this.isEditMode = value; }

    }

    protected void gvUsers_RowDataBound(object sender, GridViewCommandEventArgs e)
    {

    }

    protected void Button1_Click1(object sender, EventArgs e)
    {
        isEditMode = true;

        BindData();
    }

    protected void Button2_Click1(object sender, EventArgs e)
    {

        isEditMode = false;

        BindData();
    } 
```

先感谢您！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:52:11.910

您可以遍历您的行并在特定行的文本框中获取值

```
foreach (GridViewRow row in gvUsers.Rows)
    {
        TextBox txtFirstName = row.FindControl("txtFirstName") as TextBox;
        TextBox txtLastName = row.FindControl("txtLastName") as TextBox;

        if (txtFirstName.Text!="" && txtLastName.Text!="")
        {
           // do what you need with values
        }

    } 
```

# ruby-on-rails - Rails 渲染：json => [1,2,3] 在生产中表现不同（json root）

> ID：13160551
> 
> 赞同：1
> 
> 时间：2012-10-31T14:44:58.630
> 
> 标签：ruby-on-rails, json, bundler

我在我的 Rails 应用程序中看到了一些奇怪的行为。我正在运行 ruby​​ 1.9.2-p290，我有这种控制器：

```
class NumbersController < ApplicationController

  def index
    render :json => [1,2,3]
  end

end 
```

想象一下，我像这样运行服务器来演示问题：

```
$ rails s # This one runs in "development" on port 3000
$ RAILS_ENV=production rails s -p 2999 # This one runs in "production" on port 2999 
```

在开发或测试模式下，我的结果是

```
$ curl localhost:3000/numbers # development
{numbers: [1,2,3]} # The root is being included in the json, as inferred from the controller name.
$ curl localhost:2999/numbers # production
[1,2,3] # No root in the JSON 
```

我已经用细齿梳浏览过该应用程序，并且没有明显的配置差​​异看起来会影响开发和生产之间的 json。此外，没有像“if Rails.env === 'production'”这样的行

我猜需要不同的宝石，例如资产，它们正在改变 render :json => ... 的行为。我从正在运行的应用程序中检查了“json”和“multi_json”gem 的版本，它们是相同的（分别为 1.7.5 和 1.3.6，multi_json 使用相同的适配器。）。*我如何在*应用程序运行时准确地找出应用程序中需要哪些 gem ？另外，有没有人有其他解释？

编辑：我正在运行 Rails 3.1.1，我的 Gemfile 的资产部分是：

```
group :assets do
  gem "ember-rails"
  gem "jquery-rails"
  gem "less", "2.0.7"
  gem "less-rails", "2.0.2"
  gem 'uglifier'
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T22:40:25.470

我在这里找到了一种解决方法：[来自控制器的 include_root_in_json](https://stackoverflow.com/questions/5097477/include-root-in-json-from-controller)

解决方案：

```
render :json => {:numbers => [1,2,3]}, :root => false # If you want the root 
```

:root => true 在生产中没有得到尊重。我怀疑 as_json 或 to_json 在那个环境中被错误地覆盖了。

不过我还是不开心，因为我不能依赖渲染：json => [1, 2, 3]。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T15:15:41.650

对于新的 Rails 应用程序，此行为由 config/initializers/wrap_parameters.rb 中的此设置控制。

```
# Disable root element in JSON by default.
ActiveSupport.on_load(:active_record) do
  self.include_root_in_json = false
end 
```

可能是因为您的控制器没有引用任何 AR (ActiveRecord) 类，由于开发模式下的延迟加载，AR 尚未加载。因此设置为真。

`ActiveRecord::Base`您可以通过放入索引操作来强制它加载来测试该理论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T15:07:38.893

我正在寻找以下配置：

```
ActiveRecord::Base.include_root_in_json 
```

它会产生您在对象的 JSON 表示之间获得的差异：如果设置为 true，则将对象名称添加为生成的 JSON 的根键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-19T14:32:09.980

> 我如何在应用程序运行时准确地找出应用程序中需要哪些 gem？

该`Gemfile.lock`文件指定了这一点。

# primefaces - 在 JSF 中创建列可扩展表

> ID：13160554
> 
> 赞同：0
> 
> 时间：2012-10-31T14:45:05.687
> 
> 标签：primefaces, richfaces, jsf-1.2

我想创建一个应该隐藏一些列的表格。每当我单击箭头或某个按钮时，隐藏的列应与该表中的原始列一起显示。例如，我有 20 列，我不需要在凝视点显示所有列。假设我想在 UI 中显示 5 列，重命名 15 应该隐藏。我在哪里可以在表格的右上角（在标题行中）放置一些箭头以用剩余的列扩展表格。

是否有可能使用具有丰富面孔或其他任何东西的 JSF。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:23:09.447

看看 primefaces 实验室的[这个例子](http://www.primefaces.org/showcase-labs/ui/dndColumns.jsf)。它允许动态地将列添加到数据表中。我相信你可以调整它以获得你正在寻找的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:39:45.440

使用类`<rich:dataTable.`中的属性设置`rendered`最初应隐藏的列的`boolean`属性。

> `<rich:dataTable value="" var="v" id="tbl">`
>      `<rich:column>Always visible column 1</rich:column>`
>      `<rich:column rendered="#{del.renderColumn}">Visible on demand</rich:column>`
>      `<rich:column>Always visible column 2</rich:column>`
>      `<rich:column>Always visible column 3</rich:column>`
> `</rich:dataTable>`

使用`<a4j:commandButton`并将属性设置`renderColumn`为`true`按钮操作和`reRender`表格。

> `<a4j:commandButton value="Show" action="#{del.renderHiddenColumn()}" reRender="tbl"/>`

# iphone - 从我的机器发送 iOS 推送通知？

> ID：13160555
> 
> 赞同：1
> 
> 时间：2012-10-31T14:45:05.953
> 
> 标签：iphone, google-app-engine, apple-push-notifications

我想将 iOS 推送通知添加到我的免费 iOS 应用程序

推送通知将主要宣传我的其他 iOS 应用程序。所以我预计每个月会有 1 或 2 个推送通知

我检查了城市飞艇之类的服务，但考虑到我有超过 150 万活跃用户，我认为它很昂贵。

所以，我想的是在 Google App Engine ( java ) 收集设备令牌，然后每当我想发送推送通知时，我会导出这些令牌，然后从我的机器发送它们。

这是正确的方法吗？你怎么看？

有没有我可以使用的框架来代替从头开始构建东西？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:00:40.783

*   这种方法对我来说看起来不错。在 Google App Engine 上有一个应用程序，每个 iOS 设备都向其发送其设备令牌。稍后，您可以随时使用在 Google App Engine APP 上运行的网页或网络服务将自定义通知推送到所有相应的设备令牌。请记住用过时的设备令牌过滤设备令牌列表（以防有人卸载您的应用程序）。
*   您可以查看[http://code.google.com/p/javapns/](http://code.google.com/p/javapns/)以了解 APNS 通信。我试了几次，效果非常好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:40:29.287

您还应该尝试一下[http://www.scringo.com](http://www.scringo.com)。除了这个框架所做的其他事情外，它还为您提供免费的推送通知服务，以向您的所有用户或其中一些用户发送推送消息（基于您的自定义标准）。

# android - Mercurial 在克隆 repo 后创建额外文件

> ID：13160558
> 
> 赞同：0
> 
> 时间：2012-10-31T14:45:11.870
> 
> 标签：android, version-control, mercurial

我正在开发一个 Android 应用程序，APK 文件位于*out*文件夹中。我也使用 Mercurial 作为版本控制系统并克隆了 repo，克隆成功但 Mercurial 创建了两个 APK 文件，一个在*bin*目录中，另一个在项目的根目录中。

为什么 Mercurial 创建了这两个额外的 APK 文件以及如何摆脱它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:14:30.397

1.  您在 repo 中**有**这两个文件，克隆只是显示给您
2.  您*没有*在原始工作副本中仅看到这些文件，因为（尚未发现）原始工作区的本地设置**现在**忽略这些文件（在它们被提交到 repo 之后 - 请参阅`hg log FILENAME`），但添加到忽略列表并不意味着“自动忘记并从 repo 中删除”

> 如何摆脱它们？

*   在克隆的 repo-root 创建 .hgignore 中，为所有和任何 (?) *.apk 文件添加全局模式
*   `hg forget`两个 APK（或从 THG 的 CMenu 中忘记）
*   提交更改
*   从 WorkingCopy 中删除文件

# grails - 如果子字符串匹配，则在字符串字段中插入链接

> ID：13160559
> 
> 赞同：1
> 
> 时间：2012-10-31T14:45:11.880
> 
> 标签：grails

我的域中有一个“评论”字符串字段。在每次保存或更新该字段时，我想检查该字段是否包含与来自同一域（或不同域）的另一个字段的字符串匹配的子字符串。我需要遍历该字段的所有实例以查看是否存在匹配项。如果匹配，我想将其转换为注释字段内的链接，以显示与子字符串匹配的条目的显示操作。

因此，例如，带有序列号的产品的注释字段会通过在注释字段中给出其序列号来记录该产品是否已被另一个产品替换。如：“此产品已被 SN1234 取代”。我想自动将SN1234转换成一个链接来显示序列号为SN1234的产品。

解决此问题的最佳方法是什么？在控制器中，在 GSP 中？如何 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:57:16.657

只要您尝试匹配的列已编入索引，您只需查询匹配项，如果找到，请修改您的评论以包含 URL。控制器或服务对于查找并不重要（尽管我可能会将它放在服务中）。您需要确保搜索不是事务性的，因此它会尽可能快。我绝不会在普惠制中做任何这样的事情。

要插入链接，您可以进行简单的查找和替换。一旦您知道要将哪个文本转换为链接，伪代码如下：

```
def comment = "This product was replaced by SN1234" 
def match = "SN1234"
def link = g.link(action: "show", controller: "product", id: "${product.id}", match)
comment = comment.replace(match, link) 
```

然后你会得到什么

```
"This product was replaced by <a href='/product/1234'>SN1234</a>" 
```

可能有更有效的方法来做到这一点，但这是一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:57:09.770

您可以使用[GORM 事件](http://grails.org/doc/latest/guide/GORM.html)在您的域中执行此操作。因此，每当插入/更新域时，您都可以检查您的字段是否已更改。然后你可以插入你的链接。

```
def beforeInsert() {
    yourMethod()
}

def beforeUpdate() {
    if (isDirty('yourField')) {
        yourMethod()
    }
} 
```

# oracle - 从表数据值的中间删除一个 varchar2 字符串

> ID：13160563
> 
> 赞同：2
> 
> 时间：2012-10-31T14:45:22.880
> 
> 标签：oracle, oracle11g

生成表字段中的数据`file_name`应该是一个分配的数字，然后是_01、_02或_03等，然后是`.pdf`（例如82617_01.pdf）。

某处，该程序在分配的数字和 01、02 等之间放置一个州名，有时是一个日期/时间戳（82617_ALABAMA_01.pdf 或 19998_MAINE_07-31-2010_11-05-59_AM.pdf 或 5485325_OREGON_01.pdf例子）。

我们想开发一个 SQL 语句来查找错误的文件名并修复它们。从理论上讲，找到包含`varchar2`数据类型的文件名并将其删除似乎相当简单，但是将语句放在一起却超出了我的范围。

任何帮助或建议表示赞赏。

就像是：

```
UPDATE GENERATION

SET FILE_NAME (?)

WHERE FILE_NAME (?...LIKE '%STRING%');? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:01:20.750

您可以像这样找到问题行：

```
select *
from Files
where length(FILE_NAME) - length(replace(FILE_NAME, '_', '')) > 1 
```

您可以像这样修复它们：

```
update Files
set FILE_NAME = SUBSTR(FILE_NAME, 1, instr(FILE_NAME, '_') -1) ||
    SUBSTR(FILE_NAME, instr(FILE_NAME, '_', 1, 2))
where length(FILE_NAME) - length(replace(FILE_NAME, '_', '')) > 1 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!4/07ccc/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:04:18.570

您还可以使用`Regexp_replace`功能：

```
SQL> with t1(col) as(
  2      select '82617_mm_01.pdf' from dual union all
  3      select '456546_khkjh_89kjh_67_01.pdf' from dual union all
  4      select '19998_MAINE_07-31-2010_11-05-59_AM.pdf' from dual union all
  5      select '5485325_OREGON_01.pdf' from dual
  6     )
  7   select col
  8        , regexp_replace(col, '^([0-9]+)_(.*)_(\d{2}\.pdf)$', '\1_\3') res
  9     from t1;

COL                                     RES
 -------------------------------------- -----------------------------------------
82617_mm_01.pdf                         82617_01.pdf
456546_khkjh_89kjh_67_01.pdf            456546_01.pdf
19998_MAINE_07-31-2010_11-05-59_AM.pdf  19998_MAINE_07-31-2010_11-05-59_AM.pdf
5485325_OREGON_01.pdf                   5485325_01.pdf 
```

显示好坏数据`regexp_like`的功能会派上用场：

```
SQL> with t1(col) as(
  2      select '826170_01.pdf' from dual union all
  3      select '456546_01.pdf' from dual union all
  4      select '19998_MAINE_07-31-2010_11-05-59_AM.pdf' from dual union all
  5      select '5485325_OREGON_01.pdf' from dual
  6     )
  7   select col bad_data
  8     from t1
  9   where not regexp_like(col, '^[0-9]+_\d{2}\.pdf$');

BAD_DATA
--------------------------------------
19998_MAINE_07-31-2010_11-05-59_AM.pdf
5485325_OREGON_01.pdf

SQL> with t1(col) as(
  2      select '826170_01.pdf' from dual union all
  3      select '456546_01.pdf' from dual union all
  4      select '19998_MAINE_07-31-2010_11-05-59_AM.pdf' from dual union all
  5      select '5485325_OREGON_01.pdf' from dual
  6     )
  7   select col good_data
  8     from t1
  9   where regexp_like(col, '^[0-9]+_\d{2}\.pdf$');

GOOD_DATA
--------------------------------------
826170_01.pdf
456546_01.pdf 
```

为此，您的`update`陈述可能如下所示：

```
update your_table 
   set col = regexp_replace(col, '^([0-9]+)_(.*)_(\d{2}\.pdf)$', '\1_\3');
 --where clause if needed 
```

# python - 列表中项目的Python索引没有错误？

> ID：13160564
> 
> 赞同：39
> 
> 时间：2012-10-31T14:45:33.080
> 
> 标签：python

要在列表中查找项目的索引，请使用：

```
list.index(x)
Return the index in the list of the first item whose value is x. 
It is an error if there is no such item. 
```

这对我来说似乎有点奇怪，如果找不到该项目会引发错误。我来自哪里（Objective-C 领域），它返回一个 NSNotFound 枚举（它只是一个最大 int，表示未找到该项目）。

所以我做了一些丑陋的事情来解决这个问题：

```
index = 0
for item in self.items:
   if item.id == desired_id:
        return index
    index = index + 1
 return -1 
```

我使用 -1 表示未找到该项目。有什么更好的方法来做到这一点，为什么 Python 没有内置这样的东西？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-31T14:48:38.633

```
a = [1]
try:
    index_value = a.index(44)
except ValueError:
    index_value = -1 
```

这个怎么样？

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-31T14:48:30.083

返回 -1 不是一个好主意，因为它是 Python 中的有效索引（请参阅[Python list.index throws exception when index not found](https://stackoverflow.com/questions/674229/python-list-index-question)）。

可能最好捕获索引错误并采取相应措施。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-31T15:08:00.290

我同意所指出的一般解决方案，但我想更多地研究答案和评论中解释的方法，看看哪种方法更有效以及在哪些情况下。

首先，三种基本方法：

```
>>> def my_index(L, obj):
...     for i, el in enumerate(L):
...             if el == obj:
...                     return i
...     return -1
... 
>>> def my_index2(L, obj):
...     try:
...             return L.index(obj)
...     except ValueError:
...             return -1
... 
>>> def my_index3(L, obj):
...     if obj in L:
...             return L.index(obj)
...     return -1
... 
```

第一个和第二个解决方案只扫描列表一次，因此您*可能*认为它们比第三个更快，因为它扫描列表两次。那么让我们看看：

```
>>> timeit.timeit('my_index(L, 24999)', 'from __main__ import my_index, L', number=1000)
1.6892211437225342
>>> timeit.timeit('my_index2(L, 24999)', 'from __main__ import my_index2, L', number=1000)
0.403195858001709
>>> timeit.timeit('my_index3(L, 24999)', 'from __main__ import my_index3, L', number=1000)
0.7741198539733887 
```

好吧，第二个确实是最快的，但是您可以注意到第一个比第三个慢*得多*，即使它只扫描列表一次。如果我们增加列表的大小，事情并没有太大变化：

```
>>> L = list(range(2500000))
>>> timeit.timeit('my_index(L, 2499999)', 'from __main__ import my_index, L', number=100)
17.323430061340332
>>> timeit.timeit('my_index2(L, 2499999)', 'from __main__ import my_index2, L', number=100)
4.213982820510864
>>> timeit.timeit('my_index3(L, 2499999)', 'from __main__ import my_index3, L', number=100)
8.406487941741943 
```

第一个仍然慢 2 倍。

如果我们搜索不在列表中的内容，第一个解决方案的情况会变得更糟：

```
>>> timeit.timeit('my_index(L, None)', 'from __main__ import my_index, L', number=100)
19.055058002471924
>>> timeit.timeit('my_index2(L, None)', 'from __main__ import my_index2, L', number=100)
5.785136938095093
>>> timeit.timeit('my_index3(L, None)', 'from __main__ import my_index3, L', number=100)
5.46164608001709 
```

正如您在这种情况下所看到的，第三种解决方案甚至胜过第二种解决方案，并且两者都比 python 代码快了近 4 倍。根据您期望搜索失败的频率，您希望选择#2 或#3（即使在 99% 的情况下，#2 更好）。

作为一般规则，如果您想为 CPython 优化某些东西，那么您希望尽可能多地“在 C 级别”进行迭代。在您的示例中，使用 for 循环进行迭代正是您*不想*做的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T14:48:42.720

使用异常处理，`list.index`引发`ValueError`，以便您可以捕获该异常：

一个简单的例子：

```
In [78]: lis=[1,2,3,4]

In [79]: for i in range(-1,6):
    try:
        print lis.index(i)
    except ValueError:    
        print i,"not found"

-1 not found
0 not found
0
1
2
3
5 not found 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-31T15:08:43.177

这种行为有一个明确的原因：

```
>>> import this
...
In the face of ambiguity, refuse the temptation to guess.
... 
```

对于系统应该如何响应像“NSNotFound”这样的对象没有明确的解释，所以你必须拒绝猜测，然后为此实现一个特殊功能就变得毫无用处了。

想想如果我尝试做这样的事情会发生什么：

```
[ objective.index(i)+1 for i in reference_list ] 
```

NSNotFound 加 1 是什么意思？做类似的事情不是更简单：

```
[ objective.index(i)+1 for i in reference_list if i in objective ] 
```

而且，`-1`实际上是一个有效的列表索引，意思是“取最后一个值”，所以如果你试图将它用作一个特殊的错误代码，很可能你最终会遇到一些讨厌的、讨厌的错误。

Guido 的设计感非常强，不要小看他 ;)

也就是说，如果您仍然需要类似的东西，您可以尝试使用以下代码：

```
class NotFoundError(Exception):
    def __init__(self,container,index):
        self.message = "object "+str(index)+" not found on "+str(container)
        self.container = container
        self.index = index
    def __str__(self):
        return self.message

def getindex(cont,idx):
    try:
        return cont.index(idx)
    except:
        return NotFoundError(cont,idx)

a = [1,2]

print getindex(a,3)
#object 3 not found on [1, 2] 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-31T15:09:36.830

最好将其视为“引发异常”而不是“引发错误”。

Python 中的异常不仅针对错误，而且针对*异常情况*——因此得名。如果`list.index()`返回了一些特殊值，它需要是一个

1.  无法退回已`list.index()`找到该项目

2.  随后不能被天真的代码误解。

第一个条件排除所有正整数（包括零和`sys.maxint`），第二个条件也排除负整数（因为负索引是在 Python 中索引列表的有效方法）。无论如何，除整数以外的任何东西都可能在以后引发异常，如果后续代码假设这就是它会得到的。

无论该方法是引发异常还是返回特殊值，您通常都需要对这些信息进行处理，并且：

```
try:
    index = list.index(x)
except ValueError:
    # do something 
```

比这更具可读性：

```
index = list.index(x)
if index == some_special_value:
    # do something 
```

...在后一种情况下，忘记防范异常情况会导致代码静默失败，可能会导致代码中其他地方出现混淆错误。

更糟糕的是，对于 this 以及任何其他类似的方法或函数，您必须记住或查找该特殊值是什么。

# c# - 在 C# 中构建流畅的动画

> ID：13160571
> 
> 赞同：3
> 
> 时间：2012-10-31T14:45:51.203
> 
> 标签：c#, .net, winforms, multithreading, animation

首先是代码。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace winform_project
{
  public partial class Form1 : Form
  {
    void movement_correct(PictureBox pic, int i)
    {
        System.Threading.Thread.Sleep(25);
        pic.Top += (i - 1);
        pic.Left += (i + 3);
    }

    void movement_up(PictureBox pic, int i)
    {
        System.Threading.Thread.Sleep(25);
        pic.Top -= (i - 1);
        pic.Left -= (i + 3);
    }
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        for (int i = 0; i < 5; i++)
        {
            movement_correct(pictureBox1, i);
            movement_correct(pictureBox2, i);
            movement_correct(pictureBox3, i);
            movement_correct(pictureBox4, i);
            movement_correct(pictureBox5, i);
            movement_correct(pictureBox6, i);
            movement_correct(pictureBox7, i);
            movement_correct(pictureBox8, i);
            movement_correct(pictureBox9, i);
            movement_correct(pictureBox10, i);
        }

        for (int i = 0; i < 5; i++)
        {
            movement_up(pictureBox1, i);
            movement_up(pictureBox2, i);
            movement_up(pictureBox3, i);
            movement_up(pictureBox4, i);
            movement_up(pictureBox5, i);
            movement_up(pictureBox6, i);
            movement_up(pictureBox7, i);
            movement_up(pictureBox8, i);
            movement_up(pictureBox9, i);
            movement_up(pictureBox10, i);
        }

    }
 }
} 
```

有 10 个虚拟图片框。每当我点击按钮时，它们就会开始移动一点（有点像太空入侵者中的敌人）。

我正在尝试在 winforms 中制作流畅的动画。问题是动画没有我想要的那么流畅。在我的代码中，所有的盒子都没有同时移动，它们的移动有一点明显的差距。我想要的是平稳的运动。

我当时正在考虑对它进行多线程处理，但后来意识到这意味着每个对象都有一个线程。有没有其他方法（在winforms中）。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:56:25.677

`Thread.Sleep(n)`用于计时目的是保证无法获得流畅动画的方法；这是因为传递给的值`Thread.Sleep`被操作系统视为最小睡眠时间，这意味着睡眠的实际持续时间可以（并且通常是）更长一些。您应该改为使用[QueryPerformanceCounter](http://www.codeproject.com/Articles/2635/High-Performance-Timer-in-C)来驱动动画。

即使使用适当的高分辨率计时引擎，您仍然会有“撕裂”效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:58:52.793

在你的 for 循环中调用`this.SuspendLayout()`and`this.ResumeLayout()`将有助于保持所有框同时移动。它可能不会让你变得平滑，但它会让一切都保持一致。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T19:58:45.737

退出方法并在循环迭代中执行一次将减少每个框和调用`sleep()`之间的延迟从（超过 250 毫秒）到（略超过 25 毫秒） 。`movement_correct()``movement_up()`

# c# - 将 ASP.NET 会话转移到其他 ASP.NET 解决方案

> ID：13160576
> 
> 赞同：1
> 
> 时间：2012-10-31T14:46:14.093
> 
> 标签：c#, asp.net, session, response.redirect

我有一个 2 ASP.NET 解决方案。第一个称为 HomePage，另一个称为 Main。我正在使用 IIS 7.5。在 IIS 的根目录下，我有 2 个同名文件夹（HomePage 和 Main）。每个解决方案都在他们自己的文件夹中。

我正在尝试将会话从 HomePage 转移到 Main。

主项目（文件 ASPNETToASPNET.aspx）

```
private void Page_Load(object sender, System.EventArgs e)
{
    string queryString = String.Empty;
    string destPage = Request.Form["destpage"].ToString();
    ...
} 
```

主页.aspx

```
private void Redirect_Click(object sender, CommandEventArgs e)
{
    Response.Redirect("http://www.website.com/Main/Pages/ASPNETToASPNET.aspx?destpage=" + e.CommandArgument + "&SessionNoClient=" + Session["SessionNoClient"], false);
    Response.Redirect("./Main/Pages/ASPNETToASPNET.aspx?destpage=" + e.CommandArgument + "&SessionNoClient=" + Session["SessionNoClient"], false);
} 
```

使用第一个重定向时，我到达了相应的文件，但在行出现错误

```
string destPage = Request.Form["destpage"].ToString();
Object reference not set to an instance of an object. 
```

使用其他重定向时，我无法找到访问相应文件的方法。

如前所述，两种解决方案都在同一台服务器上并使用相同的域。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:51:20.723

```
string destPage = Request.QueryString["destpage"]; 
```

1.  这不是会话转移，您只是传递查询参数。
2.  `Request.Form`集合包含 POST 值。对于查询字符串参数 (GET)，请使用`Request.QueryString`or `Request.Params`，最后一个在 `QueryString`、`Form`、`Cookies`和中搜索您的值`ServerVariables`。

# android - 从共享首选项数据填充列表项

> ID：13160577
> 
> 赞同：1
> 
> 时间：2012-10-31T14:46:13.937
> 
> 标签：android, arraylist, android-listview, sharedpreferences

我现在正在`ListActivity`尝试`ListActivity`使用`SharedPreferences`. 我在`OnItemClickListener`with中添加了数据`SharedPreferences`。我不知道如何`ListActivity`使用`ArrayList`. 下面是代码。

```
convertView.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            SharedPreferences pref = getContext().getSharedPreferences(
                    Constants.SHARED_PRED, 0);
            Editor edit = pref.edit();

            edit.putString("TITLE", getItem(position).title);
            edit.putString("CHAR", getItem(position).character);
            edit.putString("TOTAL", getItem(position).totalpages+"");
            edit.putString("THUMB", getItem(position).thumbnail);
            edit.putInt("CODE", getItem(position).code);
            edit.commit();

            System.out.println("Title >>>>>>" + getItem(position).title);
            System.out.println("Character >>>>>>" + getItem(position).character);
            System.out.println("Total >>>>>>" + getItem(position).totalpages);
            System.out.println("thumb url >>>>>>" + getItem(position).thumbnail);
            System.out.println("Code >>>>>>" + getItem(position).code);

            Intent i = new Intent(getContext(), DetailPager.class);
            i.putExtra("NPOS", position);
            getContext().startActivity(i);
        }
    }); 
```

我的情况是我的应用程序中有两个活动。第一个 Activity 将`ListActivity`使用启动`SharedPreferences`。第二个活动将加载`DetailPager.class`以代码编写的。我的问题是我不知道如何填充事件`ListActivity`中未启动的内容`OnClick`。

**我的 ListActivity 类**

```
private ListViewAdapter m_adapter;
public ArrayList<String> cat = new ArrayList<String>();
private SharedPreferences preferences;
private SharedPreferences.Editor editor;
String title, character, thumbnail, totalPages;
int Code;

TextView titleView, charView, totalView;
ImageView thumbView, removeView;
Uri thumbUri;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setTheme(android.R.style.Theme_Black_NoTitleBar);
    getWindow().requestFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.myputet);
    init_UI();
}

public void init_UI() {
    preferences = getApplicationContext().getSharedPreferences(
            Constants.SHARED_PRED, 0);
    editor = preferences.edit();

    title = preferences.getString("TITLE", "");
    character = preferences.getString("CHAR", "");
    thumbnail = preferences.getString("THUMB", "");
    thumbUri = Uri.parse(thumbnail);
    totalPages = preferences.getString("TOTAL", "");
    Code = preferences.getInt("CODE", 0);

    System.out.println("Getting Title " + title);
    System.out.println("Getting character " + character);
    System.out.println("Getting thumbnail " + thumbnail);
    System.out.println("Getting thumbUri " + thumbUri);
    System.out.println("Getting totalPages " + totalPages);

    ListView lv = (ListView) findViewById(R.id.listview);
    m_adapter = new ListViewAdapter(this, R.layout.myputet_item, cat);
    lv.setAdapter(m_adapter);
}

private class ListViewAdapter extends ArrayAdapter<String> {
    private ArrayList<String> items;

    public ListViewAdapter(Context context, int textViewResourceId,
            ArrayList<String> items) {
        super(context, textViewResourceId, items);
        this.items = items;

    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.myputet_item, null);
        }
        String info = items.get(position);

        if (info != null) {
            titleView = (TextView) v.findViewById(R.id.titleTxtView);
            charView = (TextView) v.findViewById(R.id.charTxtView);
            totalView = (TextView) v.findViewById(R.id.totalTxtView);
            thumbView = (ImageView) v.findViewById(R.id.charImageView);
            removeView = (ImageView) v.findViewById(R.id.removeListItem);

            titleView.setText(title);
            charView.setText(character);
            totalView.setText(totalPages);
            thumbView.setImageURI(thumbUri);
        }
        return v;
    }
}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:51:00.790

嗯，当然不要那样做。不要把它全部扔进去，而是`SharedPreferences`通过你的`Intent`. 例如，而不是：

```
edit.putString("TITLE", getItem(position).title); 
```

您可以使用

```
i.putExtra("TITLE", getItem(position).title); 
```

然后，在您`onCreate()`的详细活动中，使用：

```
Intent passedIntent = getIntent();
String title = passedIntent.getStringExtra("TITLE"); 
```

# lambda - 在 xtend 中按值对哈希图进行排序

> ID：13160581
> 
> 赞同：3
> 
> 时间：2012-10-31T14:46:24.303
> 
> 标签：lambda, hashmap, xtend

假设我有一个 java.util.HashMap 对象。我想生成一个列表，其中 HashMap 中的条目按 Double 的值从高到低排序。我该怎么做？我已经使用 Guava Ordering 类在 Java 中进行了尝试，但我不喜欢从 xtend 跳转到 Java 的美学，此外，它不起作用:( 我觉得这应该很容易在 xtend 中使用 lambda 表达式，但我不知道该怎么做。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T18:04:16.370

```
val source = newHashMap('one' -> 1.0 , 'two' -> 2.0)
source.entrySet.sortBy[-value]           // List<Map.Entry<String, Double>> 
```

或者如果你只想要钥匙

```
source.entrySet.sortBy[-value].map[key]  // List<String> 
```

# java - 为什么两个浮点结果在名义上具有相同的值时会有所不同？

> ID：13160583
> 
> 赞同：7
> 
> 时间：2012-10-31T14:46:25.183
> 
> 标签：java, floating-point

我最近正在阅读有关在内存中存储浮点值的内容。我写了一个小程序来测试我读过的内容。我注意到 Java 处理浮点值的方式有所不同。

```
public class Test
{
   public static void main(String args[])
   {
     double a = 0.90;
     System.out.println(a);
     System.out.println(2.00-1.10);
   }
 } 
```

上面的程序正在打印

```
0.9
0.8999999999999999 
```

为什么这两个语句都没有打印相同的值？我知道一些浮动值无法准确表示。在这种情况下，两者都应该给出相同的值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T14:48:47.550

> 为什么这两个语句都没有打印相同的值？

结果不一样。

> 我知道一些浮动值无法准确表示。

因此，您应该假设操作的结果可能取决于您使用的值的表示错误量。

```
for (long l = 1; l <= 1e16; l *= 10) {
    double a = l + 2;
    double b = l + 1.1;
    System.out.println(a + " - " + b + " is " + (a - b));
} 
```

随着值变大，表示误差增加并且与 0.9 的结果相比变大

```
3.0 - 2.1 is 0.8999999999999999
12.0 - 11.1 is 0.9000000000000004
102.0 - 101.1 is 0.9000000000000057
1002.0 - 1001.1 is 0.8999999999999773
10002.0 - 10001.1 is 0.8999999999996362
100002.0 - 100001.1 is 0.8999999999941792
1000002.0 - 1000001.1 is 0.9000000000232831
1.0000002E7 - 1.00000011E7 is 0.900000000372529
1.00000002E8 - 1.000000011E8 is 0.9000000059604645
1.000000002E9 - 1.0000000011E9 is 0.8999999761581421
1.0000000002E10 - 1.00000000011E10 is 0.8999996185302734
1.00000000002E11 - 1.000000000011E11 is 0.899993896484375
1.000000000002E12 - 1.0000000000011E12 is 0.9000244140625
1.0000000000002E13 - 1.00000000000011E13 is 0.900390625
1.00000000000002E14 - 1.000000000000011E14 is 0.90625
1.000000000000002E15 - 1.0000000000000011E15 is 0.875
1.0000000000000002E16 - 1.0000000000000002E16 is 0.0 
```

* * *

关于表示错误何时变得如此大的主题，您的操作什么也不做。

```
for (double d = 1; d < Double.MAX_VALUE; d *= 2) {
    if (d == d + 1) {
        System.out.println(d + " + 1 == " + (d + 1));
        break;
    }
}
for (double d = 1; d < Double.MAX_VALUE; d *= 2) {
    if (d == d - 1) {
        System.out.println(d + " - 1 == " + (d - 1));
        break;
    }
} 
```

印刷

```
9.007199254740992E15 + 1 == 9.007199254740992E15
1.8014398509481984E16 - 1 == 1.8014398509481984E16 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-31T20:27:13.497

当“0.90”转换为double时，结果是0.9加上一些小误差，e [0]。因此`a`等于 .9+e [0]。

当“1.10”转换为double时，结果是1.1加上一些小误差e [1]，所以结果是1.1+e [1]。

这两个错误e [0]和e [1]通常彼此无关。简单地说，不同的十进制数与二进制浮点数的距离不同。当您评估`2.00-1.10`时，结果为 2–(1.1+e [1] ) = .9–e [1]。所以你的一个数字是 .9+e [0]，另一个是 .9-e [1]，没有理由期望它们是一样的。

（正如它在这种情况下发生，例如[0]是.00000000000000002220446049250313080847263336181640625和e [1]是.000000000000000088817841970012523233890533447265625。此外，减去2只引入了没有新的误差1.1，的“1.1”转换为加倍，由Sterbenz引理后）。

额外细节：

在二进制中，.9**是****.11100110011001100110011001100110011001100110011001100** 11001100 ...... 尾随位不适合，因此该数字在该点处四舍五入。这会导致 .9 的精确值与以双精度表示的“.9”值之间存在差异。在二进制中，1.1 是**1.00011001100110011001100110011001100110011001** 10011001……同样，数字是四舍五入的。但观察金额四舍五入是不同的。对于 0.9，1100 1100… 向上舍入为 1 0000 0000…，在该位置添加 00110011…。对于 1.1，1001 1001 向上舍入到 1 0000 0000…，在该位置添加 01100110…（并导致粗体位进位）。而且这两个位置不同；1.1 从小数点的左边开始，所以看起来像这样： 1.[*****这里是 52 位*][*发生舍入的地方*]。.9 开始于小数点的右侧，所以它看起来像这样：.[ *53 bits here* ][*发生舍入的地方*]。所以 1.1 的舍入，除了 01100110… 而不是 00110011…，也加倍，因为它出现在 0.9 舍入的左边一位。所以你有两个效果使 e [0]与 e [1]不同：四舍五入的尾随位不同，四舍五入的位置不同。****

 ***** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T14:49:50.300

> 我知道一些浮动值无法准确表示

嗯，这就是你的答案（或者更准确地说，正如 Mark Byers 所指出的，一些十进制值不能完全表示为双精度）！0.9 或 1.1 都不能表示为双精度数，因此会出现舍入错误。

您可以使用 BigDecimal 检查各种双打的确切值：

```
public static void main(String args[]) {
    double a = 0.9d;
    System.out.println(a);
    System.out.println(new BigDecimal(a));
    double b = 2d - 1.1d;
    System.out.println(b);
    System.out.println(new BigDecimal(2.0d));
    System.out.println(new BigDecimal(1.1d));
    System.out.println(new BigDecimal(b));
} 
```

输出：

```
0.9
0.90000000000000002220446049250313080847263336181640625
0.8999999999999999
2
1.100000000000000088817841970012523233890533447265625
0.899999999999999911182158029987476766109466552734375 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T14:49:40.363

您的理由是，即使 0.9 不能由 a 精确表示`double`，它也应该具有与 2.0 - 1.1 完全相同的`double`值，因此会产生相同的打印值。这就是错误——这个减法不会产生`double`由“0.9”（或精确值 0.9）表示的值。****

# iphone - iTunes 测试用户是否会在不同开发者帐户上创建的应用程序上工作

> ID：13160585
> 
> 赞同：1
> 
> 时间：2012-10-31T14:46:27.990
> 
> 标签：iphone, ios, app-store-connect

我从我的开发者帐户创建了一个 iTunes 测试用户帐户。

![在此处输入图像描述](../Images/a4d659bc43b0e77106733fb507e2734a.png)

我的客户（在不同的开发者帐户上）设置了一个应用程序和应用内购买产品。

我可以使用我的测试用户购买客户设置的产品吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:09:40.523

答案是否定的——你不能。

测试用户只能在创建他们的开发者帐户上购买产品的沙盒中的内容。

我设法让一个朋友帮我测试这个，当我使用他的测试用户时遇到了这个错误。

![在此处输入图像描述](../Images/cf2d8620277bcd923159829e0efb3508.png)

# jsf - IE 忽略 FacesContext.responseComplete()

> ID：13160586
> 
> 赞同：1
> 
> 时间：2012-10-31T14:46:33.133
> 
> 标签：jsf

为什么在使用 Response.sendRedirect() 将页面重定向到另一个页面后立即调用 FacesContext.responseComplete() 后 IE (IE8) 仍在尝试呈现当前页面。其他浏览器（Firefox、Chrome、Opera...）只是跳转到另一个页面而不尝试呈现当前页面。我正在使用 JSF 1.2 和 Richfaces 3.3 final。下面列出了 JSF 生命周期，用于触发命令按钮。请注意 IE 上的验证阶段。验证是根本原因吗？

**其它浏览器**

RESTORE_VIEW 1 之前

RESTORE_VIEW 1 之后

在 APPLY_REQUEST_VALUES 2 之前

在 APPLY_REQUEST_VALUES 2 之后

在 PROCESS_VALIDATIONS 3 之前

在 PROCESS_VALIDATIONS 3 之后

在 UPDATE_MODEL_VALUES 4 之前

UPDATE_MODEL_VALUES 4 之后

在 INVOKE_APPLICATION 5 之前

在 INVOKE_APPLICATION 5 之后

在 RENDER_RESPONSE 6 之前

RENDER_RESPONSE 6 之后

RESTORE_VIEW 1 之前

RESTORE_VIEW 1 之后

在 RENDER_RESPONSE 6 之前

RENDER_RESPONSE 6 之后

**IE**

RESTORE_VIEW 1 之前

RESTORE_VIEW 1 之后

在 APPLY_REQUEST_VALUES 2 之前

在 APPLY_REQUEST_VALUES 2 之后

在 PROCESS_VALIDATIONS 3 之前

在 PROCESS_VALIDATIONS 3 之后

在 UPDATE_MODEL_VALUES 4 之前

UPDATE_MODEL_VALUES 4 之后

在 INVOKE_APPLICATION 5 之前

在 INVOKE_APPLICATION 5 之后

在 RENDER_RESPONSE 6 之前

RENDER_RESPONSE 6 之后

RESTORE_VIEW 1 之前

RESTORE_VIEW 1 之后

在 APPLY_REQUEST_VALUES 2 之前

在 APPLY_REQUEST_VALUES 2 之后

在 PROCESS_VALIDATIONS 3 之前

*...错误（与问题无关）*

在 PROCESS_VALIDATIONS 3 之后

RESTORE_VIEW 1 之前

RESTORE_VIEW 1 之后

在 RENDER_RESPONSE 6 之前

RENDER_RESPONSE 6 之后

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:26:04.707

这个问题与 JSF 无关。特定于浏览器的问题通常是由 HTML/CSS/JS 等客户端代码引起的，而不是由 JSF 等服务器端代码引起的。此特定问题可识别为 JavaScript 问题。您需要检查是否没有任何 JavaScript 代码在 onload / DOM-ready 期间执行某些任务，例如自动提交表单。阶段侦听器跟踪即表明执行了 POST 请求（阶段#2 到 #5 通常仅在回发期间出现）。

很可能有一些不可预见的特定于浏览器的 JS 条件导致在 MSIE 中触发 POST 请求。

# visual-studio - 如何取消注释 C++ 中的源代码？

> ID：13160588
> 
> 赞同：-1
> 
> 时间：2012-10-31T14:46:36.683
> 
> 标签：visual-studio, netbeans, ide, comments

如何一次取消注释多行源代码？特别是这个注释符号 - #

我有：Visual Studio、Netbeans、DevCpp

我有这个源代码：

```
# /**
#  * RC4.java - Implementace algoritmu proudove sifry RC4
#  *
#  * Na zaklade vzorove implementace Arcfour algoritmu Kalle Kaukonena (1997) v
# jazyce C
#  * pro potreby vyuky na CVUT FEL prepsal do jayzka Java a upravil Lukas
# Privoznik (2008).
#  */
# package rc4;
#
# import java.io.*;
#
#
# /*
#  * Kontext S sifrovaciho algoritmu RC4
#  */
# class RC4Context {
#
#     int x;
#     int y;
#     char state[];
#
#     RC4Context() {
#         state = new char[256];
#     }
# }
# 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:55:22.703

那么在您的情况下，您可以使用列选择。

在 Visual Studio 中：尝试按住`Alt`并拖动鼠标以在第一列周围形成一个矩形以选择所有出现的“#”，然后只需按 Delete。

在 Netbeans 中，列选择应与`Strg`++`Shift`一起使用`R`。

# wordpress - WordPress 侧边栏菜单 CSS 样式和定位

> ID：13160590
> 
> 赞同：0
> 
> 时间：2012-10-31T14:46:37.853
> 
> 标签：wordpress, menu, positioning, css

我试图让侧边栏菜单在正确的实时版本上看起来相同，但工作正常，因此它在测试版本（[查看页面](http://test.snowflakesoftware.com/markets/inspire/)）上与项目悬停时的边框重叠

Live 版本的侧边栏菜单如下所示（[查看页面](http://www.snowflakesoftware.com/markets/inspire/)）

我猜想让悬停功能看起来像是与边界线重叠的方法是增加侧边栏区域的宽度，然后手动定位菜单？如果这有助于有意义，我在下面确实有一些代码？

```
<div id="mod_sidebar">
    <?php if ( ! dynamic_sidebar( 'Sidebar' )) : ?>
    <ul>

        <li id="sidebar-nav" class="widget menu">
            <h3><?php _e('Navigation'); ?></h3>
            <ul>
                <?php wp_nav_menu( array( 'theme_location' => 'sidebar-menu' ) );?>
            </ul>
        </li>

    </ul>
    <?php endif; ?>
</div><!--mod_sidebar-->

    #mod_sidebar {
        float: left;
        width: 202px;
        /*background-color: #F96;*/
        background: url(images/sidebar-bg.jpg);
        background-repeat: no-repeat;
    }
        #mod_sidebar .widget-area {
            padding-bottom: 20px;
            margin-bottom: 20px;
        }
            #mod_siebar ul,
            #mod_sidebar li {
                padding: 0;
                margin: 0;
                list-style: none;
            }
                #mod_sidebar .children {
                    padding-left: 10px;
                }
                    #mod_sidebar .children .children {
                        padding-left: 10px;
                    } 
```

CSS如下

```
#mod_sidebar,
    #mod_sidebar ul {list-style: none; padding: 0; margin: 0;}
    #mod_sidebar a {display: block; padding: 10px; width: 210px; font-size: 13px; color: #174267;}
    #mod_sidebar li {float: left; width: 190px; background-color: #F4F8Fa; border-top: 1px solid #c3ced5;}
    #mod_sidebar li:hover {background: url(images/hover_bg.png);}
    #mod_sidebar li ul {position: absolute; width: 210px; left: -999em; background-color: #1662a7;}
    #mod_sidebar li:hover ul {left: auto; background: url(images/hover_bg.png);} 
```

如果可能的话，只需要一些指导！再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:01:14.400

您可以从查看此文件的第 3904 行开始：[http](http://cdn.snowflakesoftware.com/wp-content/themes/twentyeleven/style.css) ://cdn.snowflakesoftware.com/wp-content/themes/twentyeleven/style.css （属于具有您似乎想要的布局的站点的样式表。

请注意，他们在这里做了一些事情：

1) 使用负边距。所以在菜单项悬停和活动状态：

```
.side-menu a.active, .side-menu a:hover 
```

元素的负右边距为 17px：

```
margin-right: -17px; 
```

2) 此表中的 CSS 还为 a.active 和 a:hover 提供以下背景图像：[http ://cdn.snowflakesoftware.com/wp-content/themes/twentyeleven/images/hover_bg.png](http://cdn.snowflakesoftware.com/wp-content/themes/twentyeleven/images/hover_bg.png)

首先查看上面概述的这两个位，看看它有多接近你想要的。

您也可以只复制生产中使用的 CSS 和 HTML（LIVE 站点）...

# android - delete row from the list

> ID：13160591
> 
> 赞同：-1
> 
> 时间：2012-10-31T14:46:39.583
> 
> 标签：android

when i am deleting a row from the database then it deletes row successfully ,, suppose that i had deleted the row 2 from the database then when i click on row 3 then it shows the content of row 4 . on clicking row 1 its working fine but on clicking row 2 it pop up with force closed and error is CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0 ... on clicking the row it shows text value saved in that row ... i have populated listview by simplecursoradapter . please someone do some help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:00:05.123

当您对用于在 ListView 中填充数据的适配器数据进行任何更改时，请使用 notifyDataSetChanged() 请查看此[视频](http://www.google.com/events/io/2010/sessions/world-of-listview-android.html)以了解其重要性

# jsf-2 - JSF 2 DataTable with multiple headers on dynamic columns

> ID：13160595
> 
> 赞同：2
> 
> 时间：2012-10-31T14:46:48.150
> 
> 标签：jsf-2, header, dynamic-columns, view-scope

I'm developing a data-centric Web Application using JSF 2.1 and PrimeFaces 3.4.
As a result of a specific query, I must display the results in a bi-dimensional data table with some dynamic columns (imagine a sort of Pivot-table).
Currently I use a PrimeFaces `<p:dataTable>` with some standard `<p:column>` tags and a `<p:columns>` for the dynamically-created columns. The table is backed by a `@ViewScoped` Managed Bean. It works fine, but:

*   Just like a pivot-table, I need to display multiple headers too, in order to group some fields together. Unfortunately, `<p:columns>` is not compatible with `<p:columnGroup>` (nor with many other features like resizing etc.)
*   I need to display some custom sub-total rows (is there a way to do this?)

I was thinking about populating the entire `<p:dataTable>` programmatically, but I can't use `binding="#{...}"` with a `@ViewScoped` bean due to [JSF issue 1492](http://java.net/jira/browse/JAVASERVERFACES-1492).

# java - How to reliably read and write to a running external process from Java?

> ID：13160596
> 
> 赞同：0
> 
> 时间：2012-10-31T14:46:54.183
> 
> 标签：java, io, external-process

I would like to be able to spawn an external process from Java, and periodically write to its input and read the response as if it were the console. Much of the time, however, when I read the process' output, nothing is available. Is there a good practice to do this sort of thing (even avoiding it)?

Here's a stripped down example of what doesn't work:

```
import org.apache.commons.exec.*;
import java.io.*;
//...
CommandLine cl = CommandLine.parse("/usr/bin/awk {print($1-1)}");
System.out.println(cl.toStrings());
Process proc = new ProcessBuilder(cl.toStrings()).start();
OutputStream os = proc.getOutputStream(); // avoiding *Buffered* classes
InputStream is = proc.getInputStream();   // to lessen buffering complications
os.write(("4" + System.getProperty("line.separator")).getBytes());
os.flush(); // Doesn't seem to flush.
// os.close(); // uncommenting works, but I'd like to keep the process running
System.out.println("reading");
System.out.println(is.read()); // read even one byte? usually is.available() -> 0 
```

Strangely, if I wrap up the OutputStream in a BufferedWriter, the I can read from some processes (cat), but not others (awk, grep).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:06:48.630

一般来说，采取的方法是适当的。不过有几件事：

1.  `InputStream.read()`是一种阻塞方法。它等待输入并且不是 CPU 密集型的。你应该围绕它...
2.  可以读取多个字节，只需使用`read(byte[] buffer, int offset, int len)`
3.  将输入流包装到 BufferedInputStream 简化了访问（`readLine()`方法）。这是 BufferedReader 的替代方案。
4.  不要忘记使用`Process.waitFor()`.

此外，确保外部进程写入标准输出（而不是标准错误）。这里有两种可能：

1.  使用`Process.getErrorStream()`（并将其视为另一个 InputStream）
2.  将命令行更改为. 这会将标准错误重定向到标准输出。`/usr/bin/awk {print($1-1)} **2>&1**`

# c# - 在一个项目中运行良好的 C# 代码在另一个项目中不起作用

> ID：13160598
> 
> 赞同：0
> 
> 时间：2012-10-31T14:47:00.480
> 
> 标签：c#, c#-4.0, datagridview, ado.net

以下代码（完全相同）在另一个项目上运行良好。

```
 private void AddComboBoxCells()
        {
            DataGridViewComboBoxCell dgvcell;
            _query = "select ProductName from Product";
                com = new SqlCommand(_query, con);
                    for (int i = 0; i < dataGridView1.Rows.Count - 1; i++)
                    {
                        dgvcell = new DataGridViewComboBoxCell();
                        dataGridView1[1, i] = dgvcell;
                        myrdr = com.ExecuteReader();
                        while (myrdr.Read())
                        {
                            dgvcell.Items.Add(myrdr.GetValue(0));
                        }
                        myrdr.Close();
                    }

        } 
```

在这个项目上，目前我正在尝试运行相同的代码，但在运行时出现以下错误：

![在此处输入图像描述](../Images/9ca25c97ccac7582cfffe6558a64c9ce.png)

我正在做的是我正在提取记录，即产品名称并将其填充到 datagridviewcomboboxcell 的第二列中。

**编辑**

```
 private void btnAdd_Click(object sender, EventArgs e)
    {
        DataRow dtr = tblOrders.NewRow();
        tblOrders.Rows.Add(dtr);
        DataGridViewComboBoxCell dgvcell;
        _query = "select * from Product";
        com = new SqlCommand(_query, con);
            dgvcell = new DataGridViewComboBoxCell();
            dataGridView1[1, dataGridView1 .Rows.Count -2 ] = dgvcell;
            myrdr = com.ExecuteReader();
            while (myrdr.Read())
            {
                dgvcell.Items.Add(myrdr[0]);
            }
            myrdr.Close();
    } 
```

此添加按钮代码有效，因此传入的数据肯定有效。请协助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:50:56.140

首先，您可能希望将处理程序附加到 DataGridView 控件的 DataError 事件，以获取有关您遇到的错误的更多信息。

其次，要检查的明显内容是您在第二个项目中使用的数据上下文。这似乎很可能不一定是编程错误，而更像是与您正在查询和/或进行数据绑定的基础数据相关的问题。

您可能想要调查**数据类型**和查询返回**的值**：`select ProductName from Product`。

看`myrdr.getValue(0)`- 像这样重写这一行`dgvcell.Items.Add(myrdr.GetValue(0));`：

```
object val = myrdr.GetValue(0);  
dgvcell.Items.Add(val);         // put a break-point here and check val 
```

**编辑**

要回答有关如何处理 DataError 事件的问题，您只需将处理程序附加到“dataGridView1”对象的事件成员（如果您不知道什么是事件，或者如何将处理程序附加到事件）在 C# 中，那么我建议你在网上做一些阅读 - 到处都有大量的资源）

```
// you will want to add this code to attach the handler in your initialization code - maybe in the Load event handler
dataGridView1.DataError += new DataGridViewDataErrorEventHandler(DataGridView1);

// ....

// an then define this function somewhere in your class to handle the event
private void DataGridView1_DataError(object sender, DataGridViewDataErrorEventArgs anError)
{
     // this function will be called when an error occurs.
     //  you can then use the anError paramenter to get insight into the type and cause of the error
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T14:55:45.980

您的第二个项目中是否有有效数据？我*猜*您的调用`myrdr.GetValue(0)`在某个时候返回 null （或其他一些虚假值）？

# node.js - Yeoman 和 ExpressJS

> ID：13160599
> 
> 赞同：25
> 
> 时间：2012-10-31T14:47:03.637
> 
> 标签：node.js, web-applications, express, yeoman

我想知道是否有一些样板代码可以使用像 Yeoman 这样的前端工作流工具和像 ExpressJS 这样的后端框架，如果我想为前端和后端维护相同的代码库。

基本上我想知道-

*   yeoman 和 express 生成的样板代码如何组合在一起。有没有办法将两者结合起来？（gruntfile 是如何融入 express 项目的）

*   我可以用在更新时重新加载页面的快速服务器替换 yeoman 的默认手表吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-08T15:42:31.910

Yeoman 目前专注于前端应用程序开发，但未来我们将探索后端集成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T08:47:36.503

不，实际上现在没有。

但是您可以将[express.js](http://expressjs.com/)与[组件包管理器](https://github.com/component/component)结合使用。还有一些工作，你不能在组件中使用 yeoman 组件。

回答您的问题

*   您可以在 yeoman 中使用的组件 repo 中查找组件。不一样，但可能是一个解决方案。
*   为此使用模块[管理](https://github.com/isaacs/node-supervisor)器。你可以通过 npm 获取

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T01:36:42.463

我还没有找到一种简单的方法将我自己的 Express + H5BP + Angular + Grunt 骨架集成到 Yeoman 中，最终决定在这里创建一个 repo：[https ://github.com/ericclemmons/genesis-skeleton](https://github.com/ericclemmons/genesis-skeleton)

根据我所读到的，有一些项目正在进行中以添加快速生成器，但最终堆栈将变得足够复杂，以至于您必须维护自己的入门应用程序，而不是生成它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T00:40:17.360

有 yeoman + express.js [G+ Yeoman/Express 文章的实验分支](https://plus.google.com/115133653231679625609/posts/YDNbxVxi4er%20Seems%20promising.)

我发现 yeoman.js 对于快速原型制作非常酷，但确实需要一些提升才能习惯它“认为”的各种工具。我决定在一些希望有帮助的视频中回顾每个核心工具：[yeoman.js 相关视频](https://plus.google.com/115133653231679625609/posts/YDNbxVxi4er)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-08T00:52:51.060

[Yoeman 全栈](https://www.npmjs.org/package/generator-angular-fullstack)生成器现在同时生成前端和后端。其他有趣的框架是[Sails JS](http://sailsjs.org/)和[StrongLoop](http://strongloop.com/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-12T01:35:33.787

值得注意的是有一个`express-generator`项目：

*   [官方文档](http://expressjs.com/en/starter/generator.html)
*   [npm 页面](https://www.npmjs.com/package/generator-express)

我将试一试——因为我正在学习[本教程](http://mherman.org/blog/2015/02/12/postgresql-and-nodejs/#.Vwwq1WcrKkA)——但除此之外，我无法评论它的价值。

# pagination - Paging Gmails Atom feed

> ID：13160600
> 
> 赞同：0
> 
> 时间：2012-10-31T14:47:08.973
> 
> 标签：pagination, oauth-2.0, gmail, paging, atom-feed

I am currently working on a JS application using OAuth 2.0 to access the gmail atom feed [https://mail.google.com/mail/feed/atom/](https://mail.google.com/mail/feed/atom/) I am able to successfully sign the request, and retrieve the emails, however I am only able to access the first 20\. Is there any way to access more than 20 emails in this feed? If not, is there any way using a different feed?

Thanks -A

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:56:43.710

您不能这样做，因为他 atom 仅提供对最新 20 条未读消息的访问权限

# websocket - websocket doesn't get connected

> ID：13160601
> 
> 赞同：2
> 
> 时间：2012-10-31T14:47:12.593
> 
> 标签：websocket, ubuntu-12.04

I could connect websocket to the server on my local machine. But when i uploaded the file to a remote ubuntu server, it doesn't work any more.

Server side code(server.php):

```
$master = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);
socket_set_option($master, SOL_SOCKET, SO_REUSEADDR, 1);
socket_bind($master, "127.0.0.1", 80);
socket_listen($master, 20); 
```

client side code:

```
<script type="text/javascript">
var host = "ws://127.0.0.1:80/server.php";
socket = new WebSocket(host);
</script> 
```

I open the client page from chrome canary version 24, server side didn't get any accepted socket.

I changed the host to "ws://xx.xx.xx.xx:80/server.php" to the real IP address of the server, doesn't work. Also changed the server side socket_bind($master, "127.0.0.1", 80) to real ip, no luck either.

Any one can help me?

Thanks,

Jasmine

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:37:00.130

我的朋友，当你写你的服务器时。您需要保持它作为服务运行，或者只是保持它运行。对于 php 服务器，您需要从 PHP Cli (php yourfile.php) 运行该文件，而不是从浏览器运行（您可以将超时设置为 0，但如果您关闭浏览器，您的服务器将停止工作）。我真的不推荐通过 PHP 使用套接字服务器。阅读有关使用 C++（QT、Berkeley）或 Java Socket Servers 的套接字服务器的更多信息。

当我们谈论 HTML5 Websockets 服务器时，它与编写“普通”套接字服务器不同（有很多 PHP 库可以帮助您编写 HTML5 Websocket 服务器）

[https://github.com/Flynsarmy/PHPWebSocket-Chat](https://github.com/Flynsarmy/PHPWebSocket-Chat)

在该链接中，您可以找到聊天的示例。有一个名为 class.PHPWebSocket.php 的文件，将它包含在您的 server.php 中并使用该库来创建 HTML5 Websocket 服务器。查看示例，了解它的工作原理以及如何使用 class.PHPWebSocket.php（查看示例中的 server.php 文件）。

完成后运行服务器。

然后做：

```
// ...
var host = "ws://IP.OF.THE.SERVER:port";
socket = new WebSocket(host);
// ... 
```

阅读有关套接字服务器、HTML5 Websockets 的更多信息，并查看该 class.PHPWebSocket.php 实用程序。祝你好运，我的朋友。

# jquery-tools - Where can I get the source code for jQuery Tools 1.2.7?

> ID：13160604
> 
> 赞同：1
> 
> 时间：2012-10-31T14:47:20.857
> 
> 标签：jquery-tools

I need to get the source code for this, but unfortunately, I can't find links to it on jquerytools.org. The forum on that site is also down. Does anyone know where I can get this source or unminify it?

Thanks, Rob

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T14:50:54.150

您是否尝试过访问[http://jquerytools.org/download/](http://jquerytools.org/download/)？（我的意思是在您发布的网址上附加“/download/”）

编辑：但是您可以从[Git](https://github.com/jquerytools/jquerytools)下载源代码，找到链接并单击“克隆”或“压缩”。

编辑：不，它是 1.2.7 版本，正如您在[“标签”链接](https://github.com/jquerytools/jquerytools/tags)中看到的那样，他们在大约 7 个月前标记了 1.2.7 版本，这是我在您的问题中所读到的您需要的版本，如果您不相信我建议您使用此链接（即 github[项目标签页面](https://github.com/jquerytools/jquerytools/tags)中“标记版本 1.2.7”附近的链接）：

[https://github.com/jquerytools/jquerytools/zipball/v1.2.7](https://github.com/jquerytools/jquerytools/zipball/v1.2.7)

单击上面的链接，您将开始以 .zip 文件下载 jquerytools v1.2.7

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-12T10:08:33.030

找到 jQueryTools 的源代码变得非常困难，并且由于作者提供的原始 CDN 现在已经消失，许多从相关 CDN 调用工具集的站点都停止了工作。

在[https://cdnjs.com/libraries/jquery-tools/1.2.7](https://cdnjs.com/libraries/jquery-tools/1.2.7)有一个有用的资源，它为所有版本的 jQueryTools 提供 CDN/下载链接，回到 v1.2.0，虽然它不是源存储库，但可以至少可以帮助一些仍在运行旧网站的人，以在他们找到替代解决方案或更换网站时保持他们的运行。

# windows - 自动生成gui？

> ID：13160605
> 
> 赞同：4
> 
> 时间：2012-10-31T14:47:26.970
> 
> 标签：windows, user-interface, wxwidgets, frontend

我是个盲人，我很难做出好看的 guis。这真的让我很沮丧，因为虽然我是一个有能力的开发人员，但我无法独自完成项目，因为我无法制作前端。我想知道你们中是否有人知道一些可以产生专业外观的 gui 的自动解决方案？它们不必花哨，大多数时候我们都在谈论基本的表单/向导风格的布局。我基本上需要避免指定像素高度、宽度和位置。我需要一些东西来弄清楚如何使事物在大小和位置方面相互匹配，调整大小等等。我的主要目标平台是 Windows。我之前和 WxWidgets 合作过并且非常满意，但是我需要聘请另一个人来做我不能长期做的设计。我写代码没问题，

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T18:39:21.503

我怀疑是否有完美的替代品可以替代视力敏锐、对工作充满热情并且有大量时间致力于拖放、推拉 GUI 小部件直到一切正常的人。

但是，如果您对完成工作的工作日解决方案感到满意，那么我认为 wxWidgets sizers 做得很合理。你熟悉这些吗？指定您希望在小部件周围留出多少空间，以及您希望它们是垂直排列还是水平排列。现在您所要做的就是将您的小部件添加到 sizer 中，sizer 将自动以一种通常相当不错的首次通过方式排列它们。

作为一个简单的例子，这里有一个简单的表格。

编码：

```
wxPanel * panel = new wxPanel(this,-1,wxPoint(-1,-1),wxSize(1000,1000));

wxSizerFlags szrflags(0);
szrflags.Border(wxALL,5);

wxBoxSizer * szrCRUDForm = new wxBoxSizer(wxVERTICAL );

wxFlexGridSizer * szr = new wxFlexGridSizer(2,1,1);

wxStaticText * field1text =  new wxStaticText(panel,-1,"Entry Field #1");
wxTextCtrl   * field1ctrl =  new wxTextCtrl(panel,-1,"              ");
wxStaticText * field2text =  new wxStaticText(panel,-1,"Second Entry Field");
wxTextCtrl   * field2ctrl =  new wxTextCtrl(panel,-1,"              ");
wxStaticText * field3text =  new wxStaticText(panel,-1,
    "A very big entry field\n"
    "with a lot of description\n"
    "Spread over several long lines of text");
wxTextCtrl   * field3ctrl =  new wxTextCtrl(panel,-1,"",wxPoint(-1,-1),wxSize(600,-1));
wxStaticText * field4text =  new wxStaticText(panel,-1,"Yet another Field");
wxTextCtrl   * field4ctrl =  new wxTextCtrl(panel,-1,"              ");

szr->Add( field1text,szrflags );
szr->Add( field1ctrl,szrflags );
szr->Add( field2text,szrflags );
szr->Add( field2ctrl,szrflags );
szr->Add( field3text,szrflags );
szr->Add( field3ctrl,szrflags );
szr->Add( field4text,szrflags );
szr->Add( field4ctrl,szrflags );

wxBoxSizer * szrButtons = new wxBoxSizer( wxHORIZONTAL );
szrButtons->Add( new wxButton(panel,-1,L"CREATE"),szrflags);
szrButtons->Add( new wxButton(panel,-1,L"READ"),szrflags);
szrButtons->Add( new wxButton(panel,-1,L"UPDATE"),szrflags);
szrButtons->Add( new wxButton(panel,-1,L"DELETE"),szrflags);

szrCRUDForm->Add( szr );
szrCRUDForm->Add( szrButtons );

SetSizer(szrCRUDForm); 
```

生成以下 GUI，无需任何推或拉

![在此处输入图像描述](../Images/fd744bc0c751bb9fb37bed209b025326.png)

这是一个介绍性的，相当粗糙的教程[http://neume.sourceforge.net/sizerdemo/](http://neume.sourceforge.net/sizerdemo/)

这是更复杂的东西[http://zetcode.com/tutorials/wxwidgetstutorial/layoutmanagement/](http://zetcode.com/tutorials/wxwidgetstutorial/layoutmanagement/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:32:38.183

我不确定你所说的盲目（字面或比喻）是什么意思，但我会假设后者。没有什么可以替代想象力。您的想象力将永远是您想要实现的目标。一旦你想到了它，你就可以在纸上或使用像 skencil 这样的东西来画它。

然后，您可以使用 wxWidgets 构建 GUI 的工具。那里很少有选项，其中一些如下所示。如果你想要跨平台，我建议使用 wxFormbuilder 或 wxSmith，如果你只想要 Windows，我建议使用 wxDevC++。如果你能花几块钱，那么考虑支持 DialogBlocks 由 wxWidgets 核心开发人员之一拥有。wxCrafter 看起来很有希望，但仍处于测试阶段。

如果您想聘请 Vadim Zeitlin 拥有这么[好的公司的](http://www.tt-solutions.com/en/home/)人，请考虑支持另一位核心开发人员。

1.  [wxFormBuilder](http://sourceforge.net/projects/wxformbuilder/)
2.  [对话块](http://www.anthemion.co.uk/dialogblocks/)
3.  [wxDevC++ 设计器](http://wxdsgn.sourceforge.net/)
4.  [Code::Block 的 wxSmith](http://wiki.codeblocks.org/index.php?title=WxSmith_plugin)
5.  [XRCed 设计师](http://xrced.sourceforge.net/)
6.  [wxDesigner](http://www.wxdesigner-software.de/)
7.  [wxGlade](http://wxglade.sourceforge.net/)
8.  [wxCrafter](http://forums.wxwidgets.org/viewtopic.php?f=10&t=35792)（处于测试阶段）

# silverlight - How to find the instance of a control in silverlight?

> ID：13160613
> 
> 赞同：0
> 
> 时间：2012-10-31T14:47:44.720
> 
> 标签：silverlight

I have the following XAML where myList is a user control. On that user control I have a textblock and a delete button. When a user presses the delete button, I want to delete the instance of that selected user control. How do I do that? Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:47:20.780

为什么不使用 visibility.collapsed 而不是从对象树中删除控件？

# directory - How to create new folder with FolderPicker

> ID：13160615
> 
> 赞同：5
> 
> 时间：2012-10-31T14:47:48.240
> 
> 标签：directory, picker

Im missing the function to create a new folders by using the Folder-(or File)Picker in Windows 8 (Metro) Apps (C#, XAML).

Background-Information:

My app downloads some Images from a server and I would choose the destination-folder with the aid of the FolderPicker. If the appropriate folder not exists, I want to create it, like this:

[http://i.stack.imgur.com/6sdEH.jpg](http://i.stack.imgur.com/6sdEH.jpg)

Is this possible?

# arrays - CUDA 中的一维最小卷积

> ID：13160617
> 
> 赞同：10
> 
> 时间：2012-10-31T14:47:53.060
> 
> 标签：arrays, performance, optimization, parallel-processing, cuda

我有两个数组，a 和 b，我想计算“最小卷积”以产生结果 c。简单的伪代码如下所示：

```
for i = 0 to size(a)+size(b)
    c[i] = inf
    for j = 0 to size(a)
        if (i - j >= 0) and (i - j < size(b))
            c[i] = min(c[i], a[j] + b[i-j]) 
```

（编辑：将循环更改为从 0 而不是 1 开始）

如果 min 是一个和，我们可以使用快速傅立叶变换 (FFT)，但在 min 的情况下，没有这样的模拟。相反，我想通过使用 GPU (CUDA) 使这个简单的算法尽可能快。我很乐意找到执行此操作的现有代码（或在没有 FFT 的情况下实现 sum case 的代码，以便我可以根据我的目的对其进行调整），但到目前为止我的搜索还没有找到任何好的结果。我的用例将涉及大小在 1,000 到 100,000 之间的 a 和 b。

问题：

*   是否已经存在有效执行此操作的代码？

*   如果我要自己实现这个，在结构上，CUDA 内核应该如何看起来才能最大限度地提高效率？我尝试了一个简单的解决方案，其中每个 c[i] 都由一个单独的线程计算，但这似乎不是最好的方法。关于如何设置线程块结构和内存访问模式的任何提示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T00:48:23.393

**更快的版本：**

```
__global__ void convAgB(double *a, double *b, double *c, int sa, int sb)
{
    int i = (threadIdx.x + blockIdx.x * blockDim.x);
    int idT = threadIdx.x;
    int out,j;

    __shared__ double c_local [512];

    c_local[idT] = c[i];

    out = (i > sa) ? sa : i + 1;
    j   = (i > sb) ? i - sb + 1 : 1;

    for(; j < out; j++)
    {    
       if(c_local[idT] > a[j] + b[i-j])
          c_local[idT] = a[j] + b[i-j]; 
    }   

    c[i] = c_local[idT];
} 

**Benckmark:**
Size A Size B Size C Time (s)
1000   1000   2000   0.0008
10k    10k    20k    0.0051
100k   100k   200k   0.3436
1M     1M     1M     43,327 
```

旧版本，对于 1000 到 100000 之间的大小，我用这个简单的版本进行了测试：

```
__global__ void convAgB(double *a, double *b, double *c, int sa, int sb)
{
    int size = sa+sb;

    int idT = (threadIdx.x + blockIdx.x * blockDim.x);
    int out,j;

    for(int i = idT; i < size; i += blockDim.x * gridDim.x)
    {
        if(i > sa) out = sa;
        else out = i + 1;

        if(i > sb) j = i - sb + 1;
        else j = 1;

        for(; j < out; j++)
        {
                if(c[i] > a[j] + b[i-j])
                    c[i] = a[j] + b[i-j];
        }
    }
} 
```

我填充了数组`a`并`b`使用了一些随机双数和`c`999999（仅用于测试）。我使用您的函数（没有任何修改）验证了`c`数组（在 CPU 中）。

我还从内部循环中删除了条件，所以它只会测试一次。

我不是 100% 确定，但我认为以下修改是有道理的。既然你有`i - j >= 0`，这与 相同`i >= j`，这意味着一旦`j > i`它永远不会进入这个块'X'（从 j++ 开始）：

```
if(c[i] > a[j] + b[i-j])
   c[i] = a[j] + b[i-j]; 
```

所以我在变量上计算`out`了循环条件 if `i > sa`，这意味着循环将在什么时候完成`j == sa`，如果这意味着循环将因为条件而`i < sa`完成（更早）。`i + 1``i >= j`

另一个条件`i - j < size(b)`意味着您将开始执行块'X'，当`i > size(b) + 1`因为`j`开始总是= 1。所以我们可以`j`输入应该开始的值，因此

```
if(i > sb) j = i - sb + 1;
else j = 1; 
```

看看你是否可以用真实的数据数组测试这个版本，并给我反馈。此外，欢迎任何改进。

**编辑**：可以实施**新的优化**，但这并没有太大的区别。

```
if(c[i] > a[j] + b[i-j])
    c[i] = a[j] + b[i-j]; 
```

我们可以通过以下方式消除 if：

```
double add;
...

 for(; j < out; j++)
 {
   add = a[j] + b[i-j];
   c[i] = (c[i] < add) * c[i] + (add <= c[i]) * add;
 } 
```

有：

```
if(a > b) c = b; 
else c = a; 
```

与 c = (a < b) * a + (b <= a) * b 相同。

如果 a > b 则 c = 0 * a + 1 * b；=> c = b; 如果 a <= b 那么 c = 1*a + 0 *b; => c = a;

```
**Benckmark:**
Size A Size B Size C Time (s)
1000   1000   2000   0.0013
10k    10k    20k    0.0051
100k   100k   200k   0.4436
1M     1M     1M     47,327 
```

我正在测量从 CPU 复制到 GPU、运行内核以及从 GPU 复制到 CPU 的时间。

```
GPU Specifications   
Device                       Tesla C2050
CUDA Capability Major/Minor  2.0
Global Memory                2687 MB
Cores                        448 CUDA Cores
Warp size                    32 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T22:26:21.123

`a`另一种可能对大型有用的替代*方法*`b`是在. 使用块允许内存合并，这对于内存带宽限制操作很重要，并且可以使用相当有效的共享内存减少将每个线程的部分结果组合成最终的每个块结果。可能最好的策略是为每个 MP 启动尽可能多的块同时运行，并让每个块发出多个输出点。这消除了与启动和退出具有相对较低总指令计数的许多块相关的一些调度开销。*`c`*

 *如何做到这一点的一个例子：

```
#include <math.h>

template<int bsz>
__global__ __launch_bounds__(512)
void minconv(const float *a, int sizea, const float *b, int sizeb, float *c)
{
    __shared__ volatile float buff[bsz];
    for(int i = blockIdx.x; i<(sizea + sizeb); i+=(gridDim.x*blockDim.x)) {
        float cval = INFINITY;
        for(int j=threadIdx.x; j<sizea; j+= blockDim.x) {
            int t = i - j;
            if ((t>=0) && (t<sizeb))
                cval = min(cval, a[j] + b[t]);
        }
        buff[threadIdx.x] = cval; __syncthreads();
        if (bsz > 256) {
            if (threadIdx.x < 256) 
                buff[threadIdx.x] = min(buff[threadIdx.x], buff[threadIdx.x+256]);
            __syncthreads();
        }
        if (bsz > 128) {
            if (threadIdx.x < 128) 
                buff[threadIdx.x] = min(buff[threadIdx.x], buff[threadIdx.x+128]); 
            __syncthreads();
        }
        if (bsz > 64) {
            if (threadIdx.x < 64) 
                buff[threadIdx.x] = min(buff[threadIdx.x], buff[threadIdx.x+64]);
            __syncthreads();
        }
        if (threadIdx.x < 32) {
            buff[threadIdx.x] = min(buff[threadIdx.x], buff[threadIdx.x+32]);
            buff[threadIdx.x] = min(buff[threadIdx.x], buff[threadIdx.x+16]);
            buff[threadIdx.x] = min(buff[threadIdx.x], buff[threadIdx.x+8]);
            buff[threadIdx.x] = min(buff[threadIdx.x], buff[threadIdx.x+4]);
            buff[threadIdx.x] = min(buff[threadIdx.x], buff[threadIdx.x+2]);
            buff[threadIdx.x] = min(buff[threadIdx.x], buff[threadIdx.x+1]);
            if (threadIdx.x == 0) c[i] = buff[0];
        }
    }
}

// Instances for all valid block sizes.
template __global__ void minconv<64>(const float *, int, const float *, int, float *);
template __global__ void minconv<128>(const float *, int, const float *, int, float *);
template __global__ void minconv<256>(const float *, int, const float *, int, float *);
template __global__ void minconv<512>(const float *, int, const float *, int, float *); 
```

[免责声明：未经测试或基准测试，使用风险自负]

这是单精度浮点，但同样的想法应该适用于双精度浮点。对于整数，您需要将 C99`INFINITY`宏替换为类似的东西`INT_MAX`or `LONG_MAX`，但原理保持不变。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T18:58:43.933

我用过你的算法。我想它会帮助你。

```
const int Length=1000;

__global__ void OneD(float *Ad,float *Bd,float *Cd){
    int i=blockIdx.x;
    int j=threadIdx.x;
    Cd[i]=99999.99;
    for(int k=0;k<Length/500;k++){
        while(((i-j)>=0)&&(i-j<Length)&&Cd[i+k*Length]>Ad[j+k*Length]+Bd[i-j]){
            Cd[i+k*Length]=Ad[j+k*Length]+Bd[i-j];
    }}} 
```

我已经采取了*每个*块的`500`线程。并且，*每个*网格块。因为，我的设备中*每个*块的线程数限制为，所以我使用了线程。我将所有数组的大小设为（=1000）。*`500`**`512``500``Length`***

 *****在职的：**

1.  `i`存储块索引并`j` 存储线程索引。

2.  当 `for`线程数小于数组大小时使用循环。

3.  while 循环用于迭代`Cd[n]`。

4.  我没有使用共享内存，因为我占用了很多块和线程。因此，每个块所需的共享内存量很低。

**PS：**如果您的设备支持更多线程和块，请替换`k<Length/500`为`k<Length/(supported number of threads)`****

# sitecore - Sitecore item will not go into edit mode; any suggestions on how to troubleshoot?

> ID：13160618
> 
> 赞同：0
> 
> 时间：2012-10-31T14:47:52.097
> 
> 标签：sitecore, sitecore6, sitecore-workflow

I have several Sitecore items (whose template is connected to an approval workflow) that will not go into Edit mode when clicking "Edit" from the "Review" tab. The same workflow is used elsewhere on the site successfully (the site is more than 3 years old), but clicking Edit in this case doesn't seem to affect the workflow state.

I've turned on verbose logging, which provides a lot of detail, but nothing to indicate any error conditions. I've been comparing how this template is configured with other "working" templates for a couple of days and everything looks Kosher, but surely I'm missing something obvious.

EDIT: The item(s) in question are imported by a data provider, and I've confirmed that for some reason Sitecore is not setting the "Workflow" and "State" system standard fields with a default value. That appears to be at least part of the issue.

EDIT 2: Followed the steps in this thread [http://sdn.sitecore.net/Forum/ShowPost.aspx?PostID=45991](http://sdn.sitecore.net/Forum/ShowPost.aspx?PostID=45991) to use Sitecore Rocks to update all of the items to the correct Workflow State, but the update did not stick. For some reason workflow changes are not persisted for imported items.

EDIT 3: Clicking the Edit dropdown button under the Home tab displays the message "The item is currently not part of a workflow."

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T20:22:22.997

标准值设置正确吗？此模板只有*一个*标准值项？

一般来说，几乎每次我遇到 X 在某些项目上工作但在其他项目上不工作的情况时......这是一个权限问题。我希望你作为管理员测试过这个？

抱歉，我的建议太模糊了，但在这里很难具体说明。我们需要您提供更多信息... 当您单击“编辑”时，您究竟希望发生什么？我不完全确定您在这里所说的“编辑模式”是什么意思。在内容编辑器中，所有项目基本上一直处于编辑模式......在我的配置中，当我单击编辑时，我只是锁定项目。它不会更改工作流状态或创建新版本。

这些项目来自数据提供者......您的数据提供者是否正确处理锁定/解锁调用？我知道可以在不实现整个 Item API 的情况下使用数据提供者。

# ruby-on-rails-3 - Rails 3 路由重定向到命名 url 而无需点击控制器

> ID：13160619
> 
> 赞同：3
> 
> 时间：2012-10-31T14:47:54.573
> 
> 标签：ruby-on-rails-3, redirect, routes

根据[Rails 路由重定向指南](http://edgeguides.rubyonrails.org/routing.html#redirection)，似乎没有一种简单的方法可以将匹配的 URL 重定向到路由文件中的另一个命名 URL。

我希望我可以在我的 routes.rb 中重定向这样或类似的东西，而无需`"/articles/%{id}"`在重定向函数中指定完整的 url 路径 ()。

```
match "articles/:id" => "articles#show", :as=>'article'
match "articles/view/:id", :to => redirect(article_path) 
```

是否有可能提供此功能的插件或 gem？

* * *

我的最终解决方案包括根据接受的答案添加如下功能。

```
# handles redirecting a matched URL to a named URL
# source_match = string to match against
# dest_name = symbol of the named URL 
def redirect_to_url(source_match,dest_name)
    param_symbols = source_match.scan(/:([a-z\-\_]+)/i).flatten.map{|i| i.to_sym}
    match source_match, :to=>redirect{|params,request| 
        Rails.application.routes.url_helpers.send("#{dest_name}_path", params.slice(*param_symbols))
    }
end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T14:58:37.317

这是可以实现的，您只需通过重定向的 lambda 版本直接引用 Rails URL 帮助模块，因为您需要延迟解决：

```
match "articles/view/:id", redirect {Rails.application.routes.url_helpers.article_path} 
```

请注意，这可能不起作用，因为 article_path 需要传递一个 id 才能进行操作。如果是这种情况，您可以使用传递给重定向指令的 lambda 版本的参数：

```
match "articles/view/:id", redirect {|params, request| Rails.application.routes.url_helpers.article_path(params[:id]) } 
```

# google-apps-script - Apps Script Gadget not working on a custom website

> ID：13160622
> 
> 赞同：0
> 
> 时间：2012-10-31T14:48:02.997
> 
> 标签：google-apps-script

i have this problem, and it seems that i'm not alone.

If i embed a simple apps script form with some textarea,buttons and labels in a custom web url www.mydomain.com/mypage...the page simply don't show nothing and the Chrome console report that error:

Refused to display document because display forbidden by X-Frame-Options.

Instead if i see the page from the original url:

[https://sites.google.com/a/mydomain.com/mysite/mypage](https://sites.google.com/a/mydomain.com/mysite/mypage)

i see the apps script correctly.

Anyone solved that problem or can tell me a workaround?? Thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:09:53.263

这是一个已知问题，关于这个话题有很多讨论。这是问题跟踪器中提交的问题。你可以给它加星。人们也列出了一些解决方法。

[Google Apps 脚本小工具无法使用自定义网址映射](http://code.google.com/p/google-apps-script-issues/issues/detail?id=546)

# android - Touch event pool was exhausted

> ID：13160624
> 
> 赞同：0
> 
> 时间：2012-10-31T14:48:15.383
> 
> 标签：android, andengine, touch-event

I have a touch problem. I have some word sprites, and I bind the touch event (below) to them. After I touch one of them a few times consecutively and them want to drag, firstly the touch event does not respond, but if I wait a second then I can drag. In the [LogCat](https://sites.google.com/site/androidhowto/how-to-1/save-logcat-to-a-text-file) I get this:

> 12-28 17:23:58.979: V/AndEngine(23295): org.andengine.util.adt.pool.PoolUpdateHandler$1 was exhausted, with 1 item not yet recycled. Allocated 1 more.

How do I fix this problem?

Here is the touch event code:

```
public boolean onAreaTouched(TouchEvent pSceneTouchEvent, float pTouchAreaLocalX, float pTouchAreaLocalY)
{
    switch(pSceneTouchEvent.getAction()) {
        case TouchEvent.ACTION_DOWN:
            this.mGrabbed = true;
            break;

        case TouchEvent.ACTION_MOVE:
            if(this.mGrabbed)
                this.setPosition(pSceneTouchEvent.getX() - 18, pSceneTouchEvent.getY() - 15);
            break;

        case TouchEvent.ACTION_UP:
            if(this.mGrabbed)
            {
                this.mGrabbed = false;
                boolean found = false;
                float x1,x2,y1,y2;
                if(this.getY() < 350)
                {
                    for(int i = 0; i < positions_list.size(); i++)
                    {
                        if((word_object_list.get(a).getName().equals(positions_list.get(i).getName())) && positions_list.get(i).isFree())
                        {
                            x1 = word_object_list.get(a).getSprite().getX();
                            y1 = word_object_list.get(a).getSprite().getY();
                            x2 = positions_list.get(i).getxPosition();
                            y2 = positions_list.get(i).getyPosition();
                            x1 = Math.abs(x2-x1);
                            y1 = Math.abs(y2-y1);
                            x1 = (float) Math.pow(x1,2);
                            y1 = (float) Math.pow(y1, 2);
                            x1 = x1+y1;
                            x1 = (float) Math.sqrt(x1);
                            if(x1 < 20)
                            {
                                // Set hint's visibility false
                                if(i == 0 && sprite_word_hint_1 != null)
                                    sprite_word_hint_1.setVisible(false);
                                if(i == random_hint_position && sprite_word_hint_2 != null)
                                    sprite_word_hint_2.setVisible(false);

                                word_object_list.get(a).getSprite().setVisible(false);
                                sprite_word_true_list.get(i).setVisible(true);
                                sprite_candy_list.get(finish_state).setVisible(true);
                                finish_state ++;

                                if(finish_state == question.getWord().length())
                                {
                                    // Create new scene
                                    Game_Screen.this.getEngine().registerUpdateHandler(new TimerHandler(6.5f, new ITimerCallback() {
                                        public void onTimePassed(TimerHandler pTimerHandler) {
                                            // TODO Auto-generated method stub

                                            Game_Screen.this.getEngine().setScene(load_new_scene());
                                            remove_textures();
                                        }
                                    }));

                                    // Increase point
                                    Game_Screen.this.getEngine().registerUpdateHandler(new TimerHandler(4.3f, new ITimerCallback() {
                                        public void onTimePassed(TimerHandler pTimerHandler) {
                                            // TODO Auto-generated method stub
                                            int point = variables.getDatabase().get_point(variables.getCategory_level())+question.getWord().length();
                                            elapsedText.setText(""+point);
                                            variables.getDatabase().set_answered(question);
                                            variables.getDatabase().update_user(question, question.getWord().length(), hint_used);
                                        }
                                    }));

                                    // Cover animation
                                    sprite_cover.setRotationCenter(sprite_cover.getRotationCenterX()+20, sprite_cover.getRotationCenterY());
                                    sprite_cover.registerEntityModifier(new SequenceEntityModifier(
                                            new DelayModifier(1),
                                            new RotationModifier(1.5f, 0, 90),
                                            new DelayModifier(1.7f),
                                            new RotationModifier(1, 90, -0)
                                        )
                                    );
                                    // Candy animation
                                    for(int j = 0; j < sprite_candy_list.size(); j++)
                                    {
                                        sprite_candy_list.get(j).registerEntityModifier(new SequenceEntityModifier(
                                                new DelayModifier(2.7f),
                                                new CubicBezierCurveMoveModifier( 1.5f,  sprite_candy_list.get(j).getX(), sprite_candy_list.get(j).getY(),  165, 240, 166, 241, 275, 400, EaseQuadIn.getInstance()),
                                                new DelayModifier(0.2f),
                                                new AlphaModifier(1, 1, 0)
                                                )
                                        );
                                    }
                                }
                                positions_list.get(i).setFree(false);
                                found = true;
                                break;
                            }
                        }
                    }
                }
                if(!found)
                {
                    word_object_list.get(a).getSprite().registerEntityModifier(new MoveModifier(1, word_object_list.get(a).getSprite().getX(), word_object_list.get(a).getPositionX(), word_object_list.get(a).getSprite().getY(), word_object_list.get(a).getPositionY(),EaseQuadIn.getInstance()));
                }
            }
            break;

    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:41:39.030

我找到了答案。当我多次触摸精灵时，每次它注册一个实体修饰符并且堆栈正在增长时，我应该等到它为空。然后我添加了

```
this.clearEntityModifiers(); 
```

函数调用触摸事件的开头，它工作正常。

# sql-server - 使用动态端口连接到 SQL Server 2008/2012

> ID：13160625
> 
> 赞同：0
> 
> 时间：2012-10-31T14:48:22.230
> 
> 标签：sql-server, networking, connection

我的问题是我无法使用动态端口连接到我们服务器上安装的任何 SQL Server 实例（它同时具有 2008 和 2012）。静态端口运行良好。此外，如果您在连接字符串中提及动态端口号，则可以连接。但是使用没有端口号的命名实例连接失败（常规错误“网络或实例特定...”）。

我找到了解决方案 -`sqlbrowser.exe -c`在服务器上运行。之后一切正常，直到服务器重新启动。如何解决或诊断？

PS 防​​火墙已关闭。

**编辑：** 另外，当我关闭这个工具时，它再次变得不可用。我并不总是使用远程桌面连接到服务器。现在它仅在我连接并启动此工具时才有效。对我来说看起来不太好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:48:05.613

如果要连接到没有端口号的实例，则必须运行浏览器服务。修复很简单。将浏览器服务设置为在服务控制台或 SQL Server 配置管理器中自动启动。

使用动态端口，每次重新启动服务器时端口号都会更改。

# python - 使用 python + boto 解析 Amazon SQS 消息

> ID：13160627
> 
> 赞同：0
> 
> 时间：2012-10-31T14:48:30.817
> 
> 标签：python, amazon-sqs

我正在使用 boto 库从 SQS 队列中读取消息。我的消息有这样的文字： `{ Command:XXXXXXXXXXX Key:XXXXXXX Input:XXXXXX}`。Boto 使用 base64 编码发送并读取它，因此如果我读取消息正文，那么文本就在那里。但是我怎么能读到像这样的消息

```
Command = input['Command'] 
Key = input_message['Key'].split(',') 
```

这样我就可以使用这些值进行进一步处理...

我对 Python 也很陌生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:34:42.013

Ok, you seem to have the input in some kind of a format - is it anything standardised? If not, you would need to parse the contents of your message and get the individual keys.

What I have been doing before in my projects was using [JSON](http://docs.python.org/2/library/json.html) to facilitate data exchange between platforms.

If you do not have a luxury to edit your incoming data, you would need to do something like this (very naiive example):

```
input = "{ Command:XXXXXXXXXXX Key:XXXXXXX Input:XXXXXX }"
data = filter(lambda x: ":" in x, input.split())
message_dict = dict()
for item in data:
    key, val = item.split(":")
    message_dict[key] = val 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-13T20:26:24.193

考虑使用老式的 JSON 轻松地通过网络轻松发送和接收字典。

这个测试函数用 JSON 验证数据格式非常清晰：

# test_sqs.py

```
import json

import boto3
from moto import mock_sqs

@mock_sqs
def test_sqs():
    sqs = boto3.resource('sqs', 'us-east-1')
    queue = sqs.create_queue(QueueName='votes')

    queue.send_message(MessageBody=json.dumps(
        {'Command': 'drink', 'Key': 'beer', 'Input': 'tasty'}))

    messages = queue.receive_messages()
    assert len(messages) == 1
    assert messages[0].body == (
        '{"Input": "tasty", "Command": "drink", "Key": "beer"}') 
```

# symfony - 树枝自动将字符串转换为日期

> ID：13160638
> 
> 赞同：0
> 
> 时间：2012-10-31T14:48:50.530
> 
> 标签：symfony, twig

我想通过点击小部件将字符串值转换为日期，例如 `24`→`1`

```
{% block convert_day %}
    <td>{{ form_widget(form['crush']) }}</td>
    <td><!-- displaying my value in day --></td>
{% endblock %} 
```

* * *

不，它不起作用！

更清楚地说，我想做类似的事情，但只显示天数：http: [//www.convertworld.com/en/time/Days.html](http://www.convertworld.com/en/time/Days.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:08:14.267

```
{{ hourValue / 24 }} 
```

或者，如果要将值四舍五入到小数点后两位：

```
{{ hourValue / 24 | number_format(2, ".", ",") }} 
```

文档：

[http://twig.sensiolabs.org/doc/templates.html#math](http://twig.sensiolabs.org/doc/templates.html#math) [http://twig.sensiolabs.org/doc/filters/number_format.html](http://twig.sensiolabs.org/doc/filters/number_format.html)

*编辑*

或者，您可以将精度放入表单实例本身。当您创建表单时，您可能会在控制器中执行类似的操作（或者如果表单有自己的类，则您在`buildForm()`该类的方法中执行类似的操作）：

```
$form = $this->createFormBuilder($entity)
    ->add('name', 'text')
    ->getForm(); 
```

添加字段时，您可以通过包含以下选项`crush`来指定应在表单上表示的小数位数：`precision`

```
$form = $this->createFormBuilder($entity)
    ->add('name', 'text')
    ->add('crush', 'number', array('precision' => 3) )
    ->getForm(); 
```

然后，表单将在将该值插入数据库之前对其进行舍入。

文档：

[http://symfony.com/doc/current/reference/forms/types/number.html#precision](http://symfony.com/doc/current/reference/forms/types/number.html#precision)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T09:47:56.673

这就是我所做的；

```
<script type="text/javascript">

function execute_time_ext(clicked) {
if (document.forms && document.forms['show_convert']) {
var from = document.forms['show_convert'].unit_from.value;
var elms = document.getElementsByName('unit');
var amount = document.forms['show_convert']['value'].value;
var to;
var amount_int = ['show_convert']['value'] - 0;
for (var i=0; i<elms.length; i++) {
to = elms[i].value;
convert(show_convert['value'], from, to, false, false);
}
var cookie = 'default_decimals';
if (getCookie(cookie) != decimals) {
setCookie(cookie, decimals, null, '/');
}
} else {
if (clicked) {
alert('Converter error. Conversion not supported by browser.');
}
}
}
execute_time_ext(false);

</script> 
```

小部件：

```
<div onkeyup="execute_time_ext(true)" onchange="execute_time_ext(true)"> {{ form_widget(form['value']) }} {% endblock %}

                                <div> <input id="value_4" type="hidden" value="365.25|0|4" name="unit"></div>
                        </div> 
```

# php - Doctrine ODM Discriminator - 按特征而非类型进行区分

> ID：13160644
> 
> 赞同：1
> 
> 时间：2012-10-31T14:49:09.360
> 
> 标签：php, mongodb, doctrine, doctrine-orm, traits

我正在使用 Doctrine\ODM\MongoDB 并将**三种不同类型**的文档存储**在一个集合**中。其中一些是mixin。

我的问题是，“我可以**通过特征而不是类型来****区分**这些文档吗？”，这意味着不是

 **```
 /** @ODM\DiscriminatorField(fieldName="type") */
    ...
    ActorType1.type: singer
    ActorType2.type: musician
    ActorType3.type: singerMusician 
```

我想做类似的事情

```
 ActorType1.canDo: sing
    ActorType2.canDo: playMusic
    ActorType3.canDo: [sing, playMusic] 
```

伪代码：

find(< **all** those who can **sing >) 返回****类型为 1**和**类型为 3**的所有 Actor 。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:51:49.743

似乎 Doctrine 并不喜欢继承。

在我的情况下，即使使用基本的鉴别器也是不可能的。

基本上，如果我要将多个文档存储在同一个集合中，它们不能有任何共同的特征，包括从父类继承的属性或通过 PHP 特征导入的属性。

我真的希望他们将来能做到这一点。**

# java - Java 虚拟文件系统应用程序

> ID：13160645
> 
> 赞同：3
> 
> 时间：2012-10-31T14:49:10.217
> 
> 标签：java, filesystems, directory, virtual

今天是个好日子，

我需要制作一个*虚拟 Java 文件系统*。这意味着对这个系统的所有修改都不会反映在真实的操作系统上——所以如果用户在程序中创建、移动、删除、复制文件和目录，它只是模仿文件系统及其结构而已。作为初始点，我们有文件系统的根，保存在程序内存中 - 虚拟“C:”。用户可以编写命令“**创建目录C:\text** ”或“**删除文件C:\test2\myfile.txt** ”。您可以随时打印创建的虚拟目录和文件的树。

最好的方法是什么？或者我在哪里可以找到真正的文件系统是如何工作的？

PS 我想将目录组织为列表，将文件组织为简单的字符串。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T15:00:38.800

我会使用[Commons Virtual File System](http://commons.apache.org/vfs/ "Commons 虚拟文件系统")库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:57:13.443

你可以有这种格式

```
public class Directory{

private List<File> files;

// geters and setters
// add more propertied to directory if required 
```

}

```
 public class File{

private String name;
private int size;
private Date cretedDate;

// add more properties
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-03T11:28:36.880

您可以使用的另一个选项是[Google 的 Java 内存文件系统实现，](https://github.com/google/jimfs)它实现了 Java 的[FileSystem](https://docs.oracle.com/javase/7/docs/api/java/nio/file/FileSystem.html)抽象。

# html - 以页边距居中内容

> ID：13160650
> 
> 赞同：0
> 
> 时间：2012-10-31T14:49:48.373
> 
> 标签：html, css

如果我想以`content`我的页面为中心，我可以简单地申请`margin: 0 auto`它。

但这使得利润为零。如果我想要最少的，比如说，左右两个 em 的边距，我该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:50:42.343

将内容包装在带有边距的 div 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:51:38.337

您可以为要包装内容的 div 设置宽度，并应用边距

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T14:51:53.200

您需要对父元素应用填充或边距。

# iphone - 分析：什么是 p502i 和无线转码器设备？

> ID：13160655
> 
> 赞同：2
> 
> 时间：2012-10-31T14:49:57.593
> 
> 标签：iphone, mobile, google-analytics

我们目前在 iPhone 应用程序上运行 Google Analytics，我们有两个奇怪的设备出现在几个百分比：“DoCoMo P502i”和“Google Wireless Transcoder”。

这些奇怪的装置是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T19:43:46.833

在 iPhone 上实现 v2 SDK 后，我看到了同样的情况。参观的次数不多，但足以做一些研究。

谷歌无线转码器是一个项目，它将从页面从脚本到样式的所有内容都剥离到它的基本框架。某些移动浏览器可能会使用该服务来减小页面大小，然后再将其下载并显示在移动设备上。

[http://www.google.com/gwt/n](http://www.google.com/gwt/n)

您似乎可以指示 Google Wireless Transcoder 不处理您的页面，而是使用以下命令将用户重定向到另一个网页：

```
<link rel="alternate" media="handheld" href=”mobile_page.htm” /> 
```

*来源：* [http ://www.elc-seo.com/search-engines/google/mobile-search-the-google-wireless-transcoder/](http://www.elc-seo.com/search-engines/google/mobile-search-the-google-wireless-transcoder/)

恐怕我还没有找到太多关于“DoCoMo P502i”的信息。它似乎也与某种 Google 代理有关。看看它使用的完整 UserAgent：

*   DoCoMo/1.0/P502i/c10（**谷歌 CHTML 代理**/1.0）

*来源：* [http ://user-agents.my-addr.com/custom_user_agent_lookup-ua_string_analysis_checker_tool.php?i=395&u=DoCoMo_1_0_P502i_c10_Google_CHTML_Proxy_1_0](http://user-agents.my-addr.com/custom_user_agent_lookup-ua_string_analysis_checker_tool.php?i=395&u=DoCoMo_1_0_P502i_c10_Google_CHTML_Proxy_1_0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T06:14:34.763

我很确定适用于 iOS 的 Google Analytics SDK 的 2.0 beta 版本将 iPod touch 报告为 DoCoMo P502i。

我刚刚设置了一个新的分析配置文件并在两台设备上进行了测试，这就是我所看到的。

是的。一款可爱的手机，DoCoMo P502i。

# php - 对 PHP 类使用“.class.php”扩展名？

> ID：13160656
> 
> 赞同：3
> 
> 时间：2012-10-31T14:49:58.723
> 
> 标签：php, coding-style, php-5.3

为 PHP 类附加使用“.class.php”扩展名是常见的做法吗？

在 PHP.net 上：http: [//php.net/manual/en/function.spl-autoload-register.php](http://php.net/manual/en/function.spl-autoload-register.php)有一些这样的例子：

```
// Or, using an anonymous function as of PHP 5.3.0
spl_autoload_register(function ($class) {
    include 'classes/' . $class . '.class.php';
}); 
```

使用`.class.php`扩展名。

PHP代码应该这样写吗？以前没见过，是新的吗？这是 PHP 中的一种新功能，也许是这样？

**编辑**：“功能”不是一个好词！也许我应该问一下这是标准还是惯例。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T14:53:25.557

这不是一个功能，它只是一个你不时看到的约定。是否遵循它是您和您的团队的选择。

我个人的观点是，由于选择是任意的，而且这种特殊的风格与[PSR-0 自动加载器规范](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)相矛盾，你应该通过，因为：

*   PSR-0 使用更广泛，因此在所有其他条件相同的情况下，遵循更好的约定
*   遵循“.class.php”样式意味着不能采用符合 PSR-0 的自动加载器（网上有很多）并且无需修改即可使用它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:52:20.597

这主要用于确保其为自动加载器目标的类文件，您通常有其他 .php 文件，如模板、脚本（如引导程序或配置文件）是 .php 文件，但绝不应被解释为类

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T14:57:33.217

它本身不是一个功能，它只是一种非常简单实用的方法，可以让您的代码保持井井有条，更重要的是，它可以避免自动加载问题。

假设您有一个名为 的类`User`，并且您的站点有一个页面，该页面由脚本生成：`User.php`。如果您需要`User`该类的实例，将调用自动加载器函数，并将其`User`作为参数获取。在查找简单称为 的文件时`User.php`，您可能会包含一个文件，而不是类定义。这就是为什么你可以（并且应该）在类名中多加一点类定义的原因。然后你可以写你的自动加载器来寻找`[[class name]].class.php`，巧妙地避开`User.php`文件。

这就是它的底线。当然，还需要考虑命名空间，这是保持代码井井有条的最现代方式：目录 ( `set_include_path`)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T14:53:34.247

这一切都是为了更好地理解这些文件的全部内容。所以，当你看到 filename.class.php 时，你就知道，这个文件包含 Class 文件名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T14:53:46.667

如果您将类命名为“class.php”，则不会触发任何类型的特殊语言支持；这只是一个约定，就像您是否使用空格或制表符进行缩进一样。

在我参与的其中一个项目中，名为 *.inc.php 的类和模板为 *.tpl.php。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T14:56:16.533

如果我在 1999 年左右编写 php，这将是一个很好的惯例。您可以随意命名文件，但我建议仅在文件内的类名之后命名它们，并附加“.php”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-31T14:56:16.807

这更多是个人喜好，但我实际上可能会研究[PSR-0](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)标准，它为您提供一种标准方式来命名和命名您的类，以提供与相同格式的其他人代码的更好兼容性。

在 PSR-0 标准中，PHP 文件以类命名并放入与命名空间相关的文件夹中。

我建议采用这种方法，而`.class.php`不是 PHP.net 手册中提到的方法。

# java - 更新 logback 配置而不重新部署

> ID：13160659
> 
> 赞同：9
> 
> 时间：2012-10-31T14:50:08.740
> 
> 标签：java, properties, logback, redeploy

想法是能够在不重新部署的情况下更改 logback 配置。项目中使用了 Slf4j 和 logback。logback.xml 文件在耳中，但它从属性文件中读取一些属性，这些属性文件放在耳外。像这样的东西：

```
<configuration scan="true" scanPeriod="5 seconds">
<property file="${logconfig}"/>

<appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender"> 
    <encoder>
        <pattern>${logback.consolePattern}</pattern>
    </encoder>
</appender>
<root level="DEBUG">
    <appender-ref ref="STDOUT" />
</root>

</configuration> 
```

问题是扫描检查 logback.xml 是否已更改（并且文件始终相同）。这就是为什么更改属性文件中的值不会更改 logback 的配置。更改仅在重新部署后应用。

那么在不重新部署的情况下修改 logback 配置的最佳方法是什么？是否有一些机制可以实现它？

upd：很少会进行更改。但应尽快应用它们。性能也很重要。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T14:58:43.933

我设法通过这样做重新加载它：

```
LoggerContext loggerContext = (LoggerContext) LoggerFactory.getILoggerFactory();
loggerContext.reset();
ContextInitializer ci = new ContextInitializer(loggerContext);
ci.autoConfig(); 
```

在我的用例中，我这样做是为了向上下文添加一些属性：

```
loggerContext.putProperty("logDirectory", getLogDirectory().getAbsolutePath()); 
```

在自动配置之前。

从属性文件中读取属性也应该可以。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T15:00:17.427

在设置属性后，命令“touch”可能对虚构的文件修改有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:52:22.583

经过一些比较，我认为将 logback.xml 放在耳边会更容易、更舒服。可以通过在服务器配置中指定系统属性 logback.configurationFile 来实现。为了方便人们进行编辑，我计划在文件开头定义一些属性。像那样

```
<property name="consolePattern" value="%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"/> 
```

然后在配置中使用它们

```
<pattern>${consolePattern}</pattern> 
```

它将处理动态变化的问题，并且几乎是用户友好的））

# ruby - 直接从 ruby 使用时找不到 Compass mixins

> ID：13160660
> 
> 赞同：0
> 
> 时间：2012-10-31T14:50:09.903
> 
> 标签：ruby, sass, compass-sass

我正在使用 GLI gem 构建一个新的 ruby​​ 脚本，其中使用了 Compass。但是，每当我使用`bundle exec`SASS/Compass 运行应用程序时，似乎永远找不到我包含在我的 .scss 文件中的 mixin。我收到以下错误...

`error: File to import not found or unreadable: compass/css3.`

我知道解决方案是设置一个环境变量。但是，我不知道需要设置哪个变量。

**更新**：

我应该补充一点，这是我之前的另一篇文章的后续 - [Using Compass from Ruby (not shell)](https://stackoverflow.com/questions/13129789/using-compass-from-ruby-not-shell)

这是我用来从我的应用程序调用指南针的代码。

```
require 'compass'
require 'sass/plugin'

compiler = Compass::Compiler.new('.','.','.',{:style => :compact})
compiler.compile(sass_file,css_file) 
```

这是抛出的错误

> 错误：找不到或无法读取要导入的文件：compass/css3。
> 
> 加载路径：/Volumes/MacRAID/joeworkman/Desktop/stake-test/Badges/Badges.source/Contents

我原本以为这只发生在我跑步时`bundle exec`。但是，即使我正常运行，它每次都会发生。

**更新#2**：

我很确定这是一个 SASS`:load_paths`问题。如果我将`SASS_PATH`环境变量设置为以下值，一切正常。我不想依赖环境变量。

`~/.rvm/gems/ruby-1.9.3-p194/gems/compass-0.12.2/frameworks/compass/stylesheets`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:06:04.483

请务必查看以下帖子中的答案。在我在这里发布的发现和在另一篇文章中提出的建议之间，这个问题得到了回答。

[在 Ruby 中使用 Compass（不是 shell）](https://stackoverflow.com/questions/13129789/using-compass-from-ruby-not-shell)

# ruby-on-rails - 修补 ActiveRecord/postgres_ext 以返回大写 UUID

> ID：13160664
> 
> 赞同：0
> 
> 时间：2012-10-31T14:50:28.180
> 
> 标签：ruby-on-rails, ruby, postgresql, activerecord, postgres-ext

我将 postgres_ext 与 Rails/ActiveRecord 一起使用，以便能够将 UUID 存储为 PostreSQL UUID 数据类型。但在我的应用程序中，我正在比较 uuid，并希望从模型返回的 UUID 为大写而不是小写。

**如何修补 ActiveRecord/postgres_ext 以始终​​返回 UUID 的大写字符串表示形式？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:15:57.417

我有一个关于你为什么要这样做的问题，但是......

修补 ActiveRecord 可能不是最好的方法。如果您希望模型将 UUID 的大写版本返回给应用程序的其余部分，您可以在模型代码本身中执行此操作。这样，您就可以将数据库层的细节从应用程序的其余部分中抽象出来。

您可以通过覆盖访问器代码来做到这一点。可能看起来像：

```
def uuid
  read_attribute(:uuid).upcase
end 
```

# c - 带有 ioctl 的 48 位和 28 位 ATA 命令

> ID：13160665
> 
> 赞同：0
> 
> 时间：2012-10-31T14:50:29.180
> 
> 标签：c, ioctl

在发送 ATA 命令期间，我发现了几个分类。例如，第一个 - 我们可以将命令分为数据输入、数据输出和非数据命令。另一种分类可以是有 48 位命令和 28 位命令。第一个用于磁盘，大于 120Gb。

问题是：我是否需要设置一些值让磁盘知道它是否获得了 48 位命令？例如，如果我通过 SATL 发送带有 ATA 的 SCSI 命令或通过控制器发送 ATA PASS THROUGH 命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T08:35:08.727

在研究过程中发现，每个控制器都有自己的特殊性，具体取决于驱动程序。这就是为什么 ATA PASS THROUGH 命令的实现如此困难的原因。

通过读取 Linux 驱动程序并检查使用 ioctl 发送的结构，可以确定它是 28 位还是 48 位命令。

此外，检查软件的新程度也很重要，因为 48 位逻辑块寻址 (LBA) 是 2006 年在 ATA-6 标准中引入的。现在很可能所有控制器都支持 48 位命令集，但您仍然应该检查控制器是否支持它。

所以，这个问题的答案很大程度上取决于使用控制器。

# linux - 为 ARM 架构构建 libsndfile 库

> ID：13160668
> 
> 赞同：1
> 
> 时间：2012-10-31T14:50:38.977
> 
> 标签：linux, build, makefile, terminal, libsndfile

我需要构建 libsndfile 以在 Iphone/Ipad 上的音频引擎中使用它。我没有错误地构建它，但是对于 i386 架构，所以当我构建我的项目时遇到了一些错误：

```
Undefined symbols for architecture i386:
  "_FLAC__StreamDecoderErrorStatusString", referenced from:
      _sf_flac_error_callback in libsndfile.a(flac.o)
  "_FLAC__StreamEncoderInitStatusString", referenced from:
      _flac_write_header in libsndfile.a(flac.o)
  "_FLAC__metadata_object_delete", referenced from:
      _flac_close in libsndfile.a(flac.o)
  "_FLAC__metadata_object_new", referenced from:
      _flac_write_header in libsndfile.a(flac.o)
  "_FLAC__metadata_object_vorbiscomment_append_comment", referenced from:
      _flac_write_header in libsndfile.a(flac.o) 
```

如何为 arm 架构构建它？

我发现了 Erik de Castro Lopo 说要这样做的[主题：](https://stackoverflow.com/questions/11576168/how-do-i-cross-compile-libsndfile-for-arm-raspberry-pi)

```
./configure --prefix=$HOME/Arm --build=i386-linux --host=arm-unknown-linux-gnueabi 
```

但是当我构建时，我得到了这个：

```
undefined symbols for architecture x86_64:
  "_AudioQueueAddPropertyListener", referenced from:
      _main in sndfile-play.o
  "_AudioQueueAllocateBuffer", referenced from:
      _main in sndfile-play.o
  "_AudioQueueDispose", referenced from:
      _main in sndfile-play.o
  "_AudioQueueEnqueueBuffer", referenced from:
      _main in sndfile-play.o
      _macosx_audio_out_callback in sndfile-play.o
  "_AudioQueueFreeBuffer", referenced from:
      _main in sndfile-play.o 
```

我能怎么做 ？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:12:35.027

您看到的第一块错误（i386/FLAC）似乎是因为配置过程检测到 FLAC 头文件，但找不到 FLAC 库。

您说的第二个错误块来自交叉编译，其中包含与 x86_64 相关的错误。你真的安装了arm交叉编译器吗？

以下命令的输出是什么（运行 ./configure 后在 libsndfile 源目录中运行）：

```
$ grep _os config.log
$ grep _CC config.log 
```

# java - IE 10 中的 JApplet 问题

> ID：13160671
> 
> 赞同：2
> 
> 时间：2012-10-31T14:50:43.267
> 
> 标签：java, internet-explorer, applet, japplet

我在框架中有一个 JApplet。当我在 IE 10 中启动弹出窗口时，小程序变成了白屏。如果我在框架上单击 2 到 3 次，它会再次正常运行。

为什么小程序在启动弹出窗口时显示为白屏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T13:45:48.870

作为我使用的解决方法

> 设置超时（）

在 javascript 中检查是否安装了 Java 插件。而且真的经常从第二次开始。

# java - Java在实现访问较弱的接口方法时出错

> ID：13160672
> 
> 赞同：18
> 
> 时间：2012-10-31T14:50:44.090
> 
> 标签：java, interface

当我编译这段代码时：

```
interface Rideable {
    String getGait();
}

public class Camel implements Rideable {
    int x = 2;

    public static void main(String[] args) {
        new Camel().go(8);
    }

    void go(int speed) {
        System.out.println((++speed * x++) 
        + this.getGait());
    }

    String getGait() {
        return " mph, lope";
    }
} 
```

我收到以下错误：

```
Camel.java:13: error: getGait() in Camel cannot implement getGait() in Rideable
String getGait() {
       ^
  attempting to assign weaker access privileges; was public
1 error 
```

接口中声明的 getGait 方法如何被认为是公共的？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-31T14:51:58.697

在接口内声明的方法是隐式的`public`。并且接口中声明的所有变量都是隐式的`public static final`（常量）。

```
public String getGait() {
  return " mph, lope";
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-31T14:51:52.940

an 中的所有方法`interface`都是隐式的`public`，无论您是否显式声明它。[请参阅Java 教程接口部分](http://docs.oracle.com/javase/tutorial/java/IandI/interfaceDef.html)中的更多信息。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-07-15T09:44:40.290

中的所有方法`interface`都是隐式的`public`。但是在一个类中，如果没有明确提到 public，它只有包可见性。通过覆盖，您只能增加可见性。你不能降低能见度。所以修改`getGait()`骆驼类中的实现为

```
public String getGait() {
    return " mph, lope";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-01T08:34:54.430

接口字段默认是public、static和final，方法是public和abstract

因此，当您实现接口时，函数调用应该是**public** Function 应该是

```
public String getGait() {
  return " mph, lope";
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-11-16T19:10:08.240

将 Camel 类（Rideable 的实现类）中的 getGait() 设为公开。

```
public String getGait() {
        return " mph, lope";
    } 
```

# wcf - .NET 服务的 gSOAP 实例

> ID：13160675
> 
> 赞同：1
> 
> 时间：2012-10-31T14:50:53.160
> 
> 标签：wcf, gsoap

我有一个到 WCF c# 服务器的 linux c++ 客户端（通过 gSOAP）。WCF c# 服务包含执行某些操作的对象列表。每次我在服务上调用某个函数时，都会创建新对象，对该对象执行操作，并且该对象会进入服务列表。最后，我在服务上调用另一个函数，该函数循环遍历列表中的所有对象并对它们执行另一个调用。这在 c# 上按预期工作，具有客户端和服务纯 WCF。

它通过 gSOAP 工作不同。每次我通过 gSOAP 调用服务上的第一个函数时，都会执行该操作并更新列表。但每次都是新服务。所以基本上我每次都在处理新服务。我不会序列化/反序列化对象本身，将它放在 inux 端。

任何想法如何解决这个问题？

在 c# 方面，我有类似的东西（跳过了不必要的细节）

```
    类服务：IService
    {
        列表列表 = 新列表（）；
        无效 func1(int i)
        {
           Class1 c = 新 Class1(i);
           c.create();
           列表。添加（c）；
        }
        无效函数2（）
        {
           foreach（列表中的 Class1 c）
           {
               c.close();
           }
        }
    }

```

在 gSOAP 方面，我有类似的东西

```
    代理服务（端点）；
    service.func1(1);
    service.func1(2);
    //...
    服务.func2();

```

正如我所说的问题是：执行 func2() 时，它在空列表上运行，这意味着代理服务的 gSOAP 对象不包含 c# 服务对象。

救命，救命！

附言。找到了解决方案：容器制作“静态”就可以了。

# silverlight - 从页面显示隐藏 Silverlight 控件

> ID：13160678
> 
> 赞同：0
> 
> 时间：2012-10-31T14:50:55.977
> 
> 标签：silverlight

我在页面上有一个 dataGrid 控件，在这个网格下方有一些文本框。在某些情况下，我不想在页面上显示网格。为此，我使用了

dg.Visibilty = Visibilty.折叠；

它会成功隐藏数据网格，这很好，但是网格消耗的空间仍然显示在页面上，我想要的是当我的网格被隐藏时，控件会像 style=display:none 一样自动向上移动；

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:44:23.683

您正在做的事情应该可以正常工作。

可能是包含您的数据网格的容器可能分配了一些高度宽度。

# jquery - 使用 jQuery 隐藏和显示 DIV 而不使用 display:none

> ID：13160680
> 
> 赞同：2
> 
> 时间：2012-10-31T14:51:02.217
> 
> 标签：jquery, html, css

我正在使用标准：

```
$(document).ready(function() {
   $('#toggleme').click(function(){
     $('div.#showhide').toggle();
   });
 $('#closer').click(function(){
     $('div.#showhide').toggle();
   });
 }); 
```

显示和隐藏一个 div，但是当网站设置为`display:none;`div 时，我的所有内容都会在页面上移动。

是否有显示/隐藏 div 的不同方式，或者我应该将每个 div 包装在具有固定宽度/高度的父 div 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:52:48.410

CSS属性`visibility: hidden;`是你想要的，它会像显示块一样隐藏它，但空间仍然存在，所以没有内容移动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:52:01.503

使用`.show()`和`hide()`方法

[.show()](http://api.jquery.com/show/) - 显示匹配的元素。

[.hide()](http://api.jquery.com/hide/) - 隐藏匹配的元素。

**或者也试试**

[.toggle()](http://api.jquery.com/toggle/) - 显示或隐藏匹配的元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T14:55:08.210

将可见性设置为隐藏，如下所示：

```
$('div.#showhide').css('visibility', 'hidden'); 
```

像这样再次显示它：

```
$('div.#showhide').css('visibility', 'visible'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T14:57:23.583

您可以使用`jQuery.show()`和`jQuery.hide()`方法分别显示和隐藏元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T14:57:56.117

也许试试这个：

```
$(document).ready(function() {

    $('#toggleme').toggle(function(){
        $('.showhide').animate({ "height", "0px" });
    },
    function(){
        $('.showhide').animate({ "height", "SomeBaseHeightpx" });
    });

    $('#closer').toggle(function(){
        $('.showhide').animate({ "height", "0px" });
    },
    function(){
        $('.showhide').animate({ "height", "SomeBaseHeightpx" });
    });

}); 
```

玩一些并将其调整为您的 HTML，但这应该完全符合您的要求。

[**在jQuery .animate()**](http://api.jquery.com/animate/) && [**jQuery .toggle() [事件]**](http://api.jquery.com/toggle-event/)中查看更多信息[](http://api.jquery.com/toggle-event/)

# javascript - 我怎样才能让这些元素相互融合

> ID：13160682
> 
> 赞同：0
> 
> 时间：2012-10-31T14:51:04.107
> 
> 标签：javascript, jquery, wordpress

我试图看起来像 pinterest，其中元素（带标题的图片）相互滑动。这里有两个不同的行，但是，我需要带标题的图片相互滑动。

[http://pureformenyc.com/inspiration/](http://pureformenyc.com/inspiration/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:04:26.437

试试[jQuery Masonry](http://masonry.desandro.com/)布局插件。

# javascript - 动态 ajax 填充表在 IE 8 中不起作用

> ID：13160684
> 
> 赞同：0
> 
> 时间：2012-10-31T14:51:09.517
> 
> 标签：javascript, jquery, ajax, internet-explorer-8

大家好，我有一个 IE8 问题，这是代码：

html代码：

```
 <table id=\"myTable\" border="1"> 
```

javascript函数：

```
function loadTableContent() {

$.ajax({
    type : 'GET',
    url : '/sohara/viewResults.do',
    contentType : 'application/json; charset=utf-8',
    success : function(response) {
        result = response;

        var html_Table = '';
        html_Table += '<tr><th bgcolor="silver">Type</th>
                    <th bgcolor="silver">Quantity A</th>
                    <th bgcolor="silver">Quantity B</th></tr>';
        for ( var i = 0; i < result.length; i++) {
            html_Table += '<tr>';
            html_Table += '<td>'+result[i].description+'</td>';
            html_Table += '<td>'+result[i].quantityA+'</td>';
            html_Table += '<td>'+result[i].quantityB+'</td>';
            html_Table += '</tr>';          
        }   
        html_Table += '</table>';
        $("#myTable").append(html_Table);
    },
    error : function(response) {
        alert("Error");
    }
});
} 
```

Always 在 Firefox、Chrome 和 Opera 中是完美的，但在 IE8 中，表格中没有显示任何内容。我该如何管理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:11:05.567

我不是 100% 发生了什么，但有一些可能性：

*   您的`<table>`元素不完整，因为它没有结束标签。我最初认为这只是因为您简洁并且没有将其包含在您的示例中，但后来我注意到您包含`</table>`在您的 JavaScript 中。您需要在 HTML 中正常终止标记，如下所示：

    `<table id=\"myTable\" border="1"></table>`

然后在 JavaScript 中使用它（并从 JS 中删除结束标记）

*   此外，我认为 HTML 规范说表头行（例如带有 TH 标记的表头行）应该被包装在一个`<thead>`元素中（例如`<table><thead><tr><th>Header</th></tr></thead></table>`，而 body 元素然后被包装在一个`<tbody>`元素中。大多数浏览器似乎都很好地解析表格甚至没有这些，但我指出它可能是您问题的根源。

*   最后一个潜在问题是 IE 一直到 IE9 都无法在表格上设置 innerHTML。看到[IE9 createElement 和在 set 操作上设置 innerHTML 放置标签？](https://stackoverflow.com/questions/8097139/ie9-createelement-and-setting-innerhtml-dropping-tags-on-a-set-operation)并且[无法在 IE 中的 tbody 上使用 innerHTML 以](https://stackoverflow.com/questions/4729644/cant-innerhtml-on-tbody-in-ie)获取更多信息。我不知道 JQuery 如何更新表数据。我认为如果他们依赖这种方法，我们会在这里看到更多关于它的问题，但谁知道呢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:26:52.443

工作解决方案：

根据[马特](https://stackoverflow.com/users/17803/matt)首先我以这种方式声明表格：

```
<table id=\"myTable\" border="1"></table> // FULL working method 
```

事实上，如果我不关闭它，IE8 会自动以这种方式关闭 html 标记，从而导致在附加新的 html 代码时出现几个问题：

```
<table id=\"myTable\" border="1"></> // NOT working method 
```

然后代替使用：

```
$("#myTable).append(html_Table); 
```

我用：

```
$("#myTable).html(html_Table); 
```

显然我必须从 ajax 中删除：

```
html_Table += '</table>'; 
```

全面工作:)

# c# - 分步调试并行

> ID：13160686
> 
> 赞同：2
> 
> 时间：2012-10-31T14:51:15.803
> 
> 标签：c#, .net, parallel-processing

使用并行处理，无论是后台还是调试中的任务都会跳来跳去。我最终在每一行添加了一个断点。有没有办法只介入任务并在开始处放置一个断点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T14:56:29.877

在调试器中暂停时，您可以使用“线程”窗口对上下文切换进行更多控制。您可以右键单击线程并选择冻结。这将防止调试器在您单步执行代码时切换到该线程。您还可以 Shift-选择多个线程并将它们全部冻结。如果您冻结除您正在单步执行的线程之外的所有线程，您可以不受其他处理阻碍地单步执行。

这有点尴尬，但您也可以使用它来调查某些类型的竞争条件，方法是明确地仅解冻一个线程，然后在您要测试的特定点强制活动线程更改（使用切换到线程）。这不会复制所有类型的线程同步问题（有些更微妙，处理不同 CPU 上的内存缓存等），但您可以看到交替执行顺序的影响（例如一些死锁场景。）

# wordpress - Wordpress“paginate_links”指的是“未找到”页面

> ID：13160696
> 
> 赞同：0
> 
> 时间：2012-10-31T14:51:35.743
> 
> 标签：wordpress, pagination

我正在尝试使用以下代码在 WordPress 3.4.2 中制作一个简单的分页导航菜单：

```
global $wp_query;
                $total_pages = $wp_query->max_num_pages;

                if($total_pages > 1) {

                    $current_page = max(1, get_query_var('paged'));

                    echo paginate_links(array(
                        'base'  =>  get_pagenum_link(1).'%_%',
                        'format'    =>  'page/%#%',
                        'current'   =>  $current_page,
                        'total'     =>  $total_pages,
                        'prev_next' =>  false,
                        'type'      =>  'list'

                    ));
                } 
```

但是当我点击一个页面链接时，它会引用我：

**未找到**

**在此服务器上找不到请求的 URL /wptest/page/2。**

我知道这可能是我错过的一些简单的事情，但我不知道它是什么。*有没有办法在没有外部插件或黑客*的情况下进行这种分页？

尝试更改“阅读”和“永久链接”中的设置，但仍然没有成功..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:20:34.927

错误不在 Wordpress 中。我忘了打开 WAMP 的*重写模块*。

# javascript - Google Charts - 曲线图错误地低于 0

> ID：13160704
> 
> 赞同：8
> 
> 时间：2012-10-31T14:51:43.183
> 
> 标签：javascript, graph, google-visualization, linechart

我有一个谷歌折线图，我设置`'curveType': 'function'`了这个图表是弯曲的并且有一个漂亮的外观。我的问题是，当一个数据点的值为 0，然后是一个较高的值时，图表会下降到 0 以下，以便曲线可以正确拟合。这也导致 vAxis 的 minRange 为 -2000，这对于我的数据（随时间的下载次数）来说是不可能的。

我试图通过设置 `'minValue': 0`和`'viewWindowMode': 'maximized'`来解决这个问题，但它并没有完全解决问题。

我附上了一张图片，它可以比我用文字更好地解释我的问题。

[![](../Images/58e18efd3cb909cab2d3e0d8e9f680e4.png)](https://i.stack.imgur.com/Z3Z55.png)

如果有人知道这个问题的解决方案，而我不必回到直线，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-11-01T17:29:29.543

无论您做什么，曲线都可能继续下降到 0 以下，但您可以裁剪视图，使显示图形的最低点为 0。您可以使用 vAxis.viewWindow.min 属性来做到这一点：

```
lineChart.draw(data, 
   {
    curveType: "function",
    vAxis: {viewWindow: {min:0} } 
   }
); 
```

有关 vAxis.viewWindow.min 和其他配置选项的信息，请参阅[LineChart 文档](https://developers.google.com/chart/interactive/docs/gallery/linechart?csw=1#Configuration_Options)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T10:15:24.707

只是对此的快速更新。我意识到我的数据工作无论如何都不适合曲线图，因为它是离散数据而不是连续数据。我不得不切换回直线，这消除了我的问题。我知道，这不是一个理想的解决方案，但它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T14:57:06.930

您可以尝试另一个图表库。我经常将 flot 用于简单的图形，将 raphael 图形用于更复杂的事物（操作起来有点困难，而且对我来说看起来有点笨拙）

gRaphael：[http](http://g.raphaeljs.com/) ://g.raphaeljs.com/ Flot：[http ://www.flotcharts.org/](http://www.flotcharts.org/)

# javascript - Google 跟踪代码管理器 (GTM) 和 Google Analytics 变量

> ID：13160706
> 
> 赞同：3
> 
> 时间：2012-10-31T14:51:48.730
> 
> 标签：javascript, google-analytics, google-tag-manager

当规则所基于的值在 _gaq javascript 内时，是否可以获得由 javascript 规则触发的标签？

这是我的谷歌分析 javascript：

```
<script type="text/javascript">
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-960143-1']);
            _gaq.push(['_setDomainName', '.immoscout24.ch']);
            _gaq.push(['_trackPageview', '/ContactFormSent.html']);
            _gaq.push(['_trackPageLoadTime']);
            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
            </script> 
```

谷歌标签管理器帮助说：

> JavaScript 变量：该值设置为您指定的全局变量的值。如果您要查找的值未在数据层中设置（请参阅下面的数据层宏类型），并且它在 DOM 中不可见（请参阅下面的 DOM 宏类型），则可能可以检索到该值来自 JavaScript 变量。如果您可以在页面源中以 JavaScript 变量的形式找到您要查找的值，请使用此宏类型。

现在我想有一个 _trackPageview 的宏和一个基于这个宏的 /ContactFormSent.html 的规则。所以变量应该是全局的——> '_trackPageview' 是这种情况吗？如果是，则应该可以根据此规则触发代码。

还是 Google 跟踪代码管理器内部的设置有问题？

*   宏名：trackPageview
*   宏类型：JavaScript 变量
*   全局变量的名称：_trackPageview

谢谢你帮助我:-) Fabian

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:37:25.093

可以使用 _gaq，只是它比您想象的要方便得多。_gaq 是一个数组，通过 GA 代码中的 push-method 添加的每个项目也是一个数组。因此，在您的示例中处理 _trackPageview 的方法是 _gaq[2][0] （第三个数组中的第一项） - 至少直到有人向 GA 代码添加另一个“推送”，在这种情况下，您的 GTM 规则将中断。所以可能，是的，好主意，不是那么多。

（为了澄清一点，您的错误是认为 _gaq 是一个具有键=>值对的一维数组。事实并非如此）。

# opencv - 如何画线而不是线段OpenCV 2.4.2

> ID：13160722
> 
> 赞同：11
> 
> 时间：2012-10-31T14:52:09.400
> 
> 标签：opencv

这个问题说明了一切，

我知道在`Line()`两点之间绘制线段的函数。

我需要画线而**不是**线段，也使用线段的两个点。

* * *

*[EN：编辑之前发布的问题答案]*

我使用了您的解决方案，它在水平线中表现良好，但在垂直线中仍然存在问题。

例如，下面的示例使用点 [306,411] 和 [304,8]（紫色）以及绘制线（红色），在 600x600 像素的图像上。你有什么诀窍吗？

[![在此处输入图像描述](../Images/a3fc7e4edac8f11ae9e421926b4a8a2c.png)](https://i.stack.imgur.com/yhGfh.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-04-20T19:27:27.850

我看到这是一个非常古老的问题。我遇到了完全相同的问题，我使用了这个简单的代码：

```
double Slope(int x0, int y0, int x1, int y1){
     return (double)(y1-y0)/(x1-x0);
}

void fullLine(cv::Mat *img, cv::Point a, cv::Point b, cv::Scalar color){
     double slope = Slope(a.x, a.y, b.x, b.y);

     Point p(0,0), q(img->cols,img->rows);

     p.y = -(a.x - p.x) * slope + a.y;
     q.y = -(b.x - q.x) * slope + b.y;

     line(*img,p,q,color,1,8,0);
} 
```

首先我计算线段的斜率，然后我将线段“延伸”到图像的边界。我计算位于 x = 0 和 x = image.width 的线的新点。点本身可以​​在 Image 之外，这是一种令人讨厌的技巧，但解决方法很简单。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-31T15:41:33.753

您将需要编写一个函数来为自己执行此操作。我建议你把你的线放在 ax+by+c=0 的形式中，然后将它与图像的 4 个边缘相交。请记住，如果您有一条 [abc] 形式的线，找到它与另一条线的交点只是两者的叉积。你的图像的边缘是

```
top_horizontal =    [0 1 0];
left_vertical   =   [1 0 0];
bottom_horizontal = [0 1 -image.rows];
right_vertical =    [1 0 -image.cols]; 
```

此外，如果您对点之间的距离有所了解，您也可以在每个方向上沿线选择非常远的点，我认为交给 Line() 的点不需要在图像上。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-03-30T14:14:27.527

我遇到了同样的问题，发现它是2.4.X OpenCV 上的一个[已知错误，已针对较新版本进行了修复。](https://github.com/opencv/opencv/issues/4555)

对于 2.4.X 版本，解决方案是在使用绘图之前剪切线[`cv::clipLine()`](http://docs.opencv.org/2.4/modules/core/doc/drawing_functions.html#clipline)

这里有一个我对自己做的函数，它在 2.4.13 OpenCV 上运行良好

```
void Detector::drawFullImageLine(cv::Mat& img, const std::pair<cv::Point, cv::Point>& points, cv::Scalar color)
{
    //points of line segment
    cv::Point p1 = points.first;
    cv::Point p2 = points.second;

    //points of line segment which extend the segment P1-P2 to 
    //the image borders.
    cv::Point p,q;

    //test if line is vertical, otherwise computes line equation
    //y = ax + b
    if (p2.x == p1.x)
    {
        p = cv::Point(p1.x, 0); 
        q = cv::Point(p1.x, img.rows); 
    }
    else
    {
        double a = (double)(p2.y - p1.y) / (double) (p2.x - p1.x);
        double b =  p1.y - a*p1.x;

        p = cv::Point(0, b);
        q = cv::Point(img.rows, a*img.rows + b);

        //clipline to the image borders. It prevents a known bug on OpenCV
        //versions 2.4.X when drawing 
        cv::clipLine(cv::Size(img.rows, img.cols), p, q);
    }

    cv::line(img, p, q, color, 2);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-19T17:38:15.687

这个答案是从 pajus_cz 答案派生出来的，但有一点改进。

我们有两个点，我们需要得到直线方程**`y = mx + b`**才能画出直线。

我们需要得到两个变量

1-**坡度（米）**

![斜率方程](../Images/d05f15f3df6856a440973fd1d7569958.png)

2- **b**可以使用我们在计算斜率后已有的两个点中的任何给定点通过线方程检索`b = y - mx`。

```
void drawStraightLine(cv::Mat *img, cv::Point2f p1, cv::Point2f p2, cv::Scalar color)
{
        Point2f p, q;
        // Check if the line is a vertical line because vertical lines don't have slope
        if (p1.x != p2.x)
        {
                p.x = 0;
                q.x = img->cols;
                // Slope equation (y1 - y2) / (x1 - x2)
                float m = (p1.y - p2.y) / (p1.x - p2.x);
                // Line equation:  y = mx + b
                float b = p1.y - (m * p1.x);
                p.y = m * p.x + b;
                q.y = m * q.x + b;
        }
        else
        {
                p.x = q.x = p2.x;
                p.y = 0;
                q.y = img->rows;
        }

        cv::line(*img, p, q, color, 1);
} 
```

# ubuntu - 在 ARM 机器上成功构建适用于 Ubuntu 的 DevIL 后，ILU 和 ILUT 库在哪里？

> ID：13160728
> 
> 赞同：-1
> 
> 时间：2012-10-31T14:52:24.900
> 
> 标签：ubuntu, ubuntu-11.10, devil

我正在尝试移植一个使用 DevIL 库来打开和保存图像的应用程序。该应用程序是在 PC 上的 Ubuntu 10.04 下开发的，`libdevil-dev`并`libdevil1c2`从软件中心自动​​安装。

现在我的新系统是一个运行 Ubuntu 11.10 的基于 ARM 的嵌入式系统。不幸的是，我在其软件中心找不到 DevIL。所以我尝试下载源代码并构建包。

在安装文件之后，我执行了以下步骤：

```
configure
make
make install 
```

（`sudo`在需要的地方）

构建和安装进展顺利，至少看起来如此。`make chack`也没有报错。

然后，我尝试在提供的示例上构建一个。具体来说，它是 OpenGL 演示。但是，在编译源文件时，使用：

```
gcc -o gltest.e gltest.c -lIL -lILU -lILUT -lglut 
```

我收到以下链接器错误：

```
/usr/bin/ld: cannot find -lILU
/usr/bin/ld: cannot find -lILUT
collect2: ld returned 1 exit status 
```

看着`/usr/local/lib`，我看到但没有or`libIL.a libIL.la libIL.so libIL.so.1 libIL.so.1.1.0`的迹象。`libILU``libILUT`

如何让安装程序安装`ILU`和`ILUT`库以及相应的头文件？

**更新**：

再次运行配置，它以以下消息结束：

```
configure: +----------------------------------------+
configure: \| IL library  Supported formats \|
configure: +----------------------------------------+-------+
configure:  BLP BMP DCX DDS DICOM WAD FITS GIF HDR ICNS ICON IFF ILBM IWI LIF MDL MP3 PCX PCD PIC PIX PNM PSD PSP PXR RAW ROT SGI SUN TEXTURE TGA TPL UTX VTF WAL WBMP WDP XPM
configure: +----------------------------------------+
configure: \| IL library External libraries \|
configure: +----------------------------------------+-------+
configure: Required libs:  OpenEXR
configure: +----------------------------------------+
configure: \|      ILU part disabled       \|
configure: +----------------------------------------+-------+
configure: Pass --enable-ILU option to the configure script if you want to build ILU
configure: +----------------------------------------+
configure: \|      ILUT part disabled      \|
configure: +----------------------------------------+-------+
configure: Pass --enable-ILUT option to the configure script if you want to build ILUT
configure: +----------------------------------------+
configure: \| Detected Machine Extensions  \|
configure: +----------------------------------------+-------+
configure: 
configure: +----------------------------------------+
configure: \|  Not building any examples   \|
configure: +----------------------------------------+-------+
configure: Pass --with-examples option to the configure script if you want to build examples.
configure: +----------------------------------------+ 
```

因此，似乎`ILU`并`ILUT`没有建造零件。现在通过建议的参数解决了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:13:36.093

要构建 ILU 和 ILUT 库，您需要将参数添加到`--enable-ILU`脚本中：`--enable-ILUT``configure`

```
$ ./configure --enable-ILU --enable-ILUT 
```

# actionbarsherlock - 导入后 ActionBarSherlock 中的许多错误 ins src

> ID：13160735
> 
> 赞同：3
> 
> 时间：2012-10-31T14:52:55.370
> 
> 标签：actionbarsherlock

嗨，我在导入后遇到了 ActionBarSherlock 的问题。

我做了以下步骤：

*   我从库文件夹中导入了东西
*   我检查了项目是否设置为 IsLibrary
*   我选择了项目构建目标：Android 4.0

那么项目看起来像这样： ![在此处输入图像描述](../Images/c48440a61cb489594445c859b39ca5a4.png)

我不知道出了什么问题，第一个包中的错误例如是：

```
The method onCreatePanelMenu(int, Menu) of type Watson must override a superclass method 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T07:18:00.973

[ActionBarSherlock 库导入后报错](https://stackoverflow.com/questions/11165700/actionbarsherlock-library-is-full-of-errors-after-being-imported)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:01:19.890

可能还有其他方法，我的建议是转到 java 文件并删除`@override`那里方法上方的所有符号，因为我也遇到过这个问题，我这样做是为了摆脱这些错误！我认为这可能会满足您的需求。

# dojo - Dojo DND 创建多个项目

> ID：13160739
> 
> 赞同：0
> 
> 时间：2012-10-31T14:53:13.983
> 
> 标签：dojo, drag-and-drop

经过几个小时的尝试和谷歌搜索后，我得到了一个没有答案的问题:(

我创建了三个 dojo.dnd.Source 组件。它用于将用户与项目耦合，因此左侧是项目，右侧是用户，中间是画布。我设置了相关的创建者和检查验收功能，一切都很好。

在中心画布上，用户可以拖放一个项目，该项目显示为 div，其中包含所有相关用户作为 div 元素。可以删除的另一个 dndtype 是用户类型，在这种情况下，我想清空画布并显示与删除的用户相关的所有项目。一旦我将项目或用户放在画布上，就会调用创建者函数。问题是创建者函数返回 1 个应该被删除的元素，如果我删除一个用户，我需要在画布上绘制几个元素，因此创建者方法没有完全覆盖这一点，因为它只返回一个元素。

为了应对默认行为，我尝试手动将项目添加到画布并只返回一个，我知道它并不漂亮：S 它正在工作，但我遇到了奇怪的行为，如果我在画布上移动项目它是被视为用户而不是项目。

最重要的是，你们知道有没有一种方法可以删除一个项目并创建多个项目。我正在寻找自己触发 drop 事件，但无济于事。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T02:49:36.253

您要查找的事件是 Source 的 onDrop 事件。查看 API 文档以了解您可以使用的更多事件：有一个 onDropExternal 和 onDropInternal 可在商店内部和商店之间使用。

```
require(["dojo/dnd/Source"], function(Source){
  var source = new Source({
     onDrop = function(source, nodes, copy)  {
       //called only on the current target, when drop is performed
       this.inherited(arguments); //execute the default onDrop function  
       //now add the node(s) to the other stores here
       //you might be able to just do something like: 
       source2.insertNodes(nodes);//but this is untested ;)
     }
  });
}); 
```

# php - php移动检测，标题包括手动桌面切换

> ID：13160741
> 
> 赞同：0
> 
> 时间：2012-10-31T14:53:15.277
> 
> 标签：php, mobile

我正在使用移动检测脚本来交换标头包含，但我需要添加一个链接以在移动版本和桌面版本之间切换。

这是我的检测代码：

```
 <?php

$mobile_browser = '0';

if (preg_match('/(up.browser|up.link|mmp|symbian|smartphone|midp|wap|phone|android)/i', strtolower($_SERVER['HTTP_USER_AGENT']))) {
    $mobile_browser++;
}

if ((strpos(strtolower($_SERVER['HTTP_ACCEPT']),'application/vnd.wap.xhtml+xml') > 0) or ((isset($_SERVER['HTTP_X_WAP_PROFILE']) or isset($_SERVER['HTTP_PROFILE'])))) {
    $mobile_browser++;
}    

$mobile_ua = strtolower(substr($_SERVER['HTTP_USER_AGENT'], 0, 4));
$mobile_agents = array(
    'w3c ','acs-','alav','alca','amoi','audi','avan','benq','bird','blac',
    'blaz','brew','cell','cldc','cmd-','dang','doco','eric','hipt','inno',
    'ipaq','java','jigs','kddi','keji','leno','lg-c','lg-d','lg-g','lge-',
    'maui','maxo','midp','mits','mmef','mobi','mot-','moto','mwbp','nec-',
    'newt','noki','oper','palm','pana','pant','phil','play','port','prox',
    'qwap','sage','sams','sany','sch-','sec-','send','seri','sgh-','shar',
    'sie-','siem','smal','smar','sony','sph-','symb','t-mo','teli','tim-',
    'tosh','tsm-','upg1','upsi','vk-v','voda','wap-','wapa','wapi','wapp',
    'wapr','webc','winw','winw','xda ','xda-');

if (in_array($mobile_ua,$mobile_agents)) {
    $mobile_browser++;
}

if (strpos(strtolower($_SERVER['ALL_HTTP']),'OperaMini') > 0) {
    $mobile_browser++;
}

if (strpos(strtolower($_SERVER['HTTP_USER_AGENT']),'windows') > 0) {
    $mobile_browser = 0;
}

if ($mobile_browser > 0) {
  include("/includes/header_mobile.php");
}
else {

     include("/includes/header_eng.php");
}  
?> 
```

HTML：

```
<a href="http://site.com/test.php/?mobile">View Mobile Site</a>
<a href="http://site.com/test.php/?full">View Full Site</a> 
```

我已经尝试过这个 GET 代码的变体，但我不知道如何将这些变量传递到脚本中

```
 if ($_GET['mobile']) {
    $is_mobile = true;
 }

 if ($_GET['full']) {
   $is_mobile = false;
 } 
```

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:56:58.430

由于您的代码当前是这些变量的值，`NULL`因此相当于`false`PHP 中的值。将您的代码更改为：

```
 if (isset($_GET['mobile'])) {
    $is_mobile = true;
 }

 if (isset($_GET['full'])) {
   $is_mobile = false;
 } 
```

或者简单地为这些变量使用非零值，即：`http://site.com/test.php/?mobile=1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:39:39.373

做这样的事情，这将记住用户在会话生命周期内的选择，因此在单击其他链接时不会返回检测代码。

```
<?php

session_start();

if (isset($_GET['mobile'])) {
    //$is_mobile = true; // don't really need this
    $mobile_browser = 1;
    $_SESSION['force_layout'] = 'mobile';
}
elseif (isset($_GET['full'])) {
    //$is_mobile = false; // don't really need this anymore
    $mobile_browser = 0;
    $_SESSION['force_layout'] = 'full';
}
elseif ($_SESSION['force_layout'] === 'mobile') {
    $mobile_browser = 1;
    $_SESSION['force_layout'] = 'mobile';
}
elseif ($_SESSION['force_layout'] === 'full') {
    $mobile_browser = 0;
    $_SESSION['force_layout'] = 'full';
}
else {

    // run the detection code

    $mobile_browser = '0';

    if (preg_match('/(up.browser|up.link|mmp|symbian|smartphone|midp|wap|phone|android)/i', strtolower($_SERVER['HTTP_USER_AGENT']))) {
        $mobile_browser++;
    }

    if ((strpos(strtolower($_SERVER['HTTP_ACCEPT']),'application/vnd.wap.xhtml+xml') > 0) or ((isset($_SERVER['HTTP_X_WAP_PROFILE']) or isset($_SERVER['HTTP_PROFILE'])))) {
        $mobile_browser++;
    }    

    $mobile_ua = strtolower(substr($_SERVER['HTTP_USER_AGENT'], 0, 4));
    $mobile_agents = array(
        'w3c ','acs-','alav','alca','amoi','audi','avan','benq','bird','blac',
        'blaz','brew','cell','cldc','cmd-','dang','doco','eric','hipt','inno',
        'ipaq','java','jigs','kddi','keji','leno','lg-c','lg-d','lg-g','lge-',
        'maui','maxo','midp','mits','mmef','mobi','mot-','moto','mwbp','nec-',
        'newt','noki','oper','palm','pana','pant','phil','play','port','prox',
        'qwap','sage','sams','sany','sch-','sec-','send','seri','sgh-','shar',
        'sie-','siem','smal','smar','sony','sph-','symb','t-mo','teli','tim-',
        'tosh','tsm-','upg1','upsi','vk-v','voda','wap-','wapa','wapi','wapp',
        'wapr','webc','winw','winw','xda ','xda-');

    if (in_array($mobile_ua,$mobile_agents)) {
        $mobile_browser++;
    }

    if (strpos(strtolower($_SERVER['ALL_HTTP']),'OperaMini') > 0) {
        $mobile_browser++;
    }

    if (strpos(strtolower($_SERVER['HTTP_USER_AGENT']),'windows') > 0) {
        $mobile_browser = 0;
    }

}

// now do your include stuff 

if ($mobile_browser > 0) {
    include("/includes/header_mobile.php");
}
else {
    include("/includes/header_eng.php");
}  
?> 
```

# ios - 遍历tableview的iOS Next/Previous Button

> ID：13160742
> 
> 赞同：0
> 
> 时间：2012-10-31T14:53:16.213
> 
> 标签：ios, delegates, tableview, next

我有一个由 plist 填充的 tableview，当单击一个单元格时，detailViewController 中的一个 textview 会填充一个来自 plist 中关联值的字符串。

所有这一切都完美无缺，但是现在我想在其中添加上一个和下一个按钮`detailViewController`，它将遍历 tableview。

这是我`prepareForSegue`的`TableViewController`：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
{

    if ([segue.identifier isEqualToString:@"promisePush"])
    {
        NSIndexPath *indexPath = [self.tableView indexPathForCell:sender];
        NSInteger section = [indexPath section];
        NSString *key = [uniqueArray objectAtIndex:section];

        NSArray *nameSection = [sections objectForKey:key];
        NSDictionary *dictionary = [nameSection objectAtIndex:indexPath.row];

        DetailViewController *dvController = [segue destinationViewController];

        //dvController.array = titles;

        dvController.selectedRow = indexPath.row;
        dvController.titleCat = [dictionary valueForKey:@"Title"];
        dvController.kjvText = [dictionary valueForKey:@"kjvText"];
        dvController.nkjvText = [dictionary valueForKey:@"nkjvText"];
        dvController.nivText = [dictionary valueForKey:@"nivText"];
        dvController.verse = [dictionary valueForKey:@"verse"];

        UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithTitle:@"Promises" style:UIBarButtonItemStyleBordered target:nil action:nil];

       self.navigationItem.backBarButtonItem = backButton;
    }
} 
```

现在 kjvText 被传递给 detailViewController 中名为 txtdText 的 textView

```
[txtdText setText:nkjvText]; 
```

我能够通过 indexPath.row 传递给 detailViewController

`dvController.selectedRow = indexPath.row;`

并且可以通过将 int 迭代到下一个数字

```
- (IBAction)nextPromise:(UIButton *)sender {
    selectedRow = selectedRow + 1;
} 
```

但我不知道如何将该数字传达给 tableView 中的下一个 indexPath.row，它将更新 detailViewController 中的 textView。

我有一种感觉，我需要将 TableViewController 设置为我的 DetailViewController 的委托，但我不确定那会是什么样子。任何方向都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:11:49.083

如果我理解正确，您不能简单地在您的 UITableView 上调用以下方法吗？

```
[UITableView selectRowAtIndexPath:animated:scrollPosition:] 
```

这会选择接收器中由索引路径标识的行，可选择将行滚动到接收器中的某个位置。请参阅 UITableView 上的文档。

# function - 如何返回基本功能/脚本

> ID：13160743
> 
> 赞同：1
> 
> 时间：2012-10-31T14:53:21.940
> 
> 标签：function, matlab

有谁知道在由基本 f/s 调用的 af/s 调用的 af/s 中如何返回基本函数/脚本 (f/s)？混乱我知道...

base f/s - f/s - f/s --> 从这里返回到 base f/s

常规`return`电话只会让我到达上一级的 f/s。

我目前正在使用`try-catch`基础 f/s 中的构造来查找程序何时出错，但我觉得这是一种不太理想的方法。

谢谢，如果我能以其他方式澄清，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:59:53.183

我建议不要使用`try` `catch`块来实现此行为，除非发生实际错误或异常。走这条路会导致代码不清楚。

相反，让内部函数返回一个指示某种状态的值。然后在中间函数中评估该状态以确定中间函数是否也应该返回。

这是一个简单的例子

```
function outer()
   middle();
end

function middle()

  innerResult = inner()

  switch innerResult
    case 1:
      disp('Executing the guts of middle()');
    case -1:
      return;
  end

end

function retVal = inner()
  if returnToOuter
    return -1;
  else
    return 1;
  end
end 
```

# vb.net - Windows Server 2008 上不调用 Dll 方法

> ID：13160752
> 
> 赞同：1
> 
> 时间：2012-10-31T14:53:48.520
> 
> 标签：vb.net, dll, iis-7.5, windows-server-2008, windows-server-2003

我正在尝试从 ASP.net 网络调用 dll 方法。它在 W2003 服务器上运行，但相同的 dll 和相同的 web 在带有 IIS 7.5 的 w2008 服务器 R2 上崩溃。我这样做是为了导入 dll：

```
<DllImport("Cripto.dll")> _
        Public Shared Function DesCipher(ByVal uiMode As Integer, ByVal uiLength As        Integer, ByVal szSourceData As String) As String

End Function 
```

我尝试了 64 位 dll 编译，但问题仍然存在。

我要疯了...

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:27:29.007

我终于找到了线索。这是一个内存位置问题。主要函数返回一个像这样的数组： char retorno[10000];

该函数在 dll 代码中声明为“char*”

通过更改这些行：

```
 ULONG  ulSize = strlen((char*)retorno) + sizeof(char);
     char*  pszReturn = NULL;
     pszReturn = (char*)::GlobalAlloc(GMEM_FIXED, ulSize);
     strcpy(pszReturn, (char*)retorno);
     return pszReturn; 
```

而不是 return ((char *)retorno)

现在它正在工作。

# javascript - javascript正则表达式匹配重复

> ID：13160756
> 
> 赞同：0
> 
> 时间：2012-10-31T14:54:13.527
> 
> 标签：javascript, html, regex

我有字符串，想通过正则表达式捕获一个片段：

```
var regex = new RegExp("(\s?.{0,2}the.{0,2}\s?)", "i");
var str= " the apple the apple the apple the apple the apple the apple the apple"
alert(str.match(regex)) 
```

目标是捕获第一个“带有（内）空间的最大 3 个符号”+“the”+“带有（内）空间的最大 3 个符号”

我不明白为什么结果重复 ------> a, a

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T14:59:31.530

```
var regex = new RegExp("(\s?.{0,2}the.{0,2}\s?)", "i");
                        ^                     ^   unnecessary capturing group. 
```

**[match](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)**将为您处理表达式周围的捕获组。

你的正则表达式应该是：

```
var regex = new RegExp("\s?.{0,2}the.{0,2}\s?", "i"); 
```

# objective-c - 目标 C 浮点数未显示所有小数

> ID：13160757
> 
> 赞同：0
> 
> 时间：2012-10-31T14:54:14.217
> 
> 标签：objective-c, floating-point, double, nsnumber

我将浮点数传递给一个方法，但它没有显示所有小数。我不知道为什么会这样。

这是一个例子：

```
[[LocationApiCliente sharedInstance] nearPlacesUsingLatitude:-58.3645248331830402 andLongitude:-34.6030467894227982]; 
```

然后：

```
- (BOOL)nearPlacesUsingLatitude:(double)latitude andLongitude:(double) longitude {

    NSString *urlWithCoords = [NSString stringWithFormat:@"%@&lat=%f&long=%f", CountriesPath, latitude, longitude]; 
```

打印 urlWithCoords 将导致：

格式=json&lat=-58.364525&long=-34.603047

更多这样的。我从输出终端得到什么：

```
(lldb) p -3.13419834918349f
(float) $4 = -3.1342
(lldb) p -3.13419834918349
(double) $5 = -3.1342 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:21:42.613

更改`%f`格式字符串中的 s 以指定所需的小数位数，例如`%.16f`.

请注意，显示的小数位数并不能保证它们是*正确*的，但至少它们不会被截断。

总体而言，问题在于浮点数不包含有关精度的信息，并且不能精确地表示某些十进制值，因此在一般情况下格式化不能“自动检测”小数位数。因此，您只需要通过指定所需的数字来覆盖默认值，并接受它不代表位置准确性。但由于您似乎是通过 URL 将浮点数传递给另一个程序，这应该不是问题——小数位数越多越好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:14:08.353

看起来 CoreLocation 使用双精度来表示度数，所以如果在设备上可以找到更多的地理精度，我会感到惊讶。

但是，一般来说，如果你想表示比双精度更高的精度，你可以`long double`像这样在 Objective-C 中使用......

```
long double myPi = 3.141592653589793;
NSLog(@"%16.16Lf", myPi); 
```

# actionscript-3 - 如何让3个按钮按一定顺序被点击到某个框架？闪存 AS3

> ID：13160758
> 
> 赞同：-1
> 
> 时间：2012-10-31T14:54:18.960
> 
> 标签：actionscript-3, flash, button, sequence

当以特定顺序单击按钮时，我正在努力使 3 个按钮能够进入一个框架。例如，按钮标记为
按钮 1
按钮 2
按钮 3

并且需要单击它们的顺序是按钮 3、按钮 1、按钮 2 才能进入下一帧，我该如何实现？

这就是我到目前为止所拥有的。

```
 var clicked = MouseEvent.CLICK 
 var buttons = new Array(YellowButton, BlueButton, RedButton); 
 for (var a=0; a<buttons.lenght; a++) 
 { 
   buttons[a].buttonMode=true 
   buttons[a].addEventListener(clicked,RedYellowBlue); 
 } 

 function RedYellowBlue(event:MouseEvent):void { gotoAndStop(20); } 
```

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:25:23.743

//这里是代码

```
var buttons:Array = new Array(YellowButton, BlueButton, RedButton);

for(var i:int=0;i< buttons.length;i++) 
{
  buttons[a].buttonMode=true 
  buttons[a].addEventListener(MouseEvent.CLICK,buttonsClickHandler); 
} 

function buttonsClickHandler(event:MouseEvent):void { 

    var button:MovieClip = MovieClip(event.target);

    switch(button.name)
    {
        case "YellowButton":
        case "BlueButton":
        gotoAndStop(2);
        break;
        case "RedButton":
        gotoAndStop(3);
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:25:24.827

我建议创建一个字符串对象，该对象将通过单击按钮进行组合，然后与您设置的特定序列进行比较。这样做的好处是你可以让它适用于任何长度的序列。

这里最重要的是，您不希望所有三个按钮都使用相同的事件侦听器。您希望他们的操作是唯一的，否则，单击一个与单击所有其他操作相同（这是您当前代码的问题。）

```
var checkString:String = "";

//Create event listeners and their functions.
YellowButton.addEventListener(Mouse.CLICK, yellowClick);
RedButton.addEventListener(Mouse.CLICK, redClick);
BlueButton.addEventListener(Mouse.CLICK, blueClick);

function yellowClick(evt:Event):void
{
   //In each event listener function, add a letter or 
   //string to the checkString variable.
   checkString += "y";

   //Then, see if the string matches or not.
   check();
}

function redClick(evt:Event):void
{
   checkString += "r";
   check();
}

function blueClick(evt:Event):void
{
   checkString += "b";
   check();
}

//If the proper sequence is red, yellow, blue, the string would read "ryb".
function check():void
{
   if(checkString == "ryb")
   {
      //Clear the checkString for convenience before going on.
      clearString();
      //CODE TO GO TO NEW FRAME
      gotoAndStop(20);
   }
   else
   {
      //Make sure the string is at least 3 characters long.
      if(checkString.length >= 3)
      {
         clearString();
         gotoAndStop(foo);
      }
   }
}

function clearString():void
{
   //You will want to have a function for clearing the string.
   //This is especially useful if you have a button for "start over."
   checkString = "";
} 
```

这应该足以让你开始。如果您需要其他帮助，请随时评论我的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T16:44:20.273

要合并@JasonMc92 的答案，您可以使用目标名称作为`checkString`字母，因此您只需为所有按钮调用一个函数。

```
yellowButton.addEventListener(MouseEvent.CLICK, redYellowBlue);
redButton.addEventListener(MouseEvent.CLICK, redYellowBlue);
blueButton.addEventListener(MouseEvent.CLICK, redYellowBlue);

function redYellowBlue(e:MouseEvent){
  checkString += e.currentTarget.name.substr(0,1);
  check();
}
//... continue on with Jason's functions 
```

或者，由于您已将它们设置在一个数组中，您也可以只使用按钮的索引作为您的检查序列。就像是：

```
function redYellowBlue(e:MouseEvent){
  checkString += String(buttons.indexOf(e.currentTarget));
  check();
}

function check(){
  if (checkString == '201') {
    // ... handle correct sequence
  }
} 
```

此外，只是一个最佳实践提示：

类名只能使用前导大写。实例名称和函数名称应以小写字母开头。（领先的上限不会破坏任何东西，但这是标准做法）

# powershell - start-Transcript 未将所有输出捕获到日志文件..？

> ID：13160759
> 
> 赞同：21
> 
> 时间：2012-10-31T14:54:21.967
> 
> 标签：powershell, powershell-2.0

我有下面的代码，它通过并获取计划任务信息并将屏幕上出现的输出放到日志文件中。

但是，我注意到除了具有“访问被拒绝”的服务器之外的所有错误都被记录 - 我如何在日志文件中记录这些错误。

下面是代码：

```
Start-Transcript -path $scheduledpath\logging.txt -append

foreach ($name in $names) 
{
    Write-Host "Running Against Server $name" -ForegroundColor Magenta
    if ( Test-Connection -ComputerName $name -Count 1 -ErrorAction SilentlyContinue ) 
        {
            #$Command = "schtasks.exe /query /S $name /fo CSV /v >c:\tools\Scheduled\$name.csv"
            $Command = "schtasks.exe /query /S $name /fo CSV /v >$scheduledpath\$name.csv"
            Invoke-Expression $Command
            Clear-Variable Command -ErrorAction SilentlyContinue
        }

    else{
            Write-Host "$name is Down" -ForegroundColor Red
        }

}

Stop-Transcript 
```

这是屏幕上的输出：

```
> Running Against Server SV064909 
> SV064909 is Down 
> Running Against Server SV081372 
> SV081372 is Down 
> Running Against Server YBEF008690_vorher_SV064930 
> YBEF008690_vorher_SV064930 is Down 
> Running Against Server Alt_SV064921 
> Alt_SV064921 is Down 
> Running Against Server SV073632 
> ERROR: Access is denied. 
> Running Against Server SV073633 
> ERROR: Access is denied. 
```

这是 LOG 文件中的输出......没有显示访问被拒绝......？

```
> Running Against Server SV064909 
> SV064909 is Down 
> Running Against Server SV081372 
> SV081372 is Down 
> Running Against Server YBEF008690_vorher_SV064930 
> YBEF008690_vorher_SV064930 is Down 
> Running Against Server Alt_SV064921 
> Alt_SV064921 is Down 
> Running Against Server SV073632 
> Running Against Server SV073633 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-31T15:02:01.763

[连接错误315857](http://connect.microsoft.com/PowerShell/feedback/details/315875/unable-to-capture-all-session-output-into-a-transcript)中报告了本机命令输出未记录在 Start-Transcript 输出中而是输出到控制台的这种行为。请参阅解决方法以获取可能的解决方案。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-17T14:42:00.750

最简单的解决方法是将本机命令的结果通过管道传输到`Out-Host`

```
schtasks.exe /query /S $name /fo CSV /v >$scheduledpath\$name.csv | Out-Host 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-03-17T13:33:20.040

以上都不适合我。我找到[了一个 2009 年的链接，](https://rkeithhill.wordpress.com/2009/03/06/effective-powershell-item-14-capturing-all-output-from-a-script/)其中讨论了这个问题。但是 2010 年的微软[博客](https://blogs.msdn.microsoft.com/powershell/2010/01/04/workaround-for-start-transcript-on-native-processes/)为我解决了这个问题。

简而言之，将本机命令输出通过管道传输到 Out-Default。

```
 schtasks.exe /query /S $name /fo CSV /v | Out-Default 
```

{我自己并没有真正尝试过这条线，但你明白了。}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-24T21:01:11.750

啊，正确答案应该是：

```
$Command = "schtasks.exe /query /S $name /fo CSV /v 2>&1 >$scheduledpath\$name.csv" 
```

即管道stderror（管道2）到stdout（管道1），以便两者都显示在stdout中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-13T19:23:58.157

# 获取服务标签

```
 $servicetag = Get-WmiObject win32_bios | Select-Object -ExpandProperty SerialNumber 
    Write-output $servicetag 
```

我在脚本顶部的一行中使用了 Write-output，在那之后它们都是 Write-Host。但是每个“写入”输出现在都显示在我的脚本中。

# ibm-midrange - 是否可以捕获为 RPG 程序中的程序调用引发的错误消息？

> ID：13160760
> 
> 赞同：1
> 
> 时间：2012-10-31T14:54:22.060
> 
> 标签：ibm-midrange, rpg

我试图让一个 RPG 程序在其中的程序调用出错时能够说出更具体的细节。我要监视的异常与错误的程序逻辑无关，例如除以零。我要检查的是程序调用是否由于权限问题或未找到程序而失败。73-74 的指标只能说明存在异常，但不能说明其背后的原因。是否有任何可能的方法可以在 RPG 中检测到这一点，就像 CL 程序中的 MONMSG 语句一样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:26:14.413

有两类错误：程序和文件。程序错误是诸如被零除、CALL 失败等。完整列表位于[Program Status Codes](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=/rzasd/sc092508151.htm)。这些错误代码非常粗略——如果你调用 PGMX 并且存在权限问题，你会得到一个 00211。如果程序不在库列表中，你会得到一个 00211。如果程序异常结束（比如由于转义消息） ) 你得到一个 00211。如果你需要知道*CALL*失败的原因，你需要询问作业日志/程序消息队列。

对于文件错误，[文件信息数据结构](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=/rzasd/sc092508135.htm)会记录错误代码。文件错误是指违反引用约束或永久 I/O 错误。同样，这些[文件状态代码](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=/rzasd/sc092508147.htm)不是很精细，如果您需要知道您的权限失败，您需要从作业日志中找出。

关于文件错误的一个注释。当您编写自己的错误处理程序（[文件异常错误子例程](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/rzasd/sc092508148.htm#fiexsub)）时，您需要注意此处理程序在循环打开文件之前不会变为活动状态。这意味着如果您让循环打开文件，您将无法捕获诸如“文件不在库列表中”或“未授权文件”之类的错误。为了捕获在打开时发生的错误，您需要自己打开文件，通过 OPEN 操作码。不要忘记关闭它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T15:07:52.150

使用[错误处理操作](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/rzasd/sc092508771.htm#yyerror)和/或[程序异常子例程和程序状态数据结构](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/rzasd/sc092508149.htm#progxpe)来捕获和解释特定的错误条件。

# php - 在下午 6 点到上午 8 点之间展示新设计

> ID：13160763
> 
> 赞同：1
> 
> 时间：2012-10-31T14:54:36.693
> 
> 标签：php, time

是的，我不是这个的忠实粉丝，所以请不要因为这个问题而把我列为这个问题，因为客户想要这个功能......不是我。

我有设计 A（浅色版本或网站），当他们访问 www.example.com 时会正常展示，但在每天下午 6 点到早上 8 点，客户想要展示设计 B（深色版本）。

这可以使用 PHP 完成吗？类似这样的东西：

```
<?php if the time right now is between 6pm and 8am { ?>
    Display Design B
<?php } else { ?>
    Display Design A
<?php }?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:09:24.683

```
<?php
date_default_timezone_set("Europe/Isle_of_Man");
$imgfolder = "standard";
if(intval(date('H')) >= 18 || intval(date('H')) <= 8){ 
    $imgfolder = "dark";
    ?>
    <link rel= "stylesheet" type="text/css" href="dark.css" />
<?
}else{ 
    $imgfolder = "standard";
    ?>
    <link rel= "stylesheet" type="text/css" href="standard.css" />
<?
} 
```

要加载图像，您可以使用：

```
<img src = "images/<?echo $imgfolder; ?>/header.jpg"... 
```

您的图像应分别存储在`images/standard/`和`images/dark`中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:23:51.583

你说你想要改变特定的图像，我可能会使用一个函数，

```
<?php
function chooseImage($image1, $image2){
    if(date("H") >= 8 && date("H") < 18 ){ ?>
        return '<img src="'.$image1.'" alt="Daytime Image" \>';
    <?php } else { ?>
    return '<img src="'.$image2.'" alt="Nighttime Image" \>';
<?php }?> 
```

将它放在页面中的某个位置，然后无论您想要更改图像的任何位置，您都可以简单地调用该函数并将 2 个将作为变量更改的图像传递：

```
<?php chooseImage(image1.jpg,image2.jpg);?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T14:57:16.900

您可以使用日期函数来执行此操作。但是这个日期函数会回显你的服务器时区。如果您想在 gmt 中使用时间，请使用 gmdate()。

```
<?php if(date("H") > 18 && date("H") < 08 ){ ?>
    Display Design B
<?php } else { ?>
    Display Design A
<?php }?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T14:58:14.620

我喜欢这个概念，很高兴听到别人这样做！

无论如何，希望您的网站是围绕 CSS 设计的。在这种情况下，您的答案在于在必要时切换正确的 CSS 文件。请注意，大多数浏览器都会缓存 CSS，因此通过向 CSS 文件的请求添加任意参数来使用缓存破坏器：

```
<?php if(date("H") >= 18 && date("H") < 8 ){ ?>
    <style src="dark.css?r=<?php echo md5(rand().microtime()); ?>" />
<?php } else { ?>
    <style src="light.css?r=<?php echo md5(rand().microtime()); ?>" />
<?php }?> 
```

有很多内联 IMG 标签？最好的解决方案是在 CSS 中重新实现它们。否则：

```
<?php
$sheet_time = (date('H') >= 18 && date('H') < 8) ? 'dark' : 'light';
?>
<img src="images/<?php echo $sheet_time; ?>/foo.jpg" /> 
```

自然地将所有图像拆分为暗/亮目录（即使您在 CSS 中实现也需要这样做）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T14:58:41.173

```
<?php

date_default_timezone_set('Europe/London');

$hour = (int) date('H');
if (($hour > 8 && $hour < 18)) {
    // it's past 8 AM and less then 6 PM
    $daytime_design = true;
    $resource_path = 'day';
}
else {
    // the other hours, 6 PM to 8 AM the next day
    $daytime_design = false;
    $resource_path = 'night';
}
?> 
```

很久以后在我们的 template.tpl.php 或其他

```
<!doctype html>
<head>
<meta charset="utf-8">
<title></title>
<link rel="stylesheet" href="/css/<?=$resource_path;?>/style.css">
</head>
<body>

<?php 
if ($daytime_design === true) {
    echo 'Good Day!';
}

if ($daytime_design === false) {
    echo 'Only shows for night design, <img src="special-night-image.jpg">';
}

?>

This will show /images/day/logo.jpg or /images/night/logo.jpg
<img src="/images/<?=$resource_path;?>/logo.jpg"> 

</body>
</html> 
```

# knockout.js - 淘汰赛，在 observableArray 中找到值的最佳方法是什么

> ID：13160764
> 
> 赞同：12
> 
> 时间：2012-10-31T14:54:41.797
> 
> 标签：knockout.js, knockout-2.0

我有一个 observableArray，我有一个名字“Zippy”，我需要检查它是否在数组中。如果这个名字存在，我需要得到它的类型。我该怎么做？

```
// This observable array initially contains three objects
var anotherObservableArray = ko.observableArray([
    { name: "Bungle", type: "Bear" },
    { name: "George", type: "Hippo" },
    { name: "Zippy", type: "Unknown" }
]); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-31T15:02:31.873

试试这个，你可以使用`ko.utils.arrayFirst`函数来检查你的自定义逻辑的元素..

```
var name = "Zippy";
var match = ko.utils.arrayFirst(anotherObservableArray(), function(item) {
    return item.name == name;
});

var type;

if(match)
   type = match.type 
```

# php - 我的 .htaccess 重定向重定向到错误的网址

> ID：13160766
> 
> 赞同：0
> 
> 时间：2012-10-31T14:54:44.293
> 
> 标签：php, .htaccess, magento

我最近将 wordpress 网上商店转换为 magento 网上商店。现在我希望搜索引擎索引的所有旧网址都重定向到来自 magento 的新网址。由于它只有大约 150 种产品，我想我会手动完成。

这是我为所有产品尝试过的：

```
Redirect 301 /products-page/accu/unibat-ctz5s-bs/ http://www.domain.nl/accu-s/unibat-ctz5s-bs.html 
```

它确实尝试重定向，但最终出现在以下 URL： http: [//www.domain.nl/accu-s.htmlunibat-ctz5s-bs/](http://www.domain.nl/accu-s.htmlunibat-ctz5s-bs/)，它给出了 404 :(

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T06:45:00.863

听起来您的 htaccess 末尾的 mod_rewrite 规则正在干扰您的 mod_alias 指令（`Redirect`语句）。在这种情况下，您需要进行重定向，然后跳出 URL/文件映射管道，并且由于 mod_rewrite 和 mod_alias 都在管道中完成它们的工作，它们都破坏了 URI。只需坚持使用 mod_rewrite，将所有语句更改为：

```
RewriteRule ^/?products-page/accu/unibat-ctz5s-bs/$ http://www.domain.nl/accu-s/unibat-ctz5s-bs.html [L,R=301] 
```

这些需要先*于*您的任何其他规则。但也要记住，`Redirect`语句的工作方式与使用`RewriteRule`. 将`Rewrite`2 个 URI 路径节点“链接”在一起。所以像：

```
Redirect 301 /foo http://www.domain.nl/bar 
```

将链接`/foo`在一起`/bar`，因此请求`/foo/blah/blah.html`将重定向到`http://www.domain.nl/bar/blah/blah.html`. 为了将此功能转换为您需要的重写规则：

```
RewriteRule ^/?foo(.*)$ http://www.domain.nl/bar$1 [L,R=301] 
```

# asp.net - 将 JSON 对象传递给 PageMethod 在 DEV 中有效，而不是在 PROD 中

> ID：13160767
> 
> 赞同：0
> 
> 时间：2012-10-31T14:54:45.960
> 
> 标签：asp.net, ajax, json, nullreferenceexception, pagemethods

我有一个 PageMethod 和一个对该方法的 AJAX 调用，该方法传递了一系列产品 SKU 和请求的 SKU 的数量。它在 DEV(IIS7) 中运行良好，但在 PROD(IIS6) 中返回 500 错误：

```
Message: Object reference not set to an instance of an object. 
StackTrace: at ViewProduct.GetInventory(List`1 orderedSkus)
ExceptionType: System.NullReferenceException 
```

这是相关的代码。如果您需要我的 web.config 中的特定片段，我也可以获取这些片段，尽管我没有看到任何对任何东西有任何影响的东西。

我尝试在 PageMethod 中使用两个不同的对象定义，orderedSkus As Object() 和 orderedSkus As List(Of Object)。相同的差异，但也相同的结果...空引用。

**阿贾克斯：**

```
 var editedSkus = [];
    function checkInventory() {
        editedSkus.length = 0;
        var textBoxes = $('input:text', '.table-orderMatrix');
        if (formEdited(textBoxes)) {
            var DTO = { 'orderedSkus': editedSkus };
            $.ajax({
                type: "POST",
                url: BasePath + "ViewProduct.aspx/GetInventory",
                data: JSON.stringify(DTO), 
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                success: function (msg) {
                    var skus = msg.d;
                    $.each(skus, function () {
                        //do stuff
                    });
                }
            });
        } else {
            // Do other stuff
        }
    }

    var formEdited = function (textBoxes) {
        var edited = 0;
        $.each(textBoxes, function (i) {
            if (this.value > 0) {
                var sku = {};
                sku.skuNumber = $(this).prev().val();
                sku.orderAmount = this.value;
                editedSkus.push(sku);
                edited += 1;
            }
        });
        return edited;
    } 
```

**页面方法：**

```
 <WebMethod()> _
Public Shared Function GetInventory(orderedSkus As List(Of Object)) As List(Of Object)
    Dim _skus As SKUCollection
    Dim _sku As SKU = Nothing
    Dim warnings As New List(Of Object)
    Dim qty As Integer
    _skus = CurrentStyle.SKUs

    For Each _orderedSku As Object In orderedSkus
        Dim dicValues As New Dictionary(Of String, Object)()
        dicValues = DirectCast(_orderedSku, Dictionary(Of String, Object))
        Dim orderedSkuNumber As String = dicValues("skuNumber").ToString()
        Dim orderAmount As String = CType(dicValues("orderAmount"), Integer)

        Try
            'Stuff
        Catch ex As Exception
            'Health Monitoring
        End Try
    Next

    Return warnings

End Function 
```

编辑：添加我们的 DEV 服务器正在运行 IIS7（pagemethod 工作的地方）的“次要细节”，而 PROD 仍在 IIS6 下（它不工作）。我知道...不要让我开始。添加这个是因为我觉得它可能对这种情况具有重要意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:55:07.833

我想到了。该对象被很好地传递。但是，PROD 中的 Try...Catch 中的一些代码在 DEV 中运行良好（这与 AJAX 调用完全无关）。反过来，我没有提供适当的错误消息（即使在 Catch 中添加了一些错误处理之后），而是收到了我发送的对象为空的错误。奇怪，但你去。

# iphone - 如何在 iPhone 中播放 MID 文件？

> ID：13160769
> 
> 赞同：4
> 
> 时间：2012-10-31T14:54:45.090
> 
> 标签：iphone, objective-c, ios, ipad

是否可以在 iOS 上播放 MIDI 文件？这将是我试图播放的[MIDI 格式文件。](http://www.mediafire.com/?9m2sq3836xkarna)

哪个框架/库可用于在 iOS 上播放 MIDI 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T15:08:48.123

简短回答：使用 CoreMIDI 框架读取文件，使用 Core Audio 框架来发出声音（您还需要添加 AudioToolbox 框架）。

[这是有关该主题的教程](http://www.deluge.co/?q=midi-driven-animation-core-audio-objective-c)

基本上，您可以使用 AudioToolbox 框架中的 MusicPlayer 对象来读取您的文件，然后使用 MusicPlayer 在 AUSampler 音频单元上播放音符。

# ruby-on-rails - 当使用“find_all_by”时，为什么使用 :order => :title 而不是 :order => title

> ID：13160773
> 
> 赞同：1
> 
> 时间：2012-10-31T14:55:06.340
> 
> 标签：ruby-on-rails, ruby

在查看 haml 文件中，我有一个链接，当您单击时，您将获得按标题或发行日期排序的所有电影。控制器中的代码是：

```
def index
    sort = params[:sort] || session[:sort]
    case sort
    when 'title'
      ordering,@title_header = {:order => :title}, 'hilite'
    when 'release_date'
      ordering,@date_header = {:order => :release_date}, 'hilite'
    end
   # some more codes here
@movies = Movie.find_all_by_rating(@selected_ratings.keys, ordering)
end 
```

如果我改变

`ordering,@title_header = {:order => :title}, 'hilite'`
至

```
 ordering,@title_header = {:order => title}, 'hilite' 
```

它给出了一个错误：

```
undefined local variable or method `title' for #<MoviesController:0xb29a853c> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T14:59:23.713

```
{:order => :title}

{:order => 'title'} 
```

两者都可以。查看此线程以了解字符串和符号[之间的区别：Ruby 中的字符串和符号有什么区别？](https://stackoverflow.com/questions/255078/whats-the-difference-between-a-string-and-a-symbol-in-ruby)

```
{:order => title} 
```

不起作用，因为您试图为哈希键分配一个包含在`title`局部变量中的值，但它不存在，因此它崩溃

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T14:58:33.620

`:title`是一个符号。 `title`是局部变量或方法。

您尚未`title`在此范围内定义，因此您的`undefined local variable or method 'title'`例外。

换句话说，*不要那样做。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T14:59:29.927

您可能想使用`"title"`, 一个字符串...

```
ordering, @title_header = {:order => "title"}, 'hilite' 
```

# android - Android：如何结合充气布局和非充气布局？

> ID：13160775
> 
> 赞同：2
> 
> 时间：2012-10-31T14:55:07.867
> 
> 标签：android, layout, inflate

在我的活动中，我想在顶部显示一些文本视图，然后在它下面膨胀一个列表视图。我尝试了各种方法但均未成功，例如 addview() 但无法使其正常工作。我的膨胀视图成为主要布局。

任何帮助将非常感激。基于 Ted Hopp 解决方案的 LogCat 错误

10-20 02:38:38.322: D/AndroidRuntime(1253): 关闭 VM 10-20 02:38:38.322: W/dalvikvm(1253): threadid=3: 线程退出未捕获异常 (group=0x4001b188) 10 -20 02：38：38.322：E/AndroidRuntime（1253）：未捕获的处理程序：线程主因未捕获的异常而退出 10-20 02：38：38.342：E/AndroidRuntime（1253）：java.lang.RuntimeException：无法启动活动 ComponentInfo{com.example.mycoursetimetable/com.example.mycoursetimetable.MyCourses}：java.lang.IllegalStateException：无法将标题视图添加到列表 - 已调用 setAdapter。10-20 02:38:38.342: E/AndroidRuntime(1253): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496) 10-20 02:38:38.342: E/AndroidRuntime(1253): 在 android. app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512) 10-20 02:38:38.342: E/AndroidRuntime(1253): E/AndroidRuntime(1253): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618) 10-20 02:38:38.342: E/AndroidRuntime(1253): 在 dalvik.system.NativeStart.main （本机方法）10-20 02：38：38.342：E/AndroidRuntime（1253）：原因：java.lang.IllegalStateException：无法将标头视图添加到列表 - 已调用 setAdapter。10-20 02:38:38.342: E/AndroidRuntime(1253): 在 android.widget.ListView.addHeaderView(ListView.java:256) 10-20 02:38:38.342: E/AndroidRuntime(1253): 在 android. widget.ListView.addHeaderView(ListView.java:279) 10-20 02:38:38.342: E/AndroidRuntime(1253): at com.example.mycoursetimetable.MyCourses.onCreate(MyCourses.java:30) 10-20 02: 38:38.342: E/AndroidRuntime(1253): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 10-20 02:38:38.342: E/AndroidRuntime(1253): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459) 10-20 02:38:38.342: E/AndroidRuntime(1253): ... 11 更多 10-20 02:38:38.382: I/dalvikvm(1253 ）：threadid = 7：对信号3 10-20 02：38：38.382做出反应：E/dalvikvm（1253）：无法打开堆栈跟踪文件'/data/anr/traces.txt'：权限被拒绝10-20 02： 38:47.463：I/Process(1253)：发送信号。PID：1253 SIG：9

activity_my_courses

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:id="@+id/main" >

    <Button
        android:id="@+id/labelAddCourseButton"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:onClick="addCourseButton"
        android:padding="10dp"
        android:text="@string/CourseName" />

</LinearLayout> 
```

列表课程

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/listLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/labelModuleCode"
        android:layout_height="wrap_content"
         android:layout_width="wrap_content"
         android:layout_marginLeft="10dp"
        android:text="@string/CourseName"
        android:textSize="10dp" />

     <TextView
        android:id="@+id/labelCourseType"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/CourseType"
        android:layout_marginLeft="10dp"
        android:textSize="10dp" />
</LinearLayout> 
```

代码

```
public class MyCourses extends ListActivity {

    static final String TEST = "com.example.mycoursetimetable.TEST";
    String [] MODULE;

        @Override
        public void onCreate(Bundle savedInstanceState) 
        {
        super.onCreate(savedInstanceState);

        LinearLayout main = (LinearLayout)this.findViewById(R.id.main);
        MODULE = getResources().getStringArray(R.array.module);
        setListAdapter(new ListArrayAdapter(this,MODULE));
        }

        public void addCourseButton (View addCourseButton) 
        {
         Intent intent = new Intent(this,AddCourse.class);
         startActivity(intent);
        }

        protected void onListItemClick(ListView l, View v, int position, long id)
        {
          super.onListItemClick(l, v, position, id);

        try {
            Class test = Class.forName("com.example.MyCourseTimeTable.AddCourse");
            Intent intent = new Intent(MyCourses.this, test);

            TextView textView = (TextView) v.findViewById(R.id.labelModuleCode);
            String module = textView.getText().toString();

            intent.putExtra(TEST,module);
            startActivity(intent);
            }   
                catch (ClassNotFoundException e)
                {
                e.printStackTrace();
                }

        }

}

class ListArrayAdapter extends ArrayAdapter<String> 
{
    //  You only need one copy of LayoutInflater
    private final LayoutInflater inflater;

    //create the ArrayAdpater
    public ListArrayAdapter(Context context, String[] test) 
    {
        super(context, R.layout.activity_my_courses, test);
        inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) 
    {
        ViewHolder holder;
        if(convertView == null) {

            // Inflate the layout that you want for each row

            convertView = inflater.inflate(R.layout.listcourses, parent, false);

            holder = new ViewHolder();
            holder.code = (TextView) convertView.findViewById(R.id.labelModuleCode);
            holder.type = (TextView) convertView.findViewById(R.id.labelCourseType);

            // Add a link for your button as well and define its OnClickListener here to, eventually...

            convertView.setTag(holder);
        }
        else 
            holder = (ViewHolder) convertView.getTag();

        String module = getItem(position);
        //set the text to the string values based on position
        holder.code.setText(module);

        //return the layout
        return convertView;
    }

    class ViewHolder {
        TextView code;
        TextView type;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T15:06:45.400

与其尝试定义自己的活动布局，不如使用如下内容：

```
public class MyCourses extends ListActivity {

    static final String TEST = "com.example.mycoursetimetable.TEST";
    String [] MODULE;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        MODULE = getResources().getStringArray(R.array.module);
        getListView().addHeaderView(getHeader()); // must come before next line
        setListAdapter(new ListArrayAdapter(this,MODULE));
    }

    private View getHeader() {
        LayoutInflater inflater =
            (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
        return inflater.inflate(R.layout.listcourses, null);
    }
    . . .
} 
```

这将使视图在`layout/listcourses.xml`列表的标题中定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:04:34.457

我想你需要`<ListView/>`在 xml 文件中的 textviews 下面有一个 android id 应该是默认`android:id\list`的，其次你需要`setContentView(YOUR LAYOUT FILE)`在你的`onCreate()`

# javascript - 使用 JQM 和 addClass 更改按钮颜色每页仅有效一次

> ID：13160778
> 
> 赞同：1
> 
> 时间：2012-10-31T14:55:15.167
> 
> 标签：javascript, jquery, jquery-mobile

我正在尝试更改移动应用程序按钮的背景。Click 事件似乎太慢了，所以我使用了 vmousedown。这有效，但每页只有一次。我正在做这个。

```
Mousedown
$(.headerNavBar).on('vmousedown','.logout',function() {
$(this).removeClass('ui-bar-c').addClass('ui-bar-c');
});
Mouse UP
$(.headerNavBar).on('vmouseup','.logout',function() {
$(this).removeClass('ui-bar-c');
});
$(.headerNavBar).on('tap','.logout',function() {
$(this).removeClass('ui-bar-c');
}); 
```

HTML 是

```
<li><a href="#" class="logout" data-icon="back" data-theme="b">Log out</a></li> 
```

该按钮位于 JQueryMobile 页面内容块中。

如果有更好的方法来改变背景渐变也很好。

更新：我刚刚在检查器中注意到正在添加和删除该类，它只是没有在页面上更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:56:30.860

使用父元素或文档绑定事件并给出选择器。第二件事你可以检查你是否有 vmousedown，它会是 mousedown 和 vmouseup 相同。

**鼠标按下**

```
$(document).on('vmousedown','.logout', function() {
   $(this).removeClass('ui-bar-c').addClass('ui-bar-c');
}); 
```

**鼠标向上**

```
$(document).on('vmouseup','.logout', function() {
      $(this).removeClass('ui-bar-c');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:59:48.940

```
$('body').delegate('.logout','vmousedown', function() {
   $(this).removeClass('ui-bar-c').addClass('ui-bar-c');
}); 
```

# vba - 更改控件的背景颜色

> ID：13160786
> 
> 赞同：1
> 
> 时间：2012-10-31T14:55:41.077
> 
> 标签：vba, ms-access, ms-access-2010

这个问题与我之前的问题[有关](https://stackoverflow.com/questions/13124482/is-there-a-way-to-apply-theme-on-converted-access-97-form)

**摘要**：我有使用 access 97 制作的表单，但主题对它们不起作用。因为，我更改了每个控件的主题属性，我现在可以在它们上应用主题。

它适用于字体。如您所见，字体会随着主题的变化而变化，就像在 access 2010 中制作的表单一样。

![在此处输入图像描述](../Images/0c822f2c4fe701201a17153f2824885a.png) ![在此处输入图像描述](../Images/55437d3ddf5767ed49bfdb084b7c1fde.png)

但我无法让标签和命令按钮的背景颜色像真正的 access 2010 表单一样工作。

我更改了`backcolor`和`BackThemeColorIndex`属性，但更改主题时颜色保持不变。我错过了其他财产吗？ [这是](http://msdn.microsoft.com/en-us/library/office/ff841398.aspx)MSDN 列表

这是我的脚本中所有属性的列表。

```
myControl.HoverThemeColorIndex = 1
myControl.HoverTint = 100
myControl.HoverForeThemeColorIndex = 1
myControl.HoverForeTint = 100
myControl.HoverShade = 100

myControl.PressedForeThemeColorIndex = 1
myControl.PressedForeTint = 100
myControl.PressedShade = 100
myControl.PressedThemeColorIndex = 1
myControl.PressedTint = 100
myControl.UseTheme = 1 

myControl.ForeThemeColorIndex = 1
myControl.BackThemeColorIndex = 1
myControl.BackColor = RGB(250, 100, 100)
myControl.BackTint = 100
myControl.BackShade = 100

myControl.BorderThemeColorIndex = 0
myControl.BorderTint = 50
myControl.BorderShade = 100

myControl.ThemeFontIndex = 1
myControl.ForeThemeColorIndex = 0
myControl.ForeTint = 75
myControl.ForeShade = 100

myControl.GridlineThemeColorIndex = 1
myControl.GridlineTint = 100
myControl.GridlineShade = 65 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-13T15:57:35.977

尝试将 Gradient 属性更改为 12

例如

```
myControl.Gradient = 12 
```

或者，您可以创建一个新表单并插入按钮，然后复制该按钮并将其临时粘贴到另一个表单上，然后使用格式 Painter 复制属性。

# javascript - 表单提交后 AJAX onchange 行为发生变化

> ID：13160788
> 
> 赞同：1
> 
> 时间：2012-10-31T14:55:48.443
> 
> 标签：javascript, html, css, ajax, asynchronous

```
 <form   action="" name="theForm" method="post">

    ...code for dropdown menus initialized to empty...

    <td colspan="1" width="250">
      <input type="text" id="CAPS_CODE" name="CAPS_CODE" value=""  
        onchange="setF('LALA', this.value)" size="20" maxlength="20"/>

           <div style="display:none;" id="CAPS_CODE$err">

            <span style="color: #FF0000; font-family: Arial, 
              Helvetica, sans-serif; font-size: 10px; 
               font-weight: bold; text-decoration: none;">
            </span>
           </div>
    </td>

    `....form submit button in HTML and function call here - legacy code that works...`

    </form> 
```

基本上这是一个输入文本框。当我输入“ `BMW`”并将光标移动到文本框外单击它时，它会将下拉菜单填充为某些值。这就是我所理解`onchange`的。我提交表单，页面重新加载。

现在，当我尝试在文本框中输入新值时，例如 enter `A`，该值一直被删除。这发生*在*我单击文本框外部之前。这与表单提交后有关吗？

注意：我在我的 JS 函数调用中使用如下 AJAX，如果这有帮助的话..

```
var request = YAHOO.util.Connect.asyncRequest('POST', sUrl, capsCallback, postData); 
```

* * *

```
function setF(group_id, caps){
        var token = document.theForm.sessionToken.value;
        getCarByAjax(token, group_id, caps);              
    }   

function getCarByAjax(sessionToken, group_id, caps){

        top.currentDependencyGroup = group_id;

        //alert("strs= " + strs);
        var entryPoint = '/DropDownList?';

        // entryPoint is the base URL
        if(top.ctx != null && top.ctx != ""){       
            entryPoint = top.ctx + '/DropDownList?';
        }

        var sUrl = entryPoint + encodeURI;

        var postData = 'CAPSVEH=' + caps + '&FROM=' + group_id + '&sessionToken=' + sessionToken;   
        var request = YAHOO.util.Connect.asyncRequest('POST', sUrl, capsCallback, postData);            
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:04:08.223

是的，解决方案在您的 JS 代码中。尝试 onblur 或 JS 代码中的警报进行调试。注意 display.style='none' 和重置 values=''

# php - 在 PHP 和 mySQL 中安全地处理用户输入

> ID：13160789
> 
> 赞同：0
> 
> 时间：2012-10-31T14:55:51.253
> 
> 标签：php, mysql, security, xss, code-injection

> **可能重复：**
> [使用 PHP 清理用户输入的最佳方法是什么？](https://stackoverflow.com/questions/129677/whats-the-best-method-for-sanitizing-user-input-with-php)

我知道类似的问题在这里被问过多次，我花了一些时间阅读所有这些问题，但我仍然不确定我的应用程序是否安全......

我正在构建的网站允许用户将内容发布到数据库中，编辑自己的帖子，搜索其他帖子，并显示其他用户的帖子。显然，有一大堆用户输入和表单数据等等，我必须确保它们是安全的。

所以这是我的流程目前的工作方式：

1.  用户将他们的数据输入到 HTML 表单中，这些表单将转换为 $_POST 数据。
2.  posthandler.php 文件将所有 $_POST 数据转换为 $_SESSION 数据
3.  $_SESSION 数据被转换成 $this-> 类变量
4.  $this-> 类变量在 mySQL 查询中使用并输入到数据库中
5.  从数据库中，数据以 HTML 格式显示。

我必须采取哪些措施来确保我的网站的安全？（防止代码注入和XSS）

现在我的想法是这样的，如果我错了，请纠正我：

*   对于 1\. 我无法控制，数据完全易受攻击。

*   因此在 2\. 我必须检查数据是否与我期望的某些模式匹配（检查它是否是数字，检查它是否是一个日期，检查它是否只是字母，检查它是否是我提供的数组中的一个值，使用常规表达式，...）这样我可以防止，例如，如果我期望一个介于 1 和 10 之间的值，并且有人说“'--DROP table;” 相反，我已经确保这些字段是安全的。当然，不像用户可以输入消息的文本框那样限制性强的字段仍然容易受到攻击。

*   对于步骤 3。如果我在之前的步骤中做的一切都正确，我应该不需要做任何事情，对吧？攻击者不应该能够更改 SESSION 数据或类变量，除非服务器端存在重大安全漏洞，我的托管服务提供商应该对此负责，对吗？

*   在执行查询的第 4 步中，我需要使用 mysqli_real_escape_string() 转义数据，以确保数据不作为命令处理。

*   在第 5 步中。我计划将每个特殊字符转换为它们各自的 HTML 代码片段。所有`"`将被转换`&quot;`为例如。

我应该在每个步骤中应用任何其他安全措施/过滤器吗？

如果我在步骤 2 中犯了错误怎么办。）或者我无法找到某个字段的正则表达式。我只是从 $_POST 转换为 $_SESSION 而无需进一步验证。在查询期间使用 mysqli_real_escape_string() 并在所有字符显示在浏览器中之前过滤它们是否会节省我的精力？

我期待你的见解！

# html - CSS - Dreamweaver 中的设计视图可以，但在浏览器中不行

> ID：13160792
> 
> 赞同：0
> 
> 时间：2012-10-31T14:55:56.730
> 
> 标签：html, css, dreamweaver, margin

所以，我有这个 css 代码来格式化一个 html 页面。问题是，当我在浏览器中查看页面时，我认为它根本没有格式化。div 的titulo 和titulo2 是简单的文本行，而formulario 的div 是一种形式。我希望表单以页面为中心，左右边距自动。

谢谢

```
 @charset "utf-8";
    /* CSS Document */

    #titulo{
        background:white;
        text-align:center;
    };

    #titulo2{
        background:white;
        text-align:center;
    };

   #formulario{
        margin-left: auto ;
        margin-right: auto ;
        width: 400px;
        display: inline-block;
    }; 
```

好的，这是我的html：

```
<body>

<p>
<div id="titulo">Área Pessoal</div>
</p>

<p>
<div id="titulo2">Registo de Saídas</div>
</p>

<div id="formulario"><form>

<p>
<label>Data e hora : <input /></label>
</p>

<p>
<label>Morada : <input /></label>
</p>
<p>
<label>Localização Geográfica : <input /></label>
</p>

<p>
<label>Tipo de saída : <input type="radio" name="tipo" value="Sozinho" />Sozinho</label><input type="radio" name="tipo" value="Acompanhado" />Acompanhado</label>
</p>

<p>
<label>Condições Atmosféricas : <input /></label>
</p>

<p>
<label>Altura da maré : <input type="radio" name="mare" value="Alta" />Alta</label><input type="radio" name="mare" value="Baixa" />Baixa</label>
</p>

<p>
<label>Temperatura da Água : <input  /></label>
</p>

<p>
<label>Visibilidade Dentro de Água :  <input type="radio" name="visibilidade" value="Boa" />Boa</label><input type="radio" name="visibilidade" value="Má" />Má</label>
</p>

<p>
<label>Peixes Capturados : </label>
</p>
<p>
<label>espécies <input type="text" /></label>
</p>
<p>
<label>compimento <input type="text" /></label>
</p>
<p>
<label>peso <input type="text" /></label>
</p>
<p>
<label>Upload Ficheiros Multimédia :<br />
  <input type="file" name="ficheiro" multiple>
    </label>

  <p><input type="submit" value="Enviar"><input type="reset"></p>

</form></div>

<p>
<label><a href="historico_saidas.html">Histórico de Saídas</a></label>
</p>
<p>
<label><a href="estatisticas.html">Estatisticas</a></label>
</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:00:44.977

好的，1) 永远不要将 Dreamweaver 用作查看 HTML/CSS 是如何编译的来源，始终在浏览器中运行它......太多的理由要讨论。2）您需要将表单包装在一个 div 元素中，并为其分配一个设定的宽度（和高度取决于您的表单的设置方式）。完成后，为 div 分配 margin:auto 属性...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T22:37:15.817

链接标签可能具有相对于根的引用。

例如，如果我有这个：

```
includes/gallery.css 
```

那么链接可能如下所示：

```
<link href="/includes/gallery.css" rel="stylesheet" type="text/css" /> 
```

如果“gallery.css”文件不在以下位置，这将无法正确呈现：

```
[root directory]/includes/gallery.css 
```

要解决此问题，可以在路径中添加一个句点，如下所示：

```
<link href="./includes/gallery.css" rel="stylesheet" type="text/css" /> 
```

或像这样删除初始的正斜杠：

```
<link href="includes/gallery.css" rel="stylesheet" type="text/css" /> 
```

这适用于从包含目录向上一个目录的 html 页面。例如，对于 index.html 页面：

![示例 Web 文件夹结构](../Images/688659f7e6ccae031f2304f69272c47d.png)

本例浏览器定位gallery.css文件的方式如下：

1.  从 index.html 当前所在的目录（站点）
2.  下移一级到目录“includes”
3.  获取文件“gallery.css”

我希望这有帮助。

问候 - 韦恩·里斯特勒

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T14:59:01.750

这可能很明显，但是您的 div 标记是否正确？例子`<div id="titulo"></div>`

您在样式之后有结束标签，但之后最简单的方法可能是用 div 包装所有内容

```
#titulo { background:white; text-align:center; } 
#titulo2{ background:white; text-align:center; } 
#formulario{ margin-left: auto ; margin-right: auto ; width: 400px; display: inline-block; }
.wrapper{ width:600px; margin:0 auto; } 
```

HTML：

```
<div class="wrapper"> 
<div id="titulo"><p>Área Pessoal</p></div> 
<div id="titulo2"><p>Registo de Saídas</p></div> 
<div id="formulario"> 
```

ETC..

# php - 导出 mysql 查询列标题

> ID：13160793
> 
> 赞同：0
> 
> 时间：2012-10-31T14:56:06.853
> 
> 标签：php, codeigniter, csv

我有以下查询...

```
 public function get_invoice_user_summary_csv($invoice_table_id)
    {
    $sql_get_user_summ = "
                            SELECT `billingHistory`.`$invoice_table_id`.userId as userId, ipCore.users.firstname, ipCore.users.surname, COUNT(`billingHistory`.`$invoice_table_id`.id) AS totalNum, SUM(`billingHistory`.`$invoice_table_id`.durationSeconds) AS totalDuration, (SUM(`billingHistory`.`$invoice_table_id`.priceMin)+SUM(`billingHistory`.`$invoice_table_id`.priceCon)) AS totalCost
                            FROM `billingHistory`.`$invoice_table_id`
                            LEFT JOIN ipCore.users ON `billingHistory`.`$invoice_table_id`.userId = ipCore.users.id
                            GROUP BY userId
                            ORDER BY ipCore.users.surname ASC, ipCore.users.firstname ASC;";

    $query = $this->db_mtvm->query($sql_get_user_summ);
    if($query->num_rows() > 0)
        {
        foreach ($query->result_array() as $row)
            {
            $line = '';
            $value = '';
            foreach($row as $value)
                {
                if((!isset($value)) || ($value == ""))
                    {
                    $value = ",";
                    }
                else
                    {
                    $value = str_replace( '"' , '""' , $value );
                    $value = '"' . $value . '"' . ",";
                    }
                $line .= $value;
                }
            print substr(str_replace("\r", "", trim($line)), 0, -1)."\r\n";
            flush();
            ob_flush();
            }
        }
    else return false;
    } 
```

这个返回格式的 csv 数组放在不同的控制器中。

然而，它只是数据的主体（正如我所料）。但是，我已经阅读了一些我认为类似的问题，但在这个示例中我需要放置列标题的地方并不能完全解决。要么手动输入，要么我将从 sql 查询中分配这些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:10:15.617

您现在通过执行以下操作循环遍历结果：

```
foreach ($query->result_array() as $row) 
```

您应该更改脚本，以便在此循环的第一次迭代中获取列标题并输出它们。一种快速的方法是将我上面引用的行更改为：

```
$i = 0;
foreach ($query->result_array() as $row)
{
    if($i === 0)
        echo implode(",", array_keys($row)) . "\r\n";
    $i++;
    [...] 
```

我注意到您正在自己创建 CSV 字符串。一种更简单的方法是使用[`fputcsv()`](http://www.php.net/fputcsv). 默认情况下，它写入文件句柄，但您也可以在内存中缓冲输出并将结果作为字符串获取，[如本例所示](http://www.php.net/manual/en/function.fputcsv.php#74118)。

# c# - 如何在 Visual c# 2010 数据集中使用 IN 子句？

> ID：13160794
> 
> 赞同：0
> 
> 时间：2012-10-31T14:56:11.407
> 
> 标签：c#, .net, visual-studio-2010, c#-4.0, dataset

我已经制作了一个数据集，需要使用**IN**子句，如下例所示

这是我的查询：

```
select field1,field2 from tablename where id **IN** (@ids) 
```

对于上述查询，id参数的数量不固定，并且每次都在变化

现在我想在数据集中使用它。

我不知道怎么用

我需要在 Visual Studio 2010 数据集环境中使用 IN。

我想知道如何将@ids 替换为 1、2、3、4，...？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T14:58:27.557

您可以使用`LINQ to DataTable`：

```
var list = new[] { 1, 2, 3, 4, 5 };
var result = dataTable.AsEnumerable()
                      .Where(row => list.Contains(row.Field<int>("Id")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:46:28.730

试试这个方法

```
 public DataSet GetDataSet(string ConnectionString, string SQL)
{
    SqlConnection conn = new SqlConnection(ConnectionString);
    SqlDataAdapter da = new SqlDataAdapter();
    SqlCommand cmd = conn.CreateCommand();
    cmd.CommandText = "YOU SQL QUERY WITH WHERHE";
    da.SelectCommand = cmd;
    DataSet ds = new DataSet();

    conn.Open();
    da.Fill(ds);
    conn.Close();

    return ds;
} 
```

# javascript - 需要在 Google Script 中回调一个数组

> ID：13160805
> 
> 赞同：0
> 
> 时间：2012-10-31T14:56:31.890
> 
> 标签：javascript, arrays, callback, google-apps-script

我试图通过回调发送一个数组并且没有运气。让我解释一下我的意图，也许那里的专家可以给我一些关于如何解决这个困境的想法。

我创建了一个收集数据的电子表格。然后，我有一个 UI 脚本，它通过单击复选框将行数据拉入弹性表中，供用户处理。我创建了一个单独的弹性表，其中包含用户选中或留空的复选框。在我的脚本中，我需要发送一个包含复选框条件的数组。为什么？因为我还需要可以推送到电子表格的行号或数组位置，以便为数据发送正确的更新状态。

该脚本仅将需要操作的数据拉入 UI。因此，我可能正在处理电子表格的第 1、3、4、5 和 8 行，但在 UI flextable 上，与数据对应的行是第 1、2、3、4、5 行，因此行分配不会匹配。但是，如果我使用数组，我可以捕获拉出的行是 1、3、4、5 和 8，然后相应地更新电子表格。

但是，当我尝试回调标记为 offset[inc] 的数组时，这就是问题我无法让它工作我得到运行错误，找不到方法 addcallback 并且无法让它工作。

关于如何通过 addcallback 方法发送数组的建议或替代建议将不胜感激。

谢谢，

肖恩·纳兹曼

```
function doGet(e){
  var app = UiApp.createApplication();

  //Create Caption Panel
  var captionPanel = app.createCaptionPanel('Detention   Attendance').setWidth('350px').setHeight('75px').setStyleAttribute('fontWeight', 'bold').setStyleAttribute('fontSize', '24px');

  //Add a widget to caption panel
  captionPanel.add(app.createLabel("Please enter attendance for Detention by clicking the     checkbox next to the student's name if they were present. Then click Sumbit."));

  //add the caption panel to the application  
  app.add(captionPanel);

  var panel = app.createHorizontalPanel();
  var flexTable = app.createFlexTable().setStyleAttribute('border', '2px solid black')
      .setStyleAttribute('borderCollapse','collapse')
      .setBorderWidth(2)
      .setCellSpacing(50)
      .setCellPadding(6); 

  //Get Data from spreadsheet
  var spreadsheetId = '0Aup0nXQ4K-pydFREb1FFcTFYX3lOenNQenR1Q01jQ1E';   //Change this to     the Spreadsheet ID
  var dataArray = getData(spreadsheetId);
  var inc = 1;
 //Load data into table cells
   for (var row = 0; row<dataArray.length; row++) {
      var booleanCheck =  dataArray[row] [17];
      var offset = new Array();

      if (booleanCheck == "" || booleanCheck == "Date Served") {
         if (row > 0) {
         Logger.log("Row value = " + row);      
         var ticketDate = dataArray[row] [0];
         var dateStamp = Utilities.formatDate(new Date(ticketDate), "America/Chicago", "MM/dd/yyyy");

         dataArray[row] [0] = dateStamp;
         var ticketDate2 = dataArray[row] [16];
         var dateStamp2 = Utilities.formatDate(new Date(ticketDate2), "America/Chicago", "MM/dd/yyyy");
         dataArray[row] [16] = dateStamp2;
         flexTable.setText(row, 1, dataArray[row][2].toString());
         flexTable.setText(row, 0, dataArray[row][0].toString());
         flexTable.setText(row, 2, dataArray[row][16].toString());  
         offset[inc] = row; inc++;
         Logger.log('Inc variable = ' + inc);
         Logger.log('Offset = ' + offset[inc-1]);
     } else {
         Logger.log("Inside ELSE row is not > 0");
         Logger.log("Row value here = " + row);
         flexTable.setText(0, 1, "Student's Name").setStyleAttribute(0, 1, 'fontWeight', 'bold');
         flexTable.setText(0, 0, "Date Assigned").setStyleAttribute(0, 0, 'fontWeight', 'bold');
         flexTable.setText(0, 2, "Date Delinquent").setStyleAttribute(0, 2, 'fontWeight', 'bold');    
       }  
     }
   }
  Logger.log(offset);
  panel.add(flexTable);

  var check1 = app.createCheckBox().setName('ch1');  
  var check2 = app.createCheckBox().setName('ch2');
  var check3 = app.createCheckBox().setName('ch3');
  var check4 = app.createCheckBox().setName('ch4');
  var check5 = app.createCheckBox().setName('ch5');
  var check6 = app.createCheckBox().setName('ch6');
  var check7 = app.createCheckBox().setName('ch7');
  var check8 = app.createCheckBox().setName('ch8');
  var check9 = app.createCheckBox().setName('ch9');
  var submitButton = app.createButton("Submit");
  var handler = app.createServerClickHandler('updateStatus');
  handler.addCallbackElement(check1)
    .addCallbackElement(check2)
    .addCallbackElement(check3)
    .addCallbackElement(check4)
    .addCallbackElement(check5)
    .addCallbackElement(check6)
    .addCallbackElement(check7)
    .addCallbackElement(check8)
    .addCallbackElement(check9)
    .addCallbackElement(offset);
  submitButton.addClickHandler(handler);
  handler.addCallbackElement(check1)
     .addCallbackElement(check2)
     .addCallbackElement(check3)
     .addCallbackElement(check4)
     .addCallbackElement(check5)
     .addCallbackElement(check6)
     .addCallbackElement(check7)
     .addCallbackElement(check8)
     .addCallbackElement(check9)
     .addCallbackElement(offset);

  var table = app.createGrid(11,1).setStyleAttribute('border', '2px solid black')
      .setStyleAttribute('borderCollapse','collapse')
      .setBorderWidth(2)
      .setWidth('75px')
      .setCellSpacing(5)
      .setCellPadding(6);
   table.setStyleAttributes({textAlign: "center"});
   table.setStyleAttribute('fontWeight', 'bold').setText(0, 0, 'Attendance');
   table.setWidget(1,0, (check1));
   table.setWidget(2,0, (check2));
   table.setWidget(3,0, (check3));
   table.setWidget(4,0, (check4));
   table.setWidget(5,0, (check5));
   table.setWidget(6,0, (check6));
   table.setWidget(7,0, (check7));
   table.setWidget(8,0, (check8));
   table.setWidget(9,0, (check9));
   table.setWidget(10,0,(submitButton));

   panel.add(table);
   app.add(panel);
   app.close();
   return app;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T05:59:18.040

我通常做的是将数组转换为字符串并将其写入[小部件的 tag](https://developers.google.com/apps-script/reference/ui/check-box#setTag%28String%29)。`e.parameter.widgetName_tag`然后我可以在处理函数中使用它来检索它。此时我可以拆分它以取回数组：`e.parameter.widgetName_tag.split(',');`

`join`选择and字符时必须小心，`split`因为您的数据可能包含逗号（这是数组中的默认分隔符）...我经常使用 | 或任何其他“不常见”字符 (Ë,Í;Δ) 与 and 结合使用`join('∆')`，`split('∆')`因此我确信我会按应有的方式恢复数组。

当然，小部件必须包含在 中，`callBackElement`但这很容易通过使用最高级别的父 UiApp 元素 as 来实现`callBackElement`。

最后一条评论：尝试使用可以简化您的生活的小部件 ID...例如，使用包含与数组索引（chk0、chk1、chk2...）相对应的数字的 ID，以便您可以轻松检索要使用的数值在你的处理函数中使用类似这样的东西：

`Number(e.parameter.source.replace(/[a-z]/ig,''))`

这将为您提供一个数字，该数字标识哪个`checkBox`是处理程序调用的来源，因此您可以编写：

```
var arrayElement = e.parameter.widgetName_tag.split(',')[Number(e.parameter.source.replace(/[a-z]/ig,''))]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-28T15:21:34.797

```
var array = ['foo','poo'];
var arrayString = JSON.stringify(array); 
```

那时，只需将 arrayString 附加到回调元素，瞧！然后在 handlerFunction 中，使用 e.parameter.arrayString 访问它，然后解析它以将其返回到一个数组，如下所示：

```
var array = JSON.parse(e.parameter.arrayName);
//array = ['foo','poo'] 
```

# c# - 不能在 MonoTouch 的 NavigationItem.RightBarButtonItems 中放置两个按钮

> ID：13160815
> 
> 赞同：2
> 
> 时间：2012-10-31T14:57:15.993
> 
> 标签：c#, iphone, ios, xamarin.ios, uibarbuttonitem

在我的项目中，我需要在视图控制器的`UIBarButtonItem`a 中添加两个 s 。`NavigationItem`我用这段代码解决了这个问题：

```
UIBarButtonItem saveButton = new UIBarButtonItem("Save", UIBarButtonItemStyle.Bordered, (sender, e) => {
    //一些保存代码...
    });
    UIBarButtonItem delButton = new UIBarButtonItem("Delete", UIBarButtonItemStyle.Done, (sender, e) => {
    //一些删除代码...
    });
    UIBarButtonItem[] 项 = 新 UIBarButtonItem[]
    {
        保存按钮，
        删除按钮
    };
    this.NavigationItem.RightBarButtonItems = 项目；

```

它在以前版本的 MonoTouch 中工作（在 iOS 5 上，设备和模拟器），但是（我认为是这样）在我升级到 MonoTouch 6 后，只显示数组中的第一个按钮。我尝试使用`NavigationItem.SetRightBarButtonItems(items, false)`方法，但没有任何效果。

这是一个常见问题还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:10:24.587

> 这是一个常见问题还是我做错了什么？

Touch.Unit，MonoTouch 的单元测试运行程序`RightBarButtonItems`，与 MonoTouch 6.0.x 一起使用并正常工作（显示两个按钮）。

OTOH 我在您的代码片段中没有发现任何问题（但它很短）。最好的办法是创建一个小型的、自包含的应用程序来显示您的问题并将其附加到[错误报告](http://bugzilla.xamarin.com)中。我们将能够查看它并查看问题所在（或者您可能会在执行测试用例时自己发现问题，如果它在您自己的代码中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T07:29:55.930

好的，情况就是这样。我的问题中描述的情况发生在您已经`UISegmentedControl`在`navigationItem.TitleView`. 在这种情况下，当你设置`navigationItem.RightBarButtonItems`了一个数组`UIBarButtonItems`并且空间不足以显示一个`navigationItem.TitleView`和两个右按钮时，iOS 只渲染数组的第一个按钮并丢弃另一个。我在本机 ObjC 应用程序中验证了这一点，并得到了相同的行为。

# mysql - 扩展作为多列主键一部分的列对索引的影响

> ID：13160816
> 
> 赞同：3
> 
> 时间：2012-10-31T14:57:18.863
> 
> 标签：mysql, database-performance

我需要在一个很大的表（~90M 行）中扩展一列。（MySQL 5.1，InnoDB）

这是一个 varchar(15) 列，需要扩展到 varchar(20)。此列是主键的一部分。

我在 mysql 文档中做了一些阅读，看起来将为该进程创建一个临时表，最后将完成交换。所以它不会锁定表。

但是索引重建会是什么样子？我认为它是否必须修改？

它会“一边”重建然后交换，所以没有重大影响吗？

一旦进行了更改，我就会担心性能。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:17:23.103

似乎没有人知道答案，所以我联系了 MySQL 社区论坛。这是线程： http: [//forums.mysql.com/read.php?22,572693,572865#msg-572865](http://forums.mysql.com/read.php?22,572693,572865#msg-572865)

在快捷方式中：

在将数据复制到临时表的过程中会重新创建索引。它将在表交换期间到位。

# c++ - 类层次结构中完美转发构造函数和复制构造函数之间的冲突

> ID：13160826
> 
> 赞同：7
> 
> 时间：2012-10-31T14:57:56.070
> 
> 标签：c++, c++11, copy-constructor, sfinae, perfect-forwarding

我最近在尝试使用完美的转发构造函数实现类层次结构时遇到了一个问题。考虑以下示例：

```
struct TestBase {
  template<typename T>
  explicit TestBase(T&& t) : s(std::forward<T>(t)) {} // Compiler refers to this line in the error message

  TestBase(const TestBase& other) : s(other.s) {}

  std::string s;
};

struct Test : public TestBase {
  template<typename T>
  explicit Test(T&& t) : TestBase(std::forward<T>(t)) {}

  Test(const Test& other) : TestBase(other) {}
}; 
```

当我尝试编译代码时，出现以下错误：

> 错误 3 错误 C2664: 'std::basic_string<_Elem,_Traits,_Alloc>::basic_string(const std::basic_string<_Elem,_Traits,_Alloc> &)' : 无法将参数 1 从 'const Test' 转换为 'const std ::basic_string<_Elem,_Traits,_Alloc> &'

我的理解是编译器将完美的转发构造函数视为比复制构造函数更好的数学。参见例如[Scott Meyers: Copying Constructors in C++11](http://scottmeyers.blogspot.de/2012/10/copying-constructors-in-c11.html)。在其他没有类层次结构的实现中，我可以通过 SFINAE 禁用完美转发构造函数作为复制构造函数。例如，参见[Martinho Fernandes：转发构造函数的一些陷阱](http://rmartinho.github.com/2012/06/05/is_related.html)。当我尝试将上述解决方案应用于此示例时，我仍然无法使用相同的错误消息进行编译。

我认为一种可能的解决方案是避免完美转发，在构造函数中按值获取参数，而不是从它们移动到类变量。

所以我的问题是这个问题是否有其他解决方案，或者在这种情况下是否不可能完美转发？

**更新：** 原来我的问题很容易被误解。所以我会试着澄清一下我的意图和背景。

*   代码是完整的，就像问题中发布的一样。没有创建其他对象或调用函数。尝试编译发布的示例时出现错误。
*   拥有完美的转发构造函数的目的是用于成员初始化，而*不是*拥有某种额外的复制构造函数。这里的原因是在使用临时对象初始化成员时保存一些对象副本（正如 Scott Meyers 在会谈中提出的那样）
*   不幸的是，事实证明，完美的转发构造函数可能与其他重载的构造函数发生冲突（在此示例中为复制构造函数）。
*   就像建议的这个问题的答案和评论一样：这里可能的解决方案是引入显式强制转换或具有单独的非模板构造函数（即，关于具有两个分别带有参数`const string&`和的构造函数的示例`string&&`）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:18:49.430

尝试更改`Test(const Test& other) : TestBase(other) {}`为`Test(const Test& other) : TestBase(static_cast<TestBase const&>(other)) {}`

第二个`Test`构造函数调用TestBase，有两种可能。其中一个需要任何东西，另一个需要一个TestBase。但是你正在通过一个测试——“任何东西”匹配得更好。通过显式转换为 TestBase const&，我们应该能够得到正确的匹配。

另一种可能性可能涉及如何构造 Test —— 也许您传入的内容与模板构造函数匹配到 Test ？我们可以通过从 Test 中删除模板构造函数并查看错误是否消失来测试另一种可能性。

如果是这种情况，为什么您链接的技术（在推断的类型与 Test 匹配时禁用 Test 模板构造函数）不起作用？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:12:44.327

让我们仔细看看错误信息。

`std::basic_string<...>::basic_string(const std::basic_string<...> &) :`

这意味着它适用于`std::string`

`cannot convert parameter 1 from 'const Test' to 'const std::basic_string<..> &`

确实，没有办法从 转换`Test`为`std::string`。但是，`Test`有一个字符串成员，即`std::string s;`.

结论：看起来你忘了`.s`在那个地方添加。大概，它在`s(std::forward<T>(t))`.

另一个可能的原因是构造函数的第一个重载被选中而不是第二个用于复制构造`Test`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T15:47:53.260

以下应该可以工作，并且它不使用显式强制转换：

```
struct Test : public TestBase {
  private: 
  static TestBase const& toBase(const Test& o) { return o; }

  public:
  template <typename T>
  explicit Test(T&& t) : TestBase(std::forward<T>(t)) {}

  Test(const Test& other) : TestBase(toBase(other)) {} 
}; 
```

# php - MYSQL,PHP,MEMCACHED - 显示最近的 20 篇文章以及最近的 4 条评论

> ID：13160827
> 
> 赞同：2
> 
> 时间：2012-10-31T14:57:58.660
> 
> 标签：php, mysql, memcached

我正在分析不同的方法来显示最近的 20 个帖子以及每个帖子的最新 4 条评论。这是一些类似于 facebook 墙的东西，但不会有喜欢、分享和其他任何东西

### 示例表结构

帖子

*   `p_id`=该帖子的编号
*   `user_id`=他们发布的用户
*   `poster_user_id`= 发帖人
*   `post`

评论

*   `comment_id`=该评论的数量
*   `post_id`=评论相关的帖子编号
*   `commenter_user_id`= 发表评论的人
*   `comment`

我想到了这些方法

**1)**查询 POST 表并获取最近的 20 条帖子，将帖子 ID 发送到数据库并从 COMMENT 表中获取评论。但是对于这个总电话将是

*1（帖子）+20（评论）=21 数据库调用*

**2)** 加入 POST 和 COMMENT 表并获取最近 20 个帖子的所有评论，并在显示前一个 POST_ID 时检查，如果相同则不显示帖子，而只显示评论。但这种做法

*获取大量不必要的数据*

**3）**查询POST表并获取最近20个帖子，获取帖子ID，动态构建评论查询（在PHP中创建以下类型的查询）

```
 SELECT comment FROM comments WHERE post_id=<1st latest_id> ORDER BY comment_id desc LIMIT 4
UNION ALL
 SELECT comment FROM comments WHERE post_id=<2nd latest_id> ORDER BY comment_id desc LIMIT 4
UNION ALL
 SELECT comment FROM comments WHERE post_id=<3rd latest_id> ORDER BY comment_id desc LIMIT 4
....................up to 20 
```

在这里你将只有

*1(posts)+1(comment) = 两次数据库调用*

这种方法看起来不错

**4）**使用第三种方法并将结果存储在 memcached 中一分钟或 30 秒。如果用户发表任何评论或新帖子，请使用 jquery 并在浏览器中更新他的条目。如果他按下刷新，则向服务器发送一个标志以再次查询数据库并将它们存储在 memcached 中。

*这种方法在一分钟内只需要 1 或 2 次数据库调用，但用户再次获得一分钟前发布的数据，而不是最近发布的数据 .. 这对于常规论坛来说很好*

**5）**即使不是每分钟查询数据库，第一次从数据库中获取前 20 个帖子并将它们与评论一起保存在 memcached 中。每当用户写新帖子时，从 memcached 中删除第 20 个帖子并将新帖子添加为第 1 个顶部帖子。同样对于评论，请删除第 4 条评论并将新评论附加到帖子中。但这需要一个开发工作。当然，我们必须将记录保存到数据库（或者在需要时可以遵循一些组提交）。

*如果我们编码完美的话，这对我来说似乎是最好的方法*

任何人有任何其他方法或任何良好的链接来实施第 5 种方法？（更新内存缓存）

感谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:57:42.660

使用[用户变量](http://dev.mysql.com/doc/en/user-variables.html)技巧：

```
SELECT   post_id, comment_id
FROM     (
  SELECT   post_id, comment_id,
           @i := IF(@type <=> post_id, @i+1, 0) AS comment_number,
           @p := post_id
  FROM     comments NATURAL JOIN (SELECT * FROM (
             SELECT p_id AS post_id FROM posts ORDER BY p_id DESC LIMIT 20
           ) z) z, (SELECT @type:=NULL) init
  ORDER BY post_id DESC, comment_id DESC
) t
WHERE    comment_number < 4
ORDER BY post_id DESC, comment_id DESC 
```

这仍然需要`t`从所有这些帖子的评论中填充一个临时表，然后过滤（在最外面的查询中）只针对前 4 个。可以通过在 上适当排序的复合索引来避免这种情况`(post_id, comment_id)`：

```
SELECT   post_id, comment_id,
         @i := IF(@type <=> post_id, @i+1, 0) AS comment_number,
         @p := post_id
FROM     comments FORCE INDEX (index_name) NATURAL JOIN (SELECT * FROM (
           SELECT   DISTINCT post_id
           FROM     comments
           ORDER BY post_id DESC
           LIMIT    20
         ) z) z, (SELECT @type:=NULL) init
GROUP BY post_id DESC, comment_id DESC
HAVING   comment_number < 4 
```

# java - StringTemplate 模板的验证

> ID：13160828
> 
> 赞同：0
> 
> 时间：2012-10-31T14:57:59.503
> 
> 标签：java, validation, templates, stringtemplate

我正在使用 StringTemplate v4 并且需要验证用户生成的模板。由于我是 StringTemplate 的新手，我想知道是否有一种简单的方法来验证模板。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:06:43.140

在使用您的标题搜索[google时，第一个点击提示](http://www.google.de/search?q=Validation%20of%20StringTemplate%20Templates)[模板验证](http://www.antlr.org/pipermail/stringtemplate-interest/2009-April/001878.html)和[StringTemplateErrorListener](http://www.stringtemplate.org/api3/org/antlr/stringtemplate/StringTemplateErrorListener.html)。也许，这就是你正在寻找的。

我不知道，这是否是一种简单的方法，因为我从未使用过它。

# java - com.sun.net.ssl.internal.ssl.Provider() 的旧版 Java 代码使用

> ID：13160829
> 
> 赞同：8
> 
> 时间：2012-10-31T14:58:10.503
> 
> 标签：java, ssl, provider, legacy

我正在使用 2003 年的一些代码。有对以下类的引用：

```
new com.sun.net.ssl.internal.ssl.Provider() 
```

它导致错误：

`Access restriction: The type Provider is not accessible due to restriction on required library /Library/Java/JavaVirtualMachines/1.7.0.jdk/Contents/Home/jre/lib/jsse.jar`

有人对使用此类的合适替代方案有任何建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T15:18:33.917

大多数时候，您实际上不需要自己创建或获取提供程序实例。正如[Oracle Providers 文档](http://docs.oracle.com/javase/7/docs/technotes/guides/security/SunProviders.html)所说：

> 通用应用程序不应向特定提供者请求加密服务。那是：
> 
> ```
> getInstance("...", "SunJCE");  // not recommended
>     vs.
> getInstance("...");            // recommended 
> ```

此外，只要有提供程序的重载参数，它往往采用字符串或实例，但字符串（名称）可能更常见。（有时传递实例可能很有用，例如对于某些 PKCS#11 配置，但它不常见。）

关于 Providers的[JCA 文档](http://docs.oracle.com/javase/7/docs/technotes/guides/security/crypto/CryptoSpec.html#Provider)应该很有用。

如果你真的想获得一个特定的实例，你可以使用`Security.getProvider(name)`. 您将在提供程序文档中找到适当的名称。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-01T22:59:15.077

把那行代码扔掉。还要丢弃对`com.sun.net.ssl`包及其子包的任何引用：修复导入，以便它们引用`javax.net.ssl.`

这是 JDK 1.4 之前的代码，从 JSSE 单独下载的日子开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T15:05:28.590

您可以在 Eclipse 首选项中将此变为警告或非事件`Java->Compiler->Errors/Warnings->Deprecated and restricted API`。请注意，正如其他人所说，这不是最佳做法，当您有其他选择时应该避免。

# xslt - XSLT 1.0 - 基于其他 XML 文件中的关系数据转换 XML

> ID：13160833
> 
> 赞同：0
> 
> 时间：2012-10-31T14:58:30.240
> 
> 标签：xslt, xslt-1.0

我需要通过添加一个新元素来转换 XML 文件，该元素的值基于当前文件中的数据和`XML`使用`XSLT 1.0`. 文件：

文件1：

```
<Table>
    <Row>
        <ColA>AValue1</ColA>
        <ColB>BValue1</ColB>
    </Row>
    <Row>
        <ColA>AValue2</ColA>
        <ColB>BValue2</ColB>
    </Row>
</Table> 
```

文件2：

```
<Table>
    <Row>
        <ColA>AValue1</ColA>
        <ColB>BValue1</ColB>
        <ColC>CValue1</ColC>
    </Row>
    <Row>
        <ColA>AValue1</ColA>
        <ColB>BValue1</ColB>
        <ColC>CValue1</ColC>
    </Row>
<Row>
        <ColA>AValue1</ColA>
        <ColB>BValue1</ColB>
        <ColC>CValue2</ColC>
    </Row>
    <Row>
        <ColA>AValue1</ColA>
        <ColB>BValue1</ColB>
        <ColC>CValue3</ColC>
    </Row>
    <Row>
        <ColA>AValue2</ColA>
        <ColB>BValue2</ColB>
        <ColC>CValue1</ColC>
    </Row>
</Table> 
```

文件3：

```
<Table>
    <Row>
        <ColC>CValue1</ColC>
        <ColD>ABC</ColD>
    </Row>
    <Row>
        <ColC>CValue2</ColC>
        <ColD>DEF</ColD>
    </Row>
    <Row>
        <ColC>CValue3</ColC>
        <ColD>DEF</ColD>
    </Row>
</Table> 
```

File1 中的行通过 ColA 和 ColB 与 File2 中的行具有一对多的关系。

File2 中的行与 ColC 的 File3 中的行具有多对一关系。

对于 File1 中的每一行，我需要：

1.  在 File2 中查找不同的 ColC 值以查找在 ColA 和 ColB 上匹配的行

2.  对于每个不同的 ColC 值，在 File3 中查找 ColD 值以查找在 ColC 上匹配的行

3.  计算在步骤 2 中查找的 ColD 值的出现次数。ColD 将具有两个值之一（例如“ABC”或“DEF”）。我需要知道“ABC”是否比“DEF”多，如果有，请将 <ColD>ABC</ColD> 添加到 File1 中的该行。否则将 <ColD>DEF</ColD> 添加到 File1 中的该行。最后，File1 中的每一行都应该有 <ColD>ABC</ColD> 或 <ColD>DEF</ColD>。

期望的结果（文件 1 转换）：

```
<Table>
    <Row>
        <ColA>AValue1</ColA>
        <ColB>BValue1</ColB>
        <ColD>DEF</ColD>
    </Row>
    <Row>
        <ColA>AValue2</ColA>
        <ColB>BValue2</ColB>
        <ColD>ABC</ColD>
    </Row>
</Table> 
```

<ColD>DEF</ColD> 将被添加到第一行，因为与 ABC 的 1 次（不同）出现相比，DEF 出现了两次。<ColD>ABC</ColD> 将被添加到第 2 行，因为出现了 ABC 和零 DEF。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:28:12.813

好吧，我会尝试一个建议，但我不确定是否能很好地理解所有内容，所以如果它没有意义，我会删除它。

我了解到您有一些相关的 Xml 文件模型。我的意思是您需要访问与 File1 中的元素相关的文件 2 中的元素，依此类推。我遇到了一些类似的情况，并通过应用第一个转换来解决所有文件中的所有引用（到处复制 XML 节点）并在这个“不相关的模型”上应用我更具体的转换来修复它。这更容易，但可能存在一些性能问题（如果有很多关系，则取消关联所有文件可能很长），在我的情况下，它是用于离线生成，因此不需要好的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T21:03:44.690

我想出了一个似乎可行的解决方案（尚未对其进行太多测试）。我在这里重新输入，所以要小心拼写错误。我最困难的事情是弄清楚如何选择独特的 ColC 值。再次查看解决方案，我不需要唯一值。我的想法是我会循环通过 $unique_c_values 来计算 ColD 值，但结果却不同。

```
<xsl:template match="node()|@">
    <xsl:copy>
        <xsl:apply-templates select="node()|@">
    </xsl:copy>
</xsl:template>

<xsl:template match="Row">
    <xsl:copy>
        <xsl:apply-templates select="node()|@">

        <xsl:variable name="unique_c_values" select=
            "document('file2.xml')/Table/Row[current()/ColA = ColA and current()/ColB = ColB]/ColC[not(. = preceding-sibling::*/ColC[current()/ColA = ../ColA and current()/ColB = ../ColB])]"/>

        <xsl:variable name="d_values" select=
            "document('file3.xml')/Table/Row[ColC = $unique_c_values]/ColD"/>

        <xsl:choose>
            <xsl:when test="count($d_values[. = 'DEF']) &gt; count($d_values[. = 'ABC'])">
                <ColD>DEF</ColD>
            </xsl:when>
            <xsl:otherwise>
                <ColD>ABC</ColD>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:copy>
</xsl:template> 
```

# html - 在菜单中定位 CSS 分隔线的问题

> ID：13160837
> 
> 赞同：0
> 
> 时间：2012-10-31T14:58:38.010
> 
> 标签：html, css

我有一个我一直无法弄清楚的 CSS 问题。基本上，我有一个固定宽度和高度的菜单。菜单的背景只是一个图形，带有一个灰色条，下面有一个阴影。这是该菜单的CSS：

```
 #menu
   {
       width:1024px;
       height:63px;
       background: url(../images/menuholder.jpg);
       margin:0px;
   } 
```

我有一个控制菜单选项的 CMS，但是对于这个例子，我对它们进行了硬编码。我正在使用 CSS 将元素垂直放置在正确的位置，在灰色条上，垂直居中，这很好。这是问题所在：我试图在每个菜单选项之间放置一条 1px 宽的白色 (#fff) 线。我宁愿完全通过 CSS 来完成这项工作，而不是使用保存的图像。我能够使用以下代码（在某种程度上）做到这一点：

```
<div id="menu">
            <div id="upperNavLinks">
            <ul>
              <li style="border-right: 1px solid #fff;"><a href="Option1.aspx" target="_self">Option 1</a></li>
              <li style="border-right: 1px solid #fff;"><a href="Option2.aspx" target="_self">Option 2</a></li>
              <li style="border-right: 1px solid #fff;"><a href="Option3.aspx" target="_self">Option 3</a></li>
              <li style="border-right: 1px solid #fff;"><a href="Option4.aspx" target="_self">Option 4</a></li>
              <li style="border-right: 1px solid #fff;"><a href="Option5.aspx" target="_self">Option 5</a></li>
            </ul>   
            </div>
         </div> 
```

它背后的css是：

```
#upperNavLinks
{
    float:left;
    padding-top:0px;
    padding-left:0px;  
}

#upperNavLinks ul
{
    list-style-type:none; 
}

#upperNavLinks ul li
{
    float:left;
}

#upperNavLinks ul a {
    padding-right: 18px;
    padding-left: 18px;
    display: block;
    text-decoration: none;
    font-family:PT Sans, Arial, Helvetica, sans-serif;
    font-size: 11pt;
    font-weight:bold;
    color: #333333;
}

#upperNavLinks ul a:hover 
{
    font-weight:bold;
    color: #a31624;
} 
```

问题是，它会在我想要的位置生成一条白线，但是我需要它从灰色条的顶部开始，然后向下移动到灰色条的底部，而不是在阴影上方。灰色条的大小（垂直）为：44px。

所以，我的问题是：如何使白线锁定在灰色条的顶部，并在灰色条上方覆盖 44px（而不是超过）垂直空间，同时让实际菜单选项浮动在中心像现在这样的图形？

如果这没有任何意义，我可以在某处发布实际的图形和代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:42:58.513

放置空的语义含义是什么

*   的？就个人而言，我会使用背景图片来做这样的事情，而不是创建空标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:32:49.863

在每个`li`带锚点之间，放置另一个`li`，现在有一个类（我将其命名为边框）。给那个类 a `display: block;`， a`width: 1px;`和 a `height: 20px;`。现在你可以使用高度来获得你想要的效果。

[http://jsfiddle.net/skeurentjes/4hJrb/1/](http://jsfiddle.net/skeurentjes/4hJrb/1/)

# php - 通过 CURL 请求加载 iFrame 内容？

> ID：13160842
> 
> 赞同：1
> 
> 时间：2012-10-31T14:58:52.420
> 
> 标签：php, iframe, curl

我有一个应用程序，其中包含一个文件 (FileX.php)，该文件在某些​​条件下会在屏幕上回显一个 iFrame，该屏幕会加载一个跟踪 URL (FileY.php)。在我直接将 FileX.php 包含到主页 (FileA.php) 的生产环境中，iFrame 被回显到屏幕上，并且 FileY.php 被成功调用。

不过在测试中，我需要调用多个版本的 FileA.php，每个版本都包含 FileX.php，它输出 iFrame 以调用 FileY.php。我正在使用 cURL 请求自动处理大量请求。

通过 cURL 请求加载 FileA.php 时，它成功地执行了`include()`FileX.php，但因为它是通过 cURL 发生的，所以 iFrame 永远不会加载它的目标 (FileY.php)。

fileA 的 cURL 请求如下所示：

**测试文件.php**

```
// URL
$url = "http://www.example.com/FileA.php";

// New Cookie file
$ckfile = tempnam("/tmp", "CURLCOOKIE");

// New Connection
$ch = curl_init();
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt ($ch, CURLOPT_COOKIEJAR, $ckfile);
curl_setopt ($ch, CURLOPT_COOKIEFILE, $ckfile);  
curl_setopt($ch, CURLOPT_COOKIESESSION, 0);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_URL, $url);
curl_exec($ch);
curl_close($ch); 
```

**文件A.php：**

```
include_once('FileX.php'); 
```

**文件X.php：**

```
echo("<iframe src='http://www.example.com/FileY.php' width='0' height='0'></iframe>"); 
```

**文件Y.php**

```
// Contains logging stuff to log the fact that FileY.php was called. 
```

就像我说的，如果我直接在浏览器中调用 FileA.php，则包含 FileX.php 并且 FileY.php 已成功加载到 iFrame 中。当我通过 cURL 调用 FileA.php 时，iFrame 不会加载，并且永远不会调用 FileY.php。

我试过用并强制输出包装`echo()`在 FileX.php 中，但这没有用。我试过添加一个，以防请求发生得太快，没有运气。`ob_start()``ob_end_flush()``sleep(1)`

是否有一个 cURL 选项我可以更改以允许这种情况发生？我不知道为什么它不会加载 iFrame src。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T15:16:14.730

啊，原来我错误地使用了一个选项。

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
```

这实际上应该是`false`or `0`。使用`true`or`1`时，所有输出都通过 cURL 请求捕获并返回，而不是输出。所以应该是：

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 0); 
```

# html - 给李老师上课

> ID：13160847
> 
> 赞同：1
> 
> 时间：2012-10-31T14:59:10.597
> 
> 标签：html, css, html-lists

我想在我的网站上有两个列表。一个水平对齐的主导航，一个垂直对齐的子导航。为此，我的 CSS 中应该有两个不同的 li 类。

我试图给导航 li 一个类，但它不起作用。HTML 与 CSS 不对应，并且列表未水平对齐。

这是 HTML：

```
 <ul>
        <li class="navli"><a href="./index.html">Home</a></li>
        <li class="navli"><a href="./books.html">Books</a></li>
        <li class="navli"><a href="./benefits.html">Benefits</a></li>
        <li class="navli"><a href="./about.html">About</a></li>
        <li class="navli"><a href="./contact.html">Contact</a></li>
        <li class="navli"><a href="./resources.html">Other Resources</a></li>
    </ul> 
```

我也试过 <li id="navli" > 但这没有用。

这是CSS：

```
li.navli {
    display: inline;
    padding: 1em;
    text-align: center;
    font-size: 17pt;
    font-family: 'Dosis', Arial, sans-serif;
} 
```

如果没有 HTML 中的“li class..”和 CSS 中的“li.class”，它可以正常工作，但是当我尝试分配一个类时，它就坏了。

可能是一个非常明显的解决方案，但我就是看不到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T15:04:16.077

如果您尝试单独定位每个列表，则从父 ul 定位它们比在每个单独的 li 上放置一个类更有效。

例如：

```
.topul li {
  display: inline;
  padding: 1em;
  text-align: center;
  font-size: 17pt;
  font-family: 'Dosis', Arial, sans-serif;
}

.bottomul li {
  /* Other Styles Here */
} 
```

因此，只需在父 UL 上放置一个类（或 ID），然后以这种方式定位它们。它更有效，可以清理东西，并有可能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:37:42.307

为每个班级取两个`class`并定义`li`。

# facebook - facebook 调试器给出 500 错误

> ID：13160849
> 
> 赞同：2
> 
> 时间：2012-10-31T14:59:21.297
> 
> 标签：facebook, debugging

facebook 调试器为您的网页提供 500 错误。它无法获取我的 og 元标记值。但是，网页中存在 og 元标记：

[http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fstaging.eco.ca%2Fcommunity%2Fblog%2F5-fascinating-green-jobs-youve-never-heard-的%2F68170%2F](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fstaging.eco.ca%2Fcommunity%2Fblog%2F5-fascinating-green-jobs-youve-never-heard-of%2F68170%2F)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:10:14.860

看看你的 IIS 配置。那里的东西拒绝来自任何不是网络浏览器的连接。

[您的页面也会为W3C 验证器](http://validator.w3.org/check?uri=http%3A%2F%2Fstaging.eco.ca%2Fcommunity%2Fblog%2F5-fascinating-green-jobs-youve-never-heard-of%2F68170%2F&charset=%28detect+automatically%29&doctype=Inline&group=0#fatal-errors)返回 500 错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-02T07:03:15.280

对我来说，这是因为当 Facebook、Google 或其他机器人访问页面时，它们不会像浏览器那样发送语言，并且在代码中我们使用浏览器语言来确定内容语言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-04T21:34:32.623

我想分享我关于这个 facebook 调试器 500 错误的经验。我在 facebook 调试器上没有任何解释就收到了这个错误。我检查了我的服务器端和域记录，尝试了我在互联网上找到的内容，但没有成功。我花了很长时间才发现问题。

问题是我在第一次共享时在我的网站的受限区域内共享 url。让我解释一下，我的 cms 中有一个测试页面，在发布任何内容之前，我会测试一切是否正常。我意识到每当我测试内容时，facebook 都会尝试抓取网站，但它位于受限区域。所以我从我的测试页面中移动了关于 facebook 的任何内容。

# wix - 您可以将 TARGETDIR 设置为命令行参数吗？

> ID：13160851
> 
> 赞同：2
> 
> 时间：2012-10-31T14:59:22.247
> 
> 标签：wix, wix3.6

我已经生成了一个 msi，我希望能够更改其默认安装目录，并且我知道您可以使用命令行参数更改 WIX 属性，但我似乎无法像这样为 TARGETDIR 工作：

> 安装程序.msi TARGETDIR=C:\

我的目录片段是：

```
<Fragment>
    <Directory Id="TARGETDIR" Name="SourceDir">
      <Directory Id="SystemFolder"/>

      <!-- Desktop-->
      <Directory Id="DesktopFolder"/>

      <Directory Id="ProgramFilesFolder">
        <Directory Id="DIR_Company" Name="Company Name">
          <Directory Id="DIR_SubDir" Name="Sub Directory" >
            <Directory Id="INSTALLDIR" Name="My Product">
              <Directory Id="DIR_ONE" Name="ONE"  />
              <Directory Id="DIR_TWO" Name="TWO" />
              <Directory Id="DIR_THREE" Name="THREE" />
            </Directory>
          </Directory>
        </Directory>
      </Directory>
    </Directory>

  </Fragment> 
```

这是不可能的，还是我的语法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T15:20:52.777

我怀疑这是因为您的目录层次结构中有预定义的文件夹，例如`ProgramFilesFolder`. 即使您`TARGETDIR`通过命令行设置，它也会被您的程序文件的众所周知的位置覆盖，并且所有子文件夹都变得相对。

作为一种解决方法，您可以`INSTALLDIR`从命令行进行设置。如果您为其提供完整路径，它将覆盖您在 WiX 创作中定义的初始层次结构。

# c# - Winforms c#中的自定义滚动

> ID：13160854
> 
> 赞同：4
> 
> 时间：2012-10-31T14:59:25.793
> 
> 标签：c#, winforms, scroll

我正在开发一个应用程序，它将使用触摸屏进行导航，以便在仓库环境中使用。

需要向用户呈现一个列表，因为这个列表可能很长，用户有时需要向下滚动列表。

众所周知，面板和文本框等的系统滚动条非常小，我想知道是否可以调整构成滚动条的控件的大小（顶部和底部的小箭头，以及占位符栏在滚动条本身），或者我是否可以创建几个可以为我上下滚动控件的按钮？

谢谢，卡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:04:51.487

从[这个帖子](https://stackoverflow.com/questions/4593915/change-width-of-scrollbars)中提取的答案。

看一下这个：

[Winforms - 调整 CheckedListBox 上垂直滚动条的宽度](https://stackoverflow.com/questions/1819462/winforms-adjust-width-of-vertical-scrollbar-on-checkedlistbox)

也值得一提：

[.NET Compact 框架 - 使滚动条更宽](https://stackoverflow.com/questions/964026/net-compact-framework-make-scrollbars-wider)

更多相同，但这次通过使用滚动条控件提供了更好的解决方案：

[更改滚动条的宽度](https://stackoverflow.com/q/7224/114029)

另一个人教如何创建自己的滚动条控件（有趣）：

[设置 DataGridView 的滚动条宽度](https://stackoverflow.com/q/2511568/114029)

最后一个（值得一试）：

[有没有办法获取 ListView 控件的滚动条高度和宽度](https://stackoverflow.com/q/3205038/114029)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:03:21.053

您可以添加自己的滚动按钮并以编程方式滚动，如下所示：

```
myPanel.VerticalScroll.Value++; 
```

# serialization - ContainerAware 和会话

> ID：13160859
> 
> 赞同：0
> 
> 时间：2012-10-31T14:59:40.023
> 
> 标签：serialization, symfony, containers, symfony-2.1

我正在使用扩展的自定义类，`ContainerAware`我需要对其进行序列化以将其存储在会话中。

我正在使用`__sleep`并`__wakeup`选择我的对象的哪些属性需要在会话中持续存在，当然我没有将其存储`$this->container`在会话中。

所以我的问题是：当我使用时`__wakeup`，我无法再访问我的容器了！有没有办法我可以处理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:14:08.633

嗯，是的，这将是预期的结果。如果您将您的课程注册为服务，我不确定这是否可能，因为在 __wakeup 您必须使用正确的容器参数执行 setContainer 。

# android - 用于 android 的 AT&T ARO 调试工具 - tcpdump/key.db 错误

> ID：13160866
> 
> 赞同：2
> 
> 时间：2012-10-31T15:00:00.627
> 
> 标签：android, debugging

有没有人遇到过以下问题，在[AT&T 的 ARO](http://developer.att.com/developer/legalAgreementPage.jsp?passedItemId=9700312)上开始数据整理时，会抛出一条错误消息，上面写着：

```
Emulator error with tcpdump/key.db push. 
```

以下[文档](https://developer.att.com/home/develop/ARO/ARO_UserGuide_1_4.pdf)提到了任何解决方案，但没有任何建议。

```
Occurs if there is an error while transferring the collected 
trace files from the device or device emulator to the local 
system. 
This transfer is initiated by the AT&T ARO Data Analyzer
when the Stop Collector menu option is selected on the 
Data Collector Menu, and the Pull Trace 
```

注意：此问题并不总是发生，但我无法说明导致此问题的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:41:26.210

I am on the ARO Team at AT&T. Sorry that you have been having intermittent issues. I have never seen this issue, but I need a bit more information to help track it down. What Version of he ARO Analyzer are you using? What version of Java, and are you on a PC or a Mac (OS versions)? How large is the emulator's virtual SD card?

It sounds like you are getting this when you attempt to start a trace. Is that correct? Or are you getting the issue when you STOP data collection and the trace is copied off the emulator back to the Computer?

I'll Run this past our developers in advance of your response in case they have ever seen this issue.

Doug @dougsillars developer.att.com/ARO

# mysql - 具有两个 INNER JOIN 的 MySQL 查询在结果中返回重复条目

> ID：13160877
> 
> 赞同：2
> 
> 时间：2012-10-31T15:00:19.540
> 
> 标签：mysql, group-by, duplicates, distinct, inner-join

我有以下数据结构：文章有 m:n 个用户

共有三个表：*articles*、*users*和**articles_users**（链接表）

现在我需要这个查询：*给我所有最近写过文章的用户*。

不幸的是，此查询返回重复的结果：

```
SELECT  DISTINCT users.id, 
        users.username, 
        articles.published, 
        articles_users.user_id
FROM    users 
        INNER JOIN articles_users 
            ON users.id = articles_users.user_id
        INNER JOIN articles     
            ON articles.id = articles_users.article_id
ORDER BY articles.published DESC
LIMIT 25; 
```

结果：

```
id      username        published   user_id
113     silva_mihat     2012-10-30  112
228     paula_tille     2012-10-27  258
228     paula_tille     2012-10-26  258
631     andrea_gurkow   2012-10-24  631
275     hubert_mayer    2012-10-24  275
198     annette_mulger  2012-10-22  198
255     uta_zuffter     2012-10-22  235
and so on ... 
```

有谁知道为什么 DISTINCT 不在这里工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:09:17.880

因为`DISTINCT`适用于整行（*不仅仅是它 `users.id`本身*）。如您所见，返回的所有行都不是*唯一的*。尝试这样的事情，子查询背后的想法是它获取`published`每个的最近日期`article_id`

```
SELECT  users.id, 
        users.username, 
        articles.published
FROM    users 
        INNER JOIN articles_users 
            ON users.id = articles_users.user_id
        INNER JOIN articles 
            ON articles.id = articles_users.article_id
        INNER JOIN 
        (
            SELECT id, MAX(published) maxDate
            FROM articles
            GROUP BY id
        ) c ON  articles.id = c.ID AND 
                articles.published = c.maxDATE
-- ORDER BY articles.published DESC
-- LIMIT 25 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:37:37.963

这应该按作者而不是按文章分组。

```
select
  users.id,
  users.username,
  maxPublished
from users
inner join (
  select
    max(articles.published) as maxPublished,
    articles_users.user_id as userID
  from articles
  join articles_users on articles_users.article_id = articles.id
  group by articles_users.user_id
) as p on users.id = userID
order by maxPublished desc
limit 25
; 
```

# windows-phone-7 - Windows Phone 7 Azure 移动服务

> ID：13160886
> 
> 赞同：3
> 
> 时间：2012-10-31T15:00:37.567
> 
> 标签：windows-phone-7, azure

我想为我的 Windows Phone 7 项目使用 Azure 上可用的新移动服务。但是无法弄清楚要在项目中包含什么才能使这项工作正常进行。“新的 Windows Phone 8 应用程序”选项工作正常，但我想将此服务纳入 Windows Phone 7 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:00:48.787

虽然移动服务团队尚未发布官方的 WP7 SDK，但您可以在此处找到非官方的 SDK：[https](https://github.com/zaxy78/azure-mobile-wp7-sdk) ://github.com/zaxy78/azure-mobile-wp7-sdk 。

您也可以直接访问 REST API，参考这里[http://msdn.microsoft.com/en-us/library/windowsazure/jj710108.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj710108.aspx)

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T20:03:59.827

“Azure 移动服务”只是为移动平台打包的一组 Azure 服务。目前不支持 Windows Phone 7，考虑到它是一个已弃用的平台（对于 Windows Phone 8 并且不向后兼容），我不希望它受到支持。

但是，由于“Azure 移动服务”只是一组“打包的服务”，您绝对可以在 Windows Phone 7 应用程序中使用 Azure 服务，它只是没有为您“打包在一个地方”。

您可以使用 Windows Phone 7 手机的 Windows Phone 工具包（开源）... [http://channel9.msdn.com/posts/Windows-Phone-Push-Notifications-and-Windows-Azure](http://channel9.msdn.com/posts/Windows-Phone-Push-Notifications-and-Windows-Azure)

但是，Azure 中的大多数东西都公开了 RESTful API。因此您可以为特定的 Azure 服务调用 REST API。例如：http: [//blogs.msdn.com/b/prathul/archive/2012/08/10/windows-phone-amp-azure-service-bus-rest-authentication-and-messaging.aspx](http://blogs.msdn.com/b/prathul/archive/2012/08/10/windows-phone-amp-azure-service-bus-rest-authentication-and-messaging.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-04T07:31:36.433

NuGet 上的 Windows Azure 移动服务客户端 (0.3.3-rc)的最新[预发布版本](https://nuget.org/packages/WindowsAzure.MobileServices/0.3.3-rc)现在支持 Windows Phone 8 和 Windows Phone 7.1 应用程序，以及 Windows Store 应用程序。

# android - 重新创建 Google+ 应用的 UI

> ID：13160889
> 
> 赞同：2
> 
> 时间：2012-10-31T15:00:42.283
> 
> 标签：android, user-interface

我对 Android 开发相当陌生，并计划构建一个简单的新闻阅读器应用程序以进一步熟悉该平台。

问题是; 我希望每个新闻项目看起来像下面的 Google+ 帖子项目：

![图像1](../Images/eb7c8484f360f37f0eda47a84f8bfc89.png)

嗯，基本上是一个大标题图片，下面有一个标题和一些描述。

我尝试使用 a 重新创建它`Button`（因为整个东西需要用户可以点击），同时在文本顶部设置一个可绘制对象。它工作得很好..直到我决定向它添加更多可绘制对象：

![img2](../Images/e8193ff7806692df74809f0d88440560.png)

这是我的 XML 代码（尽管我怀疑有人会需要它）：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

<Button
    android:id="@+id/button1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:drawableLeft="@drawable/ic_launcher"
    android:drawablePadding="8dp"
    android:drawableTop="@drawable/temp_jakarta"
    android:text="Button" />

</RelativeLayout> 
```

你能告诉我为什么会发生这种情况，或者，建议我另一种方法来完成这个吗？

提前致谢！

*ps，我很抱歉这个链接；作为一个新用户，所以还不允许我发布图片。:(*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:55:45.480

将所有内容放在 RelativeLayout 中，并使用 layout_below/above/left_of/right_of/... 等相对于其他布局放置一个（事件在顶部，这根本不重要）。

用法见[http://developer.android.com/guide/topics/ui/layout/relative.html，http://developer.android.com/reference/android/widget/RelativeLayout.html](http://developer.android.com/guide/topics/ui/layout/relative.html)[的](http://developer.android.com/reference/android/widget/RelativeLayout.html)完整参考开发者博客中的RelativeLayout类和“Android布局技巧”系列的一些技巧_

*   [http://android-developers.blogspot.com.es/2009/02/android-layout-tricks-1.html](http://android-developers.blogspot.com.es/2009/02/android-layout-tricks-1.html)
*   [http://android-developers.blogspot.com.es/2009/02/android-layout-tricks-2-reusing-layouts.html](http://android-developers.blogspot.com.es/2009/02/android-layout-tricks-2-reusing-layouts.html)
*   [http://android-developers.blogspot.com.es/2009/03/android-layout-tricks-3-optimize-with.html](http://android-developers.blogspot.com.es/2009/03/android-layout-tricks-3-optimize-with.html)

# iphone - SLComposeViewController 绑定到应用

> ID：13160894
> 
> 赞同：0
> 
> 时间：2012-10-31T15:01:08.430
> 
> 标签：iphone, objective-c, ios6, fbconnect, slcomposeviewcontroller

如果我使用`SLComposeViewController`工厂初始化方法`composeViewControllerForServiceType:`并使用 Facebook 服务类型对其进行初始化，则在发布到 Facebook 墙上时，该帖子不包含有关它用于发布的应用程序的任何信息（它现在显示“通过 iOS”，而不是“通过应用名称”）。当我使用 FBConnect 并指定 AppID 时，它总是会获取应用程序信息并在帖子中显示它。

是否可以使用标准重新创建此行为`SLComposeViewController`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:21:08.793

目前没有办法使用 SLComposeViewController 实现这一点。您必须使用 Facebook SDK 才能将您的应用程序名称放在“通过区域”中。

请参阅 [SLComposeViewController Facebook 帖子作为 iOS 而不是 Facebook 应用程序标识符](https://stackoverflow.com/questions/13094661/slcomposeviewcontroller-facebook-posts-as-ios-instead-of-facebook-application-id)

# java - 如何在摇摆中制作图像查看器？

> ID：13160895
> 
> 赞同：0
> 
> 时间：2012-10-31T15:01:09.517
> 
> 标签：java, image, swing, jscrollbar

我正在尝试制作一个如下图所示的图像查看器：-

![在此处输入图像描述](../Images/1ebeb07f5609b4755c5817f30a85b528.png)

在我开始之前，我有以下问题：-

1.  我将如何检查目标文件夹中的图像数量，以便我可以迭代并将所有图像包含在我的应用程序中。

2.  其次，我想将图像缩小到 75x75。但我想不到的是，当滚动条移动时我将如何滑动图像具体来说，这些 75x75 图像队列的合适容器是什么以及该队列如何是向左还是向右移动？（我已经知道如何获取当前滚动条值并在其上添加事件侦听器以响应）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:07:30.340

要检查目标文件夹中的图像数量，您可以使用`File`该类。

至于容器，您可能需要自己创建动画。没有准备好这样做的容器。

这个网站（和书）有一些关于它的想法。我不知道它可能有多过时

[http://filthyrichclients.org/](http://filthyrichclients.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T22:36:19.403

除非我有误解，否则制作图像滚动列表非常简单。

首先，使用允许图像的数据模型创建一个 JList。

此处显示了一个*很好的*示例： [Java 将图像拖放到列表中](https://stackoverflow.com/questions/7222988/java-drag-and-drop-images-in-a-list)

其次，将 JList 添加到 JScrollPane。

使用 Scalr 可以轻松执行缩放方面： [http ://www.thebuzzmedia.com/software/imgscalr-java-image-scaling-library/](http://www.thebuzzmedia.com/software/imgscalr-java-image-scaling-library/)

# asp.net-mvc - 在 Using 块中注入 UnitOfWork

> ID：13160898
> 
> 赞同：2
> 
> 时间：2012-10-31T15:01:13.450
> 
> 标签：asp.net-mvc, design-patterns, ninject, repository-pattern, unit-of-work

我在 UnitOfWork / Repository / MVC 应用程序上工作。现在这一切都很好，我想将 UnitOfWork 与控制器分离。一种方法是在控制器的构造函数中使用 Ninject（或其他）注入依赖项。但是，这意味着 UnitOfWork 将与控制器同时实例化。

我想使用我的 UnitOfWork 的方式是使用这样的块：

```
using(var unitOfWork = new IUnitOfWork)
{
    return unitOfWork.GetRepository<IEmployeesRepository>().GetAllEmployees();
} 
```

显然你不能实例化一个接口，你有一个用依赖注入器注入的实现实例，但是我怎样才能在 using 子句中注入它呢？

我看到了属性注入和方法注入，但我不确定如何使用它们来实现我的目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:51:21.937

使用您在容器中注册的工厂：

```
public class UserController : Controller
{
    IUnitOfWorkFactory _factory;

    public UserController(IUnitOfWorkFactory factory)
    {
        _factory = factory;
    }

    public ActionResult DoSomething()
    {
        using(var unitOfWork = _factory.Create())
        {
            return unitOfWork.GetRepository<IEmployeesRepository>().GetAllEmployees();
        }
    }
} 
```

恕我直言，最好抽象出 UoW 处理：http: [//blog.gauffin.org/2012/06/how-to-handle-transactions-in-asp-net-mvc3/](http://blog.gauffin.org/2012/06/how-to-handle-transactions-in-asp-net-mvc3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T16:32:59.447

您可以通过 Autofac 轻松做到这一点。我确信其他 IoC 容器应该具有相同的功能。

这是[wiki](http://code.google.com/p/autofac/wiki/OwnedInstances)的链接。

代码示例：

```
public class UserController : Controller
{
    Func<Owned<IUnitOfWork>> unitOfWorkFactory;

    public UserController(Func<Owned<IUnitOfWork>> unitOfWorkFactory)
    {
        this.unitOfWorkFactory = unitOfWorkFactory;
    }

    public ActionResult DoSomething()
    {
        using(var unitOfWork = this.unitOfWorkFactory().Value)
        {
            return unitOfWork.GetRepository<IEmployeesRepository>().GetAllEmployees();
        }
    }
} 
```

无需额外注册，只需注册接口的实现即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T15:07:49.597

您不必在 using 块中实例化变量，您可以使用现有变量。因此，您可以像这样使用方法注入：

```
public ActionResult Index(IUnitOfWork unit)
{
    using(unit)
    {
         // Do some work....
    }

    // Return an action
} 
```

请理解，单位将在离开 using 块后被丢弃，因此不应使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T15:11:17.417

> [..] 如何在 using 子句中注入它？

将不再有`using`条款。如果 IoC 容器注入依赖项，它负责它的生命周期。

`using`处理依赖项（并且确实这样做）不是一个好习惯。

* * *

> 我看到了属性注入和方法注入

尽可能使用构造函数注入。属性/方法注入在一些特殊情况下有其用途。

构造函数注入的好处是类可以立即清楚地说明它的依赖关系。此外，您只能在提供所有需要的依赖项后创建实例。

使用属性注入，您可能会忘记设置所需的依赖项。仅在依赖项是可选的、具有默认实现或破坏循环依赖图的情况下才使用此选项。

使用方法注入，您可能会一次又一次地使用相同的方法参数使您的代码膨胀。

* * *

> [...] 如果我想在该控制器的同一个实例中使用 UnitOfWork 两次会发生什么。Ninject 会再次注射吗？

Ninject 将注入同一个实例两次，或者创建两个不同的实例，具体取决于您指示它的行为方式。

IoC 容器允许您为注入的组件指定/配置生命周期样式。对于 Ninject，请参阅[如何指定 Object Scopes](https://github.com/ninject/ninject/wiki/Object-Scopes)。

# android - 我的活动中缺少返回箭头

> ID：13160899
> 
> 赞同：3
> 
> 时间：2012-10-31T15:01:16.073
> 
> 标签：android

我在我的 android 应用程序中创建了 2 个活动。第二个活动将从第一个活动按钮单击开始。活动启动，但我看不到后退箭头。我必须使用硬件按钮才能返回主要活动。

这是我的第二个活动 xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<com.xxxxxxx.widget.MonthView
    android:layout_width="300dp"
    android:layout_weight="1"
    android:paddingLeft="30dp"
    android:layout_height="fill_parent" />
  </LinearLayout> 
```

如何在第二个活动的标题上获取后退箭头按钮？

我正在使用java代码启动如下

```
 Intent intent = new Intent(getActivity(), CalendarActivity.class);
 getActivity().startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T15:43:16.207

要显示“<”，您应该使用：

```
getActionBar().setDisplayHomeAsUpEnabled(true); 
```

比，拦截“主页按钮”按下：

```
@Override
public boolean onMenuItemSelected(int featureId, MenuItem item) {
    if(item.getItemId()==android.R.id.home){
        finish();//finish your activity
    }
    return super.onMenuItemSelected(featureId, item);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:03:57.617

在 Android 中，后退按钮是一个硬件按钮，而不是屏幕顶部的视图，例如在 iPhone 开发世界中。

无需后退按钮，只需单击硬件后退按钮。

# delphi - Lazarus/Delphi - 单击的项目的索引/元素（控制数组）

> ID：13160904
> 
> 赞同：0
> 
> 时间：2012-10-31T15:01:34.587
> 
> 标签：delphi, element, freepascal, lazarus, control-array

我在表单上有一组面板，它们用作按钮。为它们分配了一个事件过程。所以当我点击一个*按钮*时，我可以看到它的标题是这样的：

```
procedure TForm1.MenuAction0Click(Sender: TObject);
begin
  TPanel(Sender).Font.Bold:= true;
  ShowMessage( TPanel(Sender).Caption);

end; 
```

我想知道按钮*编号*（如数组元素编号）而不是标题。这怎么可能？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T15:25:08.110

如果你的按钮在一个数组中，那是因为你把它放在了一个数组中。该按钮没有数组的固有知识，您的程序中也没有任何其他内容。要在数组中查找按钮，请搜索它：

```
function GetButtonArrayIndex(const ButtonArray: array of TButton; Button: TButton): Integer;
begin
  for Result := 0 to High(ButtonArray) do
    if ButtonArray[Result] = Button then
      Exit;
  Result := -1;
end; 
```

另一种方法是放弃对数组的任何直接操作，只将按钮的数组索引存储在其`Tag`属性中。

如果你已经在使用`Tag`其他东西，或者你不喜欢它的名字在你的程序中没有表明它的特定用途，你可以使用 a`TDictionary<TButton, Integer>`来将按钮映射到数组索引，而不必搜索数组：看看从给定的按钮向上索引。一旦你使用 a `TDictionary`，你就可以跳过数组索引，直接将按钮映射到数组索引应该指向的任何其他内容，例如保存与按钮相关信息的数据结构.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:19:21.283

使用`Tag`控件的属性。Tag 属性可以自由设置为对您有用的任何整数，并且控件不使用它。因此，当您创建每个面板时，请将 设置`Panel.Tag`为数组中的索引。然后你可以通过使用获取数组中的索引`TPanel(Sender).Tag`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T15:06:58.983

```
iter: integer;

for iter := 0 to TPanel(Sender).Parent.ControlCount - 1 do
begin
  if Sender = TPanel(Sender).Parent.Controls[iter] then
  begin
    // number is iter
  end;
end; 
```

# java - 如果有错误，ant 停止构建

> ID：13160907
> 
> 赞同：0
> 
> 时间：2012-10-31T15:01:47.083
> 
> 标签：java, android, ant, compiler-errors, linker-errors

我有 ant 从命令行构建 android 项目。它不会因 android 特定错误或 java 错误而停止。但这可能会导致一些我通常不会从 IDE 中看到的非常壮观的崩溃

我怎样才能让蚂蚁停止错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:02:45.470

`ant`仅在编译时错误的情况下失败。`ant`脚本调用`javac`来编译你的源文件。如果有任何编译时错误，它将失败。`ant/javac`无法真正预测运行时错误。

# windows - IAsyncResult 中的系统不支持异常

> ID：13160908
> 
> 赞同：0
> 
> 时间：2012-10-31T15:01:51.480
> 
> 标签：windows, silverlight

我正在尝试`HttpWebRequest`用于访问服务器。我的应用程序曾经在 win7 和 phone sdk 7.1 上运行，但现在我升级到 win8 和 phone sdk 8，尽管我的项目仍然适用于 windows phone 7.1

得到以下异常`IAsyncResult.ASyncWaitHandle`

```
base = {System.NotSupportedException: Specified method is not supported.
   at System.Net.Browser.OHWRAsyncResult.get_AsyncWaitHandle()} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:05:16.933

Await/Async 与 WP7 或 WP7.1 不兼容

这是一个新的 .Net 4.5 功能，不适用于这些项目（基本上是 Silverlight 3/4 项目）。

# mysql - sql查询拆分颜色

> ID：13160909
> 
> 赞同：-1
> 
> 时间：2012-10-31T15:01:51.873
> 
> 标签：mysql

> **可能重复：**
> [Mysql 可以拆分列吗？](https://stackoverflow.com/questions/1096679/can-mysql-split-a-column)
> [Mysql 字符串拆分](https://stackoverflow.com/questions/6152137/mysql-string-split)

我在一张桌子上有这个：

```
id  color
1   red/green/blue/orange
2   blue
3   
4   red/green 
```

我将进行一个 sql 查询，也许是这样的：

```
color
red
green
blue
orange
blue
red
green 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:18:34.657

评论者想要建议的是将值拆分为单独的行：

```
id color
1  red
1  green
1  blue
1  orange
2  blue
3  NULL
4  red
4  green 
```

然后您可以轻松选择：

```
select color from color_table; 
```

或每种颜色只有一次：

```
select distinct color from color_table; 
```

# sql - 除表 B 外的表 A（涉及多于一列）

> ID：13160913
> 
> 赞同：1
> 
> 时间：2012-10-31T15:01:57.910
> 
> 标签：sql

我成功查询了这个：

```
SELECT * FROM tableA
WHERE NOT (column1 IN 
(SELECT column1 FROM tableB) AND columnDate='9999-12-31'); 
```

Where`tableA`有大约 35000k（3500 万）条记录和`tableB`5k（5000）条记录。我在不到 5 分钟的时间内检索了所有记录`tableA`。`tableB`

问题是当我尝试（对于另一个具有相同记录量的示例）使用 3 列（键）来实现相同的结果时：

```
SELECT * FROM tableA
WHERE NOT (column1 || column2 || column3 IN 
(SELECT column1 || column2 || column3 FROM tableB) AND columnDate='9999-12-31'); 
```

我检索了`tableA`除`tableB`1 小时 40 分钟以外的所有记录......！

我可以更有效地查询它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:05:59.173

```
SELECT * FROM tableA a
WHERE NOT EXISTS
(SELECT null FROM tableB where a.column1=column1 and a.column2=column2 and a.column3=column3)
AND columnDate<>'9999-12-31' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:04:46.947

一种方法是过滤左连接：

```
select  * 
from    tableA a
left join
        tableB b
on      b.col1 = a.col1
        and b.col2 = a.col2
        and b.col3 = a.col3
where   a.columnDate <> '9999-12-31'
        and b.id is null -- No match found in B 
```

# jquery - 为什么我的 jPlayer 不工作

> ID：13160920
> 
> 赞同：0
> 
> 时间：2012-10-31T15:02:30.570
> 
> 标签：jquery, jplayer

我正在尝试按照[http://www.script-tutorials.com/how-to-play-audio-video-using-jplayer/](http://www.script-tutorials.com/how-to-play-audio-video-using-jplayer/)上的教程进行操作。

以下是我的 JS 代码：

```
<script type="text/javascript">
var song2 = "http://robtowns.com/music/blind_willie.mp3";

$(document).ready(function() {
    $("#jquery_jplayer_1").jPlayer( {
        ready: function () {
            $(this).jPlayer("setMedia", {
                mp3:song2        
            }).jPlayer("play");
            $("#jquery_jplayer_1").jPlayer("pause", 0);
        },
        supplied: "mp3" 
    });
});

</script> 
```

我已经导入了 jplayer 和 jquery 脚本文件。但它不起作用。相关的 HTML 代码也在那里。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:34:03.097

The code you posted seems to work. (link to [fiddle](http://goo.gl/i4jCT))

I can only guess what doesn't work, since your question isn't really precise in that sense.

If you're using Firefox, be warned that mp3 files aren't supported, so you'll need to give jPlayer also an alternative source in ogg format or provide a Flash based player fallback.

# jquery - jquery绑定解除绑定

> ID：13160922
> 
> 赞同：0
> 
> 时间：2012-10-31T15:02:34.663
> 
> 标签：jquery

嗨，我有一个网站，可以在容器内动态加载页面。我有一个这样的导航菜单：

```
<div class="menu">
    <p align="left" id="home" class="titolo_menu">home</p>
    <p align="left" id="azienda" class="titolo_menu azienda"><br>azienda</p>
    <p align="left" id="staff" class="titolo_sotto_menu azienda">staff</p>
    <p align="left" id="risorseumane" class="titolo_sotto_menu azienda">risorse umane</p>
</div> 
```

在我的 jQuery 中，我添加了这一行：

```
$(document).ready(function(){
    $('.titolo_menu').bind('click',function(){
            $('.titolo_menu').unbind('click');
             //more code...
     });
  }); 
```

我希望当用户单击具有类“titolo_menu”的 ap 时禁用事件单击但不起作用，我可以单击越来越多的时间。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:34:37.833

虽然我无法弄清楚您在应用程序中真正想要什么，但请考虑使用`data-*`属性来与 DOM 本身内部的某些状态相同，例如：

```
$(document).ready(function(){
    $('.titolo_menu').on('click',function(){

        // let's create a reference for current element
        $p = $(this);

        // if clicked element had data-disabled attribute set, return
        if($p.data('disabled'))
            return;

        // disable element;
        $p.data('disabled', true);

        // do your stuff here, e.g.
        $.get('dapage.html', function(data){

            // do your stuff on data retrieving
            $(something).html(data);

            // re-enable element
            $p.data('disabled', false);

        });

   });
}); 
```

这样您就可以控制事件，而不会弄乱解除绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:06:00.013

你可以试试这个......

```
$(document).ready(function(){
var return_flag = true;
    $('.titolo_menu').bind('click',function(){
        if(return_flag){
             //more code...
        }
    return_flag = false;
     });
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T15:13:51.737

只需更改班级名称

```
$('.titolo_menu').bind('click',function(){
           $(this).removeClass('.titolo_menu');
             //more code...
     }); 
```

或者，如果您想禁用所有元素：

```
$('.titolo_menu').bind('click',function(){
            $('.titolo_menu').removeClass('.titolo_menu');
             //more code...
     }); 
```

如果您使用 'live' insted of 'bind' 则不起作用

//编辑抱歉，它不起作用。只需使用现场：

```
$('.titolo_menu').live('click', function(){
  $('.titolo_menu').removeClass('.titolo_menu');
}); 
```

但是，如果您只是想防止在加载页面时多次单击，请使用

```
.attr('disabled', 'disabled'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T15:51:41.047

首先，我想建议您在创建菜单时使用未排序的列表并使用`<a>`标签来链接页面。

例子：

```
<ul id="menu">
    <li id="home" class="titolo_menu"><a href="#home">home</a></li>
    <li id="azienda" class="titolo_menu azienda"><a href="#azienda">azienda</a></li>
    <li id="staff" class="titolo_sotto_menu azienda"><a href="#staff">staff</a></li>
    <li id="risorseumane" class="titolo_sotto_menu azienda"><a href="#risorseumane">risorse umane</a></li>
</ul> 
```

在 jQuery 中，您可以执行以下操作：

```
$(function() {

    $("#menu a").click(function(e) {
        var clickedElement = $(this);
        var clickedElementText = clickedElement.text();

        // Check if current link is not yet active
        if (!$(clickedElement).hasClass("active")) {

            if ($(".active").length > 0) {
                // Deactivate current active link
                var active = $(".active ");
                var activeText = $(active).text();

                $(".active").replaceWith("<a href = '#" + active.parent().attr("id") + "' > " + activeText + " </a>");
            }
            // Change the clicked link to be activated
            $(clickedElement).replaceWith("<span class='active'>" + clickedElementText + "</span>");

            // Load your page or whatever here :)

            // Prevent normal link behavior
            e.preventDefault();
        }
    });
}); 
```

# java - 通过 Java Web 服务返回数组时遇到问题

> ID：13160925
> 
> 赞同：0
> 
> 时间：2012-10-31T15:02:52.997
> 
> 标签：java, arrays, web-services, jakarta-ee

我正在尝试返回一个包含少量字符串的对象以及另一个字符串数组（我保证这是有原因的）。我遇到的麻烦是，当我用 SoapUI 测试我的方法时，我只得到字符串；字符串数组似乎完全丢失了。任何线索我做错了什么？我的课看起来像这样......

```
public class EmailListing {
  public String type;
  public String category;
  public String[] emails;

  public EmailListing() {
    emails = new String[1];
  }

  public void setEmailList(String emaillist) {
    this.emails = emaillist.split("\\|");
  }
} 
```

在使用此类的 Web 服务函数中，我执行以下操作：

```
public EmailListing getEmailListing(int id) {
  EmailListing el = new EmailListing();
  try {
    // get data from the database
    // ...
    //
    while(rs.next()) {
      el.type = rs.getString("type");
      el.category = rs.getString("category");
      el.setEmailList(rs.getString("emaillist"));
    }
  } catch(...) {
    ...
  }
  return el;
} 
```

但是，当我测试此服务时，我看到的唯一信息是类型和类别。:(

编辑：服务器端输出的打印方法和结果。

```
public void print() {
  StringBuffer sb = new StringBuffer();
  sb.append("Emails\n");
  for(int i = 0; i < emails.length; i++) {
    sb.append("  " + emails[i] + "\n");
  }
  System.out.println(sb.toString());
} 
```

输出看起来像：

```
Emails
  XXXXX@gmail.com
  XXXXXXX@gmail.com 
```

编辑：添加收到的肥皂消息

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"     xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <soapenv:Body>
    <getEmailListingResponse xmlns="http://services.test.com">
      <getEmailListingReturn>
        <type>data</type>
        <category>data</category>
      </getEmailListingReturn>
    </getEmailListingResponse>
  </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:15:54.017

究竟`EmailListing`长什么样？我最好的猜测是您需要创建某种[XmlTypeAdapter](http://weblogs.java.net/blog/kohsuke/archive/2005/09/using_jaxb_20s.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:05:48.177

调试它，看看你是否真的得到了“emailList”，如果是这样，你可能把它拆分错了，因为你的代码对我来说看起来不错。

# php - PHP 包含 mysql 查询，使用标头防止查询重新执行，但在哪里回显通知？

> ID：13160927
> 
> 赞同：0
> 
> 时间：2012-10-31T15:03:00.150
> 
> 标签：php, mysql, execute, page-refresh

F5 重新执行查询时的代码：

```
if (isset($_POST['addnewproject']) )
{
    include("query/pm_addnewproject.php");
    echo $emailnotificationmessage;
} 
```

为了防止在按 F5 或页面重新加载后重新执行查询，我必须修改标题并将其放在 .php 页面的第一条规则（在任何输出之前）中。所以：

```
 if (isset($_POST['addnewproject']) ) 
    {
        include("query/pm_addnewproject.php");
        header("Location:pm_configureaccounting.php?edit=$_SESSION[accidsession]");

        echo $emailnotificationmessage; exit();

    } 
```

由于标题，我现在丢失了我想在页面中间某处回显的 $emailnotificationmessage。

当我仍然想回应这一​​点时，现在最好做的事情是什么？

现在我将 $emailnotificationmessages 更改为 $_SESSION['emailnotificationmessage'] 并在我想要的地方回显它。

但我也需要取消设置此会话，否则它会一直向用户显示。

因此，当我放置`echo $_SESSION['bla']`在页面中间的某个位置时，它在那里有一个值。有用。但是我需要清除它，所以当用户再次访问时，它不会显示任何消息，除非再次添加项目。所以我把`$_SESSION['bla'] = "";`它放在页面的末尾，仍然，这个 SESSION 得到了价值`""`？！这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:10:51.407

没有简单的方法可以知道用户是否 F5 刷新页面..

但是你可以很聪明并设置 1-2 个标识符.. 例如（使用会话）..

```
$request= md5(json_encode($_REQUEST));

if(isset($_SESSION["last_request"]) && $_SESSION["last_request"] == $request){
   echo "Dont refresh page...";
} 
else{
    $_SESSION["last_request"] = $request;
} 
```

请注意，此会话将被保存，如果用户返回并再次提交具有相同值的表单，他将收到相同的“不刷新页面”消息。为了防止设置一个

```
if(isset($_SESSION["last_request"])){ 
    unset($_SESSION["last_request"]); 
} 
```

在您的表单页面..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T15:11:00.367

好吧。为什么不按以下方式编写代码：

```
<?php 

if (isset($_POST['addnewproject']) ) 
{
    include("query/pm_addnewproject.php");
    $_SESSION['emailMsg'] = $emailnotificationmessage;
    header("Location:pm_configureaccounting.php?edit=$_SESSION[accidsession]");

    exit();

}else{
    echo $_SESSION['emailMsg']; 
}

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T15:09:31.490

分配`""`给变量与它根本不存在不同。您是否尝试**[取消设置](http://php.net/manual/en/function.unset.php)**会话变量？

```
unset($_SESSION['emailnotificationmessage']); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T15:09:45.640

您将要使用`unset($_SESSION['bla'])`删除此特定变量，或使用`if( empty($_SESSION['bla']) ) { }`检查变量。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-31T15:05:20.217

所以在你的 URL 中设置一个 get 变量，比如

```
www.url.com?message=hello 
```

在另一页上使用这个

```
if(isset($_GET['message']) && $_GET['message'] != '') {
   echo $_GET['message'];
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T15:46:38.463

好的，我现在开始工作。感谢您的快速反应！

我在页面顶部的规则：

```
 if (isset($_POST['addnewproject']) ) 
    {
        include("query/pm_addnewproject.php");
        $_SESSION['emailnotificationmessage'] = $emailnotificationmessage;
        header("Location:pm_configureaccounting.php?edit=$_SESSION[accidsession]");
        exit();
    } 
```

页面深处的某个地方：

```
<?php
    echo $_SESSION['emailnotificationmessage'];
    $_SESSION['emailnotificationmessage'] = "";     
?> 
```

现在完美运行。添加新项目后，会立即显示消息，然后会话变为空。重新加载后，会话保持为空，直到添加新项目。

我想我在标题之后声明了 $_SESSION，愚蠢的错误，这就是为什么它一直是空的！

# assembly - 加载 32 位常量以在 MIPS 中注册

> ID：13160930
> 
> 赞同：10
> 
> 时间：2012-10-31T15:03:15.440
> 
> 标签：assembly, mips

我在学习 MIPS 时对这部分感到困惑。

[John L. Hennessy](http://en.wikipedia.org/wiki/John_L._Hennessy)教授写的教科书说，如果我们要加载一些*大常数，我们应该*

```
lui $s0, upper(big)
ori $s0, $s0, lower(big) 
```

但是我们为什么不做

```
addi $s0, $zero, big 
```

由于寄存器是 32 位的，这更简单，不是吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-31T15:06:35.423

传递给的立即参数`addi`只有 16 位。要加载超出 16 位值范围的 32 位立即数，您需要分两次执行，如教科书中的示例。

（期待进一步的问题，没有*加载立即*数或*添加立即*数指令采用 32 位立即数的原因是因为 MIPS ISA 使用固定大小的 32 位指令，因此任何指令参数总是有 < 32 位可用- 这在 RISC 架构中很常见。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-31T15:07:48.797

是的，寄存器是 32 位的，但是如何在 32 位指令中指定 32 位数字？一条指令由操作码和数据组成。因此，您不能在单个 addi 中压缩操作码 + 32 位数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-29T02:39:52.187

或者，使用*.data*和*.text*

```
.data
   word32bits: .word 0xFFFFFFFF

.text
   lw $t0, word32bits # $t0 now contains your 32 bit word. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-01T13:52:33.377

如果需要加载大量常量，可以使用文字池。然后每个恒定加载仅花费 1 条加载指令。更多信息[在这里](https://stackoverflow.com/a/17275997/995714)和[这里](https://stackoverflow.com/a/6507814/995714)

# c# - 带有表单控件的 C# MouseHover

> ID：13160931
> 
> 赞同：1
> 
> 时间：2012-10-31T15:03:15.040
> 
> 标签：c#, visual-studio-2010, mousehover

在 VS 2010 Pro 中使用 C#。

我有一个在标签上实现 MouseHover 事件的 MDI 父窗体。在 MouseHover 上显示一个表单。我对这种形式的随机定位不满意。是否可以控制该表单的显示位置？我希望它显示鼠标光标的位置。

任何建议表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:05:20.353

将`Location`表单上的属性设置到您想要的位置。

# http - http和ftp有什么区别

> ID：13160934
> 
> 赞同：-2
> 
> 时间：2012-10-31T15:03:28.247
> 
> 标签：http, ftp

我们可以通过 ftp 将文件从一个系统传输到另一个系统。但我们也可以从 http 协议上传文件。我的意思是我们可以通过两种方式实现文件从一个位置到另一个位置的传输。所以它们之间有什么不同。请解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-09-27T12:35:57.920

**FTP：**

1.  FTP 对于单个大文件传输要快得多，并且用于带有身份验证的文件传输。

2.  FTP 不提供文件的元数据。

3.  FTP 对流水线的支持有限。

4.  FTP 恢复下载支持有限（对于 2GB 文件）。

**HTTP：**

1.  HTTP 在传输多个小文件时速度更快，可用于有/无身份验证的网页。

2.  HTTP 为 Content-Types 等文件提供元数据。

3.  HTTP 支持流水线。这意味着客户端可以在前一个传输结束之前请求下一次传输，从而允许发送多个文档而没有文档之间的往返延迟，因此 TCP 数据包针对传输速度进行了优化。

4.  HTTP 支持更高级的字节范围，因此更好的恢复下载功能。

这个答案基于这篇文章，

[https://daniel.haxx.se/docs/ftp-vs-http.html](https://daniel.haxx.se/docs/ftp-vs-http.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:11:52.737

**HTTP——**支持网络的协议。
**FTP——**一种用于传输文件的旧且不安全的协议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T12:01:52.437

**超文本传输​​协议 (HTTP)**是一种用于网络的协议。当您在网络浏览器中键入任何网址时，您的浏览器将充当客户端，而具有所请求信息的计算机则充当服务器。当客户端向服务器请求任何信息时，它使用 HTTP 协议来完成。请求完成后，服务器响应客户端。响应以网页的形式出现，您在输入网址并按“Enter”后即可看到该网页。

# java - 如何在表格/面板/JFrame 中使用 SWING/JButton 正确定位按钮

> ID：13160935
> 
> 赞同：3
> 
> 时间：2012-10-31T15:03:48.083
> 
> 标签：java, swing

我正在从文件中读取信息并将其放在表格中。这个代码不是我的，但正是我需要的，所以我试图保留它并让它对我有用。`SWING`我需要添加的是 5-6 个按钮和它们的功能，但是对于与我一起工作的新手来说，我很难同时完成这两者 - 保留我现有的代码并将按钮添加到适当的位置。

这是我的文件，第一部分是表格的制作位置以及我尝试包含一个按钮的代码的位置：

```
public class DataFileTable extends JPanel {
  public DataFileTable(String dataFilePath) {
    JTable table;
    DataFileTableModel model;
    Font f;

    f = new Font("SanSerif",Font.PLAIN,24);
    setFont(f);
    setLayout(new BorderLayout());

    model = new DataFileTableModel(dataFilePath);

    table = new JTable();
    table.setModel(model);
    table.createDefaultColumnsFromModel();
    //Try to add button
    JButton button = new JButton("First Button");
    button.setSize(80,20);
    button.setVerticalAlignment(SwingConstants.BOTTOM);
    button.setHorizontalAlignment(SwingConstants.RIGHT);
    //End button part
    JScrollPane scrollpane = new JScrollPane(table);
    scrollpane.add(button);//Add button 
    add(scrollpane);

    } 
```

第二部分主要是`main`功能：

```
public Dimension getPreferredSize(){ 

    return new Dimension(400, 300);
    }

 public static void main(String s[]) {
    JFrame frame = new JFrame("Data File Table");
    DataFileTable panel;

    panel = new DataFileTable("customers.dat");

    frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
    frame.setForeground(Color.black);
    frame.setBackground(Color.lightGray);
    frame.getContentPane().add(panel,"Center");

    frame.setSize(panel.getPreferredSize());
    frame.setVisible(true);
    frame.addWindowListener(new WindowCloser());
    }
 }

class WindowCloser extends WindowAdapter {
 public void windowClosing(WindowEvent e) {
   Window win = e.getWindow();
   win.setVisible(false);
   System.exit(0);
    }
} 
```

这是我使用此代码得到的 PrintScreen：

![在此处输入图像描述](../Images/9dec657a4a477c3219f30b7396294854.png)

我不是在寻找最好的外观和感觉，但如果我可以保留当前代码并将按钮添加到底部某处，那就太好了。我尝试将按钮直接添加到框架表单中`main`，`frame.add(button)`但即使我设置了大小，按钮也会占用所有空间并且表格不再可见。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T15:11:02.440

您不能执行以下操作：

```
JScrollPane scrollpane = new JScrollPane(table);
scrollpane.add(button);//Add button 
add(scrollpane); 
```

因为滚动窗格只能有一个显示表格的[视口。](http://docs.oracle.com/javase/7/docs/api/javax/swing/JScrollPane.html#setViewport%28javax.swing.JViewport%29)

我建议：

```
add(scrollpane, BorderLayout.CENTER ); 
```

和

```
JToolBar toolbar = new JToolBar();
toolbar.add( button1 );
toolbar.add( button2 );
toolbar.add( button3 );
...
add( toolbar, BorderLayout.NORTH ); 
```

[查看JToolBar](http://docs.oracle.com/javase/7/docs/api/javax/swing/JToolBar.html)的文档

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T15:07:28.343

使用摇摆布局管理器：http: [//zetcode.com/tutorials/javaswingtutorial/swinglayoutmanagement/](http://zetcode.com/tutorials/javaswingtutorial/swinglayoutmanagement/)

我建议您使用 2 个面板：一个用于您的表格，另一个用于您的按钮，使用我上面所说的正确布局

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T15:08:07.953

问题是您不必调用组件`set[Mininum|Maximum|Preferred]Size()`上的方法`Swing`（如果 LayoutManager 忽略它们的提示并最终破坏布局本身，这些方法将无效）。

这是因为在`Swing`唯一负责建立正确大小的一个`Component`的孩子是`LayoutManager`。查看此[线程](https://stackoverflow.com/questions/7229226/should-i-avoid-the-use-of-setpreferredmaximumminimumsize-methods-in-java-swi)以获得进一步的解释，或查看 Oracle 的[教程](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)。

如果您需要正确布局组件，请在您的父级`Component`右侧添加一个`LayoutManager`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T15:11:02.000

我会为你节省很多头发和时间。

使用 Swing 时，不应该比 GridBagLayout 看得更远。

相信我，了解如何使用 GridBag。它看起来很复杂，它会破裂。但它是唯一有用且值得学习的布局管理器，因为您最终可能会使用它......很多。

所以，请记住 - [http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T20:37:05.733

如果您需要一种快速制作 GUI 的方法，我建议使用 Netbeans GUI 代码生成器，它使您能够拖放 Java Swing 元素。或者您可以为 Eclipse 安装 WindowBuilder 插件。

尽管这些“代码生成器”有些不受欢迎，因为您不需要自己学习如何格式化，它们在学习时很有用。

事实上，这些所见即所得的编辑器教会了我 HTML。:)

# python - Python ctypes 和 char**

> ID：13160957
> 
> 赞同：6
> 
> 时间：2012-10-31T15:05:19.387
> 
> 标签：python, ctypes

我在 C 中有以下结构：

```
struct wordSynonym
{
    wchar_t* word;
    char** synonyms;
    int numSynonyms;
};

struct wordList
{
    wordSynonym* wordSynonyms;
    int numWords;
}; 
```

而且，我在 Python 中有以下内容：

```
class wordSynonym(Structure):
    _fields_ = [ ("word", c_wchar_p),
                  ("synonyms", POINTER(c_char_p)), # Is this correct?
                  ("numSynonyms", c_int) ];

class WordList(Structure):
    _fields_ = [ ("wordSynonyms", POINTER(wordSynonym)),
                 ("numWords", c_int)]; 
```

`char**`在 python中引用的正确方法是什么？也就是说，在Python代码中，是`POINTER(c_char_p)`正确的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T15:10:13.703

我在我的代码中使用它：

```
POINTER(POINTER(c_char)) 
```

但我认为两者是等价的。

**编辑：** 实际上它们不是 [http://docs.python.org/2/library/ctypes.html#ctypes.c_char_p](http://docs.python.org/2/library/ctypes.html#ctypes.c_char_p)

> ctypes.c_char_p 当它指向一个以零结尾的字符串时，表示 C char * 数据类型。**对于也可能指向二进制数据的通用字符指针，**必须使用 POINTER(c_char)。构造函数接受整数地址或字符串。

`POINTER(POINTER(c_char))`对于二进制数据也是如此，并且`POINTER(c_char_p)`是指向 C 空终止字符串的指针。

# .net - 如何在delphi-prism中导入DLL？

> ID：13160964
> 
> 赞同：0
> 
> 时间：2012-10-31T15:05:44.600
> 
> 标签：.net, dllimport, delphi-prism, oxygene

我正在尝试在我的 delphi-prism 程序中导入 dll，但以前从未这样做过。所以，在网上找到一些答案后，我把一些东西放在一起，但不起作用。

```
 MyUtils = public static class
  private
    [DllImport("winmm.dll", CharSet := CharSet.Auto)]
    method timeBeginPeriod(period:Integer):Integer; external;
  protected
  public
    constructor;
  end; 
```

这是我的使用方法：

```
var tt := new MyUtils;
tt.timeBeginPeriod(1); 
```

当我运行我的程序时，我不断收到以下错误。

*   **“MyUtils”不提供可访问的构造函数。**
*   **“System.Object”在表达式“tt.timeBeginPeriod”中不包含“timeBeginPeriod”的定义。**

我究竟做错了什么？你如何在delphi-prism中导入dll？

我跟着这个stackoverflow问题 - [Delphi Prism getting Unknown Identifier "DllImport" error](https://stackoverflow.com/questions/2741245/delphi-prism-getting-unknown-identifier-dllimport-error)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:10:00.630

你很亲密。

您不需要构造函数，因此可以将其删除：

```
MyUtils = public static class
private
  [DllImport("winmm.dll", CharSet := CharSet.Auto)]
  method timeBeginPeriod(period:Integer):Integer; external;
protected
public
end; 
```

如果您`timeBeginPeriod`从声明它的单元外部调用该函数，则需要将其可见性更改为`public`.

您也不需要创建实例来调用该函数：

```
MyUtils.timeBeginPeriod(1); 
```

我使用声明和使用的应用程序对此进行了测试`SendMessage`，因此我可以轻松检查以确保它确实有效（我向`EM_SETTEXT`同一表单上的编辑控件发送了一条消息）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T19:58:58.633

```
 MyUtils = public static class
  public
    [DllImport("winmm.dll", CharSet := CharSet.Auto)]
    class method timeBeginPeriod(period:Integer):Integer; external;
  end;

MyUtils.timeBeginPeriod(1); 
```

# xml - 使用 XSD 验证 XML 元素

> ID：13160966
> 
> 赞同：3
> 
> 时间：2012-10-31T15:05:50.233
> 
> 标签：xml, xsd

我有以下 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<MainElement>
    <id>1</id>
    <name>John</name>
    <custom>
        <age>43</age>
        <sex>male</sex>
    </custom>
</MainElement> 
```

还有另一个 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<MainElement>
    <id>2</id>
    <name>Dave</name>
    <custom>
        <age>51</age>
        <county>England</country>
        <city>London</city>
    </custom>
</MainElement> 
```

两个 XML 文件的主要结构相同，只是`<custom>`元素具有不同的实现。我已经有一个 XSD 文件来检查元素`<custom>`类型为 xs:anyType 的“id”和“name”等元素。是否可以创建另一个 XSD 文件，它只验证`<custom>`元素而不查看存在的所有其他元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T01:09:32.077

我将为两个客户说明。第一个 XSD 是应该捕获所有公共部分的基础 XSD，除了`custom`我们引用但未定义的部分；我们让它“悬空”。

下面是common.xsd：

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:element name="MainElement">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="id" type="xsd:unsignedByte" />
        <xsd:element name="name" type="xsd:string" />
        <xsd:element ref="custom"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
</xsd:schema> 
```

然后我们开始为每个`custom`. 对于第一个 XML (custom-1.xsd)：

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="custom">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="age" type="xsd:unsignedShort"/>
                <xsd:element name="sex" type="xsd:string"/>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

对于第二个，custom-2.xsd：

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="custom">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="age" type="xsd:unsignedShort"/>
                <xsd:element name="country" type="xsd:string"/>
                <xsd:element name="city" type="xsd:string"/>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

然后，您必须通过适当地加载 XSD 为每个客户创建一个模式集：第一组将包括 common + custom-1，然后是 common + custom-2，等等。

这就是我使用 QTAssistant “可视化”这些集合的方式：

![在此处输入图像描述](../Images/b7e0127621ef3e02f37f5109cc581af0.png)

当然，它本身`Common`是无效的。

```
Error occurred while loading [file:///.../validate-xml-element-with-xsd-2.xsd], line 9 position 10.
The 'custom' element is not declared. 
```

但是，每个其他集合都是有效的，因为集合中的附加 XSD 会将缺少的定义纳入范围。现在您可以验证每个供应商的 XML 及其关联集。您可以维护跨供应商的通用定义的完整性，因为您确实共享一个通用 XSD，并且您可以使用悬空定义摆脱 XSD 1.0 中的“限制”。我认为这并不是真正的限制；这可能是一种“不那么优雅”的方法......

从处理的角度来看，您需要像供应商一样多次编译和加载通用 XSD 的开销。

如果这成为一种负担，您还可以使用另一种策略，一旦预处理您的 XML 得到回报。您可以保留`custom`定义为 anyType，甚至可以将其替换为 xsd:any。一旦验证了公共节点，就提取节点（XSLT 或 DOM API 或 DOM 节点阅读器之上的验证阅读器等）并使用适当的 XSD 独立验证它。

后一种方法的优点是在 XSD 方面不会有任何开销。当然，权衡可能会增加处理中的足迹。

XSD 1.1、XSD 1.0 + Schematron、RelaxNG 是涉及另一种模式语言的解决方案，它们各有优缺点。我认为以上内容至少应该可以帮助您了解您拥有的一些选项...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:43:19.347

使用 XSD，您不能使用 ANY 的字面意思！

因此，您需要以一种或其他方式声明所有作为 XML 的一部分 .. 的内容。

我对您使用 import/include 的方法表示赞赏..这是一个干净的方法，可以进一步扩展要求..但您仍然应该知道 ANY 元素的可能名称..

虽然这不是必需的，但您会被要求了解另一种使用方法`Sequence`并`choice`满足您的要求，**只需一个 XSD**

这是验证 XML1 和 XML2 的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="MainElement">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="id" type="xs:unsignedByte" />
        <xs:element name="name" type="xs:string" />
        <xs:element name="custom">
          <xs:complexType>
            <xs:sequence>
              <xs:choice>
                <xs:element name="age" type="xs:unsignedByte" />
              </xs:choice>
              <xs:choice>
                <xs:sequence>
                  <xs:element name="sex" type="xs:string" />
                </xs:sequence>
                <xs:sequence>
                  <xs:element name="country" type="xs:string"/>
                  <xs:element name="city" type="xs:string"/>
                </xs:sequence>
              </xs:choice>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

这可能暂时对您没有用，但将来可能对您有用..

# jquery - 在 setTimeout 中使用 jQuery 变量

> ID：13160967
> 
> 赞同：1
> 
> 时间：2012-10-31T15:05:55.180
> 
> 标签：jquery, variables, settimeout

我想为 setTimeout 中的毫秒参数使用一个变量。

HTML

```
<ul>
<li>list item</li>
<li>list item</li>
<li>list item</li>
<li>list item</li>
</ul> 
```

jQuery

```
var wait = $("li:last").index()*4000;
document.write(wait+'<br>');
setTimeout (argument.callee, wait); 
```

代码应根据列表项的数量计算等待多长时间，然后重复代码。这应该无限重复。我尝试了许多变体，它们都会产生错误。我敢肯定这是显而易见的。有什么帮助吗？

这是小提琴[http://jsfiddle.net/sZ3KY/](http://jsfiddle.net/sZ3KY/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T15:11:19.553

它是**arguments.callee**，而不是**argument.callee**

检查这个工作**演示**：http: [//jsfiddle.net/sZ3KY/3/](http://jsfiddle.net/sZ3KY/3/)

**代码**：

```
var wait = $("li:last").index()*500;

function doIt() {
    document.write(wait+'<br>');
    setTimeout (arguments.callee, wait);
}

doIt(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:10:32.877

你想延迟等待的打印吗？如果是这样的话，在你里面使用一个函数就会像这样超时

```
var wait = $("li:last").index()*4000;
setTimeout (function() {
    document.write(wait+'<br>');
}, wait); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T15:11:34.267

错误不在于等待。等待工作正常...

```
var wait = $("li:last").index()*1000;
document.write(wait+'<br>');
setTimeout (function () { alert('Works') }, wait); 
```

[http://jsfiddle.net/6e7kL/](http://jsfiddle.net/6e7kL/)

问题是`argument.callee`在您的 JS Fiddle 中没有定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T15:11:45.500

首先，不要使用`document.write`. 它将清除*整个*页面，并替换它。其次，你想在这里做什么？你希望`argument.callee`在这里做什么？

你的代码工作正常，如果你给它一个实际的功能：

```
var wait = $("li:last").index()*4000;
setTimeout (function(){
    alert('test');
}, wait);
​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T15:12:33.827

我认为您的问题在于 setTimeout 需要一个函数。看：

[http://jsfiddle.net/sZ3KY/1/](http://jsfiddle.net/sZ3KY/1/)

```
var wait = $("li:last").index()*4000;
document.write(wait+'<br>');
setTimeout (function(){alert("I've waited "+wait/1000+"seconds before doing this")}, wait); 
```

​</p>

# android - MapView - 单击定位按钮时停止滚动

> ID：13160970
> 
> 赞同：1
> 
> 时间：2012-10-31T15:05:57.993
> 
> 标签：android, android-mapview

在下图中（来自[Polaris](http://android.cyrilmottier.com/?p=824)），您可以`ImageButton`在`MapView`.

我有一个自定义的 (an `ImageView`) 并自己处理它的点击。

现在，当用户拖动地图然后（在拖动过程中）单击定位按钮时，它什么也不做，直到地图停止移动。

**我想要完成的是阻止地图滚动。**

这是我尝试过的（*感谢 blazzerbg*）：`mMap.getController().stopAnimation(false);` 但是不行。

我知道我有这些功能，也许它们会干扰？

```
@Override
public boolean onTouch(View view, MotionEvent event) {
    // Disables multi-touch (zoom in/out)
    if (event.getPointerCount() > 1) {
        return true;
    }

    // Get the map if a drag is done
    if (event.getAction() == MotionEvent.ACTION_UP) {
        // ...
    }

    // Disables double-tap
    return mGestureDetector.onTouchEvent(event);
}

private class GestureListener extends GestureDetector.SimpleOnGestureListener {

    @Override
    public boolean onDoubleTap(MotionEvent event) {
        return true;
    }
} 
```

看来我不是一个人...

*   [Android MapView MapController stopAnimation 不停止动画](https://stackoverflow.com/questions/11622340/android-mapview-mapcontroller-stopanimation-not-stopping-animation)
*   [mapview（滑动）动画停止后的动作](https://stackoverflow.com/questions/12194643/action-after-mapview-swipe-animation-stops)
*   [Android MapView：animateTo 在地图平移时不起作用](https://stackoverflow.com/questions/10383131/android-mapview-animateto-doesnt-work-while-map-is-panning)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:38:47.897

您可以在任何情况下禁用用户跟踪按钮：有这样的方法：

```
 /**
     * Enable/disable user tracking on this {@link PolarisMapView}.
     * 
     * @param enabled True if user tracking is enabled, false otherwise.
     */
    public void setUserTrackingButtonEnabled(boolean enabled) { 
```

此方法附加一个侦听器，用于根据用户位置使视图居中：

```
private final OnClickListener mOnUserTrackingButtonClickListener = new OnClickListener() {
        @Override
        public void onClick(View v) {
            MapViewUtils.smoothCenterOnUserLocation(PolarisMapView.this, mMyLocationOverlay, R.string.polaris__unable_to_locate_you);
        }
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:09:10.040

MapController中有方法

```
public void stopAnimation(boolean jumpToFinish) 
```

[文档](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MapController#stopAnimation%28boolean%29)

# android - 模拟器屏幕变黑

> ID：13160975
> 
> 赞同：0
> 
> 时间：2012-10-31T15:06:17.140
> 
> 标签：android, emulation

我正在尝试在模拟器上运行我的项目。它工作正常，直到我将一首歌推入 sdcard 然后尝试重新运行。第一次尝试时，屏幕黑屏，但播放了歌曲，但重试后完全没有任何反应。起初我认为这可能是由于空间不足，所以我将 sdcard 大小从 100Mb 增加到 200Mb。但仍然没有任何反应。任何人请帮忙。logcat 看起来也不错。一段时间后，模拟器说应用程序没有响应。

询问代码：

公共类 AndroidBuildingMusicPlayerActivity 扩展 Activity 实现 OnCompletionListener、SeekBar.OnSeekBarChangeListener {

```
class AskGenreDialog {
    private String songTitle = "";
    private int id;
    EditText AskGenre;
    View view;
    public void setSongTitle(String songTitle){
        this.songTitle = songTitle;
    }

    public void setId(int id){
        this.id = id;
    }
    public void onCreateDialog(){

        AlertDialog.Builder builder = new AlertDialog.Builder(AndroidBuildingMusicPlayerActivity.this);
        LayoutInflater inflator = (LayoutInflater)AndroidBuildingMusicPlayerActivity.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        view = inflator.inflate(R.layout.ask_genre, null);
        AskGenre = (EditText) view.findViewById(R.id.genre);
        builder.setView(view);
        builder.setTitle("Genre Not Found").setMessage(songTitle);

        builder.setPositiveButton("Save", new OnClickListener(){

            @Override
            public void onClick(DialogInterface arg0, int arg1) {
                // TODO Auto-generated method stub
                String genre = AskGenre.getText().toString();
                int i = handler.setGenreForId(genre,id);

                Log.d("Ans:", "" + id);
            }

        });
        builder.setNegativeButton("Don't Know", new OnClickListener(){

            @Override
            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub

            }

        });

        // create alert dialog
        AlertDialog alertDialog = builder.create();

        // show it
        alertDialog.show();
    }

}
class VolumeSeekBar{

    AudioManager manager = (AudioManager) AndroidBuildingMusicPlayerActivity.this.getSystemService(Context.AUDIO_SERVICE);;
    SeekBar seekBar;
    View view;
    public SeekBar getSeekBar(){
        return this.seekBar;
    }
    public AudioManager getAudioManager(){
        return this.manager;
    }
    public void onCreateDialog(){
        AlertDialog.Builder builder = new AlertDialog.Builder(AndroidBuildingMusicPlayerActivity.this);
        LayoutInflater inflator = (LayoutInflater)AndroidBuildingMusicPlayerActivity.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        view = inflator.inflate(R.layout.volume, null);
        seekBar = (SeekBar) view.findViewById(R.id.volSeekBar);
        builder.setView(view);
        builder.setTitle("Volume Control");

        //get the audio manager
        int maxVolume = manager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
        seekBar.setMax(maxVolume);
        int curVolume = manager.getStreamVolume(AudioManager.STREAM_MUSIC);
        seekBar.setProgress(curVolume);
        seekBar.setKeyProgressIncrement(1); 
        seekBar.setProgress(manager.getStreamVolume(AudioManager.STREAM_MUSIC)); 

        seekBar.setProgressDrawable(getResources().getDrawable(R.drawable.volume_seekbar_filled));
        seekBar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

            @Override
            public void onStopTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onStartTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onProgressChanged(SeekBar seekBar, int progress,
                    boolean fromUser) {
                // TODO Auto-generated method stub
                manager.setStreamVolume(AudioManager.STREAM_MUSIC, progress, 0); 
                seekBar.setProgressDrawable(getResources().getDrawable(R.drawable.volume_seekbar_filled));
            }
        });
        // create alert dialog
        AlertDialog alertDialog = builder.create();

        // show it
        alertDialog.show();

    }   

}

ToggleButton playPause;
Button rewind, forward;
ToggleButton moodButton;
ToggleButton volume;
private ImageButton btnPlaylist;
private ToggleButton repeat;
private SeekBar songProgressBar;
private TextView songTitleLabel;
private TextView songCurrentDurationLabel;
private TextView songTotalDurationLabel;
// Media Player
private  MediaPlayer mp;
// Handler to update UI timer, progress bar etc,.
private Handler mHandler = new Handler();;
private SongsManager songManager;
private Utilities utils;
private int currentSongIndex = 0;
private boolean isShuffle = false;
private boolean isRepeat = false;
private ArrayList<Song> songsList = new ArrayList<Song>();
private DatabaseHandler handler = new DatabaseHandler(this);
int version = 0;
boolean sortCalled = true;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    // All player buttons
    btnPlaylist = (ImageButton) findViewById(R.id.btnPlaylist);
    moodButton = (ToggleButton) findViewById(R.id.moodButton);
    repeat = (ToggleButton) findViewById(R.id.repeat);
    volume = (ToggleButton) findViewById(R.id.volume);
    playPause = (ToggleButton) findViewById(R.id.PlayAndPauseButton);
    rewind = (Button) findViewById(R.id.rewind);
    forward = (Button) findViewById(R.id.forward);
    songProgressBar = (SeekBar) findViewById(R.id.songProgressBar);
    songTitleLabel = (TextView) findViewById(R.id.songTitle);
    songCurrentDurationLabel = (TextView) findViewById(R.id.songCurrentDurationLabel);
    songTotalDurationLabel = (TextView) findViewById(R.id.songTotalDurationLabel);
    // Mediaplayer
    mp = new MediaPlayer();
    songManager = new SongsManager();
    utils = new Utilities();

    // Listeners
    songProgressBar.setOnSeekBarChangeListener(this); // Important
    mp.setOnCompletionListener(this); // Important
    // Getting all songs list
    songsList = songManager.getPlayList();
    //final ArrayList<Song> backUp = new ArrayList<Song>(songsList);
    //handler.onUpgrade(handler.getReadableDatabase(), version , version + 1);
    version++;
    ArrayList<Song> songsFromDatabase = new ArrayList<Song>();
    songsFromDatabase = handler.getAllSongs();

    if(songsFromDatabase.size() == 0){
        feedDatabase(songsList);
    }
    else if(songsFromDatabase.size() != songsList.size()){
        feedDatabase(songsList, songsFromDatabase);
    }

    songsList = getPlaylist();
    checkForGenre(songsList);

    // By default play first song
    playSong(0);

    /**
     * Play button click event
     * plays a song and changes button to pause image
     * pauses a song and changes button to play image
     * */
    playPause.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // check for already playing
            if (playPause.isChecked()) {
                playPause.setBackgroundDrawable(getResources().getDrawable(R.drawable.play));
                mp.pause();
            } else {
                playPause.setBackgroundDrawable(getResources().getDrawable(R.drawable.pause));
                mp.start();
                //  startPlayProgressUpdater();
            }

        }
    });

    volume.setOnClickListener(new View.OnClickListener(){

        @Override
        public void onClick(View v) {

            // TODO Auto-generated method stub
            if(volume.isChecked()){
                volume.setBackgroundDrawable(getResources().getDrawable(R.drawable.volume_button));
                VolumeSeekBar ob = new VolumeSeekBar();
                ob.onCreateDialog();
            }
            else{
                volume.setBackgroundDrawable(getResources().getDrawable(R.drawable.volume_button_disabled));

            }
        }

    });
    /**
     * Next button click event
     * Plays next song by taking currentSongIndex + 1
     * */
    forward.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // check if next song is there or not
            if(currentSongIndex < (songsList.size() - 1)){
                playSong(currentSongIndex + 1);
                currentSongIndex = currentSongIndex + 1;
            }else{
                // play first song
                playSong(0);
                currentSongIndex = 0;
            }

        }
    });

    /**
     * Back button click event
     * Plays previous song by currentSongIndex - 1
     * */
    rewind.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            if(currentSongIndex > 0){
                playSong(currentSongIndex - 1);
                currentSongIndex = currentSongIndex - 1;
            }else{
                // play last song
                playSong(songsList.size() - 1);
                currentSongIndex = songsList.size() - 1;
            }

        }
    });

    /**
     * Button Click event for Repeat button
     * Enables repeat flag to true
     * */
    repeat.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            if(repeat.isChecked()){
                isRepeat = true;
                repeat.setBackgroundDrawable(getResources().getDrawable(R.drawable.object_rotate_left_checked));
            }else{
                // make repeat to true
                isRepeat = false;
                repeat.setBackgroundDrawable(getResources().getDrawable(R.drawable.object_rotate_left)); 

            }
        }
    });

    /**
     * Button Click event for Shuffle button
     * Enables shuffle flag to true
     * */
    /*  btnShuffle.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            if(isShuffle){
                isShuffle = false;
                Toast.makeText(getApplicationContext(), "Shuffle is OFF", Toast.LENGTH_SHORT).show();
                btnShuffle.setImageResource(R.drawable.btn_shuffle);
            }else{
                // make repeat to true
                isShuffle= true;
                Toast.makeText(getApplicationContext(), "Shuffle is ON", Toast.LENGTH_SHORT).show();
                // make shuffle to false
                isRepeat = false;
              //  btnShuffle.setImageResource(R.drawable.btn_shuffle_focused);
                btnRepeat.setImageResource(R.drawable.btn_repeat);
            }
        }
    });*/

    /**
     * Button Click event for Play list click event
     * Launches list activity which displays list of songs
     * */
    btnPlaylist.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            Intent i = new Intent(getApplicationContext(), PlayListActivity.class);
            i.putExtra("sortCalled", sortCalled);
            startActivityForResult(i, 100);
        }
    });

}

/**
 * Receiving song index from playlist view
 * and play the song
 * */
@Override
protected void onActivityResult(int requestCode,
        int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if(resultCode == 100){
        currentSongIndex = data.getExtras().getInt("songIndex");
        sortCalled = data.getExtras().getBoolean("sortCalled");
        // play selected song
        playSong(currentSongIndex);
    }

}

/**
 * Function to play a song
 * @param songIndex - index of song
 * */
public void  playSong(int songIndex){

    songsList = getPlaylist();
    // Play song
    try {
        mp.reset();
        mp.setDataSource(songsList.get(songIndex).getSongPath());
        mp.prepare();
        mp.start();
        // Displaying Song title
        String songTitle = songsList.get(songIndex).getSongTitle();
        songTitleLabel.setText(songTitle);

        // Changing Button Image to pause image
        playPause.setBackgroundResource(R.drawable.pause);

        // set Progress bar values
        songProgressBar.setProgress(0);
        songProgressBar.setMax(100);

        // Updating progress bar
        updateProgressBar();
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

/**
 * Update timer on seekbar
 * */
public void updateProgressBar() {
    mHandler.postDelayed(mUpdateTimeTask, 100);
}  

/**
 * Background Runnable thread
 * */
private Runnable mUpdateTimeTask = new Runnable() {
    public void run() {
        long totalDuration = mp.getDuration();
        long currentDuration = mp.getCurrentPosition();

        // Displaying Total Duration time
        songTotalDurationLabel.setText(""+utils.milliSecondsToTimer(totalDuration));
        // Displaying time completed playing
        songCurrentDurationLabel.setText(""+utils.milliSecondsToTimer(currentDuration));

        // Updating progress bar
        int progress = (int)(utils.getProgressPercentage(currentDuration, totalDuration));
        //Log.d("Progress", ""+progress);
        songProgressBar.setProgress(progress);

        // Running this thread after 100 milliseconds
        mHandler.postDelayed(this, 100);
    }
};

/**
 *
 * */
@Override
public void onProgressChanged(SeekBar seekBar, int progress, boolean fromTouch) {

}

/**
 * When user starts moving the progress handler
 * */
@Override
public void onStartTrackingTouch(SeekBar seekBar) {
    // remove message Handler from updating progress bar
    mHandler.removeCallbacks(mUpdateTimeTask);
}

/**
 * When user stops moving the progress hanlder
 * */
@Override
public void onStopTrackingTouch(SeekBar seekBar) {
    mHandler.removeCallbacks(mUpdateTimeTask);
    int totalDuration = mp.getDuration();
    int currentPosition = utils.progressToTimer(seekBar.getProgress(), totalDuration);

    // forward or backward to certain seconds
    mp.seekTo(currentPosition);

    // update timer progress again
    updateProgressBar();
}

/**
 * On Song Playing completed
 * if repeat is ON play same song again
 * if shuffle is ON play random song
 * */
@Override
public void onCompletion(MediaPlayer arg0) {

    // check for repeat is ON or OFF
    if(isRepeat){
        // repeat is on play same song again
        playSong(currentSongIndex);
    } else if(isShuffle){
        // shuffle is on - play a random song
        Random rand = new Random();
        currentSongIndex = rand.nextInt((songsList.size() - 1) - 0 + 1) + 0;
        playSong(currentSongIndex);
    } else{
        // no repeat or shuffle ON - play next song
        if(currentSongIndex < (songsList.size() - 1)){
            playSong(currentSongIndex + 1);
            currentSongIndex = currentSongIndex + 1;
        }else{
            // play first song
            playSong(0);
            currentSongIndex = 0;
        }
    }
}

@Override
public void onDestroy(){
    super.onDestroy();
    mp.release();
}

public void checkForGenre(ArrayList<Song> songsList){
    ArrayList<Song> temp = new ArrayList<Song>();
    temp = handler.getAllSongAfterSorting();
    for(int i = 0; i < temp.size(); i++){
        if("unknown".compareToIgnoreCase(temp.get(i).getGenre()) == 0){
            AskGenreDialog ask = new AskGenreDialog();
            ask.setSongTitle("The Genre for the song " + songsList.get(i).getSongTitle()+ 
            " is unknown. Do You wish to change it?");
            int id = handler.getIdForSong(songsList.get(i));
            if(id != -1)
                ask.setId(id);
            ask.onCreateDialog();

        }
    }

}

public void feedDatabase(ArrayList<Song> songsList){

    for(int i =0; i < songsList.size(); i++){
        //for(int j = 0; j < songsListFromDatabase.size(); j++){
        //  if(songs)
            Log.d("Insert:", "inserting...");
            handler.addSong(songsList.get(i));
            String song = "ID" + songsList.get(i).getId() + "SongName:" + songsList.get(i).getSongTitle();
            Log.d("Name:" , song);
        //}
    }
}

private void feedDatabase(ArrayList<Song> songsList,
        ArrayList<Song> songsFromDatabase) {
    // TODO Auto-generated method stub
    for(int i = 0; i < songsList.size(); i++){
        for(int j = 0; j < songsFromDatabase.size(); j++){

            boolean flag = true;
            if(songsList.get(i).getSongTitle().compareToIgnoreCase(songsFromDatabase.get(j).getSongTitle()) == 0){
                flag = false;

            }

            if(flag == true){
                handler.addSong(songsList.get(i));
            }

        }
    }
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event)
{
    //if one of the volume keys were pressed
    if(keyCode == KeyEvent.KEYCODE_VOLUME_DOWN || keyCode == KeyEvent.KEYCODE_VOLUME_UP)
    {
        VolumeSeekBar ob = new VolumeSeekBar();

        //change the seek bar progress indicator position
        ob.getSeekBar().setProgress(ob.getAudioManager().getStreamVolume(AudioManager.STREAM_MUSIC));

    }
    //propagate the key event
    return super.onKeyDown(keyCode, event);
} 

ArrayList<Song> getPlaylist(){

    ArrayList<Song> allSongs = new ArrayList<Song>();

    allSongs = handler.getAllSongAfterSorting();
    return allSongs;
}

DatabaseHandler getHandler(){
    return this.handler;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:12:11.440

您必须在 UI 线程中播放音频...

你应该阅读这个： http: [//developer.android.com/guide/components/processes-and-threads.html](http://developer.android.com/guide/components/processes-and-threads.html)和这个：[http ://android-developers.blogspot.com/2009/05/painless-threading.html](http://android-developers.blogspot.com/2009/05/painless-threading.html)

为了证明，可以播放很短的音频文件（1s以内，看看会不会出现同样的问题）

编辑：

[http://developer.android.com/guide/topics/media/mediaplayer.html](http://developer.android.com/guide/topics/media/mediaplayer.html)已经有一些代码可用（使用服务）

另请注意该页面上的内容：

> **异步准备**
> 
> 使用 MediaPlayer 原则上可以很简单。但是，重要的是要记住，要正确地将其与典型的 Android 应用程序集成，还需要做一些事情。例如，对 prepare() 的调用可能需要很长时间才能执行，因为它可能涉及获取和解码媒体数据。因此，与任何可能需要很长时间才能执行的方法一样，您永远不应该从应用程序的 UI 线程中调用它。这样做会导致 UI 挂起，直到方法返回，这是非常糟糕的用户体验，并可能导致 ANR（应用程序无响应）错误。即使您希望您的资源能够快速加载，
> 
> 为避免挂起您的 UI 线程，请生成另一个线程来准备 MediaPlayer 并在完成后通知主线程。但是，虽然您可以自己编写线程逻辑，但这种模式在使用 MediaPlayer 时非常常见，以至于框架提供了一种通过使用 prepareAsync() 方法来完成此任务的便捷方法。此方法开始在后台准备媒体并立即返回。媒体准备完成后，调用通过 setOnPreparedListener() 配置的 MediaPlayer.OnPreparedListener 的 onPrepared() 方法。

# css - 用 less 链接关键帧属性

> ID：13160991
> 
> 赞同：3
> 
> 时间：2012-10-31T15:07:04.260
> 
> 标签：css, animation, less, css-animations

所以我正在尝试为 css3 关键帧创建一个 LESS mixin。链接 id 和类的方式通常如下：

```
#idOne,
#idTwo,
.classOne,
.classTwo {
    ...
} 
```

这不是什么新鲜事，也没什么大不了的。我现在正在尝试的是创建以下mixin

```
#rotate(@deg){
    -webkit-transform: rotate(@deg);
    -moz-transform: rotate(@deg);
    -o-transform: rotate(@deg);
} 
```

对于以下内容：

```
@-webkit-keyframes wiggle {
  10% { #rotate(14deg); } 
  20% { #rotate(-12deg); }  
  30% { #rotate(10deg); } 
  40% { #rotate(-8deg); }
  50% { #rotate(6deg); }
  60% { #rotate(-4deg); } 
  70% { #rotate(3deg); }  
  80% { #rotate(-2deg); } 
  90% { #rotate(1deg); }  
  100% { #rotate(0deg); } 
}

@-moz-keyframes wiggle {
  10% { #rotate(14deg); }  
  20% { #rotate(-12deg); } 
  30% { #rotate(10deg); }  
  40% { #rotate(-8deg); }
  50% { #rotate(6deg); }
  60% { #rotate(-4deg); }  
  70% { #rotate(3deg); } 
  80% { #rotate(-2deg); }  
  90% { #rotate(1deg); } 
  100% { #rotate(0deg); }
}

@-o-keyframes wiggle {
  10% { #rotate(14deg); }  
  20% { #rotate(-12deg); } 
  30% { #rotate(10deg); }  
  40% { #rotate(-8deg); }
  50% { #rotate(6deg); }
  60% { #rotate(-4deg); }  
  70% { #rotate(3deg); } 
  80% { #rotate(-2deg); }  
  90% { #rotate(1deg); } 
  100% { #rotate(0deg); }  
}

@keyframes wiggle {
  10% { #rotate(14deg); }  
  20% { #rotate(-12deg); } 
  30% { #rotate(10deg); }  
  40% { #rotate(-8deg); }
  50% { #rotate(6deg); }
  60% { #rotate(-4deg); }  
  70% { #rotate(3deg); } 
  80% { #rotate(-2deg); }  
  90% { #rotate(1deg); } 
  100% { #rotate(0deg); }  
} 
```

现在的问题是：为什么我不能这样做：

```
@-webkit-keyframe,
@-moz-keyframes,
@-o-keyframes,
@keyframes {
  10% { #rotate(14deg); } 
  20% { #rotate(-12deg); }  
  30% { #rotate(10deg); } 
  40% { #rotate(-8deg); }
  50% { #rotate(6deg); }
  60% { #rotate(-4deg); } 
  70% { #rotate(3deg); }  
  80% { #rotate(-2deg); } 
  90% { #rotate(1deg); }  
  100% { #rotate(0deg); } 
} 
```

任何帮助是极大的赞赏！谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T23:21:32.377

## 更新了 LESS 1.7+ 答案

现在可以将其简化为以下内容（因为现在可以将规则集设置为变量和用于`@keyframes`[尽管我可以说还没有用于扩展]的变量名称）：

```
@myWiggle:   {
  10% { #rotate(14deg); }  
  20% { #rotate(-12deg); } 
  30% { #rotate(10deg); }  
  40% { #rotate(-8deg); }
  50% { #rotate(6deg); }
  60% { #rotate(-4deg); }  
  70% { #rotate(3deg); } 
  80% { #rotate(-2deg); }  
  90% { #rotate(1deg); } 
  100% { #rotate(0deg); }
};

#rotate(@deg){
    @{vendor}transform: rotate(@deg);
}

#doKeyFrames(@name; @frames) {
    @-webkit-keyframes @name {
      @vendor: -webkit-;
      @frames(); 
    }
    @-moz-keyframes @name {
      @vendor: -moz-;
      @frames(); 
    }
    @-o-keyframes @name {
      @vendor: -o-;
      @frames(); 
    } 
    @keyframes @name {
      @vendor: ~'';
      @frames(); 
    }
}

#doKeyFrames(wiggle; @myWiggle); 
```

## 原始（LESS 1.7 之前）答案

我认为你不能按照你想要的方式做的原因是双重的。1) LESS 在正确处理`@`规则时存在一些问题，因为它使用`@`符号表示变量；2) 我注意到专有的 CSS`keyframes`和动画有时在与其他专有的 CSS 混合时效果不佳。修改[我之前用 keyframes 给出的复杂答案](https://stackoverflow.com/questions/11551313/less-css-pass-mixin-as-a-parameter-to-another-mixin/11589227#11589227)，我能够生成一些代码，使其在 LESS 方面保持一定的紧凑性，但仍然完全扩展了 CSS 输出的功能。

它使用一些技巧（我在上一个答案中链接到）来组合字符串和变量以获得输出。它的一些部分对我来说仍然是一个谜，它实际上是如何工作的，但它似乎编译正确。

**较少的**

```
.rotate(@percent, @vendor, @deg) {
   @rotation: ~"rotate(@{deg}deg)";
   //define vendor patterns
   .makeVendor("-moz-") {
     (@percent) {-moz-transform: @rotation;}
    }
   .makeVendor("-webkit-") {
     (@percent) {-webkit-transform: @rotation;}
    }
   .makeVendor("-o-") {
     (@percent) {-o-transform: @rotation;}
    }
   .makeVendor("-ms-") {
     (@percent) {-ms-transform: @rotation;}
    }
   .makeVendor("") {
     (@percent) {transform: @rotation;}
    }
    //call vendor specific string
    .makeVendor(@vendor);

}

// define keyframe mixin

.keyframes(@selector, @name) {
    @newline: `"\n"`; // Newline
    .setVendor(@pre, @post, @vendor) {
        (~"@{pre}@@{vendor}keyframes @{name} {@{newline}"){
         .rotate(10%, @vendor, 14);  
}
         .rotate(20%, @vendor, -12);
         .rotate(30%, @vendor, 10);
         .rotate(40%, @vendor, -8);
         .rotate(50%, @vendor, 6);
         .rotate(60%, @vendor, -4);
         .rotate(70%, @vendor, 3);
         .rotate(80%, @vendor, -2);
         .rotate(90%, @vendor, 1);
         .rotate(100%, @vendor, 0);  

       .Local(){}
       .Local() when (@post=1) {
           (~"}@{newline}@{selector}") {
              -moz-animation: @name;
              -webkit-animation: @name;
              -o-animation: @name;
              -ms-animation: @name;
              animation: @name;
           } 
       }    
       .Local;
    } 
    .setVendor(""            , 0,    "-moz-");
    .setVendor(~"}@{newline}", 0, "-webkit-");
    .setVendor(~"}@{newline}", 0,      "-o-");
    .setVendor(~"}@{newline}", 0,     "-ms-");
    .setVendor(~"}@{newline}", 1,         "");
} 
```

**CSS 输出**

```
@-moz-keyframes wiggle {
 10% {
  -moz-transform: rotate(14deg);
}
20% {
  -moz-transform: rotate(-12deg);
}
30% {
  -moz-transform: rotate(10deg);
}
40% {
  -moz-transform: rotate(-8deg);
}
50% {
  -moz-transform: rotate(6deg);
}
60% {
  -moz-transform: rotate(-4deg);
}
70% {
  -moz-transform: rotate(3deg);
}
80% {
  -moz-transform: rotate(-2deg);
}
90% {
  -moz-transform: rotate(1deg);
}
100% {
  -moz-transform: rotate(0deg);
}
}
@-webkit-keyframes wiggle {
 10% {
  -webkit-transform: rotate(14deg);
}
20% {
  -webkit-transform: rotate(-12deg);
}
30% {
  -webkit-transform: rotate(10deg);
}
40% {
  -webkit-transform: rotate(-8deg);
}
50% {
  -webkit-transform: rotate(6deg);
}
60% {
  -webkit-transform: rotate(-4deg);
}
70% {
  -webkit-transform: rotate(3deg);
}
80% {
  -webkit-transform: rotate(-2deg);
}
90% {
  -webkit-transform: rotate(1deg);
}
100% {
  -webkit-transform: rotate(0deg);
}
}
@-o-keyframes wiggle {
 10% {
  -o-transform: rotate(14deg);
}
20% {
  -o-transform: rotate(-12deg);
}
30% {
  -o-transform: rotate(10deg);
}
40% {
  -o-transform: rotate(-8deg);
}
50% {
  -o-transform: rotate(6deg);
}
60% {
  -o-transform: rotate(-4deg);
}
70% {
  -o-transform: rotate(3deg);
}
80% {
  -o-transform: rotate(-2deg);
}
90% {
  -o-transform: rotate(1deg);
}
100% {
  -o-transform: rotate(0deg);
}
}
@-ms-keyframes wiggle {
 10% {
  -ms-transform: rotate(14deg);
}
20% {
  -ms-transform: rotate(-12deg);
}
30% {
  -ms-transform: rotate(10deg);
}
40% {
  -ms-transform: rotate(-8deg);
}
50% {
  -ms-transform: rotate(6deg);
}
60% {
  -ms-transform: rotate(-4deg);
}
70% {
  -ms-transform: rotate(3deg);
}
80% {
  -ms-transform: rotate(-2deg);
}
90% {
  -ms-transform: rotate(1deg);
}
100% {
  -ms-transform: rotate(0deg);
}
}
@keyframes wiggle {
 10% {
  transform: rotate(14deg);
}
20% {
  transform: rotate(-12deg);
}
30% {
  transform: rotate(10deg);
}
40% {
  transform: rotate(-8deg);
}
50% {
  transform: rotate(6deg);
}
60% {
  transform: rotate(-4deg);
}
70% {
  transform: rotate(3deg);
}
80% {
  transform: rotate(-2deg);
}
90% {
  transform: rotate(1deg);
}
100% {
  transform: rotate(0deg);
}
}
.myWiggleClass {
  -moz-animation: wiggle;
  -webkit-animation: wiggle;
  -o-animation: wiggle;
  -ms-animation: wiggle;
  animation: wiggle;
} 
```

# linux - 使用 GREP 和 Inotifywait

> ID：13160992
> 
> 赞同：1
> 
> 时间：2012-10-31T15:07:05.550
> 
> 标签：linux, grep

我有这个小脚本，我想知道是否有人可以告诉我哪里出错了。基本上就是在看一个文件夹，如果`.php.something-else`上传了一个带有的文件，就应该删除。

如何获取 grep 文件名？本质上，我想检查 FILE 是否有扩展名 .php.something-else。

```
inotifywait -m -r --format '%w%f' -e create /samplefolder | while read FILE
do
      if grep '*.php.* ; then  <<-----HERE, I WANT THE FILE NAME
         /bin/rm $FILE
      fi     
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:13:08.990

你不需要grep。检查文件是否存在并将其删除：

```
if [ -f *.php.* ] ; then 
     /bin/rm $FILE
  fi 
```

* * *

您可以使用`case`它来匹配它：

```
case $FILE in
*.php.*)
     /bin/rm $FILE
esac 
```

# javascript - 使用 javascript 和正则表达式禁用 Internet Explorer 中的复选框

> ID：13160994
> 
> 赞同：0
> 
> 时间：2012-10-31T15:07:24.053
> 
> 标签：javascript, jquery, internet-explorer

我有一个动态预订页面，用户可以选择 x 数量的项目用于课程中的人员列表。

一个例子：每个人的课程可能列出 3 个复选框，但限制为 2。当达到 2 时，该人的剩余 1 个复选框被禁用。

我目前拥有的解决方案在 Firefox 和 chrome 中完美运行，但在 Internet Explorer 中却不行。

解释我的代码的原因：

因为person和course项是动态的，为了以后在php中处理选择，每个checkbox都有一个动态的名字。

如果每个项目都有一个 id，每个人都有一个 id，则复选框名称基于 [userid_itemid]

当 3 个用户在页面上为用户 1-(1_1)、(1_2)、(1_3)
为用户 2-(2_1)、(2_2)进行选择时，复选框名称将遵循类似 3 个复选框的模式， (2_3)
用于用户 3-(3_1)、(3_2)、(3_3)

这是使复选框能够在 Firefox 和 chrome 中正确禁用的代码：

```
$(document).ready(function(){  
    $("input:checkbox").click(function() {
        var chktest="input\\["+$(this).attr('id');
        var bol = $("input[name^="+chktest+"_]:checked").length >= 2;
        $("input[name^="+chktest+"_]").not(":checked").attr("disabled",bol);
    });   
}); 
```

但是 Internet Explorer（绝对是版本 8）不限制任何形状或形式的复选框。

我上面的代码是基于此：

[限制复选框数量](https://stackoverflow.com/questions/2966382/limit-checkbox-amount) ANSWER 19 显示了一个工作演示。

它可以在此处提供的演示中跨浏览器工作，但由于我的数据是动态的，我的代码更复杂，我认为这导致了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:17:18.543

**选项1**

不久前，我写了[一篇博客文章](http://www.benlesh.com/2012/06/helpful-jquery-selectors-select-by.html)，其中包含我多年来编写的一些自定义 JQuery 选择器，我想分享。那里有一个供您通过正则表达式进行选择的选项，您可能会发现它很有用。

...至少这是一个很好的起点，如果您需要，如何编写自己的选择器。 [这是 github 上的代码](https://github.com/blesh/jquery.lesh.selectors.js)。我认为你会使用的是`:attrregex`

**选项 2**

除此之外，另一种选择是将自定义属性放在您的类中，用于您名称中的各个方面（假设您可以控制它）：

```
<input type="checkbox" name="user_1-1" data-user="1"/>
<input type="checkbox" name="user_1-2" data-user="1"/>
<input type="checkbox" name="user_1-3" data-user="1"/>
<input type="checkbox" name="user_2-1" data-user="2"/>
<input type="checkbox" name="user_2-2" data-user="2"/>
<input type="checkbox" name="user_2-3" data-user="2"/> 
```

那么你可以选择 by`$('input[data-user=' + userId + ']')`或者你有什么。

我希望那里有帮助。