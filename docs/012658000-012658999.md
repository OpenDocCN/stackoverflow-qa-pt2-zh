# StackOverflow 问答 12658000-12658999

# amazon-ec2 - owncloud挂载文件夹消失

> ID：12658001
> 
> 赞同：2
> 
> 时间：2012-09-30T01:48:11.093
> 
> 标签：amazon-ec2, bitnami, owncloud

我最近在 Bitnami LAMP 堆栈上安装了 Owncloud 4.5（测试版）和 4.0.7（最新稳定版）作为亚马逊 ec2。

安装后，我一直在尝试使用外部存储应用程序从 S3、FTP 或保管箱安装备份。在所有情况下，只要我在应用程序中设置配置，安装文件夹就会从客户端的浏览器中消失。当我 ssh 并查看文件夹仍然存在时。唯一有效的是安装本地文件夹的选项。

我确实尝试更改这些文件夹的权限和所有权，但似乎并非如此。

也发布在 forum.owncloud.org 上，但似乎没有人回答。

以前有人见过这个问题吗？

谢谢！

# http-headers - 防止看到“选项不是唯一的”错误的最佳方法是什么？

> ID：12658002
> 
> 赞同：1
> 
> 时间：2012-09-30T01:48:11.870
> 
> 标签：http-headers, shopify

当我想更新特定产品时，如何确定非唯一选项并防止看到“选项不是唯一”错误？

这是创建产品的 xml：

```
my $xml = qq~<?xml version="1.0" encoding="UTF-8"?>
<product>
<title>$title</title>
<body-html>$description</body-html>
<vendor>$vendor</vendor>
<product-type>$product_type</product-type>
<published type="boolean">$publish_status</published>~;
$xml.=qq{<variants type="array">
<variant>
      <title>$title</title>
  <option1>$title</option1>
  <option2 nil="true"></option2>
  <option3 nil="true"></option3>};
$xml.=qq{<price>$price</price>
  <sku>$sku</sku>
  <position type="integer">1</position>
 </variant>
</variants>};
$xml.='</product>'; 
```

这是修改产品的 xml：

```
my $xml = qq~<?xml version="1.0" encoding="UTF-8"?>
<product>~;

$xml.=qq~<title>$title</title>~;
$xml.=qq~<id type="integer">$id_product</id>~;
$xml.=qq~<body-html>$description</body-html>
<vendor>$vendor</vendor>
<product-type>$product_type</product-type>
<published type="boolean">$publish_status</published>
<variants type="array">
  <variant>~;
$xml.= qq~<title>$title</title>~;
$xml.= qq~<option1>$title</option1>~;
$xml.= qq~<option2 nil="true"/>~;
$xml.= qq~<option3 nil="true"/>~;
$xml.=qq~<price>$price</price>
  <sku>$sku</sku>
  <position type="integer">1</position>
</variant>
</variants>~;
$xml.='</product>'; 
```

当我尝试修改特定产品时，我收到“选项不是唯一的”错误。option1 标签内容与之前的 option1 标签内容相同。它是一个错误吗？还是 option1 的值必须与前一个不同？什么我没有看到“选项不是唯一的”错误？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:09:34.953

是的，更新产品时 API 中存在错误，并且您正在传递一个已经存在的选项。该错误消息实际上非常具有误导性，目前正在处理中。

# .net - 编写一个为传入消息触发事件的 Socket 包装类

> ID：12658003
> 
> 赞同：0
> 
> 时间：2012-09-30T01:48:33.153
> 
> 标签：.net, sockets, events

我正在编写一个应用程序服务器，它将维护超过 2,000 个长期持久客户端 TCP 连接。我想知道异步接受连接并从中读取数据的最有效方法是什么。

我本质上想将所有套接字代码包装在一个具有这样公共足迹的类中：

```
public partial class ApplicationClient
{
    private Socket socket;

    public ApplicationClient(Socket socket)
    {
        this.socket = socket;
    }

    public event ApplicationMessageEventHander MessageReceived;

    private void OnMessageReceived(string message)
    {
        ApplicationMessageEventHander messageReceived = this.MessageReceived;
        if (messageReceived != null)
        {
            var eventArgs = new ApplicationMessageEventArgs(message);
            messageReceived(this, eventArgs);
        }
    }
} 
```

使用 .NET 的套接字来适应这种架构的最佳方式是什么？

**编辑：**还值得一提的是，客户端传递的每条消息都将以换行符结尾。在收到整个消息之前，我不想触发该事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T02:14:37.253

您应该使用 BeginReceive 和 EndReceive 函数。它们将参数传递给 AsyncCallback 委托。然后你必须编写一些代码来包装它来处理你的新行，然后你应该调用另一个委托。

我相信这样的事情将是处理它的适当方法：

```
const uint buf_len = 40;
byte[] bBuffer;
string strBuffer;

public ApplicationClient(Socket socket)
{
    this.socket = socket;
    bBuffer = new byte[buf_len];
    strBuffer = "";
    socket.BeginReceive(buffer, 0, buf_len, 0, my_callback, null);
}

protected void AsyncCallback(IAsyncResult iar)
{
    int i;
    int bytesRead;
    string[] parts;

    bytesRead = socket.EndReceive(iar);

    if(read > 0)
    {
        strBuffer += Encoding.ASCII.GetString(buffer, 0, bytesRead);
        parts = strBuffer.split("\n");
        for(i = 0; i < parts.Length - 1; ++i)
        {
            theRealCallback(parts[i]);
        }
        strBuffer = parts[i];
    }

    socket.BeginReceive(buffer, 0, buf_len, 0, my_callback, null);
} 
```

# c# - 创建流程图/伪代码

> ID：12658009
> 
> 赞同：0
> 
> 时间：2012-09-30T01:51:25.737
> 
> 标签：c#

我有一个流程图作业，需要帮助才能开始。我对编程非常陌生，并从在线上课开始。这是作业问题：“Dorian Gray Portrait Studio 根据拍摄肖像的主体数量向客户收费。收费表如下：肖像主体/基本价格

1.  1/ 100 美元
2.  2/ 130 美元
3.  3/ 150 美元
4.  4/ 165 美元
5.  5/ 175 美元
6.  6/ 180 美元
7.  7 个或更多/185 美元。

周六或周日的肖像坐姿比基本价格高出 20%。为接受以下数据的程序设计流程图或伪代码：为肖像而坐的家庭的姓氏、肖像中的主体数量以及预定的星期几。显示所有输入数据以及计算的坐席费。我只需要一个如何做到这一点的起点。我的课本很难理解，对我一点帮助也没有。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T02:22:20.517

## 列出以下内容：

> *   你得到的**事实**是什么？
>     
>     
> *   描述了哪些**活动**？
>     
>     
> *   您可以对这些活动发表哪些**声明？**
>     
>     
> *   有多少**流程**需要跟踪？
>     
>     
> *   从开始到结束，每个过程的**步骤是什么？**
>     
>     
> *   什么是**变量**，什么时候需要考虑？
>     
>     
> *   在这些过程之前、之中和之后必须做出哪些**决定？**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T02:02:56.247

伪代码可能会像这样。您必须填写 ... 部分。

```
; read input data
read lastName
...
; calculate fee
if numberOfSubjects is 1 then fee is 100
else if ...
; adjust for week day
...
; print input data & fee
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T02:37:28.407

这是一个常见的程序流程图的关键：

![钥匙](../Images/40d18066976bf11ce475e55e87652f8e.png)

因此，您的流程图的开头将如下所示：

![流程图](../Images/dcf47129bd6fd08115bba15dfa7c1b48.png)

从那里我认为您可以根据密钥弄清楚如何结束您的流程图。

我使用过的程序的 I 流程图示例：

![流程图，例如。](../Images/a241207c6d2195293f1061a5ce22c1ee.png)

至于伪代码，我会[`switch`](http://msdn.microsoft.com/en-us/library/06tc147t(v=vs.80).aspx)为你的真实代码推荐一个语句，但你的真实代码看起来像：

```
string lastname;
string dayOfWeek;
int numberOfPortraits, cost;
...
lastname = Console.ReadLine();
numberOfPortraits = int.Parse(Console.ReadLine());
dayOfWeek = Console.ReadLine();
...
switch (numberOfPortraits)
{
    case 0:
        cost = 0;
        break;

    case 1:
        cost = 100;
        break;

    ...

    default:
        cost = 185;
        break;
}

return cost; 
```

你也可以[`if-else if`](http://msdn.microsoft.com/en-us/library/5011f09h(v=vs.110).aspx)像[dschultz](https://stackoverflow.com/questions/12658009/creating-flowcharts-pseudocode/12658051#12658051)所说的那样使用，对于初学者来说更容易学习，但你应该使用更高级的东西`switch`。但这可能会变得势不可挡，并且 switch 语句可以更清晰。请参阅[连续 If 语句](https://codereview.stackexchange.com/questions/11718/continues-if-statements)以了解它会变得多么混乱。

# eclipse - Eclipse 卡住，100% cpu

> ID：12658013
> 
> 赞同：1
> 
> 时间：2012-09-30T01:51:55.990
> 
> 标签：eclipse, crash

当我启动 Eclipse 3.8 时，它停留在“正在加载工作台”，并在日志中给出以下错误。我已经搜索并没有找到任何解决方案......有什么想法吗？

```
!ENTRY org.eclipse.ui 2 2 2012-09-29 18:48:14.449
!MESSAGE Ignored attempt to add saveable that was already registered
!STACK 0
org.eclipse.core.runtime.AssertionFailedException: unknown saveable: org.eclipse.ui.internal.DefaultSaveable@1c3aee5b from part: org.eclipse.ui.internal.ErrorEditorPart@1c3aee5b
    at org.eclipse.ui.internal.SaveablesList.logWarning(SaveablesList.java:187)
    at org.eclipse.ui.internal.SaveablesList.addModel(SaveablesList.java:116)
    at org.eclipse.ui.internal.SaveablesList.addModels(SaveablesList.java:289)
    at org.eclipse.ui.internal.SaveablesList.postOpen(SaveablesList.java:695)
    at org.eclipse.ui.internal.PartList.partOpened(PartList.java:234)
    at org.eclipse.ui.internal.PartList.access$0(PartList.java:210)
    at org.eclipse.ui.internal.PartList$1.propertyChanged(PartList.java:40)
    at org.eclipse.ui.internal.WorkbenchPartReference.fireInternalPropertyChange(WorkbenchPartReference.java:375)
    at org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:610)
    at org.eclipse.ui.internal.EditorAreaHelper.setVisibleEditor(EditorAreaHelper.java:271)
    at org.eclipse.ui.internal.EditorManager.setVisibleEditor(EditorManager.java:1459)
    at org.eclipse.ui.internal.EditorManager$5.runWithException(EditorManager.java:972)
    at org.eclipse.ui.internal.StartupThreading$StartupRunnable.run(StartupThreading.java:31)
    at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
    at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
    at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3529)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3182)
    at org.eclipse.ui.application.WorkbenchAdvisor.openWindows(WorkbenchAdvisor.java:803)
    at org.eclipse.ui.internal.Workbench$33.runWithException(Workbench.java:1600)
    at org.eclipse.ui.internal.StartupThreading$StartupRunnable.run(StartupThreading.java:31)
    at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
    at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
    at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3529)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3182)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2609)
    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
    at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)

!ENTRY org.eclipse.ui 4 4 2012-09-29 18:48:14.593
!MESSAGE Could not create view: 'org.eclipse.jdt.ui.JavadocView'.

!ENTRY org.eclipse.ui 4 4 2012-09-29 18:48:14.594
!MESSAGE Could not create view: 'org.eclipse.jdt.ui.SourceView'.

!ENTRY org.eclipse.ui 4 4 2012-09-29 18:48:14.594
!MESSAGE Could not create view: 'org.eclipse.jdt.callhierarchy.view'.

!ENTRY org.eclipse.ui 4 4 2012-09-29 18:48:14.594
!MESSAGE Could not create view: 'com.android.ide.eclipse.ddms.views.LogCatView'.

!ENTRY org.eclipse.ui 2 2 2012-09-29 18:48:15.088
!MESSAGE Perspective Java has been made into a local copy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:25:26.813

似乎与已知的 Eclipse 错误有关：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=186977](https://bugs.eclipse.org/bugs/show_bug.cgi?id=186977)

如此处所写[https://bugs.eclipse.org/bugs/show_bug.cgi?id=349543#c4](https://bugs.eclipse.org/bugs/show_bug.cgi?id=349543#c4)，

> 这通常发生在一个
> 
> 1.  打开编辑器
> 2.  退出 Eclipse
> 3.  启动 Eclipse
> 4.  删除项目
> 5.  单击已删除文件的编辑器选项卡 ==> 例外。

每当您遇到 Eclipse 时，一些一般性建议：

1.  使用“-clean”选项从命令行启动 eclipse。这将强制它清理所有 eclipse 缓存（项目和工作区缓存）

    为此，在 Windows 上，在 cmd shell“eclipse.exe -clean”中运行。

    在 Mac 上，在终端“/path_to_eclipse/Eclipse.app/Contents/MacOS/eclipse -clean &”中输入

2.  如果这不起作用，请重命名您的工作区文件夹以强制 eclipse 创建一个新文件夹：也许它与您工作区中发生的一些丑陋的事情有关。然后，要么尝试重新打开以前的工作区，要么只从新创建的“错误”工作区中导入项目。但是，您当然会失去工作区特定的设置。

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T17:48:42.250

我遇到过同样的问题。我通过停止索引器解决了这个问题：

`Project properties-> C/C++ General->Indexer:check enable project specific settings, uncheck enable indexer`.

# java - eclipse有自己的库吗？

> ID：12658014
> 
> 赞同：0
> 
> 时间：2012-09-30T01:52:15.160
> 
> 标签：java, eclipse

eclipse 有自己的库，还是 java 有一个所有 IDE 都使用的大型共享库？

谢谢，对我缺乏知识感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T01:56:22.733

Eclipse 有[自己的平台/框架](http://www.eclipse.org/platform/)，用于开发一般的 GUI 应用程序，特别是 IDE。这又基于模块化 Java 应用程序的 OSGi 标准。

Eclipse 甚至包括一个用于代替 Swing 的本机代码小部件库 (SWT)。

该基础架构的大部分在 Eclipse 系列 IDE（如 Aptana）之间共享，但与 Netbeans 等其他 IDE 并不真正共享。OTOH，一些特定于任务的代码，例如连接到源代码控制系统和数据库的驱动程序，也可用于其他平台。

Eclipse 也有自己的 Java 编译器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T01:54:07.937

所有 IDE 都不使用大型共享库。

IntelliJ 与 Eclipse 完全不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T01:56:13.223

[JDT](http://www.eclipse.org/jdt/core/index.php)是 Eclipse 的 Java 基础结构。它被 Eclipse 使用并且在它之外也很流行，但是没有“所有 IDE 共享的库”。

# ruby-on-rails - Ruby on Rails 新手 - 模型/迁移说明？

> ID：12658015
> 
> 赞同：0
> 
> 时间：2012-09-30T01:52:19.160
> 
> 标签：ruby-on-rails

对于基本的基本问题，我很抱歉，但我在理解 RoR 文档时遇到了一些麻烦。

假设我有 3 个模型——学生、班级和 Enrolled_in。如果不清楚，学生将注册班级，因此 Enrolled_in 应该将学生和班级作为外键。我为每一个生成了模型，但我很困惑我应该将什么放入关联的迁移文件与每个表的关联模型文件。我是否在迁移文件中指定表的列，以及模型中的关键约束？

如果有人可以澄清这一点，或者告诉我他们将如何解决我发布的示例问题，那将非常有帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T02:05:21.960

首先，为了遵循约定，模型名称应该是`EnrolledIn`，而不是`Enrolled_in`。更好的是，将其更改为`Enrollment`或具有明确含义的名词。而且您在尝试使用`Class`（已经是 ruby​​ 对象）作为模型名称时也会遇到麻烦。也许将其更改为`Course`或类似的东西。

除此之外，您应该定义迁移中的所有列。您可以`enrolled_ins`像这样定义表：

```
add_table :enrolled_ins do |t|
  t.references :student
  t.references :course        # I'm using course instead of class as noted above
end 
```

该`references`快捷方式将添加一个 :student_id 和 :course_id 作为整数字段。

在您的模型文件中，您将拥有：

```
# student.rb
class Student < ActiveRecord::Base
  has_many :enrolled_ins
  has_many :courses, :through => :enrolled_ins
end

# course.rb
class Course < ActiveRecord::Base
  has_many :enrolled_ins
  has_many :students, :through => :enrolled_ins
end

# enrolled_in.rb
class EnrolledIn < ActiveRecord::Base
  belongs_to :student
  belongs_to :course
end 
```

# ruby-on-rails - rails destroy model 命令在 git 中不可见

> ID：12658017
> 
> 赞同：0
> 
> 时间：2012-09-30T01:53:02.447
> 
> 标签：ruby-on-rails, ruby-on-rails-3, git

刚开始使用 rails 和 git 并遇到了我生成模型的问题，但是为了开始我的第一次尝试，我决定使用脚手架。在这种情况下，我运行了以下命令

```
rails destroy model company 
```

我在我创建的开发分支中工作，运行上述命令后，我用 git status 检查了我的仓库，它说没有要提交的更改。我检查了我的 model.rb 文件是否已被删除，所以切换到我的 master 分支并运行命令：

```
git merge dev 
```

但是它说一切都是最新的，即使我的开发分支中有更改，似乎没有在我的 git 存储库中注册。

我做错了什么，还是我对 rails 的生成和销毁命令有什么误解？

# c++ - 如何确定鼠标的拖动方式（Win32、C++）

> ID：12658018
> 
> 赞同：1
> 
> 时间：2012-09-30T01:53:38.577
> 
> 标签：c++, winapi

我目前正在做一个项目，该项目需要我知道鼠标何时被拖到左边或右边。

我想用这些信息做的是在 3d 空间（使用 OpenGL/Win32）中向左或向右拖动一个对象，具体取决于拖动鼠标的方式。

问题是，我不知道如何确定鼠标的拖动方式。

我尝试找到之前的 x 坐标，并从当前的 x 坐标中减去它，但我不知道如何确定之前的 x 坐标！

有人可以帮帮我吗？

（**PS**我已经知道当前 x 鼠标位置是用 LOWORD(lParam) 找到的，但我不知道如何确定以前的 x 鼠标位置。感谢您的时间。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T01:57:38.543

您可以通过将当前鼠标位置存储为“最后一个”鼠标位置来自己完成，然后在两次鼠标位置更新后减去。

```
onMouseMove(mouseX, mouseY):
    if previousX and previousY are set:
        deltaX = previousX - mouseX
        deltaY = previousY - mouseY
        actOnDrag(deltaX, deltaY)

    previousX = mouseX
    previousY = mouseY 
```

你可以设置`previousX`和`previousY`一些疯狂的哨兵值（例如-1）来确定它们是否曾经被设置过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-28T18:32:55.363

您可以使用该`DragDetect`功能。

```
BOOL DragDetect(HWND  hwnd, POINT pt); 
```

[https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-dragdetect](https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-dragdetect)

# json - 如何最好地使用 Google Maps API 处理 oData、JSON 数据

> ID：12658022
> 
> 赞同：1
> 
> 时间：2012-09-30T01:55:02.713
> 
> 标签：json, google-maps-api-3, odata

对于这样一个基本的问题，我很抱歉，但这对我来说都是全新的。处理这种情况的最佳方法是什么：

1.  通过 oData 访问地址数据
2.  oData一次只能获取50条记录
3.  允许用户根据状态字段选择使用某种切换开关检索的内容（某些选择将导致超过 50 条记录）
4.  根据复选框切换标记的可见性

在选择过程中如何组合各种 oData 调用？如何根据存储在 JSON 中的状态数据切换标记？还是我都错了？感谢你们提供的任何帮助，让我朝着正确的方向前进。

# asp.net-mvc - IE9 不会呈现@font-face truetype 字体

> ID：12658036
> 
> 赞同：0
> 
> 时间：2012-09-30T01:58:54.190
> 
> 标签：asp.net-mvc, internet-explorer, font-face

IE9 不会呈现 @font-face truetype 字体，尽管所有其他浏览器都会这样做。我收到以下异常：

```
CSS3114: @font-face failed OpenType embedding permission check. Permission must 
be Installable. 
```

我在这里和其他地方发现了类似的问题，但提供的解决方案都不适合我。例如，在 Web.config 中添加以下内容并不能解决问题。

```
<httpProtocol>
      <customHeaders>
        <add name="Access-Control-Allow-Origin" value="*" />
      </customHeaders>
</httpProtocol> 
```

我使用的字体也没有 woff 版本，我不确定是否允许将其转换为 woff 格式。我目前正在制作一个 ASP.NET MVC 项目。如何在项目中嵌入 ttf 字体并在 IE9 中使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T02:46:25.817

因为IE不支持truetype所以需要转成.eot

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:29:17.887

您应该咨询字体版权所有者，以提供字体的可安装版本或以其他格式向您发送相同的字体。

您可以要求的另一件事是允许您进行修改。在这种情况下，我会推荐[**Fontlab Studio 5**](http://www.fontlab.com/buy)的完整版：安装程序，打开 ttf 文件，从“文件”菜单中选择“字体信息... Ctrl+Alt+F”，展开“名称和版权” ”项目，选择“嵌入”项目，然后将“嵌入设置（**fsType**）：”设置为“**一切都允许（可安装模式）** ”，按“确定”，“文件”，“生成字体.. .Ctrl+Alt+G”，按“保存”。

如果你不能使用 Fontlab Studio 5，你可以尝试下面列出的任何工具......但是它是否可以修改取决于给定的字体，所以如果可以的话，不是你做错了什么'不被修改。

*   [嵌入](http://carnage-melon.tom7.org/embed/)

*   [TTF补丁](http://www.derwok.de/downloads/ttfpatch/)

*   [字体工具](http://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&id=FontUtils#fb138857)

如果您真的无法使用这些方法中的任何一种，请选择其他字体。（或者作为最后一种方法，您可以通过使用图像而不是字体来忽略 SEO 方面。或者忽略 IE9 用户。）

祝你好运！:)

# android - Android 上的 cookie 是否与其他浏览器中的相同？

> ID：12658038
> 
> 赞同：0
> 
> 时间：2012-09-30T02:00:01.520
> 
> 标签：android

在比较桌面和移动像Android时，我想知道Android上的浏览器cookie是否与桌面相同？或者 Android 是否支持与桌面浏览器完全相同的 cookie？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T02:01:21.567

Cookie 在每个现代浏览器上的工作方式都是一样的。

# java - Spring Mvc DataSource Bean 使用注解时

> ID：12658043
> 
> 赞同：0
> 
> 时间：2012-09-30T02:01:45.607
> 
> 标签：java, spring-mvc, dependency-injection

我想知道在 applicationContext.xml 中使用注释时如何在 dataSource bean 上完成**依赖注入**，或者将这个 bean 注入 DAO 的等效注释是什么，我定义了以下 dataSource bean：

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
            <property name="driverClassName" value="${jdbc.driverClassName}"/>
            <property name="url" value="${jdbc.url}"/>
            <property name="username" value="${jdbc.username}"/>
            <property name="password" value="${jdbc.password}"/>
</bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T02:27:44.990

像这样：创建一个`SimpleJdbcTemplate`并将其注入`DataSource`. 然后将其注释到您的 DAO 中：

```
@Repository
public class FooDao {
    @Resource(name = "jdbcTemplate")
    private SimpleJdbcTemplate jdbcTemplate;
} 
```

你是对的——你不需要更多的东西`SimpleJdbcTemplate`。不需要休眠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T02:34:25.473

这些中的任何一个都应该起作用。

@Resource 私有数据源数据源；

或者

@Autowired 私有数据源数据源

# android - 用于移动浏览器的 Android AVD 模拟器开发工具？

> ID：12658044
> 
> 赞同：9
> 
> 时间：2012-09-30T02:01:48.040
> 
> 标签：android, browser, emulation, google-chrome-devtools

我正在开发一个移动网络应用程序。我有多种正在测试的设备，但我没有的设备是运行 Android 2.3.x 的 Android 设备。我已经通过 Eclipse 使用了 Android AVD 模拟器。

使用模拟器进行测试很好，但是我的网络应用程序的一些 CSS 样式在 Android 2.3.x 网络浏览器中呈现奇怪。

有没有办法在 AVD 模拟器中使用默认的 Android 浏览器调试或试验 CSS？我不确定是否有可能以某种方式检查和更改浏览器中的 CSS，以便找出问题所在（类似于您使用 Chrome 开发工具或 Firebug 所做的事情）。

我已经读到有一些方法可以使用 Android 的移动 Chrome 来执行此操作，它可以与桌面上的 Chrome 连接，然后您可以通过这种方式进行调试......但我不确定默认的 Android 2.3.x 浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-02-24T18:01:24.267

您可以从桌面上的 Chrome 连接到模拟的 Android 设备（例如，从 Android Studio 启动的 AVD）或 USB 连接的真实设备（启用 USB 调试），通过在桌面 Chrome 浏览器中键入以下 url 来运行 Chrome ：

```
chrome://inspect/#devices 
```

然后它将列出您可以与之交互的所有连接设备。例如，您可以让它打开一个特定的 url，然后检查该选项卡 - 它提供对 Web 工具控制台的访问 - 就像在桌面 Chrome 上一样。

# iphone - 如何通过电子邮件发送 UIWebView 的 URL

> ID：12658047
> 
> 赞同：-1
> 
> 时间：2012-09-30T02:01:56.550
> 
> 标签：iphone, ios, uiwebview

我想知道如何通过电子邮件发送 webview 链接。然后，当收件人收到电子邮件时，他们可以在 Safari 中打开链接。提前致谢！

我把这个 BOOL 放在我的代表中

```
 - (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
if ([[[request URL] scheme] isEqual:@"mailto"]) { 
    [[UIApplication sharedApplication] openURL:[request URL]]; return NO; 
} 
return YES; 
}

MFMailComposeViewController *composer = [[MFMailComposeViewController alloc] init]; 
[composer setMailComposeDelegate:self]; 
if ([MFMailComposeViewController canSendMail]) { 
    [composer setToRecipients:[NSArray arrayWithObjects:@"", nil]];
    [composer setSubject:@""]; 
    [composer setMessageBody:webview isHTML:YES]; 
    [composer setModalTransitionStyle:UIModalTransitionStyleCrossDissolve]; 
    [self presentModalViewController:composer animated:YES];
    [composer release];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T10:18:32.073

**您在列表中做两件不同的事情：**

*   如果您想在 web 视图中显示`MFMailComposeViewController`点击`mailto:`链接，则代码的第一部分（在 中`shouldStartLoadWithRequest`）应该可以工作，除非您必须更改`isEqual`为`isEqualToString`：

    ```
    - (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {
      if ([[[request URL] scheme] isEqualToString:@"mailto"]) {  //Change in this line
          [[UIApplication sharedApplication] openURL:[request URL]]; return NO; 
      } 
      return YES; 
    } 
    ```

    （请注意，使用此功能时用户将离开您的应用程序）

*   如果您想将用户点击的链接发送给某人，您可以使用类似

    ```
    -(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {

    MFMailComposeViewController *composer = [[MFMailComposeViewController alloc] init]; 
    [composer setMailComposeDelegate:self]; 
    if ([MFMailComposeViewController canSendMail]) { 
        [composer setToRecipients:[NSArray arrayWithObjects:@"", nil]];
        [composer setSubject:@"Link"]; 
        [composer setMessageBody:request.URL isHTML:YES]; 
        [composer setModalTransitionStyle:UIModalTransitionStyleCrossDissolve]; 
        [self presentModalViewController:composer animated:YES];
        [composer release];
    }

    return YES; 
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T23:12:08.493

```
 MFMailComposeViewController *composer = [[MFMailComposeViewController alloc] init];
        [composer setMailComposeDelegate:self];
        if ([MFMailComposeViewController canSendMail]) {
            [composer setToRecipients:[NSArray arrayWithObjects:@"", nil]];
            [composer setSubject:@""];
            [composer setMessageBody:webview.request.URL.absoluteString isHTML:YES];
            [composer setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
            [self presentModalViewController:composer animated:YES];
            [composer release];
        }
        else
            [composer release];
    }
} 
```

# performance - 我似乎无法正常运行...它卡住并且不显示输出

> ID：12658050
> 
> 赞同：-2
> 
> 时间：2012-09-30T02:02:55.340
> 
> 标签：performance, bash, loops, while-loop

这是我的脚本：

```
while [[ $startTime -le $endTime ]]
do

thisfile=$(find * -type f | xargs grep -l $startDate | xargs grep -l $startTime)
fordestination=`cut -d$ -f2 $thisfile | xargs cut -d ~ -f4`

echo $fordestination

startTime=$(( $startTime + 1 ))

done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T02:32:07.283

我认为您的 cut 和 grep 命令可能会卡住。您可能应该确保它们的参数不为空，通过使用`[ -n "$string" ]`命令查看是否`$string`不为空。在您的情况下，如果它是空的，它不会将任何文件添加到随后将使用它的命令中，这意味着该命令可能会等待来自命令行的输入（例如：如果`$string`为空并且您这样做`grep regex $string`，则 grep 不会'不从命令行接收输入文件，`$string`而是等待来自命令行的输入）。这是一个“复杂”版本，试图显示哪里可能出错：

```
while [[ $startTime -le $endTime ]]
do

thisfile=$(find * -type f)
if [ -n "$thisfile" ]; then
    thisfile=$(grep -l $startDate $thisfile)
    if [ -n "$thisfile" ]; then
        thisfile=$(grep -l $startTime $thisfile)
        if [ -n "$thisfile" ]; then
            thisfile=`cut -d$ -f2 $thisfile`

            if [ -n "$thisfile" ]; then
                forDestination=`cut -d ~ -f4 $thisfile`
                echo $fordestination
            fi
        fi
    fi
fi

startTime=$(( $startTime + 1 ))

done 
```

这是一个更简单的版本：

```
while [[ $startTime -le $endTime ]]
do

thisfile=$(grep -Rl $startDate *)
[ -n "$thisfile" ] && thisfile=$(grep -l $startTime $thisfile)

[ -n "$thisfile" ] && thisfile=`cut -d$ -f2 $thisfile`
[ -n "$thisfile" ] && cut -d ~ -f4 $thisfile

startTime=$(( $startTime + 1 ))

done 
```

“-R”告诉 grep 递归搜索文件，并且`&&`告诉 bash 如果它之前的命令成功，则只执行它后面的命令，并且之前的命令`&&`是测试命令（在`if`s 中使用）。

希望这会有所帮助=)

# php - 获取前一个对象到数组的 end()

> ID：12658053
> 
> 赞同：1
> 
> 时间：2012-09-30T02:03:14.763
> 
> 标签：php

我有一个数组并检查是否`end()`存在或为空。如果它是空的，我想获取数组的前一个对象。我尝试使用`prev()`，但在应用于`end()`.

有什么建议么？数组的长度和大小可能不同。

谢谢你们的帮助！

一些代码：

```
$pagination = esc_url( get_next_posts_page_link()); // returns url with slashes
$parts = explode('/', $pagination);
//get the last item
$tag = end($parts);
if ($tag == ""){echo prev($tag); } else{echo $tag;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T02:05:26.757

您可以[`array_slice()`](http://php.net/manual/en/function.array-slice.php)为此使用：

```
$theItem = array_slice($theArray, -2, 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T02:06:58.880

您不应该应用原始数组`prev()`的结果，`end()`而是应用原始数组，因为这两个函数都在操作该数组的内部数组指针。

所以：

```
if ($tag == ""){echo prev($parts); } else{echo $tag;} 
```

**编辑：**顺便说一句，你也可以`trim($pagination, '/')`在你之前做一个，`explode`这样最后一项就永远不会为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T02:26:53.620

另一种解决方案：

```
<?php

    $arr = array("foo", "bar", "hi", "bye");

    echo $arr[count($arr)-2];

?> 
```

`2`因为`count()`从 开始`1`，而不是`0`。

**输出**

你好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T03:31:13.263

崇敬阵列并使用`array_pop`

```
$parts_reversed = array_reverse($parts, true);
$tag = array_pop($parts_reversed);
if ($tag == ""){echo array_pop($parts_reversed); } else{echo $tag;} 
```

# matlab - Matlab fft函数

> ID：12658058
> 
> 赞同：0
> 
> 时间：2012-09-30T02:04:11.313
> 
> 标签：matlab, fft, sampling

下面的代码来自 Matlab 2011a 关于 fft 函数的帮助。我*认为*这里有一个问题：为什么他们将 t(1:50) 乘以 Fs，然后说是毫秒时间？当然，在这个非常特殊的情况下它恰好是正确的，但是将 Fs 的值更改为 2000，它就不再起作用了，显然是因为这个因素 2。*对吗*？相当误导，不是吗？我想念什么？

```
Fs = 1000;                    % Sampling frequency
T = 1/Fs;                     % Sample time
L = 1000;                     % Length of signal
t = (0:L-1)*T;                % Time vector
% Sum of a 50 Hz sinusoid and a 120 Hz sinusoid
x = 0.7*sin(2*pi*50*t) + sin(2*pi*120*t); 
y = x + 2*randn(size(t));     % Sinusoids plus noise
plot(Fs*t(1:50),y(1:50))
title('Signal Corrupted with Zero-Mean Random Noise')
xlabel('time (milliseconds)') 
```

更清楚的是：

```
fs = 2000;          % Sampling frequency
T = 1 / fs;         % Sample time
L = 1000;           % Length of signal
t2 = (0:L-1)*T;     % Time vector
f = 50;             % signal frequency
s2 = sin(2*pi*f*t2);
figure, plot(fs*t2(1:50),s2(1:50)); % NOT good
figure, plot(t2(1:50),s2(1:50));    % good 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T03:32:42.190

你不会错过任何东西。这是不将单位作为每行注释的典型不良做法。例如，

```
 Fs=1000;          % in [Hz]
 T=1/Fs;           % [sec]
 L = 1000;         % Length of signal
 t = (0:L-1)*T;    % Time vector 
```

然后，时间向量的单位为 1/1000 秒或毫秒……（每个元素为 1 毫秒）。在另一种情况下，Fs=2000 %[Hz]，这使得时间向量的单位为 1/2000 秒......

# sql - 设计一个保存地理位置的数据库

> ID：12658060
> 
> 赞同：1
> 
> 时间：2012-09-30T02:04:19.863
> 
> 标签：sql, database, database-design

我正在设计一个 android 应用程序，它将显示您附近的兴趣点 (POI)。POI 将存储在数据库中，我希望能够有效地搜索我附近的 POI，并让搜索返回可能是最近 100 个位置的排序列表。

我想知道我应该如何设计我的数据库，以便可以有效地搜索它。我应该使用任何特定形式的 SQL 或任何特殊算法来加快搜索速度？虽然如果我的数据库中只有 100 个位置不会有问题，但我可以想象如果我有 10,000 个或更多位置可能会很困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:46:47.390

使用具有良好多维索引的数据库。这允许数据库进行有效的边界框查询。PostgreSQL 是不错的选择，因为它具有用于边界框查询的 GIST 索引。MySQL 和 MS SQL 具有可接受的功能。

您面临的另一个问题是坐标系的选择。GPS 纬度、长坐标是角度。所以可以选择如何进行距离数学。

1) 将所有纬度、经度转换为笛卡尔 X、Y 坐标 - 这适用于小型（美国州）大小的区域。这需要地图投影函数在纬度、经度和笛卡尔坐标之间进行转换。

2）使用harsine公式[http://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)。但是要小心！因为索引键在纬度，经度。这种选择可能会产生副作用。

PostGIS 是一个 PostgreSQL GIS 应用程序。对于最近点查询来说，它很重，但很有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T18:08:49.087

使用 PostGIS

[http://en.wikipedia.org/wiki/PostGIS](http://en.wikipedia.org/wiki/PostGIS)

# c# - ASP.NET MVC 中没有变化的智能缓存页面

> ID：12658065
> 
> 赞同：0
> 
> 时间：2012-09-30T02:06:48.777
> 
> 标签：c#, asp.net-mvc, caching, http-caching

我正在考虑为 asp.net mvc 页面实现缓存机制，为您提供最新版本的网页，但**如果页面自上次缓存以来没有更改，它将返回缓存结果。**

顺便说一句，我想知道 OutputCacheAttribute 缓存的限制是什么 - 可以使用许多位置 - 客户端、服务器端、下行流、任何（默认）等等。我想知道哪个是最快的选择，因为我不知道客户端的限制是什么——如果它可以存储所有缓存的数据，我认为它肯定是最好的缓存位置。那么每个位置可以存储哪些数据呢？

我想到的一个好主意是将某个地址的最后查看的页面版本保存为 cookie 中的哈希值，因此当用户请求页面时，如果其哈希值没有改变，我可能会给他缓存的结果。但是如果我计算当前页面哈希，它可能会节省流量，但它仍然会消耗服务器处理请求的时间，所以我仍然不确定实现它的最佳方法是什么以及如何产生最佳结果。

尽可能复杂地实现这一点的见解和想法都很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T07:43:02.033

您的想法听起来很像 http ETag 标头和 304 not modified response - [http://en.wikipedia.org/wiki/HTTP_ETag#Typical_usage](http://en.wikipedia.org/wiki/HTTP_ETag#Typical_usage)。基本上你不需要自定义 cookie，因为协议已经支持这个。

至于返回对服务器影响不大的缓存版本，请使用您已经提到的 Output Cache 属性。

# php - 奇怪的验证码。这个怎么运作？

> ID：12658067
> 
> 赞同：0
> 
> 时间：2012-09-30T02:06:58.347
> 
> 标签：php, asp.net, cookies, captcha

我想从[https://agent.lionair.co.id/lionairagentsportal/CaptchaGenerator.aspx](https://agent.lionair.co.id/lionairagentsportal/CaptchaGenerator.aspx)获取图像验证码。

我不明白。

[但是，如果我在打开https://agent.lionair.co.id/lionairagentsportal/CaptchaGenerator.aspx](https://agent.lionair.co.id/lionairagentsportal/CaptchaGenerator.aspx)之前打开一个带有 url [https://agent.lionair.co.id/lionairagentsportal/default.aspx](https://agent.lionair.co.id/lionairagentsportal/default.aspx)的新标签，则图像是显示。

我只是对[https://agent.lionair.co.id/lionairagentsportal/CaptchaGenerator.aspx](https://agent.lionair.co.id/lionairagentsportal/CaptchaGenerator.aspx)感到好奇。[如果我已经打开https://agent.lionair.co.id/lionairagentsportal/default.aspx](https://agent.lionair.co.id/lionairagentsportal/default.aspx)，为什么我无法打开它。

我已经尝试过这段代码，但不幸的是我失败了。图像仍然没有显示出来。

```
<?php

//The curl_init() will initialize a new session and return a CURL handle.
//curl_exec($ch) This function should be called after you initialize a CURL session and     all the options for the session are set. Its purpose is simply to execute the predefined CURL session (given by the ch). 
//curl_setopt( $ch, option, value) Set an option for a CURL session identified by the ch parameter. option specifies which option to set, and value specifies the value for the option given.

$url = "https://agent.lionair.co.id/LionAirAgentsPortal/default.aspx"; // From URL to get webpage contents.
$cookie_file_path = "/opt/lampp/htdocs/curl-examples/cookieFolder/cook";

$ch = curl_init();  // Initialize a CURL session.
// set URL and other appropriate options
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);  // Return Page contents.
curl_setopt($ch, CURLOPT_URL, $url);  // Pass URL as parameter.
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie_file_path); // Tempat menaruh cookies.
$html = curl_exec($ch);  // grab URL and pass it to the variable.

$ch = curl_init();  // Initialize a CURL session.
// set URL and other appropriate options
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);  // Return Page contents.
curl_setopt($ch, CURLOPT_BINARYTRANSFER, TRUE);  // Karena keluarannya gambar, maka di-    set binary = true.
curl_setopt($ch, CURLOPT_URL, "https://agent.lionair.co.id/LionAirAgentsPortal/CaptchaGenerator.aspx");  // Pass URL as parameter.
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie_file_path); // Tempat cookies di mana cookies mana yang mau digunakan.

$gambar = curl_exec($ch);  // grab URL and pass it to the variable.
curl_close($ch);  // close curl resource, and free up system resources.

?>
<html>
<head>

</head>
<body>
    <form action="https://agent.lionair.co.id/LionAirAgentsPortal/default.aspx" name="form1" method="post">
        <label for="txtLoginName">Username: </label>
        <input type="text" name="txtLoginName" />
        <br/>
        <label for="txtPassword">Password: </label>
        <input type="password" name="txtPassword" />
        <br/>
        <img src="data:image/jpeg;base64,<?php echo $gambar; ?>" />
        <br/>
        <label for="CodeNumberTextBox">Captcha: </label>
        <input type="text" name="CodeNumberTextBox" />
        <br/>
        <input type="submit" value="otentikasi" />
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T02:19:40.197

CAPTCHA 生成器在会话中定义 CAPTCHA，该会话仅由实际页面定义。这是一种非常标准的做法，可以提供一种生成 CAPTCHA 的方法。

如果图像生成器负责生成 CAPTCHA，那么您将遇到竞争条件，在提交页面之前看到的不一定是真正的 CAPTCHA 值。此外，Firebug 和 Chrome 的开发者工具等一些开发者工具可能会在内部加载图像，这会在用户不知情的情况下更新验证码。如果图像生成器也创建 CAPTCHA 值，它只会导致更多的混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-08T07:44:50.623

这很容易.. 添加此代码：

> $ImageCaptcha=base64_encode($gambar);

在“$gambar = curl_exec($ch);”之后

然后更改您的代码： echo $gambar;
和

> 回声 $ImageCaptcha;

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T05:58:19.257

您可以在包含 default.aspx 页面的页面上使用透明 iframe。这样，服务器会认为他需要为 default.aspx 页面提供服务，并将在客户端上设置会话 cookie。稍后，当您尝试访问 CaptchaGenerator.aspx 页面时，您将收到响应，因为会话 cookie 将存在于客户端 cookie 存储中。

```
<iframe src ="https://agent.lionair.co.id/LionAirAgentsPortal/default.aspx" style="widht:0px;height:0px"/> 
```

您可能希望等待 iframe 加载并完成 cookie 创建过程，然后再尝试包含图像，这可以使用 Java 脚本在客户端完成。

希望我能帮上忙。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T19:01:07.737

改变： `curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie_file_path);`

用这个： `$cookie="ASP.NET_SessionId="."$cookieValue";` 改变`($ch, CURLOPT_COOKIE,$cookie);`

它对我有用，但你需要努力在 $url 上获得 cookievalue 希望这有帮助..

# android - android XML unbound xml & root 中的 2 个错误格式不正确

> ID：12658073
> 
> 赞同：-1
> 
> 时间：2012-09-30T02:09:11.363
> 
> 标签：android, xml, eclipse, admob, adview

所以早些时候它说我在玩弄并尝试不同的解决方案之后现在有垃圾xml，我有2个错误而不是1个！现在我在 ?xml version="1.0" encoding="utf-8"?> 旁边有一个错误，上面写着：error parsing prefix: unbound XML

com.admob.android.ads.AdView 旁边的另一个错误说：根元素后面的文档中的标记必须格式正确。

```
 <?xml version="1.0" encoding="utf-8"?<
<WebView xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/webview"
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
```

/>

```
<com.admob.android.ads.AdView
  android:id="@+id/ad" 
  android:layout_width="fill_parent" 
  android:layout_height="wrap_content"
  xmlns:backgroundColor="#000000"
  xmlns:primaryTextColor="FFFFFF"
  xmlns:secondaryTextColor="#CCCCCC"
  android:layout_alignParentTop="true"
  ads:adUnitId="xxxxxxxxxxxx"
  ads:adSize="BANNER"
  ads:loadAdOnCreate="true"
  /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T02:10:33.703

`<?xml`必须是 XML 文件中的第一个字符。

删除前导空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T02:15:01.003

你需要一个容器。右键单击您`WebView`在 Eclipses 中的“Outline”窗口并选择“Wrap in container”

如果您不使用 Eclipse，只需将 Webview 和 AdView 放在 Layout 小部件中

例子：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/layoutContainer"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <WebView
        android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

    <com.admob.android.ads.AdView xmlns:backgroundColor="#000000"
        xmlns:primaryTextColor="FFFFFF"
        xmlns:secondaryTextColor="#CCCCCC"
        android:id="@+id/ad"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        ads:adSize="BANNER"
        ads:adUnitId="xxxxxxxxxxxx"
        ads:loadAdOnCreate="true" />

</LinearLayout> 
```

# security - EJB 容器中的 Java EE 安全角色以及它们如何从 Web 容器传播和/或与 Web 容器相关

> ID：12658078
> 
> 赞同：2
> 
> 时间：2012-09-30T02:11:01.427
> 
> 标签：security, jsf, jakarta-ee, java-ee-6, jdbcrealm

前几天我在我正在开发的应用程序上进行了测试。我想看看安全性是如何从 Web 层传播到 Java EE 容器的。我写了几页，一个支持 bean 和一个 EJB 无状态 bean 来做到这一点。我进行了设置，以便我可以登录并检查我在 Web 层和 EJB 容器上的主体和角色。

对 EJB 上下文的调用表明我与通过 Faces 上下文的调用具有相同的主体。然而，当 web 层报告 (getRole) 确认我在数据库中设置的组中时，对 EJB 端的调用失败并引发了异常。基本上它说它可以找到没有像我问它关于在其上下文中配置的组。事实上，我没有在 EJB 端进行任何安全配置。

我似乎在这里遗漏了一些东西。我需要什么来确保双方在角色/组方面保持同步。我已经配置了 Web 端，以便它通过 JDBC 领域将用户映射到组（这不是自定义的，而是标准配置选项）。

请注意，我使用的是 Glassfish 3.1.1，并且我创建了一个自定义的 JDBC 领域，以我认为更简洁的方式将我的组与我的用户匹配（即在两者之间使用查找表）。FWIW，我在软件领域已经有很长一段时间了，但刚刚习惯了全栈 Java EE（大约一年）。

# node.js - 如何使用 node.js 发送数据？

> ID：12658080
> 
> 赞同：-1
> 
> 时间：2012-09-30T02:11:11.587
> 
> 标签：node.js, express

我使用 node.js 和 express。当我按下按钮（btnSend）时，我想通过 express 将数据发送到 node.js（不刷新页面）。如何发送数据？我想知道node.js的代码

请帮忙。

感谢您的建议。

```
<form action="/Send" method="post">
Username: 
<input type="text" name="user" id="txtUser" />
<input type="submit" value="Submit" id="btnSend" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T06:49:55.280

您需要一个客户端 javascript 库来执行 ajax 请求，例如 jQuery。node.js 是服务器端。

在 jQuery 中，你可以这样做：

```
$("form").submit(function(e){
  e.preventDefault();
  $.post('/some-page', $(this).serialize(), function(data){
    //do something here with json data returned from server.
  });
}); 
```

# java - 如何从mysql检索数据到java

> ID：12658083
> 
> 赞同：-1
> 
> 时间：2012-09-30T02:11:55.650
> 
> 标签：java, mysql, swing

我正在制作一个关于图书馆计算机座位监控的 java 程序。如果图书馆管理员输入学生的学号，他/她将被登录，他/她的名字和姓氏将显示在 java GUI 中的 JLabel 上。学号、名字和姓氏都在数据库中。我将如何从数据库中检索这些数据并将其存储到 JLabel 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T02:15:16.870

有什么简单的？使用[JDBC](http://en.wikipedia.org/wiki/Java_Database_Connectivity)

这是该维基百科页面的示例：

```
Connection conn = DriverManager.getConnection(
     "jdbc:mysql:myhostname1",
     "myLogin",
     "myPassword" );
Statement stmt = conn.createStatement();
try {
    ResultSet rs = stmt.executeQuery( "SELECT * FROM MyTable" );
    try {
        while ( rs.next() ) {
            int numColumns = rs.getMetaData().getColumnCount();
            for ( int i = 1 ; i <= numColumns ; i++ ) {
               // Column numbers start at 1.
               // Also there are many methods on the result set to return
               //  the column as a particular type. Refer to the Sun documentation
               //  for the list of valid conversions.
               System.out.println( "COLUMN " + i + " = " + rs.getObject(i) );
            }
        }
    } finally {
        try { rs.close(); } catch (Throwable ignore) { /* Propagate the original exception
instead of this one that you may want just logged */ }
    }
} finally {
    try { stmt.close(); } catch (Throwable ignore) { /* Propagate the original exception
instead of this one that you may want just logged */ }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T02:24:37.567

根据您对另一个答案的评论（+1 to logan），这里是一些伪代码，用于显示将结果存储在 a 中的逻辑`JLabel`：

```
Statement stmt = con.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE,ResultSet.CONCUR_UPDATABLE);
ResultSet rs = stmt.executeQuery("SELECT * FROM MyTable");

StringBuffer sb=new StringBuffer();//create string buffer to hold results

//use html to enable newlines in jlabel
 sb.append("<html>");

while (rs.next()) {
     sb.append(rs.getString("a")).append("<br>");//append results to buffer
 }
 sb.append("</html>");

 //create label with results
 JLabel label=new JLabel(sb.toString()); 
```

或者，您可以创建第`JLabel`一个并调用[`JLabel#setText(String text);`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JLabel.html#setText%28java.lang.String%29)其实例：

```
JLabel label=new JLabel();

//read results to buffer

label.setText(sb.toString()); 
```

# jquery - 显示：无；导致宽度问题

> ID：12658085
> 
> 赞同：-1
> 
> 时间：2012-09-30T02:13:18.460
> 
> 标签：jquery, function

我有一个 jQuery 脚本，它可以显示请等待 3 秒，然后显示一个 DIV。现在我遇到的问题是当我显示时：无；它导致我的其他 div 的宽度和高度扭曲。在功能期间是否有另一种隐藏 div 的方法可能不会中断？

使用 jQuery

```
setTimeout(function(){
    $("#loading").hide(100); //100 = animation speed in miliseconds
    $("#quickstats").show(100);
}, 3000); //3000 miliseconds = 3 seconds​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T02:27:16.407

您可以使用`visibilty`而不是`display`css 属性。否则你会想以不同的方式去做。根据您的页面布局，有几个选项。

```
visibility:hidden;
visibility:visible; 
```

您还可以将计时器包装在另一个元素中并隐藏它。在这种情况下，我在您的计时器周围添加了一个跨度。然后，您可以在选择器中使用直接后代选择`>`器进行隐藏。

```
<div id="loading"><span>Timer</span></div>

setTimeout(function(){
    $("#loading > span").hide(100); //100 = animation speed in miliseconds
    $("#quickstats").show(100);
}, 3000); //3000 miliseconds = 3 seconds​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T02:19:03.047

假设#loading DIV 和#quickstats DIV 的宽度相同，您可以尝试：

```
setTimeout(function(){
    $("#loading").animate({opacity: 0}, 100, function() {
        $(this).hide();
        $("#quickstats").css({opacity: 0}).show().animate({opacity: 1}, 100);
    });
}, 3000); 
```

**演示：http:** [//jsfiddle.net/XUSM2/](http://jsfiddle.net/XUSM2/)

**演示（页面加载）：http:** [//jsfiddle.net/XUSM2/1/](http://jsfiddle.net/XUSM2/1/)

# perl - Perl 和 X Window 中没有事件循环图形？

> ID：12658086
> 
> 赞同：6
> 
> 时间：2012-09-30T02:13:25.113
> 
> 标签：perl, graphics, event-loop

在 1980 年代的 Apple II BASIC 上，您将使用“HGR”来访问屏幕，“HCOLOR”将设置颜色，而“HPLOT”将绘制点。您还可以操作屏幕字节数据，而不必将程序控制权交给任何事件处理程序。今天，每种语言和每个库似乎都缺少这种可笑的基本功能。

[因此，我使用X Window](http://en.wikipedia.org/wiki/X_Window_System) API在 C 中编写了一个小型库来执行此操作：HGR(x,y) 建立一个 XWindow，HCOLOR(i) 设置颜色，HPLOT(i,j) 绘制一个点，再加上你提取窗口的位图，可以修改它并显示修改后的东西。这并不简单，我不想再经历一次。

我现在正在使用 Perl 做一些事情，我需要这样一个用于 Perl 的工具，您可以在其中调用一个子例程，该子例程最好在不产生新线程的情况下返回，并输出一个窗口，您可以在其中向窗口添加图形内容，并且当您的程序喜欢它时查询事件。这是 1980 年代 BASIC 的功能，所以应该不难。但是我看到的工具没有做到这一点：

*   GD：据我所知，这是生成图形文件，而不是图形窗口。看来您需要将其通过管道传输到另一个程序。
*   Gtk2：我必须分叉出一个单独的线程来捕获事件，否则它不会显示窗口。我不想分叉任何东西，而且我基本上不关心任何事件，除非我特别要求稍后查看堆积在队列中的东西。
*   [Qt](https://en.wikipedia.org/wiki/Qt_%28software%29)：在这里，您还需要将控制权移交给事件处理程序，不移交，不显示。在 C++ 版本中，我可以让 Qt 显示和绘制而无需切换。
*   PerlTk：又是愚蠢的交接。
*   OpenGL：在这里，当我想看看发生了什么时，我不知道如何捕捉 X Window 事件，比如按键。

有谁知道如何从正在运行的应用程序中建立一个 XWindow，而无需分叉 GUI 应用程序进程，您可以在窗口中绘制原始的东西，如点和线，以及您可以根据自己的时间表查询窗口的事件？我简要地查看了 Perl 的 X Window API，它和 C 一样可怕，并且将 C 代码与 Perl 接口也是可怕的。如果有必要，我会做的。但也许不是。Perl 已经有 HGR 了吗？

如果您想知道我的意思是什么，没有事件循环图形库，请参阅[这个链接的论文](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCIQFjAA&url=http%3A%2F%2Fpdf.aminer.org%2F000%2F590%2F956%2Fa_c_based_graphics_library_for_cs.pdf&ei=L89nUL2NAuLm0QHwsoH4BQ&usg=AFQjCNGuUNgL_rD0o7YdV_wWqZHfoKvMKg&sig2=q5S2AeWmMH77wZVsODZWfA)，不幸的是它是针对 C 的。这样的东西对于科学知识非常有用，除了介绍性编程课程之外。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T02:29:11.340

几乎每个 GUI 工具包都支持在不进入事件循环的情况下构建窗口。这是 tk 示例

```
#!/usr/bin/perl --
use strict;
use warnings;
use Tk;
my $mw = tkinit();
my $ca = $mw->Canvas(
    background => 'white'
)->pack(qw/-expand 1 -fill both /);
$mw->geometry( '500x600+10+10' );
for my $cc (
    { red   => \&red, green => \&der, blue => \&erd },
    { green => \&red, red   => \&der, blue => \&erd },
    { green => \&red, blue  => \&der, red  => \&erd },
  )
{
    $ca->delete('all');
    my %color = %$cc;

    for my $fill ( keys %color ) {
        my $red = $color{$fill};
        for my $t ( 10 .. 220 ) {
            my $d = 0.1;
            my ( $x, $y ) = $red->( $t, 0.1 );
            $_ += 250 for $x, $y;
            $ca->createOval(
                $x, $y,
                ( $t * 2 * $d ) + $x,
                ( $t * 2 * $d ) + $y,
                -fill => $fill,
            );
            $mw->update;
            select undef, undef, undef, 0.001;
        }
        $mw->update;
    }
}

Tk::DoOneEvent(0) while Tk::MainWindow->Count; ## MainLoop;
exit 0;

sub red {
    my ( $t, $d ) = @_;
    my $x = $t * sin( $t * $d );
    my $y = $t * cos( $t * $d );
    $x, $y;
}

sub der {
    my ( $t, $d ) = @_;
    my $x = $t * sin( $t * $d );
    my $y = $t * cos( $t * 2 * $d );
    $x, $y;
}

sub erd {
    my ( $t, $d ) = @_;
    my $x = $t * sin( $t * 2 * $d );
    my $y = $t * cos( $t * $d );
    $x, $y;
}

__END__ 
```

Gtk2 和 Wx 都支持相同的东西，它要么更新/显示/显示......并且窗口被绘制，当你想要用户交互时，你调用 MainLoop 或运行应用程序或自己处理它，它只是一个 while 循环调度未决事件

```
wxTheApp->Dispatch       while wxTheApp->Pending;
Gtk2->main_iteration     while Gtk2->events_pending; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T05:00:09.100

我推荐使用 Perl 模块[Inline::C](http://search.cpan.org/perldoc?Inline%3a%3aC)。该模块使您可以轻松地将 C 库公开给您的 Perl 应用程序。对于某些 C 库，“AUTOWRAP”选项使其变得非常简单。但即使您必须自己编写一些包装器，Inline::C 也确实减轻了 XS 的负担。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T13:11:09.267

我不确定您的最终目标是什么，这可能无济于事，但也许您想看看 David Merten 的[`App::Prima::REPL`](http://p3rl.org/App%3a%3aPrima%3a%3aREPL). David 一直在为基于图形工具包的 Perl/PDL 构建[绘图库。](http://p3rl.org/PDL%3a%3aGraphics%3a%3aPrima)[`Prima`](http://p3rl.org/Prima)为了把它发挥到极致，他围绕它构建了一个 REPL，制作了一个内置绘图的 GUI REPL。正如您所说，Prima 依赖于事件循环来运行，但是，因为您在 REPL 中，您仍然可以指示 REPL 绘制新数据。他的目标也是科学使用！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T17:03:43.727

我认为您在这种情况下有点错过了`GLib`/之类的情节。无需分叉`GTK`即可处理；`GTK`事实上，如果你做 fork 之类的事情，你很可能在那里做错了。您所描述的内容应该很容易使用`GTK`.

# mysql - mysql游标循环选择

> ID：12658087
> 
> 赞同：1
> 
> 时间：2012-09-30T02:13:43.823
> 
> 标签：mysql, loops, cursor, handler, fetch

我正在编写一个程序，它将通过一个表并收集所有前 10 个结果。我正在使用游标然后获取结果。我对如何打印结果有点困惑。我使用了一个 select 语句来获得这些结果，但我被告知有一个错误。

任何帮助将不胜感激。谢谢。

```
create procedure plant_list()
begin
declare v_plant_id integer(5);
declare v_common_name varchar(30);
declare v_scientific_name varchar(20);

declare finished boolean default false;

declare cur_top_ten cursor for
    select P.plant_id, common_name, concat(genus, ' ', species)
    from plants P
        join plant_taxonomy PT on P.plant_id = PT.plant_id
    order by list_price desc
    limit 10
    ;

declare continue handler for not found set finished = true;

open cur_top_ten;
curloop: loop
    fetch cur_top_ten into v_plant_id, v_common_name, v_scientific_name;
    if finished then
        close cur_top_ten;
        set finished = false;
        leave curloop;
    end if

    select v_plant_id, v_common_name, v_scientific_name;

end loop curloop;

end;
# 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T07:35:23.103

if 结尾后缺少一个分号！

```
 if finished then
    close cur_top_ten;
    set finished = false;
    leave curloop;
  end if; 
```

# java - 从相机获取图片而不保存到图库 - Android

> ID：12658088
> 
> 赞同：0
> 
> 时间：2012-09-30T02:13:44.777
> 
> 标签：java, android, camera

我需要找到一种方法将相机中的图片捕获到位图中而不将其保存到图库中。在传递位图之前，我使用“MediaStore.ACTION_IMAGE_CAPTURE”意图将捕获的图片保存到画廊的所有方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T04:21:22.100

您可以将您的照片直接从您的手机发送到您的 Facebook 帐户上的 facedropt 同步图片，然后删除图库...除非您允许共享，否则没有人可以看到来自 facedropt 的图片。

# gwt - gwtquery--缺少 removeClass() 方法？

> ID：12658089
> 
> 赞同：1
> 
> 时间：2012-09-30T02:14:04.673
> 
> 标签：gwt, gwtquery

我正在使用 gwtquery 来操作页面，我在 jQuery 中发现我可以使用：

```
$('body').removeClass().addClass(myClass); 
```

但似乎 gwtquery 没有提供相同的`removeClass()`方法，它只有`removeClass(String... classes)`. 如果我想在事先不知道名称的情况下删除元素的所有类，这不是很有用。

有谁知道这种方法的对应物吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T02:52:53.967

**简短的回答：**

*   `setClassName("")`在[GWT 的元素类](http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/dom/client/Element.html#setClassName%28java.lang.String%29)上使用

    `$('gwt-Label').widgets().get(0).getElement().setClassName("")`

*   或者，`className`直接设置属性

    `$("gwt-Label").attr("className","")`

**长答案：**

所以，我查看了这两个实现，它们似乎做了两件不同的事情。

1.  `className`如果没有要删除的类，[jQuery](http://code.jquery.com/jquery-latest.js)会替换 dom 元素的属性。
2.  [GQuery](http://code.google.com/searchframe#g7qHtYnLjRg/trunk/gwtquery-core/src/main/java/com/google/gwt/query/client/GQuery.java&q=removeclass%20package:gwtquery%5C.googlecode%5C.com&l=3435)只是迭代类，并一一删除它们，委托给 GWT 的 Element dom 类。[在幕后](http://grepcode.com/file/repo1.maven.org/maven2/com.google.gwt/gwt-servlet/2.3.0/com/google/gwt/dom/client/Element.java#Element.setClassName%28java.lang.String%29)，这使用了`className`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T07:03:47.037

我已经在 gquery 中解决了这个问题。我们遵循 gquery 的行为应该与 jquery 相同的规则，所以这是库中的一个错误。感谢您意识到这一点。

将您的项目更新到最后一个 gwtquery-1.2.1-SNAPSHOT.jar

# c - 不寻常的选择/袜子流行为行为

> ID：12658096
> 
> 赞同：2
> 
> 时间：2012-09-30T02:15:54.533
> 
> 标签：c, sockets, send, recv, select-function

我正在编写一个小程序来请求文件的一块，然后让另一个程序返回该文件的特定块。我可以使用最多约 555000 字节的文件来使其工作，但在任何大于此的情况下，我都会出现异常行为。

在我的循环中，我检查了一个进度缓冲区，它是一个整数数组，以查看我是否有一个特定的文件块。如果我这样做了，那么我就不会发送对该块的请求，但如果我不发送，那么我会向对等方请求该块。我有一个要移动的链接列表，列表中的每个对等点都有一个与之关联的 sockfd。所以，从某种意义上说，我“循环”了请求。一旦我将它们发送出去，我就会等待消息进来。我不知道这是否是最好的方法，但它似乎是最自然的。

但是，对于较大的文件，它会在选择调用时挂起。我不完全确定为什么。如果有人可以对此有所了解，或者提出更好的方法，我很想听听。

这是我的代码。我没有包含我调用的函数的代码，但我认为在这种情况下没有必要（它们是 Beej 的 sendall 和 recvall 函数的修改版本）。还值得一提的是，这是在多线程应用程序中（使用 pthreads），但我没有使用任何共享变量。感谢您抽时间阅读！

```
total = (number of chunks in the file)
my_peers = (linked list of peer structs containing sockfds, etc)
int i;
progress_buf = (array of ints, each representing a chunk in a file, 0 means we don't have the chunk)

while (1) {

    /* Send out the chunk requests */
    for(z= 0; z < total; z++) {

        /* Circles through the peer list */
        if (temp -> next != NULL) {
            temp_next = temp->next;
        } else {
            temp_next = my_peers;
        }

        if (progress_buf[z] == 0) { 
            /* Request_blocks performs a send */ 

            /* Need to deal with the "hanging bytes" chunk */       
            if (((z + 1) == total) && (remainder_chunk == 1)) {           
                check = request_blocks(temp, remainder, remainder_chunk, z);
            } else {
                check = request_blocks(temp, remainder, 0, z);
            }

            /* Bad send, remove peer from file descriptors and list */
            if (check != 0 ) {          
                FD_CLR(check, &masterr);
                remove_peer(&my_peers, temp->socket);
            }
        }     
        temp = temp_next;
    }

    read_fdss = masterr; 

    /* HANGS RIGHT HERE */
    if (select(fdmax+1, &read_fdss, NULL, NULL, NULL) < 0) {
        perror("select"); 
    }

    read_fdss = masterr;

    int got_block;
    /* Means we've received a block */
    for(i = 4; i <= fdmax; i++) {
        got_block = -1;
        if (FD_ISSET(i, &read_fdss)) {

            /* Performs a recv */
            got_block = receive_block(i, filename_copy, progress_buf);

            /* Update the progress buffer */
            if (got_block > -1)  {
                remaining_blocks++;
                if (remaining_blocks == total) goto finished;
                    /* Failure- remove the peer */  
                } else if (got_block == -2) {
                    close(i);
                    FD_CLR(i, &masterr);
                    remove_peer(&my_peers, i);
                }
            }
        }
    }
} 
```

# java - 如何更新 POJO 中的任意字段？

> ID：12658097
> 
> 赞同：1
> 
> 时间：2012-09-30T02:15:58.757
> 
> 标签：java, google-app-engine, jdo

我有一个名为 MyClass 的 POJO。MyClass 有 100 个 getter 和 setter（例如）

我创建了两个实例。实例 A 和实例 B。

用户以某种方式更改了实例 B 上任意字段的值。

有没有一种方法或捷径可以比较实例 A 和实例 B，以便我可以将值的变化更新为实例 A？

**更新**好的，只是为了澄清一些混乱。

我们就说

实例 A = MyClass 的一个实例，它表示通过 JDO 在服务器端持久保存的现有记录。MyClass 有一个实例变量 foo="bar0";

实例 B = 用户已编辑任意字段的 MyClass 实例，即 foo="bar1"。实例 B 来自 Android 客户端提供的数据。

所以它可以是 MyClass 上的任何实例变量，它可能在实例 B 中，它表示应该如何更新实例 A。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T03:48:38.507

使用[工作单元](http://martinfowler.com/eaaCatalog/unitOfWork.html)。工作单元用于确定哪些实体/对象是“脏的”——这意味着它们的内存数据与持久性存储或数据库不同步——哪些是“干净的”。

只需调整概念以跟踪哪些属性是脏的，你就可以开始了。

# 例子

（我写Java已经有一段时间了，我这台机器上没有Java，所以可能会有一些错误）

## `MyClass.java`

```
public class MyClass extends ChangeObservable {

    private String name;
    private Age int;

    public MyClass(name, age) {
        // when the object is first created,
        // I'm assuming that the "clean" values are provided
        this.name = name;
        this.age = age;
    }

    public String getName() { return name; }
    public void setName(n) {
        name = n;
        this.fireChangeEvent("name");
    }
    public String getAge() { return age; }
    public void setAge(a) {
        age = a;
        this.fireChangeEvent("age");
    }

} 
```

## `UnitOfWork.java`

```
public class UnitOfWork implements ChangeListener {    

    // dunno if this is the most efficient implementation...
    private HashSet<String> dirties = new HashSet<String>();
    private Observable obj;

    public UnitOfWork(Observable obj) {
        this.obj = obj;
        obj.registerChangeListener(this);
    }

    public void registerDirty(propName) {
        // probably more code needed...
        dirties.add(propName);
    }

   public HashSet<String> getDirtyProperties() {
        // probably more code needed...
       return new HashSet<String>(dirties);
   }

   public void onChangeEvent(propName) {
       this.registerDirty(propName);
   }

    // note: a UnitOfWork needs more functionality than this!
    // I've implemented the bare minimum for the example
    // but it would also need methods like `registerClean(...)`

} 
```

## `Driver.java`

```
public class MyDriver {

    public static void main(String[] argv) {
        MyClass myObj = new MyClass("Richard", 3);
        UnitOfWork uow = new UnitOfWork(myObj);
        myObj.setName("Mark");
        for(String propName : uow.getDirtyProperties()) {
            System.out.print(propName);
        }
    }

} 
```

...现在`UnitOfWork.getDirtyProperties(...)`可以用来确定哪些属性是干净的和肮脏的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T04:26:14.373

只是不同意，在您的情况下，您不需要 AOP，但您需要自省。

你用的是弹簧吗？如果是这种情况，BeanWrapperImpl 类是一个非常好的开始，您可以在 A 周围定义一个 bean 包装器，在 B 周围定义一个 bean 包装器。然后轻松迭代其属性，并将值从一个复制到另一个。

如果您不想这样做，Apache Commons BeanUtils 提供了相同的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T02:24:48.380

**免责声明**：我是 Guice 的粉丝，但它是**它。是。惊人的。**

这听起来像是共享状态的问题。状态不应该是静态的，您可能应该使用 GUICE 来管理 A 的单例实例。（不确定为什么需要 A 和 B）

无论如何，如果你想看中和拦截`A.setFoo`，你应该看看[GUICE 中的 AOP 支持。](http://code.google.com/p/google-guice/wiki/AOP)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-30T02:27:50.797

您可以使用面向方面的编程（使用[AspectJ](http://www.eclipse.org/aspectj/)之类的东西），也可以使用反射编写解决方案，将一个对象的属性与另一个对象的属性进行比较。

# iphone - 从 RSS 源解析日期，返回 NULL

> ID：12658098
> 
> 赞同：0
> 
> 时间：2012-09-30T02:16:02.053
> 
> 标签：iphone, xcode, nsdate, nsdateformatter

我正在尝试解析 RSS 提要。事情一直很好，但最近在解析 pubDate 元素时它开始搞砸了。这是我的解析代码，以及两个 NSLog，第一个日志来自 RSS Feed 的 pubDate 元素中的内容，第二个日志是我尝试将其转换为 NSDate 时的。由于某种原因，直到今天下午晚些时候，这一切都很好。

```
- (void)parseRss:(GDataXMLElement *)rootElement entries:(NSMutableArray *)entries {

    NSArray *channels = [rootElement elementsForName:@"channel"];
    for (GDataXMLElement *channel in channels) {            

        NSString *blogTitle = [channel valueForChild:@"title"];                    

        NSArray *items = [channel elementsForName:@"item"];
        for (GDataXMLElement *item in items) {
            NSString *articleTitle = [item valueForChild:@"title"];
            NSString *articleUrl = [item valueForChild:@"guid"];            
            NSString *articleDateString = [item valueForChild:@"pubDate"];
            NSLog(@"frompubdate%@", articleDateString);
            NSDate *articleDate = [NSDate dateFromInternetDateTimeString:articleDateString formatHint:DateFormatHintRFC822];
            NSLog(@"fromdate%@", articleDate);
            NSString *articleImage = [item valueForChild:@"description"];
            NSDateFormatter * dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
            [dateFormatter setTimeStyle:NSDateFormatterShortStyle];
            [dateFormatter setDateStyle:NSDateFormatterShortStyle];
            NSString *dateofarticle = [dateFormatter stringFromDate:articleDate];

            RSSEntry *entry = [[[RSSEntry alloc] initWithBlogTitle:blogTitle articleTitle:articleTitle articleUrl:articleUrl articleDate:articleDate articleImage:bodyoftext] autorelease];      

            [entries addObject:entry];
        }      
    }

} 
```

2012 年 10 月 28 日，星期日，中部标准时间

无法解析 RFC822 日期：“Sun, 28 Oct 201209:30:00 CST” 格式可能无效。

# php - 滑动 jquery 表单不会转换超过一次

> ID：12658099
> 
> 赞同：0
> 
> 时间：2012-09-30T02:16:04.340
> 
> 标签：php, javascript, jquery, css, css-transitions

我用 jquery 创建了一个滑动表单，它可以很好地滑动到下一个布局，但是当我希望它向后滑动时，它就成了一个问题。有问题的网址在[这里](http://www.entrilab.com) ，我知道问题出在填充中。还是我没有看到我应该看到的东西？

```
#steps form fieldset{
    border:none;
    padding: 0 0 20px 0;
    margin: 0;
} 
```

我很难想清楚我需要做哪些调整才能让它继续下去。任何提示将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:45:29.990

看起来它是 1.8.2 中已解决的 jquery 错误。只需更换

```
<script type="text/javascript"src="js/jquery.js"></script> 
```

和

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 
```

这里的工作示例[http://jsfiddle.net/piminders/SWQRj/](http://jsfiddle.net/pimlinders/SWQRj/)

# extjs - 在 Extjs 4 中为对象更改 OwnerCt 的最佳方法

> ID：12658102
> 
> 赞同：0
> 
> 时间：2012-09-30T02:17:24.403
> 
> 标签：extjs, extjs4, listeners

我收到一个 Ext.form.Panel，里面有 2 个项目 Ext.form.field.Text。然后我添加了第三个对象，一个 Ext.container.Container 并且我想将以前的项目放入新容器中，所以我获取字段并添加一个监听器，如下所示

```
listeners:{ 
  beforerender:function(){
    Ext.getCmp('myContainer').add(this) ;
  }
} 
```

有没有更简单或最好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T03:19:06.040

为什么要等到组件即将渲染时才将其放入容器中？为什么不首先将其放入容器中。也许用更多细节更新你的 OP。

# mongodb - 什么是备份 mongodb 数据而不锁定（fsync & lock）的好策略？

> ID：12658107
> 
> 赞同：3
> 
> 时间：2012-09-30T02:19:06.770
> 
> 标签：mongodb, amazon-ec2, backup, amazon-ebs, database

我们只有一个 AWS EC2 上运行一个 mongodb（没有主从，没有副本集）。数据文件存储在单独的 EBS 卷中。那么，在不锁定写入（同步和锁定）的情况下备份和恢复数据的最佳方法是什么？还是必须要有主从才能实现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T03:25:30.260

只要您启用了日记功能（MongoDB 2.0+ 中的默认设置），您就可以利用**EBS 快照**来获得一致的数据文件转储，而无需`fSyncLock()`.

这在 MongoDB 站点上的[EC2 备份和恢复](http://docs.mongodb.org/ecosystem/tutorial/backup-and-restore-mongodb-on-amazon-ec2/)文档中有更详细的介绍 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:17:38.380

在 MongoDirector.com，我们使用 LVM 快照来备份我们的 MongoDB 数据库。随着您的数据库大小变大，它确实是唯一的选择。如果您使用 MongoDump 并尝试使用 MongoRestore 进行恢复，则可能需要数小时。在 2.0+ 中，这`fsyncLock()`是可选的，但无论如何我们都会这样做。

# bash - bash脚本的输出差异

> ID：12658112
> 
> 赞同：-1
> 
> 时间：2012-09-30T02:21:30.627
> 
> 标签：bash

我在名为 dir 的脚本中保存了以下命令

```
ls -la | egrep '^d' 
```

我将文件 dir 保存在我的 home/bin 目录下，该目录也恰好在我的 PATH 变量中。如果我从任何其他目录执行 dir 命令，它具有简单 ls 的效果，但如果我将此文件复制到任何文件夹然后运行 ​​dir，我会得到正确的输出。

需要做什么，这样我就可以通过简单地输入 dir 来运行上面的脚本，它会显示正确的结果？

更新：以上在 mac os x 上可以正常工作，但在 linux 下不能正常工作，如上所述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T02:26:27.857

那是因为已经有一个名为 dir 的命令，并且它的优先级高于您的脚本。尝试给它一个未保留的名称。

# javascript - 为什么我的 GreaseMonkey 函数意外被多次调用？

> ID：12658114
> 
> 赞同：3
> 
> 时间：2012-09-30T02:22:02.420
> 
> 标签：javascript, ajax, greasemonkey

我遗漏了一些东西，我不确定为什么函数'addIcon（）'被多次调用。

鉴于：

```
<div class="ticketpostcontainer">Some text</div>
<div class="ticketpostcontainer">Some text</div>
<div class="ticketpostcontainer">Some text</div> 
```

使用实用函数[waitForKeyElements](https://gist.github.com/2625891)，结果是每个 div 元素都会收到我的“折叠图标”三次：

```
// ==UserScript==
// @name        Collapse Kayako Response
// @grant               Sandbox
// @namespace   http://my.chiromatrixbase.com/fisher.chiromatrix.com/collaps_div.js
// @include     http://imatrixsupport.com/*
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js
// ==/UserScript==
/*jslint plusplus: true, undef: true, sloppy: true, vars: true, white: true, indent: 2, maxerr: 30 */

//Enable or disable GreaseMonkey function, GM_log
var GM_Debug = 1;

if (!GM_Debug) {
  var GM_log = function () {};
}
//If FireBig is active, send GM log events to FB.
if (unsafeWindow.console && GM_Debug) {
  var GM_log = unsafeWindow.console.log;
}

GM_log("Running collapse kayako response script");

//Don't run on frames or iframes.
if (window.top !== window.self) {
      return;
}

waitForKeyElements(".ticketpostcontainer", addIcon);

function addIcon() {
  var i, toCollapse = document.getElementsByClassName('ticketpostcontainer'), j = toCollapse.length;

  GM_log("Number of elements to collapse: " + toCollapse.length);

  for (i = 0; i < j; i++) {
    var curElement = toCollapse[i];

    var p = document.createElement('p');
    var a = document.createElement('a');
    var span = document.createElement('span');

    styleLink(a);
    styleParagraph(p);
    styleSpan(span);
    p.appendChild(a);
    p.appendChild(span);
    a.appendChild(document.createTextNode('-'));
    span.appendChild(document.createTextNode(' Some text'));

    a.addEventListener("click", toggle, false);

    curElement.parentNode.insertBefore(p, curElement);
  }

  function toggle(e) {
    if (this.firstChild.nodeValue === '-') {
      this.parentNode.nextSibling.style.display = 'none';
      this.firstChild.nodeValue = '+';
      this.nextSibling.style.display = 'inline';

    } else {
      this.parentNode.nextSibling.style.display = 'block';
      this.firstChild.nodeValue = '-';
      this.nextSibling.style.display = 'none';
    }
    e.preventDefault();
  }

  function styleLink(a) {
    a.href = '#';
    a.style.fontWeight = 'bold';
    a.style.background = '#F6F1E7';
    a.style.border = '1px solid #cccccc';
    a.style.color = '#B24C58';
    a.style.textDecoration = 'none';
    a.style.width = '15px';
    a.style.height = '15px';
    a.style.textAlign = 'center';
    a.style.fontSize = '100%';
    a.style.margin = '0 5px 5px 8px';
    a.style.cssFloat = 'left';
    a.style.display = 'block';
    a.style.lineHeight = '13px';
  }

  function styleParagraph(p) {
    p.style.margin = '0 0 0 0';
    p.style.lineHeight = '16px';
    p.style.clear = 'both';
    p.style.height = '15px';
  }

  function styleSpan(span) {
    span.style.display = 'none';
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T03:11:42.537

`addIcon`折叠所有*ticketpostcontainer*元素，但`waitForKeyElements`将为所有三个*ticketpostcontainer*元素触发并运行它。尝试像这样为每个运行一次：

```
function addIcon($el) {
    var curElement = $el.get(0); // get DOM element
    // proceed as above but without the for loop
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T14:56:51.340

这是修改后的代码部分，现在可以正常运行，如果有人愿意，还可以链接到[完整脚本。](https://gist.github.com/3807015)

```
waitForKeyElements(".ticketpostcontainer", addIcon);

function addIcon($el) {
  var curElement = $el.get(0);

  var p = document.createElement('p');
  var a = document.createElement('a');
  var span = document.createElement('span');
  var strong = document.createElement('srong');

    GM_log("Node: " + curElement.className); //Debug

    var node = curElement.getElementsByClassName('ticketpostbarname');
    var posterName = node[0].textContent;
    GM_log("Poster Name: " + node[0].textContent); //Debug

    node = curElement.getElementsByClassName('ticketbarcontents');
    var postDate = node[0].textContent;
    GM_log("Post Date: " + node[0].textContent); //Debug

  styleLink(a);
  styleParagraph(p);
  styleSpan(span);
  styleStrong(strong);
  p.appendChild(a);
  p.appendChild(span);
  a.appendChild(document.createTextNode('-'));
  span.appendChild(strong);
  strong.appendChild(document.createTextNode(' ' + posterName));
  span.appendChild(document.createTextNode(" (" + postDate + ")"));

  a.addEventListener("click", toggle, false);

  curElement.parentNode.insertBefore(p, curElement); 
```

# java - 从两个不同的对象类调用发送函数时的java空指针异常

> ID：12658121
> 
> 赞同：0
> 
> 时间：2012-09-30T02:23:35.697
> 
> 标签：java

```
DatagramPacket sendingPackets;
byte[] hellodata;
public void sendData(String toServer, String ip, int port)
{

    try
    {
        DatagramSocket sendingSocket=new DatagramSocket();
        System.out.println("From manipulate ip="+ip+"and port ="+port+toServer);

       hellodata = toServer.getBytes();
        sendingPackets = new DatagramPacket(hellodata, hellodata.length,     InetAddress.getByName(ip), port);
        sendingSocket.send(sendingPackets);
        // sendingSocket.close();
    }
    catch (Exception EX)
    {
        JOptionPane.showMessageDialog(null, "Sending Error :" + EX, "Error", JOptionPane.ERROR_MESSAGE);
    }
}

public void sendmyData(String d, String ip,int port)
{
    sr = new SendAndRecieveZone();
    sr.sendData(d, ip, port);
}

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt)                                         
{                                             
    srs = new SendAndRecieveZone();
    data = jTextField1.getText();
    srs.sendData(d, ip, port);   
} 
```

sendData() 这个函数在“SendAndRecieveZone”类中。sendmyData() 是一个单独的类“loginClass”的函数。jButton1ActionPerformed() 在另一个类“mainClass”中。我试图从 loginClass 和 mainClass 调用 sendData()，但是从“loginClass”的第一次调用是成功的，但是当我尝试从“mainClass”调用它会创建空指针异常。我调试它并在“srs.sendData(d, ip, port);”行发现错误 主类。不知道哪里出错了。此外，当 loginClass 多次调用 sendData() 函数时，它不会产生任何错误。

# c++ - 如何在 C++ 中实现 3 <= X <= 10？

> ID：12658124
> 
> 赞同：6
> 
> 时间：2012-09-30T02:24:39.993
> 
> 标签：c++, operator-overloading

我希望能够写作

```
if (3 <= X <= 10)
{

}
else if (20 < X < 100) 
{ //...etc 
```

在 C++ 中并让它正确评估。我知道你可以在 Python 中做到这一点，我认为这是表达条件的一种非常易读的方式。

我不想写：

```
if (3 <= X && X <= 10) //etc. 
```

我怎样才能在 C++ 中做到这一点？可能吗？重载运算符会是什么样子？**如果不是，你能解释为什么它不可能**吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-30T02:39:26.490

你确定你需要这个吗？

[更新]

过了一会儿，我想到了一个看起来并不完全疯狂的想法；）

我[在ideone做了一个工作示例](http://ideone.com/vcsAp)

您需要从包装第一个元素开始：

```
int main() {
   int x = 134, y = 14;
   if (IntComp(7) <= x <= 134)
   {
       std::cout << "Hello ";
   } 
   if (IntComp(134) > y > 12)
   {
       std::cout << "world!";
   } 
} 
```

这里的魔力：

```
class IntComp {
public:
   IntComp(int x, bool result = true) : value(x), result(result) {}
   IntComp operator <= (int x) const
   {
       return IntComp(x, result && value <= x);
   }
   IntComp operator > (int x) const
   {
       return IntComp(x, result && value > x);
   }
   operator bool() const { return result; }
private:
   int value;
   bool result;
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-30T02:25:54.930

你不能在 C++ 中做到这一点。您必须将其分解为两个单独的操作：

```
if (3 <= X && X <= 10)
{
    ...
}
else if (20 < X && X < 100)
{
    ...
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-30T12:45:54.057

就个人而言，我认为所有这些运算符重载解决方案都有些过度设计。两个简单的函数模板怎么样？

```
template<typename A, typename B, typename C>
bool ordered(const A& a, const B& b, const C& c)
{
    return (a <= b) && (b <= c);
}

template<typename A, typename B, typename C>
bool between(const A& a, const B& b, const C& c)
{
    return (a < b) && (b < c);
}

void foobar(int X)
{
    if (ordered(3, X, 10))
    {

    }
    else if (between(20, X, 100))
    {
        // ...
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-30T02:55:15.767

令人惊奇的是，C++ 将允许您使用用户定义的类型来做一些事情......

```
struct C
   {
   int value;
   bool state;
   C( int value, bool state=true ) : value(value), state(state) {}
   };

C operator <= ( int a, C b )
   {
   if ( a <= b.value ) return C(b.value,true);
   return C(b.value,false);
   }

bool operator <= ( C a, int b )
   {
   if ( a.state && a.value <= b ) return true;
   return false;
   }

std::ostream & operator << ( std::ostream & os, C c ) { os<<c.value; return os; }

void test( C X )
   {
   if (3 <= X <= 10) cerr<<"(3 <= X <= 10) is true for X="<<X<<"\n";
   }

int main()
   {
   test(2), test(3), test(4), test(10), test(11);
   } 
```

输出...

```
$ ./how-to-implement-3-x-10-in-c++.cpp
(3 <= X <= 10) is true for X=3
(3 <= X <= 10) is true for X=4
(3 <= X <= 10) is true for X=10 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-30T14:40:05.350

由于 C++11 具有基于范围的`for`循环，最简单和最简单的是`Range`类模板，它除了支持循环外，还支持集合成员资格检查，例如作为方法`contains`。

一个明显的优势是，这种方法只有*一个*简单的模板，具有多种用途。

还有一个可能不那么明显的优势是它支持`const`循环变量，比如……

```
int main()
{
    using std::wcout;  using std::endl;  using cpp::range;

    for( auto const i : range( 2, 7 ) )
    {
        wcout << i << " ";
    }
    wcout << endl;

    if( range( 2, 7 ).contains( 3 ) )
    {
        wcout << "Yes!" << endl;
    }
    else
    {
        wcout << "No!" << endl;
    }
} 
```

像这样的定义

```
#include <utility>          // std::begin, std::end

namespace cpp {
    template< class Derived >
    class Comparable
    {
    public:
        friend bool operator<=( Derived const& a, Derived const& b )
        { return !(b < a); }

        friend bool operator>=( Derived const& a, Derived const& b )
        { return !(a < b); }

        friend bool operator>( Derived const& a, Derived const& b )
        { return (b < a); }

        friend bool operator!=( Derived const& a, Derived const& b )
        { return !(a == b); }
    };

    template< class TpValue >
    class Range
    {
    public:
        typedef TpValue Value;

    private:
        Value   first_;
        Value   last_;

    public:
        class Iter
            : public Comparable< Iter >
        {
        private:
            Value   current_;

        public:
            Value operator*() const { return current_; }

            void operator++() { ++current_; }

            friend bool operator<( Iter const a, Iter const b )
            { return a.current_ < b.current_; }

            friend bool operator==( Iter const a, Iter const b )
            { return a.current_ == b.current_; }

            explicit Iter( Value const v )
                : current_( v )
            {}
        };

        Value first() const { return first_; }
        Value last() const { return last_; }

        Iter begin() const { return Iter( first_ ); }
        Iter end() const { return Iter( last_ + 1 ); }

        bool contains( Value const x ) const
        { return (first_ <= x && x <= last_); }

        Range( Value const first, Value const last )
            : first_( first ), last_( last )
        {}
    };

    template< class Value >
    Range< Value > range( Value const first, Value const last )
    {
        return Range< Value >( first, last );
    }

    template< class Value >
    typename Range< Value >::Iter begin( Range< Value > const& r )
    { return r.begin(); }

    template< class Value >
    typename Range< Value >::Iter end( Range< Value > const& r )
    { return r.end(); }
}  // namespace cpp 
```

将其概括为处理浮点范围留给读者作为练习（这里不要求）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-30T02:30:47.330

唯一的办法就是按照马龙建议的方式。不幸的是，没有办法通过运算符重载来规避这一点。重载运算符将如下所示：`operator<=<=`，其中 <=<= 是三元运算符。唯一的三元运算符是“？：”，这会使您的语法看起来非常难看。最好用老式的方式来做。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-30T11:47:59.580

首先：标准要求运算符重载在参数中至少涉及一个用户定义的类型。因此`X`必须是用户定义的类型。

如果是，那么它就成为可能，没有问题。

```
struct Integral {
    Integral(int i): _value(i) {}
    int _value;
};

class ComparisonResult {
public:
    ComparisonResult(Integral last, bool result): _last(last), _result(result) {}

    operator bool() const { return _result; }

    Integral last() const { return _last; }

private:
    Integral _last;
    bool _result;
};

ComparisonResult operator<(Integral left, integral right) {
    return ComparisonResult(right, left._value < right._value);
}

ComparisonResult operator<(ComparisonResult cr, Integral right) {
     if (not cr) { return ComparisonResult(right, false); }
     return ComparisonResult(right, cr.last() < right);
}

// Other operators here, with the same ComparisonResult type 
```

接着：

```
int main() {
    Integral X(4);
    if (3 < X < 10) { std::cout << "Hello, World!\n"; }
} 
```

# filestream - 在转换 MP3 时提供它

> ID：12658125
> 
> 赞同：0
> 
> 时间：2012-09-30T02:24:43.353
> 
> 标签：filestream, httpresponse

整个星期我一直在努力在我的网站上提供正在转换的 mp3。

看起来真的很简单。

*   我首先想到：我会将 ffmpeg 进程的输出重定向到 Web 响应，然后意识到无论我选择哪种编码，输出都已损坏：Windows 版本的 ffmpeg stdout 仅输出损坏的字节，这对于像它这样的重要程序来说很奇怪，但是确实如此。可能与 Windows 控制台在 CP65001 中不输出的事实不兼容。不知道。

*   然后我尝试重定向 ffmpeg 写入的文件的内容，但是引发了很多异常，关于到达流的末尾，或者一些文件权限问题。我在 SO 上阅读了很多关于读取正在写入的文件的帖子，但在某些情况下，人们只是选择使用另一种不那么脏的方法。

*   我尝试使用一个名为 UTFRedirect.exe 的 NeoSmart 程序，它被创建为允许将 -REAL- UTF8 内容输出到标准输出。它是。但是当它启动从进程时，这个程序在 C++ 中使用“WaitForSingleObject”，所以它不是异步的。输出内容的同步方法是没有用的，因为在这种情况下，人们会使用一个文件并从中获取“ReadAllBytes”。

*   我试过SoX。标准输出编码也有同样的问题，它对 URL 的处理非常糟糕。

*   我试过：[在服务器上生成 mp3 时流式传输](https://stackoverflow.com/questions/5655623/streaming-mp3-while-it-is-being-generated-on-the-server)。但这与我的问题不相似，最后。

*   我试图看看是否有更多机会使用 ffmpeg 创建一个带有管道到文件的文件， `ffmpeg -i input.mp3 -f mp3 - >output.mp3`因为我似乎无法真正访问由 ffmpeg 创建的文件`ffmpeg -i input.mp3 -f mp3 output.mp3`。

有没有人曾经遇到过同样的问题？

[编辑 09/29]

我决定编写自己的redirect.exe 程序，以便可以将任何内容重定向到其中。我用两种模式实现：要么将字节写入 FileShare.ReadWrite 文件，要么将 HEX 输出到屏幕，以便可以将其转换为字节。

有了这个解决方案，我有 95% 的把握能够实现我的目标，即“即时”使用 ffmpeg 或 sox 等程序的标准输出。我可能会带着答案回来。但我已经知道这个解决方案很慢，因为代表一个十六进制 = 两个字节。也许我会使用另一个“基础”来表示我的数据，换句话说，压缩它，这样它就可以用 ASCII 或任何没有空字符的东西来表示，但它占用的空间更少。

对于那些感兴趣的人，要从标准输入中读取 -REAL- 字节，可以使用以下方法：

```
using (Stream stdin = Console.OpenStandardInput())
    using (Stream stdout = Console.OpenStandardOutput())
            {
                byte[] buffer = new byte[2048];
                int bytes;
                while ((bytes = stdin.Read(buffer, 0, buffer.Length)) > 0)
                {                        
                    // Now you have a buffer of bytes in 'buffer'
                }
            } 
```

[编辑 09/30]

因为我现在能够获取字节，所以我会将 StandardOutput 字节输出为 Ascii85。它应该多占用 25% 的空间，而不是 100%。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T05:25:34.197

我制作了一个 C# 控制台应用程序，它重定向程序的标准输出并将字节输出为 ascii85。因此，无需再担心 Windows shell 将字节输出到 C# 进程的能力。

我目前使用它从转换为 ffmpeg 的 MP3 动态重定向到 webresponse 字节，并且它可以工作。

如果将 Ascii85 与表示 100% 开销的十六进制字符串和表示 33% 数据大小开销的 base64 进行比较，则 Ascii85 表示相对于字节空间的 25% 开销。

我使用了 Jeff Atwood 在他的 Coding Horror 博客上的 Ascii85 课程：http: [//www.codinghorror.com/blog/2005/10/c-implementation-of-ascii85.html](http://www.codinghorror.com/blog/2005/10/c-implementation-of-ascii85.html)

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

namespace stdshare {
    class Program
    {
        static void Main(string[] args)
        {

                Int32 dur = 0;
        try 
                {
                    dur = Convert.ToInt32(args[0]);
        } catch { return; }

            Console.InputEncoding = Encoding.UTF8;
            Console.OutputEncoding = Encoding.UTF8;

                    using (Stream stdin = Console.OpenStandardInput())
                    using (Stream stdout = Console.OpenStandardOutput())
                    {
                        byte[] buffer = new byte[2048];
                        byte[] buffer2 = new byte[2048];

                        int bytes;
                int pos = 0;
                        using (BinaryReader br = new BinaryReader(stdin))
                        while ((bytes = br.Read(buffer, 0, buffer.Length)) > 0)
                        {
                            buffer2 = new byte[bytes];
                            Buffer.BlockCopy(buffer, 0, buffer2, 0, bytes);
                            string s = System.Convert.ToBase64String(buffer2);
                            Console.WriteLine(s);
                            Console.Out.Flush();
                            stdout.Flush();                            
                  pos += 1;
                  if (pos > dur) break;
                        }

                    }                 

        }

        class Ascii85
        {
            /// <summary>
            /// Prefix mark that identifies an encoded ASCII85 string, traditionally '<~'
            /// </summary>
            public string PrefixMark = "<~";
            /// <summary>
            /// Suffix mark that identifies an encoded ASCII85 string, traditionally '~>'
            /// </summary>
            public string SuffixMark = "~>";
            /// <summary>
            /// Maximum line length for encoded ASCII85 string; 
            /// set to zero for one unbroken line.
            /// </summary>
            public int LineLength = 0;
            /// <summary>
            /// Add the Prefix and Suffix marks when encoding, and enforce their presence for decoding
            /// </summary>
            public bool EnforceMarks = true;

            private const int _asciiOffset = 33;
            private byte[] _encodedBlock = new byte[5];
            private byte[] _decodedBlock = new byte[4];
            private uint _tuple = 0;
            private int _linePos = 0;

            private uint[] pow85 = { 85 * 85 * 85 * 85, 85 * 85 * 85, 85 * 85, 85, 1 };

            /// <summary>
            /// Decodes an ASCII85 encoded string into the original binary data
            /// </summary>
            /// <param name="s">ASCII85 encoded string</param>
            /// <returns>byte array of decoded binary data</returns>
            public byte[] Decode(string s)
            {
                if (EnforceMarks)
                {
                    if (!s.StartsWith(PrefixMark) | !s.EndsWith(SuffixMark))
                    {
                        throw new Exception("ASCII85 encoded data should begin with '" + PrefixMark +
                            "' and end with '" + SuffixMark + "' Problematic string: " + s);
                    }
                }

                // strip prefix and suffix if present
                if (s.StartsWith(PrefixMark))
                {
                    s = s.Substring(PrefixMark.Length);
                }
                if (s.EndsWith(SuffixMark))
                {
                    s = s.Substring(0, s.Length - SuffixMark.Length);
                }

                MemoryStream ms = new MemoryStream();
                int count = 0;
                bool processChar = false;

                foreach (char c in s)
                {
                    switch (c)
                    {
                        case 'z':
                            if (count != 0)
                            {
                                throw new Exception("The character 'z' is invalid inside an ASCII85 block.");
                            }
                            _decodedBlock[0] = 0;
                            _decodedBlock[1] = 0;
                            _decodedBlock[2] = 0;
                            _decodedBlock[3] = 0;
                            ms.Write(_decodedBlock, 0, _decodedBlock.Length);
                            processChar = false;
                            break;
                        case '\n':
                        case '\r':
                        case '\t':
                        case '\0':
                        case '\f':
                        case '\b':
                            processChar = false;
                            break;
                        default:
                            if (c < '!' || c > 'u')
                            {
                                throw new Exception("Bad character '" + c + "' found. ASCII85 only allows characters '!' to 'u'.");
                            }
                            processChar = true;
                            break;
                    }

                    if (processChar)
                    {
                        _tuple += ((uint)(c - _asciiOffset) * pow85[count]);
                        count++;
                        if (count == _encodedBlock.Length)
                        {
                            DecodeBlock();
                            ms.Write(_decodedBlock, 0, _decodedBlock.Length);
                            _tuple = 0;
                            count = 0;
                        }
                    }
                }

                // if we have some bytes left over at the end..
                if (count != 0)
                {
                    if (count == 1)
                    {
                        throw new Exception("The last block of ASCII85 data cannot be a single byte.");
                    }
                    count--;
                    _tuple += pow85[count];
                    DecodeBlock(count);
                    for (int i = 0; i < count; i++)
                    {
                        ms.WriteByte(_decodedBlock[i]);
                    }
                }

                return ms.ToArray();
            }

            /// <summary>
            /// Encodes binary data into a plaintext ASCII85 format string
            /// </summary>
            /// <param name="ba">binary data to encode</param>
            /// <returns>ASCII85 encoded string</returns>
            public string Encode(byte[] ba)
            {
                StringBuilder sb = new StringBuilder((int)(ba.Length * (_encodedBlock.Length / _decodedBlock.Length)));
                _linePos = 0;

                if (EnforceMarks)
                {
                    AppendString(sb, PrefixMark);
                }

                int count = 0;
                _tuple = 0;
                foreach (byte b in ba)
                {
                    if (count >= _decodedBlock.Length - 1)
                    {
                        _tuple |= b;
                        if (_tuple == 0)
                        {
                            AppendChar(sb, 'z');
                        }
                        else
                        {
                            EncodeBlock(sb);
                        }
                        _tuple = 0;
                        count = 0;
                    }
                    else
                    {
                        _tuple |= (uint)(b << (24 - (count * 8)));
                        count++;
                    }
                }

                // if we have some bytes left over at the end..
                if (count > 0)
                {
                    EncodeBlock(count + 1, sb);
                }

                if (EnforceMarks)
                {
                    AppendString(sb, SuffixMark);
                }
                return sb.ToString();
            }

            private void EncodeBlock(StringBuilder sb)
            {
                EncodeBlock(_encodedBlock.Length, sb);
            }

            private void EncodeBlock(int count, StringBuilder sb)
            {
                for (int i = _encodedBlock.Length - 1; i >= 0; i--)
                {
                    _encodedBlock[i] = (byte)((_tuple % 85) + _asciiOffset);
                    _tuple /= 85;
                }

                for (int i = 0; i < count; i++)
                {
                    char c = (char)_encodedBlock[i];
                    AppendChar(sb, c);
                }

            }

            private void DecodeBlock()
            {
                DecodeBlock(_decodedBlock.Length);
            }

            private void DecodeBlock(int bytes)
            {
                for (int i = 0; i < bytes; i++)
                {
                    _decodedBlock[i] = (byte)(_tuple >> 24 - (i * 8));
                }
            }

            private void AppendString(StringBuilder sb, string s)
            {
                if (LineLength > 0 && (_linePos + s.Length > LineLength))
                {
                    _linePos = 0;
                    sb.Append('\n');
                }
                else
                {
                    _linePos += s.Length;
                }
                sb.Append(s);
            }

            private void AppendChar(StringBuilder sb, char c)
            {
                sb.Append(c);
                _linePos++;
                if (LineLength > 0 && (_linePos >= LineLength))
                {
                    _linePos = 0;
                    sb.Append('\n');
                }
            }

        }
    }
} 
```

# java - 运行一个简单的 Hello World 程序

> ID：12658127
> 
> 赞同：3
> 
> 时间：2012-09-30T02:25:23.190
> 
> 标签：java

我做了一个简单的 hello world 程序，它只是弹出一个标题为“hello world”的窗口。我想知道，如果我想让某人像普通的 java 程序一样运行它，我应该给他们什么？.class 文件就足够了吗？

我只是拿.class文件并尝试用java打开它吗？

这是代码：

```
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;

public class hellobox {

    public static void main(String[] args) {
        Display display = new Display();
        Shell shell = new Shell(display);
        shell.setText("Hello world!");
        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch()) 
                display.sleep();
        }
        display.dispose();
    }
} 
```

对于这样一个可悲的问题，我感到非常抱歉。第一次摆弄java。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T02:31:14.130

您只需要一个 .class 文件。您不需要 JAR 文件或 IDE 或 Maven。

按照[这](http://docs.oracle.com/javase/tutorial/getStarted/cupojava/win32.html)封信。你会让它运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T02:34:05.290

如果你使用的是 eclipse，你可以这样做：

1.  右键单击您的项目
2.  点击导出
3.  选择 Java
4.  选择可运行的 Jar 文件
5.  选择启动配置（通常是包含主要方法的项目或类的名称
6.  选择保存jar文件的路径
7.  点击完成

就是这样。现在你得到一个`.jar`文件，它可以像普通的可执行文件一样在每台安装了 Java 的计算机上运行。与操作系统无关。

只需传递`.class`文件就足够了，但它会强制其他用户通过命令行使用`java MyClassName`（不带 .class 后缀）启动它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T02:28:35.287

[Maven](http://maven.apache.org/)是一个非常流行的工具，用于管理构建和打包 Java 应用程序。

例如，设置您的 POM 并使用此命令创建 JAR 文件。

```
mvn package 
```

一旦你有了一个 jar 文件，你就可以使用 java.jar 来运行它。

```
java path/to/MyHelloWorld.jar 
```

# ios - getPocket API - iOS

> ID：12658133
> 
> 赞同：0
> 
> 时间：2012-09-30T02:27:11.323
> 
> 标签：ios, api, login

我正在实现 Pocket API，以便我的应用程序之外的用户可以将网页保存到服务中。

现在我已经排序，我可以登录和保存页面，但据我所知，文档遗漏了这两件事：

*   检查用户是否登录
*   用户如何注销

有没有人对此有任何解决方案？我会自己给 Pocket 发邮件，但只是看看就此事发表意见。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T13:19:05.003

当用户登录时，我猜您存储了用于进行 API 调用的访问令牌？要检查用户是否已登录/是否有权访问，请检查令牌是否存在，以及他们是否能够在不被拒绝访问的情况下调用 API。要注销，您只需从现有的任何存储方法中删除令牌。

# java - DAO 接口和 DAO 实现的 SpringMvc 注解

> ID：12658136
> 
> 赞同：9
> 
> 时间：2012-09-30T02:27:26.540
> 
> 标签：java, spring-mvc, annotations

我想知道我是否正确注释了这些类，因为我对注释不熟悉：

**国家.java**

```
@Component
public class Country {

private int countryId;
private String countryName;
private String countryCode;

/**
 * No args constructor
 */
public Country() {
}

/**
 * @param countryId
 * @param countryName
 * @param countryCode
 */
public Country(int countryId, String countryName, String countryCode) {
    this.countryId = countryId;
    this.countryName = countryName;
    this.countryCode = countryCode;
}
    //getters and setters   

} 
```

**CountryDAO.java**

```
@Repository
public interface CountryDAO {

    public List<Country> getCountryList();

    public void saveCountry(Country country);

    public void updateCountry(Country country);
} 
```

**JdbcCountryDAO.java**

```
@Component
public class JdbcCountryDAO extends JdbcDaoSupport implements CountryDAO{

    private final Logger logger = Logger.getLogger(getClass());

    @Autowired
    public List<Country> getCountryList() {
        int countryId = 6;
        String countryCode = "AI";
        logger.debug("In getCountryList()");
        String sql = "SELECT * FROM TBLCOUNTRY WHERE countryId = ? AND countryCode = ?";
        logger.debug("Executing getCountryList String "+sql);

        Object[] parameters = new Object[] {countryId, countryCode};

        logger.info(sql);

        //List<Country> countryList = getJdbcTemplate().query(sql,new CountryMapper());
        List<Country> countryList = getJdbcTemplate().query(sql, parameters,new CountryMapper());
        return countryList;
    } 
```

**CountryManagerIFace.java**

```
@Repository
public interface CountryManagerIFace extends Serializable{

    public void saveCountry(Country country);

    public List<Country> getCountries();
} 
```

**CountryManager.java**

```
@Component
public class CountryManager implements CountryManagerIFace{

    @Autowired
    private CountryDAO countryDao;

    public void saveCountry(Country country) {
        countryDao.saveCountry(country);

    }

    public List<Country> getCountries() {
        return countryDao.getCountryList();
    }

    public void setCountryDao(CountryDAO countryDao){

        this.countryDao = countryDao;   

    }
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-30T14:48:39.947

这个答案应该澄清一点：[Spring 中的@Component、@Repository 和@Service 注释有什么区别？](https://stackoverflow.com/a/6897038/400545)

你应该知道的其他事情：

*   您的实体和接口不需要任何注释。实际上，@Component 和其他派生注释只是意味着您正在动态声明一个 Spring bean。例如，

    ```
    @Component
    public class MyComponent { ... } 
    ```

    默认情况下，将在 Spring 的上下文中添加一个名为“myComponent”的 bean。Spring bean 默认是单例的，代表真实的实例化对象。
    因此，将实体或接口声明为 Spring bean 是没有意义的。

*   管理器在语义上与服务相同，因此您应该使用@Service 对其进行注释。

您的代码应该是这样的：

```
// No annotation
public class Country { 
```

和

```
// No annotation
public interface CountryDAO { 
```

和

```
@Repository
public class JdbcCountryDAO extends JdbcDaoSupport implements CountryDAO { 
```

和

```
// No annotation
public interface CountryManagerIFace extends Serializable{ 
```

和

```
@Service
public class CountryManager implements CountryManagerIFace{

    @Autowired
    private CountryDAO countryDao; 
```

注意：我很少在代码中使用@Component，因为@Controller（表示层）、@Service（服务层）和@Repository（dao 层）涵盖了我主要的 Spring bean 需求。

# python - Python：无法导入 urandom 模块（OS X）

> ID：12658141
> 
> 赞同：9
> 
> 时间：2012-09-30T02:28:17.660
> 
> 标签：python, importerror, python-import

我很惭愧提出这样的问题，但我已经尝试了几个小时......似乎我不能让我的 python 版本再做随机的事情了。更准确地说，它缺少模块`urandom`。

首先，这里有一些关于我的系统的信息：

*   OSX 版本：10.7.4
*   蟒蛇版本：Python 2.7.1
*   `which python`：`/opt/local/bin/python`
*   `import os; os`：`<module 'os' from '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/os.pyc'>`
*   `echo $PATH`：`/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/usr/local/git/bin`
*   `$ENV`并且`$PYTHONPATH`是空的

现在，当我更深入地查看并执行`vim /opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/random.py`时，我可以看到这个文件需要 urandom：

```
line 47: from os import urandom as _urandom 
```

因此，从逻辑上讲，当我尝试运行时会失败：

```
>>> import random
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/random.py", line 47, in <module>
    from os import urandom as _urandom
ImportError: cannot import name urandom 
```

有任何想法吗？urandom应该住在哪里？到目前为止，我一直在谷歌搜索但没有成功。
似乎很多 Ubuntu 用户都对 virtualenv 有这个问题，但我没有使用 virtualenv，而且我不在 Ubuntu 上。我敢打赌，不知何故我的 PATH 或 PYTHONPATH 或 ENV 变量设置不正确，但我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-30T02:46:38.010

好的，我想通了。我的终端中有一个脏哈希表。

解决方案：

```
hash -r  # will erase the currently used hash table 
```

完成后，我再次运行 python 并得到：

```
Python 2.7.3 (default, Apr 19 2012, 00:55:09) 
[GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import random
>>> import os; os
<module 'os' from '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/os.pyc'> 
```

请注意不同的 python 版本（之前的 2.7.3 与 2.7.1）。我认为这是由于之前通过 mac 端口安装了 python 2.3。

对不起这个问题/快速回答：/

祝你晚安！
阿尔诺

# php - Zend_Form getErrors

> ID：12658145
> 
> 赞同：5
> 
> 时间：2012-09-30T02:29:22.477
> 
> 标签：php, zend-framework, zend-form

我有一个表格。
已检查：`$isValid = $form->isValid($this->getRequest()->getPost())`

问题是错误是空的。当表单无效时
`$form->getErrors()`返回数组。`{"field1": [], "field2": [], "field3": [], "field4": []}`

所以内部数组是空的。我应该怎么做才能找到表单无效的原因？代码不是我开发的，但其中没有任何可疑之处。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-30T15:41:58.067

您可以`$form->getMessages()`用来获取错误消息。

```
 $form->isValid($this->_getAllParams());
 $form_messages = $form->getMessages(); 
```

# iphone - 使用完成块呈现和关闭 UIViewController - 没有协议和委托

> ID：12658147
> 
> 赞同：3
> 
> 时间：2012-09-30T02:29:36.383
> 
> 标签：iphone, ios, uiviewcontroller

我想`VC2`从一个实例中展示一个实例，`VC1`并将它传递给一个完成块，以便在`VC2`它自行关闭时执行。传递的完成块将是对`VC1`实例的方法调用。

这样做的正确方法是什么？

虽然从 VC1 呈现 VC2 通常是：

```
 VC2 *vc2 = [[VC2 alloc] init];
    [self presentViewController:vc2 animated:YES completion: nil]; 
```

在 VC2 中

```
 [self dismissViewControllerAnimated:YES completion: nil]; 
```

（ps 通常我会在 VC2 中像这样关闭 VC2 - 即调用协议中声明的 VC1 方法

```
 [self.delegate dismissVC2]; // basically meaning VC1 to dismiss VC2 
```

...但我猜 VC2 也可以自行解散 - 但是我不确定这总是可以的。

在 Apple 文档中，他们仍然推荐委托方案 - 但是自我解雇也有效。

您也可以对此发表评论吗？）

我想在 VC2 中这样做：

```
 [self dismissViewControllerAnimated:YES completion: passedBlockFromVC1]; 
```

并且在呈现 VC2 时`passedBlockFromVC1`以某种方式将其传递给 VC2 - 同时包含 VC1 方法。

这样做的正确方法是什么？

总之，我正在寻找一种从 VC1 呈现 VC2 的解决方案，当 VC2 get 被解除时，它会在完成时调用 VC1 方法——所有这些都不需要定义协议或使用委托（我觉得这在某种程度上很麻烦）案例 - 但非常可靠）

**这是可能的和推荐的吗？**

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T16:25:35.530

这是可能的，但您必须注意保留周期。请记住，块将捕获其中引用的任何变量，包括 self. 如果 VC1 保持对 VC2 的强引用，请注意不要让块也对 VC1 有强引用。如果需要`__weak`，请在块外引用 self 并使用它。

[有关使用块的保留循环以及如何避免它们的更多信息，请参阅 Apple 文档。](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/WorkingwithBlocks/WorkingwithBlocks.html#//apple_ref/doc/uid/TP40011210-CH8-SW16)

最简单的做法是继承 UIViewController 并创建自己的方法和属性来实现这一点。

您可以声明一个属性以将块存储为实例变量，如下所示：

```
@property (nonatomic, copy) dispatch_block_t completionBlock; 
```

使用标准的 libdispatch 块类型。

然后定义一些设置方法：

```
-(void)presentViewController:(UIViewController *)viewController animated:(BOOL)animated completion:(void (^)(void))completion dismissCompletion:(dispatch_block_t)dismissCompletion{
    self.completionBlock = dismissCompletion;
    [super presentViewController:viewController animated:animated completion:completion];
} 
```

然后重写dismiss方法以调用完成块（如果有）。

```
-(void)dismissViewControllerAnimated:(BOOL)flag completion:(void (^)(void))completion{
    if (self.completionBlock && ! completion){
        [super dismissViewControllerAnimated:flag completion:self.completionBlock];
        self.completionBlock = nil;
        return;
    }
    [super dismissViewControllerAnimated:flag completion:completion];
} 
```

# assembly - 不使用 CPU12 处理器运行

> ID：12658151
> 
> 赞同：3
> 
> 时间：2012-09-30T02:30:57.237
> 
> 标签：assembly, boolean-logic, datasheet, 68hc12

CPU12 处理器中是否有提供直接 NOT 功能的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T19:16:18.170

这应该是您正在寻找[的数据表。](http://www.freescale.com/files/microcontrollers/doc/ref_manual/CPU12RM.pdf)没有`logical NOT`可用的，您必须自己编写代码。

![飞思卡尔 CPU12 数据表](../Images/28205f6961b05c490d0fe572ae532dfc.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T02:33:39.500

COM、COMA 和 COMB 看起来就像您正在寻找的那样；它们分别计算内存位置 A 或 B 寄存器的反码。

# node.js - Mongoose 为什么要添加空白数组？

> ID：12658152
> 
> 赞同：33
> 
> 时间：2012-09-30T02:30:59.597
> 
> 标签：node.js, mongodb, mongoose

我正在尝试通过我的 node.js 应用程序开始使用 Mongoose 作为 MongoDB 的 ODM。我注意到，当我设计一个带有嵌入式文档的模式时，如果我不向它添加值，它会在 Mongo 中存储一个空白数组“[]”。为什么是这样？我正在尝试存储对记录的历史更改，而空白数组意味着该更改删除了该值。这是一个示例架构。

```
schema.Client = new mongoose.Schema({
    name:{type:String, required:true},
    products:[{
        name:{type:String, index:true},
        startDate:Date,
        endDate:Date
    }],
    subdomain:{type:String, index:{unique:true}},
}) 
```

这是我保存仅包含名称和子域的文档时生成的文档。

```
{
    "name": "Smith Company",
    "products": [],
    "subdomain": "smith"
} 
```

为什么它默认添加带有空白数组的产品，我该如何停止它？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2017-09-11T13:55:24.400

您可以通过定义如下架构来解决问题：

```
products: {
  type: [{
    name:String,
    startDate:Date,
    endDate:Date
  }],
  default: undefined
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-09-30T15:17:10.107

**空白数组**为您提供了在模型中添加或删除元素的便捷方式。

`$push` `$addToSet` `$pull`in update 将帮助您管理数组元素。

如果您没有空白数组，则无法将元素推送到`null`

但在**空白数组**中是可能的。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2019-03-23T07:07:15.507

默认情况下，数组具有`[]`值。你可以覆盖它：

```
var UserSchema = new Schema({
  followers : {
    type: [String],
    default: undefined
  }
}) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-03T19:55:17.413

这似乎是设计使然，但这里有一种解决方法，使用“pre”处理程序来删除默认的空数组：[https ://github.com/LearnBoost/mongoose/issues/1335](https://github.com/LearnBoost/mongoose/issues/1335)

不过，这仅在我将字段设置为 时才对我`null`有用。如果我将其设置`undefined`为示例代码中的那样，空数组似乎又回来了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-30T02:35:58.327

因为在您的模式中，您将产品定义为对象数组。您需要尝试以下操作：

```
products: {
        name:{type:String, index:true},
        startDate:Date,
        endDate:Date
    }, 
```

这将存储一个空对象而不是数组。

# c++ - 如何在输出文本的同时接受用户输入

> ID：12658157
> 
> 赞同：0
> 
> 时间：2012-09-30T02:32:09.283
> 
> 标签：c++

在大多数以控制台模式运行的服务器上，管理员可以输入命令，同时服务器也会输出诸如玩家死亡等文本。

我只是想知道如何复制这种效果。我到处搜索，甚至不知道它是如何完成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T02:35:44.100

您需要了解[线程](http://www.devarticles.com/c/a/Cplusplus/Multithreading-in-C/)。

所有程序都至少有一个线程，但大多数控制台应用程序只有一个。这样，一个程序一次只能做一件事。

将具有两个线程的程序想象成两个程序一起朝着一个目标工作。

您可以创建一个执行计算的线程，一个打印所有输出的线程和一个持续从键盘读取数据的线程。这将创建一个可以同时读写的程序。

另外，请记住，您需要使用多处理器机器才能让线程为您的程序提供真正的并行性。

这是一个可以同时从/向控制台读取和写入数据的 ruby​​ 示例：

```
a = Thread.new do
  while true do
    puts "Hi There!"
    sleep(1)
  end
end

b = Thread.new do
  while true do
    puts gets.strip+"!"
  end
end
a.join
b.join 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T02:43:37.737

这是使用[线程完成的。](http://en.wikipedia.org/wiki/Thread_%28computing%29)

他们所做的基本上是这样的；程序员创建两个线程，并为每个线程分配一个任务。一个用于输出，另一个用于输入。由于它们同时运行，因此它们都同时做自己的事情。线程向相同的后端处理报告，其中使用输入，并将输出发送到输出线程。最有可能在一个循环中。这会产生您想要的同步效果。

[您可以在此处、](https://stackoverflow.com/questions/266168/simple-example-of-threading-in-c) [此处](http://www.linuxselfhelp.com/HOWTO/C++Programming-HOWTO-18.html)和此处阅读有关实施的更多信息[。](http://www.tutorialspoint.com/cplusplus/cpp_multithreading.htm)

# html - 在 HTML5 中自定义时间输入

> ID：12658161
> 
> 赞同：3
> 
> 时间：2012-09-30T02:33:55.717
> 
> 标签：html, mobile, input

我正在尝试自定义标准 HTML5 时间输入字段以适合我的目的。我正在开发一个移动网络应用程序，我要求用户输入事件持续时间的时间（mm：ss）。几乎给了我想要的东西，但我需要删除 AM/PM 选择器。

![时间选择器](../Images/646a6a3c48155d44047d19d69935a2d3.png)

有谁知道摆脱 AM/PM 的方法？或者，有没有办法修改`<input type="number" />`接受`:`字符并且也适合这个目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T03:03:28.097

只要您有一个 html 选择框，它就会在任何站点上直接转换为该类型的组合框。

但是，您可能想查看 jqueryMobile。而不是一个用于日期和时间的组合框。**您可以分开分钟和秒选择菜单。**

*   这是指向 JqueryMobile Docs 的链接：http: [//jquerymobile.com/demos/1.1.1/](http://jquerymobile.com/demos/1.1.1/)
*   这是您可能需要的选择菜单。 [http://jquerymobile.com/demos/1.1.1/docs/forms/selects/](http://jquerymobile.com/demos/1.1.1/docs/forms/selects/)

你会惊讶于 jQueryMobile 是多么的简单。这就像使用自定义属性编写 html 一样。

获得分钟和秒的那一刻，您可以将其与 javascript 连接起来。然后，将其作为 POST 的一个值提交。

您可能可以将下图想象为分钟和/或秒，而不是月份、日期和年份。

![在此处输入图像描述](../Images/5a1b1b33e9598831aac2bd4e0fca21bd.png)

# php - PHP Gettext 不工作

> ID：12658165
> 
> 赞同：1
> 
> 时间：2012-09-30T02:34:42.150
> 
> 标签：php, locale, gettext

这是我的`./locale/fr/LC_MESSAGES/messages.po`文件：

```
msgid "NO GOOD"
msgstr "IT WORKED!" 
```

用于生成 .mo 文件的命令：

```
$ msgfmt -o locale/fr/LC_MESSAGES/messages.mo locale/fr/LC_MESSAGES/messages.po 
```

我的 PHP 文件（通过 CLI 运行，用于测试目的，以 root 身份运行）。

```
<?php 
    bindtextdomain('messages','./locale');
    textdomain('messages');
    setlocale(LC_MESSAGES, 'fr');
    echo gettext("NO GOOD"); 
```

这是我的输出：

```
$ NO GOOD 
```

PHP信息：

```
GetText Support => enabled 
```

任何想法为什么这可能不起作用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-30T18:58:27.997

原来它不起作用的原因是我选择的语言环境必须是系统识别的语言环境。

就我而言，`fr`这不是有效的语言环境，我必须选择`fr_FR.UTF-8`系统识别的...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-05T12:10:15.517

1.  确保支持语言
2.  安装 gettext 并在 php.ini 中启用它
3.  检查 po 的正确格式（它应该有标题）
4.  确保 mbstring.internalcoding 设置为 UTF-8（）取消注释 php.ini 中的 utf8）
5.  重启 php 和 web 服务器

# node.js - 如何将数据传递给 Express 3 中的每个视图？

> ID：12658175
> 
> 赞同：6
> 
> 时间：2012-09-30T02:37:31.827
> 
> 标签：node.js, express

我正在使用 dynamicHelpers 在 Express 2 的每个页面上设置一些变量。现在它们已经消失了，我不知道该怎么做。使用 Express 3 执行此类操作的最佳方法是什么？

应用程序.js

```
app.dynamicHelpers( require('dynamicHelpers') ) 
```

动态助手.js

```
exports.user = function(req, res) {
    return req.user || {};
}

exports.message = function(req, res) {
    return req.flash.message || {};
} 
```

在 veiw.jade

```
h1= user.username 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-30T03:42:10.157

中间件示例

```
var app = require('express')()
  , jade = require('jade')

app.set('views', __dirname + '/views')
app.set('view engine', 'jade')  

app.use(function(req,res,next){
  res.locals.user = { name : "test" }
  next()
})

app.get('*',function(req,res){
   res.render('index.jade')
})

app.listen('8001') 
```

索引.jade

```
!!! 5
html
  body
    div hello #{user.name} 
```

使用 req.flash 尝试：

```
var app = require('express')()
  , jade = require('jade')

app.set('views', __dirname + '/views')
app.set('view engine', 'jade')

app.use(require('connect-flash')())

// Expose the flash function to the view layer
app.use(function(req, res, next) {
   res.locals.flash = req.flash.bind(req)
   next()
})

app.get('*',function(req,res){
   res.render('index.jade')
})

app.listen('8001') 
```

**在查看选项**下的[https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)更新了我的答案，尚未迁移到 3.0 ：

 **```
The "view options" setting is no longer necessary, app.locals are the local variables 
merged with res.render()'s, so app.locals.pretty = true is the same as passing 
res.render(view, { pretty: true }). 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T02:39:59.057

在路由调用之前，您可能需要一些如下中间件：

```
app.use(function(req,res,next){
  res.locals.user = {username: 'test'};
  next();
}); 
```**

# java - Java 输入字母

> ID：12658177
> 
> 赞同：2
> 
> 时间：2012-09-30T02:37:54.580
> 
> 标签：java

我正在做一个 java 活动，如果名称以字母 AG 开头并以字母 Hz 结尾，则输出无效继承我的代码：

```
System.out.print("Enter your name: ");
String str = in.readLine();
 if(str.startsWith("a" )){
            System.out.print("INVALID!");
        }  if(str.endsWith("h")){
            System.out.print("INVALID!");
        } 
```

这行得通，但是我如何实现字母 a 到 g 和 h 到 zi 已经尝试了这个 [ag] 并且它不起作用！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T02:47:36.490

您还可以考虑在[String.matches()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#matches%28java.lang.String%29)方法中使用正则表达式。像这样的东西：

```
string.matches("^[A-Ga-g].*.[H-Zh-z]") //Where string is a variable in here 
```

**注意：**此正则表达式将返回给定的字符串是否以 AG 开头（大写/小写）并以 HZ 结尾（大写/小写）。因此，您可能希望在执行验证时**否定它。**像这样的东西：

```
if(!string.matches("^[A-Ga-g].*.[H-Zh-z]")){
 //Signifies that the input does not start with A-G and ends with H-Z
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-30T02:40:37.987

看看[`String.startsWith()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#startsWith%28java.lang.String%29)和[`String.endsWith()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#endsWith%28java.lang.String%29)。这两种 String 方法对于这项任务都是无价的。

# asp.net-mvc - .net mvc 4 razor Html.checkboxfor 的问题

> ID：12658183
> 
> 赞同：0
> 
> 时间：2012-09-30T02:39:44.430
> 
> 标签：asp.net-mvc, entity-framework, checkboxfor

我在使用上述主题行时遇到了两个问题。

我有两个需要在一个视图中使用的强类型模型。我需要两个不同模型的原因是因为正在读取的数据来自两个不同的数据库，所以我需要为每个数据库创建一个 edmx（实体框架）数据模型。

我只是想引入“模板”和“担保人”的动态列表。返回的项目数量显然会发生变化。

问题 1：我想将每个复选框设置为“选中”并设置其名称以供显示。有了这个，我不知道语法是否正确或我设置它的方式，即使第二个没有给我设计时编译错误。

问题 2：我遇到的另一个问题是我需要为每组复选框使用不同的模型。但是，当我在第二组复选框中设置模型时，第一个模型被忽略（这是有道理的，因为它是最后一个）。

如何在同一视图中成功使用每个模型以正确设置复选框？

这是代码：

```
<tr>
                            <td colspan="5">
                                <b>@Html.Label("lbl_Templates", "Templates:")</b>
                            </td>
                        </tr>
                        <tr>
                            @model IEnumerable<PDFConverterModel.PDFTemplate>
                            @foreach (var item in Model)
                            {
                                <td>
                                    @Html.CheckBoxFor(model => true, item.TemplateName)
                                </td>
                            }
                        </tr>
                        <tr>
                            <td colspan="5">
                                <b>@Html.Label("lbl_Guarantor", "Guarantor(s):")</b>
                            </td>
                        </tr>
                        <tr>
                                @model IEnumerable<PDFConverterModel.tGuarantor>
                                @foreach (var item in Model)
                                {
                                    <td>
                                        @Html.CheckBoxFor(model => true, item.GuarantorFirstName + " " + item.GuarantorLastName)
                                    </td>
                                }
                        </tr> 
```

顺便说一句，标签的使用是否在语法上正确设置，其中第一个参数是标签的 ID，第二个参数是显示的值？

解决方案的一部分：我快到了......我在获取我想要通过 View 上的 CheckBoxFor Html Helper 显示的属性的索引时遇到问题（直到现在我还没有使用过）。 ..

如果你能帮助我完成最后一部分，我将不胜感激......

您可以看到我创建了以下 ViewModel（我正在使用的是 ViewModelTemplate_Guarantors 类）。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using PDFConverterModel;

namespace PDFConverterModel.ViewModels
{
    public class ViewModelTemplate
    {
        public int SelectedTemplateId { get; set; }
        public IEnumerable<PDFTemplate> Templates { get; set; }
    }

    public class ViewModelGuarantors
    {
        public int SelectedGuarantorId { get; set; }
        public IEnumerable<tGuarantor> Guarantors { get; set; }
    }

    public class ViewModelDepartment
    {
        public int SelectedDepartmentId { get; set; }
        public IEnumerable<Department> Departments { get; set; }
    }

    public class ViewModelTemplate_Guarantors
    {
        public int SelectedTemplateId { get; set; }
        public IEnumerable<PDFTemplate> Templates { get; set; }

        public int SelectedGuarantorId { get; set; }
        public IEnumerable<tGuarantor> Guarantors { get; set; }
    }
} 
```

下面是我在填充模型的客户端项目中的单独 DLL 中创建的业务代码方法。

```
public ViewModelTemplate_Guarantors SelectViewModelTemplate_Guarantors(int LoanId, string LoanTypeId, int DepartmentId)
        {
            try
            {
                var model = new ViewModelTemplate_Guarantors();

                using (PDFService03Entities DbContext1 = new PDFService03Entities())
                {

                    DbContext1.Database.Connection.Open();

                    IEnumerable<PDFTemplate> temps = DbContext1.PDFTemplates.Where(p => p.LoanTypeId == Convert.ToInt32(LoanTypeId) && p.DepartmentId == DepartmentId).FromCache(CachePolicy.WithSlidingExpiration(TimeSpan.FromSeconds(30)));

                    model.Templates = temps.Select(x => new PDFTemplate
                    {
                        TemplateId = x.TemplateId.ToString(),
                        TemplateName = x.TemplateName
                    });
                }

                using (VisionEntities DbContext2 = new VisionEntities())
                {
                    DbContext2.Database.Connection.Open();

                    IEnumerable<tGuarantor> guars = DbContext2.tGuarantors.Where(p => p.ApplicationNum == LoanId).FromCache(CachePolicy.WithSlidingExpiration(TimeSpan.FromSeconds(30)));

                    model.Guarantors = guars.Select(x => new tGuarantor
                    {
                        ApplicationNum = x.ApplicationNum,
                        GuarantorFirstName = x.GuarantorFirstName,
                        GuarantorLastName = x.GuarantorLastName
                    });
                }

                return model;
            }
            catch (Exception ex)
            {
                throw ex;
            }
        } 
```

下面是调用上述代码的 Contoller Action 方法的一部分：

```
ViewModelTemplate_Guarantors tg = db.SelectViewModelTemplate_Guarantors(Convert.ToInt32(loanID), loanType, Convert.ToInt32(selectedVal)); 
```

下面是我在视图中遇到问题的地方......

由于我要传回一个 IEnumerable 对象，如果我能够在此处发送附件，我将有 4 个屏幕截图显示我如何使用我的视图。

可以说，屏幕截图清楚地表明模板和担保人出现了。它们分别是 IEnumerable ViewModelTemplate_Guarantors.Templates 和 .Guarantors 类型。

我只是想输入要返回的项目的索引，但我得到一个设计时编译错误：

“无法使用 [] 将索引分别应用于“System.Collections.Generic.IEnumerable”和 tGuarantor 类型的表达式。

将其称为 101 编程，除非我已经精疲力尽，但我应该能够为上述集合应用一个索引变量来取回相应的项目，除非我完全忘记了一些东西....

我在下面做错了什么？？？

这是我的观点：

```
@model IEnumerable<PDFConverterModel.ViewModels.ViewModelTemplate_Guarantors>
@{
    ViewBag.Title = "BHG :: PDF Generator";
    int ctr = 0;
}
<h2>@ViewBag.Message</h2>

<form id="form1" runat="server">
    <div>
        <table>
            <tr>
                <td>
                    <table style="width: 1000px">
                        <tr>
                            <td colspan="5">
                                <img alt="BHG Logo" src="~/Images/logo.gif" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="txtLoanID">Loan ID :</label>
                            @(Html.Kendo().IntegerTextBox()
                                        .Name("txtLoanID")
                                        .Placeholder("Enter LoanID")
                                )

                            <td colspan="3">
                                <input type="submit" id="btnRefresh" value='Refresh' />
                            </td>
                        </tr>
                        <tr>
                            <td><@Html.Label("lblLoanType1", "Loan Type : ")</td>
                            <td><@Html.Label("lblLoanType2", "SBA")</td>
                            <td></td>
                            <td>
                                <label for="ddlDept">Department:</label>
                                @(Html.Kendo().DropDownList()
                                      .Name("ddlDept")
                                      .DataTextField("DepartmentName")
                                      .DataValueField("DepartmentID")
                                      .Events(e => e.Change("Refresh"))
                                      .DataSource(source =>
                                      {
                                          source.Read(read =>
                                          {
                                              read.Action("GetDepartments", "Home");
                                          });
                                      })
                                )
                            </td>
                        </tr>
                        <tr>
                            <td colspan="5">
                                <b>@Html.Label("lbl_Templates", "Templates:")</b>
                            </td>
                        </tr>
                        <tr>
                            @ctr = 0;
                            @foreach (var item in Model)
                            {
                                <td>
                                    @Html.CheckBoxFor(model => item.Templates[ctr].TemplateName)
                                    @ctr = ctr + 1;
                                    @Html.LabelFor(model => item.Templates[ctr].TemplateName)
                                </td>
                            }
                        </tr>
                        <tr>
                            <td colspan="5">
                                <b>@Html.Label("lbl_Guarantor", "Guarantor(s):")</b>
                            </td>
                        </tr>
                        <tr>
                            @ctr = 0;
                            @foreach (var item in Model)
                            {
                                <td>
                                    @Html.CheckBoxFor(model => item.Guarantors[ctr].GuarantorFirstName + " " + item.GuarantorLastName)
                                    @ctr = ctr + 1;
                                    @Html.LabelFor(model => item.Guarantors[ctr].GuarantorFirstName + " " + item.GuarantorLastName)
                                </td>
                            }
                        </tr>
                        <tr>
                            <td colspan="2"></td>
                            <td>
                                @*@using (Html.BeginForm("GeneratePDF", "Home", new { @loanID = loanID }, FormMethod.Post))
                                { 
                                    <input type="submit" id="btnGeneratePDF" value='Generate PDF' />
                                }*@
                            </td>
                            <td colspan="2"></td>
                        </tr>
                        <tr>
                            <td colspan="5">
                                <b>@ViewBag.Error</b>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    </div>
</form>

<script type="text/javascript">

    $(document).ready(function () {
        $("#ddlDept").prepend("<option value='All' selected='selected'></option>");
    });

    var txtLoanID;

    $("#btnRefresh").click(function () {
        Refresh();
    });

    function Refresh() {

        var txtLoanID = $("#txtLoanID").val();

        if (txtLoanID != "") {
            $.post('/Home/Refresh', { loanID: $('#txtLoanID').val(), loanType: $('#lblLoanType2').val, selectedVal: $("#ddlDept option:selected").text() }, function (data) {
                data.success;
                if (data.success == true) {
                    if (data.templist == true) {
                        //show the templates
                        $("#lbl_Templates").visible = true;
                        $("#btnGeneratePDF").visible = true;
                    }
                    if (data.guarlist == true) {
                        //show the guarantors
                        $("#lbl_Guarantor").visible = true;
                        $("#btnGeneratePDF").visible = true;
                    }
                    if ((data.templist == true) && (data.guarlist == true)) {
                        $("#btnGeneratePDF").visible = true;
                    }
                    else {
                        $("#btnGeneratePDF").visible = false;
                    }
                }
                else {
                    $("#btnGeneratePDF").visible = false;
                    //hide the templates
                    $("#lbl_Templates").visible = false;
                    $("#btnGeneratePDF").visible = false;
                    //hide the guarantors
                    $("#lbl_Guarantor").visible = false;
                    $("#btnGeneratePDF").visible = false;
                }
            });
        }
        else {
            alert("Please enter a Loan ID.");
        }
    }

    $("#form1").validate({
        event: "submit",
        rules: {
            txtLoanID: {
                required: true
            }
        },
        messages: {
            txtLoanID: {
                required: ' Please enter a Loan ID. '
            }
        }
    });

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T17:48:44.650

如果您确实需要完成为模型中不存在的值创建控件的任务，则可以使用 Html.Checkbox 而不是 Html.CheckBoxFor。

这允许您以编程方式指定名称、值和 IsChecked 属性。

或者，按照其他答案的建议进行操作，并在您的模型上创建一个 GarantorFullName 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T14:38:20.410

CheckBoxFor 期望模型中一个属性的确切名称。

您不能为 item.GuarantorFirstName + " " + item.GuarantorLastName 选择复选框

只能一个项目，例如只有 item.GuarantorFirstName

如果您同时需要这两者，请在您的模型中创建一个包含 item.GuarantorFirstName + " " + item.GuarantorLastName 的属性全名

CheckBoxFor 应该指向 item.Fullname

# xaml - 如何在 xaml 中将字符串属性全部以小写形式进行数据绑定？

> ID：12658185
> 
> 赞同：0
> 
> 时间：2012-09-30T02:39:53.750
> 
> 标签：xaml, data-binding, windows-phone

我正在尝试对 Text 属性进行数据绑定，但我希望它全部以小写形式显示

我可以在 xaml 中做些什么来让 HeaderTitle 以小写形式显示 Title 属性吗？

```
<TextBlock x:Name="HeaderTitle" Text="{Binding Title}" /> 
```

或者我必须做 HeaderTitle.Text = object.Title.ToLower()？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T03:01:34.113

编写[Binding.Converter](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.converter.aspx)似乎是最直接的方法。如果你走这条路，你可以[将转换器添加到 style](https://stackoverflow.com/a/379032/99406)。

此外，从 .NET Framework 4.5 开始，TextBox 类似乎有一个[CharacterCasing属性。](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.charactercasing.aspx)我意识到您在询问 TextBlock，但您可以设置 TextBox 的样式，使其适合您需要的内容。

# c - 扫描字符串以查找字符串

> ID：12658187
> 
> 赞同：1
> 
> 时间：2012-09-30T02:40:21.507
> 
> 标签：c, c-strings

我正在尝试编写一个使用 fgets() 从文件中读取一行的函数。读完这条线后，我想把这条线拆开，做成更小的字符串。根据行中的第一个单词，我读入的行可以包含 3-5 个较小的字符串，这些字符串由空格分隔。

示例： 行：删除苹果 12345 字符串 1：删除字符串 2：苹果字符串 3：12345

行：加番茄红叶串1：加串2：番茄串3：红串4：叶

从上面的例子中，如果第一个字符串被删除，我需要读取另外 2 个字符串（苹果，12345）。如果添加第一个字符串，我需要读取 3 个其他字符串（番茄、红色、叶子）。

无论如何，我可以决定阅读次数并使用 sscanf 执行此操作吗？

```
while( fgets( buf, sizeof buf, course_file ) != NULL ){
    sscanf( buf, "%s", &string1);
    printf( "%s\n", buf );
} 
```

我使用 sscanf 不是强制性的，我愿意接受其他建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T03:00:43.277

通常用于标记字符串的函数是`strtok`，但它不是线程安全的；[`strtok_r`](http://linux.die.net/man/3/strtok_r)应该改用它的现代版本。

在第一次调用中开始标记`buf`，检查第一个标记，然后进入依赖于第一个标记内容的几个循环之一：

```
while( fgets( buf, sizeof buf, course_file ) != NULL ) {
    char *saveptr;
    char *tok = strtok_r(buf, " ", &saveptr);
    if (!strcmp(tok, "delete")) {
        for (int i = 0 ; i != 3 ; i++) {
            tok = strtok_r(NULL, " ", &saveptr);
            // Do something with the token...
        }
    } else if (!strcmp(tok, "add")) {
        for (int i = 0 ; i != 4 ; i++) {
            tok = strtok_r(NULL, " ", &saveptr);
            // Do something else with the token...
        }
    } else {
        // Error
    }
} 
```

# c# - C# - 在指针下捕获窗口的屏幕截图

> ID：12658189
> 
> 赞同：1
> 
> 时间：2012-09-30T02:40:58.540
> 
> 标签：c#, screenshot

我正在制作一个屏幕捕获应用程序。

有关于如何捕获活动窗口的答案，但我希望能够在鼠标下捕获一个窗口，即使它不活动。

我是否正确理解我需要在鼠标下找到窗口句柄然后调用*Image.captureWindow(IntPtr handle)*？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T06:21:19.127

使用以下函数在屏幕上下文中获取光标位置

```
 POINT p;
if (GetCursorPos(&p))
{
    //cursor position now in p.x and p.y
} 
```

现在您将不得不使用 EnumWindow 函数来枚举所有顶级窗口，然后为每个尝试这个

```
 if (ScreenToClient(hwnd, &p))
{
    //p.x and p.y are now relative to hwnd's client area
} 
```

当您获得一个窗口的两个值时，这就是您的光标所在的窗口。这是一个如何从其句柄捕获窗口的示例

[http://www.codeproject.com/Articles/19192/How-to-capture-a-Window-as-an-Image-and-save-it](http://www.codeproject.com/Articles/19192/How-to-capture-a-Window-as-an-Image-and-save-it)

希望这可以帮助你

# c++ - 您如何在 C++ 中使用系统？

> ID：12658190
> 
> 赞同：0
> 
> 时间：2012-09-30T02:41:53.213
> 
> 标签：c++, c, system-calls

在我的计算机科学程序中，我们被教导在 C 中使用子进程、分叉、管道和文件描述符等，但我们从未在 C++ 中做过类似的事情。

你使用相同的库，还是 C++ 有一些（希望是简化的）自己的系统库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T02:43:53.977

您描述的事物类型实际上是系统特定的，而不是 C 特定的。如果您环顾四周，您可能会找到一些包装器，但它们不是 C++ 标准（也不是 C 标准）的一部分。

例如，没有理由在标准 C 中使用文件描述符。这就是文件结构、fopen、fclose、fread、fwrite 等的用途。如果你使用文件描述符，那是因为你被教导的是操作系统而不是 C。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T04:01:11.427

分叉、管道、执行；父进程，子进程：您在谈论 POSIX。POSIX 标准是用 C 而不是 C++ 编写的。除了少数例外，POSIX 库函数要么与 C 标准一致，要么对其进行扩充。您可以从 C++ 调用 C 函数，因此在符合 POSIX 的 C/C++ 系统上也可以使用相同的功能。但是，重点是 C 而不是 C++，因为它是库函数（例如函数族等）的本地`fork`语言`exec`。

C++11 采用了 POSIX 和 Windows 的线程概念，但重量级的多处理东西，如 fork 和 exec、管道等：这是基于 C 的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-30T03:55:48.150

没有什么特定于 C 或 C++ wrt 进程、子进程等。在 C 中编程时可用的内容应该可用于 C++。您始终可以使用可设计用于面向对象风格和 RAII 优势的包装类。

# android - SetOnPreferenceClickListener 问题

> ID：12658191
> 
> 赞同：0
> 
> 时间：2012-09-30T02:42:26.857
> 
> 标签：android, preference

[一只忙碌的猫 http://dl.dropbox.com/u/36109322/Custom.JPG](http://dl.dropbox.com/u/36109322/Custom.JPG)

大家好，有谁知道如何解决这个问题？这是一个正确的编码，但为什么会显示此错误？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T02:47:10.553

这是因为您没有`Preference.OnPreferenceClickListener`导入包。

更改`new onPreferenceClickListener()`为`new Preference.onPreferenceClickListener()`

由于您使用的是 Eclipse，因此您也可以将鼠标悬停在`onPreferenceClickListener()`上面并选择导入它。

# c# - 是否有一种更简单的方法可以从表单中获取 3 个深度面板控件，以便以编程方式向其中添加新控件？

> ID：12658192
> 
> 赞同：0
> 
> 时间：2012-09-30T02:42:26.040
> 
> 标签：c#, foreach, controls

我有一个由其他人创建的 VB Windows 程序，它被编程以便任何人都可以通过使用类库添加到程序的功能，程序调用它们（即......类库，DLL 文件）插件，我正在创建的插件是一个 C# 类库。即..dll

我正在开发的这个特定插件以标签的形式添加了一个简单的日期时间时钟功能，并将其插入到 3 深的面板中。我已经测试过的代码并且它有效。我的问题是：有更好的方法吗？例如，我使用 Controls.Find 3 个不同的时间，每次我知道我在寻找什么面板时，只会将一个面板添加到 Control[] 数组中。因此，我再次对仅包含单个元素 3 次不同时间的数组进行 foreach。

现在就像我说的那样，代码可以正常工作并按我的预期工作。它似乎过于冗长，我想知道是否可能存在性能问题。

这是代码：

```
 foreach (Control p0 in mDesigner.Controls)
        if (p0.Name == "Panel1")
        {
            Control panel1 = (Control)p0;
            Control[] controls = panel1.Controls.Find("Panel2", true);

            foreach (Control p1 in controls)
            if (p1.Name == "Panel2")
            {
                Control panel2 = (Control)p1;
                Control[] controls1 = panel2.Controls.Find("Panel3", true);
                foreach(Control p2 in controls1)
                    if (p2.Name == "Panel3")
                    {
                        Control panel3 = (Control)p2;
                        panel3.Controls.Add(clock);
                    }
             }
         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T02:57:29.627

使用以下功能

```
 public static Control FindControlRecursive(Control control, string id)
    {
        if (control == null) return null;
        Control ctrl = control.FindControl(id);
        if (ctrl == null)
        {
            foreach (Control child in control.Controls)
            {
                ctrl = FindControlRecursive(child, id);
                if (ctrl != null) break;
            }
        }
        return ctrl;
    }
} 
```

接着

```
Control panel3 = FindControlRecursive(mDesigner.Controls, "Panel3"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T06:34:10.913

使用 Andrei 共享的概念，我能够制定出一种方法，该方法不仅适用于我想添加到面板的标签，而且还允许我从另一个方法调用它，该方法只需修改两个的大小和位置其他控件，使此功能非常可重用。

```
private Control FindControlRecursive(Control ct, string id)
{
    Control[] c;
    Control ctr;

    if (ct == null)
        c = mDesigner.Controls.Find(id, true);
    else
        c = ct.Controls.Find(id, true);

    foreach (Control child in c)
    {
        if (child.Name == id)
        {
            ctr = child;
            return ctr;
        }
        else
        {
            ctr = FindControlRecursive(child, id);
            if (ctr != null)
                return ctr;
        }
    }
    return null;
} 
```

调用代码如下所示：

```
Control ct = null;
Control panel3 = FindControlRecursive(ct, "Panel3");

// and Here is where I can Add controls or even change control properties.
if (panel3 != null)
    panel3.Controls.Add(clock); 
```

谢谢您的帮助...

# c - 如何在大指针中打印字节子集？

> ID：12658193
> 
> 赞同：1
> 
> 时间：2012-09-30T02:42:37.940
> 
> 标签：c, pointers

所以我有一个非常大的指针 p，指向大约 40 个字节。

我还知道这 40 个字节包含整数、字符和其他指针。我也知道如何跳过这 40 个字节。

出于调试目的，我想打印出这些内容。我怎么做？

例如，假设我知道在 p+16 处有一个 int，我想打印这个 int。有没有办法在 C 中“从这个地址打印 4 个字节并将其格式化为 int”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T02:49:12.143

是的，只需强制转换和取消引用。假设您`p`已经设置：

```
int i = *(int *)(p + 16);
printf("%d\n", i); 
```

注意潜在的对齐问题 - 例如，此代码：

```
int i = *(int *)(p + 3); 
```

可能会在某些处理器上导致异常（假设`p`是安全对齐的`int`）。在这种情况下，您需要自己组装字节。这是一个假设 4 字节整数和 8 位字节的示例。请务必注意字节顺序：

```
unsigned char *p;
int bigEndian = p[3] << 24 + p[4] << 16 + p[5] << 8 + p[6];
int littleEndian = p[3] + p[4] << 8 + p[5] << 16 + p[6] << 24; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T02:50:24.673

你可以这样做：

```
printf ("%d", *(int*)(p+16)); 
```

更好的方法可能是制作您尝试打印的结构的结构，如果它可以这样表达的话。就像是：

```
typedef struct someStruct {
    int field1;
    float field2;
    char field3[8];
    int field4;
} someStruct; 
```

然后你可以做这样的事情：

```
struct someStruct *p = (struct someStruct*)ptr;
printf ("%d", p->field4); 
```

# python - 在 Python 中编写双重不等式时，运算符的优先级是什么（在代码中明确表示，如何为数组覆盖？）

> ID：12658197
> 
> 赞同：15
> 
> 时间：2012-09-30T02:43:42.170
> 
> 标签：python, operator-overloading, inequalities

当我要求类似的东西时，按顺序执行的具体代码是什么

```
>>> 1 <= 3 >= 2
True 
```

如果两者具有相同的优先级并且这只是它们的评估顺序，为什么第二个不等式起作用`(3 >= 2)`而不是`(True >= 2)`

例如考虑这些之间的区别

```
>>> (1 < 3) < 2
True

>>> 1 < 3 < 2
False 
```

`and`将第二个扩展为两个语句中的第二个，是否只是硬编码到 Python 中的纯语法快捷方式？

我可以改变一个类的这种行为，从而`a <= b <= c`扩展到不同的东西吗？它看起来像下面的情况

```
a (logical operator) b (logical operator) c 
    --> (a logical operator b) and (b logical operator c) 
```

但真正的问题是如何在代码中实现。

我很好奇，所以我可以在我自己的一些类中复制这种`__lt__`行为`__gt__`，但我对如何在保持中间参数不变的情况下实现这一点感到困惑。

这是一个具体的例子：

```
>>> import numpy as np

>>> tst = np.asarray([1,2,3,4,5,6])

>>> 3 <= tst
array([False, False,  True,  True,  True,  True], dtype=bool)

>>> 3 <= tst <= 5
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
/home/ely/<ipython-input-135-ac909818f2b1> in <module>()
----> 1 3 <= tst <= 5

ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all() 
```

覆盖它会很好，这样它也可以与数组“正常工作”，如下所示：

```
>>> np.logical_and(3 <= tst, tst <= 5)
array([False, False,  True,  True,  True,  False], dtype=bool) 
```

**为澄清而添加**

在评论中表明我在解释问题方面做得很差。这里有一些澄清说明：

1）我*不是*`and`在寻找解释器在两个链式不等式之间弹出一个事实的简单解释。我已经知道了，并在上面这么说。

2）为了类比我想要做的事情，请考虑`with`语句（[链接](http://www.python.org/dev/peps/pep-0343/)）。以下：

```
with MyClass(some_obj) as foo:
    do_stuff() 
```

解压成

```
foo = MyClass(some_obj)
foo.__enter__()
try:
    do_stuff()
finally:
    foo.__exit__() 
```

因此，通过适当地编写`MyClass`，我可以在`with`语句中做许多特殊的事情。

我在问是否有类似的链接不等式的代码解包，通过它我可以拦截它正在做的事情并将其重定向到使用数组样式的逻辑运算符，而不是*仅用于我关心的类*。

从我的问题，尤其是示例中，我觉得这很清楚，但希望这可以使其更加清楚。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-01T14:23:25.910

我不完全确定您在寻找什么，但快速反汇编显示`a < b < c`未编译为与相同的字节码`a < b and b < c`

```
>>> import dis
>>>
>>> def f(a, b, c):
...     return a < b < c
...
>>> dis.dis(f)
  2           0 LOAD_FAST                0 (a)
              3 LOAD_FAST                1 (b)
              6 DUP_TOP
              7 ROT_THREE
              8 COMPARE_OP               0 (<)
             11 JUMP_IF_FALSE_OR_POP    21
             14 LOAD_FAST                2 (c)
             17 COMPARE_OP               0 (<)
             20 RETURN_VALUE
        >>   21 ROT_TWO
             22 POP_TOP
             23 RETURN_VALUE
>>>
>>> def f(a, b, c):
...     return a < b and b < c
...
>>> dis.dis(f)
  2           0 LOAD_FAST                0 (a)
              3 LOAD_FAST                1 (b)
              6 COMPARE_OP               0 (<)
              9 JUMP_IF_FALSE_OR_POP    21
             12 LOAD_FAST                1 (b)
             15 LOAD_FAST                2 (c)
             18 COMPARE_OP               0 (<)
        >>   21 RETURN_VALUE 
```

**编辑1：**进一步挖掘，我认为这对numpy来说很奇怪或有问题。考虑一下这个示例代码，我认为它可以按您的预期工作。

```
class Object(object):
    def __init__(self, values):
        self.values = values
    def __lt__(self, other):
        return [x < other for x in self.values]
    def __gt__(self, other):
        return [x > other for x in self.values]

x = Object([1, 2, 3])
print x < 5 # [True, True, True]
print x > 5 # [False, False, False]
print 0 < x < 5 # [True, True, True] 
```

**编辑2：**实际上这不能“正常”工作......

```
print 1 < x # [False, True, True]
print x < 3 # [True, True, False]
print 1 < x < 3 # [True, True, False] 
```

我认为它是在第二次比较中将布尔值与数字进行比较`1 < x < 3`。

**编辑 3：**我不喜欢从 gt、lt、gte、lte 特殊方法返回非布尔值的想法，但根据 Python 文档，它实际上不受限制。

[http://docs.python.org/reference/datamodel.html#object。**lt**](http://docs.python.org/reference/datamodel.html#object.__lt__)

> 按照惯例，成功比较返回 False 和 True。但是，这些方法可以返回任何值...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-30T02:45:42.183

[两者具有相同的优先级，但根据文档](https://docs.python.org/3/reference/expressions.html#comparisons)从左到右进行评估。表单的表达式`a <= b <= c`扩展为`a <= b and b <= c`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T12:08:05.550

> 但真正的问题是如何在代码中实现。

你的意思*是解释器如何转换它*，还是什么？你已经说过

```
a (logical operator) b (logical operator) c 
    --> (a logical operator b) and (b logical operator c) 
```

~~所以我不确定你在这里问什么~~ 好的，我想通了：不，你不能覆盖从 IIUC 的`a < b < c`扩展`(a < b) and (b < c)`。

* * *

> 我很好奇，所以我可以在我自己的一些类中复制这种`__lt__`行为`__gt__`，但我对如何在保持中间参数不变的情况下实现这一点感到困惑。

这取决于表达式中的`a`,`b`和是您自己的类的实例。实现你的and和方法有一些方法，但[文档](http://docs.python.org/reference/datamodel.html#object.__lt__)指出：`c``a < b < c``__lt__``__gt__`

> 这些方法没有交换参数版本（当左参数不支持操作但右参数支持时使用）

所以，如果你愿意`Int < MyClass < Int`，你就不走运了。您至少需要`MyClass < MyClass < Something`（因此您的类的一个实例位于扩展表达式中每个比较的 LHS 上）。

# algorithm - Aggregate analysis for a sequence of n operations

> ID：12658200
> 
> 赞同：4
> 
> 时间：2012-09-30T02:45:08.377
> 
> 标签：algorithm, aggregate, amortized-analysis

I'm trying to find the amortized cost per operation in a sequence of `n` operations on a data structure in which the `ith` operation costs `i` if `i` is an exact power of 2, and 1 otherwise.

I think I need to find a way to express the sum of the costs up to a number `n`, but I'm stuck. I can see that the special, more expensive `i` values are occurring father and farther apart:

> i = **1 2** 3 **4** 5 6 7 **8** 9 10 11 12 13 14 15 **16** 17 18 19 20...

So, it looks like I have no numbers between the first and second powers of 2, then one number, then 3, then 7\. When I looked at this a while, I (correct me if this is off) found that the number of non-powers of 2 between the `jth` and `kth` powers of 2 is `2^(j-1) - 1`.

But how can I tie this all together into a summation? I can kind of see something over the `js` combined with the number of actual powers of 2 themselves, but I'm having trouble uniting it all into a single concept.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T04:13:40.977

I can't offer a closed form for the sum, but it's clear that the average cost peaks at powers of two with successive such peak values asymptotic to 3.0, decaying before the next power of two to a lower limit that rises asymptotically toward 2.0.

Each of the (2^n) - 1 values strictly between 2^n and 2^(n+1) contributes 1 to the total cost (causing the average to decay downward) until the value at 2^(n+1) adds 2^(n+1). Therefore the average contribution of the segment beginning after 2^n and ending with 2^(n+1) is ((2^n)-1 + 2^(n+1)) / 2^n or (3 * 2^n - 1) / 2^n, which approaches 3 as n increases.

You can see both effects in the excerpted table below. Hope this helps.

```
 i       sum  average
-------   -------  -------
      1:        1  1.00000
      2:        3  1.50000
      3:        4  1.33333
      4:        8  2.00000
    ...
      7:       11  1.57143
      8:       19  2.37500
    ...
     15:       26  1.73333
     16:       42  2.62500
    ...
     31:       57  1.83871
     32:       89  2.78125
    ...
     63:      120  1.90476
     64:      184  2.87500
    ...
    127:      247  1.94488
    128:      375  2.92969
    ...
    255:      502  1.96863
    256:      758  2.96094
    ...
    511:     1013  1.98239
    512:     1525  2.97852
    ...
   1023:     2036  1.99022
   1024:     3060  2.98828
    ...
   2047:     4083  1.99463
   2048:     6131  2.99365
    ...
   4095:     8178  1.99707
   4096:    12274  2.99658
    ...
   8191:    16369  1.99841
   8192:    24561  2.99817
    ...
  16383:    32752  1.99915
  16384:    49136  2.99902
    ...
  32767:    65519  1.99954
  32768:    98287  2.99948
    ...
  65535:   131054  1.99976
  65536:   196590  2.99973
    ...
 131071:   262125  1.99987
 131072:   393197  2.99986
    ...
 262143:   524268  1.99993
 262144:   786412  2.99992
    ...
 524287:  1048555  1.99996
 524288:  1572843  2.99996
    ...
1048575:  2097130  1.99998
1048576:  3145706  2.99998
    ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T04:21:23.757

The amortized cost per step ranges from slightly below 3 (when n is a power of 2) down to slightly less than 2 (when n is 1 less than a power of 2), as follows.

Let K(n) denote the total cost of n steps, and let T(n) denote the cost of powers of 2 that do not exceed n. Suppose n = 2^j. Then
`K(n) = n + T(n) - j`
as seen by attributing a cost of one to every step, then adding the total cost of power-of-2 steps, and subtracting j for double-counts on those steps. Because
`T(2^j) = 1 + 2 + 4 +...+ 2^j = 2^(j+1)-1 = 2*n-1,`
we have
`K(n) = 3*n - j - 1`,
for an amortized cost of slightly less than 3 when n is a power of 2.

Now suppose n = 2^(j+1)-1\. We have
`K(n) = K(2^j) + n - 2^j`
(because of n - 2^j unit-cost steps after step 2^j ), ie
`K(n) = (3*2^j - j - 1) + (2^(j+1) - 1) - 2^j`,
or
`K(n) = 2*(2^(j+1)-1) - j = 2*n - j`,
for an amortized cost of slightly less than 2 when n is one less than a power of 2.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T03:21:54.557

The amortized cost per operation would be at most 3\. You can obtain this either by computing the total cost of the n operations and dividing it by n, or by a charging argument. The charging argument can be constructed as follows.

When i is not a power of 2, charge cost 1 to i. Otherwise when i is of the form 2^k, the operation cost would be 2^k, which wan be redistributed between the operations in the positions: [2^{k-1}+1, 2^k]. This can be done by increasing the charge of each operations in [2^{k-1}+1, 2^k-1] positions by 2 and assigning the remaining charge 2 to the operation at 2^k position. After the redistribution, the maximum charge at any position is 3\.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-16T10:11:10.327

The total cost of n operations -

![enter image description here](../Images/651e649184d02f13c8a0bb7068dd60dc.png)

How I arrived at this -

**The cost of the powers of 2 -** The sum of the first n powers of 2 is ![enter image description here](../Images/db1b721259e19193a8f16784f0105e2e.png) . Since I needed the powers of the numbers up to n, I replaced n with the floor of log n.

**Cost of the other numbers -** There will be ![enter image description here](../Images/20bc9f8757546b9e50dd2e4ab1181862.png) numbers remaining having unit cost.

Add both of them up and you will arrive at the equation.

# php - 要求下载文件的 JSON 响应

> ID：12658202
> 
> 赞同：0
> 
> 时间：2012-09-30T02:45:46.910
> 
> 标签：php, json, internet-explorer-8

我正在向服务器发送一些数据并以 JSON 格式接收响应。它按预期在 Mozilla 和 chrome 中工作。但在 IE 中，它要求下载文件，而不是正确解析 JSON。有没有什么办法解决这一问题？

![在此处输入图像描述](../Images/034aed46f82bf9f4440c77ea76fbf58c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T03:04:54.973

尝试在响应中指定`text/plain`或的 MIME 类型。或者只是从 url 中`application/json`删除扩展名（例如尝试，或）。`.json``.txt``.js`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T10:20:11.590

我总是把这段代码输出 JSON 并且缓存没有问题，特别是在 IE 中

```
// Expire immediately
header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");    // Date in the past
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");

// always modified
header("Cache-Control: no-store, no-cache, must-revalidate");  // HTTP/1.1
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");                          // HTTP/1.0

//Content type
header("Content-type: application/json");

print json_encode($output); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-30T03:05:21.230

服务器可能会使用“application/json”mime 类型来回答。尝试将其更改为“文本/纯文本”。

另外：[如何说服 IE 简单地显示 application/json 而不是提供下载它？](https://stackoverflow.com/questions/2483771/how-can-i-convince-ie-to-simply-display-application-json-rather-than-offer-to-do)

# python - 创建一个输入为随机数的python循环

> ID：12658203
> 
> 赞同：1
> 
> 时间：2012-09-30T02:46:16.847
> 
> 标签：python, loops, hash, bcrypt

到目前为止，这是我的代码：

```
 import bcrypt
    import random

    def PRG():
        print(random.randint(1,100000))

    For i in range(1,3):
        print(bcrypt.gensalt(PRG())) 
```

这给出了输出：

```
 77494
    $2a$04$2tpKWJxtsBAK1FYdM.6MSe
    87956
    $2a$04$4ag2YmOBFSFRR3Lu0RgQ8. 
```

我只是想创建一个循环，根据 PRG() 输出的随机数给出一堆盐。我不确定哈希是否是 PRG() 输出的数字的哈希，因为 bcrypt 输出不是固定的，如果有人能告诉我如何删除数字输出，我会非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T02:49:37.037

替换`print(random.randint(1,100000))`为`return random.randint(1,100000)`

# java - Java程序的内存使用不准确

> ID：12658207
> 
> 赞同：1
> 
> 时间：2012-09-30T02:46:59.390
> 
> 标签：java, memory, jvm, runtime

在我的 java 应用程序中，我显示了程序的内存使用情况。不幸的是，它是零星的，而且经常是错误的。我目前的代码是

```
component.setText("Memory usage : "+((Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory()) / 1024 / 1024) + "mb"); 
```

有时，它会返回正确的值（应该是 10-20mb 左右），有时它会返回非常奇怪的值。这与正在运行的其他 java 程序（尤其是 Netbeans）相关，但在没有其他程序运行时仍然会表现出来。那句话有什么问题？有没有更好的方法来更准确地表示内存使用情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T07:16:39.537

解决了问题。与堆栈溢出有关，该堆栈溢出不足以被捕获为异常，但足以使内存使用量激增。

# java - 带有两个变量的 For 循环

> ID：12658208
> 
> 赞同：0
> 
> 时间：2012-09-30T02:47:00.027
> 
> 标签：java

在第二个 for 循环中设置 j = i 是否非法？它似乎适用于第一次迭代，但是，在那之后它不打印任何东西，有没有更合适的方法来做到这一点？我重写了它以使用一个while循环，它工作得很好，那么for循环有什么问题呢？

```
public class DaysOfChristmas {
public static void main ( String[] args )
{
    int i,j;
    String day = "";
    String verse = "";

    for ( i = 1; i <= 12; i++)
    {
        switch (i)
        {
            case 1: day = "first";
            break;

            case 2: day = "second";
            break;

            case 3: day = "third";
            break;

            case 4: day = "fourth";
            break;

            case 5: day = "fith";
            break;

            case 6: day = "sixth";
            break;

            case 7: day = "seventh";
            break;

            case 8: day = "eight";
            break;

            case 9: day = "ninth";
            break;

            case 10: day = "tenth";
            break;

            case 11: day = "eleventh";
            break;

            case 12: day = "twelfth";
            break;
        }

        System.out.printf("On the %s day of Christmas my true love gave to me\n", day);

        for ( j = i; j == 1; j--)
        {
            switch (j)
            {
                case 1: verse = "A Partridge in a Pair Tree";
                break;

                case 2: verse = "Two Turtle Doves";
                break;

                case 3: verse = "Three French Hens";
                break;

                case 4: verse = "Four Colly Birds";
                break;

                case 5: verse = "Five Golden Rings";
                break;

                case 6: verse = "Six Geese-a-Laying";
                break;

                case 7: verse = "Seven Swans-a-Swimming";
                break;

                case 8: verse = "Eight Maids-a-Milking";
                break;

                case 9: verse = "Nine Ladies Dancing";
                break;

                case 10: verse = "Ten Lords-a-Leaping";
                break;

                case 11: verse = "Eleven Pipers Piping";
                break;

                case 12: verse = "Twelve Drummers Drumming";
                break;
            }
            System.out.printf("%s ", verse);
        }
        System.out.println();

    }
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T02:49:11.820

```
for ( j = i; j >= 1; j--) 
```

应该管用。问题是第二个循环仅在 j 为 1 时执行。否则它根本不执行。而 j 只有在 i 为 1 时才第一次为 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T02:52:00.050

这样做并不违法。但是，请考虑您在循环中的条件：

```
 for ( j = i; j == 1; j--) 
```

该循环只会在*恰好为 1**时`j`*执行。您绝对应该在这里重新考虑您的逻辑。

# xml - XML Schema: xs:any processcontent="skip" 但仍返回错误

> ID：12658210
> 
> 赞同：0
> 
> 时间：2012-09-30T02:47:11.540
> 
> 标签：xml, xsd, any

我想嵌入 HTML 格式，所以我做到了

```
 <xs:element name="boobie">
            <xs:complexType mixed="true">
                <xs:sequence>
                    <xs:any namespace="http://www.w3.org/1999/xhtml"
                            minOccurs="0"
                            maxOccurs="unbounded" 
                            processContent="skip"/>
                </xs:sequence>          
            </xs:complexType>
        </xs:element> 
```

但是，当我将 li 标记（HTML 的点元素）放入 XML 文件（在 boobie 标记内）时，它会生成出乎意料的错误。

这有什么问题？将 html 标记放入 XMl 文件的唯一方法是使用 CDATA 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T03:35:46.690

如果您的 HTML 不完全兼容 XML（即 XHTML），那么您不能将它包含在 XML 文档中，除非作为 CDATA。

# java - 字符串HashMap中的字节数组

> ID：12658215
> 
> 赞同：0
> 
> 时间：2012-09-30T02:48:31.093
> 
> 标签：java, hashmap

我正在检索用户日期的映射，它的 dataMap 类型为`HashMap<String, String>`，它有这个键值对，字符串，`byte[]`大小为 6。

有没有人见过这个或知道该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T04:09:12.840

您的代码有一些非常可疑的地方。

这些陈述暗示`MappedRecord`必须执行`Map<String, String>`。

```
record = (MappedRecord) obj;
item = new HashMap<String, String>();
item.putAll(record); 
```

但是你说这是插入一个值类型为的条目`byte[]`。这是可能的，但它必须意味着某处/以某种方式您*之前*已将该条目添加到您的`MappedRecord`对象中。为了实现这一点，您必须抑制或忽略“未经检查的转换”警告。

（请注意，`putAll`代码不会检查它添加的条目是否`item`具有正确的键和值类型。它不能！代码`HashMap.putAll`不知道参数类型应该是什么......由于类型擦除。相反，`putAll`代码假定实际键和值的类型是正确的。它们应该是......除非你忽略/抑制了警告。）

`MappedRecord`无论哪种方式，如果不查看类的代码以及创建其中`MappedRecord`包含虚假条目的实例的代码，我们将无法正确诊断此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T03:09:36.177

大概这是Java。

虽然声明声明`HashMap<String, String>`HashMap 应该是 String->String，但编译器中的静态类型检查并不是无懈可击的（因为它是一种附加到先前存在的语言上的 kluge）。

并且没有动态类型检查来确保 (A) 你真正拥有的 HashMap 是 a `HashMap<String, String>`，并且 (B) 有人没有将数组插入到 a`HashMap<String, String>`中。这是因为实际上您拥有的是 a `HashMap<Object, Object>`，因此无法实现任一动态检查。

# mysql - sql钱列

> ID：12658219
> 
> 赞同：0
> 
> 时间：2012-09-30T02:49:17.507
> 
> 标签：mysql, sql

> **可能重复：**
> [在 mysql 中存储金额](https://stackoverflow.com/questions/2251290/storing-money-amounts-in-mysql)

我正在尝试在我的 sql db 中创建一个表，该表有几个不同的 int 列、名称和其他一些东西.. 但是有两个表我想在其中添加货币值。不超过 3 位，小数点后两位显示它。

这是我写的sql

```
CREATE TABLE `5050goose` (
    `goose_id` int(11) unsigned NOT NULL auto_increment,
    `name` varchar(100) NOT NULL default '',  
    `width` int(8),
    `height` int(8),
    `normal_fill` int(8),
    `our_fill` int(8),
    `old_price` smallmoney(8),
    `price` smallmoney(8),
    PRIMARY KEY  (`goose_id`)
    ) TYPE=MyISAM; 
```

但是，当我执行此操作时，出现此错误

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'smallmoney(8),
    `price` smallmoney(8),
    PRIMARY KEY  (`goosedown_id`)
    ) TYPE' at line 8 
```

这清楚地表明 smallmoney 对我不起作用。所以我想知道如何在我的 sql 数据库中存储货币价值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T02:52:13.403

确实你是对的，smallmoney 不是 mysql 中的数据类型。看一下`DECIMAL`

[http://dev.mysql.com/doc/refman/5.6/en/fixed-point-types.html](http://dev.mysql.com/doc/refman/5.6/en/fixed-point-types.html)

# c# - 未捕获属性中的 Set 操作期间引发的异常

> ID：12658220
> 
> 赞同：4
> 
> 时间：2012-09-30T02:49:18.337
> 
> 标签：c#, wpf, exception

当我尝试在属性的 Set 子句中运行函数时，我的全局异常处理程序永远不会捕获任何可能出现的异常。我不明白为什么会这样。这是我的代码（3部分）

主窗口.xaml.cs

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = new ViewModel_();
    }
}

public class ViewModel_ : INotifyPropertyChanged
{
    public ViewModel_()
    {
    }

    public string Texting
    {
        get { return _Texting; }
        set
        {
            _Texting = value;
            OnPropertyChanged("Texting");
            throw new Exception("BAM!");
        }
    }
    private string _Texting;

    public event PropertyChangedEventHandler PropertyChanged;
    protected void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
            handler(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

主窗口.xaml

```
<Window x:Class="TestExceptionHandling.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <TextBox Text="{Binding Path=Texting,
        UpdateSourceTrigger=PropertyChanged}" />
</Grid> 
```

App.xaml.cs（全局异常处理程序所在的位置）

```
public partial class App : Application
{
    public App()
    {
        AppDomain.CurrentDomain.UnhandledException += CurrentDomain_UnhandledException;
    }

    void CurrentDomain_UnhandledException(object sender, UnhandledExceptionEventArgs e)
    {
        MessageBox.Show("SOMETHING IS WRONG!");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T08:14:35.563

如前所述`Bob Horn`，绑定属性不会爆炸，如果它们来自目标元素（文本框），即来自您的视图。查看您的输出窗口，您将看到类似这样的消息 -

```
A first chance exception of type 'System.Exception' occurred in WpfApplication4.exe
An exception of type 'System.Exception' occurred in WpfApplication4.exe but was not handled in user code
System.Windows.Data Error: 8 : Cannot save value from target back to source. BindingExpression:Path=Name; DataItem='VM' (HashCode=28331431); target element is 'TextBox' (Name=''); target property is 'Text' (type 'String') Exception:'System.Exception: BAM! 
```

但是，`try setting the same property from your ViewModel's constructor`应用程序肯定会爆炸。

作为旁注，这不适用于所有异常，请尝试这样做 -

```
public string Texting
{
    get { return _Texting; }
    set
    {
        _Texting = value;
        OnPropertyChanged("Texting");
        throw new StackOverflowException("BAM!");
    }
} 
```

这肯定会被您的全局异常处理程序赶上，因为应用程序无法在`StackOverflow`模式下运行。

# python - 输入项列表，输出项 ID 列表

> ID：12658221
> 
> 赞同：1
> 
> 时间：2012-09-30T02:49:28.450
> 
> 标签：python, list

我目前有一个 Excel 文件，其中一列 ItemID 和一列 ItemName 采用这种样式：

```
ItemID, ItemName
2, Apple
4, Orange
5, Pear
6, Banana
15, Kiwi 
```

我愿意将此数据转换为最简单的任何格式，但我需要解释如何进行该转换。

我想传递这样的列表： ['Apple', 'Pear', 'Banana']

并让它输出这样的列表：[2,5,6]

我已经研究过使用 sqlite3 执行此操作，但我找不到如何将整个列表作为输入传递，也找不到一种简单的方法将我的 Excel 文件转换为 sqlite3 可以挖掘的某种 .sql 或 .db 文件通过。我真的不在乎我最终不得不将我的 Excel 文件转换成什么样的文件（甚至是文件类型项），我只是希望查找过程高效。

编辑：在我使用的实际情况下，大约有 8800 个项目。此外，每个都是唯一的，因此 ItemID 是唯一的，而 ItemName 是唯一的。也就是说，一些项目名称相似，只是在末尾添加了一个额外的单词，例如“Orange Small”和“Orange Large”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T02:59:23.093

假设你有一个文本文件，它看起来像这样：

```
2, Apple
4, Orange
5, Pear
6, Banana
15, Kiwi 
```

然后你可以这样做：

```
def readFile(fpath):
    answer = {}
    with f as open(fpath):
        for line in f:
            id, name = line.split(', ')
            id = int(id)
            name = name.strip()
            answer[name] = id
    return answer

def getIDs(names, nameIDs):
    return [nameIDs[name] for name in names]

def main():
    nameIDs = readfile('path/to/file')
    names = ['Apple', 'Pear', 'Banana']
    ids = getIDs(names, nameIDs) 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T03:06:15.597

这基本上`csv`是@inspectorG4dget 答案的模块版本。首先，以`csv`Excel 格式保存文件，生成如下内容：

```
ItemID, ItemName
2, Apple
4, Orange
5, Pear
6, Banana
15, Kiwi 
```

既然你说每个 ItemName 都是唯一的，我们可以使用字典来存储数据。在 python 2.7 中，使用像 inspectorG4dget 的 getIDs 这样的辅助函数：

```
import csv

with open("itemids.csv","rb") as fp:
    reader = csv.reader(fp, skipinitialspace=True)
    fp.readline() # skip header
    name_to_id = {name: int(id) for id, name in reader}

def getIDs(name_to_id, names):
    return [name_to_id[name] for name in names] 
```

我们可以构建一个字典并访问它：

```
>>> name_to_id
{'Orange': 4, 'Kiwi': 15, 'Pear': 5, 'Apple': 2, 'Banana': 6}
>>> getIDs(name_to_id, ["Apple", "Pear", "Banana"])
[2, 5, 6] 
```

# jquery - 从 jquery 调用 python，无法获取 POST 参数

> ID：12658224
> 
> 赞同：0
> 
> 时间：2012-09-30T02:49:49.557
> 
> 标签：jquery, python, post

下面是javascript代码：

```
$.ajax({
  type: 'POST',
  url: '/vote_selection/vote/',
  dataType:'json',
  data: {'message':'123'},
  success:function(data){
    alert(data);
  }
}); 
```

下面是python代码：

```
def vote_select(request):
    print "1"
    print request
    print request.method
    print request.POST
    return HttpResponse("1",mimetype='text/plain') 
```

输出是

1

, POST:, ... 'REQUEST_METHOD': 'GET', ..

得到

[29/Sep/2012 22:38:49]“GET /vote_selection/vote/HTTP/1.0”200 1

为什么方法会变成 GET，为什么 GET 或 POST 中都没有参数？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T06:45:38.880

尝试这个 ：

```
import json    
def vote_select(request):
        print "1"
        print request
        print request.method
        print request.POST
        return HttpResponse(json.dumps({ 'somevalue': 1 }),mimetype='application/json') 
```

# java - 将对象添加到列表视图 - ANDROID

> ID：12658225
> 
> 赞同：0
> 
> 时间：2012-09-30T02:50:23.420
> 
> 标签：java, android, arrays, arraylist

我有一个对象数组：

Tratam --> 有 String、int ect.. 和一个 Date 对象。

我想将每个具有不同日期值的 3 个相同对象添加到 ArrayList 中。

我已经安排了以下代码，但由于数组列表总是添加具有最后日期的对象。例如：如果日期必须是 3:05、3:15 和 3:25，则添加具有第三个值的对象.

有谁知道我做错了什么？

提前致谢！！！

```
for(n=0;n<tam;n++){
    addObj(arrayObj[n]);
}

public void addObj(Tratam trat){
    Tratam [] arrayObj2 = new Tratam[3];
    Date date=trat.getNextTime();
    for(int n=0;n<3;n++){
        arrayObj2[n]=trat;
        Calendar cal = Calendar.getInstance();
        cal.setTime(date);
        cal.add(Calendar.SECOND, interval);
        date=cal.getTime();
        arrayObj2[n].setNextTime(date);

        arrayListTrat.add(arrayObj2[n]);
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T05:23:00.770

对代码的简单检查告诉我，您正在列表中再次添加相同的对象。这就是为什么你得到相同的时间。

这就是我所做的检查。

```
public void addObj(Tratum trat) {
        Tratum[] arrayObj2 = new Tratum[3];
        Date date = trat.getNextTime();
        for (int n = 0; n < 3; n++) {
            arrayObj2[n] = trat; // I think this line is the culprit
            Calendar cal = Calendar.getInstance();
            cal.setTime(date);
            cal.add(Calendar.SECOND, n + 1000 * n);
            date = cal.getTime();
            Log.d("inTemp","" + date.toString());

            arrayObj2[n].setNextTime(date);
            if(n ==1){
                if(arrayObj2[n].equals(arrayObj2[n-1])){
                    Log.d("TEMP","$$Equal");
                }
            }
            arrayListTrat.add(arrayObj2[n]);
        } 
```

试试这个：

而不是这样做。

```
arrayObj2[n] = trat; 
```

尝试这样做，

```
arrayObj2[n] = new Tratum();
   arrayObj2[n].setNextDate(trat.getNextDate()); // In short rather than assigning object trat to your array object. Simply assign values. 
```

这应该可以解决您的问题。

# mpi - 错误的 MPI_Scatter

> ID：12658230
> 
> 赞同：1
> 
> 时间：2012-09-30T02:50:56.327
> 
> 标签：mpi

下面的程序本身只包含一个重要的 MPI 函数 (MPI_Scatter)。而且它工作错误：该函数返回 MPI_SUCCESS，但客户端接收的数据（非零等级）与服务器发送的数据（零等级）不同。

```
#include <stdio.h>
#include <mpi.h>

int main(int argc, char* argv[])
{
    int rank;
    int data;
    int temp;

    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);

    if (rank == 0)
    {
        data = 123; // data to send
        MPI_Scatter(&data, 1, MPI_INT, &temp, 1, MPI_INT, 0, MPI_COMM_WORLD); // MPI_SUCCESS
    }   
    else
    {
        MPI_Scatter(NULL, 0, MPI_INT, &data, 1, MPI_INT, 0, MPI_COMM_WORLD); // MPI_SUCCESS     
        printf("\nClient[%i] data = %i", rank, data);   // Incorrect data received
    }

    MPI_Finalize();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T02:55:51.440

来个小图帮助大家理解

![在此处输入图像描述](../Images/ec1f41bb60b6c44522edbff02777a164.png)

参考：[http ://www.mpitutorial.com/mpi-scatter-gather-and-allgather/](http://www.mpitutorial.com/mpi-scatter-gather-and-allgather/)

# php - mysql查询：按列计数其中列>数字

> ID：12658231
> 
> 赞同：0
> 
> 时间：2012-09-30T02:51:02.823
> 
> 标签：php, mysql, sql

> **可能重复：**
> [在数据库中查找重复的字符串](https://stackoverflow.com/questions/4407161/find-duplicate-strings-in-database)

我用 php 查询一个 mysql 数据库。

我需要知道表中重复超过 375 个的名称（它有 375 行）。该表包含 3 列：id、name、category。

这是我的 php 代码，但是它用 php 计算，我希望它是用 mysql 制作的

```
$query = "SELECT * FROM user_likes"; 
//echo $query;
$result = mysql_query($query) or die(mysql_error());

// craete arrays
while($row = mysql_fetch_array($result)){
    set_time_limit(0);
    $like[$row['name']]=$like[$row['name']]+1;
    if($like[$row['name']]==375) $likes375 ++; 

} 
```

如果有人可以帮助我，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T03:12:57.387

尝试这个：

```
SELECT name, count(*) likes 
FROM user_likes 
GROUP BY name
HAVING COUNT(*) > 375 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T03:08:30.090

这里有一些 SQL 来计算每个名字的点赞数。

```
SELECT name, count(*) likes FROM user_likes GROUP BY name; 
```

这是一些用于过滤超过 375 个喜欢的名称的 SQL

```
SELECT i.name, i.likes
FROM ( SELECT name, count(*) likes FROM user_likes GROUP BY name) i
WHERE i.likes > 375 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T03:15:56.120

如果您要查找重复的名称：

```
$query = "SELECT name FROM user_likes GROUP BY name HAVING COUNT(*) = 375"; 

$result = mysql_query($query) or die(mysql_error());

$names = array();    
while($row = mysql_fetch_array($result)){
  $names[] = $row['name'];
}

print_r($names); 
```

# forms - Business Catalyst - 表格发送给错误的人

> ID：12658232
> 
> 赞同：1
> 
> 时间：2012-09-30T02:51:44.177
> 
> 标签：forms, web-applications, adobe, business-catalyst

我希望这是有道理的。我建立了一个分类网站。客户可以发布要出售的物品。项目详细信息页面的底部是一个表单。其他想要获取所有者的用户使用此表单。

我犯了将实时源代码复制到我的网络应用程序中的错误。因此，电子邮件都发给我，而不是物品的所有者。

任何人都可以破译需要放置的标签，以便将电子邮件发送给产品的所有者吗？

示例 URL [http://www.wrenchbox.com/cars-for-sale/1970-chevrolet-chevelle](http://www.wrenchbox.com/cars-for-sale/1970-chevrolet-chevelle)

```
<form action="/Default.aspx?A=Form&amp;Email=**TAGGOESHERE**&amp;Subject=Sell+Your+Car+Enquiry&amp;EmailFrom=&amp;PageID=/contact-thank-you.html" enctype="multipart/form-data" onsubmit="return checkWholeForm4616(this)" method="post" name="catwebformform4616"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-12T01:01:55.697

在 Business Catalyst 中，表单提交默认会发送给所有管理员，因此您可以做两件事：

1.  为表单分配一个工作流，然后向工作流添加一个步骤以向该人发送电子邮件。
2.  将此人设为管理员，他们将收到表单提交。您还可以告诉他们所有的表单提交都作为案例存储在 CRM 中。

# linux - “在路径中查找命令”是什么意思？

> ID：12658237
> 
> 赞同：0
> 
> 时间：2012-09-30T02:53:08.677
> 
> 标签：linux, shell, path, environment-variables

这是我的操作系统课作业说明的摘录。粗体部分是我无法理解的部分，我现在也无法联系到教授，我真的很想今晚开始。我知道环境变量是什么，我想......只是在 shell 中声明的一个变量，对吧？但是，粗体线的具体含义是什么？

> 编写一个 C 程序来实现一个交互式 shell，用户可以在其中执行命令。
> 
> 调用这个程序 myshell （所以使用 gcc -o myshell -Wall 等来编译）。
> 
> 创建一个重复提示用户输入命令的无限循环（参见下面的示例输出和输入）。
> 
> **在执行用户输入的命令之前，必须使用环境变量 THEPATH 指定的路径找到该命令（不要使用 PATH！）。**默认情况下，未设置 THEPATH 变量，因此为了进行测试，您需要手动设置（和取消设置）此变量（请参阅下面的详细信息）。如果找到 THEPATH，您的程序必须通过 fork() 和其中一个 exec() 系统调用在子进程中执行该命令。
> 
> 要获取和解析 THEPATH，请考虑使用 getenv() 函数和 strtok() 或 strsep() 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T03:04:35.160

对于运行程序的 shell，它必须知道该程序在哪里。例如，您希望能够`ls`在提示符处键入，但实际的二进制文件`ls`可能位于`/bin/ls`. 这就是`PATH`（或您的情况`THEPATH`）出现的地方。当您键入`ls`时，shell 会关闭并在每个`PATH`目录中查找具有匹配名称的程序。当它找到一个时，它会运行它。让我们`ls`用作示例，并`PATH`设置为：

```
/usr/local/bin:/usr/bin:/bin 
```

假设`ls`是`/bin/ls`，那么shell首先查找`ls`in `/usr/local/bin`，没有找到，然后查找 in `/usr/bin`，最后找到`/bin`并执行。

实际上*，执行*此操作是您的作业中关于`getenv`、`strtok`和的提示的`strsep`来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T03:04:01.410

您的变量`THEPATH`应该包含一个目录列表，用冒号分隔，如

```
THEPATH=/usr/bin:/bin:some-other-dirs 
```

您必须将其解析为目录列表。当用户输入命令时，您必须扫描所有目录才能找到名称与用户输入的命令匹配的可执行文件。

以这种复杂程度编写 shell 不是初学者的任务，如果您不了解系统的 PATH 处理是如何工作的（您只是在模拟 shell 的作用），您可能会不知所措。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-04T06:45:26.837

我知道我迟到了，但是您可以本着 Foo 大师的“不编码获得优势”的精神在这里玩一个肮脏的把戏。和C 库函数实际上为您搜索 PATH`execlp()`变量`execvp()`。`execvpe()`您所要做的就是在环境中将 PATH 替换为您的 THEPATH。它也使你的 shell 更安全，因为你所有的子进程都将使用你原来的 THEPATH 作为 PATH。

```
int i_path = -1;
int i_thepath = -1;
int i = 0;
while (envp[i] != NULL) {
    if (strstr(envp[i], "PATH=") == envp[i])
        i_path = i;
    if (strstr(envp[i], "THEPATH=") == envp[i])
        i_thepath = i;
    i++;
}
if (i_path >= 0 && i_thepath >= 0)
    envp[i_path] = envp[i_thepath] + 3; /* discard 'THE' */
else if (i_thepath >= 0)
    envp[i_thepath] = envp[i_thepath] + 3; /* discard 'THE' */
execvpe(command, argv, envp); 
```

如果您手动解析 THEPATH，请不要创建目录列表。在像 Perl 这样的高级语言中这很容易，但在 C 中涉及手动动态内存分配，因为您事先不知道 THEPATH 中有多少 dir 元素。要进行内存分配，您需要先遍历字符串。但是你可以在第一次迭代中完成真正的工作，使用`strtok()`with`":"`作为分隔符。

```
char *thepath = envp[i_thepath];
char *dir;
strtok(thepath, "="); /* first discard 'THEPATH=' */
while (dir = strtok(NULL, ":") {
    /* now check if dir+command exists and is execuatble, exec */
} 
```

# ruby - 什么时候没有标准化的数据库是正确的？

> ID：12658238
> 
> 赞同：0
> 
> 时间：2012-09-30T02:53:11.270
> 
> 标签：ruby, ruby-on-rails-3, activerecord, normalization

情况如下：

假设我有一个 Dog 模型和一个 Vaccination 模型（因此，一个存储 Dogs 行的表和一个存储给 Dog 的 Vaccinations 行的表）。

所以，一只狗`has_many`接种疫苗和一只狗接种疫苗`belongs_to`。

我希望能够快速回答这个问题：“狗 A 上一次接种疫苗是什么时候？” 有两种方法可以存储这些数据：

1）规范化数据库方式：让疫苗表存储一切。要回答这个问题，请在数据库中搜索所有给予狗 A 的疫苗，并返回最近的疫苗。

2）非标准化数据库方式：在Dog中有一个名为“last_vaccination”的字段，每次给Dog A接种疫苗时都要维护这个字段。

#1 的优点是：您可以获得数据库规范化，并且不必担心维护准确的数据。

#2 的优点是：性能——您不必每次都搜索疫苗数据库。

这样做的正确方法是什么？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T03:02:18.423

我非常喜欢几年前在一次软件研讨会上从数据库专家那里听到的一句话：

“规范化直到它受伤，反规范化直到它起作用。”

这其中有很多道理。

FWIW，我认为上面的布局中有一个漏洞——需要一个“疫苗接种”表，实际上，它将狗与疫苗联系起来。疫苗接种！=疫苗。这是标准化版本的更准确表示。国际海事组织。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T03:01:36.287

就个人而言，我在这种情况下意识到的一件事是：

如果您发现需要不断地将聚合或“最新记录”信息存储在另一个表中（并打破规范化），主要是出于性能目的，那么您真正需要的是缓存，*而不是*列/表。

选择你的毒药：简单的内存缓存、分布式缓存或 RDBMS 的 NoSQL 补充。

在您的特定情况下，可能工作的最简单的事情可能类似于：

```
Rails.cache.fetch("dogs/#{@dog.id}/last_vaccination") do
  @dog.vaccinations.last
end 
```

# caching - PTLsim 中内存的并行访问是如何发生的

> ID：12658240
> 
> 赞同：1
> 
> 时间：2012-09-30T02:54:08.590
> 
> 标签：caching, memory, cpu

我正在使用*PTLsim*对 PCM 进行研究。我发现文件 dcache.cpp 中的函数 void MissBuffer::clock() 内部有一个循环。这意味着会发生对内存或缓存的并行访问。但是只有一个内存等级怎么可能发生。此外，Level-1 D-cache 的数量只有 8 个 bank，而 MissBuffer 的大小为 64。所以这些 bank 无法解释并行访问。我有点迷惑不解了。如果我想添加一些功能，例如记录写内存时间，我该怎么做？

# java - java：while循环-在进入花括号之间的语句之前使用分号语句？

> ID：12658242
> 
> 赞同：0
> 
> 时间：2012-09-30T02:55:22.813
> 
> 标签：java, sorting, while-loop, cycle-sort

我在stackoverflow上查看另一个页面并遇到了循环排序的工作实现，但我不明白在while循环中的花括号之前如何存在带分号的语句。我认为while循环应该完全终止并且一旦找到带有分号的语句就不会采取进一步的行动，那么花括号内的代码是如何被执行的呢？乍一看，我会将此解释为“var”随着 while 循环的每次迭代而递增 - 但我知道情况并非如此，因为将其从该位置删除并将“var++”放在花括号内会导致无限环形。

究竟在什么条件下“var”递增？解释或解释类似语法的链接：

```
while (checkSomeBool) var++;
{
   //other stuff happening in here
} 
```

将不胜感激。谢谢你。下面是取自[CycleSort的代码](https://stackoverflow.com/questions/3623509/how-to-sort-an-array-using-minimum-number-of-writes)

```
public static final <T extends Comparable<T>> int cycleSort(final T[] array) {
int writes = 0;

// Loop through the array to find cycles to rotate.
for (int cycleStart = 0; cycleStart < array.length - 1; cycleStart++) {
  T item = array[cycleStart];

  // Find where to put the item.
  int pos = cycleStart;
  for (int i = cycleStart + 1; i < array.length; i++)
    if (array[i].compareTo(item) < 0) pos++;

  // If the item is already there, this is not a cycle.
  if (pos == cycleStart) continue;

  // Otherwise, put the item there or right after any duplicates.
  <while (item.equals(array[pos])) pos++;
  {
    final T temp = array[pos];
    array[pos] = item;
    item = temp;
  }
  writes++;

  // Rotate the rest of the cycle.
  while (pos != cycleStart) {
    // Find where to put the item.
    pos = cycleStart;
    for (int i = cycleStart + 1; i < array.length; i++)
      if (array[i].compareTo(item) < 0) pos++;

    // Put the item there or right after any duplicates.
    while (item.equals(array[pos])) pos++;
    {
      final T temp = array[pos];
      array[pos] = item;
      item = temp;
    }
    writes++;
  }
} 
return writes; 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T02:58:39.063

`while`循环以`var++`

```
while (checkSomeBool) var++; // while ends here 
```

之后的代码根本不是`while`循环的一部分。

```
{
   //other stuff happening in here - not part of the while loop
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T02:57:47.977

类 C 语言允许您将任意代码括在大括号中以创建块范围，无论是否有其他语法结构。
大括号中的代码在循环之后作为普通代码执行。

如果您完全取出`while`线路，它仍然会运行。

# php - 在 JQuery If 语句中使用 PHP 布尔值

> ID：12658245
> 
> 赞同：0
> 
> 时间：2012-09-30T02:57:28.853
> 
> 标签：php, jquery, variables, html

我想在 jquery if 语句中使用 php 布尔变量。这是我的代码：

```
if(<?php echo $show_login_error ?>)
    $(".login_error").show(); 
```

.login_error 是 span 元素的类。如果 $show_login_error 变量为真，那么我想显示跨度，如果不是，则隐藏它。默认情况下，span 是隐藏的，$show_login_error 是 false。不幸的是，无论变量值如何，跨度都会显示，所以我猜我的代码是错误的。我应该改变什么才能使它正确？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T02:59:58.430

首先，确保`.login_error`默认隐藏 ( `display:none`)。

那么，试试

```
if(<?php echo (int)$show_login_error ?>)
    $(".login_error").show(); 
```

只是为了确保它打印 0 或 1（因为`echo false`不打印单个字符）

```
echo false;      //prints nothing
echo true;       //prints '1'
echo (int)false; //prints '0'
echo (int)true;  //prints '1' 
```

**编辑**

下面提供的其他解决方案也可以！;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T03:04:10.097

```
<?php if($show_login_error == true) ?>
$(".login_error").show();
<?php else: ?>
$(".login_error").hide();
<?php endif; ?> 
```

# html - 带有 HTML 的 UIActivityViewController

> ID：12658248
> 
> 赞同：16
> 
> 时间：2012-09-30T02:57:56.317
> 
> 标签：html, ios, ios6, sharing

当我将包含 HTML 内容的字符串作为数组元素传递给`UIActivityViewController initWithActivityItems`方法时，它不会在选定的“共享”控制器中将其呈现为 HTML，而是呈现 HTML 源（即标记而不是解释它）。

虽然我可以理解为什么它会为不支持 html 内容的共享目标执行此操作，但它也不会将其解释为电子邮件之类的内容（以前可以通过将`isHTML`属性设置为`YES`on来完成`MFMailComposeController`）。

我应该浪费我的时间创建一个`UIActivityItemProvider`基于“活动类型”返回自定义内容的内容，还是真的没有办法让邮件控制器提供的邮件控制器`UIActivityViewController`将内容解释为 HTML？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-11-06T14:50:07.113

在我的测试中，如果字符串以“<html><body>”开头并以“</body></html>”结尾，那么它将被视为 HTML。

如果您希望通过非 HTML 感知共享服务获得良好的结果，您需要改为使用实现[UIActivityItemSource](https://developer.apple.com/library/ios/documentation/uikit/reference/UIActivityItemSource_protocol/Reference/Reference.html#//apple_ref/occ/intf/UIActivityItemSource)协议并在 from`-activityViewControllerPlaceholderItem:`和 from`-activityViewController:itemForActivityType:`活动时返回 HTML 字符串的对象`UIActivityTypeMail`，`nil`否则返回 HTML 字符串。

如果活动不是（如果是） ，则返回合适的非 HTML 字符串的第二个[UIActivityItemSource是难题的其余部分。](https://developer.apple.com/library/ios/documentation/uikit/reference/UIActivityItemSource_protocol/Reference/Reference.html#//apple_ref/occ/intf/UIActivityItemSource)`-activityViewControllerPlaceholderItem:``-activityViewController:itemForActivityType:``UIActivityTypeMail``nil`

我建议不要让一个对象同时完成这两项工作，因为`UIActivity`引擎有权根据占位符项目是否显示为 HTML 做出不同的决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T10:02:57.217

我没有尝试过任何这些，但是当我熟悉 UIActivityViewController 时，它们对于您的目标似乎是合理的。

1) 您可以将 HTML 源代码写入本地文件，例如 ，`my_mail_message.html`然后使用该文件构建一个`NSURL`对象，例如 ，`[NSURL URLWithString:@"file://my_mail_message.html"]`然后将该`NSURL`对象用作`activityItems`您提供给 的数组的元素`initWithActivityItems:applicationActivities:`。

2) 如果您知道预期的接收者，例如 ，`foo@example.com`您可以使用方案和 HTML 源作为构建一个`NSURL`对象，如下所示：。您应该省略花括号。和以前一样，您应该使用该对象作为数组的元素。`mailto``body``mailto:foo@example.com?body={my HTML source goes here}``{}``NSURL``activityItems`

希望这能给你一些想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T03:24:02.860

您希望支持哪些活动？活动类型依赖于服务，并且定义非常[明确](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIActivity_Class/Reference/Reference.html)。例如，服务无法知道字符串是纯文本还是标记文本——您可能想故意粘贴 HTML 代码。

你总是可以用老式的方式做事，将纯文本和 HTML 复制到粘贴板，或者直接调用邮件编辑器，或者你想要完成的任何事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T16:26:42.900

您只需要确保 HTML 字符串的第一行是一个标签。

# c - Toupper 不适用于 char 数组

> ID：12658249
> 
> 赞同：1
> 
> 时间：2012-09-30T02:58:00.943
> 
> 标签：c

感谢您的关注...我真的很困惑..为什么当我给 char 一个数组时，我不能将 char 类型转换为带有 toupper 的大写...就像这样的“char drh [1]”？

这是我的代码..这段代码还没有完成..我被困在中途了。

```
#include <stdio.h>
#include <conio.h>
#include <stdlib.h>
#include <ctype.h>

using namespace std;
int main()
{
    char nama[50], gender[6], drh[1];
    int tahun_l, usia;
    float berat, tinggi, berat_i;

    printf("Masukkan Data Anda\n\n");
    // INPUT ZONE

    //First
    printf("Nama\t\t\t\t: ");
    scanf("%[^\n]", &nama);

    printf("Tahun Lahir (yyyy)\t\t: ");
    scanf("%d", &tahun_l);

    printf("Gol Darah (A/B/C)\t\t: ");
    scanf("%s", &drh);

    system("cls");

    //Second
    printf("Masukkan Data Anda\n\n");

    printf("Nama\t\t\t\t: %s\n", nama);
    fflush(stdin);

    printf("Tahun Lahir (yyyy)\t\t: %d\n", tahun_l);
    fflush(stdin);

    printf("Gol Darah (A/B/O)\t\t: %s\n", drh);
    drh = toupper(drh); //not working
    fflush(stdin);

    printf("Jenis Kelamin (Pria/Wanita)\t: ");
    scanf("%s", &gender);

    printf("Berat Badan (kg)\t\t: ");
    scanf("%f", &berat);

    printf("Tinggi Badan (cm)\t\t: ");
    scanf("%f", &tinggi);

    //FORMULA ZONE
    usia    = 2008 - tahun_l;
    berat_i = tinggi - 100 - (0.1 * (tinggi - 100));
    //OUTPUT ZONE
    printf("\n%s, berdasarkan data yang Anda masukkan,\n", nama);
    printf("Anda berjenis kelamin %s, saat ini Anda berusia %d tahun,\n", gender, usia);
    printf("Berat badan = %.2f kg, tinggi badan = %.2f cm, golongan darah = %s \n", berat, tinggi, drh);
    printf("\nBerat badan ideal adalah %.2f", berat_i);

    getche();
    return 0; 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T03:05:39.013

该`toupper`函数适用于单个字符，而不适用于字符串。如果您需要将整个字符串转换为大写，则需要使用循环：

```
for (char *p = drh ; *p ; *p = toupper(*p), p++)
    ; 
```

但是，您的`drh`缓冲区没有足够的长度：它必须有 2 个字符才能适合空终止符：

```
char nama[50], gender[6], drh[2];
//  Add 1 char for terminator ^---- HERE 
```

此外，由于您知道这`drh`是单个字符，因此可以使用

```
*drh = toupper(*drh); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T03:04:26.830

该函数`toupper`接受一个字符，并且您传递给它一个字符数组（是的，`drh[1]`是一个字符的数组）。这行代码永远不会与数组一起使用：

```
drh = toupper(drh); 
```

因为你不能像那样复制数组。您可能将单曲与单曲混淆`char`了`char[1]`。您只有一个选择，那就是更改 to 的`drh`声明`char drh;`。

你会想要改变这行代码：

```
scanf("%s", &drh); 
```

至：

```
scanf("%c", &drh); 
```

因为您正在阅读一个字符而不是一个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T03:05:04.513

`toupper`适用于*单个字符*，但您正试图将其应用于整个数组。编译器应该抱怨将整数转换为指针并返回或类似的东西——如果没有，请立即停止并打开警告。

要在 C 中大写整个“字符串”（以 nul 结尾的字符数组），您必须自己循环字符，如下所示：

```
for (char *p = drh; *p; p++)
  *p = toupper(*p); 
```

这是最惯用的方式，但让我也用不同的方式来写它，这样可以更清楚地说明发生了什么：

```
char *p = drh;
while (*p != '\0')     // until we reach the end of the string
{
    *p = toupper(*p);  // upcase the character currently pointed to by 'p'
    p++;               // advance to the next character
} 
```

**编辑：**我没有注意到您将*一个字符*数组传递给`scanf`. 这将不可避免地破坏您的堆栈，因为即使用户合作并仅键入一个字符，`scanf`也会将*两个*字符写入数组（用户键入的字符和强制性的 NUL 终止符）。`char drh[2]`如果您想用来`scanf("%s")`读取一个字符，则需要这样做。当（不是如果）用户输入多个字符时，即使这样也无济于事；编写此程序的*正确*方法是使用`fgets`（或者，更好的是`getline`）读取整行，然后手动咀嚼它们（即*不*使用`sscanf`）。基本上从长远来看，你想忘记你曾经听说过`scanf`或其亲属。不过，我不会责怪你想一次解决一个问题。

# asp.net - 在 Amazon AWS 上扩展 SignalR

> ID：12658250
> 
> 赞同：4
> 
> 时间：2012-09-30T02:58:01.503
> 
> 标签：asp.net, asynchronous, amazon-web-services, signalr, signalr-hub

我想知道如何在 Amazon AW 上扩展 SignalR。据我了解，为了扩展 SignalR，我需要在多个 EC2 服务器上部署我的网站。问题是两台或多台服务器之间没有连接。可以选择使用 Redis DB 使服务器相互通信。

我的问题是：

1.  我还需要扩展 Redis DB 吗？

2.  消息数据是永久保存到数据库中还是在发送消息时被删除？（我不希望数据库保存消息，因为它会变得非常大）

3.  亚马逊上是否有任何推荐的配置以开始可扩展的 SignalR 部署？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-22T21:24:51.843

自从发布此问题以来，亚马逊已经[为 Redis 引入了 ElastiCache](http://aws.amazon.com/about-aws/whats-new/2013/09/04/amazon-elasticache-for-redis/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T20:07:11.443

1）在考虑如何扩展 Redis 之前，您应该先了解是否需要扩展 Redis。

2）Redis是一个内存数据集（http://redis.io/topics/introduction）；所以它不必持久化到磁盘。

3) 我建议遵循 SignalR wiki (https://github.com/SignalR/SignalR/wiki) 中给出的建议来设置 SignalR（您使用 AWS EC2 的事实并不重要） - 然后来回来有任何具体问题。

# linux - 来自 Youtube 的 Bash Grep 查看次数

> ID：12658251
> 
> 赞同：2
> 
> 时间：2012-09-30T02:58:13.370
> 
> 标签：linux, bash, grep

我正在尝试在我想要的地方制作一个 bash 脚本`wget -O youtube.html http://youtube.com`。我试图弄清楚如何仅将视图计数为`grep`. 我用过`grep [0-9].views youtube.html`，但我仍然返回很多不必要的行。

如果有人能给我一些提示，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T03:20:27.457

您可以`wget`通过正向前瞻将安静的输出和管道直接输入到 grep 中，以简单地输出视图计数：

```
wget -q -O- http://youtube.com | grep -oP "[0-9,]+(?=\sviews)" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T03:07:14.953

`grep views youtube.html`为我工作。如果你只想要数字，你可以这样做`grep views youtube.html | cut -f1 -d' '`。

希望这会有所帮助=)

# magento - Magento 输出不正确的日期和时间

> ID：12658252
> 
> 赞同：6
> 
> 时间：2012-09-30T02:58:29.767
> 
> 标签：magento, date, time, timezone

如果我在 index.php 中输出日期/时间`echo date('m/d/Y h:i:s a', time());`。这是正确的。如果我在那之后的任何地方输出日期/时间，例如在扩展中它正好关闭 4 小时。我已经在 php.ini 和 Magento 本身中正确设置了时区，所以不确定是什么导致它关闭。我正在运行版本 1.7.0.2。

**编辑**

好的，所以我学到了一些东西。

Magento 总是在 app/mage.php 中将时区设置为 UTC

```
line 767: date_default_timezone_set('UTC') 
```

所以，基本上你不能使用 date(),time() 等。你必须在 Admin->System->Configuration / General->Locale 选项中设置你的目标时区，并使用类似的东西：

```
$now = Mage::getModel('core/date')->timestamp(time());
echo date('m/d/y h:i:s', $now); 
```

我总是可以用我的时区替换第 767 行，但我不喜欢修改核心代码。还有其他选择吗？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T10:26:22.297

Magento 中的首选方法似乎是使用 Zend 或 Varien 日期时间对象，而不是[本示例](https://stackoverflow.com/questions/9233768/magento-1-6-using-mysql-datetime-fields-with-resource-models)中的标量值。拥有对象后，您可以通过调用轻松地将其转换为其他非服务器时区[`setTimezone`](http://framework.zend.com/manual/1.12/en/zend.date.overview.html#zend.date.values)。

```
// a more complete example
$datetime = Zend_Date::now();
// admin controls this output through configuration
$datetime->setLocale(Mage::getStoreConfig(
             Mage_Core_Model_Locale::XML_PATH_DEFAULT_LOCALE))
         ->setTimezone(Mage::getStoreConfig(
             Mage_Core_Model_Locale::XML_PATH_DEFAULT_TIMEZONE));
echo $datetime->get(Zend_Date::DATETIME_SHORT); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-26T04:07:25.070

如果您在 Magento 的数据库中保存日期，请确保它们采用 UTC。默认情况下，Magento 将所有日期保存为 UTC，但它应该以本地时区显示它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-15T02:52:27.593

在我的情况下，时间在例如 system.log 和调度程序（cronjobs）中有所不同。

所以假设现在是 01.15 实时，Scheduler 中的 Created 时间总是正确的，所以在这种情况下是 01.15。比执行时间有时是 01.16 但通常是 02.16，所以你会看到 01.16 和 02.16 的混合，所以时间连续变化。

当我检查系统日志时，我看到了同样的情况，首先你会看到像 01.50、02.45、03.50 和突然 02.55 这样的消息的时间增加。

所以系统中有一些东西让这次变化，但是在哪里，也许我的提供者找到了一些东西......但这不是系统时间，它与 Magento .. Magento 写入日志..

编辑：

为什么会出现这个问题我不知道，但我在我所在的欧洲/阿姆斯特丹地区的 Mage.php 中更改了 UTC 时间。现在所有时间都是正确的，在日志中也是如此。

但是又出现了一个问题，当我在调度程序（扩展）中立即安排一个 cronjob 时，这个作业被安排在 1 小时后（调度程序中的其他时间是正确的）。一个扩展 Copernica 在例如 18.00 运行（不是通过调度程序）并写道它上次在 17.00 执行......没有其他非 Magento 网店有这种问题..数据库也在 php.ini 中使用 Europe/Amsterdam ..

# iphone - 如何在 iOS6 上将 Facebook 框架集成到应用程序中？

> ID：12658253
> 
> 赞同：0
> 
> 时间：2012-09-30T02:58:37.223
> 
> 标签：iphone, objective-c, facebook, ios6

我仍在使用旧的 facebook graph api 在我的应用程序的用户墙上发布内容。自 iOS6 以来，facebook 已集成到操作系统中。我怎样才能用它来发布东西？我想以与 twitter 框架相同的方式使用它：

```
 TWTweetComposeViewController *tweetViewController = [[TWTweetComposeViewController alloc] init];
    [tweetViewController setInitialText:@"bla bla bla"];
    [self dismissModalViewControllerAnimated:YES];
    [self presentModalViewController:tweetViewController animated:YES]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T03:04:55.620

从 iOS 6 开始，您可以将 SLComposeViewController 用于所有支持的服务类型，例如 Twitter、Facebook 和微博。注意：不要忘记添加 Social.framework

```
if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {
     SLComposeViewController *fb = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
     [fb setInitialText:@"bla bla bla"];
     [self presentModalViewController:fb animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T20:05:03.113

如果您希望您的帖子“通过我的应用名称”发送，您可以使用 SLRequest：

```
-(IBAction)postMessage:(id)sender
{
    // Create the URL to the end point
    NSURL *postURL = [NSURL URLWithString:@"https://graph.facebook.com/me/feed"];

    NSString *link = [[NSString alloc] init];
    NSString *message = [[NSString alloc] init];
    NSString *picture = [[NSString alloc] init];
    NSString *name = [[NSString alloc] init];
    NSString *caption = [[NSString alloc] init];
    NSString *description = [[NSString alloc] init];

    link = @"http://developer.apple.com/library/ios/#documentation/Social/Reference/Social_Framework/_index.html%23//apple_ref/doc/uid/TP40012233";
    message = @"Testing Social Framework";
    picture = @"http://www.stuarticus.com/wp-content/uploads/2012/08/SDKsmall.png";
    name = @"Social Framework";
    caption = @"Reference Documentation";
    description = @"The Social framework lets you integrate your app with supported social networking services. On iOS and OS X, this framework provides a template for creating HTTP requests. On iOS only, the Social framework provides a generalized interface for posting requests on behalf of the user.";

    NSDictionary *postDict = @{
    @"link": link,
    @"message" : message,
    @"picture" : picture,
    @"name" : name,
    @"caption" : caption,
    @"description" : description
    };

    SLRequest *postToMyWall = [SLRequest requestForServiceType:SLServiceTypeFacebook requestMethod:SLRequestMethodPOST URL:postURL parameters:postDict];

    FacebookAccountManager* sharedManager = [FacebookAccountManager sharedAccount];
    [postToMyWall setAccount:sharedManager.facebookAccount];

    [postToMyWall performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error)
    {
        if (error) {
            // If there is an error we populate the error string with error
            _errorString = [NSString stringWithFormat:@"%@", [error localizedDescription]];

            // We then perform the UI update on the main thread. All UI updates must be completed on the main thread.
            [self performSelectorOnMainThread:@selector(updateErrorString) withObject:nil waitUntilDone:NO];
        }

        else
        {
            NSLog(@"Post successful");
            NSString *dataString = [[NSString alloc] initWithData:responseData encoding:NSStringEncodingConversionAllowLossy];
            NSLog(@"Response Data: %@", dataString);
        }
     }];

    // Tidy Up
    link = nil;
    message = nil;
    picture = nil;
    name = nil;
    caption = nil;
    description = nil;
    postDict = nil;
    postToMyWall = nil;
    postURL = nil;

} 
```

[http://theworkingbear.com/social-framework-reference/](http://theworkingbear.com/social-framework-reference/)完整的演练

# architecture - 处理器处理中断的速度有多快

> ID：12658263
> 
> 赞同：0
> 
> 时间：2012-09-30T03:00:29.750
> 
> 标签：architecture, operating-system, interrupt, processor, context-switch

我正在研究中断。所以大多数架构都是中断驱动的，如果一切都是中断驱动的，处理器能以多快的速度处理所有这些。例如，在按下键盘按键时，它会创建一个中断，要求内核寻找新字符的缓冲区，在这种情况下，处理器可以服务多快，同时在发出中断时，处理器需要切换到内核空间，这在上下文切换方面成本很高。所以我假设，即使在所有这些之后，如果处理器具有良好的性能，那么我只能假设两次击键之间的时间在计算机速度方面是很多时间？一个平均，一分钟发生多少上下文切换？我想这会让我对我真正学习的内容有所了解并获得真实的生活感觉......谢谢......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T06:00:56.063

多快取决于多种因素：

1.  CPU 和中断控制器的硬件延迟（如果有）
2.  CPU 时钟频率（通常，事件（或对它们的响应）的发生速度不会比这快）
3.  CPU 访问所需内存的速度（系统表（例如中断向量表，但可能有段表和页表等），堆栈（中断的代码指令指针通常会保存在堆栈上，因此 ISR 可以返回到它）、ISR 代码本身及其使用的所有数据）。显然，代码、数据和 TLB 缓存将在这里发挥作用。
4.  ISR 完成工作所需的时间，特别是如果 ISR 不能相互抢占，因此必须串行化并发中断。
5.  中断优先级。通常，不同的中断源被分配不同的优先级。例如，您希望不可屏蔽中断、机器检查中断（基本上是报告严重硬件问题的中断）和定时器中断具有比键盘中断更高的优先级。在基于优先级的中断处理中，所有优先级低于当前正在服务的中断的中断都必须“等待”。因此，如果您有许多高优先级中断，则可以以明显且变化的延迟来处理低优先级中断。极端情况是高优先级中断不断出现。这可能是由于设计不当或硬件故障造成的。
6.  与其他 CPU 的通信和交互。在 MP 系统中，中断处理程序有时可能会使用自旋锁来独占访问多个 CPU 之间共享的资源。如果存在争用，ISR 将等待并且所有其他中断（或所有较低优先级的中断）将不会得到服务，直到当前 ISR 完成其工作。

这是对一般问题的一般回答。

**编辑**：我忘了提一件事。存在一些奇怪的 CPU，其中某些指令是可重复的（想想 x86 的`rep movsb`），并且在重复的指令完全完成之前，中断无法开始得到服务，这可能需要相当于执行大约 1000 条甚至更简单的单个指令的时间。因此，尽管启用了中断，但可能会有一些 CPU 怪癖不让 ISR 开始运行。TI 的 TMS320C54xx 就是此类 CPU 之一。有了它，您必须小心 FIR 滤波器代码。如果过滤器很长并且被实现为重复的 MAC 指令，则会在中断服务中引入延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T03:14:06.653

在普通的 linux 系统中，有一个 nice 值，较低的 nice 值具有大约 800ms 的典型量子值，较高的 nice 值具有 5ms 的量子。

Linux 系统使用启发式方法来决定进程是否是交互式的。您最好阅读此说明：

[https://www.cs.columbia.edu/~smb/classes/s06-4118/l13.pdf](https://www.cs.columbia.edu/~smb/classes/s06-4118/l13.pdf)

关于调度程序，有几种数据结构，例如 linux 跟踪等待 IO 绑定的交互进程的数量等。

在 Windows 中，不仅仅是抢占式多任务，应用程序通过 GetMessage() API 调用支持内核[在 Windows GUI 程序的情况下]。当您调用 GetMessage() 时，该进程将在有消息挂起时调度回来在它的系统队列中处理。

# regex - 如何删除“\'”？

> ID：12658270
> 
> 赞同：0
> 
> 时间：2012-09-30T03:01:50.500
> 
> 标签：regex, c#-4.0

我正在尝试`\'`从字符串中删除

```
 string temp = "[['90\'','','Delay in match Cédric Kanté (Sochaux) because of an injury.','away']]";

 temp = Regex.Replace(temp, @"\\'", "");  >> still have ' mark  [['90'','','...'] 
```

我尝试了很多方法，但都失败了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T03:03:19.420

你应该能够做到：`.Replace(temp, @"\\", "");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T10:58:44.397

[它采用json serilaizers](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)可以解析的形式。不需要正则表达式。

```
string temp = @"[['90\'','','Delay in match Cédric Kanté (Sochaux) because of an injury.','away']]";

var js = new JavaScriptSerializer();
List<List<string>> listOfList = js.Deserialize<List<List<string>>>(temp);

foreach (var item in listOfList[0])
    Console.WriteLine(item); 
```

# android - Wi-Fi 直连技术

> ID：12658272
> 
> 赞同：2
> 
> 时间：2012-09-30T03:02:56.760
> 
> 标签：android, wifi, wifi-direct

我正在考虑创建一个通过 Wi-Fi Direct 传输视频流的应用程序。我已经用谷歌搜索过（甚至在 Stackoverflow 中），但我没有找到指定支持的设备的列表。

我的问题是：**是否可以在三星 Galaxy Mini（GT-S5570B 与 Android 2.3.6 Gingerbread）上使用 Wi-Fi Direct 编写应用程序？这项技术是否存在硬件限制，或者仅代码就足够了？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T04:10:22.390

在 Android 平台中，**只有在制造商决定添加该功能并在 Android**操作系统 (OS)上进行一些代码修改时，具有 Android 2.3 或 Gingerbread 及更低版本的设备才支持 WiFi Direct **（因此，如果您在“设置”中看到 WiFi Direct那么你的安卓操作系统的应用程序，是的，你有wifi直接，你可以开发应用程序）**。LG **Optimus Black、三星 Galaxy S 和 Galaxy S II、Galaxy S III**是市场上支持 WiFi Direct 的现有智能手机的例子。一些配备 WiFi Direct 的索尼 BRAVIA LED 电视允许通过索尼爱立信 Xperia 智能手机进行媒体共享。

谷歌后来在其最新的 Android 4.0 或 Ice Cream Sandwich OS 中添加了 WiFi Direct 支持。这使得三星 Galaxy Nexus 成为第一款提供原生 WiFi Direct 且无需制造商绑定的 Android 手机。

我建议看看[这个。](http://www.mobile88.com/news/read.asp?file=/2012/1/6/20120106140457&phone=wifi-direct-demystified)

**编辑：**对于模拟器，我也看不到 WI-FI Direct 的任何设置。我认为您无法在模拟器上进行测试。请看这个链接，

[使用多个 android 模拟器执行 WIFIDirectDemo 示例](https://stackoverflow.com/questions/9640565/executing-wifidirectdemo-sample-with-multiple-android-emulators)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T13:33:43.310

[您可以从Wi-Fi Alliance 网站](http://certifications.wi-fi.org/search_products.php?search=1&advanced=1&lang=en&filter_company_id=756&filter_category_id=&filter_subcategory=&filter_cid=&date_from=&date_to=&selected_certifications%5B%5D=50&x=67&y=24)获取有关哪些 Sony Xperia 设备支持 Wi-Fi Direct 的信息。索尼还有一个[电话借用计划](http://developer.sonymobile.com/services/borrow-a-phone/)，您可以在其中申请借用设备。

# pointers - 程序集得到实际的变量地址？

> ID：12658273
> 
> 赞同：0
> 
> 时间：2012-09-30T03:03:01.393
> 
> 标签：pointers, assembly, x86

我正在开发一个 x86 程序集的操作系统（使用 NASM）并遇到了一个我似乎无法解决的恼人问题。好的，假设我将我的程序加载到地址 0xFF（我没有在那里加载它，只是一个示例），并且我的可执行文件中有一个位于地址 0xC 的变量。现在我使用了 org 指令并将变量移动到 eax 中。现在变量的值将是 0xC 而不是 0xFF + 0xC。有什么方法可以获取内存中的实际值，还是我每次都需要添加偏移量？

# java - 自动装箱一个字符值，然后返回一个空白值

> ID：12658275
> 
> 赞同：0
> 
> 时间：2012-09-30T03:03:21.030
> 
> 标签：java, random, char, character, autoboxing

我有这段代码可以生成随机字符（ASCII）

```
public char getRandChar(){ return (char)rand.nextInt(27); } 
```

然后我会用这个打印出来

```
System.out.println(new Character(getRandChar())); 
```

如何，但显然它正在返回一个空白值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T03:10:12.007

这是因为`rand.nextInt(27);`正在返回不可打印的字符代码。如果您将代码更改`return (char)65;`为例如，这将很明显。

# python - Python模块作为类的全局实例

> ID：12658277
> 
> 赞同：4
> 
> 时间：2012-09-30T03:03:45.170
> 
> 标签：python

> **可能重复：**[模块上的](https://stackoverflow.com/questions/2447353/getattr-on-a-module)
> [**getattr**](https://stackoverflow.com/questions/2447353/getattr-on-a-module)

我有一个模块，它在其中定义了一个 Manager 类。我希望该模块创建此类的一个实例并将该模块用作此类的“全局实例”。例如：

```
class Manager:

    def func(self):
        print('stuff')

instance = Manager()

def func():
    instance.func() 
```

有没有办法让 module.x 返回 module.instance.x？（有点像模块级属性）

更新：[这个问题](https://stackoverflow.com/questions/2447353/getattr-on-a-module)的答案只涵盖了我用例的一半（即，它不是重复的，该问题所问的是不同的）；我还需要模块的属性也可用。例子：

```
class Manager:

    def __init__(self):
        self.x = 3

    def func(self):
        print('stuff')

sys.modules[__name__] = Manager()

>>> module.func
<func>
>>> module.x
3
>>> module.Manager
AttributeError 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T04:17:46.970

为什么没有`Manager`'`__getattr__`返回模块级对象？

```
def __getattr__(self, key):
    try:
        return globals()[key]
    except KeyError:
        raise AttributeError(key) 
```

# c++ - 捕捉按键 C++

> ID：12658280
> 
> 赞同：4
> 
> 时间：2012-09-30T03:04:03.407
> 
> 标签：c++, for-loop, while-loop, keypress

我正在使用一个简单的循环来捕获用户按键；

```
while (1)
{
    for(i = 8; i <= 190; i++)
    {
       if (GetAsyncKeyState(i) == -32767){
         //Do stuff
       }
    }
} 
```

当用户按下某个键时，它会“做一些事情”，但很明显，因为它无限循环，而且我是 C++ 新手，它占用了 100% 的 CPU，这不利于简单的输入。

我究竟做错了什么？我试过 Sleep() 函数（如果我把它放在'for循环'它会错过按键，如果我把它放在'while循环'它根本不会降低CPU，afaik）

我怎样才能让它捕捉到相同的按键，但使用的 CPU 几乎没有那么多；我错过了一个技巧吗？我敢肯定大多数程序都会捕获按键，而您不会看到所有程序都使用 100%！

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T03:40:36.097

将你的无限循环放在一个工作线程中，并让它在每次迭代时休眠一段合理的时间间隔。C++11 让这变得非常简单：

```
#include <thread>
#include <chrono>

std::chrono::milliseconds THREAD_WAIT = 50;

int keypress = -1;

void GetKeyPress()
{
   while (1)
   {
       for(i = 8; i <= 190; i++)
       {
          int k = GetAsyncKeyState(i);
          if (/*whatever condition needs to be satisfied*/)
              keypress = k;
       }
       if (keypress != -1) break; //Use this only if you have td.join() below
       std::this_thread::sleep_for(THREAD_WAIT);
   }
}

int main(void)
{
   ...

   std::thread td( GetKeyPress );
   td.join(); //If you want to block until the user presses a key, otherwise remove.

   //If no join(), do the rest of your program, checking in on keypress when need be

   return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T03:23:16.160

请查看以下链接，该链接通过示例代码解释了正确使用 GetAsyncKeyState()。 [http://www.mpgh.net/forum/31-cc-programming/120656-proper-use-getasynckeystate.html](http://www.mpgh.net/forum/31-c-c-programming/120656-proper-use-getasynckeystate.html)

希望此链接可以帮助您解决问题

**已编辑：** GetAsyncKeyState() 函数不适合您尝试做的事情。

它所做的只是检查键盘上某个键的实际当前纳秒位置。这样做几乎总是不正确的。

相反，使用正确的输入函数读取控制台输入。请在下面找到示例代码。

```
#include <stdio.h>
#include <windows.h>

int main()
{
    DWORD        mode;          /* Preserved console mode */
    INPUT_RECORD event;         /* Input event */
    BOOL         done = FALSE;  /* Program termination flag */
    unsigned int counter = 0;   /* The number of times 'Esc' is pressed */

    /* Don't use binary for text files, OK?  ;-) */
    FILE* myfile = fopen( "example.txt", "w" );

    /* Get the console input handle */
    HANDLE hstdin = GetStdHandle( STD_INPUT_HANDLE );

    /* Preserve the original console mode */
    GetConsoleMode( hstdin, &mode );

    /* Set to no line-buffering, no echo, no special-key-processing */
    SetConsoleMode( hstdin, 0 );

    /* Give the user instructions */
    printf(
        "Press Escape as many times as you like.\n"
        "Press anything else to quit.\n\n"
        );

    while (!done)
    {
        if (WaitForSingleObject( hstdin, 0 ) == WAIT_OBJECT_0)  /* if kbhit */
        {
            DWORD count;  /* ignored */

            /* Get the input event */
            ReadConsoleInput( hstdin, &event, 1, &count );

            /* Only respond to key release events */
            if ((event.EventType == KEY_EVENT)
            &&  !event.Event.KeyEvent.bKeyDown)
                switch (event.Event.KeyEvent.wVirtualKeyCode)
                {
                    case VK_ESCAPE:
                        counter++;
                        fprintf( myfile, "Escape: %d\n", counter );
                        printf( "Button pressed!\n" );
                        break;
                    default:
                        done = TRUE;
                }
        }
    }

    /* All done! */
    printf( "You pressed the Escape key %d times\n", counter );
    fclose( myfile );
    SetConsoleMode( hstdin, mode );
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T03:10:04.073

你可以使用

```
while (!kbhit()); 
```

这可能会有所帮助。

# multiple-databases - 如何设置多个 Q/A 站点并一次从一个或多个站点加载问题

> ID：12658285
> 
> 赞同：3
> 
> 时间：2012-09-30T03:04:30.513
> 
> 标签：multiple-databases, question2answer

[我正在为使用question2answer](http://www.question2answer.org) CMS 的高中生进行问答，方法是为每个科目设置一个 CMS 副本。大多数学生都非常了解并且可以在一个主题上做出更多贡献，所以我想让他们能够选择他们想要参与的主题。这将在 ajax 中完成，当单击主题名称时，所有活动、问题、热门、未回答、标签将被更新以包括所有选定的站点。

我正在谈论的示例看起来像这样。

![在此处输入图像描述](../Images/a9656c81fc847fb99bb6462a2178038a.png)

我想知道如何实现这一点，有什么想法吗？

PS我可以看到我可以通过调整内置类别来更轻松地实现这一点，但我计划稍后扩展到更加多样化的问答网站，并希望能够拥有一个主题的独立网站，以及一页从哪个站点的数据库中过滤以加载问题、标签、用户和其他信息。

尽管如何做到这一点，我同样感兴趣的是从自定义选择的一组数据库中更新数据有多难，或者我应该在具有不同前缀的同一个数据库上工作，或者实现这一点的最佳方法是什么？

# elasticsearch - 使用不同分析器的不同字段的弹性搜索查询字符串分析器

> ID：12658293
> 
> 赞同：4
> 
> 时间：2012-09-30T03:05:00.387
> 
> 标签：elasticsearch

在对具有不同分析器（stem、ngram 等）的多个字段执行查询时，elasticsearch 是否对每个字段的查询字符串执行特定分析？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T20:21:14.300

是的，除非您在查询中指定分析器。query_string查询根据查询中的参数转换为 bool 或 dismax[查询](http://www.elasticsearch.org/guide/reference/query-dsl/query-string-query.html)`use_dis_max`。将为每个字段生成不同的查询，并使用`search_analyzer`与每个特定字段相关的查询来分析查询。

# javascript - 如何设置来自 JQuery Ajax 响应的内容？

> ID：12658295
> 
> 赞同：1
> 
> 时间：2012-09-30T03:05:06.427
> 
> 标签：javascript, jquery, html

> **可能重复：** [如何访问 $(this) inside ajax 成功回调函数](https://stackoverflow.com/questions/2643798/how-to-access-the-this-inside-ajax-success-callback-function)

我不明白为什么这不起作用：

```
 $("body").on("click", "a.linky", function () {
        var contentID = $(this).attr("contentID");

        var jsongo = 'id=' + contentID;
        $.ajax({
            type: 'POST',
            url: '/Controller/Action/',
            data: jsongo,
            success: function (msg) {
                $(this).html(msg);
                alert(msg);

            }
        });

    }); 
```

我能够显示警报，但我无法为单击的链接设置 html... 有什么方法可以从 JQuery 的角度从 Elements 中找到属性和方法？我发现来自 Jquery 文档的参考非常令人困惑。

从上面的代码设置链接内容的正确方法应该是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T03:09:32.370

尝试这样做

```
 $("body").on("click", "a.linky", function () {
        $this = $(this);
        var contentID = $(this).attr("contentID"); 
```

然后在你的ajax里面

```
 $this.html(msg); 
```

引用正确的元素

# 编辑：

正如评论中更多解释的那样，它正在发生，因为`this`在 ajax 调用内部没有引用触发事件的元素，而是引用了 ajax 设置。请参阅[ajax 文档](http://api.jquery.com/jQuery.ajax/)。

> 所有回调中的 this 引用是设置中传递给 $.ajax 的 context 选项中的对象；如果未指定上下文，则这是对 Ajax 设置本身的引用。

# c# - 找不到类型或名称空间

> ID：12658299
> 
> 赞同：-2
> 
> 时间：2012-09-30T03:06:20.567
> 
> 标签：c#, c#-4.0

我正在尝试使用 COPL 中的以下代码，但未找到错误类型或命名空间组合。任何人都可以帮我解决这个问题。我找不到程序集引用或关联的命名空间。

```
char[] inputSet = { 'A', 'B', 'C', 'D' };

Combinations<char> combinations = new Combinations<char>(inputSet, 3);
string cformat = "Combinations of {{A B C D}} choose 3: size = {0}";
Console.WriteLine(String.Format(cformat, combinations.Count));
foreach (IList<char> c in combinations)
{
  Console.WriteLine(String.Format("{{{0} {1} {2}}}", c[0], c[1], c[2]));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T03:22:29.153

代码从该站点复制/粘贴：http: [//www.codeproject.com/Articles/26050/Permutations-Combinations-and-Variations-using-CG](http://www.codeproject.com/Articles/26050/Permutations-Combinations-and-Variations-using-C-G)

它是如何在程序集中使用其中一个类的测试示例，还提供了代码（按照“下载”链接）。

为了使测试代码工作，您需要下载他们的代码，构建它，并将对生成的程序集的引用放入您自己的项目中。

# jframe - 如何使用 JButton 关闭 JFrame 并无限打开同一框架的新框架

> ID：12658302
> 
> 赞同：1
> 
> 时间：2012-09-30T03:06:47.507
> 
> 标签：jframe, jpanel, jbutton

我正在用 Java 为我的班级制作一个游戏，我希望它在游戏结束时，这个“开始新游戏”按钮关闭当前窗口并创建一个新窗口，这样我就可以无限玩游戏。问题是，它会打开一个新窗口，但不会关闭旧窗口。我无法访问内部类中的静态变量，因此无法使用 .setVisible(false);。有任何想法吗？我是新手，我真的很想学习。谢谢！

```
import java.awt.event.*;
import java.awt.*;
import javax.swing.*;
import java.util.*;
public class GameGUI extends JFrame
{
    private Container c, d;
    private JTextArea terminal;
    private JScrollPane scroll;
    private JTextField name11, str11, name22, str22;
    private JButton start, atk, swp, hl, www, reset;
    private Panel top, ava1, ava2, move;
    private GameMaster gm;
    private JLabel qqq;
    private int s1, s2;
    private String n1, n2;

    public GameGUI()
    {
        c = this.getContentPane();
        c.setLayout( new BorderLayout() );

        ava1 = new Panel();
        ava1.setLayout( new GridLayout ( 1, 4, 5, 0 ) );
        JLabel name1 = new JLabel( "Avatar 1 Name: ", JLabel.CENTER );
        name11 = new JTextField( 20 );
        JLabel str1 = new JLabel( "Avatar 1 Strength: ", JLabel.CENTER );
        str11 = new JTextField();
        ava1.add( name1 );
        ava1.add( name11 );
        ava1.add( str1 );
        ava1.add( str11 );

        ava2 = new Panel();
        ava2.setLayout( new GridLayout ( 1, 4, 5, 0 ) );
        JLabel name2 = new JLabel( "Avatar 2 Name: ", JLabel.CENTER );
        name22 = new JTextField( 20 );
        JLabel str2 = new JLabel( "Avatar 2 Strength: ", JLabel.CENTER );
        str22 = new JTextField();
        ava2.add( name2 );
        ava2.add( name22 );
        ava2.add( str2 );
        ava2.add( str22 );

        top = new Panel();
        top.setLayout( new GridLayout( 3, 1 ) );
        top.add( ava1 );
        top.add( ava2 );

        class reset implements ActionListener
        {
            public void actionPerformed( ActionEvent ae )
            {
                JFrame wwe = new GameGUI();
                wwe.setLocation( 400, 230 );
                wwe.setSize( 640, 120 );
                wwe.setResizable( true );
                wwe.setVisible( true );
                wwe.setDefaultCloseOperation( EXIT_ON_CLOSE );
                c.remove( reset );
            }
        }

        class action implements ActionListener
        {
            String input;
            public action( String s )
            {
                input = s;
            }

            public void actionPerformed( ActionEvent ae )
            {
                boolean win = false;
                if ( !gm.hasWinner() )
                {
                    terminal.append( gm.play( input ) );
                    terminal.setCaretPosition( terminal.getDocument().getLength() );
                }
                else
                {
                    terminal.append( gm.printGameReport() );
                    c.remove( move );
                    reset = new JButton( "Start a new battle" );
                    reset.addActionListener( new reset() );
                    setSize( 650, 480 );
                    reset.setVisible( true );
                    c.add( reset, "North" );
                }
            }
        }

        class game implements ActionListener
        {
            public void actionPerformed( ActionEvent ae )
            {
                boolean badInput = false;
                n1 = name11.getText();
                n2 = name22.getText();
                if ( n1.equals( "" ) || n2.equals( "" ))
                {
                    JOptionPane.showMessageDialog( null, "Fields lack input!" );
                    badInput = true;
                }
                try
                {
                    s1 = Integer.parseInt( str11.getText());
                    s2 = Integer.parseInt( str22.getText());
                }
                catch( NumberFormatException e )
                {
                    JOptionPane.showMessageDialog( null, "Strength should be an     integer!" );
                    badInput = true;
                }

                if(!badInput)
                {
                    Avatar x = new Avatar ( n1, s1 );
                    Avatar y = new Avatar ( n2, s2 );
                    gm = new GameMaster( x, y );

                    terminal = new JTextArea();
                    terminal.append("....-----======LET THE BATTLE BEGIN! ======----    -....\n\n" );
                    terminal.setEditable( false );
                    c.setVisible( false );
                    c.remove(top);
                    c.setVisible( true );

                    atk = new JButton( "Attack" );
                    atk.addActionListener( new action( "attack" ) );
                    swp = new JButton( "Swap" );
                    swp.addActionListener( new action( "swap" ) );
                    hl = new JButton( "Heal" );
                    hl.addActionListener( new action( "heal" ) );

                    move = new Panel();
                    move.setLayout( new GridLayout( 3, 1 ) );
                    move.add( atk );
                    move.add( swp );
                    move.add( hl );

                    c.add( move, "West" );

                    scroll = new JScrollPane( terminal );
                    c.add( scroll, "Center" );
                    setLocation( 400, 120 );
                    setSize( 640, 480 );
                    do
                    {
                        terminal.append ( gm.equip() );
                    }while ( !x.beltIsFull() || !y.beltIsFull() );
                }
            }
        }

        start = new JButton( "Commence Battle!" );
        start.addActionListener( new game() );
        top.add( start );
        c.add( top, "North" );
    }
} 
```

和我的主要方法：

```
import java.awt.event.*;
import java.awt.*;
import javax.swing.*;
import java.util.*;
public class GameApp
{
    public static void main ( String args[] )
    {
        JFrame f = new GameGUI();
        f.setLocation( 400, 230 );
        f.setSize( 640, 120 );
        f.setResizable( true );
        f.setVisible( true );`enter code here`
    }
} 
```

# c# - “WindowName”不包含“Item”的定义

> ID：12658310
> 
> 赞同：0
> 
> 时间：2012-09-30T03:08:41.910
> 
> 标签：c#, wpf

在 windows 演示基础中，我有一个名为 EquipmentList 的自定义 UIControl。当我在 wpf 中这样初始化它时：

```
<EquipmentList:EquipmentListControl Name="equipmentList" Margin="0,0,2,2"  /> 
```

然后我尝试像这样引用它：

```
InitializeComponent();
this.equipmentList.SetReferenceList(referenceDevices); 
```

我得到错误：

> 错误 1“设备”不包含“设备列表”的定义，并且找不到接受“FluentGCS.Windows.设备”类型的第一个参数的扩展方法“设备列表”（您是否缺少使用指令或程序集引用？）

Resharper 没有显示错误。有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T15:04:43.860

根据 OP 的要求添加评论作为答案。

尝试使用[`x:Name`](http://msdn.microsoft.com/en-us/library/ms752290.aspx)而不是`Name`查看已接受的答案[`SO question`](https://stackoverflow.com/a/593151/479512)

# sql - t-SQL 和 DATEDIFF 效率与精度

> ID：12658312
> 
> 赞同：0
> 
> 时间：2012-09-30T03:09:17.220
> 
> 标签：sql, sql-server, tsql, precision, datediff

我有一个 SQL Server 2008 表，可以这样说明：

```
CREATE TABLE tbl (dtIn DATETIME2, dtOut DATETIME2)
INSERT tbl VALUES
('9/12/2012 3:21:22 AM', '9/12/2012 3:32:15 AM'),
('9/12/2012 3:58:52 AM', '9/12/2012 4:00:47 AM'),
('9/12/2012 4:02:00 AM', '9/12/2012 4:03:26 AM'),
('9/12/2012 4:04:34 AM', '9/12/2012 4:17:03 AM'),
('9/12/2012 4:22:37 AM', '9/12/2012 4:24:18 AM'),
('9/12/2012 5:35:27 AM', '9/12/2012 5:36:26 AM'),
('9/12/2012 5:37:00 AM', '9/12/2012 5:38:08 AM'),
('9/12/2012 5:38:36 AM', '9/12/2012 5:39:40 AM'),
('9/12/2012 5:44:22 AM', '9/12/2012 9:40:21 PM'),
('9/12/2012 9:41:28 PM', '9/12/2012 9:44:19 PM'),
('9/12/2012 10:25:40 PM', '9/12/2012 10:30:25 PM'),
('9/12/2012 10:30:40 PM', '9/12/2012 10:34:06 PM'),
('9/12/2012 10:37:53 PM', '9/12/2012 10:40:12 PM'),
('9/12/2012 10:40:17 PM', '9/12/2012 11:59:59 PM')   --and so on 
```

然后我需要执行这样的查询（以分钟为单位计算持续时间）：

```
WITH ctx AS(
  SELECT datediff(minute, dtIn, dtOut) AS d FROM tbl
  )
SELECT SUM(d) FROM ctx 
```

上面查询的问题是我失去了精度。例如，对上表的查询将延迟 1 秒，对于更多的值，这会变得更糟，以至于我实际上会为大型数据集损失数十分钟。

我正在考虑用两种替代方法之一来替换它，但我不确定哪一种更有效？

一分法：

```
WITH ctx AS(
  SELECT datediff(second, dtIn, dtOut) / 60.0 AS d FROM tbl
  )
SELECT SUM(d) FROM ctx 
```

或两个与演员（以防止长达 68 年的 int 溢出）：

```
WITH ctx AS(
  SELECT datediff(second, dtIn, dtOut) AS d FROM tbl
  )
SELECT SUM(CAST(d AS BIGINT)) FROM ctx 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T03:20:40.393

在您的两个查询之间，确实没有太大区别。可以说整数数学比浮点数略快，因此如果可以接受 SECONDS 报告，您可能更喜欢后者。

# java - Java Swing GUI：使用布局移动组件

> ID：12658314
> 
> 赞同：1
> 
> 时间：2012-09-30T03:09:27.223
> 
> 标签：java, swing, user-interface, flowlayout

我正在为我正在制作的东西制作一个小测试 GUI。然而，面板的定位会出现问题。

```
public winInit() {
    super("Chatterbox - Login");

    try {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
    } catch(ClassNotFoundException e) {
    } catch (InstantiationException e) {
    } catch (IllegalAccessException e) {
    } catch (UnsupportedLookAndFeelException e) {
    }

    setSize(300,135);

    pn1 = new JPanel();
    pn2 = new JPanel();
    pn3 = new JPanel();

    l1 = new JLabel("Username");
    l2 = new JLabel("Password");
    l3 = new JLabel("Random text here");
    l4 = new JLabel("Server Address");
    l5 = new JLabel("No address set.");

    i1 = new JTextField(10);

    p1 = new JPasswordField(10);

    b1 = new JButton("Connect");
    b2 = new JButton("Register");
    b3 = new JButton("Set IP");

    l4.setBounds(10, 12, getDim(l4).width, getDim(l4).height);
    l1.setBounds(10, 35, getDim(l1).width, getDim(l1).height);
    l2.setBounds(10, 60, getDim(l2).width, getDim(l2).height);
    l3.setBounds(10, 85, getDim(l3).width, getDim(l3).height);
    l5.setBounds(l4.getBounds().width + 14, 12, l5.getPreferredSize().width, l5.getPreferredSize().height);

    l5.setForeground(Color.gray);

    i1.setBounds(getDim(l1).width + 15, 35, getDim(i1).width, getDim(i1).height);
    p1.setBounds(getDim(l1).width + 15, 60, getDim(p1).width, getDim(p1).height);

    b1.setBounds(getDim(l1).width + getDim(i1).width + 23, 34, getDim(b2).width, getDim(b1).height - 5);
    b2.setBounds(getDim(l1).width + getDim(i1).width + 23, 60, getDim(b2).width, getDim(b2).height - 5);
    b3.setBounds(getDim(l1).width + getDim(i1).width + 23, 10, etDim(b2).width, getDim(b3).height - 5);

    b1.addActionListener(clickButton);
    b2.addActionListener(clickButton);
    b3.addActionListener(clickButton);

    pn1.setLayout(new FlowLayout(FlowLayout.RIGHT));
    pn2.setLayout(new FlowLayout(FlowLayout.RIGHT));

    pn1.add(l1);
    pn1.add(i1);
    pn1.add(b1);

    pn2.add(l2);
    pn2.add(p1);
    pn2.add(b2);

    add(pn1);
    add(pn2);

} 
```

我正在尝试使用 FlowLayout 以所需的方式定位面板。我会在添加时使用 BorderLayout，但是当我只使用彼此最接近的方向时，垂直间距太远了。

此代码的输出是创建一个窗口 300,150，将两个面板中的任何内容放在完全相同的空间中。

是的，我意识到 setBounds() 那里有无用的代码，但这只是我在使用绝对定位，这对我也不起作用。

编辑：

问题解决了……我想。我现在很高兴使用 MiGLayout，但我也看到了 GridBagLayout 所提供的功能。从你们的一些例子来看，这似乎与我想要达到的目标非常相似。

谢谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T03:12:35.903

如果你必须做绝对定位（除了动画我不推荐这个），那么布局需要设置为`null`，而不是`FlowLayout`.

对于数据采集面板，我建议使用布局管理器的智能组合，包括考虑一些非标准布局，例如 MiGLayout。

编辑澄清： MiGLayout 可能比 GridBagLayout 更容易使用，但如果您熟悉 GridBagLayout，它并不难使用，并且不需要下载，因为它是核心 Java 库的一部分。我自己，我可能会使用嵌套的 JPanel，它使用组合的布局，也许 BorderLayout 用于整个 GUI 和 GridBagLayout 用于数据采集面板，具有 JLabel / JTextField 组合行的那个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T06:22:48.527

通过阅读代码，您似乎正在寻找一个看起来像这样的表单......

![像这样](../Images/4dca0bc55094a2ac3b4a22dbd1c4c8e2.png)

我通过使用得到了这个`GridBagLayout`

```
l1 = new javax.swing.JLabel();
l2 = new javax.swing.JLabel();
l3 = new javax.swing.JLabel();
l4 = new javax.swing.JLabel();
l5 = new javax.swing.JLabel();
i1 = new javax.swing.JTextField();
p1 = new javax.swing.JPasswordField();
b1 = new javax.swing.JButton();
b2 = new javax.swing.JButton();
b3 = new javax.swing.JButton();

setLayout(new java.awt.GridBagLayout());

l4.setText("Server Address");
gbc = new GridBagConstraints();
gbc.gridx = 0;
gbc.gridy = 0;
gbc.anchor = GridBagConstraints.LINE_START;
gbc.insets = new java.awt.Insets(2, 2, 2, 2);
add(l4, gbc);

l1.setText("Username");
gbc.gridy = 1;
add(l1, gbc);

l2.setText("Password");
gbc.gridy = 2;
add(l2, gbc);

l3.setText("Random text here");
gbc.gridy = 3;
add(l3, gbc);

l5.setText("No address set");
gbc.gridx = 1;
gbc.gridy = 0;
add(l5, gbc);

i1.setColumns(12);
gbc.gridy = 1;
add(i1, gbc);

p1.setColumns(12);
gbc.gridy = 2;
add(p1, gbc);

b3.setText("Set IP");
gbc.gridx = 2;
gbc.gridy = 0;
add(b3, gbc);

b1.setText("Connect");
gbc.gridx = 2;
gbc.gridy = 1;
add(b1, gbc);

b2.setText("Register");
gbc.gridy = 2;
add(b2, gbc); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-30T04:12:08.367

我不知道你到底想要什么，但这应该符合你的目的。

```
import java.awt.BorderLayout;
public class loginBox extends JDialog {

    private final JPanel contentPanel = new JPanel();
    private JTextField txtUserName;
    private JPasswordField passwordField;
    private JTextField textField;

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        try {
            loginBox dialog = new loginBox();
            dialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
            dialog.setVisible(true);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Create the dialog.
     */
    public loginBox() {
        setBounds(100, 100, 450, 300);
        getContentPane().setLayout(new BorderLayout());
        contentPanel.setBorder(new TitledBorder(null, "Log In", TitledBorder.LEADING, TitledBorder.TOP, null, null));
        getContentPane().add(contentPanel, BorderLayout.CENTER);
        contentPanel.setLayout(new BoxLayout(contentPanel, BoxLayout.Y_AXIS));
        {
            JPanel panel = new JPanel();
            contentPanel.add(panel);
            panel.setLayout(new BoxLayout(panel, BoxLayout.X_AXIS));
            {
                JLabel lblChatterBoxlogin = new JLabel("Chatter Box-Login");
                panel.add(lblChatterBoxlogin);
            }
        }
        {
            JPanel formPanel = new JPanel();
            contentPanel.add(formPanel);
            GridBagLayout gbl_formPanel = new GridBagLayout();
            gbl_formPanel.columnWidths = new int[]{52, 0, 0, 0};
            gbl_formPanel.rowHeights = new int[]{14, 0, 0, 0, 0, 0};
            gbl_formPanel.columnWeights = new double[]{0.0, 1.0, 1.0, Double.MIN_VALUE};
            gbl_formPanel.rowWeights = new double[]{0.0, 0.0, 0.0, 0.0, 0.0, Double.MIN_VALUE};
            formPanel.setLayout(gbl_formPanel);
            {
                JLabel lblUserName = new JLabel("User Name");
                GridBagConstraints gbc_lblUserName = new GridBagConstraints();
                gbc_lblUserName.anchor = GridBagConstraints.WEST;
                gbc_lblUserName.insets = new Insets(0, 0, 5, 5);
                gbc_lblUserName.gridx = 0;
                gbc_lblUserName.gridy = 0;
                formPanel.add(lblUserName, gbc_lblUserName);
            }
            {
                txtUserName = new JTextField();
                GridBagConstraints gbc_txtUserName = new GridBagConstraints();
                gbc_txtUserName.insets = new Insets(0, 0, 5, 5);
                gbc_txtUserName.fill = GridBagConstraints.HORIZONTAL;
                gbc_txtUserName.gridx = 1;
                gbc_txtUserName.gridy = 0;
                formPanel.add(txtUserName, gbc_txtUserName);
                txtUserName.setColumns(10);
            }
            {
                JLabel lblPassword = new JLabel("Password");
                GridBagConstraints gbc_lblPassword = new GridBagConstraints();
                gbc_lblPassword.anchor = GridBagConstraints.WEST;
                gbc_lblPassword.insets = new Insets(0, 0, 5, 5);
                gbc_lblPassword.gridx = 0;
                gbc_lblPassword.gridy = 1;
                formPanel.add(lblPassword, gbc_lblPassword);
            }
            {
                passwordField = new JPasswordField();
                GridBagConstraints gbc_passwordField = new GridBagConstraints();
                gbc_passwordField.insets = new Insets(0, 0, 5, 5);
                gbc_passwordField.fill = GridBagConstraints.HORIZONTAL;
                gbc_passwordField.gridx = 1;
                gbc_passwordField.gridy = 1;
                formPanel.add(passwordField, gbc_passwordField);
            }
            {
                JLabel lblServer = new JLabel("Server Address");
                GridBagConstraints gbc_lblServer = new GridBagConstraints();
                gbc_lblServer.anchor = GridBagConstraints.ABOVE_BASELINE_TRAILING;
                gbc_lblServer.insets = new Insets(0, 0, 5, 5);
                gbc_lblServer.gridx = 0;
                gbc_lblServer.gridy = 2;
                formPanel.add(lblServer, gbc_lblServer);
            }
            {
                textField = new JTextField();
                GridBagConstraints gbc_textField = new GridBagConstraints();
                gbc_textField.insets = new Insets(0, 0, 5, 5);
                gbc_textField.fill = GridBagConstraints.HORIZONTAL;
                gbc_textField.gridx = 1;
                gbc_textField.gridy = 2;
                formPanel.add(textField, gbc_textField);
                textField.setColumns(10);
            }
            {
                JLabel lblNoAddressSet = new JLabel("No Address Set");
                GridBagConstraints gbc_lblNoAddressSet = new GridBagConstraints();
                gbc_lblNoAddressSet.insets = new Insets(0, 0, 5, 0);
                gbc_lblNoAddressSet.gridx = 2;
                gbc_lblNoAddressSet.gridy = 2;
                formPanel.add(lblNoAddressSet, gbc_lblNoAddressSet);
            }
            {
                JLabel lblRandomTextHere = new JLabel("Random Text Here");
                GridBagConstraints gbc_lblRandomTextHere = new GridBagConstraints();
                gbc_lblRandomTextHere.insets = new Insets(0, 0, 5, 5);
                gbc_lblRandomTextHere.gridx = 1;
                gbc_lblRandomTextHere.gridy = 3;
                formPanel.add(lblRandomTextHere, gbc_lblRandomTextHere);
            }
        }
        {
            JPanel buttonPane = new JPanel();
            buttonPane.setLayout(new FlowLayout(FlowLayout.RIGHT));
            getContentPane().add(buttonPane, BorderLayout.SOUTH);
            {
                JButton okButton = new JButton("Connect");
                okButton.setActionCommand("OK");
                buttonPane.add(okButton);
                getRootPane().setDefaultButton(okButton);
            }
            {
                JButton btnNewButton = new JButton("Register");
                buttonPane.add(btnNewButton);
            }
            {
                JButton btnNewButton_1 = new JButton("Set IP");
                buttonPane.add(btnNewButton_1);
            }
            {
                JButton cancelButton = new JButton("Cancel");
                cancelButton.setActionCommand("Cancel");
                buttonPane.add(cancelButton);
            }
        }
    }

} 
```

# php - 向 db 添加新行，但没有 /n

> ID：12658318
> 
> 赞同：0
> 
> 时间：2012-09-30T03:09:43.190
> 
> 标签：php, database, html-entities

简单的例子

```
$text = 'First line
second line'; 
```

我希望文本有一个新行，但在 db 中，不存储`/n`

我尝试

`htmlentities()`，`htmlspecialchars()`我也试试这个

```
$text = str_replace("\n", "&#60;&#98;&#114;&#47;&#62",$text); 
```

# css - 对于公认的 CSS3 属性，我们还应该使用 -webkit- 和 -moz- 吗？

> ID：12658321
> 
> 赞同：5
> 
> 时间：2012-09-30T03:11:23.470
> 
> 标签：css, vendor-prefix

我正在尝试清理 CSS 文件，我想知道现在是否可以安全地删除供应商特定的属性，它们是否已经标准化（或至少是半标准化的）？

例如我还应该使用

```
-webkit-border-radius
-moz-border-radius
border-radius 
```

还是简单地选择更好

```
border-radius 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T06:45:56.580

这取决于属性，但大多数答案是您也应该继续使用带有浏览器前缀的版本。它取决于实现状态和各种版本浏览器的实际使用情况，而不是标准化状态本身。

查看[MDN 对属性的描述，](https://developer.mozilla.org/en-US/docs/CSS/CSS_Reference)*浏览器兼容性*部分。虽然不是权威的，也不是在所有情况下都绝对是最新的，但它们是一个很好的参考。例如，[`border-radius`描述](https://developer.mozilla.org/en-US/docs/CSS/border-radius)说 Firefox 4.0 和更新版本、Chrome 4.0 和 Safari 5.0 支持标准的无前缀版本。旧版本现在的使用率非常低。

另一方面，不应清理现有代码。除了冒着在编辑代码中犯一些愚蠢错误的风险之外，你什么也得不到。即使当前版本的 Firefox 忽略了前缀属性名称，但这并不妨碍使用它的页面工作，只要它们也使用标准名称设置属性。

相反，例如，非常有用的`hyphens`属性目前除了浏览器前缀之外*不支持。*再举一个例子，`border-image`虽然 Firefox 15 和更新版本以及 Opera 也支持标准名称，但大多数情况下仅支持浏览器前缀。

仍然可以使用旧版本的浏览器是有原因的。一个原因是某些在某些环境中很重要的应用程序可能无法在较新版本的浏览器上运行。（或者当我遇到一些非常旧的版本在使用时，我被告知。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T03:55:41.773

是的，我会说坚持下去。除非你确定 X 浏览器已经标准化。根据 w3schools 的说法，所有主流浏览器都支持`border-radius`，但它不是提供此类信息的可信站点。

为什么不测试一下？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T03:14:30.227

使用前者以获得向后兼容性支持。

```
-webkit-border-radius
-moz-border-radius
border-radius 
```

# java - 练习使用二分查找将数据插入数组，问题很少

> ID：12658324
> 
> 赞同：1
> 
> 时间：2012-09-30T03:11:50.553
> 
> 标签：java, arrays, insert, binary-search

我正在尝试创建一种方法，该方法以二进制形式插入然后对元素进行排序。

我遇到的问题是我的代码没有正确插入数据，这意味着输出似乎根本没有顺序。

该列表没有组织，数据按插入的顺序添加。

现在，有两个问题，我在这里做错了什么？以及如何解决这个问题？

```
public void insertBinarySearch(long value) // put element into array
{       
    int j = 0;
    int lower = 0;
    int upper = elems-1;
    int cur = 0;

    while (cur < elems)
    {
        cur = (lower + upper ) / 2;

        if(a[cur] < value)
        {
            j = cur + 1;
            break;
        }
        else if(a[cur] > value)
        {
            j = cur;
            break;
        }
        else
        {
            if(a[cur] < value)
                lower = cur + 1;
            else
                upper = cur - 1;
        }
    }

    for(int k = elems; k > j; k--)
        a[k] = a[k-1];

    a[j] = value;

    elems++;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T03:25:09.667

```
while (lower <= upper)
{
    curIn = (lower + upper ) / 2;

        if(a[curIn] < value)
            lower = cur + 1;
        else if(a[curIn] > value)
            upper = cur - 1;
        else if (a[curIn] == value)
            break;
}
if(a[curIn] <= value)
    j = curIn + 1;
else j = curIn; 
```

应该管用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-12T01:15:30.347

伙计，你几乎明白了，只需调试代码并找到一些缺失的语句（if's）。如果你发现那些缺失的语句，你的代码看起来比我的好。别看我的，你就在那里，很近。

让我知道任何错误和差异等。快乐编码！

```
public class Insertion {
    private int[] a;
    int n;
    int c;

    public Insertion()
    {
        a = new int[10];
        n=0;
    }

    int find(int key)
    {
        int lowerbound = 0;
        int upperbound = n-1;

        while(true)
        {
            c = (lowerbound + upperbound)/2;
            if(n==0)
                return 0;
            if(lowerbound>=upperbound)
            {
                if(a[c]<key)
                    return c++;
                else
                    return c;
            }
            if(a[c]>key && a[c-1]<key)
                return c;
            else if (a[c]<key && a[c+1]>key)
                return c++;
            else
            {
                if(a[c]>key)
                    upperbound = c-1;
                else
                    lowerbound = c+1;
            }
        }
    }

    void insert(int key)
    {
       find(key);
       for(int k=n;k>c;k--)
       {
           a[k]=a[k-1];
       }
       a[c]=key;
       n++;
    }
    void display()
    {
        for(int i=0;i<10;i++)
        {
            System.out.println(a[i]);
        }
    }

    public static void main(String[] args)
    {
        Insertion i=new Insertion();
        i.insert(56);
        i.insert(1);
        i.insert(78);
        i.insert(3);
        i.insert(4);
        i.insert(200);
        i.insert(6);
        i.insert(7);
        i.insert(1000);
        i.insert(9);
        i.display();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T03:32:57.537

如果您尝试将一个项目插入到未排序的列表中，那么如果您之后不直接对其进行排序，您就不能期望该列表会被排序。

二进制搜索只能用于排序列表。您的结果没有其他意义：毕竟，如果您正在搜索一个元素 - 例如让我们使用 8 - 您如何知道一个项目是否属于 8 之前或之后？

```
[ 1 2 3 4 5 6 7 8 9 10 11 ] 
```

请注意，如果我找到 8，我知道它之后的所有内容都大于 8，而之前的所有内容都小于 8。但是这个列表呢？

```
[ 1 4 11 9 8 6 7 2 5 3 10 ] 
```

哎呀！现在，看 8，你可以看到 8 的位置不再与小于或大于 8 的项目有任何关系。试图在这个列表中用二分搜索找到一个元素会给你错误的信息，是否它会找到您正在寻找的项目。

要使其正常工作，请确保列表始终排序（如果您*始终*将项目插入列表中的正确位置，则应该是这种情况），或者在插入新元素之前对其进行排序。二进制搜索将为您服务就好了。

# php - 从 Android 应用程序中的 php 文件获取 json

> ID：12658325
> 
> 赞同：1
> 
> 时间：2012-09-30T03:11:56.397
> 
> 标签：php, android, json, cordova, sencha-touch-2

我正在构建一个 Sencha touch 2 应用程序。

我有一个从本地 php 文件获取 json 数据的商店。

当我在谷歌浏览器（本地主机）上运行它时，这工作正常。列表会填充正确的数据。但是，当我将应用程序部署到 android 模拟器时，列表不会被填充，并且 LagCat 显示以下消息

0[WARN][Ext.data.reader.Reader#process] 无法解析服务器返回的 JSON：错误：您正在尝试解码无效的 JSON 字符串：`<?php //Contents of the php file ?>`

我的店铺：

```
Ext.define('app.store.Info', {
    extend: 'Ext.data.Store',
    requires: [
    ],
    config: {
        model: 'app.model.info',
        autoLoad: true,
        proxy: {
            type: 'ajax',
            url: 'getinfo.php',
            reader: {
                type: 'json'
            }
        }
    }
}); 
```

我的 php 文件使用 json_encode 将数组转换为 json。

我知道 php 文件是正确的，因为它在我在 Chrome 中测试时有效。我想知道我是否必须做一些特别的事情才能在 Android 应用程序中运行 php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T06:55:22.000

我有两个建议

1.  创建一个 Web 服务以从 Android 捕获 php 中的 JSON

2.  创建一个 httpGet 对包含 json 文件的链接进行硬编码并通过 Android 对其进行解码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T07:25:49.940

您不能将 PHP 文件放入 Android 并期望 JSON 输出。因为 PHP 解释器不能在 Android 内部工作。但是，您可以在您的计算机 (Apache) 中部署 PHP 文件并从 Android 引用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T06:51:33.080

几天前我遇到了类似的问题。就我而言，问题在于我在代码中解析 JSON 响应字符串的方式。你是如何解析它的？你是否在 Log cat 中打印了结果字符串并检查了任何错误代码，或者在开头附加了一些无效字符串。？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T03:19:47.770

您可以从网络上的任何地方获取 json。试试这个教程。

[http://www.vogella.com/articles/AndroidJSON/article.html](http://www.vogella.com/articles/AndroidJSON/article.html)

# java - NetBeans / JavaFX 构建：Debian 安装大小

> ID：12658336
> 
> 赞同：3
> 
> 时间：2012-09-30T03:14:06.597
> 
> 标签：java, netbeans, debian, javafx-2, ubuntu-10.04

每当我使用 NetBeans 7.2 构建 .deb 包然后安装它时，我都会收到以下消息：

```
The package is of bad quality

The installation of a package which violates the quality standards isn't allowed.
This could cause serious problems on your computer.  Please contact the person or
organisation who provided this package file and include the details beneath.

Details V
The package doesn't provide a valid Installed-Size control field.  See Debian Policy 5.6.20

[OK]  [Ignore and install] 
```

单击`[Ignore and install]`按钮工作正常，应用程序安装，运行/工作正常。猜猜我只需要以`Installed-Size`某种方式通过 NetBeans 设置设置。惊讶于它在为我构建包时不仅仅自动执行此操作。（我正在为 x86/32 位、Ubuntu 10.04 LTS--w/最新更新、Java JDK 7 / JavaFX 2.2 应用程序构建，如果重要的话。）

我在 build.xml 中使用以下目标：

```
<target name="-post-jfx-deploy">
    <fx:deploy width="${javafx.run.width}" height="${javafx.run.height}"
               nativeBundles="all"
               outdir="${basedir}/${dist.dir}" outfile="${application.title}">
        <fx:application name="${application.title}"
                        mainClass="${javafx.main.class}"/>
        <fx:resources>
            <fx:fileset dir="${basedir}/${dist.dir}" includes="*.jar"/>
        </fx:resources>
        <fx:info title="${application.title}" vendor="${application.vendor}"/>
    </fx:deploy>
</target> 
```

谁能告诉我需要在 NetBeans (7.2) 中更改/设置哪些设置才能解决此问题（即，如何在使用 NetBeans 构建时设置 Installed-Size 控制字段）？我一直在打猎，假设有人在我之前遇到过这个问题，但没有运气。

# extjs - 项目上的 Ext.form.field.ComboBox 工具提示

> ID：12658337
> 
> 赞同：2
> 
> 时间：2012-09-30T03:14:16.997
> 
> 标签：extjs, extjs4, extjs4.1

下面是组合代码：

```
Ext.define('Grade', {
    extend: 'Ext.data.Model',
    fields: [
        { name: 'id', type: 'int' },
        { name: 'name', type: 'string' }
    ]
});

Ext.define('GradeCombo', {
    extend: 'Ext.form.field.ComboBox',
    alias: 'widget.gradecombo',
    queryMode: 'local',
    valueField: 'id',
    displayField: 'name',
    store: {
        model: 'Grade',
        data: [
            { id: 1, name: 'A' },
            { id: 2, name: 'B' },
            { id: 3, name: 'C' }
        ]
    }
}); 
```

这是组合的布局代码：

```
Ext.onReady(function(){

Ext.widget('panel', {
    renderTo: 'pan1',
    title: 'Basic Panel',
    width:300,
    height:100,
    defaults: {
        bodyPadding: 10,
        border: false,
        xtype: 'panel',
        layout: 'anchor'
    },
    layout: 'hbox',
    items: [{
                  fieldLabel: 'Grade',
                  xtype: 'gradecombo',
                  width: 234
           }]            
});  
}); 
```

当用户将鼠标悬停在组合项目的下拉菜单上时，我想显示每个等级的描述的工具提示消息。这是描述商店：

```
var store = ['Marks between 70 and 80', 'Marks between 60 and 70', 'Marks between 50 and 60']; 
```

请让我知道如何实现这一目标。

问候，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T23:01:34.260

我不相信默认情况下可以设置工具提示属性，但是您可以通过覆盖组合框 listConfig 属性的 getInnerTpl 方法来完全自定义下拉列表中显示的内容，如下所示：

```
 listConfig: {
            loadingText: 'Searching...',
            emptyText: 'No matching posts found.',
            // Custom rendering template for each item
            getInnerTpl: function() {
                return '<a class="search-item" href="http://www.sencha.com/forum/showthread.php?t={topicId}&p={id}">' +
                    '<h3><span>{[Ext.Date.format(values.lastPost, "M j, Y")]}<br />by {author}</span>{title}</h3>' +
                    '{excerpt}' +
                '</a>';
            }
        } 
```

完整代码示例： [http ://docs.sencha.com/ext-js/4-1/extjs-build/examples/form/forum-search.js](http://docs.sencha.com/ext-js/4-1/extjs-build/examples/form/forum-search.js)

And most importantly the tip itself. Add the following html attribute to any element you are creating in your template : data-qtip="This is a quick tip from markup!" You can further control your tooltip by following these guidelines: [http://docs.sencha.com/ext-js/4-1/#!/api/Ext.tip.QuickTipManager](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.tip.QuickTipManager)

# clojure - 如何在clojure中合并两个序列？

> ID：12658341
> 
> 赞同：31
> 
> 时间：2012-09-30T03:15:15.767
> 
> 标签：clojure, sequences

在 Clojure 中合并（或检索联合）两个列表（或序列）的惯用方法是什么？

```
(merge l1 l2) 
```

似乎不是解决方案：

```
a=> (merge '(1 2 3) '(2 3 4))
((2 3 4) 1 2 3) 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-30T06:11:45.513

我认为 andih 的解决方案效果很好。这是另一种方式，因为嘿为什么不呢。它使用[`concat`](http://clojuredocs.org/clojure_core/clojure.core/concat)和 [`distinct`](http://clojuredocs.org/clojure_core/clojure.core/distinct)：

```
user> (distinct (concat '(1 2 3) '(2 3 4)))
=> (1 2 3 4) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-30T21:26:35.427

If what you want is actually distinct unsorted data (sets), you should be using Clojure's set data structure instead of vectors or lists. And as andih suggested indirectly, there is a core library for set operations: [http://clojure.github.com/clojure/clojure.set-api.html](http://clojure.github.com/clojure/clojure.set-api.html)

```
(require '[clojure.set :refer [union]])

(union #{1 2 3} #{3 4 5})
=> #{1 2 3 4 5} 
```

If sets are for whatever reason not what you want, then read on. Careful with `concat` when you have a significant amount of data in your sequences, and consider using `into` which is much better optimized as a vector merging algorithm. I don't know why concat is not implemented using into (or better yet-- why does concat even exist? BTW while into is significantly faster than concat, it is still way way slower than conj. Bagwell's RRB trees, compatible with both Clojure and Scala, will solve this problem, but are not yet implemented for Clojure).

To rephrase Omri's non-set solution in terms of 'into':

```
(distinct (into [1 2 3] [3 4 5]))
=> (1 2 3 4 5) 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-09-30T04:01:00.707

获得两个列表并集的一种方法是使用`union`

```
Clojure> (into #{} (clojure.set/union '(1,2,3) '(3,4,5)))
#{1 2 3 4 5} 
```

或者如果你想获得一份清单

```
(into '() (into #{} (clojure.set/union '(1,2,3) '(3,4,5))))
(5 4 3 2 1) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-03-18T05:58:48.967

如果您不介意重复，可以尝试[concat](https://clojuredocs.org/clojure.core/concat)：

```
(concat '(1 2 3 ) '(4 5 6 1) '(2 3)) 
;;==> (1 2 3 4 5 6 1 2 3) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-28T09:45:16.830

一种选择是[flatten](https://clojuredocs.org/clojure.core/flatten)：

```
(def colls '((1 2 3) (2 3 4)))
(flatten colls) ;; => (1 2 3 2 3 4)
(distinct (flatten colls)) ;; => (1 2 3 4) 
```

需要注意的一件事是，它会使深度嵌套的集合变平：

```
(flatten [[1 2 [3 4 5]] [1 [2 [3 4]]]]) ;; => (1 2 3 4 5 1 2 3 4) 
```

但适用于地图：

```
(flatten [[{} {} {}] [{} {} {}]]) ;; => ({} {} {} {} {} {}) 
```

# python - 在 Python 中从 txt 文件创建新的 sqlite 数据库表

> ID：12658343
> 
> 赞同：1
> 
> 时间：2012-09-30T03:16:04.877
> 
> 标签：python, sqlite

我正在尝试在 Python 脚本中的 SQLite3（来自 txt 文件的数据）中创建一个新表。我正在创建一个字符串以用作将提供列标题的 SQL 命令。但是，当我将此字符串的变量插入 cursor.execute() 时，会出现语法错误。问题是，如果我 print() 然后将其复制并粘贴到 cursor.execute 中，脚本就可以工作。但是，我想对各种 txt 文件使用相同的脚本，因此它需要适应文件中的列标题。

```
def CreateTable (daDB, daFile, daTableName): #Creates a table with column headers as   first row of file
    con=sqlite3.connect(daDB)
    curs=con.cursor()
    LinesList=FileReadIn(daFile)
    Headers=LinesList[0]
    HeadersString=""
    for word in Headers:
        HeadersString += word + ", "
    DaHeadersString=HeadersString[0:-2]
    daQuery="'create table " + daTableName + " (" + DaHeadersString + ")'"
    print (daQuery)
    curs.execute(daQuery)
    con.commit()
    con.close() 
```

这会产生：

```
 CreateTableFromText ('animalsheaderstest.sqltdb','animals.txt','animalstable')
'create table animalstable (Owner, Name, Species)'

Traceback (most recent call last):
  File "<pyshell#108>", line 1, in <module>
   CreateTable ('animalsheaderstest.sqltdb','animals.txt','animalstable')
  File     "/Users/zeintawil/Zeins_Files/School/Senior/OPIM_399/python/practice/ReadInPrac.py", line     62, in CreateTable
   curs.execute(daQuery)
OperationalError: near "'create table animalstable (Owner, Name, Species)'": syntax error 
```

但是，当我将 print(daQuery) 的值直接复制并粘贴到代码中时，它可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T03:19:45.300

看起来您同时使用了单引号和双引号。试试这样：

```
daQuery="create table " + daTableName + " (" + DaHeadersString + ")" 
```

# ruby-on-rails - 什么是 Rails 干燥验证控制器模式的方法：id 用于有效对象（否则重定向到错误页面）

> ID：12658345
> 
> 赞同：1
> 
> 时间：2012-09-30T03:16:23.393
> 
> 标签：ruby-on-rails, dry

我的一个控制器有近 100 种方法（例如路由），如果 id 参数无效，几乎每个控制器都从相同的代码开始重定向到错误页面，然后类似的检查该 id 的用户是否不属于用户帐户：

```
def something
  @foo = Foo.find_by_guid(params[:id])
  unless @foo
    @msg ||= { :title => 'No such page!',
      :desc => "There is no such page!" }
    render :action => "error" and return
  end
  unless @foo.owner_id == current_user.id
   @msg ||= { :title => 'Really?',
      :desc => "There is no such page." }
    render :action => "error" and return
  end 
```

考虑到代码正在渲染……然后返回，那么干掉那种页面 id 和所有者 id 验证的最佳方法是什么？

在这一点上我不想做的是将它卸载到像 CanCan 这样的黑盒角色和权限库......我的目标只是让应用内代码尽可能干净地处理这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T03:35:04.900

听起来你需要一个前置过滤器：

```
class MegaController < ActionController::Base
    before_filter :grab_and_check_foo
    #...
private
    def grab_and_check_foo
        @foo = Foo.find_by_guid(params[:id])
        if !@foo
            #... render some error stuff
        end
        if @foo.owner_id != current_user.id
            #... render some other error stuff
        end
    end
end 
```

前置[过滤器可以通过重定向或渲染某些东西来突破通常的控制器进程](http://guides.rubyonrails.org/action_controller_overview.html#filters)，因此这不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T03:34:50.450

您可以有一个前置过滤器来检查所有权并根据检查呈现或重定向

# firefox - 延长请求模块的超时时间

> ID：12658347
> 
> 赞同：2
> 
> 时间：2012-09-30T03:17:47.590
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

有什么方法可以延长 FireFox 附加组件中 Request 对象的默认超时时间？在某些页面上，我们的扩展中的跨站点请求似乎正在超时，并且没有与请求模块关联的已发布选项允许延长超时。xhr 对象需要扩展权限，因此如果可能，我们更愿意独占使用 Request 对象。

另外，默认的请求超时设置是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T23:43:52.503

使用请求模块，无法更改默认超时。Request 使用 xhr 模块，但不授予对 timeout 属性的访问权限。

您可以在[XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#Properties)文档中看到该`timeout`属性默认为零，因此它不应超时，但正如 Wladimir 指出的那样，您也会遇到不同的网络级别超时。

如果您想发出拉取请求，我相信 SDK 团队会考虑在请求模块中接受超时参数。例如

```
 get timeout() { return request(this).timeout; },
  set timeout(value) { request(this).timeout = validateSingleOption('timeout', value); }, 
```

*（请注意，您不能扩展 Request 类，因为它使用命名空间）*

我认为对 Request 模块的这种更改不会真正解决您的网络超时问题，因为它似乎在另一个级别超时。

# c - 更改选项卡时如何防止 Ubuntu 11.10 和带有终端的 Kate 编辑器更改命令行？

> ID：12658350
> 
> 赞同：1
> 
> 时间：2012-09-30T03:18:59.033
> 
> 标签：c, ubuntu, tabs, ubuntu-11.10, kate

我在 Ubuntu 11.10 中使用 Kate 编辑器对 C 进行编程。它工作得很好，但是当我在 Kate 中更改选项卡时，终端行会更改为我单击的选项卡的文件路径。

通常这没什么大不了的（除了烦人地向我的终端添加额外的文本）但是如果我目前正在运行一个 C 程序，它显然会在命令行输入，这不是很酷。

```
Example terminal window for my C program (its at a menu):

1) select opt 1
2) select opt 2

Enter choice: (here it waits for prompt from user) 
```

现在当我在 Kate 中点击一个选项卡时，它想在该选项卡中放入文件的 cd / 路径，例如：cd /home/user/os/files

当然，由于我的终端正在等待用户的提示，因此它会收到该命令..不好。

也许没有修复，但也许有人知道？显然我可以在切换标签之前选择不切换标签或结束程序......

> 注意：我可能错误地将它放在 StackOverflow 下，这更像是一个编程区域 - 所以尽管在这里重新发布可能是最好的（我不确定如何链接问题，但会将超链接粘贴到该帖子 - 我不想违反任何堆栈溢出/超级用户违规）欢迎提出合并它们的建议，或者我是否应该删除一个？

[超级用户帖子](https://superuser.com/questions/481362/how-to-keep-ubuntu-11-10-and-kate-editor-w-terminal-from-changing-command-line-w)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:11:07.883

[来自https://superuser.com/q/481362/127982](https://superuser.com/q/481362/127982)的 Pedro Romano ：

Kate 配置下`Application > Terminal > Terminal Settings`有一个**Automatically synchronize the terminal with the current document when possible**（这是在 Ubuntu 12.10 上，所以你可能没有它或略有不同）。

# php - Ajax 页面加载，刷新页面时消失

> ID：12658352
> 
> 赞同：1
> 
> 时间：2012-09-30T03:19:13.467
> 
> 标签：php, javascript, ajax

**我现在正在使用 Ajax，我有这段代码：**

```
<script type="text/javascript">
function load(file,container)
       {
var xmlhttp, newhash = '';

if (window.XMLHttpRequest){  xmlhttp=new XMLHttpRequest();}
if (window.ActiveXObject) {  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}

xmlhttp.onreadystatechange= function (){
      if(xmlhttp.readyState==4 && xmlhttp.status==200)
      {  document.getElementById(container).innerHTML=xmlhttp.responseText;
    } else {
        document.getElementById(container).innerHTML='<div style="padding:10px">       <p>Please upgrade your web browser to support modern technology.</p></div>';
        }
    }
xmlhttp.open("GET",file,true);
xmlhttp.send(null);
}
</script>
<script type="text/javascript" src="jquery.js"></script>
<ul>
<li><a href="#" onclick="load('home.php','ajax');return false;">Home</a><li/>
</ul>
       <div id="ajax">

</div> 
```

抱歉，这是我的第一篇文章，但我真正担心的是，页面可以加载，但是当我刷新页面时，页面就会消失。我试图在 url 上放一个哈希，但它仍然不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T03:41:10.690

您的内容仅在单击按钮时加载。您需要告诉浏览器根据您的哈希值自动加载*内容。

为此，您可以：

1 - 通过在属性中指定它，为您的链接提供一个哈希`href`。`return false;`从您的中删除`onclick`以确保页面 url 更改为`#home`

```
<a href="#home" onclick="load('home.php','ajax');">Home</a> 
```

2 - 添加一个`onload`自动加载哈希中指定的页面的处理程序。

```
<body onload="loadHash();"> 
```

3 - 编写自动哈希加载器

```
<script>
function loadHash() {
    var hash = window.location.href.split('#');
    if(hash.length == 2) {
        load(hash[1] + '.php','ajax');
    }
}
</script> 
```

# android - 有没有办法获得语言方向（RTL/LTR）？

> ID：12658360
> 
> 赞同：4
> 
> 时间：2012-09-30T03:20:36.360
> 
> 标签：android

我想根据语言对齐 TextView 的内容（对希伯来语、阿拉伯语等使用重力=正确）我试图找到资源文件夹后缀，例如 layout-ltr 或一些 API 来帮助我以编程方式设置重力，但我找不到。有通用的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-03T07:29:49.810

您应该使用的资源标识符是 ldrtl，但在此之前，您需要通过在清单中添加 android:supportsRtl="true" 来表明您的应用支持 RTL 语言。Android 甚至为 RTL 语言提供了完整的 API。[您可以在http://android-developers.blogspot.fr/2013/03/native-rtl-support-in-android-42.html](http://android-developers.blogspot.fr/2013/03/native-rtl-support-in-android-42.html)找到有关它的信息

# c# - Entity Framework 4 和 Web Api 的匿名类型转换问题

> ID：12658363
> 
> 赞同：2
> 
> 时间：2012-09-30T03:21:27.713
> 
> 标签：c#, .net, entity-framework, linq-to-entities, asp.net-web-api

我正在充实我的数据访问层并遇到了我的第一个问题。我首先使用实体​​框架代码以及一些存储库和 asp.net web api 来以 json 格式显示数据。

我正在尝试从 get 方法中提供的两个不同的 poco 获取数据。这些模型是：

```
public class Freelancer
{
    public int ID { get; set; }
    public string Email { get; set; }
    public string Password { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string CompanyName { get; set; }
    public string Avatar { get; set; }
    public Address FreelancerAddress { get; set; }
    public ICollection<Client> Clients { get; set; }
} 
```

和地址：

```
public class Address
{
    public int AddressId { get; set; }
    public string Street { get; set; }
    public string City { get; set; }
    public string State { get; set; }
    public string PostalCode { get; set; }
    public string Phone { get; set; }
    public string Email { get; set; }
} 
```

最后是客户端对象列表：

```
public class Client
{
    public int ID { get; set; }
    public string Name { get; set; }
    public Address ClientAddress { get; set; }
    public string Logo { get; set; }
    public ICollection<Project> Projects { get; set; }
    public int FreelancerID { get; set; }
    public Freelancer Freelancer { get; set; }
} 
```

在我的 Api 控制器中，我正在尝试做这样的事情（针对这个问题进行了简化）：

```
public IEnumerable<Freelancer> Get()
    {
        var user = Uow.Freelancers.GetFreelancer(1);
        var result = from x in user
                     select new
                     {
                         ID = x.ID,
                         Name = x.LastName,
                         Address = x.FreelancerAddress.Street
                     };
        return result;
    } 
```

我得到的错误是这样的：

> 无法将类型“System.Collections.Generic.IEnumerable”隐式转换为“System.Collections.Generic.IEnumerable”。存在显式转换（您是否缺少演员表？）

我可以只返回 Freelancer 对象就好了，但在 Json 中它会为地址和客户端显示 null，即使有相关数据。有没有办法使用 linq 获取我需要的对象，或者我应该对我的 DAL 进行某种重新设计。我正处于起步阶段，所以如果您有最佳实践建议，我正在寻找最佳实践建议。

***附加信息***

这就是 Uow.Freelancer.GetFreelancer(1) 提供的内容；

```
[{"iD":1,"email":"david.stanley.13@gmail.com","password":"password","firstName":"David","lastName":"Stanley","companyName":null,"avatar":null,"freelancerAddress":null,"clients":null}] 
```

GetFreelancer() 看起来像这样：

```
public IEnumerable<Freelancer> GetFreelancer(int id)
    {
        IEnumerable<Freelancer> freelancer = (from x in DbSet
                         select x);
        return freelancer;
    } 
```

我看不到任何使用 .Reference 或 .Include 的方法，但这可能是正确的方法。我记得在几个项目之前做过类似的事情......

**有用！！***

这是需要发生的事情：

我将 GetFreelancer 方法更改为：

```
IEnumerable<Freelancer> freelancer = from x in DbSet
                                     .Include("FreelancerAddress")
                                     .Include("Clients")
                                             where x.ID == id
                                             select x;

        return freelancer; 
```

起初这不起作用，因为 Freelancer 引用了完全引用 Freelance 的 Client，所以它永远隧道。我删除了 Client 中的引用，所以它看起来像这样：

```
public class Client
{
    public int ID { get; set; }
    public string Name { get; set; }
    public Address ClientAddress { get; set; }
    public string Logo { get; set; }
    public ICollection<Project> Projects { get; set; }
    public int FreelancerID { get; set; }
} 
```

我的输出正是我所需要的：一个自由职业者和他的地址，以及他的客户名单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T17:43:40.050

我没有尝试过这段代码，根据提供的代码和我通过谷歌找到的代码，这只是我的想法，但希望它能让你指出正确的方向。

我认为应该在`GetFreeLancer`方法中进行更改（就获取相关表而言）。我还注意到您没有在查询中使用提供的 id，这意味着您的方法将提供表中的所有条目，因此我在示例中添加了 where 子句。

我在这里试图传达的基本思想是，当您获得所需的 Freelancer 记录时，您会加载 Address 和 Clients 集合。我假设 DbSet 是您的上下文，并且我在猜测实体名称。

```
public IEnumerable<Freelancer> GetFreelancer(int id)
{

    IEnumerable<Freelancer> freelancer = from x in DbSet.Freelancers
                                         .Include("Address")
                                         .Include("Client")
                                         where x.Id == id
                                         select x;

    return freelancer;
} 
```

一旦你有正确的数据返回，你应该能够在你的控制器方法中得到你需要的任何东西。

就像我说的，我没有尝试过这段代码，但至少希望它能让你继续前进。

我还建议使用 LINQPad，因为它是测试和使用 LINQ 查询的好工具。

# android-viewpager - ViewPager 和 Fragment Pager 适配器实现

> ID：12658365
> 
> 赞同：1
> 
> 时间：2012-09-30T03:21:49.933
> 
> 标签：android-viewpager, fragmentpageradapter

所以我正在尝试使用 viewpager 和片段寻呼机适配器来实现滑动视图/片段。convert_home 是我的主要 xml 文件，它具有 android.support.v4.view.PagerTitleStrip 和

temperature.xml 和velocity.xml 是我的另外两个观点。我不知道我哪里出错了。应用程序崩溃（加载时）

```
package app.converto;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

public class ConverTo extends FragmentActivity {

    SectionsPagerAdapter mSectionsPagerAdapter;

    ViewPager mViewPager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());
        mViewPager.setAdapter(mSectionsPagerAdapter);
        setContentView(R.layout.converto_home);  
        mViewPager = (ViewPager) findViewById(R.id.pager);  

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.converto_home, menu);
        return true;
    }

    public class SectionsPagerAdapter extends FragmentPagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int i) {
            switch(i){
            case 0:
                Fragment1 fragment = new Fragment1();  

                return fragment;

            case 1:
                        Fragment2 fragment2 = new Fragment2();  
                return fragment2;

            }
            defaultFragment fragment3 = new defaultFragment();  
            return fragment3;
        }

        @Override
        public int getCount() {
            return 2;
        }
//
//        @Override
//        public CharSequence getPageTitle(int position) {
//            switch (position) {
//                case 0: return getString(R.string.velocity);
//                case 1: return getString(R.string.temperature);
//                case 2: return getString(R.string.distance);
//            }
//            return null;
//        }
    }

        public static class Fragment1 extends Fragment{
            public Fragment1(){
            }
             @Override  
             public void onCreate(Bundle savedInstanceState) {  
                 super.onCreate(savedInstanceState);  
             } 

             @Override
             public View onCreateView(LayoutInflater inflater, ViewGroup container,
                     Bundle savedInstanceState) {
                 //return inflater.inflate(R.layout.temperature, container, false);

                 View view = inflater.inflate(R.layout.temperature, container, false);  
                 TextView textView = (TextView) view.findViewById(R.id.sample);  
                 textView.setText(getArguments().getString("title"));
                 return view;
             }

        }

        public static class Fragment2 extends Fragment{
            public Fragment2(){
            }

             @Override  
             public void onCreate(Bundle savedInstanceState) {  
                 super.onCreate(savedInstanceState);  
             } 
             @Override
             public View onCreateView(LayoutInflater inflater, ViewGroup container,
                     Bundle savedInstanceState) {
                 //return inflater.inflate(R.layout.velocity, container, false);

                 View view = inflater.inflate(R.layout.temperature, container, false);  
                 TextView textView = (TextView) view.findViewById(R.id.sample);  
                 textView.setText(getArguments().getString("title"));
                 return view;
             }

        }

        public static class defaultFragment extends Fragment{
            public defaultFragment(){
            }//end constructor

             @Override  
             public void onCreate(Bundle savedInstanceState) {  
                 super.onCreate(savedInstanceState);  
             } 

             @Override
             public View onCreateView(LayoutInflater inflater, ViewGroup container,
                     Bundle savedInstanceState) {
                // return inflater.inflate(R.layout.temperature, container, false);

                 View view = inflater.inflate(R.layout.temperature, container, false);  
                 TextView textView = (TextView) view.findViewById(R.id.sample);  
                 textView.setText(getArguments().getString("title"));
                 return view;
             }//end oncreate

        }//end default fragment

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T03:33:55.557

嗯，一切似乎都很好，你面临的问题到底是什么？你可以说得更详细点吗？

编辑：哦，我想我知道你的问题是什么，我第一次没有看到。在您的 ConvertTo 类中，您在初始化它之前设置 mViewPager 的适配器。因此，将您的 OnCreate 方法更改为：（让我知道这是否是问题所在）

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

    setContentView(R.layout.converto_home);  

    // Initialize it first otherwise it stays null
    mViewPager = (ViewPager) findViewById(R.id.pager); 

    //Then you set the adapter
    mViewPager.setAdapter(mSectionsPagerAdapter);  

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T09:06:16.380

我不确定这是否对任何人有帮助，但我一直在玩上面的示例（作为 Android 编程的菜鸟）并添加了 3 个片段部分并重新启用了 6 个选项的菜单。我还没有测试我自己的片段并将内容放入其中，但我希望如果其他人在我所在的位置，它也可能会受益，因为似乎很少有关于 SDK 示例工作流程的文档。这意味着理解体验可能需要更长的时间。

您将需要为菜单名称设置一些字符串，并准备好布局。

```
package uk.co.letscommunicate.manx.central;
// http://stackoverflow.com/questions/12658365/viewpager-and-fragment-pager-adapter-implementation

import android.app.ActionBar;
import android.app.FragmentTransaction;
import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.app.NavUtils;
import android.support.v4.view.ViewPager;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

public class MainActivity extends FragmentActivity {

    /**
     * The {@link android.support.v4.view.PagerAdapter} that will provide fragments for each of the
     * sections. We use a {@link android.support.v4.app.FragmentPagerAdapter} derivative, which will
     * keep every loaded fragment in memory. If this becomes too memory intensive, it may be best
     * to switch to a {@link android.support.v4.app.FragmentStatePagerAdapter}.
     */
    SectionsPagerAdapter mSectionsPagerAdapter;

    /**
     * The {@link ViewPager} that will host the section contents.
     */
    ViewPager mViewPager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        // Create the adapter that will return a fragment for each of the three primary sections
        // of the app.
        mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

        // Set up the ViewPager with the sections adapter.
        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mSectionsPagerAdapter);

    }

    //unknown may be tab swipe
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    }

    public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
        // When the given tab is selected, switch to the corresponding page in the ViewPager.
        mViewPager.setCurrentItem(tab.getPosition());
   }
    public void onTabReselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    }
    // unknown    

    /**
     * A {@link FragmentPagerAdapter} that returns a fragment corresponding to one of the primary
     * sections of the app.
     */
    public class SectionsPagerAdapter extends FragmentPagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int i) {
            switch(i){
            case 0:
                Fragment1 fragment1 = new Fragment1();
                return fragment1;

            case 1:
                Fragment2 fragment2 = new Fragment2();  
                return fragment2;            

            case 2:
                Fragment3 fragment3 = new Fragment3();  
                return fragment3;    

            case 3:
                Fragment4 fragment4 = new Fragment4();  
                return fragment4;    

            case 4:
                Fragment5 fragment5 = new Fragment5();  
                return fragment5; 

            case 5:
                Fragment6 fragment6 = new Fragment6();  
                return fragment6;
            }            
            DefaultFragment DefaultFragment = new DefaultFragment();  
            return DefaultFragment;
        }

        @Override
        public int getCount() {
            return 6;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            switch (position) {
                case 0: return getString(R.string.title_section1);
                case 1: return getString(R.string.title_section2);
                case 2: return getString(R.string.title_section3);
                case 3: return getString(R.string.title_section4);
                case 4: return getString(R.string.title_section5);
                case 5: return getString(R.string.title_section6);
            }
            return null;
        }
    }

        public static class Fragment1 extends Fragment{
            public Fragment1(){
            }
             @Override  
             public void onCreate(Bundle savedInstanceState) {  
                 super.onCreate(savedInstanceState);  
             } 

             @Override
             public View onCreateView(LayoutInflater inflater, ViewGroup container,
                     Bundle savedInstanceState) {

                 View view = inflater.inflate(R.layout.detailframent, container, false);  
                 //TextView textView = (TextView) view.findViewById(R.id.pager_title_strip);  
                 //textView.setText(getArguments().getString("title"));
                 return view;
             }

        }

        public static class Fragment2 extends Fragment{
            public Fragment2(){
            }

             @Override  
             public void onCreate(Bundle savedInstanceState) {  
                 super.onCreate(savedInstanceState);  
             } 
             @Override
             public View onCreateView(LayoutInflater inflater, ViewGroup container,
                     Bundle savedInstanceState) {

                 View view = inflater.inflate(R.layout.detailframent, container, false);  
                 //TextView textView = (TextView) view.findViewById(R.id.pager_title_strip);  
                 //textView.setText(getArguments().getString("title"));
                 return view;
             }

        }

        public static class Fragment3 extends Fragment{
            public Fragment3(){
            }

             @Override  
             public void onCreate(Bundle savedInstanceState) {  
                 super.onCreate(savedInstanceState);  
             } 
             @Override
             public View onCreateView(LayoutInflater inflater, ViewGroup container,
                     Bundle savedInstanceState) {

                 View view = inflater.inflate(R.layout.detailframent, container, false);  
                 //TextView textView = (TextView) view.findViewById(R.id.pager_title_strip);  
                 //textView.setText(getArguments().getString("title"));
                 return view;
             }

        }

        public static class Fragment4 extends Fragment{
            public Fragment4(){
            }

             @Override  
             public void onCreate(Bundle savedInstanceState) {  
                 super.onCreate(savedInstanceState);  
             } 
             @Override
             public View onCreateView(LayoutInflater inflater, ViewGroup container,
                     Bundle savedInstanceState) {

                 View view = inflater.inflate(R.layout.detailframent, container, false);  
                 //TextView textView = (TextView) view.findViewById(R.id.pager_title_strip);  
                 //textView.setText(getArguments().getString("title"));
                 return view;
             }

        }        

        public static class Fragment5 extends Fragment{
            public Fragment5(){
            }

             @Override  
             public void onCreate(Bundle savedInstanceState) {  
                 super.onCreate(savedInstanceState);  
             } 
             @Override
             public View onCreateView(LayoutInflater inflater, ViewGroup container,
                     Bundle savedInstanceState) {

                 View view = inflater.inflate(R.layout.detailframent, container, false);  
                 //TextView textView = (TextView) view.findViewById(R.id.pager_title_strip);  
                 //textView.setText(getArguments().getString("title"));
                 return view;
             }

        }

        public static class Fragment6 extends Fragment{
            public Fragment6(){
            }

             @Override  
             public void onCreate(Bundle savedInstanceState) {  
                 super.onCreate(savedInstanceState);  
             } 
             @Override
             public View onCreateView(LayoutInflater inflater, ViewGroup container,
                     Bundle savedInstanceState) {

                 View view = inflater.inflate(R.layout.detailframent, container, false);  
                 //TextView textView = (TextView) view.findViewById(R.id.pager_title_strip);  
                 //textView.setText(getArguments().getString("title"));
                 return view;
             }

        }

        public static class DefaultFragment extends Fragment{
            public DefaultFragment(){
            }

             @Override  
             public void onCreate(Bundle savedInstanceState) {  
                 super.onCreate(savedInstanceState);  
             } 
             @Override
             public View onCreateView(LayoutInflater inflater, ViewGroup container,
                     Bundle savedInstanceState) {

                 View view = inflater.inflate(R.layout.detailframent, container, false);  
                 //TextView textView = (TextView) view.findViewById(R.id.pager_title_strip);  
                 //textView.setText(getArguments().getString("title"));
                 return view;
             }
             //end on create

        }//end default fragment

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-14T16:26:05.050

```
mViewPager.setAdapter(mSectionsPagerAdapter);        
mViewPager = (ViewPager) findViewById(R.id.pager); 
```

交换上面的两行，如下所示：

```
mViewPager = (ViewPager) findViewById(R.id.pager); 
mViewPager.setAdapter(mSectionsPagerAdapter); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T20:25:54.150

textview 导致应用程序崩溃。我没有正确声明它。

# tabs - 重新启动浏览器后在 chrome 扩展中重新建立选项卡标识

> ID：12658370
> 
> 赞同：6
> 
> 时间：2012-09-30T03:22:36.877
> 
> 标签：tabs, google-chrome-extension

我的 Chrome 扩展程序在 localStorage 中保存了一些数据，它需要在每个选项卡的基础上执行此操作。使用从 API 获得的选项卡 ID 可以让我以我需要的方式保存数据。不幸的是，如果重新启动浏览器，选项卡似乎会获得不同的 id，我的方案就会崩溃。有没有办法以在重新启动后仍然存在的方式识别选项卡？URL 是不够的，因为相同的 URL 可以出现在不同的选项卡中，并且不应导致这些选项卡混淆。

什么是正确的模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T00:40:19.630

我对此也有很大的问题。最后我通过为 Chrome 设置一个监听器来创建一个新标签来解决它。请看下面的代码：

```
chrome.tabs.onCreated.addListener(function(tab) {
    //Callback function gives you the tab that was created.
    var tabId = tab.id;
    //Or, in my case I just added it here to an array of tab ids.
}); 
```

我个人保留了一组我需要的选项卡 ID，并根据需要添加和删除它们。请参阅[此文档](http://developer.chrome.com/extensions/tabs.html)以获取与选项卡有关的所有帮助。

# rpc - 在 discountasp.net IIS 8 上获取 404，使用 Web Api RPC 样式的 Web 服务，apiController

> ID：12658371
> 
> 赞同：0
> 
> 时间：2012-09-30T03:22:37.417
> 
> 标签：rpc, asp.net-web-api, iis-8, discountasp

当我部署到本地计算机 IIS 7 时，我的应用程序运行良好。在 Discountasp.net 上，它将启动应用程序，但对 Web 服务的调用都不起作用。我收到“IIS 8.0 详细错误 - 404.0 - 未找到”。
我最近将我的帐户升级到“Windows 2012 - IIS 8.0”，并且我拥有的其他类型的 Web 服务应用程序运行良好。

该应用程序是在 Visual Studio 2012、.NET 4.5 中构建的，带有一个 Web 服务：带有 apiController 的 RPC 样式（不是 REST）Web Api。

例如，我使用 jQuery ajax 调用的一些代码：

```
public class ItemController : ApiController
{
    [HttpPost]    
    public ItemsReturn PostItemsSorted(ItemsSortedRequest inputs) 
    {
        ItemGetSortedCaller cls = new ItemGetSortedCaller();
        ItemsReturn ret = cls.CallGetSortedItems(inputs);
        return ret;
    }
 }

    var inputdata = {searchWord:searchWord, 
                     sortColumn:sortColumn
                     };

    $.ajax({
            type: "POST",
            url:  "/api/Item/PostItemsSorted";
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            data: JSON.stringify(inputData),
            context: this
        }); 
```

我到处找了，一点头绪都没有。为什么是404？

# heroku - Heroku 的 RestClient 和 ENV 问题

> ID：12658375
> 
> 赞同：1
> 
> 时间：2012-09-30T03:24:03.163
> 
> 标签：heroku, rake

我在 Heroku 上有一个应用程序。在本地，我正在使用 Foreman 并有一个 .ENV 文件来存储配置变量。对于这个例子，假设我的 API 密钥是**123456789**，我的 Heroku 应用程序名称是**acme**

**以下 rake 任务工作正常。**

```
task :scale_up => :environment do
  RestClient.post 'https://123456789@api.heroku.com/apps/acme/ps/scale', {:type => 'web', :qty => 3}
end 
```

**为了使我的密钥保密，我将以下内容添加到我的 .ENV 文件中**

```
TASK_URL=https://123456789@api.heroku.com/apps/acme/ps/scale 
```

**现在下面的 rake 任务不起作用。**

```
task :scale_up => :environment do
  RestClient.post ENV['TASK_URL'], {:type => 'web', :qty => 3}
end 
```

我一直在玩弄语法安排，并且总是使用以下之一：

*   • 语法错误，意外的“}”，应为 tASSOC
*   • 必须通过:url
*   • 错误的 URI（不是 URI？）：http://ENV[TASK_URL]

**帮助将不胜感激。**

# linux - 调用变量来运行脚本

> ID：12658382
> 
> 赞同：1
> 
> 时间：2012-09-30T03:28:03.023
> 
> 标签：linux, bash

我有一个脚本，它列出了目录中的所有文件，按字母顺序列出它们，并将文件的编号放在文件名之前。

```
#!/bin/bash

x=1
cd ~/bin

for f in *
do
    if [ -f $f ]; then
        echo "$x: $f"
        declare a$x=$f
        x=$(expr $x + 1)
    fi
done

read -p "What would you like to execute?: " num
$num 
```

输出将是

```
1: file0
2: file1
3: file2 
```

ETC

运行 $num 将执行命令

```
a1 
```

这不是命令。我想要做的是运行$a1 等于（即file0）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T14:33:55.483

看起来您正在实现`select`内置命令：

```
PS3="What would you like to execute?: "
select cmd in *; do
    $cmd
    break
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T03:31:36.130

您必须使用 eval 命令：

```
eval \$a0 
```

希望这会有所帮助=)

编辑：修复丢失的反斜杠

# c++ - 如何检查迭代器是否形成连续的内存区域？

> ID：12658384
> 
> 赞同：5
> 
> 时间：2012-09-30T03:28:33.283
> 
> 标签：c++, file, stream, reinterpret-cast, contiguous

我目前有以下函数来读取原始数据的数组或向量（`_readStream`是 a `std::ifstream`）：

```
template<typename IteratorType> 
inline bool MyClass::readRawData(
    const IteratorType& first, 
    const IteratorType& last, 
    typename std::iterator_traits<IteratorType>::iterator_category* = nullptr
    )
{
    _readStream.read(reinterpret_cast<char*>(&*first), (last-first)*sizeof(*first));
    return _readStream.good();
} 
```

第一个问题：这个功能对你来说还可以吗？

当我们直接读取一块内存时，它只有在内存块 from `first`to`last`在内存中是连续的情况下才会起作用。如何检查？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T03:50:49.247

撇开您的示例函数不谈，如果不检查两者之间每个元素的地址，您永远无法完全确定迭代器将形成一个连续的内存。

但是，一个合理的健全性测试将只是检查两者之间的内存区域是否与两者之间的计数相同：

```
assert(&*last - &*first == last - first &&
    "Iterators must represent a contiguous memory region"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-12T14:16:42.827

[n4183](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4183.pdf)是一篇论文，讨论了添加连续迭代器特征的想法。目前正在考虑用于 C++1z（希望是 C++17）。

在它下，您可以执行`std::is_contiguous_iterator<It>::value`并获取是否`It`为连续迭代器。（这需要迭代器设计者的支持）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-30T03:48:50.213

```
typename std::iterator_traits<IteratorType>::iterator_category* = nullptr 
```

这是没有用的，因为`std::iterator_traits`有一个带有非条件定义成员类型的主模板`iterator_category`。默认情况下，模板参数是一个迭代器，如果不是，则它违反了先决条件——因此，如果尝试使用无效实例化进行上述操作，您将不会得到 SFINAE，而是一个硬错误。

> 当我们直接读取一块内存时，它只有在内存中从头到尾的内存块是连续的时才会起作用。如何检查？

我不知道您会对“内存中的连续”概念提出什么确切要求。但是，您是否考虑过以下问题？

```
template<typename T>
bool readRawData(T* first, T* last); 
```

前提`[ first, last )`是有效的指针作为迭代器范围进入数组。

如果您想提出进一步的要求`T`（例如，由于您使用 的可复制性很小`read`），您也可以表达/记录这些要求。

# magento - 冲洗 Magento 缓存会破坏导航栏和链接

> ID：12658385
> 
> 赞同：0
> 
> 时间：2012-09-30T03:29:06.670
> 
> 标签：magento, caching, reinstall

今天在我的 magento 安装上更新了一个 xml 文件后，我在 magento 的后端执行了例行缓存刷新。更具体地说，我按下了两个按钮“Flush Magento Cache”和“Flush Cache Storage”。令我懊恼的是，在重新加载我的 magento 网站后，顶部导航栏消失了，所有产品链接都已断开。作为第一次使用 Magento 的用户，我觉得处理这个问题的能力不足。

这个问题在我之前发生过一次，在初始安装后不久。重新安装主题修复它。现在的区别是我添加了大量产品和其他数据库更改，并且没有备份数据库或文件。我害怕重新安装主题，以防我失去对数据库和前端所做的所有工作。以前有没有人遇到过这个问题，和/或任何人都可以阐明正在发生的事情和可能的修复？请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T02:08:20.993

> 今天在我的 magento 安装上更新了一个 xml 文件后，我在 magento 的后端执行了例行缓存刷新。<snip> 现在我的网站坏了。

Magento 缓存配置 xml 和布局 xml。

您在进行更改后清除了缓存，Magento 现在已损坏。

清除缓存后，Magento 将您的更改读入系统。

您的 xml 更改已损坏。将您更改的文件恢复为原始文件并清除缓存。

进一步说明，是的，如果我不小心维护格式正确的 XML 并研究如何在处理配置和布局文件时正确更改文件，这种情况就会一直发生。

这是每次更改布局和模板后**总是**刷新缓存的原因之一。在进行了一些更改并且无法记住哪个错误影响了您的实时电子商务网站之后，您会立即而不是稍后发现错误。这也是您在开发服务器上进行更改的原因，对它们进行全面测试，只有在确保它们具有预期的效果后，才能将它们上传到实时服务器。

# ios - iOS 版本的 OS X 核心数据应用程序

> ID：12658387
> 
> 赞同：0
> 
> 时间：2012-09-30T03:29:30.417
> 
> 标签：ios, core-data

我有一个功能齐全的核心数据 OS X 应用程序。我现在想做一个iOS版本。我可以重用核心数据模型还是必须从头开始重写它？我没有找到很多关于这个主题的评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T04:08:08.800

可以通过一些限制来完成，例如确保您在两个平台上都支持类型。

例如，如果您使用某种类型的`NSTransformableAttributeType`对象或使用`NSImage/UIImage`另存为二进制数据，则它在两个平台上都不起作用。

# vb.net - 第一个字母被截断

> ID：12658388
> 
> 赞同：1
> 
> 时间：2012-09-30T03:29:51.760
> 
> 标签：vb.net

（我对编码非常陌生，所以尽量保持你的答案基本。）

我正在制作一个尝试连接到 xbox.com/blahblahblah/gamertag 的 GamerTag 检查器，如果它返回了 gamertag 的配置文件，则表示它已被占用。

当您输入第一个玩家代号时，它会起作用。但是当你输入第二个时，它不会。

示例：http: [//imgur.com/cbT7o](http://imgur.com/cbT7o)

```
Module Module1

Sub Main()
    Console.ForegroundColor = ConsoleColor.Yellow
    Console.WriteLine("DiamondHacks's Gamertag Checker!")
    Console.ForegroundColor = ConsoleColor.Magenta
    Console.WriteLine("Spaced Gamertags do NOT work :(")
    Console.ForegroundColor = ConsoleColor.Blue
    Console.WriteLine("Just type a word, and it will check if it is available! :)")
    Console.ForegroundColor = ConsoleColor.Green
    Console.WriteLine("Good Luck getting some OG Gamertags :)")
    Console.ForegroundColor = ConsoleColor.Cyan
    blahblah()
End Sub

Function blahblah()

    Dim userInput As String = Console.ReadLine
    If Not String.IsNullOrEmpty(userInput) Then
        If checkGamerTag(userInput) = True Then
            Console.ForegroundColor = ConsoleColor.Red
            Console.WriteLine("Sorry, But the Gamertag ""{0}"" is taken!", userInput)
            Console.ForegroundColor = ConsoleColor.Cyan
        Else
            Console.ForegroundColor = ConsoleColor.Green
            Console.WriteLine("The gamertag ""{0}"" is not taken! :D Better get it before I do!", userInput)
            Console.ForegroundColor = ConsoleColor.Cyan
        End If
    End If
    Console.Read()
    blahblah()
    Console.ForegroundColor = ConsoleColor.Cyan
End Function

Private Function checkGamerTag(ByVal gamerTag As String) As Boolean
    If Not String.IsNullOrEmpty(gamerTag) Then
        Try
            Dim callBack As String = New System.Net.WebClient().DownloadString(String.Format("http://live.xbox.com/en-GB/Profile?gamertag={0}", gamerTag))
            If Not String.IsNullOrEmpty(callBack) Then
                If Not callBack.Contains("Ooops! What happened to this page?") Or callBack.Contains(gamerTag) Then Return True
            Else
                Return False
            End If
        Catch : Return False : End Try
    End If
End Function

End Module 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T03:42:06.820

在调用 to`Console.Read()`之前调用 to`blahblah()`正在咀嚼下一行的第一个字符。

# jquery - 为什么我在使用 jquery 数据表时出现这种类型的错误“TypeError：oColumn is undefined”，我从它的文档中全部遵循

> ID：12658392
> 
> 赞同：5
> 
> 时间：2012-09-30T03:31:17.040
> 
> 标签：jquery, html, jquery-plugins, datatables

为什么我使用 jquery 数据表时出现这种类型的错误“TypeError：oColumn is undefined” 我遵循了其文档中的所有说明。我不知道出了什么问题？

这是萤火虫的错误输出：

![在此处输入图像描述](../Images/01037c0b0a2124b9a1b6575e2b1e3c2a.png)

这是我的html表结构：

![在此处输入图像描述](../Images/a7f6c3b19b1b1755988afb4a80b3ec89.png)

这是我使用的 jquery 代码：

```
<style type="text/css" title="currentStyle">
    @import "datatables/media/css/demo_table.css";
</style>
<script src="datatables/media/js/jquery.dataTables.js"></script>
<script>
    $(document).ready(function() {
            $('#products-result').dataTable( {
                "sDom": "<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>"
            } );
            $.extend( $.fn.dataTableExt.oStdClasses, {
            "sWrapper": "dataTables_wrapper form-inline"
        } );
    } );
</script> 
```

jquery生成的表：

```
$.ajax({
        url: 'get-products.php',
        type: 'post',
        datatype: 'json',
        data: { category: $('.category').val().trim(), keyword: $('.keyword').val().trim() },
        beforeSend: fnLoadStart,
        complete: fnLoadStop,
        success: function(data){
            var toAppend = '';

            toAppend += '<thead><tr><th>Name</th><th>Image</th><th>Price</th><th>Shipping</th><th>Weight</th><th>Dimension</th><th>ASIN</th><th>Description</th><th>Reviews</th><th>Category</th></tr></thead>';
            toAppend += '<tbody>';

            if(typeof data === "object"){
                for(var i=0;i<data.length;i++){

                    var price = '';
                    if(data[i]['price'] === null){
                        price = 'No Price Available';
                    }
                    else {
                        price = data[i]['price'][0];
                    }
                    var img = '';
                    if(data[i]['image'] === null){
                        img = '<img class="no-image" src="no-image.jpg" alt="">';
                    }
                    else {
                        img = '<img src="'+data[i]['image'][0]+'" alt="">';
                    }
                    var description = '';
                    if(data[i]['product_description'] == 'Not Available'){
                        description = data[i]['product_description'];
                    }
                    else {
                        description = data[i]['product_description'][0];
                    }

                    toAppend += 
                    '<tr><td><p>'+
                    data[i]['product_name'][0]+'</p></td><td>'+
                    img+'</td><td>'+
                    price+'</td><td><ul><li><span>Standard: </span>'+
                    data[i]['standard_shipping']+'</li><li><span>Expedited: </span>'+
                    data[i]['expedited_shipping']+'</li><li><span>Two-day: </span>'+
                    data[i]['twoday_shipping']+'</li><li><span>One-day: </span>'+
                    data[i]['oneday_shipping']+'</li></ul></td><td>'+
                    data[i]['weight']+'</td><td>'+
                    data[i]['dimension']+'</td><td>'+
                    data[i]['asin'][0]+'</td><td><p>'+
                    description+'</p></td><td><iframe src="'+
                    data[i]['reviews'][0]+'"></iframe></td><td>'+
                    data[i]['category'][0]+'</td></tr>';
                }

                toAppend += '</tbody>';

                $('.data-results').append(toAppend);
            }
        }
    }); 
```

HTML 表格

```
<div>
    <table id="products-result" class="display data-results table table-striped table-hover table-bordered">

    </table>
</div> 
```

浏览器查看源码：

```
 <!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Products</title>
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="css/style.css" rel="stylesheet" type="text/css">
    <script src="js/main.js"></script>
    <script src="js/search.js"></script>

    <style type="text/css" title="currentStyle">
        @import "datatables/media/css/demo_table.css";
    </style>
    <script src="datatables/media/js/jquery.dataTables.js"></script>
    <script>
        $(document).ready(function() {
                $('#products-result').dataTable( {
                    "sDom": "<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>"
                } );
                $.extend( $.fn.dataTableExt.oStdClasses, {
                "sWrapper": "dataTables_wrapper form-inline"
            } );
        } );
    </script>

</head>
<body>

<div>

    <div class="span7">
        <form class="form-inline">
            <select class="category">x
                <option>All</option>
                <option>Apparel</option>
                <option>Appliances</option>
                <option>ArtsAndCrafts</option>
                <option>Automotive</option>
                <option>Baby</option>
                <option>Beauty</option>
                <option>Blended</option>
                <option>Books</option>
                <option>Classical</option>
                <option>Collectibles</option>
                <option>DVD</option>
                <option>DigitalMusic</option>
                <option>Electronics</option>
                <option>GiftCards</option>
                <option>GourmetFood</option>
                <option>Grocery</option>
                <option>HealthPersonalCare</option>
                <option>HomeGarden</option>
                <option>Industrial</option>
                <option>Jewelry</option>
                <option>KindleStore</option>
                <option>Kitchen</option>
                <option>LawnAndGarden</option>
                <option>Marketplace</option>
                <option>MP3Downloads</option>
                <option>Magazines</option>
                <option>Miscellaneous</option>
                <option>Music</option>
                <option>MusicTracks</option>
                <option>MusicalInstruments</option>
                <option>MobileApps</option>
                <option>OfficeProducts</option>
                <option>OutdoorLiving</option>
                <option>PCHardware</option>
                <option>PetSupplies</option>
                <option>Photo</option>
                <option>Shoes</option>
                <option>Software</option>
                <option>SportingGoods</option>
                <option>Tools</option>
                <option>Toys</option>
                <option>UnboxVideo</option>
                <option>VHS</option>
                <option>Video</option>
                <option>VideoGames</option>
                <option>Watches</option>
                <option>Wireless</option>
                <option>WirelessAccessories</option>
            </select>
            <input class="keyword" type="text" placeholder="Keyword">
            <input type="button" class="btnresult btn" value="Generate">
        </form>
    </div>

    <div id="ajaxLoader">
        <img src="loading.gif" alt="">
    </div>

    <div>
        <table id="products-result" class="display data-results table table-striped table-hover table-bordered">

        </table>
    </div>

</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-12-19T06:20:43.690

希望这会对大家有所帮助，至少可以从中得到一些提示。

[http://datatables.net/forums/discussion/comment/42607](http://datatables.net/forums/discussion/comment/42607)

我的问题是，TypeError: col 未定义。

**总结答案：**

> 表的 THead 元素内的 TR 元素内的 TH 元素数必须等于表中 TBody 的 TR 元素内的 TD 元素数（或表行内的列数）。

**你可以阅读下面的解释：**

问题是，我没有在 thead 部分中放置足够的 Th 或 Td 元素，以等于我在 TBody 部分的 Tr 元素中打印为 Td 元素的列数。

以下代码确实给了我错误。

```
<thead>
 <tr>
    <th> Heading 1</th>
    <th> Heading 2</th>
 </tr>
</thead>
<tbody>
 <tr>
    <td> Column 1 </td>
    <td> Column 2</td>
    <td> Column 3</td>
 </tr>
</tbody>" 
```

但是，只需在 THead 元素中的 Tr 元素中再添加一个 Th 元素，它就可以像魅力一样发挥作用！:) 我从上面的链接中得到了提示。

而且，我发现 THead 的 Tr 元素中的所有 TH 元素也可以是 TD 元素，因为它也是 jQuery DataTables 所需级别的有效 HTML！

希望我能帮助你们中的一些人节省您的时间！:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-30T04:07:27.747

好的，看起来您的表在加载时是空的，因此`datatables`可能无法正常工作，因为它的格式不正确。因此，我建议您先使用适当的 HTML 构建表格，然后再通过 ajax 填充表格。所以试着做这个

```
<div>
    <table id="products-result" class="display data-results table table-striped table-hover table-bordered">
            <thead><tr><th>Name</th><th>Image</th><th>Price</th><th>Shipping</th><th>Weight</th><th>Dimension</th><th>ASIN</th><th>Description</th><th>Reviews</th><th>Category</th></tr></thead>
    <tbody></tbody>
    </table>
</div> 
```

然后通过你的 ajax 附加到`tbody`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-08T14:04:37.550

我面临的问题：TypeError：col 未定义。

请检查表中的两件事，此错误可能是由于以下两个原因之一：

**原因 1）** TR 中的 TH 和 TD 元素的数量不匹配，两者的数量应该相等。

例如：下表是错误的，因为它有 2 个 TH 和 3 个 TR

```
'<table>
<thead>
 <tr>
    <th> Field Caption 1</th>
    <th> Field Caption 2</th>
 </tr>
</thead>
<tbody>
 <tr>
    <td> Field Value 1 </td>
    <td> Field Value 2</td>
    <td> Field Value 3</td>
 </tr>
</tbody>
</table>` 
```

**原因 2)**如果您在表格中错误地使用了 'colspan' 和 'rowspan'，您可能会遇到这个问题。

```
`<table>
<thead>
 <tr>
    <th> Field Caption 1</th>
    <th colspan="2"> Actions</th>
 </tr>
</thead>
<tbody>
 <tr>
    <td> Field Value 1 </td>
    <td> Edit</td>
    <td> Delete</td>
 </tr>
</tbody>
</table>` 
```

**尝试删除或纠正“colspan”和“rowspan”，然后尝试。**

希望它会有所帮助。

# c# - 让 Automapper 忽略 EF 中的非标量和导航属性

> ID：12658393
> 
> 赞同：3
> 
> 时间：2012-09-30T03:31:26.870
> 
> 标签：c#, entity-framework, automapper

需要自动映射器将域类型的属性从上下文映射回现有实体（基本上只是更新已更改的字段）。我需要它来忽略导航属性，只映射标量属性。

如果我说 ForMember(o => o.MyNavProperty, opt => opt.Ignore) 我可以让它工作，但我宁愿为我的所有映射提供一个通用方法来告诉它只映射标量而不是导航属性.

试图遵循毛里西奥的解决方案：

[ASP.net MVC - 我应该使用从 ViewModel 到实体框架实体的 AutoMapper 吗？](https://stackoverflow.com/questions/7588907/asp-net-mvc-should-i-use-automapper-from-viewmodel-to-entity-framework-entitie)

但我无法让它成功忽略我的导航属性。

这是我的更新版本：

```
 private static void CreateMapForEF<TDto, TEntity>()
      {
         Mapper.CreateMap<TDto, TEntity>()
    .ForAllMembers(o => o.Condition(ctx =>
                                       {

                                          var members = ctx.Parent.SourceType.GetMember(ctx.MemberName); // get the MemberInfo that we are mapping

                                          if (!members.Any())
                                             return false;

                                          if (members.First().GetCustomAttributes(
                                                typeof (EdmRelationshipNavigationPropertyAttribute), false).Any())
                                             return false;

                                          return members.First().GetCustomAttributes(typeof(EdmScalarPropertyAttribute), false).Any(); // determine if the Member has the EdmScalar attribute set

                                       }));
      } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-26T22:35:53.457

我最近正在研究它。
您可以使用以下解决方案：

定义导航属性的属性：

```
[AttributeUsage(AttributeTargets.Property, AllowMultiple = false)]
public class NavigationPropertyAttribute : Attribute
{
} 
```

使用上述属性标记视图模型中的所有导航属性。

```
public class TagModel
{
    public int Id { get; set; }

    [Required]
    public string Name { get; set; }

    public string Description { get; set; }

    [Display(Name = "Image")]
    public string ImagePath { get; set; }

    [NavigationProperty]
    public List<ContentModel> Contents { get; set; }
} 
```

为 AutoMapper 编写扩展方法以忽略所有具有属性的 `NavigationProperty`属性。

```
public static IMappingExpression<TSource, TDestination> IgnoreNavigationProperties<TSource, TDestination>(this IMappingExpression<TSource, TDestination> expression)
{
    var sourceType = typeof(TSource);

    foreach (PropertyInfo property in sourceType.GetProperties())
    {
        var isNavProp = property.GetCustomAttributes(typeof(NavigationPropertyAttribute), false).Count() == 1;
        if (isNavProp)
                expression.ForMember(property.Name, opt => opt.Ignore());
    }
    return expression;
} 
```

最后，您可以按如下方式使用它：

```
Mapper.CreateMap<TagModel, Tag>()
        .ForMember(m => m.Id, opt => opt.Condition(m => m.Id > 0))
        .IgnoreNavigationProperties(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T05:36:03.310

我通过向实体添加接口并映射到/从接口来使用显式方法。因此，我没有排除我要明确包含的内容。通过声明部分类来添加接口。

该接口对我来说是免费的，因为我使用该接口进行解耦、测试存根、模拟等。

也许只有我一个人，但我不喜欢在 AutoMapper 配置中看到任何忽略。不能证明这一点，但对我来说感觉不对。

# objective-c - ParseKit.framework 不起作用，Foundation.h 未找到

> ID：12658404
> 
> 赞同：5
> 
> 时间：2012-09-30T03:33:44.930
> 
> 标签：objective-c, xcode, c-preprocessor, foundation, parsekit

我真的很难让 ParseKit.framework ( [this](http://parsekit.com/index.html) ) 正常工作，甚至在运行附带的演示应用程序之前都懒得去实现它。

发生的事情是编译器找不到 <Foundation/Foundation.h> 或其他东西，我认为头文件在链接的框架中。确切错误：“词法或预处理器问题：找不到‘Foundation/Foundation.h’文件。”

这是来自 ParseKit_Prefix.pch 的代码：

```
 //
    // Prefix header for all source files of the 'ParseKit' target in the 'ParseKit' project.
    //
    #ifdef __OBJC__
        #import <Foundation/Foundation.h>
    #endif 
```

没什么不寻常的，我是不是弄乱了文件路径？我重新安装了 Xcode，重新下载了 ParseKit，但没有任何帮助。[这里](https://stackoverflow.com/questions/9380186/availability-h-uikit-h-etc-not-found)的建议什么也没做，不是[这个](https://stackoverflow.com/questions/4008800/ios-sdk-broken-ever-after-reinstall-uikit-and-foundation-frameworks-not-found)。当我创建一个新项目或使用不同的项目并加载 Foundation.framework 和 #import 标头时，它工作得很好。如果我取消链接框架，我无法找到它再次重新链接。有没有其他人遇到过这种问题？我是不是哪里下载错了？我很难找到 Xcode UI 链接东西的确切位置，苹果必须从令人沮丧的人中解脱出来，所以如果有人有什么他们能想到的，请给我一些反馈，我现在非常困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T04:52:21.450

好吧，我想如果有人关心，我会发布答案。我猜当我打开 ParseKit.xcodeproj 或其他东西时，Xcode 将其索引错误，将 Base SDK 从“当前 OS X”更改为“OS X 10.7”......然后又回来了，无论出于何种原因它都可以正常工作。为什么？世界上没有线索，但我对它的工作感到满意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T09:49:57.397

在#ifdef 之前添加一个新行。看起来您不小心编辑了 ParseKit_Prefix.pch。它应该如下所示：

```
//
// Prefix header for all source files of the 'ParseKit' target in the 'ParseKit' project.
//
#ifdef __OBJC__
    #import <Foundation/Foundation.h>
#endif 
```

# function - 如何处理 Scheme 中未指定数量的参数？

> ID：12658406
> 
> 赞同：26
> 
> 时间：2012-09-30T03:33:57.377
> 
> 标签：function, scheme, variadic-functions, variadic

例如`((fn-stringappend string-append) "a" "b" "c")` 我知道如何处理这个`(f x y z)`。但是如果有未知数量的参数怎么办？有没有办法处理这种问题？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-30T03:40:56.067

在 Scheme 中，您可以使用点符号来声明一个接收可变数量参数的过程（也称为*varargs*或[variadic function](http://en.wikipedia.org/wiki/Variadic_function)）：

```
(define (procedure . args)
  ...) 
```

内部`procedure`，`args`将是一个传递零个或多个参数的列表；像这样称呼它：

```
(procedure "a" "b" "c") 
```

正如@Arafinwe 所指出的，这是匿名过程的等效符号：

```
(lambda args ...) 
```

像这样称呼它：

```
((lambda args ...) "a" "b" "c") 
```

请记住，如果您需要将未知大小列表中的参数传递给可变参数函数，您可以这样编写：

```
(apply procedure '("a" "b" "c"))
(apply (lambda args ...) '("a" "b" "c")) 
```

**更新：**

关于评论中的代码，这不会按您的意愿工作：

```
(define (fp f)
  (lambda (.z)
    (f .z))) 
```

我相信你的意思是：

```
(define (fp f)
  (lambda z
    (apply f z))) 
```

加上一点语法糖，上述过程可以进一步简化为：

```
(define ((fp f) . z)
  (apply f z)) 
```

但这对于简单的写作来说还有很长的路要走：

```
(apply f z) 
```

这是你需要的吗？

```
(apply string-append '("a" "b" "c")) 
```

因为无论如何这相当于以下内容：

```
(string-append "a" "b" "c") 
```

`string-append` *已经*收到零个或多个参数（至少在 Racket 中是这样）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-30T04:04:30.353

除了 Óscar López 的回答，您还可以像这样创建一个可变参数的匿名函数：

```
(lambda args ...) 
```

同样，在 , 内部`lambda`是`args`传递的参数列表。

# html - 如何将 css 类图像与文本居中？

> ID：12658409
> 
> 赞同：0
> 
> 时间：2012-09-30T03:34:52.387
> 
> 标签：html, css, image, text, block

我得到了什么：http:
[//jsfiddle.net/nCs88/](http://jsfiddle.net/nCs88/)

我想要得到什么：http:
[//img545.imageshack.us/img545/888/42576e33afe343a0bab6a40.png](http://img545.imageshack.us/img545/888/42576e33afe343a0bab6a40.png)

我是一个绝对的初学者，我试图让按钮图像以文本为中心。永远感谢任何让我沮丧几个小时的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T03:40:29.243

只需申请`vertical-align:middle`这两个课程。

**[jsFiddle 示例](http://jsfiddle.net/j08691/nCs88/1/)**

添加：

```
.dbutton, .ctrlbutton {
    vertical-align:middle;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T04:26:20.340

尝试这样的事情

```
<style type="text/css">
 .itButton{
    border:1px solid #abc; 
    display:table-cell; 
    text-align:center;        
    /* width:200px */  
  }    
 .itBtn{
    display:inline-block; 
    vertical-align:middle; 
    margin:5px 5px 5px 5px;
  }
</style> 
```

和

```
<div class="itButton">
   <div class="itBtn"><img src="user.png" alt="" /></div>
   <div class="itBtn">My Button</div>
</div> 
```

# struts2 - org.apache.struts2.dispatcher.Dispatcher：找不到操作或结果错误

> ID：12658414
> 
> 赞同：1
> 
> 时间：2012-09-30T03:35:34.740
> 
> 标签：struts2

我尝试编写以下简单的 struts 代码，但在运行时遇到此错误。

```
[org.apache.struts2.dispatcher.Dispatcher] Could not find action or result: 
No result defined for action com.peter.action.LoginAction and result success 
```

索引.jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"  
    pageEncoding="ISO-8859-1"%>  
<%@ taglib prefix="s" uri="/struts-tags" %>  
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">  
<html>  
  <body>  
    <h2>Hello Struts</h2>  

    <s:form action="login" >  
      <s:textfield name="username" label="Username:" />  
      <s:password name="password" label="Password:"/>  
      <s:submit />  
    </s:form>  
  </body>  
</html> 
```

登录操作.java

```
package com.peter.action;

import org.apache.struts2.convention.annotation.ResultPath;
import org.apache.struts2.convention.annotation.Result;
import org.apache.struts2.convention.annotation.Action;

import com.opensymphony.xwork2.ActionSupport;

@ResultPath("/")
public class LoginAction extends ActionSupport {

    private String username;
    private String password;

    @Override
    @Action(value = "login", results = 
        {@Result(name="success", location="welcome.jsp")})
    public String execute() {
        return SUCCESS;
    }

    // Getters and setters for username, password    
} 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <display-name>Struts</display-name>

    <filter>
        <filter-name>Struts_Filter</filter-name>
        <filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class>
        <init-param>
            <param-name>actionPackages</param-name>
            <param-value>com.peter.action</param-value> 
        </init-param>
    </filter>

    <filter-mapping>
        <filter-name>Struts_Filter</filter-name>
    <url-pattern>/*</url-pattern>
    </filter-mapping>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

除了运行时错误，还有部署错误，即

> 错误 [com.opensymphony.xwork2.util.finder.ClassFinder]（MSC 服务线程 1-2）无法读取类 [WEB-INF.classes.com.peter.action.LoginAction]：无法加载 WEB-INF/classes /com/peter/action/LoginAction.class - [未知位置] 在 com.opensymphony.xwork2.util.finder.ClassFinder.readClassDef(ClassFinder.java:785) [xwork-core-2.3.1.2.jar:2.3.1.2 ]

AFAIK，struts 的扫描方法将扫描名为 struts2 的默认包以查找任何带注释的类，但我已指示 struts2 使用 init-param 扫描 com.peter.action 但仍然无法找到该类。这很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T00:05:20.470

升级到 Struts 2.3.8 时我遇到了同样的问题，除了错误的类包不是以`WEB-INF.*`它开头的 WAR 文件的名称（表示为`WarFileName`）。我通过将以下行添加到`struts.xml`：

```
<constant name="struts.convention.exclude.packages" value="org.apache.struts.*,org.apache.struts2.*,org.springframework.web.struts.*,org.springframework.web.struts2.*,org.hibernate.*,WarFileName.*"/> 
```

一切都是`WarFileName.*`默认的，所以我也包括了这些。我希望这可以帮助别人。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-22T06:59:04.463

我通过更改为 xml 映射样式解决了这个问题。

# java - 这需要多长时间才能运行，我该如何加快速度

> ID：12658419
> 
> 赞同：2
> 
> 时间：2012-09-30T03:37:09.377
> 
> 标签：java, performance, duration

我正在运行一些代码来测试布朗运动和散度，我很好奇这段代码需要多长时间才能运行，以及加速该过程的任何方法。我对java比较陌生，所以目前的代码比较基础。我正在运行的参数是 1000000 1000000。

```
public class BrownianMotion {

    public static void main(String[] args) {

    /**starts vars for program*/

    int N = Integer.parseInt(args[0]);
    int T = Integer.parseInt(args[1]);
    double sqtotal = 0;
    double r;
    double avg;

    /**number of trials loop*/

    for (int count=0;count<T;count++) {

        /**started here so that x & y reset at each trial*/

        int x = 0;
        int y = 0;

        /**loop for steps*/
        for (int steps=0;steps<N;steps++) {

        r = Math.random();
        if      (r < 0.25) x--;
        else if (r < 0.50) x++;
        else if (r < 0.75) y--;
        else if (r < 1.00) y++;

        }
        /**squared total distance after each trial*/
        sqtotal = sqtotal + (x*x+y*y);

    }

    /**average of squared total*/

    avg = sqtotal/T;
    System.out.println(avg);

    }
} 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T04:31:03.323

据我了解您的代码，您可以并行运行每个试验。如果您的 CPU 有多个内核，它会相应地运行得更快。

（编辑添加）

通常，我会将算法转换为 Callable，创建***数十个***（每个维度、每个状态等一个），然后使用 Executors.newFixedThreadPool() 创建一个合理大小的线程池（比如说，我可能是英特尔i3 笔记本电脑，4 个线程）并调用 invokeAll()。 [此博客文章中的更多详细信息](http://flyingspaniel.blogspot.com/2012/06/how-to-parallelize-your-algorithm-with.html)

但是，在您的 100,000 示例中，效果并不好。*理想*的方法是使用 CompletionService 在作业完成时重新提交作业。这开始变得复杂。

一种更简单但效率不高的方法（但仍然更快）可能是

1.  创建一个包含 10 个 BrownianWalkers 的集合。请注意，如果他们在开始时设置 x 和 y = 0，则可以*重用*它们。所以你只需要创建一次这个列表
2.  创建固定线程池
3.  在 i=0...10000 的循环中 {
4.  调用 submitAll()。
5.  循环结果（期货）并将它们添加到您的总和中。
    }

您将浪费一些时间等待所有操作完成，但仍然应该有显着的加速。由于大多数处理器的内核为 2、4、8 等......，稍微改进一下就是使集合成为 2 的幂（而不是 10，这使数学变得容易）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T04:18:34.877

为了找出这将运行多长时间，就是找到函数的运行复杂度，O(N^2)。我相信。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T05:42:49.240

这应该是一个有效的并行实现：

```
public class BrownianMotionThread extends Thread
{
    int i;
    int T;
    int N;
    int numberOfProcessors;
    double sqtotal;

    BrownianMotionThread(int i, int T, int N, int numberOfProcessors)
    {
        this.i = i;
        this.T = T;
        this.N = N;
        this.numberOfProcessors = numberOfProcessors;

    }

    public void run()
    {
        double r;
        for (int count=i;count<T;count+= numberOfProcessors) {

            /**started here so that x & y reset at each trial*/

            int x = 0;
            int y = 0;
                /**loop for steps*/
            for (int steps=0;steps<N;steps++) {
                r = Math.random();
            if      (r < 0.25) x--;
            else if (r < 0.50) x++;
            else if (r < 0.75) y--;
            else if (r < 1.00) y++;
                }
            /**squared total distance after each trial*/
            sqtotal = sqtotal + (x*x+y*y);
            }
    }
}

public class BrownianMotion {
    static double sqtotal;
    public static void main(String[] args) {

    /**starts vars for program*/

    final int N = Integer.parseInt(args[0]);
    final int T = Integer.parseInt(args[1]);
    final int numberOfProcessors = Runtime.getRuntime().availableProcessors();
    BrownianMotionThread[] threads = new BrownianMotionThread[numberOfProcessors];
    double avg;

    /**number of trials loop*/
    for(int i = 0; i < numberOfProcessors; i++)
    {
        threads[i] = new BrownianMotionThread(i,T,N,numberOfProcessors);
        threads[i].start();
    }
    for(int i = 0; i < numberOfProcessors; i++)
    {
        try 
        {
            threads[i].join();
        } 
        catch (InterruptedException e) 
        {
            e.printStackTrace();
        }
    }

    for(int i = 0; i < numberOfProcessors; i++)
    {
        sqtotal += threads[i].sqtotal;
    }

    /**average of squared total*/

    avg = sqtotal/T;
    System.out.println(avg);

    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T19:36:57.153

至少有三种方法可以让你的代码运行得更快，从更有效到最不有效：

1.  **降低算法的复杂度。**现在，您的算法具有`O(N^2)`时间复杂度：这意味着完成处理所需的时间与输入长度的平方成正比。您可能需要重新访问算法以减少不必要的计算或对中间结果应用优化。

2.  **在算法中引入并行性。**您的算法目前被实现为按顺序执行的一大块代码；也就是说（除了硬件级别的指令流水线）每条指令只有在前一条指令完成时才能执行。您可以重写代码以使用线程在多个处理器之间拆分工作，或者您可以使用为您完成大部分工作的并行化框架。这比第 1 点效率低。因为机器中的处理器数量是恒定的，因此当您提供给算法的输入大小增加时，它不会扩展。

3.  **使用更快的机器。**如果算法没有以其他方式改进，那么加速它的唯一方法就是运行得更快。

# jquery - 使用 .click 将 jquery 函数应用于多个 div/元素

> ID：12658421
> 
> 赞同：0
> 
> 时间：2012-09-30T03:37:43.383
> 
> 标签：jquery

你好非常基本的问题

我有许多 div（包含图像），我想对它们应用相同的缩放功能（使用 .click）。但我不知道该怎么做。我想我需要使用“.this”或“.target”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T09:43:19.903

```
jQuery.fn.jQueryFunctionName = function(){
    console.log(jQuery(this));
}

jQuery(function () {
    jQuery("div, img").click(function () {
        console.log(jQuery(this)); // target element
        jQuery(this).jQueryFunctionName();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T08:06:36.333

```
$('.className').die('click').live('click',function(){
//write your code here 
alert('clicked');
}); 
```

或者

```
$('.className').click(function(){

//write your code here 
alert('clicked');

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T03:48:10.233

向所有 s 添加一个类`div`，然后执行以下操作：

```
$('.className').click(yourFunction); 
```

# java - RSS阅读器和解析器使用java

> ID：12658422
> 
> 赞同：1
> 
> 时间：2012-09-30T03:37:46.447
> 
> 标签：java, rss, xmlpullparser, rss-reader, rome

我需要使用 Java 实现 RSS 阅读器。

我设计了读取 RSS 提要 XML URL 并获取内容并将其存储在 Java 类中的 Java 类。

每当 RSS 感觉 URL 有更新时，我需要使用 Java 类解析 RSS 提要 XML URL，只有这样我才能获得更新的内容。

这里的问题是我们如何通知 Java 类 RSS 感觉 XML URL 已经更新，以便 Java 类可以解析 URL 并获取更新的内容？

我们是否必须实现线程才能连续运行解析过程？或者那里有任何替代的最佳解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T03:59:33.927

您可以使用运行 java 应用程序的 cron 作业来解析 rss 提要。这取决于 RSS 提要的更新频率。如果 RSS 提要中的信息经常更新，您可以在此处实施轮询解决方案。这将涉及设置一个休眠一段时间的线程，然后调用 parse 方法。

# javascript - !!(new Number(0)) == true，但是 !!(Number(0)) == false，为什么？

> ID：12658423
> 
> 赞同：2
> 
> 时间：2012-09-30T03:38:40.043
> 
> 标签：javascript, casting, comparison, boolean-operations

为什么最后两个行为不同（在 Google Chrome 的控制台上测试）？

```
 /* number */                       /* string */
         0               == false;         ''               == false;
         !!0             == false;         !!''             == false;
         Number(0)       == false;         String('')       == false;
         !!Number(0)     == false;         !!String('')     == false;
         new Number(0)   == false;         new String('')   == false;
         (new Number(0)) == false;         (new String('')) == false;
         !!new Number(0) == true;          !!new String('') == true; 
```

换句话说，如果使用 new 关键字调用`Number`或调用，为什么转换为布尔值不同（而例如，并且工作相同）？`String``Array()``new Array()`

另外，奖金问题。为什么是`'' == 0`？我希望该比较隐式转换`0`为`'0'`，因为这将是一个*扩大*转换，而在比较之前将两者都转换为布尔值是一个*缩小*转换。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T03:43:04.550

*   `new Number(0)`返回一个`Number`对象，无论其值如何，该对象都是真实的。因此，`!!(true) == true`。
*   `Number(0)`返回数字`0`，这是错误的：`!!(false) == false`

至于您的奖励问题，`''`当您使用双等号时，会被转换为整数。`parseInt('') == 0`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T03:42:44.440

`new`给你一个对象。因此进行比较。

# python - 在 GoDaddy 上安装 django 站点

> ID：12658427
> 
> 赞同：32
> 
> 时间：2012-09-30T03:39:24.383
> 
> 标签：python, django, installation

我以前从未部署过 Django 站点。我目前正在寻找在我的豪华 GoDaddy 帐户中进行设置。有没有人有关于如何在 GoDaddy 上安装 python 和 django 的文档？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-11-12T06:02:48.670

供将来参考，因为我假设您已经继续...

可以在 GoDaddy 主机上使用 Django，使用他们推荐的 VirtualEnv。Python 2.7 是本机安装的并且工作正常，尽管它不是要运行的默认版本。

*   在您的站点上启用 SSH 访问。
*   使用主机面板设置您的初始 MySQL 数据库。它不需要任何条目，只需确保它存在并记下连接信息即可。
*   SSH进去，下载VirtualEnv.py。您可能会获得整个 tarball，但您只需要单个文件。
*   运行'/usr/bin/python2.7 virtualenv.py --system-site-packages your_new_env'
*   运行'source your_new_env/bin/activate'
*   运行'pip install django'
*   您现在可以直接按照 django 教程进行操作，当然不使用 runserver（因为您已经运行了一个网络服务器）

这适用于我的豪华帐户，但我仍然建议任何绝对想使用 Django 的人寻求替代托管。GoDaddy 不是很友好，我不确定一切都会继续工作。

**编辑**

我意识到在没有常规 mod_* 选项的情况下，如何让 Django 在 Apache 中正常运行也可能存在一些混淆。这是我的方法：

*   在 html 目录结构之外的某个地方创建您的 django 项目。例如在 ~/code 中运行 django-admin 以创建 ~/code/yoursite
*   按照 Django 教程中描述的正常项目和数据库设置进行操作。
*   在您的虚拟 python 环境中，运行“pip install flup”。
*   在 ~/code 中创建以下脚本“django_cgi.py”（**注意 python 路径！**）：

    ```
    #!~/your_new_env/bin/python
    import sys, os

    # Add a custom Python path for your project
    sys.path.insert(0, "/must/be/full/path/to/code/yoursite")

    # Set the DJANGO_SETTINGS_MODULE environment variable.
    # This should match the name for the project you added to the path above
    os.environ['DJANGO_SETTINGS_MODULE'] = 'yoursite.settings'

    from django.core.servers.fastcgi import runfastcgi
    runfastcgi(method="threaded", daemonize="false") 
    ```

*   在 ~/html 中，使用以下变体创建或编辑 .htaccess 文件：

    ```
    RewriteEngine On
    RewriteCond %{REQUEST_URI} !=/mysite.cgi
    RewriteRule ^(.*)$ /mysite.cgi [QSA,L,PT] 
    ```

*   最后，创建 ~/html/mysite.cgi 如下：

    ```
    #!/bin/sh
    ~/your_new_env/bin/python ~/code/django_cgi.py 2>&1 
    ```

*   确保所有内容都经过适当的修改 (755)

这过于简化但功能齐全，并且应该导致对任何页面或文件的每个请求都被传递给 Django。

这种跑路的原因是 GoDaddy 只为我们无法使用的旧版本 Python 提供原生 CGI 支持，所以我们必须使用我们的虚拟环境。虽然我们不能直接在 CGI 脚本中使用它，但幸运的是，我们可以运行一个 shell 脚本并手动调用它。mod_rewrite 规则只是确保所有流量都通过 Django。

**参考**
[Django with FastCGI](https://docs.djangoproject.com/en/dev/howto/deployment/fastcgi/)
[Start of Django Tutorials](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)
[VirtualEnv](http://pypi.python.org/pypi/virtualenv)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-30T07:12:42.613

根据 Godaddy 的说法，他们可以使用 Python 2.7.2，如果你有他们的虚拟主机的豪华版，你可以编程。按照我的理解，当您在第一行键入 python 安装的目录位置时，python 就会起作用：

```
 #!/usr/local/bin/python2.7 
```

但是，当我尝试测试它时，它不起作用。我在我的帐户上启用了 SSH。我尝试与 Putty 连接，如果我运行它，它就可以工作。但是，问题是，该网站只是没有出现。

我试图检查 Python 的版本是什么。我发现它是 Python 2.4.3。所以，我试图找到他们的目录。我发现它可能是：

```
 #!/usr/local/bin/python2.4 
```

或者

```
 #!/usr/local/bin/python2.4/site.py - (not sure) 
```

我尝试了每个目录并更改了所有可能的语法。没有任何效果。

这是支持 Python 的文章：http: [//support.godaddy.com/help/article/7254/can-i-use-python-272-with-my-hosting-account ?locale=en](http://support.godaddy.com/help/article/7254/can-i-use-python-272-with-my-hosting-account?locale=en)

因此，根据我的观察，任何一个答案都可能是正确的：

*   Godaddy 声称他们支持 Python。但是没有能力支持它。
*   Godaddy 支持 Python。但是，他们的技术支持人员不知道他们的服务器是如何工作的。
*   Godaddy 声称他们支持 Python。但是，他们真的没有。

但在下结论之前，我已经请求将我的 Godaddy Python 服务器更改为 2.7。一旦我发现，我会更新这篇文章。

**更新：** Godaddy 声称您可以在虚拟专用服务器或专用服务器上运行 Python，我认为这是可能的，因为您正在运行自己的计算机。从技术上讲，您可以在自己的计算机上安装任何东西。因此，如果 Python 运行，Django 可能会运行，但我怀疑他们是否知道如何支持它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-30T08:09:31.710

我不特别熟悉 GoDaddy 的设置，但一般来说，除非特别支持（如 Dreamhost），否则您无法在共享主机上安装 Django。因此，除非 GoDaddy 在他们的文档中特别提到 Django（或者可能是 mod_wsgi 或其他东西），这是不太可能的，否则您可以假设它不受支持。

从理论上讲，您可以在任何拥有 shell 访问权限和足够权限的地方安装 Python 并运行 Django，但是您将无法实际将 Django 站点作为共享主机的一部分提供服务（即，在端口 80 上并响应您选择的主机名）因为您无权访问网络服务器配置。

您将需要一个 VPS（GoDaddy 提供但它不是他们的核心业务；Linode 和 Rackspace 是其他选项），或专门支持 Django 的共享主机（例如 Dreamhost），或应用程序主机（Heroku 或 Google App Engine）。我个人推荐 Heroku，特别是如果您对设置和维护自己的网络服务器没有信心。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-30T18:19:48.460

从其他答案看来，GoDaddy 共享主机可能并不真正支持 Django。此外，在搜索表单中搜索“django”不会返回任何内容。如果是这样的话，我认为你最好的选择是使用[这里](http://djangofriendly.com/hosts/)和[这里](https://code.djangoproject.com/wiki/DjangoFriendlyWebHosts)列出的信誉良好的 Django 友好托管公司。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-30T00:25:24.013

我就是这样做的。

1.  使用 CENTOS 5.8 在真实服务器（您可以完全访问的服务器）上创建 chroot
2.  在那里安装所有需要的包，包括 sqlite3-devel、你自己编译的 python 2.7、虚拟环境等。
3.  在那里安装 django 并进行设置。
4.  对整个 chroot 进行快照并将其复制到机器上，
5.  对于执行，只需使用 virtualenv 即可。

请参阅此处的自述文件：[https](https://github.com/lawrencecreates/RHEL5-chroot/blob/master/README) ://github.com/lawrencecreates/RHEL5-chroot/blob/master/README我还修改了该工具的代码，这就是我使用的。

# java - Java Applet 代码在浏览器中有效，但在 AppletViewer 中无效

> ID：12658428
> 
> 赞同：1
> 
> 时间：2012-09-30T03:39:27.830
> 
> 标签：java, applet, viewer, appletviewer

当我在浏览器中使用这个小程序时，它可以正常工作，但为什么它不能与小程序查看器一起工作？

我曾尝试同时使用 jGRASP 和 Eclipse 来查看小程序，但无论我做什么，我都会得到：

```
java.lang.NumberFormatException: null on this line of code

int paramCount = Integer.parseInt( getParameter( "count" ) ); 
```

我不明白它为什么这样做。

```
//file: AppletParameters.java

import javax.swing.JApplet;
import javax.swing.JApplet;
import javax.swing.JPanel;
import javax.swing.JLabel;
import javax.swing.ImageIcon;
import java.awt.GridLayout;

public class AppletParameters extends JApplet
{
    private JPanel panel; // panel to display pictures

    public void init( )
    {
        // get the parameter count from the html 'count' parameter
        int paramCount = Integer.parseInt( getParameter( "count" ) );
        // create an array
        ImageIcon [] image = new ImageIcon[paramCount];
        // get each file name from the html 'file' parameter and put into array
        for ( int k=0; k<paramCount; k++ )
            image[k] = new ImageIcon( getImage( getDocumentBase( ), getParameter( "file"+k ) ) );
        // build a new JPanel with GridLayout
        panel = new JPanel( new GridLayout( 2, 5 ) );
        // add images to the panel
        for ( int k=0; k<paramCount; k++ )
            panel.add( new JLabel( image[k] ) );
        // add panel to me (this applet object)
        add( panel );
    }  // end init method
}  // end class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T03:41:13.040

您是否通过 AppletViewer 将参数传递给小程序？我怀疑你是。

在 Eclipse 中，您可以通过 Run 菜单 Run Configurations... 子菜单项，然后是 Parameters 选项卡来执行此操作。

![在此处输入图像描述](../Images/11cafdb03d5d4862a71d01801a11e518.png)

# c++ - 从 sprintf 获取 STR16

> ID：12658430
> 
> 赞同：0
> 
> 时间：2012-09-30T03:40:02.553
> 
> 标签：c++, c, visual-studio-2010, visual-studio

我也想添加一个 STR16 (psString)。

像这样的东西：

```
sprintf(psString,"%s 500 Left",psString); 
```

但是 VS 说 STR16 与 sprintf 不兼容

我有什么办法可以修改这个 STR16 并最终变成一个 STR16 ？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T03:43:36.997

wsprintf 不能满足您的需要吗？

添加链接： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms647550 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647550(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T03:44:30.730

请改用[swprintf](http://msdn.microsoft.com/en-us/library/ybk95axf%28v=vs.71%29.aspx)，因为它处理 16 位宽字符而不是 8 位字符。Windows 提供了一个类似的版本，称为[wsprintf](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647550%28v=vs.85%29.aspx)。您还可以使用 _stprintf，预处理器将根据 TCHAR 定义将其转换为 8 位或 16 位宽的字符。

请注意，此功能被认为是不安全的。上面的 wsprintf 链接包含有关潜在替代品的信息，例如[StringCbPrintfEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647513%28v=vs.85%29.aspx)。

# javascript - 运输计算器，我在此代码中缺少什么使其工作？

> ID：12658436
> 
> 赞同：0
> 
> 时间：2012-09-30T03:40:59.347
> 
> 标签：javascript, calculator, shipping

您好，我对此很陌生，我正在尝试使此运输计算器代码正常工作。这就是我到目前为止所拥有的。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
ent"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Calculate Shipping</title>
<script type="text/javascript">
/* <![CDATA[ */
var price = 0;
var shipping = (calculateShipping(price););
var total = price + shipping;

function calculateShipping(price){
    if (price <= 25){
        return 1.5;
    }
    else {
        return price * 10 / 100;
        break;
    } 
}

window.alert("Your total is $" + total + ".");

/* ]]> */
</script>
</head>
<body>
<form name="shipping" action="">
    <p>Purchase Price: $
        <input type="text" name="price" />
        <input type="button" value="Calculate Shipping" onclick="calculateshipping(price);" />
    </p>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T03:42:54.020

将您的 onclick 代码更改为：

```
calculateShipping(document.getElementById('price').value); 
```

编辑，试试这段代码，它应该可以工作：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"       ent"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Calculate Shipping</title>

<script type="text/javascript">
/* <![CDATA[ */
var price = 0;
var shipping = calculateShipping(price);

function calculateShipping(price){
var result = 0;
if (price <= 25){
    result = 1.5;
}
else{
    result = price * 10 / 100;
}
var total = result + (price - 0);
window.alert("Shipping is $" + result + ".  Total is $" + total +".");
} 

/* ]]> */
</script>
</head>
<body>
<p>Purchase Price: $
<input type="text" name="price" id="price" />
<input type="button" value="Calculate Shipping" onclick="calculateShipping(document.getElementById('price').value);" /></p>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T04:31:13.973

我认为最好的方法（不使用任何库，如 JQuery）如下：

```
<!DOCTYPE html>
<html>
<head>
<title>Calculate Shipping</title>
<script type="text/javascript">

window.addEventListener('load', function(){
  var priceField = document.getElementById('price');
  var calculateButton = document.getElementById('calculate');
  var totalField = document.getElementById('total');

  calculateButton.addEventListener('click', function(){
    var price = parseInt(priceField.value);
    var shipping = calculateShipping(price);
    var total = price + shipping;

    totalField.value = "Your total is $" + total + ".";
  });

  function calculateShipping(price){
    return (price <= 25) ? 1.5 : price / 10;
  }
});

</script>
</head>
<body>

<h1>Purchase Price:</h1>

<label>Price:</label><input type="text" id="price" />
<button id="calculate">Calculate Shipping</button>

<label>Total:</label>
<input type="text" id="total" disabled="disabled" />

</body>
</html> 
```

这里我介绍一些好的做法，比如：

*   不要污染全局命名空间
*   避免内联 Javascript（将事件侦听器绑定为 HTML 属性）
*   如果可能，请避免使用本机消息框（警报、确认、提示...），它们非常具有侵入性、丑陋且不可定制。

# linux - 信号（）做什么？

> ID：12658440
> 
> 赞同：1
> 
> 时间：2012-09-30T03:41:20.830
> 
> 标签：linux, networking, signals

[http://linux.die.net/man/2/signal](http://linux.die.net/man/2/signal)

> “signal() 将信号符号的处置设置为处理程序，它是 SIG_IGN、SIG_DFL 或程序员定义的函数（“信号处理程序”）的地址。”

我发现它的功能描述很模糊（网络和 linux 编程的新手）。这是某种回调设置功能吗？现在我的代码（我还没有编译）正在使用它：

```
signal( SIGIO, readMessage ); 
```

其中 readMessage 是一个函数。SIGIO 定义为：

> SIGPOLL 是发生异步 I/O 事件时发送给进程的信号。

综上所述，我只能猜测当一些异步 I/O 事件发生时，函数 readMessage( int ) 会被调用吗？这像 Qt 中的插槽/信号吗？

我的另一个问题是，在网络编程的上下文中，究竟什么是 I/O 事件？它是一个返回的接受调用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T11:16:11.003

在 *nix 上，信号是从内核到用户空间的回调。它们有点类似于中断，可以认为是从硬件到操作系统的回调。

与 Qt 中的信号/槽相比，它们在基于事件的系统中更像是事件。在Qt中，一个组件可以发出信号，这些信号可以被其他组件中的几个槽接收，程序设置信号和槽之间的连接，在其他系统（Xlib，Win32）中，程序从系统接收预定的事件。

*nix 支持阻塞和非阻塞套接字。和系统调用允许程序等待 I/O 事件`poll()`。`select()`作为`poll()`/的替代方案`select()`，BSD 和 Linux 也可以在 I/O 事件发生时发送信号（默认为 SIGIO），实现异步 I/O 的一种形式。更多信息可以在 manpage 中找到`fcntl()`，寻找`F_SETFL`, `F_SETOWN`, `F_SETSIG`。

# validation - 是否仅在实例上设置时才对 Backbone 中的模型进行验证？

> ID：12658441
> 
> 赞同：1
> 
> 时间：2012-09-30T03:41:26.953
> 
> 标签：validation, backbone.js

我创建了一个对象：

```
var Person = Backbone.Model.extend({
  defaults: {
    'name': '',
    'age': 0
  },
  initialize: function() {
    this.on('error', function(model, error){
      console.log(error);
    });
  },
  validate: function(attributes){
    if (attributes.name == '') {
      return "How do we call him!?";
    }
  },
  changeName: function(name) {
    this.set({'name':name});
  },
  getOlder: function() {
    this.set({'age': this.get('age') +1});
  }   
}); 
```

我创建了一个 Person 实例并在名称上填了一个空白，但从未收到错误消息。但是当我在已经创建的实例上设置一个空白名称时，它触发了验证。

```
var teejay = new Person;
teejay.changeName('');
=> How do we call him!?
teejay.get('name');
=> "" 
```

从我从主干源代码中看到的，我看到

```
this.set(attributes, {silent: true}); 
```

假设仅在更改或设置属性时才进行验证是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:37:30.650

Backbone 将始终在您或属性时调用该`validate`方法，但当您将哈希传递给构造函数或模型使用哈希实例化时除外。`set``save``default`

例如

```
var myperson = new Person({name: ''}); 
```

不会调用该`validate`方法，因为构造函数必须返回模型的新实例。

然而，

```
var myperson = new Person();
myperson.set('name', ''); 
```

将要。

你的`validate`方法永远不会打印出任何东西`return`——on validate 用于测试它是否有效。如果您返回任何“真实”验证将失败，但仅此而已。由您来触发`'error'`消息或您想要的任何其他内容。

您所看到的完全符合预期。

TL;DR：您的`defaults`哈希将永远不会被验证，因为它必须返回一个有效的模型。

（另外，请允许我现在为我的[Backbone.Validator](https://toddself.github.com/Backbone.Validator)项目提供服务——不要自己编写！）

# haskell - 如何在 Haskell 中装饰一棵树

> ID：12658443
> 
> 赞同：18
> 
> 时间：2012-09-30T03:41:51.530
> 
> 标签：haskell, tree

我想用不同的值（例如，Int）标记树的每个元素。我设法做到了，但代码丑得像野兽，我还不知道如何使用 Monads。

我的看法：

```
data Tree a = Tree (a, [Tree a])

tag (Tree (x, l)) n = ((m, x), l')
 where (m,l') = foldl g (n,[]) l
        where g (n,r) x = let ff = tag x n in ((fst $ fst ff) +1, (Tree ff):r) 
```

你知道更好的方法吗？

**编辑：** 我刚刚意识到上面的 foldl 真的是 mapAccumL。所以，这里是上面的一个干净的版本：

```
import Data.List (mapAccumL)

data Tree a = Tree (a, [Tree a])

tag (Tree (x, l)) n = ((m,x),l')
  where (m,l') = mapAccumL g n l
        g n x  = let ff@((f,_),_) = tag x n in (f+1,ff) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-30T16:31:34.563

利用`Data.Traversable`和一些有用的 GHC 扩展，我们可以进一步重构[sacundim 的解决方案](https://stackoverflow.com/a/12658639/98117)：

```
{-# LANGUAGE DeriveFunctor, DeriveFoldable, DeriveTraversable #-}

import Control.Monad.State
import Data.Foldable
import Data.Traversable

data Tree a = Tree a [Tree a]
  deriving (Show, Functor, Foldable, Traversable)

postIncrement :: Enum s => State s s
postIncrement = do val <- get
                   put (succ val)
                   return val

-- Works for any Traversable, not just trees!
tag :: (Enum s, Traversable t) => s -> t a -> t (a, s)
tag init tree = evalState (traverse step tree) init
    where step a = do tag <- postIncrement
                      return (a, tag) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-30T04:28:02.743

我稍微修改了你的类型。仔细研究这段代码：

```
import Control.Monad.State

-- It's better not to use a pair as the argument of the constructor    
data Tree a = Tree a [Tree a] deriving Show

-- We typically want to put the Tree argument last; it makes it
-- easier to compose tree functions.  
--
-- Also, the Enum class is what you want here instead of numbers; 
-- you want a "give me the next tag" operation, which is the succ
-- method from Enum.  (For Int, succ is (+1).)
tag :: Enum t => t -> Tree a -> Tree (a, t)
tag init tree = 
    -- tagStep is where the action happens.  This just gets the ball
    -- rolling.
    evalState (tagStep tree) init

-- This is one monadic "step" of the calculation.  It assumes that
-- it has access to the current tag value implicitcly.  I'll 
-- annotate it in the comments.
tagStep :: Enum t => Tree a -> State t (Tree (a, t))
tagStep (Tree a subtrees) = 
    do -- First, recurse into the subtrees.  mapM is a utility function
       -- for executing a monadic action (like tagStep) on a list of
       -- elements, and producing the list of results.
       subtrees' <- mapM tagStep subtrees  

       -- The monadic action "get" accesses the implicit state parameter
       -- in the State monad.  The variable tag gets the value.
       tag <- get 

       -- The monadic action `put` sets the implicit state parameter in
       -- the State monad.  The next get will see the value of succ tag
       -- (assuming no other puts in between).
       --
       -- Note that when we did mapM tagStep subtrees above, this will 
       -- have executed a get and a put (succ tag) for each subtree.           
       put (succ tag)

       return $ Tree (a, tag) subtrees' 
```

* * *

**编辑：**与上述相同的解决方案，但将一轮重构为可重用的部分：

```
-- This function is not part of the solution, but it will help you 
-- understand mapTreeM below.
mapTree :: (a -> b) -> Tree a -> Tree b
mapTree fn (Tree a subtrees) = 
    let subtrees' = map (mapTree fn) subtrees
        a' = fn a
     in Tree a' subtrees'

-- Normally you'd write that function like this:
mapTree' fn (Tree a subtrees) = Tree (fn a) $ map (mapTree' fn) subtrees

-- But I wrote it out the long way to bring out the similarity to the 
-- following, which extracts the structure of the tagStep definition from 
-- the first solution above.    
mapTreeM :: Monad m => (a -> m b) -> Tree a -> m (Tree b)
mapTreeM action (Tree a subtrees) =
    do subtrees' <- mapM (mapTreeM action) subtrees
       a' <- action a
       return $ Tree a' subtrees'

-- That whole business with getting the state and putting the successor
-- in as the replacement can be abstracted out.  This action is like a 
-- post-increment operator.    
postIncrement :: Enum s => State s s
postIncrement = do val <- get
                   put (succ val)
                   return val

-- Now tag can be easily written in terms of those.
tag init tree = evalState (mapTreeM step tree) init
    where step a = do tag <- postIncrement
                      return (a, tag) 
```

如果需要，您可以`mapTreeM`在子树之前处理本地值：

```
mapTreeM action (Tree a subtrees) =
    do a' <- action a
       subtrees' <- mapM (mapTreeM action) subtrees
       return $ Tree a' subtrees' 
```

使用`Control.Monad`你可以把它变成一个单行：

```
mapTreeM action (Tree a subtrees) =
    -- Apply the Tree constructor to the results of the two actions
    liftM2 Tree (action a) (mapM (mapTreeM action) subtrees)

-- in the children-first order:
mapTreeM' action (Tree a subtrees) =
    liftM2 (flip Tree) (mapM (mapTreeM action) subtrees) (action a) 
```

# javascript - 关于MVC范式中view和controller的关系，特别是Sencha Touch，

> ID：12658452
> 
> 赞同：0
> 
> 时间：2012-09-30T03:43:23.387
> 
> 标签：javascript, model-view-controller, sencha-touch, sencha-touch-2

我正在尝试使用 Sencha Touch 2 编写一个应用程序来帮助我记住所有这些词汇。

我正在研究列表显示一些单词的部分。我希望列表视图能够咨询笔记本控制器，以便它可以知道每个单词是否已经在笔记本中，这样它就可以相应地为每个单词显示“添加到笔记本”或“从笔记本中删除”按钮。

我只是想知道让视图向控制器发起请求是否是一种好习惯。在 Objective-C 中工作时，似乎可以通过将控制器设置为视图的委托来完成此操作。那么 Sencha Touch 中是否有等效的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:04:21.060

Sencha MVC 只是一个指南，其结构并未严格执行。例如，您可以通过将所有事件侦听器放在视图中来创建没有控制器的应用程序。或者，您可以只维护 1 个控制器文件来处理您的所有视图。由你决定。

听起来您正在尝试检查 ListStore 的内容是否具有已在 Notebook 存储中的值。我要做的是在 ListStore 中创建一个“假”列，根据 Notebook 存储检查其值。

```
Ext.create('Ext.data.ListStore', {
   ...
   fields: [
      ... (other fields) ...
      {
         name: 'isInNotebook',
         convert: function(value, record) {
            return this.verifyInNotebook(record.get('fieldToVerify'));
         }
      }
   ],
   verifyInNotebook: function(verifyValue) {
       var notestore = Ext.getStore('NotebookStore');
       return notestore.FindExact(verifyValue);
   }
} 
```

然后在您的视图中，您将根据列“isInNotebook”的值来决定显示哪个按钮，该列是一个虚拟生成的列。

我希望这有帮助。

# php - 如何通过 Vagrant 运行 LAMP 堆栈

> ID：12658454
> 
> 赞同：1
> 
> 时间：2012-09-30T03:44:00.633
> 
> 标签：php, mysql, apache, lamp, vagrant

我一直试图解决这个问题好几个小时，但似乎无法解决。网上好像没有太多帮助。我尝试通过 Chef solo 来实现，但这似乎不起作用，而且我并不是特别喜欢在每次创建新 VM 时下载 php、apache、mysql。

无论如何，并不特别关心方法是什么，无论是通过 Chef solo 还是类似方式，或者它是否已经设置了 LAMP 的盒子，或者其他什么，我只是想要一种方法（最好是最简单的方法）来设置 VM通过 Vagrant 使用 LAMP 堆栈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T09:16:53.907

Chef Solo 是首选方法，但学习曲线非常陡峭。你应该努力最终学会这一点。同时，您可以像您提到的那样手动安装所有内容，然后将盒子打包

```
vagrant package 
```

现在，您将拥有一个`package.box`可用于使用您安装的 LAMP 堆栈的 from vagrant 创建虚拟机。添加框

```
vagrant box add lamp package.box 
```

然后在你的`Vagrantfile`

```
Vagrant::Config.run do |config|
  config.vm.box = "lamp"

  # stuff
end 
```

# ios - 如何使用 CoreGraphics iOS Cocos2d 制作 Sprite

> ID：12658455
> 
> 赞同：1
> 
> 时间：2012-09-30T03:44:03.660
> 
> 标签：ios, cocos2d-iphone, core-graphics, sprite, geometry

如何在 Cocos2d 中使用 CoreGraphics 制作精灵图形？

我正在尝试制作一个使用由核心图形制作的图形的精灵。

感谢您的任何见解和帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T05:24:54.800

完成所有核心图形工作，然后您将拥有一个 CGImageRef。有了那个参考，你可以使用

```
+ (id)spriteWithCGImage:(CGImageRef)image key:(NSString *)key 
```

在 CCSprite 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:47:31.917

这解决了它。

下面的答案是从我在游戏开发网站上收到的回复中复制的：[https ://gamedev.stackexchange.com/questions/38071/how-to-make-a-sprite-using-coregraphics-ios-cocos2d-iphone](https://gamedev.stackexchange.com/questions/38071/how-to-make-a-sprite-using-coregraphics-ios-cocos2d-iphone)

* * *

我不知道 cocos2d，所以我只能给你一些关于 iOS 上 CoreGraphics 的技巧。

首先，简单的情况下，如果您可以从 UIImage 或 CGImageRef 创建精灵。

```
/* function that draw your shape in a CGContextRef */
 void DrawShape(CGContextRef ctx)
 {
     // draw a simple triangle

     CGContextMoveToPoint(ctx, 50, 100);
     CGContextAddLineToPoint(ctx, 100, 0);
     CGContextAddLineToPoint(ctx, 0, 0);
     CGContextClosePath(ctx);
  }

    void CreateImage(void)
    {
       UIGraphicsBeginImageContext(CGSizeMake(100, 100));

       DrawShape(UIGraphicsGetCurrentContext());

       UIImage *image = UIGraphicsGetImageFromCurrentImageContext();

       UIGraphicsEndImageContext();

       // now you've got an (autorelease) UIImage, that you can use to
       // create your sprite.
       // use image.CGImage if you need a CGImageRef
    } 
```

如果您需要提供数据缓冲区，并创建自己的 CGContextRef ：

```
CGContextRef CreateBitmapContextWithData(int width, int height, void *buffer)
{
    CGContextRef ctx;
    CGColorSpaceRef colorspace;
    size_t bytesPerRow;
    size_t bitsPerComponent;
    size_t numberOfComponents;
    CGImageAlphaInfo alpha;

    bitsPerComponent = 8;
    alpha = kCGImageAlphaPremultipliedLast;

    numberOfComponents = 1;
    colorspace = CGColorSpaceCreateDeviceRGB();

    numberOfComponents += CGColorSpaceGetNumberOfComponents(colorspace);
    bytesPerRow = (width * numberOfComponents);

    ctx = CGBitmapContextCreate(buffer, width, height, bitsPerComponent, bytesPerRow, colorspace, alpha);

    CGColorSpaceRelease(colorspace);

    return ctx;
}

void CreateImageOrGLTexture(void)
{
   // use pow2 width and height to create your own glTexture ...
   void *buffer = calloc(1, 128 * 128 * 4);
   CGContextRef ctx = CreateBitmapContextWithData(128, 128, buffer);

   // draw you shape
   DrawShape(ctx);

   // you can create a CGImageRef with this context 
   // CGImageRef image = CGBitmapContextCreateImage(ctx);

   // you can create a gl texture with the current buffer
   // glBindTexture(...)
   // glTexParameteri(...)
   // glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, buffer);

   CGContextRelease(ctx);
   free(buffer);
} 
```

有关所有 CGContext 功能，请参阅 Apple 文档：[https ://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGContext/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGContext/Reference/reference.html)

希望这有帮助。

* * *

最终用户回答。

# c - 汇编成C，printf函数

> ID：12658460
> 
> 赞同：0
> 
> 时间：2012-09-30T03:45:09.270
> 
> 标签：c, assembly, x86

我有这个汇编代码，我认为它的作用是使用该`printf`函数进行打印。我对 C 不是很熟悉，但我创建了一个 main 函数并打印出`printf("%d, %d", x, y)`x 和 y 都为零的位置。

我将 C 代码转换为汇编，但我得到了完全不同的东西。有人可以帮我理解下面的汇编代码的作用吗？

```
 mov    %edx,0x8(%esp)
            mov    %eax,0x4(%esp)
            movl   $0x80486a0,(%esp)
            call   8048360 <printf@plt> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T04:01:12.257

作为您的程序集的非常直译，

```
mov    %edx,0x8(%esp) 
```

将 edx 中的值移动到堆栈中偏移量 8 (esp + 8)

```
mov    %eax,0x4(%esp) 
```

将 eax 中的值移动到堆栈的偏移量 4 (esp + 4)

```
movl   $0x80486a0,(%esp) 
```

将 [32 位值] 0x80486a0 移动到堆栈的偏移量 0

这是将函数的参数放在堆栈上的一种非常基本的方式——RTL 或 C 顺序。最低偏移量的值是第一个参数（在这种情况下，是字符串文字在内存中的地址），最高偏移量的值是最后一个参数。

当您拨打电话时：

```
call   8048360 <printf@plt> 
```

您的程序将跳转到给定地址（反汇编程序已将其识别为 printf 函数），从堆栈中读取值，执行打印操作，然后返回到您的代码，在您调用后的下一条指令处恢复操作。

我猜你的来源看起来像这样：

```
void main()
{
    int x =0, y=0;
    printf("%d, %d", x, y);
} 
```

根据您的操作系统/编译器，您可能会保证 eax 和 edx 在启动时的值为 0。或者您可能缺少代码段中的初始化代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-30T03:51:13.770

从表面上看，这会将三个参数放入堆栈——两个整数来自`edx`and `eax`，加上看起来像地址的东西——大概是它选择存储字符串文字的地址（即格式字符串）。之后，它调用`printf`.

因此，最重要的是，它看起来像是您在问题中提供的源代码的一个非常简单的实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T04:02:35.717

`mov %edx,0x8(%esp)`：正在将 edx 的值移动到堆栈指针（偏移量为 0x8）。
`mov %eax,0x4(%esp)`: 参考上面。
`movl $0x80486a0,(%esp)`：正在加载堆栈指针中的地址 0x80486a0。
`call 8048360 <printf@plt>`: 正在调用函数 printf。

# jsp - 检索 servlet 上下文路径

> ID：12658462
> 
> 赞同：0
> 
> 时间：2012-09-30T03:45:57.123
> 
> 标签：jsp, servlets

我正在使用 Netbeans 7 开发我的 web 项目。我需要将从客户端接收到的图像存储到 web/images 文件夹。

```
String location = getServletContext().getRealPath("/images"); 
```

如果我使用此代码，我将获得位置

```
C:\Users\Computer\Documents\NetBeansProjects\test\build\web\images 
```

但我需要存储

```
 C:\Users\Computer\Documents\NetBeansProjects\test\web\images 
```

我需要稍后在我的 jsp 页面中显示这些图像，所以这些图像必须在 web\images 文件夹中，不是吗？？？....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T04:00:17.643

您是否绝对有必要将它们存储在部署文件夹中？如果人们正在上传图片，通常将它们存储在数据库中是一种更好的做法。（如果它们很小）或者在与部署不同的目录中。将它们存储在部署中会导致它们在每次需要重新部署时被删除。如果您采用我建议的路线，您将需要编写一个简单的 servlet，该 servlet 能够重新提供您的客户提交的图像，从您存储它们的位置。

如果您使用的是 tomcat，您可以将文件存储在您喜欢的任何位置。然后创建一个过滤器，通过将以下内容添加到 server.xml 文件中，将所有请求传递到已定义 url 到主机上的特定目录：

```
<Context path="/clientrequestpath/images" docBase="/serverpath/images/" /> 
```

其中 path 是浏览器发送的请求 URL，而 docBase 是您在主机上本地存储图像的位置。这种情况下不需要编写servlet，只需将数据库中存储的图片名称发送到客户端时，将其添加到jsp中的tag中，客户端就会自动请求图片文件。

# android - 关于Android SDK中MediaPlayer的几个问题

> ID：12658465
> 
> 赞同：0
> 
> 时间：2012-09-30T03:48:03.513
> 
> 标签：android, mp3, media-player, android-mediaplayer

出于某种原因，我发现一些关于 MediaPlayer 的文档不清楚（可能只是我，因为我是 android SDK 的新手），但无论如何......

最初我认为一个 MediaPlayer 实例存储了一个轨道，但在注意到 MediaPlayer#setTrack 之后，我假设一个可以将多个轨道存储到一个 MediaPlayer 对象中。

所以这是我的问题，我有一个 MP3 文件的文件，如果可能的话，我如何将所有这些 MP3 文件作为音轨存储到 MediaPlayer 对象中？这些 MP3 文件是否需要存储到 res/raw 或 assets 文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T03:56:53.093

MP3 文件应该进入您的资产文件夹。

您应该将 setDataSource 与 mp3 文件的路径一起使用，如下所示：

```
 String path = getExternalFilesDir(null).toString() + "/" + mediafile;
        mMediaPlayer.setDataSource(path); 
```

其中 'mediafile' 是您的 mp3 文件的文件名。反正我就是这样做的。

您可以更改数据源以播放不同的曲目，假设每个曲目都有不同的 mp3 文件。

# performance - 在 XE3 中使用自动更新进行实时绑定（无需像在 XE2 中那样调用 Notify()）

> ID：12658470
> 
> 赞同：64
> 
> 时间：2012-09-30T03:49:35.160
> 
> 标签：performance, delphi, data-binding, virtualization, delphi-xe3

我目前正在使用 Delphi XE2，并听说了他们在 XE3 中使用自动更新的新实时绑定（无需像在 XE2 中那样调用 Notify()）。

在 C# 或 Delphi XE2 中，我们必须实现`INotifyPropertyChanged`（`Notify();`在 Delphi 中），这种方法非常有意义，因为我们可以完全控制要更新的内容以及何时更新它，这样我们就可以微调性能并轻松实现虚拟化。

但我只想知道它是如何工作的，他们为了实现它做了什么样的机制，我不知道他们是如何做到的，以下是可能用于实现自动更新的假设。

1.  Timer : 一个计时器频繁滴答并刷新所有数据

    > *性能非常慢，没有虚拟化*

2.  编译器级别功能：`notify() events`编译器自动执行的所有相关代码

    > *很多过头*

3.  其他一些方法：

请帮助我确定他们是如何实施它的。

我目前正在使用 XE3 试用版，因此无法访问源代码，**您的回答将帮助我决定是否切换到新功能**。
我有一个类（集合项），它有 400 个要绑定的属性（并非一直都是），所以性能确实对我的应用程序的稳定性起着重要作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T20:39:28.067

LiveBindings 通过基于某些事件将任何对象与另一个感兴趣的对象绑定来发生。这是通过观察者模式发生的，当有事件触发时，将通知对象检查器，并且检查器将通知已注册的组件显示更改。

希望这可以帮助。如果您想四处挖掘，有很多文档。

# c - c中的图像平滑

> ID：12658471
> 
> 赞同：0
> 
> 时间：2012-09-30T03:49:40.607
> 
> 标签：c, arrays, image, 2d, smoothing

好的，所以我试图让用户输入列数和行数，然后让输出显示一个随机数矩阵，然后是一个平滑图像矩阵，该矩阵为数组中的每个像素找到均值滤波器。现在我有它可以给我一个随机数矩阵，但平滑矩阵完全不正常。现在我写的代码只关注有 4 个邻居的整数，但很明显我做错了什么。

```
#include <stdio.h>
#include <stdlib.h>
#include <conio.h>
#include <time.h>
// function that randomly generates numbers 
void fillArray(int a[10][20], int m, int n)
{
  int random;
  int i,j;   
      for (i=0;i<m;i++)
      {
          for (j=0;j<n;j++)
          {
                           random=rand()%100;
                           a[i][j]=random;
                           }
                           }
  }
  // function that prints the first matrix of random numbers
  void printarray (int a[10][20], int m, int n)
 {
 int i,j;
for (i=0;i<m;i++) 
{
    for (j=0;j<n;j++)
        {
                     printf("%4d", a[i][j]);
                     }
                     printf("\n");
                     }
  }
  // function that finds the mean for any number and its 4 nieghbors 
  void smooth (int a[10][20], int m, int n)
 {

 int i,j;
 for (i=1;i<m;i++) 
{
    for (j=1;j<n;j++)
    {
        a[i][j]=a[i][j]=(a[i-1][j]+a[i][j-1]+a[i+1][j]+a[i][j+1])/4;
        printf("%4d",a[i][j]);
        }
        printf("\n");
 }
 }
 int main()
{

int a[10][20];
 int m,n;
 srand(time(NULL));
 //User input
 printf("please enter number of columns and rows");
 scanf("%d %d", &m,&n);
 fillArray(a,m,n);
 printarray (a,m,n);
 printf("The smoothed image is\n");
 smooth(a,m,n);
 getch();
return 0;
} 
```

现在，如果我输入 3 和 3，我会得到这样的结果：

```
23 43 54
12 76 89
56 98 24

The smoothed image is
347373849493234343
12 23345345345
2132334565645645645 
```

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T04:26:29.047

看起来您访问了未在随机数生成函数中初始化的 a[m][..] 和 a[..][n] （例如，因为您在 i < m 时循环并访问 i+1）。

编辑：分配值时，每个循环从 0 变为 m-1 / n-1

```
for (i=0;i<m;i++)
      {
          for (j=0;j<n;j++)
          {
                           random=rand()%100;
                           a[i][j]=random;
                           }
                           } 
```

但是，当您使用这些值时，每个循环都从 1 变为 m-1/n-1，但在此循环内您使用相邻单元格（i-1、j-1、i+1、j+1）

```
 for (i=1;i<m;i++) 
{
    for (j=1;j<n;j++)
    {
        a[i][j]=(a[i-1][j]+a[i][j-1]+a[i+1][j]+a[i][j+1])/4;
        }
 }
 } 
```

这意味着在最后一次迭代（i = m - 1）中，您访问未初始化的单元格，因为您访问 i+1 = m 请记住，多维数组实际上是内存中的一维数组，所以有些这些调用中的一些并不是真正针对未初始化的值，但有些是

要解决此问题，您可以在分配阶段循环直到 m/n（而不是 m-1/n-1）

# ruby-on-rails - 如何将 Capistrano 与 Apache 或 Nginx 一起使用？

> ID：12658473
> 
> 赞同：3
> 
> 时间：2012-09-30T03:50:20.743
> 
> 标签：ruby-on-rails, apache, deployment, nginx, capistrano

运行时`cap deploy`可以创建一些文件夹，例如**releases**或**shared**。它们与Apache或Nginx的服务器根有什么关系？

这种方法对吗？（这是一个 Nginx 配置）

```
server {
  listen 80;
  server_name www.yourhost.com;
  root /releases/...;   # Which path to be here???
  passenger_enabled on;
} 
```

还有，`cap deploy`web server 运行后可以自动重启吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T05:26:35.303

部署时，capistrano 在发布文件夹中创建一个文件夹，然后将该文件夹符号链接到`/your_app/current`.

由于您向公众公开的 Rails 应用程序部分是`public`文件夹，因此您需要将 nginx 配置中的根设置为：

```
root /path_to_your_app/current/public; 
```

每次部署`current`都会有效地从源刷新其内容，任何未提交到源代码管理的数据都将丢失，这就是共享文件夹的来源。共享文件夹将包含不会出现的内容版本控制，但您不想在每次部署时丢失 - 应用程序日志、上传的图像等。

这是如何使用共享文件夹进行上传的一个很好的例子：[http ://www.simonecarletti.com/blog/2009/02/capistrano-uploads-folder/](http://www.simonecarletti.com/blog/2009/02/capistrano-uploads-folder/)

可以通过 deploy.rb 中的以下任务来重新启动 Web 服务器：

```
namespace :deploy do
  task :restart do
    run "touch #{current_path}/tmp/restart.txt"
  end
end 
```

Phusion 乘客监控此文件，并在创建时触发重新启动。

# xml - XML Validates 和 XSLT 很好，但它没有返回我希望的结果

> ID：12658474
> 
> 赞同：1
> 
> 时间：2012-09-30T03:50:48.310
> 
> 标签：xml, xslt, tags, xsd

我目前正在做 XML 和 XSLT，我有一个问题

我已经完成了所有工作并且验证良好，但没有给我正确的答案。一种运行良好的解决方案是使用 CDATA，但我想使用 xmlns="http://www.w3.org/xhtml。

这是我的相关代码

XML 模式

```
 <xs:element name="bb">
            <xs:complexType mixed="true">
                <xs:sequence>
                    <xs:any namespace="http://www.w3.org/1999/xhtml"
                            minOccurs="0"
                            maxOccurs="unbounded" 
                            processContents="skip"/>
                </xs:sequence>          
            </xs:complexType>
        </xs:element> 
```

XSLT

```
<xsl:template match="xsi:bb">
    <div style="font-family:calibri;font-size:16">
        <span style="color:#000"> 
            Babo is: 
        </span> 
        <xsl:value-of select="." disable-output-escaping="yes"/>
    </div>
</xsl:template> 
```

XML

```
<bb>
    <li xmlns="http://www.w3.org/1999/xhtml"> 
        hoby
    </li> 

    <li xmlns="http://www.w3.org/1999/xhtml"> 
        the best
    </li> 
</bb> 
```

根据我的理论，它应该返回（当我将 XML 转换为 HTML 时）

*   爱好*   最好的

但这只是最好的回报。

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T06:42:48.267

我认为您需要在 li 元素上应用模板。xsl:value-of run for a subtree 将读取并连接所有文本节点。AFAIR（可能是错误的 - 您可能需要仔细检查）禁用输出转义用于文本节点的内容，而不是用于文本节点所属的元素。原因是 li 元素（在您的情况下）是树中的单独元素，并且在内部被视为元素而不是元素。如果您只想按原样复制 li 元素，则可以使用以下内容：

```
<xsl:copy-of select="xhtml:li" xmlns:xhtml="http://www.w3.org/1999/xhtml"/> 
```

（或者如果你想复制所有元素：

```
<xsl:copy-of select="*" /> 
```

)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T13:42:44.083

**了解 之间的区别**：

[**`<xsl:value-of>`**](http://www.w3.org/TR/1999/REC-xslt-19991116#value-of)

**和**

**[`<xsl:copy-of>`](http://www.w3.org/TR/1999/REC-xslt-19991116#copy-of)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T20:44:00.320

您还没有告诉我们前缀“xsi”绑定到哪个名称空间，但是这个前缀的常规绑定是 XML 模式实例名称空间，它不太可能包含名为 xsi:bb 的元素。可能出于这个原因，您的模板规则不匹配任何内容，您只是从文本节点的默认模板中获取输出。

# asp.net-mvc - 如何让我的站点在 ASP.NET MVC 中恢复到其原始种子数据？

> ID：12658480
> 
> 赞同：0
> 
> 时间：2012-09-30T03:52:32.660
> 
> 标签：asp.net-mvc

我正在学习教程，但我不得不删除一些实体来进行一些测试。我有一个类的数据：

```
public class SampleData : DropCreateDatabaseIfModelChanges<MusicStoreEntities>
{
    protected override void Seed(MusicStoreEntities context)
    {
       // Data
    }
} 
```

但我不确定如何让网站恢复到 MVC 中的原始种子数据。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T03:55:42.913

做了：

```
public class SampleData : DropCreateDatabaseAlways 
```

删除数据库并重新创建它。之后再转回来。或者更好的是，如果您知道如何操作，您可以直接从 SQLEXPRESS（或您使用的任何数据库提供程序）中删除数据库。那时你不需要做这一切。

# javascript - iframe 自动滚动到底部

> ID：12658482
> 
> 赞同：1
> 
> 时间：2012-09-30T03:53:48.650
> 
> 标签：javascript, scrollbar

我无法使此代码工作，刷新 iframe 时 iframe 应自动向下滚动到底部。

[小提琴](http://jsfiddle.net/Blender/SfFje/6/)

代码：

```
<html>
<!--
  Created using jsbin.com
  Source can be edited via http://jsbin.com/ujuci5/2/edit
-->
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
</head>
<body>
  <p>iframe:</p>
  <iframe src="http://jsbin.com/aloko5" id="frame" frameborder="0" width="200px" height="300px"></iframe>
<script>
$(window).load(function ()
{
  var $contents = $('#frame').contents();
  $contents.scrollTop($contents.height());
});
</script>

</body>
</html>​ 
```

cn 有人帮我解决这个问题，我有点卡住了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T04:14:05.623

您可以访问 iframe 中的代码吗？我相信您需要在 iframe 代码本身中设置 scrollTop 。

例如：

```
$("body").scrollTop(100); 
```

编辑：在此处查找更多信息：[如何获取 iframe 的 scrollTop](https://stackoverflow.com/questions/1852518/how-to-get-scrolltop-of-an-iframe)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T04:17:07.910

要拦截的 onLoad 事件应该是来自 iframe 本身的事件，而不是来自窗口的事件。

此外，Blender 的评论部分有效。

仅当在 iframe 中打开的文档与父文档属于同一域时，此设置才有效。并使用相同的协议：

```
- http://domain/main.aspx as the container and http://domain/inner.aspx at the iframe is valid
- http://domain/main.aspx as the container and https://domain/inner.aspx at the iframe will be blocked
- http://domain/main.aspx as the container and http://another/inner.aspx at the frame will also be blocked 
```

（从我的 PDA 发送）

# xcode - Bitbucket + Xcode 没有显示正确的项目

> ID：12658483
> 
> 赞同：0
> 
> 时间：2012-09-30T03:53:49.427
> 
> 标签：xcode, git, bitbucket, repository

我刚刚用 Xcode 设置了 bitbucket git repo。我在移植到 BitBucket 的 MacBook Pro 上有一个本地存储库。然后在我的新 iMac 上，我添加了 repo 并克隆了它。在项目文件夹中，所有文件都在那里，iPhone 故事板、iPad 故事板等，但是当我在 Xcode 中打开项目文件时，无论是通过在 Xcode 中打开还是通过单击项目文件，它都会打开一个基本上只有 iPhone 故事板的空白项目和项目名称。

不知道为什么会发生这种情况，因为整个项目都在 iMac 上

编辑：

它现在可以在我的 iMac 上运行，但我的 MacBook 上的版本永远不会推送，因为它说有未提交的更改，但它始终是同一个文件`UserInterfaceState.xcuserstate`无论我提交多少次，它似乎认为它仍然有未提交的更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T05:03:08.637

在 git 中有一些文件可以放心地忽略。`UserInterfaceState.xcuserstate`是其中之一。这里有一个[很好的答案](https://stackoverflow.com/a/4684751/459116)，列出了其他人。

# codeigniter - 在 MongoDB 查询中结合 AND 和 OR

> ID：12658490
> 
> 赞同：3
> 
> 时间：2012-09-30T03:55:51.923
> 
> 标签：codeigniter, mongodb

我正在为使用 mongo 进行汽车存储的汽车网站构建一个非常复杂的搜索公式。我发现其中的大部分内容都非常简单。它目前支持按车身样式、新车/二手车等进行过滤。不过，我遇到问题的地方是它默认为新车和二手车，因为它们都有单独的价格范围（计算的低和高价格基于每月付款范围）。我怎样才能使这项工作？

例如，如果它只是一辆二手车，我们将使用这个 (CodeIgniter) 代码：

```
$this->mongo_db->where('stock_type', 'used');
$this->mongo_db->where_between('internet_price', $amounts['bottom_amt_used'], $amounts['top_amt_used']); 
```

我们为新车做类似的事情。单独工作很好。我如何组合这些以便我可以找到

*   IF stock_type = new, WHERE_BETWEEN(a, b)
*   或 IF stock_type = false, WHERE_BETWEEN(c, d)

并将其与其他过滤器结合使用，例如 WHERE body_style IN (...)?

我们正在使用 CodeIgniter 和 Alex Bilbie 的 mongodb 库，这可能会使事情变得复杂，我在想。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T06:49:12.203

在 Mongo shell 中，查询非常简单。你可以使用类似的东西：

```
db.vehicle_stock.find({ $or: [ { stock_type: 'used', internet_price: { $gte: 123, $lte: 145 }}, { stock_type: 'new', internet_price: { $gte: 161, $lte: 184 }} ]}); 
```

您可以尝试使用 Alex Bilbie 的图书馆类似的东西：

```
$this.mongo_db->where(array(
  '$or' => array(
    array( 'stock_type' => 'used', 'internet_price' => array( '$gte' => 123, '$lte' => 145 )),
    array( 'stock_type' => 'new', 'internet_price' => array( '$gte' => 161, '$lte' => 184 ))
  )
)); 
```

# algorithm - 使用后缀树/数组的最长非重叠重复子串（仅限算法）

> ID：12658494
> 
> 赞同：14
> 
> 时间：2012-09-30T03:57:47.970
> 
> 标签：algorithm, substring, suffix-tree, suffix-array

我需要在字符串中找到最长的非重叠重复子字符串。我有可用的字符串的后缀树和后缀数组。

当允许重叠时，答案很简单（后缀树中最深的父节点）。

例如对于 String = "acaca"

如果允许重叠，则答案为“aca”，但不允许重叠时，答案为“ac”或“ca”。

我只需要算法或高级想法。

PS：我试过了，但在网上找不到明确的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-11T20:11:21.227

生成后缀数组并在 O(nlogn).ps 中排序：有更有效的算法，如 DC3 和 Ukkonen 算法。例子：

字符串：ababc 后缀数组：子字符串的起始索引 | 子串
0 - ababc
2 - abc
1 - babc
3 - bc
4 - c

* * *

比较每两个连续的子串并得到具有以下约束的公共前缀：
说**i1**是子串“ **ababc** ”的索引：**0**
说**i2**是子串“ **abc** ”的索引：**2**
通用前缀是“ **ab** ”，公共前缀的长度是**len**

* * *

***abs(i1-i2) >len*** //避免重叠

* * *

用解遍历后缀数组，得到“ababc”的结果，即“ **ab** ”；

整个解决方案将运行 O(nlogn)

但是，会有一个特殊情况：“aaaaa”，这个解决方案无法彻底解决。
欢迎讨论并提出解决方案 O(nlogn) 但不是 O(n^2)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-28T13:25:08.930

不幸的是，Perkins 提出的解决方案行不通。我们不能强行通过解决方案来找到一个长时间重复的非重叠子字符串。考虑香蕉的后缀树：[http](http://en.wikipedia.org/wiki/Suffix_tree) ://en.wikipedia.org/wiki/Suffix_tree 。首先考虑以“A”为父节点的“NA”分支节点，因为它的长度最大并且是一个分支节点。但是它构造的字符串“ANA”是重叠的，所以会被拒绝。现在，要考虑的下一个节点是“NA”，它将显示非重叠长度为 2，但永远不会考虑子字符串“AN”，因为它已经在已经考虑的 ANA 字符串中表示。因此，如果您正在搜索所有重复的非重叠子字符串，或者当有'

显然有一种涉及后缀树的方法有效，但这里列出了更简单的方法：[http ://rubyquiz.com/quiz153.html](http://rubyquiz.com/quiz153.html)

希望这可以帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-25T12:31:38.777

通过构建后缀树，所有共享前缀 P 的后缀都将是树中共同祖先的后代。通过存储该子树的后缀的最大和最小索引，我们可以保证长度为 min(depth, max-min) 的重复非重叠子串，其中 max-min 是它们之间的距离，depth 是他们的共同前缀。期望值是具有最大该值的节点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-08-25T21:57:02.230

由于我很难找到一个工作算法的清晰描述，以使用后缀树获得最长的非重叠重复子字符串，我想分享我从各种来源收集的版本。

**算法**

1.  为输入字符串*S构造后缀树（以**S*中不出现的特殊字符结尾）。每个叶节点对应于 S 的一个后缀*S* *i [，]*并被分配了S *i**[在]*S*中对应的起始位置**i*。
**   为树中的每个节点分配一对*(i [min] , i [max] )*，指示该子树处的最小和最大后缀索引。
    1.  对于每个叶子*i [min] = i [max] = i*。
    2.  对于每个内部节点， *i [min]*是最小值，*i [max]*是所有后代节点索引的最大索引。*   对于所有内部节点*v*，让*P [v]**表示通过连接从根到v*的路径上的所有边缘标签（前缀）获得的字符串。收集所有满足*i* *[min]* + length( *P [v]* ) ≤ *i* *[max]**的P* *[v]*对应的*i* *[min]*和*i* *[max]*在*v*。**   这些*P [v]**中最长的一个是S*中至少出现两次的最长的非重叠子串。**

 ****解释**

如果 S 的子串在*S**中*至少出现两次，则它是两个后缀*S* *[i]*和*S* *[j]*的公共前缀*P*，其中*i*和*j*表示它们各自在*S*中的起始位置。*因此，在S*的后缀树中存在一个内部节点*v* ，它具有两个对应于*i*和*j*的后代叶子，使得从根到*v*的路径的所有边标签的串联等于*P。*

 ***最深的此类节点*v*（就其对应前缀的长度而言）标记了*S中最长的、**可能重叠*的重复子串。为了确保不考虑重叠子串，我们必须确保*P*不超过*i*和*j*之间的距离。

 ***因此，我们计算每个节点的最小和最大索引*i [min]*和*i [max]*，它们对应于共享公共前缀的*S的最左侧和最右侧后缀的位置。*一个节点的最小和最大索引可以很容易地从其后代的值中获得。（如果我们要寻找至少出现*k*次的最长子串，则索引计算会更加复杂，因为必须考虑所有后代索引的距离，而不仅仅是相距最远的两个。）仅考虑满足*i* *[min]* + length( *P* ) ≤ *i*的前缀*P***[最大]*我们确保*从S* *[i]*开始*的P*足够短，不会与后缀*S* *[j]*重叠。*

 ***补充说明**

*   *长度为n*的字符串的后缀树可以在 Θ( *n* ) 时间和空间内构建。对该算法的修改不会使渐近行为恶化，使得整体运行时间仍然在 Θ( *n* ) 中。
*   该算法无法找到所有可能的解决方案。如果有多个不重叠的最长子串，则只找到从最大位置开始的子串。
*   应该可以修改算法以计算最长不重叠子串的重复次数，或者只找到至少有*k*次重复的解决方案。为此，不仅要考虑最小和最大索引，还要考虑节点处所有子树的索引。然后必须为每个相邻的索引对保持上述范围条件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-30T04:06:33.143

最简单的解决方案是蛮力攻击。你有一个算法可以找到最长的允许重叠的字符串，使用它，检查那个答案是否有重叠，如果有，找到第二长的，检查它是否有重叠，等等。这将其减少为您现有的搜索算法，然后是正则表达式计数操作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-25T18:46:34.367

这可以使用“计算最长先前非重叠因子”中给出的结果来解决（参见[http://dx.doi.org/10.1016/j.ipl.2010.12.005](http://dx.doi.org/10.1016/j.ipl.2010.12.005)）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-05T23:32:00.390

我们使用[最长公共前缀（LCP）数组](https://en.wikipedia.org/wiki/LCP_array)和后缀数组在 O(n log n) 时间内解决这个问题。

LCP 数组为我们提供了后缀数组中两个连续后缀之间的最长公共前缀。

构造完LCP数组和后缀数组后，我们就可以对答案的长度进行二分查找了。

假设字符串是“acaca$”。后缀数组在代码片段中以表格形式给出。

```
<table border="1">
<tr><th>Suffix Array index</th><th>LCP</th><th>Suffix (implicit)</th></tr>
<tr><td>5</td><td>-1</td><td>$</td></tr>
<tr><td>4</td><td>0</td><td>a$</td></tr>
<tr><td>2</td><td>1</td><td>aca$</td></tr>
<tr><td>0</td><td>3</td><td>acaca$</td></tr>
<tr><td>3</td><td>0</td><td>ca$</td></tr>
<tr><td>1</td><td>2</td><td>caca$</td></tr>
</table>
```

让我们对答案的长度进行二进制搜索。

如果我们有一定的答案，让两个子串对应两个后缀。

不能保证这些后缀在后缀数组中是连续的。但是，如果我们知道子字符串的长度，我们可以看到 LCP 表中两个子字符串后缀之间的每个条目都至少是那个数字。此外，两者的索引之间的差异必须至少是那个数字。

假设子字符串的长度是一定的，我们可以考虑连续运行的 LCP 数组条目至少是这个数量。在每次连续运行中，找到具有最大和最小索引的后缀。

**我们怎么知道我们的猜测是一个下限？**

如果某些 [至少是我们猜测的 LCP 数组条目的连续运行] 中最大和最小索引之间的距离至少是我们的猜测，那么，我们的猜测是一个可达到的下限。

**我们怎么知道我们的猜测太大了？**

如果所有 [至少是我们猜测的 LCP 数组条目的连续运行] 中最大和最小索引之间的距离小于我们的猜测，那么，我们的猜测太大了。

**给定答案的长度，我们如何找到答案？**

对于每个 [至少是答案的 LCP 数组条目的连续运行]，找到最低和最高索引。如果它们至少在答案上有所不同，那么我们返回最长的非重叠重复子字符串从这些索引开始。

在您的示例“acaca$”中，我们可以发现答案的长度为 2。

所有的runs都是：“aca$”，“acaca$”，下标和上标之间的距离是2，导致重复的子串“ac”。

"caca$", "ca$", 下标和上标之间的距离为 2，导致重复的子串 "ca"。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-25T20:41:20.823

完整代码：

```
#include <bits/stdc++.h>
using namespace std;
int cplen(string a,string b){
    int i,to=min(a.length(),b.length());
    int ret=0;
    for(i=0;i<to;i++){
        if(a[i]==b[i])ret++;
        else {
            return ret;}
        }
    return ret;
    }
int main(){
    {
        int len,i;
        string str;
        cin>>str;
        len=str.length();
        vector<pair<string,int> >vv;
        map<char,int>hatbc;
        string pp="";
        for(i=len-1;i>=0;i--){
            hatbc[str[i]]++;
            pp=str.substr(i,len-i);
            vv.push_back(make_pair(pp,i));
            }
        if(len==1 || (int)hatbc.size()==len){
            printf("0\n");
            continue;
            }
        if(hatbc.size()==1){
            printf("%d\n",len/2);
            continue;
            }
        char prev=str[0];
        int foo=1,koo=0;
        for(i=1;i<len;){
            while(str[i]==prev && i<len){i++;foo++;}
            prev=str[i];
            i+=1;
            if(koo<foo)koo=foo;
            foo=1;
            }

        sort(vv.begin(),vv.end());
        int ans=0;
        ans=koo/2;
        for(i=1;i<(int)vv.size();i++){
            int j=i-1;
            int a=vv[j].second,b=vv[i].second;
            string sa=vv[j].first,sb=vv[i].first;
            int cpl;
            cpl=cplen(sa,sb);
            if(abs(a-b)>=cpl)
                ans=max(ans,cpl);
            }
        printf("%d\n",ans);
        }
    return 0;
    } 
```

复杂性：O(n*log(n))（由于排序）*********

# c# - 如何根据需要自动调整图像高度和长度

> ID：12658496
> 
> 赞同：1
> 
> 时间：2012-09-30T03:58:25.167
> 
> 标签：c#, winforms, image, bitmap

我有一段代码可以生成条形码图像（使用`Free 3 of 9`字体）；尽管如此，图片尺寸是提前定义的，我想知道我该怎么做才能将它调整到所需的尺寸？

```
 private static Bitmap CreateBarcode(string code)
    {
        var myBitmap = new Bitmap(500, 50);
        //var myBitmap = new Bitmap();
        var g = Graphics.FromImage(myBitmap);
        var jgpEncoder = GetEncoder(ImageFormat.Jpeg);
        g.Clear(Color.White);
        var strFormat = new StringFormat { Alignment = StringAlignment.Center };
        g.DrawString(code, new Font("Free 3 of 9", 50), Brushes.Black, new RectangleF(0, 0, 500, 50), strFormat);
    var myEncoder = System.Drawing.Imaging.Encoder.Quality;
    var myEncoderParameters = new EncoderParameters(1);

    var myEncoderParameter = new EncoderParameter(myEncoder, 100L);
    myEncoderParameters.Param[0] = myEncoderParameter;
    return myBitmap;
}

private static ImageCodecInfo GetEncoder(ImageFormat format)
{
    var codecs = ImageCodecInfo.GetImageDecoders();
    foreach (var codec in codecs)
    {
        if (codec.FormatID == format.Guid)
        {
            return codec;
        }
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T04:39:26.427

我想你正在寻找`Graphics.MeasureString`方法。这将测量您正在绘制的字符串的结果图像表示的大小，允许您计算位图的大小。如果它不适合，请在绘制之前放大位图，或者如果它太小，请裁剪它。[MSDN 为`Measure String`](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.measurestring%28v=vs.71%29.aspx)

# drupal - Drupal 中的数据库驱动的选择表单（下拉）块

> ID：12658497
> 
> 赞同：0
> 
> 时间：2012-09-30T03:58:41.163
> 
> 标签：drupal, drupal-forms

我对 Drupal 完全陌生，请原谅我在我的问题中做出的任何可怕的假设/错误。

我正在尝试向我的侧边栏添加一个数据库驱动的下拉框。我目前正在通过创建一个自定义块来做到这一点（这甚至是正确的方法吗？）。目前，当我什至可以完全渲染块时，它只显示单词“Array”，而不是内容。我已经测试了我的“getGames”函数的输出并且正确地填充了数组。

这是当前代码：

```
<?php
$games_array = getGames();

return drupal_get_form('gamesForm', $games_array);

function getGames()
{
    $query = "SELECT ID, Name FROM drupGN.Game ORDER BY Name;";
    $results =  db_query($query);

    foreach ($results as $item) {
        $key = $item->ID;
        $value = $item->Name;
        $games_array[$key] = $value;
    }

    return $games_array;
}

function gamesForm($form_state, $games_array)
{
    $form['games'] = array(
        '#type' => 'select',
        '#title' => 'Game Name',
        '#options' => $games_array,
        '#required' => TRUE,
    );

    return $form;
}
?> 
```

就像我说的，数据库连接正常，$games_array 数据已成功填充。只是表单显示似乎无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T02:11:50.327

代替

```
return drupal_get_form('gamesForm', $games_array); 
```

和

```
return drupal_render(drupal_get_form('gamesForm', $games_array)); 
```

由于您没有提到您的 Drupal 版本，并且您说您在块中看到“Array”，我最好的猜测是您的 Drupal 版本是 7。Drupal 7 表单需要在某处调用 drupal_render（它在页面回调中自动发生但不是块）。这就是为什么你在那里看到“数组”这个词的原因。

仅供参考，这不是正确的方法。您可以轻松编写定义新块及其 block_view 函数的自定义函数。您甚至可以使用模块方法制作页面/块组合。

# capistrano - 带有 Capistrano 的 Dreamhost 独立乘客无法识别当前/公共网络目录

> ID：12658498
> 
> 赞同：1
> 
> 时间：2012-09-30T03:58:46.940
> 
> 标签：capistrano, passenger, dreamhost

我刚刚在 Dreamhost 设置了一个 VPS。安装我的第一个 Ruby on Rails 应用程序很顺利，使用 github 帐户的克隆来获取代码。我进行了Passenger 的独立安装，因为我需要最新版本的Ruby 和Rails（参见[http://wiki.dreamhost.com/RVM](http://wiki.dreamhost.com/RVM)）。

现在我正在设置我的第二个使用 Capistrano 的 RoR 应用程序，这意味着 web 目录需要是 current/public 而不是 /public。我已经能够使用 Capistrano 部署代码，但是在尝试启动Passenger 时我不断收到错误：

```
2012/09/29 20:34:29 [error] 10475#0: *4 "/home/<user>/<domain>/public/index.html" is not found (2: No such file or directory), client: 127.0.0.1, server: _, request: "HEAD / HTTP/1.1", host: "0.0.0.0" 
```

我已经在 Dreamhost 控制面板中验证了 Web 目录设置正确（mydomain.com/current/public），但显然它没有认识到这一点。

有什么建议可以在哪里寻找问题？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:14:13.400

终于让它工作了。问题是我需要在“当前”目录中启动Passenger Standalone，而不是应用程序的根目录。希望这可以帮助其他在类似设置中苦苦挣扎的人。

# ios - iOS：从 AVFoundation 的主线程有选择地禁用对 captureOutput:didOutputSampleBuffer:fromConnection: 的处理

> ID：12658500
> 
> 赞同：1
> 
> 时间：2012-09-30T03:59:20.100
> 
> 标签：ios, multithreading, avfoundation, grand-central-dispatch, race-condition

`captureOutput:didOutputSampleBuffer:fromConnection:`我需要有选择地（并且可靠地）在我的方法中关闭对 sampleBuffers 的处理。如您所知，它是从 GCD 队列中调用的，而不是在主线程中调用的……但是我从 UIButton （当然在主线程中）获取用户输入，并通过设置 BOOL 标志告诉我的相机对象停止所有处理.

但是，有时我会在据称停止处理后看到 1 个额外的帧从裂缝中溜走。有什么方法可以绝对确定按下按钮后不会处理任何内容？现在我正在做一个简单的测试：

```
// in ViewController:
- (IBAction)tappedStop:(id)sender {
    NSLog("stop processing!");
    _camera.capturing = NO;
}

// in my camera obj:
- (void)captureOutput:(AVCaptureOutput *)captureOutput did... {
    if (!capturing) {
        return;
    }
    NSLog(@"processing!");
} 
```

我试过使用@synchronized，一个静态布尔，并使用一个信号量，但无济于事......有时那个额外的帧仍然潜入。任何人都有想法吗？可能有一些 GCD 方法可以满足我的要求，但我不确定如何去做。

以下是结果（有时）在我的调试控制台中的外观（缩短以使其更具可读性）：

```
2012-09-29 23:29:01.869 __33-_block_invoke_0 [Line 322] processing!
2012-09-29 23:29:01.910 __33-_block_invoke_0 [Line 322] processing!
2012-09-29 23:29:01.953 __33-_block_invoke_0 [Line 322] processing!
2012-09-29 23:29:01.994 __33-_block_invoke_0 [Line 322] processing!
2012-09-29 23:29:02.047 __33-_block_invoke_0 [Line 322] processing!
2012-09-29 23:29:02.078 __33-_block_invoke_0 [Line 322] processing!
2012-09-29 23:29:02.121 __33-_block_invoke_0 [Line 322] processing!
2012-09-29 23:29:02.166 -[ViewController tappedButton:] [Line 913] stop processing!
2012-09-29 23:29:02.161 __33-_block_invoke_0 [Line 322] processing!
... 
```

但通常（大约五分之四）我的控制台看起来像：

```
2012-09-29 23:29:01.869 __33-_block_invoke_0 [Line 322] processing!
2012-09-29 23:29:01.910 __33-_block_invoke_0 [Line 322] processing!
2012-09-29 23:29:01.953 __33-_block_invoke_0 [Line 322] processing!
2012-09-29 23:29:01.994 __33-_block_invoke_0 [Line 322] processing!
2012-09-29 23:29:02.047 __33-_block_invoke_0 [Line 322] processing!
2012-09-29 23:29:02.078 __33-_block_invoke_0 [Line 322] processing!
2012-09-29 23:29:02.121 __33-_block_invoke_0 [Line 322] processing!
2012-09-29 23:29:02.166 -[ViewController tappedButton:] [Line 913] stop processing! 
```

我可能还应该提到我无法访问正在调用的原始队列，`captureOutput:didOutput...`因为它位于我无法控制的框架的超类中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T07:33:25.240

我不知道为什么我没有早点想到这一点，但是如果我将整个 captureOutput:didOutput... 方法包装在对主线程的异步调用中，即使它看起来有点不理想，关闭 sampleBuffer 处理也可以作为预期的。我想这是有道理的；我的触摸事件始终来自主线程，并且由于我没有在缓冲区输出队列中使用哪个线程的句柄，因此（我可以看到）可靠检查 isRecording 的唯一方法是从主线程执行此操作线程也。

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput did... {
    dispatch_async(dispatch_get_main_queue(), ^{
        if (!isRecording) {
            return;
        }

        NSLog(@"processing!");

        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
            // do actual processing
        });
    });
} 
```

如果有人有任何其他建议，但我很想听听。谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T23:57:27.783

我会这样做

```
// in ViewController:
- (IBAction)tappedStop:(id)sender {
    NSLog("stop processing!");
    dispatch_async(capture_dispatch_queue, ^{_camera.capturing = NO;});
} 
```

这将导致块被插入到串行调度队列中。它将在处理任何更多的成像处理块之前执行。就像现在一样，您在 _camera.capturing 变量上有一个竞争条件。这将通过相对于捕获回调串行执行变量集来解决竞争条件。

编辑：

> 我可能还应该提到，我无权访问调用 captureOutput:didOutput... 的原始队列，因为它位于我无法控制的框架的超类中。

我错过了那部分。那很难。从技术上讲，您可以通过 Objective-C 运行时访问它。但是，如果该 iVar 更改名称，您的代码就会中断。也许在您的情况下，您设计的解决方案是最好的。不过我会考虑的。好问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T00:47:25.297

您可以使用相机类本地的串行调度队列作为一种互斥体。基本思想是，所有需要同步的工作都将被分派到该队列——捕获变量的设置（可能还有获取），以及回调中完成的工作。这需要我将所有同步工作移至相机本身。我将日志保存为同步工作的一部分，以便您可以准确检测代码是否按顺序执行。每秒运行 60 次以模拟 60 fps 视频捕获似乎可以正常工作。

相机.h：

```
@interface Camera : NSObject

@property (nonatomic,getter = isCapturing) BOOL capturing;

@end 
```

相机.m

```
#define CALLBACK_INTERVAL (1.0/60.0)

@implementation Camera {
    dispatch_queue_t _sync_queue;
    BOOL _capturing;
}

- (id)init
{
    if (self = [super init])
    {
        _capturing = YES;
        _sync_queue = dispatch_queue_create("com.mycompany.whatever", NULL);
        [self performSelector:@selector(triggerCallback) withObject:nil afterDelay:CALLBACK_INTERVAL];
    }

    return self;
}

- (void)setCapturing:(BOOL)capturing
{
    dispatch_async(_sync_queue, ^{
        _capturing = capturing;
        if (!_capturing)
            NSLog(@"STOP");
    });
}

- (void)repeatingCallback
{
    dispatch_async(_sync_queue, ^{
        if (!_capturing)
            return;
        NSLog(@"WORKING");
    });
}

- (void)triggerCallback
{
    [NSObject cancelPreviousPerformRequestsWithTarget:self];
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        [self repeatingCallback];
    });
    [self performSelector:@selector(triggerCallback) withObject:nil afterDelay:CALLBACK_INTERVAL];
}

@end 
```

在视图控制器中：

```
- (IBAction)stopCapturing:(id)sender
{
    self.camera.capturing = NO;
} 
```

希望这会有所帮助，如果您有任何问题，请告诉我。要考虑的一件事是与回调频率相比，处理工作需要多长时间。如果需要更长的时间才能在队列上建立大量工作，那么`_capturing`在点击后可能需要一些时间来更改，这听起来可能是不可接受的，但仍应停止任何不在队列中的处理被窃听。

# css - 在保持正确缩放的同时使用 css 动态调整图像大小？

> ID：12658503
> 
> 赞同：0
> 
> 时间：2012-09-30T04:00:03.527
> 
> 标签：css, image-resizing

[http://jsfiddle.net/CJzCA/](http://jsfiddle.net/CJzCA/)

正如您在上面的 jsfiddle 中看到的，键盘图像与文本相比太大了，通常我会使用 photoshop 解决这个问题，但是有没有办法使用 css 来调整图像的大小（缩放）？

那么它就像在 jsfiddler 中调整值以调整图像大小一样简单，然后截图并裁剪结果以获得固定的正确图像大小，这将是一个非常有用的节省时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T04:07:44.080

您可以使用`background-size: contain;`来保留纵横比并将图像保留在元素内：

```
.dbutton, .ctrlbutton {
    vertical-align: middle;

    -webkit-background-size: contain;
    -moz-background-size: contain;
    -o-background-size: contain;
    background-size: contain;
} 
```

**演示：http: [//jsfiddle.net/Blender/CJzCA/2/](http://jsfiddle.net/Blender/CJzCA/2/)**

现在，您可以单独调整`width`和`height`，图像总是看起来不错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T04:02:17.310

在图像的每个链接中创建一个`img`内部，只需将宽度和高度更改为 css 中所需的值。这不需要CSS3。

# javascript - DNN 中的 Superfish 菜单自定义

> ID：12658505
> 
> 赞同：0
> 
> 时间：2012-09-30T04:00:45.583
> 
> 标签：javascript, jquery, dotnetnuke, superfish

我想添加

```
 <a href='' id="Megaanchor"> Home</a> 
```

到我的导航菜单链接..但是在 Superfish 中，如您所知...所有这些菜单内容都是由 Superfish.js 文件创建的，我无法通过自定义该 .js 脚本来添加它。

只需检查 Superfish.js 文件：

[http://users.tpg.com.au/j_birch/plugins/superfish/js/superfish.js](http://users.tpg.com.au/j_birch/plugins/superfish/js/superfish.js)

如果你知道，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T10:17:43.630

创建自己的皮肤对象以插入 DNN 皮肤非常容易。您的自定义皮肤对象可以完全按照您的意愿创建菜单。

皮肤对象： http: [//www.dotnetnuke.com/Resources/Wiki/Page/Skin-Objects.aspx](http://www.dotnetnuke.com/Resources/Wiki/Page/Skin-Objects.aspx) 创建皮肤对象： http: [//mitchelsellers.com/blogs/2008/02/20/creating-a-dotnetnuke -skinobject.aspx](http://mitchelsellers.com/blogs/2008/02/20/creating-a-dotnetnuke-skinobject.aspx)

或者，更简单的是，如果您使用的是 DNNStandard 菜单，您可以简单地更改 ULTokens.txt 以包含您的额外标记。

# ruby-on-rails - Rspec 测试失败：静态页面关于页面的标题应为“关于我们”Hartl Ch。3

> ID：12658511
> 
> 赞同：2
> 
> 时间：2012-09-30T04:01:57.690
> 
> 标签：ruby-on-rails, railstutorial.org

我正在学习 Michael Hartl 的 Ruby on Rails 教程，并且正在做第 3 章的练习。有人可以解释为什么这个测试失败了吗？

我遇到了失败

```
rspec ./spec/requests/static_pages_spec.rb:39 # 
Static pages About page should have the title 'About Us' 
```

控制器

```
 class StaticPagesController < ApplicationController
  def home
  end

  def help
  end

  def about
  end

  def Contact
  end
end 
```

关于.html.erb

```
<!DOCTYPE html>
<html>
<head>
<title>Ruby on Rails Tutorial Sample App | About Us</title>
</head>
<body>
<h1>About Us</h1> 
```

Spec.rb

```
describe "About page" do

  it "should have the h1 'About Us'" do
    visit '/static_pages/about'
  page.should have_selector('h1', :text => 'About Us')
end
it "should have the title 'About Us'" do
  visit '/static_pages/about'
  page.should have_selector('title',
                :text => "Ruby on Rails Tutorial Sample App | About Us")
  end
end 
```

路由.rb

```
SampleApp::Application.routes.draw do
  get "static_pages/home"

  get "static_pages/help"

  get "static_pages/about"

  get "static_pages/Contact"
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T04:24:38.890

尝试

```
page.should have_xpath("//title", :text => "About Us") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:53:31.630

如果您正在关注 MHartl 的教程并且您正在使用 gem 'Capybara'，我可以确认将您的 ':text => ...' 更改为 ':content => ...' 将使您的测试通过。感谢[@郭吉米](https://stackoverflow.com/users/1051942/kuo-jimmy)。

# python - Python 按名称排序

> ID：12658512
> 
> 赞同：2
> 
> 时间：2012-09-30T04:01:58.773
> 
> 标签：python

我尝试使用 sorted 进行排序

```
dir =["A1","A2","A10","A3"]
sorted(dir) 
```

我预期的数组是

```
["A1","A2","A3","A10"] 
```

但实际结果是

```
["A1", "A10", "A2", "A3"] 
```

如何在python中按名称对数组进行排序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T04:03:50.243

它是按字母顺序排序的，因此您需要分解数字并将它们转换为整数并以此进行排序。（字符串中的数字被视为只是字符，因此它“看到”“A10”并尝试先按“A”排序，然后按“1”，然后按“0”。）例如：

```
>>> sorted(dir, key=lambda x: int(x[1:]))
['A1', 'A2', 'A3', 'A10'] 
```

如果除了 "A" 之外还有其他字母`dir`，您将需要一种更复杂的排序方法，但这将是相同的方法。（如果您解释`dir`包含更多内容，我可以为此编写一个示例。）正如 mgilson 的评论指出的那样，如果元素`dir`遵循 1 char + number 格式，那么您可以利用元组排序并执行以下操作：

```
>>> dir.append('B12')
>>> sorted(dir, key=lambda x: (x[0],int(x[1:])))
['A1', 'A2', 'A3', 'A10', 'B12'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-04T17:16:06.287

为了扩展这个问题，我必须以自然的方式对接口名称进行排序。让它变得更复杂的是接口可以有多种风格......你有传统的，比如`lo`,`eth0`等等......还有一些更高级的方案，比如`enp4s0f1d1`. 解决方案是根据类型拆分它们，将数字转换为整数，并且必须注意确保在相同类型上进行比较。

所以我想出了这个排序函数，它应该是相当防弹的（只要你给它字符串......）

```
def ethkey(eth):
    """Split an ethernet device name between text and digit groups as int,
    allowing consistent sorting of interfaces.

    Usage: `sorted(if_list, key=ethkey)`

    :param eth: Value to sort
    :type eth: str
    :return: List of str's (even indexes) and int's (odd indexes) to compare
    :rtype: list
    """

    keys = []
    if not eth:
        # If eth is a string it's empty, just return blank list
        return keys

    # Start with the first character already in last
    last, eth = eth[0], eth[1:]
    # If last is int we start at offset 1
    if last.isdigit():
        keys.append('')

    for i in eth:
        if i.isdigit() is last.isdigit():
            # Keep accumulating same type chars
            last += i
        else:
            # Save and restart next round
            keys.append(int(last) if last.isdigit() else last)
            last = i

    # Save final round and return
    keys.append(int(last) if last.isdigit() else last)
    return keys 
```

然后可以这样使用它：

```
sorted(int_list, key=ethkey) 
```

# php - 为 Jquery Flot 生成记录

> ID：12658515
> 
> 赞同：0
> 
> 时间：2012-09-30T04:02:38.803
> 
> 标签：php, jquery, mysql, flot, visitors

```
VISITORS TBL
ID  product_id  hits    date
130     1       1   2012-08-11
94     810      53  2012-08-06
95     810      32  2012-08-07
96     810      22  2012-08-09
97     810      13  2012-08-10
98     810      16  2012-08-11
99     810      13  2012-08-22 
```

我有访问者 MySQL 表，如上所示。计划使用 Jquery Flot 为过去 30 天的访客绘制折线图。

应该生成 30 条记录，分别为 [1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 53], [7, 32], [8, 0], [9, 22]......[30, 0] 如何使用 mysql & php 为 product_id = 810 生成 30 天的列表？我可以在单个 SQL 查询中执行吗？或使用 php 循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T04:28:41.353

我不知道是否有一种仅限 MySQL 的方法来执行此操作，但这肯定会起作用（尽管它很草率并且使用了已弃用的 MySQL / PHP 函数）

```
<?
$rs = mysql_query("SELECT hits,date FROM visitors WHERE product_id=81 AND date BETWEEN 2012-08-01 AND 2012-08-31 ORDER BY date ASC");
$flot = array();
$last_date = '2012-08-00';
$day = 1;

if ($rs && mysql_num_rows($rs)) {
    while ($row = mysql_fetch_array($rs)) {
        $days_since = check_days_since($row['date'], $last_date);
        print $row['date'] . '|' . $last_date . '|' . $days_since . "\n";

        if ($days_since) {
            for ($i = 1; $i < $days_since; $i++) {
                $flot[] = array($day++, 0);
            }
        }

        $flot[] = array($day++, $row['hits']);
        $last_date = $row['date'];
    }
}

print json_encode($flot);

function check_days_since($new, $old) {
    if (!$new || !$old) return 1;
    return (strtotime($new) - strtotime($old)) / (60*60*24);
}
?> 
```

# javascript - JS 重定向页面上一级

> ID：12658516
> 
> 赞同：0
> 
> 时间：2012-09-30T04:03:08.183
> 
> 标签：javascript

我有一个简单的问题，如果使用 iPad 打开，我的 JS 功能是重定向页面。

我有一个页面 mobile.abc.com，现在我想做的是如果使用 ipad 打开它，则将其重定向到 mobile.abc.com

```
if ((navigator.userAgent.match(/iPad/i)) || (navigator.userAgent.match(/iPod/i))) {
       location.replace("../mobile.abc.com");
    } 
```

我尝试了那个 JS，但它显示错误的网址是：abc.com/mobile.abc.com

任何想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T04:05:10.040

利用：

```
location.replace("//mobile.abc.com"); 
```

这将适用于两者`http`或`https`。

# java - Hibernate 4.0、UserType 3.0.0.CR4 和 Joda Time 2.1 的映射异常

> ID：12658521
> 
> 赞同：1
> 
> 时间：2012-09-30T04:04:30.057
> 
> 标签：java, hibernate, jodatime, usertype

我目前正在尝试使用[usertype](http://usertype.sourceforge.net/)在 Hibernate 中保留 Joda Time ，但我在 eclipse 中不断收到以下错误。

![错误信息](../Images/992fdfba9c07b49fe118f59f3b4befc9.png)

（failed.org.hibernate.MappingException：无法确定类型：org.jadira.usertype.dateandtime.jsr310.PersistentLocalDateTime，表：MODEL_OBJECT，列：[org.hibernate.mapping.Column（MODIFIED_DATE_TIME）]）

我的 xml 文件看起来像这样

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE ibernate-mapping PUBLIC 
"-//Hibernate/Hibernate Mapping DTD 3.0//EN" 
"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="model" >
    <class name="ModelObject" table="MODEL_OBJECT">
        <id name="id" column="MODEL_ID" >
            <generator class="native"></generator>
    </id>
    <property name="modifiedDateTime"             
            type="org.jadira.usertype.dateandtime.jsr310.PersistentLocalDateTime"
            column="MODIFIED_DATE_TIME"/>
        <property name="creationDateTime"
            type="org.jadira.usertype.dateandtime.jsr310.PersistentLocalDateTime"
            column="CREATION_DATE_TIME"/>
    </class>
</hibernate-mapping>` 
```

我的java文件看起来像这样

```
package model;
import java.beans.PropertyChangeListener;
import java.beans.PropertyChangeSupport;
import org.joda.time.LocalDateTime;

public abstract class ModelObject  {

private PropertyChangeSupport changeSupport = new PropertyChangeSupport(this);

private long id;
private LocalDateTime  modifiedDateTime = new LocalDateTime ();
private LocalDateTime  creationDateTime = new LocalDateTime ();

public Long getId(){
    return id;
}

public void setId(Long id){
    firePropertyChange("id", this.id, this.id = id);
}

public LocalDateTime  getModifiedDateTime(){
    return modifiedDateTime;
}

public void setModifiedDateTime(LocalDateTime  modifiedDateTime) {
    firePropertyChange("modifiedDateTime", 
                this.modifiedDateTime, 
                this.modifiedDateTime = modifiedDateTime);
}

public LocalDateTime  getCreationDateTime(){
    return creationDateTime;
}

public void setCreationDateTime(LocalDateTime  creationDateTime){
    firePropertyChange("creationDateTime", 
                this.creationDateTime, 
                this.creationDateTime = creationDateTime);
}

public void addPropertyChangeSupportListener(PropertyChangeListener listener){
    changeSupport.addPropertyChangeListener(listener);
}

public void removePropertyChangeListener(PropertyChangeListener listener){
    changeSupport.removePropertyChangeListener(listener);
}

public void addPropertyChangeListener(String propertyName, PropertyChangeListener listener){
    changeSupport.addPropertyChangeListener(propertyName, listener);
}

public void removePropertyChangeListener(String propertyName, 
                                             PropertyChangeListener listener){
    changeSupport.addPropertyChangeListener(propertyName, listener);
}

protected void firePropertyChange(String propertyName, Object oldValue, Object newValue){
    changeSupport.firePropertyChange(propertyName, oldValue, newValue);
}

} 
```

我已将 usertype.spi-3.0.0.jar 和 usertype.core.3.0.0.CR3.jar 添加到我的类路径中。

我不知道这里发生了什么，因此将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T08:10:28.580

使用 HBM 自定义类型添加单独的文件
`CustomTypes.hbm.xml`

```
<!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="com.softcomputer.softlab.business.core">
   <typedef name="localJodaDate"
      class="org.jadira.usertype.dateandtime.jsr310.PersistentLocalDateTime" />
</hibernate-mapping> 
```

将此文件包含到您的映射中

```
 <mapping resource="CustomTypes.hbm.xml" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:30:28.403

问题是您使用的是 JSR 310 类型（三个）而不是 Joda Time 类型。

将 org.jadira.usertype.dateandtime.jsr310.PersistentLocalDateTime 更改为 org.jadira.usertype.dateandtime.joda.PersistentLocalDateTime ，您的问题应该得到解决。

问候克里斯

# function - 将 AutoHotkey 托盘菜单条目绑定到功能？

> ID：12658528
> 
> 赞同：0
> 
> 时间：2012-09-30T04:05:23.003
> 
> 标签：function, contextmenu, autohotkey, system-tray, subroutine

AutoHotkey 命令[`Menu`](http://www.autohotkey.com/docs/commands/Menu.htm)允许您自定义脚本通知区域图标的上下文菜单，但它似乎需要将标签/子例程附加到菜单条目。

我有一些函数，虽然我*可以*转换为子例程，但我不希望这样做，因为它们使用起来更容易、更清晰，而且还有需要重构才能转换的本地函数。此外，函数不会自动执行，必须调用，而子例程只是标记的代码段，因此它们需要额外的工作以避免被无意调用。事实上，AHK 手册页`Gosub`特别建议使用函数：

> 尽管 Gosub 对于简单的通用子例程很有用，但请考虑将函数用于更复杂的目的。

子程序的一个明显缺点是它们不能接受参数。

有没有办法创建绑定到功能的菜单项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T19:16:14.063

您可以让每个子例程调用相应的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:21:41.620

Subroutines don't automatically execute if you use your `return` statements properly.

As a rule, have a `return` at the end of each subroutine or multi-line hotkey (Single-line hotkeys don't need that). (A function's execution terminates at the closing brace, so you don't need a return, unless of course you want to return a value, or end termination at some other point in the function.)

Also, ensure you define any subroutine outside the **auto-execute** section of the script, to prevent it from automatically executing when the script starts.

More about the "auto-execute" section from AHK docs:

> The Top of the Script (the Auto-execute Section) After the script has been loaded, it begins executing at the top line, continuing until a Return, Exit, hotkey/hotstring label, or the physical end of the script is encountered (whichever comes first). This top portion of the script is referred to as the auto-execute section.
> 
> A script that is not persistent and that lacks hotkeys, hotstrings, OnMessage, and GUI will terminate after the auto-execute section has completed. Otherwise, it will stay running in an idle state, responding to events such as hotkeys, hotstrings, GUI events, custom menu items, and timers.

**EDIT**: Unfortunately, you still cannot bind direction function calls to menus, because that's not supported. But you could call your functions from within the corresponding subroutines (now that you know how to keep them from running automatically). By exposing some state globally you can eliminate the need to pass arguments to your functions. However, if you don't want to do that, you can simply create variables initialized to whatever values you want to pass to the "bound" function at that point, and then using them to make the equivalent of the the "bound" function call that you wanted to make. For example:

```
subroutine:
arg1 = <some expression>
arg2 = <some expression>
MyFunction(arg1, arg1)
return

MyFunction(a, b) 
....
} 
```

# windows-8 - 在 Windows 8 c# 中执行 cmd 命令？

> ID：12658529
> 
> 赞同：2
> 
> 时间：2012-09-30T04:05:23.860
> 
> 标签：windows-8, cmd, microsoft-metro

我希望在我的 Windows 8 Metro 应用程序中执行 cmd 命令。我访问了很多网站，我很困惑。他们一直说 Windows 8 应用程序使用 Windows RT 而不是以前的 Win32 API。那么，有人能告诉我如何在我的 Windows 8 应用程序中执行命令吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T20:17:15.897

[BatRT](http://isys-labs.com/batrt/)允许您从 WinRT 应用程序运行批处理文件命令。它利用 URI 调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:09:47.773

简而言之，您不能从 Metro 应用程序运行 cmd，因为它们旨在从其他应用程序沙盒化，除非通过定义的 API，如共享和搜索魅力。

[http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/14e2be68-ef86-4480-a3fd-6ddf7ec7d1f1](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/14e2be68-ef86-4480-a3fd-6ddf7ec7d1f1)

您可以从 KnownFolders 启动文件，但该文件将在该文件类型的默认应用程序中打开。看：

[http://msdn.microsoft.com/en-us/library/windows/apps/br241801.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br241801.aspx)

# java - 根据数据库值突出显示 ListView 行

> ID：12658531
> 
> 赞同：2
> 
> 时间：2012-09-30T04:05:34.937
> 
> 标签：java, android, listview

我需要根据从填充 ListView 的数据集中提取的值突出显示 ListView 行。如下面的代码所示，我知道如何通过视图活页夹根据数据库值修改文本视图。有没有办法从视图活页夹更新行？据我所知，我只能从视图活页夹中更新文本字段，而不是父行属性。

我目前正在使用 SimpleCursorAdapter 但怀疑我需要创建某种类型的自定义适配器。但是，一旦我在自定义适配器中，我无法访问 db 光标来读取字段以确定是否突出显示该行，可以吗？

只是为了澄清，我不想在选中该行时突出显示它；我知道该怎么做。我也不是试图突出显示一个 textview - 我试图突出整个 listView 行（或者至少是我的 R.layout.stream XML 文件中的一个 LinearLayout 。

我在数据库记录中有一个布尔值，指示是否突出显示该行。感谢您提供的任何意见！

这是我主要活动的一部分：

```
 cursor = db.query(DbHelper.TABLE, null, null, null, null, null, DbHelper.C_TIMESTAMP + " DESC", null);
    startManagingCursor(cursor);

    adapter = new SimpleCursorAdapter(this, R.layout.stream, cursor, FROM, TO);

    adapter.setViewBinder(VIEW_BINDER);

    listStream.setAdapter(adapter); 
 ... 
```

这是视图活页夹的一部分：

```
 static final ViewBinder VIEW_BINDER = new ViewBinder() {

    public boolean setViewValue(View view, Cursor cursor, int columnIndex) {

        if (view.getId() == R.id.textTimestamp) {

            String postDate = cursor.getString(columnIndex);    

            ((TextView) view).setText(tHandler.getRelativeLocalTime(view.getContext(),postDate));

            return true;
 ... 
```

活动 XML 布局文件的相关部分：

```
 <ListView
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:id="@+id/listStream"
        android:background="@color/lightGreen"
        android:layout_below="@+id/streamHeader">           
    </ListView> 
```

# java - hbase数据的分布式分析

> ID：12658534
> 
> 赞同：0
> 
> 时间：2012-09-30T04:06:09.853
> 
> 标签：java, hadoop, hbase, distributed

我对 hbase 有点陌生，并且能够设置 hbase 并查询存储在多台 hadoop 机器上的数据，但我想知道是否也可以在 hbase 中分发数据分析。

这是我的情况，我有几十亿条记录需要快速分析，我想让 X 服务器查询数据库并获取查询的独特部分，以便他们可以处理它，而不是让单个服务器通过整个数据集。这可能吗？我该怎么做？

我非常不确定如何解决这个问题，因为我意识到所有查询都需要协调（每个服务器不能单独查询 hbase，否则 hbase 将不知道如何在服务器之间拆分请求）。我很困惑，但我想也许在 hadoop 中有一种本地方法可以做到这一点？

如果有帮助，我的应用程序正在运行 java，并且我正在使用 cloudera 发行版在 EC2 上运行集群。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T07:29:27.820

HBase 基于 Hadoop 构建是有原因的：) 您可以使用 Hadoop 的 map-reduce 框架来分发分析，并让 hadoop/hbase 负责分配负载。您可以从[文档](http://hbase.apache.org/book/mapreduce.html)开始，看看可以做什么。

另一个选择是编写协处理器。协处理器在区域服务器上运行，因此它们靠近数据工作。[你可以在这里](https://blogs.apache.org/hbase/entry/coprocessor_introduction)找到一个不错的介绍

# matlab - 通过“点列表”访问矩阵元素

> ID：12658536
> 
> 赞同：2
> 
> 时间：2012-09-30T04:06:54.877
> 
> 标签：matlab

我有一些大型数据矩阵，以及一个包含 x 和 y 位置的两列矩阵，是否有更简单的方法来处理与这些点对应的数据元素：

```
for adj = 1:size(loc,1)
    testFunc(data1(loc(i,2),loc(i,1)), data2(loc(i,2),loc(i,1)), othervals)
end 
```

大多数情况下，我正在寻找一种通过更接近*data1(loc(i))的方式访问数据元素的方法*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T13:02:32.433

你想要的是`data`通过它们的线性索引访问元素。线性索引首先沿第一个维度递增，然后沿第二个维度递增，依此类推。例如，3×2 数组的元素将按以下顺序寻址

```
1 3 5
2 4 6 
```

因此，要`(2,1)`通过线性索引获取 2×3 数组的元素，您可以调用`array(3)`. 要在线性索引和下标之间进行转换（例如对`2,3`），您可以分别使用`ind2sub`和`sub2ind`。

在你的情况下，你会跑

```
linIdx = sub2ind(size(data),loc(:,2),loc(:,1)) 
```

如果第一列`loc`索引为 的列`data`，第二列`loc`索引为行。

然后您可以循环`linIdx`将循环内的函数调用更改为

```
testFunc(data1(linIdx(i)), data2(linIdx(i)), othervals) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T04:27:21.787

您可以将 xy 位置转换为索引，并使用索引来寻址矩阵。然后你可以使用arrayfun，将你的函数与所有元素相结合。

```
ind=sub2ind(size(data1),location(:,1),location(:,2));
output=arrayfun(@(x,y) testFunc(x,y,othervals),data1(ind),data2(ind)); 
```

或者如果 testFunc 不输出标量：

```
output=arrayfun(@(x,y) testFunc(x,y,othervals),data1(ind),data2(ind),'UniformOutput',0); 
```

# awk - 如何使用awk在文本文件的第一行之前添加一个空行

> ID：12658549
> 
> 赞同：12
> 
> 时间：2012-09-30T04:10:18.617
> 
> 标签：awk

我有一些文本文件。我想在每个文本文件的第一行之前添加一个空行。我怎样才能用 awk 做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-30T04:48:21.953

我更喜欢`GNU sed`这个任务：

**要在文件开头添加空格：**

```
sed '1s/.*/ &/' file.txt 
```

要对具有扩展名的多个文本文件执行此操作`.txt`，并直接对文件进行更改（即覆盖它们），请尝试：

```
sed -s -i '1s/.*/ &/' *.txt 
```

**在文件开头添加一个空行：**

```
sed '1i\\' file.txt 
```

要对具有扩展名的多个文本文件执行此操作`.txt`，并直接对文件进行更改（即覆盖它们），请尝试：

```
sed -s -i '1i\\' *.txt 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-30T04:26:55.957

这将在数​​据文件的开头为您提供一个空白*区域：*

```
 awk 'BEGIN{printf(" ")}1' data.txt 
```

或者，这将在数据文件的开头为您提供一个空白*行。*

```
 awk 'BEGIN{print""}1' data.txt 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-30T04:31:21.810

不需要`awk`：

```
echo -n ' ' | cat - file 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-30T04:24:38.220

这应该工作 -

```
awk 'NR==1{a=$0; print ""; next} NR==2{print a; print $0; next}1' file 
```

对于多个文件 -

```
awk 'FNR==1{a=$0; print ""; next} FNR==2{print a; print $0; next}1' file1 file2 file3 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T06:56:26.550

用 perl 内联：

```
perl -i -ne 'if(eof){$.=0;}if($.==1){print "\n";}print' temp temp2 
```

temp 和 temp2 是两个不同的文件。执行此命令后，每个文件的开头都会自动添加一个空行。

# java - 拒绝表单而不重新加载页面 2.0.3

> ID：12658553
> 
> 赞同：1
> 
> 时间：2012-09-30T04:11:06.820
> 
> 标签：java, playframework, playframework-2.0

在游戏框架中，是否可以拒绝一个字段

```
filledForm.reject("myField", "You are missing files");
return badRequest(myform.render(filledForm)); 
```

无需重新加载页面？

我有一个文件输入字段，可让用户选择文件。在拒绝和重新加载时，文件被清除并显示错误。我希望他们选择的文件在那里

当前行为：在提交表单之前：

![前](../Images/fdc16a1fa0321b090985cd05c205b97f.png)

提交后（错误：文件已消失）

![前](../Images/fd13976ed498ead58cf65c78204fdbcf.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T11:06:11.643

如果服务器能够操纵文件字段的值，那将是一个重大的安全风险，因为我们可以从用户硬盘驱动器中获取任何文件。如果我们看看你有两个要求，

*   获取服务器上的文件内容
*   请勿打扰客户端 UI 状态

唯一的选择是使用 AJAX 文件上传器。所以你的流程现在变成：

*   通过AJAX上传提交文件
*   验证内容
*   保存文件以供以后检索
*   发回状态（OK 或 Error）
*   在 Error 上显示错误
*   整个表单提交后，查找之前保存的文件

如果您不介意加载，您可能会作弊 - 只需使用 AJAX 进行验证以显示错误消息并让文件在正常提交时再次上传。

这一切都与我们的限制有关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T08:41:11.290

文件选择输入字段（即`<input type="file" ... />`）与其他输入字段不同——您不能从服务器端预先填充值。如果可以（想想`<input type="file" value="/etc/passwd" .. />`），这将是一个巨大的安全漏洞。在服务器上，当您获得提交的表单时，您不会获得上传文件的完整路径，只有文件名和内容。

如果您确实需要保留文件输入字段的值，则需要采用不同的方法：通过 Ajax 提交表单（谷歌搜索“ajax 文件上传”以获取一些帮助解决此问题的技术和库），然后使用指示文件是否有效的 Ajax 响应。

* * *

进一步说明：使用普通的 HTML/HTTP post 方法（Play 表单助手使用），原始页面消失了，服务器响应是一个新页面，与前一个页面没有连接。播放表单助手将使用以前的值预先填充此页面上的输入字段，但如上所述，这对于文件输入字段是不可能的。

这就是为什么有用于上传文件的专用 Javascript 库的原因。如果您的表单主要关注文件上传，您应该查看这些。（例如[http://fineuploader.com](http://fineuploader.com/)）。在服务器端，Ajax 查询的目标将是一个新的 Action，它只处理上传的文件并返回一条成功/失败消息，然后您将向用户显示该消息。

# java - 如何绘制分位数带（在 R 中）

> ID：12658555
> 
> 赞同：4
> 
> 时间：2012-09-30T04:11:23.597
> 
> 标签：java, r, plot, quantile

我有一个 CSV 文件，其中包含我感兴趣的每个（Java GC）事件的行。该对象由亚秒级时间戳（非等距）和一些变量组成。该对象如下所示：

```
gcdata <- read.table("http://bernd.eckenfels.net/view/gc1001.ygc.csv",header=TRUE,sep=",", dec=".")
start = as.POSIXct(strptime("2012-01-01 00:00:00", format="%Y-%m-%d %H:%M:%S"))
gcdata.date = gcdata$Timestamp + start
gcdata = gcdata[,2:7] # remove old date col
gcdata=data.frame(date=gcdata.date,gcdata)
str(gcdata) 
```

结果是

```
'data.frame':   2997 obs. of  7 variables:
 $ date           : POSIXct, format: "2012-01-01 00:00:06" "2012-01-01 00:00:06" "2012-01-01 00:00:18" ...
 $ Distance.s.    : num  0 0.165 11.289 9.029 11.161 ...
 $ YGUsedBefore.K.: int  1610619 20140726 20148325 20213304 20310849 20404772 20561918 21115577 21479211 21544930 ...
 $ YGUsedAfter.K. : int  7990 15589 80568 178113 272036 429182 982841 1346475 1412181 1355412 ...
 $ Promoted.K.    : int  0 0 0 0 8226 937 65429 71166 62548 143638 ...
 $ YGCapacity.K.  : int  22649280 22649280 22649280 22649280 22649280 22649280 22649280 22649280 22649280 22649280 ...
 $ Pause.s.       : num  0.0379 0.022 0.0287 0.0509 0.109 ... 
```

在这种情况下，我关心暂停时间（以秒为单位）。我想绘制一个图表，它将显示每个（挂钟）小时的平均值作为一条线，2% 和 98% 作为一条灰色走廊，最大值（每小时内）作为一条红线。

我做了一些工作，但是使用q98的功能很丑，不得不使用多行语句似乎很浪费，我不知道如何实现q02和q98之间的灰色区域：

```
q02 <- function(x, ...) {  x <- quantile(x,probs=c(0.2)) }
q98 <- function(x, ...) {  x <- quantile(x,probs=c(0.98)) }
hours = droplevels(cut(gcdata$date, breaks="hours")) # can I have 2 hours?
plot(aggregate(gcdata$Pause.s. ~ hours, data=gcdata, FUN=max),ylim=c(0,2), col="red", ylab="Pause(s)", xlab="Days") # Is always black?
lines(aggregate(gcdata$Pause.s. ~ hours, data=gcdata, FUN=q98),ylim=c(0,2), col="green")
lines(aggregate(gcdata$Pause.s. ~ hours, data=gcdata, FUN=q02),ylim=c(0,2), col="green")
lines(aggregate(gcdata$Pause.s. ~ hours, data=gcdata, FUN=mean),ylim=c(0,2), col="blue") 
```

现在这会产生一个图表，其中黑点为最大值，蓝线为每小时平均值，上下 0,2 + 0,98 绿线。我认为有一条灰色走廊会更好读，也许是一条最大（红色）虚线并以某种方式修复轴标签。 ![导出的图表 (png)](../Images/ada6d96db505497142cb700c40e88850.png) 有什么建议么？（文件在上面可用）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T04:40:26.277

你必须尝试`polygon`。这段代码很有用：

```
y98 = aggregate(gcdata$Pause.s. ~ hours, data=gcdata, FUN=q98)
y02 = aggregate(gcdata$Pause.s. ~ hours, data=gcdata, FUN=q02)
ymax = aggregate(gcdata$Pause.s. ~ hours, data=gcdata, FUN=max)
ymin = aggregate(gcdata$Pause.s. ~ hours, data=gcdata, FUN=min)
ymean = aggregate(gcdata$Pause.s. ~ hours, data=gcdata, FUN=mean)

x = ymean[,1]
y1 = cbind(y02[,2], ymean[,2], y98[,2])
y2 = cbind(ymin[,2], ymean[,2], ymax[,2])

plotAreaCI(x,y2, ylim=c(0,2), xlab="time", ylab="variable")
plotAreaCI(x,y1, ylim=c(0,2), poly.col="blue", add=TRUE) 
```

![图1](../Images/81029dab10c5fd586e78cb7ee40dbf65.png)

或者

```
plotAreaCI(x,y2, ylim=c(0,2), xlab="time", ylab="variable", nice.x = TRUE)
plotAreaCI(x,y1, ylim=c(0,2), mean.lwd=2, poly.col="blue", add=TRUE) 
```

![图2](../Images/dac4b0060c42732bde2137b0c80cb1bf.png)

其中函数`plotAreaCI`定义为：

```
plotAreaCI = function(x, y, add=FALSE, nice.x = FALSE,
                          xlim=NULL, ylim=NULL,
                          mean.col="black", mean.lwd=1.5,
                          poly.col="gray", poly.lty=3,
                          xlab=NULL, ylab=NULL, main="",
                          ...) {
      isFactorX = isClass("factor", x)
      if(isFactorX) {
        x.label = x
        x = as.numeric(x)
      }
      if(is.null(xlim)) xlim=range(x, na.rm=TRUE)
      if(is.null(ylim)) ylim=range(y, na.rm=TRUE)
      x.pol = c(x, rev(x), x[1])
      y.pol = c(y[,1], rev(y[,3]), y[,1][3])
      if(!add) {
        plot.new()
        plot.window(xlim=xlim, ylim=ylim, ...)
        if(!nice.x & isFactorX) {
          axis(1, at=x, labels=x.label)
        } else {
          xticks = axTicks(1)
          if(isFactorX) {
            xticks = xticks[xticks>=1]
            axis(1, at=xticks, labels=x.label[xticks])
          } else {
            axis(1)
          }
        }
            axis(2, las=1)
        box()
        title(xlab=xlab, ylab=ylab, main=main)
      }
      polygon(x.pol, y.pol, col=poly.col, lty=poly.lty)
      lines(x, y[,2], col=mean.col, lwd=mean.lwd)
      return(invisible())
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T04:38:58.870

这是我用来绘制实验室分析物（在本例中为收缩压）的时间变化的代码：

```
 SBP.qtr.mat <- aggregate(set1HLI$SBP, 
                          list(  year(set1HLI$Drawdt)+0.25* quarter(set1HLI$Drawdt)), 
                           quantile, prob=c(0.1,0.25,0.5,0.75, 0.9,0.95, 0.975), na.rm=TRUE)
 matplot(SBP.qtr.mat[,1], SBP.qtr.mat$x, type="pl") 
```

不应该太难适应你的问题......或者你可以发布一个可重复的例子来使用。这给出了单个 data.frame 中的第 10、25、50、75、90、95 和 97.5 个百分位数，matplot 处理此类对象的绘图。

灰色区域？，... 通常的方法是绘制一个多边形，从下界向外，在最右边“转动”并在高边返回，并在左侧连接回来。`polygon`参数设置`x, y`为。有一个`col`参数可以设置为“灰色”。

要制作“2 小时”序列，您可以将数据框合并到其中或与`cut.POSIXt" as a breaks argument , there is the option of using multiples of time units with`seq.POSIXt 一起使用：

```
> seq(ISOdate(1910,1,1), ISOdate(1999,1,1), "10 years")
[1] "1910-01-01 12:00:00 GMT" "1920-01-01 12:00:00 GMT" "1930-01-01 12:00:00 GMT" "1940-01-01 12:00:00 GMT"
[5] "1950-01-01 12:00:00 GMT" "1960-01-01 12:00:00 GMT" "1970-01-01 12:00:00 GMT" "1980-01-01 12:00:00 GMT"
[9] "1990-01-01 12:00:00 GMT" 
```

我没有看到它记录在案，但您可以使用间隔的倍数`cut.POSIXt`：

```
> str( cut( seq(ISOdate(1910,1,1), ISOdate(1999,1,1), "years"), "10 years") )
 Factor w/ 9 levels "1910-01-01","1920-01-01",..: 1 1 1 1 1 1 1 1 1 1 ...
> str( cut( seq(ISOdate(1910,1,1), ISOdate(1999,1,1), "years"), "5 years") )
 Factor w/ 18 levels "1910-01-01","1915-01-01",..: 1 1 1 1 1 2 2 2 2 2 ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T19:42:02.800

很高兴在这里见到 Debian 老前辈 :) 你的回答已经很不错了。由于我碰巧经常使用时间序列，所以我想我会使用出色的[zoo](http://cran.r-project.org/package=zoo)和[xts](http://cran.r-project.org/package=xts)包添加一个变体。后者建立在前者之上，除其他外，`period.apply()`我们可以在此处使用的`endpoints()`功能以及为您提供两小时汇总的功能。

所以在顶部我会使用

```
library(zoo)                                # for zoo objects
library(xts)                                # for period.apply

gcdata <- read.table("http://bernd.eckenfels.net/view/gc1001.ygc.csv",
                     header=TRUE, sep=",", dec=".")
timestamps <- gcdata$Timestamp + 
              as.POSIXct(strptime("2012-01-01 00:00:00", 
                         format="%Y-%m-%d %H:%M:%S"))
gcdatazoo <- zoo(gcdata[-1], order.by=timestamps)    # as zoo object 
```

创建一个`zoo`对象。你的功能仍然：

```
plotAreaCorridor <- function(x, y, col.poly1="lightgray", col.poly2="gray",...) {
    x.pol <- c(x, rev(x), x[1])
    y.pol <- c(y[,1], rev(y[,5]),y[,1][1])
    plot(x, y[,6]+1, type="n", ...) 
    polygon(x.pol, y.pol, col=col.poly1, lty=0)

    x.pol <- c(x, rev(x), x[1])
    y.pol <- c(y[,2], rev(y[,4]), y[,1][1])
    polygon(x.pol, y.pol, col=col.poly2, lty=0)

    lines(x, y[,3], col="blue") # median
    lines(x, y[,6], col="red")  # max

    invisible(NULL)
} 
```

然后我们可以稍微简化一下：

```
agg <- period.apply(gcdatazoo[,"Pause.s."],               # to which data
                    INDEX=endpoints(gcdatazoo, "hours", k=2), # every 2 hours
                    FUN=function(x) quantile(x,               # what fun.
                                             probs=c(5,20,50,80,95,100)/100)) 

#v99 = q99(gcdata$Pause.s.)        # what is q99 ?
v99 <- mean(agg[,5])                  # mean of 95-th percentile?
plotAreaCorridor(index(agg),          # use time index as x axis
                 coredata(agg),       # and matrix part of zoo object as data
                 ylim=c(0,max(agg[,5])*1.5),
                 ylab="Quantiles of GC events",
                 main="NewPar Collection Activity")
abline(h=median(gcdatazoo[,"Pause.s."]), col="lightblue")
abline(h=v99, col="grey")
labeltxt <- paste("99%=",round(v99,digits=3),"s n=", nrow(gcdatazoo),sep="")
text(x=index(agg)[20], y=1.5*v99, labeltxt, col="grey", pos=3)  # or legend() 
```

这使

![在此处输入图像描述](../Images/c8fcc437887dc452418f8fc6352ed0ff.png)

轴现在是自动的，仅在跨度小于周时显示工作日；这可以根据需要覆盖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T17:38:50.877

我目前没有到达以下脚本（仍然需要查看 DWin 的更高级答案）。现在看起来有点像我在寻找，但代码仍然很丑陋（例如，我不知道如何对齐标签以及如何获得正确的 xlab 标签）：

```
plotAreaCorridor = function(x, y, col.poly1="lightgray", col.poly2="gray",...) {
   x.pol = c(x, rev(x), x[1])
   y.pol = c(y[,1], rev(y[,5]),y[,1][1])
   plot(x, y[,6]+1, type="n", ...) # ugly since type="n" does not work for factor
   polygon(x.pol, y.pol, col=col.poly1, lty=0)

   x.pol = c(x, rev(x), x[1])
   y.pol = c(y[,2], rev(y[,4]), y[,1][1])
   polygon(x.pol, y.pol, col=col.poly2, lty=0)

   lines(x, y[,3], col="blue") # median
   lines(x, y[,6], col="red")  # max

   return(invisible())
}
pause = gcdata$Pause.s.
hours = droplevels(cut(gcdata$date, breaks="hours")) # can I have 2 hours?
agg = aggregate(pause ~ hours, FUN=quantile, probs=c(5,20,50,80,95,100)/100)
x = agg$hours
ys = agg$pause
q99 <- function(x, ...) {  x <- quantile(x,probs=c(0.99)) }  
v99 = q99(gcdata$Pause.s.)
vmed = median(gcdata$Pause.s.)
plotAreaCorridor(x, ys,ylim=c(0,v99*1.5))
abline(h=vmed, col="lightblue")
abline(h=v99, col="grey")
label=paste("99%=",round(v99,digits=3),"s n=", length(gcdata$date),sep="")
text(x=30, y=v99, label, col="grey", pos=3)
title("NewPar Collection Activity") 
```

![新图表版本](../Images/6faa58ef828629e9266e7c1ce3608cf1.png)

# ios - 升级到 Cocos2d 2.1 后 AppDelegate 报错

> ID：12658558
> 
> 赞同：2
> 
> 时间：2012-09-30T04:11:58.043
> 
> 标签：ios, xcode, cocos2d-iphone, appdelegate

为了解决 iOS 6 和 iphone 5 的问题，我将正在开发的游戏从 cocos2d 1.1 升级到 cocos2d 2.1。经过并更改所有代码后，我现在收到此错误：

'无法实例化 UIApplication 委托实例。没有加载名为 AppDelegate 的类。

AppDelegate.h 和 AppDelegate.m 肯定包含在我的项目中。我确实注意到他们定义了 AppController 类而不是 AppDelegate - 但这就是 cocos2d 2.1 测试项目中编译和运行良好的方式。我在 AppDelegate.h 和 AppDelegate.m 中获得的代码直接从空的测试项目中复制，除了我添加了 Flurry.h 和在我的项目中包含 Flurry 分析的行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T04:22:42.970

Cocos2D 1.0

```
AppDelegate* app = (AppDelegate*)[[UIApplication sharedApplication] delegate];
//app.viewController.view 
```

Cocos2D 2.0

```
AppController *app = (AppController*) [[UIApplication sharedApplication] delegate];
//app.navController.view 
```

# class - F# 指向不同但相关类的方法的“指针”列表

> ID：12658560
> 
> 赞同：1
> 
> 时间：2012-09-30T04:12:06.720
> 
> 标签：class, methods, f#, polymorphism

我是 F# 新手。

我有 2 个类，Base 和 Derived。

Base 有很多方法。Derived 按原样继承了一些方法，并覆盖了一些方法。派生类也引入了新方法。

我有一组对象，有些是基础的，有些是派生的。

有一个 2 个元素元组的列表，元组的第二个元素是多态层次结构的方法。

让我们考虑一下我的程序，它读取输入并且每个输入都通过列表，将每个元组的第一个元素（谓词）应用于输入。

如果谓词为真，则它在一个可以是 Base 或 Derived 的对象上调用元组的第二个元素（再次取决于元组的第一个元素的值）。

最好有一个这样的元组列表，而不是现在的 2 个列表（一个用于 Base，一个用于 Derived）。这可能吗？

假设基类定义了method1和method2。

假设 Derived 类定义（覆盖）method2 和 method4。

```
let predList = 
  [(predicate1, Base.method1);
  (predicate2, method2);
  (predicate4; Derived.method4) 
  ... 
]

 while ... do
     let input = ReadInput
     if IsBase(input)
         then 
             let method = List.Find matchingPredicate predList
             let baseObj = ChooseBaseObject(input)
             baseObj.method  // ????
         else 
             let method = List.Find matchingPredicate predList
             let derivedObj = ChooseDerivedObject(input)
             derivedObj.method  // ???? 
```

使用这样的代码，满足 predicate2 的给定输入可能会触发对 Derived.method2 或 Base.method2 的调用，具体取决于 IsBase(input) 返回的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T05:01:30.533

最简单的事情可能是将你`method`的 's 包装成一组独立的函数：

```
let wrap_method1 (x :Base) = x.method1()
let wrap_method2 (x :Base) =
   match x with
   | :? Derived as xd -> xd.method2()
   | _ -> x.method2()
let wrap_method4 (x :Base) =
   match x with
   | :? Derived as xd -> xd.method4()
   | _ -> ()

// use
let predList = 
    [(predicate1, wrap_method1);
    (predicate2, wrap_method2);
    ... ]

while ... do
    let input = ReadInput
    let method = List.Find matchingPredicate predList
    method input 
```

# java - 何时在 Java 中使用“静态”的这些变体

> ID：12658567
> 
> 赞同：8
> 
> 时间：2012-09-30T04:13:55.313
> 
> 标签：java

有人可以解释以下情况之间的区别以及我们将在哪里使用每种情况吗？谢谢大家

```
class A{
  static public void methodA()
}

static class B{
  static public void methodB()
}

static class C{
  public void methodC()
} 
```

编辑：大家好，感谢您的回答。我可能还不够清楚。我知道类 B 和 C 不能声明为静态，除非它们是内部类。我在你的回答中请假设它们是内部类。我想知道何时将它们声明为静态，甚至何时将它们的方法声明为静态。我知道非静态类中的静态方法意味着您可以从任何地方调用它，并且通常执行并非特定于对象的一般操作。但是你为什么要声明静态类呢？在您重新阅读我的编辑并接受最具解释性的答案后，我将再次检查您的答案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T04:19:35.763

*static*修饰符用于声明静态字段或类*变量*。

> 它们与类相关联，而不是与任何对象相关联。类的每个实例共享一个类变量，该变量位于内存中的一个固定位置。任何对象都可以更改类变量的值，但也可以在不创建类实例的情况下操作类变量。

来源：[“了解实例和类成员”](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)

另请注意，Java 支持静态变量和方法。因此，这样一来，您的第一个类将正确编译，而其他两个将失败。

举个例子：

```
class A{
    public static int STATIC_VALUE = 1; // is a valid static variable

    public static void method1(){ 
        //is a valid static method
    }

    /**
    * Is a valid static inner class
    */
    static class innerClassB{

    }
} 
```

* * *

> 但是你为什么要声明静态类呢？

有一些原因可以说明为什么要这样做。例如，来自这个[Java 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)：

> 静态嵌套类与其外部类（和其他类）的实例成员交互，就像任何其他顶级类一样。**实际上，静态嵌套类在行为上是一个顶级类，为了方便打包，它已经嵌套在另一个顶级类中。**

这方面的一个很好的例子是`static class Entry<K,V> implements Map.Entry<K,V>`在像*HashMap*类这样的地方使用。

Entry 类的存在与 HashMap 如何存储/检索存储为其内容的键/值对的功能密切相关。如您所见，Entry 类仅向 HashMap 实现提供功能，即使它在*行为上等同*于顶级类。因此，将其打包为 HashMap 定义本身的一部分是有意义的。

`private static class Entry<E>`您可以在 LinkedList 实现中 找到类似的用法。

我能想到的另一个原因是*白盒测试*的一种方式。由于内部静态类可以访问外部类的私有和受保护静态变量/方法，因此您可以很好地使用它来测试外部类的内部状态。*有些人可能会认为这很脏，但有时它可能很有用*

在我看来，静态内部类主要是为了方便，并且通常基于您的设计原则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T04:16:17.983

A 类将有一个静态类级方法。它不会与任何类实例相关，它会

B 类和 C 类是非法的，不能将类定义为静态的。

编辑：就像HFoE所说，如果B或C是内部类，它们会起作用。在这种情况下，他们将无法访问外部类的实例属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T04:19:25.830

这里基本上有两种用途`static`。

*   `static`on a class 只能用于嵌套类；即在其他类中声明的命名类。这意味着嵌套类的实例没有封闭外部类的父实例。

*   `static`on a method 表示该方法不适用于包含类的实例；即方法的主体不能引用`this`。

* * *

这意味着您的声明`B`和`C`是无效的，因为它们没有在外部类中声明。

（另一个答案说顶级类是隐式静态的。从某种意义上说，这是真的，但另一种看待它的方式`static`是对顶级类毫无意义。无论哪种方式，Java 语言都不允许您声明顶级类为`static`。这是一个编译错误。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T04:20:08.637

所有的外层类都是静态的，但不能为它们提及*静态*保留字，因此 B 和 C 作为外层类是非法的。

但所有情况都是有效的内部类。在这种情况下，A 是成员内部类，但 B 和 C 是静态内部类（相当于普通类）。

A 和 B 包含一个静态方法，但 C 没有。

# java - Java 语言断言错误

> ID：12658572
> 
> 赞同：0
> 
> 时间：2012-09-30T04:15:23.777
> 
> 标签：java, swing, java-web-start

我在使用 Java Web Start 运行我的 java 应用程序时遇到了这个错误。尽管应用程序在 Eclipse 中运行得非常好，并且应用程序也在 Java Web 启动中正确加载。该代码正在尝试打开文件选择器，但无法执行此操作。

```
Exception in thread "AWT-EventQueue-0" java.lang.AssertionError
    at sun.awt.shell.Win32ShellFolder2$4.call(Unknown Source)
    at sun.awt.shell.Win32ShellFolder2$4.call(Unknown Source)
    at sun.awt.shell.Win32ShellFolderManager2$ComInvoker.invoke(Unknown Source)
    at sun.awt.shell.ShellFolder.invoke(Unknown Source)
    at sun.awt.shell.Win32ShellFolder2.getIShellFolder(Unknown Source)
    at sun.awt.shell.Win32ShellFolder2.access$200(Unknown Source)
    at sun.awt.shell.Win32ShellFolder2$2.call(Unknown Source)
    at sun.awt.shell.Win32ShellFolder2$2.call(Unknown Source)
    at sun.awt.shell.Win32ShellFolderManager2$ComInvoker.invoke(Unknown Source)
    at sun.awt.shell.ShellFolder.invoke(Unknown Source)
    at sun.awt.shell.Win32ShellFolder2.<init>(Unknown Source)
    at sun.awt.shell.Win32ShellFolderManager2.createShellFolderFromRelativePIDL(Unknown Source)
    at sun.awt.shell.Win32ShellFolder2$11.call(Unknown Source)
    at sun.awt.shell.Win32ShellFolder2$11.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at sun.awt.shell.Win32ShellFolderManager2$ComInvoker$3.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T04:32:37.683

好的，所以我刚刚找到了我自己问题的答案。我已经禁用了 JNLP 文件中的断言，并且代码开始工作得很好。

我改变了

```
<j2se version="1.5+" java-vm-args="-esa -Xnoclassgc"/> 
```

到

```
<j2se version="1.5+" java-vm-args="-dsa -Xnoclassgc"/> 
```

希望这对其他人也有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T07:57:37.087

看看那个类的[源代码](http://www.docjar.com/html/api/sun/awt/shell/Win32ShellFolder2.java.html)。只有 2`assert`条语句，它们都出现在匿名类中。因此它们与您的堆栈跟踪完美匹配

```
assert(isDirectory());
assert(parent != null); 
```

不要禁用这些断言，只需检查为什么不满足这些条件并修复它。

# api - Rest api 设计：使用重复数据创建 POST，可能是 IntegrityError/500，什么是正确的？

> ID：12658574
> 
> 赞同：20
> 
> 时间：2012-09-30T04:15:44.410
> 
> 标签：api, http, rest, api-design

我有一个普通的基本 REST api，例如：

```
/
    GET - list
    POST - create

/<id>
    GET - detail
    PUT - replace
    PATCH - patch
    DELETE - delete 
```

当 POST 进入时`/`，我通常会创建一个对象并创建一个新 id。某些（一个）字段（是）要求是唯一的。因此，带有此类重复数据的 POST 可能会导致：

1.  500 - 完整性错误
2.  使其更像`PUT`/`PATCH`并`/<id>`更新现有记录
3.  捕捉/避免错误并返回某种`4XX`
4.  还有一些我没有想到的。

`1`似乎：这个请求要么不好，要么我可以处理。处理这种情况的正确方法是什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-30T12:44:56.353

@StevenFisher 是正确的。[409 冲突](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.10)是正确的响应。

> 由于与资源的当前状态冲突，无法完成请求。仅在预期用户可能能够解决冲突并重新提交请求的情况下才允许使用此代码。响应正文应该包含足够的信息让用户识别冲突的来源。理想情况下，响应实体将包含足够的信息供用户或用户代理解决问题；但是，这可能是不可能的，也不是必需的。

例如，一个 GET on / 可能会告诉客户端他们可以按如下方式创建用户

```
HTTP/1.1 200 OK
<users href="/">
    <create href="/" method="post">
        <username type="xs:token" cardinality="required"/>
        <password type="password" cardinality="required"/>
    </create>
    ... other hypermedia controls, like search ...
</users> 
```

遵循超媒体控制并尝试使用用户名“Skylar Saveland”创建用户可能会导致

```
HTTP/1.1 409 Conflict
<users href="/">
    <create href="/" method="post">
        <username type="xs:token" cardinality="required" 
                  error="The username 'Skylar Saveland' is already taken. Please select another username"/>
        <password type="password" cardinality="required"/>
    </create>
    ... other hypermedia controls, like search ...
</users> 
```

同样，尝试创建没有密码的用户可能会导致

```
HTTP/1.1 409 Conflict
<users href="/">
    <create href="/" method="post">
        <username type="xs:token" cardinality="required"/>
        <password type="password" cardinality="required" 
                  error="A password must be specified"/>
    </create>
    ... other hypermedia controls, like search ...
</users> 
```

或者您可能有多个错误，例如，

```
HTTP/1.1 409 Conflict
<users href="/">
    <create href="/" method="post">
        <username type="xs:token" cardinality="required"
                  error="The username 'Skylar Saveland' is already taken. Please select another username"/>
        <password type="password" cardinality="required"
                  error="A password must be specified"/>
    </create>
    ... other hypermedia controls, like search ...
</users> 
```

注意：[需要创建适当的媒体类型以](http://www.amundsen.com/blog/archives/1041)配合上述内容，这将解释超媒体控件的结构（包括表单上的错误属性）并定义各种元素名称的含义（例如，用户，用户名、密码等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T04:21:20.077

#3 更合适。5xx 错误是指服务器出现问题。4xx 错误是指请求出现问题。在这种情况下，请求是错误的，因此 4xx 更合适。400 或 409。

或者你可以做#2，真的取决于上下文。

# wordpress - 在wordpress中，如果需要，我如何将链接重定向到登录，然后返回到同一页面

> ID：12658576
> 
> 赞同：2
> 
> 时间：2012-09-30T04:15:59.477
> 
> 标签：wordpress, redirect, login, hyperlink, custom-post-type

我正在使用类别模板列出一系列自定义帖子，每个帖子都列出了一个文档链接。有些文件是公开的，有些是私有的。目前，如果帖子是公开的，则显示链接；但如果链接是私有的，我会附上“私有资源——请登录阅读”的声明。

我想让“登录”这个词成为一个链接，将任何未登录的用户发送到登录页面，然后将用户重定向回这个页面。但我无法让它发挥作用。我想也许 auth_redirect() 是要走的路，但也许我已经离开了。

这是当前循环的一个稍微简化的版本。

```
if ( have_posts() ) :
  while ( have_posts() ) : the_post();
  // the loop
  $private = get_post_custom_values('private'); // read custom field

  if (isset($private[0]) && $private[0] == 'yes' ) { // if the post is private

    if ( is_user_logged_in() ) {// and if the user is logged in
      // display private post ?>
        <div>
          <h4><?php the_title(); ?></h4>
          <?php get_post_custom_keys();?>
          <p><?php the_content(); ?></p>
          <p><a href="<?php echo get_post_meta($post->ID, "resourcelink", true); ?>">Resource Link</a></p>
          <?php if (get_post_meta($post->ID, "private", true)==yes) {?>
            <p class="private">This document private.</p>
          <?php } ?>
        </div>
    <?php }

    else { // if the user is not logged in
      // want make the a login link, with redirect back to this page
      // but now just tells user to log in ?>
        <div>
          echo the_title('<h4>','</h4>');
          get_post_custom_keys();?>
          <p><?php the_content(); ?></p>
      <?php echo '<p>Private resource &mdash; please log in to read.</p>';
    }
  }
   else { // if the post is public
    // display public post, for every visitor ?>
      <div>
        <h4><?php the_title(); ?></h4>
        <?php get_post_custom_keys();?>
        <p><?php the_content(); ?></p>
        <p><a href="<?php echo get_post_meta($post->ID, "resourcelink", true); ?>">Resource Link</a></p>
      </div>
    <?php }
  endwhile;
endif;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T09:45:45.177

如果用户没有登录，你可以只显示他们没有权限并且`wp_login_form()`处理重定向和所有。[参考](http://codex.wordpress.org/Function_Reference/wp_login_form)。

# linux - 如果找不到命令，execl 会做什么？

> ID：12658579
> 
> 赞同：0
> 
> 时间：2012-09-30T04:17:04.973
> 
> 标签：linux, shell, exec, os.execl

我已经阅读了手册页并进行了一些谷歌搜索。找不到任何东西。假设我使用实际上不包含 arg[0] 中指定的程序的路径参数运行 execl。

它会做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T04:19:13.863

它返回 -1 并设置`errno`（试试吧！）。它`errno`根据遇到的确切问题进行设置。

从[手册页](http://www.kernel.org/doc/man-pages/online/pages/man2/execve.2.html)：

> ### 错误
> 
> `EACCES``filename`拒绝对脚本解释器的路径前缀或名称的组件的搜索权限 。（另见 path_resolution(7)。）
> 
> `ENAMETOOLONG` 文件名太长。
> 
> `ENOENT`文件`filename`或脚本或 ELF 解释器不存在，或者找不到文件或解释器所需的共享库。
> 
> `ENOTDIR` 路径前缀`filename`或脚本或 ELF 解释器的组件不是目录。

# openid - 有哪些服务可以为您的网站提供用户身份验证？

> ID：12658586
> 
> 赞同：0
> 
> 时间：2012-09-30T04:18:45.753
> 
> 标签：openid, facebook-authentication, authentication, oauth-provider

我正在开发一个小型网站，考虑到项目的范围，我不想实施完整的身份验证工作流程，而且我不能相信所有用户都拥有 Facebook 帐户（因此我需要从 Facebook Connect 回退）。我想将用户身份验证管理任务卸载到 3rd 方服务，我最近遇到了[Mozilla Persona](https://persona.org/)，这似乎正是我正在寻找的。但是，它似乎仍处于早期阶段 - 还有哪些其他服务可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T04:27:29.500

您可以使用[Janrain](http://developers.janrain.com/)允许用户从多个身份验证源（Facebook、Twitter、Google 等）中进行选择。这可能是目前最流行的此类库。呃，或者至少看起来好像是不久前我不得不做这样的事情的时候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T06:12:49.960

[我在护照的策略部分](https://github.com/jaredhanson/passport#strategies-1)找到了一份详尽的服务清单。我仍然需要研究我最喜欢哪一个。

# scala - 递归函数不返回 Int

> ID：12658588
> 
> 赞同：2
> 
> 时间：2012-09-30T04:19:04.437
> 
> 标签：scala, recursion, functional-programming

我有一个递归函数，它将重复该函数，直到不满足 if 条件然后输出一个整数。但是，此函数之外需要整数的函数正在接收一个单位。我应该如何修改代码以返回 int？

```
count(r,c,1,0)

   def count(r: Int, c: Int, countR: Int, lalaCount: Int): Int = {
    if (countR < (r + 1)) count(r,c,countR + 1, lalaCount + countR)
    else (lalaCount + c + 1)
   } 
```

这是整个程序

```
object hw1 {
  def pascal(c: Int, r: Int): Int = {

   count(r,c,1,0)

   def count(r: Int, c: Int, countR: Int, lalaCount: Int): Int = {
    if (countR < (r + 1)) count(r,c,countR + 1, lalaCount + countR)
    else (lalaCount + c + 1)
   }
  } //On this line eclipse is saying "Multiple markers at this line
    //- type mismatch;  found   : Unit  required: Int
    //- type mismatch;  found   : Unit  required: Int
pascal(3,4) 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T05:18:17.277

从返回的值`pascal`是它包含的最后一个表达式。你希望它成为你的评价，`count`但这不是最后一件事。正如您所发现的，作业（def、val 等）属于 Unit 类型：

```
 def pascal(c: Int, r: Int): Int = {

   count(r,c,1,0) // => Int

   def count(r: Int, c: Int, countR: Int, lalaCount: Int): Int = {
    if (countR < (r + 1)) count(r,c,countR + 1, lalaCount + countR)
    else (lalaCount + c + 1)
   } // => Unit
  } 
```

只需在`count(r,c,1,0)` *之后*移动，`def`这应该可以解决问题。

# tfs - “团队资源管理器未能完成 Sharepoint 站点上的上传事务”

> ID：12658589
> 
> 赞同：2
> 
> 时间：2012-09-30T04:19:05.717
> 
> 标签：tfs, tfs-2010

> TF400151：团队资源管理器未能在 SharePoint 网站上完成上传事务。刷新并重试。

当我尝试上传一些文档时出现此错误

我的 TFS2010 发生了什么事？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T03:50:24.317

当用户尝试上传仍在客户端计算机上打开的文档时，可能会出现 TFS 错误 TF400151。确保您上传的文档已关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T04:24:13.830

根据我的调查，这似乎是 Microsoft TFS 中的错误。

*   [http://connect.microsoft.com/VisualStudio/feedback/details/758649/misleading-errors-in-vs-2012-and-sharepoint-foundation-2010](http://connect.microsoft.com/VisualStudio/feedback/details/758649/misleading-errors-in-vs-2012-and-sharepoint-foundation-2010)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-21T12:49:31.947

看到文件名不包含无效字符：

```
\ / : * ? " < > | # { } % ~ & 
```

# sql-server - SSIS - 将存储过程结果输出到电子邮件

> ID：12658590
> 
> 赞同：0
> 
> 时间：2012-09-30T04:19:09.517
> 
> 标签：sql-server, tsql, stored-procedures, ssis

> **可能重复：**
> [根据执行 SQL 任务的输出发送邮件任务](https://stackoverflow.com/questions/5556276/send-mail-task-based-on-output-from-execute-sql-task)

目标：将存储过程的电子邮件输出发送给使用 SSIS 的人。

我有一个简单的存储过程，它返回列的计数。我想通过电子邮件发送该值。

我认为我应该做的：我应该在 SSRS 中创建一个包。引入 Execute SQL TASK 和 E-Mail 任务。对于执行 SQL 任务，连接到服务器/数据库。输入 EXEC proc cmd。将其连接到电子邮件。

在存储过程中，我声明了一个名为的变量`@COUNT`，并且在 select 语句中，我有

```
SELECT @Count = COUNT(FIELD_A)....
FROM blah blah....
WHere blah blah.....

SELECT @Count 
```

当我执行该过程时，我得到一个分配给`@Count`变量的计数。我想在 SSIS 中创建一个变量并将其分配给过程的输出值。使用该变量并以某种方式将该变量的电子邮件值与自定义消息一起使用。我将把它变成一个自动化的工作，所以这个包每天都会在某个时间运行，并且应该发送一封带有计数值的电子邮件。

我不知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T04:41:09.017

您是否查看过[sp_send_dbmail](http://msdn.microsoft.com/en-us/library/ms190307.aspx)而不是 SSIS？你没有在你的目标中提到 SSIS ......并不是说 SSIS 不起作用，但我认为一个简单的过程调用对你来说会更容易。

# c - GLib 哈希表：无效的 free()

> ID：12658598
> 
> 赞同：0
> 
> 时间：2012-09-30T04:20:19.900
> 
> 标签：c, glib

我有一个创建的 GLib 哈希表：

```
GHashTable *gmem = g_hash_table_new_full(NULL, NULL, (GDestroyNotify) free_memoryaddresses, (GDestroyNotify)free_metadatarecords); 
```

在 Valgrind 中，我收到以下错误：

```
==19610== 1 errors in context 2 of 2:
==19610== Invalid free() / delete / delete[] / realloc()
==19610==    at 0x40291BE: free (vg_replace_malloc.c:427)
==19610==    by 0x804939F: free_memoryaddresses (memory.c:361)
==19610==    by 0x4077A0F: g_hash_table_remove_all_nodes (ghash.c:533)
==19610==    by 0x4078A7F: g_hash_table_remove_all (ghash.c:1345)
==19610==    by 0x8048BCA: m61_printstatistics (m61.c:115)
==19610==    by 0x80494E9: main (mytest.c:9)
==19610==  Address 0x4341b50 is 0 bytes inside a block of size 1 free'd
==19610==    at 0x40291BE: free (vg_replace_malloc.c:427)
==19610==    by 0x8048994: m61_free (m61.c:51)
==19610==    by 0x80494E4: main (mytest.c:8) 
```

我没有内存泄漏。但是如果我注释掉这两个函数中的行，那么我会得到内存泄漏和（错误摘要：来自 1 个上下文的 1 个错误（抑制：0 来自 0））

```
void free_memoryaddresses(gpointer a)
{   (void)a;
    free(a);
}

void free_metadatarecords(gpointer a)
{   (void)a;
    free_metadata_record(a);
    free(a);
} 
```

这是我的 Valgrind 命令：

```
G_SLICE=always-malloc G_DEBUG=gc-friendly valgrind --leak-check=yes --tool=memcheck --track-origins=yes -v ./mytest 
```

我通过存储从 malloc 接收到的指针来获取内存键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T05:51:33.753

原来我叫了两次“免费”。我忘记了我的“免费”包装器叫做 free，我剩下要做的就是释放元数据，而不是实际的指针。

# java - 给定一个数字，构建一个二维网格的程序

> ID：12658599
> 
> 赞同：1
> 
> 时间：2012-09-30T04:20:24.910
> 
> 标签：java, arrays, grid, 2d, prime-factoring

该程序的目标是创建一个二维值网格。作为用户的输入，我们得到网格中存在的元素总数（例如，n）。我们需要构建一个包含 n 个值的二维网格（这些值从 0 开始是连续的，即 0,1,2,3,4,5,6..n）

```
For n=9,

0 1 2
3 4 5
6 7 8

For n=6,

Either,
0 1 2
3 4 5
or
0 1
2 3
4 5 
```

以下是我到目前为止所管理的：

```
int rowlen = (sqrt(n))
int collen = (n/rowlen)
int no = 0;

for (int i = 0; i < rowlen-1) {
    for (int j = 0; j < collen-1) {

        System.out.print(no+"\t")
        no++;

    }

    System.out.println()
} 
```

上面的代码适用于完全平方数，也适用于“n”为偶数的少数其他情况。但是如果'n'是奇数并且对于'n'的少数其他偶数值，例如n = 10，它会失败。

您能否建议一种更好的构建网格的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T04:30:16.163

[素数分解——例如：给定`6`，求`3*2`——是现代计算的巨大挑战之一。](http://en.wikipedia.org/wiki/Integer_factorization)最简单也可能是最可靠的方法就是迭代。（即它可以被 1 整除吗？它可以被 2 整除吗？它可以被 3 整除吗？...）

好消息是无论如何你都在迭代！因此，不要尝试通过猜测因子 (`rowlen`和`collen`) 来解决该问题，而是开始迭代输出，并检查沿途的每个数字，看看它是否是一个因子！一旦你找到一个，只有这样你才应该费心决定你将拥有多少行和列。

类似（伪代码）：

```
var n = 10;

var cols = 0;

for(var i=0; i<n; i++) {
    if(i>1 && ((cols === 0 && n%i === 0) || (cols>0 && i%cols===0))) {
        if(cols===0) { // we've found our first prime factor;
                       // this value will be used as the number of columns
            cols = i;
        }
        print("\n");
    }
    print(i);
} 
```

# php - PHP 和 jQuery 显示：无

> ID：12658607
> 
> 赞同：0
> 
> 时间：2012-09-30T04:21:59.947
> 
> 标签：php, jquery, html

当用户名字段为空时，我正在尝试使用 jQuery 显示错误文本。这不是问题，因为我已经这样做了。问题是在错误文本显示后，我想单击用户名字段并隐藏错误文本 div，这样如果该字段仍然为空，我可以使用 jQuery 重新显示错误。

当我使用 jQuery 在 CSS 中将可见性设置为隐藏时，`display: hidden`当我在 Google Chrome 的检查器中查看代码时，它会自动添加一个。

代码在：[http ://albsocial.net84.net/](http://albsocial.net84.net/)

```
<?php include ("php/head.php"); ?>
<div id="wrapper">

    <div id="container">

        <div id="intro">

            <h2><center>Are you a member? Login ...</center></h2>
            <h3><center>And enjoy hundreds of services.</center></h3>

            <div id="log_form">

                <form action="php/login.php" method="post" class="login_form">

                    <input type="text" size="25" name="log_uname"
                           id="login_txt" placeholder="Your Username">
                    <input type="password" size="25" name="log_password" id="login_pass" placeholder="Your Password">
                    <label id="check"><input type="checkbox" name="checkbox">         Remember Me</label>
                    <input type="submit" name="submit1" id="login_sub" value="LogIn">
                    <img id="loading1" src="images/ajax-loader.gif" alt="working.." />

                    <script>
                        $('#login_txt').click(function (e) {
                            e.preventDefault();
                            $('#error1').fadeOut('fast', function () {
                                $(this).css("visibility","hidden");
                            });
                        });             
                    </script>

                </form>

                <div id="error1"></div>
            </div>

            <div id="new_users">
                <h4 class="h4_users">New Users ...</h4>

                <a href="#"><img src="#" width="55" height="55"></a>
                <a href="#"><img src="#" width="55" height="55"></a>
                <a href="#"><img src="#" width="55" height="55"></a>
                <a href="#"><img src="#" width="55" height="55"></a>
            </div>

        </div>

        <div id="register">
            <h2><center>Sign up Below ...</center></h2>
            <h3><center>Easy, fast and free!</center></h3>

            <form action="php/register.php" method="post" name="form" class="form">
                <input type="text" size="25" name="fname" placeholder="First Name">
                <input type="text" size="25" name="lname" placeholder="Last Name">
                <input type="text" size="25" name="username" placeholder="Username">
                <input type="text" size="25" name="email" placeholder="Email">
                <input type="text" size="25" name="email2" placeholder="Repeat Email">
                <input type="password" size="25" name="password" placeholder="Password">
                <input type="password" size="25" name="password2" placeholder="Repeat Password">
                <input type="submit" name="submit" id="sub" value="Sign Up!">
                <img id="loading" src="images/ajax-loader.gif" alt="working.." />
            </form>
            <div id="error"></div>
        </div>
    </div>

    <?php include("php/footer.php"); ?> 
```

以及我用来实际显示或创建错误代码的代码

```
$(document).ready(function(){

    $('.form').submit(function(e) {
        register();
        e.preventDefault();
    });

    $('.login_form').submit(function(e) {
        login();
        e.preventDefault();
    });

});

function register(){
    hideshow('loading',1);
    error(0);

    $.ajax({
        type: "POST",
        url: "php/register.php",
        data: $('.form').serialize(),
        dataType: "json",
        success: function(msg){
            if(parseInt(msg.status)==1){
                window.location=msg.txt;
            } else if(parseInt(msg.status)==0) {
                error(1,msg.txt);
            }
            hideshow('loading',0);
        }
    });
}

function login(){
    hideshow1('loading1',1);
    error1(0);

    $.ajax({
        type: "POST",
        url: "php/login.php",
        data: $('.login_form').serialize(),
        dataType: "json",
        success: function(msg1){
            if(parseInt(msg1.status1)==1){
                window.location=msg1.txt1;
            } else if (parseInt(msg1.status1) == 0) {
                error1(1,msg1.txt1);
            }
            hideshow1('loading1',0)
        }
    });
}
function hideshow(el,act){
    if(act) $('#'+el).css('visibility','visible');
    else $('#'+el).css('visibility','hidden');
}
function error(act,txt){
    hideshow('error',act);
    if(txt) $('#error').html(txt);
}
function hideshow1(el,act){
    if(act) $('#'+el).css('visibility','visible');
    else $('#'+el).css('visibility','hidden');
}
function error1(act,txt1){
    hideshow1('error1',act);
    if(txt1) $('#error1').html(txt1);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T04:38:25.690

尝试

```
$('#error1').fadeOut('fast', function () {
   $(this).show()
   $(this).css("visibility","hidden")    
}) 
```

因为 fadeOut 设置 display:none; 而且您还在使用可见性属性，摆脱可见性并改用 .show() 和 .hide()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T04:28:08.337

做一个`.css('display', 'none');`和`.css('display', 'block')`隐藏/显示应该可以正常工作。

另一种方法是将 设置为`.html('')`从 div 中删除文本（从而使其隐藏）。然后你就不需要担心 div 的可见性了。

# python - 如何向 Ruby 工程师快速学习 Python（MongoDB）？

> ID：12658609
> 
> 赞同：-4
> 
> 时间：2012-09-30T04:22:16.823
> 
> 标签：python, mongodb

我用Ruby on Rails开发了一些项目，现在想快速学习Python，有什么好的方法吗？

我想知道一些好的网站，好的样本，好的做法。

比如Python如何连接MongoDB等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T04:25:36.963

python 上最好的资源是 docs.python.org，它有 CPython 参考，除了它主要是学习语法，这与 ruby​​ 有点不同，但很容易掌握。任何在线教程都应该为您提供语法示例。如果您有具体问题，请在此处提问。一个提示，如果你在没有参数的情况下启动 python，你会得到 repl，它可以让你交互式地探索模块和对象。从那里开始，help、vars 和 dir 是查看事物如何工作的三个最有用的函数。

# python - 意外的 pyparsing 行为

> ID：12658610
> 
> 赞同：2
> 
> 时间：2012-09-30T04:22:22.030
> 
> 标签：python, pyparsing

我在尝试调试 pyparsing 代码时遇到了这种意外行为：

```
string1 = "this is a test string : that behaves as I expect\n"
string2 = "this string does not behave as I expect\n"

field = CharsNotIn(":\n")
line = field + ZeroOrMore(Literal(":") + field) + LineEnd()

print line.parseString(string1)
print line.parseString(string2) 
```

这会产生以下输出：

```
['this is a test string ', ':', ' that behaves as I expect', '\n']
['this string does not behave as I expect'] 
```

由于某种原因，解析器能够在 中提取行尾字符`string1`，但无法在 中提取它`string2`。`string2`我什至无法理解如果它没有拿起行尾，它是如何产生匹配的。

这种行为似乎特别适用于行尾字符，因为使用行尾以外的字符似乎可以正常工作：

```
string1 = "this is a test string : that behaves as I expect*"
string2 = "this string also behaves as I expect*"

field = CharsNotIn(":*")
line = field + ZeroOrMore(Literal(":") + field) + Literal("*")

print line.parseString(string1)
print line.parseString(string2) 
```

这会产生：

```
['this is a test string ', ':', ' that behaves as I expect', '*']
['this string also behaves as I expect', '*'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T04:51:02.917

打印行以查看它匹配的伪正则表达式。

```
>>> print line
{!W:(:
) [{":" !W:(:
)}]... LineEnd} 
```

如果我理解这一点，它正在寻找非冒号非换行符，它在第一个换行符处停止（在你的示例 string2 中，占据整行），然后寻找冒号和更多单词，如果它们存在（他们不' t)，然后是换行符。我的猜测是换行实例以某种方式被删除，而不是你断言如果它不能匹配换行符它将不匹配字符串是错误的。

```
>>> print line.parseString('xyzyy')
['xyzyy'] 
```

这确实留下了为什么即使没有换行符它也匹配的问题......

# php - 如何从数据库“生成”Web API？

> ID：12658612
> 
> 赞同：3
> 
> 时间：2012-09-30T04:22:41.633
> 
> 标签：php, web-services, server-side

我想从数据库中自动生成一个 Web API。我可以轻松地使用 SQL 查询数据库，但显然这不适用于公共 API。我也可以手动编写服务器端代码，但这需要很长时间，因为数据库相当大。此外，手动编写将是一项非常机械且重复的任务，所以我不明白为什么程序不能为我完成。

例如，假设我的数据库中有一个名为“Announcements”的表。我正在寻找一种方法（给定该数据库表），自动生成服务器端代码，允许某人创建新的公告，需要正确的字段。手动完成，这可能看起来像一个名为“create_announcement.php”的 PHP 文件，它需要数据库中存在的所有字段，如公告标题、正文和作者。当然，这也可以通过遵循一些设计模型（如 REST）以更简洁的方式完成，但这只是一个示例。

我正在考虑的其他事情是：

*   某种形式的身份验证。例如，如果用户想删除一个公告，他/她应该被要求“登录”才能这样做。我不确定这在这里是如何工作的。
*   某种添加逻辑的方法。如果我可以生成一个 API 来通过 HTTP 访问数据库（正如我在上面试图描述的那样），那么 API 将不知道某些特定性。假设公告资源应该包含一个必须*在*今天之后的日期。我需要一种在代码中表达这一点的方法。
*   如果解决方案可以遵循某种设计模型以使其更容易从不同的客户端访问，那将是理想的。

那么我应该研究什么样的工具呢？面对这个问题，人们采取的一般方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T05:18:44.910

上面的评论列出了一些很棒的现有软件，你真的必须弄清楚你是否想重新发明这个概念。

如果您自己编写此代码，与单独编写每个页面和操作相比，您仍然可以节省大量时间，但是如果您还没有内置该功能，那么您正在谈论的验证可能会占用您所有的时间这些模型（如果存在）。

一些简单的东西可以从 URL 中获取表名、操作名、id 号并吐出基本的东西。

```
<?
$allowed_tables = array('posts','comments','people');

$table = $_GET['table'];
$page = (int) $_GET['page'];

$per_page = 100;
$offset = ($page - 1) * $per_page;

if (!$table || !in_array($table, $allowed_tables)) {
    die('Invalid table.');
}

$rs = mysql_query("SELECT * FROM `$table` ORDER BY `id` DESC LIMIT $per_page, $offset");
$data = array();

if ($rs && mysql_num_rows($rs)) {
    while ($row = mysql_fetch_array($rs,MYSQL_ASSOC)) {
        $data[] = $row;
    }
}

print json_decode($data);
?> 
```

您肯定可以在几个小时内取得一些重大进展，添加专门显示或隐藏的字段，您甚至可以在简单的基础上处理验证（必填字段很简单），只是为了让它滚动。

# php - 提交插入查询然后重新加载页面

> ID：12658614
> 
> 赞同：1
> 
> 时间：2012-09-30T04:23:42.853
> 
> 标签：php, mysql, sql

> **可能重复：**
> [如何判断在 PHP 表单提交中单击了哪个按钮？](https://stackoverflow.com/questions/2680160/how-can-i-tell-which-button-was-clicked-in-a-php-form-submit)

我的页面上有几个提交按钮，每个按钮都会将输入的值插入到 sql 数据库中。

我希望做的是捕获哪个提交按钮被点击执行相关的插入语句，然后重新加载显示新值的页面。但是我只是不知道该怎么做。

我习惯于这样指定我的帖子

```
<form action="orderform.php" method="post"
onsubmit="document.getElementById('myButton').disabled=true;
document.getElementById('myButton').value='Submitting...';"
> 
```

该操作正在指定一个不同的 .php 文档。我想知道如何制作它，以便在选择提交按钮时它只是转到当前页面上的一个函数。这可能吗？如果是这样，您能否提供一个示例或示例链接，因为我只是不知道这将被称为 PHP 新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T04:26:50.900

如果您在 orderform.php 上，并且想要访问 orderform.php 上的功能，只需在页面顶部写下 php

您可以通过在提交中添加名称来检测提交按钮

```
<input type="submit" value="Submit" name="submit_first"> 
```

并在 php 检查

```
if(isset($_POST['submit_first'])) 
```

完整示例 test.php

```
<?php
      if(isset($_POST['submit_first']))
      echo'this is form the submit first';
  ?>
<html>
    <head></head>
    <body>
        <form name="input" action="test.php" method="POST">
            Username: <input type="text" name="new-user">
            <input type="submit" value="Submit" name="submit_first">
        </form> 
    </body>
</html> 
```

# c++ - 刽子手中的下划线

> ID：12658615
> 
> 赞同：-1
> 
> 时间：2012-09-30T04:23:58.493
> 
> 标签：c++

我正在制作一个刽子手游戏，但其中的一部分有问题。

我从文件中选择了一个随机单词，但我想将该单词显示为一系列下划线*_* _，然后将所选字母与下划线中的位置相匹配。

```
cout <<"1\. Select to play the game\n";
cout <<"2\. Ask for help\n";
cout <<"3\. Select to quit the game\n";

cout << "Enter a selection: ";
int number;
cin >> number;

    while(number < 1 || number > 3 || cin.fail())
    {
        if(cin.fail())
        {
            cin.sync();   
            cin.clear();   
            cout << "You have not entered a number, please enter a menu selection between 1 and 3\n";
            cin >> number;
        }
        else 
        {
            cout << "Your selection must be between 1 and 3!\n";
            cin >> number;
        }
    }

switch (number)
{
    case 1: 
        {
         string word;
         string name;
        cout << " Whats your name? ";
        cin >> name;

        Player player();

          ifstream FileReader;
          FileReader.open("words.txt");

          if(!FileReader.is_open())
            cout << "Error";

          //this is for the random selection of words

          srand(time(0));
          int randnum = rand()%10+1;             

          for(int counter = 0; counter < randnum; counter++)
            {
                getline(FileReader, word, '\n');
            }

                cout << "my word: " << word << "\n"; 

                // get length of word
                int length;

                //create for loop
                for(int i = 0; i < length; i++)
                    cout << "_";

                //_ _ _ _ _

                SetCursorPos(2,10);

                FileReader.close();
                break; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T04:34:10.873

我不会为你编写这个代码，但我会用伪代码给你一些提示：

创建一个包含 50 个整数的数组（这应该比任何单词都长）并将数组的每个元素初始化为 0。

现在，数组的每个元素都将对应于单词的一个字母。如果数组被`int guessed[50]`猜测[0] 将对应于第一个字母，猜测[1] 对应于第二个字母，依此类推。数组中的值会告诉你玩家是否已经发现了那个字母。一开始，guessed 中的所有元素都为 0，这意味着玩家还没有猜到任何字母。

然后您向用户询问一个字母并将其保存在一个名为 currentLetter 的字符中，您的代码将如下所示：

```
for (i = 0; i < len(word); i++)
  if word[i] == currentLetter
    guessed[i] = 1 
```

这会将猜测数组中对应于猜测字母的元素设置为 1。

当您想打印到目前为止猜到的所有字母时，请执行以下操作：

```
for (i = 0; i < len(word); i++)
  if guessed[i] == 1
    print word[i]
  else
    print "_" 
```

将所有这些添加到 while 循环中，您将拥有一个工作程序。

# php - 使用 php 的雅虎股票小部件远程调用

> ID：12658616
> 
> 赞同：0
> 
> 时间：2012-09-30T04:24:01.410
> 
> 标签：php

我正在使用 yahoo 的金融股票报价从他们的 api 获取股票行情数据。使用抓取数据

```
$data = file_get_contents("http://quote.yahoo.com/d/quotes.csv?s=appl&f=sl1d1t1c1ohgv&e=.csv"); 
$values = explode(",", $data);
echo '<pre>';
print_r($values); 
```

现在这在我的本地服务器 (localhost) 中运行良好，即 $values 被回显。但是当我将此文件上传到我的服务器时，它会打印出 URL： http: [//quote.yahoo.com/d/quotes.csv](http://quote.yahoo.com/d/quotes.csv?s=appl&f=sl1d1t1c1ohgv&e=.csv) ?s=appl&f=sl1d1t1c1ohgv&e=.csv 。我知道服务器上的 file_get_contents 存在一些问题。甚至 allow_url_fopen 在服务器上设置为“打开”。似乎无法找出服务器端的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T04:33:41.283

您可能遇到服务器设置问题，不允许您*使用*`file_get_contents()`. `curl`在尝试从其他域中提取内容时，PHP将成为您的朋友。

我刚刚发现了这个很棒的小片段：[http ://snipplr.com/view/4084](http://snipplr.com/view/4084)

`file_get_contents()`这是一个复制但使用的功能的功能`curl`：

```
function file_get_contents_curl($url) {
    $ch = curl_init();

    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); //Set curl to return the data instead of printing it to the browser.
    curl_setopt($ch, CURLOPT_URL, $url);

    $data = curl_exec($ch);
    curl_close($ch);

    return $data;
} 
```

您的新代码如下所示：

```
$data = file_get_contents_curl("http://quote.yahoo.com/d/quotes.csv?s=appl&f=sl1d1t1c1ohgv&e=.csv"); 
$values = explode(",", $data);
echo '<pre>';
print_r($values); 
```

# ios - 仅使用 sdk 3.1 发布 iOS 应用程序？

> ID：12658618
> 
> 赞同：3
> 
> 时间：2012-09-30T04:24:21.140
> 
> 标签：ios, publish, facebook-ios-sdk

我希望我的应用程序能够让用户在 Facebook 上发布消息。似乎与 sdk 3.1 中的新要求一样，应用程序首先以只读权限打开会话，然后重新授权写入权限，这变得不可能或非常难看，因为它强制两个应用程序切换。

我的场景是我的应用中有一个发布到 Facebook 的按钮，我希望用户能够向 Facebook 发布消息。他此时还没有登录。

如果我使用新的 +openSessionWithPublishPermissions:... 方法，我会收到一个 sdk 错误，指出应用程序需要以只读权限登录。

如果我使用 +openSessionsWithReadPermissions:... 我得到一个应用程序开关来授权，然后我使用 reauthoruzeSessionWithPublishPermissions 我得到另一个应用程序开关。所以按下按钮会导致两个应用程序切换，这是极其丑陋的情况。

这种新的权限限制将破坏 Facebook sdk 演示中的许多应用程序，这些应用程序之所以能继续工作，只是因为它们使用了旧的已弃用方法。

我可以使用新的 ios6 Facebook API 来实现这一点，但有两个短暂的下降，它不适用于 iOS 5 用户，并且仅在用户在系统级别登录但不允许用户登录时才有效到我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:51:50.380

我想在这种情况下，您将需要使用不推荐使用的方法`openActiveSessionWithPermissions`来禁用本机身份验证对话框。

[请参阅Facebook 开发人员“howto”](http://developers.facebook.com/docs/howtos/ios-6/)中的提示 5

# php - 网站用户上传文件和状态

> ID：12658619
> 
> 赞同：0
> 
> 时间：2012-09-30T04:24:27.250
> 
> 标签：php, mysql, database, user-accounts

我有一个用户注册页面，用户在其中注册一个活动，然后提交一篇论文。然后审阅者将阅读论文，并批准/拒绝它。我完成了所有的注册、验证、登录和用户认证工作。现在我需要设计一种方式让用户在网站上上传他/她的论文，然后查看它的状态。我有点迷失关于如何构建整个事情的想法。

我需要知道 2 件事
1）我应该将论文（文档文件）存储在哪里？我应该把它全部放在网站目录中的一个文件夹中，使用 google docs，jquery 插件吗？这里的规范程序是什么？
2）我应该如何组织审稿人？他/她是否应该在网站上有一个主帐户，可以查看所有提交的文档，然后批准或拒绝它们？如果是这样，我如何设置主帐户，使所有文档可见，并标记状态？

我对状态有一个粗略的了解。我可以`Paper Status`在数据库中有一个列，并在网站上有两个复选框；当审稿人读完论文后，他们只需选择其中一个复选框，该信息就会被输入数据库。然后我可以检索该信息并将其呈现给用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T05:05:47.470

将它们存储在您的服务器上应该没问题。如果它们需要安全，您应该将它们放在您的公用文件夹上方。例如，如果您的路径是`/user/public_html`，您应该为这些文件创建一个文件夹，例如`/user/papers`.

然后在加载其中一个时，您应该使用该`header()`功能提供正确的强制下载标头，然后`readfile()`将文件内容实际发送到浏览器，以便审阅者可以下载文件。这也让您有机会在用户实际访问文件之前对其进行身份验证——这很重要，因此不能随意“发现”链接，从而可以访问您的所有文件。

# image - 在 Joomla 中实现简单图片库时出错

> ID：12658622
> 
> 赞同：1
> 
> 时间：2012-09-30T04:25:07.237
> 
> 标签：image, joomla, gallery

我正在使用 Joomla (2.5) 和 Simple Image Gallery 扩展开发一个网站（此时为 localHost）。

我对 Joomla 很陌生，所以我一直在修改如何修改模板。我按照本教程[http://www.youtube.com/watch?v=EqVgCfxW4ms](http://www.youtube.com/watch?v=EqVgCfxW4ms)了解如何正确实现扩展。我没有得到与他们相同的结果。不幸的是，我收到以下错误消息：

```
Strict Standards: Only variables should be assigned by reference in C:\xampp\htdocs\joomla2\plugins\content\jw_simpleImageGallery\jw_simpleImageGallery.php on line 31

Strict Standards: Only variables should be assigned by reference in C:\xampp\htdocs\joomla2\plugins\content\jw_simpleImageGallery\jw_simpleImageGallery.php on line 32

Strict Standards: Non-static method SimpleImageGalleryHelper::getTemplatePath() should not be called statically, assuming $this from incompatible context in C:\xampp\htdocs\joomla2\plugins\content\jw_simpleImageGallery\jw_simpleImageGallery.php on line 109

Strict Standards: Only variables should be assigned by reference in C:\xampp\htdocs\joomla2\plugins\content\jw_simpleImageGallery\jw_simpleImageGallery\includes\helper.php on line 255

Strict Standards: Non-static method SimpleImageGalleryHelper::getTemplatePath() should not be called statically, assuming $this from incompatible context in C:\xampp\htdocs\joomla2\plugins\content\jw_simpleImageGallery\jw_simpleImageGallery.php on line 112

Strict Standards: Only variables should be assigned by reference in C:\xampp\htdocs\joomla2\plugins\content\jw_simpleImageGallery\jw_simpleImageGallery\includes\helper.php on line 255

Strict Standards: Non-static method SimpleImageGalleryHelper::getTemplatePath() should not be called statically, assuming $this from incompatible context in C:\xampp\htdocs\joomla2\plugins\content\jw_simpleImageGallery\jw_simpleImageGallery.php on line 115

Strict Standards: Only variables should be assigned by reference in C:\xampp\htdocs\joomla2\plugins\content\jw_simpleImageGallery\jw_simpleImageGallery\includes\helper.php on line 255

Strict Standards: Non-static method SimpleImageGalleryHelper::renderGallery() should not be called statically, assuming $this from incompatible context in C:\xampp\htdocs\joomla2\plugins\content\jw_simpleImageGallery\jw_simpleImageGallery.php on line 149

Fatal error: Allowed memory size of 10485760 bytes exhausted (tried to allocate 11264 bytes) in C:\xampp\htdocs\joomla2\plugins\content\jw_simpleImageGallery\jw_simpleImageGallery\includes\helper.php on line 105 
```

这是页面上唯一的文本——甚至没有显示模板的其他部分。根据就该问题向某人提供的建议，我关闭了错误报告，但毫不奇怪，它只是给了我一个简单的白页，而不是告诉我出了什么问题。

问以下问题的人似乎和我有同样的问题[http://forum.joomlaworks.net/simple-image-gallery-(plugin)/(gallery)gallery-name(gallery)-question/](http://forum.joomlaworks.net/simple-image-gallery-(plugin)/(gallery)gallery-name(gallery)-question/)但我检查了我的缓存文件夹的权限，它似乎是可写的。

我不知道如何解决这个问题。有没有人遇到过同样的问题或对问题出在哪里有想法？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T12:08:35.873

我有`Strict Standards:`一次在我的网站上。对我来说幸运的是，它当时在 WAMP 上，所以我可以访问 php.ini 并且能够添加一个小代码片段来防止错误再次出现。

因此，如果您确实可以访问 php.ini，请打开它并搜索

```
error_reporting(E_ALL); 
```

并替换为：

```
error_reporting(E_ALL | E_STRICT); 
```

# javascript - asp.net 捕获客户端时间并将其插入数据库

> ID：12658629
> 
> 赞同：0
> 
> 时间：2012-09-30T04:26:34.110
> 
> 标签：javascript, asp.net

在我的 asp.net Web 应用程序中，我需要捕获客户端时间并将其存储在数据库中。为此，我在主人的头脑中编写了以下脚本：

{

```
function checkClientTimeZone() {
    // Set the client time zone
    var dt = new Date();
    alert(dt.toTimeString());
    document.getElementById("HiddenField1").value = dt.toTimeString();
}

window.onload = checkClientTimeZone;

</script> 
```

}

母版页上已声明隐藏字段的位置 在每次加载页面时，脚本运行良好并提醒客户端时间。但是当我在内容页面中引用隐藏字段的值时，它仍然反映默认值“Hi”。有人可以帮忙吗..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T04:30:34.020

我想你忘了检查页面加载是否是由于回发。您应该在 Page_Load 函数中添加以下检查：`if (Page.IsPostBack)`然后获取隐藏字段中的值并将其添加到数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T04:35:13.157

您是否正在使用 HiddenField1 的服务器端 id，这在客户端不起作用？检查浏览器中的 HTML，或调试 Javascript 以查看 getElementById() 是否返回有效元素。

# git - 使用 Git 跟踪问题和 ToDo 的最简单方法是什么？

> ID：12658632
> 
> 赞同：0
> 
> 时间：2012-09-30T04:27:04.897
> 
> 标签：git, issue-tracking, todo

是否有任何*内置的*问题跟踪或 ToDo 跟踪`git`？

或者有没有一种*简单的方法*可以使用 git 轻松管理任务和错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T04:31:06.590

我知道很多人只是在存储库中保存一个文本文件。这是一个很酷的想法，因为，因为 GIT 是一个源代码控制系统，随着时间的推移通过提交查看 TODO 文件可以揭示您已经完成的工作。换句话说，使用 GIT，您可以通过 TODO 文件和设计文件等内容查看您的进度。您正在寻找一种管理 TODO 的简单方法吗？我会说只是将 TODO.txt 文件放入存储库中；没有比这更简单的了！

# iphone - UIScrollview 使当前图像变大

> ID：12658633
> 
> 赞同：1
> 
> 时间：2012-09-30T04:27:09.780
> 
> 标签：iphone, objective-c, ios

我正在构建一个包含 10 张图像的可滚动画廊。当我停在一个图像上时，我希望当前图像看起来比两侧的其他图像高一点。如何获得焦点并调整框架？一旦拖动结束，就会调用函数 scrollViewDidEndDecelerating。如何获得对该 imageview 框架的引用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T12:59:20.467

假设你持有对`UIImageView`s in 的引用`self.imageViews`，你可以尝试这样的事情。

```
CGFloat centerX = CGRectGetMidX(self.view.bounds);
for(UIImageView imgView * in self.imageViews)
{
    if(CGRectContainsPoint(imgView, centerX)) // If imgView is close to center
    {
        imgView.transform = CGAffineTransformMakeScale(1.2f, 1.2f);
    }
    else
    {
        imgView.transform = CGAffineTransformIdentity;
    }
} 
```

我假设你是水平滚动，但如果你是垂直滚动，你需要使用它`centerY`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T09:47:08.017

查看 iCarousel 而不是重新发明轮子...... [https://github.com/nicklockwood/iCarousel](https://github.com/nicklockwood/iCarousel)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T05:05:54.190

如果您的图像列表是有限的，并且不会变得太大，我会保留一个 NSArray 对图像的引用。然后，`scrollViewDidEndDecelerating`您可以使用滚动偏移量来确定滚动停止的位置，并将其与整个视图成比例，您应该能够知道要显示数组中的哪个索引图像。

像这样的东西（语法可能是关闭的）

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    //assumes that "arrayOfImages" is the array of images that you are showing
    //contentOffset.y assumes your scroll view is scrolling vertically, switch to x if horizontal
    int indexOfImageToShow = scrollView.contentOffset.y / [arrayOfImages count];
    UIImage *imageToShow = [arrayOfImages objectAtIndex:indexOfImageToShow];
} 
```

# azure - Azure 站点上的自定义域名正常工作，但始终重定向到 azurewebsites.net？

> ID：12658634
> 
> 赞同：0
> 
> 时间：2012-09-30T04:27:15.830
> 
> 标签：azure

我在共享模式 Azure 站点上设置了一个自定义域，CNAME 为 www.lakestarlodge.com，A 记录为lakestarlodge.com。两者都有效 - 我可以在浏览器中输入任何一个并访问该站点。

但是，我刚刚注意到，当网站完成加载时，它已被重定向到lakestarlodge.azurewebsites.net。我不能确定，但​​我可以发誓今晚之前没有这样做。我是否需要更改某个设置，或者这是 Azure 站点上自定义域的正常行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T20:24:20.207

我知道这不可能是默认行为！事实证明，我已经使用 DNS 和“域转发”设置了 GoDaddy，并且域转发（不是故意保留的）一直覆盖 A 记录。所以 DNS 被有效地跳过了。都解决了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-22T05:29:45.613

对于所有可能仍然有同样问题的人，就我而言，我使用的是 wordpress，当我创建网站时，我选择了 Wordpress 默认地址：mysite.azurewebsites.com。所以这不是 Wordpress 问题。[您可以在此之前的答案](https://stackoverflow.com/questions/34742852/configuring-azure-website-to-always-resolve-to-custom-domain?noredirect=1&lq=1)中找到如何解决此问题。

# zend-framework - 在 Unix Web 服务器上安装 Zend 框架

> ID：12658638
> 
> 赞同：1
> 
> 时间：2012-09-30T04:27:39.840
> 
> 标签：zend-framework, unix

我想在 Unix 服务器上安装 Zend 框架，但我在网上找不到任何关于如何安装的好的指南。我查看了以下指南：[http](http://akrabat.com/wp-content/uploads/Getting-Started-with-Zend-Framework.pdf) ://akrabat.com/wp-content/uploads/Getting-Started-with-Zend-Framework.pdf ，但它没有针对 Unix 的说明。我不是 Unix 专家，但我知道如何使用它的基础知识。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T10:45:09.583

由于 PHP 是一种可移植语言，因此在 Windows、Linux、Unix 或任何其他平台上安装 Zend Framework 应该完全相同。

只需确保您的库路径设置正确。我有在 index.php 中强制执行此操作的习惯：

```
defined('PROJECT_PATH') || define('PROJECT_PATH', realpath(dirname(__FILE__) . '/../'));

// Ensure library/ is on include_path
set_include_path(implode(PATH_SEPARATOR, array(
    realpath(PROJECT_PATH . '/library'),
    get_include_path(),
))); 
```

使用此设置，您可以将 [zf-1.x/library/Zend] 目录复制（或符号链接）到您的 [project/library/Zend] 目录中。

您还可以将 Zend Framework 添加到更标准的位置 [Linux: /usr/share/php/Zend] 并将此位置添加到 php.ini 的 include_path 指令中：

```
$ cat /etc/php5/apache2/php.ini | grep include_path
include_path = ".:/usr/share/php" 
```

通过代码或 php.ini 设置您的 include_path 后，只需 require_once 主应用程序类并为应用程序的其余部分设置一个自动加载器。

其他需要考虑的事情是： * 安装 PHP 本身 * PHP 的接口（Apache2？）并进行适当的配置

祝你好运！

# javascript - jQuery：延迟/承诺

> ID：12658641
> 
> 赞同：2
> 
> 时间：2012-09-30T04:28:21.867
> 
> 标签：javascript, backbone.js

我正在尝试从示例应用程序中找出主干（请参阅[https://github.com/elfsternberg/The-Backbone-Store](https://github.com/elfsternberg/The-Backbone-Store)）。该代码使用 jQuery 的 Deferred 和 promise()，如下面的代码所示。我已经阅读了有关 jQuery 的文档，但是无法从下面的示例中弄清楚如何使用这些方法。您可能需要更多代码来回答这个问题，但也许不需要。这些是我对此的疑问

1) dfd.resolve 是在fadeOut 完成后调用的吗？如果是这样，dfd.resolve 会触发什么？

2) 通过返回 promise.promise() 会发生什么；它是在调用 Deferred 方法吗？什么时候？为什么这样做？这似乎是一种递归方法？

3) dfd.resolve 是否有可能触发此代码中未显示的其他方法？

```
 hide: function() {
            if ((":visible") === false) {

                return null;

            }
            promise = $.Deferred(_.bind(function(dfd) { 
                this.el.fadeOut('fast', dfd.resolve)}, this));
            return promise.promise();
        },

        show: function() {
            if (this.el.is(':visible')) { 
                return;
            }       
            promise = $.Deferred(_.bind(function(dfd) { 
                console.log("in promise section of show in base view");
                this.el.fadeIn('fast', dfd.resolve) }, this))
            return promise.promise();
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T04:51:16.917

> 1) dfd.resolve 是在fadeOut 完成后调用的吗？如果是这样，dfd.resolve 会触发什么？

**是的。** [`jQuery.fadeOut`](http://api.jquery.com/fadeOut/)接受一个回调作为它的参数之一。一旦动画完成，它将执行回调。在这种情况下，它恰好是 Deferred 的 resolve 方法。

> 2) 通过返回 promise.promise() 会发生什么；它是在调用 Deferred 方法吗？什么时候？为什么这样做？这似乎是一种递归方法？

**这里没有递归**。`promise`只是一个变量，它包含对创建的 Deferred 对象的引用。[`promise()`](http://api.jquery.com/deferred.promise/)是 a 上的一个方法，[`jQuery.Deferred`](http://api.jquery.com/category/deferred-object/)它返回不允许您修改其行为方式的 Deferred 的修改版本。因此，调用者可以确保它将始终以相同的方式执行。

> 3) dfd.resolve 是否有可能触发此代码中未显示的其他方法？

**是的。**Deferred 只不过是一个允许您注册回调的对象。调用[`.resolve()`](http://api.jquery.com/deferred.resolve/)Deferred 将触发[done 处理程序](http://api.jquery.com/deferred.done/)，而调用[`.reject()`](http://api.jquery.com/deferred.reject/)将触发任何[失败处理程序](http://api.jquery.com/deferred.fail/)。

一个非常简写的示例可能如下所示：

```
//A Deferred takes in a function that will be passed a reference
// to the Deferred object. This allows you to resolve or reject
// it at some point in the future.
var promise = $.Deferred(function(def){

   setTimeout(function(){

      def.resolve('Five seconds have passed!');      

   }, 5000);

}).promise();

//This will only get executed when the
// underlying Deferred gets resolved
promise.done(function(msg){

   alert(msg); // Displays: 'Five seconds have passed!'

}); 
```

# php - 在php中使用'out'参数调用mysql函数或存储过程

> ID：12658642
> 
> 赞同：3
> 
> 时间：2012-09-30T04:28:34.137
> 
> 标签：php, mysql

我在php中使用了mysql存储过程，但是我需要从我的sql中返回几个值，所以我打算使用mysql函数或带有''out'参数的存储过程。

如果有人可以帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:19:13.070

我找到了解决方案

[http://blog.ulf-wendel.de/2011/using-mysql-stored-procedures-with-php-mysqli/](http://blog.ulf-wendel.de/2011/using-mysql-stored-procedures-with-php-mysqli/)

```
 $mysqli = new mysqli("localhost", "root", "", "test");
if (!$mysqli->query("DROP PROCEDURE IF EXISTS p") ||
    !$mysqli->query('CREATE PROCEDURE p(OUT msg VARCHAR(50)) BEGIN SELECT "Hi!" INTO msg; END;'))
   echo "Stored procedure creation failed: (" . $mysqli->errno . ") " . $mysqli->error;

if (!$mysqli->query("SET @msg = ''") ||
    !$mysqli->query("CALL p(@msg)"))
 echo "CALL failed: (" . $mysqli->errno . ") " . $mysqli->error;

if (!($res = $mysqli->query("SELECT @msg as _p_out")))
 echo "Fetch failed: (" . $mysqli->errno . ") " . $mysqli->error;

$row = $res->fetch_assoc();
echo $row['_p_out']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T04:32:46.880

如果您使用的是 PHP`PDO`扩展，请尝试以下代码

```
<?php
    $stmt = $dbh->prepare("CALL sp_returns_string(?)");
    // assumes that the output is VARCHAR(100) 
    $stmt->bindParam(1, $return_value, PDO::PARAM_STR, 100); 
    // call the stored procedure
    $stmt->execute();

    print "procedure returned $return_value\n";
?> 
```

`Output parameters`使用起来比输入参数稍微复杂一些，因为开发人员必须知道绑定给定参数时可能有*多大。**如果该值大于*他们建议的大小，*则会引发错误*。

# algorithm - 你如何计算完整机器人的行进距离和角度？

> ID：12658646
> 
> 赞同：2
> 
> 时间：2012-09-30T04:29:12.170
> 
> 标签：algorithm, distance, drive, robot

如果我能说出一个完整驱动机器人的四个轮子中的每一个已经行进的距离，我将如何计算机器人行进的距离？它在机器人的不同侧面使用 4 个全向轮，类似于此处的机器人：[http ://www.youtube.com/watch?v=CLRDQPrp2Ds](http://www.youtube.com/watch?v=CLRDQPrp2Ds)

另外，我有兴趣根据这些信息找出机器人所面对的角度。我在网上找到的基本上都是建议使用陀螺仪或加速度计来达到这个目的。但是，我无权访问任何一个，并且对如何以代数方式解决问题也非常感兴趣。由于作为全息驱动的一部分，每个车轮都会经历打滑，因此弄清楚这一点似乎非常具有挑战性。

我意识到机器人通常不是 Stack Overflow 的主题，但其最终目的是在机器人的微控制器上计算这些信息。

非常感谢，丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T10:01:29.893

我们使用[MLX90316](http://www.melexis.com/Hall-Effect-Sensor-ICs/Triaxis%C2%AE-Hall-ICs/MLX90316-566.aspx)传感器来了解电机转动了多少，并从那里计算一切。所以在我们的例子中没有加速度计的东西。我并不是说加速度计是错误的或不好的方式，只是我们选择了不同的路径，它似乎有效。

我们的主要机器人不是完整的并且有其他问题，所以我无法判断它在你的情况下有多精确。如果你知道你的电机旋转了多少，那么完整的机器人计算就很容易了。

# caching - 同时设置 Expires 和 Cache-Control：max-age

> ID：12658647
> 
> 赞同：5
> 
> 时间：2012-09-30T04:30:10.913
> 
> 标签：caching, http-caching

有人可以澄清这个关于缓存的声明。

[https://developers.google.com/speed/docs/best-practices/caching](https://developers.google.com/speed/docs/best-practices/caching)说

> `Expires`同时指定and`Cache-Control: max-age`或同时指定`Last-Modified`and是多余的`ETag`。

然后后来它说

> 指纹机制允许服务器将`Expires`标头设置为比请求日期提前一年；`Last-Modified`文件最后修改日期的标题；和`Cache-Control: max-age`标题到`3153600`.

后一种说法与前面的说法背道而驰——关于不同时设置`Expires`and `Cache-Control`。

第一个陈述是规范，第二个陈述是例外吗？或者这个文档只是违背了它自己的建议？有什么建议？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-30T08:42:05.273

Http 中的 [Cache-Control:max-age] 和 [Expires] 做同样的事情，这就是为什么它们是多余的。但是它们之间还是有很大区别的，[Cache-Control]是http/1.1标准，Expires是http/1.0。如果客户端浏览器不支持 http/1.1 Cache-Control 将被忽略，这就是您可以同时使用它们的原因。

如果您同时使用它们，则 [Cache-Control] 具有优先权。您可以在此处找到更多信息：http: [//www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9.3](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9.3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T14:50:14.573

出色地...

我可以告诉你，第一个语句是正确的，因为你真的不需要同时指定 [Expires]*和*[Max-Age] 标头，因为它们都做同样的事情（设置缓存的最大周期）

[Last Modify] 和 [Etag] 也是如此，因为它们都解决了新鲜度问题。

我同意似乎有些混乱，因为他们稍后给出的示例同时使用了 [Expires] 和 [Max-Age] 标头。

乍一看，这看起来像是某种文档错误。

不过，您需要记住，虽然您不必同时*使用*[Expires] 和 [Max-Age]，但您当然*可以同时*使用它们，只要它们指向相同的日期 - 就像在示例中它们一样提供。

总结一下：

第一个陈述谈到冗余（这不一定是“坏的”，可能是“只是”浪费）。他们稍后给出的示例虽然没有优化，但不会引起任何问题。

只要您不使用这两个标头设置不同的到期日期，就可以了。

# python - 程序在 python 中运行时如何打印到控制台？

> ID：12658651
> 
> 赞同：17
> 
> 时间：2012-09-30T04:30:26.620
> 
> 标签：python, console, stdout, wing-ide

我有一个我正在运行的算法需要一段时间，所以我想通过打印到控制台来跟踪它的进度。

所以像：

```
import sys

def myMethod():
    i = 0
    while (i<1000000):
        i = i+1
        output_str = str(i) + "\n"
        sys.stdout.write(output_str)  # same as print
        sys.stdout.flush()

myMethod() 
```

如何在运行时而不是在结束时打印此打印件？

**编辑，解决方案：** - 发布修改后的代码。当您在 linux 终端中运行此代码时，它可以正常工作

```
 python filename.py 
```

但是当我在 Wing 101 IDE 中运行它时——通过按下绿色播放按钮（'在 python shell 中运行编辑器的内容'）——它会等到程序完成后再输出。

[显然不可能在 Wing IDE 中刷新标准输出。](http://wingware.com/pipermail/wingide-users/2007-April/004371.html)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-30T04:40:13.230

```
import sys

def myMethod():
    i = 0
    while (i<1000000):
        i = i+1
        output_str = str(i) + "\n"
        sys.stdout.write(output_str)  # same as print
        sys.stdout.flush() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-30T04:40:59.820

这就是线程的用途。您可以同时运行一个工作线程和一个进度线程：

```
import time
from threading import Thread

class WorkerThread(Thread):
    def __init__(self, value=0):
        super(WorkerThread, self).__init__()

        self.value = value

    def run(self):
        while self.value < 1000:
            self.value += 1
            time.sleep(0.01)

class ProgressThread(Thread):
    def __init__(self, worker):
        super(ProgressThread, self).__init__()

        self.worker = worker

    def run(self):
        while True:
            if not self.worker.is_alive():
                print 'Worker is done'
                return True

            print 'Worker is at', self.worker.value
            time.sleep(1.0)

if __name__ == '__main__':
    worker = WorkerThread()
    progress = ProgressThread(worker)

    worker.start()
    progress.start()

    progress.join() 
```

该命令的输出是：

```
Worker is at 1
Worker is at 99
Worker is at 197
Worker is at 295
Worker is at 394
Worker is at 492
Worker is at 590
Worker is at 689
Worker is at 787
Worker is at 885
Worker is at 983
Worker is done 
```

请注意，工作线程的计数`1`非常快，但进度线程只是每秒报告一次进度。

# collections - 从类型表中选择值

> ID：12658654
> 
> 赞同：0
> 
> 时间：2012-09-30T04:31:04.347
> 
> 标签：collections, plsql

我创建了一个定义表，T_DEFINITION 这个表有 2 列：category_id 和 included_service_list。/*有很多列的工作方式类似于 INCLUDED_SERVICE_LIST 逻辑，所以我写了其中的一个来简化问题*/ 表示例是：

```
CATEGORY_ID    INCLUDED_SERVICE_LIST
18             24,37,86,102,125,144,226,285
24             12,25,33,49,52,55,58,63,69,70,80,90,107 
```

价值观就这样继续下去。

在我的选择声明中；我想查询 INCLUDED_SERVICE_LIST 列：

```
SELECT * 
FROM T_TRANSACTION A,T_DEFINITION B
WHERE A.SERVICE_ID IN (string.split(B.INCLUDED_SERVICE_LIST)) 
```

我需要拆分 INCLUDED_SERVICE_LIST 列中的字符串并在 select 语句中使用它。 `string.split`是我的自定义拆分函数，它返回一个 varchar2 表。

但我不知道如何从 varchar2 的输出表中选择值。你可以帮帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T21:26:51.573

Try this:

```
SELECT * 
  FROM T_TRANSACTION A,T_DEFINITION B
 WHERE A.SERVICE_ID IN (SELECT COLUMN_VALUE
                          FROM TABLE(string.split(B.INCLUDED_SERVICE_LIST))) 
```

This should work if your `string.split` is defined to return a *nested table* - something like this

```
/* Type definition */
TYPE T_VARCHARS IS TABLE OF VARCHAR2(1000);

/* Function definition */
FUNCTION split(v VARCHAR2) RETURNING T_VARCHARS; 
```

Actually, if you are using oracle 11g, you can create columns that hold nested tables, instead of long varchars of comma-joined numbers - below is an example of such design.

```
/* Create user type */
CREATE OR REPLACE TYPE T_NUMBERS AS TABLE OF NUMBER(30);

/* Create table with column holding a nested table */
CREATE TABLE T_DEFINITION (
    CATEGORY_ID NUMBER,
    INCLUDED_SERVICE_LIST T_NUMBERS
) NESTED TABLE INCLUDED_SERVICE_LIST STORED AS T_DEF_SERVICE_LIST; 
```

# asp.net - 使用 asp.net 网站时遇到问题。在Firefox中浏览时updatepanel或div区域不居中，但在其他浏览器中工作正常

> ID：12658657
> 
> 赞同：0
> 
> 时间：2012-09-30T04:31:07.463
> 
> 标签：asp.net, html, updatepanel

我有一个用 asp.net(vb) 编写的网站项目。当我使用 IE 或 Chrome 浏览网站时，它运行良好，但在尝试使用 Firefox 时，它遇到了一些问题。主 div 区域（或更新面板，不确定）未显示在中心或正确位置。它以最右边和分散的方式显示。div 位于 asp 更新面板下。请帮忙提出建议。

这是部分代码：

```
 <asp:Content ID="Content1" ContentPlaceHolderID="MainContent" runat="server">
<asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
<script src="http://code.jquery.com/jquery-1.8.1.min.js" type="text/javascript"></script>
<style>`enter code here`
h4
{
    padding:3px;
}
table td
{
    padding:3px;
    white-space:nowrap
}

#tblResults td
{
    border:1px solid #CCCCCC;
    padding:2px;
    text-align:right;
    white-space:nowrap;
    font-size:11px
}

input
{
    font-size:12px;
}
</style>

<script type="text/javascript" src='<%= ResolveUrl("~/js/jquery-1.8.1.js") %>' ></script>

<asp:UpdatePanel ID="UpdatePanel1" runat="server">
<ContentTemplate>
<div class="wrapper bot" style="margin-left:auto; margin-right:auto; padding: 0;">
  <div style="border-bottom:1px solid #CCCCCC; ">
        <table width="100%" align="center">
        <tr>
        <td valign="bottom">
        <h2 >ZFlex Calculator</h2>
        </td>
        <td valign="bottom" align="right" style="padding-bottom:7px">
        <asp:LinkButton runat='server' Text="Calculate" ID="btnRecalculate" CausesValidation="true" CssClass="button" />
        <asp:LinkButton runat='server' Text="Print" ID="lnkPrint" CausesValidation="true" CssClass="button" />
        </td>
        </tr>
        </table>
    </div>
     <asp:ValidationSummary ID="ValidationSummary1" runat='server' DisplayMode="BulletList"  style="margin-top:5px;padding:10px;border:1px solid #DDDDDD;color:red" />
         <div style="padding:5px;margin-bottom:10px;margin-top:10px;border: 1px solid #CCCCCC">
        <table align="center">
<tr>
    <td >Wall Type:</td>
    <td >
        <asp:RadioButtonList runat="server" ID="rblWallType" RepeatDirection=Horizontal>
         <asp:ListItem Value="1" Selected=True>Single Wall</asp:ListItem>
            <asp:ListItem Value="2">Double Wall</asp:ListItem>
        </asp:RadioButtonList>
    </td>
</tr>
<tr>
    <td >Category:</td>
    <td >
        <asp:RadioButtonList runat="server" ID="rblCategory" RepeatDirection=Horizontal >
            <asp:ListItem Value="1" style="padding:3px" selected="True">Category 1</asp:ListItem>
            <asp:ListItem Value="2" style="padding:3px">Category 2</asp:ListItem>
            <asp:ListItem Value="3" style="padding:3px">Category 3</asp:ListItem>
            <asp:ListItem Value="4" style="padding:3px">Category 4</asp:ListItem>
        </asp:RadioButtonList>
    </td>
</tr>
<tr>
<td >Fuel Type:</td>
<td >
    <asp:RadioButtonList runat="server" ID="rblFuelType"  RepeatDirection=Horizontal>
        <asp:ListItem Value="1" Selected>Gas</asp:ListItem>
        <asp:ListItem Value="2">LP</asp:ListItem>
        <asp:ListItem Value="3">#2 Fuel Oil</asp:ListItem>
    </asp:RadioButtonList>
</td>
</tr>
<tr>
<td>Stack Type:</td>
<td>
    <asp:RadioButtonList runat="server" ID="rblExhaustType" RepeatDirection=Horizontal>
        <asp:ListItem Value="1" Selected>Exhaust Only</asp:ListItem>
        <asp:ListItem Value="2">Exhaust and Combustion</asp:ListItem>
    </asp:RadioButtonList>
</td>
</tr>
</table>
   </div>
<div style="margin-bottom:15px">
    <h4>Project Information</h4>
    <table align="center">
        <tr>
            <td>Project Name:</td>
            <td><asp:TextBox ID="Pnametxt" runat="server" /></td>
            <td>Project For:</td>
            <td><asp:TextBox ID="PForTxt" runat="server"></asp:TextBox></td>
            <td>Company:</td>
            <td><asp:TextBox ID="PCompanyTxt" runat="server"></asp:TextBox></td>
        </tr>
        <tr>
            <td>Project Location City:</td>
            <td><asp:TextBox ID="PCitytxt" runat="server"></asp:TextBox></td>
            <td>Project Location State:</td>
            <td><asp:TextBox ID="PStateTxt" runat="server"></asp:TextBox></td>
        </tr>
    </table>
</div>

<asp:TabContainer ID="tbcTheaterTabs" AutoPostBack="true"  runat="server" Width="100%" style="margin-top:5px" cssclass="myTabs" EnableViewState="true"    >
<asp:TabPanel ID="tabInputs" runat="server"  HeaderText="&nbsp;&nbsp;&nbsp;System Inputs&nbsp;&nbsp;&nbsp;" >
<ContentTemplate>

<h4>Appliance Information</h4>
<table>
<tr>
    <td>Maximum Input (MBH):</td>
            <td>
                <asp:TextBox ID="MaxInputTxt" runat="server" Width="70px" ValidationGroup="BInputsVal">1000</asp:TextBox>
                <asp:RangeValidator ID="RangeValidator1" runat="server" 
                    ControlToValidate="MaxInputTxt" ErrorMessage="*" ForeColor="Red" 
                    MaximumValue="100000000" MinimumValue="10" SetFocusOnError="True" Type="Double"></asp:RangeValidator>
                <asp:RequiredFieldValidator ID="RequiredFieldValidator4" runat="server" 
                    ControlToValidate="MaxInputTxt" ErrorMessage="*" ForeColor="Red" 
                    SetFocusOnError="True"></asp:RequiredFieldValidator>
            </td>
            <td>CO2% in Flue Gas:</td>
            <td colspan="7">
                <asp:TextBox ID="CO2Txt" runat="server" Width="70px" 
                    ValidationGroup="BInputsVal">8.0</asp:TextBox>
                <asp:RangeValidator ID="RangeValidator5" runat="server" 
                    ControlToValidate="CO2Txt" ErrorMessage="*" ForeColor="Red" MaximumValue="15" 
                    MinimumValue=".5" SetFocusOnError="True" Type="Double"></asp:RangeValidator>
                <asp:RequiredFieldValidator ID="RequiredFieldValidator8" runat="server" 
                    ControlToValidate="CO2Txt" ErrorMessage="*" ForeColor="Red" 
                    SetFocusOnError="True"></asp:RequiredFieldValidator>
            </td>
        </tr>
        <tr>
            <td>Minimum Input (MBH):</td>
            <td>
                <asp:TextBox ID="MinInputTxt" runat="server" Width="70px" 
                    ValidationGroup="BInputsVal">500</asp:TextBox>
                <asp:RangeValidator ID="RangeValidator2" runat="server" 
                    ControlToValidate="MinInputTxt" ErrorMessage="*" ForeColor="Red" 
                    MaximumValue="100000000" MinimumValue="0" SetFocusOnError="True" Type="Double"></asp:RangeValidator>
                <asp:RequiredFieldValidator ID="RequiredFieldValidator5" runat="server" 
                    ControlToValidate="MinInputTxt" ErrorMessage="*" ForeColor="Red" 
                    SetFocusOnError="True"></asp:RequiredFieldValidator>
            </td>
            <td>Ambient Temp. (F):</td>
            <td colspan="7">
                <asp:TextBox ID="AmbientTempTxt" runat="server" Width="70px" 
                    ValidationGroup="BInputsVal">70</asp:TextBox>
                <asp:RangeValidator ID="RangeValidator6" runat="server" 
                    ControlToValidate="AmbientTempTxt" ErrorMessage="*" ForeColor="Red" 
                    MaximumValue="200" MinimumValue="-100" SetFocusOnError="True" Type="Double"></asp:RangeValidator>
                <asp:RequiredFieldValidator ID="RequiredFieldValidator9" runat="server" 
                    ControlToValidate="AmbientTempTxt" ErrorMessage="*" ForeColor="Red" 
                    SetFocusOnError="True"></asp:RequiredFieldValidator>
            </td>
        </tr>
        <tr>
            <td>Maximum Gross Temp (F):</td>
            <td>
                <asp:TextBox ID="MaxTempTxt" runat="server" Width="70px" 
                    ValidationGroup="BInputsVal">300</asp:TextBox>
                <asp:RangeValidator ID="RangeValidator3" runat="server" 
                    ControlToValidate="MaxTempTxt" ErrorMessage="*" ForeColor="Red" 
                    MaximumValue="1400" MinimumValue="100" SetFocusOnError="True" Type="Double"></asp:RangeValidator>
                <asp:RequiredFieldValidator ID="RequiredFieldValidator6" runat="server" 
                    ControlToValidate="MaxTempTxt" ErrorMessage="*" ForeColor="Red" 
                    SetFocusOnError="True"></asp:RequiredFieldValidator>
            </td>
            <td>Altitude (Ft.):</td>
            <td colspan="7">
                <asp:TextBox ID="AltitudeTxt" runat="server" Width="70px" 
                    ValidationGroup="BInputsVal">500</asp:TextBox>
                <asp:RangeValidator ID="RangeValidator7" runat="server" 
                    ControlToValidate="AltitudeTxt" ErrorMessage="*" ForeColor="Red" 
                    MaximumValue="30000" MinimumValue="0" SetFocusOnError="True" Type="Double"></asp:RangeValidator>
                <asp:RequiredFieldValidator ID="RequiredFieldValidator10" runat="server" 
                    ControlToValidate="AltitudeTxt" ErrorMessage="*" ForeColor="Red" 
                    SetFocusOnError="True"></asp:RequiredFieldValidator>
            </td>
        </tr>
        <tr>
            <td>Minimum Gross Temp.(F):</td>
            <td>
                <asp:TextBox ID="MinTempTxt" runat="server" Width="70px" 
                    ValidationGroup="BInputsVal">200</asp:TextBox>
                <asp:RangeValidator ID="RangeValidator4" runat="server" 
                    ControlToValidate="MinTempTxt" ErrorMessage="*" ForeColor="Red" 
                    MaximumValue="1400" MinimumValue="70" SetFocusOnError="True" Type="Double"></asp:RangeValidator>
                <asp:RequiredFieldValidator ID="RequiredFieldValidator7" runat="server" 
                    ControlToValidate="MinTempTxt" ErrorMessage="*" ForeColor="Red" 
                    SetFocusOnError="True"></asp:RequiredFieldValidator>
            </td>
            <td class="style6">
                Exhaust Allowable Pressure Range:</td>
            <td class="style2" colspan="2" width="50">
                Max.</td>
            <td colspan="2" width="150">
                <asp:TextBox ID="MaxPressureTxt" runat="server" style="margin-left: 0px" 
                    ValidationGroup="BInputsVal">.25</asp:TextBox>
                <asp:RangeValidator ID="RangeValidator8" runat="server" 
                    ControlToValidate="MaxPressureTxt" ErrorMessage="*" ForeColor="Red" 
                    MaximumValue="10.0" MinimumValue="-2.0" SetFocusOnError="True" Type="Double"></asp:RangeValidator>
                <asp:RequiredFieldValidator ID="RequiredFieldValidator11" runat="server" 
                    ControlToValidate="MaxPressureTxt" ErrorMessage="*" ForeColor="Red" 
                    SetFocusOnError="True"></asp:RequiredFieldValidator>
            </td>
            <td colspan="2" width="50">Min.</td>
            <td width="150">
                <asp:TextBox ID="MinPressureTxt" runat="server" ValidationGroup="BInputsVal">-.25</asp:TextBox>
                <asp:RangeValidator ID="RangeValidator9" runat="server" 
                    ControlToValidate="MinPressureTxt" ErrorMessage="*" ForeColor="Red" 
                    MaximumValue="2" MinimumValue="-2" SetFocusOnError="True" Type="Double"></asp:RangeValidator>
                <asp:RequiredFieldValidator ID="RequiredFieldValidator12" runat="server" 
                    ControlToValidate="MinPressureTxt" ErrorMessage="*" ForeColor="Red" 
                    SetFocusOnError="True"></asp:RequiredFieldValidator>
            </td>
        </tr>
        </table>
    <hr />
    <asp:Panel ID="Combustion" runat="server">

    <h4>Combustion Duct Information</h4>

    <table >
    <tr>
        <td>Total Duct Length:</td>
        <td>
                    <asp:TextBox ID="CADuctLengthTxt" runat="server">20</asp:TextBox>
                    <asp:RangeValidator ID="RangeValidator10" runat="server" 
                        ControlToValidate="CADuctLengthTxt" ErrorMessage="*" ForeColor="Red" 
                        MaximumValue="10000" MinimumValue="0" SetFocusOnError="True" Type="Double"></asp:RangeValidator>
                    <asp:RequiredFieldValidator ID="RequiredFieldValidator13" runat="server" 
                        ControlToValidate="CADuctLengthTxt" ErrorMessage="*" ForeColor="Red" 
                        SetFocusOnError="True"></asp:RequiredFieldValidator>
                </td>
                <td colspan="2">15 Degree Elbow:</td>
                <td class="style78" colspan="2">
                    <asp:TextBox ID="CA15ElTxt" runat="server">0</asp:TextBox>
                    <asp:RangeValidator ID="RangeValidator18" runat="server" 
                        ControlToValidate="CA15ElTxt" ErrorMessage="*" ForeColor="Red" 
                        MaximumValue="10" MinimumValue="0" SetFocusOnError="True" Type="Integer"></asp:RangeValidator>
                    <asp:RequiredFieldValidator ID="RequiredFieldValidator21" runat="server" 
                        ControlToValidate="CA15ElTxt" ErrorMessage="*" ForeColor="Red" 
                        SetFocusOnError="True"></asp:RequiredFieldValidator>
                </td>
            </tr>
            <tr>
                <td>WYE Tee:</td>
                <td>
                    <asp:TextBox ID="CAWyeTeeTxt" runat="server">0</asp:TextBox>
                    <asp:RangeValidator ID="RangeValidator11" runat="server" 
                        ControlToValidate="CAWyeTeeTxt" ErrorMessage="*" ForeColor="Red" 
                        MaximumValue="10" MinimumValue="0" SetFocusOnError="True" Type="Double"></asp:RangeValidator>
                    <asp:RequiredFieldValidator ID="RequiredFieldValidator14" runat="server" 
                        ControlToValidate="CAWyeTeeTxt" ErrorMessage="*" ForeColor="Red" 
                        SetFocusOnError="True"></asp:RequiredFieldValidator>
                </td>
                <td class="style23" colspan="2">
                    30 Degree Elbow:</td>
                <td class="style78" colspan="2">
                    <asp:TextBox ID="CA30ElTxt" runat="server">0</asp:TextBox>
                    <asp:RangeValidator ID="RangeValidator19" runat="server" 
                        ControlToValidate="CA30ElTxt" ErrorMessage="*" ForeColor="Red" 
                        MaximumValue="10" MinimumValue="0" SetFocusOnError="True" Type="Integer"></asp:RangeValidator>
                    <asp:RequiredFieldValidator ID="RequiredFieldValidator22" runat="server" 
                        ControlToValidate="CA30ElTxt" ErrorMessage="*" ForeColor="Red" 
                        SetFocusOnError="True"></asp:RequiredFieldValidator>
                </td>
            </tr>
            <tr>
                <td class="style20">
                    90 Degree Tee:</td>
                <td class="style24">
                    <asp:TextBox ID="CA90TeeTxt" runat="server">0</asp:TextBox>
                    <asp:RangeValidator ID="RangeValidator12" runat="server" 
                        ControlToValidate="CA90TeeTxt" ErrorMessage="*" ForeColor="Red" 
                        MaximumValue="10" MinimumValue="0" SetFocusOnError="True" Type="Integer"></asp:RangeValidator>
                    <asp:RequiredFieldValidator ID="RequiredFieldValidator15" runat="server" 
                        ControlToValidate="CA90TeeTxt" ErrorMessage="*" ForeColor="Red" 
                        SetFocusOnError="True"></asp:RequiredFieldValidator>
                </td>
                <td class="style23" colspan="2">
                    45 Degree Elbow:</td>
                <td class="style78" colspan="2">
                    <asp:TextBox ID="CA45ElTxt" runat="server">0</asp:TextBox>
                    <asp:RangeValidator ID="RangeValidator20" runat="server" 
                        ControlToValidate="CA45ElTxt" ErrorMessage="*" ForeColor="Red" 
                        MaximumValue="10" MinimumValue="0" SetFocusOnError="True" Type="Double"></asp:RangeValidator>
</div>
</ContentTemplate>
</asp:UpdatePanel>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T04:59:12.643

你不能可靠地使用 margin: 0 auto; 如果对象不是 body 元素的直接子元素，则将它们居中。如果 div 是 body 元素的直接子元素并且 body 元素设置为 width: 100%，那么剩下的唯一重要方面是为您希望居中的容器设置固定宽度，在您的情况下：div.wrapper

如果你有一个链接，我可以为你缩小答案，但这些通常是很好的生活规则。如果您在不是 100% 页面宽度的元素中工作，简单的解决方法是使用数学边距计算。例如，如果容器 div 是 800px 宽，而您想要居中的 div 是 500px，您只需将要居中的 div 设置为 margin-left: 150px; (800 - 500) / 2。

# php - 验证 base64 编码图像

> ID：12658661
> 
> 赞同：29
> 
> 时间：2012-09-30T04:31:48.023
> 
> 标签：php, security, validation, base64

我正在构建一个应用程序，允许用户使用`POST`HTML5 画布数据，然后以 base64 编码并显示给所有用户。我正在考虑将数据解析为实际的 .png 文件并存储在服务器上，但 base64 路由允许我将图像存储在数据库中并最小化请求。图片独特，少，页面不会经常刷新。

一些 jQuery 将获取画布数据，`data:image/png;base64,iVBORw...`并将其传递给包装它的 PHP 脚本，如下所示：`<img src="$data"></img>`

但是，安全是基石，需要对base64画布数据进行验证，以防止在`POST`请求中传递恶意数据。我主要关心的是防止外部 URL 被注入`<img>`标签并在页面加载时被请求。

我目前有这样的设置：

```
$data = (isset($_POST['canvas']) && is_string($_POST['canvas'])) ? $_POST['canvas'] : null;
$base = str_replace('data:image/png;base64,', '', $data);
$regx = '~^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$~'

if ((substr($data, 0, 22)) !== 'data:image/png;base64,')
{
  // Obviously fake, doesn't contain the expected first 22 characters.
  return false;
}

if ((base64_encode(base64_decode($base64, true))) !== $base64)
{
  // Decoding and re-encoding the data fails, something is wrong
  return false;
}

if ((preg_match($regx, $base64)) !== 1) 
{
  // The data doesn't match the regular expression, discard
  return false;
}

return true; 
```

我想确保我当前的设置足够安全以防止将外部 URL 插入`<img>`标签，如果没有，可以做些什么来进一步验证图像数据？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-30T04:55:07.123

这样做的一种方法是从 base64 数据实际创建一个图像文件，然后使用 PHP 验证图像本身。可能有一种更简单的方法可以做到这一点，但这种方法肯定行得通。

请记住，这仅适用于 PNG，如果您计划允许更多文件类型（GIF、JPG），则需要添加一些逻辑。

```
<?

$base64 = "[insert base64 code here]";
if (check_base64_image($base64)) {
    print 'Image!';
} else {
    print 'Not an image!';
}

function check_base64_image($base64) {
    $img = imagecreatefromstring(base64_decode($base64));
    if (!$img) {
        return false;
    }

    imagepng($img, 'tmp.png');
    $info = getimagesize('tmp.png');

    unlink('tmp.png');

    if ($info[0] > 0 && $info[1] > 0 && $info['mime']) {
        return true;
    }

    return false;
}

?> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-04T15:52:19.823

如果您使用的是 php 5.4+，我将上面的内容修改得更简洁一些。

```
function check_base64_image($data, $valid_mime) {
    $img = imagecreatefromstring($data);

    if (!$img) {
        return false;
    }

    $size = getimagesizefromstring($data);

    if (!$size || $size[0] == 0 || $size[1] == 0 || !$size['mime']) {
        return false;
    }

    return true;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-18T10:29:00.763

```
function RetrieveExtension($data){
    $imageContents = base64_decode($data);

    // If its not base64 end processing and return false
    if ($imageContents === false) {
        return false;
    }

    $validExtensions = ['png', 'jpeg', 'jpg', 'gif'];

    $tempFile = tmpfile();

    fwrite($tempFile, $imageContents);

    $contentType = finfo_file(finfo_open(FILEINFO_MIME_TYPE), $tempFile);

    fclose($tempFile);

    if (substr($contentType, 0, 5) !== 'image') {
        return false;
    }

    $extension = ltrim($contentType, 'image/');

    if (!in_array(strtolower($extension), $validExtensions)) {
        return false;
    }

    return $extension;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-06-29T23:52:15.203

由于我没有足够的评论点，我发布了 webguy 代码的更新版本。这适用于托管在 Heroku 等无法存储图像的服务上的人。

将流包装器指向 Pekka 的功劳（[Pekka 的回答](https://stackoverflow.com/questions/2207095/get-image-mimetype-from-resource-in-php-gd)）

此代码假定您从以下位置实现类和流包装器： [​​PHP Example on Stream Wrapper](http://php.net/manual/en/stream.streamwrapper.example-1.php)

```
<?

$base64 = "[insert base64 code here]";
if (check_base64_image($base64)) {
    print 'Image!';
} else {
    print 'Not an image!';
}

function check_base64_image($base64) {
    $img = imagecreatefromstring(base64_decode($base64));
    if (!$img) {
        return false;
    }

    ob_start();
    if(!imagepng($img)) {

        return false;
    }
    $imageTemp = ob_get_contents(); 
    ob_end_clean();

    // Set a temporary global variable so it can be used as placeholder
    global $myImage; $myImage = "";

    $fp = fopen("var://myImage", "w");
    fwrite($fp, $imageTemp);
    fclose($fp);    

    $info = getimagesize("var://myImage");
    unset($myvar);
    unset($imageTemp);

    if ($info[0] > 0 && $info[1] > 0 && $info['mime']) {
        return true;
    }

    return false;
}

?> 
```

我希望这可以帮助别人。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-10-21T12:50:26.647

```
$str = 'your  base64 code' ;

if (base64_encode(base64_decode($str, true)) === $str && imagecreatefromstring(base64_decode($str))) {
    echo 'Success! The String entered match base64_decode and is Image';
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-08-18T17:56:38.847

大家好，您可以使用 getimagesize() 函数验证 base64 编码图像代码，只需使用以下代码：

```
<?php
$array=getimagesize("data:image/gif; base64 , '.base64_encode('any file').'");
$e=explode("/",$array['mime']);
if($e[0]=="image")
{
echo "file is image file" ;
}
?> 
```

*用你想要base64_encode代码的任何文件源替换任何文件

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-12-28T14:43:19.543

我有同样的需要，就这样做了。这消除了通过直接读取字符串并使用 getimagesizefromstring 函数来保存文件的需要。

```
 public function validateImg($data)
    {
        try {
            $binary = base64_decode(explode(',', $data)[1]);
            $data = getimagesizefromstring($binary);
        } catch (\Exception $e) {
          return false;
        }

        $allowed = ['image/jpeg', 'image/png', 'image/gif'];

        if (!$data) {
            return false;
        }

        if (!empty($data[0]) && !empty($data[0]) && !empty($data['mime'])) {
            if (in_array($data['mime'], $allowed)) {
                return true;
            }
        }

        return false;
    }
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-03-13T09:37:15.803

如果没有要安装的 GD 库并且您不想安装它，这是一个快速的解决方案。

```
 //Returns a boolean
    public function validateBase64Image($data) {
    //Decode Base 64 data
    $imgData = base64_decode($data);

    //Returns a magic database resource on success or FALSE on failure.
    $fileInfo = finfo_open();
    if(!$fileInfo) {
        return false;
    }

    //Returns a textual description of the string argument, or FALSE if an error occurred.
    //In the case of an image: image/<image extension> e.g. image/jpeg
    $mimeType = finfo_buffer($fileInfo, $imgData, FILEINFO_MIME_TYPE);
    if(!$mimeType) {
        return false;
    }

    //Gets an array
    $mimeArray=explode("/",$mimeType);
    //Validate the file is an image
    if($mimeArray[0]=="image") {
        return true;
    }
    return false;
} 
```

# c - 主要在 input.h 中看不到我的功能

> ID：12658662
> 
> 赞同：1
> 
> 时间：2012-09-30T04:32:04.937
> 
> 标签：c, header-files

`input.c`文件：

```
#include "input.h"
void file_processing( FILE *course_file, FILE *student_file )
{
    char buf[256], line[256];
    ........
} 
```

`input.h`文件：

```
#ifndef STUDENT_H
#define STUDENT_H

#include <string.h>

void process_command( char command[256] );

void file_processing( FILE *course_file, FILE *student_file );

#endif 
```

`main.c`文件：

```
#include "input.h"

int main( int argc, char *argv[] ){
    .........
    file_processing(course_file, student_file);
    ...
    return 0;
} 
```

编译器向我抛出了这个错误：

```
main.c: In function ‘int main(int, char**)’:
main.c:53:46: error: ‘file_processing’ was not declared in this scope 
```

任何人都可以给我一些关于看什么的提示吗？

**更新：** 经过一些额外的编码后，我得到了一个不同的错误。

```
/tmp/ccJ4nsnm.o: In function `main':
main.c:(.text+0x1e5): undefined reference to `file_processing(_IO_FILE*, _IO_FILE*)'
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T04:41:46.260

我发现您的多重包含保护与您的文件名不匹配很有趣：

```
#ifndef STUDENT_H
#define STUDENT_H 
```

您是否从另一个也包含在内的 .h 文件中得到它？

# javascript - 不要使用 getPrototypeOf？

> ID：12658675
> 
> 赞同：13
> 
> 时间：2012-09-30T04:35:04.640
> 
> 标签：javascript, ecmascript-5

在[这段视频](http://www.youtube.com/watch?v=UTEqr0IlFKY)中（大约 31 分钟），Crockford 说他们（代表 ECMAScript 委员会发言）建议*不要*使用`Object.getPrototypeOf`. 他的解释是，它并不是真正适用于普通开发人员，而是适用于 Caja 之类的东西，这可能会删除它`Object`以阻止您访问它。

Crockford 有时会在他对如何使用 JS 的看法上固执己见（我们都不能吗？），所以我想知道这是否真的是 ES 委员会的全部建议，或者这只是 Crockford 的个人意见之一。有没有人读过任何官方声明警告不要使用`Object.getPrototypeOf`？这对我来说听起来真的很糟糕 :(，但我在 MDN 页面上没有看到任何警告使用它的信息，如果它真的是一个糟糕的想法，我希望会有一个通知。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-04T03:32:38.637

他的推理非常糟糕。它（和`Object.getOwnPropertyNames`）不是为了使用 Caja 和类似而简单添加的。Caja 也不会简单地删除它们！Caja 拦截`Object.getOwnPropertyNames`以实现`WeakMap`（[我的 shim](https://github.com/Benvie/harmony-collections)也是如此），据我所知，它不会修改 getPrototypeOf。实际上，无论如何它都是毫无意义的，因为`Object.getPrototypeOf(o)`它与在除 IE 之外的每个浏览器中实现的相同，`o.__proto__`并且不能（当前）关闭。这意味着唯一可以删除的浏览器`Object.getPrototypeOf`是 IE9 和 IE10。

我认为他会给出的原因是其中一些功能主要是供“图书馆作者”类型使用的。这是参与规范过程的人通常相信/说过的话，我相信这是一个合法的主张；属性描述符/属性和其他“元”级 API 是更高级的功能，使用起来很麻烦，通常需要更完整的语言掌握才能正确使用。但是，这仍然不等于“不要使用它们”的一揽子建议。不过，这个更准确的说法甚至不是他提出的论点。

关于视频的一个额外说明，他在其中做了不正确的陈述。他说属性属性（可枚举、可配置、可写）*一旦*设置就不可更改。这是不正确的。只要`configurable`是真的，这些都可以改变。一旦设置为 false，属性就会被冻结（属性也不能删除）。

* * *

### 编辑：在完成研究之后，我发现了一些关于这个特性和其他对象函数的原始讨论。我理解的总结如下。

人们担心能够访问对象的 [[Prototype]] 会带来安全隐患。然而，这些问题通过 Object.freeze 之类的东西得到了更全面和适当的解决，并且部分解决了（也是一个原因）这些函数作为静态函数（可在一个位置删除）而不是 Object.prototype 或神奇地存在于 Object 上在历史上像**proto这样的每个对象上。**

提出的另一个问题是破坏封装

> 确实，**proto**或 getPrototypeOf 打破了对象的封装障碍，并揭示了可能打算隐藏的实现细节。提议的 getProperty 函数也是如此，除其他外，它使观察者可以访问实现 getter/setter 属性的函数。一般来说，这就是反射的本质。*-Allen Wirfs-Brock*

从实现端提出的一个问题是关于暴露实现细节（主要是源于 DOM 如何工作的问题，此后通过更改 DOM 对多重继承的使用和向 WebIDL 的过渡解决了这一问题）。

> 另一方面，提供对对象原型的反射访问对兼容性有害，因为它会阻止实现在不破坏网络的情况下引入中间原型。考虑只有 Numbers 的例子，然后兼容地引入更具体的 Numbers 子类。——*瓦尔德玛·霍瓦特*

这个问题也与脚本协调邮件列表中提到的另一个问题有关，即内部隐藏原型是相同的跨框架。这个问题也是 ES5（和 IE8）的历史，它决定并实现每个框架必须实例化自己的一组 DOM 原型。因此，到 ES5 正式发布时，由于这个原因隐藏原型不再相关。

* * *

我看到的共识不符合 Crockford 的解释。大多数情况下，这似乎只是他自己观点的重申。

> 总之，不提供对对象原型的反射访问并不能真正提供任何真正的安全性，它只会使一些有用的任务不那么方便。 *-Allen Wirfs-Brock*
> 
> * * *
> 
> 总的来说，我同意你的看法，很高兴听到反射不是“真正的安全”的敌人。 *——布伦丹·艾希*

这方面的出发点是[提议的 ECMAScript 3.1 静态对象函数：用例和基本原理](http://wiki.ecmascript.org/lib/exe/fetch.php?id=es3.1:es3.1_proposal_working_draft&cache=cache&media=es3.1:rationale_for_es3_1_static_object_methods.pdf)（由 Crockford 和其他人在 TC39 上编写）。后续，我从中引用，是[这个 es-discuss 线程](https://mail.mozilla.org/pipermail/es-discuss/2008-July/006664.html)。特别是[这篇文章](https://mail.mozilla.org/pipermail/es-discuss/2008-July/006670.html)和[这篇文章](https://mail.mozilla.org/pipermail/es-discuss/2008-July/006674.html)。

# c++ - 以最少的动作交换盒子

> ID：12658678
> 
> 赞同：5
> 
> 时间：2012-09-30T04:36:22.843
> 
> 标签：c++, c, algorithm

这是一个编程竞赛的问题（已经结束）。我一直在努力解决这个问题，但找不到一个健康的方法来解决这个问题。

问题如下：

IIIT Allahabad 将于 10 月 1 日至 5 日庆祝其一年一度的科技文化嘉年华 MM12。厨师已同意为这个节日供应糖果。厨师准备了 N 盒糖果，编号从 1 到 N（每个数字恰好出现一次）。厨师对盒子的布置非常讲究。他希望按特定顺序排列盒子，但不幸的是，厨师很忙。他让你为他重新安排箱子。给定盒子的当前顺序，您必须按照指定的顺序重新排列盒子。但是有一个限制。您只能交换两个相邻的框以达到所需的顺序。输出，所需的此类相邻交换的最小数量。

输入

输入的第一行包含一个整数 T，即测试用例的数量。每个测试用例包含 3 行，第一行包含一个整数 N，框数。接下来的 2 行每行包含 N 个数字，第一行是给定的盒子顺序，第二行是所需的顺序。

输出

对于每个测试用例，输出一个整数“K”，需要最少的相邻交换次数。约束：

```
1<=T<=10
1<=N<=10^5 
```

例子

输入：

```
4

3
1 2 3
3 1 2

3
1 2 3
3 2 1

5
3 4 5 2 1  
4 1 5 2 3  

4
1 2 3 4
2 3 4 1 
```

输出：

```
2
3
6
3 
```

我对这个问题几乎一无所知。有人可以解释一下问题背后的逻辑！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T05:31:35.000

这个问题是一个相当“经典”的竞争性编程问题，它计算数组中的倒数。反转定义为一对 (i, j)，其中 i < j 且 A[i] > A[j]。

[最通用的版本，给出了一个任意数字的数组，并要求您计算反转的数量，通过修改归并排序算法](https://stackoverflow.com/questions/337664/counting-inversions-in-an-array)具有O(n log n) 解决方案。

*一个更受限制的版本^，其中数组中的最大值*有一个合理的上限（注意这不是数组的长度），可以在 O(n log m) 中求解，其中 m 是最大值在数组中。这里的要点是您必须编写的代码量远少于合并排序方法。

问题中的问题是关于计算交换次数以将数组排序到一定顺序，这可以重构为计算交换次数以对数组进行升序排序，归结为计算反转次数。为什么要反转次数？因为每次交换 2 个相邻元素最多只能解决一次反转。

您需要创建一个数组来描述框相对于最终设置的当前位置。然后算法可以开始：

1.  构造一个长度为 m 的[Fenwick 树](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=binaryIndexedTrees)（二叉索引树）（对于问题中的问题，m = n）。

    我们将使用 Fenwick 树来帮助我们计算数组中大于当前元素的*前面元素的数量。*我们将保持到目前为止遇到的数字的频率，并使用 Fenwick Tree 范围求和查询来获取小于当前元素的元素数（并导出大于当前元素的元素数）。

2.  循环遍历数组的 n 个元素：

    *   使用范围求和查询来统计记录了多少小于当前数字的数字。
    *   使用上面的信息找出比当前数字大的数字。将此添加到反转计数。请注意不要包括正在考虑的元素。(*)
    *   在元素的值处调整 + 1 到 Fenwick 树。
3.  在 (*) 步骤中累积的反转计数。

^ 问题清楚地表明元素是唯一的，因此上面的算法将起作用。我只是不确定唯一性是否是必要条件，或者可以修改算法以适应存在重复元素的情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-30T05:06:16.837

将源列表简化为 (1,2,...,N) 的排列。（通过将目标的逆应用于源）

然后计算反转次数。

IE

```
vector<int> source = ...;
vector<int> target = ...;

vector<int> inv(N)

for (int i = 0; i < N; i++)
   inv[target[i]] = i;

vector<int> perm(N);

for (int i = 0; i < N; i++)
    perm[i] = source[inv[i]]; 
```

然后使用标准算法计算 perm 中的反转。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-30T05:05:39.107

假设所需的顺序是数字的排序顺序，问题就归结为在数组中查找反转的数量。

如果且 ，则称A`pair (i,j)`是反演。这是因为相邻元素之间的每次（最佳）交换都将反转的数量减少了. 您可以通过与归并排序非常相似的分治算法找到倒数。[这是C 代码](http://www.geeksforgeeks.org/archives/3968)的一个很好的解释。`i < j``array[i] > array[j]``1``O(n log n)`

**编辑**证明反转次数等于最佳交换次数：

让`i`成为 中的任何位置`array`。交换`array[i]`并将`array[i+1]`反转次数最多减少 1。因此所需的交换次数至少等于反转次数。另一方面，如果`array`未排序，我们总是可以找到一对`(i, i+1)`这样`array[i] > array[i+1]`（即是一个反转），并通过交换将反转的`(i,j)`数量减少 1 。因此，反转的数量等于交换的最小数量。`array[i]``array[i+1]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T05:42:51.953

该问题可以被认为是一个反转计数问题，如下所示：

因为数字的优先级是按照我们应该排序的顺序给出的。

考虑优先级并将其替换为数字

例如：

```
3 4 5 2 1  
4 1 5 2 3 
```

在上面的测试用例中，我们可以观察到 4 被分配了优先级 1，1 被分配了优先级 2，5 被分配了优先级 3，依此类推。那么为什么不用这些优先级替换原始列表中的数字

即转换原始列表

```
(3 4 5 2 1) to (5 1 3 4 2) 
```

（只是用上面讨论的各自的优先级替换数字）

现在我们的列表已经转换为

```
5 1 3 4 2 
```

我们只是应该按升序对其进行排序。

现在我们只允许相邻的交换，即与冒泡排序有点相关。

冒泡排序所需的交换计数等于每个元素右侧小于当前元素的元素计数的总和。

例如：在列表中

```
5 1 3 4 2 
```

5 在其右侧有 4 个小于 5 的元素。

1 在其右侧有 0 个小于 1 的元素。

3 在其右侧有 1 个小于 3 的元素。

4 在其右侧有 1 个小于 1 的元素。

2 右侧有 0 个小于 2 的元素。

现在最终的答案是 (4+0+1+1+0)=6。

现在可以使用此处讨论的反转计数来计算上述过程 [http://www.geeksforgeeks.org/archives/3968](http://www.geeksforgeeks.org/archives/3968)。

**注意：我得到的答案很有用，只是详细描述了整个事情。谢谢你**

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-30T04:59:05.247

我无法从数学上证明这一点，但是在 4/4 的测试用例中，您可以通过将框从最左边开始放在正确的位置（也可以从最右边开始）并向右移动来获得最小的交换。IE

```
3 4 5 2 1 //First get the 4 in the right place
4 3 5 2 1 //Done.  Now get the 1 in the right place
4 3 5 1 2
4 3 1 5 2
4 1 3 5 2 //Done.  Now the 5
4 1 5 3 2 //Done.  Now the 2
4 1 5 2 3 //All done. 
```

所以这个算法看起来会给你任何给定输入的最小值。一般来说，最坏的情况看起来像是反转，这将需要 N*(N-1)/2 次互换（参见示例 2）。

# matlab - 给定非零元素的位置，如何在 MATLAB 中创建稀疏矩阵

> ID：12658682
> 
> 赞同：2
> 
> 时间：2012-09-30T04:36:42.903
> 
> 标签：matlab, matrix

我需要在 MATLAB 中创建具有以下要求的矩阵。`v`例如，给定一个向量，`[1,2,2,1,3,5,1]`我需要形成一个矩阵：

```
[1 0 0 1 0 0 1;
 0 1 1 0 0 0 0;
 0 0 0 0 1 0 0;
 0 0 0 0 0 0 0;
 0 0 0 0 0 1 0] 
```

即矩阵的第 th 列在 row`i`仅包含一个非零元素（单个） 。如何避免循环并以有效的方式做到这一点？`1``v[i]`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T19:07:12.730

其他人指出循环在这里很好。我会指出稀疏的要好得多。您的矩阵非常稀疏，因此请使用稀疏的能力来解决问题，并在矩阵很大的情况下节省大量存储空间。

```
N = 3000;
v = ceil(rand(1,3000)*3000);

tic
A = zeros(N,N);
for i = 1:N
  A(v(i),i) = 1;
end
toc
Elapsed time is 0.069082 seconds.

tic
B = sparse(v,1:N,1,N,N);
toc
Elapsed time is 0.001308 seconds. 
```

因此，如果矩阵很大，则在时间上存在巨大差异。

空间呢？

```
whos A B
  Name         Size                 Bytes  Class     Attributes

  A         3000x3000            72000000  double              
  B         3000x3000               72008  double    sparse 
```

其他方面的矩阵是相同的。

```
sum(sum(abs(A - B)))
ans =
     0 
```

稀疏矩阵占用的空间很小，您可以像使用任何其他矩阵一样使用它。

使用 MATLAB 的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T05:58:52.763

首先，我必须给出我的标准免责声明，尽管普遍认为在 MATLAB 中通常应该避免循环，但在 MATLAB 的现代版本中，循环实际上变得更加高效，这在很大程度上要归功于 JIT 加速器。因此，当然，对您的代码进行基准测试以确定循环是否真的是瓶颈。

也就是说，我对如何在没有循环的情况下解决这个问题的第一个想法是索引一个单位矩阵（如下所示）。

```
identityMatrix = eye(max(v(:)));
result = identityMatrix(:,v); 
```

我认为这是一个不错的、干净的解决方案；但是，我不一定知道它*比*使用循环更有效。作为比较，我使用循环实现了以下解决方案：

```
numRows = max(v(:));
numCols = length(v);
result = zeros(numRows,numCols);

for i=1:numCols
    result(v(i),i) = 1;
end 
```

根据我的测试运行，对于那些`v`不是很长的情况，顶级（无循环）解决方案通常更快。但是，当`v`包含许多元素（例如 >100）时，我实际上看到了*循环*解决方案击败替代方案的平均时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T18:10:14.723

```
>> v =  [1,2,2,1,3,5,1];
>> a = zeros(max(v), length(v));
>> a((0 : size(a, 1) : numel(a) - 1) + v) = 1

a =

     1     0     0     1     0     0     1
     0     1     1     0     0     0     0
     0     0     0     0     1     0     0
     0     0     0     0     0     0     0
     0     0     0     0     0     1     0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T05:26:10.213

```
m = max(v);
n = length(v);
M = zeros(m, n);
M([0:(n-1)]*m + v) = 1; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-02T07:18:06.130

这与在神经网络分配中创建目标向量所需的步骤非常相似（第 5 周 - 来自 Andrew NG ML 课程的手写数字识别）。我们必须为单个训练输出创建一个 10 X 1 大小的向量，例如输出 y。如果 y 中的第 i 个训练输出为 2，则向量化后的第 i 个输出为 [0 1 0 0 0 0 0 0 0 0]'。因此，对于 5000 个训练示例，我们需要 5000 个向量。

事不宜迟，代码是：

```
 >> v =  [1,2,2,1,3,5,1];
>> v_vec = (1:5)==v';
>> v_vec
v_vec =

  1  0  0  0  0
  0  1  0  0  0
  0  1  0  0  0
  1  0  0  0  0
  0  0  1  0  0
  0  0  0  0  1
  1  0  0  0  0

>> v_vec'
ans =

  1  0  0  1  0  0  1
  0  1  1  0  0  0  0
  0  0  0  0  1  0  0
  0  0  0  0  0  0  0
  0  0  0  0  0  1  0 
```

v_vec' 是所需的输出。一个有用的链接：[https ://www.ee.columbia.edu/~marios/matlab/Matlab%20Tricks.pdf](https://www.ee.columbia.edu/~marios/matlab/Matlab%20Tricks.pdf)

# javascript - 如何保存 DOM 插入？

> ID：12658688
> 
> 赞同：1
> 
> 时间：2012-09-30T04:38:27.203
> 
> 标签：javascript, jquery, html, node.js, dom

我想知道如何保存我的 HTML 页面之前的 DOM 插入。代码：

```
//With jQuery
$('#container').append('Hi!'); 
```

并且窗口将显示`Hi!`，但我想知道如何将插入保存到，当我刷新页面时，显示我 2 `Hi!`，这是先前插入 jQuery 标记的结果。

**如何在执行代码后保存 javascript 所做的 HTML 结构的更改（如下例所示）？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T15:11:58.063

您可以通过多种不同方式保存您的状态。

1.  保存在服务器中（通过 AJAX 保存在数据库或会话中）
2.  保存在 Cookies 中（您可以通过访问 JavaScript 中的 cookie 将数据保存在本地）
3.  保存在 LocalStorage（这是 HTML5 的一部分，这意味着这在非现代浏览器中不起作用）

# javascript - 使用 jQuery 获取选项值并应用折扣？

> ID：12658691
> 
> 赞同：1
> 
> 时间：2012-09-30T04:39:23.587
> 
> 标签：javascript, jquery, ajax, sanitize

我需要编写一个 jQuery / Java 函数，该函数将从 AJAX 更新值中获取数字，对其进行清理以删除 $，将价格降低一定百分比（discPerc），然后制作一个警报窗口，通知客户减少了价格。

这是我到目前为止所拥有的，我意识到我不是最好的编码员！

```
<head>
<script type="text/javascript">
function superSalePrice(discPerc) {
      var optionPrice = $("#productTotal").val();
  var applyDisc = optionPrice * discPerc;
  var rPrice = Math.round(applyDisc * 1) / 1;

  $("tB").click(function() {
  alert("With selected options, final price with discounts is $" + rPrice + "!");
  };
  )
};
</script>
</head>

//THEN the button
<input type="button" id="tB" value="Test Disc. Calc." onclick="superSalePrice(.85);" />

//THEN the option
<td id="productTotal" class="rowElement3"> $3,450.00</td> 
```

我不知道如何清理该值，因此尚未包含该部分。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T04:50:44.293

要清理您的号码，只需使用正则表达式删除不是数字或点的所有内容：

```
>'   $3,450.00 '.replace(/[^0-9.]/g, '');
'3450.00' 
```

这是我构建 JavaScript 的方式

```
function superSalePrice(discount) {
  var price = $("#productTotal").text();
  price = parseFloat(price.replace(/[^0-9.]/g, ''));
  price *= discount;

  return Math.round(100 * price) / 100;
)

$('#tB').click(function() {
  var total = superSalePrice(0.85);
  alert("With selected options, final price with discounts is $" + total + "!");
}; 
```

和 HTML：

```
<input type="button" id="tB" value="Test Disc. Calc." />

<td id="productTotal" class="rowElement3">$3,450.00</td> 
```

此外，您的 HTML 无效。`<td>`并且`<input>`元素不能是兄弟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T04:46:06.913

我认为您需要进行一些更改，请尝试以下操作：

```
function superSalePrice(discPerc) {
    var optionPrice = $("#productTotal").html(); // Changed from .val()
    var total = parseFloat(optionPrice.replace(/\$/g, "").replace(/,/g, ""));  // Added this
    var applyDisc = optionPrice * discPerc;
    var rPrice = Math.round(applyDisc * 1) / 1;  // Didn't check this

    // I'm not sure what the following is for, because you are just binding ANOTHER function every time the button is clicked. Maybe you just want the "alert" line
    $("tB").click(function() {
        alert("With selected options, final price with discounts is $" + rPrice + "!");
    });
} 
```

阅读评论！

# eclipse - 使用模式浏览器并双击返回的结果 (Force.com) 时，Eclipse 在 Mac 上挂起

> ID：12658693
> 
> 赞同：1
> 
> 时间：2012-09-30T04:39:29.417
> 
> 标签：eclipse, macos, force.com

我正在对 Force.com 进行一些了解，并尝试使用模式浏览器。我可以得到查询的结果；但是当我双击给定结果时，Eclipse 挂起。

我的 Mac (8 GB) 正在运行 Mac OS X (10.7.4)。Force.com IDE 是 25 版，Eclipse 是面向 Web 开发人员的 Java EE IDE；朱诺发布。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:46:51.687

我相信问题在于我运行的 Eclipse 版本不受支持（Juno 4.2）。在“卸载”Eclipse 并将 Force.com IDE 作为独立应用程序安装后，我的环境运行得更好。

# php - PHP表单发送空白电子邮件

> ID：12658702
> 
> 赞同：-1
> 
> 时间：2012-09-30T04:41:17.820
> 
> 标签：php, email

我对 PHP 没有太多经验 - 我使用表单生成器来创建此表单。问题是表单发送了数百封空白电子邮件。任何人都可以帮我解决它吗？这是PHP代码：

```
 <?php

$where_form_is="http://".$_SERVER['SERVER_NAME'].strrev(strstr(strrev($_SERVER['PHP_SELF']),"/"));

mail("blah@blah.com","MESSAGE: website","

Someone has submitted a message from your website!  Huzzah!

--------------------------------------------------------------------------------

CONTACT INFO:
" . $_POST['field_1'] . "
" . $_POST['field_2'] . " 

MESSAGE:
" . $_POST['field_3'] . " 

--------------------------------------------------------------------------------

Also you're a stud.

");

header("Refresh: 0;url=http://www.blah.com/thanks.html");

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T05:02:19.360

如果您只是确保有人实际`POST`通过（即实际使用表单）编辑数据，那么您会很高兴：

```
<?php
    $where_form_is="http://".$_SERVER['SERVER_NAME'].strrev(strstr(strrev($_SERVER['PHP_SELF']),"/"));

        if (!$_POST['field_1'] || !$_POST['field_2'] || !$_POST['field_3']) {
            header("Location: $where_form_is");
            exit;
        }

    mail("blah@blah.com","MESSAGE: website","Someone has submitted a message from your website!  Huzzah!
    CONTACT INFO:
    " . $_POST['field_1'] . "
    " . $_POST['field_2'] . " 

    MESSAGE:
    " . $_POST['field_3'] . " 
    Also you're a stud.");

    header("Refresh: 0;url=http://www.blah.com/thanks.html");
    exit;
?> 
```

# javascript - Javascript 检测浏览器。表达式不起作用

> ID：12658709
> 
> 赞同：0
> 
> 时间：2012-09-30T04:43:19.723
> 
> 标签：javascript, user-agent

我正在尝试通过 Javascript 检测 Internet Explorer 的使用。这对我来说只是练习，但似乎我偶然发现了这个简短脚本的问题，或者 IE 可能只是讨厌我。这是我的脚本。

```
<script type="text/javascript">

if (navigator.userAgent == /MSIE/) { //Check for expression MSIE in userAgent string.
 alert("IE Test.");
 }

 else if (navigator.userAgent !== /MSIE/) { alert("Epic Fail!! :S"); } //Just incase... Test if userAgent doesn't equal MSIE then figure out what went wrong. :S
</script> 
```

由于某种原因 navigator.userAgent 不等于 MSIE。也许是我的编码，或者 IE 讨厌我。

谢谢您的帮助。
-itsports

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T04:49:23.640

您无法与正则表达式进行比较。你需要`test`哪个会返回`true`或`false`。

```
var ie = /msie/i.test(navigator.userAgent);

if (ie) {
  ...
} else {
  ...
} 
```

# jquery - JQuery UI Slider + 转到最大位置

> ID：12658710
> 
> 赞同：0
> 
> 时间：2012-09-30T04:43:50.020
> 
> 标签：jquery, jquery-ui, jquery-ui-slider

我有以下 JQUERY UI 滑块代码工作：

```
$('div#chatFriendsSliderPath').slider({
    orientation: 'vertical',
    animate: 'fast',
    change: handleSliderChange,
    slide: handleSliderSlide,
    range: 'min',
    min: 0,
    max: 100,
    value: 100
});​ 
```

我在顶部和底部都有一个按钮，这些按钮将滑块移动到顶部/最大或底部/最小位置。代码如下。

```
// Chat Contacts - Scroll to Top
$(document).on('click','img#chatContactsSliderBarTop', function() {
    alert('top...');
}); 

// Chat Contacts - Scroll to Bottom
$(document).on('click','img#chatContactsSliderBarBottom', function() {
    alert('bottom...');
}); 
```

我需要用什么代替警报代码才能让滑块移动四肢？

注意：还有我没有放在这里的更改/幻灯片代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T04:54:02.603

TO 设置为最大值：

```
$('div#chatFriendsSliderPath').slider( "option", "value", 100 ); 
```

TO 设置为最小

```
$('div#chatFriendsSliderPath').slider( "option", "value", 0 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T04:57:01.663

你应该使用这样的东西：

```
// Chat Contacts - Scroll to Top
$(document).on('click','img#chatContactsSliderBarTop', function() {
    $('div#chatFriendsSliderPath').slider( "option", "min", 0);
}); 

// Chat Contacts - Scroll to Bottom
$(document).on('click','img#chatContactsSliderBarBottom', function() {
    $('div#chatFriendsSliderPath').slider( "option", "max", 100);
}); 
```

希望这会有所帮助！

# python - 使用堆中的元组进行多维排序？

> ID：12658713
> 
> 赞同：1
> 
> 时间：2012-09-30T04:44:40.257
> 
> 标签：python, algorithm, heapsort

假设我有一个列表，例如：

```
[(3,4), (4,3), (1,5), (5,1), (2,6), (6,2)] 
```

我想返回具有最低 x 值的元组，以及具有最低 y 值的元组。

是否可以使用索引 0 构建（最小）堆，使用索引 1 构建不同的堆？这将产生两个堆：

```
for x: [(1,5), (2,6), (3,4), (4,3), (5,1), (6,2)]
#and
for y: [(5,1), (6,2), (4,3), (3,4), (1,5), (2,6)]. 
```

我们可以对元组使用堆排序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T13:44:44.573

答案是肯定的，你可以在元组上使用[heapsort](http://docs.python.org/library/heapq.html#basic-examples)：

> 堆元素可以是元组。这对于在跟踪的主记录旁边分配比较值（例如任务优先级）很有用......

但是，[文档中也提到](http://docs.python.org/library/heapq.html#heapq.nsmallest)：

> [nsmallest 和 nlargest] 对于较小的 n 值表现最佳。对于较大的值，使用 sorted() 函数更有效。此外，当 n==1 时，使用内置的 min() 和 max() 函数效率更高。

也就是说，如果您想要最小 y，请使用[`min`](http://docs.python.org/library/functions.html#min)：

```
tuple_list = [(3,4), (4,3), (1,5), (5,1), (2,6), (6,2)]

min(tuple_list, key=lambda x: x[1])
# (5,1) 
```

如果要对整个列表进行排序，请使用[`sorted`](http://docs.python.org/library/functions.html#sorted)：

```
sorted(tuple_list, key=lambda x: x[1])
# [(5,1), (6,2), (4,3), (3,4), (1,5), (2,6)] 
```

而如果要使用三个最小值，请使用[`heapq.nsmallest`](http://docs.python.org/library/heapq.html#heapq.nsmallest)：

```
heapq.nsmallest(3, tuple_list, key=lambda x: x[1])
# [(5,1), (6,2), (4,3)] 
```

# mysql - 更快的 sql 查询然后加入

> ID：12658714
> 
> 赞同：4
> 
> 时间：2012-09-30T04:44:44.560
> 
> 标签：mysql, sql

我有一个超过 10,000 行的大表，在不久的将来它将增长到 1,000,000，我需要运行一个查询，为每个用户返回每个关键字的时间值。我现在有一个很慢，因为我使用左连接，它需要一个子查询/关键字：

```
SELECT rawdata.user, t1.Facebook_Time, t2.Outlook_Time, t3.Excel_time
FROM
rawdata left join
(SELECT user, sec_to_time(SuM(time_to_sec(EndTime-StartTime))) as 'Facebook_Time'
FROM rawdata 
WHERE MainWindowTitle LIKE '%Facebook%'
GROUP by user)t1 on rawdata.user = t1.user left join
(SELECT user, sec_to_time(SuM(time_to_sec(EndTime-StartTime))) as 'Outlook_Time'
FROM rawdata 
WHERE MainWindowTitle LIKE '%Outlook%'
GROUP by user)t2 on rawdata.user = t2.user left join
(SELECT user, sec_to_time(SuM(time_to_sec(EndTime-StartTime))) as 'Excel_Time'
FROM rawdata 
WHERE MainWindowTitle LIKE '%Excel%'
GROUP by user)t3 on rawdata.user = t3.user 
```

该表如下所示：

```
WindowTitle | StartTime | EndTime | User
------------|-----------|---------|---------
Form1       | DateTime  | DateTime| user1
Form2       | DateTime  | DateTime| user2
...         | ...       | ...     | ...
Form_n      | DateTime  | DateTime| user_n 
```

输出应如下所示：

```
User   | Keyword   | SUM(EndTime-StartTime)
-------|-----------|-----------------------
User1  | 'Facebook'|              00:34:12
User1  | 'Outlook' |              00:12:34
User1  | 'Excel'   |              00:43:13
User2  | 'Facebook'|              00:34:12
User2  | 'Outlook' |              00:12:34
User2  | 'Excel'   |              00:43:13
...    | ...       | ...  
User_n | ...       | ... 
```

问题是，MySQL 中最快的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T04:48:54.763

我认为您的通配符搜索可能是最慢的原因，因为您无法真正利用这些字段上的索引。此外，如果您可以避免进行子查询而只进行直接连接，它可能会有所帮助，但通配符搜索要糟糕得多。无论如何，您是否可以将表更改为具有可以具有索引且不需要通配符搜索的 categoryName 或 categoryID？像“其中 categoryName = 'Outlook'”

要优化表中的数据，请添加一个 categoryID（理想情况下，这将引用一个单独的表，但在此示例中我们只使用任意数字）：

```
alter table rawData add column categoryID int not null

alter table rawData add index (categoryID) 
```

然后为现有数据填充 categoryID 字段：

```
update rawData set categoryID=1 where name like '%Outlook%'
update rawData set categoryID=2 where name like '%Facebook%'
-- etc... 
```

然后更改您的插入以遵循相同的规则。

然后像这样进行 SELECT 查询（将通配符更改为 categoryID）：

```
SELECT rawdata.user, t1.Facebook_Time, t2.Outlook_Time, t3.Excel_time
FROM
rawdata left join
(SELECT user, sec_to_time(SuM(time_to_sec(EndTime-StartTime))) as 'Facebook_Time'
FROM rawdata 
WHERE categoryID = 2
GROUP by user)t1 on rawdata.user = t1.user left join
(SELECT user, sec_to_time(SuM(time_to_sec(EndTime-StartTime))) as 'Outlook_Time'
FROM rawdata 
WHERE categoryID = 1
GROUP by user)t2 on rawdata.user = t2.user left join
(SELECT user, sec_to_time(SuM(time_to_sec(EndTime-StartTime))) as 'Excel_Time'
FROM rawdata 
WHERE categoryID = 3
GROUP by user)t3 on rawdata.user = t3.user 
```

# html - 使用 span 对 li 元素内的文本进行整形

> ID：12658715
> 
> 赞同：1
> 
> 时间：2012-09-30T04:44:44.803
> 
> 标签：html, css, css-float

我在 li 元素中塑造文本时遇到了一些问题。我遇到的一个问题是浮动右侧的 div 不会浮动到右上角，而是在顶部留出空间。此外，文本没有正确“塑造”正确。正如您从[这个](http://jsfiddle.net/u773M/)jsfiddle 中看到的那样，div 很好地位于网格线之内，但是文本确实出现在网格线之外。还有一种方法可以在单词不合适时用破折号分隔单词（就像我在最后一个单词上所做的那样），或者使文本变小？

更新了显示错误文本溢出的 jsfiddle：http: [//jsfiddle.net/u773M/1/](http://jsfiddle.net/u773M/1/)

这是我创建文本浮动 div 的 php：

```
<?php for ($i = 1; $i < 7; $i++) {
 echo '<div class="trianglefloatleft" style="width:'.(3+($i*6)).'%;"></div>';
 echo '<div class="trianglefloatright" style="width:'.(9+($i*6)).'%;"></div>'; }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T04:50:39.533

如果您添加它，它将起作用

```
<div class="trianglefloatleft" style="width:9%;"></div>
<div class="trianglefloatright" style="width: 9%; margin-top: -12px;"></div> 
```

这意味着您根据您的情况仅创建一次宽度为 9% 的 div

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T22:06:09.493

感谢@hakra，我得到了一部分。然而，真正的解决方案要简单得多，也更有意义（不知道为什么我花了这么长时间才意识到这一点）：首先将浮动右 div ！

为关心的人更新了代码：http: [//jsfiddle.net/u773M/4/](http://jsfiddle.net/u773M/4/)

# entity-framework - 如何使用 Linq 组合多个表？

> ID：12658717
> 
> 赞同：0
> 
> 时间：2012-09-30T04:45:29.843
> 
> 标签：entity-framework, linq-to-sql, code-first

```
public class JobDescription
    {
        public int JobDescriptionID { get; set; }

        //          

        public virtual List<Image> Image { get; set; }

    }

 public class Image
    {
        public int ImageID { get; set; }

        [Required]
        public int JobDescriptionID { get; set; }

        [ForeignKey("JobDescriptionID")]
        public virtual JobDescription JobDescription { get; set; }

        public virtual List<ImageSection> ImageSection { get; set; }
    }

 public class ImageSection
    {
        public int ImageSectionID { get; set; }

        //
        public int ImageID { get; set; }

        [ForeignKey("ImageID")]
        public virtual Image Image { get; set; }

        public virtual DigitalSection DigitalSection { get; set; }

    }

public class DigitalSection
    {
        public int DigitalSectionID { get; set; }

         public int ImageSectionID { get; set; }

         [ForeignKey("ImageSectionID")]
         public virtual ImageSection ImageSection { get; set; }

         public virtual VerifiedSection VerifiedSection { get; set; }
    }

public class VerifiedSection
    {
        public int VerifiedSectionID { get; set; }

        public string DigitizedText { get; set; }

        public int DigitalSectionID { get; set; }

        [ForeignKey("DigitalSectionID")]
        public virtual DigitalSection DigitalSection { get; set; }

    } 
```

我正在使用 CodeFirst 方法，并且我有`JobDscriptionID`. 现在我想`DigitizedText`从`VerifiedSection`表中删除所有内容。怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T05:12:44.847

试试这个 ：

```
var result = contetx.VerifiedSection
            .Where(V => V.DigitalSection.ImageSection.Image.JobDescription.JobDescriptionID == 1)
            .Select(V => V.DigitizedText); 
```

或者，您也可以使用 Join

```
var result = context.VerifiedSection.Join(context.DigitalSection.Join(
                    (context.ImageSection.Join
                    (context.Image.Join
                    (context.JobDescription.Where(J=> .JobDescriptionID == 1)), I=> I.JobDescriptionID, J => J.JobDescriptionID , (I,J) => I)
                    IS => IS.ImageID, I=> I.ImageID, (IS,I) => IS)
                    D => D.ImageSectionID, IS => IS.ImageSectionID , (D,IS) => D)
                    V => V.DigitalSectionID, D => D.DigitalSectionID, (V,D) => V.DigitizedText); 
```

祝你好运 ！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T07:48:09.273

```
var query = (from image in Context.Image 
            Where image.JobDescriptionID == id
            select image.ImageID).SingleOrDefault();

var query2 = (from select in Context.ImageSection 
            Where select.ImageID == query
            select select.ImageSectionID).SingleOrDefault();

var query3 = (from digital in Context.DigitalSection 
                Where digital.ImageSectionID == query2
                select digital.DigitalSectionID).SingleOrDefault();

var query4 = from text in Context.VerifiedSection 
            Where text.VerifiedSection == query3
            select select.DigitizedText; 
```

Kundan Singh Chouhan 给了你一个更好的答案，但也许你想用“查询”的方式来做。

# php - javascript 到 php 值不发送/添加

> ID：12658719
> 
> 赞同：0
> 
> 时间：2012-09-30T04:46:08.787
> 
> 标签：php, javascript, echo

我一定是累了，因为我无法让这行代码工作：

```
var all = color.val('all');
$('#cssColor" + <?php echo $page ?> + "', parent.document).attr("background-color", all.hex); 
```

我什至还有一个带有**页面**值的文本框，我尝试：

```
var all = color.val('all');
$('#cssColor" + $('#txtPageValue').val() + "', parent.document).attr("background-color", all.hex); 
```

我似乎无法发送页面值！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T05:03:39.990

我不确定你是如何分配 all 变量的，但假设它被正确分配，你可以像这样重写你的代码，让值出现在你的 javascript 中的正确位置：

```
<?php echo "<script type='text/javascript'>
        //code somewhere in here should define the color object
        var all = color.val('all')
        $('#cssColor" . $page . "', parent.document).attr('background-color', all.hex);
    </script>"; ?> 
```

这会将 javascript 写入文档，而不会破坏中间的 echo 函数。

或者，您可以这样做：

```
var all = color.val('all');
$('#cssColor'+<?php echo $page; ?>, parent.document).attr('background-color', all.hex); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T08:44:52.197

尝试改变这个：

```
$('#cssColor" + <?php echo $page ?> + "', 
```

到：

```
$('#cssColor<?php echo $page ?>', 
```

而且，对于第二个：

```
$('#cssColor" + $('#txtPageValue').val() + "', 
```

到：

```
$('#cssColor' + $('#txtPageValue').val(), 
```

# javascript - jquery .addClass 使用新类设置另一个函数

> ID：12658721
> 
> 赞同：2
> 
> 时间：2012-09-30T04:46:40.333
> 
> 标签：javascript, jquery, html, function, canvas

我正在开发一个绘图应用程序，但在使用 .addClass 时遇到了一些麻烦。我想要做的是将一个新类发送到一个菜单项，然后我可以使用它来运行一个清除我的画布的函数。当类预设为“new_file”时，我可以让列表项自行调用该函数，但我希望它处于非活动状态，直到在画布上完成某些绘图。我的想法是在画布上检测到鼠标按下时使用 .addClass，但它没有按计划进行。也鼓励其他关于如何实现这一点的想法。这是一些代码：

当单击具有类“new_file”的列表项时，我的 canvas.js 文件中的此代码会清除画布。

```
 $(document).ready(function(){
       $('.new_file').mousedown(function(){
          clearCanvas(); 
       });

       function clearCanvas(){
          context.clearRect(0, 0, canvas.width(), canvas.height());
       }
    }); 
```

这就是我尝试添加类的方法；它现在在我的“头脑”中：

```
 <script>
       $(document).ready(function(){
           $("#myCanvas").click(function() {  //tried .mousedown; did nothing
               $("#clear").addClass("new_file");
           });
       });
    </script> 
```

这是我要操作的列表项：

```
 <li id="clear">Clear</li> 
```

还有我的画布：

```
 <canvas class="canvaso" id="myCanvas" height="239" width="414"></canvas>
    <script type="text/javascript" src="canvas.js"></script> 
```

我在观察萤火虫的同时尝试测试各种编辑，但似乎“new_file”没有被添加到列表项中。还尝试更改 #myCanvas 并测试页面上的其他 ID，但仍然无法添加 new_file。难住了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T04:50:26.897

尝试使用[`live`](http://api.jquery.com/live/). 这样，当您向元素添加类时，它们会自动绑定到您的函数。

```
$('.new_file').live('mousedown', function(){
    clearCanvas(); 
}); 
```

如果您使用的是 jQuery 1.7+，请使用[`on`](http://api.jquery.com/on/)代替`live`（因为它现在已被弃用）。

# xcode - 将命令行选项转换为 Xcode IDE

> ID：12658723
> 
> 赞同：1
> 
> 时间：2012-09-30T04:47:59.813
> 
> 标签：xcode, unix, linker

我是 Unix 和 Xcode 的新用户，所以如果这个问题已经在别处讨论过，我深表歉意。我正在尝试在我的 macbook 上使用第三方算法数据库（NAG C 库），在他们的用户手册中，我看到了以下几行：

```
gcc driver.c -I[INSTALL_DIR]/include [INSTALL_DIR]/lib/libnagc_vl.dylib -framework vecLib -lpthread -lm 
```

我知道这`-I[INSTALL_DIR]/include`是将目录添加到我的标题搜索路径中，但我不知道`[INSTALL_DIR]/lib/libnagc_vl.dylib`在做什么，因为它似乎不是一个选项。另外，这里是什么`-framework`意思？

也许最重要的问题是当我尝试在 Xcode IDE 中构建程序时如何实现这些选项？抱歉，如果这似乎有很多问题需要回答...谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T05:40:53.000

考虑一下“NAG C 库”中的 libnagc_vl.dylib；dylib 的意思是：“动态（或可共享）库”（相对于 .a 即自包含库）

而选项

> -框架框架

链接针对列出的框架构建的可执行文件。例如，您可以添加 -framework vecLib 以包含对矢量数学的支持。

要获得编译器的完整文档，您可以在*终端*中键入：

```
man gcc 
```

在“ [Build Cocoa application Bundle with private dylib/framework](https://stackoverflow.com/questions/8102609/build-cocoa-application-bundle-with-private-dylib-framework) ”的答案中，列举了在应用程序中嵌入框架所需的步骤

然后要在构建程序时实现此选项，您必须了解**“目标”**。目标包含从项目中的一组文件构建成品的说明；一种学习方法是从 Xcode 类型的帮助菜单中：**目标**和**gcc**

这些文件也可能很有趣：

*   [在 OS X 中编译你的代码](http://developer.apple.com/library/Mac/#documentation/Porting/Conceptual/PortingUnix/compiling/compiling.html)
*   [创建框架](http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPFrameworks/Tasks/CreatingFrameworks.html)

# objective-c - 如何在 iOS 上模拟 HTTP 表单（POST）提交

> ID：12658724
> 
> 赞同：11
> 
> 时间：2012-09-30T04:48:02.640
> 
> 标签：objective-c, ios, afnetworking

我正在使用 AFNetworking 框架，需要向服务器提交表单（POST）请求。这是服务器期望的示例：

```
<form id="form1" method="post" action="http://www.whereq.com:8079/answer.m">
    <input type="hidden" name="paperid" value="6">
    <input type="radio" name="q77" value="1">
    <input type="radio" name="q77" value="2">
    <input type="text" name="q80">
</form> 
```

我考虑在 AFHTTPClient 中使用 multipartFormRequestWithMethod，就像在使用 AFNetworking[发送多个图像](https://stackoverflow.com/questions/11432644/sending-more-then-one-image-with-afnetworking)后讨论的那样。但我不知道如何使用“radio”类型的输入值附加表单数据。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-30T13:56:40.593

下面是一个使用 NSURLConnection 发送 POST 参数的例子：

```
// Note that the URL is the "action" URL parameter from the form.
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://www.whereq.com:8079/answer.m"]];
[request setHTTPMethod:@"POST"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"content-type"];
//this is hard coded based on your suggested values, obviously you'd probably need to make this more dynamic based on your application's specific data to send
NSString *postString = @"paperid=6&q77=2&q80=blah";
NSData *data = [postString dataUsingEncoding:NSUTF8StringEncoding];
[request setHTTPBody:data];
[request setValue:[NSString stringWithFormat:@"%u", [data length]] forHTTPHeaderField:@"Content-Length"];
[NSURLConnection connectionWithRequest:request delegate:self]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-30T07:05:34.407

如果您查看使用此表单时浏览器向服务器提交的内容（使用浏览器中的调试面板），您会看到您的 POST 请求数据如下所示：

```
paperid=6&q77=2&q80=blah 
```

也就是说，所选单选按钮中的值条目用作相应 POST 条目的值，并且您只获得所有单选按钮的一个条目。（与切换按钮相反，您可以在其中获得当前选择的每个按钮的值。）

一旦您了解了 POST 字符串的格式，您应该能够使用[ASIFormDataRequest](http://allseeing-i.com/ASIHTTPRequest/How-to-use#sending_a_form_post_with_ASIFormDataRequest)以通常的方式创建请求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T12:44:19.147

这是如何使用[STHTTPRequest](https://github.com/nst/STHTTPRequest "STHTTP请求")

```
STHTTPRequest *r = [STHTTPRequest requestWithURLString:@"http://www.whereq.com:8079/answer.m"];

r.POSTDictionary = @{ @"paperid":@"6", @"q77":"1", @"q80":@"hello" };

r.completionBlock = ^(NSDictionary *headers, NSString *body) {
    // ...
};

r.errorBlock = ^(NSError *error) {
    // ...
};

[r startAsynchronous]; 
```

# php - 实现 DDD 封装

> ID：12658730
> 
> 赞同：-1
> 
> 时间：2012-09-30T04:50:04.273
> 
> 标签：php, oop, domain-driven-design

我希望我遵循正确的程序，这个问题就足够了。我试图搜索无济于事，所以我希望我能在这里得到答案。

我刚刚开始进入 Laravel。我注意到一种称为 DDD 的新设计方法，我想尽我所能尝试并实现它。

假设我有一个位于模型文件夹中的用户包。使用主类访问验证用户等功能是否是一种好习惯？这个类将位于包的主目录中，可以说并将被称为用户。本质上，这将封装存储库、实体和服务。这样，需要这些数据的控制器就不会被一堆调用污染。

例如：要验证用户登录，我们调用：

```
 User->validateUserLogin($username, $password); 
```

然后在里面`User->validateUserLogin:`

```
public function validateUserLogin($username, $password)
{
    $user_login = new User_Login_Entity($username, $password);
    // Assume the validation returns a valid User object on successful validation
    $User = User_Validation_Service->ValidateUserCredentials($user_login)
} 
```

我要解决这个问题了吗？我知道 SRP 是其中的关键，我不确定我是否足够好/或根本没有遵循它。基本上我的想法是：从控制器到模型工作的一个入口点。这与让控制器调用存储库、服务和实体相反。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T09:37:58.847

您快到了。您应该提供从控制器 POV 到使用您的“模型”的“用例”的访问权限。执行此操作的代码通常称为应用程序服务。它们位于您的模型和控制器之间。现在，请注意当我说“用例”时，我真正的意思是改变应用程序/系统/服务/whateveryourebuilding 状态的操作。这不包括查询或其他间接属于查询的问题。这些最好在数据存储上使用非常薄的层进行建模。但是……应用程序服务可以执行查询才能完成，这没有错。它不是黑白的，只是不同深浅的灰色。从控制器的角度来看，在操作和查询之间做出非常明确的区分是值得的，

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-30T04:55:54.880

```
 $User = User_Validation_Service->ValidateUserCredentials($user_login)
          here is the problem ----------------------------------------^ 
```

`;`声明后应该有

应该

```
 $User = User_Validation_Service->ValidateUserCredentials($user_login); 
```

# wordpress - Fancybox 不能在优雅主题的主题上运行

> ID：12658733
> 
> 赞同：0
> 
> 时间：2012-09-30T04:50:30.483
> 
> 标签：wordpress, fancybox

我的主题中集成的 fancybox 没有运行。我在这个论坛上读过另一篇文章，但我不明白什么是解决方案。我的网站是： http: [//www.costruzionimartini.com/](http://www.costruzionimartini.com/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-13T23:21:38.547

我建议你使用插件[easyfancybox for wordpress](http://wordpress.org/plugins/easy-fancybox/)，因为它在1.5.0 版本中带来了优雅的主题兼容性。

# java - 永远找不到输入目录

> ID：12658740
> 
> 赞同：1
> 
> 时间：2012-09-30T04:51:28.800
> 
> 标签：java

我的问题可能有一个明显的解决方案，但我不是很有经验，我一直坚持这一点：

我的程序接受一个目录作为输入，但存在检查总是返回否定的。如果我注释掉存在检查，我会得到一个空指针异常。

例如，我的起始目录是 c:\Start。我在提示时输入此内容，但从未找到。是否有一些用于输入我不理解的目录的语法？

```
String startDir;
Choice[] startOptions = new Choice[5];
startDir = ConsoleInput.readLine("Enter directory to start");
String startDirappend = new String (startDir+"/");
File existCheck = new File(startDirappend);
boolean exists = existCheck.exists();

while (exists!=true)
    {
    startDir = ConsoleInput.readLine("Directory not found. Enter directory to start");
    exists = existCheck.exists();
    }

Can startText = new Can(startDirappend+"START.txt"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T05:07:42.920

您在循环中请求一个新路径，但从不创建一个新文件来测试。因此，后续调用`existCheck.exists()`将始终返回 false。

您可能想检查从`ConsoleInput.readLine`. 看起来您没有使用核心 Java 库来读取输入，因此了解您*正在*使用的内容将有助于潜在地查明问题。

我现在没有办法检查，但是您添加到路径末尾的额外“\”会是另一个潜在问题吗？

# objective-c - 关于 UILabel 中的特殊字符（可能与编码有关？UTF8？）

> ID：12658743
> 
> 赞同：0
> 
> 时间：2012-09-30T04:52:28.033
> 
> 标签：objective-c, ios, utf-8, character-encoding, uilabel

我有类似的东西：

“乔斯梅塞尔♡”

我想在 UILabel 中显示它。但是特殊字符显示为两个字符而不是心形符号。

它与编码有关吗？不知何故，我需要对 UTF 8 做点什么？

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T05:30:06.623

你有没有逃脱心脏字符？如`@"Jossmaisel \u2661"`? 在 UTF-8 编码中，它将占用三个字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T05:30:46.533

好的，所以想通了：

[从这里](http://www.dev-smarter.com/decode-an-utf8-nsstring/)

```
NSString *encoded_string = @"Ã¼";
const char *ch = [encoded_string cStringUsingEncoding:NSISOLatin1StringEncoding];
NSString *decode_string = [[NSString alloc]initWithCString:ch encoding:NSUTF8StringEncoding];
NSLog(@"%@",decode_String); 
```

# python - 使用 pymongo 的 $addToSet 嵌套嵌套对象

> ID：12658744
> 
> 赞同：1
> 
> 时间：2012-09-30T04:52:34.773
> 
> 标签：python, mongodb, pymongo, database

作为使用 pymongo 在 python 中的 for-in 循环的一部分，我想在一个字段内添加一些嵌套文档/对象，该`linktype`字段将位于一个字段内：在添加第一个此类条目之前，该字段或字段`links`都不存在。`links``linktype`

执行此操作的命令是什么？

这是添加链接之前的一个项目：

```
item = {
    "_id" : ObjectId("5067c26b9d595266e25e825a"),
    "name": "a Name"
} 
```

添加一个类型的链接后`typeA`：

```
toType = "typeA"
to_link = {"_id" : ObjectId("5067c26b9d595266e25e825b"), "property":"value"}

{
    "_id" : ObjectId("5067c26b9d595266e25e825a"),
    "name": "a Name",
    "links" : {
        "typeA":{
            {"_id" : ObjectId("5067c26b9d595266e25e825b"), "property":"value"}       
        }
    }
} 
```

我试过了：

```
db.collection.update({"name":"a Name"},{{"links":{"$addToSet":{toType:to_link}}}) 
```

这不起作用。如果我只是使用：

```
db.collection.update({"name":"a Name"},{ {"$addToSet":{toType:to_link}} ) 
```

这行得通，但这不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T13:35:14.287

`$addToSet`用于添加到数组。要将新属性添加到现有嵌入对象，您需要使用[`$set`](http://docs.mongodb.org/manual/reference/operator/set/)运算符和[点表示法](http://www.mongodb.org/display/DOCS/Dot+Notation+%28Reaching+into+Objects%29)：

```
db.collection.update({name: 'a name'}, {$set: {'links.' + toType: to_link}}) 
```

# jquery - jquery，用rel模拟锚点点击

> ID：12658746
> 
> 赞同：1
> 
> 时间：2012-09-30T04:53:04.677
> 
> 标签：jquery, anchor, rel

有这张桌子

```
<table>
<tr id="1"><td>1</td></tr>
<tr id="1"><td>1</td></tr>
<tr id="2"><td>2</td></tr>
</table> 
```

当用户单击表格行时，我需要模拟锚点单击，如下所示。

```
jQuery('tr').click(function(){

var id = jQuery(this).attr('id');

var anchor =  jQuery('<a />').attr({href:'index.php?id=' + id,rel:"{handler: 'iframe', size: {x: 800, y: 600}}"});

anchor.click();
}); 
```

我知道如何重定向或访问 jQuery 中的链接，这里的问题与锚的“rel”属性有关。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T04:57:59.870

您需要将 a 标签附加到 dom 树。

```
anchor.appendTo('body').click(); 
```

# android-spinner - Android AIDE 的非常基本的 Spinner 问题

> ID：12658747
> 
> 赞同：0
> 
> 时间：2012-09-30T04:53:25.987
> 
> 标签：android-spinner, onclicklistener, android-adapterview, aide-ide

嗨，我对 android 编程完全陌生，并通过平板电脑使用 AIDE。

我正在尝试使用 Spinner 框创建一个非常基本的程序，该程序可以输出我通过 TextView 或 System.Out.printIn 所做的选择。（也许是 Hello world 的下一步——如果你愿意的话）

由于某种我无法理解的原因，当我已经在导入中检查了这一点时，编译器拒绝识别 OnClickListener 并给出错误消息“Android.Widget.Spinner 中的未知方法 OnClickListener”。

```
As a matter of interest I have changed the name of the Spinner and the error seems to dissapear, the problem then is the Spinner name. I have tried several variations on this, and have came to the conclusion that the best option for me is to create a variable just after Main Acivity, and before the layout is declared. 
```

我还禁用了其中一项覆盖以解决我的问题

有没有人知道问题可能是什么？

```
package com.BGilbert.AUC;

import android.app.*;
import android.os.*;
import android.widget.*;
import android.view.View.OnClickListener;
import android.widget.Spinner.*;
import android.view.*;

public class MainActivity extends Activity {;

  String Fbstring;
  OnClickListener Myonclick;

  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.setContentView(R.layout.main);
    final Spinner Fbspinner=(Spinner)findViewById(R.id.Spinner);

    // The problem is with this line. OnClickListener just wont be        
    // recognised
    Fbspinner.OnClickListener(Myonclick);
  }

  // Override previously disabled
  @Override
  public void Onselect(AdapterView<?> parent,View V, int pos, long id) {
    Fbstring = parent.getItemAtPosition(pos).toString();
    System.out.println(Fbstring);
  }

  @Override
  public void onNothingSelected(AdapterView<?> arg0) {
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T18:54:42.880

您不能在微调器上设置 onClickListener，只能在目前对您来说太高级的视图上设置。相反，请使用 onItemSelectedListener。

```
public class MainActivity extends Activity extends Activity implements OnItemSelectedListener {

public void onItemSelected(AdapterView<?> parent, View view, 
        int pos, long id) {
     ...
     ...
} 
```

您应该首先阅读文档[http://developer.android.com/guide/topics/ui/controls/spinner.html](http://developer.android.com/guide/topics/ui/controls/spinner.html)

还尝试使用标准命名约定：

[http://www.oracle.com/technetwork/java/codeconv-138413.html](http://www.oracle.com/technetwork/java/codeconv-138413.html) [http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367)

最后，这段代码有很多问题，例如

```
public class MainActivity extends Activity {; 
```

注意最后的分号。

先编译你的代码，然后再回答你的下一个问题。

祝你好运

# ruby-on-rails - gmaps4rails 单标记自动缩放

> ID：12658748
> 
> 赞同：3
> 
> 时间：2012-09-30T04:53:30.623
> 
> 标签：ruby-on-rails, gmaps4rails

当地图上显示单个标记时，我试图按照[此处](https://stackoverflow.com/questions/5821997/google-maps-ruby-on-rails-zoom-level-with-one-marker)的答案缩小一点（默认情况下）。我已经尝试了下面的代码，并且生成了一个工作地图，但是更改 setZoom 没有效果。另外，我从萤火虫收到以下错误（下面的代码）。

```
<%= gmaps("markers" => {"data" => @json, "options" => {"auto_zoom" => false} }) %>

<% content_for :scripts do %>
    <script type="text/javascript" charset="utf-8">
      function gmaps4rails_callback() {
        if (Gmaps4Rails.markers.length == 1) {
         //only one marker, choose the zoom level you expect
         Gmaps4Rails.map.setZoom(5);
        }
        else{
         //more than one marker, let's auto_zoom
         Gmaps4Rails.map_options.auto_zoom = true;
         Gmaps4Rails.adjust_map_to_bounds();
        }
      }
    </script>
<% end %> 
```

唯一的错误说：

```
TypeError: Yc is not a function
[Break On This Error]   

...=b}Rf[F].Fa=xk(7,Yc("f"));me[F].cb=xk(3,function(a){var b;if(b=a.ca[ec]()?j:a.ca... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T19:22:45.720

好的，自从我发布您引用的答案以来，界面发生了很大变化。

```
<%= gmaps("markers" => {"data" => @json, "options" => {"auto_zoom" => false} }) %>

<% content_for :scripts do %>
    <script type="text/javascript" charset="utf-8">
      Gmaps.map.callback = function() {
        if (Gmaps.map.markers.length == 1) {
         //only one marker, choose the zoom level you expect
         setTimeout(function() { Gmaps.map.serviceObject.setZoom(5);}, 50);
        }
        else{
         //more than one marker, let's auto_zoom
         Gmaps.map.map_options.auto_zoom = true;
         Gmaps.map.adjustMapToBounds();
        }
      }
    </script>
<% end %> 
```

# php - PHP - 使用带变量的更新

> ID：12658749
> 
> 赞同：4
> 
> 时间：2012-09-30T04:53:34.340
> 
> 标签：php, mysql

我正在使用 php 在函数中更新 mysql 数据库。我能够回显我的变量名称，并能够在 php 页面上返回变量。这向我证明我的变量工作正常。

现在当我使用更新命令时，我的数据库没有响应。是的，我已经连接到数据库并且一切正常。

这是我用来更新的：

```
mysql_query("UPDATE `table_name`
            SET `int_field` = '$int_value'
            WHERE `username` = $username"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T04:55:13.757

的值`$username`应该用`single quotes`.

```
mysql_query(" UPDATE table_name 
                 SET int_field = '$int_value' 
               WHERE username = '$username'"); 
```

旁注：您的代码容易受到`SQL Injection`. 请阅读以下文章以了解如何保护您的代码，

[**在 PHP 中防止 SQL 注入的最佳方法是什么？**](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T05:27:13.387

您需要将所有输入引用到查询中。这可以防止 SQL 注入，但也可以防止在用户无意中输入会破坏查询的特殊字符时发生的简单语法错误。

```
mysql_query('UPDATE table_name '.
            'SET int_field = "'.mysql_real_escape_string($int_value).'" '.
            'WHERE username = "'.mysql_real_escape_string($username).'"'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-03T05:29:46.403

这是如何使用 php 中的变量进行更新的正确结构

```
mysql_query("UPDATE tablename SET password='". $NPass ."' WHERE custID='$num'"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-28T07:43:48.780

我遇到了同样的问题，发现 SET 值不需要单引号，而 WHERE 子句确实...

```
mysql_query("UPDATE table_name SET int_field=$int_value
WHERE username='$username'"); 
```

..似乎对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-30T05:00:15.853

尝试这个 ：

```
 mysql_query("UPDATE `table_name`
         SET `int_field` = '$int_value'
        WHERE `username` = '$username'"); 
```

# android - 远程完成一个 Android Activity

> ID：12658760
> 
> 赞同：1
> 
> 时间：2012-09-30T04:57:12.767
> 
> 标签：android, android-intent, android-activity

我有三个活动，**a, b, c**。活动**b**将启动活动**c**。在活动**c**中，当我按下**返回**键时，活动**c**将完成（），活动**b**将显示为离开时的样子。

这并不难，我想做的是当我完成（）活动**c**时，我想同时完成（）活动**b**以显示活动**a**。

有谁知道如何从另一项活动中完成一项活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T05:07:48.543

实现这个最好的方法是结合使用 startActivityForResult 和 onActivityResult 。

从活动 A 开始活动 B，然后从 B 开始活动 C 使用 startActivityForResult() 获取结果

在 Activity C 中，当用户触发返回或 Destroy()

设置一个结果，通知 A 也完成，

在 C 中调用 finish()。

当 B 从 C 接收到该结果时，B 也会对自己调用 finish()。

在父活动中，在触发子活动时，使用以下命令：-

```
startActivityForResult(intent,variable(int)); 
```

并在活动 B 中以下列方式覆盖 onActivityResult 方法：-

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if(resultCode==2){
        finish();
    }
} 
```

现在，在子活动 C 中，以下列方式覆盖 onStop 和 onDestroy：-

```
protected void onStop() {
    setResult(2);
    super.onStop();
}

@Override
protected void onDestroy() {
    setResult(2);
    super.onDestroy();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T05:01:19.463

是的，在移动到活动 C 之前完成活动 B。因此，下次当您直接单击 ack 按钮时，它将移动到活动 A，如下面的代码：

```
 Intent in = new Intent(B.class, C.class);
       startActivity(in)
        finish(); 
```

# mysql - 为什么我必须在 MySQL 查询中的表名周围使用反引号？

> ID：12658763
> 
> 赞同：4
> 
> 时间：2012-09-30T04:57:57.853
> 
> 标签：mysql, backticks

据我所读，例如，查询中的表名不需要反引号：（“INSERT INTO table_name ....”）。此外，据我所知，在名称中使用下划线是完全可以接受的语法：foo_bar。那么我的问题是，为什么这个查询失败了：

```
mysql_query("INSERT INTO quick_links WHERE ...etc"); 
```

当此查询完美运行时：

```
mysql_query("INSERT INTO `quick_links` WHERE ...etc"); 
```

“快速”或“链接”是保留字？？？我不这么认为，但话又说回来，我对 MySQL 还很陌生，所以我很抱歉。另外，在某些“存储引擎”中是否需要使用反引号（术语参考 phpMyAdmin）？如果这有什么不同，我碰巧正在使用“InnoDB”。

感谢您的回答，我是 MySQL 的新手，我想确保我了解这些细微差别。

我的完整查询是这样的：

```
mysql_query("INSERT INTO `quick_links` VALUES (
    '$user_id', '$ql_name', '$ql_url', '$ql_img'
)"); 
```

$ql_url 和 $ql_name 是通过 $_POST 获得的，然后在用于查询之前使用 trim 和 mysql_real_escape_string 进行清理。$ql_img 只是一个 url，指向一个上传缩略图的目录，而 $user_id 是用来识别登录的特定用户的。这两个查询从字面上看是完全相同的，除了周围的反引号表名。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-30T04:58:47.480

反引号仅用于转义**[MySQL 保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)**。如果不使用任何*保留关键字*，则它们是可选的，前提是所使用的 tableNames 或 columnNames 具有`no spaces`它。

此**[页面](http://dev.mysql.com/doc/refman/5.0/en/identifiers.html)**告诉模式中允许使用的字符。

# javascript - JS中用于字母数字、点和连字符的正则表达式

> ID：12658767
> 
> 赞同：1
> 
> 时间：2012-09-30T04:58:51.117
> 
> 标签：javascript, regex

我需要一个 JS 正则表达式，它应该只允许包含字母数字、点和连字符的单词。

让我知道这是正确的。

```
var regex =  /^[a-zA-Z_0-9/.-]+$/; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T05:00:42.130

几乎。这也将允许下划线和斜杠。从您的范围中删除那些：

```
var regex =  /^[a-zA-Z0-9.-]+$/; 
```

这也不会匹配空字符串。这可能是你想要的，但也可能不是你想要的。如果不是您想要的，请更改`+`为`*`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T01:20:12.670

我要做的第一个简化是使用“单词字符”速记“\w”，它与“a-zA-Z”大致相同，但更短，并且当您移动到其他语言时自动保持正确，包括一些重音字母字符和“数字字符”速记“\d”。

此外，虽然点在正则表达式中的大多数地方都很特殊，但它在方括号内*并不*特殊，不应该在那里引用。（此外，单字符引号字符是反斜杠*，*而不是正斜杠。括号内的正斜杠与开始和结束 RE 的字符相同，因此可能会过早终止 RE，因此导致一个解析错误！）因为我们完全把它扔掉了，它应该是正斜杠还是反斜杠、引用还是裸露都不再重要了。

正如您所注意到的，连字符在括号内具有“范围”的特殊含义（例如：az），因此如果您想要一个*文字*连字符，您必须做一些不同的事情。*按照惯例，先将*文字连字符放在括号内。

所以我的结果是`var regex = /^[-.\w\d]+$/;`

（您可能已经注意到，表达正则表达式的方法几乎总是不止一种，因此它可以工作，并且 RE 小伙伴们在 a) 表达经济性和 b) 运行时性能上花费的时间与他们在获取它时所做的一样多“正确的”。换句话说，你可以忽略我刚才所说的大部分内容，因为这对你来说并不重要。我认为真正重要的是a）摆脱多余的正斜杠和b）将文字连字符移动到方括号内的第一个字符。）

（另一个想法：在接受字母字符和连字符时，*下划线*也可以接受......所以你真的是想有那个下划线吗？）

（另一个想法：有时标识符的第一个字符*必须*是一个字母，在这种情况下，您可能想要的是`var regex = /^\w[-.\w\d]*$/;`在任何情况下您都可能希望对第一个字符使用不同的规则，因为上面的幼稚配方允许“- " 和 "." 作为长度为 1 的合法词。）

# time - 在 zsh 中转换时间格式

> ID：12658769
> 
> 赞同：0
> 
> 时间：2012-09-30T04:59:08.320
> 
> 标签：time, converter, zsh

我创建了带有时间选项参数的 az shell 脚本。（例如：--time 00:03:30）。我希望用户能够以 HH:MM:SS 以外的格式输入时间。我的脚本已经可以将 HH:MM:SS 转换为秒（这是最终结果需要的），但是 HH:MM:SS 格式很笨重。所以，我做了一个函数，将另一种格式（#h#m#s）转换为原始格式：

```
 if [ "$(echo "$1" | grep -E "([[:digit:]]+[hms]|[[:digit:]]+[hms][[:digit:]]+[hms]|[[:digit:]]+[hms][[:digit:]]+[hms][[:digit:]]+[hms])")" ]; then
        if [ "$(echo "$1" | grep "h")" ]; then
            H="$(echo "$1" | sed -E 's|.*([[:digit:]]+)h.*|\1|')"
        else
            H=00
        fi
        if [ "$(echo "$1" | grep "m")" ]; then
            M="$(echo "$1" | sed -E 's|.*([[:digit:]]+)m.*|\1|')"
        else
            M=00
        fi  
        if [ "$(echo "$1" | grep "s")" ]; then
            S="$(echo "$1" | sed -E 's|.*([[:digit:]]+)s.*|\1|')"
            else
            S=00
        fi
        echo "$H:$M:$S" | sed -Ee 's|:([[:digit:]]):|:0\1:|' -e 's|^([[:digit:]]):|0\1:|' -e 's|:([[:digit:]])$|:0\1|'
    fi 
```

是的，我已经创建了自己的解决方案。我来这里是为了找一个更好的。另外，如果您知道可以转换为秒的任何其他格式，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:33:07.707

这是你想要的吗？

```
% zmodload zsh/datetime
% echo $(( $(strftime -r '%H:%M:%S' 01:01:12) - $(strftime -r '%H:%M:%S' 0:0:0) ))
3672 
```

# javascript - 如何从 setTimeout 中获取另一个范围内的变量集？

> ID：12658771
> 
> 赞同：1
> 
> 时间：2012-09-30T04:59:40.897
> 
> 标签：javascript, jquery

我有一个计时器功能，我从这个网站上下来，并尝试对其进行一些修改以满足我的需要。在大多数情况下，它可以按我的意愿工作，但我无法将参数传递给 JavaScript 函数。

我想使用选择来更改 id 值，然后将该值传递给 JQuery 加载函数。有人可以告诉我如何做到这一点吗？

值得一提的是，定时器刷新时，选择值需要“粘”，不能复位。

这是我到目前为止所拥有的：

```
function RecurringTimer(callback, delay) {
  var timerId, start, remaining = delay;

  this.pause = function() {
    window.clearTimeout(timerId);
    remaining -= new Date() - start;
  };

  var resume = function() {
    start = new Date();
    timerId = window.setTimeout(function() {
      remaining = delay;
      resume();
      callback();
    },remaining);
  };

  this.resume = resume;
  this.resume();
}

var timer = new RecurringTimer(function() {
  $('#id').load('load.asp?id=1'); // The "id" should be "newVal" from JQuery below.
}, 5000);

$(document).ready(function(){
  $('#appList').live('change',function(){
    var select = $(this);
    var newVal = select.val();

    if(newVal != ''){

      // This is where the var newVal needs to be passed into the JavaScript.

    }
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T06:08:29.950

我已经在一定程度上推测了你在做什么，所以我做了一些改变来适应只是试图让它发挥作用。因此，如果您对我为什么做某事有任何疑问，请告诉我。

这是我的模拟元素，试图匹配您在代码中的内容：

```
<div id="selector">
    <select id="appList">
        <option value="1">Application List - App 1</option>
        <option value="2">Application List - App 2</option>
        <option value="3">Application List - App 3</option>
        <option value="4">Application List - App 4</option>
    </select>
</div>
<div id="id"></div> 
```

​注意，`#id`不是元素的好标识符；我几乎将它重命名为`#loader`好几次。您可能会考虑使`id`此元素的此属性更具描述性。

我确实将其更改`$.live`为`$.on`; 如果您在现实中使用的元素类似于 a`select`或具有真实`change`事件的东西，请坚持使用`$.on`而不是`$.live`. `$.live`已弃用，并且在完全删除之前可能不会有太多版本。

我也换掉了`$.load`，`$.get`所以我可以使用`callback`; jsFiddle 并没有真正让我选择使用`$.load`和返回任何东西。所以我使用`$.get`并替换了一个日志语句。

好的，所以您将看到`jQuery();`所有`RecurringTimer()`函数以及`callback`、`timer`和`$.on`. 这样做是创建一个“封闭范围”（就像它包含它包含的*代码*一样），所以我不再处于`window`全局范围内。我可以`window`通过调用访问`window`，但`this`将属于`jQuery.ready()`，这意味着`document`。

在顶部你会看到这个：

```
jQuery(function run($){
    var $id = $('#id'),
        $applist = $('#appList'),
        timerId,
        start,
        remaining = 0,
        newval,
        select; 
```

这些都是私有变量，它们将保留在属于此范围的函数和回调的范围内。因此，如果我将它们放在这个“最私密”的范围内，我们可以分享它们。如果`var`在此范围内的其他函数内部调用它们，则它们将仅属于该范围。Like`var select = $(this);`只能在该`$.on`处理程序中访问。

因此，我想要`var newval;`在最私密的范围内，以便我们可以轻松地共享它。当然，您必须小心，因为有时您不想将其全部推到该范围（例如`var select`）。

可能其余部分是不言自明的。你不需要`window.setTimeout`，只要`setTimeout`。大多数`window`范围的属性和方法不需要您预先添加`window`. 但是，您可能需要这样做以消除本地和全局/`window`属性的歧义，例如，如果您有一个本地`var location = 'http://...';`范围。在这种情况下，你需要`window.location`得到它。

如果您有任何问题，请告诉我。

```
jQuery(function run($){
    var $id = $('#id'),
        $applist = $('#appList'),
        timerId,
        start,
        remaining = 0,
        newval,
        select;

    $applist.on('change', function(){
        var select = $(this);

        $id.prepend('<p>App List change event fired</p>');

        newval = select.val();

        if (newval != '') {
            var timer = new RecurringTimer(function() {
                $.get('/echo/html/?id=' + newval, callback); 
            }, 5000);
        }

        function callback(msg, status){
            var report = '<p>Callback returned ' + status + 
                         ' for '  + this.url +  '.</p>';

            $id.prepend(report);
        }
    });

    function RecurringTimer(callback, delay) {
        remaining = delay;

        $id.prepend('<p>RecurringTimer initialized.</p>');

        this.pause = function() {
            clearTimeout(timerId);

            remaining -= new Date() - start;
        };

        var resume = function() {
            start = new Date();

            timerId = setTimeout(function() {
                remaining = delay;
                resume();
                callback();
            }, remaining);
        };

        this.resume = resume;

        this.resume();
    }
}); 
```

[​http://jsfiddle.net/userdude/zU5b3/](http://jsfiddle.net/userdude/zU5b3/)

还有一些 CSS，但我认为它不相关，所以我把它省略了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T05:06:36.510

好吧，你可以这样做：

```
if(newVal != ''){
    window.newVal = newVal;
} 
```

并`window.newVal`在需要的地方使用：

```
$('#id').load('load.asp?id=' + window.newVal); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T05:08:58.600

试试这个

```
function RecurringTimer(callback, delay) {
 var timerId, start, remaining = delay;
 var newValue;
  .....
  .....
  ..... 
```

然后在你的jQuery中

```
if(newVal != ''){

     newValue = newVal;

} 
```

然后你可以在你的计时器中引用它

```
 var timer = new RecurringTimer(function() {

        $('#id').load('load.asp?id='+newValue); // The "id" should be "newVal" from JQuery below.
}, 5000); 
```

# python - 基于 Python 文本的游戏显示

> ID：12658779
> 
> 赞同：1
> 
> 时间：2012-09-30T05:01:17.693
> 
> 标签：python, console, char, python-idle

我正在尝试用 Python 编写基于文本的游戏，但遇到了问题。我让我的角色在控制台中从一个位置移动到另一个位置，但是每次用户按下一个键时，这个角色就会消失。为了再次看到该字符，用户必须按下一个键。这是我的代码：

```
import os
import msvcrt

class Frog:
    X = 0
    Y = 0

    def __init__(self, x, y):
            self.X = x
            self.Y = y

    def Draw(self):
            for y in range(self.Y):
                    print ""
            print ' ' * self.X + '#'

    def Update(self):
            if msvcrt.kbhit() == True:
                    if msvcrt.getch() == 'a':
                            if self.X > 0:
                                    self.X = self.X - 1
                    if msvcrt.getch() == 'd':
                                    self.X = self.X + 1
                    if msvcrt.getch() == 'w':
                                    self.Y = self.Y - 1
                    if msvcrt.getch() == 's':
                                    self.Y = self.Y + 1

frog = Frog(0,0)

def Draw():
    frog.Draw()
    os.system('cls')

 def Loop():

    while 1:      

                    frog.Update()
                    Draw()

Loop() 
```

有谁知道是什么原因造成的？所有帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T05:08:49.007

您在绘制后立即清除屏幕，而不是在绘制之前。这样，你刚刚画的东西就被抹掉了。

```
def Draw():
    frog.Draw()
    os.system('cls') 
```

换个顺序试试：

```
def Draw():
    os.system('cls')
    frog.Draw() 
```

# c - 在程序中使用 typedef

> ID：12658780
> 
> 赞同：1
> 
> 时间：2012-09-30T05:01:18.113
> 
> 标签：c, typedef, structure

昨天我参加了考试，有一个这样的问题：使用 typedef 编写一个程序来找出两个数字中的较大者。

所以这个问题的解决方案是显而易见的吧？但是我们必须使用 typedef 这就是条件，所以这就是我所做的。

```
#include <stdio.h>

typedef struct {
    int a;
}LARGE;

void main()
{
    LARGE a,b;
    int c;
    scanf("%d%d", &a.a,&b.a);
    c = large(a.a,b.a);
    printf("%d", c);
} 
```

这是主程序，我编写了一个名为 large() 的函数，它返回两个数字中的最大值。

这就是我在程序中添加关键字 typedef 的方式，但是部门老师说我们应该使用 typedef 来创建新名称，而不是在结构中使用它，即：

```
typedef int large a,b; 
```

现在 large 是 int 的新名称。

但是问题没有明确指定使用 typedef 为正在使用的数据类型创建新名称，所以我使用 typedef 使用结构编写程序，所以请让我知道什么是正确的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T05:32:31.570

但是 typedef 的正确用途是为现有数据类型创建别名。如果你用它来命名一个匿名结构（这是一个完全有效的用法），那么它似乎错过了课程的重点。

您的回答确实有效，问题是您的老师可能想给 int 起另一个名字。

# java - Apache OFBiz 启动异常

> ID：12658784
> 
> 赞同：0
> 
> 时间：2012-09-30T05:01:34.230
> 
> 标签：java, ofbiz

我正在尝试在我的计算机中设置 OFBiz。到目前为止，我已经按照安装软件的分步程序进行了操作。问题是当我尝试通过执行命令 java -jar ofbiz.jar 来运行服务器时，我总是遇到启动异常。即使我执行 startofbiz.bat 它也会显示相同的错误：

```
org.ofbiz.base.start.StartupException: Cannot locate container class (org.ofbiz.service.rmi.RmiServiceContainer)
    at org.ofbiz.base.container.ContainerLoader.loadContainer(ContainerLoader.java:164)
    at org.ofbiz.base.container.ContainerLoader.load(ContainerLoader.java:65)
    at org.ofbiz.base.start.Start.initStartLoaders(Start.java:259)
    at org.ofbiz.base.start.Start.init(Start.java:96)
    at org.ofbiz.base.start.Start.main(Start.java:410)
java.lang.ClassNotFoundException: org.ofbiz.service.rmi.RmiServiceContainer
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.ofbiz.base.util.CachedClassLoader.loadClass(CachedClassLoader.java:196)
    at org.ofbiz.base.util.CachedClassLoader.loadClass(CachedClassLoader.java:169)
    at org.ofbiz.base.container.ContainerLoader.loadContainer(ContainerLoader.java:162)
    at org.ofbiz.base.container.ContainerLoader.load(ContainerLoader.java:65)
    at org.ofbiz.base.start.Start.initStartLoaders(Start.java:259)
    at org.ofbiz.base.start.Start.init(Start.java:96)
    at org.ofbiz.base.start.Start.main(Start.java:410)
java.lang.ClassNotFoundException: org.ofbiz.service.rmi.RmiServiceContainer
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.ofbiz.base.util.CachedClassLoader.loadClass(CachedClassLoader.java:196)
    at org.ofbiz.base.util.CachedClassLoader.loadClass(CachedClassLoader.java:169)
    at org.ofbiz.base.container.ContainerLoader.loadContainer(ContainerLoader.java:162)
    at org.ofbiz.base.container.ContainerLoader.load(ContainerLoader.java:65)
    at org.ofbiz.base.start.Start.initStartLoaders(Start.java:259)
    at org.ofbiz.base.start.Start.init(Start.java:96)
    at org.ofbiz.base.start.Start.main(Start.java:410) 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T19:06:31.287

假设您已经按照分步说明运行了 ant run-install 步骤，您应该像调试任何其他 java 异常一样调试异常。

首先，在您的堆栈跟踪中，要查看的关键行是：

> {org.ofbiz.base.start.StartupException：找不到容器类（org.ofbiz.service.rmi.RmiServiceContainer）} {java.lang.ClassNotFoundException：org.ofbiz.service.rmi.RmiServiceContainer}

这些告诉您类 ,`org.ofbiz.service.rmi.RmiServiceContainer`已尝试加载但未找到。

你应该检查你是否有类文件`RmiServiceContainer.class`。在我安装的 OFBiz 中，这个类位于：

> /ofbiz/framework/service/build/classes/org/ofbiz/service/rmi/RmiServiceContainer.class

如果你找到了类文件，然后尝试使用 ant refresh 重建 OFBiz。

如果找不到类文件，则搜索用于创建此类 RmiServiceContainer.java 的 java 文件。为创建此类而编译的 java 代码位于：

> /ofbiz/framework/service/src/org/ofbiz/service/rmi/RmiServiceContainer.java

如果您找到 Java 文件，请再次尝试使用 ant refresh 重建 OFBiz，并确认已创建类文件。如果找不到 java 文件，则应重新下载 OFBiz。

如果运行 ant refresh 无法解决问题，则可能是您的类路径中未正确配置某些内容。

# c# - 将通用列表传递给方法

> ID：12658788
> 
> 赞同：0
> 
> 时间：2012-09-30T05:02:23.450
> 
> 标签：c#

我有一个应用程序，它将解析一个 excel 文件并添加一个列，然后生成一个带有结果的新 CSV 文件。我能够在文件中创建我想要的项目列表，但我无法弄清楚如何将该列表传递给生成新文件的方法。

我有以下课程：

```
public class LocationData
{
    public string PostalCode { get; set; }
    public string Partner { get; set; }
    public string LocationID { get; set; }
    public string Name { get; set; }
    public string Country { get; set; }
    public string Market { get; set; }
} 
```

以及将数据放入列表的以下代码：

```
LocationData Locationdata = new LocationData()
{
    PostalCode = location[0],
    Partner = location[1],
    LocationID = location[2],
    Name = location[3],
    Country = location[4],
    Market = repository.GetMarketsForPostalCode(location[0])
} 
```

我也有创建 csv 的方法，我需要传入列表信息，但出现错误：

> foreach 语句无法对“app.LocationData”类型的变量进行操作，因为“app.LocationData”不包含“GetEnumerator”的公共定义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T06:12:38.630

您的 csv 函数将如下所示

```
 public void GenerateCSV(List<LocationData> data)
    {
        foreach (LocationData d in data)
        {
            //put line in csv as
            string s = d.PostalCode + "," d.Partner + _"," + d.LocationID...... + Environment.NewLine;
        }
    } 
```

您的班级声明将保持不变

```
public class LocationData
{
    public string PostalCode { get; set; }
    public string Partner { get; set; }
    public string LocationID { get; set; }
    public string Name { get; set; }
    public string Country { get; set; }
    public string Market { get; set; }
} 
```

现在您需要首先在列表中添加所有数据，您将这样做

```
 List<LocationData> lst = new List<LocationData>();

        LocationData ld = new LocationData();
        ld.LocationID = "0";
        ld.Market = "market";

        lst.Add(ld);
        ........
        GenerateCSV(lst); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T05:08:19.273

我认为您误解了 C# 中的列表是什么。我认为您需要`List`数据类型。尝试这个：

```
List<string> Locationdata = new List<string>()
  {
    location[0],
    location[1],
    location[2],
    location[3],
    location[4],
    repository.GetMarketsForPostalCode(location[0])
  }; 
```

# java - 将 Play 2 框架与 Akka 远程系统连接

> ID：12658789
> 
> 赞同：3
> 
> 时间：2012-09-30T05:02:43.953
> 
> 标签：java, playframework, playframework-2.0, akka

我正在尝试将远程 akka 系统连接到播放框架，看起来我的配置有问题。

我有一个 Play 框架控制器类和一个 Akka 演员，因为下面的本地对象是代码：

当我运行时，网页上显示以下消息

```
[ClassNotFoundException: akka.remote.RemoteActorRefProvider]
In C:\Users\FAISAL\workspace\Rakka\app\controllers\Application.java at line 21.
17  public static Result index() throws InterruptedException { 
18    
19    System.out.println(" Local Node Called0");
20    
21    ActorSystem csystem = ActorSystem.create("Application", ConfigFactory.load().getConfig("LocalNode"));
22    ActorRef localNode = csystem.actorOf(new Props(LocalNode.class));
23
24      System.out.println(" Local Node Called1");
25      localNode.tell("Hello"); 
```

这是控制器：

```
public class Application extends Controller {

  public static Result index() throws InterruptedException { 

      System.out.println(" Local Node Called0");

      ActorSystem csystem = ActorSystem.create("Application", ConfigFactory.load().getConfig("LocalNode"));
      ActorRef localNode = csystem.actorOf(new Props(LocalNode.class));

        System.out.println(" Local Node Called1");
        localNode.tell("Hello World");
        System.out.println(" Local Node Called2");

        Thread.sleep(5000);
        csystem.shutdown();
        return ok(index.render("I am OK"));
  }    
} 
```

这是当地的阿卡演员

```
public class LocalNode extends UntypedActor {

    LoggingAdapter log = Logging.getLogger(getContext().system(), this);
    Timeout timeout = new Timeout(Duration.parse("5 seconds"));

    ActorRef master;

    public void preStart()
    {
        /* Get reference to Master Node*/
         master = getContext().actorFor("akka://MasterNode@127.0.0.1:2552/user/master");
    }

    @Override
    public void onReceive(Object message) throws Exception {
        System.out.println(" Future called  ");

         Future<Object> future = Patterns.ask(master , message.toString(), timeout);

            String result = (String) Await.result(future, timeout.duration());

            log.info("Messagefrom Server", result); 
    }

} 
```

这是本地播放配置文件

```
#confige the remote connection

LocalNode {
    akka {
        actor {
            provider = "akka.remote.RemoteActorRefProvider"
        }
        remote {
            transport = "akka.remote.netty.NettyRemoteTransport"
            netty {
                hostname = "127.0.0.1"
                port = 0
            }
        }
    }
} 
```

下面的代码来自远程 akka 系统。

这是远程主控

```
public class MasterNode implements Bootable
{
     final ActorSystem system;

      public MasterNode() {
        system = ActorSystem.create("MasterNode", ConfigFactory.load()
            .getConfig("master"));
        ActorRef actor = system.actorOf(new Props(MasterActor.class),"master");
        System.out.println(" Master Node is called ");
      }

      public void startup() {

      }

          public void shutdown() {
            system.shutdown();
          }
} 
```

这是远程 akka 演员系统

```
public class MasterActor extends UntypedActor {

    @Override
    public void onReceive(Object message) throws Exception {

         if (message instanceof String) {
                // Get reference to the message sender and reply back
                getSender().tell(message + " got something");       
    }
  }  
} 
```

这是来自远程 akka 配置

```
master {
akka {
  actor {
    provider = "akka.remote.RemoteActorRefProvider"
  }
  remote {
    transport = "akka.remote.netty.NettyRemoteTransport"
    netty {
      hostname = "127.0.0.1"
      port = 2552
    }
 }
}} 
```

为了运行系统，我首先启动了 Akka 远程系统，然后启动了 Play 2 框架

运行 Play 框架后，我收到以下错误

```
[info] play - Application started (Dev)
 Local Node Called0
[error] application -

! @6bol84j48 - Internal server error, for request [GET /] ->

play.core.ActionInvoker$$anonfun$receive$1$$anon$1: Execution exception [[ClassN
otFoundException: akka.remote.RemoteActorRefProvider]]
        at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:134) [
play_2.9.1.jar:2.0.2]
        at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:115) [
play_2.9.1.jar:2.0.2]
        at akka.actor.Actor$class.apply(Actor.scala:318) [akka-actor.jar:2.0.2]
        at play.core.ActionInvoker.apply(Invoker.scala:113) [play_2.9.1.jar:2.0.
2]
        at akka.actor.ActorCell.invoke(ActorCell.scala:626) [akka-actor.jar:2.0.
2]
        at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:197) [akka-actor.j
ar:2.0.2]
Caused by: java.lang.ClassNotFoundException: akka.remote.RemoteActorRefProvider
        at java.net.URLClassLoader$1.run(Unknown Source) ~[na:1.7.0_01]
        at java.net.URLClassLoader$1.run(Unknown Source) ~[na:1.7.0_01]
        at java.security.AccessController.doPrivileged(Native Method) ~[na:1.7.0
_01]
        at java.net.URLClassLoader.findClass(Unknown Source) ~[na:1.7.0_01]
        at java.lang.ClassLoader.loadClass(Unknown Source) ~[na:1.7.0_01]
        at java.lang.ClassLoader.loadClass(Unknown Source) ~[na:1.7.0_01] 
```

看起来我没有做对，欢迎任何建议或帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T11:38:47.287

也许您忘记在 Play2 应用程序中添加对 Akka 远程的依赖项。

如果您使用的是 Play 2.0.3，请在`project/Build.scala`文件中添加以下依赖项：

```
val appDependencies = Seq(
      "com.typesafe.akka" % "akka-remote" % "2.0.2"
) 
```

# c++ - 将 std::string 转换为整数

> ID：12658790
> 
> 赞同：0
> 
> 时间：2012-09-30T05:03:15.283
> 
> 标签：c++, string

全部，这是我的代码：

```
std::string version = curl_version();
version = version.substr( version.find( '/' ) + 1 );
int min, max;
int pos = version.find( '.' );
std::stringstream stream( version.substr( 0, pos ) );
version = version.substr( pos + 1 );
stream >> max;
pos = version.find( '.' );
stream.str( version.substr( 0, pos ) );
stream >> min; 
```

我只是重用同一个流对象，但由于某种原因 min 变量没有正确分配。

我错过了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T05:57:20.400

问题是您不能重用相同的 stringstream 对象，请尝试这样做：

```
std::string version = curl_version();
version = version.substr( version.find( '/' ) + 1 );
int min, max;
int pos = version.find( '.' );
std::stringstream stream( version.substr( 0, pos ) );
version = version.substr( pos + 1 );
stream >> max;
pos = version.find( '.' );
std::stringstream stream1( version.substr( 0, pos ) );
stream1 >> min; 
```

* * *

似乎当您将 (>>) 从字符串流中移出并到达 eof（您可以通过调用 stream.eof() 进行检查）时，设置了一个标志，即使您设置了（通过调用 str()）也可以防止进一步移出一个新的关联字符串对象。为了让它工作，你必须在再次移出之前调用 clear()。

```
std::string version = curl_version();
version = version.substr( version.find( '/' ) + 1 );
int min, max;
int pos = version.find( '.' );
std::stringstream stream( version.substr( 0, pos ) );
version = version.substr( pos + 1 );
stream >> max;
pos = version.find( '.' );
stream.str( version.substr( 0, pos ) );
str.clear();
stream >> min; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T10:04:53.150

原因是，仅调用`std::stringstream::str`确实会更改内部字符串，但不会重置任何错误标志。因此，当前一个字符串到达​​字符串末尾或另一个“错误”时，流仍然认为它处于此错误。`std::striungstream::clear`更改字符串后只需调用以清除错误标志。

# haskell - 如何在 Haskell 中将 while 循环定义为高阶函数？

> ID：12658796
> 
> 赞同：0
> 
> 时间：2012-09-30T05:04:34.580
> 
> 标签：haskell

我面临以下问题，有人可以给我一些提示吗？非常感谢！

定义高阶函数`while`，其中条件和操作对 type 的值起作用`a`。它的类型应该是

```
whileG :: (a -> IO Bool) -> (a -> IO a) -> (a ->IO a) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T07:25:29.240

在像 haskell 这样的语言中，您不一定需要循环。如果你这样做了，那意味着你正试图以一种命令式的方式实现你的想法，这并不总是正确的做法。

简而言之，因为我不知道您在做什么，您可以查看定义了几个这样 的循环的[循环库。](http://hackage.haskell.org/packages/archive/monad-loops/0.3.0.2/doc/html/Control-Monad-Loops.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T23:20:06.463

看起来这是 Simon Thompson 的《函数式编程的工艺》一书中的练习之一。我也为这个问题苦苦挣扎，这就是我想出的，我绝不声称这是最好的答案，但至少可以提供一个提示。

```
whileG :: (a -> IO Bool) -> (a -> IO a) -> (a -> IO a)
whileG testIO action x = do
    test <- testIO x
    if test
    then do
        y <- action x
        whileG testIO action $ y
    else return x 
```

我在这里假设在“循环”的每次迭代中都完成了一些计算，并且该计算的结果（类型为 a）被输入到 testIO 函数（以检查循环不变量是否仍然成立）和下一次迭代中的动作。

# java - 在超级构造函数调用中找不到符号错误

> ID：12658800
> 
> 赞同：2
> 
> 时间：2012-09-30T05:05:42.070
> 
> 标签：java

编译在第 8 行失败。它说“super”中的“s”是错误的。

```
public class BasePlusCommissionEmployee extends CommissionEmployee {    
  private double baseSalary;

  //constructor
  public BasePlusCommissionEmployee( String first, String last, String ssn, int mth, 
          int day, int yr, double sales, double rate, double salary )
  {
     super( first, last, ssn, mth, day, yr, sales, rate );
     setBaseSalary( salary );
  } 
```

错误信息： ![错误信息](../Images/6f80cd97d75cf5f6b5f90d4686bae202.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T05:13:25.160

很可能，您没有正确调用超级构造函数，即 CommissionEmployee 类的构造函数，并且可能传入了错误的参数。解决这个问题，您的错误可能会消失。

# asp.net - 使用 IIS 时方法不允许 405

> ID：12658809
> 
> 赞同：6
> 
> 时间：2012-09-30T05:08:09.493
> 
> 标签：asp.net, .net, wcf, iis-7, wcf-binding

我有以下 WCF ：

```
 [OperationContract]
    IList<OperationRoomDto> GetOperationRooms(); 
```

我有一个使用这个 WCF 的网站，当我使用 Visual Studio（Asp.Net 开发服务器）时它工作正常，但是当我将 WCF 部署到 IIS 时，我得到了这个异常：

> 远程服务器返回错误：(405) Method Not Allowed。

我制作了一个简单的网站来测试这个 WCF（在 IIS 上）并且它有效。

这是网站 web.config 文件的一部分：

```
 <endpoint address="http://server/WcfService"
            binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IMessageService"
            contract="MyProject.Web.Wcf.IMessageService" name="BasicHttpBinding_IMessageService">
  </endpoint> 
```

和这部分网络服务配置文件：

```
 <system.serviceModel>
<behaviors>
  <serviceBehaviors>
    <behavior>
      <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpGetEnabled="true" />
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" /> 
```

我试图调试 w3wp.exe 服务以获取任何隐藏的异常，我在 web 服务方法处设置了一个断点，但调试器甚至没有到达那里，并且在到达 web 服务类之前发生了异常。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-30T07:40:04.413

发现问题了，是因为wcf的Url不正确，漏掉了服务文件名

```
<endpoint address="http://server/WcfService" 
```

它应该变成：

```
<endpoint address="http://server/WcfService/Service.svc" 
```

# android - 从 DDMS 安装非市场安卓应用

> ID：12658812
> 
> 赞同：0
> 
> 时间：2012-09-30T05:08:35.033
> 
> 标签：android

我可以在我的 Eclipse 设备模拟器中安装 android NON MARKET 应用程序吗？我想尝试许多免费的非市场应用程序。

如果我得到一个 apk 文件并尝试通过 DDMS 视图将其推送到模拟器中，然后从模拟器中安装它，我应该如何继续？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T05:11:52.940

不要像那样推送任何 apk 文件，尝试以下方法从您的电脑安装 NON MARKET APP apk 文件：

```
 go to your android sdk platform tools path like the following

for ex: C:/ProgramFIles/Android/android-sdk/platform-tools/ adb install "full path to your .apk file from your pc"

   like :  C:/ProgramFIles/Android/android-sdk/platform-tools/ adb install D:\Android\Workspace\Demo\bin\Demo.apk 
```

如果您正在运行两个仿真器，则上述解决方案无法安装，它还需要指定仿真器设备，例如：

```
 for ex: C:/ProgramFIles/Android/android-sdk/platform-tools/ adb -s emulator-5554 install "full path to your .apk file from your pc" 
```

# c# - DbContext 不实例化导航属性

> ID：12658816
> 
> 赞同：0
> 
> 时间：2012-09-30T05:09:17.193
> 
> 标签：c#, asp.net, .net, entity-framework, entity-framework-5

我创建了两个具有简单的一对多关系的实体。

```
public class TestEntity
{
    public int Id { get; set; }
    public string Message { get; set; }

    public virtual ICollection<RelatedTest> RelatedTests { get; set; }
}

public class RelatedTest
{
    public int Id { get; set; }
    public bool Something { get; set; }

    public virtual TestEntity TestEntity { get; set; }
} 
```

当我去测试这个时，`ICollection`导航属性没有被实例化。我无法添加相关实体。

```
var dataContext = new DataContext();
var testEntity = new TestEntity { Message = "Test message" };
var related = new RelatedTest { Something = true };
testEntity.RelatedTests.Add(related); //fails on this line because RelatedTests is null.
dataContext.TestEntities.Add(testEntity);
dataContext.SaveChanges(); 
```

这是预期的功能吗？我必须实例化导航属性吗？我希望 Entity Framework 为我实例化集合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T05:13:13.437

好吧，实体框架不会“初始化”您的任何对象（除了已经在数据库中的数据）。你必须自己做。EF 仅“将其映射到数据库”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T06:01:31.273

在你上面的例子中，你可能想要更像

```
var dataContext = new DataContext();
var testEntity = new TestEntity { Message = "Test message" };
var related = new RelatedTest { Something = true };
testEntity.RelatedTests = new List<RelatedTest>{related};
dataContext.TestEntities.Add(testEntity);
dataContext.SaveChanges(); 
```

由于您正在创建基础实体，因此 EF 尚未对实体进行任何修复。

When you reload this entity from the database the collection shouldn't be null in your above example as you appear to be using lazy loading.

# matlab - 为什么在函数内部使用 load 后函数会屏蔽变量？

> ID：12658818
> 
> 赞同：4
> 
> 时间：2012-09-30T05:10:09.133
> 
> 标签：matlab, workspace, masking

将此示例函数另存为`test_func.m`：

```
function test_func
load test.mat
whos
alpha 
```

并运行此示例脚本：

```
alpha = 3;
save test.mat
test_func 
```

这是我得到的输出：

```
 Name       Size            Bytes  Class     Attributes

  alpha      1x1                 8  double              

??? Error using ==> alpha at 40
Not enough input arguments.

Error in ==> test_func at 4
alpha 
```

* * *

的输出`whos`显示变量已加载到函数的本地工作区中。我什至可以在第 4 行设置断点`test_func`并输入`alpha`，我得到了正确的结果，但是一旦我使用调试器向前迈出一步，它就会再次失败：函数`alpha`正在屏蔽局部变量，我不明白为什么.

替换`test_func`by的内容

```
p = load('test.mat');
p.alpha 
```

工作正常，但这不是我想要做的。我想直接在函数的本地工作区中加载变量。

对我来说，它看起来像一个错误（我使用的是 Matlab R2011a），但如果它是一个*功能*，你能解释一下并帮助我找到解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T07:53:20.880

呵呵，你可能是对的，这是一个错误。看起来很奇怪，因为以下工作

```
function test_func
load('test.mat','alpha');
whos
alpha 
```

另一件有帮助的事情是在调用加载之前初始化变量

```
function test_func
alpha = 0;
load('test.mat');
whos
alpha 
```

# c - 不确定使用 C 编程的三个简单函数

> ID：12658820
> 
> 赞同：0
> 
> 时间：2012-09-30T05:11:24.100
> 
> 标签：c

```
/* stringlength
 * input: str, pointer to a string
 * output: integer representing the length of string str, 
 * not counting the terminating character.
 *
 * You may NOT call ANY functions within this function.
 */
int stringlength(char *str)
{
    // count the number of characters in str
  int count=0,k;
  for (k=0; str[k] != '\0';k++)
    count++;
    return count;
}

/* countchars
 * inputs: character c, string str
 * output:  The number of instances of c in the string str
 * You may not call ANY function calls within this function.
 */
int countchars(char c, char *str)
{
    // count the number of times c is found in str
  int k,count=0;
  for (k=0;str[k]=='\0';k++)
    {
      if (str[k] == c)
    count++;
      else;
    }

    return count;
}

/* countlines
 * input: char *filename - string containing the filename
 * output: integer representing the number of lines in the file
 */
int countlines(char *filename)
{
    // count the number of lines in the file called filename
  FILE *f = fopen(filename,"r");
    char ch;
    int lines=0;
  f = fopen(filename,"r");

  do{
    ch = fgetc(f);
    if( ch == '\n')
      lines++;
  }while( ch != EOF );

return lines;
} 
```

我需要在我的程序中实现的这三个不同功能的帮助。我是初学者，所以请放轻松，countlines 功能给我带来了最大的麻烦。如果有人能解释为什么不或为什么这些功能会起作用，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T05:17:11.790

有很多问题`countlines()`：

1.  您打开文件两次，但`FILE *`用第二个值覆盖了第一个值，因此您无法关闭它。这是一个小问题。

2.  主要问题是该函数`fgetc()`返回一个`int`，而不是一个`char`。特别`EOF`是 是一个不同于 each 的值`char`。

3.  该代码在返回之前不会关闭文件。通常，如果您在函数中打开文件，则应将其关闭。如果不这样做，则必须将文件指针传递回调用代码，以便它可以关闭它。

4.  对于`do ... while`输入循环来说，循环很少是正确的（`while`顶部的循环测试几乎总是更干净更清晰），但至少你没有使用`feof()`.

    ```
    int countlines(char *filename)
    {
        FILE *fp = fopen(filename,"r");
        int ch;
        int lines = 0;
        if (fp == 0)
            return lines;

        while ((ch = fgetc(fp)) != EOF)
        {
            if (ch == '\n')
                lines++;
        }

        fclose(fp);

        return lines;
    } 
    ```

当您`char`改为使用时，会发生以下两种情况之一：

*   如果您的`char`类型是`signed`，那么真正的字符（通常是 ÿ — y-变音符号、U+00FF、带有分音符号的拉丁小写字母 Y）也匹配`EOF`，因此您可以在到达文件末尾之前停止阅读。
*   如果您的`char`类型是`unsigned`，则任何值都不会匹配`EOF`，因此循环将永远不会停止。

* * *

在`stringlength()`中，您有两个变量`count`，`k`它们被小心地保持在相同的值；你只需要两者之一。

* * *

除了参差不齐的缩进（在所示的代码中很常见——而且绝对是要避免的事情），以及完全没有任何作用的不必要和毫无意义`else;`的代码，`countchars()` ~~看起来~~不错的代码（*后期添加*）......在`for`循环中反转了条件；它应该是`str[k] != '\0'`，当然。

# c++ - C++ 选项/长选项实现

> ID：12658822
> 
> 赞同：0
> 
> 时间：2012-09-30T05:11:57.473
> 
> 标签：c++, linux, parsing

我正在研究在 Linux 平台上使用 C++ 的元编程语言解析器。现在，我需要为解析器实现选项/长选项以提供一些附加功能。基本上，如果用户传入一些附加选项，解析器需要在解析文本文件时存储统计信息。

我可以想到两种方法来实现它。一种方法是用户全局存储用户输入的选项。另一种方法是创建一个单例类来存储选项。所以我想知道是否有其他方法可以实现它。最好/最推荐的实施方式是什么？提前致谢。

问候，

K·海因

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T07:29:47.057

globals 和 singleton 都会使解析器的单元测试变得很痛苦。要对解析器在不同选项下的行为方式进行单元测试，您的测试需要修改全局变量。这种方法至少存在两个问题： 全局变量和您的类之间没有明确的关联。除了检查实现之外，读者无法判断您的类中使用了哪些全局变量以及它们如何影响行为。这样的全局变量不能是 const （因为它们是在 main 中设置的）。因此，您失去了沟通和强制执行的能力，即一旦创建解析器，选项的值就无法更改。

经典的单例甚至比全局更糟糕，因为它使您无法替换实现并且通常完全阻碍测试。

一个不错的方法是注入一个 const 对象，该对象将选项存储到解析器构造函数。但是不要把命令行解析逻辑放在这个对象中，否则你将无法方便地在测试中使用该对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T10:23:25.573

要扩展 Jan 的答案，您将拥有如下功能：

```
bool my_parser(const parser_options &options); 
```

`parser_options`类型可以是简单的结构，例如：

```
struct parser_options
{
    FILE *source_file;
    bool warnings_as_errors;
    std::shared_ptr<error_handler> eh;
    ...
}; 
```

`error_handler`可以这样定义：

```
struct error_handler
{
    virtual void error(int code, const char *message) = 0;
    virtual void warning(int code, const char *message) = 0;
    virtual ~error_handler() {}
}; 
```

然后该程序将执行以下操作：

```
int main(int argc, const char *argv)
{
    parser_options options;
    // process argc/argv options here, adding them to options, e.g.:
    //     case WARN_AS_ERROR: options.warnings_as_errors = true; break;
    return my_parser(options, &error) ? ERROR_SUCCESS : ERROR_FAILURE;
} 
```

`my_parser`这允许您编写直接调用的测试，`parser_options`独立于命令行处理进行设置，并允许`error_handler`指定不同的（例如，以机器可读的形式格式化信息）。

注意：这并不是一个完美的解析器设计，它只是一个如何设计这样的东西的例子。

注意：如果应用程序可以配置为控制流水线（例如无优化、打印内部 AST、内部表示、汇编代码、预处理器输出），此设计对于测试并不是严格必要的。但是，该设计更加灵活，因为它允许不同的程序使用它而无需直接调用命令行程序（GUI 应用程序/IDE、静态分析工具等）。

# python - 使用 __new__ 来自现有对象的 Python 对象

> ID：12658824
> 
> 赞同：15
> 
> 时间：2012-09-30T05:12:53.250
> 
> 标签：python, object, types, instantiation

在学习 Python 的数据模型时，我正在使用该`__new__`方法从现有对象创建对象。以下是一些创建各种类型的新对象的示例：

```
x = 2;     print type(x).__new__(x.__class__)
x = {};    print type(x).__new__(x.__class__)
x = [1,2]; print type(x).__new__(x.__class__)
x = 2.34;  print type(x).__new__(x.__class__)
x = '13';  print type(x).__new__(x.__class__)
x = 1.0j;  print type(x).__new__(x.__class__)
x = True;  print type(x).__new__(x.__class__)
x = (1,2); print type(x).__new__(x.__class__) 
```

但是，以下三个实验给了我错误：

```
x = None;           print type(x).__new__(x.__class__)
x = lambda z: z**2; print type(x).__new__(x.__class__)
x = object;         print type(x).__new__(x.__class__) 
```

错误是（分别）：

```
TypeError: object.__new__(NoneType) is not safe, use NoneType.__new__()
TypeError: Required argument 'code' (pos 1) not found
TypeError: type() takes 1 or 3 arguments 
```

为什么这三个例子不起作用？（注意：对于该`lambda`示例，我似乎在调用该`__new__`方法时必须传入一个代码片段，但我不知道该怎么做。）我使用的是 Python 2.6。

请注意，我意识到这不一定是您希望在实际代码中创建新对象的方式，但我的目的并不实际，而是要了解低级对象方法是如何工作的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-30T05:32:49.510

这没什么特别的，只是对于某些类型有一个该类型的默认“空”对象，而对于其他类型则没有。您的工作示例基本上等同于：

```
int()
dict()
list()
float()
str()
complex()
tuple() 
```

. . . 所有这些都有效。您的最后三个示例基本上是尝试创建 NoneType、`function`和的新实例`type`。

1.  NoneType 由于一个独特的原因而失败，因为 None 是一个单例 --- NoneType 类型只能有一个实例，即 None 对象。（您收到的具体错误消息有点奇怪，但如果您这样做，`types.NoneType()`您会收到一条更直接的消息，说“无法创建 NoneType 实例”。）
2.  `function`失败是因为，如您所见，它需要一个参数，而您没有提供一个参数。您需要的是一个代码对象，您可以从现有函数或`compile`函数中获取它。（它还需要一个`globals`参数，它可以只是一个字典。）
3.  `type`失败是因为你没有给出足够的论据。您可以`type(foo)`获取 foo 的类型，也`type(name, bases, dict)`可以创建新类型（即类）。

请注意，在上一个示例中，您使用的类型是`object`，它本身就是一种类型。如果您这样做`x = object()`（使 x 成为单个对象而不是对象类型），那么它将起作用并创建一个“空白”对象。

要记住的是，召唤`__new__`并不是那么神奇。当您直接尝试通过执行来实例化类型时，就会发生这种情况`someType()`。如果该类型需要参数，则调用`__new__`将失败，就像如果您不给它正确的参数，任何其他函数调用都会失败一样，因为`type(x).__new__`它只是一个与任何其他函数一样的函数。您可以通过用户定义的类看到这一点：

```
>>> class Foo(object):
...     pass
>>> x = Foo();           print type(x).__new__(x.__class__)
<__main__.Foo object at 0x00EB0370>
>>> class Foo(object):
...     def __init__(self, someArg):
...         pass
>>> class Foo(object):
...     def __new__(cls, someArg):
...         return super(Foo, cls).__new__(cls)
>>> x = Foo(2);           print type(x).__new__(x.__class__)
Traceback (most recent call last):
  File "<pyshell#32>", line 1, in <module>
    x = Foo(2);           print type(x).__new__(x.__class__)
TypeError: __new__() takes exactly 2 arguments (1 given) 
```

在第一种情况下它成功了，因为我的课不需要参数；它在第二堂课中失败了，因为第二堂课确实需要参数。

`__new__`不会因任何秘密原因而失败；它只是失败了，因为您尝试实例化的类型需要参数才能构造实例。（这个`None`案例是这里唯一不同的案例；那个案例确实因为特殊原因而失败，因为`None`它是 Python 中的一个特殊对象。）

# iphone - 在 iOS 6.0 中打开 Apple 地图并立即开始从当前位置到家的路线

> ID：12658826
> 
> 赞同：4
> 
> 时间：2012-09-30T05:13:15.207
> 
> 标签：iphone, ios, ios6, ios6-maps

我想在我的应用程序中创建一个链接，该链接基本上将被标记为“带我回家”。按下时，我希望它打开 Apple Maps，从当前位置路由到家，并开始逐个导航。

我找到了这个方案，但它并没有完成我所希望的一切：

```
http://maps.apple.com/maps?saddr=%f,%f&daddr=%f,%f 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-27T11:48:43.170

这是打开带有路线的地图的工作代码（包括显示适用于 iOS5 的 Google 地图的选项）

```
-(IBAction)showMapApp:(id)sender
{

CLLocationCoordinate2D coordinate = CLLocationCoordinate2DMake(self.location.latitude,self.location.longitude);

//create MKMapItem out of coordinates
MKPlacemark* placeMark = [[MKPlacemark alloc] initWithCoordinate:coordinate addressDictionary:nil];
MKMapItem* destination =  [[MKMapItem alloc] initWithPlacemark:placeMark];

if([destination respondsToSelector:@selector(openInMapsWithLaunchOptions:)])
{
    //using iOS6 native maps app
    if(_mode == 1)
    {
        [destination openInMapsWithLaunchOptions:@{MKLaunchOptionsDirectionsModeKey:MKLaunchOptionsDirectionsModeWalking}];

    }
    if(_mode == 2)
    {
        [destination openInMapsWithLaunchOptions:@{MKLaunchOptionsDirectionsModeKey:MKLaunchOptionsDirectionsModeDriving}];

    }
    if(_mode == 3)
    {
        [destination openInMapsWithLaunchOptions:@{MKLaunchOptionsDirectionsModeKey:MKLaunchOptionsDirectionsModeDriving}];

    }

} else{

    //using iOS 5 which has the Google Maps application
    NSString* url = [NSString stringWithFormat: @"http://maps.google.com/maps?saddr=Current+Location&daddr=%f,%f", self.location.latitude, self.location.longitude];
    [[UIApplication sharedApplication] openURL: [NSURL URLWithString: url]];
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-10T11:27:46.990

使用这个对我来说它工作正常::

```
NSString* url = [NSString stringWithFormat: @"http://maps.apple.com/maps?saddr=44.521358,11.374080&daddr=44.518640,11.362665"];
[[UIApplication sharedApplication] openURL: [NSURL URLWithString: url]]; 
```

# windows - 从 Metro 应用程序关闭 Windows 8

> ID：12658828
> 
> 赞同：1
> 
> 时间：2012-09-30T05:13:41.300
> 
> 标签：windows, windows-8, microsoft-metro, shutdown

我正在为 Windows 8 开发 Metro 应用程序。作为其功能的一部分，我需要从 Metro 应用程序启动关闭 Winodws 8。以下是问题：

1）首先，我对这个主题进行了很多研究，我发现 System.Diagnostics.Process 不适用于 Metro App。那么，有没有另一种方法呢？

2）即使我不能直接关机，有没有办法从Metro App触发？

我更喜欢 C# 中的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T09:34:30.657

在 Windows 应用商店（又名 Metro）应用程序中无法做到这一点。此类应用程序的功能受到严格限制，不可能影响操作系统的工作方式或影响同一台机器上运行的其他进程。

如果您使用托管语言进行编程，这些限制将通过*省略来强制执行。*您希望使用的 .NET 框架类只是丢失了。如果您使用像 C++ 这样的本地语言进行编程，那么您可以尝试使用 winapi 来解决它。但这也不起作用，Windows 应用商店应用程序在沙箱中运行，只是导致 api 调用失败。与 Internet Explorer 的保护模式功能非常相似，安全模式被命名为“App Container”。并且由商店筛选程序强制执行，即使您确实在沙箱中发现了一个漏洞，您也无法通过验证器，也无法将其发布到应用商店中。

这里的关键点是编写商店应用程序来重新启动机器是没有意义的。因为没有这样的应用程序*可以做*任何需要重启的事情。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-30T21:00:23.440

要关闭或重新启动 Windows 8，只需执行以下命令：

关闭：

```
%windir%\System32\shutdown.exe /s /t 0 
```

重启：

```
%windir%\System32\shutdown.exe /r /t 0 
```

# java - 在 Java 中查找 eclipse/jdt 的 jar 依赖项

> ID：12658829
> 
> 赞同：3
> 
> 时间：2012-09-30T05:14:01.813
> 
> 标签：java, eclipse, jar, dependencies, eclipse-jdt

我正在尝试编译[Eclipse JDT - 抽象语法树 (AST) 和 Java 模型 -](http://www.vogella.com/articles/EclipseJDT/article.html)使用命令行的教程。

`plugins`我根据eclipse indigo目录中的名称匹配提出了这个命令行。

```
javac -cp .:\
org.eclipse.core.runtime_3.7.0.v20110110.jar:\
org.eclipse.equinox.common_3.6.0.v20110523.jar:\
org.eclipse.core.commands_3.6.0.I20110111-0800.jar:\
org.eclipse.core.resources_3.7.100.v20110510-0712.jar:\
org.eclipse.jface.text_3.7.1.r371_v20110825-0800.jar:\
org.eclipse.jdt.core_3.7.1.v_B76_R37x.jar:\
org.eclipse.jdt_3.7.1.v201109091335.jar \
SampleHandler.java 
```

问题是我仍然得到这 4 个错误。

```
SampleHandler.java:19: cannot find symbol
symbol  : class Document
location: package org.eclipse.jface.text
import org.eclipse.jface.text.Document;
                             ^
SampleHandler.java:28: cannot access org.eclipse.core.runtime.jobs.ISchedulingRule
class file for org.eclipse.core.runtime.jobs.ISchedulingRule not found
    IProject[] projects = root.getProjects();
                              ^
SampleHandler.java:87: cannot find symbol
symbol  : class Document
location: class handlers.SampleHandler
    Document doc = new Document(unit.getSource());
    ^
SampleHandler.java:87: cannot find symbol
symbol  : class Document
location: class handlers.SampleHandler
    Document doc = new Document(unit.getSource());
                       ^
4 errors 
```

我有更多错误，但在[这个提示](http://dev.eclipse.org/mhonarc/lists/imp-dev/msg00309.html)的帮助下，我可以添加`org.eclipse.equinox.common_3.6.0.v20110523.jar`以删除许多错误。

似乎 jar 名称可能无法反映包导入名称。我怎么知道应该添加哪些 jar 文件来消除错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T04:38:19.460

我发现[http://www.jarfinder.com](http://www.jarfinder.com)非常有用。使用这个站点，我可以给出类名来查找可用 Eclipse 版本的 jar 名称。

例如，我可以搜索 org.eclipse.jface.text.Document

![在此处输入图像描述](../Images/b8039b7ad6ca60136f969fa0a87d5675.png)

通过单击类，我可以识别 jar 文件的名称。

![在此处输入图像描述](../Images/812eb0b217cd9d0cb640d5432d2528a3.png)

即使最新的 Eclipse 信息不可用，我也能猜到 jar 名称。

# jquery - Javascript图像裁剪不同的形状

> ID：12658831
> 
> 赞同：1
> 
> 时间：2012-09-30T05:14:32.937
> 
> 标签：jquery, image-processing, jquery-plugins, crop, jcrop

我正在开发一个需要使用各种形状进行图像裁剪的应用程序，例如：我上传了一张图像，用户获得的十字准线选择可能是人脸或汽车的形状或爱的形状等。类似于[https://www.mystickerface.com/gettingstarted](https://www.mystickerface.com/gettingstarted)。请花点时间在这里上传一张小图。

是否有任何开箱即用的 javascripts 库可以用于此目的。我看到的 Jcrop 和其他一些只提供矩形选择。

请让我知道有关如何实施的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T05:22:53.417

可以使用 html5 画布或旧技巧来完成。如果要“裁剪”不规则形状，请创建一个图像并将不规则形状填充为透明，其余颜色与背景相同，然后将形状覆盖在要使其不规则的图像部分的顶部，如果需要，请使用更高`z-index`。

查看[如何生成产品的颜色变化](https://stackoverflow.com/questions/9358922/how-to-generate-color-variations-of-the-product/9359131#9359131)。

# php - 第一个选项为空白的 php 下拉列表填充

> ID：12658832
> 
> 赞同：1
> 
> 时间：2012-09-30T05:15:01.590
> 
> 标签：php, mysql

有人可以告诉我是否有可能在填充下拉列表后添加“空白选项”？

```
echo '<select name="dropdown" style="width:150px">';
            while($rec=mysql_fetch_array($run1))
                {
                $value = $rec['route'];
                echo "<option value=\"$value\">$value</option>";
                }
        echo '</select>'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T05:16:58.770

为什么不能提前做？

```
echo '<select name="dropdown" style="width:150px">';
echo '<option value=""></option>';
            while($rec=mysql_fetch_array($run1))
                {
                $value = $rec['route'];
                echo "<option value=\"$value\">$value</option>";
                }
        echo '</select>'; 
```

或者如果你真的需要它（不知道为什么），只需`selected`在`<option>`

```
echo '<select name="dropdown" style="width:150px">';
                while($rec=mysql_fetch_array($run1))
                    {
                    $value = $rec['route'];
                    echo "<option value=\"$value\">$value</option>";
                    }
            echo '<option value="" selected="selected"></option>';
            echo '</select>'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T05:19:26.907

在你的`while`块之后，只需添加一个额外的`echo`：

```
echo "<option value=\"$value\"></option>"; 
```

如前所述，通常最好在您的 while 循环之前执行此操作，因此默认值为空白。这样你就可以捕捉到用户何时/如果用户忘记选择一个选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T05:17:02.300

简单的技巧，在 while 循环之后添加额外的行。

```
while($rec=mysql_fetch_array($run1))
{
   $value = $rec['route'];
   echo "<option value=\"$value\">$value</option>";
}
echo "<option value=\"$value\"></option>"; 
```

# mpi - 在具有不同登录 ID 的两台主机上运行 MPI 程序

> ID：12658833
> 
> 赞同：1
> 
> 时间：2012-09-30T05:15:05.820
> 
> 标签：mpi

我可以访问两台 linux 机器。在机器 A 上，我的用户名为 abc，在机器 B 上，我的用户名为 pqr。从主机 A 到主机 B 的 ssh 访问是开放的。如何从主机 A 运行同时使用主机 B 处理器的 MPI 程序？（特别是有没有办法可以在主机文件中指定远程用户名？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T05:44:43.937

在主机文件中指定用户名`user@adress`应该可以工作，还请记住，您需要无密码的 SSH 或 rsa 才能使 mpi 功能正常工作

# java - 在活动之间切换会引发线程错误

> ID：12658834
> 
> 赞同：0
> 
> 时间：2012-09-30T05:15:36.493
> 
> 标签：java, android, sdk

我制作了一个有两个窗口的应用程序，当我从主窗口转到首选项时，一切都很好，但是当我尝试返回主活动时，应用程序崩溃，线程已启动错误。

```
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(new GameView(this));
    startService(new Intent(this, MyService.class));

}

public void onResume(){
    super.onResume();

}
// Initiating Menu XML file (menu.xml)
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater menuInflater = getMenuInflater();
    menuInflater.inflate(R.layout.menu, menu);
    return true;
}

public void onBackPressed() {
    super.onBackPressed();
    stopService(new Intent(this, MyService.class));
    Intent intent = new Intent(Intent.ACTION_MAIN);
    intent.addCategory(Intent.CATEGORY_HOME);
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(intent);
} 
```

更新：这是来自 LogCat 的日志（我正在使用 Eclipse）：

```
09-30 11:59:17.348: D/AndroidRuntime(2917): Shutting down VM
09-30 11:59:17.348: W/dalvikvm(2917): threadid=1: thread exiting with uncaught exception (group=0x40aa7210)
09-30 11:59:17.368: E/AndroidRuntime(2917): FATAL EXCEPTION: main
09-30 11:59:17.368: E/AndroidRuntime(2917): java.lang.IllegalThreadStateException: Thread already started.
09-30 11:59:17.368: E/AndroidRuntime(2917):     at java.lang.Thread.start(Thread.java:1045)
09-30 11:59:17.368: E/AndroidRuntime(2917):     at com.examples.todolist.GameView$1.surfaceCreated(GameView.java:45) 
```

ManiFest 文件（来自它的活动）：

```
<application

    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <service 
        android:name="MusicService"
        android:enabled="true">

    </service>
    <activity

        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="PreferencesActivity"></activity>
    <service android:enabled="true" android:name=".MyService" />
</application> 
```

在我的项目中，我有 MainActivity.java - 这是主窗口，PreferencesActivity.java - 这是首选项窗口，GameView.java - 负责绘制内容和 GameManager.java - 控制 FPS。在游戏视图中，我有 main、onDraw 和 onTouch 事件。以下是 GameView 的主要内容：

```
public GameView(Context context) {
    super(context);
    gameLoopThread = new GameManager(this);
    holder = getHolder();
    holder.addCallback(new SurfaceHolder.Callback() {
        public void surfaceDestroyed(SurfaceHolder holder) {
            boolean retry = true;
            gameLoopThread.setRunning(false);
            while (retry) {
                try {
                    gameLoopThread.join();
                    retry = false;
                } catch (InterruptedException e) {
                }
            }
        }

        public void surfaceCreated(SurfaceHolder holder) {
            gameLoopThread.setRunning(true);
            gameLoopThread.start();
        }

        public void surfaceChanged(SurfaceHolder holder, int format,
                int width, int height) {
        }
    });
    bmp = BitmapFactory.decodeResource(getResources(),
            R.drawable.ic_launcher);
    bmp1 = BitmapFactory.decodeResource(getResources(),
            R.drawable.wall_sprite);
} 
```

这是一个gameManager.java，因为我发现它与运行有关。我仍然试图弄清楚如何使线程（或屏幕？）被破坏，然后再做一次。

公共类 GameManager 扩展线程 {

```
static final long FPS = 30;

private GameView view;

private boolean running = false;

// class constructor
public GameManager(GameView view) {
    this.view = view;
}

public void setRunning(boolean run) {
    running = run;
}

public void run() {
    long ticksPS = 1000 / FPS;
    long startTime;
    long sleepTime;
    while (running) {
        Canvas c = null;
        startTime = System.currentTimeMillis();
        try {
            c = view.getHolder().lockCanvas();
            synchronized (view.getHolder()) {
                view.onDraw(c);
            }
        } finally {
            if (c != null) {
                view.getHolder().unlockCanvasAndPost(c);
            }
        }
        sleepTime = ticksPS - (System.currentTimeMillis() - startTime);
        try {
            if (sleepTime > 0)
                sleep(sleepTime);
            else
                sleep(10);
        } catch (Exception e) {
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T00:29:31.297

Ok here is the deal, surfaceCreated() seems to hold a thread, and that thread can only be started once and only once. That is the immediate issue.

```
public void surfaceCreated(SurfaceHolder holder) {
            gameLoopThread.setRunning(true);
            // This is unsafe
            gameLoopThread.start();
} 
```

Without knowing the entire design of your app there are a few ways this can be triggered multiple times.

A Surface can be created, destroyed and then a new surface can be created. In this case, the GameView would have the same thread reference and try to start it again. So you have Activity-A with SurfaceView. Creates Surface, then you start another activity, your surface view will probably be destroyed around the time of the onPause(). You finish your Preferences and come back to your activity, onResume() gets called and your surface will be recreated ... firing twice. This is all assuming that your app goes something like this: Activity -> PreferencesActivity -> original Activity.

You seem to start another task so I am unsure why you do that, but the old activity is still on the backstack, so if it resumes, it will probably recreate the surface.

Not sure what GameManager is required for but it looks like a run loop of some sort. You can either make sure it isn't started if it already is. Or if there is a case where there may be desired separate GameManager instances, you could keep track of multiple instances and make sure not to start them again.

# hbase - 当我配置 HBase 时，遇到了一个我找不到线索的错误

> ID：12658835
> 
> 赞同：1
> 
> 时间：2012-09-30T05:16:03.500
> 
> 标签：hbase

我在配置HBase的时候遇到了这个bug，我认为bug在：

```
distMode=`$bin/hbase --config "$HBASE_CONF_DIR" org.apache.hadoop.hbase.util.HBaseConfTool hbase.cluster.distributed` 
```

所以我将`echo "alert(4)"`头部添加到hbase，但我找不到`alert(4)`。

# 开始-hbase.sh（片段）

```
echo "alert(1)"

#start hbase daemons
errCode=$?
if [ $errCode -ne 0 ]
then
  exit $errCode
fi

echo "alert(1.5)"
echo $HBASE_CONF_DIR
echo org.apache.hadoop.hbase.util.HBaseConfTool
echo hbase.cluster.distributed

distMode=`$bin/hbase --config "$HBASE_CONF_DIR" org.apache.hadoop.hbase.util.HBaseConfTool hbase.cluster.distributed`

echo "alert(2)"
echo $distMode 
```

# 系统打印

```
bob1@master:~$ hbase-0.94.0/bin/start-hbase.sh 
START_JAVA_HOME
alert(1)
alert(1.5)
/home/bob1/hbase-0.94.0/conf
org.apache.hadoop.hbase.util.HBaseConfTool
hbase.cluster.distributed
Exception in thread "main" java.lang.NoClassDefFoundError: /usr/lib/jvm/java-6-sun-1/6/0/24
Caused by: java.lang.ClassNotFoundException: .usr.lib.jvm.java-6-sun-1.6.0.24
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
Could not find the main class: /usr/lib/jvm/java-6-sun-1.6.0.24\.  Program will exit.
alert(2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-01T10:06:32.750

导出 HBASE_HOME=/PATH_TO_INSTALL/hbase-0.95.2-hadoop2/

在启动 HBase 之前

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T10:14:38.730

请检查您的 /home/bob1/hbase-0.94.0/conf/hbase-env.sh 文件。

它具有以下选项来为您的 HBase 环境设置 JAVA_HOME。

`# The java implementation to use. Java 1.6 required. export JAVA_HOME=/usr/lib/jvm/java-6-sun-1.6.0.24`

还要在 .profile 文件中设置 JAVA_HOME。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-30T05:44:45.943

尝试配置您的默认 jdk。

```
sudo update-alternatives --install /usr/bin/java java /usr/lib/jvm/java/jdk1.6.0_16/bin/java 300 //the second param is the java path of jdk you setup and want to use
sudo update-alternatives --install /usr/bin/javac javac /usr/lib/jvm/java/jdk1.6.0_16/bin/javac 300
sudo update-alternatives --config java 
sudo update-alternatives --config javac 
```

按照说明选择一个 jdk 作为默认值。

# mysql - 有没有办法为 MySQL 中的每个数据库设置密码？

> ID：12658837
> 
> 赞同：4
> 
> 时间：2012-09-30T05:16:27.523
> 
> 标签：mysql, sql, database, grant, user-data

有没有办法为 MySQL 服务器中的每个数据库设置密码。如果有，请给出一些建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T05:19:55.943

您不能在 MySQL 数据库上设置密码。您可以为每个数据库、表等授予权限的用户设置密码。

[创建用户语法](http://dev.mysql.com/doc/refman/5.1/en/create-user.html)

```
CREATE USER 'jeffrey'@'localhost' IDENTIFIED BY 'mypass'; 
```

[GRANT 语法](http://dev.mysql.com/doc/refman/5.1/en/grant.html)

```
GRANT ALL ON db1.* TO 'jeffrey'@'localhost';
GRANT SELECT ON db2.invoice TO 'jeffrey'@'localhost';
GRANT USAGE ON *.* TO 'jeffrey'@'localhost' WITH MAX_QUERIES_PER_HOUR 90; 
```

这应该可以帮助您入门。

# git - 推送时出现 Git 错误：对象 15abe3addde5ad5f7d25e8f0f220d2e9faf3cb22：包含指向 null 的条目

> ID：12658838
> 
> 赞同：14
> 
> 时间：2012-09-30T05:16:41.603
> 
> 标签：git, version-control, git-submodules

我不知道我是怎么把自己弄到这个烂摊子里的。但是我`error: object 15abe3addde5ad5f7d25e8f0f220d2e9faf3cb22:contains entries pointing to null`在尝试将我的存储库推送到 GitHub 时遇到了问题。全力推动：

```
[ashinn@puppet1 puppet]$ git push
计数对象：27，完成。
Delta 压缩最多使用 2 个线程。
压缩对象：100% (11/11)，完成。
写入对象：100% (16/16)，5.67 KiB，完成。
总共 16 个（增量 6），重复使用 14 个（增量 4）
错误：对象 15abe3addde5ad5f7d25e8f0f220d2e9faf3cb22：包含指向 null sha1 的条目
致命：对象错误
error: unpack failed: index-pack 异常退出
到 git@github.com:andyshinn/puppet.git
 ！[远程拒绝] ganglia -> ganglia（解包器错误）
 ！[远程拒绝] master -> master（解包器错误）
错误：未能将一些参考推送到 'git@github.com:andyshinn/puppet.git'
一切都是最新的
```

Git ls-tree 显示我的 sudo 模块是一个空 sha1：

```
[ashinn@puppet1 puppet]$ git ls-tree 15abe3addde5ad5f7d25e8f0f220d2e9faf3cb22
...
160000 提交 2cc9d02b3cf27d6a06d85612c03710aa0d90149c ssh
160000 提交 6961179007dce76d7fb9bd1fc361273acb4129a7 标准库
160000 提交 00000000000000000000000000000000000000000 sudo
040000 树 2bd16a8fab440081a876f64d720b5b4d9d119bc9 sysctl
040000 树 01439b5a20363dccdf3f7103aab701fa7f4b3cd9 模板
...

```

列出`ssh`的`stdlib`、 和`sudo`是外部 git repos 的子模块。文件夹`sysctl`和`template`是 repo 中的文件夹。

我已经尝试删除模块并重新添加它，但现在似乎无法推送任何提交。我做了一些搜索，发现很少有错误。如何解决此错误？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T22:05:55.213

我终于能够解决这个问题。这是我为解决它所做的：

在文章[https://help.github.com/articles/remove-sensitive-data](https://help.github.com/articles/remove-sensitive-data)中有一个标题为**Purge the file from your repo**。我按照他们的示例删除了 Rakefile，但使用了有问题的文件夹：

`git filter-branch --index-filter 'git rm -r --cached --ignore-unmatch modules/sudo' --prune-empty --tag-name-filter cat -- --all`

由于有问题的树是我添加`-r`到命令中的文件夹。结果是清除了 sudo 模块的所有提交，因此对象*15abe3addde5ad5f7d25e8f0f220d2e9faf3cb22*消失了！提交更改后，推送成功。我后来能够毫无问题地重新添加损坏的模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T12:33:18.300

尝试将 github 存储库（裸）克隆到另一个本地目录。然后将其添加为遥控器并尝试推送到该遥控器。如果这失败了，那么你的问题可能是本地的。（这将是我的猜测）

如果没有，我仍然会尝试克隆您的“工作存储库”并尝试从该克隆推送到您之前添加的本地远程。

如果这没有帮助，您可以重命名/备份您的 github 存储库并创建一个新存储库，或者必须联系 github 支持。

# opencv - 多视图几何

> ID：12658839
> 
> 赞同：5
> 
> 时间：2012-09-30T05:16:47.677
> 
> 标签：opencv, computer-vision, multiview, projective-geometry

我从两个相同品牌的相机拍摄的两张图像相距一定距离，捕捉相同的场景。我想计算两个相机之间的真实世界旋转和平移。为了实现这一点，我首先提取了两幅图像的 SIFT 特征并进行匹配。

我现在有**基本矩阵**和**单应矩阵**。然而无法继续前进，很多混乱。谁能帮我估计两个相机之间**的旋转和平移？**

我正在使用 OpenCV 进行特征提取和匹配、单应性计算。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T11:24:24.507

如果你有 Homography 那么你也有旋转。一旦你有了单应性，就很容易得到旋转和平移矩阵。

例如，如果您使用的是 OpenCV c++：

```
param[in] H
param[out] pose
void cameraPoseFromHomography(const Mat& H, Mat& pose)
{
    pose = Mat::eye(3, 4, CV_32FC1);      // 3x4 matrix, the camera pose
    float norm1 = (float)norm(H.col(0));  
    float norm2 = (float)norm(H.col(1));  
    float tnorm = (norm1 + norm2) / 2.0f; // Normalization value

    Mat p1 = H.col(0);       // Pointer to first column of H
    Mat p2 = pose.col(0);    // Pointer to first column of pose (empty)

    cv::normalize(p1, p2);   // Normalize the rotation, and copies the column to pose

    p1 = H.col(1);           // Pointer to second column of H
    p2 = pose.col(1);        // Pointer to second column of pose (empty)

    cv::normalize(p1, p2);   // Normalize the rotation and copies the column to pose

    p1 = pose.col(0);
    p2 = pose.col(1);

    Mat p3 = p1.cross(p2);   // Computes the cross-product of p1 and p2
    Mat c2 = pose.col(2);    // Pointer to third column of pose
    p3.copyTo(c2);       // Third column is the crossproduct of columns one and two

    pose.col(3) = H.col(2) / tnorm;  //vector t [R|t] is the last column of pose
} 
```

此函数从包含旋转的单应性计算相机位姿。有关进一步的理论信息，请遵循此[线程](https://dsp.stackexchange.com/a/2737/1473)。

# asp.net - 创建字典以将枚举映射到事件

> ID：12658840
> 
> 赞同：1
> 
> 时间：2012-09-30T05:16:51.640
> 
> 标签：asp.net, events, dictionary, delegates

我正在尝试创建一个字典来将枚举映射到具有相同签名的一组事件。我写 ：

```
public enum Events {Insert, Update, Delete};

// this part makes errors
Dictionary<Events,EventHandler<T>> EventsDic = new Dictionary<Events,EventHandler<T>>()
{
     { Events.Insert , this.ItemInserted}
}; 
```

怎么了 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T05:34:35.033

问题是`T`必须用类型替换，因为您要声明一个变量。`T`必须是`value`字典中的类型，或者在您的特定情况下，事件参数的类型。既然你特别说你想存储事件，`T`应该是好的旧的`EventArgs`. 您的代码应如下所示：

```
Dictionary<Events,EventHandler<EventArgs>> EventsDic = new Dictionary<Events,EventHandler<EventArgs>>()
{
     { Events.Insert , this.ItemInserted}
}; 
```

# r - 如何在 R 的 xpath 中使用变量？

> ID：12658845
> 
> 赞同：0
> 
> 时间：2012-09-30T05:17:43.987
> 
> 标签：r

当我解析一个网络文件时，它工作正常，

```
tdata=xpathApply(data,"//table[@id='PL']") 
```

我想在 xpathApply 中使用变量，

```
x="PL"
tdata=xpathApply(data,"//table[@id=x]") 
```

它不能工作，如何用变量在 xpathApply 中编写 xpath 表达式？

考虑达森的建议，

```
x="PL"
y=paste0("//table[@id='",x,"']")
tdata=xpathApply(data,y) 
```

还可以，就是觉得丑，怎么写更美？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T12:18:48.157

gsubfn 包可以在某种程度上按照 Perl 的方式进行字符串插值，如果我们在参数包含替换的函数前面加上`fn$`. 这里`$x`的意思是代入 的值`x`。请参阅 ?fn 和[gsubfn 主页](http://gsubfn.googlecode.com)。

```
library(gsubfn)
x <- "PL"
tdata <- fn$xpathApply(data, "//table[@id='$x']") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T11:33:30.440

@Dason 的使用`paste`或类似的建议很可能是唯一的方法。如果你觉得它难看，你可以通过创建你自己的函数来扫它：

```
my.xpathApply <- function(data, x) xpathApply(data, paste0("//table[@id='",x,"']"))
tdata <- my.xpathApply(data, "PL") 
```

毕竟，你必须使用很多在`paste`某处使用的包函数，所以你应该可以拥有自己的一个:-)

# android - 仅当 listView 不为空时才向 listView 添加页脚

> ID：12658847
> 
> 赞同：0
> 
> 时间：2012-09-30T05:18:11.197
> 
> 标签：android

我正在使用自定义 listView 并尝试添加页脚。但是，即使没有数据，页脚也会出现。我正在使用的代码如下：

```
 View footer = View.inflate(this, R.layout.footer_xml, null);
       listView.addFooterView(footer); 
```

有没有办法仅在列表非空时显示页脚？此外，如果我以上述方式添加页脚，它似乎是 OnItemClickListener 中列表视图的一部分。我不希望这种情况发生，因为我希望仅当用户准确单击页脚图像时才启动某些操作。我知道我可以使用

```
ImageView b = (ImageView)footer.findViewById(R.id.my_list_button);
b.setOnClickListener(this); 
```

但仅当在 listView 的 onItemClickListner 中未触发任何操作时。

# java - 从 JAR 文件运行程序时视频不起作用

> ID：12658852
> 
> 赞同：0
> 
> 时间：2012-09-30T05:19:02.237
> 
> 标签：java, video, netbeans, jar

我使用 Xuggler，我使用了视频文件的绝对路径，当我在 Netbeans 中运行时它运行良好，但是当我从 jar 文件启动它时，视频没有出来.. 这里是代码

```
File file = new File("C:\\qssinfo\\video\\Wildlife.avi");
decodeAndPlayVideo.PlayVideo(file); 
```

这是 DecodeAndPlayVideo 类的代码，（我从 xuggler 那里得到的，我编辑了一点）

```
public class DecodeAndPlayVideo {
private ImageComponent mScreen;
private IStreamCoder videoCoder;
private IContainer container;

@SuppressWarnings("deprecation")
public DecodeAndPlayVideo(ImageComponent mScreen) {
    this.mScreen = mScreen;
}

@SuppressWarnings("deprecation")
public void PlayVideo(String filename) {
    if (!IVideoResampler.isSupported(
        IVideoResampler.Feature.FEATURE_COLORSPACECONVERSION)) {
        throw new RuntimeException("you must install the GPL version"
            + " of Xuggler (with IVideoResampler support) for "
            + "this demo to work");
    }

    container = IContainer.make();

    if (container.open(filename, IContainer.Type.READ, null) < 0) {
        throw new IllegalArgumentException("could not open file: " + filename);
    }

    int numStreams = container.getNumStreams();
    int videoStreamId = -1;

    for (int i = 0; i < numStreams; i++) {
        IStream stream = container.getStream(i);
        IStreamCoder coder = stream.getStreamCoder();

        if (coder.getCodecType() == ICodec.Type.CODEC_TYPE_VIDEO) {
            videoStreamId = i;
            videoCoder = coder;
            break;
        }
    }

    if (videoStreamId == -1) {
        throw new RuntimeException("could not find video stream in container: "
            + filename);
    }

    if (videoCoder.open() < 0) {
        throw new RuntimeException("could not open video decoder for container: "
            + filename);
    }

    IVideoResampler resampler = null;
    if (videoCoder.getPixelType() != IPixelFormat.Type.BGR24) {
        resampler = IVideoResampler.make(videoCoder.getWidth(),
                                        videoCoder.getHeight(), IPixelFormat.Type.BGR24,
                                        videoCoder.getWidth(), videoCoder.getHeight(), videoCoder.getPixelType());
        if (resampler == null) {
            throw new RuntimeException("could not create color space "
                + "resampler for: " + filename);
        }
    }

    IPacket packet = IPacket.make();
    long firstTimestampInStream = Global.NO_PTS;
    long systemClockStartTime = 0;
    while (container.readNextPacket(packet) >= 0) {
        if (packet.getStreamIndex() == videoStreamId) {
            IVideoPicture picture = IVideoPicture.make(videoCoder.getPixelType(),
                                                    videoCoder.getWidth(), videoCoder.getHeight());

            int offset = 0;
            while (offset < packet.getSize()) {
                int bytesDecoded = videoCoder.decodeVideo(picture, packet, offset);
                if (bytesDecoded < 0) {
                    throw new RuntimeException("got error decoding video in: "
                        + filename);
                }
                offset += bytesDecoded;

                if (picture.isComplete()) {
                    IVideoPicture newPic = picture;
                    if (resampler != null) {
                        newPic = IVideoPicture.make(resampler.getOutputPixelFormat(),
                                                    picture.getWidth(), picture.getHeight());
                        if (resampler.resample(newPic, picture) < 0) {
                            throw new RuntimeException("could not resample video from: "
                                + filename);
                        }
                    }
                    if (newPic.getPixelType() != IPixelFormat.Type.BGR24) {
                        throw new RuntimeException("could not decode video"
                            + " as BGR 24 bit data in: " + filename);
                    }

                    if (firstTimestampInStream == Global.NO_PTS) {
                        firstTimestampInStream = picture.getTimeStamp();
                        systemClockStartTime = System.currentTimeMillis();
                    } else {
                        long systemClockCurrentTime = System.currentTimeMillis();
                        long millisecondsClockTimeSinceStartofVideo =
                            systemClockCurrentTime - systemClockStartTime;
                        long millisecondsStreamTimeSinceStartOfVideo =
                            (picture.getTimeStamp() - firstTimestampInStream) / 1000;
                        final long millisecondsTolerance = 50; // and we give ourselfs 50 ms of tolerance
                        final long millisecondsToSleep =
                                (millisecondsStreamTimeSinceStartOfVideo
                                    - (millisecondsClockTimeSinceStartofVideo
                                    + millisecondsTolerance));
                        if (millisecondsToSleep > 0) {
                            try {
                                Thread.sleep(millisecondsToSleep);
                            } catch (InterruptedException e) {
                                return;
                            }
                        }
                    }

                    BufferedImage javaImage = Utils.videoPictureToImage(newPic);
                    updateJavaWindow(javaImage);
                }
            }
        } else {
            do {
            } while (false);
        }

    }
    close();
}

private void updateJavaWindow(BufferedImage javaImage) {
    mScreen.setImage(javaImage);
}

public void close() {
    if (videoCoder != null) {
        videoCoder.close();
        videoCoder = null;
    }
    if (container != null) {
        container.close();
        container = null;
    }
} 
```

请你帮帮我，我有一个月的筹码X（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T05:38:29.880

你说：

> 我已经阅读了一些有关编译 JAR 的信息，例如 getResourceAsStream etc2，但文件位于 BIN 文件夹中，我想使用上面示例中的绝对文件。

如果您的文件在 BIN 文件夹中，那么它很可能在 jar 文件中并且*不能作为文件访问*。相反，通过访问它作为相对于类文件位置的资源来做应该做的事情，您的代码将有更好的工作机会。

顺便说一句，当上面代码中的路径为时，我很好奇文件在 BIN 文件夹中的位置`"C:\\qssinfo\\video\\Wildlife.avi"`

**编辑**
另一个问题：您的 jar 文件的清单设置是否正确，以便它所依赖的视频库 jar 文件位于其类路径中？

例如，您的 jar 清单文件是否包含以下行：

```
Class-Path: xuggle-xuggler.jar 
```

或类似的东西，这个 jar 文件是否在您的 jar 文件的同一目录中（或者实际上，它是否在用户目录中）？

# php - 读取行并更改不包含某些单词且不以点结尾的行

> ID：12658856
> 
> 赞同：2
> 
> 时间：2012-09-30T05:19:27.633
> 
> 标签：php

我想逐行读取文件夹中的一些文本文件。例如 1 txt ：

```
Fast and Effective Text Mining Using Linear-time Document Clustering
Bjornar Larsen WORD2 Chinatsu Aone
SRA International AK, Inc.
4300 Fair Lakes Cow-l Fairfax, VA 22033

{bjornar-larsen, WORD1 
```

我想删除不包含单词 = `word`, `word2`, `word3`, 并且不以点结尾的行`.`

所以。从示例中，结果将是：

```
Bjornar Larsen WORD2 Chinatsu Aone
SRA International, Inc.
{bjornar-larsen, WORD1 
```

我很困惑，怎么去掉这条线？这可能吗？或者我们可以用空格替换它们吗？

这是代码：

```
$url = glob($savePath.'*.txt');
foreach ($url as $file => $files) {
    $handle = fopen($files, "r") or die ('can not open file');
    $ori_content= file_get_contents($files);
    foreach(preg_split("/((\r?\n)|(\r\n?))/", $ori_content) as $buffer){
        $pos1 = stripos($buffer, $word1);
        $pos2 = stripos($buffer, $word2);
        $pos3 = stripos($buffer, $word3);
        $last = $str[strlen($buffer)-1];//read the las character
        if (true !== $pos1 OR true !== $pos2 OR true !==$pos3 && $last != '.'){
        //how to remove
        }
    }
} 
```

请帮助我，非常感谢你:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T05:28:50.517

您正在使用`!== true`比较来测试`stripos`. `!== true`表示“不绝对等于布尔值 true”。的返回值`stripos`是数字，除非这个词不存在，在这种情况下它是`false`. 换句话说，你的条件总是错误的。

尝试更新它以`=== false`代替使用。此外，您`OR`在两者之间使用；您的示例表明它只需要包含其中 1 个 - 因此，如果您检查“没有找到它们”，则需要使用`&&`所有内容：

```
if (($pos1 === false) && ($pos2 === false) && ($pos3 === false) && ($last != '.')) 
```

关于“如何删除线”，您需要保留所有要保留的线的列表。这意味着，我们实际上想要*翻转*上面的条件以使用`!== false`和`||`介于所有内容之间（因为我们想要保留与任何规则匹配的所有行）。

尝试这样的事情：

```
$url = glob($savePath.'*.txt');
foreach ($url as $file => $files) {
    $handle = fopen($files, "r") or die ('can not open file');
    $ori_content= file_get_contents($files);
    $linesToKeep = array(); // list of all lines that match our rules
    foreach(preg_split("/((\r?\n)|(\r\n?))/", $ori_content) as $buffer){
        $pos1 = stripos($buffer, $word1);
        $pos2 = stripos($buffer, $word2);
        $pos3 = stripos($buffer, $word3);
        $last = $str[strlen($buffer)-1];

        if (($pos1 !== false) || ($pos2 !== false) || ($pos3 !== false) || ($last == '.')) {
            $linesToKeep[] = $buffer; // save this line
        }
    }
    // process list of lines for this file;
    // file_put_contents($files, join("\r\n", $linesToKeep)); // write back to file
    // $lines = join("\r\n", $linesToKeep); // convert to string to manipulate
} 
```

现在，您将在`$linesToKeep`数组中拥有与您的规则集匹配的每一行。您可以使用 将其转换回字符串`$lines = join("\r\n", $linesToKeep);`，或者遍历它并根据需要进行处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T05:28:35.540

不错的方法...但是您可以使用`arrays`读取文件并将其放入文件中。到现在为止还好。

### PS：可以有更好的方法来做......

```
$url = glob($savePath.'*.txt');
foreach ($url as $file => $files) {
    $handle = fopen($files, "r") or die ('can not open file');
    $ori_content= file_get_contents($files);

    # Declare a variable array to store the contents.
    $fileContents = array();

    foreach(preg_split("/((\r?\n)|(\r\n?))/", $ori_content) as $buffer){
        $pos1 = stripos($buffer, $word1);
        $pos2 = stripos($buffer, $word2);
        $pos3 = stripos($buffer, $word3);
        $last = $str[strlen($buffer)-1];//read the las character
        if (($pos1 !== false) || ($pos2 !== false) || ($pos3 !== false) || ($last == '.')){
            $fileContents[] = $buffer;
        }
    }

    # Put the contents
    file_put_contents($file, implode(PHP_EOL, $fileContents);

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T05:47:29.207

尝试

```
$url = glob($savePath.'*.txt');
foreach ($url as $file => $files) {
  $lines = file($files);
  foreach ($lines as $key=>$line) {
    if (!preg_match('/(word|word2|word3)/i', $line) && substr($line, -1) != '.') {
      unset($lines[$key]);
    }
  }
  $ori_content = implode("\n", $lines);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T05:25:43.620

您需要创建一个辅助缓冲区。

```
$url = glob($savePath.'*.txt');
foreach ($url as $file => $files) {
    $handle = fopen($files, "r") or die ('can not open file');
    $ori_content= file_get_contents($files);
    /* Create our second buffer */
    $buffer2 = "";
    foreach(preg_split("/((\r?\n)|(\r\n?))/", $ori_content) as $buffer){
        $pos1 = stripos($buffer, $word1);
        $pos2 = stripos($buffer, $word2);
        $pos3 = stripos($buffer, $word3);
        $last = $str[strlen($buffer)-1];//read the last character
        /* This will only execute if the three words and a trailing period are _not_ found */
        if ($pos1 === false && $pos2 === false && $pos3 === false && $last != '.') {
            $buffer2 .= $buffer . PHP_EOL;
        }
    }
}
echo $buffer2; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-30T05:30:34.740

我只会使用爆炸：

```
$handle = fopen($files, "r") or die ('can not open file');
$ori_content = file_get_contents($files);

$lines = explode ( '\n' , $ori_content );

foreach ( $lines AS $line )
{
 if (strpos ( $line , 'word' ) !== false OR strpos ( $line , 'word2' ) !== false OR strpos ( $line , 'word3' ) !== false OR substr ( $line , -1 ) == '.')
  {
   $newParagraph = $line . '\n';
  }
}

echo $newParagraph; 
```

比您尝试做的要简单得多。

# ruby-on-rails - 嵌套资源的 RoR 路径在索引中不起作用

> ID：12658857
> 
> 赞同：1
> 
> 时间：2012-09-30T05:19:29.717
> 
> 标签：ruby-on-rails, ruby

我正在 Ruby on Rails 3 上开发一个应用程序，我遇到了为嵌套资源生成路径的 __path 函数*的问题*

如果我将表扬和支持作为成员对象（即使用@）发送，则函数 edit_praise_support_path() 有效，但如果**支持**变量是 each/do 循环中的迭代器，则该函数不起作用，它会引发路由错误：

> 没有路线匹配 {:action=>"edit", :controller=>"supports", :praise_id=>#}

```
**MODEL classes**
class Praise < ActiveRecord::Base
  self.table_name = 'praise'
  self.primary_key = 'sid'
  belongs_to :user,  :foreign_key => 'creatorSid'
  has_many :praise_supports,  :foreign_key => :praiseSid
end

class PraiseSupport < ActiveRecord::Base
  self.table_name = 'praise_support'
  self.primary_key = 'sid'
  belongs_to :praise
end 
```

赞美控制器.rb

```
class SupportsController < ApplicationController
  before_filter :load_praise

  # GET /praises
  # GET /praises.json
  def index
    @praise_supports = @praise.praise_supports.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @praise_supports }
    end
  end

  # GET /praises/1
  # GET /praises/1.json
  def show
    @praise_support = PraiseSupport.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @praise_support }
    end
  end

  # GET /praises/new
  # GET /praises/new.json
  def new
    @praise_support = @praise.praise_supports.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @praise_support }
    end
  end

  # GET /praises/1/edit
  def edit
    @praise_support = PraiseSupport.find(params[:id])
  end

  def create
    @praise_support = @praise.praise_supports.new(params[:praise_support])

    respond_to do |format|
      if @praise_support.save
        format.html { redirect_to @praise, notice: 'Praise Support was successfully created.' }
        format.json { render json: @praise_support, status: :created, location: @praise_support }
      else
        format.html { render action: "new" }
        format.json { render json: @praise_support.errors, status: :unprocessable_entity }
      end
    end

  end

  # PUT /praises/1
  # PUT /praises/1.json
  def update
    @praise_support = PraiseSupport.find(params[:id])

    respond_to do |format|
      if @praise.update_attributes(params[:praise_support])
        format.html { redirect_to @praise_support, notice: 'PraiseSupport was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @praise_support.errors, status: :unprocessable_entity }
      end
    end
  end

  def destroy
    @praise_support = @praise.praise_supports.find(params[:id])
    @praise_support.destroy

    respond_to do |format|
      format.html { redirect_to praises_support_url }
      format.json { head :no_content }
    end
  end

  private
    def load_praise
      @praise = Praise.find(params[:praise_id])
    end
end 
```

表扬控制器.rb 使用的视图文件

```
**VIEW files**
#show.html.erb, THIS WORKS FINE
<%= link_to 'Edit', **edit_praise_support_path(@praise, @praise_support)** %> |
<%= link_to 'Back', praise_supports_path %>

#index.thml.erb, THIS DOES NOT WORK!!
<% @praise_supports.each do |praise_support| %>
  <tr>
    <td><%= praise_support.sid %></td>
    <td><%= praise_support.body %></td>
    <td><%= link_to 'Edit', **edit_praise_support_path(@praise, praise_support)** %></td>
    <td><%= link_to 'Destroy', praise_support, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %> 
```

根定义

```
 get "supports/create"

  get "praise_support/create"

  resources :praises do
    resources :supports
  end

  get "home/index"

  resources :users
  resources :sessions, :only => [:new, :create, :destroy]

  root :to => 'home#index'

  match ':controller(/:action(/:id))(.:format)'

  match '/betasignup' => 'users#betasignup', :as => 'betasignup'
  match '/signin' => 'sessions#create', :as => 'signin'
  match '/signout' => 'sessions#destroy', :as => 'signout' , via: :delete 
```

和 rake 路由结果

```
 supports_create GET    /supports/create(.:format)                      supports#create
praise_support_create GET    /praise_support/create(.:format)                praise_support#create
      praise_supports GET    /praises/:praise_id/supports(.:format)          supports#index
                      POST   /praises/:praise_id/supports(.:format)          supports#create
   new_praise_support GET    /praises/:praise_id/supports/new(.:format)      supports#new
  edit_praise_support GET    /praises/:praise_id/supports/:id/edit(.:format) supports#edit
       praise_support GET    /praises/:praise_id/supports/:id(.:format)      supports#show
                      PUT    /praises/:praise_id/supports/:id(.:format)      supports#update
                      DELETE /praises/:praise_id/supports/:id(.:format)      supports#destroy
              praises GET    /praises(.:format)                              praises#index
                      POST   /praises(.:format)                              praises#create
           new_praise GET    /praises/new(.:format)                          praises#new
          edit_praise GET    /praises/:id/edit(.:format)                     praises#edit
               praise GET    /praises/:id(.:format)                          praises#show
                      PUT    /praises/:id(.:format)                          praises#update
                      DELETE /praises/:id(.:format)                          praises#destroy
           home_index GET    /home/index(.:format)                           home#index
                users GET    /users(.:format)                                users#index
                      POST   /users(.:format)                                users#create
             new_user GET    /users/new(.:format)                            users#new
            edit_user GET    /users/:id/edit(.:format)                       users#edit
                 user GET    /users/:id(.:format)                            users#show
                      PUT    /users/:id(.:format)                            users#update
                      DELETE /users/:id(.:format)                            users#destroy
             sessions POST   /sessions(.:format)                             sessions#create
          new_session GET    /sessions/new(.:format)                         sessions#new
              session DELETE /sessions/:id(.:format)                         sessions#destroy
                 root        /                                               home#index
                             /:controller(/:action(/:id))(.:format)          :controller#:action
           betasignup        /betasignup(.:format)                           users#betasignup
               signin        /signin(.:format)                               sessions#create
              signout DELETE /signout(.:format)                              sessions#destroy 
```

这也不起作用（从表扬控制器调用的视图）

```
<% @praises.each do |praise| 
    praise_support = praise.praise_supports.new
    %>
    <%= form_for(praise_support, :html => {:id => 'PraiseSupportForm', :class => 'form-inline'}) do |f|  %>
    <div class="label-text">More proof</div> <%= text_area_tag  :support, nil, :id => 'support', :class=>'input-xlarge', :rows=>'1' %>
    <% end %>
<% end %>

#ERROR THROWN:
#No route matches {:controller=>"supports", :format=>nil} 
```

# ruby-on-rails - 从 ActionView::TestCase 继承的类的单元/助手是什么？

> ID：12658858
> 
> 赞同：1
> 
> 时间：2012-09-30T05:19:45.523
> 
> 标签：ruby-on-rails, testing, helpers

我在 Rails Guides 或 Agile Web Development with Rails 中找不到这些类通常称为 HelperTest 的任何提及。搜索网络似乎表明大多数人使用它们来测试助手。但是为什么脚手架会为每个模型类创建一个呢？为什么它被置于 test\units 之下？如果有一个很好的例子说明应该在哪里以及如何使用这些，我将不胜感激。如果不使用脚手架生成的此类帮助文件，仅删除它们是错误的吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T06:48:55.827

正如您所指出的，脚手架生成器（此处为“帖子”）在以下位置创建辅助测试`test/unit/helpers`：

```
test
├── fixtures
│   └── posts.yml
├── functional
│   └── posts_controller_test.rb
├── integration
├── performance
│   └── browsing_test.rb
├── test_helper.rb
└── unit
    ├── helpers
    │   └── posts_helper_test.rb
    └── post_test.rb 
```

它们是单元测试，因为助手只是应该单独测试的方法；此外，如果您认为视图应该保持轻量级，那可能意味着帮助程序最终会产生大量逻辑，并且应该像您的模型一样进行测试。

所以，给定这个助手（在 app/helpers/posts_helper.rb 中）

```
module PostsHelper

  def hello
    content_tag :div, :class => "detail" do
      "hi"
    end
  end
end 
```

你可以这样写一个测试：

```
require 'test_helper'

class PostsHelperTest < ActionView::TestCase

  test "hello" do
    assert_equal(hello, "<div class=\"detail\">hi</div>")
  end

end 
```

它们只是方法，因此请使用与任何单元测试 ( `assert_equal`, `assert_match`) 中相同的匹配器；`assert_dom_equal`在这里也派上用场。（见[http://cheat.errtheblog.com/s/assert_dom_equal/](http://cheat.errtheblog.com/s/assert_dom_equal/)

我希望这有帮助 ：）

凯尔

# javascript - 如何使用 JavaScript 或 jQuery 阻止 IP 地址？

> ID：12658862
> 
> 赞同：0
> 
> 时间：2012-09-30T05:21:09.750
> 
> 标签：javascript, jquery

我的网站使用[www.Spruz.com](http://www.computersolutions.Spruz.com)网络。我不打算使用 PHP 或 SSL 阻止方法，因为我不能按原样使用。我似乎找不到 JavaScript 或 jQuery 代码来隐藏 DIV 元素或重定向，而无需使用 PHP 或 SSL 方法。我受到了外国垃圾邮件发送者/广告商的攻击，这些垃圾邮件发送者/广告商正在攻击我的信使等等。我需要阻止一些 IP，但我迷路了。我怎样才能实现我的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T05:27:51.480

我建议您为此使用服务器端脚本。我认为您误解了 javascript 的实际作用。Javascript 是一种客户端脚本语言，这意味着它在客户端计算机上运行。因此，尽管您可以隐藏 div，但只需更改 css 属性即可显示所有内容（普通用户不会这样做，您不能对恶意用户说任何话）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T00:47:54.223

在试图弄清楚这一点之前，我只是为了笑声将“spruz web blocking”输入谷歌。第一次点击是[http://my.spruz.com/forums/?page=post&id=9B8BE09C-1D18-4C9D-8510-C1D3035BDA44&lastp=1](http://my.spruz.com/forums/?page=post&id=9B8BE09C-1D18-4C9D-8510-C1D3035BDA44&lastp=1) ...看起来它详细解释了如何做你想做的事服务器端。我实际上并没有对其进行测试或详细调查，他们实施了我认为正确的方法，但似乎值得一试。

正如其他人所表达的那样，客户端阻止只会稍微惹恼严重的垃圾邮件发送者。逻辑是 a) 向他们发送请求的页面，然后 b) 让页面识别它们处于敌对环境中并自毁。一旦垃圾邮件发送者已经拥有页面 (a)，他们可以在页面自毁 (b)*之前*快速拍摄快照，然后为所欲为。（事实上​​，他们可能会使用类似“wget”的东西来获取原始页面并跳过页面执行并完全显示，无论你做什么。）另一方面，正确编码的服务器端解决方案永远不会将页面发送到首先是那个IP地址，所以他们唯一能做的就是假装别人来欺骗你。

（有一种非常标准的方法可以使用“apache”网络服务器轻松完成这类事情，但我认为这与 spruz 无关。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T05:28:55.130

理想情况下，您可以访问您的 PHP 或任何服务器端语言，以便您可以从那里运行 IP 块。如果不能，您可以尝试此处的解决方案通过 JavaScript 获取 IP： [如何仅使用 javascript 获取客户端的 IP 地址？](https://stackoverflow.com/questions/391979/get-client-ip-using-just-javascript)

但最好的解决方案可能是使用 reCAPTCHA 或其他一些垃圾邮件拦截脚本来重建被滥用的任何形式。

# assembly - ARMv6 汇编语言

> ID：12658867
> 
> 赞同：3
> 
> 时间：2012-09-30T05:22:17.830
> 
> 标签：assembly, armv6

有谁知道如何在 ARMv6 汇编语言中开始注释（例如，'#'、';'、'/'、'/*'）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T05:25:24.713

应该 ”;” 根据我在[维基百科文章中找到的一些示例代码：](http://en.wikipedia.org/wiki/ARM_architecture)

```
 loop  CMP  Ri, Rj   ; set condition "NE" if (i != j),
                        ;               "GT" if (i > j),
                        ;            or "LT" if (i < j)
    SUBGT  Ri, Ri, Rj   ; if "GT" (greater than), i = i-j;
    SUBLT  Rj, Rj, Ri   ; if "LT" (less than), j = j-i;
    BNE  loop           ; if "NE" (not equal), then loop 
```

# iphone - 如何为 UITextView 设置限制大小？

> ID：12658868
> 
> 赞同：0
> 
> 时间：2012-09-30T05:22:17.973
> 
> 标签：iphone, objective-c, uitextview, limit, ios6

我需要帮助在 UITextView 中显示有限的文本

目前我从服务器获取超过 1000 个字符的文本。但我只需要显示 250 个字符，并且......最后在 UItextView 中。此外，我在 UITextView 中禁用了更多编辑。那么实现这一点的最佳方法是什么

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T15:25:53.720

你可以这样做：

```
 UITextView *your_txtView;

if ([YourServerString length]>=250) {

    YourServerString = [[YourServerString substringToIndex:249] stringByAppendingString:@"..."];

}
your_txtView.userInteractionEnabled = NO;
your_txtView.text = YourServerString; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T05:36:58.973

`UITextViewTextDidChangeNotification`如果接收到的字符串大于 250 个字符，您可以注册并将其修剪为 250 个字符。您可以禁用从 IB 编辑文本视图。

# python - 在python中将两个连接的客户端相互连接

> ID：12658870
> 
> 赞同：0
> 
> 时间：2012-09-30T05:22:40.627
> 
> 标签：python, sockets, file-io, io

我正在尝试使用像 python 中的代理服务器这样的中央服务器，这样当一台计算机向服务器询问另一台连接到用户帐户下的服务器的计算机时。

在 python 中，我使用套接字连接将客户端连接到服务器，并且我试图将文件从客户端 A 获取到客户端 B，而不将文件存储在中央服务器上。

客户端可以使用中央服务器来传递文件，但我更愿意在两个客户端之间创建连接，只使用服务器来保存用户客户端系统的列表。

最终，我在这方面很灵活，只要文件在服务器上存储的时间不超过传输文件所需的时间。我从不希望将文件保存到磁盘上。

# c++ - lua 5.2.1 未解决的外部

> ID：12658874
> 
> 赞同：1
> 
> 时间：2012-09-30T05:23:15.617
> 
> 标签：c++, windows, lua

我正在使用 Visual Studio 2012，当我尝试编译时，出现以下错误：

```
Error   7   error LNK1120: 6 unresolved externals   C:\Users\MS\Documents\Visual Studio 2012\Projects\LuaTest\Release\LuaTest.exe   LuaTest
Error   4   error LNK2001: unresolved external symbol _lua_close    C:\Users\MS\Documents\Visual Studio 2012\Projects\LuaTest\LuaTest\main.obj  LuaTest
Error   5   error LNK2001: unresolved external symbol _lua_pcallk   C:\Users\MS\Documents\Visual Studio 2012\Projects\LuaTest\LuaTest\main.obj  LuaTest
Error   6   error LNK2001: unresolved external symbol _lua_settop   C:\Users\MS\Documents\Visual Studio 2012\Projects\LuaTest\LuaTest\main.obj  LuaTest
Error   2   error LNK2001: unresolved external symbol _luaL_loadfilex   C:\Users\MS\Documents\Visual Studio 2012\Projects\LuaTest\LuaTest\main.obj  LuaTest
Error   1   error LNK2001: unresolved external symbol _luaL_newstate C:\Users\MS\Documents\Visual Studio 2012\Projects\LuaTest\LuaTest\main.obj LuaTest
Error   3   error LNK2001: unresolved external symbol _luaopen_base C:\Users\MS\Documents\Visual Studio 2012\Projects\LuaTest\LuaTest\main.obj  LuaTest 
```

源代码取自 [这里](http://blog.acamara.es/2012/08/14/running-a-lua-5-2-script-from-c/)。

使用以下库版本：[lua-5.2.1_Win32_dll10_lib.zip](http://sourceforge.net/projects/luabinaries/files/5.2.1/Windows%20Libraries/Dynamic/)

我尝试了不同的 lua52.lib 文件，但所有这些文件都出现了这些错误。有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T07:18:12.797

您使用的是 Visual Studio 2012，但[这里的](http://sourceforge.net/projects/luabinaries/files/5.2.1/Windows%20Libraries/Dynamic/)库文件仅支持 Visual Studio 2010。

无论如何，Lua 很小而且很容易编译。我真的建议您在 Visual Studio 中包含 Lua[源文件](http://www.lua.org/ftp/)而不是库。

# java - 如何在java中对齐文本文件的列？

> ID：12658876
> 
> 赞同：1
> 
> 时间：2012-09-30T05:24:03.137
> 
> 标签：java, string, text-alignment

我有一个包含 8 列的文本文件。这些列必须左对齐。我已经使用 Formatter.format() 进行了尝试。但它没有用。文件是..

```
test.txt        0      0        ছোট       JJ      B-JJP      o        -

test.txt        0      1        ছেলের      NN      B-NP       o        -

test.txt        0      2        জন্মতিথি     NN      B-NP       o       - 
```

我试过的代码是..

```
/****s1,s2.. contains the token(string) of each line of the file***/
fm.format("%-25s  %-3s  %3s  %-30s  %-5s  %-8s %-20s  %-15s",
    s1,s2,s3,s4,s5,s6,s7,s8);

str=fm.toString();
line.set(i, str); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T08:28:44.253

您使用的孟加拉语字体不是等宽字体（固定宽度字符）。您看到的结果是正常的；尝试使用非等宽字体输出英文文本，您会看到类似的结果。

无法将其输出到终端并实现所需的间距。您需要使用基于图形的输出方法，并且可以将每个输出列定位在固定位置（即 PDF）。

# java - 对于 JPanel 元件 ActionListener，paintComponent() 和 actionPerformed() 不同步

> ID：12658877
> 
> 赞同：2
> 
> 时间：2012-09-30T05:24:07.007
> 
> 标签：java, swing, concurrency, timer, jpanel

我正在尝试制作一个运行动画的应用程序。为此，我有一个 Jframe，其中包含我的 Jpanel 子类，动画在其中运行。这是我的两门课：

首先，这是我的驱动程序类：

```
import javax.swing.*;

public class Life {
    public static void main(String[] args){
         JFrame game = new JFrame("Life");

         game.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
         game.setSize(500, 500);

         MainPanel mainPanel = new MainPanel();
         game.setContentPane(mainPanel);

         game.setVisible(true);

     }
 } 
```

其次，这是我的 Jpanel 子类：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class MainPanel extends JPanel implements ActionListener{
    int i = 0;
    int j = 0;
    public MainPanel(){
        super();
    }

    public void paintComponent(Graphics g){
        j++;
        g.drawLine(10,10, 20 + i, 20 + i);
        Timer t = new Timer(1000, this);
        t.start();
    }

    @Override
    public void actionPerformed(ActionEvent actionEvent) {
        i++;
        repaint();
    }
} 
```

请注意，每次调用 actionPreformed 时变量 i 都会递增，而每次调用 paintComponent 时都会调用变量 j。最终发生的事情是 i 开始比 j 大得多，而由paintComponent 绘制的线似乎以越来越快的速度增长。

以下是我的问题：

*   为什么会这样？
*   我怎样才能同步事情，以便每 1000 毫秒重绘一次？
*   鉴于我正在尝试做的事情，我的方法是错误的吗？我应该以不同的方式做事吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T05:27:09.907

不要从`paintComponent`方法中启动 Swing Timer。

这种方法应该做你的画，只有你的画，只有画。它应该绝对*不*包含程序逻辑。了解您对此方法的控制非常有限，因为您无法预测何时或是否会调用它，以及调用它的频率。你甚至不能自己调用​​它，或者保证当你*建议*它被调用时`repaint()`，它实际上会被调用。

此外，此方法必须快速，尽可能快，因为任何减慢它的速度，无论是对象创建还是读取文件都会降低您的 GUI 的感知响应能力，这是您最不想看到的事情。

解决方案是将程序逻辑从该方法中分离出来，并分成更好的方法，例如您的构造函数。重复代码应该在 Swing Timer 中。

编辑：
你说：

> 我这样做只是为了测试一下。还有一个问题：如果paintComponent 或paintComponent 中的工作所依赖的某个线程花费超过1000 毫秒（或其他任何时间）来完成它的工作，会发生什么情况？我唯一能想到的就是让paintComponent 绘制到目前为止的动画进度，而不是等待动画到达下一步（如果这有意义的话）。想法？

您*永远不*应该在 paintComponent 中使用需要那么长甚至 10 毫秒的代码。如果有发生类似情况的风险，则在后台线程中进行绘图并绘制到 BufferedImage，然后在 Swing 事件线程上使用该`Graphics#drawImage(...)`方法在 paintComponent 方法中显示 BufferedImage。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T05:42:08.977

@HFoE 的基本见解的一些小补充：

*   公共`start()`方法是确保在开始之前完全构建视图的便捷方法。
*   字段具有明确定义的[默认值](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.5)，它们[应该是`private`](https://stackoverflow.com/a/12631933/230513).
*   Swing GUI 对象应该*只*在[事件分派线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上构建和操作。
*   覆盖`getPreferredSize()`和`pack()`封闭`Window`.

修改后的代码：

```
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class Life {

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            private final JTabbedPane jtp = new JTabbedPane();

            @Override
            public void run() {
                JFrame game = new JFrame("Life");
                game.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                MainPanel mainPanel = new MainPanel();
                game.setContentPane(mainPanel);
                game.pack();
                game.setVisible(true);
                mainPanel.start();
            }
        });
    }

    private static class MainPanel extends JPanel implements ActionListener {

        private Timer t = new Timer(100, this);
        private int i;
        private int j;

        @Override
        public void paintComponent(Graphics g) {
            g.drawLine(10, 10, 20 + i, 20 + i);
        }

        public void start() {
            t.start();
        }

        @Override
        public void actionPerformed(ActionEvent actionEvent) {
            i++;
            repaint();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(500, 500);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T07:52:54.007

A`Timer`默认情况下继续运行。只有当你调用`setRepeats( false )`它才会停止。

所以以下几行

```
Timer t = new Timer(1000, this);
t.start(); 
```

在您的`paintComponent`方法中意味着经过几次重绘后，您将`Timer`运行许多实例，这解释了为什么`i`增加得那么快`j`。

解决方案当然是将您移到方法`Timer`之外`paintComponent`，并坚持一个`Timer`实例。

进一步的评论（其他人没有说，不会重复他们非常有用的建议）：

*   `paintComponent`永远不要在不调用方法的情况下重写`super`方法
*   你不应该暴露`ActionListener`接口。只需在`ActionListener`内部使用

# c++ - 背景减法器MOG 灵敏度

> ID：12658880
> 
> 赞同：3
> 
> 时间：2012-09-30T05:24:43.593
> 
> 标签：c++, opencv, computer-vision

我正在使用我这样声明的背景减法器：

```
BackgroundSubtractorMOG subtractor; 
```

现在我想使用带有非默认参数的减法器。我在以下声明中尝试了参数值组合的数量：

```
BackgroundSubtractorMOG subtractor = BackgroundSubtractorMOG(100, 10, 0.9 20); 
```

但是，我看不到由 产生的前景蒙版有任何区别`subtractor`，好像参数没有效果一样。

我没有正确设置参数吗？设置它们的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-09T20:23:40.280

我有同样的问题，似乎构造函数提供的参数不影响检测器，我用默认参数得到了很好的背景减法，但性能也很差。使用名为 BackgroundSubtractorMOG2 的变体，我获得了更好的性能结果，您可以像使用 BackgroundSubtractorMOG 一样使用它。 `cv::BackgroundSubtractorMOG2 mog; //--Update Background mog(frame,foreground,0.01);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:52:29.237

当您获得前景蒙版时，您是否设置了 learningRate？在我用于 Android 应用程序的 Java 版本的 OpenCV 中，我生成了前景掩码，如下所示：

```
subtractor.apply(mRgb, mFGMask, 0.1); 
```

这个 0.1 的学习率非常快。我认为需要 10 帧才能将我的输出蒙版完全变暗到黑屏。

# c# - C# 方法可以定义为采用的最大参数数是多少？

> ID：12658883
> 
> 赞同：76
> 
> 时间：2012-09-30T05:25:09.080
> 
> 标签：c#, .net, clr

我试图弄清楚 C# 中的方法可以拥有的最大参数数。我到处寻找答案，包括 C# 官方文档、MSDN 和一些 CLR 参考资料，但我找不到答案。有人对这个问题有答案吗？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-09-30T05:25:09.080

我使用一次性程序创建了一个程序来确定我可以传递给方法的最大参数数量。根据我的实验结果，我能找到的最接近答案的是以下（所有这些都只在我的电脑上有效）：

1.  可以编译、运行和调用包含具有 16383 个参数的方法的 .net 应用程序 (!)
2.  可以编译包含 16384 个或更多参数的 .net 应用程序，但运行此类程序会引发未声明的异常。
3.  也可以编译包含 50000 个参数的 .net 应用程序，但尝试运行这样的应用程序会导致引发 StackOverflowException。
4.  尝试编译包含 100000 个或更多参数的 .net 应用程序会导致 csc.exe 给出编译时错误，指出生成的表达式太长或太复杂而无法处理。

除此之外，有人对这个问题有明确的答案吗？

PS 如果有人想在自己的电脑上尝试这个实验，可以从我的测试程序开始，可以下载[https://docs.google.com/open?id=0B1Q3uRTkbsXic2cwUFpXanNkSk0](https://docs.google.com/open?id=0B1Q3uRTkbsXic2cwUFpXanNkSk0)

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2013-06-24T05:59:41.290

这是您的理论答案：

为了将方法参数推入堆栈，编译后的代码有以下 MSIL 操作码可供选择：

`ldarg.0`

`ldarg.1`

`ldarg.2`

`ldarg.3`

`ldarg.S`

`ldarg`

`ldarg.0`to`ldarg.3`用于将前 4 个方法参数压入堆栈（包括`this`作为实例方法的第一个参数）。

`ldarg.S`接受一个 8 位参数编号，因此它可用于将多达 256 个参数压入堆栈。

这给我们留下了简单的 old `ldarg`，它可以处理最多的方法参数：它需要一个无符号的 16 位参数编号，因此可以成功编译为有效 MSIL 的最大参数数量是`2^16 = 65,536`.

然而，正如其他人所指出的，实际限制将取决于运行时的实现细节。根据 rmiesen 的回答，当前的 .NET 实现似乎将参数的最大数量限制为`2^14`.

# php - 使用 Kerberos 的 Lighttpd

> ID：12658886
> 
> 赞同：1
> 
> 时间：2012-09-30T05:25:41.843
> 
> 标签：php, lighttpd, kerberos

我目前在我的 Linux Web 服务器上设置了 Kerberos 和密钥分发中心。从终端分配门票工作。

但是，我不知道如何使用 Lighttpd/PHP 设置 Kerberos，以使其为访问网站的客户端 Web 浏览器提供票证，或者首先从浏览器中检测这些票证。

# android - 在 Android 中创建自定义布局

> ID：12658895
> 
> 赞同：1
> 
> 时间：2012-09-30T05:27:23.927
> 
> 标签：android, android-layout

我是 android 新手，我的弹跳球游戏想要以下布局（见下图）。请告诉我要使用哪种布局。

* * *

![在此处输入图像描述](../Images/e34a8985d270cc067ef62bbd7aec93e4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T05:36:51.520

我将使用一分为二的垂直线性布局。

像这样的东西：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingLeft="16dp"
    android:paddingRight="16dp"
    android:orientation="vertical" >
        <Button
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:text="PlayingArea" />
        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="16dp"
            android:paddingRight="16dp"
            android:orientation="horizontal" >
                <Button
                    android:layout_width="100dp"
                    android:layout_height="wrap_content"
                    android:layout_gravity="right"
                    android:text="left_lower_box" />
                <Button
                    android:layout_width="100dp"
                    android:layout_height="wrap_content"
                    android:layout_gravity="right"
                    android:text="right_lower_box" />
            </LinearLayout>
</LinearLayout> 
```

这只是一个示例；您可能不会为您的应用程序使用按钮，您需要设置高度和宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T05:39:27.900

我建议您使用具有垂直方向的 LinearLayout，它分为两部分，一部分用于球反弹，另一部分用于设计乐谱布局。乐谱布局可以再次设计为带有水平方向的线性布局

# iphone - 在 NIAttributedLabel 中为链接设置属性

> ID：12658896
> 
> 赞同：2
> 
> 时间：2012-09-30T05:27:30.967
> 
> 标签：iphone, objective-c, ios, ipad, nimbus-ios

我已完成以下操作以使 NIAttributedLabel 中的链接具有不同的颜色：

```
NSMutableDictionary *attributes = [NSMutableDictionary dictionary];
        [attributes setValue:[UIColor colorWithRed:86.0/255.0 green:134.0/255.0 blue:172.0/255.0 alpha:1.0] forKey:NSForegroundColorAttributeName];
        [attributes setValue:[UIColor colorWithRed:0.0 green:136/255.f blue:204/255.f alpha:1.0] forKey:NSForegroundColorAttributeName];
        [self.commentsText_ setAttributesForLinks:attributes]; 
```

但我没有在链接中看到两种不同的颜色，而只是看到一种。我在这里做错了什么？基本上我有一个通过 addLink 添加的链接，如下所示：

```
[self.commentsText_ addLink:[NSURL URLWithString:url] range:usernameRange]; 
```

我希望它有红色。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T15:55:31.107

如果你想为不同的链接使用不同的颜色，那么你需要创建单独的属性字典，并使用不同的字典调用 setAttributesForLinks:。

```
 NSMutableDictionary *attributes1 = [NSMutableDictionary dictionary];
        [attributes setValue:[UIColor colorWithRed:86.0/255.0 green:134.0/255.0 blue:172.0/255.0 alpha:1.0] forKey:NSForegroundColorAttributeName];  
        [self.commentsText1_ setAttributesForLinks:attributes1];

        NSMutableDictionary *attributes2 = [NSMutableDictionary dictionary];
        [attributes setValue:[UIColor colorWithRed:0.0 green:136/255.f blue:204/255.f alpha:1.0] forKey:NSForegroundColorAttributeName];  
        [self.commentsText2_ setAttributesForLinks:attributes2]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T08:38:41.967

如果您想为不同的链接设置不同的颜色，那么您应该通过将 linkColor 设置为 nil 来禁用自动链接样式，然后将不同的样式显式应用于您的链接。

# android - 在 /system 上错误 chmod 后 Android 电话呼叫错误

> ID：12658897
> 
> 赞同：0
> 
> 时间：2012-09-30T05:27:50.343
> 
> 标签：android, sqlite, phone-call

首先，我知道这个问题并不完全属于这里，但我稍后会解释为什么我在这里而不是在特定的 android 板上提问。

我正在开发一个应用程序，昨天我在使用 sqlite 时遇到了一些问题，所以我继续检查我的数据库的样子。发现我的手机上实际上没有安装 sqlite3，所以我跟着[这个](https://stackoverflow.com/a/5022363/753012)回答安装它。我在推送部分遇到了一些问题，因此我尝试更改 /system 上的权限以尝试使其正常工作。我基本上在 adb shell 上运行“chmod 7777 /system”。之后我仍然无法将sqlite推送到手机上，所以我退出了shell并尝试再次打开它，但是我得到了一个没有权限的错误。当我解锁手机时，所有可能的应用程序（包括系统应用程序）都开始崩溃，一个接一个。我吓坏了，把电池取下来了。当时我通过 USB 将手机连接到 Ubuntu 电脑，但没有连接耳机。当我再次打开手机时，一切似乎都正常工作，我设法将 sqlite 推送到系统文件夹，没有任何问题。我认为问题已经结束并继续调试和开发。

当我回家时，我正在用耳机听一些音乐，一个朋友打电话给我。我回答但什么也听不见。后来我发现，从那以后我什么都听不见了，也没有人能听到我的声音。除调用外，其他所有与声音相关的功能都可以正常工作。我什至没有听到呼叫哔声。

所以这就是我在这里问的原因，因为它实际上是一个与开发和编码相关的问题。请，如果有人知道这可能是什么，请在这里回答，我已经尝试了很多方法让它再次工作，但没有一个工作。我读到这可能是与耳机相关的问题，但这似乎只发生在某些摩托罗拉手机或其他东西上。我有一个 Galaxy S Advance，3 或 4 个月大。我还尝试再次将 chmod 设置更改为 chmod 4755 /system，但它保持不变。我在这里变得非常绝望，我认为客户支持无法解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:24:27.130

由于还没有人回答，而且我认为这是一个对很多人来说太具体的错误，我将报告我所做的和发现的：

*   我更改了文件夹 /system 和 /system/app 中所有文件的权限，而不是递归的。
*   一位朋友后来告诉我，UNIX 系统有时会在执行权限过多的程序时出现问题
*   所有系统应用程序都拥有完整的 777 权限。

所以我多次重启设备，甚至对其进行了恢复出厂设置，但似乎没有任何效果。所以我再次开始更改权限。我尝试将所有内容更改为默认权限（我使用了相同型号的朋友设备作为参考），当我将系统/应用文件夹权限更改为 755 并重新启动时，它再次工作！

因此，对于所有不确切知道 UNIX 上的 chmod 和权限如何工作的人，在开始弄乱它之前请三思而后行。

# ios - iOS - QLPreviewController 延迟

> ID：12658906
> 
> 赞同：1
> 
> 时间：2012-09-30T05:29:52.733
> 
> 标签：ios, delay, qlpreviewcontroller

我有一个应用程序可以生成 PDF 并同时显示它。正如预期的那样，按下“生成 PDF”按钮和 QLPreviewController 呈现文档之间大约有 2 秒的延迟。不仅如此，它看起来好像文档会暂时淡入，冻结，然后完成淡入。

我知道延迟的原因是因为它首先生成 PDF，但应用程序的设计不允许任何其他机制。我希望在 QLPreviewController 视图出现之前放一个简短的“加载...”动画，但是到目前为止我尝试过的所有操作仍然会出现 2 秒的延迟。

任何人都可以就我在这里可以做的事情提供指导吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T21:17:58.200

有很多选择。我建议无论你做什么，它都是异步的。这将允许 UI 不会“冻结”，即使是 2 秒，您也可以打开加载屏幕。

有很多方法可以实现这一点。有些涉及实际的后台线程，有些则不涉及。

您可以使用委托、NSNotifications、块、NSOperations 和/或 Grand Central Dispatch。

[这是有关如何使用 Grand Central Dispatch 的教程](http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial)

[这是一个关于块的教程](http://www.raywenderlich.com/9438/how-to-use-blocks-in-ios-5-tutorial-part-2)

# php - 如何根据输入的值更改 Javascript 中的背景颜色

> ID：12658913
> 
> 赞同：0
> 
> 时间：2012-09-30T05:30:48.177
> 
> 标签：php, javascript

我正在尝试创建一个页面，当输入温度为 70 或高于 70 时，结果页面将变为红色，如果温度低于 70，则结果页面将变为蓝色。我已经为提交页面的第一部分代码提供了一个示例页面。我只是不希望文字变色，我希望整个页面根据温度变色。任何人都可以帮忙吗？

```
<html>
<body>
<?php
if (isset($_POST['temperature'])): //isset determines if var has valid contents, even empty string

    //if var is set, show what it contains
    $myFahrenheit = (int)$_POST['temperature']; //cast value sent via post to an integer

    $myCelsius = intval(($myFahrenheit-32) * (5/9)); //calc celsius
    echo '<h1><font color="blue">You entered ' . $myFahrenheit . ' in Fahrenheit!!</font><br />';
    echo '<h1><font color="red"> It is '. $myCelsius .' in celsius!!</font><br />';
    //put link on page to reset form
    print '<a href="' . $_SERVER['PHP_SELF'] . '">Reset page</a>';
else:
    //show form
?>
    <!--Note the server variable indicating the page we are on -->
    <form action="<? print $_SERVER['PHP_SELF']; ?>" method="post">
    Enter your temperature in Fahrenheit <input type="text" name="temperature"><br>
    <input type="submit" value="Show me the temperature in celsius!!">
    </form>
<?
endif;
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T05:35:15.353

我想一个简单的`<body>`样式会在这里工作吗？

```
<html>
<?php
    $style = '';
    if (isset($_POST['temperature']))
    {
        if ($_POST['temperature'] >= 70)
            $style = 'background-color: red;';
        else
            $style = 'background-color: blue;';
    }
?>
<body style="<?php echo htmlspecialchars($style); ?>"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T05:35:53.700

像这样使用它

```
<html>
<?php
if (isset($_POST['temperature'])) //isset determines if var has valid contents, even empty string
{//if var is set, show what it contains
$myFahrenheit = (int)$_POST['temperature']; //cast value sent via post to an integer
if($myFahrenheit > 70)
   echo "<body style='background-color:red;'>";
else
   echo "<body style='background-color:blue;'>";
$myCelsius = intval(($myFahrenheit-32) * (5/9)); //calc celsius
 echo '<h1><font color="blue">You entered ' . $myFahrenheit . ' in Fahrenheit!!    </font><br />';
echo '<h1><font color="red"> It is '. $myCelsius .' in celsius!!</font><br />';
//put link on page to reset form
print '<a href="' . $_SERVER['PHP_SELF'] . '">Reset page</a>';
}else{ //show form
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T05:37:38.457

```
if($myFahrenheit > 70)
  echo '<script>document.body.style.background = "red";</script>';
else
  echo '<script>document.body.style.background = "blue";</script>'; 
```

# java - 存储可修改数组的各种方式的效率

> ID：12658917
> 
> 赞同：2
> 
> 时间：2012-09-30T05:31:34.387
> 
> 标签：java, arrays

对于前段时间的编程课，我们被赋予了一个相对简单的任务，其本质可以归结为：

> *存储n 个*字符串的数组（**不是**列表），其中*n*始终 <= *m*，允许添加新字符串并删除旧字符串。（在本例中，*m*为 50）

 ***后来和我的朋友讨论这个问题时，我们意识到我们三个人都以不同的方式解决了这个问题。我的问题（出于好​​奇）是我们中的哪一个有最好的答案（所有事情都是平等的）以及为什么。

**朋友 A**去实现本质上是一个 ArrayList；创建一个具有不同大小的新数组，并使用`for`循环将原始数组中的所有元素放入新数组中（加上或减去他正在添加/删除的那个）。

**朋友 B简单地创建了一个长度为***m*的数组，通过将元素的值设置为 null 来删除元素（例如`array[13] = null`），并通过从索引 0 向前擦洗直到找到一个空点来添加元素（这是一个`for`循环）。

**Friend C [Me]还创建了一个长度为***m*的数组，但在删除字符串时将每个后续值向前移动（即通过`for`循环将其索引减 1），因此*n* -1 始终是最后一个值的索引（当*n* > 0），并且*n*也是添加新值的索引（消除`for`添加字符串的循环）。

这是一个相当基础的课程，只要我们做到了，他们就不关心我们是*怎么做到的，但我们很好奇。*

**编辑：**我刚刚意识到我遗漏了一些可能很重要的东西。*问题指定按值*（例如）而不是索引来删除字符串`removeString("someString")`，这也使得查找值（及其索引）成为一项要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T06:34:57.377

对我来说，你的版本是最有效的。就像你用`System.arraycopy`. 原因是 A 对于要添加的每个数组都有 for 循环。B 有两个 for 循环，而你只有一个。

我用你的版本创建了一个示例程序，`System.arraycopy`我认为这是最有效的方法。

```
import java.util.Arrays;

public class Sample {

private int currentIndex = 0;
private String[] strings = null;

public Sample(int length) {
    strings = new String[length];
}

public Sample(String[] strs) {
    if(strs == null)
        throw new NullPointerException();
    strings = strs;
}

public boolean add(String str) {
    if (currentIndex == strings.length)
        return false;
    strings[currentIndex++] = str;
    return true;

}

public boolean remove(int index) {
    if (index >= strings.length)
        return false;
    System.arraycopy(strings, index + 1, strings, index, (strings.length
            - index - 1));
    strings[--currentIndex] = null;
    return true;
}

public boolean remove(String value) {
    if (value == null || value.isEmpty()) {
        return false;// we are saved since value is null or empty;)
    }
    for (int count = 0; count < strings.length; count++) {
        if (value.equals(strings[count])) {
            remove(count);
            break;
        }
    }
    return true;
}

/**
 * @param args
 */
public static void main(String[] args) {
    Sample sample = new Sample(5);
    sample.add("a");
    sample.add("b");
    sample.add("c");
    sample.add("d");
    sample.add("e");
    sample.remove("a");

    System.out.println(Arrays.toString(sample.strings));

}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T05:50:29.097

可能没有正确的答案，因为您创建的数组最终会为系统实现。所以这取决于系统要求。但一般考虑效率：

*   朋友A的解决方案，对我来说似乎很讨厌。创建一个新数组来添加/删除一个元素会浪费内存和 CPU 周期。而且我相信这不是 ArrayList 在 Java 中的实现方式。

*   朋友 B 的解决方案与朋友 C 的解决方案具有相同的最坏情况时间复杂度，但它可能表现得更好。由于字符串的顺序并不重要，这看起来是最好的。

*   朋友 C 的解决方案，实际上也很有效。至于添加一个元素，你已经有了索引 ien 因此它应该也能很好地执行。

然而，正如我之前所说，它实际上取决于一个正在实施的系统。但总结一下，我应该说 A < B = C。

迪格维杰***

# java - 单利计算中利息计算器截断错误（涉及DecimalFormat）

> ID：12658919
> 
> 赞同：2
> 
> 时间：2012-09-30T05:31:56.890
> 
> 标签：java, floating-point, double

我为一个执行单利和复利计算的学术项目编写了一个程序。我遇到的问题是，如果数字没有除零以外的其他值作为“美分”（即，它不显示小数点——如果金额为例如 1750.00，它将显示），计算的单利会被截断最高为 1750），即使我在我的复利和单利方法中都使用了 DecimalFormat！

我已经广泛地调试了这个项目，我真的不知道到底发生了什么。

该计划的相关摘录如下：

```
 double p=1.0; // just some sample values for p, r, and y.
  double r=2.0;
  double y=3.0;
  double calculatedInterest = p + (p*(r/100)*y);
  String output = new String("Computed Simple Interest is: $");
  output = output + new DecimalFormat("#.##").format(calculatedInterest);
  return output; 
```

我在这里有完整的程序：

[http://pastebin.com/sgg0P5ZQ](http://pastebin.com/sgg0P5ZQ)

**[编辑] 故事的寓意**：如果您不阅读遇到问题或不理解的类的 JavaDoc，那么您将度过一段糟糕的时光。符号模式#.## 不仅仅是 DecimalFormat 的通用包罗万象，不同的符号模式做不同的事情。就我而言，有必要将 #.## 更改为 0.00 以查看我想要的十进制数字。非常感谢 jpe。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T05:40:32.437

查看[DecimalFormat 的 JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html)。您使用“#.##”之类的模式。的文档`#`说：

```
Symbol  Location    Localized?  Meaning 
#   Number  Yes     Digit, zero shows as absent 
```

您应该将您的模式替换为`0.00`.

# c# - 从历史的第三个窗口回到第一个窗口

> ID：12658922
> 
> 赞同：0
> 
> 时间：2012-09-30T05:33:10.340
> 
> 标签：c#, windows-phone-7

我正在开发一个 Windows Phone 应用程序，我有三个屏幕：

1.  主屏幕
2.  登录选择画面。
3.  登录屏幕。

当用户登录并按下“登录”按钮时，我想从屏幕 3 回到屏幕 1。现在我回到屏幕 2 并立即返回第一个屏幕。我不想显示 2 屏幕。

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T07:48:49.043

在第 3 页的某处添加

```
NavigationService.RemoveBackEntry(); 
```

这将从后堆栈中删除第 2 页。现在，当用户点击返回键时，他将直接向后导航到第 1 页。

但正如 Amal Dev 所指出的，微软希望你让用户导航到上一页。这条规则似乎并没有被强制执行太多，它可能意味着“永远不要混淆用户”。如果您混淆了认证测试人员，您的应用将无法通过认证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T07:54:32.440

试试这个

假设您的页面被命名为 FirstPage.xaml、SecondPage.xaml、ThirdPage.xaml

```
//Check for the first page and remove the remaining back stack in your ThirdPage.xaml

  while(!NavigationService.BackStack.First().Source.OriginalString.Contains("FirstPage"))
  {
      NavigationService.RemoveBackEntry();
  }

  NavigationService.GoBack(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-30T05:37:48.227

您可以使用该`NavigationService.Navigate`方法。

```
 NavigationService.Navigate(new Uri( string.Format("/your page name.xaml?val={0}", ValueTextBox.Text), UriKind.Relative)); 
```

请参考下面给出的链接。

[Windows Phone 7 中的简单导航](http://geekswithblogs.net/PeterTweed/archive/2010/05/17/simple-navigation-in-windows-mobile-7.aspx)

# xamarin.ios - 在 iOS6 上使用 zxing.Monotouch 时出现 MissingMethodException

> ID：12658926
> 
> 赞同：0
> 
> 时间：2012-09-30T05:34:56.827
> 
> 标签：xamarin.ios, ios6, zxing

我已将我的开发系统更新为新的 MonoTouch (6.0.1)，现在每当我引用 zxing.Monotouch 类型时，我都会在构造函数上得到 MissingMethodException。 `System.MissingMethodException: Method not found: 'MyClass..ctor'.` 现在已经3天了...有人知道吗？如果需要的话，我什至愿意放弃 zxing（即使它是一个很棒的库）。

*编辑*

当我在解决方案中包含 zxing.Monotouch 并将其作为项目引用时，问题不会重现。如果这是我错过的线索...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T14:29:48.403

很可能二进制版本`zxing.Monotouch`正在尝试访问 6.0.1 中不存在的内容。这是不常见的，因为我们试图保持源代码/二进制文件的兼容性**，除非**代码真的被破坏了（例如，它无论如何都会导致崩溃）。如果没有更多数据（例如完整的构建日志），我无法更精确。

如果您包含`zxing.Monotouch`作为参考，那么它将被**重建**。如果它有效，那么看起来确实保留了源兼容性（但不是二进制兼容性）。

只要您有可用的源代码，我鼓励您使用 .csproj（而不是 .dll）引用。Is 有一些优点，包括源代码/二进制文件的兼容性（上图）以及它使您的项目更容易调试的事实。

# c# - 数据模板和子数据模板

> ID：12658928
> 
> 赞同：0
> 
> 时间：2012-09-30T05:35:09.720
> 
> 标签：c#, wpf, datatemplate, itemscontrol

我有一个项目`WPF`。我该如何使用`Data Template`和使用`Data Template`它。

我的项目中有以下课程。

```
public abstract Class X
public Class A: X
public Class B: X
public Class C: X 
```

并在 XAML 文件中使用以下代码：

```
<DataTemplate DataType="{x:Type A}">
...
</DataTemplate>

<DataTemplate DataType="{x:Type B}">
...
</DataTemplate>

<DataTemplate DataType="{x:Type C}">
...
</DataTemplate>

<DataTemplate DataType="{x:Type X}" x:Key="xdatatemplate">
...
<!-- use datatemplate of A,B or C --!>
...
</DataTemplate>

<ItemsControl ItemTemplate="{StaticResource xdatatemplate}"/> 
```

我想为我的 ItemsControl 的 Itemtemplate 使用 xdatatemplate。ItemsSource 项目属于 A、B 或 C 类型。A、B 和 C 类型之间只有部分数据模板不同。如何在 X DataTemplate 上使用 A、B 和 C 子 DataTemplate？

我可以`ItemTemplateSelector`用于此目的吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T06:53:20.140

如果 xdatatemplate 仅通过其 DataType 选择子 DataTemplate，那么您可以这样做：

```
<DataTemplate DataType="{x:Type X}" x:Key="xdatatemplate">
  <Grid>
    <ContentControl Content="{Binding}" />
    <!-- Other content -->
  <Grid>
</DataTemplate> 
```

但是，如果您需要更复杂的子 DataTemplate 选择逻辑，则应使用[ContentTemplateSelector](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.contenttemplateselector.aspx)：

```
<local:MyTemplateSelector x:Key="MyTemplateSelector" />

<DataTemplate DataType="{x:Type X}" x:Key="xdatatemplate">
  <Grid>
    <ContentControl Content="{Binding}" ContentTemplateSelector="{StaticResource MyTemplateSelector}" />
    <!-- Other content -->
  <Grid>
</DataTemplate> 
```

# jquery - JQuery：尝试使用 .html() 但新内容具有原始选择器/元素的链接特征

> ID：12658930
> 
> 赞同：0
> 
> 时间：2012-09-30T05:35:45.280
> 
> 标签：jquery

我有四个链接，我希望内容出现在被点击的特定链接的链接列表下方的 div(.contentcont [name of div]) 中。

```
$('.link1').click(function(e){
$(this).clone().html('<h1>Text appear</h1>')
.appendTo('.contentcont')
               e.preventDefault();  
       }); 
```

我正在使用 .html() 提供要输入到 div 的内容。如果您查看提供的 js fiddle ( [http://jsfiddle.net/jack2ky/K3FaY/2/](http://jsfiddle.net/jack2ky/K3FaY/2/) )，您将能够看到新内容出现在 div 中，但它具有链接的特征[不好]。也许这与我使用 .clone() 有关。我使用 .clone() 的原因是，当我点击链接时，链接就会消失。也许您可以告诉我使用 .clone() 是否是防止链接消失的正确解决方案。为什么新内容具有链接特征？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T05:47:24.420

新内容具有链接特征，因为您正在克隆链接元素本身。要添加新内容，只需使用：

```
$('.contentcont').append('<h1>Text appear</h1>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T05:45:30.780

`.html()`设置元素的*内部*HTML。您克隆的元素仍然是一个`<a>`标签（您克隆了您的链接），因此您实际上是将带有不同文本的链接副本附加到另一个元素中。

如果我正确阅读了您的代码，那么您真的不需要使用`.clone()`或根本不需要`.html()`。只需创建一个新元素：

```
$('<h1 />', {
    text: 'Text appear'
}).appendTo('.contentcont'); 
```

**演示：http: [//jsfiddle.net/Blender/K3FaY/8/](http://jsfiddle.net/Blender/K3FaY/8/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T05:46:53.017

`innerHTML`尝试将克隆的链接附加到临时父节点，如 div，然后使用或拉回 html`$.html()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T05:52:03.560

新内容具有链接的特性，因为它直接作为子元素添加到`<a>...</a>`元素中，原因是`clone()`. 尝试在 Div 中添加新内容，使用它的 ID 并且不使用 clone()。

# jpa - OpenJPA 与 Oracle - 创建 EntityManager 时出现 NullPointerException

> ID：12658933
> 
> 赞同：0
> 
> 时间：2012-09-30T05:36:17.467
> 
> 标签：jpa

我是 OpenJPA 的新手。当我尝试使用 OpenJPA 和 Oracle 编写示例程序时，我在创建 EntityManager 时收到 NullPointerException。

示例程序是

```
 public static void main(String[] args) {
        EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory("testjpa");
        EntityManager em = entityManagerFactory.createEntityManager();
        EntityTransaction userTransaction = em.getTransaction();

        userTransaction.begin();
        Customer customer = new Customer();
        customer.setFirstName("Charles");
        customer.setLastName("Dickens");
        customer.setCustType("RETAIL");
        customer.setStreet("10 Downing Street");
        customer.setAppt("1");
        customer.setCity("NewYork");
        customer.setZipCode("12345");
        em.persist(customer);
        userTransaction.commit();
        em.close();
        entityManagerFactory.close();
} 
```

persistence.xml 是

```
<persistence-unit name="testjpa">
    <provider>
        org.apache.openjpa.persistence.PersistenceProviderImpl
    </provider>
    <class>sample.jpa.entity.Customer</class>
    <properties>
        <property name="openjpa.jdbc.DBDictionary" value="oracle(DriverVendor=oracle)" />
        <property name="openjpa.ConnectionURL" value="jdbc:oracle:thin:@localhost:1521:xe" />
        <property name="openjpa.ConnectionDriverName" value="oracle.jdbc.driver.OracleDriver" />
        <property name="openjpa.ConnectionUserName" value="xxxxx" />
        <property name="openjpa.ConnectionPassword" value="xxxxx" />
        <property name="openjpa.Log" value="SQL=TRACE" />
    </properties>
</persistence-unit> 
```

堆栈跟踪是

```
Exception in thread "main" java.lang.NullPointerException
at sample.jpa.main.TestJPA.main(TestJPA.java:16) 
```

这发生在

```
EntityManager em = entityManagerFactory.createEntityManager(); 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T15:16:19.847

就像 Eelke 已经告诉你的那样：你必须发布确切的堆栈跟踪。没有堆栈就没有机会开始调试它。

我还希望您的代码片段中“持久性”后面的空格只是一个错字：

```
EntityManagerFactory entityManagerFactory = Persistence .createEntityManagerFactory("testjpa"); 
```

塞巴斯蒂安

# haskell - Haskell 柯里化和模式匹配如何协同工作？

> ID：12658936
> 
> 赞同：16
> 
> 时间：2012-09-30T05:37:02.643
> 
> 标签：haskell, pattern-matching, currying

我是 Haskell 的新手。我知道函数被柯里化为带有一个参数的函数。我不明白在这种情况下如何实现对多个值的模式匹配。例如：

假设我们有以下完全任意的函数定义：

```
myFunc :: Int -> Int -> Int
myFunc 0 0 = 0
myFunc 1 1 = 1
myFunc x y = x `someoperation` y 
```

部分应用的函数是否由`myFunc 0`本质上返回：

```
partiallyAppliedMyFunc :: Int -> Int
partiallyAppliedMyFunc 0 = 0
partiallyAppliedMyFunc y = 0 `someoperation` y 
```

从而删除不可能匹配的无关模式？或者....这里发生了什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-30T06:06:30.463

实际上，这个问题比表面上看起来更微妙，需要学习一点编译器内部知识才能真正正确回答。原因是我们有点理所当然地认为我们可以在多个术语中拥有嵌套模式和模式，而实际上，为了编译器的目的，你唯一能做的就是在单个的顶级构造函数上分支价值。所以编译器的第一阶段是将嵌套模式（以及超过一个值的模式）转换为更简单的模式。例如，一个简单的算法可能会将你的函数转换成这样的：

```
myFunc = \x y -> case x of
    0 -> case y of
        0 -> 0
        _ -> x `someoperation` y
    1 -> case y of
        1 -> 1
        _ -> x `someoperation` y
    _ -> x `someoperation` y 
```

你已经可以看到这里有很多次优的东西：这个`someoperation`术语被重复了很多次，并且函数在开始执行 a 之前就需要两个参数`case`；请参阅[受有限自动机理论启发的术语模式匹配编译器](http://www.classes.cs.uchicago.edu/archive/2011/spring/22620-1/papers/pettersson92.pdf)，以讨论如何改进这一点。

无论如何，在这种形式下，实际上应该更清楚地了解柯里化步骤是如何发生的。我们可以直接替换`x`这个表达式中的来看看做了什么`myFunc 0`：

```
myFunc 0 = \y -> case 0 of
    0 -> case y of
        0 -> 0
        _ -> 0 `someoperation` y
    1 -> case y of
        1 -> 1
        _ -> 0 `someoperation` y
    _ -> 0 `someoperation` y 
```

由于这仍然是一个 lambda，因此没有进一步减少。你可能希望一个足够聪明的编译器可以做更多的事情，但是 GHC 明确地没有做更多的事情；如果您希望在仅提供一个参数后完成更多计算，则必须更改定义。（这里有时间/空间的权衡，正确选择太难做到可靠。所以 GHC 把它留给程序员来做这个选择。）例如，你可以明确地写

```
myFunc 0 = \y -> case y of
    0 -> 0
    _ -> 0 `someoperation` y
myFunc 1 = \y -> case y of
    1 -> 1
    _ -> 1 `someoperation` y
myFunc x = \y -> x `someoperation` y 
```

然后`myFunc 0`会减少到一个更小的表达式。

# c# - android单声道：使用列表 而不是 ArrayAdapter 来使用 Contains 方法

> ID：12658937
> 
> 赞同：1
> 
> 时间：2012-09-30T05:37:12.877
> 
> 标签：c#, mono, xamarin.android, xamarin

我关心的主要是使用List 的**Contains**方法（我认为最好的检查方法）。

**控件：**微调器、EditText 和按钮（用于检查）

在我的资源（String.xml）中，我创建了一个名称为“Fruits”的字符串数组。

在我的 Activity1.cs 中，我还创建了一个 ArrayAdapter 来填充我的字符串数组的项目并将其分配给我的 spinner.adapter 对象。

```
var spinner = FindViewById<Spinner>(Resource.Id.spinner1);
var adapter = ArrayAdapter.CreateFromResource(this, Resource.Array.Fruits, Android.Resource.Layout.SimpleSpinnerDropDownItem);
spinner.Adapter = adapter; 
```

**注意：**在 EditText 控件上找到的文本等于微调器控件上的选定项，**但**我也允许用户手动输入。

**问题：**

1.  如果这是可能的，我如何将 ArrayAdapter 转换为 List 类型。（**我的主要目的**是在 w/c 中使用 Contain 方法，如果在列表中找到，我正在检查来自 EditText 的输入数据）

2.  有没有其他方法可以从字符串数组资源中检查数据？（**注意：**我不想使用任何循环来仅检查程序中的一项（如果存在）。让 .net 为我完成剩下的工作。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T14:03:30.720

一种简单的方法是自己将字符串数组加载到内存中并在那里检查：

```
string[] fruits = Resources.GetStringArray(Resource.Array.Fruits);
var containsOrange = fruits.Contains("orange"); 
```

确保您包含`System.Linq`命名空间以获取该`Contains()`方法。

# qt - 事件（QEvent*）与 mousePressEvent（QMouseEvent *）冲突？

> ID：12658943
> 
> 赞同：1
> 
> 时间：2012-09-30T05:38:08.340
> 
> 标签：qt, button, qevent, mousepress

在QT中：我使用从QToolButton继承的类并重写事件（QEvent *），现在我想添加'mousePressEvent'，但它永远不会被击中，事件（QEvent *）是否与mousePressEvent（QMouseEvent *）冲突？谢谢你。

```
bool IconLabel::event (QEvent* e ) {
   if ( e->type() == QEvent::Paint) {
      return QToolButton::event(e);

   }
   return true;
}
void IconLabel::mousePressEvent(QMouseEvent* e)
{
   int a = 1;//example
    a = 2;// example//Handle the event
} 
```

课程是：

```
class IconLabel : public QToolButton
{
    Q_OBJECT
public:
    explicit IconLabel(QWidget *parent = 0);
    bool event (QEvent* e );
    void mousePressEvent(QMouseEvent* e);
signals:

public slots:

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T07:02:59.813

小部件接收到的所有事件都通过`event(..)`，然后被重定向到适当的事件处理程序方法。您犯了一个错误，即不转发除绘制事件之外的任何事件，如果您只想添加鼠标按下事件处理，请执行以下操作：

```
bool IconLabel::event (QEvent* e ) {
    if ( e->type() == QEvent::Paint ||
         e->type() == QEvent::QEvent::MouseButtonPress ) {
        return QToolButton::event(e);
    }
    return true;
} 
```

事件处理程序方法也应该在 中`protected`，因为事件只应该通过事件队列（`QCoreApplication::postEvent(..)`等）分发。

# c# - 如何检查方法是否具有属性（带有接口、强制转换和抽象）

> ID：12658949
> 
> 赞同：9
> 
> 时间：2012-09-30T05:40:38.940
> 
> 标签：c#, asp.net-mvc, unit-testing, reflection, custom-attributes

阅读帖子“[如何检查方法是否具有属性](https://stackoverflow.com/questions/8817031/how-to-check-if-method-has-an-attribute)”后，我是解决让我保持清醒的问题的一步。

# 我介绍一下情况：

（我正在使用 ASP.Net MVC 4）

**这些接口**：

```
public interface IFlyable
{
    ActionResult Fly();
}    

public interface IRunnable
{
    ActionResult Run();
} 
```

**这个抽象类**：

```
public abstract class SuperHero : Controller
{
    public void SavePeople()
    {
    }    
} 
```

**这个控制器：**

```
public class SuperManController : SuperHero,IFlyable,IRunnable {

    [Authorize]
    public ActionResult Fly(){
        // Flying...
    }    

    [Authorize]
    public ActionResult Run(){
        // Running...
    }    

} 
```

**这个抽象类（用于测试）**

```
[TestClass]
public abstract class SuperHeroTest<TSuperHero>{

    protected abstract TSuperHero GetSuperHero();

    [TestMethod]
    public void IfSuperHeroCanFlyMustHaveAuthorizeAttribute(){

        var superHero=GetSuperHero();

        if(superHero is IFlyable)
        {
            var superHeroFlyable = (IFlyable) superHero;

            var have = MethodHasAuthorizeAttribute(() => superHeroFlyable.Fly());

            Assert.IsTrue(have);
        }

    }
} 
```

**最后这个类继承自`SuperHeroTest`测试`SuperManController`：**

```
[TestClass]
public class SuperManControllerTest : SuperHeroTest<SuperManController>{

    private SuperManController _superManController;

    public SuperManControllerTest(){
        _superManController=new SuperManController();
    } 

    protected override SuperManController GetSuperHero()
    {
        return _superManController;
    }

} 
```

**方法`MethodHasAuthorizeAttribute`是：（**来自上面的帖子）

```
public static MethodInfo MethodOf(Expression<System.Action> expression)
{
    MethodCallExpression body = (MethodCallExpression)expression.Body;
    return body.Method;
}

public static bool MethodHasAuthorizeAttribute( Expression<System.Action> expression )
{
    var method = MethodOf( expression );

    const bool includeInherited = false;
    return method.GetCustomAttributes(typeof(AuthorizeAttribute),includeInherited).Any();
} 
```

# 我的问题是：

类中的调用`MethodHasAuthorizeAttribute(() => superHeroFlyable.Fly())`在它应该返回时返回。`SuperHeroTest``false``true`

`Fly`（类中实现的方法`SuperManController`具有属性`Authorize`）。

我将`Authorize`方法中的属性添加`Fly`到`IFlyable`然后返回`true`。

```
public interface IFlyable
{
    [Authorize]
    ActionResult Fly();
} 
```

我该如何`MethodHasAuthorizeAttribute`检查实现而不是接口？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-30T09:20:26.093

通过对 IfSuperHeroCanFlyMustHaveAuthorizeAttribute() 方法的一些修改，您可以让它工作。

首先检查你的控制器是否实现了 IFlyable 接口。如果是这样，获取控制器的 Fly 方法的 MethodInfo。然后只需要检查返回的 MethodInfo 的属性。这样您就可以检查实现是否具有属性而不是接口。

以下工作正常：

```
[TestClass]
public abstract class SuperHeroTest<TSuperHero>
{
    protected abstract TSuperHero GetSuperHero();

    [TestMethod]
    public void IfSuperHeroCanFlyMustHaveAuthorizeAttribute()
    {
        var superHero = GetSuperHero();

        if (superHero is IFlyable)
        {
            var superHeroFlyable = superHero;
            var method = typeof (TSuperHero).GetMethod("Fly");
            var hasAttribute = 
                method.GetCustomAttributes(typeof (AuthorizeAttribute), false).Any();
            Assert.IsTrue(hasAttribute);
        }
    }

    public static MethodInfo MethodOf(Expression<System.Action> expression)
    {
        var body = (MethodCallExpression)expression.Body;
        return body.Method;
    }

    public static bool MethodHasAuthorizeAttribute(Expression<System.Action> expression)
    {
        var method = MethodOf(expression);
        const bool includeInherited = false;
        return method.GetCustomAttributes(
            typeof(AuthorizeAttribute), includeInherited).Any();
    }
} 
```

# php - if $str = "" 和 if empty($str) 之间有区别吗？

> ID：12658950
> 
> 赞同：-1
> 
> 时间：2012-09-30T05:40:45.083
> 
> 标签：php, comparison

会有什么理由`if ($str == "")`不`if (empty($str))`产生相同的输出吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T05:54:45.330

`$str == ""`将返回 TRUE

*   `$str = "";`
*   `$str = false;`
*   `$str = NULL;`
*   `$str = 0;`
*   `$str = 0.0;`

`$str == ""`将返回 FALSE

*   `$str = "0";`
*   `$str = array();`

注意：对于未定义的变量，它也会返回 TRUE，但这是一个警告。

另一方面`empty($str)`，对于上述所有情况（包括未定义的变量）将为 TRUE，没有警告。

至于造成这种差异的原因，是因为该函数`empty`旨在测试空变量（任何类型，例如数组或数字*），而不仅仅是空字符串。

*：您现在可能对 PHP 对存储在字符串中的数字感到满意，它只会根据需要转换值，例如`echo "1" + 2`给`3`. 这就是为什么`empty($str)`在 时返回 TRUE的原因`$str = "0"`，不是因为它是一个空字符串（不是），而是因为它是一个空数字。

为了测试字符串是否为空，我强烈建议使用`$str === ''`or `strlen($str) === 0`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T05:42:50.423

`$str = "0";` 例如。参考[这个](http://php.net/manual/ru/function.empty.php)很好的文档。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-30T05:44:32.417

`$str == ""``empty($str)`除以下 $str 值外，其他所有值都为 true ：

*   `"0"`（0 作为字符串）
*   `array()`（一个空数组）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-30T05:45:53.110

是的。如果`$str`等于`"0"`then`empty($str)`将返回`TRUE`，而`$str == ""`将返回`FALSE`。

请参阅手册页：[http ://www.php.net/manual/en/function.empty.php](http://www.php.net/manual/en/function.empty.php)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-30T05:44:05.347

`empty`与`== false`（不为不存在的变量引发错误）相同。如果您参考[类型比较表](http://php.net/manual/en/types.comparisons.php)，您会看到`"0"`并`array()`进行不同的比较。

# c# - 使用 linq 隐藏 GridView 列

> ID：12658953
> 
> 赞同：0
> 
> 时间：2012-09-30T05:41:06.807
> 
> 标签：c#, asp.net, linq, gridview, rowdatabound

我试图在 RowDataBound 事件中隐藏我的 gridview 列。目前，我正在做：

```
e.Row.Cells[4].Visible = false; 
```

这种方法的问题在于，每当我更改网格视图中列的顺序时，我也必须在此处更改索引。

此外，还有另一种方法：

```
foreach (TableCell col in e.Row.Cells)
        {
            if (col.Text == "Name")
            {
                col.Visible = false;
            }
        } 
```

有人告诉我，可以使用 LINQ。

就像是：

```
((TableCell)e.Row.Cells.Cast<TableCell>()
             .Where(c => c.Text == "name")).Visible = false; 
```

到目前为止，我无法这样做。有人可以告诉我我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T05:44:42.140

怎么样

```
e.Row.Cells.Cast<TableCell>()
           .Where(c => c.Text == "name")
           .ToList()
           .ForEach(col => col.Visible = false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-09T04:43:37.970

以防其他人发现这个。我修改了 Nikhil 的答案以隐藏整个列（包括标题）。

```
e.Row.Cells.Cast<DataControlFieldCell>()
    .Where(c => c.ContainingField.HeaderText == "Name" 
             || c.ContainingField.HeaderText == "Title")
    .ToList()
    .ForEach(c => c.ContainingField.Visible = false); 
```

# mysql - Mysql: #1064 存储过程出错

> ID：12658955
> 
> 赞同：1
> 
> 时间：2012-09-30T05:41:47.723
> 
> 标签：mysql, stored-procedures, syntax

每当我尝试创建以下存储过程时。

```
 CREATE PROCEDURE purchaseItem (IN productID INT, IN quantity INT, IN price DECIMAL(10,2) , IN memID INT)
    BEGIN
        DECLARE qnty INT DEFAULT 0;
            SELECT p_Unit INTO qnty FROM product WHERE p_ID = productID;
            IF qnty >= quantity && qnty != 0 THEN
                INSERT INTO purchase VALUES (NULL, productID, quantity, price, memID, 0, NULL);
                    UPDATE product SET p_Unit = (qnty - quantity) WHERE p_ID = productID;
            END IF;
    END; 
```

我得到错误

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 3 
```

有人可以指出我在哪里做错了。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T05:43:01.780

不要忘记更改`DELIMITER`，尝试以下查询而不使用`SELECT..INTO`

```
 DELIMITER $$
   CREATE PROCEDURE purchaseItem 
    (
      IN productID INT, 
      IN quantity INT, 
      IN price DECIMAL(10,2) , 
      IN memID INT
    )
    BEGIN
            DECLARE qnty INT;
            SET qnty = (SELECT p_Unit FROM product WHERE p_ID = productID);
            IF qnty >= quantity && qnty != 0 THEN
                INSERT INTO purchase VALUES 
                      (NULL, productID, quantity, price, memID, 0, NULL);
                UPDATE product 
                SET p_Unit = (qnty - quantity) 
                WHERE p_ID = productID;
            END IF;
    END$$
    DELIMITER ; 
```

# java - 访问 DLL 时 JNI 崩溃

> ID：12658956
> 
> 赞同：0
> 
> 时间：2012-09-30T05:41:54.880
> 
> 标签：java, c++, java-native-interface, jnienv

我对 Java 非常陌生，但我决定要在 java 中加载我的 C++ dll。让我解释一下我在 Java 方面要做什么..

在 Java 中，我正在创建本机函数：GetGLBuffer。参数应该是指向 ByteArray 的指针。Java没有指针，所以我有点迷路了。

在 C++ 中，它相当于： GetGLBuffer(byte* &Buffer); 缓冲区从函数内部填充。

在 Java 中，我做了 GetGLBuffer(ByteBuffer Buffer); 缓冲区从 C++ DLL 中填充并发送回 Java，以便 Java 可以在 JFrame 上绘制它。相反，它会在访问 DLL 时立即崩溃。有人愿意解释我做错了什么吗？

```
package library;

import java.io.IOException;
import java.nio.ByteBuffer;

class SharedLibrary {

    static{System.loadLibrary("TestDLL");}

    static native void GetGLBuffer(ByteBuffer Buffer);

    public SharedLibrary() throws IOException {
        int BitsPerPixel = 32, Width = 765, Height = 565;
        int IntSize = ((Width * BitsPerPixel + 31) / 32) * Height;
        int ByteSize = IntSize * 4;

        ByteBuffer Buffer = ByteBuffer.allocateDirect(ByteSize);
        GetGLBuffer(Buffer);
        Frame F = new Frame("Testing Buffer", Buffer.array());  //Draw The Image on a frame.
    }
} 
```

* * *

C++ 方面：

```
JNIEXPORT void JNICALL Java_library_SharedLibrary_GetGLBuffer(JNIEnv *env, jclass cl, jobject buffer)
{
    int Bpp = 32;

    Bitmap Foo("C:/Users/Brandon/Desktop/Untitled.bmp");
    std::vector<RGB> Pixels = Foo.Foo();

    std::vector<unsigned char> TEMP(Foo.Size());
    unsigned char* BuffPos = &TEMP[0];

    for (int I = 0; I < Foo.Height(); ++I)
    {
        for (int J = 0; J < Foo.Width(); ++J)
        {
            *(BuffPos++) = Pixels[(Foo.Height() - 1 - I) * Foo.Width() + J].RGBA.B;
            *(BuffPos++) = Pixels[(Foo.Height() - 1 - I) * Foo.Width() + J].RGBA.G;
            *(BuffPos++) = Pixels[(Foo.Height() - 1 - I) * Foo.Width() + J].RGBA.R;

            if (Bpp > 24)
                *(BuffPos++) = Pixels[(Foo.Height() - 1 - I) * Foo.Width() + J].RGBA.A;
        }
        if(Bpp == 24)
            BuffPos += Foo.Width() % 4;
    }

    jbyte *data = (jbyte*)env->GetDirectBufferAddress(buffer);    //Crashes as soon as it hits this.. If commented out, I have no problem.
    MessageBox(NULL, "", "", 0);
    memcpy(data, TEMP.data(), Foo.Size());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T07:15:03.347

Methode 签名不匹配！

使用 javah 从 java 类创建一个有效的 c++-header 签名。

# jquery - 试图掌握 JQuery。处理链接图像淡入淡出但同时淡入淡出

> ID：12658957
> 
> 赞同：0
> 
> 时间：2012-09-30T05:42:05.277
> 
> 标签：jquery, twitter-bootstrap, haml

使用一些我几乎没有经验的 JQuery，并尝试使用

```
window.setTimeout(function() { 
```

链接 4 个不同图像的淡入淡出。然而，它们同时也在逐渐消失。无法弄清楚我做错了什么。有任何想法吗？谢谢！

```
:javascript
  $(document).ready(function($){
    //$('.container.front-end h1').html($('.container.front-end h1').html().
    replace('&amp;', '<div class="h1-specialchar">&amp;</div>'));

    window.setTimeout(function() {
      $('#fade1').removeClass('transparent').addClass('fadeInDown');
    },1000);
    window.setTimeout(function() {
      $('#fade2').removeClass('transparent').addClass('fadeInDown');
    },2000);
    window.setTimeout(function() {
      $('#fade3').removeClass('transparent').addClass('fadeInDown');
    },3000);
    window.setTimeout(function() {
      $('#fade4').removeClass('transparent').addClass('fadeInRight');
    },4000);
  });

.row
  .span5{:style => "width: 400px;"}
    .pad-bottom70
    =image_tag(@page.photos[1].image_url(:full), :id => "fade1", :class => "animated fadeInDown") if @page.photos[1].image?
    .pad-bottom10
    =image_tag(@page.photos[2].image_url(:full), :id => "fade2", :class => "animated fadeInDown") if @page.photos[2].image?
    .pad-bottom5
    =image_tag(@page.photos[3].image_url(:full), :id => "fade3", :class => "animated fadeInDown") if @page.photos[3].image?
  .span7
    - unless @page.photos.empty?
      .pad-bottom70
      =image_tag(@page.photos[0].image_url(:full), :id => "fade4", :class => "animated fadeInRight") if @page.photos[0].image? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T20:57:38.197

您实际上不能使用这样的超时，因为它们都将同时开始。

您必须将这些动作“链接”在一起。这是一个 jsfiddle：http: [//jsfiddle.net/vooboo13/Dp2SF/1/](http://jsfiddle.net/vooboo13/Dp2SF/1/)

在我的示例中，我使用 s 因为我没有图像，但我是这样做的：

```
$(document).ready(function(){

    $("#box1").fadeIn('slow').delay(1000).queue(function(){                                 
        $("#box2").fadeIn('slow').delay(1000).queue(function(){
            $("#box3").fadeIn('slow');
    })});

}); 
```

# java - Android OpenCV 中的高斯低通滤波器。

> ID：12658965
> 
> 赞同：2
> 
> 时间：2012-09-30T05:43:25.553
> 
> 标签：java, android, image-processing, opencv, image-recognition

为了制作质量更好的图像，我对滤镜进行了大量研究。过滤器分为低、中、高。在分析了这几类滤波器后，我得出结论，高斯低通滤波器最适合我。我研究过如何在 Android 中编写代码。

最后我发现OpenCV有这个功能。经过几天的头痛，我仍然找不到任何解决方案，因为我是 OpenCV 的新手。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T15:05:35.883

看看这个教程：

[http://docs.opencv.org/doc/tutorials/imgproc/gausian_median_blur_bilateral_filter/gausian_median_blur_bilateral_filter.html#smoothing](http://docs.opencv.org/doc/tutorials/imgproc/gausian_median_blur_bilateral_filter/gausian_median_blur_bilateral_filter.html#smoothing)

进一步来说：

[http://docs.opencv.org/modules/imgproc/doc/filtering.html?highlight=gaussianblur#gaussianblur](http://docs.opencv.org/modules/imgproc/doc/filtering.html?highlight=gaussianblur#gaussianblur)

对于 Android，它是这样的：

不要忘记导入 Imgproc。

```
import org.opencv.imgproc.Imgproc;
// (...)    
Imgproc.GaussianBlur(Mat src, Mat dst, Size ksize, double sigmaX, double sigmaY=0, int borderType=Imgproc.BORDER_DEFAULT ); 
```

# javascript - 从链接调用 javascript 函数。所有可能的方法

> ID：12658969
> 
> 赞同：0
> 
> 时间：2012-09-30T05:44:21.130
> 
> 标签：javascript, jquery

我有一个 div ~ id 是`slider`我希望它在单击链接时动画/隐藏。更准确地说，我想从链接打开和关闭它。

# jQuery

```
<script type="text/javascript"> 
    $("#toggleslider").click(function () {
    $(this).hide("#slider", { direction: "up" }, 1000);
    });
</script> 
```

# 关联

```
<li><a id="toggleslider" href="javascript:void(0);">toggle</a></li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T05:50:41.123

您可以使用 JQuery toggle() 函数将其从可见切换为不可见（反之亦然）。看看：[http ://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

它应该是相同的语法，只是不是调用“隐藏”，而是将其更改为“切换”。

编辑：您的语法可能不完全正确。试试这个。

```
$("#slider").toggle(1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T05:53:59.867

你可以使用[.slideToggle](http://api.jquery.com/slideToggle/)

```
$("#toggleslider").click(function () {
    $('#slider').slideToggle(1000);
}); 
```

***[现场演示。](http://jsfiddle.net/5gzKJ/)***

# php - PHP Codeigniter 上传类，使用特定模式重命名文件

> ID：12658970
> 
> 赞同：3
> 
> 时间：2012-09-30T05:44:23.323
> 
> 标签：php, codeigniter, upload

我在使用 Codeigniter 时遇到了问题，并且在上传过程中从它必须提供的上传库中获取要重命名的文件。现在在任何人说之前，我不是在寻找“加密”文件名。

我的问题是在上传图像时，您可以处理很多类型的图像。那么如何使用`file_name`config 选项将文件名更改为特定的模式（我已经有模式部分并正在工作）。但保持相同的文件类型？

现在我正在尝试

`$upload_config['file_name'] = $generated_filename_from_schema`

唯一的问题是`$generated_filename_from_schema`没有文件扩展名，并且将文件扩展名排除在等式 CI 之外似乎完全忽略了它，并且如果文件具有相同的名称，它只会获取文件和 append_1、_2、_3，否则它只是保持名称不变。

现在我必须将它传递`$config`给 CI，这样它才能上传文件，但是我如何在它尝试上传之前确定我正在使用哪种文件，以便我可以使用我的名称生成模式。

****编辑****

```
 $upload_config['upload_path'] = realpath(APPPATH.'../images/');
    $upload_config['allowed_types'] = 'gif|jpg|png';
    $upload_config['max_size']  = 0;
    $upload_config['max_width'] = 0;
    $upload_config['max_height'] = 0;
    $upload_config['remove_spaces'] = true;

    $upload_config['file_name'] = $this->genfunc->genFileName($uid);

    if($this->input->post('uploads'))
    {

        $this->load->library('upload');
        $this->upload->initialize($upload_config);

        if (!$this->upload->do_upload())
        {
            //echo 'error';
            echo $config['upload_path'];
            $this->data['errors'] = $this->upload->display_errors();
        }
        else
        {
            //echo 'uploaded';
            $this->data['upload_data'] = $this->upload->data();
        }
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-30T06:00:49.960

您可以使用**$_FILES 数组来获取文件的原始名称**。

提取原始文件的扩展名。然后，附加到您的新文件名。

尝试如下

```
$ext = end(explode(".", $_FILES[$input_file_field_name]['name']));
$upload_config['file_name'] = $this->genfunc->genFileName($uid).'.'.$ext; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T17:24:46.667

个人觉得CodeIgniter的文件上传类比较麻烦。如果你想要一个普通的 PHP 解决方案：

```
function submit_image(){
    $f = $_FILES['image'];
    $allowedTypes = array(IMAGETYPE_PNG, IMAGETYPE_JPEG, IMAGETYPE_GIF);
    $detectedType = exif_imagetype($f['tmp_name']);
    if(in_array($detectedType, $allowedTypes)){
        $pi = pathinfo($f['name']);
        $ext = $pi['extension'];
        $target = $this->genfunc->genFileName($uid) "." . $ext;
        if(move_uploaded_file($f['tmp_name'], $target)){
            /*success*/
        }
        else {/*couldn't save the file (perhaps permission error?*/}
    }
    else {/*invalid file type*/}
} 
```

# jquery-ui - 在单击提交按钮之前获取按钮集数据？

> ID：12658976
> 
> 赞同：0
> 
> 时间：2012-09-30T05:45:07.483
> 
> 标签：jquery-ui

吉日

刚刚学习 jquery UI，今天取得了一些非常好的进展，但是在弄清楚如何在提交表单之前在按钮集中获取所选按钮的 ID 时遇到了困难。

一旦获得所选按钮的 ID，我就知道如何使 AJAX POST 工作。

第一部分是如何完成的？

这是我的jQuery：

```
$( "#pi" ).buttonset();

    $( "#req1" ).dialog({           

        resizable: false,
        height:350,
        minWidth: 310,
        modal: true,
        buttons: {
            "Send request": function() {

                     //what goes here to retrieve the ID of the selected button?

                $( this ).dialog( "close" );
            },
            Cancel: function() {
                $( this ).dialog( "close" );
            }
        }
    }); 
```

还有我的表格...

```
<div id="req1" title="make your selection:">

<form>
<div id="pi">
    <input type="radio" id="p1" name="pi" /><label for="p1">3</label>
    <input type="radio" id="p2" name="pi" /><label for="p2">2</label>
    <input type="radio" id="p3" name="pi" /><label for="p3">1</label>
    <input type="radio" id="p4" name="pi" checked="checked" /><label for="p4">0</label>
    <input type="radio" id="p5" name="pi" /><label for="p5">1</label>
    <input type="radio" id="p6" name="pi" /><label for="p6">2</label>
    <input type="radio" id="p7" name="pi" /><label for="p7">3</label>
</div> 
```

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T06:24:23.357

尝试这个：

```
var id = $('#pi input[name=pi]:checked').attr('id'); 
```

# android - 在上下文菜单中从数据库中获取 id

> ID：12658977
> 
> 赞同：1
> 
> 时间：2012-09-30T05:45:13.417
> 
> 标签：android, android-layout

嗨，这个问题真的让我很震惊。我是android世界的新手。我有一个显示数据库信息的列表。（id、名称和描述）。在单击并按住操作时，我想从数据库中删除选定的行。我已经实现了上下文菜单，但没有从数据库中获取 id，而是返回位置（0 但 db 中的 id 为 1）.thanx

我想我明白了：）

```
public void onCreateContextMenu(ContextMenu menu, View view, ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, view, menuInfo);
    TextView ids = (TextView)findViewById(R.layout.list_row);
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) menuInfo;
    int position = info.position;
    int foldeiId=(Integer) adapter.getItem(position);
    String fd = String.valueOf(view.getId());
    // Log.w("Data id arunmr: ", foldeiId);
    System.out.println(foldeiId);
    menu.setHeaderTitle("Options");
    menu.add(0, NEW_MENU_ITEM, foldeiId, "Delete");
    menu.add(0, SAVE_MENU_ITEM, foldeiId, "Rename");
} 
```

但是知道如何从上下文菜单中访问提到的“foldeiId”吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T06:16:04.073

试试这个如果您在 oncreate() 方法之外声明该变量，您可以获得 foldeiId

```
@Override  
public boolean onContextItemSelected(MenuItem item) {  
    if(item.getTitle()=="Delete"){
        // delete the item you want to delete
}  
else if(item.getTitle()=="Rename"){
      // rename the item you want to 
}  
else {return false;}  
return true;  
} 
```

# php - Javascript、php、HTML 和 CSS 下一步是什么

> ID：12658978
> 
> 赞同：0
> 
> 时间：2012-09-30T05:45:15.077
> 
> 标签：php, javascript, html

我刚刚在 24 小时内完成了 javascript，现在我想转向高级 javascript，有人可以推荐我高级 javascript 书籍。我非常精通 HTML 和 CSS，并且是 PHP 的新手。我和我的朋友正计划创建一个网站（将其视为大学的社交网站或类似的网站），那么我应该学习如何去做。PHP JS 和 HTML 就够了吗？你能推荐我这方面的书吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T05:48:47.587

24 小时不足以完全理解语法之外的任何语言以及如何完成一些基本任务。在处理大型社交网络项目之前，请尝试制作更小、更简单的程序或布局。

要完全实现您的社交网络，您需要了解 PHP（或 Ruby、Python 或 C++，如果您很疯狂）、HTML，可能还有 JS，以及某种数据存储；通常是 SQL 实现或较新的 NoSQL 数据库之一。除非您真的知道自己在做什么，否则这不是您可以在一周或一个月内完成的事情。

从小处着手，使用博客或论坛引擎。仅此一项就需要数周时间。然后努力向上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T07:22:11.550

[引用戈登的建议](https://chat.stackoverflow.com/transcript/message/5565018#5565018)

> 如果你想成为专家级程序员，google SOLID，购买 GOF，购买 POEAA，购买 Clean Code，查找 GRASP、DDD、CQRS、DCI ......但不要要求 PHP 书籍。当您真正要求 PHP 专家书籍时，这是我能给您的最合理的建议。
> 
> 也许从这里开始：[ustream.tv/recorded/22783515](http://ustream.tv/recorded/22783515)

而且您刚刚了解了语言...没有人可以在 24 小时内做到完美，即使我认为[john skeet](https://stackoverflow.com/users/22656/jon-skeet)不能做到这一点，所以您需要至少学习 2 个月才能获得良好或良好的水平知识

还有一个级别的网站，比如如果你认为你想为一所大学制作一个可能没有太多功能的网站，你可以通过一些 php、html、jS、ajax 和基本数据库的知识来做到这一点，但如果你想使电子商务网站或类似的网站比您需要的最高知识水平更有效

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T05:49:31.903

我会建议你在 php 中学习一些安全性，比如和`sql_injection`。`xss`如果你熟悉它们，那么你应该学习一些`ajax`和`javascript``jquery``facebook`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T05:51:01.237

这取决于您要开发的网站类型。

如果您正在寻找一个高度互动的现代网站，我真的建议您学习 Flash、ActionScript，然后继续学习 JavaScript。仔细研究 HTML 标准和动画也非常有用。

如果您正在寻找如何制作电子商务网站或类似的东西，请提高您对 PHP 的了解。JavaScript 中的 Ajax 也非常有用，因为如果您的连接速度很慢，您不希望您的客户永远等待。SQL 以及某种数据库引擎（我建议 MySQL）是强制性的，否则您的用户将无法购买任何东西。但这还远远不够。

我认为大多数网站都分为这两类。

但是话又说回来，肯定需要一些事先的练习。就我而言，没有任何一本正在销售的书会给你足够的知识来直接建立你自己的好网站。它需要经验，而不仅仅是编码，还需要更多对用户友好性及其构成要素的研究。

真的取决于你需要什么。;)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-30T05:52:06.310

学习网络安全。[从Essential PHP Security](http://phpsecurity.org/)一书开始。然后在programmers.stackexchange 上查看[每个程序员应该了解的关于Web 开发](https://softwareengineering.stackexchange.com/questions/46716/what-should-every-programmer-know-about-web-development)的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-30T05:54:55.087

我建议您首先阅读 Stack Exchange Programmers 中的这篇文章：

[https://softwareengineering.stackexchange.com/questions/46716/what-should-every-programmer-know-about-web-development](https://softwareengineering.stackexchange.com/questions/46716/what-should-every-programmer-know-about-web-development)

这是一个与您的问题非常相似的问题，并且有许多有用的答案。

# visual-studio-2010 - 按顺序重命名冗余 ID

> ID：12658985
> 
> 赞同：1
> 
> 时间：2012-09-30T05:46:43.837
> 
> 标签：visual-studio-2010, rename

不确定是否有答案，但我处于这样一种情况，即我有一组相同的元素，每个元素都有一个顺序 ID，如`id="thiselement1"`,`id="thiselement2"`等`id="thiselement3"`...

有没有一种快速的方法可以让我复制和粘贴一个元素 100 次，然后给每个元素一个顺序标识符，如上所示？试图保存一遍又一遍地手动输入数字。

# python - AttributeError: NoneType 用于 lxml 解析 getroot 方法

> ID：12658987
> 
> 赞同：0
> 
> 时间：2012-09-30T05:47:19.047
> 
> 标签：python, web-scraping, mechanize, lxml

我正在尝试使用 lxml 和 mechanize 废弃网站，但出现错误：

**AttributeError：“NoneType”对象没有属性“xpath”**

经过一番检查，我发现`html`没有返回。

有趣的是，这段代码可以在其他网站上运行，只是无法在这个特定的网站上运行（[http://www.selangortimes.com](http://www.selangortimes.com)）

```
url = 'http://www.selangortimes.com'
br = mechanize.Browser()
br.set_handle_robots(False)
br.set_handle_refresh(False)
br.addheaders = [('User-Agent', 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1)')]
br.open(url)
resp = br.response()
html = lxml.html.parse(resp).getroot()
link_targets = [link.attrib.get('href') for link in html.xpath(expr)] 
```

感谢你的帮助 ：）

**更新：** 使用上述代码的工作网站示例 - [http://www.themalaysianinsider.com](http://www.themalaysianinsider.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:25:38.890

您发布的以下代码稍作修改版本，使用**lxml 2.3.6**和**mechanize 0.2.5**生成url元素中所有`href`属性的列表。**请注意**有关您必须的最新评论。`<a>``http://www.selangortimes.com`**`import lxml.html`**

 **```
import mechanize
import lxml.html

url = 'http://www.selangortimes.com'
br = mechanize.Browser()
br.set_handle_robots(False)
br.set_handle_refresh(False)
br.addheaders = [('User-Agent', 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1)')]
br.open(url)
resp = br.response()
html = lxml.html.parse(resp).getroot()
link_targets = [link.attrib.get('href') for link in html.xpath('//a')]
print(link_targets) 
```**

# javascript - 为什么 javascript: URIs 允许在标签的 src 属性中？

> ID：12658992
> 
> 赞同：3
> 
> 时间：2012-09-30T05:48:22.917
> 
> 标签：javascript, html, security, xss, image

在我见过的几乎所有 XSS 缓解指南中，都提到了以下模式：

```
<img src="javascript:evil();"> 
```

这可能有什么合法用途？你可以使用 JS 代码来生成 base64 编码的表示或其他东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T05:54:52.633

它没有很多合法用途。

它的工作方式可能是因为你可以在那里使用任何协议，并且一些浏览器实现了`javascript`伪协议，可以从多个地方调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T05:55:05.297

我不知道合法使用，但一些浏览器（通常是旧的）会执行 JavaScript。[请参阅 OWASP XSS 过滤器规避备忘单](https://www.owasp.org/index.php/XSS_Filter_Evasion_Cheat_Sheet#Image_XSS_using_the_JavaScript_directive)。

# javascript - Why isn't .is(":hover") working?

> ID：12658996
> 
> 赞同：0
> 
> 时间：2012-09-30T05:49:29.410
> 
> 标签：javascript, jquery, hover

I have this code to fade out some stuff on a page after you don't move your mouse for a second or so:

```
idleTime = 0;
var idleInterval = setInterval(function() { 
    idleTime++;
    if (idleTime > 1) {
        var isHovered = $('.fade-outs').is(":hover");
        if(isHovered == false) {
            $('.fade-outs').stop().fadeOut();
        }
    }
}, 1000);
$(document).bind('mousemove mousedown', function(e) {
    idleTime = 0;
    $('.fade-outs').fadeIn();
}); 
```

But, I am getting the following error with `$('.fade-outs').is(":hover");` part:

> Error: Syntax error, unrecognized expression: hover [http://localhost:5545/assets/js/jquery.min.js:3]

Does anyone know why I am getting this error?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T06:07:16.083

I would try something like this instead:

```
var idleTimer;

function startTimer() {
    stopTimer();

    idleTimer = setInterval(function() {
        $('.fade-outs').stop().fadeOut();
    }, 1000);
}

function stopTimer() {
    idleTimer && clearInterval(idleTimer);
}

$(document).on('mousemove', startTimer);

$('.fade-outs').on({
    mouseleave: startTimer,
    mouseenter: stopTimer,
    mousemove: function(e) {
        e.stopPropagation();
    }
});​ 
```

**Demo: [http://jsfiddle.net/Blender/urzug/4/](http://jsfiddle.net/Blender/urzug/4/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T05:52:49.307

Try changing it to this:

```
idleTime = 0;
var idleInterval = setInterval(function() { 
idleTime++;
if (idleTime > 1) {
    var isHovered = $('.fade-outs').is(".hover");
    if(isHovered == false) {
        $('.fade-outs').stop().fadeOut();
    }
}
}, 1000);
$(document).bind('mousemove mousedown', function(e){
  idleTime = 0;
  $('.fade-outs').fadeIn();
});
$('.fade-outs').hover(funciton() { $(this).toggleClass('hover') }); 
```