# StackOverflow 问答 13843000-13843999

# database - 对数据进行转换后从一个数据库迁移到另一个数据库

> ID：13843001
> 
> 赞同：0
> 
> 时间：2012-12-12T15:27:04.850
> 
> 标签：database

我有现有数据的数据库，我想使用现有数据创建一个新的数据库，并对其进行一些转换。我有数百万条记录，我的意思是应该在几小时而不是几天内完成此数据迁移的最佳程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:33:48.937

我推荐 Informatica 工具。对于这样的任务非常有用。

# highcharts - 如何向下钻取堆叠的柱形图表以显示所有堆栈而不是单击

> ID：13843005
> 
> 赞同：1
> 
> 时间：2012-12-12T15:27:21.700
> 
> 标签：highcharts, drilldown, stackedbarseries

我正在尝试让我的堆积柱高图显示所有堆栈钻取。在下面的示例中，当我单击堆栈时，它只会深入到该堆栈级别。我自己试过这个，但我一直无法让它工作。我的预期输出是我点击一个月，我每天都会看到堆积的列

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:41:31.497

问题主要在于您组织数据的方式。我经常看到类似的设置，这不是一种灵活的方式。所以而不是：

```
data = [{
    y: 6863,
    color: colors[2],
    drilldown: {
        name: ['IPad Jan'],
        categories: ['01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '30', '31'],
        level: 1,
        data: [10.85, 7.35, 33.06, 2.81, 10.85, 7.35, 33.06, 2.81, 10.85, 7.35, 33.06, 2.81, 10.85, 7.35, 33.06, 2.81, 10.85, 7.35, 33.06, 2.81, 10.85, 7.35, 33.06, 2.81, 10.85, 7.35, 33.06, 2.81, 10.85, 7.35, 33.07],
        color: colors[2]
    }}] 
```

做：

```
data = [{
    y: 6863,
    color: colors[2],
    drilldown: 'january'
] 
```

然后你有一个像这样的数据结构

```
var drilldownData = {
    'january': [/*data structured correctly for drilldown of january*/],
    'february': [...]
} 
```

所以在你的“点击”事件中你做： setChart(drilldown.name, Drilldown.categories, **[drilldownData[this.drilldown]]** , Drilldown.color, Drilldown.level, Drilldown.type);

# ssas - 如何在任何给定期间选择/建模最后一个客户状态 SSAS

> ID：13843008
> 
> 赞同：1
> 
> 时间：2012-12-12T15:27:31.887
> 
> 标签：ssas, history, mdx, status

我正在尝试在 SSAS 中模拟以下情况。我有三个维度：
客户
id
1
2

状态
ID 名称
1 status_1
2 status_2

日期
day_date
2012-01-01
2012-01-02
...

而且，有 FactCustomerStatuses 表
customer_id, status_id, day_date
1 1 2012-01-01
1 2 2012-03-01
1 1 2012-05-01

有了这个，我用这些维度和计数度量构建了一个简单的立方体。现在，我想要一份报告，该报告将显示我在任何给定日期的客户数量，以及该日期任何客户的最新状态。例如，我确实在 2012 年 2 月 1 日进行了报告，并且我在 status_1 中有 1 个客户，在 status_2 中有 0 个客户。当我在 2012 年 4 月 1 日做报告时，我在 status_1 中有 0 个客户，在 status_2 中有 1 个客户。然后这个客户再次迁移到 status_1，依此类推。我如何使用数据模型或 MDX 完成任务？我可以为每个客户构建具有最新状态的快照，但它只会给我客户数据库的当前状态。但我想将它与昨天的状态或一个月前或任何时候的状态进行比较。有人可以提供一些线索吗？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:28:26.083

根据以下评论修改答案

试试这个 Oleksandr

```
 WITH  MEMBER Measures.CountCustomer AS DistinctCount([Customer].[Customer].Children)
SELECT  NON EMPTY {   Measures.CountCustomer } ON COLUMNS ,
        [Status].[Status].Children ON ROWS
FROM 
( 
    SELECT null:[status Date].[Status Day Date].&[2012-03-01T00:00:00] ON COLUMNS
    FROM TestStatus
) 
```

# jquery - '奇怪的' .insertAfter() 行为

> ID：13843009
> 
> 赞同：0
> 
> 时间：2012-12-12T15:27:34.580
> 
> 标签：jquery, arrays, each, insertafter

我试图在我的段落之间注入一些元素...... - 但它并不像预期的那样工作：

我想看到的是这样的：

```
<p>Text1.</p>
    <span>test1</span> <--injected element
<p>Text2.</p>
    <span>test2</span> <--injected element
<p>Text3.</p>
    <span>test3</span> <--injected element
<p>Text4.</p>
    <span>test4</span> <--injected element
    <span>test5</span> <--injected element
    <span>test6</span> <--injected element 
```

但结果看起来有点不同：

```
<p>Text1.</p>
<span>test6test5test4test3test2test1</span>
<p>Text2.</p>
<span>test6test5test4test3test2test1</span>
<p>Text3.</p>
<span>test6test5test4test3test2test1</span>
<p>Text4.</p>
<span>test6test5test4test3test2test1</span> 
```

我的代码如下所示：

```
$(document).ready(function() {  
            var xArray = 
            [
                "test0",
                "test1",
                "test2",
                "test3",
                "test4"
            ];
            $.each(xArray, function (index, value) {
                $("<span>" + value + "<span>").insertAfter(".articleText p");
            }); 
        }); 
```

做什么/改变...？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:29:41.033

```
 var $paragraphs = $(".articleText p");

        $.each(xArray, function (index, value) {
            $("<span>" + value + "<span>").insertAfter($paragraphs.eq(index));
        }); 
```

您在所有`p`标签之后插入元素，而不是您想要的特定标签。您可以使用`eq`来选择正确的`p`元素。

您还必须处理数组中的元素多于`p`元素的情况。

# asp.net-mvc - 使用虚拟目录对 MVC url 的 Api 调用失败

> ID：13843010
> 
> 赞同：1
> 
> 时间：2012-12-12T15:27:38.303
> 
> 标签：asp.net-mvc, iis-express

我正在为我的 MVC 3 项目使用带有虚拟目录的 IIS Express。

从浏览器来看，网站运行良好 -`http://localhost:8080/VirtualDirectory/Home`等等。

但我也设计了一个从另一个桌面工具调用的 API。

问题是它调用`http://localhost:8080/VirtualDirectory/Api/Action`失败。它超时。

在没有来自浏览器和桌面工具的 VirtualDirectory 的情况下，Cassini Web 服务器也能实现同样的效果。

请帮忙。我应该怎么办？对 web.config 或 MapRoute 的任何更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:30:36.270

如果您使用的是 web api，则应将 'Action' 替换为 'Controller'：

```
http://localhost:8080/VirtualDirectory/Api/CONTROLLER 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T06:52:06.850

您需要提供更多详细信息：您能否使用 Fiddler 来查看使用`http://localhost:8080/VirtualDirectory/Api/Action`桌面客户​​端向其发出 POST 时发生了什么？

您使用的是哪个版本的 IIS Express？

如果您对默认路由进行了任何更改，您可以将它们粘贴到问题中吗？

浏览器、IIS 和桌面客户端是否在同一台机器上？

# c# - 访问变量

> ID：13843014
> 
> 赞同：0
> 
> 时间：2012-12-12T15:27:46.820
> 
> 标签：c#, asp.net-mvc

我有以下内容：

```
 public ActionResult GetRpt(string pNum)
    {
      string dirPath = "C:\\Folder1";
      string pvtResult =  GetType1Report(pNum);
    }

    private string GetType1Reportt(string paslNum)
    {
      string dPath = dirPath;          
     } 
```

我需要从 GetType1Report 中访问 dirPath。

我收到一条消息，指出 GetPReport 中不存在 dirPath。

从 withing GetPReport 访问 dirPath 的最佳方法是什么？我正在考虑将其作为公共静态，但不确定这是否是最好的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T15:29:47.337

将其作为变量发送到 GetType1Reportt？

```
private string GetType1Reportt(string paslNum, string dirPath)
{
    string dPath = dirPath;          
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T15:31:06.440

是传递变量

```
public ActionResult GetRpt(string pNum)
{
  string dirPath = "C:\\Folder1";
  string pvtResult =  GetType1Report(pNum, dirPath );
}

private string GetType1Reportt(string paslNum, string dPath)
{

 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:30:13.680

您不需要为此使用`public static`变量。如果您将变量声明为`private`方法之外，您仍然可以在方法中访问该变量。

```
public class myClass
{
    private string dirPath;

    public ActionResult GetRpt(string pNum)
    {
      dirPath = "C:\\Folder1";
      string pvtResult =  GetType1Report(pNum);
    }

    private string GetType1Reportt(string paslNum)
    {
      dPath = dirPath;          
    }   
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T15:30:17.847

您想将变量传递给方法。我还建议不要对本地路径进行硬编码。当您在没有“C:\”的 PC 上运行它时会发生什么。

```
 public ActionResult GetRpt(string pNum)
    {
      string dirPath = "C:\\Folder1";
      string pvtResult =  GetType1Report(pNum, dirPath);
    }

    private string GetType1Reportt(string paslNum, string dirPath)
    {
      string dPath = dirPath;          
     } 
```

# scala - 在Scala中逐行并发读取和处理文件

> ID：13843015
> 
> 赞同：4
> 
> 时间：2012-12-12T15:27:51.127
> 
> 标签：scala, collections, concurrency, parallel-processing

假设我需要对一个大文本文件中的每一行应用两个函数`f: String => A`并最终创建一个.`g: A => B``B`

由于文件很大而且`f`价格`g`昂贵，我想让处理并发。我可以使用“并行集合”并执行类似`io.Source.fromFile("data.txt").getLines.toList.par.map(l => g(f(l))`的操作，但它不会同时执行读取文件`f`、和`g`。

在这个例子中实现并发的最佳方式是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-12T15:52:41.013

首先，重要说明：不要使用`.par`on，`List`因为它需要复制所有数据（因为`List`只能顺序读取）。相反，使用类似的东西`Vector`，`.par`转换可以在没有复制的情况下发生。

似乎您以错误的方式思考并行性。以下是会发生的情况：

如果你有这样的文件：

```
0
1
2
3
4
5
6
7
8
9 
```

和功能`f`和`g`：

```
def f(line: String) = {
  println("running f(%s)".format(line))
  line.toInt
}

def g(n: Int) = {
  println("running g(%d)".format(n))
  n + 1
} 
```

然后你可以这样做：

```
io.Source.fromFile("data.txt").getLines.toIndexedSeq[String].par.map(l => g(f(l))) 
```

并获得输出：

```
running f(3)
running f(0)
running f(5)
running f(2)
running f(6)
running f(1)
running g(2)
running f(4)
running f(7)
running g(4)
running g(1)
running g(6)
running g(3)
running g(5)
running g(0)
running g(7)
running f(9)
running f(8)
running g(9)
running g(8) 
```

因此，即使整个`g(f(l))`操作都发生在同一个线程上，您也可以看到*每一行都*可以并行处理。因此，许多`f`and`g`操作可以在不同的线程上同时发生，但特定行的and*将按*`f`顺序发生。`g`

 *毕竟，这是您应该期望的方式，因为实际上它无法读取行、运行`f`和`g`并行运行。例如，如果该行尚未被读取，它如何`g`在输出上执行？`f`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T15:51:16.797

您可以`map`使用`Future`：

```
val futures = io.Source.fromFile(fileName).getLines.map{ s => Future{ stringToA(s) }.map{ aToB } }.toIndexedSeq

val results = futures.map{ Await.result(_, 10 seconds) }
// alternatively:
val results = Await.result(Future.sequence(futures), 10 seconds) 
```*

# php - apache在httpd.conf php配置后停止工作

> ID：13843019
> 
> 赞同：0
> 
> 时间：2012-12-12T15:27:59.003
> 
> 标签：php, apache, httpd.conf

我想安装 dompdf，所以我需要 PHP，因此需要安装 Apache（例如）。我已经设法在我的 Windows 7 64 位上安装了 Apache 2.0.64。它显然工作正常，直到我安装了 PHP 5.4.9 并配置了 httpd.conf，所以 Apache 可以“看到” PHP 安装。我一直在使用此链接作为指导 -> [http://www.webdevelopersnotes.com/how-do-i/install-PHP-windows-7.php](http://www.webdevelopersnotes.com/how-do-i/install-PHP-windows-7.php)之后，当我尝试启动 Apache2 时，“The请求的操作失败！” 出现错误弹出窗口。如果我对插入 httpd.conf 的行进行注释，Apache 将再次工作。这些行是：

```
AddType application/x-httpd-php .php
(...)
LoadModule php5_module "c:/Program Files (x86)/php_5.4.9/php5.dll"
(...)
PHPIniDir "C:/Program Files (x86)/php_5.4.9" 
```

我花了很多时间进行搜索，但找不到与我类似的问题，也找不到我自己的解决方案。有人对此有提示吗？

非常感谢，若昂

# android - 防止后台活动恢复

> ID：13843020
> 
> 赞同：0
> 
> 时间：2012-12-12T15:28:09.207
> 
> 标签：android

我有一个将主 Activity 设置为主启动器的应用程序。每当我按下从堆栈底部调用后台活动的主页按钮时，如何防止我当前的前台活动关闭。有没有办法捕获意图并允许前景活动完成。我的清单有以下内容：

android:launchMode="singleTask"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:32:40.653

在公共 API 中无法以您希望的方式“覆盖”主页按钮。

# r - 如何从空间点数据集中创建有凝聚力的空间像素

> ID：13843028
> 
> 赞同：0
> 
> 时间：2012-12-12T15:28:22.637
> 
> 标签：r, polygon, raster, rasterize

我有一个空间点 DF `spo`（覆盖不规则形状的感兴趣区域）。由于 crs 转换，数据不在常规网格上。

我的目标是一个具有预定义分辨率和感兴趣区域范围的栅格（更多的空间点数据将映射到这个主栅格上）。

问题开始时我

```
rasterize(spo, raster(ncol, nrow, extent, crs), spo$param) 
```

我需要进行调整`nrow`，`ncol`以便在我感兴趣的区域内不会出现 NA 的云纹图案。我不能使用预定义（更高）的分辨率，因为`rasterize`没有插值功能。

作为对此的解决方案，我认为我可能需要某种 Spatial Pixel DF `spi`，它涵盖了我感兴趣的整个区域（就像*meuse.grid* in一样`library(raster); data(meuse.grid)`），并用作主网格。然后，我可以用它来插入我的数据，例如

```
idw(param~1,spo,spi) 
```

通过这个，以我选择的分辨率全面覆盖我感兴趣的领域。但是如何从点数据中生成 SpatialPixelsDataFrame 呢？

所以在我看来，问题归结为：如何从*meuse数据集中生成**meuse.grid*？

 *也许我在这里采取了错误的方法，所以请让我知道是否可以使用不同的方式更轻松地实现我所追求的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T00:32:11.383

如果您有一个多边形来定义您感兴趣的区域的边界（您应该这样做），那么它就是直截了当的。一种方法是使用`polygrid`函数 from `geoR`，它本身只是`SpatialPoints`,`expand.grid`和`overlay`

假设您有一个多边形来定义您感兴趣的区域，称为 ROI

在这种情况下，我将从 meuse.grid 创建一个

```
 data(meuse.grid)
 coordinates(meuse.grid) = ~x+y
 x <- chull(meuse.grid@coords)
 borders <- meuse.grid@coords[c(x,x[1]),]

 ROI <- SpatialPolygons(list(Polygons(list(Polygon(borders)), ID = 'border'))) 
```

实际上，要使用`polygrid`您只需要定义您感兴趣区域的多边形的坐标。

要创建覆盖此 ROI 区域的 10 米网格，您可以调用`polygrid`

```
# get the bounding box for ROI an convert to a list
bboxROI <- apply(bbox(ROI), 1, as.list)
# create a sequence from min(x) to max(x) in each dimension
seqs <- lapply(bboxROI, function(x) seq(x$min, x$max, by= 10))

# rename to xgrid and ygrid
names(seqs) <- c('xgrid','ygrid')

thegrid <- do.call(polygrid,c(seqs, borders = list(ROI@polygons[[1]]@Polygons[[1]]@coords))) 
```*

# lua - 删除项目 lua/Corona

> ID：13843037
> 
> 赞同：0
> 
> 时间：2012-12-12T15:28:48.170
> 
> 标签：lua, coronasdk

非常快，而且可能很简单的问题......但它让我在过去的 30 分钟里被难住了......但是我怎样才能从画布/屏幕上删除项目？

我知道这适用于 removeSelf()，但我不太确定如何在我的示例中使用它：

```
display.setStatusBar( display.HiddenStatusBar )

function cat1()
    displayCategory(1)

    print( "clicked 1" ) 
end

function cat2()
    displayCategory(2)

    print( "clicked 2" ) 
end

function cat3()
    displayCategory(3)

    print( "clicked 3" ) 
end

--category display
function displayCategory(cat)

    if (cat == nil) then
        cat = 1
    end

    print( cat )

    if (cat == 1) then
        local item1 = display.newRect(100,100,100,100)
        item1:setFillColor(255,255,0)
    elseif (cat == 2) then
        local item2 = display.newRect(200,100,100,100)
        item2:setFillColor(255,0,255)
    elseif (cat == 3) then
        local item3 = display.newRect(300,100,100,100)
        item3:setFillColor(0,255,255)
    end

end

--category buttons
local catBtn1 = display.newRect(0,0,50,50)
catBtn1:setFillColor( 255,0,0 )
catBtn1:addEventListener( "tap", cat1 )

local catBtn2 = display.newRect(60,0,50,50)
catBtn2:setFillColor( 0,255,0 )
catBtn2:addEventListener( "tap", cat2 )

local catBtn3 = display.newRect(120,0,50,50)
catBtn3:setFillColor( 0,0,255 )
catBtn3:addEventListener( "tap", cat3 ) 
```

现在，每次我点击我的按钮时，相应的项目都会弹出，但当我点击任何其他按钮时并没有消失。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:37:32.950

首先，在 displayCategory 函数之前创建这些项目。然后将它们设置为不可见，如下所示：

```
local item1 = display.newRect(100,100,100,100)
item1:setFillColor(255,255,0)
item1.isVisible = false 
```

稍后您将适当的项目设置为可见或不适当，如果是第 2 项，它将是

```
item1.isVisible = false
item2.isVisible = true
item3.isVisible = false 
```

# c# - 将复杂对象拆分为两个单独的键和值集合

> ID：13843038
> 
> 赞同：1
> 
> 时间：2012-12-12T15:28:52.650
> 
> 标签：c#, serialization, recursion

我正在尝试实现 LightWeight JSON Spec [JsonR](https://github.com/itechnology/JsonRaw)的 C# 方面，但无法理解任何类型的递归：-/ 如果有人可以在这里提供帮助，我将不胜感激。

```
// Mockup class
public class User {
    public string Name { get; set; }    
    public int Age     { get; set; }
    public List<string> Photos  { get; set; }
    public List<Friend> Friends { get; set; }       
}

// Mockup class
public class Friend {
    public string FirstName { get; set; }
    public string LastName  { get; set; }
}

// Initialize objects
var userList = new List<User>();
userList.Add(new User() { 
    Name   = "Robert",
    Age     = 32,
    Photos  = new List<string> { "1.jpg", "2.jpg" },
    Friends = new List<Friend>() {
        new Friend() { FirstName = "Bob", LastName = "Hope"},
        new Friend() { FirstName = "Mr" , LastName = "T"}
    }
}); 
userList.Add(new User() { 
    Name   = "Jane",
    Age     = 21,
    Photos  = new List<string> { "4.jpg", "5.jpg" },
    Friends = new List<Friend>() {
        new Friend() { FirstName = "Foo"  , LastName = "Bar"},
        new Friend() { FirstName = "Lady" , LastName = "Gaga"}
    }
}); 
```

这一切背后的想法是现在将上述对象拆分为 2 个单独的集合，一个包含键，另一个包含值。像这样，我们最终只能通过线路发送值，从而节省大量带宽，然后在客户端重新组合它（已经存在用于重新组合的 js 实现）

如果一切顺利，我们应该能够从上述对象中得到它

```
var keys   = new object[] {
    "Name", "Age", "Photos",
    new { Friends = new [] {"FirstName", "LastName"}}};
var values = new [] {
    new object[] {"Robert", 32, new [] {"1.jpg", "2.jpg"},
                                new [] { new [] {"Bob", "Hope"},
                                         new [] {"Mr", "T"}}},
    new object[] {"Jane", 21, new [] {"4.jpg", "5.jpg"},
                              new [] { new [] {"Foo", "Bar"},
                                       new [] {"Lady", "Gaga"}}}}; 
```

作为验证，我们可以测试结果的一致性

```
Newtonsoft.Json.JsonConvert.SerializeObject(keys).Dump("keys");
// Generates:
// ["Name","Age","Photos",{"Friends":["FirstName","LastName"]}]

Newtonsoft.Json.JsonConvert.SerializeObject(values).Dump("values");
// Generates:
// [["Robert",32,["1.jpg","2.jpg"],[["Bob","Hope"],["Mr","T"]]],["Jane",21,["4.jpg","5.jpg"],[["Foo","Bar"],["Lady","Gaga"]]]] 
```

我探索的一条捷径是利用 Newton 的 JArray/JObject 设施，例如

```
var JResult = Newtonsoft.Json.JsonConvert.DeserializeObject(
    Newtonsoft.Json.JsonConvert.SerializeObject(userList)); 
```

像这样，我们最终得到了一种我们已经可以开始迭代的数组对象

有人认为他们可以以内存/速度有效的方式破解它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T18:22:11.487

我有一个适用于您的示例数据的解决方案。它不是一个通用的解决方案，可能会因其他示例而失败，但它展示了如何使用递归。我没有包括任何错误处理。一个现实世界的解决方案将不得不这样做。

我使用这个辅助方法来获取通用列表的项目类型：

```
private static Type GetListItemType(Type listType)
{
    Type itemType = null;
    foreach (Type interfaceType in listType.GetInterfaces()) {
        if (interfaceType.IsGenericType &&
            interfaceType.GetGenericTypeDefinition() == typeof(IList<>)) {
            itemType = interfaceType.GetGenericArguments()[0];
            break;
        }
    }
    return itemType;
} 
```

现在，递归：

```
public void SplitKeyValues(IList source, List<object> keys, List<object> values)
{
    Type itemType = GetListItemType(source.GetType());
    PropertyInfo[] properties = itemType.GetProperties();
    for (int i = 0; i < source.Count; i++) {
        object item = source[i];
        var itemValues = new List<object>();
        values.Add(itemValues);
        foreach (PropertyInfo prop in properties) {
            if (typeof(IList).IsAssignableFrom(prop.PropertyType) &&
                prop.PropertyType.IsGenericType) {
                // We have a List<T> or array

                Type genericArgType = GetListItemType(prop.PropertyType);
                if (genericArgType.IsValueType || genericArgType == typeof(string)) {
                    // We have a list or array of a simple type
                    if (i == 0)
                        keys.Add(prop.Name);
                    List<object> subValues = new List<object>();
                    itemValues.Add(subValues);
                    subValues.AddRange(
                        Enumerable.Cast<object>(
                            (IEnumerable)prop.GetValue(item, null)));
                } else {
                    // We have a list or array of a complex type
                    List<object> subKeys = new List<object>();
                    if (i == 0)
                        keys.Add(subKeys);
                    List<object> subValues = new List<object>();
                    itemValues.Add(subValues);
                    SplitKeyValues(
                        (IList)prop.GetValue(item, null), subKeys, subValues);
                }
            } else if (prop.PropertyType.IsValueType ||
                       prop.PropertyType == typeof(string)) {
                // We have a simple type
                if (i == 0)
                    keys.Add(prop.Name);
                itemValues.Add(prop.GetValue(item, null));
            } else {
                // We have a complex type.
                // Does not occur in your example
            }
        }
    }
} 
```

我这样称呼它：

```
List<User> userList = InitializeObjects();
List<object> keys = new List<object>();
List<object> values = new List<object>();
SplitKeyValues(userList, keys, values); 
```

`InitializeObjects`像上面那样初始化用户列表。

* * *

**更新**

问题是您使用的是匿名类型`new { Friends = ... }`。您必须使用反射动态创建匿名类型。这很糟糕。文章[“Extend Anonymous Types using Reflection.Emit”](http://www.developmentalmadness.com/archive/2008/02/12/extend-anonymous-types-using.aspx)似乎做到了。（我没有测试它）。

也许更简单的方法可以完成这项工作。我建议创建一个帮助类来描述类类型。

```
public class Class
{
    public string Name { get; set; }
    public List<object> Structure { get; set; }
} 
```

现在让我们在上面的代码中替换一个 else 情况：

```
...
} else {
    // We have a list or array of a complex type
    List<object> subKeys = new List<object>();
    var classDescr = new Class { Name = genericArgType.Name, Structure = subKeys };
    if (i == 0)
        keys.Add(classDescr);
    List<object> subValues = new List<object>();
    itemValues.Add(subValues);
    SplitKeyValues(
        (IList)prop.GetValue(item, null), subKeys, subValues);
}
... 
```

结果是： ![在此处输入图像描述](../Images/cef523861d9968a64fd28d87c7914013.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T16:10:00.907

您可能想尝试一个外部工具，例如[AutoMapper](http://automapper.org/)，它是一个基于约定的映射库。

我建议使用您自己的约定尝试[扁平化功能。](https://github.com/AutoMapper/AutoMapper/wiki/Flattening)

很抱歉，由于时间不够，我无法写出一个例子，但我认为这个开源库背后的想法可能会有很大帮助。

# c# - 使用包含逗号的 UNC 路径参数启动资源管理器无法打开文件夹

> ID：13843042
> 
> 赞同：1
> 
> 时间：2012-12-12T15:28:57.943
> 
> 标签：c#, windows, explorer, processstartinfo

在 UNC 路径中使用逗号传入一个值（例如“\servername\Smith,John\Documents\”）会导致以下内容启动 Windows 资源管理器，但它会打开“我的文档”而不是文件夹路径。如果我将路径粘贴到 Windows 资源管理器的地址栏中，该文件夹会正确打开。

```
public void OpenWindowsExplorer(string path) {
        var runExplorer = new ProcessStartInfo { FileName = "explorer.exe", Arguments = path };
        Process.Start(runExplorer);
    } 
```

非常感谢任何关于为什么会发生这种情况/如何解决问题的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:32:42.790

在路径周围加上引号：

```
public void OpenWindowsExplorer(string path) {
    path = string.Format("\"{0}\"", path);
    var runExplorer = new ProcessStartInfo { FileName = "explorer.exe",
                                             Arguments = path };
    Process.Start(runExplorer);
} 
```

# jquery - 文本区域中的单词数总是返回 11

> ID：13843047
> 
> 赞同：1
> 
> 时间：2012-12-12T15:29:13.427
> 
> 标签：jquery, keyup

我有一个简短的例程，应该获取文本区域中的单词数，然后将该数字输出到`target`. 但是，无论实际有多少单词，它总是返回 11。

我敢肯定这很简单，但我看不到，所以如果有人能给我一些指示，我将不胜感激。谢谢。

```
jQuery(document).ready(function($){

    var target = $('.dd-options #wp-word-count .word-count');

    jQuery('textarea#welcome_text').on('keyup', function(){

        var text = $(this).val,
            word_count = $.trim(text).split(' ').length;

        target.html(word_count);

    });

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T15:31:28.687

jQuery`val`是一个*函数*，所以你必须调用它（通过放在`()`它后面）：

```
jQuery(document).ready(function($){

    var target = $('.dd-options #wp-word-count .word-count');

    jQuery('textarea#welcome_text').on('keyup', function(){

        var text = $(this).val(), // <====================== here
            word_count = $.trim(text).split(' ').length;

        target.html(word_count);

    });

}); 
```

您的代码所做的是`toString`（隐式）调用函数（在大多数浏览器中返回函数源代码的某个版本），然后计算其中的“单词”。

旁注：在这种情况下，由于您试图获取 a 的值`textarea`，因此您也可以只使用`textarea`的内置`value`属性而不是 jQuery 的`val`函数：

```
var text = this.value, 
```

而不是

```
var text = $(this).val(), 
```

(and ) 元素的`value`属性是非常可靠的跨浏览器。`textarea``input`

# r - R距离矩阵构建

> ID：13843048
> 
> 赞同：0
> 
> 时间：2012-12-12T15:29:14.090
> 
> 标签：r, matrix, distance

R 的新手。我有一个 R 中几个组件的坐标矩阵，如下所示：

```
 x   y   z
C1  0.3 0.2 -1.2
C2  -1.5    0.7 0
C3  0.2 -0.75   0.22
... 
```

我的问题是如何在 R 中构建每个组件对的距离矩阵，例如：

```
 C1  C2  C3  ...
C1  0   0.2 0.7 ...
C2  0.2 0   1.2 ...
C3  0.7 1.2 0   ...
... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T15:38:47.887

你会做

```
as.matrix(dist(Matrix)) 
```

然后：

```
rownames(DistMatrix) <- colnames(DistMatrix) <- rownames(Matrix) 
```

# java - 通过 POST 从 Java 向 PHP 发送数据

> ID：13843055
> 
> 赞同：0
> 
> 时间：2012-12-12T15:29:34.440
> 
> 标签：java, php, http, rest, post

一方面，我有一个不断为数据库提供数据的 Java 程序。另一方面是网络服务器（Apache）。我需要通过 REST Web 服务一次将多个条目从程序传输到远程 Web 服务器。虽然我可以毫不费力地将一对值从一个发送到另一个（使用 Java 端的 HttpClient 和另一端写入服务器自己的数据库的 PHP 文件），但我缺乏关于如何构建 HTTP 的知识请求数据。

到目前为止，我一直在使用实体：

```
List<NameValuePair> list = new ArrayList<NameValuePair>();
list.add(new BasicNameValuePair("field1", "aaa"));
list.add(new BasicNameValuePair("field2", "bbb"));

httppost.setEntity(new UrlEncodedFormEntity(list)); 
```

并在我的 PHP 文件中接收它：

```
<?php
    $field1=$_POST["field1"];
    $field2=$_POST["field2"];
    $con= mysql_connect("localhost","root");
    if(!$con) die("Not able to connect");
    mysql_select_db("mydb",$con);
    mysql_query("INSERT INTO `mytable` (`field1`, `field2`) VALUES ('$field1', '$field2')");
    mysql_close($con);
?> 
```

效果很好。简单易行。但是现在，如前所述，我希望从我的数据库中传输几个条目。每个条目由 35 个字段组成，产生一些大数据。

*我的问题是：* **如何**在 ONE 中插入我的数据库条目（或者如果一个 HTTP 请求容量已满，则可以根据需要插入多个条目）并在 PHP 文件端获取结果数据？奖励：使用以前的解决方案，我如何压缩该数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:54:05.310

您可以使用 JSON 进行快速简单的传输。对于解码，PHP 支持`$array = json_decode($json_string, TRUE);`.

不确定压缩。您是否要以这种方式传输大量数据以使其具有相关性？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:14:18.073

好吧，你正在做的事情很容易导致 SQL 注入。确保在使用 mysql_real_escape_string 或更好的准备语句运行插入查询之前转义数据。

[您可以使用Google Protocol Buffers](http://code.google.com/p/protobuf/)而不是使用 JSON 。您需要 JAVA 和 PHP 扩展才能使用协议缓冲区，但这是一种二进制协议，可以非常好地压缩数据，并允许您灵活地定义具有相同属性的不同“可重复”对象（条目），这样当您打开协议缓冲区时在 PHP 方面，将很容易利用数据。

# perl - 我如何告诉 Perl 的证明实用程序忽略某些测试？

> ID：13843056
> 
> 赞同：6
> 
> 时间：2012-12-12T15:29:35.757
> 
> 标签：perl, perl-prove

目前我`prove`这样运行：

```
prove -v -r . 
```

有没有办法使用正则表达式*排除*文件？我看不到它`perldoc prove`的输出或输出`prove -H`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T17:16:53.840

我*通常*会这样做：

```
$ find t/ -name '*.t' ! -name '*timeout*' | xargs prove -l 
```

（跳过慢速超时测试）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-16T12:32:06.810

我设法通过使用子目录来做到这一点：

```
$ tree t/
t/
├── 01_tests.t
├── 02_tests.t
├── 03_tests.t
└── ignored
    └── 01_ignored.t 
```

然后我这样做是为了执行正常的测试：

```
$ prove -v t/*.t
t/01_tests.t ........ ok
t/02_tests.t ........ ok
t/03_tests.t ........ ok
Result: PASS 
```

这将在另一个上下文中执行被*忽略的测试：*

```
$ prove -v t/ignored/
t/ignored/01_ignored.t ........ ok
Result: PASS 
```

如果您的测试尚未存储在不同的子目录中，则为简单而有效的解决方案。

为了使其更易于使用并记录如何运行测试，我通常将它们放在一个`Makefile`.

# php - 用php将表单信息发送到我的邮箱

> ID：13843066
> 
> 赞同：0
> 
> 时间：2012-12-12T15:30:05.557
> 
> 标签：php, jquery

```
<input type="button" class="button" />
<form action="" method="">
<input type="text" name="name" />
<input type="text" email="email" />
<input type="text" phone="phone" />
<textarea name="message"></textarea>
<input type="submit" class="submit"/>
</form> 
```

1、点击按钮，弹出表单，用户填写完表单中的所有信息后点击提交按钮，将所有表单信息发送到我的邮箱。

如何写动作部分。我应该使用哪种方法？我应该使用邮件功能发送电子邮件还是其他方式？

我可能会使用jquery来弹出表单窗口，但我不知道如何收集表单信息，然后将其发送到我的邮箱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:39:17.370

您需要发布它然后发送电子邮件。另外，`<input type="text" email="email" />`需要`<input type="text" name="email" />`需要使用name属性。

尝试这个：

```
<?php
    if (!empty($_POST)){
        $send_message = 'Name: ' . $_POST[name] . ' Email: ' . $_POST[email] . ' Phone: ' . $_POST[phone] . ' Message: ' . $_POST[message];
        mail('youremail@email.com', 'Subject', $send_message); 
    }
?>
<form action="" method="post">
    <input type="text" name="name" />
    <input type="text" name="email" />
    <input type="text" name="phone" />
    <textarea name="message"></textarea>
    <input type="submit" class="submit"/>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:34:02.177

这是一个非常广泛的问题，但简而言之，这就是它的完成方式：

将表单发布到将处理它并使用 PHP`mail()`函数发送它的 php 文件：

```
<form action="process.php" method="POST"> 
```

进程.php：

```
<?php
if (isset($_POST)):
    foreach ($_POST as $key=>$value):
    $message = "$key : $value \n";
    endforeach;
mail('mymail@example.com', 'My Subject', $message);
endif; 
```

# asp-classic - ASP - 权限被拒绝

> ID：13843067
> 
> 赞同：4
> 
> 时间：2012-12-12T15:30:07.290
> 
> 标签：asp-classic, iis-6

在开始之前，我是一名 PHP 程序员，不是 ASP 程序员，但在我的工作中，他们使用 ASP，我没有访问服务器的权限，但我可以联系负责人。

我正在为工作使用 ASP 函数，但我总是遇到这个“权限被拒绝”错误。我进行了一些搜索，发现该帐户需要运行脚本的权限。可能只有我一个人，但我不明白 ASP 在运行脚本之前会检查用户，我的意思是，这是一个公共网站，如果我不这样做，显然他们将无法访问。

我可以更改文件以便任何人都可以运行它吗？

编辑：我的脚本正在尝试编辑服务器上的文件

```
dim fs,f
set fs=Server.CreateObject("Scripting.FileSystemObject")
set f=fs.OpenTextFile(Server.MapPath("test.txt"),8,true)
f.WriteLine("This text will be added to the end of file")
f.Close
set f=Nothing
set fs=Nothing 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T13:03:56.170

IIS 使用的帐户（可能是 iusr）需要对目标文件夹具有读/写权限。我建议使用临时文件夹（网站根文件夹以外的任何文件夹）

默认情况下，该帐户将没有权限。这只是基本的安全性。您需要让管理该机器的人在适当的位置授予权限。

# java - 没有IDE JSONObject的JAVA

> ID：13843073
> 
> 赞同：0
> 
> 时间：2012-12-12T15:30:15.707
> 
> 标签：java, json

我有这个 java 项目，但我没有使用 IDE。

我需要做什么才能在我的程序中使用 JSONObject？

我需要导入什么？

我的目标是解析 JSON 响应。

**编辑** 我知道我需要什么库，我只是不知道将文件放在哪里或如何正确调用它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:38:43.917

这取决于您需要*哪个*JSONObject。

[来自 json.org 的那个](http://www.json.org/javadoc/org/json/JSONObject.html)被打包在`org.json`. 在文件的开头添加：

```
import org.json.JSONObject; 
```

并将`JSONObject.java`（如果你有文件）放在`your_project_dir/org/json/`. 如果你有一个`jar`文件，那么文件中的目录结构已经是正确的，你只需要将编译器指向`jar`.

你想要 GWT 的那个吗？尝试：

```
import com.google.gwt.json.client.JSONObject; 
```

然后，如果您有源代码，它属于该`com/google/gwt/json/client`目录。

然后有一个[jsonLib](http://json-lib.sourceforge.net/apidocs/net/sf/json/JSONObject.html)：

```
import net.sf.json.JSONObject; 
```

...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:36:08.997

这是你想要的？

[http://www.json.org/java/](http://www.json.org/java/)

你如何使用它取决于你的构建系统。你会唱蚂蚁吗？马文？如果您的构建路径上有 jar，则需要使用“import org.json.*”

# javascript - IE 中的 Ajax 请求“访问被拒绝”

> ID：13843083
> 
> 赞同：8
> 
> 时间：2012-12-12T15:30:49.063
> 
> 标签：javascript, ajax, jquery

我使用ajax请求来检查网站的响应如下，

```
$.ajax ({
    url: 'https://www.example.com',
    cache: false,
    success : function() {
        alert(new Date() - start)               
    }, 
}) 
```

它适用于所有浏览器的本地电脑。当我把它放在服务器上时，它可以在 Chrome 和 Firefox 中运行，但不能在 IE8 中运行。

我得到错误：`"Access is denied" jquery.min.js`

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T08:10:30.493

就我而言，问题是由于兼容模式造成的。我在 Intranet 中，并且 Internet Explorer 以兼容模式运行。我添加了以下标签，这解决了我所有的问题。它强制 IE 不使用兼容模式。

```
<meta http-equiv="X-UA-Compatible" content="IE=Edge" > 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-10T02:04:51.413

**--- 2014 年 1 月 ---**

IE8 和 IE9 使用不同的方法 (XDomainRequest) 与跨域通信。如果他们使用 jQuery，你应该考虑使用它：

[https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest](https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest)

确保使用与发起呼叫相同的协议，即 HTTP 或 HTTPS。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T06:42:27.690

从另一个非常相似的问题中引用“epascarello”：

由于同源策略，对子域的调用被视为不同的域。确保您正在设置 document.domain 以避免使用同源策略拒绝访问。

要使 document.domain 同步，您需要在两个地方进行设置。添加一个设置域的脚本标记，并且您需要在页面上有一个 iframe，以便在另一个域上设置相同的内容。

Ajax 调用的页面来自“www.example.com”并调用“ajax.example.com”：

```
<script type="text/javascript">
    document.domain = "example.com";
</script>
<iframe src="http://ajax.example.com/domainCode.html"></iframe> 
```

“domainCode.html”将只包含脚本标签

```
<html>
    <head>
        <script type="text/javascript">
            document.domain = "example.com";
        </script>
    </head>
<body>
</body>
</html> 
```

有了这个，您应该能够在您的子域之间进行对话。

希望有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-28T20:54:59.607

注意——注意不要在 ajax 中使用“ [http://www.domain.xxx ”作为 URL。](http://www.domain.xxx)仅使用不带地址的路径（目录）和页面名称。

**虚假状态：**

```
var AJAXobj = createAjax();
AJAXobj.onreadystatechange = handlesAJAXcheck;
AJAXobj.open('POST', 'http://www.example.com/dir/getSecurityCode.php', true);
AJAXobj.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');
AJAXobj.send(pack); 
```

**真实状态：**

```
var AJAXobj = createAjax();
AJAXobj.onreadystatechange = handlesAJAXcheck;
AJAXobj.open('POST', 'dir/getSecurityCode.php', true);   // <<--- note
AJAXobj.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');
AJAXobj.send(pack); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-11T15:09:50.763

我在IE8中遇到了这个问题。为我解决的问题是将我的 ajax 请求更改为使用与原始页面请求相同的协议。在我的情况下，原始页面是通过 https 请求的，而 ajax 请求使用的是 http。将它们都切换为使用 https 解决了问题。

# java - 我应该在这里使用哪个集合？

> ID：13843084
> 
> 赞同：1
> 
> 时间：2012-12-12T15:30:57.807
> 
> 标签：java, collections

电话簿包含号码和姓名。如果有人帮助我选择最佳收藏，我将不胜感激，这将有助于我的表现

1.  添加姓名和号码。
2.  按号码搜索姓名
3.  按名称删除名称和编号。

目前我正在使用 HashMap，但这里名称和数字都是关键，这不会很好。另一种选择是将名称和数字包装在一个对象中，然后将它们添加到列表中。然后迭代并添加到列表中。但是，如果您可以向我推荐一些其他最好的收藏，我会这样做。

**注意： -**名称和号码是字符串

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:35:58.877

我会使用一个对象，因为如果您需要存储的不仅仅是名称和号码，那么使用它会进一步增加范围。您可以编写一些辅助函数来获取您需要的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:46:55.623

如果您需要同时通过姓名和电话号码进行查询，那么将所有姓名-号码对放入一个列表中确实是可能且非常简单的，但是搜索和删除都将具有**线性**复杂度。

如果您想要更好的时间复杂度（例如常数或至少对数），您可能需要使用双向映射。例如，番石榴就[`BiMap`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/BiMap.html)提供了这种行为。

如果您需要自己实现它（例如，如果它是一个家庭作业），我将创建一个由两个内部`HashMap`s 组成的类，一个用于入口的每个方向。这将为您提供名称和号码的**恒定时间**查找。当然，您必须确保两个地图始终保持同步。

```
public class PhoneBook {

    private Map<String, String> namesToNumbers = new HashMap<>();
    private Map<String, String> numbersToNames = new HashMap<>();

    public void insertEntry(String name, String phoneNumber) {
        namesToNumbers.put(name, phoneNumber);
        numbersToNames.put(phoneNumber, name);
    }

    public String getNameForPhoneNumber(String phoneNumber) {
        return numbersToNames.get(phoneNumber);
    }

    public String getPhoneNumberForName(String name) {
        return namesToNumbers.get(name);
    }

    public void removeEntryByPhoneNumber(String phoneNumber) {
        String name = numbersToNames.get(phoneNumber);
        namesToNumbers.remove(name);
        numbersToNames.remove(phoneNumber);
    }

    public void removeEntryByName(String name) {
        String phoneNumber = namesToNumbers.get(name);
        numbersToNames.remove(phoneNumber);
        namesToNumbers.remove(name);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:43:07.470

您仍然可以使用 HashMap K=Number V=Name，因为逻辑上搜索速度更重要，并且您可以使用迭代器按名称删除，例如

```
Iterator i = map.entrySet().iterator();
while(i.hasNext()) {
    Entry e = i.next();
    if (e.getValue().equals("user1898282") {
        i.remove();
    }
} 
```

# android - 如何读取 Android .obb 文件？

> ID：13843085
> 
> 赞同：2
> 
> 时间：2012-12-12T15:31:01.223
> 
> 标签：android

我开发了一个 HTML5 应用程序，我的应用程序大小增加到 80 MB，但 google play 只允许上传 50 MB。所以我关注了[http://developer.android.com/google/play/expansion-files.html](http://developer.android.com/google/play/expansion-files.html)并创建了一个带有包扩展名的 .obb 文件。但我无法读取文件。

# regex - 是否可以使用正则表达式解析此代码？

> ID：13843086
> 
> 赞同：0
> 
> 时间：2012-12-12T15:31:02.943
> 
> 标签：regex, vb.net

我正在开发一个为地质学家制作地层柱的程序。地质学家使用 5 个参数对岩石单元进行编码：（1）岩性代码（2 个字符），（2）一级代码（1 个字符），（3）二级代码（1 个字符），以及（4）三级代码（1特点）。所以一个摇滚单元可以这样编码：

Ssxrs - 使其成为具有尖锐基础接触的生根和交叉层状砂岩。

很容易解析出 2 个字符、1 个字符、1 和 1。但地质学家有时会将岩石单元编码为：

Gr-Ss --- 单位从砾岩向上分级为砂岩，或

Gr/Ss——砾岩和砂岩互层的地方。

他们可以多次执行此操作，例如：

Gr-Ss/Ls --- 砾岩向上分级为砂岩和石灰岩互层。他们不仅对岩性代码这样做，而且对一级、二级和三级代码也这样做。

我想将 5 个代码流和操作（即“/”和“-”）解析为岩性列表/数组、初级列表/数组、二级列表/数组和三级列表/数组。

这是一个正则表达式可解决的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:56:32.177

正则表达式：

```
((?:[A-Za-z]{2}[-\/])*[A-Za-z]{2})((?:[A-Za-z][-\/])*[A-Za-z])((?:[A-Za-z][-\/])*[A-Za-z])((?:[A-Za-z][-\/])*[A-Za-z]) 
```

将允许您在 4 个不同的组中找到 4 个不同的代码：[http ://rubular.com/r/Y7rlT09soH](http://rubular.com/r/Y7rlT09soH)

一些解释：第一个捕获组：

`((?:[A-Za-z]{2}[-\/])*[A-Za-z]{2})`

将捕获 0 次或更长时间，2 个字母后跟“-”或“/”，后跟 2 个字母。（“？：”是没有捕获组）

下一个 3 个捕获组是相同的：

```
((?:[A-Za-z][-\/])*[A-Za-z]) 
```

他们将与第一个一样，但只有一个字母。

# asp.net-mvc - 使用 Cookie 将 PersonID 发送到不同的页面

> ID：13843088
> 
> 赞同：1
> 
> 时间：2012-12-12T15:31:07.000
> 
> 标签：asp.net-mvc, cookies, session-cookies, httpcookie

嘿伙计们，当用户进入假期页面时，他们可以做 2 件事中的 1 件事

1）使用下拉框选择“人名”并单击“查看”，这将显示此人当前的所有假期

2）单击“新建”，这会将用户带到允许他们添加新假期的创建页面（从这里他们从下拉菜单中选择人名并从日历中选择日期）

这一切都有效，但是如果用户最初遵循选择人名并单击视图的第一条路径（它将显示他们的假期），如果他们随后采用路径 2 并单击“创建”，它将跳转到创建页面。但是下拉框将返回“选择”，我希望从上一个下拉列表中选择的现有人员显示在此下拉列表中。

cookie 或 url/参数？

无论如何我卡住了请帮忙

我试过饼干。

```
[code]
[HttpGet]
        public ViewResult Index(string sortOrder, int? currentPersonID)
        {
            var holidays = db.Holidays.Include("Person");
            HolidayList model = new HolidayList();

            if (currentPersonID.HasValue)
            {
                model.currentPersonID = currentPersonID.Value;

            }
            else
            {
                model.currentPersonID = 0;
            }

            model.PList4DD = db.People.ToList();

            //hyperlink to sort dates in ascending order
            ViewBag.NameSortParm = String.IsNullOrEmpty(sortOrder) ? "date" : "";
            var dates = from d in db.Holidays
                        where d.PersonId == currentPersonID.Value    
                        select d;

            switch (sortOrder)
            {
                case "date":
                    dates = dates.OrderBy(p => p.HolidayDate);
                    break;
            }

            model.HList4DD = dates.ToList();

            var cookie = new HttpCookie("cookie_name", "currentPersonID");
            Response.AppendCookie(cookie);     

            return View(model);
        }

    public ActionResult Create()
        {
            var cookie = Request.Cookies["cookie_name"];
            if (cookie != null)
            {
                string value = cookie.Value;
                //int? value = cookie.Value;
            }

            ViewBag.cookie = cookie.Value;

            ViewBag.Id = new SelectList(db.People, "Id", "Name");
            return View();
        } 
```

//试图将索引中的 currentPersonID 用作 int 但它不会允许我。

```
[/code]
My View
[code]
@model HolidayBookingApp.Models.startANDend

@{
    ViewBag.Title = "Create";
}

<p>

  <span>@ViewBag.cookie</span>

<h2>Create</h2>

<form action ="ListHolidays" id="listHolidays" method="post">
@using (Html.BeginForm()) {
      @Html.ValidationSummary(true)
    <fieldset>
        <legend>Holiday</legend>

        <div>
            @Html.LabelFor(model => model.PersonId, "Person")
        </div>

        <div>     
            @Html.DropDownListFor(model => model.PersonId,
                                new SelectList(ViewBag.Id, "Value", "Text"),
                                "---Select---"
                                )   
         @Html.ValidationMessageFor(model => model.PersonId)            
        </div>

        <div>
            @Html.LabelFor(model => model.HolidayDate)
        </div>

        <div>

            @Html.TextBoxFor(model => model.HolidayDate)

            @Html.TextBoxFor(model => model.endDate)
    <script>

//        Date.format = 'dd/m/yyy';
        $("#HolidayDate").addClass('date-pick');
        $("#endDate").addClass('date-pick');
            //$('.date-pick').datePicker//({dateFormat: 'dd-mm-yy'}).val();

//        clickInput: true

        $(function () {
            //3 methods below dont allow user to select weekends
            $('.date-pick').datePicker(
               {
                   createButton: false,
                   renderCallback: function ($td, thisDate, month, year) {
                       if (thisDate.isWeekend()) {
                           $td.addClass('weekend');
                           $td.addClass('disabled');
                       }

                   }
               }
        )

        .bind('click',
            function () {
                $(this).dpDisplay();
                this.blur();
                return false;
            }
        )

        .bind('dateSelected',
            function (e, selectedDate, $td) {
                console.log('You selected ' + selectedDate);
            }
        );

            //        HolidayDate is start date
            $('#HolidayDate').bind('dpClosed',
                    function (e, selectedDates) {
                        var d = selectedDates[0];
                        if (d) {
                            d = new Date(d);
                            $('#endDate').dpSetStartDate(d.addDays(0).asString());
                        }
                    }
            );

            //end date is end date
            $('#endDate').bind('dpClosed',
                    function (e, selectedDates) {
                        var d = selectedDates[0];
                        if (d) {
                            d = new Date(d);
                            $('#HolidayDate').dpSetEndDate(d.addDays(0).asString());
                        }
                    }
                );
        });

    </script>

     @Html.ValidationMessageFor(model => model.HolidayDate)
        </div>

        <p>
            <input type="submit" value="Create"/>
        </p>

    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div>

@*
<p>Current Person Selected is:

@TempData["currentPersonID"]

</p>*@
[code] 
```

一旦我开始这样做，我怎样才能让我的下拉菜单存储价值？有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:41:48.807

对我来说，cookie 是一种跨许多不同页面存储信息的方式，如果用户在一段时间后返回，它也是一种方式。

我更喜欢使用查询字符串，因为信息需要从一页传递到另一页。您可以在“创建”按钮单击事件上使用 javascript 或 jquery，查看下拉菜单是否有值，将其放入查询字符串并重定向。

我建议阅读以下内容：http: [//www.codeproject.com/Articles/43457/Session-Cookie-Query-String-Cache-Variables-Unifie](http://www.codeproject.com/Articles/43457/Session-Cookie-Query-String-Cache-Variables-Unifie)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:43:36.590

尝试使用帮助器 SelectList 并传递以查看带有项目列表和所选项目 id 的模型。

```
@Html.DropDownList("name", new SelectList(Model.SomeList, "ItemValueId", "ItemDescription", Model.ItemValueId), new { @class = "someclass" }) 
```

# excel - Excel - 将单元格内容乘以 12，仅一次

> ID：13843089
> 
> 赞同：0
> 
> 时间：2012-12-12T15:31:07.750
> 
> 标签：excel, vba

我正在尝试更新输入到单元格中的值`Column A`。我有以下脚本几乎可以按预期工作。它更新单元格，但随后继续更新，直到达到指数级大数字。

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Target.Column = 1 Then
        intcolumn = Target.Column
        introw = Target.Row
        Cells(introw, intcolumn) = Cells(introw, intcolumn) * "12"
    End If
End Sub 
```

有没有办法让我可以做到，这样我就可以在A中输入任何数字？它只乘以 12 一次吗？（1 = 12、2 = 24、3 = 36、4 = 48 等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:38:42.823

您的更改再次触发 Worksheet_Change 事件。你需要有某种标志来跟踪它：

```
Private changeFlag As Boolean

Private Sub Worksheet_Change(ByVal Target As Range)
    If Target.Column = 1 And Not changeFlag Then
        changeFlag = True
        intcolumn = Target.Column
        introw = Target.Row
        Cells(introw, intcolumn).Value = Cells(introw, intcolumn).Value * 12
    Else
        changeFlag = False
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T15:41:43.410

乘以单元格值会触发`Worksheet_Change`事件，该事件正在触发此宏。所以，当你在 A1 单元格中输入“1”时，这是一个导致乘法 1*12=12 的变化，但这**也是**一个变化，导致 12*12=144，这也是一个变化等等，这就是它重复的原因。

这应该修复它，在执行操作之前禁用事件，然后在退出子例程之前重新启用事件：

```
Private Sub Worksheet_Change(ByVal Target As Range)
If Target.Column = 1 Then
Application.EnableEvents = False 'Prevent looping based on the 'change' caused by multiplication
    intcolumn = Target.Column
    introw = Target.Row
    Cells(introw, intcolumn) = Cells(introw, intcolumn) * "12"
Application.EnableEvents = True 'allow events again
End If
End Sub 
```

# core-data - MagicalRecord 入门

> ID：13843092
> 
> 赞同：0
> 
> 时间：2012-12-12T15:31:09.000
> 
> 标签：core-data, xcode4.5, magicalrecord

我有一个 iPad 应用程序，使用 Storyboards、XCode 4.5 和 iOS 6。我正在尝试开始使用 MagicalRecord。我已经安装了所有东西，并且可以正确构建。我创建了一个名为 ClientInfo 的带有属性的空实体。我还生成了 NSManagedObject（编辑器 > 创建 NSManagedObject 子类... > 创建），但也不知道如何处理它。

这就是我的“砖墙”的指示；我无法遵循以下说明：

> 将要保存的实体的 NSManagedObject 子类导入到你的类中

我查看了示例，谷歌搜索并查看了 SO。我找不到从头到尾的好例子。有人知道 MagicalRecord 上真正好的文档或示例吗？或者，给我看一个真正简单的例子来解释 MagicalRecord 没有的地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:19:25.840

1.  在 Xcode 中，在 Core Data 模型编辑器中选择实体，然后从菜单中选择“Editor -> Create NSManagedObject Subclass ...”。这会为每个实体创建 .h 和 .m ，例如*ClientInfo.h*和*ClientInfo.m*。
2.  在类文件中导入 NSManagedObject 子类，例如`#import "ClientInfo.h"`.

请注意，您必须在修改实体后重做第 1 步。

NSManagedObject 子类为您的实体声明所有属性和方法，因此您可以（例如）编写

```
clientInfo.name = @"foo"; 
```

代替

```
[clientInfo setValue:@"foo" forKey:@"name"]; 
```

# unix - 从 C/C++ 应用程序启动 systemd 服务或调用 D-Bus 服务

> ID：13843093
> 
> 赞同：8
> 
> 时间：2012-12-12T15:31:08.967
> 
> 标签：unix, service, process, dbus, systemd

我有一个 .service 用于我不想在启动时启动的进程，而是在给定时间从另一个已经运行的应用程序中以某种方式调用它。

另一种选择是将 D-Bus（我在我的应用程序中使用 glib dbus）服务文件放在 /usr/share/dbus-1/services 中，并以某种方式从我的应用程序中调用它。另外，我也无法做到这一点。

假设我的 dbus 服务文件来自`/usr/share/dbus-1/services`is`com.callThis.service` 和我的主要服务文件来自`/lib/systemd/system is com.startThis.service`

如果我从命令行运行一个简单的内省：

```
/home/root # dbus-send --session --type=method_call --print-reply \
--dest=com.callThis  /com/callThis org.freedesktop.DBus.Introspectable.Introspect 
```

D-Bus 服务文件将被调用，它将启动 Exec ( com.starThis ) 中的内容。问题是我想使用 D-Bus glib 从 C/C++ 代码中实现这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T08:09:00.950

[g_dbus_connection_send_message](http://developer.gnome.org/gio/2.30/GDBusConnection.html#g-dbus-connection-send-message)与[g_dbus_message_new_method_call](http://developer.gnome.org/gio/2.30/GDBusMessage.html#g-dbus-message-new-method-call)或[g_dbus_message_new_signal](http://developer.gnome.org/gio/2.30/GDBusMessage.html#g-dbus-message-new-signal)的组合应该是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-05T12:21:35.343

我很难做同样的事情。发现：G_BUS_NAME_WATCHER_FLAGS_AUTO_START 解决它。

```
g_bus_watch_name(G_BUS_TYPE_SYSTEM, "com.mydbus.listen",
      G_BUS_NAME_WATCHER_FLAGS_AUTO_START, xOnNameAppeared, xOnNameVanished,
      this, nullptr); 
```

# javascript - 将复选框发送到特定 URL

> ID：13843094
> 
> 赞同：0
> 
> 时间：2012-12-12T15:31:10.300
> 
> 标签：javascript, html, forms, checkbox

例如; 如果用户单击弹出框和摇滚框，我想将页面发送到`www.mysite.com/?view=listen&tag[]=pop&tag[]=rock`
如果我使用下面的表单代码，它可以在 Firefox 和 IE 上正常工作。但是如果用户使用谷歌浏览器点击，页面会转到`http://www.mysite.com/www.mysite.com/?view=listen&tag[0]pop&tag[1]rock&` 标签名称前面的等号消失。我怎样才能在谷歌浏览器上工作呢？

```
<form action="http://www.mysite.com/">
    <input type="hidden" name="view" value="listen" />
    <input type="checkbox" name="tag[]" value="pop" />pop<br /><br />
    <input type="checkbox" name="tag[]" value="rock" />rock<br /><br />
    <input type="checkbox" name="tag[]" value="indie" />indie<br /><br />
    <input type="checkbox" name="tag[]" value="electronic" />electronic<br />
    <button type="submit">submit</button>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:38:09.877

我试过这个。在谷歌浏览器中，它确实使用方括号和等号发布表单以更正网址：

这是您的代码：

表单网址：http: [//jsbin.com/ihagon/1](http://jsbin.com/ihagon/1)

当我选择流行和摇滚并按提交时，它会转到以下网址：

目标网址： http: [//jsbin.com/ihagon/1 ?view=listen&tag%5B%5D=pop&tag%5B%5D=rock](http://jsbin.com/ihagon/1?view=listen&tag%5B%5D=pop&tag%5B%5D=rock)

这是HTML代码：

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
</head>
<body>
  <form action="http://jsbin.com/ihagon/1">
    <input type="hidden" name="view" value="listen" />
    <input type="checkbox" name="tag[]" value="pop" />pop<br /><br />
    <input type="checkbox" name="tag[]" value="rock" />rock<br /><br />
    <input type="checkbox" name="tag[]" value="indie" />indie<br /><br />
    <input type="checkbox" name="tag[]" value="electronic" />electronic<br />
    <button type="submit">submit</button>
</form>
</body>
</html> 
```

如果我遗漏了什么，请告诉我。

# node.js - nodejs处理选择表单元素

> ID：13843095
> 
> 赞同：2
> 
> 时间：2012-12-12T15:31:11.153
> 
> 标签：node.js, forms, express, select

我有一个（可能非常愚蠢）的问题。我有一个使用 Express 提交到我的 nodeJS 服务器的表单。这与文本输入和单选按钮完美配合，但现在我必须添加一个选择。服务器没有给出错误，但选择没有正确解析。

我的代码：

```
<select id="chooselang">
<option value="nl" name="language">NL</option>
<option value="en" name="language">EN</option>
</select> 
```

我的服务器看起来像这样：

```
app.post('/settings', function(req, res){
// Fill JSON array with new settings
var myData = {
    ,name  : req.body.name
            ,mail : req.body.email
            ,language : req.body.language
    ,location: req.body.location
}
// Write to JSON file
fs.writeFile(configfilepath, JSON.stringify(myData, null, 4), function(err) {
    if(err) {
        res.send(500);
        console.log(err);
    } else {
        setTimeout(function () {
            res.redirect('back');
        }, 2000)
    }
}); 
}); 
```

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-14T09:32:24.817

可能您需要在其中添加一个`name`属性`select`并使用它来捕获值。

此外，只会将其中一个`option`值发送到服务器，因此`name`如果这是您的意图，那么分配给每个选项是没有意义的。

# vba - 使用 SQL 根据单独表中的日期计算顺序字段值

> ID：13843100
> 
> 赞同：1
> 
> 时间：2012-12-12T15:31:37.230
> 
> 标签：vba

我一直在尝试在 Access 2010 中设计一个 SQL 查询来计算基于 3 个使用具有唯一 ID 的字段的表的顺序字段值的数量

例子

表 1：课程

```
 CorID  Date
    1       01/01/2012
    2       01/03/2012
    3       01/02/2012 
```

表 2：代表

```
 DelID  StaffID     CorID      Value    CounterField
    1      17263       2          99       1
    2      17263       1          99       2
    3      17263       3          99       3
    4      17263       65         4        1
    5      17263       44         5        1
    6      17263       78         5        2 
```

表 3：工作人员

```
 StaffID     Surname
    1           Test
    2           Smith
    17263       Jones 
```

CounterField 增加 1，其中表 2 中的 Value 字段与之前的 Value 字段相同。需要确保计数仅使用基于课程表日期字段的顺序。委托表还包含比列出的更多的 DelID 字段，并且还将包含不同的 StaffID 值。

上表中的 CounterField 是我希望查询能够执行的操作的示例。

这可能吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:47:11.533

如果您想计算 Delegate 中有多少行与该`Value`字段不重复：

```
SELECT count(*)
FROM Delegate
WHERE CounterField = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-27T02:11:49.377

尝试运行子查询：

> ```
> SELECT a.DelID, a.StaffID, a.CorID, a.[Value],
> (SELECT Count(*) FROM Delegate b  
> WHERE b.DelID <= a.DelID AND a.[Value]=b.[Value]) As CounterField     
> FROM Delegate a; 
> ```

# javascript - 如何在 jquery 验证器规则中使用正则表达式代码

> ID：13843101
> 
> 赞同：0
> 
> 时间：2012-12-12T15:31:40.100
> 
> 标签：javascript, jquery, html

我不理解对“全名”字段进行验证..

**以下是“全名”字段所需的验证：**

*   只允许使用字母 a 到 z（小写）、“-”（破折号或连字符）和“”（空格），
*   必须输入“-”（破折号）和“”（空格）字母，
*   “-”或“”字母不能是输入的第一个或最后一个字母，
*   “-”不能是“”的直接邻居或相邻（之前或之后），
*   “-”或“”不能是其自身的直接邻居（相邻）。

**我知道我可以这样做：**

```
$('#fullName').blur(function(){

            var input = $('#fullName').val();
            if(  !/[^a-z0-9 -]/.test(input)  &&     
                 / /.test(input) && /-/.test(input)  &&  
                 !/^[ |-]|[ |-]$/.test(input)  &&      
                 !/ -|- |--|  /.test(input))
            {
                 $('.error').remove();
            }
            else{
                 $('#fullName')
                     .after('<span class="error">Your Name should be entered like:  "blahblah" </span>');
            }

    }); 
```

**但我不明白如何将上述正则表达式代码插入此处：**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>

<script type="text/javascript"   src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

  <script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>

<script type="text/javascript" src="http://jquery-joshbush.googlecode.com/files/jquery.maskedinput-1.2.1.pack.js"></script>

 <script>

$(document).ready(function(){

 $("#fullname").focus();

  $("#fullname").addMethod("alphanumeric", function(value, element) {
    return ! $("#fullname").methods.required(value, element) || /^[a-zA-Z0-9_]+$/i.test(value);
} , "Letters, numbers or underscores only please"); 

      $("#ourform").validate({
        onfocusout: function(element) { $(element).valid(); } ,
        rules: {
            fullname : {
              required: true,
              maxlength: 14,
              alphanumeric : false
            },                  
            email: {
              required: true,
              email: true
            }
        },
        messages: {
            fullname : {
              required: "Please specify your Full Name",
              maxlength:  "Please enter only upto 14 characters",
              alphanumeric : "do not enter alphanumeric"
            },
            email: {
              required: "We need your email address to contact you",
              email: "Your email address must be in the format of name@domain.com"
            }
        }
      });

   });

  </script>

<style>

.error {color: red;}

</style>

 </head>

 <body>

<form id="ourform" method="get" action="">

       <fieldset>

           <p>
             <label for="fullname">Full Name</label>
             <em>*</em><input id="fullname" name="fullname" size="25" class="required"  maxlength="14" />
           </p>

           <p>
             <label for="email">Email</label>
             <em>*</em><input id="email" name="email" size="25"  class="required email" />
           </p>

     </fieldset>

  </form>

 </body>
</html> 
```

**已编辑：** - 全名（名字和姓氏 - 两者都使用一个字段），

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:58:51.997

您在这里有两个问题：

1.  如何根据您的规则验证全名。
2.  如何添加自定义 jQuery 验证器验证规则。

# 如何添加自定义 jQuery 验证器验证规则

下面是验证字段的全名值为“Mark”的示例：

```
$(document).ready(function() {
    var fullname_invalid = function(value) {
        return value === "Mark";
    }

    $.validator.addMethod("custom_fullname", function(value, element) {
        return fullname_invalid(value);
    }, 'Your Name should be entered like: "Mark"');

    $('#signup').validate({
        rules: {
            fullname: {
                required: true,
                custom_fullname: true
            }
        }
    });

    $('#signup').on('submit', function(event) {
        event.preventDefault();
    });
});​ 
```

HTML：

```
<form id="signup" action="/action">
    <input name="fullname" type="text" />
    <input type="submit">
</form>​ 
```

演示：[jsfiddle](http://jsfiddle.net/XsPLe/)

参考：[jQuery Validate Plugin - 如何创建简单的自定义规则？](https://stackoverflow.com/questions/241145/jquery-validate-plugin-how-to-create-a-simple-custom-rule)

# 如何根据您的规则验证全名

```
$(document).ready(function() {

    var validCharactersRegex = new RegExp(/^[a-zA-Z0-9 -]+$/);
    var doesNotStartWithDashOrSpace = new RegExp(/^[^ -]/);
    var fullname_invalid = function(value) {
        return validCharactersRegex.test(value) && doesNotStartWithDashOrSpace.test(value) && value.indexOf('  ') == -1 && value.indexOf('--') == -1 && value.indexOf(' -') == -1 && value.indexOf('- ') == -1;
    }

    $.validator.addMethod("custom_fullname", function(value, element) {
        return fullname_invalid(value);
    }, 'Your Name should be entered like: "blahblah"');

    $('#signup').validate({
        rules: {
            fullname: {
                required: true,
                custom_fullname: true
            }
        }
    });

    $('#signup').on('submit', function(event) {
        event.preventDefault();
    });
});​ 
```

演示：[jsfiddle](http://jsfiddle.net/ea829/)

# android - 内容提供者还是服务？

> ID：13843105
> 
> 赞同：0
> 
> 时间：2012-12-12T15:31:58.560
> 
> 标签：android, android-service, android-contentprovider

我正在编写一个显示“日本传统时间”（简称 JTT）的应用程序。有几个组件（通知、小部件、应用程序本身、警报）都使用相同的数据 - 当前的 JTT。

我当前的版本使用一个服务来完成所有的计算，并使用一个处理程序来通知每个人关于“滴答”，模仿`ACTION_TIME_TICK`。

但是，对于警报，我还需要一种将“通常时间”转换为 JTT 的方法，反之亦然。这些计算非常耗费 CPU（这一切都基于日出和日落），因此我更喜欢在一个地方完成所有计算然后缓存（计算知道日出和日落时间的东西并不那么重）。

所以我现在有几种方法可以做到这一点：

*   保持一切正常
    *   并使用绑定来请求我需要的数据。它实际上已经在一个案例中完成，并且看起来有点麻烦，因为我必须处理异步响应
*   移至内容提供商
    *   并使用内容观察者而不是广播
    *   或从提供商发送广播
*   结合两种方式
    *   使用内容提供者计算服务数据，然后在需要时广播它

哪个会更好？也许还有别的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:04:00.570

内容提供程序用于结构化数据，因此它并不真正适合您的用例。不确定“异步响应”是什么意思？调用远程服务通常就像本地函数调用一样，它会阻塞并在完成后返回一个值。如果您必须通知多个组件，则可以使用广播。如果所有组件都在同一个进程中，则使用 LocalBroadcast 进行探索（检查 Android 支持库源），或者在其上设置权限以确保如果您需要发送系统范围（常规）的其他应用程序无法获取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T22:38:01.970

我坚持“只是服务”——我发现了粘性广播，它实际上涵盖了我在普通广播中遇到的问题（必须在注册后但在获得第一个“滴答声”之前从服务中请求最新数据），这给我留下了很多我需要实际服务连接的情况较少。

# android - 在其他布局之上的全屏 webview

> ID：13843110
> 
> 赞同：0
> 
> 时间：2012-12-12T15:32:10.943
> 
> 标签：android

我有一个基于 XML 中定义的 LinearLayout 的游戏活动（但如果它使答案更容易，我可以轻松地将其设为 FrameLayout）。

现在我希望有一个将驻留在 WebView 中的插页式广告。我希望在玩游戏时在后台加载 url，然后在我选择的时候，将 WebView 放在我的游戏布局的顶部。

我已经看到在 SO 上讨论过类似的问题，但是尽管阅读了它们，但我似乎无法让它发挥作用。

我希望看到的基本代码只是“在运行时将这个全屏 web 视图放在我现有视图的顶部”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:38:29.940

LinearLayout 不允许项目彼此堆叠 AFAIK

我认为您必须要么使用对话框，要么切换到不同类型的父布局。RelativeLayout 是我可能会推荐的，但其他人也可能会工作。

如果您使用 RelativeLayout，您可以执行以下操作：

```
WebView wv = new WebView(this);
//load up your url and whatever else you need to do with the WebView
RelativeLayout mainLyt = (RelativeLayout)findViewById(R.id.yourMainLayoutId);
mainLyt.addView(wv); 
```

# excel - 在范围上使用 AND 进行条件格式设置

> ID：13843113
> 
> 赞同：2
> 
> 时间：2012-12-12T15:32:13.627
> 
> 标签：excel, conditional-formatting

我有一个包含当前日期的固定单元格 $I$1。我有 col D，其每个单元格都包含一个日期。我也有 col F 包含一个百分比（在对应的 col D 单元格有日期的地方都有其中一个）。

我想要的条件格式是：如果 col D 中的日期在 $I$1 中的日期之前并且 col F 的相应单元格中的百分比大于 0，则设置格式。

根据此站点上以前的答案，我尝试了“=AND(AND(...;...);...)”方法以及“乘法方法”。来自专家的任何提示（因为我显然不是专家！）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:41:57.190

应该这样做 - 例如，假设您想对第 1 行中的单元格执行此格式设置：

```
=And($D1 < $I$1, $F1 > 0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T15:46:20.773

我已经按照您的建议进行了尝试，它似乎可以正常工作：

```
=AND(D1<$I$1;E1>0) 
```

这是你想要的吗？

![在此处输入图像描述](../Images/78d6e1471188ae92c7ff3e1861bd968c.png)

# javascript - 实例化后如何访问 Google Chart 对象？

> ID：13843114
> 
> 赞同：0
> 
> 时间：2012-12-12T15:32:13.627
> 
> 标签：javascript, google-visualization

我想在初始绘制后更改图表的属性（例如，使用 HTML 按钮更改 ChartRangeFilter 的范围）。我很难找到如何访问页面上的图表对象，但我确信它在`window`命名空间中的某处可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:14:49.840

我现在明白了。将图表绑定到局部变量，并在范围内附加处理程序：

```
var chart = new google.visualization.PieChart(...);

$('body').on('click', 'button.update', function() {
    chart.draw(...);
} 
```

# html - 应用程序缓存：不要在 404 上从 appcache 提供文件

> ID：13843116
> 
> 赞同：3
> 
> 时间：2012-12-12T15:32:16.550
> 
> 标签：html, offline, html5-appcache

我正在使用应用程序缓存使我的网站也可以离线工作。
我的清单看起来像这样，并使用以下内容嵌入`<iframe>`：

```
CACHE:
favicon.ico
assets/css/style.css
assets/js/libs/zepto.js
assets/js/app.js

NETWORK:
*

FALLBACK:
/ offline.html 
```

当我切断互联网连接时，它按预期工作-> 一切都通过offline.html 页面提供。
但刚才我发现每个 404（例如服务器上从未存在的 URL）也使用清单中的 FALLBACK 部分显示offline.html。

有没有办法区分离线（在这种情况下，offline.html 是正确的选择）和服务器返回 404（在这种情况下我只想显示 404 错误）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T13:03:26.060

如果原始请求，Appcache 将 FALLBACK...

> ...导致重定向到具有另一个来源的资源（指示强制门户），或 4xx 或 5xx 状态代码或等效代码，或者如果存在网络错误

（来自[http://www.whatwg.org/specs/web-apps/current-work/multipage/offline.html#changesToNetworkingModel](http://www.whatwg.org/specs/web-apps/current-work/multipage/offline.html#changesToNetworkingModel)）

不幸的是，当回退发生时，没有理由找出原因。您无法区分 500、404、重定向或连接失败。

这是一个hacky解决方法：

```
FALLBACK:
/connection-test.js connection-failed.js
/ offline.html 
```

您可以将 connection-test.js 嵌入到您的 offline.html 页面中。connection-test.js loading 表示用户有连接，connection-failed.js 表示没有连接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-03T01:30:57.507

我在寻找相同问题的解决方案时遇到了您的帖子。

我最终做的是在我的后备页面中检查 navigator.onLine 的值（在你的情况下，它将是 offline.html）。如果 navigator.onLine 为真，则用户应该在线/连接到互联网（注意事项适用），并且由于未找到他们请求的文件而被发送到后备页面。所以，然后我将页面的内容更改为 404 的内容。

例子：

```
<script>

header=document.getElementById('header');
error_message=document.getElementById('error_message');

if(navigator.onLine){
    header.innerHTML='Page not found';
    error_message.innerHTML='The page you requested could not be found.  Please check the URL and try again.';
}

</script> 
```

如果应用程序缓存规范包含处理 40x 和 50x 的其他方式，那肯定会很棒。虽然这个解决方案肯定不理想，但它是我能想到的最好的一个。

我希望它有所帮助。

# c# - Windows Store App 无法使用 IObservableMap 绑定到 ObservableDictionary

> ID：13843117
> 
> 赞同：2
> 
> 时间：2012-12-12T15:32:18.807
> 
> 标签：c#, .net, xaml, windows-store-apps

我无法让我的 ListView 绑定到 ObservableDictionary 类型的集合，该集合直接取自 Windows 商店应用程序的 Common 文件夹中的 LayoutAwarePage 中使用的 ObservableDictionary。如果我将 ObservableDictionary 换成 Dictionary，那么我的项目在列表中正确可见，但显然不会根据需要进行更新。

尝试绑定时，我在“输出”面板中得到以下信息

```
Error: Cannot get 'Screens' value (type 'Object') from type 'Test.DataModel.Project, Test, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'. BindingExpression: Path='Project.Screens' DataItem='ObservableDictionary`2[[System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089],[System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]], Test, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'; target element is 'Windows.UI.Xaml.Controls.ListView' (Name='itemListView'); target property is 'ItemsSource' (type 'Object'). 
```

我的项目类看起来像这样

```
public class Project : Common.BindableBase
{
    private ObservableDictionary<Guid, Screen> _Screens;
    public ObservableDictionary<Guid, Screen> Screens
    {
        get { return _Screens; }
        set { this.SetProperty(ref _Screens, value); }
    }

    public Project()
    {
        Screens = new ObservableDictionary<Guid, Screen>();
        //Test screen
        Screens.Add(...);
    }
} 
```

在 projectview 屏幕的代码隐藏文件中

```
protected override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
{
    project = DataModel.ExampleProject.Project;
    this.DefaultViewModel["Project"] = project;
} 
```

在 xaml 绑定中我有

```
<!-- Vertical scrolling item list -->
        <ListView
            x:Name="itemListView"
            AutomationProperties.AutomationId="ItemsListView"
            AutomationProperties.Name="Items"
            TabIndex="1"
            Margin="10,130,0,0"
            Padding="50,0,0,60"
            IsSwipeEnabled="False"
            SelectionChanged="ItemListView_SelectionChanged"
            <!-- Bind the list of screens in the project -->
            ItemsSource="{Binding Project.Screens}"
            ItemTemplate="{StaticResource ScreenListItemTemplate}" Grid.RowSpan="2">

            <ListView.ItemContainerStyle>
                <Style TargetType="ListViewItem">
                    <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                </Style>
            </ListView.ItemContainerStyle>

        </ListView>
<!-- Item template which works if I use just the non-observable Dictionary<K,V> implementation -->
 <DataTemplate x:Key="ScreenListItemTemplate">
        <Grid Height="110" Margin="6" Background="#FF06AAFF" HorizontalAlignment="Stretch" DataContext="{Binding Value}">

            <TextBlock Text="{Binding Name}" VerticalAlignment="Center" Margin="10,-10,0,0" TextWrapping="NoWrap" FontSize="30" Foreground="White"/>
        </Grid>
    </DataTemplate> 
```

以及取自 LayoutAwarePage.cs 的类

```
 /// <summary>
    /// Implementation of IObservableMap that supports reentrancy for use as a default view
    /// model.
    /// </summary>
    public class ObservableDictionary<K, V> : IObservableMap<K, V>
    {
        private class ObservableDictionaryChangedEventArgs : IMapChangedEventArgs<K>
        {
            public ObservableDictionaryChangedEventArgs(CollectionChange change, K key)
            {
                this.CollectionChange = change;
                this.Key = key;
            }

            public CollectionChange CollectionChange { get; private set; }
            public K Key { get; private set; }
        }

        private Dictionary<K, V> _dictionary = new Dictionary<K, V>();
        public event MapChangedEventHandler<K, V> MapChanged;

        private void InvokeMapChanged(CollectionChange change, K key)
        {
            var eventHandler = MapChanged;
            if (eventHandler != null)
            {
                eventHandler(this, new ObservableDictionaryChangedEventArgs(change, key));
            }
        }

        public void Add(K key, V value)
        {
            this._dictionary.Add(key, value);
            this.InvokeMapChanged(CollectionChange.ItemInserted, key);
        }

        public void Add(KeyValuePair<K, V> item)
        {
            this.Add(item.Key, item.Value);
        }

        public bool Remove(K key)
        {
            if (this._dictionary.Remove(key))
            {
                this.InvokeMapChanged(CollectionChange.ItemRemoved, key);
                return true;
            }
            return false;
        }

        public bool Remove(KeyValuePair<K, V> item)
        {
            V currentValue;
            if (this._dictionary.TryGetValue(item.Key, out currentValue) &&
                Object.Equals(item.Value, currentValue) && this._dictionary.Remove(item.Key))
            {
                this.InvokeMapChanged(CollectionChange.ItemRemoved, item.Key);
                return true;
            }
            return false;
        }

        public V this[K key]
        {
            get
            {
                return this._dictionary[key];
            }
            set
            {
                this._dictionary[key] = value;
                this.InvokeMapChanged(CollectionChange.ItemChanged, key);
            }
        }

        public void Clear()
        {
            var priorKeys = this._dictionary.Keys.ToArray();
            this._dictionary.Clear();
            foreach (var key in priorKeys)
            {
                this.InvokeMapChanged(CollectionChange.ItemRemoved, key);
            }
        }

        public ICollection<K> Keys
        {
            get { return this._dictionary.Keys; }
        }

        public bool ContainsKey(K key)
        {
            return this._dictionary.ContainsKey(key);
        }

        public bool TryGetValue(K key, out V value)
        {
            return this._dictionary.TryGetValue(key, out value);
        }

        public ICollection<V> Values
        {
            get { return this._dictionary.Values; }
        }

        public bool Contains(KeyValuePair<K, V> item)
        {
            return this._dictionary.Contains(item);
        }

        public int Count
        {
            get { return this._dictionary.Count; }
        }

        public bool IsReadOnly
        {
            get { return false; }
        }

        public IEnumerator<KeyValuePair<K, V>> GetEnumerator()
        {
            return this._dictionary.GetEnumerator();
        }

        System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
        {
            return this._dictionary.GetEnumerator();
        }

        public void CopyTo(KeyValuePair<K, V>[] array, int arrayIndex)
        {
            int arraySize = array.Length;
            foreach (var pair in this._dictionary)
            {
                if (arrayIndex >= arraySize) break;
                array[arrayIndex++] = pair;
            }
        }
    } 
```

# android - Android ListView 行高亮

> ID：13843119
> 
> 赞同：0
> 
> 时间：2012-12-12T15:32:20.163
> 
> 标签：android, android-listview, listviewitem, android-custom-view, android-selector

我在网上搜索了整个网络后发布了这个问题，但没有找到解决我问题的有效方法。我知道它在其他几篇文章中都有讨论，但没有一篇文章帮助我解决了这个问题。

我已经实现了一个 ListView，其中突出显示了所选项目。一切运行良好，当我选择一行时，它突出显示并在使用 myListView.setSelection(index) 时被突出显示，但我有一个我真正需要解决的问题：当我点击布局中的任何其他视图时（按钮，复选框，单选按钮 ecc）ListView 失去选择。

这是列表视图的实现方式：

我已经扩展了标准的 ListView

```
public SelectableListView(Context context) {
        super(context);
        initStyle(null);
    }

    public SelectableListView(Context context, AttributeSet attrs) {
        super(context, attrs);
        initStyle(attrs);
    }

    public SelectableListView(Context context, AttributeSet attrs, int defStyle) {

        super(context, attrs, defStyle);
        initStyle(attrs);

    }

    private void initStyle(AttributeSet attrs) {

        this.setBackgroundResource(R.drawable.red_border_fat);
        this.setPadding(3, 3, 3, 3);

        this.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
                //without the following 2 lines the selection won't work 
                requestFocusFromTouch();//
                arg1.setSelected(true);
            }
        });

    }

    @Override
    public void setSelection(int position) {
            //without the following line the selection won't work 
        requestFocusFromTouch();
        super.setSelection(position);
    } 
```

列表视图以非常简单的方式添加到布局中

```
<my.name.space.SelectableListView
        android:layout_width="wrap_content"
        android:layout_height="100dp" >
    </my.name.space.SelectableListView> 
```

这是适配器

```
public static SimpleAdapter GetClassAdapter(Context context,ArrayList<SeatClass> items){
        try {
            final ArrayList<HashMap<String, String>> list = new ArrayList<HashMap<String, String>>();
            String[] fields = new String[] { "className" };
            int[] views = new int[] { R.skin_class.lblClassDescription};
            SimpleAdapter adapter = new SimpleAdapter(context, list, R.layout.skin_class_list, fields, views);
            for (SeatClass sc : items) {
                HashMap<String, String> temp = new HashMap<String, String>();

                temp.put("className", Typologic.getClasse(sc.Id).Description);

                list.add(temp);

            }
            return adapter;
        } catch (Exception e) {
            LogHelper.WriteLogError("error in GetClassAdapter", e);
            return null;
        }

    } 
```

这是每一行的布局（R.layout.skin_class_list）

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+skin_class/mainview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/selectable_listview_background_selector"
    android:orientation="horizontal">

    <TextView
        android:id="@+skin_class/lblClassDescription"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="DESCRIPTION"
        android:textColor="@drawable/selectable_listview_textcolor_selector" />

</LinearLayout> 
```

selectable_listview_background_selector.xml

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

   <item android:state_selected="true" android:state_focused="true" android:drawable="@color/black" />
   <item android:state_selected="true" android:state_focused="false" android:drawable="@color/black" />
    <item android:state_pressed="true" android:state_focused="true" android:drawable="@color/black" />
    <item android:state_pressed="true" android:state_focused="false" android:drawable="@color/black" />

    <item android:drawable="@color/White" />

</selector> 
```

selectable_listview_textcolor_selector.xml

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

   <item android:state_selected="true" android:color="@color/White" />:
    <item android:state_pressed="true" android:color="@color/White" />:
    <item android:color="@color/black" />  

</selector> 
```

正如我所说，这非常有效，但是当我单击任何其他视图时，我无法保持突出显示。我已经搜索了几天寻找解决方案，但似乎没有任何效果。

编辑：我找到了这个解决方案，我不再使用选择器了。这里 MyLabel 是一个自定义的 TextView 有一些 - 在这种情况下无关 - 功能

```
public abstract class SelectableListView<T> extends ListView {

    protected ArrayList<T> _data;
    protected int _selectedIndex = 0;

    public SelectableListView(Context context) {
        super(context);
        initStyle(null);
    }

    public SelectableListView(Context context, AttributeSet attrs) {
        super(context, attrs);
        initStyle(attrs);
    }

    public SelectableListView(Context context, AttributeSet attrs, int defStyle) {

        super(context, attrs, defStyle);
        initStyle(attrs);

    }

    public abstract void loadData(ArrayList<T> data);

    public T getSelectedItem() {
        if (_selectedIndex < 0)
            return null;
        else
            return _data.get(_selectedIndex);
    }

    public T getItemAt(int position) {
        if (position < 0 || position > _data.size())
            return null;
        else
            return _data.get(position);
    }

    @Override
    public void setSelection(int position) {

        colorizeSelection(position);
        super.setSelection(position);
        _selectedIndex = position;
    }

    private void colorizeSelection(int index){
        try {
            for (int i = 0; i < this.getCount(); i++) {
                if(i==index)
                    this.getChildAt(i).setBackgroundColor(getResources().getColor(R.color.Red));
                else
                    this.getChildAt(i).setBackgroundColor(getResources().getColor(R.color.White));
                ViewGroup root=(ViewGroup) this.getChildAt(i);
                colorizeSelection(root,i==index);
            }
        } catch (Exception e) {
            LogHelper.WriteLogError("error in colorizeSelection function", e);
        }
    }

    //this function is called recursively to scan all childs of a given view
    private void colorizeSelection(ViewGroup v,boolean selected){
        for (int j = 0; j < v.getChildCount(); j++) {
            if(v.getChildAt(j) instanceof ViewGroup)
                colorizeSelection((ViewGroup)v.getChildAt(j),selected);
            else if (v.getChildAt(j) instanceof MyLabel) {
                if(selected)
                    ((MyLabel)v.getChildAt(j)).setTextColor(getResources().getColor(R.color.White));
                else
                    ((MyLabel)v.getChildAt(j)).setTextColor(getResources().getColor(R.color.black));
                ((NtvLabel)v.getChildAt(j)).invalidate();
            }

        }
    }

    private void initStyle(AttributeSet attrs) {
        _selectedIndex = -1;
        this.setBackgroundResource(R.drawable.red_border_fat);
        this.setPadding(3, 3, 3, 3);

        this.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
                colorizeSelection(arg2);
                _selectedIndex = arg2;

            }
        });

    }

} 
```

我仍在等待更好的方法的建议......无论如何，这现在有效:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:36:25.143

当您单击其他视图时，如果它被取消选择，请考虑编写代码以将其全部`onLostFocus`选中`ListView`

# android - 无法从 SQLite 数据库中提取数据并显示在活动中

> ID：13843126
> 
> 赞同：1
> 
> 时间：2012-12-12T15:32:31.650
> 
> 标签：android, sqlite

我有一个 SQLiteHelper 源文件，我用它来创建数据库等等。我有另一个需要实例化数据库、提取数据并显示到 UI 的源文件。但是，当我在模拟器上启动应用程序时，应用程序崩溃了。我不确定出了什么问题。源文件中没有给出错误。

餐厅数据库源文件

```
package com.demostudio.restaurants;

import android.content.ContentValues;
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class RestaurantDB extends SQLiteOpenHelper {

static final String dbName = "RestaurantDB";
static final Integer dbVersion = 1;

static final String restaurantListTable = "RestaurantList";
static final String colRestaurantID = "RestaurantID";
static final String colRestaurantName = "RestaurantName";
static final String colRestaurantStore = "StoreNo";

public RestaurantDB(Context context) {
super(context, dbName, null, dbVersion);
// TODO Auto-generated constructor stub
}

@Override
public void onCreate(SQLiteDatabase db) {
// TODO Auto-generated method stub

String newTableSQL = 
        "CREATE TABLE "+
        restaurantListTable+
        " ("+colRestaurantID+" INTEGER PRIMARY KEY AUTOINCREMENT, "+
        colRestaurantName+" TEXT NOT NULL, "+
        colRestaurantStore+" TEXT NOT NULL "+
        ");";
db.execSQL(newTableSQL);

ContentValues cv = new ContentValues();
cv.put(colRestaurantName, "Restaurant AAA");
cv.put(colRestaurantStore, "1");
db.insert(restaurantListTable, null, cv);

cv.put(colRestaurantName, "Restaurant BBB");
cv.put(colRestaurantStore, "2");
db.insert(restaurantListTable, null, cv);

db.close();

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
// TODO Auto-generated method stub

}
} 
```

AllRestaurants 源文件

```
package com.demostudio.restaurants;

import android.app.ListActivity;
import android.database.Cursor;
import android.os.Build;
import android.os.Bundle;
import android.support.v4.widget.SimpleCursorAdapter;

public class AllRestaurants extends ListActivity {
 RestaurantDB db = null;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_listview);  
 db=new RestaurantDB(AllRestaurants.this);    
onPostExecute( ) ;
}

private Cursor doQuery() {
return(db.getReadableDatabase().rawQuery("SELECT colRestaurantID AS _id, colRestaurantName, colRestaurantStore "
+ "FROM RestaurantListTable ORDER BY colRestaurantName", null));

}

public void onPostExecute( ) {
SimpleCursorAdapter adapter;

if (Build.VERSION.SDK_INT>=Build.VERSION_CODES.HONEYCOMB) {
    adapter=new SimpleCursorAdapter(this, R.layout.activity_all_restaurants,
            doQuery(), new String[] {
        RestaurantDB.colRestaurantName,
        RestaurantDB.colRestaurantStore },
        new int[] { R.id.title, R.id.value },
        0);
    }
else {
    adapter=new SimpleCursorAdapter(this, R.layout.activity_all_restaurants,
            doQuery(), new String[] {
        RestaurantDB.colRestaurantName,
        RestaurantDB.colRestaurantStore },
        new int[] { R.id.title, R.id.value });
    }

setListAdapter(adapter);
}
} 
```

活动列表视图 XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="wrap_content" >
<ListView
    android:id="@android:id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />
</LinearLayout> 
```

activity_all_restaurants XML

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content">

<TextView
android:id="@+id/title"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignParentLeft="true"
android:textSize="20sp"
android:textStyle="bold"/>

<TextView
android:id="@+id/value"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignParentRight="true"
android:textSize="20sp"
android:textStyle="bold"/>

</RelativeLayout> 
```

日志文件

> 12-13 14:08:52.805：W/Trace(3861)：来自 nativeGetEnabledTags 的意外值：0
> 12-13 14:08:52.805：W/Trace(3861)：来自 nativeGetEnabledTags 的意外值：0
> 12-13 14:08 :54.795: D/dalvikvm(3861): GC_FOR_ALLOC 释放 68K, 7% 释放 2670K/2860K, 暂停 139ms, 总共 143ms
> 12-13 14:08:54.826: I/dalvikvm-heap(3861): Grow heap (frag case)为 3.796MB 分配 1127536 字节
> 12-13 14:08:54.946: D/dalvikvm(3861): GC_FOR_ALLOC 释放 1K, 5% 空闲 3770K/3964K, 暂停 112ms, 总共 112ms
> 12-13 14:08:55.145: D /dalvikvm(3861): GC_CONCURRENT freed <1K, 5% free 3785K/3964K, paused 12ms+27ms, total 203ms
> 12-13 14:08:55.618: D/AndroidRuntime(3861): 关闭VM
> 12-13 14:08:55.618: W/dalvikvm(3861): threadid=1: 线程退出未捕获异常 (group=0x40a70930)
> 12-13 14:08:55.715: E/AndroidRuntime(3861): 致命异常: main
> 12-13 14:08:55.715: E/AndroidRuntime(3861): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.demostudio.restaurants/com.demostudio.restaurants.AllRestaurants}: java.lang.IllegalArgumentException: column '_id' 不存在
> 12-13 14:08:55.715: E/AndroidRuntime(3861): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
> 12-13 14:08:55.715: E/AndroidRuntime( 3861): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
> 12-13 14:08:55.715: E/AndroidRuntime(3861): 在 android.app.ActivityThread.access$600(ActivityThread.java:141)
> 12-13 14:08:55.715: E/AndroidRuntime(3861): 在 android .app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
> 12-13 14:08:55.715: E/AndroidRuntime(3861): 在 android.os.Handler.dispatchMessage(Handler.java:99)
> 12-13 14 :08:55.715: E/AndroidRuntime(3861): 在 android.os.Looper.loop(Looper.java:137)
> 12-13 14:08:55.715: E/AndroidRuntime(3861): 在 android.app.ActivityThread。 main(ActivityThread.java:5039)
> 12-13 14:08:55.715: E/AndroidRuntime(3861): at java.lang.reflect.Method.invokeNative(Native Method)
> 12-13 14:08:55.715: E/AndroidRuntime (3861): 在 java.lang.reflect.Method.invoke(Method.java:511)
> 12-13 14:08:55.715: E/AndroidRuntime(3861): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
> 12-13 14:08:55.715: E/AndroidRuntime( 3861): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
> 12-13 14:08:55.715: E/AndroidRuntime(3861): 在 dalvik.system.NativeStart.main(Native Method)
> 12-13 14:08:55.715: E/AndroidRuntime(3861): 由: java.lang.IllegalArgumentException: 列 '_id' 不存在
> 12-13 14:08:55.715: E/AndroidRuntime(3861): 在 android .database.AbstractCursor.getColumnIndexOrThrow(AbstractCursor.java:303)
> 12-13 14:08:55.715: E/AndroidRuntime(3861): 在 android.support.v4.widget.CursorAdapter.init(CursorAdapter.java:174)
> 12-13 14:08:55.715: E/AndroidRuntime(3861): 在 android.support.v4.widget.CursorAdapter.(CursorAdapter.java:151)
> 12-13 14:08:55.715: E/AndroidRuntime(3861):在 android.support.v4.widget.ResourceCursorAdapter.(ResourceCursorAdapter.java:93)
> 12-13 14:08:55.715: E/AndroidRuntime(3861): 在 android.support.v4.widget.SimpleCursorAdapter.(SimpleCursorAdapter.java: 89)
> 12-13 14:08:55.715: E/AndroidRuntime(3861): 在 com.demostudio.restaurants.AllRestaurants.onPostExecute(AllRestaurants.java:27)
> 12-13 14:08:55.715: E/AndroidRuntime(3861) : 在 com.demostudio.restaurants.AllRestaurants.onCreate(AllRestaurants.java:18)
> 12-13 14:08:55.715: E/AndroidRuntime(3861): 在 android.app.Activity.performCreate(Activity.java:5104)
> 12-13 14:08:55.715: E/AndroidRuntime(3861): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
> 12-13 14:08:55.715: E/AndroidRuntime(3861): 在 android. app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
> 12-13 14:08:55.715: E/AndroidRuntime(3861): ... 11 更多

我之前将 listview 与两个 textviews 放在同一个 XML 文件中，但它不起作用。所以现在我把它放在一个单独的 XML 文件中，但它仍然不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T15:18:57.343

在你`onCreate()`的助手中，你有：

```
String newTableSQL = 
    "CREATE TABLE "+
    `+
    " ("+colRestaurantID+" INTEGER PRIMARY KEY AUTOINCREMENT, "+
    colRestaurantName+" TEXT NOT NULL, "+
    colRestaurantStore+" TEXT NOT NULL "+
    ");"; 
```

请注意您如何连接字符串以创建完整的语句。生成的 SQL 将是：

```
CREATE TABLE RestaurantList (RestaurantID INTEGER PRIMARY KEY AUTOINCREMENT, RestaurantName TEXT NOT NULL, RestaurantStore TEXT NOT NULL ); 
```

根据您对`restaurantListTable`, `colRestaurantID`, `colRestaurantName`,的值`colRestaurantStore`。

但是，在您的`rawQuery()`通话中，您的 SQL 是这样的：

```
SELECT colRestaurantID AS _id, colRestaurantName, colRestaurantStore FROM RestaurantListTable ORDER BY  colRestaurantName 
```

`rawQuery()`请注意，您在SQL中的列名在`col`它们前面，而您的`CREATE TABLE`. 这不起作用，因为您需要列名保持一致。

是否更改您的`CREATE TABLE`陈述或`SELECT`陈述取决于您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:18:51.323

```
private Cursor doQuery() {
return(db.getReadableDatabase().rawQuery("SELECT colRestaurantID AS _id,    colRestaurantName, colRestaurantStore "
+ "FROM RestaurantListTable ORDER BY colRestaurantName", null));
} 
```

我应该改用以下内容：

```
private Cursor doQuery() {
return(db.getReadableDatabase().rawQuery("SELECT RestaurantID AS _id, RestaurantName, StoreNo "
+ "FROM RestaurantList ORDER BY RestaurantName", null));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:43:14.833

你又做了。如果您需要数据库实例化一个字段，请更改`RestaurantDB db=new RestaurantDB(AllRestaurants.this);`为`db=new RestaurantDB(AllRestaurants.this);`

# prototypejs - jQuery 元素观察者的原型风格

> ID：13843128
> 
> 赞同：1
> 
> 时间：2012-12-12T15:32:41.503
> 
> 标签：prototypejs

我需要用新的替换旧的事件监听器代码，但不删除旧的：

```
onchange="func1();func2();" 
```

需要替换为：

```
onchange="newFunc();func1();func2();" 
```

通过 JQuery 向元素的 onChange 事件添加新代码很简单：

```
var element = $('element');
var _onchange = element.onchange;
element.onchange = function() {
        //some additional code
        if (typeof(_onchange) == 'function') {
            _onchange();
        }
}; 
```

现在我需要使用 Prototype 重写它。我想它会像：

```
element.observe('change', function() {

    // new code here
    // then old onChange

}.bindAsEventListener(element))); 
```

如何获取现有的 onChange 代码？...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:46:23.440

您实际上不需要，`.bindAsEventListener()`除非在极少数情况下

所以将事件观察添加到元素

```
$('element').observe('change',function(){
    //onchange code
}); 
```

如果您这样做 - 它会将新代码添加为观察者，而不会删除为该元素和事件设置的任何其他观察者

# c# - 忽略嵌套类的自动映射器中的属性

> ID：13843136
> 
> 赞同：0
> 
> 时间：2012-12-12T15:33:06.183
> 
> 标签：c#, automapper

我遇到一个问题，automapper 正在尝试映射我不希望它映射的属性。我可以通过将属性重命名为其他名称来解决此问题，但我想使用该名称并且我想知道如何解决此类问题。

我的代码看起来像这样。

```
public abstract class Task
    {
        public int Id { get; set; }
        public int ProjectId { get; set; }
        public virtual Project Project { get; set; }
        public string Title { get; set; }
    }

 public class BasicTask : Task
    {
    }
public abstract class Project
    {

        public virtual int Id { get; set; }
        public virtual string Title { get; set; }
        public virtual ICollection<Task> Tasks { get; set; }
        [NotMapped]
        public abstract string ProjectTypeDescription { get; }

    }
public class BasicProject : Project
    {
        public override string ProjectTypeDescription
        {
            get { return "Basic Project"; }
        }
    }

public abstract class TaskViewModel
    {
        public int Id { get; set; }
        public string Title { get; set; }
        public abstract string TaskType { get; }
        //This is the property giving me issues
        public ProjectDetails Project { get; set; }

        public class ProjectDetails
        {
            public int Id { get; set; }
            public string Title { get; set; }
        }
    }
public class BasicTaskViewModel : TaskViewModel
    {
        public override string TaskType
        {
            get { return "Basic"; }
        }
    }
public abstract class ProjectViewModel
    {
        public int Id { get; set; }
        public string Title { get; set; }
        public SelectList ProjectTypes { get; set; }
        public abstract string ProjectType { get; }
        public IEnumerable<TaskViewModel> Tasks { get; set; }
    }
public class BasicProjectViewModel : ProjectViewModel
    {
        public override string ProjectType
        {
            get { return "Basic Project"; }
        }
    } 
```

我的任务映射看起来像（我删除了项目映射，因为我可以在没有这些映射的情况下复制问题）

```
Mapper.CreateMap<Task, TaskViewModel>()
                .ForMember(dest => dest.Project, opt => opt.Ignore())
                .Include<BasicTask, BasicTaskViewModel>();
            Mapper.CreateMap<BasicTask, BasicTaskViewModel>();

            Mapper.CreateMap<TaskViewModel, Task>()
                .Include<BasicTaskViewModel, BasicTask>();
            Mapper.CreateMap<BasicTaskViewModel, BasicTask>();

            Mapper.CreateMap<Project, TaskViewModel.ProjectDetails>(); 
```

我正在使用扩展方法进行映射

```
public static TResult MapTo<TResult>(this object self)
        {
            return (TResult)Mapper.Map(self, self.GetType(), typeof(TResult));
        } 
```

使用失败的一个例子是

```
TaskViewModel vm = new BasicTaskViewModel()
            {
                Id = 1,
                Project = new TaskViewModel.ProjectDetails()
                {
                    Id = 1,
                    Title = "Some Title",
                }
            };

            Task m = vm.MapTo<Task>(); 
```

对不起，很长的帖子，我只是不知道问题出在哪里。

如果我将 taskviewmodel 中的 Project 重命名为其他名称，它可以工作并且不会将 TaskViewModel.ProjectDetails 映射到我想要的 Project。

我已经尝试`ForSourceMember(src => src.Project, opt => opt.Ignore())`在每个可以添加的地方添加

当我运行这个时，我得到以下信息

```
 Missing type map configuration or unsupported mapping.

Mapping types:
ProjectDetails -> Project
amtest.ViewModel.TaskViewModel+ProjectDetails -> amtest.Models.Project

Destination path:
BasicTask.Project.Project

Source value:
amtest.ViewModel.TaskViewModel+ProjectDetails
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
ProjectDetails -> Project
amtest.ViewModel.TaskViewModel+ProjectDetails -> amtest.Models.Project

Destination path:
BasicTask.Project.Project

Source value:
amtest.ViewModel.TaskViewModel+ProjectDetails 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:41:01.490

将忽略也添加到子类的映射中是否有帮助？

```
Mapper.CreateMap<BasicTaskViewModel, BasicTask>()
      .ForMember(dest => dest.Project, opt => opt.Ignore()); 
```

# javascript - 使用 load() 包含的页面的范围

> ID：13843139
> 
> 赞同：0
> 
> 时间：2012-12-12T15:33:10.710
> 
> 标签：javascript, jquery, scope

我有一个`index.php`和一个`contact.php`。

`index.php``load()`像这样使用：`$("#content").load("contact.php");`一切都很棒......

我的问题是`contact.php`，有一个表单，提交表单时我似乎无法运行函数。

index.php 已加载 jquery。我已经尝试将此功能放入和取出准备好的标签：

```
function contact_submit(){
   alert('a');
} 
```

在contact.php上：

```
<form .....
   <input onclick="contact_submit();"  .... 
```

我一直在试验，并将该功能放在contact.php上，但仍然没有运气。我确实注意到，如果我想在 contact.php 上使用 jquery，我需要在该页面上包含 jquery.js（它不会从索引中窃取它）。

有谁知道我做错了什么，或者我如何可以在 index.php 上的函数在`load`ed contact.php 中使用？如果您需要更多我的代码，请告诉我...

**编辑**我是否需要将我的全局函数放在一个 .js 文件中并将它们加载到将要使用的所有页面上？我知道这听起来像是一个基本问题，但是`load()`在我的索引页面上使用不重复使用 Javascript 函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:41:37.937

该事件不会随风而去。您需要在 index.php 上添加一些内容或使用 jQuery 的 getScript 方法。如果你在 index.php 上放了一些东西，你就只想使用 jQuery 的事件委托。

```
$('form').on('click','input',contact_submit); 
```

否则，我会推荐这个：[http ://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:41:17.310

您需要做的是添加一个事件侦听器并在加载所有 DOM 元素后执行代码，前提是您的 php.ini 中没有错误。

其中一些可能是：

1.  [http://api.jquery.com/live/](http://api.jquery.com/live/)
2.  [http://api.jquery.com/on/](http://api.jquery.com/on/)
3.  [http://api.jquery.com/ready/](http://api.jquery.com/ready/)

前两个适用于单个页面，第三个适用于 DOM。

# objective-c - 为什么内存消耗会增加？

> ID：13843142
> 
> 赞同：-1
> 
> 时间：2012-12-12T15:33:13.863
> 
> 标签：objective-c, ios, memory-management

这是一段非常简单的代码：

```
- (void)functionOne
 {
   [self performSelector:@selector(functionTwo) withObject:nil afterDelay:1.0];
 }
- (void)functionTwo
 {
   [self performSelector:@selector(functionOne) withObject:nil afterDelay:1.0];
 } 
```

正如您所看到的，这两种方法中没有什么会导致内存消耗的增长。但它会增长。非常缓慢，但确实如此。每三秒大约 0.01 MB。为什么？我怎样才能避免它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:46:36.523

您正在有效地创建一个无限循环。如果您想每隔一秒切换一次对象的状态（正如您在评论中所说），请这样做：

像这样创建一个方法：

```
- (void)functionOne
{
    if( [obj isEqual:stateA] ) {
        obj = stateB;
    } else {
        obj = stateA;
    }
} 
```

并用计时器调用它：

```
NSTimer* myTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self
                               selector:@selector(functionOne) userInfo:nil repeats:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:52:46.697

内存增长仅仅是因为应用程序需要保持某种状态。每次调用执行选择器时，选择器都会被压入堆栈。此堆栈保存在内存中。因此增长。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:48:39.000

为避免无限循环，您应该使用 a `NSTimer`and one 函数，在其中切换对象的状态。

在您的 init 方法中，或者`viewDidLoad`您应该启动一个计时器，例如

```
- (void)viewDidLoad {
    [super viewDidLoad];
    [NSTimer scheduledTimerWithTimeInterval:1.0
        target:self
        selector:@selector(switchState:)
        userInfo:nil
        repeats:YES];
} 
```

然后你使用一种方法，比如

```
- (void) switchState:(NSTimer *)timer {
    if ([[self yourState] isEqual:stateOne]) {
        [self setYourState:stateTwo];
    } else {
        [self setYourState:stateOne];
    }
} 
```

有关更多信息，请参阅[http://developer.apple.com/library/ios/#documentation/cocoa/reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html](http://developer.apple.com/library/ios/#documentation/cocoa/reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)

# c - 使用循环添加整数

> ID：13843145
> 
> 赞同：0
> 
> 时间：2012-12-12T15:33:25.793
> 
> 标签：c

我正在为我的大学课程用 C 语言编写应用程序。在我的应用程序的一部分中，我迭代地增加一个整数。使用 printf 语句，我可以看出 int1 应该增加到 20，但随后运行失败。我想知道为什么会这样？

```
int main() {
    int i,int1=0, int2=0;
    for (i = 0; i<10; i++) {
        int1 = (int2 + 2);
        int2 = int1;
    }
} 
```

该程序必须与 ANSI C 内联，我相信它声明使用：

```
int1 = (int2 + 2); 
```

是未定义的行为，因为编译器无法保证首先处理哪个“相同”变量。（但是，如果我错了，请纠正我！）这就是为什么我采取了更长的方式，但是使用任何一种方式应用程序都失败了。

这失败的原因是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T15:38:52.153

您的程序没有失败，您只是`return 0;`在程序结束时忘记了，以表明您的程序运行正确。

至于“未定义的行为”：不，那是完全有效的 C 代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T15:45:07.827

您的代码看起来（并运行）很好......但关于您的“失败”评论：

`In my compiler I am told that the build is successful, when the application then runs it says RUN FAILED (exit value 3, total time: 292ms`

那么你的程序应该返回一个值：

```
int main() 
```

说“我是一个叫做 main 的函数，我不带参数，我返回一个 int”，但是你的程序没有返回任何东西。尝试添加一个 return 语句：

```
int main() {
    int i,int1=0, int2=0;
    for (i = 0; i<10; i++) {
        int1 = (int2 + 2);
        int2 = int1;
    }
    return 0; // Note: a '0' return is normally success
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T15:38:27.960

你有

```
int1 = (int2 + 2); 
```

不是

```
 int1 = (int1 + 2); 
```

# c# - 如何抑制整个命名空间文件的 StyleCop 警告

> ID：13843148
> 
> 赞同：15
> 
> 时间：2012-12-12T15:33:32.880
> 
> 标签：c#, stylecop

我正在使用 Style Cop 4.7 版。全局抑制不适用于选定命名空间的每个成员。

我在同一个命名空间（StyleCopSample.Test）中有两个文件。当我在第一个文件中设置抑制消息时，消息仅针对该文件进行抑制，但第二个文件仍会收到警告。

第一个文件的内容：

```
[assembly: SuppressMessage("CSharp.DocumentationRules", "*", Scope = "Namespace", Target = "StyleCopSample.Test")]

namespace StyleCopSample.Test
{
  class TestFirst {}
} 
```

第二个文件的内容：

```
namespace StyleCopSample.Test
{
  class TestSecond {}
} 
```

我不想为同一命名空间的每个物理文件描述抑制消息属性。有任何想法吗？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T21:09:02.087

我认为最好禁用 StyleCop 设置文件中的文档规则。

只需从项目上下文菜单中打开设置对话框。

![菜单项](../Images/6e9103483e9121a37c397b97efd07211.png)

然后取消选中“文档规则”复选框。

![取消选中此项](../Images/c0d53007661d92b6769f82d05e80f9ba.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T01:42:35.290

该`SuppressMessage`指令将仅处理当前文件（请参阅[此 stylecop 问题](http://stylecop.codeplex.com/workitem/7352)中的评论）。

您可以通过[文件列表](http://stylecop.codeplex.com/wikipage?title=Using%20File%20Lists&referringTitle=Documentation)实现您想要的，尽管如果您只想应用此排除的几个文件，这将最有效。如果您希望将其应用于特定项目中的所有文件，那么最简单的方法可能是通过前面提到的设置对话框简单地修改设置。

或者，您可以将所有与命名空间相关的文件放到一个单独的文件夹中，并在该文件夹中有一个自定义设置文件，以从这些特定文件中排除这些规则。

# php - PHP 会话自行取消设置

> ID：13843152
> 
> 赞同：0
> 
> 时间：2012-12-12T15:33:42.173
> 
> 标签：php, session

每当我刷新页面时，我的会话都会保持不稳定，但是当我进行控制测试时，它似乎工作正常。

控制（保持数据）：

```
<?php
session_start();
echo(var_dump($_SESSION));
$_SESSION['name'] = 'john doe';
?> 
```

index.php 顶部

```
<?php
session_start();
echo(var_dump($_SESSION));
include('utils/utils.php'); 
?> 
```

登录页面：

```
<?php
session_start();
include('utils.php');
if(isset($_POST['email']) && isset($_POST['password'])){
    $email = filter($_POST['email']);
    $password = getPwd(filter($_POST['password']));
    if(!isset($_SESSION['email']) && !isset($_SESSION['password'])){
        if(isAccount($email, $password)){
            $key = genAuthKey();
            $_SESSION['email'] = $email;
            $_SESSION['auth_key'] = $key;
            mysql_query("update `users` set `auth-key`= '$key' where `email`='$email'") or die(mysql_error());
            print("ok");
        }else {
            print('error');
        }
    }else {     
        print('error');
        logOut();
    }
}else {
print('error');
}
?> 
```

代码被触发了，因为它更新了表中的 auth-key。老实说，我不知道问题是什么。

此外，当我重新加载索引页面时，会话未设置。

我有更多的信息。这些页面可以保存会话数据并保留它，但是一旦加载了另一个使用会话的页面，它将取消设置所有数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:53:40.640

检查您是否将 Unicode 编码的 PHP 文件与[BOM](http://en.wikipedia.org/wiki/Byte_order_mark)一起使用。

PHP 不知道 BOM。BOM 会在您的第一个之前产生输出，`<?php`因此 PHP 无法为会话 cookie 设置相关的 HTTP 标头。

从文档：

> 要使用基于 cookie 的会话，必须在向浏览器输出任何内容之前调用 session_start()。

# html - 浏览器 html 路径

> ID：13843160
> 
> 赞同：1
> 
> 时间：2012-12-12T15:34:04.577
> 
> 标签：html, winforms, browser

我有一个 winforms 项目，它在 html 页面中使用 javascript 将谷歌地图放到 webbrowser 上。html 页面构建操作是“内容”，复制到输出目录值是“始终”，完整路径与提供给 webbrowser.url 的路径相同。

这在 VS2010 开发环境中工作正常，在开发机器上发布后，但将发布的项目移动到另一台机器后，webbrowser 初始化失败，并显示消息“此程序无法显示网页”。

我的想法已经用完了，所以任何建议都将不胜感激。

# assembly - 在 OpenVMS 上进行汇编开发？

> ID：13843162
> 
> 赞同：0
> 
> 时间：2012-12-12T15:34:13.663
> 
> 标签：assembly, compilation, linker, vms, openvms

有人可以向我解释如何在 OpenVMS 上进行汇编开发，我已经在 OpenVMS 上使用 C 语言进行开发，而且我刚刚开始在 Windows 和 Linux 中进行汇编。如何编译、链接和运行 .asm 程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T06:53:38.473

只需使用 HELP 和 RTFM（阅读精美手册）

建议的 Google 字符串 = site:hp.com openvms 宏

下面是我刚刚输入的一个简单示例。创造; 编译；关联; 跑。

这是在安腾上。对于这样的琐碎程序，Alpha 和 Vax 将完全相同

最难的部分是在这里粘贴代码示例......如果该行没有以 4+ 个空格开头，{ } 代码块正在占用我的换行符。奇怪的！'试图帮助'POS！

首先，创建一个文件：

```
$CREATE test.mar 
```

然后我们将此文本放入该文件中：

```
 .psect  data    wrt,noexe
hello:
     .ascid  "Hello World"

     .psect  code    nowrt,exe

     .entry  start, 0
     movl    #5, R8
10$:
     pushaq  hello
     calls   #1, G^lib$put_output
     sobgtr  R8, 10$
     ret
     .end start 
```

完成后，点击 control-z 以返回 DCL 并编译并运行：

```
$ MACRO test
$ LINK test
$ RUN test 
Hello World
Hello World
Hello World
Hello World
Hello World
$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-16T18:54:08.137

我喜欢 MACRO-32，我更喜欢它不那么知名但非常优雅的表亲 BLISS-32，但在我 45 年的程序员生涯中，我只用 MACRO 编写过一个商业应用程序，我这样做是因为我需要超快速度而且我没有其他高级语言替代品。

所以 MACRO 就像一个给你时间的女朋友（！！）但不是你想要安定下来结婚的女朋友。为此，您需要使用 C 或 C++ 或 BASIC 甚至 .. COBOL 进行编码，因为这些语言可以很好地“完成工作”以投入生产，并且在原始编码器继续前进后很长时间仍可维护。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-14T18:07:55.697

[DBL](http://www.dibol.com)是起源 DiBOL（面向数字业务的语言）的当前化身，是 COBOL 的替代品。对于应用程序，我推荐 DBL 而不是 COBOL 或 BASIC。我已经通过 DiBOL/DBL 在 MACRO 中编码。

# c# - 禁止输入从搜索魅力触发到应用程序

> ID：13843163
> 
> 赞同：0
> 
> 时间：2012-12-12T15:34:13.897
> 
> 标签：c#, windows-8, microsoft-metro, winrt-xaml

我正在开发一个应用程序，该应用程序的搜索页面既是默认屏幕又是登录页面，当我的应用程序打开时通过搜索魅力激活查询时。布局与 Bing 应用程序非常相似，我有一个带有按钮的文本框来启动搜索。我有这个按钮侦听 Enter Key Press，它有效，但是当通过搜索魅力激活页面时，当在搜索魅力文本框中按下 Enter 时，Enter Key Press 行为被触发到我的按钮，导致搜索触发两次。Bing 应用程序无需重复搜索即可处理此行为，因此很可能会完成。我无法想出办法来处理这个问题，即使确保焦点在我的按钮上也不起作用，因为 Key Listener 似乎在侦听任何地方按下的所有键，包括搜索魅力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:42:16.980

只需将搜索按钮定义为默认按钮：

```
<Button IsDefault="true" ...>...</Button> 
```

像这样，根本不需要按键事件。

# database - 如何在 VS 2012 的 SQL Server 数据库项目中存储静态数据

> ID：13843164
> 
> 赞同：23
> 
> 时间：2012-12-12T15:34:16.037
> 
> 标签：database, version-control, visual-studio-2012, sql-server-2012

我正在尝试使用 SQL Server 数据库项目来保留我们所有的表、存储过程、视图等脚本。我现在想要一种方法来保留我们所有的参考（静态）数据。当工具或项目运行时，它将安装所有数据库对象并插入所有参考数据。

我为 vs 2010 找到了类似的文章，但他们使用的是面向数据库专业人员的 Team Edition 之类的东西。

*   将我们的数据库置于源代码控制之下。
*   将我们的本地开发数据库与源代码控制中的最新版本同步。
*   使用 Visual Studio 2012 和 SQL Server 2012
*   尽可能使用 .Net 工具，而不是 Redgate 之类的工具（Redgate 很棒，但如果我可以在 VS 2012 中使用工具，我还不想放弃它）

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-21T17:22:02.980

您可以使用这种方法：

*   将您的参考数据放入 XML 文件中，每个表一个
*   将带有参考数据的 XML 文件添加到您的数据库项目中
*   使用部署后脚本从 XML 中提取数据并将其合并到您的表中

以下是每个步骤的更详细描述，并通过示例进行说明。假设您需要初始化具有以下结构的国家/地区表：

```
create table Country (
    CountryId uniqueidentifier NOT NULL,
    CountryCode varchar(2) NOT NULL,
    CountryName varchar(254) NOT NULL
) 
```

`ReferenceData`在您的数据库项目下创建一个名为的新文件夹。它应该是`Schema Objects`and的同级文件夹`Scripts`。

将一个名为的新 XML 文件添加`Country.xml`到该`ReferenceData`文件夹​​。按如下方式填充文件：

```
<countries>
    <country CountryCode="CA" CountryName="Canada"/>
    <country CountryCode="MX" CountryName="Mexico"/>
    <country CountryCode="US" CountryName="United States of America"/>
</countries> 
```

找到`Script.PostDeployment.sql`，并将以下代码添加到其中：

```
DECLARE @h_Country int

DECLARE @xmlCountry xml = N'
:r ..\..\ReferenceData\Country.xml
'

EXEC sp_xml_preparedocument @h_Country OUTPUT, @xmlCountry

MERGE Country AS target USING (
    SELECT c.CountryCode, c.CountryName
    FROM OPENXML(@h_Country, '/countries/country', 1)
    WITH (CountryCode varchar(2), CountryName varchar(254)) as c) AS source (CountryCode, CountryName)
ON (source.CountryCode = target.CountryCode)
WHEN MATCHED THEN
    UPDATE SET CountryName = source.CountryName
WHEN NOT MATCHED BY TARGET THEN
    INSERT (CountryId, CountryCode, CountryName) values (newid(), source.CountryCode, source.CountryName)
; 
```

我仅在 VS 2008 中尝试过此解决方案，但它应该与您的开发环境无关。

# .htaccess - 如何显示一个站点或页面，但使用 htaccess 显示不同的 URL？

> ID：13843166
> 
> 赞同：0
> 
> 时间：2012-12-12T15:34:23.033
> 
> 标签：.htaccess

我想显示`aaa.com/test.php`，但显示`bbb.com`在浏览器的 URL 字段中。根据[这个站点](https://support.mivamerchant.com/supportsuite/index.php?/Knowledgebase/Article/View/1113/88/point-alias-domains-to-a-specific-page-on-the-main-website)，我应该在`.htaccess`文件中使用以下内容`aaa.com`：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} bbbs.com$ [NC]
RewriteRule ^(.*)$ /test.php [R=301,L] 
```

但是，当我访问时`aaa.com/test.php`，没有重定向跟随。它仍然显示`aaa.com/test.php`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:19:51.360

这就像使用带有[[P] 代理标志](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_p)的 RewriteRule 一样简单，这会导致请求由[`mod_proxy`](http://httpd.apache.org/docs/current/mod/mod_proxy.html).

```
RewriteEngine on
RewriteRule ^(.*)$ http://destinationdomain.com/$1 [P] 
```

# jasper-reports - 在 Jasper 中将参数从主报表传递到子报表

> ID：13843167
> 
> 赞同：26
> 
> 时间：2012-12-12T15:34:29.507
> 
> 标签：jasper-reports, subreport

我有一个*JasperReport*，我将报告日期从主报告传递到子报告。这工作正常。我还有另一个我将相同的参数传递给具有多个子报表的子报表。当我在*Ireports*中预览它时，它的所有页面都显示为空白，这意味着正在调用子子报表，但由于所有子子报表 SQL 都以报表日期为条件，因此没有传递报表日期。如何将报告日期字段获取到子子报告？当我预览子报告并输入报告日期时，所有报告日期都有效，所有四个页面都填充了正确的数据。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-17T13:06:47.643

按照以下步骤将参数传递到子报表中：

1.  创建主报表参数，例如`DATE_PARAM`.
2.  打开子报表并创建一个同名同类型的参数。
3.  返回主报告
4.  右键单击子报表，选择属性
5.  选择参数
6.  将参数从主报表添加到子报表，参数名称相同

参数从主报表传递到子报表。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-12-12T22:13:53.643

我的猜测是他们使用的是默认值。

假设主报告中的参数`TEST_DATE`名称是，子报告中的名称是，`TEST_DATE2`那么您需要`subreport`在 XML 的开始和结束元素之间添加以下内容：

```
<subreportParameter name="TEST_DATE2">
    <subreportParameterExpression><![CDATA[$P{TEST_DATE}]]></subreportParameterExpression>
</subreportParameter> 
```

为了完整起见，这是一个具有主报表和子报表的示例，只需将值更改为`SUBREPORT_DIR`指向您放置它们的位置即可。

**报告1.jrxml**

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report1" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="7e2bc622-d768-437e-8c33-fc777bc06f8c">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <parameter name="TEST_DATE" class="java.util.Date"/>
    <parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
        <defaultValueExpression><![CDATA["C:\\Reports\\"]]></defaultValueExpression>
    </parameter>
    <pageHeader>
        <band height="83" splitType="Stretch">
            <textField>
                <reportElement uuid="4a2cf434-4473-48db-a89f-17a19d25cc4c" x="0" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$P{TEST_DATE}]]></textFieldExpression>
            </textField>
            <subreport>
                <reportElement uuid="54c02e96-6d47-49db-9b9c-58e1dd153242" x="0" y="30" width="200" height="35"/>
                <subreportParameter name="TEST_DATE2">
                    <subreportParameterExpression><![CDATA[$P{TEST_DATE}]]></subreportParameterExpression>
                </subreportParameter>
                <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
                <subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "report1_subreport1.jasper"]]></subreportExpression>
            </subreport>
        </band>
    </pageHeader>
</jasperReport> 
```

**报告1_subreport1.jrxml**

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report1_subreport1" language="groovy" pageWidth="200" pageHeight="35" whenNoDataType="AllSectionsNoDetail" columnWidth="200" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="3cedac90-63cb-43cb-9d0f-e401543e65dd">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <parameter name="TEST_DATE2" class="java.util.Date" isForPrompting="false"/>
    <pageHeader>
        <band height="35" splitType="Stretch">
            <textField>
                <reportElement uuid="ca7f3da6-79f0-4d95-92db-6c5dbf777df9" x="0" y="15" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$P{TEST_DATE2}]]></textFieldExpression>
            </textField>
        </band>
    </pageHeader>
</jasperReport> 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-02-18T06:50:51.890

如果您使用 iReport 创建报告，则在 iReport 中打开主报告并选择`Subreport`并转到`property`报告部分，单击`Parameters`属性，然后单击`Copy from master`选项卡。从那里您可以选择要传递给子报告的参数。

# database - MS SQL Server 1 个字段的两个外键

> ID：13843177
> 
> 赞同：0
> 
> 时间：2012-12-12T15:35:13.037
> 
> 标签：database

我有 3 张桌子。

1.  雇员
2.  承包商
3.  工作

下图说明了表设计和关系的两种可能方案。

![场景](../Images/278568ced4cf2fefe602edc7ce239e0f.png)

第一种情况可能吗？就像有两个外键，每个外键来自不同的表到作业中的一个 ID 字段。

我应该使用第二种情况吗？但是我在工作中总是有 1 个空 ID 字段，因为它是从事这项工作的员工或承包商。

最后，有没有其他方法可以做到这一点？更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:38:30.407

我将只有一个 Employee 表并添加另一列来指示员工的类型。即完全取消承包商表。然后问题也消失了。

# iphone - iPad / iPhone上的vimeo电影覆盖不可点击

> ID：13843180
> 
> 赞同：0
> 
> 时间：2012-12-12T15:35:19.857
> 
> 标签：iphone, css, ipad, mobile, vimeo

我们在 giardinohotelgroup.ch 上有一个嵌入的背景电影（如果您单击一个小电影，整个电影就会开始）

在桌面上，一切都按预期工作（顶栏与电影重叠，链接仍然可点击）

问题是，相同的功能在 iPad/iPhone 上不起作用。只要电影没有开始，这些链接就可以点击。一旦用户按下播放按钮，链接就不再可点击。

有人知道为什么吗？不应该是 z-index 问题，因为链接不在电影后面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T18:00:57.667

当使用原生控件时，iOS 不允许与视频上方的任何元素进行交互，我们在当前版本的播放器中会这样做。在 iPhone 上，当他们点击播放时，它会自动进入全屏状态，没有办法阻止这种情况。

# iphone - 是否可以删除 iOS 主从视图上的“编辑”和“+”按钮？

> ID：13843183
> 
> 赞同：3
> 
> 时间：2012-12-12T15:35:27.820
> 
> 标签：iphone, ios, xcode, ipad, ios6

目前，我的 iOS (6) 应用程序使用 Master-Detail 视图模板，并预先填充了一些列表元素。用户当前可以选择“编辑”并添加到（“+”）列表。有没有办法删除这些按钮，以防止更改原始列表？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T15:39:34.540

是的，有一个简单的方法。

在中找到此代码`MasterViewController.m`并删除这些行`self.navigationItem.leftBarButtonItem = self.editButtonItem;`，`self.navigationItem.rightBarButtonItem = addButton;`

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    self.navigationItem.leftBarButtonItem = self.editButtonItem;

    UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(insertNewObject:)];
    self.navigationItem.rightBarButtonItem = addButton;
} 
```

# python - Python编码类型错误

> ID：13843185
> 
> 赞同：1
> 
> 时间：2012-12-12T15:35:45.423
> 
> 标签：python, html-parsing, beautifulsoup, lxml

我正在使用 beautifulsoup 和 lxml 来解析 html 页面。一开始我使用以下代码

```
for item in soup.find_all("td", { "class" : re.compile(r"^(s|sb)$") }):
    data_item = (''.join(str(item.find(text=True)))).strip().lower(); 
```

我收到以下错误

```
 data_item = (''.join(str(item.find(text=True)))).strip().lower();
 UnicodeEncodeError: 'ascii' codec can't encode character u'\u2019' in position 24: ordinal not in range(128) 
```

从[这个线程](https://stackoverflow.com/questions/9942594/unicodeencodeerror-ascii-codec-cant-encode-character-u-xa0-in-position-20)，我将我的代码更改为以下

```
for item in soup.find_all("td", { "class" : re.compile(r"^(s|sb)$") }):
      data_item = u' '.join(item.find(text=True)).encode('utf-8').strip().lower(); 
```

我收到以下错误

```
data_item = u' '.join(item.find(text=True)).encode('utf-8').strip();
TypeError 
```

我应该怎么办？

# javascript - 如何关闭彩盒？

> ID：13843188
> 
> 赞同：0
> 
> 时间：2012-12-12T15:35:53.417
> 
> 标签：javascript, jquery, colorbox

嗨，我点击时有一个链接打开一个带有表单的颜色框，当我点击提交按钮时，表单将通过 ajax 并基于返回的数据提交

```
 if(error on the server side){
   the error will be displayed at the top of the form;
   // colorbox still open
 }else{
   the returned data will be displayed on the original page;
   close the colorbox;
 } 
```

所以我做了所有的事情，除了关闭颜色框部分我使用了这段代码：

```
$.colorbox.close(); 
```

这也不起作用：

```
parent.jQuery.colorbox.close(); 
```

任何帮助，请提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:36:35.253

好久之前有这个了，不记得是哪个了

尝试这个...

```
$(window).colorbox.close(); 
```

或这个...

```
jQuery(window).colorbox.close(); 
```

或这个...

```
jQuery('#cboxClose').click(); 
```

# java - JSpinner 与其他 Swing 组件有何不同？

> ID：13843189
> 
> 赞同：2
> 
> 时间：2012-12-12T15:35:53.787
> 
> 标签：java, swing, jcomponent, jspinner

我有一种方法可以递归地启用/禁用`JPanel`. 还有例外列表。所以我可以做以下

*   禁用`panel1`除`textfield1, textfield3`应启用的所有组件。
*   启用所有组件，`panel2`除了`button2, label3`应该禁用的组件。

这是一个 SSCCE 正是这样做的：

```
import java.awt.Component;
import java.awt.Container;
import java.awt.GridLayout;
import java.util.HashSet;
import java.util.Set;

import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JSpinner;
import javax.swing.JTextField;
import javax.swing.SpinnerNumberModel;

public class Main {
    public static void main(String[] args) {
        JFrame frame = new JFrame();
        final JPanel panel = new JPanel(new GridLayout(3, 3));

        final JTextField textfield = new JTextField("asdf");
        final JButton button = new JButton("asdf");
        final JCheckBox checkbox = new JCheckBox("asdf");
        final JSpinner spinner = new JSpinner(new SpinnerNumberModel(1, 1, 100, 1));
        final JLabel label = new JLabel("asdf");

        panel.add(textfield);
        panel.add(button);
        panel.add(checkbox);
        panel.add(spinner);
        panel.add(label);
        // fill in some random stuff
        for (int i = 0; i < 4; i++)
            panel.add(new JLabel("asdf"));

        frame.setContentPane(panel);
        frame.setSize(300, 100);
        frame.setLocationRelativeTo(null);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        new Thread(new Runnable() {
            @Override
            public void run() {
                boolean toggle = true;
                while (true) {
                    toggle = !toggle;
                    Set<Component> enableList = new HashSet<Component>();
                    Set<Component> disableList = new HashSet<Component>();
                    enableList.add(textfield);
                    enableList.add(spinner);
                    disableList.add(checkbox);
                    setEnableAllRec(panel, toggle, disableList, enableList);
                    try {
                        Thread.sleep(1000);
                    } catch (InterruptedException e) {}
                }
            }
        }).start();
        frame.setVisible(true);
    }

    public static void setEnableAllRec(Container root, boolean defaultState, Set<Component> disableList, Set<Component> enableList) {
        if (root == null) return;
        for (Component c : root.getComponents()) {
            if (disableList != null && disableList.contains(c)) {
                c.setEnabled(false);
                disableList.remove(c);
            } else if (enableList != null && enableList.contains(c)) {
                c.setEnabled(true);
                enableList.remove(c);
            } else c.setEnabled(defaultState);
            if (c instanceof Container) setEnableAllRec((Container) c, defaultState, disableList, enableList);
        }
    }
} 
```

SSCCE 每秒将所有组件设置为交替启用/禁用。除了一些应该始终启用的组件和一些应该始终禁用的组件。除了`JSpinner`. 它被检测为组件，但无法在列表中找到（因此不作为特殊情况处理）。我尝试过的所有其他摆动组件都按预期工作。

你能告诉我有什么问题`JSpinner`吗？

我希望 SSCCE 不会太混乱...... ;)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:59:23.487

仅仅因为 JSpinner 包含其他组件，例如 2 个按钮和一个编辑器（请参阅 的代码`javax.swing.plaf.basic.BasicSpinnerUI`），并且您递归地访问所有容器，因此，也在`JSpinner`.

顺便说一句，您的线程违反了 Swing-EDT。你应该在一个`Swing Timer`

解决方案很简单：

```
import java.awt.Component;
import java.awt.Container;
import java.awt.GridLayout;
import java.util.HashSet;
import java.util.Set;

import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JSpinner;
import javax.swing.JTextField;
import javax.swing.SpinnerNumberModel;

public class Main {
    public static void main(String[] args) {
        JFrame frame = new JFrame();
        final JPanel panel = new JPanel(new GridLayout(3, 3));

        final JTextField textfield = new JTextField("asdf");
        final JButton button = new JButton("asdf");
        final JCheckBox checkbox = new JCheckBox("asdf");
        final JSpinner spinner = new JSpinner(new SpinnerNumberModel(1, 1, 100, 1));
        final JLabel label = new JLabel("asdf");

        panel.add(textfield);
        panel.add(button);
        panel.add(checkbox);
        panel.add(spinner);
        panel.add(label);
        // fill in some random stuff
        for (int i = 0; i < 4; i++) {
            panel.add(new JLabel("asdf"));
        }

        frame.setContentPane(panel);
        frame.setSize(300, 100);
        frame.setLocationRelativeTo(null);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        new Thread(new Runnable() {
            @Override
            public void run() {
                boolean toggle = true;
                while (true) {
                    toggle = !toggle;
                    Set<Component> enableList = new HashSet<Component>();
                    Set<Component> disableList = new HashSet<Component>();
                    enableList.add(textfield);
                    enableList.add(spinner);
                    disableList.add(checkbox);
                    setEnableAllRec(panel, toggle, disableList, enableList);
                    try {
                        Thread.sleep(1000);
                    } catch (InterruptedException e) {
                    }
                }
            }
        }).start();
        frame.setVisible(true);
    }

    public static void setEnableAllRec(Container root, boolean defaultState, Set<Component> disableList, Set<Component> enableList) {
        if (root == null) {
            return;
        }
        for (Component c : root.getComponents()) {
            if (disableList != null && disableList.contains(c)) {
                c.setEnabled(false);
                disableList.remove(c);
            } else if (enableList != null && enableList.contains(c)) {
                c.setEnabled(true);
                enableList.remove(c);
            } else {
                c.setEnabled(defaultState);
                if (c instanceof Container) {
                    setEnableAllRec((Container) c, defaultState, disableList, enableList);
                }
            }
        }
    }
} 
```

# javascript - jquery.datatables.editable - 突出显示选定的行

> ID：13843194
> 
> 赞同：0
> 
> 时间：2012-12-12T15:36:12.127
> 
> 标签：javascript, jquery, datatable

我是 JS 新手。当用户在可编辑的数据表中单击它时，如何突出显示选定的行？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:38:30.993

如果您使用的是 jquery 数据表插件，这里有一个示例：http: [//datatables.net/release-datatables/examples/api/select_row.html](http://datatables.net/release-datatables/examples/api/select_row.html)

```
$(document).ready(function() {
    /* Add/remove class to a row when clicked on */
    $('#example tr').click( function() {
        $(this).toggleClass('row_selected');
    } );

    /* Init the table */
    var oTable = $('#example').dataTable( );
} );

/*
 * I don't actually use this here, but it is provided as it might be useful and demonstrates
 * getting the TR nodes from DataTables
 */
function fnGetSelected( oTableLocal )
{
    return oTableLocal.$('tr.row_selected');
} 
```

# magento - 使用自定义属性更新 magento 价格

> ID：13843195
> 
> 赞同：0
> 
> 时间：2012-12-12T15:36:14.437
> 
> 标签：magento

我是 Magento 框架的新手。

谁能告诉我如何根据自定义属性为产品添加自定义定价。

例如：我不会输入价格，或者我会在管理面板中输入一个虚拟数字作为价格和其他属性，如重量和项目类型和类别。

根据商品的类别、重量和类型，我想计算实际价格

像`price=weight*category+typeOfItem`而且如果产品有任何特殊价格，它也应该与等级价格一起适用

我使用 Alan Storm 的博客创建了一个自定义模块，但我无法覆盖定价。有时它适用于产品列表页面，但从不适用于“层”价格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:52:41.017

假设您没有大量的重量和产品，您可能会发现为此使用可配置产品更容易

否则可能会考虑覆盖 Mage_Catalog_Model_Product_Type_Price 模型中的 getFinalPrice() 方法。

# python - 使用 python 正则表达式编辑 xml 文件

> ID：13843196
> 
> 赞同：0
> 
> 时间：2012-12-12T15:36:16.577
> 
> 标签：python, regex

我有一个如下的xml文件

```
<?xml version="1.0" encoding="utf-8"?>
<myTable xmlns="http://schemas.microsoft.com/windows/2008">
  <my id="1">Hi this is one</my>
  <my id="2">Hi this is one</my>
  <my id="6">Hi this is one</my> 
  <my id="7">Hi this is one</my>
   <my id="8">Hi this is one</my>
   <my id="9">Hi this is one</my>
</myTable> 
```

我想将（1）附加到第一个'my id =“1”'。这样我的结果xml将如下所示

```
<?xml version="1.0" encoding="utf-8"?>
<myTable xmlns="http://schemas.microsoft.com/windows/2008">
  <my id="1">Hi this is one(1)</my>
  <my id="2">Hi this is one</my>
  <my id="6">Hi this is one</my> 
  <my id="7">Hi this is one</my>
   <my id="8">Hi this is one</my>
   <my id="9">Hi this is one</my>
 </myTable> 
```

我希望这件事在 python 正则表达式中完成

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:44:56.683

是

```
import re

r = re.compile(r'(<my id="1">.*)(</my>)')

with open(infilename, 'r') as infile, open(newfile, 'w+') as outfile:
    for line in infile:
        match = r.search(line)
        if match:
            f.write(match.group(1) + '(1)' + match.group(2))
        else:
            f.write(line) 
```

你想要什么？

这将搜索具有给定模式的行，如果它们匹配，则获取它们的内容并在其间插入一些东西。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-12T15:40:10.303

创建一个新文件可以吗？如果是这样，那么：

```
import re

f = open(newfile, 'w+')

for line in open(your_file, 'r');
  match = re.search(r'id="1"', line)
  if match:
    f.write('<my id="1">Hi this is one(1)</my>')
  else:
    f.write(line)

f.close() 
```

# c++ - c++ 相对于第二列的降序

> ID：13843199
> 
> 赞同：0
> 
> 时间：2012-12-12T15:36:23.610
> 
> 标签：c++, sorting

数据如下的文本文件：

```
0 320.77
1 100.44
2 117.66
3 541.55 
```

数据相对于第一列进行排序，但我想根据第二列并按降序对其进行排序。

输出应如下所示：

```
3 541.55
0 320.77
2 117.66
1 100.44 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:56:22.080

我有一个类似于按第二种数据类型对文件进行排序的问题，我会给出代码，但这似乎是一个家庭作业问题，所以这里是我如何解决它的解释：

*   将行读入字符串
*   通过跳到下一个空格迭代到第二个数字
*   从字符串中获取第二个数字并将其放在单独的字符串中，然后 atoi() 字符串以获取整数
*   使用排序函数中的整数对字符串进行排序，然后调用`std::sort`函数`qsort()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-23T12:46:39.730

我认为如果我自娱自乐并提供答案，这不会损害@laky 现在的大学表现。

```
#include <utility>
#include <sstream>
#include <vector>
#include <iostream>
#include <algorithm>

using Entry = std::pair<int, float>;
using Storage = std::vector<Entry>;

void dump(const Storage& storage)
{
    for(auto& [i, v] : storage)
        std::cout << i << " " << v << "\n";
}

int main(void)
{
    std::stringstream input;
    input.str("0 320.77\n1 100.44\n2 117.66\n3 541.55\n");

    Storage storage;

    for ( /* read 'file' into vector storage for processing */
        Entry entry; 
        input >> entry.first >> entry.second && input.good();
        )
    {
        storage.push_back(std::move(entry));
    }

    std::cout << "Original data:\n";
    dump(storage);

    std::sort(storage.begin(), storage.end(), 
        [](Entry l, Entry r) /* sorting predicate */
        {
            return l.second > r.second;
        });

    std::cout << "Sorted data:\n";
    dump(storage);

    return 0;
} 
```

在[GodBolt上](https://godbolt.org/z/YefYqdTe7)

# ruby-on-rails - Rails HABTM 中间值

> ID：13843201
> 
> 赞同：3
> 
> 时间：2012-12-12T15:36:26.087
> 
> 标签：ruby-on-rails, ruby, has-and-belongs-to-many

我必须遵循以下关系：

```
class Course < ActiveRecord::Base
  attr_accessible :name
  has_and_belongs_to_many :users
end

class User < ActiveRecord::Base
  attr_accessible :name
  has_and_belongs_to_many :courses
end 
```

然后我有下表：

```
create_table :courses_users, :force => true, :id => false do |t|
  t.integer :user_id
  t.integer :course_id
  t.integer :middle_value
end 
```

如何访问（编辑/更新）多对多记录中的中间值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T15:45:16.387

HABTM 应该只用于存储关系。如果您有任何要存储在关系中的字段，您应该创建另一个模型，例如。`CourseSignup`. 然后，您将使用此模型创建`has_many :through => :course_signups`关系，因此您的模型将如下所示：

```
class Course < ActiveRecord::Base
  has_many :course_signups
  has_many :users, :through => :course_signups
end

class CourseSingup < ActiveRecord::Base
  belongs_to :course
  belongs_to :user
end

class User < ActiveRecord::Base
  has_many :course_signups
  has_many :courses, :through => :course_signups
end 
```

然后你可以`middle_value`在`CourseSignup`模型中添加你的。

[您可以在ActiveRecord 关联指南中](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)找到更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:40:12.833

你想要一个[`has_many :though`](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)，而不是一个 HABTM。

HABTM 没有连接模型，但有`has_many :through`。就像是：

```
class Course < ActiveRecord::Base
  has_many :enrollments
  has_many :users, :through => :enrollments
end

class Enrollment < ActiveRecord::Base
  belongs_to :course
  belongs_to :user
end

class User < ActiveRecord::Base
  has_many :enrollments
  has_many :courses, :through => :enrollments
end 
```

# javascript - 如何使用 javascript 将 PST 转换为 IST

> ID：13843203
> 
> 赞同：0
> 
> 时间：2012-12-12T15:36:28.693
> 
> 标签：javascript, date

我从数据库中获取 PST 日期格式，我需要转换 IST 格式。但我的系统也在 IST Formate 中。请检查此[http://jsfiddle.net/sfcdD/9/](http://jsfiddle.net/sfcdD/9/)。

```
 var date = "2012-12-12 05:18:28.541"; // PST date formate fetch from db
 var offset = (3600000*(+5.30)); // IST gmtOffset value

 var dateformate = 'dd/mm/yyyy "at" h:MM TT';

 var dateArray = (date).split(' ');
 var year = dateArray[0].split('-');
 var time = dateArray[1].split(':');

 var  d = new Date($.trim(year[0]), $.trim(year[1]-1), $.trim(year[2]), $.trim(time[0]), $.trim(time[1]));

 utc = d.getTime() +(d.getTimezoneOffset()*60000); //d.getTimezoneOffset() is taking local timezone

 nd = new Date(utc + parseInt(offset));

 alert(dateFormat(nd,dateformate));  // dispaly 12/12/2012 at 5:06 AM but need to display 12/12/2012 at 7:48 PM 
```

所以我的转换不起作用。它显示错误的日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:19:33.050

这个怎么样？

```
var date = "2012-12-12 05:18:28.541";
var offset = (3600000*(+5.50+8));
var dateformate = 'dd/mm/yyyy "at" h:MM TT';

var dateArray = (date).split(' ');
var year = dateArray[0].split('-');
var time = dateArray[1].split(':');

var d = new Date($.trim(year[0]), $.trim(year[1]-1), $.trim(year[2]), $.trim(time[0]), $.trim(time[1]));
var nd = new Date(d.getTime() + offset);
alert(dateFormat(nd,dateformate)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:52:25.867

```
var offset = (3600000*(+5.30)); // IST gmtOffset value 
```

应该

```
var offset = (3600000*(+5.50)); // IST gmtOffset value 
```

# c++ - 在 C++ 中初始化字符缓冲区

> ID：13843208
> 
> 赞同：1
> 
> 时间：2012-12-12T15:36:43.557
> 
> 标签：c++, visual-c++, memory-management, initialization, default-value

我正在 C++ 上编写应用程序并使用英特尔检查器进行内存分析。

但是，我对在内存分析测试中获得的各种结果有疑问，以发现潜在的内存问题。

我正在尝试做一个更好的稳定应用程序，我有几个问题我知道它们仍然是基础知识，此时我对代码进行了太多研究，我有点困惑。感谢您帮助他们澄清。

1.  我应该将 char buffer[30] 初始化为默认值吗？
2.  什么应该是 LPWSTR 的默认值（我试过 NULL）它仍然抱怨我的成员变量上的未初始化内存访问。
3.  初始化一个结构。我尝试使用 memset。探查器仍然看起来不高兴并抱怨未初始化的内存访问。

一个实例是在我的调用者类构造函数中，我已将句柄初始化为

```
m_hidHandle = NULL; //member variable and an object of struct hid_device 
```

之后我打电话做hid_write。

在那里，hid_write 又调用 writeFile（这是 api 类 hid.c）

```
WriteFile(dev->device_handle, buf, length, NULL, NULL); 
```

在这里，我抱怨未初始化的内存访问。我什至尝试检查 WrtieFile 的 api 文档。仍然不洁我正在抱怨内存问题。

另一个例子是我有一个成员变量

```
WINHTTP_CURRENT_USER_IE_PROXY_CONFIG m_pConfig; 
```

在构造函数中，我试图将结构初始化为 NULL：

```
memset( &m_pConfig, 0, sizeof(WINHTTP_CURRENT_USER_IE_PROXY_CONFIG) ); 
```

它抱怨未初始化的内存访问。我什至试过

```
//proxyConfig.fAutoDetect = false;
//proxyConfig.lpszAutoConfigUrl = NULL;
//proxyConfig.lpszProxy = NULL;
//proxyConfig.lpszProxyBypass = NULL; 
```

仍然没有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T15:42:52.647

1：使用`std::string`，它将被默认初始化：

```
std::string s; //empty 
```

否则，`char s[30] = {};`将用 0 填充它。`std::string`对于稳定的应用程序来说要好得多。如果您需要将 C 字符串传递给 API，请使用`c_str()`获取常量版本。如果您需要非常量版本，请将其放入字符向量中（可以使用两个迭代器进行初始化）并传递`&v[0]`或`v.data()`。

2：`NULL`应该可以工作，因为它是一个`wchar_t *`（假设是 Windows API 数据类型）。如果您有 C++11，请`nullptr`改用。

3：`memset`对于任何非 POD 类来说都是一个糟糕的主意。如果您没有构造函数，将为您提供一个默认构造函数，该构造函数默认初始化所有非平凡可构造的成员。如果您有诸如 的成员，最好放入您自己的成员`int`，否则这些成员将保持未初始化状态：

```
struct S {
    int i;
    std::string s; //non-trivially constructible, so default-initialized
};

S s; 
```

在上面的示例中，您将获得一个空字符串和 uninitialized `int`。这就是为什么你自己的通常更好：

```
S() : i(), s() {} 
```

# xaml - 两种纵横比（4:3 和 16:9）的两种布局 - 自动更改

> ID：13843213
> 
> 赞同：5
> 
> 时间：2012-12-12T15:37:06.117
> 
> 标签：xaml, layout, windows-8, scale, aspect-ratio

遵循[微软规模指南](http://msdn.microsoft.com/en-us/library/windows/apps/hh780612.aspx)，有一部分是这样说的：

> 设计固定布局时，首先为基线分辨率设计布局：1024x768 和 1366x768。

关于这一点，我有以下问题：

是否可以为两个纵横比定义两个固定布局（两者都用于`ViewBox`缩放到该纵横比中的每个分辨率），以便它们可以根据屏幕的纵横比自动更改？也许在填充模式和全屏模式之间改变也会改变纵横比？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:34:08.687

项目模板带有 LayoutAwarePage，它提供了可用于根据 ApplicationView（填充、对齐等）更改布局的视觉状态。如果需要，您可以在其中扩展该行为以覆盖 InvalidateVisualState。

# c++ - 从 OpenCV FileNodeIterator 保存/读取矩阵

> ID：13843214
> 
> 赞同：1
> 
> 时间：2012-12-12T15:37:05.477
> 
> 标签：c++, opencv

我无法保存并将`cv::Mat`保存的内容读取到`cv::FileNode`我正在迭代的内容中。我可以使用将矩阵写入文件

```
// Data to save
std::vector<cv::Mat> masks;
masks.push_back(cv::Mat::ones(3,3,CV_8UC1));
masks.push_back(cv::Mat::zeros(2,2,CV_8UC1));

// Open file for writing
cv::FileStorage fs(file, cv::FileStorage::WRITE);

// Create node
fs << "data" << "[";
for (size_t i=0; i<masks.size(); ++i)
{
    // Fill each node with data
    fs << "{:";
    // Write other data...
    fs << "mask" << masks.at(i);
    fs << "}";
}
fs << "]"; 
```

以这种方式写入文件不会导致任何问题。但是，随后打开此文件会导致未处理的异常打印：

> 读取 OpenCV 错误：解析错误 (testPR.yml(7): Missing , between the elemen ts) in unknown function, file ......\modules\core\src\persistence.cpp, line 12 63

要读取矩阵，我尝试这样做：

```
// Open file for reading
cv::FileStorage fs(file, cv::FileStorage::READ);   ///< This causes an exception

// Open node
cv::FileNode d = fs["data"];
cv::FileNodeIterator it = d.begin(), it_end = d.end();

for( ; it!= it_end; ++it)
{
    // Read other data...
    cv::Mat mask;
    (*it)["mask"] >> mask;
} 
```

当然可以以这种方式将矩阵保存/读取到节点，不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:47:15.247

事实证明，解决方案是将数据保存在文件中`.xml`而不是`.yml`文件中，尽管我不知道为什么会这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T11:58:51.647

当我查看[http://docs.opencv.org/modules/core/doc/xml_yaml_persistence.html](http://docs.opencv.org/modules/core/doc/xml_yaml_persistence.html)

> 在 YAML（但不是 XML）中，映射和序列可以用类似 Python 的紧凑内联形式编写。在上面的示例中，矩阵元素以及每个特征，包括它的 lbp 值，都以这种内联形式存储。要以紧凑的形式存储映射/序列，请将“:”放在开始字符之后，例如使用“{:”而不是“{”和“[:”而不是“[”。当数据写入 XML 时，那些额外的“:”将被忽略。

也许**{:**不能在没有**[:**的情况下使用，但我找不到有关此功能的其他文档。但是关于您将其存储在 XML 中的解决方案：忽略额外的“：”...

在我看来，删除“：”时，存储到 YAML 也应该有效。

# c# - 如何在 XNA 中旋转静态模型？

> ID：13843218
> 
> 赞同：0
> 
> 时间：2012-12-12T15:37:12.690
> 
> 标签：c#, xna, xna-4.0

如何在 XNA 中旋转静态模型？模型被加载到一个名为“ModelManager”的单独类中：

我需要旋转名为“track_new”的模型，但它与其他模型作为一个整体存储。旋转会在“modelManager”类还是主“Game!.cs”文件下进行？

这是我的代码：

```
public class ModelManager : DrawableGameComponent
{
    List<BasicModel> models = new List<BasicModel>();

    public ModelManager(Game game) : base(game) { }    
    public override void Initialize()
    {
        base.Initialize();
    }

    protected override void LoadContent()
    {
        models.Add(new BasicModel(Game.Content.Load<Model>(@"Models\track_new")));
        base.LoadContent();
    }

    public override void Update(GameTime gameTime)
    {    
        for (int i = 0; i < models.Count; ++i)
                models[i].Update();
        base.Update(gameTime);
    }

    public override void Draw(GameTime gameTime)
    {       
        foreach (BasicModel bm in models)
            bm.Draw(((Game1)Game).camera);
        base.Draw(gameTime);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:49:39.947

Model.Draw方法接受[World](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.model.draw.aspx)和 View 矩阵 - 您应该能够单独为该模型指定不同的 World 矩阵以实现所需的效果。

# wordpress - wordpress 基于特定页面的自定义页面模板

> ID：13843234
> 
> 赞同：1
> 
> 时间：2012-12-12T15:38:17.680
> 
> 标签：wordpress, templates, wordpress-theming

我想知道如何设置自定义页面模板。我的网站基于许多不同的宽度。例如，对于某些页面，我使用了一个名为 div`<div class="content-wrap ninecol clearfix">`的页面，但对于另一个页面，我使用了`<div class="text-centered twelvecol clearfix">`.

我需要创建一个模板，以便我可以轻松地基于这些模板创建新页面。

下面是我在 Dreamweaver 中完成的静态 html 代码。

```
<div class="content-wrap ninecol clearfix"> <!--I want to make a template based on this div so I can just add new text in the future-->

        <div class="content">

<h1 class="title">Om oss</h1>
<hr>
<div class="entry-content">
<h4>Vilka är Unified Sweden?</h4>
    <p>Vi värnar starkt om vår unika företagskultur och ser den som vårt  kraftfullaste      
     konkurrensmedel. Inom företaget har vi alltid arbetat hårt  för att skapa den 
     stabila grund som vår företagskultur är byggd på. </p>
    <p>All personal på Unified Sweden har många års erfarenhet av  webbutveckling,
    programmering, design och kundservice vilket gör oss  unika då alla led inom kundbemötandet 
    vet exakt vad ni som företag  behöver hjälp med.</p>
         </div>

</div>
    </div> 
```

这就是我想出的。

```
 <?php
 /*
 Template Name: Test 
 */
 ?>

  <?php get_header(temp); ?>
  <?php
        // get_template_part( 'loop', 'index' );
        ?>

  <div class="breadcrumbs">
  <?php if(function_exists('bcn_display'))
  {
    bcn_display();
  }?>
  </div>
  <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>   

       <?php the_content(); ?>

   <?php endwhile; endif; ?>

    </div><!-- content-wrap -->

    </div><!-- #content -->

    </div>

    </div><!-- .main -->

     <?php get_footer(); ?> 
```

感谢您提供任何形式的帮助或支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-26T06:04:42.073

模板名称：您的页面名称

*/

您将 Test 替换为您想要用于名称的任何名称（此名称可以有空格）然后在管理员中，您可以通过转到 Admin > Page Attributes > Templates 来选择要用于页面的模板 您的新自定义模板应该出现在这里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:45:33.817

你是说每个模板都需要不同的样式吗？如果是，您需要在 div id 处提供不同的名称，然后您应该编辑您的 style.css

```
#namediv{ } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T16:19:43.593

设置自定义页面模板（如果我正确理解您的问题）您在主题目录中创建您的页面模板，该目录处于活动状态并按照您的方式使用标题

```
<?php
 /*
 Template Name: Test 
 */
 ?> 
```

您将 Test 替换为您想要用于名称的任何名称（此名称可以有空格）然后在管理员中，您可以通过转到 Admin > Page Attributes > Templates 来选择要用于页面的模板 您的新自定义模板应该出现在这里

编辑（在操作评论之后）然后您可以检查正在使用哪个模板

```
is_page_template() 
```

[http://codex.wordpress.org/Function_Reference/is_page_template](http://codex.wordpress.org/Function_Reference/is_page_template) 来自 header.php，然后加载特定的 css 文件

旁注：您可能还想查看 codex 页面：[http](http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates) ://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates以及专用的 wordpress stackexchange [https://wordpress.stackexchange.com/](https://wordpress.stackexchange.com/)

# asp.net - 带有 .Net 的 DropboxServiceProvider api

> ID：13843242
> 
> 赞同：0
> 
> 时间：2012-12-12T15:38:43.027
> 
> 标签：asp.net, callback, dropbox, dropbox-api

尝试使用[Spring Net Social Dropbox](https://github.com/SpringSource/spring-net-social-dropbox)

```
OAuthToken oauthToken = dropboxServiceProvider.OAuthOperations.FetchRequestTokenAsync(callBackUrl, null).Result;
Console.WriteLine("Done");

OAuth1Parameters parameters = new OAuth1Parameters();

parameters.Add("locale", CultureInfo.CurrentUICulture.IetfLanguageTag); // for a localized version of the authorization website
string authenticateUrl = dropboxServiceProvider.OAuthOperations.BuildAuthorizeUrl(oauthToken.Value, parameters);
Console.WriteLine("Redirect user for authorization");
Process.Start(authenticateUrl); 
```

在重定向用户以使用 Dropbox 对他进行身份验证后，如何像我一样获取请求访问令牌，请求将回调 url。

我可以创建 OAuthToken 的新实例和 dropboxserviceprovider 的新实例并使用它来获取访问令牌。

```
AuthorizedRequestToken requestToken = new AuthorizedRequestToken(oauthToken, null);

OAuthToken oauthAccessToken = dropboxServiceProvider.OAuthOperations.ExchangeForAccessTokenAsync(requestToken, null).Result;
Console.WriteLine("Done");

/* API */
Console.WriteLine(oauthAccessToken.Value);
Console.WriteLine(oauthAccessToken.Secret);
IDropbox dropbox = dropboxServiceProvider.GetApi(oauthAccessToken.Value, oauthAccessToken.Secret); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T08:50:34.550

您可以将访问令牌存储在会话中。您可以随时创建 DropboxServiceProvider，重要的是 oauth 访问令牌。查看包中提供的 MVC 快速入门。

# objective-c - 如果声明我自己的 getter 和 setter，则无法识别 iVar

> ID：13843245
> 
> 赞同：2
> 
> 时间：2012-12-12T15:38:51.657
> 
> 标签：objective-c, ios, ios6

> **可能重复：**
> [属性不适用于 getter AND setter](https://stackoverflow.com/questions/13817562/property-not-working-with-getter-and-setter)

这是我面临的问题：我使用的是 iOS 6。我在头文件中声明了一个属性：

```
@property (nonatomic) CGFloat scale; 
```

然后在实现中，我创建自己的 getter/setter，如下所示：

```
#define DEFAULT_SCALE 0.90    

- (void)setScale:(CGFloat)scale
{
    if(_scale != scale) {
        _scale = scale;
        [self setNeedsDisplay];
    }
}

- (CGFloat) scale
{
    if(!_scale) {
        return DEFAULT_SCALE;
    } else {
        return _scale;
    }
} 
```

问题是编译器无法识别 _scale。我收到错误“使用未声明的标识符'_scale'。如果我删除了getter或setter，那么它工作正常，但我不能同时保留两者。如果我这样做，我必须添加`@synthesize scale = _scale`以避免错误。有人可以解释为什么？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T15:42:25.207

`@interface`如果要使用自己的 setter/getter ，则需要在 中声明实例变量：

```
@interface MyClass : NSObject
{
    CGFloat _scale;
}
...
@end 
```

**编辑**（在 OP 问题之后）：

您的特定实现肯定会有所作为（它们不是简单的 getter/setter 方法，因为它们会产生副作用）。但是，我认为声明变量总是一个好主意，如果您想针对 32 位 OSX，则绝对有必要，因为运行时不支持自动声明的实例变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T19:20:46.717

如果您提供完整的实现（getter 和 setter），编译器会假定您不需要 ivar，因此如果您仍然想要一个，则必须自己创建一个。要么制作一个 ivar，要么让 @synthesize 为你做。最终结果是一样的（创建了一个 ivar）；唯一的区别是在第一种情况下，您实际上可以随意调用它。

略有不同但相关 我经常有一个

```
@property (nonatomic,readonly) SomeThing* something; 
```

并提供方法

```
- (Something*) something { return xxxxxx; } 
```

对于您有一个返回某些内容但具有属性的方法的情况是一种快捷方式。

# iphone - IOS6中UINavigationController中的UIView方向

> ID：13843250
> 
> 赞同：3
> 
> 时间：2012-12-12T15:39:04.413
> 
> 标签：iphone, uinavigationcontroller, ios6

我有一个 UINavigation 基础应用程序，其中我支持某些视图控制器的所有方向，但不支持所有使用此代码的人

> @interface UINavigationController（自动旋转）

*   (BOOL) 应该自动旋转到接口方向：(UIInterfaceOrientation) 到接口方向；@结尾

    @implementation UINavigationController（自动旋转）

*   （BOOL）应该自动旋转到接口方向：（UI接口方向）到接口方向{

> if ([self.visibleViewController isKindOfClass:[MWPhotoBrowser class]] || [self.visibleViewController isKindOfClass:[ZoomPictureViewController class]]) { return YES; } return (toInterfaceOrientation == UIInterfaceOrientationPortrait); } @结尾

它工作得很好，但不能在 IOS6 中工作。我已经设置了我的项目 plist 文件中支持的所有四个方向。

如果有人找到了一些解决方法，请提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:59:53.413

在 ios 6 中有新的定向方法 在导航控制器子类中使用这些方法

```
-(BOOL) shouldAutorotate
{
return YES;
}

-(NSUInteger) supportedInterfaceOrientations{
if ([self.visibleViewController isKindOfClass:[YourClass class]] ||[self.visibleViewController isKindOfClass:[YourClass class]]) {
return UIInterfaceOrientationMaskAll;
}

return UIInterfaceOrientationMaskPortrait;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:56:27.293

这是苹果文档的链接阅读它:) [http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/BasicViewControllers/BasicViewControllers.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/BasicViewControllers/BasicViewControllers.html)

希望这会有所帮助。

# tsql - TSQL 关键字上一个或最后一个或类似的东西

> ID：13843251
> 
> 赞同：0
> 
> 时间：2012-12-12T15:39:08.787
> 
> 标签：tsql, ssms-2012

这个问题是为那些比我有更多 SQL 经验的人准备的。

我正在编写一个查询（最终将是一个存储过程，但这应该是无关紧要的），如果最近的条目等于之前输入的那个，我想在其中选择行数。我想继续这样做，直到它遇到具有不同值的条目。（解释得不好，所以我将展示这个例子）

在我的表中，我有一列“Product_Id”，当运行此查询时，我希望它获取 product_id 并将其与先前输入的产品 ID 进行比较，如果它相同，我想添加一个，并且我希望它继续检查之前输入 product_id 直到遇到不同的 product_id

我希望它听起来比它更复杂，查询看起来像

```
Select count(Product_ID)
FROM dbo.myTable
Where Product_Id = previous(Product_Id) 
```

现在，我知道previous 不是TSQL 中的关键字，Last 也不是，但我希望有人知道我所要求的关键字。

*   为山姆编辑

    ```
     USE DbName;
     GO
    WITH OrderedCount as
    (
    select ROW_NUMBER() OVER (Order by dbo.Line_Production.Run_Date DESC) as RowNumber,
    Line_Production.Product_ID
    From dbo.Line_Production
    )
    Select RowNumber, COUNT(OrderedCount.Product_ID) as PalletCount
    From OrderedCount
    WHERE OrderedCount.RowNumber + 1 = RowNumber
    and Product_ID = Product_ID
    Group by RowNumber 
    ```

OrderedCount 部分有效，它以我想要的方式返回数据，我现在无法比较不同 RowNumbers 的 Product_ID

我的 Where 子句是错误的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:49:52.297

没有关键字。那将是一个很好的神奇解决方案，但它不存在，至少部分是因为没有保证排序（好吧，只有当有 ORDER BY... 时，你才能拥有关键字）。我可以给你写一个查询，但这需要时间，所以现在我会给你几个步骤，我会回来看看你是否还需要帮助。

1.  找出一个 ORDER BY，否则不保证任何订单。如果有一个时间输入字段，那是一个不错的选择，或者一个索引，也可以。

2.  学习使用[Row_Number](http://msdn.microsoft.com/en-us/library/ms186734.aspx)。

3.  将表（带有 Row_Number）与 instance1.row - 1 = instance2.row 的表本身进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:52:27.470

如果 product_id 是一个标识列，你不能只做 product_id - 1 吗？换句话说，如果它是顺序的，它与使用前面评论中提到的 ROW_NUMBER 相同。

# javascript - 在链接中追加和删除值

> ID：13843252
> 
> 赞同：0
> 
> 时间：2012-12-12T15:39:08.720
> 
> 标签：javascript, jquery, jquery-isotope

所以我使用[http://isotope.metafizzy.co](http://isotope.metafizzy.co)来过滤网站上的不同项目。菜单应该是“建立”类型，当单击一个类别时，它会过滤到这些类别，当单击下一个类别时，它将那些新单击的类别添加到现有的类别过滤器中。当它第二次点击它应该从过滤器中删除该类别。

更具体地说，我有带 #filter 和 data-filter=".category-name" 的 href 我需要有一个函数，可以将 ", .another-category" 添加到每个链接的数据过滤器值的末尾name="filters" （或者我可以使用一个类而不是更容易）

```
<ul>
 <li><a href="#filter" onclick="addFilter('.kitchens');" name="filters" data-filter=".kitchens">Kitchens</a></li>
 <li><a href="#filter" onclick="addFilter('.bathrooms');" name="filters" data-filter=".bathrooms">Bathrooms</a></li>
 <li><a href="#filter" onclick="addFilter('.living-rooms');" name="filters" data-filter=".living-rooms">Living Rooms</a></li>
 <li><a href="#filter" onclick="addFilter('.bedrooms');" name="filters" data-filter=".bedrooms">Bedrooms</a></li>
</ul> 
```

我知道这个函数是错误的并且不起作用，但它只是一些伪代码

```
 function addFilter(filter) {
        names = document.getElementsByName("filters");
        for (var name in names) {
            name.data-filter = "existing filter, " + filter; // this should be appended to all data-filters
        }
    } 
```

所以基本上，当一个链接被点击时，它既过滤到该类别（比如说厨房），又将该类别添加到其余的数据过滤器（.bedrooms，.kitchens）

javascript 或 jquery 或其他任何我可能没有意识到的东西都可以工作。同位素的文档可以选择过滤多组项目，但我需要它来过滤单个项目的组合。也许可以将他们的组合过滤器修改为项目而不是组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:53:52.527

好吧，您标记了 jQuery，这使这很容易，但我只看到您使用 JS。无论如何，这是一种方法和一些额外的信息，希望对您有所帮助：

# [jsFiddle {带复制}](http://jsfiddle.net/SpYk3/ufRUL/)

 [# jsFiddle {无}](http://jsfiddle.net/SpYk3/ufRUL/6/) 

> 脚本

```
$('li a[name="filters"]').on("click", function(e) {
    e.preventDefault();
    $(this).data("filter", $(this).data("filter") + ".another-category");
    /*  and if i wanted to do it without replicating already existing info:
    var f = $(this).data("filter");
    if (f.indexOf(".another-category") == -1) f += ".another-category";
    $(this).data("filter", f); */
}); 
```

> HTML

```
<ul>
    <li><a href="#filter" name="filters" data-filter=".kitchens">Kitchens</a></li>
    <li><a href="#filter" name="filters" data-filter=".bathrooms">Bathrooms</a></li>
    <li><a href="#filter" name="filters" data-filter=".living-rooms">Living Rooms</a></li>
    <li><a href="#filter" name="filters" data-filter=".bedrooms">Bedrooms</a></li>
</ul> 
```

> X-tra NFO

*   [jQuery.data()](http://api.jquery.com/jQuery.data/) : *Biggest Deference - 返回设置的值*
*   [jQuery 的 .data()](http://api.jquery.com/data/) : *Biggest Deference - 返回被操作的元素*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:44:38.043

请参阅本帖中的以下文章。它应该让你朝着正确的方向前进。

[http://www.queness.com/post/7050/8-jquery-methods-you-need-to-know](http://www.queness.com/post/7050/8-jquery-methods-you-need-to-know)

堆栈溢出问题

[jQuery - 如何将 HTML 5 数据属性添加到 DOM](https://stackoverflow.com/questions/5949741/jquery-how-to-add-html-5-data-attributes-into-the-dom)

# c# - 将我班级的异常传递给我的表单

> ID：13843255
> 
> 赞同：0
> 
> 时间：2012-12-12T15:39:16.287
> 
> 标签：wireshark, c#, winforms

如何从我的班级中获取我的异常以显示为 Windows 错误？

这是我的课：

```
public class Editcap
{
    private string _newFileName;

    public void convertFileToLibpcap(string filePath)
    {
        FileInfo fileInfo = new FileInfo(filePath);
        _newFileName = fileInfo.FullName.Replace(fileInfo.Extension, "_new") + ".pcap";
        invokeProcess(WiresharkProcesses.Editcap, string.Format("{2}{0}{2} -F libpcap {2}{1}{2}", fileInfo.FullName, _newFileName, "\""));
        deleteFile(filePath);
    }

    private void deleteFile(string filePath)
    {
        try
        {
            File.Delete(filePath);
        }
        catch (Exception e)
        {
            throw new Exception(e.Message);
        }
    }

    public string getNewFileName()
    {
        return _newFileName;
    }
} 
```

从我的表格：

该函数创建具有不同扩展名的新[wireshark](/questions/tagged/wireshark "显示标记为“wireshark”的问题")文件，并应删除旧文件。如果删除失败，我想在弹出窗口中显示消息错误

```
Editcap editpcap = new Editcap();
editpcap.convertFileToLibpcap(file.FullName); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:46:08.650

你不需要做任何事情，异常会自行冒泡；这就是他们的工作方式。

只需在您的调用代码周围添加`Try`/ ：`Catch`

```
try
{
    Editcap editpcap = new Editcap();
    editpcap.convertFileToLibpcap(file.FullName);
}
catch(Exception e)
{
    MessageBox.Show("There was an error deleting the file.");
} 
```

`deleteFile`请注意，在您的方法中捕获然后重新抛出一个新异常没有必要（实际上也有一些危害） 。您正在将异常的类型从更具体、信息量更大的内容更改为`IOException`表达量更少的`Exception`内容，并且还取出了很多堆栈跟踪信息。最好从`deleteFile`. 这也意味着您可以将调用代码更改为 catch`IOException`而不是 global `Exception`。通过这样做，您可能会`catch`为不同的异常设置不同的块，从而允许您以不同的方式对待它们（可能会因一种类型而崩溃，为不同的类型记录错误，向用户显示其他内容的消息等）。

# objective-c - 尝试更改情节提要中的某些内容时立即关闭

> ID：13843260
> 
> 赞同：0
> 
> 时间：2012-12-12T15:39:21.380
> 
> 标签：objective-c, xcode

我正在构建一个教程应用程序（计算器），当我尝试更改 Storyboard 文件中的某些内容时，它会立即崩溃。如果我更改背景颜色或字体大小都没关系它只是崩溃..

我试过 1.clean 项目 2.repair 磁盘权限 3.create a new project

没有什么帮助

> 应用程序特定信息：ProductBuildVersion：4G2008a ASSERTION FAILURE in /SourceCache/IDEInterfaceBuilderCocoaTouch/IDEInterfaceBuilderCocoaTouch-1930/IBPlugin/Utilities/IBObjectMarshalling.m:651 详细信息：无法仲裁 IBNSLayoutConstraint、IBUIButton、IBUILabel、IBUIView 和 IBUIViewController。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:54:08.693

尝试在情节提要的“文件检查器”中取消选中“使用自动布局”。在这个[线程](https://stackoverflow.com/a/12915560/1354100)中为人们工作。

# c# - 使其他类可以访问方法和控件

> ID：13843261
> 
> 赞同：1
> 
> 时间：2012-12-12T15:39:22.313
> 
> 标签：c#, winforms, static, treeview

我有我的`Form1`和我的`Form2`。
我`Form1`有一个方法可以访问一个将节点添加到它的方法`TreeView`：

```
private void AddNode(TreeNode node)
{
  treeView1.Nodes.Add(node);
} 
```

我想从我的访问这个方法，`Form2`但我有点坚持这样的事实

*   静态 AddNode 方法将需要静态 treeView1，这是一种不好的做法。
*   `Form2`inside的一个新实例`Form1`将创建一个不同的实例，`treeView1`这不是我想要的。

此外，`treeView1`在设计器内部声明了，所以我不能真正将它的修饰符更改为静态（有人告诉我将静态控件放在表单中不是一个好主意）。

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:48:47.090

我认为最好的选择是在 Form2 中创建事件并在 Form1 中订阅该事件。当您在 Form2 上做某事（例如用户点击按钮）时，会引发该事件（您也可以将一些参数作为事件参数传递）。

表格1：

```
private void StartForm2Button_Click(object sender, EventArgs e)
{
    Form2 form2 = new Form2();
    form2.SomethingHappened += Form2_SomethingHappened;
    form2.Show();
}

private Form2_SomethingHappened(object sender, EventArgs e)
{
    Form2 form2 = (Form2)sender;
    string data = form2.Data;
    // create node
    AddNode(node);
} 
```

表格2：

```
public event EventHandler SomethingHappened;

public string Data
{
   get { return textBoxData.Text; }
}

private void SomeButton_Click(object sender, EventArgs e)
{
    if (SomethingHappened != null)
        SomethingHappened(this, EventArgs.Empty);
} 
```

*因此更新*您所说的，从其他两种不同的表单创建的表单，那么您需要其他方式来订阅`Form2`事件。您可以从应用程序打开的表单集合中获取 form2。**或者**您可以在表单之间共享一些公共对象：

```
public class Model
{
    public event Action<string> DataAdded; // subscribe to this event in form1

    public void AddData(string data) // call this method in form2
    {
        if (DataAdded != null)
            DataAdded(data);
    }
} 
```

好吧，在最好的世界里，我创建了一个模型，它将包含所有数据，并且只是将模型状态反映在`Form1`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:41:53.740

以下是一些需要将引用存储在某处的选项。这可能不是这种情况的最佳选择（或者可能取决于您的情况），但也发布了其他替代方案，因此请自行选择。

* * *

**一种解决方案**是您可以只对要使用的 Form1 实例进行静态引用。

```
static Form1 OpenForm1 = new Form1();

//in some other code
OpenForm1.MyFunction(); 
```

还有很多其他方法，重点是您需要确保您的 Form2 实例以某种方式引用了您的 Form1 实例。

* * *

**另一种选择**，您可以在创建 Form2 时传递实例：

例如作为属性...

```
//create Form2 from some where else
Form2 form2 = new Form2();
form2.ReferenceToForm1 = form1;

//in form2
public Form1 ReferenceToForm1 {get;set;}

//when needed in form2
ReferenceToForm1.MyFunction(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:44:47.903

声明一个接口并传递 form2 对实现该接口的东西的引用。

例如：

```
public interface INodeAddable {
   void AddNode(TreeNode node);
}

public class Form1 : INodeAddable
{
    private void SomeMethod()
    {
        var f2 = new Form2(this);
    }

    public void AddNode(TreeNode n)
    {
       // add node to tree
    }
}

public class Form2
{
  private INodeAddable x;
  public Form2(INodeAddable x)
  {
    this.x = x;
  }

  public void SomeEventHandler(object sender, EventArgs e)
  {
     x.AddNode(someNewNode);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T15:51:59.770

使表单能够相互访问。

既然你说它们是从不同的形式产生的，一种方法是让共同的根知道它们的存在，并从它们的共同祖先那里建立联系。

我能想到的最好的方法是，如果这种行为是您将来会遇到的事情，那就是拥有一个基本的[EventAggregator](http://msdn.microsoft.com/en-us/library/ff921122%28v=pandp.20%29.aspx)注入到所有表单中，通过它您可以将消息从一个传递到另一个，而无需紧密地传递它们耦合。有了它，您可以让 Form1 订阅 Form2 触发的事件，当触发该事件时，您将添加节点。

# session - 在 symfony 2.1 中的域和子域之间共享身份验证

> ID：13843262
> 
> 赞同：8
> 
> 时间：2012-12-12T15:39:24.450
> 
> 标签：session, subdomain, symfony-2.1, fosuserbundle

在一个应用程序中，我实现了一个带有长轮询的 javascript 聊天。由于每个域只允许一个 Ajax 请求，我想将轮询请求移动到子域。

所以我有两个域：

```
dev.site.com
poll.dev.site.com 
```

在我的`config.yml`我输入了以下内容：

```
framework:
    session:
        domain: .dev.site.com
        cookie_domain: .dev.site.com 
```

但是如果我尝试通过 Ajax 对子域进行轮询，Symfony 不会让我保持登录状态。

关于如何将会话保持在子域上的任何想法？我正在使用 FOSUserBundle

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T17:03:43.673

首先，两个应用程序需要共享*fos_user*表，以便它们可以在何时重新加载用户。因为您有“一个应用程序和两个指向同一个应用程序的域”。这应该已经是正确的了。

接下来是设置要在域和子域之间共享的会话 cookie。您问题中的配置是正确的。但是，当您从 dev.site.com 更改为 poll.dev.site.com 时，为了让 FOSUserBundle 能够重新加载用户，您需要在两个域之间共享会话存储。

我可以建议的最简单的方法是将会话存储在数据库中。这是通过使用 Symfony 中可用的**PdoSessionStorage**来实现的。官方文档介绍了如何[设置会话存储](http://symfony.com/doc/2.1/cookbook/configuration/pdo_session_storage.html)来做到这一点。

如果以上所有操作都正确，您应该无法登录到 dev.site.com 上的安全区域，然后将 URL 更改为 poll.dev.site.com 上的其他安全区域，而无需再次提供登录凭据。请注意，用户凭据仅加载在安全区域中。

当它可以直接在浏览器中打开 poll.dev.site.com 时，需要再次输入凭据。您需要做一些额外的工作才能使 Ajax 请求正常工作。

根据这两个问题：[从 ajax 请求](https://stackoverflow.com/questions/13002038/setting-a-cookie-on-a-subdomain-from-an-ajax-request)、[多子域 cookie 和 ajax 问题](https://stackoverflow.com/questions/4217489/multi-sub-domain-cookies-and-ajax-problems)在子域上设置 cookie 问题可能是[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)。

第一个建议在 dev.site.com 上设置以下标头字段：

```
Access-Control-Allow-Credentials: true
Access-Control-Allow-Origin: http://poll.dev.site.com 
```

然后在 ajax 请求上传递**withCredentials 。**

```
$.ajax({
    url: 'http://poll.dev.site.com/some/ajax/endpoint.json',
    xhrFields: { 
        withCredentials: true 
    }
}); 
```

我已经使用一个虚拟文件对其进行了测试，该文件只会设置 cookie 并尝试和 ajax 请求。如果我在 ajax 请求上有**withCredentials** ，我可以让它工作，但是当我尝试使用/不使用 Access-Control-Allow-* 标头时，我看不出任何区别。

另一个答案建议使用 document.domain 但我没有测试。

如果在测试时将 Cookie 标头发送到服务器，我使用 Opera 的 Dragonfly 来检查网络流量。您也可以使用 Firebug、Chrome 或 IE。

# jquery - 如何使用 Jquery Infinite-scroll 在每个页面加载之间添加页面分隔符

> ID：13843263
> 
> 赞同：0
> 
> 时间：2012-12-12T15:39:22.807
> 
> 标签：jquery, infinite-scroll

我想使用 Jquery Infinite-scroll 在每个页面加载之间简单地添加内容。例如，在第一页之后，我想添加一个带有一些链接的迷你页脚。您可以将其视为一种分页器。

我已经检查了 Infinite-scroll js 文件，但我找不到我应该在哪里添加一个新函数来插入分隔符。

我目前正在使用 Masonry，但这个问题专门针对 Infinite-scroll js 文件。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:46:12.577

有一个自定义部分可以提供帮助：

```
Customization
This information will probably help styling.

<div id="infscr-page-2" class="infscr-pages"> will contain the page 2 content, etc
<div id="infscr-loading"> is the loading div. 
```

您可以只添加一个底部/顶部边框，`.infscr-pages`以便在将新页面附加到内容时显示出来。

# objective-c - MKNetworkKit：请求链，其中每个后续请求都需要前一个请求的数据

> ID：13843264
> 
> 赞同：1
> 
> 时间：2012-12-12T15:39:24.730
> 
> 标签：objective-c, ios, mknetworkkit

我不确定如何以最好的方式实现这一点：

我有多个休息请求，每个请求都从不同的资源中检索数据。问题是每个请求都需要前一个请求的数据。

现在我在这个项目中运行了 mknetworkkit，我真的必须提出请求，然后评估结果块中的数据并从这个结果块开始一个新的数据块，这反过来又会在下一个结果块中结束，依此类推。 ..

它并不是真正的递归，因为每个请求的评估都是不同的，而且在我看来，十级深度的嵌套请求/块组合并不是一个很好的方法（同步请求显然也很糟糕，并且在 mknetworkkit 中不受支持）。

这样做的最佳做法是什么？

编辑：我也想在一个函数调用中做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-05T12:11:38.833

这里同样的问题。我最终得到的是将每个所需的网络调用放入队列（数组或您想要存储操作的任何内容）并更新我的网络响应委托，以便它检查队列中的下一个操作链。

# c# - Reader.Read() 无法读取行，即使它有行

> ID：13843267
> 
> 赞同：1
> 
> 时间：2012-12-12T15:39:30.933
> 
> 标签：c#, oracle, datareader, dbproviderfactories

我有一个问题，阅读器似乎表明它具有来自返回的 SQL 的行，但阅读器的 while 循环从未运行。我在 reader.hasrows 中放了一个消息框作为验证，我也在 while 循环之后的第一行放了一个消息框。hasrows 的消息框已执行，但 Read 的消息框未执行。这是非常令人费解的。我尝试了对数据库的查询，它确实返回了行。这是代码片段。

```
using (DbConnection connection = CADBase.DbProviderFactory.CreateConnection())
    {
        connection.ConnectionString = CADBase.DbConnectionString;
        connection.Open();

        using (DbCommand command = connection.CreateCommand())
        {
            SQL = <statement here>;
            command.CommandText = SQL

            using (DbDataReader reader = command.ExecuteReader())
            {
                    while (reader.Read())
                    {
            //NEVER MAKES IT HERE
                    } 
    }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:45:44.343

对于这个问题的未来读者：请注意，问题的发生是因为 OP 在查询中返回了太多列。请参阅此答案下方的评论。

* * *

我不太确定为什么会发生这种情况，但是您实际上只需要检查一次行，而不是两次，并且该`Read()`方法已经这样做了。

所以你真正需要的是

```
while (reader.Read())
{
    // Do your thing
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:46:19.167

在第一次调用读取之前调用 MoveNext()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:47:07.213

您应该使用 reader.HasRows 属性而不是方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T15:48:23.610

也许你在`reader.Read()`.

但是因为[`HasRows`](http://msdn.microsoft.com/en-us/library/system.data.common.dbdatareader.hasrows.aspx)是属性而不是方法。您需要编写`if(reader.HasRows)`以使其编译。

```
if(reader.HasRows)
{           
    //MAKES IT HERE   
    while (reader.Read())
    {
        //NEVER MAKES IT HERE
    } 
} 
```

所以我想知道实际的代码是什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T16:25:55.393

只是一个猜测。也许您正在访问 reader.HasRows 之后和 reader.Read() 之前显示的消息框中的 reader 对象。显然，仅当阅读器未到达最后一行时，Read() 方法才返回 true（请参阅：[https](https://stackoverflow.com/a/1540626/516481) ://stackoverflow.com/a/1540626/516481 ）。因此，如果阅读器位于最后一行，它将返回 false！也许查询只返回一行，并且您通过访问它（可能使用调试器）并将读取器移动到最后一行以某种方式更改读取器对象的内部状态？

# tsql - 更新触发器更好的方法

> ID：13843269
> 
> 赞同：0
> 
> 时间：2012-12-12T15:39:36.877
> 
> 标签：tsql, triggers, sql-server-2008-r2

我有一个正在开发的触发器，并希望它基本上处理`Update`语句意义上的更新，而不是现在那么担心`Delete`或`Insert`语句。

最终结果是我有两个状态字段`active`& `inactive`，它们分别是`bit`& `datetime`。该`active`字段用于手动使记录无效，并且我想确保该`inactive`字段包含`active`更改值。

理想情况下，我想检查是否并使用，在字段中`active=0`放置日期时间戳以进行记录。`now()`长期我确定我会想要验证该`inactive`字段是否已经没有日期时间戳，但现在可以很好地覆盖它。同样，希望它检查是否存在任何值`active=1`并清除该字段。`inactive`

该`inactive`领域是`nullable`不会有冲突的。

### 触发器定义，截至目前：

```
CREATE TRIGGER dbo.TRG_tblRegistration_Inactive
ON dbo.tblRegistration
AFTER UPDATE
AS
BEGIN
    SET NOCOUNT ON;

    IF update(active) BEGIN

        update r
        set inactive=now()
        from tblRegistration r
            join inserted i on r.id = i.id
        where i.active = 0

    END
END 
```

`inserted`我对&`deleted`触发器表有很好的理解。

### 问题：

1.  触发器中是否有更好的逻辑模式可以让我达到最终的预期目标？
2.  如果他们使用, 或提交`inactive`值，需要考虑什么？`active=0``active=1`

### 触发器的当前形式：

```
ALTER TRIGGER dbo.TRG_tblRegistration_Inactive
ON dbo.tblRegistration
AFTER UPDATE
AS
BEGIN
    SET NOCOUNT ON;

    IF update(active) BEGIN
        update r
        set inactive=getdate()
        from tblRegistration r
            join inserted i on r.id = i.id
        where i.active = 0

        update r
        set inactive=NULL
        from tblRegistration r
            join inserted i on r.id = i.id
        where i.active=1
    END
END 
```

它可以按预期工作并执行，但要确保首先没有更好的方法来执行此操作（在数据库端或触发器中）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:17:51.503

我认为最好`active`使用以下定义更改为（持久的）计算列：

```
CASE WHEN 不活动为 NULL THEN 0 ELSE 1 END

```

那么你根本不需要任何触发器，你只需设置`inactive = GETDATE()`即可完成目的。

尽管如此，您的触发器当前的编写方式（在两个版本中），`inactive`即使我运行这样的查询，该列也将更新为当前日期：

```
更新 tblRegistration
设置激活 = 0
活跃的地方 = 0

```

如果您只想*在字段从 1 更改为 0 时更新日期，*则触发器中的更新语句需要是：

```
更新 tblRegistration
SET 无效 = GETDATE()
FROM 插入我
INNER JOIN 已删除 d ON i.id = d.id
WHERE tblRegistration.id = i.id AND i.active = 0 AND d.active = 1

```

# java - 如何使用 FlexJSON 将部分 JSON 字符串反序列化为对象？

> ID：13843270
> 
> 赞同：3
> 
> 时间：2012-12-12T15:39:36.640
> 
> 标签：java, json, deserialization, flexjson

我正在尝试将 JSON 字符串的一部分序列化为一个对象。JSON 字符串如下所示：

```
{"error":null,"excludeFields":null,"message":null,"success":{"user":{"name":null,"organizationId":100,"username":"nl4321"}}} 
```

我只需要 JSON 字符串的用户部分，它对应于以下类的对象：

```
public class UserForm implements Serializable {

    private static final long serialVersionUID = -5033294929007794646L;
    private String username;
    private String name;
    @Getter @Setter
    private int organizationId;

    public UserForm() {
    }

    public UserForm(User user) {
        if (user != null) {
            this.username = user.getUsername();
            this.name = user.getName();
            this.organizationId = user.getDefaultOrganisationId();
        }
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }
} 
```

我目前尝试反序列化的方式如下：

```
private UserForm deserializeToJsonResponse(String bodyContent) throws IOException {
        JSONDeserializer<UserForm> jsonDeserializer = new JSONDeserializer<UserForm>();
        return jsonDeserializer.use("values.success.user", UserForm.class).deserialize(bodyContent, UserForm.class);
} 
```

该`use`方法提供了一个路径和一个类，但是无论我尝试什么路径，反序列化后UserForm的内容都是空的。我尝试过：“用户”、“成功用户”、“值.成功用户”。

有谁知道我做错了什么以及如何解决？我意识到还有其他解决方案，比如 Jackson，但这是已经大量使用 FlexJSON 的大型代码库的一部分。背景：我正在尝试为作为项目一部分的 API 编写单元测试。

# javascript - 无法在 dojo Select 中选择任何选项

> ID：13843273
> 
> 赞同：0
> 
> 时间：2012-12-12T15:39:54.953
> 
> 标签：javascript, dojo, dijit.form

我正在使用dojo 1.6，我遇到的问题非常独特。查看以下代码：

```
var dd = new dijit.form.Select({
        id: 'dd', 
        options: [{label:'option1'}, {label: 'option2'}],
    }); 
dojo.connect(dd, "onChange", this, function (){
        console.debug("trying to catch the change");
    }); 
```

因此，按照上面的代码，我应该得到一个下拉菜单，并且能够更改下拉菜单中的值并在`dojo.connect`. 虽然我确实得到了一个默认选择的下拉菜单`option1`，但是我无法选择`option2`. 请注意，这两个选项都在下拉列表中可见，但选择不起作用。我是 dojo 的新手，但从所有示例来看，这似乎是进行下拉的最低要求。我将不胜感激任何反馈。编辑：事实证明，如果我设置这样的选项，`[{label: 'option1', value: 1}, {label: 'option2', value:2}]`那么一切都按我的意愿工作。但是有人可以解释一下 value 在这里的作用是什么，为什么它必须一直是整数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:25:37.307

如果您提交包含您的选择的表单，该值是将发送到服务器的文本。

它类似于`option`带有 value 属性的标签：`<option value="op1">option1</option>`。如果省略标签上的 value 属性，则提交的文本将只是标签文本“option1”。

这些值不必是整数 - 您可以使用 选项`{label: foo, value: foo}`，只要 foo 在选项中是唯一的。如果您在此处省略 value 属性，则提交的值将是未定义的，并且 dijit 将（如您所见）表现得通常很奇怪。

**经过一些实验后进行编辑：**使用 Select dijit 时，`options`数组中的值（或者，实际上是存储中的 id）必须是字符串。否则，给选择一个默认值将不起作用。例如：

```
new Select({
    value: 3,
    options: [ {label: "foo", value: 1}, {label: "bar", value: 3}]
}) 
```

..*不会*将“bar”设置为默认选择选项，并且在下拉列表中突出显示所选项目不起作用。您必须使用带有字符串值的选项数组：

```
 options: [ {label: "foo", value: "1"}, {label: "bar", value: "3"}] 
```

不是 100% 确定这背后的原因。

# google-apps-script - 将谷歌日历数据导入现有的谷歌电子表格

> ID：13843275
> 
> 赞同：2
> 
> 时间：2012-12-12T15:39:58.537
> 
> 标签：google-apps-script, google-sheets, google-spreadsheet-api

我试图在谷歌电子表格中记录谷歌日历条目以进一步处理数据。我有以下代码，我从其他来源借来的：

```
function importEvents(){
  var startOfDay = new Date();
      startOfDay.setUTCHours(0);
      startOfDay.setMinutes(0);
      startOfDay.setSeconds(0);
      startOfDay.setMilliseconds(0);  
  var endOfDay = new Date(startOfDay.getTime() + 24 * 60 * 60 * 1000);

  var Calendar = CalendarApp.getCalendarById("[calendarIDhere]");
  var events = Calendar.getEvents(startOfDay, endOfDay)
  var events_sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("ImportedEvents");
  var lr = events_sheet.getLastRow();

  var eventarray = new Array();

  var i = 0; // edited
    for (i = 0; i < events.length; i++) {
      line = new Array();
      line.push(events[i].getTitle());
      line.push(events[i].getDescription());
      line.push(events[i].getStartTime());
      line.push(events[i].getEndTime());
      eventarray.push(line);
    }

    events_sheet.getRange('A1:D' + (i)).setValues(eventarray);

  var l = events_sheet.getLastRow();
  var m = events_sheet.getMaxRows();
  events_sheet.deleteRows(l+1,m-l);
} 
```

出于某种原因，每次我导入一天的条目时，都会在 ImportedEvents 表中添加几行空行。这就是我删除工作表末尾的空行的原因。

我想做的是让这个脚本在 ImportedEvents 表中的现有条目下方附加新的导入条目。由于我有限的编程技能，我无法弄清楚这一点（同样，上面的代码是实现其他地方提供的解决方案的结果）。

任何帮助将不胜感激！

**编辑：**根据 Lothar 的建议，我尝试了其他方法：

```
events_sheet.getRange("A"+(lr+1)+":D"+(lr+i)).setValues(eventarray); 
```

它奏效了！此外，非常特别感谢投票 -1 的人，以激励他们进行更深入的研究。

干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T16:06:41.227

尝试重写这一行，以便

```
events_sheet.getRange('A1:D' + (lr)).setValues(eventarray); 
```

如果您尝试将新（事件）数据附加到电子表格的末尾。否则，您会将数据放在与您获得的事件数量相对应的行中。

# sql-server-2008 - T-SQL 递归选择循环依赖

> ID：13843279
> 
> 赞同：5
> 
> 时间：2012-12-12T15:40:07.900
> 
> 标签：sql-server-2008, tsql, recursion

我的数据库中有自依赖实体 (a)，这些实体是从另一个实体 (b) 引用的，并且给定一个特定的 (b) 实体，我需要获取所有需要的 (a) 实体。这些是多对多的映射，所以我有一个单独的映射表。我认为带有 CTE 的递归 Select 是我最好的选择，但我遇到了一个问题：

[这个小提琴](http://sqlfiddle.com/#!3/0e7d1/3)说明了我的问题。如果某些用户引入了循环引用，我的递归选择就会停止。我一直在绞尽脑汁想找到解决这个问题的方法。应该注意的是，虽然我在小提琴中引入了外键，但我使用的系统实际上并没有尊重外键（与 DBA 的长期争论）——我引入它们是为了使数据流更加清晰。

递归查询，对于那些不想点击小提琴的人：

```
WITH recur(objID) AS (
    SELECT usesObjID
        FROM #otherObj
        WHERE otherObjID = 1
    UNION ALL
    SELECT slaveObjID
        FROM #objMap
            INNER JOIN recur
                on #objMap.masterObjID = recur.objID
)SELECT objID from recur 
```

有什么想法吗？此设计尚未投入生产，因此我可以稍微更改架构，但我不想依赖在插入时发现循环引用，除非它可以通过 T-SQL 完成。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T15:52:13.117

可以设置[`MAXRECURSION`](http://msdn.microsoft.com/en-us/library/ms175972.aspx)CTE 的 ，这将防止无限循环，但您仍然会得到奇怪的结果，因为查询将继续在循环中运行，直到达到最大递归。

挑战在于循环涉及多个步骤，因此您不能只检查孩子的直接父母以确定您是否处于循环中。

处理此问题的一种方法是在 CTE 中添加一个附加列...这个新列 `tree`跟踪到目前为止已包含的所有 ID，并在 ID 重复时停止。

```
WITH recur(objID, Tree) AS (
    SELECT 
        usesObjID, 
        CAST(',' + CAST(usesObjID AS VARCHAR) + ',' AS VARCHAR) AS Tree
    FROM otherObj
    WHERE otherObjID = 1
    UNION ALL
    SELECT 
        slaveObjID, 
        CAST(recur.Tree + CAST(slaveObjID AS VARCHAR) + ',' AS VARCHAR) AS Tree
    FROM objMap
        INNER JOIN recur
            ON objMap.masterObjID = recur.objID
    WHERE recur.Tree NOT LIKE '%,' + CAST(slaveObjID AS VARCHAR) + ',%'  
)SELECT objID from recur 
```

[**Sql 小提琴链接**](http://sqlfiddle.com/#!3/0e7d1/7)

# r - 使用格子 doubleYScale 图更改线型

> ID：13843281
> 
> 赞同：2
> 
> 时间：2012-12-12T15:40:10.040
> 
> 标签：r

我确实创建了一个`doubleYScale`情节：

```
obj1 <- xyplot(Produktion ~ Year, datac1mw, type = "l",col="black")
obj2 <- xyplot(Summa.skulder ~ Year, datac1mw, type = "p",col="black")

hm=doubleYScale(obj1, obj2, add.ylab2 = TRUE,text = c("Produktion", "Summa.skulder"), 
             par.settings = simpleTheme(col = c('blue','black'), lty = 2:3)) 
```

我得到的结果是： ![在此处输入图像描述](../Images/6c1ed8d7d5bc7e91a7f6631bfcf38b91.png)

我真正想要的是一个图，其中`legend`显示的不是 2 条线（现在是一条蓝线和一条红线），而是 Produktion（左 y 轴）是虚线，而 Summa.Skulder（右 y 轴）是一条线，在传奇。

有什么建议么？此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:35:45.087

这对我来说很好：

```
library(lattice)
library(latticeExtra)
x <-1:10 # make data as I do not have yours
y <-1:10
z <-10:1

obj1 <- xyplot(y ~ x, type = "l",col="black")
obj2 <- xyplot(z ~ x, type = "p",col="black")

doubleYScale(obj1, obj2, add.ylab2 = TRUE)
update(doubleYScale(obj1, obj2, text = c("obj1", "obj2")),
par.settings = simpleTheme(col = c("black","black"), lty = 1:2)) 
```

![在此处输入图像描述](../Images/8877dbfa2fe6b124a5aac84fc4c9dc4e.png)

正如您的新评论所说，这适用于获取图例中的点和线：

```
obj1 <- xyplot(y ~ x, type = "l",col="black",key = simpleKey(col=c('black'),
           text=c("Produktion"),points=FALSE, lines=TRUE))
obj2 <- xyplot(z ~ x, type = "p",col="black",key = simpleKey(col=c('black'),
           text=c("Summa.skulder"),lines=FALSE,points= TRUE))

doubleYScale(obj1, obj2, add.ylab2 = TRUE,par.settings = simpleTheme(col =   
              c("black","black"))) 
```

![在此处输入图像描述](../Images/3e57eddf3689956892a11158d0cd40e6.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:54:22.350

图例设置仅取自 obj1。所以最好在obj1中设置*key参数。*

您可以在 obj2 中设置面板设置（我添加了一个示例作为选项）

```
foo <- list(x = 1:100, y = cumsum(rnorm(100)))
obj1 <- xyplot(y ~ x, foo,
               key = simpleKey(
                 text=c("Produktion", "Summa.skulder"),
                 col=c('blue','black'),points= FALSE,rectangles=TRUE,lines=TRUE))
obj2 <- xyplot(y^2 ~ x, foo
               , panel = function(...)panel.xyplot(type = "l",lty = 2,grid=TRUE,...))
## simple case: no axis for the overlaid plot
doubleYScale(obj1, obj2,add.ylab2 =TRUE) 
```

![在此处输入图像描述](../Images/d41af31a17391f0d480c88b711fa5989.png)

# c# - 在 .NET 中使用 Outlook 文本遇到奇怪的行尾字符串行为

> ID：13843284
> 
> 赞同：0
> 
> 时间：2012-12-12T15:40:12.150
> 
> 标签：c#, outlook-2010, end-of-line

当我尝试从我的 C# 程序创建电子邮件正文时，发生了一些有趣的事情

```
oItem.Body = text; 
```

`oItem`is a `Microsoft.Office.Interop.Outlook.MailItem`and`text`只是一个普通的字符串，包含`\n`当我这样做时，`\n`被翻译成`\r\n`. 问题是其中一些`\n`被翻译成`\r\n\r\n`我无法弄清楚为什么或何时。的内容 `text`来自不同的来源，但它只是一个普通的字符串，如下例所示

```
text: "Zusammenfassung:\nText0\nText1 \n\nText2\nText3\nText4 {...} TextX\n 

oItem.Body: "Zusammenfassung: \r\nText0 \r\nText1 \r\n\r\nText2\r\n\r\nText3\r\n\r\nText4 {...} TextX\r\n 
```

那里发生了什么？我完全糊涂了。

编辑：使用 += 构建字符串时会创建双换行符

```
string lineToSend = "bla Bla: " + Sig + " bla bla " + string.Join(", ", usedCnt.toCntName());
if (refCnts.Count() != 0)
{

    lineToSend += "some Text";
}
else 
{
    lineToSend += " some other Text";
}

//lineToSend = "dummyStringLine";
messageObj.setMessageLines(lineToSend); 
```

如果我使用 dummyStringLine 一切都很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:57:05.603

只是为了更容易地确定这些地方的位置......你确定这是一个精确的重复吗？

```
"Zusammenfassung:\nText0\nText1 \n\nText2\nText3\nText4 {...} TextX\n 
                 ^1     ^2      ^3^4     ^5     ^6                 ^7
"Zusammenfassung: \r\nText0 \r\nText1 \r\n\r\nText2\r\n\r\nText3\r\n\r\nText4 {...} TextX\r\n 
                 ^1        ^2         ^3  ^4       ^5           ^6                       ^7 
```

如果是这样，那么您显然让我感到难过，但是，我希望您假定的两个来源之间有些事情略有不同，并且您错过了它，等等。

但是，我可以回答第一部分，并且我会这样做：它正在替换`\n`为`\r\n`标准的“非 Windows -> Windows 行结尾”转换过程。文本首先从哪里获得`\n`？如果从您的代码中，我建议您尝试插入`Environment.NewLine`而不是`\n`在您自己的代码中。

如果您从外部来源获取文件，我建议在将输入提供给 Outlook 元素之前预先处理输入。

* * *

字符串生成器示例：

```
StringBuilder sb = new StringBuilder();

sb.AppendLine("Zusammenfassung:").AppendLine( text0 ).AppendLine( text1 ).AppendLine( Environment.NewLine );
sb.AppendLine( text2 );
sb.Append( text3 ).Append( Environment.NewLine );
//I'm sure you get the idea here

oItem.Body = sb.ToString(); 
```

看看这样做是否会出现同样的错误……我意识到这有点重构，但也许你可以简单地修改部分方法以使其更快？

* * *

使用您的代码...

```
StringBuilder sb = new StringBuilder("bla Bla: ");

sb.Append( Sig ).Append( " bla bla " ).Append( string.Join(", ", usedCnt.toCntName()) );
if (refCnts.Count() != 0)
{

    sb.Append( "some Text" );
}
else 
{
    sb.Append( " some other Text" );
}

//lineToSend = "dummyStringLine";
messageObj.setMessageLines(sb.ToString()); 
```

# .htaccess - 根据查询字符串创建重写规则

> ID：13843285
> 
> 赞同：0
> 
> 时间：2012-12-12T15:40:19.357
> 
> 标签：.htaccess, iis, rewrite

我在 .htaccess 文件中有很多重定向。现在，我需要根据它的查询字符串值为 URL 创建一个重写规则。

```
http://www.mydomain.com/subdir/RentalDetails.aspx?RentalId=1072 
```

此网址的任何流量都应转到...

```
http://www.mydomain.com/subdir/RentalDirectory.aspx 
```

我已经研究并发现了一些关于这个主题的好帖子并想出了这个..

```
#discontinued properties
RewriteCond %{REQUEST_URI} ^/RentalDetails\.aspx$
RewriteCond %{QUERY_STRING} ^RentalId=1072$
RewriteRule ^(.*)$      /subdir/RentalDirectory.aspx?                [R=301,L] 
```

不幸的是，它不起作用。有人可以帮我弄清楚我哪里出错了吗？提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:46:54.687

我猜 RewriteCond 是错误的：uri 不应该看起来像

```
^/RentalDetails\.aspx$ 
```

[已编辑——我终于设法找到了实际的文档，发现查询字符串是一条红鲱鱼。但是，我也错过了字符串开头的“^”，这可能是造成这种情况的原因]

由于`^`表达式的开头表示“字符串必须从这里开始”，而`$`结尾表示“字符串在此处结束”，因此您的正则表达式限制性太强，与您需要的内容不匹配。

从 apache 文档中，该`REQUEST_URI`变量不包括查询字符串，所以这不是问题。但是，您正在尝试将 url`/subdir/RentalDetails.aspx`与必须以单词开头的正则表达式匹配`/RentalDetails`

尝试类似的东西

```
# No ^ at the start, this will match RentalDetails.aspx in any location
/RentalDetails\.aspx$ 
```

或者

```
# This will only match in the /subdir/ directory.
^/subdir/RentalDetails\.aspx$ 
```

# javascript - 嵌套 jQuery $.when

> ID：13843286
> 
> 赞同：8
> 
> 时间：2012-12-12T15:40:21.590
> 
> 标签：javascript, jquery, jquery-deferred

基本上我想写这个：

```
var async1 = $.when( a1() ).then(function(){ a2() });
var async2 = $.when( a3() ).then(function(){ a4() });

$.when(async1, async2).then(function(){ 
    console.log("complete");
}); 
```

但是在 a1 和 a3 执行的那一刻，该函数认为自己已解决。

我把同样的例子放在一个小提琴中：http: [//jsfiddle.net/Z7fzR/](http://jsfiddle.net/Z7fzR/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T15:52:50.293

你永远不会真正返回由回调创建`a2()`和`a4()`从回调创建的 Promise 对象；这有效地返回`null`，这显然算作完成`$.when`目的：

[http://jsfiddle.net/Z7fzR/1/](http://jsfiddle.net/Z7fzR/1/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T15:55:09.457

您正在丢弃`a2`并`a4`返回的 promise 对象，本质上是传递`undefined`回原来的`when`，这会导致它立即解决：

> 如果将单个参数传递给 jQuery.when 并且它不是 Deferred，它将被视为已解析的 Deferred，并且任何附加的 doneCallbacks 都将立即执行。

添加一些回报，它工作正常。

```
var async1 = $.when(a1()).then(function(){ return a2(); });
var async2 = $.when(a3()).then(function(){ return a4(); });

$.when(async1, async2).then(function(){
    console.log("complete");
}); 
```

[http://jsfiddle.net/Z7fzR/2/](http://jsfiddle.net/Z7fzR/2/)

# java - servlet 映射 url 模式上的双通配符 (*) 是什么意思？

> ID：13843294
> 
> 赞同：20
> 
> 时间：2012-12-12T15:40:55.363
> 
> 标签：java, spring, jakarta-ee, servlets, spring-mvc

我想知道使用**单**通配符或**双通配符**来描述 servlet 映射上的 url 模式有什么区别。

例如：下面有什么区别？

1)

```
<servlet-mapping id="...">
    <servlet-name>BuyServlet</servlet-name>
    <url-pattern>/buy/*</url-pattern>
</servlet-mapping> 
```

2)

```
<servlet-mapping id="...">
    <servlet-name>ShopServlet</servlet-name>
    <url-pattern>/shop/**</url-pattern>
</servlet-mapping> 
```

编辑：@Andrew 是对的，规范只讨论了一个通配符 (*)。

我仔细检查了我的代码，发现我发现双通配符 (**) 的位置是在 Spring SimpleUrlHandlerMapping bean 中。

在这种情况下，这是有道理的。根据[类 doc](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/web/servlet/handler/SimpleUrlHandlerMapping.html)，它使用[AntPathMatcher](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/util/AntPathMatcher.html)，其中指出：

> 映射使用以下规则匹配 URL： ? 匹配一个字符 * 匹配零个或多个字符 ** 匹配路径中的零个或多个“目录”

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-12T15:50:03.447

servlet 规范（2.5 版）的第 11.2 节规定如下：

> 在 Web 应用程序部署描述符中，使用以下语法来定义映射：
> 
> *   以“/”字符开头并以“/*”后缀结尾的字符串用于路径映射。
> *   以“*”开头的字符串。前缀用作扩展映射。
> *   仅包含“/”字符的字符串表示应用程序的“默认”servlet。在这种情况下，servlet 路径是请求 URI 减去上下文路径，并且路径信息为空。
> *   所有其他字符串仅用于完全匹配。

所以我猜第二个变体 ( `**`) 没有意义。

PS 我刚刚尝试设置这样的映射，似乎只有这个确切的 url`/shop/**`会被匹配（Tomcat 6.0.32）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-12T16:10:12.553

Servlet 规范本身（3.0 版，第 12.2 章）只定义了两种通配符映射：

*   如果 URL 模式以“/*”结尾，则它将所有请求匹配到前面的路径。
*   如果 URL 模式以“*.”开头，它将匹配对任何以以下扩展名结尾的资源的所有请求。

例如，“/foo/*”将匹配所有以“http://server/context/foo/”开头的 URL 请求，而“*.jsp”将匹配所有以“.jsp”结尾的 URL 请求。

按照规范，空字符串（“”）和单斜杠（“/”）具有特定的含义。“所有其他字符串仅用于完全匹配。”

严格遵循规范，您的第二个示例根本不是通配符模式，而应仅与“/shop/**”完全匹配。然而，大多数 Servlet 容器不那么严格，允许在任意位置使用 * 通配符，或者提供更复杂的模式匹配选项。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-12T16:04:43.603

没有在规范中谈论第二种情况。

根据[servlet 规范 12.2](http://download.oracle.com/otn-pub/jcp/servlet-3.0-fr-eval-oth-JSpec/servlet-3_0-final-spec.pdf)

> 以“/”字符开头并以“/*”后缀结尾的字符串用于路径映射

```
All other strings are used for exact matches only. 
```

根据规范，仅考虑精确匹配秒。它可能因服务器提供商而异。

# jquery - 使用 Ajax jQuery JSON 脚本时遇到问题

> ID：13843298
> 
> 赞同：0
> 
> 时间：2012-12-12T15:41:04.160
> 
> 标签：jquery, ajax, json

我正在使用以下脚本将一些表单值发送到我们网络上的脚本以返回 json 对象：

```
$(document).ready(function () {
    $("#sitesearch").click(function (event) {
        var url = 'http://192.168.1.75/search/index.php'

        var q = $("#q").val();
        var v = $("#v").val();
        var h = $("#h").val();
        var c = $("#c").val();

        var data = "q="+q+"&v="+v+"&h="+h+"&c="+c;

        var totalurl = url+"?"+data;

        $.ajax({
            url:url,
            data: data,
            dataType: 'jsonp',
            success: function(json){
                alert('Success');
            },
            error: function(){
                alert('Fail');
            }
        });

        $('#response').append(totalurl);
    });
}); 
```

每次我调用脚本时，它都会返回一条失败消息。我确定我没有只见树木不见森林，但我一辈子也看不到出了什么问题。感激地收到任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:44:56.173

您的**数据**不是 json，它是一个查询字符串。此外，您没有指定它是**POST**还是**GET**。您的 json 很可能应该是这样的？

```
var data = {
    "q": $("#q").val(),
    "v": $("#v").val(),
    "h": $("#h").val(),
    "c": $("#c").val(),
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:03:32.693

我最终采用的解决方案是在本地服务器上对 php 脚本进行 ajax 调用，然后使用 file_get_contents 从 Web 服务返回 json。有点黑客，但我们在争分夺秒而且它有效！

# joomla - joomla/virtuemart - 登录页面上没有布局

> ID：13843303
> 
> 赞同：0
> 
> 时间：2012-12-12T15:41:29.120
> 
> 标签：joomla, joomla1.5, virtuemart

我正在开发带有 1.1.8 的 joomla 1.5。我不是 joomla 的经验丰富的用户，我的一项修改从主题布局中退出了 mercurialmart 页面“shop.registration”（注册页面）：我错过了页眉和页脚。

有谁知道 joomla 和 meadowmart 模板系统是如何工作的？这是我第一次使用deremmart，第二次使用joomla。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T23:18:36.450

Virtuemart 2.x 版之前不使用 Joomla! 模板系统，而​​是使用它自己的“主题”机制，坦率地说这很可怕。主要问题是大多数人破解了标准主题，然后当更新出现时，它会被更新覆盖。

您仍然可以在[Virtuemart 开发人员文档](http://virtuemart.net/documentation/Developer_Manual/)网站上了解旧的[1.1.x 主题风格。](http://virtuemart.net/documentation/Developer_Manual/Modifying_the_Layout.html)

此外，您应该更新到[Virtuemart 1.1.9](http://virtuemart.net/downloads)，因为它包含一些严重的修复。

# sql - 何时使用查询或代码

> ID：13843307
> 
> 赞同：7
> 
> 时间：2012-12-12T15:41:40.960
> 
> 标签：sql, database, jakarta-ee

我要求 Java + JPA / Hibernate + Mysql 的具体案例，但我认为您可以将这个问题应用于大量语言。

有时我必须对数据库执行查询以获取某些实体，例如员工。假设您需要一些特定的员工（名字以“John”为名的员​​工），您是希望通过查询返回这组确切的员工，还是希望搜索所有员工，然后使用编程语言来检索你感兴趣的那些？**为什么**（轻松，效率）？哪个（通常）更有效？

根据表的大小，一种方法是否比另一种更好？

考虑：

*   两种情况下的复杂性和可重用性相同。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T15:45:10.527

始终对数据库进行查询。如果您不这样做，则必须将更多数据复制到客户端，并且还编写数据库以有效过滤数据，几乎可以肯定比您的代码更有效。

我能想到的唯一例外是，如果过滤条件在计算上很复杂，并且您可以将计算分散到比数据库更多的 CPU 能力上。

在我有一个数据库的情况下，服务器比客户端拥有更多的 CPU 能力，所以除非过载，否则对于相同数量的代码只会更快地运行查询。

此外，您必须编写更少的代码来使用 Hibernates 查询语言对数据库进行查询，而不必编写代码来操作客户端上的数据。Hibernate 查询还将利用配置中的任何客户端缓存，而无需编写更多代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T15:47:49.740

一般来说，我会让数据库做数据库擅长的事情。过滤数据是数据库真正擅长的事情，所以最好留在那里。

也就是说，在某些情况下，您可能只想获取所有这些并在代码中进行过滤。我能想到的一种方法是，如果行数相对较少并且您计划将它们缓存在您的应用程序中。在这种情况下，您只需查找所有行，缓存它们，然后根据缓存中的内容进行后续过滤。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-12T15:52:37.393

编程中经常使用一个通用技巧——用内存来加速操作。如果您有很多员工，并且您要逐个查询其中的很大一部分（比如，75% 的员工将一次或一次被查询），然后查询所有内容，*缓存它*（非常重要！），并完成在内存中的查找。下次查询时，跳过 RDBMS 的行程，直接进入缓存，并进行快速查找：与内存中的哈希查找相比，到数据库的往返非常昂贵。

另一方面，如果您正在访问一小部分员工，您应该只查询一个员工：从 RDBMS 到您的程序的数据传输需要大量时间、大量网络带宽、大量内存，以及 RDBMS 端的大量内存。查询大量行以丢弃除一行之外的所有行是没有意义的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-12T15:45:57.857

这是情景。我认为总的来说，最好使用 sql 来获取确切的结果集。

加载所有实体然后以编程方式搜索的问题是您必须加载所有实体，这可能会占用大量内存。此外，您还必须搜索所有实体。当您可以利用您的 RDBMS 并获得您想要的确切结果时，为什么要这样做。换句话说，当您可以让您的 RDBMS 为您完成工作时，为什么要加载可能使用过多内存的大型数据集，然后对其进行处理？

另一方面，如果你知道你的数据集的大小不是太大，你可以将它加载到内存中然后查询它——这样做的好处是你不需要去 RDBMS，这可能会也可能不会需要通过您的网络，具体取决于您的系统架构。

但是，即使这样，您也可以使用各种缓存实用程序来缓存常见的查询结果，这消除了自己缓存数据的优势。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-12T17:18:40.060

请记住，您的方法应该随着时间的推移而扩展。随着时间的推移，可能是一个小的数据集可能会在以后变成一个巨大的数据集。我们遇到了一个程序员的问题，他编写了应用程序来查询整个表，然后对其进行操作。当只有 100 行带有两个子选择时，该方法运行良好，但随着数据多年来的增长，性能问题变得明显。甚至插入日期过滤器以仅查询过去 365 天，可以帮助您的应用程序更好地扩展。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-12T18:16:45.637

-- 如果您正在寻找特定于休眠的答案，请查看@Mark 的答案

给定员工示例 - 假设员工数量可以随时间扩展，最好使用一种方法来查询数据库以获取确切数据。但是，如果您正在考虑像 Department（例如）这样的数据，其中数据快速增长的机会较少，那么查询所有这些数据并将其保存在内存中很有用 - 这样您就不必访问外部资源（数据库）每次，这可能是昂贵的。

所以一般参数是这些，

1.  数据缩放
2.  对业务的重要性
3.  数据量
4.  使用频率

从某种意义上说，当数据不会频繁扩展并且数据不是关键任务并且数据量可以在应用程序服务器的内存中进行管理并且经常使用时 - 如果需要，可以将它们全部带入并以编程方式过滤它们。

否则仅获取特定数据。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-16T16:49:30.507

什么更好：在家中储存大量食物或一点一点购买？当你经常旅行？只是在举办派对时？这取决于，不是吗？同样，最好的方法是性能优化。这涉及很多变数。艺术是在设计解决方案时防止自己陷入困境，并在您知道真正的瓶颈时进行优化。一个很好的起点在这里：en.wikipedia.org/wiki/Performance_tuning 一个想法可能或多或少普遍有用：很好地封装您的数据访问。

# javascript - 使用 Firefox 扩展向网页公开文件写入

> ID：13843315
> 
> 赞同：3
> 
> 时间：2012-12-12T15:41:56.513
> 
> 标签：javascript, firefox-addon, xul, firefox-addon-sdk, xpcom

我有一个 Web 应用程序，我的客户将其用于现金登记处。我需要做的是创建一个本地文件，因为收银机的软件需要从该文件中读取才能打印。

直到现在我一直在使用这个代码：

```
netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
var file = Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);
file.initWithPath(filePath); 
```

不幸的是，使用最新版本的 Firefox，这不再有效，所以我被告知我需要和附加组件来创建文件。我尝试开发一个附加组件（不知道是否成功）并且我有main.js 看起来像这样：

```
var FileManager =
{
Write:
    function (File, Text)
    {
        if (!File) return;
        const unicodeConverter = Components.classes["@mozilla.org/intl/scriptableunicodeconverter"]
            .createInstance(Components.interfaces.nsIScriptableUnicodeConverter);

        unicodeConverter.charset = "UTF-8";

        Text = unicodeConverter.ConvertFromUnicode(Text);
        const os = Components.classes["@mozilla.org/network/file-output-stream;1"]
          .createInstance(Components.interfaces.nsIFileOutputStream);
        os.init(File, 0x02 | 0x08 | 0x20, 0700, 0);
        os.write(Text, Text.length);
        os.close();
    },

Read:
    function (File)
    {
        if (!File) return;
        var res;

        const is = Components.classes["@mozilla.org/network/file-input-stream;1"]
            .createInstance(Components.interfaces.nsIFileInputStream);
        const sis = Components.classes["@mozilla.org/scriptableinputstream;1"]
            .createInstance(Components.interfaces.nsIScriptableInputStream);
        is.init(File, 0x01, 0400, null);
        sis.init(is);

        res = sis.read(sis.available());

        is.close();

        return res;
    },
}; 
```

任何想法我应该如何使用 main.js？安装插件后我在哪里找到它？我需要使用这样的东西：FileManager.Write(path,text)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-05T09:00:13.603

很抱歉超迟回复。

如果我正确理解您的问题，您有一个在 Firefox 中运行的 POS 应用程序，它通过 HTTP 与某种本地网络服务器通信。应用程序的客户端 JavaScript 需要能够从浏览器 PC 的本地文件系统读取和写入文件。

如果这是正确的，那么您可以按照以下方式进行操作。您需要创建一个 Firefox 插件，其中最简单的一种称为“引导式”（或“无重启”）插件。

* * *

无需重启的插件由两个文件组成：

*   bootstrap.js（包含您的“特权”代码的 JavaScript 文件）
*   install.rdf（描述您的 Firefrox 插件的 XML 文件）

要构建插件，只需将两个文件放在文件扩展名为 .zip 的 ZIP 文件的顶层（没有文件夹！）中`.xpi`。要安装插件，`about:addons`请从工具菜单导航到然后，单击`Install from file`，找到您的 XPI，打开它，然后在短暂延迟后选择`Install`。

* * *

放`install.rdf`这样的东西：

```
<?xml version="1.0"?>
<RDF xmlns="http://www.w3.org/1999/02/22-rdf-syntax-ns#" 
     xmlns:em="http://www.mozilla.org/2004/em-rdf#">
    <Description about="urn:mozilla:install-manifest">
        <em:id>youraddonname@yourdomain</em:id>
        <em:type>2</em:type>
        <em:name>Name of your addon</em:name>
        <em:version>1.0</em:version>
        <em:bootstrap>true</em:bootstrap>
        <em:description>Describe your addon.</em:description>
        <em:creator>Your name</em:creator>

        <!-- Firefox Desktop -->
        <em:targetApplication>
            <Description>
                <em:id>{ec8030f7-c20a-464f-9b0e-13a3a9e97384}</em:id>
                <em:minVersion>4.0.*</em:minVersion>
                <em:maxVersion>29.0.*</em:maxVersion>
            </Description>
        </em:targetApplication>
    </Description>
</RDF> 
```

* * *

您需要在以下代码中实现两个必需的 JavaScript 函数`bootstrap.js`：

*   `startup()`- 在您安装插件和浏览器启动时调用。
*   `shutdown()`- 在您卸载插件和关闭浏览器时调用。

您应该在`startup()`. 为了卫生，您也可以（并且可能应该）实现`install()`和`uninstall()`功能。

首先在中实现以下代码`bootstrap.js`：

```
const Cc = Components.classes;
const Ci = Components.interfaces;
let consoleService = Cc["@mozilla.org/consoleservice;1"]
                        .getService(Ci.nsIConsoleService);
let wm             = Cc["@mozilla.org/appshell/window-mediator;1"]
                        .getService(Ci.nsIWindowMediator);

function LOG(msg) {
  consoleService.logStringMessage("EXTENSION: "+msg);    
}

function startup() {
  try {
    LOG("starting up...");
    let windows = wm.getEnumerator("navigator:browser");
    while (windows.hasMoreElements()) {
      let chromeWindow = windows.getNext().QueryInterface(Ci.nsIDOMWindow);
      WindowListener.setupBrowserUI(chromeWindow);
    }
    wm.addListener(WindowListener);
    LOG("done startup.");
  } catch (e) {
    LOG("error starting up: "+e);
  }
}

function shutdown() {
  try {
    LOG("shutting down...");
    let windows = wm.getEnumerator("navigator:browser");
    while (windows.hasMoreElements()) {
      let chromeWindow = windows.getNext().QueryInterface(Ci.nsIDOMWindow);
      WindowListener.tearDownBrowserUI(chromeWindow);
    }
    wm.addListener(WindowListener);
    LOG("done shutdown.");
  } catch (e) {
    LOG("error shutting down: "+e);
  }
} 
```

基本上，这需要`WindowListener.setupBrowserUI()`您的网络浏览器的每个当前和未来窗口。`WindowListener`定义如下：

```
var WindowListener = {
  setupBrowserUI: function(chromeWindow) {
    chromeWindow.gBrowser.addEventListener('load', my_load_handler, true);
  },
  tearDownBrowserUI: function(chromeWindow) {
    chromeWindow.gBrowser.removeEventListener('load', my_load_handler, true);
  },
  onOpenWindow: function(xulWindow) {
    let chromeWindow = xulWindow.QueryInterface(Ci.nsIInterfaceRequestor)
                         .getInterface(Ci.nsIDOMWindow);
    chromeWindow.addEventListener("load", function listener() {
      chromeWindow.removeEventListener("load", listener, false);
      var domDocument = chromeWindow.document.documentElement;
      var windowType = domDocument.getAttribute("windowtype");
      if (windowType == "navigator:browser")
        WindowListener.setupBrowserUI(chromeWindow);
    }, false);
  },
  onCloseWindow: function(chromeWindow) { },
  onWindowTitleChange: function(chromeWindow, newTitle) { }
}; 
```

这会为事件设置一个事件侦听器，然后为每个 ChromeWindow中`OpenWindow`的事件安装一个事件侦听器。事件处理程序定义为：`load``TabBrowser``load`

```
var my_load_handler = function (evt) {
  try {
    var browserEnumerator = wm.getEnumerator("navigator:browser");
    while (browserEnumerator.hasMoreElements()) {
      var browserWin = browserEnumerator.getNext();
      var tabbrowser = browserWin.gBrowser;
      var numTabs = tabbrowser.browsers.length;
      for (var index = 0; index < numTabs; index++) {
        var currentBrowser = tabbrowser.getBrowserAtIndex(index);
        var domWindow = currentBrowser.contentWindow.wrappedJSObject;
        // identify your target page(s)...
        if (domWindow.location.href == 'http://yourserver/yourpage') {
          // install the privileged methods (if not already there)
          if (!domWindow.hasOwnProperty('__my_priv_members__') {
            install_my_privileged_methods(browserWin, domWindow);
          }
        }
      }
    }
  } catch (e) {
    LOG(e);
  }
} 
```

以正确的页面为目标（通过检查其对象的`window.location.href`and 调用，该对象定义为：`install_my_privileged_methods``window`

```
function install_my_privileged_methods(chromeWindow, domWindow) {
  install_privileged_method(chromeWindow, domWindow, 'WriteFile', 
    function(priv) {
      return function(File, Text, cb) {
        priv.call([File, Text], function(rstatus, rdata, rerror){
          if (cb) cb(rstatus, rerror);
        });
      };
    },
    function (chromeWindow, args, cb) {
      var [File, Text] = args;
      if (!File) return cb(0, null, "need a filename");
      try {
        const unicodeConverter = 
           Cc["@mozilla.org/intl/scriptableunicodeconverter"]
             .createInstance(Ci.nsIScriptableUnicodeConverter);
        unicodeConverter.charset = "UTF-8";
        Text = unicodeConverter.ConvertFromUnicode(Text);
        const os = Cc["@mozilla.org/network/file-output-stream;1"]
                     .createInstance(Ci.nsIFileOutputStream);
        os.init(File, 0x02 | 0x08 | 0x20, 0700, 0);
        os.write(Text, Text.length);
        os.close();
        cb(1, null, null);
      } catch (e) {
        cb(0, null, "error writing file: "+e);
      }
    }
  );

  install_privileged_method(chromeWindow, domWindow, 'ReadFile', 
    function(priv) {
      return function(File, cb) {
        priv.call([File], function(rstatus, rdata, rerror){
          if (cb) cb(rstatus, rdata, rerror);
        });
      };
    },
    function (chromeWindow, args, cb) {
      var [File] = args;
      if (!File) return cb(0, null, "need a filename");
      try {
        const is = Cc["@mozilla.org/network/file-input-stream;1"]
                     .createInstance(Ci.nsIFileInputStream);
        const sis = Cc["@mozilla.org/scriptableinputstream;1"]
                      .createInstance(Ci.nsIScriptableInputStream);
        is.init(File, 0x01, 0400, null);
        sis.init(is);
        var Text = sis.read(sis.available());    
        is.close();
        cb(1, Text, null);
      } catch (e) {
        cb(0, null, "error reading file: "+e);
      }
    }
  );
} 
```

我没有测试这段代码。这是对您上面所写内容的直截了当的翻译……我认为这是可行的！

这向所选对象添加了两个特殊方法`WriteFile`& 。在您的 Web 应用程序的（非特权）JavaScript 代码中，像这样使用它们：`ReadFile``window`

```
var buffer = '...'; // the text to be written
window.WriteFile('C:\\path\\to\\file.txt', buffer, function(ok, errmsg) {
  if (!ok) alert(errmsg);
});

window.ReadFile('C:\\path\\to\\file.txt', function(ok, buffer, errmsg) { 
  if (!ok) return alert(errmsg);
  // use buffer here!
}); 
```

最后，`install_privileged_method`定义为：

```
var install_privileged_method = (function(){
  var gensym = (function (){
    var __sym = 0;
    return function () { return '__sym_'+(__sym++); }
  })();
  return function (chromeWindow, target, slot, handler, methodFactory) {
    try {
      target.__pmcache__ = target.hasOwnProperty('__pmcache__')
        ? target.__pmcache__
        : { ticket_no: 0, callbacks: {}, namespace: gensym() };
      target[slot] = methodFactory({ call: function(fargs, fcb) {
        try {
          var ticket_no = target.__pmcache__.ticket_no++;
          target.__pmcache__.callbacks[ticket_no] = fcb;
          var cevent = target.document.createEvent("CustomEvent");
          cevent.initCustomEvent(
            target.__pmcache__.namespace+'.'+slot,
            true, true, { fargs: fargs, ticket_no: ticket_no }
          );
          target.dispatchEvent(cevent);
        } catch (ue) {
          fcb(0, null, 'untrusted dispatcher error: '+ue);
        }
      }});
      LOG("installed untrusted dispatcher for method '"+slot+"'.");
      target.addEventListener(
        target.__pmcache__.namespace+'.'+slot,
        function(cevent){
          var ticket_no = cevent.detail.ticket_no;
          var fargs = cevent.detail.fargs;
          var fcb = target.__pmcache__.callbacks[ticket_no];
          try {
            handler(chromeWindow, fargs, fcb);
          } catch (pe) {
            fcb(0, null, 'privileged handler error: '+pe);
          }
        },
        false,
        true
      );
      LOG("installed privileged handler for method '"+slot+"'.");
    } catch (ie) {
      LOG("ERROR installing handler/factory for privileged "+
          "method '"+slot+"': "+ie);
    }
  };
})(); 
```

# objective-c - 如何始终在顶部显示 uiview？

> ID：13843316
> 
> 赞同：1
> 
> 时间：2012-12-12T15:41:58.153
> 
> 标签：objective-c, uiview, uivewcontroller

我想`logo UIView`在应用程序运行时始终显示在最前面，我知道有一种方法可以做到这一点，将相同的添加`UIView`到每个`UIViewController`，但我认为这不是最好的方法。当我有很多页面并修改时`logo UIView`，必须每页都修改它。

有人有更好的方法吗？谢谢。

看起来像这样：

![示例图像](../Images/f662e69766b85a77438612750e2ca15e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:46:30.867

由于每个应用程序只有一个窗口，并且视图没有级别，因此无论如何您都必须确保视图保持在层次结构的顶部。一种相对简单的方法是将其直接添加到界面其余部分（导航控制器）上方的窗口中：

在`applicationDidLaunch:`

```
// After the main navigation controller or tab controller has been added
// either programmatically or in the xib:
UIImage *logo = [UIImage imageNamed:@"logo.png"];
UIImageView *logoView = [[UIImageView alloc] initWithImage:logo];
[self.window addSubview:logoView]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T15:57:36.967

实际上，我认为 (a) 创建一个 UIView 的子类来显示您的徽标并在其中包含所有必要的设置，然后 (b) 将此子类添加到每个视图控制器是最干净和最易于管理的方法。

与将视图添加到窗口相比，我更喜欢这种方法的原因是，如果您有一个不想显示徽标的视图，则不需要显示和隐藏您添加到窗口的内容。此外，根据我的经验，直接添加到窗口可能会在某些 iOS 设备上造成旋转挑战，具体取决于您在做什么。

此外，为了确保您的徽标视图始终位于视图层次结构的顶部，您可以做两件事：

1.  如果视图已经存在，您可以使用`[UIView bringSubviewToFront:]`

    ```
    [myParentView bringSubviewToFront:myLogoSubview]; 
    ```

2.  如果您正在创建视图，当您添加它时它将位于顶部`[UIView addSubview:]`

    ```
    // Set up myLogoSubview first here with alloc+init, etc.
    [myParentView addSubview:myLogoSubview];` 
    ```

在您的图像中看起来您将替换`myParentView`为您希望保持在顶部`self.view`的`myLogoSubview`视图，但这只是我基于您的图像的假设。

# ios - rgb(34, 34, 34) 到 UIColor

> ID：13843318
> 
> 赞同：12
> 
> 时间：2012-12-12T15:42:01.320
> 
> 标签：ios, regex, uicolor

我有一个 RGB 字符串的形式`rgb(34, 34, 34)`。我想将其解析为`UIColor`使用 iOS。我相信我需要一个正则表达式，但我似乎无法破解它。这就是我到目前为止所拥有的。

```
NSString *regExString = @"(.*?)rgb\((\d+), (\d+), (\d+)\)";

NSError *error = nil;

NSRegularExpression *regEx = [NSRegularExpression regularExpressionWithPattern:regExString
                                                                       options:NSRegularExpressionCaseInsensitive error:&error];

NSArray *matches = [regEx matchesInString:backgroundColorString options:NSRegularExpressionCaseInsensitive
                                        range:NSMakeRange(0, backgroundColorString.length)]; 
```

如果有人能把我送到正确的方向，那就太好了。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-12T15:44:16.140

UIColor 使用 0-1 而不是 0-255 系统，因此您只需像这样转换它：

```
[UIColor colorWithRed:34.0/255.0 green:34.0/255.0 blue:34.0/255.0 alpha:1.0]; 
```

**更新**

重新阅读您的问题后，我意识到您真正的问题不是转换为 UIColor 而是获取值。我对正则表达式了解不多，但 NSScanner 是一个简单的 Objective-C 对象，它可以做同样的事情，尽管更冗长。试穿这个尺寸。我确信可能有更好的方法，甚至可能更有效地使用 NSScanner 本身，但这绝对有效，并且适用于任何通过的 int 值。

```
NSString *backgroundColorString = @"rgb(34, 34, 34)";

NSScanner *scanner = [NSScanner scannerWithString:backgroundColorString];
NSString *junk, *red, *green, *blue;
[scanner scanUpToCharactersFromSet:[NSCharacterSet decimalDigitCharacterSet] intoString:&junk];
[scanner scanUpToCharactersFromSet:[NSCharacterSet punctuationCharacterSet] intoString:&red];
[scanner scanUpToCharactersFromSet:[NSCharacterSet decimalDigitCharacterSet] intoString:&junk];
[scanner scanUpToCharactersFromSet:[NSCharacterSet punctuationCharacterSet] intoString:&green];
[scanner scanUpToCharactersFromSet:[NSCharacterSet decimalDigitCharacterSet] intoString:&junk];
[scanner scanUpToCharactersFromSet:[NSCharacterSet punctuationCharacterSet] intoString:&blue];

UIColor *backgroundColor = [UIColor colorWithRed:red.intValue/255.0 green:green.intValue/255.0 blue:blue.intValue/255.0 alpha:1.0]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T15:45:25.623

为什么要使用正则表达式？

只需使用 255 的百分比：

```
UIColor* color = [UIColor colorWithRed:(red/255.0) green:(green/255.0) blue:(blue/255.0) alpha:1]; 
```

多田！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-05T03:47:16.497

我使用预处理器宏使它变得简单。

```
#define UIColorMake(r,g,b)[[UIColor alloc] initWithRed:r/255.0 green:g/255.0 blue:b/255.0 alpha:1.0f]; 
```

如何使用：

```
UIColor MyGreenColor = UIColorMake(31.0, 164.0, 23.0); 
```

我总是将这段代码留在我的 iOS 项目中。

# java - 在 JList 中显示项目

> ID：13843325
> 
> 赞同：0
> 
> 时间：2012-12-12T15:42:28.370
> 
> 标签：java, swing, jlist

我有 2 个`JList`组件。当我从 中单击一个项目时`JList A`，`JList B`将被填充。

两者都`JList`将显示相同的记录集。（但是，如果我们单击 中的一个项目`JList A`，该项目不应该显示在 中`JList B`）。我怎样才能做到这一点？

我的工作：

```
listA.addListSelectionListener(new ListSelectionListener() {
    @Override
    public void valueChanged(ListSelectionEvent evt) {
        if (evt.getValueIsAdjusting()==false) {             
            listB.setModel(new AbstractListModel() {
                public int getSize() {
                    return allAnimals("Lions").size();
                }
                public Object getElementAt(int index) {
                    return allAnimals("Lions").keySet().toArray()[index];
                }
        }); 
```

但是，我无法删除`JLIst A`从中单击的项目`JList B`。我怎样才能做到这一点？

根据上面的代码，当我点击 时`JList A`，所有项目都显示在`JList B`. 我需要显示除上选择的项目之外的所有项目`JList A`。我怎样才能做到这一点？

方法签名`allAnimals()`；

```
public Map<String, Animal> allAnimals(String animalName); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:16:18.007

所以我的理解是你只想更新 JList 中的内容。我之前的做法是创建一个 DefaultListModel 并将其分配给 JList。

```
DefaultListModel listModel = new DefaultListModel();
JList list = new JList(listModel); 
```

从那里，您可以从 listmodel 添加或删除元素，JList 将自动更新。

```
//add new element to the listmodel
listModel.add(/*index*/ 0, /*random object content*/ "Lions");

//remove specific element
listModel.remove(0);

//remove specific object
listModel.removeElement(someObject);

//remove all elements
listModel.removeAllElements(); 
```

我希望这回答了你的问题。

# zend-framework2 - ZF2 - Forward 插件返回 ViewModel 对象。如何使它返回其他值，例如简单或关联数组？

> ID：13843326
> 
> 赞同：0
> 
> 时间：2012-12-12T15:42:31.243
> 
> 标签：zend-framework2, zend-framework-mvc, zend-framework-routing

我从一个控制器的操作方法调用`the Forward plugin`以从另一个控制器的操作方法获取值：

```
namespace Foo/Controller;

class FooController {

    public function indexAction() {

        // I expect the $result to be an associative array,
        //    but the $result is an instance of the Zend\View\Model\ViewModel
        $result = $this->forward()->dispatch('Boo/Controller/Boo', 
                                              array(
                                                  'action' => 'start'
                                             ));
    }
} 
```

这是`Boo`我申请的控制器：

```
namespace Boo/Controller;

class BooController {

    public function startAction() {

        // I want this array to be returned,
        //     but an instance of the ViewModel is returned instead
        return array(
            'one' => 'value one',
            'two' => 'value two',
            'three' => 'value three',
        );
    }
} 
```

如果我`print_r($result)`是`error/404`页面的 ViewModel：

```
Zend\View\Model\ViewModel Object
(
    [captureTo:protected] => content
    [children:protected] => Array
        (
        )

    [options:protected] => Array
        (
        )

    [template:protected] => error/404
    [terminate:protected] => 
    [variables:protected] => Array
        (
            [content] => Page not found
            [message] => Page not found.
            [reason] => error-controller-cannot-dispatch
        )

    [append:protected] => 
) 
```

到底是怎么回事？如何改变这种行为并从中获取所需的数据类型`the Forward plugin`？

**更新 1**

现在只[在这里](http://zf2.readthedocs.org/en/latest/modules/zend.view.quick-start.html#controllers-and-view-models)找到这个：

> MVC 为控制器注册了几个侦听器来自动执行此操作。第一个将查看您是否从控制器返回了关联数组；如果是这样，它将创建一个视图模型并使这个关联数组成为变量容器；这个 View Model 然后替换 MvcEvent 的结果。

这不起作用：

```
$this->getEvent()->setResult(array(
                'one' => 'value one',
                'two' => 'value two',
                'three' => 'value three',
            ));

return $this->getEvent()->getResult();  // doesn't work, returns ViewModel anyway 
```

这意味着我必须将变量放入 a `ViewModel`，返回 a`ViewModel`并从`ViewModel`. 非常好的设计，我可以说。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:12:19.930

您必须在 ZF2 中的操作中禁用视图。你可以这样做：

```
namespace Application\Controller;

use Zend\Mvc\Controller\AbstractActionController;

class IndexController extends AbstractActionController
{
    public function indexAction()
    {
        $result = $this->forward()->dispatch('Application/Controller/Index', array( 'action' => 'foo' ));
        print_r($result->getContent());
        exit;
    }

    public function fooAction()
    {
        $response = $this->getResponse();
        $response->setStatusCode(200);
        $response->setContent(array('foo' => 'bar'));
        return $response;
    }
} 
```

# android - Android 4.1.2 默认浏览器 - 禁用输入字段的渲染问题

> ID：13843330
> 
> 赞同：8
> 
> 时间：2012-12-12T15:42:45.940
> 
> 标签：android, html, css

似乎某些版本的默认 android 浏览器存在渲染问题。如果我创建一个页面，其中有某种输入字段和一个按钮，当我禁用另一个输入字段时，该按钮显示为灰色（除非这是在页面加载时完成的，否则您必须单击/缩放一点以让浏览器重新渲染）。

有趣的是，它不会将禁用的 STYLE 应用到按钮，而只是将其变灰。这是一个示例。

[链接到编辑器 jsfiddle](http://jsfiddle.net/v7mWg/)
[链接到嵌入式 jsfiddle](http://jsfiddle.net/v7mWg/embedded/result/)

## CSS：

```
ul { list-style-type:none; }

.xxx {
    background: blue;
    color: white;
}

.xxx:disabled { background-color: red; } 
```

## HTML：

```
<div id="root">
    <ul>
        <li>
            <input name="x" id="enable" class="x" type="radio">Enable</input>
        </li>
        <li>            
            <input name="x" id="disable" class="x" type="radio">Disable</input>
        </li>            
    </ul>
    <input type="button" class="xxx" value="Button"></input>
</div> 
```

## JS：

```
$(function() {
    $('.x:eq(0)').prop('disabled', true);
}); 
```

注意事项：

*   该按钮*未被*禁用。单击它，它会暂时变灰。
*   按钮的禁用状态有一种样式，将其背景颜色设置为红色（如果禁用按钮，您将看到此工作），但在示例中按钮不会显示为红色，因此它甚至不只是呈现禁用样式. 似乎主要只是将不透明度设置为较低的值
*   单选按钮之前的按钮不会受到影响。[http://jsfiddle.net/YVFVZ/4/](http://jsfiddle.net/YVFVZ/4/)

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T14:08:05.950

我终于弄明白了。我对这个解决方案并不满意，但它似乎有效。

如果将输入包装在一个`position: relative`元素中，它可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-15T07:27:04.690

让我们清理一些 HTML！

有一个小提琴 -[小提琴链接！](http://jsfiddle.net/v7mWg/4/)

1.  贴上一些适当的标签
2.  *删除无效 HTML*的结束`</input>`标记。让我们自行关闭它们以使它们漂亮（尽管这不是必需的，除非您使用 XHTML）。
**   `<ul>`当我们可以使用一点 CSS 来定位表单元素时，删除那些看起来是多余的。*   将这些类重命名为更相关的东西！*

 *HTML

```
<div id="root">
    <input name="buttonState" id="enable" class="action" type="radio" />
    <label for="enable">Enable</label>

    <input name="buttonState" id="disable" class="action" type="radio" />
    <label for="disable">Disable</label>

    <input type="button" class="button" value="Button" />
</div> 
```

jQuery

所以你想在单击启用单选按钮时启用按钮并在单击禁用单选按钮时禁用？这里：

```
$('#disable').click(function () {
    $('.button').attr('disabled', true);
});
$('#enable').click(function () {
    $('.button').attr('disabled', false);
}); 
```

最后，CSS。

```
.action {
    display: block;
    float: left;
    clear: left;
    margin: 0 10px;
}
label {
    display: block;
    margin: 10px 0;
}
.button {
    background: #00F;
    margin: 0 10px 10px 10px;
}
.button:disabled {
    background: #F00;
}
input, label {
    cursor: pointer;
} 
```

迷人的 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-14T12:45:00.047

尝试使用这个 DOM

`<div id="root"> <ul> <li> <input name="x" id="enable" class="x" type="radio" />Enable </li> <li>
<input name="x" id="disable" class="x" type="radio" />Disable </li>
</ul> <input type="button" class="xxx" value="Button" /> </div>`

还有 js 作为

```
$(function() {
    $('.x:eq(0)').prop('disabled', 'disabled');
}); 
```

可能这会有所帮助。*

# playframework - PlayFramework 2.0 文件存储

> ID：13843331
> 
> 赞同：0
> 
> 时间：2012-12-12T15:42:46.267
> 
> 标签：playframework, playframework-2.0, file-storage

我必须创建（而不是上传！）、存储并能够使用 Play 2.0 应用程序下载 PDF 文件。我怎么能在 Play 中做到这一点？我正在考虑将文件存储为 MySQL DB 中的 blob，但在这种情况下，是否有机会在不使用文件系统的情况下创建 PDF 文件？第二个问题是如何实现文件下载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:20:04.813

一般来说，在数据库中存储文件通常更昂贵并且有一些缺点。（检查原因：[在 DB 中存储图像 - 是还是不是？](https://stackoverflow.com/q/3748/1066240)）

另一方面，它还取决于文件是否应该受到保护，或者它们是某种公共文档。

有两种解决方案需要考虑：

1.  如果您不担心安全性，您可以创建文件并保存在某个文件夹中，然后，您可以使用一些 http 服务器来提供它，并且在您的数据库中只保留路径。这是个好主意，尤其是服务器通常只是为提供文件而创建的，因此您无需重新发明轮子。
2.  如果文件受到限制，也将它们存储在文件系统中，无论如何都存储在一些非公共文件夹中，那么您可以只为经过身份验证/授权的访问者返回 a`File`作为`Result`操作，使用这样简单的代码（Java）

    ```
    public static Result serveFile(String absouteFilePath){
        //some authorization...
        return ok(new File(absouteFilePath));
    } 
    ```

# jquery - Nivo Slider - 当只有一张图像时停止任何动画？

> ID：13843335
> 
> 赞同：0
> 
> 时间：2012-12-12T15:43:00.503
> 
> 标签：jquery, nivo-slider

我正在尝试停止横幅上的过渡，因此如果上传了一张图片，它不会循环播放 - 它只是保持静止并且不会移动（没有过渡）

我试过在 Nivoslider 上使用它

```
if ($(".nivoSlider").children().length === 1)
         $(".nivo-controlNav").hide(0); 
```

完整的脚本在这里；

```
<script type="text/javascript">
 $(window).load(function () {
     var total = $('#slider img').length;
     var rand = Math.floor(Math.random() * total);

     if ($(".nivoSlider").children().length === 1)
         $(".nivo-controlNav").hide(0);

     $('#slider').nivoSlider({
         effect: 'fade',
         animSpeed: '500',
         pauseTime: '5000',
         startSlide: rand
     });
 });
</script> 
```

我也试过这个；

```
if($('.nivoSlider').find('img').size()===1)
{
     $('.nivo-directionNav').remove();
} 
```

如何在不更改主 nivoslider js 文件中的任何内容的情况下停止它？

它发生在此页面[http://securushealthandsafety.co.uk/health-and-safety-training/iosh-approved-coaching-for-safety.aspx](http://securushealthandsafety.co.uk/health-and-safety-training/iosh-approved-coaching-for-safety.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:54:06.790

你有没有尝试过

*   首先检查图像的数量`#slider`
*   如果没有图像> 1 应用`nivoSlider`

**例如。**

```
if ($("#slider").find("img").length > 1)
{
  $('#slider').nivoSlider({
         effect: 'fade',
         animSpeed: '500',
         pauseTime: '5000',
         startSlide: rand
     });
} 
```

# python - 带有 apache2 的 Django 1.4

> ID：13843337
> 
> 赞同：0
> 
> 时间：2012-12-12T15:43:07.983
> 
> 标签：python, django, wsgi

我对 Django 1.4 和 apache2 有疑问。我有以下代码：

```
from django.db import models
from django.contrib.auth.models import User, SiteProfileNotAvailable
from django.conf import settings

....
*.... so many includes....*
.....

try:
    app_label, model_name = settings.AUTH_PROFILE_MODULE.split('.')
    Profile = models.get_model(app_label, model_name)
except (ImportError, ImproperlyConfigured):
    raise SiteProfileNotAvailable

if not Profile:
    raise SiteProfileNotAvailable 
```

它会引发 SiteProfileNotAvailable 错误，在 if not Profile: 语句下方。这意味着 models.get_model 获取配置文件模型失败。我本地测试环境中的相同代码效果很好。会出什么问题？

编辑：我的 AUTH_PROFILE_MODULE 在 settings.py 文件中如下所示。

```
AUTH_PROFILE_MODULE = 'profile.Profile' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T04:52:40.210

我将配置文件模型重命名为 uprofile（现在它就像 uprofile.uprofile），一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:00:11.050

也许您应该像这样更改您的测试（在 if 语句中使用已经实例化的变量进行测试）。您对变量的测试`False`并在该测试中`None`进行评估`False`：

```
model_found = False

try:
    app_label, model_name = settings.AUTH_PROFILE_MODULE.split('.')
    Profile = models.get_model(app_label, model_name)
    model_found = True
except (ImportError, ImproperlyConfigured):
    raise SiteProfileNotAvailable

if not model_found:
    raise SiteProfileNotAvailable 
```

# dojo - DataGrid 返回 null selectedItem

> ID：13843339
> 
> 赞同：0
> 
> 时间：2012-12-12T15:43:10.290
> 
> 标签：dojo, dojox.grid.datagrid

我有一个 dojo (1.8.1) DataGrid，我无法检索 DataGrid 中的所有选定项目（网格中大约有 171 条记录）。问题是返回到 selectedItem 的某些数据为空。

有趣的是，如果我一直滚动到 DataGrid 的底部，然后运行下面的代码，我会得到所有记录..这很奇怪..

```
var gridy = dijit.byId("grid");
var items = gridy.selection.getSelected();
if (items.length) {
  dojo.forEach(items, function(selectedItem) {
   if (selectedItem !== null) {
     dojo.forEach(gridy.store.getAttributes(selectedItem),
            function(attribute){
              var value = gridy.store.getValues(selectedItem, attribute);
              alert('attribute: ' + attribute + ', value: ' + value);
            });
    } 
  });
} 
```

So, when all items in the grid are selected (171) I only get 50 items showing as selected and the rest are null for selectedItem variable. 奇怪的问题，看起来像 DataGrid 中的错误？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:03:11.280

这可能是由于`paging`（请参阅[“分页和虚拟滚动”中的 DataGrid 教程](http://dojotoolkit.org/documentation/tutorials/1.8/datagrid/)）。*“一次只渲染一小部分数据”*。因此，一个讨厌的解决方法可能是在实例化它时`rowsPerPage`将您的 -property设置`DataGrid`为一个高值（如`1000`）。它应该高于预期在网格中显示的最大行数。

# php - PDO 的 setFetchMode(PDO::FETCH_ASSOC) 的全局设置

> ID：13843345
> 
> 赞同：4
> 
> 时间：2012-12-12T15:43:35.797
> 
> 标签：php, pdo

> **可能重复：**
> [是否可以设置默认 PDO 获取模式？](https://stackoverflow.com/questions/3893858/is-is-possible-to-set-a-default-pdo-fetch-mode)

我已经搜索了互联网和这个网站，但找不到解决方案。

有没有办法`$this->query->setFetchMode(PDO::FETCH_ASSOC);`全局应用所有 PDO 查询？我发现自己一遍又一遍地重复这句话。

我已经尝试将它应用于初始`PDO`连接：`$this->connection->setFetchMode()`但这会引发异常。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-12T15:46:48.773

从 5.2 开始

```
$pdo->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_ASSOC); 
```

# ruby-on-rails - has_many > 通过？

> ID：13843348
> 
> 赞同：0
> 
> 时间：2012-12-12T15:43:36.800
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我的模型

```
class House
 has_many :taggings
 has_many :tags, through: :taggings
end

class Tag
 has_many :taggings
 has_many :houses, through: :taggings
end 
```

路线：

```
scope "/:locale" do
resources :houses do
  collection do
    get 'tags/:tag', to: 'houses#index', as: :tag
end 
```

房屋控制器：

```
if params[:tag]
      @houses = House.tagged_with(params[:tag])
      @tag = Tag.find_by_name(params[:tag])
  else 
```

房屋索引视图

```
- @houses.each do |house|
 = raw house.tags.map(&:name).map { |t| link_to t, tag_houses_path(t), class: active_class?(tag_houses_path(t)) }.join 
```

我想显示带有标记页面链接的标签。这很好用，但是当 2 个房屋被标记为相同的标记名（DB 中的 1 个）时，视图会显示 2 个相同的标记。（例如，房子 1 和 2 被标记为“家庭”，我在索引页面上看到 2 个家庭标签）我该如何解决这个问题？

谢谢..remco

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:28:53.053

不确定您希望您的视图看起来像什么，但以下语句将为您提供与视图/数组中所有房屋相关联的唯一标签集：

```
@houses.collect {|h| h.tags.collect {|x| x.name}}.flatten.uniq 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:09:58.023

您想要至少附在一个房子上的一组标签，对吧？

```
Tag.joins(:taggings).select(“distinct(tags.id)”) 
```

# ssas - 如何在 SSAS 中仅公开层次结构的某些级别？

> ID：13843349
> 
> 赞同：1
> 
> 时间：2012-12-12T15:43:39.310
> 
> 标签：ssas, olap

所以，这是一个有趣的问题：

我有由供应商划分的层次结构。例如，地理层次结构：

Client1 - 地理层次结构

*   供应商1
    *   全球的
        *   不适用
            *   密歇根州
        *   欧洲
*   供应商2
    *   全球的
        *   不适用
            *   新泽西州

是否有一种方法可以将 Supplier1 的子项仅公开给某些用户，而将 Supplier2 的子项仅公开给一组不同的用户？具体来说，一种不使用角色的方法？

# ajax - 如何通过 URL 更改而不是页面重定向进行 ajax 加载？

> ID：13843351
> 
> 赞同：0
> 
> 时间：2012-12-12T15:43:43.893
> 
> 标签：ajax, url

如果您仔细注意 facebook，您会明白，当您访问一个页面到另一个页面时，**整个页面不会刷新或重定向**，但导航到新页面时**URL 会发生变化。*****聊天窗口****打开时更清楚，*它们*在***页面**加载期间保持静态**。正如其他网站通过使用**# 但 facebook 不这样做**。**

 **我想到了另一个例子：[http](http://www.davidwalsh.name/) ://www.davidwalsh.name/ 。访问该站点并**打开其站点中的其他页面**，您就会明白我的意思。不要忘记**注意 URL 的变化。**

他们是怎么做到的？

添加更多：我想要一种使用 ajax 加载页面内容的方式，更改书签功能的 URL，但是在更改 URL 时，它不应该通过不使用 #（哈希）重新加载/刷新页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:53:41.850

你有两个问题：

对于 URL 更改，您可以将路径而不是 # 放在锚的 href 属性中（例如 /otherlink）。

打开聊天或打开某些 div 不需要在 url 中发送它，它是 div 上的 onclick 事件及其扩展。此外，聊天保持打开状态可能是第一次打开聊天时设置的 cookie 或标志，并使用他们设置的标志检查和更改聊天。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T02:56:01.980

正如@andytuba 所建议的那样

对于 Facebook，谷歌“哈希导航 ajax”。

对于大卫沃尔什，谷歌“历史 API”。**

# python - 切片 scipy.sparse 矩阵的最快方法是什么？

> ID：13843352
> 
> 赞同：22
> 
> 时间：2012-12-12T15:43:51.247
> 
> 标签：python, numpy, scipy, sparse-matrix

我通常使用

```
matrix[:, i:] 
```

它似乎没有我预期的那么快。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-06-02T17:15:39.363

如果您想获得一个稀疏矩阵作为输出，进行行切片的最快方法是拥有一个`csr`类型，并且对于列切片`csc`，[如此处详述](http://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.csr_matrix.html#scipy.sparse.csr_matrix)。在这两种情况下，你只需要做你目前正在做的事情：

```
matrix[l1:l2,c1:c2] 
```

如果您想要另一种类型作为输出，则可能有更快的方法。[在这个其他答案](https://stackoverflow.com/a/16507031/832621)中，解释了许多对矩阵进行切片的方法，并比较了它们的不同时间。例如，如果您想要一个`ndarray`作为输出，最快的切片是：

```
matrix.A[l1:l2,c1:c2] 
```

或者：

```
matrix.toarray()[l1:l2,c1:c2] 
```

比：

```
matrix[l1:l2,c1:c2].A #or .toarray() 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-06-14T14:52:58.500

我发现`scipy.sparse.csr_matrix`通过滚动您自己的行索引器可以更快地进行宣传的快速行索引。这是想法：

```
class SparseRowIndexer:
    def __init__(self, csr_matrix):
        data = []
        indices = []
        indptr = []

        # Iterating over the rows this way is significantly more efficient
        # than csr_matrix[row_index,:] and csr_matrix.getrow(row_index)
        for row_start, row_end in zip(csr_matrix.indptr[:-1], csr_matrix.indptr[1:]):
             data.append(csr_matrix.data[row_start:row_end])
             indices.append(csr_matrix.indices[row_start:row_end])
             indptr.append(row_end-row_start) # nnz of the row

        self.data = np.array(data)
        self.indices = np.array(indices)
        self.indptr = np.array(indptr)
        self.n_columns = csr_matrix.shape[1]

    def __getitem__(self, row_selector):
        data = np.concatenate(self.data[row_selector])
        indices = np.concatenate(self.indices[row_selector])
        indptr = np.append(0, np.cumsum(self.indptr[row_selector]))

        shape = [indptr.shape[0]-1, self.n_columns]

        return sparse.csr_matrix((data, indices, indptr), shape=shape) 
```

也就是说，可以通过将每行的非零值存储在单独的数组中（每行具有不同的长度）并将所有这些行数组放入对象类型数组中来利用 numpy 数组的快速索引（允许每一行具有不同的大小），可以有效地建立索引。列索引的存储方式相同。该方法与标准 CSR 数据结构略有不同，标准 CSR 数据结构将所有非零值存储在单个数组中，需要查找以查看每一行的开始和结束位置。这些查找可以减慢随机访问速度，但对于检索连续行应该是有效的。

## 分析结果

我的矩阵`mat`是 1,900,000x1,250,000 `csr_matrix`，包含 400,000,000 个非零元素。 `ilocs`是一个包含 200,000 个随机行索引的数组。

```
>>> %timeit mat[ilocs]
2.66 s ± 233 ms per loop (mean ± std. dev. of 7 runs, 1 loop each) 
```

相比：

```
>>> row_indexer = SparseRowIndexer(mat)
>>> %timeit row_indexer[ilocs]
59.9 ms ± 4.51 ms per loop (mean ± std. dev. of 7 runs, 10 loops each) 
```

与布尔掩码相比，使用花式索引时，SparseRowIndexer 似乎更快。

# .net - 组件架构和 DI 容器的使用？

> ID：13843354
> 
> 赞同：2
> 
> 时间：2012-12-12T15:43:59.670
> 
> 标签：.net, oop, architecture, dependency-injection, unity-container

我有一个 FTP 实用程序负责常见的 FTP 内容：放置文件、获取文件等。作为我们基础架构的一部分，我们需要组件从实现 IConfiguration 接口的组件中检索它们的配置，并将它们的条目记录到实现ILogger 接口。请注意，ftp 主机是通过一个逻辑主机名（例如 someFtpSite）来描述的，该主机名与配置文件中包含主机名、用户 ID 和密码的部分相匹配。所以我的接口和类定义是这样创建的：

```
public interface IFtpUtility
{
    void PutFile(string sourceFileAndPath, string targetFileAndPath, string logicalHost);
}

public class FtpUtility : IFtpUtility
{
    private readonly IConfiguration _configuration;
    private readonly ILogger _logger;

    public FtpUtility(ILogger logger, IConfiguration configuration)
    {
        _configuration = configuration;
        _logger = logger;
    }
    // IFtpUtility implementation follows
} 
```

我使用此签名的目的是仅在需要执行操作（例如 PutFile）时才需要logicalHost 名称，因此在 PutFile 方法本身上提供它。

这种布局非常适合与 Unity 等 IoC 容器一起使用。我们将有以下代码：

```
UnityContainer = new UnityContainer();
UnityContainer.RegisterType<IConfiguration, ConfigurationProvider>();
UnityContainer.RegisterType<ILogger, LoggingProvider>();
UnityContainer.RegisterType<IFtpUtility, FtpUtility>(); 
```

当后来我需要使用 FtpUtility 时，我会依赖容器来进行适当的解析：

```
IFtpUtility ftpUtility = UnityContainer.Resolve<FtpUtility>(); 
```

现在一位同事向我建议，logicalHost name 应该是构造函数的参数，因为没有它，任何函数都无法执行，并且它或多或少与 FtpUtility 的特定实例相关联。每次调用我们只会与一个 FTP 服务器通信。所以我很高兴地将构造函数更改为包含逻辑主机名，这破坏了我的 IoC 容器解析。看，虽然 IConfiguration 和 ILogger 可以与特定的实现相关联，但logicalHost 是特定于实例的，直到创建实例时我们才知道它。现在我可以争辩说，这样的改变会改变我的 IoC 容器的使用，因此我无法实现它，等等，但这是一个太弱的论点（我发现）。所以这里有问题：

*   从架构的角度来看，将logicalHost放在构造函数上是不是一件好事？
*   logicalHost 名称是否是必需的构造参数，没有它 FtpUtility 无法运行，因此应该是构造函数的一部分？
*   有没有办法用 Unity 解决这个问题？如果构造函数包含逻辑主机的第三个参数，是否存在 Resolve<>() 的重载，这将允许我在解析时提供第三个参数的值，而不是提前将其注册到容器中？
*   我是否试图解决一个没有问题的问题？在这种情况下使用 IoC 容器是不是过度杀伤，而不是帮助，使事情复杂化？毕竟，我仍在使用 IoC 模式——只是它不能用 IoC 容器自动或干净地解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:53:18.800

1,2。从抽象的角度来看，在构造函数中包含主机名是合乎逻辑的，也是一个理想的地方。

3,4。在我个人看来，通过统一解析主机名有点矫枉过正，但完全有可能。一个更简单的选择是实例化这是您的统一配置并从标准 app/web.config 中提取主机名，类似于下面（MVC 实现）；

```
 container.RegisterType<IFtpUtility, FtpUtility>(
      new InjectionConstructor(ConfigurationManager.AppSettings["Hostname"])); 
```

这很好地解耦了事情，并且仍然允许您根据需要配置该设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:53:23.357

您可以使用以下定义来解析，而不是`IFtpUtility`直接解析：`IFtpUtilityFactory`

```
interface IFtpUtilityFactory
{
    IFtpUtility Create(string logicalHost);
} 
```

任何给定的 FTP 实用程序实现都有相应的工厂实现。它实际上是一个具有通用接口的代理构造函数，可以在解析时间之后提供所需的参数。

# visual-studio-2012 - MSTest 中单元测试的自定义消息

> ID：13843356
> 
> 赞同：0
> 
> 时间：2012-12-12T15:44:01.443
> 
> 标签：visual-studio-2012, customization, mstest

有没有办法可以自定义或以其他方式将自定义内容添加到输出窗口？例如，如果我有一个比较两个文本文件并且它们不匹配的测试用例，我是否可以在输出窗口（通常出现错误消息的位置）中放置一个按钮，以在 diff 中打开文件的内容工具？

在我看来，应该有办法做到这一点，但我无法弄清楚......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T04:34:32.840

没有内置机制允许您执行此操作。就像 Schaliasos 提到的那样，自定义插件将是要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-20T11:37:02.883

使用`System.Diagnostics.Trace.WriteLine("My Message");`并`Console.WriteLine("My Message");`为我工作得很好。然后，如果需要，您可以查看测试资源管理器结果窗口的输出。

这是此处介绍的解决方案：[https ://stackoverflow.com/a/4589944/254215](https://stackoverflow.com/a/4589944/254215)

# vb.net - VB.NET 选择案例执行所有案例选项？

> ID：13843357
> 
> 赞同：1
> 
> 时间：2012-12-12T15:44:04.437
> 
> 标签：vb.net

在 Select Case 语句中，是否有一种简单的方法可以告诉它对于 Case Else，我希望它执行所有其他 Case 选项中指定的所有操作？我知道我可以只复制相关代码，但我正在寻找更简单、更清洁的解决方案。

```
SELECT CASE answer
   CASE "1"
    *Do something*

   CASE "2"
    *Do something else*

   Case "3"
    *Do all actions in CASE 1 and in Case 2*
END SELECT 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:50:24.020

```
PRIVATE SUB YourMethod()
   SELECT CASE answer
       CASE "1"
           Method1()

       CASE "2"
           Method2()

       Case "3"
           Method1()
           Method2()
    END SELECT
END SUB

PRIVATE SUB Method1()
   *Do something*
END SUB

PRIVATE SUB Method2()
   *Do something else*
END SUB 
```

# jquery - ActiveScaffold 和 DatePickerBridge：无法转换 Rails 日期格式

> ID：13843360
> 
> 赞同：0
> 
> 时间：2012-12-12T15:44:11.583
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, passenger, activescaffold

我在使用暂存环境的 Rails 应用程序上遇到问题。错误如下：

```
ActiveScaffold: Missing datetime picker localization for your locale: en-US
AS DatePickerBridge: Can t convert rails date format: %a, %d %b %Y %H:%M:%S %z to jquery datepicker format. Options %c, %U, %W, %w, %x %X, %z, %Z are not supported by datepicker] 
```

我在暂存环境中使用 Rails 3.0.6、Ruby 1.8.7 (2012-10-12 patchlevel 371) [i686-linux] 和 Phusion Passenger 3.0.18。

我该如何解决这个问题？这是一个jQuery问题吗？

干杯，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:45:09.930

您必须在 Gemfile 上添加 kaminari，然后在终端上执行此步骤 - `rails plugin install git://github.com/rails/verification.git` - `bundle install` -`bundle update`

然后`rails s`问题就解决了

# client-server - Dart 中的客户端服务器

> ID：13843362
> 
> 赞同：5
> 
> 时间：2012-12-12T15:44:14.333
> 
> 标签：client-server, dart

我在 Dart 的客户端/服务器上找到了一些不错的教程。客户端只是通过指定端口上的 localhost 向服务器发出请求，服务器只是用一个字符串响应。

但是，我没有找到有关如何提供图像的任何帮助。我希望能够让服务器将图像服务器发送给客户端。例如，如果客户端发出类似：localhost:1313/Images 的请求，那么服务器应该响应一个显示“images”文件夹中所有图像的页面。

这是我到目前为止的代码：

```
import 'dart:io';

class Server {

_send404(HttpResponse res){
  res.statusCode = HttpStatus.NOT_FOUND;
  res.outputStream.close();
}

void startServer(String mainPath){
HttpServer server = new HttpServer();
server.listen('localhost', 1111);
print("Server listening on localhost, port 1111");

server.defaultRequestHandler = (var req, var res) {
  final String path = req.path == '/' ? '/index.html' : req.path;
  final File file = new File('${mainPath}${path}');

  file.exists().then((bool found) {
    if(found) {
      file.fullPath().then((String fullPath) {
        if(!fullPath.startsWith(mainPath)) {              
          _send404(res);
        } else {
          file.openInputStream().pipe(res.outputStream);
        }
      });
    } else {
        _send404(res);
    }
  });
};

void main(){
Server server = new Server();
File f = new File(new Options().script);
f.directory().then((Directory directory) {
 server.startServer(directory.path);
});
} 
```

我还没有实现客户端，但是有必要实现客户端吗？浏览器还不够客户端吗？

另外，我需要做什么才能使服务器提供图像？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T01:56:41.977

我已经粘贴了您的代码（并稍微编辑了它，我认为有几个错别字），它确实提供了 chrome 中的图像 - 目前，您必须传递图像的完整 url，例如：`http://localhost:1111/images/foo.png`

要获得一个充满图像的页面，您需要编写一个 html 页面，例如：

```
<html><body>
   <img src="http://localhost:1111/images/foo.png"/>
   <img src="http://localhost:1111/images/bar.png"/>
</body></html> 
```

并且没有理由不能在服务器上动态创建该 html，例如，响应对文件的请求，`images.html`例如。看一下在[`DirectoryLister`](http://api.dartlang.org/docs/bleeding_edge/dart_io/DirectoryLister.html)服务器端迭代文件和文件夹的类。

此外，JJ 的评论也是正确的 - 您还应该添加正确的标题（尽管 chrome 似乎非常擅长解释没有正确标题的内容）。

作为参考，这是对我来说很好的服务器端代码（只是为了测试它...... - 删除了 404 和选项 - 它从当前（即应用程序自己的）文件夹中提供服务）。

```
import 'dart:io';

void startServer(String mainPath){
  HttpServer server = new HttpServer();
  server.listen('127.0.0.1', 1111);
  print("Server listening on localhost, port 1111");

  server.defaultRequestHandler = (var req, var res) {
    final String path = req.path == '/' ? '/index.html' : req.path;
    final File file = new File('${mainPath}${path}');

    file.exists().then((bool found) {
      if(found) {
        file.fullPath().then((String fullPath) {
          file.openInputStream().pipe(res.outputStream);
        });
      }
    });      
  };
}

main(){
   startServer(".");  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T23:31:49.853

To properly serve images, you're going to need to set a Content-Type header. Other than that, the code you have is going in the right direction because it can already serve files. On the other hand, it might be easier to use Apache or Nginx and then setup a reverse proxy to the Dart server. That way Apache or Nginx can serve static files for you. Sorry, we don't yet have all of this documented yet. I also wonder if using Heroku might be a good fit for you.

# google-app-engine - Google App Engine（GAE）上的实时通知系统

> ID：13843363
> 
> 赞同：1
> 
> 时间：2012-12-12T15:44:15.360
> 
> 标签：google-app-engine, channel-api

如何在 Google App Engine(GAE) 上实现类似 Facebook 的实时通知系统？基本上，我的网站包含有关各种主题的文章。用户可以对它们发表评论。所以现在我需要通知所有评论文章的在线用户关于新添加的评论的通知。

更新：

通道 API 配额每天仅允许应用程序使用 100 个通道，并且在未启用计费的情况下使用时也仅允许 6 个通道/分钟速率限制。我对这些限制感到震惊。此外，当启用计费时，只能创建 60 个频道/分钟。我认为不可能在这些限制下实现。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:48:53.390

频道 api 是你的朋友。
[https://developers.google.com/appengine/docs/python/channel/overview](https://developers.google.com/appengine/docs/python/channel/overview)

编辑：如果配额限制不符合您的需要，请使用[http://pusher.com](http://pusher.com)
等外部消息服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:52:28.723

您需要使用 Channel API： [https ://developers.google.com/appengine/docs/java/channel/overview?hl=en](https://developers.google.com/appengine/docs/java/channel/overview?hl=en)

如果您使用 GWT，那将非常容易！ [http://code.google.com/p/gwt-gae-channel/wiki/HowToUse](http://code.google.com/p/gwt-gae-channel/wiki/HowToUse)

# c++ - 在 FOR 循环外定义的变量范围？

> ID：13843369
> 
> 赞同：3
> 
> 时间：2012-12-12T15:44:38.730
> 
> 标签：c++, c++11

下面的代码用于将字符串中的连续重复字符替换为仅出现一次

```
e.g. "AAAABBBB" -> "AB" 
```

当我退出 for 循环并在 temp 中打印值时，我的期望是获取字符串单词的最后一个字母。但是，我得到了字符串的第一个字母（即，使用我初始化 temp 的值）。

```
string processString(string word) {
  char temp = word[0];
  string result = "";
  int size = word.size();
  for(int i=0, temp=word[0]; i<size; i++) {
    if(word[i] == temp) {
      continue;
    } else {
      result += temp;
      temp = word[i];
    }
  }
  cout << "TEMP : " << temp << endl;
  return result + temp;
} 
```

结果：

```
WORD: CJXEJACCAJEXJF
TEMP: C
Output of function: CJXEJACAJEXJC 
```

但是，如果我删除 for 循环中的重新初始化，上面的代码工作得很好：

```
string processString(string word) {
  char temp = word[0];
  string result = "";
  int size = word.size();
  for(int i=0; i<size; i++) {
    if(word[i] == temp) {
      continue;
    } else {
      result += temp;
      temp = word[i];
    }
  }
  cout << "TEMP : " << temp << endl;
  return result + temp;
} 
```

结果：

```
WORD: CJXEJACCAJEXJF
TEMP: F
Output of function: CJXEJACAJEXJF 
```

任何线索为什么会这样？为什么在 FOR 循环中重新初始化它会产生如此大的差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:47:51.493

在`for`循环中，您没有重新初始化`temp`. 您正在创建一个名为阴影外部的全新`int`变量：`temp``temp`

```
for(int i=0,temp=word[0];i<size;i++){
            ^^^^ brand new `temp' 
```

一些编译器可以配置为对此发出警告：

```
$ g++ -Wshadow test.cpp
test.cpp: In function 'std::string processString(std::string)':
test.cpp:10:15: warning: declaration of 'temp' shadows a previous local [-Wshadow]
test.cpp:7:8: warning: shadowed declaration is here [-Wshadow] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T16:02:43.107

关于阴影的其他答案是正确的，但仅供参考，您的函数可以简单地写成：

```
#include <string>
#include <iterator>
#include <algorithm>

std::string unique(std::string const &source)
{
    std::string result;

    std::unique_copy(src.begin(), src.end(),
                     std::back_inserter(result));
    return result;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T15:47:43.647

```
for(int i=0,temp=word[0];i<size;i++) 
```

这声明了两个变量，`i`和`temp`，范围*在*`for`语句内。这`temp`隐藏了声明之外的`for`声明。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T15:47:44.677

一个名为的新变量在循环`temp`中声明为 an ：`int``for`

```
for(int i=0,temp=word[0];i<size;i++){ 
```

隐藏外部`char temp`变量，这意味着该`char temp`变量永远不会在`for`. 循环的第二个版本`for`没有`temp`通过省略初始化来声明新变量。

# python - Python - 正则表达式，如何提取这个？

> ID：13843370
> 
> 赞同：1
> 
> 时间：2012-12-12T15:44:43.630
> 
> 标签：python

我有这种字符串

```
str = "(\\pt 3 \\out I1, I2 \\img img.jpg)" 
```

我想提取 3 、 I2、 I2 和 img.jpg 作为单独的值（I1 和 I2 作为一个值）

我是这样开始的

```
pattern = "\\pt (.)"
re.findall(pattern, str) 
```

我得到第一个值 3，但不知道如何提取另外两个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:52:16.550

尝试以下正则表达式

```
>>> re.findall(r"\\\w+ ([^\\)]+)", str)
['3 ', 'I1, I2 ', 'img.jpg'] 
```

您缺少的部分是，您需要了解

*   获取`[^\\\)]+`除 a`\`和之外的所有内容`)`
*   如何开始`\\\w+`两个斜杠，后跟任何单词，后跟空格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:52:32.587

你可以使用这个正则表达式： -

```
>>> pattern = '\\\w+ ([^\\)]+)'
>>> re.findall(pattern, s)
['3 ', 'I1, I2 ', 'img.jpg'] 
```

# sql - sql.limit 相关表的数量

> ID：13843372
> 
> 赞同：1
> 
> 时间：2012-12-12T15:44:54.957
> 
> 标签：sql

我需要选择一个有一个连接表的表

例如有表：

```
Role,AccountRole,Account
AccountRole - many to many relationship 
```

需要选择角色，有一个账号

```
Role table
id  name 
1   admin 
2   user 
3   external 

Account table
id  name 
1   homer 
2   jessica 
3   simpson 

AccountRole table
account_id role_id 
1          1 
1          2 
2          2 
3          3 
```

询问：

```
SELECT  role.id    
FROM    Role role
        INNER JOIN AccountRole accRole
            ON accRole.role_id = role.id

        INNER JOIN Account acc
            ON accRole.account_id = acc.id

GROUP BY role.id
HAVING COUNT(*) = 1 
```

在查询结果中：

```
role.id 
2 
3 
```

但我需要 role.id which role.name = "external"(在这种情况下 role.id = 3，但不是 2)

这该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:47:20.037

```
SELECT  a.ID    -- change this to the original name of your Role Column
FROM    Role a
        INNER JOIN AccountRole b
            ON a.RoleID = b.RoleID -- an assumption that their linking
                                   -- column name is RoleID
        INNER JOIN Account c
            ON b.AccountID = c.AccountID -- an assumption that their linking
                                         -- column name is AccountID
GROUP BY a.ID
HAVING COUNT(*) = 1 
```

# sql - 使用查询从 TABLE 历史中重建 TABLE 访问者？

> ID：13843376
> 
> 赞同：0
> 
> 时间：2012-12-12T15:45:03.660
> 
> 标签：sql, postgresql, select, datatable

在我的数据库 postgresql 版本上发生了一场小灾难。8.4\. 请帮帮我！

我必须在两个表格中关注我的网页上的访问者，例如：

表**历史**

```
whereseenlast varchar(50)
uniqid varchar(13) 主键
whenseenlast 时间戳
bla1 varchar(10)
bla2 varchar(10)
bla3 varchar(10)

```

**示例**：

```
where1.html, **1**, 2000-01-01 00:00:00, somebla1, somebla2, somebla3
where2.html, **1**, 2005-05-05 05:06:07, somebla1, somebla2, somebla3
...
where12345.html, **1**, 2012-11-22 11:22:33, somebla1, somebla2, somebla3

```

TABLE**访问者**（uniqid 为主键，每个访问者在该表中只能找到一次）

```
wherseenfirst varchar(50)
whereseenlast varchar(50)
whenseenfirst 时间戳
whenseenlast 时间戳
uniqid varchar(13) 主键
注释 varchar (20)
xyz varchar(20)

```

**示例**：

```
where1.html, where12345.html, 2000-01-01 00:00:00, 2012-11-22 11:22:33, 1, somenote, somexyz 

```

我不小心删除了 TABLE 访问者并且我没有备份。但是，我相信专家很容易通过查询从 TABLE 历史中重建 TABLE 访问者。

（我知道我将无法从 TABLE**历史记录中恢复****注释**和**xyz**列，但这没什么大不了的）

 **你能建议解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:35:46.013

这是你的数据库课的家庭作业吗？

您首先必须为每个访问者从历史记录中选择最新和最早的行：

```
select uniqid, max(whenseenlast) from history group by uniqid 
```

和

```
select uniqid, min(whenseenlast) from history group by uniqid 
```

然后为您的历史记录表选择与它们匹配的记录，如下所示：

```
select frst.uniqid, whenseenfirst, whereseenfirst, whenseenlast, whereseenlast
from
(select h.uniqid, mn.mnseen as whenseenfirst, h.whereseenlast as whereseenfirst
    from history h
    join (select uniqid, min(whenseenlast) as mnseen from history group by uniqid) mn
    on mn.mnseen = h.whenseenlast and mn.uniqid = h.uniqid) frst,
(select h.uniqid, mx.mxseen as whenseenlast, h.whereseenlast as whereseenlast
    from history h
    join (select uniqid, max(whenseenlast) as mxseen from history group by uniqid) mx
    on mx.mxseen = h.whenseenlast and mx.uniqid = h.uniqid) lst
where frst.uniqid = lst.uniqid 
```

您可以在[SQLFiddle上验证它](http://sqlfiddle.com/#!2/3ea2cd/12)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:37:51.777

尝试：

```
SELECT DISTINCT ON (uniqid) *
FROM history
ORDER BY uniqid, whenseenlast DESC 
```

它将为您提供每个用户（每个`DISTINCT uniqid`）的最后历史记录。

```
SELECT DISTINCT ON (uniqid) *
FROM history
ORDER BY uniqid, whenseenlast 
```

获得第一个历史记录。

```
INSERT INTO visitors (uniqid, whereseenlast, whenseenlast, whenseenfirst, whenseenlast ...)
SELECT seen_last.uniqid, seen_last.whereseenlast, seen_last.whenseenlast, seen_first.whereseenlast, seen_first.whenseenlast ...
FROM 
     (SELECT DISTINCT ON (uniqid) *
      FROM history
      ORDER BY uniqid, whenseenlast DESC) seen_last
JOIN
     (SELECT DISTINCT ON (uniqid) *
      FROM history
      ORDER BY uniqid, whenseenlast) seen_first
  ON seen_last.uniqid = seen_first.uniqid 
```

它将重建您的表。

详细信息：[DISTINCT ON](http://www.postgresql.org/docs/current/static/sql-select.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T17:11:31.807

选择 h1.uniqid, h1.whereseenlast 作为 whereseenfirst, h1.whenseenlast 作为 whenseefirst, h3.whereseenlast, h3.whenseenlast 从历史 h1 离开加入历史 h2 在 h1.uniqid = h2.uniqid 和 h1.whenseenlast < h2.whenseenlast

在 h1.uniqid = h3.uniqid 上加入历史 h3 在 h3.uniqid = h4.uniqid 和 h3.whenseenlast > h4.whenseenlast 上留下加入历史 h4

其中 h2.uniqid 为空，h4.uniqid 为空**

# php - 在 PHP 日历中列出事件（可能跨越多天）

> ID：13843377
> 
> 赞同：0
> 
> 时间：2012-12-12T15:45:04.130
> 
> 标签：php, calendar, recordset

我有这个美丽而多才多艺的日历脚本

```
$giorno = isset($_GET['g']) ? $_GET['g'] : date('Y-m-d');
$day = strtotime($giorno);
$today = date('Y-m-d', strtotime('today'));
$date = mktime(0, 0, 0, date("m", $day), 1, date("Y", $day));
$past = mktime(0, 0, 0, date("m", $date)-1, 1, date("Y", $date));
$future = mktime(0, 0, 0, date("m", $date)+1, 1, date("Y", $date));

$days = array("Domenica", "Lunedi", "Martedi", "Mercoledi", "Giovedi", "Venerdi", "Sabato");
$months = array("Gennaio", "Febbraio", "Marzo", "Aprile", "Maggio", "Giugno", "Luglio", "Agosto", "Settembre", "Ottobre", "Novembre", "Dicembre");

$month = date("m", $date);
$year = date("Y", $date);

$day_offset = 1; //$day_offset % 7;
$start_day = mktime(0, 0, 0, $month, 1, $year); 
$start_day_number = date("w", $start_day);
$days_in_month = date("t", $start_day);

<table id="calendar">
<caption>
    <div class="left"><a href="<?php echo $phpSelf; ?>?g=<?php echo date('d/m/Y', $past); ?>" title="Mese precedente">‹&lt;/a></div>
    <div class="right"><a href="<?php echo $phpSelf; ?>?g=<?php echo date('d/m/Y', $future); ?>" title="Mese successivo">›&lt;/a></div>
    <div class="center"><?php echo $months[$month-1]; ?> <?php echo $year; ?></div>
</caption>
<tr>
<?php for ($x = 0; $x <= 6; $x++) { ?>
    <th scope="col"><?php echo substr(strtolower($days[($x+$day_offset)%7]), 0, 2); ?></th>
<?php } ?>
</tr>
<tr>
<?php
$blank_days = $start_day_number - $day_offset;
if ($blank_days < 0) { $blank_days = 7 - abs($blank_days); }
for ($x = 0; $x < $blank_days; $x++) {
?>
    <td>&nbsp;</td>
<?php } ?>
<?php for($x = 1; $x <= $days_in_month; $x++) { ?>
    <?php   if (($x + $blank_days-1) % 7 == 0){ ?>
    </tr>
    <tr>
    <?php } ?>
    <?php $day = $year . "-" . $month . "-" . leading($x); ?>
    <td><?php echo $x; ?></td>
<?php } ?>  
<?php while ((($days_in_month + $blank_days) % 7) != 0) { ?>
    <td>&nbsp;</td>
<?php   $days_in_month++;
}
?>
</tr> 
```

它只是简单地循环，给定一天，通过整个月并绘制一个表日历：到目前为止一切顺利
现在棘手的部分：我有一个这样的事件记录集：

```
mysql_select_db($database_connArtesicilia, $connArtesicilia);
$query_rsEvents = "SELECT eventi.eve_id, eventi.eve_name, eventi.eve_from, eventi.eve_to FROM eventi WHERE eventi.eve_active";
$rsEvents = mysql_query($query_rsEvents, $connArtesicilia) or die(mysql_error());
$row_rsEvents = mysql_fetch_assoc($rsEvents);
$totalRows_rsEvents = mysql_num_rows($rsEvents); 
```

我想突出显示与 `<td class="highlight">`事件相对应的日历单元格（即带有 ），如果事件仅限于一天，那将不会那么困难......但有些事件跨越多个连续的日子（即从 5 日到12 月 8 日），我不知道如何突出显示对应于 5、6、7 和 8 的单元格
请注意数据库字段`eve_from`并且`eve_to`总是填写（如果事件仅在一天内发生，日期相同）更多，有些事件可以重叠（即一个从 12 月 5 日到 8 日，另一个从 12 月 7 日到 9 日）：在理想的世界中，如果存在一个或多个事件，我需要两者都简单地突出显示单元格（对于日历的小版本） , 并列出单元格的事件（对于日历的大版本）
您对如何实现这一目标有一些想法吗？
像往常一样提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:48:34.970

实际上，我过去曾编写过一些处理此问题的日历脚本。您可能首先要做的一件事是查看 Google 日历如何处理此问题。它可以纯粹用一些 js 和 css 来完成，但是你现有的 PHP 代码使它有点难以使用。

我可以向您展示我的旧日历课程以及我如何解决问题以帮助您。

[这是我使用的代码的链接。](http://sheriframadan.com/examples/calendar.php)

这是一个简单的类，它使用 DateTime 对象来创建与您的日历非常相似的日历。您可以看到修改该代码以添加一些事件并突出显示它们是多么容易，只需检查事件日期是否在每次迭代中的给定日历日内。

事实上，在这里，[我花了额外的 2 分钟来自己修改它并展示一个工作示例](http://sheriframadan.com/examples/so-calendar-example/)。

因此，您遇到的根本问题是您如何处理日期。您正在起诉时间戳和格式化日期，这使您的逻辑更难解决。

我强烈建议使用 PHP 的 DateTime 类。它使处理日期变得更加容易和抽象。您可以在该链接中看到工作示例和代码，在该链接中我只是添加了两个事件来演示如何处理重叠。

我们有一个从**2012 年 12 月 12 日到 2012 年**12**月 16 日**的事件集，以*绿色*突出显示，另一个从2012 年 12**月 15 日到 2012 年**12**月 21 日**的事件集以红色突出显示。现在，因为日历很小，我只是在每个单元格中使用具有设置背景颜色的非中断间隔 div。它并不漂亮，但它为您提供了一些帮助您入门的想法。

随意使用任何代码，我希望这会有所帮助。干杯!

> PS：我**强烈**建议您从 ext/mysql mysql_* 函数切换到 PHP 中的 mysql 数据库接口，并考虑迁移到更新的 API，例如 PDO 或 MySQLi，因为 ext/mysql 现在已弃用，将来将被删除PHP 的版本。

# php - 获取 Magento 前端包含的所有 JavaScript 文件的列表？

> ID：13843381
> 
> 赞同：0
> 
> 时间：2012-12-12T15:45:15.983
> 
> 标签：php, javascript, magento

我正在尝试编写一些将 Magento 与 Drupal 连接起来的代码，并且我想要一种将 Magento 的前端 JavaScript 添加到 Drupal 提供的页面的简单方法。

为此：如何将一组 URL 返回到 Magento 在前端使用的 JavaScript 文件？具体来说，我正在寻找默认布局句柄和单个产品页面。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T21:40:30.207

这将使您非常接近：

```
$update = Mage::app()->getLayout()->getUpdate();
$update->load(array('default','catalog_product_view'));
$xml = $update->asSimplexml();
$js = $xml->xpath('//action[@method="addJs"]');
Zend_Debug::dump($js); 
```

xpath 参数*可以*细化`//action[@method="addJs"]/script`为核心代码。

当然，还有其他参数会添加`addItem`需要额外处理的 JS 文件（例如 ）。

# json.net - 指定没有注释的 Json.net 元数据的替代方法？

> ID：13843388
> 
> 赞同：1
> 
> 时间：2012-12-12T15:45:19.853
> 
> 标签：json.net

在 Json.NET 中，如何在不受我控制的类（例如实体框架类）上指定元数据，例如要序列化哪些属性？

我可以发誓我已经读过一种方法，但我在文档中再也找不到它了。

如果我只是失明，请提前道歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-07T16:56:44.553

迟到的答复，但迟到总比没有好。

您可以使用 AutoMapper、ValueInjector 等将不受您控制的类映射到您创建/控制的类。然后您可以自由应用任何必要的属性。

[**编辑：使用IContractResolver**](http://james.newtonking.com/json/help/index.html?topic=html/T_Newtonsoft_Json_Serialization_IContractResolver.htm)的 JSON.NET 文档中的解决方案[](http://james.newtonking.com/json/help/index.html?topic=html/T_Newtonsoft_Json_Serialization_IContractResolver.htm)

 **```
public class DynamicContractResolver : DefaultContractResolver
{
  private readonly char _startingWithChar;
  public DynamicContractResolver(char startingWithChar)
  {
    _startingWithChar = startingWithChar;
  }

  protected override IList<JsonProperty> CreateProperties(Type type, MemberSerialization memberSerialization)
  {
    IList<JsonProperty> properties = base.CreateProperties(type, memberSerialization);

    // only serializer properties that start with the specified character
    properties =
      properties.Where(p => p.PropertyName.StartsWith(_startingWithChar.ToString())).ToList();

    return properties;
  }
}

public class Book
{
  public string BookName { get; set; }
  public decimal BookPrice { get; set; }
  public string AuthorName { get; set; }
  public int AuthorAge { get; set; }
  public string AuthorCountry { get; set; }
} 
```

**IContractResolver 示例**

```
 Book book = new Book
{
  BookName = "The Gathering Storm",
  BookPrice = 16.19m,
  AuthorName = "Brandon Sanderson",
  AuthorAge = 34,
  AuthorCountry = "United States of America"
};

string startingWithA = JsonConvert.SerializeObject(book, Formatting.Indented,
  new JsonSerializerSettings { ContractResolver = new DynamicContractResolver('A') });

// {
//   "AuthorName": "Brandon Sanderson",
//   "AuthorAge": 34,
//   "AuthorCountry": "United States of America"
// }

string startingWithB = JsonConvert.SerializeObject(book, Formatting.Indented,
  new JsonSerializerSettings { ContractResolver = new DynamicContractResolver('B') });

// {
//   "BookName": "The Gathering Storm",
//   "BookPrice": 16.19
// } 
```**

# android - android: PreferenceActivity 主题

> ID：13843400
> 
> 赞同：2
> 
> 时间：2012-12-12T15:46:10.453
> 
> 标签：android, android-preferences, android-theme

我正在为旧版本的 Android 开发并使用`PreferenceActivity`（我知道`PreferenceFragment`这是正确的方法）。

我`PreferenceActivity`正在采用我的应用程序的主题，但我希望它采用常规设置主题。我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T15:58:38.850

所以你想使用android的默认值吗？

所以使用类似的东西：

```
@Override
public void onCreate(final Bundle savedInstanceState) {
    // API < 10
    setTheme(android.R.style.Theme);
    // API > 11
    setTheme(android.R.style.Theme_Holo);
    // API > 14
    setTheme(android.R.style.Theme_DeviceDefault);

    super.onCreate(savedInstanceState);
} 
```

（或在`AndroidManifest.xml`文件中执行相同操作）。

# c# - 在回发动态添加的控件被替换

> ID：13843402
> 
> 赞同：0
> 
> 时间：2012-12-12T15:46:11.073
> 
> 标签：c#, asp.net

好的，所以我的 ASP 页面上有一个表格，如下所示：

```
<asp:Table ID="attachedFiles" runat="server" BorderColor="LightGray" BorderWidth="1" ViewStateMode="Enabled"> 
    <asp:TableRow ID = "attachedFilesRow" runat="server">
        <asp:TableCell ID="exampleCell" runat="server" Visible="false" >
            <asp:Label runat="server" Text="" />
            <asp:ImageButton runat="server" ImageAlign="Middle" ImageUrl="~/images/kill.png" OnClick="removeAttachment" />
        </asp:TableCell>
    </asp:TableRow>
</asp:Table> 
```

我在此处创建的示例单元格不可见，因为我仅将其用作将在后面的代码中添加的其他单元格的模板：

```
TableCell cell = new TableCell();
TableRow row = new TableRow(); 

cell = exampleCell;
row = attachedFilesRow;

((Label)cell.Controls[0]).Text = fileName;
cell.Visible = true;
row.Cells.Add(cell);
attachedFilesRow = row;
attachedFilesRow.DataBind(); 
```

后面代码中的代码在 ASP 页面上的按钮的 onClick 方法中。这个想法是，如果用户想要添加附件，他们单击“添加附件”，然后将一个单元格添加到已经存在的表格中。该单元格应该看起来像这样 [filenName.txt X]，其中 X 是一个 ImageButton，以便用户可以单击它并删除附件。

我的问题是每次用户添加附件时，以前的 TableCell 都会被新的 TableCell 替换，而不是添加到 TableRow 中。我想这可能是因为我正在创建一个 TableCell 然后将它设置为等于一个已经存在的表格单元格实例所以我尝试了这个：

ASP：

```
<asp:Table ID="attachedFiles" runat="server" BorderColor="LightGray" BorderWidth="1" ViewStateMode="Enabled"> 
    <asp:TableRow ID = "attachedFilesRow" runat="server">
    </asp:TableRow>
</asp:Table> 
```

代码背后：

```
TableCell cell = new TableCell();

ImageButton button = new ImageButton();
button.ImageUrl = "~/images/kill.png";
button.Attributes.Add("onclick", "removeAttachment");

Label label = new Label();
label.Text = fileName;

cell.Controls.Add(button);
cell.Controls.Add(label);

attachedFilesRow.Cells.Add(cell); 
```

我也尝试了两种方法来添加 attachFilesRow.DataBind(); 到最后，并尝试了这两种方法来实例化新的行和单元格对象，而不是直接使用 ASP 页面中的现有对象。这些东西似乎都没有起到太大的作用。

**tl; dr**每次我在 buttonClick 上将 TableCell 添加到现有表格时，它都会替换我表格中的另一个单元格，而不是添加到其中。

编辑：

我不一定要添加新行...这就是我想要的：

用户添加一个附件后：[fileName.txt X]

后两个：[fileName.txt X] [fileName2.txt X]

三后：[fileName.txt X][fileName2.txt X][fileName3.txt X]

它基本上是一个行表，如果有意义的话，可以添加列或单元格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:53:56.427

您不是“**替换**”前一个单元格。在每次回发时，[ASP.NET 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)启动，您将获得一个新的页面实例。这是因为 Web 是无状态的，尽管 ASP.NET 给人的印象是状态，但实际上并不存在。

所以，发生的事情是你每次都是从头开始，你总是在你的行中创建一个单元格。您需要做的是保留您添加的所有项目的列表，然后每次都呈现它们（通过数据绑定或代码）。

此示例应该**完全**符合您的要求：

```
namespace WebApplication1
{
    using System;
    using System.Collections.Generic;
    using System.Web.UI.WebControls;

    public partial class _Default : System.Web.UI.Page
    {
        private const string UploadViewState = "UploadViewState";

        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                // initialise list and store in ViewState
                ViewState[UploadViewState] = new List<string>();
            }
        }

        protected void btnAdd_Click(object sender, EventArgs e)
        {
            // Get the list from ViewState and add the new item
            var _filesToUpload = (List<string>)ViewState[UploadViewState];
            _filesToUpload.Add(text1.Text);

            // Now recreate the row adding cells for each file...
            foreach (string item in _filesToUpload)
            {
                TableCell cell = new TableCell();
                ImageButton button = new ImageButton();
                button.ImageUrl = "~/images/kill.png";
                button.Attributes.Add("onclick", "removeAttachment");
                Label label = new Label();
                label.Text = item;
                cell.Controls.Add(button);
                cell.Controls.Add(label);
                attachedFilesRow.Cells.Add(cell);
            }
        }
    }
} 
```

除了我的代码示例之外，您还可以在文件上使用**数据绑定**`List<...>`，但我只是按照您的代码进行操作。秘诀是使用一个`List<...>`项目并将其存储在 ViewState 中，从那时起，其他一切都应该很简单。

# c# - 锁定文件以防止多个用户访问它的最佳方法是什么

> ID：13843412
> 
> 赞同：3
> 
> 时间：2012-12-12T15:46:28.467
> 
> 标签：c#, xml, lockfile

我有一个 Windows 窗体应用程序，用户可以在其中打开、创建和保存 xml 文件。文件通常保存到网络文件夹。我需要确保给定文件一次只能由一个用户打开。xml 文件被加载到树控件中，并在会话期间经常保存。（几乎任何时候点击树节点）我打开文件是这样的：

```
FileStream fs = new FileStream(m_Filename, FileMode.Open);
XmlReader reader = new XmlTextReader(fs);
XmlSerializer deserializer = new XmlSerializer(typeof(BaseBoardTest));
m_TestNodes = (BaseBoardTest)deserializer.Deserialize(reader);
fs.Close(); 
```

像这样保存：

```
TextWriter writer = new StreamWriter(filename);
XmlSerializer serializer = new XmlSerializer(typeof(BaseBoardTest));
serializer.Serialize(writer, m_TestNodes);
writer.Close(); 
```

如果另一个用户尝试打开它或通过另存为覆盖它，我想显示一条消息，说明哪个用户/计算机名称打开了文件。我正在考虑在打开文件时创建一个锁定文件。有没有更好的方法来处理这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:53:05.760

如果您想显示其他信息，锁定文件将是唯一的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:00:19.880

如果您想阻止用户在其他用户打开文件时打开文件，则需要`FileShare.None`枚举。

你应该更换

```
new FileStream(m_Filename, FileMode.Open); 
```

和

```
new FileStream(m_Filename, FileMode.Open, FileAccess.ReadWrite, FileShare.None) 
```

有关 FileShare.None 的更多信息，请访问：http: [//msdn.microsoft.com/en-us/library/system.io.fileshare.aspx](http://msdn.microsoft.com/en-us/library/system.io.fileshare.aspx)

**注意：**请务必捕获尝试打开文件时引发的任何异常。如果一个用户打开了文件，那么任何后续打开文件的请求都会引发 a `System.IO.IOException`，直到文件被关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:53:20.313

你可以通过只锁定写访问来处理这个问题，从而允许其他人仍然读取文件：

```
using (FileStream fs = new FileStream(m_Filename, FileMode.Open, FileAccess.ReadWrite, FileShare.Read))
{
   XmlReader reader = new XmlTextReader(fs);
   XmlSerializer deserializer = new XmlSerializer(typeof(BaseBoardTest));
   m_TestNodes = (BaseBoardTest)deserializer.Deserialize(reader);
   fs.Close();

   TextWriter writer = new StreamWriter(filename);
   XmlSerializer serializer = new XmlSerializer(typeof(BaseBoardTest));
   serializer.Serialize(writer, m_TestNodes);
   writer.Close();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T15:57:47.380

这是来自同步记录器功能的片段。在写入完成并且是线程安全的之前，它是不可访问的。

```
internal class WriteToLockedFile
    {
        internal static string Uri { get; set ; }
        private static readonly object _syncObject = new object();

        public static void WriteToFile(string logMessage)
        {
            using (var stream = TextWriter.Synchronized( File.AppendText(Uri)))
            {
                lock (_syncObject) 
                {
                    stream.WriteLine(" {0}", logMessage); stream.Flush(); 
                }
            }
        }
    } 
```

# c++ - malloc 分配给指针

> ID：13843415
> 
> 赞同：-1
> 
> 时间：2012-12-12T15:46:41.733
> 
> 标签：c++, c, pointers, malloc

我对C有这个问题。

我有以下声明。

```
int *a;
a=malloc(100); 
```

我收到以下错误：

> 错误：从 'void*' 到 'int*' 的无效转换 [-fpermissive]

对此有任何提示吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T15:50:56.880

您正在将代码编译为 C++，其中您使用的代码无效。但是，对于 C，它是有效的，您[不应添加任何 cast](https://stackoverflow.com/a/605858/28169)。

但是请注意，to 的参数`malloc()`在`char`s 中，因此“100”有点随机。如果您想要 100 个整数，请执行以下操作：

```
a = malloc(100 * sizeof *a); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:05:16.343

当在 C++ 中编写 C 兼容代码时，`malloc`由于一些纯 C 库会用到它，所以你必须使用`free`它，我建议编写一个快速类型化的 malloc：

```
template<typename T>
T* typed_malloc( size_t count = 1 ) {
  return reinterpret_cast<T*>( malloc(sizeof(T)*count) );
} 
```

然后你像这样使用它：

```
int *a;
a=typed_malloc<int>(100); 
```

它创建了一个大小为 100`int`秒的缓冲区。

添加一些额外的东西，比如防止以这种方式使用非平凡的析构函数创建类（因为你期望它们是`free`d 而不被破坏），也可能被推荐。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-12-12T15:47:59.023

`malloc`正在返回一个 void* 指针。

你应该做 ：

```
a=(int*)malloc(100); 
```

顺便说一句：此语句分配 100Bytes 而不是 100 个整数。LE：如果你用 gcc 编译，这不是必须的。如果你使用 g++ 编译，这是必须的。

# php - Uploadify 只上传小文件

> ID：13843420
> 
> 赞同：3
> 
> 时间：2012-12-12T15:47:00.377
> 
> 标签：php, javascript, jquery, file-upload, uploadify

我已将在 Plesk/apache 上运行的 uploadify 设置为 FastCGI 上传到文档根目录下方的上传文件。这似乎适用于小于 1MB 的文件，但会在任何更大的文件上创建 ERROR 500。

```
$(function() {

var idx=$('.useri').val();
$('#file_upload2').uploadify({
    'multi'    : false,
    'swf'      : 'images/uploadify.swf',
    'uploader' : 'admin_includes/uploadify.php',
    'formData'  : {'user_id': idx},
    'fileSizeLimit' : '10MB',
    // Put your options here
    // Some options
    'onUploadSuccess' : function(file, data, response) {
        if(data==2)
        {
            alert("File Extension needs to be either .docx, .doc or .pdf");
        }
        else
        {
            var data_split=data.split("|");
            $('.title_holder').fadeIn(200);
            $('.upload_hider').show();
            $('.added_file').html("");
            $('.message12').html('<p class="added_file" data-file2='+data_split[1]+'>'+data_split[0]+' Successfully Uploaded.</p>');

        }
    }
});
}); 
```

我还设置了 php.ini 如下

```
safe_mode = Off
upload_tmp_dir /tmp
upload_max_filesize = 40M
post_max_size = 40M 
```

这似乎也不起作用。有什么我遗漏或似乎做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:54:53.767

尝试将`sizeLimit`选项设置为

```
'sizeLimit': 5000000000 
```

此外，作为建议，您可以尝试在您的 uploadify 调用中订阅 onError 处理程序。像这样，在`onUploadSuccess`处理程序之后......

```
onError: function(a, b, c, d) {
    if (d.status == 404) alert('Could not find upload script.');
    else if (d.type === "HTTP") alert('error ' + d.type + ": " + d.status);
    else if (d.type === "File Size") alert(c.name + ' ' + d.type + ": " + d.status);
    else alert('error ' + d.type + ": " + d.text);
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T10:00:01.123

感谢您的帮助，但我似乎已经解决了这个问题。我在这个帖子中没有说的是我的服务器安装了 Plesk 10.3.1。这个版本的 Plesk 似乎将服务器配置中的 maxRequestLen 覆盖为 128Kb 之类的大小。

解决方案是将其重置为 1GB（正常默认大小）或 /usr/local/psa/admin/conf/templates/default/domain/domainVirtualHost.php 或 /etc/httpd/conf.d/fcgid 中所需的大小。 conf 并重新启动服务器。

据我所知，未来版本的 Plesk 没有这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T10:04:29.410

您可能会收到与 PHP 配置相关的错误。此外`upload_max_filesize`和`post_max_size`，您应该具有以下值：

```
max_execution_time
max_input_time 
```

两者都定义了脚本的最长生命周期和脚本在接受输入时应该花费的时间。

# dependency-injection - 包装已解析的实例 - Unity 依赖注入

> ID：13843421
> 
> 赞同：0
> 
> 时间：2012-12-12T15:47:01.657
> 
> 标签：dependency-injection, unity-container

如果我有以下代码

```
[Serializable]
public abstract class ValidatedCommandArgs
{
}

public interface IValidatedCommand<T>
    where T : ValidatedCommandArgs
{
    IEnumerable<ValidationError> Execute(T args);
} 
```

现在一个简单的实现

```
public class CreateClientArgs : ValidatedCommandArgs
{
    public string Code { get; set; }
    public string Name { get; set; }
}

public class CreateClientCommand : IValidatedCommand<CreateClientArgs>
{
    public IEnumerable<ValidationError> Execute(CreateClientArgs args)
    {
        throw new NotImplementedException();
    }
} 
```

然后注册命令处理程序

```
container.RegisterType<IValidatedCommand<CreateClientArgs>>, CreateClientCommand>(); 
```

现在我想要做的是包装 IValidatedCommand 的每个分辨率，以便我基本上可以做到这一点

```
public class LoggedCommandHandler<T> : IValidatedCommand<T>
    where T : ValidatedCommandArgs
{
    readonly IValidatedCommand<T> Inner;

    public LoggedCommandHandler(IValidatedCommand<T> inner)
    {
        this.Inner = inner;
    }

    IEnumerable<ValidationError> IValidatedCommand<T>.Execute(T args)
    {
        //Serialize ARGS
        //Save Inner.GetType().ClassName + the serialized args to the DB
        return Inner.Execute(args);
    }
} 
```

然后每当我解决（例如）`IValidatedCommand<CreateClientArgs>`我实际上会得到一个实例`LoggedCommandHandler<CreateClientArgs>``inner = CreateClientCommand`

抱歉这么冗长，但我不记得该技术叫什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:47:30.133

您正在寻找的是所谓的[装饰者模式](http://en.wikipedia.org/wiki/Decorator_pattern)。

[Unity](http://www.beefycode.com/post/Decorator-Unity-Container-Extension.aspx)有一个扩展可以帮助您使用它。

* * *

**更新**

[这个解决方案](http://mrpmorris.blogspot.co.uk/2012/12/decorating-unity-extension.html)比 Jim Christopher 的解决方案更明确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:58:59.403

我建议您查看 Unity 的策略注入/拦截方面。这允许您以非常轻量级和解耦的方式进行装饰。这将是最简单的方法。

本质上，您将拥有一个调用处理程序，该处理程序在调用 Execute 方法时执行，该方法将日志记录到数据库，然后调用“真实”类。

看一下 ICallHandler 接口、HandlerAttribute 和 Interception 扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T23:24:30.223

这是我采用的解决方案。它需要一些调试，但似乎可以很好地满足我当前的需求。

[http://mrpmorris.blogspot.co.uk/2012/12/decorating-unity-extension.html](http://mrpmorris.blogspot.co.uk/2012/12/decorating-unity-extension.html)

# java - Spring自动默认定义bean（无组件扫描）

> ID：13843428
> 
> 赞同：1
> 
> 时间：2012-12-12T15:47:21.033
> 
> 标签：java, spring, dependency-injection, guice

为了减少我的 Spring 配置中的样板数量（不使用组件扫描等），我想以“约定优于配置”的类似 Guice 的模式运行 Spring。

在 Guice 中，您不需要显式配置 bean。我可以创建一个如下所示的 bean 结构，Guice 将“做正确的事”：

```
class Foo {
  @Inject
  public Foo(Bar bar) {
  }
}

class Bar {
  @Inject
  public Bar(Blah blah) {
  }
}

class Blah {
  public Blah() {}
} 
```

在 Spring 中，我需要一个相关的`@Configuration`类，该类将充满样板，如下所示：

```
class Config {
  @Bean public void foo() {
    return new Foo();
  }

  // etc.
} 
```

我怀疑这可能通过自定义 BeanFactory 实现，但如果可以通过 Spring 中的其他方式实现，我想避免走这条路。

`@ComponentScan`将是另一种选择，但我希望它可以处理我无法控制且没有适当弹簧`@Component`注释的对象，并且我更喜欢使用手术刀方法而不是组件扫描的霰弹枪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:27:42.253

我认为你已经非常成功了。您可以`<context:component-scan>`为您控制之外的类提供一些基于 xml 的 bean 定义。Guice 方法是`Provider`为这些类绑定 a 。选择你的毒药。最近，我发现自己也试图从这些 DI 框架中挤出更多的魔力，结果却发现有些事情不能自动运行是有充分理由的。如果有别的，那就很危险了。

# html - PhoneGap File API如何处理SD卡/无SD卡场景？

> ID：13843429
> 
> 赞同：1
> 
> 时间：2012-12-12T15:47:25.153
> 
> 标签：html, cordova, blackberry

我在 BlackBerry 应用程序中使用 PhoneGap File API。我有以下代码行：

```
fileSystem.root.getFile("myfile.txt", {create: true, exclusive: false}, gotFileReaderEntry, readfail); 
```

在 BlackBerry 模拟器中，当没有 SD 卡并且访问/创建文件的过程结束时，这行代码不起作用。我什至没有收到失败回调。当我在模拟器上安装 SD 卡时，它工作得很好。

我如何让它在没有 SD 卡的设备上工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:00:05.167

以前没用过PhoneGap，但为什么不把它放在一个简单的try/catch块中呢？

# java - 在 GUI 中使用返回键执行搜索

> ID：13843430
> 
> 赞同：-1
> 
> 时间：2012-12-12T15:47:30.323
> 
> 标签：java, swing, awt

当我使用回车键时，我试图让 jTextField 执行搜索。searchButton 进行搜索，所以我需要在文本字段中按下按键的动作来触发 searchButton 的动作。

这是我刚才的内容，当我在文本字段中按 Enter 时，控制台上会显示“Enter Pressed”。

```
ActionListener actionListener = new ActionListener() {
  public void actionPerformed(ActionEvent actionEvent) {
    SearchButton.getActionForKeyStroke(
      KeyStroke.getKeyStroke(KeyEvent.VK_SPACE, 0, false));
    System.out.println("Enter Pressed");
  }
};

KeyStroke keystroke = KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0, false);
jTextField1.registerKeyboardAction(actionListener, keystroke, JComponent.WHEN_FOCUSED); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:25:11.637

为什么不对文本字段和按钮重复使用相同的 ActionListener 呢？

或者，如果您无权访问按钮的侦听器，则可以这样做：

```
jTextField1.addActionListener(new ActionListener()
{
  public void actionPerformed(ActionEvent actionEvent)
  {
    searchButton.doClick();
  }
} 
```

# ruby - 无法通过捆绑器安装我自己的 gem，但可以使用 ruby gems 安装

> ID：13843434
> 
> 赞同：3
> 
> 时间：2012-12-12T15:47:38.260
> 
> 标签：ruby, rubygems, bundler

我已经创建了一个宝石并将其推送到 ruby​​gems。我可以使用安装：

```
'gem install mygem'
=> mygem installed 
```

..和..

```
# Gemfile
gem 'mygem', git: 'git@github.com:me/mygem.git' 
```

但是，如果我只`gem 'mygem'`放入我的 Gemfile 和`bundle install`，我会收到此错误：

```
Fetching gem metadata from https://rubygems.org/.......
Fetching gem metadata from https://rubygems.org/..
Could not find gem 'mygem (>= 0) ruby' in the gems available on this machine. 
```

格林威治标准时间下午 3 点，宝石被推送到 ruby​​gems。不确定元数据捆绑器是否与使用的元数据相同`gem install`。

在添加`mygem`到 Gemfile 之前，我已经成功获得了`bundle install`30 个其他 gem。还要注意`available on this machine`部分。为什么`in any sources`不像我以前见过很多次那样？

```
Bundler version 1.2.2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:50:18.650

更正：一段时间后，我刚刚添加的 gem 出现在 bundler 寻找它们的地方。显然 gem 列表捆绑器使用很少更新。因此，对于正在开发的 gem，只需在 Gemfile 中使用 :git 表示法：

```
gem 'iso_3166', :git => 'git@github.com:sergeych/iso_countries.git' 
```

# extjs - Sencha Touch 2\. 清空列表

> ID：13843435
> 
> 赞同：0
> 
> 时间：2012-12-12T15:47:41.730
> 
> 标签：extjs, sencha-touch-2

Stores 对象是通过 ajax 请求动态加载的。在控制台中调试时，我可以看到**Store**对象充满了记录，但**List**是空的。

代码：

视口视图

```
Ext.define('sample.views.Viewport', {
    extend: 'Ext.tab.Panel',

    title:   'Hello world!',

    xtype: 'viewport',

    config: {
        fullscreen: true,

        tabBar: {
            docked: 'bottom',
        },

        items: [
            { xclass: 'sample.views.wares.lists.Popular' },
        ]
    }
}); 
```

导航视图视图

```
Ext.define('sample.view.wares.lists.Popular', {
    extend: 'Ext.NavigationView',

    xtype: 'Popular',

    config: {       
        iconCls: 'home',
        title: 'Pop. prekės',

        items: [
            {
                xtype: 'wares',                                                         
            }
        ]   
    }
}); 
```

列表显示

```
Ext.define('sample.views.wares.lists.List', {
    extend: 'Ext.List',

    xtype: 'wares',

    config: {
        store: 'Wares', 
        itemTpl: '{Name}'
    },

    initialize: function () {
        this.config.title = sample.app.title;
    }
}); 
```

存储通过 Ajax 请求动态加载的记录对象。

```
Ext.define('sample.store.Wares', {
    extend: 'Ext.data.Store',

    config: {
        model: "sample.models.WaresListItem"
    }
}); 
```

![Ripple 模拟器中的结果](../Images/b6a35ce23c4853f46e532cf9da15fa9f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:06:38.683

大多数情况下，您看不到内部组件是因为您尚未定义其容器的布局。

尝试将布局添加到导航视图的配置中，如下所示：

```
config: {       
    iconCls: 'home',
    title: 'Pop. prekės',
    layout: 'fit',
    items: [
        {
            xtype: 'wares',                                                         
        }
    ]   
} 
```

希望这可以帮助

另请参阅：RDougan 在此处的回答：[如何使 dataview.list 在 Sencha Touch 2 中可见？](https://stackoverflow.com/questions/9685062/how-do-i-make-a-dataview-list-visible-in-sencha-touch-2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:17:24.267

```
initialize: function () {
    this.config.title = sample.app.title;
    this.callParent();
} 
```

如果您有初始化函数，“this.callParent()”很重要，因为它调用父级（在您的情况下为“Ext.dataview.List”）并要求它执行某些默认操作，这些默认操作是构建列表所必须的。这类似于在 java 中从构造函数调用 super。

如果您可以将其移至声明块

```
this.config.title = sample.app.title; 
```

并这样做

```
config: {
    store: 'Wares', 
    itemTpl: '{Name}',
    title: sample.app.title
}, 
```

您完全不需要初始化块

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T16:27:43.473

多次查看官方文档中的示例应用程序，通过`callParent`在函数中调用函数解决了问题`initialize`。还不知道为什么。

```
initialize: function () {
    this.config.title = sample.app.title;
    this.callParent();
} 
```

# matlab - Matlab报错：在赋值A(I) = B中，B和I中的元素个数必须相同

> ID：13843444
> 
> 赞同：-7
> 
> 时间：2012-12-12T15:47:59.637
> 
> 标签：matlab, matlab-guide

我有一个大小为 9 的数组，`b`我正在尝试将值分配给它。

```
r=a(7)+u*(b(8))+v*(b(9))
b(7)=r 
```

我知道这`r`确实是一个 1X1 值，但`b(7)=r`我仍然得到：

```
Error in ==> myFunction at 37
    b(7)=r

In an assignment  A(I) = B, the number of elements in B and
I must be the same. 
```

以下是 myFunction 的代码（带有 % 的 for 循环是我想要工作的）

```
function b=myFunction(u,v,a)
    b(8)=0;
    b(9)=0
    r=a(7)+u*(b(8))+v*(b(9));
    size(a)
    size(b)
    size(r)
    b(7)=r
    r=a(6)+u*b(6+1)+v*b(6+2);
    b(6)=r;
    b(5)=a(5)+u*b(5+1)+v*b(5+2);
    b(4)=a(4)+u*b(4+1)+v*b(4+2);
    b(3)=a(3)+u*b(3+1)+v*b(3+2);
    b(2)=a(2)+u*b(2+1)+v*b(2+2);
    b(1)=a(1)+u*b(1+1)+v*b(1+2);
    %for i=7:-1:1
    %    b(i)=a(i)+u*b(i+1)+v*b(i+2);
    %end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:22:34.160

我无法重现您的问题。下面的代码对我有用。你`myFunction()`用标量`u`和调用`v`吗？

```
function myTestFunction()

a = 1:7;
u = 3;
v = 4;
b = myFunction(u,v,a)

end

function b=myFunction(u,v,a)
    b(8)=0;
    b(9)=0
%     r=a(7)+u*(b(8))+v*(b(9));
%     size(a)
%     size(b)
%     size(r)
%     b(7)=r
%     r=a(6)+u*b(6+1)+v*b(6+2);
%     b(6)=r;
%     b(5)=a(5)+u*b(5+1)+v*b(5+2);
%     b(4)=a(4)+u*b(4+1)+v*b(4+2);
%     b(3)=a(3)+u*b(3+1)+v*b(3+2);
%     b(2)=a(2)+u*b(2+1)+v*b(2+2);
%     b(1)=a(1)+u*b(1+1)+v*b(1+2);
    for i=7:-1:1
       b(i)=a(i)+u*b(i+1)+v*b(i+2);
    end
end 
```

具有以下输出

```
b =

     0     0     0     0     0     0     0     0     0

b =

  Columns 1 through 8

       29128        7281        1821         454         114          27           7           0

  Column 9

           0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:13:38.293

该错误意味着您试图将向量或矩阵保存到大小不正确的空间中。

当您键入`a(1) = X;`X 时，必须是一个`scalar`或单个值。您在有关此问题的评论中报告的大小表明您正在尝试将 a 分配`vector`给 a `scalar`。你需要做类似的事情`b(7) = r(a_single_index)`

# c++ - 重载赋值操作/流

> ID：13843449
> 
> 赞同：1
> 
> 时间：2012-12-12T15:48:21.020
> 
> 标签：c++, operator-overloading, overloading

我想知道以下用于对有理数进行操作的代码是否实际上已经重载了赋值操作和流插入操作符 << 以打印对象。我对 C++ 不是很好，所以这对我来说是新的，但据我所知，我认为它已经做到了。

```
 /*
 *
 *  C++ version
 *
 */

/* rational.h */

#ifndef RATIONAL_H
#define RATIONAL_H

#include <iostream>

using std::ostream;

struct rational {

    rational(int = 0, int = 1);

    rational operator+(const rational &) const;
    rational operator-(const rational &) const;
    rational operator*(const rational &) const;
    rational operator/(const rational &) const;

    rational operator+(int) const;
    rational operator-(int) const;
    rational operator*(int) const;
    rational operator/(int) const;

    friend rational operator+(int, const rational &);
    friend rational operator-(int, const rational &);
    friend rational operator*(int, const rational &);
    friend rational operator/(int, const rational &);

    friend ostream &operator<<(ostream &, const rational &);

private:

    int den;
    int num;
};

#endif /* RATIONAL_H */

/* rational.cc */

#include <iostream>
#include "rational.h"

rational::rational(int num, int den) : num(num), den(den) {}

rational rational::operator+(const rational &o) const {

    return rational(num * o.den + o.num * den, den * o.den);
}

rational rational::operator+(int n) const {

    return rational(num + n * den, den);
}

rational rational::operator-(const rational &o) const {

    return rational(num * o.den - o.num * den, den * o.den);
}

rational rational::operator-(int n) const {

    return rational(num - n * den, den);
}

rational rational::operator*(const rational &o) const {

    return rational(num * o.num, den * o.den);
}

rational rational::operator*(int n) const {

    return rational(num * n, den);
}

rational rational::operator/(const rational &o) const {

    return rational(num * o.den, den * o.num);
}

rational rational::operator/(int n) const {

    return rational(num, den * n);
}

rational operator+(int n, const rational &o) {

    return o + n;
}

rational operator-(int n, const rational &o) {

    return rational(n) - o;
}

rational operator*(int n, const rational &o) {

    return o * n;
}

rational operator/(int n, const rational &o) {

    return rational(n) / o;
}

ostream &operator<<(ostream &out, const rational &o) {

    out << '(' << o.num << " / " << o.den << ')';
    return out;
}

/* main.cc */

#include <iostream>
#include "rational.h"

using std::cout;
using std::endl;

int main(void) {

    rational a(1, 2);
    rational b(2, 3);

    int i = 5;

    cout << a << " + " << b << " = " << a + b << endl;
    cout << a << " - " << b << " = " << a - b << endl;
    cout << a << " * " << b << " = " << a * b << endl;
    cout << a << " / " << b << " = " << a / b << endl;

    cout << a << " + " << i << " = " << a + i << endl;
    cout << a << " - " << i << " = " << a - i << endl;
    cout << a << " * " << i << " = " << a * i << endl;
    cout << a << " / " << i << " = " << a / i << endl;

    cout << i << " + " << a << " = " << i + a << endl;
    cout << i << " - " << a << " = " << i - a << endl;
    cout << i << " * " << a << " = " << i * a << endl;
    cout << i << " / " << a << " = " << i / a << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:51:25.707

没关系（你可以写在`operator<<`一行中，但在这里没关系）：

```
ostream &operator<<(ostream &out, const rational &o) {
    return out << '(' << o.num << " / " << o.den << ')';
} 
```

但是，您还没有定义赋值运算符！

```
rational & rational::operator=(rational const &rhs) {
    den = rhs.den;
    num = rhs.num;
    return *this;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T15:51:52.170

**简短的回答：**是的，它适用于`<<`和算术运算。它不是为了分配。

例如，这是`<<`重载：

```
ostream &operator<<(ostream &out, const rational &o) {
    out << '(' << o.num << " / " << o.den << ')';
    return out;
} 
```

要重载[赋值运算符](http://en.wikipedia.org/wiki/Assignment_operator_%28C++%29)，您应该编写一个函数

```
rational& rational::operator=(const rational &o) {
    this->den = o.den;
    this->num = o.num;
    return *this;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T16:53:06.737

插入和分配都很好。赋值运算符（和复制构造函数）由编译器提供，在这种情况下很好。如果出于某种原因您确实想提供一个赋值运算符（或者您需要为其他一些类提供），那么您几乎可以肯定也需要提供一个复制构造函数，而且大多数情况下是一个析构函数。但这里不是这样。编译器生成的版本很好（我认为这是大多数 C++ 程序员所期望的）。

关于您的代码的其他评论：您编写构造函数和插入运算符的方式很好，并且比建议的替代方案更可取。

# c# - 打印清单 - 每页一张图片

> ID：13843454
> 
> 赞同：1
> 
> 时间：2012-12-12T15:48:36.310
> 
> 标签：c#, winforms

我有一个*PictureBox 列表*。以下代码适用于单个 PictureBox。无论纸张大小如何，如何在**新页面中打印每个 PictureBox（或 Image） ？**谢谢 ！

```
private void btnPrint_Click(object sender, EventArgs e)
{
   PrintDocument doc = new PrintDocument();
   doc.PrintPage += Doc_PrintPage;
   PrintDialog dlgSettings = new PrintDialog();

   dlgSettings.Document = doc;

   if (dlgSettings.ShowDialog() == DialogResult.OK)
   {
       doc.Print();
   }
}

private void Doc_PrintPage(object sender, PrintPageEventArgs e)
{
   float x = e.MarginBounds.Left;
   float y = e.MarginBounds.Top;
   Bitmap bmp = new Bitmap(picBox1.Width, picBox1.Height);

   //THIS IS OKAY FOR A SINGLE PICTURE BOX. 
   picBox1.DrawToBitmap(bmp, 
            new Rectangle(0, 0, picBox1.Width, 
            picBox1.Height));

   e.Graphics.DrawImage((Image)bmp, x, y);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T16:28:58.817

尝试跟踪图像索引：

```
int bmpIndex = 0;
List<Bitmap> bmps = new List<Bitmap>();

void pd_BeginPrint(object sender, PrintEventArgs e) {
  bmpIndex = 0;
}

void pd_PrintPage(object sender, PrintPageEventArgs e) {
  e.Graphics.DrawImage(bmps[bmpIndex], new Point(e.MarginBounds.Left, 
                                                 e.MarginBounds.Top));

  ++bmpIndex;
  if (bmpIndex < bmps.Count) {
    e.HasMorePages = true;
  }
} 
```

# php - 是否可以在 application.ini 配置中设置 Zend_Date 选项？

> ID：13843455
> 
> 赞同：1
> 
> 时间：2012-12-12T15:48:37.603
> 
> 标签：php, zend-framework, app-config, zend-date

是否可以像这样在 application.ini 配置中设置 Zend_Date 选项：

```
resources.date.options.format_type = php 
```

在 Zend Framework v 1.* 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:36:30.983

默认情况下，此类资源不可用：http: [//framework.zend.com/manual/1.12/en/zend.application.available-resources.html](http://framework.zend.com/manual/1.12/en/zend.application.available-resources.html)

但是，没有什么能阻止您创建自己的资源：

1.在`application.ini`指定资源路径和日期设置

```
pluginPaths.My_Application_Resource = "My/Application/Resource"
resources.date.options.format_type = "php" 
```

2.创建资源

```
<?php
class My_Application_Resource_Date extends Zend_Application_Resource_ResourceAbstract
{
    public function init()
    {
        $options = $this->getOptions();
        Zend_Date::setOptions($options['options']);
    }    
} 
```

# .net - 使 XmlWriter 输出单引号而不是属性值周围的双引号

> ID：13843459
> 
> 赞同：7
> 
> 时间：2012-12-12T15:48:49.607
> 
> 标签：.net, json, escaping, quotes, xmlwriter

有没有办法`XmlWriter`在写属性时输出单引号而不是双引号？

我对哪个有属性*不*感兴趣（奇怪的是不是 的一部分）。除了包装一个之外，覆盖一些现有的作家类也不是真的可行。`XmlTextWriter``QuoteChar``XmlWriterSettings`

问的原因：我在html数据属性中输出json，因为json引号字符是“这很容易导致数据爆炸，因为”被转义为“” 到处。如果我可以使用单引号来启动属性值，那么 json 中的双引号就不需要转义。

我正在输出（x）html，并且根据诸如[this](https://stackoverflow.com/questions/273354/are-single-quotes-allowed-in-html) one之类的问题，单引号是合法的来分隔属性值。

我很确定没有（理智的）方法可以做到这一点，但谁知道我错过了什么。

# javascript - 了解backbone.js 集合

> ID：13843462
> 
> 赞同：1
> 
> 时间：2012-12-12T15:49:01.387
> 
> 标签：javascript, backbone.js

我试图了解backbone.js 集合是如何工作的。假设我有一个数据库，比如说用户。我想要一个简单的用户。

什么是正确的方法？定义 users 集合，然后在集合范围内访问所需的模型？`url`或者为单个用户覆盖模型的 REST CRUD 方法是否 100% 合法？

如果第一个选项是正确的，我应该如何处理收集延迟初始化？如果第二个没问题，如果我尝试显示最近登录的用户会发生什么（这意味着我必须使用一个集合，并且覆盖的 url 属性可能会影响这一点）。

我觉得我缺少链中的链接，但在文档中找不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:02:11.900

当使用这样的集合时，您通常会通过 Backbone.Collection 加载数据并通过集合内的 Backbone.Model 实例操作单个记录。在用户的情况下，当前登录的用户将是一个模型，但如果您正在查看和使用用户表中的其他数据，它将通过一个集合加载。

*   创建 1 个用户 -> 使用 Backbone.Model.save() -> POST /user
*   读取 1 个用户 -> 使用 Backbone.Model.fetch() -> GET /user/42
*   更新 1 个用户 -> 使用 Backbone.Model.save() -> PUT /user/42
*   删除 1 个用户 -> 使用 Backbone.Model.destroy() -> DELETE /user/42

*   加载一批用户 -> 使用 Backbone.Collection.fetch() -> GET /users

*   使用排序顺序加载一批用户（例如通过最近登录）-> 在 URL 中使用 Backbone.Collection.fetch() 和正确的查询字符串 -> GET /users?order_by=login

# css - 文本的垂直居中线

> ID：13843463
> 
> 赞同：4
> 
> 时间：2012-12-12T15:49:06.873
> 
> 标签：css

在登录/注册框中，我必须用这样的文本分隔两个按钮。

![登录/注册框](../Images/899bae2cf308736270f08d1174ede07b.png)

我的 HTML 代码是：

```
<button class="facebookSux">Ingresa con Facebook</button>
<label>o si prefieres</label>
<button class="register">Regístrate con tus datos</button> 
```

如何仅使用 CSS 获得标签的水平线？

我考虑过的一种解决方案是适当地使用线性渐变，但必须有一种更优雅的方式来实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:54:18.713

您当然可以使用 2 个 div 和定位

[**演示**](http://jsfiddle.net/jsBDD/2/)

HTML

```
<div class="wrapper">
   <div class="line"></div>
   <div class="text">Hello</div>
</div> 
```

CSS

```
.wrapper {
    margin: 30px;
    position: relative;
    width: 300px;
}

.line {
    height: 1px;
    background-color: #000000;
}

.text {
    background: #ffffff;
    display: inline-block;
    position: absolute;
    top: -15px;
    left: 128px;
    padding: 5px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T19:27:19.330

我假设这三个标签周围有一个容器也可以设置样式，在这种情况下，我提出**[了这个解决方案](http://jsfiddle.net/NGLN/DWycS/2)**。

![截屏](../Images/6055c6a5fbb4a56fde21a38fb20d32e2.png)

标记（未更改）：

```
<div>
    <button>Ingresa con Facebook</button>
    <label>o si prefieres</label>
    <button>Regístrate con tus datos</button>
</div> 
```

样式表：

```
div {
    width: 250px;
    text-align: center;
    overflow: hidden;
}
button {
    width: 100%;
}
label {
    padding: 0 1em;
    position: relative;
}
label::before,
label::after {
    width: 125px; /* =250/2 */
    height: 0;
    border-top: 1px solid #000;
    content: "";
    display: inline-block;
    position: absolute;
    top: 50%;
    right: 100%;
}
label::after {
    left: 100%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:59:19.937

您可以`<hr />`为此使用标签。可以将`<hr />`标签设置为一条黑线。通过使用 css，您可以将它们放置在正确的位置。

将标签样式设置`<hr />`为黑线：

```
hr {
        border: 1px; 
        height: 1px; 
        color: #000000;
        background-color: #000000;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T16:33:57.020

使用这个：http: [//jsfiddle.net/tErMn/](http://jsfiddle.net/tErMn/)

您只有动态文本定位和带有 css 的行。

诀窍在于`display: inline-block;`,`margin: auto;`和`z-index`;

HTML

```
<div class="container">    
    <div class="text">Hello</div>
    <div class="line"></div>
</div> 
```

CSS

```
.container{
    width: 300px;
    text-align: center;
}

.text{
    background-color: white;
    padding: 5px 20px;
    position: relative;
    z-index:1;
    margin: auto;
    display: inline-block;

}

.line {
    height: 1px;
    width: 100%;
    background-color: black;
    margin-top: -15px;
} 
```

# ios - iPad 上的 NSLayoutConstraint SIGABRT

> ID：13843466
> 
> 赞同：0
> 
> 时间：2012-12-12T15:49:28.663
> 
> 标签：ios, xcode, sigabrt, nslayoutconstraint

应用程序在界面生成器中进行。iPhone 和 iPad 的独立故事板。项目在具有最新 iOs 的 iPhone 模拟器、iPad 模拟器、iPhone 4 上运行并正常运行，但是当我在 2012 年春季使用 iOs 5.1 的“新 iPad”上构建它时出现此错误。修复/解释？

```
2012-12-12 16:44:16.763 LNG[397:707] *** Terminating app due to uncaught exception 'NSInvalidUnarchiveOperationException', reason: 'Could not instantiate class named NSLayoutConstraint'
*** First throw call stack:
(0x32b7488f 0x34b19259 0x32b74789 0x32b747ab 0x3536254d 0x353626bb 0x35362423 0x352f3001 0x352613c7 0x3513ec59 0x350b4c17 0x350b3461 0x350a5e87 0x351167d5 0x350b3e6d 0x350ad7dd 0x3507bac3 0x3507b567 0x3507af3b 0x32c1822b 0x32b48523 0x32b484c5 0x32b47313 0x32aca4a5 0x32aca36d 0x350ac86b 0x350a9cd5 0x84ad 0x8448)
terminate called throwing an exception(lldb) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:50:40.997

新`autolayout`机制仅适用于 iOS 6.0+，它崩溃的设备是 5.1。

要修复它，请在 Interface Builder 中加载 XIB，选择 File Inspector 选项卡，然后取消选中`Use autolayout`. 或者，如果您绝对*必须*`iOS 6.0+`具有自动布局，您可以定位-only 设备并更改最小目标。

# java - Java，实例替换而不是模拟

> ID：13843469
> 
> 赞同：0
> 
> 时间：2012-12-12T15:49:51.367
> 
> 标签：java

您好：通常您使用模拟（java 代理）来替换类中的对象。

例如：

```
public class ClassA{
  public ClassB realObjectB;
  public ClassC realObjectC;

  public void Method1(){
       realObjectC = new ClassC();
       realObjectB =  new ClassB(realObjectC);   
  }     

  ...

  ... 
```

}

```
public class ClassB {

      public void ParticularInhereitedMethod(){
          many dependency objects involved...
      }  

} 
```

当然，ClassB 和 ClassC 还有很多其他的依赖关系，例如连接池。

当我进行测试时，我可以这样做：

```
 public class Mock extends ClassB{        

 @override  
 public class ParticularInhereitedMethod(){
      Make clean codes, no dependency.
 } 
```

}

在测试应用中：

```
 public class MainClass{

          public static void main(String[] args){
                  ClassA a = new ClassA();
                  ClassM m = new Mock();
                  a.realObjectB = m; 

                  manipulate m;
          }

   } 
```

上述方法在实际测试中有效吗？为什么我必须使用 Java 代理（字节码替换）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:55:58.113

我建议使用 Mockito [http://code.google.com/p/mockito/](http://code.google.com/p/mockito/)和 Spring 注入来解决您的问题。

使用mockito tou可以从参数中声明对象的返回参数，使用spring可以在运行时解析对象的实例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:57:00.337

由于您的对象相对复杂，您可能会发现难以模拟/替换。我会寻找以更简单的方式测试它们的方法，并使用依赖注入来允许您在不进行子类化的情况下替换它们的实现。

# javascript - Javascript 参数

> ID：13843474
> 
> 赞同：0
> 
> 时间：2012-12-12T15:50:13.910
> 
> 标签：javascript

我注意到，当我将这样的字符串`\[(tan(w)\]`作为参数传递给函数时，在我传递给函数的函数中打印的参数是`[(tan(w)]`. 为什么斜线会被剥离？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:51:19.110

语法继承自 C 的任何语言中的字符串中的斜杠用于转义其他字符。例如，如果您想`"`在字符串中添加双引号 ( )，请使用`\"`

要在字符串中添加斜杠，您必须添加双斜杠：`"\\[(tan(w)\\]"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:51:42.420

反斜杠字符是特殊的。

如果要在字符串中传递一个并保留它，则必须传递两个：

```
"\\[(tan(w)\\]" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T15:51:55.543

在字符串文字中，`\`具有特殊含义。这意味着您正在启动一个转义序列来表示某个字符。

如果转义序列实际上具有指定的含义，则新字符将替换整个序列。如果没有，斜线将被删除。

在结果字符串中包含文字反斜杠的转义序列是一个反斜杠，后跟另一个反斜杠。`\\`

# svn - 这不是有效的 Subversion 存储库：svn：E210004：握手失败，收到：''

> ID：13843477
> 
> 赞同：2
> 
> 时间：2012-12-12T15:50:29.753
> 
> 标签：svn, subversive, bamboo

**这不是有效的 Subversion 存储库：svn：E210004：握手失败，收到：''**

```
URL=svn://X.X.X.X:XX/svn/project/default-pom/trunk 
```

有人已经面临这个问题了吗？感谢所有建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-01T10:44:46.700

我遇到了（并且破解了:-)）Eclipse Kepler、Subclipse 1.6.x 和 Synology NAS 的相同问题。您可能需要确保“svnserve”在 SVN**服务器**的 /usr/bin 中。

您可以进行两项测试来检查这一点：

1) 在 SVN**客户端**机器上，键入：

> svn list --verbose svn+ssh://SVNServerLogin@SVNServerIP:pathOfSVNrepo

2) 在 SVN**服务器**机器上，键入：

> ls /usr/bin | grep svnserve

如果在 /usr/bin 中找不到链接并且“svn”命令返回错误（例如“sh: svnserve: not found”），我建议在 SVN**服务器**上以 root 身份执行以下命令：

> ln -s /opt/bin/svnserve /usr/bin/svnserve

（我在 /opt/bin 中找到了我的 svnserve，但当然在您的情况下它可能位于不同的位置）。

对不起，如果我迟到了几年来回答你的问题！

最好的。

# c# - C# WPF 工具包图表：以 16k 点速度绑定

> ID：13843482
> 
> 赞同：3
> 
> 时间：2012-12-12T15:50:49.637
> 
> 标签：c#, wpf, charts, toolkit

当*Chart*绑定到 16000 点时，绑定速度很慢。

我有图表（Wpf 工具包）：

```
<chartingToolkit:Chart ... DataContext="{Binding Data}" ... > 
```

数据是*ViewModel*中的一个属性（我使用的 MVVM 模式）：

```
public List<Point> Data { get { return series; } } 
```

系列是一个领域：

```
private List<Point> series; 
```

在 ViewModel 的构造函数中：

```
for ( ... ; ...;  ... )
{
  y = ...
  series.Add(new Point((i * scale), y));
} 
```

当我尝试将图表绑定到数据程序将冻结大约 1-2 分钟然后确定。我在 WinForms 上制作了相同的程序 - 速度非常完美。知道如何解决此绑定问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:14:23.960

最好的方法是减少点数。您通常会注意到控件上有很多 WPF 元素会导致性能问题，并且通常它们的 WinForm 计数器部件很好。

在图表的情况下，我想象正在使用圆圈和线条，并在 WPF 树结构中记住，因此 WPF 正在记住 16k 个元素+。尝试在 WPF 中嵌入 WinForms 图表可能会更好，它更像是画布，一旦绘制就会忘记重点......

# asp.net - 为什么 ASP.NET 应用程序中的外部进程失败？

> ID：13843492
> 
> 赞同：0
> 
> 时间：2012-12-12T15:51:18.363
> 
> 标签：asp.net, putty

我有一些在 ASP.NET 应用程序中运行的代码，该应用程序运行一个命令行进程，该进程使用 PSCP.EXE (Putty) 将文件从外部 Linux 服务器复制到本地服务器。当我在 Visual Studio 2010 中使用 Run 命令以交互方式运行 ASP.NET 应用程序时，它运行良好。但是，当我将应用程序部署到 IIS（在同一台服务器上！）并尝试运行它时，我从 PSCP.EXE 命令行返回错误。错误是这样的：

致命：网络错误：连接超时

我对那个 PSCP.EXE 错误做了一些研究，我发现的唯一一件事是人们建议需要指定端口。但我认为这不适用于我，因为当我通过 Visual Studio 运行应用程序时它可以正常工作。

有谁知道为什么在我的机器上从 IIS 7 运行命令时会出现连接超时错误，但是当我在同一个机器上通过 Visual Studio 运行它时它工作正常？

这是我的代码：

```
string _pscpExePath = ConfigurationManager.AppSettings["PSCPExePath"];
string _localOptionsFolder = ConfigurationManager.AppSettings["LocalOptionsFileFolder"];
string _remoteOptionsLocation = ConfigurationManager.AppSettings["RemoteOptionsFileLocation"];

ProcessStartInfo _procStartInfo = new ProcessStartInfo("cmd", "/c " + _pscpExePath + " -pw " + App.ConfigData.ModemAdminPassword + " root@" + App.ConfigData.ModemIPAddress + ":" + _remoteOptionsLocation + " " + _localOptionsFolder);
_procStartInfo.RedirectStandardOutput = true;
_procStartInfo.RedirectStandardError = true;
_procStartInfo.UseShellExecute = false;
_procStartInfo.CreateNoWindow = true;

using (Process _proc = Process.Start(_procStartInfo))
{
  using (StreamReader _reader = _proc.StandardOutput)
  {
    string _result = _reader.ReadToEnd();
    log.Info("Get Options File Result = " + _result);
  }

  using (StreamReader _error = _proc.StandardError)
  {
    string _result = _error.ReadToEnd();
    log.Info("Get Options File Error = " + _result);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T00:17:02.840

看来我弄错了。IIS 站点无法连接到 linux 服务器还有一个不同的原因。现在一切正常。这个问题可以标记为已回答，甚至可以删除，因为它确实不是代码或任何问题的问题。

# ios - 加密/解密 .plist 文件 ios

> ID：13843496
> 
> 赞同：8
> 
> 时间：2012-12-12T15:51:29.360
> 
> 标签：ios, encryption, plist

我有一个包含一些存储数据的 plist，并且想要加密解密，因此使用目标 c 不可读。我已经阅读了有关 AES 加密等的信息，但我希望对整个 plist 进行加密，而不是 plist 中的字符串....

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T17:51:44.883

使用[https://web.archive.org/web/20150612123348/http://blog.objectgraph.com/index.php/2010/04/20/encrypting-decrypting-base64-encode-decode-in-中的代码iphone-objective-c/](https://web.archive.org/web/20150612123348/http://blog.objectgraph.com/index.php/2010/04/20/encrypting-decrypting-base64-encode-decode-in-iphone-objective-c/)（您在评论中提供的链接），您可以通过以下方式加密您的 plist：

```
NSData *plistFileData = [NSData dataWithContentsOfFile:plistPath];
NSData *encryptedData = [plistFileData AESEncryptWithPassphrase:password];
[encryptedData writeToFile:encryptedPath atomically:YES]; 
```

*plistPath*是一个 NSString，其中包含您要加密的 plist 文件的路径
*password*是您要使用的加密密钥
*encryptedPath*是您要保存加密文件的位置

解密：

```
NSData *encryptedData = [NSData dataWithContentsOfFile:encryptedPath];
NSData *plistFileData = [plistFileData AESDecryptWithPassphrase:password];
[plistFileData writeToFile:plistPath atomically:YES]; 
```

*encryptedPath*是一个 NSString，其中包含加密 plist 文件的路径
*password*是您要使用的加密密钥
*plistPath*是您要保存解密 plist 文件的位置

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-08T08:47:42.043

howanghk 提供的链接包含有错误的代码。在该网页上应用 InoriXu 提供的修复程序来解决问题。您必须修改加密和解密功能。

所以在一行之后：

```
const char *password = [pass UTF8String]; 
```

添加：

```
const int passwordLen = [pass length]; 
```

并换行：

```
key[i] = password != 0 ? *password++ : 0; 
```

进入：

```
key[i] = i < passwordLen != 0 ? *password++ : 0; 
```

代码本身仍然在后面添加了一些空格填充，但是如果您需要它来加密属性列表，那就没问题了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-30T11:37:54.793

这是一个非常简单的答案，希望这可以简化问题（如果有）；

首先你需要在[这里](https://github.com/nicerobot/objc/tree/master/NSData/NSData%2BAES)下载 NSData+AES 文件。您只需要 NSData+AES.h 和 NSData+AES.m 以及 cipher.h 和 cipher.m 文件。一旦被拘留，将文件添加到您的 Xcode 项目中，并从 NSData+AES.h 和 cipher.h 中删除 #import Cocoa/Cocoa.h> 标头（仅适用于打算为 iOS 编程的人，如果是 MacOS，请让标头是）。在您获取和写入 plist 文件的文件中导入 NSData+AES.h。

现在已经奠定了最初的基础，我们开始使用这些重要文件。您需要了解的是您要解密和加密数据的方式。在第一次运行时，您需要将您的 plist 复制到文档文件夹，然后对其进行加密。请注意，如果您复制它并尝试直接解密它，它会抛出异常，因此为了满足这种情况，我们将使用 UserDefaults 布尔值并在第一次运行时跳过解密。您还需要定义一个预处理器指令常量字符串来处理加密和解密的密钥。这是您的 DataHandler 类中的内容；

```
 #import <Foundation/Foundation.h>
    #import "NSData+AES.h"
    #define MY_SECRET_KEY   @"MY_SECRET_KEY"

    static NSMutableDictionary *dataDictionary_ = nil;
    static NSMutableDictionary *allSettings_ = nil;

    @implementation DataHandler

    - (id)init
    {
        if(self = [super init])
        {
            [self copyPlistData];
        }
        return self;
    }
    // Encrypt File
    - (NSData*)encryptFile:(NSMutableDictionary *)plistDict
    {
        NSError *err = nil;
        NSData *data = [NSPropertyListSerialization dataWithPropertyList:plistDict format:NSPropertyListXMLFormat_v1_0 options:0 error:&err];
        NSData *file = [data encryptWithString:MY_SECRET_KEY];

        return file;
    }

    // Decrypt File
    - (NSMutableDictionary *)decryptFile:(NSData *)data
    {
        NSError *err = nil;
        NSData* newData = [data decryptWithString:MY_SECRET_KEY];
        NSPropertyListFormat format;
        NSMutableDictionary *file = [NSPropertyListSerialization propertyListWithData:newData options:NSPropertyListMutableContainersAndLeaves format:&format error:&err];

        return file;
    }

    - (void) copyPlistData
    {
        NSError *error;
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory =  [paths objectAtIndex:0];
        NSString *path = [documentsDirectory stringByAppendingPathComponent: @"myData.plist"];
        NSFileManager *fileManager = [NSFileManager defaultManager];
        BOOL fileExists = [fileManager fileExistsAtPath:path];

        //check if the file exists already in users documents folder
        //if file does not exist copy it from the APPLICATION bundle Plist file
        if (!fileExists)
        {
            NSLog(@"copying database to users documents");
            NSString *pathToSettingsInBundle = [[NSBundle mainBundle] pathForResource:@"mydata" ofType:@"plist"];
            BOOL copySuccess = [fileManager copyItemAtPath:pathToSettingsInBundle toPath:path error:&error];
            if(copySuccess)
            {
                noCopyError_ = YES;
            }
        }
        //if file is already there do nothing
        else
        {
            noCopyError_ = YES;
            NSLog(@"users database already configured");
        }

        BOOL firstRun = [[NSUserDefaults standardUserDefaults] boolForKey:@"IS_FIRST_RUN"];
        if(noCopyError_ && firstRun)
        {
             dataDictionary_ = [self decryptFile:[NSData dataWithContentsOfFile:path]];
        }
        else
        {
             [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"IS_FIRST_RUN"];
             [[NSUserDefaults standardUserDefaults] synchronize];

             NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
             NSString *documentsDirectory = [paths objectAtIndex:0];
             NSString *plistPath = [documentsDirectory stringByAppendingPathComponent:@"mydata.plist"];
             dataDictionary_ = (NSMutableDictionary*)[[NSDictionary alloc ] initWithContentsOfFile:plistPath];
             NSMutableDictionary *data = (NSMutableDictionary*)[dictionaryDATA_ objectForKey:@"Data"];

             allSettings_ = [data objectForKey:@"AllSettings"];
        }
    }

    - (NSMutableDictionary*) properties
    {
        NSMutableDictionary * props = [[NSMutableDictionary alloc]init];
        [props setObject: allSettings_ forKey:@"AllSettings"];

        NSMutableDictionary * data = [NSMutableDictionary dictionaryWithObject:props forKey:@"Data"];
        return data;
    }

    - (void)persistData
    {
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory =  [paths objectAtIndex:0];
        NSString *plistPath = [documentsDirectory stringByAppendingPathComponent:@"mydata.plist"];

        NSMutableDictionary *dict = [self properties];
        NSData *encryptedDict = [self encryptFile:dict];
        [encryptedDict writeToFile:plistPath atomically:YES];
    } 
```

但是第一次填充 dataDictionary_ 时，我们必须在 didFinishLaunching 的 AppDelegate.m 中强制将其持久化：

```
 DataHandler *dataHandler = [[DataHandler alloc] init];
    [dataHandler persistData]; 
```

数据将始终被加密，但在 copyPlist 方法中，您将根据 dataDictionary_ 填充模型并与这些模型进行交互。完成后，您将保留模型并再次加密，因此不会发生错误。这是一个简单且非常可行的解决方案，没有任何麻烦。干杯。

# ios - 如何使用没有选项卡或导航控制器的故事板从 AppDelegate 实例化不同的视图？

> ID：13843497
> 
> 赞同：1
> 
> 时间：2012-12-12T15:51:29.627
> 
> 标签：ios, controller, views, storyboard

我正在尝试构建一个具有 webview 的应用程序（第一个）。我使用了 Storyboard，并实现了一个完美运行的 WebView。但是现在它需要使用 Facebook 进行登录，所以我在 Storyboard 中添加了一个新视图，我想根据登录状态加载根视图。当我将视图标记为初始视图控制器时，应用程序可以工作并显示该视图，但是，我怎么能在显示视图之前更改它呢？

我已经尝试过这段代码，但它不起作用：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
UIViewController *vc =[storyboard instantiateViewControllerWithIdentifier:@"LoginViewController"];

// Set root view controller and make windows visible
self.window.rootViewController = vc;
[self.window makeKeyAndVisible]; 
```

我有这个错误：“2012-12-12 16:40:51.219 MoonBooster[15056:c07] 无法实例化 UIMainStoryboardFile 'MainStoryboard' 的默认视图控制器 - 也许未设置指定的入口点？”

我不确定 View 的标识符来自哪里，我正在考虑重新设计应用程序，只是不使用 Storyboard 也不是 segues，因为我没有使用 Nav 或 Tab View Controllers（我们不需要它) 所以我只能使用模态序列。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:14:43.203

视图控制器的标识符在身份检查器中设置——它在身份标题下，称为 StoryboardID。

就您的应用程序结构而言，我看到很多海报试图做与您正在做的事情类似的事情，我认为这不是正确的方法。在应用程序开始时您想要的任何主视图（不包括启动屏幕或登录屏幕）都应该是根视图控制器。如果你想要一个登录屏幕，那么从你的主视图控制器的 viewDidAppear 方法中以模态方式呈现它。如果您不想在登录屏幕出现时简要查看主视图，则将动画设置为 NO。如果登录成功，那么只需关闭登录控制器，您就可以开始了。如果失败，则通过另一个屏幕或警报通知用户，并且不要关闭登录控制器。

# java - 从现有源文件创建 JCodeModel

> ID：13843498
> 
> 赞同：3
> 
> 时间：2012-12-12T15:51:34.217
> 
> 标签：java, code-generation, sun-codemodel

我想使用可能在语法上无效的代码片段创建 Java 源代码。这可以通过[com.sun.codemodel.JBlock#directStatement() 方法](http://codemodel.java.net/nonav/apidocs/com/sun/codemodel/JBlock.html#directStatement(java.lang.String))实现。

我的问题是，我想修改现有的（语法上有效的）源文件，但我找不到从文件（或字符串或流等）创建 JCodeModel 的方法。

有没有办法用 JCodeModel 做到这一点？

（我可以改用 Eclipse JDT/AST 框架，但它[显然不提供直接添加代码片段的选项](https://stackoverflow.com/questions/13801305/how-to-add-a-code-snippet-to-method-body-with-jdt-ast)......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:45:28.457

您可以使用[JavaParser](http://code.google.com/p/javaparser/wiki/UsingThisParser#Sample_Usage)有效地解析您的代码，并使用解析结果，您可以使用 JCodemodel 进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-12T01:58:07.837

恕我直言，一种方法可能是这样的。

*   试着看看你想用

    > 现有的（语法有效的）源文件

*   然后确定是否可以通过继承或包含生成的类中的类来修改它们而无需修改它们。这将在生成的代码和已经创建的代码中提供清晰的分离。

*   如果不可能，请尝试在现有（语法有效）类中使用诸如访问者之类的设计模式，并将生成的代码类实例注入其中以完成工作。

*   最坏的情况 - 最后一个选项将是真正修改现有的类。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-25T21:10:31.750

我建议您不要使用 JAVA 代码操作（使用程序中的 JAVA 代码操作非常复杂），而是使用 JAVA 字节码操作。三个常用的字节码操纵器是：

*   [小批量生产](http://asm.ow2.org/)，
*   [BCEL](http://commons.apache.org/bcel/)或
*   [Javassist](http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/)。

如果您确实需要使用源代码进行操作，您可以查看[Eclipse JDT](http://www.eclipse.org/jdt/)和*ASTRewrite*类。Bellow 是一个如何创建方法和

```
final ASTRewrite rewrite= new ASTRewrite(root);
root.accept(new ASTVisitor() {
public boolean visit(Assignment assignment) {
    // check if affected
    AST ast= assignment.getAST();
    MethodInvocation setter= ast.newMethodInvocation();
    setter.setName(ast.newSimpleName(setterName));
    setter.arguments().add(
    rewrite.createMoveTarget(assignment.getRightHandSide()));
    rewrite.replace(assignment, setter);
}
}); 
```

教程：

*   [http://sahits.ch/blog/?p=228](http://sahits.ch/blog/?p=228)
*   添加评论： http: [//www.programcreek.com/2012/06/add-comments-by-using-eclipse-jdt-astrewrite/](http://www.programcreek.com/2012/06/add-comments-by-using-eclipse-jdt-astrewrite/)
*   解析和重写：http://www.eclipsecon.org/2010/sessions/ [?](http://www.eclipsecon.org/2010/sessions/?page=sessions&id=1339) page=sessions&id=1339 （代码操作见第44-46页）

# selenium - xpath getText() 不能在 selenium 中使用 xpath=

> ID：13843502
> 
> 赞同：1
> 
> 时间：2012-12-12T15:51:46.570
> 
> 标签：selenium, xpath

我在 xpath 中使用 selenium，我试图在列表中获取 div 的文本。xpath 位置应如下所示。

```
xpath=(//span[@class='total'])[2] 
```

但是，当我这样使用它时，

```
getText("xpath=(//span[@class='total'])[2]"); 
```

我得到以下异常：

> 错误：命令执行失败。[请在https://groups.google.com/forum/#!forum/selenium-users](https://groups.google.com/forum/#!forum/selenium-users)中搜索用户组，以 获取日志窗口中的错误详细信息。错误消息是：TYPE_ERR: DOM XPath Exception 52

如果不使用 xpath=，我将无法访问我的节点做的命名空间问题。

有任何想法吗？

# ruby-on-rails-3 - 带有拦截器的 MandrillMailer Ruby Gem

> ID：13843503
> 
> 赞同：2
> 
> 时间：2012-12-12T15:51:48.533
> 
> 标签：ruby-on-rails-3, mailchimp, mailer, transactional-email

我正在使用 Mandrill Mailer Ruby Gem (https://github.com/renz45/mandrill_mailer)，但我想设置一个拦截器，以便在开发（和暂存）中将电子邮件发送到不同的电子邮件地址。

我不确定如何使用 gem 本身来做到这一点。如果使用 ActionMailer 开箱即用，我知道如何做到这一点，但对如何在此之外完成此操作有点困惑。

有什么想法或其他人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-07T21:41:59.837

当使用带有 mandrill_mail 方法的模板时，这对我有用。

配置/环境/test.rb

```
MandrillMailer.configure do |config|
  config.interceptor_params = { to: [email: 'homer@simpson.com', name: 'Homer Simpson'] }
end 
```

# windows-phone-7 - Microsoft.Xna.Framework.ni.dll 中出现“System.ArgumentException”类型的异常

> ID：13843509
> 
> 赞同：0
> 
> 时间：2012-12-12T15:52:01.527
> 
> 标签：windows-phone-7, xna, windows-phone, windows-phone-8

我正在尝试使用 Microsoft.Xna.Framework 播放 wav 文件，但我无法解决此错误。

```
A first chance exception of type 'System.ArgumentException' occurred in Microsoft.Xna.Framework.ni.dll
An exception of type 'System.ArgumentException' occurred in Microsoft.Xna.Framework.ni.dll but was not handled in user code 
```

下面是我的代码：（错误发生在线`TitleContainer.OpenStream(dingSoundFile)`：）

```
 SoundEffectInstance seiCircus;
        string dingSoundFile = "/Html/sounds/tap.wav";
        using (var stream = TitleContainer.OpenStream(dingSoundFile))
        {
            var effect = SoundEffect.FromStream(stream);
            //create the instance
            seiCircus = effect.CreateInstance();

            FrameworkDispatcher.Update();
            //play sound via the instance
            seiCircus.Play();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:50:14.960

根据 SoundEffect.FromStream 方法的[文档](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.audio.soundeffect.fromstream.aspx)，当流参数为空时，它看起来会引发参数异常。我的建议是尝试编写集成测试或编写一些防御性代码来尝试解决问题。

例如

**集成测试：**

```
[Test]
public void Test() {
    string dingSoundFile = "Html/sounds/tap.wav"; //NOTE: Remove leading slash
    try {
       var stream = TitleContainer.OpenStream(dingSoundFile);
       Assert.IsNotNull(stream); 
    } catch (Exception ex) {
       Assert.Fail(ex.Message);
    }
} 
```

或者

**防御性编码：**

```
SoundEffectInstance seiCircus;
string dingSoundFile = "Html/sounds/tap.wav"; //NOTE: Remove leading slash
try {
    using (var stream = TitleContainer.OpenStream(dingSoundFile)) {
        if(stream != null) {
           var effect = SoundEffect.FromStream(stream);
           seiCircus = effect.CreateInstance();

           FrameworkDispatcher.Update();
           seiCircus.Play();
        }
    }
} catch (Exception ex) {
      Debug.WriteLine(ex.Message);
} 
```

# c# - 如何加快 C# 数字代码

> ID：13843512
> 
> 赞同：1
> 
> 时间：2012-12-12T15:52:09.720
> 
> 标签：c#, complex-numbers, numerics

我有一个调用 Fortran DLL 进行数值计算的 C# 应用程序。已确定 DLL 调用至少比从 Fortran 控制台应用程序调用相同计算慢 10 倍，因此我已开始将代码移植到 C#。移植过程是逐行复制代码并修复语法。所以 C# 和 Fortran 看起来非常相似。Fortran 中的公共块成为类中的字段。在移植了一些核心例程后，我开始测试，发现双精度 C# 代码比双精度 Fortran 慢 30 倍（比单精度 Fortran 慢 50 倍）。我循环测试代码 100 倍，以最大限度地减少 C# JIT 编译器开销的影响。

该代码使用了复杂的算术和复杂的函数，例如 SQRT 和 LOG10。我提供了一个 C# 结构来处理该数学。我怀疑这就是问题所在，但是 VS2010 Pro 中似乎没有分析器，所以我不确定。

Fortran 编译器是 Intel 的最新版本。我没有对 C# 或 Fortran 代码进行任何特殊优化。我比较了使用发布版本的时间。我只有一个两核 CPU，所以并行化可能不会有太大帮助。

我可以使用一些关于如何加速此代码的建议。

这是我的一种方法。C# 看起来就像我没有编写的 Fortran。

```
 public void Forwx(double rshldr, double rbed, double[][] resdep, double[]toolparm)
    {
        var zex = new Complex[70];
        var zey = new Complex[70];

        var px2 = new Complex[70];
        var px4 = new Complex[70];

        var rlt = new double[2];
        var trsmt = new double[2];
        var fr = new double[2];
        var dnc = -0.02;
        var factr = 26332.65;

        var rh2 = Math.Max(0.1, rbed);
        var rh1 = Math.Max(0.1, rshldr);
        const double e1 = 1.0;
        const double e2 = 1.0;
        const double er = 0.818730753077982;
        const double re = 1.0 / er;
        var ii = Complex.I;
        const double pi = Math.PI;
        const double eps0 = 8.854e-12;
        const double amu0 = 4.0e-7 * pi;

        for (var ktool = 3; ktool <= 6; ktool++)
        {
            if (ktool == 3)            // Integrated 2MHz
            {
                dnc = -0.02;
                rlt[0] = 0.2794;
                rlt[1] = -0.2794;
                trsmt[0] = 0.904875;
                trsmt[1] = -0.904875;
                fr[0] = 2000.0;
                factr = 26332.65;
            }

            if (ktool == 4)         // Integrated 400kHz
            {
                dnc = -0.02;
                rlt[0] = 0.2794;
                rlt[1] = -0.2794;
                trsmt[0] = 0.904875;
                trsmt[1] = -0.904875;
                fr[0] = 400.0;
                factr = 26811.866;
            }

            if (ktool == 5)           // Option 5 20kHz
            {
                dnc = -0.1;
                rlt[0] = 0.0;
                rlt[1] = 0.0;
                trsmt[0] = 5.75;
                trsmt[1] = 5.75;
                fr[0] = 20.0;
                factr = 26811.866 * 2.516 * toolparm[1] / 0.28e8;
            }

            if (ktool == 6)         // Option 6 50kHz
            {
                dnc = -0.1;
                rlt[0] = 0.0;
                rlt[1] = 0.0;
                trsmt[0] = 5.75;
                trsmt[1] = 5.75;
                fr[0] = 50.0;
                factr = 26811.866 * 6.291 * toolparm[2] / 0.7e8;
            }

            var r1 = trsmt[0] - rlt[0];
            var r2 = trsmt[0] - rlt[1];
            var omega = 2000.0 * pi * fr[0];
            var k12 = omega*amu0*(omega*e1*eps0 + ii/rh1);
            var k22 = omega*amu0*(omega*e2*eps0 + ii/rh2);
            var krat = (k22 - k12)/k12;

            for (var iz = 0; iz < 601; iz++)
            {
                var recx1 = new Complex(0.0, 0.0);
                var rx1 = new Complex(0.0, 0.0);
                var recy1 = new Complex(0.0, 0.0);
                var ry1 = new Complex(0.0, 0.0);
                var lam = new Complex(3.01517934056e-04 / (Math.Pow(er, 5) * r1));
                Complex c1;
                Complex c2;
                for (var i = 0; i < 70; i++)
                {
                    if (iz == 0)
                    {
                        lam = lam * re;
                        var lam2 = lam * lam;
                        var p11 = lam2 - k12;
                        var p1 = Complex.Sqrt(p11);
                        var p22 = lam2 - k22;
                        var p2 = Complex.Sqrt(p22);
                        zex[i] = Complex.Exp(dnc * p2);
                        zey[i] = Complex.Exp(dnc * p1);
                        c1 = p2 * k12;
                        c2 = p1 * k22;
                        var t3 = lam / p2;
                        var t2 = t3 * (c1 - c2) / (c1 + c2);
                        var q2 = lam * krat * (t2 + t3) / (p1 + p2);
                        px2[i] = (lam2 * q2 + lam * p2 * t2);
                        px4[i] = px2[i];
                    }
                    else
                    {
                        px2[i] = px2[i] * zex[i];
                        px4[i] = px4[i] * zey[i];
                    }
                    recx1 = recx1 + a1[i] * px2[i];
                    recy1 = recy1 + a1[i] * px4[i];
                    rx1 = rx1 + px2[i] * as1i[i];
                    ry1 = ry1 + px4[i] * as1i[i];
                }
                if (ktool <= 4)
                {
                    c1 = recx1*r1;
                    c2 = rx1*r2;
                    c2 = c2 - Math.Pow(r1/r2,3)*c1;
                    resdep[12 - ktool][iz + 600] = c2.Re*factr;
                    c1 = recy1*r1;
                    c2 = ry1*r2;
                    c2 = c2 - Math.Pow(r1 / r2,3) * c1;
                    resdep[12 - ktool][600 - iz] = c2.Re*factr;
                }
                else
                {
                    c1 = recx1*r1;
                    //c2 = rx1*r2;
                    //c2 = c2 - Math.Pow(r1 / r2,3) * c1;
                    resdep[ktool + 5][iz + 600] = c1.Re * factr;
                    c1 = recy1*r1;
                    //c2 = ry1*r2;
                    //c2 = c2 - Math.Pow(r1 / r2,3) * c1;
                    resdep[ktool + 5][600 - iz] = c1.Re * factr;
                }
            }
        }
    } 
```

以下是复杂结构中的一些方法。

```
 public static Complex Sqrt(double x)
    {
        return x >= 0 ? new Complex(Math.Sqrt(x)) : new Complex(0, Math.Sqrt(-x));
    }

    public static Complex Exp(Complex z)
    {
        return new Complex(Math.Exp(z.Re) * Math.Cos(z.Im), Math.Exp(z.Re) * Math.Sin(z.Im));
    }

    public static Complex Log(Complex z)
    {
        return new Complex(Math.Log(Abs(z)), Arg(z));
    } 
```

这是复杂结构的一部分。

```
public struct Complex
{
    private readonly double _re;
    private readonly double _im;

    #region Properties

    public double Re
    {
        get { return _re; }
        //set { re = value; }
    }

    public double Im
    {
        get { return _im; }
        //set { im = value; }
    }

    public static Complex I
    {
        get { return new Complex(0.0, 1.0); }
    }

    public static Complex Zero
    {
        get { return new Complex(0.0, 0.0); }
    }

    public static Complex One
    {
        get { return new Complex(1.0, 0.0); }
    }

    #endregion

    #region constructors

    public Complex(double x)
    {
        _re = x;
        _im = 0.0;
    }

    public Complex(Complex z)
    {
        _re = z.Re;
        _im = z.Im;
    }

    public Complex(double x, double y)  //constructor
    {
        _re = x;
        _im = y;
    }

    #endregion
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T18:33:12.887

你应该尝试摆脱你的`Complex`结构，而不是使用[内置的](http://msdn.microsoft.com/en-us/library/system.numerics.complex.aspx)。它在`System.Numerics`命名空间中。您可能必须对代码进行查找和替换才能将内容替换`Complex.I`为`Complex.ImaginaryOne`，但这应该是一个相当简单的转换。

这样做有两个好处：

1）内置逻辑将比您可以编写的任何东西更好地优化（或者至少不会更糟）。
2) 它使可维护性更容易，因为它使用 .NET 标准，因此任何人都可以查看文档，以及任何可以在您的代码上工作的增强内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:57:35.800

我看到的最佳途径是使用 C++/CLI 和[AMP](http://msdn.microsoft.com/en-us/library/hh265137%28v=vs.110%29.aspx)来利用 GPU 进行繁重的计算。

但在您这样做之前，请确保性能问题与 DLL 有关，而不是与数据编组等有关...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T18:56:02.957

我用复数计算代替了双重运算来计时我的算法，并获得了 4 倍的速度提升。当然，答案是错误的，但是如果没有复杂运算符调用的开销，我没有代码的基线。如果我能弄清楚如何内联复杂数学，这应该与代码一样快。4 倍的因子仍然使代码比等效的 Fortran 慢得多。

所以最后的答案是做不到。对于时间很重要的严重数字运算，C# 没有提供答案。我相信必须坚持使用本机 Fortran 或 C++。

我感谢大家提供的关于提高 C# 数字速度的提示。

# android - 如何旋转android.graphics.Picture

> ID：13843516
> 
> 赞同：0
> 
> 时间：2012-12-12T15:52:18.333
> 
> 标签：android, graphics, image, screen-rotation

如何将 android.graphics.Picture 旋转 90 度？

*注意：不，它不是位图形式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:09:34.513

如果您要覆盖`onDraw()`，那么您可以执行以下操作：

```
canvas.save();
canvas.rotate(90f, picture.getWidth()/2, picture.getHeight/2);
canvas.drawPicture(picture);
canvas.restore(); 
```

如果您只想旋转图像本身，则可以使用此方法：

```
public Picture rotatePicture(float degrees, Picture picture) {
    int width = picture.getWidth();
    int height = picture.getHeight();

    Picture rotatedPicture = new Picture();
    Canvas canvas = rotatedPicture.beginRecording(width, height);
    canvas.save();
    canvas.rotate(degrees, width/2, height/2);
    picture.draw(canvas);
    canvas.restore();
    rotatedPicture.endRecording();

    return rotatedPicture;
} 
```

# c++ - 合并排序现在比现代机器上的快速排序更好吗？

> ID：13843525
> 
> 赞同：4
> 
> 时间：2012-12-12T15:52:30.330
> 
> 标签：c++, linux, windows, performance, optimization

现在，现代机器都是多核的，并且我们在带有 SSE 指令的 Windows 和 Linux 机器上支持 SIMD 指令，例如，我是否应该在我的 C/C++ 代码中切换到合并排序而忘记快速排序？从理论上讲，这样做的原因是合并排序会更好地并行化并更节省地使用内存/磁盘，因此比 QuickSort 的内存密集型操作更快，但我不知道。实践经验说明了什么？

我不想在每次排序时都进行分析和测试。我想使用一种标准方法。目前这种方法是快速排序，因为这是默认的库排序例程。我想知道是否还有其他人已经切换到 MergeSort 并通过切换获得了更好的结果。

更新 - - - - - -

Graham.Reeds 回答[std::sort 和 std::stable_sort 在实践中的性能差距有多大？](https://stackoverflow.com/questions/810951/how-big-is-the-performance-gap-between-stdsort-and-stdstable-sort-in-practic)表明我上面的猜测是正确的，切换到 MergeSort/stablesort 可能是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T00:01:01.997

在得到很多非答案后，我花了几个小时自己研究。这样做的结果是，是的，合并排序（和其他相关排序）由于内存使用较少以及更好的并行化/多核利用而将显着加快。此外，英特尔有一个标准的高性能库，称为 IPP，它为 x86 机器实现合并类型的排序。通过切换到这个库，对于我所做的编程类型，我似乎可以大大提高排序性能（和其他向量类型操作）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:57:26.470

我不认为有一个确定的答案。在某些情况下，可并行化的蛮力排序可能会更快。分析您的特定情况总是很重要的。还要考虑双调排序，例如，如果您有多个内核和 SIMD。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T16:13:43.323

> 我应该在我的 C/C++ 代码中切换到合并排序并忘记快速排序吗？

很抱歉这么说，但这个问题听起来像是过早优化的尝试。

> 从理论上讲，这样做的原因是合并排序会更好地并行化并更节省地使用内存/磁盘，因此比 QuickSort 的内存密集型操作更快，但我不知道。实践经验说明了什么？

实际上，您应该始终先进行分析，然后根据结果决定优化领域。

很可能您甚至不必更改您使用的排序算法，除非您在足够大的数据集上执行此操作以使结果很重要（或者在您的处理流程中足够关键的区域中）。

我通常使用 std::sort，如果这还不够（这还没有发生`std::sort`），我会优化我的应用程序流程和算法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T15:56:13.063

事实是您必须自己对其进行分析，并查看它对您的应用程序、数据、环境等的行为方式。本质上，这是对 SO 上 99% 的所有分析/性能/优化问题的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T17:34:53.060

有一些并行排序包可以根据处理器中的内核数量进行扩展，旨在利用/优化每个处理器上的处理。我知道 TBB（线程构建块）有一个 parallel_sort 函数，它是一个平均时间复杂度为 0(n log n) 的比较排序。

您还可以在快速排序中实现一些线程。在 TBB 中使用 parallel_for 可以轻松地将递归函数转换为并行性，或者您可以查看 Cilk Plus，网上有很多线程示例。

# perl - 防止用户修改 Perl 脚本

> ID：13843529
> 
> 赞同：1
> 
> 时间：2012-12-12T15:52:37.663
> 
> 标签：perl, security

我正在使用 Perl PAR 模块来打包我用 Perl 编写的应用程序。作为安全请求，我想阻止用户修改脚本。是否可以在 PAR 模块中执行此操作，或者是否有其他方法可以实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:58:59.343

好吧，显而易见的方法是修改脚本的安全性，只允许您想要（或某个组中）的用户写入权限。

在 Linux 中，您可以使用 chmod 755 [文件名]。这将赋予脚本所有者读取、写入和执行权限，以及其他所有人读取和执行权限（以便他们可以运行它）。如果您想要更具体的答案，请告诉我们您的确切目标是什么。是否只有特定的组也应该能够读取和执行此脚本？

# css - 过渡导致菜单跳转

> ID：13843531
> 
> 赞同：0
> 
> 时间：2012-12-12T15:52:44.287
> 
> 标签：css, css-transitions

我使用一些 jQuery 和 CSS（显然还有 HTML）创建了一个具有展开/折叠效果的菜单

我正在使用 CSS 进行过渡`max-height`（现在你可以用 CSS 做的事情真的令人难以置信）

无论如何，如果您单击父菜单项，它应该展开以显示它的子项，同时关闭任何其他展开的列表。这完美地工作，但是它会导致跳跃效果，它下面的元素会移动。

我不确定我是否解释得特别好，所以请看[我正在使用的代码的这个小提琴](http://jsfiddle.net/zR5aY/)（我会在这里粘贴代码，但有很多）

我在这里遗漏了一些明显的东西吗？有没有办法操纵 CSS，使其在展开/折叠时不会轻推下面的元素？还是我将不得不屈服并使用 jQuery 来实现这种效果？

**编辑：**如果不清楚我想要实现什么，请在[此处](http://www.marshandparsons.co.uk/services)查看右侧菜单，尝试扩展前两个元素，它不会将其他元素移出位置。

**EDIT2：**对于任何感兴趣的人，移位是通过该`max-height`值引起的，如果您将其设置为 100 进行演示，则菜单项不会移位，但是内容被切断并且最小高度较短意味着在未来变得相当繁重。

不幸的是，它看起来像将高度从 0 转换为 auto 这样简单的事情在 CSS 转换中是不必要的复杂！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:12:43.290

这是你所追求的吗？

$(文档).ready(函数() {

```
$('div.accordionButton').click(function() {
    $('div.accordionContent').slideUp('normal');    
    $(this).next().slideDown('normal');
});

$("div.accordionContent").hide(); 
```

});​</p>

[http://jsfiddle.net/ma9ic/zR5aY/2/](http://jsfiddle.net/ma9ic/zR5aY/2/)

# javascript - 用 jquery 1.8+ 绑定鼠标滚轮

> ID：13843533
> 
> 赞同：2
> 
> 时间：2012-12-12T15:52:47.457
> 
> 标签：javascript, jquery, html

我`Jquery 1.8.3`在我的网站上使用。

我无法用这个 jquery 版本绑定鼠标滚轮，但`1.4.2`版本是成功绑定鼠标滚轮。

请给我一个解决这个问题的方法？

*注意*：我需要只绑定`1.8+`版本的鼠标滚轮。因为其他插件依赖于`Jquery 1.8+`

我的示例代码是：

```
<!DOCTYPE html>
<html>
<head>
<title>Mouse Wheel</title>
<script type='text/javascript' src='http://code.jquery.com/jquery-1.4.2.js'></script>
<style type='text/css'>
body { text-align: center; }
#res
{
    margin-top: 200px;
    font-size: 128px;
    font-weight: bold;
}
</style>
<script type='text/javascript'>
$(document).ready(function(){
    var num = 0;
    $(document).bind('mousewheel',function(e){
        if (e.wheelDelta > 0)
        {
            $("#res").text(++num);
        }
        else
        {
            $("#res").text(--num);
        }
    });
});
</script>
</head>
<body>
<div id="res">0</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T15:59:17.053

这是您的代码的一个工作示例，只需添加鼠标滚轮 javascript 插件：[http ://brandonaaron.net/code/mousewheel/demos](http://brandonaaron.net/code/mousewheel/demos)

```
<!DOCTYPE html>
<html>
<head>
<title>Mouse Wheel</title>
<script type='text/javascript' src='http://code.jquery.com/jquery-1.8.3.min.js'></script>
<script type='text/javascript' src='http://flexicontent.googlecode.com/svn-history/r1517/trunk/com_flexicontent_v2.x/site/librairies/fancybox/lib/jquery.mousewheel-3.0.6.pack.js'></script>
<style type='text/css'>
body { text-align: center; }
#res
{
    margin-top: 200px;
    font-size: 128px;
    font-weight: bold;
}
</style>
<script type='text/javascript'>

jQuery(document).ready(function($){
    var num = 0;
    $(document).bind('mousewheel',function(e, delta){
        if (delta > 0)
        {
            $("#res").text(++num);
        }
        else
        {
            $("#res").text(--num);
        }
    });
});
</script>
</head>
<body>
<div id="res">0</div>
</body>
</html> 
```

# java - 如何使用 JODReports 根据数据为表格行着色？

> ID：13843535
> 
> 赞同：0
> 
> 时间：2012-12-12T15:52:48.003
> 
> 标签：java, templates, reporting, freemarker, odt

我正在使用[JODReports](http://jodreports.sourceforge.net/)从模板生成 ODT 文件。我想用数据填充表格，所以我使用了`JOOScript`Freemarker[指令](http://freemarker.sourceforge.net/)。现在我想根据我的数据有条件地格式化每一行：

```
@table:table-row
[#list rows as row]
[#if row.bar = "ipsum"]
    [#assign rowcolor="#0000AA"]
[#else]
    [#assign rowcolor="#000000"]
[/#if]

@/table:table-row
[/#list]

@#table:table-cell
<What_Should_I_Put_Here_To_Color_The_Cell_Background_With_rowcolor?> 
```

如您所见，如果`row.bar == "ipsum"`我希望整*行都*以`#0000AA`. 您知道实现这一目标的方法（或可接受的解决方法）吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:07:19.767

我们通常在部分中创建表（比如名为 MyStyleTable）并将其隐藏。我们对该表所做的是设置它的属性，例如为每个单元格设置背景颜色，比如 A1 红色、B1 绿色。然后将适当的 MyStyleTable 单元格分配给您的表格（有数据的那个）单元格属性：

```
@table:table-row
[#if row.bar = "ipsum"]
    [#assign rowcolor='MyStyleTable.A1']
[#else]
    [#assign rowcolor='MyStyleTable.B1']
[/#if]
@/table:table-row

@#table:table-cell 
table:style-name=${rowcolor} 
```

我相信我已经读过有一种方法可以从 contex.xml 导出样式，然后将样式分配给任何表格或单元格，但我还没有尝试过。

# javascript - 自动化父层次结构

> ID：13843548
> 
> 赞同：0
> 
> 时间：2012-12-12T15:53:33.653
> 
> 标签：javascript, jquery, asp.net, dom, loops

```
var classFind= $('.frame').parent().parent().parent().parent().parent();
if (classfind.hasClass(".class")) {
            return true;
        } 
```

我有一个根据此路径定位的类^...我如何循环通过 dom 以更好的代码可读性自动执行此过程？如果它在命中 null 之前没有找到 .hasclass，那么只需返回 false。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:55:10.673

你不能把这个换成...

```
return !!$('.frame').closest('.class').length; 
```

这些`closest`方法沿着 DOM 树向上移动，直到找到与作为其参数给出的选择器匹配的元素 - 然后立即停止；如果没有找到这样的元素，它将返回空的元素集合（它仍然是一个对象，因此应该检查它的长度）。与call`!!`相同`Boolean()`- 它不是必需的，但会使您的函数返回布尔值 ( `true/false`) 而不是`0/1`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:55:47.663

你可以尝试这样的事情： var classFind= $('.frame').closest(".class");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T16:10:54.427

使用最接近的功能，您不会得到确切的 5 个父母，如果这是您想要的...

该选择器将执行此操作。

```
function findEl() {
    if($('.class > * > * > * > * > .frame').length > 0) {
        return true;
    }
    return false;
} 
```

测试它：http: [//jsfiddle.net/S5juG/1/](http://jsfiddle.net/S5juG/1/)

看看子选择器： [http ://api.jquery.com/child-selector/](http://api.jquery.com/child-selector/)

# vb.net - 如何在终端服务服务器（Windows 2008 Server）上运行的 VB.NET 中声明变量？

> ID：13843549
> 
> 赞同：1
> 
> 时间：2012-12-12T15:53:37.467
> 
> 标签：vb.net, terminal-services

我有一个在终端服务器（Windows 2008 Server）上运行的 VB.NET 应用程序。

在我使用的登录表单中：

公共 bGrantAccess 作为布尔值 = False

如果变量在验证后设置为 true，这将发生在所有终端服务器用户身上，而不仅仅是特定用户。这意味着当用户 A 已登录并且用户 B、C、D 等自动登录时。

在终端服务器上运行应用程序时应该如何声明变量，以便它们是用户特定的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:57:25.700

您需要使用具有唯一值的会话来分隔用户。

# spring - Spring 3.0 文件上传

> ID：13843554
> 
> 赞同：0
> 
> 时间：2012-12-12T15:53:41.840
> 
> 标签：spring, servlets

提交表单后，任何人都可以发现为什么文件（Http.Part）变量为空？

控制器代码

```
@RequestMapping(value="/account/update", method=RequestMethod.POST)
public String addImage(Account account, BindingResult bindingResult, Model uiModel, HttpServletRequest httpServletRequest, RedirectAttributes redirectAttributes, 
        Locale locale,HttpServletRequest request, @RequestParam(value="file", required=false) Part file){

        if(file==null){
            uiModel.addAttribute("file_error", "File upload failure");

        } 
```

看法

```
 <spring:url value="/account/update" var="update" />
<form:form modelAttribute="account" action="${update}" method="POST" enctype="multipart/form-data"  >
<c:if test="${file_error != null}">
Errors: ${file_error }
</c:if><br />
<label for="file">
    <spring:message code="account.upload.file"/>
</label>
        <input name="file" type="file"/>
        <input type="submit" value="Save" /> 
</form:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:12:00.860

你加了一个`multipartResolver`吗？

```
<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver"> 
   <property name="maxUploadSize" value="100000"/>
</bean> 
```

# ckeditor - CK 编辑器不显示 youtube

> ID：13843559
> 
> 赞同：0
> 
> 时间：2012-12-12T15:53:56.757
> 
> 标签：ckeditor

我已经建立了网站并添加了 Ckeditor，在 HTml 模式下我添加了以下代码：

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/pe3DH-_uapU" frameborder="0" allowfullscreen></iframe> 
```

但它在所有浏览器中都显示为空框

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:11:39.917

在 CKEditor 的新版本中，您可以在编辑器中播放 YouTube 视频

我试过你的代码及其工作

从这里下载

[http://ckeditor.com/download](http://ckeditor.com/download)

# sql - SQL - 删除重复项以显示最新的日期记录

> ID：13843562
> 
> 赞同：4
> 
> 时间：2012-12-12T15:54:07.007
> 
> 标签：sql, tsql, sql-server-2008-r2

我有一个观点，最终我想为每个客户返回 1 行。

目前它的选择如下；

```
SELECT 
    Customerid,
    MAX(purchasedate) AS purchasedate,
    paymenttype,
    delivery,
    amount,
    discountrate 
FROM    
    Customer 
GROUP BY
    Customerid,
    paymenttype,
    delivery,
    amount,
    discountrate 
```

我希望 MAX(purchasedate) 可以工作，但是当我进行分组时，它会中断，因为有时可能会有折扣，有时它是 NULL，每个客户的付款类型也可能不同，是否只是为了显示客户的最后一次购买?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T15:56:52.657

由于`SQL Server 2008 r2`支持windows功能，

```
SELECT  Customerid,
        purchasedate,
        paymenttype,
        delivery,
        amount,
        discountrate
FROM    
    (
        SELECT  Customerid,
                purchasedate,
                paymenttype,
                delivery,
                amount,
                discountrate,
                ROW_NUMBER() OVER (Partition By CustomerID
                                    ORDER BY purchasedate DESC) rn
        FROM    Customer
    ) derivedTable
WHERE   derivedTable.rn = 1 
```

或通过使用`Common Table Expression`

```
WITH derivedTable
AS
(
    SELECT  Customerid,
            purchasedate,
            paymenttype,
            delivery,
            amount,
            discountrate,
            ROW_NUMBER() OVER (Partition By CustomerID
                                ORDER BY purchasedate DESC) rn
    FROM    Customer
)
SELECT  Customerid,
        purchasedate,
        paymenttype,
        delivery,
        amount,
        discountrate
FROM    derivedTable
WHERE   derivedTable.rn = 1 
```

或者通过在其他 DBMS 中使用子查询的连接

```
SELECT  a.*
FROM    Customer a
        INNER JOIN
        (
            SELECT  CustomerID, MAX(purchasedate) maxDate
            FROM    Customer
            GROUP BY CustomerID
        ) b ON  a.CustomerID = b.CustomerID AND
                a.purchasedate = b.maxDate 
```

# jquery - 返回浏览器时打开jQuery blockUI对话框

> ID：13843564
> 
> 赞同：1
> 
> 时间：2012-12-12T15:54:10.813
> 
> 标签：jquery, asp.net, blockui, jquery-blockui

我有一个 jquery 对话框，当我打开和关闭它时，转到另一个页面，然后使用浏览器返回按钮返回，对话框再次显示。这发生在 Chrome 和 IE 中，而不是 Firefox 中。我可以对对话框进行哪些修改？谢谢！

```
<td class ="approval-img"><asp:ImageButton runat="server" CommandArgument = '<%# Eval("aux_approvalId")%>'  OnClick="getApprovalID_approve" ToolTip="Approve" ImageUrl="/Images/Approve.png" /></td>

 protected void getApprovalID_approve(object sender, EventArgs e)
    {   .....
        string script = "OpenApprovalDialog();";
        Page.ClientScript.RegisterStartupScript(typeof(Page), "", script, true);
    } 
```

这些是打开/关闭对话框的功能：

```
function OpenApprovalDialog() {
    $.blockUI({ message: $('#approval-form'), baseZ: 10000 });
    $('#approval-form').parent().appendTo($("form:first"));
    return false;
};
$('#btnCancelApprove').click(function () {
        $.unblockUI();
        $("#approval-form").parent().detach();
        return false;
    }); 
```

以及打开的对话框：

```
<div id="approval-form" style="display: none; cursor: default" title="Approve">
   <div class="approve-change">
 <ul>
    <li>
      <p><label>Approve change:  </label><label>Reason</label></p>
      <textarea id="txtReasonApprove" runat="server" cols="1" rows="1" class="required"></textarea><br />
    </li>
    <li>
      <span>
        <button id="btnCancelApprove" class="blue-problem">Cancel</button>
        <asp:Button ID="btnApprove" runat="server" CssClass="blue-problem" Text="Approve" ToolTip = "Approve"  OnClick="ApproveChange_Click"/>
      </span>
   </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-08-15T18:25:31.800

在离开页面之前设置此脚本。

```
 <script>
    window.onbeforeunload = function (e) {
        $.unblockUI();
    };
</script> 
```

# c# - 使用现有的列名

> ID：13843568
> 
> 赞同：1
> 
> 时间：2012-12-12T15:54:23.667
> 
> 标签：c#, .net, datagridview

我有一个 C# 中的 Windows 窗体应用程序（可安装 PC）。我用表单设计器创建了一个 DataGridView，并在运行时将一个 DataTable 绑定到它。DataTable 由 SQL 调用填充。

DataGridView 列已在设计时被赋予了我想要保留的特定 HeaderText 值。例如，“确认号”是我的列标题之一。此外，每列的 Name 属性已设置为与 SQL 调用返回的值相匹配。因此，例如，我的“确认编号”列具有“vchReturnReceipt”的名称属性，因为这是 SQL 返回的列名称。

数据从 SQL 返回，它被绑定到 DataViewGrid，它正在显示，但是网格正在为所有返回的数据创建新列，而不是使用预定义的列（预定义的列仍然存在，并在它们的右侧添加新列）。例如，创建了一个名为“vchReturnReceipt”的新列，其中包含我想要在“确认编号”列中显示的值。

如何在现有列中显示数据，并防止新列出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T08:56:17.753

在绑定数据之前做两件事：

为预定义列定义`.DataPropertyName`具有数据库列名称的属性（在设计器中从 Datagridview 选项打开“编辑列”）

然后设置`.AutoGenerateColumns = False`

在此绑定数据将基于`.DatPropertyName`列名之后

# java - 将数组列表添加到会话

> ID：13843573
> 
> 赞同：1
> 
> 时间：2012-12-12T15:54:50.320
> 
> 标签：java, struts2

我试图在会话中存储一个数组列表，如下所示：

```
private Map session = ActionContext.getContext().getSession(); 
```

数组列表如下所示：

```
private ArrayList<Integer> numbersEntered = new ArrayList<Integer>(); 
```

如果数组列表在会话中尚不存在，则会添加它，但我在将新数据添加到数组列表并使用该数据更新会话时遇到问题。所以 - 我的问题是如何获取会话中已经存在的内容，临时存储它，根据用户输入添加到它并重新添加到会话中？

```
if ( !session.containsKey(arrayListID) ) 
{
// Place the number the user entered into the session
session.put(arrayListID, numbersEntered);
} else {

// Retrieve session data
 } 
```

我检索了最初存储的内容并将其放在一个字符串中，但因为它是一个数组列表，所以它的存储方式如下：[12]。我不想转换它或拆分字符串...如果您需要更多信息，请告诉我。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:00:48.923

```
if ( !session.containsKey(arrayListID) ) 
{
// Place the number the user entered into the session
session.put(arrayListID, numbersEntered);
} else {
    ArrayList<Integer> list = (ArrayList<Integer>) session.get(arrayListID);
     list.add( 1 /* what you want */);
// Retrieve session data
 } 
```

# ruby - Ruby Regex 替换两个数字之间的字符

> ID：13843574
> 
> 赞同：3
> 
> 时间：2012-12-12T15:54:51.567
> 
> 标签：ruby, regex

我试图编写一个删除下划线的字符串清理器，但在数字之间（即，当字符串中有版本号时）用点替换它们。

```
 1_1_OS_And_Network_Specific_Config 
```

我希望这个字符串像

```
 1.1 OS And Network Specific Config 
```

我可以很容易地替换下划线，但我无法匹配数字之间的字符以替换为点。

```
\d_\d 
```

似乎将两个数字与下划线匹配.. 但如果有三个，比如 3.4.1 它不会。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T15:59:50.053

首先，替换数字之间的下划线：

```
subject = subject.gsub(/(?<=\d)_(?=\d)/, '.') 
```

`(?<=\d)`并且`(?=\d)`是[环视断言](http://www.regular-expressions.info/lookaround.html)。

他们确保在 ( ) 之前`(?<=\d)`和 ( `(?=\d)`) 当前位置之后有一个数字，但它们实际上并没有成为匹配的一部分。

然后，删除其余的下划线：

```
subject = subject.gsub(/_/, ' ') 
```

# javascript - javascript 以一致的方式显示“您确定要从此页面导航”

> ID：13843576
> 
> 赞同：0
> 
> 时间：2012-12-12T15:54:53.750
> 
> 标签：javascript, jquery, onbeforeunload

当用户尝试从页面导航时，我需要显示警告消息（“您确定要从此页面导航”）。我使用：window.beforeunload 事件得到了这个工作。

```
var warning = true;
$(window).bind('beforeunload', function (event) {
   if ((warning)) {
        return "You will lose your unsaved changes";
   }
 }); 
```

我遇到的问题是，我在这个页面中有几个链接会导致 ajax 调用——这不会导致“window.beforeunload”被触发。问题是：当我们单击这些链接时，如何以相同的方式显示消息。我确实尝试过使用“确认”对话框 - 它可以工作，但消息出现在对话框窗口中，而不是像第一种情况那样出现在本机浏览器中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:03:01.510

```
$(document).ready(function() {
   var warning = true;

    var showWarning = function (event) {
       if ((warning)) {
            var message = "You will lose your unsaved changes";

            if (event.currentTarget.tagName != "A") {
                return message;
            }

            var conf = confirm(message);

            if (!conf) { //If clicked no prevent click
                event.preventDefault();
                return false;
            }
       }
     };

    $(window).bind('beforeunload', showWarning);
    $("a.ajax").click(showWarning); 
}); 
```

​</p>

只需像这样为您的 Ajax-links 类 ajax 提供：

```
<a href="#" class="ajax">Ajax action</a> 
```

**编辑：忘记了一些东西，它现在可以工作了！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:01:39.990

我认为这是一种与当您进入具有相关媒体或 iframe 的 https 网站时出现的警告消息有关的问题...

# encoding - 带有特殊字符的 QString 编码

> ID：13843580
> 
> 赞同：0
> 
> 时间：2012-12-12T15:55:00.453
> 
> 标签：encoding, utf, qstring

我正在尝试将带有特殊字符的 QString 转换为 const char 但我没有成功。我的功能是：

```
void class::func(const QString& fileName) // fileName = "â.tmp" 
{ 
  qDebug()<< fileName; // display "â.tmp"
  const char* cfileName = fileName.toAscii().data();
  qDebug() << cfileName;  // display "a?.tmp" 
} 
```

qDebug()<< fileName 显示真正的值，即“â.tmp”，但在将其转换为 const a char* 后，我没有成功获得正确的值。

在第二次我尝试使用

```
const char* cfileName = QString::fromUtf8(fileName.toAscii().data()); 
```

但我仍然没有正确的值，它显示相同的东西：`a?.tmp`.

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:57:26.850

`ASCII`character set 没有 character `â`，所以你想要做的事情是不可能的。

你可以试试这个：

```
const char* cfileName = = fileName.toUtf8().data(); 
```

# c++ - 编译错误相关的提升

> ID：13843582
> 
> 赞同：1
> 
> 时间：2012-12-12T15:55:07.583
> 
> 标签：c++, eclipse, boost, compiler-errors

当我使用 boost 1.52.1 和 gcc-4.7.1 编译我的代码时，出现以下错误。这似乎是 boost 和 c++ 库之间的冲突。有人知道如何解决这个问题吗？

非常感谢您的回复。

```
c:\program files\mingw64\bin\../lib/gcc/x86_64-w64- 
mingw32/4.7.1/../../../../include/boost/math/policies
/error_handling.hpp: In function 'bool    boost::math::policies::
detail::check_overflow(std::complex<T>, 
R*, const char*, const Policy&)':c:\program    
files\mingw64\bin\../lib/gcc/x86_64-w64 mingw32/4.7.1
/../../../../include/boost/math/policies/error_handling.hpp:583:11: 
error: expected unqualified-id before numeric constant
c:\program files\mingw64\bin\../lib/gcc/x86_64-w64-mingw32
/4.7.1/../../../../include/boost/math/policies/error_handling.hpp:
584:49: error: lvalue required as unary '&' operand
 c:\program files\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.1/
 ../../../../include/boost/math/policies/
 error_handling.hpp:584:107: error: 'im' was not declared in this
 scope c:\program files\mingw64\bin\../lib/gcc/x86_64-w64-mingw32
 /4.7.1/../../../../include/boost/math/policies/error_handling.
 hpp: In function 'bool boost::math::policies::detail::
 check_underflow(std::complex<T>, R*, const char*, const Policy&)':
 c:\program files\mingw64\bin\../lib/gcc/x86_64-w64-  mingw32
 /4.7.1/../../../../include/boost/math/policies
 /error_handling.hpp:602:11: error: expected unqualified-id before       
 numeric constant c:\program files\mingw64\bin\../lib/gcc/
 x86_64-w64 mingw32/4.7.1/../../../../include/boost/math/policies
 /error_handling.hpp:603:50: error: lvalue required as 
 unary '&' operand c:\program files\mingw64\bin\../lib/gcc/
 x86_64-w64 mingw32/4.7.1/../../../../include/boost/math/policies
 /error_handling .hpp:603:109: error: 'im' was not declared in 
 this scope c:\program files\mingw64\bin\../lib/gcc
 /x86_64-w64-mingw32/4.7.1/../../../../include/boost/math/policies/
 error_handling.hpp: In function 'bool boost::math::policies::
 detail::check_denorm(std::complex<T>, R*, const char*, 
  const Policy&)':c:\program files\mingw64\bin\../lib/gcc
 /x86_64-w64-mingw32/4.7.1/../../../../include/boost/
 math/policies/error_handling.hpp:622:11: error: expected 
 unqualified-id before numeric constant
 c:\program files\mingw64\bin\../lib/gcc/x86_64-w64-
 mingw32/4.7.1/../../../../include/boost/math/policies/
 error_handling.hpp:623:47: error: lvalue required as 
 unary '&' operand
 c:\program files\mingw64\bin\../lib/gcc/x86_64-w64-
 mingw32/4.7.1/../../../../include/boost/math/policies/
 error_handling.hpp:623:103: error: 'im' was not declared
 in this scope 
```

错误出现在代码 boost\math\policy\error_handling.hpp 中。但我不确定程序何时引用这些函数。这个错误是怎么发生的？

```
template <class R, class T, class Policy>
inline bool check_overflow(std::complex<T> val, R* result, const
char* function, const Policy& pol)
{
    typedef typename R::value_type r_type;
    r_type re, im;
    bool r = check_overflow<r_type>(val.real(), &re, function, pol) || check_overflow<r_type>(val.imag(), &im, function, pol);
    *result = R(re, im);
    return r;
}

 template <class R, class T, class Policy>
 inline bool check_underflow(std::complex<T> val, R* result, const char* function, const Policy& pol)
{
     typedef typename R::value_type r_type;
     r_type re, im;
     bool r = check_underflow<r_type>(val.real(), &re, function, pol) || check_underflow<r_type>(val.imag(), &im, function, pol);
     *result = R(re, im);
     return r;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T07:31:13.433

鉴于这两个函数和这个嘈杂的错误消息，我可以说用作参数 R 的类型没有定义`value_type`。因此，类型`r_type`和变量`im`并`re`没有定义。结果你得到`error: 'im' was not declared in this scope`错误。

仅使用提供的代码，我可以看到类型 R 具有以下要求：

*   它必须定义类型`value_type`
*   它必须有构造函数`R(value_type real, value_type imagine)`

所有这一切意味着你使用了一些不正确地使用内部 check_underflow/check_overflow 函数的 boost 库，我猜是模板参数不兼容。

# r - 使用 R 选择矩阵中的唯一行

> ID：13843586
> 
> 赞同：2
> 
> 时间：2012-12-12T15:55:18.587
> 
> 标签：r

> **可能重复：**
> [仅选择 R 中列的每个唯一值的第一行](https://stackoverflow.com/questions/13279582/select-only-the-first-rows-for-each-unique-value-of-a-column-in-r)

我有以下形式的矩阵：

```
col1 col2

1    2   
1    2    
1    2   
1    2   
1    2
2    5
2    5
2    5
3    7
3    7
3    7
3    7
3    7
3    7
3    7
3    7
4    2 
4    2 
4    2 
```

我想选择基于“col1”的所有唯一行。

在这种情况下，它将是 col1 中每个唯一值的第一行：

子集：

```
col1   col2
1      2 
2      5
3      7
4      2 
```

这是我尝试过的：

```
https://dl.dropbox.com/u/22681355/matrix.csv
mat<-read.csv("matrix.csv")
sub<-unique(mat$V1)
subset(mat, mat==c(sub) 
```

它吐出的东西比我预期的要多得多，我收到以下错误消息：

警告消息：在 contacts$V1 == c(g) 中：较长的对象长度不是较短对象长度的倍数

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-12T16:00:26.877

您可以使用以下[`unique`](http://stat.ethz.ch/R-manual/R-devel/library/base/html/unique.html)功能：

```
unique(mat$V1) # and not matrix$v1
[1]   44  281 1312 
```

你也可以写

```
unique(mat) 
```

它会给你独特的线条（我在你的文件上试过）。

如果要选择`V1`s 值，可以这样做：

```
> mat[!duplicated(mat$V1), ]
       X   V1 V2 V3 V4  V5 V6 V7 V8 V9 V10
1   1547   44 14  1  2 100 17  0  0  0   0
23  5385  281 67  2 10 100 10  0  0  0   0
33 17347 1312  1  2  6 100  8  0  0  0   0 
```

# javascript - hta/ javascript 如何使用相对路径执行应用程序

> ID：13843590
> 
> 赞同：2
> 
> 时间：2012-12-12T15:55:35.913
> 
> 标签：javascript, html, wsh, hta

我正在构建一个 .hta（使用 javascript），我想从中启动几个应用程序。

但是当我执行我的 .hta 时，我收到错误消息找不到文件

这是代码：

```
<script type="text/javascript" language="javascript">
    function RunFile(path) {
    var relpath = window.location.href;
    var fullpath = relpath + path;

    WshShell = new ActiveXObject("WScript.Shell");
    WshShell.Run(fullpath, 1, false);
    }

    RunFile("\file.exe");
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T16:26:45.193

`window.location.href`也包括文件名和协议。试试这个：

```
var relpath = window.location.pathname.replace(/\\/g,'/').split('/');
relpath.pop();// JScript: relpath.length = relpath.length - 1;
relpath = relpath.join('/') + '/'; 
```

注意使用了`/`instead ，最后使用`\`也很方便，所以你不需要将它添加到函数参数中。`relpath``/`

**编辑**

我不确定你在没有文件的情况下获取位置是什么意思，也许是这个（来自 Windows Sripting Technologies 的引文（不幸的是现在坏了）：

```
"The CurrentDirectory returns a string that contains the fully qualified path of
the current working directory of the active process." 
```

活动进程是例如正在运行的 HTA，因此这将给出 HTA 文件的本地路径（没有文件名）。

`currentDirectory`是 的属性`WScript.Shell`，因此您可以在代码中使用它`WshShell`，也可以设置工作目录。

# postgresql - 在 maven 存储库中哪里可以找到 PostGresql 9.2 JDBC 4 驱动程序？

> ID：13843594
> 
> 赞同：21
> 
> 时间：2012-12-12T15:55:48.773
> 
> 标签：postgresql, maven, jdbc

查看 maven 中央存储库，可用于 PostGresql 的最新 jdbc4 驱动程序只有 9.1 驱动程序

[http://mvnrepository.com/artifact/postgresql/postgresql/9.1-901.jdbc4](http://mvnrepository.com/artifact/postgresql/postgresql/9.1-901.jdbc4)

[http://jdbc.postgresql.org/download.html](http://jdbc.postgresql.org/download.html)上有一个名为“postgresql-9.2-1002.jdbc4.jar”的新文件，但它尚未发布到 Maven 中心。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-06-12T07:25:31.307

似乎 PostgreSQL 已将它们更新`groupId`为`org.postgresql`而不是`postgresql`.

所以现在可以直接使用 maven ( [mvnrepository.com](http://mvnrepository.com/artifact/org.postgresql/postgresql) )：

```
<dependency>
    <groupId>org.postgresql</groupId>
    <artifactId>postgresql</artifactId>
    <version>9.2-1002-jdbc4</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-09T22:58:40.370

以下依赖项描述对我有用：

```
<dependency>
    <groupId>org.postgresql</groupId>
    <artifactId>postgresql</artifactId>
    <version>9.2-1002-jdbc4</version>
</dependency> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-01T03:12:43.120

**（这个答案现在已经过时了；罐子已经在 groupid 下发布到 maven `org.postgresql`。有关详细信息，请参阅更多最近的答案。）**

您只需将驱动程序安装到本地`~/.m2`存储库即可。请参阅[Maven 文档](http://maven.apache.org/guides/mini/guide-3rd-party-jars-local.html)和[这个问题](https://stackoverflow.com/questions/442230/how-to-manually-install-an-artifact-in-maven-2)。

```
mvn install:install-file \
  -DgroupId=postgresql \
  -DartifactId=postgresql \
  -Dpackaging=jar \
  -Dversion=9.2-1002.jdbc4 \
  -Dfile=postgresql-9.2-1002.jdbc4.jar \
  -DgeneratePom=true 
```

或者，如果您使用[Sonatype Nexus](http://www.sonatype.org/nexus/)来管理存储库和缓存（我强烈推荐），那么您可以将 jar 添加到 Nexus 实例中本地维护的存储库中。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-27T10:37:10.260

您可以使用 TypeSafe 存储库，它包含 9.2 驱动程序。利用：

```
 <repository>
      <id>typesafe</id>
      <url>http://repo.typesafe.com/typesafe/repo/</url>
    </repository> 
```

我希望 9.2 驱动程序很快就会出现在中央存储库上，请查看[https://github.com/pgjdbc/pgjdbc/issues/46](https://github.com/pgjdbc/pgjdbc/issues/46)了解进度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T22:55:18.280

我将 9.2-1002 驱动程序添加到我自己由 Google Code 托管的糟糕 Maven 存储库中（当我创建它时，github 很久以前并不流行）。

```
 <repository>
        <id>mvn-adamgent</id>
        <url>http://mvn-adamgent.googlecode.com/svn/maven/release</url>
        <name>Adam Gent Maven Repository</name>
    </repository> 
```

我试图去修复 postgres 构建来构建我的 JDBC3 驱动程序，但我认为你必须安装一个较旧的 JDK 才能使其正常工作，所以我只是从以下位置获取 jar：http: [//jdbc.postgresql.org/download.html](http://jdbc.postgresql.org/download.html)

```
 <dependency>
        <groupId>postgresql</groupId>
        <artifactId>postgresql</artifactId>
        <version>9.2-1002.jdbc4</version>
    </dependency> 
```

我还包含了一个源 jar（因此 Maven 会自动为您下载源），但我没有制作 Javadoc 或 JDBC3 jar。

如果我只知道如何正确制作 JDBC3 jar，我可以在[我的 github fork](https://github.com/snaphop/pgjdbc)上对他们的构建文件 (@Craig Ringer) 进行更改。

# php - PHP Count 文件和在 Mootools 中的使用

> ID：13843600
> 
> 赞同：0
> 
> 时间：2012-12-12T15:56:15.980
> 
> 标签：php, variables, count

您好，我想使用此 php 代码来计算 dic 中的 jpg 文件。

```
$directory = "../images/team/harry/";
if (glob($directory . "*.jpg") != false)
{
 $filecount = count(glob($directory . "*.jpg"));
 echo $filecount;
}
else
{
 echo 0;
} 
```

我现在如何在我的 mootool 脚本中使用 $filecount？最好的问候马蒂亚斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:01:38.807

您只需将 $filecount 作为内联 javascript 回显，或者您可以通过 Ajax 请求结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:03:11.013

PHP 是一种服务器端语言。Mootools 是 JavaScript，对吧？

[http://mootools.net/docs/core/Request/Request](http://mootools.net/docs/core/Request/Request)

```
var myRequest = new Request({
    url: 'http://yourserver.com/jpgs.php',
    onSuccess: function(res, xml){
        console.log(res);
    }
});

myRequest.send(); 
```

# c# - 以编程方式调用 DockPanel-Suite 的“AutoHidden”DockContent

> ID：13843604
> 
> 赞同：3
> 
> 时间：2012-12-12T15:56:24.887
> 
> 标签：c#, winforms, dockpanel-suite

我无法让“自动隐藏”停靠栏以编程方式出现。

在网上找不到任何答案，尽管下面的[SO Question](https://stackoverflow.com/questions/12956147/dockpanel-suite-dockcontent-visibility)建议`.Show()`应该可以解决问题

我已经在最新的[NuGet 版本](https://nuget.org/packages/DockPanelSuite)的代码上尝试过这个。

我的测试代码如下。

有人知道该怎么做吗？或者我做错了什么？

**更新：**显然这是 2.7.0 中的一个错误，我已经为该项目打开了一个[问题。](https://github.com/dockpanelsuite/dockpanelsuite/issues/80)@roken 的回答是一个很好的解决方法，所以我更新了下面的代码以反映它。

* * *

## 我的测试代码

创建一个简单的 Visual Studio Windows 窗体应用程序，并将主窗体的源文件内容替换为以下代码：

```
using System;
using System.Windows.Forms;
using dps = WeifenLuo.WinFormsUI.Docking;

namespace testDockPanel
{
    public partial class Form1 : Form
    {
        private dps.DockPanel dockPanel;
        private dps.DockContent dc;
        private Control innerCtrl;

        public Form1()
        {
            InitializeComponent();

            dockPanel = new dps.DockPanel();
            dockPanel.Dock = DockStyle.Fill;
            dockPanel.DocumentStyle = dps.DocumentStyle.DockingWindow;

            toolStripContainer1.ContentPanel.Controls.Add(dockPanel);

            dc = new dps.DockContent();
            dc.DockPanel = dockPanel;
            dc.DockState = dps.DockState.DockRightAutoHide;
            innerCtrl = new WebBrowser() { Dock = DockStyle.Fill };
            dc.Controls.Add( innerCtrl ); 
```

这是代码中不起作用的部分：

```
 // This SHOULD show the autohide-dock, but NOTHING happens.
            dc.Show(); 
```

我已经用@roken 的建议替换了它，现在它可以工作了：

```
 dockPanel.ActiveAutoHideContent = dc;
            innerCtrl.Focus(); // This is required otherwise it will autohide quickly.

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T17:02:44.293

要显示隐藏的自动隐藏内容，您可以直接设置活动的自动内容：

```
dockPanel.ActiveAutoHideContent = dc; 
```

我不清楚无法通过激活内容`Show()`是否是已引入的错误。如果您有空闲时间，您可以尝试运行您提供的针对[2.5.0](https://github.com/dockpanelsuite/dockpanelsuite/downloads)版本的代码，以查看 Show() 是否像您期望的那样激活内容？

# java - 在我的布局中获取两个 50/50 宽度的按钮

> ID：13843609
> 
> 赞同：0
> 
> 时间：2012-12-12T15:56:48.723
> 
> 标签：java, android, layout

我有一个如下所示的布局。但理想情况下，我希望按钮 Save 和 Cancel 各有 50% 的宽度，彼此相邻。似乎不能让他们工作。

有什么建议么？

![在此处输入图像描述](../Images/75ea4787788e54b67043da463c45f158.png)

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/btnMinus"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="-" />

    <EditText
        android:id="@+id/txtCount"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/btnPlus"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@+id/btnPlus"
        android:layout_toRightOf="@+id/btnMinus"
        android:ems="10"
        android:inputType="number" >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/btnPlus"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="+" />

    <Button
        android:id="@+id/btnGo"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/btnMinus"
        android:layout_toRightOf="@+id/button1"
        android:maxWidth="100dp"
        android:text="Save"
        android:width="100dp" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/btnMinus"
        android:text="Cancel" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T16:01:42.627

您不应该将 a`RelativeLayout`用于此设计。您应该使用`LinearLayout`.

像这样的大纲（非常精简）：

```
<LinearLayout android:orientation=vertical>
    <LinearLayout android:orientation=horizontal>
        <Button android:layout_width=100 /> <!-- Minus -->
        <EditText android:layout_width=0 android:layout_weight=1 />
        <Button android:layout_width=100 /> <!-- Plus -->
    </LinearLayout>
    <LinearLayout android:orientation=horizontal>
        <Button android:layout_width=0 android:layout_weight=1 /> <!-- Cancel -->
        <Button android:layout_width=0 android:layout_weight=1 /> <!-- Save -->
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:59:03.577

您正在寻找`android:layout_weight="0.5"`. 不过，这只适用于 LinearLayouts。

所以你可以做的是添加一个包含两个按钮的 LinearLayout 然后设置权重。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T16:19:52.157

您应该在`LinearLayout`, 内使用 a ，`RelativeLayout`仅用于按钮，并给它们相同的值`android:layout_weight`（1 和 1、2 和 2，如您所愿）。

# javascript - CSS 中的 jquery.height() 和 float 参数

> ID：13843611
> 
> 赞同：8
> 
> 时间：2012-12-12T15:56:53.987
> 
> 标签：javascript, css, html

我注意到一个奇怪的`jquery.height()`函数行为。看看下面的代码。

CSS：

```
div.text-field {
    font-family: sans-serif;
    margin: 3px;
    float: left;
} 
```

HTML：

```
<div id="someid">
  <div class="text-holder">
    <div class="text-field">text here</div>
  </div>
</div> 
```

JS：

```
console.log($("someid").find("text-holder").height()); 
```

`0`如果我`float: left;`在 CSS 文件中，最后一行输出，如果我删除，则输出实际高度`float: left;`。这种行为的原因是什么？我可以将`height()`函数与 一起使用`float: left;`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T16:06:51.290

当`float`元素在容器内时，该元素不会应用容器的高度，因为该元素不再处于“流”中。它从当前元素中删除，并应用于它的父元素，因此出现了问题。您可以通过使用来修复它`inline-block`，或`clear: both`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T16:24:23.217

我通常使用一个高度为 0 的元素，并将两者都作为容器中的最后一个子元素。这会导致容器围绕浮动对象“拉伸”：

```
<div style="clear: both; line-height: 0; height: 0;">&nbsp;</div> 
```

这是[QuirksMode 文章](http://www.quirksmode.org/css/clearing.html)的变体，具有良好的跨浏览器兼容性。

我已经重写了您的代码以包含它并演示结果：

```
<html>

<head>
<title>test</title>
<style type="text/css">
div.text-field
{
    border: 1px solid red;
    font-family: sans-serif;
    margin: 3px;
    float: left;
}

div.text-holder
{
    border: 1px solid blue;
}
</style>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript">
$(document).ready(function()
{
    $("#output1").text($("#someid1 .text-holder").height());
    $("#output2").text($("#someid2 .text-holder").height());
});
</script>
</head>

<body>

<div id="someid1">
  <div class="text-holder">
    <div class="text-field">text here</div>
  </div>
</div>
<br>
<div id="output1">&nbsp;</div>

<br><br><br>

<div id="someid2">
  <div class="text-holder">
    <div class="text-field">text here</div>
    <div style="clear: both; line-height: 0; height: 0;">&nbsp;</div>
  </div>
</div>
<br>
<div id="output2">&nbsp;</div>

</body>

</html> 
```

该演示也可以在[JSFiddle](http://jsfiddle.net/QBZMt/)上查看。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T16:06:02.153

因为`floats`从正常流程中删除元素。尝试使用`overflow:hidden`

看**[演示](http://jsbin.com/iyizag/1/edit)**

更多详情[http://www.quirksmode.org/css/clearing.html](http://www.quirksmode.org/css/clearing.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-12T16:08:01.767

`floats`从空间中删除元素，因此它占用 0 空间。`height()`它占用的空间也是0

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-12T16:12:55.330

在 jQuery 中，测试脚本如下所示：

```
console.log($("#someid").find(".text-holder").height()); 
```

如果您修改 html 以清除浮动，则父级将获得高度：

```
 <div id="someid">
        <div class="text-holder">
            <div class="text-field">text here</div>
            <div style="clear: both;"></div>
        </div>
    </div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-22T21:47:00.383

我在使用`float`更好的元素定位时遇到了同样的问题。但是，如果您（像我一样）事先知道元素的确切内容是什么，您可以在 CSS 类中添加一个`height`带有值的属性（例如`height: 30px`），这样 jQuery`.height()`方法就可以工作了。

# c# - C# mvc3 Actionlink 未在 URL 中发送参数

> ID：13843619
> 
> 赞同：0
> 
> 时间：2012-12-12T15:57:16.593
> 
> 标签：c#, asp.net-mvc-3

我在使用 MVC3 和 Actionlink 时遇到了一些问题。我正在动态构建一个`HTML ActionLink`使用从我的模型传递的数据。

在视图中：

```
@for (int i = 0; i < Model.CountriesList.Count; i++)
{

<li class="sub">@Html.ActionLink(Model.CountriesList[i].countryname, 
                                 "PageSub", new { PageID = Model.PageNo, 
                                                  countryid = Model.CountriesList[i].countryid 
                                                 })</li>

} 
```

Model.PageNo 是从控制器传递过来的，并且有一个值。我已经对此进行了测试。每次单击链接时，我都会收到一个错误，因为 PageNo 没有作为参数传递。url 输出如下：

```
http://localhost/Pages/PageSub?countryid=196 
```

我需要它低于我直接输入它时的工作原理：

```
http://localhost/Pages/PageSub?PageID=136&countryid=196 
```

这是我的控制器 ActionResult 它指向：

```
public ActionResult PageSub(int? PageID, int? countryid)
{

} 
```

我已经使用开发人员工具检查了代码，并且链接已按预期构建：

```
<li class="sub">
     <a href="/Pages/PageSub?PageID=136&countryid=196">
</li> 
```

有没有人有类似的问题？任何意见，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:49:38.777

尝试这个：

```
@Html.ActionLink(Model.CountriesList[i].countryname, "PageSub", "Pages", new { PageID = Model.PageNo, countryid = Model.CountriesList[i].countryid }, null) 
```

# java - JAXB 编组与 XSD 模式生成 - “去同步”它

> ID：13843624
> 
> 赞同：1
> 
> 时间：2012-12-12T15:57:32.607
> 
> 标签：java, jaxb, xml-serialization

对于给定的类结构（跳过注释等）：

```
class A {
 public B getObjectB {}
}

class B {
 public String getHello { return " world"; }
} 
```

我生成正确的 XSD 和 XML 输出没有问题：

```
<A>
 <B>
  <hello>world</hello>
 </B>
</A> 
```

问题是，我需要打破它：首先，XSD 应该保持原样 - 完整。但是在编组A时，我需要得到这样的东西：

```
<A>
 someStringForA
</A> 
```

（所以 B 被呈现为一些计算的字符串）。同时，在编组 B（作为根）时，我仍然需要获得“正常”输出。

我尝试使用 XmlAdapters，但使用 @XmlJavaTypeAdapter 也更改了 XSD。通过 Marshaller.setAdapter(...) 设置适配器显然（http://stackoverflow.com/questions/6110757/jaxb-xml-adapters-work-via-annotations-but-not-via-setadapter/6112149#6112149）不行。

某种解决方案是，如果有可能“关闭”@XmlJavaTypeAdapter（XSD 由 JUnit“手动”生成，允许进行一些切换甚至 hack）

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:02:29.873

**注意：** 我是 E [**clipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

**备用映射 - oxm.xml**

如果您使用 MOXy 作为您的 JAXB 提供程序，您可以使用外部映射文件为您的域模型提供备用映射（请参阅：[http://blog.bdoughan.com/2010/12/extending-jaxb-representing-annotations。 html](http://blog.bdoughan.com/2010/12/extending-jaxb-representing-annotations.html) ).

```
<?xml version="1.0"?>
<xml-bindings
    xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    package-name="forum13843624">
    <java-types>
        <java-type name="A">
            <java-attributes>
                <xml-value java-attribute="objectB"/>
            </java-attributes>
        </java-type>
        <java-type name="B">
            <java-attributes>
                <xml-value java-attribute="hello"/>
            </java-attributes>
        </java-type>
    </java-types>
</xml-bindings> 
```

**Java 模型**

*一个*

```
import javax.xml.bind.annotation.*;

@XmlRootElement(name="A")
class A {

    private B b;

    @XmlElement(name="B")
    public B getObjectB() {
        return b;
    }
    public void setObjectB(B b) {
        this.b = b;
    }

} 
```

*乙*

```
import javax.xml.bind.annotation.XmlElement;

class B {

    @XmlElement
    public String getHello() {
        return " world";
    }

} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`与您的域模型在同一包中命名的文件，其中包含以下条目（请参阅： [http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as -your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) )。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示代码**

```
import java.util.*;
import javax.xml.bind.*;
import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        B b = new B();
        A a = new A();
        a.setObjectB(b);

        JAXBContext jc = JAXBContext.newInstance(A.class);
        marshal(jc, a);

        Map<String, Object> properties = new HashMap<String, Object>();
        properties.put(JAXBContextProperties.OXM_METADATA_SOURCE, "forum13843624/oxm.xml");
        JAXBContext jc2 = JAXBContext.newInstance(new Class[] {A.class}, properties);
        marshal(jc2, a);
    }

    private static void marshal(JAXBContext jc, A a) throws Exception {
        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(a, System.out);
    }

} 
```

**输出**

下面是运行演示代码的输出。注意同一个对象图是如何以两种不同的方式编组的。

```
<?xml version="1.0" encoding="UTF-8"?>
<A>
   <B>
      <hello> world</hello>
   </B>
</A>
<?xml version="1.0" encoding="UTF-8"?>
<A> world</A> 
```

# sql - 格式化 SQL 表单输出

> ID：13843625
> 
> 赞同：0
> 
> 时间：2012-12-12T15:57:32.117
> 
> 标签：sql, forms

这是我的表单页面：

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Log</title>
</head>
<h1> Log </h1>
<form method="get" action="getlog2.php"> 
<table width="300" border="0">
  <tr>
<td> Forte ID:</td>
<td><select id="ForteID" name="ForteID">                    
                <option value="'nc4682'">nc4682</option>
                <option value="'bs1441'">bs1441</option>
                <option value="'sp3212'">sp3212</option>                 
    </select></td>
  </tr>
</table>

 <input type="submit" name="getLog" value="Get Log"><input type="button" value="Form" onClick="window.location.href='index.php';">
 </form> 

</head> 
```

当我单击“获取日志”按钮时，这里的代码就是我的表单。

```
<?php
/*print_r($_POST);*/
$serverName = 'SRB-Nick_Desktop\SQLEXPRESS';
$connectionInfo = array('Database'=>'cslogs', 'UID'=>'cslogslogin', 'PWD'=>'123456','ReturnDatesAsStrings'=>true,);
$connection = sqlsrv_connect($serverName, $connectionInfo);

$query = 'SELECT ForteID, Disposition, appNumber, Finance_Num, Num_Payments, ACH_CC, Notes, Date from cslogs.dbo.logs WHERE ForteID = ' . $_GET['ForteID'];

$result = sqlsrv_query($connection,$query);
/*echo $_GET['ForteID'];*/
if (!$result)

{
/*echo $query;*/
$message = 'ERROR: ' . sqlsrv_errors();
return $message;
}
else
{ 
$i = 0;
echo '<html><body><table><tr>';
while ($i < sqlsrv_num_rows($result))
{
    $meta = sqlsrv_fetch($result, $i);
    echo '<td>' . $meta->name . '</td>';
    $i = $i + 1;
}
echo '</tr>';

while ( $row = sqlsrv_fetch_array( $result, SQLSRV_FETCH_ASSOC ))
{
    $count = count($row);
    $y = 0;
    echo '<tr>';
    while ($y < $count)
    {
        $c_row = current($row);
        echo '<td>' . $c_row . '</td>';
        next($row);
        $y = $y + 1;
    }
    echo '</tr>';
}
sqlsrv_free_stmt ($result);

echo '</table></body></html>';
}
sqlsrv_close( $connection);
?> 
```

然后它会转到输出以下内容的页面：

```
bs1441  LOC asldjfasdf  srb-000001  1   cc  collected payment   2012-11-07 
```

我想用边框和标题格式化输出，这可能吗？提前致谢！

# asp.net-mvc-4 - 用户可以成功登录，但显示登录页面而不是重定向

> ID：13843628
> 
> 赞同：1
> 
> 时间：2012-12-12T15:57:34.420
> 
> 标签：asp.net-mvc-4, authorization

我将一个项目从 asp.net mvc 2 移动到了 asp.net 4，经过一番修复后，一切似乎都正常了。

除了您必须授权的应用程序部分。未经授权可以查看未经授权的页面，但是一旦您尝试登录，一切都会变得很糟糕。当您登录时，您会登录（您会在登录部分中看到您的姓名），但不会重定向并提示您再次登录，并且您无法访问适用于非授权用户的应用程序部分。一切都在本地主机上工作，但在部署的站点上却不行。

*   起初我认为我的机器密钥和应用程序池回收存在问题，所以我添加了一个。还是一样的问题。

我知道 MVC 使用网络安全而不是成员资格，但我读过 MVC 4 项目中可以存在成员资格解决方案，如果可能的话，我很乐意使用我的自定义成员资格提供程序和角色提供程序并节省一些时间。

控制器：

```
 [HttpPost]
    public ActionResult LogOn(LogOnModel model, string returnUrl)
    {
        if (ModelState.IsValid)
        {
            if (MembershipService.ValidateUser(model.UserName, model.Password))
            {
                FormsService.SignIn(model.UserName, true);
                FormsAuthentication.SetAuthCookie(model.UserName, true);
                var role = userRepo.usersInRoles.First(x => x.userMail == model.UserName);
                if (role.roleName == "Business")
                    return RedirectToAction("Start", "Business");
                if (role.roleName == "Admin")
                    return RedirectToAction("Index", "Admin");
            }
            else
            {
                ModelState.AddModelError("", "The user name or password provided is incorrect.");
            }
        }

        return View(model);
    } 
```

成员资格和角色的配置设置

```
<authentication mode="Forms">
   <forms loginUrl="~/Account/LogOn" timeout="2880" />
</authentication>
<membership defaultProvider="AccountMembershipProvider">
  <providers>
    <clear />
    <add name="AccountMembershipProvider" type="MyApp.UI.Infrastructure.AccountMembershipProvider" applicationName="/" />
  </providers>
</membership>
<roleManager enabled="true" defaultProvider="RoleMembershipProvider">
  <providers>
    <clear />
    <add name="RoleMembershipProvider" type="MyApp.UI.Infrastructure.RoleMembershipProvider" /> 
```

# java - Java - how to batch database inserts and updates

> ID：13843631
> 
> 赞同：2
> 
> 时间：2012-12-12T15:57:43.983
> 
> 标签：java, mysql, database, prepared-statement

I want to batch up multiple types of database calls in one PreparedStatement. Is this possible?

Is there anyway to do something like

`PreparedStatement pstmt = connection.prepareStatement("?");`

where the ? can either be `INSERT INTO MY_TABLE VALUES(1,2,3,4)` or it could be `UPDATE MY_TABLE, SET MY_VAL='1' WHERE MY_VAL IS NULL`

Or do I always need to specify a table and action for my prepared statement?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T17:56:32.427

Java will not allow you add only ? in preparedstatement string parameter, as it expects the ? for the place holder only for the parameters to the give SQL.

For your case, you may have to have 2 prepared statement objects, and in loop through, you can make a decision which one to call. So it would be something like below:

```
PreparedStatement insertPstmt = connection.prepareStatement("INSERT INTO MY_TABLE VALUES(?,?,?,?)");
PreparedStatement updatePstmt = connection.prepareStatement("UPDATE MY_TABLE, SET MY_VAL=? WHERE MY_VAL IS NULL");

While (<condition>) {
  If (<insert condition>) {
    // use insert pstmt and add batch
  } else {
    // use update pstmt and add batch
  }
}

insertPstmt.executeBatch(); 
updatePstmt.executeBatch(); 
```

if you have any insert , which has dependency on the update, you might execute the batches accordingly. This will make sure that the update will work correctly. I would think of executing insert first, as they might not depend on update.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:05:00.093

On a PreparedStatement, after binding the variables for the first execution, call

```
pstmt.addBatch(); 
```

then bind the variables for the next, and each time calling addBatch(). Then, when you're done adding batches you execute the bacth by alling

```
pstmt.executeBatch(); 
```

See :

[http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#addBatch%28%29](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#addBatch%28%29)

and

[http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#executeBatch%28%29](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#executeBatch%28%29)

BTW : injecting the entire statment into a variable won't work. This batch mechanism exists to reuse the same statement binding different variables each time.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T16:16:53.330

Insert and Update commands don't return any data that has to be processed. If you want to do just things like in your examples, you can simply run a non executing query command and provide a concatenated string of all your sql strings separated by a semicolon.

```
"INSERT INTO MY_TABLE VALUES(1,2,3,4)" + ";"  +"UPDATE MY_TABLE, SET MY_VAL='1' WHERE MY_VAL IS NULL" + ";" +... 
```

You don't need to prepare the statement in that case and also wouldn't receive any performance gain by doing so.

# c++ - 如何从双端队列中提取元素？

> ID：13843634
> 
> 赞同：1
> 
> 时间：2012-12-12T15:57:57.477
> 
> 标签：c++, stl, deque

给定以下代码：

```
void World::extractStates(deque<string> myDeque)
{
    unsigned int i = 0;
    string current; // current extracted string

    while (i < myDeque.size())      // run on the entire vector and extract all the elements
    {
        current =  myDeque.pop_front(); // doesn't work 
        // do more stuff
    }
} 
```

我想在每次迭代中提取最前面的元素，不过`pop_front()`是一种`void` 方法。那我怎样才能得到元素（在前面）？

问候

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-12T15:59:05.547

用于[`front`](http://www.cplusplus.com/reference/deque/deque/front/)读取项目并将`pop_front`其删除。

```
current = myDeque.front();
myDeque.pop_front(); 
```

这种做事方式似乎适得其反，但为了`deque`提供足够[的异常安全保证](http://www.gotw.ca/gotw/082.htm)，这是必要的。

# javascript - javascript打开某些网页并登录

> ID：13843639
> 
> 赞同：3
> 
> 时间：2012-12-12T15:58:20.577
> 
> 标签：javascript, asp.net, html, autologin

我正在尝试创建一个在默认浏览器中打开网页并登录的 html 文件，该页面位于公司 Intranet 中，并且是 .aspx 结构的。

该页面包含用户、密码字段和完成登录过程的链接。相关的源行是

```
<a id="lnkAccedi" href="javascript:__doPostBack('lnkAccedi','')" 
  style="background-color:Transparent;font-family:Arial;">Accedi...</a> 
```

我已经测试过的简单代码是

```
<script language="JavaScript">
  window.open("intranet_web_page","_self");
</script> 
```

其中 intranet_web_page 是我的登录页面的 URL。我试图将网页源中定义的函数称为“__doPostBack('lnkAccedi','');” 在我的 html 文件的脚本标记中，但根本不起作用。

我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T14:26:04.417

Do NOT do any kind of authentication with JavaScript!!!

Do your login authentication on the ASP code-behind and then pass a success condition where you can use response.write to open a new window. I do a similar thing opening a messenger window. On login success I have the following code:

```
Response.Write("<script> var win =window.open('chat.aspx','mywindow','width=700,height=450,left=800,top=10,location=1'); win.close();</script>") //closes the window if it is already open
Response.Write("<script>window.open('chat.aspx','mywindow','width=700,height=450,left=800,top=10,location=1')</script>") //open the window 
```

Again, that is how I call the script from the code-behind. Hopefully that points you in the right direction!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:40:41.853

其实我不是 ASP 用户，但我相信这`__doPostBack`是一个用户定义的函数，你应该将它定义为 script 标签下的 javascript 函数。
有一点，我认为`__doPostBack`不需要参数。

因此，如果您想在授权后创建重定向用户而不更改 url，您可以使用 jquery post 方法发布您的数据，然后在回调函数下检索服务器响应以检测该用户是否被授权
我会给你示例代码，但实际上**我还没有测试它**。
在 HTML 中：

```
<form name="loginform" action="test.asp" method​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​="POST">
username : <input type="text"  name="username" placeholder="please put your username here." /><br>
password : <input type="password" name="password" placeholder="your password here" /><br/>
<a id="lnkAccedi" href="javascript:__doPostBack" style="background-color:Transparent;font-family:Arial;">Accedi...</a>
</form>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

在脚本上：

```
function __doPostBack() {
    var usernamestr = document.loginform.username.value;
    var passwordstr = document.loginform.password.value;
    $.post("authorize.asp", { username: usernamestr , password: passwordstr },
       function(data) {
           if(data = "success") {       
               window.open('newwindow.asp','_self');
           } else {
               alert("Username or password was wrong");
           }
    });
}​ 
```

最后，**建议：** 我认为您不必在前端控制登录过程，因为它非常危险，任何人都可以重新创建您的代码并入侵您的服务器，因为它是客户端。您应该将进程控制权交给后端服务器。

# php - 在PHP中执行简单搜索时查询结果不同

> ID：13843641
> 
> 赞同：0
> 
> 时间：2012-12-12T15:58:34.913
> 
> 标签：php, mysql, drupal

我正在 MySQL 数据库中执行以下查询（查看 SELECT AND WHERE，其余的并不重要）：

```
SELECT distinct fname //more fields...
FROM filedepot_files AS ff 
INNER JOIN filedepot_categories AS fc 
ON ff.cid = fc.cid 
INNER JOIN filedepot_access AS fa 
ON fc.cid = fa.catid 
WHERE fa.permid=$id AND fname LIKE '%$key%' 
ORDER BY DATE 
```

该环境是在 Drupal 下使用 FileDepot 模块运行的 PHP 脚本，但我怀疑这根本不重要。

这是 PHP 脚本（重要的部分）：

```
$id = 1;
$key = $_GET['key'];
$query = .... (see above)
$result = db_query($query);
while($row = db_fetch_array($result)){
    //do stuff
    echo $row['fname'];
} 
```

`db_query()`是一个 Drupal 方法，允许轻松执行 SQL 查询并返回一个数组，`db_fetch_array()`允许解析结果。

现在，DB 包含以下 fname 条目（还有更多，这些只是示例）：

*   双歧杆菌 1
*   双歧杆菌 2
*   桂达 1
*   桂达 2

如果我以“guida”作为键启动脚本，它会正确返回 PHP 和 MySQL 的两个条目。如果我使用“Guida”它也可以。但是，如果我使用“dichiarazione”，它不会与 PHP 一起使用，而与 MySQL 一起使用。奇怪的是“Dichiarazione”同时适用于 PHP 和 MySQL。

查询有什么问题？我尝试使用`LOWER(fname) LIKE '%$key%'`，但它似乎没有按预期工作。

我确信我错过了一些愚蠢的东西，但我似乎无法找到那是什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:07:41.820

`%`是 Drupal 查询中的特殊字符（用于占位符）。尝试双重转义：

```
WHERE fa.permid=$id AND fname LIKE '%%$key%%' 
```

不过更令人担忧的是，您对 SQL 注入持开放态度。一些消毒是为了：

```
...
WHERE fa.permid= %d AND fname LIKE '%%%s%%' 
...

$query = db_query($sql, $id, $key); 
```

它可能看起来很疯狂，但这是正确数量的`%`标志。两个用于每个文字`%`，一个 ( `%s`) 用于字符串占位符

# php - php tumblr api情况

> ID：13843643
> 
> 赞同：-2
> 
> 时间：2012-12-12T15:58:37.077
> 
> 标签：php

```
<?
$jsonString = '{"meta":{"status":200,"msg":"OK"},"response":{"blog":

{"title":"happiness.","posts":12215,"name":"random","url":"http:\/\/www.demo.com\/","updated":1354380368,"description":"","ask":true,"ask_anon":true,"share_likes":true,"likes":166 1}}}';
    $jsonObject = json_decode($jsonString);
    $result = '';
    foreach ($jsonObject->response as $blog) {
    $result .= $blog->title . ' - ' . $blog->url . '<br/>' . "\n";
    }
    echo $result;
    ?> 
```

从 $blog->url 开始。返回一个 url，我怎样才能把这个 url 放在一个锚标签中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:01:55.903

用锚标记包装它，调用[`urlencode()`](http://php.net/urlencode)以确保正确编码 URL 字符：

```
$result .= $blog->title . ' - <a href="' . urlencode( $blog->url) . '">' . $blog->title . '</a><br/>' . "\n"; 
```

# python - 一个错误的答案显然意味着一个逻辑错误，但什么是错误的想法呢？

> ID：13843647
> 
> 赞同：4
> 
> 时间：2012-12-12T15:58:40.157
> 
> 标签：python, logic

[欧拉计划](http://projecteuler.net/)的[第 14](http://projecteuler.net/problem=14)题描述了许多人在这里问过的一个难题。我的问题不是如何解决问题或如何解决其他人的错误。想了想谜底，写了下面的“解法”，但似乎是错误的。有人可以解释我的错误吗？

```
def main():
    # start has all candidate numbers; found has known sequence numbers
    start, found = set(range(1, 1000000)), set()
    # if are numbers in start, then there are still unfound candidates
    while start:
        # pick a random starting number to test in the sequence generator
        number = start.pop()
        # define the set of numbers that the generator created for study
        result = set(sequence(number, found))
        # remove them from the candidates since another number came first
        start -= result
        # record that these numbers are part of an already found sequence
        found |= result
    # whatever number was used last should yield the longest sequence
    print(number)

def sequence(n, found):
    # generate all numbers in the sequence defined by the problem
    while True:
        # since the first number begins the sequence, yield it back
        yield n
        # since 1 is the last sequence number, stop if we yielded it
        if n == 1:
            break
        # generate the next number in the sequence with binary magic
        n = 3 * n + 1 if n & 1 else n >> 1
        # if the new number was already found, this sequence is done
        if n in found:
            break

if __name__ == '__main__':
    main() 
```

该文档是稍后添加的，希望足够清楚地解释为什么我认为它会起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:05:16.187

```
# whatever number was used last should yield the longest sequence
print(number) 
```

由于您正在`start`以随机顺序查看元素，因此上述评论和结论是错误的。

假设我们正在寻找从`1`和之间的数字开始的最长序列`8`。由于您的算法的目的是*“选择一个随机的起始数字进行测试”*，让我们按以下顺序选择数字：

1.  `7`: 这会产生一个长度为 17 的序列并剔除`1`, `2`, `4`,`5`和`8`from `start`。
2.  `6`: 这会产生一个长度为 9 的序列并`3`从`start`.

中没有更多的数字了`start`。您的代码得出`6`的结论是，它当然不是最佳解决方案。

更一般地说，假设您碰巧在第一步中选择了最佳起始数字。对于您的工作方法，第一个序列需要包含 和 之间的每个`1`数字`999,999`。除非你能证明这就是发生的事情，否则没有理由认为你的解决方案是正确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T16:13:13.030

错误的假设在这里：

```
# whatever number was used last should yield the longest sequence 
```

考虑我们从而`range(1, 13)`不是开始的情况`range(1, 1000000)`。然后你的算法进行如下：

```
number result                                  start
-----------------------------------------------------------------------------------
 1     {1}                                     {2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12}
 2     {2}                                     {3, 4, 5, 6, 7, 8, 9, 10, 11, 12}
 3     {3, 4, 5, 8, 10, 16}                    {4, 5, 6, 7, 8, 9, 10, 11, 12}
 6     {6}                                     {7, 9, 11, 12}
 7     {34, 7, 40, 11, 13, 17, 52, 22, 20, 26} {9, 11, 12}
 9     {9, 28, 14}                             {12}
12     {12}                                    {} 
```

所以最后使用的数字是 12。但是以这个范围内的数字开头的最长序列是 9 → 28 → 14 → 7 → 22 → 11 → 34 → 17 → 52 → 26 → 13 → 40 → 20 → 10 → 5 → 16→8→4→2→1（长度20）；序列 12 → 6 → 3 → 10 → 5 → 16 → 8 → 4 → 2 → 1 的长度只有 10。

只有当您得到正确答案（开始最长序列的数字）时，您的方法才有效，该范围内的所有较高数字要么已经找到，要么在生成以正确答案。

但是在这个例子中，当我们到达 9 时，数字 12 还没有在任何序列中找到，也没有在从 9 开始的序列扩展过程中找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T16:04:44.117

在向同事解释了建议的解决方案后，我得到了答案：这个解决方案没有考虑到在被测试的数字范围之外生成的序列长度。因此，需要设计一种考虑完整序列长度的新解决方案。

为了测试算法，编写了以下程序。该方法适用于整个封闭范围内的序列。这在 Collat​​z 问题中是完全不可能完成的，因此代码失败了。

```
import random
import time

class Sequencer:

    def __init__(self, limit, seed):
        random.seed(seed)
        self.__sequence = tuple(random.sample(range(limit), limit))

    def __call__(self, start):
        yield from self.__sequence[self.__sequence.index(start):]

    @property
    def longest(self):
        return self.__sequence[0]

def main(limit):
    while True:
        sequence = Sequencer(limit, str(time.time()))
        longest = find_longest(limit, sequence)
        print('Found longest ' +
              ('' if longest == sequence.longest else 'in') +
              'correctly.')

def find_longest(limit, sequence):
    start, found = set(range(limit)), set()
    while start:
        number = start.pop()
        result = set(get_sequence(sequence(number), found))
        start -= result
        found |= result
    return number

def get_sequence(sequence, found):
    for number in sequence:
        if number in found:
            break
        yield number

if __name__ == '__main__':
    main(1000000) 
```

代码的更正版本在其设计中遵循类似的模式，但会跟踪原始范围之外的值。已发现执行时间与该难题的其他 Python 解决方案相似。

```
def main():
    start, found = set(range(2, 1000000)), {1: 1}
    while start:
        scope = reversed(tuple(sequence(start.pop(), found)))
        value = dict(map(reversed, enumerate(scope, found[next(scope)] + 1)))
        start -= frozenset(value)
        found.update(value)
    lengths = dict(map(reversed, found.items()))
    print(lengths[max(lengths)])

def sequence(n, found):
    while True:
        yield n
        if n in found:
            break
        n = 3 * n + 1 if n & 1 else n >> 1

if __name__ == '__main__':
    main() 
```

# internet-explorer - IE 中元素可见性的 WebDriver 问题

> ID：13843649
> 
> 赞同：2
> 
> 时间：2012-12-12T15:58:55.953
> 
> 标签：internet-explorer, webdriver

WebDriver 告诉我某些元素在确定时是不可见的，但仅在 IE 中 - Firefox 和 Chrome 工作正常。代码块涉及单选按钮和其他输入。有些输入确实是隐藏的，但这些不是我要与之交互的输入。我正在尝试选择此单选按钮：

```
<input type="radio" onclick="onClickBranching()" id="rbOnCompletePres" value="2" name="rbBranchType"> 
```

我使用 id 作为定位器，所以基本上是`By.cssSelector("input#rbOnCompletePres")`. 我可以确认 findElement 命令在 Firefox 和 IE 中都有效，并且我已经用 IE 打印了元素的属性以确认它找到了正确的按钮。它肯定会找到正确的按钮，与在 Firefox 中找到的按钮相同。它只是确信该元素在 IE 中不可见。

在相关元素的上方和下方有一些隐藏的元素，a`div`和 a`label`要么意味着永久隐藏，要么会在选择其他单选按钮时激活。它们通过`style="display: none"`设置为属性而被隐藏。

WebDriver（尤其是仅在 IE 上）会根据附近的其他元素决定可见元素不可见是否有某种原因？

我尝试使用一种解决方法来注入可以使元素可见的 JS，但遇到了两个问题：第一个是我不确定我是否正确消除了 style 属性，另一个是该元素，即使 WebDriver 报告, 实际上没有任何使其隐藏的属性，所以没有什么可以取消的。

我尝试过的另一个解决方法是使用 JS 来执行点击，因为它忽略了可见性。我只是不喜欢它——尤其是因为我的下一步行动是填写一个 WebDriver*也*认为是不可见的文本字段，毫无疑问是出于同样的原因。

这种行为有什么解释吗？还是我应该把它归结为 IE 很奇怪并使用 JS？谢谢。

# php - $mysqli->fetch_object 无法获得迭代的结果 - PHP - Mysql

> ID：13843657
> 
> 赞同：0
> 
> 时间：2012-12-12T15:59:18.497
> 
> 标签：php, mysqli, fetch

我有当前的代码：

```
 Database::connect();
?>

<table>
    <thead>
        <tr>
            <th>ID</th> 
            <th>Title</th>
        </tr>
    </thead>
    <tbody>
        <?php       
            $query = "SELECT * FROM app";  
            $dbr = Database::query( $query ); 
            while( $row = Database::$mysqli->fetch_object( $dbr->result ) ){
                ?>
                <tr>
                    <td><?php echo $row->id; ?></td> 
                    <td><?php echo $row->title; ?></td>
                </tr>
                <?php
            }
        ?>
    </tbody>
</table>        

<?php
    Database::close();
?> 
```

这是 Database 和 DatabaseQuery 类

```
class DatabaseQuery{
    public $result;
    public $mysql_num_rows;        
}

class Database{            
    public static $mysqli;   
    private static $db_name = '';
    private static $username = '';
    private static $password = '';   
    private static $host = 'localhost';
    private static $prefix = '';   

    public static function connect(){  
        self::$mysqli = new mysqli( self::$host, self::$username, self::$password, self::$db_name );

        if (self::$mysqli->connect_error) {
            die('Connect Error (' . self::$mysqli->connect_errno . ') '
                . self::$mysqli->connect_error);
        }
    }

    public static function query( &$query ){
        $query = self::$mysqli->real_escape_string( $query );

        if ($stmt = self::$mysqli->prepare($query)) {
            $stmt->execute();
            $stmt->store_result();            

            $DatabaseQuery = new DatabaseQuery();
                $DatabaseQuery->result = $stmt;       
                $DatabaseQuery->mysql_num_rows = $stmt->num_rows();                 
                $stmt->close();
                return $DatabaseQuery;                   
        }
    }

    public static function close(){
        self::$mysqli->close(); 
    }
} 
```

我的调用代码中出现错误：致命错误：调用未定义的方法 mysqli::fetch_object()

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:05:54.010

替换您的以下行：

```
while( $row = Database::$mysqli->fetch_object( $dbr->result ) ){ 
```

对于这个：

```
while( $row = $dbr->fetch_object( $dbr->result ) ){ 
```

因为[**fetch_object()**](http://php.net/manual/en/mysqli-result.fetch-object.php)是 mysqli_result 对象的方法，而不是一般 mysqli 对象的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:07:56.300

我认为这是您的问题，但我建议研究 PDO 的一种非常简单的访问数据库并使用它们的方法。

```
<?php       
        $query = "SELECT * FROM app";  
        $dbr = Database::query( $query ); 

            //Change this here since your method is query and not $mysqli
            while( $row = Database::$dbr->fetch_object( $dbr->result ) ){
            ?>
            <tr>
                <td><?php echo $row->id; ?></td> 
                <td><?php echo $row->title; ?></td>
            </tr>
            <?php
        }
    ?> 
```

如果您不介意，我会说您使您的课程复杂化了很多。如果你有理由，那么如果没有，你可以这样做。

```
class Database{            
    private static $mysqli;   
    private static $db_name = '';
    private static $username = '';
    private static $password = '';   
    private static $host = 'localhost';
    private static $prefix = '';   

    public function __construct(){  
        self::$mysqli = new mysqli( self::$host, self::$username, self::$password, self::$db_name );

         if (self::$mysqli->connect_error) {
        die('Connect Error (' . self::$mysqli->connect_errno . ') '
            . self::$mysqli->connect_error);
        }
    }

    public function query( $query ){
         $query = self::$mysqli->real_escape_string( $query );

        if ($query = self::$mysqli->prepare($query)) {
            $query->execute();
            $query->store_result();            

            $stmt = $query->result;        
            //$query->mysql_num_rows = $stmt->num_rows();                 
            $query->close();
            return $stmt;                   
    }
}
} 
```

使用类的文件

```
 //Include the file unless u have a autoloader
    <tr>
    <?php       
    $query = "SELECT * FROM app";

    $dbr = new Database(); 

        //Change this here since your method is query and not $mysqli
        while( $row = $dbr->query($query)->fetch_object() ){

           echo '<td>'. $row['IDcolumnName'] . '</td>' ;
           echo '<td>'. $row['TitlecolumnName'] . '</td>' ;

    }
?>
</tr> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T16:06:42.377

你的逻辑被打破了：

```
 $query = self::$mysqli->real_escape_string( $query ); 
```

您不会逃避整个查询。您转义要插入查询的数据，例如，如果您有类似

```
 SELECT id, name, ... WHERE firstname = '$searchterm' 
```

你会逃避`$searchterm`. 转义整个查询会将其变成

```
 SELECT id, name, ... WHERE firstname = \'$searchterm\' 
```

最后你会遇到语法错误，因为你不再有 $searchterm 周围的引号，你有几个被忽略的字符作为裸字符串的一部分。

然后是：

```
 $stmt->store_result(); 
```

`store_result()`返回一个语句句柄，您可以使用它来获取以后的结果。您没有捕获该句柄，因此即使查询已正确执行，您的数据库结果也会被丢弃。

# css - Typekit 字体未在 webkit 浏览器中加载

> ID：13843660
> 
> 赞同：0
> 
> 时间：2012-12-12T15:59:27.653
> 
> 标签：css, webkit, webfonts, typekit

我正在使用 typekit 中的两种字体：

```
font-family:"proxima-nova", Arial, Helvetica, sans-serif; - WORKS OK 
```

和

```
font-family:"garamond-premier-pro", Georgia, serif; - DOESN'T DISPLAY 
```

虽然 Proxima Nova 加载正常 - **Garamond Premier Pro 无法加载**- 但**仅在 Chrome 和 Safari**中。Firefox 和 IE 显示字体正常。css 规则没问题 - 它甚至显示在 web 检查器中 - 我在控制台中没有错误 - 已加载 typekit 脚本 - 仍然不会显示字体 - 它回退到格鲁吉亚。

我尝试了我发现的不同解决方案（将 typekit 脚本移动到标题顶部，禁用`text-shadow`，从 css 中删除`-webkit`前缀规则） - 没有任何帮助。

这个问题字体是否相关？我读到 webkit 浏览器的 opentype 有问题。

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2012-12-12T17:07:42.687

Garamond Premier Pro 是 Adob​​e 的[商业产品](http://store1.adobe.com/cfusion/store/html/index.cfm?store=OLS-US&event=displayFontPackage&code=1737)。如果您购买了允许使用 Web 字体的许可证，如果产品不起作用，请联系供应商。否则，请勿尝试将其用作网络字体。

# linq-to-xml - LINQ 查询到 Xml- 给出异常“对象引用未设置为对象的实例”

> ID：13843664
> 
> 赞同：2
> 
> 时间：2012-12-12T15:59:40.723
> 
> 标签：linq-to-xml

这是查询

```
XDocument application = XDocument.Load(@".\..\..\XmlFile\" + xmlFileName); 
var elements = from p in application.Descendants("Function")
               where ((string)p.Attribute("Fnumber").Value.Trim() ==  (SourceCodeParser.fCount.ToString().Trim()) && (string)p.Attribute("MethodName").Value.Trim() == (methodName) && (string) p.Parent.Parent.Attribute("ClassName").Value.Trim()== (className))
               select p.Element("MethodDependencies"); 
```

下面是执行引发异常的查询的代码片段

```
foreach (var file in elements)
{
    file.Add(
        new XElement("MethodDependency",
            new XAttribute("MethodName", MethodName),
            new XAttribute("ObjectName", ObjectName),
            new XAttribute("CallNumber", SourceCodeParser.methodcallCount.ToString().Trim()),
            new XElement("Arguments")
       ));
} 
```

这是 Xml 结构

```
<Classes>
  <Class ClassName="" ClassPath="" ModifiedDate="" CreationDate="" InheritedFrom="" Modifier="" Specifier="">
      <Functions>
        <Function ReturnType="" Fnumber="" AccessModifier="" AccessSpecifier="" MethodName="">
          <Dependencies />
          <MethodDependencies />
        </Function>
      </Functions>
  </Class>
</Classes> 
```

此查询适用于其他文件，但在某些文件上抛出异常，尽管所有文件的代码都相同......

有什么建议吗？

# gnuplot - 适合gnuplot的异常

> ID：13843665
> 
> 赞同：0
> 
> 时间：2012-12-12T15:59:44.833
> 
> 标签：gnuplot

我尝试用指数回归绘制数据：

```
set terminal postscript enhanced color
set output 'fichier.ps'
set logscale y
set logscale x
set format y "10^{%L}" 
set format x "10^{%L}" 
set key inside right top
set xlabel " lines "
set ylabel " Time(nanoseconds)"

f(x) = a + b*exp (x)
fit f(x) 'fichier.csv' using 16:17 via a, b

plot 'fichier.csv' using 16:17 with points title "title" lw 3 pt 4 linecolor rgb "#FF0000",  f(x) with lines title "regtitle" linecolor rgb "#000000" lw 3 
```

我有这个错误：

```
Max. number of data points scaled up to: 3072
         Undefined value during function evaluation 
```

我继续跑`gnuplot 4.4`

如何解决问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-10T15:10:41.673

该消息`Max. number of data points scaled up to: 3072`与拟合错误无关，另请参见[Gnuplot：如何设置拟合的最大数据点数](https://stackoverflow.com/questions/17611228/gnuplot-how-to-set-max-number-of-data-points-for-fit)

您的拟合错误可能是由于数据错误或参数初始值设置不当造成的。如果您在拟合之前根本没有设置变量，gnuplot 会使用 1.0 初始化它们，这可能完全关闭。众所周知，指数拟合不稳定，起始值不好。在拟合之前，您可以使用 gnuplots`stats`命令进一步了解您的数据。

# php - CurlException: 77: 一次性函数先前被调用但失败。它的错误代码不再可用

> ID：13843666
> 
> 赞同：0
> 
> 时间：2012-12-12T15:59:45.257
> 
> 标签：php, facebook, api, curl

有一个 Facebook 应用程序在今天早上失败并出现以下错误：

> CurlException: 77: 一次性函数先前被调用但失败。它的错误代码不再可用

这是在我试图获取用户信息的地方抛出的：

```
$user_profile = $facebook->api('/me'); 
```

我的代码在几周内没有改变。对这里可能发生的事情有任何想法吗？

谢谢迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T17:15:55.470

仍然不确定这里发生了什么，但它似乎与基于时间的包更新有关。这些软件包已更新：

```
Dec 12 09:25:48 Updated: php-common-5.4.9-1.fc17.x86_64
Dec 12 09:25:48 Updated: nss-util-3.14-1.fc17.x86_64
Dec 12 09:25:48 Updated: php-pdo-5.4.9-1.fc17.x86_64
Dec 12 09:25:48 Updated: nss-softokn-freebl-3.14-5.fc17.x86_64
Dec 12 09:25:48 Updated: nss-softokn-3.14-5.fc17.x86_64
Dec 12 09:25:48 Updated: nss-sysinit-3.14-7.fc17.x86_64
Dec 12 09:25:49 Updated: nss-3.14-7.fc17.x86_64
Dec 12 09:25:49 Updated: php-cli-5.4.9-1.fc17.x86_64
Dec 12 09:25:50 Updated: php-5.4.9-1.fc17.x86_64
Dec 12 09:25:50 Updated: nss-tools-3.14-7.fc17.x86_64
Dec 12 09:25:51 Updated: php-pgsql-5.4.9-1.fc17.x86_64
Dec 12 09:25:51 Updated: php-mysql-5.4.9-1.fc17.x86_64
Dec 12 09:25:51 Updated: php-gd-5.4.9-1.fc17.x86_64
Dec 12 09:25:51 Updated: php-mbstring-5.4.9-1.fc17.x86_64
Dec 12 09:25:51 Updated: php-mcrypt-5.4.9-1.fc17.x86_64
Dec 12 09:25:51 Updated: php-pspell-5.4.9-1.fc17.x86_64
Dec 12 09:25:51 Updated: php-xml-5.4.9-1.fc17.x86_64
Dec 12 09:25:54 Updated: tzdata-2012j-1.fc17.noarch
Dec 12 09:25:54 Updated: libgusb-0.1.4-1.fc17.x86_64 
```

修复是一个简单的重启，所以有些地方不合适。

# assembly - 计算下一个集群

> ID：13843668
> 
> 赞同：1
> 
> 时间：2012-12-12T15:59:45.963
> 
> 标签：assembly, x86-16, bootloader, osdev, fat

[最近我在BrokenThorn](http://www.brokenthorn.com/Resources/OSDev6.html)上阅读了一些关于 OS 开发的不错的教程：这是一个不错的 OSDev 系列。

当我想加载我们的引导加载程序的第 2 阶段时，我很难理解“计算下一个集群”的想法。代码是：

```
 mov     ax, WORD [cluster]  ; The current Cluster.
      mov     cx, ax              ; copy current cluster
      mov     dx, ax              ; copy current cluster
      shr     dx, 0x0001          ; divide by two
      add     cx, dx              ; sum for (3/2)

      mov     bx, 0x0200          ; location of FAT in memory
      add     bx, cx              ; index into FAT
      mov     dx, WORD [bx]       ; read two bytes from FAT

      test    ax, 0x0001

      jnz     .ODD_CLUSTER
      jz      .EVEN_CLUSTER 
```

为什么我们将当前簇号乘以 3/2 得到下一个簇号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T13:22:41.053

我在程序集标签中找到了相同的问题，但我找不到它来引用它！（非常有帮助）对不起。

那么，为什么我们将索引乘以 3/2 来获取下一个集群的索引？？

首先，我们需要澄清一些想法：

***FAT 表中的 Enrty 是什么？***

**是12位长的内存和平。所以，FAT表是这个条目的集合。**

***这个条目有什么？***

**在这片内存中有一个索引（Number），这个索引指的是同一个FAT表中的一个条目（有多少个Entry从FAT的起始地址开始）。**

每个条目长 12 位：

```
<---- 12 bits ----><---- 12 bits ----><---- 12 bits ----><---- 12 bits ---->
    1st index          2nd index          3rd index         4th index 
```

当我们从根目录中得到第一个索引时（例如：4），所以我们应该去 FAT 表中的这个索引找到下一个簇号的索引。我们将如何进行？

我们需要FAT表的起始地址（很容易找到），并且只需添加索引即可。像这样：

```
 mov bx, [FAT address]   ; Strat address of FAT table
     mov ax, [cluster]       ;the index (for ex: 4)
     add bx, ax              ;Start address + index = the next Entry (cluster). 
```

简单的 ：-）！！

**但是 3/2 分数在哪里？:-D 。**
上面的代码是错误的，为什么？

逻辑是正确的，但对“**寻址单元**”存在误解。
在大多数 CPU 中，单元寻址是**BYTE(8-bits)**，所以当我们制作**[index]**时，这意味着：内存中的**index * 8-bits**。所以当我们制作 [cluster] ---> index * 8-bits 时，像这样我们将索引 8 位长的条目。

与此相反，我们的索引是 12 位而不是 8 位！！！那么如何解决这个大问题呢？

**解决方案：** 我们应该将 [cluster] 乘以 3/2，所以：
**index * 8bits * 3/2 = index* 12bits**。这就是我们需要的！现在我们可以按 12 位单位（1.5 字节）对内存进行索引。
正确的代码是：

```
 mov bx, [FAT address]   ; Strat address of FAT table
     mov ax, [cluster]       ;the index (for ex: 4)
     mov dx, ax              ; make copy of index
     shr dx, 0x0001          ; divide it By 2.
     add ax, dx              ; index/2 + index = index * 3/2.
     add bx, ax              ;Start address + index = the next Entry (cluster). 
```

我是新手，所以如果有什么问题就通知它;-D !! 谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T18:37:05.030

这种怪异现象是 FAT12 文件系统特有的。

由于 FAT12 中簇的记录大小为 12 位，为了计算其在文件分配表中的偏移量（以字节为单位），您需要获取其索引并将其乘以 3/2（或 12 位/8 位）。

集群记录包含文件或文件结束标记的下一个集群的数量（如链表中的指针）。对于免费集群，集群记录可能会标记坏集群或只是免费的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-25T17:55:14.190

请记住这是 FAT12：每个簇都是 12 位。因为一个字节是 8 位，所以一个条目是一个字节半，或 3/2 个字节！

# asp.net - IIS 7 上发布的 ASP.NET 页面报告 404

> ID：13843672
> 
> 赞同：0
> 
> 时间：2012-12-12T15:59:59.937
> 
> 标签：asp.net, asp.net-mvc-4, web-config, http-status-code-404

我正在尝试让 ASP.NET MVC 4 页面在生产系统上运行。在我使用 IIS 7 和 Windows 7 Professional 的本地系统上，一切正常。

生产系统：

*   Windows Web 服务器 2008 R2 64 位
*   带有 .NET 4 的 IIS 7

对于该页面，我创建了一个新的 IIS 站点。对于该站点，我创建了一个新的应用程序池，它使用：.NET Framework v4.0.30319 和集成模式。对于应用程序池，32 位应用程序的标志被激活，因为我需要将我的应用程序作为 32 位应用程序运行。

当我通过

```
https://localhost:12345/PageName 
```

我收到错误消息：

（我从德语翻译过来：）应用程序中的服务器错误 /PageName 找不到资源

```
Description: HTTP 404\. The resource or a dependency could not be found...
Requested URL: /PageName

Version: .NET 4.0.30319; ASP.NET 4.0.30319.1 
```

路由表：

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
routes.MapRoute("Default", "{controller}/{action}/{id}", new { controller = "MyController", action = "Index", id = "" }); 
```

控制器的 Index 方法如下所示

```
[ValidateInput(false)]
[RequireHttps(Order = 1)]
public ActionResult Index(string method, string chapterId, string sessionKey, string cn, string ui, string pw, string ProductNumber, string DocumentData)
{
    // something...
} 
```

网络配置

```
...
<system.web>
     <compilation debug="true" defaultLanguage="c#" targetFramework="4.0" />

     <authentication mode="Forms">
       <forms protection="All" loginUrl="~/Account/Login" timeout="1" />
     </authentication>

     <httpRuntime requestValidationMode="2.0" />

     <sessionState mode="Off" />
</system.web>
...
<system.webServer>
<validation validateIntegratedModeConfiguration="false" />
<modules runAllManagedModulesForAllRequests="true" />
<handlers>
  <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
  <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
  <remove name="ExtensionlessUrlHandler-Integrated-4.0" />

  <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
  <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
  <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
</handlers>
</system.webServer> 
```

出于调试目的，我将[http://haacked.com/archive/2008/03/13/url-routing-debugger.aspx](http://haacked.com/archive/2008/03/13/url-routing-debugger.aspx)添加到 global.asax 文件的 Application_Start 函数中。

```
protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();

    WebApiConfig.Register(GlobalConfiguration.Configuration);
    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
    RouteConfig.RegisterRoutes(RouteTable.Routes);
    BundleConfig.RegisterBundles(BundleTable.Bundles);

    // added call here
} 
```

路线解决正确。--> 控制器 = "MyController", 动作 = "索引", Id = ""

IIS 日志

```
2012-12-12 15:21:04 ::1 GET /PageName - 49266 - ::1 Mozilla/5.0+(compatible;+MSIE+9.0;+Windows+NT+6.1;+WOW64;+Trident/5.0) 404 0 0 656
2012-12-12 15:32:18 ::1 GET /PageName - 49266 - ::1 Mozilla/5.0+(compatible;+MSIE+9.0;+Windows+NT+6.1;+WOW64;+Trident/5.0) 404 0 0 0
2012-12-12 15:37:48 ::1 GET /PageName - 49266 - ::1 Mozilla/5.0+(compatible;+MSIE+9.0;+Windows+NT+6.1;+WOW64;+Trident/5.0) 404 0 0 5687 
```

Windows EventLog 不再显示任何内容。

# javascript - 用 node.js 响应 json 对象

> ID：13843677
> 
> 赞同：0
> 
> 时间：2012-12-12T16:00:09.763
> 
> 标签：javascript, node.js

我有以下代码：

```
var http = require('http')
  ,https = require('https')
  ,fs = require('fs'),json;

var GOOGLE_API_KEY = process.env.GOOGLE_API_KEY;

var FUSION_TABLE_ID = "1epTUiUlv5NQK5x4sgdy1K47ACDTpHH60hbng1qw";

var options = {
  hostname: 'www.googleapis.com',
  port: 443,
  path: "/fusiontables/v1/query?sql=SELECT%20*%20"+FUSION_TABLE_ID+"FROM%20&key="+GOOGLE_API_KEY,
  method: 'GET'
};

http.createServer(function (req, res) {
  var file = fs.createWriteStream("chapters.json");
  var req = https.request(options, function(res) {
    res.on('data', function(data) {
      file.write(data);
    }).on('end', function() {
      file.end();
    });
  });
  req.end();
  req.on('error', function(e) {
    console.error(e);
  });
  console.log(req);
  res.writeHead(200, {'Content-Type': 'application/json'});
  res.end('Hello JSON');

}).listen(process.env.VMC_APP_PORT || 8337, null); 
```

我如何返回 json 对象而不是“Hello JSON”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:09:36.220

不要将接收到的数据存储在文件中，而是将其放在局部变量中，然后将该变量发送到`res.end()`：

```
var clientRes = res;
var json = '';

var req = https.request(options, function(res) {
    res.on('data', function(data) {
        json += data;
    }).on('end', function() {
        // send the JSON here
        clientRes.writeHead(...);
        clientRes.end(json);
    });
}); 
```

请注意，您有两个`res`变量 - 一个是您发送回您自己的客户的响应，另一个是您从 Google 收到的响应。我打电话给前者`clientRes`。

或者，如果您只是要代理未修改的信息，则可以将`clientRes.write(data, 'utf8')`其放入`res.on('data')`回调中：

```
http.createServer(function (clientReq, clientRes) {

    var req = https.request(options, function(res) {
        res.on('data', function(data) {
            clientRes.write(data, 'utf8');
        }).on('end', function() {
            clientRes.end();
        });

    clientRes.writeHead(200, {'Content-Type: 'application/json'});
    clientReq.end().on('error', function(e) {
        console.error(e);
    });

}); 
```

# .net - 当我更改 Id 时，EF 导航属性似乎没有更新

> ID：13843678
> 
> 赞同：1
> 
> 时间：2012-12-12T16:00:11.543
> 
> 标签：.net, entity-framework

我有以下课程：

```
public class Person {
   public int Id {get; set;}
   ...
   public ICollection<PersonalJobs> Jobs {get; set;}
}

public class PersonalJob {
   public int Id {get; set;}
   public int PersonId {get; set;}
   public int JobId {get; set;}
   public Job Job {get; set;}
   public DateTime StartDate {get; set;}
   ...
}

public class Job {
   public int Id {get; set;}
   public string Description {get; set;}
   ...
} 
```

现在我执行以下操作：

```
var _personId = 1;
var _jobId = 15;

_context.Set<Jobs>().Load();  //Pre-Load all jobs

var _person = _context.Persons.Include(p => p.Jobs.Select(j => j.Job))
   .SingleOrDefault(p => p.Id == _personId);

var _job = _person.Jobs.SingleOrDefault(p => p.JobId == _jobId);
_job.JobId = 23;  //Change the job that this person is tied to.

// At this point, if I try to access _job.Job.Description, it still references the old job. 
```

因为上下文已经加载了 Jobs，所以我假设 EF 在我更改 ID 时会更新 _job 的导航属性。然而，这种情况并非如此。在这种情况下，_job.Job 仍然引用与原始 ID (15) 关联的作业。

我对 EF 如何处理导航属性的假设是错误的，还是我只是在这个难题中遗漏了一部分？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:36:21.757

我刚刚在您的评论中读到您希望参考*在保存之前*与新 id 同步。但这是 EF 不会自动执行的操作。它发生在你打电话`SaveChanges`没事时，但如果你想在此之前发生，你必须打电话

```
_context.ChangeTracker.DetectChanges(); 
```

（假设您使用`DbContext`API）

`DetectChanges`触发*关系修复*，这是一个同步外键中涉及的所有属性的过程。

顺便说一句：您不必为此成功预加载作业。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:26:52.803

您需要调用`SaveChanges()`以持久保存到数据库：

```
_job.JobId = 23;

_context.SaveChanges();

// _job.Job now points to Job 23 
```

这只是因为 Job 23 已经加载到你的`DbContext`.

如果加载了一个对象，EF 将在您调用时连接您的属性`SaveChanges()`

* * *

**编辑：**

您已经加载了所有作业，因此您可以自己设置属性：

```
_job.Job = _context.Set<Jobs>().Find( 23 ); 
```

这不会导致任何数据库调用 - 它会从您的`DbContext`

`UPDATE`当您调用时，它会产生相同的语句`SaveChanges()`

# ssl - 2 种方式 SSL 在服务器上工作，但不是来自客户端

> ID：13843679
> 
> 赞同：-2
> 
> 时间：2012-12-12T16:00:13.210
> 
> 标签：ssl

我在 Windows 2003 R2 下运行的 IIS 6.0 下托管了 WCF 服务。该服务`SSL secured`带有“必需的客户端证书”选项。当我在 win 2003 R2 中从 IE 浏览服务时，我可以看到 WSDL。当我尝试从在 Win XP 上运行 IE 的开发机器上浏览时。我看到这样的 403.7 错误。

```
The page requires a client certificate
......
......

HTTP Error 403.7 - Forbidden: SSL client certificate is required.
Internet Information Services (IIS) 
```

我已经花了 5 天时间尝试了所有可能的方法，例如

1.  检查客户端上的客户端证书，私钥，一次又一次地导入。
2.  检查其预期用途（客户端身份验证）和 EKU 值。
3.  检查 CA 是否安装在 Trust Root Cert Authority 文件夹中的服务器和客户端上。
4.  运行 SSL 诊断工具。不幸的是，它显示了我在上面粘贴的消息并且没有太多细节。
5.  当我尝试 IIS 目录安全选项卡下的“接受客户端证书”选项时，它可以工作。

有什么我遗漏或不知道的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T16:07:56.527

最后在 MSFT 支持的帮助下，我解决了它。原因是，在网络服务器上，受信任的根证书颁发机构文件夹中的证书过多，超出了建议的长度。因此我在事件日志中收到了这个警告。

```
 When asking for client authentication, this server sends a list of
 trusted certificate authorities to the client. The client uses this
 list to choose a client certificate that is trusted by the server.
 Currently, this server trusts so many certificate authorities that the
 list has grown too long. This list has thus been truncated. The
 administrator of this machine should review the  certificate
 authorities trusted for client authentication and remove those that 
 do not really need to be trusted. 
```

我确实删除了一些过期/未使用的证书，但仍然不够。由于担心破坏系统，我无法删除更多证书，因为它们没有过期。我们使用方法 3 来解决[这里讨论的问题](http://support.microsoft.com/kb/933430)

虽然它解决了我的问题，但使用这种方法的唯一缺点是，客户端浏览器会向您显示计算机中存在的所有客户端证书的列表，而不是根据信任根 CA 选择一台服务器想要的。这对我有用，因为我有 WCF 服务而不是网站。

# android - 我应该在android上使用哪个网址作为肥皂？

> ID：13843681
> 
> 赞同：0
> 
> 时间：2012-12-12T16:00:22.667
> 
> 标签：android, web-services, wsdl, httprequest

我必须在 android 上使用 web 服务，而不使用像 ksoap 这样的 3.rd 方库。所以我必须写我自己的请求。而这一点我应该使用哪个网址作为帖子网址？

```
 HttpPost httppost = new HttpPost("url"); 
```

我有这样的wsdl链接：

```
http://kavakci.com.tr/kod.merkezi/rotametre.asmx?WSDL  (not working for you, just for me) 
```

肥皂作用：

```
http://kavakci.com.tr/BaglantiDogrula 
```

方法：

```
BaglantiDogrula 
```

命名空间：

```
http://kavakci.com.tr/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:07:22.127

能够通过后缀为“?WSDL”的端点地址访问 Web 服务的 WSDL 是一种常见的做法，这意味着您应该将请求发布到：

```
http://kavakci.com.tr/kod.merkezi/rotametre.asmx 
```

# haskell - 如何在 Haskell 中构建一个不确定的状态单子？

> ID：13843687
> 
> 赞同：4
> 
> 时间：2012-12-12T16:00:35.460
> 
> 标签：haskell, state-monad, non-deterministic

我想在 Haskell 中建立一个不确定的状态单子。这将允许我使用构建状态生成搜索空间中的所有元素以修剪不良位置。假设我有以下（伪）代码：

```
primitives :: [State Int Element] 
primitives = [... list of primitive stateful elements ...]                                                                                                                      
combine :: Element -> Element -> State Int Element                                                                                                            
expand :: Depth -> [State Int Element]                                                                                                                        
expand 0 = primitives                                                                                                                                         
expand d = do                                                                                                                                                 
  ... do something to the state ...                                                                                                                           
  left <- expand (d-1)                                                                                                                                        
  right <- expand (d-1)                                                                                                                                       
  let out = combine left right                                                                                                                                
  guard ( ... some check on out ... )                                                                                                                         
  return out 
```

这里有几件事是行不通的：我需要了解的最基本的事情是如何做一些事情来陈述，然后将它传递到每个`expand`分支。我已经尝试了很多使用类型函数的方法，`State Int [ State Int Element]`但最终，一旦我将 list monad 的分支包装在状态包装器中，我就无法删除它，对吧？那么有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-12T16:37:15.677

一个简单的`State`monad 定义为：

```
data State s a = State (s -> (a, s)) 
```

这代表了一个自包含和确定性的有状态计算。考虑`[]`作为一个非确定性的单子，你可以有`[State s a]`它代表一组非确定性的确定性计算，或者`State s [a]`它代表一个确定性计算产生一组非确定性的值。在这两种情况下，有状态计算本身的结构中都不存在任何不确定性。

要以您想要的方式实际*结合*状态和非确定性行为，您需要以一种无法使用 just 的方式将两者结合起来`State`；这就是monad转换器的目的。类型`StateT s [] a`等价于：

```
data NonDetState s a = NonDetState (s -> [(a, s)]) 
```

这给您的是状态值的不确定性，在计算中的任何一点都只能观察到个人选择。

这*不允许*分支之间的任何交互；在一个分支中所做的状态更改将永远不会从其他分支中看到，这是非确定性计算中通常需要的。

# java - Java Regex 查找字符串中的数字

> ID：13843688
> 
> 赞同：1
> 
> 时间：2012-12-12T16:00:42.417
> 
> 标签：java, regex

我正在尝试在字符串中查找数字。我知道查找数字是由 \d 完成的，但是当我在如下示例文本上尝试时：

```
127.0.0.1 - - [11/Dec/2012:11:57:36 -0500] "GET http:// localhost/ HTTP/1.1" 503 418 "-" "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11" 
```

使用我的 java 代码

```
Pattern test = Pattern.compile("\\d");
testLine = in.readLine(); // basically the text above 
// extract date and time log in and number of times a user has hit the page
numTimesAccess++; // increment number of lines in a count   
System.out.println(test.matcher(testLine).group());
System.out.println(test.matcher(testLine).start());
System.out.println(test.matcher(testLine).end()); 
```

我收到一个错误异常，指出未找到匹配项。我的正则表达式模式或我试图访问与模式匹配的文本的方式有问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T16:07:29.563

首先，您应该在调用[**Matcher.group()**](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html#find%28%29)之前调用[**Matcher.find()**](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html#group%28%29)

`"\\d+"`如果您将 127 视为一个完整的数字，请用作正则表达式。

```
 Pattern p = Pattern.compile("\\d+");
        Matcher m = p.matcher(s);
        while(m.find()){
        System.out.println(m.group() + " " + m.start() + " " + m.end());
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:09:41.167

如果你真的想找到个位数，你需要这个：

```
Pattern pattern = Pattern.compile("\\d");
Matcher matcher = pattern.matcher(testline);
while (matcher.find()) {
    System.out.println(matcher.group());
} 
```

如果要查找非浮点数，请将正则表达式更改为`"\\d+"`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T16:39:19.513

尝试使用**\d***而不是 \d+。看看这篇文章-： [在字符串中查找数字。](https://stackoverflow.com/questions/372148/regex-to-find-an-integer-within-a-string)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-01T15:00:39.733

只需添加并使用简单的 ktx：

```
 fun String.digits() = 
      Pattern.compile("\\d+").matcher(this).run { if (find()) group() else "" }!! 
```

# android - 如何使LinearLayout（或任何其他布局）在右侧堆叠孩子

> ID：13843691
> 
> 赞同：0
> 
> 时间：2012-12-12T16:00:52.983
> 
> 标签：android, android-layout, android-linearlayout

我在运行时向我的 LinearLayout 添加了一个新视图。我希望它们堆叠在布局的右侧。

图片时钟图标堆叠在左侧，因此与我想要的相反。是否可以将它们堆叠在 higlited LinearLayout 的右侧？（它可以是任何其他布局，而不仅仅是线性，如果它给出了我想要的）

![在此处输入图像描述](../Images/ea082ea087df6eab3983e40964e7d033.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:27:22.303

像这样的东西？

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="right"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" >

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

</LinearLayout> 
```

蓝线是选择的线性布局：

![蓝线是选择的线性布局](../Images/9fbaad98d16d1d1ac935ebf91f44395f.png)

# javascript - 将数据添加到图表

> ID：13843692
> 
> 赞同：1
> 
> 时间：2012-12-12T16:00:54.280
> 
> 标签：javascript, rally

查看 Api 2.0p5 和图表。

我正在寻找吞吐量图表的变体，基本上有......

*   过去 12 个月在底部
*   图表左侧的总数
*   故事和缺陷计数的堆叠列
*   故事点穿过的脊线，点的次要 y 轴

所以到目前为止，我的所有这些都在我的拉力赛应用程序中工作，除了我所有的号码目前都是硬编码的。我如何才能将这些信息正确地放入我的图表中？

我看到了一个使用商店的例子，但看起来很古怪而且老实说，我不知道我在哪里看到它来尝试和复制。

代码如下，如果有人有想法或想法，我将不胜感激：

```
 <!DOCTYPE html>
    <html>

    <head>
        <meta http-equiv="refresh" content="240" />
        <title>Throughput Chart</title>
        <script type="text/javascript" src="https://rally1.rallydev.com/apps/2.0p5/sdk.js?debug=true"></script>
        <script type="text/javascript">

      Rally.onReady(function () {

        Ext.create('Ext.Container', {
              items: [
                  {
                      xtype: 'rallychart',
                      height: 400,
                        series: [{
                            name: 'Defect Count',
                            data: [2, 2, 3, 2, 1, 4, 2, 3, 5, 3, 5, 4]
                        }, {
                            name: 'Story Count',
                            data: [3, 4, 4, 2, 5, 3, 4, 5, 6, 3, 4, 8]
                        }, {
                            name: 'Story Points',
                            color: '#89A54E',
                            type: 'spline',
                            yAxis: 1,
                            data: [55, 34, 50, 31, 44, 61, 55, 22, 50, 48, 34, 44]
                        }],
                      chartConfig: {
                        chart: {
                            type: 'column'
                            },
                            title: {
                              text: 'Kanban State Counts',
                              align: 'center'
                            },
                         xAxis: {
                                categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
                            },
                        yAxis: [{
                        title: {
                                text: 'Count'
                            },
                        stackLabels: {
                            enabled: true,
                            style: {
                                fontWeight: 'bold',
                            }
                        }
                    }, 
                    {
                        opposite: true,
                        title: {
                            text: 'Story Points'
                        }
                }],
                      }
                  }
              ],
              renderTo: Ext.getBody().dom
          });

    });   
        </script>

        <style type="text/css">
        </style>
    </head>
    <body>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T01:05:24.557

这是一个在 WsapiDataStore 中使用用户故事数据的基本示例。该代码仅按 ScheduleState 汇总 Stories 并将计数添加到 Ext.data.store。然后应用程序使用 Rally.ui.chart.ChartView 组件在条形图中按计划状态显示故事计数。

```
<!DOCTYPE html>
<html>
<head>
    <title>ChartExample</title>

    <script type="text/javascript" src="https://rally1.rallydev.com/apps/2.0p5/sdk.js"></script>

    <script type="text/javascript">
        Rally.onReady(function() {
            Ext.define('CustomApp', {
                extend: 'Rally.app.App',
                componentCls: 'app',

                launch: function() {
                    Ext.create('Rally.data.WsapiDataStore', {
                        model: 'UserStory',
                        autoLoad: true,
                        listeners: {
                            load: this._onDataLoaded,
                            scope: this
                        }
                    });
                },

                _onDataLoaded: function(store, data) {
                    var records = [];
                    var scheduleStateGroups = ["Defined","In-Progress","Completed","Accepted"]

                    // State count variables
                    var definedCount = 0;
                    var inProgressCount = 0;
                    var completedCount = 0;
                    var acceptedCount = 0;

                    // Loop through returned data and group/count by ScheduleState
                    Ext.Array.each(data, function(record) {
                        //Perform custom actions with the data here
                        //Calculations, etc.

                        scheduleState = record.get('ScheduleState');

                        switch(scheduleState)
                        {
                            case "Defined":
                                definedCount++;
                                break;
                            case "In-Progress":
                                inProgressCount++;
                                break;
                            case "Completed":
                                completedCount++;
                                break;
                            case "Accepted":
                                acceptedCount++;
                        }
                    });

                    //Create a store containing the chart data
                    var scheduleStateStore = Ext.create('Ext.data.Store', {
                        fields: ['KanbanState', 'ObjectID_Count'],
                        data: {
                            rows: [
                                {ScheduleState: 'Defined', ObjectCount: definedCount},
                                {ScheduleState: 'InProgress', ObjectCount: inProgressCount},
                                {ScheduleState: 'Completed', ObjectCount: completedCount},
                                {ScheduleState: 'Accepted', ObjectCount: acceptedCount}
                            ]
                        },
                        proxy: {
                            type: 'memory',
                            reader: {
                                type: 'json',
                                root: 'rows'
                            }
                        }
                    });

                    // Configure and Add the chart
                    this.add(
                        {
                            xtype: 'rallychart',
                            height: 400,
                            series: [
                                {
                                    type: 'column',
                                    dataIndex: 'ObjectCount',
                                    name: 'Count',
                                    visible: true
                                }
                            ],
                            store: scheduleStateStore,
                            chartConfig: {
                                chart: {
                                },
                                title: {
                                    text: 'User Story Schedule State Counts',
                                    align: 'center'
                                },
                                xField : 'ScheduleState',
                                xAxis: [
                                    {
                                        categories: scheduleStateGroups,
                                        title: {
                                            text: 'ScheduleState'
                                        }
                                    }
                                ],
                                yAxis: {
                                    title: {
                                        text: 'Count'
                                    }
                                },
                                plotOptions : {
                                    column: {
                                        color: '#F00'
                                    },
                                    series : {
                                        animation : {
                                            duration : 2000,
                                            easing : 'swing'
                                        }
                                    }
                                }
                            }
                        }
                    );
                }
            });
            Rally.launchApp('CustomApp', {
                name: 'ChartExample'
            });
        });
    </script>

    <style type="text/css">
        .app {
             /* Add app styles here */
        }
    </style>
</head>
<body></body>
</html> 
```

# asp.net - 我对我们的内部网站使用 Windows 身份验证。为什么有些用户可以登录而有些用户不能？ASP.NET

> ID：13843693
> 
> 赞同：1
> 
> 时间：2012-12-12T16:00:59.593
> 
> 标签：asp.net, iis-7.5

我在 Win 2008 R2 上使用 IIS 7.5

我有一个非常简单的站点设置，以便我工作场所的计费部门可以进入并为各种客户打印发票。该网站使用 Windows 身份验证，并一直工作到今天早上，当时其中一名销售人员试图登录并打印一些发票。它给了他们一个401错误。当我尝试登录时，我无法使用我的用户名复制问题，但我可以使用他的用户名。

这是 web.config 文件：

```
<?xml version="1.0"?>
<configuration>
    <system.web>
      <authorization>
        <allow roles="MYCOMPANY\billing_SOMECOMPANY"/>
        <deny users="*"/>
      </authorization>
    </system.web>
</configuration> 
```

现在，所有用户都在我们称为“billing_SOMECOMPANY”的组中，所以他们应该可以登录了吧？如果没有，有什么能阻止我？

# wcf - 如何告诉轮询 MSMQ 的 WAS 服务在忙时等待？

> ID：13843694
> 
> 赞同：1
> 
> 时间：2012-12-12T16:01:01.853
> 
> 标签：wcf, msmq, was

我正在开发一个系统，其中包括运行工资单、繁重的负载过程。很可能很快就会有如此多的请求在高峰时间运行工资单，以至于批处理服务器将不堪重负。

我希望通过使用 MSMQ 来组合一个概念证明来解决这个问题（以后可能会用像 nservicebus 这样的商业解决方案来代替它）。我以[这个例子](http://blogs.msdn.com/b/tomholl/archive/2008/07/12/msmq-wcf-and-iis-getting-them-to-play-nice-part-1.aspx "这个例子")为基础。我可以看到如何设置绑定并将其粘在一起，但我仍然需要一种方法来告诉 WAS 托管的订阅者只在他们不忙时处理“运行繁重的工资核算流程”消息。否则队列中的消息将被立即提取，我们会遇到与以前相同的问题。

我可以将订阅服务设置为说“我很忙，我无法接收消息，将其留在队列中”吗？队列需要是事务性的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:09:04.093

如果您使用的是 WCF，则无法有条件地激活通道，从而将消息留在队列中以备后用。

更好的解决方案是将消息接收器托管在完全不同的进程中，例如作为 Windows 服务。然后可以根据您的服务窗口要求启用/禁用这些。

您还可以获得额外的好处，即能够非常轻松地扩展消息接收器以处理更大的负载（通过托管更多接收器实例）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:11:59.300

一种方法是拥有 2 个队列，您的轮询始终首先检查高优先级队列，只有当该队列中没有项目时才会从另一个队列中获取项目

# c# - 按字符数分割字符串的正则表达式

> ID：13843698
> 
> 赞同：0
> 
> 时间：2012-12-12T16:01:28.250
> 
> 标签：c#

我有一个二维条码，需要将其解析为两个不同的项目。我希望我的第一个表达式只读取前 10 个字符（数字和字母）。第二个表达式我希望忽略前 10 个字符，然后读取剩余的字符（数字、字母、_）。剩余的字符总数不一致。

这是条形码读取的示例。20P0000002_0_DP-3_TR_DEBIT

有什么建议么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T16:03:49.443

你不需要正则表达式，[`String.Substring`](http://msdn.microsoft.com/en-us/library/system.string.substring.aspx)会做：

```
var first = barcode.Substring(0, 10);
var second = barcode.Substring(10); 
```

然后，您可以检查第一部分是否只是字母和数字，但理论上不是 100% 准确

```
var isValid = first.All(char.IsLetterOrDigit); 
```

或更平淡无奇

```
var acceptable = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
var isValid = first.All(c => acceptable.IndexOf(c.ToUpper()) != -1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T16:07:26.020

对于您的第一个表达式，您将使用它。

```
^([\dA-Za-z]{10}) 
```

*   `^`= 匹配字符串的开头
*   `(`= 开始捕获组
*   `[`= 开始匹配的字符集
*   `\d`= 匹配所有数字 (0-9)
*   `A-Za-z`= 匹配所有大写和小写字母
*   `]`= 结束字符集
*   `{10}`= 完全匹配前一个字符集的 10 个
*   `)`= 结束捕获组

对于你的第二个，这个

```
^.{10}(.*)$ 
```

*   `^.{10} = 匹配字符串的前十个字符（但不捕获它们）
*   `(.*)$ = 捕获所有剩余字符直到字符串结尾

**编辑：**

正如评论中所指出的，您可以像这样轻松地将这两个表达式组合成一个。

```
^([\dA-Za-z]{10})(.*)$ 
```

这将产生两个捕获组，只有一个匹配操作。

值得注意的是，使用 RegEx 可能是一个很好的解决方案，因为匹配会告诉您前十个字符是否只是字母数字字符。如果您只想捕获前十个字符而不管它们是什么，那么正则表达式就过分了。但是如果你想要验证，RegEx 是一个很好的方法。尽管性能可能存在争议，但您已经在使用 .NET，它无论如何都会对性能产生一些影响。

# windows-7 - 无法将可执行文件从网络共享复制到本地磁盘

> ID：13843706
> 
> 赞同：3
> 
> 时间：2012-12-12T16:01:44.963
> 
> 标签：windows-7, virtualbox

在我的设置中，Linux 主机上的虚拟盒中有一个 win7。我喜欢在主机上使用“共享文件夹”，在win7中被视为“网络位置”。不幸的是，我无法从共享文件夹中执行某些文件（我想将安装程序文件放在那里并将它们安装在我的虚拟机的许多快照中）。也无法将文件复制到win7的本地硬盘。

复制的错误信息是： `An unexpected error is keeping you from copying the file... Error 0x80070057: The parameter is incorrect.`

尝试直接执行时的错误消息： `The specified path does not exist. (I'm sure it exists because I just double-clicked the file.)`

我认为这是某种“安全”设置，但我不知道如何禁用它。

# python - 尝试使用 urllib2 发送 JSON 有效负载，得到 HTTPError 400

> ID：13843708
> 
> 赞同：1
> 
> 时间：2012-12-12T16:01:55.150
> 
> 标签：python, json, urllib2

这是一个代码示例：

```
# Not actual payload, but exact same structure.  Verified that payload is correct.
payload = {
    'object': {
        'token': '6867r474850557',
        'contact': {
            'FirstName': 'Jim',
            'LastName': 'Bob',
            'Email': 'email@fmail.com',
            'Phone': '111-111-1111'
        },
        'request': {
            'Subject': 'Hello!',
            'Message': 'Test Message'
        },
        'fields': [ "LastName", "FirstName" ]
    }
}

r = urllib2.Request("https://someawesomeurl.com", json.dumps(payload), {"Content-type": "application/json"})
f = urllib2.urlopen(r)
resp = f.read() 
```

调用 urlopen 失败并显示错误`urllib2.HTTPError: HTTP Error 400: Bad Request`。我猜我没有正确发送 JSON 有效负载，但我不确定我必须做些什么来纠正它。

**编辑** 这是我试图在 Python 中实现的有效 PHP 实现：

```
$url = 'https://someawesomeurl.com';

$body = array (
    'object' => array(
    'token' => '6867r474850557',
        'contact' => array (
            'FirstName' => "Jim",
            'LastName' => "Bob",
            'Email' => "email@fmail.com",
            'Phone' => "111-111-1111"
        ),
        'request' => array (
            'Subject' => "Hello!",
            'Message' => "Test Message"
        ),
    'fields' => array('LastName')
));

$params = json_encode($body);
$curl = curl_init($url);

curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($curl, CURLOPT_HEADER, false);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_POST, true);
curl_setopt($curl, CURLOPT_POSTFIELDS, $params);
curl_setopt($curl, CURLOPT_HTTPHEADER, array(  "Content-type: application/json"));

$response = curl_exec($curl); 
```

**编辑#2**发送时是否有可能`urllib2`修改 JSON？我已将`urlopen`调用包装在 try/except 块中并打印出来`HTTPError's exception message`：

```
 [{"message":"Premature end of list at [line:1, column:727]","errorCode":"JSON_PARSER_ERROR"}] 
```

我已经通过 lint 运行了 JSON，它返回有效，所以我不知道为什么服务器会抱怨格式错误。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-12-12T16:12:32.077

这不适用于 urllib2，您必须“请求”（http 表示人类）：

[http://pypi.python.org/pypi/requests](http://pypi.python.org/pypi/requests)

该文档为您的用例提供了示例：http: [//docs.python-requests.org/en/latest/](http://docs.python-requests.org/en/latest/)

我的一个项目的一个例子：

```
def query(self, path, **kwargs):
    """the token must be given as GET and args as POST JSON object"""
    encoded_args = urllib.urlencode({"token": self.token})
    url = self.url_tpl % ('/api/%s' % path, encoded_args)
    headers = {'content-type': 'application/json'}

    data = json.dumps(kwargs).encode('utf-8')
    response = requests.post(url, data=data, headers=headers)
    if response.status_code == 200:
        return response.json
    else:
        raise Exception("response status: %s" % response.status_code) 
```

# mysql - MySQL 日志阅读器

> ID：13843712
> 
> 赞同：2
> 
> 时间：2012-12-12T16:01:59.957
> 
> 标签：mysql, logging

所以，我正在尝试分析我的程序的一些 MySQL 查询。然而，虽然我打开了 MySQL 通用查询日志，并且可以在文本编辑器（例如 notepad++）中查看日志文件，但该程序每分钟会写入 1000 行查询，所以我可以使用更好的程序用于阅读日志。会很好的事情：

*   更好的语法高亮。
*   实时更新。
*   查看长文件时不会太慢
*   处理日志中的随机二进制序列而不中断

有什么建议么？

**编辑**：仅限 Windows-7 兼容程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:07:17.920

您可以尝试使用`tail -f <file_path>`. 这将跟随日志，因为它被附加到。

此外，您可以尝试[multitail 。](http://www.vanheusden.com/multitail/)它支持语法高亮（通过正则表达式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:07:09.200

[Percona Toolkit 中的pt-query-digest](http://www.percona.com/doc/percona-toolkit/2.1/pt-query-digest.html)（= Maatkit，但不会进一步开发 Maatkit，所以切换到 Percona Toolkit）。但是不要用作“实时”检查器，而只是用作批量工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T16:44:08.617

使用 mysql 日志表，如通用日志和慢查询日志。

使用以下命令更新您的 mysql 配置文件：

```
general_log=1
slow_query_log=1
slow-launch-TIME = 2
log-output = TABLE 
```

**或者**

您可以使用[**MySQL Administrator**](http://downloads.mysql.com/archives.php?p=mysql-administrator-suite&o=-win)查看日志（一般日志、慢查询日志、错误日志）。

**或者**

您还可以使用[**TextPad**](http://www.textpad.com/download/index.html)软件查看该日志文件。它可以支持超过GB的文件读写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T09:43:05.270

到目前为止，通过测试一堆程序，我发现最好的选择是[baretail](http://www.baremetalsoft.com/baretail/)，它具有良好的实时更新并且可以很好地处理大文件。它可以使用更好的 MySql 特定语法，但还不错。

Alternatively, it turns out that there are actually options in [notepad++](http://notepad-plus-plus.org/) (in preferences: misc) to turn on real-time updating, but this doesn't work well unless you have focus on the notepad++ window

There's also a windows implementation of [tail](http://tailforwin32.sourceforge.net/)

# javascript - 使用 JS 检查给定日期（字符串格式）是否超过当前日期

> ID：13843717
> 
> 赞同：0
> 
> 时间：2012-12-12T16:02:11.297
> 
> 标签：javascript, jquery

我有一个字符串格式的日期范围，例如 12/20/12-12/24/12(start date-end date)。我需要检查开始日期是否已超过当前日期。可以使用 JS 或 j-query 来完成吗？日期范围是字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T16:08:13.627

使用[`Date`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)物体的力量！

```
var myString = "12/20/2012-12/24/2012",
    parts = myString.split("-");
if (Date.parse(parts[0]) < Date.now()) {
    alert("start date has past the present date");
} 
```

你也可以写`new Date(parts[0]) < new Date`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:13:19.270

使用[datejs](http://www.datejs.com/)

```
var today = Date.today();
var yourDay = Date.parse(yourDateTimeString);
var result = Date.compare(today, yourDay);
var isValid= result == -1; 
```

`compare``today`如果小于则返回 -1`yourDay`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T11:20:29.807

thanx evry1 ..我在这里得到了答案...

```
 function cancel()
{
        var eventId=status_ID.substr(0,status_ID.indexOf("-"));
        var status=status_ID.substr(status_ID.indexOf("-")+1,status_ID.indexOf(":")-4);
        var eventRange=status_ID.substr(status_ID.indexOf(":")+1,status_ID.length);

        //alert(status);
        //alert(eventRange);
        if(status=="OPEN"){

            var startDate = eventRange.substr(0,eventRange.indexOf("-"));

           //alert(startDate);
          // alert("open");
           var todayDay = new Date().getDate();
          // alert(todayDay);
           var todayMonth = new Date().getMonth();
           alert(todayMonth);
           var todayFullYear = new Date().getFullYear();

           var todayYear=todayFullYear.toString().substr(2,4);
          // alert(todayYear);

            parts = startDate.split("/");
           //alert(parts[0]);
           //alert(parts[1]);
           //alert(parts[2]);
           var flag1=false;
           if(parts[2]>todayYear){
               flag1=true;
           }
           if(parts[2]==todayYear){
               if(parts[1]>todayMonth+1)
               {
                   flag1=true;
               }
               if(parts[1]==todayMonth+1)
               {
                   if(parts[0]>todayDay)
                   {
                       flag1=true;
                   }
               }

           }
           if(flag1)
           {
               alert("event can be cancelled");

                document.forms[0].submit();
           }

           else
           {
               alert("event has already started");
               return false;
           }

          }
        else
        {
            alert("The event has closed");
        }

    } 
```

# powershell - 获取 PowerShell 中方法的参数

> ID：13843718
> 
> 赞同：6
> 
> 时间：2012-12-12T16:02:12.203
> 
> 标签：powershell

使用 Get-Member 时，有没有办法获取 Method MemberType 的参数？

例子：

```
Get-Process | Get-Member -MemberType Method 
```

这个例子我需要的是列表中每个成员的参数和参数类型。

这样做的目的是获取我必须为其创建文档的 COM+ 对象的成员、参数和参数类型。所以一个例子不能是.net特定的。

我会将成员和参数信息通过管道传输到剃刀模板中以生成适当的 html。

编辑：一个更好的例子是这个......

```
$comObj = New-Object -ComObject COMAdmin.COMAdminCatalog
$comObj | Get-Member -MemberType Method 
```

在这个例子中，我需要为每个返回的方法获取参数名称（如果有的话）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T16:08:39.450

`Get-Member`与 PowerShell 命令相比，它更多地用于探索 .NET 类型。对于命令参数的简单“视图”，请尝试以下操作：

```
Get-Command Get-Process -Syntax 
```

有关参数的详细信息，请尝试以下操作：

```
Get-Command Get-Process | Select -Expand ParameterSets 
```

如果您正在寻找有关 .NET 类型成员参数的更多详细信息，请尝试以下操作：

```
C:\PS> Get-Process | Get-Member -Name WaitForExit

   TypeName: System.Diagnostics.Process

Name        MemberType Definition
----        ---------- ----------
WaitForExit Method     bool WaitForExit(int milliseconds), void WaitForExit() 
```

至于 COM 对象，这可能更容易受到影响。PowerShell 并不总是获取 COM 对象的类型元数据。顺便说一句，我确实获得了您在问题中列出的 COM 对象的参数信息（参数类型）：

```
C:\PS> $comObj = New-Object -ComObject COMAdmin.COMAdminCatalog
C:\PS> $comObj | gm QueryApplicationFile

   TypeName: System.__ComObject#{790c6e0b-9194-4cc9-9426-a48a63185696}

Name                 MemberType Definition
----                 ---------- ----------
QueryApplicationFile Method     void QueryApplicationFile (string, string, string, bool, bool, SAFEARRAY(Variant)) 
```

恐怕这就是 PowerShell 在这种情况下会给你的所有信息。

# c++ - gdb 7.5.1 调试通过 g 4.7.2 构建的可执行文件的问题

> ID：13843730
> 
> 赞同：4
> 
> 时间：2012-12-12T16:03:46.243
> 
> 标签：c++, macos, gcc, c++11, gdb

我一直在更新我的 Mac 工具链，以便利用 C++11 功能并最终获得 STL 数据结构的漂亮打印调试。我使用 Homebrew 构建 gcc 4.7.2 编译器。我已经能够使用这个新编译器重新编译我当前项目的源代码。然而，我尝试过的所有版本的 gdb 在设置断点、查看源代码或查看局部变量时都会出现各种问题。

我认为作为 Xcode 命令行工具的一部分安装的 gdb 版本 6.3.50 无法显示各种基于模板的变量。我还构建并尝试使用其他几个 gdb 版本（7.3.1、7.4.1 和 7.5.1），但每个 gdb 版本都存在一些问题，难以设置断点、查看源代码和查看变量。具体来说，这些gdb版本不知道头文件中定义的函数的源文件或行号，这些头文件函数中无法设置断点，并且许多局部变量已被“优化”出来。

有没有其他人遇到过这些问题，如果有，您是否能够解决这些问题？为了避免这些问题，我应该在我的工具链中使用哪些版本？

作为记录，我的开发是在最近的 MBP 上运行最新的 Mountain Lion 更新。我的 IDE 是带有 CDT 版本 8.1.1 的 Eclipse Juno。而且，是的，我已经对我构建并尝试使用的所有版本的 gdb 进行了代码签名。

感谢您的任何意见，

鲍勃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:48:20.937

> 许多局部变量已被“优化”。

调试优化代码时会发生这种情况吗？如果是这样，那是*意料之中*的。您以前可能没有看到这种情况发生，因为旧的 GCC 并没有优化那么多。

`-g -O0`修复：使用标志构建要调试的代码。

# html - 使用 iText、图像 base64 将 html 解析为 pdf

> ID：13843736
> 
> 赞同：10
> 
> 时间：2012-12-12T16:03:59.197
> 
> 标签：html, pdf, base64, itext, image

我正在做一个 PDF 报告，我必须在其中插入一些 html 片段。我完成了 iText5，我的代码是：

```
Paragraph paragraph = new Paragraph();
HTMLWorker htmlWorker = new HTMLWorker(docPDF);
htmlWorker.parse(new StringReader(...html string in here....)); 
```

一切正常，但是当在 html 代码中有一个带有 base64 源代码的标签时，就像这样

```
<img alt="" src="data:image/png;base64,iVBORw0KGgoAAAANSUh......" /> 
```

它显示以下错误：

```
ExceptionConverter: java.io.FileNotFoundException: C:\data:image\png;base64,iVBORw0KGgoAAAANSUhEUgAAAOUAAADpCAIAAABUaWc6AAAgAElEQVR4nO2deXxTZdr3z8wDtK6AioAsohVFAesGMgjCIOrIzIBLBwd8B+ZFh0FnZNDRF3kUpoNsIooOCLi0jApaShegi3Sj+56kW5ZmOznZ0+xNQtM2bfP+cZfD6cnZsxZzfX5\QJuepCff3rnu674WyB+3uI0eg6L9AuIWNxYW5zVuo8nivMZtNFmc17iNJrvWePX5fDqDAUiqgMVyJZnQh9lstmi\6rgxtVHPKwBUIodFsEZm9iCuAc4Sq40iWCORw0aTKdq\VtyIbVTy6nZ7EI1WLIfFWmMwgNLgqzUKlWqxXAkjarfbE+1fOm5+\6jj1WgyCRVI+BilkERjFcths9kS7Xvws7bRwavX6xXLlVKjPSqk4iQ12sVxnyFKFuu86gwGkRwO0jENk2Rmj1CBwIja5\NF+z79XCx2ebXZbEJEH3UoKaT3DJguD5ouD2qclxGdCVapYRhWqVSGKxbnOOQWi7z6fD6xAlbYe6JOJCqDZ9DeO+jsG+ruG+odGGL7G5lMJhiGEQTxer3huGM\H4s5Xo0mk0RjjTqgiGvAeHnQ2TfU4xtijSe59fX1aTSa0F3vZ2exxatMqYrusqp1D1i9g+7+IfZrKAtDECTuKnCzWOHV5\OJ5NEJVAFZega9YYV0pFmtVrvdHrGnu2YsJnj1er1hjfxTSOcZcPUPDUYO1KvW19eHIEgUnng0W\R59Xq9UQms6jwD7v5ocDrS4r4BK4syrz6fL\JBK4Nn8LIv+qSiFvcNmFs0efX5fCJYE0lS1a4BZ190Pv2pLe4bMLRo8hrhTADT5cEIbqhY2OXLl8H5QhxZWosar1IFHGEfwDswRKbLviFnHyPZewfBmRat9B4WL08kh+NHCUwsOryazZaYOr6KBcmM3VIFHJW3YxRZFHj1+XwxcoIVg5JorBqtLvJvymixKPAa3XOBUSGhMp4hTmyR5lWj1UWdhlEhmdkjkcfdA7xFlFefzyczdkcdhVEksdoYL4fEWkR5hRF11AkYdVLYe+ILLWqR49Xn80UrSeAakFhtjHu0\kjyGuGA67UnmdkTDx1EkNfYqBYc7RLJf9ZFChHiFdFoo\5OXzOSaKw\201YhHiNe66hlczsQTTayLx3MWWR4DUecw2TxHJlBN6+mLJI8Bqtjiw\BwkR\c\KnQ07rz6fL57aElZJNFan0xnu9zFGLOy8xs8IIiCZ2fMz6Y8Udl7jzkBkpLD3yJSqcL+bUbew8xqbra+uVYnk8LVdvRheXnUGQ9Tfwp+bru0dWHh5jTsDUZHUaL9Wd2Bh5DUeGcBK6egt5DUDZZQXA6FfKeQ110jlQEpHbxxZMgsjr2azJeqUxI5aNEYUU2oJQ5RoITN2X3vdwMPIazxnAKuy9g6GvDYqQxYBVNh7rrFj2zDyKo4nEGKUW1vNkNdKUWdon1qhunbaGoSR1wj3bolliU1OhrBmlBdf5PND\gKuGWTDyGs88oqqTqZgzmt2TWU4XsO1gWy4eL2WNlsSc3eDAoad\ZyvgI0JMFEwIQKxySm3XSb+1ujP5woXrwrVtRB5VTp6K0WdgKHz9bXcdu5KR29mZSkrXjmHCBoUcGZlaVbVpWYV8WZ3tCMbLl6vgaYYDQo4q+oSFqPMytI6mYLVRYRGO\PIAKrilha2yCodvRf5fOxF8psaJGaC6vlRjWy4eI3xUUTUatEYz9fXksFExgEqibm7Uakubmlhu6zilFV1qaStrVmlJft8R9Wut2bXVAZeAfyBBXoyoxfZcPE6SjtkiU1OJr5m4EKrdPTyEX25UMQ8bsVKeY11VRIZ4aJbJZFR\yyhJwMj6jC99WG1cPE6GqthGxQwK4Yu8vntemuVRJbf1BAORmkXXanVzfypK0Wd2G2cwt4zGlNmw8Vr1OHjIA6O5uhSdk1lq64L\X1lZs+oO7ANC68+ny\q8MV5JVReYx32V5aZPaOrNDwsvDqdzqjDx0G0juA1oOKWFtxvPboyueK8XlWNVB51nsItwuQEicY6WlK8w8LrKC0r+Dnw2kCShCRE9KOikCYsvI7SBhnNKm3UeQq3WjSkjXbEo6FrZ1h4HaWHsWHl9Uxl+dma+pymdlTZDYLsBj7636y65syqinDzKjZRuWqxX2Eb5\Wq+Ig+lIBWlOTUC3J5kgstqoIOU4HQwlB5bdpcniS7rulMRVnIeaXOpFHYe2K8ZScpr3a73XDFLBZ2UbpRymu73ho8EGerq3N5kvx2A3NAqdht1ZwXKLPreWcqy4N\bVlVl2hvgsLeE8tBWVJeHQ5H4BdNJhM6iQ+GYRRoj2dE6+dRyisuX4SVilp4PKRTd9lWr7aFhNRAnRcoc+oFwYCLC76SSWq0x2wvb2Je9Xo9h2sBdmEYVml1XT2DxsuDUUeQubgdFmRVlfE1Ml2PzdTvBGrtcgSiJjDaqmBrkcRSILR8mVcXJLjneNKz1VyyFLKqLlH7r6hiNlxAzKtWG7IitYEhv3dgyNk35OgdNHhilGA0yZW5ztVVtuoUWFJN\U691wmgxKqk04o+oE7Sdvfs2RAErVr75\VvvLv7xJlcvo7zcptd18QB2XY9o1Sk2AwXEPDq8Xj6+vrC95T9g34wr9UUGwsw27BrZmUpXyPDYopKZLUHglUut2IfU9PRBGFs8rQZu0+cCcZJYLvWZlaWYrMIKBSDJTQEvKpUqki+gt6BoR7fkKOX3YDgUIltDOuioEHjMRPCaup3VsMEzms1PGIN3n1oPxRgb+05EoyHkMuTsAomMEQ2BvdeBLxardbIvw7UegeGnH1DIfEc5LbL1InVzHtYAAdA1IWQkWrqd2q9zkKRNRCmBs0IXlc8uxJLatKcebtPnDlw8lyQTm1emz6rjkWVWGZlKVnNDFZSoz2mjmrxvBoMhqi8jkAbGPJ7fENW76DWzZFXdL+f11h3kc+vkcqbVdp2vRXk27fqupjn\1eIBBSkAoltBDutAqFFYLzKq9plSkhMxPI698H5EARt3r4nSF6BzjWLWH1cMEFWqIyhzG48rwgScy6L3+\vGxyys3QYqIP\WVWXmMNaJxcaeu20vGp6iHltN9uxvM5Lno\ldV7y\CZZe9qFouBhFZodSpdTZtOdqyOojSFTgwJu11uBGhQw2sarRiov5DWDwoTYOfcawavX6w3rTit46x0YMvfQuwqws5+wnomtsqvLZDYdLamoyuV4f6BcbtX0OLCPefTxBVhe77nv3ufXvqR2mYRmB6E7wVzoEyHuLlbIUgiEbBX2nhjJORzBa4R3WpzNN+h39A5qyP0EDvEpQlg7LVrmsJr6nQLjiP1Wrcpq7MM\Zveh\Un3zkZ5ffTxBe\sfA9o6473tv7r0IGT57jFaJWu4Zia3uvU9dgKmmpCgizwGYQIl5B8yG0Er2zPXSNgIHwL5OwblqVn0HSZNJrLqvkPmTIrS1mtrMMLm8eJ0sPXD7utUrM6pyR\89bXFy9bcvuUyRAEJV5xYWfNmrVly5ZZs2YFRgxuuGn8r55atXn7HuZbManDAdySMpkV8YQM2eyaSuDxx0JV7VVeIwwrSqGrf5hCe++g6fKw1EGEBfIa6zi\N59+m5ay8U+b\7mtQdbOFlagMpm1UGQVWe2mfmdOSf7za19KSEz85ZgxWBbLy8tbWlokEgm4FcuXLw\kNXHCRGyMduXzf6QFFzwpcKOLJVZjn1PjMYfEMaiSyMC91UV7O36V15DstKxWKziV7b7sRZfDrp5hCiMQYWVb44pTWl7OvXMfgCBo\ITxOSX5HHhtN9uVLueJU2nzkuePu\Gm2c+svn\1WhyvqampHpOx5sP\BTeNkFcIgm5Num\2M6sf2bBl7ouvTE1+bEzidZOnzVj\xrunKkSEvKrcDuy2D+zzNB7zRUGw5buZlaWgB4LM2B3d1IJhXn0+H8VOy+v1oqktKpUKhmEYhhEEQb8Y+CNRqeeW2y4H2aLiZME5mU33\NqXuCGrdpl2H9o\486ZN0+bOffFV1bsPJi04rlAEJcvXw6XFGasWupQyvzkvAIbd+NNdz7x68Vv7li+Y9\cF1+5Nem+G24av2rtnzPrFYSBCJRXsMSa+p2GXnshj\tnDhBa+BXd8NYwr3a7Hb5iZFlXrCwq\V1K2tqCeUuyqsoq2ho3b30d3cK\9NJLGXnZapeJCayff3Ps0ccX3Dj5juT1r67YeXDh5m03T5tJiGBiYqJNjZx7ZU2\x+2n4xW73N6\eu3yHfse2\T3W5PugyDoD6\9A5t+UCiyyrsdQrMD\S+62zP02oP3ZdGmG1E8p712+hEFn73aqlMMf6ZrpLsP7X9xbQpIqpw1a9a85Pmbt75+4lRau0YaSGpOST4g9f7Va1fsPLhi58H7Vr047sabKOArLy\P+79\kBec8zPmFdiYxOtmP7N6xc6DyetfTZwwcfpds7d\BWKLDbbBncOrOuxXWgIqvcMmo4YxfBW2HiN+GQY2NkfTC8gwhOsv775xrZt21BWJt0398bJd8y4c+bLG9Z\dPTTmo4mqVn9\NqXEidMnL92IyB10evvXH\b7bTYpaamnntlzdnnn\KYjKx4BTZ5bvLyHfuefPffE+9MgiBo5fN\JDw+wP06oi4kyD9pqdUN7rZYbQwTOdQWvv6EUWgGLzTaufmvxS1NZP7oxs2bsGvb1OTHFm7eBjZAiRMm\nLMmNnPrF6+Y9+KnQeXvLVz0n1zGQK3fPnyjFVLM1YtvfTeVg68QhB04+Q7Fr3+zvId+6Y9ugiCoDV\+isW1mIJ\pwCiK+RcYYVjRIMIxuN8FbY+mdFaXgBh5rszMpSuNtI4Zh+dPRT3KH\5LnJc1985ZENW5bv2LfkrZ0AX1a0JSYm\vi7ZQDZh6dP5cArBEFjEq8D6\r9q9dCEPTMC+tEVnutyiqy2gPPKVBx23udr6\F9TmMilcQLl6NJlNUeEXYN7PmIZ20e6mC6pLxE8Zzo4rMdi16EPD6wK2kV5542+3zFzxBfZ27lj29YufB2c+shiDonZ3v0f4uGo85u5p1JSNha8TIxwrCxavX6w0hghUd8JmyZqC08xU\ljSi\z1T1ixARiTMS61uXJ9hCmVVlVHks44IrGqkIM7FyhISE59f+9IPeVmB31o5cyoTXtFo66kK0YGT5w6cPLd5+571b7yL5fjWpPuefPffdy17GoKgk1mnaX8XHsLuvLpGKid7ayJ8ghDOeRtGqtxTVvqusPbY2WIyFfFluMczr8wmqxSgWGhxCVZkmK54duXn3xxr10iNfU6h2bFg6VO4x0y6LhHwOum6RMKLDGNNtJcqEFpy+bpHl6xAH5Y4YeLCzdtmPL7k9imTcUEMtct04lTaimdXjp8w\vm1L33+zbFWdSfz8FZeYx3F7Aap0R7JSq9RMM9I0uWmgPXY2eLsKnwPM4RZ\WB+Yw0rWFGVNle\v+dfi5ctufHm4aVx\oIn5i944vfr\vzmB3syLjUIjLbWLoe82yEw2kCM6YPPvw1k8cPFD9HyCkEQWcFMLl\3q6dWoQ\75Zgx969ee2vSfS9vWI99tZ9\cyzwmrOS7l6V8uKOj\bSOve0JYqiCFZ6hXNeXIhCBDUSLTWvJ\OrA38KdvbTxgqEJhU3Xq9+sOqYVm\n8nUTA+JcKbPvzFi1dELCOGpe5yQ\RnHllc\EftgELgoba6m5hVryQsXbPjblk+\TWPlCWAVsbKZcPoDSlVIeL1Q10HN67GzxXI7vm2JxNxNDeuFBo6LK1Yqt0NgtNWqrIGZr4Fa86e\4kC548brM1YtpYYJ2Aeff8scWQiCFi9bwpxX1Cbccsurb21FbxGamUUrsTZC4diIzjsWINYfShqK+DLYwWKW1de5l2h5bdXgd6+0gS2+mp3nCiSy2tvNpNEixOOUOR0Co61BY6uCrVWwVWC0Cc0OebdD63WWNlcHInLk1wsCvxho8xc8Qf3H8IfX\oH7kWZ5O1teIQh64KFk7F2iHfWBKjKHtOGdJ391tetyZ1e1oHh9V1gbSBihGuVGWliPnS3ObxRJutzYH6Ru7H+mogTbOkDpcgqMNoHRJnU45N0EYXbAYoXCikbjsVUuzIUrLoAgaE3SDIYkHckqJyS1pNNaBVvLZNb1b7yLfTzqxeaU5DPndey4cdgbxaTAC0hm7I7AxiuMvPr9fonGKrf3FjZ1nsgpxRF2Iqe0rFVB+JtLutw1Em1uTVvahUomsGL\DAqbOpvhLqnVTb24lnW0YDHCfZprvSMgM\Y5+XoCP7WkczjPlbk+Ovopjg\azRZqTz73AiGvaGK46Uqx+G9+85vc3NyFCxdKzWq2vEIQdCI7A71RJW1tzD8JI9BiI7y88qQI9af5DyUNYF2U23vrpfr8RtHJ\GpWjBLqv4U08XCFw4C+x\JufJ2gzHl1iZU5HSWdVL5pkcRSq7KCtFdaXqVmdUJCAit6UJt42+2EzWDq1SPyWj7\5tjJkyf9fn9qaiqIxbLlddfhj9EbxaRF3FWXwN4T7uzYMPKq1eplXR5atr7OvXSqqC54RrE6VVxCAWt2TRX2Da5V4XFEM0UaGW\C66k8FXB1gaNDXgXIKQFpPcOL9XLV73AjVeIZNdVobDi\ipeeDll\79ixYtWrjkiceXLLl\Pn3AGGspG\80IorCJpU53EtsGHnVGww611BI1ktWOpFVnHGJanEtabuaiqVyExRh83Q2sm8FrwMnz3HmddXaPwdesFiC51VqVo8dNxaCoF\84hcQBG3\+CtWz7JgyWIOIa3ILLHh5dXg8jOJRrFXEcV30\JojglatAr0rSUMoNaqrGTfCokmT2O6x8LZ5GkzCC8YmIqFTSubmXQvq2e5Y+YM7O0q5DUz5xVxDYjkYQwUhJFXp9NpcPlrOnURXl+\u0jDKxoZIOsgVCazkn0rJMJt5FnZJ6d\IrxmNWwT2xwgjiEw2r48X8GZVwiCcHeM7Xz78CUVhJ1XqZnehQ2l6JyB8\VXjwlw7QKwImzjylanKkS7T5xZ\8a76994Fz3rBxnWnG39G+8SPlexBH9mMedKiuOvf5vC9lm+L8ofEatmWS0i1hrDFNsKO69a1yDbsBT+8\1C5Zmy5pP5Vbivg+SsH0oasF\85jzN4lonE6JRqmIJ6QoazOL6ZV7d33Z9DPKnfjlmzMQ7k6YmP3b\6rWPbfo7qEGY8fgSDqROv2v2\AVPYHktFFn5epvM6UADcJoeh9DsAG0SPzn90\S7ZkMQ9LddH7N9LmyIIKO8uKy9gxWviGtAqgjLxiu88SyDy693DWFPChjqVFFdWatCgFjRg9ZAPxh7dwSItbxDkV3d+EMpVWQgo7wY22MQjf+HREeyylc+\8dxCQm3Jt2XtOK5RzZsWfT6OwDQFTsPPrbp7\evXnvXsqfvWvb0nU\8mgOvuJ5whSIrNu6Gk97rFNscHxw6On\BE5n1iiB5za0lyNCgXWLDQVTY11eDy1\RoWLC6Imc0tyatkY58YAoQl5hZ3+Lxshqijs22zUkEYBTFaK\7fp4+pwHpj26CNSvgiquRzZsmf3M6qnJj028MwnXf4Cb\eG1f2CfF3ir1Pr8m2MLn3yqQGhh+1yBeVsMWxyPkCZkXdpRCxevbrdHaXQAXoX6bmpST+ZXV3TA1EkFOF6\uVDMto4go7z4TEUJ7h1lG2HFkZqy+a27lz29cPM2sIgu3LwtacVzN06+I3g6Aw2bCMvwXO2jo58u\vVTHCJor29\J\Du5dZWlwtFLRpjFJNgwsKr1+uVaS0AVoPLr3MNkZ1yfVdYWy9l5MvjeP2hlB2pw5utgJwsLdHEAVqlFwme\O2Ldy17+sl3\w1Kq6c9ugjbQSgchqa8MD8Efmfne+Bnf\HLX7J6LmyWFqGKW1oalWq0XDZiS2zoefX5fFLEgMIKFOjCfp17qaKDRYIsjtcfKYMApHe5lRf4prabCYYOUOhvuz6edM+cxW\uAF4pWVOMkNvdc+YVCC2tXfRuAKrdh\a\vGH9sdOn7pjB7kXijrgoRJ0QE\IlNvS8SpRaHKwGl78S48KeyCkt4ssCM1aplVvThuWVA6wZ5cUFLR24XBYQKGCSvVogtGTWK5787YvYdhVhQpPQJt52O7ZVNyvNuDMSvMJ2T7iXWI68ytQmg8sv01o6YV2nHFaqEL3B4PP5xHIkEFaDyy\UOVFXlaEDgBMubsWN13M8aZHEEritljroN17pRYLpcx5YuHnb4jd3TJ6bHCYoqY0s1zG6vKqcvRK1uqWtnscrF8EKlXPEShTaxrFceJUriaGkkL576OvcSyfzq3FZqsyFy0Pgxut5gRLAx9PZcDnXgVkvuFjVnfMfWfLWzuT1r4Zks481Jv1ggJ2vbeTG6+Jl7CK+zHmtbuPzBZU8XjkqQWutzDAimBDCahnWvLrdHpXZy5ZXg8tf0iJnVVYQDl4vtKhQBMvlVsRz9R1FPKQHsOlFghtuuXX5jn2gLUXIbcbjS6ibbaH2waGjkeGVdr+F6lJ9GRZWVO2SVnShDWGbAta8ihUaDrB2wjqRnHs5l9zei8v4Dp7XAqGlUGTFNpkiTHDJrFdMu+c+EKjiRCN095x5oHr2D6\9A5zNgjYCn5z+6UhWOQRBiRMmMvxLeGLlqsjwShjPYsUrj1cuN9lCvsSy4xXREOylaCVTm7xer0ar48yr0IiP4IaEVyDsJqa1a8TQi1y+bsrMWUve2knRbggckz753AuAxbf2HAE4knUVxgkc285+ZjWTvIJxCQmwg1Fzz1jgVaq7ulEJVV4sC159Pp\S6GILq1iOgNQHn88nMxPtHxmoGe4KCa+o\4pbZbFBA+yMwl89ter+1WspYL17zjzOA2CBQDD\xsl3LHlrJxPPOC07iwOvL29Yz4pX2r4EbHmVmT0hyYBhwatEDnNwA7CvUiTn2GSzrFUREl5zeRJCaLAlJejxwebte6YmPwaa\BDauIQEshpAVrp7zjwIghi6HGs3\t9w8DrxttvnPvLost88k7LxT1t3\m9aXk7wvEqQER5gSIZ4MeXVaOpiC6tCY8X9SXF2Cc6W8\G8cjovyGloJYMGVF9pvcMDXnafODPpnjmgiRqZkaX2sRVo\TLpvrkrdh6k9QqmTp\Jgdd2jfSHvKx3dr63eNkSoHd2vvf+nn\llOSXNlUDFyizqorDLaXgVawacR4UkrMDprx6vV40H4CJlEZXYLNFbi4B7OgPzEjkdh6bXc8jgwZM0dZ7nQVCS3qR4KaJt1IfXD26ZEVIYMUtsUy8AmzvlpCoXm3L7zCzmpjMhFeREt\XLPizAxb+gNHUpbX3MeRVqyWOEnNwCQKd12Nni78voskbJFRWbQMFNOBcvkBowfZRI7S7Z8\+qUMfQl6BFzt5bjLaGZPC3n6fvmkmW4ktLEY\M+RVKBfj3srgu3Kziw\IFCqGeyyyK3BwCUpa5ATJh9lFaXnF3xWVMG+dmVFefKaSyt0EA1Ve\gu+UQrObp8yubS5WtPjoEj35iAQKACzOqi9gocWPBZaWI19zksSZch57ZAJA99Nm80WOV79JOkBOFG3XWbbZ\NMWTNFLmKrxi402utkCuqGLqjyO8wU0PxQVEENK4RpsKp0hbLGC8Rix914E+jZTX2CkFklqIKtjbrhnjTBwKr3OqthG9vB3rmVJfnVpcV1pXVNl8h4bRXyAt9NcXB1B6x5pXVkJXSRNjGbVvGwoz+wNwxWJS1Xq42Vjt5yIc19JwzBonqQrpk1roE1OjwoJFq19s8QBCWteG7FzoOPbNhC8TL+tutj7A9SFBpQS+sdzvXJqqNJJi5uaamRyvkKuLGtngxQ2i0X4hqQGbu5sur3c8sfoIgVaO19tOXnNpuNOa9VQjV1rvd3hbXYx9NONTrXTBrGp61zwvVVBQom4xsn0HPzl2PGgEIaMEiD0HC7vSKJBXu2zFCIx4m2rjlbU0t937BdYGVGS0t7I2dkNVodJ1b9\pDzSru4AhOriYteAsWk9YsQ42DAzn5qjzanXkDISnqRILA\K9ZWPLuScHCcsc+JdiMM3qPFxraW79hH5siOS0jAnVPgpm3RSum6GmnObzecqaDavxLWb8kMXXxBNRNkcRuvYNIJuPDaSX5wYLPZmVxBoWIUJWi\koVIrcKmTuxPFbe0UG25KsoIQcE2qiZcWRlOOTT1O1XuoLZioJkr8AoWv7ljTOJ1hC8J15uoCsZ3eaF2A7Ce93m+jHpxJauPVTl7O2RCtsgq7D1er5cDeH5uvAaWDwwvrkqm0TWfz6ew99DyyrCw9kROKTb7m3bkcV6rBofIl3l11LCy\ajV9DgY5oATegVzkh\75ZgxoP57\tqNZBHZu+fMW\Gu6CDBq7rG7Vw3RWy63nUd6xFQ\V5KEFUTJBt72xXXSn84nzWxWW\Rba4woiG+XVoA7HYxTX9QkVmWfMlgRIot7IVN4EDW1pD20wzp6kdhwhFwHX3of3ctjJg380N2S\z6m64afyYxOtA1U3y+lfJVllg4xISfvuHdczPEXDLf2ZVBcXtyqwspe3vojA7mPgGbWKBWAVLdcZ2GcdZc6x5hRHifEKtvY\VIk89oEtquQwSXvPrhB1qO\F5b1dPCU+WfqHi2NnitAuVUsvVTtDU5d1na2qxw60JJ2FAEDRl2syCanw9LVtxbsK1+8SZcQkJiRMmLnlrJ6i8ZZIj++jjC37Io0mIwRVT5LXRzNJh2D9LYe5m6M6iamoqa2qqEgga29oEXV1dYeGVrOJFrGCxuA5fSkv6KXOmrPn0xXq13Wdw+f97KiM1NVWMWMjW9cJ68bGzxbk1Vzvr0g6HWbkmBR26Qri4PvncC5n1iiBDm0Ccu3K8tecIdGXuJpj3ybBSfF7y\JySfLLXg6ukyGlsp75XdTIFE14R1wBs97BFFsNuudvtDj2vZCmFUrmK7aXIZnYWNnXm1wl1jkFw5aKK+tTU1G9Pn\kq7b+pVxsicGcAAB6hSURBVOzgx4fOFZYiFq\B5W+Ran\MLdx\6LP\HPuytl2KuAZaNDSni\u+ShuXkLD7xJn0IsG4kQ2EJ952O4oySCoIRkG25ACr7JjE68Dk7yff\TfzEbWLly0JnCau6RnxevI7zGcqy6nvFe08I6yUVpegtZYbsjxeQ4h5NZtJFzkOo0QDd11Sy+WiZmluZevVD32jO+2\p1ID7JNPP0tNTd23\0CHwniusBT9+v6PDirtvUpHL\V78MOlUgiCxiUkPIYZ4zZ52ow\b\sA6yoUXMnb4izqsjCGviz4BLg16T7gzjJvZzR+wnic\41rbH+eTzOVhEMnItju4YysVkvzKc2OV6mcOH9AaXSxhRUYdkZXq8Z+Mr\69MV6dGXtUBg\3LMHR+qRYyekOofB5ZfqHD+ePbdv\4GqxjbsAzLzSxC6eRsZ5cVPrX4egqD\+Z\gSBo+l2z\7brY8LMa9ALNiqLK1abt++54abxEATNeHzJ4jd3sKokW7xsCRhkENjijvZYi0Ont+CQpVliWfJKEsmiSHChNqfTCUhFM1wlehcK6779BwJX1tTU1LT\ntLafeBhAon68Of\OfLFCfS7ez\6uKIDpp1ndDwrB4KgSVOnk3VURaVyc\RiQ3j0VSC0ZNYrwIEtBEGg5yF10ABrM+6cWSNqxy32tMcEGXSRLArJjBYOviwM08QNqHh1uz16g0EqV0nkCBmpQDKFii2pPp9PbzDIFKpSnhQNS312\Jv84oq8ovLvM7IOfnwoNTX1s\8crRNIwKc\1s4VlmJ9hgsXy7Hf\fzb7OzqRup3IqO8eNPb7zOpZuG2xIap43F6kWDNn\4K1lpWNnnaDFw1RE5DK9mdOZGdsevwx1\lZrLtVDzCu9Pp2W65aGtmSHlFuwsykZ5xP2Wz2dIph8UKDVoUrjR70YwWvqILsXhLq5vzisrzispLq5uHN3M6B8AXa2CzBVTDE+7bvx\91sdHv6EeuQFEkb4d\BIbvnbyYK19a8+ROeSFZYQGtpjDiyv5Tit54dUhYTePn5CQmFhYw+eGbLuklTmvra18Wn5Cw6tSpdYbDIGCEU2nHO6Uw52wTqGxkv14MV8GDgUonqJOIMHxyhONcKYzc\PBPux07sX0giJaWDPKizMry\LaGKVdszo9Ct\iSgju5u17fvXUqnvuY9T0feJtt6cXCQqEFooEwn9+mPrAQ1cb2GxP3ct5iWXlyFqt1gjxGqSUFu+xs8WnL9YTfhexeE9n5u7evRvHa\aFi9iHKYxuQHC9RM28uiu7rokJFqxO58O9uBLK1O9slreDIq0Vz65cvGwJWQ+iSVOn7\4y81+fH951+OMDXx8P9ATW\WXTpCmT0cf\+5PPOPMKHFkmsDY0VNLCGiu8Glz+nKqWzLLmwK\Xt3Tu27c\lcjS\nsq8PE65+D5uhqGsAIRFnkHw6uxL5SL65d5daChAWixQfiYkk7Sl3cy6\SGN7YBzyFpdtLCxQvXbVy3fdf27bu2v\nOm2tS1ixcvHDeg\MW\3rZur9sOvD18bS8nDXrR0xP3n3kc+ZTZIm9gs52Wl4lEtFo4lXW5QnktbFVhl1WP\vPUWyo9au0\wZep1ZCExYI1NnqauqigwKhpUHDwh9g26CTQqcqRNRZjhNvu\2T0z8Viqy4dmDtGunmra+Dx8xLnvfq668eTT+6fdf2NSlrsNrw2obUj1LTM9LTM9L3frp3TcqaSVMmP\jYo+j1wSyu4paWYHhVWl24Hls4NTeXMTzMjxVeDS5\qUCO\W8HbPpwz16A5pFjJ+oEEvB1cDwLXFXcFcR6O1tYgQIzYDjzKnM6Qri4Bo6gJ7QjWeXYc403\99bCYmJY8eOXbVm1fsfvr8mZc1tk26jvsJtk26blzxv3cZ1c+bM+emnn6ZMmQJB0Iy7Zv3zw1Rwi5gPPiYUXdphLRNYY4tXidGD\e+xE18DKHH7qg6FkZBXrcN3jvEUgwCVXGhBKLhh2Hg1tLBm1iuoF1dgIHcbzAuXmtWg9VDS7KQ1KWvmJc9jgjvWUlNT\X6\QSbdv3\nDlzZj9wP+hNlFV1ib6bNrkU5m4KXjulktHH6wj47L7dH36YmppaVEGwCUOX2A6FEf1iswLhCmtxRnnxmcoKCq+ACa\y7lDCynxxBXMNalXWZnn7vOT5EARdf8P1199wPVtSgUkkEq\dVvL2lpaWlsTE4dnhyQsXHPnxe7aDDpl7sfwWXkR51dr6pIgBhK60Wj0az0LDv+DoARwQSOQwdrrBiOs4h09ia3hCQCQ4esVJqnOgR1\Hv\wGLMCIrTezsjQYZCliBdg2hoRSuR0c5iBQi8niCkEQCKnmt+oJAwKPLlkBms+9fzjt+VfWYwNVgTZr1iy\39928oQ489SiRSOqxyZNmXzoZBrDSRvEgQJDF+lJAa86orwaTYySF3HXV6qQTlg34lLdw\48ey5wIgVVo3tcuwJAjju4rDZwomsGpF6xEU4YCXLysXZxNtuB49\8jn82O+XN6z\rqgefDevTZ9ZVYn+muv+sumGG28MvNp7773HO3qo6O+bjh8\HvjdcQkJuWW1nHlFXAMt5LW1TJIJqXj1+XxKFYI9iKKQXMl9xK3T6RQrNGjnGF33oMHl\+TTz\btP0C4uGJ9hryicpTazNx8nXMwo5xLU50RyPKkgfRQFEyHA9YCunoy1GbPfeiDz7\Feg7jJ4zfvPX1OpkUzRbI7zBjy19f3\4O2dX+88JvMlYtrTq4G\UEcJaQmPhtTgFnXkWwgoxXKTMXllG+i1arl8gRirYDnezzB3BmNltAZi1i8SIW74d79jS2y2n\ToA6FMbC0ursvIvfZeTQDufmhizZ4IAwwXqqQoTLyiWzlE1\v3nireDfN9508+5D+xthBFs6lt9hzqq9mqr26ltbyS416brEjFVLM1YtfekhqhTbYI5n5SYb+a6rngkn7PKzJKErLgg0MGJOYXT\54vj5fUtzL0RoIqmji9O5Rw7W3y6JATI4jpvEuYPhAnWAqFl8\Y9TGCdNHU6+u9Zsx8o6bSi\QSG1WHCwkqxskIQtGrWtIxVS3ctepD2eW8eP4EbsipnL1kgtrGpggkkoemvrbX3cUIUb263R6a1aO2+Dg1xzRaZFF09py\Wp12oPFVUVyGUBc9rxshzL00PAa+cK2BpBUq6ae2ZF18B\yBsm4xzA3Z8tJf6au88+kD607+akDCOyVNzRpYiSmAw0E+SYcerz+cja1HIYctFaKDfkdx0+adGifpKkiu1GiR6MD8x7UJlu86J0LUgYKgzFSXn+XLw3usDpnaFMBcbp8x6BUNn4LV3d0MQdPvUaYG95\Pa9Gdr6tHf5dNv0wg3WFhLf\pXi6dOwn5lwi23\GPX+9NIZs1NmjylRqgg41Jq9mzbsSvllY0ZBWXYr4tVMBmvbW0CWjxY12+RJcJ2hqhBvd\vN5stWntfZYfqu8JasuJYdFnNvpLo\XXuJXRYktjkDMkSm1FefJ4vKxBaAhfXBk24MloYjn+fk\xYZr1iTvJjgVc4L1Bim7mm5eXMuoemDfKsm294\cERGV5jx4378IvPa6RyqdnzwINUUbCke+csWrps0dJl23bs2rZj16HjaRkFZQt+9URCQuLew1+0a60Mo1qNjVW0bLDmlaylZkhcWNSkcpXWMQjaFKdfqDhf3d4sM3ao7UB8RVdhvRjbguBETilYWVHVSOUX+fwaqRyrFo2xXW9t11sv8vnMkc2p5xt6R8Sz9OFMF2QYGXho0ZN\3vZBYI\v3CZ8bfCCJYtpr7Zg8q03jB3RleOfH6bmNdahAdftqTTuBI7glzdsWrri6UPH03BuA2zvoTjook0pZM2rzUa84CmNrpAMVAAGZnvUSXRM+rsEtiRiItqab6xKWpsQd1c4MlrwtPF1DJm4\6EFEAQdOHnu6o+P3F0BHfiaIJIaaGNHDkRe95dNGeXFQqN9hOuptW56g6Y57qTJUw4dT6O+8xRRWB6vnMdrcDodZGBw6UdEFtgK7aRQpQrRu\zUzV8JWxQyV5WE3c6sQSkCvJbJwrW4phcJmOAF+hOuf+NddJt1ni8nbOi+46O9Y8cx2kKh9vuUlyluWo1QkfLKxpvHT8D+SNK9c7an7qVwZ0dwz6jogJhaLryStczohLn3SQw0r9erNLqEum7q\q\HzhZXCdXceEUYNNvCqaC5rtUQ1AAjap2qEIFZBtT21p4j6I\ktekpGmCdyM5gxevDCx6XMp4xUVjDZ\5gVEJFJwNeianlwivF1LhQRQmAgfLxn5o7KWBNu1AZzJhPxDXQrNKyTTzIaWgt6DCFj9oPPv+Wglq0mWZ+u4GiZhBoVcqLzGGdPnNWs5z7WD+GkqjVjHkt5\HKsUhw4dXt9pDxyrD\K0MDvrK86zIIV9H21+asVl0Xh1yZrNqGvDZt5Kl98rkXAKm01djfF+VPuOUWhrDePH5CGY9g4kDIRREiCAuvZP6AgVl\bebm8\lA9kJdJ+nGCxcW4CyxycktvetsTS2IeUWM2g8O\4eWVKBdhxmFxoCNHTt2waJFew9\Ee4lVml1MYe1ubkMi0TI+hOGaYlFT4BPFdUHwnqqqC6E9zGYdMQzleU5Da3hW24\+Cz95ddef+KpFckLF3xflM\wVa37yybmvL694+30jPQtW7fMuvvubTt2cXBMGQq2e5jz2tR0CcsDO16ZDJNXmb0cemmRmd4wfDwhItp4Ydu+BimJuZszrFhlVlXl1AvO8aQhYLfDdKFFldvUQTtcgEzLfvMMc14hCFq4eOH7H76fnpG+JmXNzLtm0UamYp1X6i4vqGRqU6hisdj2yBebpDhesT1fg1SrriskvOK9herq3KaOCy0qhvheaFHl8iQ5Da1nqznX9lzVHTNnkH30U1A7c9bMvZ\uPZp+dOHihctWPos7oIowr7g6bxa8kjV7I0Y26AxD1NBiBNjSi914cQ67EoptYIubzlSUna2pP1tTn1XXnNPQktPYDv7LbXYrrchyBtakrKFdax9e8PDeT\e+\+H7c+fP55xASCiGHQmAcE1fWMw7Zj6ME2y8mDcpojbsXHDsiVd+oyiEN5F2cNeo0\dF+YQgjp8w\mj6UVpewTKcsi7laPrRNSlr9n32RahudadGy8wTKEMQFQ4Gpry63R5WvIIT2pDECuTKEeGIvDoh4LVGElSFMU7n6uqiTlho9em3aWQLZ+pHqUx4Rfnevmv72zvefvq3vw9J6IDJeUFzczVhhQwLf4Dh8NgRXoHWwnlyDWq44wndlTyYZrgrVLC265w\lHEZoBzL2rrzfwn5W7dx3bqN6yAISrp3TrNctz1176TJU2ip3fDahsMnDs9LfojhoSuFWoVN1BsskaiDDAYWvPp8PrK6VgpJEUOQyKIhApxXgGYPBilJlzvtQmW46Ym8yKoJDh45CPoSHEk\jd6EQ8fTqJMGIQhatWbV4ROHkx95NJgdmMrZT+WtCnlKmCoeyi4+EIgOM8fAEQyyhJW6Z0uDqoW\+tlk7D6ZX\1VbvTxCrlSNv4pkLmZs2amZ6QnzU5KSEwMjLBmFJQtW\ksBbLLVy7fvmv7oqXLON9w6sYZcpMNRqimH4ZsPkxYHYPAoG97Jywdme3GGdZjZ4tP5BSfCkXVV0yJMHNg1ZpVez\dC0HQpjf+QXZbynjClFc2JpCUyAJ3Yu9hjtsvis2WoLUWcQ0oVFS11qx5ZXJkQIys2sQZ2cC4b6ccNppMTIYkkqlRbsSlJaTnF\3IuBFnIa+5XW9tUMCsUr+DV1bVpZK2tmaVtkVjPF9PdY6weMXyQNpAO62ExETanVOzXLdtx65A13bs2LF7P927YNEibgdgFI20hIrO0PPq9\uVKkSKGFCJFcNNiWm9W4XGyu3oC99Ww+VXqhA\+UQkWpW1KohHe2YXffsTDTGZFaW4kVSws79FYywXiqjn1AWjvMa6KokMl0ANO\spUngDW7mMnzD+y++\nHrHVIrFFSep2XPoeNr0mbNwTsWWrVuYXwQris2W3GQLC69k5vV6aZFVmb1KyhdEaJKACcvoRYSIntX9gh39JS1y6oTar3KLz5D03ciqqhBS+iFSq7tRqS5uaQmyORJ2KaVuvyo02rNrCPaLgZlZa1LWHDxyEIIgDvH\Z3434ojh7R1v33PvPWw3XhSNNfmC4cFJ1PknoeTV7\d7vd7AtTBQEqWWlW8QOBEc5dXt9sgYfzCBkUm0BQtny\mwo79OpsCNpi9r72A1f6JV11Up6qSeb0+oSlEn9V8FngNHb2B5T6AzcPjE4ZR1Kc\8bg2HdRFXvzVz1swNr23YdeATVheh6O+CDvAWy6lGxISYV7\f7\P5mCCrNLqYn9nijgywvPr9fkRDf3DQrnNeqOtgUgp2qqgOTQCX2y6D0vCsqkt8lgs5KmbF5VcHLmRVXeL2RK26LrDQZlaWfns+Dwdr0uyko+lHx08Yzy3JtVmOLyxbt3Hd9JmzWF2EonJLZrREh1c\Y2RBqEuuRGiTY5QqKl79I+fO4SS1XCbzVglhxY6mRzkIpiF6nUzBanHlNqIN\QOrFHXKbZczCspweG3ZumXdxnXLVj7L+eK4AO3UO6bOeWDOVz9kM\xxikgWX1CNjpqPAq9+v9\n8zFM5gJOrUQOUxzearV6al59Pl\g9ORGuREdQ8cZ1uBFO8wWu7hmlBfzVEGdeR46nvbM79bg9vVPr3r68InDY8eOxXWvYKVdBz7B\Q3MeWBOyisbGf44RWSgQ3Z1yY8Or36\v5PT+a1ShZjNFtylAs8pAjdtNpsNhLfadc4ivgzbnYCJTuZXhwNWxDUgt12mhHXEOfCZ8mKhUsHhWaRmz97DXxCeUd026bbUj1JnzprJnC1CtWutgUHZqdOmM\lZ6tHdLW310edVoiQtS6SVQmPtVKiUKsRms\uJjrhwvHq9XkSjbVNq2WKK6kxZaA7MCEW55RqxuJ6vKuULKlUs2wIX1vCT7p0TSCoEQWPHjk39KHVe8rzpM2cFXzLw+5SXA6\PxCEWKWXUCS4yQ1eUeeWQbEC26EoRo8E94otihbZTDoMAsExtQr\Oh83ceP2hpCF8vFKeKYzgtaSulMcrlyAqhlfOKCh7eMHjhKRCEHT9Dddv2bplXvI8zu3ZAv8wAp+F9qxL5eylnRrX3tkeZV7Z5h+GSpUdKg68nsxnPTiduSpFnYSwninHJ4XVNV0Cn48qJ71zcuh4GtmpKYD1\Q\ff3jBw6GCFShwiaVNJ6BdXIFgew8SyfMCrFHUfEdA52raYopXscmJ9vD6qaHmfFXp+arSc1Wl56pKwL+B8qtLA9cbQknNHlwAn3BlnXrH1IcXPB58BiBWzXId7o\k5vETKDwNhbmbevgWKhGsQFwDIc53YWhGU1cUedU6Bn8oaWCLbPh4RQXbexi+eej5ZKDatVbqLKqpd0ydlzwvITGRbTyfoV5\ezvuGSn+JJiPPBa01qqc\TrKspRw8RoYMQ2x3DQPUFq8IK07pnhl+MmI7poDvYJ2rZVsawVB0NixY6+\4fqJt0x8\e3t4WsjIDV7cPEysjkcbFu5SHVGm80WBV59Ph\DeBbF3O4g1a5x0PbewipUCeBkYrW4knkF1CvrAw8mR6DhBeIa+DanAOsVbNuxi+j39bD9fdvEAuqMqDDut\x+v9lswW7e8Z\a9j5wJOv1emFEI5YjYORGSJZYmdbSqVC1SZWIa6BGoqXoaHTsbPHXuZdC2MqATBStpSkkVl19YYERewiCJk2esmjpslde\Wtoq1hphc0oCMxJUDn76fpmEkunp+oaGF5egUnlqsBYgUJjBbFVnJnNFqlcRUE5hVRmr1ihUaoQ7FGZUIEgrgGp5TJZa87Cps4wnRTgRJ1aTyEQmzx3qQ7tE5+QmAj6WX\1Q3b4GrHQCnVkJ02egvsW3cBYYjU1V1AP4ooEr36\3+l0YjMKJHKYNmcALLoUQ5QMLr8Rc8HAUzFgPp8PzTksa1VgPYQzZc1CY3ck32Amk9UJte\QIUDGK5s2R4vOQEnNnpRXNoIXNvwLaq3V7XKhXMzt12zr7KSmIkK8AlOqEIXGqtXSjwFBLTDzdYS6h5dVavq9Xq9EM5ypKTR2nyqqO5lf3SjH5xtEQJyX2PqGkid\vYLwkzfqAsii9Qh5RfkcYRULhAqa3OiI8srBAjMJAyWW0yeAO51OtN4LdvQH2TI2GHFeYnm88o2v\SXwkzcWtG3HrqUrVkIQdPCTA9x+Nb6gErZ7qA+3\LHPK0UcV4\u25gt2FhkoyuFuVuqM4pVcJtYQHtQiXtT\zc1NeQNrUKi+x6Y+382rOf8pyhRqxG6wwJ\7POK7fdGGBygdQawFjvIYqVy9spNNgmiEsrFFElMqKQ6jpnj4ZPC3F1ccp72lQtaa9vEApxEsALNlzCaTNTvYKzz6vfTBGjZzlGy2WzM62ei8sYzQbZDJmSSYBAZSdRqJp8SLW31sJ3mztNWSY0CXjsVKpCHdTVWgIm8wgjruV9msyWYQvAIIMskcskXVJMd2EZMsN3TKuQx+bhnAqvMTN9tbRTwGg7TaHWxjCxs9zAMtrd3tkdroZUgKiYfBQxhRVwDQiTU82OvJYMR7lOQYgpZvqBaBCvgCP75SXX6NrGA4UaKIawIXeYrsJ8vr36\X6FCos5lSJDl8cr5gkqRUhZWalXOfqlOz+qUlTmsiGuAOjML2M+aV7\fDyPqWHYMOJwvtAqbQh5AkBktHTIhq9AbW1hlZg+TOM\PnVe\36\R6mI5YsCWV3S57ZAJpTo95xVX5eyXm2xCRWdLeyO318BqO0h7sgUszqvfD\LIYhVZhnsayhWXJ5SLJWq13GSjwBe2e+Qmm8zQBQ4y2KYCBor54oq4BqQKRmOw4rwOm81mi8GjBIR+mjWXpbdNLBDKxSJY0Srisz1jYy5WvyZ1mjZqcV6vmtPpDGy6EXUxDHDGmrAtBWjFJJIFLM7rCPN6vbGGLPP6J47LLT8sl20V8pj\jrRpA6jFecWb1+tl26MzrOKcSxpdYVsMUUth72HerDLOK4H5fD4RrIk6qUAUPShjeYkVKWVM\yAZOwP+OK9k5vP5QCFN1CVBVEz4aBU2hWnbxE0gP5CJZEoV8\clziuVce43H0IpzA7qkJZQLlaYu688uFuCqDhs0ZqbKRdgQTUazQWnXLRPgfZzpfnt7D2shgrGeaUxo8kki2yNV6Bge09gVYKgtZYibUDl7JXqjEK5OJhFt1XIkyAqhdlB+BRKq0uo6Az8W2oV8sh+JFAMjwlQi\NKb16vV6iMfnKMzGgBsdiW9kapTs+8hyFYdJkfUwnlYqnOyDDtC7vc8gXVzDvVAZFViZJZnFemJiFv4R0xqZz9zJcunBh266Du20UhpdXF9uxXrDayfRfivLKwGE+OoRVFdyDUf0Vd4QhIo6VqjUFocV7Zmc1mQ0vDR51Uzn7qWcOtwqZQ4ugeMF0eNF0etPcOOvuGcNKbrTAMwzCs1+sNV4z2\sd5ZW0+n08kj4lQFwfJjBaKxRVtcs1Kes+A1Tvo7BvyDgz1DgwFeXv7+vpUKhXZd+O8cjSZUjVKfQOyBgignSWTK5guDzr7hlz9Q96BocFg+cSb1+ulaPkW55W7mc2W0egb4DZe6OJKHeE3eAadfSFYPmlNq9VSfDfOa1Dm8\nEMXCmwFadGi2m\F8p1enlJlvg4qp1D1i9g+7+Id9ghO4nDNNkwcZ5DYEZTabYzJ3lLEvPoKt\KOxr6UjT6ejDBXFeQ2Ner3f0bsJQadwD9t7BiK2mWHM4HEyytOK8htI0Wl3UD2+5Sese6O4L\eaJofX19VksjA664ryG2EbdQqt1D7j7o8TpFUMQplkEcV7DYhqtLtbqFAKlcQ84o7emoka7x8JanNcwmkypiln3wOodjDqpfr\fZDIxby\pj\MabvN6vRSz7qOlrp5B78AQodz9+INTJnL0DoKj10BpnJdhFWIgMeaVMMDivEbCjCaTWB3r7kGYxCGphcLivEbOYtk9CJOoh8FysDivETWfzydVwDHbSyaUpNp7QruyAovzGgXzer1iufIaplZm9oQDVn+c1yia1+uVyOFrz0MQq2lmwAZjcV6jbwoVcs2kHwgVCKv4FFuL8xorhmi0sdOkg4NkZg\DHoPBWJzX2DKn0ymSj74NmQjWsGojwNnivMai+Xw+GFHHSIMZaom1Rubd2oK3OK8xbW63R6ZUxWYqglhrZDJxILQW53V0mNvtUaiQWGjbgbgGhIge0VBVrYTP4ryOMvN6vTCiFsnhyJeOyYzdQgVCOzIzrBbndRSb2+2BEbVYDoc1OUGsNUoVMEXNaiQtzus1YmDdFcuVYrlSqFRzjjDIzB4hohciepEchhE12\ypcFuc12vZjCaTzmAY5lgBAxBxEitgqQLWGQw69tl9kbc4r3EbTRbnNW6jyeK8xm00WZzXuI0m+\8gZ08fpVj9RQAAAABJRU5ErkJggg== (El nombre de archivo, el nombre de directorio o la sintaxis de la etiqueta del volumen no son correctos)
at java.io.FileInputStream.open(Native Method)
at java.io.FileInputStream.<init>(Unknown Source)
at java.io.FileInputStream.<init>(Unknown Source)
at sun.net.www.protocol.file.FileURLConnection.connect(Unknown Source)
at sun.net.www.protocol.file.FileURLConnection.getInputStream(Unknown Source)
at java.net.URL.openStream(Unknown Source)
at com.lowagie.text.Image.getInstance(Unknown Source)
at com.lowagie.text.Image.getInstance(Unknown Source)
at com.lowagie.text.html.simpleparser.HTMLWorker.startElement(Unknown Source)
at com.lowagie.text.xml.simpleparser.SimpleXMLParser.processTag(Unknown Source)
at com.lowagie.text.xml.simpleparser.SimpleXMLParser.go(Unknown Source)
at com.lowagie.text.xml.simpleparser.SimpleXMLParser.parse(Unknown Source)
at com.lowagie.text.html.simpleparser.HTMLWorker.parse(Unknown Source)
at com.crc.tecnatom.gaddie.reports.ExamenInforme.imprimePDF(ExamenInforme.java:61)
at com.crc.tecnatom.gaddie.controllers.ExamenesController.descargarExamen(ExamenesController.java:114)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-05T19:23:15.027

这是自定义图像标签处理器的java实现：

```
package com.example.itext.processor;

import java.util.ArrayList;
import java.util.List;
import java.util.Map;

import com.itextpdf.text.Chunk;
import com.itextpdf.text.Element;
import com.itextpdf.text.Image;
import com.itextpdf.text.log.Level;
import com.itextpdf.text.log.Logger;
import com.itextpdf.text.log.LoggerFactory;
import com.itextpdf.text.pdf.codec.Base64;
import com.itextpdf.tool.xml.NoCustomContextException;
import com.itextpdf.tool.xml.Tag;
import com.itextpdf.tool.xml.WorkerContext;
import com.itextpdf.tool.xml.exceptions.LocaleMessages;
import com.itextpdf.tool.xml.exceptions.RuntimeWorkerException;
import com.itextpdf.tool.xml.html.HTML;
import com.itextpdf.tool.xml.pipeline.html.HtmlPipelineContext;

public class ImageTagProcessor extends com.itextpdf.tool.xml.html.Image {

private final Logger logger = LoggerFactory.getLogger(getClass());

/*
 * (non-Javadoc)
 * 
 * @see com.itextpdf.tool.xml.TagProcessor#endElement(com.itextpdf.tool.xml.Tag, java.util.List, com.itextpdf.text.Document)
 */
@Override
public List<Element> end(final WorkerContext ctx, final Tag tag, final List<Element> currentContent) {
    final Map<String, String> attributes = tag.getAttributes();
    String src = attributes.get(HTML.Attribute.SRC);
    List<Element> elements = new ArrayList<Element>(1);
    if (null != src && src.length() > 0) {
        Image img = null;
        if (src.startsWith("data:image/")) {
            final String base64Data = src.substring(src.indexOf(",") + 1);
            try {
                img = Image.getInstance(Base64.decode(base64Data));
            } catch (Exception e) {
                if (logger.isLogging(Level.ERROR)) {
                    logger.error(String.format(LocaleMessages.getInstance().getMessage(LocaleMessages.HTML_IMG_RETRIEVE_FAIL), src), e);
                }
            }
            if (img != null) {
                try {
                    final HtmlPipelineContext htmlPipelineContext = getHtmlPipelineContext(ctx);
                    elements.add(getCssAppliers().apply(new Chunk((com.itextpdf.text.Image) getCssAppliers().apply(img, tag, htmlPipelineContext), 0, 0, true), tag,
                        htmlPipelineContext));
                } catch (NoCustomContextException e) {
                    throw new RuntimeWorkerException(e);
                }
            }
        }

        if (img == null) {
            elements = super.end(ctx, tag, currentContent);
        }
    }
    return elements;
}
} 
```

以下代码片段注册自定义图像标签处理器并将 HTML 文档转换为 PDF

```
public static void main(String[] args) {
    convertHtmlToPdf();

}

private static void convertHtmlToPdf() {
    try {
        final OutputStream file = new FileOutputStream(new File("C:\\Test.pdf"));
        final Document document = new Document();
        final PdfWriter writer = PdfWriter.getInstance(document, file);
        document.open();
        final TagProcessorFactory tagProcessorFactory = Tags.getHtmlTagProcessorFactory();
        tagProcessorFactory.removeProcessor(HTML.Tag.IMG);
        tagProcessorFactory.addProcessor(new ImageTagProcessor(), HTML.Tag.IMG);

        final CssFilesImpl cssFiles = new CssFilesImpl();
        cssFiles.add(XMLWorkerHelper.getInstance().getDefaultCSS());
        final StyleAttrCSSResolver cssResolver = new StyleAttrCSSResolver(cssFiles);
        final HtmlPipelineContext hpc = new HtmlPipelineContext(new CssAppliersImpl(new XMLWorkerFontProvider()));
        hpc.setAcceptUnknown(true).autoBookmark(true).setTagFactory(tagProcessorFactory);
        final HtmlPipeline htmlPipeline = new HtmlPipeline(hpc, new PdfWriterPipeline(document, writer));
        final Pipeline<?> pipeline = new CssResolverPipeline(cssResolver, htmlPipeline);
        final XMLWorker worker = new XMLWorker(pipeline, true);
        final Charset charset = Charset.forName("UTF-8");
        final XMLParser xmlParser = new XMLParser(true, worker, charset);
        final InputStream is = new FileInputStream("C:\\test.html");
        xmlParser.parse(is, charset);

        is.close();
        document.close();
        file.close();
    } catch (Exception e) {
        e.printStackTrace();
        // TODO
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-12T18:54:38.880

可以替换 iText(Sharp) 的内置标签处理器。这是带有自定义图像标签处理器的 C# 代码，它也支持 base64 图像。将其转换为 java 很容易（基础库 iText 和 iTextSharp 具有相同的 API）。

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.IO;
using iTextSharp.text;
using iTextSharp.text.html;
using iTextSharp.text.html.simpleparser;
using iTextSharp.text.pdf;

namespace CustomHtmlWorkerTag
{
    /// <summary>
    /// Our custom HTML Tag to add an IElement.
    /// </summary>
    public class CustomImageHTMLTagProcessor : IHTMLTagProcessor
    {
        /// <summary>
        /// Tells the HTMLWorker what to do when a close tag is encountered.
        /// </summary>
        public void EndElement(HTMLWorker worker, string tag)
        {
        }

        /// <summary>
        /// Tells the HTMLWorker what to do when an open tag is encountered.
        /// </summary>
        public void StartElement(HTMLWorker worker, string tag, IDictionary<string, string> attrs)
        {
            Image image;
            var src = attrs["src"];

            if (src.StartsWith("data:image/"))
            {
                // data:[<MIME-type>][;charset=<encoding>][;base64],<data>
                var base64Data = src.Substring(src.IndexOf(",") + 1);
                var imagedata = Convert.FromBase64String(base64Data);
                image = Image.GetInstance(imagedata);
            }
            else
            {
                image = Image.GetInstance(src);
            }

            worker.UpdateChain(tag, attrs);
            worker.ProcessImage(image, attrs);
            worker.UpdateChain(tag);
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            using (var pdfDoc = new Document(PageSize.A4))
            {
                PdfWriter.GetInstance(pdfDoc, new FileStream("Test.pdf", FileMode.Create));
                pdfDoc.Open();

                FontFactory.Register("c:\\windows\\fonts\\tahoma.ttf");

                var tags = new HTMLTagProcessors();
                // Replace the built-in image processor
                tags[HtmlTags.IMG] = new CustomImageHTMLTagProcessor();

                var html = "<img alt='' src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAodJREFUeNpsk0tME1EUhv87UwlCREhRFpi4cGMMRrTE4MaoxBhAsDyMssFHfCQu3BlXGuNKNy5NmqALoqEEMJWCgEUjYojllSpofIUNBNqmIKU6OnQennunUxvgJF86957z/+d27hkGigMlDJfOAmV7AcYsKGqIZljRSvhNE+CMTwEtXmBy2gQb7mCQJUBKkTIQYtfJYCNMAxO9hzq5CYmFiWFY6ISE9VFLRedc1SONeqwf+uJLuKreNPI9nltbLG0orhpqUCM90DRVoEbJ5MSLho1MMg1O0bHOuyoD9crCcxL+xa0HqwL+rEQHsb/CW89reO1aAyEuq+yp+zXvg66rgng8LrDXSmwYpUc8dZkmDsJNL+NCeVVXbWK+O32cpJ7E6OgkwuEwrl8phaHrVsfYD+x03XTPjN3nzZnD0HGxvPppTSLcLwo0I4lldRFK8jdCoZBlJquAbBnr0BD9GUTRvubahclW5qDukqkpIqlodGQ1At3UxZXaIUvauqsyjBV+jZJEJ3s83HO5j+UWI7E6C4mp2EQCTixyV2CvbbKzNmN2zNfHtbzPM3p4FOy/M5CXtwsOKZmmsOi2IHMvyyFhJhgY4BqutQ/aRRstocEngZzswnQnO+x1lqTjy8hIgNdyDc+x5nomxrKJhpcSp2lSrx48WlZhGArynG5hsLLoE7/jQ59f0aR7ZBkdbf7U6Ge+mKYaBvdx8wwZXjtWvfswfTrp3Over29J8NAXYO1t/v/7csZA5U5/Q35nH+aKt8OMR2POPSUFOyRmorvje3BiCt4b9zBANTmwGvP/aMoZRluJbURB8APmnPlQliNLzk8flxbeh9Du8eId5bYQ2SnxH36b/wQYABNFRsIaESsTAAAAAElFTkSuQmCC' />";

                var styles = new StyleSheet();
                styles.LoadTagStyle(HtmlTags.BODY, HtmlTags.FONTFAMILY, "tahoma");
                styles.LoadTagStyle(HtmlTags.BODY, HtmlTags.ENCODING, "Identity-H");

                PdfPCell pdfCell = new PdfPCell { Border = 0 };
                pdfCell.RunDirection = PdfWriter.RUN_DIRECTION_LTR;

                using (var reader = new StringReader(html))
                {
                    var parsedHtmlElements = HTMLWorker.ParseToList(reader, styles, tags, null);

                    foreach (var htmlElement in parsedHtmlElements)
                    {
                        pdfCell.AddElement(htmlElement);
                    }
                }

                var table1 = new PdfPTable(1);
                table1.AddCell(pdfCell);
                pdfDoc.Add(table1);
            }

            Process.Start("Test.pdf");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-01T04:59:09.247

Ajay Deshwal 提供的解决方案是在 iText 中处理 .png Base64 图像的一个很好的参考点。

我所做的只是转到我的 HTMLWOrker 并编辑方法 startElement(String tag, HashMap h);

在方法的这一部分，if (tag.equals(HtmlTags.IMAGE)), blahblah.. 只需添加花药检查

```
if(src.startsWith("data:image/png;base64")){
        final String base64Data = src.substring(src.indexOf(",") + 1);
try {
        img = Image.getInstance(Base64.decode(base64Data));
} catch (Exception e) {
        throw new ExceptionConverter(e);
}
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-10T09:57:14.600

在上面的 Ajay Deshwal 代码中添加图像的以下宽度和高度，这对我来说非常适合。

```
package com.example.itext.processor;
import java.util.ArrayList;
import java.util.List;
import java.util.Map;
import com.itextpdf.text.Chunk;
import com.itextpdf.text.Element;
import com.itextpdf.text.Image;
import com.itextpdf.text.log.Level;
import com.itextpdf.text.log.Logger;
import com.itextpdf.text.log.LoggerFactory;
import com.itextpdf.text.pdf.codec.Base64;
import com.itextpdf.tool.xml.NoCustomContextException;
import com.itextpdf.tool.xml.Tag;
import com.itextpdf.tool.xml.WorkerContext;
import com.itextpdf.tool.xml.css.CssUtils;
import com.itextpdf.tool.xml.exceptions.LocaleMessages;
import com.itextpdf.tool.xml.exceptions.RuntimeWorkerException;
import com.itextpdf.tool.xml.html.HTML;
import com.itextpdf.tool.xml.pipeline.html.HtmlPipelineContext;

public class ImageTagProcessor extends com.itextpdf.tool.xml.html.Image {
private final CssUtils utils = CssUtils.getInstance();
private final Logger logger = LoggerFactory.getLogger(getClass());

/*
 * (non-Javadoc)
 * 
 * @see
 * com.itextpdf.tool.xml.TagProcessor#endElement(com.itextpdf.tool.xml.Tag,
 * java.util.List, com.itextpdf.text.Document)
 */
@Override
public List<Element> end(final WorkerContext ctx, final Tag tag,
        final List<Element> currentContent) {
    final Map<String, String> attributes = tag.getAttributes();
    String src = attributes.get(HTML.Attribute.SRC);
    List<Element> elements = new ArrayList<Element>(1);
    if (null != src && src.length() > 0) {
        Image img = null;
        if (src.startsWith("data:image/png;base64")) {
            final String base64Data = src.substring(src.indexOf(",") + 1);
            try {
                img = Image.getInstance(Base64.decode(base64Data));

            } catch (Exception e) {
                if (logger.isLogging(Level.ERROR)) {
                    logger.error(String.format(LocaleMessages.getInstance()
                            .getMessage(
                                    LocaleMessages.HTML_IMG_RETRIEVE_FAIL),
                            src), e);
                }
            }
            if (null != img) {
                String width = attributes.get(HTML.Attribute.WIDTH);
                float widthInPoints = utils.parsePxInCmMmPcToPt(width);
                String height = attributes.get(HTML.Attribute.HEIGHT);
                if (width == null || height == null)
                    img.setScaleToFitLineWhenOverflow(true);
                else
                    img.setScaleToFitLineWhenOverflow(false);
                float heightInPoints = utils.parsePxInCmMmPcToPt(height);
                if (widthInPoints > 0 && heightInPoints > 0) {
                    img.scaleAbsolute(widthInPoints, heightInPoints);
                } else if (widthInPoints > 0) {
                    heightInPoints = img.getHeight() * widthInPoints
                            / img.getWidth();
                    img.scaleAbsolute(widthInPoints, heightInPoints);
                } else if (heightInPoints > 0) {
                    widthInPoints = img.getWidth() * heightInPoints
                            / img.getHeight();
                    img.scaleAbsolute(widthInPoints, heightInPoints);
                }
            }
            if (img != null) {
                try {

                    final HtmlPipelineContext htmlPipelineContext = getHtmlPipelineContext(ctx);
                    elements
                            .add(getCssAppliers()
                                    .apply(
                                            new Chunk(
                                                    (com.itextpdf.text.Image) getCssAppliers()
                                                            .apply(img,
                                                                    tag,
                                                                    htmlPipelineContext),
                                                    0, 0, true), tag,
                                            htmlPipelineContext));
                } catch (NoCustomContextException e) {
                    throw new RuntimeWorkerException(e);
                }
            }
        }

        if (img == null) {
            elements = super.end(ctx, tag, currentContent);
        }
    }
    return elements;
} 
```

}

# c++ - 让 Window 相信它仍然是焦点，尽管它不是

> ID：13843742
> 
> 赞同：3
> 
> 时间：2012-12-12T16:04:38.813
> 
> 标签：c++, windows, window, focus, suppress

我必须处理一个讨厌的 MS Windows 应用程序，它一旦失去焦点就退出工作。我的问题是，我怎样才能以某种方式欺骗这个应用程序以相信它仍然是焦点，尽管它真的不是？

我的想法是：

1.  是否可以仅从该应用程序中抑制相应的“WM”消息？
2.  我可以向这个窗口发送一条虚假消息，让它看起来像焦点一样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-08-04T00:39:53.337

发送 WM_ACTIVATE 消息适用于某些应用程序：

```
 SendMessage(hWnd, WM_ACTIVATE, WA_CLICKACTIVE, hWnd); 
```

将最后一个参数保留为 NULL 也可能有效。

# asp.net - 在从 PageAsyncTask 调用的方法中时，HttpContext.Current 为 null

> ID：13843744
> 
> 赞同：4
> 
> 时间：2012-12-12T16:04:42.723
> 
> 标签：asp.net, session, asynchronous

我有一个场景，我有一个页面，在单击按钮时打开一个对话框，在按钮单击打开的对话框表单中，我可以从选定的 .txt 文件中读取数据列表并构建查询并将数据添加到一些数据库表。由于可能存在大量数据，因此此过程可能需要很长时间，因此用户在上传完成之前将无法在应用程序上工作。因此，为了使上传过程异步，我正在使用 PageAsyncTask。下面是代码示例，但在 PageAsyncTask 中调用的方法中，HttpContext.Current 为空，因此我无法使用会话处理。请对此提供任何指导，为什么这是空的，在这种情况下我如何使用会话

```
 protected void BtnUpload_click(object sender, EventArgs e)
    {
        PageAsyncTask asyncTask1 = new PageAsyncTask(OnBegin, OnEnd, OnTimeout, SessionManager.UserData, true);

        Page.RegisterAsyncTask(asyncTask1);
        Page.ExecuteRegisteredAsyncTasks();
    }

public IAsyncResult OnBegin(object sender, EventArgs e,
            AsyncCallback cb, object extraData)
    {
        _taskprogress = "AsyncTask started at: " + DateTime.Now + ". ";
        uData = extraData as UserData;

        _dlgt = new AsyncTaskDelegate(BeginInvokeUpload);
        IAsyncResult result = _dlgt.BeginInvoke(cb, extraData);

        return result;
    }

private void BeginInvokeUpload()
    {
        string selectedFileName = string.Empty;
        string returnValuePage = string.Empty;
        User teller = new User();
        SessionManager.UserData = uData;
    }

  private void BeginInvokeUpload()
    {
        string selectedFileName = string.Empty;
        string returnValuePage = string.Empty;
        User teller = new User();
        SessionManager.UserData = uData;
    }

public class SessionManager
    {
public static UserData UserData
        {
            get 
            {
                UserData userData = null;
                if (HttpContext.Current.Session["UserData"] != null)
                {
                    userData = HttpContext.Current.Session["UserData"] as UserData;                    
                }
                return userData;
            }
            set 
            {
                 HttpContext.Current.Session["UserData"]=value;                  
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T16:08:29.367

答案很简单：如果`HttpContext.Current is null`

因此，如果您需要修改会话，您不能简单地修改，唯一的选择是制作您完全自定义的会话模块/解决方案。

如果您只需要读取一些值，那么您可以在创建线程时传递它们。

最后，唯一的解决方案是如果您成功操纵会话变量，则不要使用线程。

## 为什么这个设计？

为什么 MS 会话不允许您在页面外和线程内处理它？答案是因为需要在页面处理时锁定会话数据——有了这个锁，即使你启动一个线程并且能够获取会话数据，也无法并行使用它。

另外如果你能够在一个线程中使用自己的会话，那么这个线程可能会锁定整个页面查看过程，因为我再说一遍，会话是锁定整个页面查看，并且使用相同会话的每个页面都不会并行工作

整个页面上的会话锁定是 MS 会话工作方式所必需的，避免这种情况的唯一方法是制作完全自定义的会话解决方案，并使用不同的代码处理特殊情况。

该设计的好处是您避免在每次页面调用时自行进行大量锁定和同步 - 例如，如果您禁用页面上的会话，并使用该页面插入数据，如果使用 make multiple double单击插入，并且您没有在插入上同步处理它，您最终会得到多个相同的插入。

有关会话锁定的更多信息：
[完全替换 ASP.Net 的会话](https://stackoverflow.com/questions/8989648/replacing-asp-nets-session-entirely/9021543#9021543)
[Web 应用程序在共享同一会话时处理另一个 Web 应用程序时被阻止](https://stackoverflow.com/questions/9426673/web-app-blocked-while-processing-another-web-app-on-sharing-same-session/9427550#9427550)
[jQuery Ajax 对 Web 服务的调用似乎是同步的](https://stackoverflow.com/questions/9052401/jquery-ajax-calls-to-web-service-seem-to-be-synchronous/9052457#9052457)
[ASP.NET 服务器不会异步处理页面](https://stackoverflow.com/questions/12284530/asp-net-server-does-not-process-pages-asynchronously/12285168#12285168)

类似的问题：
[How to get Session Data without having HttpContext.Current, by SessionID](https://stackoverflow.com/questions/2771536/how-to-get-session-data-with-out-having-httpcontext-current-by-sessionid)

# jsoup - jsoup可以返回outerHtml方法返回的元素的位置吗？

> ID：13843748
> 
> 赞同：1
> 
> 时间：2012-12-12T16:04:44.907
> 
> 标签：jsoup

有没有办法知道节点的outerHml方法返回的源代码中元素的确切位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:51:39.097

不，这是不可能的。在解析阶段之后，在 DOM 中不会跟踪源位置，因此元素不包含此信息。

您希望实现什么？可能有另一种方法可以做到这一点。

# javascript - 选择项目后 jQuery UI 自动完成触发新事件

> ID：13843750
> 
> 赞同：4
> 
> 时间：2012-12-12T16:04:51.060
> 
> 标签：javascript, jquery-ui, autocomplete

我正在使用 jQuery UI 自动完成，我正在尝试实现一些代码，一旦用户从自动完成下拉列表中选择了一个项目，它就会调用另一个函数。我查看了 API 文档，但进展甚微。

```
 // Call LookUpGroupName ActionResult in UserManager Controller
 $("#group_name").autocomplete(
     '@Url.Action("LookUpGroupName", "UserManager")', {
     dataType: 'json',
     parse: function (data) {
         var rows = new Array();
         for (var i = 0; i < data.length; i++) {
             rows[i] = {
                 data: data[i],
                 value: data[i].group,
                 result: data[i].group
             }
         }
         return rows;
     },
     formatItem: function (row, i, max) {
         return row.group;
     },
     width: 300,
     highlight: false,
     multiple: false,
     open: function () {
         alert("changed");
     }

 }); // End of autocomplete 
```

一旦我选择了一个项目，我想触发一个显示警报的功能。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T01:08:28.270

使用自动完成的选择：选项。就像是。

```
select: function (event, ui){
alert("|" + $("#targetID").val() + "|1stAlert");
} 
```

# sql - 如何在 PL/SQL 中将表 A 中的常量乘以表 B 中的变量值？

> ID：13843754
> 
> 赞同：0
> 
> 时间：2012-12-12T16:05:14.330
> 
> 标签：sql, join, constants, scoring

新手 PL/SQL 问题：

为了计算多元线性回归分析的预测值，我想将表 A 中的每个回归参数乘以表 B 中所有记录的相应变量值，然后将表中每个记录的乘积相加B.

表 A 包含一行参数值（数值常数），有 n 列，每个参数一个，而表 B 包含 100,000 多条记录，其中每个回归变量包括 n 列。

有没有一种有效的方法来执行这些计算？最简单的方法是将表 A 中的列连接到表 B，这将生成一个包含 n 列的连接表，其中包含所有 100,000 多条记录的重复参数值。但是，这似乎浪费了处理时间和内存。

或者有没有办法从表 A 中的参数值（如 SAS 中的宏变量）声明全局常量，然后使用全局常量值在表 B 中执行计算？

任何帮助深表感谢！

谢谢，罗伯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:19:52.660

在 SQL 中，一种方法是使用连接和聚合：

```
select t.id,
       max(t.A)*max(case when p.col = 'A' then p.coefficient end),
       max(t.B)*max(case when p.col = 'B' then p.coefficient end),
       . . .
from data t cross join
     parameters p
group by t.id 
```

您也可以在`select`语句中使用内联查询来执行此操作：

```
select t.A*(select max(coefficient) from parameters where col = 'A'),
       . . .
from data t 
```

假设您没有太多数据（您有数千行，而不是数百万行），任何一种方法都应该合理地执行。

顺便说一句，如果参数存储在一行中，那么简单的连接和乘法就足够了。

还有另一种方法，类似于第一种方法，但可能更清楚：

```
select t.id,
       t.A*p.Acoefficient,
       t.B*p.Bcoefficient,
       . . .
from data t cross join
     (select max(case when p.col = 'A' then coefficient end) as Acoefficient,
             max(case when p.col = 'B' then coefficient end) as Bcoefficient,
             ...
      parameters p
     ) p 
```

我正在添加这个，因为这可能是我真正编写解决方案的方式。

# c - RegisterDeviceNotification 获取 WM_DEVICECHANGE

> ID：13843758
> 
> 赞同：1
> 
> 时间：2012-12-12T16:05:25.150
> 
> 标签：c, winapi

我想捕捉 WM_DEVICECHANGE 的消息。但是，有一个我无法理解的问题。我想看看什么时候插入了 USB 或 cd。也许我的通知过滤器是错误的。我正在使用 radstudio 及其 c 的语言，以及它的命令行应用程序。我认为代码中的一切都很明显。我做错了什么，我创建了只获取消息的窗口。我也不明白它是如何从 WndProc 发送消息的消息循环。

```
#pragma hdrstop
#pragma argsused

#include <stdio.h>
#include <tchar.h>
#include <windows.h>
#include <dbt.h>

LRESULT CALLBACK WndProc(HWND hWnd, UINT uiMsg, WPARAM wParam, LPARAM lParam)
{
switch (uiMsg)
{
case WM_DEVICECHANGE:
{
    MessageBox(0,"a","b",1);
}
}
}

int _tmain(int argc, _TCHAR* argv[])
{

BOOL bRet;
HANDLE a;
HWND lua;
HANDLE hInstance;
MSG msg;
WNDCLASSEX wndClass;
HANDLE hVolNotify;
    DEV_BROADCAST_DEVICEINTERFACE dbh;

DEV_BROADCAST_VOLUME NotificationFilter;
  lua = CreateWindow("lua", NULL, WS_MINIMIZE, CW_USEDEFAULT,
            CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT,
            NULL, NULL, hInstance, NULL);
                         wndClass.lpfnWndProc = WndProc;
ZeroMemory(&NotificationFilter, sizeof (NotificationFilter));
NotificationFilter.dbcv_size = sizeof (NotificationFilter);
NotificationFilter.dbcv_devicetype = DBT_DEVTYP_VOLUME;
a = RegisterDeviceNotification(lua,&NotificationFilter,DEVICE_NOTIFY_WINDOW_HANDLE);
while( (bRet = GetMessage( &msg, NULL, 0, 0 )) != 0)
{
    MessageBox(0,"o","b",1);
    if (bRet == -1)
    {

    }
    else
    {

        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:49:58.933

> 我在做什么错，我创建了仅用于获取消息的窗口。

您要求`CreateWindow()`创建一个类窗口，但在调用之前`"lua"`您还没有实际注册`"lua"`该类，并且您没有检查是否在失败时返回窗口句柄。`RegisterClass/Ex()``CreateWindow()``CreateWindow()``NULL`

> 我也不明白它是如何从消息循环发送到 WndProc 的。

那是由`DispatchMessage()`. 您需要在调用之前`wndClass.lpfnWndProc`对其进行分配和注册。之后，当看到一条消息指向由 创建的窗口时，它知道该窗口已与该窗口相关联，并将直接调用它，并将消息传递给它。`RegisterClass()``CreateWindow()``DispatchMessage()``CreateWindow()``WndProc()`

试试这个：

```
#pragma hdrstop
#pragma argsused

#include <stdio.h>
#include <tchar.h>
#include <windows.h>
#include <dbt.h>

LRESULT CALLBACK WndProc(HWND hWnd, UINT uiMsg, WPARAM wParam, LPARAM lParam)
{
    if (uiMsg == WM_DEVICECHANGE)
    {
        MessageBox(NULL, TEXT("WM_DEVICECHANGE"), TEXT("WndProc"), MB_OK);
        return 0;
    }

    return DefWindowProc(hWnd, uiMsg, wParam, lParam);
}

int _tmain(int argc, _TCHAR* argv[])
{
    HINSTANCE hInstance = reinterpret_cast<HINSTANCE>(GetModuleHandle(NULL));

    WNDCLASS wndClass = {0};
    wndClass.lpfnWndProc = &WndProc;
    wndClass.lpszClassName = TEXT("lua");
    wndClass.hInstance = hInstance;

    if (RegisterClass(&wndClass))
    {
        HWND lua = CreateWindow(wndClass.lpszClassName, NULL, 0, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, NULL, NULL, hInstance, NULL);
        if (lua != NULL)
        {
            DEV_BROADCAST_VOLUME NotificationFilter = {0};
            NotificationFilter.dbcv_size = sizeof(NotificationFilter);
            NotificationFilter.dbcv_devicetype = DBT_DEVTYP_VOLUME;

            HDEVNOTIFY hVolNotify = RegisterDeviceNotification(lua, &NotificationFilter, DEVICE_NOTIFY_WINDOW_HANDLE);

            if (hVolNotify != NULL)
            {
                MSG msg;
                while( GetMessage(&msg, NULL, 0, 0) > 0 )
                {
                    TranslateMessage(&msg);
                    DispatchMessage(&msg);
                }

                UnregisterDeviceNotification(hVolNotify);
            }

            DestroyWindow(lua);
        }

        UnregisterClass(wndClass.lpszClassName, hInstance);
    }

    return 0;
} 
```

对于添加的措施，如果需要，您可以使用`CreateWindowEx()`而不是`CreateWindow()`创建仅消息窗口：

```
HWND lua = CreateWindowEx(0, wndClass.lpszClassName, NULL, 0, 0, 0, 0, 0, HWND_MESSAGE, NULL, hInstance, NULL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:38:19.937

您需要设置结构的`dbcv_unitmask`字段`DEV_BROADCAST_VOLUME`以指示您感兴趣的驱动器号。如果您想查看媒体更改，您还需要在字段中设置`DBTF_MEDIA`标志。`dbcv_flags`

# openlayers - 将外部 GeoJSON 加载到 Openlayers

> ID：13843760
> 
> 赞同：1
> 
> 时间：2012-12-12T16:05:29.857
> 
> 标签：openlayers, geojson

为了熟悉 GeoJSON / Openlayers ，我尝试使用这个例子

[http://gis-lab.info/share/DR/sandbox/geojson.html](http://gis-lab.info/share/DR/sandbox/geojson.html)（[在](https://stackoverflow.com/questions/10368726/how-to-read-external-geojson-file-from-openlayers)stackoverflow上找到）

第一步是在本地复制 html 并将 url 更改为 geojson 文件

```
"./data/l1.geojson" 
```

到

```
"http://gis-lab.info/share/DR/sandbox/data/l1.geojson" 
```

没有进行其他更改，但它没有工作..

第二次尝试是将geojson文件放在本地。

也没有用

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:13:36.223

尝试在本地复制该数据`"./data/l1.geojson"`以避免跨域问题。注意浏览器的[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)。

如果需要调用存在于单独域上的数据，则首先使用 Ajax、JSONP 或后端代理获取数据，然后将其输入到 openlayers。[阅读此内容](http://docs.openlayers.org/library/request.html)。

# wordpress - Wordpress 段落重复

> ID：13843763
> 
> 赞同：0
> 
> 时间：2012-12-12T16:05:36.380
> 
> 标签：wordpress

我在网站上遇到问题：[http ://www.artteen.com.br/concursos/](http://www.artteen.com.br/concursos/)

我没有开发这个网站，但目前我负责维护。我已经解决了很多问题，目前在内容复制方面存在问题。

该网站的 WordPress 安装以某种方式复制了第一段或最后一段。

有谁知道如何解决这个问题？

我发现一个不好的解决方案是显示：无，所以只有重复可见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T16:11:51.173

您可能应该首先停用所有插件，然后一个一个地重新激活每个插件，看看问题是否仍然存在。

# android - Android不在其他应用程序中显示我的应用程序

> ID：13843764
> 
> 赞同：0
> 
> 时间：2012-12-12T16:05:47.893
> 
> 标签：android, email-client

我正在使用一个电子邮件客户端开源开发一个 android 电子邮件客户端应用程序。用户可以通过我的应用程序配置他的电子邮件 ID。在该用户打开相机（使用另一个应用程序）并拍照后，相机应用程序会提示用户使用已安装的电子邮件客户端（使用我的电子邮件客户端应用程序）列表发送该照片。但我不想在该列表中显示我的电子邮件客户端应用程序。如何避免我的应用程序出现在另一个应用程序中？你能给我一些关于这方面的建议吗？

**我的 Android Manifest 文件的代码片段如下：**

```
 <activity
        android:name="com.test.activity.MessageCompose"
        android:configChanges="keyboardHidden|orientation|screenSize"
        android:enabled="false"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.SENDTO" />
            <data android:scheme="mailto" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.SEND" />
            <data android:mimeType="*/*" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.SEND_MULTIPLE" />
            <data android:mimeType="*/*" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <data android:scheme="mailto" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T16:13:13.133

如果您不想接收来自其他应用程序的意图，您可以删除所有意图过滤器。您可以在这里阅读更多相关信息：http: [//developer.android.com/guide/components/intents-filters.html#ifs](http://developer.android.com/guide/components/intents-filters.html#ifs)

# php - 使用类/方法作为操作提交表单

> ID：13843765
> 
> 赞同：1
> 
> 时间：2012-12-12T16:05:50.507
> 
> 标签：php, jquery, ajax, class, pdo

在尝试学习 PDO 时，我正在使用 sakila 数据库来设置准备好的插入、选择、更新等，并在课程中使用 PDO 连接。我正在使用 php 和 WAMP

我在做什么：我正在尝试使用类和方法作为操作提交表单。我还需要在 Ajax URL 中引用类/方法。从类方法获取数据以显示是很容易的。我不知道如何将它与表单一起使用。

我已经阅读/观看了大量的教程，但都引用了进入课堂的数据，但从来没有从表单中得到它。

我知道要在页面中使用一个类，你必须这样做

```
$class=New Class();
$class->method(); 
```

您如何将其转换为 ajax 中的表单操作和 URL？

```
<form action="CLASS/METHOD" method="POST" id="addmail">

$.ajax({
type: "POST",
    url: "CLASS/METHOD", 
    data: data, 
```

我对 jquery 没有问题，它在序列化后在警报中提交正确的表单输入。我只是迷失了这一行动，我无法找到任何地方的答案。

感谢您的考虑，我希望我清楚地介绍了这一点

编辑如果这不能用一个类来完成，你能不能引用一个函数，如

```
action "<?php insert();?>" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:59:32.623

因此，与我的评论相反，我会这样：

在您的 index.php 中，请注意上面评论中提到的 URL，如果存在（例如`/user/create/`），只需实例化`new User`并调用它的方法`create()`。我没有什么比这更微不足道的建议了。如果你把它放在一些`routes.php`你可以处理更多这些动作的脚本中会更好......

PS：现在我不知道为什么当你决定忘记类并使用程序 PHP 时，为什么要在回答中提出这个建议......

我的观点：使用 OO PHP，程序化 PHP 是遗物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:21:49.883

我摆脱了课堂，只使用了功能。容易得多。谢谢shadyyyx。如果您仍想添加答案，我会尝试将其标记为已接受

# liferay - 部署portal-ext liferay 错误

> ID：13843768
> 
> 赞同：0
> 
> 时间：2012-12-12T16:05:58.410
> 
> 标签：liferay, liferay-6

我正在尝试部署一个门户 ext 插件，它仅在尝试启用 live.users 跟踪器时覆盖**loginpostaction**以修复**nullpointerexception错误。**

[http://issues.liferay.com/browse/LPS-24839](http://issues.liferay.com/browse/LPS-24839)

当我在本地环境中部署时，这可以正常工作，但是当我将其部署在生产服务器上时，什么也没有发生。日志显示部署没问题，但是门户继续使用旧的类。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:05:27.583

我假设您已经编写**了另一个**EXT 插件来修复**之前**`NullPointerException`插件中存在的一些问题。

 **重要的是要记住，一旦部署了 EXT 插件，它的一些文件会被复制到 Liferay 安装中，因此删除其更改的唯一方法是再次重新部署未修改的 Liferay 应用程序。

[此外，此链接](http://www.liferay.com/documentation/liferay-portal/6.0/development/-/ai/creating-an-ext-plugin)末尾有提示

“创建 Ext 插件后，删除所有默认添加的扩展不需要的文件。这很重要，因为 Liferay 会跟踪每个 Ext 插件部署的文件，如果它们部署两个 Ext 插件，则不允许部署它们覆盖同一个文件以避免冲突。通过从 ext 插件中删除任何不需要的文件，它将更容易与其他 Ext 插件一起使用。

这些概念可能有助于发现您的问题。**

# php - php4：mysql_query 的参数计数错误？

> ID：13843770
> 
> 赞同：1
> 
> 时间：2012-12-12T16:06:15.250
> 
> 标签：php, mysql, php4

不确定我能提供多少上下文。我只是试图做逾期的作业，我得到了错误：它应该是一个简单的登录页面，登录检查和登录成功与失败。

在 check.php 上：

```
Warning: Wrong parameter count for mysql_query() in /u/students/j/j.d.dancks/public_html/cis231/hw/hw5/check.php on line 11 
```

我以为我知道我在做什么，我猜我不知道。

代码：

```
<?php
$good = false;
if(array_key_exists('nick',$_POST)&&array_key_exists('pass',$_POST))
{
    if(isset($_POST['nick'])&&isset($_POST['pass']))
    {
        $con = mysql_connect('localhost','heh','heh');
        mysql_select_db('heh_db',$con);
        $q = mysql_query(sprintf("select * from reg_users where username='%s' and pass='%s'",
        mysql_real_escape_string($_POST['nick']),
        mysql_real_escape_string($_POST['pass'])),$con) or die(mysql_query());
        if(mysql_num_rows($q)==1)
        {
            $good=true;
            $r = mysql_fetch_assoc($q);
            session_start();
            $_SESSION['user'] = $r['username'];
            $_SESSION['lastlogin'] = time();
            mysql_close($con);
            header('loginsuccess.php');
        }
        else
        {
            header('loginfailure.html');
        }
    }
    else
    {
        header('hw5.html');
    }
}
if(!$good)
{
    header('hw5.html');
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:12:16.127

mysql_query() 至少需要一个查询参数。我相信你想要的是 mysql_error()。

更改`or die(mysql_query())`为或`die(mysql_error())`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T16:29:47.117

第二个 mysql_query() 没有参数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T16:09:29.817

尝试使用另一种连接技术。

```
$nick = mysql_real_escape_string($_POST['nick']);
$pass = mysql_real_escape_string($_POST['pass']);
$query = "select * from reg_users where username='".$nick."' and pass='".$pass."'";
$q = mysql_query($query,$con) or die(mysql_query()); 
```

# command-line - 如何在 Fortran 中使用命令行参数？

> ID：13843772
> 
> 赞同：13
> 
> 时间：2012-12-12T16:06:16.427
> 
> 标签：command-line, fortran

GCC 版本 4.6

**问题：**要找到一种将参数输入可执行文件的方法，例如`a.out`，从命令行输入 - 更具体地说，输入一个双精度数字数组。

**尝试：**使用`READ(*,*)`标准中较旧的命令：程序`test.f`-

```
PROGRAM MAIN  
     REAL(8)    :: A,B  
     READ(*,*) A,B
     PRINT*, A+B, COMMAND_ARGUMENT_COUNT()
END PROGRAM MAIN 
```

执行——

```
$ gfortran test.f
$ ./a.out 3.D0 1.D0 
```

这没有用。经过一番反省，发现

```
$./a.out
3.d0,1.d0
   4.0000000000000000                0 
```

确实有效，但第二行是输入提示，并没有实现单行完成的目标。此外`COMMAND_ARGUMENT_COUNT()`，与 PERL 不同，输入提示中的数字并不能真正算作“命令行参数”。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-12T16:21:11.567

如果您想在命令行上获取提供给程序的参数，请使用（自 Fortran 2003 起）标准内在子例程`GET_COMMAND_ARGUMENT`。像这样的东西可能会起作用

```
PROGRAM MAIN  
     REAL(8)    :: A,B
     integer :: num_args, ix
     character(len=12), dimension(:), allocatable :: args

     num_args = command_argument_count()
     allocate(args(num_args))  ! I've omitted checking the return status of the allocation 

     do ix = 1, num_args
         call get_command_argument(ix,args(ix))
         ! now parse the argument as you wish
     end do

     PRINT*, A+B, COMMAND_ARGUMENT_COUNT()
END PROGRAM MAIN 
```

笔记：

*   子例程的第二个参数`get_command_argument`是一个字符变量，您必须将其解析为真实的（或其他）。另请注意，我在`args`数组的每个元素中只允许 12 个字符，您可能想要摆弄它。
*   正如您已经发现的那样，`read`它不用于读取 Fortran 程序中的命令行参数。

由于您想读取实数数组，因此最好使用您已经想到的方法，即在程序启动后从终端读取它们，这取决于您。

# iphone - iOS 已弃用 exit(0)？

> ID：13843774
> 
> 赞同：6
> 
> 时间：2012-12-12T16:06:22.520
> 
> 标签：iphone, ios

有谁知道`exit(0)`在 iOS 应用程序中是否已弃用？我知道手动终止应用程序不是一个好的决定，但是如果我们在代码中使用它，Apple 会禁止该应用程序吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T16:16:46.390

不，您不能调用 exit，因为您的应用程序***应该***被拒绝。这已被 Apple 反复劝阻，并且已知会导致 iOS 多任务切换出现严重错误。您应该让用户自己使用主页按钮。

[http://developer.apple.com/library/ios/#qa/qa1561/_index.html](http://developer.apple.com/library/ios/#qa/qa1561/_index.html)

“此外，可能不会保存数据，因为 -applicationWillTerminate: 和类似的 UIApplicationDelegate 方法不会在您调用 exit 时被调用。如果在开发或测试期间需要终止您的应用程序，建议使用中止函数或断言宏。”

2012-04-09
更新以更强烈地阻止退出功能，并包括调试的最佳实践。

2008-08-27
新文档讨论了在代码中终止 iOS 应用程序的最佳实践。

直接来自 iOS 人机界面指南 [http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/UEBestPractices/UEBestPractices.html#//apple_ref/doc/uid/TP40006556-CH20-SW27](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/UEBestPractices/UEBestPractices.html#//apple_ref/doc/uid/TP40006556-CH20-SW27)

“不要以编程方式退出

永远不要以编程方式退出 iOS 应用程序，因为人们倾向于将其解释为崩溃。但是，如果外部环境阻止您的应用程序按预期运行，您需要告诉您的用户这种情况并解释他们可以做些什么。根据应用程序故障的严重程度，您有两种选择。

显示一个有吸引力的屏幕，描述问题并提出更正建议。屏幕会提供反馈，让用户确信您的应用没有任何问题。它让用户可以控制，让他们决定是否要采取纠正措施并继续使用您的应用程序，或者按下主页按钮并打开另一个应用程序

如果只有部分应用功能不可用，请在人们使用该功能时显示屏幕或提醒。仅当人们尝试访问不起作用的功能时才显示警报。

如有必要，显示许可协议或免责声明

如果您为您的 iOS 应用程序提供最终用户许可协议（或 EULA），App Store 会显示它，以便人们在获得您的应用程序之前可以阅读它。

如果可能，请避免要求用户在首次启动您的应用程序时表明他们同意您的 EULA。在没有显示协议的情况下，用户可以毫不拖延地享受您的应用程序。但是，即使这是首选的用户体验，也可能并非在所有情况下都可行。如果您必须在您的应用程序中显示许可协议，请以与您的用户界面协调一致的方式执行此操作，并将给用户造成的不便降至最低。

如果可能，请在您的应用说明或 EULA 中提供免责声明。用户随后可以在 App Store 中查看免责声明，您可以平衡业务需求和用户体验需求。”

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T16:09:52.570

不，Apple 不会拒绝您的应用使用`exit(0)`.

你是对的，这不是一个很好的设计选择，但有时它可能很有用。

正如 Larme 所说，如果使用不当，可能会被视为崩溃，而崩溃将导致您的应用程序被拒绝。

`applicationDidEnterBackground`但是，当您（在有条件的情况下）您可能希望强制应用程序重新启动时，它可能非常有用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-12T16:14:50.757

我有一个应用程序由于退出方式（通过 UIAlertView）而被拒绝，`exit(5)` 当用户单击正确的按钮时执行此操作。

我收到了：

> 我们发现您的应用包含一个用于退出应用的 UI 控件。这不符合 App Store 审查指南所要求的 iOS 人机界面指南。
> 
> 请参阅随附的屏幕截图以供参考。
> 
> iOS 人机界面指南指定，
> 
> “随时准备停止当人们按下 Home 按钮打开不同的应用程序或使用设备功能（例如手机）时，iOS 应用程序会停止。特别是，人们不会点击应用程序关闭按钮或从菜单中选择退出。为了提供良好的停止体验，iOS 应用程序应该：
> 
> *   尽快并尽可能多地保存用户数据，因为退出或终止通知可能随时到达。
>     
>     
> *   停止时保存当前状态，尽可能详细地保存，以便人们在再次启动应用程序时不会丢失上下文。例如，如果您的应用显示滚动数据，请保存当前滚动位置。”
>     
>     
> 
> 删除任何退出应用程序的机制是合适的。

“隐藏”退出可以理解为用户崩溃，不是吗？

# spring - 使用 Spring 在 ServletContextListener 中注入静态属性

> ID：13843776
> 
> 赞同：0
> 
> 时间：2012-12-12T16:06:31.227
> 
> 标签：spring, dependency-injection, static-members, servlet-listeners

我需要将静态属性注入我的侦听器类之一

首先我检查了这个 [Spring - Injecting a dependency into a ServletContextListener](https://stackoverflow.com/questions/4746041/spring-injecting-a-dependency-into-a-servletcontextlistener)。但是它不适用于静态属性。然后我与这个[http://planproof-fool.blogspot.be/2010/03/spring-setting-static-fields.html](http://planproof-fool.blogspot.be/2010/03/spring-setting-static-fields.html)混合仍然无法获得注射。

这是我的简短代码

```
public class MyListener implements ServletContextListener {

    private static Logger logger = Logger.getLogger(MyListener.class);
    private static ServletContext context = null;
    @Autowired
    private static Repository repository;
} 
```

应用程序上下文.xml

```
<import resource="classpath*:spring/modelContextDump.xml" />

    <!-- Scan for @Autowired annotations -->
    <context:annotation-config />

    <bean id="propertiesUtil"
        class="com.my.utils.PropertiesUtil">
        <property name="locations">
            <list>
                <value>classpath:config.properties</value>
            </list>
        </property>
    </bean> 
```

并在 modelContext 文件中

```
<bean id="repository"
    class="com.my.repository.RepositoryImpl"
    parent="abstractRepository">
</bean> 
```

从功能上讲，此侦听器类将永远运行（无限时间）并访问存储库属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:35:20.963

正如[http://planproof-fool.blogspot.be/2010/03/spring-setting-static-fields.html所建议的那样](http://planproof-fool.blogspot.be/2010/03/spring-setting-static-fields.html)

这不适合你吗？

```
private static Repository repository;

@Autowired(required = true)
private setStaticRepo(Repository localRepo ) {
    repository = localRepo;
} 
```

# java - 如何实现一个可迭代的类并公开一个真正不可变的 API？

> ID：13843777
> 
> 赞同：0
> 
> 时间：2012-12-12T16:06:33.023
> 
> 标签：java, immutability

我想在 Java 中实现一个可迭代的不可变类。我这样做是通过以下方式：

```
public final class MyIterable implements Iterable<Integer> {

    private final Collection<Integer> items;

    public MyIterable(Collection<Integer> items) {
        this.items = Collections.unmodifiableCollection(new LinkedList<Integer>(items));
    }

    @Override
    public Iterator<Integer> iterator() {
        return items.iterator();
    }
} 
```

这一切都很好，我无法在我的实例中更改任何内容。但是，我的类仍然公开了一个 API，表明它的内部可以通过迭代器上的 remove() 方法进行修改：

```
MyIterable myIterable = new MyIterable(Arrays.asList(1, 2, 3));
for (Iterator<Integer> it = myIterable.iterator(); it.hasNext();) {
    it.remove(); // I do not want to expose this even 
                 // though I know it will throw an error at runtime.
    it.next();
} 
```

有什么方法可以避免暴露这个 remove 方法，从而让我的类暴露一个真正不可变的 API？理想的做法是实现类似的东西`ReadOnlyIterable`，但类似的东西在 Java 中似乎不可用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T16:12:29.083

它似乎通过它的方法签名来表明它，但是这些方法被专门记录在说“不，我们不提供这些行为！”

为了实现这一点，您还必须记录您遵循与`UnmodifiableList`.

**开发人员**有责任**了解他们使用的库做什么**，而**库创建者**有责任**提供这些信息**。

底线是，`Iterable`被融入语言（`for(a:b)`循环）中，虽然您可以创建自己的界面，`ReadOnlyIterable`但它根本不会那么健壮。

这种方法的问题是您牺牲了**编译时完整性**。换句话说，有人可以编译使用该`remove()`方法的代码，直到运行时才发现它不起作用。这意味着，如果他们碰巧没有正确测试，那么在生产之前您不会发现不应该使用该方法。

您也许可以使用注释和警告来缓解这种情况 - 如果他们听取警告，或者使用告诉他们有关警告的 IDE，他们会更早发现。但是**你不能指望用户做正确的事**。这就是为什么你必须抛出异常而不是什么都不做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T16:46:14.517

您可以遵循[Guava](http://docs.guava-libraries.googlecode.com)的方法，该方法定义了一个抽象子类`Iterator`，保证该`remove()`方法**不受支持**并且总是抛出一个`UnsupportedOperationException`.

这是 的来源[`UnmodifiableIterator`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/UnmodifiableIterator.html)。请注意，该`remove()`方法是**final**：

```
public abstract class UnmodifiableIterator<E> implements Iterator<E> {
  /** Constructor for use by subclasses. */
  protected UnmodifiableIterator() {}

  /**
   * Guaranteed to throw an exception and leave the underlying data unmodified.
   *
   * @throws UnsupportedOperationException always
   */
  @Override
  public final void remove() {
    throw new UnsupportedOperationException();
  }
} 
```

现在，在任何不可变的可迭代对象中，您都可以将`iterator()`方法的返回类型从

```
public Iterator iterator() { ... } 
```

到：

```
public UnmodifiableIterator iterator() { ... } 
```

这要归功于Java 5 中引入的[协变返回类型](https://blogs.oracle.com/sundararajan/entry/covariant_return_types_in_java)。现在这给了客户端**静态类型的信心**，即迭代器肯定是不可变的。

但是，**您仍应为**强调此行为的方法提供 JavaDoc，因为如果客户端不有意查找返回类型，则仍然很容易忽略它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T16:11:52.343

如果你想让你的班级成为`Iterable`那么没有。你必须处理它。您应该添加 JavaDoc，并在使用 API 调用的开发人员时抛出适当的异常`remove()`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T16:34:01.910

您可以使用的一种替代方法（我添加它是为了完整性而不是作为推荐）是提供一个`Enumeration`. 有关详细信息，请参见[此处](http://docs.oracle.com/javase/6/docs/api/java/util/Enumeration.html)。

遗憾的是，您将无法在其上使用新`for`循环，但根据定义，它是不可变的。

这是一个例子：

```
class E implements Enumeration<Integer> {
  int i = 0;

  @Override
  public boolean hasMoreElements() {
    return true;
  }

  @Override
  public Integer nextElement() {
    return ++i;
  }

} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-12T16:16:11.220

使用该`try`语句，因此当它引发错误时，您可以使用 null 来处理它`System.out.print()`。

# php - foreach/if 加减法

> ID：13843778
> 
> 赞同：0
> 
> 时间：2012-12-12T16:06:36.303
> 
> 标签：php

我在 PHP 中有一个 foreach 循环，它从 GPX 文件中剔除数字并生成一个表格。

例如：

```
Distance | Elevation
--------------------
0        | 268
0.27     | 294
0.87     | 294
1.14     | 321
1.25     | 324
1.49     | 371
2.30     | 399
3.00     | 372
3.91     | 346 
```

我想在海拔升高时加起来。所以，对于这张表：

增加：294 - 268 = 26, 294 - 294 = 0 (26), 321 - 294 = 27 (53), 324 - 321 = 3 (56).....等等

我还想计算它何时减少并将其分开以获得总增加和总高度减少。

所以，我基本上想问一下之前的每个数字是更高还是更低，然后根据它添加到一个变量中以备后用。

有任何想法吗？

**我试图保持简单，但要求代码......提前道歉！**

```
<?php
function objectsIntoArray($arrObjData, $arrSkipIndices = array())
{
    $arrData = array();

    // if input is object, convert into array
    if (is_object($arrObjData)) {
        $arrObjData = get_object_vars($arrObjData);
    }

    if (is_array($arrObjData)) {
        foreach ($arrObjData as $index => $value) {
            if (is_object($value) || is_array($value)) {
                $value = objectsIntoArray($value, $arrSkipIndices); // recursive call
            }
            if (in_array($index, $arrSkipIndices)) {
                continue;
            }
            $arrData[$index] = $value;
        }
    }
    return $arrData;
}

//$xmlUrl = "../wp-content/uploads/2012/11/stoodley-pike-walk-cragg-vale-withens-clough-circular.gpx"; // XML feed file/URL
$uploadyr = $_GET['yr'];
$uploadmth = $_GET['mth'];
$gpx = $_GET['gpx'];

$xmlUrl = "../wp-content/uploads/" . $uploadyr . "/" . $uploadmth . "/" . $gpx . ".gpx";
$xmlStr = file_get_contents($xmlUrl);
$xmlObj = simplexml_load_string($xmlStr);
$arrXml = objectsIntoArray($xmlObj);
?>

<!doctype html>
<head>
    <title>Graph</title>

    <!--<link href="visualize.css" rel="stylesheet">
    <link href="visualize-light.css" rel="stylesheet">-->
    <link href="visualize-override.css" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>    
    <script src="visualize.jQuery.js"></script>
    <script>
        $(document).ready(function(){
            $('#elevation').visualize({
                type: 'area',
                parseDirection: 'y',
                colors: ['#339933','#00ff00','#0000ff','#ffff00','#ff00ff','#00ffff','#000000','#666666','#AAAAAA']
            });
            $('.visualize-labels-x li:odd').hide();
        });
    </script>
</head>

<body>

<div id="wrapper">

<?php

echo '<table id="elevation"><caption>Elevation Profile</caption><thead><td>Total Distance (mi)</td><th>Elevation</th></thead><tbody>';

foreach($arrXml["rte"]["rtept"] as $single){

        $lat1 = $prevLat;
        $lng1 = $prevLon;
        if($prevLat == null && $prevLon == null){
            $lat1 = $single["@attributes"]["lat"];
            $lng1 = $single["@attributes"]["lon"];
        }
        $lat2 = $single["@attributes"]["lat"];
        $lng2 = $single["@attributes"]["lon"];

        $pi80 = M_PI / 180;
        $lat1 *= $pi80;
        $lng1 *= $pi80;
        $lat2 *= $pi80;
        $lng2 *= $pi80;

        $r = 6372.797; // mean radius of Earth in km
        $dlat = $lat2 - $lat1;
        $dlng = $lng2 - $lng1;
        $a = sin($dlat / 2) * sin($dlat / 2) + cos($lat1) * cos($lat2) * sin($dlng / 2) * sin($dlng / 2);
        $c = 2 * atan2(sqrt($a), sqrt(1 - $a));
        $km = $r * $c;

        $distance += $km;

        $buildrow = '';
        $buildrow .= '<tr>';     
        if($prevLat !== null && $prevLon !== null){
            $buildrow .= '<th>' . number_format(($miles ? ($distance * 0.621371192) : $distance),2) . '</th>';
        } else {
            $buildrow .= '<th>0</th>';
        }
        $buildrow .= '<td>' . number_format($single["ele"],0) . '</td>';
        $buildrow .= '</tr>';

        echo $buildrow;

    $prevLat = $single["@attributes"]["lat"];
    $prevLon = $single["@attributes"]["lon"];
}
echo '</tbody></table>';

echo '<p>Total Distance: ' . number_format($distance,2) . 'mi</p>';

?>

</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:43:00.033

您只需要在循环之前添加一个变量来保存之前的值。说`$prevValue`。然后在循环中，在循环*结束*时，将其设置为*当前*值。当循环运行下一个时，它将是*前一个*值。

然后，只需检查它是否大于或小于*当前*值。

```
if($val > $prevVal){}
elseif($val < $prevVal){} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:27:51.127

这可以使用以下代码完成：

```
<?php
/**
 * Calculates elevation information for a given array
 */
class ElevationInfo {
  private $arrHeight= array();
  private $intTotal= 0;
  private $intUpHill= 0;
  private $intDownHill= 0;

  public function __construct($arrHeight) {
    $this->arrHeight= $arrHeight;
    $this->calculate();
  }

  private function calculate() {
    $intLast=0;
    if (is_array($this->arrHeight)) {
      foreach ($this->arrHeight as $val) {
        if ($val > $intLast) {
            $this->intTotal += $val-$intLast;
            $this->intUpHill += $val-$intLast;
        } else {
            $this->intTotal += $intLast-$val;
            $this->intDownHill += $intLast-$val;
        }
        $intLast=$val;
      }
    }
  }

  public function getTotal() {
    return $this->intTotal;
  }

  public function getUpHill() {
    return $this->intUpHill;
  }

  public function getDownHill() {
    return $this->intDownHill;
  }
}

// define heights field
$arrHeight= array(268,294,294,321,324,371,399,372,346);

$elevation= new ElevationInfo($arrHeight);
print sprintf('Total: %s<br />Up hill: %s<br />Down hill: %s',
    $elevation->getTotal(), 
    $elevation->getUpHill(),
    $elevation->getDownHill()); 
```

这将遍历给定的数组，计算总数和起伏，并允许您使用类方法“getDownHill()”、“getUpHill”和“getTotal”获得减少、增加和总数。希望我没有忽略任何事情，还无法测试代码，但我认为它应该可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T16:13:21.740

```
 $elevationTotals = array('up' => 0,'down' =>0);
 $lastelevation = false;
 foreach($gpxdata as $key => $data){
      if($lastelevation !== false){
          $gpxdata[$key]['ElevationAlteration'] = $gpxdata['Elevation'] - $lastelevation;
          if($gpxdata[$key]['ElevationAlteration'] > 0){
               $elevationTotals['up'] += $gpxdata[$key]['ElevationAlteration'];
          } else {
               $elevationTotals['down'] += abs($gpxdata[$key]['ElevationAlteration']);
          }
      } else {
         $gpxdata[$key]['ElevationAlteration'] = 0;
      }
      $lastelevation = $gpxdata['Elevation'];
 } 
```

# google-analytics - Google Analytics 异步事件推送计数配额？

> ID：13843782
> 
> 赞同：1
> 
> 时间：2012-12-12T16:06:43.330
> 
> 标签：google-analytics, google-analytics-api

异步事件推送是否计入 GA API 中的 50,000 个请求限制？

在文档的[配额政策](https://developers.google.com/analytics/devguides/reporting/core/v3/#quota_policy)部分，他们将贡献请求描述为“每个项目每天 50,000 个请求”

这仅与 API 调用有关还是也适用于事件推送？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:48:37.440

50,000 个请求限制适用于 Managemnt 和报告 REST API。

数据收集是不同的交易，有不同的限制。目前，Google Analytics 免费版每月的点击次数限制为 1000 万次。由于跟踪而对 Google 服务器的任何请求都会导致命中。其中包括网页浏览量和一些不太常见的事件，如电子商务、社交互动跟踪。

有关数据收集限制的更多信息：

[http://support.google.com/analytics/bin/answer.py?hl=en&answer=1070983](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1070983)

# wcf - 将 pptx 文件转换为视频的 wcf 服务

> ID：13843783
> 
> 赞同：1
> 
> 时间：2012-12-12T16:06:44.993
> 
> 标签：wcf, powerpoint, wmv

我已经编写了一个将 pptx 文件转换为 wmv 的 Windows 应用程序。现在我想做的是将此应用程序作为服务，以便它可以在服务器上运行，当我使用时，我可以发送一个 pptx 文件，转换将在服务器端完成，然后将 .wmv 文件发送回我的客户端。我已经编写了一些 wcf 服务，但我不是专家，远非如此。我的问题是客户端和服务器如何传输文件谢谢您的时间

# php - Google AutoSuggest API 中的希腊字符

> ID：13843787
> 
> 赞同：2
> 
> 时间：2012-12-12T16:07:06.087
> 
> 标签：php, xml, json

我正在尝试使用带有 PHP 的谷歌自动建议 API 来捕获希腊语的搜索建议。我尝试了 2 种不同的方法，Google API 返回正确的结果，但原生 PHP`json_decode()`无法处理希腊字符并`simplexml_load_string()`引发编码错误。当我`utf8_encode()`第一次使用时，希腊字符在浏览器中回显时会变成黑色菱形中的随机字母或问号。

我想制作一个 php 文件，将此数据转换为 json 数组，该数组可以通过`jquery.ajax()`函数调用以向用户提供希腊语自动建议。

我在这里做错了什么？

* * *

**方法一失败**

[http://suggestqueries.google.com/complete/search?hl=el&ie=UTF-8&client=firefox&q=τραπέζι](http://suggestqueries.google.com/complete/search?hl=el&ie=UTF-8&client=firefox&q=%CF%84%CF%81%CE%B1%CF%80%CE%AD%CE%B6%CE%B9)

我使用 cURL 获取此 URL，然后使用`json_decode()`. 希腊字符无法正确解析。

**方法二失败**

[http://suggestqueries.google.com/complete/search?hl=el&ie=UTF-8&q=%CF%84%CF%81%CE%B1%CF%80%CE%AD%CE%B6%CE%B9&output =工具栏](http://suggestqueries.google.com/complete/search?hl=el&ie=UTF-8&q=%CF%84%CF%81%CE%B1%CF%80%CE%AD%CE%B6%CE%B9&output=toolbar)

我使用 cURL 获取数据，将其加载到`simplexml_load_string()`然后得到编码错误。当我`utf8_encode()`首先输入数据时，编码错误消失了，但希腊字符却一团糟。

# xampp - 使用 XAMPP 时看不到我的页面

> ID：13843791
> 
> 赞同：0
> 
> 时间：2012-12-12T16:07:24.347
> 
> 标签：xampp, ubuntu-12.04, document-root

今天我开始为 Ubuntu 12.04 使用 XAMPP。我将文档根目录的 Apache 服务器的配置从 /opt/lamp/htdcos 更改为 Aptana Studio 3 (/var/www) 的项目位置，之后我启动 XAMPP 并尝试访问我的页面，这是文件夹主页中的文件 index.html （我写了 http:// localhost/Homepage/index.html ），但它不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:11:46.260

试试看嘛`http:// localhost/Homepage`

# c# - 在 C# 中指定路径时如何返回一个级别？

> ID：13843794
> 
> 赞同：5
> 
> 时间：2012-12-12T16:07:27.703
> 
> 标签：c#, path, wix

我想以编程方式在 Visual Studio 的“扩展”文件夹中安装一个文件夹。我能得到的最接近的是使用 VS100COMNTOOLS 环境变量。我想要做的是从“工具”文件夹返回一级，进入 IDE/Extensions，类似于 VS100COMNTOOLS..\IDE\Extensions。这是我的代码：

```
namespace TemplatesCustomAction
{
    public class CustomActions
    {
        [CustomAction]
        public static ActionResult CustomAction1(Session session)
        {

            var vspath = Environment.GetEnvironmentVariable("VS100COMNTOOLS");

            session["VSINSTALLATIONFOLDER"] = string.Format(@"{0}\..\IDE\Extensions", vspath);

            return ActionResult.Success;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T16:20:29.960

使用[`Path.GetFullPath`](http://msdn.microsoft.com/en-us/library/system.io.path.getfullpath.aspx)：

```
var pathWithParent = string.Format(@"{0}\..\IDE\Extensions", vspath);
session["VSINSTALLATIONFOLDER"] = Path.GetFullPath(pathWithParent); 
```

虽然我也宁愿使用`Path.Combine`：

```
var pathWithParent = Path.Combine(vspath, @"\..\IDE\Extensions"); 
```

# javascript - 图片保存了吗？

> ID：13843799
> 
> 赞同：0
> 
> 时间：2012-12-12T16:07:51.167
> 
> 标签：javascript, file-io, photoshop, photoshop-script

我编写了一个函数来确定图像文件是否已保存。它依赖于路径名的 try / catch。

```
hasImageBeenSaved()

function hasImageBeenSaved()
{
    var n = app.activeDocument.name;
    try
    {
        var myPath = app.activeDocument.path;
        alert(myPath);
        return true;
    }
    catch(e)
    {
        alert(n + " has not been saved");
        return false;
    }
} 
```

Photoshop 中的脚本通常需要处理已保存的图像或在更改后将被保存的图像。从功能上讲，以上都很好；但我确信有一个更优雅的解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:15:33.810

我发现了一个班轮

```
alert( app.activeDocument.saved); 
```

但是，在进一步调查中，它没有考虑新创建的文档。

# javascript - 我可以为 grails 对象定义一个 javascript 变量吗？

> ID：13843801
> 
> 赞同：0
> 
> 时间：2012-12-12T16:07:50.527
> 
> 标签：javascript, html, grails

我可以将 javascript 变量分配给这样的 grails 对象吗？

```
var newReport = ${report}; 
```

`report`是一个 grails 域对象，它从控制器传回 gsp 文件。

目前这在我的页面中不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:07:45.557

假设该报告是一个 Grails 域类，您必须将其“翻译”为有效的 javascript 格式。一种方法是将其设置为 JSON。就像是：

**在控制器中**

```
def reportJson = report as JSON 
```

**在 gsp**

```
<script type='text/javascript'>
  var newReport = $.parseJSON("${reportJson}");
</script> 
```

parseJSON 接受 json 字符串并返回一个 javascript 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T14:30:18.290

只需将域对象作为 JSON 呈现给 gsp，其中一些 javascript 代码通过**eval()**函数获取 json。例如：

域类 - 乐队：

```
String bandName    //some property
... 
```

控制器：

```
def bands = Band.list()
render(template:"result", model:[bands:bands as JSON] 
```

_result.gsp：

```
<script>
    var bandList = eval(${bands});
    for(i=0; i<bandList.length; i++){   
        var name = bandList[i].bandName;
        ....
    }
    ....
</script> 
```

# c++ - 为什么 Visual C++ 无法编译继承自私有嵌套类的友元模板？

> ID：13843803
> 
> 赞同：6
> 
> 时间：2012-12-12T16:07:53.240
> 
> 标签：c++, visual-c++, gcc, compiler-errors, g++

考虑以下代码：

```
class A {
  class B {};

  template <typename T>
  friend class C;
};

template <typename T>
class C : A::B {};

int main() { C<int> c; } 
```

它可以使用 GCC 和 Clang 正常编译，但 Visual C++ 2010 会出现错误：

```
test.cc(11) : error C2248: 'A::B' : cannot access private class declared in class 'A' 
```

它是 Visual C++ 中的错误还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:37:30.107

1998 年标准和 2011 年标准都包含与示例基本相同的代码，分别在 14.5.3 #4 和 14.5.4 #3 中。

```
class X {
  template<class T> friend struct A;
  class Y { };
};
template<class T> struct A { X::Y ab; }; // OK
template<class T> struct A<T*> { X::Y ab; }; // OK 
```

显然这是一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:29:38.037

是的。这肯定是 Visual C++ 编译器中的一个错误。

^(脚注：GCC 编译器可以很好地编译它。)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T08:25:04.077

实际上，`A::B`是私有的`A`。

这可能意味着，但这是我的解释，我必须用标准中的一段来支持它，你不能`A::B`在全局范围内引用，更不用说声明任何 的子类`A::B`，也不能创建指向`A::B`等的指针。 ..

另一方面，`X` *可以*访问`A::B`，因此可以声明它的子类*：*

```
class A {
  class B {
  };
  template<typename T> friend class X;
  template<typename T> friend class Y;
};

template<typename T> class X : public A::B{};

template<typename T>
class Y {
  class B2 : public A::B {};
};

int main() { 
   X<int> x; 
   Y<int> y;
} 
```

对于这个片段，Comeau 没有告诉我`Y`不能实例化。VS2005 也没有。

# php - 根据 id mysql DB 获取特定表行

> ID：13843809
> 
> 赞同：0
> 
> 时间：2012-12-12T16:08:02.240
> 
> 标签：php

我有一个数据库，我可以在其中查看所有记录，最后一列是表 ID，我单击它，我希望能够仅编辑该行数据，这就是我得到的，但在更新 phpmyadmin 后它没有工作:: ：

```
 <?php

include "db.inc.php";

$id=$_GET['id'];

      $order = "SELECT * FROM ircb where id='$id'";
      $result = mysql_query($order);
      $row = mysql_fetch_array($result);
      ?>
      <form method="post" action="update.php">
      <input type="hidden" name="id" value="<? echo "$row[id]"?>">

        <tr>        
          <td>Date</td>
          <td>
            <input type="text" name="cdate" 
         value="<? echo "$row[cdate]"?>" size="30"  style="color: black;background-color:#FFFF11">
          </td>
        </tr>  
        <tr>        
          <td>Item</td>
          <td>
            <input type="text" name="item" 
         value="<? echo "$row[item]"?>" size="30"  style="color: black;background-color:#FFFF11">
          </td>
        </tr> 
```

我最终没有返回任何结果，当我将鼠标悬停在链接上时，它确实显示了正确的表格行 ID，但是当我单击链接时，我得到了包含一些代码的空框，例如字段中的一些代码`<? echo`......虽然没有真实值......并且单击链接后的页眉确实显示 ::: ...../edit_form.php?id=8 第 8 行，所以我认为我的查询中的某些内容不太正确。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T07:00:15.497

这是因为您尝试`GET`从 ed 的表单中命名“id” `POST`；）并且更清楚地将 PHP 嵌入到 html 中。例如，`value="<?php echo $row['id']; ?>"`更“真实”而不是`value="<? echo "$row[id]"?>"`;)

# amazon-s3 - Amazon EC2：将 EBS 卷快照移动到 s3

> ID：13843810
> 
> 赞同：25
> 
> 时间：2012-12-12T16:08:02.440
> 
> 标签：amazon-s3, amazon-web-services, amazon-ec2, amazon

我正在尝试为我的 EBS 卷创建备份和恢复机制

我可以通过使用轻松地为此创建一个机制

拍摄卷的快照

```
ec2-create-snapshot -d $description $volume 
```

并恢复

```
ec2-create-volume --snapshot $snapid -z $zone 
```

现在根据我的理解，这些快照仍在 EBS 上。因此，更好的方法是将快照移动到 S3。

那么如何将快照移动到 s3 存储桶？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-12T16:25:19.007

EBS 快照存储在 S3 中。不需要将快照移动到任何地方。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T00:20:22.970

这个问题对我来说似乎足够明智。在我们的例子中，我们想要获取我们在 us-west-1 区域中使用的 EBS 卷并提供它的映像（通过 S3），以便我们可以将其附加到在 us-east-1 中运行的实例。

尽管这个概念看起来很简单，但目前显然没有简单的解决方案，甚至根本没有解决方案。如果有人知道，请在此处发布信息或链接，谢谢。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-26T22:10:58.510

您可以使用 AWS 发布的新功能（EBS 快照副本）来完成此操作

[http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-copy-snapshot.html](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-copy-snapshot.html)

# ravendb - 如何配置 IIS 以支持 RavenDB 的 api-key？

> ID：13843811
> 
> 赞同：0
> 
> 时间：2012-12-12T16:08:02.107
> 
> 标签：ravendb, api-key

我正在考虑托管我自己的 RavenDB 服务器并将其公开给网络。我想创建一个类似于 RavenHQ / AppHarbor 使用的 api 密钥。谁能指出我正确的方向，即如何设置 IIS 来接收密钥并进行身份验证？生成密钥本身不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:48:55.647

在 RavenDB 2.0 中，您无需进行任何设置即可。RavenDB 将为您做一切。您可以从工作室创建密钥。

# asynchronous - 在异步任务完成之前不显示带有 get() 方法的异步任务之前的 Toast

> ID：13843816
> 
> 赞同：2
> 
> 时间：2012-12-12T16:08:15.300
> 
> 标签：asynchronous, get, toast

我有一个异步任务，它获取一些信息并将其传递回主线程。所以，我正在使用 get() 方法。我知道一旦运行了这样的异步任务（它更像是同步任务），您将无法更新 UI。我想要的只是在调用异步任务之前用简单的 Toast 给出先前的消息。或多或少为：

祝酒词

asynctask.execute(...).get()

但是只有在异步任务完成时才会显示 Toast 消息。

有没有办法在使用 get 方法调用异步任务之前显示消息？

提前致谢。

# forms - 在 Symfony 2 中指定指定实体的表单主题

> ID：13843817
> 
> 赞同：0
> 
> 时间：2012-12-12T16:08:18.617
> 
> 标签：forms, symfony, themes

我正在处理一个非常复杂的表格。

此表单基于`OngletFichier` `Entity`具有其表单 Builder ：

`$builder ->add('traitement') ->add('ligneEntetes'); $builder->add('colonnesOnglet', 'collection', array('type' => new ColonneOngletType() ));`

如您所见，在这个实体表单中，我得到了`ColonneOnglet`一个其他实体的列表。

* * *

它看起来像这样：

**实体形式**

*   `OngletFichier`（文本输入）的 SimpleAttribute
*   `OngletFichier`（文本输入）的 SimpleAttribute
*   `ColonneOnglet`（有自己的属性，自己的输入）
*   `ColonneOnglet`（有自己的属性，自己的输入）
*   `ColonneOnglet`（有自己的属性，自己的输入）

* * *

我需要为每个表单定义一个特殊的表单主题`ColonneOnglet`来组织它的输入，并根据它的一个属性将其设置为红色或不设置为红色。

我对表单主题很迷茫。

我找到了一个例子，但我不知道它是否能回答我的问题：[http ://symfony2-document.readthedocs.org/en/latest/cookbook/form/create_custom_field_type.html](http://symfony2-document.readthedocs.org/en/latest/cookbook/form/create_custom_field_type.html)

提前感谢您帮助我！

编辑： [http](http://symfony.com/doc/current/cookbook/form/form_customization.html#how-to-customize-an-individual-field) ://symfony.com/doc/current/cookbook/form/form_customization.html#how-to-customize-an-individual-field 这很容易！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:56:15.570

您找到的文章很好，但我认为手册的这一部分更适合：[http ://symfony.com/doc/2.0/cookbook/form/form_customization.html#how-to-customize-an-individual-因此，最简单的方法](http://symfony.com/doc/2.0/cookbook/form/form_customization.html#how-to-customize-an-individual-field) 是使用表单主题创建单独的文件，然后使用 `form_theme form 'Path:To:theme.html.twig'`. 您还可以在模板本身内定义样式并使用此指令导入：`form_theme form _self`，但请注意，为了使其正常工作，模板必须扩展另一个。

# testing - 无头移动浏览器

> ID：13843819
> 
> 赞同：3
> 
> 时间：2012-12-12T16:08:36.163
> 
> 标签：testing, mobile, continuous-integration

我正在构建一个移动网站，并希望自动化我的单元/功能测试。

我们可以运行 chrome mobile 和 firefox mobile 的无头版本吗？

现有的无头浏览器是否足够考虑？

# sql - 左连接多个表并避免重复

> ID：13843823
> 
> 赞同：-1
> 
> 时间：2012-12-12T16:08:44.577
> 
> 标签：sql, oracle10g, left-join

我有两个表与我的基表有 1:n 的关系，我都想 LEFT JOIN。

```
-------------------------------
Table A    Table B    Table C
-------------------------------
|ID|DATA|  |ID|DATA|  |ID|DATA|
-------------------------------
 1  A1      1  B1      1  C1
 -          -          1  C2 
```

我在用着：

```
SELECT * FROM TableA a
    LEFT JOIN TableB b
           ON a.Id = b.Id
    LEFT JOIN TableC c
           ON a.Id = c.Id 
```

但这显示了 TableB 的重复项：

```
1  A1    B1   C1
1  A1    B1   C2 
```

如何编写此连接以忽略重复项？如：

```
1  A1    B1     C1
1  A1    null   C2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:17:36.330

作为一个 UNION 来做，即

```
 SELECT TableA.ID, TableB.ID, TableC.Id
   FROM TableA a
         INNER JOIN TableB b ON a.Id = b.Id
         LEFT JOIN TableC c ON a.Id = c.Id
 UNION
 SELECT TableA.ID, Null, TableC.Id
   FROM TableA a
         LEFT JOIN TableC c ON a.Id = c.Id 
```

即一个选择返回第一行，另一个选择返回第二行。这有点粗糙，因为我对您尝试读取的数据一无所知，但原则是合理的。您可能需要对其进行一些修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:26:14.970

我认为你需要做逻辑才能得到你想要的。您希望任何多个 b.id 消除它们。您可以使用识别它们`row_number()`，然后使用`case`逻辑将后续值设为 NULL：

```
select a.id, a.val,
       (case when row_number() over (partition by b.id, b.seqnum order by b.id) = 1 then val
        end) as bval
       c.val as cval
from TableA a left join
     (select b.*, row_number() over (partition by b.id order by b.id) as seqnum
      from tableB b
     ) b
     on a.id = b.id left join
     tableC c
     on a.id = c.id 
```

我不认为你想要 B 和 C 之间的完全连接，因为你会得到多行。如果 B 有 2 行的 id 而 C 有 3 行，那么你会得到 6。我怀疑你只想要 3。为了实现这一点，你想做类似的事情：

```
select *
from (select b.*, row_number() over (partition by b.id order by b.id) as seqnum
      from TableB b
     ) b
     on a.id = b.id full outer join
     (select c.*, row_number() over (partition by c.id order by c.id) as seqnum
      from TableC c
     ) c
     on b.id = c.id and
        b.seqnum = c.seqnum join
     TableA a
     on a.id = b.id and a.id = c.id 
```

这是枚举“B”和“C”列表，然后按列表中的位置加入它们。它使用完整的外部连接来获取较长列表的完整长度。

最后一个连接引用了两个表，因此 TableA 可以用作过滤器。B 和 C 中的额外 ID 不会出现在结果中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T16:16:07.573

你想使用不同的

```
SELECT distinct * FROM TableA a
LEFT JOIN TableB b
       ON a.Id = b.Id
LEFT JOIN TableC c
       ON a.Id = c.Id 
```

# wpf - 使用 MVVM 将 UserControl 加载到 ItemsControl

> ID：13843824
> 
> 赞同：3
> 
> 时间：2012-12-12T16:08:45.170
> 
> 标签：wpf, mvvm, user-controls, itemscontrol

我有一个 UserControl，我想在 MainWindow 上多次加载它。为此，我使用`ItemsControl`：

```
 <ItemsControl Grid.Row="1"
              ItemsSource="{Binding FtpControlList, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
  <ItemsControl.ItemsPanel>
    <ItemsPanelTemplate>
      <WrapPanel Orientation="Horizontal"
                 IsItemsHost="True" />
    </ItemsPanelTemplate>
  </ItemsControl.ItemsPanel>
  <ItemsControl.ItemTemplate>
    <DataTemplate DataType="{x:Type my:BackUpControl}">
      <my:BackUpControl Margin="5"
                        Width="500" />
    </DataTemplate>
  </ItemsControl.ItemTemplate>
</ItemsControl> 
```

我的 UserControl 由 ViewModel 绑定。我的 MainWindow 也有一个 ViewModel。在 MainWindowViewModel 中，我有一个 OberservableCollection 依赖属性，其中包含我的 UserControlViewModel 列表。在 MainWindowViewModel 的构造函数中，我将一些 UserControlViewModels 添加到列表中。

```
 public MainWindowViewModel()
{
  FtpControlList = new ObservableCollection<BackUpControlViewModel>();
  FtpControlList.Add(new BackUpControlViewModel("View 1"));
  FtpControlList.Add(new BackUpControlViewModel("View 2"));
  FtpControlList.Add(new BackUpControlViewModel("View 3"));
}

public static readonly DependencyProperty FtpControlListProperty = DependencyProperty.Register("FtpControlList", typeof(ObservableCollection<BackUpControlViewModel>), typeof(MainWindowViewModel));
public ObservableCollection<BackUpControlViewModel> FtpControlList
{
  get { return (ObservableCollection<BackUpControlViewModel>)GetValue(FtpControlListProperty); }
  set { SetValue(FtpControlListProperty, value); }
} 
```

现在由于某种原因，它加载了 3 次空用户控件，而不是 FtpControlList 属性中的那些，属性设置为“视图 1、视图 2 和视图 3”。如何确保列表中的 UserControls 已加载而不是空的？

UserControlViewModel 的一部分：

```
 // part of the UserControl Viewmodel
    public BackUpControlViewModel()
{
}

public BackUpControlViewModel(string header)
{
  GroupBoxHeader = header;
}

    #region Dependency Properties
public static readonly DependencyProperty GroupBoxHeaderProperty = DependencyProperty.Register("GroupBoxHeader", typeof(string), typeof(BackUpControlViewModel), new UIPropertyMetadata("empty"));
public string GroupBoxHeader
{
  get { return (string)GetValue(GroupBoxHeaderProperty); }
  set { SetValue(GroupBoxHeaderProperty, value); }
}

public static readonly DependencyProperty FtpUrlProperty = DependencyProperty.Register("FtpUrl", typeof(string), typeof(BackUpControlViewModel), new UIPropertyMetadata("ftpurl"));
public string FtpUrl
{
  get { return (string)GetValue(FtpUrlProperty); }
  set { SetValue(FtpUrlProperty, value); }
}

public static readonly DependencyProperty FtpUserProperty = DependencyProperty.Register("FtpUser", typeof(string), typeof(BackUpControlViewModel), new UIPropertyMetadata("ftpUser"));
public string FtpUser
{
  get { return (string)GetValue(FtpUserProperty); }
  set { SetValue(FtpUserProperty, value); }
}
#endregion 
```

这可能是一些愚蠢的事情，但我似乎找不到它。MainWindow 和 UserControl 的数据上下文绑定到它的 Viewmodel。

编辑：BackupControl datacontext 设置为 BackupControlViewModel（回答 Rachel 的问题）

```
 public partial class BackUpControl : UserControl
  {
    public BackUpControl()
    {
      InitializeComponent();
      this.DataContext = new BackUpControlViewModel();
    }
  } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T19:18:14.277

您通过在调用后将其设置在您的构造函数中来覆盖`DataContext`您的`UserControl``UserControl``InitializeComponent();`

默认情况下，将为集合中的每个项目`ItemsControl`创建一个，并将其设置为. 最终结果将是三个新对象，这些对象的后面绑定到from`ItemTemplate``DataContext``ItemsSource``my:BackUpControl``DataContext``BackUpControlViewModel``ItemsControl.ItemsSource`

`this.DataContext = new BackUpControlViewModel();`从您的 UserControl 的构造函数中删除该行，它应该像您期望的那样工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:15:09.760

问题可能是您的视图模型具有依赖属性。通常你只会让你的视图模型实现`INotifyPropertyChanged`并且属性是常规的（不是依赖属性）。除非你有特定的要求让他们成为 DP，否则我会把他们换掉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T16:46:12.640

改变 ：

```
<DataTemplate DataType="{x:Type my:BackUpControl}"> 
```

到：

```
<DataTemplate DataType="{x:Type my:BackUpControlViewModel}"> 
```

# scala - 将可变对象设置为“val”是什么意思？

> ID：13843828
> 
> 赞同：4
> 
> 时间：2012-12-12T16:08:52.307
> 
> 标签：scala

我正在将一个 java Pojo 实例变量设置为“val”并在初始化后更改其状态。这会导致任何问题，因为它真的是一个 'var' 吗？

```
val st = new Pojo();
st.setInt(0); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T16:10:31.010

它仍然是一个`val`. *引用*不能更改，但被引用的对象可以使其内部状态发生变化。

`val`意味着你不能做这个重新分配：

```
val st = new Pojo()
st = new Pojo()      // invalid! 
```

为此，您需要一个`var`：

```
var st = new Pojo()
st = new Pojo()      // ok 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T16:11:21.860

它不是一个`var`. 再试`st=new Pojo()`一次，你会发现你不能为 st 重新分配一个新值（编译器会抱怨`error: reassignment to val`）。

`val`不授予“深度”不变性，只是初始设置的值（只是对可以可变的对象的引用）不能更改为新引用。

# android - 在更改屏幕旋转布局时保持 webview

> ID：13843833
> 
> 赞同：1
> 
> 时间：2012-12-12T16:09:23.807
> 
> 标签：android, android-layout, webview, orientation

我的应用程序有两种不同的纵向和横向模式布局，它们都封装了 webview 和一些按钮。按钮位于纵向底部，横向位于左侧，因此 webview 中提供了更多阅读空间。

问题是，在屏幕旋转时重新创建了活动，并且 webview 加载了第一页，这不是想要的行为。

我搜索并发现在活动标签中使用 android:configChanges="orientation" 可以防止重新创建活动。但问题是它也阻止了布局在活动创建中发生的变化。

我希望我的程序在 2.2 中工作，这是最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:32:03.833

我测试了片段，但是处理片段会使事情变得更加复杂，片段本身需要保存和恢复，这在具有 javascript 状态的 web 视图中可能不起作用，所以我进行了更多搜索，并在某处找到了一篇不错的文章，并进行了一些修改。我建议的解决方案：

首先，将 android:configChanges="orientation|screenSize|keyboard|keyboardHidden" 添加到清单中，以便应用处理配置更改而不是 android。

为 lnadscape 和 Portrait 模式制作两种不同的布局，并将它们放在相应的布局文件夹中。在这两种布局中而不是 webview 中放置一个 LinerLayout，它充当 webview 的占位符。

在代码中定义这样的 initUI 方法，并将与 UI 初始化相关的所有内容都放在此方法中：

```
public void initui()
{
    setContentView(R.layout.main);
    if (wv == null) wv = new WebView(this);
    ((LinearLayout)findViewById(R.id.webviewplace)).addView(wv);
    findViewById(R.id.home).setOnClickListener(this);
} 
```

如果 webview 不存在，它将被创建并在 setContentView(R.layout.main) 之后将其添加到布局中。其他 UI 定制随后出现。

在 onConfigurationChanged 中：

```
@Override
public void onConfigurationChanged(Configuration newConfig)
{
    ((LinearLayout)findViewById(R.id.webviewplace)).removeAllViews();
    super.onConfigurationChanged(newConfig);
    initUI();
} 
```

在 onConfigChange 首先，webview 从旧占位符中删除，并且将调用 initui 将其添加回新布局。

并在 oncreate 调用 initui 中，因此将首次初始化 ui。

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    initUI()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:19:14.593

您不能将最后加载的 URL 保存在 webview 中`onSaveInstanceState(Bundle outState)`，然后确保`onRestoreInstanceState(Bundle savedInstanceState)`使用重新加载它`myWebview.loadUrl(restoredUrl)`吗？

*编辑*我知道如果您显示的网页需要保留状态，这可能不起作用。但如果不是，它应该是您问题的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-07T13:56:02.907

从这个文档[https://developer.android.com/guide/topics/resources/runtime-changes.html#HandlingTheChange](https://developer.android.com/guide/topics/resources/runtime-changes.html#HandlingTheChange) 我刚刚用 android:configchanges 编辑了清单，所以它对我来说很好。

```
<activity android:name=".Webhtml"
android:configChanges="orientation|screenSize"/> 
```

# android - 发出调用活动的意图以及参数

> ID：13843835
> 
> 赞同：1
> 
> 时间：2012-12-12T16:09:24.747
> 
> 标签：android

我正在尝试通过 putExtra 函数将参数字符串从服务发送到活动，我有以下代码`Server.java`：

```
package com.winacro.andRHOME;

import java.util.Calendar;

import android.app.Activity;
import android.app.AlarmManager;
import android.app.PendingIntent;
import android.app.Service;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.content.Context;
import android.content.Intent;
import android.os.Binder;
import android.os.Bundle;
import android.os.Handler;
import android.os.IBinder;
import android.os.Message;
import android.util.Log;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.Window;
import android.view.View.OnClickListener;
import android.view.inputmethod.EditorInfo;
import android.widget.ArrayAdapter;
import android.widget.TextView;
import android.widget.Toast;
import android.widget.ToggleButton;

public class Server extends Service{

    IBinder mBinder = new LocalBinder();

        @Override
    public IBinder onBind(Intent intent) {
        return mBinder;
    }

    public class LocalBinder extends Binder {
        public Server getServerInstance() {
            return Server.this;
        }
    }

    public void switchSpeaker(int hr, int min){

        Toast.makeText(Server.this, hr +" , " +min, Toast.LENGTH_LONG).show();

        String sendMessage = "1";

       /* Intent myIntent = new Intent(Server.this, andRHOME.class);
        myIntent.putExtra("sendMessage","1");
        startActivity(myIntent);
        PendingIntent pi = PendingIntent.getService(Server.this, 0, myIntent, 0);
        AlarmManager almmgr = (AlarmManager) getSystemService(ALARM_SERVICE);
        Calendar cldr = Calendar.getInstance();
        int min1 = cldr.get(Calendar.MINUTE);
        cldr.setTimeInMillis(System.currentTimeMillis());
        cldr.add(Calendar.SECOND, 30);
        almmgr.set(AlarmManager.RTC_WAKEUP, cldr.getTimeInMillis(), pi);*/
    }

} 
```

这是`sendMessage()`我也想访问或传递字符串变量的 Activity 的代码，但我的应用程序崩溃了，请在这里提供帮助！

```
package com.winacro.andRHOME;

import android.app.Activity;
import android.app.Application;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.content.BroadcastReceiver;
import android.content.Intent;
import android.content.res.Configuration;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.util.Log;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.Window;
import android.view.View.OnClickListener;
import android.view.inputmethod.EditorInfo;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;
import android.widget.ToggleButton;

/**
 * This is the main Activity that displays the current chat session.
 */
public class andRHOME extends Activity {
    // Debugging
    private static final String TAG = "andRHOME";
    private static final boolean D = true;

    // Message types sent from the BluetoothChatService Handler
    public static final int MESSAGE_STATE_CHANGE = 1;
    public static final int MESSAGE_READ = 2;
    public static final int MESSAGE_WRITE = 3;
    public static final int MESSAGE_DEVICE_NAME = 4;
    public static final int MESSAGE_TOAST = 5;

    // Key names received from the BluetoothChatService Handler
    public static final String DEVICE_NAME = "device_name";
    public static final String TOAST = "toast";

    // Intent request codes
    private static final int REQUEST_CONNECT_DEVICE_SECURE = 1;
    private static final int REQUEST_CONNECT_DEVICE_INSECURE = 2;
    private static final int REQUEST_ENABLE_BT = 3;
     String inp;

    // Layout Views
    private TextView mTitle;
    //private ListView mConversationView;
    //private EditText mOutEditText;
    //private Button mSendButton;
    private ToggleButton TB1;
    private ToggleButton TB2;
    private ToggleButton TB3;
    private ToggleButton TB4;
    // Name of the connected device
    private String mConnectedDeviceName = null;
    // Array adapter for the conversation thread
    private ArrayAdapter<String> mConversationArrayAdapter;
    // String buffer for outgoing messages

    public StringBuffer mOutStringBuffer;
    // Local Bluetooth adapter
    private BluetoothAdapter mBluetoothAdapter = null;
    // Member object for the chat services
    public BluetoothChatService mChatService = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if(D) Log.e(TAG, "+++ ON CREATE +++");

        // Set up the window layout
        requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
        setContentView(R.layout.main);
        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.custom_title);
        // Set up the custom title
        mTitle = (TextView) findViewById(R.id.title_left_text);
        mTitle.setText(R.string.app_name);
        mTitle = (TextView) findViewById(R.id.title_right_text);

        // Get local Bluetooth adapter
        mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
        // If the adapter is null, then Bluetooth is not supported
        if (mBluetoothAdapter == null) {
            Toast.makeText(this, "Bluetooth is not available", Toast.LENGTH_LONG).show();
            finish();
            return;
        }
        Bundle bundle = getIntent().getExtras();
        inp = bundle.getString("sendMessage");
        sendMessage(inp); 
    }

    @Override
    public void onStart() {
        super.onStart();
        if(D) Log.e(TAG, "++ ON START ++");

        // If BT is not on, request that it be enabled.
        // setupChat() will then be called during onActivityResult
        if (!mBluetoothAdapter.isEnabled()) {
            Intent enableIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
            startActivityForResult(enableIntent, REQUEST_ENABLE_BT);
        // Otherwise, setup the chat session
        } else {
            if (mChatService == null) setupChat();
        }
    }

    @Override
    public synchronized void onResume() {
        super.onResume();
        if(D) Log.e(TAG, "+ ON RESUME +");

        // Performing this check in onResume() covers the case in which BT was
        // not enabled during onStart(), so we were paused to enable it...
        // onResume() will be called when ACTION_REQUEST_ENABLE activity returns.
        if (mChatService != null) {
            // Only if the state is STATE_NONE, do we know that we haven't started already
            if (mChatService.getState() == BluetoothChatService.STATE_NONE) {
              // Start the Bluetooth chat services
              mChatService.start();
            }
        }
    }

    private void setupChat() {
        Log.d(TAG, "setupChat()");

        // Initialize the array adapter for the conversation thread
        mConversationArrayAdapter = new ArrayAdapter<String>(this, R.layout.message);
        //mConversationView = (ListView) findViewById(R.id.in);
       // mConversationView.setAdapter(mConversationArrayAdapter);

        // Initialize the compose field with a listener for the return key
        //mOutEditText = (EditText) findViewById(R.id.edit_text_out);
       // mOutEditText.setOnEditorActionListener(mWriteListener);

        // Initialize the send button with a listener that for click events
        //mSendButton = (Button) findViewById(R.id.button_send);
        /*mSendButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                // Send a message using content of the edit text widget
                //TextView view = (TextView) findViewById(R.id.edit_text_out);
                String message = "0";
                sendMessage(message);
            }
        });*/

        TB1 = (ToggleButton) findViewById(R.id.toggleButton1);
        TB1.setOnClickListener(new OnClickListener() {
            public void onClick(View v){
                if (TB1.isChecked()){
                    String message = "1";
                    sendMessage(message);
                } else if (!TB1.isChecked()){
                    String message = "6";
                    sendMessage(message);
                }
            }
        });
        TB2 = (ToggleButton) findViewById(R.id.ToggleButton01);
        TB2.setOnClickListener(new OnClickListener() {
            public void onClick(View v){
                if (TB2.isChecked()){
                    String message = "0";
                    sendMessage(message);
                } else if (!TB2.isChecked()){
                    String message = "5";
                    sendMessage(message);
                }
            }
        });
        TB3 = (ToggleButton) findViewById(R.id.ToggleButton02);
        TB3.setOnClickListener(new OnClickListener() {
            public void onClick(View v){
                if (TB3.isChecked()){
                    String message = "2";
                    sendMessage(message);
                } else if (!TB3.isChecked()){
                    String message = "7";
                    sendMessage(message);
                }
            }
        });
        TB4 = (ToggleButton) findViewById(R.id.ToggleButton03);
        TB4.setOnClickListener(new OnClickListener() {
            public void onClick(View v){
                if (TB4.isChecked()){
                    String message = "3";
                    sendMessage(message);
                } else if (!TB4.isChecked()){
                    String message = "8";
                    sendMessage(message);
                }
            }
        });
        // Initialize the BluetoothChatService to perform bluetooth connections
        mChatService = new BluetoothChatService(this, mHandler);

        // Initialize the buffer for outgoing messages
        mOutStringBuffer = new StringBuffer("");
    }

    @Override
    public synchronized void onPause() {
        super.onPause();
        if(D) Log.e(TAG, "- ON PAUSE -");
    }

    @Override
    public void onStop() {
        super.onStop();
        if(D) Log.e(TAG, "-- ON STOP --");
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        // Stop the Bluetooth chat services
        if (mChatService != null) mChatService.stop();
        if(D) Log.e(TAG, "--- ON DESTROY ---");
    }

    private void ensureDiscoverable() {
        if(D) Log.d(TAG, "ensure discoverable");
        if (mBluetoothAdapter.getScanMode() !=
            BluetoothAdapter.SCAN_MODE_CONNECTABLE_DISCOVERABLE) {
            Intent discoverableIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);
            discoverableIntent.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, 300);
            startActivity(discoverableIntent);
        }
    }

    /**
     * Sends a message.
     * @param message  A string of text to send.
     */
    private void sendMessage(String message) {
        // Check that we're actually connected before trying anything
        if (mChatService.getState() != BluetoothChatService.STATE_CONNECTED) {
            Toast.makeText(this, R.string.not_connected, Toast.LENGTH_SHORT).show();
            return;
        }

        // Check that there's actually something to send
        if (message.length() > 0) {
            // Get the message bytes and tell the BluetoothChatService to write
            byte[] send = message.getBytes();
            mChatService.write(send);

            // Reset out string buffer to zero and clear the edit text field
            mOutStringBuffer.setLength(0);
            //mOutEditText.setText(mOutStringBuffer);
        }
    }

    // The action listener for the EditText widget, to listen for the return key
    private TextView.OnEditorActionListener mWriteListener =
        new TextView.OnEditorActionListener() {
        public boolean onEditorAction(TextView view, int actionId, KeyEvent event) {
            // If the action is a key-up event on the return key, send the message
            if (actionId == EditorInfo.IME_NULL && event.getAction() == KeyEvent.ACTION_UP) {
                String message = view.getText().toString();
                sendMessage(message);
            }
            if(D) Log.i(TAG, "END onEditorAction");
            return true;
        }
    };

    // The Handler that gets information back from the BluetoothChatService
    private final Handler mHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            switch (msg.what) {
            case MESSAGE_STATE_CHANGE:
                if(D) Log.i(TAG, "MESSAGE_STATE_CHANGE: " + msg.arg1);
                switch (msg.arg1) {
                case BluetoothChatService.STATE_CONNECTED:
                    mTitle.setText(R.string.title_connected_to);
                    mTitle.append(mConnectedDeviceName);
                    mConversationArrayAdapter.clear();
                    break;
                case BluetoothChatService.STATE_CONNECTING:
                    mTitle.setText(R.string.title_connecting);
                    break;
                case BluetoothChatService.STATE_LISTEN:
                case BluetoothChatService.STATE_NONE:
                    mTitle.setText(R.string.title_not_connected);
                    break;
                }
                break;
            case MESSAGE_WRITE:
                byte[] writeBuf = (byte[]) msg.obj;
                // construct a string from the buffer
                String writeMessage = new String(writeBuf);
                mConversationArrayAdapter.add("Me:  " + writeMessage);
                break;
            case MESSAGE_READ:
                byte[] readBuf = (byte[]) msg.obj;
                // construct a string from the valid bytes in the buffer
                String readMessage = new String(readBuf, 0, msg.arg1);
                mConversationArrayAdapter.add(mConnectedDeviceName+":  " + readMessage);
                break;
            case MESSAGE_DEVICE_NAME:
                // save the connected device's name
                mConnectedDeviceName = msg.getData().getString(DEVICE_NAME);
                Toast.makeText(getApplicationContext(), "Connected to "
                               + mConnectedDeviceName, Toast.LENGTH_SHORT).show();
                break;
            case MESSAGE_TOAST:
                Toast.makeText(getApplicationContext(), msg.getData().getString(TOAST),
                               Toast.LENGTH_SHORT).show();
                break;
            }
        }
    };

    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if(D) Log.d(TAG, "onActivityResult " + resultCode);
        switch (requestCode) {
        case REQUEST_CONNECT_DEVICE_SECURE:
            // When DeviceListActivity returns with a device to connect
            if (resultCode == Activity.RESULT_OK) {
                connectDevice(data, true);
            }
            break;
        case REQUEST_CONNECT_DEVICE_INSECURE:
            // When DeviceListActivity returns with a device to connect
            if (resultCode == Activity.RESULT_OK) {
                connectDevice(data, false);
            }
            break;
        case REQUEST_ENABLE_BT:
            // When the request to enable Bluetooth returns
            if (resultCode == Activity.RESULT_OK) {
                // Bluetooth is now enabled, so set up a chat session
                setupChat();
            } else {
                // User did not enable Bluetooth or an error occured
                Log.d(TAG, "BT not enabled");
                Toast.makeText(this, R.string.bt_not_enabled_leaving, Toast.LENGTH_SHORT).show();
                finish();
            }
        }
    }

    private void connectDevice(Intent data, boolean secure) {
        // Get the device MAC address
        String address = data.getExtras()
            .getString(DeviceListActivity.EXTRA_DEVICE_ADDRESS);
        // Get the BLuetoothDevice object
        BluetoothDevice device = mBluetoothAdapter.getRemoteDevice(address);
        // Attempt to connect to the device
        mChatService.connect(device, secure);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.option_menu, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        Intent serverIntent = null;
        switch (item.getItemId()) {
        case R.id.scan:
            // Launch the DeviceListActivity to see devices and do scan
            serverIntent = new Intent(this, DeviceListActivity.class);
            startActivityForResult(serverIntent, REQUEST_CONNECT_DEVICE_SECURE);
            return true;
        case R.id.timer:
            // Launch the DeviceListActivity to see devices and do scan
            Intent myIntent = new Intent("com.winacro.andRHOME.Timer");
            startActivity(myIntent);
            return true;
        /*case R.id.discoverable:
            // Ensure this device is discoverable by others
            ensureDiscoverable();
            return true;*/
        }
        return false;
    }
} 
```

# ruby-on-rails - 如何测试嵌套资源

> ID：13843840
> 
> 赞同：0
> 
> 时间：2012-12-12T16:09:40.543
> 
> 标签：ruby-on-rails, rspec

我有一个有一些版本的游戏模型（has_many）。我选择使用嵌套资源来表达这一点。

```
resources :games do
  resources :releases, only: [:new, :create, :destroy]
 end 
```

我正在尝试使用 RSpec 来测试我的发布控制器操作。这是我的测试文件的一部分。

```
 describe "GET new" do
  it "assigns a new release as @release" do
    get :new, {}, valid_session
    assigns(:release).should be_a_new(Release)
  end
 end 
```

当我没有设置 game_id 参数时，我有一个 No Routes Match 错误。当我添加时，`:game_id => 1`我有一个 RecordNotFound 错误。

所以我的问题是如何设置游戏对象来表达嵌套资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:09:58.453

我对 rspec 也很陌生——要温柔 :) 一旦你开始正确地测试你的应用程序，你的生活将会更快、更好、压力更小。您的应用程序将受益更多，您的客户也将受益。

大约一个月后，我直到需要设置页面样式时才使用浏览器。更快更高效。

就个人而言，我开始阅读本教程：

*   [http://everydayrails.com/2012/04/07/testing-series-rspec-controllers.html](http://everydayrails.com/2012/04/07/testing-series-rspec-controllers.html)

而且，与以往一样，以下 RailsCasts 提供了巨大帮助：

*   [http://asciicasts.com/episodes/275-how-i-test](http://asciicasts.com/episodes/275-how-i-test)
*   [http://asciicasts.com/episodes/158-factories-not-fixtures](http://asciicasts.com/episodes/158-factories-not-fixtures)

在你的情况下，尝试这样的事情（没有 FactoryGirl）。

```
describe "GET new" do
 it "assigns a new release as @release" do
   game = Game.create!( << INSERT VALID ATTRIBUTE >> )
   get :new, {:game_id => game.id}, valid_session
   assigns(:release).should be_a_new(Release)
 end
end 
```

我认为是对的，没有测试过自己。还有其他一些方法可以做到这一点，包括将游戏创建方法设置为前置过滤器：

```
 before(:each) do
   @game = Game.create!( << INSERT VALID ATTRIBUTE >> )
 end 
```

或者，就像我说的，使用 Factory Girl 为您构建模型。

这是我们的做法。

# javascript - 如何使用 jquery 或任何 javascript 代码从另一个 Web 服务器获取我的页面上的 div？

> ID：13843842
> 
> 赞同：1
> 
> 时间：2012-12-12T16:09:41.463
> 
> 标签：javascript, jquery, html, webserver

我想将另一个 Web 服务器中的特定 div 添加到我的网页。我如何使用 jquery 或任何其他 javascript 代码来做到这一点？

我是 javascript 的真正初学者，更多的解释可能会有所帮助。

# c++ - OS X 'heap' 命令行实用程序如何收集其信息？

> ID：13843844
> 
> 赞同：4
> 
> 时间：2012-12-12T16:09:50.370
> 
> 标签：c++, macos, memory, malloc, heap-memory

OS X 'heap' 命令行实用程序显然可以枚举不同的 malloc 区域和任何正在运行的进程的各个 malloc 块。它不需要链接任何特殊的调试库或为目标进程设置任何调试堆环境变量。

它使用哪种底层机制来做到这一点？我能找到的所有 malloc 调试 API 都需要在进程内部设置挂钩、链接的特殊调试库或在启动进程之前设置调试环境变量。据我所知，该实用程序的源代码不可用，并且在 Google 和 Apple.com 上进行的多次搜索也没有发现任何有用的信息。

我最感兴趣的是获得实际的 malloc'ed 内存总和，因为进程的常驻大小通常会比应用程序代码实际请求的内存大得多。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:33:07.070

他们使用在`/usr/include/malloc/malloc.h`. 每个 malloc 区域都包含一个指向`malloc_introspection_t`结构的指针，该结构公开了一个`enumerator`函数，该函数可用于发现 malloc 区域保留的内存区域，以及这些区域内所有单独分配的详细信息。

# button - 查找从父级别单击 iFrame 中的按钮的时间

> ID：13843845
> 
> 赞同：1
> 
> 时间：2012-12-12T16:09:53.320
> 
> 标签：button, iframe, disqus, click

是否可以在不向 iframe 页面添加任何代码的情况下在 iframe 中单击按钮时从父窗口中分辨出来？基本上，我们正在将 Badgeville 和 Disqus 集成到我们的网站中，并且我们希望在用户使用 Disqus 评论帖子时奖励 Badgeville 上的用户积分，因此我们无法访问我们包含的 disqus 页面代码。不太清楚如何解决这个问题。

编辑

原来 Disqus 有处理这个问题的代码。在包含主 disqus 代码之前，此代码必须包含在主文件中。

```
 <script>
    function disqus_config() {
        this.callbacks.onNewComment = [function() { alert("New Comment"); }];
    }
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T01:08:18.037

使用回调的问题是很难弄清楚是谁发表了评论。您可能会考虑一种不同的方法，并使用 Disqus API 轮询您网站上的最新评论以奖励这些积分。

您可以按计划轮询“forums/listPosts”或“posts/List”端点并匹配用户电子邮件地址，以便您知道将积分分配给谁。文档可以在这里找到：http: [//disqus.com/api/docs/](http://disqus.com/api/docs/)

可以在此处找到一些示例（主要在 PHP 中）：[https ://github.com/disqus/DISQUS-API-Recipes](https://github.com/disqus/DISQUS-API-Recipes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:12:16.117

不添加任何不可能的代码。因为在 IFRAME 中添加了限制。

# php - 未定义的属性： C:\.....\components\.....\views\...\tmpl\default.php中的 View::$title

> ID：13843849
> 
> 赞同：-1
> 
> 时间：2012-12-12T16:10:10.113
> 
> 标签：php, joomla, joomla2.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T19:49:24.383

由于消息表明它是一个未定义的变量，在运行 xdebug 后我注意到它没有被设置，这就是问题所在。因此，检查是否设置了变量，然后才使用该变量会有所帮助。

# c# - 在 Winrt 和 MVVM 模式中显示来自 Uri 的图像

> ID：13843852
> 
> 赞同：1
> 
> 时间：2012-12-12T16:10:15.020
> 
> 标签：c#, mvvm, windows-8, local-storage

因此，我创建了一个 Windows 应用商店应用程序（又名 Windows 8 应用程序/以前称为 Metro 应用程序）并导入了一个包含图像的 zip 存档（导入工作良好）。

当 zip 被提取（在它自己的文件夹中）时，我将代表文件夹的对象添加到 ObservableCollection 中。

此 ObservableCollection 用作 GridView 的 DataContext，文件夹的名称已正确显示，但文件夹的第一个图像不是... <= 所以我的问题。

提取完成后，我使用静态方法创建对象

```
public class ZipFolder
    {

        public string Title
        {
            get { return _title; }
            set { _title = value;}
        }
        public int CurrentPage
        {
            get { return _currentPage; }
            set { _currentPage = value;}
        }
        public Uri PathCover
        {
            get { return _pathCover;  }
            set { _pathCover = value;}
        }

        private string _title ;
        private int _currentPage;
        private Uri _pathCover;

    } 
```

```
public static async Task<ZipFolderObject> CreateComic(StorageFolder folder)
{
    ZipFolderObject o = new ZipFolderObject();
    o.Title = folder.DisplayName;

    IReadOnlyList<StorageFile> asyncOperation = await folder.GetFilesAsync();
    StorageFile cover = asyncOperation[0];

    o.PathCover = new Uri("ms-appdata:///local/" + folder.Name + "/" + cover.Name);

    return o;
} 
```

绑定看起来像这样：

```
<DataTemplate x:Key="zipFolderItemTemplate">
        <StackPanel Width="165" Height="250">
            <Grid Height="215">
                <Border Background="Bisque" Width="{Binding ActualWidth, ElementName=image}">
                    <!--<Image x:Name="image" VerticalAlignment="Top" HorizontalAlignment="Center" Source="{Binding Cover}" />-->
                    <Image Stretch="Uniform" x:Name="image" VerticalAlignment="Top" HorizontalAlignment="Center">
                        <Image.Source>
                            <BitmapImage   UriSource="{Binding PathCover}" />
                        </Image.Source>
                    </Image>
                </Border>
                <Polygon Points="0,0 0,50, 50,0" Stroke="Red" FillRed" RenderTransformOrigin="0.5,0.5" Visibility="{Binding CurrentPage, Converter={StaticResource BookmarkVisibilityConverter}}" Width="{Binding ActualWidth, ElementName=image}" />
            </Grid>
            <TextBlock HorizontalAlignment="Center" TextWrapping="Wrap" VerticalAlignment="Top" Text="{Binding Title}" Margin="0,10,0,0" Foreground="Black" />
        </StackPanel>
    </DataTemplate> 
```

因此，如果有人对我的问题有提示，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:32:50.303

您只能在图像源上使用目录/文件名.ext，如果提取图像，则为子目录。连接两个值并设置为 PathCover 属性：

```
 folder.Name + "/" + cover.Name 
```

并在本节编辑数据模板：

```
<Image Stretch="Uniform" x:Name="image" VerticalAlignment="Top" HorizontalAlignment="Center" Source={Binding PathCover}/> 
```

问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-13T10:55:12.913

只需使用 String 而不是 Uri。

在 mainpage.xaml

```
 <Image Source="{Binding VehicleIcon}" Height="54" Width="54"/> 
```

在 viewmodel.cs 文件中

```
public String VehicleIcon {get;set; }
...
VehicleIcon = "ms-appx:///Assets/logo.png"; 
```

# c# - OutOfMemoryException 试图从 DataSet 写入 Xml

> ID：13843853
> 
> 赞同：1
> 
> 时间：2012-12-12T16:10:20.657
> 
> 标签：c#, .net, xml, dataset, out-of-memory

在 C# 中，我试图从大数据集中获取 xml 字符串：

```
private string GetXmlFromDecomposedPortfolio(string dataSetName, DecomposedPortfolio ptf)
{
     StringWriter writer = new StringWriter();

     System.Data.DataSet ds = new System.Data.DataSet(dataSetName);

     ds.Tables.Add(ptf.Security.Copy());   
     ds.WriteXml((TextWriter)writer, XmlWriteMode.IgnoreSchema);

     return writer.ToString();
} 
```

但我有一个例外：

```
System.OutOfMemoryException: Exception of type 'System.OutOfMemoryException' was thrown.     
    at System.String.GetStringForStringBuilder(String value, Int32 startIndex, Int32 length, Int32 capacity)    
    at System.Text.StringBuilder.GetNewString(String currentString, Int32 requiredLength)    
    at System.Text.StringBuilder.Append(Char value)     at System.IO.StringWriter.Write(Char value)  
    at System.Xml.XmlTextWriter.WriteStartElement(String prefix, String localName, String ns)   
    at System.Data.DataTextWriter.WriteStartElement(String prefix, String localName, String ns)  
    at System.Data.XmlDataTreeWriter.XmlDataRowWriter(DataRow row, String encodedTableName)  
    at System.Data.XmlDataTreeWriter.Save(XmlWriter xw, Boolean writeSchema)    
    at System.Data.DataSet.WriteXml(XmlWriter writer, XmlWriteMode mode)   
    at System.Data.DataSet.WriteXml(TextWriter writer, XmlWriteMode mode)    
    at Decompose.Library.Render.GetXmlFromDecomposedPortfolio(String dataSetName, DecomposedPortfolio ptf)   
    at Decompose.Library.Render.SavePE()  
    at Decompose.Library.WorkFlow.ProcessBatch() 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:17:42.750

首先，您创建巨大的（显然）xml 数据

`ds.WriteXml((TextWriter)writer, XmlWriteMode.IgnoreSchema);`

将其克隆到`string`对象中后`writer.ToString();`，您需要的内存几乎翻了一番。

您*可以*做的是创建`XML`row-per-row，因此创建 kind of `XmlDataSetRowEnumerator`，它检索`XML-per-row`和`yield return`s 结果`XML`。

# apache - 没有 mod_rewrite 的 htaccess 块

> ID：13843857
> 
> 赞同：-1
> 
> 时间：2012-12-12T16:10:32.167
> 
> 标签：apache, .htaccess, mod-rewrite, block

.htaccess 的用途不仅仅是重写，例如阻塞。

问题是：为什么没有激活 mod_rewrite 就无法读取 htaccess（我需要阻止一个目录，我不想激活 mod_rewrite）？我如何让它发挥作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:16:37.887

`.htaccess`被读取不依赖于 mod_rewrite 处于活动状态（请参阅Apache 文档中的[.htaccess 文件](http://httpd.apache.org/docs/2.2/howto/htaccess.html)）。控制它的主要选项是[AllowOverride](http://httpd.apache.org/docs/2.2/mod/core.html#allowoverride)，指定可以做什么，以及[AccessFileName](http://httpd.apache.org/docs/2.2/mod/core.html#accessfilename)，它可以覆盖默认文件名。您的 mod_rewrite 配置是否恰好包含`AllowOverride`指令？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:18:09.043

除非您正在执行 url 重写，否则您不必启用 mod_rewrite。在您的 httpd.conf 文件中，您有一个名为 AccessFileName 的指令，默认为 .htaccess。此外，重要的组件是让您的 .htaccess 文件能够修改某些组件（您的目录）。您将为该目录设置一个指令，其中包含适当的 AllowOverride 键。你能稍微澄清一下你的问题吗？也许将您的 .htaccess 文件的内容放在您的帖子中，以便我们可以看到您要做什么？

```
<Directory "[important directory]">
    Options Indexes FollowSymLinks
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory> 
```

# css - LESS：您可以将 CSS 选择器与媒体查询分组吗？

> ID：13843858
> 
> 赞同：4
> 
> 时间：2012-12-12T16:10:31.087
> 
> 标签：css, css-selectors, less, media-queries

我真的很高兴发现您可以创建一个媒体查询变量，您可以轻松地重用它并使您的代码更具可读性。

```
@tablet: ~"(min-width: 768px) and (max-width: 980px)";
@media @tablet { ... } 
```

我想知道是否可以使用选择器对媒体查询进行分组。它似乎不像我实现它的方式那样工作，但我想我会问它是否有可能。

```
@tablet: ~"(min-width: 768px) and (max-width: 980px)";
body {
  aside { ... }

  &.homepage,
  @media @tablet {
    aside { ... }
  }
} 
```

我知道媒体查询与普通选择器不同，因为您必须在媒体查询中定义您的选择器，但是有没有一些巫毒的 LESS 方法来完成这样的分组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T16:30:12.683

我不是 100% 确定您要获得的输出，但是这个 LESS 只定义了`red`一次颜色，并将其应用于两者：

```
@tablet: ~"(min-width: 768px) and (max-width: 980px)";
body {
  aside { color: blue }

  &.homepage {
    aside { color: red }
  }

  @media @tablet {
    .homepage;
  }
} 
```

产生这个 CSS：

```
body aside {
  color: #0000ff;
}
body.homepage aside {
  color: #ff0000;
}
@media (min-width: 768px) and (max-width: 980px) {
  body aside {
    color: #ff0000;
  }
} 
```

# ruby-on-rails - 使用 bootswatch-rails 动态更改样式

> ID：13843861
> 
> 赞同：2
> 
> 时间：2012-12-12T16:10:44.230
> 
> 标签：ruby-on-rails, ruby, twitter-bootstrap, bootswatch

我想用 bootswatch-rails 改变我的风格。

首先，我将安装 bootswatch-rails gem 并将文件的扩展名更改为 scss.erb。那么，我会在文件 scss.erb 中写：

```
<% theme = Themes.find(1) %> 
```

直到这里一切正常，但是当我导航时，风格会突然自行改变。我认为这可能会发生，因为资产存储在内存或缓存中。所以，我不知道该怎么做，或者即使有可能完成它。

# android - 为什么 ViewPagerIndicator 每次都计算所有标题

> ID：13843862
> 
> 赞同：1
> 
> 时间：2012-12-12T16:10:46.567
> 
> 标签：android, android-viewpager, viewpagerindicator

我正在使用 ViewPager 和 ViewPagerIndicator [(here)](https://github.com/JakeWharton/Android-ViewPagerIndicator)。`getPageTitle()`当我调试时，我看到每次滚动 Viewpager 时都会调用 ViewPagerIndicator来获取所有页面的标题。现在我有超过 1000 页。因此，当我滚动时，标题不再流畅。你以前遇到过这个问题吗？请与我分享解决方案。欢迎任何推荐。

非常感谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-24T17:53:04.770

我有同样的问题，我有`ListView`一个`ArrayAdapter`. 每次我滚动回页面时，列表都会自行重新创建并扩展。我通过简单`boolean`的检查天气来解决它，以检查列表是否包含项目，但这不是最佳解决方案。我认为`OnPageChangeListener`android.support.v4.view.ViewPager 包中有一些 ViewPagerIndicator 没有解决的问题。

# php - 将文件从 PHP 保存到数据库，在 VB.net 中从数据库中查看

> ID：13843863
> 
> 赞同：0
> 
> 时间：2012-12-12T16:10:48.033
> 
> 标签：php, sql, vb.net

首先，我想说是的，我确实知道使用文件系统执行此操作并将文件名/位置保存在数据库中是更好的方法，我可能会在最终版本中这样做。

这主要是一个实验/概念证明/学习机会。

我有一个**有效**的 PHP 上传表单。它获取图像并将其转换为 base64 字符串并将其放入数据库表中的图像 blob 中。

```
<?php
if ($_SERVER['REQUEST_METHOD'] == 'POST')
{
    // cleaning title field
    $title = trim(sql_safe($_POST['title']));

    if ($title == '') // if title is not set
        $title = '(empty title)';// use (empty title) string

    if ($_POST['password'] != $password)  // cheking passwors
        $msg = 'Error: wrong upload password';
    else
    {
        if (isset($_FILES['photo']))
        {
            @list(, , $imtype, ) = getimagesize($_FILES['photo']['tmp_name']);
            // Get image type.
            // We use @ to omit errors

            if ($imtype == 3) // cheking image type
                $ext="png";   // to use it later in HTTP headers
            elseif ($imtype == 2)
                $ext="jpeg";
            elseif ($imtype == 1)
                $ext="gif";
            else
                $msg = 'Error: unknown file format';

            if (!isset($msg)) // If there was no error
            {
            //$file = File Image yang ingin di encode 
            //Filetype: JPEG,PNG,GIF
            $base64 = "";
            $file = $_FILES['photo']['tmp_name'];
            if($fp = fopen($file,"rb", 0))
            {
                $gambar = fread($fp,filesize($file));
                fclose($fp);
                $base64 = chunk_split(base64_encode($gambar));
            }     
                // Preparing data to be used in query
            $q = "INSERT INTO tblCompanyImg (CompanyID, ImgNum, ImgExt, ImgName, ImgImg) Values (1, 1, '$ext', '$title', '$base64')";
                $database->query($q);

                $msg = "Success: image uploaded:";
            }
        }
        elseif (isset($_GET['title']))      // isset(..title) needed
            $msg = 'Error: file not loaded';// to make sure we've using
                                            // upload form, not form
                                            // for deletion
    }
}
?> 
```

而且我知道它正在正确保存它，因为我可以像这样查看图像：

```
<?php
    while($row = $database->fetch_array($result))
    {
        $CompanyImgID = $row["CompanyImgID"];
        $CompanyID = $row["CompanyID"];
        $ImgName = $row["ImgName"];
        // outputing list
        echo "<img src='data:image/jpeg;base64," . $row['ImgImg'] . "' />"; 
    }
?> 
```

接下来我想做的是在 Visual Basic 程序中查看上传的图像。

我试过这个：

```
 Dim sSql As String = "Select * from tblCompanyImg Where CompanyImgID = 2"
    Dim rSelect As New ADODB.Recordset
    Dim img As Image
    Dim imageBytes As Byte()
    Dim ms As MemoryStream

    With rSelect
        .Open(sSql, MyCn, ADODB.CursorTypeEnum.adOpenForwardOnly, ADODB.LockTypeEnum.adLockOptimistic)
        If Not .EOF Then
            imageBytes = .Fields!ImgImg.Value
            ms = New MemoryStream(imageBytes, 0, imageBytes.Length)
            ms.Write(imageBytes, 0, imageBytes.Length)
            img = Image.FromStream(ms, True) ' it fails right here: Parameter is not valid '
            LogoPictureBox.Image = img
        End If
        .Close()
    End With 
```

但它失败就`img = Image.FromStream(ms, True)`行了，错误参数无效。

有没有更好的方法来读取或写入数据库以使其工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:30:48.210

*   你为什么要事先对它进行base 64解码？
*   我建议在上传时保存 memetype，确保解决 ie 的怪异 p-jpeg 问题。

* * *

无论如何，这是给你的一堂课。

我的图像.vb

```
Imports System.Data.SqlClient
Imports System.IO

Public Class MyImage
    Implements IHttpHandler

    Public Function GetImage(ByVal id As Integer, ByVal type As String) As Byte()
        Dim Con As New SqlConnection(Common.ConnectionString)
        Dim cmd As New SqlCommand
        cmd.CommandText = _
            "Select * from tblCompanyImg Where CompanyImgID = @imgID"
        cmd.CommandType = System.Data.CommandType.Text
        cmd.Connection = Con

        cmd.Parameters.AddWithValue("@imgID", id)

        Con.Open()
        Dim dReader As SqlDataReader = cmd.ExecuteReader
        dReader.Read()
        Dim img As Byte()
        If dReader.HasRows Then
            img = dReader("Image")
        Else
            Dim im As New ImageManipulator
            Dim notfound = System.Drawing.Image.FromFile(System.Web.HttpContext.Current.Request.PhysicalApplicationPath & "Images\404.jpg")
            img = im.ConvertImageToByteArray(notfound)
        End If

        Con.Close()

        Return img
    End Function

    Function GetMEMEType(ByVal id As Integer) As String
        Dim Con As New SqlConnection(Common.ConnectionString)
        Dim cmd As New SqlCommand
        cmd.CommandText = _
            "Select * from tblCompanyImg Where CompanyImgID = @imgID"
        cmd.CommandType = System.Data.CommandType.Text
        cmd.Connection = Con

        cmd.Parameters.AddWithValue("@imgID", id)

        Con.Open()
        Dim dReader As SqlDataReader = cmd.ExecuteReader
        dReader.Read()
        Dim MEME As String
        If dReader.HasRows Then
            MEME = dReader("MEMEType")
        Else
            MEME = "image/jpeg"
        End If

        Con.Close()

        Return If(MEME = "image/pjpeg", "image/jpeg", MEME)
    End Function

    Public ReadOnly Property IsReusable As Boolean Implements System.Web.IHttpHandler.IsReusable
        Get
            Return False
        End Get
    End Property

    Public Sub ProcessRequest(ByVal context As System.Web.HttpContext) Implements System.Web.IHttpHandler.ProcessRequest
        Dim path As String = context.Request.Path
        Dim id = path.Split(".")(0).Split("/").Last ' not very pretty, grabs the id from the filename requested
        Dim size = path.Split(".")(1) 'grabs the size required, thumb or full.

        Dim imageData As Byte() = GetImage(id, size)
        context.Response.OutputStream.Write(imageData, 0, imageData.Length)
        'context.Response.
        context.Response.ContentType = GetMEMEType(id)
        'context.Response.AddHeader("content-disposition", "attachment; filename=img.jpg")
    End Sub
End Class 
```

然后将其粘贴到您的 web.config 中

```
<add verb="GET" path="*.jpg.db" type="project.MyImage,project"  resourceType="Unspecified" name="databaseHandler" /> 
```

然后调用 2.jpg.db 将获取您的图像文件。

# php - 如何在字符串中找到字母数字

> ID：13843866
> 
> 赞同：1
> 
> 时间：2012-12-12T16:10:53.450
> 
> 标签：php, javascript, regex

```
$foo = "username122";

pre_match('Contain only aplhanumeric string', $foo){
   return true;
} 
```

`$foo`仅包含字母数字而非特殊字符`(=\*-[`（等）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T16:15:41.893

`ctype_alnum()`功能会让你花花公子:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T16:13:21.970

仅使用从头到尾匹配字母数字字符的正则表达式：

```
/^[A-Za-z0-9]*$/ 
```

例如：

```
$testRegex = "/^[A-Za-z0-9]*$/";
$testString = "abc123";
if (preg_match($testRegex, $testString)) {
    // yes, the string is entirely alphanumeric
} else {
    // no, the string is not entirely alphanumeric
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T16:17:34.163

你的正则表达式不会在 PHP 和 JavaScript 之间改变。在 JavaScript 中它是一个对象，而在 PHP 中它是一个字符串，但模式仍然相同：

```
/^[a-z0-9]+$/i 
```

where`^`代表字符串的开头，`$`代表字符串的结尾。接下来，`a-z`匹配任何字母，并`0-9`匹配任何数字。`+`表示前一个模式可以重复一次或多次的状态。`i`修饰符使部分不区分大小写，因此`a-z`大小写匹配。

用 JavaScript 测试：

```
/^[a-z0-9]+$/i.test("Foo123"); // true 
```

PHP中的测试：

```
preg_match("/^[a-z0-9]+$/i", "Foo123"); // 1 
```

使用 PHP，您可以选择使用 POSIX 字符类，例如`:alnum:`. 请注意，这在 JavaScript 中不起作用：

```
preg_match("/^[[:alnum:]]+$/i", "Foo123"); // 1 
```

在 PHP 中实际上有一个更简单的测试方法，使用[Ctype 函数](http://php.net/manual/en/ref.ctype.php)，特别是[`ctype_alnum`](http://php.net/manual/en/function.ctype-alnum.php)函数，它将返回一个布尔值，说明给定字符串中的所有字符是否都是字母数字：

```
ctype_alnum("Foo123"); // true
ctype_alnum("Foo!23"); // false 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T16:18:14.857

```
if(preg_match('~[^a-z0-9 ]~i', $foo)) {
//DO SOMETHING HERE;
} 
```

# datagrid - kendogrid 批量编辑附加行导致发布数据

> ID：13843869
> 
> 赞同：1
> 
> 时间：2012-12-12T16:11:12.493
> 
> 标签：datagrid, kendo-ui

此代码使用龙卷风应用程序从 /api/notes/ 接收的 json 格式数据填充数据网格...

```
$(document).ready(function () {

  dataSource = new kendo.data.DataSource({
    pageSize: 10,
    autoSync: true,
    transport: {
      read: {
        url: '/api/notes/',
        dataType: 'json',
        type: 'GET'
      },
      create: {
        url: '/api/notes/',
        dataType: 'json',
        type: 'POST'
      },
      update: {
        url: '/api/notes/',
        dataType: 'json',
        type: 'PUT'
      }
    },
    schema: {
      data: function(reply) { return reply.rows; },
      model: {
        id: "id",
        fields: {
          id: { type: "string" },
          name: { type: "string" },
          author: { type: "string" },
        }
      }
    },
  });

  $("#grid").kendoGrid({
    dataSource: dataSource,
    navigatable: true,
    pageable: true,
    height: 300,
    editable: true,
    toolbar: ["create", "save", "cancel"],
    columns: [
      { field: "id", title: "ID", width: 150 },
      { field: "name", title: "Book", width: 150 },
      { field: "author", title: "Author", width: 100 },
      { command: "destroy", title: "&nbsp;", width: 110 }
    ],
  });

}); 
```

如果我单击创建而不是弹出一行，例如[此处](http://demos.kendoui.com/web/grid/editing.html)使用空参数触发的帖子，这里有`data`什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:32:57.833

尝试`autoSync`删除或设置`false`为`DataSource`. 根据文档：

> 为所做的每个更改启用 (true) 或禁用 (false) 自动调用 sync() 方法。

所以我认为当您尝试插入该行时，它会立即将其放入 DataSource 中，导致它执行`sync()`. 您链接到的演示也没有指定`autoSync`。

# html - 为什么我的内联 div 没有占用给定的空间？

> ID：13843873
> 
> 赞同：0
> 
> 时间：2012-12-12T16:11:29.420
> 
> 标签：html, css

看看这个[jsfiddle](http://jsfiddle.net/thetoolsmith/fm4Xk/)

我试图让我的 div 向右使用父 div 的整个宽度和高度。

知道我做错了什么吗？

这是HTML

```
<div style="width:150px;padding:0;min-height:200px;">
  <div style="width:100%;background-color:#99CD4E;">
    <div style="width:35px;padding:5px;display:inline-block;border: solid 1px #ff0000;">
      <img src="/photos/files/5/main/small_thumb.jpg" class="thumb_small "/>    
    </div>
  <div style="height:100%;display:inline-block;border: solid 1px #ff0000;">user <strong>age</strong><br>town, state</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:15:59.413

`display:inline-block`您可以为 div 设置样式，`display:table-cell`并为特定的 div 设置 100% 的宽度，而不是使用它们设置样式。

**[jsFiddle 示例](http://jsfiddle.net/j08691/fm4Xk/2/)**

```
<div style="width:150px;padding:0;min-height:200px;">
  <div style="width:100%;background-color:#99CD4E;">
    <div style="width:35px;padding:5px;display:table-cell;border: solid 1px #ff0000;">
      <img src="/photos/files/5/main/small_thumb.jpg" class="thumb_small "/>    
    </div>
  <div style="height:100%;width:100%;display:table-cell;border: solid 1px #ff0000;">user <strong>age</strong><br>town, state</div>
</div> 
```

# delphi - 如果我将父控件传递给 Create 而不是分配 Parent 属性，为什么我的新控件没有出现？

> ID：13843874
> 
> 赞同：2
> 
> 时间：2012-12-12T16:11:30.423
> 
> 标签：delphi, lazarus, language-concepts

在拉撒路，我正在尝试这个：

```
TabSaveButton := TButton.Create(nil);
with TabSaveButton do
  begin
    Parent:=NewTab;
    Width:=75;
    Height:= 25;
    Top:=530;
    Left:=715;
    Caption:='Save';
  end; 
```

它有效。即，我得到了按钮，它是可点击的，它是动态创建的选项卡表的子项。

但以下*没有*显示按钮，也没有错误：

```
TabSaveButton := TButton.Create(NewTab);
with TabSaveButton do
  begin
    Width:=75;
    Height:= 25;
    Top:=530;
    Left:=715;
    Caption:='Save';
  end; 
```

1.  为什么第二种方法不起作用？

2.  这对 Lazarus 和 Delphi 有同样的影响吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T16:13:01.680

的参数`Create`设置控件的**所有者**。所有者是负责释放相关组件的组件。例如，如果你释放了一个组件，那么它拥有的所有组件也会被释放。**父母**是完全不同的东西。它是托管相关控件的窗口（控件）。

Delphi和Lazarus在这里没有区别。

# extjs - Sencha Touch 2.x - 命令 sencha app build native

> ID：13843875
> 
> 赞同：0
> 
> 时间：2012-12-12T16:11:32.367
> 
> 标签：extjs, sencha-touch, touch

Os Ubuntu 12，命令 sencha app build native 出现问题

错误

# sencha app build native

[ERR] BUILD FAILED [ERR] com.sencha.exceptions.BasicException：执行此行时发生以下错误：[ERR] /var/www/m7/sencha/blog/.sencha/app/build-impl.xml： 120: javax.script.ScriptException: sun.org.mozilla.javascript.WrappedException: Wrapped java.lang.UnsupportedOperationException: stbuild 在第 664 行的 linux (#664) 上尚不支持

# android - 从 Service 到 Activity 的消息永远不会到达 Handler

> ID：13843881
> 
> 赞同：2
> 
> 时间：2012-12-12T16:11:47.780
> 
> 标签：android, service, android-activity, handler, message

看来我错过了一些重要的事情：

到目前为止，我有一个启动自己线程的活动。该线程使用位于同一活动中的 Handler 的 sendMessage() 方法不时发送消息。这很好用。

现在我添加了一个服务，在后台做一些很酷的事情。该服务本身尝试使用相同的方式发送一些消息：调用位于 Activity 中的 Handler 的 sendMessage()。但这些消息只是偶尔到达，其中许多会丢失。

因此，当涉及服务时，消息/处理程序似乎有些不同？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:16:28.067

最好在 Activity 中声明一个[本地广播接收器](http://developer.android.com/reference/android/support/v4/content/LocalBroadcastManager.html)来接收服务的信息，然后在接收器中将消息发送给处理程序。

# linux - qemu-kvm numa 拓扑暴露问题

> ID：13843887
> 
> 赞同：2
> 
> 时间：2012-12-12T16:12:01.417
> 
> 标签：linux, qemu, kvm, numa

我正在尝试实现以下场景。

我有一个带有 4 个 numa 节点的 linux 盒子，每个节点有 6 个 cpu。为了获得更好的 kvm 客户机性能，我将每个 vcpu 固定到一组 cpu，最好在同一个 numa 单元中。

例如，如果我想启动一个 12 核来宾，我将前 6 个 vcpus 固定到 NUMA 节点 1 中的 cpuset，将第二个 6 固定到 NUMA 节点 2 中的 cpuset。

到目前为止一切顺利，当我尝试将该拓扑暴露给来宾时问题开始出现，即让来宾知道它在 2 个 NUMA 节点上有两个 cpuset。

我认为，如果我使用`-smp 12,sockets=2,cores=6,threads=1`qemu-kvm 的选项，它很可能会将它们分成两半，将前 6 个分组在一个套接字中，将第二个 6 分组在另一个套接字中，并使用`-numa`选项在适当的 vcpus 上设置 2 个 numa 节点。所以我的问题如下：

1.  该`-numa`选项会发挥作用吗？在文档中，据说它是用于 numa 模拟的。如果它是模拟的，那是否意味着它会损害性能？我需要的是一种对客人说的方式：“这些 cpus 在同一个 NUMA 节点上”（即使它们不是）。这是实现这一目标的方法吗？

2.  qemu（1.2.0）似乎有一个错误，并且拓扑暴露得很严重。当我将 CPU 拓扑设置为（例如）`-smp 9,sockets=3,cores=3,threads=1`时，出于某种奇怪的原因，在来宾内部，我看到它们（使用 lstopo）排列在三个插槽中，但第一个有 4 个核心，第二个有 4 个核心，第三个有 1 个核心(4|4|1)。我想，它将它们分成 2 的幂，而不是相等的。我也观察到了同样的行为`sockets=2,cores=10`；`sockets=2,cores=18`，你的名字，总是不将它们分成两半，而是按 2 的幂（即 8|2 和 16|2 ）。`sockets=2,cores=8`虽然工作正常（这是意料之中的）。有没有人经历过这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:05:08.510

从 0.9.8 开始，可以使用 numa 元素来指定来宾 NUMA 拓扑。结合 cputune 元素下的 vcpupin，如果需要，您应该能够在主机和来宾之间实现所需的 CPU/内存映射。

[http://libvirt.org/formatdomain.html#elementsCPU](http://libvirt.org/formatdomain.html#elementsCPU)

# java - 如何构建一个可以将各种数据类型保存为仅在运行时才知道类型的值的通用映射？

> ID：13843890
> 
> 赞同：-1
> 
> 时间：2012-12-12T16:12:04.450
> 
> 标签：java, generics

一些背景知识：我正在修改一个对象的类，该对象需要保存用户在运行时添加到它的属性。我在其中构建了一个属性定义列表，其中每个元素都包含属性名称（唯一）及其类型（存储在字符串中）。

例如：“名称”、“字符串”或“年份”、“整数”

我现在面临的挑战是将这个列表转换为一个映射，其中属性的名称是键，值变量类型取决于用户描述的内容。此映射将保存列表中描述的属性的实际内容（内容将由用户在稍后阶段输入）。

使用泛型构建此地图的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:13:34.340

我只会使用[java.util.Properties](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html) - 这正是它的设计目的。

它还有其他方便的方法，例如从文件加载、转储到 XML 以及其他您可能会发现非常有用的东西。

虽然从技术上讲，它`Hashtable<Object,Object>`的扩展主要是为了向后兼容。它上面的方法表明预期的使用将是`String`输入。

# javascript - 使模态加载更快

> ID：13843891
> 
> 赞同：-1
> 
> 时间：2012-12-12T16:12:07.347
> 
> 标签：javascript, modal-dialog, pageload

我创建了一个整页模式框以显示在页面加载中。我有一个问题。我的主页必须在模态显示之前完全加载，我希望模态显示得更快并且不显示我的任何主页。有什么方法可以加快模态或确保主页在模态之前不显示？任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:24:27.873

查看 Yahoo 的高性能网站（和[Google 的）](https://developers.google.com/speed/docs/best-practices/rules_intro)[最佳实践](http://developer.yahoo.com/performance/)。

1.  无需加载整个页面，只需加载最小值以显示模式，然后再[加载](http://developer.yahoo.com/performance/rules.html#postload)其余部分。
2.  如果访客在看到模态之前就在您的网站上，请[预加载](http://developer.yahoo.com/performance/rules.html#preload)客户端呈现模态所需的任何资源。如果您缓存这些资源，这将在它们到达模态时节省时间。
3.  消除不必要的资源。例如，如果你的 modal 有一个图像，它可以用 CSS 替换吗？即使是小图像也需要额外的 HTTP 请求开销（除非它是预加载的）。

我可以继续，但这些来自 Google 和 Yahoo 的资源非常有帮助。

# mysql - 将查询存储在bash中的数组中

> ID：13843896
> 
> 赞同：14
> 
> 时间：2012-12-12T16:12:30.683
> 
> 标签：mysql, linux, bash

我的脚本需要将查询结果存储在一个结构中：

```
 #!/bin/bash
 user="..."
 psw="..."
 database="..."
 query="select name, mail from t"
 customStructure=$(mysql -u$user -p$psw $database -e "$query";) 
```

我不知道如何存储查询结果中的 {name, mail} 数组。

我需要这样的结构：

```
 array=[ [name1,mail1] , [name2,mail2], ....., [nameN, mailN] ] 
```

有没有办法在 bash 中做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-12T16:30:33.560

Bash 数组的初始化如下：

```
myarray=("hi" 1 "2"); 
```

要将命令输出的各个部分捕获到数组中，我们必须遍历输出，将其结果添加到数组中。可以这样做：

```
for i in `echo "1 2 3 4"`
do
    myarray+=($i)
done 
```

在您的示例中，您似乎希望获取 MySQL 命令的输出并将其输出行的部分存储到子数组中。我将向您展示如何将行捕获到数组中，并且鉴于此，您应该能够弄清楚如何自己将子数组放入其中。

```
while read line
do 
    myarray+=("$line")
done < <(mysql -u${user} -p${psw} ${database} -e "${query}") 
```

还值得一提的是，对于这种不需要输出元数据（例如漂亮的格式和表名）的 MySQL 操作，您可以使用 MySQL 的`-B`选项进行“批量输出”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-12T08:32:22.023

可以通过`read -a`命令访问字段级记录，并将`IFS`其设置为空字符串以防止读取从行中剥离前导和尾随空格。

```
#!/bin/bash
user="..."
psw="..."
database="..."
query="select name, mail from t"

OIFS="$IFS" ; IFS=$'\n' ; oset="$-" ; set -f

while IFS="$OIFS" read -a line 
do 
  echo ${line[0]}   
  echo ${line[1]}   
done < <(mysql  -u${user} -p${psw} ${database} -e "${query}") 
```

# excel - 使用 Vbscript 取消列

> ID：13843898
> 
> 赞同：-2
> 
> 时间：2012-12-12T16:12:32.483
> 
> 标签：excel, vbscript

请按照收集了一些任务详细信息的表格。现在我正在这些类型的 excel 表上寻找可以检查所有 TCompdate 列的任何 VBscript，如果发现该列中没有值，则其相关的两列说这里 T,TSdate 应该是空白的。

***输入表***

```
 PID     T1     T1Sdate   T1Compdate   T2      T2Sdate     T2Compdate   T3    T3Sdate   T3Compdate

 10      A     2/5/11      4/5/11      B      06/09/12                  C     11/11/11
 11      A     2/5/11                  B      06/09/12     8/8/10       C     11/11/11   5/4/11
 12      A     2/5/11                  B      06/09/12     8/8/10       C     11/11/11   5/4/11 
```

***输出表***

```
 PID     T1     T1Sdate   T1Compdate   T2      T2Sdate     T2Compdate   T3    T3Sdate   T3Compdate

 10      A     2/5/11      4/5/11                        
 11                                    B      06/09/12     8/8/10       C     11/11/11   5/4/11
 12                                    B      06/09/12     8/8/10       C     11/11/11   5/4/11 
```

***代码：***

```
 Option Explicit

  Dim objExcel1,objWorkbook
  Dim strPathExcel1
  Dim objSheet1,IntRow1
  Dim Counter

   Set objExcel1 = CreateObject("Excel.Application")
   strPathExcel1 = "D:\VA\TestVBSScripts\DataNullification\DataNullification.xlsx"

   Set objWorkbook=objExcel1.Workbooks.open(strPathExcel1)
   Set objSheet1 = objExcel1.ActiveWorkbook.Worksheets(1)

IntRow1=2
Do While objSheet1.Cells(IntRow1,1).Value <> ""

For Counter=2 to 13 Step 3

 If objSheet1.Cells(IntRow1,Counter+2).Value = "" Then

 objSheet1.Cells(IntRow1,Counter).Value=""
 objSheet1.Cells(IntRow1,Counter+1).Value=""

 End If

Next

 IntRow1=IntRow1+1
 Loop

  '=======================
 objExcel1.ActiveWorkbook.SaveAs strPathExcel1
 objExcel1.Workbooks.close
 objExcel1.Application.Quit
 '====================== 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:07:27.683

关闭计算和屏幕更新：

```
Option Explicit

  Dim objExcel1,objWorkbook
  Dim strPathExcel1
  Dim objSheet1,IntRow1
  Dim Counter

   Set objExcel1 = CreateObject("Excel.Application")
   strPathExcel1 = "D:\VA\TestVBSScripts\DataNullification\DataNullification.xlsx"

   Set objWorkbook=objExcel1.Workbooks.open(strPathExcel1)
   Set objSheet1 = objExcel1.ActiveWorkbook.Worksheets(1)

   objExcel1.ScreenUpdating = False
   objExcel1.Calculation = -4135  'xlCalculationManual

IntRow1=2
Do While objSheet1.Cells(IntRow1,1).Value <> ""

For Counter=2 to 13 Step 3

 If objSheet1.Cells(IntRow1,Counter+2).Value = "" Then

 objSheet1.Cells(IntRow1,Counter).Value=""
 objSheet1.Cells(IntRow1,Counter+1).Value=""

 End If

Next

 IntRow1=IntRow1+1
 Loop

   objExcel1.ScreenUpdating = True
   objExcel1.Calculation = -4105   'xlCalculationAutomatic

  '=======================
 objExcel1.ActiveWorkbook.SaveAs strPathExcel1
 objExcel1.Workbooks.close
 objExcel1.Application.Quit
 '====================== 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T08:00:33.673

编辑：？？

编辑：添加我的样本输入和输出结果

编辑：添加变量，ChuckSize

编辑：还将车道`startCol = objSheet1.Range("A1").column` “A”更改为“S”，更改为您的 PID 所在的任何列，
假设：您的数据从第 1 行开始

使用@Tim 的解决方案 + 2D 阵列优化技术的解决方案。

**样本输入**：

```
A   A   A   A   A   A   A   A   A   A   PID T1Name  T1StartDate T1FinishDate    Total Time Spent    T2Name  T2StartDate T2FinishDate    Total Time Spent    T3Name  T3StartDate T3FinishDate    Total Time Spent
A   A   A   A   A   A   A   A   A   A   11  S1  12/7/2012   19/7/2012   100                         19/7/2012   
A   A   A   A   A   A   A   A   A   A   12  S1  12/7/2012                           S2      19/7/2012   
A   A   A   A   A   A   A   A   A   A   13  12/7/2012                   11/5/2012           S6      12/5/2010 
```

**样本输出**：

```
A   A   A   A   A   A   A   A   A   A   PID T1Name  T1StartDate T1FinishDate    Total Time Spent    T2Name  T2StartDate T2FinishDate    Total Time Spent    T3Name  T3StartDate T3FinishDate    Total Time Spent
A   A   A   A   A   A   A   A   A   A   11  S1  12/7/2012   19/7/2012   100                             
A   A   A   A   A   A   A   A   A   A   12                                              
A   A   A   A   A   A   A   A   A   A   13 
```

代码：

```
 Option Explicit

  Dim objExcel1,objWorkbook
  Dim strPathExcel1
  Dim objSheet1,IntRow1
  Dim Counter
  dim height
  dim i 
  dim dataArray
  dim startCol 
  dim j 
  dim chuckSize 
   Set objExcel1 = CreateObject("Excel.Application")
   strPathExcel1 = "C:\Users\wangCL\Desktop\data.xlsx"

   Set objWorkbook=objExcel1.Workbooks.open(strPathExcel1)
   Set objSheet1 = objExcel1.ActiveWorkbook.Worksheets("data (4)")

   objExcel1.ScreenUpdating = False
   objExcel1.Calculation = -4135  'xlCalculationManual
   startCol = objSheet1.Range("K1").column 'column with PID is 
   chuckSize = 4
   Height = objSheet1.Cells(objSheet1.Rows.Count, startCol).End(-4162).Row '-4162 is xlUp
If Height >= 2 Then
    ReDim dataArray(Height - 2, 12) '12 columns in total
    dataArray = objSheet1.Range(objSheet1.Cells(2, startCol + 1), objSheet1.Cells(Height, startCol + 12)).Value
    For i = 1 To Height - 1
        For Counter = 1 To 12 Step chuckSize
        If dataArray(i, Counter + chuckSize-1) = "" Then
            For j = 0 to chuckSize - 2
            dataArray(i, Counter + j) = ""
            next 
        End If

        Next
    Next
    'assigning the values back into the worksheet
    objSheet1.Range(objSheet1.Cells(2, startCol + 1), objSheet1.Cells(Height, startCol + 12)).Value =     dataArray
End If

   objExcel1.ScreenUpdating = True
   objExcel1.Calculation = -4105   'xlCalculationAutomatic

  '=======================
 objExcel1.ActiveWorkbook.Save
 objExcel1.Workbooks.close
 objExcel1.Application.Quit
 '====================== 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T04:55:06.333

为什么要使用 vba - 这可以通过公式来完成。对于表中的第一个数据行，公式是

`=D1 =IF(ISBLANK(D3),"",B3) =IF(ISBLANK(D3),"",C3) =IF(ISBLANK(D3),"",D3) =IF(ISBLANK(G3),"",E3)`ETC

# java - ejb-jar.xml env-entry 枚举

> ID：13843899
> 
> 赞同：0
> 
> 时间：2012-12-12T16:12:35.507
> 
> 标签：java, glassfish, ejb, java-ee-6, ejb-jar.xml

这是我的 ejb-jar.xml：

```
<?xml version="1.0" encoding="UTF-8"?>

<ejb-jar xmlns = "http://java.sun.com/xml/ns/javaee" 
         version = "3.0" 
         xmlns:xsi = "http://www.w3.org/2001/XMLSchema-instance" 
         xsi:schemaLocation = "http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/ejb-jar_3_0.xsd">

    <enterprise-beans>
        <session>
            <ejb-name>EmailEjb</ejb-name>
            <env-entry>
                <env-entry-name>java:app/env/smtp.host</env-entry-name>
                <env-entry-type>java.lang.String</env-entry-type>
                <env-entry-value>smtp.mandrillapp.com</env-entry-value>
            </env-entry>
            <env-entry>
                <env-entry-name>java:app/env/smtp.port</env-entry-name>
                <env-entry-type>java.lang.Integer</env-entry-type>
                <env-entry-value>587</env-entry-value>
            </env-entry>
            <env-entry>
                <env-entry-name>java:app/env/smtp.transportStrategy</env-entry-name>
                <env-entry-type>org.codemonkey.simplejavamail.TransportStrategy</env-entry-type>
                <env-entry-value>SMTP_TLS</env-entry-value>
            </env-entry>
            <env-entry>
                <env-entry-name>java:app/env/smtp.username</env-entry-name>
                <env-entry-type>java.lang.String</env-entry-type>
                <env-entry-value>user@example.com</env-entry-value>
            </env-entry>
            <env-entry>
                <env-entry-name>java:app/env/smtp.password</env-entry-name>
                <env-entry-type>java.lang.String</env-entry-type>
                <env-entry-value>foobar</env-entry-value>
            </env-entry>
        </session>
    </enterprise-beans>
</ejb-jar> 
```

部署后，我得到这个异常：

> org.xml.sax.SAXParseException；行号：23；列号：85；存档 [localgp-web-1.0-SNAPSHOT] 中的部署描述符文件 WEB-INF/ejb-jar.xml。cvc-enumeration-valid：值 'org.codemonkey.simplejavamail.TransportStrategy' 对于枚举 '[java.lang.Boolean, java.lang.Byte, java.lang.Character, java.lang.String 不是 facet-valid , java.lang.Short, java.lang.Integer, java.lang.Long, java.lang.Float, java.lang.Double]'。它必须是来自枚举的值。

这似乎表明，尽管[有文档](http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/env_entry/env_entry.html)，但不允许使用枚举。还是发生了其他我可能会错过的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:03:33.667

NetBeans 7.2.1 (latest version right now) generates an ejb-jar.xml for version 3.0 of the EJB spec which doesn't recognize enums as `env-entry-type`s. Changing it to version 3.1 resolves the issue and the resources are injected correctly.

```
<ejb-jar xmlns = "http://java.sun.com/xml/ns/javaee" 
         version = "3.1" 
         xmlns:xsi = "http://www.w3.org/2001/XMLSchema-instance" 
         xsi:schemaLocation = "http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/ejb-jar_3_1.xsd">

    <!-- Stuff goes here. -->

</ejb-jar> 
```

# java - 如何使用 java 和 selenium 引用以下 html 元素？

> ID：13843902
> 
> 赞同：0
> 
> 时间：2012-12-12T16:12:40.607
> 
> 标签：java, html, xpath, selenium, automation

我想使用 java 访问以下具有唯一值指示符的元素。在 name="txnSource" 下使用选项值标识的所有文本值都是可以从下拉选择器中进行的选择。

我想自动从下拉框中选择值，这就是为什么我需要知道如何访问这些值......没有“findElement（By.value（“value”））”所以怎么能我按值访问元素？？

我认为通过 xpath 访问会非常不稳定。此外，下拉选项中的任何更改都需要对 xpath 标识进行全面修改。

![在此处输入图像描述](../Images/bc7300fa7b544eb36d3725b1b2eb4278.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T16:22:37.217

在 Java 中，您可以执行以下任何操作：

```
driver.findElement(By.cssSelector("option[value='500']")).click(); 
```

或者

```
driver.findElement(By.xpath("//option[@value='500']")).click(); 
```

或使用[`Select`和`selectByValue()`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/Select.html#selectByValue%28java.lang.String%29)

```
Select select = new Select(driver.findElement(By.name("txnSource")));
select.selectByValue("500"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T16:22:19.700

在Java中，我认为它会是这样的

```
IWebElement dropDownListBox = driver.findElement(By.Name("txnSource"));
SelectElement clickThis = new SelectElement(dropDownListBox);
clickThis.SelectByValue("500"); 
```

这就是它在 Ruby 中的完成方式

```
Selenium::WebDriver::Support::Select.new(@driver.find_element(:name, "txnSource")).select_by(:value, "500") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T16:24:19.620

您可以像这样从选择列表中选择一个选项

```
new Select(driver.findElement(By.name("txnSource"))).selectByVisibleText("Text- Stock Movement (DOGS)"); 
```

[http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/Select.html](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/Select.html)

# unix - 将 .pdf 文件转换为 excel (.xls)

> ID：13843905
> 
> 赞同：1
> 
> 时间：2012-12-12T16:12:45.837
> 
> 标签：unix, pdf, xls, file-conversion

我的一位实习朋友在 2 小时前问我是否可以帮助他避免使用免费的在线软件手动将 462 pdf 文件转换为 .xls。

我想到了一个使用的shell脚本`unoconv`，但我没有找到如何正确使用它，我不确定是否`unoconv`可以解决这个问题，因为它主要将文件转换为pdf，而不是相反的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T01:18:57.763

从 PDF 转换为任何其他结构化格式并不总是可行的，通常也不推荐。

话虽如此，这看起来确实是一份一次性的工作，而且数量相当少（462）。

如果您可以可靠地从其中的大多数文本中提取文本并且其结构合理，那么它是值得追求的。这是一个尝试在 PDF 样本中获取常规文本输出的问题，您可以可靠地将其解析为表结构。

围绕该目标有很多工具，无论是直接提取还是基于 OCR 的文本提取，只需 google 一下。

我喜欢的一个是 ghostscript 套件中的 pstotext；该`-bboxes`选项让我得到每个单词的坐标，并让我重新组装结构。尽管它的名字它确实适用于输入 PDF。缺点是它可能有点不稳定，适用于某些 PDF，但不适用于其他 PDF。

如果你走到这一步，那么你很可能需要编写一个 shell 脚本或程序来将其转换为 CSV。您可以直接通过电子表格打开它，也可以寻找将其转换为 XLS 的工具。

PS 如果他还没有，请让实习生询问是否有任何可能的方法来获取用于创建 PDF 的原始数据。这将节省大量时间和精力，并获得更准确的结果。

**更新Perl** [CAM::PDF](http://search.cpan.org/dist/CAM-PDF/)模块中包含的`pstotext`is命令的替代方法。更健壮，但只报告文本 (x,y) 位置，而不是边界框。`renderpdf.pl`

# python - GAE开发服务器重启后保留全文搜索索引？

> ID：13843907
> 
> 赞同：8
> 
> 时间：2012-12-12T16:12:50.283
> 
> 标签：python, google-app-engine, google-cloud-datastore, google-search

是否有强制 GAE 开发服务器在重启后保留全文搜索索引？我发现每当重新启动开发服务器时索引都会丢失。

`--datastore_path`启动开发服务器（选项）时，我已经在使用静态数据存储路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:29:29.507

此功能是在几个版本前添加的（我认为是在 1.7.1 或 1.7.2 中）。如果您使用过去几个月的 SDK，它应该可以工作。您可以尝试显式设置`--search_indexes_path`标志 on `dev_appserver.py`; 默认位置 ( `/tmp/`) 可能不可写。您能否发布启动 dev_appserver 时的前几行日志？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-15T22:50:22.853

万一其他人来找这个，看起来简单的解决方案现在是指定

```
--storage_path=/not/the/tmp/dir 
```

您仍然可以使用 --datastore_path 等覆盖它。

[https://developers.google.com/appengine/docs/python/tools/devserver](https://developers.google.com/appengine/docs/python/tools/devserver) （在页面底部..）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-12-05T00:41:32.757

看起来这不再是问题了。根据文档（和我的测试）：

> “开发网络服务器使用您计算机上的文件模拟 App Engine 数据存储区。该文件在网络服务器的调用之间持续存在，因此您存储的数据在您下次运行网络服务器时仍然可用。”

如果不是这样，请告诉我，我会跟进。

# iphone - 使用 TWRequest 更新推特会出现 403 错误

> ID：13843910
> 
> 赞同：4
> 
> 时间：2012-12-12T16:13:00.463
> 
> 标签：iphone, objective-c, ios, twitter, ios6

我正在使用以下代码使用 iOS 5 twitter API 在用户的时间轴中发布推文

// 创建账户存储对象。ACAccountStore *accountStore = [[ACAccountStore alloc] init];

```
// Create an account type that ensures Twitter accounts are retrieved.
ACAccountType *accountType =  [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

// Request access from the user to use their Twitter accounts.
[accountStore requestAccessToAccountsWithType:accountType withCompletionHandler:^(BOOL granted, NSError *error) 
 {
     if(granted) 
     {
         // Get the list of Twitter accounts.
         NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];

         // For the sake of brevity, we'll assume there is only one Twitter account present.
         // You would ideally ask the user which account they want to tweet from, if there is more than one Twitter account present.
         // Grab the initial Twitter account to tweet from.
         ACAccount *twitterAccount = [accountsArray objectAtIndex:buttonIndex];
         // Create a request, which in this example, posts a tweet to the user's timeline.
         // This example uses version 1 of the Twitter API.
         // This may need to be changed to whichever version is currently appropriate.

         TWRequest *postRequest = [[TWRequest alloc] initWithURL:[NSURL URLWithString:@"http://api.twitter.com/1/statuses/update.json"] parameters:[NSDictionary dictionaryWithObject:@"hello this is a tweet" forKey:@"status"] requestMethod:TWRequestMethodPOST];

         // Set the account used to post the tweet.
         [postRequest setAccount:twitterAccount];

         // Perform the request created above and create a handler block to handle the response.
         [postRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) 
          {

              NSString *output = [NSString stringWithFormat:@"%i", [urlResponse statusCode]];
              [self performSelectorOnMainThread:@selector(TweetStatus:) withObject:output waitUntilDone:NO];
          }];
     }
 }]; 
```

我已经使用这种方法一个多月来测试应用程序，它曾经可以正常工作，没有任何问题。

**几周后，它开始在以下方法中返回 403 错误。**

```
[postRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) 
          {

              NSString *output = [NSString stringWithFormat:@"%i", [urlResponse statusCode]];
              [self performSelectorOnMainThread:@selector(TweetStatus:) withObject:output waitUntilDone:NO];
          }]; 
```

它给出了以下错误：

```
Error Domain=NSURLErrorDomain Code=-1012 "The operation couldn’t be completed. (NSURLErrorDomain error -1012.)" UserInfo=0x1f8b3250 {NSErrorFailingURLKey=http://api.twitter.com/1/statuses/update.json, NSErrorFailingURLStringKey=http://api.twitter.com/1/statuses/update.json, NSUnderlyingError=0x1ed19f90 "The operation couldn’t be completed. (kCFErrorDomainCFNetwork error -1012 
```

我进行了很多搜索，但找不到任何解决方案或解决此问题的真正原因。

要记住的一些注意事项可能有助于理解问题：

*   该应用程序用于测试，这意味着我们使用了 twitter 分享并与其他用户进行了很多提及。
*   共享内容并不总是相同的，因此不会出现重复问题，因为我们经常清理时间线。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T12:00:08.830

您尝试发布的文本必须与您之前发布的内容相似，因此您会收到此错误。根据[此处](https://dev.twitter.com/docs/api/1.1/post/statuses/update)的文档，不能多次发布相同的文本。 ![在此处输入图像描述](../Images/f23ec6ed407653cbb9210be074af23dc.png)

编辑：

这也可能取决于他们网站中提到的推文总数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-16T23:35:54.050

> 我已经使用这种方法一个多月来测试应用程序，它曾经可以正常工作，没有任何问题。

我认为这就是问题所在。您正在测试的此帐户可能已被其他人标记为垃圾邮件发送者。

如果您使用其他帐户或其他电话并且代码有效，那么这是我朋友的唯一解释。

祝你好运

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-15T15:54:46.223

我注意到您正在使用以下 URL 发布来自您的用户的推文：

`http://api.twitter.com/1/statuses/update.json`

这是使用 Twitter API 的 1.0 版，该 API 已被弃用，并将在接下来的几个月内慢慢停止工作

相反，您应该尝试使用

`https://api.twitter.com/1.1/statuses/update.json` *（[最近对 Twitter API 进行了更改](https://dev.twitter.com/discussions/24239)。您现在**只能**使用 HTTPS 调用它。）*

这将指定 API 的最新版本。

# javascript - 在 dojo 中定义自定义类

> ID：13843912
> 
> 赞同：1
> 
> 时间：2012-12-12T16:13:03.183
> 
> 标签：javascript, dojo

我正在尝试定义一个类，但是当我在代码中引用它时出现错误

**错误：声明 custom.place：mixin #0 不是可调用的构造函数**

```
define(['dojo', 'dijit/dijit', "dojo/_base/declare", "dijit/place"],
   function(dojo, dijit, declare, place) {

     return declare("custom.place", [place], {
       newMethod: function() { }
   });
 }) 
```

这行不通。但是下面的代码，工作正常！

```
define(['dojo', 'dijit/dijit', "dojo/_base/declare", "dijit/MenuItem"],
   function(dojo, dijit, declare, MenuItem) {

   return declare("custom.item", [MenuItem], {
       newMethod: function() { }
   });
}) 
```

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T16:43:52.617

Dojo 类只能扩展其他 Dojo 类。[`dojo/place`](http://dojotoolkit.org/reference-guide/1.8/dijit/place.html)不是 Dojo 类；它只是一个具有一些功能属性的对象。

```
require(["dijit/place", "dijit/MenuItem"], function(place, MenuItem) {
  console.log(typeof place);
  console.log(typeof MenuItem);
}); 
```

上面的代码给出了控制台输出：

```
LOG: object 
LOG: function 
```

如果您想要一个具有地方实用功能和一些额外功能的对象，您可以创建自己的版本，如下所示：

```
define(["dojo/_base/lang", "dijit/place"], function(lang, place) {
  var newMethods = {
    foo : function () {}
  };

  return lang.mixin(newMethods, place);
}); 
```

如果您想将 place 的功能混合到 Dojo 类中，您可以使用[safeMixin](http://dojotoolkit.org/reference-guide/1.8/dojo/_base/declare.html#dojo-base-declare-safemixin)来实现，但我不确定您为什么要这样做。

# django - Django Admin：从主页中删除表格

> ID：13843915
> 
> 赞同：0
> 
> 时间：2012-12-12T16:13:13.387
> 
> 标签：django

如何在不取消注册的情况下从主管理页面删除或隐藏指向表的链接？我只希望通过单击外键旁边的链接来编辑/添加表格。我浏览了管理文档并找不到任何东西，但这应该是一个常用的功能。

# php - 使用 PHP（Flot 或 HighChart）解析 SQL 结果并绘图

> ID：13843920
> 
> 赞同：-2
> 
> 时间：2012-12-12T16:13:29.610
> 
> 标签：php, mysql, parsing, highcharts, flot

我有一个记录实时传感器数据的 MySQL 数据库。在我的表中，我有 ID（自动递增）、TimeStamp 和 SensorData。我正在记录多个传感器（压力、温度等）并将它们全部存储在 SensorData 列中。它是空格分隔的。所以它看起来像：

33.5 108.3 443.2 44.2 779.553

我想在网站上实时绘制这些信息。到目前为止，我已经设置了 Flot，它将查询我的数据库并返回结果，但我不知道如何解析 SensorData 列，这样我就可以为每个传感器绘制一个图。

无法修改正在向 SQL 服务器发送数据的设备，因此我将始终在一列中有多个传感器条目。这是我目前用于 Flot 的代码：

```
<html>
 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Flot Examples</title>
    <link href="layout.css" rel="stylesheet" type="text/css">
    <!--[if lte IE 8]><script language="javascript" type="text/javascript" src="js/flot/excanvas.min.js"></script><![endif]-->
    <script language="javascript" type="text/javascript" src="js/flot/jquery.js"></script>
    <script language="javascript" type="text/javascript" src="js/flot/jquery.flot.js"></script>
 </head>
    <body>
    <h1>Apex HiPoint, LLC</h1>

    <div id="placeholder" style="width:600px;height:300px;"></div>

<?php

    $server = "www.freesql.org";
    $user="un";
    $password="pw";  
    $database = "testdb";

    $connection = mysql_connect($server,$user,$password);
    $db = mysql_select_db($database,$connection);

    $query = "SELECT Id, TME FROM SData";
    $result = mysql_query($query);

    while($row = mysql_fetch_assoc($result)) 
    {
        $dataset1[] = array($row['Time'],$row['SensorData']);
    }
?>

<script type="text/javascript">
$(function () {
    var dataset1 = <?php echo json_encode($dataset1); ?>;

    $.plot($("#placeholder"), [ dataset1 ]);
});
</script>
 </body>
</html> 
```

所以我的最终目标是拥有一个包含多个情节的网页。RealTime 中每个传感器的一个绘图。15-30 秒更新是可以的。而且我无法修改数据库的结构，因此所有传感器数据都包含在该记录中。我是 php、mysql 和其他好东西的新手，所以请理解。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:30:09.347

如果您知道每个传感器数据之间总是有一个空格，您可以从 MySQL 中选择您的系列数据，将传感器列值拆分为一个空格并将其发送到您想要的任何图表系统。我不确定 MySQL 是否有内置的拆分功能，但我会检查它（我知道 SQL Server 没有）。

# html - 内部链接的自定义样式 不工作

> ID：13843930
> 
> 赞同：0
> 
> 时间：2012-12-12T16:13:55.537
> 
> 标签：html, css

我被困在一些看起来很简单的事情上，但我一定遗漏了一些小细节。我有这个 div：

```
<div id="menu" class="menu_div">
<a href="/">HOME</a> | 
<a href="/pics.php">PICTURES</a>
</div> 
```

以及样式标签内的以下内容

```
.menu_div {
    background-color: #FFFFFF;
    border:1px solid black;
    width: 900px;
    a:link {color:#000000; text-decoration:none;}      /* unvisited link */
    a:visited {color:#000000; text-decoration:none;}  /* visited link */
    a:hover {color:#FF0000; text-decoration:none;}  /* mouse over link */
    a:active {color:#FF0000; text-decoration:none;}  /* selected link */
} 
```

除链接外，一切正常。我尝试了其他组合，如 .menu_div a:hover 等，似乎没有任何效果，知道为什么吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T16:16:15.913

我没有看到任何 SASS 或 LESS 标记，所以这是解决方案 - 您不能在 CSS 中使用嵌套规则。您必须单独定义它们：

```
.menu_div {
    background-color: #FFFFFF;
    border:1px solid black;
    width: 900px;
}

.menu_div a:link {color:#000000; text-decoration:none;}      /* unvisited link */
.menu_div a:visited {color:#000000; text-decoration:none;}   /* visited link */
.menu_div a:hover {color:#FF0000; text-decoration:none;}     /* mouse over link */
.menu_div a:active {color:#FF0000; text-decoration:none;}    /* selected link */ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T16:16:02.330

您不能在 CSS 中嵌套规则集。您必须使用[后代组合](http://www.w3.org/TR/selectors/#descendant-combinators)器。

```
.menu_div {
    background-color: #FFFFFF;
    border:1px solid black;
    width: 900px;
}

.menu_div a:link {color:#000000; text-decoration:none;}      /* unvisited link */
.menu_div a:visited {color:#000000; text-decoration:none;}  /* visited link */
.menu_div a:hover {color:#FF0000; text-decoration:none;}  /* mouse over link */
.menu_div a:active {color:#FF0000; text-decoration:none;}  /* selected link */ 
```

# c# - 删除字符串中的字符，除了最后一个

> ID：13843933
> 
> 赞同：2
> 
> 时间：2012-12-12T16:14:03.727
> 
> 标签：c#, string, linq, optimization

我正在尝试删除字符“。” 来自除最后一次出现的字符串；例如字符串

```
12.34.56.78 
```

应该变成

```
123456.78 
```

我正在使用这个循环：

```
while (value != null && value.Count(c => c == '.') > 1)
 {
   value = value.Substring(0, value.IndexOf('.')) + value.Substring(value.IndexOf('.') + 1);
 } 
```

我想知道是否有更简洁的方法（也许使用 linq？）在没有显式循环的情况下执行此操作？

（我知道有一个非常相似的问题，但是关于 perl 并且事情完全不同）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T16:21:42.770

```
int lastIndex = value.LastIndexOf('.');
if (lastIndex > 0)
{
    value = value.Substring(0, lastIndex).Replace(".", "")
        + value.Substring(lastIndex);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T16:23:31.567

也许是`string`方法和 Linq 的混合：

```
string str = "12.34.56.78";
Char replaceChar = '.';
int lastIndex = str.LastIndexOf(replaceChar);
if (lastIndex != -1)
{
    IEnumerable<Char> chars = str
        .Where((c, i) => c != replaceChar || i == lastIndex);
    str = new string(chars.ToArray());
} 
```

[**演示**](http://ideone.com/Mk30y8)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T16:16:46.590

我会这样做：

1.  搜索最后一个“。” ;
2.  子字符串 [0 .. indexOfLastDot] ;
3.  删除任何“。” 子串的
4.  将子字符串与原始字符串的其余部分连接起来，[indexOfLastDot ..剩余]

或者

1.  搜索最后一个“。”
2.  对于字符串的每个枚举字符
3.  如果它是一个“。” 并且 i ≠ indexOfLastDot，删除它

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T16:19:45.853

```
 var splitResult = v.Split(new char[] { '.' }).ToList();
  var lastSplit = splitResult.Last();
  splitResult.RemoveAt(splitResult.Count - 1);
  var output = string.Join("", splitResult) + "." + lastSplit; 
```

我会那样做。最简洁的方式并不总是最短的方式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-12T16:24:12.607

像这样的东西应该可以解决问题。“好”与否是另一回事。另请注意，没有错误检查。可能想要检查 null 或空字符串，并且该字符串中至少有一个`"."`。

```
string numbers = "12.34.56.78";
var parts = String.Split(new char [] {'.'});
string newNumbers = String.Join("",parts.Take(parts.Length-1)
                                        .Concat(".")
                                        .Concat(parts.Last()); 
```

我并没有声称这对于长字符串会有很好的性能特征，但它确实使用了 Linq ;-)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-12T16:25:19.497

您不必使用循环：

```
 //string val = "12345678";
    string val = "12.34.56.78";
    string ret = val;
    int index = val.LastIndexOf(".");
    if (index >= 0)
    {
        ret = val.Substring(0, index).Replace(".", "") + val.Substring(index);
    }
    Debug.WriteLine(ret); 
```

# performance - VMware：一个或多个虚拟服务器上的应用程序性能

> ID：13843935
> 
> 赞同：-1
> 
> 时间：2012-12-12T16:14:05.593
> 
> 标签：performance, virtualization

我正在评估一个系统架构，其中应用程序被拆分在同一硬件上的两个虚拟服务器上。

原因是如果系统的某个部分运行在自己的虚拟服务器上，整个系统的性能会更好。它是否正确？

我认为如果进程在相同的硬件上运行，与在一台虚拟服务器上安装相比，两台服务器上的拆分会给通信带来开销。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T16:08:11.390

为了确保，听起来您或多或少地在问 2 个（或更多）虚拟机如何相互“竞争”，以及在它们上运行的进程分离如何影响整体性能？

**快速回答：**简而言之，好消息是，如果您愿意，您可以非常严格地控制虚拟机“争夺”资源的方式。这将防止 VM 在 RAM、CPU 等方面相互竞争，并可以提高应用程序的整体性能。我认为您有兴趣了解两个主要内容：VM 预留/限制/共享和资源池。链接包括在下面。

**深入回答：**一般来说，分离应用程序的功能是一个好主意。在不同机器上运行的 Web 服务器和 DB 服务器就是一个很好的例子。我不特别了解您的应用程序，但如果它还没有利用多线程（以启用多个处理器的使用），那么将您的应用程序分离到两个服务器上可能真的有助于提高性能。原因如下：

从某种意义上说，VM 了解它们正在运行的硬件。这意味着他们知道可供他们使用的 CPU/RAM/磁盘空间。因此，假设您的 ESX 服务器有 4 个 CPU 和 16 GB 的 RAM。创建 VM 时，您可以自由地为每台服务器分配 2 个 CPU 和 8 GB RAM，或者您可以更改设置以满足您的需要。在 VMware 中，您可以通过使用称为限制、共享和预留的东西来保证一定的资源级别。可以在此处找到有关它们的文档[http://pubs.vmware.com/vsphere-4-esx-vcenter/index.jsp?topic=/com.vmware.vsphere.vmadmin.doc_41/vsp_vm_guide/configuring_virtual_machines/t_allocate_cpu_resources.html](http://pubs.vmware.com/vsphere-4-esx-vcenter/index.jsp?topic=/com.vmware.vsphere.vmadmin.doc_41/vsp_vm_guide/configuring_virtual_machines/t_allocate_cpu_resources.html)，在其他地方。这些保留将帮助您确保某个 VM 始终可以访问某个级别的资源，并防止 VM 引起对 RAM、CPU 等的争用。VMware 还使用称为“资源池”的东西提供了这个想法的另一个扩展，它是可以为某些机器预留的 RAM、CPU 等池。您可以在此处阅读它们：http: //pubs.vmware.com/vsphere-4-esx-vcenter/index.jsp?topic=/com.vmware.vsphere.resourcemanagement.doc_41/managing_resource_pools/ [c_why_use_resource_pools.html](http://pubs.vmware.com/vsphere-4-esx-vcenter/index.jsp?topic=/com.vmware.vsphere.resourcemanagement.doc_41/managing_resource_pools/c_why_use_resource_pools.html)。

# box2d - 如何在 libgdx 中绘制自定义多边形？

> ID：13843936
> 
> 赞同：1
> 
> 时间：2012-12-12T16:14:11.667
> 
> 标签：box2d, draw, libgdx

如何从 libgdx 中的顶点绘制自定义多边形？我想绘制任何 box2d 实体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:57:33.367

我之前问过一个类似的问题：

[如何使用 libgdx 中的简单纹理绘制自定义形状？](https://stackoverflow.com/questions/10547897/how-to-draw-custom-shapes-using-a-simple-texture-in-libgdx)

然后我使用 Mesh 类来绘制自定义形状。

# c# - 为产品激活生成序列号

> ID：13843937
> 
> 赞同：7
> 
> 时间：2012-12-12T16:14:15.973
> 
> 标签：c#, asp.net-mvc-3

首先，这不是关于为其他产品生成序列号的问题。我**不**打算“破解”其他产品。

以下是我的要求：

*   我想生成一个标准外观的序列号：AILU7-ABCDE-54321-1234-AFCK-17UDF
*   我需要一些流程来验证该序列号是否“有效”——这部分不必**非常**复杂。即，如果所有数字总和的值大于 X - 我可以接受，但如果有解决方案可以为我处理这种复杂性，我会很乐意使用它们。
*   验证序列号的过程**不能**是服务器端。即，我无法向外部 Web 服务器发出请求以验证序列号是否有效。
*   我需要一些方法从序列号中提取元数据。即，在我验证序列号正确后，我需要能够从中读出一些值：“用户限制”、“到期日期”等......
*   序列号的验证将通过 ASP.NET MVC 3 应用程序完成。不过，序列号的生成不必**这样**做。

我不是在寻找能够满足所有这些要求的灵丹妙药，而是或多或少地寻找一些可以帮助我入门的文档或现有库的链接。我见过的唯一库是[XHEO DeployLX](http://xheo.com/products/copy-protection)库；这对我的需要来说太过分了。

您能否向我提供任何可以为我指明正确方向的信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T16:17:11.543

您是否查看[过 Brandon Staggs 关于这件事的文章](http://www.brandonstaggs.com/2007/07/26/implementing-a-partial-serial-number-verification-system-in-delphi/)？

在 Delphi 中，但理论适用于任何语言。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T16:22:17.590

那里有很多库，其中一个是[http://skgl.codeplex.com/](http://skgl.codeplex.com/)和[http://softwareprotector.codeplex.com/](http://softwareprotector.codeplex.com/)，还附带一个 nuget 包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-27T11:04:32.240

使用串行密钥，您需要考虑一些事情。

我在狩猎过程中看到了指向使用简单 Guid.NewGuid(); 的链接。方法，然后对字符串进行一些转换以制作自定义样式的序列键。这很容易做到，但产品所有者有责任跟踪数据库中的序列号，最终有人可能会随机找到通过使用 Guid.NewGuid() 工作的序列号；他们自己。如果地球上的每个人都同时开始生成 Guid，那么碰撞的可能性就变得很大。

有一种解决方案可以通过在 Guid.NewGuid() 之上使用更复杂的算法来降低碰撞事件的可能性；

为此，我倾向于使用：

1.  Guid.NewGuid(); （仅前 16 个字符，减去 -（连字符）
2.  一个不断增加或变化的值。（随机数）（一个 int 可以工作：i++ 等）
3.  您将在网络中保持私密和安全的秘密盐。
4.  一个困难因素：从比特币中借用这个原理。

好的，让我们想象一下我正在从 guid 中获取前 16 位数字。然后我将它与 Nonce 和秘密盐结合起来，然后使用 SHA256 从值中派生散列。然后我可以使用难度系数来确定哈希是否以我想要的 0 或其他字符的数量开头。

例如：如果哈希前面有六个 0，那么我将所有数据都保存下来，因为我刚刚找到了一个相当安全的串行密钥。

当我的意思是安全时，我的意思是我找到了一个序列，当它与产品密钥（Nonce）结合使用，然后与秘密 Salt 一起使用时，它会产生一个符合我的生产标准的哈希。

下面是一些示例代码 - 做得非常粗糙，因为我很无聊。

这个想法是您的应用程序可以将产品密钥和序列号发送到激活服务器。服务器知道秘密盐。然后它返回 true 或 false 以确定生成的哈希是否满足安全要求。如果不是：序列号无效，或者对提供的密钥无效。如果它确实有所需的 0：它是一个有效的序列。

```
 Guid theGuid;
    string Hash = "";
    int iAccess = 0;
    string PrivateSalt = "Alpha";
    string SourceString = "";
    string guidString;
    while (true)
    {
        theGuid = Guid.NewGuid();
        guidString = theGuid.ToString().Replace("-", "").Substring(0,16);
        SourceString = guidString + "|" + iAccess.ToString() + "|" + PrivateSalt;
        byte[] data = Encoding.Default.GetBytes(SourceString);
        Hash = Crypto.GenerateSHA256(data);
        if (Hash.StartsWith(GetDiff()))
        {
            break;
        }

        iAccess++;
    }
    Console.WriteLine(SourceString+" Gives hash "+Hash);
    string s1, s2, s3, s4;
    s1 = guidString.Substring(0, 4);
    s2 = guidString.Substring(4, 4);
    s3 = guidString.Substring(8, 4);
    s4 = guidString.Substring(12, 4);
    string serial = s1 + "-" + s2 + "-" + s3 + "-" + s4;

    Console.WriteLine(serial + " :" + SourceString + " Gives hash " + Hash); 
```

GetDiff() 基本上只是一个字符串：“000000”；

此方法的示例输出如下所示：

```
d9c9-f6f0-45be-427a :d9c9f6f045be427a|15135|Alpha Gives hash    000000f718f69c8389d496e01d1e992946fe1b8cf72bc4200a7a2b800b40aa0a
fe49-70b9-08d8-40df :fe4970b908d840df|9096414|Alpha Gives hash  000000e29cfccfb54d1e7edc816feb084f1a2cd11a20c3132a965f9048fc9bf4
7f58-0636-c853-4f0a :7f580636c8534f0a|12297217|Alpha Gives hash 0000007bb44f39a964bbe985885451c3dc0e037fcd12951261404e48819bf89b
6f65-82d3-d95b-4882 :6f6582d3d95b4882|15064854|Alpha Gives hash 000000f1a3bed79e441108cfd26d8733d3fc10f5cd66d234ed35fe2b769663a3
edee-b8b7-9f6f-40ab :edeeb8b79f6f40ab|17782415|Alpha Gives hash 000000b70b96e7b008a96a860efc572fe868154ae81e67b9397249a51f2db71c
0948-4bb3-7de4-4054 :09484bb37de44054|21105690|Alpha Gives hash 000000ec7317eccd5fd9bb701759a2b0e77d37099347d9d665f4b492a69ca3ec
bbf5-5119-bf4e-463c :bbf55119bf4e463c|21715642|Alpha Gives hash 000000a134c886d01606da83cd5e8f672fddb6aa061968e9f08202c781514b16
80f6-c9c5-0ddf-436d :80f6c9c50ddf436d|26450310|Alpha Gives hash 00000092305b2956381c23dacba5b8ff9a37ab994148b37677732dc2a0650386
0a4f-143b-b5f5-48ca :0a4f143bb5f548ca|33691865|Alpha Gives hash 00000054ecdae57c6ec686b6084faf68ae49a78f7c07bbe8e51357d76de63870 
```

您可以通过在前缀中添加更多的 0 来增加难度。这意味着查找串行组合将花费更长的时间，但也使其更加安全。

显然，您会将这些数据组合存储在某个地方，因此在激活期间，您可以比较序列号和产品密钥（Nonce）。

在我的示例中：我正在使用序列密钥（16 位）、递增 int 和单词 Alpha 来表示秘密盐。

这使得生成串行密钥很慢且 CPU 密集，但验证它们的速度非常快。

```
IsSerialValid("edee-b8b7-9f6f-40ab", 17782415);

public bool IsSerialValid(string serialCode, int ProductCode)
        {
            string SourceString = serialCode.Replace("-", "") + "|" + ProductCode.ToString() + "|" + "Alpha";
            byte[] data = Encoding.Default.GetBytes(SourceString);
            string Hash = Crypto.GenerateSHA256(data);
            if (Hash.StartsWith(GetDiff()))
            {
                return true;
            }
            return false;
        } 
```

秘密 Salt 可能是一个代码短语，它映射到您可能正在开发的不同产品。这允许您跨多个产品线重复使用产品密钥 (Nonce) 值。

# typescript - 扩展具有不同名称的模块

> ID：13843938
> 
> 赞同：0
> 
> 时间：2012-12-12T16:14:17.313
> 
> 标签：typescript

我们正在将我们的一些 javascript 转换为打字稿。我们已经将一些现有功能提取到另一个由我们维护的 javascript 库中，例如：

```
Framework.utils = {
    utilFnOne: function ()...,
    utilFnTwo: function ()...,
    utilFnThree: function ()...,
} 
```

我们还有一些在非框架代码中使用的实用程序，如下所示：

```
Current.utils = Framework.utils;  // Extend the framework's utils
Current.utils.utilFnFour = function()...;
Current.utils.utilFnFive = function()...; 
```

**打字稿**

我们可以为框架库创建定义，如下所示：

```
declare module Framework.utils {
    export function utilFnOne();
    export function utilFnTwo();
    export function utilFnThree();
} 
```

我们可以通过执行以下操作为 Current.utils 创建一个打字稿定义：

```
module Current.utils {
     export function utilFnFour() {}
     export function utilFnFive() {}
     export class StringUtils { }
} 
```

如果我们能做这样的事情就好了：

```
module Current.utils extends Framework.utils { .... } 
```

所以当我们这样做时，智能感知会显示来自 Framework 和 Current 的成员

```
Current.utils. 
```

**编辑 - 分辨率**

我接受了 Ryan 的想法并稍作修改

*框架.d.ts*

```
declare module Framework {
    export var util: _utilImpl;
    export class _utilImpl {
        utilFnOne(a: string) : string;
    }
} 
```

*当前.ts*

```
module Current {
    export var util = new _utilImpl();
    export class _utilImpl extends Framework._utilImpl {
        utilFnTwo(b: number) : number;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:43:55.857

`interface`您可以使用而不是重构它`module`以获得所需的行为：

```
interface FrameworkUtils {
    utilFnOne(s: string);
    utilFnTwo(s: string);
}

declare module Framework {
    export var utils: FrameworkUtils;   
}

Framework.utils.utilFnOne('');

/// ... later

interface CurrentUtils extends FrameworkUtils {
    utilFnFour();
}

declare module Current {
    export var utils: CurrentUtils; 
}

Current.utils.utilFnOne('');
Current.utils.utilFnFour(); 
```

# excel - Excel 1004 - 域用户权限是我问题的原因吗？

> ID：13843946
> 
> 赞同：0
> 
> 时间：2012-12-12T16:14:36.467
> 
> 标签：excel, vba

我们正在使用一个中央 Makro.xlm 文件和一些以这种方式访问​​ Makro 的工作簿。

```
Workbooks.Open Makro_Path & Makro_Nam, ReadOnly:=True
Application.Run Makro_Nam & "!MakroIni", WbTyp 
```

第一行工作正常 - Makro 工作簿已正确打开。第二行给我一个 1004 错误：找不到 Makro 或所有 Makro 都被禁用。

有趣的部分是：

我们有 2 个完全不同的域/网络访问这些文件。在我们的旧网络中，一切正常，新网络会产生这些麻烦。

通常这些文件存储在中央服务器上，但出于测试目的，它们可以在本地运行——结果相同。

有谁知道，在较新网络中的 PC 上，makros 已正确加载，但无法执行？是否有可能某些全局用户权限会干扰 Excel 宏的执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:35:50.567

问题是新网络中的 64 位版本的 Excel。

# internet-explorer - HTML 与 IE 上的服务器不同

> ID：13843950
> 
> 赞同：0
> 
> 时间：2012-12-12T16:14:52.747
> 
> 标签：internet-explorer

我创建了一个 asp.net 页面。

*   在IE上测试本地，工作。
*   在Firefox上测试本地，工作。

我把我的服务器

*   在Firefox上测试本地，工作。
*   在 Chrome 上测试本地，工作。
*   在 IE 上测试本地，设计不起作用。东西位置不对。

在服务器页面上使用 Firefox 的另存为。

*   在 firefox 上测试，html 保存的页面工作。
*   在 IE 上测试，html 保存的页面不起作用。东西位置不对。

在服务器页面上使用 IE 的另存为

*   在 firefox 上测试，html 保存的页面工作。
*   在 IE 上测试，html 保存的页面不起作用。东西位置不对。

在本地页面上使用 IE 的另存为

*   在 firefox 上测试，html 保存的页面工作。
*   在 IE 上测试，html 保存的页面不起作用。东西位置不对。

为什么它在 IE 上本地工作？

我应该在我的页面上检查什么（可能是编码、标题、...）？

# cocos2d-iphone - cocos2d: CocosBuilder: 如何获取动画关键帧的位置

> ID：13843954
> 
> 赞同：1
> 
> 时间：2012-12-12T16:15:37.117
> 
> 标签：cocos2d-iphone

在我的应用程序中，我想在路径上从点到点移动对象（基于某些事件）。我想从 cocosbuilder 文件（.ccbi）中提取这些位置。那么如何提取数组中的位置呢？

一种方法是将精灵放在位置上并使用变量分配它们，例如：spr1，spr2 spr3

并取代码中的 spr1.position 。

另一种方法是在 cocos-builder 中制作位置动画。现在在代码中提取这些关键帧位置。所以我的问题是：“有没有办法从动画关键帧中提取位置？”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:47:43.453

这是一个适用于 CocosBuilder 2.1 的解决方案。在 CCBAnimationManager 类中添加以下函数：

```
- (void)enumeratePropertiesForSequence:(NSString*)name Block:(BOOL(^)(CCNode *node, CCBSequenceProperty *seqProp))block
{
    int seqId = [self sequenceIdForSequenceNamed:name];
    if (seqId == -1)
    {
        NSLog(@"Sequence %@ couldn't be found",name);
        return;
    }
    for (NSValue* nodePtr in nodeSequences)
    {
        CCNode* node = [nodePtr pointerValue];

        NSDictionary* seqs = [nodeSequences objectForKey:nodePtr];
        NSDictionary* seqNodeProps = [seqs objectForKey:[NSNumber numberWithInt:seqId]];

        // Nodes that have sequence node properties
        for (NSString* propName in seqNodeProps)
        {
            CCBSequenceProperty* seqProp = [seqNodeProps objectForKey:propName];

            if (!block(node, seqProp))
                return;
        }
    }
} 
```

使用这个枚举器，您可以访问所有可用的属性，例如，如果您只对职位感兴趣，那么：

```
#import "MyClass.h"
#import "CCBAnimationManager.h"
#import "CCBSequenceProperty.h"
#import "CCBKeyframe.h"
#import "CCNode+CCBRelativePositioning.h"

@implementation MyClass
-(void)fn
{
    CCBAnimationManager* animationManager = self.userObject;

    BOOL(^block)(CCNode *node, CCBSequenceProperty *seqProp) =
    ^BOOL(CCNode *node, CCBSequenceProperty *seqProp)
    {
        NSLog(@"Node tag %d, Prop name [%@], type %d", node.tag, seqProp.name, seqProp.type);

        for (CCBKeyframe *kf in seqProp.keyframes)
        {
            if ([seqProp.name isEqualToString:@"position"])
            {
                id value = kf.value;

                // Get relative position
                float x = [[value objectAtIndex:0] floatValue];
                float y = [[value objectAtIndex:1] floatValue];

                // Get position type
                int type = [[[self.userObject baseValueForNode:node propertyName:seqProp.name] objectAtIndex:2] intValue];

                CGSize containerSize = [self.userObject containerSize:node.parent];

                CGPoint absPos = [node absolutePositionFromRelative:ccp(x,y) type:type parentSize:containerSize propertyName:seqProp.name];

                NSLog(@"--- relative position (%f, %f), type %d, abs position (%f, %f)", x, y, type, absPos.x, absPos.y);
            }
        }

        return YES; // YES to continue, NO to stop enumeration
    };

    [animationManager enumeratePropertiesForSequence:@"MySequence" Block:block];
}

@end 
```

下面是如何实例化 MyClass 并调用枚举器：

```
CCNode *myclass = [CCBReader nodeGraphFromFile:@"MyClass.ccbi"];
[myclass fn]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T09:50:07.697

我认为这是可能的，虽然我自己没有这样做。如果您查看 ccb 文件，您会注意到它只是一个 XML 文件。而且这个 XML 文件只存储关键帧信息（哪个关键帧发生在什么时候）。

[ccb 文件的](https://github.com/cocos2d/CocosBuilder/blob/master/Documentation/X3.%20CCB%20File%20Format.md)结构有据可查。您可能想看看如何获​​取关键帧信息。

# java - 在 Java 中从 XML 文件中删除节点

> ID：13843955
> 
> 赞同：0
> 
> 时间：2012-12-12T16:15:37.903
> 
> 标签：java, xml, dom

我有一个格式如下的 XML 文件：

```
<state>
  <image>
      <imageUrl>./testImages/testimage.png</imageUrl>
      <perspective id="0">
          <zoomLevel>1.0</zoomLevel>
          <offsetX>0.0</offsetX>
          <offsetY>0.0</offsetY>
      </perspective>
      <perspective id="1">
          <zoomLevel>1.0</zoomLevel>
          <offsetX>0.0</offsetX>
          <offsetY>0.0</offsetY>
      </perspective>
  </image>
</state> 
```

在那个文件中，我有多个图像节点，但这不是重点。我想要的是能够从文档中删除 < image > 节点（及其所有子节点）。

到目前为止，我有以下代码：

```
private void updateImageElement(Element image, Model model) throws SAXException, IOException, ParserConfigurationException{
    Element rootElement = doc.getDocumentElement();

    rootElement.removeChild(image);
    image.getParentNode().removeChild(image);
} 
```

“rootElement.removeChild(image);” 行抛出以下异常：

```
org.w3c.dom.DOMException: NOT_FOUND_ERR: An attempt is made to reference a node in a context where it does not exist. 
```

这很奇怪，因为如果我打印“rootElement”，它会显示“状态”，它是图像的父节点。

然后我尝试了以下行 ("image.getParentNode().removeChild(image))。这不会引发异常，但也没有任何内容被删除。

如果我打印那行，它还说父节点是“状态，所以我什至无法弄清楚这两行之间的区别是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:20:53.947

听起来您正在为该文档使用 DOM 的两个副本，`doc`一个副本`image`来自另一个副本。您没有显示负责设置`doc`and的代码`image`，但您需要确保它们来自同一节点树。

# iis - ApplicationPoolIdentity 与普通用户浏览器浏览有什么不同？

> ID：13843961
> 
> 赞同：0
> 
> 时间：2012-12-12T16:16:06.870
> 
> 标签：iis, extjs, iis-7.5, extjs3, applicationpoolidentity

我的 Web 服务器运行一个 exe 文件（第 3 方），它捕获 Web 浏览器的屏幕（使用 IE7/IE9 的模拟器）。屏幕包含显示两列的 java 脚本 Extjs 控件。每列包含一个图像。

1）当我的用户将 exe 运行到此 url 时，我按顺序获取图像（1 列，2 列） 2）当 Web 服务器运行 exe（AplicationPoolIdentity）时，我按错误顺序获取图像（2 列，1 列）

可能导致此行为的两个用户（我的用户与 ApplicationPoolIdentity）之间可能有什么区别？

我运行 IIS7.5 Windows 7 64bit extjs 3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:11:45.510

应用程序池的用户是在 Windows 将本地化设置设置为从右到左的语言时创建的，这会导致 java 脚本控件改变方向。

要删除设置，必须手动从 c:\users 目录中删除应用程序池用户，然后才能重新创建应用程序池。（删除池没有帮助，用户数据保留在 c:\users 中）

# asp-classic - Microsoft VBScript 运行时错误“800a01a8”

> ID：13843962
> 
> 赞同：0
> 
> 时间：2012-12-12T16:16:08.143
> 
> 标签：asp-classic, vbscript

我通常是一名 Java 开发人员，但被要求“调整”我的组织拥有的一个小型 ASP 应用程序。它基本上接受用户输入到表单中，然后通过电子邮件发送数据。在我的 sendmail.asp 文件中，我设置了一个会话属性 ( `Session("emailText") = message`)，然后重定向到页面 printResults.asp。

该页面基本上是一个 HTML 页面，在第 21 行有一行 VBScript 代码：`<%Response.Write(Session.Contents("emailText")) %>`。

这一切都适用于我的本地 IIS 服务器，但是当我将它部署到主机服务器进行测试和演示时，我收到了这个错误：

```
Microsoft VBScript runtime 
error '800a01a8' 
Object required: '' 
/sub3/printResults.asp, line 21 
```

由于我是 ASP 新手，我不知道为什么这会在本地工作，但不能在主机服务器上工作。任何想法或建议都会很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:57:48.093

会话状态是否可能在 IIS 或代码的其他地方被禁用？

当您重定向到 printResults.asp 时，您是否停留在同一个域和子域中（域/子域之间不会维护会话状态）而不是在 HTTP/HTTPS 之间切换（会话可能已设置为仅 HTTP）？

# entity-framework - 实体框架错误 addobject Store 更新、插入或删除语句影响了意外的行数 (0)

> ID：13843967
> 
> 赞同：0
> 
> 时间：2012-12-12T16:16:22.173
> 
> 标签：entity-framework, c#-4.0, entity-framework-4, dbcontext

当我`AddObject`对我的上下文进行操作时，我收到了这个错误。我一直在环顾四周，但这里的大多数错误都是由于将状态更改为 modified 引起的，这是一个更新/附加功能。

但我根本不想附加，我在声明一个新实例后在线

```
Calendar calendar  = new Calendar { // stuff.... };

context.Calendars.AddObject(calendar);
context.SaveChanges(); 
```

将实例插入上下文。我尝试添加更改状态行

```
context.ObjectStateManager.GetObjectStateEntry(calendar).ChangeState(System.Data.EntityState.Added); 
```

但我仍然得到错误。

# angularjs - Angular JS 打破 ForEach

> ID：13843972
> 
> 赞同：264
> 
> 时间：2012-12-12T16:16:39.023
> 
> 标签：angularjs, javascript-framework

我有一个角度 foreach 循环，如果我匹配一个值，我想从循环中中断。以下代码不起作用。

```
angular.forEach([0,1,2], function(count){
  if(count == 1){
    break;
  }
}); 
```

我怎样才能得到这个？

* * *

## 回答 #1

> 赞同：302
> 
> 时间：2013-10-17T11:08:46.703

`angular.forEach`循环不能在条件匹配时中断。

我个人的建议是使用**NATIVE FOR**循环而不是`angular.forEach`.

NATIVE FOR 循环比其他 for 循环快**90%左右。**

![for loop break , for loop 测试结果](../Images/a5bafbc09dd9fe2a99d5949db3a0ef2b.png)

**在角度使用 FOR 循环：**

```
var numbers = [0, 1, 2, 3, 4, 5];

for (var i = 0, len = numbers.length; i < len; i++) {
  if (numbers[i] === 1) {
    console.log('Loop is going to break.'); 
    break;
  }
  console.log('Loop will continue.');
} 
```

* * *

## 回答 #2

> 赞同：275
> 
> 时间：2012-12-12T16:45:21.597

没有办法做到这一点。请参阅[https://github.com/angular/angular.js/issues/263](https://github.com/angular/angular.js/issues/263)。根据您所做的事情，您可以使用布尔值来避免进入循环体。就像是：

```
var keepGoing = true;
angular.forEach([0,1,2], function(count){
  if(keepGoing) {
    if(count == 1){
      keepGoing = false;
    }
  }
}); 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2015-07-07T12:31:45.827

请使用 ForEach 的部分或所有实例，

```
Array.prototype.some:
some is much the same as forEach but it break when the callback returns true

Array.prototype.every:
every is almost identical to some except it's expecting false to break the loop. 
```

一些例子：

```
var ary = ["JavaScript", "Java", "CoffeeScript", "TypeScript"];

ary.some(function (value, index, _ary) {
    console.log(index + ": " + value);
    return value === "JavaScript";
}); 
```

每个示例：

```
var ary = ["JavaScript", "Java", "CoffeeScript", "TypeScript"];

ary.every(function(value, index, _ary) {
    console.log(index + ": " + value);
    return value.indexOf("Script") > -1;
}); 
```

查找更多信息
[http://www.jsnoob.com/2013/11/26/how-to-break-the-foreach/](http://www.jsnoob.com/2013/11/26/how-to-break-the-foreach/)

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-11-01T23:06:10.827

使用数组一些方法

```
 var exists = [0,1,2].some(function(count){
      return count == 1
 }); 
```

存在将返回 true，您可以将其用作函数中的变量

```
if(exists){
    console.log('this is true!')
} 
```

[数组一些方法 - Javascript](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-12-12T16:33:55.263

据我所知，Angular 不提供这样的功能。您可能需要为此使用下划线`find()`函数（它基本上是一个 forEach，一旦函数返回 true，它就会跳出循环）。

[http://underscorejs.org/#find](http://underscorejs.org/#find)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-06-04T04:59:55.063

如果您将 jQuery（因此不是 jqLit​​e）与 AngularJS 结合使用，您可以使用 $.each 进行迭代 - 它允许基于布尔返回值表达式进行中断和继续。

JSF中：

[http://jsfiddle.net/JEcD2/1/](http://jsfiddle.net/JEcD2/1/)

Javascript：

```
var array = ['foo', 'bar', 'yay'];
$.each(array, function(index, element){
    if (element === 'foo') {
        return true; // continue
    }
    console.log(this);
    if (element === 'bar') {
        return false; // break
    }
}); 
```

**笔记：**

尽管使用 jQuery 还不错，但 MDN 推荐使用原生[Array.some](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some)或[Array.every](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/every)函数，您可以在原生[forEach](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)文档中阅读：

> “没有办法停止或中断 forEach 循环。解决方案是使用 Array.every 或 Array.some”

以下示例由 MDN 提供：

数组.一些：

```
function isBigEnough(element, index, array){
    return (element >= 10);
}
var passed = [2, 5, 8, 1, 4].some(isBigEnough);
// passed is false
passed = [12, 5, 8, 1, 4].some(isBigEnough);
// passed is true 
```

数组.每个：

```
function isBigEnough(element, index, array){
    return (element >= 10);
}
var passed = [12, 5, 8, 130, 44].every(isBigEnough);
// passed is false
passed = [12, 54, 18, 130, 44].every(isBigEnough);
// passed is true 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-07-15T16:50:16.093

具体来说，你可以退出一个`forEach`循环，在任何地方都可以抛出异常。

```
try {
   angular.forEach([1,2,3], function(num) {
      if (num === 2) throw Error();
   });
} catch(e) {
    // anything
} 
```

但是，最好使用其他库或实现自己的函数，`find`在这种情况下是一个函数，因此您的代码是最高级的。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2017-05-15T20:06:22.830

试试这个作为休息；

```
angular.forEach([0,1,2], function(count){
  if(count == 1){
    return true;
  }
}); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-09-11T14:45:33.917

正如其他答案所述，Angular 不提供此功能。但是 jQuery 可以，如果你已经加载了 jQuery 和 Angular，你可以使用

```
jQuery.each ( array, function ( index, value) {
    if(condition) return false; // this will cause a break in the iteration
}) 
```

见[http://api.jquery.com/jquery.each/](http://api.jquery.com/jquery.each/)

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-10-01T04:01:59.003

通常没有办法打破javascript中的“每个”循环。通常可以做的是使用“短路”方法。

```
 array.forEach(function(item) {
      // if the condition is not met, move on to the next round of iteration.
      if (!condition) return;

      // if the condition is met, do your logic here
      console.log('do stuff.')
    }
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-09-23T11:13:07.023

*`break`在角度 forEach 中是不可能实现的，我们需要修改 forEach 来做到这一点。*

```
$scope.myuser = [{name: "Ravi"}, {name: "Bhushan"}, {name: "Thakur"}];  
                angular.forEach($scope.myuser, function(name){
                  if(name == "Bhushan") {
                    alert(name);
                    return forEach.break(); 
                    //break() is a function that returns an immutable object,e.g. an empty string
                  }
                }); 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-06-23T08:32:51.040

你可以使用这个：

```
var count = 0;
var arr = [0,1,2];
for(var i in arr){
   if(count == 1) break;
   //console.log(arr[i]);
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-08-07T07:31:39.613

```
var ary = ["JavaScript", "Java", "CoffeeScript", "TypeScript"];
var keepGoing = true;
ary.forEach(function(value, index, _ary) {
    console.log(index)
    keepGoing = true;
    ary.forEach(function(value, index, _ary) {
        if(keepGoing){ 
            if(index==2){
                keepGoing=false;
            }
            else{
                console.log(value)
            }

        }      
    });
}); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-08-07T21:04:04.030

```
$scope.arr = [0, 1, 2];  
$scope.dict = {}
for ( var i=0; i < $scope.arr.length; i++ ) {
    if ( $scope.arr[i] == 1 ) {
        $scope.exists = 'yes, 1 exists';
        break;
    }
 }
 if ( $scope.exists ) {
     angular.forEach ( $scope.arr, function ( value, index ) {
                      $scope.dict[index] = value;
     });
 } 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-09-02T04:43:39.710

我宁愿通过返回来做到这一点。将循环部分放在私有函数中，并在您想中断循环时返回。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-12-29T14:24:49.957

这个例子有效。尝试一下。

```
var array = [0,1,2];
for( var i = 0, ii = array.length; i < ii; i++){
  if(i === 1){
   break;
  }
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-01-19T12:04:49.340

我意识到这很旧，但是数组过滤器可以满足您的需要：

```
var arr = [0, 1, 2].filter(function (count) {
    return count < 1;
}); 
```

然后可以运行`arr.forEach`其他数组函数。

我意识到，如果你打算完全减少循环操作，这可能不会达到你想要的效果。为此，您最好使用`while`.

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-01-18T07:21:09.013

我会使用`return`而不是`break`.

```
angular.forEach([0,1,2], function(count){
  if(count == 1){
    return;
  }
}); 
```

奇迹般有效。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-08-01T05:34:10.127

使用 Return 来中断循环。

```
angular.forEach([0,1,2], function(count){
  if(count == 1) {
    return;
  }
}); 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-02-04T05:11:32.117

```
onSelectionChanged(event) {
    let selectdata = event['api']['immutableService']['gridOptionsWrapper']['gridOptions']['rowData'];
    let selected_flag = 0;

    selectdata.forEach(data => {
      if (data.selected == true) {
        selected_flag = 1;
      }
    });

    if (selected_flag == 1) {
      this.showForms = true;
    } else {
      this.showForms = false;
    }
} 
```

* * *

## 回答 #21

> 赞同：-2
> 
> 时间：2015-06-25T15:35:20.470

只需添加 $index 并执行以下操作：

```
angular.forEach([0,1,2], function(count, $index) {
     if($index !== 1) {
          // do stuff
     }
} 
```

# amazon-web-services - 适用于 .net 的亚马逊冰川 sdk

> ID：13843974
> 
> 赞同：2
> 
> 时间：2012-12-12T16:16:44.157
> 
> 标签：amazon-web-services, amazon-glacier

我已经下载了 .net 的亚马逊库，并且正在使用冰川服务获取保险库列表，但出现以下错误。建议将不胜感激。

> [AmazonGlacierException：签名已过期：20121212T160552Z 现在早于 20121212T160907Z（20121212T161407Z - 5 分钟）] Amazon.Runtime.AmazonWebServiceClient.endOperation（IAsyncResult 结果）+151 Amazon.Glacier.AmazonGlacierClient.ListVaults(ListVaultsRequest listVaultsRequest)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T18:13:17.760

此错误通常是由于您的本地系统时钟关闭超过 5 分钟造成的。如果这是一个持续存在的问题，您可以考虑在您的机器上配置一个 NTP 服务器以保持时间同步。

# javascript - 迭代dom树遍历

> ID：13843980
> 
> 赞同：1
> 
> 时间：2012-12-12T16:16:53.813
> 
> 标签：javascript, jquery, traversal, children, parents

我正在迭代一些 jQuery 供其他人使用。

然而，为了让它工作，我希望向上然后向下遍历 dom 树。这是为了让效果保持在包装 div 内，而不是影响整个页面。（我假设同一个 'wrappingdivclass' 及其内容的多次迭代）

```
<div class="wrappingdivclass" >
  <h4>series name</h4>
     <div class="hoverheaders">
         <p class="hoverheading"><!-- TEXT HERE (FOR INITIAL IMAGE) !-->image</p>
         <p class="hoverheading1"><!-- IMAGE TWO TEXT !-->image</p>
         <p class="hoverheading2"><!-- IMAGE THREE TEXT !-->image</p>
        <p class="hoverheading3"><!-- IMAGE FOUR TEXT !-->image</p>    
     </div>
     <div class="hovercontents">
          <p class="hovercontent">athing</p>
          <p class="hovercontent1">athing</p>
          <p class="hovercontent2">athing</p>
          <p class="hovercontent3">athing</p>
      </div>
</div> 
```

和 jquery（位于外部文件中）这些迭代用于 hoverheading1-3 和 hovercontent1-3

例子：

```
//does not work
jQuery(document).ready(function() {
  jQuery(".hovercontent").show();
  jQuery(".hoverheading").hover(function()
  {
    $(this).parent().children(".hovercontent").show()
    $(this).parent().children(".hovercontent").siblings().hide();
  });
});
//      $(".hovercontent2").siblings().hide();
  });
}); 
```

示例 2：

```
//also does not work
jQuery(document).ready(function() {
  jQuery(".hovercontent1").hide();
  //toggle the componenet with class msg_body
  jQuery(".hoverheading1").hover(function()
   {
    jQuery(this).closest(".hovercontent1").show();
    jQuery(this).closest(".hovercontent1").siblings().hide();
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:42:40.937

你应该保持一致.....要么使用 $ 要么使用 JQuery。你应该避免混合它们......你也可以从使用后代选择器中受益。

$(".wrappingdivclass > .hovercontents > .hovercontent2")

//选择父元素为“hovercontents”的类“hovercontent2”的元素，其父元素为“wrappingdivclass”

$(".wrappingdivclass .hovercontent2")

//选择类“hovercontent2”的元素，它们是“wrappingdivclass”的间接后代。间接意味着它不必是直接孩子......它可能是孙子，等等......

# windows-7 - 运行脚本时预期的标识符代码错误？

> ID：13843981
> 
> 赞同：-4
> 
> 时间：2012-12-12T16:16:53.577
> 
> 标签：windows-7, vbscript, copy, backup

我从 technet 网站上得到了这个脚本，但是当我尝试在我的 Windows 7 机器上执行它时出现错误。我对脚本完全陌生，但我想知道这是否是为较旧的操作系统制作的并且需要针对 Windows 7 进行一些更改？我很确定写它的人测试过它。

我得到如下 Windows 脚本主机错误：行：1 字符：10 错误：预期标识符代码：800A03F2 源：Microsoft VBScript 编译错误。

这是脚本：

```
Function New-BackUpFolder($destinationFolder)
{
 $dte = get-date
 $dte = $dte.tostring() -replace "[:\s/]", "."
 $backUpPath = "$destinationFolder" + $dte
 $null = New-Item -path $backUpPath -itemType directory
 New-Backup $dataFolder $backUpPath $backUpInterval
} #end New-BackUpFolder

Function New-Backup($dataFolder,$backUpPath,$backUpInterval)
{
 "backing up $dataFolder... check $backUppath for your files"
 Get-Childitem -path $dataFolder -recurse |
 Where-Object { $_.LastWriteTime -ge (get-date).addDays(-$backUpInterval) } |
 Foreach-Object { copy-item -path $_.FullName -destination $backUpPath -force }
} #end New-BackUp

# *** entry point to script ***

$backUpInterval = 1
$dataFolder = "C:\fso"
$destinationFolder = "C:\BU\"
New-BackupFolder $destinationFolder 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:23:20.940

这实际上是 Powershell 而不是 VB 脚本。您需要在 Powershell 中运行代码才能使其正常工作。

如果你之前没有做过 PS，这个链接看起来很适合做一个简短的介绍。

[http://www.abstrys.com/files/BeginningPowershellScripting.html](http://www.abstrys.com/files/BeginningPowershellScripting.html)

# ruby-on-rails - 向现有模型添加索引

> ID：13843982
> 
> 赞同：1
> 
> 时间：2012-12-12T16:16:55.873
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

如何使用 rails 命令行向现有模型添加索引？有没有类似的东西`rails generate migration Add_Indexname_to_Tablename field_name:uniq`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T16:25:34.210

我不相信您可以生成完整的迁移。您必须创建迁移并执行`add_index(<table_name>, <column_name>, :unique => true)`.

有关完整详细信息，请参阅[API 文档](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/SchemaStatements.html#method-i-add_index)。

# php - ob_gzhandler 和 CSS 文件的问题

> ID：13843983
> 
> 赞同：1
> 
> 时间：2012-12-12T16:16:58.507
> 
> 标签：php, css, internet-explorer, firefox, caching

我创建了一个页面，该页面将采用 css（或 javascript）文件并将它们作为一个文件输出。我注意到，当我使用以下命令压缩输出时，Firefox 和 Internet Explorer 在任何时候都无法发送“If-Modified-Since”标头`ob_gzhandler`：

```
if(!ob_start("ob_gzhandler")) ob_start(); 
```

初始标头（示例中更改了主机和引用者）：

```
Response Headers
Cache-Control   public, must-revalidate, maxage=4838400
Connection  keep-alive
Content-Encoding    gzip
Content-Length  87281
Content-Type    text/css; charset: UTF-8
Date    Wed, 12 Dec 2012 16:04:32 GMT
Expires Wed, 06 Feb 2013 16:04:32 GMT
Last-Modified   Fri, 12 Oct 2012 13:47:18 GMT
Pragma  public
Server  Apache
Vary    Accept-Encoding
X-Cache MISS from localhost
X-Powered-By    PHP/5.3.13

Request Headers
Accept  text/css,*/*;q=0.1
Accept-Encoding gzip, deflate
Accept-Language en-gb,en;q=0.5
Authorization   Basic cmVkZnVzZTpyM2RmdXMz
Cache-Control   no-cache
Connection  keep-alive
Cookie  PHPSESSID=e73355c49f06a059c22d7f02687dc51b
DNT 1
Host    example.com
Pragma  no-cache
Referer http://example.com/
User-Agent  Mozilla/5.0 (Windows NT 6.1; rv:17.0) Gecko/20100101 Firefox/17.0 
```

刷新时发送以下标头（示例中更改了主机和引荐来源网址）：

```
Response Headers
Cache-Control   public, must-revalidate, maxage=4838400
Connection  keep-alive
Content-Encoding    gzip
Content-Length  87245
Content-Type    text/css; charset: UTF-8
Date    Wed, 12 Dec 2012 16:09:11 GMT
Expires Wed, 06 Feb 2013 16:09:11 GMT
Last-Modified   Fri, 12 Oct 2012 13:47:18 GMT
Pragma  public
Server  Apache
Vary    Accept-Encoding
X-Cache MISS from localhost
X-Powered-By    PHP/5.3.13

Request Headers
Accept  text/css,*/*;q=0.1
Accept-Encoding gzip, deflate
Accept-Language en-gb,en;q=0.5
Authorization   Basic cmVkZnVzZTpyM2RmdXMz
Cache-Control   max-age=0
Connection  keep-alive
Cookie  PHPSESSID=e73355c49f06a059c22d7f02687dc51b
DNT 1
Host    example.com
Referer example.com
User-Agent  Mozilla/5.0 (Windows NT 6.1; rv:17.0) Gecko/20100101 Firefox/17.0 
```

如果我从使用切换`ob_gzhandler`到标准`ob_start()`，那么它可以正常工作并在第二次加载时按预期返回 304。

我认为相关的另一个问题是，从 android 设备查看时，css 既不适用于股票浏览器，也不适用于 Dolphin 浏览器，但适用于 Firefox for Android。这也可以通过禁用`ob_gzhandler`

# objective-c - 以这种方式比较 NSString 的最有效方法是什么

> ID：13843984
> 
> 赞同：1
> 
> 时间：2012-12-12T16:17:01.317
> 
> 标签：objective-c, performance, cocoa-touch, parsing, comparison

我有一个应用程序（Cocoa Touch、Web 浏览器），但是我需要能够将 NSString 与数千个其他字符串进行比较。这是交易。

当 WebView 加载时，我得到了 URL。我需要将此 URL 与数以千计的结果 (27,847) 进行比较。这些数字中的每一个都代表纯文本文件中的一行文本。

我想知道从文本文件中获取数据并将其与 NSString 进行比较的最佳方法。我需要知道 WebView 正在加载的 URL 是否包含这些字符串。

该应用程序需要非常快，所以我不能只解析文本文件中的每一行，将其转换为数组，然后比较每个结果。

请分享你的想法。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:22:08.933

我认为最干净的解决方案是：

*   创建一个可以将工作卸载到服务器并返回响应的 Web 服务。由于听起来您正在构建 Web 保护服务，因此随着时间的推移，您的数据库可能会变得非常庞大，您可以扩展您的服务器以提高其速度。此外，您不希望每次查找数据更改时都更新您的应用程序。

其他选项包括：

*   使用本地 SQLite 数据库。SQL 数据库应该相对较快地执行查找。

*   如果您不想使用任何数据库，您是否尝试过将所有搜索字符串放入 NSDictionary 或 NSMutableDictionary 对象？这样，您只需检查要搜索的字符串的 valueForKey: 是否为 nil。

示例代码：

```
NSDictionary *searchDictionary = [NSDictionary dictionaryWithObjectsAndKeys:
                                  [NSNumber numberWithBool:YES], @"google.com",
                                  [NSNumber numberWithBool:YES], @"yahoo.com",
                                  [NSNumber numberWithBool:YES], @"bing.com",
                                  nil];

NSString *searchString = @"bing.com";

if ([searchDictionary valueForKey:searchString]) {
    // search string found
} else {
    // search string not found
} 
```

注意：如果您希望 NSDictionary 执行不区分大小写的比较，请预先加载所有值小写，并在使用 valueForKey: 时将搜索字符串设为小写。

这可能需要多少内存是另一回事，但我看不出这种比较如何在本地更快地进行。不过，我强烈推荐删除 Web 服务方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:44:52.913

从文件中创建一个字符串并枚举这些行。

```
NSString *stringToCheck;

NSData *bytesOfFile = [NSData dataWithContentsOfFile:@"/path/myfile.txt"];
NSString *fileString = [[NSString alloc] initWithData:bytesOfFile
                                              encoding:NSUTF8Encoding];
__block BOOL foundMatch = NO;

[fileString enumerateLinesUsingBlock:^(NSString *line, BOOL *stop){
    if([stringToCheck isEqualToString:line]){
        *stop = YES;
        foundMatch = YES;
    }
}]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T07:28:27.067

这是正则表达式的工作。获取您要查找/过滤的所有子字符串，对它们进行适当的转义（转义字符，如`[`, `]`, `|`, and`\`等，使用`\`），然后使用`|`. 结果字符串是您的正则表达式，您将其应用于每个 URL。

您*可以*循环遍历一个充满子字符串的整个数组，`rangeOfString:options:`对每个子字符串进行处理，但这是一种缓慢的方式。[为这种事情构建了一个好的正则表达式实现](http://swtch.com/~rsc/regexp/regexp1.html)，我希望[Apple的实现](http://developer.apple.com/library/ios/documentation/Foundation/Reference/NSRegularExpression_Class/)是合适的。

就是说，把它弄清楚。我已经看到一些正则表达式的实现让`|`操作员窒息，所以你要确保 Apple 不是其中之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T16:22:18.147

如果您需要比较文本文件中的每个字符串，您将不得不比较它，无法绕过它。

但是，您可以做的是在后台线程上执行此操作，同时显示一些加载或其他内容，并且不会感觉应用程序卡住了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T16:34:21.583

我建议你`NSDictionary`先试试。您可以将所有 URL 加载到其中，并且在内部它将使用某种哈希表/映射进行非常快速 (O(1)) 的查找。

然后，您可以检查 的结果`[dictionary objectForKey:userURL]`，如果它返回某些内容，则该 URL 与字典中的一个匹配。

唯一的问题是它需要精确的字符串匹配。如果您的字典包含`http://server/foobar`并且用户输入`http://server/FOOBAR`（因为它是不区分大小写的服务器），那么您将错过查找。同样，将`?foobar`查询添加到 URL 的末尾也会导致未命中。`server:80`您还可以使用和字符编码添加显式端口，`%XX`您可以创建相同 URL 的数百个变体。您必须考虑到这一点并规范化字典中的 URL 以及用户在查找之前输入的 URL。

# c# - Windows 窗体 Appbar 桌面大小调整

> ID：13843988
> 
> 赞同：2
> 
> 时间：2012-12-12T16:17:14.513
> 
> 标签：c#, winforms, winapi

好的。就在你认为你已经明白了一切的时候，你还没有。

我已经编写并测试了一个功能 appbar 类。当我使用一个简单的 Windows 窗体来扩展和测试该类时，它在 XP（SP 3、32 位）和 Windows 7（64 位）中都可以正常工作。其他窗口是可访问的，并且它们都适当地最大化。然而，当我使用我的“复杂”Windows 窗体（即它是一个应用程序）并从 appbar 类派生它时，桌面似乎将它“踢”了出来。我的意思是，最初一切都适当地调整大小，但随后桌面将自身调整回原来的大小。有时在将表单置于 appbar 模式后会很快发生这种情况，有时会在我单击表单外部时发生（例如打开浏览器），有时会在表单调用 MessageBox 时发生。我已将所有表单功能放在后台工作人员中，认为这可能是问题，但结果是一样的。我在下面发布了三张图片。第一个将应用程序显示为其初始 WinForm。第二个显示应用栏“正在运行”。最后一个显示应用栏没有“运行”。如果您在看到问题时遇到问题，请注意回收站。有任何想法吗？

![在此处输入图像描述](../Images/b21ca9ad278acad87973dd2e348ee701.png) ![在此处输入图像描述](../Images/1fb170cd6f2b2e605455dbd6ea7e4d89.png) ![在此处输入图像描述](../Images/a503992f62c0a083b62493c68081a7b7.png)

编辑：我通过日志找到了这些调用。每次桌面调整为“正常”时，它们似乎都会触发。现在我正在尝试查看“简单”版本中是否存在类似的模式。

*   msg=0x6 (WM_ACTIVATE) hwnd=0x1e03ea wparam=0x0 lparam=0x0 结果=0x0
*   msg=0x1c (WM_ACTIVATEAPP) hwnd=0x1e03ea wparam=0x0 lparam=0x1a90 结果=0x0
*   msg=0x1a (WM_WININICHANGE) hwnd=0x1e03ea wparam=0x2f lparam=0x9fe048 结果=0x0
*   msg=0x1a (WM_WININICHANGE) hwnd=0x1e03ea wparam=0x18 lparam=0x9fe038 结果=0x0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:24:29.380

所以这是一场疯狂的追逐。如果我最后的评论听起来很荒谬，那就是。虽然我仍然不能 100% 确定这个理论（请有人在你闲暇时证明/反驳），但两个不同的句柄来自 (1) 表单的实例化和 (2) 加载表单时的实际句柄。我认为 API 遵循相同的 QUERY_POS 和 SET_POS 概念，即它最初检查并分配一个有效的句柄。然后，在显示表单之前，它会再次检查句柄值。

长话短说，在 Load 事件中验证句柄值的一行代码解决了整个问题。

编辑：更好的是，HandleCreated 事件是不可替代的。

# asp.net - ASP.NET 登录 Web 控制器文本框

> ID：13843989
> 
> 赞同：0
> 
> 时间：2012-12-12T16:17:17.667
> 
> 标签：asp.net, login, input, textbox, placeholder

我只是想知道是否可以为登录的文本框设置占位符？我正在使用`<asp:Login runat="server"> </asp:Login>`并且我想通过文本框访问。

我有我使用的登录页面`<asp:Login runat="server"> </asp:Login>`，因为您知道登录表单有 2 个字段一个用户名和一个密码，我不想为它们使用任何标签，但是我必须通过某些东西显示该字段是什么。我想使用一个占位符，一旦有人输入内容就会消失。在正常形式中，我可以使用`<input type="text" name="Username" placeholder="Username" /`> 但在这种情况下，我无法访问该字段。

谢谢！

# c# - 如何以编程方式发布 SQL Server 数据库项目？

> ID：13843990
> 
> 赞同：5
> 
> 时间：2012-12-12T16:17:21.583
> 
> 标签：c#, sql, sql-server, visual-studio-2010

考虑以下情况：

现在，我有一个 C# 应用程序，它解析文件以获取详细信息（表、列等）并启动新的 SQL 连接以执行 SQL 命令以在数据库中创建这些表。

我想要的是创建一个 SQL 项目，我将在其中手动创建这些表，并从 C# 应用程序以编程方式将 SQL 项目发布到某个服务器和数据库。

这可能吗 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-07-08T18:31:43.673

如果您在 .NET 4 及更高版本中使用基于**sqlproj**的项目，则可以使用 Microsoft.Build 命名空间中的类以编程方式相当轻松地构建和发布它。取自我[在这里](https://stackoverflow.com/a/38273176/62600)的回答：

```
using Microsoft.Build.Framework;
using Microsoft.Build.Execution;

public void UpdateSchema() {
    var props = new Dictionary<string, string> {
        { "UpdateDatabase", "True" },
        { "PublishScriptFileName", "schema-update.sql" },
        { "SqlPublishProfilePath", "path/to/publish.xml") }
    };

    var projPath = "path/to/database.sqlproj";

    var result = BuildManager.DefaultBuildManager.Build(
        new BuildParameters { Loggers = new[] { new ConsoleLogger() } },
        new BuildRequestData(new ProjectInstance(projPath, props, null), new[] { "Publish" }));

    if (result.OverallResult == BuildResultCode.Success) {
        Console.WriteLine("Schema update succeeded!");
    }
    else {
        Console.ForegroundColor = ConsoleColor.Red;
        Console.WriteLine("Schema update failed!");
        Console.ResetColor();
    }
}

private class ConsoleLogger : ILogger
{
    public void Initialize(IEventSource eventSource) {
        eventSource.ErrorRaised += (sender, e) => {
            Console.ForegroundColor = ConsoleColor.Red;
            Console.WriteLine(e.Message);
            Console.ResetColor();
        };
        eventSource.MessageRaised += (sender, e) => {
            if (e.Importance != MessageImportance.Low)
                Console.WriteLine(e.Message);
        };
    }
    public void Shutdown() { }
    public LoggerVerbosity Verbosity { get; set; }
    public string Parameters { get; set; }
} 
```

这适用于 .NET 4 及更高版本。确保并包含对**Microsoft.Build**和**Microsoft.Build.Framework**的程序集引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:28:22.847

您可以通过多种方式完成此操作。[在我们的应用程序（约 7 个大型数据库）中，我们使用SQL Server Data Tools](http://msdn.microsoft.com/en-us/library/hh272686%28v=VS.103%29.aspx)中的数据库项目来管理它们。这使我们能够轻松地进行版本控制，并在部署时使用一些很棒的比较工具和大量其他选项。我们确实扩展了我们的解决方案以处理环境中的一些细微差别，但对于大多数人来说这不应该是一个问题。

该工具集的一部分包括 DAC（数据层应用程序），它允许您非常轻松地将项目中的数据库移植到各种环境中。这将支持当今存在的绝大多数项目。

如果您想进行纯程序化，您可以使用 Code First（以及非常灵活的[Code First Migrations](http://msdn.microsoft.com/en-US/data/jj591621)），这是一种随心所欲的构建，MS 会为您解决剩下的问题（主要是按照惯例，但可以灵活地超越） . 在升级版本方面真的很友好。再次恕我直言。

数据库项目也存在，但往往需要更多的洞察力/工作才能以您想要的方式调整它们（但也提供熟悉的 SQL Explorer 类型布局）。

# django - django grappelli 中的自动完成功能 - 没有“添加”按钮

> ID：13843991
> 
> 赞同：3
> 
> 时间：2012-12-12T16:17:23.850
> 
> 标签：django, django-admin, django-grappelli

我在 admin 中有一个 ForeignKey 字段，它是使用 django-grappelli 呈现的，如下所示：

![在此处输入图像描述](../Images/03e5e973e0384910ffd15806618fca99.png)

但是，当我使用 grappelli 自动完成查找时，该字段在没有“添加”按钮的情况下呈现：

![在此处输入图像描述](../Images/02ea01d7b16c2f81a94538af40300620.png)

我怎样才能同时拥有：grappelli 的自动完成和“+”按钮？[文档](http://django-grappelli.readthedocs.org/en/latest/customization.html#autocomplete-lookups)中没有任何内容...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-18T10:15:24.483

似乎是老问题，但无论如何..您可以使用 Django Grappelli 自动完成查找添加对象。当您单击放大镜图标时，您应该会在列表界面中看到添加按钮。确保您具有添加此类对象的适当权限。

# mercurial - 使用标签在 Mercurial 中处理和建议版本号，如何处理分支

> ID：13843994
> 
> 赞同：1
> 
> 时间：2012-12-12T16:17:35.600
> 
> 标签：mercurial, branch, versioning

我正在为 Mercurial 开发一个扩展，它可以使用 Mercurial 标签处理版本号。目前，它检查指定的版本号是否与存储库中的其他版本号的顺序正确，以及它是否与前一个版本号相差不远。

但是，目前它仅在存储库只有一个分支时才有效。我正在尝试使其在带有分支的仓库和更多分支上运行，在具有不同开发线的仓库（一种未命名的分支）上运行。棘手的部分之一是定义用户可以做什么和不能做什么。例如，如果在分支 A 上有版本 1.1 和分支 BI 上的 1.0.1，则认为分支 B 应该始终低于 1.1。由于我不熟悉在分支开发中管理版本编号的许多不同方法，因此我想收集用例以及如何处理它。

所以，我想知道是否有人已经对这个主题进行了研究或者知道很好的资源来帮助我解决这个问题。您也可以提交用例来处理。

显然，我做了一些研究，但我找不到任何真正相关的东西。可能是因为我不知道如何用简洁和搜索引擎全面的方式表达问题。

编辑：这是我现在想出的“规则”：

*   在每个分支上，版本号应该高于前一个（但不能太高）
*   当您创建一个分支时，您可以将任何您想要的版本号设置为高于前一个版本号。
*   当在每个分支上定义第一个版本号时，它定义了整个分支的顺序。一个分支永远无法超越另一个分支。
*   这些规则由所有进一步的分支继承。
*   当你合并两个分支时（实际上是令人讨厌的部分），常见的反复无常的态度是将合并的结果视为本地分支的一部分。就我而言，这似乎不是正确的行为。如果当您将 1.0.3 分支与 1.0.3 中的 1.1.0 版本合并时，您只能使用低于 1.1.0 的版本，因为该分支低于另一个分支，这将是非常奇怪的。我在这里建议的解决方案始终将合并视为最高分支的一部分，否则某些分支会倒退。

你能告诉我这是一致的还是我错过了一些重要的用例。

**问题的第一部分仍然是主题。如果您知道有关该主题的任何相关信息，或者您知道类似的问题，请告诉我。（毕竟，它是在树中编号的唯一规则）**

# php - SQL - 仅使用 INNER JOIN 的第一个结果进行选择

> ID：13843997
> 
> 赞同：0
> 
> 时间：2012-12-12T16:17:42.590
> 
> 标签：php, sql, postgresql

我试图从 2 个表中得到一些结果，它们是`1 to n`关系。我想从一个表中获取 2 列，`Extensao`从第二个表中获取一个结果`HorarioExtensao`。我试图按月份过滤，但我只想考虑第二列的较低日期，因为相同的结果可以有来自不同月份的多个日期。

我已经尝试过查询，`HorarioExtensao`然后`SELECT`使用. 提前致谢。`MIN(h.hora) BETWEEN $inicial and $final``INNER JOIN``Extensao``e.nome``e.codigo`

```
$mes = $_GET["mes"];
$ano = $_GET["ano"];
$inicial = date("Y/m/d g:i:s",mktime(0,0,0,$mes,1,$ano));
$final = date("Y/m/t g:i:s",mktime(0,0,0,$mes,1,$ano));

$db = pg_connect("host=localhost dbname=saga user=**** password=****");
$result = pg_query($db,"SELECT e.nome, MIN(h.hora), e.codigo 
                        FROM Extensao e
                        INNER JOIN HorarioExtensao h ON h.idExtensao = e.idExtensao 
                        WHERE h.hora BETWEEN 
                                to_timestamp('$inicial','YYYY/MM/DD HH:MI:SS') AND
                                to_timestamp('$final','YYYY/MM/DD HH:MI:SS')
                        GROUP BY 3,1"); 
```

* * *

## 编辑

在桌子上：

**- Extensao**

```
----------------------
 | 身份证 | 名称 | 科迪戈 |
 |----|--------|--------|
 | 1 | N1 | 201 |
 | 2 | 氮气 | 223 |
 | 3 | N3 | 266 |
 ----------------------

```

**- HorarioExtensao**

```
--------------------------
 | idExtensao | 霍拉 |
 |------------|------------|
 | 1 | 2012-01-21 |
 | 1 | 2012-01-22 |
 | 1 | 2012-02-15 |
 | 1 | 2012-02-16 |
 --------------------------

```

如果我尝试选择 month `2`，我不想得到任何结果，因为较低的日期`idExtensao`是第 1 个月。如果我选​​择 month `1`，我只想得到 1 个结果，应该是`N1,2012-01-21,201`. 另外，我知道`2012-01-21`不是 a `TIMESTAMP`，我只是在简化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:13:42.393

礼貌地说，这个问题留有解释的余地​​。

我*认为*这可能是您正在寻找的： a[`LEFT [OUTER ] JOIN`](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-FROM)在*预聚合*表上：

```
SELECT e.nome, h.min_hora, e.codigo
FROM   extensao e
LEFT   JOIN (
  SELECT idextensao, min(hora) AS min_hora
  FROM   horarioextensao
  GROUP  BY 1
  ) h ON h.idextensao = e.id
     AND h.min_hora >= to_timestamp($inicial, 'YYYY/MM/DD HH:MI:SS')
     AND h.min_hora <  to_timestamp($final, 'YYYY/MM/DD HH:MI:SS'); 
```

在子查询中，我从加入 to*之前*`h`选择最早的`hora`per `idextensao`from 。`horarioextensao` *`extensao`*

 *还要注意我如何将`WHERE`条件提升到`LEFT JOIN`条件中。这样，您就可以从中获取所有行，`extensao`并且只有那些`horarioextensao`与条件匹配的行。

如果您只希望其中的`JOIN`行`extensao`具有匹配的`min_hora`. 在这种情况下，条件可以留在`WHERE`子句中。

在您的示例中，一月的结果将是：

```
nome |  min_hora  |  codigo
-----+------------+---------
N1   | 2012-01-21 | 201
N2   | null       | 223
N3   | null       | 266 
```

二月：

```
nome |  min_hora  |  codigo
-----+------------+---------
N1   | null       | 201
N2   | null       | 223
N3   | null       | 266 
```

[**-> sqlfiddle**](http://www.sqlfiddle.com/#!12/1ba91/10)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T04:30:30.183

试试这个 SQL Server 语法 - 你需要翻译它，但它应该给你正确的想法

```
SELECT e.nome,MIN(h.hora),e.codigo 
FROM   Extensao e
       CROSS APPLY 
       (SELECT TOP(1) h.hora
       FROM HorarioExtensao h
       WHERE h.idExtensao = e.idExtensao
             AND
             h.hora >= to_timestamp('$inicial','YYYY/MM/DD HH:MI:SS')
             AND
             h.hora < to_timestamp('$final','YYYY/MM/DD HH:MI:SS')
       ORDER BY h.hora)
GROUP BY 3,1 
```*

# image - https://usercontent.googleapis.com/freebase/v1/imageID 返回“禁止域类型”

> ID：13843998
> 
> 赞同：0
> 
> 时间：2012-12-12T16:17:51.137
> 
> 标签：image, freebase

[https://usercontent.googleapis.com/freebase/v1/image/en/jenni_rivera](https://usercontent.googleapis.com/freebase/v1/image/en/jenni_rivera) https://usercontent.googleapis.com/freebase/v1/image/en/bob_dylan

返回

```
{
"error": {
    "errors": [
        {
            "domain": "global",
            "reason": "domainTypeForbidden",
            "message": "Domain Type Forbidden"
        }
    ],
    "code": 403,
    "message": "Domain Type Forbidden"
}
} 
```

我做错了吗？API被改变了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:36:44.667

是的，我们正在调查。现在可以从以下位置获得图像：

```
https://www.googleapis.com/freebase/v1/image/en/jenni_rivera 
```

...但它应该很快切换回 usercontent.googleapis.com。

# emacs - Windows 7 上的 Emacs：如何让颜色主题 »solarized-light« 工作？

> ID：13843999
> 
> 赞同：1
> 
> 时间：2012-12-12T16:17:59.243
> 
> 标签：emacs, emacs24

我在 Windows 7 上使用 Emacs 24。我安装了 solarized 主题，请参见此处：[https ://github.com/sellout/emacs-color-theme-solarized](https://github.com/sellout/emacs-color-theme-solarized)

切换到颜色主题很容易，例如通过执行 Mx load-theme 然后选择 solarized-light。

但尤其是日晒光的颜色几乎无法辨认。颜色甚至不接近图片的颜色。我猜一个叫做“调色板”的东西有问题，见这里：[console2 colors solarized](https://stackoverflow.com/questions/12779826/console2-colors-solarized)

有任何想法吗？

* * *

编辑：我制作了 Emacs 的屏幕截图，显示了相当低的对比度。

![Windows 7 下 Emacs 上的 Solarized-light-theme](../Images/1df777081bdc2d8cf1d73458189843da.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:50:25.677

所以，我现在安装了它，我发现缺乏对比。但这种差异似乎是由于操作系统之间字体渲染的差异造成的。

github页面上的截图很可能是在Mac OS上完成的，它使字体最粗。使用默认字体的 Linux 上的主题看起来很合理，但根据设置，它会使文本稍微或更薄一些。可以这么说，Windows 以最少的“墨水”呈现文本。虽然我的一些用户认为它更清晰，但当主题使用低对比度的颜色时，它也会使事情变得更糟，例如 Solarized 的浅色版本。

还有一点需要注意的是，截图是在 Vim 中完成的，它的语法高亮机制与 Emacs 不同，所以关键字等的颜色必然会有所不同。

但我在 Ubuntu 和 Windows 上截了两张截图，在 Gimp 中打开它们，放大，使用颜色选择器，蓝色的值与参考截图上的值大致相同`2690db`：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T17:02:07.993

在我看来，我不觉得主题工作不当。
以下是我的截图，os x, Emacs 24.3

您是否尝试过更改其他字体或主题（如果那不是您唯一的爱）

![emacs 主题：太阳能屏幕截图](../Images/29f4bb50b3ed56fff2a0bb1e5bd4c15f.png)