# StackOverflow 问答 13298000-13298999

# c# - 如何通过 cellFormatting Telerik 覆盖单元格颜色

> ID：13298001
> 
> 赞同：2
> 
> 时间：2012-11-08T21:19:40.900
> 
> 标签：c#, .net, winforms, telerik, radgridview

我在 Telerik，我正在尝试格式化 col 值。列索引号`12`已经被赋予了一种颜色（它有效），然后我想寻找一个特定的值，如果它存在然后更改单元格颜色。如果单元格值为 4354，则更改单元格颜色....但没有任何反应。下面的代码有什么错误？？？

`private int cellValue = 4354;`

```
for (int i = 0; i < TelerikRadGridView.Rows.Count; i++)
 {
 if (TelerikRadGridView.Rows[i].Cells[i].Value == (object)cellValue)
      {
            e.CellElement.BackColor = Color.Gold;
         }
   } 
```

这是完整的代码：

```
private int cellValue = 4354;
private void TelerikRadGridView_CellFormatting(object sender, CellFormattingEventArgs e)
    {

        e.CellElement.ResetValue(LightVisualElement.DrawFillProperty, ValueResetFlags.Local);
        e.CellElement.ResetValue(LightVisualElement.NumberOfColorsProperty, ValueResetFlags.Local);
        e.CellElement.ResetValue(LightVisualElement.GradientStyleProperty, ValueResetFlags.Local);
        e.CellElement.ResetValue(LightVisualElement.BackColorProperty, ValueResetFlags.Local);

        if (dontRunHandler == false)
            {
                if (e.CellElement.ColumnIndex != 2 
                && e.CellElement.ColumnIndex != 3 
                && e.CellElement.ColumnIndex != 4
                && e.CellElement.ColumnIndex != 5 
                && e.CellElement.ColumnIndex != 7 
                && e.CellElement.ColumnIndex != 11 
                && e.CellElement.ColumnIndex != 12 
                && e.CellElement.ColumnIndex != 13) return;
                e.CellElement.DrawFill = true;
                e.CellElement.NumberOfColors = 1;
                e.CellElement.BackColor = Color.LightSlateGray;
                e.CellElement.GradientStyle = GradientStyles.Linear;
            }
            for (int i = 0; i < TelerikRadGridView.Rows.Count; i++)
            {
                if (TelerikRadGridView.Rows[i].Cells[i].Value == (object)cellValue)
                {
                    e.CellElement.BackColor = Color.Gold;
                }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T04:19:43.597

为你重写了它，这样它就会做你想做的事情：

```
private int cellValue = 4354;
private void TelerikRadGridView_CellFormatting(object sender, CellFormattingEventArgs e)
{
    e.CellElement.ResetValue(LightVisualElement.DrawFillProperty, ValueResetFlags.Local);
    e.CellElement.ResetValue(LightVisualElement.NumberOfColorsProperty, ValueResetFlags.Local);
    e.CellElement.ResetValue(LightVisualElement.GradientStyleProperty, ValueResetFlags.Local);
    e.CellElement.ResetValue(LightVisualElement.BackColorProperty, ValueResetFlags.Local);

    if (dontRunHandler == false)
    {
        if (e.CellElement.ColumnIndex != 2 
        && e.CellElement.ColumnIndex != 3 
        && e.CellElement.ColumnIndex != 4
        && e.CellElement.ColumnIndex != 5 
        && e.CellElement.ColumnIndex != 7 
        && e.CellElement.ColumnIndex != 11 
        && e.CellElement.ColumnIndex != 12 
        && e.CellElement.ColumnIndex != 13) return;
        else
        {
           if(e.CellElement.Value != null)
           {
               if (Double.Parse(e.CellElement.Value.ToString()) != cellValue)
               {
                   e.CellElement.DrawFill = true;
                   e.CellElement.NumberOfColors = 1;
                   e.CellElement.BackColor = Color.LightSlateGray;
                   e.CellElement.GradientStyle = GradientStyles.Linear;
               }
               else
               {
                   e.CellElement.DrawFill = true;
                   e.CellElement.NumberOfColors = 1;
                   e.CellElement.BackColor = Color.Gold;
                   e.CellElement.GradientStyle = GradientStyles.Linear;
               }
           }
        }
    } 
```

# .net - 需要将示例 VB.NET 对象转换为 JSON

> ID：13298010
> 
> 赞同：0
> 
> 时间：2012-11-08T21:20:31.677
> 
> 标签：.net, sql, json

尝试使用 SQL 调用从 .asmx 页面获取纯 JSON。好像拿不到 我发现的每一篇文章要么是在 c# 中，要么不是我所追求的。序列化会导致一维数组问题。我需要从我的 Web 服务器上的 MS 访问数据库中获取小型 Java 应用程序的数据。

```
<%@ WebService class="GetDBStudent" %>

Imports System.Web
Imports System.Web.Services
Imports System.Xml
Imports System.Web.Services.Protocols
Imports System.Web.Script.Services
Imports System.Data
imports System.Web.Script.Serialization

'<System.Web.Script.Services.ScriptService()> _
<WebService(Namespace:="com.mcfrsit.GetDBStudent")> _
<WebServiceBinding(ConformsTo:=WsiProfiles.BasicProfile1_1)> _
Public Class GetDBStudent
Inherits System.Web.Services.WebService
Public Class Students
    Public StudentID As String
    Public LastName As String
    Public FirstName As String
    Public Affiliation As String
    Public ClassName As String
    Public DateCompleted As DateTime
End Class

<WebMethod()> _
<ScriptMethod(UseHttpGet:=False, ResponseFormat:=ResponseFormat.Json)> _
Public Function GetArray() As Students()

    ' Create a connection string
    Dim DBConnection As String =        ConfigurationManager.ConnectionStrings("OdbcServices").ToString
    Dim sql As String = "SELECT * FROM ClassRecordsEnrollmentsQry WHERE [Affiliation] = 'DFRS'"
    Dim Conn As New ADODB.Connection()
    Dim rs As New ADODB.Recordset()

    Dim daTitles As New Data.OleDb.OleDbDataAdapter()

    Dim dsTitles As New DataSet("CrossTab")
    Conn.Open(DBConnection, "", "", -1)

    Try
        rs.Open(sql, DBConnection, ADODB.CursorTypeEnum.adOpenStatic, ADODB.LockTypeEnum.adLockBatchOptimistic, 1)

        daTitles.Fill(dsTitles, rs, "Students")
        'create object array, using row count as upper dim
        Dim objStudents As Students() = New Students(dsTitles.Tables(0).Rows.Count - 1) {}

        'loop through dataset to add data to object array
        Dim intRsCount As Int16
        For intRsCount = 0 To dsTitles.Tables(0).Rows.Count - 1
            Dim intCsCount As Int16
            For intCsCount = 0 To dsTitles.Tables(0).Columns.Count - 1
                'Dim strColName As String = dsTitles.Tables(0).Columns(intCsCount)
            Next
            objStudents(intRsCount) = New Students
            objStudents(intRsCount).StudentID = dsTitles.Tables(0).Rows(intRsCount)(0)
            objStudents(intRsCount).LastName = dsTitles.Tables(0).Rows(intRsCount)(1)
            objStudents(intRsCount).FirstName = dsTitles.Tables(0).Rows(intRsCount)(2)
            objStudents(intRsCount).Affiliation = dsTitles.Tables(0).Rows(intRsCount)(3)
            objStudents(intRsCount).ClassName = dsTitles.Tables(0).Rows(intRsCount)(4)
            objStudents(intRsCount).DateCompleted = dsTitles.Tables(0).Rows(intRsCount)(5)
        Next

        'Return new JavaScriptSerializer().Serialize(objStudents)
        Return objStudents

    Catch ex As Exception
        'Response.Write("Sorting is not supported in the view")
    Finally
        Conn.Close()
    End Try
End Function

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T10:02:34.370

已解决：将函数作为对象返回并且工作正常...

但是返回的 JSON 字符串如下所示：

```
[{"text":"text2"}] 
```

为什么在开始和结束处有额外的“[”和“]”？

# c# - 导入合同

> ID：13298012
> 
> 赞同：0
> 
> 时间：2012-11-08T21:20:47.523
> 
> 标签：c#, dynamics-crm-2011

尝试将合同从本地导入到在线主机。我调整了 SDK 解决方案“dataimport”，但是在使用所需的查找属性时遇到了问题`CustomerIdName`。它给

> 错误 2147220654 “找到重复的查找引用”

另一个到查找属性的映射`contracttemplateid`工作得很好。我认为这与它可以映射到实体`account`或`contact`实体的事实有关。源文件（只有 1 个记录行）和下面的代码。这是基于`ImportWithCreate`sdk 解决方案中包含的类的 1 列映射。

```
title,activeon,allotmenttypecode,expireson,billingstarton,billingendon,
new_companyorindividual,CustomerIdName, Acme Consulting Company,
5/1/2000,1,1/23/2002,5/1/2000,1/23/2002,0,USF Admin 
```

```
#region Column Eight Mappings
            // Create a column mapping for a 'lookup' type field.
            ColumnMapping colMapping8 = new ColumnMapping()
            {
                // Set source properties.
                SourceAttributeName = "CustomerIdName",
                SourceEntityName = "Contract_1",

                // Set target properties.
                TargetAttributeName = "customerid",
                TargetEntityName = Contract.EntityLogicalName,

                // Relate this column mapping with the data map.
                ImportMapId =
                    new EntityReference(ImportMap.EntityLogicalName, importMapId),

                // Force this column to be processed.
                ProcessCode =
                    new OptionSetValue((int)ColumnMappingProcessCode.Process),
            };

            // Create the mapping.
            Guid colMappingId8 = _serviceProxy.Create(colMapping8);

            // Because we created a column mapping of type lookup, we need to specify lookup details in a lookupmapping.
            // One lookupmapping will be for the parent account, and the other for the current record.
            // This lookupmapping is important because without it the current record
            // cannot be used as the parent of another record.

            // Create a lookup mapping to the parent account.  
            LookUpMapping parentLookupMapping8 = new LookUpMapping()
            {
                // Relate this mapping with its parent column mapping.
                ColumnMappingId =
                    new EntityReference(ColumnMapping.EntityLogicalName, colMappingId8),

                // Force this column to be processed.
                ProcessCode =
                    new OptionSetValue((int)LookUpMappingProcessCode.Process),

                // Set the lookup for an account entity by its name attribute.
                LookUpEntityName = Account.EntityLogicalName,
                //LookUpEntityName = Contact.EntityLogicalName,
                LookUpAttributeName = "name",
                LookUpSourceCode =
                    new OptionSetValue((int)LookUpMappingLookUpSourceCode.System)
            };

            // Create the lookup mapping.
            Guid parentLookupMappingId8 = _serviceProxy.Create(parentLookupMapping8);

            // Create a lookup on the current record's "src_name" so that this record can
            // be used as the parent account for another record being imported.
            // Without this lookup, no record using this account as its parent will be imported.
            LookUpMapping currentLookUpMapping8 = new LookUpMapping()
            {
                // Relate this lookup with its parent column mapping.
                ColumnMappingId =
                    new EntityReference(ColumnMapping.EntityLogicalName, colMappingId8),

                // Force this column to be processed.
                ProcessCode =
                    new OptionSetValue((int)LookUpMappingProcessCode.Process),

                // Set the lookup for the current record by its src_name attribute.
                LookUpAttributeName = "CustomerIdName",
                LookUpEntityName = "Contract_1",
                LookUpSourceCode =
                    new OptionSetValue((int)LookUpMappingLookUpSourceCode.Source)
            };

            // Create the lookup mapping
            Guid currentLookupMappingId8 = _serviceProxy.Create(currentLookUpMapping8);
            #endregion 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:01:15.620

没有重复。Microsoft 支持能够通过注释掉该特定代码的 LookUpMapping 代码块来解决问题。

//LookUpMapping currentLookUpMapping = new LookUpMapping()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T18:21:01.050

我以前没有像以前那样编写自己的数据导入脚本，但是我看到了那个错误。

我怀疑这可能是因为您有两个名为“USF Admin”的联系人/帐户。

它试图为查找字段找到唯一的记录，如果有重复，它不知道要设置哪个。

您也可以尝试使用标准的 CRM 数据导入工具手动执行数据导入，如果代码或数据存在问题，这可能会帮助您缩小范围。

# .net - HttpWebRequest 和 Parallel.ForEach 在产生一定数量的线程后导致超时

> ID：13298017
> 
> 赞同：1
> 
> 时间：2012-11-08T21:21:02.317
> 
> 标签：.net, httpwebrequest, timeout, parallel.foreach

我遇到了一个问题，我正在寻找处理它的最佳方法。我在 Parallel.ForEach 循环中使用 HttpWebRequest（代码如下）。我已经在两打机器和许多不同类型的连接上测试了该程序，并且到目前为止它运行良好。

今天，我的 ADSL 调制解调器死了，被 ISP 换成了一个新的——现在，当我运行程序时，一旦产生的线程达到 35-40，我得到的只是超时；那时，即使我尝试在浏览器中加载网站，它们也会超时。

我的猜测是调制解调器无法处理并发连接 - 问题是如何防止这种情况发生？当然，我可以限制并发连接的数量，但是应该有更好的方法来处理这个问题吗？

任何帮助是极大的赞赏。

```
string pageContent;
HttpWebRequest myReq = (HttpWebRequest)WebRequest.Create(webSiteUrl);
myReq.UserAgent = "Mozilla/5.0 (Windows; U; MSIE 9.0; Windows NT 9.0; en-US)";

myReq.Method = "GET";
myReq.Accept = "text/html";

myReq.Timeout = webRequestTimeout; //set to generous 90 seconds
myReq.ReadWriteTimeout = webRequestTimeout;  //set to 90 seconds

HttpWebResponse myres = (HttpWebResponse)myReq.GetResponse();

using (StreamReader sr = new StreamReader(myres.GetResponseStream(), Encoding.Default))
{
    pageContent = sr.ReadToEnd();

}

myres.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:16:05.373

`Parallel.ForEach()`可以很好地猜测 CPU-bound 操作的正确并行度，但是对于 IO-bound 操作，它很可能会使用远高于理想的并行度。我认为 40 个线程太多了，尤其是在连接速度较慢的情况下。

你应该做的是设置[`MaxDegreeOfParallelism`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.paralleloptions.maxdegreeofparallelism.aspx)一个适合你的数字，很可能远小于 40。

# uml - 用于 Web 应用程序接口的 UML

> ID：13298020
> 
> 赞同：2
> 
> 时间：2012-11-08T21:21:27.967
> 
> 标签：uml

有人可以指出 Web 上用于 Web 应用程序的简单 UML 图的示例吗？

示例 - 我有一个列表屏幕，允许用户更改序列号 [其中一列] 和季节类型 [在另一列中选择下拉菜单]。它具有保存和取消按钮，用于保存更改的值和删除更改。

活动/序列和状态图应该相同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:12:49.207

我不认为 UML 是建模 Web 应用程序接口的合适语言。事实上，同一个 OMG 现在正在为此推广一个名为 IFML 的新标准[http://www.ifml.org/](http://www.ifml.org/)

# java - 如何从 BluetoothChat 的输入/输出流中读取/写入原始十六进制字节？

> ID：13298022
> 
> 赞同：6
> 
> 时间：2012-11-08T21:21:37.953
> 
> 标签：java, android, debugging, stream, hex

我正在开发一个基于 BluetoothChat 示例代码的应用程序。我需要能够将包含十六进制值的字节数组写入输出流。我还需要解析输入流上的字节数组并读取十六进制值。这是我的代码，只是简单地将十六进制值写入字节数组

```
byte[] data = new byte [3];
data[0] = (byte) 0x53;
data[1] = (byte) 0x1C;
data[2] = (byte) 0X06; 
```

但是，当单步调试并查看“数据”时，调试器将值显示为 data[0]=83、data[1]=28、data[2]=6。为什么所有的值都转换为ascii？当我在读取输入流时观看 byte[] 缓冲区时，也会发生同样的事情。

```
 // Read from the InputStream
 bytes = mmInStream.read(buffer); 
```

我发送了一个包含十六进制值的字节数组，但 byte[] 缓冲区显示的是 ascii 值。如何通过蓝牙读取和写入原始十六进制值？一些读/写流将是短的 <15 字节的命令流。但我还需要读取一个编码为十六进制字节的大文件。对该输入流有什么建议吗？我需要使用 BufferedInputStream 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T21:29:06.250

当你写

```
int answer = 42;
System.out.println(answer); 
```

`int`存储在变量中的值将`answer`转换为 a `String`，然后显示在您的监视器上。这同样适用于在 IDE 的调试器中显示值。**最终，所有数字数据都被转换为 ASCII（或其他一些字符编码）以便显示。**在任何编程语言中都是如此。

现在我们可能想知道这种转换是如何发生的。默认情况下，该`int`值将转换为其十进制表示形式。这是大多数人习惯阅读并期望看到的。作为程序员，我们有时需要考虑值的十六进制表示`int`，例如您在代码中所做的。但是，计算机不会仅仅因为我们使用十六进制表示设置变量的值而自动知道这一点。特别是，您的 IDE 仍默认以`int`十进制表示形式显示所有数据。

Fortunately, IDE designers are programmers and realize that we sometimes need to see `int` data in a different form. You can change the setting for your debugger to display `int` data as hexadecimal. Since the steps to do this depends on your IDE, you should check the help files for details.

# javascript - 内容可编辑的 div - 在插入符号/选定的 div 之后插入新的“p 类”

> ID：13298024
> 
> 赞同：4
> 
> 时间：2012-11-08T21:21:48.680
> 
> 标签：javascript, jquery, html, contenteditable

我有一个项目，其中一个内容可编辑的 div 是父级然后使用 jQuery 我希望在这个 div 中添加 p 标签。然后也可以对其进行编辑。几乎就像一个迷你记事本文档。

我遇到的问题是我在父 div 上使用 jQuery .append 函数，它将 p 类添加到 div 的末尾。我需要它做的是在当前选定的 p / p 插入符号光标当前所在的 p 之后添加 p 类。

我目前正在使用的 jQuery -

```
 $(".addHeading").click(function() {
     $('.textArea').append('<div class="heading">Heading</div>');
  });

  $(".addParagraph").click(function() {
     $('.textArea').append('<div class="paragraph">Test</div>');
  });​ 
```

我已将当前代码放入 JSFiddle。我希望我正在尝试做的事情很明显。

任何帮助将不胜感激！

JS 小提琴 - [http://jsfiddle.net/eheHS/](http://jsfiddle.net/eheHS/)

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:55:23.627

通过将点击处理程序添加到新创建的段落 div，您可以保存最后一个编辑的段落。这是一种解决方案，但不是很优雅（[jsFiddle](http://jsfiddle.net/aKtSt/)）：

```
var $lastCaretDiv;

$(".addParagraph").click(function() {
    if ($lastCaretDiv) {
        $lastCaretDiv.after($('<div/>', {
            'html': 'Test',
            'class': 'paragraph'           
        }).click(function () {
            $lastCaretDiv = $(this);
        }));
    } else {
        $('.textArea').append($('<div/>', {
            'html': 'Test',
            'class': 'paragraph'           
        }).click(function () {
            $lastCaretDiv = $(this);
        }));
    }
}); 
```

这将设置`$lastCaretDiv`为最后一个被点击的。如果已定义，则在其后添加新段落，否则将其附加到文本区域。

我的解决方案现在有很多陷阱，但你有一些工作要做。我建议`$lastCaretDiv`在单击文本区域中的其他内容时清除，例如标题。这完全取决于您希望它的行为方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:15:00.903

在第一次检查时，McFjodor 的答案就是我所追求的。

似乎工作正常。我已经调整并复制了他的代码，对标题文本也做了同样的事情。

修改后的javascript如下：

```
var $lastCaretDiv;

$(".addHeading").click(function() {
if ($lastCaretDiv) {
    //$lastCaretDiv.after('<div class="paragraph">Test</div>');
    $lastCaretDiv.after($('<div/>', {
        'html': 'Heading',
        'class': 'heading'            
    }).click(function () {
        $lastCaretDiv = $(this);
    }));
} else {
    $('.textArea').append($('<div/>', {
        'html': 'Heading',
        'class': 'heading'            
    }).click(function () {
        $lastCaretDiv = $(this);
    }));
}
});

$(".addParagraph").click(function() {
if ($lastCaretDiv) {
    //$lastCaretDiv.after('<div class="paragraph">Test</div>');
    $lastCaretDiv.after($('<div/>', {
        'html': 'Test',
        'class': 'paragraph'            
    }).click(function () {
        $lastCaretDiv = $(this);
    }));
} else {
    $('.textArea').append($('<div/>', {
        'html': 'Test',
        'class': 'paragraph'            
    }).click(function () {
        $lastCaretDiv = $(this);
    }));
}
});​ 
```

下面是根据 McFjodors 的回答完成的我所追求的内容！

[http://jsfiddle.net/aKtSt/2/](http://jsfiddle.net/aKtSt/2/)

如果我遇到此方法的任何问题，我将更新此方法现在有效。

谢谢！

# sql - 如何获得一系列月份的滚动年度总计

> ID：13298029
> 
> 赞同：1
> 
> 时间：2012-11-08T21:22:01.570
> 
> 标签：sql, oracle

我试图从一组提供给定月份和年份的分钟数的数据中获得 12 个月的滚动总数。在很多情况下，我一个月都没有记录。有没有办法以零 (0) 的值显示缺失的月份，然后将其卷起或不显示它们，但让查询将其确认为 12 个月范围的一部分。下面的查询是我试图使用的，但它只是抓取了以前的记录，并没有考虑到丢失的月份。下面的查询似乎与一些总数并没有什么不同。任何帮助将不胜感激。

```
 Select year
         , month
         , SUM(NVL(minutes, 0)) OVER (order by year,month rows between 11 preceding and current row) as total_minutes
    from
    (
    Select *  
    from test_table
    Order by year, month
    )
    Order by year desc , month desc 
```

这是创建测试表和数据的sql。

```
 drop table test_table;
    create table test_table (
      month    number(2),
      year     number(4),
      minutes  number(4,2)
    );

    insert into test_table values ( 1, 2012, 3 );
    insert into test_table values ( 2, 2012, 3 );
    insert into test_table values ( 3, 2012, 3 );
    insert into test_table values ( 4, 2012, 4 );
    insert into test_table values ( 5, 2012, 5 );
    insert into test_table values ( 7, 2012, 5 );
    insert into test_table values ( 8, 2012, 5 );
    insert into test_table values ( 9, 2012, 5 );
    insert into test_table values (10, 2012, 4 );
    insert into test_table values (11, 2012, 3 );
    insert into test_table values (12, 2012, 3 );
    insert into test_table values ( 1, 2011, 3 );
    insert into test_table values ( 2, 2011, 3 );
    insert into test_table values ( 5, 2011, 5 );
    insert into test_table values ( 6, 2011, 5 );
    insert into test_table values ( 7, 2011, 5 );
    insert into test_table values ( 8, 2011, 5 );
    insert into test_table values ( 9, 2011, 5 );
    insert into test_table values (10, 2011, 4 );
    insert into test_table values (11, 2011, 3 );
    insert into test_table values (12, 2011, 3 );
    insert into test_table values ( 1, 2010, 3 );
    insert into test_table values ( 2, 2010, 3 );
    insert into test_table values ( 3, 2010, 3 );
    insert into test_table values ( 4, 2010, 4 );
    insert into test_table values ( 5, 2010, 4 );
    insert into test_table values ( 6, 2010, 5 );
    insert into test_table values ( 7, 2010, 5 );
    insert into test_table values (10, 2010, 4 );
    insert into test_table values (11, 2010, 4 );
    insert into test_table values (12, 2010, 3 );

    COMMIT; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:54:22.647

为了填补几个月的空白`partition outer join`，如果您确实需要查看这些零，则在下面的查询中使用（Oracle 10g ad 更高），否则您可以将原始查询重写`SUM`功能保留为`SUM(NVL(minutes, 0)) OVER (partition by year order by year,month) as total_minutes`.

```
SQL> with m_num as(
  2    select level as mn
  3     from dual
  4   connect by level <= 12
  5  )
  6  select year
  7       , mn
  8       , minutes
  9       , sum(minutes) over(partition by year order by year, mn) rt
 10   from ( select tt.Year
 11               , mn.mn
 12               , nvl(tt.minutes, 0)  minutes
 13           from test_table tt
 14           partition by (tt.year)
 15           right outer join m_num mn
 16             on (tt.month = mn.mn)
 17        )
 18  order by year desc, mn desc
 19  ;

YEAR1         MN    MINUTES         RT
----- ---------- ---------- ----------
 2012         12          3         43
 2012         11          3         40
 2012         10          4         37
 2012          9          5         33
 2012          8          5         28
 2012          7          5         23
 2012          6          0         18
 2012          5          5         18
 2012          4          4         13
 2012          3          3          9
 2012          2          3          6
 2012          1          3          3
 2011         12          3         41
 2011         11          3         38
 2011         10          4         35
 2011          9          5         31
 2011          8          5         26
 2011          7          5         21
 2011          6          5         16
 2011          5          5         11
 2011          4          0          6
 2011          3          0          6
 2011          2          3          6
 2011          1          3          3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:07:07.847

我确实使用了外部联接，但这并没有给我所需的 12 个月滚动范围。我不得不使用 Windowing Clause 来获得正确的范围和数字。

```
 with m_num as(
      select level as mn
       from dual
     connect by level <= 12
    )
    select year
         , mn
         , minutes
         , sum(minutes) over(order by year,mn rows between 11 preceding and current row) rt
    from ( select tt.Year
                , mn.mn
                , nvl(tt.minutes, 0)  minutes
            from test_table tt
            partition by (tt.year)
            right outer join m_num mn
              on (tt.month = mn.mn)
         )
    order by year desc, mn desc; 
```

# jquery - 使用 ajax jquery 从 xml 和 json 读取

> ID：13298035
> 
> 赞同：0
> 
> 时间：2012-11-08T21:22:35.447
> 
> 标签：jquery, html, xml, ajax, json

我正在尝试从 xml 和 json 文件中读取数据，这些文件与他们称为 show.xml 和 follower.json 的 html 位于同一文件夹中，然后通过唱他们的 ids 第一个函数希望它工作时将数据发布到现有的 div 标签中文档被读取，另一个在单击时没有输出，仅打印 html

这是我的html

```
 <!DOCTYPE html>
    <html>
        <head>
            <title>
                Shaden
            </title>
        </head>
        <body>
            <div id="content_area" >
            <div class="profile_imge">

            </div>
            <div id="name">

            </div>
            <br/>
            <div id="bio">

            </div>
            <p id="click_here">Click here to view my twitter followers</p>
            <div id="followers">

            </div>
            </div>
        </body>
        <style>
            @font-face {
    font-family: my_font;
    src: url('channel.ttf');
}
            .profile_imge img {
               -moz-box-shadow: 5px 5px 7px #888;
               -moz-border-radius: 15px;
               -webkit-box-shadow: 5px 5px 7px #888;
               -webkit-border-radius: 15px;
               shadow: 5px 5px 7px #888;
               border-radius:15px;
               border: solid;
               border-color: #DCDCDC;
            }
            #name{
                font-family: my_font; src: url('channel.ttf');
                font-size: x-large;
            }
            #followers img{
                -moz-border-radius: 15px;
                -webkit-border-radius: 15px;
                border-radius:15px;
            }
            #content_area {
                width: 700px ;
                margin-left: auto ;
                margin-right: auto ;
                text-align: center;
            }

        </style>
        <script type="text/javascript">
            $(document).ready(function(){
                $.ajax({
                   url: "show.xml",
                   dataType: "xml",
                   success: function(xml) {
                              var name = $(this).find('name').text();
                              var bio = $(this).find('description').text();
                              var imge_url = $(this).find('profile_image_url').text();
                              $(".profile_imge div").append(imge_url);
                              $("#name").append(name);
                              $("#bio").append(bio);
                       }
            }) ;
            });
                $("#click_here").click(function() {
                    $.ajax({
                   url: "followers.json",
                   dataType: "json",
                   success: function(json) {
                              json.id.each(function(){
                             var imge_url = $(this).find('profile_image_url').text();
                              $("#followers").append(imge_url);}) ;
                       }
            }) ;
                });
        </script>

    </html> 
```

这是 XML

```
<?xml version="1.0" encoding="UTF-8"?>
<user>
  <id>122890543</id>
  <name>Shaden Al Omran</name>
  <screen_name>shadoon91</screen_name>
  <location>KSA , Riyadh</location>
  <profile_image_url>http://a0.twimg.com/profile_images/2626407130/image_normal.jpg</profile_image_url>
  <profile_image_url_https>https://si0.twimg.com/profile_images/2626407130/image_normal.jpg</profile_image_url_https>
  <url>http://shadoon91.blog.com</url>
  <description>Saudi girl,IT student in KSU,Microsoft Student Partner,programing and architecture r the most 2 interesting things4 me =]..i write everything comes 2 my mind :)</description>
  <protected>false</protected>
  <followers_count>76</followers_count>
  <profile_background_color>C0DEED</profile_background_color>
  <profile_text_color>333333</profile_text_color>
  <profile_link_color>0084B4</profile_link_color>
  <profile_sidebar_fill_color>DDEEF6</profile_sidebar_fill_color>
  <profile_sidebar_border_color>C0DEED</profile_sidebar_border_color>
  <friends_count>60</friends_count>
  <created_at>Sun Mar 14 07:28:05 +0000 2010</created_at>
  <favourites_count>1</favourites_count>
  <utc_offset>10800</utc_offset>
  <time_zone>Riyadh</time_zone>
  <profile_background_image_url>http://a0.twimg.com/images/themes/theme1/bg.png</profile_background_image_url>
  <profile_background_image_url_https>https://si0.twimg.com/images/themes/theme1/bg.png</profile_background_image_url_https>
  <profile_background_tile>false</profile_background_tile>
  <profile_use_background_image>true</profile_use_background_image>
  <geo_enabled>true</geo_enabled>
  <verified>false</verified>
  <statuses_count>6941</statuses_count>
  <lang>en</lang>
  <contributors_enabled>false</contributors_enabled>
  <is_translator>false</is_translator>
  <listed_count>1</listed_count>
  <default_profile>true</default_profile>
  <default_profile_image>false</default_profile_image>
  <following></following>
  <follow_request_sent></follow_request_sent>
  <notifications></notifications>
</user> 
```

这是 json（太大） [http://430201246.it341.com/MS2/fallowers.json](http://430201246.it341.com/MS2/fallowers.json)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:26:40.460

JSON 的问题在于您不能对 json 使用诸如“查找”之类的方法。您需要将其更改为：

```
$("#click_here").click(function() {
                    $.ajax({
                   url: "followers.json",
                   dataType: "json",
                   success: function(json) {
                             json.id.each(function() { 
                               var imge_url = $(this).find('profile_image_url').text();
                               $("followers").append(imge_url);})
                             });
                       }
            }). 
```

对于 XML，你离它如此之近是痛苦的！

```
$.ajax({
                   url: "show.xml",
                   dataType: "xml",
                   success: function(xml) {
                              var name = $(xml).find('name').text();
                              var bio = $(xml).find('description').text();
                              var imge_url = $(xml).find('profile_image_url').text();
                              $("profile_imge").append(imge_url);
                              $("name").append(name);
                              $("bio").append(bio);
                       } 
```

# html - 多个页面上的一个 div

> ID：13298039
> 
> 赞同：0
> 
> 时间：2012-11-08T21:23:03.060
> 
> 标签：html, css

我的所有页面上都有一个 div 类。除了手动编辑每个参数，有没有办法在其他地方输入新参数并在所有页面上更新？

div的名称是`<td class="left_content">`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T21:26:36.413

不，不是您列出的三种技术（css、html5、css3）。

您需要一个动态的服务器端语言/框架来构建由组件组成的页面，例如 Ruby on Rails 或 PHP。这些技术允许您以编程方式构建页面，此时您可以应用标准实践，例如将通常重新键入的代码位提取到函数中，或者将多个位置所需的代码移动到外部包含的文件中。

# c# - Oracledataadaptor Fillschema 不适用于 novalidate 表约束

> ID：13298042
> 
> 赞同：1
> 
> 时间：2012-11-08T21:23:07.357
> 
> 标签：c#, odp.net

我正在使用 ODP.net 使用 C# winform 更新表。如果我的 oracle 表约束没有验证，我会收到动态 SQL 错误。如果我没有删除/编辑工作正常。

请告诉除以下选项之外如何解决此问题 1\. 在代码中手动设置主键，因为代码是通用的。2.删除oracle表中约束内的novalidate。

* * *

Oracle 表约束：

```
ALTER TABLE "table1" ADD CONSTRAINT "PK_table1" PRIMARY KEY ("EMP_ID") ENABLE NOVALIDATE; 
```

C#代码：

```
using Oracle.DataAccess.Client;

public partial class Form1 : Form
    {
        OracleConnection OraConn;
        OracleDataAdapter FOraDataAdapt;
        DataTable OraDataTable;
        BindingSource FBindSource;
        int RecNo;

        public Form1()
        {
            InitializeComponent();
            OraConn = new OracleConnection("Data Source=ORCL1;User Id=123;Password=123;");
        }

        private void btnConnect_Click(object sender, EventArgs e)
        {
            try
            {
                OraConn.Open();

                OracleCommand FOraCommand = new OracleCommand("select * from table1", OraConn);
                FOraDataAdapt = new OracleDataAdapter(FOraCommand);                   OracleCommandBuilder FOraCommandBuilder = new OracleCommandBuilder(FOraDataAdapt);
                OraDataTable = new DataTable();

                DataTable TableSchema = new DataTable();
                FOraDataAdapt.Fill(OraDataTable);
                FOraDataAdapt.FillSchema(TableSchema, System.Data.SchemaType.Source);

                FBindSource = new BindingSource();
                FBindSource.DataSource = OraDataTable;

                grdView.DataSource = FBindSource; 

            }
            catch (Exception Exp)
            {
                MessageBox.Show(Exp.Message);
            }
        }

        private void btnDelete_Click(object sender, EventArgs e)
        {
            try
            {
                RecNo = FBindSource.Position;
                FBindSource.RemoveAt(RecNo);
                FOraDataAdapt.Update(OraDataTable);            
                OraDataTable.Rows[RecNo].AcceptChanges();
            }
            catch (Exception Exp)
            {
                MessageBox.Show(Exp.Message);
            }
        }

        private void btnModify_Click(object sender, EventArgs e)
        {
            RecNo = FBindSource.Position;
            OraDataTable.Rows[RecNo].BeginEdit();
        }

        private void btnPost_Click(object sender, EventArgs e)
        {
            try
            {
                FBindSource.EndEdit();
                FOraDataAdapt.Update(OraDataTable);
                OraDataTable.Rows[RecNo].AcceptChanges();
            }
            catch (Exception Exp)
            {
                MessageBox.Show(Exp.Message);
            }
        }
    } 
```

# asp.net - 如何在鼠标悬停在网格视图列标题上添加工具提示

> ID：13298044
> 
> 赞同：9
> 
> 时间：2012-11-08T21:23:13.597
> 
> 标签：asp.net, gridview

当用户将鼠标悬停在 gridview 中列的列标题上时，例如： Column Heading **Year**，当我将鼠标悬停在 Year 上时，我应该看到该年份的解释“这是学生加入大学的年份等”。

下面是我的 ascx 代码：

```
 <asp:GridView ID="grdView" runat="server" Width="900px" AutoGenerateColumns="False"
                AllowPaging="true" AllowSorting="true" CellSpacing="0" CellPadding="5" PageSize="20"
        OnRowDataBound="grdView_RowDataBound">
                <Columns>
 <asp:TemplateField HeaderText="ID Number" ItemStyle-Width="90px" >
    <ItemTemplate>
      <asp:Label ID="Label1" runat="server" Text='<%# Bind("ID")%'></asp:Label>
    </ItemTemplate>
 </asp:TemplateField><asp:BoundField DataField="StudentName" HeaderText="StudentName"> </asp:BoundField> 
```

请让我知道如何将鼠标悬停在网格视图的列标题上的文本或工具提示上。谢谢，

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-05-27T12:31:48.680

![这是 C# 中使用 Jquery 的 Gridview 的 CSS 工具提示](../Images/0f995df4ea0bf4207e30c81ed6b146eb.png)

```
protected void grd_popup_details_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        for (int i = 0; i < e.Row.Cells.Count; i++)
        {
            e.Row.Cells[i].ToolTip = e.Row.Cells[i].Text;
        }
    } 
```

[参考链接](http://goo.gl/5r5jnR)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-08T22:20:23.637

我从来没有做过任何asp.net开发，但是这里似乎提供了一个解决方案：[how to add title for each header column in gridview in ASP.NET](https://stackoverflow.com/questions/10726079/how-to-add-title-for-every-header-column-in-gridview-in-asp-net)

您的示例可能如下所示：

```
 <asp:GridView ID="grdView" runat="server" Width="900px" AutoGenerateColumns="False"
            AllowPaging="true" AllowSorting="true" CellSpacing="0" CellPadding="5" PageSize="20"
    OnRowDataBound="grdView_RowDataBound">
            <Columns>
 <asp:TemplateField HeaderText="ID Number" ItemStyle-Width="90px" >
<HeaderTemplate>
       <asp:Label ID="Header" ToolTip="HERE WE GO!!!!" runat="server" Text="Label"></asp:Label>
       </HeaderTemplate>
    <ItemTemplate>
      <asp:Label ID="Label1" runat="server" Text='<%# Bind("ID")%'></asp:Label>
    </ItemTemplate>
 </asp:TemplateField><asp:BoundField DataField="StudentName" HeaderText="StudentName"> </asp:BoundField> 
```

我会试试看:)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-01T17:37:55.213

在后面的代码中，为 GridView 创建方法 rowDataBound 并添加以下代码

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.Header)
    {
        foreach (TableCell cell in e.Row.Cells)
        {
            cell.Attributes.Add("title", "Tooltip text for " + cell.Text);
        }
    }
} 
```

不要忘记在 GridView 中设置属性 OnRowDataBound。

[http://rosshawkins.net/archive/2007/04/15/adding-tooltips-to-gridview-headers.html.aspx](http://rosshawkins.net/archive/2007/04/15/adding-tooltips-to-gridview-headers.html.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-29T00:16:36.537

这是一个示例，显示即使在 Autogenerate=True 并且动态确定 GridView 列时也可以使用 ColumnName。

当文本包含转义字符（例如双引号）时，似乎也需要 HtmlDecode() 。

```
Dictionary<string, int> _headerIndiciesForDetailsReportGridView = null;

protected void detailsReportGridView_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (_headerIndiciesForDetailsReportGridView == null)
    {
        int index = 0;
        _headerIndiciesForDetailsReportGridView = ((Table)((GridView)sender).Controls[0]).Rows[0].Cells
            .Cast<TableCell>()
            .ToDictionary(c => c.Text, c => index++);
    }

    if (e.Row.RowType == DataControlRowType.DataRow)
    {                            
        TableCell cell = e.Row.Controls[_headerIndiciesForDetailsReportGridView["theColumnName"]] as TableCell;

        // Shorten text in a particular column to a max of 20 characters.
        // Set tooltip to the full original text. Decode to remove &quot, etc.
        //
        string orgText = cell.ToolTip = HttpUtility.HtmlDecode(cell.Text);

        if (orgText.Length > 20)    // If cell text should be shortened
            cell.Text = HttpUtility.HtmlEncode(orgText.Substring(0, 20) + "...");
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-11T05:42:59.837

```
if (e.Row.RowType == DataControlRowType.DataRow)
{
     e.Row.Cells[1].ToolTip = Grd.Columns[1].HeaderText;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-06T05:01:04.423

```
 <ItemTemplate>                                                                               <asp:HiddenField ID="HiddenField1" runat="server" Value='<%#Bind("EmpInfoDetail") %>' />                                                                                                                                                              <asp:Label ID="Label3" runat="server" Text="" Visible="false" Font-Bold="true" ForeColor="#cc3300" CssClass="tooltip"></asp:Label>                                                                                                                                                                                                                                                                                         </ItemTemplate> 

     use this code on grid view row data bound   
        #region show grid text on mouse hover
                        if (e.Row.RowType == DataControlRowType.DataRow)
                        {
                            DataRowView drv = e.Row.DataItem as DataRowView;
                            Label test = e.Row.FindControl("Label3") as Label;
                            if (drv["EmpInfoDetail"].ToString().Length > 500)
                            {
                                test.Text = drv["EmpInfoDetail"].ToString().Substring(0, 500) + "...";
                            }
                            else
                            {
                                test.Text = drv["EmpInfoDetail"].ToString();
                            }

                            e.Row.Cells[1].ToolTip = drv["EmpInfoDetail"].ToString();

                        }
                        #endregion 
```

# model-view-controller - Model-View-Controller - 传统上哪个组件处理文件 I/O？

> ID：13298050
> 
> 赞同：5
> 
> 时间：2012-11-08T21:23:46.583
> 
> 标签：model-view-controller, design-patterns, file-io

在传统的 MVC 应用程序中，哪个组件（模型、视图或控制器）负责从磁盘读取/写入模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:59:26.030

**简短的回答：**模型层。

大多数存储形式都是模型层的一部分*（模板和类自动加载器除外）*。在完全实现的模式层中，您将拥有一组直接与低级存储（SQL、缓存、REST API、noSQL、文件系统等）抽象交互的对象。

如果您的应用程序正在主动读取和写入文件系统（它实际上可以挂载远程 MemoryFS，您通过 SSH 隧道通过 Fuse 挂载 .. 没关系），这将由处理存储逻辑的结构处理。通常是某种形式的[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)（认为它也可能是[存储库](http://martinfowler.com/eaaCatalog/repository.html)、[工作单元](http://martinfowler.com/eaaCatalog/unitOfWork.html)、[DAO](http://www.oracle.com/technetwork/java/dataaccessobject-138824.html)和/或一些类似的结构）。

存储抽象通常负责从域对象中存储数据和将数据检索到[域对象](http://c2.com/cgi/wiki?DomainObject)中。在大型应用程序中，域对象和存储逻辑结构之间的这种交互包含在[服务](https://en.wikipedia.org/wiki/Service_%28systems_architecture%29)中，以隔离应用程序和域业务逻辑，以免在表示层中泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T21:27:24.357

`MVC` **通常是一个表示层框架**，它在基于表示的应用程序中处于顶层。在实际的企业应用程序中，您可能在它下面有几个层。

通常这是在另一层中完成的：您可以将其命名为`Business Layer`或`Service Layer`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T21:35:23.310

与其他人发布的一样，您通常会在 MVC 应用程序下方有一个域/业务层/数据层。如果您正在寻找一些如何使用 Entity Framework 实现此类堆栈的好示例，请查看 NerdDinner 和 MVC Music Store 示例。

[http://www.nerddinner.com/](http://www.nerddinner.com/)

[http://mvcmusicstore.codeplex.com/](http://mvcmusicstore.codeplex.com/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T21:36:31.247

围绕“层”和架构模式存在一些复杂性和大量混淆。如果您正在寻找最简单的答案，并且为了简单起见，您已决定代码的每一部分都位于（模型、视图或控制器）中的一个且仅一个中，那么我给您的答案是选择用于数据库访问的模型。现实情况是，所有的架构模式都是不完美的，你将不得不看到经验中的正确感觉。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T21:25:26.113

MVC 只是更大架构的*一部分*。

诸如持久性之类的基础设施问题通常由 MVC 三元组之外的一些类/对象处理。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T21:26:13.723

mvc 中不必有任何磁盘 io。如果有，它可能属于模型中或模型附近，如果那是持续存在的。

# ios - 一个 UIView 来统治它们，一个 UIView 来绑定它们

> ID：13298052
> 
> 赞同：1
> 
> 时间：2012-11-08T21:23:47.077
> 
> 标签：ios, xcode, memory-management, uiview

我面临两个具有相同代码的 UIView 的问题：

两个主要的 UIView：

```
UIView *firstView;
UIView *secondView;
UIView *thirdView;

self->thirdView = [[UIView alloc]initWithFrame(100,100,100,100)]; 
```

稍后在代码中：

```
self->firstView = [[UIView alloc]initWithFrame(0,0,200,200)];
self->secondView = [[UIView alloc]initWithFrame(0,0,200,200)]; 
```

然后在我做的代码中：

```
[self->firstView addSubView:self->thirdView];
[self->secondView addSubView:self->thirdView]; 
```

代码中发生的情况是，其中一个视图会以某种方式错过`thirdView`，我想知道它是否与我使用相同的事实有关`thirdView`。

如果是这样，`thirdView`很重要，我需要在两个视图中都使用它，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T21:26:51.387

问题是视图只能有一个父视图。如果您尝试将视图添加到第二个父视图，它将从第一个视图中删除，然后添加到第二个视图。

您不能同时添加`thirdView`两者。相反，您需要创建两个.`firstView``secondView``thirdView`

# c#-4.0 - C# 泛型 - 是否可以对仅接受 DataTable 和 String 的方法施加约束？

> ID：13298055
> 
> 赞同：0
> 
> 时间：2012-11-08T21:24:17.300
> 
> 标签：c#-4.0, generics

我想做这个：

```
public void MyMethod<T>(T myArg) where T: DataTable, String
{
    ...
} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:31:15.113

将其设为两种不同的方法将是无限可取的。

```
public void MyMethod(DataTable myArg)
{
    ...
}

public void MyMethod(String myArg)
{
    ...
} 
```

或者，如果是通用的（我不确定为什么在这种情况下需要通用）

```
public void MyMethod<T>(T myArg) where T: DataTable
{
    ...
}

public void MyMethodStr<T>(T myArg) where T: string
{
    ...
} 
```

或更糟糕的情况，如果不是这些类型之一，则抛出错误。这是最不可取的，因为它会在运行时抛出而不是编译。

```
public void MyMethod<T>(T myArg)
{
    if(myArg is String == false && myString is DataTable == false)
        throw new InvalidArgumentException(...);
} 
```

但除此之外，没有。

# ruby-on-rails - 更新 Rails 中的嵌套模型

> ID：13298064
> 
> 赞同：0
> 
> 时间：2012-11-08T21:24:54.570
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested, nested-forms

我有一个应用程序，其中有一个模型 Animal 有很多包。我正在尝试创建一个表单，其中可以更新与特定动物关联的包子集的 :true_weight 属性。此表单位于自定义 url/action 中（不是显示/新建/编辑或其他）。我觉得我做的大部分都是正确的，但它只是没有更新软件包。我将把我的（缩写的）代码放在下面，然后解释什么是有效的，什么是无效的。对此非常困惑：

包.rb

```
attr_accessible :true_weight # And irrelevant others
belongs_to :animal 
```

动物.rb

```
attr_accessible :finalized, :name # And irrelevant others
has_many :packages
accepts_nested_attributes_for :packages 
```

路线.rb

```
match '/animals/:animal_id/log' => "animals#log" 
```

动物/log.html.erb

```
<%= form_for(@animal) do |f| %> 

<div style="width: 200px">
        <%= f.label :name %>
        <%= f.text_field :name %>
</div>

    # This produces the subset of packages I want to be able to edit. It's an array
    # of arrays, so that each render produces a separate table made from one of the 
    # inner arrays.
<% @animal.packages_for_log.each do |bundle| %> 
    <%= render partial: 'package_bundle', locals: {:bundle => bundle} %><br>
<% end %>

<h4>And then you'd allow addition of extra packages here.</h4>

<%= f.submit "Submit Animal Log", :class => "btn image-button right" %>

<% end %> 
```

_package_bundle.html.erb

```
<table class="table">
    <thead>
        <tr>
            <th>Name</th>
            <th>Notes</th>
            <th>Label</th>
            <th>True Weight></th>
        </tr>
    </thead>
    <tbody>
        <% bundle.each do |package| %> <!-- Produces for each "bundle" the list of identical packages -->
            <%= fields_for package do |p| %>
                <% if package.order.user %>
                    <tr>
                        <td><%= package.name %></td>
                        <td><%= package.line.processed_notes %></td>
                        <td><%= "#{package.order.user.name.first(3).upcase}-#{package.id}" %></td>
                        <% if !package.true_weight %>
                            <td colspan=1><%= p.text_field :true_weight %></td
                        <% else %>
                            <td><%= package.true_weight.round(0) %>lb</td>

                        <% end %>  
                    </tr>
                <% end %>
            <% end %>   
        <% end %>
    </tbody>
</table> 
```

Animals_controller.rb（日志是动物动作/视图）

```
def log
    @animal = Animal.find(params[:animal_id])

    if @animal.update_attributes(params[:animal])
      puts "Inside If Block"
      @animal.toggle!(:finalized)
    else
      # I don't know about this. I wanted to redirect to the updated log page, with a flash
      # but when I last tried that, it had some recursive error, or would update without my 
      # submitting.
      render action: "log"
    end

  end 
```

所以。什么工作：

1.  正在访问我的动物控制器中的 if 块。但看起来它可能在我点击我的日志页面上的提交之前被访问。（我搜索并发现将行放入服务器日志中）。可能只是误读了。
2.  表单元素看起来不错。我在正确的位置获得了一大堆文本框，并且每个包裹的信息都打印到文本字段旁边的表格中的页面上是正确的。
3.  如果我在表格顶部填写动物名称属性，则（动物的）该属性将更新。

什么不起作用：

1.  当我提交时，它会将我重定向到动物表演页面 (!?!?)，并在常规更新操作后显示 Flash。
2.  @animal.toggle!(:finalized) 动作似乎没有做任何事情。也许，鉴于上面的 1，该布尔值被切换了两次？来回？
3.  最重要的是——它根本不会更新我的包。

任何想法这里发生了什么，或者我需要添加什么？我真的很困惑我做错了什么。

谢谢！

编辑——根据请求，为我的 packages_for_log 方法添加代码（在 animal.rb 文件中）

```
def packages_for_log 
    master = []
    self.packages.each do |p|
      if p.sold

        # The master has sublists
        if master.any?
          counter = 0

          # Check for matching list. Add if found.
          master.each do |list|
            if p.notes == list.first.notes && p.type == list.first.type
              list << p
              counter += 1 # Don't create list is appropriate one found.
            end
          end
          if counter == 0
            master << [p] if counter == 0 # Add as new list if list doesn't yet exist.
          end
        else # If master is empty, add the package to a new sub-list.
            master << [p]
        end

      end

    end
    master.sort
  end 
```

基本上，包有类型和注释。我希望日志为每个包类型/注释创建一个单独的表。所以我创建了一个数组，然后用所有包共享相同类型/注释的数组填充它。（首先，我确保它们都已售出。我不希望日志页面显示未售出的包裹。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:04:15.073

我认为这里的问题：

```
<%= form_for(@animal) do |f| %> 
```

默认使用此定义，Rails 将使用表单信息创建或更新记录，因此当您提交表单时，rails 检查这不是新记录，它执行的是`update`操作，而不是`log`操作。尝试更改为：

```
<%= form_for(@animal), :url => { :action => "log" }  do |f| %> 
```

并再次提交表单并检查它是否有效。

**编辑：**您不用于`fields_for`：

```
<% @animal.packages_for_log.each do |bundle| %> 
  <%= render partial: 'package_bundle', locals: {:bundle => bundle} %><br>
<% end %> 
```

添加`fields_for`并重试：

```
<%= fields_for @animal.packages_for_log.each do |bundle| %> 
  <%= render partial: 'package_bundle', locals: {:bundle => bundle} %><br>
<% end %> 
```

# .htaccess - .htaccess 网站重定向

> ID：13298065
> 
> 赞同：1
> 
> 时间：2012-11-08T21:24:55.130
> 
> 标签：.htaccess

我需要对我的网站进行更改，但在我确定它们是正确的之前，我不想将它们添加到我的真实帐户中。我的帐户是在 GoDaddy 上的，据他们说，我能做到这一点的唯一方法是将我的所有文件移动到另一个文件夹并通过转到该文件夹​​来测试我的更改。我没有从 Web 浏览器调用 Duphil.com，而是使用 Duphil.com/DuphilWork。.htaccess 文件中的编码不会让我留在这个文件夹中。

这是编码：

```
Options +FollowSymLinks
RewriteEngine on
RewriteBase /

ErrorDocument 404 /index.php?page=404
ErrorDocument 403 /index.php?page=403

RewriteRule ^$ /index.php
RewriteRule ^about/$ /index.php?page=about
RewriteRule ^oilfield/$ /index.php?page=oilfield
RewriteRule ^pipeline/$ /index.php?page=pipeline
RewriteRule ^safety/$ /index.php?page=safety
RewriteRule ^sales/$ /index.php?page=sales
RewriteRule ^contact/$ /index.php?page=contact
RewriteRule ^stateLicensures/$ /index.php?page=stateLicensures
RewriteRule ^keyPersonnel/$ /index.php?page=keyPersonnel
RewriteRule ^projectListings/$ /index.php?page=projectListings
RewriteRule ^legal/$ /index.php?page=legal
RewriteRule ^techDivision/$ /index.php?page=techDivision

RewriteRule ^equipment/$ /index.php?page=equipment
RewriteRule ^projectImages/$ /index.php?page=projectImages
RewriteRule ^contact/(.*)/$ /index.php?page=contact&contactName=$1 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:40:45.377

你做你的`.htaccess`方式很混乱。每个页面的规则都有许多缺点，其中最重要的是，如果您添加一个页面，则必须更新您的`.htaccess`. 另一个缺点是您不能简单地添加例外，因为您必须为每个规则添加。但是，我们可以做的一件事是将页面重写为自身，并告诉它一旦这样做就不应继续重写：

```
RewriteRule ^DuphilWork/(.*)$ DuphilWork/$1

RewriteRule ^$ /index.php
[..] 
```

现在，这意味着您仍然必须在测试站点上编写您的 url 而无需重写。换句话说，它们必须是这样的：`Duphil.com/DuphilWork/index.php?page=oilfield`.

如果您还想在测试站点中编写更高级的 url，则当前设置的唯一方法是复制您的所有规则`.htaccess`并添加`DuphilWork`到匹配模式和其中一个副本中的重定向路径。

真正的解决方案当然是有一个这样的规则：

```
RewriteCondition !-f
RewriteRule ^(.*)$ /index.php?page=$1 
```

然后确保 index.php 正确解析该页面字符串（现在包括确保页面存在。在这种情况下，解决您当前的问题变得微不足道。但是，我相信您应该能够使用我上面给出的解决方案。

* * *

使用我上面描述的涉及复制所有内容的策略，你最终会得到这样的结果：

```
Options +FollowSymLinks
RewriteEngine on
RewriteBase /

ErrorDocument 404 /index.php?page=404
ErrorDocument 403 /index.php?page=403

RewriteRule ^DuphilWork/$ /DuphilWork/index.php
RewriteRule ^DuphilWork/about/$ /DuphilWork/index.php?page=about
RewriteRule ^DuphilWork/oilfield/$ /DuphilWork/index.php?page=oilfield
RewriteRule ^DuphilWork/pipeline/$ /DuphilWork/index.php?page=pipeline
RewriteRule ^DuphilWork/safety/$ /DuphilWork/index.php?page=safety
RewriteRule ^DuphilWork/sales/$ /DuphilWork/index.php?page=sales
RewriteRule ^DuphilWork/contact/$ /DuphilWork/index.php?page=contact
RewriteRule ^DuphilWork/stateLicensures/$ /DuphilWork/index.php?page=stateLicensures
RewriteRule ^DuphilWork/keyPersonnel/$ /DuphilWork/index.php?page=keyPersonnel
RewriteRule ^DuphilWork/projectListings/$ /DuphilWork/index.php?page=projectListings
RewriteRule ^DuphilWork/legal/$ /DuphilWork/index.php?page=legal
RewriteRule ^DuphilWork/techDivision/$ /DuphilWork/index.php?page=techDivision

RewriteRule ^DuphilWork/equipment/$ /DuphilWork/index.php?page=equipment
RewriteRule ^DuphilWork/projectImages/$ /DuphilWork/index.php?page=projectImages
RewriteRule ^DuphilWork/contact/(.*)/$ /DuphilWork/ index.php?page=contact&contactName=$1

RewriteRule ^$ /index.php
RewriteRule ^about/$ /index.php?page=about
RewriteRule ^oilfield/$ /index.php?page=oilfield
RewriteRule ^pipeline/$ /index.php?page=pipeline
RewriteRule ^safety/$ /index.php?page=safety
RewriteRule ^sales/$ /index.php?page=sales
RewriteRule ^contact/$ /index.php?page=contact
RewriteRule ^stateLicensures/$ /index.php?page=stateLicensures
RewriteRule ^keyPersonnel/$ /index.php?page=keyPersonnel
RewriteRule ^projectListings/$ /index.php?page=projectListings
RewriteRule ^legal/$ /index.php?page=legal
RewriteRule ^techDivision/$ /index.php?page=techDivision

RewriteRule ^equipment/$ /index.php?page=equipment
RewriteRule ^projectImages/$ /index.php?page=projectImages
RewriteRule ^contact/(.*)/$ /index.php?page=contact&contactName=$1 
```

# .net - WCF返回数组而不是列表即使集合类型== Generic.List

> ID：13298066
> 
> 赞同：3
> 
> 时间：2012-11-08T21:24:55.707
> 
> 标签：.net, wcf

我有一个 WCF 服务 (.svc) 项目，如下所示：

```
[ServiceContract]
public interface IAdminQueries
{

    [OperationContract]
    List<Color> GetColors();

    [OperationContract]
    List<PhoneType> GetPhoneTypes();

    ... 
```

我有另一个项目是 Web 应用程序。我向上述服务添加了服务引用。单击 Advanced 按钮并从 Collection Type 中选择 Generic.List。一切似乎都应该如此。

然后，我使用以下代码构建并获取错误：

```
 AdminQueriesClient db = new AdminQueriesClient();
    List<Color> s = db.GetColors(); 
```

这是错误：

```
 Cannot implicitly convert type 'DogLicenseBO.DogLicenseServiceReference.Color[]' to 'System.Collections.Generic.List<DogLicenseBO.DogLicenseServiceReference.Color>' 
```

是否有东西阻塞或覆盖了正常的序列化/反序列化过程？

**编辑** 我让它再次工作。但是，我想我需要我拿出的东西。

*修复* 这一切都开始了，因为我必须将 VS 2012 项目转换为 VS 2010。我正在使用很多很棒的功能，但必须降级。无论如何，VS 2012 中的参考资料之一是 Newtonsoft.Json。我在几个地方使用它。当我在 VS 2010 中取出并重建时，一切正常。现在我需要更多的测试来看看我可以使用 Json 序列化而不是 Newtonsoft。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:24:25.437

在名为 Fix 的 EDIT 之后，答案出现在我的原始帖子中。但我也不妨把它贴在这里。

这一切都开始了，因为我必须将 VS 2012 项目转换为 VS 2010。我正在使用很多很棒的功能，但必须降级。无论如何，VS 2012 中的参考资料之一是 Newtonsoft.Json。我在几个地方使用它。当我在 VS 2010 中取出并重建时，一切正常。现在我需要更多的测试来看看我可以使用 Json 序列化而不是 Newtonsoft。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:30:20.880

在添加了服务引用的客户端中，右键单击服务引用并选择“配置服务引用”，在数据类型部分下，它应该为集合类型列出“System.Array”（因为这是为非 .NET 客户端兼容性）。在此区域中，您可以将其更改为默认发出通用列表而不是数组。

# java - 使用 FQL android 获取所有 facebook 专辑 ID

> ID：13298069
> 
> 赞同：0
> 
> 时间：2012-11-08T21:25:01.883
> 
> 标签：java, android, facebook, facebook-fql

> 嗨，我正在尝试以这种方式从 android 用户那里获取所有专辑 ID：

```
 Bundle params2 = new Bundle();
    params2.putString("method", "fql.query");
    params2.putString(Facebook.TOKEN, facebook.getAccessToken());
    params2.putString("query", "SELECT object_id FROM album WHERE owner=me()"); 
    AsyncFacebookRunner mAsyncRunner2 = new AsyncFacebookRunner(facebook);
    mAsyncRunner2.request(null, params,new AlbumNamesListener(),null); 
```

在 AlbumNamesListener 中，我试图查看响应并显示：{"error_code":3,"error_msg":"Unknown method","re​​quest_args":[{"key":"access_token","value":" fffffffff9ZD"},{"key":"format","value":"json"}]}。

我究竟做错了什么？请给我一个提示，如何在 Android 应用程序中从用户那里获取所有专辑 ID。谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T00:55:49.300

这是正确的 FQL 查询：`SELECT aid from album WHERE owner = me()`

改用那个。

# sql-server-2005 - DateDiff 上的 SQL 性能

> ID：13298070
> 
> 赞同：2
> 
> 时间：2012-11-08T21:25:08.050
> 
> 标签：sql-server-2005

如何改进以下sql：

```
dateDiff(d,a.DateValue,Convert(datetime, Convert(char(10), getdate(), 101) , 101))>90 
```

它正在扼杀我的表现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T21:34:42.060

采用

`WHERE a.DateValue > DATEADD(dd, -90, DATEDIFF(dd, 0, GETDATE()))`

使谓词 sargable （在函数调用中包装列几乎总是意味着不能使用索引）

# ios - 如何协调 FBDialog API 与我的应用程序的 Facebook 集成的其余部分？

> ID：13298073
> 
> 赞同：1
> 
> 时间：2012-11-08T21:25:14.057
> 
> 标签：ios, facebook, facebook-ios-sdk, fbdialogs

我对 Facebook 和我的应用程序的一般流程感到困惑。当用户通过 SSO 在我们的服务（我称之为 MyApp）上创建帐户时，我们会将他们在 MySite 上的帐户与他们的 Facebook uid 和访问令牌相关联。然后，根据他们在 MyApp 上的操作，我们可以将操作发布到他们的时间线并访问他们在 Facebook 上的信息。创建帐户后，用户还可以选择密码，然后在不使用 Facebook 的情况下登录，只需使用电子邮件和密码即可。顺便说一句，还有一些用户的帐户没有连接 Facebook，只能使用电子邮件和密码登录。这就是全部，我认为，非常典型。

但是，我们希望在 MyApp iOS 客户端中为用户发送用户到用户请求并在其他人的时间线上共享，这两者似乎都需要使用 FBDialog API。如果用户使用 Facebook 登录，这应该可以正常工作，因为我们为他们提供了一个活动会话。但是，如果他们是未通过 Facebook 登录的 Facebook 连接用户，我们如何代表他们打开对话框？应用程序检索我们在后端为用户存储的 Facebook 访问令牌是否符合规定？如果没有，还有什么其他的办法？然后我们可以打开另一个 Facebook 会话，但用户可以作为与其 MyApp 帐户所连接的用户完全不同的用户登录，这（虽然不一定那么糟糕）不是所需的行为。

谢谢你的帮助！对不起文字的墙壁。

# java - 使用 rpc 将肥皂消息转换为基于 wsdl 的对象

> ID：13298075
> 
> 赞同：0
> 
> 时间：2012-11-08T21:25:21.947
> 
> 标签：java, soap, wsdl, axis

我有一个带有一项服务的 WSDL。该服务使用 rpc。因此我使用轴 1.2，并使用 wsdl2java 来获取 java 对象（.java）。现在，我有了 wsdl、java 对象和消息。如何在不暴露服务的情况下将此消息转换为 java 对象（某些方法或某些东西不涉及暴露）？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:08:17.027

[http://bwithers.wordpress.com/2006/07/29/serializing-an-axis-javabean-object-to-xml/](http://bwithers.wordpress.com/2006/07/29/serializing-an-axis-javabean-object-to-xml/)

最后我找到了解决方案，关键字是反序列化，在这个页面的评论中是在不暴露 WS 的情况下进行此操作的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T05:24:41.117

我认为您需要根据消息的内容编写自己的解析器。这里有一个类似的问题：[Unmarshalling SOAP Messages to java / or simply parsing SOAP message?](https://stackoverflow.com/questions/7402357/unmarshalling-soap-messages-to-java-or-simply-parsing-soap-message)

# jquery - MVC3 Jquery viewdata 禁用按钮

> ID：13298077
> 
> 赞同：0
> 
> 时间：2012-11-08T21:25:29.993
> 
> 标签：jquery, asp.net-mvc-3

以下代码没有禁用 html 按钮。我正在使用 MVC3 剃须刀。谁能指出我哪里出错了

```
@{
   bool disablebutton = bool.Parse(ViewData["Disablebutton"].ToString());        
 }    

 $(document).ready(function () {  
   if (@disablebutton) {
     $('#abc').attr('disabled', 'disabled');
   }       
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:49:55.433

根据您对问题的评论，您的问题是：“True”不是有效的 Javascript。它必须`true`全部小写。看看你的 JS 错误控制台，我相信你会有一个错误。

你可以做`if (@disablebutton.ToLower())`

以上只是解决您的问题的一种方法。将服务器端与客户端混合时需要小心。

# ruby-on-rails - 解释 Rails 项目中的脚本/Web 是什么

> ID：13298079
> 
> 赞同：0
> 
> 时间：2012-11-08T21:25:41.603
> 
> 标签：ruby-on-rails, thin

`exec bundle exec thin -p $PORT -e ${RACK_ENV:-development} start 2>&1`

这就是我的`script/web`. 有人可以解释其中的个别部分吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:34:44.233

该脚本试图`thin`在`bundler`. 这里任何有 $ 的东西都是来自命令行的用户参数。端口和端口`RACK_ENV`是从命令中定义的。`RACK_ENV`具有开发环境的默认值，这意味着如果没有提供环境，则使用开发环境启动事物

就其`2>&1`而言，`1`是标准输出。`2`是标准错误。

这是记住这个结构的一种方法（尽管它并不完全准确）：起初，`2>1`可能看起来像是将 stderr 重定向到 stdout 的好方法。但是，它实际上会被解释为“将 stderr 重定向到名为 1 的文件”。& 表示后面是文件描述符而不是文件名。所以构造变成：`2>&1.`

# asp.net-web-api-routing - Asp.NET Web Api - 多个 api/命名空间

> ID：13298081
> 
> 赞同：2
> 
> 时间：2012-11-08T21:25:45.877
> 
> 标签：asp.net-web-api-routing

在我的 MVC4 Web 应用程序中，我需要支持多个 API。我环顾四周，显然在 Web API 中，不支持在不同名称空间中具有相同名称的控制器。

我有哪些选择？

例如：我希望能够向我的 API 消费者提供链接，例如，

```
http://domainurl/api/api1/Students...
http://domainurl/api/api2/Students... 
```

api1 中的学生资源可以与 api2 中的完全不同。在这种情况下，最好的方法是什么？我不想让它成为一个单一的 api 并通过 url 参数来处理它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T21:03:44.677

也许将 2 个不同的 API 分离到两个不同的项目中并让他们担心自己的 API 可能会更好。

*   MyApi.V1.csproj
*   MyApi.V2.csproj

然后让 IIS 使用虚拟应用程序指向单独的版本

*   [http://myapi.com/v1/values](http://myapi.com/v1/values)
*   [http://myapi.com/v2/values](http://myapi.com/v2/values)

我认为这比将它们粉碎到同一个项目文件中更易于管理。另外，如果您决定使用任何解析器，这将帮助每个项目进行反思。

# java - java中字符串拆分的正则表达式

> ID：13298088
> 
> 赞同：1
> 
> 时间：2012-11-08T21:26:15.597
> 
> 标签：java, regex

我有以下形式的字符串：

```
HOME(SPADE0) HOME(HEART0) HOME(CLUB0) BOTTOMCOL(CLUBA) ON(HEART2 CLUBA) 
```

我想把它分成

```
 HOME(SPADE0)
    HOME(HEART0)
    HOME(CLUB0)
    BOTTOMCOL(CLUBA)
    ON(HEART2 CLUBA) 
```

在空间分割也会分割最后一个标记，这是我不想要的。什么是适合它的正则表达式？

提前致谢！

编辑

```
 String[] tokens = line.split("[)]\\s+"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T21:29:40.203

通过匹配内容而不是分隔符来更好地分割：

```
final Matcher m = Pattern.compile("\\w+\\(.*?\\)").matcher(input);
final List<String> matches = new ArrayList<>();
while (m.find()) matches.add(m.group()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T21:29:18.197

试试这个正则表达式（使用`Negative look-ahead`）： -

```
String[] arr = str.split("\\s+(?![^(]*\\))");
System.out.println(Arrays.toString(arr)); 
```

它只会在空间上分裂，而不是在`(`和之间`)`。

**输出**： -

```
[HOME(SPADE0), HOME(HEART0), HOME(CLUB0), BOTTOMCOL(CLUBA), ON(HEART2 CLUBA)] 
```

**解释： -**

```
\\s+             // split on space (one or more)

   (?!           // Negative look ahead (Not followed by)
      [^(]*      // Anything except `(` (0 or more)
      \\)        // Ending with `)`
    )            // End 
```

因此，如果您的空间介于 和 之间`(`，`)`如`(HEllo World)`.

它与上面的正则表达式不匹配。因为那里的空间后面是： -

```
[^(]*  // Any string not containing `(` - World

\\)   // Ending with `)` 
```

* * *

请注意，尽管这将解决您的问题`split`。但理想情况下，这应该使用`Pattern`and来完成`Matcher`。正如@Marko的回答一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T21:52:14.893

这应该有效：

```
Pattern ptrn = Pattern.compile("\\w+\\(.+?\\)"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T22:01:26.287

为什么不只是拆分“）”，然后将其附加到所有找到的标记上？

```
String [] results = str.split( ")" );

String token1 = results[0].trim() + ")"; // the trim is to remove leading spaces 
```

这是假设您的所有数据都与呈现的格式匹配。

# pyephem - 为地球卫星对象捕获 ehem.Body.compute() 时出错

> ID：13298089
> 
> 赞同：3
> 
> 时间：2012-11-08T21:26:18.527
> 
> 标签：pyephem

尝试计算以下 TLE 时，计算结果不完整：

```
FENGYUN 1C DEB
1 31034U 99025BEC 12293.69998868  .02147743  29582-2  52063-2 0  1666
2 31034 099.0270 256.6567 0044344 106.5074 254.5558 15.95183245303888 
```

此 TLE 使用以下方式读取

```
obj = readtle(line0, line1, line2) #where line0 is the 0th line, line1 is the 1st line etc. 
```

我设置了一个观察者如下：

```
#Observatory Data
obs = ephem.Observer()
obs.lat = '32.345010'
obs.lon = '-111.011647'
obs.elevation = 400
obs.name = 'myObs'
obs.date = '2012/11/9 01:52:48' 
```

当我使用

```
obj.compute(obs) 
```

该函数无法在 obj.ra、obj.elevation 等中填充适当的值，但不会崩溃或挂起（有时它也会这样做） ，不完整的结果使我的程序的其余部分崩溃；我只是想找出一种方法来捕捉这个异常，但没有这样做。

我试过了

```
try:
    obj.compute(obs) # no exception is thrown by compute
except:
    print 'bad computation'
    continue 
```

也试过

```
if ~obj.elevation: continue 
```

这给出了一个不同的错误，表明 ~ 运算符不能用于 obj.elevation 数据类型（或类似的东西）。

有没有办法捕捉 Body.compute() 导致的这些异常？

# javascript - 如何在流星中监听整个页面的点击事件？

> ID：13298094
> 
> 赞同：9
> 
> 时间：2012-11-08T21:26:36.737
> 
> 标签：javascript, meteor, dom-events

我正在尝试排行榜示例，并且我想取消设置`selected_player`当您在玩家姓名之外单击时的设置。我认为要使其正常工作，我需要向 body 元素添加一个侦听器事件，并防止它触发其中的其他元素。然后我会设置`selected_player`为0。

但是我似乎只能将事件映射添加到模板？

```
 Template.player.events({
    'click': function () {
      Session.set("selected_player", this._id);
    }
  }); 
```

我错过了什么吗？ **如何收听整个页面的“点击”事件？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-14T02:04:37.777

没有很好的方法将事件绑定到整个身体。但是，正如 Narven 建议的那样，您可以将所有代码包装在一个具有事件的外部模板中。

```
<body>
  {{> outer}}
</body>

<template name="outer">
   your stuff
</template> 
```

和

```
Template.outer.events({
  'click': function () {
    do stuff 
  }
}); 
```

# javascript - 从 JS 加载 activeX 在 IE8 上不起作用

> ID：13298097
> 
> 赞同：0
> 
> 时间：2012-11-08T21:26:45.690
> 
> 标签：javascript, internet-explorer

我正在尝试从 JS 函数加载一个 activeX。以下代码适用于 IE9，但不适用于 IE8：

```
 obj_to_load = document.createElement("object");
 obj_to_load.innerHTML = "<OBJECT CLASSID=\"CLSID:4EC...\" CODEBASE=\"http://192.168.1.12:8000/ax_vs8.CAB\" ID=\"ax_101\" name=\"ax_101\">";
 document.body.appendChild(obj_to_load);
 ax = document.all('ax_101'); 
```

一个想法？10xs，尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:32:54.233

IE 不会让你`object`用`document.createElement`. 相反，您必须执行以下操作：

```
var obj = document.createElement("div");
obj.innerHTML = "<OBJECT CLASSID=\"CLSID:4EC...\" CODEBASE=\"http://192.168.1.12:8000/ax_vs8.CAB\" ID=\"ax_101\" name=\"ax_101\">";
document.body.appendChild(obj); 
```

# plugins - CakePHP Uploader Plugin - 使用行为设置保存多种尺寸

> ID：13298101
> 
> 赞同：1
> 
> 时间：2012-11-08T21:26:49.517
> 
> 标签：plugins, cakephp-2.0, behavior, uploader

我正在尝试使用我在 Web 应用程序上使用的模型的`Uploader`插件。我已经将它与我在这里展示的配置一起使用：`Behavior``User``filename`

```
<?php
class Avatar extends AppModel {
    public $name = 'Avatar';
    public $actsAs = array (
        'Uploader.Attachment' => array (
            'filename' => array (
                'name'        => 'setNameAsImgId',
                'saveAsFilename' => true,
                'uploadDir'    => '/files/avatars/160/',
                'dbColumn'    => 'filename',
                'defaultPath'    => 'default.png',
                'maxNameLength'    => 20,
                'overwrite'    => true,
                'stopSave'    => true,
                'allowEmpty'    => false,
                'transforms'    => array (
                    array('method' => 'resize', 'width' => 160, 'height' => 160, 'dbColumn' => 'filename', 'append' => false, 'overwrite' => true)
                )
            )
        )
    );
// and so on...
?> 
```

此配置将文件保存到我通过控制器`/files/avatars/160`使用此方法保存所有大小为 160 像素的图像的文件夹中：`Users`

```
<?php
class UsersController extends AppController {

public function add () {
    if ($this->User->Avatar->save($this->request->data)) {
        // do some code...
    }
} 
```

在视图中`add`，我将插入此代码以上传文件：

```
echo $this->Form->input('Avatar.filename', array('type' => 'file', 'label'=>'Upload the avatar ')); 
```

如果我只保存`filename`上例中命名的一个配置，这很好用，我的问题是我需要保存同一图像的不同尺寸和裁剪，所以我想保存一个尺寸列表，如下所示：

```
/files/avatars/160/filename.jpg
/files/avatars/48/filename.jpg 
```

为此，我想向我的`Avatar`模型添加另一个配置

```
<?php
class Avatar extends AppModel {
    public $name = 'Avatar';
    public $actsAs = array (
        'Uploader.Attachment' => array (
            'filename' => array (
                'name'        => 'setNameAsImgId',
                'saveAsFilename' => true,
                'uploadDir'    => '/files/avatars/160/',
                'dbColumn'    => 'filename',
                'defaultPath'    => 'default.png',
                'maxNameLength'    => 20,
                'overwrite'    => true,
                'stopSave'    => true,
                'allowEmpty'    => false,
                'transforms'    => array (
                    array('method' => 'resize', 'width' => 160, 'height' => 160, 'dbColumn' => 'filename', 'append' => false, 'overwrite' => true)
                )
            ),
            'small' => array (
                'name'        => 'setNameAsImgId',
                'saveAsFilename' => true,
                'uploadDir'    => '/files/avatars/48/',
                'dbColumn'    => 'filename',
                'defaultPath'    => 'default.png',
                'maxNameLength'    => 20,
                'overwrite'    => true,
                'stopSave'    => true,
                'allowEmpty'    => false,
                'transforms'    => array (
                    array('method' => 'resize', 'width' => 48, 'height' => 48, 'dbColumn' => 'filename', 'append' => false, 'overwrite' => true)
                )
            )
        )
    );
// and so on...
?> 
```

我应该如何设置`UsersController`以保存同一图像的多个裁剪`Avatar`？我是否还应该更改`add`视图以使其正常工作？我不会在表单中使用多个输入文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T19:28:54.097

你可以这样做：

```
$this->Form->input('Avatar.filename.', array('type' => 'file', 'multiple'); 
```

如您所见，我`.`在字段名称和*多个*属性之后放置了一个 , 。有了它，您可以进行多次上传。所以结果`$this->request->data`是这样的：

```
[Avatar] => array(
  ['filename'] => array(
    [0] => array(
      'name' => '...',
      'tmp_name' => '...',
      ...
    ),
    [1] => array(
      'name' => '...',
      'tmp_name' => '...',
      ...
    ),
    [2] => array(
      'name' => '...',
      'tmp_name' => '...',
      ...
    ),
    [3] => array(
      'name' => '...',
      'tmp_name' => '...',
      ...
    )
  )
) 
```

现在你需要改变你的行为来使用一个简单的**foreach**。

我希望这对你有帮助。

*对不起我的英语不好 ：）*

# java - 在两个数组中搜索匹配项，没有额外的内存

> ID：13298110
> 
> 赞同：15
> 
> 时间：2012-11-08T21:27:24.677
> 
> 标签：java, arrays, algorithm

前几天我接受了亚马逊的采访，他们问我的一个问题与以下问题有关。

给定 2 个整数数组，包含任意数量的正负元素，找出出现在两个数组中的数字。

我能够很容易地解决这个问题，`HashMaps`所以它会有`O(n)`计算复杂性，但不幸的是，这也会有`O(n)`空间复杂性。这可以通过遍历每个数组中的所有元素来完成，而无需额外的内存，但这将是`O(n^2)`.

面试官在我解释完该`HashMap`方法后，问我是否可以想出一种在计算上 O(n) 但不会使用任何额外内存的方法。我无法在飞行中想到任何，也无法找到解决方案。有没有办法在线性时间内找到这些值而不使用额外的内存？

注意：我已经在 CareerCup 上发布了这个问题，但那里的每个人似乎都没有得到这样的概念，即我需要它来不使用额外的空间，并且它必须是`O(n)`计算的。

这是我在面试时使用的代码。它有效，但空间不是 O(1)。

```
import java.util.*;
public class ArrayFun {
    public static void main(String[] args) {

        int[] a = {1,2,3,4};
        int[] b = {2,5,6,7,3,2,2,2,2,1,2,2,2,2};
        ArrayList<Integer> matches = ArrayFun.findMatches(a,b);
        for (int i = 0;i<matches.size();++i) {
            System.out.println(matches.get(i));
        }
    }

    public static ArrayList<Integer> findMatches(int[] a, int[] b) {
        HashMap<Integer,Integer> map = new HashMap<Integer,Integer>();
        ArrayList<Integer> matches = new ArrayList<Integer>();
        for (int i = 0;i<a.length;++i) {
            map.put(a[i],0);
        }
        for (int i = 0;i<b.length;++i) {
            if (map.get(b[i]) != null && map.get(b[i]) == 0) {
                map.put(b[i],1);
                matches.add(b[i]);
            }
        }
        return matches;
    }
} 
```

此代码将返回

`1,2,3`

编辑：当我说没有额外的空间和 O(1) 时，我有点交替使用它们。没有额外的空间，我的意思是小的占位符变量很好，但分配新数组不是。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T21:33:09.540

没有 O(1) 空间方法可以在 O(n) 时间内找到两个未排序集合的交集。

对于具有无限范围的数据类型，最小排序价格为 O(n ln n)。

对于具有有限范围的数据类型，基数排序提供了在 O(n ln n' n") 时间内进行就地基数排序的能力，其中 n 是数据的大小，n' 是可以表示，并且 n" 与检查两个值是否在同一个基数组中的成本有关。可以放弃 n" 时间价格以换取 O(ln n) 空间价格。

在 32 位整数的特殊情况下，n' 是 2^32 并且 n" 是 1，所以这将折叠到 O(n) 并为数十亿的记录集提供一个成功的解决方案。

对于无限大小的整数，n' 和 n" 排除了通过基数的 O(n) 时间解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T23:25:29.937

关键是对两个数组进行就地排序。我搜索了“就地基数排序”，并找到[了就地基数排序](https://stackoverflow.com/questions/463105/in-place-radix-sort)。我相信这个问题是可以解决的，至少对于 Java int[]，通过应用这些想法对每个数组进行排序，一点一点地进行排序，然后进行明显的扫描。

顺便说一句，我认为问题代码中问题的正确输出是 1、2、3。

这是我的实现，基于对引用问题的回答：

```
 public class ArrayMatch {
      public static void main(String[] args) {
        int[] a = { 4, 1, 2, 3, 4 };
        int[] b = { 2, 5, 6, 7, 3, 2, 2, 2, 2, 1, 2, 2, 2, 2 };
        System.out.print("Original problem");
        printMatches(a, b);
        System.out.println();

        int[] a1 = { 4, 1, -1234, 2, 3, 4, Integer.MIN_VALUE };
        int[] b1 = { -1234, 2, 5, 6, 7, 3, 2, 2, 2, 2, 1, 2, 2, 2, 2 , Integer.MIN_VALUE, Integer.MAX_VALUE};
        System.out.print("With negatives");
        printMatches(a1, b1);
        System.out.println();

      }

      // Print all matching elements between the two arrays.
      private static void printMatches(int[] a, int[] b) {
        if (a.length == 0 || b.length == 0) {
          return;
        }

        sort(a);
        sort(b);

        int i = 0;
        int j = 0;
        while (true) {
          while (a[i] < b[j]) {
            i++;
            if (i == a.length) {
              return;
            }
          }
          while (a[i] > b[j]) {
            j++;
            if (j == b.length) {
              return;
            }
          }

          if (a[i] == b[j]) {
            System.out.print(" " + a[i]);

            do {
              i++;
            } while (i < a.length && a[i - 1] == a[i]);

            do {
              j++;
            } while (j < b.length && b[j - 1] == b[j]);
          }

          if (i == a.length || j == b.length) {
            return;
          }
        }
      }

      // In place radix sort.
      private static void sort(int[] in) {
        // Flip the sign bit to regularize the sort order
        flipBit(in, 31);
        sort(in, 0, in.length, 31);
        // Flip back the sign bit back to restore 2's complement
        flipBit(in, 31);
      }

      /**
       * Sort a subarray, elements start through end-1 of in, according to the
       * values in firstBit through 0.
       * 
       * @param in
       * @param start
       * @param end
       * @param firstBit
       */
      private static void sort(int[] in, int start, int end, int firstBit) {
        if (start == end) {
          return;
        }
        int mask = 1 << firstBit;
        int zeroCount = 0;
        for (int i = start; i < end; i++) {
          if ((in[i] & mask) == 0) {
            zeroCount++;
          }
        }

        int elements = end - start;
        int nextZeroIndex = start;
        int nextOneIndex = start + zeroCount;

        int split = nextOneIndex;

        if (zeroCount > 0 && zeroCount < elements) {
          while (nextZeroIndex < split) {
            if ((in[nextZeroIndex] & mask) != 0) {
              // Found a one bit in the zero area, look for its partner in the one
              // area
              while ((in[nextOneIndex] & mask) != 0) {
                nextOneIndex++;
              }
              int temp = in[nextZeroIndex];
              in[nextZeroIndex] = in[nextOneIndex];
              in[nextOneIndex] = temp;
              nextOneIndex++;
            }
            nextZeroIndex++;
          }

        }

        if (firstBit > 0) {
          sort(in, start, split, firstBit - 1);
          sort(in, split, end, firstBit - 1);
        }

      }

      private static void flipBit(int[] in, int bitNo) {
        int mask = 1 << bitNo;
        for (int i = 0; i < in.length; i++) {
          in[i] ^= mask;
        }
      }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T21:39:46.837

一个可能的答案类似于`HashMap`解决方案......**如果**您知道整数在一个非常小的窗口内。这将类似于：[http ://en.wikipedia.org/wiki/Bucket_sort](http://en.wikipedia.org/wiki/Bucket_sort)

基本上，如果保证整数在某个恒定大小的窗口内（即它们都是 1-1000），那么您可以通过递增索引的每个单元格在恒定空间中执行此操作 = 无论您的数字是多少。这与解决方案完全相同`HashMap`，只是您不需要像罐子那样考虑所有可能的整数`HashMap`，这样可以节省空间。如果不清楚，请在评论中告诉我，我会进一步解释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T22:42:19.773

我相信这可以通过*额外的*空间*就地完成。*我利用了数组中的元素既可变又可交换的附加假设，但我相信通过仔细考虑，可以针对这个特定问题删除可变性假设。`O(1)`

 *基本思想是进行就地散列。就地散列可以通过使用`O(n)` [中位数选择算法](http://en.wikipedia.org/wiki/Selection_algorithm)围绕一个合适的百分位数（例如第 90 个百分位数）划分数组来实现。这将阵列分为一小部分（约 10%）和大部分（约 90%），它们的元素可相互区分（小于或不小于分区元素）。然后，您可以通过交换从 10% 部分哈希到 90% 部分。此散列可用于检测重复项。这是`O(n)`每次处理 10% 的数组，所以做 10 次仍然是`O(n)`. 我更详细地描述了这一点，尽管我打算在某一天在[这个相关问题上更正一些手。](https://stackoverflow.com/questions/12342743/find-a-number-with-even-number-of-occurrences/13091540#13091540).

对于这个特殊问题，您需要进行 3 次就地散列。首先在每个单独的数组上删除重复项。然后，在表示组合数组的包装器上（如果索引小于数组 1 的长度，则索引到数组 1，否则索引到数组 2）以报告重复项。*

# nginx - 无需更改 Web 服务器或内容即可操作 Web 内容

> ID：13298111
> 
> 赞同：1
> 
> 时间：2012-11-08T21:27:30.213
> 
> 标签：nginx, webserver, reverse-proxy

我希望能够操作来自我的 Web 服务器的 Web 内容，而无需对它们或内容进行任何更改。一种动态内容代理。

似乎像 NGinx 或 Squid 这样的反向代理服务器可以提供一个合适的平台来开发一个模块，该模块将插入其中并在 Web 服务器内容和客户端之间的内容流之间进行中介。

在性能和架构方面，这是一种明智的前进方式吗？任何人都可以就其他可能的路径或解决方案提出建议，让我从这里开始吗？

# ada - gnatlink 在新的 Ubuntu 版本下失败

> ID：13298113
> 
> 赞同：1
> 
> 时间：2012-11-08T21:27:36.480
> 
> 标签：ada, ubuntu-12.10

我安装了新版本的 Ubuntu（12.10，从 12.04 升级），现在无法链接。即使对于一个简单的“Hello_World.adb”程序也是如此：

```
gnatlink hello_world
/usr/gnat/libexec/gcc/i686-pc-linux-gnu/4.5.4/ld: crt1.o: No such file: No such file or directory
collect2: ld returned 1 exit status
gnatlink: error when calling /usr/gnat/bin/gcc 
```

我在各种论坛中看到了许多“修复”，但它们似乎不适用于 gnat：我认为这与 gnat 自己的命令行构造有关。我自己尝试了各种构造，但无济于事。

有谁知道如何解决这个问题？

* * *

新信息：我创建了一个运行 Ubuntu 12.04 的 Oracle“虚拟机”，安装了最新的“自由”GNAT GPL，它似乎工作得很好。显然，这个问题与 Ubuntu 12.10 版本有关。我在物理机和虚拟机上都运行了 12.10：两者都会导致 GNAT GPL 失败。关注

# 我会认为这个问题已经结束。感谢大家的想法和建议！

新的、新的信息：我忽略了设置 PATH 变量，因此 GNAT 二进制文件的路径位于字符串的末尾。显然这是让我链接的原因。当我接受 GNAT GPL 的建议将二进制路径放在字符串的开头时，链接停止工作！糟透了！任何想法，任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T18:22:01.880

我正在使用 64 位 GNAT GPL 2012 运行 Debian。我可以`gnatmake`通过以下`-largs -Wl,-v`标志告诉我将哪个命令行发送到系统链接器：

```
$ gnatmake -f hello.adb -largs -Wl,-v
gcc -c hello.adb
gnatbind -x hello.ali
gnatlink hello.ali -Wl,-v
collect2 version 4.5.4 20120510 for GNAT GPL 2012 (20120509) (x86-64 Linux/ELF)
/opt/gnat-gpl-2012/bin/../libexec/gcc/x86_64-pc-linux-gnu/4.5.4/ld --eh-frame-hdr -m
elf_x86_64 -dynamic-linker /lib64/ld-linux-x86-64.so.2 -o hello
/usr/lib/../lib64/crt1.o /usr/lib/../lib64/crti.o
/opt/gnat-gpl-2012/bin/../lib/gcc/x86_64-pc-linux-gnu/4.5.4/crtbegin.o
-L./ -L/opt/gnat-gpl-2012/lib/gcc/x86_64-pc-linux-gnu/4.5.4/adalib/
-L/opt/gnat-gpl-2012/bin/../lib/gcc/x86_64-pc-linux-gnu/4.5.4
-L/opt/gnat-gpl-2012/bin/../lib/gcc
-L/opt/gnat-gpl-2012/bin/../lib/gcc/x86_64-pc-linux-gnu/4.5.4/../../../../lib64
-L/lib/../lib64 -L/usr/lib/../lib64
-L/opt/gnat-gpl-2012/bin/../lib/gcc/x86_64-pc-linux-gnu/4.5.4/../../..
b~hello.o ./hello.o -v /opt/gnat-gpl-2012/lib/gcc/x86_64-pc-linux-gnu/4.5.4/adalib/libgnat.a
-lgcc -lgcc_eh -lc -lgcc -lgcc_eh /opt/gnat-gpl-2012/bin/../lib/gcc/x86_64-pc-linux-gnu/4.5.4/crtend.o
/usr/lib/../lib64/crtn.o
GNU ld (GNU Binutils) 2.20 
```

这表明它正在`crt1.o`从 /usr/lib64 (YMMV) 获取（和其他）。

我想知道您是否需要（重新）安装 Ubuntu C 编译器？（我认为是`sudo apt-get build-essentials`）。

另一方面，使用`dpkg --search`（查找安装了特定文件的已安装包）表明您可能只需要 package`libc`或`libc-dev`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:25:02.300

检查文件权限和文件路径。*nix 有一个非常脆弱的权限系统，有时事情的工作取决于实际目录与符号链接目录。

或者只是迁移到 Windows，我总共遇到了一个文件权限问题......而且它在 *nix 子系统（cygwin，IIRC）上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T17:28:44.533

每当我遇到这个问题时，它通常是“多库问题”新版本 Debian 的表现，现在 Ubuntu 正在移动他们的库，以便您可以构建例如 32 位和 64 位可执行文件（或为 Windows 或 Arduino 交叉编译！）在同一台机器上......

所以在我的机器上，我可以找到 crt1.o

```
/usr/lib/x86_64-linux-gnu/crt1.o 
```

如果我发出命令行

```
export LIBRARY_PATH=/usr/lib/x86_64-linux-gnu 
```

在运行 Gnatmake 之前，它解决了这个问题。由于链接器（ld）失败，您可能想尝试

```
export LD_LIBRARY_PATH=/usr/lib/x86_64-linux-gnu 
```

如果 LIBRARY_PATH 不起作用

如果是这样，还有其他方法可以解决问题，例如在 .bashrc 脚本中修改库路径的方法......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T17:19:10.087

谢谢大家。我已经尝试了上述所有建议，并尝试了 GPS、以前工作的 Ubuntu 版本以及硬机和虚拟机的所有组合，但均未成功。

我现在正在使用管道成功地追求一个（非常）有限的 Windows Posix (wposix) 版本，因为这就是 wposix 产品中实现的全部内容。我想使用共享内存和消息传递。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-10T12:02:24.750

我遇到了同样的问题，我能找到的唯一解决方案是以超级用户身份运行以下命令：

```
ln -s /usr/lib/x86_64-linux-gnu /usr/lib64 
```

# javascript - Jquery Masked Input 插件允许点

> ID：13298118
> 
> 赞同：5
> 
> 时间：2012-11-08T21:27:50.753
> 
> 标签：javascript, jquery, jquery-plugins, jquery-events, maskedinput

我正在使用 JQuery Masked 输入插件。

```
$("#percent").mask("99.99?9"); 
```

这允许像`10.999, 10.99, 01.999, 01.99`

我想要实现的是我不希望用户键入`01.99`. 相反，如果`1.99`我`0`之前`1`想要自动添加的用户类型。这就是我开始但不知道如何继续的方式：

```
 //assume i typed in field 11.99
  $(document).on('keyup', '#percent', function(evt) {
    var input = $(this).val();
    alert(input); // 11.99_
    if(evt.which == '190' || evt.which == '110') {
       //if dot is clicked 
       alert(parseInt(input)); // 11
    }
}); 
```

请注意，`11.99_`由于第三个值是可选的并且我没有输入，因此警报输入在末尾带有下划线打印。

现在这个值是完全正常的，但是如果用户输入`1.99`, 将不能，因为它会自动移动`9`以`1`用`2`数字填充它，所以它会返回 as`19.9`并且这是无效的，因为必须有`2`上面定义的小数。因此，在我的 if 语句中，我希望能够检测输入的内容是否小于`10`，如果小于`10`小数点，则`0`在开头添加。

好的，我找到了解决方法`underscore _`：

```
 $("#percent").mask("99.99?9", {placeholder: ""}) 
```

`1.99`但仍然没有解决其他问题`19.9`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T08:19:30.100

您可以拦截 keydown 来执行此操作，但您需要一些方法来刷新插件状态。

以下代码将起作用：

```
$("#percent").bind({
    keydown: function(e) {
        // custom handler for dot
        var userInput = parseFloat($("#percent").val());
        if(e.which == '190' || e.which == '110') {
            // if entered number is integer and less than 10
            if(userInput % 1 === 0 && userInput < 10) {
                // prevent default mask input handlers from calling
                e.preventDefault();
                e.stopImmediatePropagation();

                // update value
                $("#percent").val('0'+userInput+'.');

                // simulate paste event to refresh mask input plugin state
                $("#percent").trigger('paste').trigger('input');
            }
        }       
    }
}).mask("99.99?9", {placeholder: ""}); 
```

[在这里](http://jsfiddle.net/NDGkA/)工作 JSFiddle

# c# - 如何在 wpf 中为 TreeView 进行文本换行

> ID：13298121
> 
> 赞同：2
> 
> 时间：2012-11-08T21:28:19.333
> 
> 标签：c#, wpf, xaml, treeview

我花了一天的大部分时间试图弄清楚这一点，我知道问题是 TextBlock 认为它具有无限宽度，所以包装永远不会发生，我尝试了很多绑定来设置网格的宽度，内容窗格等；没有任何运气；这个用户控件托管在一个更大的应用程序的 ig:Dock 中，可以动态调整大小，所以我不能只为文本设置宽度，我相信我需要某种绑定......任何帮助都是赞赏。

```
<UserControl x:Class="VistaSTAR_Client.Views.XMLEditor"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
        xmlns:igDock="http://infragistics.com/DockManager"
        xmlns:ig="http://schemas.infragistics.com/xaml"
        mc:Ignorable="d" 
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006">

    <UserControl.Resources>
        <SolidColorBrush x:Key="xmlValueBrush" Color="Blue" />
        <SolidColorBrush x:Key="xmAttributeBrush" Color="Red" />
        <SolidColorBrush x:Key="xmlTagBrush" Color="DarkMagenta" />
        <SolidColorBrush x:Key="xmlMarkBrush" Color="Blue" />
        <DataTemplate x:Key="attributeTemplate">
            <StackPanel Orientation="Horizontal" Margin="3,0,0,0" HorizontalAlignment="Center">
                <TextBlock Text="{Binding Path=Name}" Foreground="{StaticResource xmAttributeBrush}"/>
                <TextBlock Text="=&quot;" Foreground="{StaticResource xmlMarkBrush}"/>
                <TextBlock Text="{Binding Path=Value}" Foreground="{StaticResource xmlValueBrush}"/>
                <TextBlock Text="&quot;" Foreground="{StaticResource xmlMarkBrush}"/>
            </StackPanel>
        </DataTemplate>

        <HierarchicalDataTemplate x:Key="NodeTemplate">
            <StackPanel Orientation="Horizontal" Focusable="False">
                <TextBlock x:Name="tbName" Text="?" />
                <ItemsControl ItemTemplate="{StaticResource attributeTemplate}" ItemsSource="{Binding Path=Attributes}" HorizontalAlignment="Center">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal"/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>
            </StackPanel>
            <HierarchicalDataTemplate.ItemsSource>
                <Binding XPath="child::node()" />
            </HierarchicalDataTemplate.ItemsSource>
            <HierarchicalDataTemplate.Triggers>
                <DataTrigger Binding="{Binding Path=NodeType}" Value="Text">
                    <Setter TargetName="tbName" Property="Text" Value="{Binding Path=Value}"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding Path=NodeType}" Value="Element">
                    <Setter TargetName="tbName" Property="Text" Value="{Binding Path=Name}"/>
                </DataTrigger>
            </HierarchicalDataTemplate.Triggers>
        </HierarchicalDataTemplate>
        <XmlDataProvider x:Key="xmlDataProvider">
        </XmlDataProvider>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <igDock:XamDockManager Name="XMLDockManager" Theme="IGTheme" LayoutMode="FillContainer">
            <igDock:XamDockManager.Panes>
                <igDock:SplitPane Width="Auto" HorizontalAlignment="Stretch">
                    <igDock:TabGroupPane Width="Auto" HorizontalAlignment="Stretch">
                    <igDock:ContentPane Name="XMLTreeView" Header="Tree View" Width="Auto" HorizontalAlignment="Stretch">
                        <TreeView Name="treeView1" Background="AliceBlue" HorizontalAlignment="Stretch" Height="Auto" Width="Auto" Margin="5,5,5,5"
                            ItemsSource="{Binding Source={StaticResource xmlDataProvider}, XPath=*}" ItemTemplate= "{StaticResource NodeTemplate}"/>
                    </igDock:ContentPane>
                    <igDock:ContentPane Name="XML" Header="Editor">
                        <TextBox HorizontalAlignment="Stretch" Name="text" Text=" " TextWrapping="WrapWithOverflow" Height="Auto" Width="Auto"
                            VerticalScrollBarVisibility="Auto" VerticalAlignment="Stretch" AcceptsReturn="True" AcceptsTab="True" Margin="5,5,5,5" Grid.Row="1" />
                    </igDock:ContentPane>
                    </igDock:TabGroupPane>
                </igDock:SplitPane>
            </igDock:XamDockManager.Panes>
        </igDock:XamDockManager>

    </Grid>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:22:26.360

好的，这里可能有几件事可能导致您的文本不换行。

1.  如果您想在 a 中包含文本`TextBox`或被`TextBlock`包装，则需要设置`TextWrapping="Wrap"`，
2.  您必须使用 WrapPanel 而不是`StackPanel`,`Stack Panel`从它拥有的项目中获取他的宽度。
3.  这是最重要的，每个树视图在 a 中都有内容`ScrollViewer`，默认情况下，给它`TreeView`的项目无限宽度由于启用了水平栏，如果你想要文本和项目被包装（ ）`ScrollViewer`，你需要禁用它。`ScrollViewer.HorizontalScrollBarVisibility="Disabled"`

希望这可以帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T02:26:44.253

```
<TextBlock Width="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=ENTERTYPE}, Path=ActualWidth}"/> 
```

`ENTERTYPE`应该控制`TextBlock`宽度的祖先的类型在哪里。

即如果`TextBlock`包含在 a`StackPanel`中，也许 ENTERTYPE=StackPanel

# opengl - glMapBuffer 不断返回 0x00000000

> ID：13298123
> 
> 赞同：3
> 
> 时间：2012-11-08T21:28:31.993
> 
> 标签：opengl, vbo, vertex, vertex-buffer

我已经初始化了 glewInit() 和任何其他 openGL 的东西。在我做任何这些电话之前。

```
 glGenBuffers( 1, &m_uiVertBufferHandle );
  glBindBuffer( GL_ARRAY_BUFFER, m_uiVertBufferHandle );
  glBufferData( GL_ARRAY_BUFFER, 0, 0, GL_READ_WRITE );
  glBindBuffer( GL_ARRAY_BUFFER, 0 ); 
```

这就是我创建缓冲区对象的方式 ii 执行 glBufferData 是因为我在 openGL 文章中读到，如果您不至少调用一次它，您根本没有任何存储空间，这将使 glMapBuffer 总是给您 0x00000000。

稍后我调用 glMapBuffer 来获取我的存储位置以在我使用 glMapBuffer 时开始保存数据我这样称呼它

```
void* buffer1; 
glBindBuffer( GL_ARRAY_BUFFER, m_uiVertBufferHandle );

//make sure our buffer excists
buffer1 = glMapBuffer( GL_ARRAY_BUFFER, GL_READ_WRITE ); 
```

我的缓冲区1中总是得到0x00000000。为什么是这样？我发现的唯一 2 个原因是我没有正确初始化 glewInit 并且我没有调用 glBindBufferData 至少一次。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T22:49:34.277

```
glBufferData( GL_ARRAY_BUFFER, 0, 0, GL_READ_WRITE ); 
```

`GL_READ_WRITE`不是[缓冲区对象的有效用法](http://www.opengl.org/wiki/GLAPI/glBufferData)。您将其用于*映射*，而不是缓冲区对象的使用。使用参数是类似的东西`GL_STATIC_DRAW`，或者更适合您的“读/写”情况，`GL_DYNAMIC_READ`.

因为你传递了一个无效的枚举，OpenGL 给你一个`GL_INVALID_ENUM`错误并且无法执行这个命令。此外，长度为 0 的缓冲区对象不是缓冲区存储的合理大小。尝试`new int[0]`或`malloc(0)`有时看看会发生什么。

请停止[分配极小的或不存在的数据大小。](https://stackoverflow.com/questions/13281508/glmapbuffer-returns-0x00000000-constantly)如果您真的想对此进行测试，请分配 4096 字节或其他内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T22:09:41.163

您将`0`缓冲区的大小传递给`glBufferData`. 这意味着 OpenGL 实现不知道缓冲区的大小（甚至是理论上的），也不知道如何映射这个零大小的缓冲区。

使用非零值作为大小，使用 NULL 作为数据指针，即：

```
glBufferData( GL_ARRAY_BUFFER, SizeOfTheBuffer, NULL, GL_READ_WRITE ); 
```

**PS** `GL_READ_WRITE`不是缓冲区对象的有效用法。

# python - 在需要 Python2.6 的库上 debuild 失败

> ID：13298126
> 
> 赞同：1
> 
> 时间：2012-11-08T21:28:50.727
> 
> 标签：python, debian, deb, dpkg

我正在尝试使用 stdeb 对需要 Python 2.6 的 python 包进行 debianize。构建失败，因为它强制 setup.py 与 python2.5 一起运行，它无法解析导致最终结果的 python 2.6“except Exception as e”语法：

```
dpkg-buildpackage: error: fakeroot debian/rules clean gave error exit status 2 
```

我使用 python-stdeb 0.6.0-1、debhelper 8.0.0、dpkg 1.15.8.13 和 devscripts 2.10.69+squeeze4 在 Debian Squeeze 上运行它。

那么，有没有办法告诉 debuild “请使用 python 2.6，非常感谢”？

# c# - 我怎样才能在我自己的类上有多个扩展方法，像这样？

> ID：13298127
> 
> 赞同：0
> 
> 时间：2012-11-08T21:28:50.277
> 
> 标签：c#, class, extension-methods

```
string "hello world".toLower().toUpper().replace("o", "x"); 
```

如何使我自己的类能够具有像上面示例中的字符串这样的扩展方法？也许没那么有用，但我就是不知道怎么做

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T21:31:57.493

这些被称为可用于流畅 API的**链式方法。**

通常通过从所有方法调用返回相同类型来创建它们。

请参阅[使用 C# 3 编写流畅接口的技巧](https://stackoverflow.com/q/224730/1583)。

# java - Guice 注入空指针

> ID：13298128
> 
> 赞同：17
> 
> 时间：2012-11-08T21:28:52.857
> 
> 标签：java, nullpointerexception, guice, code-injection

我们尝试用 Guice 重构一个项目。这个想法是将所有*Language*接口绑定到一个 concreate 对象，如*French*或*Polish*。

我们有一个绑定模块：

```
public class StandardModule extends AbstractModule {

    @Override
    protected void configure() {

       bind(Language.class).to(Polish.class);

    }
 } 
```

还有一个使用这个注入对象的类（AboutDialog.java）：

```
@Inject Language language;

public AboutDialog(JFrame parent) {
    super(parent, "", true);
    this.language=language;
    this.setTitle(language.getLanguageInUse().getString("AboutDialog.title"));
    this.parent = parent;
    try {
        jbInit();
    } catch (Exception e) {
        e.printStackTrace();
    }
    pack();
} 
```

结果是：

```
java.lang.NullPointerException at net.sf.jmoney.gui.AboutDialog.<init>(AboutDialog.java:67) 
```

第 67 行是：

```
this.setTitle(language.getLanguageInUse().getString("AboutDialog.title")); 
```

我们的界面是：

```
public interface Language {

    public ResourceBundle getLanguageInUse();
} 
```

波兰语课是：

```
public class Polish implements Language {

    private ResourceBundle languageInUse;

    public Polish() {
        languageInUse = ResourceBundle.getBundle(Constants.LANGUAGE_PL);
    }

    public ResourceBundle getLanguageInUse() {
        return languageInUse;
    }

} 
```

我们迷路了...

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-09T03:21:36.637

您正在使用“现场注入”。这将使您难以在构造函数中使用注入的值；即使 Guice 要创建对象（现在没有发生）或者您要使用`injector.injectMembers(aboutDialog)`，构造函数也会在注入器有机会注入您想要的字段之前运行。

创建一个接受变化参数和注入参数的类有点棘手。这给您留下了几个选择：

*   注入 JFrame。如果您知道在创建构造函数时将使用什么 JFrame，那么只需`bind(JFrame.class).toInstance(myJFrame);`在您的模块中使用。然后 Guice 可以完全创建 AboutDialog。

*   手动创建工厂。这样你就可以注入`AboutDialog.Factory`并调用`create`来获取你的`AboutDialog`. 它看起来像这样：

    ```
    public class AboutDialog extends JDialog {

      /** Injectable factory. */
      public static class Factory {
        @Inject private Language language;

        public AboutDialog create(JFrame parent) {
          return new AboutDialog(parent, language);
        }
      }

      // no @Inject parameter; you're calling "new" yourself above!
      public AboutDialog(JFrame parent, Language language) {
        super(parent, "", true);
        this.language = language;
        // ... other initialization
      }
    } 
    ```

*   创建一个工厂，让 Guice 通过[辅助注入](http://code.google.com/p/google-guice/wiki/AssistedInject)为您连接起来。

    ```
    public class AboutDialog extends JDialog {

      public interface Factory {
        public AboutDialog create(JFrame parent);
      }

      // you need the @Inject, and also the @Assisted to tell Guice to
      // use the parameter instead of Guice bindings
      @Inject
      public AboutDialog(@Assisted JFrame parent, Language language) {
        super(parent, "", true);
        this.language = language;
        // ... other initialization
      }
    }

    public class StandardModule extends AbstractModule {
      @Override protected void configure() {
        bind(Language.class).to(Polish.class);

        // here every method in AboutDialog.Factory will be implemented
        // to create the method's return type [AboutDialog] based on
        // the parameters (like JFrame) and the bindings (like Language)
        install(new FactoryModuleBuilder().build(AboutDialog.Factory.class));
      }
    } 
    ```

如问题评论中所述，请确保您正在获取您的`AboutDialog`（或`AboutDialog.Factory`通过`@Inject`ed 构造函数/字段或从`Injector`自身获取，否则 Guice 将不知道注入参数。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-08T21:46:05.617

我假设您不是`AboutDialog`在 Guice 的帮助下创建您的。

你可以做的是使用`injector.injectMembers(this)`where `this`is the `AboutDialog`.

最好的方法是`AboutDialog`由 Guice 创建，因此所有成员都将被注入。

# android - 如何在我的应用程序中实现 longclickable

> ID：13298130
> 
> 赞同：4
> 
> 时间：2012-11-08T21:29:01.817
> 
> 标签：android, android-layout, android-intent

我有一个按钮，可以将您带到带有简短描述的示例图片，但我想做的是长按，然后让它将用户带到网站以获取更多信息。

这是我的按钮代码（正常）

```
 <Button
                    android:id="@+id/samplea"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_marginTop="20dp"
                    android:background="@drawable/samplea_button" 
                    android:longClickable="true"/> 
```

我的java是这个

```
Button next = (Button) findViewById(R.id.samplea);
next.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            final ImageView imageView = (ImageView) findViewById(R.id.iM2);
            imageView.setImageResource(R.drawable.samplea_draw); 
```

如何将 longclickable 添加到此以将我带到网站？有人可以帮忙吗？

我已经添加了它，但现在它似乎把我带到了这个网站（在长按之后），而不是图像（在正常的点击之后）这是我的代码：

```
 next1.setOnLongClickListener(new OnLongClickListener() {
        public boolean onLongClick(View v) {
            // Launch your web intent
            Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://stackoverflow.com/a/13298207/1267661"));
            startActivity(intent);
            return true;
        }

        public void onClick(View view) {
            final ImageView imageView = (ImageView) findViewById(R.id.iM2);
            imageView.setImageResource(R.drawable.samplea_draw); 
```

在“public void onClick(View view) {”下得到一条黄线

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T21:34:27.677

**更新**
实现一个 OnLongClickListener 很像您的 OnClickListener，但它需要分开。尝试这个：

```
Button next = (Button) findViewById(R.id.samplea);
next.setOnClickListener(new View.OnClickListener() {
    public void onClick(View view) {
        // You can turn this into a class variable
        final ImageView imageView = (ImageView) findViewById(R.id.iM2);
        imageView.setImageResource(R.drawable.samplea_draw);
    }
)};
next.setOnLongClickListener(new OnLongClickListener() {
    @Override
    public boolean onLongClick(View v) {
        // Launch your web intent
        Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://stackoverflow.com/a/13298207/1267661"));
        startActivity(intent);
        return true;
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T21:35:34.683

您添加了一个长按监听器 -

```
next.setOnLongClickListener(new OnLongClickListener() { 
    @Override
    public boolean onLongClick(View v) {
        //your action on long click
        return true;
    }
}); 
```

看这里 - [Android：长按一个按钮 -> 执行操作](https://stackoverflow.com/questions/4402740/android-long-click-on-a-button-perform-actions)

如果你先用谷歌搜索你的问题，你总是会更加努力地得到更好的答案！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T08:38:36.230

按照下面的链接更详细

[长按钮点击](http://glorious-arvind.blogspot.in/2012/11/long-click-of-button-in-android.html)

请参阅下面的示例代码。

```
next.setOnLongClickListener(new OnLongClickListener() {

   @Override
   public boolean onLongClick(View v) {
    // TODO Auto-generated method stub

    Toast.makeText(MainActivity.this,"Button long click", Toast.LENGTH_SHORT).show();
    return true;
   }
  }); 
```

# asp.net - ASP.Net 验证器行

> ID：13298138
> 
> 赞同：0
> 
> 时间：2012-11-08T21:29:38.690
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, asp.net-ajax

![在此处输入图像描述](../Images/af9e4962f6c6811a866437ec5d08e097.png)我使用正则表达式验证器来验证输入到文本框中的电子邮件地址。当我单击文本框时，文本框底部会出现一行。我怎样才能阻止这条线出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:08:09.143

试试这个，`Display="Dynamic"`在验证器中使用。

```
 <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
    <asp:Button ID="Button1" runat="server" Text="Submit" />
    <asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" ControlToValidate="TextBox1" 
        Display="Dynamic" ErrorMessage="You must enter an email address" ValidationExpression="\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*"
        Text="*"></asp:RegularExpressionValidator>
    <asp:ValidationSummary ID="ValidationSummary1" runat="server" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T03:57:58.843

它是由屏蔽的编辑验证器引起的。一旦我删除并改用正则表达式验证器，一切正常。

# file-upload - 如何在 Dart 中上传文件？

> ID：13298140
> 
> 赞同：14
> 
> 时间：2012-11-08T21:29:39.493
> 
> 标签：file-upload, dart

我正在尝试查找使用 Dart 脚本上传文件的任何示例。

我了解在文件输入字段中选择后在客户端读取它的部分，但是如何将其发布到服务器并将其保存为文件？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-09T10:51:01.753

在多部分编码解析器可用之前，您可以使用客户端上的[File API](http://www.w3.org/TR/file-upload/)来读取和上传文件内容作为[dataUrl](http://en.wikipedia.org/wiki/Data_URI_scheme)。这个 API 在浏览器中有很好的支持（见[http://caniuse.com/filereader](http://caniuse.com/filereader)）。

在客户端：

```
import 'dart:html';

main() {
  InputElement uploadInput = query('#upload');
  uploadInput.onChange.listen((e) {
    // read file content as dataURL
    final files = uploadInput.files;
    if (files.length == 1) {
      final file = files[0];
      final reader = new FileReader();
      reader.onLoad.listen((e) {
        sendDatas(reader.result);
      });
      reader.readAsDataUrl(file);
    }
  });
}

/// send data to server
sendDatas(dynamic data) {
  final req = new HttpRequest();
  req.onReadyStateChange.listen((Event e) {
    if (req.readyState == HttpRequest.DONE &&
        (req.status == 200 || req.status == 0)) {
      window.alert("upload complete");
    }
  });
  req.open("POST", "http://127.0.0.1:8080/upload");
  req.send(data);
} 
```

在服务器端：

```
import 'dart:io';

main() {
  final server = new HttpServer();
  server.listen('127.0.0.1', 8080);
  server.addRequestHandler((request) => request.path == '/upload' 
      && request.method.toLowerCase() == 'post'
      , (HttpRequest request, HttpResponse response) {
    _readBody(request, (body) {

      // handle your dataURL
      // example with image : data:image/jpeg;base64,/9j/4S2YRXhpZgAATU0AK... 

      // return result
      response.statusCode = HttpStatus.CREATED;
      response.contentLength = 0;
      response.outputStream.close();
    });
  });
}

/// Read body of [request] and call [handleBody] when complete.
_readBody(HttpRequest request, void handleBody(String body)) {
  String bodyString = ""; // request body byte data
  final completer = new Completer();
  final sis = new StringInputStream(request.inputStream, Encoding.UTF_8);
  sis.onData = (){
    bodyString = bodyString.concat(sis.read());
  };
  sis.onClosed = () {
    completer.complete("");
  };
  sis.onError = (Exception e) {
    print('exeption occured : ${e.toString()}');
  };
  // process the request and send a response
  completer.future.then((_){
    handleBody(bodyString);
  });
} 
```

参考 ：

*   [使用文件 API 在 JavaScript 中读取文件](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

# c++ - glDrawElements 只绘制半个四边形

> ID：13298143
> 
> 赞同：3
> 
> 时间：2012-11-08T21:29:44.953
> 
> 标签：c++, c, opengl, vector-graphics

这是我的功能：

```
void Object::draw2()
{

if(!mIsInitialised) { return; }

//Tell OpenGL about our vertex and normal data
glEnableClientState(GL_VERTEX_ARRAY);
glVertexPointer(3, GL_FLOAT, 0, &Vertices.front());

glEnableClientState(GL_NORMAL_ARRAY);
glNormalPointer(GL_FLOAT, 0, &Temp2.front());

//draw the .txt-file
glDrawElements(GL_TRIANGLES, Indices.size(), GL_UNSIGNED_INT, &Indices.front());

//restore the state GL back
glDisableClientState(GL_VERTEX_ARRAY);
glDisableClientState(GL_NORMAL_ARRAY);
} 
```

我的索引向量包含：1 2 3 1 3 4

我的顶点向量包含：-1 -1 0 1 -1 0 1 1 0 -1 1 0

当我运行程序时，它只画了半个四边形——即一个三角形。

结果-> [http://i.stack.imgur.com/jZALG.png](http://i.stack.imgur.com/jZALG.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T21:32:46.267

您的索引向量应包含：

```
0 1 2 0 2 3 
```

否则，您永远不会触及顶点编号`0`并最终得到四边形的一半。

# php - 购物车 - 仅更新 1 个条目

> ID：13298146
> 
> 赞同：-2
> 
> 时间：2012-11-08T21:30:02.493
> 
> 标签：php, shopping-cart

下面的代码只会更新我购物车的最后一个条目。我在循环中有点挣扎，我只是卡住了。

```
 if (isset($_POST['quantity'])) { // Update quantities in the cart

    foreach ($_POST['quantity'] as $k => $qty) {  //Full name on form: name="quantity[' . $row['prodid'] . ']"

        $pid = $_POST ['prodid'];
        $sp_type = $_POST ['cat'];

        if (isset($sp_type, $pid)) {
             // Determine the quantity:
             $qty = (filter_var($qty, FILTER_VALIDATE_INT, array('min_range' => 0)) !== false) ? $qty : 1;

             // Update the quantity in the cart:
             $r = mysqli_query($dbc, "CALL update_cart('$uid', '$sp_type', $pid, $qty)");
        }

    } // End of FOREACH 
} 
```

cart.html 上的代码：

这是购物车的 html 表单的代码：

```
<input type="hidden" name="prodid[' . $row['prodid'] . ']" value="' .$row ['prodid'] .'" /></td>
        <td align="center"><input type="text" name="quantity[' . $row['prodid'] . ']" value="' . $row['quantity'] . '" size="2" class="small" /></td>
        <td align="right">£' . $price . '</td>
        <td align="right">£' . number_format($subtotal, 2) . '</td>
        <td align="right"><a href="/wishlist.php?id=' . $row['prodid'] . '&action=move&qty=' . $row['quantity'] .'&cat=' .$row ['cat_id'] .'"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:08:45.193

将 ID 添加到表单中的所有输入后。我在上面的代码中添加了以下内容，它可以工作！！

```
 foreach ($_POST['prodid'] as $id=>$prod){
            if ($id==$k){
                $pid = $prod;
            }
        }
        foreach ($_POST['cat'] as $catid=>$cat){
            if ($catid==$k){
                $sp_type = $cat;
            }
        } 
```

其余代码...

# actionscript-3 - [AS3][GAME] 在场景 null 中找不到 framelabel null

> ID：13298147
> 
> 赞同：2
> 
> 时间：2012-11-08T21:30:12.900
> 
> 标签：actionscript-3

我正在开发一款记忆游戏（卡片配对游戏），并且在第一次设置游戏时一切正常，但是当游戏“重置”时，我收到以下错误：

**ArgumentError：错误 #2109：在场景 null 中找不到 framelabel null。在 flash.display::MovieClip/gotoAndStop() 在 main/omdraaien() 在 main/omdraaien()[memory1_0\main.as:138]**

这是我的全部代码。

```
package  
{
    import flash.display.MovieClip;
    import flash.display.SimpleButton;
    import flash.display.Sprite;
    import flash.events.TimerEvent;
    import flash.text.TextField;
    import flash.text.TextFormat;
    import flash.utils.Timer;
    import flash.events.MouseEvent;
    import flash.events.Event;

    /**
     * ...
     * @author Remy&Mark
     */
    // door te 'extenden' maak je van main (in dit geval) een sub-class van Sprite,
    // dus kan je alle voor-gedefiniëerde functies die "sprite" heeft gebruiken.
    public class main extends MovieClip
    {
        var kaart1:MovieClip;
        var kaarten:Array; // ARRAY is een table.
        var pause_timer:Timer;
        var kaart1open:Boolean;
        var kaart2open:Boolean;
        var kaart1value:Number;
        var kaart2value:Number;
        var kaart1id:Number;
        var kaart2id:Number;
        var cardsRemoved:Number;
        var button:Sprite;
        var values:Array = new Array(2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10);
        var startknop:MovieClip = new startKnop();
        var tryAgain:MovieClip = new taKnop(); // try again.
        var score:TextField = new TextField();
        var result:TextField = new TextField(); // WIN of LOSE.
        var format:TextFormat = new TextFormat();
        var streak:Number;
        var bonus:Number;
        var klok:MovieClip = new clock();
        var gameTimer:Timer = new Timer(1000, 5); 
        var retry:Boolean = false; // dit duidt aan of het voor het eerst begint of dat het wordt geretried.

        public function main()
        {
            // dit maakt de startknop
            startknop.x = 100;
            startknop.y = 200;
            startknop.buttonMode = true;
            startknop.useHandCursor = true;
            startknop.mouseChildren = false;
            addChild(startknop);
            addEventListener(MouseEvent.CLICK, startGame);
            // einde
        }

        private function startGame(e:MouseEvent):void
        {
            gotoAndStop(1);
            bonus = 0;
            streak = 0;
            if (retry == false)
            {
                removeChild(startknop);
            } else {
                removeChild(tryAgain);
            }
            // score
            score.x = 250;
            score.y = 30;
            score.width = 250;
            score.text = "Score: 0";
            format.size = 40;
            score.setTextFormat(format);
            addChild(score);
            // einde
            // game klok
            klok.x = 625;
            klok.y = 100;
            addChild(klok);
            gameTimer.addEventListener(TimerEvent.TIMER_COMPLETE, lose);
            gameTimer.addEventListener(TimerEvent.TIMER, tick);
            gameTimer.start();
            // einde
            legKaarten();
            removeEventListener(MouseEvent.CLICK,startGame);
        }

        private function legKaarten() 
        {
            cardsRemoved = 0;
            kaart1open = false;
            kaart2open = false;
            kaart1value = 0;
            kaart2value = 0;
            kaart1id = 0;
            kaart2id = 0;
            kaarten = new Array(); // je roept hier een lege Array(table) op.
            for (var i:int = 0; i <= 17; i++ ) // (int)eger is een afgerond getal. ( geen decimalen)
            {
                var real:int = i; 
                var kolom:int = i;
                var rij:int = 0;
                kaarten.push(new Kaart1()); // push voegt een waarde aan een array toe.
                addChild(kaarten[i]);
                kaarten[i].stop();
                if ( real > 5&&real <= 11)
                {
                    rij++;
                    kolom = i - 6;
                } 
                if ( real > 11)
                {
                    rij = rij + 2;
                    kolom = i - 12;
                }
                var randIndex:int = Math.floor(Math.random() * values.length); // je moet een int maken van de random, anders werkt het niet.
                kaarten[i].id = i;
                kaarten[i].value = values[randIndex]; // dit geeft een kaart een random value uit de Array.
                values.splice(randIndex, 1); // dit haalt een value uit de Array values.
                kaarten[i].x = 200+(kolom * 80);
                kaarten[i].y = 100 + (rij * 150);
                kaarten[i].width = 75;
                kaarten[i].height = 125;
                kaarten[i].addEventListener(MouseEvent.CLICK, omdraaien);
            }
        }
        // hier maken we die 'private' functie, kan alleen in dit bestand worden opgeroepen.
        private function omdraaien(e:MouseEvent):void
        {
            var geklikteKaart:MovieClip = e.target as MovieClip; // e.target is de mouseklik die hij binnenkrijgt.
            if (geklikteKaart.currentFrame == 1 && kaart1open == false)
            {
                if (kaart1open == false)
                {
                    geklikteKaart.gotoAndStop(geklikteKaart.value); // line 138
                    kaart1open = true;
                    kaart1value = geklikteKaart.value;
                    kaart1id = geklikteKaart.id;
                }
            }
            else if(geklikteKaart.currentFrame == 1 && kaart1open == true && kaart2open == false)
            {
                geklikteKaart.gotoAndStop(geklikteKaart.value);
                kaart2open = true;
                kaart2value = geklikteKaart.value;
                kaart2id = geklikteKaart.id;
            }
            if (kaart1open == true && kaart2open == true && kaart1value == kaart2value)
            {
                pause_timer = new Timer(500, 1);
                pause_timer.addEventListener(TimerEvent.TIMER_COMPLETE, removeKaarten);
                pause_timer.start();
            }
            else if (kaart1open == true && kaart2open == true && kaart1value != kaart2value)
            {
                pause_timer = new Timer(500, 1);
                pause_timer.addEventListener(TimerEvent.TIMER_COMPLETE, resetKaarten);
                pause_timer.start();
            }
        }
        private function removeKaarten(e:TimerEvent):void
        {
            removeChild(kaarten[kaart1id]);
            removeChild(kaarten[kaart2id]);
            streak ++;
            cardsRemoved ++;
            kaart1open = false;
            kaart2open = false;
            kaart1value = 0;
            kaart2value = 0;
            kaart1id = 0;
            kaart2id = 0;
            if (streak > 1)
            {
                bonus = bonus + 50;
            }
            score.text = "Score: " + (cardsRemoved * 100 + bonus);
            format.size = 40;
            score.setTextFormat(format);
            pause_timer.removeEventListener(TimerEvent.TIMER_COMPLETE, removeKaarten);
        }
        private function resetKaarten(e:TimerEvent):void
        {
            kaarten[kaart1id].gotoAndStop(1);
            kaarten[kaart2id].gotoAndStop(1);
            kaart1open = false;
            kaart2open = false;
            kaart1value = 0;
            kaart2value = 0;
            kaart1id = 0;
            kaart2id = 0;
            streak = 0;
            pause_timer.removeEventListener(TimerEvent.TIMER_COMPLETE, resetKaarten);
        }
        private function tick(e:TimerEvent):void
        {
            klok.wijzer.rotation += 360 / gameTimer.repeatCount;
        }
        private function lose(e:TimerEvent):void
        {
            retry = true;
            removeChild(klok);
            removeChild(score);
            // tekst voor verlies
            result.x = 300;
            result.y = 150;
            result.width = 250;
            result.text = "YOU SUCK!";
            format.size = 40;
            result.setTextFormat(format);
            addChild(result);
            // einde
            // dit maakt de try again knop.
            tryAgain.x = 100;
            tryAgain.y = 200;
            tryAgain.buttonMode = true;
            tryAgain.useHandCursor = true;
            tryAgain.mouseChildren = false;
            addChild(tryAgain);
            addEventListener(MouseEvent.CLICK, startGame);
            // einde
            // hier reset ik de klok
            gameTimer.reset();
            // einde
            // hier worden de overgebleven kaarten verwijderd.
            var kIndex:int = kaarten.length;
            for (var r:int = 0; r < kIndex; r++)
            {
                removeChild(kaarten[r]);
                values.splice(kIndex, 1)
            }
            //einde
        }
    }
}** 
```

我在不同的论坛上搜索了很多主题，但找不到任何可以帮助我的东西。

我希望有人可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:52:30.817

您的问题是，您正在从`values`数组中拼接项目，但在重置游戏时没有将这些值放回去。所以当你的游戏重新启动时，数组是空的。

而不是在定义它时初始化值数组，而是在您的`startGame`方法中执行它：

```
var values:Array;  //just declare it here, instead of initializing it here

private function startGame(e:MouseEvent):void {
    //initialize it here
    values = new Array(2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10); 
```

需要注意的另一件事是，您的 randomIndex 存在缺陷。如果 Math.random() 产生 1，它将产生一个超出值数组范围的值，因此您希望将 values.length 减去 1：

```
var randIndex:int = Math.floor(Math.random() * (values.length - 1)) 
```

# asp.net-mvc-3 - 周期性查询，没有变化什么都不做

> ID：13298148
> 
> 赞同：1
> 
> 时间：2012-11-08T21:30:14.497
> 
> 标签：asp.net-mvc-3

通过在剃刀视图中具有以下行：

```
<META HTTP-EQUIV="REFRESH" CONTENT="5"> 
```

控制器可以神奇地每 5 秒唤醒一次并查询数据库，显示数据：

```
return View(myViewModel); 
```

但是，如果发现 myViewModel 与前一个相同，我不想做任何事情让我的页面保持原样（以防止闪烁）。我怎样才能做到这一点？

提前致谢。鲍勃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T23:45:22.497

你看过[SignalR](http://signalr.net/)吗？

*   GitHub：[https ://github.com/SignalR/SignalR](https://github.com/SignalR/SignalR)
*   示例：[使用 SignalR 的实时持久长期运行连接](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)

# android - 修改底层Java项目后Android项目不重建

> ID：13298156
> 
> 赞同：2
> 
> 时间：2012-11-08T21:30:50.963
> 
> 标签：android, eclipse, adt

我有一个 Android 项目 (A)，它依赖于 Eclipse 中的纯 Java 项目 (B)。具体来说，在(A)的Project属性中，Java Build Path->Projects，(B)被列为构建路径上的必填项目。

当我在 (B) 中编辑源文件，然后保存，然后运行 ​​Android 项目时，我在控制台中收到以下警告：

```
ActivityManager: Warning: Activity not started, its current task has been brought to the front 
```

根本问题似乎是 .apk 文件没有得到重建。例如，它最后一次修改是在 2012 年 11 月 8 日下午 1:46:41，然后我在 B 中进行了更改并保存了。时间戳保持不变。

要解决此问题，我可以修改 (A) 中的文件。有趣的是，保存后，.apk 仍然没有更新！（我启用了“自动构建”）。但是当我运行 Android 项目时，它会强制重新构建 .apk，然后我对 (B) 的更改会传播到 .apk 文件。

我相信这曾经适用于早期版本的 ADT，但我不确定它何时停止工作。我目前正在使用 Eclipse 4.2.1 (Juno) 和 Android Development Toolkit 版本：20.0.3.v201208082019-427395

我的项目设置中是否可能缺少某些内容？或者这是一个 ADT 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T18:29:10.887

这已在 r21 版本的 Android SDK 工具中得到修复。

# opengl - OpenGL glTexCoordPointer 似乎没有应用纹理

> ID：13298161
> 
> 赞同：2
> 
> 时间：2012-11-08T21:31:09.960
> 
> 标签：opengl, textures, vbo, vertex-buffer

我有代码：

```
glBindTexture( GL_TEXTURE_2D, texture ); 

glBindBuffer(GL_ARRAY_BUFFER, triangleVBO);
glBufferData(GL_ARRAY_BUFFER, sizeof( vertices ), vertices , GL_STATIC_DRAW);
glVertexPointer(3, GL_FLOAT, 0, NULL);  
glEnableClientState(GL_VERTEX_ARRAY);

glBindBuffer(GL_ARRAY_BUFFER, coordsVBO);
glBufferData(GL_ARRAY_BUFFER, sizeof( texcoords ), texcoords , GL_STATIC_DRAW);
glTexCoordPointer(2, GL_FLOAT, 0, NULL);  
glEnableClientState(GL_TEXTURE_COORD_ARRAY);  

glDrawArrays(GL_QUADS, 0, sizeof(vertices) / sizeof(float) / 3); 
```

我很困惑为什么四边形绘制得非常好，但纹理根本没有被映射。

将部分展开到调用中`glTexCoord2f`并且`glVertex3f`效果很好，所以我只能假设我的纹理绑定有问题。

texcoords 正在初始化：

```
GLfloat texcoords[] = {   1.0, 0.0
                        , 1.0, 1.0
                        , 0.0, 1.0
                        , 0.0, 0.0
                        , 0.0, 0.0
                        , 0.0, 1.0
                        , 0.0, 1.0
                        , 0.0, 0.0
                        , 1.0, 0.0
                        , 1.0, 1.0
                        , 0.0, 1.0
                        , 0.0, 0.0
                         ,1.0, 0.0
                         ,1.0, 1.0
                         ,1.0, 1.0
                         ,1.0, 0.0
                        , 1.0, 1.0
                        , 1.0, 1.0
                        , 0.0, 1.0
                        , 0.0, 1.0
                        , 1.0, 0.0
                        , 1.0, 0.0
                        , 0.0, 0.0
                        , 0.0, 0.0 } 
```

现在保持不变，它的对数与我的顶点数组具有顶点三元组的数量相同。

我得到 GL_NO_ERROR 并且面部都被着色为初始调用时设置的默认值`glColor3f(0.9f, 0.1f, 1.0f);`

知道我可能会错过什么吗？

# android - 使用 crosstool-ng 为 arm 交叉编译原生 gcc，有工具链，哪些架构部门，以及哪些构建、主机和目标？

> ID：13298163
> 
> 赞同：3
> 
> 时间：2012-11-08T21:31:11.260
> 
> 标签：android, gcc, arm, cross-compiling, crosstool-ng

我想为arm构建一个本机gcc，在Android上运行，因为我已经为它构建了glibc，并且想要构建与glibc链接的GNU utils，所以想在Android手机上进行原生编译。

我已经用 crosstools-ng 构建了交叉编译工具链。

我已经交叉编译了 glibc，很好。

已经构建了几个本地 arm (arm-exynos-linux-gnueabi) 实用程序，如 tar 等，并确认它们在 Android 手机上工作，当将构建的 x-tools sysroot 的 lib 目录符号链接到 android 机器上的 /lib 时。

现在我需要构建原生的gcc，这样我就可以在机器上开发了。我在交叉编译方面遇到了一些哲学问题，因为我在这方面相对缺乏经验。

因此，我想问一下如何准确地按步骤进行，因为我已经花了两天时间采用试错法，但到目前为止还没有运气。

所以：gcc依赖mpc，又依赖mpfr，又依赖gmp。

那么，我该如何进行呢？

我要构建哪些架构部门，使用哪些主机目标和构建选项？

*   创建一个工具目录并在那里构建这些部门，以免弄乱正在运行的工具链？
*   gmp（没有主机、构建、目标？）
*   mpfr（相同？）
*   mpc（相同？）

*   那么gcc，如何？--host=arm-exynos-linux-gnueabi --build=i686-build_pc-linux-gnu --target=arm-exynos-linux-gnueabi ?

这是正确的，还是我在上述某些步骤中搞砸了？

顺便说一句，我已经按照这个指南[http://forum.xda-developers.com/showthread.php?t=1299962](http://forum.xda-developers.com/showthread.php?t=1299962)构建了 crosstool-ng 工具链，它建议只使用 --host=arm 编译本机应用程序。 ..

我一直在这样做，他们确实在 Android 系统上工作，虽然我觉得不合适，不应该是 --target=arm...？

非常感谢您帮助我完成上述步骤，因为我犯了很多错误。

# php - php 错误消息：警告：mysql_num_rows() 期望参数 1 是资源，布尔值

> ID：13298167
> 
> 赞同：-4
> 
> 时间：2012-11-08T21:31:23.943
> 
> 标签：php, ajax

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:48:57.773

如果您正在使用`LIMIT 1`，您不能假设将有 1 行或 0 行吗？因此，如果我是你并且我正在使用不推荐使用的方法与 MySQL 数据库交互，我会使用：

```
$query = mysql_query("SELECT * FROM info WHERE name='$name' LIMIT 1")or die(mysql_error());
if ($query && mysql_num_rows($query)) {
    // A result was found
    $row = mysql_fetch_array($query);
} else {
    //There were no results found
} 
```

再说一次，您可能应该阅读以下内容：

> [**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护，并且已经开始[弃用过程。](http://news.php.net/php.internals/53799)看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

# c# - C#加锁还是不加锁

> ID：13298168
> 
> 赞同：9
> 
> 时间：2012-11-08T21:31:36.433
> 
> 标签：c#, locking

恐怕我已经知道答案了。我有一个处理服务调用和缓存的类。为了避免使用同一个请求多次调用服务，我当然可以在代码块周围使用**锁，***但是*这些方法中有很多都有不同的参数来构成缓存键。等待一个锁代码块执行，而它可能是一个完全不同的缓存键（或多个不同的缓存键），这似乎是一种耻辱。

我知道我*可以*对缓存键字符串本身进行锁定，但这是一个禁忌，因为该字符串可能会在任何地方弹出。

因此，我可以在没有锁的情况下对服务执行潜在的不必要调用，或者通过等待锁在方法中添加潜在的不必要延迟。

这些是我唯一的两个选择还是还有另一个？

干杯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T21:38:14.343

您可以潜在地切换您的类型以使用线程安全类（例如 a [`ConcurrentDictionary<T,U>`](http://msdn.microsoft.com/en-us/library/dd287191.aspx)）来处理您的缓存。使用得当，这将防止需要锁定（您自己的），因为您可以依赖并发集合本身内置的细粒度锁定。

# eclipse - 401 轴需要授权（来自 Eclipse）

> ID：13298169
> 
> 赞同：2
> 
> 时间：2012-11-08T21:31:49.837
> 
> 标签：eclipse, axis, java

我正在尝试访问 https 肥皂 API。我有来自服务器的证书并添加到 JRE cacerts（我可以在密钥库中看到证书）。我正在运行一个独立的类并访问 SOAP 服务。我收到“需要 401 授权”错误。我确定凭据是正确的（也已验证区分大小写）。

我想知道为什么它在下面抛出异常：

```
- ERROR:return code:  401 
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN"> 
<html><head> <title>401 Authorization Required</title> </head>
<body> <h1>Authorization Required</h1> <p>This server could not verify that you are  authorized to access the document requested.  Either you supplied the wrong credentials (e.g., bad password), or your browser doesn't understand how to supply the credentials required.</p> 
</body>

</html> return code:  401 <!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN"> <html><head> <title>401 Authorization Required</title> </head>
<body> <h1>Authorization Required</h1> <p>This server could not verify that you are authorized to access the document requested.  Either you supplied the wrong credentials (e.g., bad password), or your browser doesn't understand how to supply the credentials required.</p> </body></html> 
```

注意：1) 用户名​​和密码值是字符串。是否需要加密（因为我将客户端作为 java 应用程序运行）。尽管我尝试以 webapp (https) 运行，但仍然会导致相同的异常。2）我可以通过浏览器（使用用户名和密码）从系统访问 SOAP 端点，因此我们可以排除任何与网络相关的问题。

```
// Code snippet
PSPServiceLocator pfspLocator = new PSPServiceLocator();
pfspLocator.setPSPPortEndpointAddress(strNewAddress);
PSPPort pfspPort = pfspLocator.getPSPPort();    
PSPBindingStub pfspStub = (PSPBindingStub)pfspPort;

        // Force HTTP/1.0
        pfspStub._setProperty(
        org.apache.axis.MessageContext.HTTP_TRANSPORT_VERSION, org.apache.axis.transport.http.HTTPConstants.HEADER_PROTOCOL_V10);
        // Configure Basic or Digest Authentication
        pfspStub.setUsername(userName);  // string value
        pfspStub.setPassword(password);  // string value
                int timeout = 1000;

        pfspStub.setTimeout(timeout);

        String strResultXML = pfspPort.cliRun(cmd); 
```

# node.js - user.login 的护照注册错误

> ID：13298171
> 
> 赞同：0
> 
> 时间：2012-11-08T21:31:56.077
> 
> 标签：node.js, express, mongoose, passport.js

在通过 Mongoose 创建用户帐户后尝试登录用户时出现未定义的函数错误...

```
TypeError: undefined is not a function
at /node_modules/passport/lib/passport/http/request.js:44:48
at pass (/node_modules/passport/lib/passport/index.js:240:14)
at Passport.serializeUser (/node_modules/passport/lib/passport/index.js:242:5)
at IncomingMessage.req.login.req.logIn (/node_modules/passport/lib/passport/http/request.js:43:29)
at Promise.<anonymous> (/routes/index.js:33:25)
at Promise.addBack (/node_modules/mongoose/lib/promise.js:120:8) 
```

我在 routes/index.js 中的注册函数如下所示：

```
exports.register = function (req, res) {
// Generate salt
Common.bcrypt.genSalt(function(err, salt) {
    req.body.salt = salt;
    // Generate hash
    Common.bcrypt.hash(req.body.password, salt, function(error, hash) {
        req.body.hash = hash;
        // Remove clear text password
        delete req.body.password;
        // Save new user
        new Model.User(req.body).save(function(err, user) {
            console.log(err);
            console.log(req);
            if (user) {
                req.login(user);
                req.redirect('/');
            } else {
                res.json(false);
            }
        });

    });
 }); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:58:04.090

如果您查看`node_modules/passport/lib/passport/http/request.js`第 44 行第 48 列，您将看到`done`正在调用该函数。错误告诉你`undefined is not a function`, 所以`done`没有定义。如果您查看同一文件的第 29 行，您会看到这`done`是您应该传递给`req.login`函数的参数。换句话说，它期待一个回调，而您没有提供一个。也许是这样的：

```
if (user) {
  req.login(user, function(err) {
    if (err) {
      return req.send('FAILBOAT!');
    }
    return req.redirect('/');
  });
} 
```

虽然我使用护照，但我不`req.login`直接打电话，所以我不能 100% 确定上面代码的含义。我还要指出，我在我的用户模型中做了所有 bcrypt 的东西，这似乎是解决问题的那个方面的一种更简洁的方法。

# data-mining - OLAP 和数据挖掘。如何 ？

> ID：13298174
> 
> 赞同：2
> 
> 时间：2012-11-08T21:31:58.480
> 
> 标签：data-mining, olap

对于我计算机课的期末项目，我们有一篇论文要写，占我们期末成绩的 20%。我被分配了没有一些细节的数据挖掘。所以，我问了我的老师，他说我应该研究 OLAP 和 Excel。所以我做了。但问题是，我们目前只使用数据库等，现在我觉得有必要自己学习它们。

所以我的问题：

*   如何将 OLAP 与 Excel 一起使用？
*   我在哪里可以了解数据挖掘（书籍和可靠的网站）？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T21:42:24.020

你可以看看帕洛奥拉普。

[http://palo.net/](http://palo.net/)

它有 excel 插件，也支持 linux/windows。

# c - Linux 网络编程。“阅读（[...]）”幕后发生了什么？

> ID：13298177
> 
> 赞同：4
> 
> 时间：2012-11-08T21:32:18.430
> 
> 标签：c, linux, network-programming

`ssize_t read(int fd, void * data, size_t count);` **具体是**做什么的？

在网络上的很多文章中经常写到，它*试图*从或描述符 fd 中读取。这意味着什么？“它尝试”：/这样的插座是如何设计的？操作系统是否缓冲传入的消息？或者读取是一个时间关键的操作？我的意思是，如果我不及时“阅读”，是否有一些包裹丢失的可能性？

*编辑：*

我现在想知道为什么这没有阻塞。然后我想知道为什么 read(...) 有其他参数，而不是我在代码片段中看到的所有函数。最后我意识到它是**read** (...) 而不是**recv** (...)。不幸的是，它仍然几乎像我预期的那样工作。有趣的是，我们的 ascostaivie tohuhgts 是如何与我们融为一体的。（不要编辑）我不得不承认德语的例子对读者有更大的影响......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T21:52:41.280

Linux 将缓冲到达连接的 TCP 套接字上的任何数据，默认情况下最多为几兆字节。您不必在数据到达的同时阅读。

`netstat -tn`将为每个连接的套接字显示`Recv-Q`和`Send-Q`，这是每个方向排队的字节数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-08T22:57:36.620

As Erik Ekman answered, the system will buffer some amount of data even if you don't read it dilligently.

After the buffer gets more and more filled, the receiver's TCP/IP implementation will reduce the advertised receive window size, causing the peer to send smaller chunks of data, effectively throttling the transfer. When the buffer is full, the window size drops to zero and the peer is allowed to send no additional data. Even if this happens, no data will be lost because the peer will resume sending the packets once the receive buffer is cleared.

A correct TCP/IP implementation guarantees that no data is just *lost* by skipping—a connection is either reliable and working or it is entirely lost, which is indicated by `read` returning -1.

# ruby - 使用 twitter ruby gem 时的搜索结果数

> ID：13298178
> 
> 赞同：0
> 
> 时间：2012-11-08T21:32:22.973
> 
> 标签：ruby, twitter

下面的代码返回 15 个条目，无论大小`:count`。为什么？如何控制结果的数量？

```
Twitter.search("#ruby -rt", :lang => "ja", :count => 1).results 
```

我正在使用 twitter gem 版本 3.7.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T23:03:53.447

我无法在`3.x.x`Gem 的版本中使用它。更新到`>= 4.0.0`似乎添加了您需要的功能。我认为该`:count`选项可能不存在。

# objective-c - 将数据从 ViewController 传递到 UIView

> ID：13298180
> 
> 赞同：0
> 
> 时间：2012-11-08T21:32:33.500
> 
> 标签：objective-c, ios, uiview, uiviewcontroller

> **可能的重复：**
> [在视图控制器之间传递数据](https://stackoverflow.com/questions/5210535/passing-data-between-view-controllers)

我在 FirstViewController 上有一个带有浮点值的数组。当用户单击按钮时，我需要将此数组传递给我的视图。此按钮将调用视图并绘制通知点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:32:37.987

**1.** 在你的 FirstViewController.h 中写

```
#include <UIKit/UIKit.h>
extern NSArray *yourArray; 
```

在你的 FirstViewController.m 中写

```
#import "FirstViewController.h"
@interface FirstViewController ()
@end
NSArray *yourArray; 
```

现在您必须在“MyView”-Class 中导入整个 FirstViewController。只需在 MyView.m 中 #import "FirstViewController.h"。这样做之后，“yourArray”将在 MyView 中可用。

或者，**2.**，您可以在 MyView.h 中编写如下内容：

```
- (void)drawRect(NSArray *)yourArray; 
```

在您的 FirstViewController.m 中，只需传递数据：（不要忘记#include MyView.h）

```
MyView *myView = [[MyView alloc]init];
[myView drawRect:yourArray]; //You'll have to pass "yourArray", to the function in MyView, which is going to be called 
```

或者，**3.**，如果你使用故事板，你可以

```
- (IBAction)pushedButton(UIButton *)sender {
[self performSegueWithIdentifier:@"pushButton" sender:self];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
if ([segue.identifier isEqualToString:@"pushButton"] {
MyView *destinationViewController = segue.destinationViewController;
destinationViewController.yourArray = yourArray; // you'll have to define yourArray in the .h File
}
} 
```

# java - Java中的单元测试多行字符串

> ID：13298181
> 
> 赞同：2
> 
> 时间：2012-11-08T21:32:34.983
> 
> 标签：java, string, unit-testing, junit, junit4

我想对解析文件以获取特定模式的 API 进行单元测试。
返回的文本片段可能是多行的并包含制表符等。即文件中的文本被格式化为新行和制表符以供用户阅读（就像我们很好地缩进一个 xml 文件一样）。
**问题：**由于`Java`不提供定义此类字符串的选项（这将是`Assert`检查 API 输出的预期结果），如何处理此类问题？
我想例如将所有预期的输出保存在一个带有某种特殊字符的文件中，以标记每个预期片段的开始和结束，但我认为也许有一个标准的方法来解决这个问题。
有更好的选择吗？

**更新：** 示例：

```
This is an example String.    
     This is an inner part of the string.        Another part.           Another also.    
                      This is also an inner part.   
     Now an outer.   This is the outer example       string. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T21:40:14.113

**更新：**基于@Code-Guru 的回答（他说的很明显）：如果你想走内联路线，你可以很容易地做到这一点，以便 Eclipse 正确插入和自动转义你的文字：*Windows->Preferences- >Java->Editor->Typing->粘贴文字时转义文本*。

令人遗憾的是，Java 没有像 Scala 或 Groovy 这样的多行字符串。

我发现的最佳解决方案是将文本文件放在您的类路径中并执行

```
getClass().getResourceAsStream("filename");
//Then convert to string. 
```

这将加载`filename`从相对于`getClass()`类的类路径命名的文件（即在同一个包中）。

您可以在这里使用我的要点：[https](https://gist.github.com/4041855) : //gist.github.com/4041855，它使用 Guava 可以更轻松地将文件作为字符串从类路径加载并进行一些性感的缓存。

如果您使用**Maven**或**Gradle**，您将希望将这些文件放入`src/test/resources`而不是`src/test/java`.

如果您不想制作很多文件，您显然可以对字符串（即 XML）进行一些解析。另一个稍微有点矫枉过正的选择是制作一个只读的 SQLite 数据库甚至是 CSV。我见过有人这样做，如果他们想要测试 1000 多个不同的参数。如果那是你的问题，你应该谷歌**JUnit 参数化测试**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T22:00:17.407

我不明白 Java 不允许在代码中使用“多行”字符串这一事实有什么问题。您应该能够与其中包含 '\n' 和 '\t' 字符的字符串进行比较。这些“预期”字符串是在您的测试中硬编码还是来自输入文件是您的测试套件的设计决策。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T21:57:24.583

我会支持@Adam Gent 的建议，添加一些示例代码以将资源读入字符串：

```
final InputStream is = StringFromFile.class.getResourceAsStream("data.txt");
final byte[] b = new byte[is.available()];
is.read(b);
System.out.println(new String(b, "UTF-8")); 
```

您可以嵌入格式化占位符（例如 %s、%d 等），然后使用 String.format 将它们替换为实际值。

如果你想拥有一个包含所有字符串的文件，你可以维护一个 xml 文件：

```
<strings>
    <string name="error 1"><![CDATA[Multiline
error
message 1]]></string>
    <string name="error 2"><![CDATA[Multiline
error
message 2]]></string>
    <string name="error 3"><![CDATA[Multiline
error
message 3]]></string>
</strings> 
```

并将其导入地图 - 这样您就可以使用 map.get(name);

您可以[在此处找到类似的示例](https://stackoverflow.com/questions/3941479/jaxb-how-to-marshall-map-into-keyvalue-key)

# java - 从存储库返回 id 列表

> ID：13298182
> 
> 赞同：0
> 
> 时间：2012-11-08T21:32:37.757
> 
> 标签：java, jakarta-ee

我无法返回关于我的问题的 ID 列表。我有完全相同的查询来返回问题对象并且它可以工作。这不应该工作的任何原因。它给我的只是一个空列表。零元素。

```
@NamedQuery(name = Question.FIND_ALL_IDS_FOR_STATE_APPROVED, query = "SELECT q.id FROM Question q WHERE q.state = :state") 
```

和：

```
@Override
public List<Integer> findAllIdsForApprovedQuestions() {

    final TypedQuery<Integer> query = getEntityManager().createNamedQuery(Question.FIND_ALL_IDS_FOR_STATE_APPROVED, Integer.class);
    query.setParameter("state", QuestionState.APPROVED);
    final List<Integer> ids = query.getResultList();

    return ids;
} 
```

查询实体的属性时会返回什么，应该如何处理？

# mysql - 每 40 秒轮询一次，这个 MySQL 查询效率低吗？

> ID：13298185
> 
> 赞同：2
> 
> 时间：2012-11-08T21:32:43.813
> 
> 标签：mysql, sql, polling

我有一个网页，它每 30 秒自动更新用户列表及其评论。

网站上一次最多可以有 300-400 个用户用户。

因此，每 30 秒，通过 AJA 调用一个 PHP 脚本，该脚本运行如下：

```
SELECT `user` .*, by_user.name as updated_by 
                "FROM `user`
                "LEFT JOIN `user` by_user ON ( `user`.last_updated_by = by_user.user_id ) 
                WHERE `user`.active= 1 AND `user`.group_id =.$group_id.
                AND `user`.last_updated > (NOW() - INTERVAL 30 SECOND) 
```

不使用该日期计算（NOW 和 INTERVAL）而是记录最后一次投票的日期时间然后检查是否会更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T21:38:06.950

`NOW() - INTERVAL 30 SECOND`查询只执行一次，而且速度非常快。做任何其他事情的开销几乎肯定会对性能产生更严重的影响。

如果您有复合索引 (active, group_id, last_updated)，它将使性能达到最佳。

由于您在选择中执行了 u.*，因此我不会尝试为查询创建覆盖索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:39:36.780

这两种方法都应该给出相同的结果——计算速度非常快，并且只在执行查询时发生一次。您的查询速度将更多地取决于您索引的字段等。

# c# - Datagrid中的C#Winform凌乱/模糊文本

> ID：13298187
> 
> 赞同：2
> 
> 时间：2012-11-08T21:32:47.480
> 
> 标签：c#, winforms, datagrid

我的表单上有一个数据网格，它与 DataTable 绑定我使用此代码

```
public void SetDataSource(DataTable dt)
    {            
        dgr.DataSource = null;
        dgr.AutoGenerateColumns = false;            
        dgr.DataSource = dt;                 
    } 
```

每次我单击标题或想要更改组合框时，单元格中的文本看起来都会一次又一次地被覆盖。以前没见过，看（这是第五次点击标题后）

![在此处输入图像描述](../Images/673d55ee84da0a490f9e77cc1f11eca5.png)

数据网格是只读的，没有什么特别的设置我尝试了刷新方法更新方法更新数据表和许多其他的东西，但我放弃了..任何帮助将不胜感激

谢谢帕特

```
 // 
        // dgr
        // 
        this.dgr.AllowUserToAddRows = false;
        this.dgr.AllowUserToDeleteRows = false;
        this.dgr.Anchor = ((System.Windows.Forms.AnchorStyles)((((System.Windows.Forms.AnchorStyles.Top | System.Windows.Forms.AnchorStyles.Bottom) 
        | System.Windows.Forms.AnchorStyles.Left) 
        | System.Windows.Forms.AnchorStyles.Right)));
        this.dgr.AutoSizeColumnsMode = System.Windows.Forms.DataGridViewAutoSizeColumnsMode.Fill;
        this.dgr.BackgroundColor = System.Drawing.Color.Lavender;
        dataGridViewCellStyle21.Alignment = System.Windows.Forms.DataGridViewContentAlignment.MiddleCenter;
        dataGridViewCellStyle21.BackColor = System.Drawing.SystemColors.Control;
        dataGridViewCellStyle21.Font = new System.Drawing.Font("Microsoft Sans Serif", 8.25F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        dataGridViewCellStyle21.ForeColor = System.Drawing.SystemColors.WindowText;
        dataGridViewCellStyle21.SelectionBackColor = System.Drawing.SystemColors.Highlight;
        dataGridViewCellStyle21.SelectionForeColor = System.Drawing.SystemColors.HighlightText;
        dataGridViewCellStyle21.WrapMode = System.Windows.Forms.DataGridViewTriState.True;
        this.dgr.ColumnHeadersDefaultCellStyle = dataGridViewCellStyle21;
        this.dgr.ColumnHeadersHeightSizeMode = System.Windows.Forms.DataGridViewColumnHeadersHeightSizeMode.AutoSize;
        this.dgr.Columns.AddRange(new System.Windows.Forms.DataGridViewColumn[] {
        this.Title,
        this.SKU,
        this.Popularity,
        this.Profitability,
        this.Qty,
        this.Score,
        this.EPT,
        this.QPPF,
        this.Overall,
        this.URL});
        this.dgr.EditMode = System.Windows.Forms.DataGridViewEditMode.EditOnEnter;
        this.dgr.Enabled = false;
        this.dgr.Location = new System.Drawing.Point(12, 60);
        this.dgr.MultiSelect = false;
        this.dgr.Name = "dgr";
        this.dgr.RowHeadersWidth = 22;
        dataGridViewCellStyle30.BackColor = System.Drawing.Color.Transparent;
        this.dgr.RowsDefaultCellStyle = dataGridViewCellStyle30;
        this.dgr.Size = new System.Drawing.Size(1292, 500);
        this.dgr.TabIndex = 4;
        this.dgr.CellDoubleClick += new System.Windows.Forms.DataGridViewCellEventHandler(this.dgr_CellDoubleClick);
        this.dgr.CellMouseClick += new System.Windows.Forms.DataGridViewCellMouseEventHandler(this.dgr_CellMouseClick);
        this.dgr.DataBindingComplete += new System.Windows.Forms.DataGridViewBindingCompleteEventHandler(this.dgr_DataBindingComplete);
        this.dgr.MouseMove += new System.Windows.Forms.MouseEventHandler(this.dgr_MouseMove); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:53:32.123

我不知道你是如何设法设置这个 `dataGridViewCellStyle30.BackColor = System.Drawing.Color.Transparent;`的，但它会造成你所有的问题，试着改变它。它基本上不会重新填充您的背景，并且会在前一个文本上绘制新文本。将其更改为 dataGridViewCellStyle30 中的其他颜色。

# visual-studio-2010 - asp.net 网络表单应用程序不建立在“从调试开始”

> ID：13298195
> 
> 赞同：1
> 
> 时间：2012-11-08T21:33:32.733
> 
> 标签：visual-studio-2010

我有一个在 vs.net Web 服务器中运行的小型 asp.net 应用程序，当我通过调试启动站点时，它并不总是构建。之前的构建只是出现在浏览器中，任何断点都被忽略。问题是什么？我不记得在与我合作的任何其他网站上看到过这种情况。如果我进行足够多次的重建，它最终会正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:35:02.610

检查配置管理器并确保在当前配置中选择“构建”网站。

# sql - 配置 SQL 服务器以存储 UTC 日期时间

> ID：13298196
> 
> 赞同：2
> 
> 时间：2012-11-08T21:33:40.413
> 
> 标签：sql, sql-server-2008, datetime

如果传递本地日期时间值，是否有某种方法可以配置 sql server 在数据库中存储 UTC 时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T21:36:01.157

不，没有。

您需要在传递给 SQL Server 之前或之后转换为 UTC。

`DateTime`传递到 SQL Server的实例`DateTimeKind`在传输过程中会丢失关联，因为 SQL 类型没有与之对应的任何内容。

# git - 带密码的 Git 克隆 http

> ID：13298198
> 
> 赞同：15
> 
> 时间：2012-11-08T21:33:53.233
> 
> 标签：git, github

我正在尝试通过 http 克隆一个私有 git 存储库。这里有一个类似的问题：[Git clone using http with user and password](https://stackoverflow.com/questions/6030698/git-clone-using-http-with-user-and-password)。

有没有办法在不输入用户/密码的情况下进行 git clone 提示？

当我尝试这样做时：

```
prodroom15:mquimiro$ git clone https://github.com/user:password/Automator.git
Cloning into 'Automator'...
Username for 'https://github.com': 
Password for 'https://github.com': 
```

我将如何做到这一点，这样我就不必手动输入用户/密码？

请注意，`https://github.com/user/Automator.git`在提示符下进行正常和手动输入用户/密码可以正常工作。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-08T22:00:35.367

我认为语法实际上`https://user:password@github.com`不是`https://github.com/user:password`.

如果您使用的是 Git 1.7.9 或更高版本，请考虑使用更安全的[凭证助手机制](https://stackoverflow.com/questions/5343068/is-there-a-way-to-skip-password-typing-when-using-https-github)。

# python - 使用python从javascript标签中解析变量数据

> ID：13298201
> 
> 赞同：13
> 
> 时间：2012-11-08T21:33:57.700
> 
> 标签：python, html, json, beautifulsoup, python-requests

我正在使用 BeautifulSoup 和 Requests 抓取一些网站。我正在检查一个页面，其数据位于`<script language="JavaScript" type="text/javascript">`标签内。它看起来像这样：

```
<script language="JavaScript" type="text/javascript">
var page_data = {
   "default_sku" : "SKU12345",
   "get_together" : {
      "imageLargeURL" : "http://null.null/pictures/large.jpg",
      "URL" : "http://null.null/index.tmpl",
      "name" : "Paints",
      "description" : "Here is a description and it works pretty well",
      "canFavorite" : 1,
      "id" : 1234,
      "type" : 2,
      "category" : "faded",
      "imageThumbnailURL" : "http://null.null/small9.jpg"
       ...... 
```

有没有办法可以从`page_data`这个脚本标签中的变量创建一个 python 字典或 json 对象？那会比尝试使用 BeautifulSoup 获取值要好得多。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-08T21:36:34.867

如果你使用 BeautifulSoup 来获取`<script>`标签的内容，[`json`模块](http://docs.python.org/2/library/json.html)可以用一点字符串魔法来完成剩下的工作：

```
 jsonValue = '{%s}' % (textValue.partition('{')[2].rpartition('}')[0],)
 value = json.loads(jsonValue) 
```

上面的`.partition()`and`.rpartition()`组合将 JavaScript 文本块中的第一个`{`和最后一个文本分开`}`，这应该是您的对象定义。通过将大括号添加回文本，我们可以将其输入[`json.loads()`](http://docs.python.org/2/library/json.html#json.loads)并从中获取 python 结构。

这是因为 JSON*基本上*是 Javascript 文字语法对象、数组、数字、布尔值和空值。

示范：

```
>>> import json
>>> text = '''
... var page_data = {
...    "default_sku" : "SKU12345",
...    "get_together" : {
...       "imageLargeURL" : "http://null.null/pictures/large.jpg",
...       "URL" : "http://null.null/index.tmpl",
...       "name" : "Paints",
...       "description" : "Here is a description and it works pretty well",
...       "canFavorite" : 1,
...       "id" : 1234,
...       "type" : 2,
...       "category" : "faded",
...       "imageThumbnailURL" : "http://null.null/small9.jpg"
...    }
... };
... '''
>>> json_text = '{%s}' % (text.partition('{')[2].rpartition('}')[0],)
>>> value = json.loads(json_text)
>>> value
{'default_sku': 'SKU12345', 'get_together': {'imageLargeURL': 'http://null.null/pictures/large.jpg', 'URL': 'http://null.null/index.tmpl', 'name': 'Paints', 'description': 'Here is a description and it works pretty well', 'canFavorite': 1, 'id': 1234, 'type': 2, 'category': 'faded', 'imageThumbnailURL': 'http://null.null/small9.jpg'}}
>>> import pprint
>>> pprint.pprint(value)
{'default_sku': 'SKU12345',
 'get_together': {'URL': 'http://null.null/index.tmpl',
                  'canFavorite': 1,
                  'category': 'faded',
                  'description': 'Here is a description and it works pretty '
                                 'well',
                  'id': 1234,
                  'imageLargeURL': 'http://null.null/pictures/large.jpg',
                  'imageThumbnailURL': 'http://null.null/small9.jpg',
                  'name': 'Paints',
                  'type': 2}} 
```

# java - 我可以将包含大量数据的外部 URL 上传到 App Engine blob 商店吗？

> ID：13298202
> 
> 赞同：2
> 
> 时间：2012-11-08T21:34:13.903
> 
> 标签：java, google-app-engine, url, upload

我想将外部图像（我有 URL）上传到 Blobstore。我*无法*发布数据，因为它在另一个网站上。

它的上传方式很简单：(a) 使用 fetch 服务来获取 URL，然后 (b) 使用文件服务将来自 URL 的数据存储为 blob。但是，这需要将数据加载到我正在运行的实例中。据我了解，获取服务的所有数据都必须先驻留在内存中，然后才能上传，这限制了最大数据大小。如果 fetch 服务流式传输数据，那也不会太糟糕。

有谁知道我可以以节省内存的方式将外部图像复制到 blob 中的方法？

蒂姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T00:21:37.477

如果服务器支持，您可以分块下载文件。通常，服务器通过发送**[Accept-Ranges](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.5)**标头来表明这一点。**[您可以通过设置Range](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35.2)**标头来请求特定的字节范围。如果服务器接受这一点并且只提供指定的字节范围，它会随请求发送**[Content-Range标头。](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.16)**

理论上，您应该能够继续附加到文件对象，直到您完成它。

# c++ - 什么是 C++ `无符号`？

> ID：13298205
> 
> 赞同：-8
> 
> 时间：2012-11-08T21:34:20.380
> 
> 标签：c++

C++中的类型`unsigned`指的是什么？和 完全一样`unsigned int`吗？

[符合质量标准]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T21:40:02.823

是的，完全一样。有关类型说明符和相应指定类型的列表，请参见*7.1.6.2 简单类型说明符 [dcl.type.simple]中的表 10。*`unsigned`指定类型“unsigned int”，就像`unsigned int`指定类型“unsigned int”一样。

```
Specifier(s)            Type 
```

* * *

```
_type-name_             the type named
_simple-template-id_    the type as defined in 14.2
char                    “char”
unsigned char           “unsigned char”
signed char             “signed char”
char16_t                “char16_t”
char32_t                “char32_t”
bool                    “bool”
unsigned                “unsigned int”       <<<<<<<<<<<<<
unsigned int            “unsigned int”
signed                  “int”
signed int              “int”
int                     “int”
unsigned short int      “unsigned short int”
unsigned short          “unsigned short int”
unsigned long int       “unsigned long int”
unsigned long           “unsigned long int”
unsigned long long int  “unsigned long long int”
unsigned long long      “unsigned long long int”
signed long int         “long int”
signed long             “long int”
signed long long int    “long long int”
signed long long        “long long int”
long long int           “long long int”
long long               “long long int”
long int                “long int”
long                    “long int”
signed short int        “short int”
signed short            “short int”
short int               “short int”
short                   “short int”
wchar_t                 “wchar_t”
float                   “float”
double                  “double”
long double             “long double”
void                    “void”
auto                    placeholder for a type to be deduced
decltype(_expression_)  the type as defined below 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T21:40:51.763

是的，它是一样的。

参考：[http ://en.cppreference.com/w/cpp/language/types](http://en.cppreference.com/w/cpp/language/types)

# java - JAX-WS 返回空元素

> ID：13298208
> 
> 赞同：1
> 
> 时间：2012-11-08T21:34:30.423
> 
> 标签：java, web-services, jax-ws

我使用 JAX-WS，它返回产品实体列表。

产品具有以下属性：

*   ID
*   姓名
*   描述
*   等等

描述有值 String 或 null。我调试的产品列表和描述值是有效的。当描述为空时，描述元素不包含在 SOAP 响应中。我想在具有 NULL 值的 SOAP 响应中使用此元素。

这是响应转储：

```
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
   <S:Body>
      <ns2:getProductsResponse xmlns:ns2="http://blabla.com/">
         <return>
            <idProduct>1</idProduct>
            <name>name</name>
            <description>some desc</description>
         </return>
         <return>
            <idProduct>2</idProduct>
            <name>name</name>
         </return>
      </ns2:getProductsResponse>
   </S:Body>
</S:Envelope> 
```

我想：

```
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
   <S:Body>
      <ns2:getProductsResponse xmlns:ns2="http://blabla.com/">
         <return>
            <idProduct>1</idProduct>
            <name>name</name>
            <description>some desc</description>
         </return>
         <return>
            <idProduct>2</idProduct>
            <name>name</name>
            <description>NULL</description>
         </return>
      </ns2:getProductsResponse>
   </S:Body>
</S:Envelope> 
```

这是我的网络方法：

```
@WebMethod(operationName = "getProducts")
public List<ProductDTO> getProducts(@WebParam(name = "idCompany") int idCompany) {
        ProductHelper helper = new ProductHelper();
        // this list was debuged and it is correct
        List<ProductDTO> products = helper.getAll(idCompany);
        return products;
} 
```

我使用 JAX-WS RI 2.2-hudson-740

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T22:00:52.133

问题是计算机无法判断您希望将 a`null`序列化为字符串“<code>NULL”；这对计算机来说一点也不明显。（这对您的客户来说也不会很明显。）因此，计算机`null`以默认的 JAXB 方式处理：它省略了元素。

如果您希望元素存在，则需要在 上使用 JAXB 注释`ProductDTO`来说明情况就是如此。您可能还想让元素为空；虽然它不会完全转换为您所说的您正在寻找的内容，但它至少应该做正确的事情（并且您的客户应该能够应对）。

这将在`description`字段（或`getDescription()`方法）上放置这样的注释：

```
@XmlElement(required=true, nillable=true) 
```

* * *

另一种方法是添加一个`getDescription()`方法，该方法返回字符串`"NULL"`，否则它会返回 a `null`（否则返回实际值）。这样做的问题是它可能会混淆您的数据库绑定层；通过合理地注释元素（并使用更好的序列化）正确地完成工作会导致更少的痛苦。

# c# - 可以在运行时查询 C# 泛型吗？

> ID：13298215
> 
> 赞同：3
> 
> 时间：2012-11-08T21:34:47.317
> 
> 标签：c#, java, generics

* * *

因此，我目前正在将一个项目从 Java 移植到 C#，并且正在尝试解决问题。

目前，在 Java 中，当我们查询泛型类型时，它会删除泛型类型。正因为如此，当我们查询某些东西时，我们需要使用 Annotation 以便我们可以获得一个集合并知道我们得到了什么。

在 C# 中，这是同样的问题吗？可以在运行时查询 C# 泛型吗？如果这样做，我们是否需要使用属性来解决问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T21:36:03.447

> 可以在运行时查询 C# 泛型吗？

是的。泛型类型在 C# 中不会被删除，因为它们是类型信息本身的一部分。为此，您不需要在 C# 中向对象添加属性。

话虽如此，除了使用泛型类型之外，通过使用泛型方法，您可能不需要“查询”类型，因为您可以预先构造适当的类型。

# php - $wp_rewrite->flush_rules() 不工作

> ID：13298216
> 
> 赞同：2
> 
> 时间：2012-11-08T21:34:52.060
> 
> 标签：php, wordpress, rewrite, hook

我正在构建一个设置自定义帖子类型的 Wordpress 插件，这一切似乎都工作得很好而且很花哨。但是，我有一个激活钩子，它应该（至少在理论上）设置我的永久链接并刷新我的重写规则，但它不起作用：

```
register_activation_hook( __FILE__, 'foodsafety_activate' );

function foodsafety_activate() {
  global $wp_rewrite;
  $wp_rewrite->add_rewrite_tag("%inspection%", '([^/]+)', "inspection=");
  $wp_rewrite->add_permastruct('inspection', $inspection_structure, false);    
  $wp_rewrite->flush_rules();
} 
```

如果我进入`Settings > Permalinks`并点击“保存更改”，规则会被刷新并且永久链接按预期工作，所以我一定是在激活钩子的某个地方出错了。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:32:10.007

您是否复制了所有功能代码？因为，似乎 $inspection_structure 是空的..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-13T10:45:43.627

你确定 register_activation_hook( **FILE** , 'foodsafety_activate' ); 在主插件文件中吗？我遇到过同样的问题。事实证明，注册激活仅在放置在主插件文件中时才有效。

# javascript - 如何惯用地初始化为零或增加属性？

> ID：13298232
> 
> 赞同：27
> 
> 时间：2012-11-08T21:36:06.833
> 
> 标签：javascript

我喜欢那些简短的 js oneliners。我想知道是否有一些合乎逻辑和优雅的东西：

*   如果未定义，则将变量初始化为零
*   否则加一。

最好比这个短;）

```
var obj = {} ; 

//some iterative called function
obj.prop = obj.prop===undefined?0:obj.prop++; 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-11-08T21:38:04.940

这将导致`NaN`第一个增量，默认为`0`.

```
obj.prop = ++obj.prop || 0; 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-12-10T14:43:45.413

一种更清洁的方法很简单

```
obj.prop = obj.prop + 1 || 0; 
```

使用增量运算符是错误的或矫枉过正。后缀运算符 , `x++`（问题中的示例）根本不应该工作。前缀 ,`++x`导致分配两次（比如说`x = x = x+1`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-10T21:30:45.700

更短的解决方案：obj.prop = -~obj.prop

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-16T05:03:24.250

无法直接将变量传递给函数 inc(obj.prop)，因为在 javascript 中变量是按值传递的，但您可以传递对象本身以及要递增的变量的名称。

```
Object.prototype.inc = function(n){ this[n]? this[n]++ : this[n] = 1; }

let obj = {};

obj.inc("prop");

// obj.prop == 1 
```

您还可以在之前将必填字段添加到对象中

```
Object.prototype.has_fields = function(obj2){
    for(let p of Object.keys(obj2)){
        if(obj2[p].constructor == Object){
            if(!this[p]) this[p] = {};
            this[p].has_fields(obj2[p]);
        }else{
            if(!this[p]) this[p] = obj2[p];
        }
    }
    return this;
}

let obj = {};

    obj.has_fields({a:{b:{c:{d:{prop:0}}}}});
    obj.a.b.c.d.prop++;
    // obj.a.b.c.d.prop == 1

    obj.has_fields({a:{b:{c:{d:{prop:0}}}}});
    obj.a.b.c.d.prop++;
    // obj.a.b.c.d.prop == 2 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-09-30T09:53:16.823

这适用于普通 JS 和 TypeScript：

```
obj.prop = (obj.prop ?? 0) + 1; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-14T21:11:53.780

类似于[我讨厌懒惰的答案，但避免了](https://stackoverflow.com/questions/13298232/short-javascript-code-for-initialize-to-zero-or-increment/#13298258)[Bodgan](https://stackoverflow.com/questions/13298232/short-javascript-code-for-initialize-to-zero-or-increment/#27403831)指出的双重分配

```
++obj.prop || (obj.prop=0) 
```

在全球范围内

```
++window.foo || (window.foo=0) 
```

# java - Java jMonkey bug，out.write inside if 循环

> ID：13298233
> 
> 赞同：1
> 
> 时间：2012-11-08T21:36:09.703
> 
> 标签：java, jmonkeyengine

我有一个小 jMonkey 程序，球在四处弹跳。我想每秒记录每个球的 3d 矢量。

当我运行我的代码时：

```
@Override
public void simpleUpdate(float tpf) {
    if(getTimer().getTimeInSeconds() >= 1) {
        out.write("\n" + count + "  ");
        out.write(ball1g.getLocalTranslation() + "  ");
        out.write(ball2g.getLocalTranslation() + "  ");
        out.write(ball3g.getLocalTranslation().toString());
        count++;
        getTimer().reset();
    }
} 
```

我的文本文件是完全空白的。但是当我运行时：

```
@Override
public void simpleUpdate(float tpf) {
    out.write("this can be anything bigger than one character wide");
    if(getTimer().getTimeInSeconds() >= 1) {
        out.write("\n" + count + "  ");
        out.write(ball1g.getLocalTranslation() + "  ");
        out.write(ball2g.getLocalTranslation() + "  ");
        out.write(ball3g.getLocalTranslation().toString());
        count++;
        getTimer().reset();
    }
} 
```

它有效，只是在我的实际数据之间有大量可笑的字符。

```
out.write(""); 
```

什么都不做，至少必须是

```
out.write(" "); 
```

或更大。

我做错什么了吗？如果没有，我该如何解决这个问题但完成相同的任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:49:10.257

你的程序有干净的出口吗？如果您的输出被缓冲并且您​​只偶尔写入一次，则它可能需要很长时间才能[刷新](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/OutputStream.html#flush%28%29)。如果您在程序刷新之前终止程序，并且它没有正确关闭流，则缓冲区内容将永远不会被刷新并且生成的文件将为空。

OTOH，如果您一直在编写（外部代码`if`可能会比内部代码调用更多）缓冲区将更快地填充，因此至少有一些数据将被刷新的可能性更大。

`out.flush()`在代码编写完成后（在 末尾）尝试显式调用`if`，看看是否能解决您的问题。

# php - Vim：字符串中的 Javascript 语法

> ID：13298234
> 
> 赞同：2
> 
> 时间：2012-11-08T21:36:12.403
> 
> 标签：php, javascript, string, vim, syntax

我似乎找不到插件或语法文件来执行此操作，但是有没有办法在 PHP 字符串中突出显示 Javascript 语法？有一个插件/语法文件可以为 SQL 语法做这件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:42:55.693

我不知道任何插件；虽然可能有一个。如果我需要在不同的文件类型中突出显示几分钟，我通常会执行以下操作之一。

`:set filetype=javascript`

或者

`:set filetype=html`

这并不能真正回答您的问题，但是如果没有人想出更好的方法，或者在此期间，它至少应该有所帮助。

# matlab - 如何使用 Matlab 快速获得均方误差？

> ID：13298236
> 
> 赞同：3
> 
> 时间：2012-11-08T21:36:27.737
> 
> 标签：matlab, mean-square-error

我不知道这是否可能，但让我解释一下我的问题

想象一下我有下面的数组

```
errors=[e1,e2,e3]; 
```

现在我要计算的内容如下

```
MSE=1/(array_lenght)*[e1^2+e2^2+e3^2]; 
```

我可以用一个循环来做这个，但我想知道是否有任何快速的方法。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-08T21:38:38.623

求平方误差的平均值：

```
MSE = mean(errors.^2) 
```

每个元素单独平方，然后找到结果向量的平均值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T21:38:26.997

```
sum(errors.^2) / numel(errors) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-09T11:14:41.627

提高权力和增加权力可以一起完成，而不是依次进行：

```
MSE = (errors*errors') / numel(errors) 
```

# ios - 确定没有 NSZombie 的 EXC_BAD_ACCESS 的根本原因？

> ID：13298245
> 
> 赞同：6
> 
> 时间：2012-11-08T21:36:54.507
> 
> 标签：ios, debugging, memory-management, crash, exc-bad-access

提前感谢您对我遇到的问题的任何帮助/见解。就在最近，我的 iOS 应用程序开始因可怕的`EXC_BAD_ACCESS`错误而失败。我对 SO 和 Google 进行了大量研究，并收到了一些很好的建议，但没有一篇文章能帮助我解决我的问题。到目前为止，我知道 EXC_BAD_ACCESS 可能是以下两种情况之一：

```
1) A pointer is now pointing to memory that was deallocated.
2) A pointer itself is corrupt. 
```

我阅读并遵循了[此处](https://stackoverflow.com/questions/3111585/tracking-down-exc-bad-access-without-nszombie)、[此处](http://loufranco.com/blog/files/Understanding-EXC_BAD_ACCESS.html)、[此处](https://stackoverflow.com/questions/327082/exc-bad-access-signal-received)和[此处](http://mobiledevelopertips.com/debugging/tracking-down-exc_bad_access-errors-with-nszombieenabled.html)的说明。当我执行“构建并运行”时，我可以 100% 地重现 exc_bad_access。但是，当我在调试器或 Instruments 中启用 NSZombie 时，我**永远**无法重现该问题。此外，NSZombie 不会在控制台中留下任何有用的信息。

我最接近查明问题的方法是在每一行代码之后放置一个 NSLog，以便查看它在哪里崩溃。我相信它在两个不同的点上崩溃了——这两个点都返回了`cellForRowAtIndexPath`. 下面我提供了两种我认为会崩溃的方法，以及控制台上的错误输出。任何帮助或指导将不胜感激，谢谢！

违规方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
if (indexPath.section == 0) {
    static NSString *CellIdentifier = @"EventDetailCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.textLabel.textColor = [UIColor colorWithRed:150 green:143 blue:135 alpha:1.0];
        cell.textLabel.highlightedTextColor = [UIColor whiteColor];
        cell.textLabel.font = [UIFont fontWithName:@"Helvetica" size:15];

        if (indexPath.row < 4) {
            UIImageView *disclosureArrow = [[UIImageView alloc] initWithFrame:CGRectMake(280, 15, 10, 14)];
            disclosureArrow.image = [UIImage imageNamed:@"tableRowAccessoryArrow"];
            [cell.contentView addSubview:disclosureArrow];
        }
    } else {
        if ((indexPath.section == 0) && (indexPath.row == 4)) {
            for (UIView *v in [cell.contentView subviews]) {
                [v removeFromSuperview];
            }
        }
    }

    switch (indexPath.row) {
        case 0:
            cell.textLabel.text = [NSString stringWithFormat:@"%@", self.startTime];
            cell.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"eventDetailRowTop"]];
            cell.imageView.image = [UIImage imageNamed:@"clockIcon"];
            break;
        case 1:
            cell.textLabel.text = @"Location";
            cell.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"eventDetailRowMiddle"]];
            cell.selectedBackgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"eventDetailRowMiddleSelected"]];
            cell.imageView.image = [UIImage imageNamed:@"mapIcon"];
            break;
        case 2:
            cell.textLabel.text = [NSString stringWithFormat:@"%u attendees", [self.attendees count]];
            cell.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"eventDetailRowMiddle"]];
            cell.selectedBackgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"eventDetailRowMiddleSelected"]];
            cell.imageView.image = [UIImage imageNamed:@"attendeesIcon"];
            break;
        case 3:
            cell.textLabel.text = [NSString stringWithFormat:@"%u fomos", [self.fomos count]];
            cell.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"eventDetailRowBottom"]];
            cell.selectedBackgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"eventDetailRowMiddleSelected"]];
            cell.imageView.image = [UIImage imageNamed:@"fomoIcon"];
            break;
        case 4:
        {
            cell.selectionStyle = UITableViewCellSelectionStyleNone;

            UIImage *clockIcon = [UIImage imageNamed:@"clockIcon"];
            UIImageView *iconSlot = [[UIImageView alloc] initWithFrame:CGRectMake(3, 18, 18, 18)];
            iconSlot.image = clockIcon;
            [cell.contentView addSubview:iconSlot];

            NSString *currentTime = @"Happening Now";
            UILabel *currentTimeLabel = [[UILabel alloc] initWithFrame:CGRectMake(25, 8, 150, 36)];
            currentTimeLabel.backgroundColor = [UIColor clearColor];
            currentTimeLabel.textColor = [UIColor whiteColor];
            currentTimeLabel.font = [UIFont fontWithName:@"Helvetica" size:14];
            currentTimeLabel.text = currentTime;
            [cell.contentView addSubview:currentTimeLabel];

            UIImage *listView = [UIImage imageNamed:@"listViewSelected"];
            self.listViewButton = [UIButton buttonWithType:UIButtonTypeCustom];
            self.listViewButton.frame = CGRectMake(180, 8, 36, 36);
            self.listViewButton.tag = 1;
            [self.listViewButton addTarget:self action:@selector(togglePhotosView:) forControlEvents:UIControlEventTouchUpInside];
            [self.listViewButton setBackgroundImage:listView forState:UIControlStateNormal];
            [cell.contentView addSubview:self.listViewButton];

            UIImage *gridView = [UIImage imageNamed:@"gridViewIcon"];
            self.gridViewButton = [UIButton buttonWithType:UIButtonTypeCustom];
            self.gridViewButton.frame = CGRectMake(240, 7.2f, 36, 36);
            self.gridViewButton.tag = 2;
            [self.gridViewButton addTarget:self action:@selector(togglePhotosView:) forControlEvents:UIControlEventTouchUpInside];
            [self.gridViewButton setBackgroundImage:gridView forState:UIControlStateNormal];
            [cell.contentView addSubview:self.gridViewButton];
            break;
        }
        default:
            break;
    }
    return cell;
} else {
    if ([self.listViewObjects count] == 0) {
        // Do something when there are no pictures or stories to show
        static NSString *CellIdentifier = @"NoPhotosYetCell";

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if (cell == nil)
        {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
            cell.textLabel.textColor = [UIColor colorWithRed:0.150 green:0.143 blue:0.135 alpha:1.0];
            cell.textLabel.highlightedTextColor = [UIColor whiteColor];
            cell.selectionStyle = UITableViewCellSelectionStyleNone;
            cell.textLabel.text = @"No photos have been added yet.";
        }
        return cell;
    }
    else {
        if (self.isGridView == YES) {
            static NSString *CellIdentifier = @"EventContentGridViewCell";

            EventDetailGridRow *cell = (EventDetailGridRow *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

            if (cell == nil)
            {
                cell = [[EventDetailGridRow alloc] initWithFrame:CGRectMake(0, 0, 306, 102)];
                cell.backgroundColor = [UIColor redColor];
            }

            NSMutableArray *mutablePhotos = [NSMutableArray arrayWithArray:self.photos];

            int offset = (indexPath.row * 3);
            int maxRange = 3;

            if (([mutablePhotos count] < (offset + maxRange)))
            {
                maxRange = ([mutablePhotos count] - offset);
            }
            NSArray *firstThree = [mutablePhotos subarrayWithRange:NSMakeRange(offset, maxRange)];

            cell.photos = firstThree;

            return cell;

        } else {
            static NSString *CellIdentifier = @"EventContentListViewCell";

            EventDetailListRowCell *cell = (EventDetailListRowCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

            if (cell == nil)
            {
                cell = [[EventDetailListRowCell alloc] initWithFrame:CGRectMake(0, 0, 306, 400)];
            }

            NSString *authorName;
            NSString *authorUID;
            BOOL isPhoto = YES;

            if ([[self.listViewObjects objectAtIndex:indexPath.row] valueForKey:@"caption"] != nil)
            {
                // It's a photo object
                NSDictionary *photo = [self.listViewObjects objectAtIndex:indexPath.row];
                NSString *photoID = [photo valueForKey:@"id"];
                NSString *photoName = [photo valueForKey:@"image_file_name"];
                NSURL *photoURL = [NSURL URLWithString:[NSString stringWithFormat:@"http://s3.amazonaws.com/motlee-development-photos/images/%@/compressed/%@", photoID, photoName]];
                authorName = [photo valueForKeyPath:@"owner.name"][0];
                authorUID = [photo valueForKeyPath:@"owner.uid"][0];

                UIImageView *imageContainer = [[UIImageView alloc] initWithFrame:CGRectMake(0, 20, 300, 300)];
                [imageContainer setImageWithURL:photoURL];
                [cell.contentView addSubview:imageContainer];
            }
            else if ([[self.listViewObjects objectAtIndex:indexPath.row] valueForKey:@"body"] != nil)
            {
                isPhoto = NO;
                NSDictionary *story = [self.listViewObjects objectAtIndex:indexPath.row];
                authorName = [story valueForKeyPath:@"owner.name"][0];
                authorUID = [story valueForKeyPath:@"owner.uid"][0];

                UIImageView *imageContainer = [[UIImageView alloc] initWithFrame:CGRectMake(0, 20, cell.frame.size.width, 148)];
                imageContainer.image = [UIImage imageNamed:@"storyContainer"];
                [cell.contentView addSubview:imageContainer];

                UILabel *storyBody = [[UILabel alloc] initWithFrame:CGRectMake(30, 20, (306 - 60), 148)];
                storyBody.numberOfLines = 3;
                storyBody.backgroundColor = [UIColor clearColor];
                storyBody.textAlignment = NSTextAlignmentCenter;
                storyBody.font = [UIFont fontWithName:@"Helvetica" size:17];
                storyBody.textColor = [UIColor whiteColor];
                storyBody.text = [NSString stringWithFormat:@"\"%@\"", [story valueForKey:@"body"]];
                [cell.contentView addSubview:storyBody];

            }
            else {
                // Something screwy going on here, should have been one of the above objects
            }

            NSURL *profilePicURL = [NSURL URLWithString:[NSString stringWithFormat:@"http://graph.facebook.com/%@/picture", authorUID]];
            UIImageView *profilePic;
            if (isPhoto) profilePic = [[UIImageView alloc] initWithFrame:CGRectMake(20, 347, 40, 40)];
            else profilePic = [[UIImageView alloc] initWithFrame:CGRectMake(20, 179, 40, 40)];
            [profilePic setImageWithURL:profilePicURL placeholderImage:[UIImage imageNamed:@"placeholder"]];
            [cell.contentView addSubview:profilePic];

            UILabel *takenByLabel;
            if (isPhoto) {
                takenByLabel = [[UILabel alloc] initWithFrame:CGRectMake(70, 342, 170, 30)];
            }
            else {
                takenByLabel = [[UILabel alloc] initWithFrame:CGRectMake(70, 174, 170, 30)];
            }

            takenByLabel.textColor = [UIColor lightGrayColor];
            takenByLabel.font = [UIFont fontWithName:@"Helvetica" size:12];
            takenByLabel.backgroundColor = [UIColor clearColor];
            if (isPhoto) takenByLabel.text = @"taken by";
            else takenByLabel.text = @"written by";
            [cell.contentView addSubview:takenByLabel];

            UILabel *photoTakerLabel;
            if (isPhoto) {
                photoTakerLabel = [[UILabel alloc] initWithFrame:CGRectMake(70, 360, 170, 30)];
            }
            else {
                photoTakerLabel = [[UILabel alloc] initWithFrame:CGRectMake(70, 192, 170, 30)];
            }
            photoTakerLabel.textColor = [UIColor whiteColor];
            photoTakerLabel.font = [UIFont fontWithName:@"Helvetica" size:14];
            photoTakerLabel.backgroundColor = [UIColor clearColor];
            photoTakerLabel.text = authorName;
            [cell.contentView addSubview:photoTakerLabel];
            return cell;
        }
    }
}
} 
```

日志输出：

```
libobjc.A.dylib`objc_msgSend:
0x1f5908c:  movl   8(%esp), %ecx
0x1f59090:  movl   4(%esp), %eax
0x1f59094:  testl  %eax, %eax
0x1f59096:  je     0x1f590e8                 ; objc_msgSend + 92
0x1f59098:  movl   (%eax), %edx
0x1f5909a:  pushl  %edi
0x1f5909b:  movl   8(%edx), %edi   <-- EXC_BAD_ACCESS (code=2, address=0xb0000008) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T23:21:24.083

看起来您在某些地方初始化时缺少 cellIdentifier。

```
static NSString *CellIdentifier = @"EventContentGridViewCell";

EventDetailGridRow *cell = (EventDetailGridRow *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil)
{
   cell = [[EventDetailGridRow alloc] initWithFrame:CGRectMake(0, 0, 306, 102)];//where is CellIdentifier?? 
```

它应该是这样的，

```
cell = [[EventDetailGridRow alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
cell.frame = CGRectMake(0, 0, 306, 102); 
```

在`"EventContentGridViewCell"`为`EventDetailGridRow`. 同样的事情适用于上述代码中的所有其他自定义单元格类。但是我不确定这是否是上述代码中的问题。

如果上述更改不能解决您的问题，请查看[如何向 objc_exception_throw 添加断点？](https://stackoverflow.com/questions/1163981/how-to-add-a-breakpoint-to-objc-exception-throw)和[堆栈跟踪或有关 Xcode/iPhone 中未处理异常的更多信息](https://stackoverflow.com/questions/1093999/stack-trace-or-more-info-on-unhandled-exception-in-xcode-iphone)。应该可以帮助您找出问题所在。

# iphone - 将多个 xib 链接到一个控制器

> ID：13298246
> 
> 赞同：1
> 
> 时间：2012-11-08T21:36:55.957
> 
> 标签：iphone, ios, xcode

我一直在寻找这个问题的答案，但还没有。

如果我有一个自动调整大小的视图，我正在尝试解决一个问题。如果是 3GS 等...它使用图片.png，如果 iphone 4 和 5 它使用图片@2x.png。

但是，当调整大小时，iphone 4 上的背景会延伸到底部边框下方，因此部分背景会被覆盖。

在 iphone 5 上它非常适合，但按钮无法调整，它们保持在原位，就像屏幕来自 3G 一样（如果 iphone 4 是模拟器，也是一样）。

如果您对上述问题有解决方案，我全神贯注，我对 xcode 很陌生，我只是在努力学习。

作为一种解决方法，我正在考虑检查屏幕大小，然后加载为该屏幕构建的 xib，但是我的应用程序因以下代码而崩溃：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil;

CGRect screenBound = [[UIScreen mainScreen] bounds];
CGSize screenSize = screenBound.size;
CGFloat screenHeight = screenSize.height;

if (screenHeight == 568){
    nibNameOrNil = (NSString*)@"main5";
     self = [self initWithNibName:nibNameOrNil bundle:nil];
    if (self) {
        // Custom initialization
    }

}else{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
}

}
return self; 
```

谢谢先进

调试

self Mainscreencantroller * 0x00000000 nibNameOrNil NSString * 0x02a01196 NSObject NSObject
isa 类 0x656a626f [0] 类
nibBundleOrNil __NSArrayM * 0x0a55d3e0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:35:38.803

好吧，在摆弄了一会儿之后，我决定通过控制 Grect 边界来接近。

下面是代码，

但是我仍然有兴趣知道您是否可以将多个 xib 加载到控制器中

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil 
```

{

```
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {

    CGRect screenBound = [[UIScreen mainScreen] bounds];
    CGSize screenSize = screenBound.size;
    CGFloat screenWidth = screenSize.width;
    CGFloat screenHeight = screenSize.height;
    NSLog(@"screenheight =%f", screenHeight);
    if(screenHeight == 568){

        screenBound.origin.y = -44;
        self.view.bounds = screenBound;

    }else if (screenHeight ==480){
        self.view.bounds = screenBound;
    }
        // Custom initialization
} 
```

回归自我；

# ruby-on-rails - Ruby on Rails where 语句

> ID：13298251
> 
> 赞同：0
> 
> 时间：2012-11-08T21:37:10.827
> 
> 标签：ruby-on-rails

我有一个属于**联系表的****wearquest**表。**联系人**表属于**用户**表。

 ******我列出了 wearquest 记录，但想将其限制为当前用户的记录。

这不起作用：

```
<% Worequest.where(:contact_id.contact.user_id => current_user.id).each do |worequest| %> 
```

什么会？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:49:48.143

我建议通过关联使用，例如：

```
class Contact < ActiveRecord::Base
  has_many :worequests
end

class User < ActiveRecord::Base
  has_many :contacts
  has_many :worequests, :through => :contacts
end 
```

然后使用以下内容：

```
current_user.worequests 
```******

# bash - 如何使用 bash 脚本和 for 循环回显文件行

> ID：13298255
> 
> 赞同：13
> 
> 时间：2012-11-08T21:37:37.877
> 
> 标签：bash

我有一个名为 dbs.txt 的简单文件，我想使用 bash 中的 for 循环将该文件的行回显到屏幕上。

该文件如下所示：

```
db1
db2
db3
db4 
```

bash 文件名为 test.sh 它看起来像这样

```
for i in 'cat dbs.txt'; do
echo $i
done
wait 
```

当我通过键入以下内容运行文件时：

```
bash test.sh 
```

我得到终端输出：

```
cat dbs.txt 
```

而不是希望的

```
db1
db2
db3
db4 
```

以下 bash 文件效果很好：

```
cat dbs.txt | while read line
do
echo "$line"
done 
```

为什么第一个脚本不起作用？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-09T13:18:32.410

您可以使用内置的 shell`read`代替`cat`. 如果您只处理一个文件并且它不是很大，那么以下解决方案可能比大多数解决方案更容易且更便携：

```
#!/bin/sh

while read line
do
    printf "%s\n" "$line"
done < "$1" 
```

我记得在某个地方读过`printf`比接受的选项可能因平台而异`echo`的意义上更安全的地方。`echo`因此，养成使用习惯`printf`可能是值得的。

有关`read`内置的​​描述，请查看 shell 的手册页。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-08T21:40:02.963

您需要执行一个子 shell 并捕获输出，如下所示：

```
for i in `cat dbs.txt`; do
echo $i
done
wait 
```

注意反引号 ` 而不是单引号。

在 bash 中，您还可以使用`$(command)`：

```
for i in $(cat dbs.txt); do
echo $i
done
wait 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-08T23:42:29.910

您需要*命令替换*shell 功能。这需要[POSIX](http://en.wikipedia.org/wiki/POSIX)表达式`$()`。

请**不要像其他人所说的那样使用反引号**。

反引号 ( **`** ) 用于旧式命令替换，例如

```
foo=`command` 
```

这

```
foo=$(command) 
```

建议使用语法。$() 内的反斜杠处理不那么令人惊讶，并且 $() 更容易嵌套。看

*   [http://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html](http://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html) -> 2.6.3 命令替换
*   [http://mywiki.wooledge.org/BashFAQ/082](http://mywiki.wooledge.org/BashFAQ/082)

尽管 Linus G Thiel 说了什么，但`$()`工作在`sh`, `ash`, `zsh`, `dash`, `bash`...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T21:40:40.543

你需要反引号而不是单引号

`与'

# ruby-on-rails - 如何将字段从一个模型插入到另一个模型

> ID：13298256
> 
> 赞同：0
> 
> 时间：2012-11-08T21:37:48.313
> 
> 标签：ruby-on-rails, ruby

我有一个具有多个关联的模型：

```
has_many labouritems
has_many materialitems 
```

我有另一个与报价相关的关联，称为发票；如何将`labouritems`材料记录插入发票但创建它们的新实例但保留价值？目的是保留某个时间点的值的历史记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T02:03:52.743

您可以使用创建模型实例的副本`dup`

```
duplicate = labouritems.dup
duplicate.save 
```

# jquery - 滚动动画进度条

> ID：13298260
> 
> 赞同：4
> 
> 时间：2012-11-08T21:38:13.563
> 
> 标签：jquery, css, scroll

我有一个在页面加载时动画的进度条，但我希望它在用户向下滚动到它时动画，因为它将位于页面的中间。现在如果页面加载，用户看不到动画。

所以本质上，动画应该暂停，直到用户向下滚动到某个点，一旦看到栏，动画就会开始。

这是我到目前为止的Javascript：

```
$(function() {
$(".meter > span").each(function() {
    $(this)
        .data("origWidth", $(this).width())
        .width(0)
        .animate({
             width: $(this).data("origWidth")
             }, 1200);
    });
});​ 
```

这是一个更详细的 jsfiddle：http: [//jsfiddle.net/YAZJb/](http://jsfiddle.net/YAZJb/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:42:55.453

这个怎么样？

我更新了你的[jsFiddle http://jsfiddle.net/YAZJb/1/](http://jsfiddle.net/YAZJb/1/)

基本上我所做的只是在类中添加一个`width:100%;`and`position:fixed;`到你的 div`meter`

那当然是，如果我正确理解了您的问题？即使用户滚动，您希望进度条保持在视图中？

**更新：**

你可以使用像 inview 插件这样的东西。这是[下载](https://github.com/protonet/jquery.inview)，[演示在这里](http://tifftiff.de/jquery.inview/example/live_event.html)。将它包裹在您自己的进度条脚本中，直到在视图中它才会开始动画。

# android - Android：如何使用选择器作为 TextView 的背景？

> ID：13298263
> 
> 赞同：9
> 
> 时间：2012-11-08T21:38:16.443
> 
> 标签：android

我希望我的 TextView 在按下时使用不同的颜色背景进行绘制。下面的 xml 包含一个 Button 和 TextView，它们都指定一个 Selector 作为它们的背景。Button 按预期工作，但 TextView 在按下时不会改变颜色。有没有办法让 TextView 工作？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <TextView 
        android:text="temporary text view"
        android:layout_width="wrap_content"
        android:layout_height="100dip"
        android:background="@drawable/blackselector"
        />    
    <Button
        android:text="temporary button"
        android:layout_width="wrap_content"
        android:layout_height="100dip"
        android:background="@drawable/blackselector"
        />   
</LinearLayout> 
```

选择器.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true">
        <color android:color="#FF0000" />
    </item>
    <item>
        <color android:color="#00FF00" />
    </item>
</selector> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-08T22:04:44.670

将此设置为您的 TextView：

```
android:clickable="true" 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-08T22:01:43.453

添加

```
android:clickable="true"
android:focusable="true"
android:focusableInTouchMode="true" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-08T22:08:07.957

上面关于将 clickable 设置为 true 是正确的。此外，如果您添加一个 onClickListener，Android 会自动为您设置 clickable 为 true。

```
// From the View class.
public void setOnClickListener(OnClickListener l) {
    if (!isClickable()) {
        setClickable(true);
    }
    getListenerInfo().mOnClickListener = l;
} 
```

# google-app-engine - 如何通过代理本地测试gae golang urlfetch？

> ID：13298264
> 
> 赞同：6
> 
> 时间：2012-11-08T21:38:24.660
> 
> 标签：google-app-engine, proxy, localhost, go, urlfetch

我的 urlfetch 客户端在部署到 apppot 时工作正常。但是通过代理进行本地测试（dev_appserver.py）有问题。我找不到为 urlfetch.Transport 设置代理的任何方法。

你如何在本地测试代理后面的 urlfetch？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-28T19:30:28.227

> http.DefaultTransport 和 http.DefaultClient 在 App Engine 中不可用。请参阅[https://developers.google.com/appengine/docs/go/urlfetch/overview](https://developers.google.com/appengine/docs/go/urlfetch/overview)

在 GAE dev_appserver.py 上测试 PayPal OAuth 时收到此错误消息（编译时在生产中工作）

```
const url string = "https://api.sandbox.paypal.com/v1/oauth2/token"
const username string = "EOJ2S-Z6OoN_le_KS1d75wsZ6y0SFdVsY9183IvxFyZp"
const password string = "EClusMEUk8e9ihI7ZdVLF5cZ6y0SFdVsY9183IvxFyZp"

client := &http.Client{}        

req, _ := http.NewRequest("POST", url, strings.NewReader("grant_type=client_credentials"))
req.SetBasicAuth(username, password)
req.Header.Set("Accept", "application/json")
req.Header.Set("Accept-Language", "en_US")
req.Header.Set("Content-Type", "application/x-www-form-urlencoded")

resp, err := client.Do(req) 
```

如您所见，Go App Engine 破坏了 http.DefaultTransport（GAE_SDK/goroot/src/pkg/appengine_internal/internal.go，第 142 行，GAE 1.7.5）

```
type failingTransport struct{}
func (failingTransport) RoundTrip(*http.Request) (*http.Response, error) {
    return nil, errors.New("http.DefaultTransport and http.DefaultClient are not available in App Engine. " +
        "See https://developers.google.com/appengine/docs/go/urlfetch/overview")
}

func init() {
    // http.DefaultTransport doesn't work in production so break it
    // explicitly so it fails the same way in both dev and prod
    // (and with a useful error message)
    http.DefaultTransport = failingTransport{}
} 
```

这用 Go App Engine 1.7.5 解决了我的问题

```
 transport := http.Transport{}

    client := &http.Client{
        Transport: &transport,
    }       

    req, _ := http.NewRequest("POST", url, strings.NewReader("grant_type=client_credentials"))
    req.SetBasicAuth(username, password)
    req.Header.Set("Accept", "application/json")
    req.Header.Set("Accept-Language", "en_US")
    req.Header.Set("Content-Type", "application/x-www-form-urlencoded") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T07:25:02.453

urlfetch包本身不支持代理设置，即使在开发中也是如此，因为它实际上并没有自己进行 URL 获取：它向（可能是开发的）应用程序服务器发送请求并要求它进行获取[。](https://developers.google.com/appengine/docs/go/urlfetch/reference)我没有`dev_appserver.py`方便的来源，但它应该尊重标准代理变量：

```
export http_proxy='http://user:pass@1.2.3.4:3210/' 
```

如果你在开始之前这样做`dev_appserver.py`，它可能会起作用。

如果上述方法不起作用，您应该[提出问题](https://code.google.com/p/googleappengine/issues/entry?template=Go%20defect)，然后使用以下解决方法：

```
func client(ctx *appengine.Context) *http.Client {
    if appengine.IsDevAppServer() {
        return http.DefaultClient
    }
    return urlfetch.Client(ctx)
} 
```

这将在生产应用服务器上使用 urlfetch API，但在`net/http`其他情况下使用标准客户端，这[确实尊重](http://golang.org/pkg/net/http/#RoundTripper)http_proxy 环境变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T18:58:42.983

如果您使用的是默认代理，则传输实现为

```
var DefaultTransport RoundTripper = &Transport{Proxy: ProxyFromEnvironment} 
```

启动 go 时设置环境变量应该可以解决问题。

另请参阅另一个问题： [如何配置 Go 以使用代理？](https://stackoverflow.com/questions/10383299/how-do-i-configure-go-to-use-a-proxy)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T09:09:52.630

这只是一个猜测，但您是否尝试[设置代理变量](http://docs.python.org/2/library/urllib.html#high-level-interface)

> 在 Unix 或 Windows 环境中，在启动 Python 解释器之前，将 http_proxy 或 ftp_proxy 环境变量设置为标识代理服务器的 URL。例如（'%' 是命令提示符）：
> 
> % http_proxy="http://www.someproxy.com:3128"
> 
> % 导出 http_proxy

# c - c语言中的Linux系统调用write()不起作用？

> ID：13298271
> 
> 赞同：-4
> 
> 时间：2012-11-08T21:39:03.670
> 
> 标签：c, linux, file, system-calls

我写了以下代码：

它应该接受一个文件名并创建它并写入它。没发生什么事。我不明白为什么。我尝试搜索并看到类似的示例应该可以正常工作。如果这很重要，我正在将 VirtualBox 与 Xubuntu 一起使用。

```
#include <stdio.h>
#include <stdlib.h>
#include <dirent.h>
#include <sys/stat.h>
#include <sys/types.h>
#include <fcntl.h>
#include <time.h>
#include <assert.h>
#include <errno.h> 
#include <string.h>

#define SIZE_4KB        4096
#define FILE_SIZE       16777216

/*Generate a random string*/
char* randomStr(int length)
{
        int i = -1;
        char *result;
        result = (char *)malloc(length);
        while(i++ < length)
        {
                *(result+i) = (random() % 23) + 67;
                if(i%SIZE_4KB)
                        *(result+i) = '\0';
        }
        return result;
}

void writeFile(int fd, char* data, int len, int rate)
{
        int i = 0;
        len--;
        printf("Writing...\n");
        printf("to file %d :", fd);
        while(i < len)
        {
                write(fd, data, rate);
                i += rate;
        }
}

int main(int argc, char** argv)
{
        int i = -1, fd;
        char *rndStr;
        char *filePath;      
        assert (argc == 2);
        filePath = argv[1];
        rndStr = randomStr(FILE_SIZE);
        printf("The file %s was not found\n", filePath);
        fd = open(filePath, O_CREAT, O_WRONLY);
        writeFile(fd, rndStr, FILE_SIZE, SIZE_4KB);
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T21:53:11.120

`open`调用是错误的。通过将参数与 OR 组合来指定多个标志。而且，当您创建文件时，第三个参数应该是您希望文件拥有的权限。所以你的`open`电话应该是这样的：

```
fd = open(filePath, O_CREAT | O_WRONLY, 0666);
if (fd < 0)
    Handle error… 
```

您应该始终测试来自系统调用和库函数的返回值，以查看是否发生错误。

# c# - TreeView.HideSelection = false - WPF 中的等效项

> ID：13298273
> 
> 赞同：2
> 
> 时间：2012-11-08T21:39:08.120
> 
> 标签：c#, wpf, treeviewitem

我正在寻找相当于`TreeView.HideSelection = false`. 有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T00:22:39.390

如果我的理解`TreeView.HideSelection`是正确的，请将以下内容放入您的资源中：

```
<ControlTemplate x:Key="StaysHighlightedTreeViewItemTemplate" TargetType="{x:Type TreeViewItem}">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition MinWidth="19" Width="Auto"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <ToggleButton x:Name="Expander" ClickMode="Press" IsChecked="{Binding IsExpanded, RelativeSource={RelativeSource TemplatedParent}}">
            <ToggleButton.Style>
                <Style TargetType="{x:Type ToggleButton}">
                    <Setter Property="Focusable" Value="False"/>
                    <Setter Property="Width" Value="16"/>
                    <Setter Property="Height" Value="16"/>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type ToggleButton}">
                                <Border Background="Transparent" Height="16" Padding="5" Width="16">
                                    <Path x:Name="ExpandPath" Data="M0,0 L0,6 L6,0 z" Fill="Transparent" Stroke="#FF989898">
                                        <Path.RenderTransform>
                                            <RotateTransform Angle="135" CenterY="3" CenterX="3"/>
                                        </Path.RenderTransform>
                                    </Path>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Stroke" TargetName="ExpandPath" Value="#FF1BBBFA"/>
                                        <Setter Property="Fill" TargetName="ExpandPath" Value="Transparent"/>
                                    </Trigger>
                                    <Trigger Property="IsChecked" Value="True">
                                        <Setter Property="RenderTransform" TargetName="ExpandPath">
                                            <Setter.Value>
                                                <RotateTransform Angle="180" CenterY="3" CenterX="3"/>
                                            </Setter.Value>
                                        </Setter>
                                        <Setter Property="Fill" TargetName="ExpandPath" Value="#FF595959"/>
                                        <Setter Property="Stroke" TargetName="ExpandPath" Value="#FF262626"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </ToggleButton.Style>
        </ToggleButton>
        <Border x:Name="Bd" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Grid.Column="1" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="True">
            <ContentPresenter x:Name="PART_Header" ContentTemplate="{TemplateBinding HeaderTemplate}" Content="{TemplateBinding Header}" ContentStringFormat="{TemplateBinding HeaderStringFormat}" ContentSource="Header" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
        </Border>
        <ItemsPresenter x:Name="ItemsHost" Grid.ColumnSpan="2" Grid.Column="1" Grid.Row="1"/>
    </Grid>
    <ControlTemplate.Triggers>
        <Trigger Property="IsExpanded" Value="False">
            <Setter Property="Visibility" TargetName="ItemsHost" Value="Collapsed"/>
        </Trigger>
        <Trigger Property="HasItems" Value="False">
            <Setter Property="Visibility" TargetName="Expander" Value="Hidden"/>
        </Trigger>
        <Trigger Property="IsSelected" Value="True">
            <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"/>
        </Trigger>
        <Trigger Property="IsEnabled" Value="False">
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
        </Trigger>
    </ControlTemplate.Triggers>
</ControlTemplate>

<Style x:Key="StaysHighlightedTreeViewItem" TargetType="{x:Type TreeViewItem}">
    <Setter Property="Template" Value="{StaticResource StaysHighlightedTreeViewItemTemplate}"/>
</Style> 
```

然后像这样使用样式：

```
<TreeView ItemContainerStyle="{StaticResource StaysHighlightedTreeViewItem}" /> 
```

默认控件模板具有以下触发器：

```
<MultiTrigger>
    <MultiTrigger.Conditions>
        <Condition Property="IsSelected" Value="True"/>
        <Condition Property="IsSelectionActive" Value="False"/>
    </MultiTrigger.Conditions>
    <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
    <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
</MultiTrigger> 
```

This changed the highlighting of the selected item when the selection was not active (ie did not have keyboard focus), by removing this trigger the standard highlighting is used even when it does not have focus.

# actionscript-3 - 在 AS3 和加速度计中更改背景

> ID：13298279
> 
> 赞同：1
> 
> 时间：2012-11-08T21:39:39.993
> 
> 标签：actionscript-3, flash-cs5, accelerometer

我正在制作一个移动应用程序它的主要功能包括一个数字计时器时钟，一旦我的加速度计达到某个点就会启动

我的代码如下：

```
``var varAccelerometer:Accelerometer;
varAccelerometer = new Accelerometer();

//Accelerometer Eventlistener Listens for data from the Accelerometer
varAccelerometer.addEventListener(AccelerometerEvent.UPDATE, funMoveObject);
//Data from the accelerometer is passed to the Parameter eventData
function funMoveObject(eventData:AccelerometerEvent):void

{
////////////////Start Timer Controls///////////////////
trace(eventData.accelerationY);
if (eventData.accelerationY < -0.15){
trace("starting");
myTimer.start();        
}` 
```

这是我的加速度计数据，一旦达到 -0.15，我的数字计时器就会启动。一旦加速度计达到-0.15，我需要我的背景图像更改为另一个背景图像你能告诉我我需要将我的第二张图像放在我的时间轴上的什么位置以及我需要什么 AS3 代码吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T21:11:59.117

老实说，这是一个相对简单的事情，但是，它在很大程度上取决于您的时间线的结构。制定时间表有数百种可能的方法，因此很难给出一个相当可靠的答案。

也就是说，我最推荐的方法是在项目的库中创建一个名为“backgroundImage”的 MovieClip 对象。把它放在你的时间线上，在一个新的图层上。该图层应放置在时间轴上所有其他图层的下方，以确保 backgroundImage 对象位于屏幕上其他所有图层的后面。（注意：请务必在屏幕上为该对象指定实例名称！单击舞台上的对象，然后单击“属性”，然后在实例名称中键入“backgroundImage”。）

在该 MovieClip 中，您将创建两个帧 - 一个具有您的默认背景图像，另一个具有您想要的第二个背景图像。在每个帧的 Actions 选项卡上，输入代码：

```
stop(); 
```

这样可以确保时间线不会“播放”，而是保留在您设置的任何帧上。

现在，您可以使用这行代码更改为新背景：

```
backgroundImage.gotoAndStop(2); 
```

并将这行代码更改为原始背景：

```
backgroundImage.gotoAndStop(1); 
```

我刚才描述的所有内容都涉及基本的 Flash 技能。如果您在这些方面需要额外帮助，有数百个关于使用 Flash CS5 的优秀教程。我会去看那些，然后回到我的答案。

我希望这有帮助！

# html - 两个 div 上的重叠文本居中

> ID：13298287
> 
> 赞同：7
> 
> 时间：2012-11-08T21:40:03.173
> 
> 标签：html, css

我正在尝试修改代码以做一些不同的事情，但我无法让它工作。这是代码：

```
<div id="progress-bar" class="all-rounded">
<div id="progress-bar-percentage" class="all-rounded" style="width: 88%">88/100</div>
</div> 
```

这呈现：

![在此处输入图像描述](../Images/07367ddf9cb4608ee03586b2952d0d5c.png)

使用这个 CSS：

```
.all-rounded {
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
}

.spacer {
    display: block;
}

#progress-bar {
    width: 100px;
    background: #cccccc;
}

#progress-bar-percentage {
    background: #3063A5;
    padding: 5px 0px;
    color: #FFF;
    text-align: center;
} 
```

如您所见，文本*88/100*打印在内部 div 内，`progress-bar-precentage`因此相对于该 div 居中，问题是如果`progress-bar-precentage`宽度非常小，文本将不合适，我的想法是将其相对于外部 div`progress-bar`所以无论内部 div 是什么，它都会一直在适当的位置，但我不知道如何将文本放在顶部和中心，有什么想法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-08T21:50:58.500

试试这个 -[**演示**](http://jsfiddle.net/AxDh7/)

***HTML***

```
<div id="progress-bar" class="all-rounded">
    <div id="progress-bar-percentage" class="all-rounded" style="width: 68%"><span>68/100</span></div>
</div> 
```

***CSS***

```
#progress-bar {
    width: 100px;
    background: #cccccc;
    position: relative;
}

#progress-bar-percentage {
    background: #3063A5;
    padding: 5px 0px;
    color: #FFF;
    text-align: center;
    height: 20px;
}

#progress-bar-percentage span {
    display: inline-block;
    position: absolute;
    width: 100%;
    left: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:51:05.977

尝试这样的事情：

```
<div id="progress-bar" class="all-rounded">
<div id="progress-bar-percentage" class="all-rounded" style="width: 88%"></div>
<div id="progress-bar-text">88/100</div>
</div>

.all-rounded {
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
}

.spacer {
    display: block;
}

#progress-bar {
    width: 100px;
    background: #cccccc;
    position: relative;
}

#progress-bar-percentage {
    background: #3063A5;
    padding: 5px 0px;
    position: absolute;
    top: 0;
    left: 0;
}

#progress-bar-text {
    width: 100%;
    color: #FFF;
    text-align: center;
    position: absolute;
    top: 0;
    left: 0;
} 
```

# javascript - 如何在 javascript/jquery 中创建多维数组？

> ID：13298290
> 
> 赞同：1
> 
> 时间：2012-11-08T21:40:07.880
> 
> 标签：javascript, jquery, arrays, multidimensional-array, each

我有几个 li 的：

```
<ul>
    <li class="one">
        <input type="text" class="form_input" placeholder="Type something...">
    </li>
    <li class="two">
        <input type="text" class="form_input" placeholder="Type something else...">
    </li>
</ul> 
```

我正在尝试创建一个类似于：

```
[
    0[
        'placeholder' : 'Type something...'
    ]
    1[
        'placeholder' : 'Type something else...'
    ]
] 
```

我使用这样的方法

```
var lineText = function(elements) {
var myData = new Array();

elements.each(function(index, data) {
    var li = $(this);

    myData["placeholder"] = li.find('.form_input').attr("placeholder");

            console.log(data); returns the li objects
});

console.log(myData);
}; 
```

从这里我得到`[placeholder: "Type something..."]`，基本上我的数组中有一个项目，而不是 2

我不能这样使用`push`：

```
myData["placeholder"].push(li.find('.form_input').attr("placeholder")); //Cannot call method 'push' of undefined 
```

或向数组添加另一个维度

```
myData[index]["placeholder"] = li.find('.form_input').attr("placeholder"); //Cannot set property 'placeholder' of undefined 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T22:10:37.367

听起来您想要一个“关联数组”数组。在 JavaScript 而不是关联数组中，您可以使对象的行为方式相同。这意味着您的上述数组在文字语法中看起来像这样。

```
var a = [ { 'placeholder': 'Type something...' },
          { 'placeholder': 'Type something else...' } ]; 
```

哪里`a[ 0 ][ 'placeholder' ]`会返回字符串`'Type something...'`。由于这使用对象，因此无法推送属性，因为它们需要一些键。相反，您会编写类似`a.push( { 'placeholder': 'Type more stuff...' } )`.

如果您只打算在数组中添加占位符，则无需使用对象，只需像这样创建一个字符串数组。

```
var placeholders = [ 'Type something...', 'Type something else...' ]; 
```

但是当使用我的第一个解决方案时，你的功能会变成

```
var lineText = function(elements) {
    var myData = new Array();

    elements.each(function(index, data) {
        var li = $(this);
        var placeholderData = new Object();

        placeholderData["placeholder"] = li.find('.form_input').attr("placeholder");
        myData.push(placeholderData);
        console.log(data); returns the li objects
    });

    console.log(myData);
}; 
```

现场示例[http://jsfiddle.net/vU36T/6/](http://jsfiddle.net/vU36T/6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T22:09:40.167

这应该工作：

```
var placeholders = [];
$('ul > li > input').each( function(index, el){ placeholders.push(el.placeholder); } ); 
```

这将产生 ["Type something...", "Type something else..."]

您收到错误的原因是因为您试图使用对象语法访问数组。Javascript 数组只能有数字键......但是 javascript 中的所有内容都是一个对象，这就是为什么 myData['placeholders'] 显示为“未定义”而不是硬错误的原因。它所做的是检查数组原型链中的方法或属性“占位符”，而不是数组 myData 中的键“占位符”。

# jquery - jquery UI 选项卡充当链接而不是选项卡

> ID：13298292
> 
> 赞同：1
> 
> 时间：2012-11-08T21:40:14.017
> 
> 标签：jquery, jquery-ui, tabs, jquery-ui-tabs

我正在开发一个 Ruby on Rails 应用程序，我试图让页面的左侧基本上由两个选项卡控制。我希望每次单击它们时在两个选项卡之间交换内容……只是典型的选项卡行为。我正在使用 jQuery-ui-tabs。现在，我已经将它设置为两个选项卡都可单击并链接到一个 div，但是当我加载页面时，两个 div 最初呈现，彼此重叠，然后单击选项卡将我带到页面上的位置每个 div 开始而不是页面停留在同一个地方和内容切换。这似乎不应该那么难，但我已经花了很长时间感到非常沮丧，所以我希望/感谢任何帮助！

我编写了一个局部视图，其中包含选项卡和“链接”，并将它们定向到呈现不同视图的 div。

```
<div id="tabs">
    <a href="#first">
        <div class="tab">
            <div class="icon">
                <%= image_tag "buddies.png", :class => "icon img b" %>
            </div>
            first tab
         </div>
     </a>
     <a href="#second">
         <div class="tab">
             <div class="icon">
                 <%= image_tag "all.png", :class => "icon img" %>
             </div>
             second tab
         </div>
     </a>
     <div id="roll" class="contents">
      <%= render 'questions/list' %>
     </div>
     <div id="other" class="contents">
         <%= render 'answers/list' %>
     </div>
 </div> 
```

这是我的 JavaScript：

```
$(document).ready(function() {
  $("#tabs").tabs();
}); 
```

基本上按照jquery[网站](http://jqueryui.com/tabs/)

这是我所有 jquery js 链接的标题：

```
<%= javascript_include_tag "jquery-1.8.2.min.js" %>
<%= javascript_include_tag "jquery-ui-1.8.23.custom.min.js" %> 
```

编辑：想通了，没有正确加载 javascript jquery UI 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:16:05.163

为了创建呈现为选项卡的选项卡，您需要将每个选项卡添加为`<li>`项目，如下所示：

```
<ul>
  <li><a href="#first">Tab Title #1</a></li>
  <li><a href="#second">Tab Title #2</a></li>
</ul> 
```

现在您的选项卡将显示为选项卡！您需要在`<div id="tabs">`.

如前所述：查看有关选项卡的文档：http: [//jqueryui.com/tabs/](http://jqueryui.com/tabs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:56:17.540

在您的文档就绪功能中，它应该是：

```
$("#tabs").tabs(); 
```

请参阅 jQuery UI 文档：http: [//jqueryui.com/tabs/](http://jqueryui.com/tabs/)

# sql-server - 使用 Entity Framework 5 代码优先的视图

> ID：13298293
> 
> 赞同：2
> 
> 时间：2012-11-08T21:40:14.363
> 
> 标签：sql-server, entity-framework, ef-code-first

我创建了一个 SQL Server 视图，它在我的模型中的其他表/实体上执行一些相当复杂的逻辑，并公开一系列列。除了其中一列之外，所有列都是简单类型（bigints、nvarchars 等），但其中一列是我模型中的复杂实体。

我创建了一个映射到该视图的实体，如下所示：

```
public class NetworkSuppliersByClient : Entity, IKeyed<long>
{
    public long NetworkSuppliersByClientId { get; set; }

    public long NetworkId { get; set; }
    public String NetworkName { get; set; }
    public long OwningClientId { get; set; }
    public long ClientId { get; set; }
    public virtual Supplier Supplier { get; set; }
    public bool PublicEntry { get; set; }

    public long GetKey ()
    {
        return NetworkSuppliersByClientId;
    }
} 
```

如您所见，Supplier 条目映射到模型中的现有实体，它本身是具有其他包含实体（又名表）的复杂类型。

我遇到的问题是，当我尝试从视图中读取时，我收到错误“***实体类型 NetworkSuppliersByClient 不是当前上下文模型的一部分。*** ”。

但是，当我尝试将具有上下文的实体注册为 DbSet 时，我收到错误“***数据库中已经有一个名为 'NetworkSuppliersByClients' 的对象。*** ”因为它试图创建一个与现有视图同名的表.

有没有办法解决这个问题，例如禁止 EF 在启动时尝试创建表，或者有更好的方法从视图中读取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T16:07:17.133

对于其他感兴趣的人，我最终只是回避了这个问题。

我将实体 NetworkSuppliersByClient（如上所示）直接映射到来自视图响应的响应，但我放弃尝试将供应商实体作为嵌入式实体返回，而不是将其作为原始长返回。

```
public class NetworkSuppliersByClient : Entity, IKeyed<long>
{
    public long NetworkSuppliersByClientId { get; set; }

    public long NetworkId { get; set; }
    public String NetworkName { get; set; }
    public long OwningClientId { get; set; }
    public long ClientId { get; set; }
    public long SupplierId { get; set; }    <-- Long, rather than "Supplier"
    public bool PublicEntry { get; set; }

    public long GetKey ()
    {
        return NetworkSuppliersByClientId;
    }
} 
```

获得供应商 ID 列表后，我执行后续实体框架查询（使用 .Contains() 方法）以将所有供应商作为真正的 EF 实体返回。

关键是实体（在我上面的例子中是 NetworkSuppliersByClient）不应该作为 DbContext 子类中声明的 DbSet 成员存在，或者确实被现有 DbSet<> 中已经存在的任何实体引用。如果您强制执行此规则，那么 Entity Framework 将不会在启动时尝试创建表，并且它不应与已经存在的视图产生任何冲突。

# java - ObjectOutputStream writeObject() 方法返回空文件

> ID：13298297
> 
> 赞同：0
> 
> 时间：2012-11-08T21:40:23.877
> 
> 标签：java

我正在尝试实现一个保存功能，它将保存游戏的当前状态。这是我的代码：

```
public class MyGame extends javax.swing.JFrame implements Serializable {

     private void saveGame(java.awt.event.ActionEvent evt) {                                               

        JFileChooser fileChooser = new JFileChooser();
        int user_command = fileChooser.showSaveDialog(this);
        if (user_command == JFileChooser.APPROVE_OPTION) {
            try {
                File file = fileChooser.getSelectedFile();
                ObjectOutputStream outputStream = new ObjectOutputStream(new FileOutputStream(file));
                MyGame saveFile = this;

                outputStream.writeObject(saveFile);
                outputStream.close();

            } catch (FileNotFoundException e) {
            } catch (IOException e) {System.out.println("ioexception");}
        }

    } 
```

生成的保存文件为 0 字节。我尝试调试程序，它在 outputStream.writeObject(saveFile) 行上崩溃。我究竟做错了什么？

编辑：它报告 IOException

```
ioexception
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at javax.swing.plaf.synth.SynthLookAndFeel.paintRegion(SynthLookAndFeel.java:386)
    at javax.swing.plaf.synth.SynthLookAndFeel.update(SynthLookAndFeel.java:350)
    at javax.swing.plaf.synth.SynthRootPaneUI.update(SynthRootPaneUI.java:77)
    at javax.swing.JComponent.paintComponent(JComponent.java:752)
    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5128)
    at javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1479)
    at javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1410)
    at javax.swing.RepaintManager.paint(RepaintManager.java:1224)
    at javax.swing.JComponent.paint(JComponent.java:1015)
    at java.awt.GraphicsCallback$PaintCallback.run(GraphicsCallback.java:21)
    at sun.awt.SunGraphicsCallback.runOneComponent(SunGraphicsCallback.java:60)
    at sun.awt.SunGraphicsCallback.runComponents(SunGraphicsCallback.java:97)
    at java.awt.Container.paint(Container.java:1780)
    at java.awt.Window.paint(Window.java:3375)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:796)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:713)
    at javax.swing.RepaintManager.seqPaintDirtyRegions(RepaintManager.java:693)
    at javax.swing.SystemEventQueueUtilities$ComponentWorkRequest.run(SystemEventQueueUtilities.java:125)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:641)
    at java.awt.EventQueue.access$000(EventQueue.java:84)
    at java.awt.EventQueue$1.run(EventQueue.java:602)
    at java.awt.EventQueue$1.run(EventQueue.java:600)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:611)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at javax.swing.plaf.synth.SynthLookAndFeel.paintRegion(SynthLookAndFeel.java:386)
    at javax.swing.plaf.synth.SynthLookAndFeel.update(SynthLookAndFeel.java:350)
    at javax.swing.plaf.synth.SynthPanelUI.update(SynthPanelUI.java:94)
    at javax.swing.JComponent.paintComponent(JComponent.java:752)
    at javax.swing.JComponent.paint(JComponent.java:1029)
    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5124)
    at javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1479)
    at javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1410)
    at javax.swing.RepaintManager.paint(RepaintManager.java:1224)
    at javax.swing.JComponent._paintImmediately(JComponent.java:5072)
    at javax.swing.JComponent.paintImmediately(JComponent.java:4882)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:785)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:713)
    at javax.swing.RepaintManager.seqPaintDirtyRegions(RepaintManager.java:693)
    at javax.swing.SystemEventQueueUtilities$ComponentWorkRequest.run(SystemEventQueueUtilities.java:125)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:641)
    at java.awt.EventQueue.access$000(EventQueue.java:84)
    at java.awt.EventQueue$1.run(EventQueue.java:602)
    at java.awt.EventQueue$1.run(EventQueue.java:600)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:611)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at javax.swing.plaf.synth.SynthLookAndFeel.paintRegion(SynthLookAndFeel.java:386)
    at javax.swing.plaf.synth.SynthLookAndFeel.update(SynthLookAndFeel.java:350)
    at javax.swing.plaf.synth.SynthPanelUI.update(SynthPanelUI.java:94)
    at javax.swing.JComponent.paintComponent(JComponent.java:752)
    at javax.swing.JComponent.paint(JComponent.java:1029)
    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5124)
    at javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1479)
    at javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1410)
    at javax.swing.RepaintManager.paint(RepaintManager.java:1224)
    at javax.swing.JComponent._paintImmediately(JComponent.java:5072)
    at javax.swing.JComponent.paintImmediately(JComponent.java:4882)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:785)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:713)
    at javax.swing.RepaintManager.seqPaintDirtyRegions(RepaintManager.java:693)
    at javax.swing.SystemEventQueueUtilities$ComponentWorkRequest.run(SystemEventQueueUtilities.java:125)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:641)
    at java.awt.EventQueue.access$000(EventQueue.java:84)
    at java.awt.EventQueue$1.run(EventQueue.java:602)
    at java.awt.EventQueue$1.run(EventQueue.java:600)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:611)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at javax.swing.plaf.synth.SynthLookAndFeel.paintRegion(SynthLookAndFeel.java:386)
    at javax.swing.plaf.synth.SynthLookAndFeel.update(SynthLookAndFeel.java:350)
    at javax.swing.plaf.synth.SynthPanelUI.update(SynthPanelUI.java:94)
    at javax.swing.JComponent.paintComponent(JComponent.java:752)
    at javax.swing.JComponent.paint(JComponent.java:1029)
    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5124)
    at javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1479)
    at javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1410)
    at javax.swing.RepaintManager.paint(RepaintManager.java:1224)
    at javax.swing.JComponent._paintImmediately(JComponent.java:5072)
    at javax.swing.JComponent.paintImmediately(JComponent.java:4882)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:785)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:713)
    at javax.swing.RepaintManager.seqPaintDirtyRegions(RepaintManager.java:693)
    at javax.swing.SystemEventQueueUtilities$ComponentWorkRequest.run(SystemEventQueueUtilities.java:125)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:641)
    at java.awt.EventQueue.access$000(EventQueue.java:84)
    at java.awt.EventQueue$1.run(EventQueue.java:602)
    at java.awt.EventQueue$1.run(EventQueue.java:600)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:611)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at javax.swing.plaf.synth.SynthLookAndFeel.paintRegion(SynthLookAndFeel.java:386)
    at javax.swing.plaf.synth.SynthLookAndFeel.update(SynthLookAndFeel.java:350)
    at javax.swing.plaf.synth.SynthPanelUI.update(SynthPanelUI.java:94)
    at javax.swing.JComponent.paintComponent(JComponent.java:752)
    at javax.swing.JComponent.paint(JComponent.java:1029)
    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5124)
    at javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1479)
    at javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1410)
    at javax.swing.RepaintManager.paint(RepaintManager.java:1224)
    at javax.swing.JComponent._paintImmediately(JComponent.java:5072)
    at javax.swing.JComponent.paintImmediately(JComponent.java:4882)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:785)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:713)
    at javax.swing.RepaintManager.seqPaintDirtyRegions(RepaintManager.java:693)
    at javax.swing.SystemEventQueueUtilities$ComponentWorkRequest.run(SystemEventQueueUtilities.java:125)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:641)
    at java.awt.EventQueue.access$000(EventQueue.java:84)
    at java.awt.EventQueue$1.run(EventQueue.java:602)
    at java.awt.EventQueue$1.run(EventQueue.java:600)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:611)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at javax.swing.plaf.synth.SynthLookAndFeel.paintRegion(SynthLookAndFeel.java:386)
    at javax.swing.plaf.synth.SynthLookAndFeel.update(SynthLookAndFeel.java:350)
    at javax.swing.plaf.synth.SynthPanelUI.update(SynthPanelUI.java:94)
    at javax.swing.JComponent.paintComponent(JComponent.java:752)
    at javax.swing.JComponent.paint(JComponent.java:1029)
    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5124)
    at javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1479)
    at javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1410)
    at javax.swing.RepaintManager.paint(RepaintManager.java:1224)
    at javax.swing.JComponent._paintImmediately(JComponent.java:5072)
    at javax.swing.JComponent.paintImmediately(JComponent.java:4882)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:785)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:713)
    at javax.swing.RepaintManager.seqPaintDirtyRegions(RepaintManager.java:693)
    at javax.swing.SystemEventQueueUtilities$ComponentWorkRequest.run(SystemEventQueueUtilities.java:125)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:641)
    at java.awt.EventQueue.access$000(EventQueue.java:84)
    at java.awt.EventQueue$1.run(EventQueue.java:602)
    at java.awt.EventQueue$1.run(EventQueue.java:600)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:611)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at javax.swing.plaf.synth.SynthLookAndFeel.paintRegion(SynthLookAndFeel.java:386)
    at javax.swing.plaf.synth.SynthLookAndFeel.update(SynthLookAndFeel.java:350)
    at javax.swing.plaf.synth.SynthPanelUI.update(SynthPanelUI.java:94)
    at javax.swing.JComponent.paintComponent(JComponent.java:752)
    at javax.swing.JComponent.paint(JComponent.java:1029)
    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5124)
    at javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1479)
    at javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1410)
    at javax.swing.RepaintManager.paint(RepaintManager.java:1224)
    at javax.swing.JComponent._paintImmediately(JComponent.java:5072)
    at javax.swing.JComponent.paintImmediately(JComponent.java:4882)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:785)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:713)
    at javax.swing.RepaintManager.seqPaintDirtyRegions(RepaintManager.java:693)
    at javax.swing.SystemEventQueueUtilities$ComponentWorkRequest.run(SystemEventQueueUtilities.java:125)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:641)
    at java.awt.EventQueue.access$000(EventQueue.java:84)
    at java.awt.EventQueue$1.run(EventQueue.java:602)
    at java.awt.EventQueue$1.run(EventQueue.java:600)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:611)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at javax.swing.plaf.synth.SynthLookAndFeel.paintRegion(SynthLookAndFeel.java:386)
    at javax.swing.plaf.synth.SynthLookAndFeel.update(SynthLookAndFeel.java:350)
    at javax.swing.plaf.synth.SynthPanelUI.update(SynthPanelUI.java:94)
    at javax.swing.JComponent.paintComponent(JComponent.java:752)
    at javax.swing.JComponent.paint(JComponent.java:1029)
    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5124)
    at javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1479)
    at javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1410)
    at javax.swing.RepaintManager.paint(RepaintManager.java:1224)
    at javax.swing.JComponent._paintImmediately(JComponent.java:5072)
    at javax.swing.JComponent.paintImmediately(JComponent.java:4882)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:785)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:713)
    at javax.swing.RepaintManager.seqPaintDirtyRegions(RepaintManager.java:693)
    at javax.swing.SystemEventQueueUtilities$ComponentWorkRequest.run(SystemEventQueueUtilities.java:125)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:641)
    at java.awt.EventQueue.access$000(EventQueue.java:84)
    at java.awt.EventQueue$1.run(EventQueue.java:602)
    at java.awt.EventQueue$1.run(EventQueue.java:600)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:611)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:56:53.263

为您的游戏创建一个 GameState 类（实现可序列化）并保存它。您在尝试序列化 JFrame 时遇到了异常，并且从那个怪物的外观来看，您不会很快找到解决方法。

```
// GameState.java
class GameState implements Serializable
{
    public int score;
    public int numFoos;

    // etc etc
}

// MyGame.java
public class MyGame extends javax.swing.JFrame
{
    private GameState myState;

    private void saveGame(java.awt.event.ActionEvent evt)
    {
        JFileChooser fileChooser = new JFileChooser();
        int user_command = fileChooser.showSaveDialog(this);
        if (user_command == JFileChooser.APPROVE_OPTION) {
            try
            {
                File file = fileChooser.getSelectedFile();
                ObjectOutputStream outputStream = new ObjectOutputStream(new FileOutputStream(file));

                outputStream.writeObject(myState);
                outputStream.close();

            } 
            catch (FileNotFoundException e) {System.out.println("blaaagrgr");}
            catch (IOException e) {System.out.println("ioexception");}
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:47:21.277

您应该记录您的异常，而不是默默地忽略它们。我的猜测是你有一些字段`MyGame`不是`Serializable`或者它本身包含一些不能完全序列化的东西。

不过，您可能不应该序列化整个`JFrame`. 这不是保存游戏的好方法，因为序列化将与 Swing 的未来版本不兼容。

# android - 在android上检测磁盘加密

> ID：13298299
> 
> 赞同：0
> 
> 时间：2012-11-08T21:40:35.060
> 
> 标签：android, security, encryption

从 Android SDK 3.0 开始，用户可以选择加密他们的整个磁盘，这基本上相当于加密给定设备上的 /data。该选项显示在电话首选项中，因此我认为它可供应用程序读取。有这个 DevicePolicyManager 看起来它有信息，但我是否理解应用程序必须实现像[这里](http://rootfs.wordpress.com/2010/09/09/android-make-your-application-a-device-administrator/)这样的接收器？这对我来说真的不起作用，因为我不想明确管理用户的设备，当然也不希望他们必须同意这样的事情才能安装我的应用程序。真的不只是一些我可以在某处读取的标志以查看它是否已加密吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:52:03.223

> 有这个 DevicePolicyManager 看起来它有信息，但我是否理解应用程序必须实现像这里这样的接收器？

您可以尝试使用`getSystemService()`获取`DevicePolicyManager`，然后调用`getStorageEncryptionStatus()`，看看它是否有效。

# excel - 从随机排序文件的其他工作表中复制值

> ID：13298300
> 
> 赞同：1
> 
> 时间：2012-11-08T21:40:35.567
> 
> 标签：excel, vba

您好，我是 excel 新手，需要从其他工作簿中获取值。

例如，我有`[Book1]Sheet1`这样的：

```
 A   B   C   D
      -   -   -   -  
t1 |  2   5   9   4

t2 |  5   8   4   5

t3 |  3   1   2   6 
```

我`[Book2]Sheet1`在其他列中有 ABCD 列，并且按随机顺序排列，如下所示：

```
 E   C    A   F   D   B
      -   -    -   -   -   -
t2 |  4   5   9   4   8    5

t3 |  2   8   4   5   2    1

t1 |  1   1   2   6   1    3 
```

我想要一个 vba 宏，它根据相关的列和行标识符`[Book1]Sheet1`使用值进行更新。`[Book2]Sheet1`

我该如何开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:13:38.297

为了帮助您入门，请尝试编写一个宏来查找同一工作簿中的值。这是可以提供帮助的教程：

[http://www.youtube.com/watch?v=RR1g9loNhWI](http://www.youtube.com/watch?v=RR1g9loNhWI)

# wordpress - 将 wp_links_pages 更改为“下一页”和“上一页”按钮？

> ID：13298304
> 
> 赞同：0
> 
> 时间：2012-11-08T21:40:46.890
> 
> 标签：wordpress, wordpress-theming

在我的 wordpress single.php 我有`<?php wp_link_pages( array( 'before' => '<div class="page-links">' . __( 'Pages:', 'pearl' ), 'after' => '</div>' ) ); ?>`

我希望这是“下一页”和“单页”按钮，而不是当前的按钮`Pages: 1 2 3 4`

我试过搜索，但我认为它会从`wp_link_pages`完全使用改变我只是不确定它会改变什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T23:51:06.707

试试这个

```
<div class="navigation"><p><?php posts_nav_link(); ?></p></div> 
```

谢谢

# ruby - EventMachine 不通过数据报套接字接收数据

> ID：13298306
> 
> 赞同：0
> 
> 时间：2012-11-08T21:40:49.797
> 
> 标签：ruby, sockets, udp, eventmachine

我正在使用这段代码来发送和接收数据，问题是我没有收到任何东西..

代码：

```
US_HOST = "239.255.255.250"
US_PORT = 1900

module SSDP
  class Client < EventMachine::Connection
    def receive_data data
      p "Received some data:"
      p data
    end
  end
end

us = EM.open_datagram_socket US_HOST, US_PORT, SSDP::Client

us.send_data msg

def msg
<<-MSEARCH
M-SEARCH * HTTP/1.1\r
HOST: #{US_HOST}:#{US_PORT}\r
MAN: ssdp:discover\r
MX: 1\r
ST: ssdp:all\r
\r
MSEARCH
end 
```

如果我用 Ruby 发送完全相同的消息，`UDPSocket`我**确实**会收到数据（来自`UDPSocket`，而不是来自 EM）..

有人可以告诉我我在这里做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:44:05.300

第一个问题：使用`Connection#send_datagram`代替`Connection#send_data`

“不要从 EventMachine::Connection#receive_data 方法之外的数据报套接字调用 send_data。使用 EventMachine::Connection#send_datagram。” [http://rubydoc.info/gems/eventmachine/1.0.0/EventMachine#open_datagram_socket-class_method](http://rubydoc.info/gems/eventmachine/1.0.0/EventMachine#open_datagram_socket-class_method)

第二个问题似乎与使用多播地址有关。以下对我有用。

```
require "eventmachine"

US_HOST = "127.0.0.1"
US_PORT = 1900

module SSDP
  class Client < EventMachine::Connection
    def receive_data data
      warn "recv: #{data.inspect}"
    end
  end
end

def msg
<<-MSEARCH.gsub(/^\s+/,"")
  M-SEARCH * HTTP/1.1\r
  HOST: #{US_HOST}:#{US_PORT}\r
  MAN: ssdp:discover\r
  MX: 1\r
  ST: ssdp:all\r
  \r
MSEARCH
end

EM.run {
  us = EM.open_datagram_socket(US_HOST, US_PORT, SSDP::Client)
  us.send_datagram(msg, US_HOST, US_PORT)
  warn  "sent: #{msg.inspect}"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:51:04.103

这就是我让 EventMachine 设置数据报套接字并侦听 SSDP 公告的方式。

改变：

```
us = EM.open_datagram_socket(US_HOST, US_PORT, SSDP::Client) 
```

到：

```
us = EM.open_datagram_socket('0.0.0.0', US_PORT, SSDP::Client) 
```

您必须实际绑定到您的 IP 地址而不是多播地址。然后向您的客户端类添加一个构造函数，您可以在其中告诉套接字加入 SSDP 的多播组。

```
class Client < EventMachine::Connection

def initialize
  puts "Socket setup"
  set_sock_opt(Socket::IPPROTO_IP, Socket::IP_ADD_MEMBERSHIP, 
               IPAddr.new('239.255.255.250').hton +
               IPAddr.new('0.0.0.0').hton)
end

..... 
```

# c# - 如何自动将派生类对象转换为新的基类对象？

> ID：13298308
> 
> 赞同：1
> 
> 时间：2012-11-08T21:40:52.060
> 
> 标签：c#, parent-child

`B`是一个派生自 的类`A`。我需要`A`从现有对象创建一个新对象`B`。

我需要这个，因为在我的应用程序中，我使用了很多比（包含大量参考数据）`A`轻得多的实例，否则我会用完内存。`B`

如何在不手动复制自定义方法中的所有“字段”值的情况下转换`B`为？`A``A`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:50:48.090

考虑使用组合（即您`B`包含一个私有`A`的成员数据）而不是继承。添加一个方法来`B`返回它，这样你就可以在其余的被垃圾收集`A`时保留它。`B`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:47:04.163

只需投射它：

```
var a = (A)b; 
```

或者

```
var a = b as A; 
```

扩展另一个类的类总是可以转换为更原始的版本。请注意，在幕后，这仍然是相同的实例`B`，您只是将其视为`A`. 如果您正在寻找创建 B 的克隆，那么您应该向 B 添加一个方法：

```
public class B : A  
{
    public A Clone()
    {
        var a = new A();
        a.SomeProperty = this.SomeProperty;
        ...etc...
        return a;
    }
} 
```

# c# - 通过 EntityFramework 插入默认值

> ID：13298310
> 
> 赞同：3
> 
> 时间：2012-11-08T21:40:56.627
> 
> 标签：c#, .net, sql-server, asp.net-mvc, entity-framework

我对数据库中的标题字段有默认约束。在 Web 应用程序中，如果标题为空 NULL 值传递给数据库并且数据库返回异常，因为 samo 字段不能为空（Caption varchar(50) NOT NULL）。

那么，如果确实没有提供值，那么设置某个值（“” - 空字符串）或避免将 NULL 发送到数据库的最简单方法是什么。我如何在 EntityFrameowrk 或数据访问层中设置它......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:10:30.897

只需在创建新实体后立即使用空字符串定义属性。例如，在构造函数中。[例子](http://www.prescottnasser.com/post/2012/05/16/Entity-Framework-Code-First-Default-Column-Values.aspx)

在更新现有实体之前，您可以检查属性是否为空：

```
entity.StringProperty = entity.StringProperty ?? String.Empty;
_db.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T14:31:55.577

在我的系统 MVC4 实体框架 5.0 上，我使用的是这样的，（DataAnnotation）

```
[DefaultValue = DateTime.Now] 
```

公共日期时间 MyDateTime { 获取；放; }

}

或者像其他类型一样...`string.Empty`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T21:52:38.003

在实体中，您可以在创建时初始化您的对象吗？我知道你可以在 Linq 中做到这一点。您是否能够进入实体对象的代码并在创建时将相关属性设置为默认值？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T22:13:04.037

在构造函数中设置它。

```
partial class MyEntityName {
    public MyEntityName() {
        this.Caption = "";
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T21:44:37.010

这似乎是一个只有你会知道的问题。空值代表业务逻辑，由您自己弄清楚。

是否应该更改数据库以允许空值，因为它在那里有意义？

应用程序应该在数据库中保存“-1”，因为这有一些意义，还是应该保存“”？

如果该值为空，应用程序是否应该根本不提交该字段？

允许应用程序提交包含不相关数据的字段是否会影响该数据的未来价值？

根据我的经验，我允许将值放置在数据库中，`NULL`因为 null 表示不存在关系或值。当该值不存在时，这意味着应该或将要发生的动作尚未发生。不过，这仅适用于我自己，因为大多数人会根据具体情况实施业务逻辑。

# ios - 动态加载视图

> ID：13298312
> 
> 赞同：1
> 
> 时间：2012-11-08T21:41:02.947
> 
> 标签：ios, nib, loadnibnamed

尝试动态加载视图时遇到一个奇怪的问题。

我得到的错误如下：

> *** 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无法在包中加载 NIB：“NSBundle（已加载）”，名称为“ItemView”***第一次抛出调用堆栈：

奇怪的是，它似乎是随机发生的——有时它有效，有时它对我不利。

我按如下方式创建项目：

```
CGRect  viewRect = CGRectMake(2.5, 2.5, 100, 80);
ItemView *item = [[ItemView alloc] initWithFrame:viewRect]; 
```

构造函数如下：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        NSArray *subviewArray = [[NSBundle mainBundle] loadNibNamed:@"ItemView" owner:self options:nil];
        rootView = [subviewArray objectAtIndex:0];
        [itemButton addTarget:self action:@selector(itemButtonPressed) forControlEvents:UIControlEventTouchUpInside];
        [self addSubview:rootView];
    }
    return self;
} 
```

有谁知道这会导致什么？

# html - Flowplayer 5.1.1 (HTML5) - 欲望控制总是“开启”？

> ID：13298313
> 
> 赞同：0
> 
> 时间：2012-11-08T21:41:11.307
> 
> 标签：html, html5-video, flowplayer

我几乎完成了 flowplayer 设置，并且大部分都在工作。

然而...

我希望能够创建一个新的 Flowplayer 5.1.1 (html5) 的实例，其中控件总是“打开”，即“可见”。即使我将鼠标移到视频之外。

在 Flowplayer 文档中，它说要添加“fixed-controls”或“no-hover”类，但它似乎不起作用。“fixed-controls”使控件完全消失，而“no-hover”对视频没有任何影响。

这就是我正在尝试的，但是......

这些似乎不起作用。

```
 <div class="flowplayer fixed-controls minimalist"><video src="http://stream.flowplayer.org/white/470x250.mp4"></video></div> 
```

和...

```
<div class="flowplayer no-hover minimalist"><video src="http://stream.flowplayer.org/white/470x250.mp4"></video></div> 
```

任何想法如何使控件始终可见？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T09:53:18.777

一开始我有以下内容。就像在演示版中一样。<链接rel="stylesheet" href="http://releases.flowplayer.org/5.1.1/minimalist.css"/>

然后我有以下内容。<div class="flowplayer 固定控件" >

这对我来说很好。控件始终可见。

问候奥拉赫德林

# java - 模式不匹配文本文件中的所有短语

> ID：13298315
> 
> 赞同：0
> 
> 时间：2012-11-08T21:41:29.047
> 
> 标签：java, pattern-matching

我的程序未显示所需的匹配结果。我的文本文件包含以下行：

1.  红车
2.  蓝色或红色
3.  红色的
4.  车

所以如果我搜索：“红色汽车”。我只得到“红车”作为唯一的结果，但我想要的是得到以下结果：

1.  红车
2.  红色的
3.  红色的
4.  车

因为这些字符串在文本文件中。蓝色或红色，“或”是合乎逻辑的。所以我想匹配它们中的任何一个而不是两者。我究竟做错了什么？任何帮助表示赞赏。我的代码如下：

```
 public static void main(String[] args) {
        // TODO code application logic here
        //String key;
        String strLine;
        try{
    // Open the file that is the first 
    // command line parameter   
    FileInputStream fstream = new FileInputStream("C:\\textfile.txt");
    // Get the object of DataInputStream
    DataInputStream in = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        Scanner input  = new Scanner (System.in);         
        System.out.print("Enter Your Search:  ");
        String key = input.nextLine();

        while ((strLine = br.readLine()) != null) {     
        Pattern p = Pattern.compile(key); // regex pattern to search for
        Matcher m = p.matcher(strLine);  // src of text to search
        boolean b = false;
        while(b = m.find()) {  
        System.out.println( m.start() + " " + m.group()); // returns index and match
    // Print the content on the console
        }
        }
        //Close the input stream
     in.close();  
        }catch (Exception e){//Catch exception if any
       System.err.println("Error: " + e.getMessage());
    }
   }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:47:43.593

尝试通过这个正则表达式： -

```
"((?:Red)?\\s*(?:or)?\\s*(?:Car)?)" 
```

这将匹配： -

`0 or 1`红色后接`0 or more`空格，后接`0 or 1`Car

`(?:...)`是非捕获组

**注意： -**上述正则表达式不匹配： - `Car Red`。

如果您的订单可以反转，那么您可以使用：-

```
"((?:Red|Car)?\\s*(?:or)?\\s*(?:Red|Car)?)" 
```

并从`group(0)`.

例如：-

```
String strLine = "Car or Red";
Pattern p = Pattern.compile("((?:Red|Car)?\\s*(?:or)?\\s*(?:Red|Car)?)"); 
Matcher m = p.matcher(strLine);  // src of text to search

if (m.matches()) {  
    System.out.println(m.group()); // returns index and match
} 
```

**输出**： -

```
Car or Red 
```

* * *

将您的替换`while(b = m.find())`为`if (m.matches())`, 因为您想匹配完整的字符串，并且只匹配一次。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-08T21:51:19.893

你的模式应该是`Red|Car`.

# c# - 客户端生成时列表框项为空

> ID：13298317
> 
> 赞同：1
> 
> 时间：2012-11-08T21:41:38.030
> 
> 标签：c#, listbox, asp.net-3.5

我正在添加这样的项目：

```
$('#listbox').append('<option value="1">"1"</option>'); 
```

在服务器端`listbox.Items`总是空的。如何获取客户端脚本添加的值？

我正在使用 C# ASP .Net 3.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:07:31.913

您展示的是纯客户端 javascript。您只是添加允许用户选择值的 HTML 标记。这永远不会影响服务器端控件的内容。选定的值将在相应输入字段的表单集合中返回。

如果要在服务器端添加它们，则必须在使用 ASP 代码呈现页面之前添加它们，例如，

```
<asp:ListBox id="listbox" 
       Rows="6"
       Width="100px"
       SelectionMode="Single" 
       runat="server">

     <asp:ListItem>Item 1</asp:ListItem>
     <asp:ListItem>Item 2</asp:ListItem>
     <asp:ListItem>Item 3</asp:ListItem>
     <asp:ListItem>Item 4</asp:ListItem>
     <asp:ListItem>Item 5</asp:ListItem>
     <asp:ListItem>Item 6</asp:ListItem>

</asp:ListBox> 
```

这将为您填充选择列表，并且选项将绑定到`listbox`控件。

# chef-infra - 使用开源厨师服务器配置刀时出错

> ID：13298320
> 
> 赞同：2
> 
> 时间：2012-11-08T21:41:48.857
> 
> 标签：chef-infra

当我尝试使用以下命令在 AWS CentOS 服务器中配置刀时：

```
knife configure -i 
```

这是输出：

```
Where should I put the config file? [/root/.chef/knife.rb] 
Please enter the chef server URL: [http://myserverurl.com:4000] 
Please enter a clientname for the new client: [jim]  
Please enter the existing admin clientname: [chef-webui] 
Please enter the location of the existing admin client's private key: [/etc/chef/webui.pem] 
Please enter the validation clientname: [chef-validator] 
Please enter the location of the validation key: [/etc/chef/validation.pem] 
Please enter the path to a chef repository (or leave blank): 
Creating initial API user... 
```

这是错误：

```
ERROR: Server returned error for http://myserverurl.com:4000/clients, retrying 1/5 in 4s
ERROR: Server returned error for http://myserverurl.com:4000/clients/jim, retrying 1/5 in 3s 
```

## 更新

我还尝试查看 /root/.chef/knife.rb ，这是文件的内容：

```
log_level                :info
log_location             STDOUT
node_name                'jim'
client_key               '/root/.chef/jim.pem'
validation_client_name   'chef-validator'
validation_key           '/etc/chef/validation.pem'
chef_server_url          'http://myserverurl.com:4000'
cache_type               'BasicFile'
cache_options( :path => '/root/.chef/checksums' ) 
```

文件 /root/.chef/jim.pem 不存在，它是自动生成的还是我应该创建它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:52:03.807

登录到 Chef 服务器 Web UI 并创建一个客户端。在窗口中，它将显示一个“一次性”私钥，您需要将其复制粘贴到相应的 ~/.chef/client.pem 文件中。

看起来它正在尝试登录并为您执行此操作但失败了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:04:32.123

我正面临着确切的问题。但是我通过遵循此[文档](http://wiki.opscode.com/display/chef/Installing+Chef+Server+Manually)解决了这个问题。

此外，您可能在这里犯了另一个错误，当您运行命令安装厨师时，它会要求您提供厨师服务器网址。我在那里做错了。

如果您使用的是 Amazon EC2，则主厨服务器 url 为 http:// `<your FQDN>`: 4000

请检查您是否正确执行此步骤。是的，您的 FQDN 不是公共 dns。运行主机名命令，你会得到类似 ip: 12-23-344-32 的东西。这是您的 FQDN

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T22:41:03.257

由于某种原因，Chef solo 没有启动 rabbitmq：

```
sudo service rabbitmq-server restart 
```

# java - 如何阅读 System 类 API

> ID：13298325
> 
> 赞同：0
> 
> 时间：2012-11-08T21:42:22.637
> 
> 标签：java, api, system

我试图了解 System 类是如何工作的。

当我转到 API 时，[在这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html)，我看到了字段摘要和方法摘要。我理解方法摘要是所有方法的列表。但是什么是字段摘要？

err, in, out, 指的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:47:04.513

Java 是开源的 - 如果您有疑问，您可以随时查看[源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/System.java)以更好地了解事物的设计方式

如果你下载了完整的源代码，你甚至可以直接从 eclipse 中跳转到任何函数的源代码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T21:43:38.667

**字段摘要**表示该类/接口的静态变量。

例如，**out**是 System 类中的静态变量，它将在 System 类加载时启动，并且可以使用 syntax 访问`System.out`。

注意：最好参考正确版本的文档。1.4.2 有点旧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T21:45:30.143

正如 Nambari 回答您问题的第一部分一样，这是最后一部分：

从您链接的文档中：

```
Field Summary
static PrintStream  err 
          The "standard" error output stream.
static InputStream  in 
          The "standard" input stream.
static PrintStream  out 
      The "standard" output stream. 
```

err 是错误发生的地方，可以重定向到文件、控制台或任何地方。

in 是输入流，可以是文件、键盘、流等

out 是输出，通常基于控制台或 GUI。

# android - 使用来自不同活动的多个intent-extra

> ID：13298328
> 
> 赞同：1
> 
> 时间：2012-11-08T21:42:28.143
> 
> 标签：android, database, android-intent

我在两个不同的活动中使用intent-extra，然后使用来自不同活动的ContentValue使用单个包存储它们......但它向我显示错误......这是我使用内容值的活动代码......

```
 package com.example.alert;

    import android.app.Activity;
    import android.content.ContentValues;
    import android.database.sqlite.SQLiteDatabase;
    import android.os.Bundle;
    import android.view.View;
    import android.widget.Button;

    public class StoringEntire extends Activity {
     DatabaseHelper db=new DatabaseHelper(this);
     public static String alerterName;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.storing_entire);
    Button save=(Button) findViewById(R.id.save);

    save.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Bundle bundle=getIntent().getExtras();
            alerterName=bundle.getString("alerterName");
            double lat=bundle.getDouble("Latitude");
            double lon=bundle.getDouble("Longitude");
            SQLiteDatabase datab=db.getWritableDatabase();
            ContentValues cv=new ContentValues();
            cv.put(db.KEY_ALERT, alerterName);
            cv.put(db.KEY_LATITUDE,lat);
            cv.put(db.KEY_LONGITUDE, lon);
            datab.insert("data",db.KEY_ALERT,cv);
            datab.insert("data",db.KEY_LATITUDE,cv);
            datab.insert("data",db.KEY_LONGITUDE,cv);
            db.close();

        }
    });
} 
```

}

```
- 11-09 03:17:23.939: E/AndroidRuntime(1012): FATAL EXCEPTION: main </n>
- 11-09 03:17:23.939: E/AndroidRuntime(1012): java.lang.NullPointerException
- 11-09 03:17:23.939: E/AndroidRuntime(1012): at com.example.alert.StoringEntire$1.onClick(StoringEntire.java:26)
- 11-09 03:17:23.939: E/AndroidRuntime(1012):   at android.view.View.performClick(View.java:4084)
- 11-09 03:17:23.939: E/AndroidRuntime(1012):   at android.view.View$PerformClick.run(View.java:16966)
- 11-09 03:17:23.939: E/AndroidRuntime(1012):   at android.os.Handler.handleCallback(Handler.java:615)
- 11-09 03:17:23.939: E/AndroidRuntime(1012):   at android.os.Handler.dispatchMessage(Handler.java:92)
- 11-09 03:17:23.939: E/AndroidRuntime(1012):   at android.os.Looper.loop(Looper.java:137)
- 11-09 03:17:23.939: E/AndroidRuntime(1012):   at android.app.ActivityThread.main(ActivityThread.java:4745)
- 11-09 03:17:23.939: E/AndroidRuntime(1012):   at java.lang.reflect.Method.invokeNative(Native Method)
- 11-09 03:17:23.939: E/AndroidRuntime(1012):   at java.lang.reflect.Method.invoke(Method.java:511)
- 11-09 03:17:23.939: E/AndroidRuntime(1012):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
- 11-09 03:17:23.939: E/AndroidRuntime(1012):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
- 11-09 03:17:23.939: E/AndroidRuntime(1012):   at dalvik.system.NativeStart.main(Native Method) 
```

这些是我正在使用的意图

```
 Intent myIntent = new Intent(AddLocation.this, AddTrigger.class);
           myIntent.putExtra("Latitude", ""+ destLatitude);
       myIntent.putExtra("Longitude",""+ destLongitude); 
```

而对于另一项活动

```
 Intent Inten = new Intent(AddAlerter.this, AddLocation.class);
                 Inten.putExtra("alerterName", alerterNameEditText.getText().toString());

                startActivity(Inten); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:46:36.867

您需要检查`null`代码中的值并且调用`insert()`了 3 次，试试这个：

```
public class StoringEntire extends Activity {
    DatabaseHelper db;
    public static String alerterName;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.storing_entire);

        db = new DatabaseHelper(this);
        Button save=(Button) findViewById(R.id.save);
        save.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                if(getIntent() != null) {
                    Bundle bundle=getIntent().getExtras();
                    if(bundle != null) {
                        alerterName=bundle.getString("alerterName");
                        double lat=bundle.getDouble("Latitude");
                        double lon=bundle.getDouble("Longitude");
                        SQLiteDatabase datab=db.getWritableDatabase();
                        ContentValues cv=new ContentValues();
                        cv.put(db.KEY_ALERT, alerterName);
                        cv.put(db.KEY_LATITUDE,lat);
                        cv.put(db.KEY_LONGITUDE, lon);
                        datab.insert("data", null, cv);
                        db.close();
                    }
                }
            }
        });
    }
} 
```

# c - 您应该将“typedef enum”放在源代码的什么位置？

> ID：13298329
> 
> 赞同：0
> 
> 时间：2012-11-08T21:42:35.237
> 
> 标签：c, header-files, code-organization

我正在从事一个比以往更大的项目，并且我正在尽我所能保持我的代码结构正确。我正在编写一个微控制器并且有一些全局变量，根据我在这里阅读的一些建议，这些变量都定义在一个“global_variables.h”文件中，该文件包含在使用全局变量的任何地方。

我还将全局变量的 typedef 放入“global_variables.h”文件中。

我遇到的问题是我使用全局变量的 file1.c 有一个 function1(new_type_t variable)，它接受新的 typedef 作为参数。问题是我在头文件（file1.h）中定义了function1原型，但是由于#include“global_variables.h”位于file1.c中，所以file1.h中的函数原型看不到typedef .

我觉得这很常见，但谷歌搜索似乎并没有提供太多帮助。我应该制作一个单独的“global_variables.h”和“global_variables_types.h”并将.h文件包含在我的其他文件的标题中，并将.c包含在源代码中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T21:51:17.030

头文件有一些重要的规则可以使事情顺利进行..\

首先，使用标头保护，这样多重包含就不会导致问题。

在模块.h...

```
 #ifndef MODULE_H
  #define MODULE_H
  ...
  #endif 
```

现在，是否包含相同的标题两次都没关系。

第二条规则（现在您有了标头保护）是每个 .h 文件都应该包含它需要编译的所有其他文件。完成此操作后，您的代码在在另一个模块中重用一个标头以及使标头排序正确方面将更加健壮。

```
 #ifndef MODULE_H
  #define MODULE_H

  #include "module2.h"  // we need a type from here.

  void myFunc(Module2Type t); 
  #endif 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T21:56:35.380

我不认为有一个头文件`global_variables.h`是明智的。

如果您的项目是一个小型的单人项目（例如，少于 50KLOC = 50,000 行源代码），并且您不打算制作可重用的库，那么为所有项目使用一个单独的头文件可能是明智的。该头文件将声明全局变量，并在它们之前声明相关类型。您还将声明所有函数，最后定义所有内联函数。您可以考虑将内联函数放在单独的头文件中（包括您的主头文件）。

如果您打算制作可重用的代码，请为项目的单独子系统制作单独的标头。但我觉得不需要为所有全局变量设置一个标题。

最重要的是，**保持你的全局变量集最小**。您应该能够用一只手的手指计算全局变量。如果您需要超过 4 或 5 个全局变量，请考虑将相关的全局变量打包在一个全局`struct`. 例如，如果屏幕尺寸在全局数据中，不要声明`int screen_width, screen_height;`，而是

```
 struct {
    int width;
    int height;
 } screen; 
```

当然，真正的事情取决于项目，也许取决于构建链。一些专有编译器并没有真正优化，如果使用全局结构，可能会产生错误的代码。如果您使用最近的 GCC（作为交叉编译器，最好在 Linux 上使用），您就不会遇到这个问题，因为 GCC 优化得很好。始终在编译器上启用所有警告（例如 build with `gcc -Wall -g -O2`）

一个好的建议是**研究一些***与您类似的***现有*****自由软件的源代码。***

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T23:17:01.730

一种常见且灵活的方法是在 .h 中使用`extern`链接声明全局变量。然后在您选择的 .c 文件中定义全局变量。

在需要引用全局变量的任何地方包含该 .h 。链接器将负责解析对相应 .obj 文件的引用。

事实上，全局变量越少，跟踪使用它们的人就越理智。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T21:53:58.800

一种选择是在 file1.h 中包含 global_variables.h 而不是 file1.c。这是否是一个好的解决方案，取决于您的源代码树。*

# java - 用 Java 解决数学问题

> ID：13298332
> 
> 赞同：0
> 
> 时间：2012-11-08T21:42:43.443
> 
> 标签：java, math

在为 Java 中的钻石问题求解器进行了一些激烈的谷歌搜索之后，我能找到的只是 OOP 钻石问题。那不是我所追求的。我正在寻找的是java中的一个简单函数来找到钻石问题的解决方案。

钻石问题可以这样表达：

A = C * D，

B = C + D

因此，如果：

A = 10, B = 7

C = 5，D = 2

我正在尝试做的是快速有效地解决java中的钻石问题。我尝试过嵌套 for 循环，但由于程序的性质，它们的效率极低。

如果有人有任何想法，我很想听听他们的意见。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:51:01.113

这只是一对联立方程，无需借助数字运算即可解析求解。

重新排列第二行以获取`C = B - D`并替换到第一行。这给出了 的二次方`D`：

```
A = D * (B - D) 
```

通过[二次公式](http://en.wikipedia.org/wiki/Quadratic_equation#Quadratic_formula)，我们有一对解`D`：

```
D = (B +/- sqrt(B^2 - 4*A)) / 2 
```

现在将这些解代入第 2 行以求解`C`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T22:01:27.540

如果我们观察以下代数：

`B^2 - 4A = (C^2 + 2CD + C^2) - 4CD = (C^2 - 2CD + D^2) = (C-D)^2`

然后我们可以快速轻松地制作这个函数：

```
public static double[] diamondSolve(double a, double b) {
    double temp = b * b - 4 * a;
    double difference = Math.sqrt(temp); // difference = C - D

    double[] retArray = new double[2];

    // (b + difference) / 2 = (C + D + C - D) / 2 = 2C / 2 = C
    retArray[0] = (b + difference) / 2;

    // B - C = C + D - C  = D
    retArray[1] = b - retArray[0];

    return retArray;
} 
```

顺便说一句，如果`4A`大于`B^2`...，这将产生问题，在这种情况下，答案无论如何都是虚构的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T21:45:09.137

我懒得为你做代数，但只要解决`c`和`d``a``b`

所以像

```
`C = A + B/A` 
```

disclimer，我只是把上面的表达方式做了，但同样的概念也随之而来。你可以做你自己的代数。

也许你可以根据你知道的值做某种 switch 语句。有 4 选择 2（就像 6）不同的情况

# python - 防止“if”python中的部分字符串匹配）

> ID：13298338
> 
> 赞同：1
> 
> 时间：2012-11-08T21:43:45.123
> 
> 标签：python, list, for-loop

我确信这很简单，但我看不到或可能无法理解解决方案。

我有一些代码：

```
if any (mystring in s for s in mylist)
     do something with mystring 
```

我正在测试的地方，看看是否`mystring`在`mylist`，这工作正常。

但是，如果我有清单

`['apples','pears','chickens']`

我正在测试 if 语句，我希望它仅在匹配准确的情况下通过，即`mystring`应该通过并且`do something with mystring`只有 with `apples`，而不是`app`or `apple`。问题是`mystring`to的部分匹配`mylist`正在通过。

即在上面的例子中，如果`mystring`它`app`通过了，我也不想要它。我知道这是微不足道的，所以很抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T21:47:54.520

我认为你应该这样做

```
if mystring in mylist:
  do something with mystring 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T21:47:40.920

如果您只想测试它们是否相等，您可以这样做：

```
if any (mystring == s for s in mylist):
     do something with mystring 
```

但是您可以将其简化为仅检查您的字符串是否在列表中，如下所示：

```
if mystring in mylist:
     do something with mystring 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T21:46:40.363

只需使用相等运算符而不是`in`：

```
if any (mystring == s for s in mylist)
     do something with mystring 
```

操作符“in”可以在序列中找到一个项目，但它对字符串的行为不同——从 ePython 2.3 IIRC 开始——当序列是字符串（或 unicode）时，它也会匹配子字符串。

因此，如果您只是想检查一个单词是否在列表中，`in`就可以了-如

```
if "apple" in ["apple", "pear", "berry"]: 
```

所以，而不是`if any (mystring in s for s in mylist)`只做 `if mystring in mylist`

# python - 在 ElementTree 中处理 CDATA 和注释

> ID：13298339
> 
> 赞同：1
> 
> 时间：2012-11-08T21:43:47.557
> 
> 标签：python, xml, python-2.7, elementtree

有没有办法`ElementTree.parse`考虑`CDATA`标签和/或评论？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T09:34:24.483

[lxml](http://lxml.de/)可以作为标准库[的替代品](http://lxml.de/tutorial.html)`ElementTree`，支持[CDATA](http://lxml.de/api.html#cdata)。

# objective-c - 将消息发送到视图控制器时视图不更新

> ID：13298342
> 
> 赞同：0
> 
> 时间：2012-11-08T21:44:05.280
> 
> 标签：objective-c, xcode, cocoa, model-view-controller

当来自另一个类的消息发送到`ViewController`.

基本上我有一个带有单个窗口的应用程序，其中不同的自定义视图将被换成另一个。我有一个`AppController`管理这个并且工作正常的类：

```
@interface AppController : NSObject

@property (weak) IBOutlet NSView *ourView;
@property (strong) NSViewController *ourViewController;

- (IBAction)changeView:(id)sender;
- (IBAction)start:(id)sender;
- (void)changeViewContoller:(NSInteger)tag;

@end 
```

当一个新视图换成另一个视图时，该`ourViewController`属性将更新为指向该视图的控制器类。每个视图控制器类都会有一个方法都命名为相同的东西，例如“action”。此方法应该更改视图上的某些内容。

所以`AppController`类中的“start”方法将调用`ourViewController`属性的“action”方法。为此，我使用了以下`objc_msgSend()`方法：

```
objc_msgSend(self.ourViewController, action); 
```

这是视图控制器类定义：

```
@interface CountdownViewController : NSViewController

@property (weak) IBOutlet NSTextField *label;

- (IBAction)changeLabel:(id)sender;
- (void)start;
@end 
```

我`NSLog()`在 each 的“action”方法中放置了一个`ViewController`，以查看它是否有效，并且确实有效，但是“action”方法也应该更改标签的字符串值，但它没有。如果有人知道为什么视图没有更新，那将非常有帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:53:10.673

观点被认为是软弱的？如果您需要在此类中保留该指针，请尝试使其变得强大

顺便说一句：..你为什么还要 objc_msgsend.. 使用 performSelector

# javascript - 基于滚动触发动画

> ID：13298343
> 
> 赞同：0
> 
> 时间：2012-11-08T21:44:05.747
> 
> 标签：javascript, jquery, html

我有一个滚动事件，它检查滚动位置并在它通过某个位置时触发动画。这很好用，直到我尝试使用不同的浏览器高度。然后我的号码就关闭了。如何保留我的代码并对其进行更改，使其适用于不同的浏览器高度。

这是我的代码的外壳。

runStatus 是我设置动画的地方。p 是位置点。现在，当我在较高的浏览器中进行测试时，p 值会在我在较短的浏览器高度中进行测试时出现。无需重新编写整个内容，我正在尝试查看是否可以采取一些措施来补偿所有浏览器高度。

我也尝试使用百分比，但如果浏览器短或高，它仍然不会持续触发。

```
$(window).scroll(function () {
            topScroll = $(this).scrollTop();
            run();
        });

    function run(){
        for (var i=0; i < animData.length; i++) {
          update(animData[i]);
        };
    }

    function update(obj){
        var target = obj.target;
        var step = obj.runStatus.length;

        if(topScroll < obj.runStatus[0].p){
          step = 0;
        };

        switch(step){
            case 0:
                //if(obj.repeat) change(target,obj.runStatus[step]);
                break;
            case obj.runStatus.length:
                change(target,obj.runStatus[1]);
                break;
        }

    }

    function change(t,a,b){
      if(!t.data("complete")) animateTo(a,t);
    }

    function animateTo(a,t){
         t.animate( { left:a.x, top:a.y, opacity:a.opacity }, { duration: 600, easing: easing});    
    }

    var animData =[
        // scene 1
        {
            scene:"#scene1",
            name:"#compass",
            runStatus:[
                {p:220, y:500, opacity:0},
                {y:22, opacity:1}
                ]
        },
        {
            scene:"#scene1",
            name:"#chess-right",
            runStatus:[
                {p:260, y:600, opacity:0},
                {y:493, opacity:1}
            ]
        }
] 
```

# perl - 令人困惑的 Perl 数组行为

> ID：13298345
> 
> 赞同：4
> 
> 时间：2012-11-08T21:44:18.990
> 
> 标签：perl

我正在使用 Infoblox 设备的 Perl API（文档：[https](https://ipam.illinois.edu/api/doc/) ://ipam.illinois.edu/api/doc/ ）

我有以下代码：

```
...

my $specificRecord = $recordResults[0];

say $specificRecord->name();

foreach ($specificRecord->ipv4addrs())
{
    say $_;
} 
```

$specificRecord 包含一个 Infoblox::DNS::Host 记录对象。

当我迭代 ipv4addrs() 时，我的问题就出现了。根据文档和 perl 调试器，ipv4addrs() 返回一个包含 IP 或 DHCP::FixedAddr 对象的数组。

就我而言，如果我调试我的程序和“x”$specificRecord->ipv4addrs() 以及 $_，我会得到相同的结果：

```
DB<1> b 70

DB<2> c
Results: 1
aaaa9999test.justice
main::(testScript2.pl:70):          foreach ($specificRecord->ipv4addrs())
main::(testScript2.pl:71):          {

DB<2> x $specificRecord->ipv4addrs();
0  ARRAY(0x64e9e3c)
   0  '8.8.8.8'
   1  '8.8.4.4'

DB<3> n
main::(testScript2.pl:72):              say $_;

DB<3> x $_;
0  ARRAY(0x64e9e3c)
   0  '8.8.8.8'
   1  '8.8.4.4' 
```

这是 Infoblox::DNS::Host 对象的“x”的相关部分：

```
DB<2> x $specificRecord;
0  Infoblox::DNS::Host=HASH(0x8b3eacc)
   '__object_id__' => 'dns.host$._default.justice.aaaa9999test'
   'aliases' => ARRAY(0x8b3e9fc)
        empty array
   'configure_for_dns' => 'true'
   'disable' => 'false'
   'ipv4addrs' => ARRAY(0x64e9e3c)
      0  '8.8.8.8'
      1  '8.8.4.4'
   'ipv6addrs' => ARRAY(0x8aa1bac)
        empty array
   'name' => 'aaaa9999test.justice'
   ... 
```

我不知道我做错了什么以及为什么 foreach 不能与 $_ 变量一起使用。我尝试将 ipv4addrs() 分配给一个数组，然后对其进行遍历，但无济于事。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T21:46:39.580

它返回一个数组引用。尝试取消引用它：

```
foreach ( @{ $specificRecord->ipv4addrs() } ) 
```

# python - 1D 和 ND 绘图之间的区别

> ID：13298351
> 
> 赞同：0
> 
> 时间：2012-11-08T21:44:52.063
> 
> 标签：python, numpy, matplotlib

我在 Matplotlib 上绘图已有一段时间，并注意到某些绘图技术（如 3D 绘图和其他绘图技术）要求数据存在于维度超过 1D 的数组中。例如，如果我有 1D 数组 X、Y、Z，那么我将无法在 3D 图中绘制它们。但是，如果我将相同的数组重塑为 2D 或任何 ND，然后我可以将它们绘制为 3D。我的问题是，你认为为什么会发生这种情况？更重要的是，重塑和一维数组（就其数据而言）之间是否存在差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:05:05.140

让我们调查一下`ax.contour`。[文档中](http://matplotlib.org/mpl_examples/mplot3d/contour3d_demo.py)有一个示例：

```
from mpl_toolkits.mplot3d import axes3d
import matplotlib.pyplot as plt

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
X, Y, Z = axes3d.get_test_data(0.05)
print(X.shape, Y.shape, Z.shape)
# ((120, 120), (120, 120), (120, 120))
cset = ax.contour(X, Y, Z)
ax.clabel(cset, fontsize=9, inline=1)

plt.show() 
```

![在此处输入图像描述](../Images/708e71dcf7f39c74a5a69cd9bbff054c.png)

print 语句显示`ax.contour`可以接受 2D 输入。如果我们要将`X`and`Y`数组更改为一维数组：

```
X, Y, Z = axes3d.get_test_data(0.05)
X = X.reshape(-1)
Y = Y.reshape(-1)
print(X.shape, Y.shape, Z.shape) 
```

然后我们得到

```
((14400,), (14400,), (120, 120)) 
```

作为形状，并且 a`TypeError`被提出：

```
TypeError: Length of x must be number of columns in z,
and length of y must be number of rows. 
```

所以看来别无选择。`ax.contour`需要二维数组。

# java - 不确定如何在两个类之间使用实现

> ID：13298352
> 
> 赞同：0
> 
> 时间：2012-11-08T21:44:54.293
> 
> 标签：java, interface, implementation

这是我的课程，一切都完成了：

```
import java.awt.Color;
import java.awt.Graphics;

//This class will not compile until all 
//abstract Locatable methods have been implemented
public class Block implements Locatable
{
    //instance variables
    private int xPos;
    private int yPos;
    private int width;
    private int height;
    private Color color;

    //constructors
    public Block () {}

    public Block(int x,int y,int w,int h)
    {
        xPos = x;
        yPos = y;
        width = w;
        height = h;
    }

    public Block(int x,int y,int w,int h, Color c)
    {
        xPos = x;
        yPos = y;
        width = w;
        height = h;
        color = c;
    }

    //set methods
    public void setBlock(int x, int y, int w, int h)
    {
        xPos = x;
        yPos = y;
        width = w;
        height = h;
    }

    public void setBlock(int x, int y, int w, int h, Color c)
    {
        xPos = x;
        yPos = y;
        width = w;
        height = h;
        color = c;
    }

    public void draw(Graphics window)
    {
      window.setColor(color);
      window.fillRect(getX(), getY(), getWidth(), getHeight());
    }

    //get methods
    public int getWidth()
    {
       return width;
    }

    public int getHeight()
    {
       return height;
    }

    //toString
    public String toString()
    {
       String complete = getX() + " " + getY() + " " + getWidth() + " " + getHeight() + " java.awt.Color[r=" +     color.getRed() + ", g=" + color.getGreen() + ", b=" + color.getBlue() + "]";
       return complete;
    }
} 
```

这是我必须实现的接口类：

```
public interface Locatable
{
    public void setPos( int x, int y);
    public void setX( int x );
    public void setY( int y );

    public int getX();
    public int getY();
} 
```

我还没有关于接口/实现的正式指导，因此，我不确定需要做什么才能让第一堂课正常运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:47:31.360

实现接口时，必须实现该接口中声明的所有方法。 **接口是您的实现类必须完全**填写的合同。在您的情况下，您的实现类**Block**应该**实现**以下方法来完全填写合同。

```
public void setPos( int x, int y);
public void setX( int x );
public void setY( int y );

public int getX();
public int getY();

public class Block implements Locatable {
     public void setPos( int x, int y){
       // your implementatioon code
      }
      public void setX( int x ) {

        // your implementatioon code
      }
     public void setY( int y ){

 // your implementatioon code
}
public int getX(){

 // your implementatioon code
 return (an int value);
}
public int getY(){

 // your implementatioon code
  return (an int value);
}

} 
```

编辑：从评论中获取您的 NPE。

您从未初始化您的 Color 对象。并尝试在您的 toString 方法中调用其引用的方法。

```
private Color color; 
```

像这样初始化它

```
 private Color color = new Color(any of the Color constructors); 
```

在这里检查[颜色 API](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Color.html)

# php - php fgetcsv - 字符集编码问题

> ID：13298353
> 
> 赞同：14
> 
> 时间：2012-11-08T21:44:55.167
> 
> 标签：php, csv, character-encoding, char

使用 PHP 5.3`fgetcsv`函数，由于编码问题，我遇到了一些问题。请注意，该文件具有西班牙语“特殊”拉丁字符，如图形重音 á、é、í ï 等...

我得到了 CSV 文件，它导出了我在 MS 2008 for Mac Excel 文件中拥有的一些结构化数据。

如果我用 Mac OS X`TextEdit`应用程序打开它，一切似乎都很完美。

但是当我开始使用我的 PHP 程序并尝试使用该 fgetcsv PHP 函数读取 CSV 时，我并没有让它正确读取字符集。

```
/**
 * @Route("/cvsLoad", name="_csv_load")
 * @Template()
 */
public function cvsLoadAction(){
    //setlocale(LC_ALL, 'es_ES.UTF-8');
    $reader = new Reader($this->get('kernel')->getRootDir().'/../web/uploads/documents/question_images/2/41/masiva.csv');

    $i = 1;
    $r = array("hhh" => $reader -> getAll());

    return new Response(json_encode($r, 200));
} 
```

如您所见，我也尝试过使用`setlocale`to `es_ES.UTF-8`。但是没有任何东西让它工作。

阅读部分在这里：

```
public function getRow()
{
    if (($row = fgetcsv($this->_handle, 10000, $this->_delimiter)) !== false) {
        $this->_line++;
        return $this->_headers ? array_combine($this->_headers, $row) : $row;
    } else {
        return false;
    }
} 
```

查看每行读取后我在 $row 变量中得到的内容：

![在此处输入图像描述](../Images/1ffb4f6f7c544489dc1a9fafb1fa3606.png)

这些`?`字符应该是带有图形重音的元音。

那边有什么线索吗？如果我在 Windows 上使用 MS Excel，它会起作用吗？我如何在运行时知道文件的确切编码并在读取之前设置它？

（对于那些讲西班牙语的人，不要对那些文本中如此糟糕的医学内容感到害怕；））。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-08T21:53:18.223

尝试这个：

```
function convert( $str ) {
    return iconv( "Windows-1252", "UTF-8", $str );
}

public function getRow()
{
    if (($row = fgetcsv($this->_handle, 10000, $this->_delimiter)) !== false) {
        $row = array_map( "convert", $row );
        $this->_line++;
        return $this->_headers ? array_combine($this->_headers, $row) : $row;
    } else {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:46:32.563

这可能与 excel 在保存时对文件进行编码的方式有关。

尝试将 .xls 文件上传到谷歌文档并下载为 .csv

# javascript - jquery数据给出错误：未定义

> ID：13298361
> 
> 赞同：2
> 
> 时间：2012-11-08T21:45:41.907
> 
> 标签：javascript, jquery

[在 ajax 成功函数上，我使用vktemplate](http://www.eslinstructor.net/vktemplate/)将一些项目放入下拉列表中。但是，我想将一些数据附加到它们，以便当用户选择地址名称时，我可以快速从 jquery 数据对象中提取整个地址。

这

```
success: function (returnedData) {

    $('.vendor_address_select').vkTemplate('templates/vendor_addresses_by_sector_dropdown_template.tmpl?<?=time()?>', returnedData, function () {

        $.each(returnedData, function (key, val) {
            var id = val.id;

            //dropdown option looks like this:
            //<option id="vendor_address_id_22">company1</option>
            $('#vendor_address_id_' + id).data('address', {
                'vendorName': val.vendor_name,
                'address1': val.address1,
                'address2': val.address2,
                'city': val.city,
                'state': val.state,
                'zip': val.zip
            });

        });

    });
} 
```

给我这个错误 Uncaught TypeError: Cannot call method 'split' of undefined

当我尝试访问这样的数据时：

```
$(document).ready(function () {
    $('.vendor_address_select').change(function () {

        var selectedAddress = $('option:selected', this);
        console.log(selectedAddress.data());

    });
}); 
```

我如何滥用 jquery 的`data()`？

模板文件：

```
<% for ( var i = 0 in o ) { %>
<option id="vendor_address_id_<%=o[i].id%>">
<%=o[i].vendor_name%></option>
<% } %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T21:47:33.500

`.data()`像这样使用时必须指定键“地址”

```
$(document).ready(function () {
    $('.vendor_address_select').change(function () {

        var selectedAddress = $('option:selected', this);
        console.log(selectedAddress.data('address'));

    });
}); 
```

# twig - 树枝模板目录

> ID：13298362
> 
> 赞同：0
> 
> 时间：2012-11-08T21:45:50.300
> 
> 标签：twig

我是 Twig 的新手，想知道应该将 Twig /templates 目录放在哪里。

我正在使用**composer**并将 /templates 放在 index.php 所在的根目录中，它给了我以下错误消息：

```
Message: The "/templates" directory does not exist.
File:   /home/teo/SERVER/public_html/JSON_FOLDER/JSON2/vendor/twig/twig/lib/Twig/Loader/Filesystem.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:51:28.433

通常，您将其放在 Web 根目录以外的任何位置，这是最佳做法。但是，如果您无法访问其他任何地方，则必须使用 Web 根。

我对作曲家并不完全熟悉，但您可能希望指定一个相对于您的 Web 目录的路径，而不是像您已经完成的那样的绝对目录。该错误表明它试图在您的服务器 ROOT 目录中找到一个模板路径，而该路径几乎永远不会是您真正想要的位置。尝试只删除配置中的前导斜杠。

# php - 使用 Code igniter 设置多功能电子邮件

> ID：13298363
> 
> 赞同：-1
> 
> 时间：2012-11-08T21:45:51.343
> 
> 标签：php, codeigniter, email

我有一个内置在 CodeIgniter 中的应用程序。对于以下与电子邮件相关的任务，我需要一些帮助。请注意，所有电子邮件都需要 SSL。

1) 发送电子邮件以祝贺并欢迎用户访问该站点 2) 如果用户选择离开，发送电子邮件以确认用户帐户已被删除。3) 发送电子邮件以提醒用户其他用户向他们发送的请求。4）设置并发送电子邮件“忘记用户名”，最后但并非最不重要 5）发送电子邮件以重置密码，以防用户不记得如何登录。

感谢您的帮助，不胜感激。

函数注册（）{

```
$data = array(
'sign_up_mail'=>'Welcome and thanks for joining...'
);

$htmlMessage =  $this->parser->parse('user/email/signup_html', $data, true);
$txtMessage = $this->parser->parse('user/email/signup_txt',  $data, true);

#send the message
$this->email->from('test@gmail.com', 'test app');
$this->email->to($this->input->post('email_address'));
$this->email->subject('Account Registration');
$this->email->message($htmlMessage);
$this->email->alt_message($txtMessage);
$this->email->send(); 
```

}

您会使用下面列出的方法来更改各种电子邮件中的消息吗？data['message'] = "嘿，你有一个追随者请求！"; $email = $this->load->view('email/template', $data, TRUE);

我认为这种方法适用于用户欢迎和警报等简单的事情。我将如何连接进程以重置用户名/密码或确认删除？您如何将电子邮件进程与数据库中的数据操作联系起来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T08:55:55.187

根据您的问题，我认为您正在寻找某种与身份验证相关的任务。如果是这样，那么在 codeigniter 中有一个身份验证库，它提供了完整的身份验证系统。看看吧，对你有用。[http://konyukhov.com/soft/tank_auth/](http://konyukhov.com/soft/tank_auth/)

# c++ - 如何调试附加到 .exe 的代码

> ID：13298364
> 
> 赞同：0
> 
> 时间：2012-11-08T21:45:51.687
> 
> 标签：c++, debugging, adobe-indesign

我正在为 InDesign CS5.5 开发一个插件。而且，在开发插件时，如果您没有正在开发的程序的调试版本（在我的例子中，indesign），您将无法真正调试。我试图从 adobe 获取调试版本，但没有成功。官僚主义多。

所以我的问题是：有没有办法附加调试器（或其他东西），以便我可以看到代码的去向？

我真的厌倦了输入“MessageBox”。

提前致谢。

对于indesign插件开发，顺便使用c++。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T21:53:09.403

如果您的插件是动态加载的 dll，您可以将 Visual Studio 附加到进程、设置断点并单步执行您的 dll 代码。要附加到现有进程，只需转到调试 -> 附加到现有进程，或尝试使用快捷方式`Ctrl+Alp+P`IIRC。

# android - 我真的需要将上下文实例传递到应用程序深处吗？

> ID：13298365
> 
> 赞同：13
> 
> 时间：2012-11-08T21:45:59.643
> 
> 标签：android, architecture, android-activity, android-context

在应用程序的某个地方，我需要使用 getString 方法获取本地化字符串以获取错误消息。为此，我需要一个 Context 实例，例如从一个 Activity 中获取。这真的是这样设计的吗？我真的被迫将这些对象传递到类和方法中，还是我错过了重点，还有其他方法可以获得字符串引用吗？

澄清一下，在一个 Activity 中，我有一个内部 AsyncTask 子类，它在 doInBackground 中为 UI 线程之外的一些短网络处理实例化一个新类。我希望将错误消息本地化，为此我需要将 Context 实例（换句话说，Activity）传递给该类。从 XML 文件中获取价值资源的设计似乎有点不直观。这让我想知道为什么它与 Context 实例如此耦合在一起，而不是静态的，或者 - 原谅我 - 一个单例，因为 Context 暗示它是全局应用程序上下文，而不仅仅是它的一部分，如 Activity。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T22:00:16.313

不，你不应该这样做。一个简单的规则是；如果您需要的上下文是触摸 UI 或仅与活动类的内部相关联，那么您应该使用活动上下文。即便如此，重要的是对上下文的任何引用都不具有大于活动的生命周期。

不遵循这一点的最大危险是您将对活动上下文的引用传递到代码中更深的地方，并且您的活动被破坏，而您所持有的引用仍在范围内。您刚刚泄露了您的活动以及它所引用的所有内容。我建议不要将活动上下文传递到活动之外，除非真的必要，即使那样，也要确保控制生命周期。

因此，与 UI 无关的内容需要上下文，例如您需要获取字符串资源，然后使用应用程序上下文。在活动内部，并且在活动中声明了字符串引用，那么使用活动上下文是可以接受的，并且在我看来，这是首选，因为您正在就范围和生命周期做出有意识的决定。

也就是说，您应该询问这种特定方法是否更适合放在活动中。很可能不是，但请问问自己。

最后，一个小小的迂腐点。您不会在任何地方传递对象。你传递一个引用，实际上是一个对对象的引用的值。Java 中的所有内容都是按值传递的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:04:27.127

您总是可以扩展应用程序类。在那里为 getInstace() 创建一个静态方法来获取上下文。

# jquery - 在页面加载时，使用 jQuery 淡入淡出一个又一个 div

> ID：13298367
> 
> 赞同：2
> 
> 时间：2012-11-08T21:46:07.210
> 
> 标签：jquery, web, jquery-animate, fadein, fadeout

我正在制作一个我的个人网站，我想做的是一个简单的动画。

这是代码：

```
<div class="wrapper">--- Main website body ---</div>
<div class="intro1">
    <div class="name1">John</div>
    <div class="name2">Doe</div>
</div>
<div class="intro2">
    <div class="prof1">Designer</div>
    <div class="prof2">Developer</div>
</div>​

<style>
    body {background: rgba(0,0,0,1); margin: 0px; padding: 0px; color: rgba(255,255,255,1); }
    .wrapper {width:100%; height:100%; max-height: 100%; background: rgba(0,0,0,1); display: none;}
    .intro1 {width: 500px; height: 150px; margin: 40% auto 0% auto; padding: 0px; display: none;}
    .intro2 {width: 500px; height: 150px; margin: 40% auto 0% auto; padding: 0px; display: none;}
</style>

$(function() {
    $('.intro1').fadeIn(1000).fadeOut(1000);
    $(function() {
        $('.intro2').fadeIn(1000).fadeOut(1000);
    });
});​ 
```

以下是应该发生的事情的细分：

1.  页面加载简单的黑色背景
2.  Div (.intro1) 慢慢淡入，可能从顶部滑入并向下滑动
3.  Div (.intro1) 慢慢淡出，可能向下滑动，然后完全移除元素
4.  Div (.intro2) 慢慢淡入，可能从顶部滑入并向下滑动
5.  Div (.intro2) 慢慢淡出，可能向下滑动，然后完全移除元素
6.  Div (.wrapper) 慢慢淡入

这就是我到目前为止所拥有的，我不确定下一步我需要做什么。

这是链接：http: [//jsfiddle.net/gVp7m/](http://jsfiddle.net/gVp7m/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:50:42.487

尝试这个：

```
$(function() {
    $('.intro1').fadeIn(1000).fadeOut(1000, function(){
       $('.intro2').fadeIn(1000).fadeOut(1000);
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:04:19.393

很简单，在第一个动画完成后使用回调函数触发下一个动画:)

[**小提琴**](http://jsfiddle.net/videsignz/gVp7m/2/)

```
$(function() {

$('.intro1').fadeIn(1000).fadeOut(1000, function() {

    $('.intro2').fadeIn(1000).fadeOut(1000, function() {

        $('.wrapper').fadeIn(1000);

    });

}); 
```

});

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T22:17:14.410

像这样的东西怎么样：

# [jsFiddle - 会这样吗？](http://jsfiddle.net/SpYk3/fYEka/)

如果需要更多解释，请告诉我。我把它分成几个空格，以便于阅读。

> CSS

```
body {background: rgba(0,0,0,1); margin: 0px; padding: 0px; color: rgba(255,255,255,1); }
#Splash { position: fixed; top:0; left: 0; height: 100%; width: 100%; background: black; }
.wrapper {width:100%; height:100%; max-height: 100%; background: rgba(0,0,0,1); }
.intro1 {  }
.intro1 div { position: absolute; bottom: .5em; opacity: 0; }
.intro1 .name1 { left: .5em; }
.intro1 .name2 { right: .5em; }
.intro2 {  }
.intro2 div { position: absolute; opacity: 0; }
.intro2 .prof1 { left: 40%; }
.intro2 .prof2 { right: 40%; } 
```

> 脚本

```
$(".intro1 div").animate({ opacity: 1 }, 2000);

$(".intro1 .name1").animate({
    left: "40%",
    top: ".5em"
}, 3000);
$(".intro1 .name2").animate({
    left: "60%",
    top: ".5em"
}, 3000);

$(".intro1 div").animate({ opacity: 0 }, 2000, function(e) {
    $(".intro2 div").animate({ opacity: 1 }, 2000);

    $(".intro2 .prof1").animate({
        left: ".5em",
        bottom: ".5em"
    }, 3000);
    $(".intro2 .prof2").animate({
        right: ".5em",
        bottom: ".5em"
    }, 3000);

    $(".intro2 div").animate({ opacity: 0 }, 2000, function(e) {
        $("#Splash div").hide();
        $("#Splash").fadeOut(3000);
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T21:56:48.250

例如，您可以这样做。
它看起来比实际上更复杂

```
$(function() {
    function showIntro(nr){
        $('.intro'+nr).css({
            'margin-top':'20%',
            'display':'block',
            'opacity':0})
            .animate({
                'margin-top':'40%',
                'opacity':1},2000,function(){

                $(this).delay(1000).animate({
                    'margin-top':'60%',
                    'opacity':0},2000,function(){

                        $(this).remove();
                        if(nr==1){
                            showIntro(2);
                        }else if(nr==2){
                            $('.wrapper').fadeIn(2000);
                        }
                });          
        });
    };

    showIntro(1);
});​ 
```

**演示：http:**
[//jsfiddle.net/gVp7m/4/](http://jsfiddle.net/gVp7m/4/)

# python - 使用 python 和 quickdraw 绘制直方图

> ID：13298375
> 
> 赞同：2
> 
> 时间：2012-11-08T21:46:47.127
> 
> 标签：python, quickdraw

我需要帮助编写一个程序，该程序从文本文件中读取大约 300 行，并从特定作业（A1 列）中获取成绩，然后使用该作业的成绩在 quickdraw 中绘制直方图。

```
ID , Last,  First, Lecture, Tutorial, A1, A2, A3, A4, A5
8959079, Moore, Maria, L01, T03, 9.0, 8.5, 8.5, 10.0, 8.5
4295498, Taylor, John, L00, T04, 10.0, 6.5, 8.5, 9.5, 7.0
9326386, Taylor, David, L00, T00, 9.5, 8.0, 8.0, 9.0, 10.0
7223234, Taylor, James, L01, T03, 8.5, 5.5, 10.0, 0.0, 0.5
7547838, Miller, Robert, L01, T09, 7.0, 8.0, 8.5, 10.0, 0.5
0313453, Lee, James, L01, T01, 10.0, 0.5, 8.0, 7.0, 5.0
3544072, Lee, Helen, L00, T03, 10.0, 9.0, 7.0, 9.0, 8.5 
```

到目前为止，我有一个代码可以从文件（A1）中提取成绩并将其放入一个列表中，然后创建另一个代码来计算某个成绩的出现次数。我现在无法使用此列表并将其输入到 quickdraw 以绘制直方图？

```
def file(): 
  file = open('sample_input_1.txt', 'r') 
  col = [] data = file.readlines() 
  for i in range(1,len(data)-1): 
    col.append(int(float(data[i].split(',')[5]))) 
  return col 

def hist(col):   
  grades = [] 
  for i in range(11): 
    grades.append(0) 
  for i in (col): 
    grades[i] += 1   
  return grades 

col = file() 
grades = hist(col) 
print(col) 
print(grades) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T09:15:27.117

[Quickdraw](http://pages.cpsc.ucalgary.ca/QuickDraw/docs/index.html)不支持开箱即用的绘制图形，所有的矩形、网格、文本都必须自己映射。更好的方法是使用已经存在的 python 库。不要试图重新发明轮子。

**示例 1 快速绘图解决方案**

```
#!/bin/python 

# Quickdraw histogram: 
# Assume max grade is 10

A1 = [9.0,10.0,9.5,8.5,7.0,10.0,10.0]

histogram = []
for i in sorted(set(A1)): histogram.append([int(i*50),A1.count(i)])

gridsize = 500
griddiv = 20
topleft = 50

#graph title
print 'text', '"','Histogram of Grades','"', 220, 25

#x axis title
for i in range(1,21):
    print 'text', '"',float(i)/2,'"', (i+1)*25, 570

#y axix title
for i in range(0,11):
    print 'text', '"',i,'"', 25, 600-(i+1)*50

#grid
print 'grid', topleft, topleft, gridsize, gridsize, griddiv, griddiv

#chart rectangles 
print 'color 140 0 0'
for i in histogram:
    print 'fillrect',i[0]-25+topleft, gridsize-(50*i[1])+topleft,gridsize/griddiv,50*i[1],'b'+str(i[0])
    print 'fillrect', 'color','b'+str(i[0]) 
```

这是运行后图表的样子，`histogram.py | java -jar quickdraw.jar`它并不漂亮！

![在此处输入图像描述](../Images/bd23cf59fef4087a23744e3eff92e72a.png)

这个解决方案真的很可怕。代码本质上是混乱的（我当然可以做很多事情来提高可读性和灵活性，但无论如何它证明了这个概念）。无法进行缩放，您将需要 300 名学生记录，每个年级的计数将大于 10。更不用说它看起来很糟糕。它可以改进，例如通过在每个矩形周围画白线将是一个小的改进，但您需要进行所有计算。

* * *

**示例 2 MATPLOTLIB 解决方案**

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.mlab as mlab

# You already have A1 from the file in a list like this:
A1 = [9.0,10.0,9.5,8.5,7.0,10.0,10.0]

#Set up infomation about histogram and plot using A1
fig = plt.figure()
ax = fig.add_subplot(111)
ax.hist(A1, 12,facecolor='red')
ax.set_title('Grade Histogram')
ax.set_xlabel('Grade')
ax.set_ylabel('Count')
ax.set_xlim(min(A1)-0.5, max(A1)+0.5)
ax.set_ylim(0, max([A1.count(i) for i in sorted(set(A1))])+0.5)
ax.grid(True)
plt.show() 
```

输出：

![在此处输入图像描述](../Images/fc8f114eeba2681bab896017a2f5a4db.png)

这是最好的解决方案，可以处理缩放并且图形看起来很棒。

* * *

**示例 3 简单 CLI**

我什至会退后一步，做一个简单的 CLI 版本，在你不能走路之前不要尝试跑步。

```
A1 = [9.0,10.0,9.5,8.5,7.0,10.0,10.0]

upper =2*int(max(A1))+1
lower =2*int(min(A1))-1

for i in [x * 0.5 for x in range(lower,upper)]:
    print i,'\t|' ,'*'*A1.count(i) 
```

输出：

```
Grade Histogram
6.5     | 
7.0     | *
7.5     | 
8.0     | 
8.5     | *
9.0     | *
9.5     | *
10.0    | *** 
```

这个解决方案对于初学者程序员来说是一个很好的开始！它简单、干净，甚至缩放都不成问题（如果条形变长，只需增加终端窗口的宽度）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:39:48.640

这让你怎么走？

```
s = """ID , Last,  First, Lecture, Tutorial, A1, A2, A3, A4, A5
8959079, Moore, Maria, L01, T03, 9.0, 8.5, 8.5, 10.0, 8.5
4295498, Taylor, John, L00, T04, 10.0, 6.5, 8.5, 9.5, 7.0
9326386, Taylor, David, L00, T00, 9.5, 8.0, 8.0, 9.0, 10.0
7223234, Taylor, James, L01, T03, 8.5, 5.5, 10.0, 0.0, 0.5
7547838, Miller, Robert, L01, T09, 7.0, 8.0, 8.5, 10.0, 0.5
0313453, Lee, James, L01, T01, 10.0, 0.5, 8.0, 7.0, 5.0
3544072, Lee, Helen, L00, T03, 10.0, 9.0, 7.0, 9.0, 8.5"""

from StringIO import StringIO

c = StringIO(s)
a = loadtxt(c, delimiter=',', dtype='S8')
A1 = a[1:, 5].astype('float32')
print A1
hist(A1, bins=10) 
```

输出：

```
[  9\.   10\.    9.5   8.5   7\.   10\.   10\. ]
Out[81]:
(array([1, 0, 0, 0, 0, 1, 1, 0, 1, 3]),
 array([  7\. ,   7.3,   7.6,   7.9,   8.2,   8.5,   8.8,   9.1,   9.4,
         9.7,  10\. ]), 
```

![在此处输入图像描述](../Images/e96697a0b1fb00cb966c2c826de7e3c7.png)

第一个列表是 A1 的输出，我在其中做了一些处理以将浮点数传递给`hist`. `hist`是一个 matplotlib 函数，分别打印直方图值和边缘。

# java - JApplet 包含一个框架，还是单独的 JApplet？

> ID：13298380
> 
> 赞同：0
> 
> 时间：2012-11-08T21:46:53.277
> 
> 标签：java, swing, user-interface, awt, japplet

我有这个项目需要发布，但不知道哪种方式最好。有人可以帮我吗。

我有一个 Gui 应用程序（Jframe）。在那里，我有一个 Jpanel，其中包含一些动画（实现可运行）。所以在我的主要方法中，我会先调用构造函数，所以一切都显示得很好，然后调用 Runner.start()。（线）

所以基本上 gui 弹出然后动画发生，具体来说，动画只是我的程序的标题滑入。

现在我想把它放在网站上，以便我的学生可以使用。我不想使用 java web start，我希望它充当一个小程序。

那么我要把这个jframe放到我的applet中吗？还是我应该将整个事情从 jframe 转换为 japplet？这个小程序需要实现Runnable吗？

让我烦恼的是 Japplet 没有 main 方法，那么我怎样才能指定我的 Jpanel 何时可以执行它的动画呢？我希望动画在所有内容都加载到屏幕上之后发生，而不是之前。

我想把它作为 init() 方法的最后一条语句？如果我错了，请纠正我。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T23:51:51.910

> 我有一个 Gui 应用程序（Jframe）。..我想把这个放在网站上，以便我的学生可以使用。

虽然可以将框架转换为小程序，但更好的选择是使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)从链接启动框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T00:14:37.307

你可以同时做：

## 主界面

```
import java.awt.BorderLayout;
import javax.swing.*;
public class MainGui extends JPanel {
    public MainGui() {
        this(null);
    } 
    public MainGui(MyJApplet applet) {
        this.applet = applet;
        if (!isApplet()) {
            frame = new JFrame();
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        } else
            frame = null;
        setLayout(new BorderLayout());
        // setPreferredSize(new Dimension(640, 480));
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                MainGui.this.run();
            }
        });
    }
    String title() {
        return "Title";
    }
    public void addContent() {
        add(new JLabel("add content! top"));
    }
    void run() {
        if (isApplet()) addContent();
        else {
            frame.setTitle(title());
            frame.getContentPane().add(this, BorderLayout.CENTER);
            addContent();
            frame.pack();
            System.out.println(getSize());
            frame.setVisible(true);
        }
    }
    boolean isApplet() {
        return applet != null;
    }
    public static void main(String[] args) {
        new MainGui(null);
    }
    protected final JFrame frame;
    protected final MyJApplet applet;
    private static final long serialVersionUID = 1;
} 
```

## MyJApplet

```
import java.awt.BorderLayout;
import javax.swing.JApplet;
public class MyJApplet extends JApplet {
    public void start() {

    }
    public void init() {
        getContentPane().setLayout(new BorderLayout());
        addContent();
    }
    public void addContent() {
        getContentPane().add(new MainGui(this), BorderLayout.CENTER);
    }
    public static void main(String[] args) {
        new MainGui(null);
    }
    private static final long serialVersionUID = 1;
} 
```

# excel - 在指定的时间内将控制权传递给用户

> ID：13298383
> 
> 赞同：0
> 
> 时间：2012-11-08T21:47:04.630
> 
> 标签：excel, vba

如果可执行文件可用，我有一个运行命令提示符的宏。在检查可执行文件是否可用之前，宏会等待 5 分钟。问题是这个锁很出色。我更愿意做的是将控制权交还给用户五分钟。

这就是这段代码目前的样子。

```
Do Until TuflowEx < Range("Exe").Value ' Check if number of executables running is less than the user specified maximum
    Application.Wait (Now + TimeValue("0:05:00")) ' Wait 5 minutes before checking again
    TuflowEx = TuEx() ' Run TuEx to get the currently active number of executables
Loop 
```

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:58:10.603

请改用[Application.Ontime](http://msdn.microsoft.com/en-us/library/office/ff196165.aspx)。

只需创建一个例程来进行检查，如果检查成功，让它恢复你的逻辑。

```
Sub ChecktuflowEx()
    If TuEx() => Range("Exe").Value Then
        'whatever you want
    Else
        'Check again in 5 minutes.
        Application.OnTime Now + TimeValue("0:05:00"), "ChecktuflowEx"
    End If
End Sub 
```

# c# - 将 WorkflowApplication 与 WorkflowIdentity 一起使用时，InstanceStore WaitForEvents 不会触发

> ID：13298384
> 
> 赞同：2
> 
> 时间：2012-11-08T21:47:06.663
> 
> 标签：c#, workflow

我在微软论坛上发布了这个问题，但想在这里发布以增加曝光度。我到处寻找一个例子，说明我没有运气。

[http://social.msdn.microsoft.com/Forums/en-US/wfprerelease/thread/8a424c0b-44f8-4670-8d64-9c7142117b55](http://social.msdn.microsoft.com/Forums/en-US/wfprerelease/thread/8a424c0b-44f8-4670-8d64-9c7142117b55)

基本上，我想使用 WorkflowApplication 以及 WorkflowIdentity 和持久性存储来完成持久延迟。我使用 WorkflowApplication 是因为我们有数百个需要动态运行的工作流，因此 WorkflowServiceHost 在我们的场景中并不真正可行。

我使用 Microsoft 提供的示例 AbsoluteDelay 作为起点，它运行良好。当我尝试将 WorkflowIdentity 传递给 WorkflowApplication 的构造函数时，问题就出现了。

然后，InstanceStore 上的 WaitForEvents 事件不会触发，因为它需要默认身份 (id 1)，而不是我的新身份 (id 2)。store.Execute 行在 IdentityOwnerTable 中创建了一条记录，其中 SurrogateIdentityId 设置为 1，而不是我的身份 id。

如何告诉 InstanceStore 使用我的新身份而不是默认身份？似乎它是可以在 CreateWorkflowOwnerCommand 元数据中传递的东西。

```
// Create the InstanceStore
SqlWorkflowInstanceStore store = new SqlWorkflowInstanceStore(_workflowDB);

// A well known property that is needed by WorkflowApplication and the InstanceStore
private static readonly XName _workflowHostTypePropertyName = XNamespace.Get("urn:schemas-microsoft-com:System.Activities/4.0/properties").GetName("WorkflowHostType");

// Create the XName for the workflow using the workflow's unique name
XName wfHostTypeName = XName.Get(workflowName);

// Configure a Default Owner for the instance store so instances can be re-loaded from WorkflowApplication
private static InstanceHandle CreateInstanceStoreOwner(InstanceStore store, XName wfHostTypeName)
{
    InstanceHandle ownerHandle = store.CreateInstanceHandle();
    CreateWorkflowOwnerWithIdentityCommand ownerCommand = new CreateWorkflowOwnerWithIdentityCommand()
    { //changed from CreateWorkflowOwnerCommand (did not fix problem)
        InstanceOwnerMetadata =
        {
            { _workflowHostTypePropertyName, new InstanceValue(wfHostTypeName) },
            // Something here to identify the WorkflowIdentity ??
        }
    };
    store.DefaultInstanceOwner = store.Execute(ownerHandle, ownerCommand, TimeSpan.FromSeconds(30)).InstanceOwner;
    return ownerHandle;
}

private static void WaitForRunnableInstance(InstanceStore store, InstanceHandle ownerHandle)
{
    // Only fires when using default Identity
    IEnumerable<InstancePersistenceEvent> events = store.WaitForEvents(ownerHandle, TimeSpan.MaxValue);
    bool foundRunnable = false;
    // Loop through the persistence events looking for the HasRunnableWorkflow event (in this sample, it corresponds with
    // the workflow instance whose timer has expired and is ready to be resumed by the host). 
    foreach (InstancePersistenceEvent persistenceEvent in events)
    {
         if (persistenceEvent.Equals(HasRunnableWorkflowEvent.Value))
         {
             foundRunnable = true;
             break;
         }
    }
    if (!foundRunnable)
    {
        throw new ApplicationException("Unexpected: No runnable instances found in the instance store");
     }
} 
```

# multithreading - 绘制事件不是由 gdk_window_invalidate_rect 发送的

> ID：13298385
> 
> 赞同：3
> 
> 时间：2012-11-08T21:47:07.803
> 
> 标签：multithreading, animation, gtk, draw, cairo

我想在 GTK+ 窗口上使用 Cairo 显示模拟战场上的当前情况。我的应用程序必须使用提供的框架，该框架在自己的主循环中运行。所以，我不能`gtk_main`在主线程中调用，必须在单独的线程中启动 GTK+ 主运行循环：

```
...
g_thread_init(NULL);
g_thread_create(gui_main_loop, data, FALSE, NULL);
...

...
gpointer gui_main_loop(gpointer data)
{
...
    gdk_threads_init();
    gdk_threads_enter();
...
    // Here I make my cute UI
...
    gtk_main();
    gdk_threads_leave();
...
}
... 
```

我已将处理程序附加到我的绘图区域的“绘图”事件：

```
...
gboolean rendering(GtkWidget *widget, cairo_t *c, gpointer data)
{
    // Here I render my UI using cairo.
    return TRUE;
}
...
// I call this function before gtk_main
g_signal_connect(G_OBJECT(drawing_area), "draw", G_CALLBACK(rendering), data);
... 
```

因此，我的 GTK+ 窗口位于另一个线程中，并且每次调整窗口大小时都会重新绘制。但我需要每秒更新几次，以便监控战场上的当前情况。在每次迭代中，我从主线程调用 invalidate 函数：

```
...
gdk_window_invalidate_rect(gtk_widget_get_window(drawing_area), NULL, true);
... 
```

但在几秒钟内，用户界面冻结。它对窗口调整大小作出反应，但忽略 gdk_window_invalidate_rect 调用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:31:21.997

您是否尝试过在您的通话中添加`gdk_threads_enter`/ ？`gdk_threads_leave``gdk_window_invalidate_rect`

你也最好使用[`gtk_widget_queue_draw`](http://developer.gnome.org/gtk3/stable/GtkWidget.html#gtk-widget-queue-draw)而不是`gdk_window_invalidate_rect`. 但请记住，您需要确保“渲染”回调足够快。你应该测量它。如果您不需要每次都重新绘制完整图像，则在 cairo 中使用剪裁或使用[`gtk_widget_queue_draw_area`](http://developer.gnome.org/gtk3/stable/GtkWidget.html#gtk-widget-queue-draw-area)代替将有助于提高性能。`gtk_widget_queue_draw`

# asp.net - Asp.Net UpdateProgress 控件可重复使用

> ID：13298390
> 
> 赞同：0
> 
> 时间：2012-11-08T21:47:31.683
> 
> 标签：asp.net, user-controls

我在我的页面上使用 asp:UpdateProgress 控件，并希望在多个页面上使用相同的控件，但不复制和粘贴代码。我无法通过将面板粘贴到用户控件中并将用户控件拖放到页面上来使其工作。但我不熟悉用户控件，所以希望它很简单。

**UserControl .ascx 文件内容**

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="AjaxProgressLoader.ascx.cs" Inherits="MyNamespace.Controls.AjaxProgressLoader" %>
    <asp:UpdateProgress runat="server" ID="PageUpdateProgress">
    <ProgressTemplate>
        <div id="Imgt" style="position: absolute; left: 0; top: 0; width: 100%; height: 100%;"
            align="center" valign="middle" runat="server" class="blur">
            <table width="100%">
                <tr>
                    <td>
                        <img src="/Styles/Images/ajax_loader.gif" style="position: relative; horiz-align: center;
                            vert-align: middle; margin-top: 100px" width="75px" />
                    </td>
                </tr>
                <tr>
                    <td style="color: #FFFFFF">
                        Loading...
                    </td>
                </tr>
            </table>
        </div>
    </ProgressTemplate>
</asp:UpdateProgress> 
```

**.aspx 主页面**

```
<%@ Register TagPrefix="ajax" TagName="AjaxUpdateProgress" Src="~/Controls/AjaxProgressLoader.ascx" %>
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
<asp:ScriptManager ID="uxScriptManager" runat="server"></asp:ScriptManager>
<ajax:AjaxUpdateProgress ></ajax:AjaxUpdateProgress>
<asp:UpdatePanel runat="server" ID="Panel">
<ContentTemplate>
My Content...
</ContentTemplate>
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:53:31.403

解决方案：我的用户控件进度模板上缺少 AssociatedUpdatePanelId。我可以将其定义如下并将我的所有面板称为“面板”。

```
 <asp:UpdateProgress runat="server" ID="PageUpdateProgress" AssociatedUpdatePanelID="Panel"> 
```

感谢此链接帮助我[在父页面中为 UpdatePanel 的用户控件中的 ASP.NET AJAX UpdateProgress](https://stackoverflow.com/questions/3193550/asp-net-ajax-updateprogress-in-user-control-for-updatepanel-in-parent-page)

# javascript - 点击别处

> ID：13298393
> 
> 赞同：0
> 
> 时间：2012-11-08T21:47:43.380
> 
> 标签：javascript, jquery

我有点击事件的问题。单击带有事件（单击）的另一个元素，与单击其他地方不一样。我想要激活一个元素或没有。

演示：http: [//jsfiddle.net/WP4RH/](http://jsfiddle.net/WP4RH/)

代码：

```
 $('span').click(function(){
     var $this = $(this);
     if($this.hasClass('active')){
        $this.removeClass('active')}
     else $this.addClass('active');

     $('div').click(function(){                        
        if (!$this.has(this).length) {                                 
             $this.removeClass('active');                            
        }          
     });
     return false;
   }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:50:06.090

`span`在事件处理程序的开头添加：

```
$('.active').removeClass('active'); 
```

[演示](http://jsfiddle.net/Wuy4V/)

这是假设您希望保留同一跨度上的多次点击`active`。如果您不希望这样，请告诉我，我可以修改代码。​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T21:52:02.170

对于初学者，您应该将 div 处理程序移到外部，然后`removeClass`基于 div 元素。

```
$('span').click(function(e) {
    e.stopPropagation();

    $(this).parent().find('span').removeClass('active');   
    $(this).toggleClass('active');
});

$('div').click(function() {
    $(this).find('span').removeClass('active');
}); 
```

**演示：http:** [//jsfiddle.net/WP4RH/1/](http://jsfiddle.net/WP4RH/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T21:51:58.787

如果您想在单击本身时保留关闭功能`span`，则可以使用以下内容。*另外，请注意，每次单击跨度时*，您都会绑定一个事件处理程序。

[http://jsfiddle.net/WP4RH/7/](http://jsfiddle.net/WP4RH/7/)

```
$("span").click(function() {
    $(this).siblings("span").removeClass("active");  // remove from other spans
    $(this).toggleClass("active");  // toggle this span
    return false;
});
​
$("div").click(function() {
    $(this).find("span").removeClass("active");  // remove from all spans
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T21:53:33.793

不要在单击处理程序内绑定单击处理程序，只需检查目标是单击处理程序内的 div 还是 span。此外，将`active`类添加到时`this`，只需在任何同级 span 上将其删除：

```
$('span').on('click', function(){
    $(this).toggleClass('active').siblings('span').removeClass('active');
});

$('div').on('click', function(e){                        
    if (e.target == this) $('span').removeClass('active');                            
}); 
```

[**小提琴**](http://jsfiddle.net/WP4RH/8/) ​</p>

# javascript - WebGL，负比例正常

> ID：13298396
> 
> 赞同：2
> 
> 时间：2012-11-08T21:47:45.790
> 
> 标签：javascript, webgl

我尝试在某些模型上渲染灯光。所有模型都有一些独特的选项（比例、位置、旋转）。我创建了一个包含所有这些选项的矩阵，并从此矩阵更改所有模型的顶点。

当模型的比例为负时，我遇到了一个大问题，法线反转并且看起来不应该。

![在此处输入图像描述](../Images/ff606b5247509a49ab419afbdd066f0e.png)

这是我使用的代码：

```
vec3.calcNormal = function( a, b, c, dest ) {
    var v1 = dest || vec3.create(), v2 = vec3.create();
    vec3.subtract( c, b, v1 );
    vec3.subtract( a, b, v2 );
    vec3.cross( v1, v2 );
    return vec3.normalize(v1);
}; 
```

* * *

```
// Apply matrix on vertices
size  = vertices.length;
vert  = new Array(size);
for( i=0; i<size; ++i ) {
    vert[i] = vec3.create();
    mat4.multiplyVec3(  matrix, vertices[i],  vert[i] );
}

// Generate face normals
face_normal    = new Array(faces.length);
for ( i=0, count=faces.length; i<count; ++i ) {
    face           = faces[i];
    face_normal[i] = vec3.create();

    vec3.calcNormal(
        vert[ face.vertidx[0] ],
        vert[ face.vertidx[1] ],
        vert[ face.vertidx[2] ],
        face_normal[i]
    );
} 
```

有人知道如何解决这个问题吗？我试图缩小正常规模或根本不扩大规模，但没有奏效。

**固定：**

```
// Get normal matrix
mat3.transpose( mat4.toInverseMat3(matrix), normalMat );

// Apply matrix on vertices
size  = vertices.length;
vert  = new Array(size);
for( i=0; i<size; ++i ) {
    vert[i] = vec3.create();
    mat4.multiplyVec3(  matrix, vertices[i],  vert[i] );
}

// Generate face normals
face_normal    = new Array(faces.length);
for ( i=0, count=faces.length; i<count; ++i ) {
    face           = faces[i];
    face_normal[i] = vec3.create();

    vec3.calcNormal(
        vertices[ face.vertidx[0] ],
        vertices[ face.vertidx[1] ],
        vertices[ face.vertidx[2] ],
        face_normal[i]
    );

    mat3.multiplyVec3( normalMat, face_normal[i] );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T07:40:06.243

负比例值将翻转您的几何体：[demo](http://www.html5rocks.com/en/tutorials/webgl/webgl_transforms/webgl/webgl-2d-geometry-scale.html) From [here](http://www.html5rocks.com/en/tutorials/webgl/webgl_transforms/#toc-scale)。如果你需要缩小它，你应该使用分数值。

# google-app-engine - AppEngine 是否支持 OAuth 2.0？

> ID：13298399
> 
> 赞同：0
> 
> 时间：2012-11-08T21:47:56.647
> 
> 标签：google-app-engine, oauth-2.0

Google AppEngine 是否支持 OAuth 2.0？如果是这样，你能推荐一个好的教程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:00:07.597

简短的回答是肯定的，他们正在将访问他们的 API 以使用 2.0。我还没有遇到任何很棒的教程，但谷歌正在为此建立他们的文档。他们确实有非 App Engine 内容的代码示例。

[https://developers.google.com/accounts/docs/OAuth2](https://developers.google.com/accounts/docs/OAuth2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T18:46:44.353

对于 Google API，有以下库：

*   [Python](http://code.google.com/p/google-api-python-client/)
*   [爪哇](http://code.google.com/p/google-api-java-client/)
*   [去](http://code.google.com/p/google-api-go-client/)

您可以在 App Engine 上使用 OAuth 2.0 访问 Google API。Python 和 Java 库构建在支持 OAuth 2.0 功能的通用库之上，因此，如果您正在访问非 Google API，这可能会有所帮助。可能还有其他 API 平台的库，但您的里程可能会有所不同。

# php - 将选项传递给 jquery 文件的正确方法是什么？

> ID：13298400
> 
> 赞同：4
> 
> 时间：2012-11-08T21:47:58.083
> 
> 标签：php, javascript, jquery, wordpress, variables

在我的主题的每一页上，用户都可以选择添加滑块。当他们这样做时，他们可以为滑块选择多个设置。这包括诸如幻灯片在更改之前将暂停多长时间、幻灯片在更改时转换需要多长时间以及它使用什么类型的转换等内容。

现在，如果我只是硬编码而不让用户选择滑块的选项，代码将如下所示：

```
<script>
jQuery(function(){

    jQuery('#camera_wrap_3').camera({
        height: '40%',
        thumbnails: true,
        time: 3500,
        fx: 'scrollBottom',
        transPeriod: 1200,
        autoAdvance: true,
        minHeight: '50px',
        mobileNavHover: false,
    });
});
</script> 
```

将用户选择设置时创建的变量传递给上面的代码的正确方法是什么？

请记住，我希望能够使用 wp_enqueue 以正确的方式将该文件排入队列

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T23:48:06.800

我假设这与您关于将变量传递给的问题有关`wp_head`- 如果您想从插件存储参数，Wordpress 提供两种（如果您使用多站点，则为三种）方法，具体取决于您的参数范围。

如果它特定于页面/帖子，那么您应该使用**自定义字段 API**`postmeta`将参数存储在表中。您可以使用和获取它，其中true/false 取决于您想要一个值数组还是一个值 - 如果它类似于“宽度”，您可能会将其设置为. 更多信息在这里 - [http://codex.wordpress.org/Custom_Fields](http://codex.wordpress.org/Custom_Fields)。**`update_post_meta($post_id, $key, $data)``get_post_meta($post_id, $key, $single)``$single``true`**

 **如果它适用于整个站点，那么您将其存储在表中的**Options API**中，如果找不到则返回where并检索它，否则将返回. 最后一个仅适用于多站点的选项也是选项 API 的一部分，并且使用和。更多信息在这里 - [http://codex.wordpress.org/Options_API](http://codex.wordpress.org/Options_API)。`options``update_option($key, $data)``get_option($key, $default)``$default``$key``false``update_site_option($key, $data)``get_site_option($key, $default)`

管理自定义字段（以及通过高级功能提供的选项）的绝佳选择是[**Advanced Custom Fields**](http://wordpress.org/extend/plugins/advanced-custom-fields/)。

假设这是每个帖子/页面，并且您正在使用 ACF 设置值，那么您可以编写一个挂钩来`wp_head`将这些字段拉入您的 Javascript。您可以将其放入主题中的`functions.php`文件中，或者如果您希望在更改主题时保留它，您可以使用[**自定义函数插件**](http://justinsilver.com/technology/wordpress-plugins/wordpress-plugin-custom-functions-php/)。

```
// hooked to wp_head
function my_wp_head(){
    // get the current $post
    global $post;
    // get value or key "camera_time"
    $camera_time = get_post_meta($post->ID, "camera_time", true);

    // write result to javascript
    echo "<script>";
    echo "var cameraTime = {$camera_time};";
    // ... the rest of your javascript
    echo "</script>";
}
if (is_single()) // only include on single pages
    add_action( 'wp_head', 'my_wp_head' ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T21:56:01.930

您可以为此使用[扩展](http://api.jquery.com/jQuery.extend/)方法。

```
function foo (params) {
    //default values
    var settings = $.extend({
        'someKey': { k1: 'v1' },
        'otherKey':  'oTherValue'
    }, params);
     //use it 
    if (settings.someKey.k1 == 'v1') ...
    var bar = settings.otherKey;
} 
```

然后只需从您的代码中调用它

```
foo({someKey: {k1: 'v2'}, otherKey: 'bla' }); 
```

我使用这种方法创建了一个简单的 jQuery 插件。[一探究竟](https://github.com/sagivo/jQuery-Watermark)**

# java - Calendar.getInstance() 的奇怪问题

> ID：13298401
> 
> 赞同：4
> 
> 时间：2012-11-08T21:48:01.593
> 
> 标签：java, oracle

我正在尝试将当前时间戳存储在定义为 TIMESTAMP(6) 的 oracle 表字段中。我通过一个 setter 方法设置它，如下所示：

```
void org.samples.Invoice.setCreated(Calendar value) 
```

我正在使用 Calendar.getInstance() 设置字段。

```
Invoice inv = new Invoice();
inv.setCreated(Calendar.getInstance()); 
```

我看到插入的时间戳具有正确的日期，但时间始终设置为 00:00:00.0

你能告诉我我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:49:49.807

可能是其他一些代码正在调用`invoice.getCreated()`并将时间字段设置为零。即通过引用的副作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:26:00.117

来自评论中的答案。

> 可能是其他一些代码正在调用 invoice.getCreated() 并将时间文件设置为零。即可能是通过引用传递的副作用。
> – Pangea 11 月 8 日 22:02

# php - php mongodb - 无法让 upsert 工作

> ID：13298402
> 
> 赞同：5
> 
> 时间：2012-11-08T21:48:09.300
> 
> 标签：php, mongodb

我正在运行以下代码，它运行良好，如果不存在记录，它会创建一个新记录。我想要做的是修改这个查询，以便“v”字段也增加+1，但我没有任何运气。有人可以帮我吗？

```
 $result = $collection->update(
                array('k'=>md5(SITE_ID.'-'.$_SERVER['HTTP_X_FORWARDED_FOR'])),
                array('$set'=>
                    array(
                        'k'=>md5(SITE_ID.'-'.$_SERVER['HTTP_X_FORWARDED_FOR']),                                                                   'st'=>SITE_ID, 
                        'ur'=>$_GET['u'],                                                
                        'ts'=>time(),
                        'dt'=>date('Ymd'), 
                        'ur'=>$_GET['p'],
                        'v'=>1
                    ),
                    array(
                        '$inc' => array('v' => 1)
                    ),
                ),
                array('upsert'=>true)
            ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T21:59:34.190

将 the`$set`和 the`$inc`放在一个对象中：

```
$result = $collection->update(
    array('k'=>md5(SITE_ID.'-'.$_SERVER['HTTP_X_FORWARDED_FOR'])),
    array(
        '$set'=> array(
                'k'=>md5(SITE_ID.'-'.$_SERVER['HTTP_X_FORWARDED_FOR']),                                                                   'st'=>SITE_ID, 
                'ur'=>$_GET['u'],                                                
                'ts'=>time(),
                'dt'=>date('Ymd'), 
                'ur'=>$_GET['p']
            ),
        '$inc' => array('v' => 1)
    ),
    array('upsert'=>true)
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:51:34.947

您可以使用 $inc 修饰符 liek：

```
{ $inc : { field : value } } 
```

所以在你的情况下：

```
$result = $collection->update(
    array('k'=>md5(SITE_ID.'-'.$_SERVER['HTTP_X_FORWARDED_FOR'])),
    array('$set'=>
        array(
            'k'=>md5(SITE_ID.'-'.$_SERVER['HTTP_X_FORWARDED_FOR']),                                                                   'st'=>SITE_ID, 
            'ur'=>$_GET['u'],                                                
            'ts'=>time(),
            'dt'=>date('Ymd'), 
            'ur'=>$_GET['p'],
            array('$inc' => array('v' => 1))
        ),
    ),
    array('upsert'=>true)
); 
```

我刚刚看到您实际上正在使用该字段，尽管上面的示例应该可以工作。

这是 PHP 文档中的一个示例：http: [//php.net/manual/en/mongocollection.update.php#example-1470](http://php.net/manual/en/mongocollection.update.php#example-1470)

# asp.net-mvc - 当 SharePoint 首次登录时，使用相同 STS 的 SharePoint 2010 和 MVC 失败

> ID：13298404
> 
> 赞同：1
> 
> 时间：2012-11-08T21:48:13.647
> 
> 标签：asp.net-mvc, sharepoint

我有一个使用 Visual Studio 中的模板构建的自定义 STS。当我仅在 SharePoint 或仅在 MVC 中使用它时，它的效果很好。但是，如果我先登录 SharePoint，登录 MVC 站点时会收到以下消息。

ID4230：SecurityToken 格式不正确。期望元素名称“SecurityContextToken”，找到“SP”。

似乎 SharePoint 正在修改联合 cookie 并使其仅在 SharePoint 网站中工作。

有没有人见过这个问题？我觉得微软似乎已经计划让 SharePoint 和其他 .NET 应用程序共存。

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T16:53:02.083

讨厌回答我自己的问题。但我遇到的问题是 SharePoint 站点 A 是 dev.sites.com，而 MVC 是 books.dev.sites.com。STS 联合 cookie 使用来自 dev.sites.com 的 cookie 问题，而忽略了域中存在书籍的事实。当您登录的站点在域中较低时，可能是 STS 中的一个错误，允许多级身份验证。

首先登录 dev.sites.com

```
tapes.sites.com fine
this.sites.com fine
books.dev.sites.com FAIL 
```

# themes - Liferay 6.1：自定义主题不继承自“经典”主题

> ID：13298407
> 
> 赞同：0
> 
> 时间：2012-11-08T21:48:56.903
> 
> 标签：themes, liferay-6, inheritance

我使用 Liferay Eclipse IDE 创建了一个新主题，并进行了修改`build.xml`以将 theme.parent 更改为经典。这是我的完整`build.xml`文件：

```
<?xml version="1.0"?>
<!DOCTYPE project>

<project name="deep-blue-theme" basedir="." default="deploy">
    <import file="../build-common-theme.xml" />

    <property name="theme.parent" value="classic" />
</project> 
```

我没有看到主题有任何变化。我仍然看到`_styled`正在显示的布局。还有什么我需要做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:21:40.523

不，将 build.xml 中的“theme.parent”属性的值更改为“classic”就足够了。

但请注意，经典主题不包含诸如 custom.css 之类的文件，您可以轻松替换这些文件“在一个中心位置覆盖默认样式，以便于升级和维护”。如果您想保存经典主题中的所有样式，我看到两种可能性：

**第一种方法**

1.  将 custom.css 从经典主题复制到项目中的“docroot/_diffs/css”文件夹。
2.  然后将您的样式添加到该文件的末尾。

**第二种方法**

1.  在您的项目中创建 custom_deep_blue.css 文件。在这里，您将添加您的样式。
2.  将 main.css 从经典主题复制到“docroot/_diffs/css”文件夹。
3.  将以下 @import 添加到 main.css 文件的末尾：

```
@import url(custom_deep_blue.css);

```

# c# - 在 ItemUpdating 事件接收器中的 Drop Off Library 上使用 BreakRoleInheritence 方法时“访问被拒绝”

> ID：13298409
> 
> 赞同：1
> 
> 时间：2012-11-08T21:49:10.927
> 
> 标签：c#, sharepoint

我有一个使用 ItemUpdating 事件的事件接收器。我正在尝试取消从父项那里继承该项目的权限，并在上传到 Drop Off Library 后剥夺该项目的所有权限。这样做的原因是该文档包含敏感信息，一旦到达 Drop Off Library，任何人都不应看到它。

下面的代码在到达 Drop Off Library 时执行 CurrentListItem.BreakRoleInheritence(true) 行时引发以下错误：访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）

```
 SPSecurity.RunWithElevatedPrivileges(delegate()
            {
                using (SPSite oSiteCollection = new SPSite(properties.ListItem.Web.Url))
                {
                    using (SPWeb oWebsite = oSiteCollection.RootWeb)
                    {
                        SPListItem CurrentListItem = properties.ListItem;

                        SPRoleAssignmentCollection SPRoleAssColn = CurrentListItem.RoleAssignments;

                        oSiteCollection.AllowUnsafeUpdates = true;
                        oWebsite.AllowUnsafeUpdates = true;

                        CurrentListItem.BreakRoleInheritance(true);

                        oSiteCollection.AllowUnsafeUpdates = true;
                        oWebsite.AllowUnsafeUpdates = true;

                        for (int i = SPRoleAssColn.Count - 1; i >= 0; i--)
                        {
                            if (SPRoleAssColn[i].Member.Name != "System Account")
                            {
                                SPRoleAssColn.Remove(i);
                            }
                        }
                    }
                }
            }); 
```

我还做了以下事情： - 确保应用程序池的身份是网站集管理员 - 尝试使用 GetItemById 再次获取列表项（但这会引发该项目不存在的错误，因为该项目仍然尚未发布 - 我们需要在文档发布之前删除权限 - 我们不能强制签入，否则放置库可能会处理并将文档移动到其目标库） - 尝试使用获取 Web 和站点选项guids - 使用 AllowUnsafeUpdates 尝试了许多不同的展示位置组合 - 使用网站集管理员的用户令牌打开 Web 对象

出于某种原因，当文档到达目标库时，上面的代码可以正常工作（因为一旦文档到达目的地，我们将再次删除所有权限）。发生这种情况是因为使用系统帐户将文档从放置库移动到目标库。

在使用与上述类似的方法时如何解决“拒绝访问”错误的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:28:00.873

以及这个项目是如何被送到 Drop off 图书馆的？通过工作流，还是在使用 OfficialFile.asmx 时？当您手动上传文件时，您能否检查此事件接收器是否正常工作（很可能您必须单击“提交”以强制更新，但也许您可以以这种方式设置字段，您的规则都不匹配？我的文件到达那里通过工作流，确保运行 SPTimer4 服务的帐户也是该网站集的网站管理员。

还要小心， - 我认为有两件事可能无法在您的事件接收器中按您期望的那样工作：

```
SPSecurity.RunWithElevatedPrivileges(delegate()
{
    using (var oSiteCollection = new SPSite(properties.ListItem.Web.Url))
    {
        using (var oWebsite = oSiteCollection.RootWeb)
        {
             var currentListItem = properties.ListItem;
             oSiteCollection.AllowUnsafeUpdates = true;
             oWebsite.AllowUnsafeUpdates = true;

             currentListItem.BreakRoleInheritance(true);

             //You should take the RoleAssignments after breaking inheritance our you will be working on parents permissions. 
             var spRoleAssColn = currentListItem.RoleAssignments;

             oSiteCollection.AllowUnsafeUpdates = true;
             oWebsite.AllowUnsafeUpdates = true;

             for (int i = spRoleAssColn.Count - 1; i >= 0; i--)
             {
                 //I think it won't allow you to remove permissions for site administrator 
                 if (spRoleAssColn[i].Member.Name != "System Account" && !oWebsite.EnsureUser(spRoleAssColn[i].Member.LoginName).IsSiteAdmin)
                 {
                    spRoleAssColn.Remove(i);
                 }
             }
        }
    }
}); 
```

# svn - 无法将项目导入存储库 svn

> ID：13298412
> 
> 赞同：0
> 
> 时间：2012-11-08T21:49:43.033
> 
> 标签：svn, debian

对不起我的英语，我来自意大利。通过 ssh，我在我的“ReadyNas Duo”上安装了带有 apt-get 的服务器颠覆，没有错误。我创建了存储库`svnadmin create /MyDeveloper/svn/repos`，我检查了 svn 的文件夹。

创建后，我已将我的项目 Java 导入存储库`svn import MyProj file:///MyDeveloper/svn/repos/MyProj -m "Prima importazione del progetto"`，但它返回错误`Can't set position pointer in file /MyDeveloper/svn/repos/db/revs/0: Invalid argument`。`svn list`与其他命令相同的错误。我已经检查了权限，但已设置。

我需要很多帮助，否则我无法处理我的项目

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:49:29.553

*   尝试检查您的（空）存储库
*   复制你的项目
*   进入新创建的工作副本提交更改。

我从不执行 svn import 命令，但总是结帐。无论如何，我需要它来继续工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:58:26.757

您需要导入到您创建的存储库，而不是子文件夹：

```
$ svn import . file:///MyDeveloper/svn/repos -m "prima importazione del progetto" 
```

为我的废话意大利语道歉。

# windows - Windows 上 readlink 的本机替代方案

> ID：13298414
> 
> 赞同：12
> 
> 时间：2012-11-08T21:49:53.917
> 
> 标签：windows, cmd, native, symlink

Windows**原生**替代方案`ln -s`是`mklink`.

有什么本地替代品`readlink`吗？或者如何本地识别文件是否是符号链接？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-12-10T17:39:33.627

无需将标准输出重定向到 temp.txt 文件。您可以简单地在一行中执行此操作：

```
for /f "tokens=6" %i in ('dir mysymlink ^| FIND "<SYMLINK>"') do @echo %i 
```

另请注意，Lars 的上述方法仅适用于“文件”符号链接。该方法必须针对目录符号链接进行调整，因为将目录传递给“dir”命令将列出该目录的实际内容（其中不会有自己的内容）

所以你会使用：

```
for /f "tokens=6" %i in ('dir mysymlink* ^| FIND "<SYMLINKD>"') do @echo %i 
```

请注意在 dir 调用中包含 * 并在 FIND 中添加“D”

星号将阻止 dir 列出该目录的内容。

为了进一步简化处理文件或目录符号链接的过程，您只需始终包含星号，对于 FIND 参数，您可以将其更改为部分匹配，以便它在末尾匹配或不匹配“D”

```
for /f "tokens=6" %i in ('dir mysymlink* ^| FIND "<SYMLINK"') do @echo %i 
```

最后，由于该方法实际上返回了括号 [].. 内的文件，因此最好将它们分隔开，留下最后的方法：

```
for /f "tokens=2 delims=[]" %i in ('dir mysymlink* ^| FIND "<SYMLINK"') do @echo %i 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-13T09:13:53.747

我不相信有任何工具直接等同于`readlink`. 但是您可以在输出中看到`dir`项目是否为符号链接，因此您仍然可以从命令行或脚本中确定这一点。

## 测试它是否是符号链接

您可以使用以下语法轻松测试给定文件是否是符号链接：

```
 dir mysymlink  | find "<SYMLINK>" >NUL
 if not errorlevel 1  echo. It's a symlink! 
```

如果找到 " "，Errorlevel 将为 0，`<SYMLINK>`否则为 1。

## 确定符号链接的目标

确定符号链接的实际目标是另一回事，在我看来并不那么简单。的输出`dir mysymlink | find "<SYMLINK>"`可能看起来像

```
11/13/2012  12:53 AM    <SYMLINK>      mysymlink [C:\Windows\Temp\somefile.txt] 
```

你可以解析这个，但是有些字符很难处理一个变量，所以我发现处理一个临时文件更容易：

```
 dir mysymlink | find "<SYMLINK>" > temp.txt
 for /f "tokens=6" %i in (temp.txt) do @echo %i 
```

这会产生类似的输出`[C:\Windows\Temp\somefile.txt]`。（请记住`%%i`在任何批处理脚本中使用；以上来自命令提示符。）

要获得不带括号的结果，您可以执行以下操作：

```
 dir mysymlink | find "<SYMLINK>" > temp.txt
 for /f "tokens=6" %i in (temp.txt) do set answer=%i
 echo %answer:~1,-1% 
```

变量`%answer%`包含带括号的结果，`%answer:~1,-1%`因此没有第一个或最后一个字符的结果。

# javascript - Chrome 扩展：无需打开 html 页面即可使用 javascript

> ID：13298420
> 
> 赞同：4
> 
> 时间：2012-11-08T21:50:19.380
> 
> 标签：javascript, html, google-chrome-extension

我知道有一种方法可以让 JS 在 chrome 扩展中工作：只需在 manifest.json 中包含一个 default_popup 参数来指定一个 HTML 页面，然后使用 .js 将 JS 包含到 HTML 中`<script>`。但是有没有办法让 JS 做一些事情而不必打开 HTML 页面（例如更改扩展的图标而无需打开 HTML 弹出窗口）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T21:56:55.213

是的，这就是所谓的[**背景页**](http://developer.chrome.com/extensions/background_pages.html)。您可以在没有`.html`文件的情况下创建它，但它会为您动态创建一个，名为`_generated_background_page.html`.

您可以将以下内容添加到您`manifest.json`的指定背景页面：

```
{
  "name": "My extension",
  ...
  "background": {
    "scripts": ["background.js"]
  },
  ...
} 
```

要查看后台页面，请`chrome://chrome/extensions`激活“开发人员模式”，您可以使用开发人员工具查看后台页面：

![扩展选项卡](../Images/a2740f1ffbfb05beb53ad7a76023403d.png)

对于您的示例，更改图标，您可以使用[`chrome.browserAction`](http://developer.chrome.com/extensions/browserAction.html).

# c# - 如何在 C# 中将 utf-8 转换为 cp1252？

> ID：13298424
> 
> 赞同：1
> 
> 时间：2012-11-08T21:50:54.270
> 
> 标签：c#, android, mono

我需要将在 utf-8 上发送的 XML 文件转换为 cp1252。这怎么可能？

我的消费者应用程序仅支持其控件中的 ANSI 字符，而不支持 Unicode。它还对接收到的字节进行 memcopy。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:53:29.983

尝试 Encoding.Convert 方法。见这里： http: [//msdn.microsoft.com/en-us/library/kdcak6ye (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/kdcak6ye(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:38:23.987

从 TEAM XAMARIN 的 jonp 那里得到了一个答案 - [http://forums.xamarin.com/discussion/337/how-to-send-byte-encoded-as-ansi](http://forums.xamarin.com/discussion/337/how-to-send-byte-encoded-as-ansi)

事实证明“您需要将 West 国际化程序集添加到您的应用程序中。”：

> 默认情况下，Mono for Android 仅包含有限的排序规则表和编码列表。为了在您的应用程序中包含其他数据，您可以使用 MandroidI18n 属性：West

# iphone - 不希望电话链接在浏览器中仅通过电话呼叫

> ID：13298427
> 
> 赞同：2
> 
> 时间：2012-11-08T21:51:02.940
> 
> 标签：iphone, html, css, meta, tel

我正在使用，因为我在页面上有其他不是电话号码的号码，并且不希望它们被检测到。我将数字包装在一个链接中，但我不希望它在浏览器中可点击，只能在设备上点击。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T21:54:54.533

这其实很简单，[Apple 的文档](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/PhoneLinks.html)描述的很透彻——

```
// Disable automatic telephone number detection
<meta name = "format-detection" content = "telephone=no">

// Explicitly mark a number as a telephone number
<p>A phone number: <a href="tel:1-408-555-5555">1-408-555-5555</a></p> 
```

为了防止链接在桌面浏览器上单击时执行任何操作，您可以进行一些浏览器嗅探...

```
$('a.someClass').click(function(e) {
    if (!navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/)) {
        e.preventDefault();
    }
}); 
```

但是，在一个使用 Skype for VOIP 等软件司空见惯的时代，为什么要削弱桌面浏览器中的这一功能呢？有关为什么浏览器嗅探是一个*坏主意*的精彩讨论，请参阅[此问题](https://stackoverflow.com/questions/3514784/best-way-to-detect-handheld-device-in-jquery)。

# java - java web服务axis2+rampart+sandesha2创建序列未签名

> ID：13298430
> 
> 赞同：1
> 
> 时间：2012-11-08T21:51:04.970
> 
> 标签：java, web-services, axis2, rampart

我需要将 WS-Addressing、WS-Security 和 WS-Reliablity 添加到在 Apache Axis2 上运行的遗留 Java Web 服务。

我发现 Axis2 带有 WS-Addressing 支持。然后我在 Axis2（v1.6.2；在 Apache Tomcat（v1.7.0_30）上运行）上安装了 Apache Rampart（v1.6.2，用于 WS-Security）和 Apache Sandesha2（v1.6.2，用于 WS-Reliable Messaging）。

在做了一些研究之后，我将我的策略添加到了我的服务 META-INF/services.xml 文件中。（该策略需要 https 和要签名的标头。）我可以毫无例外地将服务部署到 Tomcat。我可以使用axis2 url (http://localhost:8080/axis2) 查看服务。

现在我正在尝试为此服务编写一个 java 客户端。我使用axis2 'wsdl2java' 代码生成器来创建存根。我的测试客户端服务能够调用该服务。但是，在服务器端，我收到异常“AxisFault：消息未签名”（策略要求）。服务器日志还显示“CreateSequence”消息（WS-Reliable Messaging 的一部分）未签名。

有谁知道如何签署“CreateSequence”消息？此外，链接到使用 Axis2、Rampart 和 Sandesha2 的示例客户端/服务也会很有帮助。提前致谢。

# sql - SQL 嵌套连接

> ID：13298432
> 
> 赞同：0
> 
> 时间：2012-11-08T21:51:17.130
> 
> 标签：sql, sql-server, database

我正在尝试从 2 组联合表中进行嵌套连接。我不明白为什么会出现以下错误：

> 消息 156，级别 15，状态 1，第 15 行关键字“INNER”附近的语法不正确。消息 156，级别 15，状态 1，第 24 行关键字“开”附近的语法不正确。

我假设基于错误，我的 () 存在问题，但语法确实遵循[Inner Join Operation](http://msdn.microsoft.com/en-us/library/office/bb208854%28v=office.12%29.aspx)中显示的语言。

这是代码：

```
SELECT TOP 1000

Pus.SerialnoId,Hus.RT,Hus.DIVISION,Hus.REGION,Hus.ADJHSG,Hus.ADJINC,Hus.WGTP,Hus.NP,Hus.TYPE,Hus.ACR,Hus.AGS,Hus.BLD,Hus.BUS,Hus.CONP,Hus.ELEP,Hus.FS,Hus.FULP,Hus.GASP,Hus.HFL,Hus.INSP,Hus.KIT,Hus.MHP,Hus.MRGI,Hus.MRGP,Hus.MRGT,Hus.MRGX,Hus.RNTM,Hus.RNTP,Hus.SMP,Hus.TEL,Hus.TEN,Hus.VACS,Hus.VEH,Hus.WATP,Hus.YBL,Hus.FES,Hus.FINCP,Hus.FPARC,Hus.GRNTP,Hus.GRPIP,Hus.HHL,Hus.HHT,Hus.HINCP,Hus.HUGCL,Hus.HUPAC,Hus.HUPAOC,Hus.HUPARC,Hus.LNGI,Hus.MV,Hus.NOC,Hus.NPF,Hus.NPP,Hus.NR,Hus.NRC,Hus.OCPIP,Hus.PARTNER,Hus.PSF,Hus.R18,Hus.R60,Hus.R65,Hus.RESMODE,Hus.SMOCP,Hus.SMX,Hus.SRNT,Hus.SVAL,Hus.TAXP,Hus.WIF,Hus.WKEXREL,Hus.WORKSTAT,Hus.FACRP,Hus.FAGSP,Hus.FBDSP,Hus.FBLDP,Hus.FBUSP,Hus.FCONP,Hus.FELEP,Hus.FFSP,Hus.FFULP,Hus.FGASP,Hus.FHFLP,Hus.FINSP,Hus.FKITP,Hus.FMHP,Hus.FMRGIP,Hus.FMRGP,Hus.FMRGTP,Hus.FMRGXP,Hus.FPLMP,Hus.FRMSP,Hus.FRNTMP,Hus.FRNTP,Hus.FSMP,Hus.FSMXHP,Hus.FSMXSP,Hus.FTAXP,Hus.FTELP,Hus.FTENP,Hus.FVACSP,Hus.FVALP,Hus.FVEHP,Hus.FWATP,Hus.FYBLP,Hus.WGTP1,Hus.WGTP2,Hus.WGTP3,Hus.WGTP4,Hus.WGTP5,Hus.WGTP6,Hus.WGTP7,Hus.WGTP8,Hus.WGTP9,Hus.WGTP10,Hus.WGTP11,Hus.WGTP12,Hus.WGTP13,Hus.WGTP14,Hus.WGTP15,Hus.WGTP16,Hus.WGTP17,Hus.WGTP18,Hus.WGTP19,Hus.WGTP20,Hus.WGTP21,Hus.WGTP22,Hus.WGTP23,Hus.WGTP24,Hus.WGTP25,Hus.WGTP26,Hus.WGTP27,Hus.WGTP28,Hus.WGTP29,Hus.WGTP30,Hus.WGTP31,Hus.WGTP32,Hus.WGTP33,Hus.WGTP34,Hus.WGTP35,Hus.WGTP36,Hus.WGTP37,Hus.WGTP38,Hus.WGTP39,Hus.WGTP40,Hus.WGTP41,Hus.WGTP42,Hus.WGTP43,Hus.WGTP44,Hus.WGTP45,Hus.WGTP46,Hus.WGTP47,Hus.WGTP48,Hus.WGTP49,Hus.WGTP50,Hus.WGTP51,Hus.WGTP52,Hus.WGTP53,Hus.WGTP54,Hus.WGTP55,Hus.WGTP56,Hus.WGTP57,Hus.WGTP58,Hus.WGTP59,Hus.WGTP60,Hus.WGTP61,Hus.WGTP62,Hus.WGTP63,Hus.WGTP64,Hus.WGTP65,Hus.WGTP66,Hus.WGTP67,Hus.WGTP68,Hus.WGTP69,Hus.WGTP70,Hus.WGTP71,Hus.WGTP72,Hus.WGTP73,Hus.WGTP74,Hus.WGTP75,Hus.WGTP76,Hus.WGTP77,Hus.WGTP78,Hus.WGTP79,Hus.WGTP80 
,Pus.RT,Pus.SPORDER,Pus.ST,Pus.ADJINC,Pus.PWGTP,Pus.AGEP,Pus.CIT,Pus.COW,Pus.DDRS,Pus.DEYE,Pus.DOUT,Pus.DPHY,Pus.DREM,Pus.ENG,Pus.FER,Pus.GCL,Pus.GCM,Pus.GCR,Pus.INTP,Pus.JWMNP,Pus.JWRIP,Pus.JWTR,Pus.LANX,Pus.MAR,Pus.MIG,Pus.MIL,Pus.MLPA,Pus.MLPB,Pus.MLPC,Pus.MLPD,Pus.MLPE,Pus.MLPF,Pus.MLPG,Pus.MLPH,Pus.MLPI,Pus.MLPJ,Pus.MLPK,Pus.NWAB,Pus.NWAV,Pus.NWLA,Pus.NWLK,Pus.NWRE,Pus.OIP,Pus.PAP,Pus.RETP,Pus.SCH,Pus.SCHG,Pus.SCHL,Pus.SEMP,Pus.SEX,Pus.SSIP,Pus.SSP,Pus.WAGP,Pus.WKHP,Pus.WKL,Pus.WKW,Pus.YOEP,Pus.ANC,Pus.ANC1P,Pus.ANC2P,Pus.DECADE,Pus.DRIVESP,Pus.ESP,Pus.ESR,Pus.HISP,Pus.INDP,Pus.JWAP,Pus.JWDP,Pus.LANP,Pus.MIGPUMA,Pus.MIGSP,Pus.MSP,Pus.NAICSP,Pus.NATIVITY,Pus.OC,Pus.PAOC,Pus.PERNP,Pus.PINCP,Pus.POBP,Pus.POVPIP,Pus.POWPUMA,Pus.POWSP,Pus.QTRBIR,Pus.RAC1P,Pus.RAC2P,Pus.RAC3P,Pus.RACAIAN,Pus.RACASN,Pus.RACBLK,Pus.RACNHPI,Pus.RACNUM,Pus.RACSOR,Pus.RACWHT,Pus.RC,Pus.SFN,Pus.SFR,Pus.VPS,Pus.WAOB,Pus.FAGEP,Pus.FANCP,Pus.FCITP,Pus.FCOWP,Pus.FDDRSP,Pus.FDEYEP,Pus.FDOUTP,Pus.FDPHYP,Pus.FDREMP,Pus.FENGP,Pus.FESRP,Pus.FFERP,Pus.FGCLP,Pus.FGCMP,Pus.FGCRP,Pus.FHISP,Pus.FINDP,Pus.FINTP,Pus.FJWDP,Pus.FJWMNP,Pus.FJWRIP,Pus.FJWTRP,Pus.FLANP,Pus.FLANXP,Pus.FMARP,Pus.FMIGP,Pus.FMIGSP,Pus.FMILPP,Pus.FMILSP,Pus.FOCCP,Pus.FOIP,Pus.FPAP,Pus.FPOBP,Pus.FPOWSP,Pus.FRACP,Pus.FRELP,Pus.FRETP,Pus.FSCHGP,Pus.FSCHLP,Pus.FSCHP,Pus.FSEMP,Pus.FSEXP,Pus.FSSIP,Pus.FSSP,Pus.FWAGP,Pus.FWKHP,Pus.FWKLP,Pus.FWKWP,Pus.FYOEP,Pus.PWGTP1,Pus.PWGTP2,Pus.PWGTP3,Pus.PWGTP4,Pus.PWGTP5,Pus.PWGTP6,Pus.PWGTP7,Pus.PWGTP8,Pus.PWGTP9,Pus.PWGTP10,Pus.PWGTP11,Pus.PWGTP12,Pus.PWGTP13,Pus.PWGTP14,Pus.PWGTP15,Pus.PWGTP16,Pus.PWGTP17,Pus.PWGTP18,Pus.PWGTP19,Pus.PWGTP20,Pus.PWGTP21,Pus.PWGTP22,Pus.PWGTP23,Pus.PWGTP24,Pus.PWGTP25,Pus.PWGTP26,Pus.PWGTP27,Pus.PWGTP28,Pus.PWGTP29,Pus.PWGTP30,Pus.PWGTP31,Pus.PWGTP32,Pus.PWGTP33,Pus.PWGTP34,Pus.PWGTP35,Pus.PWGTP36,Pus.PWGTP37,Pus.PWGTP38,Pus.PWGTP39,Pus.PWGTP40,Pus.PWGTP41,Pus.PWGTP42,Pus.PWGTP43,Pus.PWGTP44,Pus.PWGTP45,Pus.PWGTP46,Pus.PWGTP47,Pus.PWGTP48,Pus.PWGTP49,Pus.PWGTP50,Pus.PWGTP51,Pus.PWGTP52,Pus.PWGTP53,Pus.PWGTP54,Pus.PWGTP55,Pus.PWGTP56,Pus.PWGTP57,Pus.PWGTP58,Pus.PWGTP59,Pus.PWGTP60,Pus.PWGTP61,Pus.PWGTP62,Pus.PWGTP63,Pus.PWGTP64,Pus.PWGTP65,Pus.PWGTP66,Pus.PWGTP67,Pus.PWGTP68,Pus.PWGTP69,Pus.PWGTP70,Pus.PWGTP71,Pus.PWGTP72,Pus.PWGTP73,Pus.PWGTP74,Pus.PWGTP75,Pus.PWGTP76,Pus.PWGTP77,Pus.PWGTP78,Pus.PWGTP79,Pus.PWGTP80

FROM 

    (select * FROM 
        (select serialnoId,RT,DIVISION,PUMA,REGION,ST,ADJHSG,ADJINC,WGTP,NP,TYPE,ACR,AGS,BLD,BUS,CONP,ELEP,FS,FULP,GASP,HFL,INSP,KIT,MHP,MRGI,MRGP,MRGT,MRGX,RNTM,RNTP,SMP,TEL,TEN,VACS,VEH,WATP,YBL,FES,FINCP,FPARC,GRNTP,GRPIP,HHL,HHT,HINCP,HUGCL,HUPAC,HUPAOC,HUPARC,LNGI,MV,NOC,NPF,NPP,NR,NRC,OCPIP,PARTNER,PSF,R18,R60,R65,RESMODE,SMOCP,SMX,SRNT,SVAL,TAXP,WIF,WKEXREL,WORKSTAT,FACRP,FAGSP,FBDSP,FBLDP,FBUSP,FCONP,FELEP,FFSP,FFULP,FGASP,FHFLP,FINSP,FKITP,FMHP,FMRGIP,FMRGP,FMRGTP,FMRGXP,FPLMP,FRMSP,FRNTMP,FRNTP,FSMP,FSMXHP,FSMXSP,FTAXP,FTELP,FTENP,FVACSP,FVALP,FVEHP,FWATP,FYBLP,WGTP1,WGTP2,WGTP3,WGTP4,WGTP5,WGTP6,WGTP7,WGTP8,WGTP9,WGTP10,WGTP11,WGTP12,WGTP13,WGTP14,WGTP15,WGTP16,WGTP17,WGTP18,WGTP19,WGTP20,WGTP21,WGTP22,WGTP23,WGTP24,WGTP25,WGTP26,WGTP27,WGTP28,WGTP29,WGTP30,WGTP31,WGTP32,WGTP33,WGTP34,WGTP35,WGTP36,WGTP37,WGTP38,WGTP39,WGTP40,WGTP41,WGTP42,WGTP43,WGTP44,WGTP45,WGTP46,WGTP47,WGTP48,WGTP49,WGTP50,WGTP51,WGTP52,WGTP53,WGTP54,WGTP55,WGTP56,WGTP57,WGTP58,WGTP59,WGTP60,WGTP61,WGTP62,WGTP63,WGTP64,WGTP65,WGTP66,WGTP67,WGTP68,WGTP69,WGTP70,WGTP71,WGTP72,WGTP73,WGTP74,WGTP75,WGTP76,WGTP77,WGTP78,WGTP79,WGTP80 from dbo.AcsBy320052007Hus
        UNION ALL 
        select serialnoId,RT,DIVISION,PUMA,REGION,ST,ADJHSG,ADJINC,WGTP,NP,TYPE,ACR,AGS,BLD,BUS,CONP,ELEP,FS,FULP,GASP,HFL,INSP,KIT,MHP,MRGI,MRGP,MRGT,MRGX,RNTM,RNTP,SMP,TEL,TEN,VACS,VEH,WATP,YBL,FES,FINCP,FPARC,GRNTP,GRPIP,HHL,HHT,HINCP,HUGCL,HUPAC,HUPAOC,HUPARC,LNGI,MV,NOC,NPF,NPP,NR,NRC,OCPIP,PARTNER,PSF,R18,R60,R65,RESMODE,SMOCP,SMX,SRNT,SVAL,TAXP,WIF,WKEXREL,WORKSTAT,FACRP,FAGSP,FBDSP,FBLDP,FBUSP,FCONP,FELEP,FFSP,FFULP,FGASP,FHFLP,FINSP,FKITP,FMHP,FMRGIP,FMRGP,FMRGTP,FMRGXP, FPLMP,FRMSP,FRNTMP,FRNTP,FSMP,FSMXHP,FSMXSP,FTAXP,FTELP,FTENP,FVACSP,FVALP,FVEHP,FWATP,FYBLP,WGTP1,WGTP2,WGTP3,WGTP4,WGTP5,WGTP6,WGTP7,WGTP8,WGTP9,WGTP10,WGTP11,WGTP12,WGTP13,WGTP14,WGTP15,WGTP16,WGTP17,WGTP18,WGTP19,WGTP20,WGTP21,WGTP22,WGTP23,WGTP24,WGTP25,WGTP26,WGTP27,WGTP28,WGTP29,WGTP30,WGTP31,WGTP32,WGTP33,WGTP34,WGTP35,WGTP36,WGTP37,WGTP38,WGTP39,WGTP40,WGTP41,WGTP42,WGTP43,WGTP44,WGTP45,WGTP46,WGTP47,WGTP48,WGTP49,WGTP50,WGTP51,WGTP52,WGTP53,WGTP54,WGTP55,WGTP56,WGTP57,WGTP58,WGTP59,WGTP60,WGTP61,WGTP62,WGTP63,WGTP64,WGTP65,WGTP66,WGTP67,WGTP68,WGTP69,WGTP70,WGTP71,WGTP72,WGTP73,WGTP74,WGTP75,WGTP76,WGTP77,WGTP78,WGTP79,WGTP80 from dbo.AcsBy320082010Hus 
        ) AS Hus
    )
    INNER JOIN 
    (select * FROM 
        (
        SELECT serialnoId,RT,SPORDER,PUMA,ST,ADJINC,PWGTP,AGEP,CIT,COW,DDRS,DEYE,DOUT,DPHY,DREM,ENG,FER,GCL,GCM,GCR,INTP,JWMNP,JWRIP,JWTR,LANX,MAR,MIG,MIL,MLPA,MLPB,MLPC,MLPD,MLPE,MLPF,MLPG,MLPH,MLPI,MLPJ,MLPK,NWAB,NWAV,NWLA,NWLK,NWRE,OIP,PAP,RETP,SCH,SCHG,SCHL,SEMP,SEX,SSIP,SSP,WAGP,WKHP,WKL,WKW,YOEP,ANC,ANC1P,ANC2P,DECADE,DRIVESP,ESP,ESR,HISP,INDP,JWAP,JWDP,LANP,MIGPUMA,MIGSP,MSP,NAICSP,NATIVITY,OC,PAOC,PERNP,PINCP,POBP,POVPIP,POWPUMA,POWSP,QTRBIR,RAC1P,RAC2P,RAC3P,RACAIAN,RACASN,RACBLK,RACNHPI,RACNUM,RACSOR,RACWHT,RC,SFN,SFR,VPS,WAOB,FAGEP,FANCP,FCITP,FCOWP,FDDRSP,FDEYEP,FDOUTP,FDPHYP,FDREMP,FENGP,FESRP,FFERP,FGCLP,FGCMP,FGCRP,FHISP,FINDP,FINTP,FJWDP,FJWMNP,FJWRIP,FJWTRP,FLANP,FLANXP,FMARP,FMIGP,FMIGSP,FMILPP,FMILSP,FOCCP,FOIP,FPAP,FPOBP,FPOWSP,FRACP,FRELP,FRETP,FSCHGP,FSCHLP,FSCHP,FSEMP,FSEXP,FSSIP,FSSP,FWAGP,FWKHP,FWKLP,FWKWP,FYOEP,PWGTP1,PWGTP2,PWGTP3,PWGTP4,PWGTP5,PWGTP6,PWGTP7,PWGTP8,PWGTP9,PWGTP10,PWGTP11,PWGTP12,PWGTP13,PWGTP14,PWGTP15,PWGTP16,PWGTP17,PWGTP18,PWGTP19,PWGTP20,PWGTP21,PWGTP22,PWGTP23,PWGTP24,PWGTP25,PWGTP26,PWGTP27,PWGTP28,PWGTP29,PWGTP30,PWGTP31,PWGTP32,PWGTP33,PWGTP34,PWGTP35,PWGTP36,PWGTP37,PWGTP38,PWGTP39,PWGTP40,PWGTP41,PWGTP42,PWGTP43,PWGTP44,PWGTP45,PWGTP46,PWGTP47,PWGTP48,PWGTP49,PWGTP50,PWGTP51,PWGTP52,PWGTP53,PWGTP54,PWGTP55,PWGTP56,PWGTP57,PWGTP58,PWGTP59,PWGTP60,PWGTP61,PWGTP62,PWGTP63,PWGTP64,PWGTP65,PWGTP66,PWGTP67,PWGTP68,PWGTP69,PWGTP70,PWGTP71,PWGTP72,PWGTP73,PWGTP74,PWGTP75,PWGTP76,PWGTP77,PWGTP78,PWGTP79,PWGTP80 FROM dbo.AcsBy320052007Pus
        UNION ALL 
        select serialnoId,RT,SPORDER,PUMA,ST,ADJINC,PWGTP,AGEP,CIT,COW,DDRS,DEYE,DOUT,DPHY,DREM,ENG,FER,GCL,GCM,GCR,INTP,JWMNP,JWRIP,JWTR,LANX,MAR,MIG,MIL,MLPA,MLPB,MLPC,MLPD,MLPE,MLPF,MLPG,MLPH,MLPI,MLPJ,MLPK,NWAB,NWAV,NWLA,NWLK,NWRE,OIP,PAP,RETP,SCH,SCHG,SCHL,SEMP,SEX,SSIP,SSP,WAGP,WKHP,WKL,WKW,YOEP,ANC,ANC1P,ANC2P,DECADE,DRIVESP,ESP,ESR,HISP,INDP,JWAP,JWDP,LANP,MIGPUMA,MIGSP,MSP,NAICSP,NATIVITY,OC,PAOC,PERNP,PINCP,POBP,POVPIP,POWPUMA,POWSP,QTRBIR,RAC1P,RAC2P,RAC3P,RACAIAN,RACASN,RACBLK,RACNHPI,RACNUM,RACSOR,RACWHT,RC,SFN,SFR,VPS,WAOB,FAGEP,FANCP,FCITP,FCOWP,FDDRSP,FDEYEP,FDOUTP,FDPHYP,FDREMP,FENGP,FESRP,FFERP,FGCLP,FGCMP,FGCRP,FHISP,FINDP,FINTP,FJWDP,FJWMNP,FJWRIP,FJWTRP,FLANP,FLANXP,FMARP,FMIGP,FMIGSP,FMILPP,FMILSP,FOCCP,FOIP,FPAP,FPOBP,FPOWSP,FRACP,FRELP,FRETP,FSCHGP,FSCHLP,FSCHP,FSEMP,FSEXP,FSSIP,FSSP,FWAGP,FWKHP,FWKLP,FWKWP,FYOEP,PWGTP1,PWGTP2,PWGTP3,PWGTP4,PWGTP5,PWGTP6,PWGTP7,PWGTP8,PWGTP9,PWGTP10,PWGTP11,PWGTP12,PWGTP13,PWGTP14,PWGTP15,PWGTP16,PWGTP17,PWGTP18,PWGTP19,PWGTP20,PWGTP21,PWGTP22,PWGTP23,PWGTP24,PWGTP25,PWGTP26,PWGTP27,PWGTP28,PWGTP29,PWGTP30,PWGTP31,PWGTP32,PWGTP33,PWGTP34,PWGTP35,PWGTP36,PWGTP37,PWGTP38,PWGTP39,PWGTP40,PWGTP41,PWGTP42,PWGTP43,PWGTP44,PWGTP45,PWGTP46,PWGTP47,PWGTP48,PWGTP49,PWGTP50,PWGTP51,PWGTP52,PWGTP53,PWGTP54,PWGTP55,PWGTP56,PWGTP57,PWGTP58,PWGTP59,PWGTP60,PWGTP61,PWGTP62,PWGTP63,PWGTP64,PWGTP65,PWGTP66,PWGTP67,PWGTP68,PWGTP69,PWGTP70,PWGTP71,PWGTP72,PWGTP73,PWGTP74,PWGTP75,PWGTP76,PWGTP77,PWGTP78,PWGTP79,PWGTP80 FROM dbo.AcsBy320082010Pus
        ) AS Pus
    )

On Hus.SerialNoId = Pus.SerialNoId 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:58:28.293

我认为您不需要外部`SELECT *`陈述...尝试将您的更改`FROM`为以下内容：

```
FROM 
(
    SELECT serialnoId...
    FROM dbo.AcsBy320052007Hus

    UNION ALL 

    SELECT serialnoId...
    FROM dbo.AcsBy320082010Hus 
) AS Hus

    INNER JOIN 

(
    SELECT serialnoId... 
    FROM dbo.AcsBy320052007Pus

    UNION ALL 

    SELECT serialnoId...
    FROM dbo.AcsBy320082010Pus
) AS Pus

ON Hus.SerialNoId = Pus.SerialNoId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:55:19.560

您是否尝试在子查询周围添加括号？

```
SELECT TOP 1000

Pus.SerialnoId,Hus.RT,Hus.DIVISION,Hus.REGION,Hus.ADJHSG,Hus.ADJINC,Hus.WGTP,Hus.NP,Hus.TYPE,Hus.ACR,Hus.AGS,Hus.BLD,Hus.BUS,Hus.CONP,Hus.ELEP,Hus.FS,Hus.FULP,Hus.GASP,Hus.HFL,Hus.INSP,Hus.KIT,Hus.MHP,Hus.MRGI,Hus.MRGP,Hus.MRGT,Hus.MRGX,Hus.RNTM,Hus.RNTP,Hus.SMP,Hus.TEL,Hus.TEN,Hus.VACS,Hus.VEH,Hus.WATP,Hus.YBL,Hus.FES,Hus.FINCP,Hus.FPARC,Hus.GRNTP,Hus.GRPIP,Hus.HHL,Hus.HHT,Hus.HINCP,Hus.HUGCL,Hus.HUPAC,Hus.HUPAOC,Hus.HUPARC,Hus.LNGI,Hus.MV,Hus.NOC,Hus.NPF,Hus.NPP,Hus.NR,Hus.NRC,Hus.OCPIP,Hus.PARTNER,Hus.PSF,Hus.R18,Hus.R60,Hus.R65,Hus.RESMODE,Hus.SMOCP,Hus.SMX,Hus.SRNT,Hus.SVAL,Hus.TAXP,Hus.WIF,Hus.WKEXREL,Hus.WORKSTAT,Hus.FACRP,Hus.FAGSP,Hus.FBDSP,Hus.FBLDP,Hus.FBUSP,Hus.FCONP,Hus.FELEP,Hus.FFSP,Hus.FFULP,Hus.FGASP,Hus.FHFLP,Hus.FINSP,Hus.FKITP,Hus.FMHP,Hus.FMRGIP,Hus.FMRGP,Hus.FMRGTP,Hus.FMRGXP,Hus.FPLMP,Hus.FRMSP,Hus.FRNTMP,Hus.FRNTP,Hus.FSMP,Hus.FSMXHP,Hus.FSMXSP,Hus.FTAXP,Hus.FTELP,Hus.FTENP,Hus.FVACSP,Hus.FVALP,Hus.FVEHP,Hus.FWATP,Hus.FYBLP,Hus.WGTP1,Hus.WGTP2,Hus.WGTP3,Hus.WGTP4,Hus.WGTP5,Hus.WGTP6,Hus.WGTP7,Hus.WGTP8,Hus.WGTP9,Hus.WGTP10,Hus.WGTP11,Hus.WGTP12,Hus.WGTP13,Hus.WGTP14,Hus.WGTP15,Hus.WGTP16,Hus.WGTP17,Hus.WGTP18,Hus.WGTP19,Hus.WGTP20,Hus.WGTP21,Hus.WGTP22,Hus.WGTP23,Hus.WGTP24,Hus.WGTP25,Hus.WGTP26,Hus.WGTP27,Hus.WGTP28,Hus.WGTP29,Hus.WGTP30,Hus.WGTP31,Hus.WGTP32,Hus.WGTP33,Hus.WGTP34,Hus.WGTP35,Hus.WGTP36,Hus.WGTP37,Hus.WGTP38,Hus.WGTP39,Hus.WGTP40,Hus.WGTP41,Hus.WGTP42,Hus.WGTP43,Hus.WGTP44,Hus.WGTP45,Hus.WGTP46,Hus.WGTP47,Hus.WGTP48,Hus.WGTP49,Hus.WGTP50,Hus.WGTP51,Hus.WGTP52,Hus.WGTP53,Hus.WGTP54,Hus.WGTP55,Hus.WGTP56,Hus.WGTP57,Hus.WGTP58,Hus.WGTP59,Hus.WGTP60,Hus.WGTP61,Hus.WGTP62,Hus.WGTP63,Hus.WGTP64,Hus.WGTP65,Hus.WGTP66,Hus.WGTP67,Hus.WGTP68,Hus.WGTP69,Hus.WGTP70,Hus.WGTP71,Hus.WGTP72,Hus.WGTP73,Hus.WGTP74,Hus.WGTP75,Hus.WGTP76,Hus.WGTP77,Hus.WGTP78,Hus.WGTP79,Hus.WGTP80 
,Pus.RT,Pus.SPORDER,Pus.ST,Pus.ADJINC,Pus.PWGTP,Pus.AGEP,Pus.CIT,Pus.COW,Pus.DDRS,Pus.DEYE,Pus.DOUT,Pus.DPHY,Pus.DREM,Pus.ENG,Pus.FER,Pus.GCL,Pus.GCM,Pus.GCR,Pus.INTP,Pus.JWMNP,Pus.JWRIP,Pus.JWTR,Pus.LANX,Pus.MAR,Pus.MIG,Pus.MIL,Pus.MLPA,Pus.MLPB,Pus.MLPC,Pus.MLPD,Pus.MLPE,Pus.MLPF,Pus.MLPG,Pus.MLPH,Pus.MLPI,Pus.MLPJ,Pus.MLPK,Pus.NWAB,Pus.NWAV,Pus.NWLA,Pus.NWLK,Pus.NWRE,Pus.OIP,Pus.PAP,Pus.RETP,Pus.SCH,Pus.SCHG,Pus.SCHL,Pus.SEMP,Pus.SEX,Pus.SSIP,Pus.SSP,Pus.WAGP,Pus.WKHP,Pus.WKL,Pus.WKW,Pus.YOEP,Pus.ANC,Pus.ANC1P,Pus.ANC2P,Pus.DECADE,Pus.DRIVESP,Pus.ESP,Pus.ESR,Pus.HISP,Pus.INDP,Pus.JWAP,Pus.JWDP,Pus.LANP,Pus.MIGPUMA,Pus.MIGSP,Pus.MSP,Pus.NAICSP,Pus.NATIVITY,Pus.OC,Pus.PAOC,Pus.PERNP,Pus.PINCP,Pus.POBP,Pus.POVPIP,Pus.POWPUMA,Pus.POWSP,Pus.QTRBIR,Pus.RAC1P,Pus.RAC2P,Pus.RAC3P,Pus.RACAIAN,Pus.RACASN,Pus.RACBLK,Pus.RACNHPI,Pus.RACNUM,Pus.RACSOR,Pus.RACWHT,Pus.RC,Pus.SFN,Pus.SFR,Pus.VPS,Pus.WAOB,Pus.FAGEP,Pus.FANCP,Pus.FCITP,Pus.FCOWP,Pus.FDDRSP,Pus.FDEYEP,Pus.FDOUTP,Pus.FDPHYP,Pus.FDREMP,Pus.FENGP,Pus.FESRP,Pus.FFERP,Pus.FGCLP,Pus.FGCMP,Pus.FGCRP,Pus.FHISP,Pus.FINDP,Pus.FINTP,Pus.FJWDP,Pus.FJWMNP,Pus.FJWRIP,Pus.FJWTRP,Pus.FLANP,Pus.FLANXP,Pus.FMARP,Pus.FMIGP,Pus.FMIGSP,Pus.FMILPP,Pus.FMILSP,Pus.FOCCP,Pus.FOIP,Pus.FPAP,Pus.FPOBP,Pus.FPOWSP,Pus.FRACP,Pus.FRELP,Pus.FRETP,Pus.FSCHGP,Pus.FSCHLP,Pus.FSCHP,Pus.FSEMP,Pus.FSEXP,Pus.FSSIP,Pus.FSSP,Pus.FWAGP,Pus.FWKHP,Pus.FWKLP,Pus.FWKWP,Pus.FYOEP,Pus.PWGTP1,Pus.PWGTP2,Pus.PWGTP3,Pus.PWGTP4,Pus.PWGTP5,Pus.PWGTP6,Pus.PWGTP7,Pus.PWGTP8,Pus.PWGTP9,Pus.PWGTP10,Pus.PWGTP11,Pus.PWGTP12,Pus.PWGTP13,Pus.PWGTP14,Pus.PWGTP15,Pus.PWGTP16,Pus.PWGTP17,Pus.PWGTP18,Pus.PWGTP19,Pus.PWGTP20,Pus.PWGTP21,Pus.PWGTP22,Pus.PWGTP23,Pus.PWGTP24,Pus.PWGTP25,Pus.PWGTP26,Pus.PWGTP27,Pus.PWGTP28,Pus.PWGTP29,Pus.PWGTP30,Pus.PWGTP31,Pus.PWGTP32,Pus.PWGTP33,Pus.PWGTP34,Pus.PWGTP35,Pus.PWGTP36,Pus.PWGTP37,Pus.PWGTP38,Pus.PWGTP39,Pus.PWGTP40,Pus.PWGTP41,Pus.PWGTP42,Pus.PWGTP43,Pus.PWGTP44,Pus.PWGTP45,Pus.PWGTP46,Pus.PWGTP47,Pus.PWGTP48,Pus.PWGTP49,Pus.PWGTP50,Pus.PWGTP51,Pus.PWGTP52,Pus.PWGTP53,Pus.PWGTP54,Pus.PWGTP55,Pus.PWGTP56,Pus.PWGTP57,Pus.PWGTP58,Pus.PWGTP59,Pus.PWGTP60,Pus.PWGTP61,Pus.PWGTP62,Pus.PWGTP63,Pus.PWGTP64,Pus.PWGTP65,Pus.PWGTP66,Pus.PWGTP67,Pus.PWGTP68,Pus.PWGTP69,Pus.PWGTP70,Pus.PWGTP71,Pus.PWGTP72,Pus.PWGTP73,Pus.PWGTP74,Pus.PWGTP75,Pus.PWGTP76,Pus.PWGTP77,Pus.PWGTP78,Pus.PWGTP79,Pus.PWGTP80

FROM 
(
    (select * FROM 
        (select serialnoId,RT,DIVISION,PUMA,REGION,ST,ADJHSG,ADJINC,WGTP,NP,TYPE,ACR,AGS,BLD,BUS,CONP,ELEP,FS,FULP,GASP,HFL,INSP,KIT,MHP,MRGI,MRGP,MRGT,MRGX,RNTM,RNTP,SMP,TEL,TEN,VACS,VEH,WATP,YBL,FES,FINCP,FPARC,GRNTP,GRPIP,HHL,HHT,HINCP,HUGCL,HUPAC,HUPAOC,HUPARC,LNGI,MV,NOC,NPF,NPP,NR,NRC,OCPIP,PARTNER,PSF,R18,R60,R65,RESMODE,SMOCP,SMX,SRNT,SVAL,TAXP,WIF,WKEXREL,WORKSTAT,FACRP,FAGSP,FBDSP,FBLDP,FBUSP,FCONP,FELEP,FFSP,FFULP,FGASP,FHFLP,FINSP,FKITP,FMHP,FMRGIP,FMRGP,FMRGTP,FMRGXP,FPLMP,FRMSP,FRNTMP,FRNTP,FSMP,FSMXHP,FSMXSP,FTAXP,FTELP,FTENP,FVACSP,FVALP,FVEHP,FWATP,FYBLP,WGTP1,WGTP2,WGTP3,WGTP4,WGTP5,WGTP6,WGTP7,WGTP8,WGTP9,WGTP10,WGTP11,WGTP12,WGTP13,WGTP14,WGTP15,WGTP16,WGTP17,WGTP18,WGTP19,WGTP20,WGTP21,WGTP22,WGTP23,WGTP24,WGTP25,WGTP26,WGTP27,WGTP28,WGTP29,WGTP30,WGTP31,WGTP32,WGTP33,WGTP34,WGTP35,WGTP36,WGTP37,WGTP38,WGTP39,WGTP40,WGTP41,WGTP42,WGTP43,WGTP44,WGTP45,WGTP46,WGTP47,WGTP48,WGTP49,WGTP50,WGTP51,WGTP52,WGTP53,WGTP54,WGTP55,WGTP56,WGTP57,WGTP58,WGTP59,WGTP60,WGTP61,WGTP62,WGTP63,WGTP64,WGTP65,WGTP66,WGTP67,WGTP68,WGTP69,WGTP70,WGTP71,WGTP72,WGTP73,WGTP74,WGTP75,WGTP76,WGTP77,WGTP78,WGTP79,WGTP80 from dbo.AcsBy320052007Hus
        UNION ALL 
        select serialnoId,RT,DIVISION,PUMA,REGION,ST,ADJHSG,ADJINC,WGTP,NP,TYPE,ACR,AGS,BLD,BUS,CONP,ELEP,FS,FULP,GASP,HFL,INSP,KIT,MHP,MRGI,MRGP,MRGT,MRGX,RNTM,RNTP,SMP,TEL,TEN,VACS,VEH,WATP,YBL,FES,FINCP,FPARC,GRNTP,GRPIP,HHL,HHT,HINCP,HUGCL,HUPAC,HUPAOC,HUPARC,LNGI,MV,NOC,NPF,NPP,NR,NRC,OCPIP,PARTNER,PSF,R18,R60,R65,RESMODE,SMOCP,SMX,SRNT,SVAL,TAXP,WIF,WKEXREL,WORKSTAT,FACRP,FAGSP,FBDSP,FBLDP,FBUSP,FCONP,FELEP,FFSP,FFULP,FGASP,FHFLP,FINSP,FKITP,FMHP,FMRGIP,FMRGP,FMRGTP,FMRGXP, FPLMP,FRMSP,FRNTMP,FRNTP,FSMP,FSMXHP,FSMXSP,FTAXP,FTELP,FTENP,FVACSP,FVALP,FVEHP,FWATP,FYBLP,WGTP1,WGTP2,WGTP3,WGTP4,WGTP5,WGTP6,WGTP7,WGTP8,WGTP9,WGTP10,WGTP11,WGTP12,WGTP13,WGTP14,WGTP15,WGTP16,WGTP17,WGTP18,WGTP19,WGTP20,WGTP21,WGTP22,WGTP23,WGTP24,WGTP25,WGTP26,WGTP27,WGTP28,WGTP29,WGTP30,WGTP31,WGTP32,WGTP33,WGTP34,WGTP35,WGTP36,WGTP37,WGTP38,WGTP39,WGTP40,WGTP41,WGTP42,WGTP43,WGTP44,WGTP45,WGTP46,WGTP47,WGTP48,WGTP49,WGTP50,WGTP51,WGTP52,WGTP53,WGTP54,WGTP55,WGTP56,WGTP57,WGTP58,WGTP59,WGTP60,WGTP61,WGTP62,WGTP63,WGTP64,WGTP65,WGTP66,WGTP67,WGTP68,WGTP69,WGTP70,WGTP71,WGTP72,WGTP73,WGTP74,WGTP75,WGTP76,WGTP77,WGTP78,WGTP79,WGTP80 from dbo.AcsBy320082010Hus 
        ) AS Hus
    )
    INNER JOIN 
    (select * FROM 
        (
        SELECT serialnoId,RT,SPORDER,PUMA,ST,ADJINC,PWGTP,AGEP,CIT,COW,DDRS,DEYE,DOUT,DPHY,DREM,ENG,FER,GCL,GCM,GCR,INTP,JWMNP,JWRIP,JWTR,LANX,MAR,MIG,MIL,MLPA,MLPB,MLPC,MLPD,MLPE,MLPF,MLPG,MLPH,MLPI,MLPJ,MLPK,NWAB,NWAV,NWLA,NWLK,NWRE,OIP,PAP,RETP,SCH,SCHG,SCHL,SEMP,SEX,SSIP,SSP,WAGP,WKHP,WKL,WKW,YOEP,ANC,ANC1P,ANC2P,DECADE,DRIVESP,ESP,ESR,HISP,INDP,JWAP,JWDP,LANP,MIGPUMA,MIGSP,MSP,NAICSP,NATIVITY,OC,PAOC,PERNP,PINCP,POBP,POVPIP,POWPUMA,POWSP,QTRBIR,RAC1P,RAC2P,RAC3P,RACAIAN,RACASN,RACBLK,RACNHPI,RACNUM,RACSOR,RACWHT,RC,SFN,SFR,VPS,WAOB,FAGEP,FANCP,FCITP,FCOWP,FDDRSP,FDEYEP,FDOUTP,FDPHYP,FDREMP,FENGP,FESRP,FFERP,FGCLP,FGCMP,FGCRP,FHISP,FINDP,FINTP,FJWDP,FJWMNP,FJWRIP,FJWTRP,FLANP,FLANXP,FMARP,FMIGP,FMIGSP,FMILPP,FMILSP,FOCCP,FOIP,FPAP,FPOBP,FPOWSP,FRACP,FRELP,FRETP,FSCHGP,FSCHLP,FSCHP,FSEMP,FSEXP,FSSIP,FSSP,FWAGP,FWKHP,FWKLP,FWKWP,FYOEP,PWGTP1,PWGTP2,PWGTP3,PWGTP4,PWGTP5,PWGTP6,PWGTP7,PWGTP8,PWGTP9,PWGTP10,PWGTP11,PWGTP12,PWGTP13,PWGTP14,PWGTP15,PWGTP16,PWGTP17,PWGTP18,PWGTP19,PWGTP20,PWGTP21,PWGTP22,PWGTP23,PWGTP24,PWGTP25,PWGTP26,PWGTP27,PWGTP28,PWGTP29,PWGTP30,PWGTP31,PWGTP32,PWGTP33,PWGTP34,PWGTP35,PWGTP36,PWGTP37,PWGTP38,PWGTP39,PWGTP40,PWGTP41,PWGTP42,PWGTP43,PWGTP44,PWGTP45,PWGTP46,PWGTP47,PWGTP48,PWGTP49,PWGTP50,PWGTP51,PWGTP52,PWGTP53,PWGTP54,PWGTP55,PWGTP56,PWGTP57,PWGTP58,PWGTP59,PWGTP60,PWGTP61,PWGTP62,PWGTP63,PWGTP64,PWGTP65,PWGTP66,PWGTP67,PWGTP68,PWGTP69,PWGTP70,PWGTP71,PWGTP72,PWGTP73,PWGTP74,PWGTP75,PWGTP76,PWGTP77,PWGTP78,PWGTP79,PWGTP80 FROM dbo.AcsBy320052007Pus
        UNION ALL 
        select serialnoId,RT,SPORDER,PUMA,ST,ADJINC,PWGTP,AGEP,CIT,COW,DDRS,DEYE,DOUT,DPHY,DREM,ENG,FER,GCL,GCM,GCR,INTP,JWMNP,JWRIP,JWTR,LANX,MAR,MIG,MIL,MLPA,MLPB,MLPC,MLPD,MLPE,MLPF,MLPG,MLPH,MLPI,MLPJ,MLPK,NWAB,NWAV,NWLA,NWLK,NWRE,OIP,PAP,RETP,SCH,SCHG,SCHL,SEMP,SEX,SSIP,SSP,WAGP,WKHP,WKL,WKW,YOEP,ANC,ANC1P,ANC2P,DECADE,DRIVESP,ESP,ESR,HISP,INDP,JWAP,JWDP,LANP,MIGPUMA,MIGSP,MSP,NAICSP,NATIVITY,OC,PAOC,PERNP,PINCP,POBP,POVPIP,POWPUMA,POWSP,QTRBIR,RAC1P,RAC2P,RAC3P,RACAIAN,RACASN,RACBLK,RACNHPI,RACNUM,RACSOR,RACWHT,RC,SFN,SFR,VPS,WAOB,FAGEP,FANCP,FCITP,FCOWP,FDDRSP,FDEYEP,FDOUTP,FDPHYP,FDREMP,FENGP,FESRP,FFERP,FGCLP,FGCMP,FGCRP,FHISP,FINDP,FINTP,FJWDP,FJWMNP,FJWRIP,FJWTRP,FLANP,FLANXP,FMARP,FMIGP,FMIGSP,FMILPP,FMILSP,FOCCP,FOIP,FPAP,FPOBP,FPOWSP,FRACP,FRELP,FRETP,FSCHGP,FSCHLP,FSCHP,FSEMP,FSEXP,FSSIP,FSSP,FWAGP,FWKHP,FWKLP,FWKWP,FYOEP,PWGTP1,PWGTP2,PWGTP3,PWGTP4,PWGTP5,PWGTP6,PWGTP7,PWGTP8,PWGTP9,PWGTP10,PWGTP11,PWGTP12,PWGTP13,PWGTP14,PWGTP15,PWGTP16,PWGTP17,PWGTP18,PWGTP19,PWGTP20,PWGTP21,PWGTP22,PWGTP23,PWGTP24,PWGTP25,PWGTP26,PWGTP27,PWGTP28,PWGTP29,PWGTP30,PWGTP31,PWGTP32,PWGTP33,PWGTP34,PWGTP35,PWGTP36,PWGTP37,PWGTP38,PWGTP39,PWGTP40,PWGTP41,PWGTP42,PWGTP43,PWGTP44,PWGTP45,PWGTP46,PWGTP47,PWGTP48,PWGTP49,PWGTP50,PWGTP51,PWGTP52,PWGTP53,PWGTP54,PWGTP55,PWGTP56,PWGTP57,PWGTP58,PWGTP59,PWGTP60,PWGTP61,PWGTP62,PWGTP63,PWGTP64,PWGTP65,PWGTP66,PWGTP67,PWGTP68,PWGTP69,PWGTP70,PWGTP71,PWGTP72,PWGTP73,PWGTP74,PWGTP75,PWGTP76,PWGTP77,PWGTP78,PWGTP79,PWGTP80 FROM dbo.AcsBy320082010Pus
        ) AS Pus
    )
) myData
On Hus.SerialNoId = Pus.SerialNoId 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T22:00:06.657

您将表别名放在错误的位置，请尝试：

```
SELECT TOP 1000

Pus.SerialnoId,Hus.RT,Hus.DIVISION,Hus.REGION,Hus.ADJHSG,Hus.ADJINC,Hus.WGTP,Hus.NP,Hus.TYPE,Hus.ACR,Hus.AGS,Hus.BLD,Hus.BUS,Hus.CONP,Hus.ELEP,Hus.FS,Hus.FULP,Hus.GASP,Hus.HFL,Hus.INSP,Hus.KIT,Hus.MHP,Hus.MRGI,Hus.MRGP,Hus.MRGT,Hus.MRGX,Hus.RNTM,Hus.RNTP,Hus.SMP,Hus.TEL,Hus.TEN,Hus.VACS,Hus.VEH,Hus.WATP,Hus.YBL,Hus.FES,Hus.FINCP,Hus.FPARC,Hus.GRNTP,Hus.GRPIP,Hus.HHL,Hus.HHT,Hus.HINCP,Hus.HUGCL,Hus.HUPAC,Hus.HUPAOC,Hus.HUPARC,Hus.LNGI,Hus.MV,Hus.NOC,Hus.NPF,Hus.NPP,Hus.NR,Hus.NRC,Hus.OCPIP,Hus.PARTNER,Hus.PSF,Hus.R18,Hus.R60,Hus.R65,Hus.RESMODE,Hus.SMOCP,Hus.SMX,Hus.SRNT,Hus.SVAL,Hus.TAXP,Hus.WIF,Hus.WKEXREL,Hus.WORKSTAT,Hus.FACRP,Hus.FAGSP,Hus.FBDSP,Hus.FBLDP,Hus.FBUSP,Hus.FCONP,Hus.FELEP,Hus.FFSP,Hus.FFULP,Hus.FGASP,Hus.FHFLP,Hus.FINSP,Hus.FKITP,Hus.FMHP,Hus.FMRGIP,Hus.FMRGP,Hus.FMRGTP,Hus.FMRGXP,Hus.FPLMP,Hus.FRMSP,Hus.FRNTMP,Hus.FRNTP,Hus.FSMP,Hus.FSMXHP,Hus.FSMXSP,Hus.FTAXP,Hus.FTELP,Hus.FTENP,Hus.FVACSP,Hus.FVALP,Hus.FVEHP,Hus.FWATP,Hus.FYBLP,Hus.WGTP1,Hus.WGTP2,Hus.WGTP3,Hus.WGTP4,Hus.WGTP5,Hus.WGTP6,Hus.WGTP7,Hus.WGTP8,Hus.WGTP9,Hus.WGTP10,Hus.WGTP11,Hus.WGTP12,Hus.WGTP13,Hus.WGTP14,Hus.WGTP15,Hus.WGTP16,Hus.WGTP17,Hus.WGTP18,Hus.WGTP19,Hus.WGTP20,Hus.WGTP21,Hus.WGTP22,Hus.WGTP23,Hus.WGTP24,Hus.WGTP25,Hus.WGTP26,Hus.WGTP27,Hus.WGTP28,Hus.WGTP29,Hus.WGTP30,Hus.WGTP31,Hus.WGTP32,Hus.WGTP33,Hus.WGTP34,Hus.WGTP35,Hus.WGTP36,Hus.WGTP37,Hus.WGTP38,Hus.WGTP39,Hus.WGTP40,Hus.WGTP41,Hus.WGTP42,Hus.WGTP43,Hus.WGTP44,Hus.WGTP45,Hus.WGTP46,Hus.WGTP47,Hus.WGTP48,Hus.WGTP49,Hus.WGTP50,Hus.WGTP51,Hus.WGTP52,Hus.WGTP53,Hus.WGTP54,Hus.WGTP55,Hus.WGTP56,Hus.WGTP57,Hus.WGTP58,Hus.WGTP59,Hus.WGTP60,Hus.WGTP61,Hus.WGTP62,Hus.WGTP63,Hus.WGTP64,Hus.WGTP65,Hus.WGTP66,Hus.WGTP67,Hus.WGTP68,Hus.WGTP69,Hus.WGTP70,Hus.WGTP71,Hus.WGTP72,Hus.WGTP73,Hus.WGTP74,Hus.WGTP75,Hus.WGTP76,Hus.WGTP77,Hus.WGTP78,Hus.WGTP79,Hus.WGTP80 
,Pus.RT,Pus.SPORDER,Pus.ST,Pus.ADJINC,Pus.PWGTP,Pus.AGEP,Pus.CIT,Pus.COW,Pus.DDRS,Pus.DEYE,Pus.DOUT,Pus.DPHY,Pus.DREM,Pus.ENG,Pus.FER,Pus.GCL,Pus.GCM,Pus.GCR,Pus.INTP,Pus.JWMNP,Pus.JWRIP,Pus.JWTR,Pus.LANX,Pus.MAR,Pus.MIG,Pus.MIL,Pus.MLPA,Pus.MLPB,Pus.MLPC,Pus.MLPD,Pus.MLPE,Pus.MLPF,Pus.MLPG,Pus.MLPH,Pus.MLPI,Pus.MLPJ,Pus.MLPK,Pus.NWAB,Pus.NWAV,Pus.NWLA,Pus.NWLK,Pus.NWRE,Pus.OIP,Pus.PAP,Pus.RETP,Pus.SCH,Pus.SCHG,Pus.SCHL,Pus.SEMP,Pus.SEX,Pus.SSIP,Pus.SSP,Pus.WAGP,Pus.WKHP,Pus.WKL,Pus.WKW,Pus.YOEP,Pus.ANC,Pus.ANC1P,Pus.ANC2P,Pus.DECADE,Pus.DRIVESP,Pus.ESP,Pus.ESR,Pus.HISP,Pus.INDP,Pus.JWAP,Pus.JWDP,Pus.LANP,Pus.MIGPUMA,Pus.MIGSP,Pus.MSP,Pus.NAICSP,Pus.NATIVITY,Pus.OC,Pus.PAOC,Pus.PERNP,Pus.PINCP,Pus.POBP,Pus.POVPIP,Pus.POWPUMA,Pus.POWSP,Pus.QTRBIR,Pus.RAC1P,Pus.RAC2P,Pus.RAC3P,Pus.RACAIAN,Pus.RACASN,Pus.RACBLK,Pus.RACNHPI,Pus.RACNUM,Pus.RACSOR,Pus.RACWHT,Pus.RC,Pus.SFN,Pus.SFR,Pus.VPS,Pus.WAOB,Pus.FAGEP,Pus.FANCP,Pus.FCITP,Pus.FCOWP,Pus.FDDRSP,Pus.FDEYEP,Pus.FDOUTP,Pus.FDPHYP,Pus.FDREMP,Pus.FENGP,Pus.FESRP,Pus.FFERP,Pus.FGCLP,Pus.FGCMP,Pus.FGCRP,Pus.FHISP,Pus.FINDP,Pus.FINTP,Pus.FJWDP,Pus.FJWMNP,Pus.FJWRIP,Pus.FJWTRP,Pus.FLANP,Pus.FLANXP,Pus.FMARP,Pus.FMIGP,Pus.FMIGSP,Pus.FMILPP,Pus.FMILSP,Pus.FOCCP,Pus.FOIP,Pus.FPAP,Pus.FPOBP,Pus.FPOWSP,Pus.FRACP,Pus.FRELP,Pus.FRETP,Pus.FSCHGP,Pus.FSCHLP,Pus.FSCHP,Pus.FSEMP,Pus.FSEXP,Pus.FSSIP,Pus.FSSP,Pus.FWAGP,Pus.FWKHP,Pus.FWKLP,Pus.FWKWP,Pus.FYOEP,Pus.PWGTP1,Pus.PWGTP2,Pus.PWGTP3,Pus.PWGTP4,Pus.PWGTP5,Pus.PWGTP6,Pus.PWGTP7,Pus.PWGTP8,Pus.PWGTP9,Pus.PWGTP10,Pus.PWGTP11,Pus.PWGTP12,Pus.PWGTP13,Pus.PWGTP14,Pus.PWGTP15,Pus.PWGTP16,Pus.PWGTP17,Pus.PWGTP18,Pus.PWGTP19,Pus.PWGTP20,Pus.PWGTP21,Pus.PWGTP22,Pus.PWGTP23,Pus.PWGTP24,Pus.PWGTP25,Pus.PWGTP26,Pus.PWGTP27,Pus.PWGTP28,Pus.PWGTP29,Pus.PWGTP30,Pus.PWGTP31,Pus.PWGTP32,Pus.PWGTP33,Pus.PWGTP34,Pus.PWGTP35,Pus.PWGTP36,Pus.PWGTP37,Pus.PWGTP38,Pus.PWGTP39,Pus.PWGTP40,Pus.PWGTP41,Pus.PWGTP42,Pus.PWGTP43,Pus.PWGTP44,Pus.PWGTP45,Pus.PWGTP46,Pus.PWGTP47,Pus.PWGTP48,Pus.PWGTP49,Pus.PWGTP50,Pus.PWGTP51,Pus.PWGTP52,Pus.PWGTP53,Pus.PWGTP54,Pus.PWGTP55,Pus.PWGTP56,Pus.PWGTP57,Pus.PWGTP58,Pus.PWGTP59,Pus.PWGTP60,Pus.PWGTP61,Pus.PWGTP62,Pus.PWGTP63,Pus.PWGTP64,Pus.PWGTP65,Pus.PWGTP66,Pus.PWGTP67,Pus.PWGTP68,Pus.PWGTP69,Pus.PWGTP70,Pus.PWGTP71,Pus.PWGTP72,Pus.PWGTP73,Pus.PWGTP74,Pus.PWGTP75,Pus.PWGTP76,Pus.PWGTP77,Pus.PWGTP78,Pus.PWGTP79,Pus.PWGTP80

FROM 

    (select * FROM 
        (select serialnoId,RT,DIVISION,PUMA,REGION,ST,ADJHSG,ADJINC,WGTP,NP,TYPE,ACR,AGS,BLD,BUS,CONP,ELEP,FS,FULP,GASP,HFL,INSP,KIT,MHP,MRGI,MRGP,MRGT,MRGX,RNTM,RNTP,SMP,TEL,TEN,VACS,VEH,WATP,YBL,FES,FINCP,FPARC,GRNTP,GRPIP,HHL,HHT,HINCP,HUGCL,HUPAC,HUPAOC,HUPARC,LNGI,MV,NOC,NPF,NPP,NR,NRC,OCPIP,PARTNER,PSF,R18,R60,R65,RESMODE,SMOCP,SMX,SRNT,SVAL,TAXP,WIF,WKEXREL,WORKSTAT,FACRP,FAGSP,FBDSP,FBLDP,FBUSP,FCONP,FELEP,FFSP,FFULP,FGASP,FHFLP,FINSP,FKITP,FMHP,FMRGIP,FMRGP,FMRGTP,FMRGXP,FPLMP,FRMSP,FRNTMP,FRNTP,FSMP,FSMXHP,FSMXSP,FTAXP,FTELP,FTENP,FVACSP,FVALP,FVEHP,FWATP,FYBLP,WGTP1,WGTP2,WGTP3,WGTP4,WGTP5,WGTP6,WGTP7,WGTP8,WGTP9,WGTP10,WGTP11,WGTP12,WGTP13,WGTP14,WGTP15,WGTP16,WGTP17,WGTP18,WGTP19,WGTP20,WGTP21,WGTP22,WGTP23,WGTP24,WGTP25,WGTP26,WGTP27,WGTP28,WGTP29,WGTP30,WGTP31,WGTP32,WGTP33,WGTP34,WGTP35,WGTP36,WGTP37,WGTP38,WGTP39,WGTP40,WGTP41,WGTP42,WGTP43,WGTP44,WGTP45,WGTP46,WGTP47,WGTP48,WGTP49,WGTP50,WGTP51,WGTP52,WGTP53,WGTP54,WGTP55,WGTP56,WGTP57,WGTP58,WGTP59,WGTP60,WGTP61,WGTP62,WGTP63,WGTP64,WGTP65,WGTP66,WGTP67,WGTP68,WGTP69,WGTP70,WGTP71,WGTP72,WGTP73,WGTP74,WGTP75,WGTP76,WGTP77,WGTP78,WGTP79,WGTP80 from dbo.AcsBy320052007Hus
        UNION ALL 
        select serialnoId,RT,DIVISION,PUMA,REGION,ST,ADJHSG,ADJINC,WGTP,NP,TYPE,ACR,AGS,BLD,BUS,CONP,ELEP,FS,FULP,GASP,HFL,INSP,KIT,MHP,MRGI,MRGP,MRGT,MRGX,RNTM,RNTP,SMP,TEL,TEN,VACS,VEH,WATP,YBL,FES,FINCP,FPARC,GRNTP,GRPIP,HHL,HHT,HINCP,HUGCL,HUPAC,HUPAOC,HUPARC,LNGI,MV,NOC,NPF,NPP,NR,NRC,OCPIP,PARTNER,PSF,R18,R60,R65,RESMODE,SMOCP,SMX,SRNT,SVAL,TAXP,WIF,WKEXREL,WORKSTAT,FACRP,FAGSP,FBDSP,FBLDP,FBUSP,FCONP,FELEP,FFSP,FFULP,FGASP,FHFLP,FINSP,FKITP,FMHP,FMRGIP,FMRGP,FMRGTP,FMRGXP, FPLMP,FRMSP,FRNTMP,FRNTP,FSMP,FSMXHP,FSMXSP,FTAXP,FTELP,FTENP,FVACSP,FVALP,FVEHP,FWATP,FYBLP,WGTP1,WGTP2,WGTP3,WGTP4,WGTP5,WGTP6,WGTP7,WGTP8,WGTP9,WGTP10,WGTP11,WGTP12,WGTP13,WGTP14,WGTP15,WGTP16,WGTP17,WGTP18,WGTP19,WGTP20,WGTP21,WGTP22,WGTP23,WGTP24,WGTP25,WGTP26,WGTP27,WGTP28,WGTP29,WGTP30,WGTP31,WGTP32,WGTP33,WGTP34,WGTP35,WGTP36,WGTP37,WGTP38,WGTP39,WGTP40,WGTP41,WGTP42,WGTP43,WGTP44,WGTP45,WGTP46,WGTP47,WGTP48,WGTP49,WGTP50,WGTP51,WGTP52,WGTP53,WGTP54,WGTP55,WGTP56,WGTP57,WGTP58,WGTP59,WGTP60,WGTP61,WGTP62,WGTP63,WGTP64,WGTP65,WGTP66,WGTP67,WGTP68,WGTP69,WGTP70,WGTP71,WGTP72,WGTP73,WGTP74,WGTP75,WGTP76,WGTP77,WGTP78,WGTP79,WGTP80 from dbo.AcsBy320082010Hus 
        )
    ) AS Hus
    INNER JOIN 
    (select * FROM 
        (
        SELECT serialnoId,RT,SPORDER,PUMA,ST,ADJINC,PWGTP,AGEP,CIT,COW,DDRS,DEYE,DOUT,DPHY,DREM,ENG,FER,GCL,GCM,GCR,INTP,JWMNP,JWRIP,JWTR,LANX,MAR,MIG,MIL,MLPA,MLPB,MLPC,MLPD,MLPE,MLPF,MLPG,MLPH,MLPI,MLPJ,MLPK,NWAB,NWAV,NWLA,NWLK,NWRE,OIP,PAP,RETP,SCH,SCHG,SCHL,SEMP,SEX,SSIP,SSP,WAGP,WKHP,WKL,WKW,YOEP,ANC,ANC1P,ANC2P,DECADE,DRIVESP,ESP,ESR,HISP,INDP,JWAP,JWDP,LANP,MIGPUMA,MIGSP,MSP,NAICSP,NATIVITY,OC,PAOC,PERNP,PINCP,POBP,POVPIP,POWPUMA,POWSP,QTRBIR,RAC1P,RAC2P,RAC3P,RACAIAN,RACASN,RACBLK,RACNHPI,RACNUM,RACSOR,RACWHT,RC,SFN,SFR,VPS,WAOB,FAGEP,FANCP,FCITP,FCOWP,FDDRSP,FDEYEP,FDOUTP,FDPHYP,FDREMP,FENGP,FESRP,FFERP,FGCLP,FGCMP,FGCRP,FHISP,FINDP,FINTP,FJWDP,FJWMNP,FJWRIP,FJWTRP,FLANP,FLANXP,FMARP,FMIGP,FMIGSP,FMILPP,FMILSP,FOCCP,FOIP,FPAP,FPOBP,FPOWSP,FRACP,FRELP,FRETP,FSCHGP,FSCHLP,FSCHP,FSEMP,FSEXP,FSSIP,FSSP,FWAGP,FWKHP,FWKLP,FWKWP,FYOEP,PWGTP1,PWGTP2,PWGTP3,PWGTP4,PWGTP5,PWGTP6,PWGTP7,PWGTP8,PWGTP9,PWGTP10,PWGTP11,PWGTP12,PWGTP13,PWGTP14,PWGTP15,PWGTP16,PWGTP17,PWGTP18,PWGTP19,PWGTP20,PWGTP21,PWGTP22,PWGTP23,PWGTP24,PWGTP25,PWGTP26,PWGTP27,PWGTP28,PWGTP29,PWGTP30,PWGTP31,PWGTP32,PWGTP33,PWGTP34,PWGTP35,PWGTP36,PWGTP37,PWGTP38,PWGTP39,PWGTP40,PWGTP41,PWGTP42,PWGTP43,PWGTP44,PWGTP45,PWGTP46,PWGTP47,PWGTP48,PWGTP49,PWGTP50,PWGTP51,PWGTP52,PWGTP53,PWGTP54,PWGTP55,PWGTP56,PWGTP57,PWGTP58,PWGTP59,PWGTP60,PWGTP61,PWGTP62,PWGTP63,PWGTP64,PWGTP65,PWGTP66,PWGTP67,PWGTP68,PWGTP69,PWGTP70,PWGTP71,PWGTP72,PWGTP73,PWGTP74,PWGTP75,PWGTP76,PWGTP77,PWGTP78,PWGTP79,PWGTP80 FROM dbo.AcsBy320052007Pus
        UNION ALL 
        select serialnoId,RT,SPORDER,PUMA,ST,ADJINC,PWGTP,AGEP,CIT,COW,DDRS,DEYE,DOUT,DPHY,DREM,ENG,FER,GCL,GCM,GCR,INTP,JWMNP,JWRIP,JWTR,LANX,MAR,MIG,MIL,MLPA,MLPB,MLPC,MLPD,MLPE,MLPF,MLPG,MLPH,MLPI,MLPJ,MLPK,NWAB,NWAV,NWLA,NWLK,NWRE,OIP,PAP,RETP,SCH,SCHG,SCHL,SEMP,SEX,SSIP,SSP,WAGP,WKHP,WKL,WKW,YOEP,ANC,ANC1P,ANC2P,DECADE,DRIVESP,ESP,ESR,HISP,INDP,JWAP,JWDP,LANP,MIGPUMA,MIGSP,MSP,NAICSP,NATIVITY,OC,PAOC,PERNP,PINCP,POBP,POVPIP,POWPUMA,POWSP,QTRBIR,RAC1P,RAC2P,RAC3P,RACAIAN,RACASN,RACBLK,RACNHPI,RACNUM,RACSOR,RACWHT,RC,SFN,SFR,VPS,WAOB,FAGEP,FANCP,FCITP,FCOWP,FDDRSP,FDEYEP,FDOUTP,FDPHYP,FDREMP,FENGP,FESRP,FFERP,FGCLP,FGCMP,FGCRP,FHISP,FINDP,FINTP,FJWDP,FJWMNP,FJWRIP,FJWTRP,FLANP,FLANXP,FMARP,FMIGP,FMIGSP,FMILPP,FMILSP,FOCCP,FOIP,FPAP,FPOBP,FPOWSP,FRACP,FRELP,FRETP,FSCHGP,FSCHLP,FSCHP,FSEMP,FSEXP,FSSIP,FSSP,FWAGP,FWKHP,FWKLP,FWKWP,FYOEP,PWGTP1,PWGTP2,PWGTP3,PWGTP4,PWGTP5,PWGTP6,PWGTP7,PWGTP8,PWGTP9,PWGTP10,PWGTP11,PWGTP12,PWGTP13,PWGTP14,PWGTP15,PWGTP16,PWGTP17,PWGTP18,PWGTP19,PWGTP20,PWGTP21,PWGTP22,PWGTP23,PWGTP24,PWGTP25,PWGTP26,PWGTP27,PWGTP28,PWGTP29,PWGTP30,PWGTP31,PWGTP32,PWGTP33,PWGTP34,PWGTP35,PWGTP36,PWGTP37,PWGTP38,PWGTP39,PWGTP40,PWGTP41,PWGTP42,PWGTP43,PWGTP44,PWGTP45,PWGTP46,PWGTP47,PWGTP48,PWGTP49,PWGTP50,PWGTP51,PWGTP52,PWGTP53,PWGTP54,PWGTP55,PWGTP56,PWGTP57,PWGTP58,PWGTP59,PWGTP60,PWGTP61,PWGTP62,PWGTP63,PWGTP64,PWGTP65,PWGTP66,PWGTP67,PWGTP68,PWGTP69,PWGTP70,PWGTP71,PWGTP72,PWGTP73,PWGTP74,PWGTP75,PWGTP76,PWGTP77,PWGTP78,PWGTP79,PWGTP80 FROM dbo.AcsBy320082010Pus
        )
    ) AS Pus

On Hus.SerialNoId = Pus.SerialNoId 
```

# ruby - 创建文件名时冒号 (:) 显示为正斜杠 (/)

> ID：13298434
> 
> 赞同：33
> 
> 时间：2012-11-08T21:51:16.383
> 
> 标签：ruby, macos

我正在使用日期和时间来标记我正在创建的新文件，但是当我查看文件时，冒号是正斜杠。我正在使用 10.7+ 的 Mac 上开发

这是我正在使用的代码：

```
 File.open("#{time.hour} : 00, #{time.month}-#{time.day}-#{time.year}", "a") do |mFile|
        mFile.syswrite("#{pKey} - #{tKey}: \n") 
        mFile.syswrite("Items closed: #{itemsClosed} | Total items: #{totalItems} | Percent closed: % #{pClosed} \n") 
        mFile.syswrite("\n")
        mFile.close
     end 
```

这是输出（假设时间是下午 1 点）：

```
13 / 00, 11-8-2012 
```

为什么会发生这种情况，我该如何解决？我希望输出为：

```
13:00, 11-8-2012 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-11-08T21:54:09.277

曾几何时，在 Mac OS X 之前，`:`是目录分隔符而不是`/`. 显然 OS X 10.7 仍在尝试修复这样的程序。`:`如果你真的需要在那里，我不知道你如何解决这个问题。我会省略它:-)。

编辑：经过更多搜索后，[这篇 USENIX 论文](http://www.wsanchez.net/papers/USENIX_2000/)描述了正在发生的事情。他们使用的规则显然是这样的：

> 另一个明显的问题是 HFS+（冒号，':'）和 UFS（斜杠，'/'）之间的路径分隔符不同。这也意味着 HFS+ 文件名可能包含斜杠字符而不是冒号，而 UFS 文件名则相反。这很容易解决，尽管它涉及来回转换字符串。在读取和写入磁盘格式时，内核 VFS 层中的 HFS+ 实现将冒号转换为斜杠，反之亦然。所以在磁盘上，分隔符是一个冒号，但在 VFS 层（因此它上面的任何东西和内核，例如 libc）它是一个斜杠。然而，传统的 Mac OS 工具包需要冒号，因此在 BSD 层之上，核心 Carbon 工具包进行了另一种翻译。结果是 Carbon 应用程序看到冒号，而其他人看到斜杠。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-09T21:46:51.533

虽然 OS X“是”一个 unix 操作系统，但它也从 Mac OS 9 派生了相当多的代码、API、标准等。在 unix 中，文件路径以“/”分隔元素，而“:”在单个文件和目录的名称。在 Mac OS 9 中，情况正好相反：文件路径在元素之间使用“:”，而在单个文件名中允许使用“/”。当 Apple 开发 OS X 时，他们最终不得不支持一些使用 unix 风格文件路径的 API，以及一些使用 OS 9 风格路径的 API，并且它们都必须能够在同一个文件系统上工作。

他们所做的是根据上下文交换分隔符和允许的字符。如果您编写（/运行）一个使用 unix API 访问文件系统的程序，您将看到文件名中带有冒号和斜线分隔路径元素的文件。如果您编写（/运行）一个使用旧的 OS 9 API（或其衍生产品）的程序，您会看到文件名中带有斜杠，而冒号分隔路径元素。有关更多讨论，请参阅[Apple 的开发人员 Q&A #1392](http://developer.apple.com/library/mac/#qa/qa1392/_index.html)和[有关在 AppleScript 中指定路径的说明。](https://developer.apple.com/library/mac/#documentation/applescript/conceptual/applescriptlangguide/conceptual/ASLR_fundamentals.html#//apple_ref/doc/uid/TP40000983-CH218-SW11)

（还有一些其他差异。unix 路径如果以分隔符（“/”）开头，则为绝对路径，绝对路径从根卷的顶部开始。OS 9 路径如果*不*开始，则为绝对路径使用分隔符，并且绝对 OS 9 路径以卷名开头。因此，unix 路径“/tmp/foo:bar”等价于 OS 9 路径“Macintosh HD:tmp:foo/bar”。）

*那么，文件名中真正*的字符是斜线还是冒号？好吧，文件名是一个相当抽象的东西，但是如果您询问实际存储在磁盘上的字节......如果它在 HFS+（又名 Mac OS 扩展）卷上，它被存储在一个文件系统中旨在与 OS 9（好吧，技术上是 Mac OS 8.1）API 一起使用，因此它允许斜杠但禁止冒号，因此在 HFS+ 卷上，文件将“真正”在名称中有斜杠。OTOH，如果您将文件存储在 unixish 卷上，它将使用 unix 约定存储，并且“真正”的名称中有一个冒号。但是除非您从磁盘读取原始字节或编写文件系统驱动程序，否则差异并不重要......

最后，为什么 Finder 将有争议的文件名字符显示为斜杠而不是冒号？我很确定这主要是惯性。Finder 对此甚至不完全一致，因为如果您使用其转到文件夹选项 (Command-Shift-G) 并输入“/Users/Shared”，它会将其视为 unix 路径。如果你输入“Macintosh HD:Users:Shared”，它不知道你在说什么。此外，如果您运行`touch /tmp/foo:bar`，请尝试使用 Go To Folder 来访问它：

*   输入“/tmp/foo:bar”有效。
*   输入“/tmp/fo”，然后按 Tab 将其自动完成为“/tmp/foo/bar/”，这样就可以了。
*   输入 "/tmp/foo/bar/" 失败，即使它与自动完成功能完全相同。
*   输入“/tmp/foo”，然后按 tab 自动完成到“/tmp/foo/”，它不能再自动完成，根本不起作用。

更新：正如 Konrad Rudolph 所指出的，从 El Capitan 开始，Go To Folder 行为已经改变，我不再有任何方法可以使用它来访问包含有争议角色的文件夹。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-08T23:38:11.287

[为了在处理文件](http://www.ruby-doc.org/core-1.9.3/File.html)名、路径和各种操作系统时尽可能避免出现问题，您确实应该利用内置的[File](http://www.ruby-doc.org/core-1.9.3/File.html)方法，如[`join`](http://www.ruby-doc.org/core-1.9.3/File.html#method-c-join)、[`dirname`](http://www.ruby-doc.org/core-1.9.3/File.html#method-c-dirname)、[`basename`](http://www.ruby-doc.org/core-1.9.3/File.html#method-c-basename)、[`extname`](http://www.ruby-doc.org/core-1.9.3/File.html#method-c-extname)和[`split`](http://www.ruby-doc.org/core-1.9.3/File.html#method-c-split). 他们试图避免系统依赖，并尝试为您提供一种跨平台生成有效文件名的编程方式。

当Apple使用旧的Macintosh操作系统时，这个问题要严重得多。迁移到 Mac OS 有所帮助，因为他们放弃了使用`:`作为分隔符，但是那些手动构建文件名的人发现代码破坏，因为它生成了错误的分隔符，而利用库解决了这个问题。

因为这个特殊问题不是错误，也不是 Ruby 的控制而是 Apple 的，所以我想说这根本不是 Ruby 问题，这是一个可视化问题，如果您希望文件名类似于 Finder 显示的相应代码.

# string - 以单元格高效方式搜索字符串

> ID：13298436
> 
> 赞同：1
> 
> 时间：2012-11-08T21:51:25.753
> 
> 标签：string, matlab, search, cell

这是我在这里的第一篇文章，所以请多多包涵:-)。

问题背景：我有多个表单的文本文件：

```
<ticker>,<date>,<open>,<high>,<low>,<close>,<vol>
A,20120904 0926,37.14,37.14,37.14,37.14,693
.
.
.
ZZ,20120904 1602,1.6,1.6,1.6,1.6,11771 
```

正如您可能已经猜到的那样，它是股票价格。当我将它加载到 matlab 时，它会创建一个结构，其中包含一个数组（数值）和一个单元格（用于字符串），此时我可以使用它。问题：

我想找到在数组中搜索特定符号（~70K 行）的最有效方法。虽然进行简单或减半搜索很容易，但我认为这些方法对于提取给定符号/字符串的开始和结束索引的多个文件和/或多个搜索不是很有用。我在这里查看了过去的帖子并阅读了有关 Rabin-Karp、Bitap 和哈希表的信息，但我不确定它们中的任何一个都能完全满足我的需求。

到目前为止，我倾向于通过单元格运行一次并为每个字母（即“A”、“B”等）创建一个哈希表，然后运行一个简单的搜索或您可能建议的任何其他内容:-)。散列的原因是我可能使用同一个文件来查找不同的股票代码，所以我认为运行一次并标记字母从长远来看会降低复杂性。

你对此事有何看法？我在正确的方向吗？我正在使用matlab顺便说一句。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-08T21:41:08.143

您可以将所有代码存储在结构数组中。每列都是一个属性。假设您有非空值，您可以执行以下操作，

```
tickers = [S.tickers];
dates = [S.date]; 
```

您可以轻松地进行查询以从结构数组 S 中获取所需的索引。您可以通过创建以股票名称作为键的索引来进一步按股票名称索引股票代码。

# algorithm - Dijkstras 算法 - 父节点？

> ID：13298439
> 
> 赞同：0
> 
> 时间：2012-11-08T21:51:43.640
> 
> 标签：algorithm, graph, theory

我的教授希望我们为网络中所有其他节点的单个源节点实现它。他说通过使用父节点来跟踪最短路径，但我不知道这在算法的上下文中意味着什么。

我可以或多或少正确地实现我的代码，因为我的输出距离对于我运行它的任何网络都是正确的。

但是大多数在线资源都在讨论访问节点，并在您探索所有相邻节点后将它们标记为已访问。因此，例如，如果节点 A 和 B 与节点 C 相邻，并且到 A 的新距离小于 B 的距离，我是否将节点 C 标记为已访问？然后，如果我到达节点 A 并意识到它引导我向下的路径实际上会导致已经记录的距离实际上更大，会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:02:39.797

为了从 Dystra 的算法中获得路径（而不仅仅是成本），而不是为每个节点保存最佳成本，而是保存对 (best_cost, from_where)。from-where 是产生 best_cost 的相邻节点的句柄。

然后，您可以按照 from_where 指针一直返回原点以获取最佳路径。我怀疑“父母”是他在 2 元组/对中的 from_where 元素的名字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:03:51.813

> 我的教授希望我们为网络中所有其他节点的单个源节点实现它。他说通过使用父节点来跟踪最短路径，但我不知道这在算法的上下文中意味着什么。

好吧，这只是意味着对于每个节点，您将哪个节点存储在它的最短路径中。这样，一旦你完成了你的算法，你就可以以相反的顺序走最短路径，不仅可以找到最短路径的距离，还可以找到最短路径本身。

> 但是大多数在线资源都在讨论访问节点，并在您探索所有相邻节点后将它们标记为已访问。

在它是距离最短的未访问节点之后标记已访问的节点。除非存在负距离，否则您将无法找到距离更短的路径（即使那样，如果您的图表有一个距离小于零的循环，这只是一个问题）。

# windows - 从一个 Windows 快捷方式（.bat？）启动多个 virtualbox VM

> ID：13298441
> 
> 赞同：1
> 
> 时间：2012-11-08T21:51:55.683
> 
> 标签：windows, batch-file, virtualbox

现在我正在使用以下 Windows 快捷方式启动单个 VM：

"C:\Program Files\Oracle\VirtualBox\VBoxManage.exe" startvm prima7-clone --type headless

它将虚拟机“prima7-clone”作为无头启动。这一切都很好，花花公子。虽然我想同时启动一个额外的虚拟机。是否可以在 Windows 快捷方式中启动多个目标？我正在阅读我可能可以使用批处理文件来做到这一点......但我缺乏 .bat 的经验。有人有任何解决方案吗？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:39:04.783

在批处理文件中试试这个：

```
cd MYDIR
start "C:\Progra~1\Oracle\VirtualBox\VBoxManage.exe" startvm VM1 --type headless
start "C:\Progra~1\Oracle\VirtualBox\VBoxManage.exe" startvm VM2 --type headless 
```

将这些内容保存在文件 something.bat 中。

注意 1：您可能需要将 MYDIR 更改为您想要的任何目录，（通常`start in`是该快捷方式的目录。） 注意
2：根据需要更改 VM 的名称。

# objective-c - iOS6：MFMailComposeViewController 加载慢，闪黑屏；MailCompositionS 开始占用内存

> ID：13298448
> 
> 赞同：16
> 
> 时间：2012-11-08T21:52:08.737
> 
> 标签：objective-c, ios6, mfmailcomposeviewcontroller, mfmailcomposer

在 iOS 6 上，在发送了几封电子邮件后（通过使用 MFMailComposeViewController），电子邮件屏幕的打开速度变得非常慢——在第一次打开时，几秒钟内没有填充任何字段（没有主题、没有正文等），并且最终（在发送大约 8 条消息之后），在电子邮件视图控制器正确显示之前，会向用户显示黑屏几秒钟。

在显示每个黑屏之前，日志会吐出以下行：

> [MFMailComposeRemoteViewController: ....] 等待来自 com.apple.MailCompositionService 的栅栏屏障超时

此外，在 iOS6 上使用 MFMailComposeViewController 会导致 MailCompositionS 进程开始占用内存（在我的 iPhone 上一直到大约 260MB）。我假设这是 MFMailComposeViewController 显示问题的原因。

在 iOS 5 上一切正常。此问题仅在 iOS 6 上发生。

有没有人找到解决这个问题的方法？

谢谢！

代码是标准的，但无论如何我都会包含它：

```
-(IBAction)doEmailLog:(id)sender 
{    
    if( [self canSendMail] )
    {       
        // create the compose message view controller
        MFMailComposeViewController* mailComposer = [[MFMailComposeViewController alloc] init];

        // this class will handle the cancel / send results
        mailComposer.mailComposeDelegate = self;

        // fill in the header and body
        [mailComposer setSubject:@"My Subject"];
        [mailComposer setMessageBody:@"My message body" isHTML:NO];

        // attach log file
        if ([[NSFileManager defaultManager] fileExistsAtPath:filename])
        { 
            NSData *data = [NSData dataWithContentsOfFile:filename];
            [mailComposer addAttachmentData:data mimeType:@"text/plain" fileName:filename];
        }

        // show the view controller
        [self presentViewController:mailComposer animated:YES completion:^{LogTrace(@"Presented mail view controller");}];
    }
    else
    {
        ...
    }
}

-(void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error
{
    ...

    // dismiss the compose message view controller
    [self dismissViewControllerAnimated:YES completion:^{LogTrace(@"Finished dismissing mail controller");}];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T22:05:24.547

在 ios 6 上，邮件编写器是它自己的应用程序（在你的内部）:: [http://oleb.net/blog/2012/10/remote-view-controllers-in-ios-6/](http://oleb.net/blog/2012/10/remote-view-controllers-in-ios-6/)

* * *

**如果您使用 ARC**，该代码对我来说看起来不错，否则它会泄漏并且在 ios6 上可能会导致 x XPC 遥控器

如果那里一切都好，我会把它归咎于苹果新处理 XPC 中的一个错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T15:47:40.063

还有另一种可能的解决方案：

从外观方法中删除自定义字体，如果有的话

[https://stackoverflow.com/a/19910337/104170](https://stackoverflow.com/a/19910337/104170)

# sql-server - SQL帮助，添加结果创建单表？

> ID：13298459
> 
> 赞同：1
> 
> 时间：2012-11-08T21:52:42.490
> 
> 标签：sql-server

如何添加每个结果的总和，以便最终结果会给我一个如下表？

```
日期 | 总和1 | 总和2
1108 | 总和1 | 总和2
等等
```

```
DECLARE @StartDate      int
DECLARE @EndDate  int

SET         @StartDate  = XXXXXX
SET         @EndDate    = XXXXXX

SELECT                  ODATE,
                        SUM(CASE WHEN [COLUMN1] IN (X,X) THEN 1 ELSE 0 END)+ SUM(CASE WHEN [COLUMN3] IN (X) THEN 1 ELSE 0 END) AS SUM1,
                      SUM(CASE WHEN [COLUMN2] IN (X,X) THEN 1 ELSE 0 END) AS SUM2

FROM              [Db1]..
WHERE             ODATE Between @StartDate And @EndDate

UNION ALL
SELECT                  ODATE,
                        SUM(CASE WHEN [COLUMN1] IN (X,X) THEN 1 ELSE 0 END)+ SUM(CASE WHEN [COLUMN3] IN (X) THEN 1 ELSE 0 END) AS SUM1,
                      SUM(CASE WHEN [COLUMN2] IN (X,X) THEN 1 ELSE 0 END) AS SUM2        

FROM              [Db2]..
WHERE             ODATE Between @StartDate And @EndDate

UNION ALL
SELECT                  ODATE,
                        SUM(CASE WHEN [COLUMN1] IN (X,X) THEN 1 ELSE 0 END)+ SUM(CASE WHEN [COLUMN3] IN (X) THEN 1 ELSE 0 END) AS SUM1,
                      SUM(CASE WHEN [COLUMN2] IN (X,X) THEN 1 ELSE 0 END) AS SUM2        

FROM              [Db3]..
WHERE             ODATE Between @StartDate And @EndDate 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:06:04.387

包装您的选择，并在其上运行 GROUP BY

```
DECLARE @StartDate      int
DECLARE @EndDate  int

SET         @StartDate  = XXXXXX
SET         @EndDate    = XXXXXX

SELECT ODATE, SUM(SUM1) Sum1, SUM(SUM2) Sum2
(
  ... your big select ...
) X
GROUP BY ODATE; 
```

# codeigniter - 如何使用 CodeIgniter 删除 URL 中的控制器名称？

> ID：13298460
> 
> 赞同：0
> 
> 时间：2012-11-08T21:52:44.493
> 
> 标签：codeigniter, url-rewriting, routing

我有在 url 中都包含 /main/ 的 url，因为它是我的主控制器。我想摆脱它。

我在用户指南中了解到路由类只会重新路由我的 URL，而不是隐藏其中的一部分（根据他们的文档，它是第 1 段）。因此，我发现了这个：

```
$route['(:any)'] = "auth/$1"; 
```

但我有 404 错误（这是我对 routing.php 所做的唯一修改）

我相信我必须在 .htaccess 中执行此操作，但我不知道它的语法应该是什么。现在，我的 .htaccess 是这个：

```
<IfModule mod_rewrite.c>
    SetEnv MAGIC_QUOTES 0
    SetEnv PHP_VER 5
# For security reasons, Option followsymlinks cannot be overridden.
#   Options +FollowSymlinks -MultiViews
    Options +SymLinksIfOwnerMatch -MultiViews
    RewriteEngine On
    DirectoryIndex index.php

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond $1 !^(index\.php|images|robots\.txt|css)
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

    ErrorDocument 404 /index.php
</IfModule> 
```

我正在使用几个控制器，我的链接类似于这个：

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T22:19:15.057

尝试这个：

```
 $route['blog'] = 'blog';  // seem stupid but otherwise the (:any) route below will send it to main
  $route['blog/(:any)'] = 'blog/$1'; // to have blog cotroller work
  $route['blog/(:any)/(:any)'] = 'blog/$1/$2';
  // repeat for other controllers

 $route['(:any)'] = "main/$1";
 $route['(:any)/(:any)'] = "main/$1/$2"; // if you use other uri parameter
 $route['default_controller'] = 'main'; // to have your main page work... 
```

并将所有对其他控制器的调用放在此指令之前，因为这将阻止所有其他控制器调用。

# iphone - 制作秘密/隐藏视图

> ID：13298462
> 
> 赞同：0
> 
> 时间：2012-11-08T21:53:02.100
> 
> 标签：iphone, uibutton, gestures

我有一个笑话应用程序，它有一个对“受害者”隐藏的视图/菜单。我的想法是通过“隐形”按钮和/或多次点击或秘密手势使玩笑者可以访问这个隐藏的视图。该应用程序可能会首先由笑话受害者打开，我想防止受害者意外发现秘密视图。

我不喜欢使用假的主屏幕。

我可以理解通过应用程序审查过程获得这样的东西可能是一个挑战。考虑到这一点，1）什么是访问隐藏菜单的良好“应用程序审批流程友好”机制和 2）您如何传达魔术/笑话应用程序的“秘密”（在这种情况下，如何访问秘密菜单）而不在应用程序的启动屏幕或 iTunes 应用程序商店描述中显示它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:49:22.777

> 1）什么是访问隐藏菜单的良好“应用程序审批流程友好”机制

菜单是保密的，所以像一个没有文本或背景颜色的按钮就足够了。如果你想变得更高级，你可以尝试使用 UIGestureRecognizers 并让用户在特定区域滑动，或者在屏幕上绘制自定义图案以激活菜单。这是一个不可见按钮方法的示例：

```
// place this in viewDidLoad, or something similar
UIButton *button = [[UIButton alloc] init];
[button setFrame:CGRectMake(10,10,50,50)];
[button addTarget:self action:@selector(showMenu:) forControlEvents:UIControlEventTouchUpInside];
[[self view] addSubview:button];

-(void)showMenu:(id)sender {

    // here I just present an alert, saying that the user tapped the "hidden" button

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"You Found It!" message:@"You found thie hidden button.  Congratulations." delegate:nil cancelButtonTitle:@"Cool!" otherButtonTitles:nil];
    [alert show];

} 
```

> 2）你如何传达魔术/笑话应用程序的“秘密”（在这种情况下，如何访问秘密菜单）而不在应用程序的启动屏幕或 iTunes 应用程序商店描述上显示它？

您可以在应用程序中说出您想要提示的内容。不过，当您提交申请时，我会告诉您该菜单存在于审核说明中，这样 Apple 审核员就不会对其视而不见。

# java - 将 0xFF 转换为 RGB 值

> ID：13298464
> 
> 赞同：-1
> 
> 时间：2012-11-08T21:53:08.823
> 
> 标签：java, rgb, processing, hex

我有一段用于 Java 应用程序的代码，我正在尝试将等于蓝色的 0xFF 的十六进制值替换为最好由 RGB 值表示的不同颜色，这可能吗？

```
void trailBlurEffect(int blendAmount, PGraphics buffer) {
   for (int i = 0, y = 0; y < buffer.height; y++) {
     for (int x = 0; x < buffer.width; x++, i++) {
       buffer.pixels[i] = 0xff000000 | (( buffer.pixels[i]  & 0xFF) * blendAmount) >> 8;
     }
   }
   nodeBuffer.updatePixels();
} 
```

编辑：我正在尝试编写不同的颜色，但是我无法获得有效的结果，例如通过将 0xFF(blue) 替换为红色的十六进制等效值 = 0xFF0000 我的画布什么也没画。我的代码来自这个例子：openprocessing.org/sketch/52388

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T02:37:31.650

我不知道二进制数学，但我认为这就是正在做的事情

```
 buffer.pixels[i]  & 0xFF 
```

0xFF 是要应用于 buffer.pixels[i] 的掩码。因此，这不是您获得所需颜色的方式。您可以尝试在 draw() 中的 ellipse() 之前调用 fill(wantedColor)，但正如作者在您指出的页面中所说，对于他只使用蓝色通道的轨迹，我认为轨迹仍然是蓝色的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T22:32:31.633

目前还不清楚您要完成什么。RGB 颜色以三个不同的数字给出：红色、绿色和蓝色值。每个值的范围为 0 - 255。0xFF 不是 RGB 值，它是代表一种颜色的值。要获得完整的 RGB 颜色，您必须使用 0xFF0000 之类的东西。所以不，你不能神奇地将 0xFF 变成蓝色，你还必须知道其他颜色的值。您可以获取三个值，然后从那里制定颜色，IE 获取一个 rValue、gValue 和 bValue，然后将它们全部粘贴在一起以获得 0xRRGGBB 的经典 RGB 格式。

希望这可以帮助！

# sharepoint - 从 $(xData.responseXML) 对象中检索特定节点

> ID：13298474
> 
> 赞同：1
> 
> 时间：2012-11-08T21:53:40.937
> 
> 标签：sharepoint, jquery-selectors, spservices

我完全停留在从`GetUserProfileByName`（SharePoint / SPServices）返回的 responseXML 对象中检索特定节点。我需要一个特定的`PropertyData`节点（在示例中为“FirstName”），然后检索“FirstName”的值。检索值不是问题，检索特定节点是......

下面是返回的 XML 的一部分（为了示例，我删除了一些属性）：

```
...
<PropertyData>
   <Name>UserProfile_GUID</Name>
   <Values>
     <ValueData>
       <Value xmlns:q1="...">206b47c7-cfdc-...</Value>
     </ValueData>
   </Values>
</PropertyData>
<PropertyData>
   <Name>FirstName</Name>
   <Values>
     <ValueData>
       <Value xsi:type="xsd:string">Maarten</Value>
     </ValueData>
   </Values>
</PropertyData>
... 
```

因为我知道我需要 property `FirstName`，所以我不想遍历整个`PropertyData`节点集，直到我找到正确的节点（慢）。在 XPath 中，我可以`FirstName`通过说来选择：

```
//PropertyData[Name='FirstName']/Values/ValueData/Value 
```

但是，我不能在`xData.responseXML`对象中这样做。我尝试了以下过滤器、发现和其他东西（各种变体）：

```
$(xData.responseXML).SPFilterNode("PropertyData").find("[Name*=FirstName]")

$(xData.responseXML).SPFilterNode("PropertyData").find("[Name*='FirstName']")

$(xData.responseXML).SPFilterNode("PropertyData").filter("[Name*=FirstName]")

$(xData.responseXML).SPFilterNode("PropertyData[Name='FirstName']") 
```

我做了很多搜索，但无法找到答案。有很多部分答案，我都尝试过，但没有奏效。任何一个线索...

提前致谢！马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T00:54:20.923

@Maarten 我现在不在我的电脑前进行测试，但试试这个：

```
$(xData.responseXML).find("Name:contains('FirstName')").closest("PropertyData") 
```

**修订 1：** 鉴于您的反馈是返回了一个附加元素（语音字段），这里是一个修改后的选择器，仅返回包含 FirstName 元素的选择器：

```
$(xData.responseXML)
     .find("Name:contains('FirstName')")
     .not(":contains('SPS-PhoneticFirstName')")
     .closest("PropertyData"); 
```

保罗

# python-2.7 - CouchDB 与 mongodb

> ID：13298480
> 
> 赞同：0
> 
> 时间：2012-11-08T21:54:10.140
> 
> 标签：python-2.7, pymongo, couchdbkit

我们正在开发我们将使用 NoSql 数据库的应用程序。我们已经评估了 couchdb 和 mongodb。我们的应用程序是用 python 编写的，读取速度对我们的应用程序来说是最关键的。并且应用程序正在读取大量文件。

我想要问：

1.  在 bson 中读取大量文档是否比 json 更快？
2.  当我们要读取 100 个文档、解析它们并打印结果时，哪个更好：python+mongodb+pymongo 或 python+couchdb+couchdbkit（数据库将在 ec2 上并通过互联网访问）？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-30T08:32:48.030

1.  布森
2.  从 1985 年开始尝试 LogoDb 用于 trs-80 的徽标编程语言

# python - 如何获取所有子目录和文件的列表以及按大小排序的大小？

> ID：13298481
> 
> 赞同：4
> 
> 时间：2012-11-08T21:54:09.437
> 
> 标签：python

如何获取所有子目录和文件的列表以及按大小升序排列的大小？

下面的代码让我得到所有文件的列表，但没有根据大小排序。请帮忙。

```
import os
import os.path, time
from os.path import join, getsize
count=0
for root, dirs, files in os.walk('Test'):
    for file in list(files):
        fileaddress = os.path.join(root, file)
        print("\nName:",fileaddress)
        print("Time:",time.strftime("%m/%d/%Y %I:%M:%S %p",time.localtime(os.path.getmtime(fileaddress))))
        count=count+1
print(count); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T21:56:17.883

```
import os
from os.path import join, getsize

file_list = []
for root, dirs, files in os.walk('Test'):
    file_list.extend( join(root,f) for f in files )
    #May be *slightly* faster at the expense of a little readability 
    # and a little memory
    # file_list.extend( [ join(root,f) for f in files ] ) 

print (sorted(file_list, key=getsize)) 
```

同样的事情`dirs`——虽然我不太确定目录的“大小”实际上是多少——你可能无法对那个目录进行排序`getsize`（如果可以的话，你不会得到这样的结果有意义）。

# c# - 用户代码未处理通用转换 InvalidOperation 异常

> ID：13298482
> 
> 赞同：3
> 
> 时间：2012-11-08T21:54:10.540
> 
> 标签：c#, wpf, xaml, exception, gis

我遇到了一个我完全不知道的问题。我收到以下错误消息：

> 指定的 Visual 和 Visual 不共享一个共同的祖先，因此这两个视觉对象之间没有有效的转换。

当用户点击地图上的一个点时，它会被调用。任何帮助，将不胜感激。我附上了错误的片段。如果您需要更多代码示例，请告诉我。

这是我的相关 XAML：

(<)inf:DialogWindowBase x:Class="Alliance.CommonUI.Views.Maps.EsriMapView"

```
<Grid> 
```

```
<Grid>
 <DataTemplate x:Key="MyFeatureLayerInfoWindowTemplate">
                    <TextBlock Text="Content" Foreground="White" FontSize="12" />
                </DataTemplate>
                <esri:SimpleRenderer x:Key="MySimpleRenderer">
                    <esri:SimpleRenderer.Symbol>
                        <esri:SimpleFillSymbol Fill="#01FFFFFF" BorderBrush="#88000000" BorderThickness="2" />
                    </esri:SimpleRenderer.Symbol>
                </esri:SimpleRenderer>
 </Grid.Resources>

            <esri:Map x:Name="MyMap" Background="#FFE3E3E3" WrapAround="True" MouseClick="MyMap_MouseClick" MouseRightButtonDown="MyMap_MouseRightButtonDown" Extent="-9834972.92753924,4441899.425293319,-9833977.88119163, 4442762.485358352">
                <esri:ArcGISTiledMapServiceLayer ID="MyLayer" Url="http://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer" />
                <!--<esri:ArcGISLocalDynamicMapServiceLayer ID="Calvert_City" Path="C:\Users\jessical\Documents\ArcGIS\CalvertCity_Test.mpk"/>-->
                <esri:ArcGISDynamicMapServiceLayer  ID="Calvert_City" Url="http://localhost:6080/arcgis/rest/services/CalvertCity_Test_2/MapServer"/>
                <esri:FeatureLayer ID="MyFeatureLayer"  Url="http://localhost:6080/arcgis/rest/services/CalvertCity_Test_2/MapServer/0"
                            Renderer="{StaticResource MySimpleRenderer}" />
</esri:Map>

            <Border Background="{StaticResource PanelGradient}" BorderThickness="1" CornerRadius="5"
            HorizontalAlignment="Left"  VerticalAlignment="Top"
            Margin="20" Padding="5" BorderBrush="Black" >
                <esri:Legend Map="{Binding ElementName=MyMap}"
                         LayerIDs="Calvert_City"
                         LayerItemsMode="Tree"
                         ShowOnlyVisibleLayers="False"
                         Refreshed="Legend_Refreshed">
                    <esri:Legend.MapLayerTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <CheckBox Content="{Binding Label}"
                                    IsChecked="{Binding IsEnabled, Mode=TwoWay}"
                                    IsEnabled="{Binding IsInScaleRange}" >
                                </CheckBox>
                                <Slider Maximum="1" Value="{Binding Layer.Opacity, Mode=TwoWay}" Width="50" />
                            </StackPanel>
                        </DataTemplate>
                    </esri:Legend.MapLayerTemplate>
                    <esri:Legend.LayerTemplate>
                        <DataTemplate>
                            <CheckBox Content="{Binding Label}"
                            IsChecked="{Binding IsEnabled, Mode=TwoWay}"
                            IsEnabled="{Binding IsInScaleRange}" >
                            </CheckBox>
                        </DataTemplate>
                    </esri:Legend.LayerTemplate>
                </esri:Legend>
            </Border>
            <esri:InfoWindow x:Name="MyInfoWindow"
                         Padding="2"
                         CornerRadius="20"
                         Background="{StaticResource PanelGradient}"
                         Map="{Binding ElementName=MyMap}"
                         ContentTemplate="{StaticResource MyFeatureLayerInfoWindowTemplate}"
                         MouseLeftButtonUp="MyInfoWindow_MouseLeftButtonUp" /> 
```

![在此处输入图像描述](../Images/da82904fcefe08602ac8fbf68b6dda5b.png) ![在此处输入图像描述](../Images/3dd45d3d3f662b5300e2bae6834f49ff.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-17T16:12:07.853

我在使用 SciChart 的第三方控件时遇到了这个错误。我发现错误被掩盖了，调试器看起来好像没有处理错误。但是，当我刚刚关闭此类异常的 break 并在我的 catch 语句中放置一个断点时，异常并没有落入我的 catch 块中。我对这一切有些困惑，但它似乎正在工作。

所以我的建议是让调试器不要中断这种类型的异常，看看它是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T21:59:38.477

您正在使用 TransformToVisual。它应该是 TransformToAncestor。

# oracle11g - Oracle 配置以保持防火墙打开以处理耗时的数据库事务

> ID：13298486
> 
> 赞同：0
> 
> 时间：2012-11-08T21:54:30.477
> 
> 标签：oracle11g, firewall-access

我有一个在 WAS 上运行的 EAR 应用程序并连接到 oracle db 以运行存储过程。

现在存储过程需要很长时间才能运行。因此，WAS 和 oracle 服务器之间的防火墙在 30 分钟后关闭。是否有允许防火墙保持打开状态的 oracle 配置？在这里增加超时不是一个选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:25:47.587

如果防火墙因为不活动而关闭连接，您可以在服务器上设置[sqlnet.ora 参数`sqlnet.expire_time`](http://docs.oracle.com/cd/B14117_01/network.101/b10776/sqlnet.htm) 以每 N 分钟 ping 一次客户端。通常，这用于死连接检测，以便服务器可以确定客户端应用程序因打开的连接而死。但这可能会阻止防火墙确定连接已处于非活动状态的时间过长。另一方面，如果防火墙只是禁止持续时间超过 30 分钟的连接而不管不活动状态，则此设置不会产生任何影响。

但是，从架构上讲，您真的希望您的应用程序进行 30 分钟的存储过程调用吗？应用程序进行调用以提交异步运行存储过程的作业似乎更合适。然后，如果您想向用户显示某种进度条，Web 应用程序可以定期轮询数据库以查看作业是否仍在运行。

# bash - 在不提示密码且不使用密钥的情况下通过 SSH 连接到机器的 Bash 脚本

> ID：13298487
> 
> 赞同：7
> 
> 时间：2012-11-08T21:54:32.340
> 
> 标签：bash, ssh

我意识到这个问题已被问过几次，但我在搜索的任何地方都找不到相关的答案。

我在一个安全不是问题的开发环境中工作，任何人只要考虑几秒钟就可以猜出密码。

我想做的很简单。我在我的本地 .bashrc 文件中创建了一个别名函数，我希望这个函数能够使用默认密码自动登录机器。

我当前的实现看起来像这样：

```
function s () { 
 ssh root@192.168.1.$1
} 
```

当我运行它时，我会得到这样的东西：

```
~]s 122

ssh root@192.168.1.122

root@192.168.1.122's password: 
```

使用 Bash，而不是使用 RSA 密钥我想让它使用默认密码“密码”。

我已经尝试了以下已设置 IP 和用户的方法。

```
Do=$(expect -c "
spawn ssh $User@${IP[0]}.${IP[1]}.${IP[2]}.${IP[3]} 
expect \"yes/no\" 
send \"yes\r\" 
expect \"assword\" send \"password\"")
echo $Do
$Do 
```

它给出了以下错误：

```
Connecting and logging into server using expect
usage: send [args] string
    while executing
"send"
    invoked from within
"expect "assword" send "password""
 Administrator@192.168.1.176's password:
bash: spawn: command not found... 
```

使用以下命令，我可以连接机器。如果我删除了交互，它只会运行 uptime 命令并关闭连接。使用交互命令，我无法看到我正在输入的内容或实际与机器交互。有任何想法吗？

```
Do=$(expect -c "spawn ssh $User@${IP[0]}.${IP[1]}.${IP[2]}.${IP[3]}; set timeout 4; expect \"assword\"; send \"password\n\"; expect \"test\"; send \"uptime\n\"; interact;");echo $Do; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T21:56:47.500

您可以使用该`expect`工具执行此操作：http: [//expect.sourceforge.net/](http://expect.sourceforge.net/)

它广泛可用，因此取决于您的系统，相当于`sudo apt-get install expect`或`yum install expect`将安装它。

`expect`这是一个带有 ssh的脚本示例。这会让您登录并让您控制交互式提示：

```
#!/usr/bin/expect

set login "root"
set addr "127.0.0.1"
set pw "password"

spawn ssh $login@$addr
expect "$login@$addr\'s password:"
send "$pw\r"
expect "#"
send "cd /developer\r"
interact 
```

下面是一个示例，说明如何将其`expect`用作 bash 脚本的一部分。这使用 ssh 登录，cd 到 /var，运行脚本，然后退出 ssh 会话。

```
#!/bin/bash
...

login_via_ssh_and_do_stuff() {

    # build the expect script in bash

    expect_sh=$(expect -c "
    spawn ssh root@127.0.0.1
    expect \"password:\"
    send \"password\r\"
    expect \"#\"
    send \"cd /var\r\"
    expect \"#\"
    send \"chmod +x my_script.sh\r\"
    expect \"#\"
    send \"./my_script.sh\r\"
    expect \"#\"
    send \"exit\r\"
    ")

    # run the expect script
    echo "$expect_sh"
} 
```

您可以将这些片段保留在本地系统上的脚本中，然后只为脚本设置别名。

另外：我知道你说安全不是问题，但我想再次指出，不使用密码的 ssh 的“正确”方法是使用 ssh 密钥对 =)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-23T17:36:36.893

使用**[`sshpass`](http://linux.die.net/man/1/sshpass)**主要 Linux-es 上的包存储库中可用的。

例如，当密码在`password.txt`文件中时：

```
sshpass -fpassword.txt ssh username@hostname 
```

> `sshpass`运行`ssh`在一个专用的`tty`，欺骗它以为它正在从交互式用户那里获取密码。

# mysql - 从三个表中选择 - mysql 和 php

> ID：13298488
> 
> 赞同：1
> 
> 时间：2012-11-08T21:54:36.623
> 
> 标签：mysql, select

我有下面的三个表，我希望从中获得以下选择：

1.）从给定用户中选择所有项目`collaboration`并将它们分组 这意味着当用户登录时，（s）他将看到所有（并且仅）属于他是组成员的组的项目。 2.) 对于每个，选择所有协作项目。 这意味着当用户从上面的 1 中选择任何组 ( ) 时，他将看到属于所选组 ( )的所有项目`group_id``group_members`
`collaboration`

`group_id`
`group_id``collaboration``group_id`

约束：每个用户必须是组成员。该`users`表是供用户使用`firstname`的`lastname`。

这是我尝试1无济于事！

```
    函数 OrderByGroup_id($username) {
      $数据 = 数组（）；
      $当前时间=时间（）；
      $q = "
      选择 *
      FROM 合作
      INNER JOIN group_members ON Collaboration.group_id = group_members.group_id
      INNER JOIN users ON users.username = group_members.username
      其中collaboration.parent_id 为NULL 并且collaboration.is_comment = 0
      AND group_members.username = :user group bycollaboration.group_id";
      $sq = $this->connection->prepare($q);
      $sq->execute(array(':user' => $username));
    而($row = $sq->fetch()) {
      $json = 数组（）；
      $json['title'] = $row['title'];
      $json['question'] = $row['content'];
      $json['firstname'] = $row['firstname'];
      $json['姓氏'] = $row['姓氏'];
      $json['timestamp'] = $row['timestamp'];
      $json['key'] = $row['group_id'];
      $数据[] = $json;
     }
      $allposts =json_encode($data);
      返回 $allposts= json_decode($allposts, true);
    }

```

这是表格

```
如果不存在“协作”，则创建表（
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `parent_id` int(11) 默认为 NULL，
  `group_id` varchar(255) 默认为空，
  `author` varchar(30) NOT NULL,
  `title` varchar(255) 默认为空，
  `content` 文本不为空，
  `is_comment` tinyint(1) 无符号非空，
  `file` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `points` int(11) 默认为空，
  `timestamp` int(11) NOT NULL,
  主键（`id`）
) 引擎=InnoDB 默认字符集=utf8；

```

```
如果不存在“用户”，则创建表（
  `firstname` varchar(30) NOT NULL,
  `lastname` varchar(30) NOT NULL,
  `username` varchar(30) NOT NULL,
  主键（`用户名`）
) 引擎=InnoDB 默认字符集=utf8；

```

```
如果不存在 `group_members` 则创建表（
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(30) NOT NULL,
  `group_id` varchar(50) NOT NULL,
  `status` tinyint(1) 无符号非空，
  `timestamp` int(11) NOT NULL,
  主键（`id`）
) 引擎=InnoDB 默认字符集=utf8；

```

感谢您的输入！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T08:56:34.730

以下选择确实提供了问题 1 的请求。但是，我知道查询不是最佳的，因为我确实选择了目前不需要的条目。例如使用 *
我只想从*协作*中选择`title`, `content`, `timestamp`, , 从*用户*中选择, ,`group_id`*`firstname``lastname`*

 **```

    SELECT * FROM 协作
    INNER JOIN group_members ON Collaboration.group_id = group_members.group_id
    INNER JOIN users ON users.username =collaboration.author
    其中collaboration.parent_id 为NULL 并且collaboration.is_comment = 0
    AND group_members.username = :user
    GROUP BY 协作.group_id
    ORDER BY Collaboration.timestamp DESC
```**

# c++ - Linux API（如 MSDN）的参考？

> ID：13298489
> 
> 赞同：20
> 
> 时间：2012-11-08T21:54:45.053
> 
> 标签：c++, c, linux, api

有没有像 MSDN 或 boost 提供的那样好读的 Linux API 参考？我喜欢 MSDN 中有关参数的详细信息以及 boost 文档中的 pre-an post 条件。但直到现在，我在 Linux 的网络上还没有发现任何可比的东西。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-08T22:00:33.693

正如其他人所指出的，手册页绝对是一个好的开始。但是，如果您想要更正式和更严格的东西，我建议您阅读 POSIX 规范。以下是标准中的功能索引：

[http://pubs.opengroup.org/onlinepubs/9699919799/functions/contents.html](http://pubs.opengroup.org/onlinepubs/9699919799/functions/contents.html)

查看标准的要求，而不是 Linux 上这些功能的当前实现恰好做了什么，也将帮助您编写更便携、更健壮的软件。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-09T06:44:19.347

先读好书，比如[Advanced Linux Programming](http://advancedlinuxprogramming.com/)（你可以下载）和[Advanced Unix Programming](http://basepath.com/aup)

请注意，GNU/Linux 在定义上不像 Windows 那样单一（因为许多贡献者都在致力于它，并且）因为它是由许多独立的程序组成的。

^(因此，没有定义明确的 Linux API（除了内核系统调用；但 GNU/Linux 不仅仅是内核）)

当然，请阅读手册页，特别是从关于[系统调用](http://en.wikipedia.org/wiki/Syscall)和其他[手册页的](https://www.kernel.org/doc/man-pages/)[intro(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/intro.2.html)手册页开始。

请注意，Linux 几乎实现了[OpenGroup的](http://www.opengroup.org/)[POSIX](http://en.wikipedia.org/wiki/Posix)标准规范（超集） 。

[还可以阅读TLDP](http://tldp.org/)的许多优秀文档。

如果您对桌面应用程序开发感兴趣，请先了解 [X11](http://en.wikipedia.org/wiki/X11)是什么，（注意，X11 的细节非常复杂）。[然后从freedesktop](http://www.freedesktop.org/wiki/)阅读文档。更好的是，学习使用[Qt](http://qt-project.org/)或[Gtk等图形工具包](http://gtk.org/)

而 GNU/Linux 是由[**自由软件**](http://en.wikipedia.org/wiki/Free_software)组成的，您可以下载并**研究源代码**并加以改进。您会经常使用一些现有的免费软件库，并且您可能会研究它的源代码（并且每个都有自己的文档）。您的部分工作是寻找与您的需求相关的优质免费软件。[freecode](http://freecode.com/)和[sourceforge](http://sourceforge.net/)是很好的资源（还有很多其他资源）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-08T22:26:09.317

我有这个书签。

[Linux 手册页项目](https://www.kernel.org/doc/man-pages/)

# java - GWT PlaceHistoryMapper 令牌如何转换为实际 URL？

> ID：13298490
> 
> 赞同：1
> 
> 时间：2012-11-08T21:54:51.083
> 
> 标签：java, gwt, gwt-places

如果我实现自己的`PlaceHistoryMapper`：

```
public class MyAppPlaceHistoryMapper implements PlaceHistoryMapper {
    @Override
    public Place getPlace(String token) {
        if(token.equals("home"))
            return new HomePlace();
        else
            return new AboutUsPlace();
    }

    @Override
    public String getToken(Place place) {
        if(place instanceof HomePlace)
            return "home";
        else
            return "about-us";
    }}
} 
```

如果我的网络应用程序植根于`http://www.myapp.com`，那么与`HomePlace`和相关联的实际（可书签）URL 是`AboutUsPlace`什么？他们是：

*   `http://www.myapp.com/home`和`http://www.myapp.com/about-us`; 或者
*   `http://www.myapp.com/HomePlace:home`和`http://www.myapp.com/AboutUsPlace:about-us`; 或者
*   别的东西？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T02:38:00.753

是`http://www.myapp.com/#home`和`http://www.myapp.com/#about-us`。

如果您愿意，您还可以拥有`http://www.myapp.com/#HomePlace:home`和`http://www.myapp.com/#AboutUsPlace:about-us`。为此，您将使用[PlaceTokenizers 和 @WithTokenizers](https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces#PlaceHistoryMapper)而不是自己实现 PlaceHistoryMapper。

这两种方法都很好，这是你的选择。

# .net - wif forms-authentication 甚至重定向匿名用户

> ID：13298492
> 
> 赞同：0
> 
> 时间：2012-11-08T21:55:05.567
> 
> 标签：.net, redirect, forms-authentication, wif

我有一个使用表单身份验证的 Web 应用程序。我有一个不想重定向到登录表单的页面。我有这个页面：

```
<location path="service1.svc">
  <system.web>
    <authorization>
      <allow users="?"/>
    </authorization>
  </system.web>
</location> 
```

据我了解，如果用户未经过身份验证（匿名）并且他们尝试访问 page1.svc，那么他们将不会被重定向到登录页面，但在我的应用程序中他们仍然是。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:41:22.963

我想到了！Forms-authentication 模块的工作方式是检查 EndRequest 方法中的任何传出响应，如果状态码为 401（未授权），则将状态码更改为 320 并将其重定向到登录页面。在我的案例中发生的情况是，我有一个单独的模块，它在表单身份验证页面获取响应之前操纵响应，并且偶尔将状态代码设置为 401 以启动 ntlm 身份验证交换。但是在交换发生之前，forms-auth 拦截了它。

解决方法是使用 global.aspx 文件中的 EndRequest 方法将状态代码设置回 401，因为此时 forms-auth 已经对其进行了操作。在我的例子中，我没有首先将状态码设置为 401，而是将其设置为 407，然后在 endRequest 方法中将其捕获以将其更改回 401，并一起避免使用 forms-auth 模块。

# module - 我可以在 Joomla 中向不同的用户显示不同的文章吗？

> ID：13298493
> 
> 赞同：0
> 
> 时间：2012-11-08T21:55:07.190
> 
> 标签：module, joomla, joomla-article

我想在 Joomla 中为用户创建一个结构。针对不同注册用户的不同文章。我没有群组。例如，如果我有 3 个用户，当他们单击菜单（例如，“信息”）时，他们会看到彼此不同的文章。

用户 A 在点击信息时看到不同的东西，而用户 B 看到的是其他东西，而用户 C 看到的是其他东西。

我怎样才能做到这一点; 有没有组件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:25:26.340

我所知道的 Joomla 或扩展中没有任何功能可以让您执行此操作。如果您使用的是 Joomla 2.5/3.0，那么您最好创建不同的用户组，然后创建 3 个单独的菜单项，每个组 1 个只有他们可以访问。

如果您是 Joomla 1.5，那么我所知道的用于添加自定义用户组的唯一扩展是[ArtofUser](http://extensions.joomla.org/extensions/clients-a-communities/user-management/14383)，它仍然以自己的方式受到限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T12:05:16.170

你能不能只使用newsflash 模块来显示一个类别中的一篇文章——然后把所有这些文章都放到这个类别中。或者这些用户是否属于不同的用户组，在这种情况下，最好为每个用户组简单地创建一个连接到菜单项的文章

# c# - 从 web 服务调用返回的对象在我的转换函数中被附加字节弄乱了

> ID：13298496
> 
> 赞同：0
> 
> 时间：2012-11-08T21:55:18.627
> 
> 标签：c#, .net, xml, web-services, linq-to-xml

简洁...从 web 服务调用返回的对象在我的转换函数中被附加字节弄乱了。

基本上我有一个网络参考，我将 XDocument 发送到

```
 System.Text.ASCIIEncoding encoding = new System.Text.ASCIIEncoding();
    Byte[] baXml = encoding.GetBytes(xdoc.ToString());

    object o = MEF_Test.NewSubmission("*********", "*********", baXml); 
```

传输成功，我得到了我认为是 xml 文档的内容，我正在尝试返回 XDocument。我将我的对象转换为字节数组

```
 Byte[] baResponse = ObjectToByteArray(o); 
```

我把这个功能放在底部，但它可能是有错误的地方

我返回的对象是 10492 个字符，但在转换后变大了 28 个字节到 10520 的大小

```
 string ss = Encoding.UTF8.GetString(baResponse);
            string ss1 = ss.Substring(28);
            XDocument xSubmissionResponse = XDocument.Parse(ss1); 
```

在屏幕截图中，您可以看到额外的字符，我试图通过让子字符串越过它们来越过它们。然后该字符串看起来不错，但随后在字符串的前面抛出了一个关于十六进制值 0x0B 的异常。

谁能给这个看看？谢谢。

--[包含尽可能多信息的屏幕截图](http://i.imgur.com/Tzw9i.png)

我没有将图像粘贴在我希望链接有效的声誉。

```
 private static byte[] ObjectToByteArray(Object obj)
    {
       if (obj == null)
          return null;
       BinaryFormatter bf = new BinaryFormatter();
       MemoryStream ms = new MemoryStream();
       bf.Serialize(ms, obj);
       return ms.ToArray();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:08:02.250

o 已经是一个字节数组（如调试器中所示）。再次反序列化它是没有意义的。只需将对象 o 转换为 byte[]，然后对其运行 Encoding.GetString 方法。

# expressionengine - FedEx 和 Expresso 商店整合

> ID：13298499
> 
> 赞同：3
> 
> 时间：2012-11-08T21:55:29.883
> 
> 标签：expressionengine, expresso-store

我正在使用带有 Expression Engine 的 Expresso 商店，并且无法让 FedEx 运输插件与我的测试凭据一起使用。我在 FedEx 建立了一个开发者账户，并在 Store Settings 中输入了相应的代码。当我使用示例商店模板进行测试时，我收到错误“与运输提供商通信时出错”。

我应该使用测试模式 =“False”还是“True”进行测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T23:22:09.307

尝试打开`store/libraries/store_shipping_fedex.php`，并在里面的第 80 行附近`calculate_shipping($order)`，添加以下行：

```
echo '<pre>'; print_r($response); exit; // add this line
return $this->_parse_response($response); 
```

然后再次运行您的结帐过程（或只需单击“更新总计”）。这应该会打印出 FedEx 的完整回复，这应该有助于诊断您的问题。

如果可能，请使用它返回的响应更新您上面的问题，因为它可能对其他人有帮助。

# python - 程序不会从 while 块中退出

> ID：13298500
> 
> 赞同：0
> 
> 时间：2012-11-08T21:55:32.143
> 
> 标签：python, loops, if-statement

我有一个`while`块，在里面我有决策块，包括`elif`块。我希望程序何时从 while 块中退出`obje_error == 0`，但 while 块会重复。

我想`obje_error == 0`在其他条件不完整的时候。我删除了这些`elif`块并且它起作用了，但我希望所有块都能正常工作。

你可以看到下面的代码：

```
while (obje_error == 1):    
    Sen=raw_input("tas mi,kagit mi yoksa makas mi?")
    if (Sen != "tas") :
        print "Lutfen tas,kagit ya da makas'i secin..."
        obje_error=1
    elif (Sen != "kagit"):
        print "Lutfen tas,kagit ya da makas'i secin..."
        obje_error=1
    elif Sen != "makas":
        print "Lutfen tas,kagit ya da makas'i secin..."
        obje_error=1
    else:
        obje_error=0 
```

你能告诉我问题是什么以及我能做些什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:23:32.317

如果字符串等于您正在测试的字符串之一，它将不等于所有其他字符串。因此，其中一个`if`语句可以保证成功，并且您永远不会到达`else`最后。

您可能想要`==`而不是`!=`.

# sql-server - 从多个表中创建 Sql Server VIEW GROUPing BY，选择子查询作为别名

> ID：13298501
> 
> 赞同：0
> 
> 时间：2012-11-08T21:55:35.573
> 
> 标签：sql-server, view, group-by, subquery, multiple-tables

建立在这篇文章的基础上：[这个 MySQL 视图的 MS 版本与 GROUP BY？](https://stackoverflow.com/questions/13239820/ms-version-of-this-mysql-view-with-group-by)

如何添加子查询？

我想要添加到该视图中的是来自 SELECT 的别名作为别名，例如：

```
... AS table2column2, (SELECT column1 FROM dbo.table3 WHERE constant = 1) AS table3column1, ...
```

是的，我到处都看过。互联网有 nada。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:57:22.303

基本上正确，只需添加一个`TOP 1`，因为您不能返回多个值：

```
(SELECT top 1 column1 FROM dbo.table3 WHERE constant = 1) 
```

# jquery - 为我的 jQuery Mobile 首页获取内容的最快方法是什么？

> ID：13298503
> 
> 赞同：1
> 
> 时间：2012-11-08T21:55:40.183
> 
> 标签：jquery, jquery-mobile, jsonp

我正在使用[桌面](https://github.com/jsoma/tabletop)将我的 jQuery Mobile 应用程序的文本/内容存储在 Google Doc 中，因此当有人访问我的应用程序时，它应该做的第一件事就是获取内容（JSONP 请求）。

假设 jQuery Mobile 在 JSONP 请求完成之前加载/渲染（不一定是这种情况），它应该显示一个加载指示器，直到请求完成，然后请求回调将渲染数据，它需要触发一个重新渲染以增强`<ul>`元素之类的东西。

我该怎么做才能使时间与 jQuery Mobile 加载/渲染一致？

我正在考虑在`<head>`（而不是在事件内部）执行 JSONP 请求并在完成时将数据渲染到内容中`<div>`，但是我需要触发重新渲染，如果我在渲染 jQuery Mobile 之前触发它，它会破裂等。

如果这没有意义，这里有一个更相关的示例：假设您希望您的首页显示特定帐户的最新推文。当您加载页面时，它会获取推文。您如何计时，以便在获取完成后可以正确呈现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:33:32.227

您可以绑定到`pageinit`事件以发出 AJAX 请求。这确保了 jQuery Mobile 伪页面将在 AJAX 请求返回时被初始化。这很好，因为这样您就知道动态添加的代码的状态，它没有被初始化。

例如：

```
$(document).on('pageinit', '#myLandingPage', function () {
    $.ajax({
        ...,
        success : function (response) {
            //do your work on the response

            //then when you add the HTML output to the DOM just initialize it
            $("#some-container").html(htmlOutput).trigger("create");
        }
    });
}); 
```

我建议您使用服务器端语言执行初始 JSONP 请求，因为您的服务器很可能具有非常好的带宽，而您的用户可能没有（特别是如果他们在移动设备上）。

# cmake - 将 CMake 与 setup.py 一起使用

> ID：13298504
> 
> 赞同：18
> 
> 时间：2012-11-08T21:55:41.917
> 
> 标签：cmake, distutils, setup.py

对于一个项目，我构建了一个 C 库并使用 CMake 隐含 Python 绑定（通过 GObject 自省）。我还想使用 distutils 分发一些 Python 辅助模块。我可以用这个构建和安装模块`CMakeLists.txt`

```
find_program(PYTHON "python")

if (PYTHON)
    set(SETUP_PY_IN "${CMAKE_CURRENT_SOURCE_DIR}/setup.py.in")
    set(SETUP_PY    "${CMAKE_CURRENT_BINARY_DIR}/setup.py")
    set(DEPS        "${CMAKE_CURRENT_SOURCE_DIR}/module/__init__.py")
    set(OUTPUT      "${CMAKE_CURRENT_BINARY_DIR}/build")

    configure_file(${SETUP_PY_IN} ${SETUP_PY})

    add_custom_command(OUTPUT ${OUTPUT}
                       COMMAND ${PYTHON}
                       ARGS setup.py build
                       DEPENDS ${DEPS})

    add_custom_target(target ALL DEPENDS ${OUTPUT})

    install(CODE "execute_process(COMMAND ${PYTHON} ${SETUP_PY} install)")
endif() 
```

以及以下内容`setup.py.in`：

```
from distutils.core import setup, Extension

if __name__ == '__main__':
    setup(name='foo',
          version='${PACKAGE_VERSION}',
          package_dir={ '': '${CMAKE_CURRENT_SOURCE_DIR}' },
          packages=['module']) 
```

不幸的是，每次运行时都会执行构建步骤`make`。我想，问题与自定义命令的输出有关，该命令是目录而不是文件。现在，有没有办法告诉 CMake`python setup.py build`仅在`setup.py.in`或其中一个源发生更改时运行？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-09T10:13:05.987

只有文件，而不是目录，可以可靠地用作 OUTPUT 和 DEPENDS。您可以修改自定义命令以生成时间戳文件，如下所示：

```
add_custom_command(
  OUTPUT ${OUTPUT}/timestamp
  COMMAND ${PYTHON} setup.py build
  COMMAND ${CMAKE_COMMAND} -E touch ${OUTPUT}/timestamp
  DEPENDS ${DEPS}
)

add_custom_target(target ALL DEPENDS ${OUTPUT}/timestamp) 
```

# java - 具有异步方法调用的 Java 服务

> ID：13298505
> 
> 赞同：0
> 
> 时间：2012-11-08T21:55:48.523
> 
> 标签：java, spring, asynchronous, akka, executorservice

给定由 a 支持的`FooService`with`read`和`write`操作`repository`，我想提供它的*异步*变体以在[`Spring`](http://www.springsource.org/)REST Web 服务中使用（可能会使用[`Akka`](http://akka.io/)它，因为它已经是其他问题的候选者......）。

到目前为止，我有冗长且有些笨拙的变体

```
class AsyncFooService extends FooService {

    private final ExecutorService executor = Executors.newCachedThreadPool();
    private final FooService delegate = ...

    @Override
    public void writeSomeThing(Obj o) {
        executor.submit(new Runnable() {
           @Override
           public void run() {
               delegate.writeSomeThing(o);
           }
        });
    }

    // repeat same override & executor semantics for all write* routines
} 
```

在实现对服务的异步操作方面还有哪些好的变体？

*为了限制范围，我们不要直接考虑`Proxies`，因为它们本身并没有提供解决方案。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:43:58.337

由于涉及到一些 Spring，我只会使用 AOP 建议来自动化您的“笨拙”方法。咨询课：

```
public class AsyncAdvice implements MethodInterceptor {

    @Inject
    private ExecutorService executorService;

    @Override
    public Object invoke(final MethodInvocation invocation) throws Throwable {
        executor.submit(new Runnable() {
            @Override
            public void run() {
                invocation.proceed();
            }
        });
    }
} 
```

在 applicationContext.xml 中：

```
<!-- Synchronous instance -->
<bean id="fooService" class="FooService" scope="singleton">
    <!-- Whatever -->
</bean>

<!-- Asynchronous instance -->
<bean id="asyncFooService" parent="fooService" scope="singleton"/>

<bean id="asyncAdvice" class="AsyncAdvice" scope="singleton">
    <property name="executorService" ref="..."/>
</bean>

<aop:config>
    <aop:advice pointcut="bean(asyncFooService)" and execution=(* FooService.write*(..))"
                advice="asyncAdvice"/>
</aop:config> 
```

这是一个非常轻量级的解决方案。无论如何，你的最后一段让我觉得你想要一个更自动化的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T22:09:59.200

首先，我认为您的代码中存在拼写错误-您正在从 run() 创建无限循环中调用相同的 writeSomeThing() 方法？

除此之外，我认为这几乎是您将如何在纯 Java 中做到这一点 - 使用 Executors。当然更冗长，但是您可以将此代码移动到代理/拦截器的同步实现中，这会将任务提交给执行程序并将控制权返回给调用者，因此同步实现不会出现这种非功能性逻辑。然后，您可以直接调用同步实现以获取同步行为或调用代理以获取异步，或者根据参数等可能代理冷处理。

如果您想要更少的编码工作并具有足够的灵活性，那么肯定有可用的选项 - 除了您已经提到的 Akka，您可以查看 Apache Camel 的 SEDA 队列或任何可以让您将任务发布到工作队列的轻量级消息传递解决方案用于在主线程之外进行处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T22:09:39.340

您可以使用方法列表和 class.invoke 构建单个函数。

如果是一次性的，Eclipse 通过模板提供代码生成，或者更好的是，您可以编写读取函数列表并为您生成包装器的 java 代码。

# php - CSS中的PHP用户帐户类型突出显示

> ID：13298510
> 
> 赞同：1
> 
> 时间：2012-11-08T21:56:08.683
> 
> 标签：php, css

我从 db 获取用户帐户类型时遇到问题。我在 db 上创建了一个名为 acc_type 的列，它检查用户 acc_type 是否为 1 或更大，突出显示用户名。

我编写了这段代码，但它将所有用户名突出显示为红色管理员。

```
colors meaning:
Blue = Regular member = 0
Red = admin = 1
Green = Mod = 2
Orange = Super User = 3 
```

代码在这里

```
<?php
if($dn5['acc_type'] =='0')
{
echo '<style>
.acc{
color:blue;
}
</style>';
}else if($dn5['acc_type']=='1'){
echo '<style>
.acc{
color:red;
}
</style>';
}else if($dn5['acc_type']=='2'){
echo '<style>
.acc{
color:green;
}
</style>';
}
?>
<span class="acc"><?php echo $username;?></span> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:00:21.207

你检查过你传递给 $dn5['acc_type'] 的值吗？

同样，您的代码相当重复，您可以使用类似的东西大大简化它

```
switch($dn5['acc_type']) {
    case 1:   $color = 'red';    break;
    case 2:   $color = 'green';  break;
    default:  $color = 'blue'; 
}
echo "<style>.acc { color: $color; }</style>"; 
```

# java - 在石英调度程序上，需要澄清

> ID：13298517
> 
> 赞同：5
> 
> 时间：2012-11-08T21:56:35.690
> 
> 标签：java, scheduled-tasks, scheduling, quartz-scheduler

关于石英的几个单独的问题

1.  如果我希望事件执行一次，是否足以

    ```
    trigger.setRepeatCount(0); 
    ```

2.  考虑到这个片段。事件在预定时间为“现在之前”时运行，并且在预定时间为将来时无法执行

    ```
    JobDetail job = new JobDetail();
    job.setName(eventType.toString() + " event");
    job.setJobClass(Action.class);

    SimpleTrigger trigger = new SimpleTrigger();
    trigger.setStartTime(new Date(momentInTime.inMillis()));
    trigger.setName("trigger");

    trigger.setRepeatInterval(repeatFrequency.inMillis());
    trigger.setRepeatCount(SimpleTrigger.REPEAT_INDEFINITELY);

    scheduleManager.getScheduler().scheduleJob(job, trigger); 
    ```

使用上面的代码，我观察到以下内容

```
Time now         : 1352410780356
Will execute at  : 1352410840356  // 1 min interval
Execution starts : 1352410840368 
```

现在和计划执行的时间之间的差异正好是 1 分钟..

好的..尝试更大的间隔

```
Time now         : 1352411061156
Will execute at  : 1352411301156 // 3 min interval
Execution starts : 1352411301165 
```

再次..差异正好是 3 分钟，因为

执行应该在某个时刻

```
 new MomentInTime(new DayOfMonth(8), new HourOfDay(15), new MinuteOfHour(48)); 
```

它实际上开始（似乎开始，我应该说）作为当前时间和请求时间之间的偏移量（甚至是偏移量）。

看来，如果它是并且我想要一份工作`10:43:25`开始`10:45:00`于`10:45:25`

**这是什么原因造成的？**

同时，

```
public MomentInTime(DayOfMonth day, HourOfDay hour, MinuteOfHour min) {
    calendarInstance = Calendar.getInstance();

    // Get current year and month
    int year = calendarInstance.get(Calendar.YEAR);
    int month = calendarInstance.get(Calendar.MONTH);

    calendarInstance.set(year, month, day.getValue(), hour.getValue(), min.getValue());
    System.out.println("Time now       : " + System.currentTimeMillis());
    System.out.println("Will execute at: " + calendarInstance.getTimeInMillis());
}

public long inMillis() {
    return calendarInstance.getTimeInMillis();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T22:27:17.957

1 行修复

```
 calendarInstance.set(Calendar.MILLISECOND, 0); 
```

完毕。

# android - 导致 ListView 行的 onClick 提供编辑选项

> ID：13298518
> 
> 赞同：2
> 
> 时间：2012-11-08T21:56:36.963
> 
> 标签：android, android-layout, android-listview, layout-inflater

我想要单击 ListView 中的一行并提供按钮以对我在所述行中显示的内容进行基本编辑。现在，我并不是要将文本视图完全更改为可编辑文本视图，而是仅提供诸如“编辑”和“删除”之类的按钮。这可以通过弹出窗口来完成，但我试图避免这种情况，我希望这些操作按钮替换该行的显示内容。

起初我认为它可能只有两种布局来膨胀成行。一个“活跃”，一个正常。单击时，它只会为单击的行返回不同的布局，并有一个标记来指示哪一行是当前选定的行。首先遇到了我没想到的问题，当列表视图向上和向下滚动时，膨胀的视图被回收。好的，好的，所以我对 BaseAdapter 做了一个扩展，这样我就可以用 getView() 做我自己的事情了。好吧，我设法让它正确地允许回收视图（而不是在不应该的地方重用“活动”视图）*但是*我认为没有办法让它刷新/重新加载备用布局，除非将所述行从屏幕上滚动然后重新打开。似乎没有办法强制 getView() 实际发生，除非一行离开屏幕并回来。

所以这是一个两头的问题。有一种方法可以让单行在显示时换出膨胀的视图？还有两个也许我这样做的方法是一种倒退的方式来完成我想要的，有没有更好的方法？感谢您的时间！

```
public View getView(int position, View convertView, ViewGroup parent) {
    View v;
    Boolean activeExists = false;
    if(convertView!=null && convertView.getTag()==(String) "active"){
        activeExists=true; }
    if (((position==activeFlag && activeExists==true) || (position!=activeFlag && activeExists==false)) && convertView!=null) {
        v = convertView;
    } else if(position==activeFlag && activeExists==false){
        v = inflater.inflate(rowlayoutActive, parent, false);
        v.setTag((String) "active");
    } else if (position!=activeFlag && activeExists==true) {
        v = inflater.inflate(rowlayout, parent, false);
    } else {
        v = inflater.inflate(rowlayout, parent, false);
    }
    bindView(position, v);
    return v;
} 
```

（在这个 getView 之外，我必须`(int) activeFlag`记住哪个是当前“选定的”，并且我有自己的 bindView 版本，它与正常情况并没有太大区别。布尔值是已经膨胀的视图的快速标记，以保持错误一个从回收时走错行。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T23:15:18.977

很好的问题，部分答案可能是您考虑了 MVC 模型。严格来说，您应该修改基础数据以导致 UI 发生变化，这表明可能向您的数据添加布尔值“isEditing”或类似的，通过单击设置它，然后调用 notifyDataSetChanged。在 getView 中，您将测试该布尔值以使用适当的布局。

# php - 外部动画 jquery 不工作--php

> ID：13298522
> 
> 赞同：0
> 
> 时间：2012-11-08T21:56:48.257
> 
> 标签：php, jquery, external

我有一个加载外部 php 文件的主 php 文件。这是我的主 php 文件中的代码：

```
<php>
<head>
    <meta http-equiv="content-type" content="text/php; charset=utf-8" />
    <link rel="stylesheet" type="text/css" media="all" href="style.css" />

    <script type="text/javascript" src="ajax.js"></script>
    <link rel="stylesheet" href="colorbox.css" />

        <script src="js/jquery.colorbox.js"></script>
        <script src="js/jquery-1.8.2.min.js"></script>
        <script src="js/jquery.colorbox-min.js"></script>

<link href="jimgMenukwicks.css" rel="stylesheet" type="text/css" />

<script type="text/javascript" src="js/jquery-easing-1.3.pack.js"></script>
<script type="text/javascript" src="js/jquery-easing-compatibility.1.2.pack.js"></script>
<script type="text/javascript" src="js/jquery.kwicks-1.5.1.pack.js"></script>       

    <script type="text/javascript">
      $().ready(function() {
    $('.jimgMenu ul').kwicks({max: 310, duration: 300, easing: 'easeOutQuad'});
    });
</script>

</head>

<div id="tengah" class="jimgMenu" >

  <ul>
    <li class="landscapes"> <a href="javascript:ajaxpage('7.php', 'ResponseDiv');"> </a></li>
    <li class="people"> <a href="javascript:ajaxpage('8.php', 'ResponseDiv');"> </a></li>
    <li class="nature"> <a href="javascript:ajaxpage('9.php', 'ResponseDiv');"> </a></li>
  </ul>

</div>
    <div id="content" class="clearfix shadow">
        <div id="sidebar" class="left">

<div id='ResponseDiv'> </div>
            <div id="menu" class="inner">

            </div>
        </div>

        <div id="main" class="right">
        <h2>Detail</h2>

        <div id='ResponseDiv2'> </div>

        </div>
    </div>
</div>

</php> 
```

我有一个函数`ajax.js`调用一个名为`ajaxpage`. 这里的代码`ajax.js`：

```
function ajaxpage(url, containerid) {
    var page_request = false
    if(window.XMLHttpRequest) // if Mozilla, Safari etc
    page_request = new XMLHttpRequest()
    else if(window.ActiveXObject) { // if IE
        try {
            page_request = new ActiveXObject("Msxml2.XMLHTTP")
        } catch(e) {
            try {
                page_request = new ActiveXObject("Microsoft.XMLHTTP")
            } catch(e) {}
        }
    } else return false
    page_request.onreadystatechange = function () {
        loadpage(page_request, containerid)
    }
    page_request.open('GET', url, true)
    page_request.send(null)
}

function loadpage(page_request, containerid) {
    if(page_request.readyState == 4 && (page_request.status == 200 || window.location.href.indexOf("http") == -1)) document.getElementById(containerid).innerHTML = page_request.responseText
} 
```

问题是当我尝试将“7.php”加载到我的 main.php 中时，7.php 文件已加载，但 7.php 中的动画不起作用。

有谁知道为什么会这样？

这是7.php的内容

```
<php>
<html>
<head>
<style type="text/css">
body {
    background: #0F0D0D;
    padding: 30px 0 0 50px;
}
div.sc_menu_wrapper {
    position: relative;     
    height: 500px;
    /* Make bigger than a photo, because we need a place for a scrollbar. */
    width: 160px;

    margin-top: 30px;
    overflow: auto;
}
div.sc_menu {
    padding: 15px 0;
}
.sc_menu a {
    display: block;
    margin-bottom: 5px;
    width: 130px;

    border: 2px rgb(79, 79, 79) solid;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;        

    /* When image support is turned off */
    color: #fff;
    background: rgb(79, 79, 79);    
}
.sc_menu a:hover {
    border-color: rgb(130, 130, 130);
    border-style: dotted;
}
.sc_menu img {
    display: block;
    border: none;
}

.sc_menu_wrapper .loading {
    position: absolute;
    top: 50px;
    left: 10px;

    margin: 0 auto;
    padding: 10px;

    width: 100px;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;    

    text-align: center;
    color: #fff;
    border: 1px solid rgb(79, 79, 79);
    background: #1F1D1D;
}
/* Styling tooltip */
.sc_menu_tooltip {
    display: block;
    position: absolute;

    padding: 6px;
    font-size: 12px;    
    color: #fff;

    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;    

    border: 1px solid rgb(79, 79, 79);
    background: rgb(0, 0, 0);
    /* Make background a bit transparent for browsers that support rgba */  
    background: rgba(0, 0, 0, 0.5);
}

/* Here are styles for a link to an article. Not for you :) */
#back {
    margin-left: 8px;
    color: gray;
    font-size: 18px;
    text-decoration: none;
}
#back:hover {
    text-decoration: underline;
}
</style>
<script src="js/jquery.js" type="text/javascript"></script>
<script type="text/javascript">/*<![CDATA[*/

function makeScrollable(wrapper, scrollable){
    // Get jQuery elements
    var wrapper = $(wrapper), scrollable = $(scrollable);

    // Hide images until they are not loaded
    scrollable.hide();
    var loading = $('<div class="loading">Loading...</div>').appendTo(wrapper);

    // Set function that will check if all images are loaded
    var interval = setInterval(function(){
        var images = scrollable.find('img');
        var completed = 0;

        // Counts number of images that are succesfully loaded
        images.each(function(){
            if (this.complete) completed++; 
        });

        if (completed == images.length){
            clearInterval(interval);
            // Timeout added to fix problem with Chrome
            setTimeout(function(){

                loading.hide();
                // Remove scrollbars    
                wrapper.css({overflow: 'hidden'});                      

                scrollable.slideDown('slow', function(){
                    enable();   
                });                 
            }, 1000);   
        }
    }, 100);

    function enable(){
        // height of area at the top at bottom, that don't respond to mousemove
        var inactiveMargin = 99;                    
        // Cache for performance
        var wrapperWidth = wrapper.width();
        var wrapperHeight = wrapper.height();
        // Using outer height to include padding too
        var scrollableHeight = scrollable.outerHeight() + 2*inactiveMargin;
        // Do not cache wrapperOffset, because it can change when user resizes window
        // We could use onresize event, but it's just not worth doing that 
        // var wrapperOffset = wrapper.offset();

        // Create a invisible tooltip
        var tooltip = $('<div class="sc_menu_tooltip"></div>')
            .css('opacity', 0)
            .appendTo(wrapper);

        // Save menu titles
        scrollable.find('a').each(function(){               
            $(this).data('tooltipText', this.title);                
        });

        // Remove default tooltip
        scrollable.find('a').removeAttr('title');       
        // Remove default tooltip in IE
        scrollable.find('img').removeAttr('alt');   

        var lastTarget;
        //When user move mouse over menu            
        wrapper.mousemove(function(e){
            // Save target
            lastTarget = e.target;

            var wrapperOffset = wrapper.offset();

            var tooltipLeft = e.pageX - wrapperOffset.left;
            // Do not let tooltip to move out of menu.
            // Because overflow is set to hidden, we will not be able too see it 
            tooltipLeft = Math.min(tooltipLeft, wrapperWidth - 75); //tooltip.outerWidth());

            var tooltipTop = e.pageY - wrapperOffset.top + wrapper.scrollTop() - 40;
            // Move tooltip under the mouse when we are in the higher part of the menu
            if (e.pageY - wrapperOffset.top < wrapperHeight/2){
                tooltipTop += 80;
            }               
            tooltip.css({top: tooltipTop, left: tooltipLeft});              

            // Scroll menu
            var top = (e.pageY -  wrapperOffset.top) * (scrollableHeight - wrapperHeight) / wrapperHeight - inactiveMargin;
            if (top < 0){
                top = 0;
            }           
            wrapper.scrollTop(top);
        });

        // Setting interval helps solving perfomance problems in IE
        var interval = setInterval(function(){
            if (!lastTarget) return;    

            var currentText = tooltip.text();

            if (lastTarget.nodeName == 'IMG'){                  
                // We've attached data to a link, not image
                var newText = $(lastTarget).parent().data('tooltipText');

                // Show tooltip with the new text
                if (currentText != newText) {
                    tooltip
                        .stop(true)
                        .css('opacity', 0)  
                        .text(newText)
                        .animate({opacity: 1}, 1000);
                }                   
            }
        }, 200);

        // Hide tooltip when leaving menu
        wrapper.mouseleave(function(){
            lastTarget = false;
            tooltip.stop(true).css('opacity', 0).text('');
        });         

        /*
        //Usage of hover event resulted in performance problems
        scrollable.find('a').hover(function(){
            tooltip
                .stop()
                .css('opacity', 0)
                .text($(this).data('tooltipText'))
                .animate({opacity: 1}, 1000);

        }, function(){
            tooltip
                .stop()
                .animate({opacity: 0}, 300);
        });
        */          
    }
}

$(function(){   
    makeScrollable("div.sc_menu_wrapper", "div.sc_menu");
});

</script>
</head>
<body>
<div style="overflow: hidden;" class="sc_menu_wrapper">
    <div style="display: block;" class="sc_menu">
        <a href="#" ><img src="images/1.jpg"></a>
        <a href="#" ><img src="images/2.jpg"></a>
        <a href="#" ><img src="images/3.jpg"></a>       
        <a href="#" ><img src="images/4.jpg"></a>
        <a href="#" ><img src="images/5.jpg"></a>
        <a href="#" ><img src="images/6.jpg"></a>

    </div>
<div style="display: none;" class="loading">Loading...</div><div style="opacity: 0;" class="sc_menu_tooltip"></div></div>

</body></html>
</php> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:15:31.970

```
<a href="#" onmouseover="javascript:ajaxpage('ajaxfiles/hotel.html', 'rightcolumn'); loadobjs('css/style.css', 'css/slide.css', 'js/jquery1.3.2-min.js', 'js/jquery-ui1.5.3-min.js', 'js/featured.js')">See Hotel</a> 
```

此代码将工作...

# php - 完整性约束违规：1052 列“位置”在 order 子句中不明确

> ID：13298533
> 
> 赞同：2
> 
> 时间：2012-11-08T21:57:58.507
> 
> 标签：php, mysql, magento, magento-1.4, magento-1.6

我的一位用户从我们自己的 magento 网站向我发送了此链接。我们有这个例外，知道我该如何解决这个问题吗？

[http://www.theprinterdepox.com/catalogsearch/result/index/?cat=100&q=1022&x=0&y=0](http://www.theprinterdepox.com/catalogsearch/result/index/?cat=100&q=1022&x=0&y=0)

```
There has been an error processing your request

SQLSTATE[23000]: Integrity constraint violation: 1052 Column 'position' in order clause is ambiguous

Trace:
#0 /home/theprint/public_html/lib/Varien/Db/Statement/Pdo/Mysql.php(110): Zend_Db_Statement_Pdo->_execute(Array)
#1 /home/theprint/public_html/lib/Zend/Db/Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array)
#2 /home/theprint/public_html/lib/Zend/Db/Adapter/Abstract.php(479): Zend_Db_Statement->execute(Array)
#3 /home/theprint/public_html/lib/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract->query('SELECT DISTINCT...', Array)
#4 /home/theprint/public_html/lib/Varien/Db/Adapter/Pdo/Mysql.php(389): Zend_Db_Adapter_Pdo_Abstract->query('SELECT DISTINCT...', Array)
#5 /home/theprint/public_html/lib/Zend/Db/Adapter/Abstract.php(791): Varien_Db_Adapter_Pdo_Mysql->query(Object(Varien_Db_Select), Array)
#6 /home/theprint/public_html/app/code/core/Mage/Catalog/Model/Resource/Product/Collection.php(878): Zend_Db_Adapter_Abstract->fetchCol(Object(Varien_Db_Select))
#7 /home/theprint/public_html/app/code/core/Mage/Catalog/Model/Layer.php(291): Mage_Catalog_Model_Resource_Product_Collection->getSetIds()
#8 /home/theprint/public_html/app/code/core/Mage/Catalog/Model/Layer.php(221): Mage_Catalog_Model_Layer->_getSetIds()
#9 /home/theprint/public_html/app/code/core/Mage/Catalog/Block/Layer/View.php(163): Mage_Catalog_Model_Layer->getFilterableAttributes()
#10 /home/theprint/public_html/app/code/core/Mage/Catalog/Block/Layer/View.php(122): Mage_Catalog_Block_Layer_View->_getFilterableAttributes()
#11 /home/theprint/public_html/app/code/core/Mage/Core/Block/Abstract.php(238): Mage_Catalog_Block_Layer_View->_prepareLayout()
#12 /home/theprint/public_html/app/code/core/Mage/Core/Model/Layout.php(430): Mage_Core_Block_Abstract->setLayout(Object(Mage_Core_Model_Layout))
#13 /home/theprint/public_html/app/code/core/Mage/Core/Model/Layout.php(446): Mage_Core_Model_Layout->createBlock('catalogsearch/l...', 'catalogsearch.l...')
#14 /home/theprint/public_html/app/code/core/Mage/Core/Model/Layout.php(238): Mage_Core_Model_Layout->addBlock('catalogsearch/l...', 'catalogsearch.l...')
#15 /home/theprint/public_html/app/code/core/Mage/Core/Model/Layout.php(204): Mage_Core_Model_Layout->_generateBlock(Object(Mage_Core_Model_Layout_Element), Object(Mage_Core_Model_Layout_Element))
#16 /home/theprint/public_html/app/code/core/Mage/Core/Model/Layout.php(209): Mage_Core_Model_Layout->generateBlocks(Object(Mage_Core_Model_Layout_Element))
#17 /home/theprint/public_html/app/code/core/Mage/Core/Controller/Varien/Action.php(345): Mage_Core_Model_Layout->generateBlocks()
#18 /home/theprint/public_html/app/code/core/Mage/Core/Controller/Varien/Action.php(270): Mage_Core_Controller_Varien_Action->generateLayoutBlocks()
#19 /home/theprint/public_html/app/code/core/Mage/CatalogSearch/controllers/ResultController.php(77): Mage_Core_Controller_Varien_Action->loadLayout()
#20 /home/theprint/public_html/app/code/core/Mage/Core/Controller/Varien/Action.php(420): Mage_CatalogSearch_ResultController->indexAction()
#21 /home/theprint/public_html/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('index')
#22 /home/theprint/public_html/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#23 /home/theprint/public_html/app/code/core/Mage/Core/Model/App.php(347): Mage_Core_Controller_Varien_Front->dispatch()
#24 /home/theprint/public_html/app/Mage.php(640): Mage_Core_Model_App->run(Array)
#25 /home/theprint/public_html/www.theprinterdepo.com/index.php(55): Mage::run('printerdepo', 'website')
#26 {main} 
```

**数据.php**

```
<?php
class Mage_CatalogSearch_Helper_Data extends Mage_Core_Helper_Abstract
{
    const QUERY_VAR_NAME = 'q';
    const MAX_QUERY_LEN  = 200;

    /**
     * Query object
     *
     * @var Mage_CatalogSearch_Model_Query
     */
    protected $_query;

    /**
     * Query string
     *
     * @var string
     */
    protected $_queryText;

    /**
     * Note messages
     *
     * @var array
     */
    protected $_messages = array();

    /**
     * Is a maximum length cut
     *
     * @var bool
     */
    protected $_isMaxLength = false;

    /**
     * Search engine model
     *
     * @var Mage_CatalogSearch_Model_Resource_Fulltext_Engine
     */
    protected $_engine;

    /**
     * Retrieve search query parameter name
     *
     * @return string
     */
    public function getQueryParamName()
    {
        return self::QUERY_VAR_NAME;
    }

    /**
     * Retrieve query model object
     *
     * @return Mage_CatalogSearch_Model_Query
     */
    public function getQuery()
    {
        if (!$this->_query) {
            $this->_query = Mage::getModel('catalogsearch/query')
                ->loadByQuery($this->getQueryText());
            if (!$this->_query->getId()) {
                $this->_query->setQueryText($this->getQueryText());
            }
        }
        return $this->_query;
    }

    /**
     * Is a minimum query length
     *
     * @return bool
     */
    public function isMinQueryLength()
    {
        if (Mage::helper('core/string')->strlen($this->getQueryText()) < $this->getMinQueryLength()) {
            return true;
        }
        return false;
    }

    /**
     * Retrieve search query text
     *
     * @return string
     */
    public function getQueryText()
    {
        if (is_null($this->_queryText)) {
            $this->_queryText = $this->_getRequest()->getParam($this->getQueryParamName());
            if ($this->_queryText === null) {
                $this->_queryText = '';
            } else {
                if (is_array($this->_queryText)) {
                    $this->_queryText = null;
                }
                $this->_queryText = trim($this->_queryText);
                $this->_queryText = Mage::helper('core/string')->cleanString($this->_queryText);

                if (Mage::helper('core/string')->strlen($this->_queryText) > $this->getMaxQueryLength()) {
                    $this->_queryText = Mage::helper('core/string')->substr(
                        $this->_queryText,
                        0,
                        $this->getMaxQueryLength()
                    );
                    $this->_isMaxLength = true;
                }
            }
        }
        return $this->_queryText;
    }

    /**
     * Retrieve HTML escaped search query
     *
     * @return string
     */
    public function getEscapedQueryText()
    {
        return $this->htmlEscape($this->getQueryText());
    }

    /**
     * Retrieve suggest collection for query
     *
     * @return Mage_CatalogSearch_Model_Resource_Query_Collection
     */
    public function getSuggestCollection()
    {
        return $this->getQuery()->getSuggestCollection();
    }

    /**
     * Retrieve result page url and set "secure" param to avoid confirm
     * message when we submit form from secure page to unsecure
     *
     * @param   string $query
     * @return  string
     */
    public function getResultUrl($query = null)
    {
        return $this->_getUrl('catalogsearch/result', array(
            '_query' => array(self::QUERY_VAR_NAME => $query),
            '_secure' => Mage::app()->getFrontController()->getRequest()->isSecure()
        ));
    }

    /**
     * Retrieve suggest url
     *
     * @return string
     */
    public function getSuggestUrl()
    {
        return $this->_getUrl('catalogsearch/ajax/suggest', array(
            '_secure' => Mage::app()->getFrontController()->getRequest()->isSecure()
        ));
    }

    /**
     * Retrieve search term url
     *
     * @return string
     */
    public function getSearchTermUrl()
    {
        return $this->_getUrl('catalogsearch/term/popular');
    }

    /**
     * Retrieve advanced search URL
     *
     * @return string
     */
    public function getAdvancedSearchUrl()
    {
        return $this->_getUrl('catalogsearch/advanced');
    }

    /**
     * Retrieve minimum query length
     *
     * @param mixed $store
     * @return int
     */
    public function getMinQueryLength($store = null)
    {
        return Mage::getStoreConfig(Mage_CatalogSearch_Model_Query::XML_PATH_MIN_QUERY_LENGTH, $store);
    }

    /**
     * Retrieve maximum query length
     *
     * @param mixed $store
     * @return int
     */
    public function getMaxQueryLength($store = null)
    {
        return Mage::getStoreConfig(Mage_CatalogSearch_Model_Query::XML_PATH_MAX_QUERY_LENGTH, $store);
    }

    /**
     * Retrieve maximum query words count for like search
     *
     * @param mixed $store
     * @return int
     */
    public function getMaxQueryWords($store = null)
    {
        return Mage::getStoreConfig(Mage_CatalogSearch_Model_Query::XML_PATH_MAX_QUERY_WORDS, $store);
    }

    /**
     * Add Note message
     *
     * @param string $message
     * @return Mage_CatalogSearch_Helper_Data
     */
    public function addNoteMessage($message)
    {
        $this->_messages[] = $message;
        return $this;
    }

    /**
     * Set Note messages
     *
     * @param array $messages
     * @return Mage_CatalogSearch_Helper_Data
     */
    public function setNoteMessages(array $messages)
    {
        $this->_messages = $messages;
        return $this;
    }

    /**
     * Retrieve Current Note messages
     *
     * @return array
     */
    public function getNoteMessages()
    {
        return $this->_messages;
    }

    /**
     * Check query of a warnings
     *
     * @param mixed $store
     * @return Mage_CatalogSearch_Helper_Data
     */
    public function checkNotes($store = null)
    {
        if ($this->_isMaxLength) {
            $this->addNoteMessage($this->__('Maximum Search query  length is %s. Your query was cut.', $this->getMaxQueryLength()));
        }

        $stringHelper = Mage::helper('core/string');
        /* @var $stringHelper Mage_Core_Helper_String */

        $searchType = Mage::getStoreConfig(Mage_CatalogSearch_Model_Fulltext::XML_PATH_CATALOG_SEARCH_TYPE);
        if ($searchType == Mage_CatalogSearch_Model_Fulltext::SEARCH_TYPE_COMBINE ||
            $searchType == Mage_CatalogSearch_Model_Fulltext::SEARCH_TYPE_LIKE) {

            $wordsFull = $stringHelper->splitWords($this->getQueryText(), true);
            $wordsLike = $stringHelper->splitWords($this->getQueryText(), true, $this->getMaxQueryWords());

            if (count($wordsFull) > count($wordsLike)) {
                $wordsCut = array_diff($wordsFull, $wordsLike);

                $wordsCut = array_map(array($this, 'htmlEscape'), $wordsCut);
                $this->addNoteMessage(
                    $this->__('Maximum words count is %1$s. In your search query was cut next part: %2$s.',
                        $this->getMaxQueryWords(),
                        join(' ', $wordsCut)
                    )
                );
            }
        }
    }

    /**
     * Join index array to string by separator
     * Support 2 level array gluing
     *
     * @param array $index
     * @param string $separator
     * @return string
     */
    public function prepareIndexdata($index, $separator = ' ')
    {
        $_index = array();
        foreach ($index as $key => $value) {
            if (!is_array($value)) {
                $_index[] = $value;
            }
            else {
                $_index = array_merge($_index, $value);
            }
        }
        return join($separator, $_index);
    }

    /**
     * Get current search engine resource model
     *
     * @return object
     */
    public function getEngine()
    {
        if (!$this->_engine) {
            $engine = Mage::getStoreConfig('catalog/search/engine');

            /**
             * This needed if there already was saved in configuration some none-default engine
             * and module of that engine was disabled after that.
             * Problem is in this engine in database configuration still set.
             */
            if ($engine && Mage::getConfig()->getResourceModelClassName($engine)) {
                $model = Mage::getResourceSingleton($engine);
                if ($model && $model->test()) {
                    $this->_engine = $model;
                }
            }
            if (!$this->_engine) {
                $this->_engine = Mage::getResourceSingleton('catalogsearch/fulltext_engine');
            }
        }

        return $this->_engine;
    }
} 
```

**结果控制器.php**

```
<?php

class Mage_CatalogSearch_ResultController extends Mage_Core_Controller_Front_Action
{
    /**
     * Retrieve catalog session
     *
     * @return Mage_Catalog_Model_Session
     */
    protected function _getSession()
    {
        return Mage::getSingleton('catalog/session');
    }
    /**
     * Display search result
     */
    public function indexAction()
    {
        $query = Mage::helper('catalogsearch')->getQuery();
        /* @var $query Mage_CatalogSearch_Model_Query */

        $query->setStoreId(Mage::app()->getStore()->getId());

        if ($query->getQueryText()) {
            if (Mage::helper('catalogsearch')->isMinQueryLength()) {
                $query->setId(0)
                    ->setIsActive(1)
                    ->setIsProcessed(1);
            }
            else {
                if ($query->getId()) {
                    $query->setPopularity($query->getPopularity()+1);
                }
                else {
                    $query->setPopularity(1);
                }

                if ($query->getRedirect()){
                    $query->save();
                    $this->getResponse()->setRedirect($query->getRedirect());
                    return;
                }
                else {
                    $query->prepare();
                }
            }

            Mage::helper('catalogsearch')->checkNotes();

            $this->loadLayout();
            $this->_initLayoutMessages('catalog/session');
            $this->_initLayoutMessages('checkout/session');
            $this->renderLayout();

            if (!Mage::helper('catalogsearch')->isMinQueryLength()) {
                $query->save();
            }
        }
        else {
            $this->_redirectReferer();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T20:08:15.970

该错误表明您的搜索查询中有多个表以“位置”作为列名。

你应该做的是打印出查询和分析。

1- 打开文件：/home/theprint/public_html/app/code/core/Mage/Catalog/Model/Resource/Product/Collection.php（第 878 行）
2- 从方法内部 getAllIds($limit = null, $ offset = null) 在 return 语句之前。

```
/* 记得只向你输出这个 */

回声 $idsSelect; /* 打印出查询字符串 */

var_dump($this->_bindParams); /* 查询参数值 */
死;

```

3-然后将查询发布到您的问题中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T11:46:48.357

试试这个。

转到 magentoroot/app/code/core/Mage/Catalogue/Model/Layer.php

搜索“public function getFilterableAttributes()”</p>

在里面，寻找这些行：

```
->setAttributeSetFilter($setIds)
->addStoreLabel(Mage::app()->getStore()->getId())
->setOrder('position', 'ASC'); 
```

更改为以下内容：

```
->setAttributeSetFilter($setIds)
->addStoreLabel(Mage::app()->getStore()->getId());
//->setOrder('position', 'ASC'); 
```

您需要保存它并将其放在本地文件夹（/app/code/local/Mage/Catalog/Model）中，这样它就不会覆盖核心 Magento 文件。您可能需要清除缓存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T10:59:39.837

如果您通常不接触 Magento 代码，那么基于修复代码的答案不会对您有很大帮助。因此，我将尝试为您找到不需要直接更正代码的解决方案。

正如您所注意到的，在搜索 1022（与型号代码匹配）后单击翻新打印机可能会重复该错误。但是，它也可以通过单击此搜索的任何类别来显示。

如果您进行高级搜索，则不会发生这种情况，例如 [http://www.theprinterdepox.com/catalogsearch/advanced/result/?name=1022&sku=&price%5Bfrom%5D=&price%5Bto%5D=&free_shipping=&category=100](http://www.theprinterdepox.com/catalogsearch/advanced/result/?name=1022&sku=&price%5Bfrom%5D=&price%5Bto%5D=&free_shipping=&category=100)

作为快速修复，您可以将问题 URL 重定向到高级搜索中的等效 URL。是的，这有点乱，但总比错误信息好。

我建议您停用上述高级搜索中出现的两个产品，然后依次重新激活它们，但这些产品在与这些产品匹配的其他搜索中显示正常。

我能想到 Magento 在一次搜索而不是另一次搜索中失败的唯一原因是失败的组合是否以某种方式被缓存。尝试清除缓存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T02:05:39.883

我的 magento 知识不是最好的，我在我的 magento 商店 1.6.2.0 中尝试搜索一个术语，更改顺序，并按价格范围过滤并且工作正常。

如果您没有任何扩展对分层导航应用修改并且您没有进行任何核心更改，那就太奇怪了。您使用的是旧的 magento 版本吗？如果您的版本中存在错误，您是否已在 magento 错误中检查过？

可能是浪费时间，但您试图重新索引所有并删除 var/cache 文件？

# multithreading - 在 KSH 衍生进程中设置变量

> ID：13298541
> 
> 赞同：2
> 
> 时间：2012-11-08T21:58:38.263
> 
> 标签：multithreading, variables, ksh

我有一个冗长的菜单脚本，它依赖于它的变量的一些命令输出。这些命令需要几秒钟才能运行，我想生成新进程来设置这些变量。它看起来像这样：

```
VAR1=`somecommand` &
VAR2=`somecommand` &
...
wait
echo $VAR1 $VAR2 
```

问题是这些进程是随着它们设置的变量而产生和死亡的。我意识到我可以通过将这些发送到一个文件然后读取它来做到这一点，但我想在没有临时文件的情况下做到这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:30:19.497

这相当笨重，但对我有用。我有三个脚本。

cmd.sh 是你的“一些命令”，它只是一个测试脚本：

```
#!/bin/ksh
sleep 10
echo "End of job $1" 
```

下面是`wrapper.sh`，它运行单个命令，捕获输出，完成后向父级发出信号，然后将结果写入标准输出：

```
#!/bin/ksh
sig=$1
shift
var=$($@)
kill -$sig $PPID
echo $var 
```

这是父脚本：

```
#!/bin/ksh

trap "read -u3 out1" SIGUSR1
trap "read -p out2" SIGUSR2

./wrapper.sh SIGUSR1 ./cmd.sh one |&
exec 3<&p
exec 4>&p

./wrapper.sh SIGUSR2 ./cmd.sh two |&
wait
wait
echo "out1: $out1, out2: $out2"
echo "Ended" 
```

2x 等待，因为第一个将被中断。

在父脚本中，我运行包装器两次，每个作业一次，传入要运行的命令和任何参数。意思是“`|&`管道到后台” - 作为协同进程运行。

这两个`exec`命令将管道文件描述符复制到 fds 3 和 4。当作业完成时，包装器向主进程发出信号以读取管道。使用 捕获信号`trap`，读取适当子进程的管道，并收集结果数据。

相当复杂和笨重，但它似乎工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:04:26.227

您可以使用命令替换获得整个过程的输出，例如：

```
VAR1=$(somecommand &)
VAR2=$(somecommand &)
...
wait
echo $VAR1 $VAR2 
```

# asp.net-mvc - 当 ID 包含句点时，ApiController 返回 404

> ID：13298542
> 
> 赞同：59
> 
> 时间：2012-11-08T21:58:42.613
> 
> 标签：asp.net-mvc, asp.net-web-api, asp.net-mvc-routing

我有一个 ApiController，我想使用电子邮件地址作为请求的 ID 参数：

```
// GET api/employees/email@address.com
public CompactEmployee Get(string id) {
   var email = id;
   return GetEmployeeByEmail(email);
} 
```

但是，我无法让它工作（返回**404**）：

`http://localhost:1080/api/employees/employee@company.com`

以下所有工作：

*   `http://localhost:1080/api/employees/employee@company`
*   `http://localhost:1080/api/employees/employee@company.`
*   `http://localhost:1080/api/employees?id=employee@company.com`

我已经`relaxedUrlToFileSystemMapping="true"`在我的 web.config 中设置[了 Phil Haack 的详细说明](http://haacked.com/archive/2010/04/29/allowing-reserved-filenames-in-URLs.aspx)。

我非常希望完整的电子邮件地址能够正常工作，但只要句号后面跟着任何其他字符，请求就会返回 404。任何帮助将不胜感激！

## 解决方案

由于缺乏其他选项，我朝着 Maggie 建议的方向前进，并使用[这个问题](https://stackoverflow.com/a/11736971/90227)的答案来创建重写规则，以便在我需要在 URL 中发送电子邮件时自动附加斜杠。

```
<system.webServer>
  ....   
  <rewrite>
    <rules>
      <rule name="Add trailing slash" stopProcessing="true">
        <match url="^(api/employees/.*\.[a-z]{2,4})$" />
        <action type="Rewrite" url="{R:1}/" />
      </rule>
    </rules>
  </rewrite>
</system.webServer> 
```

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-11-08T22:33:09.770

添加斜杠是否适合您的场景？

```
http://localhost:33021/api/employees/employee@company.com/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T23:54:08.773

检查您的 IIS 设置：

`Home Directory -> Configuration`

编辑`.aspx`应用程序扩展并确保该设置处于`Verify that file exists`关闭状态。

**更新**

我刚刚使用默认的 MVC4 Web API 项目进行了测试

网址：`http://localhost:10983/api/values/cool@email.com`

行动`ValuesController`：

```
public string Get(string id)
{
    return id;
} 
```

这是回应：

```
<string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">cool@email.com</string> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-11T23:45:48.043

这对我有用：

我在 targetFramework = 4.6.1 上运行。我已经升级到 4.6.2 并在 web.config 中添加了这个：

```
<system.web>
        <customErrors mode="Off"/>
        <compilation debug="true" targetFramework="4.6.2"/>
        <!-- This will allow to search for stuff that contains . & etc.-->
        <httpRuntime targetFramework="4.6.2" maxRequestLength="100000" maxUrlLength="2048" relaxedUrlToFileSystemMapping="true" requestPathInvalidCharacters=""/>
  </system.web> 
```

当然，这`requestPathInvalidCharacters=""`是为了能够在 URI 中以编码形式包含 & 等内容。

# mysql - 如何在 Rails 中正确指定多列索引

> ID：13298545
> 
> 赞同：7
> 
> 时间：2012-11-08T21:58:57.187
> 
> 标签：mysql, ruby-on-rails, postgresql, indexing

如这个问题所示： [How do I make a column unique and index it in a Ruby on Rails migration?](https://stackoverflow.com/questions/1449459/how-to-make-column-unique-and-index-it-in-rails-migration)
你可以写：

```
add_index :the_table, [:foo_column, :bar_column], unique: true 
```

添加多列索引。
但是是否仍然需要为您已经指定多列索引的每一列添加单个索引？

我的意思是在上面显示的代码**之外**编写下面的代码。

```
add_index :the_table, :foo_column  
add_index :the_table, :bar_column 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-08T22:07:02.780

对于 MySQL：

MySQL 将能够使用索引 [:foo_column, :bar_column] 来查询两列的条件，也可以只查询左列的条件，而不是右列的条件。

更多信息在这里：[http ://dev.mysql.com/doc/refman/5.0/en/multiple-column-indexes.html](http://dev.mysql.com/doc/refman/5.0/en/multiple-column-indexes.html)

所以你应该做

```
add_index :the_table, [:foo_column, :bar_column], :unique => true
add_index :the_table, :bar_column 
```

确保您正确索引所有内容

MySQL 从左到右索引列，因此如果您有这样的多列索引：`[:col1, :col2, :col3, :col4]`，您可以在以下位置查询此索引：

*   col1
*   col1 + col2
*   col1 + col2 + col3
*   col1 + col2 + col3 + col4

所以你可以查询最**左边的列**

如果您需要其他任何东西，则必须创建更多索引

同样，这仅适用于 MySQL，postgres 的工作方式可能不同

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-09T00:01:41.303

对于 PostgreSQL：

[PostgreSQL：文档：多列索引](http://www.postgresql.org/docs/current/static/indexes-multicolumn.html)说：

> 多列 B 树索引可用于**涉及索引列的任何子集**的查询条件，但当前导（最左侧）列存在约束时，索引效率最高。**确切的规则是前导列上的等式约束，加上没有等式约束的第一列上的任何不等式约束**，将用于限制扫描的索引部分。在索引中检查这些列右侧的列的约束，因此它们可以正确保存对表的访问，但它们不会减少必须扫描的索引部分。

似乎 PostgreSQL 在这方面的行为与 MySQL 相同。

# compression - 如何判断可执行文件（任何格式）是否被压缩

> ID：13298547
> 
> 赞同：1
> 
> 时间：2012-11-08T21:59:03.893
> 
> 标签：compression, executable

我的问题是，是否有任何工具可以检测用于压缩可执行文件的压缩工具？

可执行文件的可执行格式无关紧要。（[http://en.wikipedia.org/wiki/Category:Executable_file_formats](http://en.wikipedia.org/wiki/Category%3aExecutable_file_formats)）

我正在寻找一种可以识别用于压缩可执行文件的压缩工具的工具。

例如：假设一个可执行文件是用 UPX 压缩的：The Ultimate Packer For executables 但我不知道使用了这个压缩器。我可以通过使用工具以某种方式确定使用压缩器对其进行压缩吗？

如果您有任何建议或可以指出正确的方向，将不胜感激！我想找到一个可以检测各种压缩机的工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:05:35.873

在 Unix 上，使用`file`命令。它试图通过将文件与各种签名进行匹配来确定文件中的数据类型。它并不特定于可执行文件或压缩，这些只是它可以识别的一些文件类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:35:51.063

开始是：尝试使用 gzip 之类的东西对其进行压缩。已经压缩的东西不会压缩太多，或者根本不会压缩，或者可能会扩大一点。如果可执行文件压缩得相当多，那么它一开始就没有被压缩。快速检查显示我的大多数可执行文件压缩了几乎两倍。

然后至少你会知道它是否被压缩。

从那里，您可以尝试使用[候选](http://en.wikipedia.org/wiki/Executable_compression)压缩可执行文件，并在前缀可执行文件（即解压缩器）中查找常见序列。

# c++ - Eclipse C++ 包括来自我的源文件夹的头文件

> ID：13298550
> 
> 赞同：15
> 
> 时间：2012-11-08T21:59:25.453
> 
> 标签：c++, eclipse, header, include, include-path

一般来说，我对 C++ 和 Eclipse 还是很陌生，所以如果我遗漏了一些相当明显的东西，我深表歉意。

我遇到的问题是我试图在我的一个源文件中包含一个头文件，但它们位于我的项目目录中的不同文件夹中。我不知道我应该如何包括他们。我上传了一张图片，显示了我要突出显示的头文件的问题。

![在此处输入图像描述](../Images/352a3408068bf2f9174efec5e1f7dc5a.png)

如果有人能告诉我我应该使用什么“#include”语句，那将是非常棒的。

谢谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-08T22:25:09.863

有几个不同的选项可以完成这项工作。`#include`最简单的就是改成

```
#include "../Statistics/Statistics.h" 
```

这将在没有任何其他修改的情况下工作。但是，如果您移动任一文件，或以某种方式更改两者之间的相对路径，则会中断。

或者，您可以将`Statistics`文件夹的路径添加到编译器的包含文件搜索路径中。右键单击项目名称，选择*Properties -> C/C++ Build -> Settings*，然后找到编译器的包含文件路径选项。对于 g++，它是`-I<path/to/include/folder>`. 添加这将使该`#include`语句像您当前拥有的那样工作。

与第二个非常相似的选项是将`src`文件夹的路径（而不是`Statistics`文件夹）添加到包含搜索路径。在这种情况下，您必须将语句更改为

```
#include "Statistics/Statistics.h" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T22:26:33.893

当您在 src 文件夹中创建子文件夹时，每个 cpp 文件都会在它所在的文件夹中编译。因此，任何`""`包含都需要指定从该文件夹到另一个文件夹的相对路径。

在您的情况下，要从 FileInOut 文件夹中获取，您需要返回上一级，然后进入 Statistics 文件夹

例如

```
#include "../Statistics/Statistics.h" 
```

另一种选择是，如果您将包含在您的 src 目录中，则将 src 目录添加到包含路径中。现在，当您包含时，您只需要指定来自 src 根目录的路径。

例如。

```
#include "Statistics/Statistics.h" 
```

# windows-installer - 通过设置 msi 部署到 GAC

> ID：13298553
> 
> 赞同：1
> 
> 时间：2012-11-08T21:59:38.083
> 
> 标签：windows-installer, installation, gac

我继承了一个将“通用”程序集（DLL）部署到 GAC 的项目。在 Setup 项目中，Common 的 Primary 输出的 Properties 窗口将 Folder 属性指定为 Global Assembly 缓存。

但是，当我在 Windows 资源管理器中导航到 GAC 时，我找不到该程序集的任何痕迹。

我必须假设它在那里，因为它包含 DAL 并且正在访问数据库。

在项目本身中，我注意到在 AssemblyInfo.cs 文件中，以下行被注释掉：[assembly: AssemblyKeyFile("")] 和 [assembly: AssemblyKeyName("")]

但是在签名选项卡上，指定了一个密钥，并且选中了 Sign the Assembly 复选框。

我只是想了解为什么它没有在 GAC 中列出（通过 shfusion.dll - 查看器）。我已经修复了一些错误，并希望确信更新的 dll 已部署到 GAC，而无需手动执行此操作。

[编辑] 我终于发现 GAC 中的 dll 并使用反编译器，确定它不包括我的更改。我想这意味着安装程序不起作用，我需要手动安装它。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T02:32:33.190

看看[这里](https://stackoverflow.com/questions/205188/whats-the-correct-way-of-registering-installing-an-assembly-to-the-gac/205243#205243)，它将向您展示如何在 GAC 中正确安装。
示例代码使用 WIX。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T00:32:11.127

只是关闭这个线程，因为原始问题评论中的讨论涵盖了所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-19T03:51:52.627

使用 Installshield 工具可以轻松地将 DLL 添加到 GAC，为此只需添加一个组件并将一个功能关联到该组件并将`destination`字段更改为`[GlobalAssemblyCache]YourComponyName`. 唯一需要记住的重要注意事项是您的 DLL 必须有一个“强名称”以避免与 GAC 中的其他 DLL 命名冲突。

# glassfish - 在根目录中部署项目时 Glassfish 服务器管理控制台崩溃

> ID：13298555
> 
> 赞同：1
> 
> 时间：2012-11-08T21:59:43.580
> 
> 标签：glassfish

当在我的域的根 (/) 中部署应用程序时（当我像在[图像](http://img4.imageshack.us/img4/1184/immagine2dk.jpg)中设置“上下文根：”时），Glassfish 服务器管理控制台崩溃。刷新后，管理控制台会显示我在根目录中加载的站点。（为什么？）。所以我重新启动服务，一切正常：新应用程序在 root 上运行，并且在端口 4848 上有管理控制台。为什么？，如何解决这个问题？

（控制台位于端口 4848。站点域根位于端口 8080 上，由 iptable 在 80 上重定向。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-18T23:57:44.347

我建议不要将上下文根设置为“/”，而是在`"server-config" -> "virtual server" -> "server" -> and select your app in "default web-module"`. 请注意，必须部署您的应用程序才能在此处选择它。

# cognos - Cognos 8 按列排序

> ID：13298556
> 
> 赞同：1
> 
> 时间：2012-11-08T21:59:53.190
> 
> 标签：cognos, cognos-8, cognos-bi

我在 Cognos 8 中工作，报告中有前三个字段：Agency Org Name

我总是显示机构和名称... Org 基于渲染变量显示。所以在提示页面上，如果用户选择yes, display Org，就会显示在报表上。如果他们选择否，则不会显示。

排序顺序需要是 Agency、Org、Name.... 但是，如果没有显示 Org，我需要排序顺序是 Agency、Name。

但是，即使没有呈现 Org，它也不会对 Agency、Name 进行排序。它仍然在那里与 Org 进行排序。

如果没有呈现 Org，我如何强制它不按 Org 排序？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T05:55:48.400

Personally when using render variable, I prefer to use blocks. So, in your case it means you should create two blocks and then put a list in each block.
The data source of the list can be identical, but the sorting is different:

![Two Lists inside separated blocks](../Images/1627ea5651e7cea8131beb92973f3f20.png)

# xcode - git(osis) 和 Xcode

> ID：13298557
> 
> 赞同：1
> 
> 时间：2012-11-08T21:59:56.657
> 
> 标签：xcode, linux, macos, git, debian

我（成功）安装了 gitosis。我想在我的 debian（根服务器）上使用它来访问我的 Xcode 项目（和合并等）。我可以使用 Xcode 成功克隆 git repo，但是如果我尝试推送一些（已提交的）更改，Xcode 会告诉我“选择远程来推送更改”但我无法选择任何内容。我可以通过 Terminal.app 推送，但这不是很舒服。那么为什么 Xcode 告诉我，没有可用的遥控器？我尝试手动添加远程（类似于“gitosis@myserver.com:repositories/gitosis-admin.git”），我尝试使用 ssh://gitosis@my...，但这甚至不起作用与终端应用程序。

那么为什么 Xcode 告诉我“没有可用的遥控器”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:02:22.087

转到组织者，单击存储库，单击您的存储库，转到远程，单击添加远程，应该可以从那里添加它。应该要求验证等。从未使用过 gitosis ，但这就是它对 git 的工作方式。

# c++ - posix信号反应时间

> ID：13298562
> 
> 赞同：2
> 
> 时间：2012-11-08T22:00:09.440
> 
> 标签：c++, linux, qt, signals, timing

**对打算退出应用程序的 posix 信号的合理反应时间是多少？**

换句话说，我的*sigint*、*sigterm*或*sigtstp*处理可能需要多长时间才能在系统关闭、运行级别切换或其他自动化情况下终止应用程序？

我正在编写一个非图形 qt 应用程序，它必须响应信号以便在终止之前进行清理。这是我目前的实现：

```
#include "posixsignals.h"
#include <signal.h>

QAtomicInt posixSignals::sig(0);

posixSignals::posixSignals()
{

    //connect to posix signals
        signal(SIGINT, posixSignals::interrupt);
        signal(SIGTSTP, posixSignals::interrupt);
        signal(SIGTERM, posixSignals::interrupt);

    //connect and start QTimer t
        connect(&t, SIGNAL(timeout()), this, SLOT(check()));
        t.start(500);
}

void posixSignals::interrupt(int signal)
{
    sig.testAndSetOrdered(0,signal);
}

void posixSignals::check()
{
    if(sig)
        emit signalCought(sig);
} 
```

在实际实现中，我将某些东西连接到 signalCought 信号以触发应用程序的清理和退出。这里的“问题”是如果我将计时器设置得太低，应用程序会最大化核心，但如果我将其设置得太高，它可能会被杀死或显着减慢关机过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:16:53.003

使用 时[`init(8)`](http://man.he.net/man8/init)，其中的脚本`/etc/init.d/`用于停止进程。我相信确切的机制和时间限制可能因发行版而异。在我的情况下，时间设置为 3 秒（您可以在函数`/etc/rc.d/init.d/functions`内部的文件中找到它`killproc()`。所以 3 秒通常是一个上限。

此参数也可以被任何特定守护程序/应用程序的启动/停止脚本覆盖。`init.d`例如，还有其他选择`systemd`。但我不确定该系统是如何工作的，因此无法判断超时。

我认为 3 秒足以停止任何应用程序 - 很难想象还有什么比这更长的时间。在更糟糕的情况下——只需维护一些日志以查看您的应用程序是否按时完成。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T22:53:22.107

代替轮询循环，您可以使用带有 QSocketNotifier 的套接字将 posix 信号转换为 Qt 事件，如此[处](http://doc.qt.digia.com/qt/unix-signals.html)所述。

# wpf - 在 WPF 中使用移动和缩放绘制形状、文本和图像

> ID：13298563
> 
> 赞同：1
> 
> 时间：2012-11-08T22:00:15.837
> 
> 标签：wpf, drawing

我正在尝试在 WPF 中绘制简单的地图。我需要绘制形状、文本和图像。也应该可以使用鼠标移动和放大和缩小。

现在，我有 Canvas + Geometry + Transforms 的组合来绘制形状，但我不知道如何添加文本和图像。

我已经尝试过 Canvas/Grid 和 Layout/Render 转换的各种组合。最大的问题是添加文本和图像，因为转换是几何图形。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T08:34:57.227

如果我理解正确，您当前正在将 Path 对象（具有转换的几何图形）放入 Canvas 中。要添加文本和图像，您可以轻松地将[TextBlock](http://msdn.microsoft.com/en-us/library/system.windows.controls.textblock.aspx)和[Image](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.aspx)对象添加到同一个 Canvas 并将您的转换应用到它们的 RenderTransform 属性。

[一种完全不同的方法是使用DrawingVisual](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingvisual.aspx)类提供的 WPF 低级呈现。您可以从[WPF 图形渲染概述](http://msdn.microsoft.com/en-us/library/ms748373.aspx)开始。

# version-control - 多个项目的源代码结构

> ID：13298569
> 
> 赞同：0
> 
> 时间：2012-11-08T22:00:23.703
> 
> 标签：version-control, tfs, continuous-integration, branching-and-merging, continuous-deployment

**背景：**

3-5 名使用 TFS 的程序员。我们支持旧版应用程序以及构建新应用程序。我正在实施持续交付的元素，我希望从一个好的结构开始。目前，应用程序之间的相互依赖关系很少，但将来会有一些共享组件。

我计划实施一个“单主干”分支策略（换句话说，NO BRANCHING），除了极少数需要长功能分支的情况——我将努力确保永远不会发生这种情况。

**问题：**

**鉴于此，哪种源代码结构更好，为什么？** 选择其中一个（工作区等）是否有任何实质性影响？

*单一主分支*

```
$/MAIN/src/ApplicationA/ApplicationA.sln
$/MAIN/src/ApplicationA/Project1.csproj
$/MAIN/src/ApplicationA/Project2.csproj
$/MAIN/src/ApplicationB/...
$/MAIN/src/SharedModule/... 
```

与*每个应用程序的主分支*

```
$/ApplicationA/MAIN/src/ApplicationA.sln
$/ApplicationA/MAIN/src/Project1.csproj
$/ApplicationA/MAIN/src/Project2.csproj
$/ApplicationB/MAIN/src/...
$/SharedModule/MAIN/src/... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T05:40:38.963

根据我的经验，我发现最好对具有不同开发周期的事物使用单独的分支。

如果您要始终将它们作为单个软件包一起发布，并且它们是作为单个产品开发的 - 单个主分支更合适。

如果每个应用程序都可能在不同的时刻发布，那么每个应用程序的主分支似乎更合适。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T02:23:30.920

我喜欢在一个主分支中开发所有代码。然后使用配置设置基本上禁用模块进行生产并启用它进行测试，直到它准备好发布。额外的好处是模块（dll）已经为发布打包，因为您提前发布并且经常发布。

# xml - 使用 as3 的图像的计时器更新

> ID：13298572
> 
> 赞同：1
> 
> 时间：2012-11-08T22:00:36.453
> 
> 标签：xml, actionscript-3, flash

我正在尝试通过计时器更新图像。我一次只能上传一张图片。如果我要删除图像并上传另一张图像。然后我的应用程序应该实时更新到最新的图像。由于某种原因，它没有读取我的 newUpdate 函数。“newUpdate”函数应该比较 xml，如果 xml 文件不匹配，则重新加载图像。我需要有关更新功能的帮助。也许我对更新功能的逻辑是错误的，任何帮助将不胜感激。谢谢

```
var xmlLoader:URLLoader = new URLLoader();
var xmlData:XML;
var imageList:XMLList;
var imageLoader:Loader = new Loader();
var imageIndex:uint = 0;
var child:DisplayObject;
var timer:Timer =new Timer(3000,0);
var myImageHolder = new ImageHolder();

addChild(myImageHolder);
myImageHolder.x= 0;
myImageHolder.y= 0;

function newUpdate(e:TimerEvent) {
      if (imageList != xmlData.sectionItem.file) {
    newScreensaver();
    } 
}

function newScreensaver() {
xmlLoader.load(new URLRequest(path +"metv.xml"));
xmlLoader.addEventListener(Event.COMPLETE, xmlLoaded);
addChild(videoTxt);
}

function xmlLoaded(e:Event) {
xmlData = new XML ( e.target.data);
imageList = xmlData.sectionItem.file;
loadImage(path + imageList[0]);
}

function imageLoaded(e:Event){
child = myImageHolder.addChild(imageLoader);
}

function loadImage(path:String){
imageLoader.load(new URLRequest( path));
imageLoader.contentLoaderInfo.addEventListener(Event.COMPLETE,imageLoaded);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T01:31:01.507

我认为您没有提供足够的上下文来回答这个问题，因为这行：

```
if (imageList != xmlData.sectionItem.file) 
```

由于这条线，永远不会真正：

```
imageList = xmlData.sectionItem.file; 
```

请解释加载初始 XML 数据后 xmlData 或 imageList 在什么时候以及为什么会改变值。

...也许这就是问题所在？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T04:12:36.697

第一次，两者`imageList`和`xmlData`都是`null`。他们既没有实例化也没有分配。所以在那一刻两者都是平等的，`newScreensaver()`不会因为你的情况而执行。

我的建议是加载第`xml`一个，一旦加载完成就开始加载图像并保存它。如果你这样做了，你将重用（`clone`）它并且你不必每次都等待图像被加载。加载所有图像后，启动计时器。如果您有更多数量的图像，则在几张（比如 3 或 5 张）图像完成加载后启动计时器。

注意：假设您有一个包含所有图像名称（比如 5 个图像名称/路径）的 xml 文件，并一张一张地重复加载相同的图像。

# django - Django Admin：如何在同一更改表单上编辑内联多对多链接另一端的对象？

> ID：13298573
> 
> 赞同：0
> 
> 时间：2012-11-08T22:00:36.870
> 
> 标签：django, django-admin

使用 Django Admin 时，我可以通过指定内联以 < select > 小部件的形式显示 ManyToMany 链接。但据我所知，无法从同一表单编辑链接另一侧的对象，也无法显示 URL 以将我带到链接的对象。两者都适合我，但我更喜欢前者。

# java - 语法规则的分隔符

> ID：13298575
> 
> 赞同：1
> 
> 时间：2012-11-08T22:00:43.810
> 
> 标签：java, grammar, delimiter

我试图弄清楚如何提取给定语法表达式的不同参数。一个语法规则可能如下所示：

```
s( X, Y(X,-), T(Y(X,-),X,X) ) 
```

首先，我想提取前导字符串，在这种情况下`s`，然后我想逐步遍历所有参数，在这种情况下`X`，`Y(X,-)`, `T(Y(X,-),X,X)`。也有可能我根本没有参数，只是`s`作为一项规则。

在原始语法中，这样的表达式可能有任意数量的参数，而这些参数本身也可能有参数。

目前我得到以下代码：

```
Scanner sc = new Scanner(Rule);
String next = new String();

sc.useDelimiter("\\(");
next = sc.next();
//...Do something...//

sc.useDelimiter("");   
if(sc.hasNext()){   //Check if there are parameters
    sc.useDelimiter("\\)"); //Which delimiter should I use?
    while(sc.hasNext()){
       next = sc.next();
       //...Do something...//
    }
} else {
    return next;
} 
```

我不知道应该使用哪个分隔符来获取有关示例的参数，例如`X`, 。`Y(X,-)``T(Y(X,-),X,X)`

# google-api-java-client - 使用 Google 地图和 Mapstraction 进行地理编码 - HTML 代码中的静态地址不起作用

> ID：13298583
> 
> 赞同：1
> 
> 时间：2012-11-08T22:01:11.937
> 
> 标签：google-api-java-client, google-geocoder

我是在 Google 地图页面上设置地理编码的新手，我正在使用 Map Scripting 101 一书中的示例。我试图调出一个在 Google 地图上进行地理编码的静态地址。我试图将代码转移到我自己的 html 页面，但它不起作用。我替换了我的 Google API 密钥，并且我的 mapstraction 目录的路径是正确的。我绝对在正确的网站上使用我的代码，因为我的 Google API 与其他地图一起使用没有任何问题。问题只是 html 代码中静态地址的地理编码。

我想我在获得 Google API 时已经设置了所有适当的服务。但是，我不清楚除了制作标准地图之外是否还需要地理编码的特殊 API 服务。

这是我无法工作的 HTML 代码。显示的只是一个外壳，里面没有地图，也没有地理编码点。我从书中的示例和本书随附的网站上获得了此代码。

```
 <script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=AIzaSyDYqIvje6tt-`enter code here`g4NnWOLAVqwBWCcMuI5rvM&sensor=false" type="text/javascript"></script>
    <script type="text/javascript" charset="utf-8" src="js/mxn.js?(google)"></script>
    <script src="js/mxn.google.geocoder.js"></script>
    <style>
    div#mymap {
        width: 400px;
        height: 350px;
    }
    div#clicks {
        width: 400px;
    }
    </style>
    <script type="text/javascript">
    var mapstraction;
    var mks = [];
    function create_map() {
        mapstraction = new mxn.Mapstraction('mymap', 'google');
        mapstraction.addSmallControls();
        mapstraction.setMapType(mxn.Mapstraction.PHYSICAL);
        mapstraction.setCenterAndZoom(defaultcenter, 15);

        geocoder = new MapstractionGeocoder(add_point, 'google');
        var address = {
          street: "38 Ringold Street",
          locality: "San Francisco",
          region: "CA",
          country: "US"
        };

        //OR:
        //var address = {
        //  address: "38 Ringold St, San Francisco, CA"
        //};

        geocoder.geocode(address);
    }
    function add_point(loc) {
        var mk = new mxn.Marker(loc.point);

        mk.setInfoBubble(loc.address);
        mapstraction.addMarker(mk);
        mk.openBubble();
        mapstraction.autoCenterAndZoom();
    }
    </script>
  </head>
  <body onload="create_map()">
    <div id="mymap"></div>
  </body>
</html> 
```

# string - 字符串匹配

> ID：13298585
> 
> 赞同：3
> 
> 时间：2012-11-08T22:01:22.727
> 
> 标签：string, perl, match

我写了一个代码：

```
my $str = 'http://www.ykt.ru/cgi-bin/go?http://ya.ru';
my $str2 = 'http://ya.ru';
if ($str == $str2)
{
    print "str = str2";
}
else 
{
    print "str != str2";
} 
```

它告诉我str = str2。但这是错误的。仅当 $str = 'http://ya.ru'; 这将是真的。怎么了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T22:02:59.607

您应该将字符串与`eq`运算符进行比较，如下所示：

```
if ($str eq $str2) { ... } 
```

这实际上是一个非常方便的助记规则：字母代表字符串，非字母代表数字（因为每个符号比较运算符都有一个“冗长”的替代方案）：

```
numbers | strings
----------------- 
  ==    |   eq
  !=    |   ne
  <     |   lt
  >     |   gt
  <=    |   le
  >=    |   ge
 <=>    |  cmp 
```

否则将使用数字比较：两个操作数都将转换为数字，并将比较此转换的结果。由于两个字符串都从非数字符号开始（即使在修剪之后），它实际上变成了`(0 == 0)`.

请注意，如果您以...开始脚本，您实际上会在您面前提出这个答案

```
use warnings; 
```

...编译指示，就像我在[这里](http://codepad.org/71lJ8zW1)所做的那样：

```
Argument "http://ya.ru" isn't numeric in numeric eq (==) at t.pl line 5\. 
Argument "http://www.ykt.ru/cgi-bin/go?http://ya.ru" isn't numeric in numeric eq (==) at t.pl line 5. 
```

# objective-c - Eventkit 无法访问日历

> ID：13298590
> 
> 赞同：1
> 
> 时间：2012-11-08T22:01:33.843
> 
> 标签：objective-c, ios, permissions, calendar, eventkit

我无法使用 Eventkit 访问我设备的日历。我正在使用 EKEventEditViewController 来呈现用于添加日历条目的视图。

```
EKEventStore *eventStore = [[EKEventStore alloc] init];
EKEventEditViewController *eventController = [[EKEventEditViewController alloc]init]; 
eventController.eventStore = eventStore;
eventController.editViewDelegate = self;

...

[self presentViewController:eventController animated:YES completion:nil]; 
```

这**在模拟器上运行良好，**但在手机（iOS6）上运行时出现以下**错误消息：** *“此应用程序无权访问您的日历”*

![此应用无权访问您的日历](../Images/96208fb57e4d38c231cb48e01371454d.png)

按照建议检查隐私设置根本不会显示我的应用程序的任何条目。

如何解决这个问题并授予访问权限？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T22:17:15.120

您可以请求访问

```
EKEventStore *store = [[EKEventStore alloc] init];    
if([store respondsToSelector:@selector(requestAccessToEntityType:completion:)]) {
    [store requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) {
        /* This code will run when uses has made his/her choice */
    }];
} 
```

您还可以向 plist (NSCalendarsUsageDescription) 添加一个密钥，该密钥将在请求所述访问权限时显示一个字符串。

# python - 为什么即使子进程已经完成，Popen.poll() 也会返回 None 的返回码？

> ID：13298592
> 
> 赞同：2
> 
> 时间：2012-11-08T22:01:42.970
> 
> 标签：python, windows, subprocess

我有一些在 Windows 上运行的 Python 代码，它产生一个子进程并等待它完成。子进程表现不佳，因此脚本会进行非阻塞生成调用并在旁边监视进程。如果达到某个超时阈值，它会终止进程，假设它已经脱离了轨道。

在某些不可重现的情况下，生成的子进程将消失，并且观察者例程不会注意到这一事实。它会一直观察直到超过超时阈值，尝试杀死子进程并得到错误，然后退出。

**什么可能导致子进程已经消失而无法被观察者进程检测到？为什么调用 to 时没有捕获和返回返回码`Popen.poll()`？**

我用来生成和观察过程的代码如下：

```
import subprocess
import time

def nonblocking_subprocess_call(cmdline):
    print 'Calling: %s' % (' '.join(cmdline))
    p = subprocess.Popen(cmdline, shell=False, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
    return p

def monitor_subprocess(handle, timeout=1200):
    start_time = time.time()
    return_code = 0
    while True:
        time.sleep(60)
        return_code = handle.poll()
        if return_code == None:
            # The process is still running.
            if time.time() - start_time > timeout:
                print 'Timeout (%d seconds) exceeded -- killing process %i' % (timeout, handle.pid)
                return_code = handle.terminate()
                # give the kill command a few seconds to work
                time.sleep(5)
                if not return_code:
                    print 'Error: Failed to kill subprocess %i -- return code was: %s' % (handle.pid, str(return_code))
                # Raise an error to indicate that the process was hung up
                # and we had to kill it.
                raise RuntimeError
        else:
            print 'Process exited with return code: %i' % (return_code)
            break
    return return_code 
```

我所看到的是，在进程消失的情况下，`return_code = handle.poll()`对第 15 行的调用正在返回`None`而不是返回代码。我知道这个过程已经完全消失了——我可以看到它不再存在于任务管理器中。而且我知道该过程在达到超时值之前很久就消失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:55:19.350

你能举一个你的 cmdline 变量的例子吗？还有你在产生什么样的子进程？

我在测试脚本上运行它，使用以下命令调用批处理文件：

```
ping -n 151 127.0.0.1>nul 
```

*   睡眠 150 秒

它工作得很好。

可能是您的子进程未正确终止。另外，尝试将您的睡眠命令更改为类似 time.sleep(2) 的命令。

在过去，我发现这比更长的睡眠更好（特别是如果您的子进程是另一个 python 进程）。

另外，我不确定你的脚本是否有这个，但在 else: 语句中，你有一个额外的括号。

```
else:
    #print 'Process exited with return code: %i' % (return_code))
    # There's an extra closing parenthesis
    print 'Process exited with return code: %i' % (return_code)
    break 
```

以及为什么在 join 语句中调用了全局 temp_cmdline：

```
print 'Calling: %s' % (' '.join(temp_cmdline)) 
```

我不确定是否从列表变量 temp_cmdline 中解析了 cmdline，或者是否从空格上拆分的字符串创建了 temp_cmdline。无论哪种方式，如果您的 cmdline 变量是一个字符串，那么只打印它会更有意义吗？

```
print 'Calling: %s' % cmdline 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T23:24:21.090

子进程对象上的 poll 方法似乎不太好用。当我产生一些线程来做一些工作时，我曾经遇到过同样的问题。我建议您使用多处理模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-18T15:46:12.480

如果 stdout 被其他东西捕获，Popen.poll 不会按预期工作，您可以检查取出这部分代码“，stdout = subprocess.PIPE”

# c# - 似乎无法设置 Combobox.Background

> ID：13298594
> 
> 赞同：1
> 
> 时间：2012-11-08T22:01:52.183
> 
> 标签：c#, wpf, xaml, combobox

我正在为理论课程开发图灵机模拟器，并且我正在尝试根据机器是否接受语言来更改输入区域的背景颜色（基本上，一种颜色取决于另一种颜色，具体取决于它是否有效输入）。

由于我想提供几个示例输入，因此它需要是一个 ComboBox。由于教授需要测试他自己的输入，它也必须是可编辑的。所以，我们到了。

我尝试`ComboBox.Background`以编程方式和使用 XAML（通过属性编辑器）设置属性，但都不起作用。但是，我没有问题设置`ComboBox.Foreground`。

这是我的 XAML：

```
<Window x:Class="Turing.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Turing Machine Emulator" Height="400" Width="600" Loaded="onload" MinHeight="500" MinWidth="600">

    <Grid>
        <ComboBox x:Name="drpProblem" HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top" Width="120" SelectionChanged="changeproblem"/>
        <Label x:Name="lblDescription" Content="Language Description" Margin="135,7,90,0" VerticalAlignment="Top"/>
        <Grid Margin="10,0,10,35" Height="24" VerticalAlignment="Bottom">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="10*"/>
                <ColumnDefinition Width="1*"/>
                <ColumnDefinition Width="10*"/>
            </Grid.ColumnDefinitions>
            <Label x:Name="lblLeft" Content="left" HorizontalContentAlignment="Right" VerticalContentAlignment="Center" Padding="0" Margin="0,0,10,0" FontFamily="Consolas"/>
            <Label x:Name="lblRight" Content="right" Grid.Column="2" VerticalContentAlignment="Center" Padding="0" Margin="10,0,0,0" FontFamily="Consolas"/>
            <Label x:Name="lblCenter" Content="cur" Grid.Column="1" Height="24" Padding="0" VerticalContentAlignment="Center" HorizontalContentAlignment="Center" Background="#FFC5FFA4" FontFamily="Consolas" FontSize="16"/>
        </Grid>
        <Button x:Name="btnIterate" Content="Iterate" Margin="10,0,0,64" Height="20" VerticalAlignment="Bottom" Click="btnIterate_Click" HorizontalAlignment="Left" Width="236"/>
<!-- This one right here -->
        <ComboBox x:Name="txtInput" Height="23" Margin="10,0,10,89" Text="Input String" VerticalAlignment="Bottom" FontFamily="Consolas" VerticalContentAlignment="Center" TextBoxBase.TextChanged="cboGetInput" BorderBrush="{x:Null}" Foreground="Black" Background="#FF874343" IsEditable="True" />
        <TextBox x:Name="txtMs" Height="20" Margin="251,0,172,64" TextWrapping="Wrap" Text="wait (seconds)" VerticalAlignment="Bottom"/>
        <Button x:Name="btnAutoRun" Content="AutoRun" Margin="0,0,10,64" Click="btnAutoRun_Click" Height="20" VerticalAlignment="Bottom" HorizontalAlignment="Right" Width="157"/>
        <TextBox x:Name="txtTM" Margin="10,38,10,142" TextWrapping="Wrap" Text="Language" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" FontFamily="Consolas" FontSize="14"/>
        <Button x:Name="btnLoadLang"  Content="Load" Margin="10,0,10,117" Height="20" VerticalAlignment="Bottom" Click="changeproblem"/>
        <StatusBar Height="30" VerticalAlignment="Bottom">
            <TextBlock x:Name="stTXTName" Text="StateName"/>
            <Separator/>
            <TextBlock x:Name="stTXTDescription" Text="StateDescription"/>
            <Separator/>
            <TextBlock x:Name="stTXTTransition" Text="NextTransition"/>
            <Separator/>
            <TextBlock x:Name="stTXTNext" Text="NextState"/>
        </StatusBar>

    </Grid>
</Window> 
```

这是我用来尝试改变颜色的代码：

```
if (TM.AcceptsString(txtInput.Text))
{
    txtInput.Background = Brushes.LightGreen;
    txtInput.Foreground = Brushes.LightGreen;
}
else
{
     txtInput.Background = Brushes.Pink;
     txtInput.Foreground = Brushes.Pink;
} 
```

前景按预期更改，但背景颜色不会从默认的白色更改。难道我做错了什么？是否有一些组件控件`ComboBox`需要像我一样设置属性`TextBoxBase.TextChanged`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T22:04:27.227

将 ComboBox 的 FlatStyle 属性设置为 FlatStyle.Flat。这解决了我在打开 Win 7 Aero 主题时遇到的类似问题：ComboBox 的背景色未显示在默认的 FlatStyle 设置 FlatStyle.Standard 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-23T16:14:50.583

我有一个类似的问题，并且能够通过在 Visual Studio 2015 中为 ComboBox 自动生成模板来解决它（在设计窗口中右键单击 ComboBox -> 编辑模板 -> 编辑副本）

# magento - 在搜索页面上显示产品 - Magento 1.7

> ID：13298597
> 
> 赞同：2
> 
> 时间：2012-11-08T22:02:09.390
> 
> 标签：magento, tags

目前，我有一段代码，如果用户搜索一个术语并且只有一个产品与该关键字相关联，它将把他们转发到产品页面。

```
<?php if($this->getResultCount() == 1): ?> 
<?php $prodId = $this->_productCollection->getAllIds() ?> 
<?php $singleProduct = Mage::getModel('catalog/product')->load($prodId) ?> 
<?php header('Location: ' . $singleProduct->getProductUrl()) ?> 
<?php exit; ?> 
<?php elseif($this->getResultCount()): ?> 
```

但是，我现在要做的实际上是在结果页面本身上提供产品及其所有详细信息，如果它是唯一具有该标签/搜索词而不是重定向到产品页面的产品。我对 php 很陌生，所以请多多包涵。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:26:02.183

块模板是不好的地方。好地方-控制器。也许您需要为此功能重写控制器。例如/app/code/core/Mage/CatalogSearch/controllers/ResultController.php

在控制器中，您的代码如下所示：

`$this->getResponse()->setRedirect($_product->getProductUrl());`

# asp.net - 一键发布：执行发布异常：已添加相同key的item

> ID：13298598
> 
> 赞同：3
> 
> 时间：2012-11-08T22:02:20.430
> 
> 标签：asp.net, asp.net-mvc, visual-studio, entity-framework, msdeploy

我意识到有十亿人问过这个错误，但我已经看过所有这些了。我的好像不一样 我没有收到任何类型的源代码错误，没有堆栈跟踪，没有任何有用的信息，因为在我的 MVC.NET 项目上单击“发布”后立即发生错误。它只是一个对话框，仅此而已。没有其他事情发生。

可能相关的事情：

*   我正在使用团队基础。有一段时间我遇到了一些麻烦（用户错误），但我只是把一切都恢复到了应有的状态（我认为）。
*   有一次，我使用了 EDMX。我删除了以从头开始制作我的表格模型。
*   我再也找不到我的发布资料，也不知道如何制作新资料。我以为它应该在一个`~/PublishProfiles`文件夹中。它不在那里。

我知道我没有提供很多信息，但我什至不知道从哪里开始。我很乐意应要求提供其他任何东西。谢谢你。

**编辑**
我应该注意到它在本地主机服务器上构建和运行完美。

**编辑 2**
我回滚到源代码控制的最旧版本并且它有效。我想我可以煞费苦心地检查每个变更集。~~另外，我确实找到了 PublishProfiles 文件夹。我确认没有对配置文件进行任何更改~~。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T20:30:03.450

我错了，发布配置文件没有任何更改。这就是发生的事情。

我设置了一个代码优先的实体上下文，例如，`MyDBContext`. 在我的发布配置文件`myprofile.pubxml`中，一些代码会自动插入，如下所示：

```
<PublishDatabaseSettings>
  <Objects xmlns="">
    <ObjectGroup Name="MyDBContext" ......
<MSDeployParameterValue Include="$(DeployParameterPrefix)MyDBContext-Web.config Connection String" /> 
```

然后，我决定尝试 EDMX 的东西。但我保存我的旧结构以防万一。现在文件看起来像这样：

```
<PublishDatabaseSettings>
  <Objects xmlns="">
    <ObjectGroup Name="MyDBContext" Order="1" ......
    <ObjectGroup Name="myEntities" Order="2" ......
<MSDeployParameterValue Include="$(DeployParameterPrefix)MyDBContext-Web.config Connection String" />
<MSDeployParameterValue Include="$(DeployParameterPrefix)myEntities-Web.config Connection String" /> 
```

但后来，我决定放弃 EDMX 的东西。然而，不知何故，发生了这样的事情，而不是删除 .pubxml 文件中的第二组条目：

```
<PublishDatabaseSettings>
  <Objects xmlns="">
    <ObjectGroup Name="MyDBContext" Order="1" ......
    <ObjectGroup Name="MyDBContext" Order="2" ......
<MSDeployParameterValue Include="$(DeployParameterPrefix)MyDBContext-Web.config Connection String" />
<MSDeployParameterValue Include="$(DeployParameterPrefix)MyDBContext-Web.config Connection String" /> 
```

瞧。第二组删除了，我很高兴。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-24T12:21:56.860

不要删除，而是进入属性/PublishProfiles，打开 .pubxml 文件并检查您的连接字符串是否已重复/重复。我遇到了这个问题，删除了所有重复的连接字符串以留下一个，它解决了我的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-23T01:03:27.067

虽然[@Andrew 的](https://stackoverflow.com/a/13315512/1664443)方法是正确的方法，但我发现删除有问题的发布配置文件并重新安装/创建新配置文件会更快。我将发布配置文件保存在同一位置，因此重新安装大约需要 10 秒。

[![在此处输入图像描述](../Images/195c38b0c3775641afa7fdf1f612d58e.png)](https://i.stack.imgur.com/70Pxg.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-21T20:12:33.480

我得到了这个错误。事实证明，解决方案文件存在绑定错误。不得不删除发布文件并绑定解决方案。然后我可以再次使用发布按钮。

# asp.net - Visual Studio 文件变成乱码

> ID：13298603
> 
> 赞同：0
> 
> 时间：2012-11-08T22:02:45.443
> 
> 标签：asp.net, visual-studio-2010, asp-classic, tfs

所以，我们从 TFS 中提取解决方案。TFS 上的解决方案文件很好。但是，当我在我的计算机上编辑它们时，有时代码会变成乱码（特别是，我会编辑它们、保存它们、关闭它们，然后在发生这种情况时打开它们）。.NET 文件和经典的 ASP 文件都会发生这种情况。当我去“另存为”时，它说是一个二进制文件。有人知道如何防止这种情况吗？我厌倦了失去工作。

![在此处输入图像描述](../Images/c0d401964ea7603a45b7f99c2038de71.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:45:35.570

您的问题是您或您的团队成员用来保存文件的文件的编码。编码应该匹配，最好是 UTF - unicode。站在某个文件上->转到文件->另存为->在保存按钮上，侧面会有一个黑色小三角形->按下它->您将看到使用哪种编码保存文件。确保团队的所有成员都将保存的默认值设置为 unicode 编码。

# asp.net-mvc - MVC 4 中的过滤器和分页

> ID：13298605
> 
> 赞同：3
> 
> 时间：2012-11-08T22:02:57.607
> 
> 标签：asp.net-mvc, razor, filter, pagination, asp.net-mvc-4

对我来说，这是漫长的一天，我相信在**stackoverflow**上总能找到答案。我已经搜索过类似的帖子，但我想没有一个帖子有我迫切需要的东西。这是交易，我正在处理这个**MVC 4**项目，但我遇到了一些问题，导致我将其打开。在我的 MVC 上使用**IPageList**进行分页非常酷，但是我怎样才能继续分页使用索引的相同**ActionResult**容器过滤的结果。这是一些可以用餐的代码。

```
public ActionResult Index(int? page, int category = 0)
     {
         int pageSize = 10;
         int pageNumber = (page ?? 1);
         if (category != 0)
         {
             var products = (from p in db.Products where p.ProductID == category select p).OrderBy(x => x.ProductName).ToList();
             return View(products.ToPagedList(pageNumber, pageSize));
         }
         else
         {
             var products = (from p in db.Products select p).OrderBy(x => x.ProductName).ToList();
             return View(products.ToPagedList(pageNumber, pageSize));
         }
     } 
```

基本上**int 类别**是从下拉列表中获得的值。它完美过滤，但问题是当我过滤结果大于 10 并且我尝试转到下一页时，它返回到索引初始结果。调试它，我意识到一旦单击next，**int类别**的值就会被清除并进入else块。这是分页控件，可能需要调整一些东西......

```
<div>Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber)
of @Model.PageCount

@if (Model.HasPreviousPage)
{
    @Html.ActionLink("<<", "Index", new { page = 1, sortOrder = ViewBag.CurrentSort, currentFilter=ViewBag.CurrentFilter  })
    @Html.Raw(" ");
    @Html.ActionLink("< Prev", "Index", new { page = Model.PageNumber - 1, sortOrder = ViewBag.CurrentSort, currentFilter=ViewBag.CurrentFilter  })
}
else
{
    @:<<
    @Html.Raw(" ");
    @:< Prev
}

@if (Model.HasNextPage)
{
    @Html.ActionLink("Next >", "Index", new { page = Model.PageNumber + 1, sortOrder = ViewBag.CurrentSort, currentFilter=ViewBag.CurrentFilter  })
    @Html.Raw(" ");
    @Html.ActionLink(">>", "Index", new { page = Model.PageCount, sortOrder = ViewBag.CurrentSort, currentFilter=ViewBag.CurrentFilter  })
}
else
{
    @:Next >
    @Html.Raw(" ")
    @:>>
} 
```

我需要的是页面上返回的过滤结果来响应分页。我会等待答案。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T01:09:39.227

**在Suhas**之前给出的答案和评论的帮助下，我能够提出一个更清晰、更好的解决方案。这是最终的解决方案：

```
public ActionResult Index(int? page, int category = 0)
 {
     int pageSize = 10;
     int pageNumber = (page ?? 1);
     if (category != 0)
     {
         ViewBag.CurrentFilter = category;
         var products = (from p in db.Products where p.ProductID == category select p).OrderBy(x => x.ProductName).ToList();
         return View(products.ToPagedList(pageNumber, pageSize));
     }
     else
     {
         var products = (from p in db.Products select p).OrderBy(x => x.ProductName).ToList();
         return View(products.ToPagedList(pageNumber, pageSize));
     }
 } 
```

我希望它可以帮助其他人。**苏哈斯**应得的分数。干杯!

注意：**Suhas**在这个解决方案下的评论很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T23:00:30.960

在您的操作容器集中`ViewBag.CurrentFilter = category;`，假设 CurrentFilter 是类别

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-13T03:07:06.557

```
public PartialViewResult AllProducts(int? page, int? currentFilter, int cid = 0)
{
    ViewBag.cid = cid;
    int pageSize = 4;
    int pageIndex = 1;
    pageIndex = page.HasValue ? Convert.ToInt32(page) : 1;
    if (currentFilter != 0 && cid == 0)
    {
        cid = Convert.ToInt32(currentFilter);
    }
    if (cid != 0)
    {
        ViewBag.CurrentFilter = cid;
        ViewBag.AllProducts = _unitOfWork.GetRepositoryInstance<tbl_Products>().GetAllRecordsIQueryable().Where(i => i.IsDelete == false && i.CategoryId == cid).ToList().ToPagedList(pageIndex, pageSize);
        return PartialView("AllProducts", ViewBag.AllProducts);
    }
    else
    {
        ViewBag.AllProducts = _unitOfWork.GetRepositoryInstance<tbl_Products>().GetAllRecordsIQueryable().Where(i => i.IsDelete == false).ToList().ToPagedList(pageIndex, pageSize);
        return PartialView("AllProducts", ViewBag.AllProducts);
    }
} 
```

这是解决这个问题的完美代码。

# c++ - QLineEdit 清除信号问题

> ID：13298609
> 
> 赞同：2
> 
> 时间：2012-11-08T22:03:09.547
> 
> 标签：c++, qt, signals-slots, qt-necessitas

我正在使用[Qt KDE Necessitas](http://necessitas.kde.org/)项目。我在 Qt Creator 中构建了一个项目，并且正在将其安装`apk`在模拟器 API-15 上（也在 API-10 上进行了测试）。

以下代码设置为在`QLineEdit`单击按钮时清除两个不同对象的文本，但事实并非如此。随机地，只有两个`QLineEdit`对象中的一个被清除。

主窗口.h：

```
class MainWindow : public QMainWindow
{
    Q_OBJECT
public:
    explicit MainWindow(QWidget *parent = 0);
public slots:
    void slotClear();

private:
    QLineEdit* line1;
    QLineEdit* line2;
//...
}; 
```

主窗口.cpp：

```
MainWindow::MainWindow(QWidget *parent)
    : QMainWindow(parent), ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    QVBoxLayout* mainLayout = new QVBoxLayout;

    QFormLayout* form = new QFormLayout;
    line1 = new QLineEdit;
    form->addRow(tr("Line 1: "), line1);
    line2 = new QLineEdit;
    form->addRow(tr("Line 2:"), line2);

    QPushButton* button = new QPushButton;
    mainLayout->addLayout(form);
    mainLayout->addWidget(button);

    QWidget* centralWid = new QWidget(this);
    centralWid->setLayout(mainLayout);
    this->setCentralWidget(centralWid);

    connect(button, SIGNAL(clicked()), this, SLOT(slotClear()));
}

void MainWindow::slotClear()
{
    line1->clear();
    line2->clear();
}
//... 
```

调用该函数`QLineEdit::setText("")`会产生相同的结果。此外，将`clicked()`按钮的信号直接连接到`clear()`插槽的插槽`QLineEdit`没有任何效果。

我很久没有在 Qt 中编程了，所以我不确定我是否做错了什么。是否有人看到需要纠正某些内容才能从 BOTH QLineEdits 中清除文本？我不确定这是 Qt 本身还是 Qt Necessitas 独有的。任何投入将不胜感激。

**编辑**

我还刚刚注意到，在一行中输入文本，切换到另一行并在那里输入文本，然后切换回原始行会导致单击该字段后原始文本被删除（注意，从未单击过该按钮） . 我认为这是一个非常明确的迹象，表明正在发生一些时髦的事情。

**编辑 2**

在 KDE[中注册为错误](https://bugs.kde.org/show_bug.cgi?id=309779)

# r - 使用chron在ggplot2图中放置和格式化日期的问题

> ID：13298614
> 
> 赞同：1
> 
> 时间：2012-11-08T22:03:30.527
> 
> 标签：r, date, ggplot2, epoch, chron

我一直在尝试在图表的 x 轴上添加适当的日期，但无法弄清楚如何以理智的方式进行操作。我想要的非常简单：每年 1 月 1 日的日期，介于我的数据集的最小值和最大值之间。

我不想包括月份 - 只是“2008”或“2009”或任何可以的。一个很好的例子是这个图表：

[示例图](http://blog.stephenwolfram.com/data/uploads/2012/03/outgoing-mail-diurnal-image.png)

除了我想要每年的日期，而不是每隔一年。

我似乎无法弄清楚这一点。我的日期定义为自 1970 年 1 月 1 日以来的天数，并且我包含了一个方法，该方法`dateEPOCH_formatter`使用 chron 包将纪元格式转换为格式。我已经想出了如何在图表的原点以及此后每 365 天制作一个刻度线和日期，但这并不完全相同。

另一个小问题是，神秘地，这条线`chron(floor(y), out.format="mon year",origin.=epoch)`输出了一个带有轴标记的图形，如“Mar 2008”，但是将线更改为`chron(floor(y), out.format="year",origin.=epoch)`不会给我像“2008”这样的结果 - 它只会导致错误：

```
Error in parse.format(format[1]) : unrecognized format year
Calls: print ... as.character.times -> format -> format.dates -> parse.format
Execution halted 
```

这是我的代码 - 感谢您的帮助。

```
library(ggplot2)
library(chron)
argv <- commandArgs(trailingOnly = TRUE)
mydata = read.csv(argv[1])
png(argv[2], height=300, width=470)

timeHMS_formatter <- function(x) {                  # Takes time in seconds from midnight, converts to HH:MM:SS
h <- floor(x/3600)
m <- floor(x %% 60)
s <- round(60*(x %% 1))                         # Round to nearest second
lab <- sprintf('%02d:%02d', h, m, s)        # Format the strings as HH:MM:SS
lab <- gsub('^00:', '', lab)                    # Remove leading 00: if present
lab <- gsub('^0', '', lab)                      # Remove leading 0 if present
}

dateEPOCH_formatter <- function (y){
epoch <- c(month=1,day=1,year=1970)
    chron(floor(y), out.format="mon year",origin.=epoch)
}

p=  ggplot() + 
coord_cartesian(xlim=c(min(mydata$day),max(mydata$day)), ylim=c(0,86400)) +         # displays data from first email through present
scale_color_hue() +
xlab("Date") +
ylab("Time of Day") +
scale_y_continuous(label=timeHMS_formatter, breaks=seq(0, 86400, 14400)) +              # adds tick marks every 4 hours
scale_x_continuous(label=dateEPOCH_formatter, breaks=seq(min(mydata$day), max(mydata$day), 365) ) +
ggtitle("Email Sending Times") +                                                        # adds graph title
theme( legend.position = "none", axis.title.x = element_text(vjust=-0.3)) +
theme_bw() +
layer(
    data=mydata, 
    mapping=aes(x=mydata$day, y=mydata$seconds), 
    stat="identity", 
    stat_params=list(), 
    geom="point", 
    geom_params=list(alpha=5/8, size=2, color="#A9203E"),
    position=position_identity(),
)   

print(p)
dev.off() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T22:20:03.233

`scale_x_date`我认为将内置功能与包`date_format`一起`date_breaks`使用会容易得多`scales`。这些应该适用于 中的大多数 类`date`，`R`例如`Date`等`chron`

例如

```
library(ggplot2)
library(chron)
library(scales)

# some example data 
days <- seq(as.Date('01-01-2000', format = '%d-%m-%Y'),
            as.Date('01-01-2010', format = '%d-%m-%Y'), by = 1)

days_chron <- as.chron(days)
mydata <- data.frame(day = days_chron, y = rnorm(length(days)))

# the plot
ggplot(mydata, aes(x=days, y= y)) + geom_point() + 
 scale_x_date(breaks = date_breaks('year'), labels = date_format('%Y')) 
```

![在此处输入图像描述](../Images/76eb9a2b283531c91ca49e7446a38930.png)

为了展示这些功能的直观性和简单性，如果您希望每 6 个月标注一次月年标签 - 请注意，这需要非常宽的图或非常小的轴标签

```
ggplot(mydata, aes(x=days, y= y)) + geom_point() +
   scale_x_date(breaks = date_breaks('6 months'), labels = date_format('%b-%Y')) 
```

![在此处输入图像描述](../Images/66d7fd5f6136094655585ec62175be82.png)

# android - Android：对话框最小边距

> ID：13298617
> 
> 赞同：9
> 
> 时间：2012-11-08T22:03:58.710
> 
> 标签：android, android-layout, android-dialog

我使用android`android.app.Dialog`创建一个自定义对话框（用于按钮和背景）在我的对话框中我有`TextView` 一段`ScrollView`时间我有一个简短的文本，这完美地显示了我想要的方式，但是如果文本很大，我的对话框会占据整个屏幕，我希望在对话框和屏幕边缘之间有一个最小边距。

我的问题是我希望对话框不要比需要的大，我不能为此设置固定大小？

`Here is how this look today.....I what a margin like this`

![我的对话框现在怎么样了。](../Images/256d82fa2f3908d5400d80d0f73d5a81.png) ![我想要这样的利润。](../Images/e8567ced24238479e437ff9bcfa4cf7c.png)

* * *

这`GameDialog.java`

```
public class GameDialog extends Dialog {

    public GameDialog(Context ct, int titleID, int messageID) {
        super(ct, R.style.dialog_style);
        this.setContentView(R.layout.dialog_layout);

    }
    // This exist more code but this has noting with the layout to do,only set the text and show the button that exist since the XML file.

} 
```

这`R.style.dialog_style`

```
<style name="dialog_style" parent="@android:style/Theme.Dialog">
    <item name="android:windowBackground">?button_image</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:textColor">#FF000000</item>
    <item name="android:textSize">20sp</item>
</style> 
```

这`R.layout.dialog_layout`

```
<?xml version="1.0" encoding="utf-8"?>

<!-- Dialog layout that show title and a textarea, and under this allow a row of button that is center layout. -->
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

    <LinearLayout android:orientation="vertical" 
                  android:layout_width="fill_parent"
                  android:layout_height="wrap_content"
                  android:layout_marginLeft="14px"
                  android:layout_marginRight="14px">

        <TextView
            android:layout_gravity="center_vertical"    
            android:id="@+id/text_title"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content">
        </TextView>

    </LinearLayout>

    <LinearLayout android:orientation="vertical"    
                  android:layout_width="fill_parent"
                  android:layout_height="0px"
                  android:layout_weight="1"
                  android:layout_marginLeft="14px"
                  android:layout_marginRight="14px">

        <ScrollView 
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
        >

            <TextView android:id="@+id/text_main"
                      android:padding="5px"
                      android:layout_width="fill_parent"
                      android:layout_height="wrap_content"
            >
            </TextView>

        </ScrollView>

    </LinearLayout>

    <LinearLayout
        android:id="@+id/layout_button"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:orientation="horizontal">
            <!-- this will be show while need to show a button -->
        <ImageView
            style="?icon_size.button"
            android:visibility="gone"/>
        <ImageView
            style="?icon_size.button"
            android:visibility="gone"/>
        <ImageView
            style="?icon_size.button"
            android:visibility="gone"/>
        <ImageView
            style="?icon_size.button"
            android:visibility="gone"/>
        <ImageView
            style="?icon_size.button"
            android:visibility="gone"/>
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T22:31:21.290

该框架实际上是在背景图像本身上执行此操作的。换句话说，如果您查看为框架定义的主题，它们的`windowBackground`属性只是一种清晰的颜色，即：

```
<item name="android:windowBackground">@android:color/transparent</item> 
```

然后放置在根布局项上的背景图像是一个 9-patch，在所有边都有内置填充（即图像中内置了额外的空间，因此当图像拉伸以填充屏幕时，您仍然可以看到边缘周围） . 查看 AOSP 源代码中的一个面板，了解我的意思（[链接](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable-hdpi/popup_full_dark.9.png)）。

因此，对于您的解决方案，我会推荐两件事：

1.  `windowBackground`用我上面描述的修改你的自定义样式
2.  更新您的自定义背景图像以包含固有的透明边距

对于第 2 步，如果您的图像当前是 9-patch，请执行与 Google 相同的操作。如果您在 XML 中创建图像，则可以使用`<layer-list>`类似以下示例将可见矩形嵌入到另一个带有填充的矩形中：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item>
        <shape android:shape="rectangle" >
            <solid android:color="@android:color/transparent" />
            <padding
                android:bottom="10dp"
                android:left="10dp"
                android:right="10dp"
                android:top="10dp" />
        </shape>
    </item>
    <!-- This shape will be inset by the padding set above -->
    <item>
        <shape android:shape="rectangle" >
            <solid android:color="#262626" />
        </shape>
    </item>
</layer-list> 
```

在这种情况下，内边距不会转移到内容中，因此您还需要向根布局项添加内边距，以使内容边界与图像显示相匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:21:29.230

只需将布局边距添加到顶级 ViewGroup（您的 LinearLayout）。

此外，您有许多不必要的嵌套布局，不应该使用像素单位。您的 dialog_layout.xml 应该更像这样：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="14dp" >

    <TextView
        android:id="@+id/text_title"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingRight="14dp" 
        android:paddingLeft="14dp" />

    <ScrollView 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingRight="14dp" 
        android:paddingLeft="14dp">

        <TextView 
            android:id="@+id/text_main"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

    </ScrollView>

    <LinearLayout
        android:id="@+id/layout_button"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:orientation="horizontal">
            <!-- this will be show while need to show a button -->
        <ImageView
            style="?icon_size.button"
            android:visibility="gone"/>
        <ImageView
            style="?icon_size.button"
            android:visibility="gone"/>
        <ImageView
            style="?icon_size.button"
            android:visibility="gone"/>
        <ImageView
            style="?icon_size.button"
            android:visibility="gone"/>
        <ImageView
            style="?icon_size.button"
            android:visibility="gone"/>
    </LinearLayout>
</LinearLayout> 
```

# linux - Cron 作业神秘停止运行？

> ID：13298619
> 
> 赞同：5
> 
> 时间：2012-11-08T22:04:04.287
> 
> 标签：linux, crontab

我在 Ubuntu 10.4 服务器上有一个 cron 作业，无缘无故停止运行。（这项工作已经运行了几个月并且没有改变。）我不是 *nix 大师，所以如果这是一个简单的问题，我恳求无知。我找不到任何理由或迹象表明这项工作会停止。我已经重新启动服务器但没有成功。这是工作：

```
# m h  dom mon dow   command
0 * * * * java -jar /home/mydir/myjar.jar >>/home/mydir/crontaboutput.txt 
```

输出文件的最后一行显示程序在 2012 年 8 月 29 日运行。之后就什么都没有了。

任何想法在哪里看？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-10T03:00:53.060

> 作业运行时，系统日志中应该有一些内容。您可以尝试的另一件事是将 2>&1 添加到作业中以查看文本文件中的任何错误。——拉尔斯·科特霍夫昨天

这被证明是关键信息——添加 2>&1 使我能够捕获在其他任何地方都没有报告的错误。完成后的命令行如下所示：

```
java -jar /home/mydir/myjar.jar  2>&1  >>/home/mydir/crontaboutput.txt 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T08:21:48.860

也许你的`cron`守护进程已经停止，或者改变了配置（即`/etc/cron.deny`）。我建议制作一个 shell 脚本，并从`crontab`. `crontab`我还建议在其他时间通过您的其他程序（仅用于测试）运行。您可以`logger`在您的 shell 脚本中使用该命令`syslog`。查看系统日志文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-05T13:32:14.383

接受的答案是正确的，（即检查错误日志）在我的情况下指出了错误。除了检查以下问题

1.  include('../my_dir/my_file.php) 可以从 url 工作，但是当 cron 作业运行时它不会工作，会吐出错误。

2.  如果您使用 $_SERVER['DOCUMENT_ROOT']，$_SERVER 变量在 cron 操作系统中不起作用，它将无法被识别，并且您将在 cron 作业中遇到错误。

确保测试 cron 并让它运行，发送电子邮件等以确保它运行。

# sql - Select Statement with Distinct 返回多行并且只需要第一个结果

> ID：13298621
> 
> 赞同：0
> 
> 时间：2012-11-08T22:04:15.203
> 
> 标签：sql

我的查询返回多个结果时遇到了挑战。

```
SELECT DISTINCT gpph.id, gpph.cname, gc2a.assetfilename, gpph.alternateURL
FROM [StepMirror].[dbo].[stepview_nwppck_ngn_getpimproducthierarchy] gpph 
INNER JOIN [StepMirror].[dbo].[stepview_nwppck_ngn_getclassification2assetrefs] gc2a
ON gpph.id=gc2a.id
WHERE gpph.subtype='Level_4' AND gpph.parentId=@ID AND gc2a.assettype='Primary Image' 
```

![结果集](../Images/4cf62402d8fa9a33bb30e8c712d0f32f.png)

一条记录 5679599 有 2 个“主图像”，并为该 ID 返回 2 个结果，但我只需要返回第一个结果。在当前查询中有什么方法可以做到这一点？我需要编写多个查询吗？

我需要一些关于如何将结果限制为在主图像上只有 1 个结果的指导。我已经查看了大量类似的问题，但大多数情况下只需要在查询开头而不是在 where 子句中添加“distinct”的指导。

编辑：这个问题是由用户在数据库中的一条记录上输入 2 个主图像造成的。我的业务要求只说明要取得第一个结果。

任何帮助都是极好的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:21:40.017

鉴于选择返回哪个是任意的，我们可以只对值使用聚合。然后这需要一个`group by`子句，它消除了对不同的需要。

```
SELECT gpph.id, gpph.cname, max(gc2a.assetfilename), gpph.alternateURL
FROM [StepMirror].[dbo].[stepview_nwppck_ngn_getpimproducthierarchy] gpph 
INNER JOIN [StepMirror].[dbo].[stepview_nwppck_ngn_getclassification2assetrefs] gc2a
ON gpph.id=gc2a.id
WHERE gpph.subtype='Level_4' AND gpph.parentId=@ID AND gc2a.assettype='Primary Image'
GROUP BY gpph.id, gpph.cname, gpph.alternateURL 
```

`max(gc2a.assetfilename)`在这种情况下，如果有多个记录，using将为您提供按字母顺序排列的最高值。这不是理想的选择，知道记录顺序的某种时间戳可能会更有帮助，因为那时“第一”这个词的含义可能更有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:09:11.260

将 distinct 替换为 group by ：

```
SELECT MAX(gpph.id), gpph.cname, gc2a.assetfilename, gpph.alternateURL
FROM [StepMirror].[dbo].[stepview_nwppck_ngn_getpimproducthierarchy] gpph 
INNER JOIN [StepMirror].[dbo].[stepview_nwppck_ngn_getclassification2assetrefs] gc2a
ON gpph.id=gc2a.id
WHERE gpph.subtype='Level_4' AND gpph.parentId=@ID AND gc2a.assettype='Primary Image'
AND gpph.id = MAX(gpph.id)
GROUP BY  gpph.cname, gc2a.assetfilename, gpph.alternateURL 
```

# php - 我想在 php 中显示上次登录时间

> ID：13298624
> 
> 赞同：-1
> 
> 时间：2012-11-08T22:04:22.373
> 
> 标签：php

显示上次登录时间..

我想将登录时间保存到进程登录页面中的数据库...并在登录页面中获取下次登录时间..

我通过使用正确获得了当前日期和时间

```
$dt=date("m/d/y G:i:s<br>", time()); 
```

现在我想保存`$dt`到数据库，因为我已经写了下面的代码

```
$qdt = "select * from lastlogin";
    $rsLogin1 = $objdb->select($qdt);
if(rsLogin1 != null)
{
 $qaa = "update lastlogin set last='".$dt."'";
 $rsLogin12 = $objdb->select($qaa);
}
else
{
  $qa = "insert into lastlogin(last) values('".$dt."')";
    $rsLogin1 = $objdb->select($qa); 
} 
```

当此页面运行时，它会显示给我

`update lastlogin set last='11/08/12 15:00:07'`with 语句错误查询

当我将相同的查询复制并粘贴到我的 sql 查询中时……它给了我正确的结果……

任何人都可以帮助我，我错在哪里或我必须做些什么来解决这个问题..

我的数据库名称`lastlogin`是最后一个字段是`varchar(200)`

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:11:39.750

如果我正确理解了您的问题，那么您添加的工作超出了必要的范围。存储上次登录时间的一种方法是利用 MySQL 列类型`timestamp`并将默认值设置为`current_timestamp`. 这样你就不需要计算任何东西，它会为你填充。从那里，只需使用`date()`函数从数据库中操作它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:18:54.220

您必须根据 MYSQL 或任何数据库更改时间格式 yyyy-mm-dd hh:ii:ss 为什么使用 VARCHAR(200) 作为日期和时间，使用日期时间作为数据库中的日期和时间

并且您没有在 Sql 中指定 where CLAUSE，它将更新数据库中的所有记录，因此请尝试这样

更新 lastlogin 设置 last='2012-11-08 15:00:07' WHERE ID= ???

# json - xcode json tableview部分

> ID：13298625
> 
> 赞同：1
> 
> 时间：2012-11-08T22:04:22.760
> 
> 标签：json, header, xcode4, tableview

我是 xcode 的新手，我似乎一直在尝试创建带有部分的 tableview。

我下面的代码创建了标题，但是我似乎无法显示属于该部分的行。我确定它与多维数组有关。我这样说是因为“dobSection”值是“结果”，而我认为它应该在“DOB”下显示日期。

我花了几个小时尝试许多不同的方法来让它工作......嗯！没运气。

Json 有点像这样：

```
{"results":
    [{"name":"joe","surname":"blow","DOB":"1990-01-01"},
     {"name":"jane","surname":"doe","DOB":"1990-01-01"},
     {"name":"john","surname":"doe","DOB":"1995-06-06"}]
} 
```

和代码

```
NSMutableArray *jsonResults;

- (void)fetchedData:(NSData *)responseData {

NSError* error;

NSDictionary* json = [NSJSONSerialization

                      JSONObjectWithData:responseData

                      options:kNilOptions

                      error:&error];

jsonResults = [json objectForKey:@"results"];

self.dob = json;

self.keys = [jsonResults valueForKey:@"DOB"];

[self.tableView reloadData];

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView

{

    // Return the number of sections.
    return [keys count];
    //return 1;

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section

{

    // Return the number of rows in the section.
   // NSString *key = [keys objectAtIndex:section];

   NSString *key = [keys objectAtIndex:section];

   NSArray *dobSection = [dob objectForKey:key];
   return [dobSection count];
} 
```

另外通过替换这个：

```
NSArray *dobSection = [dob objectForKey:key]; 
```

和

```
NSArray *dobSection=[[games objectForKey:@"results"]valueForKey:@"dob"]; 
```

我得到所有行。我不能让他们按 DOB 分组

我上面的代码可能有缺陷，但是我希望能提供一些关于如何正确处理的信息。

谢谢

# android - ContentProvider insert 没有向 SQLiteDatabase 插入数据

> ID：13298627
> 
> 赞同：1
> 
> 时间：2012-11-08T22:04:37.443
> 
> 标签：android, android-contentprovider, sqlite

我通过 ContentProvider 将数据插入 SQLiteDatabase。我的代码行：

```
Uri mNewUri = getContentResolver().insert(MY_URI, values); 
```

values 是一个 ContentValues 变量，我通过对 put 方法的各种调用填充了数据。在调试器中，我看到 insert 方法将一个有效的 Uri 返回到 mNewUri 中。但是，当我尝试显示数据时，我没有得到任何数据。当我转到命令行并尝试：

```
cmd> adb -e shell
cmd> sqlite3 /data/data/com.MyProject.project/databases/db-name.db
sqlite> select * from MyInfo_tbl; 
```

（MyInfo_tbl 是我的数据库类中的表）但我在表中看不到任何结果。我的 ContentProvider 中的插入方法是：

```
public Uri insert(Uri uri, ContentValues values) {
    int uriType = sURIMatcher.match(uri);
    if (uriType != ALLDATA) {
        throw new IllegalArgumentException("Invalid URI for insert");
    }
    SQLiteDatabase sqlDB = mDB.getWritableDatabase();
    try {
        long newID = sqlDB.insertOrThrow(TABLE_BASEPATH,
                null, values);
        if (newID > 0) {
            Uri newUri = ContentUris.withAppendedId(uri, newID);
            getContext().getContentResolver().notifyChange(uri, null);
            return newUri;
        } else {
            throw new SQLException("Failed to insert row into " + uri);
        }
    } catch (SQLiteConstraintException e) {
        Log.i(DEBUG_TAG, "Ignoring constraint failure.");
    }
    return null;
} 
```

有谁知道为什么会这样或者我可以从哪里开始寻求解决这个问题？谢谢！

PS 我还尝试通过在我的数据库提供程序的 onCreate 方法中调用 db.execSQL 行来将数据插入数据库。这也不会插入任何数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-19T04:48:46.480

未在数据库中插入数据的原因可能是您的表创建查询由于缺少逗号或某些错误而无法成功执行，或者 uri 中存在问题。

# python - 如何将预先存在的 python 项目导入 Eclipse？

> ID：13298630
> 
> 赞同：29
> 
> 时间：2012-11-08T22:04:42.707
> 
> 标签：python, eclipse

我正在为python使用eclipse。如何在当前工作区中将现有项目导入 eclipse。

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-08T22:10:40.987

新项目

不要使用默认位置

浏览到现有项目位置...

如果它是一个现有的 Eclipse 项目，其项目文件具有正确的系统路径，您只需打开 .proj 文件...

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-07-15T06:38:12.587

在我的情况下，当我尝试导入现有的 perforce 项目时，它会给出错误 no project found on windows 机器。在 linux 上，我能够很好地导入项目。

对于 Eclipse Kepler，我已经完成了如下操作。

1.  在 pydev 透视图中打开 eclipse。
2.  在 Eclipse 工作区中创建一个新的 pydev 项目，名称与要导入的项目相同。
3.  现在，在您的 Eclipse 工作区项目目录中，您必须拥有 .project 和 .pydevproject 文件。
4.  复制这两个文件并将其粘贴到您要导入的项目目录中。
5.  现在关闭并删除您创建的 pydev 项目，并将其从本地磁盘中删除。
6.  现在您可以使用 import 实用程序在 eclipse 中导入项目。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-08-11T13:46:57.160

在撰写本文时，没有一个给出的答案有效。

**这是如何完成的：**

1.  找到包含 Pydev 项目的目录
2.  删除 PyDev 项目文件（重要的是 Eclipse 不会让您在同一位置创建新项目，否则）
3.  在 Eclipse 中，文件->新建->Pydev 项目
4.  将项目命名为与原始项目相同
5.  对于项目内容，浏览到包含 Pydev 项目的位置
6.  选择口译员
7.  按照菜单的其余部分

*使用 Eclipse 项目导入的其他答案导致 Pydev 丢失包的跟踪，将它们全部变成文件夹。*

这确实会丢失以前设置的任何项目设置，如果可以避免，请编辑此答案。希望 Pydev 开发人员会在某个时候添加项目导入功能。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-03-07T07:28:36.537

*   确保添加了 pydev 解释器，否则添加
*   windows->preferences->Pydev->Interpreter-Python

*   然后创建新的pydev项目，

*   取同名
*   然后不要使用默认位置，浏览以指向项目位置。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-08-18T11:57:16.313

将这两个文件从一些现有的 pydev eclipse 项目复制到要在 eclipse 中导入的新项目的根文件夹。.project .pydevproject

在记事本中打开 .project 文件并将名称更改为 your_project_name。如果您没有这些文件，那么您可以自己创建它们。

打开eclipse，点击文件->导入。新窗口将打开。现在选择“General”下的“Existing Projects into Workspace”，然后单击“Next”。在新窗口中浏览到项目根目录并选择根文件夹。然后点击完成。

查看本[教程以获得完整的解决方案](http://webdesignpluscode.blogspot.com/2016/06/how-toimport-python-project-in-eclipse.html)。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-11-08T22:53:03.090

以下是步骤

*   选择 pydev 视角
*   右键单击项目平移并单击“导入”
*   从列表中选择现有项目到工作区。
*   下一步选择根目录
*   您可以选择将项目复制到

谢谢

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-10-19T10:28:12.337

首先确保您配置了与项目相同的 Python 解释器。您可以在以下位置进行更改：

**窗口 > 首选项 > PyDev > 解释器 > Python 解释器**

只要项目是使用 Eclipse 创建的，您就可以使用导入功能。去：

**文件 > 导入... > 常规 > 现有项目到工作区**

选择*Select root directory:*并浏览到您的项目位置。单击完成，您就完成了。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-04-27T15:48:21.953

在 Eclipse 中创建一个新项目并将**.project**和**.pydevproject**这两个文件从 Python 项目复制到根目录，然后编辑 .project 文件并将名称 project 替换为 python 项目的名称。

然后去导入你的python项目

[![.project 文件进行编辑](../Images/14a78458a4845e05f3a0f4d32d7443a8.png)](https://i.stack.imgur.com/oULYa.jpg)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-05-24T06:34:38.457

我刚刚经历了这个问题几个小时。我的问题可能与您的不同...... Pydev 没有显示为导入选项（与 C 项目相反）。我的解决方案是拖放。只需创建一个新项目（将其命名为与旧项目相同），然后将旧项目拖放到新项目文件夹中，如 eclipse 中所示... 3 小时后，它是拖放...

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-09-02T23:32:42.977

如果您将项目保存在 git 存储库中，则可以轻松完成此操作。以下内容适用于 Linux，但也适用于 Windows：

从存储库中克隆您的项目：

```
git clone https://url/of/project/file.git 
```

（如果您不将项目保存在 github 或 bitbucket 等免费 git 服务器上，您可以通过将目录更改为现有项目文件夹并键入来创建新的本地存储库`git init`）

然后打开 Eclipse 并转到 File > Import > Git > Projects from Git > Existing local repository >（选择您的项目或添加它）> Next > Finish

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-02-01T00:21:48.487

按照@Shan概述的步骤后，如果根文件夹下的文件夹未显示为包，

*   右键单击 PyDev 包资源管理器中的根文件夹
*   选择 PyDev > 设置为源文件夹

它将根文件夹添加到 PYTHONPATH，现在这些文件夹将显示为包

# python - Pandas 的合并参数

> ID：13298633
> 
> 赞同：1
> 
> 时间：2012-11-08T22:04:48.317
> 
> 标签：python, pandas

我在 Python 中有一个循环，它依次导入 CSV 文件，将它们分配给临时 DataFrame 对象，然后尝试将它们合并/合并到“主”DataFrame。代码如下：

```
for csv_path in csv_paths:
    df = pd.read_csv(''+csv_path+'')
    df = df.set_index('Player')
    if len(MLS_Stats) == 0:
        MLS_Stats = pd.concat([MLS_Stats,df])
    else:
        MLS_Stats = pd.merge(MLS_Stats, df, how="outer",left_index=True,right_index=True) 
```

MLS_Stats DF 最初是空的，这是 if 循环的原因，因为我认为您不能将 DF 与空 DF 合并。

对于每次合并，我想通过包含任何新的唯一索引行和新列来构建 DataFrame，但排除重叠列。上面的代码当前包括带有 _x 和 _y 后缀的重叠列。

我知道肯定有一些我不理解的地方，因为这似乎并不罕见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:03:23.133

您可以使用 过滤重复行`drop_duplicates`，并选择仅连接尚不存在的列。

```
import pandas as pd
from StringIO import StringIO

data0 = """\
index,A,B
a,1,2
a,1,2
b,3,4
c,5,6
"""

data1 = """\
index,A,C
a,7,8
d,9,10
"""

df = pd.DataFrame()
columns = []
for data in [data0, data1]:
    frame= pd.read_csv(StringIO(data), index_col=0).drop_duplicates()
    frame = frame.ix[:, frame.columns - columns]
    if len(frame):
        df = df.join(frame, how='outer') if len(df) else frame

print df 
```

结果是：

```
 A   B   C
index
a       1   2   8
b       3   4 NaN
c       5   6 NaN
d     NaN NaN  10 
```

# mongodb - 如何在 mongodb 中为组删除最小值？

> ID：13298635
> 
> 赞同：1
> 
> 时间：2012-11-08T22:04:52.047
> 
> 标签：mongodb

我是 mongodb 的初学者。

我需要删除每家商店的最低价格。

文件（产品）：

输入：

```
product_id|store_id|price|color|
--------------------------------
1         |   1    | 10  |red
2         |   1    | 9   |blue
3         |   1    | 12  |red
4         |   2    | 19  |red
5         |   2    | 20  |red
6         |   2    | -1  |red
7         |   6    | 30  |red
8         |   6    | 10  |blue 
```

输出：

```
product_id|store_id|price|color|
--------------------------------
2         |   1    | 9   |blue
3         |   1    | 12  |red
4         |   2    | 19  |red
5         |   2    | 20  |red
8         |   6    | 10  |blue 
```

我在 my.js 中编写此代码

```
use stores;
var products=db.products.distinct('product_id');
for(i=0; i<products.length; i++){
   db.products.remove({product_id:i,color:'red'}).sort({price:1}).limit(1);
} 
```

但是我的代码不起作用，请写更好的代码或显示我的错误/

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T22:46:42.103

您可能想尝试：

```
// this returns an array of documents which has the store_id and the minimum price for that store
myresult = db.products.aggregate( [ 
                            { $group: 
                                 { _id: "$store_id", 
                                   price: { $min: "$price" } 
                                 } 
                            } 
                            ] ).result

// loop through the results to remove the documents matching the the store id and price

for (i in myresult) { 
    db.products.remove( 
         { store_id: myresult[i]._id, price: myresult[i].price } 
    ); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-20T20:04:32.473

对我来说，您的代码似乎很好。只是想知道您想通过 store_id 查找，然后根据颜色删除最低价格产品。

**在 mongodb findAndModify()**中有一个直接的方法，它默认查找和修改单个文档。

[http://docs.mongodb.org/manual/reference/method/db.collection.findAndModify/#findandmodify-wrapper-sorted-remove](http://docs.mongodb.org/manual/reference/method/db.collection.findAndModify/#findandmodify-wrapper-sorted-remove)

```
var products=db.products.distinct('store_id');
products.forEach(function(storeId, i){
    db.products.findAndModify({
        query: { "store_id":storeId, "color": "red" }, 
        sort: { price:  1 }, 
        remove: true});
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-20T14:26:17.273

您的代码几乎是正确的，只需要进行一些修改：

```
use stores;
var products = db.products.distinct('product_id');
products.forEach(function(i, v){
    var id = db.products.find({product_id: v, color: "red"}).sort({price: 1}).limit(1).toArray()[0];
    db.products.remove({_id: id._id}); 
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-08T14:09:27.293

这个答案适用于搜索“如何删除 mongodb 中的最小值？”的人。

```
var myresult = db.mycol.aggregate
([{
    $group:
    {
       _id:"",
       agevalue: { $min: "$age" }
    }

}]);
db.mycol.remove( {"age": myresult._batch[0].agevalue}) 
```

您可以将列名称分配给`_id`. 然后查询将根据该列对结果进行分组。然后，您可以为每个组设置多个最小值。

# delphi - 什么会导致 SetKey 不改变我的表状态？

> ID：13298640
> 
> 赞同：0
> 
> 时间：2012-11-08T22:05:10.147
> 
> 标签：delphi, delphi-xe, advantage-database-server

我有一个表，我已将其设置为另一个表单使用的指针。

此表单上有一个过程，如果 GUID 尚不存在，则使用 For 循环在表中创建新记录。

```
With Table^ do
for I := 0 to Results.result.RowCount - 1 do
begin
  IndexName := 'GUID';
  SetKey;
  FieldByName('GUID').AsString := Results.UserDetail[I].Guid;
  if not Gotokey then
  begin
    Insert;
    etc..
  end; 
```

大多数时候它工作得很好。但是在某些情况下，当它尝试设置密钥时，而不是从 dsBrowse 到 dsSetKey 的表状态它停留在 dsBrowse ，因此我得到一个“表不在编辑模式错误”

发生这种情况的一种情况是它像 10 次一样遍历 forloop 并且工作顺利，但是在第 11 次它无法将表更改为 setkey 模式。

您是否知道该表可能发生了什么，或者为什么在调用 SetKey 后表会保持浏览模式？

谢谢

更新-

我也遇到了类似的情况，SetRangeStart 没有改变状态而是保持在浏览模式。我什至摆脱了表上的所有更改事件并跟踪到 SetRangeStart 以确保没有运行其他代码并且它仍然没有更改状态。

相同的代码使用大多数数据集都可以正常工作。所以我相信它可能与数据有关..有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T15:48:59.533

我发现当遇到这个问题时，如果我在使用它时在桌子上禁用了控件，然后在它解决了问题后启用了启用控件。

```
Table.DisableControls;
....
Table.EnableControls; 
```

# c# - Webservice 从数据库返回多列的最佳方式

> ID：13298645
> 
> 赞同：1
> 
> 时间：2012-11-08T22:05:36.530
> 
> 标签：c#, asp.net, web-services, asmx

我有一个 asmx webservice，它有几种方法可以从 SQL 数据库中读取数据。这很好用，但是当我想从具有多列（可能是 4-5）的表中返回数据时，我遇到了一些困难。我已经测试了一个类的实例作为返回，也测试了结构，但这在具有大数据的客户端变得有点复杂。我还在不同的帖子中看到数据表作为返回类型不好。那么在多列中返回大数据时的最佳实践是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:18:22.627

您可以创建 Serailzable 类并返回该类的列表 instad 这篇[文章](https://stackoverflow.com/questions/3839637/asmx-web-service-return-user-defined-class-with-properties)可能会有所帮助

# android - MediaPlayer 和 ProgressBar 不同步

> ID：13298646
> 
> 赞同：0
> 
> 时间：2012-11-08T22:05:50.483
> 
> 标签：android, progress-bar, media-player

我有一个 MediaPlayer 和一个 SeekBar 来显示进度。它工作得很好，但 SeekBar 永远不会到达终点。MediaPlayer 在大约 3/4 的进度处触发 onComplete 事件。

我有一个发布到更新 SeekBar 位置的处理程序的可运行文件。

```
private Runnable seekBarUpdate = new Runnable() {
    @Override
    public void run()
    {
        audioBar.setProgress(player.getCurrentPosition());
        audioPosition.setText(DateUtils.formatElapsedTime(player.getCurrentPosition() / 1000));
        handler.postDelayed(this, 25);
    }
}; 
```

我打电话`audioBar.setMax(player.getDuration())`，所以我可以使用`audioBar.setProgress(player.getCurrentPosition())`。

如何将 SeekBar 与 MediaPlayer 同步？

# winforms - DataContext.GetChangeSet 显示更新但不插入

> ID：13298648
> 
> 赞同：1
> 
> 时间：2012-11-08T22:05:55.327
> 
> 标签：winforms, linq-to-sql, datacontext

我正在使用带有存储过程的 Linq to SQL 来查询一个简单的数据库。在我的表单上，我有一个数据网格视图，其中包含一些用于某些查询字段的控件。用户输入街道名称/编号/方向等，然后在数据网格中返回结果。网格使用 bindingSource 和 bindingNavigator 来获取结果。我可以导航，从我的 DAL 以 list<> 的形式返回结果，并调用运行良好的更新存储过程。但是，当我使用内置命令添加新记录时，它成功地将记录添加到网格中，但是当我尝试在 DataContext 上的 DAL 中使用 GetChangeSet 时，我显示了 0 个插入。

所以 DataContext 正在跟踪我对现有记录的更改，但没有看到任何添加的记录。我在 DAL 中使用私有静态数据上下文。我想问题是如何添加新记录并将其传递给我的存储过程方法？我看不到任何从 bindingsource 中“获取添加的记录”的方法，或者我如何使用网格来查看是否需要添加新记录？

UI/Form 中调用我的 DAL 的代码

```
private void btnSearch_Click(object sender, EventArgs e)
    {
        // Call search query
        spSearchCardsResultBindingSource.DataSource = 
            SideSewer.QueryCards(permit:txtPermit.Text, 
            parcel: txtParcel.Text, streetNum: nullNum1,
            streetNum2: nullNum2, streetDirection: cbDirection.Text, 
            streetName: txtName.Text, streetType: cbType.Text,
            inspected: inspectedNull, includeAliases: ckbxAlias.Checked);
    }

    private void saveToolStripButton_Click(object sender, EventArgs e)
    {
        // This line below actually WORKS, yet it just adds the record 
        // user currently has selected may NOT be the NEW one!!
        SideSewer.InsertData((PermitInfo)spSearchCardsResultBindingSource.Current);

        if (!SideSewer.save())
            MessageBox.Show("There was a problem saving the record(s)");
    } 
```

这是查询记录和保存的代码。保存适用于更新，但每当我在网格中添加记录时，它都会将其添加到 PermitInfo 列表中，但不会显示在 GetChangeSet 中。

```
private static SideSewerDataContext _dc = new SideSewerDataContext();

public static List<PermitInfo> QueryCards(string permit = null, 
string parcel = null, int? streetNum = null, int? streetNum2 = null, 
string streetDirection = null,string streetName = null, 
string streetType = null,DateTime? inspected = null, bool? includeAliases = null)
{
    try
    {
        return dc.spSearchCards(permit, parcel, streetNum, streetNum2, 
        streetDirection, streetName, streetType, inspected, includeAliases).ToList();
        }
        catch (SqlException ex)
        {
            MessageBox.Show("Error: " + ex.Message,"Error Occured!",MessageBoxButtons.OK,MessageBoxIcon.Error);
            return null;
        }
    }

    public static bool save()
    {

        ChangeSet cs = _dc.GetChangeSet();

        try
        {
            foreach (var obj in cs.Updates)
            {
                if (obj is PermitInfo)
                {
                    PermitInfo pInfo = (PermitInfo)obj;
                    _dc.spUpdatePermitInfo(pInfo.ID, pInfo.Permit, pInfo.Parcel, pInfo.StreetNumber, pInfo.StreetNumberSuffix, pInfo.StreetDirection, pInfo.StreetName, pInfo.StreetType, pInfo.Inspected, Environment.UserName.ToUpper());
                }
            }
            foreach (var obj in cs.Inserts)
            {
                if (obj is PermitInfo)
                {
                    PermitInfo pInfo = (PermitInfo)obj;
                    _dc.spInsertPermitInfo(Environment.UserName.ToUpper(), pInfo.Permit, pInfo.Parcel, pInfo.StreetNumber, pInfo.StreetNumberSuffix, pInfo.StreetDirection, pInfo.StreetName, pInfo.StreetType, pInfo.Inspected);
                }
            }
            return true;
        }
        catch (Exception ex)
        {
            System.Windows.Forms.MessageBox.Show(ex.Message);
            return false;
        }
    } 
```

提前感谢任何看到这个并且可以让我了解我做错了什么或如何去做我需要完成的事情的人！

# erlang - 更好地理解如何工作/平衡 mnesia 的事务/ACID 功能

> ID：13298650
> 
> 赞同：5
> 
> 时间：2012-11-08T22:05:59.810
> 
> 标签：erlang, mnesia

我仍在尝试深入了解使用 Mnesia 可以做什么，而这两个问题的答案将大有帮助。

1) 如果一个进程对记录 X 执行原子事务，而其他进程执行涉及同一记录的脏事务，会发生什么情况。第一个进程的 ACID 属性是否受到损害？

2) 有没有办法让同一进程在一个表的行上持有非脏 (mnesia:transaction/1) 读锁，同时对另一个表执行脏操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T06:18:11.100

像 Mnesia 一样，在允许脏操作的数据库环境中，隔离保证会丢失。所以问题 1) 的答案是肯定的，行为良好的事务过程可能会受到并发脏操作的影响，反之亦然 - 例如，脏读可能会返回“旧”甚至新删除的数据，而内在的危险脏写很明显。

在您的第二种情况下，答案是肯定的，原因有两个：只有您正在读取的数据对象被锁定，并且只有您的本地副本！这通常是一件很好且有用的事情，甚至允许在其他数据对象（当然包括其他表）上发生并发事务。

[Erlang Mnesia 文档，第 4 章](http://www.erlang.org/doc/apps/mnesia/Mnesia_chap4.html)

# android - 具有自定义宽度的 Android AlertDialog

> ID：13298653
> 
> 赞同：1
> 
> 时间：2012-11-08T22:06:07.807
> 
> 标签：android, dialog, width

我知道这个问题的答案一定在某个地方，但我一直没能找到它......

我有一个自定义的 AlertDialog，无论我在 XML 文件和/或 Java 代码中设置什么参数，对话框总是以全屏宽度显示。

现在，我的布局文件是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/color_picker_dlg_root"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

<TableRow>
[...]
</TableRow>
</TableLayout> 
```

我在这样的代码中创建了 AlertDialog：

```
layout = inflater.inflate(R.layout.color_picker_dlg, (ViewGroup) findViewById(R.id.color_picker_dlg_root));
builder = new AlertDialog.Builder(this);
builder.setView(layout);
[...]
dialog = builder.create(); 
```

...并且对话框仍然占据了所有的屏幕宽度。

我能做些什么来让它包装它的内容？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T23:04:07.983

我的对话框也有同样的问题。为了治愈它，我必须使用对话主题设置我的对话。不知道如何使用警报对话框来做到这一点，但这是常规对话框的代码。

```
 dialog = new Dialog(context, R.style.CustomDialog);
    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    dialog.setContentView(R.layout.dialog_custom_blank);
    dialog.setCancelable(isCancelable); 
```

这是 CustomDialog 主题

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="CustomDialog" parent="android:Theme.Dialog">

      <item name="android:layout_width">wrap_content</item>
      <item name="android:layout_height">wrap_content</item>
      <item name="android:windowIsFloating">true</item>
      <item name="android:windowNoTitle">true</item>

    </style>

</resources> 
```

如果您真的想进入对话框并创建自己的自定义可重用对话框，请查看我网站上的教程

[http://www.androidianlabs.com/custom-android-dialogs.html](http://www.androidianlabs.com/custom-android-dialogs.html)

# visual-studio - 部署项目：文件系统：向文件夹添加快捷方式

> ID：13298656
> 
> 赞同：0
> 
> 时间：2012-11-08T22:06:15.063
> 
> 标签：visual-studio, visual-studio-2008, deployment, deployment-project

在 VS 2008 中，我试图在开始菜单中创建指向应用程序文件夹中文件夹的快捷方式。到目前为止，似乎我被允许的所有目标都是文件。我在这里遗漏了什么，或者有什么技巧可以制作这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:10:34.017

我在发布后不到 10 秒就发现了答案：

1.  右键单击目标文件夹
2.  选择“创建快捷方式...”
3.  将快捷方式移动到所需位置
4.  利润！

希望这对其他人有帮助。

# expressionengine - EE1 到 EE2 升级 - 自由形式生成器插件

> ID：13298657
> 
> 赞同：2
> 
> 时间：2012-11-08T22:06:19.077
> 
> 标签：expressionengine

我有一个站点，我的任务是从 EE1.6.8 升级到 EE 2.5.3。至此，我已经升级到 1.7.3，并准备好大跃进到 2.5.3。

我有关于如何使用 ngen 文件字段迁移 ngen 文件字段和矩阵的信息，所以我很好。我也为升级的结构部分做好了准备。问题是该站点正在使用一个不再存在的插件来为表单构建器提供动力。它使用[Freeform Data Select](http://devot-ee.com/add-ons/freeform-data-select) - 我能找到的最接近 EE2 的是[Low Freeform Field](http://gotolow.com/addons/low-freeform-field/docs)。

我的问题是这个。是否可以转换字段类型，以使所有现有表单（每个表单中有 10+ 个约 20+ 个字段）将继续并继续接收数据？有人做过吗？关于如何进行的任何建议或我应该注意的事项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T23:09:37.043

好的，所以大多数 EE 字段类型将它们的值直接存储在`exp_channel_data`表中。查看这两个字段后，它们存储完全相同的内容——自由格式字段名称。因此，这意味着它们应该可以互换使用，除了按原样升级然后安装 Low 的字段类型并在 EE 管理员中切换字段的实际类型之外，您可能不需要做任何事情。

与往常一样，在冒险之前备份您的数据库，但我认为升级的这个特定部分应该相当简单。

# xml - Adobe Flex 过滤器 XMLList

> ID：13298659
> 
> 赞同：1
> 
> 时间：2012-11-08T22:06:24.523
> 
> 标签：xml, apache-flex, adobe

以下是我的 XML 文件的摘录：

```
 <car>
  <carname>AC</carname>
  <carmodellist>
    <carmodel>Cobra</carmodel>
  </carmodellist>
</car> 
```

如何查询 xmllistcollection 并返回 carmodellist 中 carname == 'AC' 的所有汽车？

我已经尝试了几种组合但没有运气，我认为它会类似于这样：

```
var models:XMLListCollection = new XMLListCollection(vehicles.child(@car=='AC').carmodellist.children()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T11:35:32.540

如果你有如下的xml：

```
<cars>
    <car>
        <carname>AC</carname>
        <carmodellist>
            <carmodel>Cobra</carmodel>
            <carmodel>Cobra2</carmodel>
        </carmodellist>
    </car>
    <car>
        <carname>AB</carname>
        <carmodellist>
            <carmodel>Bobra</carmodel>
        </carmodellist>
    </car>
    <car>
        <carname>AD</carname>
        <carmodellist>
            <carmodel>Dobra</carmodel>
        </carmodellist>
    </car>
</cars> 
```

然后：

```
vehicles.car.(carname == 'AC').carmodellist.children() 
```

# git - 使用 Coda 2 的内置 Git 功能

> ID：13298660
> 
> 赞同：2
> 
> 时间：2012-11-08T22:06:24.913
> 
> 标签：git, version-control, workflow, coda

我试图离开石器时代并将版本控制集成到我的工作流程中，但我是一个完全的 VC 菜鸟。我有一个 Bean Stalk 帐户，在那里添加了一个远程 git 存储库，并在 Coda 2 中成功启动了本地 git 存储库。我还设置了一个本地开发环境，我可以在其中运行 MAMP Pro 并在我的网络在当地发展。最终的游戏是使用本地 git 存储库在本地编写代码，然后当我满意时，将（正确的术语？）推送到远程存储库，然后将这些文件上传到托管在远程服务器上的暂存域. 我的旧工作流程涉及直接在服务器上编辑文件，这太可怕了。所以，我正在努力以正确的方式做事。

我找不到任何关于如何做到这一点的好资源。同样，我的本地 git repo 运行良好。但是，我希望能够将这些更改推送到 Coda 2 中的远程存储库。编辑站点面板中的“源”选项卡在下拉列表中只有“本地”，我无法更改其中的任何内容，不能弄清楚如何去做，在谷歌上找不到太多帮助。

有什么想法吗？这甚至是一个好策略吗？我愿意接受建议，因为我试图找到比直接通过 SFTP 编辑文件更好的工作流程。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:30:06.383

我相信，如果您在 Coda 中从头开始设置存储库，则需要使用终端添加远程路径。打开终端选项卡并粘贴 Beanstalk 告诉您“添加现有存储库”或类似内容的任何内容。它会是这样的：`$ git remote add origin git@<username>.beanstalkapp.com:/<repo>.git`。完成此操作后，要推送到该存储库，您可以使用 Source 选项卡底部的 Push 按钮。

就进程而言，您使用 Beanstalk 所做的可能是“最简单的”，也就是说，它可能是在命令行上或在服务器上安装软件所需时间最少的一个。我想说下一步将通过将其设置为 git 远程直接部署到服务器。然后，您可以通过 SSH 连接到服务器并直接拉取更改。之后，您可以使用 Fabric 和 Capistrano 等工具来自动化该过程。

# java - Mockito 的 ArgumentCaptor：一个方法名，两个方法定义（第 2 部分）

> ID：13298662
> 
> 赞同：2
> 
> 时间：2012-11-08T22:06:38.813
> 
> 标签：java, unit-testing, testing, mockito

[昨天](https://stackoverflow.com/questions/13279617/mockitos-argumentcaptor-one-method-name-two-method-definitions)我问了一个类似的问题，其中我使用了一个方法名称，但是我传递了两个不同的参数。这个不涉及共享父类的参数类型。

我正在使用 PowerMockito 从构造函数返回 PrintWrite。我需要模拟它的打印方法。

我正在跟踪四种 print/println 调用：

```
print(long l)
print(java.lang.String s) 
print(char c)
println() 
```

特别是我关心的是打印很长的那个。我有以下设置：

```
Mockito.doNothing().when(fakePrintWriter).println();
Mockito.doNothing().when(fakePrintWriter).print(any(Long.class));
Mockito.doNothing().when(fakePrintWriter).print(any(String.class));
Mockito.doNothing().when(fakePrintWriter).print(any(Character.class)); 
```

通过以下验证，我想通过以下方式捕获某些参数：

```
Mockito.verify(fakePrintWriter, Mockito.times(11)).print(outputCaptor.capture());
Mockito.verify(fakePrintWriter, Mockito.times(1)).print(longPrintCaptor.capture());
Mockito.verify(fakePrintWriter, Mockito.times(9)).print(eq(','));
Mockito.verify(fakePrintWriter, Mockito.times(3)).println(); 
```

这给了我耳光：

```
Wanted but not invoked:
printWriter.print(<Capturing argument>); 
```

通过在 long 上正常测试打印进行深入研究，我发现调用 print(long l) 实际上是调用 println。所以，我改为将我的长打印设置/验证更改为：

```
Mockito.doNothing().when(fakePrintWriter).println(any(Long.class));
...
Mockito.verify(fakePrintWriter, Mockito.times(1)).println(longPrintCaptor.capture()); 
```

这给了我与 println 的冲突：

```
Argument(s) are different! Wanted:
printWriter.println(<Capturing argument>);
...
Actual invocation has different arguments:
printWriter.println();
...

Expected :printWriter.println(<Capturing argument>);
Actual   :printWriter.println(); 
```

就像昨天一样，我不知道如何解决这个问题-我考虑使用自定义答案来跟踪输出的字符串（我想验证正在输出的值的实际顺序），但我相信这样做只会导致类似的错误。关于做什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T12:12:45.847

与其尝试模拟 PrintWriter，不如简单地使用一个真实的，写入内存而不是文件。

```
ByteArrayOutputStream bytes = new ByteArrayOutputStream();
PrintWriter fakePrintWriter = new PrintWriter(byteArrayOutputStream);

// invoke method on unit under test

assertThat(bytes.toString()).isEqualTo(expectedOutput); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-12T00:50:23.813

我已经尝试过这种`ByteArrayOutputStream`方法，当我运行时它似乎是空的`bytes.toString()`。如果您不介意在测试中允许实现，我发现以下内容似乎可行：

```
StringWriter stringWriter = new StringWriter();
PrintWriter printWriter = new PrintWriter(stringWriter);
...
assertThat(printWriter.getBuffer().toString()).isEqualTo(expectedOutput); 
```

# asp-classic - JScript Classic ASP“自动化服务器无法创建对象”

> ID：13298664
> 
> 赞同：1
> 
> 时间：2012-11-08T22:06:45.770
> 
> 标签：asp-classic

我在 3 个不同的服务器上注册了一个 DLL，一个开发和两个生产。[这篇](https://stackoverflow.com/questions/9381707/registering-a-dll-on-64-bit-windows-server-2008-standard-sp2-iis-7)文章帮助在服务器上注册它。

不，我们正在尝试将站点放在第二个生产服务器上，以便我们可以对其进行负载平衡。在开发和生产服务器之一上，我可以创建我的对象并很好地利用它。在第二台生产服务器上，它给了我：

> Microsoft JScript 运行时错误“800a01ad”
> 自动化服务器无法创建对象
> /code/FileSystem.asp，第 459 行

在这种情况下，第 459 行是：

```
var oFSO = Server.CreateObject("Hydro.Comm.FileSystem"); 
```

两台生产服务器都是安装了最新补丁的 Windows Server 2008。我对为什么第二台服务器没有正确注册这个 DLL 感到困惑。

我们按照以下步骤在每台服务器上注册 DLL：

*   我们需要为 .net 框架 4 [http://www.microsoft.com/download/en/confirmation.aspx?id=8279安装 windows sdk](http://www.microsoft.com/download/en/confirmation.aspx?id=8279)

*   然后我们需要将程序集添加到 GAC：

    ```
    C:\Program Files\Microsoft SDKs\Windows\v7.1\Bin\NETFX 4.0 Tools>gacutil /i 
    C:\Windows\Microsoft.NET\Framework\v4.0.30319\HydroComFileSystem.dll 
    ```

*   然后我们需要使用 regasm 注册程序集：

    ```
    regasm /tlb HydroComFileSystem.dll 
    ```

感谢您的关注。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T17:05:42.780

必须配置应用程序池以允许 32 位应用程序

# c# - 为什么对象引用不引用预期对象？

> ID：13298669
> 
> 赞同：-1
> 
> 时间：2012-11-08T22:06:59.903
> 
> 标签：c#, reference

我需要更改从 GetCell 方法获得的数组单元对象。当我尝试更改接收到的对象时，它不会更改原始对象。

这是它在代码中的样子：

```
// this is in MyClass
A[,] arr = new A[100,500];

// this is in main class
MyClass GetAAt(Point p) { return myClass.arr[p.X,p.Y]; }
var a = GetAAt(new Point(23,45));
a = new A(); // this only changes the local `a` but not the arr[23,45] 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T22:08:15.910

您没有更改收到的对象。
相反，您将一个用于保存接收到的对象的变量更改为保存一个全新的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T22:14:11.773

您正在将新实例分配给变量 a。您可以为您的班级添加一个新方法

```
void SetAAt(Point p, A a) 
{ 
    arr[p.X,p.Y] = a; 
} 
```

并这样称呼它：

```
Point p = new Point(23,45);
var a = new A();
SetAAt(p, a); 
```

PS您不应该将您的数组命名为与班级相同的名称。虽然有可能，但我认为这不是一个好习惯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T22:08:36.437

`a`和都是`arr[23, 45]`引用类型（指针）

设置`a`为`new A()`仅使它指向一个新对象。它实际上并没有改变它指向的对象。

您可能必须添加一个`MyClass`删除/重新初始化值的方法）

尝试将类似于此的方法添加到您的`MyClass`

```
public void ResetAAt(int i, int j)
{
    arr[i, j] = new A();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T22:16:27.603

返回的是对数组中该位置的对象的引用。然后将该返回值设置为一个变量。更改该变量引用的内容不会以任何方式影响数组。

您需要做的是添加另一层间接：

```
public class Wrapper
{
    private A[,] array;
    private Point position;

    public Wrapper(A[,] array, Point position)
    {
        this.array = array;
        this.position = position;
    }

    public A Value
    {
        get
        {
            return array[position.X, position.Y];
        }
        set
        {
            array[position.X, position.Y] = value;
        }
    }
} 
```

这将允许您在 中创建一个包装器`GetAAt`，将其返回，并`Wrapper`对其`Value`进行更改，并能够看到它反映在底层数组中。

# java - 抽象类之间的差异接口

> ID：13298672
> 
> 赞同：0
> 
> 时间：2012-11-08T22:07:28.157
> 
> 标签：java

> **可能重复：**
> [接口与基类](https://stackoverflow.com/questions/56867/interface-vs-base-class)
> [接口与抽象类（通用OO）](https://stackoverflow.com/questions/761194/interface-vs-abstract-class-general-oo)
> [抽象类与Java中的接口](https://stackoverflow.com/questions/10040069/abstract-class-vs-interface-in-java)

所以我在我的编程课程中学习接口和抽象类。这两个主题看起来非常相似。我知道它们都与继承有关，但是两者之间有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:10:28.217

抽象类可以在方法体中包含代码，这在接口中是不允许的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:14:26.630

接口具有*必须*由实现它的类定义的方法。

抽象类类似。但是，在抽象类中，它可以包含继承类将能够自动调用的方法定义。

底线：如果所有实现类对方法的定义完全不同，请使用接口。如果继承类共享一些定义并且对某些方法有不同的定义，则使用抽象类。

例子：

```
public interface Shape {
    public float getArea();
    public void doThings();
}

public class Circle implements Shape{
    public float getArea() {
        return Math.PI * R * R;
    }

    public void doThings() { }
}

public abstract class Quadilateral implements Shape {

    public float getArea() { // defined
    return l * h;
    }

    public abstract void doThings(); // left abstract for inheriting classes
}

public class Rectangle extends Quadilateral {
    public void doThings() {
    // does things
    }
}

public class Parallelogram extends Quadilateral {
    public void doThings() {
    // does things
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T22:18:41.177

抽象类可以有方法，而接口不能有它们。

我通常是这样想的：

*   如果你想让一个类强制其他类写方法，使用接口。
*   如果您希望一个类为多个类保存一个公共方法，请使用抽象类。

因此，例如，您可能想要`Animal`上课。然后有一个`Dog`和`Cat`类。狗和猫都睡觉。所以你希望他们都有一个 sleep 方法。他们的睡眠方式基本相同。因此，您希望`Animal`该类保存该方法（因为它对于`Dog`and是相同的`Cat`。

```
public abstract class Animal {
    public void sleep() {
        //make ZZZZ appear in the air or whatever
    }
}

public class Dog extends Animal {
    //This class automatically has the sleep method
}

public class Cat extends Animal {
    //This class automatically has the sleep method
} 
```

另一方面，假设你有一个`Snake`和`Shark`类。蛇和鲨鱼都会攻击，但方式不同（毒液与咬人）。所以你可能有一个`Attacker`接口。

```
public interface Attacker {
    //We HAVE to have this here
    public void attack(); //Note - we didn't write the method here, just declared
}

public Snake implements Attacker {
    //We HAVE to have this here
    public void attack() {
        //inject venom
    }
}

public Shark implements Attacker {
    public void attack() {
        //rip apart
    }
} 
```

请注意，抽象类也可以有未定义的方法（如接口）。所以你可以`public void makeMeanSound();`进去`Animal`然后有`Dog`咆哮和`Cat`嘶嘶声。主要区别在于抽象类可以编写实际方法。

接口 - 强制编写方法（即强制`Snake`和`Shark`拥有该`attack()`方法）。

抽象类 - 为子类提供通用方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T22:24:54.047

有两个主要区别。

1.  接口不能包含任何实现。接口只是抽象方法的列表，实现该接口的所有类都必须实现所有这些方法。另一方面，抽象类可以包含一些方法的实现，然后子类可以使用这些方法。
2.  一个类只能有一个超类，无论是抽象的还是其他的，但是一个类可以实现任意数量的接口。

# java - 具有双单元类型精度的 Jtable

> ID：13298673
> 
> 赞同：4
> 
> 时间：2012-11-08T22:07:29.073
> 
> 标签：java, swing, jtable, tablecellrenderer, tablecelleditor

我必须在 JTable 中创建我的一列，它是双精度类型，以仅获取数字并以精度 2 舍入所有列。不仅以这种精度显示它们，而且以精度 2 将数字写入数据。事实上，如果我写入 2.456 它应该在单元格和数据中写入 2.46。最好的方法是如何做到这一点？使用自定义单元格渲染器还是使用自定义单元格编辑器？我有这个代码，但它不会改变数据它只在单元格上显示正确的数据

```
public class DoubleCellRenderer extends DefaultTableCellRenderer {

int precision = 0;
Number numberValue;
NumberFormat nf;

public DoubleCellRenderer(int aPrecision) {
    super();
    precision = aPrecision;
    setHorizontalAlignment(SwingConstants.RIGHT);
    nf = NumberFormat.getNumberInstance();
    nf.setMinimumFractionDigits(aPrecision);
    nf.setMaximumFractionDigits(aPrecision);
}

@Override
public void setValue(Object value) {
    if ((value != null) && (value instanceof Number)) {
        numberValue = (Number) value;
        value = nf.format(numberValue.doubleValue());
    }
    super.setValue(value);
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T23:01:33.033

如果我正确理解了您的问题，您希望在模型中以有限的精度存储双精度数，即使用户填写了更多数字的值。

在这种情况下，您只需要一个自定义编辑器来对值进行舍入，然后再将其存储到您的模型中。覆盖/调整[`getCellEditorValue()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/CellEditor.html#getCellEditorValue%28%29)方法以对输入值执行必要的舍入

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T22:09:28.833

你应该同时使用两者。

CellRenderer：数据如何显示（你要显示什么）

CellEditor：如何编辑数据（最终您可以选择在模型中设置什么值）

在这两种情况下，您都可以选择精度。在此处查看更多信息：http: [//docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)

注意：我建议宁愿覆盖而`getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column)`不是`setValue(Object value)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-16T22:09:36.290

我同意纪尧姆同时使用两者。这是使用另一个答案中提到的 getTableCellRendererComponent 覆盖的渲染器的良好实现的链接。

[http://helpdesk.objects.com.au/java/how-to-control-decimal-places-displayed-in-jtable-column](http://helpdesk.objects.com.au/java/how-to-control-decimal-places-displayed-in-jtable-column)

我稍微修改了一下，只在四舍五入时强制使用 3 位数字。还添加了检查以确保数据类型为 double

```
public static class DecimalFormatRenderer extends DefaultTableCellRenderer {
    private static final long serialVersionUID = 1L;
    private static final DecimalFormat formatter = new DecimalFormat( "#.###" );

    public DecimalFormatRenderer(){
        super();
        formatter.setMinimumFractionDigits(3);
    }

    public Component getTableCellRendererComponent(
        JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
                    // First format the cell value as required

        if(value instanceof Double){
            value = formatter.format((Number)value);
        }

        return super.getTableCellRendererComponent(
            table, value, isSelected, hasFocus, row, column );
    } 
} 
```

# php - 将 ORDER 添加到 SELECT 请求

> ID：13298678
> 
> 赞同：0
> 
> 时间：2012-11-08T22:07:54.357
> 
> 标签：php, mysql

我正在尝试订购我的结果，但我收到了 TString 错误。有人可以告诉我在哪里或如何添加`ORDER BY date DESC, paymentamount DESC`：

```
$sql = "SELECT * FROM `Carriers` WHERE fromzip >= '".mysql_real_escape_string($_REQUEST["from"])."'".$search_string.$search_loadtype; 
```

这是我尝试过的，但它不允许我：

```
 $sql = "SELECT * FROM `Carriers` WHERE fromzip >= '".mysql_real_escape_string($_REQUEST["from"])."'".$search_string.$search_loadtype ORDER BY date DESC, paymentamount DESC; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:09:57.693

试试这个..

```
$sql = "SELECT * FROM `Carriers` WHERE fromzip >= '".mysql_real_escape_string($_REQUEST["from"])."'".$search_string.$search_loadtype." ORDER BY date DESC, paymentamount DESC"; 
```

您需要使用 (.) 将字符串值拼凑在一起。然后你还没有用引号打开字符串......

```
$search_loadtype ORDER BY 
```

变成

```
$search_loadtype." ORDER BY 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T22:10:32.597

我认为您错过了一些报价：

```
 $sql = "SELECT * FROM `Carriers` WHERE fromzip >= '".mysql_real_escape_string($_REQUEST["from"])."'".$search_string." ".$search_loadtype." ORDER BY date DESC, paymentamount DESC"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T22:12:30.480

在我看来，您的语法错误，我真的不知道 $search_string 和 $search_loadtype 从您的代码中包含什么，但请尝试以下...

```
 $sql = "SELECT * FROM `Carriers` WHERE fromzip >= '".mysql_real_escape_string($_REQUEST["from"])."'".$search_string.$search_loadtype . " ORDER BY date DESC, paymentamount DESC;"; 
```

# c++ - 未定义的对 cuda 实现函数的引用

> ID：13298681
> 
> 赞同：1
> 
> 时间：2012-11-08T22:08:03.227
> 
> 标签：c++, cuda

我写了一个 cuda 应用程序，其中`main.cpp`包含一个`Common.h`文件

```
#include "Common.h"
int main(int argc , char **argv)
{
   ...
   DeviceFunc(a_h , numvar , b_h); //Showing the data
   ....
} 
```

然后，`Common.h`包含：

```
 #ifndef __Common_H
 #define __Common_H
 #endif
 void DeviceFunc(float * , int , float *); 
```

另外，`DeviceFunc.cu`在同一个文件夹中：

```
 #include<cuda.h>
 #include<stdio.h>
 #include "Common.h"
 __device__ __global__ void Kernel(float *, float * ,int );
 void DeviceFunc(float *temp_h , int numvar , float *temp1_h)
 {
    float *a_d , *b_d;
    //Memory allocation on the device
    cudaMalloc(&a_d,sizeof(float)*(numvar)*(numvar+1));
    cudaMalloc(&b_d,sizeof(float)*(numvar)*(numvar+1));

    //Copying data to device from host
    cudaMemcpy(a_d, temp_h, sizeof(float)*numvar*(numvar+1),cudaMemcpyHostToDevice);

    //Defining size of Thread Block
    dim3 dimBlock(numvar+1,numvar,1);
    dim3 dimGrid(1,1,1);

    //Kernel call
    Kernel<<<dimGrid , dimBlock>>>(a_d , b_d , numvar);

    //Coping data to host from device
    cudaMemcpy(temp1_h,b_d,sizeof(float)*numvar*(numvar+1),cudaMemcpyDeviceToHost);

    //Deallocating memory on the device
    cudaFree(a_d);
    cudaFree(b_d);
 }

 } 
```

现在，当我用 编译代码时`nvcc -o main main.cpp`，出现此错误`main.cpp:(.text+0x3a0): undefined reference to 'DeviceFunc(float*, int, float*)'`

问题是什么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T07:33:10.777

未定义的函数引用发生在编译器**找到函数的原型**并且**在链接期间没有找到对该函数的引用时**。为避免此链接错误，您应该 1) 在一个命令中编译链接整个文件，或 2) 将编译和链接过程分开。我推荐后者如下：

```
nvcc -c main.cpp
nvcc -c DeviceFunc.cu
nvcc -c Kernel.cu
nvcc main.o DeviceFunc.o Kernel.o -o main 
```

请注意，您显示的代码缺少包含 body`Kernel`函数的文件。我假设`Kernel`函数体包含在`Kernel.cu`.

# objective-c - 计算器中的幂和根基

> ID：13298684
> 
> 赞同：0
> 
> 时间：2012-11-08T22:08:15.660
> 
> 标签：objective-c, ios, xcode

我正在制作一个计算器，对于加法等操作，我使用代码作为

```
if ([operand isEqualToString:@"+"])
        lastKnownValue += currentValue; 
```

这意味着如果点击加号按钮，则在用户之前指定的数字上，加上之后指定的数字。
通过使用与除法几乎相同的工作

```
/= 
```

等等。

但是我怎样才能让它计算第一个数字的第二个幂呢？
或者计算第一个数字的根（以第二个数字为底）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T22:12:53.970

您可以使用以下函数计算幂`pow`：

```
lastKnownValue = pow(lastKnownValue, currentValue); 
```

x 的第 y 根等于 x 的 1/y 次方：

```
lastKnownValue = pow(lastKnownValue, 1.0/currentValue); 
```

# android - android如何按列名获取sqlite数据

> ID：13298685
> 
> 赞同：9
> 
> 时间：2012-11-08T22:08:14.803
> 
> 标签：android, sqlite

是否可以通过列名而不是 sqlite 中的索引获取列数据？我不想依赖列的特定顺序。如果是这样，语法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T22:13:19.390

您可能想使用[Cursor.getColumnIndex()](http://developer.android.com/reference/android/database/Cursor.html#getColumnIndex%28java.lang.String%29)方法。

> 返回给定列名的从零开始的索引，如果该列不存在，则返回 -1。如果您希望该列存在，请改用 getColumnIndexOrThrow(String) ，这将使错误更加清晰。

例子：

```
String[] columns = new String[]{ COLUMN_XML };
Cursor c = db.query(TABLE, columns, where, whereArgs, null, null, null);
String xml = c.getString(c.getColumnIndex(COLUMN_XML)); 
```

# python - python arg在shell命令中转义（调用avconv）

> ID：13298686
> 
> 赞同：1
> 
> 时间：2012-11-08T22:08:21.290
> 
> 标签：python, shell, escaping

# 问题（向具有奇怪字符的 avconv 发送 args）

这是一个使用“avconv”转换文件的函数：我尝试了多种方法，但是，对于我的生活，我无法让引用正常工作！

```
# -----------------------------------------------------------------------
#from pipes import quote # this fails in the same way as shlex.quote.
# The following is copied from python 3.3 shlex.py and modified for 2.7 -----------------------------------
import re
#_find_unsafe = re.compile(r'[^\w@%+=:,./-]', re.ASCII).search
_find_unsafe = re.compile(r'[^\w@%+=:,./-]').search

def quote(s):
    """Return a shell-escaped version of the string *s*."""
    if not s:
        return "''"
    if _find_unsafe(s) is None:
        return s

    # use single quotes, and put single quotes into double quotes
    # the string $'b is then quoted as '$'"'"'b'
    return "'" + s.replace("'", "'\"'\"'") + "'"

def convert(from_fpath, to_path):

        from_fpath = quote(from_fpath)
        to_fpath = quote(to_fpath)

        cmd = ['avconv', '-i', from_fpath, to_fpath]
        print '--- avconv -i %s \t %s' % (from_fpath, to_fpath)

        try:
            #output = subprocess.check_output(cmd, stderr=subprocess.STDOUT, shell=False)
            output = subprocess.check_output(cmd, stderr=subprocess.STDOUT, shell=True)
            print output
        except subprocess.CalledProcessError, e:
            print "Failed", str(e)
            print "Failed output:\n", e.output
# ----------------------------------------------------------------------- 
```

## 通过python的失败

这是失败的一些输出......（由于某种原因，avconv 程序无法识别 args（我也尝试在一个 arg 而不是 2 中使用 '-i my_file'）。

```
--- avconv -i '/home/me/MEDIA/MUSIC_CONVERT/Zen/05 Je T'"'"'aime Mais.m4a'   '/home/me/MEDIA/MUSIC_CONVERT/CONVERTED/05 Je T'"'"'aime Mais.mp3'
Failed Command '['avconv', '-i', '\'/home/me/MEDIA/MUSIC_CONVERT/Zen/05 Je T\'"\'"\'aime Mais.m4a\'', '\'/home/me/MEDIA/MUSIC_CONVERT/CONVERTED/05 Je T\'"\'"\'aime Mais.mp3\'']' returned non-zero exit status 1
Failed output:
avconv version 0.8.3-6:0.8.3-6ubuntu2, Copyright (c) 2000-2012 the Libav developers
  built on Oct  1 2012 12:57:14 with gcc 4.7.2
Use -h to get full help or, even better, run 'man avconv'
Hyper fast Audio and Video encoder
usage: avconv [options] [[infile options] -i infile]... {[outfile options] outfile}... 
```

## 没有 python 也一样

在命令行上（即在 shell 中），该命令有效：

```
$ avconv -i '/home/me/MEDIA/MUSIC_CONVERT/Zen/05 Je T'"'"'aime Mais.m4a'  '/home/me/MEDIA/MUSIC_CONVERT/CONVERTED/05 Je T'"'"'aime Mais.mp3'
avconv version 0.8.3-6:0.8.3-6ubuntu2, Copyright (c) 2000-2012 the Libav developers
  built on Oct  1 2012 12:57:14 with gcc 4.7.2
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/home/me/MEDIA/MUSIC_CONVERT/Zen/05 Je T'aime Mais.m4a':
  Metadata:
    major_brand     : M4A 
    minor_version   : 0
    compatible_brands: M4A mp42isom
    creation_time   : 2007-11-10 00:27:13
    title           : Je T'aime Mais
    artist          : Zazie
    album           : Zen
    genre           : Rock
    track           : 5/12
    disc            : 1/1
    date            : 1995
    gapless_playback: 0
    encoder         : iTunes v7.5.0.20, QuickTime 7.3
  Duration: 00:04:19.80, start: 0.000000, bitrate: 129 kb/s
    Stream #0.0(und): Audio: aac, 44100 Hz, stereo, s16, 128 kb/s
    Metadata:
      creation_time   : 2007-11-10 00:27:13 
```

……等等……一切都好！

我正在使用 Ubuntu 12.10

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T22:19:37.517

您可能不需要传递`shell=True`或`subprocess.check_output()`转义`cmd`列表中的文件路径。

# jakarta-ee - java bean 概念的适用性

> ID：13298687
> 
> 赞同：0
> 
> 时间：2012-11-08T22:08:27.453
> 
> 标签：jakarta-ee, ejb

我有时对 Java EE 应用程序开发中的概念有点困惑。

假设我有同时涉及多个客户端的结构化数据或对象。例如，我可能有一个应用程序，它大量使用动态数据，例如应该跟踪的汽车的瞬态坐标（不需要持久化它们），在此之上，我可能想为客户提供服务。我认为会话 bean 和实体 bean 都不适合表示这种数据，或者？会话 bean 通常不适合在一个客户端的上下文中表示对象的多个实例，对吗？

那么一个典型的 Java EE 应用程序是否不仅包含会话 bean 和实体 bean，还包含 Pojos？*我如何表示不特定于一个客户端的瞬态对象？*请原谅我的菜鸟问题，我只需要一个关于这个的一般概念......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:41:17.740

在这种情况下，您确实会使用存储在某个内存集合中的 POJO 来表示您的瞬态数据。

会话 bean 要么是无状态的（因此不能包含共享数据），要么是有状态的（这意味着它们只包含一个客户端的会话数据）。实体是持久的。

# qt - 如何通过单击并拖动 QWebView 内的元素来拖动整个无框架 QWidget？

> ID：13298688
> 
> 赞同：1
> 
> 时间：2012-11-08T22:08:30.340
> 
> 标签：qt, drag-and-drop, qwidget, qwebview

我目前有一个包含 QWebView 的 QWidget。容器 QWidget 是半透明且无框的。我已经能够通过单击并拖动 QWidget 的外部来拖动无框窗口，但是当我单击 QWebView 中的任何内容时我无法拖动。

我的目标是能够在 QWebView 的 DOM 中创建一个类或 id 为“拖动句柄”的元素。然后，在应用程序中，我想找到任何名为“drag-handle”的元素并将其绑定到拖动事件，这样我就可以使用它来拖动整个 QWidget 容器。

我希望这是有道理的，如果您认为这对我有用，请随时向我指出一些文档或示例材料的方向，如果有人我很乐意自己尝试解决可以指出我正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T23:43:10.720

我认为您不应该使用拖动事件，而是使用鼠标事件。您应该扩展 QWebVew 类，覆盖鼠标处理程序事件并：

*   当您的“拖动手柄”对象上的鼠标按下事件将被处理时，您可以设置 Qt::ClosedHandCursor 光标。
*   在处理鼠标移动事件后，您应该计算鼠标移动偏移量并分别在计算的偏移量上移动主窗口。像这样的东西：

QPoint offset = previousPos – event->pos(); mainWindow->move(mainWindow->pos() + offset);

*   当鼠标释放事件将被处理时，您可以重置鼠标光标。

为了实现这个功能，你可以使用 QStateMachine。

# kernel - 字节码可以在没有虚拟机的情况下运行

> ID：13298689
> 
> 赞同：1
> 
> 时间：2012-11-08T22:08:34.563
> 
> 标签：kernel, virtual-machine, bytecode, jit

字节码可以在没有虚拟机的情况下运行吗？

例如，一个微内核操作系统是否可以有一个执行服务器，它可以 JIT（将字节码转换为本机代码并运行）而不需要完整的虚拟机环境。

或者是否需要虚拟机的其他一些组件来运行程序？

为什么它会起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:32:26.707

我相信，您始终可以将任何字节码转换为本机字节码。

基本上，它的缺点是要完成一个额外的步骤+平台依赖性，但最后你的代码理论上应该:)运行得更快。

实际上例如在java中，有所谓的JIT编译（[http://en.wikipedia.org/wiki/Just-in-time_compilation](http://en.wikipedia.org/wiki/Just-in-time_compilation)），这样经常运行的东西可以运行得很快。

# javascript - setTimeout 测试未按预期运行

> ID：13298690
> 
> 赞同：1
> 
> 时间：2012-11-08T22:08:36.403
> 
> 标签：javascript, unit-testing, settimeout, jasmine

我是 Jasmine 的新手，我对以下测试有疑问：

```
describe("my test suite", function() {
    it("my testcase", function() {
        var callbackWasCalled = false;
        function callback(){
            callbackWasCalled = true;
        }
        methodToTest(callback);
        expect(callbackWasCalled).toBe(true);
    });
}); 
```

在大多数情况下有效，但此代码不起作用：

```
methodToTest(callback) {
    setTimeout(function() { callback(); }, 100);
} 
```

这是为什么？当我在回调中添加一个 console.log 时，我看到它被调用了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:15:43.383

原因是在调用回调之前测试已经完成。尝试 jasmine.Clock 来模拟 settimeout 方法。

# jquery-ui - jQuery UI 幻灯片效果在过渡时会切断部分 div

> ID：13298694
> 
> 赞同：3
> 
> 时间：2012-11-08T22:09:04.123
> 
> 标签：jquery-ui, jquery-effects

我正在尝试使用 jQuery UI 幻灯片效果实现页面转换。不幸的是，当转换正在进行时，页面顶部被截断。我已经使用这个 jsfiddle 重现了这个问题：http: [//jsfiddle.net/nareshbhatia/CfdEg/1/](http://jsfiddle.net/nareshbhatia/CfdEg/1/)。有人可以让我知道我做错了什么吗？

下面列出的代码的关键领域：

HTML

```
<div id="wrapper">
    <div id="page1" class="page">
        <p>Page 1</p>
    </div>
    <div id="page2" class="page nodisplay">
        <p>Page 2</p>
    </div>
</div> 
```

CSS

```
body {
    font: normal normal 16px Arial;
}

p {
    font-size: 40px;
    margin: 100px 0 0 0;
}

.nodisplay {
    display: none;
}

#wrapper {
    position: relative;
    width: 480px;
    height: 240px;
}

.page {
    position: absolute;
    width: 100%;
    height: 100%;
    text-align: center;
}

#page1 {
    background-color: #003366;
    color: #FFFFFF;
}

#page2 {
    background-color: #F6BC0C;
    color: #000000;
} 
```

JavaScript

```
function transitionPage() {
    // Hide to left / show from left
    $("#page1").toggle("slide", {direction: "left"}, 500);

    // Show from right / hide to right
    $("#page2").toggle("slide", {direction: "right"}, 500);
}

$(document).ready(function() {
    $('#page1').click(transitionPage);
    $('#page2').click(transitionPage);
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T22:35:57.133

呜呜我明白了：）

```
#page1 {
    background-color: #003366;
    color: #FFFFFF;
    display: inline-block;
}

#page2 {
    background-color: #F6BC0C;
    color: #000000;
    float:left;
}​ 
```

因此，随着它改变大小，我认为它必须是“块类型”的东西，所以我将内联块扔在它们身上并且它起作用了..但不正确，因为你隐藏了第 2 页。所以我在那里扔了一个花车，它起作用了..我无法真正解释它背后的逻辑，但这绝对是一个很好的采访“谜语”哈哈：P

它在这里工作:) [http://jsfiddle.net/lookitstony/EdsP4/](http://jsfiddle.net/lookitstony/EdsP4/)

# java - 重载方法的 Groovy 单元测试

> ID：13298695
> 
> 赞同：1
> 
> 时间：2012-11-08T22:09:06.703
> 
> 标签：java, unit-testing, testing, groovy, mocking

使用 MockFor 如何为重载方法编写单元测试。

例如

```
public HttpResponse execute(HttpUriRequest request, HttpContext context) 
```

和

```
public HttpResponse execute(HttpHost target, HttpRequest request) 
```

我已经写了：

```
 def responseMocker = new MockFor(HttpResponse.class)
        HttpResponse response = responseMocker.proxyInstance()
        def requestMocker = new MockFor(HttpUriRequest.class)
        def request = requestMocker.proxyInstance()
        def contextMocker = new MockFor(HttpContext.class)
        def context = contextMocker.proxyInstance();
        def clientMocker = new MockFor(HttpClient.class)
        clientMocker.demand.execute(request, context) { response }

        HttpClientSample client = new HttpClientSample(clientMocker.proxyInstance())

        assertEquals response, client.execute(request,context) 
```

上面的这个测试失败了：

groovy.lang.MissingMethodException：没有方法签名：....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:34:07.157

您需要像这样指定所需的方法：

```
mock.demand.execute { HttpUriRequest request, HttpContext context -> ... }
mock.demand.execute { HttpHost target, HttpRequest request -> ... } 
```

这会将所需的方法绑定到适当的重载方法签名。

# performance - 在 DNA 中寻找基序

> ID：13298700
> 
> 赞同：3
> 
> 时间：2012-11-08T22:09:19.373
> 
> 标签：performance, scala, string-algorithm, rosalind

问题可以在这里找到： [http ://rosalind.info/problems/subs/](http://rosalind.info/problems/subs/)

我的问题与下面提供的两种解决方案的性能有关。

1.

```
 def indexOfAppearances(strand: String, subStrand: String): List[Int] = {
    def help0(x: String, y: String, accu: List[Int]): List[Int] =
      (x contains y) match {
        case true => {
          val index = (x indexOfSlice y) /* index where substring appears */
          val adjust = strand.length - x.length
          /* adjustment since the x has all the previous
               * nucleotides removed.
               */

          val newX = x.drop(index + 1).mkString
           /* here's the drop of index + 1 elements */
          help0(newX, y, (index + adjust) :: accu) /* tail recursive call */
        }
        case false => accu
      }

     help0(strand, subStrand, List()).reverse.toList.map(x => x + 1)
         //indexes are not from 0 but from 1
  } 
```

2.

```
 val s = "ACGTACGTACGTACGT"
  val t = "GTA"

  val combs = s.sliding(t.length).zipWithIndex
  val locations = combs.collect { case (sub, i) if (sub == t) => i + 1 }
  println(locations.mkString(" ")) 
```

第二种解决方案漂亮、实用且简短。

第一个解决方案有点大，但它仍然有效。我本可以省略 val 并使用这些值使其更短，但这不是我的目标。

在看到第二个解决方案后，由于代码的长度，我对我的解决方案感到非常失望。检查了 scala 库以了解为什么第二个解决方案有效，然后我自己重新实现了它。考虑检查这两种解决方案的性能，并制作了一条巨大的 3000 万条 DNA 链。

惊讶！

表现：

第一个数字是 DNA 长度，接下来的两个数字表示第一个和第二个解决方案的执行时间（以毫秒为单位）。

> 11,226,096 - 4921 - 14503
> 
> 33,678,288 - 6448 - 35150

**为什么性能差别这么大？**

我试过检查 scala 库，但找不到解释这种行为的东西。

我假设第一个解决方案是创建许多对象，因此会消耗更多内存并花费大量时间，但似乎由于某种原因它工作得更快。我怀疑这是尾递归，我怀疑 zipWithIndex 需要很多时间。迭代器只是迭代器？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:17:09.307

`sliding`对字符串无效。它将字符串分解为字符，将它们装箱，然后将它们重新组合成一个字符串。

最快的方法是使用`regionMatches`on 方法`String`。（更快的 DNA 是将所有内容转换为字节，更快的是将其转换为 2 位半字节并打包成 int 数组。）

# php - XML、PHP 和 XPATH - 没有结果

> ID：13298705
> 
> 赞同：1
> 
> 时间：2012-11-08T22:09:41.590
> 
> 标签：php, xml, xpath

我在使用 xpath 和 XML 时遇到问题

这是 XML 文件的示例

```
 <OddService>
    <Header>
    <Status>000</Status>
    <Description>OK</Description>
    <Timestamp>1352407434</Timestamp>
    </Header>
    <Results>
    <Event>
    <EventID>1182745</EventID>
    <StartDate>2012-11-09T19:45:00</StartDate>
    <SportID>6046</SportID>
    <LeagueID>1182547</LeagueID>
    <LocationID>243</LocationID>
    <Status>NSY</Status>
    <LastUpdate>2012-11-08T20:27:14.767</LastUpdate>
    <HomeTeam ID="7" Name="Middlesbrough" Logo=""/>
    <AwayTeam ID="992" Name="Sheffield W" Logo=""/>
    <Scores status="" time=""/>
    <Scorers/>
    <Cards/>
    <Outcomes>...</Outcomes>
    </Event>
    <OddService>
    <Header>
    <Status>000</Status>
    <Description>OK</Description>
    <Timestamp>1352407434</Timestamp>
    </Header>
    <Results>
    <Event>
    <EventID>1182745</EventID>
    <StartDate>2012-11-09T19:45:00</StartDate>
    <SportID>6046</SportID>
    <LeagueID>1182547</LeagueID>
    <LocationID>243</LocationID>
    <Status>NSY</Status>
    <LastUpdate>2012-11-08T20:27:14.767</LastUpdate>
    <HomeTeam ID="7" Name="Middlesbrough" Logo=""/>
    <AwayTeam ID="992" Name="Sheffield W" Logo=""/>
    <Scores status="" time=""/>
    <Scorers/>
    <Cards/>
    <Outcomes>...</Outcomes>
    </Event>
    </Results>
    </OddService> 
```

在这个 XML 示例中，我只包含了其中一个条目。我正在使用这个 PHP 代码，但没有得到任何结果......有人有什么想法吗？

```
 <?php
    $loadfile = simplexml_load_file('matches.xml');

    foreach ($loadfile->OddService->Results as $gameinfo):
    $kodate=$gameinfo->StartDate;
    $status=$gameinfo->Status;
    $id=$gameinfo->EventID;
    $league=$gameinfo->LeagueID;
    $hometeam=$gameinfo->HomeTeam['Name'];
    $awayteam=$gameinfo->AwayTeam['Name'];
    $home=$gameinfo->Outcomes->Outcome->Bookmaker->Odds[0]['currentPrice'];
    $away=$gameinfo->Outcomes->Outcome->Bookmaker->Odds[1]['currentPrice'];
    $draw=$gameinfo->Outcomes->Outcome->Bookmaker->Odds[2]['currentPrice'];
    ?> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:22:31.853

该代码中没有 xpath ...但是，当您加载 XML 时，根目录已经包含在内，因此您可能需要将 foreach 更改为

```
foreach ($loadfile->Results as $gameinfo): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:44:06.070

我正在尝试您的 XML 文件——在我自己添加了根节点之后——它工作正常。我看到的唯一问题是并非所有结果节点都有一个结果节点，因此当 PHP 在 foreach 循环中运行最后三行时会出现错误。你可以用这个来解决这个问题：

```
if ( $gameinfo->Outcomes ) {
    $home=$gameinfo->Outcomes->Outcome->Bookmaker->Odds[0]['currentPrice'];
    $away=$gameinfo->Outcomes->Outcome->Bookmaker->Odds[1]['currentPrice'];
    $draw=$gameinfo->Outcomes->Outcome->Bookmaker->Odds[2]['currentPrice'];
} 
```

除此之外，它应该可以工作...您是否尝试过`var_dump`在循环中使用 $gameinfo ？

# java - 从 JList 中删除项目

> ID：13298711
> 
> 赞同：5
> 
> 时间：2012-11-08T22:10:13.113
> 
> 标签：java, swing, jlist, defaultlistmodel

我有一个简单的 Jlist，其中的数据来自`List<String>`，现在我想从 Jlist 中删除选定的项目。这是代码：

```
final DefaultListModel<String> model = new DefaultListModel();
final JList list = new JList(model);

//filling list
//loop for every element from List<String>
 public static void sample(DefaultListModel model, List<String> data)
      for(int i=;i<data.size();i++)
        {model.addElement(data.get(i));}

//btn pressed
public void actionPerformed(ActionEvent arg0) {
    int index = list.getSelectedIndex();
    model.removeElementAt(index);
} 
```

我收到此错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: -1
at java.util.ArrayList.elementData(Unknown Source)
at java.util.ArrayList.get(Unknown Source)
at javax.swing.JList.fireSelectionValueChanged(Unknown Source)
at javax.swing.JList$ListSelectionHandler.valueChanged(Unknown Source)
at javax.swing.DefaultListSelectionModel.fireValueChanged(Unknown Source)
at javax.swing.DefaultListSelectionModel.fireValueChanged(Unknown Source)
at javax.swing.DefaultListSelectionModel.fireValueChanged(Unknown Source)
at javax.swing.DefaultListSelectionModel.removeIndexInterval(Unknown Source)
at javax.swing.plaf.basic.BasicListUI$Handler.intervalRemoved(Unknown Source)
at javax.swing.AbstractListModel.fireIntervalRemoved(Unknown Source)
at javax.swing.DefaultListModel.remove(Unknown Source)
at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

是什么诡计还是什么？感谢帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T22:42:01.043

假设您的索引是非负的（正如其他人所提到的），看看这是否有效（在您的听众中）：

```
((DefaultListModel) jList.getModel()).remove(index); 
```

如果是这样，那么您使用的是过时的模型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T22:43:47.733

根据[javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/DefaultListModel.html#removeElementAt%28int%29)，建议使用`remove()`而不是`removeElementAt()`，所以：

```
public void actionPerformed(ActionEvent arg0) {
    int index = list.getSelectedIndex();
    if (index != -1) {
        model.remove(index);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T22:23:56.230

根据Javadoc [`getSelectedIndex()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JList.html#getSelectedIndex%28%29)：

> 返回最小的选定单元格索引；仅在列表中选择单个项目时的选择。When multiple items are selected, it is simply the smallest selected index. **如果没有选择返回 -1**

您遇到错误的原因是由于某种原因，没有从您的列表中选择任何项目，因此此方法返回 -1。当你调用`removeElementAt()`它并将 -1 作为参数值传递时，它会抛出异常。

你需要做的如下：

```
public void actionPerformed(ActionEvent arg0) {
    int index = list.getSelectedIndex();
    if(index >= 0){ //Remove only if a particular item is selected
        model.removeElementAt(index);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-11T14:18:18.517

问题是你的监听器有问题，因为当元素被移除时，选定的值会改变。这就是您的“valueChanged”方法试图将 selectedValue 置于错误位置的原因。我看不到你的方法 valueChanged，但我认为这就是原因。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-17T13:20:57.180

```
DefaultListModel model=new DefaultListModel();
    model.clear();
 jList1.setModel(model); 
```

如果你想删除所有项目

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-06T11:57:47.773

```
int selectedIndex = yourJLIST.getSelectedIndex();
    String [] ListData = new String[yourJLIST.getModel().getSize()];
    for (int i = 0; i < ListData.length; i++) {
        if(i == selectedIndex){

        }else{
            ListData[i] = yourJLIST.getModel().getElementAt(i);
        }
    }
    yourJLIST.setListData(ListData); 
```

# less - LESS.JS 决定在哪里编译多个文件

> ID：13298714
> 
> 赞同：0
> 
> 时间：2012-11-08T22:10:26.093
> 
> 标签：less

我有一些 .less 文件，我使用 less app 来编译它们，我使用的结构大致是（使用 less 1.4）：

--mixins.less - 这个文件包含所有的 mixin。

--color-scheme.less - 此文件包含所有具有任何颜色参考的类。

--main.less - 网站的其他样式，这个@imports mixins.less 和 color-scheme.less

在 main.less 中，我使用的`++.className`语法将所有使用它的类编译成一个只有 1 个声明的列表，所以：

```
.foo{
    color:red
}
.bar{
    ++.foo;
}
.fiz{
    ++.foo;
} 
```

编译为：

```
.foo, .bar, .fiz{
    color:red;
} 
```

这是在 main.css（main.less 的输出）的顶部编译的，因为我有一些颜色主题，所以每次发生更改时我都需要手动编译，并手动将带有颜色的声明分隔到不同的文件中。

基本上我正在寻找一种解决方案，它允许我将所有使用 ++ 的类编译到特定文件中。

谢谢！

# responsive-design - 当便携式设备具有更高的像素密度时，如何处理响应式设计宽度？

> ID：13298716
> 
> 赞同：2
> 
> 时间：2012-11-08T22:10:27.607
> 
> 标签：responsive-design

好的，我是响应式设计的新手，所以在我尝试解释这一点时请耐心等待。因此，响应式设计的工作方式似乎是根据用户窗口宽度触发不同的 css 媒体查询。如果是这种情况，那么与台式机 72ppi 相比，新的 iphone 和平板电脑不会因为设备每英寸的高像素密度而搞砸吗？因此，曾经为 320 像素的手机设计的网页不会被 iphone5 触发，因为 640x1136 的 ppi (336) 较高，而是说在不理想时触发用于平板电脑的网页？

我感谢你们帮我把事情弄清楚

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T02:55:05.083

一个 CSS 像素和一个屏幕像素不是平等的。这篇博文希望能有所帮助。

[http://www.quirksmode.org/blog/archives/2010/04/a_pixel_is_not.html](http://www.quirksmode.org/blog/archives/2010/04/a_pixel_is_not.html)

# youtube-api - 使用 Youtube API 获取用户精选视频

> ID：13298727
> 
> 赞同：0
> 
> 时间：2012-11-08T22:11:15.333
> 
> 标签：youtube-api

我正在尝试从提要中获取用户精选视频 ID。

这可能是 YouTube API 中的一个错误，如下所示： [https ://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/z0x1vmjTsP4](https://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/z0x1vmjTsP4)

有人有解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:18:41.823

这还是坏了。我只是再次 ping 内部错误。

# python - 将一个模块中的类中的函数中的变量导入另一个模块

> ID：13298731
> 
> 赞同：0
> 
> 时间：2012-11-08T22:11:42.607
> 
> 标签：python, tornado

我需要有关如何将类函数中的变量发送到 python 中的另一个模块的帮助。例如：

```
class MainHandler(tornado.web.RequestHandler):
    def get(self):
        self.render('main.html')

    def post(self):
        event = self.get_argument('event')
        print event
        return event 
```

如何在另一个 python 模块中使用事件变量？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:16:57.013

让它`self.event`...

原因是事件只存在于 post 方法的范围内......它在您调用 post 时创建并在您退出 post 时销毁

此页面可能有助于为您解释范围和变量生命周期

[http://www.saltycrane.com/blog/2008/01/python-variable-scope-notes/](http://www.saltycrane.com/blog/2008/01/python-variable-scope-notes/)

模块 1

```
class MainHandler(tornado.web.RequestHandler):
    event = None
    def get(self):
        self.render('main.html')

    def post(self):
        MainHandler.event = self.get_argument('event')
        print event
        return event 
```

模块 2

```
from module1 import MainHandler
print MainHandler.event 
```

# android - 服务未收到小部件 OnClickPendingIntent

> ID：13298732
> 
> 赞同：0
> 
> 时间：2012-11-08T22:11:44.663
> 
> 标签：android, service, android-widget, android-pendingintent

由于本网站的限制，我无法发布与我的问题相关的所有内容。因此，您可以阅读以下所有内容：[http ://www.dreamincode.net/forums/topic/299148-widget-onclickpendingintent-not-received-by-service/](http://www.dreamincode.net/forums/topic/299148-widget-onclickpendingintent-not-received-by-service/)

基本上，我的音乐应用程序有一个小部件，它显示当前正在播放的歌曲，并且应该允许用户切换播放或更改曲目。小部件更新得很好，但服务没有收到服务。

这就是我设置 OnClickPendingIntent 的方式：

```
 RemoteViews updateViews = null;
  ComponentName thisWidget = new ComponentName(this, GMWidget.class);
  updateViews = new RemoteViews(this.getPackageName(), R.layout.widget);
  Intent WIDGET_PAUSE_PLAY_intent = new Intent(this, GMService.class);
  WIDGET_PAUSE_PLAY_intent.setAction(WIDGET_PAUSE_PLAY);
  PendingIntent WidgetPausePlay = PendingIntent.getService(this, 0, new Intent(WIDGET_PAUSE_PLAY).setComponent(thisWidget), 0);
  updateViews.setonclickPendingIntent(R.id.pbWidMediaPlay, WidgetPausePlay); 
```

这是我的 OnReceive：

```
public void onReceive(Context context, Intent intent) {
  //  super.onReceive(context, intent);
    String action = intent.getAction();
    Log.d(TAG,"CLICKK: " + action);
} 
```

这是我的服务的意图过滤器：

```
<action android:name="android.media.AUDIO_BECOMING_NOISY" /> />
<action android:name="com.my.player.WIDGET_NEXT" />
<action android:name="com.my.player.WIDGET_PREV" />
<action android:name="com.my.player.WIDGET_PAUSE_PLAY" />
<action android:name="android.appwidget.action.APPWIDGET_ENABLED" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:32:15.643

不要忘记调用更新。这是来自我的一个应用程序的完整工作代码。更改它并按照您认为合适的方式使用它。

```
public class Widget extends AppWidgetProvider 
{

    public void onUpdate(Context context, AppWidgetManager appWidgetManager, 
            int[] appWidgetIds) 
    {

        Log.i("Widget", "onUpdate");

        final int N = appWidgetIds.length;

        for (int i=0; i<N; i++) 
        {

            int appWidgetId = appWidgetIds[i];

            Log.i("Widget", "onUpdateLoop");

            Intent intent = new Intent(context.getApplicationContext(), MyService.class);
            intent.setAction(Long.toString(System.currentTimeMillis()));

            PendingIntent pendingIntent = PendingIntent
                    .getService(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);

            RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget);

            views.setOnClickPendingIntent(R.id.widgetButton, pendingIntent);

            appWidgetManager.updateAppWidget(appWidgetId, views);

    }

  }

} 
```

编辑：此外，如果您从应用程序中的其他任何地方更新您的小部件，请确保不要错过更新中的任何组件。对 updateAppWidget 的每次调用都必须包含所有相同的组件，尤其是任何 onPendingIntentClick

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:33:13.693

您使用 getService() 创建的 PendingIntent 不会触发 onReceive()。您需要在 onStartCommand() 中收听它。

# .net - 调试器停止后隐藏 NotifyIcon

> ID：13298736
> 
> 赞同：2
> 
> 时间：2012-11-08T22:12:14.950
> 
> 标签：.net, vb.net, visual-studio-2010

所以我正在使用 Visual Studio 2012 并有应用程序，它创建 notifyIcon 并显示它，如果我关闭应用程序然后 notifyIcon 隐藏，但如果我停止调试器则只关闭表单，但 notifyIcon 在我不使用鼠标悬停时仍然可见。

当我停止调试器时，是否可以将 Visual Studio 2010 配置为隐藏 notifyIcon？

（对不起，我的英语不好）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T22:16:52.613

没有。

有一些 Windows API 可以告诉 shell 显示和隐藏通知图标，而 NotifyIcon 类只是包装了这些 API。

如果您停止调试器，NotifyIcon 对象将永远无法调用 API 来隐藏通知图标。只需将鼠标悬停在它上面；shell 将意识到请求该图标的应用程序没有运行，并将删除该图标。

管理通知图标的任何应用程序都可能发生此问题，而不仅仅是 Visual Studio。

# c#-3.0 - C# 多服务器套接字应用程序

> ID：13298737
> 
> 赞同：-1
> 
> 时间：2012-11-08T22:12:16.827
> 
> 标签：c#-3.0

我不完全确定如何进行多个服务器相互通信，我的意思是，例如：服务器 1 上的用户 A 想要向服务器 2 上的用户 B 发送私人消息，用户 A 将消息发送给他各自的服务器（服务器 1），从这一点开始，服务器 1 应该如何将消息传输给用户 B？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T23:00:18.707

With the minimal information in the question it's very hard to point you in the right direction, here are some pointers to possible solutions for the problem of sending messages to destinations you cannot readily locate at the time of sending the message:

1.  [Microsoft MQ](http://msdn.microsoft.com/en-us/library/windows/desktop/ms711472%28v=vs.85%29.aspx), maybe not the freshest product in the message broker arena, but as far as I know its a nice product.
2.  You could use a [XMPP (Jabber) server](http://xmpp.org/xmpp-software/servers/), that's the same technology Google Talk is using. Lots of [libraries](http://xmpp.org/xmpp-software/libraries/) are available to integrate that protocol with most common languages.
3.  Any of the existing open source messaging softwares with connectors for .net languages like [Apache ActiveMQ](http://activemq.apache.org/)

An article that could also help you to see clearer in your requirements is [this comparison between message systems based on a broker and those that don't use a broker](http://www.zeromq.org/whitepapers%3abrokerless). Both solutions I suggest above use brokers by the way.

# asp.net - 我的 .aspx 页面上的部分徽标图像被分区重叠；如何将徽标图像放在所有内容之上？

> ID：13298738
> 
> 赞同：-1
> 
> 时间：2012-11-08T22:12:21.133
> 
> 标签：asp.net, html, css

我的 .aspx 页面上的部分徽标图像与同一部门中的另一个图像重叠。如何将徽标图像置于一切之上？我必须设置一些属性吗？

工具：VS2010

请建议。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:26:02.453

```
#your_div_id img {
    position: relative;
    z-index: 1;
} 
```

很可能会修复它。很难说没有看到任何标记

# java - Tess4J 可以处理旋转的文本吗？

> ID：13298742
> 
> 赞同：0
> 
> 时间：2012-11-08T22:12:29.910
> 
> 标签：java, tesseract

我开始与 Tess4J 一起玩，看看它能做什么。从我到目前为止所做的测试中，如果我像现在这样在图像文件中以结构化的水平方式输入文本，我可以拾取文本。但是，如果我开始旋转文本，我无法使用 Tess4J 拾取文本。Tess4J 是否应该能够处理以不同角度（如垂直、45 度等）倾斜的文本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-03-27T13:51:42.257

**使用 Tess4j 进行校正**

查看源代码[Tess4j（Tesseract 的 Java JNA 包装器）](https://github.com/nguyenq/tess4j)。

我最近发布了这个答案（[Java 图像库去歪斜和裁剪图像](https://stackoverflow.com/questions/273530/java-image-library-to-deskew-and-crop-images/36248013#36248013)）

*答案*：

您可以将[ImageDeskew.getSkewAngle()](http://tess4j.sourceforge.net/docs/docs-2.0/index.html?com/recognition/software/jdeskew/ImageDeskew.html)与[ImageHelper.rotate(BufferedImage image, double angle)](http://tess4j.sourceforge.net/docs/docs-2.0/index.html?net/sourceforge/tess4j/util/ImageHelper.html)结合使用。

[在 tess4j 项目Tesseract1Test.java](https://github.com/nguyenq/tess4j/blob/master/src/test/java/net/sourceforge/tess4j/Tesseract1Test.java#L177)的 test 文件夹上有一个如何使用它的示例

```
public void testDoOCR_SkewedImage() throws Exception {
    logger.info("doOCR on a skewed PNG image");
    File imageFile = new File(this.testResourcesDataPath, "eurotext_deskew.png");
    BufferedImage bi = ImageIO.read(imageFile);
    ImageDeskew id = new ImageDeskew(bi);
    double imageSkewAngle = id.getSkewAngle(); // determine skew angle
    if ((imageSkewAngle > MINIMUM_DESKEW_THRESHOLD || imageSkewAngle < -(MINIMUM_DESKEW_THRESHOLD))) {
        bi = ImageHelper.rotateImage(bi, -imageSkewAngle); // deskew image
    }

    String expResult = "The (quick) [brown] {fox} jumps!\nOver the $43,456.78 <lazy> #90 dog";
    String result = instance.doOCR(bi);
    logger.info(result);
    assertEquals(expResult, result.substring(0, expResult.length()));
} 
```

[![eurotext_deskew.png](../Images/faa3d1a1953bc93a17c1e7be95bfc1d1.png)](https://i.stack.imgur.com/goIQD.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T15:38:49.317

`osdetect.cpp`在 Tesseract 中有一些用于方向和脚本检测的机制。Tess4J 没有带来这种情况，因此在这种情况下，最好与原始 c++ 代码进行交互。使用 Tesseract，可以使用 psm 参数（有关完整的值列表，请参阅[此 SO 问题](https://stackoverflow.com/questions/8114703/page-layout-analysis-using-tesseract)）来表示“自动定向”。例如，`psm -0`应该提供自动定向。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-09T22:35:23.877

除了作为 Tesseract 之上的简单包装器之外，Tess4J 不提供任何额外的功能。因此，您必须在 OCR 之前确定倾斜角度并旋转图像。

# url - History API：Javascript Pushstate，获取上一个 URL

> ID：13298743
> 
> 赞同：6
> 
> 时间：2012-11-08T22:12:44.280
> 
> 标签：url, history.js, html5-history

```
$(window).bind('statechange',function(){
     var State = History.getState(),
     url = State.url;
}); 
```

在以下函数中，url 返回*当前*URL。我正在寻找的是，在该函数中，获取以前的 URL，例如，如果我打开`/cars/ferrari`并转到`/cars/ford`，`url`将返回`cars/ford`，但我想获取`/cars/ferrari`。

如何获取`statechange`事件中的上一个 URL？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T22:27:26.150

```
$(window).bind('statechange',function(){
    // Prepare Variables
    var State = History.getState(),
        url = State.url,
        states = History.savedStates,
        prevUrlIndex = states.length - 2,
        prevUrl = states[prevUrlIndex].hash;
}); 
```

这似乎可以解决问题！prevUrl 给了我想要的 URL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-27T10:08:41.793

我要做的就是将 URL 推送到状态对象，以便您可以再次获取它。

所以当你使用 pushState 时：

```
history.pushState(
  {'previous_url': document.location.href}, 
  document.title,
  "?some_query_string"
); 
```

然后，当您获得状态时，它将具有 previous_url :)

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-11-08T22:23:57.713

尝试这个：

```
alert(document.referrer); 
```

笔记：

> 如果用户直接导航到页面（不是通过链接，而是例如通过书签），则该值是一个空字符串。由于此属性仅返回一个字符串，因此它不会让您对引用页面进行 DOM 访问。

在此处查看更多信息：[https ://developer.mozilla.org/en-US/docs/DOM/document.referrer?redirectlocale=en-US&redirectslug=document.referrer](https://developer.mozilla.org/en-US/docs/DOM/document.referrer?redirectlocale=en-US&redirectslug=document.referrer)

# javascript - 循环遍历具有一个元素的复选框数组

> ID：13298744
> 
> 赞同：2
> 
> 时间：2012-11-08T22:12:52.643
> 
> 标签：javascript, forms, checkbox

我有一个名为“标签”的动态创建的复选框列表，我使用 javascript 循环以确保仅选中 1 并获取值。如果由于某种原因此复选框列表只有一项，我的脚本将不会查看它。当我提醒标签的长度时，我得到了未定义。

```
 var total=[];
    for (var i=0; i < document.form1.tags.length; i++){
        if(document.form1.tags[i].checked==true){
            total.push(document.form1.tags[i].value);
        }
    }

    if(total.length==0){
        alert("Please select a product to edit.");
    }else if (total.length>1){
        alert("Please select only one product to edit.");
    }else{
        document.location = "go somewhere";
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T22:19:11.300

为什么需要复选框？这不是使用[Radiobuttons](http://www.w3schools.com/html/tryit.asp?filename=tryhtml_radio)的好机会吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T22:18:42.800

两个建议：

1.  而是使用`getElementsByName`来获取所有元素，以便您可以迭代它们：

2.  使用像 jquery 这样的框架。有什么理由不能使用 jquery 或其他框架？你的生活会轻松很多。

```
var tags = document.getElementsByName('tags');
for(var i = 0; i < tags.length; ++i)
{
    if(tags[i].checked) .....
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T22:36:29.330

你想要单选按钮。

```
<input type='radio' name='tags' value='[whatever]' /> 
```

您不必“检查并确保只选择一个”。并得到

```
var tags = document.getElementsByName('tags'),
    value = '', i = 0;

for( ; i < tags.length; i++ )
{
    if( tags[i].checked ) {
        value = tags[i].value;
        break;
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-08T22:16:25.487

从我的头顶......如果只有一个复选框被选中，它可能是 document.form1.tags 不是一个数组......

# ios - 在 iOS6 上的 UITextView 上使用属性文本 (NSAttributedString) 仅适用于段落样式或字体，但不能同时适用

> ID：13298748
> 
> 赞同：4
> 
> 时间：2012-11-08T22:13:09.923
> 
> 标签：ios, ios6, uitextview, nsattributedstring, css

我一直在尝试使用 UITextView 的属性属性将可调整的行高添加到我的自定义 UITextView。我的代码在模拟器中运行良好，但无法在 iPhone5 上运行。如果我删除字体行，行高会起作用，但文本会恢复为默认的较小字体。如果我添加字体，字体会起作用，但段落样式会被忽略。我已经在一个具有相同行为的新应用程序中尝试了香草 UITextView 上的代码，这让我认为这是一个 iOS6 错误。有没有人有更好的运气？

我还尝试了各种 UITextView 替换来添加行高功能，但到目前为止还没有成功。

我的代码如下所示：

```
...
NSMutableParagraphStyle *paragraphStyle = [[NSMutableParagraphStyle alloc] init];
paragraphStyle.minimumLineHeight = lineHeight;
paragraphStyle.maximumLineHeight = lineHeight;

NSString *text = self.text;
NSMutableAttributedString *attributedString = [[NSMutableAttributedString alloc] initWithString:text];

[attributedString addAttribute:NSParagraphStyleAttributeName value:paragraphStyle range:NSMakeRange(0, text.length)];
[attributedString addAttribute:NSFontAttributeName value:self.font range:NSMakeRange(0, text.length)];

self.attributedText = attributedString; 
```

感谢任何人的任何确认或建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T20:22:15.547

我认为这确实是一个错误。在过去的几天里，我一直在为此苦苦挣扎，找不到任何合理的解释。

此外，如果您使用 IB 设置您的 UITextView，其中一些属性将不会按应有的方式设置。

无论如何，我刚刚提交了一个错误。[http://openradar.appspot.com/radar?id=2278401](http://openradar.appspot.com/radar?id=2278401)

马特

# gpars - 使用 GPar 处理树中的节点并缓存已处理的节点

> ID：13298753
> 
> 赞同：1
> 
> 时间：2012-11-08T22:13:25.037
> 
> 标签：gpars

我正在处理一棵树，并希望使用 GPAR 加速它。我将它用于简单的事情，但没有深入研究更复杂的选项。

假设我正在用自己的线程处理树的不同分支。

假设一个节点有一个名字。当我第一次点击该节点时，我希望它被处理（包括将内容写入数据库等），并添加到缓存中（这里只是一个简单的地图）。

我希望其他线程可能会在树上的其他地方碰到同一个节点（例如同名的节点），以检查缓存。如果它已经在缓存中，他们可以抓住它并继续前进。如果另一个线程第一次处理该节点，我希望其分支中该节点上的其他线程在继续向下树之前等待（对于依赖于该节点的其他事物已经被处理）。

该节点是从数据库中提取的，因此每个分支中的对象都不相同，我认为同步方法不会起作用。

我当然希望其他不相关的节点继续处理。

例如：

*   线程 1 正在处理 ABCD
*   线程 2 正在处理 EBFG
*   线程 3 正在处理 WXY
*   线程 4 正在处理 LMNOPQRSBJ

假设线程 1 首先到达节点 B。它发现它不在缓存中，所以它开始处理它。

线程 2 出现并看到节点 B 不在缓存中，但它正在处理中。所以它等待继续到节点 F，直到线程 1 完成处理节点 B。

线程 3 不关心节点 B，因此继续运行。

线程 4 在线程 1 处理完节点 B 并在缓存中找到节点 B 之后出现，因此它只是将其从缓存中拉出并继续到节点 J。

我正在寻找有关如何最好地将 GPAR 应用于这种情况的建议。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T04:55:39.710

我的第一个想法是使用共享的 ConcurrentHashmap，其中节点名称作为键，DataflowVariables 作为值。

线程使用 putIfAbsent(nodename, new DataflowVariable()) 自动插入已处理节点数据的承诺，如果操作成功，线程可能开始处理节点并最终将结果绑定到 DataflowVariable。

如果 putIfAbsent() 失败，则其他一些线程已经开始处理同名节点。在这种情况下，当前线程可能只获取与节点名称关联的 DataflowVarieble 并等待结果可用 - 调用 get() 或 whenBound()。

# android - 应用程序发送的电子邮件附件与发送的文件名称不同

> ID：13298758
> 
> 赞同：1
> 
> 时间：2012-11-08T22:13:53.620
> 
> 标签：android, email, attachment

我正在编写一个 android 应用程序，该应用程序具有发送带有特定文档附件的电子邮件的功能。这是有效的，但是当我将其附加到电子邮件时，该附件称为“peroneal.pdf”（作为一种意图，我确定这是问题所在）在收到电子邮件时变为“2131034113.pdf” . 如何更改它以使收到的文档具有原始名称？它与命名意图有关吗？如果是这样，我该怎么做？在此先感谢您的帮助，我附上了代码片段：

```
Intent i = new Intent(Intent.ACTION_SEND);
i.setType("message/rfc822");
i.putExtra(Intent.EXTRA_EMAIL  , new String[]{value.toString()});
i.putExtra(Intent.EXTRA_SUBJECT, "Tendon Email");
i.putExtra(Intent.EXTRA_TEXT   , "The info is attached, just hit send.");

String rawFolderPath = "android.resource://" + getPackageName() + "/" + R.raw.peroneal;

Uri emailUri = Uri.parse(rawFolderPath);
i.putExtra(Intent.EXTRA_STREAM, emailUri);
i.setType("application/pdf");

try {
     startActivity(Intent.createChooser(i, "Send mail..."));

} catch (android.content.ActivityNotFoundException ex) {
        Toast.makeText(PTSlideShow.this, "There are no email clients installed.", Toast.LENGTH_SHORT).show();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:28:56.180

> This is working but the attachment, which is called "peroneal.pdf"

No, it is not called "peroneal.pdf", at least not on the device.

You may have a file named of `peroneal.pdf` on your local filesystem. That is largely lost when you package it as a resource, as you apparently have.

What the other process will see is `android.resource://.../2131034113`, where `2131034113` is the decimal value of `R.raw.peroneal` (and `...` is your app's package name).

> How do I change it so that the received document has the original name?

Well, you will increase your odds by using a `Uri` that actually has `peroneal.pdf` in it. For example, you could copy your raw resource out to external storage and use a `File`-based `Uri` instead. Or, serve up the attachment via an `openFile()`-based `ContentProvider`, where you support a `Uri` that ends in `peroneal.pdf`.

However, bear in mind that you are asking other apps to send email on your behalf. How those emails get created and packaged is up to the authors of those other email apps. There is no guarantee, at all, that your attachment will be named based on the last segment of the `Uri`. *Probably* there are *many* email apps that will take this approach, but I would not be the least bit surprised if there are some that will not.

# maven - 无法使用 grails 模块 mvn 编译父 pom

> ID：13298759
> 
> 赞同：0
> 
> 时间：2012-11-08T22:13:56.577
> 
> 标签：maven, grails, module, pom.xml, invocationtargetexception

我有一个简单的 Maven 父项目，其中包含

```
<modules>
  <module>myGrailsPlugin<module>
  <module>someVanillaMavenProject<module>
</modules> 
```

文件夹结构很简单。

```
parent
|_ myGrailsPlugin
    |_ pom.xml
    |_ MyGrailsPlugin.groovy
|_ someVanillaMavenProject
    |_ pom.xml
|_ pom.xml 
```

单独构建时，这两个模块都可以成功构建。但是，当我跑步时

```
mvn compile 
```

在父项目上，我收到以下错误。

```
Embedded Error: java.lang.reflect.InvocationTargetException
MyGrailsPlugin.groovy (The system cannot find the file specified.) 
```

myGrailsPlugin.groovy 文件位于 myGrailsPlugin 文件夹的顶层，是 grails 插件描述符。似乎 maven 不查找此文件夹中的文件。

知道如何解决这个问题吗？

* * *

GrailsPlugin 的 pom.xml 看起来像这样。

```
...
<build>
    ...
    <pluginManagement />
    <plugins>
        <plugin>
            <groupId>org.grails</groupId>
            <artifactId>grails-maven-plugin</artifactId>
            <version>${grails.version}</version>
            <extensions>true</extensions>
            <executions>
                <execution>
                    <id>set-version</id>
                    <phase>validate</phase>
                    <goals>
                        <goal>exec</goal>
                    </goals>
                    <configuration>
                        <command>set-version</command>
                        <args>${project.version}</args>
                    </configuration>
                </execution>
                <execution>
                    <id>package-plugin</id>
                    <phase>package</phase>
                    <goals>
                        <goal>exec</goal>
                    </goals>
                    <configuration>
                        <command>package-plugin</command>
                    </configuration>
                </execution>
            </executions>
        </plugin>
        ...
    </plugins>
</build>
... 
```

问候， 威尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:54:30.863

过了一会儿，我发现这是 grails gwt 插件中的一个错误。src/gwt 文件夹将在父目录而不是子模块目录中查找。但这不存在。因此，将完整文件夹复制到父文件夹将使构建成功完成。我不喜欢这种解决方法，并决定更改我的构建配置以单独构建模块。

# ruby-on-rails - 在rails 3.2中使用format.js时未定义的方法`bytesize'

> ID：13298761
> 
> 赞同：1
> 
> 时间：2012-11-08T22:14:04.537
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个包含两个字段和 :remote => true 的简单表单。

我的控制器如下所示：

```
 def create
@roadmap_item = RoadmapItem.new(params[:roadmap_item])

respond_to do |format|
  if @roadmap_item.save
    format.html { redirect_to @roadmap_item, notice: 'Roadmap item was successfully created.' }
    format.json { render json: @roadmap_item, status: :created, location: @roadmap_item }
    format.js { render js: @roadmap_item, status: :created, location: @roadmap_item, :layout => !request.xhr? }
  else
    format.html { render action: "new" }
    format.json { render json: @roadmap_item.errors, status: :unprocessable_entity }
    format.js { render js: @roadmap_item.errors, status: :unprocessable_entity }
  end
end 
```

结尾

我的“create.js.erb”文件是空的

如果我删除 format.js 行，对象会按预期创建。如果我保持原样，我会收到错误消息：`"undefined method 'bytesize' for #<RoadmapItem:0x4061d30>"`

我在 Windows 7 上使用 rails 3.2.8。

关于我做错了什么的任何想法？

堆栈跟踪：

```
[2012-11-08 23:08:31] ERROR NoMethodError: undefined method `bytesize' for #<RoadmapItem:0x4061d30>
C:/devtools/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activemodel-3.2.8/lib/active_model/attribute_methods.rb:407:in `method_missing'
C:/devtools/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/attribute_methods.rb:149:in `method_missing'
C:/devtools/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/utils.rb:281:in `bytesize'
C:/devtools/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/content_length.rb:24:in `block in call'
C:/devtools/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:46:in `each'
C:/devtools/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:46:in `each'
C:/devtools/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:454:in `each'
C:/devtools/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/body_proxy.rb:27:in `method_missing'
C:/devtools/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/body_proxy.rb:26:in `method_missing'
C:/devtools/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/content_length.rb:24:in `call'
C:/devtools/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in`call'
C:/devtools/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/handler/webrick.rb:59:in `service'
C:/devtools/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
C:/devtools/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
C:/devtools/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

# ios - 应用程序在 iOS 5.0 模拟器中崩溃，但在 iOS 6.0 中没有

> ID：13298762
> 
> 赞同：0
> 
> 时间：2012-11-08T22:14:07.963
> 
> 标签：ios, xcode, exception

我开发了一个简单的应用程序 TabViewController 应用程序，其中包含两个 UITableViewController 视图，最初在 iOS 6 模拟器中进行测试，并且一切正常。一个视图是选项列表，另一个是您可以添加/删除项目的列表。

我决定在 iOS 5.0 模拟器中进行测试，当我尝试从 UITableViewController 转到我的自定义视图时，我在其中填写了要添加的项目的详细信息，应用程序在控制台中抛出了一个没有错误的异常，只是很多混乱（对我来说）数字和字母等当您选择在 Debug Nav 中引发异常的线程时...（大约是以下数量的 5-10 倍）

```
libobjc.A.dylib`objc_exception_throw:
0xec3cde:  pushl  %ebp
0xec3cdf:  movl   %esp, %ebp
0xec3ce1:  pushl  %ebx
0xec3ce2:  pushl  %edi
0xec3ce3:  pushl  %esi
0xec3ce4:  subl   $2028, %esp
0xec3cea:  calll  0xec3cef                  ; objc_exception_throw + 17
0xec3cef:  popl   %edi
0xec3cf0:  movl   $16, (%esp)
0xec3cf7:  calll  0xed8840                  ; symbol stub for: __cxa_allocate_exception
... 
```

我的问题是为什么会这样？当然，如果我使用的是 iOS 6 的东西，它不会让我构建吗？我已经将所有可以找到的目标都更改为 iOS 5.0 而不是 iOS 6.0，现在我感到很困惑。

有没有人对我需要做什么或搜索什么有任何想法或任何指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T23:29:09.523

检查您的情节提要中是否未启用 AutoLayout。

![在此处输入图像描述](../Images/8bdf0809bc9b3b20638b9a21b0f5c624.png)

自动布局仅适用于 iOS6。

# drupal - 为什么 Drupal 在页面加载时会创建额外的未使用对象

> ID：13298768
> 
> 赞同：1
> 
> 时间：2012-11-08T22:14:29.697
> 
> 标签：drupal, drupal-7

我对 Drupal 7 目前正在做的事情有点困惑。每当我以管理员身份登录时，user.module 中的 UserController->attachLoad() 方法都会运行，然后从数据库中加载所有用户。我可以看到所有用户在初始登录时都被加载为 php 对象，加载这么多据我所知还不需要的东西似乎真的没有必要和浪费。任何关于如何阻止这种情况发生的想法将不胜感激。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T22:47:50.907

我认为正在发生的事情是您正在使用开发模块。此模块的功能之一是它创建了一个示例用户帐户列表，您可以切换到这些示例用户帐户，以便在不同的用户环境下测试站点。

如果您禁用了开发模块，您可能会看到 UserController->attachLoad() 仅调用一次，并且仅使用一个帐户（您的帐户）。

我可能会补充一点，这个主题和你的问题似乎并不相关。

# php - 在 symfony2 中为 Doctrine DBAL 配置设置 driverOptions 的正确方法

> ID：13298775
> 
> 赞同：6
> 
> 时间：2012-11-08T22:15:22.917
> 
> 标签：php, symfony, doctrine-orm, symfony-2.1

我已经在配置文件中设置了**driverOptions**，如教义 DBAL 文档中所述。

但这给出了一个错误

1/1 InvalidConfigurationException：“doctrine.dbal.connections.pdoDevCon”下无法识别的选项“driverOptions”

我的配置文件是

```
dbal:
  default_connection: pdoDevCon
  connections:
    pdoDevCon:
      driver:   %dev_database_driver%    # <
      host:     %dev_database_host%      # |
      port:     %dev_database_port%      # | Defined in
      user:     %dev_database_user%      # |
      password: %dev_database_password%  # <   
      charset:  UTF8
      driverOptions: {3: 2}
      mapping_types:
        enum: string
        set: string

orm:
    auto_generate_proxy_classes: %kernel.debug%
     pdoDevCon:
        connection: pdoDevCon
        mappings:
          AcmeDemoBundle: ~
          AcmeHelloBundle: ~ 
```

我使用**PDO::ATTR_ERRMODE 作为 3 PDO::ERRMODE_EXCEPTION 作为 2**，即使我使用字符串也不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T22:57:58.983

来自[http://symfony.com/doc/master/reference/configuration/doctrine.html#doctrine-dbal-configuration](http://symfony.com/doc/master/reference/configuration/doctrine.html#doctrine-dbal-configuration)

> DoctrineBundle 支持默认 Doctrine 驱动程序接受的所有参数，**转换为 Symfony 强制执行的 XML 或 YAML 命名标准**。有关更多信息，请参阅 Doctrine DBAL 文档。

symfony yml 配置文件中没有`driverOptions`，只是`options`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-19T15:54:02.440

我没有使用 Symfony，但我使用的是`Doctrine\DBAL\DriverManager::getConnection()`.

我不得不绕过`DriverManager`并做这首歌曲和舞蹈来指定连接超时（`ATTR_TIMEOUT`）：

```
function buildDbConn($config, $timeout) {
    $params = $config->toArray();
    $params['driverOptions'] = [
        PDO::ATTR_TIMEOUT => intval($timeout),
        PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION
    ];
    $driver = new Doctrine\DBAL\Driver\PDOMySql\Driver;
    return new Doctrine\DBAL\Connection($params, $driver);
} 
```

我总是需要一个 pdo_mysql 驱动程序，这可以配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-13T15:05:24.280

您可以从 yml 设置此选项。问题是您需要使用 const 值：

选项参数将被复制为驱动程序选项不要担心

整数是 2

选项 2：10

我为我工作。Symfony 3.4 和 4.2

# c# - 替换 If Else 唯一条件嵌套语句

> ID：13298777
> 
> 赞同：7
> 
> 时间：2012-11-08T22:15:32.557
> 
> 标签：c#, .net, if-statement

如果条件相同但条件不同，switch case 语句可以很好地替换嵌套的 if 语句。但是，如果那些嵌套的 if 语句都具有不同且独特的条件，那么有什么好的方法呢？我是否有任何替代选项来替换嵌套在彼此内部的十几个 if else 语句？

示例代码：

*   注意：我知道这是非常难以理解的——这就是重点。
*   注意：所有条件都是唯一的。

...

```
if (condition) {
    // do A
} else {                       
    if (condition) {
        // do B
    if (condition) {
        if (condition) {
            if (condition) {
                // do C
                if (condition) {
                    // do D
                    if (condition) {
                        // do E
                    } else {                                                   
                        if (condition) {
                            // do F
                        }
                    }
                }
            }

            if (condition) {
                // do G
                if (condition) {
                    // do H
                    if (condition) {
                        // do I
                    } else {
                        // do J
                    }
                }
            }
        }
    }
} 
```

​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T22:22:45.043

在这种情况下，最好的方法是将事物分割成适当命名的单独方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T22:39:18.783

在我看来，存在两种消除嵌套条件的主要方法。当我们在每个嵌套条件中只有一个条件时，第一个用于更特殊的情况，如下所示：

```
function A(){
    if (condition1){
        if (condition2){
            if (condition3){
                // do something
            }
        }
    }
} 
```

我们可以从相反的条件返回：

```
function A(){
    if (condition1 == false) return;
    if (condition2 == false) return;
    if (condition3 == false) return;  
    // do something 
} 
```

第二个是使用条件分解，可以被视为比第一个更通用。在我们有这样的条件结构的情况下，例如：

```
if (condition1)  
{
    // do this 1
}
else 
{                                                   
    if (condition2) 
    {
        // do this 2
    }                                                    
} 
```

我们可以为每个特定条件实现一个变量，如下所示：

```
bool Cond1 = condition1;
bool Cond2 = !condition1 && condition2;

if (Cond1) { //do this 1 }
if (Cond2) { //do this 2 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T22:45:03.437

@Tar 提出了一种看待它的方式。另一个可能是。

反转它。

```
if (myObject.HasThing1)
{
   if(myObject.HasThing2)
   {
      DoThing1();
   }
   else
   {
      DoThing2();
   }
}
else
{
   DoThing3();
} 
```

可能

```
DoThing1(myObject.HasThing1);
DoThing2(myObject.HasThing2);
DoThing3(myObject.HasThing3); 
```

因此，每个 Do 方法都会进行最少数量的测试，如果有任何失败，它什么也不做。

如果你想以几种方式打破顺序，你可以让它更聪明一点。

不知道它是否对您有用，但是委托测试条件通常足以成为一种看待事物的新方式，一些简化因素可能就像魔术一样出现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T04:08:15.873

当我看到代码时，我不得不检查这是 Stackoverflow 而不是 DailyWTF！

解决方案是改变架构并使用接口和多态来绕过所有条件。然而，这可能是一项艰巨的工作，超出了可接受的答案范围，所以**我将推荐另一种方式，您可以使用具有独特条件的 Switch 语句：**

```
[Flags]
public enum FilterFlagEnum
{
    None = 0,
    Condition1 = 1,
    Condition2 = 2,
    Condition3 = 4,
    Condition4 = 8, 
    Condition5 = 16,
    Condition6 = 32,
    Condition7 = 64 
}; 

public void foo(FilterFlagEnum filterFlags = 0)
{
        if ((filterFlags & FilterFlagEnum.Condition1) == FilterFlagEnum.Condition1)
        {
            //do this
        }
        if ((filterFlags & FilterFlagEnum.Condition2) == FilterFlagEnum.Condition2)
        {
            //do this
        }
}

foo(FilterFlagEnum.Condition1 | FilterFlagEnum.Condition2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T22:42:20.403

如果这确实是业务逻辑，那么语法就可以了。但我从未见过如此复杂的业务逻辑。画一个流程图，看看是否不能简化。

```
if (condition)  
{
    // do this
}
else 
{                                                   
    if (condition) 
    {
        // do this
    }                                                    
} 
```

可以替换为

```
if (condition)  
{
    // do this
}
else if (condition) 
{
    // do this                                                    
} 
```

但再次退后一步，审查设计。如果清理，需要的不仅仅是其他。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-05T15:34:39.487

我感觉到你的痛苦。

我的情况需要编写许多（>2000 个）功能测试，这些测试是客户为大型、昂贵的设备指定的。虽然这些测试中的大多数（> 95％）都很简单并且有一个直接的通过/失败检查，但数十个在与您的深度相似或更差的深度落入“多重嵌套，如果这样做，否则会做不同的事情”。

我想出的解决方案是在我的测试应用程序中托管 Windows Workflow。

所有复杂的测试都变成了我运行的工作流程，并将结果报告回我的测试应用程序。

客户很高兴，因为他们有能力：

1.  验证测试逻辑（对于非程序员来说很难查看深度嵌套的 if/else C# - 很容易查看图形流程图）
2.  以图形方式编辑测试
3.  添加新测试

托管 Windows 工作流（在 .NET 4/4.5 中）非常容易 - 尽管您可能需要一段时间才能了解工作流和代码之间的“通信” - 主要是因为有多种方法可以做到这一点。

祝你好运

# haskell - 使用 repa 计算图像直方图

> ID：13298778
> 
> 赞同：8
> 
> 时间：2012-11-08T22:15:32.477
> 
> 标签：haskell, repa

我正在从磁盘加载 RGB 图像`JuicyPixels-repa`。不幸的是，图像的数组表示是`Array F DIM3 Word8`内部维度是 RGB 像素。`repa`这与RGB 图像所在的现有图像处理算法有点不兼容`Array U DIM2 (Word8, Word8, Word8)`。

我想计算图像的 RGB 直方图，我正在搜索带有签名的函数：

```
type Hist = Array U DIM1 Int
histogram:: Array F DIM3  Word8 -> (Hist, Hist, Hist) 
```

如何折叠我的 3d 数组以获得每个颜色通道的 1d 数组？

编辑：

主要问题不是我无法为每个频道转换`DIM3`为`DIM2`（通过切片轻松完成）。问题是我必须迭代源图像`DIM2`，或者`DIM3`必须累积到不同**程度**`DIM1`的数组。所以我不能使用repa ，因为它会将维度减少一，但程度相同。`Shape` `(Z:.256)` **`foldS`**

 **我也尝试过，`traverse`但它迭代目标图像的范围，提供从源图像获取像素的函数，这将导致代码效率非常低，为每个颜色值计算相同的像素。

一个好方法是将`Vector`直方图类型作为累加器的简单折叠，但不幸的是我没有基于`U`（未装箱）或`V`（向量）的数组，我可以从中有效地获得`Vector`. 我有一个`Array F`（外来指针）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T07:40:10.443

好的，我找到了几分钟。下面，我介绍了四种解决方案，并使最糟糕的解决方案（中间两个，涉及 O(n) 数据转换）对您来说非常容易。

**让我们承认愚蠢的解决方案**

从显而易见的开始是合理的。您可以使用`Data.List.foldl`遍历行和列，从初始零数组（未经测试/部分代码如下）构建直方图：

```
foldl (\(histR, histG, histB) (row,col) ->
            let r = arr ! (Z:.row:.col:.0)
                g = arr ! (Z:.row:.col:.1)
                b = arr ! (Z:.row:.col:.2)
            in (incElem r histR, incElem g histG, incElem b histB)
         (zero,zero,zero)
         [ (row,col) | row <- [0..nrRow-1], col <- [0..nrCol-1] ]
 ...
 where (Z:.nrRow:.nrCol:._) = extent arr 
```

我不确定这会有多有效，但怀疑它会做太多的边界检查。切换到 unsafeIndex 应该是合理的，假设延迟的数组 ，`hist*`由于您选择实现`incElem`.

**您可以构建您想要的阵列**

使用`traverse`您实际上可以将 JP-Repa 样式数组转换为`DIM2`带有元素元组的数组：

```
main = do
    let arr = R.fromFunction (Z:.a:.b:.c) (\(Z:.i:.j:.k) -> i+j-k)
        a =4 :: Int
        b = 4 :: Int
        c= 4 :: Int
        new = R.traverse arr
                       (\(Z:.r:.c:._) -> Z:.r:.c) -- the extent
                       (\l idx -> (l (idx:.0)
                                  ,l (idx:.1)
                                  ,l (idx :. 2)))
    print (R.computeS new :: R.Array R.U DIM2 (Int,Int,Int)) 
```

您能否指出您谈到的使用这种格式的代码主体？修补 JP-Repa 以包含这种类型的功能会很简单。

**您可以构建您提到的未装箱矢量**

您提到一个简单的解决方案是折叠未装箱的向量，但遗憾的是 JP-repa 不提供未装箱的数组。幸运的是，转换很简单：

```
toUnboxed :: Img a -> VU.Vector Word8
toUnboxed = R.toUnboxed . R.computeUnboxedS . R.delay . imgData 
```

**我们可以修补 Repa**

这实际上只是一个问题，因为 Repa 没有我认为的正常`traverse`功能。Repa 的遍历更像是一个数组构造，它恰好为另一个数组提供了索引功能。我们希望以如下形式遍历：

```
newTraverse :: Array r sh e -> a -> (a -> sh -> e -> a) -> a 
```

但这实际上只是一个畸形的折叠。所以让我们重命名它并重新排序参数：

```
foldAllIdxS :: (sh -> a - > e -> a) -> a -> Array r sh e -> a 
```

这与（预先存在的）`foldAllS`操作形成鲜明对比：

```
foldAllS :: (a -> a -> a) -> a -> Array r sh a -> a 
```

注意我们的新折叠有两个关键特征。结果类型不需要匹配元素类型，所以我们可以从一个直方图元组开始。其次，我们的 fold 版本传递索引，它允许您选择要更新元组中的哪个直方图（如果有）。

**你可以懒洋洋地使用最新的 JuicyPixels-Repa**

要获取您喜欢的 Repa 数组格式，或获取未装箱的向量，您只需使用新上传的 JuicyPixels-Repa-0.6。

```
someImg <- readImage path :: IO (Either String (Img RGBA))
let img = either (error "Blah") id someImg
    uvec = toUnboxed img
    tupleArr = collapseColorChannel img 
```

现在您可以按照最初的需要折叠向量或直接使用元组数组。

我还在充实第一个非常幼稚的解决方案时进行了一次丑陋的尝试：

```
histograms :: Img a -> (Histogram, Histogram, Histogram, Histogram)
histograms (Img arr) =
    let (Z:.nrRow:.nrCol:._) = R.extent arr
        zero = R.fromFunction (Z:.256) (\_ -> 0 :: Word8)
        incElem idx x = RU.unsafeTraverse x id (\l i -> l i + if i==(Z:.fromIntegral idx) then 1 else 0)
    in Prelude.foldl (\(hR, hG, hB, hA) (row,col) ->
             let r = R.unsafeIndex arr (Z:.row:.col:.0)
                 g = R.unsafeIndex arr (Z:.row:.col:.1)
                 b = R.unsafeIndex arr (Z:.row:.col:.2)
                 a = R.unsafeIndex arr (Z:.row:.col:.3)
             in (incElem r hR, incElem g hG, incElem b hB, incElem a hA))
          (zero,zero,zero,zero)
          [ (row,col) | row <- [0..nrRow-1], col <- [0..nrCol-1] ] 
```

我太担心这段代码的性能（每个索引 3 次遍历......我一定很累）把它扔进 JP-Repa，但如果你发现它运行良好，请告诉我。**

# asp.net - CSS折叠/隐藏没有数据的div

> ID：13298785
> 
> 赞同：0
> 
> 时间：2012-11-08T22:15:51.947
> 
> 标签：asp.net, css

我正在尝试显示一个包含以下信息的地址：标题、部门、地址 1、地址 2、城镇/州/邮政编码和国家/地区（5 个单独的数据行）。问题是有时公司可能只有标题、地址 1 和城镇/州/邮编，而其他时候可能只有地址 2。这是在数据库记录请求服务器端确定的。因此，当我的某些标签为空白时，如何使我的输出看起来正确？ **我希望包含空跨度的 div 基本上被折叠/删除。** 我唯一的想法是如何使用 jquery 和选择器来查找所有具有空白跨度的 div（因为这实际上是一个 asp.net 标签），然后删除这些 div，但这似乎是一种糟糕的形式。有没有办法用css做到这一点？可能的代码类似于： $('span:empty:only-child').parent('div').remove();

**图片示例**（忽略我将修复的间距/缩进问题）

缺少部门、地址 2 和国家/地区

![缺少部门、地址 2 和国家/地区](../Images/b2f6886e92dd4bccb478c7e093dbcbb7.png)

所有可能的字段

![所有可能的字段](../Images/5a182f9df08d334a770c4022d919e1a4.png)

**html**

```
<asp:Label runat="server" ID="lblBillingAddressHeader" CssClass="lblBillingAddressHeader" Text="Billing Address:" />
<div style="position:relative; top:150px; left: 113px;">
    <div class="test">
      <asp:Label runat="server" ID="lblBillingDivision" CssClass="lblBillingShippingDivisionFont" />
    </div>
    <div class="test">
      <asp:Label runat="server" ID="lblBillingAddress" CssClass="lblBillingShippingFont" />
    </div>
    <div class="test">
      <asp:Label runat="server" ID="lblBillingAddress2" CssClass="lblBillingShippingFont" />
    </div>
    <div class="test">
      <asp:Label runat="server" ID="lblBillingAddress3" CssClass="lblBillingShippingFont" />
    </div>
    <div class="test">
      <asp:Label runat="server" ID="lblBillingAddress4" CssClass="lblBillingShippingFont" />
    </div>
</div> 
```

**CSS**

```
.test {
    position: relative;
    top: 0px;
    left: 0px;
    height: 12px;
    width: 300px;
}

.lblBillingShippingDivisionFont {
    font-size: small;
    font-weight: bold;
}

.lblBillingShippingFont {
    font-size: 10.6px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:47:28.060

jQuery代码：

```
$(document).ready(function(){
        $('div').each(function() {
           if ($(this).find('span').text() == '') {
             $(this).hide();
           }
        });
      }); 
```

[http://jsbin.com/axaxut/1/edit](http://jsbin.com/axaxut/1/edit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T22:52:52.133

你能重新构建你的 HTML 吗？

**HTML**

```
<div style="position:relative; top:150px; left: 113px;">
  <asp:Label runat="server" ID="lblBillingDivision" CssClass="lblBillingShippingDivisionFont" />
  <asp:Label runat="server" ID="lblBillingAddress" CssClass="lblBillingShippingFont" />
  <asp:Label runat="server" ID="lblBillingAddress2" CssClass="lblBillingShippingFont" />
  <asp:Label runat="server" ID="lblBillingAddress3" CssClass="lblBillingShippingFont" />
  <asp:Label runat="server" ID="lblBillingAddress4" CssClass="lblBillingShippingFont" />
</div> 
```

**CSS**

```
.lblBillingShippingDivisionFont,
.lblBillingShippingFont {
    position: relative;
    top: 0px;
    left: 0px;
    width: 300px;
    display: block;
}

.lblBillingShippingDivisionFont {
    font-size: small;
    font-weight: bold;
}

.lblBillingShippingFont {
    font-size: 10.6px;
} 
```

[jsFiddle http://jsfiddle.net/LkFSV/](http://jsfiddle.net/LkFSV/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T22:43:31.390

不幸的是，CSS 中没有父选择器。如果有，您可以执行以下操作：

```
span:empty:parent { display: none; } 
```

您最好的选择是您已经拥有或在服务器端使用的 jQuery，我个人认为服务器端是您的最佳选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T22:47:59.933

由于这是 asp.net 代码，因此您可以从服务器端代码检查 address2 是否为空并简单地隐藏控件。

```
if(string.IsNullOrEmpty(lblBillingAddress2.Text))
    lblBillingAddress2.Visible = false; 
```

# .net - 需要在 Classic ASP 和 .Net 混合应用程序中将两个上传的图像即时组合成一个更大的图像

> ID：13298786
> 
> 赞同：0
> 
> 时间：2012-11-08T22:15:52.727
> 
> 标签：.net, vb.net, image-processing, asp-classic

我有一个在 IIS 7.5 (Windows Server 2008r2) 上运行的经典 ASP 应用程序。我需要的其实很简单：

(1) 用户上传图片。

(2) 首先我想复制他们上传的图片，所以我有一个“原始”版本和一个“我们可以玩的版本”。下面的所有内容都将在“我们可以玩的版本”（新的/复制的版本）上运行。

(3) 将图像大小调整为 450w x 253h。

(4) 我想创建一个与旧图像宽度相同但高两倍的新图像（450w x 506h）。然后我想复制旧图像，将它的一个版本放在完全相同的副本之上；从而使新图像比原始图像高一倍。有点像镜像。

如果有一种方法可以在没有商业组件的情况下执行此操作，例如使用 .Net 并且我可以从我的 Classic ASP 调用 .Net 页面/功能，则首选。我的经验/知识是使用 vbScript (ASP)，几乎没有任何使用 .Net 中的 VB 的经验。

这是我为解释我在做 [什么而制作的图像：我正在寻找动态构建的图像 http://www.casemodo.com/images/image_build_on_the_fly.jpg](http://www.casemodo.com/images/image_build_on_the_fly.jpg)

在这个网站上，我看到有人提供了一种将图像并排堆叠的解决方案，而不是像我想要的那样在另一个之上堆叠。该解决方案也是用 C# 编写的，我对此的经验为零。这是他们写的：

位图 bitmap = new Bitmap(image1.Width + image2.Width, Math.Max(image1.Height, image2.Height)); 使用 (图形 g = Graphics.FromImage(bitmap)) { g.DrawImage(image1, 0, 0); g.DrawImage(image2, image1.Width, 0); }

我需要有人与我一起达到超高水平，并向我展示这将如何位于 aspx 文件中，甚至可能我将如何从我的经典 ASP 页面之一中调用它。我知道我要求很多。我只是不知道如何以另一种方式完成它，除了可能将我没有的钱花在可以从 Classic ASP 调用的商业 ActiveX 组件上。

感谢您提供的任何帮助或指导！斯科特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:37:37.147

如您所知，这是很多东西的组合！如果有人为你写，那将是令人惊讶的。我没有时间。

顺便说一句，商业组件同样难以交互，我会挑战你找到一个来做这个晦涩的事情;-)

### 结合语言

使用您的功能制作一个 .NET“类库”（dll 或程序集），*而不是*ASP.NET 程序。您可以直接从经典的 ASP 调用它...
像这样： http: [//support.microsoft.com/kb/817248](http://support.microsoft.com/kb/817248)
或者这样：[http](http://forums.asp.net/t/1442595.aspx/1)
://forums.asp.net/t/1442595.aspx/1 底线是，您在 .NET 项目选项“暴露给 Com/ActiveX”中检查一些内容，然后经典的 ASP 就会看到它。

### 将图像传入和传出。

最简单的方法是让调用者 ASP 生成一个唯一的临时文件名，将该文件保存到文件系统中，然后将该名称传递给 .NET。我将使用该方法提供伪代码。

您也可以将内容作为大字符串传递，它可以使用 System.Text.Encoding 在 .NET 中进行转换。最安全的是 base64，如果你可以在 ASP 中往返的话；字符串可能会处理 utf8，但如果您从 .NET 的“新位图”行中得到“通用 GDI+ 错误”，则数据已损坏并且转换出错。首先尝试文件方法。

请注意，在我给出的文件方法示例中，您将用内存流替换文件名。其中，您必须在字节数组之间进行转换。谷歌的一些东西，但如果你能找出 ASP 经典，你可以用我给你的搜索词找出来。

### 完全未经测试的 VB 代码来做图形

如果有错别字，你将不得不依靠 Intellisense、帮助和谷歌。

```
Public Sub DoubleImage(FileIn as string, FileOut as string)
    dim bmpIn as new Bitmap(FileIn)
    dim bmpOut as new bitmap(bmpin.width,bmpin.height*2)
    using g as new graphics.FromImage(bmpOut)
        g.drawimage(bmpin,0,0,bmpin.width,bmpin.height)
        g.drawimage(bmpin,0,bmpin.height,bmpin.width,bmpin.height)
    end using
    bmpout.save(FileOut)
end sub 
```

将其放入类库项目中，转到属性并将其公开给 COM。从您的 ASP 中引用它。

PS 看 GDI+FAQ 学习如何 grok .NET 图形：[https ://web.archive.org/web/20141230145656/http://bobpowell.net/faqmain.aspx](https://web.archive.org/web/20141230145656/http://bobpowell.net/faqmain.aspx)

# python - 使用scrapy爬虫进行虚假地理定位

> ID：13298788
> 
> 赞同：1
> 
> 时间：2012-11-08T22:16:03.240
> 
> 标签：python, web-crawler, scrapy

我正在尝试根据发送请求的 IP 的地理位置来抓取提供不同页面的网站。我正在使用位于美国的亚马逊 EC2（这意味着它提供了一个面向美国的页面），但我想要将在印度提供的页面。scrapy 是否提供了一种以某种方式解决此问题的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:53:36.503

如果您正在抓取的站点进行基于 IP 的检测，那么您唯一的选择就是以某种方式更改您的 IP。这意味着要么使用不同的服务器（我不相信 EC2 在印度运行），要么代理您的服务器请求。也许您可以找到印度代理服务？

# javascript - 我可以使用 input type="submit" 以外的东西来发送表单吗？

> ID：13298789
> 
> 赞同：0
> 
> 时间：2012-11-08T22:16:03.003
> 
> 标签：javascript, jquery, forms

这是我的小表单的 html 代码。我的“提交”按钮的样式只能是`<a>`. 我仍然可以将此表格提交到电子邮件吗？如何将此发送到分配给它的电子邮件？jQuery 还是 Javascript？

例如我可以使用这个：

```
<a class="btn send" href="#send">Send</a> 
```

与`input type="submit"`？

```
<form action="mailto:me@myemail.com">
     <input name="name" type="text" value="" placeholder="Name" required/><br>
     <input name="email" type="email" value="" placeholder="you@yourmail.com" required/><br>
     <textarea class="message" maxlength="200" placeholder="We can answer your questions." required><?php echo $_POST[message]; ?></textarea><br>
     <a class="btn send" href="#send"><img src="img/send.png" /></a>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:17:21.817

您可以使用 JavaScript 动态提交表单：

```
$(".btn.send").click(function() {
    $(this).closest("form").submit();
    return false;
}); 
```

或者由于您使用图像，那么简单如何`<input type="image">`：

```
<input type="image" src="img/send.png"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T22:17:13.783

您可以使用

```
<button type=submit>Submit Me!</button> 
```

“图像”按钮也提交表单。

现在，也就是说，您不能直接从 HTML 表单发起电子邮件事务。您能做的最好的事情就是显示用户的邮件，但您几乎无法控制它的工作方式/是否有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T22:19:23.257

甚至更好...

```
$('#AnyElement').click(function() {
 $('#formID').submit();
}); 
```

# c# - 如何对 MVC ASP.Net 返回正确的视图进行单元测试？

> ID：13298792
> 
> 赞同：10
> 
> 时间：2012-11-08T22:16:13.270
> 
> 标签：c#, asp.net-mvc, unit-testing, tdd

我是 MVC、单元测试、模拟和 TDD 的新手。我正在尝试尽可能地遵循最佳实践。

我已经为控制器编写了一个单元测试，如果返回正确的视图，我在测试时遇到了麻烦。如果我使用 ViewResult.ViewName 如果我没有在控制器中指定视图名称，则测试总是失败。如果我在控制器中指定 ViewName 测试总是通过，即使视图不存在。

我也尝试过测试 Response.Status 代码，但这总是返回 200（代码取自 Darin Dimitrov 对[MVC3 unit testing response code](https://stackoverflow.com/questions/9871700/mvc3-unit-testing-response-code)的回答）。我的目标是在创建新视图时进行经典的红色、绿色重构，并在上线时避免 404 和 System.InvalidOperationException 错误，这可能吗？

代码如下。

```
public class BugStatusController : Controller
{
    public ActionResult Index(){
        return View(); // Test always fails as view name isn’t specified even if the correct view is returned.
    }

    public ActionResult Create(){
        return View("Create"); // Test always passes as view name is specified even if the view doesn’t exist.
    }
}

[TestFixture]
public class BugStatusTests
{    
    private ViewResult GetViewResult(Controller controller, string controllerMethodName){
        Type type = controller.GetType();
        ConstructorInfo constructor = type.GetConstructor(Type.EmptyTypes);

        object instance = constructor.Invoke(new object[] {});
        MethodInfo[] methods = type.GetMethods();

        MethodInfo methodInfo = (from method in methods
                                where method.Name == controllerMethodName
                                                    && method.GetParameters().Count() == 0
                                select method).FirstOrDefault();

        Assert.IsNotNull(methodInfo, "The controller {0} has no method called {1}", type.Name, controllerMethodName);

        ViewResult result = methodInfo.Invoke(instance, new object[] {}) as ViewResult;

        Assert.IsNotNull(result, "The ViewResult is null, controller: {0}, view: {1}", type.Name, controllerMethodName);

        return result;
    }

    [Test]
    [TestCase("Index", "Index")]
    [TestCase("Create", "Create")]
    public void TestExpectedViewIsReturned(string expectedViewName, string controllerMethodName){
        ViewResult result = GetViewResult(new BugStatusController(), controllerMethodName);

        Assert.AreEqual(expectedViewName, result.ViewName, "Unexpected view returned, controller: {0}, view: {1}", CONTROLLER_NAME, expectedViewName);
    }

    [Test]
    [TestCase("Index", "Index")]
    [TestCase("Create", "Create")]
    public void TestExpectedStatusCodeIsReturned(string expectedViewName, string controllerMethodName)
    {
        var controller = new BugStatusController();
        var request = new HttpRequest("", "http://localhost:58687/", "");
        var response = new HttpResponse(TextWriter.Null);
        var httpContext = new HttpContextWrapper(new HttpContext(request, response));
        controller.ControllerContext = new ControllerContext(httpContext, new RouteData(), controller);

        ActionResult result = GetViewResult(controller, controllerMethodName);

        Assert.AreEqual(200, response.StatusCode, "Failed to load " + expectedViewName + " Error: "  + response.StatusDescription);
    }
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-08T23:41:42.293

> 我是 MVC、单元测试、模拟和 TDD 的新手。我正在尝试尽可能地遵循最佳实践。

我很高兴越来越多的开发人员开始为他们的代码编写单元测试，所以恭喜你走在了正确的道路上。

> 如果我没有在控制器中指定视图名称。如果我在控制器中指定 ViewName 测试总是通过，即使视图不存在。

当您*没有在`View`方法中指定视图名称时，这会指示 MVC 引擎**呈现默认视图***，例如

```
public ActionResult Index() { return View(); } 
```

上面的代码将返回一个空视图名称，这意味着呈现的视图将是操作的名称，在这种情况下它将是**Index**。

所以如果你想**测试一个动作返回默认视图，你必须测试返回的视图名称是否为空**

> 即使视图不存在，测试也始终通过，因为指定了视图名称。

为了解释这里发生了什么，我将首先解释动作过滤器是如何工作的。

基本上有四种类型的过滤器

*   异常过滤器
*   授权过滤器
*   动作过滤器
*   结果过滤器

我将专注于动作和结果过滤器

**动作过滤器是用`IActionFilter`接口定义的**

```
public interface IActionFilter
{
    // Summary:
    //     Called after the action method executes.
    //
    void OnActionExecuted(ActionExecutedContext filterContext);
    //
    // Summary:
    //     Called before an action method executes.
    //
    void OnActionExecuting(ActionExecutingContext filterContext);
} 
```

**结果过滤器使用`IResultFilter`接口定义**

```
public interface IResultFilter
{
    // Summary:
    //     Called after an action result executes.
    //
    void OnResultExecuted(ResultExecutedContext filterContext);
    //
    // Summary:
    //     Called before an action result executes.
    //
    void OnResultExecuting(ResultExecutingContext filterContext);
} 
```

当执行控制器的操作时，以下过滤器将按此特定顺序执行：

```
IActionFilter.OnActionExecuting
IActionFilter.OnActionExecuted
IResultFilter.OnResultExecuting
IResultFilter.OnResultExecuted 
```

当一个动作被执行时，另一个组件**负责处理你`ActionResult`**从你的动作返回并**呈现正确的 HTML 以将其发送回客户端**，这是*处理结果的时候*

这种清晰的关注点分离是允许我们对控制器的动作进行单元测试的美丽和关键，否则，如果它们是耦合的，**我们将无法对动作的结果进行孤立的单元测试**

现在，在执行操作后（正在处理结果时）`RazorViewEngine`尝试查找视图**，这就是即使物理视图不存在，您的测试也会返回 true 的原因**。这是预期的行为，请记住**您需要单独测试控制器的操作**。只要您**在单元测试中断言**呈现了预期的视图，您就完成了单元测试。

如果您想断言物理视图存在，那么您将谈论一些特定的集成测试：功能测试或用户验收测试 - 这些测试需要使用浏览器实例化您的应用程序，**它们绝不是单元测试**

现在您可以手动编写单元测试（如果您正在进入单元测试世界，这是一个很好的练习），但是，我想向您推荐几个可以帮助您编写单元的 MVC 测试框架测试非常快

*   [https://github.com/robdmoore/FluentMVCTesting](https://github.com/robdmoore/FluentMVCTesting)

*   [http://mvccontrib.codeplex.com/wikipage?title=TestHelper&referringTitle=Documentation](http://mvccontrib.codeplex.com/wikipage?title=TestHelper&referringTitle=Documentation)

关于这些框架的一些个人评论

根据我的经验，MVC Contrib 具有比 Fluent MVC Testing 更多的功能，但是，由于我使用的是 MVC 4，我无法让它在 Visual Studio 2012 中运行，所以我将两者结合使用（这是一个肮脏的解决方法，直到我找到更好的方法）

这就是我所做的：

```
var testControllerBuilder = new TestControllerBuilder(); // this is from MVC Contrib
var controller = new MoviesController(
    this.GetMock<IMovieQueryManager>().Object);

testControllerBuilder.InitializeController(controller); // this allows me to use the Session, Request and Response objects as mock objects, again this is provided by the MVC Contrib framework

// I should be able to call something like this but this is not working due to some problems with DLL versions (hell DLL's) between MVC Controb, Moq and MVC itself
// testControllerBuilder.CreateController<MoviesController>();

controller.WithCallTo(x => x.Index(string.Empty)).ShouldRenderDefaultView(); // this is using Fluent MVC Testing

// again instead of the above line I could use the MVC Contrib if it were working....
// var res = sut.Index(string.Empty);
// res.AssertViewRendered().ForView("Index"); 
```

我希望这会有所帮助 =) 编码快乐！

# c++ - C i2c芯片读取MCP9800突然开始失败

> ID：13298793
> 
> 赞同：2
> 
> 时间：2012-11-08T22:16:18.640
> 
> 标签：c++, c, linux, filter, i2c

我有一些代码：

```
#define AMB_LSB 0.0625

void Ambient::read()
{
    uint32_t raw; 
    float filtered;

    uint8_t bytes = 2;
    uint8_t buf[bytes];

    if(i2c_smbus_read_i2c_block_data(i2c_bus_address, A_TEMP_REG, bytes, buf) < 0)
        printf("AMB Block Read Failed\n");

    uint32_t va = buf[0];
    uint32_t vb = buf[1];

    uint32_t result = ((va<<8)+vb);

    // 12-bit code
    raw = result >> 4; 

    filtered = filter.execfilter( raw );
    temperature = filtered * AMB_LSB;  << CALCULATION 

    printf("AMB buffers %d %d -> result %d -> raw %d -> filtered %d -> amb C %f\n",va, vb, result, raw, filtered, temperature);
} 
```

它是通过 i2c 从 MCP9800 读取信息的代码。很抱歉包含它，但也许它与它有关。

该函数在大约十几个周期内运行良好，直到它突然开始出现不正确的值。但有一些奇怪的差异。

**1.**如果计算如下

```
temperature = filtered * AMB_LSB; 
```

我得到这个输出：

```
temperature = ((float) filtered * (float) AMB_LSB); 
```

在职的

```
AMB buffers 28 240 -> result 7408 -> raw 463 -> filtered 463 -> amb C 28.937500 
AMB buffers 28 240 -> result 7408 -> raw 463 -> filtered 463 -> amb C 28.937500 
AMB buffers 28 240 -> result 7408 -> raw 463 -> filtered 1024 -> amb C 64.000000 
```

失败

```
AMB buffers 29 0 -> result 7424 -> raw 464 -> filtered -**2147483648** -> amb C -134217728.000000 
AMB buffers 29 0 -> result 7424 -> raw 464 -> filtered **2147483647** -> amb C 134217728.000000
AMB buffers 29 0 -> result 7424 -> raw 464 -> filtered -**2147483648** -> amb C -134217728.000000 
```

所以一旦它开始失败，我可以看到过滤值的输出不正确。

**2.**如果计算是：

```
temperature = raw * AMB_LSB; 
```

所以根本不使用过滤，输出是这样的：

在职的

```
AMB buffers 29 48 -> result 7472 -> raw 467 -> filtered 0 -> amb C 29.187500 
AMB buffers 29 48 -> result 7472 -> raw 467 -> filtered 2147483647 -> amb C 29.187500
AMB buffers 29 64 -> result 7488 -> raw 468 -> filtered 468 -> amb C 29.250000 
```

失败

```
AMB buffers **255 130** -> result **65410** -> raw **4088** -> filtered 2147483647 -> amb C 255.500000 
AMB buffers **255 130** -> result **65410** -> raw **4088** -> filtered -2147483648 -> amb C 255.500000 
AMB buffers **255 130** -> result **65410** -> raw **4088** -> filtered 2147483647 -> amb C 255.500000 
```

有关不正确的输出，请参见带星号的数字。由于某种原因，当您不使用过滤值时，其他数字也开始不正确！一直回到我从 i2c 芯片中取出的字节。

所以起初我看到过滤可能无法正常工作。但是删除它似乎也会使原始未过滤值不正确。execFilter() 所做的只是一些平均，以防止大的随机变化。

此外，我还通过使用 i2cget 的 CLI 编写了一个脚本，它的返回值非常一致。没有崩溃或意外的值。

为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:21:56.420

听起来像是硬件问题。您的许多值都是 0x7FFFFFFF，例如 SDA 线由上拉电阻控制。如果 SDA 线路上的噪声导致虚假的 I2C 停止条件，就会发生这种情况——设备会立即将其输出置于三态，而在其余的传输过程中，您只会得到高位。

建议在 SCL 和 SDA 线路上使用 RC 低通滤波器，以减慢边缘并阻止高频噪声，有助于防止此类通信错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:37:12.043

它最终是我的应用程序中另一个类的内存损坏。

[这里](https://stackoverflow.com/questions/13310496/i2c-smbus-filter-function-corrupting-variables)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T10:32:47.507

检查调用的返回值`i2c_smbus_read_i2c_block_data()`，而不仅仅是它是否为负。

我敢打赌，当您传输失败时它会返回 0 或 1。请记住，实际功能取决于适配器；如果它不返回错误，我永远不会假设它完全成功，因为它被记录为返回字节数。

# php - PSR-1 2.3 副作用规则

> ID：13298795
> 
> 赞同：23
> 
> 时间：2012-11-08T22:16:26.850
> 
> 标签：php, coding-style, side-effects

我有一个关于 PHP 基本编码标准 PSR1 的问题。PSR 1 规则 2.3 规定：

> ## 规则 2.3 副作用
> 
> 一个文件应该声明新的符号（类、函数、常量
> 等）并且不会引起其他副作用，或者它应该执行具有
> 副作用的逻辑，但不应该两者都做。
> 
> 短语“副作用”是指执行与
> 声明类、函数、常量等没有直接关系的逻辑，*仅来自包含文件*。
> 
> “副作用”包括但不限于：生成输出、显式
> 使用 'require' 或 'include'、连接到外部服务、修改 ini
> 设置、发出错误或异常、修改全局或静态变量、
> 读取或写入一个文件，等等。

有人可以给我一个支持使用此规则的论据吗？或者，解释这条规则的好处，以及为什么它很重要或实施的好主意。这将帮助我支持 PSR 1 的全面实施并提出一个很好的案例。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-08T22:30:34.573

这个想法是当一个类被自动加载时，应用程序的状态不应该改变。任何修改状态的代码（实际执行的代码）都应该在不同的文件集中。

这使其可预测并迫使您将逻辑保留在类方法中，并且是隐式的。

请记住，存在编码标准，因此人们以类似的风格进行编码。采用编码标准的好处是您的代码库是自洽的，并且与遵循规则的其他项目一致。

PSR-1 在很大程度上遵循了每个人已经在做的事情。如果您觉得需要在定义类的同一位置执行逻辑，则很可能有更好的位置或方法。

最后..不要为了起见而采用 PSR-1。如果你有正当理由在某些地方不遵守规则，那就打破规则。它们不是法律。常识至高无上。

资料来源：我是该文件的贡献者之一。

# node.js - Jade模板如何在同级标签后添加文字

> ID：13298797
> 
> 赞同：19
> 
> 时间：2012-11-08T22:16:33.897
> 
> 标签：node.js, pug

我试图让它在玉模板中工作：

html:

```
<li><i class="icon-comment"></i> 5</li> 
```

玉：

```
li:i.icon-comment 5 
```

ofcource 5 现在嵌套在 i 标签而不是 li 下。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-08T22:20:58.173

在我的模板中，我这样做：

```
li
  i.icon-comment
  |  5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-22T12:11:14.020

有很多方法，比如：

1.  就像与大卫分享的那样`|`

```
li
  i.icon-comment
  |  5 
```

2.  将其添加到单行中：

```
li #[i.icon-comment] 5 
```

# c# - C#：排序后如何选择列表视图中的顶部项目

> ID：13298805
> 
> 赞同：5
> 
> 时间：2012-11-08T22:17:03.410
> 
> 标签：c#, .net, winforms

我正在用我的数据库中的结果填充我的 System.Windows.Forms.ListView，如下所示：

```
foreach (DataRow row in theTable.Rows)
{
    ...build item from row..

    myListView.Items.Add(item);
} 
```

然后我想以与从数据库返回的行不同的顺序对列表视图进行排序，所以我打电话

```
myListView.Sort(); 
```

但是当我想去选择列表视图中的顶部项目时，它不起作用，它选择了顶部项目以外的东西：

```
myListView.Items[0].Selected = true; 
```

这是有道理的，因为 Items 集合是按照在 foreach 循环中迭代的表中的行的顺序添加的。

使用 myListView.TopItem.Seleted = true 也不起作用。

那么我如何在排序后选择列表视图中最顶层的项目呢？

感谢您的任何回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T22:47:40.433

您确定当前选择了列表视图吗？如果它没有被选中，您将看不到被选中的项目。

以下代码似乎正在工作：

```
 private void Populate(object sender, EventArgs e)
    {   
        listView1.Items.Add("D");
        listView1.Items.Add("B");
        listView1.Items.Add("A");
        listView1.Items.Add("C");
    }

    private void SelectFirst(object sender, EventArgs e)
    {
        listView1.Items[0].Selected = true;
        listView1.Select();
    }

    private void SortAndSelect(object sender, EventArgs e)
    {
        listView1.Sorting = SortOrder.Ascending;
        listView1.Sort();

        listView1.Items[0].Selected = true;
        listView1.Select();
    } 
```

注意 listView1.Select()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T22:49:29.440

您可能已将 HideSelection 设置为 true。让它假，然后尝试。

```
myListView.HideSelection = false; 
```

此外，列表视图可以有一个选定的项目，但不关注其他项目。所以最好同时设置焦点和选择：

```
if (myListView.Items.Count > 0)
{
    myListView.Items[0].Selected = true;
    myListView.Items[0].Focused = true;
} 
```

如果这不起作用，您可以将焦点设置到列表视图本身，以查看选择是否落在正确的项目上。

# jquery-ui - jQuery UI 可排序网格，单元格垂直跨越

> ID：13298806
> 
> 赞同：3
> 
> 时间：2012-11-08T22:17:07.490
> 
> 标签：jquery-ui, drag-and-drop, grid, jquery-ui-sortable

这是现有可排序[http://jsfiddle.net/bcAH2/5的链接](http://jsfiddle.net/bcAH2/5)

只是复制代码，

```
 <ul id="sortable">
   <li class="ui-state-default">1</li>
   <li class="ui-state-default">2</li>
   <li class="ui-state-default">3</li>
   <li class="ui-state-default four">4</li>
   <li class="ui-state-default">5</li>
   <li class="ui-state-default">6</li>
   <li class="ui-state-default">7</li>
   <li class="ui-state-default">8</li>
   <li class="ui-state-default">9</li>
   <li class="ui-state-default">10</li>
   ...
</ul> 
```

​ 脚本

```
$(function() {
   $( "#sortable" ).sortable();
   $( "#sortable" ).disableSelection();
   $("#sortable .four").css("height","190px");
}); 
```

​</p>

我想要实现的是用 5 6 7 8 之类的单元格填充单元格 1 2 3 下方的空间......通过拖放不可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T12:52:13.827

[有一个名为gridster](http://gridster.net/)的 jQuery 插件可以做你想做的事情（参见首页的演示）。一个更简单但不太灵活的替代方案，如[本答案](https://stackoverflow.com/a/13191031/520779)中更详细说明的那样，是创建几列并使每一列可排序，将它们连接起来以允许从一列拖动到另一列。这是一个接近你[的例子，但没有一些警告：](http://jsfiddle.net/UhTt7/1/)

*   您可以使用更大的瓷砖`height`，但不能使用更大的瓷砖，而`width`不会弄乱布局（gridster 没有这个限制）；
*   在一列中的两个图块之间不能有“空格”（gridster 对此的限制较少）；
*   如果您从一列中删除所有图块，它将消失（除非您将其设置为具有固定宽度，有或没有内容；gridster 没有此限制）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T00:12:42.777

这里的问题不在于拖放，而在于浮动元素的流动。

“四”之后的所有元素都将与其对齐，并且由于它更高 - 它需要更多空间。所以第二排“四”前面的空格其实并不是“格子”的部分。

实际上，这里没有网格，因为您使用的是浮动元素。

希望这可以帮助您理解为什么不能使用当前的样式和脚本来实现它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T18:57:25.473

我发现了这个优雅的插件， [ShapeShift](http://mcpants.github.com/jquery.shapeshift/)，它做得很好

gridster 还有另一个分叉版本，值得在这里分享，[gridster.js](https://github.com/dustmoo/gridster.js)

# excel - 在excel中搜索文本

> ID：13298815
> 
> 赞同：0
> 
> 时间：2012-11-08T22:17:37.650
> 
> 标签：excel

我想计算特定文本字符串在 excel 中的单元格范围内出现的次数。有些单元格只包含一个单词，而其他单元格包含多个单词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:25:02.473

使用 countif 函数 -------------->`=COUNTIF(range,criteria)`

您将文本字符串作为标准传递，并将其放在引号中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:29:13.833

A1:A3：带有文本字符串的单元格
C1：搜索的单词

我们可以使用数组公式（公式窗口中的 Ctrl-Shift-Enter，Excel 自己插入大括号）：

```
 ={(SUM(LEN(A1:A3))-SUM(LEN(SUBSTITUTE(A1:A3,$C$1,""))))/LEN($C$1)} 
```

搜索到的单词从初始字符串集中删除，该字符串缩短了 n*length。

# sql-server-2008 - SQL SERVER如何转义特殊字符

> ID：13298818
> 
> 赞同：1
> 
> 时间：2012-11-08T22:17:47.983
> 
> 标签：sql-server-2008

我有一个存在于链接服务器上的表，它有一个名为 name 的字段，我想在该字段上搜索一个名为 Macy's 的字符串。我将其作为动态 SQL 执行：-

```
declare @Sql nvarchar(2000)
declare @searchName nvarchar(255)

SET @searchName = N'macy''s'
SET @sql = 'SELECT * from crm_opportunity o where o.NAME LIKE ''% ' + @searchName + '%'' ESCAPE '''''' '
exec (@sql). 
```

换句话说，我试图逃避单引号。我收到错误消息 102，级别 15，状态 1，第 1 行 's' 附近的语法不正确。

任何想法和建议！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T22:22:42.017

而不是使用`EXEC`，使用[`sp_executesql`](http://msdn.microsoft.com/en-us/library/aa933299%28v=sql.80%29.aspx)和参数化您的查询：

```
execute sp_executesql 
    N'SELECT * from crm_opportunity o where o.NAME LIKE ''%'' +  @searchName + ''%''',
    N'@searchName  nvarchar(255)',
    @searchName = N'macy''s' 
```

这不仅有助于避免混淆引号转义，而且还可以保护您免受 Sql Injection 攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-11T06:30:57.093

双引号会转义字符，因此您可以在字符串值中使用它。

```
exec('select *  from [dbo].[UsersTbl] where and  UserType = ''CLT'' ') 
```

# jquery - 将富文本加载到通过 ajax 加载的 innerHTML

> ID：13298820
> 
> 赞同：1
> 
> 时间：2012-11-08T22:18:13.960
> 
> 标签：jquery, ajax

我有 2 个 div：主 div 和辅助，这是在单击主 div 中的链接时加载的 innerHTML 页面。在二级 div 中是通过 python Django 插入的注释区域。对于该评论区，我正在尝试应用富文本 jquery 插件。我知道在使用 ajax 时，innerHTML 页面中的脚本被剥离，只加载内容。我尝试在主 div 中引用插件，但它在加载 ajax 页面之前触发，因此富文本仍然没有应用。有没有办法在加载页面后触发插件？或者解决这个问题的最佳方法是什么？我可以使用 onreadystatechange 吗？

主页：

```
<div class="content">
    <div class="main">
                <!-- bunch of content here -->
            </div>
    <div class="main">
                <!-- loads another HTML page -->
            </div> 
```

我试图应用富文本的辅助页面表单字段（在单独的 HTML 页面上）：

```
<p>{{ form.as_p }}</p> 
```

Javascript加载函数：

```
var url;
$('.linkQuestion').on('click', 'a', function(ev) {
    url = $(this).attr('href');
    $('.answers').load(url, function(){
        $.getScript('https://s3.amazonaws.com/javascript/richTextEditor.js', function() {
            bkLib.onDomLoaded(function() { nicEditors.allTextAreas() }); 
        });

    }); 
return false;
}); 
```

调用插件：

```
 <script type="text/javascript" src="{{ STATIC_URL }}js/richTextEditor.js"></script>
 <script type="text/javascript">
    bkLib.onDomLoaded(function() { nicEditors.allTextAreas() });
 </script> 
```

我知道已经问过很多类似的问题，我查看了所有这些问题，但我仍然无法让它发挥作用。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:19:28.350

在 ajax 请求完成后使用回调并应用插件。

```
$('.secondary').load(url, function(){
    // call your plugin here on the content. 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:20:43.743

你能做这样的事情吗？

```
$(document).ready(function() {
    var url;
    $('.main a').on('click', function() {
        url = $(this).attr('href');

        $.get(url, function(result) {
            $('.secondary').html(result);
        }

        return false;
    });
}); 
```

但是，您需要一个带有 class = "secondary" 的元素来将内容放入

```
<p class="secondary"></p> 
```

# actionscript-3 - AS3 中的特定位图渲染优化？

> ID：13298822
> 
> 赞同：0
> 
> 时间：2012-11-08T22:18:16.567
> 
> 标签：actionscript-3, optimization, bitmap, rendering, 2d

我对潜在的 AS3 渲染优化有一些疑问，特别是关于移动设备上的离散位图数据/对象。我发现关于其中大部分内容的明确信息令人惊讶地少，所以我在这里问专家。

位图缓存。据说使用 cacheAsBitmap=true 将加速未进行非平移转换的对象的渲染。在移动设备上为 Air 使用 cacheAsBitmapMatrix 还应该加速 alpha、颜色和缩放。

1.  考虑背景图像？事实证明，许多用户报告说，任何背景对象（即使是在短时间内与您重叠的其他可见对象）也必须被缓存，即使它是导入到 Flash 中的图像。（参见[http://forums.adobe.com/thread/758774](http://forums.adobe.com/thread/758774)的第一个回复）何时以及为何考虑这样做？

2.  内部动画。文档说要避免缓存任何包含“内部动画”的对象。这具体是什么意思？如果我有一个产生子对象的位图缓存对象，并且这些子对象也是我想要移动的位图，我必须避免将父对象缓存为位图吗？如果是这样，如果父项与动画子项重叠（从而成为可见的“背景对象”），这是否会使 (A) 无效？

3.  空白对象。如果我创建一个对象仅作为一个对象容器而没有它自己的图形内容（但有具有图形的子对象），缓存这个容器对象总是错误的吗？如果这个父容器没有被缓存，它里面的对象还会从缓存中受益吗？如果是这样，在此容器中为背景和其他动画对象设置单独的子对象是否对性能有益，所有这些对象都独立缓存为位图？

# java - 从字符串中按名称获取变量

> ID：13298823
> 
> 赞同：21
> 
> 时间：2012-11-08T22:18:20.537
> 
> 标签：java, string, variables, reflection

示例代码：

```
int width = 5;
int area = 8;
int potato = 2;
int stackOverflow = -4; 
```

现在，假设我想让用户输入一个字符串：

```
String input = new Scanner(System.in).nextLine(); 
```

然后，说用户输入`potato`。我将如何检索命名的变量`potato`并对其进行处理？像这样的东西：

```
System.getVariable(input); //which will be 2
System.getVariable("stackOverflow"); //should be -4 
```

我查了一些东西，并没有找到太多；我确实找到了对“反射 API”的引用，但这对于这个简单的任务来说似乎太复杂了。

有没有办法做到这一点，如果是这样，它是什么？如果“反射”确实有效并且它是唯一的方法，那么我将如何使用它来做到这一点？它的教程页面包含各种我无法理解的内部内容。

**编辑：**我需要将`String`s 保留在我正在做的事情的变量中。（我不能使用`Map`）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-08T22:21:09.127

对于您在这里所做的事情，使用反射似乎不是一个好的设计。最好使用`Map<String, Integer>`例如：

```
static final Map<String, Integer> VALUES_BY_NAME;
static {
    final Map<String, Integer> valuesByName = new HashMap<>();
    valuesByName.put("width", 5);
    valuesByName.put("potato", 2);
    VALUES_BY_NAME = Collections.unmodifiableMap(valuesByName);
} 
```

或与[番石榴](http://code.google.com/p/guava-libraries/)：

```
static final ImmutableMap<String, Integer> VALUES_BY_NAME = ImmutableMap.of(
    "width", 5,
    "potato", 2
); 
```

或使用[枚举](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)：

```
enum NameValuePair {

    WIDTH("width", 5),
    POTATO("potato", 2);

    private final String name;
    private final int value;

    private NameValuePair(final String name, final int value) {
        this.name = name;
        this.value = value;
    }

    public String getName() {
        return name;
    }

    public String getValue() {
        return value;
    }

    static NameValuePair getByName(final String name) {
        for (final NameValuePair nvp : values()) {
            if (nvp.getName().equals(name)) {
                return nvp;
            }
        }
        throw new IllegalArgumentException("Invalid name: " + name);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T22:21:49.453

变量名仅在编译器时可用。反射只允许访问类声明和在其中声明的项，但不能访问局部变量。我怀疑`Map`某种方式将是解决您实际问题的更合适的方法。具体来说，请查看`HashMap`和`TreeMap`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-08T22:25:14.497

与其尝试查找变量名的值，不如使用带有键/值对的 Map 呢？

```
Map<String, Integer> vars = new HashMap<String, Integer>();
vars.put("width",5);
vars.put("area",8);
vars.put("potato", 2);
vars.put("stackOverflow",-4); 
```

然后你可以像这样访问输入：

```
vars.get(input); //would be 2
vars.get("stackOverflow"); //would be -4 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-28T15:48:09.260

对于这个问题，我有一个不涉及使用地图的解决方案。我遇到了这种技术，因为我们有几个变量需要根据变量名本身的内容进行更新。但是，最好的方法是使用 getter/setter 而不是变量。

创建类后，您可以通过创建 Method 对象并单独调用它们来访问方法。

```
public class FooClass

private String foo1;
private String foo2;

public String getFoo1();
public String getFoo2();

FooClass fooClass = new FooClass();

Method mFoo1 = fooClass.getClass().getMethod("getFoo" + increment + "()");

mFoo1 .invoke(fooClass); 
```

但是，这不仅限于增量数字，只要您可以获得与方法完全匹配的字符串即可。

```
String value = "Potato";
Method mPotato = myClass.getClass().getMethod("get" + value+ "()");

mPotato.invoke(myClass); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-05T15:02:09.633

我有另一个没有地图的解决方案：

```
class Vars {
    Integer potato, stack;
    public Vars(a,b) {
        potato=a;
        stack=b;
    }
}
Object object=(Object)new Vars(1,2);
Class<?> c = object.getClass();
Integer result=(Integer)c.getField("potato").get(object); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T22:50:32.100

非常**多余**，但是您可以在使用地图时保留变量名：

```
int width = 5;
int area = 8;
int potato = 2;
int stackOverflow = -4;
Map<String, Integer> map = new HashMap<>();
map.put("width", width);
map.put("area", area);
map.put("potato", potato);
map.put("stackOverflow", stackOverflow); 
```

但是这样的声明：

```
width = 42; 
```

不会更改地图中的值：

```
String input = "width";
map.get(input); // <-- still returns 5. 
```

只有一个新的 put 修复调用：

```
width = 42;
map.put("width", width);
// or
map.put("width", 42); 
```

# silverlight - PivotItem Loaded 事件触发了两次

> ID：13298832
> 
> 赞同：0
> 
> 时间：2012-11-08T22:19:05.607
> 
> 标签：silverlight, xaml, windows-phone, windows-phone-8

Windows Phone 8，银光。我有一个`PivotItem`在页面 XAML 下的`ResourceDictionary`页面中声明的，因为我不希望它最初出现并且 PivotItems 没有动态可见性。时机成熟时，我取出对象，将其从资源中移除并将其添加到 Pivot。它可以工作，但是由于某种原因，Load 事件被触发了两次 - 一次是在页面加载时，一次是在我将其插入 Pivot 时。

我宁愿只进行一次 OnLoaded 处理。

这是设计使然吗？有办法吗？是否有类似的事件在对象初始化时触发一次（构造函数除外）？

我可以通过引入一个 init-once 布尔标志来解决这个问题，但仍然如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T22:13:53.103

您可以尝试 OnNavigatedTo。加载的事件可以在可视化树中的几乎所有项目上触发。如果您要折叠pivotItem 上的项目但不折叠pivotItem 本身，则挂钩到父Grid 容器。

最终，可以删除 Pivot 控件的子控件

myPivotControl.Items.Remove(item);

并且您可以以相同的方式添加一个项目

myPivotControl.Items.Add(项目)

但是，我怀疑使用不同的事件会得到更好的结果。父枢轴具有添加和删除项目的事件。[此链接](http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.pivot%28v=vs.92%29.aspx)将带您到 Pivot 类的文档。此外，[此链接](http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.pivotitem%28v=vs.92%29.aspx)将带您进入 PivotItem 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T23:21:48.050

您可以`PivotItem`在开始时将其折叠起来，然后在需要时使其可见。

# java - 使用 JSF 更新

> ID：13298838
> 
> 赞同：0
> 
> 时间：2012-11-08T22:19:27.540
> 
> 标签：java, jsf, updates

我有一个问题，包括使用 JSF 或更好的方法更新对象！：/

这是我的页面：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
    <title>Listagem de mesas do restaurante</title>
</h:head>
<h:body>
    Escolha uma mesa de sua preferência:<br/>

    <ui:repeat value="#{indexBean.mesas}" var="mesa">
        <br/>Table #{mesa.numero} <h:commandButton id="reservar" value="BloqMesa" action="#{indexBean.reservaMesa(#REFERENCEDTable)}"></h:commandButton><br/>
    </ui:repeat>

</h:body> 
```

顺便说一下，“表”不是数据库中的表，“表”是表的名称！

当我单击命令按钮时，我想更新实际行的表。真正的问题是我必须传递参数而不是#REFERENCEDTable

想法？？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:43:01.023

首先，每个 UICommand 组件（`<h:commandButton>`、`<h:commandLink>`等）都必须位于`<h:form>`将数据发送到服务器的 a 中。您根本没有表单，因此永远不会调用该操作。请注意，使用`<h:form>`inside`<ui:repeat>`在 Mojarra 实现中存在错误。如果您使用的是 MyFaces，则不会有问题。不过，这似乎是一个使用 a 的情况`<h:dataTable>`。

其次，您可以将`mesa`变量作为参数传递给您的`IndexBean#reservaMesa`方法。只要确保你有这个代码（或类似的）

```
@ManagedBean
@ViewScoped
public class IndexBean {

    private List<Mesa> mesas;

    public IndexBean() {
    }

    //getters and setters...

    public void reservaMesa(Mesa mesa) {
        //code to update a Mesa
    }
} 
```

您可以将`mesa`变量传递给`reservaMesa`Facelet 中的方法：

```
<h:commandButton id="reservar" value="BloqMesa"
    action="#{indexBean.reservaMesa(mesa)}" /> 
```

最后，你可以得到这个 JSF 代码：

```
<h:form>
    <!-- replacing ui:repeat by h:dataTable -->
    <h:dataTable value="#{indexBean.mesas}" var="mesa">
        <h:column>
            <f:facet name="header">
                <h:outputText value="Mesas"/>
            </f:facet>
            Table #{mesa.numero}
        </h:column>
        <h:column>
            <f:facet name="header">
                <h:outputText value="Actions"/>
            </f:facet>
            <h:commandButton id="reservar" value="BloqMesa"
                action="#{indexBean.reservaMesa(mesa)}" />
        </h:column>
    </h:datatable>
</h:form> 
```

# verilog - Verilog while 错误

> ID：13298839
> 
> 赞同：0
> 
> 时间：2012-11-08T22:19:36.617
> 
> 标签：verilog

我在 Verilog 有一个学校项目，我是新手。节目的一部分是这个

```
 integer x;
    assign x=1;
    **LINE 49** while(x<=9)
            begin
                assign lastBitsofP=P[1:0];
                if(lastBitsofP == 2'b00 || lastBitsofP ==2'b11)
                    begin
                    rightShift r1(shiftedValue,P);
                    end
                x=x+1;
            end 
```

但我总是收到这个错误：“mainModule.v”第 49 行期待 'endmodule'，发现 'while'，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T23:03:40.640

您需要停止编码并考虑发生了什么。您正在对硬件和连接进行建模。当你写assign x =时，这意味着“我有一根电线，我希望你用这个值驱动那根电线”。如果您有一个像 r1 这样的模块要连接，它必须*始终*连接，您不能“哦，等等，如果发生这种情况，只需为我创建一个乘法单元”。

您需要在开始时实例化您的连接。如果你有时只想要右移值，那么你可以有一个像`assign out = select ? shiftedValue : unshiftedValue;`And 这样的语句，然后你只需要编写 select 的逻辑。

你可能需要一个触发器来输出。就像是

```
reg [31:0] result;
always @(posedge clk)
begin
    result <= out;
end 
```

# node.js - 检测 http.ServerResponse / Writable Stream 是否有空的写入队列

> ID：13298841
> 
> 赞同：1
> 
> 时间：2012-11-08T22:19:42.427
> 
> 标签：node.js

对于我的第一个 node.js 项目，我正在为一些 mjpeg 输出创建代理。现在，一些客户端无法像服务器获取流一样快地读取流，所以我正在丢帧让它们赶上。我目前正在使用对象的`drain`事件，`http.ServerResponse`或多或少类似于下面，但是因为被调用了很多，我想知道是否有更好/更轻量级的方法（我在可[写流文档](http://nodejs.org/api/stream.html#stream_stream)`drain`中找不到)

```
httpServer.on('request',function(request,response){
    //skipped setting some headers etc.
    res.socket.on('drain', function(){
        res.drained = true;
        res.draincounter = 0;
    });
    //followed by some unconditional first write (set drained to false first)
    res.drained = false;
    res.write(someData);
}; 
```

现在，向客户端写入帧是这样的：

```
writeFrame = function(res,frame){
   if(res.drained){
       //nothing in queue, ready for new data

       //first set drained to false
       res.drained = false;
       //and feed it more data
       res.write(frame, 'binary');
   } else if(res.draincounter > maxDroppedFrames){
       //to many dropped frames in a row, disconnect
       res.end();
   } else {
       res.draincounter++;
   }
} 
```

但这使用了自定义属性，并且对 drain 事件进行了*很多*调用（这可能没问题，但以我有限的经验并不适合我）。简而言之，我的问题是：

*是否有更有效的方法来检测 a`Writable Stream`的写入缓冲区为空？*

* * *

**编辑：**在关闭和休眠一段时间后使用节点 0.10.18 重新启动此项目后，出现了严重错误，因为我不再收到`drain`事件（至少，不是以上述方式）。现在，我检查是否`res.socket.bufferSize`高于某个标记来决定是否写入 mjpeg 帧，`draincounter`仍然有效。`pipe()` [从评论中的流文档中](https://github.com/substack/stream-handbook)提倡或在我的情况下*不是*解决方案，因为问题不是在客户端速度上写入*所有*数据，而是在客户端速度低于源流时丢弃数据。

谁能告诉我什么是处理背压数据丢失的正确方法（如果不是这样）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-20T11:58:06.370

我个人会`res._writableState`直接检查，但此时您正在深入研究可能会发生变化的节点源，但我怀疑这在未来会发生很大变化。

但这就是事情变成艺术的时候。您可以检查很多不同的标志：[https ://github.com/joyent/node/blob/master/lib/_stream_writable.js#L40](https://github.com/joyent/node/blob/master/lib/_stream_writable.js#L40)

如果要检查缓冲区的当前大小，可以检查`res._writableState.length`- [https://github.com/joyent/node/blob/master/lib/_stream_writable.js#L79](https://github.com/joyent/node/blob/master/lib/_stream_writable.js#L79)。

这只会在缓冲区为 0 时写入。

```
function writeFrame(res, frame) {
  if (res._writableState.length) {
    if (++res.droppedFrames > maxDroppedFrames) res.end()
  } else {
    res.write(frame)
  }
} 
```

如果您只想在缓冲区低于高水位线时写入（即不需要排水），您可以检查`res._writableState.needDrain`- [https://github.com/joyent/node/blob/master/lib/ _stream_writable.js#L57](https://github.com/joyent/node/blob/master/lib/_stream_writable.js#L57)

这只会在缓冲区低于高水位线时写入：

```
function writeFrame(res, frame) {
  if (res._writableState.needDrain) {
    if (++res.droppedFrames > maxDroppedFrames) res.end()
  } else {
    res.write(frame)
  }
} 
```

您可能会感兴趣的其他标志。要点是您不必监听任何`drain`事件或进行任何内部状态标记。

附带说明，您可能应该只关心`maxDroppedFrames / second`，而不是绝对总数。您也不应该使用`binary`编码进行编写，而只需编写原始缓冲区即可。

此外，这可能仅适用于节点 0.10+

# memory - 操作系统内存分配地址

> ID：13298842
> 
> 赞同：3
> 
> 时间：2012-11-08T22:19:44.860
> 
> 标签：memory, memory-management, operating-system

快速好奇的问题，内存分配地址是由语言编译器选择的，还是操作系统为所要求的内存选择地址？

这是出于对虚拟内存的怀疑，它可以快速解释为“让进程认为他拥有所有内存”，但是如果进程想要更高的内存地址，那么在 64 位架构上会发生什么情况，其中只有 48 位用于内存地址地址？

假设您执行了 a`int a = malloc(sizeof(int));`并且上一个系统调用没有剩余内存，因此您需要向操作系统请求更多内存，编译器是确定分配此变量的内存地址的人，还是只是向操作系统询问内存并在它返回的地址上分配它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:46:41.667

它不会是编译器，特别是因为这是动态内存分配。在您实际执行程序之前，编译已经完成。

静态变量的内存保留发生在编译时。但是静态内存分配将在启动时发生，在用户定义 Main 之前。

静态变量可以在可执行文件本身中分配空间，然后将内存映射到进程地址空间。这只是少数几次（？）我可以想象编译器实际上“决定”了一个地址。

在动态内存分配期间，您的程序会向操作系统请求一些内存，并且操作系统会返回内存地址。该地址然后例如存储在指针中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:23:48.737

C/C++ 中的*动态*内存分配简单地由运行时库函数完成。只要它们的行为符合标准，这些功能就可以随心所欲。兼容但无用的简单实现`malloc()`如下所示：

```
void * malloc(size_t size) {
    return NULL;
} 
```

要求相当宽松——指针必须适当对齐，并且指针必须是唯一的，除非它们以前是唯一的`free()d`。您可以按照以下方式完成一个相当愚蠢但有点可移植且绝对不是线程安全的内存分配器。在那里，地址来自编译器决定的池。

```
#include "stdint.h"
// 1/4 of available address space, but at most 2^30.
#define HEAPSIZE (1UL << ( ((sizeof(void*)>4) ? 4 : sizeof(void*)) * 2 ))
// A pseudo-portable alignment size for pointerŚbwitary types. Breaks
// when faced with SIMD data types.
#define ALIGNMENT (sizeof(intptr_t) > sizeof(double) ? sizeof(intptr_t) : siE   1Azeof(double))

void * malloc(size_t size)
{
    static char buffer[HEAPSIZE];
    static char * next = NULL;
    void * result;
    if (next == NULL) {
        uintptr_t ptr = (uintptr_t)buffer;
        ptr += ptr % ALIGNMENT;
        next = (char*)ptr;
    }
    if (size == 0) return NULL;
    if (next-buffer > HEAPSIZE-size) return NULL;
    result = next;
    next += size;
    next += size % ALIGNMENT;
    return result;
}

void free(void * ptr)
{} 
```

实用的内存分配器不依赖于这样的静态内存池，而是调用操作系统为它们提供新映射的内存。

*正确的*思考方式是：你不知道你将从`malloc()`. 如果您`malloc()`使用非零参数调用，您只能知道它是唯一的并指向正确对齐的内存。就这样。

# actionscript-3 - 无法让我的相对路径与 flashDevelop 和 flex 一起使用

> ID：13298843
> 
> 赞同：1
> 
> 时间：2012-11-08T22:19:48.760
> 
> 标签：actionscript-3, apache-flex, flex4.5, flashdevelop

所以我正在使用 FlashDevelop 和 flex，但我无法让源代码正常工作。当我嵌入图像时它工作得很好，但如果我只是去 source=".​​./img/Koala.jpg" 我用于工作嵌入的相同路径它不起作用。在 flash builder 中，我所要做的就是 source="/img/Koala.jpg" ，它工作得很好。如果我输入路径“D:\flashDevelop\FlexMobileProject\src\img\Koala.jpg”，这可以正常工作。谁能解释一下我在这里缺少什么？

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    title="HomeView" creationComplete="init()">

<fx:Script>
    <![CDATA[

        [Embed(source = "../img/Koala.jpg")]
        [Bindable] public var img:Class;

        public function init():void {
            var s:String = new String();
            label.text = String(imgstage.sourceHeight);

            trace(imgstage.source);
        }

    ]]>
</fx:Script>

<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>

<!-- can't find the image even if that path is the same as the embed -->
<s:Image id="imgstage" source="../img/Koala.jpg" y="0" x="0"/>
<s:Label id="label" text="name"></s:Label>
</s:View> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T23:17:56.417

如果我没记错的话， source=".​​./img/Koala.jpg" 是在运行时处理的，而 embed 指令是在编译时处理的。所以工作目录不同导致 source="" 失败。

以下工作是否有效：

```
<s:Image id="imgstage" source="img/Koala.jpg" y="0" x="0"/> 
```

假设 img 文件夹在您的 swf 文件旁边，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:04:50.777

在 FlashDevelop 中，您想要保留在 SWF 之外的任何文件都必须放在 bin 文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T13:31:38.070

当您为图像指定“源”时，文件将在运行时加载。但是，FlashDevelop 不会将文件从 src/ 复制到 bin/ - 您必须使用要在运行时加载的元素手动填充 bin/ 目录。运行时的路径相对于 HTML 页面进行解析。

嵌入是在编译时解析的，应该注意的是，在使用 FlashDevelop 时，路径总是相对于 class/mxml 文件而不是相对于项目根目录来解析。如果路径以“/”开头，它将相对于类路径的根。

PS：这些限制实际上是在 Flex SDK 中。

# scheme - 计划什么是符号的好处并评估它们

> ID：13298845
> 
> 赞同：1
> 
> 时间：2012-11-08T22:19:51.530
> 
> 标签：scheme, symbols

我对方案很陌生，我对引号和符号不太确定。

这是我的理解：

```
'a
-> a

'()
->(list)

'(1 2 3)
(list 1 2 3)

'(1 . 2)
(cons 1 2)

''a
(quote a)

So:

'(1 . 'a)
(1 quote a) => (list 1 quote a) 
```

我想要实现的是以下。

```
((let ((x 1) (y 2)) 
  (lambda(f) ,f)) 'x)
-> 1 
```

我向函数发送一个符号，该符号应评估为当前范围，在这种情况下将返回 1。

相反，我有这个错误：

```
*** ERROR IN #<procedure #4>, (console)@243.32 -- Unbound variable: unquote 
```

就好像 unquote 只能从其内部获得`quote`。

**编辑**

我只是在阅读一些文档并找到了函数：“eval”，它似乎可以满足我的要求。

```
(define a 'foobar)
(define foobar 2)
(eval a)
-> 2

(define a 'x)
(define f (let ((x 1) (y 2)) 
 (lambda (h) (eval h))))
(f a)
*** ERROR -- Unbound variable: y
(f y)
*** ERROR IN (console)@278.4 -- Unbound variable: y 
```

但我不确定是否真的明白。

这是鸡肉中的堆栈跟踪

```
Error: unbound variable: x

    Call history:

    <syntax>      (f (quote x))
    <syntax>      (quote x)
    <syntax>      (##core#quote x)
    <eval>    (f (quote x))
    <eval>    (eval h)  <-- 
```

**编辑2**

Eval is Evil 但我想知道它是如何工作的非常重要。

因此，在阅读了 Ankur 的答案后，我很确定这是范围的问题，实际上是这样。因此，据我了解，似乎`eval`可能正在尝试使用“全局变量”来评估任何内容。

```
> (define a 11)
> (define b 'a)
> (eval b)
11
> (let ((a 10)) (eval b))
11
> (let* ((a 10) (b 'a)) (eval b))
11
> (let* ((a 10) (b 'a)) b)       
a
> (let* ((c 10) (d 'c)) d)
c
> (let* ((c 10) (d 'c)) (eval d))
*** ERROR -- Unbound variable: c 
```

计划中的 eval 显然是邪恶的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:25:14.250

特别是对于这种情况，您不需要引用要评估的表达式，这将起作用：

```
(let ((x 1) (y 2)) 
  ((lambda (f) f) x))

=> 1 
```

在问题的代码中，请注意该变量`x`仅存`let`在于定义它的范围内；最外面的符号将只是一个与表达式内部`'x`无关的符号：`x``let`

```
((let ((x 1) (y 2)) 
   (lambda (f) f)) 'x)

=> 'x 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T05:26:52.840

```
It's as if unquote was only available from within quote itself. 
```

是的，您只能在带引号的表达式中取消引用，因为只有取消引用才有意义，即您正在引用一个表达式（不想评估表达式中的项目）但想要评估表达式的特定部分，在在这种情况下，您使用 unquote。

```
(define a 10)
`(a b ,a) ==> '(a b 10) 
```

在最后一个表达式中，我希望 a 和 b 不被计算，但第三个元素，即 a 应该被计算并替换为它的值，因此我们使用 unquote。

你的代码：

```
(define f (let ((x 1) (y 2)) 
 (lambda (h) (eval h)))) 
```

参数 for`f`必须是未计算的表达式，因为参数 h 是使用 eval 计算的。

因此你需要使用`(f 'a)`.

注意：`(f 'y)`将不起作用，因为使用 let 创建的 y 的范围已经消失。

# linux - 如何在打开 matlab 文件的同时从 linux 终端启动 matlab？

> ID：13298847
> 
> 赞同：4
> 
> 时间：2012-11-08T22:20:03.110
> 
> 标签：linux, matlab

如果我想在 matlab 编辑器中打开 file.m，有没有办法直接从 linux 终端执行此操作？我似乎无法在任何地方找到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T22:25:14.953

使用以下命令启动 matlab 以打开文件：

```
matlab -r 'edit <filename>' 
```

# iphone - 如何使用参数制作ios App Store链接？

> ID：13298848
> 
> 赞同：6
> 
> 时间：2012-11-08T22:20:04.633
> 
> 标签：iphone, html, ios, app-store

新的“智能应用横幅”有一种方法，您可以将参数传递给您的应用，以便它可以知道，例如用户在购买您的应用之前在您网站上的哪个页面。这很有用，例如，您可以在新闻网站上向他们展示您之前展示的文章。

使用智能应用横幅的方法是：

```
<meta name="apple-itunes-app" content="app-id=311507490, app-argument=http://bookID/1234"/> 
```

有没有办法制作一个通用链接，而不是智能应用横幅？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:40:57.580

智能应用横幅的优势在于 iOS 会检测应用是否已安装。如果它安装在设备上，则横幅会直接打开应用程序。否则，它会将您带到应用商店。

一个缺点是它们只出现在移动 safari 中并且需要 iOS 6。

作为替代方案，您可以使用[自定义 URL 方案](http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)。应用程序必须实现此方案。URL 如下所示：`myapp://bookID/1234`。

您还可以使用[javascript](https://stackoverflow.com/questions/11952202/determine-an-installed-app-using-safari-on-iphone)检查此链接是否有效（已安装应用程序） 。

# xml - WinRT 中的 XmlDocument 在功能上与 System.XML.XmlDocument 相同吗？

> ID：13298850
> 
> 赞同：2
> 
> 时间：2012-11-08T22:20:42.883
> 
> 标签：xml, windows-runtime

与 System.XML 和 XElement/XDocument 中的 (.NET) 类相比，我试图弄清楚 Windows.Data.Xml.Dom.XmlDocument 的用途。直到 XmlDocument 在 WinRT 中复活，我认为 XmlDocument 是“旧样式”（W3C DOM）。XElement 为我完成了所有工作，速度更快并且允许使用 LINQ。

现在 XmlDocument 又回来了，到目前为止我所看到的一切似乎与旧的 XmlDocument 基本相同。我正在寻找使用此类而不是 XElement 的理由（除了 XmlDocument 与 StorageFile 一起使用的事实）。我希望能得到一些想法、事实或经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:03:46.110

`XmlDocument`是一个文档，但是`XmlElement`代表文档中的一个元素。我认为区别很明显。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T20:25:04.067

我不认为有一个正确的答案。我的看法是，XmlDocument 和朋友是为那些喜欢它的人和那些已经知道这种类型的团队移植的。

当我有一种 XPath 的心情时，我有时会使用 XmlDocument 来阅读，尽管我使用 XDocument 来编写，因为我只是发现 XmlDocument API 很难构建 XML。

卢克

# c# - .Net AdControl 在 Windows 应用程序中

> ID：13298852
> 
> 赞同：0
> 
> 时间：2012-11-08T22:20:48.973
> 
> 标签：c#, .net, windows-8, ads

`AdControl`我可以在我的 c# windows 应用程序中嵌入广告 .Net吗？我读到它在 c#/.xaml、windows 8 中是可能的，但我需要在我的 winform 中使用它。阿努帮助表示赞赏！..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:51:22.147

你需要什么样的广告？您是否需要通过您的应用程序获利，

希望这可以帮助 ...

[http://channel9.msdn.com/Events/Build/2012/2-113](http://channel9.msdn.com/Events/Build/2012/2-113)

# .net - 异步目录搜索器 (LDAP)

> ID：13298855
> 
> 赞同：9
> 
> 时间：2012-11-08T22:21:01.490
> 
> 标签：.net, vb.net, directoryservices

我正在活动目录中进行长时间搜索，并且真的很想使用 DirectorySearcher.Asynchronous = True。[微软在MSDN](http://msdn.microsoft.com/en-us/library/system.directoryservices.directorysearcher.asynchronous.aspx)上提供的文档很少

> 异步搜索可以在找到结果时显示结果，同时搜索其他结果。这对于填充列表框等任务很有用。
> 
> 此属性的默认设置为 false。

我的应用程序如何知道搜索何时完成。我没有看到任何可以提供此通知的属性、事件或回调。有谁知道如何获得这个功能？

基本上我正在寻找这个：

*   启动异步目录搜索
*   将结果返回到 System.Collections.Concurrent.ConcurrentQueue(Of Object)
*   由于 DirectorySearcher 正在运行，我可以处理添加到队列中的项目

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T02:27:38.103

DirectoryServices 使用 ADSI 与 AD 对话。当您将 async 设置为 true 时，它​​会使用 IDirectorySearch.SetSearchPreferences 将 ADS_SEARCHPREF_ASYNCHRONOUS 搜索首选项设置为 true。

这是一个解释同步和异步搜索之间区别的页面：[使用 IDirectorySearch 进行同步和异步搜索](https://docs.microsoft.com/en-us/windows/win32/adsi/synchronous-and-asynchronous-searches-with-idirectorysearch)

这描述了分页：[使用 IDirectorySearch 进行分页](https://docs.microsoft.com/en-us/windows/win32/adsi/paging-with-idirectorysearch)

如果您正在执行大型查询，您可以生成自己的线程或使用线程池，将页面大小设置为低于 1000，并在结果进入时填充您的队列。

# javascript - 如何使用 JavaScript 判断应用程序是否安装在 ios 设备上？

> ID：13298861
> 
> 赞同：1
> 
> 时间：2012-11-08T22:21:20.790
> 
> 标签：javascript, iphone, html, ios

是否有一种方法可以在网页中确定设备是否安装了特定的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:33:34.997

取决于你想做什么，有一种方法。查看[使用自定义 url 方案启动应用程序](http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)。

如果您想让您的移动浏览器下载/使用您的应用程序，您可以使用该帖子中详述的自定义 url 方案进行设置。在 Safari 中，添加指向您应用的自定义 url 的链接。如果单击或触发链接时出现错误或未重定向（您可以使用 setTimeout() 检查），则该应用程序未安装。

我不知道你的用例是什么，所以这是我能做的最好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T22:40:19.997

如果您只是想在未安装的情况下推广您的应用，您可以在页面上添加一个元标记：

```
<meta name="apple-itunes-app" content="app-id=myAppStoreID, affiliate-data=myAffiliateData, app-argument=myURL"> 
```

有关更多信息，请参阅Apple 开发者网站上的[使用智能应用横幅推广应用。](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html)

如果这不是您想要做的，[这个答案](https://stackoverflow.com/questions/5746289/determine-if-an-app-exists-and-launch-that-app-on-ios)可能会有所帮助。

# perforce - 如何重命名 perforce depot 中的文件

> ID：13298868
> 
> 赞同：2
> 
> 时间：2012-11-08T22:21:42.453
> 
> 标签：perforce

重命名仓库中的文件而不发生任何冲突的过程是什么？

在 p4 或命令行中有什么方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T22:29:50.060

是的，但是该方法取决于您正在运行的 Perforce 版本。这是从命令行执行此操作的方法（这是从“p4 help rename”的输出中复制的）。

```
In release 2009.1 and higher, you can use 'p4 move' to move or
rename files. Perforce clients prior to release 2009.1 do not
support 'p4 move'.  However, files in older clients can be
renamed by branching one file to another and deleting the
original file.  For example:

    p4 integrate fromFile toFile
    p4 delete fromFile
    p4 submit

For further information, see the help for the individual commands.

Note: Files renamed in this way are treated as branched files
rather than moved files in subsequent operations. 
```

# android - 使用 XML 中的重力或 linear_gravity 在 LinearLayout 中左对齐图像

> ID：13298870
> 
> 赞同：2
> 
> 时间：2012-11-08T22:21:51.113
> 
> 标签：android, xml, android-layout, android-linearlayout

首先，这**不是一个重复的问题**，尽我所能，我已经尝试了所有（有*很多*）类似的问题。此类问题的解决方案似乎非常主观，特定于给定场景。

我的布局目前如下所示。黑框是图像（分别是*logo*和*body*），颜色代表每个布局：

![布局截图](../Images/9ff654da309bfca57639156ea382a0f0.png)

我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#000"
    android:padding="0px"
    android:layout_margin="0px"
    android:orientation="vertical">

    <LinearLayout
        android:layout_weight="16"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#FFF"
        android:gravity="top|center"
        android:orientation="horizontal">
        <ImageView
            android:id="@+id/logo"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:src="@drawable/logo"
            android:layout_gravity="top|center" />
    </LinearLayout>

    <LinearLayout
        android:layout_weight="4"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#00F"
        android:gravity="bottom|left"
        android:orientation="vertical">
        <ImageView
            android:id="@+id/body"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:src="@drawable/body"
            android:layout_gravity="bottom|left" />
    </LinearLayout>

</LinearLayout> 
```

在这里你可以看到我有一个父线性布局，分成两个子线性布局。这是因为我需要在页面的该部分中以不同的方式定位图像。

简而言之，我需要*徽标*与顶部垂直对齐，而*主体*与左下角水平对齐。

现在，我尝试了一些事情：

*   使用`RelativeLayout`而不是线性
*   切换LinearLayout`gravity`和`layout_gravity`ImageView，以及排除每个的组合
*   我想要的是对宽度和高度相当有信心`match_parent`，但我尝试了不同的组合`wrap_content`

我明白了什么：

*   `gravity:top`需要父视图使用`orientation:horizontal`
*   `gravity:left`需要父视图使用`orientation:vertical`
*   `gravity`适用于视图的孩子
*   `linear_gravity`应用孩子如何与其父母保持一致
*   `gravity`在父级和子级上使用相同的值`linear_gravity`可能具有相同的效果（当使用一个而不是另一个时）？

希望这是足够的信息。我很难理解这些布局是如何工作的。

十分感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:51:51.690

我认为您的问题是您将图像视图的尺寸设置为`match_parent`. 我会使用 RelativeLayout，因为它在您的情况下似乎是最有效的（伪 XML 代码）：

```
RelativeLayout (width=match_parent, height=match_parent)
  ImageView (width=wrap_content, height=wrap_content, 
             alignParentTop=true, centerHorizontal=true)
  ImageView (width=wrap_content, height=wrap_content, 
             alignParentBottom=true, alignParentLeft=true) 
```

您在这里不需要任何重力设置。您可能希望根据图像大小使用 scaleType 属性。

# perl - Apache 身份验证刷新

> ID：13298877
> 
> 赞同：0
> 
> 时间：2012-11-08T22:22:05.557
> 
> 标签：perl, apache, .htaccess

我正在尝试使用 Perl 建立一个简单的 CGI 网站，该网站创建一个链接到 Java 小程序的 HTML 页面。我已经设法进行了设置，但由于某种原因，该站点的 Apache 身份验证正在做一些不稳定的事情。也就是说，如果密码输入错误，而不是重定向到 403 页面（我认为应该如此），它只是刷新页面 - 再次显示密码提示。我的 htaccess 文件如下所示：

```
AuthUserFile  PATH/TO/HTPASSWD
AuthGroupFile /dev/null
AuthName  NAME
AuthType Basic
require user USER1 
```

它位于Java applet 目录中（不同于CGI 目录）。我一直在寻找为什么会出现这个问题，但我似乎找不到刷新页面的原因。如果 Perl CGI 程序试图访问 applet 文件夹中带有 .htaccess 的 applet，有谁知道这种行为是否很典型？预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:30:41.577

它返回更合适的 401 Unauthorized 错误。响应包括身份验证方法（基本）。浏览器通过显示登录提示来响应。（我相信浏览器在几次尝试后会给你一个 401 错误页面。）

这是适当的行为。您希望用户再次有机会输入他的用户/密码。真正的问题是您无法自定义错误以包含其他链接（例如）。“基本”这个名字是值得的。

# image - 在 Wordpress 中为图像分配类别

> ID：13298878
> 
> 赞同：6
> 
> 时间：2012-11-08T22:22:14.843
> 
> 标签：image, wordpress, categories

我以为我的问题会有一个相当简单的答案，但我的研究证明并非如此。我想知道的是，是否有一种方法可以为我的 Wordpress 网站上的库中的图像分配类别？更具体地说，我不是指将缩略图应用到类别页面或某个类别的帖子。我有一个名为“滑块”的类别，我希望能够将该类别应用于我库中的图像。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T02:03:11.737

是的，有可能。

*   [媒体标签](http://wordpress.org/extend/plugins/media-tags/screenshots/)

    > 提供通过媒体管理屏幕标记媒体/附件的能力

*   [媒体类别](http://wordpress.org/extend/plugins/media-categories-2/screenshots/)

    > 使用干净、简单且可搜索的类别元框轻松将类别分配给媒体。然后使用画廊简码显示类别画廊

*   [媒体类别库](http://wordpress.org/extend/plugins/media-category-library/screenshots/)

    > WordPress 插件，允许将媒体库中的项目分配给一个类别。

WPSE的相关问答：

*   [我可以将类别元框添加到附件吗？](https://wordpress.stackexchange.com/q/496/12615)
*   [我们如何将类别元框带入媒体库/上传新媒体页面](https://wordpress.stackexchange.com/q/21726/12615)
*   [使用媒体库管理像 Nextgen 这样的画廊](https://wordpress.stackexchange.com/q/48747/12615)

一个问题是 WordPress 3.5 对媒体管理进行了彻底的改造，过去的解决方案可能会或可能不会起作用......

# xamarin.ios - MonoDevelop：有什么方法可以使用项目覆盖资源/类？

> ID：13298880
> 
> 赞同：2
> 
> 时间：2012-11-08T22:22:20.637
> 
> 标签：xamarin.ios, xamarin.android, monodevelop, xib, xamarin

考虑一个解决方案有 2 个项目：ProjectA 和 ProjectB（都是 MonoTouch 应用程序）和 ProjectBase。ProjectBase 包含整个应用程序，但 Main.cs 文件（带有入口点）位于 ProjectA 和 ProjectB（引用 ProjectBase）中。这样，运行任何 A/B 项目都会从 ProjectBase 启动应用程序。

现在，我只想为 ProjectA 覆盖一些东西（它可能是 XIB 文件、图像或 .NET 类）。有什么方法可以设置解决方案，以便 ProjectBase 生成的代码和资源与 ProjectA/ProjectB 中的代码和资源合并，后者获胜？

我发现（*可能是一种古怪且有点未定义的行为驱动方式*）覆盖 XIB：我只是将 XIB 放入 ProjectA 和 ProjectB，将其命名为与 ProjectBase 中的名称相同，然后将其从 ProjectBase 中排除。虽然 MonoDevelop 会编译所有项目，但似乎启动项目的 XIB 优先，因此我在启动 ProjectA 时会看到特定于 ProjectA 的 XIB，而在启动 ProjectB 时会看到特定于 ProjectB 的 XIB。**但是**，我不确定它的行为方式是否应该如此，此外，从构建日志中可以看出，所有项目最终都会产生资源。

PS如果之前有人问过这个问题，我很抱歉，但我无法在 SO 上找到类似的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T05:34:17.480

我曾经试图为一堆应用程序这样做。我原以为构建顺序是 ProjectBase，然后是 ProjectA，内容复制系统是相同的……猜猜这意味着我们错了。

你可以做几件事。

A) 构建您自己的程序来复制标记为内容的资源。不会很难，只需要阅读 .csproj 文件。XML 解析在 .NET 中很容易。在构建后运行此程序。在进行诸如压缩或设备等构建时必须小心，因为我不确定它如何处理构建后事件。

B）[这就是我所做的]如果我希望也制作 ProjectC，ProjectD ... ProjectN 我反而制作了一个程序来生成我的程序...（Programception）。它的功能有 ProjectBase 和 ProjectTempalte。你在这个程序中输入你的新项目名称，比如“MyNewProject”，它将创建正确的文件夹结构，编写正确的 csproj 文件，并更新 SLN 文件。ProjectTemplate 在 .csproj 文件中具有各种占位符，例如 {PLACEHOLDER}，Programception 将通过这些占位符查找/替换为我的项目名称。图像文件（在您的情况下为 XIB）然后仅保存在 ProjectA（B..C..N）中，除非我不希望尝试覆盖它们，在这种情况下它们将保留在 ProjectBase 中。这对于我假设的 XIBless 应用程序来说要容易得多。反正我从来不用XIB的。

希望有帮助！

# java - 使用 UiBinder 时是否需要 GWT SafeHtml？

> ID：13298881
> 
> 赞同：2
> 
> 时间：2012-11-08T22:22:22.273
> 
> 标签：java, html, gwt, xss

假设您有以下内容`MyPanel.ui.xml`：

```
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
    xmlns:gwt="urn:import:com.google.gwt.user.client.ui">
    <div>
        <span id="content">Some content</span>

        <gwt:RadioButton ...>
            ...
        </gwt:RadioButton>

        <!-- etc. -->
    </div>
</ui:UiBinder> 
```

这“映射”到`MyPanel.java`：

```
public class MyPanel extends Composite {
    private RadioButton radioButton;
    // ...
} 
```

`HTML`那么是否存在您想要/需要使用 SafeHtml 或 SafeHtmlBuilder 的用例，或者仅在使用对象及其底层 DOM 结构时才需要“Safe*”API ？

如果存在 UiBinder 支持的复合材料需要使用 Safe* 的用例，也许一个简单的代码示例可以帮助我连接这些点。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T00:25:25.943

一个简单的例子，你应该将 SafeHTML 与 UiBinder 结合使用：

```
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
    xmlns:gwt="urn:import:com.google.gwt.user.client.ui">
    <gwt:HTMLPanel>
        <gwt:HTML ui:field="myHtml"/>
    </g:HTMLPanel>
</ui:UiBinder> 
```

```
public class MyPanel extends Composite {
    private HTML myHtml;
    // ...
} 
```

在这里你应该使用`myHtml.setHTML(SafeHTML)` ^([*])。原因是，这是示例中唯一可能出现*用户提供内容的地方。*用户内容不能出现在 UiBinder 模板本身中（因为这是静态的：在编译时固定）。

因此，是否需要 SafeHTML 之间的区别相当于信任*用户提供*的内容与信任*开发人员提供*的内容之间的区别。

^([*] 在您自己的示例中，您应该使用 RadioButton 的 SafeHTML 构造函数之一)

# c# - c# error:Unrecognized configuration section userSettings - stop program reading user.config?

> ID：13298884
> 
> 赞同：21
> 
> 时间：2012-11-08T22:22:29.497
> 
> 标签：c#, app-config, user.config

在我的 c# 表单应用程序（在 VS2010 中创建，使用 .NET 4.0）中，我使用应用程序设置来存储输出路径。

以前此设置配置了用户范围，但我不得不将其范围更改为应用程序。

执行此操作后，我现在在启动表单时收到*Unrecognized configuration section userSettings*错误（注意该程序之前已执行，设置的范围设置为 user）：

```
InnerException: System.Configuration.ConfigurationErrorsException
   Message=Unrecognized configuration section userSettings. (C:\Documents and Settings\Administrator\Local Settings\Application Data\CallCenterForm\CallCenterForm.vshost.exe_StrongName_bplf30wziudnpq0knzaacfuyomd5rv45\1.0.0.0\user.config line 3)
   Source=System.Configuration
   BareMessage=Unrecognized configuration section userSettings.
   Filename=C:\Documents and Settings\Administrator\Local Settings\Application Data\CallCenterForm\CallCenterForm.vshost.exe_StrongName_bplf30wziudnpq0knzaacfuyomd5rv45\1.0.0.0\user.config 
```

因此，在进行一些浏览之后，这似乎是由系统上仍然存在的旧 user.config 文件引起的，导致程序读取它并抛出错误（我不确定实际的潜在问题是什么）。我还可以确认，当我删除文件时，问题就消失了。

这让我想到了我的问题，有没有一种方法可以更改程序，使其不会读取旧的 user.config 文件，因为手动删除它并不理想，因为该程序已经在多个系统上投入生产。

抱歉，如果这已被涵盖，但我找不到答案。

如果有帮助，这里是我的 App.config 文件的内容：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
      <section name="CallCenterForm.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    </sectionGroup>
  </configSections>
  <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0"/>
  </startup>
  <applicationSettings>
    <CallCenterForm.Properties.Settings>
      <setting name="saved_output_dir" serializeAs="String">
        <value>c:\</value>
      </setting>
    </CallCenterForm.Properties.Settings>
  </applicationSettings>
</configuration> 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-09-04T09:22:58.103

我今天自己遇到了这个错误。解决方案是进入项目属性的“程序集信息”对话框并推进程序集和文件版本信息（例如 1.0.0.0 到 1.0.1.0），保存更改并重新构建应用程序。这将导致编译器重新评估配置并导致应用程序由于新版本中没有用户设置而避免创建和读取与新版本对应的新 user.config 文件。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-08T22:32:06.493

当还有 user.config 时，App.config 是如何使用的？我猜你仍然需要声明`<sectionGroup name="userSettings" ... >`它曾经声明的方式。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-02-06T04:49:02.423

您可以通过导航到为您的应用保存用户设置的当前目录来修复错误。这将位于 %system%\users\your_user\AppData\Local\Microsoft\YourApp.vshost.######\version 中。或删除 user.config 文件，清理您的解决方案，然后全部重建。这应该可以解决问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-15T08:57:03.223

我遇到过同样的问题。我不得不清理并重建解决方案。这解决了这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-16T14:02:13.593

我有同样的问题，我找到了解决方案：

1.  **如果Project/Properties/Setting.settings**和**app.config**文件中存在**Settings.settings**文件，请删除
*****   右键单击**属性**-> 再次添加新的**Settings.settings**文件*   双击 Settings.settings 文件打开*   最后**添加示例值**-> 保存****

 ****问题已**解决******

# iphone - iphone有没有办法将您的应用程序中的图像存储到图像库？

> ID：13298890
> 
> 赞同：0
> 
> 时间：2012-11-08T22:22:45.623
> 
> 标签：iphone

我正在整理一个照片库程序。我是他们将我的应用程序中的图像存储到图像库的一种方式？？？我已经看到使用 uiimagepicker 获取图像的示例代码，但没有将它们存储在照片库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:19:59.567

您可以使用 将`ALAssetsLibrary`图像保存到 photoLibrary。

```
UIImage *saveImage = //your image;
ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];  
[library writeImageToSavedPhotosAlbum:[saveImage CGImage] orientation:(ALAssetOrientation)[saveImage imageOrientation] completionBlock:^(NSURL *assetURL, NSError *error)
{  

}]; 
```

您还可以使用UIKit 的[UIImageWriteToSavedPhotosAlbum()](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html)存储图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T00:42:38.350

正如评论中所说的 H2CO3 ， UIImageWriteToSavedPhotosAlbum() 是您正在寻找的。

下面是这个方法最简单的使用方法。您可以用照片库中的图像、应用程序中的任何图像等替换“图像”。

```
UIImage *image = [UIImage imageNamed:@"image.png"];
UIImageWriteToSavedPhotosAlbum(image, nil, nil, nil); 
```

# knockout.js - 淘汰赛映射。我无法让我的 json 正确连接并进入选择下拉列表

> ID：13298894
> 
> 赞同：-1
> 
> 时间：2012-11-08T22:23:00.150
> 
> 标签：knockout.js, asp.net-mvc-4, knockout-mapping-plugin

我是淘汰赛和 mvc 的新手。我试图查看来自淘汰赛和复数视力的许多文档，但我似乎无法将所有内容放在一起。这就是我所拥有的：我有一个从我的 api 返回的 json 数据：

```
[{
ID: 1,
LongName: "My Long Name",
ShortName: "Long",
Rank: 10
},
{
ID: 2,
LongName: "My second long name",
ShortName: "Short",
Rank: 20
}] 
```

在我的 javascript 中，我有：

```
<script type="text/javascript">
    $(function () {
        $.getJSON("../api/myData", function (data) {
            alert(data[0].ID);
        });
    });
</script> 
```

我想创建一个从我的 json 数据（longname 和 id）中填充的下拉菜单。当用户选择时，另一个菜单会根据选择动态填充。我还使用 Knockout 映射器脚本吗？请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T01:37:57.577

这是一个可以帮助您的示例小提琴。

[http://jsfiddle.net/jearles/LpwgQ/](http://jsfiddle.net/jearles/LpwgQ/)

`Options`UI 首先通过 AJAX 调用加载下拉列表。加载后，您可以选择其中一个选项，这将触发子选项的加载。选择选项 1，它将加载一组子选项，切换到选项 2，它将加载一组不同的子选项。将初始选项切换回其“默认”，第二个菜单将消失。

在我的代码中，我确实使用了`mapping`插件。它使将返回的 JSON 转换为 observables 和 observableArrays 的工作非常容易。是否使用它取决于您的要求。

--

HTML

```
<select data-bind="options: options, optionsText: 'LongName', optionsValue: 'ID', value: selectedOption, optionsCaption: '-Select-'"></select> 
```

您使用 Knockout 绑定将返回的选项映射到选择。有关详细信息，请参阅[选项绑定](http://knockoutjs.com/documentation/options-binding.html)。 `options`指向一系列选择的指向，`optionsText`告诉淘汰赛用作文本`optionsValue`并将填充该值的淘汰，`value`这是在选择选项时可以观察到的淘汰赛，并`optionsCaption`在没有选择时提供文本。

通过订阅，`selectedOption`您可以在它更改时做出反应，如果需要加载子选项，请进行另一个 AJAX 调用。

JS

```
self.selectedOption.subscribe(function(newValue) {
    // Reset the suboptions
    self.suboptions([]);

    // If we have selected an option go get the suboptions
    if (newValue) {
      ...
    }
}); 
```

# css - 隐藏导航后显示导航

> ID：13298896
> 
> 赞同：2
> 
> 时间：2012-11-08T22:23:05.457
> 
> 标签：css, media-queries

我有一些隐藏和显示我的导航的 CSS 和媒体查询：

所以默认情况下导航是：

```
nav {
  display: inline;
} 
```

然后使用媒体查询我隐藏它：

```
@media only screen and (min-width: 480px) and (max-width: 767px) {
  nav {
    display: none;
  }
} 
```

一切运行良好，然后我将一些 JavaScript 连接到一个按钮，以便在媒体查询生效时显示和隐藏导航。

但是，当我将浏览器大小调整回全屏时，大于 767 像素的导航不会重新出现。如何让导航显示给桌面用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:46:42.650

像这样将jquery调整大小处理程序绑定到窗口

```
$(window).resize(function(e){
    if($(window).width() > 767){
        $('nav').show()
    } else {
        $('nav').hide()
    }
}) 
```

您可以对缓存对象进行一些优化，但这应该让您希望您需要开始

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:44:56.403

```
@media all and (min-width: 768px) {
    nav
    {
        display: inline!important;
    }
} 
```

Kai Qing 的回答帮助我意识到我只需要覆盖 jQuery .toggle 事件正在添加的内联 CSS - 当然是在正确的媒体查询中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-08T22:25:18.927

您可以让 js 向导航添加一个类并使用 !important 覆盖媒体查询语句...

```
nav {
  display: inline;
}
.force_display{
    display:inline !important;
}

@media only screen and (min-width: 480px) and (max-width: 767px) {
  nav {
    display: none;
  }
} 
```

只需在 js 函数中添加 force_display 类（假设您使用的是 jquery）...

```
$('#button').on('click', function(){
    $('nav').toggleClass('force_display');
}); 
```

# python - numpy线性方程的非零解

> ID：13298897
> 
> 赞同：1
> 
> 时间：2012-11-08T22:23:24.533
> 
> 标签：python, numpy, linear-algebra, linear-equation

如何使用 Numpy 获得此类方程的非平凡解？

```
r1 = r1 * 0.03  + r2 * 0.88 + r3 * 0.2425 + r4 * 0.03 + r5 * 0.03
r2 = r1 * 0.455 + r2 * 0.03 + r3 * 0.2425 + r4 * 0.03 + r5 * 0.88
r3 = r1 * 0.455 + r2 * 0.03 + r3 * 0.03   + r4 * 0.03 + r5 * 0.03
r4 = r1 * 0.03  + r2 * 0.03 + r3 * 0.2425 + r4 * 0.03 + r5 * 0.03
r5 = r1 * 0.03  + r2 * 0.03 + r3 * 0.2425 + r4 * 0.88 + r5 * 0.03 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:49:43.900

如果您只是在寻找执行此操作的库函数，只需使用`numpy.linalg.eig`并查找特征值等于 1 的特征向量。如果您需要实现迭代求解器，则幂方法可能是最好的主意。它应该很简单，因为特征值为 1 的向量也是特征值最大的向量。Krylov 子空间方法（Rayleigh 迭代）也应该很好地解决这个问题。

# python - 在matplotlib python中将x轴从0-6更改为Mon-Sun

> ID：13298902
> 
> 赞同：2
> 
> 时间：2012-11-08T22:23:39.300
> 
> 标签：python, matplotlib

我是 matplotlib 的新手，正在尝试在工作日绘制一些数字。现在（见下图），我的 x 轴编号为 0 - 6，0 = 星期一，1 = 星期二等。如何更改 xaxis 股票标签，使其显示为星期一、星期二、星期三等，而不是 0 -6？非常感谢！

我当前的代码

```
import matplotlib
matplotlib.use('Agg')
import matplotlib.pyplot as plt
plt.plot(wp.values(),'o') 
```

我当前的图像输出 ![电流输出](../Images/7bc9b091b400e628441d093a78c11e8f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T22:40:52.710

您正在寻找的方法是`Axes.set_xticklabels`：

```
plt.gca().set_xticklabels(\
    ['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday']); 
```

# cakephp - 如何在 HTML 表单上显示英国日期，然后以标准格式将其保存到数据库中

> ID：13298903
> 
> 赞同：1
> 
> 时间：2012-11-08T22:23:40.507
> 
> 标签：cakephp, cakephp-2.0

我正在构建一个 Web 应用程序，客户已要求任何必须输入数据的日期字段为英国格式 (DD/MM/YYYY)。目前，我有它，以便所有日期字段都必须以 YYYY/MM/DD 格式输入日期，因为这是数据库使用的。

如何让用户输入英国格式的日期，然后将其翻转以将其正确保存到数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:24:42.283

在`beforeSave`回调中检查是否提供了日期字段，如果提供，请使用[DateTime::createFromFormat](http://www.php.net/manual/en/datetime.createfromformat.php)`DateTime`从您的显示格式创建一个对象。[然后通过DateTime::format()](http://www.php.net/manual/en/datetime.format.php)将其更改为 sql 格式

```
if (isset($this->data[$this->alias]['date_field'])) {
    $this->data[$this->alias]['date_field'] = DateTime::createFromFormat('d/m/Y', $this->data[$this->alias]['date_field'])->format('Y/m/d');
} 
```

# windows - SSH 从 Linux 到 Windows 时需要覆盖密码

> ID：13298904
> 
> 赞同：1
> 
> 时间：2012-11-08T22:23:41.040
> 
> 标签：windows, ssh, passwords

我正在尝试从 Linux 机器启动的 Windows 终端设置一个自动化脚本。我的 IT 部门的人已经在这些 Windows 机器上设置了虚拟 SSH 服务器，但他们说由于安全原因，他们无法设置无密码 SSH。

所以我想我的问题有两个：

1.) 我可以在这些 Windows 机器上设置类似的东西，允许我通过不需要密码且不会成为安全问题的 Linux 终端连接到它们。

2.) 我是否仍然可以设置一个自动脚本，在提示我输入密码时输入所需的密码？

谢谢你们的帮助，伙计们。我刚加入这个网站，如果我不清楚或还不了解礼仪，请见谅。

# php - PHP从错误的IP发出请求

> ID：13298905
> 
> 赞同：0
> 
> 时间：2012-11-08T22:23:43.300
> 
> 标签：php, ip

我在具有专用 IP 的虚拟主机上使用 opencart。bank 只允许从专用 ip 进行虚拟 pos 查询，但 php 使用服务器 ip 与银行的 api 通信。有什么方法可以强制 php 使用该专用 ip？

ps：有一个[代码内解决方案](http://ejth.dk/2011/php-changing-ip-for-file_get_contents/72)，但我更喜欢更通用的解决方案，如 php.ini 编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T16:15:04.960

*正确的*方法是将`bind()`您的连接套接字连接到您希望使用的接口的 IP 地址。这将保证您想要的行为。（您可以将端口号设置为零以让操作系统选择一个。）

您还可以让操作系统适当地选择接口。事实上，我很惊讶它不是。您没有列出任何特定的 IP 地址、接口配置或路由表，但如果我们假设您的私有 IP 是 172.16.0.222 并且银行的 IP 地址是 172.16.0.11，那么打开到 172.16.0.11 的连接套接字*应该*使用您的本地私有 IP 地址。如果它正在选择您的公共地址，那么操作系统会认为它具有从该地址到目的地的路由。确保*不是*这种情况，您的问题应该得到解决。

# python - 从字符串中删除所有换行符

> ID：13298907
> 
> 赞同：61
> 
> 时间：2012-11-08T22:23:49.010
> 
> 标签：python, string, newline, substitution

我正在尝试从字符串中删除所有换行符。我已经阅读了如何做到这一点，但似乎由于某种原因我无法这样做。这是我正在做的一步一步：

```
string1 = "Hello \n World"
string2 = string1.strip('\n')
print string2 
```

而且我仍然在输出中看到换行符。我也尝试过 rstrip ，但我仍然看到换行符。谁能解释我为什么做错了？谢谢。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-11-08T22:25:10.510

`strip`仅删除字符串开头和结尾的字符。你想使用`replace`：

```
str2 = str.replace("\n", "")
re.sub('\s{2,}', ' ', str) # To remove more than one space 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2018-08-30T01:45:52.417

正如@john 所提到的，最可靠的答案是：

```
string = "a\nb\rv"
new_string = " ".join(string.splitlines()) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-04-06T22:41:22.003

因为我最近在从文件中读取文本时遇到了同样的问题，所以回答得很晚；尝试了几种选择，例如：

```
with open('verdict.txt') as f: 
```

下面的第一个选项生成一个名为 的列表`alist`，`'\n'`剥离后，然后连接回全文（如果您希望只有一个文本，则可选）：

```
alist = f.read().splitlines()
jalist = " ".join(alist) 
```

下面的第二个选项更容易和简单地产生称为用空格`atext`替换的文本字符串；`'\n'`

```
atext = f.read().replace('\n',' ') 
```

有用; 我已经做了。这是干净、简单和高效的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-08T22:28:10.533

`strip()`删除前导和尾随空格后返回字符串。见[文档](https://docs.python.org/2/library/string.html#string.replace)

在您的情况下，您可能想尝试[replace()](https://docs.python.org/2/library/string.html#string.replace)：

```
string2 = string1.replace('\n', '') 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-08T23:20:37.140

或者你可以试试这个：

```
string1 = 'Hello \n World'
tmp = string1.split()
string2 = ' '.join(tmp) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-17T08:26:02.667

这应该在许多情况下都有效 -

```
text = ' '.join([line.strip() for line in text.strip().splitlines() if line.strip()])
text = re.sub('[\r\n]+', ' ', text) 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-08T22:32:19.780

[strip()](https://docs.python.org/2/library/stdtypes.html#str.strip)返回删除了前导和尾随空格（默认情况下）的字符串。

所以它会变成`" Hello World "`，`"Hello World"`但它不会删除 \n 字符，因为它存在于字符串之间。

尝试[替换（）](https://docs.python.org/2/library/string.html#string.replace)。

```
str = "Hello \n World"
str2 = str.replace('\n', '')
print str2 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-02-05T12:38:20.260

如果文件在文本中间包含换行符，`strip()`也`rstrip()`不会解决问题，

> strip 系列用于从字符串的开头和结尾修剪

`replace()`是解决你问题的方法

```
>>> my_name = "Landon\nWO"
>>> print my_name
   Landon
   WO

>>> my_name = my_name.replace('\n','')
>>> print my_name
LandonWO 
```

# iphone - AlAssetLibrary 返回空结果

> ID：13298912
> 
> 赞同：1
> 
> 时间：2012-11-08T22:23:57.887
> 
> 标签：iphone, ios, xcode, ios6, alassetslibrary

我正在尝试挑选一些相机胶卷元数据。当我枚举资产时，我似乎无法检索任何信息并获得一个空数组。有没有我错过的步骤？

我的代码：

```
assets = [[NSMutableArray array] init]; 

void (^assetEnumerator)(ALAsset *, NSUInteger, BOOL *) = ^(ALAsset *asset, NSUInteger index, BOOL *stop) {
    if(asset != NULL) {
        [assets addObject:asset];
        dispatch_async(dispatch_get_main_queue(), ^{
        });
    }
};

void (^assetGroupEnumerator)(ALAssetsGroup *, BOOL *) =  ^(ALAssetsGroup *group, BOOL *stop) {
    if(group != nil) {
        [group enumerateAssetsUsingBlock:assetEnumerator];
    }
};

library = [[ALAssetsLibrary alloc] init];

[library enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos 
                       usingBlock:assetGroupEnumerator
                     failureBlock: ^(NSError *error) {
                         NSLog(@"Failed.");
                     }];    

NSLog(@"%@", assets); //prints an empty array 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T14:26:25.357

Midhun MP 是正确的，您没有等待异步枚举完成。在这种情况下，您有异步块调用其他异步块，因此要知道所有枚举何时完成并不简单。

如果您想知道何时完成，并最终得到一个包含所有枚举资产的数组，您可以使用 dispatch_groups。这是您可以做到这一点的一种方法（我包含了多个 ALAssetGroup 类型以表明这可以与多个专辑一起使用）：

```
dispatch_group_t loadingGroup = dispatch_group_create();
NSMutableArray * assets = [[NSMutableArray array] init];
NSMutableArray * albums = [[NSMutableArray array] init];

void (^assetEnumerator)(ALAsset *, NSUInteger, BOOL *) = ^(ALAsset *asset, NSUInteger index, BOOL *stop) {
    if(index != NSNotFound) {
        [assets addObject:asset];
        dispatch_async(dispatch_get_main_queue(), ^{ });
    } else {
        dispatch_group_leave(loadingGroup);
    }
};

void (^assetGroupEnumerator)(ALAssetsGroup *, BOOL *) =  ^(ALAssetsGroup *group, BOOL *stop) {
    if(group != nil) {
        [albums addObject: group];
    } else {
         NSLog(@"Found %d albums", [albums count]);
         // album loading is done
        for (ALAssetsGroup * album in albums) {
            dispatch_group_enter(loadingGroup);
            [album enumerateAssetsUsingBlock: assetEnumerator];
        }
        dispatch_group_notify(loadingGroup, dispatch_get_main_queue(), ^{
            NSLog(@"DONE: ALAsset array contains %d elements", [assets count]);
        });
    }
};

ALAssetsLibrary * library = [[ALAssetsLibrary alloc] init];

[library enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos | ALAssetsGroupAlbum
                   usingBlock:assetGroupEnumerator
                 failureBlock: ^(NSError *error) {
                     NSLog(@"Failed.");
                 }]; 
```

（在这个例子中，添加各种块是安全的`assets`，`albums`因为枚举都发生在主线程上。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T23:01:11.537

如果您在 iOS 6 上运行此程序，则可能是用户拒绝了您的应用程序访问资产库的访问权限。如果是这种情况，`failureBlock`则调用 。

另请注意，它`usingBlock`是异步调用的，因此您尝试记录`assets`为时过早。您应该将该`NSLog`语句移到枚举块的末尾。

从文档中`enumerateGroupsWithTypes:usingBlock:failureBlock:`

> 通过执行枚举块将结果一一传递给调用者。
> 
> 此方法是异步的。枚举组时，可能会要求用户确认应用程序对数据的访问；但是，该方法会立即返回。您应该对 enumerationBlock 中的资产执行任何您想要的工作。
> 
> 如果用户拒绝访问应用程序，或者不允许任何应用程序访问数据，则调用 failureBlock。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T03:55:29.617

您的 NSLog 将始终显示一个空数组，因为 NSLog 语句将在完成异步枚举块之前工作。

**解决方案：**

首先检查您的照片库是否为空。然后在里面添加NSLog：

```
void (^assetEnumerator)(ALAsset *, NSUInteger, BOOL *) = ^(ALAsset *asset, NSUInteger index, BOOL *stop) {
    if(asset != NULL) {
        [assets addObject:asset];
        NSLog(@"Asset : %@", asset);
        dispatch_async(dispatch_get_main_queue(), ^{
        });
    }
}; 
```

# java - ADT20 和外部 JAR

> ID：13298915
> 
> 赞同：2
> 
> 时间：2012-11-08T22:24:08.150
> 
> 标签：java, android, jar, adt

![在此处输入图像描述](../Images/b5bf30d2d80f2c07610c738e879a0aee.png)在尝试使用外部 jar 时，我已经尝试了一切来避免 NoClassDefFoundError 。没有骰子。WTF ADT？！

从一个干净的全新项目中，将外部 jar 添加到构建路径，放入`libs`文件夹，确保已选中。Android -> Fix Project Properties，添加和删除，冲洗和重复。我检查了 jar 的内容，我的文件在那里！我引用了20种方式，删除添加和重建，仍然找不到dern的东西！

从第 1 步开始，有人有没有办法使用 eclipse 和 ADT 20 在 Android 内部制作一个外部 jar？

**编辑 1**

我尝试仅将其添加到`libs/`文件夹中，并尝试了 Ali[在此 SO question 中](https://stackoverflow.com/questions/10059152/java-lang-noclassdeffounderror-adt-17-known-issue)建议的内容。我想我将不得不尝试直接将源代码添加到我的项目中，但这似乎很愚蠢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T08:17:39.900

哦。我的。善良。

事实证明，**Android（仍然）不支持 Java 7**，当我创建我的外部项目时，它具有 1.7（Java 7）作为默认合规级别！将其调低以匹配我的 Android 项目的合规性，这一切都变得很花哨。

像这样的东西

```
List<MyClass> mList = new ArrayList<>(); 
```

各种`@Override`显然使Android陷入困境。

希望这可以帮助其他在这个问题上秃顶的人！

# sql - SQL命令获取最大值的字段，无需进行两次选择

> ID：13298921
> 
> 赞同：2
> 
> 时间：2012-11-08T22:24:28.580
> 
> 标签：sql, oracle, max

我开始学习 SQL 并且正在做这个练习：我有一个“书籍”表，其中包含每本书的信息（包括价格和流派 ID）。我需要得到平均价格最高的类型的名称。我想我首先需要按类型对价格进行分组，然后检索最高的名称。

我知道我可以通过以下方式获得 GENRE VS COST 的结果：

```
select b.genre, 
       round(avg(b.price),2) as cost 
from books b 
group by b.genre; 
```

我的问题是，要从该结果中获得 AVG 价格最高的类型，我是否必须做出：

```
select aux.genre 
from (
   select b.genre, 
          round(avg(b.price),2) as cost 
   from books b 
   group by b.genre
) aux 
where aux.cost = (select max(aux.cost) 
                  from (
                      select b.genre, 
                             round(avg(b.price),2) as cost 
                      from books l 
                      group by b.genre
                  ) aux); 
```

这是不好的做法还是没有其他方法？我得到了正确的结果，但我对创建两次相同的选择并不满意。

我没有使用 PL SQL，所以我不能使用变量或类似的东西..

任何帮助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T22:58:04.273

On Sql server, you can use the avg aggragate inside the windowing function row_number

```
 with m as(
    select genre, 
         avg(price) cost, 
         row_number() over(order by avg(price) desc) rw
    from books
    group by genre
 )
 select * from m
 where rw=1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T22:30:14.937

```
with avg_price as (
   select b.genre, 
          round(avg(b.price),2) as cost 
   from books b 
   group by b.genre
)
select genre 
from avg_price
where cost = (select max(cost) from avg_price); 
```

（这是 ANSI 标准 SQL，适用于所有现代 DBMS）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T22:48:18.353

在 MS-SQL 中，您可以这样做：

```
SELECT TOP 1 genre, ROUND(AVG(price),2) AS cost 
FROM books
GROUP BY genre
ORDER BY ROUND(AVG(price),2) DESC 
```

（TOP 子句是特定于 MS-SQL 的，但在其他 DBMS 中也有类似的结构）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T22:48:53.840

```
select top 1
  genre,
  avg(b.price) as cost
from books
group by
  genre
order by
  cost desc 
```

# reporting-services - rs.exe 报告脚本 - 无法连接到服务器 ReportService2005.asmx

> ID：13298922
> 
> 赞同：6
> 
> 时间：2012-11-08T22:24:38.157
> 
> 标签：reporting-services

我调用这个 rs.exe 脚本来运行和导出报告：

```
rs -i RunReport.rss -s http://localhost/reportserver -u myUsername -p myPassword -e Exec2005 
```

我得到的错误是：

```
Could not connect to server: http://localhost/reportserver/ReportService2005.asmx 
```

目前，我们所有的报告都设置为使用“用户提供的凭据”。如果我去报告并输入用户名和密码，它运行得很好。它只是无法运行脚本。

当我将报告的数据源更改为使用 Windows 集成安全性时，该脚本可以正常工作。

关于我做错了什么的任何想法？或者，有没有办法将报告的权限更改为 Windows Auth，然后再改回来？

SSRS 2012

我的 rss 脚本是

```
Public Sub Main()
  rs.Credentials = System.Net.CredentialCache.DefaultCredentials

  Dim format as string = "EXCEL"
  Dim fileName as String = "C:\test.xls"
  Dim reportPath as String = "/MyDirectory/Report1"

  ' Prepare Render arguments
  Dim historyID as string = Nothing
  Dim deviceInfo as string = Nothing
  Dim extension as string = Nothing
  Dim encoding as string 
  Dim mimeType as string 
  Dim warnings() AS Warning = Nothing
  Dim streamIDs() as string = Nothing
  Dim results() as Byte

  rs.LoadReport(reportPath, historyID)

  results = rs.Render(format,  deviceInfo, extension, _
   mimeType, encoding,  warnings, streamIDs)

  ' Open a file stream and write out the report
  Dim stream  As FileStream = File.OpenWrite(fileName)
  stream.Write(results, 0, results.Length)
  stream.Close()
End Sub 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-09-15T13:20:28.607

我遇到了同样的错误，这是由于配置中的错误：脚本设置为针对报表管理器 URL 而不是 Web 服务 URL 运行（两者都可以在 Reporting Services 配置管理器中找到）。切换到 Web 服务 URL 为我解决了这个问题。

（我认为您在过去 3 年中找到了解决方法，但如果其他人遇到同样的问题，我会将其放在这里）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-26T17:23:20.430

我有一个非常相似的问题。对我来说，摆脱默认凭据修复了它。我要求我们的网络人员制作一组通用凭据（带有静态密码）并改用它。

```
rs.Credentials = new System.Net.NetworkCredential("ACCOUNTNAME", "PASSWORD", "DOMAIN"); 
```

如果您对此仍有问题，请告诉我。我花了很多时间处理与此相关的错误。您还可以查看 SSRS 日志文件以获取更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-08T16:18:07.540

我和你有完全相同的问题。对我来说，这是由为该 URL 创建的***Windows 凭据引起的。***我也看到用户也遇到过这种情况，但当时我不知道如何解决该消息。他们只是登录并继续前进。对我来说，我遇到的问题并不局限于 chrome。我也无法使用命令行执行工具（RS.exe），命令行显示' `Could not connect to the server`'。

`gcod049/reports`在我删除 Windows 凭据管理器中保存的凭据后，URL 问题得到了解决。

* * *

**图1：登录问题**

[![在此处输入图像描述](../Images/d89aed99cece71033bcd2139f3c5d9c5.png)](https://i.stack.imgur.com/aMHFQ.png)

**图 2：RS.exe 问题**

[![在此处输入图像描述](../Images/306928a3d98a61792a99077d93adc589.png)](https://i.stack.imgur.com/0cx8N.png)

**Fig3: Credentials Mgr** -- Control Panel\All Control Panel Items\Credential Manager -- 从 Vault 中删除：“gcod049”

[![在此处输入图像描述](../Images/5aed3e6147b50735622a34c165489cc8.png)](https://i.stack.imgur.com/hgNcY.png)

[![在此处输入图像描述](../Images/c692b87ba3fe35e4adee9c98a82f68d0.png)](https://i.stack.imgur.com/KNJX9.png)

**Fig4:** RESOLVED -- 浏览器登录提示消失 -- RS.exe 连接到服务器

[![在此处输入图像描述](../Images/4312df161b8b052e32823b8c388241d8.png)](https://i.stack.imgur.com/15h0T.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-18T16:56:37.773

我有相同的错误消息（无法连接到服务器：[http://localhost/reportserver/ReportService2010.asmx](http://localhost/reportserver/ReportService2010.asmx)）。

我能够通过使用 Reporting Services 配置管理器重新创建报表服务器数据库来解决该问题。

1.  使用 SQL Server Management Studio 连接到 SQL Server
2.  删除报表服务器数据库（称为 ReportServer 或 ReportServerSQLExpress）
3.  启动 Reporting Services 配置管理器（C:\ProgramData\Microsoft\Windows\Start Menu\Programs\Microsoft SQL Server 2012\Configuration Tools\Reporting Services Configuration Manager）
4.  选择数据库
5.  单击更改数据库并按照向导创建新的报表服务器数据库

# ruby-on-rails-3 - Rails 为管理员用户批量分配

> ID：13298925
> 
> 赞同：3
> 
> 时间：2012-11-08T22:24:41.823
> 
> 标签：ruby-on-rails-3

我正在使用 rolify 管理用户角色，当我尝试通过用户表单更新角色时，我收到以下信息：

```
can't mass-assign protected attributes: role_ids 
```

这很令人欣慰，但我想知道，我如何允许管理员通过批量分配更新用户角色但不允许普通用户？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T22:26:31.190

您可以在模型中使用不同的`attr_accessible`列表`User`：

```
attr_accessible :name
attr_accessible :name, :role_ids, :as => :admin 
```

然后在您的管理控制器的`create`and操作中：`update`

```
User.create(params[:user], :as => :admin)

user.update_attributes(params[:user], :as => :admin) 
```

# sql - 如何获取没有 NULL 的最新日期？

> ID：13298927
> 
> 赞同：1
> 
> 时间：2012-11-08T22:24:50.863
> 
> 标签：sql, sql-server-2005, datetime

我正在尝试根据他们的派遣日期从工作中提取工作订单以找到被忽视的工作。我只想要具有该作业最近调度日期的工作订单，以便我可以确定自上次调度以来的时间。但是，我不想拉出任何具有空工作订单的工作，因为这些工作正在被分派。我尝试了 ROW_NUMBER 语句，然后只拉出第一行，但我需要空值首先出现在列表中，然后是最新日期，这样就不起作用了。这些工作也有一个打开或关闭的状态，打开的那些总是为空的这是我到目前为止的脚本：

```
SELECT DISTINCT

    [O].[Name] AS [Opportunity],
    [O].[Office_Location__c] AS [Office],
    MAX([WO].[saasdisp__Dispatch_Date__c]) AS [MaxDate]

FROM    [Opportunity] AS [O]
    JOIN [saasdisp__Work_Order__c] AS [WO] ON ([O].[Name] = [WO].[OppName__c]
                AND [O].[Id] = [WO].[Opportunity__c])

WHERE   [O].[StageName] = 'In Progress'

GROUP BY    [O].[Name],
            [O].[Office_Location__c] 
```

这就是我得到的：

```
Opportunity         Office        MaxDate
Azad, Fariba          LA    2012-11-08 00:00:00.000
Cantrell, Timothy L.  LA    2012-11-07 00:00:00.000
Feiner, Jeffrey       LA    2012-11-06 00:00:00.000
Greasby, Kat          LA    2012-11-06 00:00:00.000 
```

这是我所需要的，除了这些机会实际上有空日期的未结工作订单等待发送。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:30:12.017

在 where 子句中添加一个`NOT EXISTS`检查：

...

```
WHERE   [O].[StageName] = 'In Progress'

AND NOT EXISTS (
    SELECT *
    FROM [saasdisp__Work_Order__c] AS [WO2] 
    WHERE [WO2].[saasdisp__Dispatch_Date__c] IS NULL
          AND [O].[Name] = [WO2].[OppName__c]
          AND [O].[Id] = [WO2].[Opportunity__c]
)

GROUP BY    [O].[Name],
            [O].[Office_Location__c] 
```

# jquery - 将 Rails 变量传递给 AJAX 调用

> ID：13298930
> 
> 赞同：2
> 
> 时间：2012-11-08T22:24:59.367
> 
> 标签：jquery, ajax, ruby-on-rails-3

我想对产品评论（stackoverflow 风格）实施 AJAX Upvote / Downvote。

每次评论都会产生部分投票：

_vote.html.erb

```
 <div id="vote_<%= review.id %>" class="vote">

      <%= link_to 'Vote Up', upvote_kata_review_path(@product, @review), :class => "upvote", :method => :post, :remote => true %>

      <span><%= review.plusminus %></span>  <!--show the current vote-->

      <%= link_to 'Vote Down', downvote_kata_review_path(@product, @review), :class => "downvote", :method => :post, :remote => true %>

    </div> 
```

和一个 upvote.js.erb

```
$(document).ready(function(){
  $('#vote_id???').html("<%= escape_javascript render :partial => 'votes/vote' %>");
}); 
```

所以当用户点击 upvote 时，partial 将被重新渲染以显示新的投票数。

问题是，一个页面中有很多评论。在 AJAX 调用之后，JavaScript 不知道哪个评论的投票偏向于重新呈现。（ $('#vote_id???') 部分）

Rails 有没有办法将评论 ID 传递给 JavaScript？

或实现此功能的任何其他替代方案。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T22:28:20.393

如果您`@review`在操作中定义了一个变量`upvote`，就像我怀疑的那样，那么您可以这样做：

```
$('#vote_<%= @review.id %>').html("<%= escape_javascript render :partial => 'votes/vote' %>"); 
```

# types - 原始数据类型及其定义

> ID：13298934
> 
> 赞同：-1
> 
> 时间：2012-11-08T22:25:11.767
> 
> 标签：types

晚上好，

我需要有关原始数据类型及其定义的更多信息：

*   细绳
*   布尔值
*   大批
*   整数
*   漂浮

例如，字符串的基本定义是什么？不是整数？

整数的定义是什么？不应该是字符串吗？

你能感觉到正在创建的无限循环吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:20:09.047

技术/严格定义取决于编程语言，但通常：

*   字符串：一个字符序列，通常是字母和人类可读的，例如“你好”
*   布尔值：真或假（有时表示为 1 或 0）
*   数组：元素的有序序列；通常（取决于语言）数组中的所有元素必须具有相同的类型，例如字符串数组或整数数组
*   整数：不带分数的数字，例如 0、1、2 或 -1；但不是 1.5
*   浮点数：可能包含小数（非整数）部分的数字，例如包含 1 但也包含 1.34 或 -2.6

# oracle - 比较两个不同 oracle 表中的两个逗号分隔列

> ID：13298935
> 
> 赞同：0
> 
> 时间：2012-11-08T22:25:12.177
> 
> 标签：oracle, compare

我想将 oracle 表中的逗号分隔列与不同表中的另一个逗号分隔列进行比较。如果第一列中的所有值（在逗号分隔的列中且无论它们的顺序如何）都包含在第二列中，则不应返回该行。

例如 -

1.  第 1 列有 a,b,c,def 第 2 列有 a,c,b

    这不应返回，因为第 2 列中的 a、c 和 b 包含在第 1 列中，无论它们的顺序如何。

2.  第 1 列有 a,cl,owd 第 2 列有 a,owd,pp

    应该返回此行，因为第 2 列的 'pp' 不包含在第 1 列中。

3.  第 1 列有 vvv,ccc,rr 第 2 列有 ccc,rr

    不应返回此行。

我可以在 SQL 中完成这个吗？不期望过程或功能。

感谢所有的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T06:56:13.933

第一：我认为您的示例与您的问题不符。

但专注于您的问题：*如果第一列的所有值（在逗号分隔的列中且无论它们的顺序如何）都包含在第二列中，则不应返回该行。*

您需要将 csv 解析为一个集合（`regexp_substr`部分），然后检查第二列的集合是否完全包含第一列（`minus`部分）的集合：

```
SELECT *
  FROM csv
 WHERE EXISTS
         (SELECT REGEXP_SUBSTR (col1, '[^,]+', 1, ROWNUM)
            FROM DUAL
           CONNECT BY ROWNUM <= LENGTH (col1) - LENGTH (REPLACE (col1, ',')) + 1
          MINUS
          SELECT REGEXP_SUBSTR (col2, '[^,]+', 1, ROWNUM)
            FROM DUAL
          CONNECT BY ROWNUM <= LENGTH (col2) - LENGTH (REPLACE (col2, ',')) + 1
         )
; 
```

有关工作示例，请参见[http://www.sqlfiddle.com/#!4/3cdb3/1 。](http://www.sqlfiddle.com/#!4/3cdb3/1)

# php - PHP产品页面制作类别和子类别链接

> ID：13298944
> 
> 赞同：-1
> 
> 时间：2012-11-08T22:25:40.150
> 
> 标签：php, hyperlink, categories, product

一切都适用于这段代码，但我希望有一个从 product.php 返回到类别和子类别的链接。

我有 3 个父类别 page1.php、page2.php 和 page3.php 也适用于那些我有子类别 page1.php?subcat=1,2,3,4 page2.php?subcat=1,2,3,4

这是我使用到 product.php 的 php 代码

```
if (isset($_GET['id'])) {
$id= $_GET['id'];
$result2 = mysql_query("SELECT * FROM products WHERE id='$id' LIMIT 1");
$count = mysql_num_rows($result2);
if ($count > 0) {
while($row = mysql_fetch_array($result2)){ 
$pid = $row["id"];
$pname = $row["name"];
$pprice = $row["price"];
$pnoncategoryid = $row["noncategoryid"];
$pdesc = $row["desc"];
}

// gjeje emrin e categorise dhe nencategorise
$result3=mysql_query("select * from noncategory WHERE ncid=$pnoncategoryid");
while($row=mysql_fetch_array($result3)){
$noncategoryname = $row["ncname"];
$categoryid = $row["categoryid"];
}

$result4=mysql_query("select * from category WHERE cid=$categoryid");
while($row=mysql_fetch_array($result4)){
$categoryname = $row["cname"];
}
//mbaro 
```

在类别和子类别中，我想要链接：

```
<h3><?php echo $pname; ?></h3>
<div class="pbr"></div>
<h4>Category:</h4>
<p class="price"><?php echo $categoryname; ?> / <?php echo $noncategoryname; ?></p>
<div class="pbr"></div>
<h4>Description:</h4>
<p class="desc"><?php echo $pdesc; ?></p>
<div class="pbr"></div>
<h4>Price:</h4>
<p class="price"><?php echo $pprice; ?> <?php echo _valuta_ ?></p> 
```

抱歉我的英语不好，希望有人能理解我:))

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:49:24.897

您想将文本转换为超链接。像这样？

```
<?php echo "<a href='category".$categoryid.".php'>".$categoryname."</a>"; ?> / 
<?php echo "<a href='category".$categoryid.".php?subcat=".$pnoncategoryid."'>".$noncategoryname."</a>"; ?> 
```

# jquery-ui - jquery点击替换为另一个图像

> ID：13298946
> 
> 赞同：0
> 
> 时间：2012-11-08T22:25:46.930
> 
> 标签：jquery-ui, jquery, jquery-plugins, jqgrid

当我单击添加图像 div 时，我应该用另一个背景为白色的十字图像替换当前图像

你能告诉我如何完成它...：http: [//jsfiddle.net/6Mmme/11/](http://jsfiddle.net/6MmMe/11/)

交叉图像[https://docs.google.com/file/d/0B3IBJKENGE7ReWpack5aWmdLSmc/edit](https://docs.google.com/file/d/0B3IBJKENGE7ReWpack5aWmdLSmc/edit)

```
$("div").hover(
  function () {
    $(this).append($("<div>add image</div>"));
  }, 
  function () {
    $(this).find("div:last").remove();
  }
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:40:32.353

最直接的方法是改变子元素的`src`属性：`<img>``<div>`

```
$("div").hover(
    ....
).click(function() {
    $(this).children("img").attr("src", "newUrl");
}); 
```

见[http://jsfiddle.net/6MmMe/15/](http://jsfiddle.net/6MmMe/15/)

**更新**：如果您想在单击“添加图像”div 时更改图像，您可以使用以下代码

```
$("div").hover(
  function () {
    $("<div>add image</div>").click(function () {
        $(this).parent().children("img").attr("src", "newUrl");
    }).appendTo(this);
  }, 
  function () {
    $(this).find("div:last").remove();
  }
); 
```

见[http://jsfiddle.net/6MmMe/20/](http://jsfiddle.net/6MmMe/20/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T22:50:15.560

```
$(".container").on("click", function(){
    $(this).find('img').attr('src', 'https://lh3.googleusercontent.com/m7_Lya1KfrYkW1_i1ZyiTrDu6xazZzfvEvG2I6vS7L66QMYQhbhfDxw5SGLu6o-7d5q0y8HY-zVyudf2');                         
}); 
```

# matlab - 如何从matlab中的6列序列中的矩阵中提取两列

> ID：13298947
> 
> 赞同：-1
> 
> 时间：2012-11-08T22:25:56.233
> 
> 标签：matlab

基本上我有一个 <96x659 double> 矩阵，我想提取第 1 列和第 2 列，然后是第 8 列和第 9 列，然后是第 15 列和第 16 列等等。所以我希望每 2 列分步为 6 。我希望我足够清楚。我是 matlab 的新手。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T22:31:14.290

您真正需要做的就是构建所需的列列表：

```
columns = [1:7:size(matrix,2)+1,  2:7:size(matrix,2)+1];
submat = matrix(:, columns); 
```

请记住，这不一定会按您想要的顺序返回列。如果您希望列按升序排列，您可以替换

```
submat = matrix(:, sort(columns)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T12:00:53.740

[Matlab Summary and Tutorial](http://www.math.ufl.edu/help/matlab-tutorial/matlab-tutorial.html)

This is a pretty decent introduction, if the Matlab documentation itself appears to be a little dense. Go through the examples, try them out.

# c# - 使用 jQuery 在嵌套列表视图中获取 DDL 选定值

> ID：13298950
> 
> 赞同：0
> 
> 时间：2012-11-08T22:26:11.190
> 
> 标签：c#, jquery, listview, selector, ddl

我有一个嵌套的 ASP.NET ListView，外部的一个呈现问题组，内部的一个呈现组内的不同问题。一些问题以下拉列表的形式呈现。我想在不进行回发的情况下检测更改的选定值。我见过很多看起来像“$(#control).val()”的引用，但我需要更多的灵活性。

我在 C# 代码中添加 JavaScript，它看起来像这样：

```
js = string.Format("javaScript:setInputSelectOption('{0}'); return false;", hidSelector.Value);
ddlInputSelectOptions.Attributes.Add("onchange", js); 
```

生成的 aspx 文件包含此生成的代码；

```
<div id='Management_q2'>
<input type="hidden" name="ctl00$body$lstExecutive$ctrl1$hidSelector" id="ctl00_body_lstExecutive_ctrl1_hidSelector" value="Management" />
    <select name="ctl00$body$lstExecutive$ctrl1$ddlInputSelectOptions"
  id="ctl00_body_lstExecutive_ctrl1_ddlInputSelectOptions" 
  onchange="javaScript:setInputSelectOption('Management'); return false;">
    <option value="0">Not Present</option>
    <option selected="selected" value="1">Occasionally</option>
    <option value="2">Customarily and Regularly</option>
    <option value="3">Constantly</option>
</select>
</div> 
```

我的 .js 文件包含以下代码：

```
function setInputSelectOption(question) {
    var n = $('[id$=' + question + '_q2]>[id$=hidSelector]').val();
    var v = $('[id$=' + question + '_q2]>[id$=ddlInputSelectOptions]');
    setDDLData(n, v);
} 
```

使用 Chrome，我在“var v =”行上尝试了这些变体，并得到了相应的结果：

> $('[id$=' + question + '_q2]>[id$=ddlInputSelectOptions]'): d.fn.d.init[1] $('[id$=' + question + '_q2]>[ id$=ddlInputSelectOptions]').value: 未定义 $('[id$=' + question + '_q2]>[id$=ddlInputSelectOptions]').val(): ""

所以我（再一次）寻找正确的咒语来对 jQuery 说，这样它就会从 DDL 返回选定的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T23:00:21.617

I would suggest keeping it simple. Add a data- attribute to the DDL you wish to get the values from. Use jQuery to find the value.

```
ddl.Attributes.Add("data-ddl","reference"); 
```

Then in JS.

```
// get value
var ddlValue = $("select[data-ddl='reference']").val();
// assign value
$("select[data-ddl='reference']").val("option"); 
```

Also, if the JS is only for UI logic, it's best to keep it out of the C# code and run it on the page ready using jQuery. So in your JS file.

```
$(function(){
    // bind a function to the select change event
    $("select[data-ddl='reference']").change(function(){
        // insert UI logic here
    });
}); 
```

# mod-rewrite - 如何在 htaccess 中为特定 URL 添加 404

> ID：13298951
> 
> 赞同：1
> 
> 时间：2012-11-08T22:26:17.433
> 
> 标签：mod-rewrite, rewrite, http-status-code-404

我在[http://www.example.com/my-inner-page](http://www.example.com/my-inner-page)有一个页面。当有人尝试访问此 url 时，我需要我的服务器以 404 响应。我将在 htaccess 中使用什么规则来完成此操作？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:53:28.960

您可以使用重定向匹配：

```
RedirectMatch 404 "my-inner-page" 
```

# android - 在后台运行 Android 应用程序的良好做法

> ID：13298954
> 
> 赞同：2
> 
> 时间：2012-11-08T22:26:38.143
> 
> 标签：android, background, android-activity

我有一个 VOIP 应用程序，我希望它始终在后台运行，以使其响应来电。通过阅读一些论坛，我发现在后台运行该应用程序会导致电池耗尽。

为了在后台运行应用程序，我应该遵循哪些好的做法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T23:29:42.330

> 通过阅读一些论坛，我发现在后台运行该应用程序会导致电池耗尽。

更重要的是，一直运行某些东西会增加您耗尽电池的机会。

> 为了在后台运行应用程序，我应该遵循哪些好的做法？

作为一个 VOIP 应用程序已经违反了一些“良好做法”。例如，您将需要（尝试）拥有一个永久运行的服务，以维持您与 VOIP 服务器的开放套接字连接。而且，根据您的网络设置方式，您可能需要尝试维护一个`WifiLock`，这会耗尽电池电量。

一般而言，您只想确保您的服务*尽可能少地*执行，除非正在进行呼叫。例如，虽然您可能需要定期向 VOIP 服务器发送数据包以保持连接处于活动状态，但请尽量不经常这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T15:23:44.220

有许多使用推送通知功能的智能 VoIP 应用程序。这不会消耗太多电池，但您必须拥有一致的互联网连接。Axvoice 就是这样一种选择。查看他们的应用程序：[http ://www.axvoice.com/support/mobile-voip-applications.html](http://www.axvoice.com/support/mobile-voip-applications.html)

它们也将像其他应用程序一样在后台运行，但 Axvoice 和其他应用程序之间的区别在于您可以减少电池消耗，因为它不会一直与实时服务器通信。请看看这个： http: [//www.wikihow.com/Save-Battery-Power-on-an-Android](http://www.wikihow.com/Save-Battery-Power-on-an-Android)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T22:49:58.680

使用广播接收器。它记录在这里

[http://developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

当指定的广播通过系统广播时，BroadcastReciever 将执行它的代码。换句话说，当您接到电话时，系统会发出一个广播，说明有来电。如果让您的接收器接收该广播，它就会做出反应。可以把它想象成 Android 系统正在广播许多不同的广播电台，而 BroadcastReciever 就像收音机一样。您可以将其设置为接收您想要的任何广播并在它执行时执行一些代码。

# php - 如何在服务器端验证表单，解决方案？

> ID：13298955
> 
> 赞同：0
> 
> 时间：2012-11-08T22:26:40.987
> 
> 标签：php, html

那么如何在服务器端验证表单提交的数据呢？

你做这样的事情：

```
if($_POST['field_name'] == 'foo')
{
  $error['field'] = 'Please try again';
}

if($_POST['something'] == 'two')
{
  $error['field_2'] = 'Please try again';
}

if($_POST['field_3'] == 'something')
{
  $error['field_3'] = 'Please try again';
} 
```

这是正确的吗？这是最好的解决方案吗？

//LE 编辑

我的问题是，如果这是正确的方法吗？使用大量 if 语句，您可以有 20 个 if 来检查表单？我只是想确保这是正确的方法，如果我使用很多 if 语句不是什么大问题（问题）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T22:29:07.097

Not really, I don't think you know what the values should be so this will not work.

You should look at every field to determine what it can be. For numbers you can use functions like `is_numeric` and for e-mail addresses and urls you can use php's [filter functions](http://php.net/manual/en/function.filter-var.php). For other stuff you can use regular expressions, etc.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:35:47.367

大多数人在编写自己的验证器时都会使用[GREP 。](http://php.net/manual/en/function.preg-grep.php)验证可以存储在特定于每种类型字段的函数中。

大多数人专注于[SQL 注入验证](http://php.net/manual/en/security.database.sql-injection.php)。

一个好的框架，如 Code Ignitor，将[提供验证机制](http://codeigniter.com/user_guide/libraries/form_validation.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T22:33:40.520

已经有一些预先编写的库（函数、类）来处理 PHP 中的表单验证。

[http://www.google.com/search?q=form+validation+php](http://www.google.com/search?q=form%20validation%20php)

我怀疑在这一点上，您需要花时间为如此通用的东西编写自定义解决方案。可能您的规则会有所不同，但这都可以使用现有代码进行定制。

（更不用说您可以使用许多 PHP 框架之一，它们都内置了表单生成和验证）。

# command-line - 如何从命令行进行 Couchbase XDCR 配置？

> ID：13298956
> 
> 赞同：1
> 
> 时间：2012-11-08T22:26:47.930
> 
> 标签：command-line, couchbase

我可以通过 Web 控制台以外的方式创建和中断跨集群复制链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:08:23.290

可以在此处找到有关 Rest API 的文档：

管理跨数据中心复制 (XDCR) [http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-admin-restapi-xdcr.html](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-admin-restapi-xdcr.html)

创建复制： http: [//www.couchbase.com/docs/couchbase-manual-2.0/couchbase-admin-restapi-xdcr-create-repl.html](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-admin-restapi-xdcr-create-repl.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T23:52:04.813

Web 控制台只是 Couchbase REST API 的 UI，因此您可以尝试创建 CLI 实用程序来操作 HTTP 请求，例如“controller/createReplication”。

不幸的是，官方工具和众多 sdk 都不支持此功能。

# c# - 禁用覆盖多个 cookie 值

> ID：13298959
> 
> 赞同：0
> 
> 时间：2012-11-08T22:27:05.683
> 
> 标签：c#, asp.net, vb.net

我注意到关于 asp.net 中多个 cookie 的一些事情，当您在不同的回发中添加新值时，较早的值将被删除，而最后的值将仅保留

- 例如 Default1.aspx.vb 中的 (VB.net)

```
Response.Cookies("mycookie")("abc") = 123 
```

在 Default2.aspx.vb

```
Response.Cookies("mycookie")("def") = 456 
```

现在，如果 default1 执行，“abc”值将存储在“mycookie”中，但如果然后 defualt2 执行，“abc”值将替换为新的“def”值！。

我尝试了以下解决方案，但我对此感到不舒服，因为我认为它占用了大量资源而没有意义：在 Default2.aspx.vb

```
Dim OldValues As NameValueCollection = Request.Cookies.Get("mycookie").Values
Response.Cookies.Get("mycookie").Values.Clear()
Response.Cookies.Get("mycookie").Values.Add(OldValues)
Response.Cookies.Get("mycookie").Values.Add("def", 456) 
```

现在，是否有任何其他选项可以执行此操作，例如禁用设置中的某些内容或防止覆盖早期值的任何内容？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T02:35:15.487

嗯，没有想法？！

无论如何，由于没有其他选择，我决定使用我的代码并做一些封装，为了公共利益，我将我的代码发布在这里可能会使一些感兴趣的兄弟受益。

这里的主要思想是我开发一个大型 Web 应用程序，我需要在多层次范围内存储用户选择，例如按首选项保存订单、每页项目数等。以及多层次范围，例如长期保存首选项时间段（在 cookie 中）或在短时间内（在会话中）。

由于这些选择太多，我被迫使用多个 cookie，因为某些浏览器中允许的 cookie 数量有限。

这是执行此技巧的封装函数：

```
Public Enum StoredPropertyScope As SByte
    SessionAndCookies = 0
    SessionOnly = 1
    CookiesOnly = 2
End Enum
Public Shared Function GetStoredProperty(ByVal group As String, ByVal Key As String, Optional scope As StoredPropertyScope = StoredPropertyScope.SessionAndCookies) As Object
    If (scope = StoredPropertyScope.SessionAndCookies Or scope = StoredPropertyScope.SessionOnly) And Not (HttpContext.Current.Session(group & "-" & Key) Is Nothing) Then
        Return HttpContext.Current.Session(group & "-" & Key)
    Else
        If (scope = StoredPropertyScope.SessionAndCookies Or scope = StoredPropertyScope.CookiesOnly) And Not (Request.Cookies(group) Is Nothing) Then
            Return Request.Cookies(group)(Key)
        Else
            Return Nothing
        End If
    End If
End Function
Public Shared Sub SetStoredProperty(ByVal group As String, ByVal key As String, value As String, Optional scope As StoredPropertyScope = StoredPropertyScope.SessionAndCookies)
    If scope = StoredPropertyScope.SessionAndCookies Or scope = StoredPropertyScope.CookiesOnly Then
        If Request.Cookies(group) Is Nothing Then
            Response.Cookies(group)(key) = value
            Response.Cookies(group).Expires = Now.AddYears(1)
        Else
            Dim OldValues As NameValueCollection = Request.Cookies.Get(group).Values
            OldValues.Item(key) = value
            Response.Cookies.Get(group).Values.Clear()
            Response.Cookies.Get(group).Values.Add(OldValues)
            Response.Cookies(group).Expires = Now.AddYears(1)
        End If
    End If
    If scope = StoredPropertyScope.SessionAndCookies Or scope = StoredPropertyScope.SessionOnly Then
        HttpContext.Current.Session(group & "-" & key) = value
    End If
End Sub
Public Overloads Shared Sub RemoveStoredProperty(ByVal group As String, ByVal key As String, Optional scope As StoredPropertyScope = StoredPropertyScope.SessionAndCookies)
    If scope = StoredPropertyScope.SessionAndCookies Or scope = StoredPropertyScope.CookiesOnly Then
        If Not (Request.Cookies(group) Is Nothing) AndAlso Request.Cookies(group).HasKeys Then
            Dim OldValues As NameValueCollection = Request.Cookies.Get(group).Values
            OldValues.Remove(key)
            Response.Cookies.Get(group).Values.Clear()
            Response.Cookies.Get(group).Values.Add(OldValues)
            Response.Cookies(group).Expires = Now.AddYears(1)
        End If
    End If
    If scope = StoredPropertyScope.SessionAndCookies Or scope = StoredPropertyScope.SessionOnly Then
        HttpContext.Current.Session.Remove(group & "-" & key)
    End If
End Sub
Public Overloads Shared Sub RemoveStoredProperty(ByVal group As String)
    'remove all from cookies only
    Response.Cookies(group).Expires = DateTime.Now.AddDays(-1)
End Sub
Public Shared Function CheckStoredProperty(ByVal group As String, ByVal key As String) As StoredPropertyScope
    'return where is property stored or -1 if not exists
    Dim result As StoredPropertyScope = -1
    If (Not Request.Cookies(group) Is Nothing) AndAlso (Not Request.Cookies(group)(key) Is Nothing) Then
        result = StoredPropertyScope.CookiesOnly
    End If
    If Not HttpContext.Current.Session(group & "-" & key) Is Nothing Then
        If result = -1 Then result = StoredPropertyScope.SessionOnly Else result = StoredPropertyScope.SessionAndCookies
    End If
    Return result
End Function 
```

如何使用 1- 首先，您需要删除属性组和子键的所有名称，因为您会将其用作字符串值，因此您有责任确保其正确。

2-像这样存储价值使用代码：

```
SetStoredProperty("userSelections", "itemsOrderedBy", "Price", StoredPropertyScope.SessionAndCookies) 
```

*   第一个参数是组名，它将是cookie名称，第二个参数是proberty名称（cookie中的子值），第二个参数是problerty的值，第四个参数是可选的，用于确定在哪里您想要存储此值（仅会话或仅 cookie 或两者）。

*注意（cookie 有效期为 1 年，您可以直接从代码中更改）

3-检索值：

```
GetStoredProperty("userSelections", "itemsOrderdBy",  StoredPropertyScope.CookiesOnly) 
```

*   第三个参数是可选的，如果您选择 SessionAndCookies，则返回值的优先级将是会话

4-删除价值：

```
RemoveStoredProperty("userSelections")  
RemoveStoredProperty("userSelections", "itemsOrderdBy", StoredPropertyScope.SessionAndCookies) 
```

*   第一行将删除整个组（cookie），它仅用于 cookie。第二行将从可选的第三个参数中确定的范围中删除指定的属性

5- 财产存放地点：

```
 CheckStoredProperty("userSelections", "itemsOrderdBy") 
```

*   此函数将搜索探测器，如果存在将返回它在哪里（StoredPropertyScope 枚举），如果不存在则返回 -1

我希望这会很有用，如果有更好的解决方案，请告诉我。谢谢

# mysql - 用于聚合日期的 SQL 查询

> ID：13298960
> 
> 赞同：0
> 
> 时间：2012-11-08T22:27:05.337
> 
> 标签：mysql, sql

我有以下数据库方案：

信息（id：int，日期：date，provider_id：int）

提供者（id：int，类型：int，名称：varchar）

在任何给定日期，我最多允许 5 个不同的提供者，每个提供者具有不同的类型。我想要的是这样的：

日期 | provider.name 类型 = 0 | .... | ... | PROVIDER.name 类型 = 4 |

如果在指定日期没有正确类型的提供者，则应该有一个空值。

我正在努力正确地进行此设置，并希望避免稍后在我的 php 程序中执行此操作（例如循环所有结果，然后将它们聚合到那里，这是可能的，但似乎很难看）。

我正在使用 MySQL 顺便说一句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:41:05.813

试试这个。MySQL 语法可能有点不同。

```
select 
(select convert(varchar,infos.date) + provider.name + 'with type = 0'
infos  LEFT JOIN provider
on infos.id = provide.id
and provider.type = 0 and infos.date= inputdate) +
(select provider.name + 'with type = 1'
infos  LEFT JOIN provider
on infos.id = provide.id
and provider.type = 1 and infos.date= inputdate) +
(select provider.name + 'with type = 2'
infos  LEFT JOIN provider
on infos.id = provide.id
and provider.type = 2 and infos.date= inputdate) +
(select provider.name + 'with type = 3'
infos  LEFT JOIN provider
on infos.id = provide.id
and provider.type = 3 and infos.date= inputdate) +
(select provider.name + 'with type = 4'
infos  LEFT JOIN provider
on infos.id = provide.id
and provider.type = 4 and infos.date= inputdate) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:42:40.257

您想通过简单的连接和聚合来做到这一点：

```
select i.date,
       max(case when p.type = 1 then p.name end) as Type1,
       max(case when p.type = 2 then p.name end) as Type2,
       max(case when p.type = 3 then p.name end) as Type3,
       max(case when p.type = 4 then p.name end) as Type4
from infos i left outer join
     provider p
     on i.provider_id = p.id
group by i.date 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T22:43:25.027

没有使用 MySQL，但在 TSQL 中我会这样做：

```
select
  date, type_0, ..., type_n
from
(
  select
    i.date, p.type, p.name
  from infos i
  left join provider p on
    i.provider_id = p.id
) as source
pivot
(
  min(source.name)
  for source.type in (0, 1, ..., n)
) as pivotTable 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T22:57:56.673

老实说 PHP 是你最好的选择，因为你必须处理所有的情况。每个提供者可以有多行，或者如果只有一个提供者，那么您可以有许多在日期和类型上匹配的行。PHP 形式：

```
for($i=0; i<5; $i++)
{
   $list[] = $query->execute("SELECT name FROM query_here WHERE type=$i");
} 
```

现在您可以使用数组来显示您需要的数据。

# java - 有没有办法在 webapp 的日志文件中包含 Tomcat 6 catalina.out 和 localhost.log 内容？

> ID：13298961
> 
> 赞同：0
> 
> 时间：2012-11-08T22:27:11.953
> 
> 标签：java, tomcat, logging

我正在寻找一种将 Tomcat 的 catalina.out（控制台输出）和 localhost.log（服务器日志）内容包含在 Tomcat 上运行的 webapp（称为 Foo）的日志中的方法。因此 /var/log/tomcat6/foo/foo.log 的内容将包括来自 Foo 应用程序、Catalina 应用程序和任何控制台输出的所有日志记录。

如果可能，catalina.out 和 localhost.log 文件需要像以前一样继续，因此服务器/控制台输出将记录在两个位置。

这是否可以使用默认的 Tomcat 6 日志记录设置，或者需要重新配置 Tomcat 以使用 Log4J？

# tridion-2011 - Tridion OData 服务文档

> ID：13298962
> 
> 赞同：3
> 
> 时间：2012-11-08T22:27:17.430
> 
> 标签：tridion-2011, tridion-content-delivery

是否有关于 Tridion 的 OData 服务的文档？我有一个指向 Tridion 文档的链接（[此处](https://www.sdltridionworld.com/downloads/documentation/SDLTridion2011SP1/index.aspx)），但我没有看到 OData 服务的任何内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T00:35:48.010

如果您对安装过程感兴趣，那么您可以在此处找到[适用](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_3E3A2FB1B4E34C20934B5A841C2E0930)[于](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_DC046ED58691440E92ED1A8672851427)Java 或适用于 .NET 的安装过程。有关您可以使用此 OData WebService 做什么的更多详细信息，您可以查看[此处](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_DFBA3FF3977045F892ABB4FCF8DA38B1)。

请注意，您需要登录所有三个链接（登录信息在您的初始链接中）。

希望这可以帮助。

# android - 使用库导致 ClassNotFoundException

> ID：13298965
> 
> 赞同：0
> 
> 时间：2012-11-08T22:27:29.893
> 
> 标签：android, classnotfoundexception

我拿了一个完整的应用程序并将其复制并使其成为一个库（Properties -> Android，Is Library）。我还重命名了这个项目以单独跟踪它 - com.mylib。

然后，我使用了原始应用程序 com.myapp 并删除了所有 .java 文件，除了一个带有一些数据的文件（没有实际代码）。我通过 Properties -> Android 将其链接起来，并在 mylib 库中添加的 Library 部分中。它显示为绿色检查。

按照 Google 的建议，将 myapp 的清单活动更改为所有以库为前缀的活动。

```
android:name="com.mylib.AppInfo" 
```

清理了库和项目，并退出并重新启动了 Eclipse。编译正常，程序运行主要活动“AppInfo”，但尝试访问其他活动总是失败并出现 ClassNotFoundException。

我还在 myapp 清单中尝试了不同的名称前缀，例如：

```
android:name="com.myapp.AppInfo"
android:name=".AppInfo" 
```

但是这些无法进入主应用程序。尽管库或 myapp 清单中没有更改活动类名称，但我已经逐个字符地检查了它们，以确保它们在大小写和精确字母方面都匹配。

在 Windows 7 x64 下使用 Eclipse，应用程序设置为 minSdk 为 11。还加载了最新的 SDK 工具（v20.0.3）。Proguard 也没有被使用（还），我正在使用实际的硬件（Android 4.0）。

我正在努力让图书馆工作。我有一个完全不同的库和应用程序对在另一个项目上以相同的方式工作，并且我已经比较了两个库和项目之间的每个属性和选项，并且找不到任何丢失或添加导致此失败的内容。

这是来自 LogCat 的完整错误：

```
java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.myapp/com.myapp.LiveWallpaperSettings}: java.lang.ClassNotFoundException: com.myapp.LiveWallpaperSettings 
```

有关如何追踪此问题的任何建议或想法？

# dart - 你如何在 Dart 中对异常进行单元测试？

> ID：13298969
> 
> 赞同：59
> 
> 时间：2012-11-08T22:28:08.677
> 
> 标签：dart

考虑一个基于传递的参数进行一些异常处理的函数：

```
List range(start, stop) {
    if (start >= stop) {
      throw new ArgumentError("start must be less than stop");
    }
    // remainder of function
} 
```

如何测试是否引发了正确的异常？

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-11-08T22:33:34.053

在这种情况下，有多种方法可以测试异常。简单地测试是否引发了非特定异常：

```
expect(() => range(5, 5), throwsException); 
```

测试是否引发了正确类型的异常：

有几个用于一般用途的预定义匹配器，例如`throwsArgumentError`, `throwsRangeError`,`throwsUnsupportedError`等。对于不存在预定义匹配器的类型，您可以使用`TypeMatcher<T>`.

```
expect(() => range(5, 2), throwsA(TypeMatcher<IndexError>())); 
```

确保不引发异常：

```
expect(() => range(5, 10), returnsNormally); 
```

测试异常类型和异常消息：

```
expect(() => range(5, 3), 
    throwsA(predicate((e) => e is ArgumentError && e.message == 'start must be less than stop'))); 
```

这是另一种方法：

```
expect(() => range(5, 3), 
  throwsA(allOf(isArgumentError, predicate((e) => e.message == 'start must be less than stop')))); 
```

（感谢 Google 的 Graham Wheeler 提供的最后两个解决方案）。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-08T22:42:50.087

我喜欢这种方法：

```
test('when start > stop', () {
  try {
    range(5, 3);
  } on ArgumentError catch(e) {
    expect(e.message, 'start must be less than stop');
    return;
  }
  throw new ExpectException("Expected ArgumentError");  
}); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-02-18T19:51:10.753

作为[@Shailen Tuli](https://stackoverflow.com/users/638061/shailen-tuli)提议的更优雅的解决方案，如果您希望特定消息出现错误，您可以使用[`having`](https://github.com/dart-lang/matcher/blob/12c97635b73a17c2766397e0aeb07ff9669e889c/lib/src/type_matcher.dart#L82).

在这种情况下，您正在寻找这样的东西：

```
expect(
  () => range(5, 3),
  throwsA(
    isA<ArgumentError>().having(
      (error) => error.message,        // The feature you want to check.
      'message',                       // The description of the feature.
      'start must be less than stop',  // The error message.
    ),
  ),
); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-02-15T10:39:31.457

[`throwsA`](https://docs.flutter.io/flutter/package-test_api_test_api/throwsA.html)使用with检查异常[`TypeMatcher`](https://docs.flutter.io/flutter/package-matcher_matcher/TypeMatcher-class.html)。

**注意**：[isInstanceOf](https://docs.flutter.io/flutter/package-matcher_matcher/isInstanceOf-class.html)现在已弃用。

```
List range(start, stop) {
    if (start >= stop) {
      throw new ArgumentError("start must be less than stop");
    }
    // remainder of function
}

test("check argument error", () {
  expect(() => range(1, 2), throwsA(TypeMatcher<ArgumentError>()));
}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-12-09T05:51:18.267

虽然其他答案绝对有效，`TypeMatcher<Type>()`但现在不推荐使用类似的 API，您必须使用`isA<TypeOfException>()`.

比如之前的，

```
expect(() => range(5, 2), throwsA(TypeMatcher<IndexError>())); 
```

现在将

```
expect(() => range(5, 2), throwsA(isA<IndexError>())); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-09T16:20:34.823

对于简单的异常测试，我更喜欢使用静态方法 API：

```
Expect.throws(
  // test condition
  (){ 
    throw new Exception('code I expect to throw');
  },
  // exception object inspection
  (err) => err is Exception
); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-04-28T12:55:17.087

我使用了以下方法：

首先，您需要将您的方法作为 lambda 传递给 expect 函数：

```
expect(() => method(...), ...) 
```

其次，您需要`throwsA`结合使用`isInstanceOf`.

`throwsA`确保抛出异常，并且`isInstanceOf`您可以检查是否抛出了正确的异常。

我的单元测试示例：

```
expect(() => parser.parse(raw), throwsA(isInstanceOf<FailedCRCCheck>())); 
```

希望这可以帮助。

# asp.net - ASP.NET 4 健康监控 - 捕获用户代理详细信息

> ID：13298972
> 
> 赞同：1
> 
> 时间：2012-11-08T22:28:13.040
> 
> 标签：asp.net, health-monitoring

我目前正在我的 ASP.Net Web 表单 .NET 4 上实施**健康监控。**

当我的网站上出现未处理的异常时，它会为我提供以下详细信息部分。

1.  概括
2.  应用信息
3.  活动
4.  处理信息：
5.  异常信息：
6.  请求信息： 线程信息：

我还想捕获**用户代理详细信息**。可能吗？任何人都可以向我指出如何实现这一目标的正确来源吗？如果异常不是来自数据库，我还想知道如何将这个异常详细信息捕获到我的数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T04:35:32.303

好吧，我在 msdn 上找到了这个，希望任何有需要的人都能从这些链接中受益。

1.  如何将事件存储到 SQL Server
2.  如何将事件转发到 WMI
3.  如何将事件转发到电子邮件
4.  [http://msdn.microsoft.com/en-us/library/system.web.management.webfailureauditevent(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.web.management.webfailureauditevent(v=vs.100).aspx)上的自定义失败审核默认值

[http://support.microsoft.com/kb/893664](http://support.microsoft.com/kb/893664)

# javascript - tag with svg and (double)click events I have some object tags that each embeds a svg file. Clicking on the object tag (the svg), should call a javascript function. As I understand, the object tag doesn't support mouse events. 问问题 问问题 2012-11-08T22:28:17.537 2718 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have some object tags that each embeds a svg file. Clicking on the object tag (the svg), should call a javascript function. As I understand, the object tag doesn't support mouse events. I have read of dousins solutions with object & flash, but they don't work with svg. It is not a solution to code something in the svg file. If you have a @review variable defined in the upvote action, like I suspect you might, then you can do this: $('#vote_<%= @review.id %>').html("<%= escape_javascript render :partial => 'votes/vote' %>"); javascripthtmlsvg 4 3 回答 3 This answer is useful 2 如果您不需要 svg 文件中的脚本和交互性，您也许可以使用  标记。 就像 Robert Longson 所说，鼠标事件进入 标签，因此您需要将事件处理程序放在 svg 中（您可以使用脚本执行此操作，而无需修改原始 svg 文件）。这是一个如何从引用它的 html 访问 svg 的 DOM 的示例。 澄清： 获取根 svg 元素（参见示例） 调用rootsvg.addEventListener("click", window.parent.yourFunctionHere, false)（假设yourFunctionHere是在主 html 文档的脚本中定义的函数） 于 2012-11-09T08:48:57.027 回答 This answer is useful 1 您可以使用 img 标签，并且仍然使用文档模型编辑 SVG。所需要的只是一点想法。我一直在研究类似的问题，其中 svg 文本需要可编辑，因此我需要单击鼠标来激活编辑。 如果你希望你的 SVG 是可点击的，那么 object 标签不是要走的路。它将所有事件重新路由到其内容，并且无法在其顶部放置透明 div，因为该对象自动成为顶部项目，因此您嵌入的对象始终可以接收鼠标事件。（想想 Flash 视频播放器）。 您可以做的是使用 XMLSerializer 和 createObjectURL 将您的 svg 转换为 blob，然后可以使用以下命令将其显示为 img 标签，其中 mysvg 是一个 SVG，已使用 xhttp 加载并解析为 xml 文档： var mysvg = xhttp.responseXML; var xml2str = new XMLSerializer(); var svg_blob = new Blob([xml2str.serializeToString(mysvg)],{'type': "image/svg+xml"}); var url = URL.createObjectURL(svg_blob); document.getElementById("svg1").src = url; svg1 是一个 img 标签，它很乐意接受您希望使用的任何事件处理程序。 于 2015-09-16T06:15:18.407 回答 This answer is useful 0 鼠标事件转到标签的内容。 您将需要在标签前面放置一些其他标签，例如绝对定位的透明标签，并使用它来捕获鼠标事件。 或者，您可以将标记的内容设置为 pointer-events="none" 以便它们不处理事件，此时您可以在标记中处理它们。 于 2012-11-08T23:10:06.517 回答 Related 2 php - 如果发现重复值，则删除数组中的值 4 javascript - 如何替换 html-tag 属性字符串中的多个 '<' 和 '>'？ 1 c# - 在 C# Linq 表中保留唯一的主键 2 visual-studio - Visual Studio Express 2012 在 Windows 应用商店应用的 Windows 8 Release Preview 中运行问题 2 hadoop - 将大文件复制到 HDFS 2 python - 使用python的Excel数据映射 2 spring - 使用resttemplate从xml解组对象时出错 1 wpf - WPF 中的组合框样式 2 c# - 在 wpf 中获取选定的数据网格行的问题 0 android - android中的活页夹 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13298974
> 
> 赞同：2
> 
> 时间：
> 
> 标签：javascript, html, svg

I have some object tags that each embeds a svg file. Clicking on the object tag (the svg), should call a javascript function. As I understand, the object tag doesn't support mouse events.

I have read of dousins solutions with object & flash, but they don't work with svg.

It is *not* a solution to code something in the svg file.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T08:48:57.027

如果您不需要 svg 文件中的脚本和交互性，您也许可以使用 <img> 标记。

就像 Robert Longson 所说，鼠标事件进入 <object> 标签，因此您需要将事件处理程序放在 svg 中（您可以使用脚本执行此操作，而无需修改原始 svg 文件）。[这是一个](http://xn--dahlstrm-t4a.net/svg/html/get-embedded-svg-document-script.html)如何从引用它的 html 访问 svg 的 DOM 的示例。

澄清：

*   获取根 svg 元素（参见[示例](http://xn--dahlstrm-t4a.net/svg/html/get-embedded-svg-document-script.html)）
*   调用`rootsvg.addEventListener("click", window.parent.yourFunctionHere, false)`（假设`yourFunctionHere`是在主 html 文档的脚本中定义的函数）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-16T06:15:18.407

您可以使用 img 标签，并且仍然使用文档模型编辑 SVG。所需要的只是一点想法。我一直在研究类似的问题，其中 svg 文本需要可编辑，因此我需要单击鼠标来激活编辑。

如果你希望你的 SVG 是可点击的，那么 object 标签不是要走的路。它将所有事件重新路由到其内容，并且无法在其顶部放置透明 div，因为该对象自动成为顶部项目，因此您嵌入的对象始终可以接收鼠标事件。（想想 Flash 视频播放器）。

您可以做的是使用 XMLSerializer 和 createObjectURL 将您的 svg 转换为 blob，然后可以使用以下命令将其显示为 img 标签，其中 mysvg 是一个 SVG，已使用 xhttp 加载并解析为 xml 文档：

```
 var mysvg = xhttp.responseXML;
     var xml2str = new XMLSerializer();
     var svg_blob = new Blob([xml2str.serializeToString(mysvg)],{'type': "image/svg+xml"});
     var url = URL.createObjectURL(svg_blob);
     document.getElementById("svg1").src = url; 
```

svg1 是一个 img 标签，它很乐意接受您希望使用的任何事件处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T23:10:06.517

鼠标事件转到`<object>`标签的内容。

您将需要在标签`<div>`前面放置一些其他标签，例如绝对定位的透明`<object>`标签，并使用它来捕获鼠标事件。

或者，您可以将`<object>`标记的内容设置为 pointer-events="none" 以便它们不处理事件，此时您可以在`<object>`标记中处理它们。

# c++ - error: cannot allocate an object of abstract type 'mySynth' VST Programming

> ID：13298977
> 
> 赞同：-1
> 
> 时间：2012-11-08T22:28:34.977
> 
> 标签：c++, vst, audioeffect

For a project, I am being asked to create a `VST` using the `Steinberg SDK`, i'm using version 2.4.

The issue that I'm having is error:

`cannot allocate an object of abstract type 'mySynth'`.

When attempting to compile, the error brings me to this section of code:

```
 AudioEffect* createEffectInstance (audioMasterCallback audioMaster)
    {
            return new mySynth (audioMaster);
    } 
```

I'm a beginner to both c++ and `VST` programming, I've had no issues compiling the sample `AGain` and `ADelay`, as well as the `vstxSynth`. This is the first attempt of my own, and its really confusing me, from looking at the sample code i cannot seem to find any reason as to why this shouldn't work.

any help would be greatly appreciated. As this is a major learning curve for me, i would appreciate if you could apply with a simplest explanations as possible.

Thankyou :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:36:51.140

没有看到类`mySynth`代码很难说，但是当你有一个包含纯虚函数的类时，通常会遇到这个错误。要么，要么您从具有纯虚函数的基类派生并且未能用派生类实现覆盖它。

如果您不知道这意味着什么，请在您的类（和子类）中查找像这样声明的函数

```
 virtual int my_function() = 0; 
```

这种函数是纯虚函数，具有虚函数的类被认为是抽象类，不能实例化。为此，您需要提供一个实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:47:38.007

您的`processReplacing()`方法未正确覆盖基类中声明的签名`AudioEffect`。签名如下所示：

```
void processReplacing(float** inputs, float** outputs, VstInt32 sampleFrames); 
```

您的覆盖正在使用`double`，它应该使用`float`。

# ruby - Ruby - 从变量中获取位范围

> ID：13298978
> 
> 赞同：5
> 
> 时间：2012-11-08T22:28:43.200
> 
> 标签：ruby, bit-manipulation

我有一个变量，并想从该变量中获取一系列位。我想要最干净的方式来做到这一点。

If `x = 19767`and I want bit3 - bit8 (从右边开始): `100110100110111`是`19767`二进制的。我想要括号中的部分，`100110(100110)111`所以答案是 38。

用 Ruby 实现以下功能的最简单/最干净/最优雅的方法是什么？

```
bit_range(orig_num, first_bit, last_bit) 
```

PS。计算密集度较低的答案的奖励积分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T22:34:35.417

```
orig_num.to_s(2)[(-last_bit-1)..(-first_bit-1)].to_i(2) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T22:35:06.543

```
19767.to_s(2)[-9..-4].to_i(2) 
```

或者

```
19767 >> 3 & 0x3f 
```

*更新：*

汤到坚果（为什么人们这么说，无论如何？）......

```
class Fixnum
  def bit_range low, high
    len = high - low + 1
    self >> low & ~(-1 >> len << len)
  end
end

p 19767.bit_range(3, 8) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T14:57:03.403

只是为了显示建议答案的速度：

```
require 'benchmark'

ORIG_NUMBER = 19767

def f(x,i,j)
  b = x.to_s(2)
  n = b.size
  b[(n-j-1)...(n-i)].to_i(2)
end

class Fixnum
  def bit_range low, high
    len = high - low + 1
    self >> low & ~(-1 >> len << len)
  end

  def slice(range_or_start, length = nil)
    if length
      start = range_or_start
    else
      range = range_or_start
      start = range.begin
      length = range.count
    end

    mask = 2 ** length - 1

    self >> start & mask
  end
end

def p n
  puts "0b#{n.to_s(2)}"; n
end

n = 1_000_000
puts "Using #{ n } loops in Ruby #{ RUBY_VERSION }."
Benchmark.bm(21) do |b|
  b.report('texasbruce') { n.times { ORIG_NUMBER.to_s(2)[(-8 - 1)..(-3 - 1)].to_i(2) } }
  b.report('DigitalRoss string') { n.times { ORIG_NUMBER.to_s(2)[-9..-4].to_i(2) } }
  b.report('DigitalRoss binary') { n.times { ORIG_NUMBER >> 3 & 0x3f } }
  b.report('DigitalRoss bit_range') { n.times { 19767.bit_range(3, 8) } }
  b.report('Philip') { n.times { f(ORIG_NUMBER, 3, 8) } }
  b.report('Semyon Perepelitsa') { n.times { ORIG_NUMBER.slice(3..8) } }
end 
```

和输出：

```
Using 1000000 loops in Ruby 1.9.3.
                            user     system      total        real
texasbruce              1.240000   0.010000   1.250000 (  1.243709)
DigitalRoss string      1.000000   0.000000   1.000000 (  1.006843)
DigitalRoss binary      0.260000   0.000000   0.260000 (  0.262319)
DigitalRoss bit_range   0.840000   0.000000   0.840000 (  0.858603)
Philip                  1.520000   0.000000   1.520000 (  1.543751)
Semyon Perepelitsa      1.150000   0.010000   1.160000 (  1.155422) 
```

那是在我的旧 MacBook Pro 上。您的里程可能会有所不同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-09T14:59:47.313

以下是如何使用纯数字运算来完成此操作：

```
class Fixnum
  def slice(range_or_start, length = nil)
    if length
      start = range_or_start
    else
      range = range_or_start
      start = range.begin
      length = range.count
    end

    mask = 2 ** length - 1

    self >> start & mask
  end
end

def p n
  puts "0b#{n.to_s(2)}"; n
end

p 0b100110100110111.slice(3..8) # 0b100110
p 0b100110100110111.slice(3, 6) # 0b100110 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-08T22:39:38.297

为此定义一个函数是有意义的：

```
def f(x,i,j)
  b = x.to_s(2)
  n = b.size
  b[(n-j-1)...(n-i)].to_i(2)
end

puts f(19767, 3, 8) # => 38 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-27T09:39:55.410

扩展来自 DigitalRoss 的想法 - 您可以传递一个范围，而不是采用两个参数：

```
class Fixnum
  def bit_range range
    len = range.last - range.first + 1
    self >> range.first & ~(-1 >> len << len)
  end
end

19767.bit_range 3..8 
```

# python - Hangman game in python doesn't work when there are duplicate letters

> ID：13298979
> 
> 赞同：-4
> 
> 时间：2012-11-08T22:28:47.363
> 
> 标签：python

I need some help with my hangman game, whenever I put in a word like "gas" the game works fine but when I type in a word like "pool" it doesn't work. So I can't win if the word has two same letters. If you could help me that would be much appreciated.

Here is the code:

```
#Hangman
#By Justin 
#Last Revised Nov 8th 2012
#Plays a game of hangman with the user(s)

import time
import os
import sys
import random

gallows1='''
  '------'
  |      |
  |
  |
  |
  |
  |   
  |
  |
  |
  |
=================='''
gallows2='''
  '------'
  |      |
  |      O
  |      |
  |
  |
  |   
  |
  |
  |
  |
=================='''
gallows3='''
  '------'
  |      |
  |      O
  |     /|
  |
  |
  |   
  |
  |
  |
  |
=================='''
gallows4='''
  '------'
  |      |
  |      O
  |     /|\\
  |
  |
  |   
  |
  |
  |
  |
=================='''
gallows5='''
  '------'
  |      |
  |      O
  |     /|\\
  |     /
  |
  |   
  |
  |
  |
  |
=================='''
gallows6='''
  '------'
  |      |
  |      O
  |     /|\\
  |     / \\
  |
  |   
  |
  |
  |
  |
=================='''
gallowsDead='''
  '------'
  |      |
  |      |
  |      |
  |      O
  |     |||
  |     | |
  |
  |   
  |
  |
=================='''
gallowsAlive='''
  '------'
  |      |
  |      
  |      
  |                        _____________________
  |                       |                     |
  |                       |    Good Job :D      |
  |                       |                     |
  |                      <|_____________________|                    
  |                    O/ 
  |                   /|
==================    / \    '''
print"""
          _    _                                         
         | |  | |                                        
         | |__| | __ _ _ __   __ _ _ __ ___   __ _ _ __  
         |  __  |/ _` | '_ \ / _` | '_ ` _ \ / _` | '_ \      
         | |  | | (_| | | | | (_| | | | | | | (_| | | | |
         |_|  |_|\__,_|_| |_|\__, |_| |_| |_|\__,_|_| |_|
                              _ / |                      
                             |___/                          
"""
print "                              MENU     "
print "                        *=============*"
print "                         1 Player Game"
print "                        *=============*"
print "                         2 Player Game"
print "                        *=============*"
print "                         Options      "
print "                        *=============*"
print "                         Exit         "
print "                        *=============*"
mode = ""
while mode != "2" or "1" or "O" or "E":
    mode=raw_input("Please type in your choice ")
    break
os.system("CLS")
if mode =="2":
    tries = 0
    usedLetters=""
    lettersCorrect=0
    originalWord=raw_input("A Two player game of Hangman it is, Player A please enter a word! ")
    os.system("CLS")
    wordLength=len(originalWord)
    solvedWord=wordLength*["_ "]
    maxTries=6
    while originalWord != solvedWord and maxTries <= 6:
        if tries == 0:
            print gallows1
        if tries == 1:
            print gallows2
        if tries == 2:
            print gallows3
        if tries == 3:
            print gallows4
        if tries == 4:
            print gallows5
        if tries == 5:
            print gallows6
        print "Player B,Try to guess the word!"
        print                solvedWord
        print
        print"Used Letters:",usedLetters
        print
        letter= raw_input("Please Guess a letter! ")
        if len(letter)== 1:
            if usedLetters.find(letter) != -1:
                print "You already picked", letter
            else:
                usedLetters = usedLetters + letter
                index = originalWord.find(letter)
                if index == -1:
                    tries = tries+1
                    print "The letter",letter,"is not in the word!"
                else:
                    print"The",letter,"is in the word."
                    lettersCorrect=lettersCorrect+1
                    for rang in range(wordLength):
                        if letter == originalWord[rang]:
                            solvedWord[rang] = letter
                    if 
        os.system("CLS")
        if tries == maxTries:
            print gallowsDead
            print "I'm sorry, Player B that was 6 guesses, You Lose."
            print 'The word was "',originalWord,'"'
            break
        if lettersCorrect == wordLength:
            print gallowsAlive
            print "Congratulations,Player B ,You win."
            print 'The word was "',originalWord,'"'
            break 
```

Is there any way to search for duplicate letters?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T22:36:10.357

使用 find 意味着您只检查出现在 originalWord 中的字母的第一个实例。所以对于“pool”，猜测“o”应该将 lettersCorrect 增加 2，但它只会增加 1。

尝试使用[str.count(sub[, start[, end]])](http://docs.python.org/2/library/string.html#string.count)来计算被猜测字母的实例总数，然后使用该数字将 lettersCorrect 增加正确的数量。

# java - 如何逐步从文本文件中读取 x 个字符

> ID：13298982
> 
> 赞同：0
> 
> 时间：2012-11-08T22:28:58.707
> 
> 标签：java

我正在尝试逐步从文本文件中读取 x 个字符。因此，如果我有：aaaaabbbbbcccccabckcka 并且我一次阅读 5 个，我会得到 aaaaa、bbbbb、ccccc、abckc 和 ka。我正在使用的代码是：

```
 status =  is.read(bytes);
            text = new String(bytes); 
```

其中字节是：字节=新字节[5]，我正在调用这两行代码，直到状态变为-1，我面临的问题是，输出不是我上面提到的，但我得到了这个：

aaaaa, bbbbb, ccccc, abckc 和 kackc，注意最后一段 'kackc' 是垃圾，为什么会这样？

注意：字节在读取循环之外被初始化一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T23:29:26.510

您当前的解决方案适用于 ASCII，但其他编码中的许多字符使用超过一个字节。您应该分别使用 a`Reader`和 a`char[]`而不是 an`InputStream`和 a `byte[]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:32:45.560

事实证明，每次读取新输入时我都需要清除字节缓冲区，我只是使用了一个 for 循环将其归零并且它有效

# url - ./images 中的 ./ 有什么意义？

> ID：13298983
> 
> 赞同：5
> 
> 时间：2012-11-08T22:29:01.593
> 
> 标签：url, uri

我遇到了多个 CSS 规范，其中图像的引用如下：

```
./images/bg.jpg 
```

我明白这意味着“这个目录”，那么和`./`有什么区别？为什么开发人员会在 URL 中使用？`./images/bg.jpg``images/bg.jpg``./`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T22:32:08.907

你是对的 - 两者之间没有区别，所以实际上这只是个人开发人员的偏好。关于这个主题没有太多要说的了！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T22:35:06.187

两者之间没有重大区别，但我将在此[引用维基百科](http://en.wikipedia.org/wiki/Path_%28computing%29#Unix_style)，因为这在理论上是可能的，但在实践中极不可能：

> 使用 "./foo" 来引用当前工作目录中的文件 "foo" 有时可以有用地将它与在默认目录中或通过其他方式找到的资源 "foo" 区分开来；例如，查看手册页的特定版本，而不是系统中安装的手册页

此外，某些组织可能会决定将声明两者`.`和声明`..`相对路径作为约定。

# javascript - CKEditor setData adding P tag

> ID：13298984
> 
> 赞同：-1
> 
> 时间：2012-11-08T22:29:02.230
> 
> 标签：javascript, ckeditor

When i am passing HTML to a CKEditor instance, a P tag is being inserted within the HTML producing unexpected results.

For example, with the following code:

```
CKEDITOR.instances["myEditor"].setData("<div>1</div><div>2</div>"); 
```

the editor does not display them as block elements (it outputs as "12" inline). Calling getData() and i see the HTML is reformatted incorrectly as:

```
"<div>
<p>
    1</div><div>2</div></p>
" 
```

I've played with the enterMode configuration based on some research but haven't found a magic combination. Any suggestions? (I am using 3.6.5)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:47:30.030

我想通了 - 我们在粘贴时使用正则表达式去除一些标签，这也影响了初始值。

# android - 9patch 正在拉伸我没有标记的区域

> ID：13298987
> 
> 赞同：2
> 
> 时间：2012-11-08T22:29:18.853
> 
> 标签：android, nine-patch

我为背景区域创建了一个 9patch，它似乎是我没有标记为要拉伸的拉伸区域。我有它，因此它应该从中间垂直拉伸 1 个像素，但它仍在拉伸顶部和底部边框。这是我的 9patch，放在`drawable`文件夹中：

![9补丁](../Images/dad75cf21fdc05cbd666c60c1258f92b.png)

这是作为`background`布局属性放置时的结果图像：

![截屏](../Images/e89e1e854ca3066987a6470841ff888e.png)

为什么要拉伸顶部和底部边框？我希望这些在顶部保持 2 像素，在底部保持 4 像素，但它会拉伸。

如果您想尝试一下，可以在[此处](https://i.stack.imgur.com/ohTDC.png)下载图像。重命名它，使其具有 .9.png 扩展名，将其放置为`background`大约`View`100dp 高的位置，截取屏幕截图，然后放大，您可以看到我所看到的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T22:48:09.683

它正在被缩放。如果将它放在 中`res/drawable`，它将在 HDPI 设备上放大 1.5 倍，在 XHDPI 设备上放大 2 倍（假定为 MDPI 的可绘制对象）。您可以将其放入`res/drawable-nodpi`以防止缩放，也可以根据需要制作更大的版本并将它们放入`res/drawable-hdpi`/`res/drawable-xhdpi`文件夹中。

# php - php数组排序有两种方式

> ID：13298989
> 
> 赞同：0
> 
> 时间：2012-11-08T22:29:20.140
> 
> 标签：php, arrays, sorting

我有一个数组：

```
$arr = array(

    'Alcatel' => '0',
    'Apple' =>   '4542',
    'LG' =>      '0',
    'Nokia' =>   '0',
    'Samsung' => '2760',
    'Siemens' => '0',
    'Sony' =>    '0',

); 
```

所有键都按字母顺序排列，但值不是。我想： 1- 维护关联 2- 按值从 HIGH 到 LOW 对数组进行排序 3- 维护零值条目的字母顺序

要得到：

```
$arr = array(

    'Apple' =>   '4542',
    'Samsung' => '2760',
    'Alcatel' => '0',
    'LG' =>      '0',
    'Nokia' =>   '0',
    'Siemens' => '0',
    'Sony' =>    '0',

); 
```

现在当我使用 arsort($arr);

我有：

```
$arr = array(
  'Apple' =>   '4542',
  'Samsung' => '2760',
  'Siemens' => '0',
  'Sony' =>    '0',
  'Nokia' =>   '0',
  'LG' =>      '0',
  'Alcatel' => '0',
); 
```

所以我得到了目标 1 和 2 而不是 3

有什么建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:58:33.783

Ok, I finally did it:

Because $arr is a combination of 2 arrays, $titles and $values:

```
array_multisort($values, SORT_DESC, $titles, SORT_ASC, $arr); 
```

this finally works!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:29:48.870

对于更一般的情况，如果在单独的源数组中没有方便的键和值，则需要自定义比较函数。有`sort`将键传递给比较函数的版本，也有传递值的版本，但你需要两者，而且没有一个可以同时传递。

由于`uksort`传递了键，您可以查找值，但是如果您访问从比较函数中排序的数组，您会得到不可靠的结果和来自 PHP 的警告。所以你需要复制一份。

我能想到的最干净的解决方案是将复制/访问包装在一个闭包中（所以这需要 5.4）：

```
$arr = array(
    'Alcatel' => '0',
    'Apple' =>   '4542',
    'LG' =>      '0',
    'Nokia' =>   '0',
    'Samsung' => '2760',
    'Siemens' => '0',
    'Sony' =>    '0',
  );

  function mkcmp($arr) {
    return function($k1, $k2) use ($arr) {
      $v1 = $arr[$k1];
      $v2 = $arr[$k2];

      if ($v1 > $v2) {
        return -1;
      } else if ($v1 < $v2) {
        return 1;
      } else if ($k1 < $k2) {
        return -1;
      } else if ($k1 == $k2) {
        return 0;
      } else {
        return 1;
      }
    };
  }

  uksort($arr, mkcmp($arr)); 
```

`print_r($arr)`这是排序后的输出：

```
Array
(
    [Apple] => 4542
    [Samsung] => 2760
    [Alcatel] => 0
    [LG] => 0
    [Nokia] => 0
    [Siemens] => 0
    [Sony] => 0
) 
```

# android - 有没有办法避免在自定义视图（Android）中使用 xml 中的完整包名？

> ID：13298996
> 
> 赞同：6
> 
> 时间：2012-11-08T22:30:00.780
> 
> 标签：android, xml

我想做类似的事情

```
<TextViewPlus
    android:id="@+id/settings_title_text"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:text="@string/settings /> 
```

代替

```
<com.my.really.super.long.package.name.that.wont.autocomplete.TextViewPlus
    android:id="@+id/settings_title_text"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:text="@string/settings /> 
```

我想我可以将自定义视图放在（默认）包中，但这似乎是个坏主意。（编辑：在测试后，它无论如何都不起作用）有没有“好”的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T22:46:52.260

不，AFAIK，您将不得不使用全名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T13:45:30.637

LayoutInflater.setFactory(LayoutInflater.Factory) 允许您指定一个对象，该对象在运行时给定标签名称来执行自定义视图对象创建。这可用于实现您想要做的事情。我会首先调用 getFactory() 来检索现有的默认工厂对象并将其用于不是您的自定义视图的任何视图名称。

# scala - 演员完成时的 Akka 跟踪

> ID：13298997
> 
> 赞同：1
> 
> 时间：2012-11-08T22:30:03.480
> 
> 标签：scala, akka

我有以下代码遍历人员列表并在 class1 中为每个人调用回调。

```
def syncPeople(callback: Person => _) = Future {
   person.findAll(criteria).foldLeft(0L) { (count, obj) =>
      callback(obj)
      count + 1
   } 
} 
```

回调和对 syncPeople 的调用在 class2 中，看起来与此类似

```
def getActor(person: Person):ActorRef = {
  if(person.isMale) maleActor
  else femaleActor
}

def process(person: Person): Unit = {
   val workActor = getActor(person)
   workActor ! person
} //The actor does the actual work and may be quite intense

def syncPeople(process) 
```

现在，我想跟踪同步所有人所花费的总时间。即当最后一个 workActor 完成工作时。我正在使用第三个 Actor：MonitorActor 来跟踪开始和结束时间。MaleActor、FemaleActor 可以在处理个人时向此发送消息

跟踪这个产生的进程的最佳方法是什么？

我探索了

1.  Future.sequence // 但是向 workActor 发送消息的类不是演员。所以未来不会收到消息

2.  在完成时跟踪 personIds，但不使用 var，在 MonitorActor 中累积接收到的消息，它不可能实现这一点.. 并且使用 var 不是首选的做事方式

实现这一点的其他方法可能是什么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T22:52:33.183

有趣的是，我目前正在研究与此非常相似的问题。我建议的解决方案是使用[akka-fsm](http://doc.akka.io/docs/akka/snapshot/scala/fsm.html)来跟踪状态。

基本上在你的状态对象之外，做一些事情，比如生成一个代表 id 的 Long：

```
def getId(): Long = System.currentTimeMillis() / 1000L 
```

正确实现的状态对象是不可变的，因此您只需在整个事务中重复使用此 id。

我知道这个答案缺少很多实现细节，但我仍在自己的代码中进行实现。希望在阅读 akka-fsm 并使用它之后，这个答案会有意义吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T23:19:42.463

不要妖魔化可变状态，它是 SHARED 可变状态，这会导致大部分问题。您没有在 Actor 内部共享可变状态，因为您总是与 actorRefs 对话，并且 Actor 一次只处理一条消息（没有竞争条件和其他邪恶的东西）。我的意思是，使用 a 是可以的`var`（除非你在演员内部产生一些期货，这会改变`var`，因为那样你就会回到 SHARING 可变状态）。正如@devnulled 建议的那样，FSM 是另一种解决方案，但对于您的用例来说，这听起来更像是一种矫枉过正。

# python - Python Popen 和通信导致与内存分配相关的 OSError？

> ID：13298998
> 
> 赞同：1
> 
> 时间：2012-11-08T22:30:05.250
> 
> 标签：python, memory-management, parallel-processing, cluster-computing, subprocess

我正在向集群上的队列提交作业，并想检查作业是否完成。我这样做的方法是查看列出当前正在运行的所有作业`jobID`的命令（称为）的输出中是否存在。`jobs`我`jobs`通过外壳调用，解析它的输出，看看是否`jobID`存在。如果不是，则将其解释为作业终止的信号：

```
 sleep = 2
   while True:
        output = subprocess.Popen("jobs %i" %(jobID),
                                  shell=True,
                                  stdout=subprocess.PIPE,
                                  stderr=subprocess.PIPE).communicate()
        if job_done(output):
           break
        time.sleep(sleep) 
```

由于`sleep`设置为 2，这意味着每两秒检查一次，但作业可能会运行几个小时。我发现我有时会随机`OSError` `Cannot allocate memory`得到`jobs`. 这可能是什么原因造成的？有没有比使用和更好的方法来做到`Popen`这`PIPE`一点`communicate`？

此问题似乎与此处报告的问题相似（[Python subprocess.Popen "OSError: [Errno 12] Cannot allocate memory"](https://stackoverflow.com/questions/1367373/python-subprocess-popen-oserror-errno-12-cannot-allocate-memory)）但没有解决此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:45:46.303

你用的是哪个python版本？2.6 还是 2.7？甚至更新？您的文件描述符的状态是什么？请参阅[fd 问题](http://bramp.net/blog/2010/05/python-close_fds-issue/)。

在您提到的 SO 帖子的底部，似乎还有另一个关于同一问题的帖子。另见他的[提议](https://stackoverflow.com/a/7263866/1107807)。