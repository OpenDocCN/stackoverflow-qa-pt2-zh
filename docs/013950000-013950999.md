# StackOverflow 问答 13950000-13950999

# qt - Cannot initialize EGL display: "Bad alloc (0x3003)" on running a sample app on arm platform

> ID：13950000
> 
> 赞同：2
> 
> 时间：2012-12-19T10:13:47.707
> 
> 标签：qt, opengl-es, opengl-es-2.0

I am trying to run a very simple app using openGLES on the arm platform and I got this problem:

```
QEgl::display(): Cannot initialize EGL display: "Bad alloc (0x3003)" 
QEglContext::chooseConfig(): Could not find a suitable EGL configuration 
Requested: "type=es2 rgba=0,0,0,0 surface-type=window" 
Available: 
Segmentation fault (core dumped) 
```

Any idea how to fix this problem?

I am using QT-4.8.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T06:53:13.133

我的 ARM 嵌入式 linux 平台也有类似的问题。检查您的 SGX 驱动程序是否安装正确。检查 hello_gles2 是否正常工作。OpenGL ES 需要特定模式下的帧缓冲区。我使用了从源代码本地安装的 Qt 4.8.3。一旦 ererything 安装正确，就可以将 Qt 与 openGL ES 一起使用

# php - 为什么我的网站失去了网格布局对齐。它是用砖砌的

> ID：13950001
> 
> 赞同：6
> 
> 时间：2012-12-19T10:13:51.057
> 
> 标签：php, css, jquery-masonry

我创建了一个画廊页面。它显示具有可变高度的图像。正如[这里建议的使用砌体插件，](https://stackoverflow.com/questions/11387625/display-divs-with-different-sizes-with-css)我使用了砌体插件。一直到昨晚都很好用。

但是今天早上当我再次检查时，我失去了对齐。自过去 3 天以来，未对网站进行任何更改。这是快照。 ![在此处查看我网站的屏幕截图](../Images/8d87ef19ea5a005732692b22f35746dd.png)

**早些时候**，所有的 div 都会自动调整（标记的空格被消除），显示看起来像

[http://pinterest.com/](http://pinterest.com/)

但突然间，我的网站失去了对齐。无法弄清楚问题。

可能是什么问题....请帮助我。我的网站有一个大问题

这是css对齐和砌体应用程序

```
#body {background-color:#1c4d5c;padding:10% 0% 20% 20%;}
#imagesection
{
margin:10px 10px 10px 10px;
float:left;
width:214px;
border: 5px solid #f0f0f0;
background-color:#d2dbde;
border-radius:5px;
}

var $container = $('#body');

$container.imagesLoaded( function(){
  $container.masonry({
    itemSelector : '#imagesection'
  });
}); 
```

**砌体在 IE 8 中不起作用** ![砌体在 IE 8 中不起作用](../Images/babb549196aa899b74b9733288ae226c.png)

注意：我正在使用 codeigniter，因此我正在加载页眉、正文、页脚等文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T10:58:07.043

尝试仅使用 .box .col2 等砌体插件中所需的类 ...

其他课程可能会影响您的整体对齐..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T10:55:12.147

在我看来，周围的容器太大了。再次将宽度调整为更小。你可以在右边界看到平铺算法，所以我猜砌体工作得很好。

# c# - Parallel HTTPRequest using HttpClient in Windows 8 app

> ID：13950002
> 
> 赞同：4
> 
> 时间：2012-12-19T10:13:55.147
> 
> 标签：c#, .net, windows-8, .net-4.5, dotnet-httpclient

I am using HttpClient for sending HTTP requests and receiving HTTP responses in my Windows 8 app. I have few questions on the same:

1) Can I send multiple/parallel HTTP requests using a single HttpClient object? Is there a recommended way to use HttpClient object efficiently?

2) What is the difference when I create HttpClient object every time and when I re-use the same object for each new request?

3) I am tracking the requests and responses using Fiddler. What I found out is that the response time in Fiddler is different than the response time I am calculating manually inside my App. The response time for a request in Fiddler is always lower than the calculated response time in my app. Can anybody please tell me why it is like that?

4) One more thing I came across is that for every request it is doing HTTPS handshake. Instead it should do it only first time. I checked it using Fiddler and it is clearly visible there. Is there any property I need to set in HttpClient object to stop this from doing it every time.

5) Whether HttpClient is thread-safe?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T10:21:57.193

1 & 5:

> [HttpClient 手册](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx)：
> 
> 以下方法是线程安全的：
> 
> 1.  CancelPendingRequests
> 2.  删除异步
> 3.  获取异步
> 4.  GetByteArrayAsync
> 5.  获取流异步
> 6.  获取字符串异步
> 7.  后异步
> 8.  PutAsync
> 9.  发送异步

2 & 4:

> [HttpClient 手册](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx)：
> 
> HttpClient 类实例充当发送 HTTP 请求的会话。

3：

Fiddler 充当代理。您的浏览器将请求发送到 Fiddler，Fiddler 将其转发到源服务器。这增加了请求时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T12:24:07.887

确保为每个异步 HttpRequest 使用相同的 HttpClient 对象，这将防止它与请求重叠

# ruby-on-rails - Rails: Formatting a date: "HH:MM" for today, "Yesterday" for yesterday, "Weekday" for other days of last week, "DD.MM." for everything else

> ID：13950005
> 
> 赞同：3
> 
> 时间：2012-12-19T10:14:09.513
> 
> 标签：ruby-on-rails, ruby, date

I'm sure there is a already a solution for what I need, but I guess I don't know what to search for. Any pointings into the right direction?

I'm thinking of something like Rails' `distance_of_time_in_words_to_now`.

Thank you.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T10:35:52.217

我相信你可以使用这样的助手。

```
def custom_format(date)
  if date == Date.today
    "Today"
  elsif date == Date.yesterday
    "Yesterday"
  elsif (date > Date.today - 7) && (date < Date.yesterday)
    date.strftime("%A")
  else
    date.strftime("%B %-d")
  end
end 
```

没有测试代码，它只是指向您的问题的指针。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-16T00:10:12.920

创建一个文件 .../config/initializers/time_format.rb 并将此代码放入其中：

```
Time::DATE_FORMATS[:humanized_ago]  = ->(time) do
  st = Time.now.beginning_of_day
  nd = Time.now.end_of_day

  case 
  when time.between?(st + 1.day, nd + 1.day)
    "Tomorrow #{time.strftime('%H:%M')}"
  when time.between?(st, nd)
    "Today #{time.strftime('%H:%M')}"
  when time.between?(st - 1.day, nd - 1.day)
    "Yesterday #{time.strftime('%H:%M')}"
  when time.between?(st - 6.day, nd - 2.day)
    time.strftime('%a %H:%M')
  else 
    time.strftime('%y-%b-%d %H:%M')
  end
end 
```

在 Rails Time 对象上，调用 function `time.to_s(:humanized_ago)`。如果你不喜欢符号“:humanized_ago”，可以在 time_format.rb 的第一行随意更改它。”如果你想要其他格式，你可以弄清楚。

我按照我的方式写比较是有原因的。我找不到使用 Ruby 内置范围来测试时间的方法，并且您需要能够测试不包括终点的时间间隔。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T10:36:15.090

尝试这个

```
<%= time_ago_in_words(time) %> ago 
```

# windows - Windows 商店 - 认证失败，因为“似乎没有用”

> ID：13950007
> 
> 赞同：2
> 
> 时间：2012-12-19T10:14:26.933
> 
> 标签：windows, windows-8, windows-store-apps, windows-store

我尝试在 Windows Store 上发布我的应用程序：[http](http://pomidoro.codeplex.com/) ://pomidoro.codeplex.com/并且认证失败，因为：'您的应用程序不符合要求 1.1。来自测试者的评论：这个应用似乎没有提供价值，或者对评论者来说似乎没有用。这是否意味着我再也没有机会发表它了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T06:06:47.103

不，您可以进行一些调整并再次发布。以下是一些想法：

*   这可能是营销问题，修改您随申请提交的描述将解决该问题。您在[http://pomidoro.codeplex.com](http://pomidoro.codeplex.com)上的描述非常好，但也许您可以添加一些数据来*说明*它如何帮助您更有效地工作，以防审阅者不熟悉 Pomodoro。这里有一些关于编写好的描述/应用列表的[提示](http://msdn.microsoft.com/en-us/library/windows/apps/jj657970.aspx)。
*   否则，您可以向应用程序添加一些额外的功能，使其不仅仅是一个计时器。用户是否可以在应用程序中记录他们的整个待办事项列表，然后从中选择番茄钟期间要关注的内容？或者，让他们在计时器响起后将每个番茄钟列为有效/无效，并保留历史数据，以便他们可以查看一天中哪些时间最有效？等等...

这是[关于 Windows 应用商店的常见认证失败以及如何修复它们的博客文章系列](http://blogs.msdn.com/b/jennifer/archive/2012/11/12/common-certification-errors-when-submitting-to-the-windows-store.aspx)中的第一篇文章，这也可能有用。

祝你好运！

# java - 如何排除在 WAR 文件中添加的 Jars

> ID：13950012
> 
> 赞同：8
> 
> 时间：2012-12-19T10:14:46.567
> 
> 标签：java, eclipse, jar, war

在我的应用程序中，我将一些 jar 设置为项目依赖项。这个 jars 被添加为用户库。当我在 JBoss AS7 中运行应用程序并使用 JBoss 服务器提供的 JSF 实现时，我已经从模块中复制了这些 JSF jar 并创建了一个新的用户库，即 JBoss JSF。该库已用于在 Eclipse 中创建 JSF 2 动态 Web 项目。现在，当我将其导出为 WAR 文件时，这些 jsf jar 会自动被复制并添加`/WEB-INF/lib`到 war 中。我不希望添加这些文件，因为它们已经存在于容器中。

有什么办法吗？

有关更多信息，这是 .classpath 文件的内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="src" path="src/common"/>
    <classpathentry kind="src" path="src/service"/>
    <classpathentry kind="src" path="src/web"/>
    <classpathentry kind="src" path="src/persistent"/>
    <classpathentry kind="src" path="src/dao"/>
    <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/jre7">
        <attributes>
            <attribute name="owner.project.facets" value="java"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="con" path="org.eclipse.jst.j2ee.internal.web.container"/>
    <classpathentry kind="con" path="org.eclipse.jst.j2ee.internal.module.container"/>
    <classpathentry kind="con" path="org.eclipse.jdt.USER_LIBRARY/JBoss JSF">
        <attributes>
            <attribute name="owner.project.facets" value="jst.jsf"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="con" path="org.eclipse.jdt.USER_LIBRARY/JBoss Servlet"/>
    <classpathentry kind="con" path="org.eclipse.jdt.USER_LIBRARY/JBoss log4j"/>
    <classpathentry kind="output" path="build/classes"/>
</classpath> 
```

我的应用程序的部署程序集： ![在此处输入图像描述](../Images/0c98fe582bfd60bb998185f86df785b5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:44:09.213

尝试这个

1.  打开项目属性
2.  选择部署程序集
3.  选择需要从 war 文件中排除的库，然后单击 Remove 。您选择的罐子将从 War 文件中删除

或尝试在 .classpath 文件中再添加一个属性

```
<classpathentry kind="con" path="org.eclipse.jdt.USER_LIBRARY/JBoss JSF">

   <attributes>

    <attribute name="owner.project.facets" value="jst.jsf"/>

    <attribute name="org.eclipse.jst.component.nondependency" value=""/> 

  </attributes> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-04T07:35:19.573

您可以将依赖项的范围设置为提供。表示您希望 JDK 或容器在运行时提供依赖项。例如，在为 Java 企业版构建 Web 应用程序时，您可以将 Servlet API 和相关 Java EE API 的依赖设置为提供的范围，因为 Web 容器提供了这些类。此范围仅在编译和测试类路径上可用，并且不可传递。具有此范围的依赖项不会包含在 wars/ears 中。

```
 <dependency>
        <groupId>javax.mail</groupId>
        <artifactId>mail</artifactId>
        <version>1.4</version>
        <scope>provided</scope>
    </dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T10:22:45.827

1.  打开项目属性对话框。
2.  从左侧面板中选择 Java Build Path。
3.  选择源选项卡。
4.  将列出项目中包含的所有 Jar 的列表。
5.  选择 JAR 文件并单击编辑按钮。
6.  在包含或排除模式窗口中，选择排除（如果这是您想要的）并添加模式。选择确定。
7.  在罐子的每一行中，在右侧，您会相应地看到一个加号或减号。

# asp.net-mvc-3 - MVC 3 Razor webgrid - 如何更改表格宽度

> ID：13950015
> 
> 赞同：1
> 
> 时间：2012-12-19T10:14:56.073
> 
> 标签：asp.net-mvc-3, razor, webgrid

我有一个问题，无论我尝试什么，我都无法更改 webgrid 表的宽度。它会忽略其父 div 的 css，并且使用 css 更改网格的宽度没有任何效果。

**Webgrid 局部视图**

```
@model IEnumerable<UserManager.Models.vw_UserManager_Model>
@{WebGrid grid = new WebGrid(Model, canPage: true, canSort: true, rowsPerPage: 15, selectionFieldName: "selectedRow", fieldNamePrefix: "gridItem");}
<b>@Html.Label("Total number of records displayed: ")</b>
@Html.Label(grid.TotalRowCount.ToString())
@grid.GetHtml(
    fillEmptyRows: true,
        tableStyle: "webgrid",
                alternatingRowStyle: "webgrid-alternating-row",
                headerStyle: "webgrid-header",
                footerStyle: "webgrid-footer",
                selectedRowStyle: "webgrid-selected-row",
            rowStyle: "webgrid-row-style",
        mode: WebGridPagerModes.All,
columns: new[] {
    grid.Column("UserName"),
    grid.Column("salutation"),
    grid.Column("FirstName"),
    grid.Column("LastName"),
    grid.Column("Password"),
     grid.Column(header: "Session Status", canSort: true, format: @<text><input name="User logged in" 
      type="checkbox"  @(item.session_status == 1 ? "Checked" : null) onclick="logUserOff('@Url.Action("LogUserOff", "UserManager", new {userid = item.userid} )')" id="chkboxIsActive" /></text>),
    grid.Column("isactive"),
    //grid.Column("isapproved"),  
    grid.Column("MaxConcurrentUsers"),
    grid.Column("email"),
    grid.Column("group_name"),
   grid.Column("module_name"), 
     grid.Column(header:"Edit", format:@<text><div id="btnEditSelectedRow">
         @Html.ActionLink("Edit record", "EditUser", "UserManager", new {
         userid = item.userid,
         salutation = item.salutation,
         firstname = item.FirstName, 
         lastname = item.LastName, 
         password = item.Password, 
         isactive = item.isactive,
         isapproved = item.IsApproved,
         maxconcurrentusers = item.MaxConcurrentUsers,
         email = item.email, 
         rowtype = item.rowtype,
         module = item.module_name, 
         group = item.group_name }, null)</div></text>),

    grid.Column(header:"Delete", format:@<text><div id="btnDelSelectedRow">
         @Html.ActionLink("Delete record", "DeleteUser", "UserManager", new {
         userid = item.userid,
         username = item.UserName,
         salutation = item.salutation,
         firstname = item.FirstName, 
         lastname = item.LastName, 
         password = item.Password, 
         isactive = item.isactive, 
         email = item.email, 
         module = item.module_name, 
         rowtype = item.rowtype,
         group = item.group_name }, null)</div></text>),
}) 
```

**网络网格 CSS**

```
.webgrid
    {
        width: 500px;
        border: 0px;
        border-collapse: collapse;
        oveflow:scroll auto;
    }

    .webgrid a
    {
       color: #000;
   }

   .webgrid-header
   {
       padding: 6px 5px;
       text-align: center;
       background-color: #e8eef4;
       border-bottom: 2px solid #3966A2;
       height: 40px;

       border-top: 2px solid #D6E8FF;
       border-left: 2px solid #D6E8FF;
       border-right: 2px solid #D6E8FF;
   }

   .webgrid-footer
   {
       padding: 6px 5px;
       text-align: center;
       background-color: #e8eef4;
       border-top: 2px solid #3966A2;
       height: 30px;

       border-bottom: 2px solid #D6E8FF;
       border-left: 2px solid #D6E8FF;
       border-right: 2px solid #D6E8FF;
   }

   .webgrid-alternating-row
   {
       height: 30px;
       background-color: #f2f2f2;
       border-bottom: 1px solid #d2d2d2;

       border-left: 2px solid #D6E8FF;
       border-right: 2px solid #D6E8FF;
   }

   .webgrid-row-style
   {
       height: 30px;
       border-bottom: 1px solid #d2d2d2;

       border-left: 2px solid #D6E8FF;
       border-right: 2px solid #D6E8FF;
   }

   .webgrid-selected-row
   {
       font-weight: bold;
   } 
```

![在此处输入图像描述](../Images/4a421291887f0ec0c1755bf930ed9a4d.png)

![在此处输入图像描述](../Images/4964fe4a8a37a1201a233e022f893e7a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:33:49.677

问题出在 Visual Studio 生成的 .css 文件中。打开 Content\Site.css ，你会发现如下样式定义：

```
 .content-wrapper {
       margin: 0 auto;
       max-width: 960px;
   } 
```

最大宽度对您的表格来说太小了，所以请放大它。（并重新加载浏览器 b/c 浏览器倾向于缓存 .css 文件）

此外，您可以通过替换来调整包装不良的 Table DataCell（尽管，如果您只调整不增加最大宽度的情况，它将强制其他一些单元格进行包装）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:41:56.173

MVC3 生成的 Site.css 具有 .page {width: 98%;} 您可以将其更改为某个固定值，例如“width: 2000px;”。这会有所帮助，但如果有人知道如何使其扩展到 WebGrid 的大小，那就更好了！

# javascript - Javascript - 将整数写入文本脚本字符串

> ID：13950018
> 
> 赞同：0
> 
> 时间：2012-12-19T10:15:02.620
> 
> 标签：javascript

> **可能重复：**
> [JavaScript 数字到单词](https://stackoverflow.com/questions/5529934/javascript-numbers-to-words)

我正在寻找一种从文本框中获取数字输入并将其转换为一行文本的方法，就像它所说的那样。例如 -

> 输入金额 £[ 950000]

```
NINE HUNDRED AND FIFTY THOUSAND 
```

有什么想法我能做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T10:18:28.960

看看[这个库](http://javascript.about.com/library/bltoword.htm)。那应该做你需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:56:01.540

使用这个代码它给你背后的想法---

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/html4/loose.dtd">
                <%@ page contentType="text/html;charset=windows-1252"%>

                <html>
                <head>
                <meta http-equiv="Content-Type" content="text/html; charset=windows-1252"/>
                <title>numericToEnglish</title>
                </head>
                <body>

                <script type="text/javascript">

                aTens = [ "Twenty", "Thirty", "Forty", "Fifty", "Sixty", "Seventy", "Eighty", "Ninety"];
                aOnes = [ "Zero", "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine",
                "Ten", "Eleven", "Twelve", "Thirteen", "Fourteen", "Fifteen", "Sixteen", "Seventeen", "Eighteen", 
                "Nineteen" ];
                function ConvertToHundreds(num)
                {
                var cNum, nNum;
                var cWords = "";
                num %= 1000;
                if (num > 99) {
                /* Hundreds. */
                cNum = String(num);
                nNum = Number(cNum.charAt(0));
                cWords += aOnes[nNum] + " Hundred";
                num %= 100;
                if (num > 0)
                cWords += " and "
                }

                if (num > 19) {
                /* Tens. */
                cNum = String(num);
                nNum = Number(cNum.charAt(0));
                cWords += aTens[nNum - 2];
                num %= 10;
                if (num > 0)
                cWords += "-";
                }
                if (num > 0) {
                /* Ones and teens. */
                nNum = Math.floor(num);
                cWords += aOnes[nNum];
                }
                return cWords;
                }
                function ConvertToWords(num)
                {
                if(num == "")
                {
                alert("enter num")

                return
                }
                var aUnits = [ "Thousand", "Million", "Billion", "Trillion", "Quadrillion" ];
                var cWords = (num >= 1 && num < 2) ? "Dollar and " : "Dollars and ";
                var nLeft = Math.floor(num);
                for (var i = 0; nLeft > 0; i++) { 
                if (nLeft % 1000 > 0) {
                if (i != 0)
                cWords = ConvertToHundreds(nLeft) + " " + aUnits[i - 1] + " " + cWords;
                else
                cWords = ConvertToHundreds(nLeft) + " " + cWords;
                }
                nLeft = Math.floor(nLeft / 1000);
                }
                num = Math.round(num * 100) % 100;
                if (num > 0)
                cWords += ConvertToHundreds(num) + " Cents";
                else
                cWords += "Zero Cents";

                document.getElementById("divVal").innerHTML = cWords
                return cWords;
                }

                </script>
                <input type=text id=Number name=Number>
                <input type=button id=btnOk name=btnOk value="Number To English" onclick='ConvertToWords(document.getElementById("Number").value)' />

                <div id="divVal"></div>
                </body>
                </html> 
```

# php - PHP 表单提交并定位到原来的位置

> ID：13950019
> 
> 赞同：1
> 
> 时间：2012-12-19T10:15:02.697
> 
> 标签：php, anchor, form-submit

我的页面上有一个包含大量行的数据表。每行都有一个 id、name、surname 和一个 action 列。在操作列中有一个文本区域，您可以在其中添加评论和提交该评论的按钮。当我提交评论时，我希望页面将自己定位在它所在的位置，但我无法弄清楚如何。有任何想法吗？

这是代码片段：

```
$result = mysql_query($query, $connection);
while ($row = mysql_fetch_array($result)) {
echo "<tr>";
    echo "<form method='post' action='saveComment.php#position_".$row['id']."'>";
    echo "<td hidden><input hidden name='id' readonly value=" . $row['id'] . " /></td>";
    echo "<td>" . $row['name'] . "</td>";
    echo "<td>" . $row['surname'] . "</td>";
    echo "<td><input type='submit' name='submit' value='Comment'/></td>";
    echo "<a id='position_".$row['id']."'></a>";
echo "</tr>";
} 
```

我尝试将当前行的 id 传递给保存评论的脚本，它确实传递了值，之后它应该将它定位回原来的位置，但它似乎不起作用：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:19:35.367

使用 Ajax 提交表单，并成功：

```
window.location = 'saveComment.php#position_<? echo $row['id']; ?>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:04:09.303

我发现了它是如何与锚一起工作的！问题是我在重定向回原始页面时没有在 saveComment.php 脚本中传递 id。

表单所在页面中的代码：

```
if ($_POST['submit']){
$id=$_POST["id"];   
header('Refresh: 0.5; URL=originalPage.php#position_' . $id);
//...rest of code goes here...
} 
```

就是这样 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T10:18:24.437

你需要使用

```
<a name='position_".$row['id']."'></a> 
```

代替

```
<a id='position_".$row['id']."'></a> 
```

# mysql - MySQL：转换数据类型和排序规则对存储数据的影响

> ID：13950021
> 
> 赞同：1
> 
> 时间：2012-12-19T10:15:13.987
> 
> 标签：mysql, type-conversion, database-performance, collation, sqldatatypes

我对此有一个一般性的问题。很多时候我们想要在**之前插入大量数据时**更改字段或排序规则的数据类型。考虑这些情况：

1.  将`varchar`排序规则从转换`utf8_general_ci`为`latin1_swedish_ci`：据我所知，第一个具有多字节字符，第二个具有单字节字符。此转换是否正确操作存储的记录？这种转换是否会导致现有数据量的减少（可能减少 50%）？

2.  转换`int(10)`为`smallint(5)`：数据量是否正确减少到 50%？

3.  或者例如：`int(10)`to `unsigned int(10)`- `text`to `varchar(1000)`- `varchar(20)`to `char(10)`, ...

很明显，可以采取这些措施来提高效率、减少数据量并...

考虑我有一个包含 1,000,000 条记录的表。我想知道执行此类操作是否会对存储的数据产生不良影响，或者它是否会降低将来涉及该表的插入和选择的性能。

**更新：**
当我谈到将 utf8 编码字符集更改为拉丁语时，我的字段的值当然是英语（很明显，如果有日语，它们就会丢失）。有了这个假设，我问的是结果表的大小和性能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T10:34:01.973

1.  > 将`varchar`排序规则从转换`utf8_general_ci`为`latin1_swedish_ci`：据我所知，第一个具有多字节字符，第二个具有单字节字符。此转换是否正确操作存储的记录？这种转换是否会导致现有数据量的减少（可能减少 50%）？

    **排序规则**只是用于字符串比较的顺序——它（几乎）与用于数据存储的**字符编码无关。**我说*几乎*是因为排序规则只能用于某些字符集，所以更改排序规则*可能会*强制更改字符编码。

    在修改**字符编码**的范围内，MySQL 将正确地将值重新编码为新字符集，无论是从单字节到多字节还是反之亦然。请注意，对于该列来说太大的任何值都将被截断。

    如果新的字符类型是可变长度的，并且新编码中的值使用比以前更少的字节进行编码，那么表的大小当然会减少。

2.  > 转换`int(10)`为`smallint(5)`：数据量是否正确减少到 50%？

    `INT`无论显示宽度如何，`SMALLINT`分别占用 4 和 2 个字节：所以是的，表格的大小会相应减小。

3.  > 或者例如：`int(10)`to `unsigned int(10)`- `text`to `varchar(1000)`- `varchar(20)`to `char(10)`, ...

    *   `INT`不管有没有带符号都占用4个字节，所以不会有变化；

    *   `TEXT`并且`VARCHAR(1000)`都占用*L* +2 个字节（其中*L*是值的字节长度），所以不会有任何变化；

    *   `VARCHAR(20)`占用*L* +1 个字节（其中*L*是值的字节长度），而`CHAR(10)`占用 10× *w*个字节（其中*w*是字符集中最大长度字符所需的字节数），所以很可能会有变化，但是它取决于存储的实际值和使用的字符编码。

请注意，根据存储引擎，表大小的减少可能不会立即释放到文件系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:36:43.400

A1。排序规则不会更改您的数据。它会更改查询中的排序顺序，并可能更改您的索引（？）。

A2。列中数据的长度将减少，但是每个表行总是有一些开销，并且您无法更改。此外，如果您的数据不是唯一的，您将不会看到索引大小有多少减少，因为您的索引看起来像这样：33->{row1,row2,row3...},67->{row9,row0,row7}并且每个行指针都比 int 大得多。

换句话说，如果您有一个包含一百个 int 行但没有很多索引的表，并将所有这些列更改为 tinyint，您会看到显着的改进。如果它只有一列，请不要打扰。

[http://dev.mysql.com/doc/refman/5.0/en/storage-requirements.html](http://dev.mysql.com/doc/refman/5.0/en/storage-requirements.html) [http://dev.mysql.com/doc/refman/5.0/en/innodb-physical-record.html](http://dev.mysql.com/doc/refman/5.0/en/innodb-physical-record.html)

A3。请阅读 text vs varchar。前者将数据与表行分开存储，后者将数据存储在行中。每个都有自己的含义。

ps 行和索引开销很大程度上取决于您使用的数据库引擎。通常你应该使用innodb。然而对于只读任务，例如数据挖掘，myisam 更有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T10:44:59.707

*   Converting `varchar` collation from `utf8_general_ci` to `latin1_swedish_ci`: It can reduce table(file) size, but you can lose not latin symbols, only english words will be stored correctly.
*   Conversion of `int(10)` to `smallint(5)` - it will reduce the volume of data. Conversion of `int(10)` to `unsigned int(10)` - it won't reduce. In these cases you should care about the values, you can get an error - out of range value.
*   Conversion `varchar(20)` to `char(10)`: CHARs are used for strings that always have the same length (for example - 10), if the strings are different in length, then use VARCHAR data type.

# php - URL的奇怪结果

> ID：13950025
> 
> 赞同：0
> 
> 时间：2012-12-19T10:15:43.070
> 
> 标签：php, url, file-get-contents

```
http://!@#$%^&*().com 
```

这似乎是一个无效的 URL，实际上浏览器说它是一个无效的 URL。

但是当我通过 file_get_contents (XAMPP) 获取这个 URL 时，它给出了一个“500 Internal Server Error”的异常，因为这个 URL 不存在，为什么我没有得到 404 ？

检查我正在使用的响应

```
$http_response_header 
```

这是我的代码：

```
$url = "http://!@#$%^&*().com";
$contents = @file_get_contents($url);   
print_r($http_response_header); 
```

当我在另一台机器（WAMP）上运行它时，它说`$http_response_header`是一个未定义的变量。

有人知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:27:59.293

You are suppressing errors at the `file_get_contents` call, the domain you entered is actually invalid as you stated and the function call will return false and trigger the following warning

```
file_get_contents(http://.@#$%^&*().com): failed to open stream: operation failed 
```

You won't get a 404 because the domain is invalid and the http request is probably never sent, hence your `$http_response_header` is empty.

Maybe a difference in OS or PHP version between XAMPP and WAMP explain why they act differently?

My advice is first checking the return value of file_get_contents and only when it's not false continue with inspecting the response headers.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:27:38.423

You are not getting `404` because the domain does not exist. Try using valid domain. Using `http://.@#$%^&*().com` would return `failed to open stream: operation failed` while a valid domain would return `failed to open stream: HTTP request failed`

Please note one is `operation failed` and the other `HTTP request failed` you can only get HTTP error when there is HTTP request failed

Example

```
error_reporting(E_ALL);
ini_set("display_errors", "On");

$url = "http://stockoverflow.com/xxxx"; // URL does not exist 
$response = @file_get_contents($url);
var_dump($response,$http_response_header); 
```

Output

```
boolean false
array (size=7)
  0 => string 'HTTP/1.1 404 Not Found' (length=22)  <--- you get your 404
  1 => string 'Content-Type: text/html' (length=23)
  2 => string 'Server: Microsoft-IIS/7.5' (length=25)
  3 => string 'X-Powered-By: ASP.NET' (length=21)
  4 => string 'Date: Wed, 19 Dec 2012 10:26:20 GMT' (length=35)
  5 => string 'Connection: close' (length=17)
  6 => string 'Content-Length: 1245' (length=20) 
```

# c++ - 在 C++ Win32 中哪个 Windows SDK 最适合我？

> ID：13950028
> 
> 赞同：0
> 
> 时间：2012-12-19T10:15:50.253
> 
> 标签：c++, sdk, codeblocks, winapi

我需要开发一个可以在任何版本的 Windows XP（Service Pack 1、2 或非 SP）或任何更高版本的 Windows（Vista、7 或 8）中运行的应用程序。

在这个应用程序中，我需要：

1-连接到最大记录 500,000 的数据库

2-连接到HTTP协议并接收数据

我是 C++ 新手，我正在使用 code::block 编译器。

哪一个是 C++ 语言中最适合我的 windows sdk？

如果您有任何推荐的数据库给我，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:30:02.023

如果您想使用 Windows SDK，您可以在 MSDN 上找到任何信息，您只需搜索即可。但我建议使用一些跨平台的，也许更具体的库。例如，对于 HTTP 协议，您可以尝试 libcurl。他们的网站上有很多示例，您可以轻松实现任何 HTTP 功能。对于数据库功能（本地数据库），您可以使用 sqlite。它非常强大、快速和方便。这两个库都可以轻松添加到您的应用程序中，并且它们可以在任何版本的 Windows 中运行。

PS要使用sqlite，您应该了解一些SQL查询语言的基础知识，但这不是问题，我认为

# svn - 如何在结帐期间从 SVN 存储库中排除某些目录

> ID：13950034
> 
> 赞同：7
> 
> 时间：2012-12-19T10:16:06.873
> 
> 标签：svn, batch-file

我正在编写一个脚本来从 SVN 存储库中检出数据。网址是

[http://subversion-practice.sweng.xyz.com/cvn/repos/ps/passport](http://subversion-practice.sweng.xyz.com/cvn/repos/ps/passport)

此非本地 URL 上的护照下有一个文件夹，我需要将其从结帐中排除。`Data_backup`（要排除的文件夹名称）。

使用的 SVN 结帐命令是

```
svn checkout --username ab230141 --password Table717 http://subversion-practice.sweng.xyz.com/cvn/repos/ps/passport >> C:/svn_log.log 2>&1 
```

有人可以帮助我使用可以用于此的命令吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-19T10:28:34.477

您可以使用[稀疏目录](http://svnbook.red-bean.com/en/1.7/svn.advanced.sparsedirs.html)。您需要为孩子们​​执行`svn checkout --depth empty`一些`svn update --set-depth infinity`命令。链接手册中对此进行了很好的解释。我猜排除的文件夹在树中越深，您需要的更新命令就越多。

或者，您可以先签出整个树，然后`svn update --set-depth exclude`针对要忽略的文件夹运行。

# zend-framework - 使用 Zend Ldap 对 Windows AD 进行身份验证

> ID：13950037
> 
> 赞同：1
> 
> 时间：2012-12-19T10:16:21.587
> 
> 标签：zend-framework, ssl, active-directory

我正在使用 Zend Framework 1.12 构建的 PHP 应用程序从 LAMP 系统针对 Windows AD 服务器进行身份验证。我正在使用 Zend_Ldap 进行连接。如果我不使用安全连接（即 LDAP over LDAPS），身份验证过程可以正常工作。但是，我希望能够从 Web App 执行其他操作，例如在 AD 服务器上重置密码。但是，这需要安全连接。

先介绍一些背景资料

我的 Web 应用程序通过带有自签名证书的 HTTPS 连接 (https://intranet) 运行。自签名证书已添加到 AD 服务器上的受信任存储区。

当我运行我的脚本时，我收到以下错误消息：

```
Error: 0x51 (Can't contact LDAP server; TLS error -8179:Peer's Certificate issuer is not recognized.): ldaps://192.168.0.x 
```

我的代码如下：

```
$options = array(
                 'host' => 192.168.0.2,
                 'accountDomainName' => domain.internal,
                 'accountDomainNameShort' => domain,
                 'accountCanonicalForm' => 3,
                 'baseDn' => "OU=Establishments,DC=domain,DC=internal"
                 'username' => 'admin',
                 'password' => 'password'
                 'useSsl' => true
                 );
$ldap = new Zend_Ldap($options);
$ldap->bind(); 
```

我的问题是：

我的问题出在我的代码或服务器配置的某个地方吗？有没有人有过 Zend_Ldap 和 AD 的经验？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T08:11:57.757

好的，进一步阅读表明我的问题与服务器有关。

我需要将 CA 证书从 Windows AD 服务器导入到 /etc/openldap/certs 中我的 Linux 机器上的证书存储区，然后编辑 /etc/openldap/ldap.conf 使其显示为：

```
TLS_CACERT /etc/openldap/certs/mydoamin.com.pem 
```

我现在可以使用 LDAPS 安全地连接到 Windows AD Server。

# excel - 使用宏创建图形

> ID：13950039
> 
> 赞同：1
> 
> 时间：2012-12-19T10:16:21.550
> 
> 标签：excel

1) 问题

我想将宏用于我的原始数据排列，我的原始数据位于文件夹中的许多 .xls 文件中，所有排列如下：

A1 ........ 空白 A(Blank) --------- 空白

我需要在 1 个 .xls 文件中的不同工作表中排列每一列，就像这样

数据（sheet1）数据（sheet2）直到空白...列A 列B直到空白...

2）问题是我需要循环这个宏以便于创建图形......真的很感激帮助

```
Sub Macro1()
'
' Macro1 Macro
'
' Keyboard Shortcut: Ctrl+g

    ActiveSheet.Shapes.AddChart.Select
    ActiveChart.ChartType = xlLine
    ActiveChart.ApplyChartTemplate ( _
        "C:\Users\bukharms\AppData\Roaming\Microsoft\Templates\Charts\analysis.crtx")

    ActiveSheet.ChartObjects("Ambient").Activate
    ActiveChart.SeriesCollection(1).Values = "='data'!$B$2:$B$298"
    ActiveChart.SeriesCollection(1).Values = "='data (2)'!$B$2:$B$298"
    ActiveChart.SeriesCollection(2).Values = "='data (3)'!$B$2:$B$261"
    ActiveChart.SeriesCollection(3).Values = "='data (4)'!$B$2:$B$243"
    ActiveChart.SeriesCollection(4).Values = "='data (5)'!$B$2:$B$265"
    ActiveChart.SeriesCollection(5).Values = "='data (6)'!$B$2:$B$307"
    ActiveChart.SeriesCollection(6).Values = "='data (7)'!$B$2:$B$728"

 ActiveSheet.Shapes.AddChart.Select
    ActiveChart.ChartType = xlLine
    ActiveChart.ApplyChartTemplate ( _
        "C:\Users\bukharms\AppData\Roaming\Microsoft\Templates\Charts\analysis.crtx")

    ActiveSheet.ChartObjects("Coolant Into Engine").Activate
    ActiveChart.SeriesCollection(1).Values = "='data'!$C$2:$C$298"
    ActiveChart.SeriesCollection(1).Values = "='data (2)'!$C$2:$C$298"
    ActiveChart.SeriesCollection(2).Values = "='data (3)'!$C$2:$C$261"
    ActiveChart.SeriesCollection(3).Values = "='data (4)'!$C$2:$C$243"
    ActiveChart.SeriesCollection(4).Values = "='data (5)'!$C$2:$C$265"
    ActiveChart.SeriesCollection(5).Values = "='data (6)'!$C$2:$C$307"
    ActiveChart.SeriesCollection(6).Values = "='data (7)'!$C$2:$C$728"

 ActiveSheet.Shapes.AddChart.Select
    ActiveChart.ChartType = xlLine
    ActiveChart.ApplyChartTemplate ( _
        "C:\Users\bukharms\AppData\Roaming\Microsoft\Templates\Charts\analysis.crtx")

    ActiveSheet.ChartObjects("Coolant Out from Engine").Activate
    ActiveChart.SeriesCollection(1).Values = "='data'!$D$2:$D$298"
    ActiveChart.SeriesCollection(1).Values = "='data (2)'!$D$2:$D$298"
    ActiveChart.SeriesCollection(2).Values = "='data (3)'!$D$2:$D$261"
    ActiveChart.SeriesCollection(3).Values = "='data (4)'!$D$2:$D$243"
    ActiveChart.SeriesCollection(4).Values = "='data (5)'!$D$2:$D$265"
    ActiveChart.SeriesCollection(5).Values = "='data (6)'!$D$2:$D$307"
    ActiveChart.SeriesCollection(6).Values = "='data (7)'!$D$2:$D$728" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:45:41.933

您可以通过使用 Chr() 转换 ascii 代码来循环字符。Chr(64) = 'A'，Chr(65) = 'B' 等等...

```
 For i = 1 To 4   
    ActiveSheet.ChartObjects(i).Activate
    ActiveChart.SeriesCollection(1).Values = "='data'!$" & Chr(i + 65) & "$2:$" & Chr(i + 65) & "$298"
    ActiveChart.SeriesCollection(1).Values = "='data (2)'!$" & Chr(i + 65) & "$2:$" & Chr(i + 65) & "$298"
    'etc...
  next i 
```

# android - 如何在 Android 中使用 Intent 获取 Facebook 好友列表？

> ID：13950040
> 
> 赞同：0
> 
> 时间：2012-12-19T10:16:24.530
> 
> 标签：android, facebook, android-intent, facebook-android-sdk

我想使用意图获取 facebook 的好友列表。请让我知道是否有任何方法可以通过使用设备的内置应用程序来获取 facebook 的朋友列表。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T17:02:47.303

您需要将 Android SDK 集成到您的应用程序中，[这里是下载最新 SDK 的链接](https://developers.facebook.com/android/)。然后，您必须让用户验证您的应用程序才能访问他们的信息。

**这是执行此操作的示例代码**

```
private SessionTracker mSessionTracker;
private Session mCurrentSession;

private void signInWithFacebook() {

    mSessionTracker = new SessionTracker(getBaseContext(), new StatusCallback() {

        @Override
        public void call(Session session, SessionState state, Exception exception) {
        }
    }, null, false);

    String applicationId = Utility.getMetadataApplicationId(getBaseContext());
    mCurrentSession = mSessionTracker.getSession();

    if (mCurrentSession == null || mCurrentSession.getState().isClosed()) {
        mSessionTracker.setSession(null);
        Session session = new Session.Builder(getBaseContext()).setApplicationId(applicationId).build();
        Session.setActiveSession(session);
        mCurrentSession = session;
    }

    if (!mCurrentSession.isOpened()) {
        Session.OpenRequest openRequest = null;
        openRequest = new Session.OpenRequest(SignUpChoices.this);

        if (openRequest != null) {
            openRequest.setDefaultAudience(SessionDefaultAudience.FRIENDS);
            openRequest.setPermissions(Arrays.asList("user_birthday", "email", "user_location"));
            openRequest.setLoginBehavior(SessionLoginBehavior.SSO_WITH_FALLBACK);

            mCurrentSession.openForRead(openRequest);

            Request.executeMeRequestAsync(mCurrentSession, new Request.GraphUserCallback() {

              // callback after Graph API response with user object
              @Override
              public void onCompleted(GraphUser user, Response response) {
                  Log.w("myConsultant", user.getId() + " " + user.getName() + " " + user.getInnerJSONObject());
              }
          });
        }
    }
} 
```

如果您的用户已批准您的应用程序，您可以对他们的信息执行其他请求。 [朋友信息示例](https://stackoverflow.com/a/14001379/703910)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-24T05:09:07.263

最后我找到了一种`friendlist`使用`Intent`.

> ```
> Intent m_fb=getOpenFacebookIntent(m_context);           
>             startActivity(m_fb);
> 
> public static Intent getOpenFacebookIntent(Context context) {  
>        try {  
>         context.getPackageManager().getPackageInfo("com.facebook.katana", 0);
>               return new Intent(Intent.ACTION_VIEW,Uri.parse("fb://profile/<user_id>/fans"));           
>        } catch (Exception e) {  
>         return new Intent(Intent.ACTION_VIEW, Uri.parse("https://www.facebook.com/abc.xyz"));  
>        }  
>     } 
> ```

您可以使用[此处](http://www.kanatorn.info/2012/01/03/open-facebook-official-app-with-intent-android/)列出的 Intent 的官方 Facebook 应用程序。

# python - 使用 Beautiful Soup 时删除 html 标签的问题

> ID：13950041
> 
> 赞同：1
> 
> 时间：2012-12-19T10:16:25.247
> 
> 标签：python, python-2.7, beautifulsoup

我正在使用漂亮的汤从网站上抓取一些数据，但是在打印数据时我无法从数据中删除 html 标签。参考代码为：

```
import csv
import urllib2
import sys  
from bs4 import BeautifulSoup

page = urllib2.urlopen('http://www.att.com/shop/wireless/devices/smartphones.html').read()
soup = BeautifulSoup(page)
soup.prettify()
for anchor1 in soup.findAll('div', {"class": "listGrid-price"}):
    print anchor1
for anchor2 in soup.findAll('div', {"class": "gridPrice"}):
    print anchor2
for anchor3 in soup.findAll('div', {"class": "gridMultiDevicePrice"}):
    print anchor3 
```

我正在使用它的输出，如下所示：

```
<div class="listGrid-price"> 
                                $99.99 
            </div>
<div class="listGrid-price"> 
                                $0.01 
            </div>
<div class="listGrid-price"> 
                                $0.01 
            </div> 
```

我只想要输出价格而不需要任何 html 标签。请原谅我的无知，因为我是编程新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:25:49.493

您正在打印找到的标签。要仅打印包含的文本，请使用以下`.string`属性：

```
print anchor1.string 
```

该`.string`值是一个[`NavigableString`实例](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#navigablestring)；要像普通的 unicode 对象一样使用它，请先转换它。然后你可以`strip()`用来删除额外的空格：

```
print unicode(anchor1.string).strip() 
```

稍微调整一下以允许空值：

```
for anchor1 in soup.findAll('div', {"class": "listGrid-price"}):
    if anchor1.string:
        print unicode(anchor1.string).strip() 
```

这给了我：

```
$99.99
$0.99
$0.99
$299.99
$199.99
$49.99
$49.99
$99.99
$0.99
$99.99
$0.01
$0.01
$0.01
$0.01
$0.01 
```

# powershell - 如何使用 Powershell 脚本中的多个参数执行 .Bat

> ID：13950044
> 
> 赞同：6
> 
> 时间：2012-12-19T10:16:39.247
> 
> 标签：powershell, parameters, batch-file

如何从 powershell 脚本执行 .bat。

我想做类似的事情：

```
foreach($item in $list){

  param1= $item.Name
  param2= $item.path

  C:\Filesystem_Batches\test.bat param1 param2

} 
```

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-19T10:19:10.680

你可以打电话

```
cmd.exe /C "test.bat param1 param2" 
```

在 powershell V3 中有一个新的 espace 字符串 --% 允许向您的 exe 发送“奇怪”的参数。例子：

```
PS> echoargs.exe --% %USERNAME%,this=$something{weird} 

Arg 0 is <jason,this=$something{weird}> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-04-06T18:40:21.543

我是 Powershell 的新手，但以下内容对我有用。我可以`*.bat`从我的`*.ps1`文件中运行。我正在使用 Powershell 5.1.17134.590。

```
& .\myFile.bat parm1 
```

# c# - 搜索合同 ListView 始终选择列表中的第一项

> ID：13950052
> 
> 赞同：0
> 
> 时间：2012-12-19T10:16:57.030
> 
> 标签：c#, listview, windows-8, windows-store-apps

我的搜索合同使用对象填充 SearchContractResultsPages `resultsList`，但是当我尝试选择一个项目（打开其他页面并将选择作为导航参数传递）时，始终选择第一个项目并作为参数传递。我根本不知道该怎么做才能解决这个问题，或者需要更改哪些代码`resultsListView.SelectedItem`，无论我实际选择什么，它总是打开的项目。选择逻辑在`DoubleTapped`事件上执行。

我不知道要发布什么代码，所以如果有人有任何想法，我会很乐意发布您需要查看的相关部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:57:53.827

在我回答之前有点逃避，但这取决于......

如果您要导航到 SelectedItemChanged 上的另一个页面，则所选项目可能已经是正确的，您可以将其用作导航参数。如果这不起作用，我们将需要查看更多（来）代码。

如果列表视图上有 ItemClick 事件处理程序，则应使用 e.ClickedItem 来获取正确的引用。同样，如果这是您正在做的并且它不起作用，我们将需要查看代码。

啊，我看到您在双击该项目时切换选择。这可能是您的问题的原因。双击选择不是在列表中选择项目的常用方法之一。就像生态系统中几乎所有其他应用程序一样，您可能应该坚持使用“小滑动”进行选择。这不仅可以让您在对其进行任何操作之前验证您所做的选择，而且不会让用户感到困惑，因为他们已经习惯了该范例。

# python - 带有日期轴的箭袋或倒钩

> ID：13950053
> 
> 赞同：5
> 
> 时间：2012-12-19T10:16:57.463
> 
> 标签：python, matplotlib, pandas

绘制箭袋或倒钩的时间序列（日期）的标准方法是什么？我经常在 Pandas DataFrame 中有时间序列，并像这样绘制它们：

```
plt.plot(df.index.to_pydatetime(), df.parameter) 
```

这很好用，x 轴可以被视为真正的日期，这对于格式化或使用 Datetime 对象等设置 xlim() 非常方便。

以相同的方式将其与箭袋或倒钩一起使用会导致：

```
TypeError: float() argument must be a string or a number 
```

这可以通过以下方式克服：

```
ax.barbs(df.index.values.astype('d'), np.ones(size) * 6.5, df.U.values, df.V.values, length=8, pivot='middle')
ax.set_xticklabels(df.index.to_pydatetime()) 
```

哪个有效，但这意味着我必须将日期转换为浮点数，然后手动覆盖标签。有没有更好的办法？

这是一些类似于我的案例的示例代码：

```
import matplotlib.pyplot as plt
import numpy as np
import pandas as pd

size = 10

wspd = np.random.randint(0,40,size=size)
wdir = np.linspace(0,360 * np.pi/180, num=size)
U = -wspd*np.sin(wdir)
V = -wspd*np.cos(wdir)

df = pd.DataFrame(np.vstack([U,V]).T, index=pd.date_range('2012-1-1', periods=size, freq='M'), columns=['U', 'V'])

fig, ax = plt.subplots(1,1, figsize=(15,4))

ax.plot(df.index.values.astype('d'), df.V * 0.1 + 4, color='k')
ax.quiver(df.index.values.astype('d'), np.ones(size) * 3.5, df.U.values, df.V.values, pivot='mid')
ax.barbs(df.index.values.astype('d'), np.ones(size) * 6.5, df.U.values, df.V.values, length=8, pivot='middle')

ax.set_xticklabels(df.index.to_pydatetime()) 
```

![在此处输入图像描述](../Images/5a44ad2630b42145b285004228aec3e1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:17:25.333

我最终使用了以下代码：

```
idx = mpl.dates.date2num(df.index)
ax.xaxis.set_major_formatter(mpl.dates.DateFormatter('%d-%m-%Y'))

ax.plot(idx, df.V * 0.1 + 4, 'o-',color='k')
ax.quiver(idx, np.ones(size) * 3.5, df.U.values, df.V.values, pivot='mid')
ax.barbs(idx, np.ones(size) * 6.5, df.U.values, df.V.values, length=8, pivot='middle') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T18:20:51.050

我建议将您的日期转换为时间戳，然后使用自定义格式化程序 ( [doc](http://matplotlib.org/api/ticker_api.html#matplotlib.ticker.FuncFormatter) ) 将秒数转换为您选择的日期格式。您可能需要稍微使用定位器 ( [doc](http://matplotlib.org/api/ticker_api.html) ) 才能让它看起来不错（就间距/标签拟合而言）。

```
import datetime
def tmp_f(dt,x=None):
    return datetime.datetime.fromtimestamp(dt).isoformat()
mf = matplotlib.ticker.FuncFormatter(tmp_f)

ax = gca()
ax.get_xaxis().set_major_formatter(mf)
draw() 
```

# ruby-on-rails - Showing validation errors next to its field

> ID：13950057
> 
> 赞同：13
> 
> 时间：2012-12-19T10:17:15.870
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

Is there any way to show errors not on top of form page, but next to field, that fired an error?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T10:38:31.373

**initializers/my_custom_error_messages.rb**

```
ActionView::Base.field_error_proc = Proc.new do |html_tag, instance|
  errors = Array(instance.error_message).join(',')
  %(#{html_tag}<span class="validation-error">&nbsp;#{errors}</span>).html_safe
end 
```

**update:**

without label

```
ActionView::Base.field_error_proc = Proc.new do |html_tag, instance|
  errors = Array(instance.error_message).join(',')

  if html_tag =~ /^<label/
    html_tag
  else
    %(#{html_tag}<span class="validation-error">&nbsp;#{errors}</span>).html_safe
  end

end 
```

ref: [rails guide](http://guides.rubyonrails.org/active_record_validations_callbacks.html#customizing-the-error-messages-html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:58:22.293

这曾经是 Rails 的一部分，现在可以在 gem 中使用：

[https://github.com/joelmoss/dynamic_form](https://github.com/joelmoss/dynamic_form)

它允许您轻松显示表单构建器对象的任何特定属性的错误，例如：

```
<%= f.text_field :foo %>
<%= f.error_message_on :foo %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T10:29:39.190

您可以使用 simple_form gem 显示字段的验证错误

```
 <%= simple_form_for @user do |f| %>
       <%= f.input :username %>
       <%= f.input :password %>
       <%= f.button :submit %>
   <% end %> 
```

如果您想在表单顶部显示验证错误，请使用

```
 object.error_messages 
```

表单标签后

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T10:32:13.420

`@model.errors`由于布局顶部 div 中的迭代，错误显示在表单顶部。如果您移动此代码以检查每个字段上的哈希错误，您可以完成您想要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-07T03:39:24.260

```
<td class="error"><%=@user.errors[:firstname].join(",") %></td> 
```

# c# - How to always open the connection using FluentCassandra?

> ID：13950058
> 
> 赞同：1
> 
> 时间：2012-12-19T10:17:15.643
> 
> 标签：c#, nosql, cassandra, fluentcassandra

Hi I'm new in using FluentCassandra. I'm having an error "CassandraOperationException" in adding a million data. It says "No connection could be made because all servers have failed." Please help me on how to solve this problem.

This is my code on adding a million data

```
using (var db = new CassandraContext(keyspace: KeyspaceName, server: Server))
        {
            var x = 0;
            do
            {
                var key = System.Guid.NewGuid().ToString();

                var postFamily = db.GetColumnFamily("Posts");

                // create post
                dynamic post = postFamily.CreateRecord(key);
                post.Title = key;
                post.Author = tbAuthor.Text + x;
                post.Body = rtbBody.Text + x;
                post.PostedOn = DateTime.Now;

                cmbTitle.Items.Add(post.Title);
                //Clear();

                // attach the post to the database
                db.Attach(post);

                // save the changes
                db.SaveChanges();

                x++;
            }
            while (x != 100000);
        } 
```

Thanks in advance!

# algorithm - 检查经度/纬度坐标是否位于嵌入式设备的复杂多边形内？

> ID：13950062
> 
> 赞同：19
> 
> 时间：2012-12-19T10:17:36.577
> 
> 标签：algorithm, math, embedded, geometry, gis

我需要用户能够在地图上绘制复杂的多边形，然后让应用程序检查给定的经度/纬度是否位于该多边形内。

我只能找到使用不补偿地球曲率的简单 x/y 笛卡尔坐标系的算法。

用户在 PC 上绘制多边形，其中点通过无线电传输到嵌入式设备，然后需要检查给定多边形是否位于其当前位置（从 GPS 获取）。

由于这是针对嵌入式设备的，因此我无法使用大型库，而是需要算法自己执行检查或使用非常小的库。但我似乎无法找到任何这样的算法。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-19T11:13:30.823

这是我在 C# 中为包含顶点列表的 Polygon 类编写的实现。它不考虑地球的曲率。相反，您会在运行之前将多边形预处理为更小的段。

该算法的性能非常好。即使对于具有数千条边的多边形，它也可以在我的桌面上大约一两毫秒内完成。

代码已经优化了很多，所以不像伪代码那样可读。

```
public bool Contains(GeoLocation location)
{
    if (!Bounds.Contains(location))
        return false;

    var lastPoint = _vertices[_vertices.Length - 1];
    var isInside = false;
    var x = location.Longitude;
    foreach (var point in _vertices)
    {
        var x1 = lastPoint.Longitude;
        var x2 = point.Longitude;
        var dx = x2 - x1;

        if (Math.Abs(dx) > 180.0)
        {
            // we have, most likely, just jumped the dateline (could do further validation to this effect if needed).  normalise the numbers.
            if (x > 0)
            {
                while (x1 < 0)
                    x1 += 360;
                while (x2 < 0)
                    x2 += 360;
            }
            else
            {
                while (x1 > 0)
                    x1 -= 360;
                while (x2 > 0)
                    x2 -= 360;
            }
            dx = x2 - x1;
        }

        if ((x1 <= x && x2 > x) || (x1 >= x && x2 < x))
        {
            var grad = (point.Latitude - lastPoint.Latitude) / dx;
            var intersectAtLat = lastPoint.Latitude + ((x - x1) * grad);

            if (intersectAtLat > location.Latitude)
                isInside = !isInside;
        }
        lastPoint = point;
    }

    return isInside;
} 
```

基本思想是找到跨越您正在测试的点的“x”位置的多边形的所有边。然后你会发现它们中有多少与在你的点上方延伸的垂直线相交。如果偶数在该点上方交叉，那么您就在多边形之外。如果上面有一个奇数交叉，那么你就在里面。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-21T15:27:23.103

良好的解释和简单的 C 代码，您可以将其转换为您的需要

[http://alienryderflex.com/polygon/](http://alienryderflex.com/polygon/)

如果您有许多不重叠的多边形，请将多边形检查与 RTree 结合起来，以便快速剔除搜索树。

# hibernate - org.hibernate.AssertionFailure: null identifier with OneToMany/ManyToOne Relationship

> ID：13950064
> 
> 赞同：4
> 
> 时间：2012-12-19T10:17:40.167
> 
> 标签：hibernate, hibernate-onetomany

I have a problem with a OneToMany/ManyToOne relationship:

Class Project:

```
@OneToMany(fetch = FetchType.EAGER,cascade = CascadeType.ALL,
orphanRemoval=true )
@JoinColumn(name="PROJECT_ID", nullable=true)
private Set<Person> personlist = new HashSet<Person>(); 
```

Class Person:

```
@ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL)
@JoinColumn(name = "PROJECT_ID") 
private Project project; 
```

Everything works fine as long as there is at least one person connected to a project in the database. If I create a new project and there is no person in the database I get an hibernate exception:

```
org.hibernate.AssertionFailure: null identifier 
```

I already set nullable=true for the project class but this doesnt work. Ideas anyone?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:50:07.190

不确定这是否有助于尝试 @ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL, optional = true)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T19:53:31.820

我整天都在寻找解决这个问题的方法。我有一个解决方案/解决方法。

```
@OneToMany(fetch = FetchType.LAZY,cascade = CascadeType.ALL,
orphanRemoval=true )
@JoinColumn(name="PROJECT_ID", nullable=true)
private Set<Person> personlist = new HashSet<Person>(); 
```

我对食物和配料也有类似的问题。

食物可以在不作为食谱成分的情况下存在。没有食物，成分就无法存在。所以我们在成分和食物之间有一对**零**或多：

配方 1 ------------- 1..* 成分 0..* --------- 1 食物

请原谅上面的垃圾表示。我希望你能明白。

当下面的获取类型是 EAGER 时，我遇到了和你一样的问题。当它设置为懒惰时，我不会。

```
@NotFound(action = NotFoundAction.IGNORE)
@OneToMany(mappedBy = "food", // the VARIABLE NAME of this class in Ingredient
targetEntity = Ingredient.class, // The type that we have many of
fetch = FetchType.LAZY, cascade = CascadeType.ALL)
private Set<Ingredient> ingredients; 
```

这不是一个很好的解决方案，只是一种解决方法。我认为 EAGER 提取应该没有错误地提取，即使没有任何东西可以提取，然后我会有可用的食物，如果它们恰好是食谱中的成分，那么我的对象中就会有这些成分可用，通过这个，他们所在的食谱。如果它们不是成分，只是它们自己的食物，我仍然想要这些食物 - 只是它们没有相关的成分没问题......但如果这是唯一的解决方法，就不能拥有它们

有没有人对此有更好的解决方案？如果你这样做，你可以在这里救我的命:-)

# netbeans - 使用 J2ME 为支持黑莓和诺基亚 Java 的设备进行单一开发

> ID：13950069
> 
> 赞同：2
> 
> 时间：2012-12-19T10:17:57.840
> 
> 标签：netbeans, java-me, lwuit, lwuit-resource-editor, resource-editor

我有 1 年以上的 iOS 开发经验，现在正在寻找支持黑莓和诺基亚 Java 的设备的工作。刚刚开始使用带有 LWUIT 的 Netbeans 7.1 IDE。

### 问题

1.  我可以`ect.res`在两个项目中使用由资源编辑器 ( ) 创建的文件吗？
    如果是 - 那么请提供一些信息。
    如果否 - 那么有什么办法可以解决这个问题，哪一个更好？

2.  我使用资源编辑器 ( `etc.res`) 创建了一个文件，那么如何在我的项目中将此资源文件与 Netbeans 一起使用？因为添加文件项目后显示与未添加相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:29:49.313

是的，您可以在两个应用程序中使用 lwuit 将相同的 res 文件用于两个平台。在 BB 中使用 http 连接时要小心，它们需要一些比 j2me 普通应用程序更多的参数。

要使用代码中的 res 文件，您需要使用`Resource`对象打开 res 要执行此操作：

```
Resources res = Resources.open("path of your res"); 
```

以后你可以使用你资源的很多东西（容器、字体、本地化......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:54:49.790

我认为您可以用于某些项目。当您构建项目时，res 文件会写入保存在 dist 文件中的二进制代码。但是您需要将文件添加到项目中。在我的 lwit 项目中添加了源包或资源下并且正在工作。

```
 Resources defaultTheme = Resources.open(DEFAULT_THEME_NAME); 
```

# javascript - 在不加载页面的情况下，在 javascript 中解析来自服务器的 Json 响应数组

> ID：13950072
> 
> 赞同：0
> 
> 时间：2012-12-19T10:18:02.973
> 
> 标签：javascript, html, json

我正在开发一个网络应用程序。我有一个网页通过表单标签向服务器发送一些数据。服务器返回一个 json 数组。我想知道如何在不加载我的页面的情况下解析该 json 数组。目的是让我的网页保持原样，并将一些值从 json 数组加载到我的表单标签下方的一些文本字段中以供进一步处理。

编辑：我尝试了一些从 json 数组读取的示例，但是如何防止网页重新加载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T10:27:22.990

请为此使用 Ajax。Ajax 调用是根据您的要求使用 Javascript 完成的。如果您使用 JQuery 之类的库，则使用起来非常简单。

链接到 JQuery - 获取：[http ://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

使您免于更改现有代码中的任何内容的想法之一是处理表单的提交。通过 ajax 在提交时发送您的 get/post 并取消表单的提交。

# php - 检查字符串是变量还是只是一个字符串

> ID：13950073
> 
> 赞同：5
> 
> 时间：2012-12-19T10:18:08.710
> 
> 标签：php, variables

我有一个变量叫做`$Title`

变量可能包含一个字符串，

**示例 A：'Foo'**

但变量也可以包含对不同变量的引用，

**示例 B：'$Foo'**

当我使用`print $Title`php 返回 'Foo' (EX A) 或 '$Foo' (EX B) 作为字符串。

当我使用`print $$Title`php 尝试返回名为 $Foo (EX A) 或 $$Foo (EX B) 的变量的值

我想完成以下操作：当`$Title`仅包含一个字符串时，打印该字符串 当`$Title`包含对变量的引用时，查找该变量并显示其内容

我可以只查找字符串中的第一个字符。当它是 $ use `echo $$Title`ELSE use`echo $Title`时，它​​可能`$Title`包含如下内容：

```
$Title = '$Foo . \'Bar\' . $Bar . \'Foo\''; 
```

在这种情况下`$Foo`，and`$Bar`是变量，需要这样操作，'Bar' 和 'Foo' 是字符串，需要这样操作。

我怎样才能使它能够工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T10:26:31.490

字符串始终只是一个字符串。字符串永远不是变量。

案例 1，纯字符串：

```
$foo = 'bar';
echo $foo;  // bar
echo $$foo; // content of $bar if it exists 
```

案例 2，“字符串中的变量”：

```
$foo = 'bar';
$bar = "$foo";  // $bar is now the string 'bar', the variable is interpolated immediately
echo $bar;  // bar
echo $$bar; // bar (content of $bar) 
```

案例 3，一个带有美元的字符串：

```
$foo = '$bar';
echo $foo;  // $bar
echo $$foo; // invalid variable name "$bar" 
```

`$$foo`解析为变量 name `$$bar`，这是一个无效的名称。

你不能有“字符串中的变量”。写入会`"$foo"`立即插入 的值`$foo`并返回一个新字符串。

* * *

只是也许，你想要这个：

```
$foo = 'bar';   // the string "bar"
$baz = '$foo';  // the string "$foo"

// MAGIC

echo $baz;  // echoes "bar" 
```

即，如果您的字符串包含一个美元，后跟一个变量的名称，您希望替换该值。首先我想说这是一个坏主意。然后我会说你必须从你的字符串中提取所有这些“美元字符串”，检查变量是否存在，然后使用正常的字符串操作替换字符串中的值。是的，您可以使用 来做到这一点`eval`，但不，这不是一个好主意。对于上面的代码，这样的事情会做：

```
if ($baz[0] == '$') {
    $varName = substr($baz, 1);
    if (isset($$varName)) {
        $baz = $$varName;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T10:26:15.110

is_string PHP 函数用于检查值是否为字符串[。](http://in2.php.net/manual/en/function.is-string.php)这可以在 if () 语句中使用，以一种方式处理字符串，以另一种方式处理非字符串。它将返回真或假。

```
 <?php 
 if (is_string(23)) 
 {
 echo "Yes";
 } else {
 echo "No";
 }
 ?> 
```

上面的代码应该输出“No”，因为 23 不是字符串。让我们再试一次：

```
 <?php 
 if (is_string("Hello World")) 
 {
 echo "Yes";
 } else {
 echo "No";
 }
 ?> 
```

由于“Hello World”是一个字符串，这将回显“Yes”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T10:23:33.827

使用 if 语句检查 $variable 是否为字符串。

```
if(is_string($var)) { 
   echo $var; 
} else { 
  // What do you want  to achieve here?
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T10:26:57.107

Code like this:

```
$Title = '$Foo . \'Bar\' . $Bar . \'Foo\''; 
```

can't be evaluated when you try to print it, it's evaluated at the moment of assignment. The reason *variable names* are not being replaced by their values in your case are single quotes.

```
$a = 1;
$b = 2;
$var = '$a + $b'; // this is a string
echo $var; // $a + $b
$var = "$a + $b"; // this is also a string, but variables will be processed
echo $var; // 1 + 2 
```

Note, that in second scenario it only processes the variable names, it doesn't run the code ('+' is a string, not an operation).

If you want to keep the `'$a + $b'` as a string within your `$title` *and evaluate it as a PHP code* at the moment, when you print it, you need to use [eval](http://php.net/manual/en/function.eval.php) function. However, I strongly suggest trying to avoid using this function as much as possible.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T10:34:16.690

您可以使用*危险*的eval php 结构。但如果任何字符串来自用户输入，请注意

```

$string = '杯子';
$name = '咖啡';
$str = '这是一个包含我的 $name 的 $string。';
回声 $str。"\n";
eval("\$str = \"$str\";");
回声 $str。"\n";

```

这只是来自（PHP eval 文档）[http://php.net/manual/en/function.eval.php] 的复制和粘贴

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-19T10:34:07.450

据我所知，字符串可能只是字符串或某种变量“引用”。这对你有用还是总是有 $ if 变量引用？

```
$var1='test';
$ref1='var1';

if(isset($$ref1)) {
    // variable exists
}
else {
    // no such variable
} 
```

# objective-c - 如何在 mac os x 中获取支持的视频捕获设备（相机）的像素格式

> ID：13950076
> 
> 赞同：1
> 
> 时间：2012-12-19T10:18:15.563
> 
> 标签：objective-c, macos, osx-lion, avfoundation, objective-c++

刚才我开始了一项与视频捕获相关的小工作，我希望使用 avfoundation 的视频捕获设备支持所有支持的像素格式。我正在使用 CMFormatDescriptionGetMediaSubtype 函数在 mac(CMPixelFormatType) 中获取像素格式。但我总是得到一个与任何可用像素格式都不匹配的值（预定义的像素来自at，如：kCMPixelFormat_422YpCbCr8_yuvs）。是否有任何其他功能用于此目的.. 我搜索但直到现在还没有找到。返回值始终为 1684890161 作为像素格式类型。

我想问的实际问题是：

如何在 Mac 中通过视频捕获设备获得所有支持的像素格式。请记住，我不是要求编解码器类型。我需要它的像素格式。请帮助..如果可能的话。

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:16:09.830

要获取所有支持的像素格式，您需要`CMIOObjectGetPropertyData`使用第二个参数调用`CMIOObjectPropertyAddress`如下：

```
CMIOObjectPropertyAddress theAddress;
theAddress.mSelector = kCMIOStreamPropertyFormatDescriptions;
theAddress.mScope    = kCMIOObjectPropertyScopeGlobal;
theAddress.mElement  = 0; 
```

这会给你一个`CFArray`。`CMFormatDescriptionRef`然后你遍历这个数组并调用：

```
CMFormatDescriptionGetMediaSubType(yourCMFormatDescriptionRef); 
```

您`CMFormatDescriptionGetMediaSubType`转换为 FourCharacterCode (OSType)，`'dmb1'`它似乎是 Matrox 特定的硬件压缩类型。

原因，你不会在`CMPixelFormatType`枚举中找到你的格式是因为那里只有最常见的格式，而你的不是。Mac 上最常见的是`kCMPixelFormat_422YpCbCr8`和`kCMPixelFormat_422YpCbCr10`，它们都是原始的 8 位和 10 位 YUV 视频。

# c++ - 使用结构定义函数

> ID：13950077
> 
> 赞同：0
> 
> 时间：2012-12-19T10:18:16.107
> 
> 标签：c++, function, vector, struct

我是编程新手，尤其是 C++。我有一个任务，它的一部分是使用结构编写一个函数。

```
struct S {
    float m; //how many
    int h; //where
    float mx;
};

int main() {
    S s;
    s.m=0.5;
    s.h=1;

    vector<float> v(10);
    for (int i=0;i<10;i++)
        v[i]=sin(i);
    S mx = max_search(v); 
```

函数没问题，if ( `mx.m>0.98935 && mx.m<0.9894 && mx.h==8`)。

我提出了这个函数代码，但我知道，它有很大缺陷。

```
float max_search(vector<float> v) {
    int max=0;
    for (int i=0; i<v.size(); i++) {
       if (v[i]>max) {
        max=v[i];
       }
    return max;
    }
} 
```

我不知道，我应该如何处理函数的类型，也许返回值也错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:20:01.633

你想要你的`return max;`在最外层。现在它返回 for 循环的每次迭代，这意味着你只得到 1 次迭代。

```
float max_search(vector<float> v) {
    float max=0.0f;    <------------
    for (int i=0; i<v.size(); i++) {
       if (v[i]>max) {
        max=v[i];
       }
    -------------- 
    }
    return max;   <------------
} 
```

我想你想这样称呼它 `s.mx = max_search(v);`

你也可以使用[`std::max_element`](http://en.cppreference.com/w/cpp/algorithm/max_element)

```
s.mx = std::max_element(v.begin(),v.end()); // (begin(v),end(v)) in c++11 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:28:25.880

如果将函数声明为`float`，为什么要返回`int`？

```
float max_search(vector<float> v) {
  float max = v[0]; //this way you avoid an iteration
  for (int i = 1; i < v.size() - 1; i++)
    if (v[i] > max) max = v[i];
  return max;
} 
```

您还可以使用迭代器来执行此操作：

```
float max_search(vector<float> v) {
  float max = .0;
  for (vector<float>::iterator it = v.begin(); it != v.end(); ++it)
    if (*it > max) max = *it;
  return max;
} 
```

在第一个代码块中，将 1 减去很重要，`v.size`否则您将尝试访问不存在的元素。如果您的代码没有返回分段错误，那是因为`std::vector`访问安全。这意味着`std::vector` **尝试**访问该元素，但无论如何，您正在进行最后一次不必要的迭代。这就是为什么最好使用迭代器。

@KarthikT 说的也是真的：你试图`max`在每次迭代中返回，所以，在第一次迭代之后，函数返回值并停止执行，总是检索你的向量的第一个值（如果这个值大于 0） .

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T10:33:09.023

不确定我是否正确地抓住了你的主要问题。你想转换 max_search 函数的返回值是`float to struct S`什么？我将按摩 KarithikT 的答案并添加更多详细信息：

要启用`implicit conversion`（从float到struct S），需要添加转换函数到`S`

```
struct S {
  S():m(0.0), h(0), mx(0.0){ }         //
  S(float x):m(0.0), h(0), mx(x){  }   // to enalbe convert float to S
    float m; //how many
    int h; //where
    float mx;    
};

float max_search(const vector<float>& v) { // pass by const reference
    float max=0.0f;  
    for (int i=0; i<v.size(); i++) {
       if (v[i]>max) {
        max=v[i];
       }
    }
    return max;  
} 
```

您还可以使用 std::max_element 从容器中查找最大元素：

```
vector<float> v(10);
for (int i=0;i<10;i++) {
   v[i]=sin(i);
 }
S mx = *std::max_element(v.begin(), v.end()); 
```

# javascript - 如何控制段落中任何文本的字体粗细（ 标记）在大括号或大括号 { } 中使用 JavaScript

> ID：13950083
> 
> 赞同：7
> 
> 时间：2012-12-19T10:18:28.883
> 
> 标签：javascript, css

如果使用 JavaScript 括在 ap 标记内，我希望能够控制文本的字体粗细。

例如：母牛跳过{月亮}。{} 中的字体粗细会增加。

这样最终用户可以将其键入文本区域并提交将打印到页面以更改大括号或大括号内的字体粗细。

对此的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T10:52:04.497

您可以这样做：

```
var ps = document.getElementsByTagName('p');
    foreach = Array.prototype.forEach;

foreach.call(ps, function (p) {
    var content = p.innerHTML;
    p.innerHTML = content.replace(/\{(.*?)\}|\((.*?)\)/g, function (m) {
        return '<span style="font-weight: bold;">' + m + '</span>';
    });
});
​ 
```

当然还有[小提琴](http://jsfiddle.net/ma47D/1/)。对于示例，您只需要纯 JavaScript，不需要额外的库。

*   编辑：

如果您不想在结果中看到括号，可以使用：

```
var ps = document.getElementsByTagName('p');
    foreach = Array.prototype.forEach;

foreach.call(ps, function (p) {
    var content = p.innerHTML;
    p.innerHTML = content.replace(/\((.*?)\)|\{(.*?)\}/g, function (m) {
        return '<span style="font-weight: bold;">' + m.replace(/[\(\)\{\}]/g, '') + '</span>';
    });
}); 
```

小提琴：http: [//jsfiddle.net/ma47D/4/](http://jsfiddle.net/ma47D/4/)

最好的问候！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:50:31.610

你可以像这样使用 mootools 来做到这一点：

```
window.addEvent('domready', function()
{
    $$('P').each(function(p)
    {
        p.set('html', p.get('text').replace(/{([^\}]*)*}/g,"<b>$1</b>"));
    });
});​ 
```

domready 很重要，因为它必须在页面完全加载后完成。转换为 jquery 不会那么难。

[http://jsfiddle.net/Smw7Q/1/](http://jsfiddle.net/Smw7Q/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T10:35:59.537

在本地，您可以像这样处理它：

```
<!DOCTYPE html>
<html>
    <head>
        <script>
            function transfer(){
                document.getElementById("result").innerHTML=document.getElementById("demo").value.replace(/{/g,'<strong>').replace(/}/g,'</strong>');
            }
        </script>
    </head>
    <body>
        Input: <input type="text" name="input" id="demo"><br>
        <input type="button" value="Submit" onclick="transfer();">
        <p id="result"></p>
    </body>
</html> 
```

如果您将文本提交到服务器，则可以在服务器端类似地完成魔术。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T11:10:37.390

我的建议

```
<!DOCTYPE html>
<html>
    <head>
        <style>
        p span {
            font-size:1.5em;
        }
        </style>
        <script>
        function regex(){
            document.getElementById("output").innerHTML=
                document.getElementById("input").value.replace(/{(.*?)}/g, "<span>$1</span>");
        };
        </script>
    </head>
    <body>
        <p id="output"></p>
        <textarea id="input" rows="30" cols="80"></textarea>
        <input type="button" value="Input" onclick="regex();"/>
    </body>
<html> 
```

当然，在提交之前，您需要清理您的数据。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-19T10:45:48.550

If tried something, but I'm sure there are more elegant solutions.

[http://jsfiddle.net/xT7Fg/](http://jsfiddle.net/xT7Fg/)

```
$(document).ready(function(){
    $(tb).blur(function(){
        var str  = '';
        var nextFont = 0;
        $.each($(tb).val(),function(i,char){
            if(nextFont == 0){
                if(char == '{'){
                    if($(tb).val().indexOf(i,'}')){
                        str += '<font size="15">';
                        nextFont = $(tb).val().indexOf('}', i);
                    } else {
                        str += char;                    
                    }
                } else {
                   str += char;                
                }
            } else if (nextFont === i) {
                str += '</font>';
                 nextFont = 0;               
            } else {
                str += char; 
            }      
        });
        $("#txt").html(str);
    });
}); 
```

# javascript - 如何让我的正则表达式只返回完全匹配

> ID：13950085
> 
> 赞同：2
> 
> 时间：2012-12-19T10:18:35.783
> 
> 标签：javascript, regex

我正在考虑在 javaScript 中构建一个超级简单的路由器......到目前为止我有这个：

```
var match,routeMatcher,p;

var routes = {
    "/users/:uid/pictures/:uid" : "userpictures",
    "/users/:uid" : "user"
};

var url = "/users/1024/pictures/456";

for(var i in routes) {
    //need to cache this regex
    routeMatcher = new RegExp(i.replace(/:[^\s/]+/g, '([\\w-]+)'));
    if(url.match(routeMatcher)) {
        match = url.match(routeMatcher);
        p = routes[i];
        console.log(p);
    }
} 
```

这是一个小提琴[http://jsfiddle.net/D6txe/](http://jsfiddle.net/D6txe/)

这行得通。当我输入像“users/1000”这样的 url 时，我会返回相应的函数名称（现在只需弄清楚如何将字符串作为函数调用）。问题是如果我有两条非常相似的路线，就像我的示例中的正则表达式匹配两者一样。在上面的示例中，理想情况下，我只希望匹配第二条路线，但不幸的是两者都匹配，因为当然第一条路线也是匹配的。

有什么办法可以让正则表达式只返回完全匹配？我有另一个解决方案，它涉及计算输入 url 中的正斜杠，并且只调用具有匹配数量的正斜杠的路由......但这似乎相当不雅。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T10:27:43.810

Try this:

```
routeMatcher = new RegExp(i.replace(/:[^\s/]+/g, '([\\w-]+)') + "$"); 
```

If you also want to support a trailing `/` to also cover `/users/1024/pictures/456/`, you can change your RegExp as follows:

```
routeMatcher = new RegExp(i.replace(/:[^\s/]+/g, '([\\w-]+)') + "/?$"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T11:46:40.637

这是一个缓存正则表达式的变体（注意正则表达式中的`'^'`and `'$'`）：

```
function Router(routes) {
    var route, routeExp, matchers = {};

    for (route in routes) {
        if (routes.hasOwnProperty(route)) {
            routeExp = '^' + route.replace(/:[^\s/]+/g, '([\\w-]+)') + '$';
            matchers[route] = new RegExp(routeExp);
        }
    }

    return function(url) {
        var match;
        for (route in matchers) {
            if (matchers.hasOwnProperty(route)) {
                if (match = url.match(matchers[route])) {
                    return {
                        route: route,
                        name: routes[route],
                        match: match.slice(1)
                    };
                }
            }
        }
    }
} 
```

用法：

```
var router = new Router({
    "/users/:uid/pictures/:uid" : "userpictures",
    "/users/:uid" : "user"
});

var result = router("/users/1024/pictures/456");

console.log(result);
/*
{
    route: "/users/:uid/pictures/:uid",
    name: "userpictures"
    match: ["1024", "456"]
}
*/ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T10:29:44.740

我不完全确定这是否是您需要的。

我使用`^`and`$`使正则表达式与 URL 的路径部分的确切格式匹配：

```
routeMatcher = new RegExp("^" + i.replace(/:[^\s\/]+/g, '([\\w-]+)') + "$"); 
```

如果您正在从路径`window.location.pathname`进行匹配，那么它可能没问题。

# java - 为什么 Files.newByteChannel 不返回 FileChannel？

> ID：13950092
> 
> 赞同：1
> 
> 时间：2012-12-19T10:18:56.293
> 
> 标签：java, nio

`java.nio.file.Files.newByteChannel`返回`SeekableByteChannel`。但是返回的对象的实际类是`sun.nio.ch.FileChannelImpl`（在我的 Java 中），所以我可以将它转换`java.nio.channels.FileChannel`为 FileChannel 并将其用作 FileChannel。有谁知道`Files.newByteChannel`不能退货的原因`FileChannel`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:23:40.323

> 有人知道 Files.newByteChannel 无法返回 FileChannel 的原因吗？

[`FileChannel`](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileChannel.html)（抽象类）实现[`SeekableByteChannel`](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/SeekableByteChannel.html)接口。

一般来说，使用类而不是类总是好的做法，`object reference of interface`因为如果我们更改实现，那么我们不需要在任何地方更改代码。

# php - preg_match（我不能做正则表达式）

> ID：13950097
> 
> 赞同：-1
> 
> 时间：2012-12-19T10:19:15.720
> 
> 标签：php, preg-replace, preg-match

我工作的公司要求我让他们能够在 CMS 的网页上放置一个模式框，但不想键入 HTML。因为我一生都无法理解正则表达式，所以我无法理解。

他们应该输入的代码布局是这样的：

```
++modal++
Some paragraph text.

Another paragraph.
++endmodal++ 
```

这些段落已经通过降价转换为`<p>paragraph</p>`.

所以真的必须`++modal++ any number of A-Za-z0-9any symbol excluding + ++endmodal++`用 HTML 替换匹配。

我不确定它`preg_match`或`preg_replace`应该使用它。

我做到了这一点：

```
$string = '++modal++<p>Hello</p>++endmodal++';
$pattern = '/\+\+modal\+\+/';

preg_match($pattern, $string, $matches); 
```

先感谢您。

编辑：为了更清楚一点，我希望用 HTML 替换 ++modal++ 和 ++endmodal++ 并保持中间位不变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:33:50.683

我真的不认为您在这里需要 RegEx，因为您的分隔符始终保持不变并且始终位于字符串的相同位置。正则表达式在资源上也很昂贵，作为第三个反驳论点，您说您不适合它们。
那么，如果涉及到这一点，为什么不使用简单的替换或字符串修剪。

```
$search = array('++modal++', '++endmodal++');
$replacement = array('<tag>', '</tag>');
$str = '++modal++<p>Hello</p>++endmodal++';

$result = str_replace($search, $replacement, $str); 
```

其中，当然，`'<tag>'`并且`'</tag>'`只是替换的示例占位符。

这是[str_replace()](http://php.net/manual/en/function.str-replace.php)的手册所说的：

```
If you don't need fancy replacing rules (like regular expressions),
you should always use this function instead of preg_replace(). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:24:07.870

我认为您应该使用以下方法获得所需的内容：

```
preg_match('/\+\+modal\+\+([^\+]+)\+\+endmodal\+\+/', $string, $matches)

$matches[1] = '<p>Hello</p> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T10:38:05.697

你正试图在这里重新发明轮子。您正在尝试在这里编写一个简单的模板系统，但是您可以使用数十种 PHP 模板工具，从[Smarty](http://www.smarty.net/)和[Twig](http://twig.sensiolabs.org/)之类的大型复杂模板到您尝试的非常简单的模板工具来写。

我没有全部使用过，所以与其推荐一个，我会向您指出[您可以尝试的模板引擎列表](http://www.webresourcesdepot.com/19-promising-php-template-engines/)。快速搜索一下，您可能会发现更多信息。

如果您确实坚持自己编写，那么考虑安全性很重要。如果您要输出包含用户输入数据的任何内容，则必须确保所有输出都正确转义和清理以显示在网页上；有许多常见的黑客可以利用不安全的模板系统来完全破坏网站。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T10:47:09.077

```
<?php
$string = '++modal++<p>Hello</p>++endmodal++';
$patterns = array();
$patterns[0] = "/\+\+modal\+\+/"; // put '\' just before +
$patterns[1] = "/\+\+endmodal\+\+/";

$replacements = array();

$replacements[1] = '<html>';
$replacements[0] = '</html>';

echo preg_replace($patterns, $replacements, $string);
?> 
```

非常类似于[这个例子](http://php.net/manual/en/function.preg-replace.php#example-4546)

# objective-c - 电子邮件不附加文件

> ID：13950102
> 
> 赞同：0
> 
> 时间：2012-12-19T10:19:25.513
> 
> 标签：objective-c, ios, csv, email-attachments

我正在使用下面的代码`csv`通过电子邮件发送。电子邮件已发送，我在收件箱中收到了，但我没有收到`csv`附加文件，知道出了什么问题吗？

```
-(void)generateCSV
{
NSFileManager *filemgr = [NSFileManager defaultManager];
NSArray *dirPaths;
NSString *docsDir;

dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                               NSUserDomainMask, YES);
docsDir = [dirPaths objectAtIndex:0];

if ([filemgr fileExistsAtPath:[NSString stringWithFormat:@"%@/test.csv", docsDir] ] == NO)
{
    [filemgr createFileAtPath:[NSString stringWithFormat:@"%@/test.csv", docsDir] contents:[@"" dataUsingEncoding: NSUnicodeStringEncoding] attributes: nil];
}

surveyarray = [db retrieveSurvey];

CHCSVWriter * csvWriter = [[CHCSVWriter alloc] initWithCSVFile:[NSString stringWithFormat:@"%@/test.csv", docsDir] atomic:NO];

NSString *str = [NSString stringWithFormat: @"No, CreatedDate, Question1, Question2, Question3, Comment\n"];
[csvWriter writeField:str];

for(int i = 0; i < surveyarray.count; i++)
{
    survey = [surveyarray objectAtIndex:i];
    NSString *str = [NSString stringWithFormat: @"%d, %@, %@, %@, %@, %@\n", i,  survey.createddate, survey.question1, survey.question2, survey.question3, survey.comment];
    [csvWriter writeField:str];
}

NSMutableString *subject = [[NSMutableString alloc] init];
NSMutableString *emailBody = [[NSMutableString alloc] init];

[subject appendString:@""];

MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];

mailer.mailComposeDelegate = self;

[mailer setSubject:subject];

NSArray *toRecipients = [NSArray arrayWithObjects:@"", nil];
[mailer setToRecipients:toRecipients];

NSData *myData = [NSData dataWithContentsOfFile:[NSString stringWithFormat:@"%@/test.csv", docsDir]];
NSLog(@"%@", myData);

[mailer addAttachmentData:myData mimeType:@"text/csv" fileName:@"test.csv"];

[mailer setMessageBody:emailBody isHTML:NO];

mailer.modalPresentationStyle = UIModalPresentationPageSheet;

[self presentModalViewController:mailer animated:YES];

[mailer release];
[subject release];
[emailBody release];

[csvWriter release];
} 
```

我正在生成`csv`文件，然后将电子邮件作为附件发送。

我打开邮箱中的电子邮件，它不包含任何附件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:36:05.347

根据 NSData 类参考，dataWithContentsOfFile: 给出的路径应该是绝对路径。所以你应该使用

```
[NSString stringWithFormat:@"%@/test.csv", docsDir] 
```

而不仅仅是`@"test.csv"`

我敢打赌，目前您的`myData`值为 nil 或为空。

顺便说一句，我只会使用完全限定的路径/文件名创建一个 NSString 对象，然后重复使用它，而不是创建 3 或 4 次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T08:19:54.470

这段代码每次都对我有用！

```
http://developer.apple.com/library/ios/#samplecode/MailComposer/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008865 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T10:28:46.210

根据我[在那里](https://stackoverflow.com/questions/10677004/email-csv-file-with-mfmailcomposer)看到的，我会说你忘了`.csv`在文件名的末尾添加:)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-19T10:34:55.983

尝试替换上面的行

```
[mailer addAttachmentData:myData mimeType:@"text/csv" fileName:@"test.csv"]; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-20T03:39:03.153

finally I solved the problem. The email did attached attachment just the file is empty. This is because the for loop initial with -1 and i change to int i = 0, it works fine now

# jquery - jQuery 在

> ID：13950111
> 
> 赞同：0
> 
> 时间：2012-12-19T10:20:00.577
> 
> 标签：jquery, zclip

我编写了一个简单的脚本，使用 zClip 库[http://www.steamdev.com/zclip/](http://www.steamdev.com/zclip/)将文本复制到剪贴板。

```
<ul>
 <!-- Iterates trough a list of items -->
  <li>

    <script type="text/javascript">
        $(document).ready(function($){
            $('#cpbtn${id}').zclip({
                path:'resources/zclip/ZeroClipboard.swf',
                copy:function(){return $('#cptext${id}').val();}
            });
        });
    </script>

    <input type="hidden" value="userfiles/images/${imageName}" id="cptext${id}"/>
    <a class="btn btn-primary cpbtn" id="cpbtn${id}">Copy URL</a>

  </li>
 <!-- End of iterator -->
</ul> 
```

但它在标签之间不起作用`<ul><li></li></ul>`，如果我删除`<ul><li></li></ul>`，它就起作用了。我把它放在标签之间，因为它遍历一个项目列表，我试图把 zClip 方法放在外面，`<ul><li></li></ul>`但我不知道如何触发`.zclip();`方法。怎么了？我哪里搞砸了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:32:31.277

尝试这个：

```
$('ul li').find('a').each(function() {
    // cache jquery var
    var current = $(this);

    current.zclip({
        path: 'resources/zclip/ZeroClipboard.swf',
        copy: function() {
            return current.prev().val();
        }
    });
});​ 
```

把这个 zClip 方法去掉，`<ul><li></li></ul>`只调用一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:31:58.297

zClip 生成元素的位置存在问题。

我已经放`<a class="btn btn-primary cpbtn" id="cpbtn${id}">Copy URL</a>`了一个`<div style="position: relative;"></div>`，它现在可以工作了。

# c# - 从 .net 代码和 JavaScript 调用 SignalR 集线器

> ID：13950118
> 
> 赞同：4
> 
> 时间：2012-12-19T10:20:21.223
> 
> 标签：c#, jquery, asp.net-mvc, signalr

我有一个 SignalR 集线器，我成功地从 JQuery 调用它。

```
public class UpdateNotification : Hub
{
    public void SendUpdate(DateTime timeStamp, string user, string entity, string message)
    {
        Clients.All.UpdateClients(timeStamp.ToString("yyyy-MM-dd HH:mm:ss"), user, entity, message);       
    }
} 
```

像这样从 JS 成功发送更新消息

```
var updateNotification = $.connection.updateNotification;
$.connection.hub.start({ transport: ['webSockets', 'serverSentEvents', 'longPolling'] }).done(function () { });
updateNotification.server.sendUpdate(timeStamp, user, entity, message); 
```

并像这样成功接收

```
updateNotification.client.UpdateClients = function (timeStamp, user, entity, message) { 
```

我不知道如何从我的控制器中调用 sendUpdate。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T13:01:24.873

从您的控制器，在与集线器相同的应用程序中（而不是从其他地方，作为 .NET 客户端），您可以像这样进行集线器调用：

```
var hubContext = GlobalHost.ConnectionManager.GetHubContext<UpdateNotification>();
hubContext.Clients.All.yourclientfunction(yourargs); 
```

请参阅从[https://github.com/SignalR/SignalR/wiki/Hubs](https://github.com/SignalR/SignalR/wiki/Hubs)脚下的**集线器外部通过集线器进行广播**

调用您的自定义方法有点不同。可能最好创建一个静态方法，然后您可以使用它来调用 hubContext，因为 OP 在这里：[Server to client messages not going through with SignalR in ASP.NET MVC 4](https://stackoverflow.com/q/13648605/1014822)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T10:50:24.647

这是 SignalR[快速入门](https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs)中的一个示例 您需要创建一个**集线器代理**。

```
public class Program
{
    public static void Main(string[] args)
    {
        // Connect to the service
        var hubConnection = new HubConnection("http://localhost/mysite");

        // Create a proxy to the chat service
        var chat = hubConnection.CreateHubProxy("chat");

        // Print the message when it comes in
        chat.On("addMessage", message => Console.WriteLine(message));

        // Start the connection
        hubConnection.Start().Wait();

        string line = null;
        while((line = Console.ReadLine()) != null)
        {
            // Send a message to the server
            chat.Invoke("Send", line).Wait();
        }
    }
} 
```

# c# - SMTP Mail not working

> ID：13950120
> 
> 赞同：0
> 
> 时间：2012-12-19T10:20:22.037
> 
> 标签：c#, asp.net, email, smtp, sendmail

I'm trying to send mail on intranet. I have designed a page where the values will be accepted from textboxes, and passed to the respective fields.

This is my front end code (Please ignore the `<tr>` and `<td>` tags):

```
<td>
    FROM
</td>
<td>
<asp:TextBox ID="txtFrom" runat="server" CssClass="Textbox1" Width="414px"></asp:TextBox>
</td>
<td>
    SENDER MAIL
</td>
<td>
<asp:TextBox ID="txtMailAdd" runat="server" CssClass="Textbox1" Width="414px"></asp:TextBox>
<td>
    SMTP IP
</td>
<td>
<asp:TextBox ID="txtSMTP" runat="server" CssClass="Textbox1" Width="414px"></asp:TextBox>
<td>
   RECEIVER
</td>
<td>
<asp:TextBox ID="txtReceiver" runat="server" CssClass="Textbox1" Width="414px"></asp:TextBox>
<td>
    TO MAIL
</td>
<td>
<asp:TextBox ID="txtTo" runat="server" CssClass="Textbox1" Width="414px"></asp:TextBox> 
```

This is my backend code:

```
protected void btnSMail_Click(object sender, EventArgs e)
{
    string smtpadd = txtSMTP.Text;

    try
    {
        if (smtpadd != "" && smtpadd != null)
        {
            MailMessage mm = new MailMessage();
            SmtpClient sc = new SmtpClient(txtSMTP.Text);

            if (!fupAttach.HasFile)
            {
                FileStream fs = new FileStream("D:\\DEV\\New.xml", FileMode.Open, FileAccess.Read);
                Attachment attch = new Attachment(fs, "License Generation in XML", MediaTypeNames.Application.Octet);
                mm.Attachments.Add(attch);
            }

            //sc.Host = "10.8.4.118";
            sc.Port = 25;
            sc.EnableSsl = false; // runtime encrypt the SMTP communications using SSL

            mm.To.Add(new MailAddress(txtTo.Text, txtReceiver.Text));
            mm.From = new MailAddress(txtMailAdd.Text, txtFrom.Text);
            mm.Subject = txtSub.Text;
            //mm.To= new MailAddress(txtTo.Text);
            mm.Body = txtBody.Text;

            if (fupAttach.HasFile)
            {
                String FileName = fupAttach.PostedFile.FileName;
                Attachment mailAttachment = new Attachment(FileName, MediaTypeNames.Application.Octet);
                mm.Attachments.Add(mailAttachment); 
            }

            lblMailFail.Text = "Mail Successfully Sent";

            sc.Send(mm);
        }

        else
        {
            lblMailFail.Text = "Enter an SMTP IP";
        }
    } 
```

Now when I try to enter the following values in the textbox

```
Sender Mail: xyz@sdc.ba.co.in
SMTP ID: 10.8.4.2
Receiver Mail: xyz@sdc.ba.co.in 
```

I get an error

`System.Net.Mail.SmtpFailedRecipientException: Mailbox unavailable. The server response was: 5.7.1 Unable to relay for xyz@sdc.ba.co.in at System.Net.Mail.SmtpTransport.SendMail(MailAddress sender, MailAddressCollection recipients, String deliveryNotify, SmtpFailedRecipientException& exception) at System.Net.Mail.SmtpClient.Send(MailMessage message) at Lic_Gen.btnSMail_Click(Object sender, EventArgs e)`

Can someone please guide me where am I going wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:22:31.733

这是一个 SMTP 配置问题，与您的 C# 代码无关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T10:22:55.700

邮件服务器不允许您（或您的 IP）向指定的电子邮件地址发送邮件。您可以在[此处](https://www.wormly.com/test_smtp_server)对邮件服务器进行详细测试。

[您可以在Eudora 网站](http://www.eudora.com/techsupport/kb/1593hq.html)上找到有关邮件中继的更多信息（大部分信息适用于所有邮件服务器）

# java - Create a button with given width

> ID：13950121
> 
> 赞同：0
> 
> 时间：2012-12-19T10:20:24.267
> 
> 标签：java, android, button

> **Possible Duplicate:**
> [how to add button dynamically in android?](https://stackoverflow.com/questions/1851633/how-to-add-button-dynamically-in-android)

I need to create a button in android without using xml.I have tried the following code:

```
Button b=new Button(this);
b.setWidth(50); 
```

However, It isn't displaing in runtime.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:56:54.593

```
 Button myButton = new Button(this);
    myButton.setText("Push Me");
    myButton.height = 60;
    myButton.width = 60;
    LinearLayout ll = (LinearLayout)findViewById(R.id.buttonlayout);
    LayoutParams lp = new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
    ll.addView(myButton, lp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:24:05.777

You need to add the view to the layout before it will be shown on the screen.

```
Button b=new Button(this);
b.setWidth(50);
LinearLayout layout = (LinearLayout) findViewById(R.id.linearLayout);

layout.addView(b); 
```

# flex4 - How to group column in spark datagrid

> ID：13950126
> 
> 赞同：1
> 
> 时间：2012-12-19T10:20:43.360
> 
> 标签：flex4, flex-spark

I am using Spark Datagrid in my flex project. I want to add two columns under one header means I want a column grouping into Spark Datagrid. I have found many example regarding mx:datagrid and AdvancedDataGrid but I want in Spark Datagrid.How can achieve this in spark datagrid. Please help me its really important for me.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:23:44.640

您可以使用 labelFunction 将 dataProvider 的两个字段分组为一列。

标签函数示例：

```
public function myLabelFunction(item:Object, column:GridColumn):String {
    return item.field1+ " - " + item.field2; 
} 
```

GriColumn：

```
<s:GridColumn labelFunction="myLabelFunction"/> 
```

# powershell - 从 Jenkins PowerShell 构建步骤中调用的 PowerShell 脚本无限期挂起

> ID：13950128
> 
> 赞同：2
> 
> 时间：2012-12-19T10:20:53.903
> 
> 标签：powershell, jenkins, freeze

我有一个 Jenkins (1.493) 项目，它使用 Jenkins PowerShell 构建步骤来执行 PowerShell 脚本。在该脚本中，我想调用另一个存储在文件中的脚本。我现在已将其简化为以下内容：

Jenkins PowerShell 构建步骤中的脚本：
`& "\\stemmer.local\sidevelopment\cvdev\devbase\jenkins\PowerShell\Test.ps1"`

Test.ps1 的内容：
`write-host 'Hello world!'`

每当执行此 Jenkins 项目时，PowerShell 构建步骤都会无限期挂起。

到目前为止我已经尝试/验证的事情：

*   在调用之前添加一些输出`Test.ps1`向我表明 Jenkins PowerShell 脚本正在正常执行到`Test.ps1`被调用的位置。
*   该文件`Test.ps1`存在并且可以从执行脚本的构建从站访问。如果我更改文件名，我会从 PowerShell 收到预期的错误消息...
*   在第一个脚本中交换“for”不会改变任何东西。此外，使用点源而不是`&`没有帮助。
*   `Test.ps1`可以使用 Jenkins PowerShell 脚本中使用的相同命令行从 powershell 本身正确执行该文件。
*   PowerShell 的执行策略已`unrestricted`在我的开发主机以及 Jenkins 构建从站上设置为。
*   我尝试用如下所示的 Windows 批处理命令构建步骤替换 PowerShell 构建步骤：
    `powershell.exe -InputFormat None -File "\\stemmer.local\sidevelopment\cvdev\devbase\jenkins\PowerShell\Test.ps1"`
    并使用 powershell.exe 的参数进行了一些操作，但结果是 - 在那些语法和其他方面正确的情况下据我所知 - 总是一样的。

我只发现很少提到听起来相似的问题，但其他地方提到的方法都没有帮助我解决这个问题。我非常困惑，想知道以前是否有人遇到过这个问题（甚至可能遇到过我想运行的场景）。

非常感谢您的任何意见！

```
Volker 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:24:52.143

您是否尝试将执行策略设置为绕过？

在本地复制脚本文件，然后从`Jenkins` `PowerShell`插件中调用它 - 这样它就可以按预期工作。

# android - library for rendering svg into css

> ID：13950133
> 
> 赞同：0
> 
> 时间：2012-12-19T10:21:04.313
> 
> 标签：android, css, svg, mobile-safari

Is there any library or easy solution to render SVGs using CSS (CSS3?)

With CSS you can draw things, but it's easier to do that using easy tools like Inkscape to create the svg, then convert it to CSS. Here is an exemple of CSS logo : [Check this link](http://ecsspert.com/play/css3-logos/twitter.php#edit)

The first use of this is rendering high quality graphics even in old browsers which supports CSS but not SVG (Android 2.2, 2.3, ..., iPhone browser, ..) CSS graphics also have accelerated rendering more than SVG.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:57:38.247

没有库可以自动从 SVG 转换为 CSS。

然而，有几个基于 CSS + HTML 的绘图库。他们应该使将徽标转换为 CSS 的任务更容易。此类库的示例有：

*   [jsgraphics](http://www.walterzorn.de/en/jsgraphics/jsgraphics_e.htm)
*   [多纳泰罗](https://github.com/dnewcome/Donatello)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:03:30.703

我试过的一个好方法是[http://raphaeljs.com/](http://raphaeljs.com/)

唯一不好的是文档有点乱 - 但图书馆工作。

# swing - NetBeans 添加 javax.swing 和监听器触发错误

> ID：13950134
> 
> 赞同：2
> 
> 时间：2012-12-19T10:21:03.347
> 
> 标签：swing, class, netbeans, actionlistener, main

你好我知道这个问题在这里无数次，但我没有找到与我相似的案例。我正在用 Java 编写程序，并且在创建我的 swing 主类 GUI (LibraryApp) 时编译时出现错误，我无法理解：

**错误：无法找到或加载主类 libraryApp.LibraryApp Java 结果：1**

我的程序包含单独的 jPanel 类，其中包含带有不同功能事件的 swing 元素，然后我将它们复制到我的主 GUI 类中的 jTabbedPane 中，其中包含主要功能。我再次尝试重新制作我的项目并创建相同的包并在同一位置复制 *.java 文件（我重新创建的主类除外），与我在项目中使用的库相同。

*   我使用的 IDE 是 NetBeans 7.2.1
*   我的项目只包含一个函数 main（在类 LibraryApp 中）
*   我已经在我的类路径中设置了所有 *.jar 文件，还定义了我的主类 (libraryApp.LibraryApp)
*   我删除了缓存并使用了“清理并构建”，但我只能再添加一个事件。
*   我重新安装了 NetBeans，但它仍然没有帮助我解决 main 方法的问题。

我发现的事情是 - 添加一些摆动组件或为摆动组件添加更多事件侦听器并保存文件后，会出现此错误。删除后一切恢复正常。看起来我可以在我的程序中只有一些有限数量的摆动组件或事件侦听器。

我还没有尝试过 Eclipse IDE（我对 Eclipse 的问题是它没有 Swing 调色板......）。我能做些什么来处理这个错误？

**这是我的主要课程：**

```
package libraryApp;

// + import DEFINITIONS

public class LibraryApp extends javax.swing.JFrame {</code>

// + OBJECT DEFINITIONS

// + GLOBAL VARIABLES

    public LibraryApp() {
        initComponents();

    // + init METHODS FOR TABS

    }

    @SuppressWarnings("unchecked")
    private void initComponents() {

    // function content
    }

    // ActionListeners...

    // .. MAIN FUNCTION:

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {

        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(KniznicaApp.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(KniznicaApp.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(KniznicaApp.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(KniznicaApp.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new KniznicaApp().setVisible(true);
            }
        });
    }

    // ...FUNCTIONS WORKING WITH MAIN GUI

    // ...AND VARIABLE DEFINITIONS

} 
```

# flash - fms 上的重复共享对象

> ID：13950138
> 
> 赞同：0
> 
> 时间：2012-12-19T10:21:18.677
> 
> 标签：flash, flash-media-server, shared-objects

我想在服务器上创建一个临时共享对象的副本到另一个永久共享对象。这样做的有效方法是什么？

谢谢你，纳雷什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:24:13.810

我不确定这是不是更有效的方法，但一个好的旧解决方案是使用`for`循环：

```
var names = source.getPropertyNames();
for (var prop:String in names)
{
    var value:Object = source.getProperty(names[prop]);
    destination.setProperty(names[prop], value);
} 
```

# php - 通过 curl 登录显示空白页面

> ID：13950147
> 
> 赞同：-1
> 
> 时间：2012-12-19T10:21:51.190
> 
> 标签：php, curl, login, web-crawler

我通过php制作了一个自定义登录页面。使用`CURL`我爬网并登录，但我被重定向到空白页面而不是主页。我验证了数据库中的日志表，该表显示已登录。但我经常看到一个空白页。请告诉我哪里出错了。这是我第一次尝试 CURL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:26:39.730

Make sure that you are handling cURL errors appropriately, i.e. output them...

```
<?php
    // Create a curl handle to a non-existing location
    $ch = curl_init('http://404.php.net/');
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

    if(curl_exec($ch) === false)
    {
        echo 'Curl error: ' . curl_error($ch);
    }
    else
    {
        echo 'Operation completed without any errors';
    }

    // Close handle
    curl_close($ch);
?> 
```

Also, read the PHP manual has to say on [error handling](http://php.net/manual/en/book.errorfunc.php). A blank page is almost always the result of a script error. With some extra work, you can actually find out what and where the problem is, and then you can fix it.

Typically, in a production environment you would log errors to a log file, but it's okay to echo them to the page for dev purposes. The error log is a massively useful tool as you can even log stuff there that isn't necessarily an error.

# .net - [DllImport] 加载哪个 DLL？

> ID：13950148
> 
> 赞同：6
> 
> 时间：2012-12-19T10:21:52.373
> 
> 标签：.net, usb, dllimport

我正在使用该`[DllImport]`属性将本机 DLL 导入我的应用程序，但它正在加载的 DLL 不在本地 bin 文件夹中。它是从系统上的其他地方加载的，但我不知道在哪里。

它适用于我的开发机器，但不适用于干净的机器。

我启用了 Fusion 日志记录，并且只显示了托管程序集。

我已经使用 Sysinternals Process Explorer 转储了该进程，这告诉我它在其中，`C:\Windows\System32`但我在 Windows Explorer 中看不到该文件。

值得注意的是，我运行的是 64 位 Windows 7，但 DLL 仅支持 x86，所以我不得不强制我的应用程序是 x86。是否有某种重定向会改变 x86 文件的加载位置？

DllImport 是一个定制的 Silicon Labs USB 驱动程序。[DllImport("SiUSBXp.dll")]

我还使用命令提示符`dir si*`在 System32 文件夹中进行了操作，但该文件不存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T10:39:46.627

[文件系统重定向器](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa384187%28v=vs.85%29.aspx)将启动：

> %windir%\System32 目录是为 64 位应用程序保留的。大多数 DLL 文件名在创建 64 位版本的 DLL 时没有更改，因此 32 位版本的 DLL 存储在不同的目录中。WOW64 通过使用文件系统重定向器隐藏了这种差异。
> 
> 在大多数情况下，每当 32 位应用程序尝试访问 %windir%\System32 时，访问都会重定向到 %windir%\SysWOW64。

因此，即使该进程认为它从 加载 DLL `System32`，它也可能从 加载`SysWOW64`是的，这些数字与您期望的不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-03T08:31:18.273

DllImport 背后的实际源代码在这里：

[https://github.com/gbarnett/shared-source-cli-2.0/blob/master/clr/src/vm/dllimport.cpp](https://github.com/gbarnett/shared-source-cli-2.0/blob/master/clr/src/vm/dllimport.cpp)

如您所见，它首先尝试在 .Net 的内部缓存中查找非托管库。

如果失败，但指定了绝对路径，它将使用该路径加载库。

如果未指定绝对路径，它将在以下位置查找：

1) 包含包含 DllImport 的程序集的清单文件的文件夹。

2) Assembly.CodeBase 中指定的文件夹。

3) LoadLibraryExW 看起来的所有地方。

如果一切都失败了，它会尝试将其解释为“文件名，程序集名”。

然后它将库添加到其内部缓存中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T10:28:59.017

您想阅读这个 - [LoadLibrary 函数](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms684175%28v=vs.85%29.aspx)，并且从那里，您还想阅读这个[Dynamic Link Library Search Order](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms682586%28v=vs.85%29.aspx)。

注意 - 这些与本机 Win32 API 相关，但它是由`[DllImport]`属性使用的 API。

该文件可能没有显示在资源管理器中，因为您需要打开显示所有文件 - 许多常见`[DllImport]`指令（例如`kernel32`）针对 Win32 DLL，它们被归类为操作系统文件，因此默认情况下是隐藏的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T10:29:19.340

`DLLImport`通过以下路径搜索：

1.  当前加载的 DLL（如果已经加载，则无需搜索文件）
2.  当前进程的可执行模块目录
3.  当前目录。
4.  “系统”目录。（即 c:\Windows\System32）
5.  “Windows”目录。（即 c:\Windows）
6.  PATH 环境变量中列出的目录。

# java - java.util.Scanner：等待输入

> ID：13950154
> 
> 赞同：1
> 
> 时间：2012-12-19T10:22:11.957
> 
> 标签：java

我用来`java.util.Scanner`从控制台读取命令。

```
try
{
    ICommand cmd = cmdReader.ReadCommand();
    cmd.Execute(conn);
}
catch(MyException ex)
{
    // print a message about unknown command
    continue;
} 
```

其中`ReadCommand`实现如下：

```
try (Scanner scanIn = new Scanner(System.in)) 
{
    if (!scanIn.hasNextLine()) return null;

    line_ = scanIn.nextLine();

    ICommand command = parser_.ParseCommand(line_);
    return command;
} 
```

在第一次迭代代码工作正常，我写了一些无效的东西（不是命令），代码打印一个警告并继续。但是即使我在控制台中写了一些东西，其他迭代也会返回`null`这里。`if (!scanIn.hasNextLine()) return null;`好像`java.util.Scanner`没有看到输入。难道我做错了什么？那么我如何等待用户输入（不想使用循环`sleep`）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T10:23:48.760

您不应该在`Scanner`每次调用时都创建一个新实例`ReadCommand`。创建一个并在读取输入时重用它。

从[文档](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)中：

> 当 Scanner 关闭时，如果源实现了 Closeable 接口，它将关闭其输入源。

因此，`System.in`在您读取第一个输入后，您的流将关闭。

另请参阅[Java Scanner 不等待输入](https://stackoverflow.com/questions/13374826/java-scanner-does-not-wait-for-input)

# apache-flex - Flex spark 为下拉列表组件“佩戴”按钮皮肤

> ID：13950155
> 
> 赞同：0
> 
> 时间：2012-12-19T10:22:18.557
> 
> 标签：apache-flex, custom-component, flex-spark, skin

我有一个自定义下拉列表组件（继承自以前的项目）。我想为这个自定义下拉列表“佩戴”一个按钮皮肤（自定义下拉列表的行为没有改变）。

这可能吗？如果可能的话，我该如何实现这个想法？

最好的问候， HBLE

# mysql - 连接mysql数据库服务器时等待初始通信包错误0

> ID：13950159
> 
> 赞同：1
> 
> 时间：2012-12-19T10:22:31.593
> 
> 标签：mysql, linux, mysql-connector

我在机器上使用`mysql`服务器 5.1.51`linux`

应用程序从过去**32 天**开始运行良好，但昨天开始的客户端数量无法使用应用程序连接到数据库并出现以下错误

```
-2147467259 [MySQL] [ODBC 5.1 Driver] Lost Connection to MySQL server at 'waiting for initial communication packet',system error: 0 
```

请提出可能的原因

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T07:19:25.907

将下面提到的数据库参数添加到 my.ini 中解决了我的问题 skip-name-resolve

```
[mysqld]
port = 3306
socket = /tmp/mysql.sock
skip-locking
skip-name-resolve 
```

此参数在应用程序与 mysql 数据库服务器建立连接期间跳过主机名解析

# java - 如何通过 JMS 做 JMX？

> ID：13950160
> 
> 赞同：2
> 
> 时间：2012-12-19T10:22:41.100
> 
> 标签：java, jms, apache-camel, jmx

我需要增强分布式 Java 应用程序的 JMX 接口。选择 JMX 的原因是暴露数据的简单性。这些分布式应用程序存在于连接到 JMS 服务器 (activemq 5.7) 的几台不同的机器中（该服务器又连接到另一个 JMS 服务器以桥接 2 个网络，也是 activemq 5.7）。

我想做的是能够从 JMS 网络上的任何地方访问各个服务器上的远程 JMX 接口。我需要完整的 JMX 访问权限，就像通过通常的 RMI 接口访问一样。这意味着每一种行动。

我知道我可以使用[lingo](http://lingo.codehaus.org/JMX+over+JMS "行话")使远程 jmx 接口与 JMS 服务器通信，然后我的网桥应该允许我访问它们（假设其配置正确）。

这是一个好方法吗？有没有人为此尝试过术语？还有其他我可能没有找到的选择吗？

计划 B 可能是使用 apache camel RMI 模块，但似乎如果 lingo 是一种选择，它会比这更即插即用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T13:32:57.843

我认为这不是一个坏方法。我能想到的使用 JMS 的一个缺点是[对代理的依赖](http://www.zeromq.org/whitepapers%3abrokerless)，这是大多数 JMS 实现所依赖的。

另一方面，它确实提供了一些有趣的功能，例如发现、异步 JMX 调用和发布/订阅多播样式的 JMX 操作，您可以在其中发出一个操作请求并从所有 MBeanServer 接收响应。

我不知道有任何实际的实现，但实现起来可能并不太难。您只需要在每个目标 JVM 上配置一个客户端即可：

1.  侦听 JMX 请求：侦听器将解组请求（应该是[MBeanServerConnection](http://docs.oracle.com/javase/1.5.0/docs/api/javax/management/MBeanServerConnection.html)方法调用的编码）。对 pub/sub 样式调用使用公共主题，将编组的结果返回到请求消息中[JMSReplyTo](http://docs.oracle.com/javaee/6/api/javax/jms/Message.html#getJMSReplyTo%28%29)属性中指定的目的地。否则，您可以为每个 JVM 分配一个队列，或者为每个 JVM 选择一个唯一标识符并使​​用消息选择器。
2.  如果要实现 JMX 通知，则需要实现一个代理[NotificationListener](http://docs.oracle.com/javase/1.5.0/docs/api/javax/management/NotificationListener.html)，它注册所需的通知并在收到时将它们转发到指定的 JMS 目的地。

您还可以考虑实现一个完整的[javax.management.remote](http://docs.oracle.com/javase/1.5.0/docs/api/javax/management/remote/package-summary.html)实现，它可以通过标准的遵守更顺利地集成到您的环境中。

我发现[OpenDMK](http://opendmk.java.net/)项目对于扩展/实现 JMX 服务器和客户端非常有用。该库提供了使用“自定义”协议实现标准 JMX 远程解决方案的基本构建块。基本上，您实现一个[javax.management.remote.generic.MessageConnection](http://www.jarvana.com/jarvana/view/org/glassfish/embedded/glassfish-embedded-all/3.0-b53/glassfish-embedded-all-3.0-b53.jar!/javax/management/remote/generic/MessageConnection.class?classDetails=ok)作为传输和调用机制。[所有 JMX 调用、响应和回调都被序列化为javax.management.remote.message.Message](http://www.jarvana.com/jarvana/view/org/glassfish/embedded/glassfish-embedded-all/3.0-b53/glassfish-embedded-all-3.0-b53.jar!/javax/management/remote/message/Message.class?classDetails=ok)的实例，并且它们都是可序列化的，因此将它们写入 JMS ObjectMessage 和从 JMS [ObjectMessage](http://docs.oracle.com/javaee/1.4/api/javax/jms/ObjectMessage.html)读取它们应该没有任何问题。

您将从这种方法中获得的一些额外好处是：

1.  如果您正确配置类路径，您应该能够使用任何标准 JMX 工具（例如 JConsole）连接到您的 JVM。
2.  OpenDMK 还提供了联合 MBeanServers 的能力，这使您的所有 MBeanServer 实例都出现，并且可以通过一个中央 MBeanServer 访问。此功能需要标准的 JMX 远程实现。
3.  OpenDMK 还实现了一个有趣的服务发现协议，它有几种不同的风格，包括原始多播和“phone-home”方法，可以很好地与您的 JMS 协议相结合。

如果您有兴趣，我在[此处](https://github.com/nickman/OpenDMK)发布了 OpenDMK 的 mavenised 项目。

我正在使用 netty 为 java-agents 实现一个基本的 JMX 客户端，它可以选择支持异步 JMX 请求。响应通过注册的监听器传递，就像“反向”MBeanServerConnection。如果这有用，请在[此处](https://github.com/nickman/apmrouter/blob/master/apmrouter-agent/src/main/java/org/helios/apmrouter/jmx/mbeanserver/AsynchJMXResponseListener.java)找到源代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T05:10:26.767

Jolokia (http://www.jolokia.org/) 也是一个使用 REST 和 JSON 远程访问 JMX 的好项目。它会自动为您执行此操作。并且还支持批处理操作。我建议看看那个。

如果您使用 JMX 获取 AMQ 统计信息，那么它提供了一个插件，因此您可以只使用 JMS 消息而不是 JMX 来获取统计信息：http: [//activemq.apache.org/statisticsplugin.html](http://activemq.apache.org/statisticsplugin.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:05:11.573

我将使用 JMS 来发现我感兴趣的服务器的 URL，并从那时起使用普通的 JMX。我看不到通过 JMS 发送每个 RMI 调用的优势。

# magento-1.7 - Magento 在贝宝快速结帐中发送空白令牌

> ID：13950162
> 
> 赞同：3
> 
> 时间：2012-12-19T10:22:46.527
> 
> 标签：magento-1.7

我正在使用 magento 1.7.2。我尝试使用 paypal express checkout ，每次我第一次尝试下订单时，它都会显示错误，“PayPal gateway has denied request. Invalid token (#10410: Invalid token).”，当我记录数据时查看它发送空白令牌和空白payerID的参数

```
 2012-12-19T10:06:27+00:00 DEBUG (7): Array
    (
[url] => https://api-3t.sandbox.paypal.com/nvp
[DoExpressCheckoutPayment] => Array
    (
        [TOKEN] => 
        [PAYERID] => 
        [PAYMENTACTION] => Authorization
        [AMT] => 7.14
        [CURRENCYCODE] => USD
        [BUTTONSOURCE] => Varien_Cart_EC_US
        [NOTIFYURL] => http://www.samit.com/hungermunch/chinagardenstore/paypal/ipn/
        [RETURNFMFDETAILS] => 1
        [ITEMAMT] => 6.84
        [TAXAMT] => 0.30
        [SHIPPINGAMT] => 0.00
        [L_NUMBER0] => Fullmenu-001
        [L_NAME0] => Chicken Salad (For 2 Persons)
        [L_QTY0] => 1
        [L_AMT0] => 5.95
        [L_NUMBER1] => tips/gratiuty
        [L_NAME1] => Tips/Gratuity
        [L_QTY1] => 1
        [L_AMT1] => 0.89
        [BUSINESS] => 
        [EMAIL] => rimalsamit@yahoo.com
        [FIRSTNAME] => Samit
        [LASTNAME] => Rimal
        [MIDDLENAME] => 
        [SALUTATION] => 
        [SUFFIX] => 
        [COUNTRYCODE] => US
        [STATE] => CA
        [CITY] => San Jose
        [STREET] => 1 Main St
        [ZIP] => 95131
        [PHONENUM] => 9841669912
        [SHIPTOCOUNTRYCODE] => US
        [SHIPTOSTATE] => CA
        [SHIPTOCITY] => San Jose
        [SHIPTOSTREET] => 1 Main St
        [SHIPTOZIP] => 95131
        [SHIPTOPHONENUM] => 9841669912
        [SHIPTOSTREET2] => 
        [STREET2] => 
        [SHIPTONAME] => Samit Rimal
        [ADDROVERRIDE] => 1
        [METHOD] => DoExpressCheckoutPayment
        [VERSION] => 72.0
        [USER] => ****
        [PWD] => ****
        [SIGNATURE] => ****
    )

[response] => Array
    (
        [TIMESTAMP] => 2012-12-19T10:06:26Z
        [CORRELATIONID] => 949b5ccdc7293
        [ACK] => Failure
        [VERSION] => 72.0
        [BUILD] => 4181146
        [L_ERRORCODE0] => 10410
        [L_SHORTMESSAGE0] => Invalid token
        [L_LONGMESSAGE0] => Invalid token.
        [L_SEVERITYCODE0] => Error
    )

[__pid] => 3828 
```

) 第二次下单时，发现request中有token，是否可以在express checkout开始时手动设置token？或者有什么解决方案？任何帮助将不胜感激。

# wcf - WCF 真的尊重 WS-Addressing Soap Faults 的标准吗

> ID：13950166
> 
> 赞同：1
> 
> 时间：2012-12-19T10:22:56.167
> 
> 标签：wcf, web-services, wcf-binding, soapfault, ws-addressing

我感兴趣的是[Web 服务寻址 1.0 - SOAP 绑定](http://www.w3.org/TR/ws-addr-soap)中指定的[预定义错误](http://www.w3.org/TR/ws-addr-soap/#soapfaults)是否由 WCF 处理。

例如，如果操作不匹配（在 6.4.1.6 wsa:ActionMismatch 标准中指定），它是否会以“wsa:ActionMismatch”SoapFault 响应。或者它是否响应带有 subcode="wsa:MessageAddressingHeaderRequired" 的 SoapFault 来响应任何缺少的 ws-addressing 标头（在标准中指定在 6.4.2 Message Addressing Header Required 中）？

基于这些标准，这样的 SoapFault 应该如下所示：

```
<Fault xmlns="http://www.w3.org/2003/05/soap-envelope">
  <Code>
    <Value>Sender</Value>
    <Subcode>
      <Value>wsa:MessageAddressingHeaderRequired</Value>
    </Subcode>
  </Code>
  <Reason>
    <Text xml:lang="en-US">A required header representing a Message Addressing Property is not present</Text>
  </Reason>
  <Details>
    <wsa:ProblemHeaderQName>wsa:MessageID</wsa:ProblemHeaderQName>
  </Details>
</Fault> 
```

我很好奇需要进行哪些配置才能响应此类 SoapFault 消息。

# php - 从 crontab 运行时 Twitter API 未授权

> ID：13950167
> 
> 赞同：0
> 
> 时间：2012-12-19T10:22:57.887
> 
> 标签：php, curl, twitter-oauth, crontab, lynx

我已经设置了 OAuth，并且我正在使用 CURL 来获取最新的推文，当我从浏览器运行它时，这非常有效

```
http://mydomain.com/getstatus.php 
```

该脚本将状态写入文件：

```
$xTIME = time();
$oauth = array(
  'oauth_consumer_key'     => $consumer_key,
  'oauth_nonce'            => $xTIME,
  'oauth_signature_method' => 'HMAC-SHA1',
  'oauth_token'            => $oauth_access_token,
  'oauth_timestamp'        => $xTIME,
  'oauth_version'          => '1.0'
);

$base_info                = buildBaseString($url, 'GET', $oauth);
$composite_key            = rawurlencode($consumer_secret) . '&' . rawurlencode($oauth_access_token_secret);
$oauth_signature          = base64_encode(hash_hmac('sha1', $base_info, $composite_key, true));
$oauth['oauth_signature'] = $oauth_signature;

$header = array(buildAuthorizationHeader($oauth), 'Expect:');
$options = array(
  CURLOPT_HTTPHEADER     => $header,
  CURLOPT_HEADER         => false,
  CURLOPT_URL            => $url,
  CURLOPT_RETURNTRANSFER => true,
  CURLOPT_SSL_VERIFYPEER => false
);

$feed = curl_init();
curl_setopt_array($feed, $options);
$json = curl_exec($feed);
curl_close($feed);

$twitter_data = json_decode($json); 

if(isset($twitter_data[0]->text))
{
  $fp = fopen('/var/www/mydomain.com/feeds/twitter.feed', 'w');
  fwrite($fp, $twitter_data[0]->text);
  fclose($fp);
} 
```

这很好地写入文件，想法是每小时运行一次。

所以我设置了一个cronjob

```
0 * * * * lynx -accept_all_cookies http://mydomain.com/getstatus.php 
```

但我得到了这个回报：

```
[request] => /1/statuses/user_timeline.json?count=1&screen_name=twitter
[error] => Rate limit exceeded. Clients may not make more than 150 requests per hour. 
```

这表明它没有授权，因此将该请求视为未经身份验证的请求。

我的问题是，为什么不授权？

我尝试将它作为 crontab 运行并通过 lynx 运行，两次都得到相同的结果。

编辑：

这是完整的功能，

```
function buildBaseString($baseURI, $method, $params)
{
    $r = array(); 
    ksort($params);
    foreach($params as $key=>$value){
        $r[] = "$key=" . rawurlencode($value); 
    }
    return $method."&" . rawurlencode($baseURI) . '&' . rawurlencode(implode('&', $r)); 
}

function buildAuthorizationHeader($oauth)
{
    $r = 'Authorization: OAuth '; 
    $values = array(); 
    foreach($oauth as $key=>$value)
        $values[] = "$key=\"" . rawurlencode($value) . "\""; 
    $r .= implode(', ', $values); 
    return $r; 
}

function loadTW($twID)
{
    $url = "https://api.twitter.com/1/statuses/user_timeline.json&count=1&screen_name=" .$twID;

    $oauth_access_token = "68161130-X4HRZje9wB3lpyeOPYDJPsqG1JfJxxxxxxxx";
    $oauth_access_token_secret = "zN98CUldHN4eiVeGahZIvpNeUGljRTxxxxxxxx";
    $consumer_key = "PeVEz2Z0QSKtxxxxxxx";
    $consumer_secret = "An9Xh3qHHTEiTQzW5wKLFMHOrbzwFtwxxxxxxxx";

    $xTIME = time();
    $oauth = array( 'oauth_consumer_key' => $consumer_key,
                    'oauth_nonce' => $xTIME,
                    'oauth_signature_method' => 'HMAC-SHA1',
                    'oauth_token' => $oauth_access_token,
                    'oauth_timestamp' => $xTIME,
                    'oauth_version' => '1.0');  

    $base_info = buildBaseString($url, 'GET', $oauth);

    $composite_key = rawurlencode($consumer_secret) . '&' . rawurlencode($oauth_access_token_secret);

    $oauth_signature = base64_encode(hash_hmac('sha1', $base_info, $composite_key, true));

    $oauth['oauth_signature'] = $oauth_signature;                       

    $header = array(buildAuthorizationHeader($oauth), 'Expect:');
    $options = array( CURLOPT_HTTPHEADER => $header,
                      CURLOPT_HEADER => false,
                      CURLOPT_URL => $url,
                      CURLOPT_RETURNTRANSFER => true,
                      CURLOPT_SSL_VERIFYPEER => false);

    $feed = curl_init();
    curl_setopt_array($feed, $options);
    $json = curl_exec($feed);
    curl_close($feed);

    $twitter_data = json_decode($json); 

    if(isset($twitter_data[0]->text))
    {
        $fp = fopen('/var/www/carlandalexfishing.co.uk/feeds/twitter.feed', 'w');
        fwrite($fp, $twitter_data[0]->text);
        fclose($fp);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:27:07.007

很难知道代码中发生了什么，因为它不是完整的代码。反正 ：

*   您的 OAuth 代码仅对 oauth_* 标头进行签名，而不是任何查询参数。
*   从错误消息来看，您的`$url`变量似乎也包含查询参数。

要解决这个问题，只需将查询参数移动到一个单独的数组中并用它们签署 OAuth 请求。

* * *

出了什么问题的说明（故意省略了 url 编码并添加了空格）：

```
GET & https://api.twitter.com/1/endpoint.json?count=1&screen_name=twitter & oauth_abc=def&oauth_ghi=jkl 
```

URL 的查询部分不应进入 OAuth 基本字符串的第二部分。更好的 ：

```
GET & https://api.twitter.com/1/endpoint.json & count=1&oauth_abc=def&oauth_ghi=jkl&screen_name=twitter 
```

# node.js - 如何在 Mongoose 的虚拟方法中填充参考字段？

> ID：13950171
> 
> 赞同：6
> 
> 时间：2012-12-19T10:23:04.050
> 
> 标签：node.js, mongodb, mongoose

我有以下架构。

```
var ItemSchema = new Schema({
name : String
,location: {
    address: { type: String, default:''}, 
    geolocation: {longitude: Number, latitude:Number}, 
    place : {type: Schema.Types.ObjectId, ref:'Place'} 
},
ranking_in_place : Number }) 
```

Place 是对具有名称、城市、国家等字段的 Place 模式的引用。

我想为ranking_summary 创建一个虚拟：

```
ItemSchema.virtual('ranking_summary').get(function() { 
    if(this.ranking_in_place <= 5){
        if(this.ranking_in_place == 1){
            return "Most popular item" + " in " + this.location.place.name 
        }
    }
}) 
```

我无法获取 this.location.place.name 值，因为 this.location.place 是一个参考，而不是填充。我怎样才能访问这个值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T15:27:47.530

你确定在你的查询中调用*.populate()吗？*否则，Mongoose 将不知道拉入参考对象。例子：

```
ItemModel.findOne().populate('place').exec(function (err, item) {
    console.log(item.ranking_in_place)
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T17:02:30.480

```
Model.find().populate(path, fields, conditions, options); 
```

所以对于你可以使用的选项

```
{ sort: 'order' } // ascending
{ sort: [['order', 1 ]] } // ascending
{ sort: [['order', 'asc' ]] } // ascending
{ sort: [['order', 'desc' ]] } // ascending
{ sort: [['order', -1 ]] } // descending
{ sort: [['order', 'desc' ]] } // descending
{ sort: [['order', 'descending' ]] } // descending 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-08T17:50:10.857

我认为没有直接的方法可以做到这一点。实现此目的的一种方法是遵循钩子。[[阅读更多]](https://github.com/Automattic/mongoose/issues/2138)

这是一个示例代码。我需要计算由视频组成的教程的总时间。因此，我必须填充视频，然后使用它们的持续时间来计算教程的总时间。

```
tutorialSchema.pre('findOne', function (next) {
    this.populate('videos');  // now available as this.ratings in this schema
    next();
});

tutorialSchema.virtual('totalTime').get(function () {
    let times = [];
    times = this.videos.map((v) => {
        return v.duration;
    });
    if(times.length === 0) return 0;
    let totalTime = times.reduce((sum, time) => {
        return sum + time;
    });
    return totalTime;
}); 
```

# silverlight - 如何在我的 Silverlight 网站中使用谷歌分析？

> ID：13950173
> 
> 赞同：0
> 
> 时间：2012-12-19T10:23:07.893
> 
> 标签：silverlight, google-analytics, silverlight-5.0, google-analytics-api

我想跟踪所有事件（例如单击按钮）并跟踪我的 silverlight Web 应用程序中的在线用户数量。你能帮我么。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T21:33:06.990

您应该看看[Microsoft Silverlight Analytics Framework](http://msaf.codeplex.com/)。它支持谷歌分析以及各种其他分析提供商。

# php - Codeigniter 功能控制器 404

> ID：13950174
> 
> 赞同：0
> 
> 时间：2012-12-19T10:23:12.740
> 
> 标签：php, codeigniter

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Go extends CI_Controller {

    public function index()
    {
        //$this->load->view('welcome_message');
        $this->load->helper('url');

        $this->load->view('start_view');
        $this->load->view('header_view');
        $this->load->view('menu_view');
        $this->load->view('top_panel_view');
        $this->load->view('domaci_view');
        $this->load->view('world_view');
        $this->load->view('latest_view');
        $this->load->view('end_view');
    }

    public function contest()
    {
        $this->load->helper('url');

        $this->load->view('start_view');
        $this->load->view('header_view');
        $this->load->view('menu_view');
        $this->load->view('end_view');      
    }

} 
```

当我尝试访问 localhost/site/go/contest 时，我得到一个 404。默认控制器是“Go”。我的一些配置值：

```
$config['index_page'] = ''; 
$config['base_url'] = 'http://localhost/sajt/go'; 
```

我的 .htaccess 文件：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

有什么问题 ？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:35:55.443

尝试使用此代码

在您的 .htaccess 中添加您的文件夹名称

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /site/index.php/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:30:04.963

在 config.php 中：

```
$config['base_url'] = '';
$config['index_page'] = ''; 
```

在 routes.php 中：

```
$route['default_controller'] = 'go/index'; 
```

.ht 访问：

```
#Removes access to the system folder by users.
#Additionally this will allow you to create a System.php controller,
#previously this would not have been possible.
#'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ index.php?/$1 [L]

#When your application folder isn't in the system folder
#This snippet prevents user access to the application folder
#Rename 'application' to your applications folder name.
RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends the
#request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?$1 [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T10:32:01.130

使用此配置

在配置中

```
$config['base_url'] = '';
$config['index_page'] = ''; 
```

.ht 访问：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /site/index.php/$1 [L] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T10:34:11.797

您想更改`base_url`指向 CI 安装的根目录（在您的情况下，`localhost/sajt/`. 此设置用于在使用该`site_url()`功能时构建链接，不应用于定义默认控制器。默认控制器应定义在`config/routes.php`如下：

```
$route['default_controller'] = "go"; 
```

`index()`如果没有指定方法，则自动输入该方法，前提是它存在。

您还想在 .htaccess 文件中*相*对于 index.php 重写，但您有一个`/`指定的绝对路径。如果您在子目录中安装了 CI，这将是一个问题。我建议如下：

```
<IfModule mod_rewrite.c>
        Options +FollowSymLinks
        RewriteEngine on
        RewriteBase /sajt
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule ^(.*)$ index.php?$1 [L]
</IfModule> 
```

在那里，我测试了请求的 URI 是否实际上*不是*文件或目录，这样就不必一一指定它们，并且该`RewriteBase`指令确保正确重写链接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T11:10:17.890

尝试

```
$config['base_url'] = 'http://localhost/sajt';
$config['index_page'] = ''; 
```

并添加

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

到你的`.htaccess`文件

请查看文档

[http://ellislab.com/codeigniter/user-guide/general/urls.html](http://ellislab.com/codeigniter/user-guide/general/urls.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-11T19:11:53.210

1º 点击菜单 wamp>apache>httpd.conf**更改**：

```
#LoadModule rewrite_module modules/mod_rewrite.so 
```

到

```
LoadModule rewrite_module modules/mod_rewrite.so 
```

2º **.htaccess**：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php/$0 [PT,L] 
```

3º 应用程序**/conf/config.php**

```
$config['base_url'] = '';
$config['index_page'] = ''; 
```

4º **URL 区分大小写**

```
localhost/SITE/controller = c:\SITE\controller
localhost/site/controller = c:\site\controller 
```

5º 测试

```
localhost/site/index.php/controller 
```

如果可行，**请访问**：[http ://ellislab.com/codeigniter/user-guide/general/urls.html](http://ellislab.com/codeigniter/user-guide/general/urls.html)

**在config.php**中尝试：

```
$config['uri_protocol'] = “REQUEST_URI” 
```

**替代 .htaccess**：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|css|js|img|images|robots\.txt)
RewriteRule ^(.*)$ index.php/$1 [L] 
```

# reporting-services - 如果只有一个 Reporting Services 参数，如何自动选择

> ID：13950178
> 
> 赞同：1
> 
> 时间：2012-12-19T10:23:28.453
> 
> 标签：reporting-services, ssrs-2008

我正在使用在 Visual Studio 2010 中开发的 SQL Server Reporting Services (SSRS) 来构建我的报告。

如果报告参数下拉列表中只有一个项目，那么我希望自动选择该项目。而不是获取*选择值*，然后必须手动选择该项目（当它是列表中唯一的项目时）。

目前，我通过存储过程设置报告参数的默认值来处理这个问题，该存储过程检查参数列表中项目的行数，如果只有一个，则返回默认值。但这似乎有点矫枉过正。

有没有办法可以在 Reporting Services 中进行设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:36:18.863

看起来我要用存储过程来做这个（我现在做的方式）： [MSDN Answer](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/e2eb17cb-abce-4d9c-aca1-c56d8ad40967)

# java - 挂钩 Java 套接字以监视库代码中的套接字我无法修改

> ID：13950187
> 
> 赞同：1
> 
> 时间：2012-12-19T10:24:01.303
> 
> 标签：java, sockets

我正在使用一个使用套接字与世界通信的 Java 库。我想获得对该套接字的引用，以便可以监视库正在发送和接收的数据。有没有办法挂钩 Java 的套接字系统，以便在我无法修改创建套接字的代码时监视套接字通信？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:42:00.357

看看这个想法：

[找出当前 Java VM 中打开了哪些网络套接字](https://stackoverflow.com/questions/11669554/finding-out-what-network-sockets-are-open-in-the-current-java-vm)

我还没有测试过它，但它看起来很有趣，因为它提供了一种挂钩到 Java 的套接字创建过程的方法。

# javascript - 定义多个 使用 SpServices、jQuery

> ID：13950189
> 
> 赞同：2
> 
> 时间：2012-12-19T10:24:04.907
> 
> 标签：javascript, jquery, sharepoint, spservices

我不确定这是否是在查询中定义两个 orderby 的正确方法，因为我找不到有关此问题的文档。这对我来说也没有按预期工作。

我正在尝试这个：

```
 var query = "<Query><OrderBy><FieldRef Name='Number' Ascending='true' /><FieldRef Name='Number' Ascending='true' /></OrderBy></Query>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:09:47.210

快速搜索将我带到此页面：[OrderBy Element (Query)](http://msdn.microsoft.com/en-us/library/ms467378%28v=office.12%29.aspx)

```
<OrderBy>
  <FieldRef Name="Newcomers"/>
  <FieldRef Name="Years" Ascending="FALSE"/>
  <FieldRef Name="Location"/>
</OrderBy> 
```

我只能说你正在做文档显示的事情。自己在那边闲逛一下 - 我可以肯定地说，您在 SharePoint Services 方面的经验比我多。

编辑：我怀疑这会有所不同，但请尝试像这样定义您的查询：

```
var query = '<Query><OrderBy><FieldRef Name="Number" Ascending="TRUE" /><FieldRef Name="Number" Ascending="TRUE" /></OrderBy></Query>'; 
```

我只是交换了撇号字符串声明以使用双引号，以及`true`to的大小写`TRUE`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:10:00.630

您可以使用 U2U 为您构建所有 CAML。我将它免费用于我的所有 SharePoint 查询构建。

[http://www.u2u.be/res/tools/camlquerybuilder.aspx](http://www.u2u.be/res/tools/camlquerybuilder.aspx)

# windows-runtime - 在 WinRT 中使用 VariableSizedWrapGrid 重新排序 GridView 中的项目

> ID：13950192
> 
> 赞同：3
> 
> 时间：2012-12-19T10:24:17.697
> 
> 标签：windows-runtime, winrt-xaml, windows-store-apps

我想像这样创建[VariableSizedWrapGrid](http://leeontech.wordpress.com/2012/03/01/customizing-gridview-items-in-metro-app-4/)

但是，我也希望这些项目是可拖动的（CanReorderItems 属性），根据[这篇](http://social.msdn.microsoft.com/Forums/en-GB/winappswithcsharp/thread/70626f1d-303b-4605-aeff-fe80337a3769)文章，这是不支持的，因为缺少“某些”接口。我试过了，如果我使用 VariableSizedWrapGrid，重新排序确实会停止工作。

有人能指出我完成这项工作所缺少的接口的正确方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:28:17.657

弗洛雷斯，

您几乎必须自己实现拖动事件。

这是一篇出色的博客文章，详细说明了您需要做什么：

[http://www.renauddumont.be/en/2012/windows-8-csharp-xaml-drag-drop](http://www.renauddumont.be/en/2012/windows-8-csharp-xaml-drag-drop)

但是，博客并没有提到如何很好地完成 DragOver 逻辑。基本上，您必须检查您结束的项目，然后根据方向（向上/向下/向左/向右拖动）您必须调用相应的视觉状态才能获得流畅的动画。

因此，例如，如果拖动的项目位于其下方的项目上方（您可以根据集合中项目的索引进行检查），那么您需要执行以下操作：

```
VisualStateManager.GoToState((Control)containerOfItemBelow, "BottomReorderHint", true); 
```

顺便说一句，如果您使用的是 GroupedDataSource，拖放也会被破坏。我发现我可以通过嵌套 Gridviews 和 Listsviews 轻松绕过整个 GroupedDataSource 概念。

高温高压

# c# - 将“AND”应用于两个列表之间的所有项目

> ID：13950197
> 
> 赞同：-1
> 
> 时间：2012-12-19T10:24:31.587
> 
> 标签：c#, linq

我有两个不同类型的集合：

```
// First Collection
public class ObjectA
{
   public IEnumerable<SomeObject> Persons { get; set; }
   public IEnumerable<SomeOtherObject> Items { get; set; }
}

public class SomeObject
{
   public string ID { get; set; }
}
public class SomeOtherObject
{
   public string ID { get; set; }
}

// Second Collection (ID property holds unique values, PersonID and EntityID do not)
public class ObjectB
{
    public string ID { get; set; }
    public string PersonID { get; set; }
    public string EntityID{ get; set; }
}

// Assuming the following entries...
var list1 = new ObjectA();
var persons = new List<SomeObject>();
persons.Add(new SomeObject() { ID = "A" });
persons.Add(new SomeObject() { ID = "B" });
persons.Add(new SomeObject() { ID = "C" });
list1.Persons = persons;

var items = new List<SomeOtherObject>();
items.Add(new SomeOtherObject() { ID = "1" });
items.Add(new SomeOtherObject() { ID = "2" });
list1.Items = items;

var list2 = new List<ObjectB>();
list2.Add(new ObjectB() { ID = "1", PersonID = "C", EntityID = "1" });
list2.Add(new ObjectB() { ID = "2", PersonID = "A", EntityID = "1" });
list2.Add(new ObjectB() { ID = "3", PersonID = "A", EntityID = "2" });
list2.Add(new ObjectB() { ID = "4", PersonID = "B", EntityID = "1" });
list2.Add(new ObjectB() { ID = "5", PersonID = "B", EntityID = "2" }); 
```

给定这两个列表（list1 和 list2）。如何在 list2 中查找 PersonID = A AND B AND EntityID = 1 AND 2 的项目

换句话说，必须满足所有条件，所以“人 C”不会成功，因为他们只有 EntityID =“1”，而不是“1”和“2”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:42:02.807

你可以使用这样的东西

```
list2.Where(b => list1.Persons.Exists(person => person.ID == b.PersonID) &&
                 list1.Items.TrueForAll(id => list2.Exists(bs => bs.EntityID == id.ID && bs.PersonID == b.PersonID))) 
```

这将给出 list2 中的 4 个项目（如果需要，您可以获取唯一的 Persons）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:59:19.497

如果我没看错问题，这个查询将为您提供包含 list1.Items 中列出的所有 EntityIds 的所有人员 ID（而不是硬编码 1 和 2）

```
var validIds = list1.Items.Select(i => i.ID);
var validPersonIds = list2.GroupBy(p => p.PersonID)
                          .Where(g => validIds.All(i => g.Any(x => x.EntityID == i)))
                          .Select(g => g.Key); 
```

更新：根据您的评论，我认为这就是您所需要的。它从 list2 返回 ID 为 2、3、4 和 5 的对象

```
var validEntityIds = list1.Items.Select(i => i.ID);
var validPersonIds = list1.Persons.Select(i => i.ID);
var validObjects = list2.GroupBy(p => p.PersonID)
                        .Where(g => validPersonIds.Contains(g.Key) &&
                                    validEntityIds.All(i => g.Any(x => x.EntityID == i)))
                        .SelectMany(g => g); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T10:42:08.007

试试这个：这会给你你想要的组合。

```
 var listSelected = (from val2 in list2
                            where val2.PersonID == "A" || val2.PersonID == "B"
                            && val2.EntityID == "1" || val2.EntityID == "2"
                            select val2).ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T10:43:55.313

也许这会产生你想要的：

```
 var result1 = list2.Where(row=> row.EntityID=="1").Select(r=>r.PersonID);
  var result2 = list2.Where(row => row.EntityID == "2").Select(r => r.PersonID);
  var finalResult = result1.Intersect(result2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T10:50:02.197

您可以尝试以下方法：

```
list2.Where(p => p.EntityID == "1" || p.EntityID == "2")
    .GroupBy(p => p.PersonID)
    .Where(grp => grp.Count() == 2); 
```

`list2`这将返回具有指定实体 1 和 2的每个人；所以来自您的示例数据的“A”和“B”。

**编辑：**

根据您对 Azhar 的评论，以下内容更为通用：

```
var entityFilter = new string[]{"1", "2"};

list2.Where(p => entityFilter.Contains(p.EntityID))
    .GroupBy(p => p.PersonID)
    .Where(grp => grp.Count() == entityFilter.Count()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-19T10:56:21.103

```
var query = list2.GroupBy(item => item.PersonID)
                 .Where(g => g.Any(item => item.EntityID == "1") &&
                             g.Any(item => item.EntityID == "2"))
                 .SelectMany(g => g); 
```

返回除第一个以外的所有项目，因为没有 PersonID 等于`C`EntityID 等于 1 和 2 的项目。

# eclipse - 在 Eclipse Helios for Websphere 7 中开发应用程序的 sysdeo 等价物是什么？

> ID：13950203
> 
> 赞同：1
> 
> 时间：2012-12-19T10:25:12.253
> 
> 标签：eclipse, websphere, environment

在 Eclipse Helios for Websphere 7 中开发应用程序的 sysdeo 等价物是什么？

我正在寻找一个允许在 Eclipse 中使用 WebSphere 部署和调试 Java EE 应用程序的插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:58:21.057

您需要[Eclipse IDE for Java EE Developers](http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/junosr1)（不一定是 Juno）版本并安装[WebSphere® Application Server Developer Tools](https://www.ibm.com/developerworks/mydeveloperworks/blogs/wasdev/entry/download_wdt?lang=en)。

另一种选择是使用[Rational Application Developer for WebSphere Software](http://www-142.ibm.com/software/products/us/en/application/)，它是一个基于 Eclipse 的环境，用于开发 WebSphere 应用程序。

# java - 如何将此 glob 转换为带有附加约束的正则表达式（使用 Java 7）？

> ID：13950204
> 
> 赞同：2
> 
> 时间：2012-12-19T10:25:14.000
> 
> 标签：java, regex, glob

我在 Java 7 中使用这个 glob 只成功返回音频文件

```
*.{mp3,mp4,m4p,m4b,m4a,ogg,flac,wma} 
```

但我还需要过滤掉任何以**._ 开头的文件**

似乎没有办法只排除模式，包括 glob 所以我然后切换到正则表达式但没有太多运气，这是我目前的（没有工作尝试）

```
[^\.].*\.{mp3,mp4,m4a,ogg,flac,wma} 
```

请问我可以使用 glob 或正则表达式的解决方案吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:31:06.427

你可以试试这个： -

```
^(?!._).*[.](?:mp3|mp4|m4p|m4b|m4a|ogg|flac|wma)$ 
```

**解释： -**

```
^      // Beginning of the string
(?!._) // Negative look-ahead to confirm that there is no `._` at the starting.

.*      // 0 or more any character

[.]     // A dot (.)

(?:mp3|mp4|m4p|m4b|m4a|ogg|flac|wma)  // Any one extension matched at the end.
$ 
```

请注意，您不需要`dot (.)`在字符类中转义。

`(?:...)`是非*捕获*组。

# apache - 如何使基本身份验证排除重写的 URL

> ID：13950207
> 
> 赞同：13
> 
> 时间：2012-12-19T10:25:26.200
> 
> 标签：apache, .htaccess, authentication, mod-rewrite, .htpasswd

我在开发服务器上有一个基本身份验证设置。它是在我的`httpd.conf`文件中为网站的 VirtualHost 设置的。我不得不将其设置为排除某些目录，这没有造成任何问题并且一切正常。

问题在于排除了通过我在文件`mod_rewrite`中的规则的 URL。`.htaccess`我的设置是让所有 URL 都通过我的`index.php`文件，并从那里找到并运行相关代码。`/businesses/upload_logo`我尝试像其他人一样添加我想要排除的 URL ( )，但它仍然需要身份验证。这是我目前拥有的：

```
...
<Location />
    SetEnvIf Request_URI "/businesses/upload_logo" noauth=1
    SetEnvIf Request_URI "/api/.*" noauth=1

    AuthType Basic
    AuthName "Private"
    AuthUserFile ****
    Require valid-user

    Order deny,allow
    Satisfy any
    Deny from all
    Allow from env=noauth
</Location>
.... 
```

我在[这里](https://stackoverflow.com/questions/8338567/disable-http-auth-for-specific-rewritten-location)和[这里](https://stackoverflow.com/questions/8978080/htaccess-exclude-one-url-from-basic-auth)发现了与我相似的问题，但答案只给了我已经在尝试的内容。

我也想过其他可能的解决方案，但这些将是最后的手段。我想看看我目前的做法是否可行：

*   在我的 php 代码中设置基本身份验证
    *   目前太麻烦了
*   将身份验证放在我的`.htaccess`文件 中
    *   还不想这样做，因为我只希望在 3 台服务器之一上进行身份验证。我知道我可以使用更多`SetEnvIf HOST ...`，但我想看看它是否可以先通过这种方式修复。

`mod_rewrite`规则：

```
...

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*) index.php [L,QSA] 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-23T11:06:58.453

尝试添加

```
Allow from env=REDIRECT_noauth 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-21T15:10:32.000

对我来说，这样的事情就像一个魅力：

```
<location />
        SetEnvIf Request_URI "/businesses/upload_logo" REDIRECT_noauth=1
        AuthType Basic
        AuthName "Restricted Files"
        AuthUserFile /etc/httpd/passwords/passwords
        Order Deny,Allow
        Satisfy any
        Deny from all
        Allow from env=REDIRECT_noauth
        Require user yournickname
</location> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-21T19:00:58.753

根据您提供的内容，它应该可以工作，除非您的配置中的其他地方有冲突的指令。

我做了一个类似的工作设置，只是我使用了文件系统路径而不是 URI

我在这里添加它，希望你会发现它有用

```
<VirtualHost *:8989 >
<IfModule mod_auth_basic.c>
 <Directory /var/www/html/vella-8989>
  # the auth block
  AuthType Basic
  AuthName "Please login."
  AuthUserFile /var/www/html/vella-8989/.htpasswd
  require valid-user

  Order Deny,Allow
  Satisfy any
  Deny from all
  Require valid-user
  Allow from env=noauth
</Directory>
</IfModule>
  # set an environtment variable "noauth" if the request has "/callbacks/"
  SetEnvIf Request_URI "/callbacks/" noauth=1
  ServerName vella.com
  ServerSignature off
</VirtualHost> 
```

# android - Highgui.imread 读取旋转图像

> ID：13950210
> 
> 赞同：3
> 
> 时间：2012-12-19T10:25:33.643
> 
> 标签：android, opencv

我正在使用相机在使用 Android 4.03 和 opencv for android 2.4.3 的手机上捕捉图像

在我的应用程序中，我正在使用 Highgui.imread 从磁盘读取图像

但问题是该功能总是旋转图像与实际保存的图像形成对比！

```
if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {
        if (resultCode == RESULT_OK) {
            Mat img = Highgui.imread(file.getAbsolutePath());
            if(img!=null)
                n.detectDocument(img.getNativeObjAddr()); 
```

在本地

```
jbyteArray JNICALL Java_com_example_superemr_NSuperEMR_detectDocument(JNIEnv *env, jobject object, jlong addr)
{
    Mat* image = (Mat*) addr;
    imwrite("/mnt/sdcard/work/hala.jpg",*image);
    return NULL;
} 
```

如何在正确的位置读取图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-30T22:13:13.407

imread 对 JPG 元数据的解码方式与您使用的图像查看器不同。

手机照片设置了“方向” [EXIF](http://www.impulseadventure.com/photo/exif-orientation.html)。这可以在 Chrome 中看到，在 tinypic 上带有[photo1](http://tinypic.com/view.php?pic=i3uvdf&s=8#.VAJEhWSwI0g)和[photo2](http://oi59.tinypic.com/i3uvdf.jpg)。

不确定如何在 C++ 中正确读取和处理 EXIF 标志，但在 python 中存在类似[问题](https://stackoverflow.com/questions/765396/exif-manipulation-library-for-python)。

还没有尝试过，但您可以考虑使用另一个库读取图像，保存为 png，然后读入 opencv。

PS：看到这是一个旧帖子，但是当我遇到同样的问题时，它出现在我的搜索结果中，所以也许它会对其他人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-08T05:30:54.157

您可以使用 imagemagick 首先自动定位图像。这会将方向元数据更改为 1（或左上角）并更改图像的方向（旋转和镜像，视需要而定）。

检查方向元数据：identify -format '%[exif:orientation]'

自动定向图像：转换 -auto-orient

# silverlight - 客户端中未加载的自引用表实体

> ID：13950211
> 
> 赞同：0
> 
> 时间：2012-12-19T10:25:36.480
> 
> 标签：silverlight, entity-framework, wcf-ria-services

我有一个`Test`带有外键的表。在元数据类中我有

```
[Include]
Test Test2 { get; set; } 
```

在服务类中：

```
 return this.ObjectContext.Test.Include("Test2") 
```

我检查了从数据库中正确加载的数据。但是在客户端，我看到没有加载任何父级。

我使用 a`DomainDataSource`加载数据（Silverlight 4.0）。

其他人经历过这种奇怪的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:00:35.363

好吧，我的错。答案是一如既往地使用**[Include]**属性，但要确保所有参与的属性在您的元数据类中都是**公开的。**

# c - 使用c语言分割字符串

> ID：13950216
> 
> 赞同：0
> 
> 时间：2012-12-19T10:25:58.760
> 
> 标签：c, string, split

我有一个包含以下行的文件：

```
0: 1(ab) 6(a)
1: 3(b) 4(a)
2: 5(a) 3(ab) 
```

我想拆分这些行以获取值，并将它们以某种方式存储在数组或其他东西中。

任何帮助！

`More Explanations`

0、1、2 是石墨的峰值。

对于第一个峰值 0，我们有两个圆弧 1 和 6，圆括号中的值是圆弧的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:46:59.720

正如@Adeel 建议的那样，fscanf 似乎可以正常工作：-

```
#include<stdio.h>

int main()
{
    int peak, arc1, arc2;
    char v1[100], v2[100];
    scanf("%d: %d(%s %d(%s", &peak, &arc1, &v1, &arc2, &v2);
    v1[strlen(v1)-1] = 0; // clear the closing parentheses
    v2[strlen(v2)-1] = 0; // clear the closing parentheses

    printf("%d, %d, %s, %d, %s", peak, arc1, v1, arc2, v2);
} 
```

需要清除，因为字符串被读取 1 太远。如果输入没有任意空格，这将起作用。对于这些情况，可能需要 strtok 等。

测试：-

```
C:\Users\user\Desktop>test.exe
0: 1(ab) 6(a) 
```

输出 ：-

```
0, 1, ab, 6, a 
```

# vb.net - VB.net 应用程序的激活和到期

> ID：13950221
> 
> 赞同：0
> 
> 时间：2012-12-19T10:26:23.100
> 
> 标签：vb.net, licensing

一位客户问我如何将许可证密钥和到期日期添加到应用程序；他想将它们分配给程序，然后生成设置。哪种是最安全和最常用的方法？该程序是用 VS.net 2008 编写的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:03:56.783

我能想到的两个选择

创建一个将到期日期编码到密钥中的许可证密钥，并在应用程序运行时读取：

```
Dim ExpiryDate as Date = LoadLicenseFile 'extracts the hashed expiry date from the file
If ExpiryDate < DateTime.Now then Application.Exit 
```

创建一个 Web 服务来处理激活请求并在应用程序运行时连接到该 Web 服务。

# javascript - 导入/拉入外部 .js 文件（如果尚未通过另一个 .js 文件加载）

> ID：13950223
> 
> 赞同：3
> 
> 时间：2012-12-19T10:26:27.713
> 
> 标签：javascript, jquery, html, joomla, html5-canvas

我正在尝试修改自动生成的 .js 文件以查询是否加载了某个外部文件，如果没有，则加载该文件。

更具体地说，我正在处理由 Tumult Hype 生成的一系列文档。该应用程序生成一系列 .js 文件。但是，有一个未包含的功能允许对生成的嵌入式代码进行完全响应式缩放。

Tumult Hype 有一个解决方案，如其支持知识库中定义的那样，网址为[http://hype.desk.com/customer/portal/articles/259191-responsive-size-for-your-project-resizing-your-document- to-fit-in-a-window-or-element](http://hype.desk.com/customer/portal/articles/259191-responsive-size-for-your-project-resizing-your-document-to-fit-in-a-window-or-element)建议加载 jQuery 并将以下脚本添加到文档的头部：

```
<script type="text/javascript" language="javascript">
var alsoenlarge = true;
$(function(){
  if(isScalePossible()){
    $('body').css({overflow:'hidden'}); //no scroll bars
    $('#scalecontainer').css({position: 'absolute', margin: 0}); //centering by hand after resize

// Run scale function on start
    scaleSite();
    scaleSite();  

    // run scale function on browser resize
    $(window).resize(scaleSite);
  }
});
function scaleSite()
{
  windoww = $(window).width();
  windowh = $(window).height();
  sitew = $('#scalecontainer').width();
  siteh = $('#scalecontainer').height();
  f = windoww/sitew;
  f = windowh/siteh<f?windowh/siteh:f;
  if(!alsoenlarge && f>1) f = 1;
  $('#scalecontainer').css({
    "-moz-transform"    : "scale("+f+")",
    "-webkit-transform" : "scale("+f+")",
    "-ms-transform"     : "scale("+f+")",
    "-o-transform"      : "scale("+f+")",
    "transform"         : "scale("+f+")",
    "left"              : ((windoww-(sitew*f))/2)+"px",
    "top"               : ((windowh-(siteh*f))/2)+"px"
  });
}
function isScalePossible()
{
  can = 'MozTransform' in document.body.style;
  if(!can) can = 'webkitTransform' in document.body.style;
  if(!can) can = 'msTransform' in document.body.style;
  if(!can) can = 'OTransform' in document.body.style;
  if(!can) can = 'transform' in document.body.style;
  if(!can) can = 'Transform' in document.body.style;
  return can;
}
</script> 
```

但是，由于此代码将在 Joomla 环境中使用，并且在站点范围内不需要，而仅在特定页面上需要，所以除非明确需要，否则我不希望调用该脚本。

Hype 生成的代码有几个部分。

有这样的html：

```
<!-- copy these lines to your document: -->
<div id="scaletest_hype_container" style="position:relative;overflow:hidden;width:1024px;height:800px;">
    <script type="text/javascript" charset="utf-8" src="scaletest_Resources/scaletest_hype_generated_script.js?29990"></script>
</div>
<!-- end copy --> 
```

此 html 导入一个特定的 .js 文件，称为`scaletest_hype_generated_script.js`（名称的 scaletest 部分从炒作文档更改为炒作文档）

然后，此文档会加载要由 Web 浏览器呈现的炒作文件所需的所有资源。

该文件的第 25-40 行`scaletest_hype_generated_script.js`是一个查询，用于验证是否加载了另一个名为 .js 的文件`HYPE.js`，如果没有，则加载该文件。代码如下：

```
// load HYPE.js if it hasn't been loaded yet
if(typeof HYPE_108 == "undefined") {
    if(typeof window.HYPE_108_DocumentsToLoad == "undefined") {
        window.HYPE_108_DocumentsToLoad = new Array();
        window.HYPE_108_DocumentsToLoad.push(HYPE_DocumentLoader);

        var headElement = document.getElementsByTagName('head')[0];
        var scriptElement = document.createElement('script');
        scriptElement.type= 'text/javascript';
        scriptElement.src = resourcesFolderName + '/' + 'HYPE.js?hype_version=108';
        headElement.appendChild(scriptElement);
    } else {
        window.HYPE_108_DocumentsToLoad.push(HYPE_DocumentLoader);
    }
    return;
} 
```

我想做的是在上面的代码之后立即向这个文件添加 2 个额外的查询：

1.  测试看是否加载了jQuery，如果没有加载jQuery
2.  测试一下是否加载了本文开头提到的脚本，如果没有加载脚本。

然后，我会将上述脚本另存为外部 .js 文件，并将其相对于站点根目录放置在名为`/hype`. 该文件将被称为`scaleableHype.js`

另外，我想修改`HYPE.js`文件的路径。由于网站上有几十个炒作动画，调用同一个文件的多个副本是多余的。默认情况下，该`HYPE.js`文件位于每个炒作内容的资源文件夹中。

我的目录的当前结构如下：

```
/hype
  |-/resourceFolder1
  |--|--HYPE.js
  |--|--PIE.htc
  |--|--image1.jpg
  |--|--documentName1_hype_generated_script.js
  |-/resourceFolder2
  |--|--HYOE.js
  |--|--PIE.htc
  |--|--pic1.png
  |--|--documentName2_hype_generated_script.js 
```

例如，我想要脚本`documentName1_hype_generated_script.js`并`documentName2_hype_generated_script.js`加载文件的相同（不是多个）副本`HYPE.js`，从而消除重复。

任何意见，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:09:38.013

您可以尝试使用此代码来检测**documentName1_hype_generated_script.js**和**documentName2_hype_generated_script.js**是否已被加载，如果没有，请加载它。

```
<?php
   if(!JFactory::getApplication()->get('HYPE')){
        JFactory::getApplication()->set('HYPE',true);
        $document =& JFactory::getDocument();
        $document->addScript(JURI::root() . "path/to/HYPE.js");
    }

    if(!JFactory::getApplication()->get('jquery')){
        JFactory::getApplication()->set('jquery',true);
        $document =& JFactory::getDocument();
        $document->addScript(JURI::root() . "path/to/jquery.js");
    }

    if(!JFactory::getApplication()->get('hypeScale')){
        JFactory::getApplication()->set('hypeScale',true);
        $document =& JFactory::getDocument();
        $document->addScript(JURI::root() . "path/to/hypeScale.js");
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T03:49:39.140

听起来您想确保在运行脚本之前始终加载 jQuery。如果是这样，请在您担心 jQuery 可能不可用的任何地方的脚本块之前包含此内容：

```
<!-- note that we are specifying a version here, that may or may not meet your need -->
<script>window.jQuery || document.write('<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"><\/script>')</script>
<!-- If you want to provide a version on your own server, you could do this instead -->
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.9.0.min.js"><\/script>')</script> 
```

但是，如果您只想在尚未加载 jQuery 的情况下阻止脚本运行

```
<script type="text/javascript" language="javascript">
if (window.jQuery) {
    var alsoenlarge = true;
    $(function(){
      if(isScalePossible()){
        $('body').css({overflow:'hidden'}); //no scroll bars
        $('#scalecontainer').css({position: 'absolute', margin: 0}); //centering by hand after resize

    // Run scale function on start
        scaleSite();
        scaleSite();  

        // run scale function on browser resize
        $(window).resize(scaleSite);
      }
    });
    function scaleSite()
    {
      windoww = $(window).width();
      windowh = $(window).height();
      sitew = $('#scalecontainer').width();
      siteh = $('#scalecontainer').height();
      f = windoww/sitew;
      f = windowh/siteh<f?windowh/siteh:f;
      if(!alsoenlarge && f>1) f = 1;
      $('#scalecontainer').css({
        "-moz-transform"    : "scale("+f+")",
        "-webkit-transform" : "scale("+f+")",
        "-ms-transform"     : "scale("+f+")",
        "-o-transform"      : "scale("+f+")",
        "transform"         : "scale("+f+")",
        "left"              : ((windoww-(sitew*f))/2)+"px",
        "top"               : ((windowh-(siteh*f))/2)+"px"
      });
    }
    function isScalePossible()
    {
      can = 'MozTransform' in document.body.style;
      if(!can) can = 'webkitTransform' in document.body.style;
      if(!can) can = 'msTransform' in document.body.style;
      if(!can) can = 'OTransform' in document.body.style;
      if(!can) can = 'transform' in document.body.style;
      if(!can) can = 'Transform' in document.body.style;
      return can;
    }

}
</script> 
```

# asp.net-mvc - 使对象在 Amazon S3 中公开可读

> ID：13950226
> 
> 赞同：0
> 
> 时间：2012-12-19T10:26:32.057
> 
> 标签：asp.net-mvc, amazon-s3

我正在使用 Amazon S3 sdk 将文件存储在云服务器上，我正在使用 codeplex 的threesharp（http://threesharp.codeplex.com）来实现这一点，我已经成功地将文件上传到服务器上，现在我必须下载它，并且我必须使用 URL 下载它，例如[https://s3.amazonaws.com/MyBucket/Filename](https://s3.amazonaws.com/MyBucket/Filename)

我可以下载上传的文件，但它显示为空白，如果我上传一个文本文件，然后下载后它没有显示任何内容，与图像和其他文件相同。我已经阅读了 Amazon S3 文档，我必须使对象公开可读（http://docs.amazonwebservices.com/AmazonS3/latest/gsg/OpeningAnObject.html）我不知道如何实现这一点。我怎样才能完成下载功能？Threesharp 项目是基于桌面的，我正在开发基于 Web 的应用程序

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T10:34:13.070

在文件上传期间设置适当的 ACL：

例如。：

```
AmazonS3 client = GetS3Client();
SetACLRequest request = new SetACLRequest();
request.BucketName = "my-new-bucket";
request.Key        = "hello.txt";
request.CannedACL  = S3CannedACL.PublicRead;
client.SetACL(request) 
```

Amazon S3 为您提供了一组丰富的机制来管理对存储桶和对象的访问。

详情请查看：[Amazon S3 存储桶公共访问注意事项](http://aws.amazon.com/articles/5050)

此外，您可以下载适用于 Amazon S3 的 Explorer（例如适用于 Amazon S3[的 CloudBerry Explorer](http://www.cloudberrylab.com/free-amazon-s3-explorer-cloudfront-IAM.aspx)），您可以为您的存储桶分配适当的权限。

**适用于 Amazon S3 的 CloudBerry Explorer：**数据访问功能：

*   **存储桶策略编辑器** 创建和编辑用于管理对存储桶和对象的访问的条件规则。

*   **ACL 编辑器** 通过设置“访问控制列表”来管理对任何对象的访问权限。ACL 还将适用于 S3 存储桶内的所有“子对象”。

此外，您可以使用 Amazon S3 管理控制台执行相同操作。

例如。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:31:27.580

您是否尝试过以下方法：

1.  右键单击对象，然后单击公开
2.  选择对象并在权限部分选中打开/下载？

**编辑：**

你看过这里吗： [How to set the permissions on files at the time of Upload through Amazon s3 API](https://stackoverflow.com/questions/3863477/how-to-set-the-permission-on-files-at-the-time-of-upload-through-amazon-s3-api)

和这里：

[如何在 S3 上设置存储桶的 ACL？](https://stackoverflow.com/questions/1127401/how-to-set-a-buckets-acl-on-s3)

它可能会引导您朝着正确的方向前进

# java - 带有 x 允许不匹配的 Java 匹配字符串。

> ID：13950227
> 
> 赞同：1
> 
> 时间：2012-12-19T10:26:35.593
> 
> 标签：java, string, mismatch

查看一个字符串是否与另一个相同长度的字符串匹配且 X 允许不匹配的最快/最清晰的方法是什么？是否有一个库可以做到这一点，它不在 Apache stringUtils 中（只有一个也使用插入/删除）。

所以可以说我有 2 个长度的字符串，我想知道它们是否与允许的 1 个不匹配匹配。不允许插入和删除。

所以：

ABCD <-> ABCD = 匹配

ABCC <-> ABCD = 匹配 1 个不匹配

ACCC <-> ABCD = 不匹配，2 个不匹配太多了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:34:48.410

尝试将字符串存储在 char 数组中 (char[] charArray = String.toCharArray())。

```
char[] stringA = firsString.toCharArray();
char[] stringB = secondString.toCharArray();
int ctr = 0;   

if(stringA.length == stringB.length){
    for(int i = 0; i<stringA.length; i++){
        if(stringA[i] == stringB[i]){
           ctr++;
        } 
    }
}

//do the if-else here using the ctr 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:30:29.187

```
String str1, str2; 
```

假设字符串的长度相等：

```
int i = 0;

for(char c : str1.toCharArray())
{
   if(c != str2.charAt(i++))
      counter++;
}

if(counter > 1)
  // mismatch 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T10:30:59.363

一次比较字符串一个字符。保留一个计数器来计算不匹配。当计数器超过限制时，返回false。如果到达字符串末尾，返回true

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T10:39:58.720

如果您想要最快的方式，您应该从现有算法（如“近似 Boyer-Moore 字符串匹配”或后缀树方法）对其进行编码......

看这里：[https ://codereview.stackexchange.com/questions/13383/approximate-string-matching-interview-question](https://codereview.stackexchange.com/questions/13383/approximate-string-matching-interview-question)

他们做数学，你做代码......

其他有趣的 SO 帖子是：

[获取最接近的字符串匹配](https://stackoverflow.com/questions/5859561/getting-the-closest-string-match)

[java.util.regex.Pattern 可以进行部分匹配吗？](https://stackoverflow.com/questions/2526756/can-java-util-regex-pattern-do-partial-matches)

[生成给定字符串的所有排列](https://stackoverflow.com/questions/4240080/generating-all-permutations-of-a-given-string)

[相似度得分 - Levenshtein](https://stackoverflow.com/questions/6087281/similarity-score-levenshtein)

# wpf - 尝试将验证传递给我的自定义工具提示控件

> ID：13950228
> 
> 赞同：2
> 
> 时间：2012-12-19T10:26:36.513
> 
> 标签：wpf, wpf-controls, tooltip

我正在尝试制作一个用于 TextBoxes 的自定义工具提示控件。

它看起来像这样：

![在此处输入图像描述](../Images/f1b668d5c75433c3bcca3b33e792882f.png)

...除了来自背景组件的一些像素，我已经尽可能好地去除了这些像素。

思路来自： [How to implement Balloon message in a WPF application](https://stackoverflow.com/questions/2310102/how-to-implement-balloon-message-in-a-wpf-application)

问题是我的自定义控件背后的代码永远不会获得验证对象（应该通过 generic.xaml 中的触发器传递给它）。

为什么不？

通用的.xaml：

```
 <Style TargetType="{x:Type TextBox}" x:Name="tb">
        <Setter Property="Width" Value="200" />
        <Setter Property="Background" Value="{StaticResource InputBackgroundColor}" />
        <Setter Property="BorderBrush" Value="{StaticResource InputBorderBrush}" />
        <Setter Property="HorizontalAlignment" Value="Left" />
        <Setter Property="Margin" Value="5,0,0,5" />
    <Style.Triggers>
      <Trigger Property="Validation.HasError" Value="true">
        <Setter Property="ToolTip">
          <Setter.Value>
            <Windows:ValidationBalloonPopupWindow
              Validation="{Binding Path=Validation, ElementName=tb}" />
          </Setter.Value>
        </Setter>
      </Trigger>
    </Style.Triggers>
  </Style> 
```

如您所见，我尝试使用 tb 的 ElementName 来引用 Validation。似乎 Name 没有在模板中使用。如果我改为 x:Key，我所有的文本框都会变成 10 像素宽。换句话说，可能不是正确的做法。

ValidationBalloonPopupWindow.xaml.cs 背后的代码：

```
using System.Windows;
using System.Windows.Controls;

namespace Foo.ToolTips
{
    public partial class ValidationBalloonPopupWindow : ToolTip
    {
        public ValidationBalloonPopupWindow()
        {
            InitializeComponent();
        }    

        public static DependencyProperty ValidationProperty
            = DependencyProperty.Register("Validation", typeof(object), typeof(ValidationBalloonPopupWindow),
                new PropertyMetadata(null, OnChangedValidationByBinding));

        private static void OnChangedValidationByBinding
            (DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            ((ValidationBalloonPopupWindow)d).OnChangedValidationByBinding(e.NewValue);
        }
        public void OnChangedValidationByBinding(object newValue)
        {
            txtMessage.Text = newValue.GetType().Name;
        }

        private object _validation;
        public object Validation
        {
            get
            {
                return _validation;
            }
            set
            {
                _validation = value;
                txtMessage.Text = _validation.GetType().Name;
            }
        }
    }
} 
```

其中有一个应该运行的设置器，我试图在这个文件中放置很多断点但没有成功。

控件本身的 xaml，ValidationBalloonPopupWindow.xaml：

```
<ToolTip x:Class="FRAM.Windows.ValidationBalloonPopupWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Background="Transparent" BorderBrush="Transparent" HasDropShadow="false"
    Placement="Bottom"
    Height="Auto" Width="Auto">
  <Grid Height="126" Width="453">
    <Border Margin="7,13,0,0"
          CornerRadius="10,10,10,10" Grid.ColumnSpan="4" HorizontalAlignment="Left" Width="429" Height="82" VerticalAlignment="Top" Grid.RowSpan="2">
      <Border.Effect>
        <DropShadowEffect Color="#FF474747" />
      </Border.Effect>
      <Border.Background>
        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
          <GradientStop Color="#FF58C2FF" Offset="0" />
          <GradientStop Color="#FFFFFFFF" Offset="1" />
        </LinearGradientBrush>
      </Border.Background>
      <StackPanel Orientation="Vertical">
        <Label Content="Title" Height="31" HorizontalAlignment="Left"
          Margin="12,8,0,0" Name="lblCaption" FontSize="16" FontWeight="Bold" />
        <TextBlock Margin="18,0,0,0" Name="txtMessage" Width="378" HorizontalAlignment="Left">Body</TextBlock>
      </StackPanel>
    </Border>
    <Path Data="M25,25L10.9919,0.64 0.7,25" Fill="#FF58C2FF" HorizontalAlignment="Left"
      Margin="32,3,0,0" Stretch="Fill" Width="22" Height="10" VerticalAlignment="Top" />
  </Grid>
</ToolTip> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:41:22.577

`RelativeSource`通过使用绑定来获取文本框本身，而不是通过名称引用。
尝试这样的事情：

```
<Setter Property="ToolTip">
    <Setter.Value>
       <Windows:ValidationBalloonPopupWindow
           Validation="{Binding RelativeSource={RelativeSource Self}, Path=Validation}" />
    </Setter.Value>
</Setter> 
```

# javascript - Facebook API Website - JavaScript SDK - Confused

> ID：13950231
> 
> 赞同：2
> 
> 时间：2012-12-19T10:26:52.773
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

I've been looking around Facebook's guides about logging into my website with their API. For now I've looked into the JS SDK. I am a PHP programmer but thought the JS SDK would be easier... at least I thought so. I am really confused by, everything really. Here is some simple questions:

1.  If I "just" wan't to use the API for logging into my site, and nothing else, would I then be using PHP or JS?
2.  Now - if using JS - how do I interact with Facebook properly? Right now it's logging into facebook and login out of facebook. What I wan't is to just grant access to my app (like normal) and logout of app.
3.  If still using JS - how do I make if sentences determining if a user is logged in? I mean, if a user is logged in I wan't to show some user informations, and the possibility to edit settings.

All in all I think I've maybe misunderstood the function of JS SDK or what? I am really confused, and I really need some help with getting onto the road again.

*** NEW ***

So, everytime that I wanna show something to a logged in user I have to use the FB.getLoginStatus();?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T10:45:38.170

**Q- If I "just" wan't to use the API for logging into my site, and nothing else, would I then be using PHP or JS?**

A- You can use both. See- [Login](https://developers.facebook.com/docs/concepts/login/)

**Q- how do I interact with Facebook properly?**

A- Once the user authorizes the app, you can use any methods through API call (using your facebook object). Go through this- [JS SDK Reference](https://developers.facebook.com/docs/reference/javascript)

**Q- how do I make if sentences determining if a user is logged in?**

A- You can use [FB.getLoginStatus](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:51:52.320

我最近编写了这段代码来向一位朋友解释 Facebook 登录功能。每行代码都有详细的注释。我不确定这是否是最好的方法。但这很容易理解。

```
<?php
//include Facebook library File
include_once "src/facebook.php";
//Application Configurations
//Declare variables app_id,app_secret, we get app_id,app_secret values from app dashboard. 
$app_id     = "xxxxxxxxxxxxxxxxxx";
$app_secret = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx";

// Create our application instance
//we create $facebook instance and would use it to access various Facebook library functions
$facebook = new Facebook(array(
    'appId'     => $app_id,
    'secret'    => $app_secret,
    ));

?>
<html>
<head>
</head>
<body>
<?php
// Get User ID
$user = $facebook->getUser();
//  $facebook->getUser() is a function which would return a user id if someone is
//  logged in  on Facebook currently (In some other window or tab)
// We may or may not have this data based 
// on whether the user is logged in.
// If we have a $user id here, it means we know 
// the user is logged into Facebook,
// but we don’t know if the user has authorized our application.
// i.e whether user has already given our app permissions to access his data or not
if ($user) {
 /*
 * Facebook user retrieved
 * $user : Holds the Facebook Users unique ID
 * */
 try {
        // We try to get users data assuming he has authoized are app if we dont get data we display login button in catch block.
        $userinfo = $facebook->api('/me');
        echo "<br/>User id : ".$userinfo['id'];
        echo "<br/>Name : ".$userinfo['name'];
        echo "<br/>Gender : ".$userinfo['gender'];
        echo "<br/>Email : ".$userinfo['email'];
        echo "<br/>Location : ".$userinfo['location']['name'];
        echo "<br/>Image : <img src='https://graph.facebook.com/".$userinfo['id']."/picture' >";
        echo "<br/><br/><br/>Similarly we can get lot more information about user like work experience, dob etc more details would be shared later /We use this data to prefill registration form for user. ";
        echo "<br/><br/>Below is dump of entire array which shows all available data it carries<br/><br/>";
            echo '<pre>';
            var_dump($userinfo); 
            echo '</pre>';
        //Similarly we can get lot more information about user like work experience, dob etc more details would be shared later
        //We use this data to prefill registration form for user.

    } catch (FacebookApiException $e) {
         // Display Facebook login button - Requires Facebook JavaScript SDK (Below)
         echo '<fb:login-button show-faces="true" width="200" scope="email,user_photos"></fb:login-button>'."\n";
         $user = NULL;
     }
} else {
 // No user logged in currently Display Facebook login button - Requires Facebook JavaScript SDK (Below)
 echo '<fb:login-button show-faces="false" width="200" scope="email,user_photos"></fb:login-button>'."\n";
}
?>
<!--Below code is required to use FAcebook Javascript SDK/Library, Before this we have been using Facbeook PHP-SDK/Library --> 
<div id="fb-root"></div> <!-- A div element with id "fb-root" is required. Facebook JS SDK will auto create this element if it doesn't exist , But we will anyways create it-->
<script>
// window.fbAsyncInit will execute code within it asynchronously i.e without affecting the load time.
window.fbAsyncInit = function () {
//Below code Initializes Javacript SDK, appid is same as one defined in fbaccess.php
 FB.init({
 appId : '<?=$app_id?>',
 cookie : true,
 xfbml : true,
 oauth : true
 });

//Below code tells the script to refresh whenever user logins or logouts. 
 FB.Event.subscribe('auth.login', function (response) { window.location.reload(); });
 FB.Event.subscribe('auth.logout', function (response) { window.location.reload(); });
};

// Copy paste code to load the Facebook JavaScript SDK into the page
(function(){var e=document.createElement('script');e.async=true;e.src=document.location.protocol+'//connect.facebook.net/en_US/all.js';document.getElementById('fb-root').appendChild(e);}());
</script>
</body>
</html> 
```

在 Javascript 中，您可以调用这样的函数：

```
function login(){
    FB.getLoginStatus(function(response) {
        if (response.authResponse) {                                    
                alert(response.authResponse.userID);
                //Authenticated user.
        } else {
        // Unauthenticated user display authentication popup
        FB.login(function(response) {
            if (response.authResponse) { 
                    alert(response.authResponse.userID);
                    //User authenticated.
                } 
            else{                                           
                    alert("Please allow authentication to proceed!!");
                }
            }, {scope:'email'});
        }
    });
} 
```

# ios - iOS - Problems with memory and retain/release

> ID：13950233
> 
> 赞同：1
> 
> 时间：2012-12-19T10:26:54.383
> 
> 标签：ios, memory, memory-management, instruments

I had developed an app and now I'm using Instruments to see the memory usage. I have a problem understanding the retain/release process of my object. This is what Instruments says:

[![](../Images/f52eba27e214c5026e1f498f7fe0b7ac.png)](https://i.stack.imgur.com/v4U9l.png)

The retain count increase when I add my object into an array, when I add it on my view and when I take off from the array. So, when I use `removeFromSuperview` the object `retainCount` will never be zero, so the object don't release the memory.

EDIT 1: I forgot to say i'm using ARC.

EDIT 2: I describe exactly what happen : I create the object together other objects in a class called `NKLevelGenerator`. Into it i alloc the `NKIngredient`s and then i add all to a `NSArray` which will be returned. Here the retain count of every object is 2\. In my `NKLevelVC`, my `ViewController`, i use this instruction :

```
[level addObjectsFromArray:[levelGenerator level1WithDelegate:self ciotola:ciotola bagliore:bagliore difficulty:NKDifficultyHard]]; 
```

Object `level` is a `NSMutableArray` that i `alloc` and `init` in `viewDidLoad`. From here i call another method which performs this operations :

```
- (void)insertInArrayRandomly {
    for (int i=0; i<[level count]; i++) {
        [ingredienti insertObject:[level objectAtIndex:[[indexes objectAtIndex:i]integerValue]] atIndex:i];
    }
} 
```

Object `ingredienti` is another `NSMutableArray` that I `alloc` and `init` in `viewDidLoad`. `indexes` is an array of `NSInteger` which contains random indexes to extract `NKIngredient` object randomly. Then i'm doing this :

```
NKIngredient *ing = [ingredienti objectAtIndex:index];
[[self view] insertSubview:ing belowSubview:navBar];
[ing animateIngredient];
[ingredienti removeObject:ing]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:36:40.343

在查看 Instruments 之前，您是否尝试过代码的静态分析？它可能有助于解决简单的内存问题。

但首先要检查的是：您是否遵循**黄金法则**？

黄金法则是：对于每个`alloc`，`copy`或者`retain`你必须使用一个，并且只有一个，`release`或者`autorelease`。

这是没有 ARC 的内存管理最重要的规则。因此，您的对象被数组保留的事实与您无关，只需记住您保留、分配或复制的内容并释放它即可。

PS：下次，您的代码将比 Instruments 屏幕截图更有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:34:48.447

首先：使用工具来查看是否有效地存在内存泄漏，为此目的制作了一个工具，它会告诉您泄漏内存的位置。第二：这取决于视图上有多少对象[保留]。如果你添加到一个数组，它会保留视图，但是如果你没有在创建视图的方法中释放它，当你从数组中释放视图时，计数仍然是 1。

# linux - My array is showing empty after I insert huge data into it in perl

> ID：13950240
> 
> 赞同：2
> 
> 时间：2012-12-19T10:27:07.963
> 
> 标签：linux, perl

```
#!/usr/bin/perl -w
################################################################################
##Get_Duration.pl
#
#   This is a perl script which is used to parse the audio files
#   present in the device and build's the xml containing all the 
#   track i.e both audio and video files duration
#
#   The xml file is created in the name of ParsedMetadataInformation.xml
#   in <ATAF Path>/tmp/ directory.
#
#
#   CHANGE HISTORY
#   --------------------------------------------------------------------------

use strict;
use warnings;
use Env;
use File::Find;
use XML::TreePP;
use Data::Dumper;

my $data;

if (not defined $ATAF){
print "=====================================================\n";
print "ERROR: ATAF Path is not set.\n";
print "(Example: export ATAF=/home/roopa/ATAF)\n";
print "=====================================================\n";
exit 1;
}

print "Enter the Absolute path for the device to be scanned\n";
print "(Example: /media/RACE_1.6A)\n";
$DB::single=1;
my @metadataInfo = ();
print "Enter Path:";
my $configDir = <STDIN>;
chomp $configDir;

my @configFiles;
find( sub {push @configFiles, "$File::Find::name$/" if (/\.mp3|\.wma|\.wav|\.ogg|       \.flac|    \.m4a|\.mp4|\.avi|\.mpg|\.mpeg|\.mov|\.wmv|\.m4b$/i)}, $configDir);
chomp @configFiles;

if (!@configFiles){
print "=====================================================\n";
print "ERROR: No Files Found!!!\n";
print "=====================================================\n";
exit -1;
}

my $tpp = XML::TreePP->new();
my $metadataHashTree1 = ();

print "=====================================================\n";
print "Extracting the Metadata Information\n";
print "=====================================================\n";
foreach my $file (@configFiles){
   print "Currently in: $file\n";
   (my $fileName = $file) =~ s/^.*\///g;
   $file =~ s/([\!\$\^\*\&\(\)\|\}\{\[\]\:\"\;\'\?\>\<\,\=\`\s])/\\$1/g; 
   @metadataInfo = (`ffmpeg -i $fileName`);

   my $size= scalar (@metadataInfo);
   #chomp @metadataInfo;
   foreach my $eachfile (@metadataInfo){
       if ($eachfile =~ m/^Duration: /i){
          $eachfile =~ m/Duration:(.*?),/;
          $data= $1;

      $metadataHashTree1->{$fileName}->{'Duration'}=$data;

       }
   }
}

print "=====================================================\n";
print "Building XML tree\n";
print "=====================================================\n\n";
my $xml = $tpp->write($metadataHashTree1);
sleep 5;

print "=====================================================================\n";
print "Writing the XML tree in <ATAF Path>/tmp/ParsedMetadataInformation.xml\n";
print "=====================================================================\n\n";
open (FILEHANDLE, ">$ATAF/tmp/ParsedDurationInformation.xml") or die "ERROR: $!\n";
print FILEHANDLE $xml;
close FILEHANDLE;
sleep 5;
print "=====================================================\n";
print "Successfully Completed!!!\n";
print "=====================================================\n\n";

   ######################################################################################## 
```

In the above program I am trying to get the duration of a track using `ffmpeg` command and saving the output in `@metadataInfo`. But the array size shows 0 if I try to print using the command

```
$size= scalar (@metadataInfo); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T11:20:29.690

```
"$File::Find::name$/" 
```

应该

```
$File::Find::name 
```

追加`$/`没有意义。

* * *

您不会将文件名转换为 shell 文字。

```
`ffmpeg -i $fileName` 
```

应该

```
use String::ShellQuote qw( shell_quote );

my $cmd = shell_quote('ffmpeg', '-i', $fileName);
`$cmd` 
```

这将处理文件名中的空格等问题。

* * *

您不检查反引号是否成功。的价值是`$?`多少？如果那是-1，那么 的值是`$!`多少？

# ajax - Load in div based on choice in selectbox

> ID：13950242
> 
> 赞同：0
> 
> 时间：2012-12-19T10:27:14.410
> 
> 标签：ajax, jquery

I have an box in Page1 with some different alternatives and below this a div where I want to load in content (different divs) from an external page (Page2) based on choosen alternative.

Page1

```
<select id="choose_alternative">
<option> Books </option>
<option> Paper </option>
</select> 
```

Page2

```
<div id="Book_div">Content</div>
<div id="Paper_div">Content</div> 
```

I found [THIS POST](https://stackoverflow.com/questions/2294843/ajax-load-page-content-to-div-with-select-box) and tried figure out how to use the code and ended up with this:

```
$("#choose_alternative").change(function(){
  $("#show_alternative").load( $(Page2.html #Book_div).val() );
  $("#show_alternative").load( $(Page2.html #Paper_div).val() );
}); 
```

Does anybody know what I have done wrong?

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:32:39.553

如果我理解你的问题是正确的，你想要做的是根据选择加载 div。检查下面的代码。

```
$("#choose_alternative").change(function(){

  var choose_alternative  = $("#choose_alternative option:selected").text();

  if(choose_alternative == 'Books'){
     $("#show_alternative").load('Page2.html #Book_div');
  }
  else if(choose_alternative == 'Paper'){
     $("#show_alternative").load('Page2.html #Paper_div');
  }

}); 
```

否则您可以立即加载内容

```
$("#choose_alternative").change(function(){
  $("#show_alternative").load("Page2.html #Book_div");
  $("#show_alternative").load("Page2.html #Paper_div");
}); 
```

[阅读更多](http://api.jquery.com/load/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T21:16:17.917

```
$(document).ready(function (){    
    $('#choose_alternative').change(function(){
        $show_alternative = $('#show_alternative');
        var selectedElement = $('#choose_alternative :selected');

        switch($(selectedElement).val())
        {
             case " Books ":
                  $show_alternative.load('Page2.html #Book_div');
                  break;
             case " Paper ":
                  $show_alternative.load('Page2.html #Paper_div');
                  break;
             default:
                  $show_alternative.html('No option selected.');
                  break;
        }
    }
} 
```

永远不要忘记这个`$(document).ready( function(){...})`部分；它是渲染您的代码的原因，因此可以触发它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T12:22:20.797

好的，我无法正常工作，所以出了点问题。这很奇怪，因为在同一页面上还有其他类似的脚本效果很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T10:33:49.820

这是文档的相关部分：

[http://api.jquery.com/load/#loading-page-fragments](http://api.jquery.com/load/#loading-page-fragments)

它说这样做：

```
$("#choose_alternative").change(function(){
  $("#show_alternative").load("Page2.html #Book_div");
  $("#show_alternative").load("Page2.html #Paper_div");
}); 
```

# java - Client/Server communication - Guess my animal game

> ID：13950243
> 
> 赞同：1
> 
> 时间：2012-12-19T10:27:16.417
> 
> 标签：java, multithreading

I have to make a simple text based game using multi threading. I have chosen to do a guess my animal game. A server will pick a random animal and give out clues and the client has to guess what the animal is within three clues.

However, if the animal is guessed correct, the program just goes to the next clue. I dont understand where i have gone wrong?

The other problem is when the client says *y* to a new game, it just repeats the same animal. It won't change.

I know it is just the protocol class i need to fix. Please help! I have cried with frustration over this program.

Here is a copy of my protocol class:

```
public class KKProtocol {

    private static final int WAITING = 0;
    private static final int ASKNAME = 1;
    private static final int SENTCLUE = 2;
    private static final int SENTCLUE2 = 3;
    private static final int SENTCLUE3 = 4;
    private static final int ANOTHER = 5;
    private static final int NUMANIMALS = 4;
    private int state = WAITING;
    private int currentAnimal = (int) (Math.random() * 6);  // number of first joke
    private String[] clues = {"I like to play", "I like to scratch", "I eat salad", "I annoy you in the morning"};
    private String[] clues2 = {"Love walks", "House pet", "garden pet", "I fly everywhere"};
    private String[] clues3 = {"Woof", "Meow", "I live in a hutch", "Tweet Tweet"};
    private String[] answers = {"Dog",
        "Cat",
        "Rabbit",
        "Bird",};
    private String[] name = {};

    public String processInput(String theInput) {
        String theOutput = null;

        //  System.out.println("Welcome to my animal guessing game");

        if (state == WAITING) {
            theOutput = clues[currentAnimal];
            state = SENTCLUE;
        } else if (state == SENTCLUE) {
            if (theInput.equals(answers[currentAnimal])) {
                theOutput = "Correct...Your Score is 1....Want to play again? (y/n)";
                state = ANOTHER;
            } else {
                theOutput = clues2[currentAnimal];
                state = SENTCLUE2;
            }
        } else if (state == SENTCLUE2) {
            if (theInput.equals(answers[currentAnimal])) {
                theOutput = "Correct...Your Score is 2....Want to play again? (y/n)";
                state = ANOTHER;
            } else {
                theOutput = clues3[currentAnimal];
                state = SENTCLUE3;
            }
        } else if (state == SENTCLUE3) {
            if (theInput.equals(answers[currentAnimal])) {
                theOutput = "Correct...Your Score is 3....Want to play again? (y/n)";
                state = ANOTHER;
            } else {
                theOutput = ("it's" + answers[currentAnimal] + " you fool! Want to play again? (y/n)");
                state = ANOTHER;
            }
        } else if (state == ANOTHER) {
            if (theInput.equalsIgnoreCase("y")) {
                if (currentAnimal == (NUMANIMALS - 1)) {
                    currentAnimal = 0;
                }
                theOutput = clues[currentAnimal];
                // else
                currentAnimal++;

                state = SENTCLUE;
            } else {
                theOutput = "Bye.";
                state = WAITING;
            }
        }
        return theOutput;
    }
} 
```

If you need to see the other classes please just ask.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:16:23.633

调试程序并在第一个 if 子句之前设置一个断点。变量看起来如何？我想你在代码的某个地方犯了一个微不足道的错误，当你观察你的程序实际做了什么时，它就会暴露出来。

您还可以在此处粘贴一些客户端代码，以便有人可以了解正在发生的事情。从评论中我了解到，没有人完全了解您如何使用 Protocol 类。

# date - Matplotlib：以 day.month.year 样式格式化日期

> ID：13950247
> 
> 赞同：1
> 
> 时间：2012-12-19T10:27:32.080
> 
> 标签：date, formatting, matplotlib

我想在 x 轴上绘制一些带有日期的线条，但我能找到的所有示例都使用美式风格，例如 12-31-2012。但我想要 31.12.2012，但仅通过更改日期格式化程序似乎不起作用

```
dateFormatter = dates.DateFormatter('%Y-%m-%d') 
```

到

```
dateFormatter = dates.DateFormatter('%d.%m.%y') 
```

我的日期列表是这样工作的：我想手动定义一个“firstDay”，然后生成 X 天。正如我在打印该结果列表时所看到的那样。但是当我想绘制该列表（由 num2date 转换）时，我有完全不同的日期。

例如，我将我的 firstDay 设置为 734517.0，即 2012 年 1 月 15 日。然后我在轴上打印我的日期，我得到第一个日期 01.01.87 ??

这是我的完整代码：

```
import numpy as np
import matplotlib.pyplot as plot
import matplotlib.ticker as mticker
from matplotlib import dates
import datetime

fig = plot.figure(1)
DAU = (  2,  20,  25,  60, 190, 210,  18, 196, 212, 200, 160, 150, 185, 175, 316, 320, 294, 260, 180, 145, 135,  97,  84,  80,  60,  45,  37,  20,  20,  24,  39,  73,  99)
WAU = ( 50, 160, 412, 403, 308, 379, 345, 299, 258, 367, 319, 381, 461, 412, 470, 470, 468, 380, 290, 268, 300, 312, 360, 350, 316, 307, 289, 321, 360, 378, 344, 340, 346)
MAU = (760, 620, 487, 751, 612, 601, 546, 409, 457, 518, 534, 576, 599, 637, 670, 686, 574, 568, 816, 578, 615, 520, 499, 503, 529, 571, 461, 614, 685, 702, 687, 649, 489)

firstDay = 734517.0     #15\. Januar 2012

#create an array with len(DAU) entries from given starting day...
dayArray = []
for i in xrange(len(DAU)):
    dayArray.append(firstDay + i)

#...and fill them with the converted dates
dayLabels = [dates.num2date(dayArray[j]) for j in xrange(len(DAU))]

for k in xrange(len(DAU)):
    print dayLabels[k]

spacing = np.arange(len(DAU)) + 1

line1 = plot.plot(spacing, DAU, 'o-', color = '#336699')
line2 = plot.plot(spacing, WAU, 'o-', color = '#993333')
line3 = plot.plot(spacing, MAU, 'o-', color = '#89a54e')

ax = plot.subplot(111)
plot.ylabel('', weight = 'bold')
plot.title('', weight = 'bold')
ticks, labels = plot.xticks(spacing, dayLabels)
plot.setp(labels, rotation = 90, fontsize = 11)

dateFormatter = dates.DateFormatter('%d.%m.%y')
ax.xaxis.set_major_formatter(dateFormatter)
#ax.fmt_xdata = dates.DateFormatter('%Y-%m-%d')
#fig.autofmt_xdate()

yMax = max(np.max(DAU), np.max(WAU), np.max(MAU))
yLimit = 100 - (yMax % 100) + yMax
plot.yticks(np.arange(0, yLimit + 1, 100))

plot.grid(True, axis = 'y')
plot.subplots_adjust(bottom = 0.5)
plot.subplots_adjust(right = 0.82)

legend = plot.legend((line1[0], line2[0], line3[0]),
                     ('DAU',
                     'WAU',
                     'MAU'),
                     'upper left',
                     bbox_to_anchor = [1, 1],
                     shadow = True)

frame = legend.get_frame()
frame.set_facecolor('0.80')
for t in legend.get_texts():
    t.set_fontsize('small')

plot.show() 
```

使用这个日期格式化程序也可以：

```
ax.fmt_xdata = dates.DateFormatter('%Y-%m-%d') 
```

但这也给了我时间戳，例如 2012-01-15 00:00:00+00:00 。如果有人能告诉我如何减少时间，那就太好了！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T11:22:21.950

在我看来，最简单的方法是使用真实的 Datetime 对象。这样您就可以使用`datetime.timedelta(days=i)`来确定您的日期范围。如果您的日期不规则，matplotlib 会自动考虑间距。它还允许您使用 matplotlib 中的默认日期格式选项。

我留下了一些代码以使其更简单，但您应该能够将其与您的脚本混合使用：

```
![import numpy as np
import matplotlib.pyplot as plot
import matplotlib.ticker as mticker
from matplotlib import dates
import datetime

fig = plot.figure(1)
DAU = (  2,  20,  25,  60, 190, 210,  18, 196, 212, 200, 160, 150, 185, 175, 316, 320, 294, 260, 180, 145, 135,  97,  84,  80,  60,  45,  37,  20,  20,  24,  39,  73,  99)
WAU = ( 50, 160, 412, 403, 308, 379, 345, 299, 258, 367, 319, 381, 461, 412, 470, 470, 468, 380, 290, 268, 300, 312, 360, 350, 316, 307, 289, 321, 360, 378, 344, 340, 346)
MAU = (760, 620, 487, 751, 612, 601, 546, 409, 457, 518, 534, 576, 599, 637, 670, 686, 574, 568, 816, 578, 615, 520, 499, 503, 529, 571, 461, 614, 685, 702, 687, 649, 489)

firstDay = datetime.datetime(2012,1,15)     #15\. Januar 2012

dayArray = [firstDay + datetime.timedelta(days=i) for i in xrange(len(DAU))]

ax = plot.subplot(111)

line1 = ax.plot(dayArray, DAU, 'o-', color = '#336699')
line2 = ax.plot(dayArray, WAU, 'o-', color = '#993333')
line3 = ax.plot(dayArray, MAU, 'o-', color = '#89a54e')

ax.xaxis.set_major_formatter(dates.DateFormatter('%d.%m.%Y'))] 
```

![在此处输入图像描述](../Images/79081e26a1507dcbe8212046180cef18.png)

与您的脚本的主要区别`dayArray`在于创建方式（并用作绘图命令中的 x 值）以及设置 x 轴格式的最后一行。

# javascript - extjs4 中的 getActionEl() 实际返回的是什么？

> ID：13950248
> 
> 赞同：2
> 
> 时间：2012-12-19T10:27:32.377
> 
> 标签：javascript, extjs, extjs4

在 ExtJS4 中有一个`getActionEl( )`用于 Ext.Component 的新函数。

没有它的文档。

函数返回什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T10:34:20.230

它返回`el`您调用它的实例的。但它是私有的，并且已经被弃用，所以我不会使用它。

# html - VBA Outlook - 用手动换行符替换段落标记

> ID：13950252
> 
> 赞同：1
> 
> 时间：2012-12-19T10:27:45.063
> 
> 标签：html, vba, outlook, replace, plaintext

亲爱的 Stackoverflow 的人们，

我想用手动换行符（^l）替换每***封收到***的电子邮件的段落标记（相信^pi，至少在Outlook查找和替换中）。
我无法通过谷歌找到解决方案，但我可能搜索错误。

我对每封传入的电子邮件都使用以下代码作为规则：（
仅供参考，此代码适用于文本）

```
Sub testing(MyMail As MailItem)
 MyMail.HTMLBody = Replace(MyMail.HTMLBody, "example", "changedtext")
 MyMail.Save
End Sub 
```

现在我试图将第二行更改为：

```
MyMail.HTMLBody = Replace(MyMail.HTMLBody, "^p", "^l") 
```

和

```
MyMail.HTMLBody = Replace(MyMail.HTMLBody, "chr(13)", "chr(10)") 
```

但这些似乎不起作用。

不幸的是，我对 VBA 编码不是很熟悉。
我刚刚被告知我需要使用 chr() 但我不知道如何做到这一点。

一些背景信息：
我使用 2 条规则，1 条用 ^l 更改每个 ^p，另一条规则是将电子邮件从 HTML 转换为纯文本。
如果我只是在不先用 ^l 更改 ^p 的情况下转换它，它将有所有这些额外的空行。

示例：
![HTML & 转换为纯文本时的示例](../Images/73134cbba4e4e43bb5268c4dd21bb05e.png) 是否有人愿意帮助我解决这个问题？
我真的很感激！

问候，

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:42:38.073

有几种方法可以做到这一点，但都具有相同的副作用。如果用户 SHIFT + ENTER 2 次，他们也会产生 1 个新行

解决方案 1：'将 2 个换行符替换为 1 个换行符

```
'vbCrLf is actually Chr(13) & Chr(10)

mail.HTMLBody = Replace(mail.HTMLBody, vbCrLf & vbCrLf, vbCrLf) 
```

解决方案2：'将任何额外的换行符替换为“”，最后会有一个额外的空白链接

```
tmp = Split(mail.HTMLBody, vbCrLf)
For Each Line In tmp
    If Line <> "" Then
        newBody = newBody  & Line & vbCrLf
    End If
Next
mail.HTMLBody = newBody 
```

# python - 从同一个 Python 字节字符串派生的不同整数

> ID：13950255
> 
> 赞同：0
> 
> 时间：2012-12-19T10:27:50.120
> 
> 标签：python, binary, python-2.7, hex, bytearray

```
>>> import binascii, struct
>>> foo_hex = 'b1e92555'
>>> foo_bin = binascii.unhexlify(foo_hex)
>>> int(foo_hex, 16)
2984846677
>>> struct.unpack('i', foo_bin)[0]
1428548017 
```

为什么这些整数不同？哪种方法是正确的，如何将另一种方法更改为正确的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T10:37:40.330

`struct`正在使用 little-endian 表示法解释该值，同时使用`unhexlify`并将`int(.., 16)`其解释为 big-endian 无符号整数。

使用`<`or`>`指定输入的字节顺序，并使用`I`将其解释为有符号整数：

```
>>> struct.unpack('>I', foo_bin)[0]
2984846677
>>> struct.unpack('<I', foo_bin)[0]
1428548017 
```

请参阅文档页面的[字节顺序、大小和对齐部分。](http://docs.python.org/2/library/struct.html#byte-order-size-and-alignment)`struct`

# c++ - What's a C++03 compliant way of fetching a value from a volatile variable?

> ID：13950256
> 
> 赞同：5
> 
> 时间：2012-12-19T10:27:52.547
> 
> 标签：c++, language-lawyer

According to this [defect report](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1054) C++03 Standard does not guarantee that in the following code:

```
volatile int x;
void f() {
    x;
} 
```

the variable is read from.

Then how do I write code that just read the volatile variable value and discards the result (read for the sake of read)?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T10:44:10.233

`int i = x;`应该管用。此代码绝对需要读取 volatile 变量，并且不允许优化器优化读取。但是由于该变量`i`未使用，优化器可以避免存储读取值所涉及的任何额外工作。

您可能还需要这样的东西来避免编译器警告：`(void)i;`

# jquery - How to make " " appear in the middle

> ID：13950258
> 
> 赞同：2
> 
> 时间：2012-12-19T10:27:56.553
> 
> 标签：jquery, html, string

How to make string "Review 1" with sequencial white spaces in the middle to be rendered as such. Please see the [example](http://jsfiddle.net/r3Mrv/) below.

```
<div id="target"></div>​

var name = "Review     1"
$('#target').html(name);​ 
```

Thanks

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T10:30:54.553

`&nbsp;`每个空间使用一个

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-19T10:31:49.467

更改处理空白的方式：

```
<div id="target" style="white-space: pre;"></div>​ 
```

[http://jsfiddle.net/PHvVh/1/](http://jsfiddle.net/PHvVh/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T10:35:23.053

您需要使用`.replace()`试一试：

```
$(function () {
    var name = "Review     1"
    $('#target').html(name.replace(/\s/g, '&nbsp;'));
});​ 
```

工作示例：http: [//jsfiddle.net/t4jtJ/1/](http://jsfiddle.net/t4jtJ/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T10:31:36.643

如果您需要多个空格，您可以使用 html 编码字符作为空格：`&nbsp;`（=非换行空格）

```
var name = "Review&nbsp;&nbsp;&nbsp;&nbsp;1" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-19T10:31:53.657

```
var name = "Review     1".replace(/ /g, "&nbsp;");

$('#target').html( name );​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-19T10:32:11.067

`&nbsp;`像其他人说的那样使用。如果文本是动态的，请使用替换：

```
name = name.replace(/\s/g,'&nbsp;'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-19T10:39:34.383

```
var name = "Review     1"
name.split(' ').join('&nbsp');
$('#target').html(name);​ 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-19T10:44:00.543

那么你可以使用`<pre>`标签：

```
$('#target').html('<pre>'+name+'</pre>'); 
```

签出小提琴：http: [//jsfiddle.net/8BJuB/](http://jsfiddle.net/8BJuB/)

# asp.net - 回发中添加的动态添加控件的事件注册

> ID：13950260
> 
> 赞同：0
> 
> 时间：2012-12-19T10:28:00.437
> 
> 标签：asp.net, asp.net-4.0

我有一个占位符，我正在向其中添加一些 WebUserControls。WebUserControl 只有一个带有 onClick 的按钮。

```
<asp:Button ID="bMyButton" runat="server" OnClick="MyButtonOnClick" CausesValidation="false" /> 
```

当我将 WebUserControls 添加到 Page_Load 上的页面时，一切正常。问题是我有一些过滤器可以回发调用`ApplyFilters()`. 我需要根据选择的过滤器重新加载此方法中的项目（过滤器的值尚未在 Page_Load 事件中更新）但是`MyButtonOnClick`当我这样做时事件不会触发，因为它们已添加到页面中很晚在生命周期中。

有人对解决方法有任何想法吗？

ps 我没有粘贴太多代码，因为我已经简化了我的示例来解释调试期间发生的情况。如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:26:34.680

我已经设法“解决”这个问题。我不依赖 ASP.NET 事件，而是在`Request.Form[]`. 这样我就可以在控件验证周期之前看到过滤器的新值，并将动态控件加载到`Page_Load`.

不理想，因为我宁愿坚持传统活动，但我认为目前没有其他方法可以解决这个问题。

# asp-classic - URL Resolver in ASP

> ID：13950262
> 
> 赞同：1
> 
> 时间：2012-12-19T10:28:04.077
> 
> 标签：asp-classic

I am working an application with classic ASP.

Now i want to know how to resolve the url path for the below code.

```
<!--#include file="../hf/headerfooter.asp"--> 
```

This is used in many other pages nested in different folder. So i want to resolve this path according to it.

Is there any url helper method available for ASP for doing that? In ASP.Net we can do with ~ symbol or using [**Control.ResolveUrl() method**](http://msdn.microsoft.com/en-us/library/system.web.ui.control.resolveurl%28v=VS.80%29.aspx)

How can done the same with Classic ASP. Any input welcome to achive this functionlaity.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:16:50.100

您可以使用：

```
<!--#include virtual="/hf/headerfooter.asp"--> 
```

包含具有虚拟路径而不是固定/绝对路径的文件。这将加载相对于您的站点根目录的文件。

# python - Replace found items with regexp used.

> ID：13950263
> 
> 赞同：-3
> 
> 时间：2012-12-19T10:28:08.207
> 
> 标签：python, regex, python-2.6

First I search for the numbers, and replace found with regexp.

Then take the changed string (?) and search for the spaces and replace found with regexp.

However I get wrong results.

```
test0 = This book id 0076 has 6782e6a
test1 = This book id 0076 has 0xef34a 
```

I used following regular expression:

```
b = re.sub(r"(0x[a-fA-F0-9]+|\d+)","[0-9]*", test0)
c = re.sub(r'[(\s)*]','[^\s"]*',b) 
```

My output:

```
test0
b = This book id [0-9]* has [0-9]*e[0-9]*a
c = This[^\s]*book[^\s]*id[^\s]*[0-9][^\s]*[^\s]*has[0-9][^\s]*e[0-9][^\s]*a

test1
b = This book id [0-9]* has [0-9]*
c = This[^\s]*book[^\s]*id[^\s]*[0-9][^\s]*[^\s]*has[0-9][^\s]* 
```

Expected output:

```
test0
b = This book id [0-9]* has [0-9]*
c = This[^\s]*book[^\s]*id[^\s]*[0-9]*[^\s]*has[^\s]*[0-9]*

test1
b = This book id [0-9]* has [0-9]*
c = This[^\s]*book[^\s]*id[^\s]*[0-9]*[^\s]*has[^\s]*[0-9]* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:44:46.300

The second match option in the regex `"(0x[a-fA-F0-9]+|\d+)"` matches the string `"6782e6a"` twice, giving you the output `"[0-9]*" + "e" + "[0-9]*" + "a"`.

I suggest you change your regex to something like `"(?:0x)?[A-Z-a-Z0-9]+"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:56:10.320

如果您的字符串具有所有相同的格式，您还可以使用肯定的后向断言，只需选择 和 之后的`'id'`标记`'has'`。这样你就不必想出一个复杂的正则表达式。

这里是这样的：

```
>>> a = 'This book id 0076 has 6782e6a'
>>> b = re.sub(r'(?<=id\s)\w+', '[0-9]*', a)
>>> b
'This book id [0-9]* has 6782e6a'
>>> c = re.sub(r'(?<=has\s)\w+', '[0-9]*', b)
>>> c
'This book id [0-9]* has [0-9]*' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T10:43:25.857

在第二次阅读时，我意识到你错过的是`\s`匹配`xf`位`0xf`，实际上是任何十六进制字符串。

尽管我不确定您到底要做什么，但也许您需要在 re.match 中使用分组来避免字符串位与十六进制匹配，例如：

```
In [16]: re.match("(0x[0-9a-fA-F]+)(hello)", "0xfhello").groups()
Out[16]: ('0xf', 'hello') 
```

*老的*

看起来第二轮数字可能是十进制 [0-9]+ 或十六进制 0x[0-9a-fA-F]+ 所以你的正则表达式应该是这样的：

```
([0-9]+)|(0x[0-9a-fA-F]+) 
```

但是，如果您赶时间，也许可以通过将两者折叠成一个不精确的正则表达式来获得：

```
[0-9a-fA-Fx]+ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T10:46:55.300

第一个正则表达式可以是`(?<=\s)(0x)?[0-9a-fA-F]+(?=\s|$)`.

中的第二个数字`string`是一个十六进制数字，前面没有 a `0x`。如果确定只有十六进制数字以 a 开头`0x`，那么它可以是`(0x[0-9a-fA-F]+)|\d+`。

有一个问题：如果你不在`0x`一个十六进制数之前放一个 a ，模式最终可能会匹配一个英文单词，比如,`coffee`等。你应该在十六进制值之前放一个 a 。`cafe``dead``0x`

第二个可以很简单`(\s)+`。当你在 and 之间放置一个正则表达式时`[`，`]`里面的所有字符都被认为是不同的。表示或`[ab]`的单个实例。这就是为什么您的正则表达式用两次替换s 和s的原因。`a``b``(\s)``*``[^\s]`

# linux - Does using TSC as clock source improve timer and scheduling granularity?

> ID：13950264
> 
> 赞同：12
> 
> 时间：2012-12-19T10:28:10.063
> 
> 标签：linux, timer, linux-kernel, operating-system

In processors that support time stamp counter (TSC) Linux provides the high resolution timer option using TSC. From what I understand TSC is a register that can be read but doesn't provide the option to interrupt the CPU at a configured rate. So for the timer interrupt generation in Linux still has to rely on I/O APIC (on x86) with HZ value typically set to 1000 or 250.

Even though TSC gives time stamps at micro second granularity the timer/scheduling granularity will still be at 4ms or 1ms depending on the HZ value. Is this understanding correct ? Or is there an option to improve the timer granularity using the TSC ?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T23:59:40.783

在默认的 Linux 2.6 内核中，可编程中断控制器 (PIT)（适用于所有 PC）用作系统计时器 [1]。顾名思义，PIT 可以通过编程（通常在内核启动时）以预定的速率中断 CPU。这个预先确定的速率就是你指的HZ值，它是一个静态编译的值，等于内核编译参数CONFIG_HZ。[2] 因此，您可以在编译时修改 CONFIG_HZ，PIT 将开始以上述频率中断 CPU。但是，请记住，PIT 是由大约 1.193 MHZ 的时钟在内部驱动的，因此将 CONFIG_HZ 设置为大于该值并不是一个好主意。正如 [3] 中指出的那样

> 多处理器系统中本地APIC（高级可编程中断控制器）的定时器用于处理器间同步

并通过 [1] 中的解释，我相信它的 PIT（而不是本地 APIC）与 HZ 值相关（至少在 2.6 内核之前）。

现在，谈到你的问题，理论上你的想法看起来是正确的。像本地 APIC 和 PIT 一样的时间戳计数器是另一个时间源[1]。在 [4] 中，您可以找到对此的确认。

> Linux 可以利用这个寄存器来获得比可编程间隔定时器提供的更准确的时间测量。为此，Linux 必须在初始化系统时确定时钟信号频率。事实上，因为在编译内核时没有声明这个频率，所以相同的内核映像可能运行在时钟可能以任何频率滴答的 CPU 上。

但是，请记住时间戳计数器在每个 CPU 时钟周期递增。这给我们带来了与 CPU 时钟周期相关的计数器相关的棘手陷阱[5]。一个例子是现代 CPU 可以更改其 CPU 时钟频率以节省电力，这将影响存储在时间戳计数器中的值。如果发生这种情况，您可以估计它对您的时间测量的影响。此外，绝对空闲的内核可能会调用 HALT 指令，该指令完全停止处理器，直到收到外部中断。一直以来，TSC 永远不会增加，您会失去一些宝贵的“增量”，否则会使您的测量更加精确。简而言之，处理 TSC 是一个难题，不是特别适合用作可编程中断。

1.  罗伯特·洛夫，LKD——第 3 版。（第 11 章）
2.  [http://lxr.linux.no/linux+v2.6.31/arch/x86/include/asm/param.h#L5](http://lxr.linux.no/linux+v2.6.31/arch/x86/include/asm/param.h#L5)
3.  [http://www.6test.edu.cn/~lujx/linux_networking/0131777203_ch02lev1sec7.html](http://www.6test.edu.cn/~lujx/linux_networking/0131777203_ch02lev1sec7.html)
4.  [http://www.makelinux.net/books/ulk3/understandlk-CHP-6-SECT-1](http://www.makelinux.net/books/ulk3/understandlk-CHP-6-SECT-1)
5.  [http://lwn.net/Articles/209101/](http://lwn.net/Articles/209101/)

# r - 如何通过将文件名与列名匹配来提取数据

> ID：13950265
> 
> 赞同：0
> 
> 时间：2012-12-19T10:28:09.573
> 
> 标签：r

这应该很容易，但我做不到。我有很多文件，每个文件都以物种名称命名。我还有一个数据框，其中每一列都以物种名称命名。我只想从数据框中提取列，并在更改列名之后将该列与相应的物种文件结合起来，让说“常见”可能在一个循环中，以便稍后比较所有物种。

自由度：

```
ID  Tilia_americana Fraxinus_americana  Ulmus_americana
1   23  32  32
2   21  34  35
3   20  33  32
4   19  33  36
5   23  23  34
6   22  34  37 
```

抱歉，之前没有具体说明。如您所见，列名是物种名称，此外，我还有三个带有物种名称的单独文件。第一个文件的头是这样的：

美洲椴树：

```
ID  Wie Rei Wee
1   2   4   3
2   4   3   4
3   3   2   5
4   5   5   2
5   6   3   4
6   7   4   3 
```

从 DF 中提取 Tilia_american 列并将列名更改为“Common”并将其与 Tilia_american 文件结合后，输出应如下所示：

```
ID  Wie Rei Wee Common
1   2   4   3   23
2   4   3   4   21
3   3   2   5   20
4   5   5   2   19
5   6   3   4   23
6   7   4   3   22 
```

最后想单独保存每个文件...谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T11:42:29.490

在不知道细节的情况下（比如 data.frame 中的文件名和列名是否完全匹配），很难给你具体的建议，但可能是类似的东西。

```
importMyData <- function(x, my.df) {
    data.from.file <- read.table(x, header = TRUE) # set your import function and its params
    sp.name <- unlist(strsplit(x, ".txt"))
    out <- cbind(data.from.file, my.df[, sp.name])
    out
} 
```

你可以在里面使用这个功能`sapply`。

```
my.file <- list.files(pattern = ".txt")
sapply(my.file, FUN = importMyData, my.df = my.df) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:36:49.550

您可以使用类似的内容获取物种文件列表

```
files <- list.files( pattern = ".txt" ) 
```

假设这些文本文件具有扩展名`.txt`并且该文件夹中没有其他文本文件。

和

```
species <- gsub( ".txt", "", files ) 
```

您可以删除扩展名，然后在`Common`data.frame 中有列名。

您现在可以构建一个循环（可能有更好的方法，例如 lapply...）：

```
for( i in 1:length( files ) )
{
    x <- read.table( files[i], header = TRUE )
    x <- cbind( x, Common[ colnames( Common ) == species[i] ] )
    write.table( x, files[i], row.names = FALSE )
} 
```

希望这能让你开始！

# c - 受限 3 体模拟无法正常工作

> ID：13950266
> 
> 赞同：0
> 
> 时间：2012-12-19T10:28:11.743
> 
> 标签：c, physics, simulation, gravity, orbit

我目前正在尝试做一个任务，我必须为受限的 3 体引力问题编写一个模拟，具有两个固定质量和一个测试质量。我得到的关于这个问题的信息是：[查看这个链接](http://www.flickr.com/photos/91029993@N07/8269806430/in/photostream)，这是我到目前为止的程序：

```
#include<stdlib.h>
#include<stdio.h>
#include <math.h>

int main (int argc, char* argv[])
{
    double dt=0.005, x[20000],y[20000],xv,yv,ax,ay,mneg,mpos,time,radius=0.01;
    int n,validation=0;
    FILE* output=fopen("proj1.out", "w");

    printf("\n");

    if((argv[1]==NULL) || (argv[2]==NULL) || (argv[3]==NULL) || (argv[4]==NULL) ||     (argv[5]==NULL) || (argv[6]==NULL)) 
    {
        printf("************************ ERROR! ***********************\n");
        printf("**     Not enough comand line arguments input.       **\n");
        printf("**     Please run again with the correct amount (6). **\n");
        printf("*******************************************************\n");
        validation=1;
        goto VALIDATIONFAIL;
    }
if((sscanf(argv[1], "%lf", &mneg)==NULL) || (sscanf(argv[2], "%lf", &mpos)==NULL) || (sscanf(argv[3], "%lf", &x[0])==NULL) ||
(sscanf(argv[4], "%lf", &y[0])==NULL) || (sscanf(argv[5], "%lf", &xv)==NULL) || (sscanf(argv[6], "%lf", &yv)==NULL) )
{
    printf("************************* ERROR! ************************\n");
    printf("** Input values must be numbers. Please run again with **\n");                 
    printf("** with numerical inputs (6).                          **\n");
    printf("*********************************************************\n");
    validation=1;
  goto VALIDATIONFAIL;
}

sscanf(argv[1], "%lf", &mneg);
sscanf(argv[2], "%lf", &mpos);
sscanf(argv[3], "%lf", &x[0]);
sscanf(argv[4], "%lf", &y[0]);
sscanf(argv[5], "%lf", &xv);
sscanf(argv[6], "%lf", &yv);

    x[1]=x[0]+(xv*dt);
    y[1]=y[0]+(yv*dt);

for(n=1;n<10000;n++)
    {
        if(x[n-1]>=(1-radius) && x[n-1]<=(1+radius) && y[n-1]>=(0-radius) && y[n-1]<=(0+radius))
        {
            printf("Test mass has collided with M+ at (1,0), Exiting...\n");
            goto EXIT;
        }
        else if(x[n-1]>=(-1-radius) && x[n-1]<=(-1+radius) && y[n-1]>=(0-radius) && y[n-1]<=(0+radius))
        {
            printf("Test mass has collided with M- at (-1,0), Exiting...\n");
            goto EXIT;
        }
        else
        {
            double dxn = x[n] + 1;
            double dxp = x[n] - 1;
            double mnegdist = pow((dxn*dxn + (y[n]*y[n])), -1.5);
            double mposdist = pow((dxp*dxp + (y[n]*y[n])), -1.5);

            ax =  -(mpos*dxp*mposdist+mneg*dxn*mnegdist);
            ay =  -(mpos*y[n]*mposdist+mneg*y[n]*mnegdist); 

            x[n+1]=((2*x[n])-x[n-1] +(dt*dt*ax));
            y[n+1]=((2*y[n])-y[n-1]+(dt*dt*ay));

            fprintf(output, "%lf %lf\n",x[n-1], y[n-1]); 
        }
    }
VALIDATIONFAIL: 
printf("\n");
return(EXIT_FAILURE);   

EXIT:
return(EXIT_SUCCESS);
} 
```

我的程序在一定程度上可以正常工作，但我遇到了一些奇怪的问题，希望有人能帮助我。

主要问题是，当测试质量到达其轨迹中的某个点时，它应该离开并开始围绕另一个质量运行，而不是沿着直线射向无穷远！起初我认为是质量发生碰撞，所以我进行了半径检查，但在某些情况下，这确实有效，在某些情况下，它不起作用，并且在某些情况下，质量在轨迹出错之前就更早发生了碰撞所以这显然不是问题。我不确定我是否已经解释得很好，所以这里有一张图片向您展示我的意思。（右边的模拟来自[这里](http://www.upscale.utoronto.ca/PVB/Harrison/Flash/Chaos/ThreeBody/ThreeBody.html)）

![线](../Images/3d09cd777bba79a9f777f568373d737b.png)

然而，情况并非总是如此，有时不是直线前进，而是当它应该转到另一个质量时，轨迹会变得疯狂，就像这样： ![疯狂的](../Images/8c4564fa6032a173bbd1cc4e2d559415.png)

我真的完全不知道发生了什么，我花了几天时间试图解决这个问题，但似乎无法到达任何地方，因此非常感谢任何帮助确定我的问题所在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T18:18:20.653

这太长了，不适合发表评论，我也可能对未来的访问者有用。

为给定计算正确选择时间步长并非易事。Verlet 积分器家族是辛的，这意味着它们保留了相空间体积，因此应该在给定无限精度和无限小的时间步长的情况下保留系统的总能量，但不幸的是，真正的计算机以有限的精度运行，人类的生命也是如此简短，以便我们等待无限数量的时间步长。

Verlet 积分器，就像您已经实现的那个和速度 Verlet 方案一样，具有 O( *Δt* ² ) 的全局误差。这意味着该算法仅对时间步长二次敏感，为了大大提高精度，必须将时间步长相应地减少所需精度改进因子的平方根的倍数。单击用于比较轨迹的 Flash 小程序的进入按钮，您会看到它使用了完全不同的积分器 - Euler-Cromer 算法（也称为半隐式 Euler 方法）。给定相同的时间步长，它具有不同的精度（实际上*更糟*比给定相同时间步长的 Verlet 方案），因此您不能也不应该直接比较两条轨迹，而只能比较它们的统计特性（例如平均能量、平均速度等）

我的观点是你必须**减少**时间步长，因为当测试体太靠近引力中心之一时，它太大而无法处理。这里隐藏着另一个问题，它是有限的数值精度。观察这个术语：

```
double dxp = x[n] - 1;
double mposdist = pow((dxp*dxp + (y[n]*y[n])), -1.5); 
```

每当你减去两个相近的浮点数 (`x[n]`和`1.0`) 时，就会发生一个非常不幸的事件，称为精度损失，因为它们尾数中的大多数高有效位相互抵消，最后，在归一化步骤之后，你会得到一个数字与原始两个数字相比，有效位要少得多。当结果被平方并用作分母时，这种精度损失变得更大。请注意，这主要发生在接近 的系统对称轴`y[n]`附近`0`。否则`y[n]`可能足够大，因此这`dxp*dxp`只是对价值的微小修正`y[n]*y[n]`. 最终结果是在每个固定质量附近的力将完全错误，并且通常在大小上大于实际力。当您测试超出规定的点时，这在您的情况下是可以防止的`radius`。

在固定的时间步长下，更大的力会导致更大的位移。这也导致系统总能量的人为增加，即测试质量将倾向于比在更精细的模拟中移动得更快。也可能发生这样的情况，即测试体最终离引力中心太近，巨大的力乘以时间步长的平方可能会产生如此大的位移，以至于你的测试质量最终会离得很远，但这次是增加的总能量会导致高动能，并且身体实际上会从模拟体积中弹出。即使您以无限精度计算力也可能发生这种情况 - 只是两个时间步之间的位移可能非常大（因为时间步长），系统会在相空间中进行不切实际的跳跃到完全不同的能量等值面。并且在重力（以及静电）的情况下，随着力的增加，很容易达到这种情况`1/r^2`在半径附近，它比初始状态强许多数量级。

在给定最大预期力值的情况下，人们可能会想出不同的经验法则来估计时间步长的大小，但一般来说，最大力越高，时间步长应该越低。这类事情通常可以在给定初始条件的情况下进行粗略估计，这样可以节省大量由于“弹射”效应而导致的失败模拟。

现在由于 Verlet 方案是辛的，控制模拟正确性的最佳方法是观察系统的总能量。请注意，速度 Verlet 积分器要好一些，因为它在数值上更稳定（但它仍然具有相同的精度对时间步长平方的依赖性）。使用标准 Verlet 方案，您可以`v[i]`通过取`(x[i+1] - x[i-1])/(2*dt)`. 对于速度 Verlet，速度明确包含在方程中。

无论哪种方式，在每个时间步取速度并计算系统的总能量并观察值都是有意义的。如果时间步长是恰到好处 (tm)，那么总和应该几乎是守恒的，平均值周围的振荡相对较小。如果它向上疯狂，那么你的时间步长太大了，应该减少。

减少时间步长会相应地增加模拟的运行时间。还可以观察到，在远场中，力小，点移动慢，时间步长长就好。更短的时间步不会改善那里的解决方案，只会增加运行时间。这就是为什么人们发明了多时间步长算法和自适应时间步长算法来自动细化近场解决方案。也可以通过变换方程来应用另一种计算力的方法，以便不包括相近变量的减法。

（嗯，这比几个评论都要大）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T21:48:09.947

我发现很难理解你的代码，所以如果我告诉你你已经知道的事情，我会尽力提供帮助并道歉。

我发现计算涉及重力的模拟物理的最佳方法是使用牛顿万有引力定律。这是由公式给出的：

F = ( ( -G * M1 * M2 ) / ( R * R ) ) * r_unit_vector;

在哪里：

G ~= 6.67e-11，M1是第一个物体的质量，M2是第二个物体的质量，R是两个物体之间的距离：`sqrt(pow(X2 - X1, 2) + pow(Y2 - Y1, 2))`

X1 为对象 1 的 X 坐标，X2 为对象 2 的 X 坐标，Y1 为对象 1 的 Y 坐标，Y2 为对象 2 的 Y 坐标。

r_unit_vector 是从对象 2 指向对象 1 的单位向量

```
struct r_unit_vector_struct{
    double x, y;
}r_unit_vector; 
```

r_unit_vector 具有 ax 分量，即对象 2 的 x 坐标 - 对象 1 的 x 坐标，r_unit_vector 具有 y 分量，即对象 2 的 y 坐标 - 对象 1 的 y 坐标。

要使 r_unit_vector 成为单位向量，您必须将（x a 和 y 分量分别）除以其长度，由下式给出`sqrt(pow(r_unit_vector.x, 2) + pow(r_unit_vector.y - Y1, 2))`

你们都应该准备好了！希望这是有道理的。如果没有，我会给你写一堂课来做这些事情，或者如果可以的话，进一步解释一下！

# javascript - ACE编辑器统计字符数？

> ID：13950268
> 
> 赞同：4
> 
> 时间：2012-12-19T10:28:14.133
> 
> 标签：javascript, ace-editor

这就是我在 ACE 编辑器中获取总行数的方式......

```
editor.getSession().on('change', function(){
    var lines = editor.session.getLength();
    $('#lines').empty().append(lines);
}); 
```

这工作正常，但我怎样才能得到总字符呢？我在 API 文档中找不到这方面的任何信息。

谢谢。

**编辑...**

这就是我最终这样做的方式......它还将输出与千位分隔符分开。

```
var lines = setting.editor.getLength().toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
var chars = setting.editor.getValue().length.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
$('#lines').empty().append(lines);
$('#chars').empty().append(chars); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T10:31:23.123

尝试使用这个：

```
console.log(editor.session.getValue().length); 
```

# c++ - 哑数据对象包含所有常见的值c++，这是正确的

> ID：13950272
> 
> 赞同：3
> 
> 时间：2012-12-19T10:28:29.113
> 
> 标签：c++

所以我是 C++ 新手，我正在为一个科学应用程序写作。

需要从几个输入文本文件中读取数据。

目前我将这些输入变量存储在一个对象中。（让我们称之为 inputObj）。

我现在必须在所有对象周围传递这个“inputObj”是否正确。似乎它刚刚成为全局变量的复杂版本。所以我想我可能错过了 OOP 的重点。

我为我的程序创建了一个 g++ 可编译的小示例：

```
#include<iostream>

class InputObj{
// this is the class that gets all the data
public:
void getInputs() {
    a = 1;
    b = 2;
};
int a;
int b;
};

class ExtraSolver{
//some of the work may be done in here
public:
    void doSomething(InputObj* io) {
        eA = io->a;
        eB = io->b;
        int something2 = eA+eB;
        std::cout<<something2<<std::endl;
    };  
private:
    int eA;
    int eB;

};

class MainSolver{
// I have most things happening from here

public:
void start() {
    //get inputs;
    inputObj_ = new InputObj();
    inputObj_ -> getInputs();
    myA = inputObj_->a;
    myB = inputObj_->b;

    //do some solve:
    int something = myA*myB;

    //do some extrasolve
    extraSolver_ = new ExtraSolver();
    extraSolver_ -> doSomething(inputObj_);

};
private:
InputObj* inputObj_;
ExtraSolver* extraSolver_;
int myA;
int myB;

};

int main() {
MainSolver mainSolver;
mainSolver.start();
} 
```

问题摘要：我的很多对象都需要使用相同的变量。我的实现是实现这一目标的正确方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T10:37:04.537

Don't use classes when functions will do fine.

Don't use dynamic allocation using `new` when automatic storage will work fine.

Here's how you could write it:

```
#include<iostream>

struct inputs {
    int a;
    int b;
};

inputs getInputs() {
    return { 1, 2 };
}

void doSomething(inputs i) {
    int something2 = i.a + i.b;
    std::cout << something2 << std::endl;
}

int main() {
    //get inputs;
    inputs my_inputs = getInputs();

    //do some solve:
    int something = my_inputs.a * my_inputs.b;

    //do some extrasolve
    doSomething(my_inputs);
} 
```

I'll recommend reading a good book: [The Definitive C++ Book Guide and List](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T11:44:40.077

我的回答将基于您的评论

*“是的，我仍然没有将对象相互传递的感觉，当它本质上是我正在寻找的全局变量时”*

所以这种“传递对象的感觉”会随着练习而来^^，但我认为记住我们有OO的一些原因很重要，

*   目标（在它的简化版本中）是`modularise`您的代码，以增加`reuse`代码段。您可以创建多个 InputObj 而无需每次重新定义或重新分配它们
*   另一个目标是`data hiding`通过封装，有时我们不希望变量被另一个函数更改，并且我们不希望全局公开这些变量以保护它们的内部状态。

例如，如果您的 InputObj 中的 a 和 b 在代码开头声明和初始化全局变量，您能否确定除非您愿意，否则值不会在任何给定时间更改？对于简单的程序是的..但是随着程序的扩展，如果您希望保留 a 和 b 的初始状态，您的变量也有可能被无意更改（因此出现一些随机的意外行为），您将不得不这样做它自己（更多临时全局变量？）

*   `control`通过添加具有类/继承/操作覆盖/多态性/抽象和接口的级别抽象以及使我们的生活更容易构建复杂体系结构的一堆其他概念，您可以获得更多的代码流。

现在，虽然许多人认为全局变量是邪恶的，但我认为如果使用得当，它们是好的和有用的......否则是最好的办法。

我希望这有助于消除传递物体的不安感觉：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T11:34:47.300

使用你的方法好不好很大程度上取决于情况。如果你需要一些高速计算，你不能为你的 InputObj 类提供封装方法，尽管它们是推荐的，因为它会大大降低计算速度。但是，您可以遵循两条规则来减少错误： 1) 每次您真的不希望您的对象修改时，请小心使用 'const' 关键字：

```
 void doSomething(InputObj * io) -> void doSomething(const InputObj * io) 
```

2）将与对象的初始状态相关的每个动作（在你的情况下，据我所知，你的 InputObj 是从文件加载的，因此没有这个文件加载是无用的）到构造函数：而不是：

```
InputObj() { }
void getInputs(String filename) {
    //reading a,b from file
}; 
```

利用：

```
InputObj(String filename) {
    //reading a,b from file
}; 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-12-19T10:47:08.927

你是对的，这样你已经实现了全局变量，但我认为你的方法是结构化的，而不是复杂的，因为你将全局值封装在一个对象中。这将使您的程序更易于维护，因为全局值不会遍布各处。

您可以通过将全局对象实现为单例 (http://en.wikipedia.org/wiki/Singleton_pattern) 来使这一点变得更好，从而确保只有一个全局对象。

此外，通过静态成员或函数访问对象。这样您就不需要将它作为变量传递，但程序的任何部分都可以轻松访问它。

您应该知道，像这样的全局对象在多线程应用程序中不能很好地工作，但我知道情况并非如此。

您还应该知道，是否应该使用单例来处理这类事情，会有很多讨论。在 SO 或网络上搜索“C++ 单例与全局静态对象”

# c# - 如何识别我是否按下了 IE 中的后退按钮？

> ID：13950274
> 
> 赞同：9
> 
> 时间：2012-12-19T10:28:36.983
> 
> 标签：c#, asp.net, browser

> **可能重复：**
> [检测浏览器中的后退按钮单击](https://stackoverflow.com/questions/6359327/detect-back-button-click-in-browser)

我有两页，Page1 和 Page2。通过单击链接从 Page1 移动到 Page2 时，我倾向于存储在 Page2 上单击浏览器后退按钮时恢复 Page1 状态所需的条件。

我正在使用以下函数清除缓存，

```
protected override void OnInit(EventArgs e)
{
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    Response.Cache.SetNoStore();
    Response.Cache.SetExpires(DateTime.MinValue);
    base.OnInit(e);
} 
```

这样我就可以根据 cookie 中存储的条件重新加载页面。但问题是如何确定我是否按下了浏览器后退按钮或菜单链接以进入 Page1。

***更新：***

我刚刚登陆此链接[检测浏览器中的后退按钮单击，](https://stackoverflow.com/questions/6359327/detect-back-button-click-in-browser)但它对我不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:12:31.503

请解释您的问题，而不是您的解决方案。因为您将页面的可缓存性设置为无，所以浏览器将简单地重新发出对该页面的无条件请求。这与单击该页面的链接没有什么不同，并且不会被检测到。

如果您的问题是当有人重新访问页面时您不知道如何设置表单数据，您可以使用这样的会话（伪）：

```
if (!String.IsNullOrEmpty(Session["Username"]))
{
    UsernameTextbox.Text = Session["Username"];
} 
```

如果您想在单击该页面的链接时显示一个清晰的表单，您可以设置一个查询参数，例如`reset=true`，这将清除会话数据并显示一个空白表单。

# c# - like 使用参数的 npgsql 语句

> ID：13950279
> 
> 赞同：10
> 
> 时间：2012-12-19T10:29:06.837
> 
> 标签：c#, asp.net, npgsql

我有一个 postgresql 数据库，我想查询表“位置”以检索与用户输入的名称匹配的所有位置的名称。列名是“LocationName”。我正在使用带有 C# 的 ASP.net。

```
NpgsqlConnection con = new NpgsqlConnection(ConfigurationManager.ConnectionStrings["ConnString"].ToString());

NpgsqlCommand cmd = new NpgsqlCommand("Select * from \"Locations\" where \"LocationName\" LIKE \"%@loc_name%\"", con);

cmd.Parameters.AddWithValue("@loc_name", Location_Name);

NpgsqlDataReader reader = cmd.ExecuteReader(); 
```

我得到这个例外：

```
Npgsql.NpgsqlException: ERROR: 42703: column &quot;%((E'My place'))%&quot; does not exist 
```

我尝试在不使用 % 的情况下运行查询，但它不起作用。我也尝试过使用 + 和 & 如下所示，但这也不起作用：

```
string query = "Select \"LocationName\" from \"Locations\" where \"LocationName\" LIKE '%'+ :loc_name +'%'"; 
```

使用上面的行，我得到了这个异常：

```
Npgsql.NpgsqlException: ERROR: 42725: operator is not unique: unknown + unknown 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-19T10:35:21.477

你应该使用

```
NpgsqlCommand cmd = new NpgsqlCommand("Select * from \"Locations\" where \"LocationName\" LIKE @loc_name", con);
cmd.Parameters.AddWithValue("@loc_name", "%" + Location_Name + "%"); 
```

您插入了太多引号：Postgre 将双引号之间的字符串解释为字段/表名。让参数完成转义字符串工作

PS：要在 Postgre 中连接字符串，您应该使用`||`运算符，请参见[此处](http://www.postgresql.org/docs/9.1/static/functions-string.html)。所以你的最后一个查询应该是

```
string query = "Select \"LocationName\" from \"Locations\" where \"LocationName\" LIKE '%' || :loc_name || '%'"; 
```

# c++ - 如何将 QList 从 QML 传递到 C++/Qt？

> ID：13950280
> 
> 赞同：6
> 
> 时间：2012-12-19T10:29:07.717
> 
> 标签：c++, qt, qml, qt-quick

我正在尝试将`QList`整数从 QML 传递到 C++ 代码，但不知何故我的方法不起作用。使用以下方法会出现以下错误：

```
left of '->setParentItem' must point to class/struct/union/generic type
type is 'int *' 
```

高度赞赏解决问题的任何输入

下面是我的代码片段

**头文件**

```
Q_PROPERTY(QDeclarativeListProperty<int> enableKey READ enableKey) 

QDeclarativeListProperty<int> enableKey(); //function declaration
QList<int> m_enableKeys; 
```

**.cpp 文件**

```
QDeclarativeListProperty<int> KeyboardContainer::enableKey()
{
    return QDeclarativeListProperty<int>(this, 0, &KeyboardContainer::append_list);
}

void KeyboardContainer::append_list(QDeclarativeListProperty<int> *list, int *key)
{
    int *ptrKey = qobject_cast<int *>(list->object);
    if (ptrKey) {
        key->setParentItem(ptrKey);
        ptrKey->m_enableKeys.append(key);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T16:18:28.267

除了 QObject 派生的类型之外，您不能将 QDeclarativeListProperty（或 Qt5 中的 QQmlListProperty）与任何其他类型一起使用。所以 int 或 QString 永远不会工作。

如果您需要交换 QStringList 或 QList 或任何由 QML 支持的基本类型之一的数组，最简单的方法是在 C++ 端使用 QVariant，如下所示：

```
#include <QObject>
#include <QList>
#include <QVariant>

class KeyboardContainer : public QObject {
    Q_OBJECT
    Q_PROPERTY(QVariant enableKey READ   enableKey
               WRITE  setEnableKey
               NOTIFY enableKeyChanged)

public:
    // Your getter method must match the same return type :
    QVariant enableKey() const {
        return QVariant::fromValue(m_enableKey);
    }

public slots:
    // Your setter must put back the data from the QVariant to the QList<int>
    void setEnableKey (QVariant arg) {
        m_enableKey.clear();
        foreach (QVariant item, arg.toList()) {
            bool ok = false;
            int key = item.toInt(&ok);
            if (ok) {
                m_enableKey.append(key);
            }
        }
        emit enableKeyChanged ();
    }

signals:
    // you must have a signal named <property>Changed
    void enableKeyChanged();

private:
    // the private member can be QList<int> for convenience
    QList<int> m_enableKey;
}; 
```

在 QML 方面，只需影响一个 Number 的 JS 数组，QML 引擎会自动将其转换为 QVariant 以使其对 Qt 可理解：

```
KeyboardContainer.enableKeys = [12,48,26,49,10,3]; 
```

就这样 ！

# mysql - VB.NET 数据表到 Mysql

> ID：13950284
> 
> 赞同：0
> 
> 时间：2012-12-19T10:29:28.797
> 
> 标签：mysql, vb.net

我正在创建一个允许您管理各种数据的应用程序。该应用程序设计为在网络中工作，因此在多用户中工作。出于这个原因，我决定信任 Datatable。

我有一个由我创建的用于管理 MYSQL 数据库操作的类，但现在我仍然无法创建一个简化的过程来将数据表发送到 MySQL 数据库。目前我是如此

```
 Dim SQLStm As String
    'variable for sql query
    Dim SQLManager As New ER.DB.ERMysql

    For Each Riga In Datatable.Rows
        'example query
        SQLStm = "INSERT INTO test(Name,Phone)VALUES(Riga("Name"),Riga("Phone"))"
        Try
            Dim CMD As New MySqlCommand
            CMD.Connection = connection
            CMD.CommandText = SQLStm
            CMD.ExecuteNonQuery()
        Catch ex As Exception
        End Try
    Next

End Sub 
```

或浏览所有行并逐渐发送到数据库。有更好的方法来实现这一点吗？

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:39:47.590

我想说最好的方法是通过 XML。将数据表转换为 xml 格式并将其传递给接受 XML 的过程。这使该过程免于在数据表中的每一行运行一次，并且全部一次性完成。当前执行此操作的方式不能很好地扩展大型数据集，但 XML 的扩展性会好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-21T20:46:38.710

而是为每一行执行数据库插入，首先构建整个查询字符串，然后将其作为一个大的 INSERT 命令执行。它要快得多。

# javafx-2 - 在 JavaFx2 中添加 Javascript 函数

> ID：13950285
> 
> 赞同：0
> 
> 时间：2012-12-19T10:29:31.577
> 
> 标签：javafx-2

我在 javafx2 的 webview 中加载了 html 文件。`webEngine.executeScript("functionName()")`如果函数名称已在加载的 HTML 文件中可用，我们可以调用 javascript 函数。

现在我需要在页面中添加外部 javascript 文件/函数。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-30T17:34:29.887

使用 InputStream 从 URLConnection 读取外部文件，然后将流的内容添加到 StringBuilder 然后将它们保存在 executeScript 中。我认为这样它会起作用。

# freemarker - 在 Freemarker 中处理空值

> ID：13950289
> 
> 赞同：93
> 
> 时间：2012-12-19T10:29:45.090
> 
> 标签：freemarker

如何处理`null`Freemarker 中的值？`null`当数据中存在值时，我在模板中遇到一些异常。

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2014-12-23T04:46:46.637

从 freemarker 2.3.7 开始，您可以使用[以下语法](http://freemarker.org/docs/dgui_template_exp.html#dgui_template_exp_missing)：

```
${(object.attribute)!} 
```

或者，如果您想在属性为 时显示默认文本`null`：

```
${(object.attribute)!"default text"} 
```

* * *

## 回答 #2

> 赞同：109
> 
> 时间：2012-12-19T10:35:59.697

您可以使用`??`测试运算符：

这将检查对象的属性是否不为空：

```
<#if object.attribute??></#if> 
```

这将检查对象或属性是否不为空：

```
<#if (object.attribute)??></#if> 
```

资料来源：[FreeMarker 手册](https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_missing_test "自由标记手册")

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-08-05T15:12:35.103

我认为它以另一种方式工作

```
<#if object.attribute??>
   Do whatever you want....
</#if> 
```

如果`object.attribute`不为空，则将打印内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-10T19:23:14.630

如果您有问题，我想添加更多上下文，这就是我尝试过的。

```
<#if Recipient.account_type?has_content>
  … (executes if variable exists)
<#else>
  … (executes if variable does not exist)
</#if> 
```

这更像是 Javascript IF 和 ELSE 概念，我们要检查该值是否通过所需的逻辑链接。

[Freemarker 网站](https://freemarker.apache.org/docs/ref_builtins_string.html#ref_builtin_contains)

[其他参考：](https://support.messagegears.com/hc/en-us/articles/360057308532-Null-Values-in-FreeMarker)

场景：客户的 ID 和名称组合在一起，如**13242 Harish**，所以我们的利益相关者需要唯一的名称，所以我尝试了这个**${record.entity?keep_after(" ")}**并且它确实有效，但是，它只能在以下情况下工作你有空间，但是当客户没有空间和一个名字时，我不得不做一些 IF ELSE 条件来检查 Null 值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-27T12:54:17.413

在语句**`??`**末尾使用运算符。`<#if>`

此示例演示如何处理`null`Freemaker 模板中两个列表的值。

```
List of cars:
<#if cars??>
    <#list cars as car>${car.owner};</#list>
</#if>
List of motocycles:
<#if motocycles??>
    <#list motocycles as motocycle>${motocycle.owner};</#list>
</#if> 
```

# c - Clock_gettime 纳秒计算

> ID：13950290
> 
> 赞同：3
> 
> 时间：2012-12-19T10:29:48.973
> 
> 标签：c, linux, profiling

参考：[linux clock_gettime](http://linux.die.net/man/3/clock_gettime)

我找到了一个可以很好地获得处理时间的公式，但有些东西我不明白。请参阅下面的结果。

前 2 行只是在各自的列中显示论坛。

我只显示快速运行的 3 个结果。
有趣的部分在最后一行，为什么`5551 - 999896062`纳秒 = 18446744072709661105？
为什么`18446744072709661105+1/1E9`= 0.000109？

我认为正在进行一些影响结果的数据转换？

```
xx:      | t1.tv_sec |   | t1.tv_nsec |          | t2.tv_sec |   | t2.tv_nsec 
xx:      t2-t1(sec)      t2-t1(nsec)         (t2-t1(sec))+(t2-t1(nsec))/1E9

52291:   | 30437 |   | 999649886 |       | 30437 |   | 999759331 
52291:   0   109445          0.000109

52292:   | 30437 |   | 999772970 |       | 30437 |   | 999882416 
52292:   0   109446          0.000109

52293:   | 30437 |   | 999896062 |       | 30438 |   | 5551 
52293:   1   18446744072709661105        0.000109 
```

源代码：

```
int main() {
    struct timespec t1, t2;

    int i = 0;
    while(1) {
        clock_gettime(CLOCK_MONOTONIC, &t1);
            for(int j=0;j<25000;j++) { };
        clock_gettime(CLOCK_MONOTONIC, &t2);
        printf("%d: \t | %llu | \t | %lu | \t\t | %llu | \t | %lu \n", i, (unsigned long long) t1.tv_sec, t1.tv_nsec, (unsigned long long) t2.tv_sec, t2.tv_nsec);
        printf("%d: \t %llu \t %lu \t\t %lf\n", i, (unsigned long long) t2.tv_sec - t1.tv_sec, t2.tv_nsec - t1.tv_nsec, (t2.tv_sec - t1.tv_sec)+(t2.tv_nsec - t1.tv_nsec)/1E9);
        if ((t2.tv_sec - t1.tv_sec) == 1) break;
        i++;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T13:20:49.523

因为 5551 - 999896062 是某个负值，存储在 long 类型的临时变量中，但由于 %lu 转换说明符而被 printf 解释为“unsigned long”。

请注意，struct timespec 中的 tv_nsec 字段是 long 类型，而不是 unsigned long 类型。同样，在 Linux 和其他 Unix 系统上，time_t 是有符号整数类型的 typedef。所以摆脱代码中所有未签名的东西。

顺便说一句，减去两个 timespec 实例的方法是

```
 timespec diff(timespec start, timespec end)
{
        timespec temp;
        if ((end.tv_nsec - start.tv_nsec) < 0) 
        {
                temp.tv_sec = end.tv_sec - start.tv_sec - 1;
                temp.tv_nsec = 1000000000 + end.tv_nsec - start.tv_nsec;
        } 
        else 
        {
                temp.tv_sec = end.tv_sec - start.tv_sec;
                temp.tv_nsec = end.tv_nsec - start.tv_nsec;
        }
        return temp;
} 
```

# android - 如何在android中制作如下图所示的自定义网格视图

> ID：13950291
> 
> 赞同：1
> 
> 时间：2012-12-19T10:29:48.897
> 
> 标签：android, android-layout, gridview

![在此处输入图像描述](../Images/604ed2b5d907b68bdef79546c655a2e2.png)

我需要创建一个类似于 android 中的图像的界面。请帮我。非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:36:12.463

这个网格没有什么习惯。您可以将标准网格与 SimpleArrayAdapter 一起使用。不要忘记设置正确的列数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:33:36.233

你不是说你需要一个[TableLayout](http://developer.android.com/reference/android/widget/TableLayout.html)

# jakarta-ee - 如何将 RDF 上传到服务器而不将其存储在数据库中？

> ID：13950306
> 
> 赞同：0
> 
> 时间：2012-12-19T10:30:36.260
> 
> 标签：jakarta-ee, glassfish, temporary-files

在我们的应用程序中，我们必须将 RDF 文件上传到 Glassfish 应用程序服务器以推断它们并将它们加载到我们的图形数据库中。

为此，在上传后，我们首先将它们的原始内容存储到我们的图表中。这显然不是最优的，因为我们的图是 neo4j 的，经过优化以存储小对象（而不是包含 25 MB 字符串的节点）。

那么，要执行长任务（因此不在请求/响应周期内），如何将这些文件临时存储在 JavaEE6 服务器中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T07:23:04.443

通常的知识是在 JavaEE 中存储文件是不好的，因为对文件的访问本质上是非事务性的。

不幸的是，这是错误的：[XADisk](http://xadisk.java.net/)是一个 Java 库，允许在文件系统上进行事务访问（甚至允许 XA 事务）。使用它，在 JavaEE 事务中创建/读取/删除文件非常容易。

# algorithm - 与人工智能中的最佳优先搜索相关的问题是什么？

> ID：13950307
> 
> 赞同：8
> 
> 时间：2012-12-19T10:30:47.150
> 
> 标签：algorithm, prolog, artificial-intelligence, state-space

我知道一般问题包括局部最大值和高原，但是我很好奇是否还有与此特定搜索相关的问题以及克服这些问题的最佳行动方案是什么。

有人还可以给我一个例子，说明这个搜索适合使用哪种问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-19T11:54:17.710

**最佳优先搜索的问题：**

1.  这是贪婪的。在许多情况下，它会导致一个非常快速的解决方案（因为您开发的节点数量不会以指数方式增加，它会随着解决方案的深度线性增加！），但是它通常不会优化，因为您的启发式函数有一些错误并且有时会得到错误的答案，即下一个要探索的节点。
2.  还有一个无限分支的问题。假设您正在跟踪一个分支，其中深度节点`i`的启发式值为 `h(v_i) = 2^-i`. 你永远不会达到零，但贪婪的最佳优先将继续开发这些节点。
    例子：

    ```
     2
                           / \  
                          /   \
                         /     \
                        1      1.5
                        |       |
                       1/2      1
                        |       |
                       1/4      0
                        |
                       1/8
                        |
                       1/16
                        |
                       ... 
    ```

请注意，上面是[允许的启发式函数](http://en.wikipedia.org/wiki/Admissible_heuristic)，但是最好的第一次搜索永远不会得到解决方案，它会卡在无限分支中。

**解决方案：**

1.  为了克服它，我们可以使用统一算法（例如 Dijkstra 算法或用于未加权图的 BFS）
2.  您可以使用“最佳优先搜索”和 Dijkstra（称为[A* 算法](http://en.wikipedia.org/wiki/A*_search_algorithm)）的组合。
    A* 算法实际上是一个贪婪的最佳优先算法，但不是根据 选择，而是选择`h(v)`接下来要探索的节点`f(v) = h(v) + g(v)`（`g(v)`“到目前为止的成本”在哪里。算法是完整的（如果存在则找到解决方案）并且是最优的（找到“最佳”解决方案）如果给定一个[可接受的启发式函数](http://en.wikipedia.org/wiki/Admissible_heuristic)。

**何时使用最佳优先搜索：**

1.  如果你有一个完美的启发式（如`h*`文献中所表示的），最好的第一次搜索会找到一个最优的解决方案——而且速度很快。
2.  如果您不关心最佳解决方案，您只想快速找到一个解决方案 - 它通常可以解决问题（但您必须小心无限分支问题）。
3.  当我们使用 A* 时，我们实际上使用最佳优先搜索 - 但使用 on`f:V->R`而不是 on `h:V->R`。

# sql - 检索信息 sql 查询

> ID：13950308
> 
> 赞同：2
> 
> 时间：2012-12-19T10:30:47.557
> 
> 标签：sql

```
SELECT  *
FROM    EMPLOYEE a
        LEFT JOIN EMPLOYEE b
            ON a.Employee_ID <> b.Employee_ID
WHERE   a.employee_salary < b.employee_salary and a.Department_ID='30' 
```

您好，我想检索所有收入比部门 30 员工多的员工的信息

[数据库图像](https://www.dropbox.com/s/gqoatxyglgllapr/Untitled.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:36:04.943

```
SELECT  * FROM    EMPLOYEE 
where (Department_ID<>'30')
and 
 (
 employee_salary > 
  (select max(employee_salary) from EMPLOYEE  where  Department_ID='30')
 ) 
```

或者，如果您需要的员工收入超过所有部门 30，请使用 SUM 而不是 MAX。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:37:32.667

```
SELECT * fROM EMPLOYEE a where a.Department_ID!='30' 
and (a.employee_salary > (select max(b.employee_salary) 
from EMPLOYEE b where b.Department_ID='30')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T10:34:24.807

拆分问题将帮助我们：

*   **第一**：你需要知道部门 30 名员工赚了多少钱。
*   **第二**：拿比这个钱赚更多的员工。

最简单的方法是使用子查询进行查询。主查询检索员工比赚多`X`，子查询返回`X`。

**子查询** 部门 30 名员工挣多少钱？

```
Select employee_salary from employee where Department_ID='30' 
```

**带有子查询的主查询**： 收入超过这个钱的员工：

```
Select * from employee 
where employee_salary > ANY (
   Select employee_salary from employee where Department_ID='30'
) 
```

请注意，您可以在子查询运算符中使用`ANY`or ：`ALL`

*   `ALL`意味着您正在寻找的员工比收入超过`ALL`dpt 30 的员工。
*   `ANY`意味着您正在寻找的员工比收入超过`ANY`dpt 30 的员工。

# iphone - 在应用程序中获取短信统计信息

> ID：13950311
> 
> 赞同：3
> 
> 时间：2012-12-19T10:30:56.363
> 
> 标签：iphone, objective-c, ios, jailbreak

在我的应用程序中，我想获取从 iPhone 发送的短信总数。我的应用程序是针对 cydia 商店的越狱设备，目前我正在使用 xcode 4.5.2 和 iOS 6。

当应用程序打开时，我想获取从 iPhone 消息日志发送的总 SMS。我们可以获取特定日期发送的总短信吗？我在 cydia 商店中看到了一些应用程序，它们维护着 SMS 历史日志，例如“SMS Stats”、“SMS Counter”。是否有任何第三方框架来获取短信计数？我已经在很多方面进行了搜索，但我没有找到解决方案。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:36:38.450

消息保存在一个名为的 SQLite 数据库中`sms.db`

您可以对其进行查询以收集您想要的信息。

在[theiphonewiki](http://theiphonewiki.com/wiki/index.php?title=IMessage#Main_database_file)获得了一些关于数据库的信息，但我不确定它是否已更新到 iOS 6，您可能只需要使用一些 SQLite 资源管理器来调查数据库，以确定您需要什么。

# java - 可能导致精度或幅度损失的 Java 隐式强制转换？

> ID：13950313
> 
> 赞同：9
> 
> 时间：2012-12-19T10:31:01.790
> 
> 标签：java, compiler-errors, precision

我最近[了解到](https://stackoverflow.com/q/13949840/11545)，在将一些 Java 代码转换为 C# 时，Java 的增量运算符 '+=' 隐式转换为 LHS 的类型：

```
int i = 5;
long lng = 0xffffffffffffL;  //larger than Int.MAX_VALUE
i += lng;                    //allowed by Java (i==4), rejected by C# 
```

相当于：（[这里有详细信息](https://stackoverflow.com/q/13949840/11545)）

```
int i = 0;
long lng = 0xffffffffffffL;
i = (int)(i + lng); 
```

从而默默地造成损失幅度的机会。

C# 在编译时对此更加认真：
`Cannot convert source type long to target type int.`

Java是否允许其他类似的情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T16:11:50.727

long 可以提升为 float 或 double，这会导致准确性下降：

```
public static void main(String[] args) {
    float f = Long.MAX_VALUE;
    double d = Long.MAX_VALUE;

    System.out.println(Long.MAX_VALUE);
    System.out.println(f);
    System.out.println(d);

} 
```

印刷

```
9223372036854775807
9.223372E18
9.223372036854776E18 
```

不过，我怀疑 C# 也是这样做的。

除了您已经提到的复合赋值运算符之外，我相信这些都是隐式转换可以更改值的所有情况。

# objective-c - 关闭 modalvew 控制器和父视图

> ID：13950314
> 
> 赞同：0
> 
> 时间：2012-12-19T10:31:04.630
> 
> 标签：objective-c, xcode

我正在尝试从这样的视图中打开模态视图，

```
SignupViewController *signUpView = [[SignupViewController alloc] initWithNibName:@"SignupViewController" bundle:nil];
[signUpView setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
self.parentViewController.view.transform = CGAffineTransformMakeScale(1.3, 1.3);
self.parentViewController.view.alpha = 0;
[UIView animateWithDuration:.35 animations:^{self.parentViewController.view.alpha  = 1.0; self.parentViewController.view.transform = CGAffineTransformMakeScale(1, 1);}];
[self presentModalViewController:signUpView animated:YES]; 
```

登录后，我正在关闭模态视图并重定向到另一个视图，但父视图仍然存在，

```
[self dismissViewControllerAnimated:YES completion:^{
ToolsViewController *gototoolpage = [[ToolsViewController alloc] initWithNibName:@"ToolsViewController" bundle:nil];
[self.navigationController pushViewController:gototoolpage animated:YES];
} 
```

如何也关闭父视图。任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:58:12.010

你的代码看起来有点混乱。引用 parentViewController 的目的是什么？检查文档 - 它是*包含*viewController，而不是*先前*或正在*呈现的*viewController。在 NavigationController 上下文中，这将是 UINavigationController。在模态视图上下文中没有 parentViewController，但有一个*呈现*ViewController。我不确定您对 self.parentViewController 的所有调用的意图。

在任何情况下，您都应该通过委托将关闭请求发送回呈现的 viewController，以便完全清楚 pushViewController 消息从哪里传递到哪里。

在您的 signUpViewController 的头文件中声明一个协议：

```
@protocol SignUpViewControllerDelegate
- (void) dissmissSignUpVC;
@end 
```

然后在你的presentingViewController中，之后

```
SignupViewController *signUpView = [[SignupViewController alloc] initWithNibName:@"SignupViewController" bundle:nil]; 
```

添加

```
[signUpView setDelegate:self]; 
```

并使用您现在在完成块中拥有的相同代码实现委托方法：

```
- (void) dissmissSignUpVC {

    ToolsViewController *gototoolpage = [[ToolsViewController alloc] 
            initWithNibName:@"ToolsViewController" bundle:nil];
    [self.navigationController pushViewController:gototoolpage animated:YES]; 
```

}

在 signUpView 调用委托的方法来解除：

```
[[self delegate] dissmissSignUpVC]; 
```

注意那些堆叠的动画，我怀疑只有第一个会被执行（`gototollpage animated:YES`也可能是`gototoolpage animated:NO`）

也许无论如何你应该重新考虑你的逻辑。我想如果你对视图控制器进行这种底层操作，用户可能会有一个令人困惑的体验。最好有一个 UI 控件供用户导航到 toolsViewController 以便他们了解自己在哪里？

# java - 如何使字母“A”在 Lucene 的 StandardAnalyzer 中成为例外？

> ID：13950318
> 
> 赞同：2
> 
> 时间：2012-12-19T10:31:10.410
> 
> 标签：java, android, lucene, lexical-analysis, standardanalyzer

我使用 Lucene 在 Android 中创建了一个医学词典。单词和定义是丹麦语，我`StandardAnalyzer`用来索引和搜索条目。这个想法是，当我单击 my 中的一个条目时，会显示`ListView`另一个条目，`Activity`顶部是单词，下方是定义。

除了条目之外，字典的工作方式与预期完全一致`A.`。`A.`当我在我的 中单击时`ListView`，下一个`Activity`只显示屏幕的背景颜色——没有单词、没有定义、没有任何类型的文本。

我的猜测是在索引过程`StandardAnalyzer`中将字母视为停用词，因为for 条目正确显示。我怎样才能解决这个问题？`A``Activity``V.`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T10:39:39.373

您可以将 a`StandardAnalyzer`与一组不同的停用词一起使用。

对于默认停用词，请参阅`StandardAnalyzer.STOP_WORDS_SET`，它是从 复制而来[`StopAnalyzer.ENGLISH_STOP_WORDS_SET`](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.lucene/lucene-core/3.5.0/org/apache/lucene/analysis/StopAnalyzer.java#StopAnalyzer.0ENGLISH_STOP_WORDS_SET)。

```
new StandardAnalyzer(Version.LUCENE_35, stopWordsSet); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T04:56:25.290

我最终使用了`DanishAnalyzer`. 反正这样可能更好。

# android - 在 Android 应用程序中，将 Phonegap 2.1.0 升级到 2.2.0 后，子浏览器无法正常工作

> ID：13950326
> 
> 赞同：0
> 
> 时间：2012-12-19T10:31:44.053
> 
> 标签：android, cordova, push-notification, childbrowser

我使用 Android 2.2 和 Phonegap 2.1.0 开发了 android 移动应用程序，并使用 Android 2.3.4 移动设备测试了该应用程序，应用程序运行良好。

在我的应用程序中，我使用子浏览器和推送通知。

后来我的同事使用Android 4.1.2 Mobile 测试了该应用程序，他说“Geolocation not working”，然后他告诉我，将Phonegap 升级到2.2.0 后，问题解决了。

所以，我将 Phonegap 从 2.1.0 升级到 2.2.0，但现在我从子浏览器和推送通知中收到错误消息。

## 子浏览器出错

```
Uncaught TypeError: Cannot call method 'addConstructor' of undefined at file:///android_asset/www/resources/js/ChildBrowser.js:102

102 line : gap.addConstructor(function () { ..... 
```

## 推送通知错误

```
Uncaught ReferenceError: cordova is not defined at file:///android_asset/www/resources/js/PushNotification.js:260

260 line : cordova.addConstructor(function () { ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T16:56:38.997

使用最新版本的 ChildBrowser：

[https://github.com/phonegap/phonegap-plugins/tree/master/Android/ChildBrowser/2.0.0](https://github.com/phonegap/phonegap-plugins/tree/master/Android/ChildBrowser/2.0.0)

# parsing - WSDL 错误：（Salesforce 集成）

> ID：13950333
> 
> 赞同：0
> 
> 时间：2012-12-19T10:31:58.747
> 
> 标签：parsing, soap, wsdl, salesforce, apex-code

我目前正在尝试使用 SOAP API 集成 ExpressionEngine 和 Salesforce。我有一个有效的 WSDL，但是当我尝试解析 WSDL 并在 Salesforce 中创建 APEX 类时，它最终会引发一些奇怪的错误。我在以下销售人员论坛链接上对此进行了大量发布：http: [//boards.developerforce.com/t5/Apex-Code-Development/URGENT-WSDL-Issues-Error-Failed-to-parse-wsdl-type-not -指定/td-p/548983](http://boards.developerforce.com/t5/Apex-Code-Development/URGENT-WSDL-Issues-Error-Failed-to-parse-wsdl-type-not-specified/td-p/548983)

它最初抛出一个错误，说 name 属性不能为空，所以我将 name="salesforce" 添加到节点。之后它开始抛出一个类型错误：

```
Error: Failed to parse wsdl: type not specified for attribute: salesforce 
```

我试图对此进行调试，但实际上并没有发现以下声明有什么问题：

```
<xsd:attribute ref="SOAP-ENC:arrayType" wsdl:arrayType="tns:Associative[]" name="salesforce"/> 
```

完整的 WSDL 文档可以在上面的链接中找到。任何帮助都将不胜感激，因为这不是我的特定专业领域，而且我的最后期限即将到来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:49:40.133

WSDL 使用 rpc/encoded 交互样式，Salesforce WSDL2Apex 工具不支持这种方式。您必须手动创建/解析对此 API 的请求。

# java - 如何让安卓设备振动？频率不同？

> ID：13950338
> 
> 赞同：563
> 
> 时间：2012-12-19T10:32:05.123
> 
> 标签：java, android, kotlin, vibration, android-vibration

我写了一个Android应用程序。现在，我想让设备在某个动作发生时振动。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1087
> 
> 时间：2012-12-19T10:33:24.207

尝试：

```
import android.os.Vibrator;
...
Vibrator v = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
// Vibrate for 500 milliseconds
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
    v.vibrate(VibrationEffect.createOneShot(500, VibrationEffect.DEFAULT_AMPLITUDE));
} else {
    //deprecated in API 26 
    v.vibrate(500);
} 
```

**笔记：**

不要忘记在 AndroidManifest.xml 文件中包含权限：

```
<uses-permission android:name="android.permission.VIBRATE"/> 
```

* * *

## 回答 #2

> 赞同：682
> 
> 时间：2013-06-12T13:28:10.563

# 授予振动许可

在你开始实现任何振动代码之前，你必须给你的应用程序振动的权限：

```
<uses-permission android:name="android.permission.VIBRATE"/> 
```

确保将此行包含在您的 AndroidManifest.xml 文件中。

# 导入振动库

大多数 IDE 会为您执行此操作，但如果您的 IDE 没有，请使用以下导入语句：

```
 import android.os.Vibrator; 
```

在您希望发生振动的活动中确保这一点。

# 如何在给定时间内振动

在大多数情况下，您会希望在预定的短时间内振动设备。您可以通过使用该`vibrate(long milliseconds)`方法来实现这一点。这是一个简单的例子：

```
// Get instance of Vibrator from current Context
Vibrator v = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);

// Vibrate for 400 milliseconds
v.vibrate(400); 
```

就是这样，简单！

# 如何无限振动

您可能希望设备无限期地继续振动。为此，我们使用以下`vibrate(long[] pattern, int repeat)`方法：

```
// Get instance of Vibrator from current Context
Vibrator v = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);

// Start without a delay
// Vibrate for 100 milliseconds
// Sleep for 1000 milliseconds
long[] pattern = {0, 100, 1000};

// The '0' here means to repeat indefinitely
// '0' is actually the index at which the pattern keeps repeating from (the start)
// To repeat the pattern from any other point, you could increase the index, e.g. '1'
v.vibrate(pattern, 0); 
```

当您准备好停止振动时，只需调用该`cancel()`方法：

```
v.cancel(); 
```

# 如何使用振动模式

如果您想要更定制的振动，您可以尝试创建自己的振动模式：

```
// Get instance of Vibrator from current Context
Vibrator v = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);

// Start without a delay
// Each element then alternates between vibrate, sleep, vibrate, sleep...
long[] pattern = {0, 100, 1000, 300, 200, 100, 500, 200, 100};

// The '-1' here means to vibrate once, as '-1' is out of bounds in the pattern array
v.vibrate(pattern, -1); 
```

# 更复杂的振动

有多个 SDK 可提供更全面的触觉反馈。我用于特殊效果的一个是[Immersion 的 Android 触觉开发平台](https://www.immersion.com/products-services/software-development-kit-for-mobile-games/)。

# 故障排除

如果您的设备不会振动，请首先确保它可以振动：

```
// Get instance of Vibrator from current Context
Vibrator v = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);

// Output yes if can vibrate, no otherwise
if (v.hasVibrator()) {
    Log.v("Can Vibrate", "YES");
} else {
    Log.v("Can Vibrate", "NO");
} 
```

其次，请确保您已授予您的应用程序振动权限！回到第一点。

* * *

## 回答 #3

> 赞同：95
> 
> 时间：2017-08-10T05:37:42.833

**更新 2017 振动（间隔）方法已弃用 Android-O（API 8.0）**

要支持所有 Android 版本，请使用此方法。

```
// Vibrate for 150 milliseconds
private void shakeItBaby() {
    if (Build.VERSION.SDK_INT >= 26) {
        ((Vibrator) getSystemService(VIBRATOR_SERVICE)).vibrate(VibrationEffect.createOneShot(150, VibrationEffect.DEFAULT_AMPLITUDE));
    } else {
        ((Vibrator) getSystemService(VIBRATOR_SERVICE)).vibrate(150);
    }
} 
```

**科特林：**

```
// Vibrate for 150 milliseconds
private fun shakeItBaby(context: Context) {
    if (Build.VERSION.SDK_INT >= 26) {
        (context.getSystemService(VIBRATOR_SERVICE) as Vibrator).vibrate(VibrationEffect.createOneShot(150, VibrationEffect.DEFAULT_AMPLITUDE))
    } else {
        (context.getSystemService(VIBRATOR_SERVICE) as Vibrator).vibrate(150)
    }
} 
```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2014-05-09T14:18:57.947

上面的答案很完美。但是，我想在单击按钮时准确地振动我的应用程序两次，而这里缺少这个小信息，因此为像我这样的未来读者发布。:)

我们必须按照上面提到的方式进行操作，唯一的变化是振动模式如下，

```
long[] pattern = {0, 100, 1000, 300};
v.vibrate(pattern, -1); //-1 is important 
```

这将准确地振动**两次**。我们已经知道

1.  0代表*延迟*
2.  100表示​​第一次*振动100ms*
3.  接下来是1000 毫秒的*延迟*
4.  然后再次*振动300 毫秒*

可以继续交替提及延迟和振动（例如 0、100、1000、300、1000、300 表示 3 次振动等等），但请记住@Dave 的话，负责任地使用它。:)

另请注意，*重复*参数设置为 -1，这意味着振动将**完全按照模式中提到的方式**发生。:)

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2019-10-15T20:06:50.830

## 未经许可振动

如果您想简单地振动设备一次以提供有关用户操作的反馈。您可以使用`performHapticFeedback()`a 的功能`View`。这不需要`VIBRATE`在清单中声明的​​权限。

在项目的 Utils.kt 等一些通用类中使用以下函数作为顶级函数：

```
/**
 * Vibrates the device. Used for providing feedback when the user performs an action.
 */
fun vibrate(view: View) {
    view.performHapticFeedback(HapticFeedbackConstants.LONG_PRESS)
} 
```

然后在您的任何地方使用它`Fragment`或`Activity`如下所示：

```
vibrate(requireView()) 
```

就那么简单！

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2013-12-07T13:28:09.307

在我的第一次实施中，我很难理解如何做到这一点 - 确保您具备以下条件：

1）您的设备支持振动（我的三星平板电脑不工作，所以我不断重新检查代码 - 原始代码在我的 CM 触摸板上完美运行

2）您已在 AndroidManifest.xml 文件中的应用程序级别上方声明，以授予代码运行权限。

3) 已将以下两项与其他导入一起导入您的 MainActivity.java：import android.content.Context; 导入android.os.Vibrator；

4）调用你的振动（已经在这个线程中广泛讨论过）——我在一个单独的函数中做了它，并在其他点的代码中调用它——取决于你想用什么来调用你可能需要图像的振动（[Android：长按按钮 -> 执行操作](https://stackoverflow.com/questions/4402740/android-long-click-on-a-button-perform-actions)）或按钮侦听器，或 XML 中定义的可点击对象（可[点击图像 - android](https://stackoverflow.com/questions/4785544/clickable-image-android)）：

```
 public void vibrate(int duration)
 {
    Vibrator vibs = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
    vibs.vibrate(duration);    
 } 
```

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2019-10-15T16:42:10.073

## Kotlin 更新以提高类型安全性

将它用作项目的某些通用类中的顶级函数，例如 Utils.kt

```
// Vibrates the device for 100 milliseconds.
fun vibrateDevice(context: Context) {
    val vibrator = getSystemService(context, Vibrator::class.java)
    vibrator?.let {
        if (Build.VERSION.SDK_INT >= 26) {
            it.vibrate(VibrationEffect.createOneShot(100, VibrationEffect.DEFAULT_AMPLITUDE))
        } else {
            @Suppress("DEPRECATION")
            it.vibrate(100)
        }
    }
} 
```

然后在代码中的任何位置调用它，如下所示：

```
vibrateDevice(requireContext()) 
```

## 解释

使用`Vibrator::class.java`比使用`String`常量更安全。

我们使用 来检查`vibrator`可空性`let { }`，因为如果振动不适用于设备，则`vibrator`将是`null`。

可以在子句中禁止弃用`else`，因为警告来自较新的 SDK。

我们不需要在运行时请求许可来使用振动。但我们需要将其声明`AndroidManifest.xml`如下：

```
<uses-permission android:name="android.permission.VIBRATE"/> 
```

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2019-04-11T07:13:04.190

振动**模式/波浪**：

```
import android.os.Vibrator;
...
// Pause for 500ms, vibrate for 500ms, then start again
private static final long[] VIBRATE_PATTERN = { 500, 500 };

mVibrator = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);

if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
    // API 26 and above
    mVibrator.vibrate(VibrationEffect.createWaveform(VIBRATE_PATTERN, 0));
} else {
    // Below API 26
    mVibrator.vibrate(VIBRATE_PATTERN, 0);
} 
```

**加**

必要的许可`AndroidManifest.xml`：

```
<uses-permission android:name="android.permission.VIBRATE"/> 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2016-11-18T06:02:35.107

```
<uses-permission android:name="android.permission.VIBRATE"/> 
```

应添加内部`<manifest>`标签和外部`<application>`标签。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2015-07-01T02:45:28.307

上面的答案非常正确，但我给出了一个简单的步骤：

```
 private static final long[] THREE_CYCLES = new long[] { 100, 1000, 1000,  1000, 1000, 1000 };

  public void longVibrate(View v) 
  {
     vibrateMulti(THREE_CYCLES);
  }

  private void vibrateMulti(long[] cycles) {
      NotificationManager notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE); 
      Notification notification = new Notification();

      notification.vibrate = cycles; 
      notificationManager.notify(0, notification);
  } 
```

然后在你的 xml 文件中：

```
<button android:layout_height="wrap_content" 
        android:layout_width ="wrap_content" 
        android:onclick      ="longVibrate" 
        android:text         ="VibrateThrice">
</button> 
```

这是[最简单](http://programondaspot.blogspot.com/2015/06/simple-android-vibration-application.html)的方法。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2016-11-29T08:47:54.637

我使用以下 utils 方法：

```
public static final void vibratePhone(Context context, short vibrateMilliSeconds) {
    Vibrator vibrator = (Vibrator) context.getSystemService(Context.VIBRATOR_SERVICE);
    vibrator.vibrate(vibrateMilliSeconds);
} 
```

在 AndroidManifest 文件中添加以下权限

```
<uses-permission android:name="android.permission.VIBRATE"/> 
```

如果您希望使用上面建议的不同类型的振动（模式/不确定），您可以使用重载方法。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-05-12T06:42:21.443

用这个：

```
import android.os.Vibrator;
     ...
     Vibrator v = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
     // Vibrate for 1000 milliseconds
     if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
            v.vibrate(VibrationEffect.createOneShot(1000,VibrationEffect.DEFAULT_AMPLITUDE));
     }else{
     //deprecated in API 26 
            v.vibrate(1000);
     } 
```

笔记：

不要忘记在 AndroidManifest.xml 文件中包含权限：

```
<uses-permission android:name="android.permission.VIBRATE"/> 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2019-04-11T07:49:00.650

您可以振动设备及其工作

```
 Vibrator v = (Vibrator) context.getSystemService(Context.VIBRATOR_SERVICE);
           v.vibrate(100); 
```

需要权限，但不需要运行时权限

```
<uses-permission android:name="android.permission.VIBRATE"/> 
```

# java - 获取远程文件的修改日期

> ID：13950342
> 
> 赞同：2
> 
> 时间：2012-12-19T10:32:09.617
> 
> 标签：java, android, httpconnection, last-modified

有没有办法获得[这个文件](http://www.poznan.pl/featureserver/featureserver.cgi/mpk_linie)的修改日期？

我想每天检查数据并仅在发生更改时才下载，我尝试过`HttpURLConnection`但`con.getHeaderFields()`没有结果：

> {null=[HTTP/1.1 200 OK], Access-Control-Allow-Origin=[*], Age=[158], Cache-Control=[max-age=7200], Connection=[close], Content-Length =[235409]，内容类型=[文本/纯文本]，日期=[格林威治标准时间 2012 年 12 月 19 日星期三 10:00:52]，过期=[格林威治标准时间 2012 年 12 月 19 日星期三 11:58:13]，服务器=[ Apache/2]，X-Android-Received-Millis=[1355911252001]，X-Android-Sent-Millis=[1355911251975]}

**有没有更好的方法来获取 md5 哈希并将其与本地文件进行比较？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T10:36:04.523

不，没有通用的方法来获取 URL 的修改日期。计算 HTTP 响应正文的 MD5 哈希并将其与本地文件进行比较是最好的方法。

# java - 已检测到内存泄漏但由于哈希映射条目令人困惑而无法理解确切原因？

> ID：13950346
> 
> 赞同：2
> 
> 时间：2012-12-19T10:32:22.163
> 
> 标签：java, memory-leaks, jvm

我正在使用 eclipse MAT 来分析我的应用程序的堆转储。这将一个类显示为泄漏嫌疑人。一个实例变量被声明为静态哈希映射，它负责每小时数千个条目。在可疑类的支配树视图中，有时会找到条目值，例如

```
hashmap$entry->classname->value 
```

但大多数时候就像

```
hashmap$entry->hashmap$entry->....->classname->value 
```

在这种情况下，最上面的`hash$mapp`条目显示 20% 的消耗。较低的条目以此类推。`hashmap$entry`与类名相关联的消耗较少，不能`hashmap$entry`上中扩展。

我很困惑这是什么意思？任何人都可以解释一下或建议任何可以解释这些事情的文件吗？在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:46:58.910

Java HashMap 类有一个内部数据结构Entry。如果您向地图添加一个条目（通过 put()），它将创建一个包含您的键/值对的条目。

如果添加具有相同散列的第二个键，则条目结构被链接。我想一遍又一遍地添加相同的条目，但是为密钥创建了新对象，从而导致大量链接。

您是否看到地图键和值中的对象类型是什么？

# objective-c - NSBlockOperation 的粒度状态

> ID：13950349
> 
> 赞同：4
> 
> 时间：2012-12-19T10:32:38.463
> 
> 标签：objective-c, nsoperationqueue, nsnotifications, nsblockoperation

我已经扩展`NSOperationQueue`以允许添加`NSBlockOperation`特定`NSString`的作为标识符。

标识符值保存在`NSMutableArray`作为注册表的服务中。这就是我实现注册表的方式。

```
-(void)addOperation:(NSOperation *)operation withID:(NSString*)operationID 
{
    @synchronized(self.queueReference) 
    {
        [self.queueReference addObject:operationID]; // <-- just a mutable array
    }

    [operation setCompletionBlock:^(){
        @synchronized(self.queueReference) {
            [self.queueReference removeObject:operationID];
        }
    }];

    [self addOperation:operation];  
} 
```

基本上，我添加了一个完成块，该块在该特定操作完成时清理注册表。

但是，虽然这可行，但我需要向队列添加更多粒度。

我只将队列与块操作一起使用，并且在块执行期间，我可能会`NSNotification`根据执行的方式向侦听器发送不同的消息。

我试图实现的目标：

调用者尝试将`NSBlockOperation`带有标识符的特定添加到队列中。如果队列已经有这样的标识符，就不要添加块，并且调用类将自己设置为侦听器。

什么不见​​了 ？检查标识符是不够的，可能存在`NSBlockOperation`已经调度`NSNotification`但尚未调用完成块的情况。

所以调用者类询问队列，这表示标识符存在于注册表中，调用者错误地将自己设置为监听一个永远不会到达的通知，因为它已经被发送了。

相反的情况是：调用者询问队列，它说'标识符在注册表中'但是`NSNotification`被发送了。来电者`NSBlockOperation`排队。

注册表的检查是通过一个简单的方法进行的：

```
-(BOOL)hasOperationWithID:(NSString*)operationID 
{
    @synchronized(self.queueReference) 
    {
        return [self.queueReference containsObject:operationID];
    }
} 
```

但在这一点上，我对如何扩展这种方法不太了解。我正在编写的代码是一种“学术”，它没有任何特定目的，只是我在尝试实验。因此我在代码中有很大的灵活性。但这对我来说是一个相当新的主题，所以请尽可能具体地说明建议实施的任何缺点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:53:22.213

看起来您当前的系统具有三个基本事件：

*   操作被添加到队列中
*   操作在执行时发送通知
*   调用操作完成块

除非队列本身明确地侦听任何`NSNotifications`可能由块发送的内容，否则它无法知道它们是否已经发生。*但*即使它确实监听，`NSNotifications`调用观察者的顺序也是不确定的。换句话说，即使队列监听通知并将其回调与入队/出队操作联锁，它可能（并且最终）仍然为时已晚，另一个客户端开始监听该通知`NSNotification`，并且您会错误地拒绝操作。

考虑这个替代方案：不要使用完成块来管理标识符列表，而是使用通知本身——让队列句柄发送通知。换句话说，让我们摆脱第三个事件，让通知发送为标识符列表维护做双重职责。我想出的最简单的方法如下：

标题：

```
//
//  SONotifyingOperationQueue.h
//  NotifyingOpQueue
//

typedef void (^SOSendNotificationBlock)(NSDictionary* userInfo);
typedef void (^SONotifyingBlock)(SOSendNotificationBlock sendNotificationBlock);

@interface SONotifyingOperationQueue : NSOperationQueue

- (BOOL)addOperationForBlock:(SONotifyingBlock)block withNotificationName:(NSString*)notificationName;

@end 
```

执行

```
//
//  SONotifyingOperationQueue.m
//  NotifyingOpQueue
//

#import "SONotifyingOperationQueue.h"

@implementation SONotifyingOperationQueue
{
    NSMutableSet* _names;
}

- (BOOL)addOperationForBlock: (SONotifyingBlock)block withNotificationName: (NSString*)notificationName
{
    notificationName = [[notificationName copy] autorelease];

    BOOL shouldAdd = NO;
    @synchronized(self)
    {
        _names = _names ? : [[NSMutableSet alloc] init];

        if (![_names containsObject: notificationName])
        {
            [_names addObject: notificationName];
            shouldAdd = YES;
        }
    }

    if (shouldAdd)
    {
        NSBlockOperation* blockOp = [[[NSBlockOperation alloc] init] autorelease];

        __block SONotifyingOperationQueue* blockSelf = self;

        SOSendNotificationBlock notificationBlock = ^(NSDictionary* userInfo){
            @synchronized(blockSelf)
            {
                [blockSelf->_names removeObject: notificationName];
                // Sending the notification from inside the @synchronized makes it atomic
                // with respect to enqueue operations, meaning there can never be a missed
                // notification that could have been received.
                [[NSNotificationCenter defaultCenter] postNotificationName: notificationName object: blockSelf userInfo: userInfo];
            }
        };

        dispatch_block_t executionBlock = ^{
            block(notificationBlock);
        };

        [blockOp addExecutionBlock: executionBlock];
        [self addOperation: blockOp];
    }

    return shouldAdd;
}

- (void)dealloc
{
    [_names release];
    [super dealloc];
}

@end 
```

这种方法对您的原始方法进行了一些更改。首先，这里的 API 添加了块而不是`NSOperations`. 你可以用一个子类做同样的事情`NSOperation`，但它会更多的代码，并且不会改变整体模式。它还合并了标识符和通知名称的概念。如果一个操作可以发送多个不同的`NSNotifications`，如果不进行修改，这将无法正常工作，但同样，整体模式将是相同的。此模式的重要特征是您的 id/name 检查现在与发送通知本身互锁，提供了强有力的保证，如果有人向队列添加新块/操作，以及具有相同 id/name 的另一个操作*尚未*触发通知，不会添加新操作，*已经*被触发，那么即使前面的块还没有完成，它也会被添加。

如果在`NSOperation`这里拥有对象很重要，您还可以让这里的方法返回它为提供的块创建的操作。

HTH。

# java - 使用 Apache Commons CLI 获取任意键/值参数

> ID：13950351
> 
> 赞同：0
> 
> 时间：2012-12-19T10:32:40.810
> 
> 标签：java, apache-commons-cli

我正在使用的框架（如有必要可以更改，但宁愿不这样做）正在使用 Apache Commons CLI。我的应用程序需要获取一系列定义明确的参数，但在某些情况下还需要接受一系列键/值对。这些最终将被注入到应用程序启动的 Spring 上下文中。

关于使用 Commons CLI 将一系列键/值对作为一个字符串选项的最佳方式的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:08:55.660

我可能会通过[CommandLine.getArgs()](http://commons.apache.org/cli/api-release/org/apache/commons/cli/CommandLine.html#getArgs%28%29)将它们作为附加的任意字符串处理。然后，您仍然可以定义所有默认选项并在之后解析键/值对。

# sql - 插入数据时使用 Rowlock 有帮助..？

> ID：13950354
> 
> 赞同：2
> 
> 时间：2012-12-19T10:32:52.983
> 
> 标签：sql, sql-server-2008-r2, blocking, query-hints

将数据插入表时，我想在 sql server 中使用 ROWLOCK 选项。它是否有任何帮助。它会帮助我减少数据库中的阻塞吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:45:08.347

Using ROWLOCK is a hint to the SQL Server query optimizer that you know better than it does about this SQL query. It basically says lock the table/view rows affected by the FROM clause of your query rather than escalating to a page or table lock.

If applied by an experienced developer or administrator, it *might* help with blocking in very specific circumstances. But in general I would leave the locking strategy up to the query optimizer unless you've clearly identified that locking isn't being done efficiently for a specific query.

There is a [good article on lock escalation](http://blogs.msdn.com/b/sqlserverstorageengine/archive/2006/05/17/lock-escalation.aspx) for SQL Server 2005, though I believe there have been some changes in SQL Server 2008\. There is a [decent article on locking in SQL Server 2008](http://msdn.microsoft.com/en-us/library/ms190615%28v=sql.105%29.aspx).

# java - 安卓应用程序的数据托管

> ID：13950356
> 
> 赞同：0
> 
> 时间：2012-12-19T10:32:58.220
> 
> 标签：java, android, hosting

我想创建一个 android 应用程序，它将从 Internet 获取故事（可能是 html 或文本）文件。我想知道在哪里可以托管这些文件（付费服务没问题）。

用户应该能够搜索故事、评分和选项，例如 mostread 和 NEW..etc

是否有任何预定义的 Web 服务可用于这种目的？

如果否，那么我应该熟悉哪些技术才能在普通的 Web 服务器中实现这一点。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:43:32.520

我建议您从共享虚拟主机开始。从每月 5 美元起，共享主机优惠通常具有以下优势：

*   无需自己设置linux系统、Apache和MySQL服务器
*   cPanel 管理
*   支持您首选的服务器端语言：PHP、Python（不如 PHP 常见）等。
*   迁移到另一台主机非常简单

编程语言+框架的选择取决于你的品味和经验。两个非常流行的选项是 PHP/Code Igniter 和 Python/Django。

当然，如果流量变得很大，或者如果您已经期望非常快速的增长，您也可以考虑一个可扩展的解决方案（共享甚至专用托管都不是）。亚马逊、谷歌和微软在云中提供这种服务。

根据我使用 Amazon S3 的个人经验，在容器中设置 Web 服务比使用传统的 Web 主机要耗时得多。除非您的流量预测超过数十或数百次点击/秒，否则我不会推荐它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:16:48.917

如果您想创建自己的服务，请查看 Google App Engine (GAE)。

*   启用 Java 部署（无需使用 PHP、Pythone 等进行编程）
*   可扩展（几乎每个移动应用程序都有可能获得 100 万用户）
*   免费配额（免费开始）
*   与 Google 服务和工具的良好集成（GWT 即）

缺点：

*   没有选项可以（轻松）将您的解决方案迁移到其他服务。
*   没有准备好安装应用程序（论坛等）。

# iphone - 如何检测iphone中特定声音的声音频率？

> ID：13950358
> 
> 赞同：2
> 
> 时间：2012-12-19T10:33:00.570
> 
> 标签：iphone, ios, signal-processing

我正在做一个我想检测声音频率的应用程序。如何检测特定声音（如狗的声音）的频率？有人有教程或一些示例代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:19:54.030

检测单个频率，甚至计算单个 FFT，都不是区分狗叫声和其他相同音量的常见声音的可靠方法。

可能有用的是使用 MFCC 的声音指纹分析，然后是针对足够大的“狗”声音数据库进行统计模式匹配。一些指向所需信号处理类型的指针可能会在此处得到解答：[音乐识别和信号处理](https://stackoverflow.com/questions/2068286/music-recognition-and-signal-processing)

这是比任何简短教程更适合多个大学教科书章节的重要内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:39:02.107

To detect the frequency, you can use a pitch detection algorithm like FFT.

Learn more here: [http://en.wikipedia.org/wiki/Pitch_detection_algorithm](http://en.wikipedia.org/wiki/Pitch_detection_algorithm)

You can look at this project for working source code for iOS that uses FFT algorithm to detect frequencies: [https://github.com/hollance/SimonSings](https://github.com/hollance/SimonSings)

# java - 尝试编写掷骰子游戏并遇到逻辑问题

> ID：13950362
> 
> 赞同：1
> 
> 时间：2012-12-19T10:33:20.540
> 
> 标签：java, jframe, logic, simulation, dice

除了实际的游戏编码之外，我拥有一切。我想不出如何编写逻辑。我知道掷骰子的规则，但我（对于我的一生）想不出如何编码。我会使用 switch 语句，还是应该只使用 if 语句？如果您有任何很棒的示例（似乎通过剖析其他人的代码可以更好地学习）。另外，如果您确实发现任何错误，请告诉我。

```
private class PlayButtonHandler implements ActionListener
{

    public int rollDice()
    {
        int iDie = (int)(Math.random()*6) +1;

        return (iDie);
    }

    public void writeMessage(String sOutput)
    {
        jtaGame.append(sOutput);
    }

    public void actionPerformed(ActionEvent e)
    {
        rollDice();

        int iDie1 = new rollDice();
        int iDie2 = new rollDice();

        int iSum = iDie1 + iDie2;

        String sRoll = "You rolled " + iDie1 + "+" + iDie2 + "=" + iSum + ".\n";
        String sOutput = "";
        int iPoint = 0;

        switch(iSum)
        {
            case 7:
            case 11:
                    sOutput = sRoll + "You win because you got a natural :)";
                    break;
            case 2:
            case 3:
            case 12:
                    sOutput = sRoll + "You lost because you got a crap out :(";
            default:
                    sOutput = sRoll + "Point is: " + iSum + ".";
        }

    }

} 
```

# javascript - Coldfusion 中的字符限制警报在 IE 9 中提供了多个弹出窗口

> ID：13950363
> 
> 赞同：1
> 
> 时间：2012-12-19T10:33:22.863
> 
> 标签：javascript, coldfusion, internet-explorer-9

我的表格中有一个`textarea`。`textarea`如果字段中的文本超过限制，我需要通过弹出消息来限制字符数。以下是我现在使用的代码。它在 FF、Chrome 和 IE8 中运行良好，但在 IE9 中却不行。在 IE9 中，如果超出限制，它会提供无限制的弹出窗口：

```
<script language="javascript" type="text/javascript">
function limitText1(limitField,  limitNum) {
    if (limitField.value.length > limitNum) {
        limitField.value = limitField.value.substring(0, limitNum);
        alert("Character limit exceeded--please reduce the length of description or use a file attachment.");
    }
} 
```

```
<cftextarea
    style="font-family:Arial;font-size:10pt;width:465px;" 
    onKeyDown="limitText1(this.form.description,16350);"
    OnInput="limitText1(this.form.description,16350);"
    onpropertychange="limitText1(this.form.description,16350);"
    required="yes"
    message="Please enter Description"
    class="textarea"
    id="description" 
    cols="75" rows="7" 
    name="description" 
    value="#form.description#"
></cftextarea> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:11:10.083

cftextarea 有一个 maxlenghth 属性。你为什么不简单地使用它？

如果你想告诉用户他达到了最大字符数，你可以编写一个简单的 js 函数来做到这一点，并在 onblur 事件中调用它。它比您当前尝试的要简单得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T13:33:28.867

```
<script language="Javascript">
String.prototype.trim = function() {return this.replace(/^\s+|\s+$/g,"");}

    function check_limit(comment_txt, limit_txt,count)
    {

        var tex = document.getElementById(comment_txt).value;
        var len = tex.length;
        if((tex.trim() != '') && (len > count))
        {
                tex = tex.substring(0,count);
                alert("Limit Exceeded");
                document.getElementById(comment_txt).value =tex.trim();
                document.getElementById(limit_txt).value =count-tex.trim().length;
                return false;
        }
        else if(tex.trim() == '')
            document.getElementById(comment_txt).value =tex.trim();
        document.getElementById(limit_txt).value =count-document.getElementById(comment_txt).value.length;
    }
 </script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T11:26:28.540

我通常不使用 CFForm 但是...

而不是使用

```
onKeyDown="limitText1(this.form.description,16350);"
OnInput="limitText1(this.form.description,16350);"
onpropertychange="limitText1(this.form.description,16350);" 
```

尝试只使用一个，`onKeyDown`或`onPropertyChange`. （onInput 不适用于 IE 8 或更低版本）。

可能不是解决方案，但值得一试，至少对于故障排除而言。

# php - 无法打开下载的 pdf 附件

> ID：13950367
> 
> 赞同：1
> 
> 时间：2012-12-19T10:33:30.767
> 
> 标签：php, pdf

我的 PHP 应用程序以下代码用于下载文件附件。文件内容和信息作为 blob 数据存储在 MySQL 数据库中。

```
header('Content-Disposition: attachment; filename="' . $attachment['name']. '"');
header('Content-Type: ' . $attachment['type']);
header('Content-Length: ' .$attachment['size']);
header('Pragma: no-cache');
header('Expires: 0');
print $attachment['content'];
exit; 
```

下载按预期工作，但 1.4 版的 pdf 文件显示空白内容。如果是 pdf 1.3 版，它可以工作。

我怎样才能解决这个问题？

# jquery-ui - jQuery UI 下拉选择

> ID：13950378
> 
> 赞同：1
> 
> 时间：2012-12-19T10:33:59.570
> 
> 标签：jquery-ui

我想要一个像这个链接这样的下拉菜单：http: [//datatables.net/release-datatables/examples/basic_init/table_sorting.html](http://datatables.net/release-datatables/examples/basic_init/table_sorting.html) （位于“Live example”行下方的那个）；我没有太多使用 jQuery UI 的经验，我猜结果是通过使用它产生的。您能否建议我创建该下拉列表的方法。谢谢你。P/S：如果不使用 jQuery UI 可能没问题（这只是我的猜测）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T04:59:12.283

好的，我知道了。这只是 Firefox 中的默认样式（还没有适用于它的样式）。由于更改浏览器，我得到了这个误解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T16:54:52.120

该解决方案看起来并不太复杂 - 他们已经获得了所有数据，并且他们只是根据选择的内容隐藏行。

另一方面，由于这是一个开源项目，您可以[下载它](http://datatables.net/download/)或使用[托管版本](http://www.asp.net/ajaxlibrary/cdn.ashx#jQuery_DataTables_Releases_on_the_CDN_6)并将其集成到您的网站上，这可能比滚动您自己的解决方案更容易。

# c - 查找函数复杂度指标

> ID：13950379
> 
> 赞同：3
> 
> 时间：2012-12-19T10:34:00.913
> 
> 标签：c, performance, complexity-theory

我必须根据行数找到 C 文件的复杂性。我找到了行数。但是如何判断它是否是一个复杂的文件呢？基于一定的价值，我必须给它一个索引。例如，复杂度指数 - 5 表示高复杂度。我可以在什么基础上对其进行索引？超过 1000 行的高复杂度，例如，不会适用于所有。有没有给出条件的标准方法（'超过 1000 行'）？欢迎任何形式的建议，除了任何预定义的工具。我需要用 C 语言对其进行编程。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:56:54.353

复杂性不基于行，例如：

`while(n!=0) {a+=b;n--;}`

复数是 n 和另一个例子：

```
for(i=0;i<n;i++) {for(j=0;j<n;j++) {a+=b} } 
```

复杂度为 n^2

# java - For each 到 For 循环转换

> ID：13950385
> 
> 赞同：11
> 
> 时间：2012-12-19T10:34:14.907
> 
> 标签：java, for-loop, foreach

我可以知道如何将每个循环的以下内容转换为普通的 for 循环吗？

```
for (SortedMap.Entry<Integer, String> entry : mapDefect.entrySet()) 
```

我有一个`count`变量作为起点，地图的终点作为终点。因此，我如何将其转换为正常的 for 循环？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T10:38:01.150

[JLS 的第 14.14.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.14.2)给出了翻译。在这种情况下，大概是：

```
for (Iterator<SortedMap.Entry<Integer, String>> iterator
         = mapDefect.entrySet().iterator();
     iterator.hasNext(); )
{
    SortedMap.Entry<Integer, String> entry = iterator.next();
    // ...
} 
```

或者，使用[Guava](http://guava-libraries.googlecode.com)的[`Iterables`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Iterables.html)类来获取排序集的一部分：

```
Iterable<SortedMap.Entry<Integer, String>> section = Iterables.limit(
    Iterables.skip(mapDefect.entrySet(), start), end - start);
for (SortedMap.Entry<Integer, String> entry : section) {
    // ...
} 
```

或者如果它*只是*来自`count`（带有澄清评论）：

```
for (SortedMap.Entry<Integer, String> entry :
         Iterables.skip(mapDefect.entrySet(), count)) {
    // ...
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-19T10:38:33.117

你说任务是跳过第一个`count`元素，然后处理其余的。

这可以通过“for”循环或“for each”循环来完成。在这种情况下，我会将其保留为“for each”循环：

```
int i = 0;
for (SortedMap.Entry<Integer, String> entry : mapDefect.entrySet()) {
   if (i++ < count) continue;
   ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T10:49:47.783

迭代地图的推荐方法是使用迭代器或 for-each 循环（使用迭代器）。

将您的 for each 循环转换为“正常”循环**可以**在您的情况下工作，因为您使用整数作为映射键：

```
for (int i = 0; i < mapDefect.size(); i++) {
  String value = mapDefect.get(i)
  // do something with value
} 
```

但请注意，这仅在您使用映射键时才有效，因为您将使用数组/列表索引（这使映射无用）。要使用这种循环，您必须使用连续的正整数作为从 0 开始的映射键

# java - 无法将 .war 应用程序部署到 GlassFish 3.1.2

> ID：13950388
> 
> 赞同：3
> 
> 时间：2012-12-19T10:34:16.840
> 
> 标签：java, deployment, glassfish, war

我有一个 .war 应用程序模块，无需任何特殊更改和服务器调整即可成功部署。但是，我无法将此应用程序部署到 GF 3.1.2：服务器抛出以下异常：

> java.lang.Exception：java.lang.IllegalStateException：ContainerBase.addChild：开始：org.apache.catalina.LifecycleException：org.apache.catalina.LifecycleException：java.lang.NoSuchFieldError：theInstance

我做错了什么？有人建议我吗？我应该执行任何其他设置来成功部署 .war 模块吗？

提前非常感谢。

**UPD**

更精确的日志条目：

> javax.xml.bind.JAXBException：提供程序 com.sun.xml.bind.ContextFactory_1_0_1 无法实例化：javax.xml.bind.JAXBException - 带有链接异常：[java.lang.NoSuchFieldError: theInstance]
> - 带有链接异常：[ javax.xml.bind.JAXBException - 带有链接异常：[java.lang.NoSuchFieldError: theInstance]]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T02:10:01.653

[听起来像一个类加载器问题。](http://docs.oracle.com/cd/E26576_01/doc.312/e24930/class-loaders.htm)

您需要在 GlassFish JAXB jar 之前使用 WEB-INF/lib JAXB jar。或者更改您的应用程序以使用 GlassFish 3.1.2 捆绑的版本。

Servlet 规范说 Web 应用程序在委托给父级之前应该使用本地类加载器。我认为 GlassFish 默认委托给 Web 应用程序的父类加载器。`<class-loader delegate="false"/>`在 web.xml 或 glassfish-web.xml 中使用。

请注意，如果这不起作用，可能还有其他方法可以修改 GlassFish 中的类加载器。

在部署到许多应用程序服务器期间，此类问题很常见。在过去 5 年多的时间里，我每天都使用 GlassFish，并且经常看到这种情况。最近在 CloudBees 上部署到 JBoss 时看到了类似的问题，并相应地修改了部署描述符。

[谷歌搜索“glassfish 更喜欢 web-inf/lib jars”。](https://stackoverflow.com/questions/6759633/how-do-i-deal-with-glassfish-included-libs-crashing-with-application-supplied-li)

**对下面的 psed 注释的响应** EJB 接口必须位于 Web 模块和 EJB 模块共享的类路径层次结构中。如果您在 WEB-INF/lib 中有一个 EJB 接口 jar，并且在 EJB 模块类路径上有另一个 EJB 接口 jar 副本，那么在您的 Web 应用程序中注入/定位 EJB 时，您会收到 ClassCastException。我假设 WebServices 有同样的问题。虽然通过 EAR 共享 EJB 接口 jar 应该可以解决这个问题。请注意，可能还有其他我不知道的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T12:11:23.817

您不应该将 JAXB jar 与您的应用程序捆绑在一起——Glassfish 已经有了它们，这似乎导致了冲突（顺便说一下，我最近一直在研究 JAXB 代码，并且`theInstance`是由定义的静态类的一部分`MarshallerImpl`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T14:47:48.183

您应该将所有 jar 文件放到运行时服务器库中...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T16:54:10.883

此指令适用于 GlassFish 3.1.2 问题是来自 JAXB 2.2.5 的运行时类不能使用 JAXB 1 代码向后编译。此问题已在 JAXB 2.2.6 中得到修复，但是，它不在最新的 GlassFish 版本中。因此，要么等到下一次 GlassFish 升级，要么手动进行。

我是这样做的，我从 GlassFish 模块中删除了 2 个捆绑文件

```
C:\glassfish3\glassfish\modules\jaxb-osgi.jar
C:\glassfish3\glassfish\modules\endorsed\jaxb-api-osgi.jar 
```

通过删除所有子文件夹来清除 osgi-cache

```
C:\glassfish3\glassfish\domains\domain1\osgi-cache 
```

[从ORACLE JAXB](http://jaxb.java.net/2.2.6/)下载 JAXB 2.2.6

将 zip 文件解压缩到临时位置 [C:\Java\jaxb-ri-2.2.6\jaxb-ri-2.2.6\osgi]

将 C:\Java\jaxb-ri-2.2.6\jaxb-ri-2.2.6\osgi\jaxb-osgi.jar 复制到 C:\glassfish3\glassfish\modules\

将 C:\Java\jaxb-ri-2.2.6\jaxb-ri-2.2.6\osgi\jaxb-api-osgi.jar 复制到 C:\glassfish3\glassfish\modules\endorsed\

重新启动您的服务器...我希望这会有所帮助。祝你好运

# jquery - 如何在 Kendo Ui Mobile 中将数据绑定到下拉列表

> ID：13950390
> 
> 赞同：2
> 
> 时间：2012-12-19T10:34:20.303
> 
> 标签：jquery, asp.net, ios, kendo-ui

我一直在使用 Kendo Mobile 开发一个应用程序，以前我在 Kendo web 上做过相同的应用程序，它工作正常。主要问题是我必须将数据绑定到下面我编写的两个下拉列表，当我的应用程序是运行它会显示类似“Microsoft JScript 运行时错误：对象不支持属性或方法‘追加’”的错误。

在 HTML 中

```
<div id="forms" data-role="view" data-title="Form Elements" data-init="initForm">
    <table>
        <tr>
            <td>
                <label style="margin-left: 20px">
                    Company:</label>
            </td>
            <td>
                <select id="ddlCompany" style="width: 200px">
                    <option>Select Company</option>
                </select>
            </td>
            <td class="style1">
                <label style="margin-left: 20px">
                    Category:</label>
            </td>
            <td>
                <select id="ddlCategory" style="width: 200px">
                    <option>Select Category</option>
                </select>
            </td>
            <td>
                <label style="margin-left: 20px">
                   Product :</label>
            </td>
            <td>
                <select id="ddlProduct" style="width: 200px">
                    <option>Select Product</option>
                </select>
            </td>
        </tr>
    </table>
</div>

   function initForm() {
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "FlashReportMobileWebService.asmx/GetCompany",
            dataType: "json",
            success: function (data) {
                for (i = 0; i < data.d.length; i++) {
                    ddlCompany.append($("<option></option>").val(data.d[i].Company).html(data.d[i].Company));
                };

                $("#ddlCompany").kendoDropDownList();
            }
        });
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "FlashReportMobileWebService.asmx/ToCategoryDropDown",
            dataType: "json",
            success: function (data) {
                for (i = 0; i < data.d.length; i++) {
                    ddlCategory.append($("<option></option>").val(data.d[i].Category).html(data.d[i].Category));

                };
                $("#ddlCategory").kendoDropDownList();
            },
            failure: function (msg) {
                alert(msg);
            }
        });
    }
    $("#ddlCategory").change(
        function (e) {
            var ddlProduct= $("#ddlProduct");  
            var dataItem = $("#ddlCategory").val();  
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                data: "{'Category':'" + dataItem + "'}",
                url: "FlashReportWebService.asmx/ToFillProductDropDown",
                dataType: "json",
                success: function (data) {
                    ddlProduct.empty();
                    for (i = 0; i < data.d.length; i++) {
                        ddlProduct.append($("<option></option>").val(data.d[i].ProductName).html(data.d[i].ProductName));
                    };
                    $("#ddlProduct").kendoDropDownList();
                },
                failure: function (msg) {
                    alert(msg);
                }
            });
        });

    var app = new kendo.mobile.Application(document.body); 
```

感谢您阅读本文

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T06:58:12.563

```
$.ajax({
        type: "POST",
        contentType: "application/json; charset=utf-8",
        url: "FlashReportMobileWebService.asmx/GetCompany",
        dataType: "json",
        success: function (data) {
            var dataSource = [];
            for (i = 0; i < data.d.length; i++) {                    
                ddlCompany.push({ "Company": data.d[i].Company})
            };
            $("#ddlCompany").kendoDropDownList({
                dataTextField: "Company",
                dataSource: dataSource
            });
        }
    }); 
```

编写上述代码而不是将值附加到 ddlCompany.Values 将绑定。

# java - JAVA 总是读取执行 jar 的目录

> ID：13950393
> 
> 赞同：3
> 
> 时间：2012-12-19T10:34:32.893
> 
> 标签：java, path, directory

我有一个小型 Java 应用程序，可以在设定的位置更新文件。该应用程序从 UpdateFiles 文件夹中读取，将此文件夹中的文件移动到相应的文件夹中。该应用程序有效。我想知道的是，如果我希望应用程序始终尝试在与应用程序相同的位置查找 UpdateFiles 文件夹，我应该如何设置路径？例如，如果应用程序是从桌面执行的，我希望它在桌面中查找 UpdateFiles 文件夹，与任何其他位置相同。该应用程序在 Windows 和 AIX/linux 环境中运行

谢谢/亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:36:52.327

You can access the system property that contains the current working directory:

```
String currentDirectory = System.getProperty("user.dir"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:38:50.090

You can determine the location of the jar file, but this is not the same as the current working directory (the directory you get if you don't specify a path)

However the location of the jar is rarely a good place to store files and you don't want to mix released programs with files as this make upgrading your software much more complex.

I suggest using the user's home directory `System.getProperties("user.home");` or a sub-directory This doesn't change if you upgrade you software is should always be writable.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T10:41:30.890

您必须从 UpdateFiles 所在的目录启动您的应用程序，如有必要，您可以创建一个 bat 文件（适用于 Windows）并从任何位置运行它

`cd c:\path_to_UpdateFiles java MyApp`

在 Linux 中做类似的事情

# javascript - 在 Google Chrome 中强制进行垃圾收集

> ID：13950394
> 
> 赞同：50
> 
> 时间：2012-12-19T10:34:33.953
> 
> 标签：javascript, google-chrome, garbage-collection, zk

[我们正在使用ZK](http://www.zkoss.org/ "兹科斯")开发一个单页 Web 应用程序，该应用程序不断与服务器通信并更新其部分屏幕。更新频率可达 1 秒。在这些更新期间，对大量*JS*对象的引用会丢失，这些对象最终必须由垃圾收集器清理。

据我们所知，Chrome 只在非活动标签上运行其垃圾收集器。这对我们来说是个问题，因为应用程序的选项卡通常是活动的并且几乎从不刷新，因此*JS*对象永远不会被收集。如果保持活动状态足够长的时间，该选项卡最终会崩溃（*Aww Snap*消息）。

我们需要手动启动垃圾收集。到目前为止，我们已经尝试使用`--js-flags="--expose-gc"`和 running运行 Chrome `gc()`，但它会引发异常：

```
ReferenceError: gc is not defined 
```

这不会在 Firefox 上发生——内存使用或多或少是一个常数。

强制刷新页面不是一种选择。

我们将不胜感激任何和所有的建议。

**编辑**：我们已经尝试在 Chrome版本`window.gc()`和`gc()``23.0.1271.97 m``25.0.1364.2 dev-m`

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-19T11:47:04.863

您可以获取 Chrome 开发工具的代码，对其进行修改以便`ProfilerAgent.collectGarbage();`不时调用它（这是在您单击时间轴面板上的“收集垃圾”按钮时调用的代码）并使用您的开发工具版本使用`--debug-devtools-frontend`标志运行 Chrome。

然而，这个解决方案是相当极端的，只有当你真的绝望时才尝试。到那时，我建议分析您的应用程序并检查为什么 v8 决定不清理垃圾（或无法清理垃圾）。DevTools 的时间线面板将帮助您解决这个问题。首先检查此面板底部的“收集垃圾”按钮是否真的有效，如果没有 - 你可能有内存泄漏（至少，根据 v8）。如果是这样，请尝试[leak-finder-for-javascript](http://code.google.com/p/leak-finder-for-javascript/)。

[**编辑**] 我删除了有关 chrome 扩展的信息，因为在使用`gc()`时可以从网页代码中调用`--js-flags="--expose-gc"`。至少在我的 23.0.1271.64 上。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2016-10-22T17:05:25.960

在 Chrome 开发者工具中，你有“时间轴”部分，从 Chrome 53 开始。你有按钮看起来像垃圾桶。单击它并强制垃圾收集器运行。 [![在此处输入图像描述](../Images/9f09a8f2869fe3487c9e31f5885b1bbd.png)](https://i.stack.imgur.com/1vKuY.png)

**更新：**

在较新版本的 Chrome 中，GC 按钮移至性能选项卡。 [![在此处输入图像描述](../Images/ac493079e983ae177a69e8700f1d1868.png)](https://i.stack.imgur.com/W9Pf9.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-08T01:39:52.637

我找到了解决方案。显然 Chrome 会泄漏 DOM 节点，至少在当前版本中（现在是 26.0.1410.65）

我在我的应用程序中记录了开发工具时间线，它显示事件侦听器计数随着我的应用程序屏幕内容有节奏地上下波动，但 DOM 节点计数随着时间的推移稳步增加，直到选项卡崩溃。

我尝试了最新的 Chrome Canary (28.0.1500.3)，他们似乎已经解决了这个问题。DOM 节点计数图现在遵循与事件侦听器相同的节奏模式。

让我感动的是……为什么 gmail 从来没有崩溃过？我通常一次打开一个标签好几个星期...

# c# - ASP.NET Web API 操作方法参数的依赖注入

> ID：13950395
> 
> 赞同：9
> 
> 时间：2012-12-19T10:34:35.147
> 
> 标签：c#, dependency-injection, asp.net-web-api

我正在使用 C# 开发一个用于移动应用程序的 JSON 接口的 ASP.NET Web API 项目。我的想法是为所有请求创建接口，然后只在 Web API 代码中使用这些接口。

我最终得到了这样的结果：

```
public interface IApiObject {}
public interface IApiResponse<T> : IApiObject where T : IApiObject {}
public interface IApiRegistrationRequest : IApiObject {} 
```

我的控制器如下所示：

```
public class MyApiController : ApiController
{

    public IApiResponse<IApiObject> Register(IApiRegistrationRequest request) {
        // do some stuff
    }
} 
```

我的 Web API 项目还包含这些接口的实现。

我假设 Web API 项目像 MVC 项目一样使用模型绑定，因此我创建了一个具有[继承意识的 ModelBinderProvider](http://www.matthidinger.com/archive/2011/08/16/An-inheritance-aware-ModelBinderProvider-in-MVC-3.aspx)，用于为所有 IApiObjects 提供绑定器，并使用 Unity 容器创建自定义模型绑定器来解析其实现的接口。

然而，经过更多调查，我发现了 Web API[如何进行参数绑定](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)，并发现 Web API 使用格式化程序而不是模型绑定器来处理复杂类型。链接的博客文章建议在我的操作参数上使用 ModelBinderAttribute，但该属性仅接受类型作为参数。但是，我的自定义模型绑定器不包含空构造函数（它需要一个统一容器），因此我需要传递它的一个实例。

我能想到的另一种方法是对格式化程序使用依赖注入。不幸的是，我对它们不熟悉，因为我以前从未使用过它们。

哪条路是正确的？我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T14:49:55.913

这就是我现在想出的，它有效。

我决定创建一个自定义格式化程序，它执行统一调用并将所有进一步的操作转发到另一个使用已解析类型的格式化程序。它看起来像很多代码，但这只是因为所有方法都需要被覆盖，所以类型总是可以被解析。

```
public class UnityFormatter : MediaTypeFormatter
{
    private MediaTypeFormatter formatter;

    private IUnityContainer container;

    public UnityFormatter(MediaTypeFormatter formatter, IUnityContainer container)
    {
        this.formatter = formatter;
        this.container = container;

        foreach (var supportedMediaType in this.formatter.SupportedMediaTypes)
        {
            this.SupportedMediaTypes.Add(supportedMediaType);
        }

        foreach (var supportedEncoding in this.formatter.SupportedEncodings)
        {
            this.SupportedEncodings.Add(supportedEncoding);
        }

        foreach (var mediaTypeMapping in this.MediaTypeMappings)
        {
            this.MediaTypeMappings.Add(mediaTypeMapping);
        }

        this.RequiredMemberSelector = this.formatter.RequiredMemberSelector;
    }

    private Type ResolveType(Type type)
    {
        return this.container.Registrations.Where(n => n.RegisteredType == type).Select(n => n.MappedToType).FirstOrDefault() ?? type;
    }

    public override bool CanReadType(Type type)
    {
        return this.formatter.CanReadType(this.ResolveType(type));
    }

    public override bool CanWriteType(Type type)
    {
        return this.formatter.CanWriteType(this.ResolveType(type));
    }

    public override MediaTypeFormatter GetPerRequestFormatterInstance(Type type, HttpRequestMessage request, MediaTypeHeaderValue mediaType)
    {
        return this.formatter.GetPerRequestFormatterInstance(this.ResolveType(type), request, mediaType);
    }

    public override Task<object> ReadFromStreamAsync(Type type, Stream readStream, HttpContent content, IFormatterLogger formatterLogger)
    {
        return this.formatter.ReadFromStreamAsync(this.ResolveType(type), readStream, content, formatterLogger);
    }

    public override void SetDefaultContentHeaders(Type type, HttpContentHeaders headers, MediaTypeHeaderValue mediaType)
    {
        this.formatter.SetDefaultContentHeaders(this.ResolveType(type), headers, mediaType);
    }

    public override Task WriteToStreamAsync(Type type, object value, Stream writeStream, HttpContent content, TransportContext transportContext)
    {
        return this.formatter.WriteToStreamAsync(this.ResolveType(type), value, writeStream, content, transportContext);
    }
} 
```

最后，在应用程序配置（Global.asax Application_Start）中注册我们的自定义格式化程序。我选择用我自定义的一个实例替换所有当前的格式化程序，所以我得到了所有数据类型的反射。

```
// set up unity container, register all types
UnityContainer container = new UnityContainer();
container.RegisterType<IApiRegistrationRequest, ApiRegistrationRequest>();

// save existing formatters and remove them from the config
List<MediaTypeFormatter> formatters = new List<MediaTypeFormatter>(GlobalConfiguration.Configuration.Formatters);
GlobalConfiguration.Configuration.Formatters.Clear();

// create an instance of our custom formatter for each existing formatter
foreach (MediaTypeFormatter formatter in formatters)
{
    GlobalConfiguration.Configuration.Formatters.Add(new UnityFormatter(formatter, container));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T10:47:12.540

我建议你看看服务堆栈 [http://www.servicestack.net/](http://www.servicestack.net/)

它的设计与 asp.net-WebApi 相同，但其中包含 IOC 之类的好东西。

[在http://pluralsight.com/training/Courses/TableOfContents/service-stack](http://pluralsight.com/training/Courses/TableOfContents/service-stack)上有一个关于服务堆栈的惊人系列

# sql - 存储过程中的错误：当前事务无法提交且无法支持写入日志文件的操作

> ID：13950402
> 
> 赞同：3
> 
> 时间：2012-12-19T10:35:04.063
> 
> 标签：sql, sql-server, tsql

错误信息是：

> 当前事务无法提交，也无法支持写入日志文件的操作。回滚事务。

此处的这部分会导致错误（一旦我将 SELECT 子句注释掉，一切都会顺利进行）。

```
 DECLARE @TSV_Target_Counter INT
    DECLARE @TargetTable nvarchar(255)
    DECLARE @TargetColumn nvarchar(255)
    DECLARE @Value nvarchar(4000)
    DECLARE @SQLSTR nvarchar(4000)

    SET @TSV_Target_Counter = ( SELECT MIN(Transition_Set_Variable_ID) 
                                FROM @TSV_WithTarget )
    SET @TargetTable = ( SELECT TargetTable 
                            FROM @TSV_WithTarget
                            WHERE Transition_Set_Variable_ID = @TSV_Target_Counter )
    SET @TargetColumn = ( SELECT TargetColumn 
                            FROM @TSV_WithTarget
                            WHERE Transition_Set_Variable_ID = @TSV_Target_Counter )
    SET @Value = ( SELECT Value
                    FROM @TSV_WithTarget
                    WHERE Transition_Set_Variable_ID = @TSV_Target_Counter )

-- problem starts here

SELECT @SQLSTR = 'UPDATE Business_Partner AS BP 
                    INNER JOIN BP_Contact AS BPC ON BP.Business_Partner_ID = BPC.Business_Partner_ID 
                    INNER JOIN Due_Diligence AS DD ON BPC.BP_Contact_ID = DD.BP_Contact_ID 
                    SET' + @TargetColumn + ' = ' + @Value + ' 
                    WHERE DD.Process_Instance_ID = ' + @Process_Instance_ID

-- ends here

EXEC(@SQLSTR); 
```

难道我做错了什么？我正在尝试使用此事务测试此 SP：

```
BEGIN TRANSACTION T1
    EXEC Process_Instance_Value_AddAlter -- the name of the SP
    REVERT
ROLLBACK TRANSACTION T1 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-19T10:54:04.453

您在不可提交（又名“注定”）交易的背景下进行操作。这意味着您没有显示更多代码，并且调用可能来自 CATCH 块。请参阅[不可提交的事务和 XACT_STATE](http://msdn.microsoft.com/en-us/library/ms175976.aspx)：

> 如果 TRY 块中产生的错误导致当前事务的状态无效，则该事务被归类为不可提交事务。当错误发生在 TRY 块内时，通常在 TRY 块外结束事务的错误会导致事务进入不可提交状态。不可提交的事务只能执行读取操作或 ROLLBACK TRANSACTION。该事务不能执行任何会生成写操作或 COMMIT TRANSACTION 的 Transact-SQL 语句。如果事务已被归类为不可提交事务，则 XACT_STATE 函数返回值 -1。批处理完成后，数据库引擎会回滚任何活动的不可提交事务。如果事务进入不可提交状态时没有发送错误消息，当批处理完成时，将向客户端应用程序发送一条错误消息。这表示检测到并回滚了一个不可提交的事务。

修复很简单：不要从不可提交的事务上下文中调用过程。**始终检查`XACT_STATE()`CATCH 块中的内容**。

# java - 如何按值存储间隔和查找间隔？

> ID：13950405
> 
> 赞同：2
> 
> 时间：2012-12-19T10:35:18.983
> 
> 标签：java

我有一个包含三个对象的列表，假设将其命名为数据。

1.  数据[0] 有 0-6
2.  数据[1] 有 6-13
3.  数据[2] 有 13-23

我有一个方法，它有两个参数，一个是`starttime`，另一个是`endtime`。我的要求是，如果输入值在第一个对象之间，那么此方法将返回第一个对象。如果输入值介于前两个对象之间，则该方法应返回前两个对象。我怎样才能做到这一点。谁能告诉我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T10:43:52.777

**假设您没有重叠范围，并且范围是连续**的，如您的示例（否则您需要自己实现一些东西）：

您可以使用[TreeMap](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html)来存储起点或范围及其值，例如

```
TreeMap<Int, Object> map = new TreeMap<Int, Object>();
map.put(0, obj1);
map.put(6, obj2);
map.put(13, obj3); 
```

然后使用[TreeMap.floorEntry](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html#floorEntry%28K%29)获取`the greatest key less than or equal to the given key`

然后你得到：

```
map.get(0); // obj1
map.get(3); // /obj2
nap.get(22); // obj3 
```

您可以添加检查以查看键是否小于 0 或大于 23，并且不检查这些值的映射。

对于您的问题，您可以同时检查`starttime`并`endtime`查看是否得到相同的对象。

# shell - 从文件名中删除子字符串

> ID：13950407
> 
> 赞同：2
> 
> 时间：2012-12-19T10:35:21.057
> 
> 标签：shell, ubuntu

我有名称格式为“NAME-xxxxxx.tedx”的文件，我想删除“-xxxxxx”部分。x 都是数字。正则表达式`"\-[0-9]{1,6}"`匹配子字符串，但我不知道如何从文件名中删除它。

知道如何在 shell 中做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T10:51:44.450

如果您安装了[perl 版本的`rename`命令](http://man.he.net/man1/rename)，您可以尝试：

```
rename 's/-[0-9]+//' *.tedx 
```

演示：

```
[me@home]$ ls
hello-123.tedx  world-23456.tedx
[me@home]$ rename 's/-[0-9]+//' *.tedx
[me@home]$ ls
hello.tedx  world.tedx 
```

如果这意味着覆盖现有文件，则此命令足够聪明，不会重命名文件：

```
[me@home]$ ls
hello-123.tedx  world-123.tedx  world-23456.tedx
[me@home]$ rename 's/-[0-9]+//' *.tedx
world-23456.tedx not renamed: world.tedx already exists
[me@home]$ ls
hello.tedx  world-23456.tedx  world.tedx 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T10:43:39.127

```
echo NAME-12345.tedx | sed "s/-[0-9]*//g" 
```

会给`NAME.tedx`。因此，您可以使用循环并使用`mv`命令移动文件：

```
for file in *.tedx; do
   newfile=$(echo "$file" | sed "s/-[0-9]*//g")
   mv "$file" $newfile
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T14:10:59.250

如果您只想使用外壳

```
shopt -s extglob
for f in *-+([0-9]]).tedx; do
    newname=${f%-*}.tedx    # strip off the dash and all following chars
    [[ -f $newname ]] || mv "$f" "$newname"
done 
```

# android - 如何一屏使用三个片段？

> ID：13950409
> 
> 赞同：1
> 
> 时间：2012-12-19T10:35:22.957
> 
> 标签：android, android-fragments, android-animation, android-gesture

我正在设计一个需要将平板电脑分成三个单独屏幕的应用程序，如下所示。每个屏幕上都会有一张图片，当你垂直滑动这张图片时，它会带你到下一张图片。我已经使用 Fragments 来做到这一点，到目前为止，我已经成功创建了 3 个 Fragments，它们显示在一个屏幕上，如下所示.每个片段都响应向上或向下滑动。我使用 viewflipper 和动画在图像之间滑动。但是，当我将此代码添加到我的应用程序时，它会导致它崩溃。我在我的 logcat 中得到一个膨胀异常，如下所示：

```
01-08 15:52:05.870: E/AndroidRuntime(4061): FATAL EXCEPTION: main
01-08 15:52:05.870: E/AndroidRuntime(4061): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.david.fragmenttest/com.david.fragmenttest.MainFragment}: android.view.InflateException: Binary XML file line #13: Error inflating class fragment 
```

代码本身可以正常工作，但是当我将它添加到我的片段类时，我得到了上述错误。有谁知道是否可以在片段类中使用 viewflipper 和动画？我可能以错误的方式接近这个吗？谢谢

![在此处输入图像描述](../Images/64edc9c233a8b9436d6153fe2b53c55c.png)

主类：

```
public class Main extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    }

} 
```

主.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <fragment
        android:id="@+id/imOne"
        android:name="com.david.ImageOne"
        android:layout_width="400dp"
        android:layout_height="fill_parent" />

    <fragment
        android:id="@+id/imTwo"
        android:name="com.david.ImageTwo"
        android:layout_width="400dp"
        android:layout_height="fill_parent" />

    <fragment
        android:id="@+id/imThree"
        android:name="com.david.ImageThree"
        android:layout_width="400dp"
        android:layout_height="fill_parent" />

</LinearLayout> 
```

片段 A 的类

```
public class ImageTwo extends Fragment {

private ViewFlipper mViewFlipper;

private int mSpeed;
private int mCount;
private int mFactor;
private boolean mAnimating;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    View view = inflater.inflate(R.layout.pic_two, container, false);
    mViewFlipper = (ViewFlipper) getView().findViewById(R.id.view_flipper);

    mAnimating = false;
    mCount = 0;
    mSpeed = 0;

    final GestureDetector gesture = new GestureDetector(getActivity(),
            new GestureDetector.SimpleOnGestureListener() {

                @Override
                public boolean onDown(MotionEvent e) {
                    // TODO Auto-generated method stub
                    return true;
                }

                private Runnable r1 = new Runnable() {

                    @Override
                    public void run() {
                        up();
                        if (mCount < 1) {
                            mAnimating = false;
                        } else {
                            Handler h = new Handler();
                            h.postDelayed(r1, mSpeed);
                        }
                    }

                };

                private Runnable r2 = new Runnable() {

                    @Override
                    public void run() {
                        down();
                        if (mCount < 1) {
                            mAnimating = false;
                        } else {
                            Handler h = new Handler();
                            h.postDelayed(r2, mSpeed);
                        }
                    }

                };

                @Override
                public boolean onFling(MotionEvent start,
                        MotionEvent finish, float xVelocity, float yVelocity) {
                    try {
                        if (mAnimating)
                            return true;
                        mAnimating = true;
                        mCount = (int) Math.abs(yVelocity) / 900;
                        mFactor = (int) 300 / mCount;
                        mSpeed = mFactor;
                        if (yVelocity > 0) {
                            // down
                            Handler h = new Handler();
                            h.postDelayed(r2, mSpeed);
                        } else {
                            // up
                            Handler h = new Handler();
                            h.postDelayed(r1, mSpeed);
                        }
                        // ((TextView)findViewById(R.id.velocity)).setText("VELOCITY => "+Float.toString(yVelocity));
                    } catch (ArithmeticException e) {
                        // swiped too slow doesn't register
                        mAnimating = false;
                    }
                    return true;
                }

                private void up() {
                    mCount--;
                    mSpeed += mFactor;
                    Animation inFromBottom = new TranslateAnimation(
                            Animation.RELATIVE_TO_PARENT, 0.0f,
                            Animation.RELATIVE_TO_PARENT, 0.0f,
                            Animation.RELATIVE_TO_PARENT, 1.0f,
                            Animation.RELATIVE_TO_PARENT, 0.0f);
                    inFromBottom
                            .setInterpolator(new AccelerateInterpolator());
                    inFromBottom.setDuration(mSpeed);
                    Animation outToTop = new TranslateAnimation(
                            Animation.RELATIVE_TO_PARENT, 0.0f,
                            Animation.RELATIVE_TO_PARENT, 0.0f,
                            Animation.RELATIVE_TO_PARENT, 0.0f,
                            Animation.RELATIVE_TO_PARENT, -1.0f);
                    outToTop.setInterpolator(new AccelerateInterpolator());
                    outToTop.setDuration(mSpeed);
                    mViewFlipper.clearAnimation();
                    mViewFlipper.setInAnimation(inFromBottom);
                    mViewFlipper.setOutAnimation(outToTop);
                    if (mViewFlipper.getDisplayedChild() == 0) {
                        mViewFlipper.setDisplayedChild(2);
                    } else {
                        mViewFlipper.showPrevious();
                    }

                }

                private void down() {
                    mCount--;
                    mSpeed += mFactor;
                    Animation outToBottom = new TranslateAnimation(
                            Animation.RELATIVE_TO_PARENT, 0.0f,
                            Animation.RELATIVE_TO_PARENT, 0.0f,
                            Animation.RELATIVE_TO_PARENT, 0.0f,
                            Animation.RELATIVE_TO_PARENT, 1.0f);
                    outToBottom
                            .setInterpolator(new AccelerateInterpolator());
                    outToBottom.setDuration(mSpeed);
                    Animation inFromTop = new TranslateAnimation(
                            Animation.RELATIVE_TO_PARENT, 0.0f,
                            Animation.RELATIVE_TO_PARENT, 0.0f,
                            Animation.RELATIVE_TO_PARENT, -1.0f,
                            Animation.RELATIVE_TO_PARENT, 0.0f);
                    inFromTop.setInterpolator(new AccelerateInterpolator());
                    inFromTop.setDuration(mSpeed);
                    mViewFlipper.clearAnimation();
                    mViewFlipper.setInAnimation(inFromTop);
                    mViewFlipper.setOutAnimation(outToBottom);
                    if (mViewFlipper.getDisplayedChild() == 0) {
                        mViewFlipper.setDisplayedChild(2);
                    } else {
                        mViewFlipper.showPrevious();
                    }

                }

                @Override
                public void onLongPress(MotionEvent e) {
                    // TODO Auto-generated method stub

                }

                @Override
                public boolean onScroll(MotionEvent e1, MotionEvent e2,
                        float distanceX, float distanceY) {
                    // TODO Auto-generated method stub
                    return false;
                }

                @Override
                public void onShowPress(MotionEvent e) {
                    // TODO Auto-generated method stub

                }

                @Override
                public boolean onSingleTapUp(MotionEvent e) {
                    // TODO Auto-generated method stub
                    return false;
                }

            });

    view.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            return gesture.onTouchEvent(event);
        }
    });

    return view;

} 
```

}

片段布局 - pic_one.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imOne"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/bus_1" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:15:56.127

我想出了如何让这个工作。我没有正确设置我的gestureDetector，这就是我滑动屏幕时没有发生任何事情的原因。下面是我用来让它工作的代码。

```
public class ImageOne extends Fragment  {

    private static final int SWIPE_THRESHOLD = 100;
    private static final int SWIPE_VELOCITY_THRESHOLD = 100;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.pic_one, container, false);
        final GestureDetector gesture = new GestureDetector(getActivity(),
                new GestureDetector.SimpleOnGestureListener() {

            @Override
            public boolean onDown(MotionEvent e) {
                // TODO Auto-generated method stub
                return true;
            }

            @Override
            public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
                    float velocityY) {
                boolean result = false;
                try {
                    float diffY = e2.getY() - e1.getY();
                    float diffX = e2.getX() - e1.getX();
                    if (Math.abs(diffX) > Math.abs(diffY)) {
                        if (Math.abs(diffX) > SWIPE_THRESHOLD
                                && Math.abs(velocityX) > SWIPE_VELOCITY_THRESHOLD) {
                            if (diffX > 0) {
                                onSwipeRight();
                            } else {
                                onSwipeLeft();
                            }
                        }
                    } else {
                        if (Math.abs(diffY) > SWIPE_THRESHOLD
                                && Math.abs(velocityY) > SWIPE_VELOCITY_THRESHOLD) {
                            if (diffY > 0) {
                                onSwipeBottom();
                            } else {
                                onSwipeTop();
                            }
                        }
                    }
                } catch (Exception exception) {
                    exception.printStackTrace();
                }
                return result;
            }

            @Override
            public void onLongPress(MotionEvent e) {
                // TODO Auto-generated method stub

            }

            @Override
            public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX,
                    float distanceY) {
                // TODO Auto-generated method stub
                return false;
            }

            @Override
            public void onShowPress(MotionEvent e) {
                // TODO Auto-generated method stub

            }

            @Override
            public boolean onSingleTapUp(MotionEvent e) {
                // TODO Auto-generated method stub
                return false;
            }

            public void onSwipeRight() {
                Toast.makeText(getActivity(), " RIGHT ", Toast.LENGTH_LONG).show();
            }

            public void onSwipeLeft() {
                Toast.makeText(getActivity(), " LEFT ", Toast.LENGTH_LONG).show();

            }

            public void onSwipeTop() {
                Toast.makeText(getActivity(), " TOP ", Toast.LENGTH_LONG).show();

            }

            public void onSwipeBottom() {
                Toast.makeText(getActivity(), " BOTTOM ", Toast.LENGTH_LONG).show();

            }

        });

        view.setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                return gesture.onTouchEvent(event);
            }
        });

        return view;

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:52:18.553

尝试从 onDown(MotionEvent e) 方法返回 true

# tomcat - 使用java代码在tomcat中停止web应用程序

> ID：13950413
> 
> 赞同：0
> 
> 时间：2012-12-19T10:35:36.373
> 
> 标签：tomcat

我使用 HttpClient。我使用 JSF 开发了 Web 应用程序。部署到tomcat6.0.29。我正在尝试停止应用程序。但它不起作用。

../conf/tomcat-users.xml 文件内容

```
<?xml version='1.0' encoding='utf-8'?>
      <tomcat-users>
          <role rolename="manager"/>
          <user username="tomcat" password="s3cret" roles="manager" />
     </tomcat-users> 
```

我的java代码是

```
import org.apache.commons.httpclient.*;
import org.apache.commons.httpclient.methods.*;
import org.apache.commons.httpclient.params.HttpMethodParams;
import java.io.*;
public class HttpClientTutorial
{
private static String url = "http://localhost:8080/manager/html/stop?path=/jsfproject";
public static void main(String[] args)
{        
    HttpClient client = new HttpClient();

    GetMethod method = new GetMethod(url);

    method.getParams().setParameter(HttpMethodParams.RETRY_HANDLER,
            new DefaultHttpMethodRetryHandler(3, false));
   try{

        int statusCode = client.executeMethod(method);
        if (statusCode != HttpStatus.SC_OK)
        {
            System.err.println("Method failed: " + method.getStatusLine());
        }

        byte[] responseBody = method.getResponseBody();

        System.out.println(new String(responseBody));
    }
    catch (HttpException e)
    {
        System.err.println("Fatal protocol violation: " + e.getMessage());
        e.printStackTrace();
    }
    catch (IOException e)
    {
        System.err.println("Fatal transport error: " + e.getMessage());
        e.printStackTrace();
    }
    finally
    {            
        method.releaseConnection();
    }
}  
} 
```

但我得到了这样的错误

```
log4j:WARN No appenders could be found for logger (org.apache.commons.httpclient.HttpClient).
log4j:WARN Please initialize the log4j system properly.
Method failed: HTTP/1.1 401 Unauthorized 
```

我也得到了

```
401 Unauthorized
You are not authorized to view this page. If you have not changed any configuration `files, please examine the file conf/tomcat-users.xml in your installation.

That file will contain the credentials to let you use this webapp.
ou will need to add manager role to the config file listed above. For example:

<role rolename="manager"/>
<user username="tomcat" password="s3cret" roles="manager"/>

For more information - please see the Manager App HOW-TO. 
```

帮我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:28:15.003

为了停止应用程序，Tomcat 需要您在 tomcat-users.xml 中创建的用户的凭据，但您的代码不会尝试提供它们。

这里有一些可能会给你一个线索的clode：

```
HttpClient client = new HttpClient();
HttpState state = client.getState();

// Set credentials on the client
Credentials credentials = new UsernamePasswordCredentials("tomcat","s3cret");
state.setCredentials( null, null, credentials );

HttpMethod method = new GetMethod(url); 
```

# serialization - 使用嵌套列表反序列化 gson 对象 public class ListResult <t>{ private boolean ok; private String message; private java.util.List <t>data; private Paging paging; } When i want to deserializ 问问题 问问题 2012-12-19T10:35:37.983 4837 次 This question shows research effort; it is useful and clear 3 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. serializationgson 4 2 回答 2 This answer is useful 0 Type fooType = new TypeToken<listresult<stringmap>>() {}.getType(); Gson gson = new Gson(); ListResult <stringmap>model = gson.fromJson(strResult, fooType); Gson无法读懂您的想法，也无法自行确定通用类型；） https://sites.google.com/site/gson/gson-user-guide#TOC-Serializing-and-Deserializing-Generic-Types 于 2012-12-22T00:07:14.713 回答 This answer is useful -1 只是不要使用列表，使用数组 MyObj[] myObjs。不需要使用 TypeToken 方式 于 2013-09-25T18:26:35.103 回答 Related 1 php - 如何在 zlib_decode() 之后获取未压缩的文件名？ 1 php - 使用正则表达式将字符串拆分为数组以获得键值对 1 android - 在 Android 上使用内部联接更新查询 1 ruby - 在 Ruby 1.9 中，正则表达式 /c?ab/ 应该首先匹配“cab”还是“ab”？ 1 ios - 字符串不会显示在 UITextView 2 javascript - 阅读 XML JS - jquery 1 ios - 在 Objective-C 中调用 C 函数消息传递样式 1 razor - ServiceStack Razor web.config 2 python - 为 python 扭曲：python v3 是否有 ETA 或 beta 版本？ 1 actionscript-3 - Actionscript 3 不适用于影片剪辑 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</stringmap></listresult<stringmap></t></t>

> ID：13950415
> 
> 赞同：3
> 
> 时间：
> 
> 标签：serialization, gson

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T00:07:14.713

```
Type fooType = new TypeToken<ListResult<StringMap>>() {}.getType();
Gson gson = new Gson();
ListResult<StringMap> model = gson.fromJson(strResult, fooType); 
```

`Gson`无法读懂您的想法，也无法自行确定通用类型；）

[https://sites.google.com/site/gson/gson-user-guide#TOC-Serializing-and-Deserializing-Generic-Types](https://sites.google.com/site/gson/gson-user-guide#TOC-Serializing-and-Deserializing-Generic-Types)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-25T18:26:35.103

只是不要使用列表，使用数组 `MyObj[] myObjs`。不需要使用 TypeToken 方式

# javascript - 用于验证字符和数字的正则表达式

> ID：13950416
> 
> 赞同：1
> 
> 时间：2012-12-19T10:35:38.840
> 
> 标签：javascript, regex, dom

我想验证一个文本输入字段，该字段的输入包含四个默认字符，后跟至少 5 个数字。

没有最大数量限制。

例如：**abcd123456**

任何人都可以帮助我使用 javascript 中的正则表达式吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T10:38:05.040

This should be what you're looking for:

```
var text = document.getElementById('input').value,
    regex = /^[a-z]{4}[0-9]{5,}$/;
if (!regex.test(text)) {
    alert('Not valid');
} 
```

Here is an example: [http://jsfiddle.net/FaYSh/](http://jsfiddle.net/FaYSh/)

```
var input = document.getElementById('input'),
    result = document.getElementById('result'), 
    regex = /^[a-z]{4}[0-9]{5,}$/;

input.onkeyup = function () {
    var text = this.value;
    if (!regex.test(text)) {
        result.innerHTML = 'Not valid';
    } else {
        result.innerHTML = 'Valid';        
    }
}
​ 
```

If your default characters are letters in the range `a-z` this will work.

# c# - 如何在 C# 中读取 MSI 属性

> ID：13950420
> 
> 赞同：11
> 
> 时间：2012-12-19T10:35:43.080
> 
> 标签：c#, windows-installer

我想在桌面应用程序中读取 C# 中 MSI 的属性。我正在使用以下代码：

```
 public static string GetMSIProperty( string msiFile, string msiProperty)
    {
        string retVal= string.Empty ;

        Type classType = Type.GetTypeFromProgID("WindowsInstaller.Installer");
        Object installerObj = Activator.CreateInstance(classType);
        WindowsInstaller.Installer installer = installerObj as WindowsInstaller.Installer;

        Database database = installer.OpenDatabase("C:\\DataP\\sqlncli.msi",0 );   

        string sql = String.Format("SELECT Value FROM Property WHERE Property=’{0}’", msiProperty);

        View view = database.OpenView(sql);

        Record record = view.Fetch();

        if (record != null)
        {
            retVal = record.get_StringData(1);
        }
        else
            retVal = "Property Not Found";

        return retVal;            
    } 
```

但是我收到错误，因为 System.Runtime.InteropServices.COMException 未处理。

sqlncli.msi 文件物理上放置在 c:\DataP 位置。在调试时我发现数据库不包含 installer.OpenDatabase() 语句之后的数据。

请建议我如何解决此问题并在 c# 中获取 MSI 属性。

提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-20T18:41:14.003

Windows Installer XML 的部署工具基础 (WiX DTF) 是 Microsoft 的一个开源项目，其中包括 Microsoft.Deployment.WindowsInstaller MSI 互操作库。使用它来执行这些类型的查询要容易得多和可靠得多。它甚至有一个 LINQ to MSI 提供程序，允许您将 MSI 表视为实体并针对它们编写查询。

```
using System;
using System.Linq;
using Microsoft.Deployment.WindowsInstaller;
using Microsoft.Deployment.WindowsInstaller.Linq;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            using(var database = new QDatabase(@"C:\tfs\iswix.msi", DatabaseOpenMode.ReadOnly))
            {
                var properties = from p in database.Properties
                                 select p;

                foreach (var property in properties)
                {
                    Console.WriteLine("{0} = {1}", property.Property, property.Value);
                }
            }

            using (var database = new Database(@"C:\tfs\iswix.msi", DatabaseOpenMode.ReadOnly))
            {
                using(var view = database.OpenView(database.Tables["Property"].SqlSelectString))
                {
                    view.Execute();
                    foreach (var rec in view) using (rec)
                    {
                        Console.WriteLine("{0} = {1}", rec.GetString("Property"), rec.GetString("Value"));
                    }
                }
            }

            Console.Read();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T09:33:12.357

我是通过以下方式做到的：

```
String inputFile = @"C:\\Rohan\\sqlncli.msi";

// Get the type of the Windows Installer object
Type installerType = Type.GetTypeFromProgID("WindowsInstaller.Installer");

// Create the Windows Installer object
WindowsInstaller.Installer installer = (WindowsInstaller.Installer)Activator.CreateInstance(installerType);

// Open the MSI database in the input file
Database database = installer.OpenDatabase(inputFile, 0);

// Open a view on the Property table for the version property
View view = database.OpenView("SELECT * FROM _Tables");

// Execute the view query
view.Execute(null);

// Get the record from the view
Record record = view.Fetch();

while (record != null)
{
    Console.WriteLine(record.get_StringData(0) + '=' + record.get_StringData(1) + '=' + record.get_StringData(2) + '=' + record.get_StringData(3));
    record = view.Fetch();
} 
```

它为我工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T07:04:20.063

SQL 字符串不正确。它应该是：

```
SELECT `Value` FROM `Property` WHERE `Property`.`Property` = ’{0}’ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-20T06:16:10.800

我试图重用这段代码，我必须做的唯一改变是让 Devashri 发布的代码工作是这一行：

```
string sql = String.Format("SELECT `Value` FROM `Property` WHERE `Property`='{0}'", msiProperty); 
```

注意单引号！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-04-27T22:15:39.940

截至 2020 年 4 月，它将是

```
Type installerType { get; set; }
WindowsInstaller.Installer installerObj { get; set; }
...
installerType = Type.GetTypeFromProgID("WindowsInstaller.Installer"); 
installerObj = (WindowsInstaller.Installer)Activator.CreateInstance(installerType);
var installer = installerObj as WindowsInstaller.Installer;
...
private void lnkSelectMsi_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
{
   WindowsInstaller.Database msiDatabase = installerObj.OpenDatabase(txtMsiPath.Text, 0);
   readMsiTableColumn(msiDatabase, cmbTable.Text, cmbColumn.Text);
}

   private void readMsiTableColumn(WindowsInstaller.Database msiDatabase, string table)
    {
        WindowsInstaller.View msiView = null;
        Record record = null;
        string s = string.Empty;
        try
        {
            msiView = msiDatabase.OpenView($"Select * from _Columns");
            msiView.Execute();
            record = msiView.Fetch();
            int k = 0;
            while (record != null)
            {
                if (record.StringData[1].Equals(table, StringComparison.OrdinalIgnoreCase))
                {
                    k++;
                    s += $"{record.StringData[3],-50} ";
                }
                record = msiView.Fetch();
            }
            s += nl;
            s += "".PadRight(50 * k, '-') + nl;
            msiView.Close();

            msiView = msiDatabase.OpenView($"Select * from {table}"); 
            msiView.Execute();
            record = msiView.Fetch();

            while (record != null)
            {
                string recordValue = string.Empty;
                for (int i = 1; i < record.FieldCount + 1; i++)
                {
                    try { recordValue += $"{record.StringData[i],-50} "; }
                    catch (Exception ex) { recordValue += $"{i}. err {ex.Message}; "; }
                }
                s += recordValue + nl;
                record = msiView.Fetch();
            }
            msiView.Close();
            txtRes.Text = s;
        }
        catch (Exception ex) { txtRes.Text = ex.Message; }
    } 
```

# visual-studio-2010 - 将 RGB 图像转换为 HSI 颜色空间

> ID：13950429
> 
> 赞同：2
> 
> 时间：2012-12-19T10:36:04.863
> 
> 标签：visual-studio-2010, visual-c++, opencv, java-io, visual-c++-2010

我正在尝试使用 visual c++ express 2010 将 RGB 图像转换为 HSI 颜色空间并打开 CV 2.3.1 并遇到编译错误问题。请任何人都可以帮我解决这个问题，我需要知道如何使用矩阵来保存 H、S 和 I 的值。提前致谢。我使用的代码是。

```
#include "stdafx.h"
#include <cmath>
#include <cstdlib>
#include <iostream>
#include <string>
#include <opencv2/opencv.hpp>
using namespace std;

#include "cxcore.h"
#include "cv.h"
#include <highgui.h> 
using namespace cv;

const string openCVpath = string(getenv("ProgramFiles"))+"\\OpenCV-2.3.1\\samples\\c\\";

int main (int, char**) {
    //call image 
    Mat img1 = imread(openCVpath+"image1.jpg");
    unsigned char *input = (unsigned char*)(img1.data);

    // To get pixel values of i-th row and j-th cloumn,
    double R,G,B,min,H,S,I;
    int  i,j;
    const double PI= 3.14;
    for(int i = 0;i < img1.rows ;i++){
        for(int j = 0;j < img1.cols ;j++){
            B = input[img1.step * j + i ] ;
            G = input[img1.step * j + i + 1];
            R = input[img1.step * j + i + 2];
        }
        // calculate the values of Hue, Saturation and Intensity
        min = R;
        if (G < min)
            min = G;
        if (B < min)
            min = B;
        I = (R+G+B)/3.0;
        S = 1 - min/I;
        if (S == 0.0)
        {
            H = 0.0;
        }
        else
        {
            H = ((R-G)+(R-B))/2.0;
            H = H/sqrt((R-G)*(R-G) + (R-B)*(G-B));
            H = acos(H);
            if (B > G)
            {
                H = 2*PI - H;
            }
            H = H/(2*PI);
        }
    }
     ifstream f("file.txt");  //...in your routine
//};
imshow("Image",img1);

    cvWaitKey(0);
    return 0;
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:50:25.580

你为什么不使用这个：

```
cvtColor(img_rgb,img_hsv,CV_RGB2HSV); 
```

另请参阅[从 RGB 到 HSV 的 OpenCV 图像转换](https://stackoverflow.com/questions/3017538/opencv-image-conversion-from-rgb-to-hsv)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:49:20.937

我没有收到编译错误。但我需要进行以下更改才能让您的程序运行：

```
B = input[img1.step * i + 3*j ] ;
G = input[img1.step * i + 3*j + 1];
R = input[img1.step * i + 3*j + 2]; 
```

我不得不切换`i`，`j`因为这是 opencv 组织内存的方式。此外，由于 3 个 rgb 值，您需要每像素提前 3 个字节。

将下一行中的大括号移到上一行`ifstream f("file.txt");`。否则，您只会计算图像最后一行的值。

删除这一行（我不确定，它应该做什么）：

```
 ifstream f("file.txt"); 
```

在 for 循环中，我添加了以下内容只是为了可视化结果，因为到目前为止，您还没有对计算结果做任何事情：

```
input[img1.step * i + 3*j ] = 255*H;
input[img1.step * i + 3*j + 1] = 255*S;
input[img1.step * i + 3*j + 2] = I; 
```

# ruby-on-rails - Rails 3.0.17 发送内联附件而不是常规附件

> ID：13950434
> 
> 赞同：0
> 
> 时间：2012-12-19T10:36:24.100
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionmailer, email-attachments

因此，我们刚刚在 Ruby 1.8.7 企业版之上将我们的项目升级到 Rails 3.0.17（请不要问为什么这个特定版本，只是发生了这样的事）。

我有生成 CSV 数据并通过电子邮件将其作为文件发送的方法。

```
# contact_mailer.rb
def send_payments_report
  attachments["report.csv"] = {
    :content => Payment.generate_csv_report,
    :mime_type => "text/csv"
  }

  mail(
    :from => "from@example.com",
    :subject => "Payments report",
    :to => "to@example.com"
  )   
end 
```

这是它返回的内容：

`=> #<Mail::Message:2231891440, Multipart: true, Headers: <Date: Wed, 19 Dec 2012 11:48:05 +0200>, <From: from@example.com>, <To: to@example.com>, <Message-ID: <50d18d555dcdc_2269838ab93812784@artem.local.mail>>, <Subject: Payments report>, <Mime-Version: 1.0>, <Content-Type: multipart/mixed; >, <Content-Transfer-Encoding: 7bit>>`

电子邮件本身显示为没有附件的纯文本：

```
--
Date: Wed, 19 Dec 2012 11:48:05 +0200
Mime-Version: 1.0
Content-Type: text/csv;
charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
filename=report.csv
Content-ID: <50d18d555dcdc_2269838ab93812784@artem.local.mail>

"customer id","reference nr","invoice id","invoice type","invoice sum","sum paid","payment date"
"1035","010294","7113","Fine","250.00","100.00","2012-11-15"
"1035","010294","6132","Fine","250.00","250.00","2012-11-15"
"1035","010294","5241","Fine","850.00","650.00","2012-11-15"
-- 
```

我尝试附加现有文件，但它以相同的方式显示。它在 Rails 2.3.9 上完美运行。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:06:01.730

我似乎已经解决了这个问题。这里我如何调用该`mail`方法：

```
mail(
  :from => "from@example.com",
  :subject => "Payments report",
  :to => "to@example.com"
) do |format|
    format.text {render :text => ""}
end 
```

# c - 释放整个列表并将 head 设置为 NULL

> ID：13950435
> 
> 赞同：0
> 
> 时间：2012-12-19T10:36:24.553
> 
> 标签：c, list

这是任务。给它一个链表，释放所有内存并将 head 设置为`NULL`.

这是我的功能：

```
void free_list(struct Node *node)
{
    while (node)
    {
        free(node);
        node=node->next;
    }
} 
```

它不会输出任何错误，只是不会做任何事情。还有一件事，如何检查内存是否被释放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:39:34.240

提示出了什么问题而不是示例代码，因为这是家庭作业...

1.  `node`释放后无法可靠访问。存储`node->next`释放前的值。
2.  您正在`Node`按值传递指针。如果您想要`NULL`调用者的指针，请改用指向指针的指针。

没有可移植的方法来检查内存是否已释放，但是如果您想检查程序退出时是否没有内存泄漏，您可以研究[valgrind之类的工具。](http://valgrind.org/)

请注意，您无法检查内存位置的内容以确保内存已被释放。调用`free`只是将内存的所有权传回给系统；它可能会在将来的任何时候重新分配（并更新其值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:40:00.577

1.  您应该在释放当前节点之前获取下一个节点
2.  如果要分配给头部，则需要将其地址传递给函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T10:51:47.337

```
void free_list(struct Node **head)
{
    struct node *nnode, *cnode;
    cnode = *head;

    while (cnode)
    {
        nnode = cnode->next;
        free(cnode);
        cnode = nnode;
    }

    *head = NULL;
} 
```

像这样称呼它..,,

`free_list(&head);`

**编辑：**

*   释放节点后您正在访问同一个节点`node=node->next;`，您必须在释放节点之前存储下一个指针。

# jquery - JQuery 验证：验证隐藏字段

> ID：13950436
> 
> 赞同：8
> 
> 时间：2012-12-19T10:36:26.303
> 
> 标签：jquery, jquery-validate

自 JQuery 验证插件版本发布以来`1.9.0`，隐藏字段已自动从验证检查中省略 [[来源](http://bassistance.de/2011/10/07/release-validation-plugin-1-9-0/)]。

根据[发行说明](http://bassistance.de/2011/10/07/release-validation-plugin-1-9-0/)，解决此问题的方法是`ignore: []`在验证功能中进行设置。

使用 version `1.10.0`，我无法让它适用于使用`display: none`or隐藏的输入字段`visibility: hidden`。

我的验证是使用类（例如，`class="required"`）完成的，验证功能相当基本：

**jQuery**

```
$("form").validate({
    ignore: [],  
    errorPlacement: function(error, element) {
        error.appendTo( $('#error-message') )
    },
    invalidHandler: function() {
        //do something 
    },
    submitHandler: function() {
        //do something else
    }
}); 
```

**工作示例：http: [//jsfiddle.net/fbCVY/](http://jsfiddle.net/fbCVY/)**

谁能指出我哪里出错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T12:58:42.680

我认为您需要为每个标签提供唯一属性`id`和唯一属性，以便验证插件可以找到字段并区分它们。这两个“隐藏”字段没有通过验证，因为表单上的第一个字段通过了，并且该结果用于其他两个字段。`name``input`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T13:22:30.137

尝试使用规则：

```
$("form").validate({
    ignore: "",
    rules: {
        name: ["aa", "ee"]
    },  
    errorPlacement: function(error, element) {
        error.appendTo( $('#error-message') )
    },
    invalidHandler: function() {
        //do something 
    },
    submitHandler: function() {
        //do something else
    }
}); 
```

[提琴手](http://jsfiddle.net/fbCVY/13/)

问候。

# ios - 仅允许访问 HTML5 中的相机设备

> ID：13950437
> 
> 赞同：11
> 
> 时间：2012-12-19T10:36:35.367
> 
> 标签：ios, html, input, camera

我目前正在使用 HTML5 中的 iPhone 相机开发应用程序

```
<input type="file" accept="capture=camera"> 
```

问题是我有一个小清单，可以让我在图书馆和相机之间进行选择。

![在此处输入图像描述](../Images/66b63866dc038918cf6c708686eab2a4.png)

我的想法是有两个按钮，一个用于图书馆，另一个用于相机。

我知道只给图书馆但不给相机的方法。

**问题：**有没有办法区分这两种类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-08T16:51:06.867

不幸的是不可能：/

摘自[HTML 媒体捕获 - 安全和隐私注意事项](http://www.w3.org/TR/html-media-capture/#security)：

> 此外，建议用户代理实现在启用输入设备时向用户提供指示，并使用户可以终止此类捕获。同样，建议用户代理提供用户控制，例如允许用户：
> 
> *   如果存在
>     多个相同类型的设备（例如前置摄像头和
>     主摄像头），请选择要使用的确切媒体捕获设备。
>     
>     
> *   在
>     视频捕获模式下禁用声音捕获。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:56:08.497

我也有这个问题，我没有找到解决方案，我只找到非官方消息来源说这是不可能的。您所能做的就是要求`video/*`或`image/*`通过`accept`属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-08T23:27:44.170

这在 iOS6 到 10 中是不可能的。它确实适用于 Android 3.0+。

该`capture`属性由[HTML Media Capture](https://addpipe.com/blog/correct-syntax-html-media-capture/)引入，应该强制 iOS 直接跳转到 cam 应用程序，但它不受支持。

从[规格](https://w3c.github.io/html-media-capture/)：

> capture 属性是一个布尔属性，如果指定，则表明直接从设备环境中捕获媒体是首选的。

PS：您的代码略有错误，您应该使用 `<input accept="video/*,image/*" capture >`：

1.  捕捉视频和照片
2.  直接跳转到 cam（支持时）

有关详细信息，请参阅[正确的 HTML 媒体捕获语法](https://addpipe.com/blog/correct-syntax-html-media-capture/)。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-06-16T02:36:41.753

编写以下 takePhoto 动作方法：

```
- (IBAction)takePhoto:(UIButton *)sender { 
     UIImagePickerController *picker = [[UIImagePickerController alloc] init];
     picker.delegate = self;
     picker.allowsEditing = YES;
     picker.sourceType = UIImagePickerControllerSourceTypeCamera;
     [self presentViewController:picker animated:YES completion:NULL];
} 
```

最后，我们对 selectPhoto 操作方法执行相同的操作，但将 sourceType 更改为 UIImagePickerControllerSourceTypePhotoLibrary。

```
- (IBAction)selectPhoto:(UIButton *)sender {  
     UIImagePickerController *picker = [[UIImagePickerController alloc] init];
     picker.delegate = self;
     picker.allowsEditing = YES;
     picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
     [self presentViewController:picker animated:YES completion:NULL];
} 
```

实现 UIImagePickerController 的委托方法

当用户用相机拍照并调整图像大小时（允许调整照片大小，因为我们在创建图像选择器时说过allowEditing = YES）。它是一个 NSDictionary，其中包含原始图像和编辑后的图像（可通过标签 UIImagePickerControllerEditedImage 访问）。

```
(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

     UIImage *chosenImage = info[UIImagePickerControllerEditedImage];
     self.imageView.image = chosenImage;
     [picker dismissViewControllerAnimated:YES completion:NULL];

} 
```

# algorithm - Subset sum recursively to get as near as possible to a given number

> ID：13950442
> 
> 赞同：0
> 
> 时间：2012-12-19T10:36:49.130
> 
> 标签：algorithm, recursion, subset-sum

> **Possible Duplicate:**
> [Subset Sum algorithm](https://stackoverflow.com/questions/4355955/subset-sum-algorithm)

I have a very easy problem which I can't figure out. I'm given an array of numbers and a value I need to get as close as possible to by making combinations of the sets. This algorithm has to be recursively. The result can't exceed the given number.

For example, given an array of {6, 9, 4, 2, 7} and I need to get as close as possible to 14\. Then the result is 13 (by choosing the elements 9 and 4).

This is what I have so far:

A recursive function with 2 parameters: an index that gives information about the element you're about to add (or not) and the sum so far. For every element I make a binary decision: add it to the sumSoFar or not. I'm a bit confused about the base cases since the result can't exceed the number I have to get as close as possible to.

Could anyone help me with this?

Thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:45:37.950

Try sth like this:

```
bestsum = 0;
recurisve(index, sum){
    if index > max_index{
        if sum is better than bestsum{
            bestsum = sum
        }
    }
    recursive(index + 1, sum + element[index]);
    recursive(index + 1, sum);
} 
```

`if sum is better than bestsum` should check all condition to determine if, having two results: `sum` and `bestsum`, `bestsum` is better result than `sum`.

# java - Encryption/Decryption over the HTTPS Network

> ID：13950446
> 
> 赞同：2
> 
> 时间：2012-12-19T10:37:01.890
> 
> 标签：java, android, ios, encryption, https

In our app, we are communication with the back-end over the HTTPS network. My confusion is, is there any benefit of using encryption over that.

EDIT: By using encryption, I want to use AES encryption to send request over the network that is already secure. So I was confused if it is extravagant to use AES encryption over already secure connection.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T10:46:28.903

It's overkill. An SSL connection is all you need if you properly configure your server and know how to manage certificates. Adding another layer of encryption (you didn't describe it, so I assume it's another SSL clone) certainly can't harm, but you have to carefully design and implement it.

The reason why it's not common is because you need to implement your protocol both on the client and on the server, which is not a little effort. And supposedly if you can't keep SSL secure, you shouldn't implement a proprietary protocol altogether.

Also, note that the custom protocol only makes sense if you deploy your **native** client (you tagged "iOS", so I mean a native C/Objective-C implementation) **before** the connection: it's useless to have a Javascript client (you also mentioned HTTP so I guess it's a standard www application) transmitted, because if the attacker can break SSL, it can certainly manipulate the Javascript and at this point your protocol is no secure anymore.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T12:02:57.053

它看起来有点过分，但我不会完全拒绝。

根据您的应用程序、您的安全问题和您工作的环境，这个额外的“安全层”可以在传输之前对您的数据进行加密，这可能会带来回报。也许接收端不应该能够看到数据并将它们重新路由到其他地方，也许是因为它的不可信（第三方应用程序），也许是简单的数据隐私原因（法律）。

我不知道 AES 是否是一个好的解决方案，我会选择 RSA .. 但那是另一个故事。

# mysql - MySQL计算字段的好习惯

> ID：13950450
> 
> 赞同：2
> 
> 时间：2012-12-19T10:37:12.013
> 
> 标签：mysql

我有两个如下表：

![ERD](../Images/149d4172dbe13703102e669366eac6fc.png)

我只是想知道使用这种结构并将所有发票金额的总和放在父表上是否是一个好习惯，以便获得更快的请求并避免一些重复计算（结果将在之后使用触发器更新在发票表上）？

还是获取规范化表而不缓存计算字段的类型更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:47:43.387

我认为使用给定结构存储总数没有任何问题。您必须`invoice_number`和`invoice_date`用作键，因此没有混淆的危险。显然只计算一次更有效。基本上，为什么每次需要结果时都进行计算？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:56:38.340

*这本身*并不是坏习惯。但是，在实施之前您应该三思而后行。非规范化可能会提高性能，但并非总是如此，而且在可维护性方面也有成本。

每个项目平均有多少~~个子项目~~发票？如果只有少数，那么计算总数的成本可以忽略不计。在这种情况下不要反规范化。

对于一个给定的项目，~~子项目~~发票清单多久可能更改一次？如果很少，那么您可能应该预先计算总数。

相反，如果~~子项目~~发票列表可能“经常”更改（与您需要读取/计算总和的频率相比），那么您可能会花费更多时间重新计算总和而不是必要的。

底线：在确定现实中的瓶颈之前不要进行非规范化。一旦确定了真正的性能问题，以后重写应用程序以解决重构问题应该相对容易。

# sql-server - TDE Enabled database connection string in ADO.Net using C#

> ID：13950451
> 
> 赞同：0
> 
> 时间：2012-12-19T10:37:17.797
> 
> 标签：sql-server, c#-4.0, ado.net, connection-string, tde

I have a .mdf file and i can attach it at run time and access it from C#.But if the same file is TDE enabled i am not getting the format of connection string to be used for attaching it.Please help

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:06:24.457

无法从连接字符串附加 TDE 数据库。它必须永久连接到企业版服务器，并且[必须正确设置解密证书](http://technet.microsoft.com/en-us/library/ff773063.aspx)。

# css - Can't force overflow-x: visible

> ID：13950453
> 
> 赞同：1
> 
> 时间：2012-12-19T10:37:25.460
> 
> 标签：css

I have container with following styles:

```
overflow-y:auto;
overflow-x:visible;
position:relative; 
```

Inside I have table with following styles:

```
position:relative; 
```

For some reason I still see both scrollbars (x and y). I can't force x scrollbar to disappear. I can't put in to fiddle for now because of lots of scripts and so on but I will do it soon... Anyway when I check container in chrome it has `overflow-x: visible` and scrollbar is visible - how it is possible???

edit -----------------

Here is fiddle: [http://jsfiddle.net/Ncd2Y/1/](http://jsfiddle.net/Ncd2Y/1/) why x scrollbar is visible???

Guys I want the content to be visible on x axis... Content has to be visible (outside container) and scrollbar not visible...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:44:39.563

it is visible because its css property is visible

```
.css({"overflow-y":"hidden","overflow-x":"hidden"}); 
```

will remove all scrollbars.

your css:

```
#container {
background:green;

width:100px;
height:100px;
display:block;
overflow-y:auto;
overflow-x:hidden; 
```

}​</p>

to achieve your final goal, you should exclude the table from the container and positionin it absolute above and z index it lower than the table: see your updated fiddle:

[http://jsfiddle.net/Ncd2Y/2/](http://jsfiddle.net/Ncd2Y/2/)

your workarround css

```
#container {
background:green;
position:absolute;
width:100px;
height:100px;
display:block;
overflow-y:auto;
overflow-x:hidden;
word-wrap: break-word;
z-index: -10; 
```

}​</p>

and worarround html:

```
 <div id="container">

</div>
 <table id="table">
        <tbody>
            <tr>
                <td>column</td>
                <td>column</td>
                <td>column</td>
                <td>column</td>
                <td>column</td>
                <td>column</td>
            </tr>
        </tbody>            
    </table>
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:44:34.830

```
overflow-x:hidden; 
```

will solve problem..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T10:44:16.687

`overflow-x: visible`将导致内容可见。 `overflow-x: hidden`会隐藏它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-22T06:44:10.653

这对我有用。

不要浪费时间。尝试这个...

```
$(document).ready(function(){
    var bugfix = document.createElement('style')
    bugfix.innerHTML = "body {overflow-x: hidden !important;}";
    document.body.appendChild(bugfix);
  }); 
```

# jquery - append iframe to div success but ready() not working

> ID：13950457
> 
> 赞同：0
> 
> 时间：2012-12-19T10:37:47.070
> 
> 标签：jquery

I have a onclick event like this:

```
function OnVisClicked() {
    $("#overlay").animate({opacity: "toggle",width: "3000px",height: "3000px"}, 300);
    $('<iframe />', {
    name: 'myFrame',
    id:   'mytFrame',
    width: 724,
    height: 535,
    frameborder:"0",
    scrolling: "no",
    allowTransparency: "true",
    src: "the link..."
}).appendTo('.myDiv').ready(function(){
    $(".myBigDiv").show();
}); 
    $("#someOtherDiv").css("display", "none");
} 
```

Originally `myBigDiv` was set to `display:none`. After I clicked on my button, the `myFrame` is successfully appended to `myDiv`. But `myBigDiv` was still `display:none`. I added a breakpoint inside the `ready()` but clearly the program didn't entered into it.

Addtional information after I got the answer and the solution:

My DOM cannot be fully loaded because of other web parts on the page, so `ready()` can never be called.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:43:34.117

只有当文档准备好时，ready() 函数才会被调用一次，[http://api.jquery.com/ready/](http://api.jquery.com/ready/) 我想你正在寻找其他东西，比如 onload()

```
function OnVisClicked() {
    $("#overlay").animate({opacity: "toggle",width: "3000px",height: "3000px"}, 300);
    $('<iframe />', {
    name: 'myFrame',
    id:   'mytFrame',
    width: 724,
    height: 535,
    frameborder:"0",
    scrolling: "no",
    allowTransparency: "true",
    src: "the link..."
}).appendTo('.myDiv');

document.getElementById("mytFrame").onload = function() {

    $(".myBigDiv").show();
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:48:41.920

以下所有三种语法都是等效的：

*   $(文档).ready(处理程序)
*   $().ready(handler) （不推荐）
*   $（处理程序）

正如**[Jquery](http://api.jquery.com/ready/)**文档所说。

所以你不应该使用它。您可以使用[`done()`](http://api.jquery.com/deferred.done/)

```
.appendTo('.myDiv').done(function(){
    $(".myBigDiv").show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T10:47:08.483

.ready() 方法通常与属性不兼容。如果必须使用 load，请不要使用 .ready() 或使用 jQuery 的 .load() 方法将 load 事件处理程序附加到窗口或更具体的项目，如图像。

`.ready( handler )`- DOM 准备好后执行的函数。

如果您想在页面加载时附加 iframe，请尝试以下代码。

```
 $(document).ready(function() {

      $('<iframe />', {
    name: 'myFrame',
    id:   'mytFrame',
    width: 724,
    height: 535,
    frameborder:"0",
    scrolling: "no",
    allowTransparency: "true",
    src: "the link..."
}).appendTo('.myDiv');

    }); 
```

如果我正确理解您的问题，这应该对您有所帮助。如果您有任何问题，请告诉我。

# asp.net - htmleditorextender does not display toolbar

> ID：13950459
> 
> 赞同：1
> 
> 时间：2012-12-19T10:37:53.990
> 
> 标签：asp.net, ajaxcontroltoolkit

I'm working on Asp.Net 4.5 on visual studio2012\. I had an ajaxcontrolkit htmleditorextender which has targetId bind on asp, textbox. However i did everything in the asp.net tutorial but i could not succeed on displaying the toolbar.

I have checked page register, toolkitscriptmanager. Still it's the same. Any ideas? And here is my code:

```
 <%@ Register TagPrefix="asp" Namespace="AjaxControlToolkit" Assembly="AjaxControlToolkit"%> 
```

```
 <asp:TextBox
    ID="txtComments"
    TextMode="MultiLine"
    Columns="60"
    Rows="8"
    runat="server" />

    <asp:HtmlEditorExtender
    TargetControlID="txtComments"
    runat="server" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:41:17.320

您是否添加了属性：

```
DisplaySourceTab="True" 
```

到您的 htmleditorextender ？（默认为假）

在代码中有一个错误：

```
... runat="server"/> 
```

应该

```
runat="server"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T16:30:29.450

我遇到了同样的问题，并通过在我的代码中添加以下行来解决它：

```
<ajaxtoolkit:toolkitscriptmanager runat="server" id="ScriptManager1" /> 
```

我最初使用的是

```
<asp:ScriptManager id="ScriptManager1" runat="server"></asp:ScriptManager> 
```

但是通过用上面的代码替换它，工具栏出现了，到目前为止，我没有任何不利影响。

希望这可以帮助。

# javascript - Rails technique to execute javascript after redirect

> ID：13950464
> 
> 赞同：12
> 
> 时间：2012-12-19T10:38:06.797
> 
> 标签：javascript, jquery, ruby-on-rails

Rails app (3.2.8) and turbolinks (*not sure if relevant*) enabled.

1.  I have some information, a `link` on a users show page. (E.g. A notification that something has changed.)
2.  When the user clicks on the link I want to direct him to the page **and**
3.  Visually **highlight the elements that changed.**

Currently I'm planning to handle it like this:

Create the links so they are of the form:

`project2/comment.1453`

Create a `notifications controller,` which gets the `projects2` and the type of change `comment` and its id `1453`. So in theory I want to redirect to `projects2` and highlight the comment with id 1453 on that page. The problem is: After the redirect how do I highlight the comment?

notificationscontroller.rb (Pseudo code!)

```
def show
  project = Project.find(params[:project_id])
  comment = Comment.find(params[:commment_id])
  redirect_to project AND highlight!
end 
```

During my research I've come across Backbone, and it looks like Backbones router could solve this problem by responding to the url with a function (the highlighting of the comment). But I don't have any experience with Backbone.

I'm not sure what the general approach to this sort of functionality is. And would like to avoid going down the wrong path. Would be great if you could help me out.

Edit: Sort of a mini question: I'm not sure which character to use for `comment.1453` is `#`a better choice? (`comment#1453`)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T12:48:20.377

除了在重定向到的页面上包含 javascript 之外，您无法在重定向后运行 javascript。

您想要的是将此请求中的信息传递到下一个（重定向的）请求。

闪光灯是一个很好的方法来做到这一点。通常你会用它来发送短信：

```
redirect_to project, notice: "Project foo bar message" 
```

或者

```
flash[:notice] = "Project foo bar message"
redirect_to project 
```

没有什么可以阻止您在闪存中使用其他标识符并将 JSON 存储在其中。

```
flash[:highlight_ids] = "[12, 43, 472, 482]"
redirect_to project 
```

然后在您的布局中或某处将此 Flash 消息提取到 JavaScript：

```
var highlight_ids = <%= flash[:highlight_ids] %>; 
```

然后用你的 javascript 魔法来突出显示实际元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T12:49:00.827

一种可能的方式：

在会话中或直接在 cookie 中存储 id（以及可能的对象类型，如果需要突出显示评论）（`show`伪代码中的操作）

```
def show
  project = Project.find(params[:project_id])
  comment = Comment.find(params[:commment_id])
  cookies[:highlight_id] = comment.id
  cookies[:highlight_type] = 'Comment' # optionally
  redirect_to project
end 
```

在项目控制器`show`动作

```
def show
  ...
  if cookies[:highlight_id] and cookies[:highlight_type]
    @highlight_id = cookies[:highlight_id]
    @highlight_type = cookies[:highlight_type]
    cookies.delete[:highlight_id]
    cookies.delete[:highlight_type]
  end 
```

在评论视图中

```
<div class="some_class <%= highlight(@comment, @highlight_id, @highlight_type %>" ... 
```

像哪里`highlight`的帮手

```
def highlight(object, object_id, object_type)
  if object_id and object_type and object.is_a?(object_type.classify.constantize)
    'highlighted'
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-02T20:09:06.303

偶然发现这篇文章并决定添加一个我在 Rails 4.1 中使用的解决方案。

```
class CoolController < ApplicationController
  respond_to :html, :js

  def controller_action
    # controller stuff

    respond_to do |format|
      format.html {
        return redirect_to my_redirect_path, notice: "Successfully updated payment method!"
      }
      format.js
    end
  end
end 
```

js 文件`controller_action.js.erb`被执行，页面成功重定向到`my_redirect_path`.

# iphone - 检测设备是否超出 wifi 范围

> ID：13950468
> 
> 赞同：0
> 
> 时间：2012-12-19T10:38:30.700
> 
> 标签：iphone, objective-c, ios, ipad

是否有任何事件或任何其他方式来检测 iPad 或 iPhone 何时超出特定 WiFi 范围。我搜索了这个，只能找到**可达性**类，而且我必须在后台不断检查连接性，这在我的情况下不是首选。任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:53:26.437

这是可用于查找 wifi/互联网连接的示例代码

**.h 文件**

```
@class Reachability;

@interface AppDelegate : UIResponder <UIApplicationDelegate>
{
    Reachability* wifiReach;
} 
```

**.m 文件**

**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        self.viewController = [[HPViewController alloc] initWithNibName:@"HPViewController_iPhone" bundle:nil];
    } else {
        self.viewController = [[HPViewController alloc] initWithNibName:@"HPViewController_iPad" bundle:nil];
    }

    _navCon =[[UINavigationController alloc] initWithRootViewController:self.viewController];
    self.window.rootViewController = _navCon;

    // Observe the kNetworkReachabilityChangedNotification. When that notification is posted, the
    // method "reachabilityChanged" will be called.
    [[NSNotificationCenter defaultCenter] addObserver: self selector: @selector(reachabilityChanged:) name: kReachabilityChangedNotification object: nil];
    //Change the host name here to change the server your monitoring
    wifiReach = [[Reachability reachabilityForLocalWiFi] retain];
    [wifiReach startNotifier];
    [self showAlertOfInternetConncetion: wifiReach];

    return YES;
}
//Called by Reachability whenever status changes.
- (void) reachabilityChanged: (NSNotification* )note
{
    Reachability* curReach = [note object];
    NSParameterAssert([curReach isKindOfClass: [Reachability class]]);
    [self showAlertOfInternetConncetion: curReach];
}
- (void)showAlertOfInternetConncetion : (Reachability*) curReach
{
    NetworkStatus netStatus = [curReach currentReachabilityStatus];
    switch (netStatus)
    {
        case NotReachable:
        {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"No Internet connection" message:@"Your internet connection has stopped working. Please check it." delegate:self cancelButtonTitle:nil otherButtonTitles:@"Exit App", nil];
            [alert show];
            [alert release];
        }
        case ReachableViaWWAN:
        {
            NSLog(@"ReachableVia WWAN");
        }
        case ReachableViaWiFi:
        {
            NSLog(@"ReachableVia WiFi");
        }
    }   
}
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 0) {
        exit(0);
    }
} 
```

**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-11T08:19:21.813

使用 Apple 的 SCNetworkReachability 类。阅读[SCNetworkReachability 文档](https://developer.apple.com/library/ios/documentation/SystemConfiguration/Reference/SCNetworkReachabilityRef/index.html)。测试使用：

```
(ReachabilityInst.currentReachabilityStatus().value == ReachableViaWiFi.value) 
```

# cocoa - Application Sandbox: renaming a file doesn't work

> ID：13950476
> 
> 赞同：5
> 
> 时间：2012-12-19T10:38:54.850
> 
> 标签：cocoa, mac-app-store, appstore-sandbox

I have a basic Cocoa app that let's the user manage a list of files. Files are added via drag & drop and I persist the access permissions in a secure bookmark across application restarts.

So far so good. The app is allowed to read and write to the user's files, but renaming fails with a permission error claiming that my app is not allowed to access the parent folder.

Code:

```
[[NSFileManager defaultManager] moveItemAtPath:currentPath 
                                        toPath:newPath error:&error] 
```

Error:

```
Error Domain=NSCocoaErrorDomain Code=513 "“Some image.jpg” couldn’t 
be moved because you don’t have permission to access “some folder” 
```

~~I swear that this used to work just yesterday, nothing changed...~~ (see update below)

Anyway. I would assume that if a user allows access to a file via an Open dialog or drag & drop that a sandboxed application should be allowed to rename the file.

**UPDATE:**

I finally managed to track this down to a change in my code:

I can reproduce the error when I call `NSFileCoordinator.item(at: newSrcUrl, willMoveTo: newDstUrl)` before performing the actual move. If I skip this step, everything works again without any errors in the console.

The full code:

```
let coordinator = NSFileCoordinator()

coordinator.coordinate(writingItemAt: srcURL, options: .forMerging,
                       writingItemAt: dstURL, options: .forMerging) { newSrcUrl, newDstUrl in

    // Calling this first results in "could not get a sandbox extension" error in console:
    //coordinator.item(at: newSrcUrl, willMoveTo: newDstUrl)

    try moveItem(at: newSrcUrl, to: newDstUrl)

    coordinator.item(at: newSrcUrl, didMoveTo: newDstUrl)
} 
```

`item(at oldURL: URL, willMoveTo newURL: URL)` seems to be intended when changing the document's filename extension (e.g. .rtf to .rtfd), which is not the case for my app. Only the file name changes, not the file extension. I figured it would be best practice to call the `will/didMove` methods, but looks like there are side effects.

To recap, all my app does is to ask the user to open a folder (via `NSOpenPanel` so my app gets permission to write to that folder), then my app creates a file in that folder and later on renames it.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T13:03:43.373

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-03T15:04:51.453

**只要**我在`myext`我的`Info.plist`. 这在[Apple 的文档](http://developer.apple.com/library/mac/#documentation/Security/Conceptual/AppSandboxDesignGuide/AppSandboxInDepth/AppSandboxInDepth.html#//apple_ref/doc/uid/TP40011183-CH3-SW22)中有所说明。
这是一段摘录：

> 在这两种情况下，您都必须对应用程序的 Info.plist 文件进行少量更改。您的应用程序应该已经声明了一个文档类型 (CFBundleDocumentTypes) 数组，该数组声明了您的应用程序可以打开的文件类型。
> 
> 对于该数组中的每个文件类型字典，如果该文件类型应被视为潜在相关类型以用于打开和保存目的，则添加键 NSIsRelatedItemType 和布尔值 YES。

从 BenRhayader 的回答修改的代码：

```
 NSFileCoordinator *coordinator = [[NSFileCoordinator alloc] initWithFilePresenter:nil];
    NSURL *sourceURL = chosenFile;
    NSURL *destinationURL = [chosenFile URLByAppendingPathExtension: @"myext"];

    [coordinator coordinateWritingItemAtURL:sourceURL
                                    options:NSFileCoordinatorWritingForMoving
                           writingItemAtURL:destinationURL
                                    options:NSFileCoordinatorWritingForReplacing
                                      error:NULL
                                 byAccessor:^(NSURL *newURL1, NSURL *newURL2)
    {
        NSFileManager *fileManager = [NSFileManager new];

        [coordinator itemAtURL:sourceURL willMoveToURL:destinationURL];
        NSError *moveError;
        BOOL success = [fileManager moveItemAtURL:newURL1 toURL:newURL2 error:&moveError];

        if (success)
        {
            [coordinator itemAtURL:newURL1 didMoveToURL:newURL2];
        }
    }]; 
```

# c# - MVC 3 DropDownFor 和 ViewModel 不工作

> ID：13950479
> 
> 赞同：2
> 
> 时间：2012-12-19T10:38:57.703
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2010

我有 2 个型号：

```
public class Person
{
    public Guid ID { get; set; }
    public string Name { get; set;}
}

public class Event
{
    public Guid ID { get; set; }
    public string EventName { get; set; }
    public virtual Person Owner { get; set; }
} 
```

我有一个视图模型：

```
public class EventViewModel
{
     public EventViewModel() { }
     public Event EventToEdit { get; set; }
     public SelectList People { get; set; }
} 
```

我有我的控制器：

```
public ViewResult Create()
{
     var eve = new Event();
     var vm = new EventViewModel
                 {
                     EventToEdit = eve,
                     People = GetPeopleList(true, eve)
                 }
     return View(vm)
 } 
```

我有我的看法：

```
@Html.DropDownListFor(x => x.EventToEdit.Owner, Model.People) 
```

很明显，它们是为了阅读目的而被删减的。

当我提交我的视图并在`ActionResult Create`

1.  它没有 Owner 的值（列表已正确填充）
2.  ViewModel People 也为空

使用 ViewModel 的目的是将信息传递到视图和从视图传递到控制器，所以首先为什么 People 为空。

其次，也是最重要的，为什么所有者没有得到适当的填充。有可供选择的人。事件名称将通过模型传回，因此 ViewModel 有点工作......

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T10:56:30.980

首先，它应该是：

```
@Html.DropDownListFor(x => x.EventToEdit.Owner.ID, Model.People) 
```

所以 Model.People 是这样的：

```
new SelectList(source, "ID", "Name", source.ID) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T10:59:16.250

检查 HTML 以查看 HTML 中选项元素的值中放置了什么，我怀疑 MVC 无法将此值转换`EventToEdit.Owner`为，因为我认为它只能处理字符串和整数，但如果需要，您可以为此编写自定义模型绑定器使用另一种数据类型。

ASP.Net 不会回发用于填充下拉列表以提高效率的值（[请参阅此处](https://stackoverflow.com/questions/541467/selectlist-returns-as-null-in-mvc-dropdownlist)）。

就我个人而言，我发现下拉列表不是很有帮助，它们旨在直接显示数据库中的数据，因此您可以根据需要重新查询以获取控制器中的 SelectList 值并将它们链接回此重新- 通过在选项值中放置简单的 ID 来查询列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T13:30:08.210

以karaxuna的回答：

> 首先，它应该是：
> 
> `@Html.DropDownListFor(x => x.EventToEdit.Owner.ID, Model.People)`
> 
> 所以 Model.People 是这样的：
> 
> `new SelectList(source, "ID", "Name", source.ID)`

并对此进行扩展：

新视图模型：

```
public class EventViewModel
{
    public EventViewModel() { }
    public Event EventToEdit { get; set; }
    public SelectList People { get; set; }
    public Guid SelectedPerson { get; set; }
} 
```

视图绑定：

```
@Html.DropDownListFor(x => x.SelectedPerson, Model.People) 
```

然后在控制器中：

```
var person = _repository.People.FirstOrDefault(x => x.ID.CompareTo(vm.SelectedPerson) == 0);
vm.EventToEdit.Person = person;
_repository.SaveEvent(vm.EventToEdit); 
```

为了清楚起见，我写了这个答案，任何来搜索的人都可能更喜欢看到完整的页面。

# websphere - Websphere 发布错误 ADMC0043E

> ID：13950483
> 
> 赞同：2
> 
> 时间：2012-12-19T10:39:08.163
> 
> 标签：websphere, rad, websphere-7

我正在使用带有 websphere 7 服务器的 RAD。当我尝试在服务器上发布应用程序时，我收到以下消息：

无法发布到服务器。ADMC0043E: 反序列化接收到的异常时发生错误。

没有像堆栈跟踪这样的更多信息。我也找不到任何有用的在线帮助。有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T12:31:33.700

当您尝试部署时，WebSphere 服务器出现错误，但您在客户端上看不到错误的详细信息。转到服务器 SystemOut.log 文件并在那里检查问题的真正原因（可能是安全凭据问题）。

# c - 谁能解释这段代码会做什么？

> ID：13950488
> 
> 赞同：2
> 
> 时间：2012-12-19T10:39:30.107
> 
> 标签：c

谁能告诉我这个 C 语句是什么意思？

```
 static uint8_t chess_storage(DM%2) host_response[14] ; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T10:41:17.330

它不是有效的 C，你不能`%`在那个位置有一个。而且你也不能把整个`chess_storage(DM%2)`东西都放在那里，除非（可能）它是一个宏，可以做你*可以*做的事情。

这：

```
static uint8_t host_response[14]; 
```

将声明`host_response`为 14 个 8 位无符号整数（又名“字节”）的数组。

如果我们添加这个：

```
#define chess_storage(size)
#define DM 1 
```

然后代码至少变得有效，用预处理器能够计算`chess_storage`的参数代替我们调用宏。`1%2`由于宏是空的，整个术语将消失，留下上面的数组声明。

可能还有其他更“艺术”的宏。

# java - 什么是 java.io.EOFException，消息：无法读取服务器的响应。预期读取 4 个字节，读取 0 个字节

> ID：13950496
> 
> 赞同：50
> 
> 时间：2012-12-19T10:39:54.227
> 
> 标签：java, mysql, glassfish, connection, pool

这个问题在 SO 中被问过几次，在其他网站上被问过很多次。但我没有得到任何令人满意的答案。

我的问题：
我有一个 java web 应用程序，它使用简单的**JDBC通过****Glassfish**应用程序服务器 连接到**mysql**数据库。

 **我在 glassfish 服务器中使用了具有以下配置的连接池：
初始池大小：25
最大池大小：100
池调整大小：2
空闲超时：300 秒
最大等待时间：60,000 毫秒

该应用程序已经部署了 3 个月，并且运行也很完美。
但是从过去 2 天开始，登录时出现以下错误。

**部分堆栈跟踪**

```
com.mysql.jdbc.exceptions.MySQLNonTransientConnectionException: No operations allowed after connection closed.Connection was implicitly closed due to underlying exception/error:  

** BEGIN NESTED EXCEPTION **  

com.mysql.jdbc.CommunicationsException  
MESSAGE: Communications link failure due to underlying exception:  

** BEGIN NESTED EXCEPTION **  

java.io.EOFException  
MESSAGE: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.  

STACKTRACE:  

java.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.  
at com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:1997)  
at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2411)  
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2916)  
at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1631)  
at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1723)  
at com.mysql.jdbc.Connection.execSQL(Connection.java:3256)  
at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1313)  
at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:1448)  
............  
............  
my application traces.... 
```

**是什么突然导致这个错误？**我为此浪费了很多时间。

**编辑：**重新启动服务器后问题甚至仍然存在。根据 DBA，两个重要的 mysql 服务器配置是：
**wait_timeout ：** 1800 秒
**connect_timeout ：** 10 秒
**注意：**部署在同一服务器上的其他应用程序连接到同一数据库并使用不同的池运行顺利。

**EDIT-2：**在阅读了很多东西并期待一些积极的结果之后，我对我的连接池进行了这些更改。

**最大等待时间：** 0（以前是 60 秒）
**连接验证：**必需
**验证方法：**表
**表名称：**演示
**最多验证一次：** 40 秒
**创建重试次数：** 1
**重试间隔：** 5 秒
**最大连接使用量：** 5

这在应用程序持续运行 3 天时起作用。但我得到了一个非常奇怪和有趣的结果。在监控连接池时，我发现了这些数字：

**NumConnAcquired：** 44919 计数
**NumConnReleased：** 44919 计数
**NumConnCreated：** 9748 计数
**NumConnDestroyed：** 9793 计数
**NumConnFailedValidation：** 70 计数
**NumConnFree：** 161 计数
**NumConnUsed：** -136 计数

**我怎么**能`NumConnFree`变成161 `Maximum Pool Size = 100` **？**
**怎么**会`NumConnUsed`变成-136，**一个***负数*？**>****怎么**可能**？** ****`NumConnDestroyed` **`NumConnCreated`******

 ******* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-28T16:47:57.110

The connection has failed, possibly due to a firewall idle-timeout, etc. If you don't have your JDBC driver configured to reconnect on failure, then this error will not go away unless you open a new connection.

If you are using a database connection pool (you *are* using one, right?), then you probably want to enable it's connection-checking features like issuing a query to check to see if the connection is working before handing it back to the application. In Apache commons-dbcp, this is called the `validationQuery` and is often set to something simple like `SELECT 1`.

Since you are using MySQL, you ought to use a Connector/J-specific "ping" query that is lighter-weight than actually issuing a true SQL query and set your validation query to `/* ping */ SELECT 1` (the ping part [needs to be exact](https://dev.mysql.com/doc/relnotes/connector-j/5.1/en/news-5-1-3.html)).

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-19T10:51:02.553

这很可能意味着数据库已重新启动或与数据库的网络连接已中断（例如 NAT 连接已超时）......并且您的 webapp 正在尝试使用陈旧的数据库连接。

如果重新启动 Web 容器后问题仍然存在，则可能是更严重的问题。

* * *

你问了以下问题：

```
How can the NumConnFree become 161 as I have Maximum Pool Size = 100 ?
How can the NumConnUsed become -136, a negative number ?
How can the NumConnDestroyed > NumConnCreated ? 
```

从表面上看，这些没有意义。但是，它们可能只是某些使用计数器以非线程安全方式更新的结果。这不一定与您的原始问题有关。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-28T07:25:32.767

这是 Java 中的 EndOfFileException，当您的光标起点位于终点或由于某些意外异常而关闭数据库连接时发生。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-03T05:42:41.670

虽然我没有明确的解决方案，但似乎有些东西干扰了应用服务器和数据库之间的通信。以下是您可以尝试隔离问题的几件事：

*   尝试确定这是 mysql 问题还是 java 代码问题。尝试使用命令行工具从与应用服务器相同的主机连接到 mysql，并发出类似的 SQL 以执行登录。使用一个简单的 java 代码进行选择，将其部署到相同的基础设施，看看会发生什么等等。还要检查 mysql 服务器日志，看看你是否能找到任何有用的东西

*   空闲连接有两种关闭方式：通过在应用服务器内部运行的连接池代码，或通过 mysql 本身。确保检查双方的配置

*   检查最近是否有任何网络基础架构配置发生更改。是否有任何新的防火墙规则干扰应用服务器 <--> mysql 连接？是否有任何设置禁止打开的 TCP 连接空闲时间超过 X？

*   尝试不同的连接池库只是为了消除它是连接池的可能性

祝你好运

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-03T10:11:52.383

这可能是防火墙相关的问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-07T23:39:32.213

我遇到了这个问题，但我无法更改 MySQL 数据库配置。因此，我确保在我的 sql 连接器类中，连接总是在再次启动之前关闭。就像是：

```
public static Connection getConnection() {

    if (DatabaseConnnector.conn == null) {
        initConn();
    } else {
        try {
            DatabaseConnnector.conn.close();          
        } catch (SQLException e) {
            e.printStackTrace();
        }
          initConn();
    }
    return DatabaseConnnector.conn;
} 
```

这解决了问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-10-29T14:38:39.360

尝试连接和/或从 mysql 服务器获取一些数据时在 PHPStorm 中出现此错误。复选框“单连接模式”为我修复了问题。我就把它留在这里。也许这将有助于将来的一些烈士。

[https://www.jetbrains.com/help/phpstorm/configuring-database-connections.html](https://www.jetbrains.com/help/phpstorm/configuring-database-connections.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-24T14:31:13.317

就我而言，它是 java mysql 驱动程序/连接器版本。即（即使服务器是版本 8）当我使用 mysql 驱动程序/连接器版本 5.1.44 时，它开始工作。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-22T01:30:50.277

我遇到了同样的问题，它是由锁定时间太长引起的。

我们有一个很长的事务A，如果执行它，其他事务将被锁定util事务A完成，所以其他的总是被我们的mysql工具杀死（pt-kill）********

# java - Java Weld 空表达式工厂

> ID：13950497
> 
> 赞同：1
> 
> 时间：2012-12-19T10:39:55.693
> 
> 标签：java, jsf, jboss, cdi, weld

我使用 JBoss AS 7.1.1 + CDI（焊接）+ JSF + Intellij IDEA。我创建了项目并下载了文件：

```
1\. jsf-api.jar
2\. jsf-impl.jar
3\. jstl-1.1.0.jar
4\. weld-servlet.jar 
```

一切都很好，直到我开始使用 Weld（创建 beans.xml 并将 ManagedBeans 重命名为 Named）。在此之后，工件停止部署并出现错误：

> “配置失败！WELD-001001 无法传递空表达式工厂”。

哪里有错？也许技术版本不兼容？我已经用 IDE Idea 下载了文件。

编辑：

```
[2012-12-19 02:17:27,111] Artifact war exploded: Artifact is being deployed, please wait... 14:17:27,314 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-6) JBAS015876: Starting deployment of "war_exploded.war" 14:17:28,190 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-1) JBAS015893: Encountered invalid class name 'com.sun.faces.vendor.Tomcat6InjectionProvider:org.apache.catalina.util.DefaultAnnotationProcessor' for service type 'com.sun.faces.spi.injectionprovider' 14:17:28,193 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-1) JBAS015893: Encountered invalid class name 'com.sun.faces.vendor.Jetty6InjectionProvider:org.mortbay.jetty.plus.annotation.InjectionCollection' for service type 'com.sun.faces.spi.injectionprovider' 14:17:28,233 INFO  [org.jboss.weld.deployer] (MSC service thread 1-2) JBAS016002: Processing weld deployment war_exploded.war 14:17:28,258 INFO  [org.jboss.weld.deployer] (MSC service thread 1-2) JBAS016005: Starting Services for CDI deployment: war_exploded.war 14:17:28,263 INFO  [org.jboss.weld.deployer] (MSC service thread 1-5) JBAS016008: Starting weld service for deployment war_exploded.war 14:17:28,334 INFO  [org.apache.catalina.core.StandardContext] (MSC service thread 1-1) The listener "com.sun.faces.config.ConfigureListener" is already configured for this context. The duplicate definition has been ignored. 14:17:28,342 INFO  [javax.enterprise.resource.webcontainer.jsf.config] (MSC service thread 1-1) Initializing Mojarra 2.1.7-jbossorg-1 (20120227-1401) for context '/war_exploded' 14:17:28,429 WARNING [javax.enterprise.resource.webcontainer.jsf.config] (MSC service thread 1-1) JSF1067: Resource /META-INF/faces-config.xml specified by the javax.faces.CONFIG_FILES configuration option cannot be found.  The resource will be ignored. 14:17:28,458 SEVERE [javax.enterprise.resource.webcontainer.jsf.config] (MSC service thread 1-1) Critical error during deployment: : com.sun.faces.config.ConfigurationException: CONFIGURATION FAILED! WELD-001001 Cannot pass null expressionFactory     at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:376) [jsf-impl-2.1.7-jbossorg-2.jar:]   at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:225) [jsf-impl-2.1.7-jbossorg-2.jar:]   at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392) [jbossweb-7.0.13.Final.jar:]    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850) [jbossweb-7.0.13.Final.jar:]   at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]  at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)  at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)   at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [rt.jar:1.7.0_03]  at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.7.0_03]     at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_03] Caused by: org.jboss.weld.exceptions.IllegalArgumentException: WELD-001001 Cannot pass null expressionFactory     at org.jboss.weld.el.WeldExpressionFactory.<init>(WeldExpressionFactory.java:38) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]  at org.jboss.weld.manager.BeanManagerImpl.wrapExpressionFactory(BeanManagerImpl.java:995) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]     at org.jboss.as.weld.webtier.jsf.WeldApplication.getExpressionFactory(WeldApplication.java:91) [jboss-as-weld-7.1.1.Final.jar:7.1.1.Final]  at org.jboss.weld.environment.servlet.jsf.WeldApplication.init(WeldApplication.java:79) [weld-servlet.jar:20120429-1045]    at org.jboss.weld.environment.servlet.jsf.WeldApplication.delegate(WeldApplication.java:87) [weld-servlet.jar:20120429-1045]    at org.jboss.weld.environment.servlet.jsf.ForwardingApplication.getActionListener(ForwardingApplication.java:168) [weld-servlet.jar:20120429-1045]  at com.sun.faces.config.processor.ApplicationConfigProcessor.addActionListener(ApplicationConfigProcessor.java:459) [jsf-impl-2.1.7-jbossorg-2.jar:]    at com.sun.faces.config.processor.ApplicationConfigProcessor.process(ApplicationConfigProcessor.java:290) [jsf-impl-2.1.7-jbossorg-2.jar:]  at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114) [jsf-impl-2.1.7-jbossorg-2.jar:]     at com.sun.faces.config.processor.LifecycleConfigProcessor.process(LifecycleConfigProcessor.java:116) [jsf-impl-2.1.7-jbossorg-2.jar:]  at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114) [jsf-impl-2.1.7-jbossorg-2.jar:]     at com.sun.faces.config.processor.FactoryConfigProcessor.process(FactoryConfigProcessor.java:222) [jsf-impl-2.1.7-jbossorg-2.jar:]  at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:361) [jsf-impl-2.1.7-jbossorg-2.jar:]   ... 9 more

14:17:28,487 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/war_exploded]] (MSC service thread 1-1) Exception sending context initialized event to listener instance of class com.sun.faces.config.ConfigureListener: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: CONFIGURATION FAILED! WELD-001001 Cannot pass null expressionFactory     at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:292) [jsf-impl-2.1.7-jbossorg-2.jar:]   at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392) [jbossweb-7.0.13.Final.jar:]    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850) [jbossweb-7.0.13.Final.jar:]   at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]  at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)  at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)   at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [rt.jar:1.7.0_03]  at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.7.0_03]     at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_03] Caused by: com.sun.faces.config.ConfigurationException: CONFIGURATION FAILED! WELD-001001 Cannot pass null expressionFactory  at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:376) [jsf-impl-2.1.7-jbossorg-2.jar:]   at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:225) [jsf-impl-2.1.7-jbossorg-2.jar:]   ... 8 more Caused by: org.jboss.weld.exceptions.IllegalArgumentException: WELD-001001 Cannot pass null expressionFactory    at org.jboss.weld.el.WeldExpressionFactory.<init>(WeldExpressionFactory.java:38) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]  at org.jboss.weld.manager.BeanManagerImpl.wrapExpressionFactory(BeanManagerImpl.java:995) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]     at org.jboss.as.weld.webtier.jsf.WeldApplication.getExpressionFactory(WeldApplication.java:91) [jboss-as-weld-7.1.1.Final.jar:7.1.1.Final]  at org.jboss.weld.environment.servlet.jsf.WeldApplication.init(WeldApplication.java:79) [weld-servlet.jar:20120429-1045]    at org.jboss.weld.environment.servlet.jsf.WeldApplication.delegate(WeldApplication.java:87) [weld-servlet.jar:20120429-1045]    at org.jboss.weld.environment.servlet.jsf.ForwardingApplication.getActionListener(ForwardingApplication.java:168) [weld-servlet.jar:20120429-1045]  at com.sun.faces.config.processor.ApplicationConfigProcessor.addActionListener(ApplicationConfigProcessor.java:459) [jsf-impl-2.1.7-jbossorg-2.jar:]    at com.sun.faces.config.processor.ApplicationConfigProcessor.process(ApplicationConfigProcessor.java:290) [jsf-impl-2.1.7-jbossorg-2.jar:]  at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114) [jsf-impl-2.1.7-jbossorg-2.jar:]     at com.sun.faces.config.processor.LifecycleConfigProcessor.process(LifecycleConfigProcessor.java:116) [jsf-impl-2.1.7-jbossorg-2.jar:]  at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114) [jsf-impl-2.1.7-jbossorg-2.jar:]     at com.sun.faces.config.processor.FactoryConfigProcessor.process(FactoryConfigProcessor.java:222) [jsf-impl-2.1.7-jbossorg-2.jar:]  at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:361) [jsf-impl-2.1.7-jbossorg-2.jar:]   ... 9 more

14:17:28,519 ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-1) Error listenerStart 14:17:28,520 ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-1) Context [/war_exploded] startup failed due to previous errors 14:17:28,522 SEVERE [javax.faces] (MSC service thread 1-1) Application was not properly initialized at startup, could not find Factory: javax.faces.application.ApplicationFactory. Attempting to find backup. 14:17:28,524 SEVERE [javax.enterprise.resource.webcontainer.jsf.config] (MSC service thread 1-1) Unexpected exception when attempting to tear down the Mojarra runtime: java.lang.IllegalStateException: Could not find backup for factory javax.faces.application.ApplicationFactory.   at javax.faces.FactoryFinder$FactoryManager.getFactory(FactoryFinder.java:1008) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]    at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:343) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]    at com.sun.faces.config.InitFacesContext.getApplication(InitFacesContext.java:131) [jsf-impl-2.1.7-jbossorg-2.jar:]     at com.sun.faces.config.ConfigureListener.contextDestroyed(ConfigureListener.java:328) [jsf-impl-2.1.7-jbossorg-2.jar:]     at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:3489) [jbossweb-7.0.13.Final.jar:]    at org.apache.catalina.core.StandardContext.stop(StandardContext.java:3999) [jbossweb-7.0.13.Final.jar:]    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3917) [jbossweb-7.0.13.Final.jar:]   at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]  at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)  at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)   at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [rt.jar:1.7.0_03]  at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.7.0_03]     at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_03]

14:17:28,540 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-1) MSC00001: Failed to start service jboss.web.deployment.default-host./war_exploded: org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./war_exploded: JBAS018040: Failed to start context    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:95)     at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]     at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [rt.jar:1.7.0_03]  at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.7.0_03]     at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_03]

14:17:28,750 INFO  [org.jboss.as.server] (management-handler-thread - 20) JBAS015870: Deploy of deployment "war_exploded.war" was rolled back with failure message {"JBAS014671: Failed services" => {"jboss.web.deployment.default-host./war_exploded" => "org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./war_exploded: JBAS018040: Failed to start context"}} 14:17:28,757 INFO  [org.jboss.weld.deployer] (MSC service thread 1-8) JBAS016009: Stopping weld service for deployment war_exploded.war 14:17:28,780 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-5) JBAS015877: Stopped deployment war_exploded.war in 31ms 14:17:28,782 INFO  [org.jboss.as.controller] (management-handler-thread - 20) JBAS014774: Service status report JBAS014777:   Services which failed to start:      service jboss.web.deployment.default-host./war_exploded: org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./war_exploded: JBAS018040: Failed to start context

[2012-12-19 02:17:28,918] Artifact war exploded: Error during artifact deployment. See server log for details. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T14:41:03.990

如果您正在使用一个容器来验证 Web 配置文件或完整配置文件（JBoss AS7 两者都是），您不包含任何 CDI、JSF 或 jstl（我不知道您为什么需要它，但 JSF 2 使用 facelets默认情况下）在你的战争中，容器已经为你提供了它们。

简而言之，除非您使用 jetty 或普通 tomcat，否则不要在您的战争中捆绑任何规范 jar 或规范实现 jar。

# c# - 当我尝试从 ImageSource 转换为 BitmapImage 时，为什么会出现运行时错误？

> ID：13950499
> 
> 赞同：1
> 
> 时间：2012-12-19T10:39:57.797
> 
> 标签：c#, .net, wpf, image-processing

我正在处理[这个答案](https://stackoverflow.com/a/1598918/969613)，试图将 ImageSource 转换为 BitmapImage。我在 WPF 画布上有一个 Image 控件，其源是位图，我想将此控件的源属性提取到一个变量（这将是一个 ImageSource）中，然后将其转换为 BitmapImage。

我的代码如下：

```
ImageSource source = MyImage.Source;
BitmapImage image = (BitmapImage) source; 
```

它与链接答案中的代码基本相同，但我在第二行（我试图投射的地方）收到以下运行时错误：

> 无法将类型为“System.Windows.Media.Imaging.BitmapFrameDecode”的对象转换为类型“System.Windows.Media.Imaging.BitmapImage”。

我猜合乎逻辑的答案是这根本无法做到，但链接的答案被接受，有一个好评和四个令人沮丧的赞成票。我正在使用带有 .Net 4.5 的 Visual Studio 2012，我尝试针对 4.0、3.5 和 3.0 进行编译，并且看到了同样的问题。

我也在[这里尝试了](https://stackoverflow.com/a/11115666/969613)[Ashura](https://stackoverflow.com/users/1093756/ashura)的建议，结果只是 null （就像每当我使用**as**关键字而不是将结果变量的值强制转换为 null 时一样）。

 **在我的 XAML 中，我的 Image 控件的源属性是一个***.bmp**文件，我最终试图将它传递给 WriteableBitmap，但我需要有一个 BitmapImage 才能传递给 WriteableBitmap 的构造函数。

所以我的问题是，我做错了什么？如何从 ImageSource 转换为 BitmapImage？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:07:40.090

感谢评论者，您帮助我理解了问题。

我最终从 XAML 中取出**Source属性，并在****Window Loaded**事件中设置以下内容，以确保我的图像控件的**Source**属性确实是 BitmapImage：

```
private void Window_Loaded_1(object sender, RoutedEventArgs e)
{
    var image = new BitmapImage(new Uri("sample.bmp", UriKind.Relative));
    MyImage.Source = image;
} 
```

如果改为在 XAML 中执行此操作，则 Source 属性最终会默认为**BitmapFrameDecode**对象。**

# php - php 类变量来自另一个函数上使用的函数

> ID：13950503
> 
> 赞同：-2
> 
> 时间：2012-12-19T10:40:19.670
> 
> 标签：php

我已经在我的类中声明了一个受保护的变量，然后我在我的第一个函数中为该变量赋值。然后我想使用同一个变量，它的值在另一个函数中。但是不起作用，谁能告诉我我做错了什么，或者是否有可能做到这一点或如何做到这一点。这是我的代码的一些示例：

```
class Forecast {
   protected $myStream;

   public function ajaxForecast() {
      $myStream = $GET_["selectedStream"];
      return json_enconde($myStream);
   }

   public function show() {
      echo $myStream;
   }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T10:52:45.673

你应该使用

```
class Forecast {
    protected $myStream;

    public function ajaxForecast() {
        $this->myStream = $_GET["selectedStream"];
        return json_encode($this->myStream);
    }

    public function show() {
        echo $this->myStream;
    }
} 
```

始终在类中使用 $this 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:41:49.127

您没有使用`$this`关键字。因此，您正在创建一个新的局部变量`$myStream`，而不是像您认为的那样为您的实例字段分配值。的范围`$myStream`仅限于函数 ajaxForecast，除此之外不可用。的范围`$this->myStream`在对象本身（和任何子类）内。

```
public function ajaxForecast() {
    $this->myStream = $GET_["selectedStream"];
    return json_enconde($myStream);
} 
```

来自 php.net

> 当从对象上下文中调用方法时，伪变量 $this 可用。$this 是对调用对象的引用（通常是方法所属的对象，但也可能是另一个对象，如果该方法是从辅助对象的上下文中静态调用的）。

关于 php oop 的文档在[这里](http://php.net/manual/en/language.oop5.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T10:42:06.963

我强烈建议您阅读手册。

像这样使用它

```
public function Show() { 
   echo $this->myStream;
   // or use return $this->myStream
} 
```

# java - Android中的颜色选择器？

> ID：13950508
> 
> 赞同：-2
> 
> 时间：2012-12-19T10:40:30.170
> 
> 标签：java, android, color-picker

如何在android中使用颜色选择器？我尝试了以下代码：

```
public class FontManager
{
// This function enumerates all fonts on Android system and returns the HashMap with the font
// absolute file name as key, and the font literal name (embedded into the font) as value.
static public HashMap< String, String > enumerateFonts()
{
    String[] fontdirs = { "/system/fonts", "/system/font", "/data/fonts" };
    HashMap< String, String > fonts = new HashMap< String, String >();
    TTFAnalyzer analyzer = new TTFAnalyzer();

    for ( String fontdir : fontdirs )
    {
        File dir = new File( fontdir );

        if ( !dir.exists() )
            continue;

        File[] files = dir.listFiles();

        if ( files == null )
            continue;

        for ( File file : files )
        {
            String fontname = analyzer.getTtfFontName( file.getAbsolutePath() );

            if ( fontname != null )
                fonts.put( file.getAbsolutePath(), fontname );
        }
    }

    return fonts.isEmpty() ? null : fonts;
}
} 
```

此代码出现运行时错误。给一些样品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:59:55.733

我在您的代码中没有看到任何关于颜色选择器的信息？但也许你可以只使用一个库来选择颜色：[android-color-picker](https://code.google.com/p/android-color-picker/)

# objective-c - shouldAutorotateToInterfaceOrientation 在启动时被调用两次

> ID：13950509
> 
> 赞同：5
> 
> 时间：2012-12-19T10:40:44.540
> 
> 标签：objective-c, ios, cocoa-touch, screen-orientation, uiinterfaceorientation

我正在开发针对 iOS 5 的项目。我的定位方法如下。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{    
  NSLog(@" My Orientation");

  return YES;
} 
```

但是，当我的应用程序启动时，我的日志消息将在控制台上显示两次，即 My`Orientation`将显示两次。我正在模拟器中测试我的应用程序，这只是在启动时发生，甚至没有改变`orientation`，然后甚至改变方向。IE，

```
(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

每次都被调用两次，我认为这不是正确的行为。任何帮助都是

赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:10:49.653

这不是你所做的。苹果已经多次让设备对此做出反应。这仅取决于应用程序在做什么。可能是视图加载或其他原因导致它再次触发。然而，这真的是个问题吗？在大多数情况下，它不是（或者至少不应该是）。

如果这确实是一个问题，那么也许有人应该详细说明。但是，至少从我的经验来看，这是常见的行为。我不知道有什么方法可以解决这个问题。

我想如果这真的困扰您并且无法修复，您可以向 Apple 提交错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:23:31.973

我还获得了 shouldAutoRotateToInterfaceOrientation 总是调用两次的经验。有趣的细节：我的经验是，第一次调用中的 self.view.frame 保存“旧”值（从哪里来），在第二次调用中保存“新”值（它去哪里）

# iphone - 按下编辑按钮后无法调用 didSelectRowAtIndexPath

> ID：13950513
> 
> 赞同：1
> 
> 时间：2012-12-19T10:41:01.247
> 
> 标签：iphone, objective-c

```
IBOutlet _tableView;

-(IBAction)EditButton{

    NSLog(@"editButtonPressed");
    editing= !editing;
    [_tableView setEditing:editing animated:YES];
   }

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

    tasklist *task=[items objectAtIndex:indexPath.row];
if(editing){
    TaskListEditorController *editor=[[TaskListEditorController alloc] initWithNibName:@"TaskListEditorController" bundle:nil];

    editor.defaulttext=task.prptext;

    editor.delegate=self;

    [self presentModalViewController:editor animated:YES];

    [editor release];

}else{

task.prpcompleted= !task.prpcompleted;

[tableView reloadData];

}
    [tableView deselectRowAtIndexPath:indexPath animated:YES];

} 
```

我正在尝试 xcode3.2.6 当我不放 [_tableView setEditing:editing animated:YES] 时我可以调用；在编辑点击，但如果我把它没有调用 didselectrowatindexpath 请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:47:22.417

您需要将 tableview 的allowSelectionDuringEditing 属性设置为YES。

`_tableView.myTableView.allowsSelectionDuringEditing = YES;`

# c++ - 尝试使用 Android-NDK 生成 so 文件时未在此范围内声明“runtime_error”

> ID：13950515
> 
> 赞同：0
> 
> 时间：2012-12-19T10:41:07.970
> 
> 标签：c++, android-ndk, g++, native

我阅读了以下帖子，但我认为它不适用于我的情况：[runtime_error 未在 g++ 4.1.2 的此范围内声明](https://stackoverflow.com/questions/5527091/runtime-error-was-not-declared-in-this-scope-for-g-4-1-2)

我的问题几乎相同，但我正在尝试使用 Android-NDK (r8c) 编译文件，我检查了 NDK 是否有 stdexcept.h 并且确实如此。这是我的消息来源：

```
#include <stdexcept>

class RandomName : public std::runtime_error {
public:
  ...
}; 
```

这是我的 Android.mk 文件：

```
# File: Android.mk
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := interfacetest
LOCAL_SRC_FILES := file.cpp
LOCAL_CFLAGS    := -frtti

include $(BUILD_SHARED_LIBRARY) 
```

我应该在 Android.mk 文件中添加一些行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T14:26:59.003

在 CPLUSPLUS-SUPPORT.html 文件中的最新 NDK 文档中对此有很好的解释，尽管我将在此处生成相关位。对于默认**系统**运行时，提供的唯一标头是：

> cassert cctype cerrno cfloat climits cmath csetjmp csignal cstddef
> cstdint cstdio cstdlib cstring ctime cwchar new stl_pair.h typeinfo
> 实用程序

从 NDK 版本 8 开始，唯一支持异常的运行时是**gnustl**，您可以通过将以下内容添加到*Application.mk*而不是 Android.mk 来静态链接它：

> APP_STL := gnustl_static

即使这样，您也需要一个额外的步骤：

> 自 NDK r5 起，NDK 工具链支持 C++ 异常，但是出于与以前版本的兼容性原因，所有 C++ 源默认情况下都使用 -fno-exceptions 支持进行编译。
> 
> 要启用它，请在 Android.mk 中使用新的 LOCAL_CPP_FEATURES 变量，如下所示：
> 
> ```
> LOCAL_CPP_FEATURES += exceptions 
> ```

# asp.net - 表单中的第二个 Modalpopupextender - CSS 链接？

> ID：13950518
> 
> 赞同：0
> 
> 时间：2012-12-19T10:41:18.877
> 
> 标签：asp.net, html, css, ajaxcontroltoolkit

我有一个带有 Ajax Modalpopupextender 窗口的 aspx 页面。弹出窗口按照指示链接到我的样式表`.ModalBackground`并在我的样式表中，效果很好。`.Modalpopup`

我现在需要在我已经完成但不知道如何在 CSS 中引用它的表中添加第二个 Ajax Modalpopupextender 窗口。

我可以在 HTML 中设置“类”，但不能设置“CssClass”。此外，`.Modalpopup`没有在 HTML 中引用，它似乎只是 Ajax 自动识别的 CssClass。那么如何为我的第二个 Modalpopup 设置样式呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:01:41.497

您可以使用 ModalPopupExtender 的 BackgroundCssClass 和 BehaviorID 来更改背景

如果您想更改 Div（使用 ModalPopupExtender 填充），那么您可以使用您在 Panel 中使用的那个 Div 的样式标签。

# spring - Spring Integration - 是否可以在 imap-idle-channel-adapter 中提供加密密码？

> ID：13950522
> 
> 赞同：0
> 
> 时间：2012-12-19T10:41:28.640
> 
> 标签：spring, spring-integration

我正在使用以下配置来阅读使用 spring 集成和 imap 的电子邮件。

```
<mail:imap-idle-channel-adapter id="imapAdapter"
                              store-uri="imaps://username:password@mydomain:993/inbox"                                    
                              channel="recieveEmailChannel"
                              should-delete-messages="false"
                              auto-startup="true"
                              java-mail-properties="javaMailProperties" /> 
```

**问题**

这里的用户名和密码是明文，但出于安全原因，我需要提供加密的或者将用户名和密码存储在属性文件中。有什么可用的选项吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:50:35.347

您可以使用 Jasypt 加密从`*.properties`文件加载的属性值：

```
 <mail:imap-idle-channel-adapter 
     store-uri="imaps://${username}:${password}@mydomain:993/inbox" ... 
```

更多示例可在此处获得：[http ://www.jasypt.org/spring3.html](http://www.jasypt.org/spring3.html)

**更新**：它也适用于 Spring 2.x：[http ://www.jasypt.org/spring2.html](http://www.jasypt.org/spring2.html)

# php - Amazon EC2 PHP & Apple 推送通知失败

> ID：13950529
> 
> 赞同：2
> 
> 时间：2012-12-19T10:41:51.947
> 
> 标签：php, amazon-ec2, apple-push-notifications

感谢您阅读我的问题。我正在尝试从 PHP（安装在 Amazon EC2 上）发送推送通知，代码在 localhost 上工作，但是当移动到 EC2 时，它给出了错误：

`PHP Warning: stream_socket_client(): SSL operation failed with code 1\. OpenSSL Error messages: error:14094410:SSL routines:SSL3_READ_BYTES:sslv3 alert handshake failure in ... on line 24, referer: ... PHP Warning: stream_socket_client(): Failed to enable crypto in ... on line 24, referer: ... PHP Warning: stream_socket_client(): unable to connect to ssl://gateway.sandbox.push.apple.com:2195 (Unknown error) in ... on line 24, referer: ...`

pem 文件的路径是正确的（我尝试了绝对路径）。感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T21:30:48.163

您与苹果服务器的连接目前已从 ec2 默认防火墙中删除（如果我没记错的话，默认配置文件只允许端口 22 和 80）。您必须在您的 ec2 安全组中允许端口 2195-2196。

# macos - 在 Cocoa 中编辑 iTunes 库

> ID：13950530
> 
> 赞同：4
> 
> 时间：2012-12-19T10:41:58.173
> 
> 标签：macos, cocoa, itunes

我想编辑我的音乐文件的“添加日期”属性，我想我可以使用 AppleScript 来做到这一点，但这个属性是只读的。

然后我找到了一个名为“ **iTunes Music Library.xml** ”的文件，这个文件可以编辑，但更改会被 iTunes 覆盖。

看来我应该编辑同一文件夹中的“ **iTunes Library.itl** ”文件，但我该怎么做呢？还是有其他方法可以做到这一点？

谢谢和对不起我的英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:30:57.113

该`Date Added`属性为只读的理由是它表示文件添加到 iTunes 库的日期。

该`.xml`文件仅在您想要将文件重新导入 iTunes 时使用，它几乎会在对库的任何更改时被重写。

有一个用于理解`.itl`文件格式的库，称为[titl](http://code.google.com/p/titl/)。不过，我不知道它是否支持最新版本的库文件格式。

您可能需要参考[PicardPlugins](http://code.google.com/p/picardplugins/wiki/LibraryFile) wiki 以获取更多信息/读取/修改库文件的方法。随着时间的推移发生的变化是内容的压缩和数据的加密。

不过，我希望您只应在 iTunes 未运行时修改此文件。

# testing - VSTS 测试代理和控制器 2012 兼容性

> ID：13950539
> 
> 赞同：1
> 
> 时间：2012-12-19T10:42:08.163
> 
> 标签：testing, load-testing

我们正在将开发人员与 VS2010 和 VS2012 混合使用，因为我们所有的项目都还没有迁移。

我们已经拥有一个完整的测试平台，包括一个测试控制器、一些测试代理和一个结果存储库。

从 VS 2012 开始，由于版本不匹配，无法运行远程测试。升级没问题，但我的 VS2010 测试仍然可以运行吗？因为我不想维护 2 个测试台，而且我发现它完全没用。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T17:51:11.073

仅供期货参考，两个版本之间没有兼容性。VS2012 需要 2012 测试控制器（需要 2012 测试代理）。我们也不能在同一台机器上安装这两个版本。

# extjs - 为 animateTarget 使用网格行？

> ID：13950545
> 
> 赞同：1
> 
> 时间：2012-12-19T10:42:27.253
> 
> 标签：extjs, extjs4.1

我的印象是`animateTarget`必须是一个 DOM 元素，其位置和大小将用作相应动画的起始值。

不知何故，当我`showAt()`在一个窗口上使用并给它一个网格行的 DOM 元素时，什么也没有发生。

```
oWindow.showAt( 50, 50, oRowDom ); 
```

我也尝试使用组件对象

```
oWindow.showAt( 50, 50, oGridComponent ); 
```

两者都只是让窗口出现在正确的位置，但根本没有任何动画......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T07:14:31.470

您正在做的事情对于窗口是不可能的。**[showAt](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Component-method-showAt)**仅接受组件的布尔值或动画配置作为第三个参数，而窗口有一个属性 aminationTarget**[它将](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.window.Window-cfg-animateTarget)**执行您想要的操作。但它必须是 Ext.Element 或 ID。

# validation - 解析和验证固定长度消息的最佳方法

> ID：13950547
> 
> 赞同：1
> 
> 时间：2012-12-19T10:42:40.067
> 
> 标签：validation, parsing

嗨，我有一个固定长度的消息要解析和验证，然后通过 Map 发送。我想对这种方法发表意见，并且需要知道是否还有其他更好的方法可以做到这一点。

例如。代码是伪的

```
String input = "12345AmilaJayat21122012";
int split = {5,10,8};
int dataType = {1,2,3};//1=number,2=string,3=date DDMMYYYY

public void parseValidate(){
  loop split.size{
    String data = input.subString(0,split[i]);
    boolean validated = validateData(data,dataType[i]);//This method would vaidate data accordingly
    if(validated){
      input = input.subString(split[i]);
      //add to map
    }else{
      //Error message
      break;
    }

  }
} 
```

这是我的基本想法，这个想法会有什么改进，如果有任何其他方法来解析和验证固定长度消息，它们会是什么？

PS。我检查了 Apache Camel：Bindy，显然它不适合我的需要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:51:49.463

如果消息具有固定大小（或至少明确划分）的子字段，则将其分成单独的子字段并通过任何适当的方法验证每个子字段可能是最清晰（最易于维护）的。

如果您处理大量此类消息，因此速度是一个问题，并且约束相对简单（例如，此字段包含类似 MM/YY/DD 的内容），您可以考虑使用词法分析器并表达您的约束作为一长串正则表达式。如果令牌的正则表达式匹配，大多数词法分析器将允许您添加要执行的代码；如果您有一个字段验证谓词不能仅以形状表示（例如，正则表达式），您可以将谓词的“其余部分”附加到此操作，因此仅当字段具有正确的语法时才会调用它。

# iis - 我在 IIS7 中添加了 HTTP 重定向并将其删除。它仍在使用中。如何永久删除？

> ID：13950552
> 
> 赞同：3
> 
> 时间：2012-12-19T10:43:07.100
> 
> 标签：iis, iis-7

我已取消选中 IIS7 中 HTTP REDIRECT 中的 Redirect 复选框。但该规则仍然有效。如何删除它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T10:47:49.907

通过打开 cmd 窗口并执行以下命令来重新启动 IIS：

```
iisreset 
```

或从计算机服务重新启动万维网发布服务。

# assembly - 我如何编译这个用 nasm 在 64 位上编写的汇编代码？

> ID：13950554
> 
> 赞同：1
> 
> 时间：2012-12-19T10:43:14.087
> 
> 标签：assembly, nasm

我可以在 64 位上运行它吗？

```
 ;
 ; assemble and link with:
 ; nasm -f elf printf-test.asm && gcc -m32 -o printf-test printf-test.o
 ;
 section .text
 global main
 extern printf

 main:

  mov eax, 0xDEADBEEF
  push eax
  push message
  call printf
  add esp, 8
  ret

  message db "Register = %08X", 10, 0 
```

我收到了这个错误

```
~/Desktop$ nasm -f elf printTest.asm
~/Desktop$ gcc -m32 -o printTest printTest.o
 /usr/bin/ld: skipping incompatible /usr/lib/x86_64-linux-gnu/gcc/x86_64-linux-gnu/4.5.2/libgcc.a when searching for -lgcc
 /usr/bin/ld: cannot find -lgcc
 /usr/bin/ld: skipping incompatible /usr/lib/x86_64-linux-gnu/gcc/x86_64-linux-gnu/4.5.2/libgcc_s.so when searching for -lgcc_s
 /usr/bin/ld: cannot find -lgcc_s
 /usr/bin/ld: skipping incompatible /usr/lib/x86_64-linux-gnu/gcc/x86_64-linux-gnu/4.5.2/../../../libc.so when searching for -lc
 /usr/bin/ld: skipping incompatible /usr/lib/x86_64-linux-gnu/gcc/x86_64-linux-gnu/4.5.2/../../../libc.a when searching for -lc
 /usr/bin/ld: skipping incompatible /usr/lib/x86_64-linux-gnu/libc.so when searching for -lc
 /usr/bin/ld: skipping incompatible /usr/lib/x86_64-linux-gnu/libc.a when searching for -lc
 /usr/bin/ld: cannot find -lc
 /usr/bin/ld: skipping incompatible /usr/lib/x86_64-linux-gnu/gcc/x86_64-linux-gnu/4.5.2/libgcc.a when searching for -lgcc
 /usr/bin/ld: cannot find -lgcc
 /usr/bin/ld: skipping incompatible /usr/lib/x86_64-linux-gnu/gcc/x86_64-linux-gnu/4.5.2/libgcc_s.so when searching for -lgcc_s
 /usr/bin/ld: cannot find -lgcc_s
 collect2: ld returned 1 exit status 
```

# c++ - 转换运算符 + 转换构造函数 = 不直观的行为？

> ID：13950556
> 
> 赞同：11
> 
> 时间：2012-12-19T10:43:21.007
> 
> 标签：c++, visual-c++, implicit-conversion

我不明白为什么下面的代码打印`struct Value`而不是`int`（这意味着转换构造函数正在转换为`Value`而不是`int`）。（视觉 C++ 2012）

为什么会这样？为什么编译器完全忽略`Value(int)`构造函数？

```
#include <iostream>
#include <type_info>

using namespace std;

struct Value { Value(int) { } };

struct Convertible
{
    template<class T>
    operator T() const
    { throw typeid(T).name(); }
};

int main()
{
    try { Value w((Convertible())); }
    catch (char const *s) { cerr << s << endl; }
} 
```

## 编辑：

更奇怪的是（[这次](http://liveworkspace.org/code/1htnJu%242)它只是 C++11，在 GCC 4.7.2 上）：

```
#include <iostream>
#include <typeinfo>

using namespace std;

struct Value
{
    Value(Value const &) = delete;
    Value(int) { }
};

struct Convertible
{
    template<class T>
    operator T() const
    { throw typeid(T).name(); }
};

int main()
{
    try { Value w((Convertible())); }
    catch (char const *s) { cerr << s << endl; }
} 
```

这使：

```
source.cpp: In function 'int main()':
source.cpp:21:32: error: call of overloaded 'Value(Convertible)' is ambiguous
source.cpp:21:32: note: candidates are:
source.cpp:9:3: note: Value::Value(int)
source.cpp:8:3: note: Value::Value(const Value&) <deleted> 
```

如果删除了复制构造函数，那为什么还有歧义？！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T11:39:21.147

在第一个示例中，Visual Studio 不正确；这个电话是模棱两可的。C++03 模式下的 gcc 打印：

```
source.cpp:21:34: error: call of overloaded 'Value(Convertible)' is ambiguous
source.cpp:21:34: note: candidates are:
source.cpp:9:5: note: Value::Value(int)
source.cpp:6:8: note: Value::Value(const Value&) 
```

回想一下，复制构造函数是隐式默认的。管理段落是**13.3.1.3 构造函数初始化 [over.match.ctor]**：

> 当类类型的对象被直接初始化 [...] 时，重载决议选择构造函数。对于直接初始化，候选函数是被初始化对象的类的所有构造函数。

在第二个例子中，被删除的函数同样参与重载决议；they only affect compilation once overloads have been resolved, when a program that selects a deleted function is ill-formed. 标准中的激励示例是一个只能从浮点类型构造的类：

```
struct onlydouble {
  onlydouble(std::intmax_t) = delete;
  onlydouble(double);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:25:44.293

我已经尝试过您的代码（仅在 Visual Studio 版本上）。

由于您有一个内置的 copy-CTOR，我猜您的 main 等于：

```
int main()
{
    try { Value w((struct Value)(Convertible())); }
    catch (char const *s) { cerr << s << endl; }
} 
```

编译器选择使用您的副本 CTOR，而不是 Value(int)。

将其更改为：

```
int main()
{
    try { Value w((int)(Convertible())); }
    catch (char const *s) { cerr << s << endl; }
} 
```

它打印了“int”。

# vb.net - 如何从 VB.NET windows 应用程序修改 app.config 文件中的 ConnectionString？

> ID：13950565
> 
> 赞同：0
> 
> 时间：2012-12-19T10:43:47.190
> 
> 标签：vb.net, connection-string, app-config, configurationmanager

我想更改写在 app.config 文件中的应用程序的连接字符串。我喜欢直接从我的应用程序中更改连接字符串。

我的 app.config 看起来像：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    ...
  <connectionStrings>
    <add name="ApplicationName.My.MySettings.ConnectionS"
      connectionString="Data Source=xxx;Initial Catalog=xxx;User ID=xxx;Password=xxx"
      providerName="System.Data.SqlClient" />
  </connectionStrings>
  <appSettings>
    <add key="Test"   value="/"  />
  </appSettings>
</configuration> 
```

我可以使用以下代码在**appSettings中进行更改：**

```
Dim config As System.Configuration.Configuration = System.Configuration.ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None)
config.AppSettings.Settings("Test").Value = "New value" 
```

但是在安装应用程序时，我无法在调试时对**connectionStrings进行更改：**

```
Dim config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None)
Dim connectionStringsSection = DirectCast(config.GetSection("connectionStrings"), ConnectionStringsSection)
connectionStringsSection.ConnectionStrings("ApplicationName.My.MySettings.ConnectionS").ConnectionString = "New connection string"
config.Save()
ConfigurationManager.RefreshSection("connectionStrings") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:34:49.857

要在代码中更改它，请尝试以下操作；

```
Dim con1 = ConfigurationManager.ConnectionStrings("connection1")
Dim con2 = ConfigurationManager.ConnectionStrings("connection2") 
```

'connection1' 和 'connection2' 是 app.config 中连接字符串的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T13:39:23.320

```
Dim c As System.Configuration.Configuration = ConfigurationManager.OpenExeConfiguration(System.Reflection.Assembly.GetExecutingAssembly().Location)
Dim section As ConnectionStringsSection = DirectCast(c.GetSection("connectionStrings"), ConnectionStringsSection)
section.ConnectionStrings("Services.My.MySettings.hassanConnectionString").ConnectionString = createCnxString()
c.Save()

Private Function createCnxString() As String
    Dim builder As New System.Data.SqlClient.SqlConnectionStringBuilder
    builder("Data Source") = datasourceTxt.Text
    builder("Integrated Security") = True
    builder("Initial Catalog") = "XXXX"
    builder("User ID") = usernameTxt.Text
    builder("Password") = passwordTxt.Text
    Return builder.ConnectionString
End Function 
```

# php - 从 Facebook Graph API 获取第三方帖子

> ID：13950575
> 
> 赞同：13
> 
> 时间：2012-12-19T10:44:28.213
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我正在为一个从 Facebook 页面获取和显示帖子的客户端组合一个 Facebook 选项卡应用程序。该应用程序还提供向页面添加新帖子和评论现有帖子的功能。这是使用 Facebook Graph API（通过 PHP SDK）实现的。

我一切正常，但遇到了涉及从我的应用程序发布的问题。当用户提交帖子时，它会通过以下请求发送到 Graph API。

```
$facebook->api([PAGE_ID]/feed', 'POST', array(
    'message' => [MESSAGE]
)); 
```

此请求成功，帖子将显示在相关 Facebook 页面上，并在其下方显示“通过我的应用名称”。

然后，当我通过 API 请求页面上的帖子列表时（下面的请求），上述帖子不会出现。

```
$posts = $facebook->api([PAGE_ID].'/feed'); 
```

我有一种强烈的感觉，这是由于该帖子来自第三方应用程序。我听说 Facebook 会“降级”第三方帖子以鼓励使用自己的平台。所有直接通过 Facebook 发布的帖子都会出现。

但是，必须有一种方法来检索这些帖子。

**下面的 Fisch 更新**

当我向 API 发帖时，会返回以下帖子 ID：

```
112706495458566_468411663221379 
```

但是，当我向它发出 API 请求时：

```
$facebook->api('112706495458566_468411663221379'); 
```

我得到以下回复：

```
{
    "error": {
        "message": "Unsupported get request.",
        "type": "GraphMethodException",
        "code": 100
    }
} 
```

但是，当我发出相同的请求但帖子的 ID 已包含在 /feed 请求中时。

```
$facebook->api('112706495458566_457890310940181'); 
```

我得到以下回应。

```
{
    "id": "112706495458566_457890310940181",
    "from": {
        "category": "Local business",
        "name": "Genting Casino Southport",
        "id": "112706495458566"
    },
    "story": "\"Very well done to ste,...\" on their own status.",
    "privacy": {
        "value": ""
    },
    "type": "status",
    "application": {
        "name": "Mobile",
        "id": "2915120374"
    },
    "created_time": "2012-11-25T22:12:21+0000",
    "updated_time": "2012-11-25T22:12:21+0000",
    "comments": {
        "count": 0
    }
} 
```

因此，出于某种原因，Facebook 甚至不允许我通过其 ID 查找帖子。

**更新#2**

在我寻找这个问题的答案时，我遇到了一项研究，这加强了我之前对分配给第三方应用程序帖子的“权重”的怀疑。

*来自 EdgeRank Checker 报告：“在 Facebook 中创建对象时，会为其分配权重。我们认为 Facebook 战略性地降低了通过 API 创建的对象的权重。该策略背后的原因是鼓励在 Facebook 中创建更多内容。 Facebook 平台。这最终会增加他们平台的价值，同时增加广告印象。”*

[http://adage.com/article/digitalnext/posting-facebook-truth-party-applications/229694](http://adage.com/article/digitalnext/posting-facebook-truth-party-applications/229694)

这可以解释为什么帖子没有在 /feed 或 /posts API 响应中传递。

然而，这并不能解释为什么 API 甚至不会通过它的 ID 返回帖子（参见上面的更新）。

我能想到的是，Facebook 不会将第三方应用程序帖子归类为真正的“帖子”，因此不会通过适当的 API 响应来推动它们。但是，我在 Facebook 文档中找不到这方面的证据。

**更新#3**

根据下面的评论，我现在尝试做同样的事情，但使用的 Facebook 帐户不是应用程序的所有者，或者实际上与 Facebook 上的任何页面（我自己的个人 Facebook 帐户）有任何管理员关系。

我已使用 oAuth 对话框授权该应用程序并已接受以下权限：

*   电子邮件
*   用户生日
*   发布流

使用我闪亮的新访问令牌，我发出以下 API 请求：

```
$post = $facebook->api('112706495458566/feed', 'POST', array(
    'message' => 'this is a test'
)); 
```

我收到以下回复：

```
array(1) {
    ["id"] => string(31) "112706495458566_470663409662871"
} 
```

然后我检查实际的 Facebook 页面，我刚刚发送的帖子已按预期从我的 Facebook 用户帐户中出现。

然后我发出以下请求以获取页面上的所有帖子：

```
$posts = $facebook->api('112706495458566/feed'); 
```

我收到页面上所有帖子的长数组（我不会在这里发布）。但是，我刚刚发送的帖子（并收到了回复的 ID）没有出现。

然后，我使用 POST 请求返回的 ID 直接请求该帖子。

```
$post = $facebook->api('112706495458566_470663409662871'); 
```

这会引发以下异常（根据之前的尝试）。

```
GraphMethodException: Unsupported get request. 
```

重申一下，此尝试使用的帐户与应用程序或我们尝试为其获取数据的任何页面完全无关。该帐户也从未与应用程序有任何联系（即这是第一次接受权限并生成 oAuth 密钥）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T10:29:17.353

丹，我试过这个-

1.  **将来自APP**的提要发布到页面

     **```
    POST: "PAGE_ID/feed"
    message: "hi" 
    ```

    **结果**：发布成功** 
***   请求页面上的帖子列表

    ```
    GET: "PAGE_ID/feed" 
    ```

    **结果**：页面上的所有帖子，**包括**上述帖子。** 

 *** * *

**为什么它起作用了？**

因为 GET 请求是使用用户的访问令牌发出的，该用户是发布消息的应用程序的管理员。

**结论**

我尝试了所有案例，最终结论是，要获取某个**APP**发布的页面**提要**，您必须使用该应用程序**管理员**的访问令牌（不是大问题）；**否则**你只会得到其余的提要。

 ******* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T13:15:17.563

使用[**`Yahoo Query Language`**](http://developer.yahoo.com/yql/console/?q=SELECT%20*%20FROM%20json%20WHERE%20url%3D%22https%3A%2F%2Fwww.facebook.com%2Ffeeds%2Fpage.php%3Fid%3D112706495458566%26format%3Djson%22&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys)和的组合[**`.ajax()`**](http://api.jquery.com/jQuery.ajax/)来抓取***Facebook Feed Channel***的数据。

*对LIVE Facebook 会员网页*进行数据抓取的好处是**您不需要**令牌密钥来获取最新的实时提要！

**HTML：**

```
<div id="results"></div> 
```

**jQuery：**

```
$.ajax({
    url: "http://query.yahooapis.com/v1/public/yql",
    dataType: "jsonp",
    success: function(data) {
        console.log(data.query.results.json);
        $.each(data.query.results.json.entries, function(i, v) {
            $('#results').append(data.query.results.json.entries[i].content + '<br /><br />');
        });
    },
    data: {
        q: 'select * from json where url="https://www.facebook.com/feeds/page.php?id=112706495458566&format=json"',
        format: "json"
    }
}); 
```

**演示：** 受此[*在线教程*](http://ninjagirl.com/posts/2012/02/create-facebook-style-link-preview-using-jquery-yql)的启发。

[jsFiddle Facebook 订阅源](http://jsfiddle.net/q5G9C/)

* * *

*编辑：**单击图像**以获取带有样式的修改后的 jsFiddle*

[![](../Images/fce6b1c9eb93ec2079f780cfc8ef766e.png)](http://jsfiddle.net/Wnn4j/ "修改了带有样式的 jsFiddle")

* * *

**额外的：**

为了补充我上面的答案，这里是准相关的 jsFiddle，标题为：

[**jsFiddle 教程：创建动态 Div（*现已改进！*）**](http://jsfiddle.net/C5xWL/1/)

本教程展示了如何转换您的 HTML 标记，使其成为可以与 jQuery 一起作为对象使用的“模板”，然后可以正确地将其附加到网页中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T10:53:39.617

当您通过 API 发布帖子时，Facebook 会向您返回该帖子的 ID。您可以保存这些 ID，然后稍后使用图形 API 或 FQL 查询它们********

# java - 如何使用java避免Mysql数据库中的“列数据被截断”？

> ID：13950579
> 
> 赞同：22
> 
> 时间：2012-12-19T10:44:37.293
> 
> 标签：java, mysql, spring, hibernate

在我的 Java 程序 ..Hibernate Bean 类中定义一列，如..

**TimtableVO.java**

```
@Column(name="REPEAT_DAYS")
private WeekdayType repeatDays;//hear WeekdayType is Enum Class 
```

在我的服务类中，我使用这个 TimetableVO.java bean 类作为..

这是我的服务类：

```
public void createEvent(TimetableVO timetableVO) {
    WeekdayType weekday = null;
    for (String day : timetableVO.getTemp().split(",")) {
        weekday = WeekdayType.valueOf(day);
    }
    timetableVO.setRepeatDays(weekday);
    userDAO.createEvent(timetableVO);
} 
```

我的 DAO 类我正在插入 timetableVO 对象..

```
public void createEvent(TimetableVO timetableVO) throws DataAccessException {
    entityManager.persist(timetableVO);
} 
```

但是异常会来..

```
Exception: Caused by: java.sql.BatchUpdateException: Data truncated for column 'REPEAT_DAYS' at row 1
    at com.mysql.jdbc.PreparedStatement.executeBatchSerially(PreparedStatement.java:2045)
    at coHibernate: insert into EC_TIMETABLE (CLASS_DURATION, COURSE_DURATION, COURSE_FEE, END_DATE, REPEAT_COUNT, REPEAT_DAYS, REPEAT_TYPE, SEARCH_KEY, START_DATE, S_ID) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
m.mysql.jdbc.PreparedStatement.executeBatch(PreparedStatement.java:1468)
    at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:70)
    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:268)
    ... 65 more
Caused by: java.sql.SQLException: Data truncated for column 'REPEAT_DAYS' at row 1
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1073) 
```

**编辑：** 这是我的 WeekdayType 枚举

```
public enum WeekdayType {
    MONDAY(Calendar.MONDAY), TUESDAY(Calendar.TUESDAY), WEDNESDAY(
    Calendar.WEDNESDAY), THURSDAY(Calendar.THURSDAY), FRIDAY(
    Calendar.FRIDAY), SATURDAY(Calendar.SATURDAY), SUNDAY(
    Calendar.SUNDAY);

    private int day;

    private WeekdayType(int day) {
        this.day = day;
    }

    public int getDay() {
        return day;
    }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-05-06T22:49:02.827

这可能是由于`ENUM`您的表架构中没有您尝试插入的所有值造成的。就像是：

```
CREATE TABLE IF NOT EXISTS event (
    weekday_type ENUM(
        'SUNDAY',
        'MONDAY',
        'TUESDAY',
        'WEDNESDAY',
        'THURSDAY',
        'FRIDAY'
    ) NOT NULL
); 
```

然后当你执行插入时

```
INSERT INTO event (weekday_type) VALUES ('SATURDAY'); 
```

使用 JDBC 你会得到一个例外，比如：`Data truncated for column 'weekday_type' at row 1`因为你忘记包含`SATURDAY`在你的表定义中。当插入发生时，该值`truncated`变为空。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-19T10:51:45.263

看起来错误是由于该列`REPEAT_DAYS`太小而无法保存您通过`WeekdayType`枚举传递的值。因此，重新检查下级数据库中该列的定义并最终增加它的大小。

您还缺少注释：

```
 @Column(name="REPEAT_DAYS", length="45")
 @Enumerated(EnumType.STRING)
 private WeekdayType repeatDays; 
```

注释中的`length`应该与数据库模式中列的长度相匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T10:49:13.443

您的服务器似乎在严格模式下运行，您可能会尝试在 NOT NULL 列中插入 NULL。

另请参阅此处：[这是什么错误？“数据库查询失败：第 1 行的列 'column_name' 的数据被截断](https://stackoverflow.com/questions/1704304/what-is-this-error-database-query-failed-data-truncated-for-column-column-na)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T10:52:12.860

假设您的表是由休眠自动生成的，您不能像以前那样注释 Enum 类型

> @Column(name="REPEAT_DAYS")
> 
> 私人 WeekdayType repeatDays;

检查`@Enumerated(EnumType.STRING)`注释

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-19T10:57:08.283

仅当您尝试插入一个太长而无法容纳列的值时，才会出现此问题。在您的情况下，列定义`REPEAT_DAYS`不足以保持您的价值。另外，您不能注释枚举类型，例如

```
@Column(name="REPEAT_DAYS")

private WeekdayType repeatDays; 
```

相反，你可以做类似的事情

`@Enumerated(EnumType.STRING)`并像这样定义您的枚举

```
enum Fruits {
  apple,
  orange
} 
```

# ios - NSDecimalNumber

> ID：13950585
> 
> 赞同：2
> 
> 时间：2012-12-19T10:45:01.160
> 
> 标签：ios, core-data, nsdecimalnumber

NSDecimalNumber 以较少数量的零保存，例如，我在文本字段中输入 $6000,00，但在 tableview 中出现 $6,00

请帮我解决这个问题

下面是我的代码：

```
@property (strong, nonatomic) NSNumberFormatter *currencyFormatter;
@synthesize currencyFormatter;

- (void)viewDidLoad
{
    [super viewDidLoad];

    nameTextField.text = editGift.nameOfGift;

    currencyFormatter = [[NSNumberFormatter alloc]init];
    [currencyFormatter setNumberStyle:NSNumberFormatterCurrencyStyle];
    priceTextField.text = [currencyFormatter stringFromNumber:[editGift priceOfGift]];

}

- (IBAction)saveChanges:(id)sender {
    editGift.nameOfGift = nameTextField.text;

    [currencyFormatter setNumberStyle:NSNumberFormatterCurrencyStyle];
    NSDecimalNumber *priceAmount = [NSDecimalNumber decimalNumberWithString:priceTextField.text];
    editGift.priceOfGift = priceAmount;

    AppDelegate *myApp = (AppDelegate *) [[UIApplication sharedApplication]delegate];
    [myApp saveContext];
    [self.delegate editGiftViewControllerDidSave:self];
} 
```

在 tableView 中显示：

```
NSNumberFormatter *currencyFormatter = [[NSNumberFormatter alloc]init]; 
[currencyFormatter setNumberStyle:NSNumberFormatterCurrencyStyle]; 
cell.giftCostLabel.text = [currencyFormatter stringFromNumber:[gift priceOfGift]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:10:15.363

试试这个代码可能对你有帮助。

```
 - (IBAction)saveChanges:(id)sender {
        editGift.nameOfGift = nameTextField.text;

    NSDecimalNumber *priceAmount = [NSDecimalNumber decimalNumberWithString:priceTextField.text];

     editGift.priceOfGift =priceAmount;

        AppDelegate *myApp = (AppDelegate *) [[UIApplication sharedApplication]delegate];
        [myApp saveContext];
        [self.delegate editGiftViewControllerDidSave:self];
    } 
```

在 Tableview 中试试这个

```
 NSNumberFormatter *currencyFormatter = [[NSNumberFormatter alloc] init];
    [currencyFormatter setNumberStyle: NSNumberFormatterCurrencyStyle];

cell.giftCostLabel.text = [currencyFormatter stringFromNumber:editGift.priceOfGift]; 
```

# jquery - 获取jsonp数据

> ID：13950586
> 
> 赞同：0
> 
> 时间：2012-12-19T10:45:05.363
> 
> 标签：jquery, json, jsonp

HTML 标记：

```
<ul>
    <li class="entries"></li>
</ul> 
```

jQuery代码：

```
$(function () {
    $.ajax({
        url: "http://query.yahooapis.com/v1/public/yql",
        dataType: "jsonp",
        success: function (data) {
            console.log(data.query.results.json);
            $.each(data.query.results.json.entries, function (i, v) {
                $('#entries').append(data.query.results.json.entries[i].content + '<br />');
            });
        }, data: {
            q: 'select * from json where url="https://www.facebook.com/feeds/page.php?id=397319800348866&format=json"',
            format: "json"
        }
    });
}); 
```

[小提琴](http://jsfiddle.net/DtNxb/3/)

我想将输出视为菜单。单击标题时，它还将显示内容和图像。我将如何使用 jQuery 和 html 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:02:37.540

为每个条目创建一个标题和内容元素，并在单击标题时切换内容元素的可见性：

Javascript：

```
$(function () {
    $.ajax({
        url: "http://query.yahooapis.com/v1/public/yql",
        dataType: "jsonp",
        success: function (data) {
            console.log(data.query.results.json);
            $.each(data.query.results.json.entries, function (i, v) {
                $('#entries').append(
                    $('<div>').addClass('header')
                    .html(data.query.results.json.entries[i].title)
                    .append(
                        $('<div>').addClass('content')
                        .html(data.query.results.json.entries[i].content)
                    )
                );
            });
        }, data: {
            q: 'select * from json where url="https://www.facebook.com/feeds/page.php?id=397319800348866&format=json"',
            format: "json"
        }
    });

    $('#entries').on('click', '.header', function(){
        $('.content', this).toggle();
    });
}); 
```

CSS：

```
.header { margin: 5px; background: #eee; padding: 5px; }
.content { display: none; } 
```

演示：http: [//jsfiddle.net/DtNxb/5/](http://jsfiddle.net/DtNxb/5/)

# android - Difference between eng and user-debug build in Android

> ID：13950589
> 
> 赞同：30
> 
> 时间：2012-12-19T10:45:15.547
> 
> 标签：android, linux, makefile, linux-kernel, android-build

I would like to know the difference between the two `build_flavor`'s viz.

> eng & user-debug

The difference between eng and user build flavors is quiet evident. But eng and user-debug is confusing me somewhat. What are the additional Debug facilities provided in eng that are not present in user-debug?

For eg.

```
If I take only the Kernel being built: 
```

`Will the Debugging levels differ for the eng and user-debug builds?`

I am facing an issue where the user-debug build is booting up on the android phone. But the eng build is not and the build_flavor is the only difference between the two builds.

Any help/pointers is appreciated. Thanks!

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-02-08T07:00:46.930

eng：这是默认风格。简单的 make 与 make eng 相同。

```
- Installs modules tagged with: eng, debug, user, and/or development.
- Installs non-APK modules that have no tags specified.
- Installs APKs according to the product definition files, in addition to tagged APKs.
- ro.secure=0
- ro.debuggable=1
- ro.kernel.android.checkjni=1
- adb is enabled by default. 
```

用户：制作用户

这是最终版本的味道。

```
- Installs modules tagged with user.
- Installs non-APK modules that have no tags specified.
- Installs APKs according to the product definition files; tags are ignored for APK modules.
- ro.secure=1
- ro.debuggable=0
- adb is disabled by default. 
```

userdebug : 使用户调试

与用户相同，除了：

```
Also installs modules tagged with debug.
- ro.debuggable=1
- adb is enabled by default. 
```

文档：[https ://source.android.com/source/add-device.html#build-variants](https://source.android.com/source/add-device.html#build-variants)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-01-23T04:33:06.020

那么三个构建之间的差异即。eng、user和user-debug如下：

> **eng** - 工程构建带有默认的 root 访问权限。
> 
> **用户**- 用户构建是在生产手机上闪现的。没有根访问权限。
> 
> **user-debug** - 用户调试版本不附带默认的 root 访问权限，但可以被 root。它还包含额外的日志记录。

这里要注意的一件事是，尽管 eng 构建可能会建议额外的日志记录，但事实并非如此。用户调试将包含最大日志记录，应在开发期间使用

# wordpress - Search for specific category

> ID：13950591
> 
> 赞同：1
> 
> 时间：2012-12-19T10:45:21.527
> 
> 标签：wordpress, search

I am planning a WordPress site and need search results for a specific category of post AND another search box for page category. Is there a way to set up two different search boxes for this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:44:08.050

使用插件“http://wordpress.org/extend/plugins/search-everything/”可以做到这一点

试试这个..希望这会奏效。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:05:07.870

对于类别搜索帖子。

您可以按类别使用插件名称搜索。

查看：[http ://wordpress.org/extend/plugins/search-by-category/](http://wordpress.org/extend/plugins/search-by-category/)

# magento - How to add Category image programmatically?

> ID：13950592
> 
> 赞同：0
> 
> 时间：2012-12-19T10:45:28.447
> 
> 标签：magento

I am trying to add category programatically. Category got created very easily but i am not finding the way to add category image. here is my code.

```
 $brand_name = $_POST['brand_name'];
    $brand_logo = $_FILES['filename']['name'];
    $brand_content = $_POST['brand_content'];
    $brand_id = $_POST['brand_id'];
    $brand_path = $brand_logo;

    $parentId = '35';

    $category = new Mage_Catalog_Model_Category();
    $category->setName($brand_name);
    $category->setUrlKey($brand_name);
    $category->setIsActive(1);
    $category->setDisplayMode('PRODUCTS');
    $category->setIsAnchor(0);

    $parentCategory = Mage::getModel('catalog/category')->load($parentId);
    $category->setPath($parentCategory->getPath());              

$data['display_mode'] = 'PRODUCTS_AND_PAGE';
$data['page_layout'] = 'one_column';
$data['thumbnail'] = $brand_path;
$category->addData($data);

    $category->save();
    unset($category); 
```

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:42:51.053

你已经有了为你的猫添加图像的部分。它的：

```
$data['thumbnail'] = $brand_path; 
```

但我确定 $brand_path = $brand_logo = $_FILES['filename']['name'] 包含 cat thumbnail 参数的错误值。

$data['thumbnail'] 应该包含图像路径，而不仅仅是图像名称。

# jakarta-ee - Anynchronous multithread message processing

> ID：13950593
> 
> 赞同：1
> 
> 时间：2012-12-19T10:45:34.553
> 
> 标签：jakarta-ee, java-ee-6, ejb-3.1

Java 7, Glassfish 3.1.2

Input are messages like:

```
public class Message {

    private final String contextId;
    private final String name;
    ...
} 
```

This messages should be processed by a worker. For messages with new contextId a new thread should be started. For contextId that already exists use a already existing thread. The already existing thread should process the message with the same contextId sequential.

Hier my last, not working, Worker version.

```
@Stateless
@LocalBean
public class Worker {

private static final Map<String, Future<Result>> MAP = new ConcurrentHashMap<>();
@EJB
private Worker worker;

@Asynchronous
public void work(Message message) {
    System.out.println(Thread.currentThread().getName() + ": A  message: " + message.toString()+ " should be processed");
    Future<Result> sameContext = MAP.get(message.getContextId());
    if (sameContext != null) {
        waitForSameContextId(message, sameContext);
    }
    MAP.put(message.getContextId(), worker.doWork(message));
}

@Asynchronous
public Future<Result> doWork(Message message) {
    System.out.println(Thread.currentThread().getName() + ": Processing the message:  " + message.toString());

    AsyncResult<Result> asyncResult = new AsyncResult<>(new Result());
    try {
        Thread.sleep(15000);
    } catch (InterruptedException ex) {
        ex.printStackTrace();
    }

    MAP.remove(message.getContextId());  //We are done removing 
    System.out.println(Thread.currentThread().getName() + ": The message: " + message.toString()+ " was processed");
    return asyncResult;
}

private void waitForSameContextId(Message message, Future<Result> result) {
    try {
        System.out.println(Thread.currentThread().getName() + ": message with id: " + message.toString()
                + " is already in work, blocking Thread until it is finished");
        Result get = result.get(); //blocks thread
    } catch (InterruptedException | ExecutionException ex) {
        ex.printStackTrace();
        // Do some failure management
    }
} 
```

Test class:

```
public class MessageReceiver {

private static String ID = "#########";

@EJB
private Worker worker;

public void receive(Message message) {

    worker.work(message);
}

@PostConstruct
void init() {

    receive(new Message(ID, "message 1"));
    receive(new Message(ID, "message 2"));
    receive(new Message(ID, "message 3"));
 ...
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T21:21:57.197

我认为您可以使用 CDI @Observes 模式调用 @Asynchronous 服务。如需深入解释，请查看此链接[http://www.devchronicles.com/2011/12/javaee-revisits-design-patterns_28.html](http://www.devchronicles.com/2011/12/javaee-revisits-design-patterns_28.html)

# xquery - Using XQDT + Zorba to debug OSB Xqueries

> ID：13950597
> 
> 赞同：4
> 
> 时间：2012-12-19T10:45:37.860
> 
> 标签：xquery, zorba

I am trying to debug some xqueries written for Oracle Service Bus, using various tools like XmlSpy, Eclipse XQDT with zorba etc.. They all fail because of a BEA specific xquery function "group" which is probably the equivalent of the xquery function "group by" in xquery 3.0. So the xquery engines I am using dont recognize it, and therefore I cant do any step-by-step debugging. Assuming I have all the *.jar files from (BEA) Oracle that implement these xquery functions, does anyone know if it's possible to import them in zorba or XMLSPY so that these vendor specific functions are recognized?

# c# - WatiN c#验证多个内容的页面

> ID：13950598
> 
> 赞同：1
> 
> 时间：2012-12-19T10:45:43.383
> 
> 标签：c#, watin

只是想知道如何最好地使用 WatiN 验证页面的多次出现。

例如，我有一个添加地址详细信息的页面。该页面上的大多数字段都是必填字段。如果我在没有填写所有必填字段的情况下进入该页面并点击“保存”按钮，我期望 4“这是必填字段”。出现的错误信息。

目前我了解如何处理单个错误消息 - 类似于

> // 断言1
> 
> boolVerifyifTextPresent1 = ie.ContainsText("这是必填字段。");

然后一个

> Assert.IsTrue(boolVerifyifTextPresent1, @"网页不包含预期的文本 > ""这是一个必填字段。"".");

因此，我所追求的是一种检查所有 4 个“这是必填字段”消息是否出现的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:27:35.427

您遗漏了如何生成页面内容的详细信息，但说您使用的是 ASP.net Web 表单和必填字段验证器。您可以在设计页面时为这些验证器分配 ID，它们将在 HTML 中呈现为具有这些 ID 的跨度。然后，您可以使用 WATIN 获取该验证器范围并检查其属性和/或文本内容。

如果您正在检查验证摘要或使用 MVC，您可以执行类似的操作。通过一种或另一种方式，您可以获取错误消息所在的元素。

```
// do this for each rfv
WatiN.Core.Span rfvAddress1Line1 = Document.Span("ctl00_Container_rfvAddress1Line1");
Assert.IsTrue(rfvAddress1Line1.Exists);
Assert.AreEqual("Some Error Message", rfvAddress1Line1.Text);

// alternatively, if all of the messages were the exact same, you could do this
var spans = Document.Spans.Where(s => s.Text == "Some Error Message");
Assert.AreEqual(4, spans.Count()); 
```

WATIN 非常强大，您可以在页面上测试的内容非常精细。我希望这有帮助。

# php - compare two arrays depending on keys php

> ID：13950601
> 
> 赞同：3
> 
> 时间：2012-12-19T10:45:47.907
> 
> 标签：php

I have two arrays and i want to extract only the values from the second array only if its key matches the first array key.

My first array is

```
 [deal_id] => Array
    (
        [0] => Array
            (
                [0] => 75
                [5] => 76
                [10] => 77
                [15] => 79
            )

        [1] => Array
            (
                [0] => 84
            )

        [2] => Array
            (
                [0] => 86
                [3] => 88
                [8] => 89
            )

        [3] => Array
            (
                [0] => 97
            )

        [4] => Array
            (
                [0] => 100
                [4] => 104
            )

    ) 
```

My second array is

```
 [package_id] => Array
    (
        [0] => Array
            (
                [0] => 10
                [1] => 75
                [2] => 75
                [3] => 75
                [4] => 75
                [5] => 67
                [6] => 34
                [7] => 89
                [10] => 04
                [15] => 75
            )

        [1] => Array
            (
                [0] => 10
                [1] => 29
                [2] => 34
                [3] => 45
            )

        [2] => Array
            (
                [0] => 12
                [3] => 23
                [4] => 45
                [5] => 76
                [6] => 87
                [8] => 45
            )

        [3] => Array
            (
                [0] => 34
                [1] => 54
                [2] => 34

            )

        [4] => Array
            (
                [0] => 145
                [1] => 143
                [6] => 146
                [4] => 344
            )

    ) 
```

Expected output:

```
[package_id] => Array
        (
            [0] => Array
                (
                    [0] => 10
                    [5] => 67
                    [10] => 04
                    [15] => 75
                )

            [1] => Array
                (
                    [0] => 10

                )

            [2] => Array
                (
                    [0] => 12
                    [3] => 23
                    [8] => 45
                )

            [3] => Array
                (
                    [0] => 34

                )

            [4] => Array
                (
                    [0] => 145
                    [4] => 344

                )

        ) 
```

I want only those values from the second array whose key matches the first array. I want my second array to look exactly like my first except the values.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:16:38.847

只需通过循环进入一个小数组来使用这个[array_intersect_key 。](http://php.net/manual/en/function.array-intersect-key.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:20:19.090

感谢你的帮助。从上面的建议中获取线索。我终于得到了答案。

这是工作代码：

```
 foreach ($deal_ids as $dealkey => $dealval) {
            foreach ($dealval as $dkey => $dval) {
                foreach ($deal_duration as $dukey => $duval) {
                    foreach ($duval as $deukey => $deuval) {

                        if ($dkey == $deukey) {
                            $dur[$dealkey][$deukey] = $deuval;
                        }
                    }
                }
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:09:01.140

我尝试将您的数组复制到此：

```
$deal = array(
    array(
        0=>75, 5=>76, 10=>77, 15=>79,
    ),
    array(
        0=>84,
    ),
    array(
        0=>86, 3=>88, 8=>89,
    ),
);

$package = array(
    array(
        0=>10, 1=>75, 2=>75, 3=>75, 4=>75, 5=>67, 6=>34, 7=>89, 10=>04, 15=>75,
    ),
    array(
        0=>10, 1=>29, 2=>34, 3=>45,
    ),
    array(
        0=>12, 3=>23, 4=>45, 5=>76, 6=>87, 8=>45,
    ),
); 
```

并使用此代码段处理它：

```
$result = array();

foreach($deal as $key => $value){
    foreach($value as $key2 => $value2){
        if(array_key_exists($key2, $package[$key])){
            if(!isset($key, $result)){
                $result[$key] = array();
            }
            $result[$key][$key2] = $package[$key][$key2];
        }
    }
} 
```

> **注意：**这里真正的技巧是，通过使用 array_key_exists() 检查有问题的键是否存在于`$package`数组中。

结果如下：

```
Array
(
    [0] => Array
        (
            [0] => 10
            [5] => 67
            [10] => 4
            [15] => 75
        )

    [1] => Array
        (
            [0] => 10
        )

    [2] => Array
        (
            [0] => 12
            [3] => 23
            [8] => 45
        )

) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T10:56:20.270

我认为最好用一些 for 循环来完成。不会那么高效，但据我所知，没有真正的自动化方法可以做到这一点。

我不确定这是否正是您想要的，但这可能是一个开始。所以不要只是复制过去的代码（因为它可能不会工作，因为它没有经过测试），但也许它是你自己的代码的一个好的开始。

```
for($arr1 as $key11 => $val11){
    if(isset($arr2[$key11])){
        $contains = false;
        for($val11 as $key12 => $val12){
            if(isset($arr2[$key11][$key12]){
                // Contains
                $contains = true;
            }
        }
        if(!$contains){
            // Doesn't contain
        }
    }
} 
```

# r - 执行条件合并

> ID：13950608
> 
> 赞同：-5
> 
> 时间：2012-12-19T10:46:22.773
> 
> 标签：r, merge, dataframe, conditional-operator

我有 2 个数据框，它们是：

```
df1                                              
Column1        Column2        
A               id1             
B               id2             
C               id3             
B               id2             
D               id4             
A               id1             
C               id3

df2
Column1      Column2      Column3
X             m1            m2
A             m3            m4
A             m3            m4
Y             n1            n2
A             m3            m4
Z             p1            p2
X             m1            m2 
```

我想合并`df1`并`df2`基于如果第 1 列中的行是的条件`df1`，`A`它应该根据第 2 列有选择地合并第 2 列和第 3`df2`列`df1`

所以最终的 df1 看起来像这样：

```
df1                                                                           

Column1        Column2.1    Column1.2      Column2.2      Column3.2
A               id1             id1             m3            m4
B               id2                                   
C               id3         
B               id2         
D               id4         
A               id1             id1             m3            m4
C               id3 
```

到目前为止，我已经通过专门提取 df1 的第 1 列中包含“A”的行来管理这个问题。然后我在 for 循环中应用了合并以获取`df2`. 是否有可能有一个 if 循环来帮助专门执行 和 之间的条件`df1`合并`df2`？

这是`df1`and的结构`df2`：

```
df1 <- structure(list(Column1 = structure(c(1L, 2L, 3L, 2L, 4L, 1L, 
3L), .Label = c("A", "B", "C", "D"), class = "factor"), Column2 = structure(c(1L, 
2L, 3L, 2L, 4L, 1L, 3L), .Label = c("id1", "id2", "id3", "id4"
), class = "factor")), .Names = c("Column1", "Column2"), class = "data.frame", row.names = c(NA, 
-7L))

df2 <- structure(list(Column1 = structure(c(2L, 1L, 1L, 3L, 1L, 4L, 
2L), .Label = c("A", "X", "Y", "Z"), class = "factor"), Column2 = structure(c(1L, 
2L, 2L, 3L, 2L, 4L, 1L), .Label = c("m1", "m3", "n1", "p1"), class = "factor"), 
    Column3 = structure(c(1L, 2L, 2L, 3L, 2L, 4L, 1L), .Label = c("m2", 
    "m4", "n2", "p2"), class = "factor")), .Names = c("Column1", 
"Column2", "Column3"), class = "data.frame", row.names = c(NA, 
-7L)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:12:40.910

如果 df1 和 df2 如上所述定义

```
library(sqldf)

final<-sqldf("select df1.Column1 as Column1 ,df1.Column2,(Select distinct df2.Column2 from df2 where df2.Column1=df1.Column1) as Column2_2,(Select distinct df2.Column3 from df2 where df2.Column1=df1.Column1)as Column3_2 from df1 left join df2 on df1.Column1=df2.Column2")

Column1.2<-ifelse(final$Column1=="A",final$Column2,NA)

final<-cbind(final,Column1.2) 
```

# jquery - Need to disable Days in Jquery-UI DatePicker

> ID：13950613
> 
> 赞同：2
> 
> 时间：2012-12-19T10:46:38.427
> 
> 标签：jquery, jquery-ui, datepicker

I'm wondering if there's a method or option in JQuery datepicker to disable days in the calendar, or even a way to perhaps disable days so that choosing a month is enough to set the date.

Can't seem to find anything that does the job @ [http://api.jqueryui.com/datepicker/#option-navigationAsDateFormat](http://api.jqueryui.com/datepicker/#option-navigationAsDateFormat)

I have a non-paying client who requested this, so would rather keep on using the datepicker component rather than try and re-engineer an input (dual input asi t would be due to them needing MM/YY).

Any help with this could be considered my christmas and birthday gifts combined.

**Cheers in advance!**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:50:27.330

你可以参考[http://davidwalsh.name/jquery-datepicker-disable-days](http://davidwalsh.name/jquery-datepicker-disable-days)做希望它可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:03:24.300

你可以使用[`beforeShowDate event`](http://jqueryui.com/demos/datepicker/#event-beforeShowDay)datepicker 的结合[`Date.getDay()`](http://www.w3schools.com/jsref/jsref_getday.asp)来做你想做的事，像这样：

```
​$("#datepicker").datepicker({
    beforeShowDay: function(date) {
        var day = date.getDay();
        return [(day != 1 && day != 2)];
    }
})​​​​​;​ 
```

# c# - Winforms，最小化，文本

> ID：13950617
> 
> 赞同：3
> 
> 时间：2012-12-19T10:46:54.963
> 
> 标签：c#, winforms

我是 WinForms 的新手，目前正在开发一个简单的应用程序。我不太确定是否可能，但我想在应用程序最小化时在任务栏中显示表单的文本值（或某些文本值），而不是图标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T10:50:58.507

您可以通过以下方式设置应用程序的文本：

```
 this.Text = "Text that you want to display"; 
```

将上面的代码行粘贴到方法下方的 Form 构造函数中`InitializeComponent()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:03:36.757

答案是 Rohit Vyas 的。但由于您的评论，您正在寻找：

> 右键单击任务栏 -> 属性 -> 任务栏按钮：从不合并。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T10:48:51.540

如果不涉及 COM/Interop 的东西，这是不可能的，即使那样我也不建议这样做。为什么不使用文本图标，或者您可以查看[NotfyIcon 类](http://msdn.microsoft.com/en-us/library/9szb3e6y.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T10:57:32.927

标题通常出现在win xp的任务栏中，很多窗口在win窗体中可以这样设置

```
This.Text ="Some Text"; 
```

但在 Win 7 中，除非您更改窗口的属性，否则它总是会给您图标。

# android - onCreate() 未定义对象类型和令牌类无效类型上的语法错误

> ID：13950624
> 
> 赞同：3
> 
> 时间：2012-12-19T10:47:09.217
> 
> 标签：android

我是安卓新手。我收到了`method(onCreate) is undefined`关于对象类型和令牌类无效类型的语法错误的错误。

```
package com.ling;

import android.app.Activity;
import android.os.Bundle;

public class Disp extends Activity{

    public class onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.display);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T10:49:04.523

改变

```
public class onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.display);
} 
```

到

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.display);
} 
```

因为`onCreate`当前方法不是类，所以您正在尝试从`onCreate`方法返回类类型

# python - 用python读取网页但出现问号而不是撇号

> ID：13950625
> 
> 赞同：0
> 
> 时间：2012-12-19T10:47:10.043
> 
> 标签：python, webpage

嗨，我正在尝试从`http://services.runescape.com/m=news/recruit-a-friend-for-free-membership-and-xp`包括链接中获取所有内容，但不是其他一些内容。我目前所做的是：

```
import urllib
url = "http://services.runescape.com/m=news/recruit-a-friend-for-free-membership-and-xp"
a = urllib.urlopen(url).read()
b = a.split("<div class=\"Content\">")[1]
c = b.split("</div>")[0]
print c 
```

这打印： http: [//pastebin.com/WFXGpvRu](http://pastebin.com/WFXGpvRu)

我一直在做很多`replace()`'s 来删除一些东西，例如删除`<p>`s （*我不想要*）并更改`<b>`为 '' （*那里有两个撇号*）。

但我遇到的问题是问号。当应该有撇号时，会出现问号。我不能只做 a`replace()`因为那里有问号，应该在那里而不应该是撇号。

有没有更简单的方法来完成我所做的一切？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:58:44.603

这些撇号不是常规的 ASCII 引号，而是 WINDOWS-1252 单引号。它们在打印时显示为问号，因为 c 是需要解码的“str”（二进制字符串）。

最后做这个额外的步骤：

```
d = c.decode("windows-1252")
print d 
```

d 现在是一个包含所需文本的 unicode 对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T11:13:15.283

使用字符串操作解析 HTML 通常不是一个值得推荐的想法。有多种 Python 库可以帮助您解析 HTML：

看看[BeautifulSoup](http://pypi.python.org/pypi/BeautifulSoup)（[这里](http://kochi-coders.com/?p=122)有一个简单的教程）或[Scrapy](http://scrapy.org/)。

# resources - msproject - 创建一个指示多个资源分配给任务的指标

> ID：13950627
> 
> 赞同：0
> 
> 时间：2012-12-19T10:47:15.057
> 
> 标签：resources, ms-project, indicator

我对 MSProject 还很陌生，我相信我的要求很简单：

当一项任务分配了多个资源时，我希望指示器显示一个图标。

是否可以？
ps 我的目标是人们不能为每个任务添加多个资源。如果有办法强制执行，则不需要该指标

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:19:24.740

基本公式是这样的：`InStr([Resource Initials],",")`。请注意，“，”是我的语言环境中的列表分隔符。对于其他可能是“;”的人 等等。Application 对象有一个属性：`Application.ListSeparator`但它在普通公式定义中不可用 - 您可以创建您的 VBA 函数，它只会返回值并使用您的函数。

公式的变化取决于您要使用的字段。如果您打算使用其中一个标志字段 - 只需`> 0`在末尾添加，对于数字字段，您只需定义一个带有`greater than 0`条件的图形指标。

另一种选择是为事件编写处理程序`Application.ProjectBeforeAssignmentNew`并检查是否已经为任务定义了任何分配

# php - 如何在php中格式化文本

> ID：13950628
> 
> 赞同：0
> 
> 时间：2012-12-19T10:47:17.220
> 
> 标签：php, regex, text-formatting

我在[**pdftotext**](http://www.cyberciti.biz/faq/converter-pdf-files-to-text-format-command/)
的帮助下从 pdf 文件生成文本 我的问题不在于 pdftotext，而是与相应地格式化文本有关

```
Salman              Madhuri             Mohnish             Renuka                Anupam
Khan                Dixit               Behl                Shahane               Kher
Prem                Nisha Chou...       Rajesh              Pooja Chou...         Prof. Siddh

Hum Aapke Hain Koun...! (1994) - Full cast and crew
www.imdb.com/title/tt0110076/fullcredits
Hum Aapke Hain Koun...! on IMDb: Movies, TV, Celebs, and more... ... IMDbPro.com
offers representation listings for over 120,000 individuals, including actors, ... 
```

我需要输出为

```
Salman Khan Prem
Madhuri Dixit Nisha Chou...
Mohnish Behl Rajesh
Renuka Shahane Pooja Chou...
Anupam Kher Prof.

Hum Aapke Hain Koun...! (1994) - Full cast and crew
www.imdb.com/title/tt0110076/fullcredits
Hum Aapke Hain Koun...! on IMDb: Movies, TV, Celebs, and more... ... IMDbPro.com
offers representation listings for over 120,000 individuals, including actors, ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:08:52.793

不确定你的分隔符是什么，但你可以像下面这样（有点难看，但它可以完成工作）：

```
$namesAndContent = explode("\r\n\r\n", $theString);
$nameRows = explode("\r\n", $namesAndContent[0]);
$names = array();
foreach ($nameRows as $row) {
    $items = preg_split('/\s{2,}/', $row);
    foreach ($items as $index => $namePart) {
        if (!array_key_exists($index, $names)) {
            $names[$index] = array();
        }
        $names[$index][] = $namePart;
    }

}

foreach ($names as $name) {
    echo implode(' ', $name) . "\r\n";
}
echo "\r\n";
echo $namesAndContent[1]; 
```

演示：[http ://codepad.viper-7.com/Nr1Q4t](http://codepad.viper-7.com/Nr1Q4t)

*以上将格式化数据（当分隔符正确时），但我想知道数据来自哪里（原始而不是 pdf），因为我怀疑有更好的方法来解决您的问题。也许有一些你可以直接使用的 API*

# ipad - UIActionSheet 搞砸了 iPad 上的抖动检测（motionBegan:delegate）

> ID：13950632
> 
> 赞同：1
> 
> 时间：2012-12-19T10:47:33.140
> 
> 标签：ipad, uiactionsheet, shake

在我的应用程序中，我使用 UIActionSheet（没什么花哨的）并使用 showFromBarButtonItem: 呈现它（标准）并使用它的委托 clickedButtonAtIndex: 将其关闭。一切都简单而美好。我也使用 motionBegan: 来检测摇晃来做各种事情。

我的应用程序在 iPhone 上运行良好。

但是，在 iPad 上，一旦出现 actionSheet（一次），motionBegan: 就停止工作了！设备（模拟器）的任何晃动都不会注册！在 actionSheet 演示之前，所有的震动都很好。它一出现，就停止了。

我添加了一个 [actionSheetNav resignFirstResponder]; 在 actionSheet:clickedButtonAtIndex: 委托（如果这是一个问题）但没有效果。

有任何想法吗？（我可以发布代码，但即使（每个相关的）方法的第一个命令是 NSLog 并且之后立即返回，也没有任何效果）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T11:54:33.470

找到了！

我只需要添加一个

```
 [self becomeFirstResponder]; 
```

之后

```
 [actionSheetNav resignFirstResponder]; 
```

actionSheet 委托中的行

```
-(IBAction)actionSheet:(UIActionSheet *)sender clickedButtonAtIndex:(NSInteger)myButton 
```

# testing - 用于联合端点的 Web 服务测试工具

> ID：13950634
> 
> 赞同：1
> 
> 时间：2012-12-19T10:47:41.157
> 
> 标签：testing, service, web, endpoints, federated

有人知道 WCF 测试工具，很像soapui，可以用来调用联合端点吗？如果有知道这样的工具，任何关于如何调用这些服务的想法都将不胜感激。我的一个想法是为每个服务创建一个基本的 http 绑定端点，但这会产生大量的配置开销。这是最好的方法还是创建我自己的工具来调用服务？

谢谢，安迪

# asp.net - 在 WCF 中实例化一个类

> ID：13950636
> 
> 赞同：2
> 
> 时间：2012-12-19T10:47:44.760
> 
> 标签：asp.net, vb.net, wcf, webmethod

我正在编写一个 WCF WebMethod 来将文件上传到，其中我从网络上获取了片段。WCF 界面如下所示：

```
<ServiceContract()>
Public Interface ITransferService

    <OperationContract()>
    Sub UploadFile(ByVal request As RemoteFileInfo)

End Interface

<MessageContract()>
Public Class RemoteFileInfo
    Implements IDisposable

    <MessageHeader(MustUnderstand:=True)>
    Public FileName As String

    <MessageHeader(MustUnderstand:=True)>
    Public Length As Long

    <MessageBodyMember(Order:=1)>
    Public FileByteStream As System.IO.Stream

    Public Sub Dispose() Implements IDisposable.Dispose
        If FileByteStream IsNot Nothing Then
            FileByteStream.Close()
            FileByteStream = Nothing
        End If
    End Sub

End Class 
```

在 ASP.NET 中，当使用 web 方法时，由于某种原因，它仅在将接口用作实例化的一部分时才有效`RemoteFileInfo`：

```
Protected Sub btn_Click(sender As Object, e As EventArgs) Handles btn.Click
    If fu.HasFile Then
        Dim fi As New System.IO.FileInfo(fu.PostedFile.FileName)

        ' this is the line in question --------------
        Dim cu As ServiceReference1.ITransferService = New ServiceReference1.TransferServiceClient()
        ' -------------------------------------------

        Dim uri As New ServiceReference1.RemoteFileInfo()
        Using stream As New System.IO.FileStream(fu.PostedFile.FileName, IO.FileMode.Open, IO.FileAccess.Read)
            uri.FileName = fu.FileName
            uri.Length = fi.Length
            uri.FileByteStream = stream
            cu.UploadFile(uri)
        End Using
    End If
End Sub 
```

谁能告诉为什么不能`TransferService`使用以下方法创建一个实例：

```
Dim cu As New ServiceReference1.TransferServiceClient() 
```

如果我尝试上述方法，它将打破这一行：

```
cu.UploadFile(uri) 
```

...并且 UploadFile 必须使用三个参数（文件名、长度、文件字节流）调用，即使没有使用此签名的方法。

请问创建这个类的实例时为什么需要接口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T20:00:45.607

当您使用“添加服务引用”对话框为您的服务创建代理时，默认情况下，代理创建代码将“解包”消息合同，就像您拥有的那样。如果您希望消息合同按照您在代理服务器端的定义显示，您需要选择“高级”选项卡，并选中“始终生成消息合同”选项。这样，您也将在客户端中获得消息合同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T02:56:56.463

问题是，当`MessageContract`遇到 a 作为参数时，WCF 客户端生成默认情况下假定您要实现消息传递样式的接口，并提供消息协定中的离散属性作为客户端接口的一部分。

MSDN 中的[Using Messaging Contracts](http://msdn.microsoft.com/en-us/library/ms730255.aspx)文章非常详细地描述了使用消息合同可以做什么，我怀疑 Microsoft 之所以选择这种默认行为是因为您可以使用这些消息玩一些“游戏”。

但是，如果您在客户端检查为 UploadFile 生成的代码，就会发现一些有趣的花絮有助于解释发生了什么。

首先是接口中UploadFile方法的注释：

```
 'CODEGEN: Generating message contract since the operation UploadFile is neither RPC nor document wrapped.
    ...
    Function UploadFile(ByVal request As ServiceReference1.RemoteFileInfo) As ServiceReference1.UploadFileResponse 
```

这意味着如果消息合约有不同的实现，合约的生成方式也会不同。

第二个是您将看到用于实际进行服务调用的代码没有什么特别之处：

```
 Public Sub UploadFile(ByVal FileName As String, ByVal Length As Long, ByVal FileByteStream As System.IO.Stream)
        Dim inValue As ServiceReference1.RemoteFileInfo = New ServiceReference1.RemoteFileInfo()
        inValue.FileName = FileName
        inValue.Length = Length
        inValue.FileByteStream = FileByteStream
        Dim retVal As ServiceReference1.UploadFileResponse = CType(Me,ServiceReference1.ITransferService).UploadFile(inValue)
    End Sub 
```

因此，在这种情况下，您的代码与生成的代码完全一样。但是，如果 MessageContract 更复杂，我怀疑情况将不再如此。

所以，对于你的问题：

> 谁能告诉为什么不能使用以下方法创建 TransferService 的实例...

只要您验证方法调用的实现与您的代码功能等效，就没有理由不采用这种方法。

有几个选项可以更改客户端中方法的默认生成：

1）`MessageContract`从类中删除属性`RemoteFileInfo`。

2) 虽然看起来有违直觉，但您可以选中[Configure Service Reference Dialog Box](http://msdn.microsoft.com/en-us/library/bb514724%28v=vs.100%29.aspx)`Always generate message contracts`中的复选框。

# perl - 如何在 lib Path 中使用变量？

> ID：13950637
> 
> 赞同：13
> 
> 时间：2012-12-19T10:47:46.893
> 
> 标签：perl, perl-module

我想在 lib 路径中使用 $var 变量。

`my $var = "/home/usr/bibfile;"`

`use lib "$var/lib/";`

但是，当我这样做时，它会引发错误。

我想使用`use lib "$var/lib/";`而不是`use lib "/home/usr/bibfile/lib/";`.

我怎样才能分配一个变量，以便它可以在 lib 模块的设置中使用？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-19T10:56:56.060

变量在 中可以正常工作`use lib`，就像它们在任何字符串中一样。但是，由于所有`use`指令都在`BEGIN`块中执行，因此您的变量在您运行的那一刻还没有初始化`use`，因此您也需要将初始化放在`BEGIN`块中。

```
my $var;
BEGIN { $var = "/home/usr/bibfile"; }
use lib "$var/lib/";

use Data::Dumper;
print Dumper \@INC; 
```

给出：

```
$VAR1 = [
      '/home/usr/bibfile/lib/',
      # ... more ...
    ]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:58:31.850

不确定您要完成什么，但似乎是[FindBin::libs](https://metacpan.org/module/FindBin%3a%3alibs)的任务：

```
my $var;
BEGIN { $var = "/home/usr/bibfile" };
use FindBin::libs "Bin=$var", "base=lib"; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-19T10:59:26.283

你不能，因为`use`指令是在编译时评估的，而其他变量是在运行时评估的。

如果您的库位于相对于原始脚本的某个位置，则可以使用标准模块[`FindBin`](http://perldoc.perl.org/FindBin.html)：

```
# $Bin from FindBin is the directory of the original script
use FindBin;
use lib "$FindBin::Bin/path/to/bib";
use MyModule; 
```

# c - 为什么没有参数的函数（与实际函数定义相比）编译？

> ID：13950642
> 
> 赞同：395
> 
> 时间：2012-12-19T10:48:39.357
> 
> 标签：c, parameters, void, function-prototypes, function-parameter

我刚刚遇到某人的 C 代码，我对它为什么要编译感到困惑。有两点不明白。

1.  与实际的函数定义相比，**函数原型**没有参数。

2.  **函数定义**中的参数没有类型。

* * *

```
#include <stdio.h>

int func();

int func(param)
{
    return param;
}

int main()
{
    int bla = func(10);    
    printf("%d", bla);
} 
```

为什么这行得通？我已经在几个编译器中对其进行了测试，并且效果很好。

* * *

## 回答 #1

> 赞同：274
> 
> 时间：2012-12-19T10:56:28.537

所有其他答案都是正确的，但只是为了[完成](http://www.acm.uiuc.edu/webmonkeys/book/c_guide/1.3.html)

> 函数以下列方式声明：
> 
> ```
>  return-type function-name(parameter-list,...) { body... } 
> ```
> 
> **return-type**是函数返回的变量类型。这不能是数组类型或函数类型。**如果未给出，则假定为 int**。
> 
> **function-name**是函数的名称。
> 
> **parameter-list**是函数采用逗号分隔的参数列表。***如果没有给定参数，则该函数不带任何参数，应使用空括号集或关键字 void 定义。如果参数列表中的变量前面没有变量类型，则假定为 int***。数组和函数不传递给函数，而是自动转换为指针。如果列表以省略号 (,...) 结尾，则没有设定数量的参数。注意：标头 stdarg.h 可用于在使用省略号时访问参数。

再次为了完整起见。[来自 C11 规范 6:11:6](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)（第 179 页）

> 使用**带空括号的函数声明符**（不是原型格式参数类型声明符）**是一个过时的特性**。

* * *

## 回答 #2

> 赞同：161
> 
> 时间：2012-12-19T10:50:19.113

在 C`func()`中意味着您可以传递任意数量的参数。如果您不想要任何参数，那么您必须声明为`func(void)`. 您传递给函数的类型，如果未指定，则默认为`int`.

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2012-12-19T10:55:49.290

`int func();`是从没有 C 标准的日子开始过时的函数声明，即**K&R C**的日子（在 1989 年之前，即第一个“ANSI C”标准发布的那一年）。

请记住，*K&R C 中没有原型，*并且关键字`void`尚未发明。你所能做的就是告诉编译器函数的*返回类型*。K&R C 中的空参数列表表示“未指定但固定”数量的参数。固定意味着您必须每次调用具有*相同*数量的 args 的函数（与像 一样的*可变参数*`printf`函数相反，每次调用的数量和类型都可能不同）。

许多编译器会诊断这个结构。特别是`gcc -Wstrict-prototypes`会告诉你“函数声明不是原型”，这是正确的，因为它*看起来*像一个原型（特别是如果你被 C++ 毒害！），但不是。这是一个老式的 K&R C 返回类型声明。

**经验法则：**永远不要将空参数列表声明留​​空，使用`int func(void)`具体。这将 K&R 返回类型声明转换为适当的 C89 原型。编译器很高兴，开发人员很高兴，静态检查员很高兴。不过，那些被 C++ 的^W^Wfond 误导的人可能会畏缩，因为他们在尝试锻炼外语技能时需要输入额外的字符:-)

* * *

## 回答 #4

> 赞同：53
> 
> 时间：2012-12-19T10:51:51.110

*   空参数列表表示“任何参数”，因此定义没有错。
*   缺失的类型假定为`int`.

我会认为任何通过它的构建都缺少配置的警告/错误级别，但允许实际代码是没有意义的。

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2012-12-19T11:07:33.007

它是**K&R**风格的函数声明和定义。来自 C99 标准 (ISO/IEC 9899:TC3)

第 6.7.5.3 节函数声明器（包括原型）

> 标识符列表仅声明函数参数的标识符。作为该函数定义的一部分的函数声明器中的空列表指定该函数没有参数。**不属于该函数定义的函数声明器中的空列表指定不提供有关参数数量或类型的信息。（如果两种函数类型都是“旧式”，则不比较参数类型。）**

6.11.6 节函数声明器

> 使用带空括号的函数声明符（不是原型格式参数类型声明符）是一个**过时的特性。**

6.11.7 节函数定义

> 使用具有单独参数标识符和声明列表（不是原型格式参数类型和标识符声明符）的函数定义是一个**过时的功能。**

其中old style就是**K&R** style

例子：

宣言：`int old_style();`

定义：

```
int old_style(a, b)
    int a; 
    int b;
{
     /* something to do */
} 
```

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2012-12-19T20:49:45.183

**C 假设`int`函数返回类型和参数列表中是否没有给出类型**。仅对于此规则，以下奇怪的事情是可能的。

函数定义如下所示。

```
int func(int param) { /* body */} 
```

如果它是您编写的原型

```
int func(int param); 
```

在原型中你只能指定参数的类型。参数的名称不是强制性的。所以

```
int func(int); 
```

此外，如果您没有指定参数类型，但名称`int`被假定为类型。

```
int func(param); 
```

如果你走得更远，跟随也可以。

```
func(); 
```

编译器假定`int func()`您编写`func()`. 但不要放在`func()`函数体内。那将是一个函数调用

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2012-12-19T23:46:58.277

正如@Krishnabhadra 所说，其他用户之前的所有回复都有正确的解释，我只想对一些观点进行更详细的分析。

在 ANSI-C 中的 Old-C 中，“**无类型的形式参数**”，采用工作寄存器或指令深度能力（影子寄存器或指令累积周期）的维度，在 8 位 MPU 中，将是 int16，在 16 位中MPU 等将是 int16 等，在这种情况下 64 位架构可能会选择编译选项，例如：-m32。

*虽然在高层实现起来似乎更简单，但对于传递多个参数，程序员在控制维度数据类型步骤中的工作变得更加苛刻。*

在其他情况下，对于某些微处理器架构，ANSI 编译器定制，利用这些旧功能来优化代码的使用，强制这些“无类型形式参数”的位置在工作寄存器内部或外部工作，今天你得到使用“volatile”和“register”几乎相同。

**但需要注意的是，最现代的编译器，并没有对这两种类型的参数声明做任何区分。**

linux下用gcc编译的例子：

![主程序](../Images/8fd479b68bc9f05fdc8c2ade3e0fccfa.png)

![main2.c](../Images/6f0c4ccaaef9430881a4b2f3cc689212.png)

![main3.c](../Images/2241c4e03f210cab36a331b3c3b0e35c.png)  
*无论如何，在本地声明原型是没有用的，因为没有参数的任何调用都不会引用这个原型。如果您使用带有“无类型形式参数”的系统，对于外部调用，请继续生成声明性原型数据类型。*

像这样：

```
int myfunc(int param); 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-12-19T17:43:32.130

关于参数类型，这里已经有正确的答案，但是如果您想从编译器中听到它，您可以尝试添加一些标志（无论如何，标志几乎总是一个好主意）。

`gcc foo.c -Wextra`使用我得到编译你的程序：

```
foo.c: In function ‘func’:
foo.c:5:5: warning: type of ‘param’ defaults to ‘int’ [-Wmissing-parameter-type] 
```

奇怪`-Wextra`的是没有抓住这一点`clang`（由于某种原因它无法识别`-Wmissing-parameter-type`，也许是因为上面提到的历史原因），但`-pedantic`确实：

```
foo.c:5:10: warning: parameter 'param' was not declared, 
defaulting to type 'int' [-pedantic]
int func(param)
         ^
1 warning generated. 
```

对于原型问题，上面再次提到`int func()`的是任意参数，除非您明确定义它`int func(void)`，然后按预期给您错误：

```
foo.c: In function ‘func’:
foo.c:6:1: error: number of arguments doesn’t match prototype
foo.c:3:5: error: prototype declaration
foo.c: In function ‘main’:
foo.c:12:5: error: too many arguments to function ‘func’
foo.c:5:5: note: declared here 
```

或`clang`作为：

```
foo.c:5:5: error: conflicting types for 'func'
int func(param)
    ^
foo.c:3:5: note: previous declaration is here
int func(void);
    ^
foo.c:12:20: error: too many arguments to function call, expected 0, have 1
    int bla = func(10);
              ~~~~ ^~
foo.c:3:1: note: 'func' declared here
int func(void);
^
2 errors generated. 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-12-19T10:51:21.050

如果函数声明没有参数，即为空，则它采用未指定数量的参数。如果您想让它不带参数，请将其更改为：

```
int func(void); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-02-12T21:38:48.320

这就是为什么我通常建议人们编译他们的代码：

```
cc -Wmissing-variable-declarations -Wstrict-variable-declarations -Wold-style-definition 
```

这些标志强制执行几件事：

*   -Wmissing-variable-declarations：如果不先获得原型，就不可能声明非静态函数。这使得头文件中的原型更有可能与实际定义匹配。或者，它强制您将 static 关键字添加到不需要公开可见的函数中。
*   -Wstrict-variable-declarations：原型必须正确列出参数。
*   -Wold-style-definition：函数定义本身也必须正确列出参数。

这些标志在许多开源项目中也默认使用。例如，当在 Makefile 中使用 WARNS=6 构建时，FreeBSD 启用了这些标志。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-04-22T03:57:30.890

> **在旧式声明器**中，

> 标识符列表必须不存在，除非在函数定义的头部使用了声明符（Par.A.10.1）。声明没有提供有关参数类型的信息。例如，声明

```
int f(), *fpi(), (*pfi)(); 
```

> 声明一个函数 f 返回一个整数，一个函数 fpi 返回一个指向整数的指针，> 和一个指针 pfi 指向一个返回整数的函数。在这些中都没有>指定的参数类型；它们是老式的。

> **在新式声明中**

`int strcpy(char *dest, const char *source), rand(void);`

> strcpy 是一个返回 int 的函数，有两个参数，第一个是字符指针，第二个是指向常量字符的指针

资料来源：- K&R 书

我希望它消除了你的疑问..

# javascript - GridView SelectedIndexChanged 事件未触发

> ID：13950644
> 
> 赞同：3
> 
> 时间：2012-12-19T10:48:47.517
> 
> 标签：javascript, asp.net

我希望我的 GridView Rows 在单击它们时触发 SelectedIndexChanged 事件。

我在后面的代码中尝试了以下内容：

```
 protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowIndex != -1)
        {
            e.Row.Attributes.Add("onMouseOver", "Highlight(this)");
            e.Row.Attributes.Add("onMouseOut", "UnHighlight(this)");

            e.Row.Attributes.Add("onClick", String.Format("javascript:__doPostBack('GridView1','Select${0}')", e.Row.RowIndex));
        }
    } 
```

当我单击一行时会发生回发，但它不会触发 SelectedIndexChanged。在 Page_Load 我从请求中获取参数：

```
 if (IsPostBack)
        {
            object obTarget = this.Request.Form["__EVENTTARGET"]; //GridView1
            object obArg = this.Request.Form["__EVENTARGUMENT"]; //Select$4
        } 
```

我认为必须提高 SelectedIndexChanged，还是我对此有误解？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T10:53:24.860

您可能在回发时将 GridView 重新绑定到其 DataSource。您应该只这样做`if(!IsPostBack)`（启用 ViewState），否则不会触发事件。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        GridView1.DatSource = GetGataSource();
        GridView1.DataBind();
    }
} 
```

您还应该在每次回发时注册事件处理程序，但`RowDataBound`仅在数据绑定时调用。所以[`RowCreated`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcreated.aspx)改用。

最好使用[`Page.GetPostBackClientHyperlink`](http://msdn.microsoft.com/en-us/library/system.web.ui.page.getpostbackclienthyperlink.aspx)而不是硬编码 javascript 函数。

```
e.Row.Attributes["onclick"] = Page.ClientScript.GetPostBackClientHyperlink((GridView)sender, "Select$" & e.Row.RowIndex) 
```

# http - 使用 Kannel 网关发送多部分非英语 SMS 时出现 Clickatell 错误

> ID：13950647
> 
> 赞同：2
> 
> 时间：2012-12-19T10:48:57.970
> 
> 标签：http, sms, kannel, clickatell

我正在尝试使用 Clickatell 运算符以阿拉伯语 (UTF-8) 格式发送多部分短信，但我无法，1 部分阿拉伯语短信工作正常，多部分英文短信也工作正常，只是多部分阿拉伯语短信不不。

这些是我的配置：

```
group = smsc
smsc-id = clickatell
smsc = http
system-id = ******
system-type = clickatell
smsc-username = ******
smsc-password = ******
send-url = "http://api.clickatell.com/http/sendmsg"
port = 13015
allowed-smsc-id = clickatell
connect-allow-ip = "127.0.0.1;192.168.100.*;196.30.96.134"
log-file = "/var/log/kannel/clickatell/clickatell.log"
log-level = 0 
```

并且，我的 sendms 配置：

```
group = sendsms-user
username = ***
password = ***
concatenation = true
max-messages = 7 
```

任何帮助或想法都会很好，谢谢。

# java - 接口中没有设置方法

> ID：13950648
> 
> 赞同：6
> 
> 时间：2012-12-19T10:49:01.593
> 
> 标签：java, inheritance, interface

我有一个实现接口 B 的具体类 A。

```
B ref = new A(); 
```

代码 ：

```
public interface B{
  public abstract String[] getWords();
}

public class A implements B {
  private String[] words = new String[] {};
  public void setWords(String[] words){
    this.words = words;
  }
  public String[] getWords(){
    return this.words;
  }
 } 
```

在接口 B 中，虽然类 A 有它，但我只有 getter 方法但没有 setter 方法。

所以当我这样做时: `B ref = new A();`，这段代码会起作用吗？我将如何设置单词？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T10:50:42.943

`setWords`如果将ref 定义为 ，您将无法调用它`B ref = ...`。

这是在声明变量（或使用强制转换）时需要使用确切类型的情况之一：

```
A ref = new A(); 
```

或者：

*   您可以创建一个接口 C 扩展 B 并包含这两种方法并让 A 实现 C。
*   您可以在 A 中提供一个构造函数，该构造函数需要一个`String[] words`参数来初始化您的`words`字段，而根本不提供 setter。

我个人倾向于后一种选择：

```
public class A implements B {

    private final String[] words;

    public A(String[] words) {
        this.words = words;
    }

    public String[] getWords() {
        return this.words;
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T10:51:27.273

> 所以当我这样做时：B ref = new A();，这段代码会起作用吗？

是的，它会的。

> ...我将如何设置单词？

你将无法做到，除非你：

1.  make`A`的构造函数获取单词列表；或者
2.  添加`setWords()`到`B`; 或者
3.  保留对`A`对象的类型引用；或者
4.  沮丧`ref`到`A`。

其中，我会选择选项 1-3 之一。最后一个选项仅出于完整性考虑。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-19T10:51:53.717

如果接口确实公开了它，则必须转换回原始类型

```
if (ref instanceof A)
   ((A) ref).setWords(words);
else
   // something else. 
```

更好的解决方案是将方法添加到接口中。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-19T10:51:31.400

```
B ref = new A();//1
ref.setWords(whatever);//2 
```

上面的代码不会像`setWords()`您`interface B`的 .

正如其他人已经在他们的答案中表达的那样。你有 2 个选项作为解决方法

*   创建对象为 A ref = A();
*   将 ref 向下转换为 A 类型，例如 ((A)ref).setWords(watever);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T10:53:29.007

> 所以当我这样做时：B ref = new A();，这段代码会工作吗

是的

> 我将如何设置单词？

你不能。你需要在你的界面中有setter方法。

在您之间不需要将方法定义为抽象的。默认情况下是抽象的。

# scala - Scala 模式匹配选项 None 有或没有绑定

> ID：13950650
> 
> 赞同：4
> 
> 时间：2012-12-19T10:49:09.677
> 
> 标签：scala, pattern-matching

我想做以下模式匹配：

```
minReachableInt match {
   case None | Some(n) if n <= 0 =>
     println("All positive numbers can be reached")
   case _ =>
     println("Not all positive numbers can be reached")
} 
```

当然，它不会编译，因为 n 在`None`. 但是由于我在后续代码中不需要它，我怎样才能在不复制代码的情况下以你能想象的最漂亮的方式实现我的结果？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T11:07:54.677

使用模式匹配语法可以做的事情是有限制的，所以不要试图用它来表达你的所有逻辑。

这个问题可以用以下方式表达`filter`：

```
minReachableInt filter (_ <= 0) match {
  case None =>
    println("All positive numbers can be reached")
  case _ =>
    println("Not all positive numbers can be reached")
} 
```

# java - 我们是否需要在系统中安装 gsutil 工具才能访问 google Cloud

> ID：13950653
> 
> 赞同：2
> 
> 时间：2012-12-19T10:49:25.370
> 
> 标签：java, google-app-engine, google-cloud-storage

我正在用java开发一个应用程序，我已经在我的本地系统中安装了[gsutil工具](https://developers.google.com/storage/docs/gsutil_install)来访问谷歌云存储进行读写操作。我参考了应用引擎文档[Google Cloud Storage Java API Overview](https://developers.google.com/appengine/docs/java/googlestorage/overview#Prerequisites)。它说要安装 gsutil 工具来访问存储桶以进行读写操作。现在我的疑问是，稍后在任何 Web 服务器中部署我的应用程序时，我是否需要在 Web 服务器中安装和配置[gsutil 工具](https://developers.google.com/storage/docs/gsutil_install)？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T10:52:07.200

GSUtil 仅在 Clouds Storage API 之上为 Google Cloud Storage 提供命令行界面，您可以直接访问 API，而不是使用它。

# java - 最终字段的设置方法

> ID：13950654
> 
> 赞同：25
> 
> 时间：2012-12-19T10:49:32.540
> 
> 标签：java

[使用反射以及http://docs.oracle.com](http://docs.oracle.com)提供的安装程序在已安装的 JDK 中提供的 src.zip ，我发现了以下字段`java.lang.System`，

**in**， **out**和**err**被声明为 final，但它们具有各自的（公共）setter 方法，这些方法又调用它们各自的本机部分。

例如，我可以成功地将控制台输出重定向到文件。

一旦我们在 Java 代码中初始化了最终变量，我们就可以准确地设置它。

我的问题是：这条最终规则是否不适用于本机代码？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-19T10:53:40.147

> 我的问题是：这条最终规则是否不适用于本机代码？

本机代码可以打破`final`. 它还可以破坏访问规则和基本类型安全，以及其他各种东西。

关于`final`字段实际上不可变的观点实际上在 JLS 中得到了认可：请参阅[JLS 17.5.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.5.3)。其要点是，如果您确实更改了 a `final`（例如通过反射），某些保证将不再成立。并且更改`final`表示编译时间常数的 a 的值可能根本没有效果。

但正如@ignis 指出的那样，`System.in/out/err`在 JLS 中特别提到“写保护”（[JLS 17.5.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.5.4)）而不是具有正常的`final`语义。基本上，这意味着即使变量发生变化，`final`保证**也成立。**

* * *

> 当无论如何都会有一个setter时，为什么变量是最终的？

在这种特殊情况下，它是 1) 防止`System.in/out/err`被意外分配破坏，以及 2) 以便更改可以由`SecurityManager`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T10:58:08.167

`final`使 Java 编译器确保除了初始化之外没有代码尝试更改字段。在 java.lang.System 中是不同的

`public static void setOut(PrintStream out) { checkIO(); setOut0(out); }`

`private static native void setOut0(PrintStream out);`

从 javac 的角度来看，没有违规。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T10:59:16.340

在源代码中，它们没有重新分配方法中的示例`out`变量`setOut()`

```
public static void setOut(PrintStream out) {
 checkIO();
 setOut0(out);
} 
```

他们将传递的流发送到本机代码，并且该代码负责设置该流以供当前使用。所以最终变量没有被重新设置并且这个变量没有在本机代码中使用，无论它传递给本机代码的任何流，它都使用它

# android - 应用程序类或服务中的 GPS？

> ID：13950655
> 
> 赞同：1
> 
> 时间：2012-12-19T10:49:32.900
> 
> 标签：android, gps

如果我需要在我的应用程序中实现 GPS，该应用程序仅在应用程序处于前台时才应该处于活动状态 - 用户在一个活动中执行某些操作，将此活动更改为另一个活动等等，但是当用户关闭应用程序或最小化它时，我希望它关闭。

我想知道哪种方法会更好。在应用程序类或服务中实现 GPS？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T11:07:14.820

在应用程序类中实现它，然后重写 OnResume 和 OnPause 方法以启用和禁用 GPS 侦听器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:03:59.263

我不确切知道它在哪里更好，但是无论您将位置侦听器放在哪里，您都无法确切知道 Android 系统何时会终止您的应用程序。要知道您的应用程序何时处于前台/后台，您可以实现一个绑定服务，该服务从您在应用程序中拥有的每个活动的 onStart() 方法绑定，并在 onStop() 中取消绑定。如果没有绑定活动，服务会自动停止，然后您删除位置更新侦听器。我希望这可以帮助你。

# ios5 - ios：编译xcode项目时出错

> ID：13950656
> 
> 赞同：0
> 
> 时间：2012-12-19T10:49:36.127
> 
> 标签：ios5

实际上，当我想编译它时，我从某个网站下载了 xcode 示例项目，它显示错误“我的 Mac 64 位”。我的 iOS 项目只显示“我的 Mac 64 位”，而不是要构建的模拟器或我的 iPhone。我不知道为什么会这样。我不认为我改变了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:56:16.077

在 XCode 中选择您的项目名称。在详细视图中单击信息选项卡。在部署目标部分，将其设置为之前的任何值。![在此处输入图像描述](../Images/0dcfed386549bbc8c744b12a1e73a15c.png)

或者只是尝试重新启动 XCode。

# macos - 在虚拟机上运行 OS X

> ID：13950657
> 
> 赞同：1
> 
> 时间：2012-12-19T10:49:41.297
> 
> 标签：macos, osx-lion, virtual-machine, virtualbox

我使用本指南在虚拟机（Virtual Box）上安装 OS X。

[http://www.macbreaker.com/2012/07/mountain-lion-virtualbox.html](http://www.macbreaker.com/2012/07/mountain-lion-virtualbox.html)

第4步有问题：

距离结束还有 4 分钟时安装停止

我试图做人们降低反应的建议，但没有任何帮助！

还有其他人遇到过这个问题并以另一种方式解决了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T15:27:07.710

安装 VirtualBox 4.2.6

虚拟盒子 4.2.6

https www.virtualbox.org/wiki/Downloads

设置体系结构 32 位类型 - MacOS X。

64 位 MacOS X 速度慢且在 VM 中存在错误。

获取 ISO、MacOS X Mountain Lion 安装 DVD 10.8.2 Intel：

MacOS X Mountain Lion 安装 DVD 10.8.2 英特尔

http rutracker.org/forum/viewtopic.php?t=4152164

创建虚拟硬盘固定大小 40Gb+、VDI(VirtualBox) 或 VDMK(Vmware WS) 类型。

在 VirtualBox 中安装 MacOS 3-4 小时。

MultiBeast - 山狮 5.2.1

tonymacx86 下载 MultiBeast - Mountain Lion 5.2.1

http www.tonymacx86.com/downloads.php?do=file&id=155

82 页截屏 Pdf 和 Docx。

截屏手册 在 VirtualBox 中安装 MacOS 10.8.2 Intel

https skydrive.live.com/?cid=4CD1B952A2640E72&id=4CD1B952A2640E72!233#

如果需要可以添加 Screencast 手册 Install MacOS on Vmware WS。

# jquery - 在 JQuery 中重置按钮状态

> ID：13950658
> 
> 赞同：3
> 
> 时间：2012-12-19T10:49:42.337
> 
> 标签：jquery, jquery-ui, jquery-mobile

我正在创建一个 Phonegap & JQuery 移动应用程序。我有一些按钮，在应用程序中导航时，如果您返回菜单屏幕，您会看到它们仍处于选中状态（处于活动状态）或处于悬停状态。

用户返回菜单屏幕后是否可以重置状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T10:51:34.030

是的，你可以，你需要删除它的 ui-btn-active 类。

例子：

```
$("#button").removeClass("ui-btn-active"); 
```

在 pagebeforeshow 事件中执行此操作：

```
$('#page').live('pagebeforeshow',function(e,data){    
    $("#button").removeClass("ui-btn-active");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T06:20:20.883

改进：可以动态设置并因此获取 jQM 中的活动按钮类（受此[答案](https://stackoverflow.com/a/11413195/241244)的启发），这意味着如果您或其他人决定更改它，这将起作用。

```
$(document).delegate("#page-id", "pagebeforeshow", function(){
    var activeClass = $.mobile.activeBtnClass;
    $(this).find("."+activeClass).removeClass(activeClass);
}); 
```

# asp.net-mvc - JS重定向后TempData为空

> ID：13950660
> 
> 赞同：2
> 
> 时间：2012-12-19T10:49:48.100
> 
> 标签：asp.net-mvc

我试图在我的 CheckOutController 中保存到 TempData，然后重定向到另一个视图（OrderCompleted），但是重定向后的 TempData 是空的。重定向是使用 JS 代码进行的。

提交表单后，我正在使用以下代码验证详细信息，然后重定向到“OrderCompleted”。

```
 $('#paymentDetails > form').submit(function (e) {
        e.preventDefault(); 
        /* I am validating some details here... */

            window.location.replace("/OrderCompleted/");
        });
    }); 
```

我知道使用 JS 重定向时没有通过 TempData，这是正确的吗？

传输数据的最佳方式是什么？这只是一个小字符串。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:52:00.260

您可以将此“小字符串”作为查询字符串参数传递。

# c# - 锁定记录和解锁

> ID：13950662
> 
> 赞同：1
> 
> 时间：2012-12-19T10:49:59.963
> 
> 标签：c#, sql-server, database, locking

我是这个 Web 应用程序开发的新手，我有任务要做。这可能是某种服务（可能是 WCF，至少这是我的想法），它将负责锁定和解锁 db.xml 中的记录。我正在寻找可以做到这一点的某种最佳实践和/或工具。我所说的工具是指开源解决方案或类似的东西。案例是当用户ie关闭浏览器时该怎么办，或者一个正在编辑记录而另一个也正在编辑记录，在这种情况下我们应该做什么。我希望这是可以理解的我想要完成的。据我所知，锁的问题在于它们是无状态的，所以这是某种问题，但我不知道是哪种问题 :) 提前感谢您的帮助和时间 :)

附言。我试图在 Stack 中搜索这个 ..但我得到的只是 c# 中的 lock 关键字，而在 google 中有灵魂，但不是我想要的。也许我输入了错误的关键字...我不知道

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:56:46.937

> 我正在寻找某种最佳实践

不要这样做。**不要编写显式锁定和解锁数据库中数据的应用程序**。绝对有 0（零）个有效场景。

我建议您阅读有关[乐观并发控制](http://en.wikipedia.org/wiki/Optimistic_concurrency_control)的内容。

另请阅读[Entity Framework Optimistic Concurrency Patterns](http://msdn.microsoft.com/en-us/data/jj592904.aspx) and [Anti-Pattern #3: Mishandled Concurrency](http://msdn.microsoft.com/en-us/magazine/dd882522.aspx#id0420025)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T14:04:53.380

总的来说，锁定数据库中的记录是一件非常危险的事情——尤其是通过与实际数据操作过程无关的服务。如果其他程序遇到该锁定记录并想要写入它，他们往往不得不处理奇异的同步问题——他们会等待吗？他们是否放弃了他们想要编写的更改？

在大多数数据库引擎中，被锁定的进程只是等待——在不知不觉中，您可能有数十或数百个挂起的数据库任务，都在等待锁定被释放。

正如 Remus Rusanu 所写，您应该阅读乐观并发控制——这是事务性 Web 应用程序的最佳实践。它由 MS Entity Framework 支持（假设您的应用程序是使用 .Net 构建的）；代码示例[在这里](https://stackoverflow.com/questions/2775450/asp-net-mvc-concurrency-with-rowversion-in-edit-action/2775887#2775887)。

# javascript - 随机间隔向上计数器

> ID：13950664
> 
> 赞同：1
> 
> 时间：2012-12-19T10:50:05.877
> 
> 标签：javascript, jquery

我目前正在使用 jQuery 插件向上计数。但是，我希望这更加随机，模拟下载次数。目前，计数器每 1 秒向上计数一次，但我希望它在每次滴答时更加随机。（范围从 1 秒到 4 秒）

我目前正在使用：[countdown](http://code.google.com/p/jquery-countdown/)和[counter](http://blog.sophilabs.com/2012/08/jquery-counter-plugin/)。

关于如何做到这一点的任何建议？我的代码如下所示：

```
<script>
    $('#custom').addClass('counter-analog').counter({
        initial: '5.351.487.124',
        direction: 'up',
        interval: '2000',
        format: '9.999.999.999',
        stop: '9999999999',
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:54:26.400

试试这个：

```
$('#custom').addClass('counter-analog').counter({
    initial: '5.351.487.124',
    direction: 'up',
    interval: (Math.random()*3+1) * 1000,
    format: '9.999.999.999',
    stop: '9999999999',
}); 
```

`(Math.random()*3+1) * 1000``1`在和之间生成一个随机数`4`，然后将其与 相乘`1000`，以获得以秒为单位的（随机）延迟。

* * *

**但是**，这只会在声明时设置随机间隔，正如 Andy 在评论中提到的那样。

看起来计数器没有`tick`事件，所以如果你真的想使用那个计数器，你可能必须编辑插件的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:55:14.437

这是我对一个简单的随机计数器的看法：

[http://jsfiddle.net/jRqAy/](http://jsfiddle.net/jRqAy/)

```
var count = 55555;
function tick(){
    count += Math.round(Math.random()*5);
    $('span').text(count);
    setTimeout(tick,Math.round(1000+Math.random()*2000));
}
tick();
​ 
```

# c# - 在 C#/Silverlight 中从 COM 对象访问函数

> ID：13950666
> 
> 赞同：0
> 
> 时间：2012-12-19T10:50:14.560
> 
> 标签：c#, silverlight, com, pinvoke

试图在我的 C# 应用程序中使用一些 COM 对象。

第一种变体：

```
using AXVLC;

Type t = Type.
           GetTypeFromCLSID(
           Guid.Parse("E23FE9C6-778E-49D4-B537-38FCDE4887D8")
           );

AXVLC.VLCPluginClass vid = Activator.CreateInstance(t) as VLCPluginClass; 
```

但出现此类错误： ***无法嵌入互操作类型“AXVLC.VLCPluginClass”。请改用适用的接口。ComObjectCalls***

我知道 COM 对象不公开公共构造函数，那么我将不得不找到使用该对象的其他方法。很多时候 COM 对象使用工厂模型来创建对象的实例（例如 IClass instance = COMClass.CreateInstance(); ）

或尝试使用***Activator.CreateInstance()***

另外我对 COM 对象还有另一个问题： - 我使用的是动态类型：***动态 shell = AutomationFactory.CreateObject("WMPlayer.OCX.7");***

它创建 - 好的。但是如何知道，我可以在其中使用哪些方法。我该如何施放它？

主要问题是：我想用 Silverlight 应用程序访问 COM 对象。所以有一种方法可以使用动态/expondo 对象或使用 P/Invoke 在 Silverlight 中调用一些本机库，例如：

```
[DllImport("user32.dll", CharSet = CharSet.Auto, EntryPoint = "MessageBox")]
public static extern IntPtr MineMessageBox(int hWnd, string text,
string caption, uint type);

...
MineMessageBox(0, "Hello World", "Platform Invoke Sample", 0); 
```

在 Silverlight 中访问 COM 对象功能的最佳方法是什么，并且还可以在运行时获取有关此 COM 对象的所有信息（获取方法，我可以调用等）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:56:26.087

所有 COM 对象都符合一个接口，这是您的方法的来源。

对于 VLC ActiveX 控件，您可能不会使用`AXVLC.VLCPluginClass`，而是使用`AXVLC.VLCPlugin`. 这类似于 Office 的互操作，使用`Application`而不是`ApplicationClass`.

在您使用的第二个实例中`dynamic`，让您的 IntelliSense 工作的一个 hacky 方法是简单地将 return from`CreateObject`转换为接口。但是，您需要记住在构建之前将其删除，否则强制转换将在运行时失败。

另一种方法（也是更好的方法）是简单地处理该 COM 对象的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T23:05:44.543

使用`AutomationFactory`类和`dynamic`关键字（.net 4.0 / sl 4.0 最低）。

# installation - 为什么我在卸载过程中不能使用 ShellExecAsOriginalUser？

> ID：13950668
> 
> 赞同：1
> 
> 时间：2012-12-19T10:50:17.507
> 
> 标签：installation, inno-setup, uac

我有一个 Inno Setup 安装程序，需要重新启动资源管理器（以便安装 shell 扩展）。在安装过程中，我可以启动 explorer.exe，[`ShellExecAsOriginalUser`](http://www.jrsoftware.org/ishelp/index.php?topic=isxfunc_execasoriginaluser)这样它就不会以管理员权限启动；这在 Windows 8 上很重要，因为以管理员权限运行资源管理器会阻止 Metro 应用程序运行。

问题是在卸载过程中无法调用此函数，如文档中所述（无论如何我都尝试这样做，但当然它失败了）。我不明白为什么这是不可能的。有什么线索吗？有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:32:42.560

在卸载期间无法调用它，因为“程序和功能”控制面板始终以提升的权限启动卸载程序（无论如何在运行每台机器的卸载程序时）；因此，“原始用户”仍然是管理员用户。

在这种情况下，可能正确的做法是只使用最新版本的 Inno——这包括[重新启动管理器功能](http://www.jrsoftware.org/ishelp/topic_setup_closeapplications.htm)，它应该自动对资源管理器进行排序，而无需您做任何事情。

# python - 如何从更大的稀疏矩阵中的块总和有效地制作新矩阵

> ID：13950670
> 
> 赞同：3
> 
> 时间：2012-12-19T10:50:19.147
> 
> 标签：python, matrix, scipy, sparse-matrix

我有一个大的 scipy 稀疏对称矩阵，我需要通过获取块的总和来压缩它以生成一个新的更小的矩阵。

例如，对于一个 4x4 稀疏矩阵，AI 想要创建一个 2x2 矩阵 B，其中 B[i,j] = sum(A[i:i+2,j:j+2])。

目前，我只是逐块重新创建压缩矩阵，但这很慢。关于如何优化它的任何想法？

**更新：**这是一个运行良好的示例代码，但对于我想压缩为 10.000x10.000 的 50.000x50.000 的稀疏矩阵来说很慢：

```
>>> A = (rand(4,4)<0.3)*rand(4,4)
>>> A = scipy.sparse.lil_matrix(A + A.T) # make the matrix symmetric

>>> B = scipy.sparse.lil_matrix((2,2))
>>> for i in range(B.shape[0]):
...     for j in range(B.shape[0]):
...         B[i,j] = A[i:i+2,j:j+2].sum() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:47:21.570

*给定一个大小为N*的方阵和一个拆分大小为*d*（因此矩阵将被划分为*N/d* * *N/d个大小为**d*的子矩阵），您能否使用`numpy.split`几次来构建这些子矩阵的集合，将它们每个相加，然后将它们重新组合在一起？

这应该更多地被视为伪代码而不是有效的实现，但它表达了我的想法：

```
 def chunk(matrix, size):
        row_wise = []
        for hchunk in np.split(matrix, size):
            row_wise.append(np.split(hchunk, size, 1))
        return row_wise

    def sum_chunks(chunks):
        sum_rows = []
        for row in chunks:
            sum_rows.append([np.sum(col) for col in row])
        return np.array(sum_rows) 
```

或更紧凑地为

```
 def sum_in_place(matrix, size):
        return np.array([[np.sum(vchunk) for vchunk in np.split(hchunk, size, 1)]
                         for hchunk in np.split(matrix, size)]) 
```

这为您提供了以下内容：

```
 In [16]: a
    Out[16]: 
    array([[ 0,  1,  2,  3],
           [ 4,  5,  6,  7],
           [ 8,  9, 10, 11],
           [12, 13, 14, 15]])

    In [17]: chunk.sum_in_place(a, 2)
    Out[17]: 
    array([[10, 18],
           [42, 50]]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:49:02.640

首先，`lil`你总结的矩阵可能真的很糟糕，我会尝试`COO`或者也许`CSR/CSS`（我不知道哪个会更好，但`lil`对于许多这些操作来说可能天生就比较慢，甚至切片可能很多较慢，虽然我没有测试）。（除非您知道例如`dia`非常适合）

基于`COO`我可以想象做一些欺骗。由于`COO`has`row`和`col`arrays 给出了确切的位置：

```
matrix = A.tocoo()

new_row = matrix.row // 5
new_col = matrix.col // 5
bin = (matrix.shape[0] // 5) * new_col + new_row
# Now do a little dance because this is sparse,
# and most of the possible bin should not be in new_row/new_col
# also need to group the bins:
unique, bin = np.unique(bin, return_inverse=True)
sum = np.bincount(bin, weights=matrix.data)
new_col = unique // (matrix.shape[0] // 5)
new_row = unique - new_col * (matrix.shape[0] // 5)

result = scipy.sparse.coo_matrix((sum, (new_row, new_col))) 
```

（我不能保证我没有在某处混淆行和列，这只适用于方阵......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T13:19:48.830

对于 4x4 示例，您可以执行以下操作：

```
In [43]: a = np.arange(16.).reshape((4, 4))
In [44]: a 
Out[44]: 
array([[  0.,   1.,   2.,   3.],
       [  4.,   5.,   6.,   7.],
       [  8.,   9.,  10.,  11.],
       [ 12.,  13.,  14.,  15.]])
In [45]: u = np.array([a[:2, :2], a[:2, 2:], a[2:,:2], a[2:, 2:]])
In [46]: u
Out[46]: 
array([[[  0.,   1.],
        [  4.,   5.]],

       [[  2.,   3.],
        [  6.,   7.]],

       [[  8.,   9.],
        [ 12.,  13.]],

       [[ 10.,  11.],
        [ 14.,  15.]]])

In [47]: u.sum(1).sum(1).reshape(2, 2)
Out[47]: 
array([[ 10.,  18.],
       [ 42.,  50.]]) 
```

使用[itertools](http://docs.python.org/2/library/itertools.html)之类的东西，应该可以自动化和泛化`u`.

# entity-framework - 实体类型 [classname] 不是当前上下文模型的一部分 - 在 AppHarbor

> ID：13950675
> 
> 赞同：0
> 
> 时间：2012-12-19T10:50:27.070
> 
> 标签：entity-framework, appharbor

我在本地和 AppHarbor 上出现错误“实体类型 [classname] 不是当前上下文模型的一部分”。我在本地修复它，推送到 git 并且 AppHarbor 提取了新版本，但我无法转移这个错误。

我尝试删除它遇到问题的类，重新部署它并在 AH 上运行。

然后我重新创建了 db 表，将其带入 EF，重新生成了所有内容：它在本地工作正常，但在 AH 上不行。我完全被难住了。

编辑：刚刚部署到一个全新的 AH 应用程序，错误仍然存​​在。发布到本地文件系统并用 IIS 打开就可以了。嗯……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:28:22.343

啊哈！

我对连接字符串一直很懒惰。一个指向 AppHarbor 数据库，另一个指向本地 SSExpress。

而不是注释掉或删除指向我的本地数据库的连接字符串，我只是通过附加一个_old来重命名它，所以我有

连接 1 到 AH-name="MyAppContext

连接 2 到本地 - name="MyAppContext_old

尽管除了 web.config 之外没有对 MyAppContext_old 的引用，但似乎已探索了此连接并导致了错误。

解决了。万岁。

# delphi - 如何使用 IdHTTP 检查 URL？

> ID：13950676
> 
> 赞同：12
> 
> 时间：2012-12-19T10:50:27.733
> 
> 标签：delphi, delphi-xe2, indy, indy10

如何在 Indy 不抛出各种异常的情况下检查目标 URL 以获取特定响应代码（如 200 OK）。ConnectionTimeout、ConnectionClosedGracefully 等...

例如，如果 URL 不正确或找不到或无法访问其主机。即使我试图忽略它们，Indy 仍然会出现异常。

**所以我的问题是如何正确忽略这些异常。**

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-19T14:33:03.040

## 1\. 如何忽略 TIdHTTP 抛出的所有异常？

要处理所有异常，并且如您所说，*忽略*它们，您可以使用与@Stijn 答案中的代码几乎相同的代码：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  IdHTTP: TIdHTTP;
begin
  IdHTTP := TIdHTTP.Create;
  try
    try
      IdHTTP.Get('http://www.example.com');
    except
      // do just nothing here, if you really want to completely ignore all 
      // exceptions thrown from inside the try..except block execution and
      // if you don't want to indicate somehow, that the exception occured
    end;
  finally
    IdHTTP.Free;
  end;
end; 
```

## 2\. 如何处理 TIdHTTP 抛出的特定异常？

也许有一天你会想以某种方式对类抛出的某些类型的异常[`TIdHTTP`](http://www.indyproject.org/docsite/html/TIdHTTP.html)作出反应，例如只对 HTTP 协议异常作出反应。这就是我将在这里尝试详细说明的内容。

Indy 为不同的场合定义了许多异常类，当某个动作失败时可能会发生这些异常类。以下是您在使用 HTTP 协议时可能感兴趣的异常类列表：

1.  [`EIdException`](http://www.indyproject.org/docsite/html/EIdException.html)- 它是 Indy 库使用的基本异常类。当您想要区分 Indy 引发的异常和应用程序抛出的所有其他异常时，它可能对您很有用。

2.  [`EIdSocketError`](http://www.indyproject.org/docsite/html/EIdSocketError.html)- 从 HTTP 协议抽象的角度来看，它是一个低级异常类，它涵盖了某个套接字操作失败时引发的所有异常。这对于您检测网络级别是否存在问题很有用。

3.  [`EIdConnClosedGracefully`](http://www.indyproject.org/docsite/html/EIdConnClosedGracefully.html)- 此类引发的异常表明，服务器端以通用方式关闭了与客户端的连接。当您需要对这种情况做出反应时，这可能很有用，例如通过重新连接到服务器。

4.  [`EIdHTTPProtocolException`](http://www.indyproject.org/docsite/html/EIdHTTPProtocolException.html)- 当处理某个请求的 HTTP 响应期间发生错误时，此异常类用于抛出异常。当从 HTTP 响应接收到意外的数字 HTTP 响应代码时，通常会发生这种情况。当您想专门处理 HTTP 协议错误时，它会很有用。通过这种异常处理，您可以例如对服务器响应返回的某些 HTTP 状态代码做出反应。

这是显示处理上面列出的异常的代码框架。当然，您不必显示消息，而是做一些更有用的事情。而且，您不需要处理所有这些；哪些例外以及如何处理取决于您：

```
uses
  IdHTTP, IdException, IdStack;

procedure TForm1.Button1Click(Sender: TObject);
var
  IdHTTP: TIdHTTP;
begin
  IdHTTP := TIdHTTP.Create;
  try
    try
      IdHTTP.Get('http://www.example.com');
    except
      // this exception class covers the HTTP protocol errors; you may read the
      // response code using ErrorCode property of the exception object, or the
      // same you can read from the ResponseCode property of the TIdHTTP object
      on E: EIdHTTPProtocolException do
        ShowMessage('Indy raised a protocol error!' + sLineBreak +
          'HTTP status code: ' + IntToStr(E.ErrorCode) + sLineBreak +
          'Error message' + E.Message);
      // this exception class covers the cases when the server side closes the
      // connection with a client in a "peaceful" way
      on E: EIdConnClosedGracefully do
        ShowMessage('Indy reports, that connection was closed gracefully!');
      // this exception class covers all the low level socket exceptions
      on E: EIdSocketError do
        ShowMessage('Indy raised a socket error!' + sLineBreak +
          'Error code: ' + IntToStr(E.LastError) + sLineBreak +
          'Error message' + E.Message);
      // this exception class covers all exceptions thrown by Indy library
      on E: EIdException do
        ShowMessage('Indy raised an exception!' + sLineBreak +
          'Exception class: ' + E.ClassName + sLineBreak +
          'Error message: ' + E.Message);
      // this exception class is a base Delphi exception class and covers here
      // all exceptions different from those listed above
      on E: Exception do
        ShowMessage('A non-Indy related exception has been raised!');
    end;
  finally
    IdHTTP.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T11:49:54.730

一个简单的[try/except](http://docwiki.embarcadero.com/RADStudio/XE3/en/Exceptions)应该可以解决问题：

```
try
  IdHttp1.Get(...);
  Result:=IdHttp1.ResponseCode=200;
except on EIdException do
  Result:=false;
end; 
```

# c# - 在 C# 中，有没有办法将数组转换为堆栈 没有循环？

> ID：13950685
> 
> 赞同：14
> 
> 时间：2012-12-19T10:50:58.490
> 
> 标签：c#, .net, c#-4.0

我有以下代码，它给了我一个`Stack`包含路径的文件夹层次结构：

```
var path = @"C:\Folder1\Folder2\Folder3\Folder4\Folder5\FileName.ext";

// String array with an element for each level
var folders = path.Split('\\');

var stack = new Stack<string>();

foreach(var folder in folders)
    stack.Push(folder);

var filename = stack.Pop(); // 'FileName.ext'
var parent = stack.Pop(); // 'Folder5'
var grandParent = stack.Pop(); // 'Folder4' 
```

只是出于好奇，有没有更优雅的方法可以将`folders`数组转换为`Stack`没有`foreach`循环的 a？类似于（不存在的）以下内容：

```
var folders = path.Split('\\').Reverse().ToStack(); 
```

我期待您的建议！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-19T10:53:15.127

`Stack<T>`有一个接受的[构造函数](http://msdn.microsoft.com/en-us/library/76atxd68.aspx)`IEnumerable<T>`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-19T10:54:15.713

您可以使用

```
var stack = new Stack(folders); 
```

请注意，这仍然执行循环，它只是为您执行。

编辑：您的代码使用 a`Stack`但您的标题询问 a `Stack<T>`。这是非通用版本。下定决心：p

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T10:55:42.080

如果你真的想要一个`ToStack()`方法，你可以创建一个扩展方法：

```
public static class Extensions {
    public static Stack<T> ToStack(this IEnumerable<T> sequence) {
        return new Stack<T>(sequence);
    }
} 
```

或者，正如其他人所指出的，您可以使用[接受`IEnumerable<T>`](http://msdn.microsoft.com/en-us/library/76atxd68.aspx)它的构造函数。
我想这是个人喜好的问题。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2021-07-01T21:48:43.750

只需将其替换`var stack = new Stack<string>();`为`var stack = new Stack<string>(folders);`

# couchbase - Couchbase 多键

> ID：13950689
> 
> 赞同：4
> 
> 时间：2012-12-19T10:51:22.723
> 
> 标签：couchbase

我假设一个简单的问题。我有以下数据。![](../Images/b13bcaaee42e1f3c1e73f98216e41975.png)

我想搜索 ID 为 > 2 但 < 8 且价格 > 30 的所有行

我使用了各种版本的：`startkey=["2", null]`甚至`startkey=["2", "30"]`只是用于测试的东西。

它似乎只在第一行同时运行这两个条件。所以如果我这样做：`startkey=["2", "30"]`那么我会回来：

```
{"id":"3","key":["3","30"],"value":null},
{"id":"4","key":["4","30"],"value":null},
{"id":"5","key":["5","20"],"value":null},
{"id":"6","key":["6","60"],"value":null},
{"id":"8","key":["8","60"],"value":null} 
```

为什么那里有第 5 行？

我开始认为我需要在代码（.net）中处理这个问题并以某种方式进行多次调用......我似乎找不到任何有效的东西......

注意：我试过用`for (i = 0; i < doc.ID.length; i++)`然后使用说一个循环，`doc.ID[i]`但它永远不会返回任何东西......

目前我只有

```
function (doc, meta) {
    emit([doc.ID, doc.Price ],null);
} 
```

本质上，我想在用户拥有 5 个输入键的地方进行搜索。那么我是否需要进行 5 次调用，然后继续从上一个输出中获取数据作为下一个输出的源？？？

我看过的其他参考资料包括：手册

提前致谢，

最诚挚的问候罗宾

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T18:09:39.307

这是一个常见的误解，使用复合数组索引键，它仍然被视为字符串，因此索引键 [2,10] 实际上是“[2,10]”，而索引键 [5,20] 是实际上是“[5,20]”。

所以`startkey=["2", "30"]`显示该`{"id":"5","key":["5","20"],"value":null},`行的原因是因为作为一个字符串它是> startkey。

同样，查询`startkey=[2,10]&endkey=[5,10]`返回

```
{"total_rows":7,"rows":[
  {"id":"2","key":[2,20],"value":null},
  {"id":"3","key":[3,30],"value":null},
  {"id":"4","key":[4,30],"value":null}
  ]
} 
```

因为`startkey="[2,10]"`< **"[2,20]"** && **"[4,30]"** < `"[5,10]"=endkey`，但 "[5,20]" 不在该字符串范围内。

# 使用 startkey 和 endkey 进行范围查询

**startkey** => **endkey**是使用 strcmp() 的 Range 查询，组和组级别基于字符串，其中逗号分隔字符串标记。

一个很好的参考链接（因为 Couchbase 视图的工作方式很像 Apache CouchDB 视图（受它们启发）） [http://wiki.apache.org/couchdb/View_collat ​​ion#Collat​​ion_Specification](http://wiki.apache.org/couchdb/View_collation#Collation_Specification)

# 空间视图/查询

为了达到您想要的结果，您还可以编写一个空间视图来进行多维查询，仅限数字。虽然你一开始可能不会想到

```
function (doc, meta) {
  emit({
    type: "Point",
    coordinates: [doc.ID, doc.Price]
 }, meta.id);
} 
```

查询将是一个边界框查询：

&bbox=2,0,8,30

```
{"total_rows":0,"rows":[
  {"id":"2","bbox":[2,20,2,20],"geometry":{"type":"Point","coordinates":[2,20]},"value":"2"},
  {"id":"3","bbox":[3,30,3,30],"geometry":{"type":"Point","coordinates":[3,30]},"value":"3"},
  {"id":"4","bbox":[4,30,4,30],"geometry":{"type":"Point","coordinates":[4,30]},"value":"4"},
  {"id":"5","bbox":[5,20,5,20],"geometry":{"type":"Point","coordinates":[5,20]},"value":"5"}
]
} 
```

另一个查询：

&bbox=2,30,8,30

```
{"total_rows":0,"rows":[
  {"id":"3","bbox":[3,30,3,30],"geometry":{"type":"Point","coordinates":[3,30]},"value":"3"},
  {"id":"4","bbox":[4,30,4,30],"geometry":{"type":"Point","coordinates":[4,30]},"value":"4"}
 ]
} 
```

# asp.net - UpdatePanel 中的 AsyncFileUpload

> ID：13950690
> 
> 赞同：2
> 
> 时间：2012-12-19T10:51:25.050
> 
> 标签：asp.net, repeater, asyncfileupload, updatepanel

当我单击我的 btnUpload 时，我想使用更新面板来更新我的转发器。当我将 ascynFileUpload 放在 updatePanel 中时，它停止工作，尽管代码隐藏没问题。但是当我将我的 btnUpload 设置为触发器并且只将我的转发器放在更新面板中时，它不会刷新（这很好）但我的代码隐藏停止工作。

```
<div id="addEntry" class="row centered" runat="server">
                <asp:Label ID="lblFeedback" runat="server"></asp:Label>
                <abbr title="Max 20MB">
                    <asp:AsyncFileUpload ID="uploadEntry" runat="server" CompleteBackColor="White" />
                </abbr>
                <div id="uploading">
                </div>
                <asp:TextBox ID="txtEntryDescription" runat="server" TextMode="MultiLine" placeholder="Description upload (optional)"
                    Width="100%" Height="60px"></asp:TextBox><br />
                <asp:Button ID="btnAddEntry" runat="server" Text="Upload" CssClass="btn btn-round"
                    OnClick="btnAddEntry_Click" />
                <hr />
</div>
<div id="competitionRounds" class="row">
                <asp:UpdatePanel ID="updatepnl" runat="server" UpdateMode="Conditional">
                    <ContentTemplate>
                        <asp:Repeater ID="rptEntries" runat="server" DataSourceID="dsEntries">
                            <ItemTemplate>
                                <%# "<div class=\"imgThumb" + Eval("entryWinner") + " draggable\" style=\"background-image:url('uploads/"
                                + Eval("entryImagename") + "');\" data-id=\""
                                + Eval("pk_entryId") + "\"></div>"
                                %>
                            </ItemTemplate>
                        </asp:Repeater>
                    </ContentTemplate>
                    <Triggers>
                        <asp:AsyncPostBackTrigger ControlID="btnAddEntry" EventName="click" />
                    </Triggers>
                </asp:UpdatePanel>
</div> 
```

# javascript - 如何检查左大括号的数量是否等于右大括号的数量？

> ID：13950704
> 
> 赞同：21
> 
> 时间：2012-12-19T10:51:50.770
> 
> 标签：javascript, regex

如何使用正则表达式检查左大括号的数量是否等于右大括号的数量？

这是代码：

```
var expression1 = "count(machineId)+count(toolId)";
var expression2 = "count(machineId)+count(toolId))"; 
```

这些是 2 个表达式，其中在 中`expression1`，开括号的数量等于闭括号`expression2`的数量，在 中，开括号的数量不等于闭括号的数量。我需要一个正则表达式来计算左括号和右括号的数量并给我警报。我也需要检查有效的语法。

```
if(expression1.......){ // here goes the regular expression
    alert("Matched");
}
else{
    alert("Not matched");
} 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-12-19T11:06:45.807

```
var expression1 = "count(machineId)+count(toolId)";
var expression2 = "count(machineId)+count(toolId))";

if (matches(expression1)) {
    alert("Matched"); // Triggered!
}
else {
    alert("Not matched");
}

if (matches(expression2)) {
    alert("Matched");
}
else {
    alert("Not matched"); // Triggered!
}

function matches(str) {
    try {
        new Function(str);
        return true;
    }
    catch (e) {
        return !(e instanceof SyntaxError);
    }
} 
```

这是有效的，因为`new Function()`如果您的代码错误，将导致语法错误。捕获错误意味着您可以安全地处理它并做任何您想做的事情。另一个好处是它不执行代码，它只是解析它。基本上，您将任务用于浏览器的解析器。

它不使用正则表达式，但会检查您的代码是否有效。因此，它会告诉您括号是否匹配。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-19T11:00:30.817

无需正则表达式即可轻松解决任务，只需计算大括号即可。

```
var a = 'count(machineId)+count())toolId)'
var braces = 0;
for (var i=0, len=a.length; i<len; ++i) {
   switch(a[i]) {
       case '(' : 
          ++braces;
          break;
       case ')' : 
           --braces;
           break;
   }
   if (braces < 0) {    
      alert('error');
      break;
   }
}

if (braces)
    alert('error'); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-19T11:31:33.767

如果您的目标是检查表达式是否有效（这也意味着它的仅包含括号的子字符串形成正确的括号序列），那么正则表达式对您没有帮助。

正则表达式只能处理所谓的“[正则语言](http://en.wikipedia.org/wiki/Regular_language)”（尽管 JS 正则表达式可能比它们的理论对应物更强大，但这种能力的代价是更大的复杂性），而正确括号序列的语言不是正则的。

查看这些[幻灯片](http://www.sm.luth.se/csee/courses/smd/163/lecture4.pdf)——它们可以让您了解为什么正则表达式无法识别正确的括号序列。

尽管如此，问题并不难。您应该只维护一个堆栈并从左到右遍历您的字符串。每次遇到开口支架时，您都会将其推入堆栈。当您遇到右括号时，您弹出堆栈的顶部元素并检查其类型是否与您的类型匹配（是的，该算法可以处理多种类型的括号）。最后，您应该检查堆栈是否为空。

如果您不需要处理不同类型的括号（例如，您只有“（”和“）”），您可以只维护一个变量`openBrackets`（本质上它代表堆栈的大小）并且不要让它变成负数.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-19T10:53:32.130

```
if (expression1.match(/\(/g).length === expression2.match(/\)/g).length) {
    // is equal
} 
```

为了使其与不包含大括号的字符串一起使用，您可以使用以下解决方法：

```
((expression1.match(/\(/g) || []).length 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-19T11:00:14.623

如果您只关心**计数**，为什么不尝试这样的事情。

```
if(expression1.split('(').length == expression1.split(')').length) {
  alert('matched');
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-12-19T16:17:11.190

这是另一种方法：

```
function validParenNesting(text) {
    var re = /\([^()]*\)/g; // Match innermost matching pair.
    // Strip out matching pairs from the inside out.
    while (text.match(re))
        text = text.replace(re, '');
    // If there are any parens left then no good
    if (text.match(/[()]/))
        return false;
    // Otherwise all parens part of matching pair.
    return true;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-14T21:14:05.677

> 1.  “我需要使用正则表达式匹配开括号的数量等于闭括号的数量”
>     
>     
> 2.  “我也需要检查有效的语法。”

如果**2**为真，那么**1**也为真。因此，查找您所知道的有效语法的匹配项——在这种情况下：**`{}`**. 执行一个循环，从“堆栈”中删除所有有效匹配，直到没有有效匹配。如果最后剩下的什么都没有，那么这意味着你的论点是 100% 有效的。如果最后剩下的是*什么*——这意味着“剩余”没有通过你的有效性测试，因此是无效的：

```
var foo = function(str) {
    while(str.match(/{}/g))           // loop while matches of "{}" are found
        str = str.replace(/{}/g, ''); // "slices" matches out of the "stack"
    return !str.match(/({|})/g);      // `false` if invalids remain, otherwise `true`
};

foo('{{{}}}'); // true
foo('{{}}}}}}}}}}{}'); // false 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-12-17T05:11:56.480

尝试 ...

```
function matchBraces(s) {
  return s.match(/\(/g).length === s.match(/\)/g).length;
} 
```

...那么，您的警报代码如下...

```
if(matchBraces(expression1)) {
    alert("Matched");
} else {
   alert("Not matched");
} 
```

工作副本：**[jsFiddle](http://jsfiddle.net/rfornal/rwj839mw/)**

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-06-12T10:34:45.320

以下可用于查找括号的数量。但是，它不使用 RegExp 并且使用简单的逻辑。

```
var l = 0;
var r = 0;
//Count the number of brackets.
for(var i=0;i<str.length;i++){
  if(str[i]=="("){
    l++;
  }
  else if(str[i]==")"){
    r++;
  }
}
if(l==r){ //The number of opening and closing brackets are equal.
  doSomething();
} 
```

# android - 使用原生播放器在 Android 应用中播放视频

> ID：13950708
> 
> 赞同：1
> 
> 时间：2012-12-19T10:51:55.313
> 
> 标签：android, android-videoview

我是构建应用程序的新手，我使用 eclipse 进行编译和 phonegab。

不久前，我制作了一个带有视频内容的安卓应用。它在过去确实有效，但现在不再有效。

我是通过直接链接（例如 Play）完成的

当您单击该链接时，Android 使用“本机”播放器。这就是我想要的，但这不再起作用了。

谁能给我一些建议或告诉我为什么它不再起作用？

# c# - 对 varchar 字段的 linq 查询不返回任何结果

> ID：13950709
> 
> 赞同：7
> 
> 时间：2012-12-19T10:51:59.527
> 
> 标签：c#, linq, visual-studio, linqpad

当我在**linqpad**中运行此查询时：

```
Customer.Where(c => (c.CustomerName == "test")) 
```

它返回匹配的记录。

当我尝试在**Visual Studio**中运行相同的查询时，它不会返回任何匹配的记录。这是我正在使用的代码：

```
 List<Customer> customerList = new List<Customer>();

    using (DBEntities db = new DBEntities())
    {
        try
        {
            customerList = db.Customer.Where(c => (c.customerName == "test")).ToList();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }
    }

    return customerList; 
```

谁能明白为什么它在**linqpad**中有效但在**Visual Studio**中无效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:53:56.437

你能这样试试吗

```
customerList = db.Customer.
   Where(c => String.Compare (c.customerName.ToUpper(),"test".ToUpper()) == 0).ToList(); 
```

因为客户名称的区分大小写搜索可能存在问题。

根据您的需要尝试其他变体：[String.Compare 方法](http://msdn.microsoft.com/en-us/library/2se42k1z%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:56:42.333

您的 linqpad 查询使用“c.CustomerName”，而您的 Visual Studio 查询使用“c.customerName”。

或者，您的问题可能是它区分大小写，或者 db.Customer 集为空。

编辑：DeeMac 在他的回复中也提到了这一点

# c# - 发送标志以在 CopyFileEx 启动后取消它

> ID：13950717
> 
> 赞同：0
> 
> 时间：2012-12-19T10:52:12.673
> 
> 标签：c#, pinvoke

我目前正在开发`File.Copy()`用于复制文件的备份软件。

但是`File.Copy()`没有取消的选项，所以经过一番谷歌搜索后我发现`CopyFileEx`确实如此。我查看了[P/Invoke](http://www.pinvoke.net/default.aspx/kernel32.copyfileex)文档，但我无法弄清楚如何在不再次调用整个函数的情况下实际发送标志来取消它。

我可以设置一个`bool`值并引用它，`CopyFileEx`如果我从其他地方更改它会检测到它已经改变吗？

任何帮助或示例表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:54:31.850

是的，请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/aa363852(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363852(v=vs.85).aspx)

> 如果在复制操作期间将此标志设置为 TRUE，则取消操作。否则，复制操作将继续完成。

# django - Django 酥脆形式 __init__

> ID：13950719
> 
> 赞同：2
> 
> 时间：2012-12-19T10:52:15.393
> 
> 标签：django, django-forms, django-crispy-forms

我刚刚开始使用酥脆的表格，我注意到表格的描述方式存在一些不规则之处，以及它在未来会产生什么影响

从 github 中的[示例](https://gist.github.com/1838193)中，布局描述如下

```
class MessageForm(forms.Form):

    [...]

    # Uni-form
    helper = FormHelper()
    helper.form_class = 'form-horizontal'
    helper.layout = Layout(
        Field('text_input', css_class='input-xlarge'),
        Field('textarea', rows="3", css_class='input-xlarge'),
        'radio_buttons',
        Field('checkboxes', style="background: #FAFAFA; padding: 10px;"),
        AppendedText('appended_text', '.00'),
        PrependedText('prepended_text', '<input type="checkbox" checked="checked" value="" id="" name="">', active=True),
        PrependedText('prepended_text_two', '@'),
        'multicolon_select',
        FormActions(
            Submit('save_changes', 'Save changes', css_class="btn-primary"),
            Submit('cancel', 'Cancel'),
        )
    ) 
```

以及他们[文档中的部分](http://django-crispy-forms.readthedocs.org/en/latest/layouts.html)

```
class ExampleForm(forms.Form):
    [...]
    def __init__(self, *args, **kwargs):
        self.helper = FormHelper()
        self.helper.layout = Layout(
            Fieldset(
                'first arg is the legend of the fieldset',
                'like_website',
                'favorite_number',
                'favorite_color',
                'favorite_food',
                'notes'
            ),
            ButtonHolder(
                Submit('submit', 'Submit', css_class='button white')
            )
        )
        super(ExampleForm, self).__init__(*args, **kwargs) 
```

我很困惑看到`def __init__(self, *args, **kwargs):`文档中示例的 line 使用。当您可以使用第一个示例中显示的方法简单地定义表单时，为什么要使用它。它们中的任何一个都会有任何好处/缺点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:51:49.977

在方法中这样做`__init__`允许根据表单内容修改帮助程序（显示/隐藏按钮），直到呈现。

就个人而言，为了保持灵活性并减少助手的过度计算，我将它放在一个属性属性中。

这让我也有自然独立的子表单助手。

在使用静态助手处理单个表单的简单情况下，您的方法非常有用。否则，可能会很危险。

我使用具有给定属性的 mixin，这让我感觉更像是扩展形式的 api：

```
class MyFormMixin
    @property
    def helper(self):
        helper = FormHelper()

        if hasattr(self, "parent_url"):
            back = layout.Button('back', 'Return button text')
            back.field_classes += ' primaryAction'
            helper.add_input(back)

        reset = layout.Reset('reset', 'undo')
        reset.field_classes += ' primaryAction'
        helper.add_input(reset)

        submit = layout.Submit('submit', 'Valider (here in french)')
        submit.field_classes += ' primaryAction'
        helper.add_input(submit)

        helper.form_method = 'POST'
        if hasattr(self, "action_url"):
            helper.form_action = self.action_url

        if hasattr(self, "form_style"):
            helper.form_style = self.form_style

        if hasattr(self, "form_layout"):
            fs=[]
            for name, fields in self.form_layout.iteritems():
                fs.append(layout.Fieldset(name, *fields))
            helper.add_layout(layout.Layout(*fs))
        else:
            helper.add_layout(layout.Layout(layout.Fieldset("",*self.fields.keys())))
        return helper 
```

设置 self.helper的`__init__`方法也可能完成了这项工作。（但有时我使用表单进行简单验证而不进行渲染，因此我将其设置在一个属性中）。

希望这可以帮助

# java - Android OpenGL ES：如何选择 2D 对象？

> ID：13950721
> 
> 赞同：4
> 
> 时间：2012-12-19T10:52:21.430
> 
> 标签：java, android, opengl-es, touch

我一直在 Stack Overflow 中寻找 OpenGL ES 中 2D 选择的介绍。我主要看到有关 3D 的问题。

我正在使用 OpenGL ES 在 Android 4.0.3 上设计一个基于 2D 瓦片的关卡编辑器。在关卡编辑器中，有一个 2D 黄色方形对象放置在屏幕中央。我想要的只是检测对象是否已被用户触摸。

![在此处输入图像描述](../Images/8c951dc09aefa833865afbbeeeda55d8.png)

在关卡编辑器中，没有任何瓷砖重叠。相反，它们并排放置，就像 MS Paint 中位图图像中的两个附近像素一样。我的目的是单独检测关卡编辑器中每个方形对象的触摸事件。

该对象是用一个简单的顶点数组创建的，并使用 GL_TRIANGLES 来绘制 2 个平面直角三角形。没有任何操作，也没有从文件或任何东西加载。我唯一知道的是，如果用户触摸任何一个黄色三角形，那么两个黄色三角形都将被选中。

任何人都可以提供有关我需要如何执行此操作的提示吗？提前致谢。

**编辑：**

这是`draw()`功能：

```
public void draw(GL10 gl) {
    gl.glPushMatrix();
    gl.glTranslatef(-(deltaX - translateX), (deltaY - translateY), 1f);
    gl.glColor4f(1f, 1f, 0f, 1f);
    //TODO: Move ClientState and MatrixStack outside of draw().
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glVertexPointer(2, GL10.GL_FLOAT, 0, vertices);
    gl.glDrawArrays(GL10.GL_TRIANGLES, 0, 6);
    gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glPopMatrix();
} 
```

**编辑2：**

> 我仍然缺少一些信息。你在用相机吗？还是在模型渲染之前推送其他矩阵？例如，如果您使用的是正交相机，您可以像这样轻松地取消投影屏幕坐标 [x_screen, y_screen]（y 类似）：

我没有使用相机，但我可能使用的是正交投影。再说一次，我不知道，因为我只是使用一个通用的 OpenGL 函数。我会推送和弹出矩阵，因为我计划将许多瓷砖（方形 2D 对象）与不同的平移矩阵集成在一起。没有两个图块具有相同的平移矩阵 M。

在 2D 方面，透视投影与正交投影相同吗？我看不出两者之间有任何区别。

这是创建表面时的初始设置（扩展`GLSurfaceView`和实现的类`GLSurfaceView.Renderer`）：

```
public void onSurfaceChanged(GL10 gl, int width, int height) {
    gl.glViewport(0, 0, width, height);
}

public void onSurfaceCreated(GL10 gl, EGLConfig arg1) {
    reset();
}
public void onDrawFrame(GL10 gl) {
    clearScreen(gl);
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glLoadIdentity();
    gl.glOrthof(0f, super.getWidth(), 0f, super.getHeight(), 1, -1);
    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glLoadIdentity();
    canvas.draw(gl);
}

private void clearScreen(GL10 gl) {
    gl.glClearColor(0.5f, 1f, 1f, 1f);
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:34:45.473

基本方法如下：

1.  为每个“可触摸”对象定义一个边界框。这可能只是一个矩形（x、y、宽度、高度）。
2.  当你在世界中更新一个瓦片时，你会更新它的边界框（完全在世界坐标中）。
3.  当用户触摸屏幕时，您必须将屏幕坐标取消投影到世界坐标
4.  检查未投影点是否与任何边界框重叠。

关于上一个项目的一些提示。**[已编辑]**

*   1 和 2。您应该跟踪渲染图块的位置。存储它们的位置和大小。矩形是一种方便的结构。在您的示例中，可以这样计算。当模型改变时，你必须重新计算它。让我们称之为矩形 r：

    > ```
    > r.x = yourTile.position.x -(deltaX - translateX)  
    > r.y = yourTile.position.y -(deltaY - translateY)
    > r.width= yourTile.width  //as there is no model scaling
    > r.height = yourTile.height// 
    > ```

*   3 - 如果您使用的是正交相机，您可以像这样轻松地取消投影屏幕坐标 [x_screen, y_screen]（y 是类似的）：

    > ```
    > x_model = ((x_screen/GL_viewport_width) -0.5 )*camera.WIDTH + Camera.position.x 
    > ```

*   4 - 对于每个矩形检查 [x_model; y_model] 在里面。

**[第二次编辑]**通过更新矩阵的方式，您可以考虑使用位置为surfaceView.width()/2、surfaceView.height()/2 的相机。您将屏幕上的 1 个像素与世界上的 1 个单位匹配，因此您不需要取消投影任何东西。您可以在我的公式中替换该值并获得 x_screen = x_model - （您需要翻转触摸事件的 Y 分量，因为 Y 在 Java 中向下增长，而在 GL 中向上增长）。

最后的话。如果用户触摸点 [x,y] 检查 [x, screenHeight-y]* 是否击中您的一些矩形，您就完成了。做一些调试，记录接触点，看看它们是否符合预期。生成您的矩形并查看它们是否与您在屏幕上看到的相匹配，然后检查一个点是否在矩形内。

我必须告诉你，你不应该将相机设置为屏幕尺寸，因为你的应用在不同的设备上看起来会有很大的不同。这是一个独立的话题，所以我不会再进一步​​，但考虑根据世界单位定义您的模型 - 独立于屏幕尺寸。这太离题了，但我希望你已经很好地了解了你需要知道的内容！

*我告诉你的翻转。PS：坚持使用正交投影（透视会更复杂）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T20:20:27.787

请允许我对您的问题发表第二个答案。这完全是更高级/更哲学的。可能是一个愚蠢，无用的答案，但是，我希望它可以帮助刚接触计算机图形的人将其思想转变为“图形模式”。

您无法真正选择屏幕上的三角形。那个正方形不是2个三角形。那个正方形只是一堆黄色像素。OpenGL 获取一些顶点，连接它们，处理它们并为屏幕上的一些像素着色。在图形管道的一个阶段，甚至几何信息都丢失了，您只有孤立的像素。这类似于打印机在纸上打印的一封信。您通常不会处理来自论文的信息（好吧，也许条形码阅读器会：D）

如果您需要进一步处理您的图纸，您必须对它们进行建模并使用辅助数据结构自行处理它们。这就是为什么我建议您创建一个矩形来模拟您的瓷砖。您创建您想象中的对象“世界”，然后将它们渲染到屏幕上。用户触摸事件不属于同一个世界，因此您必须将屏幕坐标“转换”为您的世界坐标。然后你改变你的世界中的一些东西（可能是用户拖动她的手指，你必须移动一个对象），然后再次告诉 OpenGL 将你的世界渲染到屏幕上。

您应该对模型进行操作，而不是视图。网格更像是一种视图，因此您不应将它们与模型信息混合，将两者分开是一种很好的做法。（请专家指正，我是个图形爱好者）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:36:27.460

你检查[过 LibGDX](http://code.google.com/p/libgdx/)吗？

使用 OpenGL ES 让生活变得更加轻松。

# c++ - 时间：2019-04-10 标签：c++stlpriorityqueueconstructor

> ID：13950722
> 
> 赞同：1
> 
> 时间：2012-12-19T10:52:28.913
> 
> 标签：c++, stl, priority-queue

我编写了以下代码来接收许多输入，然后按特定顺序输出它们。

```
#DEFINE cases 100     

struct job
{
int w;
};

class compjob
{
public:
       bool operator()( job j1,job j2)
       {
       if(j2.w>j1.w)
       return true;

       return false;
       }
};

int main()
{
priority_queue< job, vector<job>, compjob > jobs;

int weight;

for(int i=1;i<=cases;i++)
{
cin>>weight;
job job1;
job1.w=weight;

jobs.push(job1);
} //for loop ends here

for(int i=1;i<=cases;i++)
{
job job1= jobs.pop(); ////////////ERROR!!!!!/////////
cout<<job1.w<<endl;
}

return 0;;
} 
```

但是当我编译代码时，上面标记的行显示编译错误：

```
Invalid conversion from 'void' to non scalar 'job'. 
```

我认为我没有正确声明作业 priority_queue。另外，请说明声明中第二个参数的意义（即vector，我不太清楚它的用途）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T10:55:30.430

[pop](http://www.cplusplus.com/reference/queue/priority_queue/pop/)不返回任何内容，先使用[top](http://www.cplusplus.com/reference/queue/priority_queue/top/)获取元素，然后将其弹出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:00:22.640

我建议您在每次使用库时查看帮助页面[C++ 参考：priority_queue 。](http://www.cplusplus.com/reference/queue/priority_queue/top/)

有些人可能会说 cpluplus 包含一些错误，所以你可以试试[这个](http://en.cppreference.com/w/cpp/container/priority_queue)作为替代方案。

# android - ImageView 不会将图像重新缩放到选定的大小

> ID：13950728
> 
> 赞同：0
> 
> 时间：2012-12-19T10:52:51.677
> 
> 标签：android, layout, resize, imageview, layoutparams

我正在使用具有固定大小的 ImageView 来向菜单添加图标。在我的应用程序中，我多次使用它，但在这个 ImageView 上，布局参数似乎不起作用。与其他 ImageView 不同，在这种情况下，我直接使用模板，但我认为这不是问题。

```
<?xml version="1.0" encoding="utf-8"?>
<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="1dp"
    android:layout_height="1dp"
    android:scaleType="fitCenter"
    android:src="@drawable/ic_menu_moreoverflow_normal_holo_dark"
    android:contentDescription="ICON" /> 
```

它在代码中的使用如下。

```
ImageView iview =(ImageView) View.inflate(context, R.layout.icon, null); 
```

从理论上讲，它应该会自动调整图像的大小，但是，图像会继续使用原始大小，尽管大小为`1dp`. 问题出在哪里？非常感谢！

![在此处输入图像描述](../Images/90fac5e56d22aca98c7224787681adcc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T17:21:23.857

将资源的 ImageView 分配从 src 更改为 background。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:24:29.177

```
android:scaleType="fitCenter" 
```

你应该删除它。

# httpwebrequest - 在 C# 中获取和发布请求

> ID：13950736
> 
> 赞同：0
> 
> 时间：2012-12-19T10:53:23.703
> 
> 标签：httpwebrequest, httpwebresponse

我正在从我的代码中使用 cookie 容器中的正确 cookie 和正确的发布数据（正如我在 IE 开发人员工具中检查过的那样）发出发布请求，但我得到了其他页面的响应字符串。

谁能告诉我可能是什么问题，我浪费了很多时间，所以请给我一个想法，我必须从哪里开始诊断。我在 c# 中使用 HttpWebRequest 和 HttpWebResponse 。

# wpf - 资源的依赖继承

> ID：13950742
> 
> 赞同：0
> 
> 时间：2012-12-19T10:53:32.957
> 
> 标签：wpf, xaml, dependency-properties

我有一个特殊的问题：我有一个标记扩展需要检查附加属性。附加属性被定义为可继承。

这在 XAML 中适用于在 Window/UserControl 下定义的所有元素，但不适用于资源。例如，给定这个 XAML：

```
<Window MyAttachedProp="...">
    <Window.Resources>
        <FlowDocument x:Key="Doc">
            <Paragraph><Run Text="{MyMarkupExtension}" /></Paragraph>
        </FlowDocument>
    </Window.Resources>

    <FlowDocumentScrollViewer Document="{StaticResource Doc}" />
    ...
</Window> 
```

标记扩展失败，因为在调用 ProvideValue() 函数时，附加属性不是从 Window 派生到 FlowDocument 和 Run。

是否有相同的解决方法来完成这项工作？

谢谢，史蒂文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:17:35.190

从[跨树边界继承属性值](http://msdn.microsoft.com/en-us/library/vstudio/ms753197%28v=vs.110%29.aspx#InheritanceContext)：

> 属性继承通过遍历元素树来工作。这棵树通常与逻辑树平行

显然，资源字典不构成元素树，因此不会继承该值。但是，我想当您在 FlowDocument 上设置属性时它应该可以工作，因为这是元素树的根：

```
<Window.Resources>
    <FlowDocument x:Key="Doc" MyAttachedProp="...">
        <Paragraph><Run Text="{MyMarkupExtension}" /></Paragraph>
    </FlowDocument>
</Window.Resources> 
```

# java - 更新 Web 应用程序中的属性文件

> ID：13950743
> 
> 赞同：0
> 
> 时间：2012-12-19T10:53:33.783
> 
> 标签：java, tomcat, web-applications, properties-file

我有一个属性文件（在 rsources 文件夹下），其中存储了一个变量（键=值），

当用户插入新值或更新旧值时，我需要更新它，我可以这样做吗？我有疑问，因为它是一个 Web 应用程序，所以它只是部署在服务器中的战争。那么如何访问 .properties 文件并直接从代码中更改它呢？

如果不可能，是否有其他解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T10:55:32.270

也许用户可以在文件系统中提供一个覆盖属性文件，其值将覆盖打包的默认属性文件。

查看[允许此功能](http://commons.apache.org/configuration/userguide/overview.html#Mixing_Configuration_Sources)的[Apache Commons Configuration](http://commons.apache.org/configuration/)。

> 通常，您希望提供一组基本配置值，但允许用户轻松地为他们的特定环境覆盖它们。一种方法是将默认值硬编码到您的代码中，然后提供一个覆盖它的属性文件。但是，这是一种非常死板的做事方式。相反，使用 CompositeConfiguration，您可以提供许多不同的方式来设置配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:01:45.357

您可以在数据库中创建一个新表（例如 T_PROPERTIES）并添加/修改表中的行，而不是修改属性文件。定义具有 2 列、键和值的表，并相应地更改记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T15:58:31.130

You can let the user write to a properties file, but I don't think it's very clean to do. There is a class called "Properties" in the java.util package, you can use this class to load a representation of a physical properties file from your webapplication.

for example to load a properties file you could use following code:

```
 public void loadProps(File pfile) throws IOException {
    Properties props = new Properties();
    FileInputStream fis = new FileInputStream(propsFile);
    props.load(fis);    
    fis.close();
} 
```

Now you can just use built in commands to manipulate the file: -setProperty(String key, String value); -get(Object key);

After you're done with it you can just call the save method on the properties Object. You will need an OutputStream for that.

# ruby-on-rails - emacs 中不需要的格式/换行符

> ID：13950746
> 
> 赞同：2
> 
> 时间：2012-12-19T10:53:42.800
> 
> 标签：ruby-on-rails, emacs

我在编辑 Web 模板代码（即混合 php/html 代码或混合 ruby​​/html 代码）时在 Emacs 中遇到问题。Emacs 在不应该的时候会换行。当我在行的某处输入空格时会出现换行符，非常烦人...

如何禁用此行为？

下面是我正在使用的那种代码。如果我在其中一个逗号后输入一个空格，那么 Emacs 会换行，有时会换行。

```
<% if @item.id %>
 <b>Congratulations!The item was saved!
 <%= button_to 'Preview the ad',@item,:method=>:get,:class => "btn add" %>
<% end %> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T11:27:31.823

看起来由于某种原因`auto-fill-mode`处于活动状态（您可以通过在模式行中查找“填充”来检查）。如果是这种情况，您应该将其关闭：

`M-x``auto-fill-mode``RET`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T16:25:28.887

要保存此过程以进行进一步的会话，您可以放入 .emacs （在它加载特定于模式的内容之后）：

`(auto-fill-mode nil)`

另一件事是您可以接受此功能。限制您希望在屏幕上显示的代码量通常是件好事。

使用 Mx `set-fill-column`RET 设置自动换行前允许的字符数。

# windows - 禁用触摸屏拖动

> ID：13950747
> 
> 赞同：2
> 
> 时间：2012-12-19T10:53:43.300
> 
> 标签：windows

嗨，不是程序员，但正在寻求建议。这是关于触摸屏如何与窗口交互的。在许多随触摸屏提供的触摸驱动程序中，它们具有设置某些类型的鼠标模式的能力。例如点击触摸、点击释放以及正常的点击和拖动。我想知道是否有一种方法（可能是注册表修改）可以将通常提供的“单击并拖动”（在桌面上绘制蓝色框的位）的 Windows 功能变成点击触摸忽略任何 mouse_move 。这意味着我可以单击按钮但不能拖动光标。欢迎任何选择。凯夫

# c++ - 如何在 Linux 上使用 QProcessEnvironment 设置代理地址？

> ID：13950755
> 
> 赞同：1
> 
> 时间：2012-12-19T10:54:15.793
> 
> 标签：c++, linux, qt, qt4

我在 Qt 中遇到了一个简单的问题。我想使用 Qt 设置代理地址。设置代理地址的命令

```
 export http_proxy=http://wwgw.abcd.com:8080 
```

如果手动通过终端，则可以正常工作。但是如果使用 QProcess 运行相同的命令，它会在没有设置代理的情况下失败。甚至，我尝试使用 QProcessEnvironment 作为

```
QProcess process_setupProxyServerUrl;
QProcessEnvironment env = QProcessEnvironment::systemEnvironment();

QString cmd = "http://wwgw.abcd.com:8080";

env.insert("HTTP_PROXY", cmd);
process_setupProxyServerUrl.setProcessEnvironment(env); 
```

但这也无法设置代理地址。QProcessEnvironment 对我来说是新的。所以我可能以错误的方式使用它。

在我的应用程序中，我需要根据用户的选择（在运行时）更改代理地址。

使用 Qt 的任何方式都会有所帮助。请提供一些建议/想法来解决此问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T11:02:57.243

尝试类似的东西

```
QProcess process_setupProxyServerUrl;
QProcessEnvironment env = QProcessEnvironment::systemEnvironment();
env.insert("HTTP_PROXY", "http://wwgw.abcd.com:8080");
process_setupProxyServerUrl.setProcessEnvironment(env); 
```

你为什么使用 export ？这只是一个可执行文件，而不是环境密钥

# sql - Postgis ST_Contains 多边形一张表

> ID：13950756
> 
> 赞同：1
> 
> 时间：2012-12-19T10:54:23.237
> 
> 标签：sql, polygon, postgis

我有一个带有多边形的 postgis 空间表，有一个 id ( `gid`) 和一个名为的几何列`way`（它实际上存储了多边形边界）。表头如下所示：

```
|| gid (integer) | way (geometry) || 
```

此表中的每一列都代表一个多边形。现在我想从这个表中取出两个特定的多边形（通过 gid 选择它们）并`ST_Contains()`用来测试一个是否被另一个包含。

什么是 SQL 语法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T12:25:45.360

尝试以下操作：

```
SELECT st_contains(a.way, b.way)
FROM yourtable AS a, yourtable AS b
WHERE 
    a.gid = yourfirstid
    AND b.gid = yoursecondid 
```

这就是你想知道的，还是我误解了这个问题？

# coffeescript - 在 CoffeeScript 中优雅地做对象属性的总和

> ID：13950759
> 
> 赞同：16
> 
> 时间：2012-12-19T10:54:29.870
> 
> 标签：coffeescript

我有一系列这样的项目：

```
@items = [
  {price: 12, quantity:1}, 
  {price: 4, quantity:1}, 
  {price: 8, quantity:1}
] 
```

我正在寻找这样的东西：

```
sumPrice: ->
  @items.sum (item) -> item.price * item.quantity 
```

或者任何尽可能接近这个的东西，这使得每个阅读代码的人都可以非常容易地理解发生了什么。

**到目前为止，我想出了：**

```
sumPrice: ->
   (items.map (a) -> a.price * a.quantity).reduce (a, b) -> a + b 
```

*   包含太多的功能魔法
*   失去描述性

和：

```
sumPrice: ->
   sum = 0
   for item in items
     sum += item.price * item.quantity
   sum 
```

*   新手 JS/Coffee 程序员可以理解
*   感觉有点傻

我喜欢 CoffeeScript，所以我希望有一个更好的解决方案来解决我想念的类似场景。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-19T12:19:35.620

功能风格还不错。CoffeeScript 允许您像这样美化您的代码：

```
items
  .map (item) ->
    item.price * item.quantity
  .reduce (x,y) ->
    x+y 
```

这段代码比你的单行代码更容易理解。

如果你不喜欢`map`你可以用它`for`来代替。像这样：

```
(for item in items
  item.price * item.quantity)
  .reduce (x,y)->x+y 
```

或者像这样：

```
prods = for item in items
  item.price * item.quantity
prods.reduce (x,y)->x+y 
```

或者您可以为数组添加自己的`sum()`方法：

```
Array::sum = -> @reduce (x,y)->x+y
(item.price * item.quantity for item in items).sum() 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-19T15:14:53.850

如果你想表达解决方案，`@items.sum (item) -> item.price * item.quantity`你可以添加一个`sum`方法`Array`：

```
Array::sum = (fn = (x) -> x) ->
  @reduce ((a, b) -> a + fn b), 0

sum = @items.sum (item) -> item.price * item.quantity 
```

请注意，我`0`作为初始值传递，[`reduce`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce)因此`fn`为每个数组值调用回调。

* * *

如果您不喜欢扩展内置对象，我想如果您在其自己的函数中提取计算单个数组项的总价格的逻辑，我想您可以优雅地将总和表示为单个 reduce：

```
itemPrice = (item) -> item.price * item.quantity

sum = items.reduce ((total, item) -> total + itemPrice item), 0 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-19T11:14:56.227

您可以使用解构来稍微简化代码：

```
sumPrice: ->
    sum = 0
    sum += price * quantity for {price, quantity} in @items
    sum 
```

我认为没有任何方法可以摆脱`sum`. 虽然 Coffeescript 的`for`循环语法往往有助于简化原本会使用 的代码`map()`，但它并没有任何类似的东西可以简化`reduce()`-type 操作，这就是`sumPrice`这里所做的。

正如评论中提到的，这个解决方案比调用`reduce()`or的一个优点`sum()`是它避免了创建和重复调用函数的开销。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-19T11:50:37.937

```
sum = 0
value = (item) ->
  item.price * item.quantity
sum += value(item) for item in @items 
```

# iphone - Cocoa 错误：516 在制作 SQLite 数据库的可写副本时

> ID：13950762
> 
> 赞同：1
> 
> 时间：2012-12-19T10:54:41.533
> 
> 标签：iphone, objective-c, ios, sqlite, ios5

我正在做一个小型数据库驱动的应用程序。我在 xcode的*Supporting Files*下有我的 SQLite db 文件。起初，当它在主包中时，我试图向它写入数据，但不能。搜索后，我遇到了[这个](https://stackoverflow.com/a/3458530/1077789)答案，我将代码更改为以下内容。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

        BOOL success;
        NSFileManager *filemngr = [[NSFileManager alloc] init];
        NSError *error;
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES);
        NSString *documentDirectory = [paths objectAtIndex:0];
        NSString *writableDbPath = [documentDirectory stringByAppendingPathComponent:@"contacts.sqlite"];
        success = [filemngr fileExistsAtPath:writableDbPath];
        if(!success)
        {
            [status setText:@"Error occurred!"];
        }

        NSString *defaultDbPath = [[[NSBundle mainBundle] resourcePath]stringByAppendingPathComponent:@"contacts.sqlite"];
        success = [filemngr copyItemAtPath:defaultDbPath toPath:writableDbPath error:&error];
        if (!success)
        {
            [status setText:[error localizedDescription]];
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error!"
                                                            message:[error localizedDescription]
                                                           delegate:nil
                                                  cancelButtonTitle:@"OK"
                                                  otherButtonTitles:nil];
            [alert show];
        }
    } 
```

当我尝试将文件复制到可写位置（显示 UIAlertView 的位置）时，我在最后的 if 块中收到以下错误。

**操作无法完成。（可可错误 516）**

谁能告诉我如何纠正这个错误？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T10:58:45.273

如果尚未将文件复制到那里，您希望将文件复制到文档目录。在您的代码中，如果文件已经存在，那么您也尝试将其复制到文档目录。这将导致执行第二个`if(!success)`块。改变你的方法，如：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

        BOOL success;
        NSFileManager *filemngr = [[NSFileManager alloc] init];
        NSError *error;
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES);
        NSString *documentDirectory = [paths objectAtIndex:0];
        NSString *writableDbPath = [documentDirectory stringByAppendingPathComponent:@"contacts.sqlite"];
        success = [filemngr fileExistsAtPath:writableDbPath];
        if(!success)
        {
            NSString *defaultDbPath = [[[NSBundle mainBundle] resourcePath]stringByAppendingPathComponent:@"contacts.sqlite"];
        success = [filemngr copyItemAtPath:defaultDbPath toPath:writableDbPath error:&error];
          if (!success)
          {
            [status setText:[error localizedDescription]];
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error!"
                                                            message:[error localizedDescription]
                                                           delegate:nil
                                                  cancelButtonTitle:@"OK"
                                                  otherButtonTitles:nil];
            [alert show];
          }
        }
    } 
```

# linux - Linux Web 服务器字符编码不匹配的下载链接

> ID：13950764
> 
> 赞同：1
> 
> 时间：2012-12-19T10:54:47.573
> 
> 标签：linux, web, character-encoding

我有一个运行 Ubuntu 的网络服务器，网页上有一些链接指向服务器上的可下载文件。问题是由于字符编码，我有 404（未找到）。

在网站上的下载链接包含：`Luís`但服务器上的文件名显示为`Luï¿½s`当我这样做时`ls`。

没有这种字符的文件链接不会显示任何问题，但如果我有“特殊”字符，则会发生 404。

有想法该怎么解决这个吗？

**更新**：当我运行语言环境时，我得到：

```
LANG=en_US.UTF-8
LANGUAGE=en_US:en
LC_CTYPE=en_US.UTF-8
LC_NUMERIC="en_US.UTF-8"
LC_TIME="en_US.UTF-8"
LC_COLLATE="en_US.UTF-8"
LC_MONETARY="en_US.UTF-8"
LC_MESSAGES="en_US.UTF-8"
LC_PAPER="en_US.UTF-8"
LC_NAME="en_US.UTF-8"
LC_ADDRESS="en_US.UTF-8"
LC_TELEPHONE="en_US.UTF-8"
LC_MEASUREMENT="en_US.UTF-8"
LC_IDENTIFICATION="en_US.UTF-8"
LC_ALL= 
```

不是吗？我的意思是它使用的是utf8，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:35:37.087

您在 Web 服务器上使用哪种语言环境？如果您的服务器语言环境和 HTML 编码页面相同，那就太好了。

我的意思是，您应该使用 UTF-8 作为服务器语言环境，使用 UTF-8 作为网页上的代码页。

如果您在 UTF-8 代码页中有 HTML 链接，但您的服务器具有例如 locale latin-1，您将遇到类似的问题。

因此，您需要检查服务器的语言环境，并且**ls**应该会显示与您在 HTML 链接中使用的文件名完全相同的文件名。

**更新**

如何在 Linux 上检查语言环境：只需 exec **locale**

如何检查 Apache 的默认编码页面（如果您使用 Apache 作为 Web 服务器）- 转到 httpd.conf 并检查如下内容：**AddDefaultCharset utf-8**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T14:29:30.377

链接应为`Lu%C3%ADs`( `Luís`)。不幸的是，您服务器上的文件名实际上是`Lu%EF%BF%BDs`( `Lu�s`)，这意味着它甚至从未正确创建。如果它是以编程方式创建的，则意味着程序在解码文件名时假定了错误的 UTF 编码。

如果您看到`Luï¿½s`，`ls`那么您的控制台肯定不是 UTF-8，它会显示`Lu�s`它是否是。但这只会表明文件名一开始就搞砸了，您需要修复创建这些文件的代码。

到目前为止，您应该能够下载带有链接的文件`Lu%EF%BF%BDs`，但这不是一个真正的解决方案，因为由错误代码创建的文件名中的任何非 ASCII 字符都将`%EF%BF%BD`位于 URL 中。

这就是我能从你的问题中说的全部内容。

# django - 如何在基于单个类的视图中装饰不同的 http 方法

> ID：13950767
> 
> 赞同：7
> 
> 时间：2012-12-19T10:54:58.977
> 
> 标签：django, django-class-based-views

例如，我有一个基于类的视图，它允许 GET 和 POST 方法，如下所示，

```
class ViewOne(View):
    def post(self, request, *args, **kwargs):
        ...
    def get(self, request, *args, **kwargs):
        ...
    @method_decorator(login_required)
    def dispatch(self, *args, **kwargs):
        return super(ViewOne, self).dispatch(*args, **kwargs) 
```

现在，GET 和 POST 都是 login_required。但是如果我只希望 POST 是 login_required 怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T13:03:36.460

嗯...它不起作用吗？

```
class ViewOne(View):
    @method_decorator(login_required)
    def post(self, request, *args, **kwargs):
        ...
    def get(self, request, *args, **kwargs):
        ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T13:14:37.317

为什么不创建两个类，也使用[django-braces](http://django-braces.readthedocs.org/en/latest/index.html) ;)

```
class ViewOne(View):
    def get(self, request, *args, **kwargs):
    ...

class ViewTwo(LoginRequiredMixin, ViewOne):
    def post(self, request, *args, **kwargs):
    ... 
```

# iphone - 如何通过触摸使 UIImageView 转到其他 ViewController？

> ID：13950768
> 
> 赞同：6
> 
> 时间：2012-12-19T10:55:05.377
> 
> 标签：iphone, objective-c, ios, storyboard

我有一个`StoryBoard`和一个基础`ViewController`包括一些图像。

我如何触摸它们的图像以转到其他通过模态`ViewController`链接的图像`UIImageView`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:14:02.117

创建新`viewController` 的将点击手势识别器拖动到第一个`viewController`

`right click + drag`从手势识别器到新的`viewController`，你会看到选项`modal`

`right click + drag`从`UIImageView`到`gestureRecognizer`，您将看到`gestureRecognizer`选项选择它，仅此而已

确保`UIImageView`选中“启用用户迭代”选项

[刚刚向我的github](https://github.com/jcesarmobile/ImageTapGestureStoryboard)添加了一个示例项目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:40:17.410

您可以尝试以下方法从一个视图控制器移动到另一个视图控制器：

```
[MyImageView.view removeFromSuperview];
[MyNewViewController.view addSubview:MyImageView.view]; 
```

如果您希望为该更改设置动画，使其飞速发展，您可能需要为 MyImageView.view.frame 创建从旧视图控制器到新视图控制器的动画。为此，您需要使用类似的方法

```
CGRect fromFrame = [MyImageView.view convertRect:MyImageView.view.frame toView:MyOldViewController] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T11:57:14.613

使用按钮而不是图像怎么样？

[http://www.cocoanetics.com/2010/02/uiimageview-touch-handling-uibutton/](http://www.cocoanetics.com/2010/02/uiimageview-touch-handling-uibutton/)

# java - 使用 Spring AOP + JPA ( EclipseLink )

> ID：13950769
> 
> 赞同：-2
> 
> 时间：2012-12-19T10:55:08.553
> 
> 标签：java, spring, jpa, aop

有没有办法从 Spring AOP 建议中持久化 JPA 实体？每当我尝试这样做时，都会收到错误 java.lang.NoSuchMethodError。我猜这可能是因为我的 persistence.xml 配置在运行时部署了 JPA 基础架构。

弹簧配置：

```
<aop:aspect ref="attachmentCreatorAdvice">
                <aop:pointcut expression="execution(* com.mycomp.core.eventhandlers.*.handle*CreatedEvent(..) )" id="attachmentCreatorPointcut"/>
                <aop:after-returning method="create"
                                    pointcut-ref="attachmentCreatorPointcut" />
</aop:aspect> 
```

AttachmentCreatorAdvice 代码：

```
private AttachmentDao attachmentDao;

public AttachmentDao getAttachmentDao() {
    return attachmentDao;
}

public void setAttachmentDao(AttachmentDao attachmentDao) {
    this.attachmentDao = attachmentDao;
}

public void create(JoinPoint jp) throws SecurityException, NoSuchFieldException, IllegalArgumentException, IllegalAccessException  {

    Event event = (Event) jp.getArgs()[0];

    Field f = event.getClass().getDeclaredField("attachments");

    if (  f != null ) {
        f.setAccessible(true);

        List<Attachment> attachments = (List<Attachment>) f.get(event);
        Field id = event.getClass().getDeclaredField("id");

        if ( id != null) {
            id.setAccessible(true);

            AggregateIdentifier uuid = (AggregateIdentifier) id.get(event);

            for( Attachment attachment : attachments ) {
                AttachmentDto newAttachment = new AttachmentDto();
                newAttachment.setId(UUID.randomUUID().toString());
                newAttachment.setElementId(uuid.asString());
                newAttachment.setDescription(attachment.getDescription());
                newAttachment.setFilename(attachment.getFilename());
                newAttachment.setFilesize(attachment.getFilesize());
                newAttachment.setFiletype(attachment.getFiletype());
                newAttachment.setLink(attachment.getLink());
                newAttachment.setAttachmentBlob(DecodeUtils.fromBase64(attachment.getAttachmentBlob()));

                attachmentDao.save(newAttachment);

            }
        }
    }
} 
```

attachDao 是从 Spring 容器中注入的。AttachmentDto 从 AbstractDto 扩展而来。

```
@MappedSuperclass 
public abstract class AbstractDto<T> implements Serializable {

    @Override
    public boolean equals(Object obj) {
        boolean equals = false;
        if ( obj instanceof AbstractDto ) {
            AbstractDto o = (AbstractDto) obj;
            if ( o.getId().equals( this.id ) ) {
                equals = true;
            }
        } else {
            equals = false;
        }
        return equals;
    }

    @Id
    private T id;

    public T getId() {
        return id;
    }

    public void setId(T id) {
        this.id = id;
    }
} 
```

调用 attachmentDao.save 方法时，出现以下错误：

```
[EL Severe]: ejb: 2012-12-17 16:12:17.579--ServerSession(30266940)--Thread(Thread[main,5,main])--java.lang.NoSuchMethodError com.mycomp.core.data.dto.AbstractDto <init> 
```

希望有帮助。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:56:27.477

完整的异常堆栈跟踪会有所帮助，但该错误似乎与 JPA 编织有关。

这意味着您的 Spring 配置或用法不正确，因为类没有正确编织。可能是您的超类不包含在您的 persistence.xml 类列表中，或者它在 Spring 调用 JPA 编织器之前被加载。

您可以尝试在您的 persistence.xml 中禁用编织（或仅禁用“eclipselink.weaving.internal”="false"），或使用静态编织，或修复您的 Spring 使用。

# php - 如何阻止 android 应用程序显示我的网站？

> ID：13950772
> 
> 赞同：3
> 
> 时间：2012-12-19T10:55:23.923
> 
> 标签：php, javascript, android, .htaccess

我发现某些 android 应用程序显示我的网站，我认为它们与 webview 一起使用，如何阻止所有可以显示我的网站的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:55:02.957

> 如何阻止所有可以显示我的网站的应用程序？

您无法最终确定发送 HTTP 请求的软件是什么，而 Web 浏览器是“应用程序”。因此，要么关闭您的站点，这将“阻止所有可以显示 [您的] 站点的应用程序”，或者不要担心用户选择查看您的站点的“应用程序”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:13:32.487

我认为没有 100% 安全的方式来做到这一点。您可以做的是使用经过服务器验证的密钥将标头属性附加到您的应用浏览器。如果没有这个密钥，结合[移动浏览器检测库](http://wurfl.sourceforge.net/php_index.php)，您将知道应用程序是否被授权。

但是，如果开发人员获得了此密钥，则无法阻止他实施它。检测移动浏览器也不是一门精确的科学。

# android - 如何从 ListView 中获取所有子项（可见和不可见）？

> ID：13950776
> 
> 赞同：6
> 
> 时间：2012-12-19T10:55:31.850
> 
> 标签：android, android-listview, android-view, children

我的问题类似于[ListView getChildAt 返回 null for visible children](https://stackoverflow.com/questions/6766625/listview-getchildat-returning-null-for-visible-children)，但尽管搜索我找不到解决方案。

我有一个`ListView`带卷轴的。有 10 个项目，其中`ListView`7 个可见，3 个被滚动隐藏。我还有一个外部方法（适配器外），它必须从中获取所有子项`ListView`（例如 using `getChildAt()`）。

我需要所有 10 个项目，但最后 3 个是`null`对象。我尝试过如下代码：

```
getListView().smoothScrollToPosition(); 
```

但这不起作用。

我认为我不需要发布我的其余代码，因为描述说明了一切？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T21:03:12.413

正如您已经看到的，您无法从 a 获取所有子行视图，`ListView`因为 a`ListView`仅包含可见行的视图（加上一些回收的行，但您无法访问这些行）。做你想做的事情的正确方法是将任何数据存储在适配器的数据中并从那里检索它。

> 但是 ListView 不会在运行时保留 RadioGroup 的当前值。

我已经看到您对此有一些问题，因此我修改了一些旧代码来构建一个基本示例，您可以[在此处找到](https://gist.github.com/4340357)代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T11:02:53.877

我不认为你需要为 listView 添加滚动视图。滚动在 ListView 上自动工作。在不添加滚动视图的情况下尝试您的应用程序，我相信它会按您的需要工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T11:09:06.857

那些孩子为空的原因是因为他们真的不存在并且他们永远不会存在，如果一次只有7个孩子在屏幕上，系统将只创建7个并通过`convertView`返回给适配器`getView()`方法来重新使用。

如果您想获取有关整个数据集的信息，您应该搜索数据集本身，而不是屏幕上的视图。例如，如果它是一个 ArrayAdapter，则循环该数组；如果是 CursorAdapter，则循环光标；等等

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T11:13:38.550

listView 的不可见子项实际上并不存在。当它们变得可见时，将回收其中一个冗余视图或生成一个新视图。因此，您实际上无法访问所有视图。你为什么想要？无论您想要进行什么更改，都应该对填充视图的数据而不是视图本身进行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-23T10:21:44.097

有几点需要注意： 1\. 列表视图提供了内置的滚动功能，所以不要使用滚动视图。它只会把事情搞砸。2\. 列表视图不包含所有的孩子。当您滚动它时，它只会在运行时创建可见项目。3\. 如果您想完全获取所有子对象，最好保留您的列表所具有的子对象的 ArrayList。您可以根据需要向此 ArrayList 添加或删除子级。

# content-management-system - 胖线中的“searchstate”有什么用

> ID：13950778
> 
> 赞同：0
> 
> 时间：2012-12-19T10:55:40.447
> 
> 标签：content-management-system, fatwire

fatwire中的“ **searchstate ”有什么用？**
我所知道的是它用于从数据库中获取数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:13:16.553

searchstate 用于过滤您从带有资产集标签的数据库中获得的资产。您可以根据属性值或值范围创建过滤器。

在接下来的代码中，我们有一个名为“Event”的弹性资产，其属性为“startDate”。我们要检索 2013-01-01 之后开始的事件

<searchstate:create name="ss"/> <searchstate:addrangeconstraint name="ss" typename="mySiteAttributeType" attribute="startDate" upperequal="2013-01-01 00:00:00"/> <assetset:setsearchedassets name="as" constraint="ss"assettypes="Event"/> <assetset:getassetlist name="as" listvarname="auxlist"/>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-08T15:44:17.713

是的，searchstate 用于从数据库中获取数据。但是什么样的数据，什么样的数据范围以及要缓存的数据。您可以在搜索时限制此类信息。

Searchstate 用于在 FatWire 类型中搜索资产 - Flex 资产。

有关更多详细信息，请查看[http://docs.oracle.com/cd/E29495_01/doc.1111/webcenter_sites_11gr1_bp1_developer_guide.pdf上的文档](http://docs.oracle.com/cd/E29495_01/doc.1111/webcenter_sites_11gr1_bp1_developer_guide.pdf)

干杯！！

# c# - 设置升级后如何删除以前的用户设置？

> ID：13950781
> 
> 赞同：2
> 
> 时间：2012-12-19T10:55:47.860
> 
> 标签：c#, .net, wpf

做了一个之后：

```
MyApp.Properties.Settings.Default.Upgrade(); 
```

如何删除任何以前的设置文件？我遇到的问题是我有一个功能，用户可以使用以下方法重置他/她自己的数据：

```
Properties.Settings.Default.Reset(); 
```

但是在应用程序的下一次启动时，由于旧的用户设置仍然存在，它将再次升级。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T12:14:21.510

[如何在 .net 中跨不同程序集版本保留 user.config 设置？](https://stackoverflow.com/questions/534261/how-do-you-keep-user-config-settings-across-different-assembly-versions-in-net/534335#534335)
似乎是您正在寻找的东西。

所以使用 Upgrade、UpgradeRequired=true 或 false 和 Save ：解释所有情况会很长，但实际上很容易弄清楚该怎么做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T09:28:34.267

看起来除了自己手动做之外没有其他办法。因此，升级成功后，您可以使用文件系统方法手动删除旧版本。

# html - doctype html 打破布局

> ID：13950783
> 
> 赞同：3
> 
> 时间：2012-12-19T10:55:51.790
> 
> 标签：html, internet-explorer, css

我正在尝试复制 html5doctor.com 的布局。我在这里安装了 IE8。我能够产生以下输出：

![在此处输入图像描述](../Images/7ed0d64cf05e93119b2e1e8bdc48c703.png)

**HTML**

```
<html>
<head>
    <link type="text/css" rel="stylesheet"  href="style.css" />
</head>
<body>
    <div id="header">
    </div>
    <div id="nav">
        <div id="navmenus">
            <ul id="navmenulist">                   
                <li class="menu" id="id1">
                    <a href="#">Home</a>
                <li class="menu">
                    <a href="#">Products</a>
                <li class="menu">
                    <a href="#">About Us</a>
            </ul>
        </div>
    </div>
    <div id="content" >
        <div id="article"></div>
        <div id="sidebar"></div>    
    </div>      
    <div id="footer"></div>
</body>
</html> 
```

**CSS**

```
/*I have added CSS Reset from http://meyerweb.com/eric/tools/css/reset/ 
       Just deleted it for simplicity 
*/

body
{
    margin:0px;
    padding:0px;    
    background-color:#E8E8E8;
    text-align:center;
}

#header
{
    background-color:#1F7ADB;
    width:100%;
    height:150px;
}

#nav
{
    background-color:#1F7ADB;
    width:100%;
    text-align:center;  
}

#navmenus
{
    background-color:#14B3F7;
    width:900px;
    text-align:left;    
}

li.menu
{
    list-style:none;
    display:inline;     
    height:35px;
    padding:12px;   
}

li.menu:hover
{
    background-color:yellow;        
}

li.menu a
{   
    text-decoration:none;
    font-family:Arial;
    font-size:18px; 
}

#content
{
    width:900px;
    background-color:#ffffff;
    height:1300px;

} 
```

注意`li.menu:hover`上面的 CSS。它在 IE8 中不起作用。所以我按照[这个线程](https://stackoverflow.com/questions/6269831/hover-effects-not-working-with-ie8)`<!DOCTYPE html>`的建议添加了。

它使悬停工作，但现在它破坏了布局，如下所示：

![在此处输入图像描述](../Images/f6b2ca0b64b1f8276fdb5957528bbee2.png)

我希望得到可以首先在 IE8 上运行的结果，然后想学习如何在主要（可能不在 IE6 中）浏览器中始终如一地工作。并且很乐意坚持使用 CSS 和 HTML（无脚本）。最重要的是想了解这里到底出了什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T11:00:48.027

`text-align:center;`从你想要在页面居中的块元素中删除`body`并使用..`margin:auto`

需要它的元素是`#navmenus`and `#content`，所以

```
#navmenus
{
    background-color:#14B3F7;
    width:900px;
    margin:0 auto;   
}

#content
{
    width:900px;
    background-color:#ffffff;
    height:1300px;
    margin:0 auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:00:37.557

我会将内容区域的 CSS 更新为：

```
#content
{
    width:900px;
    background-color:#ffffff;
    height:1300px;
    margin: 0 auto;
} 
```

使用边距将使该元素居中，而不是尝试在父元素上使用 text-align。

# python - Python、Windows服务导入错误

> ID：13950786
> 
> 赞同：6
> 
> 时间：2012-12-19T10:55:55.823
> 
> 标签：python, windows, service, windows-services

我正在尝试将 python 应用程序作为 Windows 服务运行。我安装并启动了代码，但在导入作为应用程序一部分的模块和类时遇到问题。

注意:: Python 库被很好地包含在内。

我检查了 python 路径并且所有正确的值都在其中（包括应用程序目录），这让我相信 Windows 服务可能在不同的位置运行。

作为 Windows 服务运行的 python 应用程序是否从 Windows 上的不同位置运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:14:41.547

python服务创建使用默认`win32service`创建pythonservice.exe `C:\Python27\Lib\site-packages\win32`。

您可以`os.chdir(yourdir)`在服务创建之前在您的代码中执行，

最好的办法是使用绝对路径并在脚本中设置正确的 sys.path 来访问文件

# ruby-on-rails-3 - 如何阻止辅助方法应用于特定控制器？

> ID：13950788
> 
> 赞同：0
> 
> 时间：2012-12-19T10:56:02.207
> 
> 标签：ruby-on-rails-3, subdomain, helpermethods

我有一个 helper_method 允许链接从子域中转义。但是它正在影响我的videos_controller，因为当它不在事件控制器中时，它基本上似乎否定了'current_event'方法。

在过去的 4 天里，我尝试了几十种不同的方法来实现它，所以我仍然可以从子域中逃脱我的链接，但仍然允许 videos_controller 工作。

我认为实现这一目标的最佳方法是从辅助方法中排除videos_controller，但我不确定如何（或者它是否实际上是最好的前进方式——我显然是个菜鸟！）有什么建议吗？！相关代码如下：

```
module UrlHelper
  def url_for(options = nil)
      if request.subdomain.present? and request.subdomain.downcase != 'www' and !options.nil? and options.is_a?(Hash) and options.has_key? :only_path and options[:only_path] 
        options[:only_path] = false 
      end
      super
  end
end 
```

Videos_controller

```
def new
    if current_event?
      @video = current_event.videos.new
    else
      @video = Video.new
    end
  end

  def create
    if current_event.present?
      @video = current_event.videos.new(params[:video])
      @video.user_id = current_user.id
       key = get_key_from_the_cloud
      @video.key = key
    else
      @video = current_user.videos.new(params[:video])
      @video.user_id = current_user.id
      key = get_key_from_the_cloud
      @video.key = key
    end
    if @video.save
      flash[:success] = "Video uploaded!"
      redirect_to root_url(subdomain: => current_event.name)
    else
      flash[:error] = "#{@video.errors.messages}"
      render :new
    end
  end 
```

current_event 方法

```
 def current_event
    if request.subdomain.present?
      @event = Event.find_by_name(request.subdomain)
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:16:33.913

你看过[这篇文章](https://stackoverflow.com/questions/1179865/why-are-all-rails-helpers-available-to-all-views-all-the-time-is-there-a-way-t)了吗？

您可能想要创建一个`test`只执行类似操作的新函数

```
module UrlHelper
  def test
    puts "Test is called"
  end
end 
```

如果那行得通，您知道它不包括失败，但它必须是方法。否则，您知道该模块不包括在内，您可以缩小搜索范围。

# iphone - EKCalendar 未添加到 iCal

> ID：13950801
> 
> 赞同：0
> 
> 时间：2012-12-19T10:56:28.267
> 
> 标签：iphone, ios, icalendar

我的 iPhone 有一个奇怪的行为。我正在创建一个使用日历事件 (EventKit) 的应用程序。使用的类如下：

.h 一个

```
#import "GenericManager.h"
#import <EventKit/EventKit.h>

#define oneDay      60*60*24
#define oneHour     60*60

@protocol CalendarManagerDelegate;

@interface CalendarManager : GenericManager

/*  
 * metodo che aggiunge un evento ad un calendario di nome Name nel giorno onDate.
 * L'evento da aggiungere viene recuperato tramite il dataSource che è quindi
 * OBBLIGATORIO (!= nil).
 *
 * Restituisce YES solo se il delegate è conforme al protocollo CalendarManagerDataSource.
 * NO altrimenti
 */
+ (BOOL) addEventForCalendarWithName:(NSString *) name fromDate:(NSDate *)fromDate toDate: (NSDate *) toDate withDelegate:(id<CalendarManagerDelegate>) delegate;

/*
 * metodo che aggiunge un evento per giorno compreso tra fromDate e toDate ad un
 * calendario di nome Name. L'evento da aggiungere viene recuperato tramite il dataSource
 * che è quindi OBBLIGATORIO (!= nil).
 *
 * Restituisce YES solo se il delegate è conforme al protocollo CalendarManagerDataSource.
 * NO altrimenti
 */
+ (BOOL) addEventsForCalendarWithName:(NSString *) name fromDate:(NSDate *)fromDate toDate: (NSDate *) toDate withDelegate:(id<CalendarManagerDelegate>) delegate;

@end

@protocol CalendarManagerDelegate <NSObject>

// viene inviato quando il calendario necessita informazioni sull' evento da aggiungere
- (void) calendarManagerDidCreateEvent:(EKEvent *) event;

@end 
```

.m 一个

```
//
//  CalendarManager.m
//  AppCampeggioSingolo
//
//  Created by CreatiWeb Srl on 12/17/12.
//  Copyright (c) 2012 CreatiWeb Srl. All rights reserved.
//

#import "CalendarManager.h"
#import "Commons.h"
#import <objc/message.h>

@interface CalendarManager ()

@end

@implementation CalendarManager

+ (void)requestToEventStore:(EKEventStore *)eventStore delegate:(id)delegate fromDate:(NSDate *)fromDate toDate: (NSDate *) toDate name:(NSString *)name
{
    if([eventStore respondsToSelector:@selector(requestAccessToEntityType:completion:)])
    {
        // ios >= 6.0
        [eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) {
            if (granted)
            {
                [self addEventForCalendarWithName:name fromDate: fromDate toDate: toDate inEventStore:eventStore withDelegate:delegate];
            }
            else
            {

            }
        }];
    }
    else if (class_getClassMethod([EKCalendar class], @selector(calendarIdentifier)) != nil)
    {
        // ios >= 5.0 && ios < 6.0
        [self addEventForCalendarWithName:name fromDate:fromDate toDate:toDate inEventStore:eventStore withDelegate:delegate];
    }
    else
    {
        // ios < 5.0
        EKCalendar *myCalendar = [eventStore defaultCalendarForNewEvents];

        EKEvent *event = [self generateEventForCalendar:myCalendar fromDate: fromDate toDate: toDate inEventStore:eventStore withDelegate:delegate];
        [eventStore saveEvent:event span:EKSpanThisEvent error:nil];
    }
}

/*
 * metodo che recupera l'identificativo del calendario associato all'app o nil se non è mai stato creato.
 */
+ (NSString *) identifierForCalendarName: (NSString *) name
{
    NSString * confFileName = [self pathForFile:kCurrentCalendarFileName];

    NSDictionary *confCalendar = [NSDictionary dictionaryWithContentsOfFile:confFileName];
    NSString *currentIdentifier = [confCalendar objectForKey:name];
    return currentIdentifier;
}

/*
 * memorizza l'identifier del calendario
 */
+ (void) saveCalendarIdentifier:(NSString *) identifier andName: (NSString *) name
{
    if (identifier != nil)
    {
        NSString * confFileName = [self pathForFile:kCurrentCalendarFileName];
        NSMutableDictionary *confCalendar = [NSMutableDictionary dictionaryWithContentsOfFile:confFileName];
        if (confCalendar == nil)
        {
            confCalendar = [NSMutableDictionary dictionaryWithCapacity:1];
        }

        [confCalendar setObject:identifier forKey:name];
        [confCalendar writeToFile:confFileName atomically:YES];
    }
}

+ (EKCalendar *)getCalendarWithName:(NSString *)name inEventStore:(EKEventStore *)eventStore withLocalSource: (EKSource *)localSource forceCreation:(BOOL) force
{
    EKCalendar *myCalendar;
    NSString *identifier = [self identifierForCalendarName:name];

    if (force || identifier == nil)
    {
        NSLog(@"create new calendar");
        if (class_getClassMethod([EKCalendar class], @selector(calendarForEntityType:eventStore:)) != nil) {
            // da ios 6.0 in avanti
            myCalendar = [EKCalendar calendarForEntityType:EKEntityTypeEvent eventStore:eventStore];
        } else {
            myCalendar = [EKCalendar calendarWithEventStore:eventStore];
        }
        myCalendar.title = name;
        myCalendar.source = localSource;
        NSError *error = nil;
        BOOL result = [eventStore saveCalendar:myCalendar commit:YES error:&error];
        if (result) {
            NSLog(@"Saved calendar %@ to event store. %@",myCalendar,eventStore);
        } else {
            NSLog(@"Error saving calendar: %@.", error);
        }

        [self saveCalendarIdentifier:myCalendar.calendarIdentifier andName:name];
    }
    //   You can also configure properties like the calendar color etc. The important part is to store the identifier for later use. On the other hand if you already have the identifier, you can just fetch the calendar:

    else
    {
        myCalendar = [eventStore calendarWithIdentifier:identifier];
        NSLog(@"fetch an old-one = %@",myCalendar);
    }

    return myCalendar;
}

+ (EKCalendar *)addEventForCalendarWithName: (NSString *) name fromDate:(NSDate *)fromDate toDate: (NSDate *) toDate inEventStore:(EKEventStore *)eventStore withDelegate: (id<CalendarManagerDelegate>) delegate
{
    // da ios 5.0 in avanti
    EKCalendar *myCalendar;
    EKSource *localSource = nil;
    for (EKSource *source in eventStore.sources)
    {
        if (source.sourceType == EKSourceTypeLocal)
        {
            localSource = source;
            break;
        }
    }

    @synchronized(self)
    {
        myCalendar = [self getCalendarWithName:name inEventStore:eventStore withLocalSource:localSource forceCreation:NO];
        if (myCalendar == nil)
            myCalendar = [self getCalendarWithName:name inEventStore:eventStore withLocalSource:localSource forceCreation:YES];

        NSLog(@"End synchronized block %@",myCalendar);
    }

    EKEvent *event = [self generateEventForCalendar:myCalendar fromDate:fromDate toDate:toDate inEventStore:eventStore withDelegate:delegate];
    [eventStore saveEvent:event span:EKSpanThisEvent error:nil];

    return myCalendar;
}

+ (EKEvent *) generateEventForCalendar: (EKCalendar *) calendar fromDate:(NSDate *)fromDate toDate: (NSDate *) toDate inEventStore:(EKEventStore *) eventStore withDelegate:(id<CalendarManagerDelegate>) delegate
{
    EKEvent *event = [EKEvent eventWithEventStore:eventStore];
    event.startDate=fromDate;
    event.endDate=toDate;
    [delegate calendarManagerDidCreateEvent:event];
    [event setCalendar:calendar];

    // ricerca dell'evento nel calendario, se ne trovo uno uguale non lo inserisco
    NSPredicate *predicate = [eventStore predicateForEventsWithStartDate:fromDate endDate:toDate calendars:[NSArray arrayWithObject:calendar]];
    NSArray *matchEvents = [eventStore eventsMatchingPredicate:predicate];

    if ([matchEvents count] > 0) {
        // ne ho trovati di gia' presenti, vediamo se uno e' quello che vogliamo inserire

        BOOL found = NO;

        for (EKEvent *fetchEvent in matchEvents) {
            if ([fetchEvent.title isEqualToString:event.title] &&
                [fetchEvent.notes isEqualToString:event.notes])
            {
                found = YES;
                break;
            }
        }
        if (found)
        {
            // esiste già e quindi non lo inserisco
            NSLog(@"OH NOOOOOO!!");
            event = nil;
        }
    }

    return event;
}

#pragma mark - Public Methods

+ (BOOL) addEventForCalendarWithName:(NSString *) name fromDate:(NSDate *)fromDate toDate: (NSDate *) toDate withDelegate:(id<CalendarManagerDelegate>) delegate
{
    BOOL retVal = YES;

    EKEventStore *eventStore=[[EKEventStore alloc] init];

    if ([delegate conformsToProtocol:@protocol(CalendarManagerDelegate)])
    {

        [self requestToEventStore:eventStore delegate:delegate fromDate:fromDate toDate: toDate  name:name];
    }
    else
    {
        retVal = NO;
    }

    return retVal;
}

+ (BOOL) addEventsForCalendarWithName:(NSString *) name fromDate:(NSDate *)fromDate toDate: (NSDate *) toDate withDelegate:(id<CalendarManagerDelegate>) delegate
{
    BOOL retVal = YES;

    NSDate *dateCursor = fromDate;

    EKEventStore *eventStore=[[EKEventStore alloc] init];

    if ([delegate conformsToProtocol:@protocol(CalendarManagerDelegate)])
    {

        while (retVal && ([dateCursor compare:toDate] == NSOrderedAscending)) {
            NSDate *finish = [dateCursor dateByAddingTimeInterval:oneDay];
            [self requestToEventStore:eventStore delegate:delegate fromDate: dateCursor toDate: finish  name:name];

            dateCursor = [dateCursor dateByAddingTimeInterval:oneDay];
        }

    }
    else
    {
        retVal = NO;
    }

    return retVal;
}

@end 
```

实际上，在我的 iphone 上，我得到了日志：

获取一个旧的 = (null) 19/12/2012 11:33:09.520 AppCampeggioSingolo [730:8 b1b] 创建新日历 19/12/2012 11:33:09.558 AppCampeggioSingolo [730:8 b1b] 保存的日历 EKCalendar

每次我添加一个事件时，我都会在他添加的 iCal 日历事件中查找并找不到它。然而，在我朋友的 iPhone 上，一切正常。我怀疑问题出在代码上，但只是不明白它可能是什么。

我昨天和今天在谷歌上搜索了一整天，但还没有找到任何东西。

任何帮助将不胜感激

编辑：我忘了电话是

```
[CalendarManager addEventForCalendarWithName: @"myCalendar" fromDate:fromDate toDate: toDate withDelegate:self]; 
```

在委托方法中，只需像这样设置事件的标题和注释

```
- (void) calendarManagerDidCreateEvent:(EKEvent *) event
{
    event.title = @"the title";
    event.notes = @"some notes";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:10:12.313

解决了 ！！！今天iPhone卡在黑屏上，没有选择关闭它。所以'我决定恢复它并且......神奇！日历现在正常工作...... :)

奇怪的信息化方式：p

# drupal - Drupal 7 LDAP 模块和 AD 全局目录

> ID：13950803
> 
> 赞同：1
> 
> 时间：2012-12-19T10:56:34.203
> 
> 标签：drupal, active-directory, drupal-7, ldap

是否有人使用[http://drupal.org/project/ldap](http://drupal.org/project/ldap)成功对 AD 全局目录进行身份验证？我有以下配置：

```
LDAP 服务器：
ldaps://service.mydomain.com
LDAP 端口：
3269
装订方式：
服务帐号绑定
LDAP 用户的基本 DN：
DC=服务，DC=我的域，DC=com
DC=其他域，DC=我的域，DC=com
AuthName 属性：
用户主体名称

```

该模块成功验证了用户，这些用户是称为“服务”的父域的成员，但 LDAP 搜索无法找到“其他域”中的任何用户，该域连接到 AD 域林内的父域。我能够使用 ldp.exe 测试 LDAP 搜索，并且使用这个工具我可以找到来自任何域的任何用户。

此外，Drupal 看门狗中还有以下错误消息：

**ldap_search() 函数错误。LDAP 错误：引用，ldap_search() 参数：ldap_search() 调用：base_dn：DC=otherdomain，DC=mydomain，DC=com，filter = (userPrincipalName=somebody@otherdomain.mydomain.com)，属性：，attrsonly = 0， sizelimit = 0, timelimit = 0, deref = , scope = 3**

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:17:37.753

LDAP 客户端应遵循搜索结果中返回的引用 - 或者应安装 LDAP 目录代理服务器以自动遵循引用。

当 LDAP 目录服务器*不能或不愿意*执行搜索操作时，它可能会返回一个指示另一个服务器可能能够执行请求的操作的**引用。**“追逐”推荐是 LDAP 客户端的责任。推荐由推荐字段的存在和设置为**10**的搜索结果代码指示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T17:24:25.883

您必须在 LDAP 服务器字段中写入：ldaps://ldapserver:3269 并在 LDAP 端口字段中保持相同的端口号。

# string - 将外部单元格地址转换为vba中的范围

> ID：13950816
> 
> 赞同：2
> 
> 时间：2012-12-19T10:57:04.860
> 
> 标签：string, excel, vba, range, external

我在单元格 A1 中有一个字符串，它是外部单元格（即另一个工作簿）的单元格地址，

```
'[data transfer utility.xlsb]Sheet1'!$B$5 
```

在 vba 中，我想创建一个范围对象，`myRange`它对应于存储在单元格 A1 中的地址。

我尝试了各种解决方案，但都没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:47:21.433

在 VBA 中：

```
ExecuteExcel4Macro("'C:\[Book1.xlsx]Sheet1'!" & Range("A1").Address(, , xlR1C1)) 
```

在 Excel 中：

```
='C:\[Book1.xlsx]Sheet1'!$A$1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T21:56:36.933

VBA：

```
函数参考（strAddress 作为字符串）作为范围

    将 intPos 调暗为整数，intPos2 调暗为整数
    暗淡 strWB 作为字符串，strWS 作为字符串，strCell 作为字符串

    intPos = InStr(strAddress, "]")
    strWB = Mid(strAddress, 2, intPos - 2)

    intPos2 = InStr(strAddress, "!")
    strWS = Mid(strAddress, intPos + 1, intPos2 - intPos - 2)

    strCell = Mid(strAddress, intPos2 + 1)

    参考 = Workbooks(strWB).Worksheets(strWS).Range(strCell)

结束功能

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-08T20:12:04.303

谁进入这个黑暗的地方寻找希望，请使用：

```
Function GetRangeReference(strAddress As String)
  Dim exclamationPos As Integer
  Dim strWBWS, strWB, strWS, strCell As String

  exclamationPos = InStrRev(strAddress, "!")

  If (exclamationPos > 0) Then
    strWBWS = Mid(strAddress, 1, exclamationPos - 1)

    If (Mid(strWBWS, 1, 1) = "'" And Mid(strWBWS, Len(strWBWS), 1) = "'") Then
      strWBWS = Mid(strWBWS, 2, Len(strWBWS) - 2)

      If (Mid(strWBWS, 1, 1) = "[" And InStr(strWBWS, "]") > -1) Then
        strWB = Mid(strWBWS, 2, InStrRev(strWBWS, "]") - 2)
        strWS = Mid(strWBWS, InStrRev(strWBWS, "]") + 1)
      Else
        strWB = ActiveWorkbook.Name
        strWS = Mid(strWBWS, InStrRev(strWBWS, "]") + 1)
      End If
    Else
      strWB = ActiveWorkbook.Name
      strWS = strWBWS
    End If

    strCell = Mid(strAddress, exclamationPos + 1)
  Else
    strWB = ActiveWorkbook.Name
    strWS = ActiveSheet.Name
    strCell = strAddress
  End If

  Set GetRangeReference = Workbooks(strWB).Worksheets(strWS).Range(strCell)
End Function` 
```

# c++ - 在 3d 空间中设置对象的方向

> ID：13950819
> 
> 赞同：2
> 
> 时间：2012-12-19T10:57:07.317
> 
> 标签：c++, algorithm, opengl, 3d

我有一个程序，我在 3D 空间中绘制一些形状，例如矩形/圆形/三角形等，与中心等距。

与中心等距的两点的示例`(0,0,0)`是

```
x1: 93, 313, 123
x2: -263, -135, -186 
```

并且可能还有更多的积分。

在这两点上，我正在通过类似的方式绘制形状

`glRectangle(x1, width, height);`

`(x1 or x2)`形状（矩形/三角形等）在距中心等距的起始顶点处非常好。但是，对于我正在寻找的东西，这些形状在空间中的方向是错误的。

我希望形状所在平面的中心与来自中心的假想线垂直。这可能可以通过旋转飞机来解决，但我不确定要采用的方法。对于当前示例，假设我有形状的顶点，但我如何找出**矩形所在的平面**并`rotate that plane`使其垂直（与来自空间中心的线`(0,0,0)`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:16:11.890

如果中心需要垂直于向量 C（坐标中心和矩形中心之间的线），它应该像这样工作（伪代码）：

```
A = C x UP_VECTOR (CROSS-PRODUCT to calculate helper vector pointing in "sideway" direction of "rectangle")
B = C x A (CROSS-PRODUCT to get the local "up/down" vector of the "rectangle")
A = normalize(A)
B = normalize(B)
P1 = width/2 * A + height/2 * B
P2 = -width/2 * A + height/2 * B
P3 = -width/2 * A + -height/2 * B
P4 = width/2 * A + -height/2 * B 
```

希望这是可以理解和正确的（没有尝试过并且在找到正确的词汇时遇到了一些麻烦）

一些附加信息： A 和 B 是辅助向量，是矩形上的局部向上和向左方向，经过归一化后，它们可用于相应地计算矩形的 4 个点。还要小心，如果没有显示矩形，它可能与绘图顺序有关，所以只要颠倒顺序，然后如果正面和背面是错误的......

# c++ - 哪个进程获得了信号量

> ID：13950826
> 
> 赞同：-1
> 
> 时间：2012-12-19T10:57:41.557
> 
> 标签：c++, semaphore

我创建了两个访问相同全局共享内存的进程。出于同步目的，我使用了全局信号量。我们可以在不调试（使用任何 Windows 工具）的情况下找出哪个进程获得了信号量吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T10:59:21.977

每次获取信号量时，在程序中打印一条消息。你为什么不想要你/你不能调试？

真的，没有更多关于你想要做什么的信息，这就是所有可以说的。

# logging - 从 Microsoft.Practices.EnterpriseLibrary.Logging app.config 日志文件名获取

> ID：13950827
> 
> 赞同：0
> 
> 时间：2012-12-19T10:57:46.017
> 
> 标签：logging, enterprise-library

我正在使用 Microsoft.Practices.EnterpriseLibrary.Logging。日志文件名设置位于 App.Config 文件中。

我想通过代码获取这个 fileName 属性。我没有找到如何获得它。是否可以？我该怎么做？我正在使用 C#。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:48:17.357

如果您知道配置中侦听器的名称和类型，则可以提取信息：

```
IConfigurationSource configSource = ConfigurationSourceFactory.Create();

var logSettings = configSource.GetSection(LoggingSettings.SectionName) as LoggingSettings;

var listener = logSettings.TraceListeners
    .SingleOrDefault(t => t.Name == "Rolling Flat File Trace Listener");

if (listener != null)
{
    var fileListener = listener as RollingFlatFileTraceListenerData;

    if (fileListener != null)
    {
        Console.WriteLine(fileListener.FileName);
    }
} 
```

以上是针对 RollingFlatFileTraceListener 的。

或者，如果您只想获取支持 FileName 属性的所有跟踪侦听器的文件名，您可以这样做：

```
IConfigurationSource configSource = ConfigurationSourceFactory.Create();

var logSettings = configSource.GetSection(LoggingSettings.SectionName) as LoggingSettings;

foreach (var listener in logSettings.TraceListeners)
{
    PropertyInfo property = listener.GetType().GetProperty("FileName");

    if (property != null)
    {
        Console.WriteLine(
            string.Format("FileName for Trace Listener '{0}'={1}", 
                listener.Name, property.GetValue(listener, null)));
    }
} 
```

# android - 在 Android 中使用 SQL 查询构建器库/框架

> ID：13950830
> 
> 赞同：4
> 
> 时间：2012-12-19T10:57:53.737
> 
> 标签：android, sql, external, querydsl

我目前正在开发一个 Android 项目，并且必须管理数据库连接和查询以存储数据。我不会使用 Android 设备提供的 SQLite，也不能使用它。

由于我需要构建大量查询，因此我想使用库或框架来简化任务。查看可用的内容，使用诸如 QueryDSL 之类的框架似乎是最容易的。

但是，由于我正在使用 Android，我不确定该框架是否可用以及使用它会带来什么。有人有在 Android 上使用外部数据库的经验并有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T11:08:04.233

连接到外部数据库的推荐方法是使用 REST 客户端。看到这个[帖子](https://stackoverflow.com/questions/13403507/android-rest-client)

# magento - 由数据库链接更改为使用 Magento 开发的商店的一部分

> ID：13950832
> 
> 赞同：0
> 
> 时间：2012-12-19T10:57:57.593
> 
> 标签：magento

现在我对Magento结构的研究取得了一些进展，我想我可以更好地解释我两天前发布的同一个问题。

有谁知道 Magento 商店类别的目标链接在哪里（在数据库中）？

[http://peluches-cel.com](http://peluches-cel.com) Peluche del mes 部分 ----------------->我希望此部分的目标更改为新的 url

非常感谢！！！！！！！致所有你努力理解我的“西班牙裔英语”的人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:16:19.840

对不起，但这可能会因为 Magento 的后端而改变。 ![在此处输入图像描述](../Images/65c98eb47d47f7c1f4903fce0c76e0ff.png)

这解决了你的问题？

# c# - C# WPF 中的页面、框架、导航窗口

> ID：13950833
> 
> 赞同：11
> 
> 时间：2012-12-19T10:58:00.647
> 
> 标签：c#, wpf, wpf-controls

*   我想知道c#wpf中页面、框架、导航窗口的区别
*   对于 wpf Windows 应用程序，它们的最佳选择是什么？
*   在我的应用程序中单击固定部分中的按钮后如何制作固定部分（包含主按钮）和可变部分（显示页面）
*   有没有什么好的网站提供c# wpf从入门到专业的视频教程？

谢谢你

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T11:37:56.047

A`Page`很像一个用户控件，只是它显示在 a`Frame`中，它又是 a 的一部分`NavigationWindow`。A`NavigationWindow`是一种特殊的窗口，它允许页面导航，并且可以显示用于导航页面的相应控件。

如果您想要类似向导的功能，或者如果用户体验应该与您在浏览 Web 时获得的体验相当，分页应用程序是一个不错的选择。在许多情况下，使用标准 WPF 窗口是更好的选择。

`NavigationWindow`已经包含一个可以包含控件的“固定部分” 。您还可以使用普通窗口，在其中放置一个`Frame`，然后通过适当的布局创建您自己的“固定部分”。然后导航将归结为调用`Frame`提供的导航方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:45:52.273

从[这个问题](https://stackoverflow.com/questions/5243910/page-vs-window-in-wpf)的答案：

> 页面旨在用于导航应用程序（通常带有后退和前进按钮，例如 Internet Explorer）。页面必须托管在一个`NavigationWindow`或一个`Frame`

最佳选择取决于您要创建的应用程序类型。它是向导或导航类型的应用程序，还是只有一个窗口（可能带有选项卡）的常规应用程序？

我肯定会考虑使用像[Caliburn.Micro](http://caliburnmicro.codeplex.com/)这样的 MVVM 框架来制作 WPF 应用程序。除了鼓励您使用 MVVM 模式解耦应用程序之外，它还有一些非常强大的机制来处理[Screens、Conductors 和 Composition 。](http://caliburnmicro.codeplex.com/wikipage?title=Screens,%20Conductors%20and%20Composition)[Caliburn.Micro 的作者 Rob Eisenberg 编写了一些教程，在项目文档](http://caliburnmicro.codeplex.com/documentation)下对框架进行了广泛的解释以及如何使用该框架。interwebz周围也有很多资源，google吧！:)

我还可以推荐 Pluralsight 的[WPF 和 XAML Fundamentals](http://pluralsight.com/training/courses/TableOfContents?courseName=wpf-fundamentals&highlight=ian-griffiths_wpf-introduction*1,2,4!ian-griffiths_wpf-data*0!ian-griffiths_wpf-graphics*1!ian-griffiths_wpf-controls!ian-griffiths_wpf-text!ian-griffiths_wpf-coretypes!ian-griffiths_wpf-templates!ian-griffiths_wpf-layout!ian-griffiths_wpf-resources#wpf-introduction)和[WPF Advanced Topics](http://pluralsight.com/training/courses/TableOfContents?courseName=wpf-advanced-topics&highlight=ian-griffiths_wpf-interop*2,0,3,4,5,6,7,8,9!ian-griffiths_wpf-threadingandservices*2,0,1,5,6,7,8,9,10,13,18!ian-griffiths_wpf-printing*0,1,2,3,4,5,6,8,9,10,11,12!ian-griffiths_wpf-styles*0,1,2,3,5,10!ian-griffiths_wpf-reusableui*0,1,2,4,5,8,9,10,11,12,13,14,15,16,17,19,20#wpf-interop)，它们应该涵盖有关 WPF 的所有值得了解的内容 :)

# jquery - jquery 数据属性随机工作

> ID：13950837
> 
> 赞同：6
> 
> 时间：2012-12-19T10:58:16.603
> 
> 标签：jquery, jquery-ui-sortable

我有一个在鼠标移出时调用的函数。它检查元素现在是否被“拖动”或正在编辑。如果不是，它应该删除活动状态。

这就是它的外观。

```
function onMouseOut() {
        console.log("mouse out");
        if ($(this).find(".content").attr('data-editing') != "true" && $(this).find(".content").attr('data-dragging') != "true") {
                console.log("no edit, no dragging");
                removeActive($(this).find(".content"));
        } else {
                console.log("edit: " + $(this).find(".content").attr("data-editing"));
                console.log("dragging: " + $(this).find(".content").attr("data-draging"));
        }
} 
```

该元素位于可排序的内部。它不会破坏上面的代码，我可以根据需要对其进行多次排序。但是当我添加“connectWith”并转移发件人时，它完全崩溃了。

然后我到控制台的输出如下：

```
mouse out
edit: undefined
dragging: undefined 
```

现在，这怎么可能？

**编辑：**

好的，标记来了：

```
<div id="body">
    <section class="main_1 grid_8 field" data-field='main_1'>
        <div class='module'>
        <div class="content content-editor" data-id='1' data-module='content' contenteditable='true'>
            <h1>Heading 1</h1><p>"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."</p>
        </div>
        </div>
            <div class='module'>
        <div class="content content-editor" data-id='4' data-module='content' contenteditable='true'>
            <h4>Yet another content</h4><p>This is yet another contentblock!</p>
        </div>
        </div>
    </section>
    <aside class="aside_1 grid_4 field" data-field='aside_1'>
        <div class='module'>
        <div class="content content-editor" data-id='2' data-module='content' contenteditable='true'>
            <h2>Aside Content</h2><p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.</p>
        </div>
        </div>
    </aside>
    <div class="x-clear"></div>
</div> 
```

这是js：

```
 $(document).ready(function() {
    /*
    * - on hoover, we display the panel
    */
    $( ".content-editor" ).mouseenter(onMouseIn);
    $( ".edit-wrap" ).live("mouseleave", onMouseOut);

    /*
    * - on click/focus, we set it as active
    */
    $( ".content-editor" ).focus(onFocus);
    $( ".content-editor" ).blur(onLostFocus);
});

/*
* - functions
*/
function onMouseIn() {
    if ($(this).attr('data-active') != "true" && !dragging) {
        console.log("wasnt active: " + $(this).attr('data-active'));
        makeActive($(this));
    } else {
        console.log("was active: " + $(this).data('id') + " - act: " + $(this).attr('data-active'));
    }
}
function onMouseOut() {
    console.log("mouse out");
    if ($(this).find(".content").attr('data-editing') != "true" && $(this).find(".content").attr('data-dragging') != "true") {
        console.log("no edit, no dragging");
        removeActive($(this).find(".content"));
    } else {
        console.log("edit: " + $(this).find(".content").attr("data-editing"));
        console.log("dragging: " + $(this).find(".content").attr("data-draging"));
    }
}
function onFocus() {
    $(this).attr('data-editing', 'true');
}
function onLostFocus() {
    console.log("lost focus: " + $(this).data('id'));
}
function makeActive($this) {
    $this.attr('data-active', "true");

    $this.wrap("<div class='edit-wrap'>");
    var $parent = $this.parent(".edit-wrap");

    $parent.prepend("<div class='edit-head'>&raquo; Content ( Quick Edit )</div>");
    $parent.append(editMenu);
}
function removeActive($this) {
    $this.parent(".edit-wrap").find(".edit-head").remove();
    $this.parent(".edit-wrap").find(".edit-menu").remove();

    $this.unwrap(".edit-wrap");
    $this.attr('data-active', "false");
}

/*
* - html
*/
var editMenu = "<div class='edit-menu'>"+
        "<a href='#' class='btn openEditor'>Ã–ppna Editor</a>"+
        "<a href='#' class='btn quicksave'>Snabspara</a>"+
        "</div>"; 
```

和：

```
 var dragging = false;

$(document).ready(function() {
    /*
    $( ".edit-head" ).live("mouseover", function() {
        $(this).parent(".edit-wrap").draggable({
            handle: ".edit-head",
            revert: 'invalid'
        }); 
    });

    $( ".edit-wrap" ).live("dragstart", function() {
        $(this).find(".content").attr("data-dragging", "true");
    });
    $( ".edit-wrap" ).live("dragstop", function() {
        $(this).find(".content").attr("data-dragging", "false");
        removeActive($(this).find(".content"));
    });
    */

    $( ".field" ).sortable({
        start: function(e, ui) {
            ui.placeholder.height(ui.item.height());
            $(this).find(".content").attr("data-dragging", "true");
            dragging = true;

            $(".field").addClass("target");

        },
        stop: function() {
            $(this).find(".content").attr("data-dragging", "false");
            dragging = false;

            $(".field").removeClass("target");
        },
        connectWith: '.field',
        placeholder: "drop-placeholder",
        dropOnEmpty: true,
        handle: ".edit-head",

        update: function(e, ui) {
            var $this   = ui.item;
            var $sender = ui.sender;

            if ($sender) {
                //vi bytte field
                console.log("bytte");
            } else {
                console.log("bytte inte");
            }
            console.log("change: " + $this + " from: " + $sender);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:30:43.027

寻找错别字：

```
attr("data-draging") 
```

以及代码中的其他地方

```
attr("data-dragging") 
```

但是如上所述，使用：

```
data("dragging") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T15:17:09.307

我建议您尽可能多地继续使用数据属性，并保留 class'es 主要用于样式但访问数据属性：

```
$selector.data("name") 
```

方法而不是

```
$selector.attr("data-name") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T16:36:58.217

```
console.log("dragging: " + $(this).find(".content").attr("data-draging")); 
```

错字，应该是

```
console.log("dragging: " + $(this).find(".content").attr("data-dragging")); 
```

这就是为什么您在控制台中得到未定义的原因。

如果从未设置过 onMouseOut 中的“数据编辑”属性检查，则可能未定义。我默认为假。您可能希望它默认 HTML 元素中的值，或者您可能希望在 if 语句中检查 undefined。

```
$( ".content-editor" ).attr('data-editing', 'false'); 
```

更改停止以获取事件和 ui 以及 sort(e,ui) 并将数据拖动 attr ui.item（当前拖动项）设置为 false。

```
 stop: function(e, ui) {
        $(ui.item).find(".content").attr("data-dragging", "false");
        $(this).find(".content").attr("data-dragging", "false"); 
```

它没有将您拖动的元素设置为 false，它似乎是为正在移动到 false 的元素设置它。

进入“编辑模式”似乎仍然存在问题我不确定模糊是否能很好地处理这个事件。当我有更多时间时，我会晚点更新。

现在都在一起了：

```
 $(document).ready(function() {
    /*
    * - on hoover, we display the panel
    */
    $( ".content-editor" ).mouseenter(onMouseIn);
    $( ".content-editor" ).attr('data-editing', 'false');
    $( ".edit-wrap" ).live("mouseleave", onMouseOut);

    /*
    * - on click/focus, we set it as active
    */
    $( ".content-editor" ).focus(onFocus);
    $( ".content-editor" ).blur(onLostFocus);
});

/*
* - functions
*/
function onMouseIn() {
    if ($(this).attr('data-active') != "true" && !dragging) {
        console.log("wasnt active: " + $(this).attr('data-active'));
        makeActive($(this));
    } else {
        console.log("was active: " + $(this).data('id') + " - act: " + $(this).attr('data-active'));
    }
}
function onMouseOut() {
    console.log("mouse out");
    if ($(this).find(".content").attr('data-editing') != "true" && $(this).find(".content").attr('data-dragging') != "true") {
        console.log("no edit, no dragging");
        removeActive($(this).find(".content"));
    } else {
        console.log("edit: " + $(this).find(".content").attr("data-editing"));
        console.log("dragging: " + $(this).find(".content").attr("data-dragging"));
    }
}
function onFocus() {
    $(this).attr('data-editing', 'true');
}
function onLostFocus() {
    console.log("lost focus: " + $(this).data('id'));
    //$(this).attr('data-editing', 'false');
}
function makeActive($this) {
    $this.attr('data-active', "true");

    $this.wrap("<div class='edit-wrap'>");
    var $parent = $this.parent(".edit-wrap");

    $parent.prepend("<div class='edit-head'>&raquo; Content ( Quick Edit )</div>");
    $parent.append(editMenu);
}
function removeActive($this) {
    $this.parent(".edit-wrap").find(".edit-head").remove();
    $this.parent(".edit-wrap").find(".edit-menu").remove();

    $this.unwrap(".edit-wrap");
    $this.attr('data-active', "false");
}

/*
* - html
*/
var editMenu = "<div class='edit-menu'>"+
        "<a href='#' class='btn openEditor'>Ã–ppna Editor</a>"+
        "<a href='#' class='btn quicksave'>Snabspara</a>"+
        "</div>";

  var dragging = false;

$(document).ready(function() {
    /*
    $( ".edit-head" ).live("mouseover", function() {
        $(this).parent(".edit-wrap").draggable({
            handle: ".edit-head",
            revert: 'invalid'
        });
    });

    $( ".edit-wrap" ).live("dragstart", function() {
        $(this).find(".content").attr("data-dragging", "true");
    });
    $( ".edit-wrap" ).live("dragstop", function() {
        $(this).find(".content").attr("data-dragging", "false");
        removeActive($(this).find(".content"));
    });
    */

    $( ".field" ).sortable({
        start: function(e, ui) {
            ui.placeholder.height(ui.item.height());
            $(this).find(".content").attr("data-dragging", "true");
            dragging = true;

            $(".field").addClass("target");

        },
        stop: function(e, ui) {
            $(ui.item).find(".content").attr("data-dragging", "false");
            $(this).find(".content").attr("data-dragging", "false");

            dragging = false;

            $(".field").removeClass("target");
        },
        connectWith: '.field',
        placeholder: "drop-placeholder",
        dropOnEmpty: true,
        handle: ".edit-head",

        update: function(e, ui) {
            var $this   = ui.item;
            var $sender = ui.sender;

            if ($sender) {
                //vi bytte field
                console.log("bytte");
            } else {
                console.log("bytte inte");
            }
            console.log("change: " + $this + " from: " + $sender);
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T15:08:06.940

一方面，我建议不要使用数据属性重载您的 HTML，而是使用默认属性，例如`id`和`class`（例如，对于活动/拖动状态）。其次，您在一直使用时编写非常慢的代码`$(this).find()`，您可以在 jQuery 中提供选择器的上下文，还可以缓存您的对象/数据：`var $content = $('.content', this);`。这使您的代码更清晰（`$(this).is('.active')`而不是检查数据活动字符串），甚至可能解决编码错误。

PS：如果您使用最新的 jQuery 版本，请同时更新您的 jQuery 编码知识 :)（例如阅读文档）

# android - 在 Android 中显示用于音频录制的声波

> ID：13950840
> 
> 赞同：9
> 
> 时间：2012-12-19T10:58:25.010
> 
> 标签：android, android-audiorecord

我们如何显示声波，如下图所示..

当用户说话时，黄色条将根据用户的音量进行动画处理。

![在此处输入图像描述](../Images/57d40b9c9f8f0770b74ee74470ffb8f5.png)

请指导我.. 有可用的参考链接吗？有没有可用的示例教程？

iPhone中的相同问题。但我想在 Android 中使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T11:27:26.940

如果您`MediaRecorder`用于录制音频，您可以使用[MediaRecorder.getMaxAmplitude](http://developer.android.com/reference/android/media/MediaRecorder.html#getMaxAmplitude%28%29)定期请求幅度。然后您可以从条形位图创建[ClipDrawable](http://developer.android.com/reference/android/graphics/drawable/ClipDrawable.html)并使用幅度来设置所需的级别。

# php - 如果有内容则显示自定义字段，如果没有则隐藏

> ID：13950843
> 
> 赞同：4
> 
> 时间：2012-12-19T10:58:29.663
> 
> 标签：php, jquery, wordpress

我正在显示这样的自定义字段：

```
<div class="blog_text">
    <img src="<?php the_field('imagen_prensa'); ?>" />
</div> 
```

我想让 img 仅在用户上传图像时出现，因为现在如果没有图像，则会出现损坏的图像符号。

我尝试了以下方法，但没有奏效：

```
<?php if (get_field('imagen_prensa') != ''): ?>
     <img src="<?php the_field('imagen_prensa'); ?>" />
<?php endif; ?> 
```

有什么可以实现的吗？

**编辑：**

这是现在使用下面答案的代码，但现在它只给出一个空白页：

```
<div id="blog_interior">

        <?php /* Start the Loop */ ?>
        <?php while ( have_posts() ) : the_post(); ?>

            <article>
            <div class="article_date"><?php the_time('d/m/Y'); ?></div>
            <h2><?php echo get_the_title(); ?></h2>
            <div class="blog_text">
                <?php if ( !empty(the_field('imagen_prensa')) ): ?>
                    <img src="<?php echo the_field('imagen_prensa'); ?>" />
                <?php endif; ?>
                <div class="video_prensa"><?php the_field('video_prensa'); ?></div>
                <?php the_content() ?>
            </div>
        </article>

        <?php endwhile; ?>    
            <div class="back">

            </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T11:00:29.740

[empty](http://php.net/manual/en/function.empty.php) empty — 确定变量是否为空

```
if (!empty(get_field('imagen_prensa'))) {
    // Display image
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T11:00:48.463

尝试使用 empty() 而不是与空字符串进行比较。

```
<?php if (empty(get_field('imagen_prensa')) === false): ?>
    <img src="<?php echo the_field('imagen_prensa'); ?>" />
<?php endif; ?> 
```

empty() 还检查类似`null`或`false`可能返回的值。`trim()`如果字段可能仅包含空格，您也可以使用字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T11:06:42.407

您忘记了实际打印 the_field('imagen_prensa') 的结果的回声。

用这个：

```
<?php if ( !empty(the_field('imagen_prensa')) ): ?>
     <img src="<?php echo the_field('imagen_prensa'); ?>" />
<?php endif; ?> 
```

我已经编辑了你的代码，看起来更合乎逻辑的东西还在它们丢失的地方添加了回声。我不习惯这些结构：

```
<?php while ( have_posts() ) : the_post(); ?> 
```

所以我实际上不确定它是否正常工作，但你可以通过用 var_dump 将它们包围来检查这些变量的输出，例如 var_dump(have_posts());

您编辑的代码：

```
<div id="blog_interior">

    <?php /* Start the Loop */ ?>
    <?php foreach( $posts as $post ): ?>

        <div class="article_date"><?php echo the_time('d/m/Y'); ?></div>
        <h2><?php echo get_the_title(); ?></h2>
        <div class="blog_text">
            <?php if ( !empty(the_field('imagen_prensa')) ): ?>
                <img src="<?php echo the_field('imagen_prensa'); ?>" />
            <?php endif; ?>
            <div class="video_prensa"><?php the_field('video_prensa'); ?></div>
            <?php echo the_content() ?>
        </div>

    <?php endforeach; ?>    
    <div class="back">

    </div>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T11:03:00.713

根据您的要求，您已将默认图像设置为用户中[没有图像](http://www.google.co.in/search?q=no%20image%20icon&hl=en&tbo=d&source=lnms&tbm=isch&sa=X&ei=Pp7RUK3NLbGfmQX_qYDYBQ&sqi=2&ved=0CAcQ_AUoAA&biw=930&bih=592)。如果用户已上传图像，则显示自己的图像。

查看此链接可能会对您有所帮助。[PHP：如果指定的图像不存在，如何显示默认图像？](https://stackoverflow.com/questions/9833282/php-how-to-display-a-default-image-if-the-specified-one-doesnt-exists)

# android - 如何从服务发送数据到接收器android

> ID：13950849
> 
> 赞同：1
> 
> 时间：2012-12-19T10:58:48.973
> 
> 标签：android, android-intent

我正在尝试将数据从服务发送到接收器这是服务的 onCreate 方法

```
Intent intent = new Intent(this, MyReceiver.class);
intent.putExtra("latitude", "2");
intent.putExtra("longitude", "3");
PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0, intent, 0);

AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), 50 * 10000, pendingIntent); 
```

这是接收的 onReceive 方法

```
Toast.makeText(context, "Repeating Alarm worked. latitude: "+intent.getStringExtra("latitude")+"  longitude "+intent.getStringExtra("latitude"), Toast.LENGTH_LONG).show(); 
```

我还有另一个运行服务的活动..问题是当我运行我的应用程序时，我从服务发送到接收器的数据为空。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:15:40.657

您可以在服务通信中使用[LocalBroadcastManager 。](http://developer.android.com/reference/android/support/v4/content/LocalBroadcastManager.html)

在您的服务中，您通过本地广播发送信息，如下例所示：[LocalBroadCastExample](http://www.intertech.com/Blog/Post/Using-LocalBroadcastManager-in-Service-to-Activity-Communications.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:13:19.903

对于额外的意图，我认为您应该将纬度和经度放在持久存储中，当您收到广播时，您可以从存储中获取它们。

# c - 从文件读入指向结构的指针

> ID：13950850
> 
> 赞同：1
> 
> 时间：2012-12-19T10:58:50.540
> 
> 标签：c, file, pointers

我需要 C 中指针的帮助。我必须从文件中读取，并用指向 struct rcftp_msg 的指针填充数组。从现在开始我做了接下来的事情：

```
struct rcftp_msg {

    uint8_t version;        
    uint8_t flags;              
    uint16_t len;       
    uint8_t buffer[512];    
};

struct rcftp_msg *windows [10];

pfile = fopen(file,"r"); // Open the file

I have to read from the file into the buffer, but I don't know how to do it.
I tried the next:

for (i = 0; i <10; i++){

leng=fread (**windows[i]->buffer**,sizeof(uint8_t),512,pfile);

} 
```

我认为**windows[i]->buffer**不好，因为它不起作用。

对不起，我的英语不好 ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:01:50.837

问题是`rcftp_msg *windows [10];`您尚未初始化的指针数组，即为其分配的内存。

要将内存分配给一个指针，您应该使用`malloc`.

像这样：

```
windows[i] = malloc(sizeof(rcftp_msg)); 
```

对数组中的每个指针执行此操作。

完成后也可用于`free()`再次释放内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:04:53.053

a`struct rcftp_msg *`是指向 a 的指针*，*`struct rcftp_msg`而不是真实的东西。因此，您还需要为真实事物分配内存。最简单的方法是*不*使用指针：

```
struct rcftp_msg windows[10];
…
for (i = 0; i <10; i++){
    len = fread (&(windows[i].buffer), sizeof(uint8_t), RCFTP_BUFLEN, pfile);
} 
```

或者在使用前分配内存。

```
struct rcftp_msg *windows[10];
…
for (i = 0; i <10; i++){
    windows[i] = malloc(sizeof(uint8_t) * RCFTP_BUFLEN);
    leng = fread(windows[i]->buffer, sizeof(uint8_t), RCFTP_BUFLEN, pfile);
} 
```

还要确保`512 >= sizeof(uint8_t) * RCFTP_BUFLEN)`.

# plone - 通过 python 以编程方式将默认 portlet 添加到内容类型

> ID：13950851
> 
> 赞同：1
> 
> 时间：2012-12-19T10:58:58.027
> 
> 标签：plone

我必须通过 python 将特定的 portlet 设置为特定的内容类型。

我正在阅读 plone.app.portlets 以了解 plone 如何制作此 TTW，但我无法弄清楚如何解决我的问题。

我无法使用 genericsetup，因为此行为与我产品的通用 configlet 中用户的选择相关联。

如何？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:27:30.467

谷歌说这可能是你的解决方案：[http](http://www.scarba05.co.uk/blog/2010/12/copy-portlets-assigned-to-one-item-to-another-programatically-in-plone/) ://www.scarba05.co.uk/blog/2010/12/copy-portlets-assigned-to-one-item-to-another-programatically-in-plone/ ： )

# mysql - phpMyAdmin “未选择数据库” MySQL

> ID：13950853
> 
> 赞同：11
> 
> 时间：2012-12-19T10:59:07.087
> 
> 标签：mysql, phpmyadmin, mamp

我下载了一个 MySQL 备份文件并立即导入到 MAMP 的 phpMyAdmin 中。我得到了这个回报：

```
Error
SQL query: 

--
-- Database: `mysql`
--
-- --------------------------------------------------------
--
-- Table structure for table `columns_priv`
--
CREATE TABLE IF NOT EXISTS  `columns_priv` (

 `Host` CHAR( 60 ) COLLATE utf8_bin NOT NULL DEFAULT  '', 
 `Db` CHAR( 64 ) COLLATE utf8_bin NOT NULL DEFAULT  '',
 `User` CHAR( 16 ) COLLATE utf8_bin NOT NULL DEFAULT  '',
 `Table_name` CHAR( 64 ) COLLATE utf8_bin NOT NULL DEFAULT  '',
 `Column_name` CHAR( 64 ) COLLATE utf8_bin NOT NULL DEFAULT  '',
 `Timestamp` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP ,
 `Column_priv` SET(  'Select',  'Insert',  'Update',  'References' ) CHARACTER SET utf8          NOT NULL DEFAULT  '',
PRIMARY KEY (  `Host` ,  `Db` ,  `User` ,  `Table_name` ,  `Column_name` )
) ENGINE = MYISAM DEFAULT CHARSET = utf8 COLLATE = utf8_bin COMMENT =  'Column      privileges';

MySQL said: 

#1046 - No database selected 
```

我根本没有更改 .sql 文件。关于如何让这只小狗在当地生活的任何提示？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T11:03:09.520

首先创建一个具有某个名称的数据库。单击该数据库，然后导入您的表。这里的问题是当您导入任何表时，它会查找您正在使用的数据库。所以，要么按照我上面所说的去做，要么在 CREATE TABLE IF NOT EXISTS 上方添加这个 `columns_priv`（

```
USE your_db_name;//here your_db_name is the database you just created. 
```

而已。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-19T11:01:22.113

在 phpMyAdmin 中创建一个新数据库或选择一个已存在的数据库。然后导入 SQL 文件。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-19T11:27:01.850

通常导出的 sql 脚本没有创建数据库语法。所以你应该创建一个数据库并手动使用

或者

在 sql 脚本的第一行中包含以下行。

```
create database database_name;
use database_name; 
```

注意：如果数据库已经存在，那么您只包括第二条语句。

现在您可以毫无错误地导入。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-13T14:16:17.430

创建数据库并在您要导入的 sql 文件中添加此 `USE db_name;`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-04T03:47:04.550

在为表结构和数据导入 SQL 之前，您需要在沙盒机器上创建和/或选择数据库。

在 phpMyAdmin 中，这意味着从侧边栏中选择一个数据库，然后使用它的导入选项卡。如果您要填写的数据库不存在，您必须首先使用创建新数据库表单来创建它。

导入后，您应该确认导出-导入过程没有影响匿名用户记录（uid 0）。

**归功于@scronide**

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-11-11T08:29:12.087

如果使用 phpmyadmin 从 sql 导出数据库，则应使用自定义方法。并选择了

> 包括数据库创建时间、最后更新时间和最后检查时间的时间戳

这个 sql 将包含

> 创建数据库 database_name; 使用数据库名称；

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-13T11:38:54.357

您只需`USE db_name;`在导出的 Sql 代码文件的开头使用即可解决问题

# git - git pull 不会从源“下载”更改的文件

> ID：13950854
> 
> 赞同：3
> 
> 时间：2012-12-19T10:59:08.443
> 
> 标签：git, git-pull

我是 git 新手。

我在 Github 上有一个存储库*[CR] 。*这个存储库*CR*由我本地机器上的两个不同的 git 目录访问 - *g01*和*g02*。两者都以*CR*为原点。在*g02 中*，我修改了两个文件（*f01*和*f02*），添加并提交了它们并执行了 git push。Github 上的仓库*CR更新成功。*

同时，在*g01*上，这两个文件（*f01*和*f02*）被修改添加并提交。当在 g01 上尝试 git pull 时，我希望来自*CR的两个修改文件（* *f01*和*f02 ）**将以*某种方式合并。相反，我收到消息：******`Already up-to-date`******

 ****g01*和*g02*上的文件*f01*和*f02*不同。*g02*符合*CR*但*g01*不符合。

 ***这种行为的原因可能是什么？******

# spring - 使用 Spring 框架的阔叶邮件发件人类

> ID：13950859
> 
> 赞同：0
> 
> 时间：2012-12-19T10:59:22.070
> 
> 标签：spring, jakarta-mail, broadleaf-commerce

这在java中是什么意思...我看到了一些新的东西，我以前从未见过这样的东西...这段代码使用spring框架javamailsender类发送邮件

```
 public MimeMessagePreparator buildMimeMessagePreparator(final HashMap<String,Object> props) {
     MimeMessagePreparator preparator = new MimeMessagePreparator() {
         public void prepare(MimeMessage mimeMessage) throws Exception {
             EmailTarget emailUser = (EmailTarget) props.get(EmailPropertyType.USER.getType());
             EmailInfo info = (EmailInfo) props.get(EmailPropertyType.INFO.getType());
             MimeMessageHelper message = new MimeMessageHelper(mimeMessage, (info.getAttachments() != null && info.getAttachments().size() > 0));
             message.setTo(emailUser.getEmailAddress());
             message.setFrom(info.getFromAddress());
             message.setSubject(info.getSubject());
             if (emailUser.getBCCAddresses() != null && emailUser.getBCCAddresses().length > 0) {
                 message.setBcc(emailUser.getBCCAddresses());
             }
             if (emailUser.getCCAddresses() != null && emailUser.getCCAddresses().length > 0) {
                 message.setCc(emailUser.getCCAddresses());
             }
             String messageBody = info.getMessageBody();
             if (messageBody == null) {                  
                 messageBody = buildMessageBody(info, props);
             }
             message.setText(messageBody, true);
             for (Attachment attachment : info.getAttachments()) {
                 ByteArrayDataSource dataSource = new ByteArrayDataSource(attachment.getData(), attachment.getMimeType());
                 message.addAttachment(attachment.getFilename(), dataSource);
             }
         }
     };  // why there is a semicolon here
     return preparator;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:11:24.697

如果您对分号感到困惑，代码将创建一个匿名内部类，它是 MimeMessagePreparator 的子类。分号是对准备变量赋值的结束。

# asp.net - 单击下一页或上一页后，MVC Paging 失去导航

> ID：13950863
> 
> 赞同：0
> 
> 时间：2012-12-19T10:59:39.647
> 
> 标签：asp.net, asp.net-mvc-3, web-applications, paging

我在 MVC 中的分页有一个奇怪的错误（至少对我来说）。我有索引页面是公司列表，并且有一个公司详细信息的链接。第一页的一切都是正确的，例如：

```
http://localhost/enterprise/company/Detail?entityid=45 
```

但是当我点击下一页或导航到其他页面时，视图公司消失了，如下

```
http://localhost/enterprise/Detail?entityid=50 
```

我不知道为什么会发生此错误。下面是我的分页代码

```
@Html.Pager(Html.PaginationViewModelFrom(Model.Nodes.GetEnumerator(), (IPaginable)Model)).QueryParam("Index").First("First Page").Last("Last Page").Next("Next Page").Previous("Previous Page").Format("List of companies {0} - {1} from total {2}").SingleFormat("{0} from {1} Companies ") 
```

任何想法表示赞赏。谢谢

# javascript - Javascript：将存储为 Uint8Array 的 PNG 渲染到没有数据 URI 的 Canvas 元素上

> ID：13950865
> 
> 赞同：24
> 
> 时间：2012-12-19T10:59:47.663
> 
> 标签：javascript, html5-canvas

我正在尝试渲染存储在 javascript 中的 PNG 图像`Uint8Array`。我最初尝试的代码如下：

```
var imgByteStr = String.fromCharCode.apply(null, this.imgBytes);

var pageImg = new Image();
pageImg.onload = function(e) {

    // Draw onto the canvas
    canvasContext.drawImage(pageImg, 0, 0);

};

// Attempt to generate the Data URI from the binary
// 3rd-party library adds toBase64() as a string function
pageImg.src="data:image/png;base64,"+encodeURIComponent(imgByteStr.toBase64()); 
```

但是，我发现由于某种原因，onload 函数从未运行（我在 chrome 中设置了断点，它根本就没有命中）。我发现如果我将 src 设置为 URL 而不是 Data URI，它可以正常工作。但是，由于一些限制，我不能直接引用图像的 URL，即必须从`UInt8Array`.

此外，为了使事情稍微复杂一点，这些图像的大小可能是兆字节。根据我的阅读，尝试将数据 URI 用于非常大的图像存在兼容性问题。正因为如此，我非常犹豫要不要使用它们。

因此，问题是*如何在不使用数据 URI 或直接引用图像 URL 的情况下将此字节数组作为 PNG 呈现到画布上下文中？*

* * *

我也尝试过使用类似下面的方法来直接使用该`putImageData`函数操作图像数据。请记住，我不是 100% 了解此功能的工作原理

```
var imgdata = canvasContext.createImageData(this.baseHeight, this.baseWidth);
var imgdatalen = imgdata.data.length;
for(var i=0; i<imgdatalen; i++) {
    imgdata.data[i] = _this.imgBytes[i];
}
canvasContext.putImageData(imgdata, 0, 0); 
```

它是从一个博客中提取的，我已经关闭了它的标签，因此对没有给予适当信任的灵感表示歉意。

* * *

另外，在慢慢地敲打这件事时，我在 Chrome 中遇到了一个错误`SECURITY_ERR: DOM Exception 18`。事实证明，一旦使用 drawImage 将图像加载到画布中，如果没有一些额外的解决方法，就无法检索它。关于该主题的[Chromium 博客文章](http://blog.chromium.org/2011/07/using-cross-domain-images-in-webgl-and.html)特别有用

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-19T19:09:08.737

如果你已经有一个 UInt8Array，你应该考虑使用`Blob`and `createObjectURL`; [`createObjectURL`](https://developer.mozilla.org/en-US/docs/DOM/window.URL.createObjectURL)分配一个特殊的 URL，允许浏览器访问内部创建的二进制数据 blob，就好像它是外部加载的文件一样。

[在受支持](http://caniuse.com/#feat=bloburls)的地方，它是`createObjectURL`大数据 URI 的绝佳替代品。您可能仍需要在 Opera、IE<10 以及除最新版本的移动浏览器之外的所有版本中使用数据 URI。

```
var myArray; //= your data in a UInt8Array
var blob = new Blob([myArray], {'type': 'image/png'});
var url = URL.createObjectURL(blob); //possibly `webkitURL` or another vendor prefix for old browsers. 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-12-19T12:07:37.853

如果您在内存中有 PNG 数据（我认为这就是您所描述的），那么您可以从中创建图像。在 HTML 中，它看起来像：

```
 <img src="data:image/png;base64,KSjs9JdldhAlisflAkshf==" /> 
```

在 JavaScript 中你也可以这样做：

```
var image = document.createElement('img');
    image.src = 'data:image/png;base64,' + base64Data; 
```

请注意，如果您没有 PNG 数据，则可以更改 MIME 类型。

然后，您可以使用或类似方法将 绘制`image`到您的画布上。`context.drawImage(image, 0, 0)`

所以剩下的部分就是把你的内容编码`Uint8Array`成 Base 64 数据。

```
var array = new Uint8Array(),
    base64Data = btoa(String.fromCharCode.apply(null, array)); 
```

该功能`btoa`不是标准的，因此某些浏览器可能不支持它。然而，似乎[大多数人都这样做](https://developer.mozilla.org/en-US/docs/DOM/window.btoa#compat-desktop)。否则，您可能会发现[我使用的一些代码](http://drewnoakes.com/fix-decoder/scripts/app/Base64.js)很有帮助。

我自己没有测试过这些！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-04-16T15:38:39.667

**完整工作示例：（**另存为 .html 文件并打开）

1：创建 Uint8Array。

2：用调试模式填充它。

3：将其粘贴到页面上的画布元素。

**输出应如下所示：**

[![在此处输入图像描述](../Images/1c9b9b52c98dc39dcf41cdd28f1c5f61.png)](https://i.stack.imgur.com/zzKKN.png)

```
<!DOCTYPE HTML >
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title> U8A_TO_CANVAS </title>
    <meta name   ="author" 
          content="John Mark Isaac Madison">
    <!-- EMAIL: J4M4I5M7@HOTMAIL.com           -->
</head>
<body>
<canvas id="CANVAS_ID" 
         width ="512" 
         height="512">
</canvas>
<script>

var com     =  4 ; //:4 components( RGBA )
var wid     = 512;
var hig     = 512;
var tot_com = wid*hig*com;//:total#components
var u8a     = new Uint8Array( tot_com );

DrawDebugPattern  ( u8a , wid, hig              );
Uint8ArrayToCanvas( u8a , wid, hig, "CANVAS_ID" );

function Uint8ArrayToCanvas( 
    u8a, //:uint8Array
    wid, //:width__of_u8a_data_in_pixels
    hig, //:height_of_u8a_data_in_pixels
    nam, //:name_id_of_canvas_on_dom
){

    //:Get Canvas:
    var can = document.getElementById( nam );
    if(!can){ throw "[FailedToGetCanvas]"; }

    //:Get Canvas's 2D Context:
    var ctx = can.getContext("2d");
    if(!ctx){ throw "[FailedToGetContext]"; }

    //:Use U8A to create image data object:    
    var UAC = new Uint8ClampedArray( u8a,wid,hig);
    var DAT = new ImageData(UAC, wid, hig);

    //:Paste Data Into Canvas:     
    var ORG_X = 0;                         
    var ORG_Y = 0;                         
    ctx.putImageData( DAT, ORG_X, ORG_Y );  
}

function DrawDebugPattern(u8a,wid,hig){

    var com     = 4      ; //:RGBA==4components.
    var tot_pix = wid*hig;//:total#pixels

    //:Calculate point in center of canvas:
    var cen_x = wid/2;
    var cen_y = hig/2;

    //:Define a circle's radius:
    var rad_c = Math.min(wid,hig) / 2;

    //:Make a pattern on array:
    var d   = 0; //:d_is_for_distance
    var ci  = 0; //:Component_Index
    var pi  = 0; //:Pixel_Index
    var px  = 0; //:Pixel_X_Coord
    var py  = 0; //:Pixel_Y_Coord
    for( pi = 0; pi < tot_pix; pi++ ){

        //:Calculate index of first component
        //:of current pixel:
        ci = pi * com;

        //:Index_To_XY_Formula:
        px =  pi    % wid ;
        py = (pi-px)/ wid ;

        //:Decide if pixel is inside circle:
        var dx = (cen_x-px); //:delta_x
        var dy = (cen_y-py); //:delta_y
        d=Math.sqrt( (dx*dx)+(dy*dy) );
        if( d < rad_c ){
            //:INSIDE_CIRCLE:
            u8a[ ci + 0 ] = 0  ; //:Red
            u8a[ ci + 1 ] = 255; //:Green
            u8a[ ci + 2 ] = 0  ; //:Blue
            u8a[ ci + 3 ] = 255; //:Alpha
        }else{
            //:OUTSIDE_CIRCLE:
            u8a[ ci + 0 ] = 0  ; //:Red
            u8a[ ci + 1 ] = 0  ; //:Green
            u8a[ ci + 2 ] = 64 ; //:Blue
            u8a[ ci + 3 ] = 255; //:Alpha
        }

    }
}
</script>
</body>
<!-- In IE: Script cannot be outside of body.  -->
</html> 
```

# wpf - 在 3D 空间中的平面上渲染 WPF 控件

> ID：13950870
> 
> 赞同：1
> 
> 时间：2012-12-19T11:00:08.010
> 
> 标签：wpf, xaml, 3d, directx

我有以下设置：我可以使用跟踪系统在 3d 空间中非常准确地跟踪表面。现在我想用投影仪在这架飞机上投影。

我想在 WPF/XAML 中开发我的界面，然后将其实时渲染到被跟踪的表面。但我不知道具体该怎么做......

这就是我的想法：我需要在 3D 空间中对跟踪表面进行建模，然后我想使用常规 WPF/XAML 控件开发界面，使用（也许）directx 将这些控件渲染为代表跟踪表面的 3D 建模。

我已经找到了将 directx 与 wpf (Sharpdx.WPF) 结合使用的信息，但在这里他们演示了如何使用 wpf 创建 3d 场景......但是，他们没有展示如何使用常规 WPF 控件并将这些控件渲染到 3d 模型.

我是否首先需要将 WPF/XAML 的用户控件转换为图像，然后将其渲染为 3d 模型，还是有其他方法可以做到这一点？

# python - Django/Python：使用正确的语言生成 pdf

> ID：13950874
> 
> 赞同：18
> 
> 时间：2012-12-19T11:00:15.763
> 
> 标签：python, django, pdf-generation, pisa, xhtml2pdf

我在我的 Django 应用程序中使用[Pisa/xhtml2pdf](http://www.xhtml2pdf.com/)从 HTML 源生成 pdf。那是：

1.  我生成了使用所有“打印”内容（例如分页符、页眉、页脚等）格式化的 HTML 文件
2.  我使用 Pisa 将此 HTML 转换为 pdf

这个过程没问题，但速度很慢（特别是在处理长表时），我必须根据比萨特性/限制使用 HTML/CSS。

问题是：这是从 Web 应用程序生成 pdf 的正确方法（即创建 HTML，然后将其转换为 pdf）还是有更直接的方法，即用更合适的语言“编写”pdf？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-19T16:26:57.863

WeasyPrint作者在这里。使用 HTML/CSS 生成 PDF（与直接使用较低级别的 PDF 库相比）的重点是获得自动布局。它允许您指定高级约束，例如`h1 { page-break-after: avoid }`并让布局引擎计算出来，而不是指定所有内容的绝对位置。当您对文档进行更改时，前者更易于维护。

像 rst2pdf 这样的一些工具有[自己的样式表语法](http://rst2pdf.ralsina.com.ar/handbook.html#stylesheet-syntax)，但这只是重新发明 CSS 的一种不好的方式。

但是，是的，转储为屏幕制作的复杂样式表可能不会产生很好的结果。最好在构建样式表时考虑到打印，或者甚至`@media print`在 CSS 或`<link media="print">`HTML 中使用完全不同的样式表。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-19T13:03:34.307

[我认为使用 Pisa 或http://weasyprint.org/](http://weasyprint.org/)等库从 html 生成 pdf是最简单的方法。因为它负责插入图像、css、条形码（在比萨上）......等

如果您想自己编写 pdf，请查看 Reportlab，但实施时间会更长。在这两种情况下，我建议始终使用 celery 或 python-rq 在后台生成 pdf 以进行优化。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-19T11:20:24.410

众所周知，比萨存在各种问题——尤其是长桌。一般来说，应该避免使用 PISA。其他选项包括：

*   直接使用 Reportlab
*   z3c.rml（Reportlab 模板语言克隆）
*   商业替代品：
    *   王子XML
    *   PDF反应器

制作 PDF 的一般规则：一分钱一分货。

像 Pisa 或 Apache FOP 这样的转换器是半生不熟的解决方案，适用于简单的情况，但总的来说很糟糕。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-20T07:32:27.383

您还可以使用 QT webkit 渲染引擎通过[http://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/)和 django-wkhtmltopdf 从 HTML 创建 PDF。

优点是您可以像通常编写 WebKit 一样编写 HTML 和 CSS。如果您要输出现有网页，这很有效，但如果从头开始生成 PDF，则可能不太合适。

# java - 从doc/pdf中提取数字证书信息

> ID：13950876
> 
> 赞同：0
> 
> 时间：2012-12-19T11:00:18.823
> 
> 标签：java, pdf, openssl

我有两个文件。一个是doc，另一个是pdf。现在，我想做的是：

1.  尝试从 doc/pdf 中提取数字证书的信息（如果存在）。
2.  核实信息。

我尝试使用 OPENSSL、CERTUTIL、JAVA、PHP、iTEXT、TCPDF 等从 doc/pdf 获取数字证书的信息。有很多方法可以签署文件或从 cert/pem 等获取信息，但是如何获取包含该特定单词/pdf文件信息的文件。

现在，我什至不知道，MS word 和 PDF 中存储的数字证书在哪里。有人对此有任何想法吗？

感谢您抽出宝贵的时间。任何意见都将成为这个新手的错误帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-19T11:59:59.040

DOC/DOCX 格式和 PDF 格式都在格式规范中定义了数字签名。您不能使用 OpenSSL 或其他类似的通用工具来验证这些格式的文档的签名。也许 iText 可以验证 PDF 签名，但我还没有看到一个库来处理文档。

我们维护的 SecureBlackbox 组件套件（即其[OfficeBlackbox](https://www.secureblackbox.com/sbb/OfficeBlackbox/)和[PDFBlackbox](https://www.secureblackbox.com/sbb/PDFBlackbox/)包）可以完全满足您的需求 - 验证数字签名、提取和验证用于在 Office（MS Office、OpenOffice/LibreOffice）和 PDF 文档中签署文档的证书。

# sql - 比较 SQL 函数中的类型时间

> ID：13950881
> 
> 赞同：2
> 
> 时间：2012-12-19T11:00:30.163
> 
> 标签：sql, sql-server-2008, tsql, sql-function

我创建了一个标量值函数，其中包含以下（***部分***）代码：

```
declare @start_time22 time(7);
select @start_time22=Courses.[Course start time] from Courses where [Course ID]=@val1 and [Course days]='monday wednesday';

if(@start_time22 is not null)
    begin
        IF (@start_time not between @start_time22 and @end_time22)
            BEGIN
                SET @Result = 1
            END
        ELSE
            BEGIN
                SET @Result = 0
            END
        IF (@end_time not between @start_time22 and @end_time22)
            BEGIN
                SET @Result = 1
            END
        ELSE
            BEGIN
                SET @Result = 0
            END
    end
else 
    begin
        set @Result = 5
    end

RETURN @Result 
```

该函数总是返回值“ **5** ”，所以我想知道我是否可以首先比较类型时间......还是我的代码有问题？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:14:01.860

大概您希望查询是：

```
select @start_time22=Courses.[Course start time]
from Courses
where [Course ID]=@val1 and [Course days] in ('monday', 'wednesday'); 
```

正如评论基本上解释的那样，当您声明一个变量时，该值将设置为 NULL。如果要将其设置为另一个值，可以使用如下语法：

```
declare @str varchar(255) = 'My favorite string' 
```

因为查询没有返回结果，所以变量永远不会被赋值。它保持为 NULL 值。

此外，您可以在查询本身中完成工作，使用`case`逻辑`select`而不是使用变量然后执行`if`逻辑：

```
select @result = (case when <whatever . . . )
from Courses
where [Course ID]=@val1 and [Course days] in ('monday', 'wednesday'); 
```

# vb.net - 发送邮件（交易失败。服务器响应为：由于策略原因中继被拒绝）

> ID：13950883
> 
> 赞同：2
> 
> 时间：2012-12-19T11:00:30.800
> 
> 标签：vb.net, lotus-domino, smtpclient

我有一个用于发送电子邮件的 Windows 应用程序。我可以为任何人发送电子邮件

一封直接到他公司的邮件**（我是用多米诺服务器发邮件的）**

例如，我可以发送到 test@landmarkgroup.com

但是当我发送到 test@hotmail.com 时出现以下错误

**交易失败。服务器响应是：由于策略原因中继被拒绝。**

这是我的代码

```
 Dim MyMailMessage As New MailMessage()

               MyMailMessage.From = New MailAddress("test@landmarkgroup.com")

               MyMailMessage.To.Add("harb.nayef@hotmail.com")
               MyMailMessage.Subject = txtSubject.Text
               MyMailMessage.Body = txtBody.Text
              Dim SMTPServer As New SmtpClient("112.12.29.62")

              SMTPServer.Port = 25

              SMTPServer.Send(MyMailMessage) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T11:26:26.813

是的，它失败了，因为 Domino 服务器已设置为不接受来自未知来源的 SMTP 中继（以避免垃圾邮件）。

联系 Domino 服务器的管理员，以便您可以将 Domino 设置为接受来自运行您的应用程序的机器（如果它们可以被唯一标识）或来自内部主机（如果是这种情况）和/或与 SMTP 帐户相结合的中继登录到 SMTP。

# serial-port - 在monkeyrunner中使用串口

> ID：13950884
> 
> 赞同：1
> 
> 时间：2012-12-19T11:00:30.707
> 
> 标签：serial-port, jython, monkeyrunner

我希望能够从 monkeyrunner 脚本中访问串行端口。我有一个单独的 python 脚本，它通过 rs232 与设备通信，我有一个驱动 Android 智能手机的 monkeyrunner 脚本。

现在。在我的 monkeyrunner 脚本中实现 python 脚本并将特定路径添加到 python 串行模块后，脚本会返回以下错误消息：

```
121219 10:40:51.630:S [main] [com.android.monkeyrunner.MonkeyRunnerOptions] Script terminated due to an exception
121219 10:40:51.630:S [main] [com.android.monkeyrunner.MonkeyRunnerOptions]Traceback (most recent call last):
  File "C:\Android\android-sdk\tools\serial_test.py", line 13, in <module>
    import serial
  File "c:\Python27\Lib\site-packages\serial\__init__.py", line 23, in <module>
    from serialjava import *
  File "c:\Python27\Lib\site-packages\serial\serialjava.py", line 35, in <module>
    comm = detect_java_comm([
  File "c:\Python27\Lib\site-packages\serial\serialjava.py", line 29, in detect_java_comm
    raise ImportError("No Java Communications API implementation found")
ImportError: No Java Communications API implementation found 
```

serial_test.py：

```
import sys
sys.path.append("c:\\Python27\\Lib\\site-packages")
import serial 
```

谷歌指出了一些网站：

从：[Java Comm API 包下载](https://stackoverflow.com/questions/8563273/java-comm-api-package-download) 通过：[http](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-misc-419423.html) ://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-misc-419423.html 到： http: [//mho.republika.pl/爪哇/通讯/](http://mho.republika.pl/java/comm/)

[我已经从http://code.google.com/p/smslib/downloads/list](http://code.google.com/p/smslib/downloads/list)下载并安装了 JavaComm

我也试过[http://rxtx.qbang.org/wiki/index.php/Using_RXTX](http://rxtx.qbang.org/wiki/index.php/Using_RXTX)

但实际上没有一个网站有可以简单工作的库。除非我搞砸了安装，但我很难相信，因为这只是复制文件的问题（显然）。据我了解，Java Comms API 包现已过时，不再受支持。官方 Oracle 常见问题解答上有相互矛盾的信息。你可以下载 java_comm_api-30u1-linux.zip，在里面你会发现自述文件说“我们不提供 linux 实现。

那么问题来了：**如何在monkeyrunner脚本中使用串口？在哪里可以找到在 monkeyrunner/jython 中使用串行端口的简单示例？**

# android - 应用程序中的 shell 命令

> ID：13950885
> 
> 赞同：-1
> 
> 时间：2012-12-19T11:00:33.973
> 
> 标签：android, adb

我想在一个 android 应用程序中使用一些 linux 命令

```
Process proc= runtime.getruntime().exec(".......") 
```

默认情况下，这是否可以在所有 android 设备上正常工作？该应用程序可以在我的手机上完美运行，但我怀疑它是否会运行所有其他应用程序，因为 dumpsys 在某些手机上似乎存在一些问题。任何有助于理解这个细节的信息都会很棒！

像拉这样的亚行命令呢？可以在应用程序中使用它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:05:36.517

看看 RootTools 库。

[http://code.google.com/p/roottools/](http://code.google.com/p/roottools/)

```
CommandCapture commands = new CommandCapture(0, /* ls -l */);
try {
    RootTools.getShell(true).add(commands).waitForFinish();
}
catch (InterruptedException e) {
    // ...
}
catch (IOException e) {
    // ...
}
catch (TimeoutException e) {
    // ...
} 
```

# maven - Gradle 无法从 Nexus maven 存储库下载工件 - 需要 401 授权

> ID：13950891
> 
> 赞同：8
> 
> 时间：2012-12-19T11:00:46.370
> 
> 标签：maven, gradle

我已将 gradle build 配置为使用我们公司的 nexus repo，但 maven 似乎无法正确授权 - 我不断收到错误，例如

```
Failed to get resource: HEAD. [HTTP HTTP/1.1 401 Authorization Required:    https://maven.gooddata.com/nexus/content/repositories/gooddata/org/codehaus/groovy/groovy-all/2.0.4/groovy-all-2.0.4.pom] 
```

奇怪的是，部署到同一个 nexus repo（通过 mavenDeployer）正在无缝地工作。

下面是与 maven repo 配置相关的构建脚本的一部分（maven_user 和 maven_password 在 ~/.gradle/gradle.properties 中定义）。

```
apply plugin: 'maven'

ext {
    repos = [
            my : "<my_repo_url>",
            my_snapshot : "<my_snapshots_repo_url>"
    ]

}

repositories {
    mavenLocal()

    maven {
        url repos.my
        credentials {
            username = maven_user
            password = maven_password
        }
    }
    maven {
        url repos.my_snapshot
        credentials {
            userName = maven_user
            password = maven_password
        }
    }

    mavenCentral()
    maven { url "http://repository.codehaus.org/" }
    maven { url "http://sardine.googlecode.com/svn/maven" }
    maven { url "http://snapshots.repository.codehaus.org" }

}

uploadArchives {
    repositories.mavenDeployer {
        repository(url : repos.my) {
            authentication(userName : maven_user, password : maven_password)
        }
        snapshotRepository(url : repos.my_snapshot) {
            authentication(userName : maven_user, password : maven_password)
        }
    }
} 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-19T12:31:25.203

您的用户名属性大写错误，您应该省略用户名和密码设置的“=”符号。将存储库定义更改为以下内容应该可以解决您的问题：

```
maven {
    url repos.my
    credentials {
        username maven_user
        password maven_password
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-25T17:32:01.187

线程现在有点老了，但只是想强调一下我在执行上述操作时遇到的一个问题.. 我的管理员创建了一个包含单引号和双引号的密码，这导致了类似的 401

# jquery - 现有 jQuery 对象的更新选项

> ID：13950897
> 
> 赞同：2
> 
> 时间：2012-12-19T11:01:09.477
> 
> 标签：jquery, twitter-bootstrap, jquery-datatables

我在我的应用程序中使用 Bootstrap 和 DataTables，并且我有一个基于类的表的默认初始化程序。我可以将类数据表添加到表中，并使用我想要的默认值对其进行实例化。

我想知道如何根据特定表更改或更新特定选项。

```
if ($.fn.dataTable) {
    $('.data-table').dataTable( {
        sDom: "R<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>",
        sPaginationType: "bootstrap",
        oLanguage: {
            "sLengthMenu": "_MENU_ &nbsp; records per page"
        },
        aoColumnDefs: [
            { "bSortable": false, "aTargets": [ 0 ] }
        ]
    });
} 
```

我所有的数据表在第一列都有一个复选框，因此上述删除排序对所有数据表都有效。但我希望能够`aoColumnDefs`逐个表更新，这样我就可以添加我不想排序的其他列。

所以假设我有一个表：`$('#member-list')`，我如何访问这个对象并在 jQuery 中更新它的数据表选项？我在任何地方都找不到任何参考或帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:17:32.767

由于您只能`aoColumnDef`在实例化`dataTable`对象时进行配置，因此我决定采用更优雅的方法并使用数据属性和附加功能来设置可排序的列。

在我的表格中，我添加`data-sort="0, 4, 8"`或任何我想要排序的特定字段。

然后我创建了一个简单的函数，将数据属性的字符串值转换为数值数组以传递给`aTargets:`.

```
function convertData (string) {
   $array = Array();
   if (string) {
      $items = string.split(',');
      $.each($items, function () {
         $array.push(parseInt(this, 10));
      });
   }
   return $array;
} 
```

现在我可以简单地遍历每个`$('.data-table')`并获取`data-sort`属性，将其传递`convertData()`给创建我的数组，然后`aTargets`在创建`dataTable`对象时将其传递给。

```
if ($.fn.dataTable) {
   $('.data-table').each(function() {
      $targets = convertData($(this).data('sort'));
      $(this).dataTable({
         sDom: "R<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>",
         sPaginationType: "bootstrap",
         oLanguage: {
            "sLengthMenu": "_MENU_ &nbsp; records per page"
         },
         aoColumnDefs: [
            { "bSortable": false, "aTargets": $targets }
         ]
      });
   });
} 
```

感谢所有试图提供帮助的人:-)

-V

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:23:16.020

**DataTables**插件有一个[别名来访问 Settings 对象](https://github.com/DataTables/DataTables/blob/master/media/js/jquery.dataTables.js#L11672)，即`dataTableSettings`. 我不知道您尝试更改哪些设置（或者即使它们都可以通过此对象写入），但我已经验证可以更改，例如，*第 n*列的可排序性：

```
`$('#member-list').dataTableSettings.aoColumns[n].bSortable = true;` 
```

# java - shiro 中的 SslFilter 不会重定向回 http

> ID：13950900
> 
> 赞同：2
> 
> 时间：2012-12-19T11:01:15.670
> 
> 标签：java, shiro

对于没有配置 SSL 的 URL，如何让 shiro 改回“http”？

目前，我的登录网址与 SSL 过滤器挂钩。

/登录 = ssl[8443],authc

当我登录时，它停留在 https，并且不会切换回 HTTP。

对于未经过 SslFilter'ized 的 URL，如何使其恢复为 HTTP？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:31:46.693

如果您使用表单身份验证，您可以通过扩展 FormAuthenticationFilter 并重定向到非 https URL 来自定义“登录时”行为。

这是一个例子：

```
package example.shiro;

import java.net.MalformedURLException;
import java.net.URL;

import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.http.HttpServletRequest;

import org.apache.shiro.authc.AuthenticationToken;
import org.apache.shiro.subject.Subject;
import org.apache.shiro.web.filter.authc.FormAuthenticationFilter;
import org.apache.shiro.web.filter.authz.PortFilter;
import org.apache.shiro.web.filter.authz.SslFilter;
import org.apache.shiro.web.util.SavedRequest;
import org.apache.shiro.web.util.WebUtils;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class AuthenticatingFilter extends FormAuthenticationFilter {

    private static Logger logger = LoggerFactory.getLogger( AuthenticatingFilter.class );

    private int port = PortFilter.DEFAULT_HTTP_PORT;

    private String indexUrl = "/";

    public void setPort( int port ) {
        this.port = port;
    }

    public void setIndexUrl( String indexUrl ) {
        this.indexUrl = indexUrl;
    }

    @Override
    protected boolean onLoginSuccess( AuthenticationToken token, Subject subject, ServletRequest request, ServletResponse response ) throws Exception {
        boolean result = true;
        String reqScheme = request.getScheme();
        if( SslFilter.HTTPS_SCHEME.equals( reqScheme ) ) {
            HttpServletRequest httpReq = null;
            if( request instanceof HttpServletRequest ) {
                httpReq = WebUtils.toHttp( request );
                String uri;
                String query;
                SavedRequest savedRequest = WebUtils.getSavedRequest( request );
                if( savedRequest == null ) {
                    uri = httpReq.getRequestURI();
                    query = httpReq.getQueryString();
                }
                else {
                    uri = savedRequest.getRequestURI();
                    query = savedRequest.getQueryString();
                }
                String redirectUrl = fromHttps( httpReq, uri, query );
                WebUtils.issueRedirect( request, response, redirectUrl, null, false );
                result = false;
            }
            else {
                if( logger.isWarnEnabled() ) {
                    logger.warn( "request is not an instance of HttpServletRequest: {}", request.getClass().toString() );
                }
                result = true;
            }
        }
        else {
            result = super.onLoginSuccess( token, subject, request, response );
        }
        return result;
    }

    private String fromHttps( HttpServletRequest request, String uri, String query ) {
        StringBuilder sb = new StringBuilder();
        try {
            URL originalURL = new URL( request.getRequestURL().toString() );
            sb.append( PortFilter.HTTP_SCHEME );
            sb.append( "://" );
            sb.append( originalURL.getHost() );
            if( originalURL.getPort() != port && port != PortFilter.DEFAULT_HTTP_PORT ) {
                sb.append( ":" );
                sb.append( port );
            }
            String path = originalURL.getPath();
            int semiPos = path.indexOf( ";" ); // if there was pathParameter data it should have been on the original request, it sometimes seems be missing from request.getPathInfo()?
            String pathParameters = "";
            if( semiPos > 0 ) {
                pathParameters = path.substring( semiPos );
            }
            semiPos = uri.indexOf( ";" ); // pathParameter data may be present on uri (from a saved request), if so, throw it away as it may be from a bookmark
            if( semiPos > 0 ) {
                uri = uri.substring( 0, semiPos );
            }
            if( uri.endsWith( getLoginUrl() ) ) {
                int loginPos = uri.indexOf( getLoginUrl() );
                String contextPath = uri.substring( 0, loginPos );
                sb.append( contextPath );
                sb.append( indexUrl );
            }
            else {
                sb.append( uri );
            }
            sb.append( pathParameters );
            if( query != null ) {
                sb.append( "?" ).append( query );
            }
            if( logger.isTraceEnabled() ) {
                logger.trace( "redirect url is : {}", sb.toString() );
            }
        }
        catch( MalformedURLException e ) {
            logger.error( "cannot construct request URL", e );
        }
        return sb.toString();
    }

} 
```

您还需要 shiro.ini 中的一些相应条目：

```
[main]       
authc = example.shiro.AuthenticatingFilter
authc.loginUrl = /somepath/login
authc.port = 8080
authc.indexUrl = /somepath/index

[urls]
/somepath/index = anon
/somepath/login = ssl[8443], authc 
```

这个提议的解决方案远非完美，但可以在我正在使用的堆栈中完成工作（shiro、jersey、tomcat），如果你能找到更好和/或更通用的解决方法，请分享它！

干杯，

JJB

# java - 如何将字符串写入代码

> ID：13950901
> 
> 赞同：-6
> 
> 时间：2012-12-19T11:01:17.230
> 
> 标签：java, eclipse

> **可能重复：**
> [将字符串转换为代码](https://stackoverflow.com/questions/935175/convert-string-to-code)
> [运行包含在字符串中的一段代码](https://stackoverflow.com/questions/4389232/run-piece-of-code-contained-in-a-string)

有没有办法将变量（字符串）变成一段代码？我的字符串必须是可变的（非静态的）如果你能简单地解释一下那就太好了：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:16:37.770

我假设您想`String`用一些 Java 语句创建一个对象并像执行方法一样执行内容。

不，这是不可能的，因为这意味着 java 是一种解释型编程语言。事实并非如此。

您可以将该行与某种类模板（在另一个字符串上）合并，将其存储到一个文件中，使用 jdk 编译它（使用`Runtime.exec 调用 javac）并使用自定义类加载器加载类，然后反映该方法并希望最好。

使用相当新的 Java Compiler API 有一种相当复杂的方法，但我想，这远远超出了您的需求。（而且必须有一些更复杂的技巧，因为 Eclipse IDE 提供了允许执行 Java 语句的视图。）

# iphone - 如何从Label中的pList中获取数据

> ID：13950903
> 
> 赞同：2
> 
> 时间：2012-12-19T11:01:38.243
> 
> 标签：iphone, ios, ios5, plist

我有一个`RegistrationController`屏幕来存储`email-id`, `password`, `DOB`,`Height`和屏幕来匹配`Weight`和 登录目的。`logininController``email-id``password`

现在，在某些`third`屏幕中，我必须仅从 登录用户的 plist 中获取 , 以将其显示在标签上。如果我将值`Height`和in存储在字符串中并在新屏幕中调用它以匹配 if匹配然后给出， ..如果它更正，那么如何从同一 plist 中获取。`Weight``email-id``password``LoginViewController``Height``Weight``Height``Weight`

如何从字符串中存储的 plist 中获取？

这是我的代码：

```
-(NSArray*)readFromPlist
 {
   NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
  NSUserDomainMask, YES); 
  NSString *documentsDirectory = [documentPaths objectAtIndex:0];
 NSString *documentPlistPath = [documentsDirectory stringByAppendingPathComponent:@"XYZ.plist"];

   NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:documentPlistPath];

   NSArray *valueArray = [dict objectForKey:@"title"];

   return valueArray;

 }

- (void)authenticateCredentials {
    NSMutableArray *plistArray = [NSMutableArray arrayWithArray:[self readFromPlist]];

    for (int i = 0; i< [plistArray count]; i++)
    {
        id object = [plistArray objectAtIndex:i];

        if ([object isKindOfClass:[NSDictionary class]]) {
            NSDictionary *objDict = (NSDictionary *)object;

            if ([[objDict objectForKey:@"pass"] isEqualToString:emailTextFeild.text] && [[objDict objectForKey:@"title"] isEqualToString:passwordTextFeild.text])
            {
                NSLog(@"Correct credentials");
                return;
            }
            NSLog(@"INCorrect credentials");
        } else {
             NSLog(@"Error! Not a dictionary");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:12:13.720

当您在登录屏幕上输入凭据以检查它何时将凭据与获取的 plist 匹配时，然后将该 plist 传递给下一个控制器。做这样的事情

```
UserViewController *controller = [[UserViewController alloc] initWithNibName:@"UserViewController" bundel:nil];
[controller setUserDictionary:yourPlistDictionary];
[self.navigationController pushViewController:controller animated:YES];
[controller release]; 
```

在 UserViewController 中，您将有一个 NSDictionary 实例来存储要显示的数据，希望对您有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:12:34.093

首先从您的 plist 文件中获取整个值，然后将其存储`NSArray`到`NSMutableArray`并使用其`objectAtIndex`和`valueForKey`属性获取值..参见下面的整个示例..

**更新 ：**

```
NSString* plistPath = [[NSBundle mainBundle] pathForResource:@"yourFileName" ofType:@"plist"];
NSArray *contentArray = [NSArray arrayWithContentsOfFile:plistPath];
NSMutableArray *yourArray = [[NSMutableArray alloc] initWithArray:contentArray];

    for (int i = 0; i< [yourArray count]; i++)
    {
        id object = [yourArray objectAtIndex:i];

        if ([object isKindOfClass:[NSDictionary class]]) {
            NSDictionary *objDict = (NSDictionary *)object;

           yourLableWeight.text = [[objDict objectForKey:@"Weight"];// set index with your requirement
         yourLableHeight.text = [[objDict objectForKey:@"Height"];

    } 
```

希望这可以帮助你...

# android - 如何在选定区域中打开相机活动

> ID：13950904
> 
> 赞同：2
> 
> 时间：2012-12-19T11:01:38.413
> 
> 标签：android, camera

每个人，我都是安卓世界的新手。所以我需要你的帮助。

我想知道我们如何在选定区域中打开相机活动。以这样的方式——

如下面的屏幕截图所示。在圆形区域中打开不是强制性的，在我的应用程序中，我可以在任何自定义区域中打开，可以是圆形、矩形或方形：

![在此处输入图像描述](../Images/e8a6c52dcb6b47b27c347c86adbc6735.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:07:26.003

你必须使用[SurfaceView](http://developer.android.com/reference/android/view/SurfaceView.html)

在此页面中，您可以看到一个示例：[SurfaceViewExample](http://android-er.blogspot.com.es/2010/12/camera-preview-on-surfaceview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:08:48.157

您需要在活动中使用表面支架和表面视图。如果您需要一些解释，请查看[Android Camera Surface View](https://stackoverflow.com/questions/10482057/android-camera-surface-view/10482872#10482872)链接，希望对您有所帮助。有任何疑问，你可以问我会尽力解释。

# jquery - 如果 x 则显示 x 如果 y 则显示 y（我知道标题不好）

> ID：13950907
> 
> 赞同：5
> 
> 时间：2012-12-19T11:01:46.420
> 
> 标签：jquery, html

`Blue`好的，所以如果选择了带有下拉菜单前缀的项目，我有一些 jQuery 代码会显示一个输入框。

代码：

```
$(function() {
    $('#text1').hide();
    $('#select2').on('change', function(event) {
        var opt = this.options[ this.selectedIndex ];
        var picked_blue = $(opt).text().match(/Blue/i);
        if(picked_blue) {
            $('#text1').show();
        } else {
            $('#text1').hide();
        }
    });
}); 
```

但是我还需要添加的是，如果选择了下拉菜单中的任何其他项目，则显示其他内容。我需要显示的是另一个项目下拉菜单。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T11:08:04.010

这不应该为你工作：

```
if(picked_blue) {
  $('#text1').show();
  $('#text2').hide();
} else {
  $('#text1').hide();
  $('#text2').show();
} 
```

在哪里`text1`和`text2`共享 DOM 中的位置，分别带有“蓝色”和“根本不是蓝色”之类的文本？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T11:04:08.693

您需要将条件放在语句的 else 部分。

```
$(function() {
    $('#text1').hide();
    $('#select2').on('change', function(event) {
        var opt = this.options[ this.selectedIndex ];
        var picked_blue = $(opt).text().match(/Blue/i);
        if(picked_blue) {
            $('#text1').show();
        } else {
            $('#text1').hide();
            if($(opt).text().match(/Red/i))
            {
                  //You code here
            }
        }
    });
}); 
```

或缩短代码。

```
$(function() {
    $('#text1').hide();
    $('#select2').on('change', function(event) {
       selectedVal = $(this).val().toLowerCase();
       switch (selectedVal){
         case 'blue':
            //Your code
            break;
          case 'red':
           //Your code
           break;
          case 'black':
            //Your code
            break;
          default:
            //your code
        }
   });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T11:04:51.230

为什么你不能尝试**在 Jquery 中使用切换功能**

```
$('#text1').toggle(); 
```

# android - 如何在相对的两侧创建滑动抽屉？

> ID：13950908
> 
> 赞同：4
> 
> 时间：2012-12-19T11:01:46.530
> 
> 标签：android, android-layout, slidingdrawer

我已经添加了代码，可以完美地从右向左滑动，但我也想从左向右滑动，所以检查布局并帮助我。这里我已经正确地提到了从右到左的布局，是否可以获得 Slider两侧的窗口我的意思是水平的左右......

```
 <?xml version="1.0" encoding="utf-8"?>
                    <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
                          android:layout_width="fill_parent"
                            android:layout_height="fill_parent">
              <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                     android:layout_width="match_parent"
       android:layout_height="match_parent"
       android:background="@drawable/bg"
         android:orientation="vertical" >
       <Button
        android:id="@+id/ship"
        android:layout_width="186dp"
        android:layout_height="23dp"
        android:layout_marginTop="49dp"
        android:background="@drawable/signup"
        android:text="Shipping Calculator"
        android:textColor="#ffffffff"
        android:layout_gravity="center"
        android:textStyle="bold" />

</LinearLayout>
<SlidingDrawer
  android:id="@+id/drawer"
  android:layout_width="match_parent"
     android:layout_height="match_parent"
  android:orientation="horizontal"
  android:handle="@+id/handle"
  android:content="@+id/content">
  <ImageView 
   android:id="@+id/handle"
   android:layout_width="wrap_content"
   android:layout_height="fill_parent" 
   android:src="@drawable/tag"/>

  <LinearLayout
      android:id="@+id/content"
      android:layout_width="wrap_content"
      android:layout_height="fill_parent"
      android:background="@drawable/slidimage"
      android:orientation="vertical"
      android:padding="10dp" >
 <TextView
            android:id="@+id/text1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginTop="15dp"
            android:layout_marginLeft="51dp"
            android:text="SIGN-UP"
            android:textColor="#000000"
            android:textSize="28dp"
            android:textStyle="bold" />

  </LinearLayout>
 </SlidingDrawer>
 <SlidingDrawer
  android:id="@+id/drawers"
  android:layout_width="match_parent"
     android:layout_height="match_parent"
   android:handle="@+id/handles"
  android:layout_gravity="left"
  android:scrollX="100dp"
  android:orientation="horizontal"
  android:content="@+id/contents">
  <ImageView 
   android:id="@+id/handles"
   android:layout_width="wrap_content"
   android:layout_height="fill_parent" 
    android:layout_gravity="left"
   android:src="@drawable/tag"/>

  <LinearLayout
      android:id="@+id/contents"
      android:layout_width="wrap_content"
      android:layout_height="fill_parent"
       android:layout_gravity="left"
      android:background="@drawable/slidimage"
      android:orientation="vertical"
      android:padding="10dp" >
 <TextView
            android:id="@+id/text1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginTop="15dp"
            android:layout_marginLeft="51dp"
            android:text="SIGN-UP"
            android:textColor="#000000"
            android:textSize="28dp"
            android:textStyle="bold" />

            </LinearLayout>
 </SlidingDrawer> 

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T06:36:36.557

我在这里得到了静态的答案，它并不完全可以创建滑动，我们不能使用 android:rotation=180 ，因为它会显示错误，因为找不到资源，我们必须以编程方式创建它。它需要在布局中添加视图。

在单面的情况下，只需使用小部件即可简单，不需要任何视图..但是当您想在多个方向滑动时需要视图。

```
<SlidingDrawer
  android:id="@+id/drawer"
  android:layout_width="match_parent"
     android:layout_height="match_parent"
  android:orientation="horizontal"
  android:handle="@+id/handle"
  android:content="@+id/content">
  <ImageView 
   android:id="@+id/handle"
   android:layout_width="wrap_content"
   android:layout_height="fill_parent" 
   android:src="@drawable/tag"/>

  <LinearLayout
      android:id="@+id/content"
      android:layout_width="wrap_content"
      android:layout_height="fill_parent"
      android:background="@drawable/slidimage"
      android:orientation="vertical"
      android:padding="10dp" >
 <TextView
            android:id="@+id/text1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginTop="15dp"
            android:layout_marginLeft="51dp"
            android:text="SIGN-UP"
            android:textColor="#000000"
            android:textSize="28dp"
            android:textStyle="bold" />

  </LinearLayout>
 </SlidingDrawer> 
```

活动.java：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.slider);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T21:00:13.817

我为 SlidingDrawer 创建了一个替换小部件，它适用于所有方向。看到[这个答案](https://stackoverflow.com/a/17605645/1516170)

# android - 自定义 ActionBarSherlock - 大小和徽标透明

> ID：13950911
> 
> 赞同：1
> 
> 时间：2012-12-19T11:01:51.690
> 
> 标签：android, actionbarsherlock

我在调整设计时遇到了很多问题`ActionBarSherlock`。而且我找不到太多信息。我分享了一些原始设计的屏幕截图和我得到的结果。

1.  如何增加 ActionBarSherlock 的大小？
2.  如何添加徽标居中和自定义大小？
3.  而且，为什么“标志透明”出现白色背景？

问候和感谢，

截图示例：

[http://i.stack.imgur.com/jJNmc.png](http://i.stack.imgur.com/jJNmc.png)

[http://i.stack.imgur.com/evb42.png](http://i.stack.imgur.com/evb42.png)

# mysql - 梦幻联赛的数据库设计

> ID：13950913
> 
> 赞同：3
> 
> 时间：2012-12-19T11:02:03.797
> 
> 标签：mysql, database-design

这是我的数据库的基本架构

```
Table user{  
      userid numeber primary key,  
      count number  
}

Table player{  
      pid number primary key,  
}

Table user-player{  
      userid number primary key foreign key(user),  
      pid number primary key foreign key(player)  
}

Table temp{  
      pid number primary key,  
      points number  
} 
```

这就是我打算做的...

*   在每场比赛之后，临时表都会更新，其中包含参加最后一场比赛的球员的 ID 和他们获得的积分。
*   接下来运行一个过程，将临时表中的 pid 与具有相同 pid 的用户播放器表的每个 uid 匹配。
*   将临时表中的点添加到每个匹配 uid 的用户表计数中。
*   空临时表。

我的问题是考虑 200 个玩家和 10000 个用户，这种方法会有效吗？我将为此使用mysql。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T12:55:47.033

人们似乎经常担心小型数据库的性能。 *让 DBMS 做它被设计做的事情。* 如果您在实践中（或者最好是在负载测试中）发现存在性能问题，请采取措施处理它。否则**不要预优化**！

不是使用临时表来存储一批玩家得分，而是**将所有玩家得分存储在事务表中。**

删除该`user.count`列并将您的`temp`表格替换为以下内容：

```
Table player_points{  
      pid number primary key,  
      match_date datetime primary key, 
      points number
} 
```

有了这个，您可以轻松计算任何用户的分数。您甚至可以重新计算任何用户在给定日期的分数。这功能更强大，维护也更简单。保留当前快照只会在出现任何问题或您的用户之一挑战他们的分数时无法管理。

此查询为您提供所有用户的分数。您可以向其添加过滤器以执行其他操作，例如查找单个用户的分数或显示排行榜。

```
select 
  U.userid as UserID
, sum(S.points) as TotalScore
from user S 
  inner join user-player J
    on S.userid = J.userid
  inner join player_points S
    on J.pid = S.pid
group by
  U.userid 
```

此查询将为您提供排行榜：

```
select 
  U.userid as UserID
, sum(S.points) as TotalScore
from user S 
  inner join user-player J
    on S.userid = J.userid
  inner join player_points S
    on J.pid = S.pid
group by
  U.userid
order by TotalScore desc
limit 10 
```

此查询将按日期为您提供授予用户的积分，例如，您可以按原样或累积地绘制这些积分。

```
select 
  S.match_date as MatchDate
, sum(S.points) as TotalScore
from user-player J
  inner join player_points S
    on J.pid = S.pid
where J.userid = 123 -- The user ID you want.
group by
  S.match_date 
order by S.match_date 
```

# c# - 将我的 C# windows 应用程序添加为 windows 中的打印机

> ID：13950914
> 
> 赞同：1
> 
> 时间：2012-12-19T11:02:03.873
> 
> 标签：c#

我是 C# 的新手。我开发了一个应用程序，可以将 postscript 文件 (.ps) 转换为 PDF、JPEG、ets 等格式。我的目的是开发一个 pdf 打印机。那么如何在 windows xp 或更高版本中将此应用程序添加为打印机。或者说当在任何 Windows 应用程序上按下 CTRL+P 时如何获取 PS 文件。

这不是网络打印机，它是需要分配给本地打印端口而不是网络端口的打印机。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T11:05:28.653

你在问，如何用 C# 制作虚拟打印机，一个很好的问题，也很简单，你可以使用一个叫做： - Virtual Printer Port Redirection 的东西，你可以看到以下问题和文章，它们与你的：

[在 .NET 中编写虚拟打印机](https://stackoverflow.com/questions/257768/writing-a-virtual-printer-in-net)

[配置虚拟打印机端口重定向](https://stackoverflow.com/questions/10403805/configure-virtual-printer-port-redirection)

[http://msdn.microsoft.com/en-us/library/windows/hardware/br259124](http://msdn.microsoft.com/en-us/library/windows/hardware/br259124)

# android - Android WebView 和具有不同 UserAgent 的默认浏览器

> ID：13950916
> 
> 赞同：3
> 
> 时间：2012-12-19T11:02:11.320
> 
> 标签：android, webview, android-webview

由于某些原因，在几个 android 设备上，我从浏览器和我的应用程序的 WebView 获得了不同的用户代理。

我已经使用这行代码在应用程序中获取 UA：

```
new WebView(this).getSettings().getUserAgentString(); 
```

这是有区别的部分

应用程序重新运行：

> HTC One X 构建

当浏览器返回时：

> HTC_One_X 构建

注意浏览器版本中的下划线。

任何想法是什么导致了差异？

发送！

# html - 在 Chrome 中，当字符串包含 & 时，它的表格单元格会变大

> ID：13950918
> 
> 赞同：0
> 
> 时间：2012-12-19T11:02:28.683
> 
> 标签：html, css, google-chrome

我在表 td 中显示了一个 URL 列表（取自数据库）。td 元素宽度是固定的。每个 URL 都显示在这个 td 中的 li 中。

在 Firefox 和 IE 中，URL 的字符无关紧要。当 URL 长于 div 宽度时，浏览器会将其剪切并显示在下一行中。这是预期的行为。

Chrome 做到了，但并非在所有情况下都能做到。当 URL 有一长串由 '&' 连接的字符时，它不会剪切它，从而扩展 div 宽度。此类 URL 的示例：

```
http://www.test.com/cgi-bin/test/test/test.cgi?lang=e&extra=&year=2009&month=09&day=25&vol=13&no=39&gn=5959&header=1&part=0&df=1&nt=gn&acurrentpage=12&agree=1&newfile=1 
```

问题是什么？

我会尝试在这里放一些 css 代码（有很多，我希望我写所有与问题相关的东西），所以你可以考虑一下：

```
body, div, dl, dt, dd, ul, ol, li, h1, h2, h3, h4, h5, h6, pre, form, fieldset, input, select, textarea, p, blockquote, th, td {
    margin: 0;
    padding: 0;
}
#contentInner {
    background: none repeat scroll 0 0 #40545F;
    margin-bottom: 30px;
    width: 988px;
}
element.style {
    display: table;
}
.ventana table {
    color: #40545F;
    font-size: 12px;
    margin: 8px;
    width: 885px;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
}
.ventana td {
    background: none repeat scroll 0 0 #E0E4EA;
    border-bottom: 1px solid #FFFFFF;
    padding: 8px;
    vertical-align: top;
}
ul {
    list-style: none outside none;
}
p, li {
    font-size: 1.1em;
    line-height: 1.3em;
} 
```

我的表格位于一个名为“contentInner”的 div 中，它的宽度是固定的。

这是我的 HTML：

```
<div id="contentWrapper">       

            <table class="detectionTable" cellspacing="0" cellpadding="0">
                    <tr>
                        <th colspan="2">URLs found</th>
                    </tr>
                    <c:if test="${not empty URLs}">
                        <tr>
                            <td class="col21">URLs</td>
                            <td class="col22">
                                <ul>
                                <li>http://test.eu/test/test.do?uri=OJL.PDF</li>
                                <li>http://www.test.com/cgi-bin/test/test/test.cgi?lang=e&extra=&year=2009&month=09&day=25&vol=13&no=39&gn=5959&header=1&part=0&df=1&nt=gn&acurrentpage=12&agree=1&newfile=1</li>
                                </ul>                                                               
                            </td>
                        </tr>
                    </c:if> 
            </table>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T11:08:15.947

尝试

```
word-wrap: break-word; 
```

在你的 CSS

[http://webdesignerwall.com/tutorials/word-wrap-force-text-to-wrap](http://webdesignerwall.com/tutorials/word-wrap-force-text-to-wrap)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:06:15.937

该问题是由浏览器中不同的换行行为引起的。这是一个真正的混乱，但它可以通过[不同的方式](http://www.cs.tut.fi/~jkorpela/html/nobr.html)来控制。最简单的方法是`word-wrap: break-word`@yunzen 建议的。但这意味着任何地方都允许休息。

为了文本中 URL 的可读性，中断应该只在某些点进行，例如在“&”之后 （默认情况下，现代版本的 Firefox 会中断）。为此，您需要插入允许换行的标签或特殊字符。这有点复杂，但如果您可以忽略 IE 6 等旧 IE 版本，则使用零宽度空格字符效果很好。（如果 IE 6 是相关的，你需要一个技巧，比如`<wbr><a class="wbr"></a>`带有样式表的标签`.wbr:after { content: "\00200B"; }`，所以它会变脏。

示例，首先显示最小情况下的问题，然后是简单的“break any”方法，最后是添加换行权限的方法：

```
<style>
div { border: solid; width: 25em;  }
</style>
<div>
http://www.test.com/cgi-bin/test/test/test.cgi?lang=e&amp;extra=&amp;year=2009&amp;month=09&amp;day=25&amp;vol=13&amp;no=39&amp;gn=5959&amp;header=1&amp;part=0&amp;df=1&amp;nt=gn&amp;acurrentpage=12&amp;agree=1&amp;newfile=1
</div>
<hr>
With word-wrap: break-word:
<div style="word-wrap: break-word;">
http://www.test.com/cgi-bin/test/test/test.cgi?lang=e&amp;extra=&amp;year=2009&amp;month=09&amp;day=25&amp;vol=13&amp;no=39&amp;gn=5959&amp;header=1&amp;part=0&amp;df=1&amp;nt=gn&amp;acurrentpage=12&amp;agree=1&amp;newfile=1
</div>
<hr>
With ZWSP:
<div>
http://www.test.com/cgi-bin/test/test/test.cgi?lang=e&amp;&#x200b;extra=&amp;&#x200b;year=2009&amp;&#x200b;month=09&amp;&#x200b;day=25&amp;&#x200b;vol=13&amp;&#x200b;no=39&amp;&#x200b;gn=5959&amp;&#x200b;header=1&amp;&#x200b;part=0&amp;&#x200b;df=1&amp;&#x200b;nt=gn&amp;&#x200b;acurrentpage=12&amp;&#x200b;agree=1&amp;&#x200b;newfile=1
</div> 
```

（使用`&amp;`而不是plain`&`是正确的做法，即使它会掩盖HTML 源代码。但这只是原则问题，不会影响手头的问题。）

# java - 如何为我的 java 应用程序模拟条码扫描器？

> ID：13950919
> 
> 赞同：2
> 
> 时间：2012-12-19T11:02:35.940
> 
> 标签：java, barcode

我创建了一个 Java 应用程序并想在我的 Java 应用程序中使用条形码扫描仪。
但没有设备 Barcode Scanner
如何模拟 Barcode Scanner 来测试我的 Java 应用程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T11:09:00.667

这实际上取决于您希望扫描仪以后如何连接到系统。

有些扫描仪只使用键盘仿真。在这种情况下，您无需执行任何操作（只需确保在需要输入条形码时正确的输入框处于活动状态）。

其他扫描仪通过串行端口仿真连接到系统（例如，有用于 Symbol/Motorola 和 Datalogic 枪扫描仪的 USB 到串行驱动程序）。在这种情况下，您可以在 Java 中打开串行端口并将扫描仪输入作为串行数据。要模拟这一点，您必须使用交叉 RS232 电缆将您的 PC 连接到另一台 PC，然后可以使用 Hyperterminal/Putty/[Linux 或其他操作系统上的任何内容] 通过串行电缆将数据发送到您的 PC .

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-19T11:05:31.087

如果您从控制台运行应用程序，

```
Scanner scan = new Scanner(System.in);
String barcode = scan.nextLine(); 
```

否则，只需将您的条形码传递给`main`方法 args。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-10T16:01:27.317

我也有类似的需求，并在 GitHub 上找到了[条形码模拟器](https://github.com/mroach/barcode-simulator)项目。它涵盖了评论中提出的部分问题，至少在初始测试中是这样。

不过，没有什么比得上真正的交易了。期望真实用户和真实扫描仪的混合会在您的应用程序中发现意想不到的漏洞。

向您的客户提供非常清晰的输入：

*   当用户光标在正确的字段中时，它会改变颜色并显示类似“等待扫描”的消息，
*   清晰快速地显示扫描是否有效，
*   使重新扫描变得微不足道。

如果您的用户清楚成功之路是什么样的，那么它应该是好的。

# javascript - 使用 JavaScript 访问“发布”数据或检查使用哪个提交按钮提交表单

> ID：13950921
> 
> 赞同：12
> 
> 时间：2012-12-19T11:02:40.883
> 
> 标签：javascript, html, ajax

考虑一个带有 2 个提交按钮的简单表单

```
<form method="post">
 <button type="submit" name="command" value="cancel">Cancel Order</button>
 <button type="submit" name="command" value="proceed">Save Order</button>
</form> 
```

提交后，服务器将通过检查`command`. 伟大的！

在这种情况下，我使用`onsubmit`表单的事件处理程序来预处理并通过 AJAX 发送表单数据。像这样：`<form method="post" onsubmit="return ajaxSubmit(this);">`

我使用这个`ajaxSubmit`函数作为检查任何提供的表单元素并通过 Ajax 发送数据的通用方法。这可以很好地确定文本字段的值，如果复选框被“选中”，在组中选择了哪个收音机等等。它似乎唯一出错的事情（因为我不确定如何检查这个）是哪个提交按钮用于提交表单。即，没有任何内容`myForm["command"]`可以说明实际使用了 2 个命令按钮中的哪一个。

相反，有没有办法访问服务器在发送之前使用 JavaScript 接收的相同“发布”数据？

否则，这只是我需要解决的缺陷吗？最好的方法是什么？

**编辑：** 由于所有现代浏览器都会传递用于提交表单的按钮的名称/值（以及其他相关部分，例如从组中选择哪个选项、选中的复选框名称/值等），任何人都可以解释为什么存在在发送到服务器之前没有办法直接访问这些数据吗？我们不能这样做有什么理由吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-19T11:04:18.600

> 相反，有没有办法访问服务器在发送之前使用 JavaScript 接收的相同“发布”数据？

不是那个确切的数据，不。

知道哪个`submit`按钮被按下的常用方法是（不幸的是）将`click`处理程序附加到按钮并让它们设置一个变量（或`hidden`字段的值），然后您可以检查您的`submit`事件处理程序。

由于您使用的是旧式 DOM0 事件处理程序属性，因此该`hidden`字段可能更适合您正在执行的操作：

```
<form method="post">
 <input type="hidden" name="submitclicked" value="">
 <button type="submit" name="command" value="cancel" onclick="submitClick(this);">Cancel Order</button>
 <button type="submit" name="command" value="proceed" onclick="submitClick(this);">Save Order</button>
</form> 
```

...`submitClick`看起来像这样：

```
function submitClick(button) {
    button.form.submitclicked.value = button.value;
} 
```

...但我确实建议考虑使用 DOM2 样式的事件处理程序，或者至少在代码块中附加 DOM0 处理程序，因为您可以避免创建全局函数、共享数据而不创建全局变量等。

* * *

为了清楚起见，您不必为`onclick`每个元素指定一个属性，我在上面这样做的唯一原因是因为您使用的是 DOM0 处理程序。

处理它的更好方法是使用事件冒泡。由于`click`事件从其后代控件（包括提交按钮）冒泡到表单，因此您可以将事件挂接到表单上，然后查看它是否发生在提交按钮上，如果是，那么该按钮`value`是什么。

例如，这里有一个动态附加到表单的 DOM0 处理程序，它将提醒单击的提交按钮的值：

```
var form = document.getElementById("theForm");
form.onclick = function(e) {
  // Get the event
  e = e || window.event;

  // Did it originate in an input[type=submit]?
  if (e.target.tagName === "INPUT" &&
      e.target.type === "submit") {
    // Yes
    alert(e.target.value);
  }
}; 
```

[实例](http://jsbin.com/ucoboq/1)| [资源](http://jsbin.com/ucoboq/1/edit)

或者在任何现代浏览器上使用 DOM2 处理程序（不是 IE8 或更早版本，但很容易添加`attachEvent`这些处理程序，它的作用大致相同`addEventListener`[并早于它]）：

```
document.getElementById("theForm").addEventListener("click", function(e) {
  // Did it originate in an input[type=submit]?
  if (e.target.tagName === "INPUT" &&
      e.target.type === "submit") {
    // Yes
    alert(e.target.value);
  }
}, false); 
```

[实例](http://jsbin.com/ucoboq/2)| [资源](http://jsbin.com/ucoboq/2/edit)

或者使用一个库来使它更容易（这里是 jQuery，但大多数都有这个功能，称为*事件委托*）：

```
$("#theForm").delegate("input[type=submit]", "click", function() {
  alert(this.value);
  return false;
}); 
```

[实例](http://jsbin.com/ucoboq/3)| [来源](http://jsbin.com/ucoboq/3/edit)（我使用[`delegate`](http://api.jquery.com/delegate)那里是因为我喜欢清晰；使用最新版本的 jQuery，您*可以*使用 hyper-overloaded [`on`](http://api.jquery.com/on)，但不太清楚。如果您选择，请注意参数的顺序不同。）

这里的重点是它并不复杂、困难或特别麻烦。

重新编辑您的结束问题：

> ...谁能解释为什么在发送到服务器之前无法直接访问这些数据？

可能不是，不。重要的是要了解很多这些东西刚刚进化。与表单一起发送的提交按钮的值是 HTML 的东西，显然在执行 DOM HTML 表单模块时，任何人都没有想到“嘿，我们应该在表单上有一个仅在表单期间存在的属性提交事件，告诉您提交表单的内容。” 它可能*应该*发生在某人身上，但显然，它没有。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-29T02:52:16.890

另一种解决方案是使用单选按钮而不是提交按钮（不过，您必须将单选按钮设计为看起来像按钮）。

提交后，该字段的值应该是被点击的那个。您可以使用 jQuery 获取选定的选项`$("[name=command]:selected]")`，或者`$("#theForm").serialize()`

```
<form method="post" onsubmit="return ajaxSubmit(this);" id="theForm">
 <input type="radio" name="command" value="cancel" id="cancel" onClick="document.getElementById('theForm').submit();">
 <label for="cancel">Cancel Order</label>

 <input type="radio" name="command" value="proceed" id="proceed" onClick="document.getElementById('theForm').submit();">
 <label for="proceed">Save Order</label>
</form> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-29T02:37:23.210

我认为你可以通过删除另一个按钮来解决这个问题，那个没有被点击的按钮。之后，您可以运行 jQuery 的 serialize()，或者通过任何其他方式访问留下的按钮的值。

代码将是：

```
<form method="post">
 <button type="submit" id=cancel name="command" value="cancel" onclick="document.getElementByid('submit').remove();submitClick(this);">Cancel Order</button>
 <button type="submit" id=submit name="command" value="proceed" onclick="document.getElementByid('cancel').remove();submitClick(this);">Save Order</button>
</form> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T05:17:23.753

一切都是合理的，但是如果您要在所有提交按钮上附加点击处理程序，那么通过提交功能的箍来管理您的提交细节就没有多大意义了。

只需让点击处理程序触发表单提交，同时将足够的上下文信息传递给组合。等等，点击处理程序通常已经告诉你点击的来源（有你的上下文信息），尤其是在使用一些 jQuery-ish 框架的情况下。

所以而不是：

```
<form onsubmit="doSubmit()" ...>
<input type="submit" onclick="updateSourceTo('cancel');" ... />
<input type="submit" onclick="updateSourceTo('submit');" ... /> 
```

利用：

```
<form ...>
<input type="button" onclick="doSubmit('cancel');" ... />
<input type="button" onclick="doSubmit('submit');" ... /> 
```

或者，如果您将通过查看点击事件目标来检测源：

```
<form ...>
<input type="button" onclick="handleSubmitButtonClick();" ... />
<input type="button" onclick="handleSubmitButtonClick();" ... /> 
```

对于 handleSubmitButtonClick 的细节，我应该提到[form.submit()](http://www.w3schools.com/jsref/met_form_submit.asp)和 jQuery 的[event.target](http://api.jquery.com/event.target/)之类的东西。

我承认保持提交时提交范式促进了某种纯粹的表单处理，但 IMO 你已经通过使用两个提交按钮进入了非纯粹的领域。

# installation - wix 或 installshield 用于 asp.net 应用程序安装程序？

> ID：13950922
> 
> 赞同：1
> 
> 时间：2012-12-19T11:02:46.763
> 
> 标签：installation, wix, installshield

为 asp.net 应用程序创建安装程序的最佳工具是什么？我的目标是：

1.  在 iisexpress 上安装 asp.net 应用程序
2.  安装 sqlexpress（作为先决条件）
3.  为我的应用程序配置 IIS
4.  恢复sqlserver上的数据

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T12:28:28.510

两者都可以解决问题，因此取决于您的需求是什么，以及它们如何相互叠加

### 安装盾牌

*   将比 WiX 更多地指导您完成整个过程，因此会让您更快地起步

*   内置了与 IIS、SQL 和许多其他来源对话的功能

*   具有用于安装许多先决条件的内置功能，例如 .NET。我相信支持将 sqlexpress 安装为先决条件。

*   可以针对 InstallScript、MSI 或两者的混合

### 维克斯

*   是免费和开源的。

*   在组织代码方面更加灵活。它使用类似于 InstallShield 的 XML，但与 InstallShield 不同的是，您可以完全控制代码的组织方式，并且通常更容易在源代码控制系统中比较和合并代码。

*   非常可扩展 - 您可以通过 WixExtensions 挂钩到编译器机制

*   具有通过自定义操作和语法扩展与 IIS 和 SQL 对话的功能

*   附带 Burn，一个灵活而强大的引导程序，安装 chainer 和安装主机。这可以为您处理您的先决条件安装，甚至托管您的 UI。

### 结论

就个人而言，我建议学习 WiX——随着时间的推移，大型项目的代码更容易管理，而且由于它的可扩展性，你不太可能遇到无法完成工作的砖墙。

但是，您需要更长的时间才能起步，因为您必须比使用 InstallShield 更深入地了解正在发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T14:49:38.160

我目前正在将项目从各种版本的 InstallShield 迁移到 Wix。您需要在 Wix 上投入更多精力，但从长远来看，这是值得的。我发现 InstallShield 的问题是它的许可相对昂贵，一旦你开始使用它，你就会着迷于支付更多的钱来升级它或获得最新版本，因为最后使用它的人已经不在了，许可证密钥误入歧途，无论如何都没有足够的许可证密钥，曾经工作的许可证密钥由于某种奇怪的原因不再起作用......等等，等等。没有最新且正常工作的许可证密钥，InstallShield 将无法工作.

因为安装项目不是我们一直使用的东西，但是当我们使用它时，我们需要它来工作，所以我决定放弃 InstallShield 以获得更可靠的东西（在许可方面）。

# jquery - 错误：SYNTAX_ERR：DOM 异常 12

> ID：13950930
> 
> 赞同：3
> 
> 时间：2012-12-19T11:03:07.920
> 
> 标签：jquery, html, webkit, domexception

我收到错误“错误：SYNTAX_ERR：DOM Exception 12”，代码如下：

```
var html = '<table><tr><td></td><td><input type="text" name="textArea" value="some text" /></td></tr></table>';
$(this.propertyContainer).html(html) 
```

但**不适用**于此代码：

```
$(this.propertyContainer).html('<table><tr><td></td><td><input type="text" name="textArea" value="some text" /></td></tr></table>') 
```

这是propertyContainer的html：

```
<div xmlns="http://www.w3.org/1999/xhtml" class="property-grid" style="position: absolute; top: 35px; left: 0px;" id="ext-gen126"></div> 
```

你有什么主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:30:17.000

我找到了。我忘记了输入标签末尾的字符“/”...

我想这是因为 dtd：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus SVG 1.1//EN"
"http://www.w3.org/2002/04/xhtml-math-svg/xhtml-math-svg.dtd"
> 
```

对不起……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:13:14.083

这里没有错误：http: [//jsfiddle.net/PA4Eg/](http://jsfiddle.net/PA4Eg/)

我猜可能的错误与上下文有关（的含义`this`）。

来源：

```
var obj = {
        propertyContainer: document.getElementById('ext-gen126')
    },
    html = '<table><tr><td></td><td><input type="text" name="textArea" value="some text" /></td></tr></table>';

$(obj.propertyContainer).html(html);
​ 
```

在下面的示例中，我的来源是相同的：

```
var obj = {
        propertyContainer: document.getElementById('ext-gen126')
    },
    html = '<table><tr><td></td><td><input type="text" name="textArea" value="some text" /></td></tr></table>';

setHtml.call(obj, html);

function setHtml(html) {
    $(this.propertyContainer).html(html);
}
​ 
```

我使用函数来设置给定 div 的 HTML 内容。对于这个函数，我`obj`用作上下文。它再次起作用。我希望你能通过将它与上面的代码进行比较来修复你的代码。

# c# - 在数据表c#上使用查询表达式没有得到预期的数据

> ID：13950933
> 
> 赞同：2
> 
> 时间：2012-12-19T11:03:19.383
> 
> 标签：c#, linq, datatable

我想创建一个排序的用户列表，这些用户出现在一个数据表“StatsTable”中。

我需要从 StatsTable 中获取用户 ID，然后使用它在另一个数据表“UserTable”中查找用户名。当我有这些时，我想让 userID 成为 Key 并且 UserName 成为排序列表中的 Value。

我设法获取了用户 ID 并将其添加到排序列表中，但用户名以“System.Data.EnumerableRowCollection`1[System.String]”的形式出现。

我究竟做错了什么？谢谢你的帮助。

```
 SortedList UserList = new SortedList();

    List<double> listofUserIDs = StatsTable.AsEnumerable()
    .Select(uid => uid.Field<double>("UserID")).ToList<double>();
    foreach (double UID in listofUserIDs)
    {
        string userName = UserTable.AsEnumerable()
            .Where(id => double.Equals(id.Field<double>("UserID"), UID))
        .Select(name => name.Field<string>("First_Name") + " " + name.Field<string>("Last_Name")).ToString();

         UserList[UID] = userName;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T11:09:11.197

首先，我会避免使用`double`任何需要平等的东西。字符串、GUID 和整数都适用于 ID - 双精度数，不是那么多。

其次，我会将所有这些都作为 LINQ 中的一个连接来完成——你真的不需要每次都迭代每一个项目。您正在将 O(N+M) 操作转换为 O(N + M * N) 操作。

第三，您的查询不起作用的原因是您只是投影到*一系列*字符串。你可能碰巧知道会有一个匹配，但你需要告诉计算机。调用`ToString()`一个序列不会给你任何有用的东西。例如，您可以使用`Single()`or `SingleOrDefault()`：

```
string userName = UserTable.AsEnumerable()
    .Where(id => double.Equals(id.Field<double>("UserID"), UID))
    .Select(name => name.Field<string>("First_Name") + " "
                  + name.Field<string>("Last_Name"))
    .Single(); 
```

一旦你使用`Single()`（或任何其他返回单个值的调用）你根本不需要`ToString()`，因为结果已经是一个字符串。

使用`Single()`，如果不完全是一个结果，将引发异常。使用`SingleOrDefault()`，如果有多个结果，仍然会抛出异常，但如果没有结果，你只会得到一个`null`引用。如果只有一个结果以外的任何内容都是错误的，则应使用`Single()`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T11:14:33.087

您应该使用`Enumerable.Join`链接两个表并选择您需要的内容。在这种情况下，我会使用 a`Tuple<int, string>`而 the`int`是 UserID（带有小数位的 UserID 没有意义，是吗？）并且字符串是用户名：

```
var query = from rStats in StatsTable.AsEnumerable()
            join rUser in UserTable.AsEnumerable()
            on rStats.Field<int>("UserID") equals rUser.Field<int>("UserID")
            select new {
                UserID   = rStats.Field<int>("UserID"), 
                UserName = string.Format("{0} {1}"
                               , rUser.Field<string>("First_Name")
                               , rUser.Field<string>("Last_Name"))
            };

List<Tuple<int, string>> users = query
    .OrderBy(u => u.UserName)
    .Select(u => Tuple.Create(u.UserID, u.UserName))
    .ToList(); 
```

您可以通过`Item`属性访问元组：

```
foreach(var user in users)
    Console.WriteLine("UserID:{0} UserName:{1}",user.Item1,user.Item2); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T11:09:13.973

这是因为您正在使用`.AsEnumerable()`which 返回通常返回列表的类型的源。您可以使用 ) 将其作为列表返回`.ToList<string>(`并选择第一条记录，也可以使用`FirstOrDefault()`; 而不是`.ToList<string>()`返回第一条记录。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T11:07:53.413

代码应如下所示：

```
SortedList UserList = new SortedList();

List<double> listofUserIDs = StatsTable.AsEnumerable()
.Select(uid => uid.Field<double>("UserID")).ToList<double>();
foreach (double UID in listofUserIDs)
{
    string userName = UserTable.AsEnumerable()
        .Where(id => double.Equals(id.Field<double>("UserID"), UID))
    .Select(name => name.Field<string>("First_Name") + " " + name.Field<string>("Last_Name")).FirstOrDefault().ToString();

     UserList[UID] = userName;
} 
```

你应该添加`FirstOrDefault()`before `ToString()`，因为 select 会给你一个新的枚举，而不是一个对象！。

# xslt - 我可以使用参数来定义 xsl:key 吗？

> ID：13950935
> 
> 赞同：0
> 
> 时间：2012-12-19T11:03:23.800
> 
> 标签：xslt, key, grouping

我想定义一个 xsl:key 进行分组。但我希望它是通用的，以便我可以传递参数。这有可能吗？我想要这样的东西：

```
<xsl:key name="key1" match="$matchnode" use="$usenode" /> 
```

但它不起作用。我可以获得相同的行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:30:17.193

在 XSLT 1.0 中，模式不能引用全局变量；在 XSLT 2.0 中他们可以。所以在 2.0 中你可以使用

```
match="*[name()=$matchnode]" 
```

假设这是您的假设语法的预期含义。同样，您可以使用

```
use="*[name=$usenode]" 
```

当然，这不是完全通用的，因为它要求 use 表达式是子元素；例如，它不允许属性。要使其完全动态化，您将需要一个扩展，例如 saxon:evaluate()，它允许在运行时从字符串构造 XPath 表达式。

# django - Django Dynamic Formset：提交值未克隆

> ID：13950936
> 
> 赞同：1
> 
> 时间：2012-12-19T11:03:25.160
> 
> 标签：django, button, dynamic, submit, formset

我正在尝试使用[django-dynamic-formset](http://code.google.com/p/django-dynamic-formset/)库将表单动态添加到表单集中。该库很好地克隆了表单，但由于某种原因它无法克隆输入的`value`属性。`submit`

以下是我正在使用的表单集`django-dynamic-formset`。

```
{% if eduforms %}
    {% for form in eduforms.forms %}
    <div class="formset-form">
        <form id="{{ form.prefix }}" method="POST">
            <h4>Add a Project</h4>
            {% csrf_token %}
            {{ form.as_p }}
            <div class="button-container right">
                <input class="button" type="Submit" value="Update Information" />
            </div>
        </form>
        <script type="text/javascript">
            jQuery(document).ready ( function(){
                jQuery('{{ form.prefix }}').validationEngine();
            });
        </script>
        <div class="clearfix"></div>
    </div>
    {% endfor %}
{% endif %} 
```

我尝试将函数绑定到 div#`formset-form`容器，如下所示。

```
<script type="text/javascript" src="/static/js/jquery.formset.js"></script>                                                                            
<script type="text/javascript">
    $('.formset-form').formset();
</script> 
```

我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:35:49.007

您需要做的就是使用`keepFieldValues`您正在使用的 jquery 插件的选项，它也会克隆值。所以改变：

```
<script type="text/javascript">
    $('.formset-form').formset();
</script> 
```

到

```
<script type="text/javascript">
    $('.formset-form').formset({
        keepFieldValues : 'input:submit',
    });
</script> 
```

# c++ - 从 POSIX 上的 errno 和 Windows 上的 GetLastError() 构造 std::error_code

> ID：13950938
> 
> 赞同：25
> 
> 时间：2012-12-19T11:03:26.417
> 
> 标签：c++, c++11

我的问题：从POSIX 和 Windows 上的值构造`std::error_code`实例的正确方法是什么，以便可以将实例与来自的众所周知的值进行比较？`errno``GetLastError()``std::errc`

更长的解释：我的目标是将一个`std::error_code`实例添加到一个自制的异常对象中，该对象以 C++11 的方式在 POSIX 和 Windows 系统上工作。

在我的跨平台应用程序中，我使用了一个自制的 I/O 类层次结构，该层次结构使用 POSIX`fopen()`和 Windows`CreateFile()`调用来打开/创建文件。如果失败，则会抛出一个通用的自制`open_error`异常（它是从 派生的`std::exception`，是的，但它不是 C++ 的预定义异常类之一）。我正在尝试使用错误代码扩展这个相当简单的异常；`std::error_code`如果我理解正确的话，更准确地说是 C++11 。

我的问题是如何从`errno`（在 POSIX 情况下）或`GetLastError()`（在 Windows 情况下）构造这样的对象。对于 POSIX，据我所知，我可以简单地使用`errno`in`std::error_code`的构造函数，例如：

```
std::error_code ec(errno, std::generic_category()); 
```

这`ec`应该与`std::errc`.

对于 Windows，当然可以进行类似的调用：

```
std::error_code ec(::GetLastError(), std::generic_category()); 
```

但我不确定 map 返回的值是否`GetLastError()`很好地映射到`std::errc`. 我[在 Boost 的系统库](http://www.boost.org/doc/libs/1_52_0/boost/system/windows_error.hpp)中读到了他们*为 Boost 的实现`error_code`*所做的工作，但我问的是`std`实现，而不是 Boost。

请不要建议切换到使用 C++ 流进行文件访问。我很乐意，但目前我不想重构我的一半代码。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T11:21:54.003

这是实施质量问题。`std::system_category()`依赖于返回的 const 静态对象来执行从平台原生错误代码枚举到标准`std::error_condition`枚举的映射。在**17.6.5.14 错误代码值 [value.error.codes]**下：

> 鼓励不基于 POSIX 的操作系统的实现定义与操作系统值相同的值。

您可以在[http://www.boost.org/doc/libs/1_46_1/libs/system/src/error_code.cpp](http://www.boost.org/doc/libs/1_46_1/libs/system/src/error_code.cpp)中看到 Boost 如何执行映射；您的编译器供应商提供的用于 Windows 的任何标准库都应该执行类似的操作。

19.5.1.5p4 中涵盖了预期的行为，描述`system_category().default_error_condition(int ev)`：

> 如果参数`ev`对应于 POSIX errno 值`posv`，则函数应返回`error_condition(posv, generic_category())`。否则，函数应返回`error_condition(ev, system_category())`。

因此，例如，`error_code(ERROR_FILE_NOT_FOUND, std::system_category()).default_error_condition()`将调用`std::system_category().default_error_condition(ERROR_FILE_NOT_FOUND)`，它应该返回`std::error_condition(std::no_such_file_or_directory, std::generic_category())`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-07-13T13:59:36.050

这是一个老问题，但我还没有真正找到一个好的答案。接受的答案让我有点困惑，因为它似乎给出了一个`error_condition`而不是一个`error_code`. 我在 POSIX 上为自己解决了以下问题：

```
std::error_code error_code_from_errno(int errno_code) {
  return std::make_error_code(static_cast<std::errc>(errno_code));
} 
```

这总是给我正确的类别（通用或系统）。过去我遇到过问题，具有相同 errno 代码的错误代码比较为不相等，因为一个 has`generic_category`和另一个 has `system_category`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-29T00:17:54.287

看起来你应该使用`system_category()`for `GetLastError()`/`errno`并且它会在两个平台上做正确的事情。

如果您已经有`errc`，请改用`generic_category()`（或`make_error_code`）。

这是一些带有“地址已在使用”错误的测试。

```
#include <iostream>
#include <system_error>

#ifdef _WIN32
#include <WinError.h>
#define LAST_ERROR WSAEADDRINUSE
#else
#include <errno.h>
#define LAST_ERROR EADDRINUSE
#endif

#define ERRC std::errc::address_in_use

#define TRY(...)                                                              \
  {                                                                           \
    std::error_code ec = {__VA_ARGS__};                                       \
    std::cout << std::boolalpha << (ec == ERRC) << "\t" << ec.value() << "\t" \
              << ec.message() << "\n";                                        \
  }

int main() {
  TRY(static_cast<int>(ERRC), std::system_category())
  TRY(static_cast<int>(ERRC), std::generic_category()) // note: same as make_error_code
  TRY(static_cast<int>(LAST_ERROR), std::system_category())
  TRY(static_cast<int>(LAST_ERROR), std::generic_category()) // note: same as make_error_code
  return 0;
} 
```

在 Windows 上：

```
false   100 Cannot create another system semaphore.
true    100 address in use
true    10048   Only one usage of each socket address (protocol/network address/port) is normally permitted.
false   10048   unknown error 
```

在 POSIX 上：

```
true    98  Address already in use
true    98  Address already in use
true    98  Address already in use
true    98  Address already in use 
```

使用这些等效错误代码的三元组进行测试时，我得到了类似的结果：

```
equivalent errc               Windows                 POSIX

errc::broken_pipe             ERROR_BROKEN_PIPE       EPIPE
errc::filename_too_long       ERROR_BUFFER_OVERFLOW   ENAMETOOLONG
errc::not_supported           ERROR_NOT_SUPPORTED     ENOTSUP
errc::operation_would_block   WSAEWOULDBLOCK          EWOULDBLOCK 
```

如果有人感兴趣，这里有一个`std::errc`映射到`==` `WinError.h`常量的 s 列表。这是检查`if (std::error_code(static_cast<int>(win_error_constant), std::system_category()) == errc)`。

```
address_family_not_supported:
        WSAEAFNOSUPPORT
address_in_use:
        WSAEADDRINUSE
address_not_available:
        WSAEADDRNOTAVAIL
already_connected:
        WSAEISCONN
argument_list_too_long:
argument_out_of_domain:
bad_address:
        WSAEFAULT
bad_file_descriptor:
        WSAEBADF
bad_message:
broken_pipe:
        ERROR_BROKEN_PIPE
connection_aborted:
        WSAECONNABORTED
connection_already_in_progress:
        WSAEALREADY
connection_refused:
        WSAECONNREFUSED
connection_reset:
        WSAECONNRESET
cross_device_link:
        ERROR_NOT_SAME_DEVICE
destination_address_required:
        WSAEDESTADDRREQ
device_or_resource_busy:
        ERROR_BUSY_DRIVE
        ERROR_BUSY
        ERROR_OPEN_FILES
        ERROR_DEVICE_IN_USE
directory_not_empty:
        ERROR_DIR_NOT_EMPTY
executable_format_error:
file_exists:
        ERROR_FILE_EXISTS
        ERROR_ALREADY_EXISTS
file_too_large:
filename_too_long:
        ERROR_BUFFER_OVERFLOW
        WSAENAMETOOLONG
function_not_supported:
        ERROR_INVALID_FUNCTION
host_unreachable:
        WSAEHOSTUNREACH
identifier_removed:
illegal_byte_sequence:
inappropriate_io_control_operation:
interrupted:
        WSAEINTR
invalid_argument:
        ERROR_INVALID_HANDLE
        ERROR_INVALID_PARAMETER
        ERROR_NEGATIVE_SEEK
        ERROR_DIRECTORY
        ERROR_REPARSE_TAG_INVALID
        WSAEINVAL
invalid_seek:
io_error:
        ERROR_SEEK
        ERROR_WRITE_FAULT
        ERROR_READ_FAULT
        ERROR_OPEN_FAILED
        ERROR_CANTOPEN
        ERROR_CANTREAD
        ERROR_CANTWRITE
is_a_directory:
message_size:
        WSAEMSGSIZE
network_down:
        WSAENETDOWN
network_reset:
        WSAENETRESET
network_unreachable:
        WSAENETUNREACH
no_buffer_space:
        WSAENOBUFS
no_child_process:
no_link:
no_lock_available:
        ERROR_LOCK_VIOLATION
        ERROR_LOCKED
no_message_available:
no_message:
no_protocol_option:
        WSAENOPROTOOPT
no_space_on_device:
        ERROR_HANDLE_DISK_FULL
        ERROR_DISK_FULL
no_stream_resources:
no_such_device_or_address:
no_such_device:
        ERROR_INVALID_DRIVE
        ERROR_BAD_UNIT
        ERROR_DEV_NOT_EXIST
no_such_file_or_directory:
        ERROR_FILE_NOT_FOUND
        ERROR_PATH_NOT_FOUND
        ERROR_BAD_NETPATH
        ERROR_INVALID_NAME
no_such_process:
not_a_directory:
not_a_socket:
        WSAENOTSOCK
not_a_stream:
not_connected:
        WSAENOTCONN
not_enough_memory:
        ERROR_NOT_ENOUGH_MEMORY
        ERROR_OUTOFMEMORY
not_supported:
        ERROR_NOT_SUPPORTED
operation_canceled:
        ERROR_OPERATION_ABORTED
operation_in_progress:
        WSAEINPROGRESS
operation_not_permitted:
operation_not_supported:
        WSAEOPNOTSUPP
operation_would_block:
        WSAEWOULDBLOCK
owner_dead:
permission_denied:
        ERROR_ACCESS_DENIED
        ERROR_INVALID_ACCESS
        ERROR_CURRENT_DIRECTORY
        ERROR_WRITE_PROTECT
        ERROR_SHARING_VIOLATION
        ERROR_CANNOT_MAKE
        ERROR_NOACCESS
        WSAEACCES
protocol_error:
protocol_not_supported:
        WSAEPROTONOSUPPORT
read_only_file_system:
resource_deadlock_would_occur:
resource_unavailable_try_again:
        ERROR_NOT_READY
        ERROR_RETRY
result_out_of_range:
state_not_recoverable:
stream_timeout:
text_file_busy:
timed_out:
        WSAETIMEDOUT
too_many_files_open_in_system:
too_many_files_open:
        ERROR_TOO_MANY_OPEN_FILES
        WSAEMFILE
too_many_links:
too_many_symbolic_link_levels:
value_too_large:
wrong_protocol_type:
        WSAEPROTOTYPE.0 
```

# qt - 将鼠标悬停在表格小部件项上

> ID：13950939
> 
> 赞同：0
> 
> 时间：2012-12-19T11:03:30.050
> 
> 标签：qt, qwidget, qtablewidget

实际上，我从 .ui 文件构建了一个对话框，用于显示我的应用程序中的所有快捷方式。我有一个带有普通项目的 QTableWidget（带有 qString 的单元格）和一个单元格中的 QPushButton。我的 SelectionBehavior 是 QAbstractItemView::SelectRows，我将一个 eventFilter 添加到我的表（-> 视口）。如果我选择一个单元格，则会按预期选择整行。但是，如果我用按钮将鼠标悬停在单元格上，则该单元格将进行选择。我怎样才能避免这种行为？

```
mUiShortcutMapperDialog->tableShortcuts->setRowCount(mActionList.size());

    mUiShortcutMapperDialog->tableShortcuts->setColumnCount(4);
    QStringList headerLabels;
    int row = 0;
    for (std::list<QAction*>::const_iterator iterator = mActionList.cbegin(); iterator != mActionList.cend(); iterator++)
    {
        // Add Name to row
        headerLabels.append(QString( QVariant(row +1).toString()));

        QPushButton* _btn = new QPushButton("reset");
        _btn->setMaximumSize(50,20);
        tableShortcuts->setCellWidget(row, 0, _btn);
        tableShortcuts->setItem(row, 0, new QTableWidgetItem(""));

        mUiShortcutMapperDialog->tableShortcuts->setItem(row, 1, new QTableWidgetItem(QString("Edit")));
        QString name = (*iterator)->objectName();
        tableShortcuts->setItem(row, 2, new QTableWidgetItem(name));
        QKeySequence shortcut = (*iterator)->shortcut();
        tableShortcuts->setItem(row, 3, new QTableWidgetItem(shortcut.toString()));

        tableShortcuts->item(row,0)->setFlags(Qt::ItemIsSelectable | Qt::ItemIsEnabled);
        tableShortcuts->item(row,1)->setFlags(Qt::ItemIsSelectable | Qt::ItemIsEnabled);
        tableShortcuts->item(row,2)->setFlags(Qt::ItemIsSelectable | Qt::ItemIsEnabled);
        tableShortcuts->item(row,3)->setFlags(Qt::ItemIsSelectable | Qt::ItemIsEnabled);

        row++;
    }
    tableShortcuts->setVerticalHeaderLabels(headerLabels);
    tableShortcuts->viewport()->installEventFilter(this);   // (mk) dunno if this is an good idea, we give the acutal class as eventfilter
    tableShortcuts->setSelectionBehavior(QAbstractItemView::SelectRows);
    tableShortcuts->setMouseTracking(true); 
```

# c++ - C++ 结构初始化

> ID：13950941
> 
> 赞同：8
> 
> 时间：2012-12-19T11:03:49.300
> 
> 标签：c++, data-structures, struct

以下是我的 Sprite 类的精简版：

```
class Sprite
{
    struct SpriteState {
        Vector3 position;
        int width, height;
        double rotation, scaling;
    };
    std::map<int, SpriteState> stateVector;
} 
```

我想通过一个看起来类似于以下内容的成员函数创建一个 SpriteState 对象：

```
SpriteState newSpriteState(
        Vector3 position = stateVector.rbegin()->second.position, 
        int width = = stateVector.rbegin()->second.width, 
        int height = = stateVector.rbegin()->second.height, 
        double rotation = stateVector.rbegin()->second.rotation, 
        double scaling = stateVector.rbegin()->second.scaling)
    { SpriteState a; a.position = position; a.width = width; a.height = height; a.rotation = rotation; a.scaling = scaling; return a; } 
```

我收到以下错误：

> 非静态成员引用必须相对于特定对象

类本身背后的基本思想是在精灵发生变化时存储它的各种状态，以便我可以在需要时轻松恢复到以前的状态。

然而，在大多数情况下，Sprite 仅使用新的位置值更新，而宽度、高度、旋转和缩放几乎保持不变 - 这意味着我只在弹出并再次保存上次保存的状态的引用时更改位置值其他值。

因此，我希望能够为函数设置默认值，这样我就不必费力地重复编写相同的值。

关于实施的任何可能的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:09:42.117

重载它：

```
SpriteState newSpriteState(Vector3 position)
{
    return newSpriteState(
            position,
            stateVector.rbegin()->second.width, 
            stateVector.rbegin()->second.height, 
            stateVector.rbegin()->second.rotation, 
            stateVector.rbegin()->second.scaling)      
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T11:24:20.597

默认参数在调用者的上下文中进行评估，因此如果您需要访问类的成员以获取“默认”值，则不能使用默认参数。

另一方面，您可以使用重载来获得相同的效果：

```
SpriteState newSpriteState(
    Vector3 position,
    int width,
    int height,
    double rotation,
    double scaling)
{ 
    SpriteState a; 
    a.position = position; 
    a.width = width; 
    a.height = height; 
    a.rotation = rotation; 
    a.scaling = scaling; 
    return a; 
}

SpriteState newSpriteState(
    Vector3 position)
{
    return newSpriteState(position,
                          stateVector.rbegin()->second.width, 
                          stateVector.rbegin()->second.height, 
                          stateVector.rbegin()->second.rotation, 
                          stateVector.rbegin()->second.scaling);
}
/* ... And similar for additional non-default values. */ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T11:52:32.903

成员函数不能调用类成员。您可以通过执行以下操作将其存档：

```
SpriteState newSpriteState(SpriteState sprite_state)        
{ 
  SpriteState a; 
  a.position = position; 
  a.width = width; 
  a.height = height; 
  a.rotation = rotation; 
  a.scaling = scaling; 
  return a; 
} 
```

然后你在另一个中调用这个函数`member function`：

```
newSpriteState(stateVector.rbegin()->second); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T11:07:11.447

您应该复制 SpriteState，然后对其进行修改：

```
SpriteState newSpriteState(stateVector.rbegin()->second);
newSpriteState.width = someNewWidth;
return newSpriteState; 
```

默认情况下，每个结构和类都具有以下形式的复制构造函数：

```
ClassName(const ClassName&); 
```

默认情况下复制类/结构中的数据。

# grid - Kendo 网格将代码附加到 Create 的内联取消/更新命令按钮

> ID：13950942
> 
> 赞同：1
> 
> 时间：2012-12-19T11:03:52.110
> 
> 标签：grid, inline, kendo-ui

我没有使用包装器，但我想知道是否可以在已创建的新内联行上的取消和更新命令按钮中添加额外的 jscript 代码？

如果可能的话，我会将 .hide 添加到自定义创建按钮以在单击后隐藏自身，并希望在单击内联更新/取消命令按钮后再次显示它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:45:24.930

借助[编辑](http://docs.kendoui.com/api/web/grid#edit)事件，您可以轻松地将额外的处理程序附加到这些按钮：

```
$(function(){
     $('#GridName').data().kendoGrid.bind('edit',function(e){
          if(e.model.isNew()){
               e.container.find('.k-grid-update').click(function(){
                    //extra update logic goes here    
               })
               e.container.find('.k-grid-cancel').click(function(){
                    //extra cancel logic goes here    
               })
          }
     })
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:03:32.967

据我了解，您可以为要添加的任何按钮编写自己的自定义单元格模板，并将其粘贴到行模板中。

```
var template = "<div class='btn-group' style='text-align: center'>" +
               "<a class='btn btn-mini' rel='tooltip' title='Edit' href=''><i class='icon-edit'></i></a>" +
               "<a class='btn btn-mini' rel='tooltip' title='Create' href=''><i class='icon-tasks'></i></a>" +
               "<a class='btn btn-mini' rel='tooltip' title='Delete' href=''><i class='icon-trash'></i></a>"+
               "</div>";
columns.push({title: '', width: 100,template: template, filterable: false, sortable:false, groupable:false}); 
```

以上将呈现所有行。您希望在呈现按钮后添加到按钮整体行为的任何其他 javascript 都可以添加到 dataBound 属性。

这有助于回答您的问题吗？

# c - dmatest.ko - 如何使用它？

> ID：13950943
> 
> 赞同：4
> 
> 时间：2012-12-19T11:03:54.100
> 
> 标签：c, testing, linux-kernel, dma

我想启动一个 DMA 传输进行测试。

我在内核源代码（驱动程序/dma）中偶然发现了一个 dmatest.c。我用这个模块编译了一个内核，并在没有任何参数的情况下进行了尝试。

```
sudo modprobe dmatest 
```

我得到了 dmesg

```
__dma_request_channel: fail ((null)) 
```

dmatest.ko 的先决条件是什么？我应该加载一个特殊的 DMA 引擎吗？是否需要 dmatest.ko 的特殊参数（默认应该探测任何东西！？）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-11T11:13:26.910

我认为您可以参考[https://www.kernel.org/doc/Documentation/dmatest.txt](https://www.kernel.org/doc/Documentation/dmatest.txt)获取指南。

当然，你应该在dmatest之前运行一个DMA-Engine（模块或内置），在drivers/dma/下有很多DMA Controller驱动，如amba-pl08x.c、dw_dmac.c、pl330.c等上。

您可以使用命令“ls -1 /sys/class/dma/”来打印可用的频道列表。

# jquery - 附加一个 div，具体取决于选中的单选按钮

> ID：13950949
> 
> 赞同：2
> 
> 时间：2012-12-19T11:04:16.047
> 
> 标签：jquery, html, checkbox, append

我希望用户选择/检查一个单选按钮（对于这个例子，我使用了方向）。使用按钮，您可以将一些元素附加到另一个 div（侧边栏）。

我想要完成的事情：根据选中的单选按钮，我想要附加另一个图像/div。所以当检查“左”时，我希望“.LEFT”DIV附加（而不是值）。我怎样才能做到这一点？

希望你能帮助我。我正在寻找一个明确的解释。

**HTML**

```
 <div>
        <input type="text" name="itemtitle" id="itemtitle" value="Title" />
        <br/>
        <input type="radio" id="up" name="direction" value="Up" />  Up
        <input type="radio" id="down" name="direction" value="Down" /> Down
        <input type="radio" id="left" name="direction" value="Left" />  Left
        <input type="radio" id="right"name="direction" value="Right" /> Right
        <button id="addbutton">add it</button>
      </div>

<div id="sidebar"><h1>Sidebar</h1>

</div> 
```

**JS**

```
$('#addbutton').click(function() {

    var $addDiv = $('<div></div>', {
        'class': 'bluebox'
    }).html($('#itemtitle').val() + ' ' + $('input[name="direction"]:checked').val() + '<input type="button" class="removebtn" value="." id="removebtn"/>');

    if ($('input[name="direction"]:checked').val() == 'Left') {

        $('.Left').appenTo($addDiv);

    }

    $('#sidebar').append($addDiv);

    $('.removebtn').live('click', function() {
        $(this).parent().remove();

    });
    $('.bluebox').draggable({
        revert: true
    });

}); 
```

[**JSFIDDLE**](http://jsfiddle.net/VbXuw/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:09:42.747

如果你想放一些东西而不是值，首先想到的是：

```
$('#addbutton').click(function() {

    var $addDiv = $('<div></div>', {
        'class': 'bluebox'
    }).html('<input type="button" class="removebtn" value="." id="removebtn"/>');

     if ($('input[name="direction"]:checked').val() == 'Left') {

        $('.Left').prependTo($addDiv).fadeIn();

    }
    else{
          $addDiv.prepend($('#itemtitle').val() + ' ' + $('input[name="direction"]:checked').val());
    }

    $('#sidebar').append($addDiv);

    $('.removebtn').live('click', function() {
    $(this).parent().remove();

    });

    $('.bluebox').draggable({
        revert: true
    });

}); 
```

我已将第一个`$addDiv`分配更改为仅添加删除按钮。然后，如果它离开了，我添加 div，如果它是另一个，我添加输入值。

另外，你没有`<div class="left"></div>`

你可以看到它在[这里工作](http://jsfiddle.net/ub8t4/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T11:12:25.507

你的小提琴在检查这个小提琴时丢失了`left class div`和错字`appendTo` ..

[http://jsfiddle.net/VbXuw/1/](http://jsfiddle.net/VbXuw/1/)

创建了一个`left div`并附加到`sidebar`

# facebook - 使用golang的facebook登录服务器端不起作用

> ID：13950953
> 
> 赞同：4
> 
> 时间：2012-12-19T11:04:36.370
> 
> 标签：facebook, go

我正在尝试使用 facebook 进行服务器端身份验证，我可以访问登录对话框和权限，但是在重定向后我没有在重定向处理程序中获得身份验证“代码”。有什么建议吗？

```
FBCfg = &oauth.Config { //setup
    ClientId: appId, ClientSecret: appSecret,
    AuthURL: "https://www.facebook.com/dialog/oauth",
    TokenURL: "https://graph.facebook.com/oauth/access_token",
    RedirectURL: "http://"+domain+"/fedlogin/facebook/redir",
    Scope: "",
}

func FBHandleAuth(w http.ResponseWriter, r *http.Request) {
    url := FBCfg.AuthCodeURL("")
    http.Redirect(w, r, url, http.StatusFound)
}

func FBHandleRedir(w http.ResponseWriter, r *http.Request) {
    code := r.FormValue("code")
    w.Write([]byte(code)) //<-- empty, no code returned.
} 
```

编辑：我使用的是原始的 goauth2 最新版本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T17:30:58.590

我也花了一些时间在这上面。我不知道我[最近相当愚蠢的问题](https://stackoverflow.com/questions/13897425/implementing-oauth2-facebook-login-without-http-redirect)中的样本是否对您有用，但链接以防万一。

你会注意到我的不使用 goauth2。您可能知道也可能不知道“库存” goauth2 在 Facebook 的 OAuth2 实施中效果不佳（我认为这是草案 20，而不是当前标准。）相反，您可以使用[goauth2 的这个分支，](https://github.com/HairyMezican/goauth2/)它允许Facebook 在某些地方使用 URL 查询字符串格式而不是 JSON。

不幸的是，如果您使用的是 App Engine，那么还有另一个问题：您不能使用任何依赖 DefaultClient 的东西，因为 App Engine 要求您使用[他们的 urlfetch service](https://developers.google.com/appengine/docs/go/urlfetch/overview)创建客户端。我不清楚您是否正在为 App Engine 编写代码，所以这对您来说可能不是问题。

您可能应该检查您是否收到任何返回的查询字符串。如果您手动测试它会发生什么，例如使用[https://graph.facebook.com/oauth/authorize?client_id=123456789&redirect_uri=http://youruri/&state=somestate](https://graph.facebook.com/oauth/authorize?client_id=123456789&redirect_uri=http://youruri/&state=somestate)？你收到代码响应了吗？这将帮助您找出未以查询字符串格式返回的任何错误，因此您可能不会注意到它们……它们以 JSON 响应的形式出现**：**

```
{
   "error": {
      "message": "Error validating application. Invalid application ID.",
      "type": "OAuthException",
      "code": 101
   }
} 
```

总而言之：

1.  确保您不希望 vanilla goauth2 处理 Facebook OAuth2 响应，因为它（还没有）。
2.  如果您使用的是 App Engine，请通过 urlfetch.Client() 创建任何 http 客户端。
3.  在你的 go 代码之外尝试你的身份验证请求。
4.  作为事后的想法，请确保您的处理程序通过检查 r.URL 中的内容来接收包括查询字符串在内的整个 URL。

编辑：截至 12 月 16 日，我对第 1 点错了：goauth2 已[更新为处理 Facebook](https://codereview.appspot.com/6900055)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T16:52:21.917

来自[goauth2](https://code.google.com/p/goauth2/source/browse/oauth/oauth.go#25)源码

```
//      // The user will be redirected back to this handler, that takes the
//      // "code" query parameter and Exchanges it for an access token.
//      func handler(w http.ResponseWriter, r *http.Request) {
//              t := &oauth.Transport{Config: config}
//              t.Exchange(r.FormValue("code"))
//      // The Transport now has a valid Token. Create an *http.Client
//      // with which we can make authenticated API requests.
//      c := t.Client() 
```

所以如果你更换

```
code := r.FormValue("code") 
```

和

```
t := &oauth.Transport{Config: config}
t.Exchange(r.FormValue("code"))
c := t.Client() 
```

您将拥有一个经过身份验证的 http 客户端。

# php - 使用 codeigniter 发送电子邮件

> ID：13950957
> 
> 赞同：0
> 
> 时间：2012-12-19T11:04:41.187
> 
> 标签：php, codeigniter, email

我正在尝试在 codeigniter 中发送电子邮件。我首先在模型中创建了一个独立的函数，它在控制器中是对应的，并且运行良好。该电子邮件是在 yahoo 和 gmail 中发送和接收的。但是，当我尝试在另一个函数中使用相同的代码时，从数据库中选择电子邮件地址（收件人），它会给我一条消息，表明电子邮件已成功发送，但它实际上并没有发送到 yahoo 或 gmail。可能是什么问题呢？它甚至没有发送到垃圾邮件/批量邮件中。

有效和失败的代码如下。

模型函数是

```
function sendMail()
{
   $to = "mymail@yahoo.com"; 
       $subject = "My Sublect"; 
       $messagetext= "stop distubbing me and work!";
       $config=array(
      'protocol'=>'smtp',
      'smtp_host'=>'mail.mydomail.co.ug',
      'smtp_port'=>25,
      'smtp_user'=>'myname@mydomail.co.ug',
      'smtp_pass'=>'mypass'
    );
    $this->load->library("email",$config);
    $this->email->set_newline("\r\n");
    $this->email->from("myname@mydomail.co.ug","Joyce");
    $this->email->to($to); 
    $this->email->subject($subject); 
    $this->email->message($messagetext); 
    if($this->email->send())
    {
        echo "Mail send successfully!";
    }
    else
    {
        show_error($this->email->print_debugger());
    }
} 
```

控制器 fcn

```
function sendmail()
{
    $this->load->model('customer_model');
    $this->customer_model->sendMail();
} 
```

然而，未能工作的是波纹管

```
function customer()
{
    $this->load->library('email');
    $this->load->database();
    $data = array(
              'name'=>$this->input->post('name'),
              'contact'=>$this->input->post('contact'),
              'entity'=>$this->input->post('entity'),
              'sector'=>$this->input->post('sector'),
              'inquiry'=>$this->input->post('inquiry'),
         'nature_of_inquiry'=>$this->input->post('nature_of_inquiry'),
          'status'=>$this->input->post('status'),

                );
    $this->db->insert('customers',$data);
    $id = $this->db->insert_id();
    $refno = date('d/m/Y').'-C'.str_pad($id, 4, "0", STR_PAD_LEFT);

$this->db->query("UPDATE customers set refno = '".$refno."' WHERE id = '".$id."'"); 

$query=$this->db->query("select entity,name,status,contact from customers where id ='".$id."'");
foreach ($query->result() as $row)
{
    $entity = $row->entity;
    $phone = $row->contact;
    $name = $row->name;
    $status = $row->status;
}   

$query1=$this->db->query("select phone, email from services where entity = '".$entity."'");
     foreach ($query1->result() as $row)
{

    $to = $row->email;
}   
    $sms ="Dear $name, your request/compaint has been $status";
    //$emailtext ="yo company has been refferenced by servicecops.";
   //$this->sendSMS(test,$phone,$sms);
   //$subject = "Servicecops Reminder";
   $config=array(
      'protocol'=>'smtp',
      'smtp_host'=>'mail.mydomain.co.ug',
      'smtp_port'=>25,
      'smtp_user'=>'myname@mydomain.co.ug',
      'smtp_pass'=>'mypass',
      'mailtype'=>'html'
    );
    $this->load->library("email",$config);
    $this->email->set_newline("\r\n");
    $this->email->from("myname@mydomain.co.ug","Joyce");
    $this->email->to($to); 
    $this->email->subject("my subject"); 
    $this->email->message("yo company has been refferenced by me"); 
    if($this->email->send())
    {
        echo "Mail send successfully!";
        echo $to;
    }
    else
    {
        show_error($this->email->print_debugger());
    }

    return $this;
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T11:09:30.437

首先尝试检查您是否从数据库中很好地获取电子邮件。如果是，则检查垃圾邮件。这将解决我猜的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T11:28:58.283

伙计们，我发现了这个问题。我在同一个函数中定义了两次电子邮件库，这就是为什么邮件无法到达 yahoo 和 gmail 收件箱的原因。在函数开始时，我放了。$this->load->library('email'); 这在中间。$this->load->library("email",$config);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:12:04.050

如果您在使用 URL（例如：123.117.116.27/test/email/）而不是域名运行时使用 IP 地址，大多数邮件都会收到垃圾邮件。所以检查垃圾邮件文件夹。

# excel - 使用 VBScript 自动筛选 Excel 列

> ID：13950959
> 
> 赞同：1
> 
> 时间：2012-12-19T11:04:45.650
> 
> 标签：excel, vbscript, vba

假设我有一个如下矩阵：

```
 EMPID    Type Of employment
   #1 10            "T"
   #2 11            "P"
   #3 20            "P"
   #4 40            "T"
   #5 50            "T"
   #6 15            "P"
   #7 19            "T" 
```

***过滤后***

```
 EMPID    Type Of employment
  #2 11            "P"
  #3 20            "P"
  #6 15            "P" 
```

你们能建议我如何在 vbscript 中做到这一点吗？我知道 VBA 的语法，但在 VBScipt 中不知道如何格式化？

过滤后，如果我在第 1 列上使用 CountA，我应该得到行号`3`还是`7`？我在这里太困惑了。

**更新**

```
 objSheet2.Range("B1").AutoFilter 2, "Parent",,,False 
```

***要删除自动过滤，我使用了代码 -*** `objSheet2.Rows("1:1").Select.AutoFilter` 但出现错误`Unable to get the select property of the Range Class`

**已更正** `objSheet2.Range("B1").AutoFilter 2, "Parent",,,True` `objSheet2.AutoFilterMode = False`

***查询：***一旦过滤了行，那么当循环遍历它们时，我将如何识别过滤数据行的实际行数？

***回答***

```
 For rowIndex=2 To objExcel1.Application.WorksheetFunction.CountA(ob1.Columns(1))
    If objSheet2.Rows(rowIndex).Hidden Then
        ' do nothing - row is filtered out
    Else
        MsgBox(rowIndex)
    End If
    Next 
```

这样我得到了过滤行的实际行号。如果你们发布任何更好的想法，请提出建议:-)

**截屏**

![在此处输入图像描述](../Images/53b48590bfdf700124b450c44393546d.png)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T16:35:06.443

我认为这会让你想要你更快一点。

```
objSheet2.Range("B1").AutoFilter 2, "Parent",,,True 

Dim rngFilter as Range
Set rngFilter = objXL.Application.Intersect(objSheet2.UsedRange,objSheet2.UsedRange.Offset(1),objSheet2.Columns(1)).SpecialCells(xlCellTypeVisible)

msgbox "Filtered range has " & rngFilter.Rows.Count & " rows."
'do with the range as you wish.

Dim cel as objXL.Range 'or just leave this off
For each cel in rngFilter
   msgbox cel.row
Next

objSheet2.AutoFilterMode = False 
```

这样，您只选择过滤后的可见单元格。然后，您可以将该范围加载到一个数组中，或者在您认为合适的时候循环遍历它。

# variables - 非法变量名的 Csh 问题

> ID：13950960
> 
> 赞同：2
> 
> 时间：2012-12-19T11:04:45.817
> 
> 标签：variables, csh

好的，这就是我的全部代码我有一个新的错误：非法变量名。

当我使用以下命令执行文件时： csh filename.sh

结果是：非法变量名。

我认为问题包含在以下部分： while ( $? == 1 ) #!/bin/sh

```
set quitter = "N"
# Boucle sur  la condition d'arret du script:
while ( $quitter == "N" )

 # Saisie du nom de l'utilisateur :
 echo "Quel utilisateur ?"
 set a = $<
 # Mettre le résultat de la commande ps -u 
 # dans un fichier quelque soit le résultat (juste ou faux) :
 ps -u $a >&fichier
 # La varible $? vaudra 1 si la dernière commande qui a été éxcuter 
 # a retourné une erreur, 0 sinon.
 # On boucle donc j'usqu'a ce que le nom d'utilisateur soit correct:
 while ( $? == 1 )

   echo -n "Nom d'utilisateur innexistant, entrez un autre :"
   set a = $<
   ps -u $a >&fichier

commande=$(tail -$i tempfile|head -1|cut -d" " -f2)
let i=i+1
echo -n " $commande : "
case $etat
in
D) echo "endormi => ininterruptible" 
S) echo "endormi" 
R) echo "en cours" 
T) echo "stoppe" 
Z) echo "zombi" 
*) echo "inconnu" 
esac
end
 # Suppression du fichier qui a servi aux tests
 rm fichier;
 echo -n "voulez-vous quitter ? (O/N):";set quitter = $<
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T13:52:07.867

您的代码似乎是 bash 和 csh 的混合，并且通过您的初始打开（shebang），您拥有`#!/bin/sh`，这绝对不是 csh，并且由于旧行 sh=originaUnix* *Bourne* *Shell 或 linux 系统可能会模棱两可为方便起见，将 /bin/bash 链接为 /bin/sh。

错误消息告诉您正确的事情，`$?`不是 csh 中的有效变量，您想使用等效的`$status`.

我无权访问 csh 来运行您的代码，但我看到了一些我质疑的事情，而且我知道有些事情对于 csh 语法是错误的。

```
commande=$(tail -$i tempfile|head -1|cut -d" " -f2) 
```

不行，试试

```
set commande = `tail -$i tempfile|head -1|cut -d" " -f2`
# tnx to @dwalter for correct syntax on that! 
```

csh case sytnax 是

```
 switch ( "$etat" )
      case D:
        echo "endormi => ininterruptible" 
      breaksw
     default:   
         echo "unknown option provided in as etat=$etat"
     breaksw
  endswitch 
```

而且，我对此表示怀疑

```
ps -u $a >&fichier 
```

你在那里的意图是什么？如果您正在写入文件`fichier`，我看不到您在哪里读取它。它的用途是什么？

如果您需要进一步的帮助，请编辑您的问题以包含确切的错误消息（格式为代码）。

附言

如果您将来需要使用 Unix 脚本，则通过放弃使用 csh 并转换为 ksh/bash，您的整体适销性将得到增强。与大部分代码一样`bash`，您最好将第一行更改为`#!/bin/bash`，然后研究并修复生成的错误消息。

IHTH

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T15:29:50.757

首先更改`#!/bin/sh`为`#!/bin/csh`（仅出于完整性考虑）。

然后改变

```
commande=$(tail -$i tempfile | head -n 1|cut -d" " -f2) 
```

至

```
set commande = `tail -$i tempfile | head -n 1|cut -d" " -f2` 
```

你也`let i=i+1`应该`set i = 0`在顶部和病房之后使用`@ i++`来增加它。

下一个错误是`$etat`未定义。

Csh 也使用`switch() case`.

最好的办法是查看[http://www.grymoire.com/Unix/Csh.html](http://www.grymoire.com/Unix/Csh.html)或[http://faculty.plattsburgh.edu/jan.plaza/computing/help/tcsh.htm](http://faculty.plattsburgh.edu/jan.plaza/computing/help/tcsh.htm)了解更多信息关于 csh 脚本。

# html - 如何删除带有出现在按键上的示例文本的框？

> ID：13950965
> 
> 赞同：0
> 
> 时间：2012-12-19T11:04:52.173
> 
> 标签：html

查看我在下面粘贴的打印屏幕：

![在此处输入图像描述](../Images/3cd4307fe9b870563535f498291f412e.png)

如何删除以先前键入的名称出现的块？它下面的灰色框用于搜索 keyup 事件。我不需要白色块来额外显示名称。如何摆脱它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T11:06:35.927

添加`autocomplete="off"`到`input`元素..

# jquery - 页面上的多个日期选择器 - 处理交替点击（1、3、5...）

> ID：13950966
> 
> 赞同：0
> 
> 时间：2012-12-19T11:04:55.277
> 
> 标签：jquery, jquery-ui, datepicker, jquery-ui-datepicker

我有许多包含多个 DatePicker 的页面，基本上显示了一些日期范围（DateTo 和 DateFrom 文本框），一旦第一次打开 DatePicker 并选择了日期，它们就可以正常工作。

但是，当通过再次单击日期来更改下一次日期时（此单击也可以在单击页面上的其他位置之后），它不起作用。再次第三次，日期选择器开始工作，依此类推。

有趣的是，具有单个 DatePicker 用于自定义日期过滤器的页面，它们工作得非常好。

我查看了JQuery UI 1.8.5的代码，发现DatePicker的_selectDay函数也是交替调用的。

我正在使用 JQuery 1.4.1 版本，并进行了小改动以修复 JQuery Bug 11390/7986

```
// jQuery.boxModel DEPRECATED in 1.3, use jQuery.support.boxModel instead
jQuery.boxModel = jQuery.support.boxModel = (document.compatMode === "CSS1Compat"); 
```

我删除了这个修复程序，发现问题仍然存在，所以它似乎不是问题。

我正在使用 DatePicker，如下所示：

```
 <ul id="customActivityRange">        
                    <li class=" slvzr-first-child">
                        <label id="RangeFrom" ></label>
                        <input id="activityFrom" name="activityFrom" class="datepicker"      type="text" onkeydown="javascript:if(event.keyCode==13) setGLDates(2, true);" onchange="javascript:setGLDates(2, false);" />
                    </li>
                    <li>
                        <label id="RangeTo"></label>
                        <input id="activityTo" name="activityTo" class="datepicker" type="text" onkeydown="javascript:if(event.keyCode==13) setGLDates(2, true);" onchange="javascript:setGLDates(2, false);" />
                    </li>
                    <li>
                        <button id="FilterDateRange" type="button" onclick="javascript:setGLDates(2, true);"></button>
                    </li>
                </ul> 
```

将 DatePicker 与每个输入文本框相关联，如下所示：

```
$('.datepicker').each(function () {
    $(this).datepicker();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:29:30.117

尝试使用 jQuery Datepicker 事件而不是 javascript 事件

请查看此链接以获取 API 帮助

[http://api.jqueryui.com/datepicker/#option-onClose](http://api.jqueryui.com/datepicker/#option-onClose)

# asp.net - ASP.NET：在读取/插入数据库时 来回转换日期值

> ID：13950967
> 
> 赞同：1
> 
> 时间：2012-12-19T11:04:56.113
> 
> 标签：asp.net, sql, date

我在上传图像的 .aspx 页面上有一个 AsyncFileupload 控件。我正在提取非常基本的文件信息，例如创建/访问日期。

对于每个文件，代码都给了我一个静态值，即

```
01/01/1601 00:00:00 
```

这显然是不对的。我确信后面有一个转换是自动完成的。

如何将其转换为实际值并将其转换回 CYYMMDD 格式（我想要 bd 中的这种特殊格式）？谢谢

在`UploadedComplete`我运行这段代码

```
 string savePath = MapPath("~/" + Path.GetFileName(e.FileName));

 FileInfo MyFileInfo = new FileInfo(savePath);

 txt_Textbox1.Text = MyFileInfo.CreationTime.ToString(); 
```

这总是给我以下输出，不管实际日期是今天的日期

```
01/01/1601 00:00:00 
```

如何将其转换为其原始创建日期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:23:14.673

确保`MyFileInfo.Exists`在`true`使用 FileInfo 变量的其他属性之前。

我敢肯定在你的情况下`MyFileInfo.Exists`是`false`。这就是您将获得诸如`CreationTime, LastAccessTime, LastWriteTime`等属性的这些值的原因。

# android - 如何防止修改后的列表视图项被重用，或者至少在重新初始化之前不被重用

> ID：13950970
> 
> 赞同：0
> 
> 时间：2012-12-19T11:05:26.960
> 
> 标签：android, android-layout

在内部`MyListViewAdapter`，我对`convertView`视觉进行了更改，但是随着列表被重用，这些更改仍然存在于其他行项目上。换句话说，现在每一行都是红色的。怎么办？我该如何防止这种情况？

```
 View getView(View convertView, int position etc)
 {
      Button myButton = (Button)convertView.findViewById(R.id.myButton);
      myButton.setTag(convertView);
      myButton.setOnclickListener( new OnClickListener(){

           public void onClick(View v){
             View containingView = myButton.getTag();
             containingView.setBackgroundColor(Color.RED);
           }

      });

 } 
```

问题是视图被重用了，所以现在我在其他地方有一个红色列表项，而不仅仅是代表我想要的视图的单元格的位置。对此有什么解决方案？如何防止视图以这种方式被重用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:14:07.810

您必须手动设置它，然后将红色位置保存在支架之类的东西上并验证以选择正确的颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:12:46.193

试试这个

这里有一些代码可以帮助你：我将创建一个布尔数组列表。

```
private ArrayList<Boolean> item_clicked = new ArrayList<Boolean> (); 
```

然后我将在我的构造函数中将所有行元素的状态设置为 false：

```
for (int i=0; i < no_of_elements.size(); i++) {
    item_clicked.add(i, false);
} 
```

设置点击行时的实际点击状态：myButton.setOnclickListener(new OnClickListener(){

```
 public void onClick(View v){
         item_clicked.set(position, true);
         View containingView = myButton.getTag();
         containingView.setBackgroundColor(Color.RED);
       }

  }); 
```

在你的 getview 方法中给出这个条件

```
if (item_clicked.get(position)) {
//SET BACKGROUD AS RED
} else {
// SET BACKGROUND AS NORMAL COLOR
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:11:33.417

使用 ViewHolder 模式：

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent){
        ViewHolder holder;
        if (convertView == null) {
            convertView = inflater.inflate(R.layout.list_row, null);
            holder = new ViewHolder();
            holder.button = (Button)convertView.findViewById(R.id.button);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder)convertView.getTag();
        }

        holder.button.setOnclickListener(new OnClickListener(){

           public void onClick(View v){
             v.setBackgroundColor(Color.RED);
           }

      });

        return convertView;
    }

private class ViewHolder{
   public Button button;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T11:27:18.557

一般建议，您应该在编码之前阅读更多关于适配器的内容。

简单的：

1.  我之前告诉过你只创建一个 onClickListener。你浪费了很多内存
2.  仅当 convertView 为空时才进行初始化工作。
3.  您必须跟踪单击了哪些视图，并在每个 getView 设置/重置颜色。

    ```
     View getView(View convertView, int position etc)
        {
             if(convertView == null{
                 convertView = // inflate it
                 colorStatusMap.put(h.position, defaultColor);
                 convertView.findViewById(R.id.myButton).setOnClickListener(clickListener);
                 convertView.findViewById(R.id.myButton).setTag(convertView);
             }
             convertView.setBackgroundColor(colorStatusMap.get(position));
             convertView.setTag((Integer)position);

        }

        private OnClickListener clickListener = new OnClickListener(){

                  public void onClick(View v){
                    View containingView = v.getTag();
                    containingView.setBackgroundColor(Color.RED);
                    int position = (Integer)containingView.getTag();
                    colorStatusMap.put(position, Color.RED);
                  }
        }
        private HashMap<Integer, Integer> colorStatusMap = new HashMap<Integer, Integer>(); 
    ```

ps.：我把所有这些都记下来了，没有实际编译和检查，但你可以知道你应该做什么。在我的代码中出现任何错误的不太可能的情况下，您可以在修复它们时获得一些乐趣。

# javascript - 如何强制/允许用户下载多个文件？（客户端）

> ID：13950974
> 
> 赞同：5
> 
> 时间：2012-12-19T11:05:39.410
> 
> 标签：javascript, html, flash

输入是可变数量的 URL（远程），所有链接图像资源。希望允许用户允许批量下载所有这些 URL。由于我们谈论的是 1000-2000 个图像资源，因此要求用户为每个 URL 单击“另存为...”是不可行的。

我最初的尝试是将所有图像下载到一个 blob 中（[如何将加载的图像读入 blob？，](https://stackoverflow.com/questions/13937494/how-to-read-loaded-image-into-a-blob)由于同源策略而不起作用），归档文件并允许用户下载它（所有这个客户端边）。

我想知道有哪些可能的替代解决方案？无论解决方案是什么，都不得涉及随时将远程资源下载到服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:25:54.377

虽然这不可能，但我设法在 Chrome 中用一些魔法做到了这一点。首先，您需要为`download`所有链接 f.ex 设置属性：

```
<a href="http://example.com/image1.jpg" download>download</a>
<a href="http://example.com/image2.jpg" download>download</a> 
```

然后创建一个合成点击函数：

```
function makeClick(element) {
    var evt = element.ownerDocument.createEvent('MouseEvents');
    evt.initMouseEvent('click', true, true,
        element.ownerDocument.defaultView, 1, 0, 0, 0, 0, false,
        false, false, false, 1, null);
    element.dispatchEvent(evt);
}​ 
```

然后只需遍历您的链接并调用它：

```
var links = document.getElementsByTagName('a');
for(var i=0;i<links.length; i++) {
    makeClick(links[i]);
} 
```

这是一个演示：http: [//jsfiddle.net/37pFC/](http://jsfiddle.net/37pFC/)

在 Chrome 中，您会收到类似“此站点希望您下载多个文件。允许？”的警告。但这可能是可以管理的。

**免责声明：**我没有在其他浏览器中尝试过，我认为它不是非常友好的跨浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:25:33.830

我真的想不出更好的办法，只能根据用户的偏好在服务器端准备一个存档，然后让用户下载包。

我猜你可以让用户安装一个浏览器扩展，允许对二进制数据和本地文件系统进行更多控制，但我怀疑这就是你要找的。

# android - 可以知道电子邮件是如何传递的？

> ID：13950975
> 
> 赞同：0
> 
> 时间：2012-12-19T11:05:50.660
> 
> 标签：android, email

在我的应用程序中，我想发送一封电子邮件。

我正在使用 AsyncTask 但如何识别电子邮件是否已送达，以便我可以在 postExecute 方法中停止进度条。请提供任何帮助。这是我的代码。给我发邮件就好了...

```
public class SendMainActivity extends Activity {
Button send = null;
EditText mailid = null;
String emailId = null;
ConnectivityManager conMan = null;
NetworkInfo Info = null;
ProgressBar  pro = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    send = (Button)findViewById(R.id.button1);
    mailid = (EditText)findViewById(R.id.editText1);
    pro = (ProgressBar)findViewById(R.id.progressBar1);

    send.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            conMan = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
            Info = conMan.getActiveNetworkInfo();
            emailId = mailid.getText().toString();

            if(Info == null){
                Toast.makeText(getApplicationContext(), "no net connection ", Toast.LENGTH_LONG).show();
            }else{

                new SendEmail().execute();

            }   
        }
    });

}

class SendEmail extends AsyncTask<Void, Void, Integer>{

      @Override
        protected void onPreExecute()
        {
          pro.setVisibility(View.VISIBLE);
          pro.setProgress(0);
        }

    @Override
    protected Integer doInBackground(Void... params) {
        // TODO Auto-generated method stub

        try {   
          GmailSender sender = new GmailSender("usermailid@gmail.com", "userpass");
          sender.sendMail("This is Subject",   
                  "This is Body how r u ..",   
                  "usermailid@gmail.com",   
                  emailId);   
      } catch (Exception e) {   
          Log.e("SendMail", e.getMessage(), e);   
      } 
        return null;
    }
    @Override
    protected void onPostExecute(Integer result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        pro.destroyDrawingCache();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:22:02.117

简而言之，您无法识别您的邮件是否已送达。

您正在使用 GmailSender 可以在[此处找到的类](http://davanum.wordpress.com/2007/12/22/android-send-email-via-gmail-actually-via-smtp/)

现在，在这个类中只有一条消息用于发送邮件而不是检查传递等。

这样做会很复杂。您很可能必须从头开始编写自己的客户端。

发送邮件时为什么不结束进度条？

# jquery - jQuery：从行对象获取单元格对象

> ID：13950977
> 
> 赞同：3
> 
> 时间：2012-12-19T11:05:54.207
> 
> 标签：jquery, cells

我有一个现有函数，它将 cellobj 作为输入参数，例如

```
MyFunction(cellObj) 
```

当有人单击表格中的单元格时使用此功能，表格中的 HTML 将如下所示：

```
MyFunction(this)   //this is the cellObj 
```

现在我需要调用完全相同的函数，但我不在表格中，我正在循环遍历行并且我不能传递“this”，因为它是行对象而不是单元格对象。因此，我的问题是如何从行对象中获取单元对象

例如

```
 $("#gv tr:has(td)").each(function () {
      var cellObj = $(this)........
      MyFunction(cellObj);
}) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T11:08:12.010

所以你在行中，你需要依次获取每个单元格以将它们传递给你的函数，所以你所要做的就是从行中找到单元格，并以完全相同的方式遍历它们您确实可以获取并遍历表格的行。

这应该可以解决问题：

```
$(this).find('td').each(function() {
  // now your cell is in $(this)
  MyFunction($(this));
}); 
```

使用它而不是`var cellObj = $(this)...`等。

**编辑：**

要每行仅执行一次，请尝试...

```
var cellObj = $(this).find('td:first');
MyFunction(cellObj); 
```

虽然我觉得如果你这样做，那么你的代码可能没有有效地结构化。我会将找到 cellObj 的行*放在*你的函数中，然后将你的函数传递给每一行。

# iphone - 如何围绕 x 轴旋转 GLKView？

> ID：13950982
> 
> 赞同：0
> 
> 时间：2012-12-19T11:06:09.077
> 
> 标签：iphone, objective-c, rotation, opengl-es-2.0

我对 GLKView 进行了子类化，我想围绕 x 轴旋转它。我尝试在 raywenderlich 的教程中应用该方法，但没有结果。不同之处在于，我有一个 GLKView，而他碰巧用 GLKViewController（+ 它的委托）做所有事情。所以我没有delegate之类的更新方法等。我对OpenGL几乎没有经验（刚开始），所以希望在这里能有所启发。

**视图控制器.m**

```
 EAGLContext * context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2]; 
    BlogCell *view = [[BlogCell alloc] initWithFrame:CGRectMake(0, 200, 320, 80) context:context]; 
    view.drawableMultisample = GLKViewDrawableMultisample4X;
    view.context = context; 
    view.delegate = view; 
    [view setupGL];
    [self.view addSubview:view]; 
```

**MyGLKViewSubclass.m**

```
- (void)setupGL {

    [EAGLContext setCurrentContext:self.context];
    glEnable(GL_CULL_FACE);

    self.effect = [[GLKBaseEffect alloc] init];

    NSDictionary * options = [NSDictionary dictionaryWithObjectsAndKeys:
                              [NSNumber numberWithBool:YES],
                              GLKTextureLoaderOriginBottomLeft,
                              nil];

    NSError * error;
    NSString *path = [[NSBundle mainBundle] pathForResource:@"myImage" ofType:@"png"];
    GLKTextureInfo * info = [GLKTextureLoader textureWithContentsOfFile:path options:options error:&error];
    if (info == nil) {
        NSLog(@"Error loading file: %@", [error localizedDescription]);
    }
    self.effect.texture2d0.name = info.name;
    self.effect.texture2d0.enabled = true;

    glGenVertexArraysOES(1, &vertexArray);
    glBindVertexArrayOES(vertexArray);

    glGenBuffers(1, &vertexBuffer);
    glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer);
    glBufferData(GL_ARRAY_BUFFER, sizeof(Vertices), Vertices, GL_STATIC_DRAW);

    glGenBuffers(1, &indexBuffer);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexBuffer);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(Indices), Indices, GL_STATIC_DRAW);

    glEnableVertexAttribArray(GLKVertexAttribColor);
    glVertexAttribPointer(GLKVertexAttribColor, 4, GL_FLOAT, GL_FALSE, sizeof(Vertex), (const GLvoid *) offsetof(Vertex, Color));

    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glVertexAttribPointer(GLKVertexAttribPosition, 
                          3,         
                          GL_FLOAT,   
                          GL_FALSE,    
                          sizeof(Vertex),   
                          (const GLvoid *) offsetof(Vertex, Position) 
                          );

    glEnableVertexAttribArray(GLKVertexAttribTexCoord0);
    glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, sizeof(Vertex), (const GLvoid *) offsetof(Vertex, TexCoord));

    glBindVertexArrayOES(0);

    rotMatrix = GLKMatrix4Identity;

}

- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect {

    self.contentScaleFactor = 2.0;
    self.opaque = NO;
    self.drawableColorFormat = GLKViewDrawableColorFormatRGBA8888;
    glClearColor(1.0f, 1.0f, 1.0f, 1.0f);

    glClear(GL_COLOR_BUFFER_BIT);

    [self.effect prepareToDraw];

    glBindVertexArrayOES(vertexArray);
    glDrawElements(GL_TRIANGLES, sizeof(Indices)/sizeof(Indices[0]), GL_UNSIGNED_BYTE, 0);

} 
```

**这是我想旋转我的对象的地方**

```
 -(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{

    UITouch * touch = [touches anyObject];
    CGPoint location = [touch locationInView:[touch view]];
    CGPoint lastLoc = [touch previousLocationInView:[touch view]];
    CGPoint diff = CGPointMake(lastLoc.x - location.x, lastLoc.y - location.y);

    float rotX = -1 * GLKMathDegreesToRadians(diff.y / 2.0);
    float rotY = -1 * GLKMathDegreesToRadians(diff.x / 2.0);

    GLKVector3 xAxis = GLKVector3Make(1, 0, 0);
    rotMatrix = GLKMatrix4Rotate(rotMatrix, rotX, xAxis.x, xAxis.y, xAxis.z);
    GLKVector3 yAxis = GLKVector3Make(0, 1, 0);
    rotMatrix = GLKMatrix4Rotate(rotMatrix, rotY, yAxis.x, yAxis.y, yAxis.z);
    [self update];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:37:51.470

您似乎没有任何东西可以运行您的绘图循环。把它放在你的 viewDidLoad 中：

```
displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(render:)];
displayLink.frameInterval = 2;
[displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode]; 
```

将 displayLink 定义为标题中的属性，并将 @selector(render:) 更改为您的渲染函数（不必是那个 glkview 函数，因为您没有使用 GLKViewController）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-08T01:47:34.877

比旋转视图更好的是旋转四边形纹理坐标；尽管 Apple 的任何示例代码或文档中都没有演示，但他们的文档确实建议旋转输出而不是旋转 GLKView。

以下是四边形纹理坐标设置的所有排列：

```
static const GLfloat noRotationTextureCoordinates[] = {
    0.0f, 0.0f,
    1.0f, 0.0f,
    0.0f, 1.0f,
    1.0f, 1.0f,
};

static const GLfloat rotateLeftTextureCoordinates[] = {
    1.0f, 0.0f,
    1.0f, 1.0f,
    0.0f, 0.0f,
    0.0f, 1.0f,
};

static const GLfloat rotateRightTextureCoordinates[] = {
    0.0f, 1.0f,
    0.0f, 0.0f,
    1.0f, 1.0f,
    1.0f, 0.0f,
};

static const GLfloat verticalFlipTextureCoordinates[] = {
    0.0f, 1.0f,
    1.0f, 1.0f,
    0.0f,  0.0f,
    1.0f,  0.0f,
};

static const GLfloat horizontalFlipTextureCoordinates[] = {
    1.0f, 0.0f,
    0.0f, 0.0f,
    1.0f,  1.0f,
    0.0f,  1.0f,
};

static const GLfloat rotateRightVerticalFlipTextureCoordinates[] = {
    0.0f, 0.0f,
    0.0f, 1.0f,
    1.0f, 0.0f,
    1.0f, 1.0f,
};

static const GLfloat rotateRightHorizontalFlipTextureCoordinates[] = {
    1.0f, 1.0f,
    1.0f, 0.0f,
    0.0f, 1.0f,
    0.0f, 0.0f,
};

static const GLfloat rotate180TextureCoordinates[] = {
    1.0f, 1.0f,
    0.0f, 1.0f,
    1.0f, 0.0f,
    0.0f, 0.0f,
}; 
```

要在他们的 AVBasicVideo... 示例应用程序中使用的 GLKView 中使用它，例如：

1.  使用`self.bounds.size`而不是`self.presentationRect.size`使您的输出填充整个屏幕而不管其旋转：

    ```
    CGRect vertexSamplingRect = AVMakeRectWithAspectRatioInsideRect(self.bounds.size, self.eaglLayer.bounds); 
    ```

2.  对于 1.0 的值，使用 max；对于 0.0，使用最小值；

    GLfloat quadTextureData[] = { CGRectGetMaxX(textureSamplingRect), CGRectGetMinY(textureSamplingRect), CGRectGetMaxX(textureSamplingRect), CGRectGetMaxY(textureSamplingRect), CGRectGetMinX(textureSamplingRect), CGRectGetMinY(textureSamplingRect), CGRectGetMinX(textureSamplingRect), CGRectGetMaxY(text)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-17T02:52:30.697

旋转 GLKView 有四个要求： 1\. 与旋转相关的代码必须放在视图控制器内 2\. 必须在横向旋转中添加 90° 3\. 与旋转相关的代码必须包含在 UIView 动画块中 4 . 度数应以弧度表示，并为负数

这是我成功使用的代码：

**在 GLKViewController 实现文件 (.m) 中：**

```
static inline double radians (double degrees) { return degrees * M_PI/180; } 
```

. . .

```
if (UIInterfaceOrientationIsPortrait([[UIApplication sharedApplication] statusBarOrientation]) || (UIInterfaceOrientationIsPortrait([[UIApplication sharedApplication] statusBarOrientation]))) {
    [UIView animateWithDuration:0.0 animations:^{
        ((PlayerView *)self.view).transform = CGAffineTransformMakeRotation(radians(-90.0));
        ((PlayerView *)self.view).frame = [[UIScreen mainScreen] bounds];
    } completion:^(BOOL finished) { }];
} else if (UIInterfaceOrientationIsLandscape([[UIApplication sharedApplication] statusBarOrientation]) || (UIInterfaceOrientationIsLandscape([[UIApplication sharedApplication] statusBarOrientation]))) {
    [UIView animateWithDuration:0.0 animations:^{
        ((PlayerView *)self.view).transform = CGAffineTransformMakeRotation(radians(-180.0));
        ((PlayerView *)self.view).frame = [[UIScreen mainScreen] bounds];
    } completion:^(BOOL finished) { }];
} else {
    NSLog(@"--------------------------- orientation could not be determined");
} 
```

这些要求听起来有点可疑。但是，我向你保证，你不会以任何其他方式旋转它，并在所有方向和所有方面保持一致性。

# c# - 四边形形状查找算法

> ID：13950983
> 
> 赞同：35
> 
> 时间：2012-12-19T11:06:10.560
> 
> 标签：c#, algorithm, image-processing, opencv, artificial-intelligence

我想从随机定位的线段中检测并完成所有可能的四边形**！**

附上的照片是一个例子，线条可能总是出现在非常不同的位置。

任何人都可以为此指出任何好的算法吗？

*   请注意，线段是使用 opencv 2.4.2 进行霍夫变换的输出

![在此处输入图像描述](../Images/b2321b8bbb8a97f2efdf4c771c2101b0.png)

解决方法是**检测**和**预测**黄色四边形

![在此处输入图像描述](../Images/e1ed83ea25b3628410f08dfe6960fadc.png)

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-19T11:29:17.383

在 11 条线段的情况下，您有 330 种方式选择四个线段。您可以确定每个组合构成四边形的可能性，并以此方式评分。

可以使用 Hough 变换检测除线条以外的形式，但由于累加器空间需要多于两个维度，因此更难以可视化。可以在三个维度（midX、midY、半径）中找到圆，在四个维度中找到椭圆（我相信）。我不确定你需要多少参数来模拟一个四边形，我相信当你得到高于三个维度时，霍夫变换的性能开始下降。蓄能器空间变得如此之大，以至于噪声比显着增加。

这是一个[相关的问题](https://stackoverflow.com/questions/13048508/how-to-detect-a-quadrilateral-shape-in-an-image-in-java)，可能会为您提供一些有趣的答案。

让我们知道您的身体情况如何！

* * *

## 编辑

我今天尝试解决这个问题，并将[我的解决方案上传到 GitHub](https://github.com/drewnoakes/quadrilateral-finder)。这里有太多代码要发布。

这是显示输出的屏幕截图：

![](../Images/958b33ce4b878b4aba8a29b4e5fb41ca.png)

我采取的解决方案基本上就是我在此编辑之前在上面描述的。

1.  找出四行的所有组合
2.  找出这四行的所有排列
3.  评估这四条线形成四边形的可能性
4.  拿最好的比赛

评估通过计算粗略的错误分数来进行。这是两种不同类型错误的总和：

1.  每个角与 90 度的偏差（我使用所有四个角的误差平方和）
2.  当线段在线段内相交时，它可能不是有效的角

第二种类型的错误可能会以更稳健的方式确定。有必要为您的样本数据集找到解决方案。

我没有尝试过其他数据集。它可能需要一些调整以使其更强大。我试图避免使用太多参数，以便直接适应特定环境。例如，控制对遮挡的敏感度，如您的示例图像所示。

它在我的笔记本电脑上大约 160 毫秒内找到了解决方案。但是我没有进行任何性能优化。我希望找到组合/排列的方法可以得到显着优化，如果你需要它更接近实时地运行，就像计算机视觉实验经常发生的情况一样。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-12-26T19:15:45.477

About any four lines can be completed to form a quadrilateral if you don't impose constraints on angles etc.

*Image with potentially wrong quadrilaterals:* ![enter image description here](../Images/ea53bfac12c9adde305478bdbf5333f6.png)

Probably you don't want to include quadrilaterals like the yellow one shown in my example. You should have constraints on angles, minimum/maximum size, aspect ratio and the degree of completion allowed. If 90 percent of the lines have to be added in order to form a complete quadrilateral this would probably not be a very good candidate.

I fear that you will have to test every possible combination of lines and apply a [heuristic](http://en.wikipedia.org/wiki/Heuristic) on them to give them points. Many points for angles close to 90 degrees (if what you want are rectangles), for completeness, for aspect ratios close to the expected one etc.

* * *

**UPDATE**

Using a point system has advantages over just applying strict rules.

*   A point system allows you to evaluate the quality of quadrilaterals and to take the best one or to reject a quadrilateral completely.
*   The good quality of one property can help outweigh the poor quality of another one.
*   It allows you to give different weights to different properties.

Let's say you have a strict rule (in pseudo code):

```
(angles == 90 +/- 10 degrees) && (line_completeness>50%) 
```

This would work, can however lead to situations like `angles == 90 +/- 1 degree) && (line_completeness == 45%)`. According to the rules this quadrilateral would not pass because of the poor line completeness; however, the quality of the angles is exceptional, still making it a very good candidate.

It is better to give points. Say 20 points for an angle of exactly 90 degrees, falling to 0 points for an angle of 90 +/-15 degrees and 10 points for complete lines towards 0 points for lines complete by only 25% for instance. This makes angles more important than line completeness and also creates softer conditions for a problem that does not have absolute rules.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-01T01:15:43.260

我不使用 C#，所以你必须翻译代码。以下代码使用 Java。我使用包含的测试用例对其进行了测试。我还不知道如何将附件添加到 stackoverflow，所以我在这里包含了实际代码。

有四个类（ShapeFinder、Line、Point 和 Quadrilateral）和一个测试类（ShapeFinderTest）：

形状查找器类：

```
package stackoverflow;

import java.util.ArrayList;
import java.util.List;

public class ShapeFinder {

  private List<Line> lines;
  private List<Quadrilateral> allQuadrilaterals;

  /*
   * I am assuming your segments are in a list of arrays:
   * [{{x1,y1,},{x2,y2}}, {{x1,y1,},{x2,y2}}, {{x1,y1,},{x2,y2}}]
   * You can change this.
   *
   * So basically you call ShapeFinder with a list of your line segments.
   */
  public ShapeFinder(List<Double[][]> allSegments) {
    lines = new ArrayList<Line>(allSegments.size());
    allQuadrilaterals = new ArrayList<Quadrilateral>();
    for (Double[][] segment : allSegments) {
      addSlopeInterceptForm(segment);
    }
  }

  /**
   * You call this function to compute all possible quadrilaterals for you.
   */
  public List<Quadrilateral> completeQuadrilaterals() {
    for (int w = 0; w < lines.size(); w++) {
      for (int x = w + 1; x < lines.size(); x++) {
        for (int y = x + 1; y < lines.size(); y++) {
          for (int z = y + 1; z < lines.size(); z++) {
            addQuadrilateral(w, x, y, z);
          }
        }
      }
    }
    return allQuadrilaterals;
  }

  //assume {{x1,y1,},{x2,y2}}
  private void addSlopeInterceptForm(Double[][] s) {
    double x1 = s[0][0];
    double y1 = s[0][1];
    double x2 = s[1][0];
    double y2 = s[1][1];
    double m = (y1 - y2) / (x1 - x2);
    double b = y2 - m * x2;

    if (isInfinityOrNaN(m)) {
      m = Double.NaN;
      b = x1;
    }

    lines.add(new Line(m, b));
  }

  /*
   * Given four lines, this function creates a quadrilateral if possible
   */
  private void addQuadrilateral(int w, int x, int y, int z) {
    Point wx = intersect(w, x);
    Point wy = intersect(w, y);
    Point wz = intersect(w, z);
    Point xy = intersect(x, y);
    Point xz = intersect(x, z);
    Point yz = intersect(y, z);

    if (notNull(wx) && notNull(xy) && notNull(yz) && notNull(wz) && isNull(wy) && isNull(xz)) {
      allQuadrilaterals.add(new Quadrilateral(wx, xy, yz, wz));
    }
  }

  private Point intersect(int c, int d) {
    double m1 = lines.get(c).slope;
    double b1 = lines.get(c).intercept;
    double m2 = lines.get(d).slope;
    double b2 = lines.get(d).intercept;

    double xCor, yCor;
    if ((isInfinityOrNaN(m1) && !isInfinityOrNaN(m2)) || (!isInfinityOrNaN(m1) && isInfinityOrNaN(m2))) {
      xCor = isInfinityOrNaN(m1) ? b1 : b2;
      yCor = isInfinityOrNaN(m1) ? m2 * xCor + b2 : m1 * xCor + b1;;
    } else {
      xCor = (b2 - b1) / (m1 - m2);
      yCor = m1 * xCor + b1;
    }

    if (isInfinityOrNaN(xCor) || isInfinityOrNaN(yCor)) {
      return null;
    }
    return new Point(xCor, yCor);
  }

  private boolean isInfinityOrNaN(double d){
    return Double.isInfinite(d)||Double.isNaN(d);
  }

  private boolean notNull(Point p) {
    return null != p;
  }

  private boolean isNull(Point p) {
    return null == p;
  }
} 
```

线路类：

```
package stackoverflow;

public class Line {

  double slope;
  double intercept;

  public Line(double slope, double intercept) {
    this.slope = slope;
    this.intercept = intercept;
  }
} 
```

点类：

```
package stackoverflow;

class Point {

  double xCor;
  double yCor;

  public Point(double xCor, double yCor) {
    this.xCor = xCor;
    this.yCor = yCor;
  }

  public String toString(){
    return "("+xCor+","+yCor+")";
  }
} 
```

四边形类：

```
package stackoverflow;

public class Quadrilateral {

  private Point w, x, y, z;

  public Quadrilateral(Point w, Point x, Point y, Point z) {
    this.w = w;
    this.x = x;
    this.y = y;
    this.z = z;
  }

  public String toString() {
    return "[" + w.toString() + ", " + x.toString() + ", " + y.toString() + ", " + z.toString() + "]";
  }
} 
```

单元测试：

```
package stackoverflow;

import java.util.ArrayList;
import java.util.List;
import org.junit.Test;

public class ShapeFinderTest {

  @Test
  public void testCompleteQuadrilaterals() {
    List<Double[][]> lines = new ArrayList<>();
    lines.add(new Double[][]{{2., 5.}, {6., 5.}});
    lines.add(new Double[][]{{2., 1.}, {2., 5.}});
    lines.add(new Double[][]{{2., 1.}, {6., 1.}});
    lines.add(new Double[][]{{6., 5.}, {6., 1.}});
    lines.add(new Double[][]{{0., 0.}, {5., 1.}});
    lines.add(new Double[][]{{5., 5.}, {10., 25.}});
    ShapeFinder instance = new ShapeFinder(lines);
    List<Quadrilateral> result = instance.completeQuadrilaterals();

    for (Quadrilateral q : result) {
      System.out.println(q.toString());
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-31T11:15:02.063

从这些例子中，我假设问题更多地是沿着**Find all quadrilaterals that have a line 完全包含在它的每一边内的线**。从所提供的解释来看，这一点都不清楚。

下面是一些相当容易实现的伪代码。现在只是为了创建一个有效的数据结构来防止 O(N^4) 复杂性。也许按位置或渐变对线条进行排序。

i,j,k,l 如下：

```
 l
 |---|
j|   |k
 |---|
   i 
```

`extendIntersect`只是一个函数，它将 2 条线扩展到无穷大（或您选择的任何边界）并返回它们相交的点，这在数学上很容易做到。

`onLine`如果一个点位于一条线上，则返回 true。

`onSameSide`如果两个点都位于一条线的同一侧，则返回 true

```
for (Line i = lines[0]:lines[lineCount])
  for (Line j = lines[1]:lines[lineCount])
    Point ijIntersect = extendIntersect(i, j)
    if (ijIntersect == NULL || onLine(ijIntersect, i) || onLine(ijIntersect, j))
      continue;
    for (Line k = lines[2]:lines[lineCount])
      Point ikIntersect = extendIntersect(i, k)
      if (ikIntersect == NULL || onLine(ikIntersect, i) || onLine(ikIntersect, k) ||
          onSameSide(ijIntersect, ikIntersect, i)) continue
      for (Line l = lines[3]:lines[lineCount])
        Point jlIntersect = extendIntersect(j, l)
        Point klIntersect = extendIntersect(k, l)
        if (jlIntersect == NULL || onLine(jlIntersect, j) || onLine(jlIntersect, l) ||
            klIntersect == NULL || onLine(klIntersect, k) || onLine(klIntersect, l) ||
            onSameSide(jlIntersect, ijIntersect, j) ||
            onSameSide(klIntersect, ikIntersect, k)) continue
        printQuad(ijIntersect, ikIntersect, klIntersect, jlIntersect) 
```

Drew Noakes 建议的某种错误检查也可能是一个好主意。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-08-15T19:30:40.620

**解决方案 1：**
这是使用 OpenCV 2.4 和 Sympy 用 python 2.7.x 编写的完整解决方案。
我使用了 D.Noakes 的数据（线段），但我采用了不同的方法。

**问题定义：**
对于一组线段，找到所有可能的四边形形状，其中线段适合四边形的边缘。

**方法：**

*   将线段分组为大致“水平”或“垂直”。
*   制作成对的“水平”或“垂直”。
*   过滤器对，例如它们是否接触或相交。
*   组合两个“水平”和两个“垂直”段。
*   过滤候选四边形，例如，如果角在图像之外或片段不在四边形上。

**结果：**
该方法检测到图像中的 4 个四边形

查看动画 GIF：[https ://ibb.co/4Rv9rJW](https://ibb.co/4Rv9rJW) [![在此处输入图像描述](../Images/a3557477eba45c4149c7410ff7115646.png)](https://i.stack.imgur.com/4DLdO.gif)

代码：[https ://pastiebin.com/5f3836269f7e5](https://pastiebin.com/5f3836269f7e5)

```
#!/usr/bin/env python

"""
Find Quads:

For a set of line segments, find all the possible
quadrilateral shapes where the segments fit
inside the edges of the quad.

Dependencies:
Sympy is used for geometry primitives.
sudo pip install sympy
"""

import numpy as np
import cv2
import itertools # combinations, product
from sympy import Point, Line, Segment, convex_hull
import sys

input_image = cv2.imread("detected_lines.jpg")

#------------------------------------------------------------------------------#

def checkPointInImage(point, image_width, image_height):
    """
    Check if a Sympy Point2D is within the bounds of an OpenCV image.
    """
    pt_x = int(round(point.x))
    pt_y = int(round(point.y))
    if (pt_x >= 0) and (pt_x < image_width) and (pt_y >= 0) and (pt_y < image_height):
        return True
    # Point is outside the image boundary
    return False

def checkPointsInImage(points, image_width, image_height):
    """
    Check if a set of Sympy Point2D are all within the bounds of an OpenCV image.
    """
    for point in points:
        if not checkPointInImage(point, image_width, image_height):
            return False
    # All points are within the image boundary
    return True

def getUniquePairs(segments, image_dims):
    """
    Get all the possible pairs of line segments.
    (the unique combinations of 2 lines)
    Note: this doesn't check for duplicate elements, it works
    only on the position in the list.
    """

    # Check that a pair of segments are not intersecting
    check_segments_dont_intersect = True

    # Check that the endpoint of one segment
    # does not touch the other segment (within 10 pixels)
    check_segment_endpoints = True
    endpoint_min_separation = 10

    # Project the segments and check if the intersection
    # point is within the image
    check_projected_segments_dont_intersect = True

    pairs = list(itertools.combinations(segments, 2)) # a list of tuple

    image_width, image_height = image_dims

    filtered_pairs = []
    for pair in pairs:
        segment1 = pair[0]
        segment2 = pair[1]

        if check_segments_dont_intersect:
            if bool(len(segment1.intersection(segment2))):
                # Discard this pair.
                # The pair of segments intersect each other.
                continue

        if check_segment_endpoints or check_projected_segments_dont_intersect:
            line1 = Line(segment1)
            line2 = Line(segment2)
            intersection_points = line1.intersection(line2)
            intersects = bool(len(intersection_points))

            if intersects:
                intersection_point = intersection_points[0]

                if check_segment_endpoints:
            # Measure the distance from the endpoint of each segment
                    # to the intersection point.
                    d1 = float(segment1.points[0].distance(intersection_point))
                    d2 = float(segment1.points[1].distance(intersection_point))
                    d3 = float(segment2.points[0].distance(intersection_point))
                    d4 = float(segment2.points[1].distance(intersection_point))
                    d = np.array([d1,d2,d3,d4]) 
                    if (d < float(endpoint_min_separation)).any():
                        # Discard this pair.
                        # One segment is (almost) touching the other.
                        continue 

                if check_projected_segments_dont_intersect:
                    if checkPointInImage(intersection_point, image_width, image_height):
                        # Discard this pair.
                        # After projecting the segments as lines,
                        # they intersect somewhere on the image.
                        continue

        filtered_pairs.append(pair)

    return filtered_pairs

def getCombinationsOfTwoLists(list1, list2):
    """
    For two sets of Line Segment pairs,
    generate all possible combinations.
    """
    return list(itertools.product(list1, list2))

def getIntersectionLineSegments(segment1, segment2):
    """
    Find the intersection of two line segments,
    by extending them into infinite lines.
    """
    line1 = Line(segment1)
    line2 = Line(segment2)
    intersection_points = line1.intersection(line2)
    intersects = bool(len(intersection_points))
    if intersects:
        intersection_point = intersection_points[0]
        return intersection_point
    # Error, lines do not intersect
    print("WARNING: Horizontal and vertical line segments do not intersect.")
    print("This should not happen!")
    return None

def checkLineSegmentIsAbove(segment1, segment2):
    """
    Check if one line segment is above the other.
    (this assumes the segments are not intersecting)
    """

    # In image coordinates, (+x,+y) is bottom-right corner.
    if (segment1.points[0].y > segment2.points[0].y): return False
    if (segment1.points[0].y > segment2.points[1].y): return False
    if (segment1.points[1].y > segment2.points[0].y): return False
    if (segment1.points[1].y > segment2.points[1].y): return False

    return True

def checkLineSegmentOnLeft(segment1, segment2):
    """
    Check if one line segment is on the left side of the other.
    (this assumes the segments are not intersecting)
    """

    # In image coordinates, (+x,+y) is bottom-right corner.
    if (segment1.points[0].x > segment2.points[0].x): return False
    if (segment1.points[0].x > segment2.points[1].x): return False
    if (segment1.points[1].x > segment2.points[0].x): return False
    if (segment1.points[1].x > segment2.points[1].x): return False

    return True

def getConvexIntersectionPoints_method2(horizontal_segment1, horizontal_segment2, vertical_segment1, vertical_segment2):
    """
    For two pairs of line segments, treat them as
    infinite lines and find the intersection points.

    These 4 points are in a clockwise order that
    represents a convex quadrilateral.
    """

    # Sort the segments in clockwise order
    top_segment = None
    right_segment = None
    bottom_segment = None
    left_segment = None
    if checkLineSegmentIsAbove(horizontal_segment1, horizontal_segment2):
        top_segment = horizontal_segment1
        bottom_segment = horizontal_segment2
    else:
        top_segment = horizontal_segment2
        bottom_segment = horizontal_segment1
    if checkLineSegmentOnLeft(vertical_segment1, vertical_segment2):
        left_segment = vertical_segment1
        right_segment = vertical_segment2
    else:
        left_segment = vertical_segment2
        right_segment = vertical_segment1

    corner_pt1 = getIntersectionLineSegments(left_segment, top_segment)
    corner_pt2 = getIntersectionLineSegments(top_segment, right_segment)
    corner_pt3 = getIntersectionLineSegments(right_segment, bottom_segment)
    corner_pt4 = getIntersectionLineSegments(bottom_segment, left_segment)

    quad_points = [corner_pt1, corner_pt2, corner_pt3, corner_pt4]
    sorted_segments = [top_segment, right_segment, bottom_segment, left_segment]

    return (quad_points, sorted_segments)

def checkSegmentsOnQuad_method2(sorted_segments, corners):
    """ 
    Check if all 4 line segments are within
    the edges of a quadrilateral.

    This assumes that the inputs are already matched.
    """

    if (len(sorted_segments) != 4) or (len(corners) != 4):
       print("ERROR: Expected 4 segments and 4 corners in checkSegmentsOnQuad_method2()")
       sys.exit()

    # Get the 4 edges
    edges = []
    for i in range(3):
        p1 = corners[i]
        p2 = corners[i+1]
        edges.append(Segment(p1, p2))
    p1 = corners[3]
    p2 = corners[0]
    edges.append(Segment(p1, p2))

    for i in range(4):
        if not edges[i].contains(sorted_segments[i]):
            return False
    return True

def getQuads(sets_of_four_segments, image_dims):
    """
    Find quadrilateral shapes.
    """

    image_width, image_height = image_dims

    quads = []
    for i in range(len(sets_of_four_segments)):

        # Determine if 4 line segments represent
        # a valid quadrilateral shape:

        segments = sets_of_four_segments[i]
        horizontal_segment1 = segments[0][0]
        horizontal_segment2 = segments[0][1]
        vertical_segment1 = segments[1][0]
        vertical_segment2 = segments[1][1]

        quad_points, sorted_segments = getConvexIntersectionPoints_method2(horizontal_segment1, horizontal_segment2, vertical_segment1, vertical_segment2)

        if not checkPointsInImage(quad_points, image_width, image_height):
            print("  Bad quad, an intersection point (one corner of the quad) is outside image!")

            # Save debug image
            img = np.copy(input_image)
            drawCrosshairs(img, quad_points)
            drawQuad(img, quad_points)
            suffix = str(i).zfill(2)
            cv2.imwrite("candidate_quad_"+suffix+".jpg", img)

            # Discard this quad.
            # A corner point is outside the image boundary.
            continue

        # Check if each line segment is within one side of the quad.
        #  - The segments can not intersect each other.
        #  - The end of a segment can not extend out past the quad.
        #  - All segments must be contained within one edge of the shape.
        if checkSegmentsOnQuad_method2(sorted_segments, quad_points):
            print("  Good")
            quads.append(quad_points)
        else:
            print("  Bad quad, a line segment is not within the quad")

        # Save debug image
        img = np.copy(input_image)
        drawCrosshairs(img, quad_points)
        drawQuad(img, quad_points)
        suffix = str(i).zfill(2)
        cv2.imwrite("candidate_quad_"+suffix+".jpg", img)
        #cv2.imshow("Quad corners", img)
        #cv2.waitKey()

    return quads

#------------------------------------------------------------------------------#

# Drawing functions:

def drawSegment(image, segment, color):
    """
    Draw a Sympy Line Segment on an OpenCV image.
    """
    thickness = 2
    x1 = int(segment.points[0].x) # should already be int
    y1 = int(segment.points[0].y)
    x2 = int(segment.points[1].x)
    y2 = int(segment.points[1].y)
    cv2.line(image, (x1,y1), (x2,y2), color, thickness)

def drawSegments(image, segments, color=(0,0,255)):
    """
    Draw lines on an OpenCV image.

    Default color is red.
    """
    for segment in segments:
        drawSegment(image, segment, color)

def drawCrosshair(image, point):
    """
    Draw a Sympy Point2D on an OpenCV image
    with a cross marker.
    """
    pt_x = int(round(point.x))
    pt_y = int(round(point.y))
    length = 5
    thickness = 2
    color = (255,0,255) # magenta
    cv2.line(image, (pt_x, pt_y-length), (pt_x, pt_y+length), color, thickness)
    cv2.line(image, (pt_x-length, pt_y), (pt_x+length, pt_y), color, thickness)

def drawCrosshairs(image, points):
    """
    Draw marks on an OpenCV image.
    """
    for point in points:
        drawCrosshair(image, point)

def drawQuad(image, corners, color=(0,255,0)):
    """
    Draw a quadrilateral shape.
    The 4 corner points are Sympy Point2D.
    """
    for i in range(len(corners)-1):
        p1 = corners[i]
        p2 = corners[i+1]
        segment = Segment(p1, p2)
        drawSegment(image, segment, color)
    # Close the polygon
    p1 = corners[len(corners)-1]
    p2 = corners[0]
    segment = Segment(p1, p2)
    drawSegment(image, segment, color)

#------------------------------------------------------------------------------#

if input_image == None:
    print("ERROR: Can't find input image")
    sys.exit()

#cv2.imshow("input_image", input_image)
#cv2.waitKey()

# Line segments sample data
segment1  = Segment(Point(335,120), Point(517,144))
segment2  = Segment(Point(287, 604), Point(558, 619))
segment3  = Segment(Point(323, 131), Point(275, 587))
segment4  = Segment(Point(589, 473), Point(580, 606))
segment5  = Segment(Point(368, 39), Point(489, 108))
segment6  = Segment(Point(53, 286), Point(293, 406))
segment7  = Segment(Point(299, 347), Point(214, 538))
segment8  = Segment(Point(200, 370), Point(149, 528))
segment9  = Segment(Point(6, 446), Point(68, 449))
segment10 = Segment(Point(66, 444), Point(150, 525))
segment11 = Segment(Point(389, 514), Point(518, 644))
segments = [segment1, segment2, segment3, segment4, segment5, segment6, segment7, segment8, segment9, segment10, segment11]

image_width = input_image.shape[1]
image_height = input_image.shape[0]
image_dims = (image_width, image_height)

input_image_with_segments = np.copy(input_image)
drawSegments(input_image_with_segments, segments)
cv2.imshow("input_image_with_segments", input_image_with_segments)
cv2.waitKey()

# Sort the line segments into 2 groups:
horizontal_segments = []
vertical_segments   = []
image_width = input_image.shape[1]
x_axis = Line((0, 0), (image_width, 0))
for segment in segments:
    # Compute the angle of each line segment.
    # Angle is w.r.t. the top edge of the image
    # in a clockwise direction.
    angle = float(x_axis.angle_between(segment))

    # Check 315 to 360 degrees
    if (angle >= 2.0*np.pi-np.pi/4.0) and (angle <= 2.0*np.pi):
        horizontal_segments.append(segment)
    # Check 0 to 45 degrees
    elif (angle >= 0.0) and (angle < np.pi/4.0):
        horizontal_segments.append(segment)
    # Check 135 to 225 degrees
    elif (angle > np.pi-np.pi/4.0) and (angle < np.pi+np.pi/4.0):
        horizontal_segments.append(segment)
    else:
        vertical_segments.append(segment)

# Save debug images
input_image_with_horizontal_segments = np.copy(input_image)
drawSegments(input_image_with_horizontal_segments, horizontal_segments)
cv2.imwrite("segments_horizontal.jpg", input_image_with_horizontal_segments)
input_image_with_vertical_segments = np.copy(input_image)
drawSegments(input_image_with_vertical_segments, vertical_segments)
cv2.imwrite("segments_vertical.jpg", input_image_with_vertical_segments)

# Get all the possible pairs of horizontal line segments:
pairs_of_horizontal_line_segments = getUniquePairs(horizontal_segments, image_dims)
print("Got %d pairs of horizontal line segments" % len(pairs_of_horizontal_line_segments)) # 15 pairs, 10 after filtering

# Get all the pairs of vertical line segments:
pairs_of_vertical_line_segments = getUniquePairs(vertical_segments, image_dims)
print("Got %d pairs of vertical line segments" % len(pairs_of_vertical_line_segments)) # 10 pairs, 6 after filtering

# Save debug images
for i in range(len(pairs_of_horizontal_line_segments)):
    pair = pairs_of_horizontal_line_segments[i]
    segments = [pair[0], pair[1]]
    img = np.copy(input_image)
    drawSegments(img, segments)
    suffix = str(i).zfill(2)
    cv2.imwrite("segment_pairs_horizontal_"+suffix+".jpg", img)
    #cv2.imshow("Pair of segments", img)
    #cv2.waitKey()
for i in range(len(pairs_of_vertical_line_segments)):
    pair = pairs_of_vertical_line_segments[i]
    segments = [pair[0], pair[1]]
    img = np.copy(input_image)
    drawSegments(img, segments)
    suffix = str(i).zfill(2)
    cv2.imwrite("segment_pairs_vertical_"+suffix+".jpg", img)
    #cv2.imshow("Pair of segments", img)
    #cv2.waitKey()

# Get all combinations of 4 line segments:
sets_of_four_line_segments = getCombinationsOfTwoLists(pairs_of_horizontal_line_segments, pairs_of_vertical_line_segments)
print("Got %d potential quadrilaterals" % len(sets_of_four_line_segments)) # = 60

# Find the valid quadrilateral shapes:
quads = getQuads(sets_of_four_line_segments, image_dims)
print("Got %d valid quads" % len(quads))
for i in range(len(quads)):
    img = np.copy(input_image)
    drawQuad(img, quads[i])

    # Save result images
    suffix = str(i).zfill(2)
    cv2.imwrite("quad_"+suffix+".jpg", img)

    title = "Candidate Quad " + str(i)
    cv2.imshow(title, img)
    cv2.waitKey() 
```

# asp.net - asp.net mvc3：如何将参数从控制器传递到设计为由 RenderPage 调用的局部视图？

> ID：13950984
> 
> 赞同：1
> 
> 时间：2012-12-19T11:06:16.413
> 
> 标签：asp.net, asp.net-mvc-3, html.renderpartial

我有一个局部视图，@RenderPage 和控制器的操作都将调用它。

下面是使用 @RenderPage 从另一个视图调用它的代码，它使用 PageData[] 传递参数：

```
 @foreach (var subTree in itemTree.SubTrees)
        {
            <li id ="@("LiOf" + subTree.Root.ID)" style = "margin-top: 0px">
                @RenderPage("~/Areas/MFC/Views/Items/_SubItemsTree.cshtml", subTree, itemTreeViewModel, false, Request.RawUrl, showOpenAsTreeRoot)
            </li>
        } 
```

顺便说一句，这个局部视图是一个“treeNode”，因此它会通过一次调用多次呈现。

下面是一个控制器的action中的代码，它通过Model和ViewBag传递参数，当某个节点需要刷新时，这个action会被调用：

```
 var fatherTree = ItemTree.ItemTreeOf(item.FatherID);
    ViewBag.IsSubtreeRoot = true;
    ViewBag.ReturnUrl = returnUrl;
    ViewBag.ItemTreeViewModel = new ItemTreeViewModel(
        view, fatherTree, whats, types,
        showPopupOperationMenu: true, showMoveLeftRight: true, showMoveUpDown: true);
    ViewBag.ShowOpenAsTreeRoot = true;
    return View("~/Areas/MFC/Views/Items/_SubItemsTree.cshtml", fatherTree); 
```

要在这两种情况下正常工作，要渲染的视图是这样的：

```
@model ItemTree
@using Martian.Areas.MFC.Models;
@{
    var itemTree = (PageData[0] as ItemTree) ?? Model;
    var itemTreeViewModel = PageData[1] ?? ViewBag.ItemTreeViewModel as ItemTreeViewModel;
    var isSubtreeRoot = (bool) (PageData[2] ?? ViewBag.IsSubtreeRoot);
    var returnUrl = PageData[3] ?? ViewBag.ReturnUrl as string;
    var showOpenAsTreeRoot = (bool)(PageData[4] ?? ViewBag.ShowOpenAsTreeRoot); 
```

是的，它运作良好但看起来很尴尬。由于我有一组局部视图需要被转移以由@RenderPage 而不是@Html.RenderPartial 调用，并且它们也需要通过某些操作返回，这将是一个问题。有没有更好的方法来做到这一点？谢谢。

* * *

2013-01-19 一个痛苦但可行的解决方案在这里：

大脑的训练是：如果我们可以将多个参数传递给Controller.View，我们可以将它作为PageData[]传递给cshtml。

步骤 1\. 修改来自控制器的调用：

```
 public ActionResult AjaxRemoveUser(int departmentID, int teamID, string userName, int udcTypeValue)
    {
        var team = _repMFC.ReadItemAt<Department>(teamID);
        team.RemoveUser(udcTypeValue, userName);
        return MFCView("AssignMembers/_AjaxTeam", _repMFC.ReadItemAt<Department>(departmentID), team, true);
    } 
```

步骤 2\. 从 MFCController 而不是控制器和 . MFCController 是我们之前出于某种原因设计的类，我们所有的控制器都是从它派生的。

在 MFCController 中，有 MFCView() 的主体，如下所示：

```
 public ActionResult MFCView(string ajaxViewName, params object[] list)
    {
        var ajaxViewPath = ((BuildManagerCompiledView) (ViewEngines.Engines.FindPartialView(ControllerContext, ajaxViewName).View)).ViewPath;
        var viewModel = new MFCViewModel { AjaxViewPath = ajaxViewPath, PageData = list };
        return View("~/Views/Shared/_MFCView.cshtml", viewModel);
    } 
```

步骤 3\. MFCViewModel：

```
 public class MFCViewModel
    {
        public string AjaxViewPath;
        public object[] PageData;
    } 
```

这是非常清晰和直截了当的。

第 4 步。~/Views/Shared/_MFCView.cshtml

```
@model Martian.Areas.MFC.Models.MFCController.MFCViewModel
@{
    @RenderPage(Model.AjaxViewPath, Model.PageData)
} 
```

第 5 步。在视图 AssignMembers/_AjaxTeam.cshtml 中：正如我在主题一开始所描述的，它曾经看起来像：

```
var department = (PageData[0]??ViewBag.Department) as Department;
var team = (PageData[1]??ViewBag.Team) as Department;
var enableEditMembers = (bool)(PageData[2]??ViewBag.EnableEditMembers); 
```

现在它实际上是：

```
var department = PageData[0] as Department;
var team = PageData[1] as Department;
var enableEditMembers = (bool) PageData[2]; 
```

现在，PageData 由我们传递给 MFCView() 的参数创建。

虽然这个过程看起来很痛苦，但是一旦你完成了工作，你可以使用 MFCView 传递你想要的任意数量的参数，没有 ViewBag，没有 ViewData[]，甚至没有 ViewModel！ **看起来你正在调用一个正常的方法！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:53:13.673

我认为您可以使用`@Html.RenderAction`而不是 RenderPage。然后你可以设计一个动作，传递参数并选择你的局部视图。

有一个很好的博客[here](http://haacked.com/archive/2009/11/17/aspnetmvc2-render-action.aspx)关于这个。

# android - 在 textview 中将字体添加到特定单词

> ID：13950988
> 
> 赞同：0
> 
> 时间：2012-12-19T11:06:30.903
> 
> 标签：android, android-widget

我正在尝试将段落的标题设置为斜体（如果可能，将其设置为粗体），但并没有从中获得乐趣。这是我到目前为止所拥有的：

```
...sound and active.\n\n HEAD \n The skull is broad and... 
```

所以我想做的是将“HEAD”设置为斜体和粗体。

完整代码：

```
FlowTextView tv1 = (FlowTextView) findViewById(R.id.tv4);              
    Spanned spannable1 = Html.fromHtml("<html ... </html>");
    tv1.setText(spannable1);  // using html
    tv1.setText("...sound and active.\n\n HEAD \n The skull is broad and....   
    tv1.setTextSize(20);
    tv1.invalidate(); 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:09:44.330

尝试：

```
 FlowTextView tv1 = (FlowTextView) findViewById(R.id.tv4);              
        Spanned spannable1 = Html.fromHtml("<html ... </html>");
     tv1.setText(spannable1);  // using html
     tv1.setText(Html.fromHtml("...sound and active.\n\n <b> <i>HEAD </i></b> \n 
                                           The skull is broad and....   "));
        tv1.setTextSize(20);
        tv1.invalidate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:13:41.317

试试这个代码

字符串.xml

```
 <string name="text"> <b> Head </b> \n\n The skull is broad and </string> 
```

主.xml

```
 <TextView
       android:id="@+id/textView1"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:text="@string/text"
       android:textSize="16dp" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:53:14.457

你可以这样使用.. TextView tv = new TextView(this); tv.setTypeface(null,Typeface.ITALIC);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T11:23:20.783

尝试`android:textStyle="italic"`在您的 textView 标签中使用。它会正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T11:12:13.220

`strings.xml`使用所需的属性创建文本，如下所示

```
<string name="text">This is <b><i> StackOverflow </i></b></string> 
```

像这样在您的活动中调用此字符串

```
tv.settext(R.string.text); 
```

# svn - 基于环境变量/shell输出构建特定项目

> ID：13950991
> 
> 赞同：2
> 
> 时间：2012-12-19T11:06:40.410
> 
> 标签：svn, build, jenkins

我目前正在使用带有 svn 的 jenkins，并且希望根据我在服务器上生成的 shell 脚本生成特定的标签。该脚本将每五分钟导出我想要构建的标签名称列表；我希望 jenkins 收到这个列表，然后在列表中循环，构建每个标签。

我似乎只能获得参数化构建选项来构建单个修订版，并且看不到如何处理构建列表。我应该使用预构建 shell 选项吗？如果是这样，我将如何为脚本生成的每个标签启动构建？

本质上，我正在寻找构建由我在 jenkins 中的 shell 脚本返回的特定 svn 标签的最佳方法。此外，env 变量是否是 jenkins 接收的列表的最佳形式，因为我的脚本可以很容易地更改以符合 jenkins 可能需要的任何格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:56:36.890

参数化[触发器插件](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin)可能能够遍历参数列表（修订版 2.12 声称类似），但我不知道如何调用它，所以这里有几个替代方案：

一种解决方案是创建一个构建（“Tag Builder”），它采用一个参数来指定构建的标签。然后创建另一个构建，使用您的输入文件使用[Jenkins Remote API](https://wiki.jenkins-ci.org/display/JENKINS/Remote+access+API)启动 Tag Builder 的构建。主构建将包含一个 shell 构建步骤，该步骤遍历您的输入文件并获取启动作业的 Jenkins url。您的 Jenkins 实例上的 url`http://jenkins:8080/job/MY_JOB/api`描述了如何执行此操作。

这个解决方案的缺点是很难提取特定标签的构建趋势，因为所有标签实际上都在同一个构建中。（同样的缺点也适用于参数化触发器解决方案。）

根据标签的生命周期，更好的解决方案可能是使用 Jenkins Remote API 使用脚本和模板配置在外部创建构建。该 url`http://jenkins:8080/api`描述了如何创建作业。

# ios - `IBAction`/`IBOutlet` 是否可以在未在 ViewController 上定义时在 IB 中访问？

> ID：13950995
> 
> 赞同：0
> 
> 时间：2012-12-19T11:06:52.853
> 
> 标签：ios, xcode, interface-builder

我是 Objective-C 和 iPhone 开发的新手。

我有一个实现通用 UI 功能的集合类，例如。一个用于输入公式的编辑框，一个用于呈现结果的标签，以及一个用于执行计算的按钮。

我希望能够将此功能嵌入到各种项目中。我不想先生成 UI，而是想用`IBOutlet`和`IBAction`元素定义一个类，并且能够直接将它们与应用程序实现的任何 UI 链接起来（使用 Interface Builder）。

尽管它们是在不同于 ViewController 的类上实现的，但它们是否可以在 Interface Builder 中`IBAction`访问？`IBOutlet`'Objective-C' 是否可以使用此用例？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:10:47.233

是的。您可以在界面生成器中实例化每个类，然后使用它

例如一个计算器类

=> 将一个 NSObject 从调色板/库拖到 IB 的左窗格中，并将其在检查器中的类更改为 Calculator :) 然后你可以使用它

# soap - 基于骆驼内容的路由器 XPath 空肥皂返回

> ID：13950997
> 
> 赞同：2
> 
> 时间：2012-12-19T11:07:03.003
> 
> 标签：soap, cxf, apache-camel

我正在尝试从 CXF 端点检索 SOAP 消息，然后将其发送到基于内容的路由器，该路由器作为 XML 文件路由到目录。

这是我骆驼上下文中的路线：

```
<route>
    <from uri="cxf:bean:reportIncident?dataFormat=MESSAGE"/>
    <choice>
        <when>
            <xpath>/*/*/*[local-name()='inputReportIncident']/*[local-name()='familyName']='Holt'</xpath>
            <to uri="file:target/messages/contentbasedrouting/a?fileName=a.xml"/>
        </when>
        <otherwise>
            <to uri="file:target/messages/contentbasedrouting/otherwise?fileName=otherwise.xml"/>
        </otherwise>
    </choice> 
</route> 
```

基于内容的路由器工作正常，但它会向目录发送一个空白 XML 文件，并且我的 SOAP 消息消失了。

如果我从目录而不是 CXF 端点获取 SOAP 消息，它工作正常。如果我这样做了：

```
<from uri="file:target/messages/incoming"/> 
```

代替：

```
<from uri="cxf:bean:reportIncident?dataFormat=MESSAGE"/> 
```

任何想法为什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:11:41.933

是的，它应有的流媒体。请参阅此常见问题解答：[http ://camel.apache.org/why-is-my-message-body-empty.html](http://camel.apache.org/why-is-my-message-body-empty.html)