# StackOverflow 问答 13658000-13658999

# python - 如何测试抛出异常的函数

> ID：13658000
> 
> 赞同：0
> 
> 时间：2012-12-01T09:09:36.267
> 
> 标签：python, exception

> **可能重复：**
> [如何测试 Python 函数是否引发异常？](https://stackoverflow.com/questions/129507/how-do-you-test-that-a-python-function-throws-an-exception)

我必须进行白盒和黑盒测试，所以我想知道如何测试一个引发异常的函数，比如这个

```
class validator_client():

    def validate_client(self,client):
        erori=[]
        if client.get_identitate()=="":
            erori.append("Nu exista ID!")
        if client.get_nume()=="":
            erori.append("Nu exista nume!")
        if (client.get_filme_inchiriate()!="da" ) and (client.get_filme_inchiriate()!="nu") :
            erori.append("Campul 'Filme inchiriate' completat gresit!")
        if len(erori)>0:
            raise ValidatorException(erori) 
```

我已经阅读了一些关于 assertRises() 的内容，但我无法使用这种方法导入模块，在 stackowerflow 上找到了这个：

```
from testcase import TestCase

import mymod

class MyTestCase(TestCase):
    def test1(self):
        self.assertRaisesWithMessage(SomeCoolException,
                                     'expected message',
                                      mymod.myfunc) 
```

但我无法让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T09:37:58.030

这是一个工作示例，它是您将在 python 文档中找到的简化版本。它检查是否`random.shuffle`引发了`TypeError`异常。

```
import random, unittest

class TestSequenceFunctions(unittest.TestCase):
    def test_shuffle(self):
        self.assertRaises(TypeError, random.shuffle, (1,2,3))

unittest.main() 
```

# c++ - 模板类中对友元函数的未定义引用

> ID：13658004
> 
> 赞同：5
> 
> 时间：2012-12-01T09:10:33.427
> 
> 标签：c++, templates

以下代码在文件 Heap.h 中

```
 template <typename T>
    class Heap {
    public:
         Heap();
         Heap(vector<T> &vec);
         void insert(const T &value);
         T extract();
         T min();
         void update(int index, const T &value);

         /* for debug */
         friend ostream &operator<< (ostream &os, const Heap<T> &heap);
         #if 0
         {
            for (int i = 0; i < heap.vec_.size(); i++) {
                 os << heap.vec_[i] << " ";
            }

            return os;
         }
         #endif

         private:
          void minHeapify(int index);
          int left(int index);
          int right(int index);
          int parent(int index);
          void swap(int, int);
          vector<T> vec_;
    };

    template <typename T>
    ostream &operator<<(ostream &os, const Heap<T> &heap)
    {
        for (int i = 0; i < heap.vec_.size(); i++) {
            os << heap.vec_[i];
        }

        return os;
    } 
```

在 testheap.cpp 文件中，我使用了这个模板类，当我编译时，出现对​​ << 运算符重载函数错误的未定义引用。对这种情况感到困惑。当我将函数的定义放在类中时，它就起作用了。操作系统是 Ubuntu，编译器是 g++。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T09:40:47.500

以下应该有效：

```
template <typename T>
class Heap {
public:
     ...
     template<class U>
     friend ostream &operator<<(ostream &os, const Heap<U> &heap);
     ...
};

template <typename T>
ostream &operator<<(ostream &os, const Heap<T> &heap)
{
     ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T09:14:21.300

尝试这个 ：

```
template <typename T2> 
friend ostream &operator<< (ostream &os, const Heap<T2> &heap); 
```

我有同样的问题。这是[问题](https://stackoverflow.com/questions/13451867/cannot-understand-friend-functions-in-a-template-class)

# c# - FFT 的音频文件读取

> ID：13658006
> 
> 赞同：4
> 
> 时间：2012-12-01T09:10:42.990
> 
> 标签：c#, signal-processing, fft

第一次问虽然我已经访问了一段时间。

这是问题所在：

我目前正在尝试使用以下属性隔离 WAVE 数据文件中包含的信号的基频：

*   PCM 音频格式，即线性量化
*   8000 赫兹采样率
*   每个样本 16 位
*   16000 字节速率

只有一个通道，没有交错。

获取字节值：

```
System.IO.FileStream WaveFile = System.IO.File.OpenRead(@"c:\tet\fft.wav");
        byte[] data = new byte[WaveFile.Length];
        WaveFile.Read(data,0,Convert.ToInt32(WaveFile.Length)); 
```

将其转换为双精度数组：

```
 for (int i = 0; i < 32768; i++)//this is only for a relatively small chunk of the file 
        {
           InReal[i] =BitConverter.ToDouble(data, (i + 1) * 8 + 44);
        } 
```

并最终将其传递给变换函数。

```
 FFT FftObject = new FFT();
       FftObject.Transform(InReal, InImg, 0, 32768, out outReal, out outImg, false); 
```

现在第一个问题，据我了解，wav 文件的 PCM 值应该在 -1 和 1 的边界内，但是当转换为 Double 时，我得到了这个值：

```
 2.65855908666825E-235
 2.84104982662944E-285
-1.58613492930337E+235
-1.25617351166869E+264
 1.58370933499389E-242
 6.19284549187335E-245
-2.92969500042228E+254
-5.90042665390976E+226
 3.11954507295188E-273
 3.06831908609091E-217
 NaN
 2.77113146323761E-302
 6.76597919848376E-306
-1.55843653898344E+291 
```

这些是这些限制中的第一个数组，也是数组的其余部分。

我的结论是我有某种代码故障，但我似乎能够找到它。任何帮助，将不胜感激。

第二个问题，因为我只在响应向量中向 FFT 算法提供真实数据，我是否也应该只期望真实部分数据？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T17:12:21.330

我终于能够找出问题所在了准备波形文件的函数中的代码。

```
public static Double[] prepare(String wavePath, out int SampleRate)

    {
        Double[] data;
        byte[] wave;
        byte[] sR= new byte[4];
        System.IO.FileStream WaveFile = System.IO.File.OpenRead(wavePath);
        wave = new byte[WaveFile.Length];
        data = new Double[(wave.Length - 44) / 4];//shifting the headers out of the PCM data;
        WaveFile.Read(wave,0,Convert.ToInt32(WaveFile.Length));//read the wave file into the wave variable
        /***********Converting and PCM accounting***************/
        for (int i = 0; i < data.Length - i * 4; i++)
        {
            data[i] = (BitConverter.ToInt32(wave, (1 + i) * 4)) / 65536.0;
            //65536.0.0=2^n,       n=bits per sample;
        }
        /**************assigning sample rate**********************/
        for (int i = 24; i < 28; i++)
        {
            sR[i-24]= wave[i];
        }
        SampleRate = BitConverter.ToInt32(sR,0);
        return data;
    } 
```

您现在需要做的就是将采样率和返回的结果发送到您的 FFT 算法。代码未处理，因此请根据需要自行处理。我已经测试了电话录音、忙音、铃声和语音，它可以正常工作。

# google-bigquery - 在 bigquery 中扫描嵌套\重复数据的成本

> ID：13658013
> 
> 赞同：2
> 
> 时间：2012-12-01T09:11:40.813
> 
> 标签：google-bigquery

我知道在 bigquery 查询中扫描数据的定价取决于访问的列。这如何处理嵌套和重复的数据？是否扫描了每条记录的所有数据？或者，它是否取决于被扫描的节点？嵌套数据中的列是否被视为单独的列？

感谢您对此的任何澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T21:36:47.397

这是一个很好的问题 - 简短的回答是肯定的，BigQuery 只处理您指定的嵌套节点。BigQuery 的列式数据存储的一个有用特性是嵌套列可以表示为单独的列。如果您没有明确选择它们，则不会处理嵌套记录中的其他子字段。

# javascript - 原生 javascript 中的 jQuery index()

> ID：13658021
> 
> 赞同：32
> 
> 时间：2012-12-01T09:13:00.723
> 
> 标签：javascript, jquery

根据 jQuery api，对 .get() 的补充操作，它接受一个索引并返回一个 DOM 节点，`.index()`可以接受一个 DOM 节点并返回一个索引。假设我们在页面上有一个简单的无序列表：

```
<ul>
  <li id="foo">foo</li>
  <li id="bar">bar</li>
  <li id="baz">baz</li>
</ul> 
```

`.index()`将返回匹配元素集中第一个元素相对于其兄弟元素的位置：

```
alert('Index: ' + $('#bar').index(); 
```

我们取回列表项从零开始的位置：

```
Index: 1 
```

我只是想知道，我们如何使用**JavaScript**做同样的事情？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-01T09:15:35.073

您可以构建自己的功能：

```
function indexInParent(node) {
    var children = node.parentNode.childNodes;
    var num = 0;
    for (var i=0; i<children.length; i++) {
         if (children[i]==node) return num;
         if (children[i].nodeType==1) num++;
    }
    return -1;
} 
```

[演示（打开控制台）](http://jsfiddle.net/QNRd6/)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-10-14T21:07:05.417

我已经修改了[Travis J 的答案](https://stackoverflow.com/a/13658041/104380)，不包括 TextNodes 并从中制作了一个函数。

您可以在控制台中运行它并查看（在 stackoverflow 上）。

## 经典方式：

```
function getNodeindex( elm ){ 
    var c = elm.parentNode.children, 
        i = c.length;

    while(i--) 
      if( c[i] == elm ) 
        return i
} 
```

## 使用 ES2015：

```
const getNodeindex = elm => [...elm.parentNode.children].findIndex(c => c == elm)

// or

const getNodeindex = elm => [...elm.parentNode.children].indexOf(elm) 
```

### 演示：

```
const getNodeindex = elm => [...elm.parentNode.children].indexOf(elm)
```

```
<button onclick="console.log(  getNodeindex(this)  )">get index</button>
<button onclick="console.log(  getNodeindex(this)  )">get index</button>
<button onclick="console.log(  getNodeindex(this)  )">get index</button>
```

* * *

我还想指出关于同一问题的另一个线程，它有一个[很好的答案](https://stackoverflow.com/a/11762728/104380)（对于寻求旧版 IE 支持的人）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-03-19T07:18:23.063

不需要循环，请`Array#indexOf`调用`.parentElement.children`：

```
const element = document.querySelector('#baz');

[].indexOf.call(element.parentElement.children, element);
// => 2 
```

你甚至可以在一个随机的元素列表上调用它，就像在 jQuery 中一样：

```
const list = document.querySelectorAll('li');
const element = document.querySelector('#baz');

[].indexOf.call(list, element);
// => 2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-19T17:46:43.993

您可以通过使用 previousElementSibling 和递增的 dom 树向上查找此信息。

```
var getElementIndex(element) {
    if (!element) {
        return -1;
    }
    var currentElement = element,
        index = 0;

    while(currentElement.previousElementSibling) {
        index++;
        currentElement = currentElement.previousElementSibling;
    }
    return index
}

getElementIndex(document.getElementById('#bar')); 
```

这是对 previousElementSibling 的浏览器支持：

[https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/previousElementSibling](https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/previousElementSibling)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-31T16:48:23.033

通过这种方式可以找到索引

```
 Array.from(children).findIndex(element => element.id === "bar") 
```

# ruby - 为什么在 Ruby Graph Library (RGL) 中生成点文件而不是 jpg 文件？

> ID：13658023
> 
> 赞同：2
> 
> 时间：2012-12-01T09:13:47.573
> 
> 标签：ruby, ruby-rgl

我已经编写了以下代码。当我运行此文件时，会生成**graph.dot**文件而不是**graph.jpg**。我不明白为什么会这样。有没有人有任何想法？

我的代码如下：
**`require 'rgl/adjacency'`
`require 'rgl/dot'`
`dg=RGL::DirectedAdjacencyGraph[1,2,2,3,2,4,4,5,6,4,1,6]`
`dg.write_to_graphic_file('jpg')`**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T09:31:06.843

RGL 使用点文件作为中间格式来生成图像格式，它本身并不生成它们。这就是您看到**graph.dot**文件的原因。

如果你有一个可用的点二进制文件（[GraphViz](http://www.graphviz.org/)包的一部分），rgl 将调用它来生成一个**graph.jpg**文件。

你可以在项目主页下载[GraphViz](http://www.graphviz.org/)包，或者使用 homebrew（如果你在 Mac 上）用`brew install graphviz`.

# sql - 不同表格中的总和

> ID：13658028
> 
> 赞同：6
> 
> 时间：2012-12-01T09:14:25.340
> 
> 标签：sql, sum

我对 SQL 查询有疑问。
我有表A：

```
productA priceA  
P1        18  
P2        35  
P1        22  
P2        19 
```

还有表B：

```
productB priceB  
P1        3  
P2        15  
P1        80  
P2        96 
```

我想要两个表中两个产品的总和。

```
product price  
P1       123  
P2       165 
```

我想总结两个表的总和。
我正在尝试这个查询，但它是错误的。

```
SELECT productA, 
     (SELECT SUM(priceA) FROM tableA GROUP BY productA), 
     (SELECT SUM(priceB) FROM tableB GROUP BY productB)
FROM tableA, tableB
WHERE productA = productB
GROUP BY productA 
```

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T09:15:50.663

您可以使用 a`union`来合并表，并`group by`在结果上：

```
select  product
,       sum(price)
from    (
        select  productA as product
        ,       priceA as price
        from    TableA
        union all
        select  productB
        ,       priceB
        from    TableB
        ) as SubQueryAlias
group by
        product 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T09:20:01.033

这实际上是总和的总和：

```
select
    product,
    sum(price)
from (
    select productA as product, sum(priceA) as price from tableA group by 1
    union all
    select productB, sum(priceB) from tableB group by 1
) 
group by 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T17:48:51.170

因为连接似乎是解决这个问题的一种自然方式，所以这里有一个解决方案，`join`而不是`union`. 它首先聚合子查询中的数据，然后将结果连接在一起：

```
select coalesce(a.productA, b.productB) as product,
       coalesce(a.PriceA, 0) + coalesce(b.PriceB, 0) as price
from (select productA, sum(PriceA) as PriceA
      from TableA
      group by productA
     ) a full outer join
     (select productB, sum(PriceB) as PriceB
      from TableB
      group by productB
     ) b
     on a.productA = b.prodctB 
```

`full outer join`如果表格有不同的产品集，我正在使用。因此，我需要`coalesce`在`select`声明中包含。

# javascript - 如何在插件 sdk 的插件脚本中找到 mozilla 的版本？

> ID：13658031
> 
> 赞同：0
> 
> 时间：2012-12-01T09:14:35.437
> 
> 标签：javascript, firefox-addon-sdk

我想确定我的插件将运行的 Firefox 版本。我知道我们可以在 content-script(page-mod) 中使用 jquery 来做到这一点。但我想在任何内容脚本附加到任何页面之前知道它。

为了进一步澄清......在我的附加脚本（main.js）中，我正在向我的服务器发出请求，作为其中的一部分，我需要发送浏览器版本和浏览器名称，以接收一些特定于浏览器版本的设置。

在安装插件后加载第一页后，我可以`jQuery.browser.version`在内容脚本中使用它来确定这一点，并使用简单存储将其传达给插件脚本`self.emit('event-name',payload)`并存储它。在随后的请求中，我将不得不检查浏览器版本是否已更新。

我想要的是一种更直接的方式。我想可能是附加 sdk 已经在某处提供了它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T05:22:17.530

使用 add-on-sdk 的低级 api xul-app 找到了答案：

```
 var xul_app=require('xul-app');
    console.log(xul_app.version);
    console.log(xul_app.name); 
```

# android - 在 textView 中设置 Paint.STRIKE_THRU_TEXT_FLAG

> ID：13658052
> 
> 赞同：5
> 
> 时间：2012-12-01T09:18:49.243
> 
> 标签：android, listview

我有一个问题，当用户点击`checkbox`里面时`listView`，`textView`它不会收费`Paint.STRIKE_THRU_TEXT_FLAG)`。当用户单击 时`checkbox`，打击线将显示在 中`textView`。

```
 public void bindView(View row, Context context, Cursor c) {
            // TODO Auto-generated method stub

            listName = (TextView) row.findViewById(R.id.produtName);
            listCheck = (CheckBox) row.findViewById(R.id.check);
                            Item tag = (Item) listCheck.getTag();
            String pos = helper.getProductId(c);
            Log.i(CN, "getView: no tag on " + pos);
            tag = new Item();
            tag.id = Integer.parseInt(pos);
            listCheck.setTag(tag);
            listCheck.setChecked(false);
                        String status = helper.getProductStatusT(c);
            if (Integer.parseInt(status) == 0) {
                listCheck.setChecked(true);
                listName.setPaintFlags(listName.getPaintFlags()
                        | Paint.STRIKE_THRU_TEXT_FLAG);
            } else {
                listCheck.setChecked(false);
                listName.setPaintFlags(listName.getPaintFlags()
                        & (~Paint.STRIKE_THRU_TEXT_FLAG));
            }

           public View getView(int position, View convertView, ViewGroup parent) {
            View tmpView = super.getView(position, convertView, parent);
            Log.i(CN, "getView:" + position);
            final CheckBox cBox = (CheckBox) tmpView.findViewById(R.id.check);
            Item tag = (Item) cBox.getTag();

            cBox.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Item tag = (Item) v.getTag();
                    if (tag == null)
                        Log.i(CN, "checkbox clicked no tag");

                    else

                        helper.updateStatus(tag.id);

                    Log.i(CN, "checkbox clicked tag=" + tag.id);

                 }
                    if (cBox.isChecked()) {
                        Log.i(CN, " Checked!");
                        // do some operations here
                    } else {
                        Log.i(CN, "NOT Checked!");
                        // do some operations here
                        helper.updateStatus2(tag.id);
                    }
                }
            });
            return tmpView;
        } 
```

复选框工作正常。但问题是当用户点击复选框时，罢工线不会显示出来。任何人都知道我应该把

```
listName.setPaintFlags(listName.getPaintFlags()| Paint.STRIKE_THRU_TEXT_FLAG); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T10:44:46.117

我想我可能知道您现在可能正在尝试什么，看看以下是否对您有用：

```
public class CustomCursorAdapter extends CursorAdapter {

    private LayoutInflater inflator;
    private boolean[] arrCb;

    public CustomCursorAdapter(Context context, Cursor c, int flags) {
        super(context, c, flags);
        inflator = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        arrCb = new boolean[c.getCount()];
        // ^ this will hold the checkbox states
        resetArrcb();
    }

    @Override
    public View newView(Context context, Cursor c, ViewGroup parent) {
        View v = inflator.inflate(R.layout.lv_row, parent, false);
        // inflate the xml that the textView and checkbox is in
        return v;
    }

    @Override
    public void bindView(View row, Context context, final Cursor cursor) {
        // you do everything else here. there's no need for getView when you use newView and bindView
        final TextView listName = (TextView) row.findViewById(R.id.produtName);
        final CheckBox listCheck = (CheckBox) row.findViewById(R.id.check);

        if (arrCb[cursor.getPosition()]) {
            listCheck.setChecked(true);
            listName.setPaintFlags(listName.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG);
        } else {
            listCheck.setChecked(false);
            listName.setPaintFlags(listName.getPaintFlags() & (~Paint.STRIKE_THRU_TEXT_FLAG));
        }

        listCheck.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                if (listCheck.isChecked()) {
                    arrCb[cursor.getPosition()] = true;
                } else {
                    arrCb[cursor.getPosition()] = false;
                }
                notifyDataSetChanged();
            }
        });

    }

    private void resetArrcb() {
        // i'm using this to fill the collection but you could easily loop through your 
        // database to fill it with the correct values.
        for (int i = 0; i < arrCb.length; i++) {
            arrCb[i] = false;
        }
    }

} 
```

然后我不确定，但是您似乎想根据所选内容调整数据库。我建议在一切都结束时，当你的活动被退出时这样做。也许设置一个新方法，它只会遍历复选框集合，然后在数据库中执行您想要的操作。它应该与表行匹配 1 到 1。

**编辑**

更好的是，创建一个 getter 方法来返回您的数组，这样您就可以在您的活动中直接执行数据库操作。

# java - 如何在java数组中查找重复项？

> ID：13658058
> 
> 赞同：-2
> 
> 时间：2012-12-01T09:19:32.660
> 
> 标签：java, arrays, duplicates

我正在尝试计算数组中有多少重复项。

例子：

```
[0, 2, 0] would return 2, [0, 0, 0] would return 3, [0, 1, 2] = 0 
```

到目前为止，当所有三个项目都相等时，我已经让它工作了，但我不确定为什么它返回的结果比两个相同的项目少一个。

```
 int equal = 0;

    for(int i = 0; i < recent.length; i++) {
        for(int j = i; j < recent.length; j++) {
            if(i != j && recent[i].equals(recent[j])) {
                equal++;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T16:25:59.327

下面的代码可以完美地找到重复项

```
 int array[] = {1,2,3,4,5,2,3,4,5,3,4,5,4,5,5};

    HashMap<Integer,Integer> duplicates = new HashMap<Integer,Integer>();
    for(int i=0; i<array.length; i++)
    {
        if(duplicates.containsKey(array[i]))
        {
            int numberOfOccurances = duplicates.get(array[i]);
            duplicates.put(array[i], (numberOfOccurances + 1));
        }else{
            duplicates.put(array[i], 1);
        }
    }
    Iterator<Integer> keys = duplicates.keySet().iterator();
    System.out.print("Duplicates : " );
    while(keys.hasNext())
    {
        int k = keys.next(); 
        if(duplicates.get(k) > 1)
        {
            System.out.print(" "+k);
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T10:02:25.180

I think that having nested loops is quite inefficient. You should be able to do it in o(n) rather than o(n^2).

If you time yours against the following...

```
public void run() {
    int[] array = createRandomArray(2000000, 1000000);
    System.out.println(countNumDups1(array));
}

private int[] createRandomArray(int numElements, int maxNumExclusive) {
    int[] array = new int[numElements];
    Random random = new Random();
    for (int i = 0; i < array.length; i++) {
        array[i] = random.nextInt(maxNumExclusive);
    }
    return array;
}

private int countNumDups1(int[] array) {
    Map<Integer, Integer> numToCountMap = new HashMap<>();
    for (int i = 0; i < array.length; i++) {
        Integer key = array[i];
        if (numToCountMap.containsKey(key)) {
            numToCountMap.put(key, numToCountMap.get(key) + 1);
        }
        else {
            numToCountMap.put(key, 1);
        }
    }
    int numDups = 0;
    for (int i = 0; i < array.length; i++) {
        Integer key = array[i];
        if (numToCountMap.get(key) > 1) {
            numDups++;
        }
    }
    return numDups;
} 
```

I think you'll find the above is much faster even considering the horrible inefficiency of autoboxing and object creation.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T09:27:00.250

您的算法在以下方面存在缺陷：对于数组中的每个元素，您查看该元素之后的所有元素，如果它们恰好相等，则增加计数器。但是，当您有 3 个相同的元素时，您会将最后一个元素计算两次 - 当您为第一个和第二个元素运行内部循环时。此外，您永远不会计算第一个元素。

因此，它偶然适用于其他输入，`[0, 0, 0]`但不适用于其他输入。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T09:28:34.900

您提供的代码计算等价，因此每次一个元素等于另一个元素时它都会添加一个。

听起来您想要的是重复项目的数量，这与（长度 - 没有重复项目的数量）相同。我将把后者称为“uniqueItems”。

我会推荐以下内容：

```
// set of every item seen
Set<Integer> allItems = new HashSet<Integer>();
// set of items that don't have a duplicate
Set<Integer> uniqueItems = new HashSet<Integer>();

for(int i = 0; i < recent.length; i++) {
    Integer val = i;
    if(allItems.contains(val)) {
        // if we've seen the value before, it is not a "uniqueItem"
        uniqueItems.remove(val); 
    } else {
        // assume the value is a "uniqueItem" until we see it again
        uniqueItems.add(val);
    }
    allItems.add(val);
}
return recent.length - uniqueItems.size(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T17:48:12.297

```
int intArray[] = {5, 1, 2, 3, 4, 5, 3, 2};  

String val = "";

int c = 1;

Map<Integer, Integer> nwmap = new HashMap<Integer, Integer>();  

for (int i = 0; i < intArray.length; i++) {

    Integer key = intArray[i];

        if(nwmap.get(key) != null && nwmap.containsKey(key)){

        val += " Duplicate: " +String.valueOf(key)+"\n";

    }else{

        nwmap.put(key, c);

            c++;

    }

}

LOG.debug("duplicate value:::"+val); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-17T10:11:38.230

```
 public void TotalduplicateNumbers {
    int a[] = {2,8,2,4,4,6,7,6,8,4,5};
    Map<Integer,Integer> m = new HashMap<Integer,Integer>();
    for(int i=0;i<a.length;i++){            

            if(!m.containsKey(a[i]))
            {
                m.put(a[i], 1);
            }
            else
            {
                m.put(a[i], (m.get(a[i])+1));
            }

    }

    for(Integer i:m.keySet()){
        System.out.println("Number "+i+" "+"Occours "+m.get(i)+" time,");
    }
} 
```

我们有一个包含 11 个数字的数组，逻辑是使用这些数字创建一个地图。其中地图的 KEYS 将是用户必须输入的实际数字，而不是。该实际编号的发生时间。将是该 KEY 的值。在这里， containsKey() 方法检查映射是否已经包含该键，并在应用时返回布尔值 true 或 false。如果它不包含，则将该键添加到映射中，其对应的值应为 1 否则键将已被包含在地图中，因此使用 get() 获取该键的值并将其递增 1。最后打印地图。

输出： -

2号2次，4号3次，5号1次，6号2次，7号1次，8号2次，

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-10T08:34:04.613

```
import java.util.HashMap;
import java.util.Iterator;
import java.util.LinkedHashMap;
import java.util.Map;

public class ArrayDuplicateCount {

    /**
     * @author:raviteja katari
     */
    public static void main(String[] args) {
        int intArray[] = {5, 1,4,4,4,5,1,2,1,2,5,5};  

        //for counting duplicate items
        int c = 0;

        //creating map collection to hold integers as keys and Cont as value
        Map<Integer, Integer> nwmap = new LinkedHashMap<Integer, Integer>();  

        for (int i = 0; i <intArray.length; i++) {

            //Assigning array element to key 
            Integer key = intArray[i];

                //this code checks for elemnt if present updates count value else 
                //put the new Array elemnt into map and increment count

                if(nwmap.containsKey(key)){

                    //updating key value by 1 
                    nwmap.put(key, nwmap.get(key) + 1);

            }else{

                //Adding new array element to map and increasing count by 1
                  nwmap.put(key, c+1);

                   }

                           }
          //printing map
        System.out.println(nwmap);
    }

} 
```

输出：{5=4, 1=3, 4=3, 2=2}

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-01T09:33:27.443

您正在计算具有相等值的索引对的数量。您声称想要的是其中包含多个元素的所有相等元素集的总大小。

我会使用 Map 或类似的方法来计算给定值的出现总数。最后，迭代键值，为具有多个外观的每个键添加出现次数。

# c# - 访问 DataTemplate 中的 TextBlock 文本

> ID：13658059
> 
> 赞同：1
> 
> 时间：2012-12-01T09:19:45.390
> 
> 标签：c#, xaml, windows-8

我是 C#/XAML 编码的新手，我有以下问题。

我有这个 ListView 并且我已将附加模板添加到生成的项目中

```
 <ListView x:Name="lvItems" HorizontalAlignment="Left" Height="251" Margin="10,42,0,0" VerticalAlignment="Top" RenderTransformOrigin="0.5,0.5" Width="1346" SelectionChanged="lvItems_SelectionChanged" Foreground="{x:Null}" ItemTemplate="{StaticResource Standard500x130ItemTemplate}"> 
```

如果我去编辑模板，我会得到以下代码

```
<!-- Grid-appropriate 500 by 130 pixel item template as seen in the GroupDetailPage -->
<DataTemplate x:Key="Standard500x130ItemTemplate">
  <Grid Height="110"
        Width="480"
        Margin="10">
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="Auto" />
      <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>
    <Border Background="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}"
            Width="110"
            Height="110">
      <Image Source="{Binding Image}"
             Stretch="UniformToFill"
             AutomationProperties.Name="{Binding Title}" />
    </Border>
    <StackPanel Grid.Column="1"
                VerticalAlignment="Top"
                Margin="10,0,0,0">
      <TextBlock Text="{Binding Title}"
                 Style="{StaticResource TitleTextStyle}"
                 TextWrapping="NoWrap" />
      <TextBlock Text="{Binding Subtitle}"
                 Style="{StaticResource CaptionTextStyle}"
                 TextWrapping="NoWrap" />
      <TextBlock Text="{Binding Description}"
                 Style="{StaticResource BodyTextStyle}"
                 MaxHeight="60" />
    </StackPanel>
  </Grid>
</DataTemplate> 
```

现在我想访问 Texblocks Title、Subtitle、Description 来添加我从 XML 文件中解析的数据。我想我需要访问每个 TextBlock 的绑定，但我不知道该怎么做。你能帮助我吗？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T09:28:40.080

您需要设置 的`ItemsSource`属性`ListView`，然后根据您创建的模板为每个项目填充字段。

```
lvItems.ItemsSource = MyObjectsCollection; 
```

在这里，我假设`MyObjectCollection`是您的对象的集合。从您的模板来看，数据类应如下所示：

```
public class TheObject
{
    public string Title { get; set; }
    public string Subtitle { get; set; }
    public string Description { get; set; }
    public string Image { get; set; }
} 
```

所以`MyObjectsCollection`应该是`TheObject`对象的数组（或 IEnumerable 或 List）。

# assembly - 正确编译多个 asm 文件并将其链接到 .vfd - 用于 Oracle VM？

> ID：13658063
> 
> 赞同：3
> 
> 时间：2012-12-01T09:20:37.747
> 
> 标签：assembly, virtual-machine, nasm, ld, floppy

最近我一直想进入汇编编码，只是为了获得一些经验。我决定研究它并获得了一些好的结果（尽管它很简单），但是一切仍然模糊不清，我非常感谢其他人就如何正确地将**多个**.asm 文件构建到**.. &.. & ..**完成**Oracle VM的****.vfd**或**.img**文件。

 **所以在过去几周的空闲时间里，我一直在网络上进行研究，试图找到一种工作方法，使我能够：

```
1\. Compile my .asm files into individual .obj files
2\. Link these multiple files into one .bin
3\. Place this .bin into a .vfd or .img
4\. Finally ran on the Oracle VM. 
```

我目前在**Windows 7 64 位系统**上使用的程序是：

（全部通过**MinGW**）

```
1\. nasm   - to compile the asm to .obj / .bin files
2\. ld     - to link .obj files into a .bin (I think)
3\. dd     - to create a .img file from a .bin file 
```

经过一段时间的混乱，我已经能够将**单个 .asm**文件编译**为**.bin 文件，然后使用**dd**将其放入**.img**（以下来自在线教程）：

 **（按以下顺序执行这些命令的 bat 文件）

```
1\. nasm -f bin -o bootloader.bin bootloader.asm  
2\. dd if=bootloader.bin of=output.img count=1440 
```

然后我只运行读取 output.img 并正确显示它的 Oracle VM。耶。

现在。我已经用 Visual **c++**编码了好几年了，我通常在单个解决方案中使用许多文件。我觉得在asm编码的时候，我应该也可以有**多个文件**。所以我已经阅读了很多人使用**'ld'** - 一个将 .obj 文件“*连接*”到 .bin 文件的**链接器？**

 *所以我将上面的bat文件编辑为以下内容：

```
1a. nasm -f bin -o bootloader.bin bootloader.asm 
1b. nasm -f bin -o kernel.bin     kernel.asm 
2\.  ld -o link.bin bootloader.obj kernel.obj 
3\.  dd if=link.bin of=output.img  count=1440 
```

我得到的第一个错误是：“无法对非 PE 输出文件执行 PE 操作”。在我用谷歌搜索..和*谷歌搜索*......和**谷歌搜索**......和***谷歌搜索***......（一个链接到下一个）之后，我找不到任何其他有效的方法 - 我只是遇到了更多错误！我真的迷路了。- 我尝试了几个不同的程序（例如 objcopy）、**许多不同的参数**等。但我没有取得太大进展。我需要指导。:)

这是我最后的问题。将这些文件**与**ld一起**“链接”会给我想要的结果****吗**？（一个最终二进制文件中的多个文件）以及如何在我的**Windows 系统上****正确**执行此操作？

 ******我对 asm 或这些程序并不深入，所以在我来到这里之前，**我已经尽可能****多**地阅读了。所以，如果你能保持解释清楚明了。对不起，如果它有很多要求，请不要烧烤。:)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T22:30:35.000

我认为没有任何方法可以“链接”多个平面二进制文件（Nasm 的`-f bin`输出）。如果我们被迫使用 (G)as，则没有`-f bin`输出。`ld`将从 ELF 可链接对象创建平面二进制文件。我认为命令行类似于`ld -oformat binary -T.text=0x7C00 -o boot.bin boot.o`. 我不知道MinGW`ld`是否会这样做，我不知道它是否会处理多个文件。至少可以尝试一些东西...

无论如何，链接对您的引导扇区没有任何好处。当您的计算机（或 VM？）启动时，仅加载第一个扇区 - 正好 512 个字节。您必须提供代码以将“kernel.bin”（或“stage2.bin”从磁盘（或 .vfd？）加载到内存中的已知位置。为了轻松找到此进一步代码，方便让它位于引导扇区之后。您可以使用`cat`或`copy`（我认为您需要该`/b`选项）将“boot.bin”和“kernel.bin”组合到一个文件中 - 然后`dd`将它放到软盘（或.vfd？ ）。

“kernel.bin”更灵活。它可以大于 512 字节，并且可以从多个目标文件构建。您将需要一个平面二进制文件，或者您可以为某些可执行格式提供加载程序 - 可能是 MZ，因为您仍处于 16 位模式。切换到 32 位（或 64 位）Pmode 后，您可能需要安排加载 PE 或 ELF 或任何可执行格式...

我所知道的这类事情的最佳信息来源是[http://www.osdev.org](http://www.osdev.org) - 如果你还没有，请查看。快乐开机！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-31T06:53:22.970

我相信您正在寻找`include`指令的功能。

例如：

```
;****in kernel.asm
%include "bootloader.asm"
;... continue with kernel code 
```

and compile kernel.asm as you normally would. The code in `bootloader.asm` will be executed just as if it were in `kernel.asm` where the `include` line is. This allows building a single binary from multiple asm source files.

Another way is to pre-include with

```
nasm -f bin -o kernel.bin kernel.asm -p bootloader.asm 
```

Also see [http://www.nasm.us/doc/nasmdoc4.html#section-4.6](http://www.nasm.us/doc/nasmdoc4.html#section-4.6)

and [http://www.nasm.us/doc/nasmdoc2.html#section-2.1.17](http://www.nasm.us/doc/nasmdoc2.html#section-2.1.17)***********

# php - PHP Рow 如何从行中删除单个值？

> ID：13658065
> 
> 赞同：0
> 
> 时间：2012-12-01T09:21:07.790
> 
> 标签：php, row

**代码：**

```
$str = 'test2$test2$test3$test3$test4';
$id = 'test2'; 
```

我们需要找到**$id**的值并根据字符串中的位置**test2**删除**$test2**或**test2$ ；**

 **要使用搜索：

```
$substr_count1 = substr_count ($str, '$test2');
$substr_count2 = substr_count ($str, 'test2$');
if ($substr_count1> 0) {
//if exist $test2 then need delete single value $test2 from row and row will be
// $str = 'test2$test3$test3$test4'
// find the value of $test2
// how to remote one value $test2
}
elseif ($substr_count2> 0) {
//if exist test2$ then need delete single value test2$ from row and row will be
// $str = 'test2$test3$test3$test4'
// find the value of test2$
// how to remote one value test2$
} 
```

如何删除单个值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T09:36:38.210

您`explode()`将字符串删除，然后`implode()`将其重新组合在一起：

```
$str = 'test2$test2$test3$test3$test4';
$id = 'test2';

$array = explode('$', $str);

$result = implode('$', array_diff($array, array($id)));

var_dump($result); 
```

### 阅读更多：

*   [`explode()`](http://php.net/explode)
*   [`implode()`](http://php.net/implode)
*   [`array_diff()`](http://php.net/array_diff)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T09:34:10.007

如果存在，则需要替换第一次出现的“$test2”，如果不存在，则替换第一次出现的“test$”：

```
$str = 'test2$test2$test3$test3$test4';
$id = 'test2';

$position1=strpos($str,'$'.$id);
$position2=strpos($str,$id.'$');

//if the first occurence is the '$test2':
if($position1<$position2)
{
$str= preg_replace('/'.'\$'.$id.'/', '', $str, 1);
}
//If the first occurence is the 'test$'
else
{
$str= preg_replace('/'.$id.'\$'.'/', '', $str, 1);
}

echo $str; 
```**

# c# - 如何使用 C# 将自定义对象正确存储在隔离存储中？

> ID：13658071
> 
> 赞同：0
> 
> 时间：2012-12-01T09:22:24.827
> 
> 标签：c#, isolatedstorage, windows-phone-8

使用 WP8 进行辅助项目，但无法让 IsolatedStorage 正常工作。我查看了数十篇看似在问同样问题的帖子，但我无法找到任何可行的解决方案。该应用程序是一个简单的任务管理器，我在其中创建了自己的任务对象，其中一个是摘要任务，每个摘要任务都包含一个基本任务列表。我尝试使用 XMLSerializing 只是为了遇到问题，因为我使用的是 ObservableCollection。以为我可以将集合更改为 INotifyPropertyChanged 的​​子类，但这也不起作用。坦率地说，无论如何，我仍然对两者之间的差异有所了解。所以无论如何，我最近的尝试涉及尝试使用独立存储设置，但这也不起作用。这是我的类定义：

```
class SummaryTask : TaskItem
{
    public List<BasicTask> children = new List<BasicTask>();
    private string sumTaskName;
    private int sumTaskId;
    public SummaryTask()
    {

    }
    public SummaryTask(string name, int id)
    {
        sumTaskName = name;
        sumTaskId = id;
    }
    public string SumTaskName
    {
        get { return sumTaskName; }
        set { sumTaskName = value; }
    }
    public int SumTaskId
    {
        get { return sumTaskId; }
        set { sumTaskId = value; }
    }
    public void addTask(string taskName, string taskText, int taskId){
        children.Add(new BasicTask(taskName, taskText, taskId));
    }
    public List<BasicTask> CHILDREN
    {
        get { return children; }
    }
}
} 
```

我在全局变量中创建了这个 SummaryTask 的列表，并在整个页面中使用它以便于访问。这是我的 MainPage.xaml.cs 文件的开头看起来已更新：

```
 public MainPage()
    {
        InitializeComponent();
        BackKeyPress += OnBackKeyPressed;
        if (Global.settings.Contains("list"))
        {
            Global.list = (List<SummaryTask>)Global.settings["list"];
        }
        else
        {
            Global.list = new List<SummaryTask>();
        }
    } 
```

关于我的代码质量差以及如何改进它的指导也被接受。谢谢你。

编辑：异常表明已经创建了具有相同键的项目。在这种情况下，堆栈跟踪没有显示任何重要的内容。我还应该注意，在将对象添加到列表并尝试保存它之后抛出异常，而不是在编译时。

我用来尝试保存到独立存储的代码片段在这里，它在我导航到 MainPage.xaml 时触发：

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        resultList.SelectedItem = null;
        Global.settings["list"] = Global.list;
        Global.settings.Save();
    } 
```

不再有例外，但退出应用程序并重新进入不会提取任何已保存的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T10:46:08.710

问题`Add`很容易解决 - 只需使用索引器，它允许您覆盖具有相同名称的条目：

```
settings["list"] = Global.list; 
```

这不会解决`Save`呼叫...但是您需要提供有关什么异常的更多详细信息（不仅仅是“它告诉我”，完整的异常详细信息），以帮助我们为您提供更多帮助。

# html - 几秒钟后，Html5 视频在 IE9 中冻结

> ID：13658075
> 
> 赞同：1
> 
> 时间：2012-12-01T09:23:29.127
> 
> 标签：html, video, html5-video

我正在使用 hmtl5 视频。它在所有浏览器中都能正常工作，除了 IE9。在 IE9 中，第一次播放后无法播放，或者视频在几秒钟后冻结，但视频状态为“正在播放”。我添加了事件监听器来检查它。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T09:27:24.823

我认为 IE9 有一些关于 HTML5 视频的问题。你不应该相信它会起作用。也许 IE9 的（闪存）后备会很好。大多数错误已在 IE10 中修复。所以 HTML5 视频应该在那里工作（如果你使用正确的视频编码）。

[http://caniuse.com/#search=video](http://caniuse.com/#search=video)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T09:32:57.927

我建议为 Internet Explorer 9 和其他存在 HTML5 视频问题的浏览器使用 Flash 播放器后备。

# iphone - pjsip sip头配置

> ID：13658076
> 
> 赞同：4
> 
> 时间：2012-12-01T09:23:41.180
> 
> 标签：iphone, ios, pjsip

**我在我的 ios 项目中使用 Sip 并在pjsip sdk**之上使用 siphon 类。

我对**基本配置**没有任何问题，因此每当我拨打 sip 电话时，我都需要向我的 sip 标头添加一些自定义数据。

我有以下标题格式

> pjsua_core.c 。TX 1123 字节请求消息 INVITE/cseq=31730 (tdta0x92aa400) 到 UDP xxxxx: 5060:
> 
> 邀请 sip:xxx9@xxxxxx SIP/2.0
> 
> 通过：SIP/2.0/UDP xxxxx:xxx;rport;branch=z9hG4bKPjt.fUN05fzpwxbm5zJvjoGSA.bnLvoAHl
> 
> 最大前锋：70
> 
> 来自：sip:xxxx@xxxxx;tag=d1Ww0T4iQNqygphKlqLQ.iNcYx-Cdsb2
> 
> 收件人：sip:xxxx@xxxxxxxx
> 
> 接触：
> 
> 呼叫 ID：a3zCaQtWPsnKrlbyYtLwwhUQgxnLs8hv
> 
> CSeq: 31730 邀请
> 
> 允许：PRACK、INVITE、ACK、BYE、CANCEL、UPDATE、SUBSCRIBE、NOTIFY、REFER、MESSAGE、OPTIONS
> 
> 支持：替换、100rel、定时器、norefersub
> 
> 会话过期：1800
> 
> 最小SE：90
> 
> 用户代理：Siphon PjSip v2.0.1svn/arm-apple-darwin9
> 
> ;sdsd: 布拉布拉布拉
> 
> 内容类型：应用程序/sdp
> 
> 内容长度：448
> 
> v=0
> 
> o=- 3563345387 3563345387 IN IP4 192.168.1.3
> 
> s=pj媒体
> 
> b=AS:84
> 
> t=0 0
> 
> a=X-nat:0
> 
> m=音频 40000 RTP/AVP 98 97 99 104 3 0 8 96
> 
> c=IN IP4 192.168.1.3
> 
> b=TIAS:64000
> 
> a=rtcp:40001 IN IP4 192.168.1.3
> 
> a=发送接收
> 
> a=rtpmap:98 speex/16000
> 
> a=rtpmap:97 speex/8000
> 
> a=rtpmap:99 speex/32000
> 
> a=rtpmap:104 iLBC/8000
> 
> a=fmtp:104 模式=30
> 
> a=rtpmap:3 GSM/8000
> 
> a=rtpmap:0 PCMU/8000
> 
> a=rtpmap:8 PCMA/8000
> 
> a=rtpmap:96 电话事件/8000
> 
> a=fmtp:96 0-15

--结束味精--

我想更改以下两行

> 来自：sip:xxxx@xxxxx;tag=d1Ww0T4iQNqygphKlqLQ.iNcYx-Cdsb2
> 
> 收件人：sip:xxxx@xxxxxxxx

看起来像这样

> 来自：sip:xxxx@xxxxx;tag=d1Ww0T4iQNqygphKlqLQ.iNcYx-Cdsb2;textid=1 ;texfrom=2;textto=4
> 
> 收件人：sip:xxxx@xxxxxxxx

就这样。

请提供一些清晰度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T14:26:05.837

pjsip 使用`pjsua_call_make_call`API 进行调用。在此内部，它会创建一个调用`pjsip_dlg_create_uac`. 您可以将自定义标头传递给此 API。更多信息[在这里](http://www.pjsip.org/pjsip/docs/html/group__PJSIP__DIALOG.htm#ga6643135a8dbee20a156c1046fda27e03)

# c# - 在 C# 中，=> 符号的含义

> ID：13658078
> 
> 赞同：7
> 
> 时间：2012-12-01T09:23:57.727
> 
> 标签：c#, lambda

有一个名为的类`Student`具有属性`Id`,`Name`和`Phone`。在 UI 表单中`Student`，有以下方式的列表：

```
List<Student> students=new List<Student>(); 
```

最后有一个`dataGridview_Cellclick`事件代码，使用以下代码：

```
string id = dataGridview.Rows[e.RownIndex].Cells[0].Value.ToString();  
Student aStudent = students.Find(i=> i.Id== id); 
```

做什么的`students.Find(i=> i.Id== id)`？这是什么意思？`=>`符号的含义是什么？它是如何工作的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T09:25:17.843

它们被称为 Lambda 表达式...Lambda 表达式使用特殊的语法。它们允许将函数用作变量或字段等数据。lambda 表达式语法使用 => 运算符。这将匿名函数的参数和语句体分开。

您可以将其称为“Goes to”。

=> 运算符可以读作“goes to”，它总是在声明 lambda 表达式时使用。lambda 表达式允许您使用带有可执行语句的函数作为参数、变量或字段。

请参阅 MSDN 上的[此链接以更好地理解它。](http://msdn.microsoft.com/en-us/library/bb397687.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T09:25:16.897

这是一个`goes to`运算符（或[lambda 运算符](http://msdn.microsoft.com/en-us/library/bb311046.aspx)），它在[lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)（创建匿名方法）中用于将输入变量与 lambda 主体分开。

在您的示例`students.Find(i => i.Id== id)`输入变量`i`转到 lambda 主体`i.Id == id`（即作为匿名方法参数传递）。

* * *

另请查看[`List<T>.Find`](http://msdn.microsoft.com/en-us/library/x0b5b5bc.aspx)您正在使用的方法。它接受类型的[谓词](http://msdn.microsoft.com/en-us/library/bfcke1bz.aspx)`T`，在您的情况下是`Predicate<Student>`。Predicated 是一个委托，它表示定义一组标准并确定指定对象是否满足这些标准的方法。它有以下签名：

```
public delegate bool Predicate<in Student>(Student obj) 
```

因此，您需要传递一个方法，该方法接受一个学生对象并返回一个布尔值。您可以为此创建正常的命名方法：

```
private bool IsStudentHasIdEqualTo5(Student s)
{
   return s.Id == 5;
} 
```

并以这种方式使用它：

```
Student aStudent = students.Find(IsStudentHasIdEqualTo5); 
```

但是您需要验证不同的 id 值。有两个选项 - 在您的类中创建字段，这将在学生谓词方法中可用，或者创建类，它将具有此方法和字段：

```
class StudentSearcher
{
    private int _id; // capture id

    public StudentSearcher(int id)
    {
        _id = id;
    }

    // method has same signature as bool Predicate(Student obj)
    public bool VerfyId(Student s)
    {
        return s.Id == _id;
    }
} 
```

现在您可以使用这个命名方法并`id`为学生验证提供不同的值：

```
var searcher = new StudentSearcher(id);
Student aStudent = students.Find(searcher.VerfyId); 
```

但是为每次搜索创建这样的方法和类并不是很有效。这就是我们有委托（和 lambdas）的原因。无需声明新的命名方法，您可以在需要的地方创建没有名称（匿名）的方法，编译器将为您生成通常的命名方法：

```
Student aStudent = students.Find(delegate(Student s) { 
                                      return s.Id == id; 
                                 }); 
```

完全相同的代码可以用 lambda 语法编写（省略了委托关键字，推断参数类型，`goes to`用于分隔参数和方法体的运算符，也省略了返回关键字）：

```
Student aStudent = students.Find(s => s.Id == id); 
```

这里的神奇之处在于编译器将在幕后生成如上图所示的类。该类将具有带有谓词签名的方法，并且还将具有用于捕获的字段以`id`进行搜索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T10:10:28.580

*   做什么`students.Find(i=> i.Id== id)`？

情况是这样的。您有一个 Student 对象列表和您感兴趣的学生的 id。如果 Student 对象存储在您自己定义的集合中，该集合有一个 Find 方法，该方法接受一个 id 并返回具有该 id 的学生，您的代码看起来像这样：

```
Student aStudent = students.Find(id); 
```

但是，当 Microsoft 定义通用 List 集合时，他们不可能知道如何使用它——而且他们也不想知道。他们想让您有机会将它与学生对象或您能想到的任何其他类型一起使用。但这意味着他们必须通过提供只有您知道的有关您的问题的信息，为您提供一种方法来找到您所追求的元素。在这个特定的实例中，您知道您正在寻找存储在学生列表中的 Student 对象，该对象的 Id 字段与您拥有的 id 匹配。如果我给你一个对象，让我们称之为它`i`，你可以通过执行以下检查来告诉我它是否是你正在寻找的对象：

```
i.Id == id 
```

如果我给您一个名为 的对象`student`，您将能够执行测试，您将能够通过执行测试`student`来告诉我它是否是您所追求的对象

学生.Id == id

（如果您没有 id 而是其他一些唯一确定 Student 对象（即键）的信息，您可能希望指定不同的条件。灵活性很重要！）

所以，现在我们进入下一个问题。

*   这是什么意思？

    让我们创建一个约定。您将确定要调用的学生对象，并提供适当的检查来选择您所追求的学生。您将代表该学生的标识符放在左侧，`=>`将检查条件放在右侧。因此你可以有类似的东西：

    学生 => student.Id == id

或者如果您更喜欢参考讨论中的学生对象`i`而不是`student`then 您可以写

i => i.Id == id

现在看看。这是什么？给定一个 Student 对象返回一个布尔值。这是一个功能！

*   => 符号的含义是什么？

    它是一个定义函数的运算符。论点在左侧，主体在右侧。

*   它是如何工作的？

    假设您希望我编写一个函数，该函数接受一个 List 参数和一个函数，例如我们正在讨论的函数，并在不使用 Find 方法的情况下返回匹配的学生。我可能会写这样的东西。

    Student FindStudent(List students, Func match) { foreach(Student st in students) if(match(st)) return st; 返回圣；}

    您可能会发现一切都非常熟悉，除了我猜想的 Func 类型，您可以想象它是从 Student 到布尔值的函数类型。我也可以使用谓词，你可以猜到它是学生谓词的一种类型。

    但是，您不需要我写这个或自己写这个，因为微软已经为我们做了这件事。`Find()`Microsoft为该类编写的代码`List<T>`与上面的非常相似。

希望有帮助！

* * *

这应该涵盖您所要求的所有内容。但要获得更广泛的图片，您可能还想看看：

*   [http://msdn.microsoft.com/en-us/library/bb311046.aspx](http://msdn.microsoft.com/en-us/library/bb311046.aspx)
*   [http://msdn.microsoft.com/en-us/library/bb397687.aspx](http://msdn.microsoft.com/en-us/library/bb397687.aspx)
*   [http://msdn.microsoft.com/en-us/library/x0b5b5bc.aspx](http://msdn.microsoft.com/en-us/library/x0b5b5bc.aspx)

* * *

一些可能对您有所帮助的离别说明：

*   Lambda 表达式可能有多个参数，例如 `(x,y) => x*x + y + 43'
*   lambda 表达式的右侧可能是一个代码块，例如 `(x,y) => {return x*x + y + 43;}'
*   带有字符串和返回布尔值的 int 参数的 lambda 表达式的类型是 `Func'
*   带有字符串参数和不返回任何内容的 int 参数的 lambda 表达式的类型是“Action”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T09:28:57.883

**=>**是***goto***运算符，此表达式是**lambda表达式**

见[msdn](http://msdn.microsoft.com/en-us/library/bb397687.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-01T09:30:31.863

lambda 运算符将函数参数与其主体分开。

```
(arg1,arg2...argn)
=>
{
  //body
} 
```

身体也可以没有括号..但它仍然是一个“身体”。

```
(arg1,arg2..argn) => 1 ;

Student aStudent = students.Find(i=> i.Id== id); 
```

Find 是一个采用 lambda 表达式的 Linq 方法。

它将贯穿学生的每个元素。

该元素由`i`- 尽管`student`更有意义 - 表示，并被传递到“body”中。如果`i.Id==id`Find 方法返回`student`元素。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-01T10:29:39.237

`List<T>`定义一个方法`Find(Predicate<T> match)`。

`Predicate<T>`是一个委托，可以引用与其签名匹配的任何方法

```
bool Predicate(T param) 
```

在您的情况下，您正在`Find`学生列表上调用该方法，`List<Student>`因此该`Find`方法需要一个与以下签名匹配的函数：

```
bool MyFindMethod(Student param) 
```

您可以在您的类中定义这样的方法，如下所示：

```
bool MyFindMethod(Student param)
{
    // Logic goes here
} 
```

并将其传递给您的`Find`方法，如下所示：

```
students.Find(MyFindMethod) 
```

您使用的方法小而简单，因此在类中创建方法的开销不值得，因此 lambda 表达式允许您以非常简洁的方式定义相同的方法。

```
s => s.Id == id 
```

相当于：

```
bool AnonymousMethod(Student param)
{
    return s.Id == id;
} 
```

运算符左侧的`=>`项是传递给方法的参数，运算符右侧的项`=>`是方法体。

请注意，编译器足够聪明，可以确定参数（`s`在我的示例中）是类型`Student`，因此不需要指定。

如果您有其他类型的列表 EG

```
public class Customer
{
    public string Name { get; set;}
}

public IList<Customer> customers = new List<Customer>(); 
```

然后编译器会推断该参数是类型`Customer`而不是学生。

```
customers.Find(c => c.Name == name); 
```

请注意，参数可以任意命名，但通常保持为单个字母以保持表达式简洁。

如果您了解所有这些，那么您将看到您的代码

```
students.Find(i => i.Id == id) 
```

基本上是调用一个以 a`Student`作为参数的方法并对其进行评估以查看它是否与运算符右侧的条件匹配`=>`。如果参数符合条件（即，如果学生`Id`与`id`变量匹配），则表达式将返回 true。这告诉`Find`方法它找到了一个匹配项，并且这个对象将被返回。

[我在这里](https://stackoverflow.com/a/11816449/577417)回答了一个与WPF 相关的类似问题，但不同上下文中的示例可能有助于您的理解。

# android - findViewById 其他布局

> ID：13658079
> 
> 赞同：2
> 
> 时间：2012-12-01T09:24:00.550
> 
> 标签：android, findviewbyid

我有 2 个 xml，名称是 formOne.xml 和 formTwo.xml

formOne.xml 看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:paddingLeft="16dp"
    android:paddingRight="16dp">

    <EditText
        android:id="@+id/editTextName"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

  </LinearLayout> 
```

和 fomTwo.xml ：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:paddingLeft="16dp"
    android:paddingRight="16dp">

    <Button
            android:id="@+id/buttonSave"
            android:layout_width="120dp"
            android:layout_height="wrap_content"
            android:text="@string/btSave" />

  </LinearLayout> 
```

我有两个活动，名称是 FormOne.java 和 FormTwo.java

FormOne.java：

```
public class FormOne extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.formOne);
            EditText etName = (EditText) findViewById(R.id.editTextName);
} 
```

}

和 FormTwo.java ：

```
public class FormTwo extends Activity implements OnClickListener {
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.formTwo);

    EditText etName = (EditText) findViewById(R.id.editTextName);

    Button btSave = (Button) findViewById(R.id.buttonSave);
    btSimpan.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            if (etName.getText().length() != 0) {
                Toast.makeText(FormTwo.this, "Name is : "+etName.getText().toString(), Toast.LENGTH_SHORT).show();
            }
            else {
                Toast.makeText(FormTwo.this, "Input the name please", Toast.LENGTH_SHORT).show();
            }
            // TODO Auto-generated method stub
        }
    });
} 
```

我想从editTextName 中获取值，并且值可以在带有Toast 的FormTwo.java 中显示。

但是我的应用程序强制关闭，我如何获得值editTextName，而不用捆绑传递数据。因为在 FormOne.java 中没有任何按钮可以发送值 editTextName。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T09:28:49.193

`edittext`将值保存到`sharedpreferences`edittext事件中并从form2 活动中`ontextchangelistener()`获取数据。`sharedpreferences`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T09:32:04.313

第一个活动必须启动第二个活动，将`String`对象作为参数传递。否则，您如何确保第一个活动真正开始并且用户在文本字段中输入了一些内容？

如果您真的不想按需启动第二个活动，您唯一的选择是使用单独的存储库，例如 SQLiteDatabase、共享首选项、文件或存储在 Internet 上的东西，并让第二个从*异步*选择一个值该存储库，最终提供一个默认值来说明用户没有明确保存任何内容的情况。

显然，当被要求时，第一个活动必须写入这个存储库。但是这种设计对我来说可能看起来很麻烦（即通过持久存储读/写传递字符串）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T09:35:52.293

您正在尝试在第二个活动的第一个活动中获得对编辑文本的引用。所以它可能会抛出空指针异常并崩溃。您不能在第二个活动中引用第一个活动中的编辑文本。您将获得使用 setcontentview() 为该活动设置的视图的参考。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T11:20:55.707

首先，您的应用程序将崩溃，因为您没有在 xml 中为第二个活动添加 EditText，并且您在第二个活动的 onCreate() 方法中声明它。

其次，如果您想在不使用 intent.putExtra(""); 的情况下检索活动之间的字符串；方法你可以做如下：

1-您可以像这样创建独立类：

```
public class Myclass{
    private String myString;
    public void setString(String str){
    myString=str;
    }
    public String getString(){
    return myString;
    }
} 
```

2-并且在您的 Activity1 中，您可以通过

```
String myString="What ever the string you have"
MyClass.setString(myString); 
```

3-您可以通过以下方式在任何您想要的地方调用该字符串：

```
String myString=MyClass.getString(): 
```

# authentication - Freeradius 用户运营商

> ID：13658080
> 
> 赞同：11
> 
> 时间：2012-12-01T09:24:06.767
> 
> 标签：authentication, radius, freeradius

**我遇到了一个问题，我在 Freeradius用户**文件中无法理解。我的目标只是使用密码“test”验证外部用户“shad”。我在 /etc/raddb/users 中添加了以下行： ***shad Cleartext-Password == "test"*** 结果被拒绝。如果我将**“==”**运算符更改为**“：=”**身份验证成功。所以我的问题如下：为什么我不能使用**“==”**运算符而 FreeRadius 文档告诉： *“属性 == 值作为检查项，如果请求中存在命名属性并且具有给定值，则它匹配。”*

还有一个问题。在某些资源中，我遇到了这样的行： ***shad Auth-Type := Local, User-Password == "test"*** 我试过了，但它不起作用。响应是拒绝日志：[pap] 警告！未找到用户的“已知良好”密码。因此，身份验证可能会失败。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-07-31T11:18:04.600

# 用户文件的工作原理

对于下面的答案，pairs 指的是属性值对 (AVP)，即由属性、运算符和值组成的元组。

可以从用户文件访问三个属性列表（对）。这些绑定到服务器当前正在处理的请求，并且它们不会在多个请求/响应轮次中持续存在。

*   **request** - 包含通过网络从 NAS（网络访问服务器）收到的原始请求中的所有对。
*   **control** - 最初不包含对，但填充了控制模块如何处理当前请求的对。这是通过用户文件或 unlang（虚拟服务器中使用的 FreeRADIUS 策略语言）完成的。
*   **回复**- 包含要通过网络发送回 NAS 的对。

用户文件模块确定将用于插入/搜索的列表、条目中列出的对的位置以及运算符。

条目的第一行包含必须匹配才能使用条目的*检查对。*第一行还包含*控制*对，如果所有*检查*对都匹配，您希望将其插入到控制列表中。

注意：这些对的列出顺序无关紧要。除非所有*检查*对都评估为真，否则不会插入*控制对。*

 **检查*和*控制*对由使用的操作员区分。如果使用赋值运算符，即':=' 或'='，则该对将被视为*控制*对。如果使用了等式运算符，例如 '>'、'<'、'=='、'>='、'<='、'=~'，则该对将被视为*检查*对。

同一条目中的后续行仅包含*回复*对。如果所有*检查*对都匹配，则*回复*对将插入回复列表中。

# 明文密码

Cleartext-Password 是严格意义上的*控制*对。它不应出现在任何其他列表中。

Cleartext-Password 是一组属性之一，它应该包含“参考”（或“已知良好”）密码，即用户密码的本地副本。该集合中另一对的示例是 SSHA-Password - 它包含用户密码的加盐 SHA 哈希。

参考密码对由能够使用“用户密码”对验证用户的模块搜索（在控制列表中）。在这种情况下，该模块是“rlm_pap”。

# 用户密码

User-Password 严格来说是一个*请求*对。它不应出现在任何其他列表中。

用户密码包含在来自 NAS 的请求中。它包含用户提供给 NAS 的密码的明文版本。为了对用户进行身份验证，模块需要将 User-Password 的内容与Cleartext-Password 等*控制对进行比较。*

在设置参考密码时，在用户文件条目中，您会看到如下条目：

```
my_username Cleartext-Password := "known_good_password" 
```

也就是说，如果用户名与左侧的值 (my_username) 匹配，则插入值为“known_good_password”的控制对 Cleartext-Password。

回答第一个问题的原因：

```
shad Cleartext-Password == "test" 
```

不起作用，这是因为您告诉 files 模块在请求列表中搜索请求列表中不存在且不应该存在于请求列表中的一对。

您现在可能在想，哦，我将使用 User-Password == "test" 代替，它会起作用的。不幸的是它不会。如果密码匹配，则条目将匹配，但用户仍将被拒绝，原因见下文。

# 认证类型

Auth-Type 严格来说是一个*控制*对。它不应出现在任何其他列表中。

服务器中有三个主要部分用于处理请求“授权”、“身份验证”、“身份验证后”。

授权是信息收集部分。这是进行数据库查找以授权用户并检索参考密码的地方。这也是确定 Auth-Type 的地方，即我们要为用户执行的身份验证类型。

身份验证是调用特定模块来执行身份验证的地方。模块由 Auth-Type 确定。

Post-Auth 主要用于记录日志，并应用进一步的策略，在 Post-Auth 中运行的模块由在 Authenticate 中运行的模块返回的响应确定。

authorize 中的模块检查请求，如果他们认为可以对用户进行身份验证，并且未设置 Auth-Type，则将其设置为自己。例如，如果 rlm_pap 模块在请求中找到用户密码，它将设置 Auth-Type = 'pap'。

如果未设置 Auth-Type，则请求将被拒绝。

因此，要回答您的第二个问题，您正在强制进行 pap 身份验证，这是错误的，您应该让 rlm_pap 通过在授权部分的 files 模块之后列出 pap 来设置 Auth-Type。

当 rlm_pap 在身份验证中运行时，它会查找上述“参考”密码组中的一个成员，如果找不到，它会拒绝请求，这就是上面发生的情况。

还有一个“神奇”的身份验证类型“接受”，它完全跳过身份验证部分，只接受用户。如果您希望在没有 rlm_pap 的情况下使用用于明文密码比较，您可以使用：

```
shad Auth-Type := Accept, User-Password == "test" 
```*

# android - 自定义警报对话框

> ID：13658082
> 
> 赞同：4
> 
> 时间：2012-12-01T09:24:14.863
> 
> 标签：android, android-alertdialog, customdialog

我想在 AlertDialog 的标题字段中构建一个带有复选框的自定义警报对话框，如下所示。

![在此处输入图像描述](../Images/14cd5720ab4f306d1d735bdccb673f89.png)

我已经拥有的是这个（复选框不可见，对此感到抱歉）：

![在此处输入图像描述](../Images/33c8c6915cde7a5711cefa900de421c5.png)

如何在标题字段中获取复选框。？同样在选择“所有”选项时，应选择所有其他选项。？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T11:15:43.053

正如 kameny 建议的那样，您可以使用自定义对话框。您必须为该对话框设计一个布局，如下所示

文本视图复选框列表
视图

您可以使用删除对话框标题`dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);`

将侦听器添加到复选框并检查复选框是否被选中。如果它被选中，请在列表视图中为项目放置一个循环，并更改列表视图中每个项目的复选框状态。之后使用 notifydatasetchanged() 刷新列表视图

# dom - IE 上的 range.insertNode(frag)

> ID：13658086
> 
> 赞同：0
> 
> 时间：2012-12-01T09:24:48.527
> 
> 标签：dom, iframe, rich-text-editor, internet-explorer-10

我一直在尝试使用 iframe 实现富文本编辑器。

对于在光标/选择处插入 html 的脚本，我从以下内容中获得了一些帮助：

来自[在内容可编辑的 div 中的插入符号处插入 html](https://stackoverflow.com/questions/6690752/insert-html-at-cursor-in-a-contenteditable-div)

在 Chrome 和 FF 上一切正常，但 IE（在 mo 中使用 IE10 - 但在早期版本模式中的结果相同）失败：

range.insertNode(frag);

给出以下错误：

SCRIPT5022：WrongDocumentError

我发现以下链接详细说明了错误：

[http://msdn.microsoft.com/en-us/library/windows/apps/hh453166.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh453166.aspx)

但是，我不知道如何解决该错误。

任何帮助都会得到帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-24T18:56:51.873

您的代码在主窗口的上下文中运行，但您正在尝试引用 iframe 的窗口和文档。将所有对“document”的引用替换为“element.ownerDocument”，将“window”替换为“element.ownerDocument.parentWindow”（其中“element”是您添加了contenteditable 的元素）。

像这样的东西：

```
var selection = window.getSelection(); // Wrong.
var selection = element.ownerDocument.parentWindow.getSelection();  // Correct.

var frag = document.createDocumentFragment() // Wrong.
var frag = element.ownerDocument.createDocumentFragment() // Correct. 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-20T13:48:40.880

我（有点）通过添加来解决它`<meta http-equiv="x-ua-compatible" content="IE=8">`。这导致脚本遵循 i 的错误分支`f(e.getSelection){...}`，恢复到较旧的 createRange() 方法。

# php - Mysql -> users 表中可以有多少列？我应该存储数组吗？

> ID：13658090
> 
> 赞同：0
> 
> 时间：2012-12-01T09:25:09.957
> 
> 标签：php, mysql, arrays, database-design, serialization

我想为我的用户创建一个数据库，我需要为每个用户存储大约 50 种不同的和平信息。

例子

联系信息将 hv (地址、电话、电子邮件、home_phone 等...) 个人信息将 hv (name、last_name、dob、birth_city、工作等...) refree info ...(6 items) etc

* * *

所以我有很多类别，每个类别至少包含 5-6 个元素，所以我的问题是

**我应该为每个项目创建一个列（每个用户大约有 50 个字段）还是更好地为每个类别创建一个列并使用序列化将数组存储到该字段中（将有大约 6 个列（每个将包含将容纳 6 个的数组） -7 项）？**

什么是最佳做法？如果我选择数组，我是否应该将列类型设为文本“因为我无法确定所有项目的确切 varchar 大小”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T09:32:59.143

我认为序列化一个数组并将该数组存储在关系数据库中是一个坏主意。为了能够利用关系数据库的全部功能，包括一堆可能的 sql 查询来处理您的数据，您应该考虑一个适当的[关系数据库设计](http://en.wikipedia.org/wiki/Relational_model)，包括一个或多个表以及它们之间的关系。考虑[主键和外键](http://en.wikipedia.org/wiki/Unique_key)以及[规范化](http://en.wikipedia.org/wiki/Database_normalization)。如需更多建议，您应该发布有关您的示例的更多信息。

# sql - 在 Oracle-SQL 中查询

> ID：13658094
> 
> 赞同：0
> 
> 时间：2012-12-01T09:25:23.963
> 
> 标签：sql, oracle

到目前为止，一个表包含一个包含数值的列。现在我想在带有字母的列中输入详细信息。怎么可能不丢失旧数据？

前任：

创建学生表并插入值

这里`SFEE`给出数字数据类型：

```
SNO SNAME SCOURSE SFEE
1    RAM   SQL     2100
2    JAM    JAVA   3000

SNO SNAME SCOURSE SFEE
1    RAM   SQL     2100
2    JAM    JAVA   3000
3    TOM    LINUX  AJAY

SELECT * FROM STUDENT;

SNO SNAME SCOURSE SFEE
1    RAM   SQL     2100
2    JAM    JAVA   3000
3    TOM    LINUX  AJAY 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:47:49.983

如果列为空，您可以更改数据类型：

```
ALTER TABLE student MODIFY (sfee VARCHAR2(10)); 
```

如果您需要保留数据，如您所说，您可以重命名列，添加具有新数据类型的新列，复制数据并删除重命名的旧列：

```
CREATE TABLE student (sno NUMBER, sname VARCHAR2(10), scourse VARCHAR2(10), sfee NUMBER);
INSERT INTO student VALUES (1, 'RAM', 'SQL', 2100);
INSERT INTO student VALUES (2, 'JAM', 'JAVA', 3000);

ALTER TABLE student RENAME COLUMN sfee TO sfee_old;
ALTER TABLE student ADD (sfee VARCHAR2(10));
UPDATE student SET sfee = TO_CHAR(sfee_old,'fm9999');
ALTER TABLE student DROP COLUMN sfee_old; 
```

如果它是一张大桌子，我建议在物理上重建它：

```
ALTER TABLE student MOVE; 
```

现在`SFEE`可以存储字符串值：

```
INSERT INTO student VALUES (3, 'TOM', 'LINUX', 'AJAY');
SELECT * FROM student; 
```

如果它是一个巨大的生产表，我建议简单地创建一个新表：

```
CREATE TABLE student_tmp AS 
SELECT sno, sname, scourse, to_char(sfee,'fm9999') as sfee FROM student;
DROP TABLE student;
RENAME student_tmp TO student; 
```

最后一个问题：为什么 SQL 课程比 Java 课程便宜 ;-) ？

# objective-c - iOS6 从地址簿读取 Facebook 用户名 ID

> ID：13658101
> 
> 赞同：3
> 
> 时间：2012-12-01T09:26:47.770
> 
> 标签：objective-c, facebook, ios6, addressbook

我可以读取 Facebook 朋友的名字、姓氏、生日……但我无法从我的通讯录中读取 Facebook 用户名 ID。

如果 Facebook 详细信息在我手机的通讯录上，则它可以正常读取，但如果来自**CardDAV 服务器**则不是。

如果我去`AddressBook`电话/模拟器上，我可以看到用户名......所以它们可用。

我有`read_stream`, `email`, `read_friendlists`, `publish_stream`,`publish_actions`权限。

请帮忙...我的想法已经用完了

iOS6、XCode 4.5、Facebook SDK 3.1

```
// Extract
// These all return values

CFStringRef cfsPrefix       = ABRecordCopyValue((__bridge ABRecordRef)recPerson, kABPersonPrefixProperty);
CFStringRef cfsFirstname    = ABRecordCopyValue((__bridge ABRecordRef)recPerson, kABPersonFirstNameProperty);
CFStringRef cfsLastname     = ABRecordCopyValue((__bridge ABRecordRef)recPerson, kABPersonLastNameProperty);
CFStringRef cfsCompany      = ABRecordCopyValue((__bridge ABRecordRef)recPerson, kABPersonOrganizationProperty);
NSDate*     datBirthday     = (NSDate*) CFBridgingRelease(ABRecordCopyValue((__bridge ABRecordRef)recPerson, kABPersonBirthdayProperty));
NSDate*     datCreate       = (NSDate*) CFBridgingRelease(ABRecordCopyValue((__bridge ABRecordRef)recPerson, kABPersonCreationDateProperty));
NSDate*     datModify       = (NSDate*) CFBridgingRelease(ABRecordCopyValue((__bridge ABRecordRef)recPerson, kABPersonModificationDateProperty));

// This never returns a value in strFacebook

NSString *strFacebook;

ABMultiValueRef socialMulti = ABRecordCopyValue((__bridge ABRecordRef) recPerson, kABPersonSocialProfileProperty);

// ABMultiValueGetCount(socialMulti) always returns 0 ?

for (CFIndex i = 0; i < ABMultiValueGetCount(socialMulti); i++) {
    NSDictionary* social = (__bridge NSDictionary*)ABMultiValueCopyValueAtIndex(socialMulti, i);

    if ([social[@"service"] isEqualToString:(__bridge NSString*)kABPersonSocialProfileServiceFacebook]) {
        strFacebook = (NSString*)social[@"username"];
        NSLog(@"we got a facebook. username is %@ %@", [self nameForSource:(__bridge ABRecordRef)recPerson], cFacebook);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:45:28.933

我正在执行以下操作并且它有效。
我知道这不完全是您正在做的事情，但仍然 - 我的`ABMultiValueGetCount`工作正常。

```
ABAddressBookRef addressBook;
addressBook = ABAddressBookCreate();
CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople(addressBook);
CFIndex nPeople = ABAddressBookGetPersonCount(addressBook);

NSMutableArray *socialArray = [[NSMutableArray alloc] init];
ABMultiValueRef socialProfiles = ABRecordCopyValue(record, kABPersonSocialProfileProperty);
for (int i=0; i<ABMultiValueGetCount(socialProfiles); i++) {
    NSDictionary *socialItem = (__bridge NSDictionary*)ABMultiValueCopyValueAtIndex(socialProfiles, i);
    [socialArray addObject:socialItem];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-01T10:34:43.423

您可以获取 facebook IM 并将此名称添加到 www.facebook.com/(fbName)

```
 ABMultiValueRef profile = ABRecordCopyValue(who,  kABPersonInstantMessageProperty);
if (ABMultiValueGetCount(profile) > 0)
{
    // collect all emails in array

    for (CFIndex i = 0; i < ABMultiValueGetCount(profile); i++)
    {
        NSDictionary *socialItem = (__bridge NSDictionary*)ABMultiValueCopyValueAtIndex(profile, i);
        NSString* SocialLabel =  [socialItem objectForKey:(NSString *)kABPersonInstantMessageServiceKey];

         if([SocialLabel isEqualToString:(NSString *)kABPersonInstantMessageServiceFacebook])
        {

            NSString *facebookProfile = ([socialItem objectForKey:(NSString *)kABPersonInstantMessageUsernameKey]);
            NSLog(@"fbName %@",facebookProfile);
        }

    }
    CFRelease(profile);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-17T20:20:46.930

如果联系人没有 Facebook 别名，则返回一个空的 NSString ("")。

```
- (NSString*)facebookAliasForContact:(ABRecordRef)person {
    ABMultiValueRef instantMessage = ABRecordCopyValue(person, kABPersonInstantMessageProperty);
    NSString *facebookAlias = @"";

    if (instantMessage) {
        for (NSInteger i=0 ; i < ABMultiValueGetCount(instantMessage); i++) {
            CFDictionaryRef instantMessageValue = ABMultiValueCopyValueAtIndex(instantMessage, i);
            CFStringRef instantMessageString = CFDictionaryGetValue(instantMessageValue, kABPersonSocialProfileUsernameKey);

    if (CFStringCompare(instantMessageString, kABPersonInstantMessageServiceFacebook, 0) == kCFCompareEqualTo) {
            facebookAlias = (__bridge NSString *)instantMessageString;
        }        

    CFRelease(instantMessageString);
            CFRelease(instantMessageValue);
        }
    }

    CFRelease(instantMessage);

    return facebookAlias;
} 
```

# javascript - javascript超过超时

> ID：13658105
> 
> 赞同：2
> 
> 时间：2012-12-01T09:27:25.650
> 
> 标签：javascript, jquery, cordova, jquery-mobile

我使用 jquery 开发移动应用程序，下面是我的代码，当我在包含的页面中添加 5 或 6 行时一切正常。但是如果我添加多行显示错误消息：Javascript execution exeeded timeout。

```
function succes_recu_list_rubrique(tx, results)   //apÃ©s avoire remplir sqlite
{
    console.log('ENTRééééééééééééééé---')

    $('#lbtn').prepend("<legend>Selectionner un Rubrique</legend><br>");
    for( var i=0; i<results.rows.length; i++  )            //Remplir tableau liste des identifiants Ã©tapes
    { 
    $('#lbtn').append("<input name='opt1' checked type='radio' value="+results.rows.item(i).IdRubrique+"    id="+results.rows.item(i).IdRubrique+" />");
    $('#lbtn').append('<label for='+results.rows.item(i).IdRubrique+'>'+results.rows.item(i).LibelleRubrique+'</label>');   
    }
    $('#lbtn').append('<a href="#page_dialog2"     class="offer2"      data-rel="dialog"    data-role="button" >Consulter</a>').trigger('create');
    $('#lbtn').append('<a href="#'+id_grp_rub+'"   data-role="button"             data-rel="back" data-theme="c" >Cancel</a> ').trigger('create');

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:54:07.023

以下解决方案将解决您的问题。诀窍是在执行代码之前使用非常少的 1 毫秒等待时间的 setTimeout 函数。使用上述方式将允许您解锁线程并避免超出超时错误。

示例：

```
function succes_recu_list_rubrique(tx, results) {

    var i = 0;

    function appendOperation() {
        $('#lbtn').append(
            [
                "<input name='opt1' checked type='radio' value=", results.rows.item(i).IdRubrique, " id=", results.rows.item(i).IdRubrique, " />",
                "<label for=", results.rows.item(i).IdRubrique, ">", results.rows.item(i).LibelleRubrique, "</label>"
            ].join("")
        );

        if (i++ < results.rows.length) {
            setTimeout(appendOperation, 1);
        } 
    }
    appendOperation();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:53:43.710

@soderslatt 正朝着正确的方向前进。请参阅[http://www.learningjquery.com/2009/03/43439-reasons-to-use-append-correctly](http://www.learningjquery.com/2009/03/43439-reasons-to-use-append-correctly)了解如何附加到未附加到 DOM 的元素（并避免重绘和重排）然后附加它到 DOM 并且只支付一次罚款

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T11:02:38.723

很难知道 results.row 有多大？但是你应该开始缓存你的 jQuery 对象并尽量减少你的 DOM 插入

以下内容未经测试，但它将为您指明正确的方向：

```
function succes_recu_list_rubrique(tx, results)   //apÃ©s avoire remplir sqlite
{
    console.log('ENTRééééééééééééééé---')

    var htmlToAppend = "";
    var $lbtn = $('#lbtn');

    htmlToAppend += "<legend>Selectionner un Rubrique</legend><br>";

    for( var i=0; i<results.rows.length; i++  )            //Remplir tableau liste des identifiants Ã©tapes
    { 
        htmlToAppend += "<input name='opt1' checked type='radio' value="+results.rows.item(i).IdRubrique+" id="+results.rows.item(i).IdRubrique+" />";
        htmlToAppend += "<label for='+results.rows.item(i).IdRubrique+'>'+results.rows.item(i).LibelleRubrique+'</label>";
    }
    $lbtn.append(htmlToAppend);

    $lbtn.append('<a href="#page_dialog2"     class="offer2"      data-rel="dialog"    data-role="button" >Consulter</a>').trigger('create');
    $lbtn.append('<a href="#'+id_grp_rub+'"   data-role="button"             data-rel="back" data-theme="c" >Cancel</a> ').trigger('create');

} 
```

# regex - 正则表达式在 Notepad++ 中将URL 转换为 HTML超链接？

> ID：13658111
> 
> 赞同：3
> 
> 时间：2012-12-01T09:28:37.850
> 
> 标签：regex, notepad++

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T09:40:05.690

使用正则表达式

`(http://mydomain.com/(.*?)\.html)`

并将其替换为

`<a href="\1">\2</a>`

* * *

如果你想`-`变成`space`你可以这样做

`-(?=[^<>]*?</a>)`

并将其替换为

# directx-11 - 在 Visual Studio 6.0 中使用 directX 11

> ID：13658120
> 
> 赞同：1
> 
> 时间：2012-12-01T09:30:20.370
> 
> 标签：directx-11

我想使用包含文件

```
#include <d3d11.h>
#include <d3dx11.h>
#include <d3dcompiler.h>
#include <xnamath.h> 
```

在视觉工作室 6.0 中。但是当我编译 .cpp 时，我们得到了这个错误：

```
:\Users\8up tuotlo\Desktop\Visual C++ 6.0 Proects\11\Article1\Article1.cpp(28) : error C2146: syntax error : missing ';' before identifier 'CD3D11_DEFAULT' 
```

:\Users\8up tuotlo\Desktop\Visual C++ 6.0 Proects\11\Article1\Article1.cpp(28) : 错误 C2146: 语法错误: 缺少 ';' 在标识符“CD3D11_DEFAULT”之前当我包括：

```
#include <d3d9.h>
#include <d3dx9.h> 
```

所有正常编译。这是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T09:34:04.260

检查编译器对最新版本的 Windows SDK 的支持。我怀疑 VC++6 不再受支持（自发布以来已超过 15 年，从那时起发布了*6 个*版本）。

# android - 如何使用android.text.format在android的textview上以文本格式显示当前日期？

> ID：13658131
> 
> 赞同：0
> 
> 时间：2012-12-01T09:31:58.060
> 
> 标签：android, java.util.date

我得到的结果是 2012 年 12 月 1 日，但我想显示为“2012 年 12 月 1 日星期六”，我的代码如下，如果你有，请给我一个解决方案......

```
Date date = new Date();
myDateString = DateFormat.getDateFormat(getApplicationContext()).format(date).toString();
dateTxt.setText(myDateString); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T09:44:37.447

请参阅此示例

```
 String[] formats = new String[] {
   "yyyy-MM-dd",
   "yyyy-MM-dd HH:mm",
   "yyyy-MM-dd HH:mmZ",
   "yyyy-MM-dd HH:mm:ss.SSSZ",
   "yyyy-MM-dd'T'HH:mm:ss.SSSZ",
 };
 for (String format : formats) {
   SimpleDateFormat sdf = new SimpleDateFormat(format, Locale.US);
   System.err.format("%30s %s\n", format, sdf.format(new Date(0)));
   sdf.setTimeZone(TimeZone.getTimeZone("UTC"));
   System.err.format("%30s %s\n", format, sdf.format(new Date(0)));
 } 
```

在 PDT 时区运行时会产生此输出：

```
 yyyy-MM-dd 1969-12-31
                 yyyy-MM-dd 1970-01-01
           yyyy-MM-dd HH:mm 1969-12-31 16:00
           yyyy-MM-dd HH:mm 1970-01-01 00:00
          yyyy-MM-dd HH:mmZ 1969-12-31 16:00-0800
          yyyy-MM-dd HH:mmZ 1970-01-01 00:00+0000
   yyyy-MM-dd HH:mm:ss.SSSZ 1969-12-31 16:00:00.000-0800
   yyyy-MM-dd HH:mm:ss.SSSZ 1970-01-01 00:00:00.000+0000
 yyyy-MM-dd'T'HH:mm:ss.SSSZ 1969-12-31T16:00:00.000-0800
 yyyy-MM-dd'T'HH:mm:ss.SSSZ 1970-01-01T00:00:00.000+0000 
```

所以使用这种格式：

```
"EEEE, MMMM dd, yyyy" -> "Monday, April 6, 1970" 
```

有关完整的详细信息，请参阅这些参考资料

1.  [http://developer.android.com/reference/android/text/format/DateFormat.html](http://developer.android.com/reference/android/text/format/DateFormat.html)
2.  [http://developer.android.com/reference/java/text/SimpleDateFormat.html](http://developer.android.com/reference/java/text/SimpleDateFormat.html)

    导入 java.text.SimpleDateFormat；导入 java.util.Date；导入 java.util.Locale；

    字符串格式 = "EEEE, MMMM dd, yyyy";

    今天的日期 = new Date(); SimpleDateFormat sdf = new SimpleDateFormat(Format, Locale.ENGLISH); System.err.format("%30s %s\n", Format, sdf.format(today));

这是打印`EEEE, MMMM dd, yyyy Saturday, December 01, 2012`

检查您的导入，如果问题仍然存在，请尝试发布您的新代码。

# php - Authorize.net CIM - 无效/退款交易

> ID：13658133
> 
> 赞同：4
> 
> 时间：2012-12-01T09:32:07.927
> 
> 标签：php, credit-card, in-app-billing, authorize.net

我将 CIM 与 php 一起使用。我正在尝试退款/取消交易。

1.  是否有一些关于取消和退还 CIM 交易的明确文件？

2.  我的理解是，交易在“结算”之前无法退款。我认为这发生在未来某个不确定的时间段内，因此某些文档中的某处有一句话说，如果需要退款，我应该简单地尝试使交易无效，如果失败则假设它已解决，所以尝试退款。这个对吗？

3.  退款交易是否有到期日？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T15:49:46.013

> Is there some clear documentation somewhere about voiding and refunding transactions with CIM?

See page 48 of the [CIM Guide](http://www.authorize.net/support/CIM_XML_guide.pdf)

> My understanding is that a transaction can't be refunded until it is "settled". I assume this happens at some indeterminate period of time in the future, and so there was a sentence in some documentation somewhere saying that if a refund is necessary I should simply try to void the transaction and if that fails assume it is settled, and so try a refund. Is this correct?

Transactions are settled every night so you can safely assume each night a transaction has been settled. So the rule of thumb is if the transaction to be refunded happened before midnight PST you need to void it. If it happens after that you need to issue a refund.

> Is there any expiry date for refund a transaction?

Six months. After that Authorize.Net will not allow it to go through to prevent their system from being used as a payment service.

# java - 通过浏览器使用 Java/C 访问 HTML TextField 组件

> ID：13658134
> 
> 赞同：2
> 
> 时间：2012-12-01T09:32:18.937
> 
> 标签：java, c++, html

我想知道是否可以使用 Java 或 C/C++ 程序从 Facebook、Twitter 等访问现有的 HTML 组件（文本字段、按钮等）。该算法应执行如下：

1.  导入 HTML 组件
2.  在适当的文本字段中填写用户名和密码。
3.  登录。

我的目标是打开浏览器并使用通用登录数据通过单击按钮登录社交网络。有没有特定的技术可以使用？如何导入 HTML 站点组件、向其中写入数据并将其作为常规 HTML 请求（登录）发送？我正在寻找一个个人项目并提出了这个想法。我感谢您的时间和精力。谢谢

-丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T09:38:48.543

我记得有一个来自 Miscrosoft 的 COM 对象（一个非常常见的对象），它提供浏览器窗口的服务。

看一下`IWebBrowser2::Navigate2`，`CHtmlView::Navigate2` 我记得 Navigate2 是调用来要求控件连接到 URL 的函数。

# c# - 如何将请求路由到 WebForms 中的类中的方法？

> ID：13658135
> 
> 赞同：-1
> 
> 时间：2012-12-01T09:32:33.673
> 
> 标签：c#, asp.net

在 MVC 中，可以编写一个指向控制器上的方法的自定义路由，我想用 WebForms 实现相同的功能。

如果我有这样的路线；

```
Admin/{Controller}/{Action} 
```

我想使用如下所示的 URL 来调用 User 类/控制器上的 Register 方法。

```
http://[domain]/Admin/User/Register 
```

我该怎么做这样的事情。

**笔记**

我在其他地方找到了我的问题的答案；
[http://www.west-wind.com/weblog/posts/2011/Mar/28/Custom-ASPNET-Routing-to-an-HttpHandler](http://www.west-wind.com/weblog/posts/2011/Mar/28/Custom-ASPNET-Routing-to-an-HttpHandler)

基本上，我使用 WebForms 来开发应用程序，但是想要 MVC 的控制器概念 - 执行控制器上存在的方法的能力。多亏了那篇文章，我已经能够实现我的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:52:54.377

页面上的所有 WebMethod 都必须声明为`static`，并且 User.aspx 在您的应用程序中有一个类，因此您可以在代码中的任何位置调用`User.Hello()`

您想要做的最好是使用 WebService 提供服务，但是我没有看到任何技术上限制您这样做的东西。

# c# - 如何在 android 中使用画布绘制涂鸦？

> ID：13658146
> 
> 赞同：3
> 
> 时间：2012-12-01T09:33:51.620
> 
> 标签：c#, java, javascript, android

我想像`canvas`自由手绘一样在android中绘制涂鸦....

这是我的代码......

```
 x = motionEvent.getX();
                 y = motionEvent.getY();
            switch (motionEvent.getAction())
              {
            case MotionEvent.ACTION_DOWN:
                td=1;
                 currentDrawingPath = new DrawingPath();
               currentDrawingPath.paint = currentPaint;
               currentDrawingPath.path = new Path();
                currentDrawingPath.path.moveTo(x, y);
                mX = x;
                mY = y;
            break;
            case MotionEvent.ACTION_MOVE:
                currentDrawingPath.path.lineTo(mX, mY);
                float dx = Math.abs(x - mX);
                float dy = Math.abs(y - mY);
                tm=1;
                isDrawings=true;
                if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) 
                {
            currentDrawingPath.path.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
                mX = x;
                mY = y;
                }
                    break;
            case MotionEvent.ACTION_UP:
                tu=1;
                isDrawings=false;
                currentDrawingPath.path.lineTo(mX, mY);
                drawingSurface.addDrawingPath(currentDrawingPath);
                 undoBtn.setEnabled(true);
                 redoBtn.setEnabled(false);
            break;
            } 
```

涂鸦只会出现在touchs up中，所以请帮我在touchesmove中绘图...

提前致谢

# php - 如果图片网址包含“+”之类的字符，则无法保存图片

> ID：13658151
> 
> 赞同：1
> 
> 时间：2012-12-01T09:34:20.313
> 
> 标签：php, file-get-contents, scrape

当用户发布图片网址时，我正在尝试保存图片。我正在使用以下代码执行此操作：

```
 $pic = $Db->escape($_POST['form_pic']); // (escape is a function to mysql_real_escape_string)
        $time = strtotime("now");
        $filename = $item_id.'_'.$time.'.'.$ext;
        $item_pic = 'img/ads/'.$filename;

        $contents = file_get_contents($pic);
        file_put_contents('../img/ads/'. $filename, $contents); 
```

这在大多数情况下都有效。但是当 url 包含像“+”这样的奇怪字符时，上面的代码就不起作用了。然后他不保存图像。

```
 An example url: http://2.bp.blogspot.com/-ubBMWObG6u0/T-m3zYIq3CI/AAAAAAAABxU/Z8aa1Dgny9c/s1600/Grown+sunglasses.jpg 
```

即使网址包含“奇怪”字符，如何保存每个图像文件？

**更新：**我已经回显了我的 $_POST['form_pic'] 并且似乎当我在提交后发布 url 时，“+”字符被空格替换了？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-01T09:47:42.213

用这个，

```
$pic = str_replace("+","_",$pic); 
```

# java - Java 邮政编码 prog2

> ID：13658153
> 
> 赞同：-1
> 
> 时间：2012-12-01T09:34:26.027
> 
> 标签：java

有人可以向我解释为什么当输入 !sdesf 作为邮政编码时它说 !sdesf 在东海岸。不应该是 !sdesf 是一个无效的邮政编码。这是我的代码

```
String zipCode;

    Scanner input = new Scanner(System.in);

    System.out.print("Enter 4-digit zip code: ");
    zipCode = input.nextLine();

    if (zipCode.charAt(0) <= '3')
        System.out.println(zipCode + " is on the East Coast.");

    if (zipCode.charAt(0) >= '4')
        if (zipCode.charAt(0) <= '6')
            System.out.println(zipCode + " is in the Central Plains area.");

    if (zipCode.charAt(0) == '7')
        System.out.println(zipCode + " is in the South.");

    if (zipCode.charAt(0) >= '8')
        if (zipCode.charAt(0) <= '9')
            System.out.println(zipCode + " is in the West.");

    else
        System.out.println(zipCode + " is an invalid ZIP Code."); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T09:36:30.563

该字符`'!'`之前出现`'3'`在 Unicode 中，所以它进入第一个`if`.

在尝试弄清楚它在地理上的含义之前，您应该验证邮政编码是否有效。

您*可能*想使用正则表达式来验证它 - 但如果您是编程新手，使用循环并检查每个字符是否大于或等于`'0'`且小于或等于可能会更简单`'9'`（可能美国邮政编码的规则更复杂 - 我不知道。）

`else`请注意，如果您在每个语句周围使用大括号，则您的代码在您希望在哪里有用方面会更加清晰。例如，最后我怀疑你的*意思*是等同于：

```
if (zipCode.charAt(0) >= '8') {
    if (zipCode.charAt(0) <= '9') {
        System.out.println(zipCode + " is in the West.");
    }
} else {
    System.out.println(zipCode + " is an invalid ZIP Code.");
} 
```

请注意，这将使*每个*`'8'`不以大于或等于开头的邮政编码无效，并且*不会*对以大于或等于开头的邮政编码做任何事情`'9'`。基本上，你需要重新审视你是如何做这一切的......

不过，正如我之前建议的那样，我认为 switch 语句会更清晰：

```
switch (zipCode.charAt(0)) {
    case '0': // Is this valid?
    case '1':
    case '2':
    case '3':
        System.out.println(zipCode + " is on the East Coast.");
        break;
    case '4':
    case '5':
    case '6':
        System.out.println(zipCode + " is in the Central Plains area."
        break;
    case '7':
        System.out.println(zipCode + " is in the South."
        break;
    case '8':
    case '9':
        System.out.println(zipCode + " is in the West."
        break;
    default: // This handles any other character
        System.out.println(zipCode + " is an invalid ZIP Code.");
        break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T09:39:37.393

你在比较人物。

字符根据其 ASCII 值进行比较。

在这种情况下，'!' 的 ASCII 值小于 '3' 的 ASCII 值，因此您将得到输出：

```
!sdesf is on the East Coast 
```

# bash - 如何知道某个文件当前是否正在执行？

> ID：13658156
> 
> 赞同：0
> 
> 时间：2012-12-01T09:34:50.160
> 
> 标签：bash, shell, ubuntu

我正在使用 Ubuntu。我有两个 bash 脚本文件。两者将并行运行。现在我想持续监控另一个文件是否正在运行。

那么有什么方法可以找到文件当前是否正在执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T09:51:30.590

无数的可能性，这是一个创造力的问题......

一些建议：

*   定期轮询进程列表并按名称或进程 ID 过滤它
*   使用控制套接字启动脚本，只要套接字打开，脚本就会运行
*   在文件系统中使用通常的锁定策略。
*   让脚本定期做一个生命周期，然后观察那个生命周期。
*   在一系列命令中启动脚本，脚本存在的那一刻，下一个命令将由调用 shell 执行。那可能是通知脚本或其他东西。
*   让脚本在您的桌面上进行一些摆动并自己观看。
*   使用它启动它`nohup`并观察日志文件。
*   在脚本中实现一个守护进程并定期连接。
*   从脚本中打开一个文件并使用`fuser`系统调用观察文件系统。
*   通过监控脚本定期将令牌写入文件，并让监控脚本删除该令牌，就像指挥棒一样。
*   使用阻塞调用调用脚本。只要该阻塞调用不返回，脚本就会执行。
*   在进程级别创建一个单例策略，并简单地尝试定期启动它。
*   使监控脚本充当执行脚本连接到的监控守护程序。如果连接终止，scipt 显然已经停止执行。
*   ...

对不起，这开始变得无聊了......

# asp.net - 如何访问在 ASP.NET 中运行时生成的 datalist 控件的值

> ID：13658158
> 
> 赞同：0
> 
> 时间：2012-12-01T09:35:10.683
> 
> 标签：asp.net

datalist 在运行时生成代码：如何在页面回发后访问 datalist 元素的值？

```
void CreateDATELIST(Control container)
{   
    var st = settings.CustomPossition();
    foreach (var item in settings.CustomPossition())
    {  
        DataTable dt = new DataTable();
        dt.Columns.Add("Name");
        dt.Columns.Add("Possition");
        dt.Columns.Add("Production");
        dt.Columns.Add("dpo");
        dt.Columns.Add("WorkDay");
        DataRow dr;
        foreach (var users in item.Users)
        {
            dr = dt.NewRow();
            dr["Name"] = users.Name;
            dr["Possition"] = users.Position.Name;
            dr["Production"] = users.DailyGoalAmount * (double)(users.WorkDays / 12;
            dr["dpo"] = users.DailyGoalAmount;
            dr["WorkDay"] = users.WorkDays;
            dt.Rows.Add(dr);
            dt.AcceptChanges();
        }
        DataList dataList = new DataList();
        dataList.ItemTemplate = Page.LoadTemplate("Commnets.ascx");
        container.Controls.Add(dataList);

        dataList.DataSource = dt;
        dataList.DataBind();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T13:23:20.700

如果您分配`Id`给您`DataList`创建的动态，如下所示：

```
DataList dataList = new DataList();
dataList.ID = "dlstUser"; 
```

然后：使用您在模板用户控件中拥有的任何控件和 ID 更改控件 ID，`c.FindControl("lblName")`并在按钮单击或任何您想要`datalist`.

```
DataList dataList = pnlDataList.FindControl("dlstUser") as DataList;
foreach (DataListItem dli in dataList.Items)
{
    ControlCollection controls = dli.Controls;
    foreach (Control c in controls)
    {
        Label lblName = c.FindControl("lblName") as Label;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T13:32:38.273

您可以只订阅 DataList 的**ItemDataBound**事件。

```
DataList dataList = new DataList();
dataList.ItemDataBound += dataList_ItemDataBound; 
```

在事件处理程序中：

```
void dataList_ItemDataBound(object sender, DataListItemEventArgs e)
{
      var item = e.Item.DataItem as DataRowView;
} 
```

# perl - 在 perl 中查找没有其他子文件夹的文件夹

> ID：13658159
> 
> 赞同：3
> 
> 时间：2012-12-01T09:35:14.120
> 
> 标签：perl, find

如何在给定路径中找到没有其他子文件夹的所有文件夹？它们可能包含文件，但没有其他文件夹。

例如，给定以下目录结构：

```
time/aa/
time/aa/bb
time/aa/bb/something/*
time/aa/bc
time/aa/bc/anything/*
time/aa/bc/everything/*
time/ab/
time/ab/cc
time/ab/cc/here/*
time/ab/cc/there/*
time/ab/cd
time/ab/cd/everywhere/*
time/ac/ 
```

的输出`find(time)`应如下所示：

```
time/aa/bb/something/*
time/aa/bc/anything/*
time/aa/bc/everything/*
time/ab/cc/here/*
time/ab/cc/there/*
time/ab/cd/everywhere/* 
```

`*`上面代表文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T12:16:47.230

*任何*时候你想写一个目录遍历器，**总是**使用标准的[File::Find](http://search.cpan.org/perldoc?File%3A%3AFind)模块。在处理文件系统时，您必须能够处理奇怪的极端情况，而幼稚的实现很少这样做。

[提供给回调](http://search.cpan.org/perldoc?File%3A%3AFind#The_wanted_function)的环境（在文档中命名`wanted`）具有三个变量，它们对您想要做的事情特别有用。

> `$File::Find::dir`是当前目录名
> 
> `$_`是该目录中的当前文件名
> 
> `$File::Find::name`是文件的完整路径名

当我们找到一个不是`.`or的目录时`..`，我们记录完整的路径并删除它的父目录，我们现在知道它不能是叶子目录。最后，任何剩余的记录路径都必须留下，因为[`find`在 File::Find 中](http://search.cpan.org/perldoc?File%3A%3AFind#find)执行[深度优先搜索](https://en.wikipedia.org/wiki/Depth-first_search)。

```
#! /usr/bin/env perl

use strict;
use warnings;

use File::Find;

@ARGV = (".") unless @ARGV;

my %dirs;
sub wanted {
  return unless -d && !/^\.\.?\z/;
  ++$dirs{$File::Find::name};
  delete $dirs{$File::Find::dir};
}

find \&wanted, @ARGV;
print "$_\n" for sort keys %dirs; 
```

您可以针对当前目录的子目录运行它

```
$ 叶目录时间
时间/aa/bb/某事
时间/aa/bc/任何东西
时间/aa/bc/一切
时间/ab/cc/这里
时间/ab/cc/那里
时间/ab/cd/无处不在
```

或使用完整路径

```
$叶目录/tmp/时间
/tmp/时间/aa/bb/某事
/tmp/时间/aa/bc/任何东西
/tmp/时间/aa/bc/一切
/tmp/时间/ab/cc/这里
/tmp/time/ab/cc/那里
/tmp/time/ab/cd/无处不在
```

或在同一调用中探测多个目录。

```
$ mkdir -p /tmp/foo/bar/baz/quux
$ 叶目录 /tmp/time /tmp/foo
/tmp/foo/bar/baz/quux
/tmp/时间/aa/bb/某事
/tmp/时间/aa/bc/任何东西
/tmp/时间/aa/bc/一切
/tmp/时间/ab/cc/这里
/tmp/time/ab/cc/那里
/tmp/time/ab/cd/无处不在
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T10:41:48.830

基本上，您打开根文件夹并使用以下过程：

```
sub child_dirs {
    my ($directory) = @_; 
```

1.  **打开**目录

    ```
    opendir my $dir, $directory or die $!; 
    ```

2.  ****从此**目录中的文件中**选择**文件，**其中**文件是目录**

     **```
    my @subdirs = grep {-d $_ and not m</\.\.?$>} map "$directory/$_", readdir $dir;
    #                  ^-- directory and not . or ..  ^-- use full name 
    ```** 
***   **如果**此类选定文件的列表包含元素，则
    3.1。**然后**递归到每个这样的目录，
    3.2。**否则**这个目录是一个“叶子”，它将被附加到输出文件中。

    ```
    if (@subdirs) {
       return map {child_dirs($_)} @subdirs;
    } else {
       return "$directory/*";
    }
    # OR: @subdirs ? map {child_dirs($_)} @subdirs : "$directory/*"; 
    ```** 

 **.

```
} 
```

示例用法：

```
say $_ for child_dirs("time"); # dir `time' has to be in current directory. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T10:40:32.667

这个功能会做到的。只需使用您的初始路径调用它：

```
sub isChild {

  my $folder = shift;
  my $isChild = 1;

    opendir(my $dh, $folder) || die "can't opendir $folder: $!";
    while (readdir($dh)) {
      next if (/^\.{1,2}$/); # skip . and ..
      if (-d "$folder/$_") {
        $isChild = 0;
        isChild("$folder/$_");
      }
    }

    closedir $dh;

    if ($isChild) { print "$folder\n"; }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T01:21:08.447

我尝试了 readdir 的做事方式。然后我偶然发现了这个......

```
 use File::Find::Rule;
  # find all the subdirectories of a given directory
  my @subdirs = File::Find::Rule->directory->in( $directory ); 
```

我从该输出中消除了与字符串的初始部分匹配且没有某些叶条目的任何条目。**

# html - CSS 缩进问题

> ID：13658160
> 
> 赞同：3
> 
> 时间：2012-12-01T09:35:17.273
> 
> 标签：html, css, styles, html-lists

我想修改我网站上的无序列表，以便当文本换行到下一行时，`<li>`它会根据上面的行缩进。我尝试了许多不同的方法，但似乎没有任何效果。我对css没有太多经验，所以我可能只是错过了一些简单的东西......

> .entry ul li{ list-style:disc inside none !important; 填充：5px 0px }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T09:39:18.433

这是因为`list-style`样式`inside`作为声明的一部分。

取下它，然后调整 margin-left 以将整个列表项推到右侧，然后填充以将文本与列表项项目符号分开。这样的事情应该这样做：

```
.entry ul li {
    list-style: disc !important;
    margin-left: 20px;
    padding: 3px 0 0 5px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T09:51:59.657

它没有正确缩进，因为它不在单行上。请`<p>`在您的内部添加标签，并从左侧`<li>`向标签添加填充，例如：`<p>`

```
.entry ul li p{
   padding: 0px 0px 0px 10px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-01T10:40:47.613

没有“rauberdaniel”那是浪费时间，无论如何我发现为什么我的源代码中的 UL 标签不能与 UL 标签中的 h2 和 h7 一起使用......因为我编辑了所有的 min.css 和默认值。我的源代码调用的 css 类，但它是针对这个下拉菜单的，但是.. 编辑所有 .css 文件夹时我没有看到什么......有一个 menu.js 控制主菜单功能.. . 呃！！！认为它是（JavaScript）库之一中的通用函数，但它肯定在那里......这是我下载和编辑的模板......在源代码调用之后，js代码在下面...... ..

```
<div id="MainMenu">
<ul id="MegaMenu">
<li>  <h2 class="question">Mechanical</h2>
<div>
<p> ......urthrtfhfthth</p>
</div> 
```

```
function megaHoverOver(){

  // show effect
  $(this).find(".sub").stop().slideDown();

  // render cufon on headings again (because it wasn't visible before)
  Cufon.replace('#MainMenu h2', { fontFamily: 'Vegur' });

  //Calculate width of all ul's
  (function($) { 
    jQuery.fn.calcSubWidth = function() {
      rowWidth = 0;
      //Calculate row
      $(this).find("ul").each(function() {                  
          rowWidth += $(this).width(); 
      });   
    }; 
```

我觉得很愚蠢 b/ci 花了一个半小时搜索纯 CSS 样式.. 愚蠢的浪费时间....但是它是 (h2)... 现在添加和我添加到 css 样式中的 h7 ALLL因为我希望文本小于描述点的标题，然后单击 HTML 站点中的下拉按钮。

# android - 引发空异常的 HTTP 请求

> ID：13658161
> 
> 赞同：1
> 
> 时间：2012-12-01T09:35:18.967
> 
> 标签：android, httpresponse, isnull

我有一个创建新连接实例的活动。像这样：

```
public class myActivity extends Activity {

TextView tv;
ProgressDialog dialog = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.daily_news);

    gestureDetector = new GestureDetector(new SwipeGestureDetector());
    tv = (TextView) findViewById(R.id.tx);
    dialog = ProgressDialog.show(myActivity.this, "","Validating user...", true);
    connection con = new connection(dialog);
    final String str =con.connect_to_db("http://10.0.2.2:8000/daily/my.php");

    runOnUiThread(new Runnable() {
        public void run() {
            tv.setText(str);
            dialog.dismiss();
        }
    });        
} 
```

}

在连接类中，我有一个返回 null 的 HttpResponse。像这样：

```
public class connection {

private HttpPost httppost;
private HttpClient httpclient;
private HttpResponse response;
private ProgressDialog dialog = null;
private String result;

 public connection(ProgressDialog di){
     dialog = di;
 }
public String connect_to_db(String url){

    try{            
        httpclient=new DefaultHttpClient();
        httppost= new HttpPost(url); 
        response=httpclient.execute(httppost);
        ResponseHandler<String> responseHandler = new BasicResponseHandler();
        result = httpclient.execute(httppost, responseHandler);
    }catch(Exception e){
        dialog.dismiss();
        System.out.println("Exception : " + e.getMessage());
    }
    return result;
} 
```

}

为什么连接类中“结果”的值为空？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T09:43:06.780

这一行：

```
 final String str =con.connect_to_db("http://10.0.2.2:8000/daily/my.php"); 
```

不应该写在 onCreate 中，而是写在单独的线程中 => NetworkOnMainThreadException

对于您的 NullPointer，请在 Manifest 中告诉我们您是否拥有 Internet 权限以及响应是否为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T09:45:26.597

可能是因为你在 onCreate 方法中做网络操作。如果您使用的是 android2.2，它不会产生任何问题，但如果是 HoneyComb，那么它很可能会导致一些异常，最后您会得到 null 值。将代码移至 onResume() 方法。

为了简单使用

HttpResponse 响应 = httpclient.execute(httppost);

和

```
String valueString = EntityUtils.toString(response.getEntity());
int  statusCode = response.getStatusLine().getStatusCode(); 
```

打印这些值并查看输出。

# ios - Sharekit2.0：如何直接分享到 facebook 和 twitter，而不是通过 UIActionSheet？

> ID：13658163
> 
> 赞同：2
> 
> 时间：2012-12-01T09:35:31.737
> 
> 标签：ios, facebook, twitter, share, sharekit

我在一个项目中使用最新的 Sharekit2.0。

列出了两个按钮（“在 Facebook 上投票”和“在 twitter 上分享”）作为附件，所以我不需要 UIActionSheet 来提示。如何直接将文本信息分别分享到 facebook 和 twitter。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:37:17.590

请您尝试以下方法：

```
#import "SHK.h"
#import "SHKFacebook.h"
#import "SHKTwitter.h" 
```

然后对于脸书

```
-(IBAction)forFacebook:(id)sender;{
    NSString *someText = @"This is a blurb of text I highlighted from a document.";
    SHKItem *item = [SHKItem text:someText];  

    [SHKFacebook shareItem:item];    

} 
```

推特

```
-(IBAction)forTwitter:(id)sender;{
    NSString *someText = @"This is a blurb of text I highlighted from a document.";
    SHKItem *item = [SHKItem text:someText];  

    [SHKTwitter shareItem:item];    

} 
```

请给我反馈，谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T13:52:24.133

其他方式：

```
#import "SHK.h"

-(IBAction)forSharing:(id)sender{

    NSString *someText = @"This is a blurb of text I highlighted from a document.";
    SHKItem *item = [SHKItem text:someText]; 

    SHKActionSheet *actionSheet = [SHKActionSheet actionSheetForItem:item]; 

    [actionSheet showFromToolbar:navigationController.toolbar];   

} 
```

但是您需要更改 shk.m 中的 favoriteSharersForType 函数以仅显示 twitter 和 facebook 选项。

```
if (favoriteSharers == nil)
    {
        switch (type) 
        {
            case SHKShareTypeURL:
                favoriteSharers = SHKCONFIG(defaultFavoriteURLSharers);
                break;

            case SHKShareTypeImage:
                favoriteSharers = SHKCONFIG(defaultFavoriteImageSharers);
                break;

            case SHKShareTypeText:
                favoriteSharers = SHKCONFIG(defaultFavoriteTextSharers);
                break;

            case SHKShareTypeFile:
                favoriteSharers = SHKCONFIG(defaultFavoriteFileSharers);
                break;

            default:
                favoriteSharers = [NSArray array];
        }

        // Save defaults to prefs
        [self setFavorites:favoriteSharers forType:type];
    } 
```

并更改 DefaultSHKConfigurator.m 中的变量 defaultFavoriteURLSharers 以仅显示 facebook 和 twitter，如下所示：

```
- (NSArray*)defaultFavoriteURLSharers {
    return [NSArray arrayWithObjects:@"SHKFacebook",@"SHKTwitter", nil];
} 
```

# python - Python正则表达式替换

> ID：13658166
> 
> 赞同：1
> 
> 时间：2012-12-01T09:35:59.283
> 
> 标签：python, regex

我一直很难理解正则表达式。在网络搜索的帮助下，我总是设法以某种方式度过难关。我想我从来没有费心去真正学习过。对不起。

但我再次需要他们的帮助。

我有一个像

```
d = {'account_id':a_value,'group_id':g_value,'other_id':o_value } 
```

我有一堆字符串，例如：

```
s1 = r'^settings/usergroups/(?P<group_id>\d+)/cargroups/$'
s2 = r'^settings/usergroups/(?P<group_id>\d+)/other/(?P<other_id>\d+)/$',
s3 = r'^settings/account/(?P<account_id>\d+)/other/(?P<other_id>\d+)/$', 
```

O 如何用 dict 中的匹配值替换字符串中的`(?P< group_id >\d+)`, `(?P< account_id >\d+)`, ？`(?P< other_id >\d+)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T10:38:58.203

正则表达式可以包含嵌套括号。

但是，[Python 正则表达式不能](https://stackoverflow.com/q/133601/190597)以尊重嵌套结构的方式匹配包含任意深度嵌套括号的字符串。（可以使用 Perl 的递归正则表达式。）

因此，如果您的用例涉及不包含嵌套括号的字符串，则以下内容就足够了，但请注意下面最后一个结果中不需要的额外括号：

```
import re
d = {'account_id':'a_value','group_id':'g_value','other_id':'o_value' }

tests = (r'^settings/usergroups/(?P<group_id>\d+)/cargroups/$',
         r'^settings/usergroups/(?P<group_id>\d+)/other/(?P<other_id>\d+)/$',
         r'^settings/account/(?P<account_id>\d+)/other/(?P<other_id>\d+)/$',
         r'^settings/usergroups/(?P<group_id>(\d+|\w))/other/(?P<other_id>\d+)/$'
         )
metapat = r'\(\?P<(.*?)>.*?\)'
for t in tests:
      result = re.sub(metapat, r'{\1}', t)
      if result:
            print(result.format(**d)) 
```

产量

```
^settings/usergroups/g_value/cargroups/$
^settings/usergroups/g_value/other/o_value/$
^settings/account/a_value/other/o_value/$
^settings/usergroups/g_value)/other/o_value/$ 
```

如果您确实需要解析嵌套括号，那么您将需要一个不同于`re`. 例如，[Pyparsing可以处理嵌套表达式。](http://pyparsing.wikispaces.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T10:26:32.570

如果您想进行**简单的字符串修改**，只需将字符串替换为关联的值`d`，您可以执行以下操作：

```
for key in d:
    s = s.replace(key,str(d[key]))
s = s.replace('(?P<','').replace('>\d+)','') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T10:12:50.237

这个问题与正则表达式无关；但更多的是为特定视图生成 URL。

首先，为了让您的生活更轻松并[命名您的 url 模式](https://docs.djangoproject.com/en/dev/topics/http/urls/#naming-url-patterns)：

```
urlpatterns = patterns('',
    (r'^settings/usergroups/(?P<group_id>\d+)/cargroups/$', 'car_groups_by_id'),
    # and so on
) 
```

然后在你的`views.py`，如果你想重定向一个用户：

```
from django.shortcuts import redirect

def foo(request):
    return redirect('car_groups_by_id',group_id=1234) 
```

如果要在模板中生成 url：

```
{% url 'car_groups_by_id' group_id=1234 %} 
```

如果您只想打印 URL：

```
>>> from django.core.urlresolvers import reverse
>>> reverse('car_groups_by_id',kwargs={'group_id': 1234}) 
```

* * *

通用的非 django 方法是使用内置的[模板字符串](http://docs.python.org/2/library/string.html#template-strings)：

```
>>> from string import Template
>>> t = Template('foo/bar/$group_id/zoo/')
>>> t.substitute(group_id=1234)
'foo/bar/1234/zoo/' 
```

无论哪种情况，这都不是正则表达式问题，因为您没有尝试匹配某些内容 - 只需替换字符串中的标记。碰巧您的示例字符串的标记是 python 正则表达式。

# ssis - 具有流程更新的处理维度

> ID：13658167
> 
> 赞同：2
> 
> 时间：2012-12-01T09:36:06.417
> 
> 标签：ssis, ssas, dimension

在使用流程更新处理维度时，我遇到了错误

> OLAP存储引擎的错误：在维度的增量处理过程中不能改变属性之间的刚性关系。处理属性时发生错误。表：'dbo_VW_myView'，列：'Some+Column'，值：'VTNS Affiliate'。来源属性： 。源属性的键列值：“ABBOTT LABORATORIES”。

通过一些研发，我能够弄清楚我不能在刚性关系中进行 ProcessUpdate 并且通过将维度关系更改为柔性将深刻影响多维数据集的性能。所以我的问题是，

这个问题可以通过按顺序处理维度来解决吗？如果是，那么我怎样才能动态地处理维度的顺序。如果否，处理更新尺寸的另一种方法可能是什么。

我只能通过 SSIS 处理维度。

**编辑1**

更准确地说，我正在执行以下步骤：

1.  创建分区。
2.  处理每个维度 - processAdd
3.  处理分区 - ProcessFull
4.  处理数据库 - ProcessDefault

*并 ProcessFull 数据库，每周一次*

但是有了这个，我认为我不会得到更新的维度条目。我的场景是这样的，对于每个负载尺寸/事实，只会更新或插入，不会删除。

那么，在这种情况下，哪种处理对我有用（我可以在您的建议中包含或排除上述步骤）？在处理多维数据集分区之前可以 ProcessDefault 维度可以帮助我。

注意：当我这样做时，如果没有第 2 步，处理工作正常.. 但在那之后，当我完全处理数据库时，我得到错误**操作失败**，除了我创建的分区列表之外没有任何特定错误。（令人惊讶的是，处理完整的数据库正在处理维度而没有任何问题）

**编辑2**

有没有其他方法来处理更新维度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T06:55:37.160

不，您无法通过以任何不同的顺序处理维度来纠正此问题。误差是一维内部的。这是维度内部数据变化的症状，这在我研究过的所有（非日期）维度中是不可避免的——甚至是某些日期维度。

您需要重新审视您的研发，并通过灵活的维度关系将您的多维数据集性能提高到可接受的水平。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T12:30:28.187

您需要完全处理维度以清除此错误 - 但是 - 如果我没记错的话，这通常会将相关的事实表保留为“未处理”。

Mike Honey 是正确的，发生的事情是你告诉立方体有些东西不会改变，然后你改变了它。例如，您曾说过家庭地址对客户 ID 是严格的客户维度 - 客户第一次更改地址时，您将无法处理更新维度。

使这些刚性/灵活的关系正确可能是一个真正的痛苦 - 你不会期望改变的事情（出生日期） - “我们为客户写下了错误的出生日期”等等...... :(

# java - 我如何使用 vim 在 java 代码中提取函数

> ID：13658168
> 
> 赞同：1
> 
> 时间：2012-12-01T09:36:16.103
> 
> 标签：java, vim, yank

Java 有封装整个类定义的花括号。因此，当在 vim 中使用圆括号（{ 或 }）键时，它会转到类的末尾，而不是转到下一个空行或函数定义的末尾。那么我怎样才能拉出整个函数和评论呢？换句话说，无论位置如何，我都可以跳到下一个空白行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:02:49.880

I don't fully understand the problem, vim should match curly brackets, you can use shift-% to toggle your cursor position on matched brackets. With that said, if I understand you correctly(and trying it out myself) you are getting everything under the function header when you yank with ya{. Try this: on the end { of the function header, use **ma** to mark the position to register a, then **%** to move down to the end of the method, then **y'a** to yank it all. This will grab the entire function.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T10:05:24.970

This is answer I came up with and I am not happy with it. In my vimrc, I set tab to be 4 whitespaces. So if I know that my function is separated by line that has 4 white spaces, I can do

```
y/^\s\s\s\s$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T09:38:12.707

当光标在方法中时，您可以拉出方法的内容，**换句话说**`yi{`，**y** ank inner **{**

# sql - 如何将取值的表更新到第二个 sql 实例？

> ID：13658176
> 
> 赞同：1
> 
> 时间：2012-12-01T09:37:51.817
> 
> 标签：sql, sql-server

我在两个虚拟机`Test`服务器和`Production`服务器上有两个 SQL Server 实例。

我需要对`UPDATE`生产服务器从测试服务器获取数据值进行操作。

例如 ：

```
UPDATE [server_production].dbname.mytable 
SET column1 = [server_test].dbname.mytable.column1 
```

我该怎么做呢 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T09:55:42.750

看看redgate sql数据比较

[http://www.red-gate.com/products/sql-development/sql-data-compare/](http://www.red-gate.com/products/sql-development/sql-data-compare/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T09:55:58.350

在您的生产服务器上，定义一个指向您的测试服务器的[链接服务器。](http://msdn.microsoft.com/en-us/library/ms188279.aspx)

然后，在您的生产服务器上，您可以运行类似于以下内容的查询来更新您的列：

```
UPDATE p
    SET column1 = t.column1
from <dbname>.<schema>.mytable p
join <TestLinkedServerName>.<dbname>.<schema>.mytable t
    on p.<id> = t.<id> 
```

在上面的查询中，您需要为占位符提供值：

*   `<dbname>`- 产品/测试数据库的名称
*   `<schema>`- 定义表的模式（通常是*dbo*）
*   `<TestLinkedServerName>`- 您为链接服务器指定的名称
*   `<id>`- 您的 PK 列，或唯一标识行并提供连接两个表的方法的列

# iphone - GameCenter 为所有玩家获得相同的视图

> ID：13658179
> 
> 赞同：1
> 
> 时间：2012-12-01T09:37:59.213
> 
> 标签：iphone, objective-c, ios, xcode, game-center

我在我的应用程序中使用游戏中心，并使用 GKTurnbasedMatch 游戏进行管理。

我有一个视图，我必须在下一个视图中选择我将获得卡片的类别，然后在下一个视图中我有游戏中心的邀请视图。

我想要的是同一场比赛中所有玩家的卡片和类别应该是相似的，所以如果卡片 1 在 1 个玩家中翻转，那么所有玩家卡片 1 都应该翻转。

如何得到这个？

# php - 如何检索从某个偏移量到某个限制的所有行？

> ID：13658183
> 
> 赞同：1
> 
> 时间：2012-12-01T09:38:15.710
> 
> 标签：php, mysql, sql-limit

这是我的问题，到目前为止我得到了这个脚本：

```
$result = mysql_query(
    "SELECT *
       FROM $tableVideos
   ORDER BY VideoTimestamp DESC
      LIMIT 6"
) or die(mysql_error()); 
```

这样我就可以在我的网站上显示 6 个最新上传的视频。

但是我怎么能有 6 个限制，从第 6 个最新视频开始，一直到第 12 个呢？这样，我可以显示 6 个视频并制作下一个按钮来显示接下来的 6 个视频。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T09:41:39.137

您目前必须`LIMIT 6`获得前 6 个结果。如果你使用

```
LIMIT a,b 
```

然后你会得到`b`从`a`th 开始的项目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-01T09:41:49.683

你要

```
LIMIT 6,6 
```

意思是“从第 6 个条目开始，再给我 6 个”。

**[阅读更多关于它的信息。](http://dev.mysql.com/doc/refman/5.6/en/select.html)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T09:43:44.057

用这个：

```
$result = mysql_query("SELECT * FROM $tableVideos ORDER BY VideoTimestamp DESC LIMIT 6,6") or die(mysql_error()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T09:44:31.183

```
 Actually Limit function have two paramter : 
     one is limit of record and second is start from where.

    result = mysql_query("SELECT * FROM $tableVideos ORDER 
                          BY VideoTimestamp DESC LIMIT 6,6") or die(mysql_error()); 
```

# python - 使用 Python 在 OpenCv 中设置 ORB 参数

> ID：13658185
> 
> 赞同：3
> 
> 时间：2012-12-01T09:38:30.927
> 
> 标签：python, opencv

我一直在 Python 中使用 OpenCV 2.4 来匹配两个图像之间的特征，但我想更改“ORB”检测器的参数之一（它提取“nfeatures”的特征数量），似乎没有办法在 Python 中这样做。

对于 C++，您可以通过 FeatureDetector/DescriptorExtractor 的“读取”（或 java 的“加载”？）方法加载参数 yml/xml 文件。但是 Python 绑定缺少此函数/方法。

它还缺少直接创建 ORB 对象的绑定，因此我无法在那里传递参数（Python 绑定似乎要求您按字符串名称使用 cv2.DescriptorExtractor_create - 如果您传递错误的字符串名称或参数以及它......此外，该函数不能接受它似乎传递给构造函数的任何其他参数。

我唯一的希望似乎是使用 cv2.cv.Load(filename) 从 xml 加载完整的对象，但这似乎需要一个对象实例而不是算法定义，为此我在新旧版本中找不到任何 Python 绑定句法。我在文件加载步骤上尝试了几种变体，包括模仿 OpenCV 中保存的 xml 文件的样式，但没有成功。

有没有人在我上面尝试的将参数传递到 OpenCV 中的检测器（SURF 或 ORB，或任何通用算法）的步骤之一中取得成功？

这是我用来提取特征的代码：

```
def findFeatures(greyimg, detector="ORB", descriptor="ORB"):
    nfeatures = 2000 # No way to pass to detector...?
    detector = cv2.FeatureDetector_create(detector)
    descriptorExtractor = cv2.DescriptorExtractor_create(descriptor)
    keypoints = detector.detect(greyimg)
    (keypoints, descriptors) = descriptorExtractor.compute(greyimg, keypoints)
    return keypoints, descriptors 
```

**编辑**

更改检测器设置似乎只是 Windows 实现的段错误——等待补丁或修复出现在 OpenCV 的网站上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T21:21:41.100

```
import cv2

# to see all ORB parameters and their values
detector = cv2.FeatureDetector_create("ORB")    
print "ORB parameters (dict):", detector.getParams()
for param in detector.getParams():
    ptype = detector.paramType(param)
    if ptype == 0:
        print param, "=", detector.getInt(param)
    elif ptype == 2:
        print param, "=", detector.getDouble(param)

# to set the nFeatures
print "nFeatures before:", detector.getInt("nFeatures")
detector.setInt("nFeatures", 1000)
print "nFeatures after:", detector.getInt("nFeatures") 
```

输出：

ORB 参数 (dict): ['WTA_K', 'edgeThreshold', 'firstLevel', 'nFeatures', 'nLevels', 'patchSize', 'scaleFactor', 'scoreType']
WTA_K = 2
edgeThreshold = 31
firstLevel = 0
nFeatures = 500
nLevels = 8
patchSize = 31
scaleFactor = 1.20000004768
scoreType = 0
nFeatures before: 500
nFeatures after: 1000

**编辑：**对 OpenCV 3.0 做同样的事情现在更容易了

```
import cv2

detector = cv2.ORB_create()
for attribute in dir(new_detector):
    if not attribute.startswith("get"):
        continue
    param = attribute.replace("get", "")
    get_param = getattr(new_backend, attribute)
    val = get_param()
    print param, '=', val 
```

并与二传手类比。

# java - 我想在我的小程序中添加计时器

> ID：13658186
> 
> 赞同：1
> 
> 时间：2012-12-01T09:38:38.993
> 
> 标签：java, swing, timer, applet, awt

我制作了 CountDown.java 文件并尝试添加我的 Word-trouble.java 文件（这是主小程序），`CountDown ct = new CountDown();` 但它没有在主小程序中显示计时器。

这是编码：

```
package pack.urdu;
import java.awt.*; //windows toolkit

import java.applet.*; //applet support

public class CountDown extends Applet implements Runnable{

int counter; Thread cd;

public void start() { // create thread

counter = 60; cd = new Thread(this); cd.start();

}

public void stop() { cd = null;}

public void run() {  // executed by Thread

while (counter>0 && cd!=null) {

try{Thread.sleep(1000);} catch (InterruptedException e){}

--counter; repaint(); //update screen

}

}

public void paint(Graphics g) {

g.drawString(String.valueOf(counter),25,75);

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:37:02.803

您犯了一个我看到很多程序员犯的错误：您将经过时间的计算与刷新时间的计算混为一谈。如果由于线程争用而导致睡眠持续时间超过一秒，您的计时器将会漂移。

无需跟踪每秒递增的计数器，只需记录开始时间：

```
long startTime = System.currentTimeMillis(); 
```

然后，您的绘画方法变为：

```
public void paint(Graphics g) {
    int elapsedSeconds = (int)(System.currentTimeMillis()-startTime)/1000
    g.drawString(String.valueOf(elapsedSeconds),25,75);
} 
```

这个方法可以被多次调用，只要你喜欢，它总是会显示正确的经过的秒数。无需在任何指定时间增加任何内容。

您唯一需要做的就是安排刷新屏幕。（我想说你只需要在用户查看屏幕时刷新屏幕 :-) 但因为我们不知道我们需要更频繁地刷新）。其机制可能取决于图形库。一个懒惰的想法是每秒刷新十次，屏幕大部分时间都是正确的。

如果您确实希望有一个发送重绘事件的线程，您应该在计时器点击到新值时发送这些事件，从而每秒只发送一个。这是通过以下方式完成的：

```
while (stillRunning) {
    long elapsedTime = System.currentTimeMillis() - startTime;
    long timeTillNextDisplayChange = 1000 - (elapsedTime % 1000);
    Thread.sleep(timeTillNextDisplayChange);
    repaint();
} 
```

请注意，您不要睡眠 1000 毫秒！如果您的系统运行良好，这将非常接近 1000 毫秒，但略低于（1）线程启动延迟，可能是由线程争用引起的，以及（2）此循环的处理时间（即相当小）。在任何情况下，以这种方式计算睡眠将防止计时器漂移，并确保您的显示随着秒值的变化而更新。

在我的网站上查看[对定时器](http://agiletribe.wordpress.com/2013/01/14/timers-common-misunderstandings/)的常见误解的扩展讨论。

# c++ - C++ 它没有从文件读回动态结构

> ID：13658190
> 
> 赞同：0
> 
> 时间：2012-12-01T09:39:30.447
> 
> 标签：c++

所以你可以领养一只宠物（现在有点小车，因为它没有读入价值）

在文件中，我会看到它从 0 变成 1；这意味着它是真的。因此它应该说被采纳。

这是读取布尔值的正确方法吗？问题出在读取功能中，我的问题是

阅读>>

```
#include <iostream>
#include <cctype>
#include <cstring>
#include <fstream>
using namespace std;

const int TEMP_SIZE = 250;

struct animal
{
    char *name;
    char *breed;
    float age;
    float weight;
    char *desc;
    bool adopted;
//we generate this
    int ID; 
};

struct family
{
    char *host;
    char *address;
    int numDogs;    
};

class petAdoption
{
    public:
    //petAdoption();
    //~petAdoption();
    void enroll(animal pet[], int & count);
    void read(animal pet[], int & count);
    void display(animal pet[], int & count);
    void adoptPet(animal pet[], int & count);
    void getNum(int & count);
};

void petAdoption::enroll(animal pet[], int & count)
{
//name Dynamic array 1;
    char temp[TEMP_SIZE];
    cout << "Please your pet's name: ";
    cin.get(temp, TEMP_SIZE);
    cin.ignore(100, '\n');
    pet[count-1].name = new char[strlen(temp)];
    strcpy(pet[count-1].name, temp);
//breed Dynamic array 2;
    cout << "Please your pet's breed: ";
    cin.get(temp, TEMP_SIZE);
    cin.ignore(100, '\n');
    pet[count-1].breed = new char[strlen(temp)];
    strcpy(pet[count-1].breed, temp);
//desc Dynamic array 3;
    cout << "Please a desc of your pet: ";
    cin.get(temp, TEMP_SIZE);
    cin.ignore(100, '\n');
    pet[count-1].desc = new char[strlen(temp)];
    strcpy(pet[count-1].desc, temp);
//not adopted 
    pet[count-1].adopted = false;
    ofstream write;

    write.open("pets.txt", ios::app);
        write << pet[count-1].name << '\n';
    write.close();
    write.open(pet[count-1].name);
        write << pet[count-1].name << '\n'
        << pet[count-1].breed << '\n'
        << pet[count-1].desc << '\n'
        << pet[count-1].adopted << '\n';
    write.close();
}

//This method basically, allocates memory for the array.
void petAdoption::getNum(int & count)
{
    ifstream read;  
    char temp[TEMP_SIZE];
    read.open("pets.txt");
        if(!read)
        {
            cout << "error 1" << endl;
            count = 1;
        }
        else{
            while(!read.eof())
            {
                read.getline(temp, TEMP_SIZE);
                count = ++count;
            }
        }
    read.close();
}

void petAdoption::read(animal pet[], int & count)
{
    ifstream read;  
    char temp[TEMP_SIZE];

//read in the names
    int k = 0;
    read.open("pets.txt");
    if(!read)
    {
        cout << "There's No pets.txt file! (Ignore this!)" <<endl;
    }
    else 
    {
        while(!read.eof())
        {
            read.getline(temp, TEMP_SIZE);
            pet[k].name = new char[strlen(temp)+1];
            strcpy(pet[k].name, temp);
        ++k;
        }
    }
    read.close();

    for (int i = 0; i < count-1; ++i)
    {
        read.open(pet[i].name);
            if(!read)
            {
                cout << "error 2" << endl;
            }
            else{
                while(!read.eof())
                {
        //name
                    read.getline(temp, TEMP_SIZE);
                    pet[i].name = new char[strlen(temp)+1];
                    strcpy(pet[i].name, temp);
        //breed
                    read.getline(temp, TEMP_SIZE);
                    pet[i].breed = new char[strlen(temp)+1];
                    strcpy(pet[i].breed, temp);
        //desc
                    read.getline(temp, TEMP_SIZE);
                    read.ignore(100, '\n');
                    pet[i].desc = new char[strlen(temp)+1];
                    strcpy(pet[i].desc, temp);

                    read >> pet[i].adopted;
                cout << i << endl;
                }
            }
        read.close();
    }
}

void petAdoption::display(animal pet[], int & count)
{
    for (int i = 0; i < count-1; ++i){
        cout << "Pet id = " << i << '\n' << endl;
        cout << pet[i].name << '\n' << pet[i].breed << '\n' << pet[i].desc << '\n';
        cout << pet[i].adopted << endl;
        if (pet[i].adopted == false){
            cout << "Not adopted" << '\n' << endl;
        }
        if (pet[i].adopted == true){
            cout << "Adopted" << '\n' << endl;
        }
    }
}

void petAdoption::adoptPet(animal pet[], int & count)
{   
    int adoptID;
    cout << "Which pet would you like to adopt? (Please enter the ID, EG: 2 or 5): ";
    cin >> adoptID;
    cin.ignore(100, '\n');

    pet[adoptID].adopted = true;
    cout << pet[adoptID].adopted << endl;

    ofstream write;
    for (int i = 0; i < count; ++i){
        write.open(pet[i].name);
            write << pet[i].name << '\n'
            << pet[i].breed << '\n'
            << pet[i].desc << '\n'
            << pet[i].adopted << '\n';
        write.close();
    }
}

int main()
{
//When starting the program, we read in from the text files first
//and then we count how many animals we have had in the shelter
//and we use that as a base to dynamically allocate the structs 
    petAdoption adopt;
    char again;
    int choice;
    do {
        int count = 0;
        adopt.getNum(count);
        animal *pet;
        pet = new animal[count];
        adopt.read(pet, count);
        cout << "~~~~~~~~~~~~~~~~~~MENU~~~~~~~~~~~~~~~~~~" << endl;
        cout << "1) Enroll a pet" << endl;
        cout << "2) Display pets" << endl;
        cout << "3) Adopt a pet" << endl;
        cout << "Please make your selection (1-3): ";
        cin >> choice;
        cin.ignore(100,'\n');
        if (1 == choice){
            adopt.read(pet, count);
            adopt.enroll(pet, count);
        }
        if (2 == choice){
            adopt.read(pet, count);
            adopt.display(pet, count);
        }
        if (3 == choice){
            adopt.read(pet, count);
            adopt.adoptPet(pet, count);
        }
        cout << "Would you like to try again? (y/n): ";
        cin >> again;
        cin.ignore(100,'\n');
    } while ('Y' == toupper(again)); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:23:35.167

似乎问题出在你的逻辑中，我在你的代码中修复了一些东西，它正在工作看看：我修复的东西是：-enroll(animal pet[], int & count) - getNum(int & count) - 阅读(animal pet[], int & count) - 显示(animal pet[], int & count)

```
#include <iostream>
#include <cctype>
#include <cstring>
#include <fstream>
using namespace std;

const int TEMP_SIZE = 250;

struct animal
{
    char *name;
    char *breed;
    float age;
    float weight;
    char *desc;
    bool adopted;
//we generate this
    int ID; 
};

struct family
{
    char *host;
    char *address;
    int numDogs;    
};

class petAdoption
{
    public:
    //petAdoption();
    //~petAdoption();
    void enroll(animal pet[], int & count);
    void read(animal pet[], int & count);
    void display(animal pet[], int & count);
    void adoptPet(animal pet[], int & count);
    void getNum(int & count);
};

void petAdoption::enroll(animal pet[], int & count)
{
//name Dynamic array 1;
    char temp[TEMP_SIZE];
    cout << "Please your pet's name: ";
    cin.get(temp, TEMP_SIZE);
    cin.ignore(100, '\n');
    pet[count-1].name = new char[strlen(temp)];
    strcpy(pet[count-1].name, temp);
//breed Dynamic array 2;
    cout << "Please your pet's breed: ";
    cin.get(temp, TEMP_SIZE);
    cin.ignore(100, '\n');
    pet[count-1].breed = new char[strlen(temp)];
    strcpy(pet[count-1].breed, temp);
//desc Dynamic array 3;
    cout << "Please a desc of your pet: ";
    cin.get(temp, TEMP_SIZE);
    cin.ignore(100, '\n');
    pet[count-1].desc = new char[strlen(temp)];
    strcpy(pet[count-1].desc, temp);
//not adopted 
    pet[count-1].adopted = false;
    ofstream write;

    write.open("pets.txt", ios::beg | ios::app);
    write << pet[count-1].name << '\n';
    write << pet[count-1].breed << '\n';
    write << pet[count-1].desc << '\n';
    write << pet[count-1].adopted << '\n';
    write.close();
}

//This method basically, allocates memory for the array.
void petAdoption::getNum(int & count)
{
    ifstream read;  
    char temp[TEMP_SIZE];
    int count_temp = 0;
    read.open("pets.txt");

    while(!read.eof())
    {
        read.getline(temp, TEMP_SIZE);
        count_temp++;
        if (count_temp == 4){
           count++;
           count_temp = 0;
        }
    }

    read.close();
}

void petAdoption::read(animal pet[], int & count)
{
    ifstream read;  
    char temp[TEMP_SIZE];

//read in the names
    int k = 0, i =0;
    read.open("pets.txt");

    while(read.good()){
        if (i < count){
    //name
            read.getline(temp, TEMP_SIZE);
            pet[i].name = new char[strlen(temp)+1];
            strcpy(pet[i].name, temp);
    //breed
            read.getline(temp, TEMP_SIZE);
            pet[i].breed = new char[strlen(temp)+1];
            strcpy(pet[i].breed, temp);
    //desc
            read.getline(temp, TEMP_SIZE);
            pet[i].desc = new char[strlen(temp)+1];
            strcpy(pet[i].desc, temp);

            read.getline(temp, TEMP_SIZE);
            if (strcmp(temp,"0") == 0){
                pet[i].adopted = true;
            }else{
                pet[i].adopted = false;
            }
        }else{
          cout << i << endl;
          break;
        }

        i++;
    }

        read.close();

}

void petAdoption::display(animal pet[], int & count)
{
    for (int i = 0; i < count; i++){
        cout << "Pet id = " << i << '\n' << endl;
        cout << pet[i].name << '\n' << pet[i].breed << '\n' << pet[i].desc << '\n';
        cout << pet[i].adopted << endl;
        if (pet[i].adopted == false){
            cout << "Not adopted" << '\n' << endl;
        }else{
            cout << "Adopted" << '\n' << endl;
        }
    }
}

void petAdoption::adoptPet(animal pet[], int & count)
{   
    int adoptID;
    cout << "Which pet would you like to adopt? (Please enter the ID, EG: 2 or 5): ";
    cin >> adoptID;
    cin.ignore(100, '\n');

    pet[adoptID].adopted = true;
    cout << pet[adoptID].adopted << endl;

    ofstream write;
    write.open("pets.txt", ios::beg);

    for (int i = 0; i < count; ++i){
            write << pet[i].name << '\n'
            << pet[i].breed << '\n'
            << pet[i].desc << '\n'
            << pet[i].adopted<<'\n';
    }
        write.close();
} 
```

# javascript - 如何实现自定义css到jquery自动完成

> ID：13658195
> 
> 赞同：0
> 
> 时间：2012-12-01T09:39:59.467
> 
> 标签：javascript, jquery, jquery-ui, jquery-autocomplete

我在我的网站上有运行 jquery 自动完成搜索功能，用户输入部分名称并从数据库中找到匹配的全名。问题是当有匹配时，我无法使用以下标记显示名称匹配。它正在使用看起来很糟糕的默认自动完成标记。我需要将结果显示在下面示例中的 li 中。

```
<div class="search_dropdown_wrapper">
    <div id="search_arrow" class="dropdown_pointer search"></div>
    <ul>
        <li>
            <a>Sam Cohen</a>
            <p>Software Engineer</p>
        </li>
    </ul>
</div> 
```

我无法使用上述 div 将 ul 包装在自动完成中。我尝试过使用代码，我让它部分显示带有标记的结果，但链接功能搞砸了，点击名称不再填充文本框。这是我正在使用的自动完成代码..

```
if($('#search_name').length > 0){
  $('#search_name').autocomplete({
    minLength: 2,
    source: '/profiles/jquery_auto_complete_name',
        focus: function(event, ui) {
            $('#search_name').val(ui.item.first_name + " " + ui.item.last_name);
            return false;
        },
    select: function(event, ui) {
        $("#receiver-list").val(ui.item.first_name + " " + ui.item.last_name);
        return false;
    }
  })
  .data( "autocomplete" )._renderItem = function( ul, item ) {
      return $( "<li></li>" )
      .data( "item.autocomplete", item )
      .append("<a>" + item.first_name + " " + item.last_name + "</a>")
      .appendTo( ul );
  };
} 
```

（信用：感谢[如何在 Rails 中设置 jquery-ui 自动完成，](https://stackoverflow.com/questions/3188157/how-to-set-up-jquery-ui-autocomplete-in-rails)这是一个很好的自动完成示例）

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T09:48:31.200

你可以为此找到一个奇妙的宝石：

[https://github.com/crowdint/rails3-jquery-autocomplete](https://github.com/crowdint/rails3-jquery-autocomplete)

此致！

# firefox - YUI设置cookie过期在firefox和chrome中设置不同的过期时间

> ID：13658197
> 
> 赞同：1
> 
> 时间：2012-12-01T09:40:11.243
> 
> 标签：firefox, google-chrome, yui, expired-cookies

我希望会话在一段时间后到期，即 30 分钟。我正在使用 YUI cookie 实用程序来完成以下任务，这是对我来说执行任务的功能。

```
function setCookies(staffid,sessionid) {
var currentDate = new Date();
var sessionPeriod = 1000 * 30 *60 ; //30 minutes of idle session is valid.
var timeOut = currentDate.getTime() + sessionPeriod;
alert(timeOut);
YAHOO.util.Cookie.set("_sid",staffid, {path : "/demo"});
YAHOO.util.Cookie.set("_uuid",sessionid, {path: "/demo", expires: new Date(timeOut)});
} 
```

Firefox 和 Chrome 中设置的过期时间不同

在 Firefox 中设置的过期时间是：2012 年 12 月 1 日 14:30:28 在 Chrome 中设置的过期时间是：星期六，2012 年 12 月 1 日 09:00:31 GMT

谁能帮我解决问题。

# android - 通过 RTP 在 android 中流式传输音频文件

> ID：13658201
> 
> 赞同：6
> 
> 时间：2012-12-01T09:41:05.253
> 
> 标签：android, audio, stream, rtp

我**正在****寻找**一种使用和. 现在主要的绊脚石是如何从文件中获取 a 和它，以便它可以像来自**麦克风**或**摄像机**的流一样通过传递。**`SIP``RTP``stream``synchronize``RTP`**

# actionscript-3 - as3中的弹簧有一些定位问题

> ID：13658202
> 
> 赞同：1
> 
> 时间：2012-12-01T09:41:17.093
> 
> 标签：actionscript-3, flixel

一段时间以来，我一直在尝试破解 Photonstorm 的用于 Flixel 的 Power Tools 'Spring' 插件。我已经涉足了一些公式，但直到现在我还没有得到我想要的东西。

我已经设法将它破解到插件中：http: [//illogictree.com/blog/2010/01/1345/](http://illogictree.com/blog/2010/01/1345/)

这使得示例现在看起来像这样： ![黑客工具](../Images/1e28933545b3face820b5fd069c47a34.png)

哪个好。它的行为与我希望它的感觉非常相似。除了一个问题。我希望绳子上的球直接位于鼠标下方。关于如何做到这一点的任何想法？

在你问之前，代码：//插件黑客

```
 package org.flixel.plugin.photonstorm.BaseTypes 
    {
    import org.flixel.*;
    import org.flixel.plugin.photonstorm.FlxExtendedSprite;

    public class MouseSpring 
    {
        public var sprite:FlxExtendedSprite;

        /**
         * The tension of the spring, smaller numbers create springs closer to the mouse pointer
         * @default 0.1
         */
        public var tension:Number = 0.1;

        /**
         * The friction applied to the spring as it moves
         * @default 0.95
         */
        public var friction:Number = 0.95;

        /**
         * The gravity controls how far "down" the spring hangs (use a negative value for it to hang up!)
         * @default 0
         */
        public var gravity:Number = 0;

        private var retainVelocity:Boolean = false;

        private var vx:Number = 0;
        private var vy:Number = 0;

        private var dx:Number = 0;
        private var dy:Number = 0;

        private var ax:Number = 0;
        private var ay:Number = 0;

        /**
         * Adds a spring between the mouse and a Sprite.
         * 
         * @param   sprite              The FlxExtendedSprite to which this spring is attached
         * @param   retainVelocity      true to retain the velocity of the spring when the mouse is released, or false to clear it
         * @param   tension             The tension of the spring, smaller numbers create springs closer to the mouse pointer
         * @param   friction            The friction applied to the spring as it moves
         * @param   gravity             The gravity controls how far "down" the spring hangs (use a negative value for it to hang up!)
         */
        public function MouseSpring(sprite:FlxExtendedSprite, retainVelocity:Boolean = false, tension:Number = 0.1, friction:Number = 0.95, gravity:Number = 0)
        {
            this.sprite = sprite;
            this.retainVelocity = retainVelocity;
            this.tension = tension; //bounciness
            this.friction = friction; //how tight
            this.gravity = gravity; //mass
        }

        /**
         * Updates the spring physics and repositions the sprite
         */
        public function update():void
        {
            dx = FlxG.mouse.x - sprite.springX;
            dy = FlxG.mouse.y - sprite.springY;

            ax = dx * tension;
            ay = dy * tension;

            //ax = Math.cos(dx * tension);
            //ay = Math.sin(dy * tension);

            vx += ax;
            vy += ay;

            //vy += gravity;
            //vx *= friction;
            //vy *= friction;

            //This is where I've hacked it in:
            vx = ax + ( 1.0 / gravity ) * (-friction * ax - tension * ( FlxG.mouse.x - dx  ) + sprite.springX * gravity ) * FlxG.elapsed;
            vy= ay + ( 1.0 / gravity ) * ( -friction * ay - tension * ( FlxG.mouse.y - dy ) + sprite.springY * gravity ) * FlxG.elapsed;            

            sprite.x += vx;
            sprite.y += vy;
        }

        /**
         * Resets the internal spring physics
         */
        public function reset():void
        {
            vx = 0;
            vy = 0;

            dx = 0;
            dy = 0;

            ax = 0;
            ay = 0;
        }       
         }
       } 
```

将对象应用于状态：

```
 ball1 = new FlxExtendedSprite(160, 120, AssetsRegistry.redPNG);
        //Argument 1:onPressed: true if the spring should only be active     when the mouse is pressed down on this sprite
        //Argument 2:retainVelocity: true to retain the velocity of the     spring when the mouse is released, or false to clear it
        //Argument 3:tension: The tension of the spring, smaller numbers     create springs closer to the mouse pointer
        //Argument 4:friction: The friction applied to the spring as it     moves
        //Argument 5:gravity: The gravity controls how far "down" the      spring hangs (use a negative value for it to hang up!)
        ball1.enableMouseSpring(false, false, 0.1, 0.95, -5);
        ball1.springOffsetX = 0;
        ball1.springOffsetY = 0; 
```

此外，任何有助于松开弹簧以使其更像绳索或绳索的帮助也会有所帮助！

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:36:55.887

如果您希望它直接位于鼠标下方，请删除所有 x 计算并将其替换为舞台上的 mouseX 参数。弹簧现在只会在 y 维度上移动。

要调整弹性，请使用以下值：

```
this.tension = tension; //bounciness
this.friction = friction; //how tight
this.gravity = gravity; //mass 
```

一些组合会让你得到你正在寻找的东西。

# spring - 使用 spring 和 restful webservice 自定义 HTTP 状态代码

> ID：13658203
> 
> 赞同：3
> 
> 时间：2012-12-01T09:41:28.233
> 
> 标签：spring, http, rest, status

我是 spring 和 restful 框架的新手。我的服务器托管 3 个宁静的 Web 服务。我已经使用 spring 对 restful web 服务的支持来实现服务器。客户端向服务器发送 JSON 请求并获得 JSON 响应。客户端是基于spring对restful的支持。服务器返回 200/OK 表示处理成功，这是默认值。

我想要的是服务器向客户端发送自定义 HTTP 状态代码 550，以防在处理请求时出现问题。它不应该向客户端抛出任何异常。它应该只将 550/an_error_object(as json) 发送回客户端。

restful 的弹簧支撑怎么可能？我在服务器端执行以下操作。

HttpServletResponse.setStatus(550)

但是，客户端无法识别状态码 550；它抛出一个异常，因为 org.springframework.http.HttpStatus 没有定义任何枚举常量“550”。

任何建议都会很棒！

提前致谢。

罗希特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T10:28:09.437

1) 不要使用未注册的状态码。查看[注册状态码](http://www.iana.org/assignments/http-status-codes/http-status-codes.xml)。

2）话虽如此，这是Spring框架中的一个错误。它应该正确处理扩展状态代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-07T22:29:36.827

它可能会在 Spring 的 4.3 版中得到修复。

[https://jira.spring.io/browse/SPR-14205](https://jira.spring.io/browse/SPR-14205)

# ios - 如何从 iTunes 商店 xcode 下载特定曲目

> ID：13658206
> 
> 赞同：0
> 
> 时间：2012-12-01T09:41:44.507
> 
> 标签：ios, itunes, xcode4.5

我必须从我的应用程序的 Button Click 上从 iTunes 音乐商店下载特定曲目。我无法准确找到如何执行此操作。

我已经实现了以下代码来获取播放列表中的播放列表和歌曲：

```
-(void)musicPlaylist{

    playlistQuery= [MPMediaQuery playlistsQuery];
    NSArray *arr = [playlistQuery collections];
    NSLog(@"Playlist is : %@",arr);
    int count1=[arr count];
    NSLog(@" count 1 is %d",count1);

    for (MPMediaPlaylist *playlist in arr) {
      NSLog (@"%@", [playlist valueForProperty: MPMediaPlaylistPropertyName]);
      playlistTitle = [playlist valueForProperty: MPMediaPlaylistPropertyName];
      playlistDict=[NSDictionary dictionaryWithObjectsAndKeys:playlistTitle,@"playlist Title",nil];
      [dictArray addObject:playlistDict];

      NSArray *songs = [playlist items];
      for (MPMediaItem *song in songs) {
        NSString *songTitle =[song valueForProperty: MPMediaItemPropertyTitle];
        [songArray addObject:songTitle];
      }
      NSLog(@"Playlist is %@",playlistTitle);
      NSLog(@"Playlist Songs are %@",songArray);
    }
} 
```

现在我想允许应用程序在按钮单击时下载特定曲目。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T10:46:09.343

您所需要的只是 iTunes 商店中曲目的 ID。然后按照本教程在您的应用中展示商店 UI：

[使用 SKStoreProductViewController 类进行商店购买](http://www.techotopia.com/index.php/Making_Store_Purchases_with_the_SKStoreProductViewController_Class)

该库允许您在 iTunes Store 中搜索（以获取 ID）：[https ://github.com/gangverk/iTunesSearch](https://github.com/gangverk/iTunesSearch)

# android - Android：需要对加速度计数据应用线性时间插值

> ID：13658208
> 
> 赞同：2
> 
> 时间：2012-12-01T09:41:51.353
> 
> 标签：android, accelerometer, android-sensors, linear-interpolation

需要处理从加速度计传感器（三星 Galaxy S）检索的原始数据，以便为每个主题创建强大的模板，因此我需要应用线性时间插值，因为由于 android SDK，手机仅在有传感器的变化。因此，两个采样点（加速度值）之间的时间间隔并不总是相等的，这就需要时间插值。这确保了两个采样点之间的时间间隔是固定的。

所以请帮助我如何对这些数据应用插值方法，因为数据将包含 X、Y、Z 值。（任何插值方法的链接都将受到欢迎）

更新：这些加速度计数据是在手机放在腰包里的人走路时产生的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:07:53.747

Android 传感器在注册时以指定的速率恒定输出。无需插值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T11:22:09.360

您确定插值会满足您的要求吗？

要插入一个值，您需要知道前一个点和下一个点在哪里，如果您正在进行实时分析，您只知道前一个点在哪里。

我建议你看看这个项目：[计步器](http://code.google.com/p/pedometer/)

它使用加速度计实现与您相同的目标，并且代码可用。

问候。

# objective-c - 核心情节：如何从用户选择的栏呈现弹出框

> ID：13658209
> 
> 赞同：3
> 
> 时间：2012-12-01T09:41:53.037
> 
> 标签：objective-c, ios, uiview, core-plot, uipopovercontroller

### 我想完成什么

我正在使用 Core Plot (1.1) 绘制条形图，我想在用户选择（点击）的条形下方显示一个带有更多详细信息的弹出框。

### 代码

我的代码如下所示：

```
- (void)barPlot:(CPTBarPlot *)plot barWasSelectedAtRecordIndex:(NSUInteger)idx {

    NSNumber *yValue = self.values[idx];
    NSLog(@"barWasSelectedAtRecordIndex x: %i, y: %@",idx,yValue);

    NSDecimal plotPoint[2];
    NSNumber *plotXvalue = [self numberForPlot:plot
                                         field:CPTScatterPlotFieldX
                                   recordIndex:idx];
    plotPoint[CPTCoordinateX] =
        CPTDecimalFromFloat(plotXvalue.floatValue);

    NSNumber *plotYvalue = [self numberForPlot:plot
                                         field:CPTScatterPlotFieldY
                                   recordIndex:idx];

    plotPoint[CPTCoordinateY] =
        CPTDecimalFromFloat(plotYvalue.floatValue); 

    CPTXYPlotSpace *plotSpace =
        (CPTXYPlotSpace *)graph.defaultPlotSpace;
    CGPoint dataPoint =
        [plotSpace plotAreaViewPointForPlotPoint:plotPoint];
    NSLog(@"datapoint (CGPoint) coordinates tapped: %@",
          NSStringFromCGPoint(dataPoint));

    GrowthChartInfoTableViewController *infoViewController =
        [self.storyboard instantiateViewControllerWithIdentifier:
         @"GrowthChartInfo"];

    self.popover = [[UIPopoverController alloc]
                    initWithContentViewController:infoViewController];
    self.popover.popoverContentSize = CGSizeMake(320, 300);
    self.popover.delegate = self;
    CGRect popoverAnchor =
            CGRectMake(dataPoint.x + graph.paddingLeft,
                       dataPoint.y - graph.paddingTop + graph.paddingBottom,
                       (CGFloat)1.0f, (CGFloat)1.0f);

    [self.popover presentPopoverFromRect:popoverAnchor
                                  inView:self.view
                permittedArrowDirections:UIPopoverArrowDirectionAny
                                animated:YES];
} 
```

### 我的问题

弹出视图控制器的 y 位置不正确，每个 bar 和第一个 bar 都有不同的 y 值，它显示在 bar 的上限而不是下限并隐藏 bar . x 位置似乎是正确的。

![在此处输入图像描述](../Images/61629b1ff8efb5c90571451ec0d96aa5.png)

### 请帮忙

关于为什么我的代码不能按预期工作的任何想法？

谢谢！

# 编辑

根据 Eric 的回答，我将代码更新如下：

```
- (void)barPlot:(CPTBarPlot *)plot barWasSelectedAtRecordIndex:(NSUInteger)idx {

    NSNumber *plotXvalue = [self numberForPlot:plot
                                         field:CPTScatterPlotFieldX
                                   recordIndex:idx];
    NSNumber *plotYvalue = [self numberForPlot:plot
                                         field:CPTScatterPlotFieldY
                                   recordIndex:idx];

    CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;

    CGPoint cgPlotPoint =
        CGPointMake(plotXvalue.floatValue,
                    plotYvalue.floatValue);
    CGPoint cgPlotAreaPoint =
        [graph convertPoint:cgPlotPoint toLayer:graph.plotAreaFrame.plotArea];

    NSDecimal plotAreaPoint[2];
    plotAreaPoint[CPTCoordinateX] =
        CPTDecimalFromFloat(cgPlotAreaPoint.x);
    plotAreaPoint[CPTCoordinateY] =
        CPTDecimalFromFloat(cgPlotAreaPoint.y);

    CGPoint dataPoint = [plotSpace

           plotAreaViewPointForPlotPoint:plotAreaPoint];
        NSLog(@"datapoint (CGPoint) coordinates tapped: %@",NSStringFromCGPoint(dataPoint));

GrowthChartInfoTableViewController *infoViewController = [self.storyboard 
   instantiateViewControllerWithIdentifier:@"GrowthChartInfo"];

    self.popover = nil;
        self.popover = [[UIPopoverController alloc]

      initWithContentViewController:infoViewController];
    self.popover.popoverContentSize = CGSizeMake(250, 200);
    self.popover.delegate = self;
    CGRect popoverAnchor =
        CGRectMake(dataPoint.x + graph.paddingLeft,
                   dataPoint.y - graph.paddingTop + graph.paddingBottom,
                   (CGFloat)1.0f, (CGFloat)1.0f);

    [self.popover presentPopoverFromRect:popoverAnchor
        inView:self.view
        permittedArrowDirections:UIPopoverArrowDirectionUp
        animated:YES];
} 
```

但是，我得到的结果比以前更错误。我相信我一定误会了什么。以下是 NSLog 命令的一些结果：

```
barWasSelectedAtRecordIndex x: 0, y: -0.03920931548773198848
datapoint (CGPoint) coordinates tapped: {-6388.88, -67024.8}

barWasSelectedAtRecordIndex x: 2, y: 0.174494288286651392
datapoint (CGPoint) coordinates tapped: {-6073.38, -66790}

barWasSelectedAtRecordIndex x: 2, y: 0.174494288286651392
datapoint (CGPoint) coordinates tapped: {-6073.38, -66790}

barWasSelectedAtRecordIndex x: 0, y: -0.03920931548773198848
datapoint (CGPoint) coordinates tapped: {-6388.88, -67024.8} 
```

在我的代码中，从条形坐标到视图坐标的转换似乎是完全错误的。

## 编辑 2

再次感谢您的代码示例，Eric！

我已经更新了我的代码并使用以下选项对其进行了测试（y-value = 0: `plotPoint[CPTCoordinateY] = CPTDecimalFromFloat(0.0f)`，这会导致弹出框的锚点，其 y 值似乎不正确（请参阅以下屏幕截图）。锚点的 y -value 应该等于`0`y 轴上的位置。

![在此处输入图像描述](../Images/b071fd58bc4f880cea97aa723f48a7ad.png)

然后我尝试将锚点的 y 值设置为数据的当前 y 值。( `plotPoint[CPTCoordinateY] = plotYvalue.decimalValue`)。这会导致锚点靠近 y 轴的 0 值，而不是靠近条形的顶部。但是，每个公司的 y 值（x 值）都会发生一点变化，这表明 y 值的移动可能存在问题：

![在此处输入图像描述](../Images/89f4d9fd7e6a4b3af6ad6e73cca32ba7.png)

我还尝试了 Eric 建议的额外转换`dataPoint = [self.view convertPoint:dataPoint fromView:graph.hostingView]`，但这并没有改变结果。此外，我尝试添加`- graph.paddingTop + graph.paddingBottom`到最终的 y 值，但没有成功。

对于我的错误可能是什么，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T19:43:57.443

该`-plotAreaViewPointForPlotPoint:`方法返回绘图区域坐标系中的一个点。您需要将其转换为图形的坐标系：

```
[graph convertPoint:dataPoint fromLayer:graph.plotAreaFrame.plotArea]; 
```

图形和它的宿主视图共享一个坐标系。如果`self.view`不是托管视图，则需要将坐标从托管视图转换为其坐标系。

* * *

更完整的代码示例：

```
NSDecimal plotPoint[2];
NSNumber *plotXvalue = [self numberForPlot:plot
                                     field:CPTScatterPlotFieldX
                               recordIndex:idx];
plotPoint[CPTCoordinateX] = plotXvalue.decimalValue;

NSNumber *plotYvalue = [self numberForPlot:plot
                                     field:CPTScatterPlotFieldY
                               recordIndex:idx];
plotPoint[CPTCoordinateY] = plotYvalue.decimalValue; 

CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;

// convert from data coordinates to plot area coordinates
CGPoint dataPoint = [plotSpace plotAreaViewPointForPlotPoint:plotPoint];

// convert from plot area coordinates to graph (and hosting view) coordinates
dataPoint = [graph convertPoint:dataPoint fromLayer:graph.plotAreaFrame.plotArea];

// convert from hosting view coordinates to self.view coordinates (if needed)
dataPoint = [self.view convertPoint:dataPoint fromView:hostingView];

NSLog(@"barWasSelectedAtRecordIndex x: %@, y: %@", plotXvalue, plotYvalue);
NSLog(@"datapoint coordinates tapped: %@", NSStringFromCGPoint(dataPoint)); 
```

# git - 使用 .gitignore 不提交 bin、debug 和 config 文件夹

> ID：13658211
> 
> 赞同：5
> 
> 时间：2012-12-01T09:42:14.723
> 
> 标签：git, gitignore

我在我的 ASP.NET MVC 项目中使用 git。

我不希望`debug`,`bin`或`config`文件夹中的任何文件显示在“Pending Chages”对话框中，因此我不必将它们提交到我的存储库。

这些文件是特定于机器的，特别是配置文件夹。

我尝试将以下内容添加到`.gitignore`：

```
myproject\bin**
myproject\obj**
myproject\config\** 
```

这不起作用，因为在每次构建或配置更改后，所有三个文件夹下的所有文件仍会显示。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-01T09:47:51.853

从目录名称中删除 ** （另外，我使用正斜杠，不知道这是否有区别）。

请记住删除可能已经在您的存储库中的所有有问题的文件。删除和提交应该处理它。

此外，如果您有多个项目，则可以`bin`通过不将项目名称放在前面来忽略所有 s。这应该有效：

```
bin
obj
config 
```

这看起来像是明确的 SO 答案： [如何忽略 Git 目录中的文件？](https://stackoverflow.com/questions/8527597/gitignore-file-syntax)

# sql-server - SQL Server在创建表时自动命名索引

> ID：13658212
> 
> 赞同：4
> 
> 时间：2012-12-01T09:42:43.150
> 
> 标签：sql-server, ado

我对 SQL Server 比较陌生（如果我记得的话，我在 1980 年代后期确实学习过 SQL，DB2）今天我将我的数据库层集成到 SQL 中，首先是 SQL Server。

首先。正如我今天所做的那样，我将在运行时以编程方式生成每个数据库对象、表对象和索引，就像我对项目中几乎每个视觉对象和数据对象所做的那样。也就是说，我使用的视觉设计工具非常有限。

我项目中的每一列都有一个外部描述文件（每个用户都有包含这些文件的配置文件），就像我对数据库键和视觉对象的定位、长度、图片掩码、字体大小等一样. 即动态形式。几乎每个窗口、网格、过滤器都是在运行时创建的，就像我的大多数数据库连接一样。

我确实构建了一个小型测试“机器”来在这个环境中创建表并且做得很好，很容易在程序中创建表（我使用 delphi 和 ADO）

我遇到的问题是，当我将列标记为“自动增量”或`Identity`在 SQL Server 中，或者如果我将列描述为主键时，SQL Server Management Studio 会自动创建索引或键。

如果我可以管理它赋予此索引或键的名称，那就没问题了。

这种情况的例子：

```
 AdoCommand.CommandText := Str_SQL;
    TRY
      AdoCommand.Execute;
    FINALLY
      NotiFy_TimeOut ('Table was created', wait_for_one_sec);
    END; 
```

我的数据库引擎创建了这个 SQL 脚本，我将它传递到上面的字符串中`Str_SQL`：

```
 CREATE TABLE GENGITFL 
    (
      NR INT NOT NULL IDENTITY,
      GJM CHAR(3) NOT NULL,
      HEITI VARCHAR(25) NOT NULL,
      KAUPG REAL NULL,
      SOLUG REAL NULL,
      TOLLG REAL NULL,
      DUMMY VARCHAR(20) NULL,
    UNIQUE (GJM),
    PRIMARY KEY (GJM)
    ) 
```

SQL Server 自动创建这两个索引：

*   `PK__GENGITFL__C51F17260A463F49`
*   `UQ__GENGITFL__C51F17277FA3E6E6`

我不想为这些文件使用这些名称，我更喜欢以下名称：

*   `IDX_GENGITFL_GJM`
*   `IDX_GENGITFL_NR`

根据我的介绍，原因应该很明显，运行时引擎无法自动创建这些名称，我认为在系统数据库中查找哪些索引文件不是一个选项。如果我的外部描述说应该有索引，我只想通过使用前缀自动为索引创建名称，`IDX_`然后是表名，最后是字段名称或名称之间的下划线，`IDX_GENGITFL_GJM`等等。

希望有人能理解我糟糕的英语和演讲。我的英语相当生疏。

谢谢

编辑：在 marc_s 的帮助下，我的 SQL“脚本”是这样的：

```
 CREATE TABLE GENGITFL 
    (
      NR INT NOT NULL IDENTITY,
      GJM CHAR(3) NOT NULL,
      HEITI VARCHAR(25) NOT NULL,
      KAUPG REAL NULL,
      SOLUG REAL NULL,
      TOLLG REAL NULL,
      DUMMY VARCHAR(20) NULL,
    CONSTRAINT IDX_GENGITFL_NR UNIQUE (NR),
    CONSTRAINT IDX_GENGITFL_GJM PRIMARY KEY (GJM),
    )

    CREATE INDEX IDX_GENGITFL_HEITI ON GENGITFL (HEITI) 
```

再次感谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-01T09:46:55.260

如果您不想要系统默认名称 - 只需**指定您自己的名称！**：

```
 CREATE TABLE GENGITFL 
    (
      NR INT NOT NULL IDENTITY,
      GJM CHAR(3) NOT NULL,
      HEITI VARCHAR(25) NOT NULL,
      KAUPG REAL NULL,
      SOLUG REAL NULL,
      TOLLG REAL NULL,
      DUMMY VARCHAR(20) NULL,
    CONSTRAINT IDX_GENGITFL_NR UNIQUE (GJM),
    CONSTRAINT IDX_GENGITFL_GJM PRIMARY KEY (GJM)
    ) 
```

看到 和之前`CONSTRAINT (yourownnamehere)`的那些？`UNIQUE``PRIMARY KEY`

现在，您的约束按照**您**定义的方式命名。

# delphi - 这是牛顿-拉夫森方法的正确实施吗？

> ID：13658217
> 
> 赞同：0
> 
> 时间：2012-12-01T09:43:13.067
> 
> 标签：delphi, math, delphi-7

我需要在 Delphi 7 中实现浮点后找到具有给定计数符号的平方根的牛顿方法。我编写了以下代码：

```
program NewtonMethod

{$APPTYPE CONSOLE}

uses
  SysUtils, Math;

const
  signCount = 50; //Signs after floating point count

var
  number, curRoot, prevRoot: Extended;
  precision: Extended;

function input(): Extended;
begin
  Write('x=');
  try
    Readln(number)
  except
    Writeln('Invalid input data, please try again');
    Input();
  end;
end;

begin
  input();
  curRoot := sqrt(number); //Íà÷àëüíàÿ
  precision := 1 / power(10, signCount);
  prevRoot := 0;

  repeat
    prevRoot := curRoot;
    curRoot := prevRoot - (Power(prevRoot, 2) - number) / (2 * prevRoot);
  until
    Abs(curRoot - prevRoot) < precision;

  Writeln(curRoot);
  ReadLn;
end. 
```

请回答我的问题：

*   这段代码正确吗？
*   如何以具有所有符号的正常（非指数）形式打印结果根？
*   输入值可能非常大（最多 200 个符号）。这段代码可以和他们一起使用吗？

并建议我，我该如何改进我的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T09:58:03.237

curRoot:=sqrt(数字); << 看起来您正在直接在这里计算数字的平方根，而不是使用方法。

您应该使用其他方法选择“第一次猜测”...如果这只是为了好玩，请尝试一半的数字

您可能会发现此页面很有用：[https ://en.wikipedia.org/wiki/Newton%27s_method#Square_root_of_a_number](https://en.wikipedia.org/wiki/Newton%27s_method#Square_root_of_a_number)

扩展数据类型只能保留大约 20 个小数位。200 位小数是一个艰难的决定，可能很难做到

# r - 查找具有更高索引的第一个更大元素

> ID：13658221
> 
> 赞同：7
> 
> 时间：2012-12-01T09:43:43.043
> 
> 标签：r

我有两个向量，`A`和`B`。对于中的每个元素，`A`我想找到其中第一个元素的索引`B`更大并且具有更高的索引。`A`和的长度`B`相同。

所以对于向量：

```
A <- c(10, 5, 3, 4, 7)

B <- c(4, 8, 11, 1, 5) 
```

我想要一个结果向量：

```
R <- c(3, 3, 5, 5, NA) 
```

当然我可以用两个循环来做，但是它很慢，而且我不知道在这种情况下如何使用 apply() ，当索引很重要时。我的数据集的向量长度为​​ 20000，因此在这种情况下速度非常重要。

几个额外的问题：

1.  如果我有一个数字序列（如`seq = 2:10`），并且我想为 A 的每个 a 和 seq 的每个 s 找到其中第一个`B`高于 a+s的数字怎么办？

2.  与问题 1) 一样，但我想知道第一个较大的值和第一个较低的值，并创建一个矩阵，该矩阵存储哪个是第一个。例如，我有*一个 of`A`*和*10 来自 seq*。我想找到`B`高于*a+10*或低于*a-10*的第一个值，然后存储它的索引和值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T09:55:15.653

```
sapply(sapply(seq_along(a),function(x) which(b[-seq(x)]>a[x])+x),"[",1)
[1]  3  3  5  5 NA 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-03T20:34:46.507

这是 sapply 效率低于循环的一个很好的例子。尽管 sapply 确实使代码看起来更整洁，但随着时间的推移，你正在为这种整洁付出代价。

相反，您可以将 while 循环包裹在 for 循环中，并包含在一个漂亮、整洁的函数中。

以下是比较嵌套应用循环与嵌套 for-while 循环（以及混合应用-while 循环，为了更好的衡量标准）的基准。*更新：添加了`vapply..match..`评论中提到的内容。比 sapply 快，但仍然比 while 循环慢得多。*

### 基准：

```
 test elapsed relative
1     for.while   0.069    1.000
2  sapply.while   0.080    1.159
3  vapply.match   0.101    1.464
4 nested.sapply   0.104    1.507 
```

请注意，您节省**了三分之一的时间**；当您开始将序列添加到 A 时，节省的费用可能会更大。

* * *

## 对于您问题的第二部分：

如果您将所有这些都包含在一个不错的函数中，则很容易将 seq 添加到 A

```
# Sample data
A <- c(10, 5, 3, 4, 7, 100, 2)
B <- c(4, 8, 11, 1, 5, 18, 20)

# Sample sequence
S <- seq(1, 12, 3)

# marix with all index values (with names cleaned up)   
indexesOfB <- t(sapply(S, function(s) findIndx(A+s, B)))
dimnames(indexesOfB) <- list(S, A) 
```

最后，如果您想找到 B*小于*A 的值，只需交换函数中的操作即可。
*（您可以在函数中包含一个 if 子句并仅使用一个函数。我发现拥有两个单独的函数更有效）*

```
findIndx.gt(A, B)   #  [1]  3  3  5  5  6 NA  8 NA NA
findIndx.lt(A, B)   #  [1]  2  4  4 NA  8  7 NA NA NA 
```

然后你可以把它包在一个漂亮的包装里

```
rangeFindIndx(A, B, S)
 #     A   S  indxB.gt indxB.lt
 #    10   1        3        2
 #     5   1        3        4
 #     3   1        5        4
 #     4   1        5       NA
 #     7   1        6       NA
 #   100   1       NA       NA
 #     2   1       NA       NA
 #    10   4        6        4
 #     5   4        3        4
 #   ... 
```

* * *

* * *

## 职能

（注意它们依赖于`reshape2`）

```
rangeFindIndx <- function(A, B, S) {
  # For each s in S, and for each a in A,
  # find the first value of B, which is higher than a+s, or lower than a-s

  require(reshape2)

  # Create gt & lt matricies;  add dimnames for melting function
  indexesOfB.gt <- sapply(S, function(s) findIndx.gt(A+s, B))
  indexesOfB.lt <- sapply(S, function(s) findIndx.lt(A-s, B))
  dimnames(indexesOfB.gt) <- dimnames(indexesOfB.gt) <- list(A, S)

  # melt the matricies and combine into one
  gtltMatrix <- cbind(melt(indexesOfB.gt), melt(indexesOfB.lt)$value)

  # clean up their names
  names(gtltMatrix) <- c("A", "S", "indxB.gt", "indxB.lt")

  return(gtltMatrix)
}

findIndx.gt <- function(A, B) {
  lng <- length(A)
  ret <- integer(0)
  b <- NULL
  for (j in seq(lng-1)) {
    i <- j + 1
    while (i <= lng && ((b <- B[[i]]) < A[[j]]) ) {
      i <- i + 1
    }
    ret <- c(ret, ifelse(i<lng, i, NA))
  }
  c(ret, NA)  
}

findIndx.lt <- function(A, B) {
  lng <- length(A)
  ret <- integer(0)
  b <- NULL
  for (j in seq(lng-1)) {
    i <- j + 1
    while (i <= lng && ((b <- B[[i]]) > A[[j]]) ) {   # this line contains the only difference from findIndx.gt
      i <- i + 1
    }
    ret <- c(ret, ifelse(i<lng, i, NA))
  }
  c(ret, NA)  
} 
```

# sql - 我可以用 SQL 区分更新数据吗？

> ID：13658226
> 
> 赞同：0
> 
> 时间：2012-12-01T09:44:13.860
> 
> 标签：sql, sql-update

我做产品库存管理系统。即使用 PHP-HTML-SQL Base。但是，有些产品的所有细节值都相同，这存在一些问题。我只想更新它们的值，其他相同的产品细节值不会改变。我如何使用类似on 的`DISTINCT`功能？`select``update`

代码：

```
UPDATE Product SET Customer = '".$To."' 
WHERE ProductID = '".$ProductID."' 
    AND Size = '".$Size."' 
    AND Colour = '".$Colour."' 
```

谢谢大家的回答。如果您需要更多信息来解决这个问题，请告诉我:))

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T10:36:43.427

希望这能解决您的问题：-

```
update table_name 
set column_value = 'value'
WHERE ROWID IN (SELECT   MIN (ROWID)
                              FROM table_name 
                          GROUP BY ROWID, column_value) 
```

# c# - 控制台应用程序与 Win Form 应用程序在性能方面的区别？

> ID：13658230
> 
> 赞同：0
> 
> 时间：2012-12-01T09:44:35.037
> 
> 标签：c#, winforms, console, mouseevent

我有一个控制台应用程序，它在其控制台上显示最新的活动和状态。该应用程序线程密集，性能是主要关注点。不需要用户交互。由于最近的一个案例，我被要求将其迁移到 win 表单应用程序。

初始帖子-> [如何以编程方式禁用 C# 控制台应用程序的快速编辑模式？](https://stackoverflow.com/questions/13656846/how-to-programmatic-disable-c-sharp-console-applications-quick-edit-mode)

所以遇到这个问题，我使用了 Application.Run(ApplicationContext context) 在我的控制台应用程序中启动一个消息循环，以便我可以挂钩和捕获鼠标事件，并可以在运行时重置快速编辑模式。我还删除了右键单击时出现的控制台默认菜单项“编辑”，因此不允许用户标记/复制/粘贴。

我想知道什么应该是最佳解决方案，迁移以赢得表单或控制台应用程序（考虑到我所做的更改）。此外，我每次都需要调用 Invoke 以便将任务放入 UI 的队列中，以便在迁移到 winform 时打印消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T10:12:14.540

WinForms 肯定会给你更多的灵活性，你可以用 UI 做什么。

在性能方面，您确实需要进行*大量*UI 更新才能使性能成为一个问题。听起来情况并非如此，因为您目前正在使用控制台应用程序完成它。大多数时候，影响 UI 性能的不是因为 UI 线程跟不上更新，而是因为非 UI 的东西（例如文件 IO、数据库查询等）是在 UI 线程内完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T10:36:46.307

我会考虑更改您的应用程序，以便将其输出流式传输到日志文件、轻量级数据库或[Windows 事件日志](http://support.microsoft.com/kb/307024/en-us)中，而不是流式传输到控制台。因此，您的应用程序根本不需要控制台或 UI，也可以作为服务运行。如果有人想查看该消息，给他一个单独的（可能是 Winforms）程序来查看最新的输出，或者如果你使用 Windows 事件日志，他可以只使用 Windows 事件查看器来检查你的程序的输出。

因此，您不必将应用程序迁移到 Winforms，也不必进行一些丑陋的控制台黑客攻击。

要处理日志文件，您可能会对[Microsoft 日志解析器](http://www.microsoft.com/en-us/download/details.aspx?id=24659)感兴趣。

# ios - 标签栏项目是相同的，除了它们在故事板中的数据集

> ID：13658232
> 
> 赞同：0
> 
> 时间：2012-12-01T09:44:45.397
> 
> 标签：ios, uitabbarcontroller, storyboard

我已经设置了一个带有 UITabBarController 对象的故事板，并且我想向其中添加两个选项卡，但是除了它们将显示的数据之外，两个选项卡都将完全相同。显然，我可以拖入两个新的视图控制器并将它们连接起来，然后分别维护视图，但我根本不想这样做。

有谁知道这样做的最有效方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T16:31:05.060

我通过使用底部带有标签栏的常规 UIViewController 来完成此操作，而不是使用 UITabBarController。您只需要使用 UITabBar 委托方法 tabBar:didSelectItem: 来检测选项卡点击，然后执行您需要做的任何事情来切换单个视图中显示的数据。

# javascript - 获取点击的类索引 javascript

> ID：13658236
> 
> 赞同：4
> 
> 时间：2012-12-01T09:45:50.177
> 
> 标签：javascript

我有 3 个带有类的 div：wpEdit 和 onClick：alertName()

```
<div class="wpEdit" onClick="alertName()">Bruce Lee</div>
<div class="wpEdit" onClick="alertName()">Jackie Chan</div>
<div class="wpEdit" onClick="alertName()">Jet li</div> 
```

单击时，我想知道单击的 Div 的类 wpEdit 的索引：

```
function alertName(){
    //Something like this
    var classIndex = this.className.index; // This obviously dosnt work
    alert(classIndex); 
} 
```

当点击李小龙时它应该警报：0 当点击成龙时它应该警报：1 当点击李连杰时它应该警报：2

我需要知道单击了哪个 class="wpEdit" 实例

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T10:05:12.510

Try this

```
function clickedClassHandler(name,callback) {

    // apply click handler to all elements with matching className
    var allElements = document.body.getElementsByTagName("*");

    for(var x = 0, len = allElements.length; x < len; x++) {
        if(allElements[x].className == name) {
            allElements[x].onclick = handleClick;
        }
    }

    function handleClick() {
        var elmParent = this.parentNode;
        var parentChilds = elmParent.childNodes;
        var index = 0;

        for(var x = 0; x < parentChilds.length; x++) {
            if(parentChilds[x] == this) {
                break;
            }

            if(parentChilds[x].className == name) {
                index++;
            }
        }

        callback.call(this,index);
    }
} 
```

Usage:

```
clickedClassHandler("wpEdit",function(index){
    // do something with the index
    alert(index);

    // 'this' refers to the element 
    // so you could do something with the element itself
    this.style.backgroundColor = 'orange';
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T09:47:57.787

您可能想要在代码中解决的第一件事是内联 HTML 绑定。

您可以`document.addEventListener`在每个元素上使用，或依赖[事件委托](https://davidwalsh.name/event-delegate)。

最广泛使用的事件委托实现是 jQuery 提供的。如果你已经在使用 jQuery，这就是你要走的路！

或者我也有我自己的小[`delegate`工具](https://github.com/brunoscopelliti/delegate)。

```
const delegate = (fn, selector) => {
  return function handler(event) {
    const matchingEl = matches(event.target, selector, this);
    if(matchingEl != null){
      fn.call(matchingEl, event);
    }
  };
};

const matches = (target, selector, boundElement) => {
  if (target === boundElement){
    return null;
  }
  if (target.matches(selector)){
    return target;
  }
  if (target.parentNode){
    return matches(target.parentNode, selector, boundElement);
  }
  return null;
}; 
```

这就是您注册事件侦听器的方式。

```
document.getElementById('#parent')
  .addEventListener('click', delegate(handler, '.wpEdit')); 
```

这就是您如何获取生成事件的元素的索引。

```
const handler = (event) => {
  console.log(Array.prototype.indexOf.call(event.currentTarget.children, event.target));
} 
```

现场演示：

```
const delegate = (fn, selector) => {
  return function handler(event) {
    const matchingEl = matches(event.target, selector, this);
    if (matchingEl != null) {
      fn.call(matchingEl, event);
    }
  };
};

const matches = (target, selector, boundElement) => {
  if (target === boundElement) {
    return null;
  }
  if (target.matches(selector)) {
    return target;
  }
  if (target.parentNode) {
    return matches(target.parentNode, selector, boundElement);
  }
  return null;
};

const handler = (event) => {
  console.log(Array.prototype.indexOf.call(event.currentTarget.children, event.target));
}

document.getElementById('parent')
  .addEventListener('click', delegate(handler, '.wpEdit'));
```

```
<div id="parent">
  <div class="wpEdit">Bruce Lee</div>
  <div class="wpEdit">Jackie Chan</div>
  <div class="wpEdit">Jet li</div>
</div>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T09:53:50.550

如果你想要基于你的类 wpEdit 的 div 的索引，你可以这样做：

HTML：

```
<div class="wpEdit">Bruce Lee</div>
<div class="wpEdit">Jackie Chan</div>
<div class="other">Other</div>
<div class="wpEdit">Jet li</div> 
```

JS：

```
$(".wpEdit").bind("click", function(){
    var divs = $(".wpEdit");
    var curIdx = divs.index($(this));

    alert(curIdx);
}); 
```

现场示例：http: [//jsfiddle.net/pJwzc/](http://jsfiddle.net/pJwzc/)

更多关于 jQuery 的索引功能的信息：http: [//api.jquery.com/index/](http://api.jquery.com/index/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-26T04:51:36.500

使用香草 javascript，这对我有用：

```
var wpEdits = document.querySelectorAll(".wpEdit");

for (let i = 0; i < wpEdits.length; i++)
  wpEdits[i].addEventListener("click", showID);

function showID(evt) {
  for (let i = 0; i < wpEdits.length; i++)
    if(wpEdits[i] == evt.target)    
      alert(i);
} 
```

可能不是最好的解决方案，因为我还是 js 新手。

**由于我对 JS 很陌生，因此请对以下解释持保留态度：**

（第 1 行）这类似于`var wpEdits = document.getElementsByClassName("wpEdit");`. 它会将`class="wpEdit"`html 文件中的所有实例分配给`wpEdits`变量。

（第 3 行和第 4 行）这两行将导致单击下面定义的`class="wpEdit"`调用函数`showID()`。

（第 6 行和第 10 行）当点击事件发生时，浏览器会将被点击项目的唯一属性传递给`evt`变量。然后在 for 循环中使用它来增量地与所有可用实例进行比较。`evt.target`用于到达实际目标。一旦找到匹配项，它将提醒用户。

为避免浪费 CPU 时间，`break;`建议在找到匹配项后立即运行 a 以退出循环。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-05T21:54:01.097

我不明白，为什么人们在以前的答案中添加新功能，所以......

```
const wpEdit = document.getElementsByClassName('wpEdit');
for(let i = 0; i < wpEdit.length; i++){
  wpEdit[i].addEventListener('click',function(){
    alert(i);
  });
} 
```

我刚刚使用循环添加了“点击”事件。并且 [i] 已经是当前点击的类索引...

[小提琴](https://jsfiddle.net/OPTlMUS/g5eL0z7c/)

# c++ - 如何调整使用 TrackPopupMenu 显示的上下文菜单的大小？

> ID：13658239
> 
> 赞同：0
> 
> 时间：2012-12-01T09:46:19.257
> 
> 标签：c++, winapi, windows-xp, contextmenu

我使用 TrackPopupMenu API 从 C++ 代码显示上下文菜单。每个菜单项都包含一个 24x24 像素大小的位图。通过调用添加：

```
MENUITEMINFO mii = {0};
mii.cbSize = sizeof(mii);
mii.fMask = MIIM_BITMAP;
mii.hbmpItem = hBmpForItem;
SetMenuItemInfo(hMenu, ID_1_MENUITEMID, FALSE, &mii); 
```

这在 Windows Vista/7 上工作得很好，但在 Windows XP 上，一些带有较长文本的菜单项在右侧被截断。所以，我想知道，有没有办法在菜单显示之前增加菜单本身的宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T10:35:25.580

将您的菜单项创建为[owner-drawn](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647558.aspx#_win32_Creating_Owner_Drawn_Menu_Items)，然后让您的菜单所有者窗口处理[WM_MEASUREITEM](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775925.aspx)消息，以便您可以根据需要指定适当的宽度。

# wcf - WCF Web 服务和计时器

> ID：13658242
> 
> 赞同：0
> 
> 时间：2012-12-01T09:46:39.080
> 
> 标签：wcf

我计划创建一个将托管在 IIS 上的 Web 服务来处理预订。其中一种方法是

ReserveTimeSlot() 将reservationID 返回给客户端。客户有 2 分钟的时间确认预订或取消预订。如果它没有响应，则在 2 分钟后取消预订。预订存储在数据库中。

我不确定如何在 Web 服务调用中实现 2 分钟超时。需要有用的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T09:52:51.303

这是可能的解决方案之一。

1.  当 reservationID 也存储到数据库存储到期日期时，在您的情况下 DataTime expires = DateTime.Now.AddMinutes(2);

2.  当客户端返回reservationID时，您需要检查reservationID是否存在以及它是否仍然有效（DateTime.Now < expires）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:23:56.970

我在此链接中找到了适合我的案例的可接受解决方案

[WCF 服务应用程序计时器](https://stackoverflow.com/questions/4614358/wcf-service-application-timer)

第一次测试很有希望。感谢您花时间回答我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T09:53:40.533

在服务器端，您可以**将 ID 保存在** 要发送给客户端的数据库中，一旦发送响应，您就可以在新线程中启动与该 ID 关联的计时器......该**线程将被挂起2分钟**，回来后将检查数据库的状态，**如果用户没有响应，则该线程将取消当前请求**

# iphone - UIActionsheet 不关闭

> ID：13658244
> 
> 赞同：0
> 
> 时间：2012-12-01T09:46:45.183
> 
> 标签：iphone, ios, uiactionsheet

我的 UIActionsheet 中有 3 个按钮。我想在它的底部有一个取消按钮。

我还希望所有按钮都应该能够关闭 UIActionsheet。

目前，他们都没有为我做这项工作。

这是我的显示方式：

```
UIActionSheet *actionSheet = nil;
NSArray *otherButtons = nil;

otherButtons = [NSArray arrayWithObjects:@"Button1", @"Button2", @"Button3",
                     nil];       

actionSheet = [[UIActionSheet alloc] initWithTitle:title
                                          delegate:self cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil, nil];

for( NSString *btntitle in otherButtons)
{
    [actionSheet addButtonWithTitle:btntitle];
}    

[actionSheet addButtonWithTitle:@"Cancel"];
actionSheet.cancelButtonIndex = actionSheet.numberOfButtons - 1;

actionSheet.actionSheetStyle = UIActionSheetStyleDefault;
[actionSheet showInView:self.view]; 
```

在我的代表中，我这样做：

```
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
      //some code
      [actionSheet dismissWithClickedButtonIndex:buttonIndex animated:YES];
} 
```

但它并没有解雇。我不想更改任何按钮的设计和位置。我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T20:34:15.727

Be careful when opening an action sheet from a lpgr. Only open it on "Began", not again on "Ended".

```
- (void) handleLongPress:(UILongPressGestureRecognizer *)gestureRecognizer
{
    CGPoint p = [gestureRecognizer locationInView:self.tblYourVids];

    if (gestureRecognizer.state == UIGestureRecognizerStateBegan) {
        NSIndexPath *indexPath = [self.aTable indexPathForRowAtPoint:p];
        if (indexPath == nil)
            NSLog(@"long press on table view but not on a row");
        else {
            NSLog(@"long press on table view at row %d", indexPath.row);
            self.selectedCell = [self.aTable cellForRowAtIndexPath:indexPath];
            DLog(@"open action sheet only once");
            [self showActionSheet];
        }
    } else if (gestureRecognizer.state == UIGestureRecognizerStateEnded) {
        // eat this one
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T10:16:14.423

```
-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex{

    [actionSheet dismissWithClickedButtonIndex:buttonIndex animated:YES];
    [self performSelector:@selector(OtherOperations) withObject:nil afterDelay:0.0];

}

-(void)OtherOperations{      //some code
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T10:01:45.853

you have to add this to yours .h file.

```
 <UIActionSheetDelegate> 
```

Also add this line to yours .m file.

```
 actionSheet.delegate = self; 
```

Let me know, this is working or not. If works, accept it as right answer

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-01T10:32:21.853

这不是取消的正确方法，`UIActionSheet`首先您必须禁用默认设置并`UIActionSheet`通过`javascipt` 此网络

[http://www.icab.de/blog/2010/07/11/customize-the-contextual-menu-of-uiwebview/](http://www.icab.de/blog/2010/07/11/customize-the-contextual-menu-of-uiwebview/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-01T10:10:01.673

只需尝试使用以下代码。它会自动关闭。

```
UIActionSheet *sheet = [[UIActionSheet alloc] initWithTitle:@""
                                                       delegate:self
                                              cancelButtonTitle:@"cancel"
                                         destructiveButtonTitle:@"Printer"
                                              otherButtonTitles: nil];

    [sheet showInView:self.view];
    [sheet release];

-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
} 
```

让我知道它是否有效

快乐编码！！！！

# ruby-on-rails - Rails 3 - 创建视图以插入多条记录

> ID：13658248
> 
> 赞同：1
> 
> 时间：2012-12-01T09:47:53.260
> 
> 标签：ruby-on-rails, ruby-on-rails-3, view

我有一个看起来很简单的查询。我需要创建一个视图，该视图将接受基于单个模型的多个记录。在我的例子中，模型是 Project，它有 1 个外键（人）和 2 个字段时间、角色。我需要创建一个视图（表单）来插入 5 个角色。

```
<%= form_for(@project) do |f| %>
 <% 5.times do |index|%>
  <div class="field">
    <%= f.label :position %><br />
    <%= f.text_field "fields[#{index}][stime]" %>
  </div>

 <% end %>
 <div class="actions">
     <%= f.submit %>
 </div>  
<% end %> 
```

我收到一条错误消息：未定义的方法 `fields[0][stime]'

我不认为嵌套模型的 railscasts 是我需要的。

我将如何去创造这个？

编辑：项目模型代码如下：

```
class Project < ActiveRecord::Base
   belongs_to :person
   attr_accessible :role, :stime
end 
```

新方法的 Projects_Controller 代码如下：

```
def new
 @project = Project.new
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:42:44.220

我看到你打算建立一些一对多的关系（`Product has_many :roles`）。

这里有一些建议。

首先，看一下[accepts_nested_attributes_for](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html#method-i-accepts_nested_attributes_for)方法。您需要将其添加到您的模型中才能执行批量创建。

其次，[fields_for](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)是您设计嵌套表单所需要的。

我将为您举一个简单`Product has_many :line_items`案例的批量创建示例：

```
<%= form_for @product do |f| %>
    <%= f.fields_for :line_items, [LineItem.new]*5 do |li_fields| %>
      <%= li_fields.text_field :quantity %>
      <%= li_fields.text_field :price %>
      <br>
    <% end %>
  <%= f.submit "Create line items" %>
<% end %> 
```

您只需要在控制器中编写如下内容：

```
@product.update_attributes params[:product] 
```

并且`line_items`将立即创建 5 个。

不要忘记列入白名单（在您的日志中查看）。但是我认为，如果您遇到质量分配错误，无论如何您都会这样做:)*`association`*`_attributes``params`

我希望它有所帮助。

# python - 如何自动获取孩子的父ID

> ID：13658254
> 
> 赞同：-4
> 
> 时间：2012-12-01T09:48:20.423
> 
> 标签：python, oop, class, object

为了更清楚我需要什么，这里有一个例子：我有两个盒子，每个盒子有 2 件物品。而且，我希望该项目由它自己的 id 和 box_id 定义。我希望 box_id 是全局的，因为它将在 Box 类的其他方法中使用。

我不想为孩子显式设置父 ID，但我希望它自动继承。

我试过这个：

`file>> getid.py`

```
 class Box():
    id = 0
    def __init__(self,id):
        Box.id = id

    def __get__(self):
        return Box.id

    class Item():
        def __init__(self,id):
            self.id = id
            self.box_id = Box.id
        def __get__(self):
            return self.id,Box.id 
```

我在另一个文件中使用它作为：

```
 from getid import *
   box1 = Box(1)
   box2 = Box(2)       

   In: box1.id
   Out: 2 
```

对于 box1 调用类 Box 并将 id 传递为 1。并在再次为 box2 调用 Box 之前检查，输出`box1.id`为 1。但在调用 Box 后，输出`box1.id`更改为 2。

谁能解释一下为什么我在这里得到的输出为 2，但我期望的是 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T10:27:26.830

项目包含在一个盒子中的事实并不意味着`Item` *该类*需要嵌套在`Box` *该类*中：

这是一个非常简单的结构，可以满足您的要求：

```
class Box(object):
    def __init__(self, box_id):
        self.box_id = box_id

class Item(object):
    def __init__(self, box, item_id):
        self.box = box
        self.item_id = item_id

box1 = Box(1)

box2 = Box(2)
item1 = Item(box2, 1)
item2 = Item(box2, 2) 
```

（我已经重命名了 ID，所以很清楚哪个是哪个。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T10:34:35.980

从你的帖子中理解你想要实现的目标有点困难，但我会试着给你一些我认为你想要做的例子。

让我们从只关注`Box`-class 开始，暂时忽略`Item`。这就是你所拥有的：

```
class Box():
    id = 0
    def __init__(self,id):
        Box.id = id

    def __get__(self):
        return Box.id 
```

方法没用，这里`__get__`干脆不要用，你不需要。现在我们注意到，你设置`Box.id = 0`了，这意味着你可以调用`print(Box.id)`并且它会打印`0`。你也可以初始化一个新的盒子实例，你可以调用`print(box_instance.id)`，它也会`0`按预期打印。

但是，在您的`__init__`方法中，您更改`Box.id`了 ，而不是实例自己的 id，这是您的意思吗？这是一个关于您的代码会发生什么的快速示例：

```
In: Box.id
Out: 0

a = Box(1)

In: a.id
Out: 1
In: Box.id
Out: 1

b = Box(2)

In: b.id
Out: 2
In: a.id
Out: 2
In: Box.id
Out: 2 
```

正如您在此处注意到的（或自己测试），在初始化新`Box`对象时，它会更改`Box`类的 id，而不是实例的 id。这样，如果您初始化一个新的实例，每个实例的 id 都会发生变化`Box`。这是因为它实际上不是实例的 id，而是`Box`.

如果这是您想要的行为，请随意使用它（您仍然不需要`__get__`），但如果您希望每个 Box 都有其唯一的 id，请使用`self`而不是 box。

```
class Box:
    id = 0 # This is Box class' id, it's not even necessary to define it
    def __init__(self, id): # This will be each instance's unique id
        self.id = id #self.id means the instance's unique id 
```

* * *

现在我们已经完成了`Box`大部分工作，我们可以开始研究`Item`. 我很不确定你想用这个实现什么，但看看你的代码，你似乎实际上是在尝试给每个项目一个唯一的 id（这是一个好主意），然后你想给他们`box_id`一个简单`Box.id`的类的ID吗？这对我来说没有任何意义。

我实际上认为您正在尝试实现的目标：将项目插入框中，这样您就希望项目知道它是“父”框的 ID。可以这样做：

```
class Item: #Notice how inheriting is not needed at all!!
    def __init__(self, id, parent):
        self.id = id
        self.parent = parent
        # I prefer calling it parent, call it what ever you want, box works too 
```

现在我还建议的是：

1.  在里面`Box.__init__()`，定义一个列表`self.items = []`
2.  在里面`Item.__init__()`，追加`self`到父母的项目。`self.parent.items.append(self)`

这样，您的物品就知道它们所在的盒子，而盒子也知道它们里面有哪些物品。

* * *

**编辑：**关于如何使用父级的简短示例代码：

```
box1 = Box(1) #box1 has id of 1
box2 = Box(2) #box2 has id of 2
item1 = Item(3, box1) #item1 has id of 3, parent box1
item2 = Item(4, box2) #item2 has id of 4, parent box2
item3 = Item(5, box1) #item3 has id of 5, parent box1

In: item1.id
Out: 3
In: item1.parent.id
Out: 1
In: item2.id
Out: 4
In: item2.parent.id
Out: 2
In: item3.id
Out: 5
In: item3.parent.id
Out: 1
In: item3.parent == item1.parent
Out: True 
```

正如我们在这里看到的，item 可以直接调用它的父方法并使用它的属性。这样，您可以在一个盒子中拥有多个项目，（`item1`并且`item3`两者都具有相同的父项）并且每个项目的`parent`属性都指向该盒子。

基本上你在代码中调用的也是`item1.parent == box1`如此。`item1.parent.id``item.box_id`

# java - 从 Hibernate 3.6 更新到 Hibernate 4.0

> ID：13658258
> 
> 赞同：1
> 
> 时间：2012-12-01T09:49:11.500
> 
> 标签：java, hibernate, jpa

如果我想从*Hibernate 3.6切换到**Hibernate 4.0* ，我想知道我需要注意的主要区别？*Hibernate 4.0*支持还是我需要使用 JPA 进行映射？**`hbm.xml`**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T10:01:19.267

Hibernate 4 仍然支持通过 XML (hbm.xml) 的 ORM 映射。正如这个[基本的 hibernate 4 教程](http://docs.jboss.org/hibernate/core/4.0/quickstart/en-US/html_single/#hibernate-gsg-tutorial-basic)中的映射部分所建议的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T10:52:58.073

您应该阅读迁移指南 [https://community.jboss.org/wiki/HibernateCoreMigrationGuide40](https://community.jboss.org/wiki/HibernateCoreMigrationGuide40)**

# android - 我想构建一个默认输入法不是安卓键盘的安卓系统

> ID：13658259
> 
> 赞同：2
> 
> 时间：2012-12-01T09:49:23.260
> 
> 标签：android, android-4.2-jelly-bean, android-input-method

当我构建一个android系统并第一次启动它时，默认输入法是Android键盘（AOSP）。

我可以通过更改一些代码（我的系统是果冻豆）将 Android 键盘输入法更改为日文 IME 吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-03T12:55:41.787

我已经解决了这个问题。在defaults.xml中添加一个字符串。在DatabaseHelper.java中添加loadSecureSetting(,)（这个方法你可以用google搜索）。注意：输入法的唯一标识符必须是正确的。我做一个错误。

# c# - 将 xls 转换为数据表

> ID：13658272
> 
> 赞同：0
> 
> 时间：2012-12-01T09:51:59.543
> 
> 标签：c#, datatable

我有一个 xls 文件。其中有以下数据。

![在此处输入图像描述](../Images/1c6151381fe95c6ab59dd0c63c60fd9b.png)

现在我想获取插入到数据表 dt1 中的值。我只想要一个简单的 C# 程序。没有 api/dll。我尝试过的内容如下：

```
string strfilename = "";
        DataTable dt = new DataTable();

        if (openFileDialog1.ShowDialog(this) == DialogResult.OK)
        {
            strfilename = openFileDialog1.InitialDirectory + openFileDialog1.FileName;
        }

        string[] csvRows = System.IO.File.ReadAllLines(strfilename); ;

        string[] fields = null;
        foreach (string csvRow in csvRows)
        {
            fields = csvRow.Split(',');
            DataRow row = dt.NewRow();
            row.ItemArray = fields;
            dt.Rows.Add(row);
        } 
```

在这里我的 csvRow 应该找到 7 行。但它有 131 行。它们对我来说是不可读的。某种象征性的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T09:57:01.750

您已经创建了一个 DataTable，但尚未在其中定义任何列（AKA Schema）。
您需要至少与 CSV 文件中存在的许多字段（逗号分隔）具有相同数量的列

在进入阅读循环之前添加这个

```
 string[] csvRows = System.IO.File.ReadAllLines(strfilename); 
 for(int x = 0; i < csvRows.Length; x++)
     dt.Columns.Add("Col" + x.ToString()); 
```

现在您的 ItemArray 具有与 csv 相同数量的“列”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T09:59:39.360

看看这个例子它可能会有所帮助： http: [//www.codeproject.com/Tips/429712/Convert-CSV-File-to-data-table](http://www.codeproject.com/Tips/429712/Convert-CSV-File-to-data-table)

# java - timer.schedule 变速

> ID：13658274
> 
> 赞同：4
> 
> 时间：2012-12-01T09:52:07.617
> 
> 标签：java

我不想让计时器每 2.5 秒（在程序开始时）执行一次工作，它正在使用以下代码。

```
Timer timer = new Timer();

timer.schedule(new TimerTask() {

     //   @Override
     @Override
        public void run() {

here is the code, and i do Speed = Speed-500

      }, Speed,Speed); 
```

速度是一个整数：

```
public int Speed=2500; 
```

但问题是计时器的速度保持在2500，而变速每次500都会降低，因此该部分正在工作。只有计时器不检查速度是否已更改。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T09:58:03.590

你不能这样做，因为一旦你完成了日程安排，它就会用 Timer 解决这个问题。

安排指定任务以重复固定延迟执行，在指定延迟后开始。随后的执行以大约固定的时间间隔进行，间隔指定的时间段。

在这种情况下，您可以取消前一个并安排新的 TimerTask。

```
Timer timer = new Timer();

initialize the speed here

loop based on time

timer.schedule(new TimerTask() {

     //   @Override
     @Override
        public void run() {

here is the code, and i do Speed = Speed-500

      }, Speed,Speed); 
```

# c# - 设计附加基础应用程序

> ID：13658276
> 
> 赞同：3
> 
> 时间：2012-12-01T09:52:49.833
> 
> 标签：c#, .net, add-on

我想知道如何设计应用程序，实际上是 Firefox 或 Chrome 等应用程序，您可以为它们下载插件并使用？？！！在.Net中怎么做？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T10:20:40.100

如何允许其他人为您的应用制作附加组件？

1>您创建一个`DLL`具有`interface`. 这`interface`定义了一组方法、属性、您希望其他人定义和实现的事件。

插件开发者需要定义这个接口。这个DLL是你的应用程序和插件开发者需要的。

2>插件开发人员将使用该共享`DLL`并通过定义其中的方法或属性来实现接口。

3>您的应用程序现在将加载该插件并将其转换为共享 DLL `interface`，然后调用所需的方法、属性，即接口中定义的任何内容..

您的应用程序将如何获取插件？

您创建一个`folder`搜索`plugins`.This 的文件夹，这是其他人所在的文件`plugins`夹`installed`或`placed`.

* * *

例子

这是您的共享 dll

```
//this is the shared plugin
namespace Shared 
{
    interface IWrite 
    {
        void write();
    }
} 
```

插件开发者

```
//this is how plugin developer would implement the interface
using Shared;//<-----the shared dll is included
namespace PlugInApp 
{
    public class plugInClass : IWrite //its interface implemented
    {
        public  void write() 
        {
            Console.Write("High from plugInClass");
        }
    }
} 
```

这是你的程序

```
using Shared;//the shared plugin is required for the cast
class Program
    {
        static void Main(string[] args)
        {
            //this is how you search in the folder
            foreach (string s in Directory.GetFiles(AppDomain.CurrentDomain.BaseDirectory, "*PlugIn.dll"))//getting plugins in base directory ending with PlugIn.dll
            {
                Assembly aWrite = Assembly.LoadFrom(s);
                //this is how you cast the plugin with the shared dll's interface
                Type tWrite = aWrite.GetType("PlugInApp.plugInClass");
                IWrite click = (IWrite)Activator.CreateInstance(tWrite);//you create the object
                click.write();//you call the method
            }
        } 
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T09:54:49.490

您应该使用托管可扩展性框架 (MEF)。

[http://mef.codeplex.com/](http://mef.codeplex.com/)

[http://msdn.microsoft.com/en-us/library/dd460648.aspx](http://msdn.microsoft.com/en-us/library/dd460648.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T11:13:12.597

使用 MEF。

> 托管可扩展性框架 (MEF) 是 .NET 中的一个新库，可以更好地重用应用程序和组件。使用 MEF，.NET 应用程序可以从静态编译转变为动态组合。如果您正在构建可扩展应用程序、可扩展框架和应用程序扩展，那么 MEF 适合您。

MEF 的有用链接。

[http://mef.codeplex.com/](http://mef.codeplex.com/)

[http://www.codeproject.com/Articles/376033/From-Zero-to-Proficient-with-MEF](http://www.codeproject.com/Articles/376033/From-Zero-to-Proficient-with-MEF)

[http://www.codeproject.com/Articles/232868/MEF-Features-with-Examples](http://www.codeproject.com/Articles/232868/MEF-Features-with-Examples)

# matlab - 使用其方法更改类属性

> ID：13658285
> 
> 赞同：0
> 
> 时间：2012-12-01T09:54:23.293
> 
> 标签：matlab, methods, properties

我想使用为该类定义的方法更改我的类属性：

```
classdef triangle<handle

properties
    a
    h         
end

methods

    function obj = triangle()
        obj;
    end

    function obj = setProps(obj, a, h)
        obj.a = a;
        obj.a = h;
    end

end

end 
```

来电：

```
t = triangle();
t.setProps(a, h); 
```

它根本不起作用 - 我收到此错误：

```
 The class 'handle' is not a super-class of class 'triangle', as required to invoke a super-class constructor or method.

 Error in triangle (line 13)
    function obj = triangle() 
```

我正在使用matlab 2012a。我的代码基于这个例子：[link](https://stackoverflow.com/questions/272618/how-to-modify-properties-of-a-matlab-object)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T16:00:20.590

`clear`在执行此操作之前尝试。您可能已经`handle`用某些东西覆盖了。否则，这在 Matlab 2012a 上对我有用：

```
clear;

a = 'hello';
h = 1;

t = triangle();
t.setProps(a, h); 
```

# python - 如何在python中删除字符串的结尾

> ID：13658287
> 
> 赞同：0
> 
> 时间：2012-12-01T09:54:44.373
> 
> 标签：python

我有一个字符串看起来像这样

```
urse/project/kb/use.js 
```

从这个字符串我需要得到

```
urse/project/kb/ 
```

`use.js`名称将始终更改，除了`.js`.

或者删除字符串直到`/`从最后的第一个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T09:57:53.733

Python 有一个专门的模块来处理文件路径：

```
In [13]: os.path.dirname('urse/project/kb/use.js')
Out[13]: 'urse/project/kb' 
```

根据需要附加尾随[`os.sep`](http://docs.python.org/2/library/os.html#os.sep)（或者，更好的是，坚持使用[`os.path`](http://docs.python.org/2/library/os.path.html)模块来操作路径）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T09:56:29.830

```
>>> s = 'urse/project/kb/use.js'
>>> s[:s.rfind('/') + 1]
'urse/project/kb/' 
```

# ruby - 为什么重试时不调用确保子句？

> ID：13658290
> 
> 赞同：0
> 
> 时间：2012-12-01T09:55:04.000
> 
> 标签：ruby, exception-handling

这是一个片段

```
def take_resource
  puts "resource taken"
end

def free_resource source
  puts "resource freed from #{source}"
end

def do_stuff
  tries = 0
  begin
    take_resource
    raise 'oops'
  rescue
    if tries < 3
      tries += 1
      free_resource 'rescue'
      retry
    end
    raise
  ensure
    free_resource 'ensure'
  end
end

do_stuff

# ~> -:13:in `do_stuff': oops (RuntimeError)
# ~>    from -:28:in `<main>'
# >> resource taken
# >> resource freed from rescue
# >> resource taken
# >> resource freed from rescue
# >> resource taken
# >> resource freed from rescue
# >> resource taken
# >> resource freed from ensure 
```

在这里，我们看到当我们阻塞`ensure`时没有调用该子句。`retry`这是为什么？对此有合乎逻辑的解释吗？我认为这`ensure`是`ensure`有原因的：它总是运行。好吧，事实证明我错了。

在我们讨论的时候：你知道这个领域的其他问题（异常处理）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-02T21:40:31.403

`ensure`在退出块时调用，无论是通过异常还是正常。`retry`只是将执行点转移到块的开头，因此您仍然在块中，并且`ensure`不会被调用。

考虑`ensure`存在以帮助在退出块时清理资源。如果您仍然处于障碍中，那么大概您仍在使用这些资源。

这是预期的行为。

这些关键字在 Programming Ruby 书 ( [http://www.ruby-doc.org/docs/ProgrammingRuby/html/tut_exceptions.html](http://www.ruby-doc.org/docs/ProgrammingRuby/html/tut_exceptions.html) )中有详细描述

# ruby-on-rails - 如何在 Windows 7 中配置 database.yml 以使用 postgis

> ID：13658295
> 
> 赞同：0
> 
> 时间：2012-12-01T09:55:46.993
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, postgis

我的 database.yml 开发部分如下所示：

发展：

```
 adapter: postgis
  encoding: unicode
  database: openData_development
  pool: 5
  username: postgres
  password: test1234
  schema_search_path: "public,postgis"
  script_dir: C:\Program Files (x86)\PostgreSQL\9.2\share\contrib\postgis-2.0 
```

rake db:create 工作，创建了 openData_development 模式。但我不能使用postgis ...

如果我想创建一个像这样的表：

```
CREATE TABLE bezirks (
    id integer NOT NULL,
    name character varying(255),
    beznr integer,
    district_code integer,
    main_id integer NOT NULL,
    latlon geometry,
    CONSTRAINT enforce_dims_latlon CHECK ((st_ndims(latlon) = 2)),
    CONSTRAINT enforce_geotype_latlon CHECK (((geometrytype(latlon) = 'MULTIPOLYGON'::text) OR (latlon IS NULL))),
    CONSTRAINT enforce_srid_latlon CHECK ((st_srid(latlon) = 4326))
); 
```

我得到错误：

```
ERROR:  Type »geometry« doesnt exist
LINE 27:     latlon geometry, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T13:12:34.660

使用 postgis 适配器不会自动在您的数据库上安装 postgis 扩展。

你必须自己做；一种帮助自动化的解决方案是在您的服务器上创建一个名为“template_postgis”的“裸”数据库，像往常一样在其上安装 postgis 扩展（按照 postgis 网站上的安装指南），然后将其添加到您的数据库.yml：

```
development:
  template: template_postgis 
```

在每个 dbs 上执行此操作，以便 rails 将它们创建为该模板的副本。

# php - 如何通过许可证密钥保护我的 php 应用程序？

> ID：13658299
> 
> 赞同：2
> 
> 时间：2012-12-01T09:56:38.460
> 
> 标签：php, javascript, jquery, mysql, ajax

我正在用 php 开发一个聊天应用程序，我想通过互联网销售它。我怎样才能使它受许可证保护，只有购买了许可证密钥的人才能使用它。不同的域会有不同的许可证。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T10:01:15.237

您将与许可的三个问题作斗争：

1.  聪明的人只会把代码拿出来
2.  您需要为每台服务器获得许可或让密钥在 Internet 上流通
3.  大多数人只会得到一个免费的替代品

要补救第一个……你不能。PHP 未编译。另外两个与代码无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T10:00:48.940

通常在 Internet 上您可以看到的不是许可证而是会员资格，除非您打算在其他公司的内部服务器上安装您的应用程序，如果是这种情况，有许多安装程序设置可以帮助您通过提供加密密钥来限制安装，在这种情况下将是您的许可证。

# maven - maven, xml 文件用于不同的配置文件

> ID：13658304
> 
> 赞同：6
> 
> 时间：2012-12-01T09:57:12.190
> 
> 标签：maven, profiles

我有 2 个配置文件的 maven pom：开发和生产

我的项目中有一些 xml 文件。例如 persistence.xml 。开发环境和生产环境的设置不同

我需要一种在开发和生产程序集中拥有正确文件的方法

也许可以有每个 xml 文件的 2 个副本并将其放入程序集中正确的一个？或者也许可以在 xml 文件中使用 pom 文件中的设置？

还有其他想法或最佳实践吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-01T11:16:52.657

您正在寻找的内容已在此处得到解答：[Maven：包含基于配置文件的资源文件](https://stackoverflow.com/questions/7353585/maven-include-resource-file-based-on-profile)

另一个解决方案是直接在 properties.xml 中使用属性，而不是拥有两个文件：

```
 <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5Dialect"/>
    <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
    <property name="hibernate.connection.username" value="${db.username}"/>
    <property name="hibernate.connection.password" value="${db.password}"/>
    <property name="hibernate.connection.url" value="${db.connectionURL}/database"/> 
```

在您的 pom.xml 中，为每个环境的每个属性定义一个值：

```
<profile>
  <id>development</id>
  <properties>
    <db.username>dev</db.username>
    <db.password>dev_password</db.password>
    <db.connectionURL>http://dev:3306/</db.connectionURL>
  </properties>
</profile>
<profile>
  <id>production</id>
  <properties>
    <db.username>prod</db.username>
    <db.password>prod_password</db.password>
    <db.connectionURL>http://prod:3306/</db.connectionURL>
  </properties>
</profile> 
```

然后，您可以使用过滤来启用每个环境中正确值的令牌替换：

```
<build>
    <resources>
        <resource>
            <directory>src/main/resources</directory>
            <filtering>true</filtering>
        </resource>
    </resources>
</build> 
```

有关此解决方案的模式详细信息，请查看[此页面](http://books.sonatype.com/mvnref-book/reference/resource-filtering-sect-description.html)。

如果您确实需要同一文件的两个副本，您也可以使用

# vb.net - 如何设置动态添加标签的文本对齐方式

> ID：13658310
> 
> 赞同：0
> 
> 时间：2012-12-01T09:58:08.350
> 
> 标签：vb.net, visual-studio, visual-studio-2005, text-alignment

如何设置动态添加标签的文本对齐方式我在字符串变量中获取标签名称的地方在面板中动态添加一个标签

```
 Dim instance As New Label
  Dim stringVariable As String 
```

在表单加载事件::

```
 instance.Location = New Point(15, 15)
    instance.Size = New Size(60, 30)
    instance.BorderStyle = BorderStyle.FixedSingle
    instance.AutoSize = False
    instance.Text = "LABEL1"
    Me.Panel1.Controls.Add(instance) 
```

我的名字是：

```
 for each c as control in Panel1.Controls
    stringVariable=c.name
    next 
```

但它不可能

```
 Me.Panel1.Controls(stringVariable).textalign ??????
   it does not show text align property 
```

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T10:16:06.260

```
DirectCast(Me.Panel1.Controls("Label1"), Label).TextAlign = ContentAlignment.TopRight 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-10T16:27:42.457

我发现这些值会设置 TextAlign

```
Public pTop_Center As Long = 2
Public pMiddle_Center As Long = 32
Public pBotton_Center = 512

 btn.TextAlign = pBotton_Center 
```

# php - 在mysql中搜索多个值

> ID：13658311
> 
> 赞同：1
> 
> 时间：2012-12-01T09:58:14.457
> 
> 标签：php, mysql

我正在用 PHP 和 MySQL 创建一个搜索脚本。现在，我已经达到了这样的程度，但在某些情况下它工作得不是很好：

```
$id = JRequest::getInt('id');
$catid = JRequest::getVar('catid');     
$console = JRequest::getVar('console'); 
$ram = JRequest::getVar('ram');

if ($ram) {
    $ram = "AND rec_ram='$ram'";
}       

if ($console) {
    $console = "AND console='$console'";
}

$array = array(
    catid => $catid,    
    console => $console,
    ram => $ram,
);

$db = JFactory::getDBO();
$query = "SELECT * FROM #__content WHERE catid='$catid' $array[console] $array[ram]"; 
```

有什么其他选择可以做到这一点？

有时值可能为空，这就是我使用的原因：

```
if ($console) {
    $console = "AND console='$console'";
} 
```

但在某些情况下它仍然工作不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:11:56.743

使用串联！将所有变量都放在一个字符串中是非常糟糕的。

```
<?php

    $conditions = '';

    if ($ram) {
        $conditions .= ' AND `rec_ram`="'.$ram.'"';
    }       

    if ($console) {
        $conditions .= ' AND `console`="'.$console.'"';
    }

    $query = 'SELECT * FROM `#__content` WHERE `catid`=' . $catid . $condition . ';';

?> 
```

请注意，如果 console 或 rec_ram 的类型为 int，则无需引用它的值。

```
<?php

    // column console is int 
    if ($console) {
        $conditions .= ' AND `console`='.$console;
    }

?> 
```

好的，这是提供正确sql结构的方法：

```
$conditions = array();

if ($ram) {
    $conditions[] = '`rec_ram`="'.$ram.'"';
}

if ($console) {
    $conditions[] = '`console`="'.$console.'"';
}

// some other conditions...

$condition = '';
if (sizeof($conditions) > 0)
    $condition = ' WHERE ' . implode(' AND ', $conditions);

$query = 'SELECT * FROM `#__content`' . $condition . ';'; 
```

# c# - 使用 Web 浏览器 C# 的准确名称可用性检查器

> ID：13658312
> 
> 赞同：0
> 
> 时间：2012-12-01T09:58:28.040
> 
> 标签：c#, timer, watin

我正在为论坛创建大量用户名可用性检查器，但是当计时器设置为高速时，有时会说用户名在论坛不可用时可用。

如何确保它在跳到我的列表框中的下一个用户名之前正确检查了用户名？

我的代码示例：

```
// Timer1
timer1.Stop();
webBrowser1.Document.GetElementById("username").InnerText = list.SelectedItem.ToString();
webBrowser1.Document.GetElementById("register").InvokeMember("Click");   
list.SelectedIndex = list.SelectedIndex + 1;
timer2.Start();

// Timer2
timer2.Stop();
if (webBrowser1.Document.GetElementById("status").ToString().Contains("available"))
        {
            list2.Items.Add(list.SelectedItem.ToString());

            timer1.Start();
        }
        else
        {

            timer1.Start();
        } 
```

我可以使用 WatiN 或其他东西来确保它在跳到下一个标签之前等待它检查用户名的可用性吗？页面不会重新加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:32:26.293

您可以轮询页面内容是否包含 X 或 Y，然后继续。我在这里假设页面将显示“可用”或“抱歉，选择其他”消息。如果您没有显示是/否状态，这将更加困难。

类似于以下内容：这**不是**经过测试的代码，只是对我在像您这样的场景中所做的事情类型的粗略了解。

```
int maxWaitTime = 5000
int timeWaited = 0
int interval

while (!status.text.contains("available")) && !status.text.contains("pick something else") && timewaited < maxWaitTime)
{
    Thread.Sleep(X)
    timeWaited += interval;   //Add X miliseconds.
}

if (timeWaited >= maxWaitTime)
{
    throw new TimeoutException("Took too long to get a status")
} 
```

# compiler-construction - 我们可以制作多小的编译器？

> ID：13658313
> 
> 赞同：1
> 
> 时间：2012-12-01T09:58:54.247
> 
> 标签：compiler-construction

我们可以为任何（一种）语言（如 C、Assembly 等）制作多小的编译器？有可能使它大约 300-400kb 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T10:11:03.803

是的，这当然是可能的。

看看这个：[TCC](http://bellard.org/tcc/)。完全工作的 C 编译器可执行文件，大小为 135KB（适用于 Win32）。之后`upx`它变成了 72KB。

# android - 为什么每次运行项目时都需要清理项目？否则会出错

> ID：13658314
> 
> 赞同：-1
> 
> 时间：2012-12-01T09:59:01.483
> 
> 标签：android, eclipse, android-camera

错误在这一行：

```
 camera.setDisplayOrientation(90); 
```

清洁后一切正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:06:00.407

Check your project MIN_SDK. camera.setDisplayOrientation(90) will only work since API level 8. If you are targeting any device before Android FROYO, it wont work

# java - 使用 poi 从 excel 文件中读取图像和数据

> ID：13658315
> 
> 赞同：0
> 
> 时间：2012-12-01T09:59:26.130
> 
> 标签：java, apache-poi

我知道如何从 excel xls/xlxs 读取数据。现在我的要求是我必须使用 POI 3.8 从 excel 文件中读取图像和数据。你能指导我怎么做吗？使用 poi 从一个 excel 文件中读取图像和数据....提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T10:32:51.827

直接来自[开发者指南](http://poi.apache.org/spreadsheet/quick-guide.html#Images)：

```
List lst = workbook.getAllPictures();
for (Iterator it = lst.iterator(); it.hasNext(); ) {
    PictureData pict = (PictureData)it.next();
    String ext = pict.suggestFileExtension();
    byte[] data = pict.getData();
    if (ext.equals("jpeg")){
      FileOutputStream out = new FileOutputStream("pict.jpg");
      out.write(data);
      out.close();
    }
} 
```

RTM :)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-10-04T18:02:41.917

```
XSSFSheet mySheet1 = workbook.getSheetAt(0);
Iterator<Row> rowIterator1 = mySheet1.iterator();
if(rowIterator1.hasNext())
{
    rowIterator1.next();
}
int pcount=1;
Iterator<XSSFPictureData> it = lst.iterator();

for (int i=0; i<lst.size(); i++)
{
    Row row = rowIterator1.next();

 //   PictureData pict = (PictureData)it.next();
    PictureData pict = (PictureData)lst.get(i);

    String ext = pict.suggestFileExtension();

    byte[] data = pict.getData();
    String studentName = row.getCell(3).getStringCellValue();
    int age =(int)row.getCell(14).getNumericCellValue();
    int year = (int)row.getCell(16).getNumericCellValue();

    System.out.println(studentName+":"+age+":"+year);

    FileOutputStream out = new FileOutputStream("D:\\excel\\RPC\\"+pcount+"."+year+"."+age+".png");

    out.write(data);
    out.close();
    pcount++;

    rowIterator1.hasNext();

    }
} 
```

# mysql - MySQL COUNT 值作为列

> ID：13658319
> 
> 赞同：1
> 
> 时间：2012-12-01T10:00:32.303
> 
> 标签：mysql, count

我有两张桌子

```
BOOK(book_id, book_name) 
```

和

```
COPY(copy_id, book_id, available(bool)) 
```

我想要一个查询来显示 COPY 表中具有相同 book_id 且可用设置为 true 的所有副本的 book_id、book_name 和 COUNT(*)。示例查询输出应如下所示：

```
1, BookA, 2
2, BookB, 4
3, BookC, 0 
```

所以 BookA 有两个可用设置为 true 的 COPY 元组。这是我目前所拥有的，它不起作用。

```
SELECT * FROM
(SELECT * FROM BOOK)book,
(SELECT book_id, COUNT(copy_id) FROM COPY)copy
WHERE book.book_id = copy.book_id; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T10:03:39.853

Since bool values are `1` if `true` in MySQL, you can sum them up

```
SELECT b.book_id, 
       b.book_name, 
       sum(c.available) as copy_count
FROM book b
left outer join copy c on c.book_id = b.book_id
group by b.book_id 
```

[SQLFiddle demo](http://sqlfiddle.com/#!2/81ed2/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T10:32:12.740

这是另一个变体：

```
SELECT b.book_id, 
       b.book_name, 
       count(c.available) as copy_count
FROM book b
left outer join copy c on c.book_id = b.book_id and c.available = 1
group by b.book_id 
```

这更有效一点，因为连接不包括任何书籍不可用的行，所以它是一个较小的中间表来处理。

# javascript - Mobile dialog on desktop website

> ID：13658327
> 
> 赞同：1
> 
> 时间：2012-12-01T10:01:21.850
> 
> 标签：javascript, jquery, css, jquery-mobile, mobile

I have a website (normal, for desktop browsers) and a mobile applicaiton.

I would like to suggest the visitors to try the mobile app. I created all the detection JS, cookies on server side to remember if he didn't want it, but I have one issue - Showing the dialog.

I wanted to use jQuery UI, but the dialog dosn't look so well on mobile devices (even after adjusting sizes).

I thought about using jQuery mobile, but I get the feeling this is a bit of an over kill (adding the entire CSS and JS for just one dialog/popup, will require adding data-role to the pages and more. not sure about this.

I also thought about adding phonegap, but that feels as an even bigger overkill, just to show the message.

The message should only contain some text, and two buttons (Link to the app, or close with ajax callback to create a session/cookie var).

So what would you suggest to display this one message? Thanks :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T12:20:58.263

尝试使用一些支持[ui](/questions/tagged/ui "show questions tagged 'ui'")元素[的响应式设计框架。](/questions/tagged/responsive-design "显示标记为“响应式设计”的问题")我推荐[Zurb 的基金会](http://foundation.zurb.com)。您还必须查看它的[Reveal](http://foundation.zurb.com/docs/reveal.php)，它提供了轻松的调用模式。

# jsp - DisplayTag row color

> ID：13658330
> 
> 赞同：0
> 
> 时间：2012-12-01T10:01:54.863
> 
> 标签：jsp, row, displaytag

I have a problem with displaytag, I want to change the background color of certain rows and I can't. I follow this example [http://raibledesigns.com/rd/entry/displaytag_changing_a_row_s](http://raibledesigns.com/rd/entry/displaytag_changing_a_row_s) but nothing happens.

Here is my jsp :

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%> 
<%@taglib uri="http://www.springframework.org/tags" prefix="spring"%>
<%@ taglib uri="http://displaytag.sf.net" prefix="display" %>
<jsp:directive.page contentType="text/html; charset=UTF8" />
<html> 
<head>
<title><spring:message code="label.listeggrafo" /></title>
<script type="text/javascript">

var table = document.getElementById("eggrafa");  
alert(table); 
var tbody = table.getElementsByTagName("tbody")[0];
var rows = tbody.getElementsByTagName("tr");
// add event handlers so rows light up and are clickable
for (i=0; i < rows.length; i++) {

    rows[i].style.backgroundColor = "red";

}

</script>

</head>
<body>
<display:table   name="eggrafa" requestURI="" sort="list"  class="sample" id="eggrafa" export="true" pagesize="10">

  <display:column  media="html"  href="deleteeggrafo.html"  paramId="idtypiko" paramProperty="idtypiko"><img src="<%=request.getContextPath()%>/images/delete.png" />     </display:column>

<display:column property="aa" sortable="true"  href="updateeggrafo.html"
    paramId="idtypiko" paramProperty="idtypiko"  titleKey="label.aa"></display:column>
<display:column property="fakelos_eggrafou" sortable="true" titleKey="label.fakelos"></display:column>
<display:column  property="diabathmisi" sortable="true"  titleKey="label.diab"></display:column>
<display:column property="apostoleas" sortable="true" titleKey="label.apostol"></display:column>
<display:column property="tautotitaeg" sortable="true" titleKey="label.tauteg"></display:column>
    <display:column property="hmeromhniaypog" sortable="true" titleKey="label.hmeryp"></display:column>

    <display:column property="year" sortable="true" titleKey="label.year"></display:column>

<display:column property="filename" sortable="true" href="downloadfileeggrafo.html" paramId="idtypiko" paramProperty="idtypiko" titleKey="label.filename"/>

<display:setProperty name="paging.banner.one_item_found"><span style="background-color: rgb(250, 240, 230)" class="pagebanner"> Ένα {0} βρέθηκε. </span></display:setProperty>
<display:setProperty name="basic.msg.empty_list">Δεν βρέθηκαν Έγγραφα</display:setProperty>
   <display:setProperty name="paging.banner.all_items_found"><span style="background-color: rgb(250, 240, 230)" class="pagebanner"> {0} {1} βρέθηκαν, βλέπετε όλα τα {2}. </span> </display:setProperty>

 <display:setProperty  name="paging.banner.item_name">Έγγραφο</display:setProperty>
 <display:setProperty name="paging.banner.items_name">Έγγραφα</display:setProperty>
 <display:setProperty name="paging.banner.some_items_found"><span  style="background-color: rgb(250, 240, 230)" class="pagebanner"> {0} {1} βρέθηκαν, βλέπετε {2} έως {3}. </span>   </display:setProperty>
  <display:setProperty name="paging.banner.first"><span style="background-color: rgb(250, 240, 230)" class="pagelinks"> [Πρώτη/Προηγούμενη] {0} [ <a href="{3}">Επόμενη</a>/ <a href="{4}">Τελευταία</a>] </span> </display:setProperty>
  <display:setProperty name="paging.banner.last"><span style="background-color: rgb(250, 240, 230)" class="pagelinks">[ <a href="{1}">Πρώτη</a>/ <a href="{2}">Προηγούμενη</a>] {0} [Επόμενη/Τελευταία] </span></display:setProperty>
   <display:setProperty name="paging.banner.full"><span style="background-color: rgb(250, 240, 230)" class="pagelinks"> [<a href="{1}">Πρώτη</a>/ <a href="{2}">Προηγούμενη</a>] {0} [ <a href="{3}">Επόμενη</a>/ <a href="{4}">Τελευταία </a>]</span> </display:setProperty>
<display:setProperty name="export.banner"><div style="background-color: rgb(250, 240, 230)" class="exportlinks"> Εξαγωγή σε Αρχείο: {0} </div></display:setProperty>

</display:table>

</body>
</html> 
```

Also the alert message return me null. Does anybody what i'm doing wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T14:36:41.930

在浏览器加载页面之前，您正在访问 DOM。所以它还不包含你的表。

我建议使用 jQuery，并在 DOM 准备好后执行您在 JavaScript 中所做的一切：

```
$(document).ready(function() {
    $('#eggrafa tbody tr').css('background-color', 'red');
}); 
```

不过，我不确定您是否可以设置 tr 的背景颜色，因此您可能必须设置每个 td 的背景颜色：

```
$(document).ready(function() {
    $('#eggrafa tbody td').css('background-color', 'red');
}); 
```

你可以用 vanilla JS 做到这一点，但它会更不简洁，而且更难支持每个浏览器。

# asp.net - Get the value of textbox under datalist itemtemplate

> ID：13658336
> 
> 赞同：0
> 
> 时间：2012-12-01T10:02:55.583
> 
> 标签：asp.net

Here is my problem
A datalist and item template created at run time in asp.net when change value of textbox under datalist item template and page postback due to textchanged event **but the datalist drop and datalist created again in pageload and textbox value drop.**

```
void CreateDL(Control container)
    {
        var st = settings.CustomPossition();
        foreach (var item in settings.CustomPossition())
        {
            DataTable dt = new DataTable();
            dt.Columns.Add("Name");
            dt.Columns.Add("Possition");
            dt.Columns.Add("Production");
            dt.Columns.Add("dpo");
            dt.Columns.Add("WorkDay");
            DataRow dr;
            foreach (var users in item.Users)
            {

                dr = dt.NewRow();
                dr["Name"] = users.Name;
                dr["Possition"] = users.Position.Name;
                dr["Production"] = users.DailyGoalAmount * users.WorkDays;
                dr["dpo"] = users.DailyGoalAmount;
                dr["WorkDay"] = users.WorkDays;
                dt.Rows.Add(dr);
                dt.AcceptChanges();

            }
            DataList dataList = new DataList();      
         //   dataList.ItemTemplate = Page.LoadTemplate("Commnets.ascx");
            container.Controls.Add(dataList);

            dataList.DataSource = dt;
            dataList.DataBind();
        }
    } 
```

how i can access value of textbox.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T10:11:32.933

检查 Page.IsPostBack：

```
if(!Page.IsPostBack)
{
//Your code
}
else
{
//Other code
} 
```

# javascript - Is "\n" not working in string.split for JavaScript?

> ID：13658337
> 
> 赞同：0
> 
> 时间：2012-12-01T10:03:01.813
> 
> 标签：javascript, split

I have a external resource (raw text file) like:

```
1\. Title 1
Content 1
|
2\. Title 2
Content 2
|
3\. Title 3
Content 3 
```

I load them in a web page via AJAX and want to use content.split("\n|\n") to extract its content into an array for my use. But it seems it's not working.

What's weird is that **split("\n|")** works, but neither do **split("|\n")** nor **split("\n|\n")** work.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T10:06:21.587

That's not JavaScript related. That's related to the operating system.

```
 var canonicalizeNewlines = function(str) {
      return str.replace(/(\r\n|\r|\n)/g, '\n');
  }; 
```

Basically DOS(Windows), FreeBSD and Unix systems use different white characters to end a line. `/r` is for DOS ,`/r/n` is for FreeBSD based(Mac). This will enforce a single style for all your new lines, the Unix default style which is `\n`.

# html - how to add blank space at the end of each line in HTML?

> ID：13658340
> 
> 赞同：4
> 
> 时间：2012-12-01T10:03:09.993
> 
> 标签：html, vb.net

I am using VB.Net for my project developing. Now I want to add blank space at the end of each line using HTML code.

So can any one help me out to do this?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T10:05:22.480

there is special symbol for that

```
 <P>
   my line of text &nbsp; 
 </P> 
```

use as many of those as needed, though is always better to simulate the spaces with CSS like

```
 padding-right:5px; 
```

# api - 通过 LinkedIn API 从 salesforce 获取基本个人资料信息

> ID：13658343
> 
> 赞同：0
> 
> 时间：2012-12-01T10:03:40.807
> 
> 标签：api, rest, salesforce, linkedin, apex-code

我正在尝试从 APEX 中的 Linkedin API 获取基本配置文件信息，我获得了授权令牌和秘密令牌，但无法使用该令牌检索基本配置文件。请在代码下方找到：

```
public void getLinkedinData(){
    List<TestLinkedin__c> tok = [select unAuth_Key__c,unAuth_Token__c from TestLinkedin__c where name='AuthKey' limit 1];  
    oauth_token = tok[0].unAuth_Token__c;
    oauth_token_secret = tok[0].unAuth_Key__c;        

    unAuthorisedToken =  tok[0].unAuth_Token__c;
    unAuthorisedKey = tok[0].unAuth_Key__c;  

    nonceValue  = generateNonce(); 
    timeStamp = generateTimeStamp();     

    string TripItAccessDataUri='https://api.linkedin.com/v1/people/~/format/json';

    Http h = new Http();
    HttpRequest req = new HttpRequest();
    req.setMethod('GET');
    req.setEndpoint(TripItAccessDataUri);
    final String oAUth_BASE_signature = SignatureBaseStringForAccessData(TripItAccessDataUri,unAuthorisedToken,unAuthorisedKey,nonceValue,timeStamp); 
    String signature = SignatureForAccessData(oAUth_BASE_signature ,consumerKey_Secret+'&'+unAuthorisedKey);
    req.setHeader('Authorization','OAuth realm=\"https://api.linkedin.com/\",oauth_consumer_key=\"'+oauth_consumer_key+'\",oauth_token=\"'+unAuthorisedToken+'\",oauth_nonce=\"'+nonceValue+'\",oauth_token_secret=\"'+unAuthorisedKey+'\",oauth_signature_method=\"'+oauth_signature_method+'\",oauth_timestamp=\"'+timeStamp +'\",oauth_version=\"'+oauth_version+'\",oauth_signature=\"'+signature+'\"');  
    reqstr =oAUth_BASE_signature ;
    HttpResponse res = h.send(req);
    resData =  res.getBody();
    system.debug('&&&&&&&&&&&&&&&& Respose' + resData );
}   

public String generateNonce(){
    String nonce;
    String finalNonce ;  
    nonce = String.valueOf(Math.abs(Math.random())); 
    finalNonce = nonce.substring(nonce.indexOf('.')+1,nonce.length());
    System.debug('+++++++++Nonce '+ finalNonce );
    return finalNonce ;
} 
public long generateTimeStamp(){
    long millis = (long) System.currentTimeMillis() ;
    long sysTime = (long) millis / 1000;
    System.debug('+++++++++++++TimeStamp'+ sysTime );
    return sysTime ;
}

public String SignatureBaseStringForAccessData(String TripItAccessDataUri,String unAuthorisedToken,String unAuthorisedKey,String  nonceValue ,Long timeStamp) {
    String httpmethod = 'GET';
    String oAUTH_PARA='oauth_consumer_key='+oauth_consumer_key+'&oauth_nonce='+nonceValue +'&oauth_signature_method='+oauth_signature_method+'&oauth_timestamp='+timeStamp+'&oauth_token='+unAuthorisedToken+'&oauth_token_secret='+unAuthorisedKey+'&oauth_version='+oauth_version+'';
    String BASE_STRING = httpmethod+'&'+EncodingUtil.urlEncode(TripItAccessDataUri,'UTF-8')+'&'+EncodingUtil.urlEncode(oAUTH_PARA,'UTF-8');
    return BASE_STRING;
}

//Signature Generator for Data
public String SignatureForAccessData(String Signature_Base_Value,String Key){
    Blob mac = Crypto.generateMac('HmacSHA1',Blob.valueOf(Signature_Base_Value),Blob.valueOf(Key));
    String macUrl = EncodingUtil.urlEncode(EncodingUtil.base64Encode(mac),'UTF-8');
    System.debug('++++++++Final Signature Is '+macUrl );   
    return macUrl;
} 
```

回复正文：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<error>
    <status>401</status>
    <timestamp>1354429511382</timestamp>
    <request-id>GDGNWB2M1V</request-id>
    <error-code>0</error-code>
    <message>[unauthorized].OAU:tylg6udljqe0|e7820b33-6acc-4752-b014-f54d505cf‌​8a0|*01|*01:1354376252:vufYE2Zeg9Dg/R1YXO21cRlfmPA=</message>
</error> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:48:20.827

终于得到答案了......

问题出在特殊字符“~”上

使用以下 URl 通过将 '~' 替换为 '%7E' 来获取配置文件详细信息

字符串 LinkedInAccessDataUri=' [https://api.linkedin.com/v1/people/%7E](https://api.linkedin.com/v1/people/%7E) ';

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:11:03.857

您需要在身份验证期间请求 r_basicprofile 的权限：

休息样品要求：

`https://api.linkedin.com/uas/oauth/requestToken?scope=r_basicprofile`

Javascript 示例请求：

```
<script type="text/javascript" src="http://platform.linkedin.com/in.js">
    api_key: your_api_key
    scope: r_basicprofile
</script> 
```

以下是所有字段及其所需权限的列表：

[Linkedin API 配置文件字段](https://developer.linkedin.com/documents/profile-fields)

# php - PHP style changer not working

> ID：13658347
> 
> 赞同：1
> 
> 时间：2012-12-01T10:04:44.647
> 
> 标签：php

Please note that I'm not very good with PHP, and I did browse the web to find my answer, and I was unable to find it, so I decided to ask it here!

I have two CSS files: black.css and white.css ; the default one is black.css, and I want to be able to change to the white and back if needed. This is my link to the stylesheet:

```
<link rel="stylesheet" type="text/css" media="screen" title="User Defined Style" `href="<?php echo (!$sitestyle)?'black':$sitestyle ?>.css" />` 
```

This is my HTML code: (Found in index.php)

```
<a href="switcher.php?set=white">
click here to change to WHITE style!</a> 
```

This is my PHP code: (Found in switcher.php)

```
<?php
setcookie ('sitestyle', $set, time()+31536000, '/', 'mydomain.com/', '0');
header("Location: $HTTP_REFERER");
?> 
```

When attempting to switch styles, it gives me an error saying 'The page isn't redirecting properly'.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T10:31:12.070

我建议您不要参考其他页面，而是在同一页面上执行所有操作：

```
//index.php

<?
   if(isset($_GET['set']))
       setcookie ('sitestyle', $_GET['set'], time()+31536000, '/', 'mydomain.com[Censored :P]/', '0');
?>

 <link rel="stylesheet" type="text/css" media="screen" title="User Defined Style"    href="<?php echo (!$sitestyle)?'black':$sitestyle ?>.css" /> 
```

单击此处更改为白色样式！

并使用更好的 $_SESSION[''] 代替 cookie。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T10:15:57.827

尝试：

```
<?php
setcookie ('sitestyle', $_GET['set'], time()+31536000, '/', 'mydomain.com[Censored :P]/', '0');
header("Location: $_SERVER[HTTP_REFERER]");
?> 
```

# asp.net - 从通用处理程序返回 json 对象列表

> ID：13658349
> 
> 赞同：0
> 
> 时间：2012-12-01T10:04:52.713
> 
> 标签：asp.net, ajax

我正在向通用处理程序发出 ajax 请求以获取 json 字符串列表。

```
$.ajax({
            type: "POST",
            url: "MyHandler.ashx",
            data: "{}",
            contentType: "text/plain",
            dataType: "text",
            success: function (jsonList) { 
                var myArray = new Arrary();
                myArray = jsonList;
                var jsonObject1 = JSON.parse(myArray[0]);
            } 
```

**MyHandler.ashx**

```
public void ProcessRequest (HttpContext context) 
{
    context.Response.ContentType = "text/plain";
    List<string> allstrings = new List<string>();

    allstrings = (List<string>)context.Application["allstrings"];
    context.Response.Write(allstrings);
} 
```

我不确定要在此处使用的内容类型和数据类型。该请求永远不会达到成功功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:08:21.950

试试这个

```
$.ajax({
            type: "GET",
            data: {},
            url: "MyHandler.ashx",
            contentType: "application/json; charset=utf-8",
            success: function (jsonList) {
                alert(JSON.stringify(jsonList));
            },
            error: function (e) {
                alert("Error" +JSON.stringify(e));
            }
        }); 
```

# php - inserting data into database using ajax in php

> ID：13658350
> 
> 赞同：0
> 
> 时间：2012-12-01T10:04:56.310
> 
> 标签：php, mysql, ajax

i do have 3 input text which are of "type:number" and a save button. i want to insert the these 3 input text data into the database using ajax. i have written the code as follows:

```
<fieldset><legend>Response Times</legend></fieldset> 
    <form class="form">
        <div class="control-group">
            <label class="control-label">High Priority</label>
            <div class="controls">
            <input type="number" name="high" id="sval"/>Days
            </div>
        </div>
        <div class="control-group">
            <label class="control-label ">Low Priority</label>
            <div class="controls">
            <input type="number" name="high" id="sval"/>Days</div>
        </div>
         <div class="control-group">
            <label class="control-label ">Normal</label>
            <div class="controls">
            <input type="number" name="high" id="sval"/>Days </div>
        </div>
        <button id="insert" class="btn btn-primary">Save</button>
</form>
<script type="text/javascript" src="<?php echo $BASE;?>scripts/data/projects_service.js"></script> 
```

and my query is

```
Insert into app_settings(kunnr,skey,sval) Values ('0001000383','hp_days','1') 
Insert into app_settings(kunnr,skey,sval) Values ('0001000383','lp_days','3')
Insert into app_settings(kunnr,skey,sval) Values ('0001000383','np_days','2') 
```

which are hard coded but i dont want hard coded data.my problem is that only sval values are showing in the view but what about this skey value.and i want o insert it using ajax and i have tried this by ajax that i have written as follows:

```
$(function () {
    $("#insert").click(function () {
        var id = $("#id").val();
        var sval = $("#sval").val();
        $.post(root + "data/projects_service?json", { pid: id, sval: sval }, function (data) { });

    });        
}); 
```

please suggest me on this..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T10:39:59.790

html代码

```
<html>
<body>

<fieldset><legend>Response Times</legend></fieldset> 
    <form class="form">
        <div class="control-group">
            <label class="control-label">High Priority</label>
            <div class="controls">
            <input type="number" name="high" id="kunnr"/>Days
            </div>
        </div>
        <div class="control-group">
            <label class="control-label ">Low Priority</label>
            <div class="controls">
            <input type="number" name="high" id="skey"/>Days</div>
        </div>
         <div class="control-group">
            <label class="control-label ">Normal</label>
            <div class="controls">
            <input type="number" name="high" id="sval"/>Days </div>
        </div>
        <button id="insert" class="btn btn-primary">Save</button>
</form>

</body>
</html> 
```

jQuery代码

```
$(function()
{   
    $("#insert").click(function() 
    {
        var kunnr = $("#kunnr").val;
        var sKey = $("#skey").val;
        var sVal = $("#sval").val;
        var dataString = "kunnr="+kunnr+"&sKey="+sKey+"&sVal="sVal;
        $.ajax(
        {
            type: "GET",
                url: "your url", // in the page of url write the code to insert in db
                data: dataString,
                success: function(result) 
                {               
                    alert(result); // you can just check whether the row is inserted or not.
                }
            });
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T10:18:13.537

看看这一行：

```
var id = $("#id").val(); 
```

这一行意味着您从 id 名称为“id”的元素中获取值。

因此 Js 无法找到该元素的值，因为它不存在。

为什么你使用 id="sval"？id 参数应始终唯一。将它们的 id 分别更改为“hp”、“lp”、“n”，并在 jQ 中获取 3 个值。）

```
var hp = $("#hp").val();
var lp = $("#lp").val();
var n = $("#n").val(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T22:05:22.837

在“您的 url”文件中，您可以访问变量`hp`，例如通过`$_GET['hp']`.

你能告诉我 kunnr 在不同的日子里应该是不同的参数吗？如果不是，那么您可以通过以下方式进行查询：

```
Insert into app_settings(kunnr,skey,sval) Values ('0001000383','hp_days',$_GET['hp']) 
Insert into app_settings(kunnr,skey,sval) Values ('0001000383','lp_days', $_GET['lp'])
Insert into app_settings(kunnr,skey,sval) Values ('0001000383','np_days',$_GET['n']) 
```

# matlab - Add multiple text blocks to a figure in Matlab

> ID：13658353
> 
> 赞同：0
> 
> 时间：2012-12-01T10:05:12.943
> 
> 标签：matlab, plot, matlab-figure

I'm trying to find a better \ more compact way to add many "text blocks" (I call a "text block" some text that has multiple lines) to a figure. See for example the figure below:

![enter image description here](../Images/e85ee30ddc60a53289886674e3e43f75.png)

The code I used to generate this figure is:

```
x=-4*pi:pi/20:4*pi;
y=cos(x);

% generate positions for the text blocks
[ypos,xpos]=find(ismember(y,max(y))); % finds multiple maxima

% generate random data to be presented
info1=rand(1,numel(xpos));     info2=rand(1,numel(xpos));     info3=rand(1,numel(xpos));

plot(x,y);
ylim([-1.1 1.4])

% generate the "text blocks"
text(x(xpos),ypos+0.3,strcat('A_{',num2str((1:numel(xpos))'),'}=',num2str(info1','%0.1f')),'FontSize',8);    
text(x(xpos),ypos+0.2,strcat('B_{',num2str((1:numel(xpos))'),'}=',num2str(info2','%0.1f')),'FontSize',8);    
text(x(xpos),ypos+0.1,strcat('C_{',num2str((1:numel(xpos))'),'}=',num2str(info3','%0.1f')),'FontSize',8);    
%...
%... etc 
```

I'm aware that multiline text strings can be added using cell arrays, by defining a string variable as a cell array with one line per cell. For example:

```
 text(x,y,{'line 1' ; 'line 2' ; 'line 3'}); 
```

However, this also requires one line of code per text block, so it doesn't solve the multi text blocks case ...

**my question is:** Is there a way to add these text blocks in a single line or in a more generic sense, say if I have n text blocks each with some variable number of lines of text?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T12:25:48.340

关于什么

```
pos = num2cell(linspace(.3,.1,3));
lett = num2cell(linspace('A','C',3));

your_text_f_handle = @(ps,lt) ...
    text(x(xpos),ypos+ps,strcat(lt, ... 
    '_{',num2str((1:numel(xpos))'),'}=',... % //REM: old info_i are here
     num2str(rand(1,numel(xpos))','%0.1f')),'FontSize',8);

cellfun(your_text_f_handle ,pos,lett); 
```

它提供完全相同的输出（经过测试），并且易于扩展。

# iphone - 插入的数据未显示在 iphone 的主数据库中

> ID：13658356
> 
> 赞同：-1
> 
> 时间：2012-12-01T10:05:54.250
> 
> 标签：iphone, sqlite

我正在 iphone 中学习 sqlite，其中我有一个查询，当我将 sqlite 文件添加到资源文件夹并运行应用程序时，它工作正常，但是当我在 sql manager 中打开该 sqlite 文件时没有显示数据。请给我一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:15:08.373

> “...将 sqlite 文件添加到***资源***文件夹...”

之后

> “...当我在 sql manager 中打开该 sqlite 文件时，未显示数据...”

因为您不能在应用程序包中编写/修改文件（出于非常明显的安全考虑）。

如果要以编程方式修改文件，则必须将其复制到 Library 或 Documents 目录。

但实际上，你***应该用谷歌搜索。***关于同一个问题有几个问题和答案，例如：

[SQLite3 更新不起作用](https://stackoverflow.com/questions/6514187/sqlite3-update-not-working)

[IOS sqlite更新查询问题](https://stackoverflow.com/questions/8673535/ios-sqlite-update-query-issues)

[sqlite3更新在ios中不起作用](https://stackoverflow.com/questions/12439751/sqlite3-update-not-working-in-ios)

[sqlite数据库不更新iphone sdk中的修改数据](https://stackoverflow.com/questions/3636009/sqlite-database-not-updating-modified-data-in-iphone-sdk)

（想要更多？）

# python - Lighttpd + fastcgi + python (for django) 在第一次请求时很慢

> ID：13658359
> 
> 赞同：2
> 
> 时间：2012-12-01T10:07:15.153
> 
> 标签：python, django, fastcgi, lighttpd

我在使用 lighttpd + fastcgi 托管的 django 网站上遇到问题。它工作得很好，但似乎第一个请求总是最多需要 3 秒。随后的请求要快得多（<1s）。

我在 lighttpd 中激活了访问日志以跟踪问题。但我有点卡住了。

以下是我“丢失”4s 的日志（从 10:04:17 到 10:04:21）：

```
2012-12-01 10:04:17: (mod_fastcgi.c.3636) handling it in mod_fastcgi 
2012-12-01 10:04:17: (response.c.470) -- before doc_root 
2012-12-01 10:04:17: (response.c.471) Doc-Root     : /var/www 
2012-12-01 10:04:17: (response.c.472) Rel-Path     : /finderauto.fcgi 
2012-12-01 10:04:17: (response.c.473) Path         :  
2012-12-01 10:04:17: (response.c.521) -- after doc_root 
2012-12-01 10:04:17: (response.c.522) Doc-Root     : /var/www 
2012-12-01 10:04:17: (response.c.523) Rel-Path     : /finderauto.fcgi 
2012-12-01 10:04:17: (response.c.524) Path         : /var/www/finderauto.fcgi 
2012-12-01 10:04:17: (response.c.541) -- logical -> physical 
2012-12-01 10:04:17: (response.c.542) Doc-Root     : /var/www 
2012-12-01 10:04:17: (response.c.543) Rel-Path     : /finderauto.fcgi 
2012-12-01 10:04:17: (response.c.544) Path         : /var/www/finderauto.fcgi 
2012-12-01 10:04:21: (response.c.128) Response-Header: 
HTTP/1.1 200 OK
Last-Modified: Sat, 01 Dec 2012 09:04:21 GMT
Expires: Sat, 01 Dec 2012 09:14:21 GMT
Content-Type: text/html; charset=utf-8
Cache-Control: max-age=600
Transfer-Encoding: chunked
Date: Sat, 01 Dec 2012 09:04:21 GMT
Server: lighttpd/1.4.28 
```

我想如果有问题，那是我的配置。所以这是我启动 django 应用程序的方式：

```
python manage.py runfcgi method=threaded host=127.0.0.1 port=3033 
```

这是我的 lighttpd conf：

```
 server.modules = (
    "mod_access",
    "mod_alias",
    "mod_compress",
    "mod_redirect",
        "mod_rewrite",
        "mod_fastcgi",
        "mod_accesslog",
)

server.document-root        = "/var/www"
server.upload-dirs          = ( "/var/cache/lighttpd/uploads" )
server.errorlog             = "/var/log/lighttpd/error.log"
server.pid-file             = "/var/run/lighttpd.pid"
server.username             = "www-data"
server.groupname            = "www-data"
accesslog.filename           = "/var/log/lighttpd/access.log" 

debug.log-request-header = "enable"
debug.log-response-header = "enable"
debug.log-file-not-found = "enable"
debug.log-request-handling = "enable"
debug.log-timeouts = "enable"
debug.log-ssl-noise = "enable"
debug.log-condition-cache-handling = "enable"
debug.log-condition-handling = "enable"

fastcgi.server = (
    "/finderauto.fcgi" => (
        "main" => (
            # Use host / port instead of socket for TCP fastcgi
            "host" => "127.0.0.1",
            "port" => 3033,
            #"socket" => "/home/finderadmin/finderauto.sock",
            "check-local" => "disable",
            "fix-root-scriptname" => "enable",
        )
    ),
)
alias.url = (
    "/media" => "/home/user/django/contrib/admin/media/",
)

url.rewrite-once = (
    "^(/media.*)$" => "$1",
    "^/favicon\.ico$" => "/media/favicon.ico",
    "^(/.*)$" => "/finderauto.fcgi$1",
)

index-file.names            = ( "index.php", "index.html",
                                "index.htm", "default.htm",
                               " index.lighttpd.html" )

url.access-deny             = ( "~", ".inc" )

static-file.exclude-extensions = ( ".php", ".pl", ".fcgi" )

## Use ipv6 if available
#include_shell "/usr/share/lighttpd/use-ipv6.pl"

dir-listing.encoding        = "utf-8"
server.dir-listing          = "enable"

compress.cache-dir          = "/var/cache/lighttpd/compress/"
compress.filetype           = ( "application/x-javascript", "text/css", "text/html", "text/plain" )

include_shell "/usr/share/lighttpd/create-mime.assign.pl"
include_shell "/usr/share/lighttpd/include-conf-enabled.pl" 
```

如果你们中的任何人可以帮助我找出我失去这 3 或 4 秒的地方。我将不胜感激。

更新：还有一个信息。我激活了 fastcgi 日志，并且在以下两个 fcgi 日志之间出现了 3 秒的延迟：

```
2012-12-01 18:18:12: (mod_fastcgi.c.3636) handling it in mod_fastcgi 
2012-12-01 18:18:12: (response.c.470) -- before doc_root 
2012-12-01 18:18:12: (response.c.471) Doc-Root     : /var/www 
2012-12-01 18:18:12: (response.c.472) Rel-Path     : /finderauto.fcgi 
2012-12-01 18:18:12: (response.c.473) Path         :  
2012-12-01 18:18:12: (response.c.521) -- after doc_root 
2012-12-01 18:18:12: (response.c.522) Doc-Root     : /var/www 
2012-12-01 18:18:12: (response.c.523) Rel-Path     : /finderauto.fcgi 
2012-12-01 18:18:12: (response.c.524) Path         : /var/www/finderauto.fcgi 
2012-12-01 18:18:12: (response.c.541) -- logical -> physical 
2012-12-01 18:18:12: (response.c.542) Doc-Root     : /var/www 
2012-12-01 18:18:12: (response.c.543) Rel-Path     : /finderauto.fcgi 
2012-12-01 18:18:12: (response.c.544) Path         : /var/www/finderauto.fcgi 
2012-12-01 18:18:12: (mod_fastcgi.c.3061) got proc: pid: 0 socket: tcp:127.0.0.1:3033 load: 1 
```

也许它与 fastcgi 配置相关联？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T15:23:40.473

您是否有可能在您的网站上没有太多活动？我认为在下一个请求之前将 python 解释器从内存中删除。您是否有足够的 RAM 将所有软件保存在内存中？是否有其他正在运行的任务可能会将 python 挤出内存 - 可能只是维护或邮件服务器？

# c# - 在 WCF 场景中回调其他客户端

> ID：13658360
> 
> 赞同：2
> 
> 时间：2012-12-01T10:07:17.283
> 
> 标签：c#, wcf, callback, client

我正在使用 C# 中的 WCF 制作多人游戏。有2个客户端和一个服务器。

我的问题是如何实现以下功能：

ClientA 调用服务器和服务器调用 ClientB 作为回调？可能吗？

我想要做的是当 ClientA 向服务器发送消息时，服务器将其作为回调或任何可能的方式传递给 ClientB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:12:38.700

> ClientA 调用服务器和服务器调用 ClientB 作为回调？可能吗？

是的。它是通过编程完成的。

A 获取消息并确定将其转发到何处。所有客户端都通过双向通道连接到服务器，因此服务器可以将消息转发给 B。

# html - 菜单中的Wordpress自定义css以在有子菜单时显示图像

> ID：13658361
> 
> 赞同：0
> 
> 时间：2012-12-01T10:07:33.823
> 
> 标签：html, css, wordpress

在 wordpress 中，我只是在开发一个主题。在菜单中，我希望我的菜单应该与[http://www.usps.com](http://www.usps.com)完全一样。我已经完成了菜单的所有 CSS。但我有一点被打动了。在参考菜单中，您可以看到所有菜单项都有一个箭头标记。但就我而言，我想要一点不同。我想什么时候会有一个子菜单，那么只有箭头会显示，否则不会有箭头标记。有人可以告诉我该怎么做吗？任何帮助和建议都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:57:03.893

在这种情况下，您必须使用 css 来定位元素，这意味着您需要显示箭头图像，您必须用 css 编写，或者您也可以在下面的链接中使用这个 dd 平滑菜单，它是免费且可下载的，并且非常易于使用 [http： //www.dynamicdrive.com/dynamicindex1/ddsmoothmenu.htm](http://www.dynamicdrive.com/dynamicindex1/ddsmoothmenu.htm)

# java - android SQLite中不同类型的变量

> ID：13658366
> 
> 赞同：0
> 
> 时间：2012-12-01T10:08:07.193
> 
> 标签：java, android, sqlite

我有：

```
public void onCreate(SQLiteDatabase db) {
        String sql=String.format(
                "create table %s"+"(%s int primary key, %s int, %s text, %s int, %s text)",
                TABLE, Column_ID, Column_Descreption, Column_Price, Column_Photo_URL);

        db.execSQL(sql);
    } 
```

**我的问题是：除了int**和**text**还有其他类型吗？因为我需要存储布尔值和双精度值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T10:18:23.683

为了快速入门，请查看此讨论：[INT、INTEGER、SMALLINT 和 TINYINT 等相关 SQLite 数据类型有什么区别？](https://stackoverflow.com/questions/2761563/sqlite-data-types)

然后去这篇文章：[http ://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

很快，java就用 Sqlite 术语`double`调用了。`real`其他细节在我提到的资源中有所描述。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T10:18:39.870

正如您在此处看到的[SQLite 数据类型](http://www.sqlite.org/datatype3.html)，布尔值或双精度值不存在。为了存储您必须使用的类型或字符串值或整数值（仅用于模拟布尔值。0 为假，1 为真）或浮点值的 REAL 值

# linux - 我们可以使用除正斜杠 (/) 以外的其他字符在 linux 中的目录之间移动吗？

> ID：13658368
> 
> 赞同：1
> 
> 时间：2012-12-01T10:08:51.263
> 
> 标签：linux

在 Linux 中，我们可以使用除正斜杠之外的其他字符吗`/`？

我不想`/`用于在文件夹之间移动。我只是在做一些脚本实验，所以很想知道。

例如，代替`cd ../../`我可以使用`cd ..-..-`文件名可以具有的任何其他字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T10:16:42.640

这`/`不是操作系统的人工制品，我会说，它是解释者同意的符号。因此，您有两种选择来替换它：

*   重建你的命令解释器（例如 bash），也许你还必须重建文件系统调用，实际上并不确定。
*   围绕文件系统命令创建包装器`cd`，例如通过使用别名定义。这些可以替换您建议的“替代等级字符”。

但请注意，如果该字符包含在普通文件或文件夹名称中，则必须转义该字符。

哦，还有另一种选择：

*   您还可以创建一种字体，为字符显示一些不同的象形图`/`。这样你仍然*使用*那个字符，但它看起来完全不同。

一只手...

*   您可以执行`powershell`in `wine`，然后您可以使用 MS-Windows 样式的反斜杠 ( `\`) 而不是普通的正斜杠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T10:39:33.083

根据[Posix 定义](http://pubs.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap03.html#tag_03_266) ，路径名由可选的起始斜杠组成，后跟零个或多个用斜杠分隔的文件名。正如其他人所说，可以编写一个脚本来转义斜杠并将其他字符转换为斜杠，但 linux 默认情况下不提供这样做的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T10:16:09.980

恐怕不是我所知道的。你可以写一些像下面这样的别名来避免繁琐的类型。

```
cd..='cd ..'
cd...='cd ../..'
cd....='cd ../../..'
cd.....='cd ../../../..' 
```

# java - 具有最大行数的 Java JXL 异常

> ID：13658369
> 
> 赞同：3
> 
> 时间：2012-12-01T10:09:08.410
> 
> 标签：java, jxl

我正在从包含 127923 条记录的向量创建一个 excel 表，当我尝试输入记录时，我遇到了以下异常。

```
jxl.write.biff.RowsExceededException: The maximum number of rows permitted on a worksheet been exceeded
    at jxl.write.biff.WritableSheetImpl.getRowRecord(WritableSheetImpl.java:1214)
    at jxl.write.biff.WritableSheetImpl.addCell(WritableSheetImpl.java:1151)
    at com.ibm.database.excel.WriteExcel.addLabel(WriteExcel.java:176)
    at com.ibm.database.excel.WriteExcel.write(WriteExcel.java:76)
    at com.ibm.database.excel.FileGenerator.generateExcel(FileGenerator.java:13)
    at com.ibm.database.taxoreader.TaxonomyReader.main(TaxonomyReader.java:46) 
```

我知道，因为 excel 工作表不允许超过 65536 条记录，但我的代码每次达到 60000 标记时都试图创建一个新工作表，但它不起作用。任何人都可以建议我我做错了什么。这是我的代码。

```
public void write (Vector list) throws IOException, WriteException{
    int k=0,row=0,column=0;
    WritableFont times10pt = new WritableFont(WritableFont.TIMES, 10);
    // Define the cell format
    times = new WritableCellFormat(times10pt);
    // Lets automatically wrap the cells
    times.setWrap(true);
    TaxonomyBean bean= null;
    File file = new File("Test.xls");
    WorkbookSettings wbSettings = new WorkbookSettings();
    wbSettings.setLocale(new Locale("en", "EN"));
    WritableWorkbook workbook = Workbook.createWorkbook(file, wbSettings);  
    WritableSheet sheet= workbook.createSheet(""+k,k);
    for(int i=0,j=0;i<list.size();i++,j++){
        if(j==60000){
         k=k+1;
         workbook.createSheet(""+k, k);
         j=0;
        }
        sheet = workbook.getSheet(k);
        bean=(TaxonomyBean)list.elementAt(i);
        column=0;row=i;
        System.out.println("adding "+bean.getDescription()+" at "+j+" in "+k+" and i "+i);
        addLabel(sheet, column, row, bean.getDescription());
        column++;
        addLabel(sheet, column, row, bean.getTaxonomyDescription());
    }
    workbook.write();
    workbook.close();

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T10:15:10.353

您可以将循环代码替换为：

```
for(int i = 0;i < list.size();i++)
{
    if(i % 60000 == 0)
    {
        k++;
        workbook.createSheet("" + k,k);
    }

    sheet = workbook.getSheet(k);
    bean = (TaxonomyBean)list.elementAt(i);

    column = 0;
    row = i % 60000;

    addLabel(sheet, column, row, bean.getDescription());
    column++;
    addLabel(sheet, column, row, bean.getTaxonomyDescription());
} 
```

# javascript - jquery中的这个动画可以在没有jquery的JS中完成并且仍然保持简单吗？

> ID：13658370
> 
> 赞同：2
> 
> 时间：2012-12-01T10:09:13.037
> 
> 标签：javascript, animation, mouse

我发现这个“div 跟随鼠标”动画： [JSFiddle](http://jsfiddle.net/88526/1/)属于发布在的答案：[How to animate following mouse in jquery](https://stackoverflow.com/questions/4847726/how-to-animate-following-the-mouse-in-jquery)。

```
var mouseX = 0, mouseY = 0;
$(document).mousemove(function(e){
   mouseX = e.pageX;
   mouseY = e.pageY; 
});

// cache the selector
var follower = $("#follower");
var xp = 0, yp = 0;
var loop = setInterval(function(){
// change 12 to alter damping higher is slower
xp += (mouseX - xp) / 12;
yp += (mouseY - yp) / 12;
follower.css({left:xp, top:yp});

}, 30); 
```

​</p>

我对内部工作原理非常感兴趣，并试图了解代码在做什么。我目前正在学习 javascript，并尝试复制“点对点”动画。找到了这个：[Point to point animation algorithm](https://stackoverflow.com/questions/1057359/help-me-improve-my-basic-point-to-point-move-animation-algorithm)，但是感觉原海报的代码很长而且重复。

我目前的 javascript 基础水平是完全理解 jQuery 版本的障碍（我仍然没有进入 jQuery 领域）。然而，我认为在 javascript 中做这种动画是可能的，但我能想到的唯一方法是使用类似于“点对点”链接的代码。

可以用像 jQuery 版本一样短的代码来完成这样的事情吗？或者只做javascript需要更长的例程？

感谢您提出的任何建议或意见！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T10:19:16.373

> 可以用像 jQuery 版本一样短的代码来完成这样的事情吗？

在这种情况下，几乎可以，因为所做的事情相当简单，并且只使用了少量的 jQuery 功能。具体来说：

*   `mousemove`它将事件挂钩`document`，这可以很容易地使用[`addEventListener`](http://www.w3.org/TR/DOM-Level-3-Events/#events-EventTarget-addEventListener)（或`attachEvent`旧版本的 IE）来完成。

*   `id`它通过( )定位一个元素`$("#follower")`，这可以很容易地用[`getElementById`](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-getElBId).

*   它通过 jQuery 的函数设置元素的`left`and 。这可以通过在元素的[property](http://www.w3.org/TR/html5/global-attributes.html#dom-style)上设置和属性来轻松完成。`top``css``left``top`[`style`](http://www.w3.org/TR/html5/global-attributes.html#dom-style)

把这一切放在一起：[小提琴](http://jsfiddle.net/88526/1480/)

```
var mouseX = 0, mouseY = 0;
if (document.addEventListener) {
    document.addEventListener('mousemove', mouseMoveHandler, false);
}
else if (document.attachEvent) {
    document.attachEvent('onmousemove', mouseMoveHandler);
}
else {
    document.onmousemove = function(event) {
        mouseMoveHandler(event || window.event);
    };
}

function mouseMoveHandler(e) {
   mouseX = e.pageX;
   mouseY = e.pageY; 
}

// cache the element
var follower = document.getElementById("follower");
var xp = 0, yp = 0;
var loop = setInterval(function(){
// change 12 to alter damping higher is slower
xp += (mouseX - xp) / 12;
yp += (mouseY - yp) / 12;
follower.style.left = xp + "px";
follower.style.top  = yp + "px";

}, 30); 
```

如您所见，最大的问题是以一种与其他人很好玩的方式挂钩事件。尽管您*可以*只使用该`document.onmousemove`版本，但这会破坏 上的任何其他`mousemove`处理程序`document`，这就是我们首先寻找`addEventListener`or的原因`attachEvent`。

一些方便的参考，大致按时间顺序排列（后面的更新/取代/添加到早期的）：

*   [DOM2 核心](http://www.w3.org/TR/DOM-Level-2-Core/)
*   [DOM2 HTML](http://www.w3.org/TR/DOM-Level-2-HTML/)
*   [DOM2 事件](http://www.w3.org/TR/DOM-Level-2-Events/)
*   [DOM3 核心](http://www.w3.org/TR/DOM-Level-3-Core/)
*   [DOM3 事件](http://www.w3.org/TR/DOM-Level-3-Events/)
*   [其他 DOM 规范](http://www.w3.org/DOM/DOMTR)
*   [HTML5 Web 应用程序 API](http://www.w3.org/TR/html5/webappapis.html#webappapis)

这些都不应该说你不能使用像 jQuery 这样的好库，有几个很好的理由（上面的事件只是一个例子）。但是最好还是了解基础知识，即使您使用库来避免不得不处理这些基础知识。

# json - 在 JSON 中使用没有键的 Handlebars #each 助手

> ID：13658371
> 
> 赞同：1
> 
> 时间：2012-12-01T10:09:18.063
> 
> 标签：json, handlebars.js

我正在使用 PHP 文件从数据库中提取数据并将其作为 JSON 返回。然后我想使用 JSON 数据作为 Handlebars 模板的上下文。我的问题是我似乎无法让 Handlebars 的“{{#each}}”帮助程序与 PHP 文件返回的 JSON 一起工作。

以下是返回的 JSON 示例：

```
[
    {
        "id": "3",
        "type": "Abseiling",
        "title": "Abseiling Adventure",
        "location": "Glenrock State Conservation Area",
        "date": "2012-12-18 00:00:00",
        "length": "2 hours",
        "price": "50"
    },
    {
        "id": "1",
        "type": "Abseiling",
        "title": null,
        "location": "Glenrock State Conservation Area",
        "date": "2013-02-10 00:00:00",
        "length": "3 hours",
        "price": "70"
    }
] 
```

这是我的把手模板：

```
{{#each}}
<p>{{location}}</p>
{{/each}} 
```

我也试过：

```
{{#each}}
<p>{{this.location}}</p>
{{/each}} 
```

我对为什么这不起作用的怀疑是#each 助手不能像我尝试的那样运行，而是必须像这样调用：{{#each something}}。如果是这种情况，是否有任何简单的方法可以向 JSON 数据添加密钥，使其采用以下形式：

```
something: [
    {
        ...
    },
    {
        ...
    }
] 
```

如果我的怀疑是错误的，我如何将#each 助手与我当前提供的 JSON 一起用作模板上下文？

**更新：**找到了解决这个问题的方法，我只需要更改模板调用

```
jQuery(".events").html(Handlebars.templates['Events'](data)); 
```

至

```
jQuery(".events").html(Handlebars.templates['Events']({events: data})); 
```

这意味着我可以使用 {{#each events}}。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-22T15:08:09.590

我遇到了同样的问题，并使用“ **this** ”关键字解决了这个问题。

```
{{#each this}}
  <p>{{this.location}}</p>
{{/each}} 
```

# c++ - ifstream 用于破坏散列字符串

> ID：13658376
> 
> 赞同：2
> 
> 时间：2012-12-01T10:11:22.633
> 
> 标签：c++, arrays, ifstream

您好我想使用 ifstream 读取散列值的 txt 文件并将值存储在数组中。

128 位散列字符串 另一个 128 位散列字符串等

这是我到目前为止所拥有的：

```
string line;
ifstream myfile ("username.txt");
vector<string> data_arr;
int i = 0;

if (myfile.is_open())
    {
    while (myfile.good())
    {
        getline(myfile, line);          
        data_arr.push_back(line);
        i++;
    }
    myfile.close();
  }
else cout << "Unable to open file"; 
```

我怎样才能使数组的每个值都是 16 字节长？我猜 getline 对我不起作用，因为散列值可能使换行标记成为字符的一部分。

无论如何，我希望这是有道理的，（可能不是）因为我是在凌晨 5 点输入的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:41:28.513

如果哈希是没有换行符或空格的存储，您可以尝试以下操作：

```
std::vector<char> hash(16);
myfile.read(&hash[0], 16);
data_arr.push_back(std::string(hash.begin(), hash.end()); 
```

您还需要检查读取是否成功。

# android - Android rawQuery 在两种情况下

> ID：13658390
> 
> 赞同：0
> 
> 时间：2012-12-01T10:12:58.413
> 
> 标签：android, sqlite, count

我对如何`AND`在 rawQuery 中放置条件有疑问。我想`getCount WHERE SQLiteHelper.product_FId =listId AND SQLiteHelper.product_Status==1`...我应该在哪里添加另一个条件`WHERE SQLiteHelper.product_Status==1` ？

```
public int getCountComplePro(String listId) {
        // TODO Auto-generated method stub
        String[] args = { listId };
        int x = 0;
        Cursor cur=database.rawQuery("SELECT * FROM "
                + SQLiteHelper.productTable + " WHERE "
                + SQLiteHelper.product_FId +"=?" ,args);

       x=cur.getCount(); 
```

}

```
 cur.close();
        return x; 
```

希望任何人都可以指导我解决这个问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:20:43.473

```
String[] args = { listId };
Cursor cur=database.rawQuery("SELECT * FROM "
                + SQLiteHelper.productTable + " WHERE "
                + SQLiteHelper.product_FId +"=?"
                + "AND "+SQLiteHelper.product_Status+ "=1",args); 
```

这不应该做吗？

# facebook - Facebook 从 iOS6 登录到本机模式

> ID：13658395
> 
> 赞同：0
> 
> 时间：2012-12-01T10:13:15.330
> 
> 标签：facebook, login, permissions, ios6

我的新问题（！！）如果我将我的帐户设置为本机模式 [ios6]（从设置> Facebook）并且不登录，我的应用程序会不断询问我是否允许在 Facebook 上发布！！！！相反，如果我没有设置本机登录，我的应用程序会转到我的 Facebook 应用程序请求权限并且一切正常......

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T15:25:23.120

哎呀...我找到了答案！！！我需要在 Facebook 上更好地配置我的应用程序。我需要将 Bundle ID 设置为“Native app”设置！！！

现在进入 IOS 的常规设置，我可以看到我的 (xCode) 应用程序！

好....不过谢谢！！！

# windows - Windows 7 上 LoadIconWithScaleDown 的 GetProcAddress 失败

> ID：13658398
> 
> 赞同：0
> 
> 时间：2012-12-01T10:13:53.393
> 
> 标签：windows, winapi, windows-7, loadlibrary, getprocaddress

我正在使用以下代码动态链接到[LoadIconWithScaleDown](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775703%28v=vs.85%29.aspx) API，以便我的代码能够在 Windows XP 上运行：

```
HRESULT (WINAPI *pfnLoadIconWithScaleDown)(HINSTANCE, PCWSTR, int, int, HICON *);

HMODULE hComCtrl32 = LoadLibrary(_T("Comctl32.dll"));
if(hComCtrl32)
{
    (FARPROC&)pfnLoadIconWithScaleDown = GetProcAddress(hComCtrl32, "LoadIconWithScaleDownW");
} 
```

我在 Windows 7 上尝试此代码，但“pfnLoadIconWithScaleDown”始终为 NULL。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T12:48:04.290

没有 ASCII ( `A`) 和 UNICODE ( `W`) 版本，[`LoadIconWithScaleDown()`](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb775703%28v=vs.85%29.aspx)因此将`GetProcAddress()`调用更改为：

```
pfnLoadIconWithScaleDown = GetProcAddress(hComCtrl32, "LoadIconWithScaleDown"); 
```

# asp.net - 如何解决“链接服务器“（null）”的 OLE DB 提供程序“Microsoft.ACE.OLEDB.12.0”不包含表“Sheet1$”'错误？

> ID：13658399
> 
> 赞同：0
> 
> 时间：2012-12-01T10:14:24.297
> 
> 标签：asp.net, file-upload, oledbconnection

我在我的 .net 应用程序中使用 excel 数据导入到 sql 表，但是在保存数据时出现以下错误：

我的代码：

> ```
> protected void btnSave_Click(object sender, EventArgs e)
> {
>     string FileName = lblFileName.Text;
>     string Extension = Path.GetExtension(FileName);
>     string FolderPath = Server.MapPath (ConfigurationManager.AppSettings["FolderPath"]);
>     string CommandText = "";
>     switch (Extension)
>     {
>         case ".xls": //Excel 97-03
>             CommandText = "spx_ImportFromExcel03";
>             break;
>         case ".xlsx": //Excel 07
>             CommandText = "spx_ImportFromExcel07";
>             break;
>     }
>     //Read Excel Sheet using Stored Procedure
>     //And import the data into Database Table
>     String strConnString = ConfigurationManager.ConnectionStrings["conString"].ConnectionString;
>     SqlConnection con = new SqlConnection(strConnString);
>     SqlCommand cmd = new SqlCommand();
>     cmd.CommandType = CommandType.StoredProcedure;
>     cmd.CommandText = CommandText;
>     cmd.Parameters.Add("@SheetName", SqlDbType.VarChar).Value = ddlSheets.SelectedItem.Text;
>     cmd.Parameters.Add("@FilePath", SqlDbType.VarChar).Value = FolderPath + FileName;
>     cmd.Parameters.Add("@HDR", SqlDbType.VarChar).Value = rbHDR.SelectedItem.Text;
>     cmd.Parameters.Add("@TableName", SqlDbType.VarChar).Value = txtTable.Text;   
>     cmd.Connection = con;
>     try
>     {
>         con.Open();
>         object count = cmd.ExecuteNonQuery();
>         lblMessage.ForeColor = System.Drawing.Color.Green;
>         lblMessage.Text = count.ToString() + " records inserted.";  
>     }
>     catch (Exception ex)
>     {
>         lblMessage.ForeColor = System.Drawing.Color.Red;     
>         lblMessage.Text = ex.Message;  
>     }
>     finally
>     {
>         con.Close();
>         con.Dispose();
>         Panel1.Visible = true;
>         Panel2.Visible = false; 
> ```

```
 }
} 
```

我在 web.config 中使用 excel 格式的连接字符串：

```
<connectionStrings>
<add name="Excel03ConString" connectionString="Provider=Microsoft.Jet.OLEDB.4.0;Data Source={0};Extended Properties='Excel 8.0;HDR={1}'"/>
    <add name="Excel07ConString" connectionString="Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties='Excel 12.0;HDR={1}'"/> 
```

我无法弄清楚这个错误。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:15:54.210

要在 c# 代码中读取 excel 文件，您应该有 microsoft oledb 提供程序。Microsoft.ACE.OLEDB.12.0 提供程序用于读取具有 xlsx 格式的文件，Microsoft.Jet.OLEDB.4.0 用于 xls 格式文件。用于读取 excel 的 C# 代码文件如下所示。

```
using System.Data.OleDb;

   OleDbConnection con = new OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + Server.MapPath("Filename.xls") + ";Extended Properties=Excel 8.0"); 
            OleDbCommand cmd = new OleDbCommand("select * from [Sheet1$]", con);
            con.Open(); 
            OleDbDataReader dr = cmd.ExecuteReader(); 
            string col0 = ""; 
            string col1 = ""; 
            string col2 = ""; 
            while (dr.Read()) 
            { 
                col0 =Convert.ToString(dr[ 0]); 
                col1 =Convert.ToString(dr[ 0]); 
                col2 =Convert.ToString(dr[ 0]); 
                /*******************************
               Write Statements to Insert values of each rows into table 
                *********************************/
            } 
                con.Close(); 
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T10:19:13.470

这是将数据从excel导入数据库的好文章。[将 Excel 导入 Sql](http://www.developer2blog.com/post/2012/04/20/Import-Data-From-Excel-Sheet.aspx) 按照那里的所有说明进行操作，您将成功。

# c# - 将列表传递给任务

> ID：13658406
> 
> 赞同：5
> 
> 时间：2012-12-01T10:15:23.583
> 
> 标签：c#, multithreading, c#-4.0, task-parallel-library

我是 C# 和线程的新手，这是一个非常简单的问题，但我真的卡住了。我确实在此站点上进行了搜索，但找不到与我的情况类似的答案：

我有一个方法说 Parent() 并且我创建一个类型化列表，每次我将它传递给一个任务。我有什么时候清除列表和释放内存的问题，因为它一直在增长。我尝试在任务结束时清除列表，如果我使用 Parent 方法清除列表，则线程中的列表为空。

有人可以帮助我吗？我知道这是一个非常简单的问题，但希望能得到帮助。

```
 public void Parent()
    {
     List<MyType> list = new List<MyType>();
     for (int i = 0; i< N; i++)
     {
        list.Add(new MyType {Var = "blah"});

      if ( i% 10 == 0) //every tentth time we send a task out tou a thread
      {
       Task.Factory.StartNew(() => WriteToDB(new List<MyType>(list))); 
       //here I am              sending a new instance of the list

        //Task.Factory.StartNew(() => WriteToDB((list))); 
        //here I am sending same instance

        list.Clear();

         //if I clear here the list sent to the WriteToDB is empty
        //if I do not, the memory keeps growing up and crashes the app 
      }

      private void WriteToDB(List<MyType> list)
      {
       //do some calculations with the list 
       //insert into db 
       list.Clear(); 
      }
     }
   } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T10:39:17.773

你有一个关闭错误。

在新的开始`() => WriteToDB(new List<MyType>(list))`之前不会执行lambda 。`Task`这有时会在您致电`list.Clear()`.

修复方法是在 lambda 之外捕获列表的副本：

```
var chunk = new List<MyType>(list);
Task.Factory.StartNew(() => WriteToDB(chunk));

list.Clear(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T10:34:56.117

只需在启动线程之前创建新列表：

```
var newList = new List<MyType>(list);
Task.Factory.StartNew(() => WriteToDB(newList)); 
list.Clear(); 
```

这样，新列表在新线程开始之前就准备好了，因此立即清除原始列表是安全的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T10:56:32.053

```
if ( i% 10 == 0) //every tentth time we send a task out tou a thread
{
   // clone your list before starting the task
   var listToProcess = new List<MyType>(list);
   list.Clear();

   Task.Factory.StartNew(() => WriteToDB(listToProcess)); 
} 
```

# r - 如何将预制的函数列表传递给演员

> ID：13658408
> 
> 赞同：0
> 
> 时间：2012-12-01T10:15:32.223
> 
> 标签：r, reshape2

`cast`，从`reshape2`包中，如果直接在调用中传递，可以处理一堆函数。例如：

```
library(reshape2)

d <- data.frame(variable="variable",value=rnorm(100))
cast(d, variable ~ ., c(mean,sd,max,min)) 
```

但是，如果您尝试事先构建函数列表，这将不起作用。例如：

```
summary.fun <- c(mean,sd,max,min)
cast(d, variable ~., summary.fun) 
```

我查看了处理这种特殊行为的 cast 代码，老实说，我不知道它在做什么：

```
if (length(fun.aggregate) > 1) 
        fun.aggregate <- do.call(funstofun, as.list(match.call()[[4]])[-1]) 
```

有没有办法将预先制作的函数列表作为变量传递给`cast()`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T10:46:13.153

您的函数必须使用输入参数。该函数`cast`自动将值作为第一个参数传递给函数。此外，您必须告诉 R 这`summary.fun`是一个使用`<- function()`.

```
summary.fun <- function(x) list(mean(x), sd(x), max(x), min(x)) 
```

试试这个功能`cast`。

```
library(reshape)

d <- data.frame(variable="variable",value=rnorm(100))

cast(d, variable ~ ., summary.fun) 
```

正如@handley 指出的那样，这不适用于包中的`cast`功能`reshape2`。你应该看看`dcast`and `acast`。

# javascript - 如何将字符串滑到左侧，用数组中的下一个元素替换文本，然后滑回原位？

> ID：13658411
> 
> 赞同：1
> 
> 时间：2012-12-01T10:16:04.080
> 
> 标签：javascript, jquery, ajax

这是[JSFiddle](http://jsfiddle.net/hBSdf/)上的代码。

我需要一个句子向左滑出（看不见），将文本更改为故事中的下一行（数组中的下一个元素），然后向右滑回原位。

此外，我需要能够重复整个过程，但我希望这只是`i`在循环中重置的问题。

你能帮助我吗？

HTML：

```
​&lt;p class="wrap"><span>Foo</span></p>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

JS：

```
var stringArr = ['One','Two','Three'],
    i = 0,
    t = 2000;

for ( i ; i < 3 ; i++) {
    $('.wrap span').delay(t).animate({'left': '+=200px'}, 'slow');
    $('.wrap span').text(stringArr[i]).appendTo($('.wrap span'));
    $('.wrap span').animate({'right': '+=200px'}, 'slow');
}​ 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T11:32:05.190

```
var stringArr = ['One','Two','Three'],
    i = 0,
    t = 2000,
    initialDelay = 150,
    container = $(".wrap span"),
    len = stringArr.length,
    changer = function() {
        var step = (++i)%len;

        container.animate({'left': '+=200px'}, 'slow', function(){
            container.text(stringArr[step]).animate({left: '-=200px'}, 'slow');
        })

    },
    interval, stop = function(){
       interval = interval !== undefined && clearInterval(interval); 
    }, start = function() {
        stop();
        interval = setInterval(changer, t);
    };

    setTimeout(function() {
        changer();
        start();
    }, initialDelay); 
```

​</p>

1.  您需要指定`position`span 否则`left`属性不会影响它。
2.  您不能将节点附加到自身。`$("selector").appendTo($("selector"))`抛出 dom 异常。
3.  您不应该同时为左右属性设置动画。它会拉伸你的元素。

[http://jsfiddle.net/tarabyte/hBSdf/10/](http://jsfiddle.net/tarabyte/hBSdf/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T11:41:24.590

您可以简单地通过动画`left`定位容器的属性来实现它：

```
<div class="wrapper">
  <div id="slider"></div>
</div>​ 
```

使用以下 CSS（`position: relative`滑块注意事项）：

```
.wrapper {
    background-color: #ffbbbb;
    width: 200px;
}

#slider {
    width: 100%;
    position: relative;
    left: -100%;
} 
```

这是[我在小提琴中使用的脚本](http://jsfiddle.net/2x3SG/1/)：

```
var strings = "Lorem ipsum dolor sit amen".split(" "),
    offset = 0,
    delay = 1500,
    slider = $("#slider");

var swap = function(element, strings, offset) {
    element.text(strings[(offset++) % strings.length]);
    element.animate({"left": "0%"});
    element.delay(delay).animate({"left": "-100%"});
    element.queue(function(next) {
        swap(element, strings, offset);
        next();
    });
}

swap(slider, strings, offset); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T11:20:16.870

仍在玩它，但有几件事可以让你开始。

jQuery 中的[animate()](http://api.jquery.com/animate/)函数需要一个 CSS 映射，特别是一个`position`字段，否则它不会真正起作用。你可以自己看看。我真的不知道为什么，如果有人想介入并解释为什么请这样做 ><... 在文档中更具体地说：

> 唯一需要的参数是 CSS 属性的映射。此映射类似于可以发送到 .css() 方法的映射，只是属性范围更受限制。

您想要的另一个想法是使用回调，以便在您的动画完成后，它可以更改单词，然后可能将其移回原位。我不认为这个`delay`功能是错误的，但它的动态性要低得多，如果你要写一本书，如果程序只知道在完成某事后做某事，那就太好了。[这](http://jsfiddle.net/2uxSX/)是一个小提琴。也许当我醒来时，我会添加更多/编辑我的答案，但只是让你开始/思考的东西:)

# java - javac -cp 参数的错误“javac：找不到文件：”

> ID：13658419
> 
> 赞同：1
> 
> 时间：2012-12-01T10:16:49.900
> 
> 标签：java, compilation, classpath, javac

我的问题是关于基本的 java 命令“javac”之一。我的桌面上有一个“.java”文件。我已经安装了 JDK 7 并将路径变量添加到环境变量中。这是“环境变量”的屏幕截图。 [http://s13.postimage.org/n0oc89gp3/Untitled.png](http://s13.postimage.org/n0oc89gp3/Untitled.png)

当我在 C:\Users\JOXWH\Desktop 工作时没有问题。例如；如果我在这里尝试此代码`javac JavaApplication2.java`。我的桌面上有 .class 文件。但是，如果我尝试使用带有 -cp 参数的另一个目录中的 javac（例如`javac -cp C:\Users\JOXWH\Desktop JavaApplication2.java`），我会遇到这样的错误：http: [//postimage.org/image/4aps9ntlr/](http://postimage.org/image/4aps9ntlr/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:19:15.033

不需要-cp`javac C:\Users\JOXWH\Desktop JavaApplication2.java`

将工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T10:37:35.700

`-cp`告诉编译器在哪里查找您正在编译的文件所依赖的*其他*类，而不是在哪里查找 java 源文件本身。`.java`您需要完整提供 java 文件的适当路径。

除了最微不足道的情况外，在所有情况下，源文件位置和所需的类位置都会不同，例如

```
javac -cp classes;lib\* -d classes src\com\example\MyClass.java 
```

将从下获取一个`.java`文件，`src`该文件依赖于下`classes`的类和 jar 文件中的类`lib`，编译它，并将生成的类文件放在`classes`与类的包名称匹配的目录中。

# android - 优先接收短信的应用

> ID：13658420
> 
> 赞同：1
> 
> 时间：2012-12-01T10:17:14.847
> 
> 标签：android, sms, broadcastreceiver

我有一个监听短信的应用程序，如果短信有某些要求，它会显示在我的应用程序中，问题是这个应用程序只有在你没有安装任何启动器或短信应用程序的情况下才能工作。

我在一些朋友的手机上测试了这个应用程序，如果他们有 GO luncher 或 GOMail 或任何监听短信的应用程序，那么我的应用程序将不会显示短信。

我如何确定优先级，以便我的应用程序显示我想要的短信，而不是 GoLuncher 或其他程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:50:22.677

我发现了 Matt Harris 发布的解决方法，他说 GoSms 的优先级设置为 2147483647，这是整数可以具有的最大值！一种解决方法是使用 ContentObserver 来观察收件箱，而不是使用广播。

更多在这里找到：[Android 应用程序不响应 SMS 接收器](https://stackoverflow.com/questions/8990642/android-app-not-responding-the-sms-receiver?rq=1)

# search - 使用 sed 和 grep 擦除 html

> ID：13658423
> 
> 赞同：0
> 
> 时间：2012-12-01T10:17:17.887
> 
> 标签：search, sed

我有这样的代码：

```
<html>
<body>
<div>some normal html code</div>
<!--f1930e-->
some javascript code goes here...
<!--/f1930e-->

some other html....
</body>
</html> 
```

我如何删除以下部分：

```
<!--f1930e-->
some javascript code goes here...
<!--/f1930e--> 
```

使它成为：

```
<html>
<body>
<div>some normal html code</div>
some other html....
</body>
</html> 
```

我的命令是这样的：

```
grep -lr -e 'f1930e' * | xargs sed -e 's/<!--f1930e-->.*<!--\/f1930e-->//' 
```

那是行不通的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:32:28.783

[在你的shell](/questions/tagged/shell "显示标记为“外壳”的问题")中试试这个：

```
$ sed '/<!--f1930e-->/,/<!--\/f1930e-->/d' file.html
<html>
<body>
<div>some normal html code</div>

some other html....
</body>
</html> 
```

如果您想真正修改文件，请将`-i`开关添加到[sed](/questions/tagged/sed "显示标记为“sed”的问题")。

# nstextview - 将光标设置为指向文本视图的手

> ID：13658424
> 
> 赞同：5
> 
> 时间：2012-12-01T10:17:21.827
> 
> 标签：nstextview, mouse-cursor, nstrackingarea

有没有办法在不继承 NSTextView 的情况下将光标设置为指向文本视图的指针？

我阅读了很多关于 NSTrackingAreas 的内容，测试了很多示例，设置了不同的跟踪选项并实现了不同的方法，但光标仍然是 I-Beam。我读过它是 AppKit 的自动功能，那么我该如何防止呢？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T19:31:36.460

我不得不子类化。经过几个小时测试了很多方法和选项，这终于奏效了：

```
@implementation ATTextView

- (id)initWithFrame:(NSRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        _trackingArea = [[NSTrackingArea alloc]initWithRect:[self bounds] options: (NSTrackingMouseMoved | NSTrackingActiveInKeyWindow) owner:self userInfo:nil];
        [self addTrackingArea:_trackingArea];
    }
    return self;
}

- (void)mouseMoved:(NSEvent *)event
{
    if ([self isEditable]) [[NSCursor IBeamCursor] set];
    else [[NSCursor pointingHandCursor] set];
}

- (void)updateTrackingAreas {
    [super updateTrackingAreas];
    [self removeTrackingArea:_trackingArea];
    _trackingArea = [[NSTrackingArea alloc] initWithRect:[self bounds] options: (NSTrackingMouseMoved | NSTrackingActiveInKeyWindow) owner:self userInfo:nil];
    [self addTrackingArea:_trackingArea];
}
@end 
```

只是为了找到正确的例子（Cocoa 是 80% 的文档阅读和 20% 的编码）： [https://developer.apple.com/library/mac ... 0i-CH8-SW1](https://developer.apple.com/library/mac%20%E2%80%A6%200i-CH8-SW1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-08T18:27:27.627

这对我使用 Swift 3 有效：

```
class HyperlinkTextField : NSTextField {

    override func resetCursorRects() {
        discardCursorRects()
        addCursorRect(self.bounds, cursor: NSCursor.pointingHand())
    }

} 
```

# mysql - 在 MySQL 中要求 UTF-8 和正确排序国家字符是否太过分了？

> ID：13658425
> 
> 赞同：1
> 
> 时间：2012-12-01T10:17:31.813
> 
> 标签：mysql, character-encoding

我最近切换到 utf8_general_ci 因为它支持所有字符，以便其他国家的其他人可以在我的网页上写例如评论。

现在，当我尝试根据这些字符进行排序时，它不起作用。例如，它对待 ö 和 o 是一样的。它对待 å 和 a 一样。要求 UTF8 和正确排序是否太过分了？对包含 700 条记录的记录集进行排序是否会给 PHP 带来很大压力？

我怎样才能解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T10:31:28.997

您可以在排序时使用任何您想要的排序规则

```
order by some_column collate utf8_bin 
```

### [SQLFiddle 演示](http://sqlfiddle.com/#!2/f2386/4)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T10:31:09.923

如[Unicode Character Sets](http://dev.mysql.com/doc/en/charset-unicode-sets.html)下所述：

> 为了进一步说明，以下等式适用于两者`utf8_general_ci`（`utf8_unicode_ci`对于比较或搜索时的效果，请参阅[第 10.1.7.8 节，“整理效果的示例”</a>）：](http://dev.mysql.com/doc/refman/5.5/en/charset-collation-effect.html)
> 
>  [```
> Ä = A
> Ø = O
> ü = U
> 
> ```](http://dev.mysql.com/doc/refman/5.5/en/charset-collation-effect.html)

 [如果你想按*Unicode codepoint*排序，你应该使用`*xxx*_bin`排序规则：

```
ORDER BY myColumn COLLATE utf8_bin 
```

如果您想按字符串的二进制编码排序（恰好对 UTF-8 产生相同的结果），您应该使用`BINARY`：

```
ORDER BY BINARY myColumn 
```](http://dev.mysql.com/doc/refman/5.5/en/charset-collation-effect.html) 

[如果您需要其他排序，您将需要确定满足您需要的](http://dev.mysql.com/doc/refman/5.5/en/charset-collation-effect.html)[预定义排序规则](http://www.collation-charts.org/mysql60/)，或者[指定您自己的](http://dev.mysql.com/doc/en/adding-collation.html).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T10:20:53.337

您可以添加另一个字段类型 int，您可以在其中输入对记录集进行排序所需的数字（每个 firet char 对应一个数字）

无论如何，700 条记录在几微秒内用 PHP 进行排序......

# c++ - 支持 DirectX 11 库的编译器

> ID：13658428
> 
> 赞同：2
> 
> 时间：2012-12-01T10:17:48.957
> 
> 标签：c++, directx-11

Visual Studio 2010 和 2008 以外的哪些编译器支持 DirectX SDK Jun 2010？

我是初学者，我想使用 DirectX 11 进行编程，但我的互联网非常有限，只能下载少量文件 (300 MB)。

了解可用于为 DirectX 11 编程的所有编译器会很有趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T21:41:50.280

以下是实际包含 DirectX 10/11 的头文件和/或库的编译器的简短列表：

*   TDM-GCC x64 构建从 4.7 版开始附带 DirectX 10/11 标头和库：[http ://tdm-gcc.tdragon.net/](http://tdm-gcc.tdragon.net/)
*   TDM-GCC x64 build 4.6.1 附带大多数 DirectX 10/11 头文件和库，但开箱即用的 DWM API 支持有限：x86 的库丢失并且一些头文件不正确：[https ://sourceforge.net/ p/tdm-gcc/功能请求/27/](https://sourceforge.net/p/tdm-gcc/feature-requests/27/)
*   普通 Windows GCC (MinGW) 不包括 DirectX 10/11 的任何内容，但开箱即用地支持 DirectX 9 的有限部分（例如，不包括 D3DX）。
*   Orwell Dev-C++ 的 TDM-GCC 4.6.1 版本包括 DirectX 9/10/11 头文件和库。它们由 Jun 2010 SDK 提供，库被转换为 GCC .a 格式：http: [//sourceforge.net/projects/orwelldevcpp/](http://sourceforge.net/projects/orwelldevcpp/)。

实际上，任何相当现代的 Windows 编译器都应该能够编译/支持 DirectX 10/11**标头**。虽然我已经看到 GCC 3.4.2 挣扎了很多，但那个版本是古老的。可以这么说，标头是最简单的部分：只需将标头转储到适当的包含文件夹中，您的编译器就会突然支持 DirectX 10/11。

另一部分**libaries**是更难的部分。获取 x64 和 x64 库并转换为 GCC 的 .a（使用 lib2a）可能很烦人。幸运的是，TDM-GCC 之类的编译器或 Dev-C++ 之类的 IDE 不久前就开始提供这些库。同样，如果您将库的 .a 文件转储到正确的文件夹中，几乎所有最近的编译器都会突然支持 DirectX 10/11。

# php - 使用php格式化表格

> ID：13658430
> 
> 赞同：-1
> 
> 时间：2012-12-01T10:18:11.233
> 
> 标签：php, html

我无法使用 php 格式化表格，这只是我的代码的一部分

```
 echo"<th>Name:</th> <td>".$row['firstName'] . "</td> ";
    echo"<th>Last Name:</th> <td>".$row['lastName'] . "</td> "; 
```

其格式如下
名称：以色列姓氏：罗德里格斯

我希望它的格式是以下
名称：姓氏：
Israel Rodriguez

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T10:19:57.563

您搞砸了行定义，尝试像这样更改您的代码：

```
echo"<tr><th>Name:</th><th>Last Name:</th></tr>";
echo"<tr> <td>".$row['firstName'] . "</td><td>".$row['lastName'] . "</td></tr>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T10:34:00.790

您需要首先正确理解 html 表格布局。然后只是`echo`你想要的文本`php`

## HTML 表格布局

例如 - 2 列、2 行 + 标题

```
<table>
     <tr>  <!-- table Header, this row will look bold by default -->
          <th></th>
          <th></th>
     </tr>

     <!-- Normal data rows follow -->
     <tr>
          <td></td>
          <td></td>
     </tr>
     <tr>
          <td></td>
          <td></td>
     </tr>
</table> 
```

# mysql - 100,000 个条目的 mysql 性能估计

> ID：13658433
> 
> 赞同：0
> 
> 时间：2012-12-01T10:18:20.917
> 
> 标签：mysql, database, performance

我很难找到 MySql 性能的基准数据..

那里有很多网站，有数字，但它们差异很大，我不确定这是否是我所追求的..

我的问题是：

我有一个具有以下结构的表。

```
 email .. 64 bytes max
          firstname .. 24 bytes max
          lastname .. 24 bytes max
          gender .. 1 byte max
          age .. 3 bytes max
          password .. 32 bytes max 
```

假设一个完全空的表，。我需要多长时间才能生成 100,000 个这些条目（仅使用随机生成的值）并将它们插入我的数据库中。

MySql 是否插入它们，并在后台或需要时对它们进行惰性排序？

我假设所有 100,000 个条目都已添加到表中，并且所有列在完成后都可以完全排序。（这一点很关键，我需要一个估计数字，并带有一个完全排序的表）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T10:41:07.530

您的问题中可解决的部分是：

> MySql 是否插入它们，并在后台或需要时对它们进行惰性排序？

[查看 MySQL 文档14.2.9](http://dev.mysql.com/doc/refman/5.6/en/mysql-acid.html)中的此页面。[MySQL 和 ACID 模型](http://dev.mysql.com/doc/refman/5.6/en/mysql-acid.html)。任何实现 ACID 模型的数据库服务器基本上都“承诺”当你向它写入数据时，到时候控制权返回给你的代码，写入要么成功要么失败。

据我所知，索引将在记录插入数据库时​​更新。

# c# - GetFunction 返回空 luainterface

> ID：13658435
> 
> 赞同：-2
> 
> 时间：2012-12-01T10:18:25.923
> 
> 标签：c#, .net, lua, luainterface

我在我的 C# 程序中加载了这个脚本

```
function test()
    print ("A")
end 
```

但是当我尝试调用它时

```
LuaFunction func = lua.GetFunction("test")

func.call() 
```

我得到 func 为空的问题。

我错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T16:32:04.487

您说您已将脚本*加载*到C# 程序中。`test`这还不够。您必须*执行*生成的块代码，以便`test`分配全局变量。

时刻提醒

```
function test()
    print ("A")
end 
```

只是一个语法糖：

```
test = function()
    print ("A")
end 
```

Lua在*加载*一些代码时，只是将源代码编译成字节码。做作`test = function() end`只是在运行时执行，而不是在编译时执行。

# c - 与 C 中的布尔变量比较

> ID：13658438
> 
> 赞同：1
> 
> 时间：2012-12-01T10:18:45.727
> 
> 标签：c, c99, c11

考虑代码：

```
int foo(void)
{
    _Bool b = 1; // is true
    int i = 42;  // mean true in conditions

    if (i == b)
        return 1;
    else if ((_Bool)i == b)
        return 2;
    else
        return 3;
} 
```

根据 C 标准（C99 或 C11），此函数将返回什么？

PS 在带有选项的 GCC 4.7.2 上`-std=c99`，函数返回 2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T10:29:35.740

它返回`2`。

“通常的算术转换”应用于运算符的操作数`==`。`_Bool`是转换等级低于`int`or的无符号类型`unsigned int`。

[“通常的算术转换”在C99](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf)或[C11](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)标准的第 6.3.1.8 节“通常的算术转换”中指定（链接是最近的草案）。

在`i == b`中，由于没有浮点操作数，因此“整数提升”适用于两个操作数，将右操作数从`_Bool`to 提升`int`并产生 value `1`。现在两个操作数属于同一类型，因此不需要进一步转换。So`i == b`等价于`42 == 1`，这是错误的。

在`(_Bool)i == b`中，“整数提升”仍然适用于两个操作数，因此两者都从 转换`_Bool`为`int`。（从`int`to`_Bool`和 back to的转换`int`会丢失信息，将所有非零值转换为`1`。）现在两个操作数的类型相同，因此不需要进一步的转换。So`(_Bool)i == b`等价于`1 == 1`，这是真的 - 并且函数返回`2`。

（注意：由于我在阅读标准时有些粗心，这是关于此答案的第三次主要编辑。我想这次我做对了。）

在回答评论中的问题时，将from`b == 42u`提升为，从而进行比较。由于操作数具有不同的符号但相同的转换等级，因此将有符号的操作数转换为无符号类型。从to转换是微不足道的，产生. 所以比较等价于，这是错误的。`b``_Bool``int``int``unsigned int``1``int``unsigned int``1u``1u == 42u`

（请注意，`==`C 中的运算符与其他等式和关系运算符一样，会产生`int`带有值`0`or的类型结果`1`，*而不是*类型的结果`_Bool`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T10:20:49.640

> 如果两个操作数都具有算术类型，则执行通常的算术转换。

因此，在计算表达式`i == b`时，会发生算术转换。在算术转换期间，所有涉及的操作数都被转换为所有可以“适合”的最低等级类型，在这种情况下`int`。

由于`1 != 42`，第一个条件不成立。

第二个表达式首先转换`i`为 a `_Bool`，结果为`true`。然后它评估`true == true`显然是`true`。因此函数返回`2`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T10:24:38.657

为什么不直接运行呢？

它实际上是 return `2`。gcc 版本 4.5.4 与`-std=gnu99`

# web-services - 在 Magento 中调用外部 Web 服务

> ID：13658439
> 
> 赞同：0
> 
> 时间：2012-12-01T10:18:54.277
> 
> 标签：web-services, magento

我需要在我的 magento 项目上使用外部 Web 服务。谁能指导我如何在 magento 中调用一个简单的 Web 服务？
提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:04:33.940

All of Zend framework is available which includes an [HTTP client](http://framework.zend.com/manual/1.12/en/zend.http.client.html). But there is nothing to stop you using any existing PHP method, like [cURL](http://php.net/manual/en/book.curl.php) or [file_get_contents with an URI](http://php.net/manual/en/function.file-get-contents.php). Personally I prefer [Guzzle](http://guzzlephp.org/) for it's persistent connections and caching.

* * *

Addendum. Since you seem to require a SOAP client perhaps you can use the well known [SoapClient](http://php.net/manual/en/soapclient.soapclient.php). Pass the URI of a relevant WSDL file to the constructor, it can be local or remote.
This has nothing to do with Magento of course, it is plain PHP, if you have a specific question about accessing SOAP then please start a new question.

# javascript - 路由在 JavaScript MVC 框架中是如何工作的

> ID：13658441
> 
> 赞同：4
> 
> 时间：2012-12-01T10:19:06.427
> 
> 标签：javascript, model-view-controller

在大多数 JavaScript MVC 框架中，都需要将应用程序文件分离到如下目录中：

```
-App
    -Controllers
    -Models
    -Views 
```

我正在构建自己的 MVC 框架，希望它能帮助我在继续使用其中一个完善的框架之前更好地理解这些概念。

我的问题是现有框架如何使这个目录结构工作？例如，控制器如何知道视图位于目录中并位于视图文件夹中？这种沟通是如何实现的？

我一直在谷歌搜索 MVC Javascript 中的路由。我可以看到路由 url 指定了要调用的控制器和要发送到该控制器的参数，但这并不能解释我需要知道的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:59:39.310

JS MVC 框架没有目录结构。您可以从目录中动态加载 MVC 组件，但这种方式非常复杂。

现在我对大型 RIA 也有同样的问题。我使用[Backbone 框架](http://backbonejs.org)，我自己组织了目录结构（我的结构看起来和你的一模一样）。然后我在我的 HTML 模板中包含了所有 JS 文件。但是对于生产模式，我合并了所有 JS 文件，并将所有 MVC 部分放入一个文件中。

起初我尝试从路由器动态加载 MVC 部分，但我在模型、控制器和视图之间的依赖关系的加载器方面遇到了很多问题。它也可以减慢你的代码。

因此，最好的方式是一次加载您需要或使用[Require.js](http://requirejs.org/)的所有 js 文件。

# wpf - 没有错误的损坏绑定

> ID：13658443
> 
> 赞同：2
> 
> 时间：2012-12-01T10:19:11.303
> 
> 标签：wpf, mvvm, binding

我有两个窗口的简单 WPF 应用程序，我想将其更改为使用 MVVM 模型。

我开始使用按钮和消息框创建一个简单的绑定，但它不起作用。我的命令的 Execute 函数从未被调用，但我在输出窗口中没有遇到绑定错误。

我使用这些调试和跟踪绑定： [http ://www.beacosta.com/blog/?p=](http://www.beacosta.com/blog/?p=52) [52 如何检测损坏的 WPF 数据绑定？](https://stackoverflow.com/questions/337023/how-to-detect-broken-wpf-data-binding)

跟踪如下：

```
System.Windows.Data Warning: 54 : Created BindingExpression (hash=8493835) for Binding (hash=45202970)
System.Windows.Data Warning: 56 :   Path: 'LoginCommand'
System.Windows.Data Warning: 58 : BindingExpression (hash=8493835): Default mode resolved to OneWay
System.Windows.Data Warning: 59 : BindingExpression (hash=8493835): Default update trigger resolved to PropertyChanged
System.Windows.Data Warning: 60 : BindingExpression (hash=8493835): Attach to System.Windows.Controls.Button.Command (hash=17604022)
System.Windows.Data Warning: 65 : BindingExpression (hash=8493835): Resolving source 
System.Windows.Data Warning: 68 : BindingExpression (hash=8493835): Found data context element: Button (hash=17604022) (OK)
System.Windows.Data Warning: 76 : BindingExpression (hash=8493835): Activate with root item LoginViewModel (hash=47369058)
System.Windows.Data Warning: 106 : BindingExpression (hash=8493835):   At level 0 - for LoginViewModel.LoginCommand found accessor ReflectPropertyDescriptor(LoginCommand)
System.Windows.Data Warning: 102 : BindingExpression (hash=8493835): Replace item at level 0 with LoginViewModel (hash=47369058), using accessor ReflectPropertyDescriptor(LoginCommand)
System.Windows.Data Warning: 99 : BindingExpression (hash=8493835): GetValue at level 0 from LoginViewModel (hash=47369058) using ReflectPropertyDescriptor(LoginCommand): RelayCommand (hash=32714449)
System.Windows.Data Warning: 78 : BindingExpression (hash=8493835): TransferValue - got raw value RelayCommand (hash=32714449)
System.Windows.Data Warning: 82 : BindingExpression (hash=8493835): TransferValue - implicit converter produced <null>
System.Windows.Data Warning: 87 : BindingExpression (hash=8493835): TransferValue - using final value <null> 
```

我的代码的相关部分如下。

登录视图.xaml：

```
<Window.DataContext>
    <local:LoginViewModel/>
</Window.DataContext> 
```

...

```
<Button Content="Login"
        Command="{Binding LoginCommand, diagnostics:PresentationTraceSources.TraceLevel=High}"
        CommandParameter="Hello"> 
```

登录视图模型.cs：

```
class LoginViewModel
{
    private RelayCommand m_LoginCommand;
    public RelayCommand LoginCommand
    {
        get
        {
            if (m_LoginCommand == null) 
            {
                m_LoginCommand = new RelayCommand(param => this.Login(param));
            }
            return m_LoginCommand;
        }
    }

    public void Login(object obj)
    {
        MessageBox.Show(obj.ToString());
    }
} 
```

中继命令.cs：

```
class RelayCommand
{
    private Action<object> _execute;

    public RelayCommand(Action<object> execute)
    {
        _execute = execute;
    }

    #region ICommand Members

    public bool CanExecute(object parameter)
    {
        return true;
    }

    public event EventHandler CanExecuteChanged;

    public void Execute(object parameter)
    {
        // breakpoint; code execution never reaches here
        _execute(parameter);
    }

    #endregion
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T12:39:18.217

你`RelayCommand`是一个普通的类，它没有实现`ICommand`. 这将起作用：

```
class RelayCommand : ICommand
{
    private Action<object> _execute;

    public RelayCommand(Action<object> execute)
    {
        _execute = execute;
    }

    #region ICommand Members

    public bool CanExecute(object parameter)
    {
        return true;
    }

    public event EventHandler CanExecuteChanged;

    public void Execute(object parameter)
    {
        // breakpoint; code execution never reaches here
        _execute(parameter);
    }

    #endregion
} 
```

# python - 斐波那契数列的递归

> ID：13658447
> 
> 赞同：5
> 
> 时间：2012-12-01T10:19:18.030
> 
> 标签：python, recursion, fibonacci

我需要一些帮助来理解这里发生的处理，所以假设我打电话给`fib(5)`我想要斐波那契 5，即 8。但我试图理解算法的大脑说它不是。这就是我（错误地）认为的方式：

```
return fib(4) + fib(3) // Stack frame 1
return fib(3) + fib(1) // Stack frame 2 
```

现在因为 x 是 1 `fib(1)`，条件语句`if x == 0 or x == 1:`导致递归结束。根据我的逻辑，这将变成 3+1+4+3。请纠正我的错误逻辑。

```
def fib(x):
    """assumes x an int >= 0
       returns Fibonacci of x"""
    assert type(x) == int and x >= 0
    if x == 0 or x == 1:
        return 1
    else:
        return fib(x-1) + fib(x-2) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T10:36:56.153

以下是所发生情况的完整扩展：

```
fib(5) expands to fib(4)+fib(3)
  fib(4) expands to fib(3)+fib(2)
    fib(3) expands to fib(2)+fib(1)
      fib(2) expands to fib(1)+fib(0)
        fib(1) evaluates to 1
        fib(0) evaluates to 1
      fib(1) evaluates to 1
    fib(2) expands to fib(1)+fib(0)
      fib(1) evaluates to 1
      fib(0) evaluates to 1
  fib(3) expands to fib(2)+fib(1)
    fib(2) expands to fib(1)+fib(0)
      fib(1) evaluates to 1
      fib(0) evaluates to 1
    fib(1) evaluates to 1 
```

如果你数一数，你会得到 8 作为答案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-01T10:37:00.607

对于所有`x`大于 1，`fib`函数调用自身*两次*：

1.  `fib(5)`变成`fib(4) + fib(3)`
2.  并扩展到`(fib(3) + fib(2)) + (fib(2) + fib(1))`
3.  并扩展到`((fib(2) + fib(1)) + (fib(1) + fib(0))) + ((fib(1) + fib(0)) + 1)`
4.  扩展到`(((fib(1) + fib(0)) + 1) + (1 + 1)) + ((1 + 1) + 1)`
5.  扩展到`(((1 + 1) + 1) + (1 + 1)) + ((1 + 1) + 1)`

总和为`8`。

# c# - LINQ to SQL - 数据库设计问题

> ID：13658449
> 
> 赞同：4
> 
> 时间：2012-12-01T10:19:29.170
> 
> 标签：c#, sql-server, linq, linq-to-sql

我对一般的数据库工作很陌生，希望得到您的指导，了解哪里出了问题。

我手头有 4 张桌子，目前以这种方式设置：

![在此处输入图像描述](../Images/27fa26fa5caaa3dfb79d36077542fc68.png)

**公司**- 只是一个普通的公司表，其中包含某些数据

**Company_GoodsPackaging** - Company 的参考表，其中包含有关公司“生产”何种商品以及该商品的包装类型的信息。

**GoodsType** - 基本上是一个枚举，现在的值是：

> 1 商品
> 
> 2 食物/饲料
> 
> 3 活体动物
> 
> 4 植物
> 
> 5 特殊货物
> 
> 6 卓越的

**PackagingType** - 也是一个枚举，值：

> 1 个包裹
> 
> 2 托盘
> 
> 3 集装箱
> 
> 4 散装
> 
> 5 超大

**代码**

在我的 ASP.NET 网站的代码隐藏中，我正在执行以下操作：

我遍历所有 GoodsType 值，并尝试查看 CompanyX（一个 LINQ 公司对象）在其表中是否有此值，如果有，该值的 Packaging_Type.Description 是什么。

我现在遇到的问题是，当我拥有 Company 对象时，我似乎无法提取其成员。

```
var theSource = (from g in Data.GoodsTypes
select new
{
  gvGoodsType = g.Description,
  gvParcels = true,
  gvContainers = curCompany.Company_GoodsPackagings.GoodsType == g.Goods_Type &&
  curCompany.Company_GoodsPackagings.PackagingType1.Description == "Container"
} 
```

关系已经完成，一切似乎都是正确的，但我似乎无法提取 Company_GoodsPackaging 条目的 GoodsType 和 PackagingType。我知道这是一个EntitySet。

我的数据库设计缺陷/代码逻辑缺陷在哪里？我不得不说，我对一起使用数据库非常陌生。任何帮助/输入都将受到欢迎。

我在 VS 中遇到的错误是

> 错误 26“System.Data.Linq.EntitySet”不包含“GoodsType”的定义，并且找不到接受“System.Data.Linq.EntitySet”类型的第一个参数的扩展方法“GoodsType”（您是否缺少使用指令或程序集引用？） *****\Account\MyAccountTransport.aspx.cs 33 8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T10:39:36.913

如果我没记错的话， Company -> Company_GoodsPackagings 是一对多的关系吗？

因此，属性 Copmany_GoodsPackagings 将是一个集合，因此您需要使用 Any() 函数，如下所示：

```
var theSource = (from g in Data.GoodsTypes
select new
{
  gvGoodsType = g.Description,
  gvParcels = true,
  gvContainers = curCompany.Company_GoodsPackagings.Any(gp => qp.GoodsType == g.Goods_Type && gp.PackagingType1.Description == "Container")
} 
```

**编辑**：Linq to SQL 似乎不支持我使用 Any() 的建议。因此，我建议您带回整个货物包装对象，然后检查它是否具有值以确定布尔 gvContainers：

然后，您可以将匿名类型转换为具体类，并在示例末尾添加属性：

```
var theSource = (from g in Data.GoodsTypes
select new GoodsResult
{
  gvGoodsType = g.Description,
  gvParcels = true,
  gvGoodsPackaging_Container = curCompany.Company_GoodsPackagings.FirstOrDefault(gp => qp.GoodsType == g.Goods_Type && gp.PackagingType1.Description == "Container")
}

public bool gvContainers {
    get { return this.gvGoodsPackaging != null }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T10:39:38.093

问题在于它`curCompany.Company_GoodsPackagings`是 GoodsPackagings 的集合（因此是复数并提到`System.Data.Linq.EntitySet`）。因此，您不能以这种方式直接引用 Company 的单个 GoodsType。

我认为您正在寻找一种方法来根据您的条件测试公司的每一个货物包装。为此，您可以使用[`Any()`](http://msdn.microsoft.com/en-us/library/bb534972.aspx)Linq 扩展方法：

```
using System.Linq;

...

gvContainers = curCompany.Company_GoodsPackagings.Any(gp => gp.GoodsType ==
   g.Goods_Type && gp.PackagingType1.Description == "Container") 
```

# php - 单选按钮的值不能存储到String中并保存在mysql中

> ID：13658452
> 
> 赞同：0
> 
> 时间：2012-12-01T10:20:19.747
> 
> 标签：php, android, mysql, radio-button, radio-group

在我的应用程序中，注册时，用户可以使用单选按钮（RadioGroup）选择学生或店主的角色

在他们选择它并填写注册表后，包括 在内的所有数据`role`都应该存储到mysql中。

不幸的是，只有, 和`name`存储`email`成功但无法存储。`username``password``role`

这是我的java文件：

```
package com.androidhive.dashboard;

import java.util.ArrayList;
import java.util.List;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONObject;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.RadioButton;
import android.widget.RadioGroup;
import androidhive.dashboard.R;

public class Register extends Activity {

JSONParser jsonParser = new JSONParser();
EditText inputName;
EditText inputUsername;
EditText inputEmail;
EditText inputPassword;
RadioGroup rgroup;
Button button3;
int success = 0;
String role = "";

private static String url_register_user = "http://192.168.1.5/database/add_user.php";
private static final String TAG_SUCCESS = "success";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.register_layout);

    inputName = (EditText) findViewById(R.id.nameTextBox);
    inputUsername = (EditText) findViewById(R.id.usernameTextBox);
    inputEmail = (EditText) findViewById(R.id.emailTextBox);
    inputPassword = (EditText) findViewById(R.id.passwordTextBox);

    Button button3 = (Button) findViewById(R.id.regSubmitButton);

    final RadioGroup rgroup = (RadioGroup)findViewById(R.id.roleRgroup);
    final RadioButton student = (RadioButton)findViewById(R.id.studButton);
    final RadioButton shopowner = (RadioButton)findViewById(R.id.shopownerButton);

    button3.setOnClickListener(new View.OnClickListener() {         
        public void onClick(View view) {

            String name = inputName.getText().toString();
            String username = inputUsername.getText().toString();
            String email = inputEmail.getText().toString();
            String password = inputPassword.getText().toString();

            if (rgroup.getCheckedRadioButtonId() == student.getId())
            {
                 role = "Student";
            }

            else if(rgroup.getCheckedRadioButtonId() == shopowner.getId())
            {
                 role = "ShopOwner";
            }

            if (name.contentEquals("")||username.contentEquals("")||email.contentEquals("")||password.contentEquals(""))
            {
                AlertDialog.Builder builder = new AlertDialog.Builder(Register.this);

                builder.setMessage(R.string.nullAlert)
                   .setTitle(R.string.alertTitle);

                builder.setPositiveButton(R.string.ok, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {

                   }
               });

                AlertDialog dialog = builder.show();
            }
            else
            {
                new RegisterNewUser().execute();
            }           
        }
    });
}

   class RegisterNewUser extends AsyncTask<String, String, String>{
   protected String doInBackground(String... args) {
       String name = inputName.getText().toString();
       String username = inputUsername.getText().toString();
       String email = inputEmail.getText().toString();
       String password = inputPassword.getText().toString();

       List<NameValuePair> params = new ArrayList<NameValuePair>();
       params.add(new BasicNameValuePair("name", name));
       params.add(new BasicNameValuePair("username", username));
       params.add(new BasicNameValuePair("email", email));
       params.add(new BasicNameValuePair("password", password));
       params.add(new BasicNameValuePair("role", role));

       JSONObject json = jsonParser.makeHttpRequest(url_register_user,
                           "GET", params);

       Log.d("Send Notification", json.toString());

       try
           {
                   int success = json.getInt(TAG_SUCCESS);

                   if (success == 1)
                   {

                       if   (role.contentEquals("Student"))
                        {
                            Intent i = new Intent(getApplicationContext(), StudMain.class);
                            startActivity(i);
                            finish();
                        }
                        else if ((role.contentEquals("Shop Owner")))
                        {
                            Intent i = new Intent(getApplicationContext(), ShopMain.class);
                            startActivity(i);
                            finish();
                        }
                        else
                        {
                            AlertDialog.Builder builder = new AlertDialog.Builder(Register.this);

                            builder.setMessage(R.string.roleNullAlert)
                               .setTitle(R.string.alertTitle);

                            builder.setPositiveButton(R.string.ok, new DialogInterface.OnClickListener() {
                               public void onClick(DialogInterface dialog, int id) {

                               }
                           });

                            AlertDialog dialog = builder.show();
                        }

                   }

                   else
                   {

                   }
           }

            catch (Exception e)
            {
                  e.printStackTrace();
            }
            return null;
           }
   }
} 
```

和 php 文件：

```
<?php

// array for JSON response
$response = array();
// include db connect class
require_once __DIR__ . '/db_connect.php';

// connecting to db
$db = new DB_CONNECT();

// check for required fields
if (isset($_GET['name']) && isset($_GET['username']) && isset($_GET['email']) && isset($_GET['password']) && isset($_GET['role'])) {

$name = $_GET['name'];
$username = $_GET['username'];
$email = $_GET['email'];
$password = $_GET['password'];
$role = $_GET['role'];

// mysql inserting a new row
$result = mysql_query("INSERT INTO register(name, username, email, password) VALUES('$name', '$username', '$email', '$password', '$role')");

// check if row inserted or not
if ($result) {
    // successfully inserted into database
    $response["success"] = 1;
    $response["message"] = "You are successfully registered to MEMS.";

    // echoing JSON response
    echo json_encode($response);
} 
else {
    // failed to insert row
    $response["success"] = 0;
    $response["message"] = "Oops! An error occurred.";

    // echoing JSON response
    echo json_encode($response);
}
} else {
// required field is missing
$response["success"] = 0;
$response["message"] = "Required field(s) is missing";

// echoing JSON response
echo json_encode($response);
}
?> 
```

除了这两个文件之外，还有没有可能影响 RadioGroup 功能的因素？

谢谢你的回答.. =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:38:26.980

您的 mysql 插入查询缺少“角色”，这就是您无法保存它的原因。

```
$result = mysql_query("INSERT INTO register(name, username, email, password) VALUES('$name', '$username', '$email', '$password', '$role')"); 
```

将其更改为

```
$result = mysql_query("INSERT INTO register(name, username, email, password,role) VALUES('$name', '$username', '$email', '$password', '$role')"); 
```

# java - Java中有哪些好的编程实践？

> ID：13658453
> 
> 赞同：-4
> 
> 时间：2012-12-01T10:20:30.847
> 
> 标签：java, oop, coding-style

您认为 Java 中有哪些好的编程实践？

**我问这个问题的原因是：**

我总是想知道我是否以错误的方式做事，所以我想了解更多关于良好做法的信息。

**我总是困惑的一件事：**

我是否应该总是使用`this.xxx`引用实例变量以将它们与局部变量区分开来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T10:40:28.887

There are several ways to look at 'good coding practices'

*   Coding styles/idioms that is less prone to errors and guard against introducing new errors, thus leading to 'correct' code
*   Coing styles/idioms that are easier for others to read and maintain

In the first case, programmers adopt certain styles to guard themselves against introducing 'accidental' errors that can sneak into their code:

for Example in C, the following code is valid (but has a subtle bug)

```
if (x = 1)  // always evaluates to 'true' (programmer meant '==', not '=')
{
   // do something
} 
```

so, in order to force the compiler to catch this error, you could adopt a style such as

```
if (1 == x) // if you accidentally typed '1 = x' the compiler will flag an error
{
   // do something 
} 
```

Such styles/idioms are regarded as 'good' practices and there a quite a few that can be found for Java in books like **'[Clean Code: A Handbook of Agile Software Craftsmanship (Robert C. Martin](http://www.amazon.co.uk/dp/0132350882/ref=rdr_ext_tmb)'**

Regarding the second case, writing '**this.xxx**' enables the reader of the code to differentiate between a local/instance variable, so in the spirit of code readability, it is marginally better than directly referencing the variable as 'xxx'.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T10:24:51.387

我的建议是`this`在有助于解决潜在歧义时使用。 `this.`当您需要使用成员变量而不是同名的本地方法参数时需要。

使用 whwn 的情况是这样的：

```
public class ravi {

    public int x;
    public static float y;    

    public float getX(int x) {
        return this.x;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T10:25:53.137

就`this.xxx`问题而言，是的，这是区分的一种方法。另一种方法是让局部变量以'p'为前缀，表示它是一个方法参数，这样你就可以实现这样的效果：

```
public void setField(Field pField) {
    field = pField; // instead of this.field = field, assuming field was the method argument.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T14:09:50.450

如果您选择参数名称的拼写方式与您的类成员完全相同，我只会在构造函数和 setter 函数中使用 this.xx 进行赋值。例如：

```
public void setName(String name)
{
     this.name = name;
} 
```

这是为了将您的类的名称成员与参数名称区分开来。

在一个类中，不要写 this.xxx（尽管在语法上仍然是正确的），特别是如果你只想获得它的值。例如，以下是“丑陋的”：

```
public String getFullName()
{
     return this.firstName + " " + this.lastName;
} 
```

只需返回 firstName + " " + lastName; 这样写的少。

你会遇到比是否写 this.xxx 更重要的决定，比如是否使用内联函数或将它们作为类的单独函数，或者决定一个类是“是”还是“有”班级。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T14:01:47.033

对于一般编码约定，这是一本好书：Java 风格元素[http://www.ambysoft.com/books/elementsJavaStyle.html](http://www.ambysoft.com/books/elementsJavaStyle.html)

# jquery - 如何延迟 google 分析的 jquery 事件

> ID：13658455
> 
> 赞同：0
> 
> 时间：2012-12-01T10:20:40.290
> 
> 标签：jquery, delegates, google-analytics

我正在使用 jquery 将锚点的点击记录到谷歌分析。

我有如下代码，用于连接事件：

```
$(document).delegate("a[rel='mylink']", "Click", function (e) {
//log to google analytics
console.log('tracking link');
_gaq.push(event);
e.preventDefault();         
}); 
```

问题在于，href 的执行速度似乎太快，以至于无法触发此事件。

有没有办法延迟href的后续直到事件被触发/完成？

我可以在控制台中看到它一直到“跟踪链接”，但在谷歌分析推送事件完成之前它会继续前进。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T15:16:53.703

Google Analytics 通过请求跟踪像素来记录数据。如您所见，在同一窗口中打开新页面时可以取消请求。

注意：只有在同一窗口中打开链接时才需要延迟。我使用以下的一些变体来实现点击功能：

```
function(e) {
  _gaq.push(['_trackEvent', ...]);
  if (this.target != '_blank') {
    e.preventDefault();
    var url = this.href;
    setTimeout(function() {location.href = url}, 150);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T10:30:54.360

我用谷歌分析解决了这个问题，将逻辑放入窗口加载函数

```
jQuery(window).load(function(){

}) 
```

# python - 如何在全屏上更改 Gtk 应用程序的布局？

> ID：13658460
> 
> 赞同：6
> 
> 时间：2012-12-01T10:21:14.363
> 
> 标签：python, user-interface, gtk, pygobject

我正在使用 Python 和 Gtk 开发另一个图像查看器，该查看器目前非常简单：它由`GtkWindow`一个`GtkTreeView`在左侧显示我的图像列表的 a 和`GtkImage`在右侧显示实际图像的 a 组成。到现在为止还挺好。

现在，我想全屏显示，只显示黑色背景的图像等。

我可以看到几种方法：

*   我可以隐藏（）窗口，`GtkImage`而是显示一个大窗口，但是我丢失了之前在窗口上设置的所有内容（例如信号），并且我隐藏了全屏窗口，这有点奇怪的;
*   我可以隐藏（）窗口的内容，删除窗口的内容（据我所知，它只能有一个孩子？），然后放一个`GtkImage`里面（并在退出全屏时做相反的事情）；
*   我可以尝试使用窗口内的容器，并在窗口全屏/退出全屏时隐藏/显示它们的内容。更准确地说，我正在考虑添加另一个`GtkHBox`作为我的窗口的直接子级，有两个子级，并且在“正常”模式下仅显示第一个，在全屏模式下仅显示第二个。

这一切似乎有点老套，所以我想知道处理这种情况的推荐方法是什么。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T17:34:59.587

我认为实现这一点的最简单方法是使用一个包含所有小部件设置和信号设置的布局。然后，当您切换全屏和关闭全屏时，您将拥有一组可见和不可见的小部件。试试下面的演示。这是一个简单的实现，当您按 F11 时会进入和退出全屏。HBox 用于制作布局，其中包含左侧的标签和右侧的图像。我用一些虚拟文本填充了标签，以便占用大量空间。当您切换进入和退出全屏时，它将切换标签的可见性，从而使图像占据全屏空间或与标签共享。我只是使用 gtk 附带的一张图片来进行演示。

**代码**

```
import gtk

def keypress(win, event):
    if event.keyval == gtk.keysyms.F11:
        win.is_fullscreen = not getattr(win, 'is_fullscreen', False)
        action = win.fullscreen if win.is_fullscreen else win.unfullscreen
        action()
        label.set_visible(not win.is_fullscreen)

win = gtk.Window()
win.connect("delete-event", gtk.main_quit)
win.connect('key-press-event', keypress)
image = gtk.image_new_from_stock(gtk.STOCK_ABOUT, gtk.ICON_SIZE_DIALOG)
label = gtk.Label(('test ' * 20 + '\n') * 20)
vbox = gtk.HBox()
vbox.add(label)
vbox.add(image)
win.add(vbox)
win.show_all()
gtk.main() 
```

**普通窗口**

![在此处输入图像描述](../Images/04555953659c60e5b0927c2a92a7e45d.png)

**全屏**

![在此处输入图像描述](../Images/b82ff69860528bf94a117acdb9193d0d.png)

# windows-phone-7 - Wp7：不播放带有媒体元素的歌曲

> ID：13658464
> 
> 赞同：1
> 
> 时间：2012-12-01T10:22:50.617
> 
> 标签：windows-phone-7, mediaelement

我想在我的 Windows Phone 7 应用程序中播放音频歌曲。

为了播放歌曲，我使用的是`MediaElement`.

我的 C# 代码是

```
MediaElement song = new MediaElement();
song.Source = new Uri("Live Url of audio song", UriKind.RelativeOrAbsolute);
LayoutRoot.Children.Add(song);
song.AutoPlay = False;
song.Play(); 
```

它没有显示任何错误，也没有播放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:16:24.787

The media element need to load its media before you can call Play(), otherwise nothing will happen. The event MediaOpened is fired when the media is loaded.

```
myMediaElement.MediaOpened += (o, args) => myMediaElement.Play(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:39:14.067

我得到了解决方案

我在 XAML 部分中使用 medeiElement ..

```
 <MediaElement Name="myMediaElement" 
                      AutoPlay="True" 
                      /> 
```

C#代码是

```
 Uri path;
 path = new Uri("/VodafoneAugmentedReality;component/Images/pause.png", UriKind.RelativeOrAbsolute);

myMediaElement.Source = new Uri(Uri, UriKind.RelativeOrAbsolute);
myMediaElement.Play(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-13T15:34:59.083

似乎有一个错误，每当你设置 AutoPlay="False" 所以不要这样做，如果你不想自动播放，不要在 xaml 中设置 Source

```
 <MediaElement Name="mediaElementTones" Volume="1" ></MediaElement> 
```

然后在代码中使用

```
 Uri keypadUri = new Uri("./Resources/Sounds/dtmf" + keyPressed + ".wav", UriKind.Relative);
            mediaElementTones.Source = keypadUri;
            mediaElementTones.Play(); 
```

# iphone - TableViewController - 半个视图/半个 tableView 滚动不起作用

> ID：13658465
> 
> 赞同：1
> 
> 时间：2012-12-01T10:22:57.233
> 
> 标签：iphone, ios, storyboard

我有一个TableViewController，上半部分是RegularView，另一半是我的表。但是我有一个问题，整个东西不能滚动，我可以往下一点，但只要我放开它就会回到顶部：/

有任何想法吗？

为 Tableview 勾选了 PS Scrolling Enabled

编辑：我正在做的打印屏幕：http: [//postimage.org/image/lldwd0ybl/](http://postimage.org/image/lldwd0ybl/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:30:32.047

如果您使用此控制器`UITableViewController`的`view`属性，则默认情况下是表视图。因此，将其他视图添加到视图层次结构的选项有限。

您也许应该使用一个普通`UIViewController`的，它是表视图控制器的超类。您可以轻松地将顶视图*和*表格视图作为子视图添加`view`到此控制器的主视图。要使表格视图正常工作，您还需要执行以下步骤：

1.  `UITableViewDataSource`将and添加`UITableViewDelegate`到您的班级，并相应地设置您的表格视图`datasource`和`delegate`（或将它们连接到 IB 中）。
2.  实现数据源和委托方法（当您使用 UITableViewController 模板时，它们不会自动提供给您）。

请注意，您不能在此设置中使用情节提要的静态表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T10:36:47.523

关于您的实现，这里还不清楚，但您可以这样做：（因为您想要完全滚动意味着您的矩形和表格视图）

1）只需增加索引0处的行高或您想要显示框的任何位置，也可以根据您的需要进行自定义，它会根据您的需要正确滚动，&;

2）您将自定义视图（可能是 UIView、UIImageView 或其他）和表格视图放在滚动视图中并相应地进行锻炼。

我建议您使用第一种方法，因为根据我的说法，这有点简单。

有任何问题，请告诉我。:)

# python - Python; 保存列表中的位置以将其与另一个位置进行比较

> ID：13658468
> 
> 赞同：1
> 
> 时间：2012-12-01T10:23:49.807
> 
> 标签：python, list

我试图编写一个将列表元素的位置添加到新列表的代码。当我稍后尝试从不同对象向原始列表添加新元素时，该对​​象的位置将与我保存前一个元素的列表进行比较，以确保它不会被替换。

我将粘贴与我的问题相关的代码部分，它看起来像这样：

```
class gamefield:
def __init__(self):

    self.table= [ [ "0" for i in range(10) ] for j in range(10) ]

class snake:
def __init__(self,sign):
    self.sign = sign
    self.x = random.randint(1,9) 
    self.y = random.randint(1,9)    
    self.bodylist = []
    gamefield.table[self.x][self.y] = sign
    self.bodylist.append(gamefield.table.index(sign))

field = gamefield()  

snake1 = snake("+") 
```

但我得到错误：“”self.bodylist.append（gamefield.table.index（sign））ValueError：'+'不在列表中“”

'+" 不应该在列表中，因为我在执行导致错误的代码之前将它添加到 gamefield.table 中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T10:31:57.983

它不在列表中`table`，它在列表中`table[x]`。您的表是列表列表，如下所示：

```
[
  ["0", ... ,"0"],
  ["0", ... ,"0"],
  ..
  ..
  ["0", ... ,"0"]
] 
```

您可能应该将元组添加`(x,y)`到正文列表

# model-view-controller - 动画视图转换

> ID：13658473
> 
> 赞同：2
> 
> 时间：2012-12-01T10:24:49.760
> 
> 标签：model-view-controller, animation, ember.js

假设我有几个视图，在任何给定时间只能在屏幕上显示一个。是否可以通过类似轮播的动画或基本的淡入/淡出在这些视图之间平滑切换？

我找到了这个链接，但似乎在最新版本的 Em 中已经删除了那里描述的功能。

[状态管理器中的动画视图状态](https://stackoverflow.com/questions/10854438/animate-view-states-in-state-manager)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T12:47:14.727

这是我使用最新的 EmberJS 制作的[轮播](http://jsfiddle.net/ryDWR/1/)，我用`Ember.ContainerView`它`currentViewBinding`来实现这一点，我不太喜欢 jquery 转换，虽然我在入口处添加了转换，如果你可以在退出时添加转换，这将是完整的关于[Ember 的](https://github.com/emberjs/ember.js/blob/v1.0.0-pre.2/packages/ember-views/lib/views/container_view.js#L15)

更多文档。 [ContainerView](https://github.com/emberjs/ember.js/blob/v1.0.0-pre.2/packages/ember-views/lib/views/container_view.js#L15)您可以查看`_currentViewWillChange`或`childViewsWillChange`添加退出转换的方法

# java - 从 Solr 获取数据到 JTable

> ID：13658475
> 
> 赞同：0
> 
> 时间：2012-12-01T10:24:57.153
> 
> 标签：java, apache, swing, solr, jtable

我是 Solr 的新手。我可以从应用程序向 Solr 添加数据，但我想将数据从 Solr 获取到我的 Java 桌面应用程序。

如何从 Solr 获取数据`("http://localhost:8983/solr")`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:37:51.473

您可能想使用一些 solr 客户端来请求和处理响应数据。

但是，如果您愿意，可以在简单的 HTTP GET 请求中执行此操作：

```
// get all documents
http://localhost:8983/solr/select?q=*:* 
```

如果您使用多个核心，那么您可能需要使用：

```
// get all documents from core0
http://localhost:8983/solr/core0/select?q=*:* 
```

您可以在此处阅读有关 solr[常用查询参数的](http://wiki.apache.org/solr/CommonQueryParameters)更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T10:54:49.897

[Solrj](http://wiki.apache.org/solr/Solrj)是最简单的方法。它是 solr java 客户端库。将其作为依赖项添加到您的项目中，然后编写一个 pojo，其中包含您希望从 Solr 获取的所有字段。[使用solrj `@Field`annotation](http://wiki.apache.org/solr/Solrj#Directly_adding_POJOs_to_Solr)注释每个字段，然后将您的查询发送到 Solr，如下所示：

```
SolrServer solrServer = new HttpSolrServer("htp://localhost:8080/solr/core0");
QueryResponse response = solrServer.query(new SolrQuery(query));
List<Pojo> pojos = response.getBeans(Pojo.class); 
```

# css - CSS：如何让输入字段自动调整其宽度

> ID：13658479
> 
> 赞同：3
> 
> 时间：2012-12-01T10:25:55.427
> 
> 标签：css

我有一个名为 wrapper 的 div。它使用 margin 属性水平居中。该包装器的宽度是固定的。在该包装器内，我有一个标签，后跟一个输入字段。我正在寻找的是让输入字段的宽度自动调整为右侧的剩余宽度（直到包装器的边框）。我想避免以像素为单位定义宽度。我尝试了几件事，但没有任何效果（例如宽度自动或 100%）。希望清楚，希望有人可以提供帮助。

小提琴：http : [//jsfiddle.net/72sPT/](http://jsfiddle.net/72sPT/)

HTML：

```
<div id="wrapper">
   <a>this is a button</a>
   <input type="text"/>
</div>​ 
```

CSS：

```
#wrapper {
    width: 600px;
    margin: 10px auto;
    background: blue;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-01T10:39:38.653

如果您将输入标签包装在另一个 div 中，您可以执行以下操作：

```
#wrapper {
    width: 600px;
    margin: 10px auto;
    background: blue;
}
#wrapper a {
    float: left;
}
#wrapper div {
    overflow: hidden;
}
#wrapper input {
    width: 100%;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-01T10:42:38.593

如果你不想弄乱你的`<a>`标签，那么你可以将你的输入浮动到右边：

[jsFiddle](http://jsfiddle.net/npsfB/)

```
#wrapper {
width:600px;
margin:10px auto;
background:blue;
}

#wrapper input {
 float:right;
width:70%;    
} 
```

# jqgrid - Jqgrid - 另一种调用 onSelectRow 的方式

> ID：13658482
> 
> 赞同：0
> 
> 时间：2012-12-01T10:26:39.003
> 
> 标签：jqgrid

通常我们调用 onSelectRow 函数，如：

```
$("#imports_grid").jqGrid({
    // jqGrid settings
    url: url,
    datatype: "json",
    colNames: cnames,
    colModel: cmodel,
    onSelectRow: function() {
      // Code
    },
}); 
```

我的 PHP 脚本使用 json_encode() 输出 jqGrid 设置，所以它看起来像

```
$script = '$("#imports_grid").jqGrid(' . json_encode($js_settings) . ');';
// echo $script; 
```

在这种情况下，onSelectRow 的功能不起作用。

是否有另一种方法可以在 onSelectRow 中触发函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:41:06.563

您不需要在 PHP 脚本中混合 HTML 代码和 JavaScript 代码。取而代之的是，您可以放置`<script>`​​元素

```
<script type="text/javascript" src="theURL.js"></script> 
```

在 PHP 脚本中。您可以放置​​在 .JS 文件中的 JavaScript 代码。

**更新**：您可以在设置一些*全局*变量的内联 JavaScript 代码和使用变量的 JS 文件之间进行混合：

在您使用的 PHP 代码中

```
<script type="text/javascript">
    var MYGLOBALSETTINGS = {
        cnames: ["Column 1", "Column 2", ...],
        cmodel: [{...}, {...}...],
        url: "myUrl"
    };
</script>
<script type="text/javascript" src="my.js"></script> 
```

而在`my.js`你只使用`MYGLOBALSETTINGS.cnames`和`MYGLOBALSETTINGS.cmodel`

```
$("#imports_grid").jqGrid({
    // jqGrid settings
    url: MYGLOBALSETTINGS.url,
    datatype: "json",
    colNames: MYGLOBALSETTINGS.cnames,
    colModel: MYGLOBALSETTINGS.cmodel,
    onSelectRow: function() {
      // Code
    },
}); 
```

# c++ - 继承和隐式类型转换

> ID：13658486
> 
> 赞同：0
> 
> 时间：2012-12-01T10:27:24.387
> 
> 标签：c++

假设我有以下三个类：

```
class Animal {};

class Human : public Animal {};

class Dog : public Animal
{
public:
   void setOwner(Animal* owner) { this->owner = owner; }
private:
   Animal* owner;
}; 
```

为什么允许以下行为，究竟发生了什么？

```
Dog d;
Human h;

d.setOwner(&h); // ? 
```

起初，我尝试像这样强制转换它`d.setOwner(&(Animal)h)`，但编译器给了我一个警告，我遇到了一个运行时错误。

**编辑**：编译器给我的警告是“获取临时地址”。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:30:28.190

没有类型转换，而是一个`Human` **is-an** `Animal`。因此，任何作用于 a 的接口`Animal*`都将接受 a `Human*`。这同样适用于`Animal&`和`Human&`。当然，他们只看到`Animal`对象界面的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T10:32:18.630

这里 d.setOwner((Animal)&h)

您尝试将指针类型转换为对象类型。你不能这样做。

转换为 Animal 类的正确方法是

```
d.setOwner((Animal*)&h) 
```

但是你

这

```
d.setOwner(&h); 
```

之所以有效，是因为如果需要，C++ 中的指针会自动转换为基类。不需要显式转换为 Animal*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T17:09:18.707

正如其他人指出的那样，无需将派生*转换为基础*

但没有人回答警告的问题。是的，创建了一个临时动物。而不是投射指针，而是将对象本身从人类所有者投射到动物。这导致从人类所有者创建一个临时动物。这个临时地址被传递给 set 函数。当 setter 返回临时 Human disappers 时，可怜的 Dogs 所有者指针无效。

所以总是阅读警告。如果您不理解它们，则认为它们是错误的。

另一个问题 - 避免构造函数元素和成员具有相同的名称，否则有一天你会很难学会这条规则。

# html - Google Plus 链接中 asrc 属性的用途是什么？

> ID：13658489
> 
> 赞同：0
> 
> 时间：2012-12-01T10:28:00.417
> 
> 标签：html, google-plus

如果您检查页面左侧的其中一个按钮，您会看到它们由`<a>`类似于以下的元素组成：

```
<a tabindex="-1" 
   alt="Explore" 
   href="/explore" 
   asrc="ribbon" 
   class="g-s-n-aa F9a SX">...</a> 
```

有人知道`asrc`这些锚标签中属性的用途是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:09:32.123

我不认为它们具有功能性目的。似乎是 Google+ 嵌入以标记链接源位置的“微数据”，在这种情况下，左侧导航栏称为“功能区”。

# autocomplete - Aptana 函数返回一个对象并自动完成

> ID：13658490
> 
> 赞同：1
> 
> 时间：2012-12-01T10:28:08.187
> 
> 标签：autocomplete, aptana, phpdoc

我在 Aptana Studio 3 中将[PHPDoc 标记](http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_tags.pkg.html)用于自动完成功能，但是当我将函数返回输入类用作照片中的对象时出现问题：

![Aptana Studio 3 函数返回输入类](../Images/207e8ab20f3bbfb43d9beb5cbf1f1c42.png)

解决办法是什么？

# c# - 来自 Combobox SelectedItem 的不确定响应

> ID：13658493
> 
> 赞同：3
> 
> 时间：2012-12-01T10:28:34.730
> 
> 标签：c#, winforms, combobox

我正在使用 winform 并使用组合框。

我按此顺序设置组合框的属性

```
combobox.DisplayMember 
combobox.ValueMember 
combobox.DataSource 
```

绑定代码是

```
 private void BindBranch()
    {
        BranchClass branch = new BranchClass();
        branch.Active = true;
        branch.Company = Startup.CompID;
        if (branch.GetAll(out dtBranch, out result))
        {
            cmbBranch.DisplayMember = "br_name";
            cmbBranch.ValueMember = "br_id";
            cmbBranch.DataSource = dtBranch;
        }
        else
        {
            MessageBox.Show(result);
        }
    } 
```

我在我的应用程序中多次使用组合框，我不知道我在哪里犯了错误

> SelectedItem 属性有时会根据“ValueMember”属性的数据类型返回精确值（int,string），但有时它会返回“DataRowView”，在这种情况下会引发 InvalidCastException。

我读过这是因为在组合框中设置属性的顺序。但现在情况并非如此。

绑定代码是

![在此处输入图像描述](../Images/7c1c90645da17382cc95de3aada3dcfe.png)

调用代码是

```
private void BindEmployee() 
{
    employee.Branch = Convert.ToInt32(cmbBranch.SelectedItem); // InvalidCastException thrown here
    employee.Active = true;

    var dt = new DataTable();
    if (employee.GetEmployee(out dt, out result, false))
    {
        cmbEmployee.DisplayMember = "emp_name";
        cmbEmployee.ValueMember = "emp_id";
        cmbEmployee.DataSource = dt;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:18:13.003

我假设你在`br_id`. 你有没有尝试过：

```
employeeBranch = ConvertToInt32(cmBranch.SelectedValue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T11:05:39.497

A workaround can be to check what type is returned by cmbBranch.SelectedItem as below:

```
object item = cmbBranch.SelectedItem;
int branchId;
if (item is int)
   branchId = item as int;
else if (item is DataRowView)
   branchId = Convert.ToInt32(((DataRowView)item)["BR_ID"].ToString()); 
```

I am not sure if this is the efficient solution, but can be a workaround!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:04:24.630

如果你想`br_id`使用`SelectedValue`而不是`SelectedItem`.

```
int id = (int)cmBranch.SelectedValue; 
```

`SelectedValue`返回由 指定的属性的值`ValueMember`。`SelectedItem`应始终返回数据行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T10:45:40.347

这是您从 ComboBox 获取所选 DataRowView 的方式

由于您使用数据绑定来填充组合框。在这种情况下，使用组合框的 SelectedItem 属性。它可能包含一个 DataRowView，因此您可以使用这样的代码。

```
DataRowView viewRow = (DataRowView)cmbBranch.SelectedItem;
DataRow row = viewRow.Row; 
```

# javascript - 睡眠/等待/暂停javascript

> ID：13658494
> 
> 赞同：2
> 
> 时间：2012-12-01T10:28:49.813
> 
> 标签：javascript, html, parsing, sleep, wait

我正在编写一个用于从页面中串行提取信息的脚本，通常我必须暂停 javascript，但页面继续加载，并且 javascript 停止了。

**setTimeout**不是必需的，因为脚本的其余部分仍在运行

我需要它以使脚本在另一个脚本（我无权访问）将必要的数据下载到页面后继续运行（这需要 3 秒）。

PS 如果有什么我从村里提取信息 - [http://www.mosgortrans.org/pass3/](http://www.mosgortrans.org/pass3/)使用**带有扩展名“用户脚本”的 mozilla**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T12:00:38.523

我不明白为什么`setTimeout`这里没有必要 - 它完全符合您的描述：

```
setTimeout(function() {
    // this code runs 3 seconds after the page loads
}, 3000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T18:46:04.603

正如先前的回答和评论所建议的那样，执行此操作的正常方法是将要在脚本加载后运行的代码放入`setTimeout`. 例如，如果您担心在等待时触发事件处理程序并导致错误，那么您需要禁用事件处理程序（例如`element.onclick = null`），然后在超时功能内重新启用它们。我想你也可以这样做：

```
var pause = false;
...
callExternalScript();
pause = true;    
setTimeout(function() {
   pause = false;
}, 3000);
...
function oneOfMyOtherFunctions() {
    if (pause) return;
    ...
}
... 
```

但这很麻烦，因为您必须`if (pause) return`在脚本暂停时要禁用的每个功能的开头包含。此外，您可能希望也可能不希望添加额外的代码来运行脚本暂停时调用的所有函数，一旦它被取消暂停。

# iphone - 适用于 iOS SDK 的 Magento oauth api

> ID：13658497
> 
> 赞同：2
> 
> 时间：2012-12-01T10:29:28.740
> 
> 标签：iphone, ios, magento, oauth

我正在使用 magento api 开发电子商务 iOS 应用程序。目前我正在尝试使用 oAuth 身份验证来请求令牌。

我使用以下标头和它们的参数来验证用户。

> 请求 url = [http://beta.localhost.com/oauth/initiate?oauth_callback=](http://beta.localhost.com/oauth/initiate?oauth_callback=) ' [http://localhost/testapp](http://localhost/testapp) '
> 
> OAuth 领域="http://beta.localhost.com/", oauth_consumer_key="pr9vx4i46lc8jv8mmiu6z2w50p9an43x", oauth_nonce="8QSHUZFRWRC5VGN3", oauth_signature_method="HMAC-SHA1", oauth_timestamp="1354356514", oauth_version=1.0", “ucKs4DyFbKv6MJ1l2%2Fx4NvF819A%3D”

我收到错误： **oauth_problem=signature_invalid&debug_sbs=szeWMR2jNONabHyS3Ui7FIF3iPc=**

我已经尝试了所有相同的方法，例如 twitter 身份验证，但我正在努力解决同样的问题

而且我会尝试将这些方法包含在高级休息客户端中，但我会收到不同的错误消息

**我的 Rest 客户端响应页面截图。**

![在此处输入图像描述](../Images/93b32d7185da37e516cf851f9a1429e8.png) ![在此处输入图像描述](../Images/02b2f3b364ef9215292e8c6df2a9c016.png)

通过接收令牌以帮助我继续执行此 magento api 以进行进一步的步骤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T22:41:10.097

问题是 OAuth 签名错误，Magento 错误响应清楚地表明了这一点。

调试签名过程是一个相当困难的过程，要通过 StackOverflow 问题来完成。查找和修复错误的最佳方法是在您自己的计算机上本地执行此操作。您需要通过Magento编写签名的方式（检查`Zend_Oauth_Http_Utility::sign()`方法，它将引导您进入`Zend_Oauth_Signature_Hmac`课堂）并逐步将过程与iOS侧的过程进行比较。这将帮助您找到不同之处。

大多数情况下，出现这样的问题是由于三个原因：

1.  数据部分的错误顺序（在当前情况下 - 您的 'oauth_*' 参数），已处理以获取签名。
2.  签名算法错误，自己实现时
3.  为了将二进制签名转换为字符串并通过 HTTP 传递而进行了错误的编码

比较 Magento 和 iOS 进程及其中间结果，将帮助您找到它们开始不同的步骤。因此，您将能够理解需要修复的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T08:05:00.510

1) 获取 oAuth 令牌

```
oauth \
  --verbose \
   --query-string \
   --consumer-key v484mnii2jyswedm6uo2cfcjay7uy49snws \
   --consumer-secret koay6845che7giy5lr17gnrhckkbhf8h5 \
   --access-token-url http://www.yourstore.com/magento/oauth/token \
   --authorize-url http://www.yourstore.com/magento/oauth/authorize \
   --request-token-url http://www.yourstore.com/magento/oauth/initiate \
   authorize

Server appears to support OAuth 1.0a; enabling support.
Please visit this url to authorize:
http://www.yourstore.com/magento/oauth/authorize?oauth_token=ey6fokp0pbzwr1016eb528y5xw1ak5ji

Please enter the verification code provided by the SP (oauth_verifier):
YOUR_CODE_HERE

Response:
  oauth_token_secret: g9kyz8c7zv868d58eav1muih3gxvq763
  oauth_token: aqvlfv9tuexn0mqiydgkaff4ixxg8743c 
```

您访问的授权 url 将要求您登录（作为客户，除非您使用管理员授权 url：/admin/oAuth_authorize）。您将登录然后像这样授权客户端。

![在此处输入图像描述](../Images/48cee77950b860135ccffce504350aee.png)

成功登录并授权后，您应该会看到此对话框，您需要将验证程序代码复制到 oauth 命令行中以完成该过程。

![在此处输入图像描述](../Images/b631867ed90137933c102fc82adada7c.png)

2) 使用 oAuth 令牌进行 API 调用

```
oauth \
    --consumer-key v484mnii2jyswedm6uo2cfcjay7uy49snws \
    --consumer-secret koay6845che7giy5lr17gnrhckkbhf8h5 \ 
    --token aqvlfv9tuexn0mqiydgkaff4ixxg8743c \
    --secret g9kyz8c7zv868d58eav1muih3gxvq763 \ 
    --uri http://www.yourstore.com/magento/api/rest/products \
    debug 
```

请参阅此[http://www.aschroder.com/2012/04/introduction-to-the-magento-rest-apis-with-oauth-in-version-1-7/](http://www.aschroder.com/2012/04/introduction-to-the-magento-rest-apis-with-oauth-in-version-1-7/)

# cocoa - -[NSBitmapImageRep representationUsingType:properties:] 导出特定的 BMP 配置？

> ID：13658502
> 
> 赞同：1
> 
> 时间：2012-12-01T10:29:46.333
> 
> 标签：cocoa, bitmap, nsimage, nsimagerep

我试图弄清楚如何从 NSBitmapImageRep 导出 BMP 数据，但似乎没有我可以添加任何属性来指定如何创建 BMP。具体来说，我想导出一个 ARGB8（即 alpha、red、green、blue 各 8 位）。当我传入 NSBMPFileType 类型时，输出应该如何构造，有没有办法改变这种输出方式？如果没有，任何人都可以推荐一种更好的方法来做我想做的事情吗？

# oracle - PL/SQL 执行过程失败，无法检索编译警告

> ID：13658505
> 
> 赞同：1
> 
> 时间：2012-12-01T10:30:05.523
> 
> 标签：oracle, stored-procedures, plsql

在之前的一篇文章中，我在编译下面的过程时遇到了一些问题（它应该`profile`根据作者编写的任务数量来更新属性） - 现在，它确实编译了（虽然有警告）并且当我尝试执行它时， 它失败。我不知道为什么。我正在使用 ExecuteQuery 连接到远程 Oracle 数据库。该过程涉及的表是：

```
Task(TaskID, ..., AuthorID)
Author(AuthorID, profile, name, ...) 
```

这是程序（我的具体问题如下）：

```
ALTER SESSION SET PLSQL_WARNINGS='ENABLE:ALL';
CREATE OR REPLACE PROCEDURE profil_stufe
IS
    CURSOR c1 IS SELECT AuthorID, COUNT(AuthorID) as Total FROM Task
                 GROUP BY AuthorID;
    result INTEGER c1%ROWTYPE;
BEGIN
    OPEN c1;
        LOOP
        FETCH c1 INTO result;
        EXIT WHEN c1%NOTFOUND;

      IF(result.Total = 2 OR result.Total = 3) THEN
        UPDATE Author SET profile = 'Advanced' WHERE AuthorID = result.AuthorID;
      END IF;

      IF(result.Total >= 4) THEN
        UPDATE Author SET profile = 'proficient' WHERE AuthorID = result.AuthorID;
         END IF;
    END LOOP;
  CLOSE c1;
END; 
```

我的问题：

1.  首先，我无法检索编译过程时产生的警告。我尝试了类似的查询`select plsql_warnings from user_plsql_object_settings ps where ps.name = 'profil_stufe';`，`select * from user_errors ur where ur.name = 'profil_stufe';`但都没有提供任何结果，即使该过程确实编译时出现警告。

2.  当我执行时`execute profil_stufe`出现错误

> ORA-06550：第 1 行，第 16 列：PLS-00905：对象 CS261_20.PROFIL_STUFE 无效 ORA-06550：第 1 行，第 7 列：PL/SQL：语句被忽略

有人可以帮帮我吗？我知道，我可以避免创建过程并以其他方式实现相同的功能。但似乎我缺少一些 PL/SQL 的基本概念，我真的很想了解它们……所以，感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:38:24.983

为什么你有变量声明：`result INTEGER c1%ROWTYPE;` 它应该是`result c1%ROWTYPE;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T11:40:23.760

我认为这里真正的问题是您的编码实践导致您找到了一个不必要的复杂解决方案，其中您引入了一个错误。

您应该尽量减少游标的使用，尤其是显式游标，并尽量减少执行的 SQL 语句的数量，尤其是在为结果集的每一行执行一个 DML 语句时。

在这里，我已将您的逻辑转换为 MERGE 语句，并使用 HAVING 子句限制从任务查询返回的行数。这是一个 MERGE，因为 Oracle 的 UPDATE 语法不像其他系统那样灵活。

```
 create or replace procedure profil_stufe
 is
 begin
   merge into
     author tgt
   from (
     select   authorid,
              case when count(*) >= 4
                then 'proficient'
                else 'Advanced'
              end profile
     from     task
     group by authorid
     having   count(*) >= 2) src
   on (src.author_id = tgt.author_id)
   when matched then update
   set profile = src.profile
 end; 
```

上面的语法没有在真实系统上检查，但应该很接近。

无论如何，这个方法应该是：

1.  更快，因为它是单个查询，也将处理更少的数据。
2.  更健壮，因为代码更简单。
3.  更容易测试，因为 MERGE 语句的 USING 查询可以很容易地单独测试，并且整个 MERGE 语句可以在 SQL*Plus 中运行。

# memory - 用户逻辑内存和虚拟内存有什么区别？

> ID：13658506
> 
> 赞同：2
> 
> 时间：2012-12-01T10:30:09.783
> 
> 标签：memory, memory-management, operating-system

有人能指出用户逻辑内存和虚拟内存之间的区别吗？举个例子真的很有帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T15:49:34.897

就用户而言，他所有的逻辑内存都是虚拟的。虚拟内存是一种基础架构，它允许寻址比机器上现有的物理内存 (RAM) 更多的内存。这是可能的，因为即使程序可能需要大量内存，在任何给定时刻，被寻址的内存都是有限的。内存管理器将未使用的内存分页到磁盘，释放物理内存。每当需要换出的内存时，内存管理器就会访问磁盘并将块加载回物理内存，从而允许用户进程使用它。

# java - 代码编译但不执行Java

> ID：13658508
> 
> 赞同：0
> 
> 时间：2012-12-01T10:30:23.233
> 
> 标签：java

我已经编写了下面的代码，据我猜测它应该可以正确执行，但它没有，我正撞到墙上。在找到要添加到临时向量列表的对象后，我要做的是循环遍历向量列表，获取每个文件名并计算单词的出现次数。我可以让两段代码分别工作，但是当我把它们放在一起时，代码在临时向量列表被填充后停止执行。谁能从我下面的代码中看到是什么阻止了其余代码的执行？

编辑的代码 >> 我已经在代码中更改了一些内容以正确格式化并删除重复但现在没有任何内容输出到屏幕上。我确定这很简单，但我似乎无法看到它。

```
 for(int m = 0; m < temp.size() && occurCount < wordCount;m++)
                    {
                    File aFile2 = new File(temp.elementAt(m));
                    FileReader aFileReader = new FileReader(aFile2);
                    BufferedReader aBufferReader = new BufferedReader(aFileReader);

                    while((line = aBufferReader.readLine()) != null && occurCount < wordCount)
                    {

                        words  = line.toLowerCase().split(" ");
                        if (line == null)
                            break;
                        else 
                        {
                            for(int k = 0; k < words.length && occurCount < wordCount;k++)
                            {
                                if(words[k].matches(wordToSearch))
                                {
                                    occur++;

                                    q.add(words[k]);

                                }
                                else if(words[k].matches(pattern))
                                {
                                    System.out.println(words[k]);

                                        if(temp.contains(words[k]))
                                            System.out.println("Word already in list");
                                        else
                                        {
                                            temp.add(words[k]); 
                                        }

                                }

                            }
                        }
                        lineFile = "";  

                    }
                    occurCount = occur;
                    occur = 0;
                    aBufferReader.close();
                    searched.add(temp.elementAt(m));
                    occurCount2 += occurCount;
                    //occurCount += occurCount;

                   System.out.println(occurCount);
                   System.out.println(q);
                   System.out.println(temp);
                   System.out.println(searched); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:44:39.753

```
 char aChar = 'x';
                for (int i = 0; i <= line.length()-1; i++) 
                {
                    aChar = line.charAt(i);
                    lineFile += aChar;
                }

                words = lineFile.split(" ");
                if (line == null)
                    break;
                lineFile = ""; 
```

将与以下内容相同：

```
 words = line.split(" "); 
```

* * *

```
 for(int k = 0; k <= words.length - 1;k++)
                {
                    if(words[k].matches(pattern))
                    {
                        System.out.println(words[k]);
                        if(!searched.contains(words[k]))
                        {
                            if(temp.contains(words[k]))
                                System.out.println("Word already in list");
                            else
                            {
                                temp.add(words[k]); 
                            }
                        }
                    } 
```

通常会使用`for (int i = 0; i < n; i++)`而不是`<= n - 1`.

**您使用了 temp.add，它可能应该是 search.add，否则外部循环会继续：（`for ... < temp.size()`）**

```
 for (String word : words)
                {
                    if (word.matches(pattern))
                    {
                        System.out.println(word);
                        if (!searched.add(word))
                            System.out.println("Word already in list");
                        }
                    } 
```

`add`当单词已经包含在集合中时返回 false。

`words`必须是通用类型，如`Set<String>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T10:39:48.827

首先，重构你的代码。我的意思是考虑一下并尝试将其写得更好。例如以下部分

```
line = line.toLowerCase();
char aChar = 'x';
for (int i = 0; i <= line.length()-1; i++) {
    aChar = line.charAt(i);
    lineFile += aChar;
}

words  = lineFile.split(" "); 
```

可以改写为

```
words = line.toLowerCase().split(" "); 
```

而且你有两次编写相同的代码部分 - 将它们提取到某些方法中。

我猜您的代码中还有更多内容。获得后，将相关部分粘贴到此处，我们会看到...

# linux - Bash-将文件解析为数组

> ID：13658519
> 
> 赞同：1
> 
> 时间：2012-12-01T10:31:18.403
> 
> 标签：linux, arrays, bash, fileparsing

我有这个文件

```
Seq1
10 1 5
10 2 6
10 3 9
Seq2
15 2 7
15 4 9
15 8 12 
```

我想为每个 Seqs (Seq1, Seq2) 设置这样的数组：

```
2ndColumn=(1,2,3) 
3rdColumn=(5,6,9) 
```

我写了这个，但它并没有打破while循环..

```
#!/bin/bash
2ndColumn=()
3rdColumn=()
while read line 
do
if [[ $line == S* ]] 
 echo "$line"
else
 i=0
 while [[ $line != S* ]]
 do
  2ndColumn[i]="$(echo $line | cut -d\  -f2)"
  3rdColumn[i]="$(echo $line | cut -d\  -f3)"
  i=$((i+1))
  read line
 done
 echo "${2ndColumn[@]} and ${3rdColumn[@]}"
fi
done < file
exit 0 
```

该脚本将永远迭代，它不会退出 while 循环。请帮帮这个愚蠢的人:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:54:41.253

我将对其进行重构以使用单个循环而不是嵌套循环，并在标准输入上进行嵌套读取调用：

```
2ndColumn=()
3rdColumn=()
i=0
while read line 
do
    if [[ $line == S* ]] 
        echo "$line ==> ${2ndColumn[@]} and ${3rdColumn[@]}"
        # reset the lists...
        2ndColumn=()
        3rdColumn=()
        i=0
    else
        2ndColumn[i]="$(echo $line | cut -d\  -f2)"
        3rdColumn[i]="$(echo $line | cut -d\  -f3)"
        i=$((i+1))
    fi
done 
```

这将避免内部读取调用的问题，该调用可能在输入标准输入文件句柄时被阻止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T11:47:13.383

*   你不能改变*光标*线`while read`

我为你写了这个，用一点[技巧](/questions/tagged/hack "显示标记为“黑客”的问题")来为数组名称添加前缀`seq N+1`：

```
#!/bin/bash

file=file.txt

while read line; do
    if [[ $line == S* ]]; then
        echo "$line"
        i=0
        ((Seq++))
    else
        declare seq${Seq}_2ndColumn[i]="$(echo $line | cut -d\  -f2)"
        declare seq${Seq}_3rdColumn[i]="$(echo $line | cut -d\  -f3)"
        ((i++))
    fi
done < "$file"

echo "${!seq*} arrays are declared" 
```

**输出**

```
seq1_2ndColumn seq1_3rdColumn seq2_2ndColumn seq2_3rdColumn arrays are declared 
```

**解释**

*   `${!pattern*}`是 bash 的一个很好的功能，可以显示以*模式开头的变量*
*   `(( ))`是一个算术命令，如果表达式非零，则返回退出状态 0，如果表达式为零，则返回 1。如果需要副作用（分配），也用作“让”的同义词。见[http://mywiki.wooledge.org/ArithmeticExpression](http://mywiki.wooledge.org/ArithmeticExpression)

**奖金**

如果您可以控制数组中的内容，请尝试在最后执行此操作::

```
for s in ${!seq*}; do
    printf '\t%s\n' $(eval echo \${$s[@]})
done 
```

见[http://mywiki.wooledge.org/BashFAQ/048](http://mywiki.wooledge.org/BashFAQ/048)

新的**输出**

```
seq1_2ndColumn
        1
        2
        3
seq1_3rdColumn
        5
        6
        9
seq2_2ndColumn
        2
        4
        8
seq2_3rdColumn
        7
        9
        12 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T10:47:31.303

```
file=/PATH/TO/file.txt

arr1=( $(awk '/^Seq/{l++} l==1{print $2}' "$file") )
arr2=( $(awk '/^Seq/{l++} l==1{print $3}' "$file") )

echo "arr1:"
printf '\t%s\n' ${arr1[@]}

echo "arr2:"
printf '\t%s\n' ${arr2[@]} 
```

# android - 如何在android中的现有应用程序中包含小部件？

> ID：13658520
> 
> 赞同：0
> 
> 时间：2012-12-01T10:31:24.790
> 
> 标签：android, android-widget

我有一个应用程序。我为我的应用程序开发了一个小部件。这两个都是单独开发的。我想将此小部件包含到我现有的应用程序中。这样，当用户安装我的应用程序时，小部件也会自动安装。我该如何实现这一目标？提前感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:06:46.080

I did this in one of my project. I don't have my business laptop in hand, so I have no way to show you detailed code. But I can tell you that, Android don't allow you to directly install a widget in your application. You must use Android standard way to install widget to your application. In other words, you need to invoke system widget list, just when like you long-tap on home screen a widget list is pop up. After user choose a widget from the list, your application will get the widget's handle (or id), then you can use the widget handle to embed widget view to your application's view.

# shader - 如何计算“查看逆矩阵”

> ID：13658522
> 
> 赞同：0
> 
> 时间：2012-12-01T10:31:30.907
> 
> 标签：shader, geometry-shader

我正在尝试使用 RenderMonkey 推出的粒子系统示例，它使用“视图逆矩阵”来展示粒子效果的四边形。

我可以从 RenderMonkey 中看到所有值，但我无法弄清楚它们是如何计算“视图逆矩阵”的，它不是视图矩阵的逆矩阵或视图投影的逆矩阵。

这是我所知道的，名称是“变量语义”：

```
ViewPosition:
25.044189 105.753433 240.177200 1.0

ViewProjection:
1.663676 0.483806 -.351623 -8.377671
-.790789 2.134270 -.804967 -12.567072
-.084668 -.379295 -.922480 262.789917
-.084583 -.378916 -.921558 263.527130

View:
1 0 0 0
0 1 0 0
0 0 1 -200
0 0 0 1

ViewTranspose:
.913838 .148949 -.377775 0
-.257723 .931662 -.256095 0
.313814 .331391 .889776 0
-.000004 -.000081 -200 1

ViewInverse: <-This is what I want to calculate
.941038 -.327556 .084583 25.044195
.273659 .884044 .378917 105.753433
-.198891 -.333427 .921557 240.177200
0        0        0       1 
```

**编辑**，我认为 RenderMonkey 中存在错误，因为 Viewmatrix 在我移动时永远不会更新，除非我激活另一个效果并返回原始状态。

来自这篇文章：[http ://swiftcoder.wordpress.com/2008/11/25/constructing-a-billboard-matrix/](http://swiftcoder.wordpress.com/2008/11/25/constructing-a-billboard-matrix/)

我相信它是：

```
 V.a V.e V.i x
 V.b V.f V.j y
 V.c V.g V.k z
 0   0   0   1 
```

其中 V 表示 View 矩阵的旋转部分的倒数，x,y,z 表示 View 位置。但在我尝试之前我无法确认，因为渲染猴子错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:00:46.807

确认，我有广告牌工作。这是java：

```
/**
 * 
 * @param viewMatrix
 *            4x4 (16 floats)
 * @param viewPosition
 *            3x1 (3 floats)
 * @param resultMatrix
 *            4x4 (16 floats)
 */
public static void calculateViewInverse(float[] viewMatrix,
        float[] viewPosition, float[] resultMatrix) {
    // derived from:
    // http://swiftcoder.wordpress.com/2008/11/25/constructing-a-billboard-matrix/
    // A rotation matrix is a
    // "real special orthogonal matrix", which for our purposes means that
    // its transpose is also its inverse.
    resultMatrix[0] = viewMatrix[0];

    resultMatrix[1] = viewMatrix[4];
    resultMatrix[4] = viewMatrix[1];

    resultMatrix[2] = viewMatrix[8];
    resultMatrix[8] = viewMatrix[2];

    resultMatrix[5] = viewMatrix[5];

    resultMatrix[6] = viewMatrix[9];
    resultMatrix[9] = viewMatrix[6];

    resultMatrix[10] = viewMatrix[10];

    resultMatrix[3] = viewPosition[0];
    resultMatrix[7] = viewPosition[1];
    resultMatrix[11] = viewPosition[2];

    resultMatrix[12] = 0;
    resultMatrix[13] = 0;
    resultMatrix[14] = 0;

    resultMatrix[15] = 1;
} 
```

# javascript - 使用 Javascript 输出 Json 数组

> ID：13658523
> 
> 赞同：5
> 
> 时间：2012-12-01T10:31:34.783
> 
> 标签：javascript, arrays, json, jquery

我对 Javascript 和 Json 真的很陌生，需要以下帮助。这是一些json数据：

```
"genres": [

 {
    "id": 28,
    "name": "Action"
 },
 {
    "id": 18,
    "name": "Drama"
 },
 {
    "id": 14,
    "name": "Fantasy"
 },
 {
    "id": 36,
    "name": "History"
 }

], 
```

现在我想输出所有类型的名称

我正在使用 jquery mobile 和 ajax 来检索 json 数据。在我的函数内部，它看起来像这样：

```
var genres = results.genres[0].name;
$('#tmdbInfo2').html('<br>Genres: ' +genres); 
```

在这个例子中，我们将展示流派的第一个元素（动作），但不是全部。输出应该是：动作、戏剧、幻想、历史。有时流派的元素数量会有所不同。

请帮助我，这对我来说很困惑 O_o

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T10:36:28.943

### 纯Javascript

这就是您使用循环迭代数组元素的方式`for`（如果您受到诱惑，[请不要`for...in`在数组上使用循环）。](https://stackoverflow.com/questions/500504/javascript-for-in-with-arrays)

```
for (var i = 0; i < results.genres.length; i++) {
    console.log( results.genres[i].name );
} 
```

你的数组`results.genres`在这里被调用。在循环内部，`results.genres[i]`将始终引用当前元素。

### jQuery

我看到你正在使用 jQuery，所以你也可以[`$.each()`](http://api.jquery.com/jQuery.each/)这样使用：

```
$.each(results.genres, function (currentIndex, currentElem) {
    console.log( currentElem.name );
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-01T10:37:42.073

另一种迭代方式：

```
results.genres.forEach(function(genre) {
    console.log(genre.name);
}); 
```

对于您要执行的操作：

```
$('#tmdbInfo2').html(
    'Genres: ' + results.genres.map(function(genre) {
        return genre.name;
    }).join(', ')
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-07T07:06:49.520

您可以使用这样的 for-in 循环访问数组值：

```
var result = "";

for (i in genres.name) {
  result += genres.name[i];
} 

console.log(result); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-15T11:56:57.097

***您可以使用***

```
<script>
   results = '{ "genres": [{ "id": 28, "name": "Action" },{ "id": 18, "name": "Drama" },{ "id": 14, "name": "Fantasy" },{ "id": 36, "name": "History" }] }';    
   results = JSON.parse(results);

       for($i in results.genres){
            console.log(results.genres[$i].name);
       }

</script> 
```

**JSON.parse**方法将字符串解析为 JSON，可选择转换解析产生的值，您可以像数组一样从节点获取值。当您使用时，您`for($i in results.genres)`不会设置限制大小，'获取所有数组/对象元素的情况。

**组元素**需要介于**{** "genres": [{ ...}] **}**之间，以便您的 JSON 被读取。

# mysql - mysql aws安全组设置的安全隐患

> ID：13658525
> 
> 赞同：0
> 
> 时间：2012-12-01T10:31:48.270
> 
> 标签：mysql, amazon-web-services

我有一个安装了 mysql 的 ec2 实例。服务器侦听来自任何 ip (bind-address = 0.0.0.0) 的连接。

我已经设置了 mysql 安全组，只有我的 webapp 实例才能远程连接到 mysql db。为此，我向我的实例添加了一个 webapp-sg 安全组（webapp-sg 限制为 http、https 和 ssh）然后对于我的 mysql 实例，我只是使用 webapp-sg 组作为“源”。我已经验证了 1\. 我无法从外部 ec2 实例远程登录 2\. 在 ec2 实例中，我必须在具有安全组 =webapp-sg 的 ec2-instance 上

但是，webapp 实例和 mysql db 之间的流量仍然是明文。有什么影响？（我看到很多推荐上述设置的文章）。人们是否为此使用“Mysql over ssl” - 我怀疑这会对性能产生影响？还是 aws vpc 解决了这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T06:49:43.613

简短的回答：这是推荐的操作方式。去吧。

更长：这取决于。取决于您的应用程序所需的安全级别，以及您愿意花费的工作量、复杂性、可用性和维护成本。虽然理论上建议任何机器间的流量都应该加密，尤其是在像公共云这样的多租户环境中——AWS 已经花费了很多精力来使其基本安全组提供可靠的安全组。 [请参阅“网络安全”一章](http://d36cz9buwru1tt.cloudfront.net/pdf/AWS_Security_Whitepaper.pdf)

那将使窃听或数据包欺骗都不太可能发生。如果您现实一点，那么黑客更有可能（按数量级）将您的 Web 应用程序错误和漏洞用作主要攻击媒介。

也可能是安全组配置错误的可能性。[Dome9](http://www.dome9.com/secops-for-aws)和[Newvem](http://newvem.com)等专用服务可能有助于获得洞察力并管理您的安全配置。（披露——我是 Dome9 联合创始人）

最后，VPC。虽然在架构上与 EC2 没有太大区别，但建议使用它，因为它带来了更多的配置能力，以及执行策略的第二种方法（网络 ACL）。这可能会引入一些复杂性和更多的维护，但可以减少错误配置的影响。

# spring - 通过 Spring 事务管理标记为只读的所有服务方法更新数据库

> ID：13658529
> 
> 赞同：1
> 
> 时间：2012-12-01T10:32:06.373
> 
> 标签：spring

我正在学习春季交易管理。
我用过Spring3.0和oracle 10g进行练习。
以下是我的春季交易配置

```
 <aop:config>
      <aop:pointcut expression="execution(* com.spring.*.service.impl.*.*(..))" 
                    id="serivcePointcut"/>
      <aop:advisor advice-ref="txAdvice" pointcut-ref="serivcePointcut"/>
</aop:config>

<tx:advice id="txAdvice" transaction-manager="transactionManager">
     <tx:attributes>
         <tx:method name="get*" read-only="true"/>
         <tx:method name="find*" read-only="true"/>
         <tx:method name="*"/>
    </tx:attributes>
</tx:advice. 
```

我只是想检查通过get*方法插入任何记录是否会抛出异常，因为只读已被标记为true。所以我通过getCustomer（）方法插入了一条记录。但是猜猜插入记录而不是抛出异常是什么。

在日志中，我可以看到为 com.spring.customer.service.impl.CustomerServiceImpl 创建的事务。甚至日志显示将 jdbc 连接设置为只读。

谁能解释我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T13:46:22.843

[TransactionDefinition](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/transaction/TransactionDefinition.html#isReadOnly%28%29)的 javadoc说：

> 这只是作为实际事务子系统的提示；它不一定会导致写访问尝试失败。无法解释只读提示的事务管理器在请求只读事务时不会抛出异常。

[Connection](http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#setReadOnly%28boolean%29)的 javadoc说：

> 将此连接置于只读模式，作为对驱动程序启用数据库优化的提示。

简而言之，如果您的代码确实是只读的，则使用 readOnly 可能会提高性能。但这不会阻止您在此类事务中执行写入操作。

# cookies - 使用 Cookie 登录的 Socket.IO 最佳实践

> ID：13658531
> 
> 赞同：0
> 
> 时间：2012-12-01T10:32:09.887
> 
> 标签：cookies, login, socket.io

我正在寻找基于 Socket.IO 的使用 Cookie 登录的最佳实践。到目前为止，登录存在，但现在我想在不发送新页面的情况下编写一个 cookie，当用户回来时，他仍然会登录。当我说 Socket.IO 不可能时，我是对的，因为至少Flash-Fallback 不会在客户端正确保存cookie？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T22:43:12.787

**[Sails](http://sailsjs.com)**通过模拟每个传入 Socket.io 调用的 Express 请求来解决这个问题。您需要考虑的一种情况是，如果 ws:// 请求http:// 请求通过*之前命中。*在这种情况下，您还没有 cookie。在没有 cookie 的情况下，我通常不会完全放弃 cookie 作为持久性系统，而是触发一个 http 请求来尝试获取一个。希望有帮助！

# javascript - for循环在javascript中意外结束

> ID：13658535
> 
> 赞同：0
> 
> 时间：2012-12-01T10:32:27.907
> 
> 标签：javascript

我有一个调用此函数的 html 按钮。但由于未知原因，它只进行了 3 次迭代。

谁能帮助或向我推荐一些很好的例子，为什么 for 循环在第三次迭代后中断？

```
for(i = 1; i < 10; i++) {
   alert(i);
  if (document.getElementById(i).checked) {
    alert("dda3");
    act = act + document.getElementById("TD" + i).innerHTML + delimiter;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T10:34:09.580

最可能的原因是您没有具有`id`value的元素`"4"`。因此，`document.getElementById`返回`null`，然后当您尝试查看`checked`属性时，您正在取消引用 a `null`，这会引发异常。或者，当然，您没有具有该`id`值的元素，`"TD4"`因此您稍后会`getElementById`返回`null`，并且在分配给`innerHTML`.

尝试调试时，最好使用调试器。所有现代浏览器都内置了调试器——其中一些非常好。在大多数浏览器上，按 F12 会调出调试器，但如果没有，请查看“开发者工具”或类似的菜单。

即使没有调试器，十多年前的所有浏览器都可以告诉您 JavaScript 错误。我至少会启用它，以便您可以看到错误。

* * *

旁注：`id`以数字开头的值最近才允许在 HTML 中使用（在 HTML5 中有效，在 HTML4 或更早版本中无效）并且在 CSS 中仍然无效。我建议避免使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T10:43:24.227

可能您没有具有该 ID 的元素，这就是它破坏 for 循环的原因，请尝试在代码的 html 部分中初始化您不递增或递减的名称，如果您正确执行（在 while for 或 foreach 循环）也许您正在为 2 个不同的循环使用相同的 $i 变量或更改其值（$i++ 或 $i-- 除外）

# javascript - javaScript 动画图像 onmouseover/onmouseout

> ID：13658540
> 
> 赞同：0
> 
> 时间：2012-12-01T10:33:20.690
> 
> 标签：javascript, animation, settimeout, onmouseover, onmouseout

我有一个开门的动画（41 帧），我想使用 javaScript 让它在 onmouseover 上打开，我希望它回到第 1 帧 onmouseout。我认为我在 onmouseout 部分做得不太对。在此先感谢您的帮助！

```
HTML:
    <div onmouseover="startAnimation()" onmouseout="stopAnimation()" id="door2"></div>
    <div id="door">
    <img src="images/Animation_Door/0001.png">
    <img src="images/Animation_Door/0002.png">
    <img src="images/Animation_Door/0003.png">
    ...etc...(41 frames)

css:
    #door img{
    display: none;
    }

    #door img:first-child {
    display: block;
    }

javaScript:
    function startAnimation() { 
    var frames = document.getElementById("door").children;
    var frameCount = frames.length;

    for (i=0; i<41; i++) {
    setTimeout(function(){
    frames[i % frameCount].style.display = "none";
    frames[++i % frameCount].style.display = "block";
    }, 50*i);
    }
    }

    function stopAnimation() {
    var frames = document.getElementById("door").children;
    var frameCount = frames.length;

    for (i=0; i<1; i++){
    setTimeout(function(){
    frames[++i % frameCount].style.display = "none";
    frames[i % frameCount].style.display = "block";
    }, 50*i);
    }
    } 
```

这是它的链接： [http ://www.reveriesrefined.com/test](http://www.reveriesrefined.com/test)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T00:31:37.690

我认为这可能更像你想要的：

```
var ti, frame = 0,
frames = document.getElementById('door').children;

function resetAnimation() {
    frame = 0;
    frames[0].style.display = 'block';
    for (var i = 1; i < frames.length; i++) {
        frames[i].style.display = 'none';
    }
}
function startAnimation() {
    console.log('start animation');
    resetAnimation();
    ti = setInterval(function() {
        frames[frame].style.display = 'none';
        frame ++;
        if (frame >= frames.length) frame = 0;
        frames[frame].style.display = 'block';
    }, 50);
}
function stopAnimation() {
    if (ti) {
        clearInterval(ti);
        ti = undefined;
    }
    resetAnimation();
}​ 
```

请注意，当您想要连续动画时，通常使用 setInterval 比使用 setTimeout 更合适。一个全局变量存储我们当前正在查看的帧。resetAnimation 将帧设置为零并相应地设置显示。startAnimation 设置一个间隔计时器，它隐藏旧帧，将帧增加一帧，并显示新帧，每 50 毫秒。停止动画只是清除间隔计时器并重置动画。

# .net - 第三方库未复制到项目输出，尽管它设置为复制本地

> ID：13658542
> 
> 赞同：0
> 
> 时间：2012-12-01T10:33:32.647
> 
> 标签：.net, visual-studio, dependencies

我对 Visual Studio 2008 有一个依赖问题，在解决方案中有两个项目*ProjectA*和*ProjectB*。*ProjectA*有一个 ProjectB 的参考，*而*ProjectB*有一个设置为***Copy Local**的第三方库的参考。

现在，在构建*ProjectA时，* *ProjectB*引用的第三方库尚未复制到*ProjectA*输出。

我错过了什么还是这是默认行为？我面临的问题是，当我将应用程序部署在 GAC 中没有此第三方库的机器上时，它会引发依赖异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:59:44.820

MSBuild 行为非常简单。在以下情况下，它将复制引用项目的输出程序集的任何依赖项：

*   参考上的 Copy Local 设置为 True
*   可以从引用的元数据中找到依赖关系。请注意，如果以不寻常的方式加载任何依赖项，这将防止任何依赖项被复制，例如 Assembly.Load()
*   依赖项与构建时的引用存在于同一目录中。如果由于任何原因不存在，则不会发出警告
*   依赖项未在 GAC 中注册

如果您错过了前三个项目符号中的任何一个，那么您也将无法调试您的解决方案。注意第四个子弹，它似乎与您问题中的最后一句话相匹配。

# mysql - 为什么这个 MySQL 插入这么慢？

> ID：13658543
> 
> 赞同：2
> 
> 时间：2012-12-01T10:33:44.020
> 
> 标签：mysql, optimization

```
CREATE  TABLE IF NOT EXISTS `church` (
  `church_id` INT(11) NOT NULL AUTO_INCREMENT ,
  `name` VARCHAR(40) NOT NULL ,
  `city_id` SMALLINT(4) UNSIGNED ZEROFILL NOT NULL ,
  `validated` TINYINT(1) NULL ,
  PRIMARY KEY (`church_id`) ,
  INDEX `church.city_id-city.city_id_idx` (`city_id` ASC) ,
  UNIQUE INDEX `church-city_id` (`name` ASC, `city_id` ASC) ,
  CONSTRAINT `church.city_id-city.city_id`
    FOREIGN KEY (`city_id` )
    REFERENCES `city` (`city_id` )
    ON DELETE RESTRICT
    ON UPDATE RESTRICT)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8 
```

我的本地主机（笔记本电脑）上有这张桌子`church`。当我对其进行插入时（它`10`现在有行），需要 160 毫秒。

*   Church_id 在其他表中用作外键。
*   name 和 city_id 一起应该是唯一的。
*   city_id 是外键

这不是很多，我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T11:04:03.487

插入必须做很多工作：

*   锁定表
*   检查唯一索引约束
*   检查外键约束
*   写入新记录
*   更新索引
*   解锁桌子
*   写事务日志

# php - php simplexml_load_file 和空变量

> ID：13658546
> 
> 赞同：0
> 
> 时间：2012-12-01T10:34:14.173
> 
> 标签：php, simplexml

我有这个非常简单的 php 代码：

`$xml=simplexml_load_file('abc.xml'); echo $xml;`

它只显示空白页，没有字符，什么都没有……为什么？simplexml_load_file 工作正常吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:36:15.820

`$xml`是一个对象。您可以使用“可视化”它

```
var_dump($xml); 
```

您应该阅读 PHP 文档中关于 simplexml 的示例部分：http: [//php.net/manual/en/simplexml.examples-basic.php](http://php.net/manual/en/simplexml.examples-basic.php)以了解如何显示特定节点信息。

如果要直接显示 xml 的内容，可以这样做：

```
//output xml in your response:
header('Content-Type: text/xml');
echo $xml->asXML(); 
```

# java - 数据库负载均衡

> ID：13658551
> 
> 赞同：1
> 
> 时间：2012-12-01T10:35:36.060
> 
> 标签：java, database, jsp, servlets, jdbc

我将开始研究一个巨大的应用程序。在此之前，我想为它做好准备。

这是一个将在全球范围内使用的应用程序，并且将有大量用户同时使用它。

1.  所以我认为，一台数据库服务器上会有很大的负载，在很短的时间范围内会有大量的数据库请求/查询。所以这会影响系统的性能，对吧？

2.  如果数据库服务器出现故障，网站所有者将付出巨大的代价。

所以我该怎么做？有什么技术或我可以使用的东西吗？如果我可以使用多个数据库，那么如何？所有数据库都包含相同的信息吗？我可以在差异之间加入表格（使用任何技术或工具）吗？数据库？或者我必须在每个数据库中进行多个查询？

应用程序将使用：jboss、jsp、servlet、mysql

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:05:12.057

It is always best if requirements can be given with some precision. For instance, we expect no more than 1,000 users to be hitting the database simultaneously is a clear design requirement. "There will be a big number of users" is much less helpful. Of course, we can not always predict how much traffic a web application will get and requirements often change over time.

If a database will be experiencing far more reads than writes, then caching data from the database can improve performance. This was the topic of a recent podcast that you might want to listen to: [http://javaposse.com/java-posse-399-roundup-12-distributed-caching](http://javaposse.com/java-posse-399-roundup-12-distributed-caching)

Spreading a database among many servers is a complicated task because you need to deal with synchronization issues. Your best bet is to find a service or API that takes care of this issue for you. You can use MySQL, (see [this question](https://stackoverflow.com/questions/1610887/how-to-partition-mysql-across-multiple-servers)) but another database designed for this sort of scaling is probably a better choice. Take a look at [hadoop](http://hadoop.apache.org/).

# asp.net - 需要从 ASP.net 在服务器中执行 *.exe

> ID：13658555
> 
> 赞同：20
> 
> 时间：2012-12-01T10:36:28.410
> 
> 标签：asp.net, windows, web-services, windows-server-2008

我目前的情况是我需要在远程服务器中执行一个 exe（它创建一个本地 .txt 文件），而 IIS 托管一个 ASP.net/C# API。我创建了一个本地用户（比如 userA）作为管理员在远程服务器中运行 Web 服务，但没有创建 .txt 文件。我已经检查并授予 userA 必要的文件夹权限，并将用户添加到各个组中。有趣的是，如果我在远程系统中以 userA 身份登录，exe 会按预期执行。如果我注销，那么它会失败。服务器是带有 IIS 7 的 Win server 2008。任何帮助将不胜感激。

更新：我已经解决了这个问题，并在 SO 上发布了答案和一些相关问题的链接。简而言之，我需要在 IIS 应用程序池中设置“加载用户配置文件”为真。

感谢大家的贡献

编辑：从评论中提取的代码

```
Process proc = new Process(); 
proc.StartInfo.FileName = path; 
proc.StartInfo.Arguments = exeparams; 
proc.Start(); 
proc.WaitForExit(); 
stat = proc.ExitCode; 
if (stat != 0) 
{ 
    throw new Functions.log("Error"); 
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-03T06:18:23.607

更新：几周后我设法解决了这个问题。谢谢大家的贡献。显然 IIS 默认不加载 windows 用户配置文件。因此，当以未登录的其他用户身份运行时，他们的 Windows 配置文件必须由 IIS 加载。在您的应用程序池的高级设置菜单中，有一个选项“加载 Windows 配置文件”我刚刚将其更改为 true。在 IIS 的早期版本中，默认情况下将其设置为“true”。

具有相同解决方案的关于 SO 的相关问题：

1) [ASP.NET 中的安全异常和 IIS 7.5 中的加载用户配置文件选项](https://stackoverflow.com/questions/3068548/security-exceptions-in-asp-net-and-load-user-profile-option-in-iis-7-5)

2)[在 IIS7 上运行 asp.net web 应用程序项目抛出异常](https://stackoverflow.com/questions/697429/running-a-asp-net-web-application-project-on-iis7-throws-exception)

3)[新部署的 System.Web.AspNetHostingPermission 异常](https://stackoverflow.com/questions/2242039/system-web-aspnethostingpermission-exception-on-new-deployment)

另一个 4) [http://geekswithblogs.net/ProjectLawson/archive/2009/05/05/iis-system.web.aspnethostingpermission-exception-on-windows-7-rc.aspx](http://geekswithblogs.net/ProjectLawson/archive/2009/05/05/iis-system.web.aspnethostingpermission-exception-on-windows-7-rc.aspx)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-01T10:39:34.533

您可以使用 Process.Start

```
Process process = new Process();
process.StartInfo.FileName = "CVS.exe";
process.StartInfo.Arguments = "if any";
process.Start(); 
```

还有一篇关于在 asp.net 中以另一个用户身份运行进程的帖子：

[http://weblogs.asp.net/hernandl/archive/2005/12/02/startprocessasuser.aspx](http://weblogs.asp.net/hernandl/archive/2005/12/02/startprocessasuser.aspx)

[提供用户凭证](http://weblogs.asp.net/hernandl/archive/2005/11/21/usercredentialsdialog.aspx)

简而言之，它说您必须重定向该过程，代码如下：

```
ProcessStartInfo info = new ProcessStartInfo("cmd.exe");

info.UseShellExecute = false;

info.RedirectStandardInput = true;

info.RedirectStandardError = true;

info.RedirectStandardOutput = true;

info.UserName = dialog.User; // see the link mentioned at the top

info.Password = dialog.Password;

using (Process install = Process.Start(info))

{

      string output = install.StandardOutput.ReadToEnd();

      install.WaitForExit();

      // Do something with you output data

      Console.WriteLine(output);

} 
```

# mysql - 如何使用带有日期和时间的 phpmyadmin(mysql) 备份数据库 cron

> ID：13658559
> 
> 赞同：2
> 
> 时间：2012-12-01T10:36:53.067
> 
> 标签：mysql, database, phpmyadmin

如何每天凌晨 2:30 备份我的服务器数据库 PHPMYADMIN(MYSQL)，并在其上存储带有时间戳的 zip 文件。请帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-01T11:30:38.560

由于您想创建一个 cron，您可能需要使用 mysqldump 命令。

```
mysqldump -u database_user -pdatabase-password database_name | gzip -9 > /path/to/backup/directory/database-data/$(date +%Y-%m-%d-%H.%M.%S).sql.gz 
```

您的 cron 将如下所示：

```
30 2 * * * mysqldump -u database_user -pdatabase-password database_name | gzip -9  /path/to/backup/directory/database-data/$(date +%Y-%m-%d-%H.%M.%S).sql.gz 
```

在某些系统（如 RHEL）中，您可能需要对日期表达式中的字符进行转义。 [https://unix.stackexchange.com/questions/8584/using-the-system-date-time-in-a-cron-script](https://unix.stackexchange.com/questions/8584/using-the-system-date-time-in-a-cron-script)

在每个 % 之前添加一个 \。(\%Y-\%m-\%d-\%H.\%M.\%S)

# php - 当用户在 php 中离开我的网站时，如何删除图像？

> ID：13658564
> 
> 赞同：4
> 
> 时间：2012-12-01T10:37:21.107
> 
> 标签：php

**当用户离开我的网站**或关闭浏览器或在地址栏中输入任何其他 url时，我想删除图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T10:39:08.573

您无法捕获用户选择离开网站的时间。您最好在某处记录他们上次从会话中访问您的网站的时间，并在一段时间后进行某种 cron 工作来清除他们的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T10:41:42.570

这很难实施。没有正确的方法来检测用户何时离开您的网站。最准确的方法是向您的页面添加一个脚本，该脚本会以较小的间隔定期请求某个 URL。当用户离开时，这个 URL 不再被请求，你意识到用户已经离开了，你可以删除一些东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T10:42:37.513

好吧，我不是一个优秀的 JavaScript Pro，但我认为可能有一个功能可以检查用户是否离开页面。（想想这个不时出现的弹出窗口，你会被问到是否真的要离开这个页面。）你现在检查这个事件（页面离开）是否正在发生，当它发生时，你发送一个 AJAX 请求。您的 PHP 响应删除您的图像。

就像我说的，不确定 Javascript 中的这个函数是否有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T10:42:47.050

您可以在事件上使用 Javascript，`onbeforeunload`然后在异步设置为关闭的情况下执行 AJAX 请求，因此它会在用户离开之前“阻止”浏览器

您可以使用 jQuery 进行异步 AJAX 调用，如下所示：

```
window.onbeforeunload = function(){
   $.ajax({
      url:"your_delete_script.php", 
      async:false
   });
} 
```

或者您可以即时创建一个图像，其作用类似于执行脚本的信标。

```
window.onbeforeunload = function(){
  var img = new Image();
  img.src = "script.php";
} 
```

只要确保你的脚本在那个部分得到了`ignore_user_abort`，所以如果用户关闭浏览器它就会独立执行

# ios - ios 随机崩溃调试 - 帮助解释控制台信息

> ID：13658565
> 
> 赞同：-1
> 
> 时间：2012-12-01T10:37:25.860
> 
> 标签：ios, debugging, crash, console

当我的应用程序随机崩溃时，我在控制台中收到以下报告。它似乎发生在应用程序的不同屏幕上，但我在下面添加了一个示例。我不太确定从哪里开始解决此问题，因此您可以提供的任何帮助或建议都会很棒！谢谢 ：-）

```
Dec  1 10:27:41 Olivias-iPad Moonshine2[4171] <Warning>: [MPAVController] Autoplay:                 Disabling autoplay for pause
Dec  1 10:27:41 Olivias-iPad Moonshine2[4171] <Warning>: [MPAVController] Autoplay: Disabling autoplay
Dec  1 10:27:41 Olivias-iPad Moonshine2[4171] <Warning>: [MPAVController] Autoplay: Enabling autoplay
Dec  1 10:27:41 Olivias-iPad Moonshine2[4171] <Warning>: [MPAVController] Autoplay: Likely to keep up or full buffer: 0
Dec  1 10:27:41 Olivias-iPad Moonshine2[4171] <Warning>: [MPAVController] Autoplay: Skipping autoplay, not enough buffered to keep up.
Dec  1 10:27:41 Olivias-iPad Moonshine2[4171] <Warning>: [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 1, on player: 0)
Dec  1 10:27:41 Olivias-iPad Moonshine2[4171] <Warning>: [MPAVController] Autoplay: Enabling autoplay
Dec  1 10:27:41 Olivias-iPad Moonshine2[4171] <Warning>: [MPAVController] Autoplay: Likely to keep up or full buffer: 0
Dec  1 10:27:41 Olivias-iPad Moonshine2[4171] <Warning>: [MPAVController] Autoplay: Skipping autoplay, not enough buffered to keep up.
Dec  1 10:27:41 Olivias-iPad Moonshine2[4171] <Warning>: [MPAVController] Autoplay: Enabling autoplay
Dec  1 10:27:41 Olivias-iPad Moonshine2[4171] <Warning>: [MPCloudAssetDownloadController] Prioritization requested for media item ID: 0
Dec  1 10:27:42 Olivias-iPad Moonshine2[4171] <Warning>: [MPAVController] Autoplay: Enabling autoplay
Dec  1 10:27:42 Olivias-iPad Moonshine2[4171] <Warning>: [MPAVController] Autoplay: Likely to keep up or full buffer: 1
Dec  1 10:27:42 Olivias-iPad Moonshine2[4171] <Warning>: [MPAVController] Autoplay: Enabling autoplay
Dec  1 10:27:42 Olivias-iPad Moonshine2[4171] <Warning>: [MPAVController] Autoplay: _streamLikelyToKeepUp: 0 -> 1
Dec  1 10:27:42 Olivias-iPad Moonshine2[4171] <Warning>: [MPAVController] Autoplay: Enabling autoplay
Dec  1 10:27:42 Olivias-iPad Moonshine2[4171] <Warning>: [MPAVController] Autoplay: Enabling autoplay
Dec  1 10:27:42 Olivias-iPad Moonshine2[4171] <Warning>: [MPAVController] Autoplay: Enabling autoplay
Dec  1 10:27:42 Olivias-iPad Moonshine2[4171] <Warning>: This is my variable Moonshine
Dec  1 10:27:42 Olivias-iPad Moonshine2[4171] <Warning>: i'm moon
Dec  1 10:27:42 Olivias-iPad UserEventAgent[13] <Notice>: jetsam: kernel termination snapshot being created
Dec  1 10:27:42 Olivias-iPad com.apple.launchd[1] (UIKitApplication:com.apple.mobilemail[0x55e7][4132]) <Notice>: (UIKitApplication:com.apple.mobilemail[0x55e7]) Exited: Killed: 9
Dec  1 10:27:42 Olivias-iPad com.apple.launchd[1] (UIKitApplication:com.apple.mobilephone[0xccd5][4130]) <Notice>: (UIKitApplication:com.apple.mobilephone[0xccd5]) Exited: Killed: 9
Dec  1 10:27:42 Olivias-iPad com.apple.launchd[1] (com.apple.tccd[4133]) <Notice>: (com.apple.tccd) Exited: Killed: 9
Dec  1 10:27:42 Olivias-iPad com.apple.launchd[1] (com.apple.TextInput.kbd[4144]) <Notice>: (com.apple.TextInput.kbd) Exited: Killed: 9
Dec  1 10:27:42 Olivias-iPad com.apple.launchd[1] (UIKitApplication:com.yourcompany.Moonshine2[0x74c9][4171]) <Notice>: (UIKitApplication:com.yourcompany.Moonshine2[0x74c9]) Exited: Killed: 9
Dec  1 10:27:42 Olivias-iPad backboardd[690] <Warning>: Application 'UIKitApplication:com.apple.mobilemail[0x55e7]' exited abnormally with signal 9: Killed: 9
Dec  1 10:27:42 Olivias-iPad backboardd[690] <Warning>: Application 'UIKitApplication:com.apple.mobilephone[0xccd5]' exited abnormally with signal 9: Killed: 9
Dec  1 10:27:42 Olivias-iPad backboardd[690] <Warning>: Application 'UIKitApplication:com.yourcompany.Moonshine2[0x74c9]' exited abnormally with signal 9: Killed: 9
Dec  1 10:27:43 Olivias-iPad kernel[0] <Debug>: launchd[4176] Builtin profile: MobileMail (sandbox)
Dec  1 10:27:44 Olivias-iPad ReportCrash[4175] <Error>: libMobileGestalt copySystemVersionDictionaryValue: Could not lookup ReleaseType from system version dictionary
Dec  1 10:27:44 Olivias-iPad ReportCrash[4175] <Notice>: Saved crashreport to /Library/Logs/CrashReporter/LowMemory-2012-12-01-102744.plist using uid: 0 gid: 0, synthetic_euid: 0 egid: 0
Dec  1 10:27:48 Olivias-iPad kernel[0] <Debug>: launchd[4182] Builtin profile: syncdefaultsd (sandbox) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T03:11:48.560

根据您的评论，可能 thirdViewController 实际上没有正确保留，但它保留在内存中，不会被窗口保留（或者从您使用窗口的方式来看）。

此外，按照您使用它的方式，使用为此目的构建的健壮对象（如 UITabController）可能会更好。可以在不显示任何地方的情况下使用它，并且您可以以编程方式换出视图控制器。如果这不合适，那么 UINavigationController 肯定会。没有必要重新发明轮子。干杯。

# visual-c++ - 在 vc++ 项目或库中调用 c# dll

> ID：13658566
> 
> 赞同：1
> 
> 时间：2012-12-01T10:37:28.823
> 
> 标签：visual-c++, c#-3.0

你能告诉我如何在 vc++ 项目或库中调用 c# dll。这是我的 c# dll 代码，它工作正常，我只想从 vc++ 项目中调用这个 dll，但是当我从 vc++ 调用这个 dll 时，我没有得到任何响应。

我的 c# dll 代码是-

```
namespace MyInterop
{
[Guid("3E0E2EB2-CC13-40fb-9346-34809CB2418C")]
public interface IMyDotNetInterface
{
    void NewFile(string a, string b);
}

[ClassInterface(ClassInterfaceType.None)]
[Guid("3A13EB34-3930-4e06-A3EB-10724CCC2F4B")]
public class MyDotNetClass:IMyDotNetInterface
{
    public MyDotNetClass ()
    {
    }

    public void NewFile(string a, string b)
    {
        string c= a + b;
        string fileName = @"D:\file.txt";

        try
        {
            // Check if file already exists. If yes, delete it. 
            if (File.Exists(fileName))
            {
                File.Delete(fileName);
            }

            // Create a new file 
            using (FileStream fs = File.Create(fileName))
            {
                // Add some text to file
                TextWriter tsw = new StreamWriter(@"D:\Hello.txt");

                //Writing text to the file.
                tsw.WriteLine(c);
                tsw.Close();
            }
        }
        catch (Exception Ex)
        {

        }  
    } 
```

我的 vc++ 代码是-

```
BSTR param1 = L"hello";
BSTR param2 = L"World";
CoInitialize(NULL);
MyInterop::IMyDotNetInterfacePtr pDotNetCOMPtr;

HRESULT hRes = pDotNetCOMPtr.CreateInstance(MyInterop::CLSID_MyDotNetClass);

if (hRes == S_OK)
{   
    pDotNetCOMPtr->NewFile(param1,param2);

} 
```

请建议我

# android - 如何在 Android 中以编程方式禁用所有硬件键？

> ID：13658567
> 
> 赞同：1
> 
> 时间：2012-12-01T10:37:29.823
> 
> 标签：android, android-hardware

我正在开发具有锁定功能的 Android 应用程序。请建议我如何以编程方式禁用所有硬键。在这里，我使用下面的代码来禁用后退按钮。我想为所有硬键（如主页、搜索、相机、快捷键）提供此功能，这是我的代码：

```
@Override
public boolean onKey(View v, int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_SEARCH) {
        Log.d("KeyPress", "search");
        return true;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:02:49.363

Modify your onKey method to this :

```
@Override
public boolean onKey(View v, int keyCode, KeyEvent event) {
    return true;
} 
```

When you return true from onKey method, it means that you have handled the key press yourself and prevents the OS from taking the default action. In you code, you are only handling the search button, but when you return true for all cases, it will block all buttons.

P.S this might not work for soft buttons. Refer [this](http://developer.android.com/reference/android/view/View.OnKeyListener.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-11-13T12:21:57.040

试试这个，它可能会解决你的问题：

```
@Override

    public boolean onKeyDown(int keyCode, KeyEvent event) {

        if ((keyCode == KeyEvent.KEYCODE_HOME)) {
            System.out.println("KEYCODE_HOME");
            return true;
        }
        if ((keyCode == KeyEvent.KEYCODE_BACK)) {
            System.out.println("KEYCODE_BACK");
            return true;
        }
        if ((keyCode == KeyEvent.KEYCODE_MENU)) {
            System.out.println("KEYCODE_MENU");
            return true;
        }
        return false;
    } 
```

# java - 爪哇：为什么比较。当我在声明期间使用 {} 初始化数组时出错

> ID：13658575
> 
> 赞同：1
> 
> 时间：2012-12-01T10:38:14.013
> 
> 标签：java, arrays, initialization

如果我尝试在声明语句以外的语句上使用大括号初始化数组，为什么会出现编译错误

```
class Demo {
    public static void main(String[] args) {
        String[] myName;
            myName = {"AA", "BB", "CC"};
        for(String s: myName) {
            System.out.print(s + " ");
        }
    }
} 
```

只在声明语句中使用大括号进行初始化有什么意义？

```
demo.java:4: error: illegal start of expression
                myName = {"AA", "BB", "CC"};
                         ^
demo.java:4: error: not a statement
                myName = {"AA", "BB", "CC"};
                          ^
demo.java:4: error: ';' expected
                myName = {"AA", "BB", "CC"};
                              ^
demo.java:5: error: illegal start of type
                for(String s: myName) {
                ^
demo.java:5: error: ')' expected
                for(String s: myName) {
                            ^
demo.java:5: error: <identifier> expected
                for(String s: myName) {
                                    ^
demo.java:10: error: class, interface, or enum expected
}
^
7 errors 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T10:50:09.577

> 如果我尝试在声明语句以外的语句上使用大括号初始化数组，为什么会出现编译错误

因为基本上在 Java 中这样做是无效的。编译器只是执行 Java 语言规范的规则。您需要指定数组类型：

```
myName = new String[] { ... }; 
```

来自[Java 语言规范，第 10.6 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.6)：

> 数组初始值设定项可以在声明中指定（第 8.3 节、第 9.3 节、第 14.4 节），或作为数组创建表达式的一部分（第 15.10 节）来创建数组并提供一些初始值。

声明的各个部分包括这个产生：

```
VariableInitializer:
    Expression
    ArrayInitializer 
```

而数组创建表达式（[第 15.10 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.10)）是：

```
ArrayCreationExpression:
    new PrimitiveType DimExprs Dimsopt
    new ClassOrInterfaceType DimExprs Dimsopt
    new PrimitiveType Dims ArrayInitializer 
    new ClassOrInterfaceType Dims ArrayInitializer

DimExprs:
    DimExpr
    DimExprs DimExpr

DimExpr:
    [ Expression ]

Dims:
    [ ]
    Dims [ ] 
```

之后：

> 只在声明语句中使用大括号进行初始化有什么意义？

我怀疑它在其他方面简化了语言规范。我同意*看起来*你应该能够做到这一点 - 你可能希望编译器能够从变量类型推断数组类型，就像它在声明时所做的那样。但请记住，一般来说，对于*大多数*语言来说，赋值运算符右侧的表达式类型*不受*赋值目标的影响。对于普通语句中的每个表达式的类型，在不参考同一语句中的其他表达式的情况下定义良好，通常在语言方面更简洁。

使用数组创建表达式修复代码相当容易，所以我会接受它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-01T10:40:58.827

The syntactically correct way to write what you're trying to write is:

```
myName = new String[]{"AA", "BB", "CC"}; 
```

I suspect the reason Java doesn't allow omitting `new String[]` is that in many contexts there's no way for the compiler to figure out the desired type of the array from the types of the elements. Let's say you were allowed to write:

```
{1, 2, 3} 
```

Is that `int[]`, `Integer[]`, `Number[]` or `Object[]`?

The only place where are you're allowed to omit `new String[]` is initializers, where the compiler already knows the array type.

# session-state - 为什么具体5需要会话状态？它可以被禁用吗？

> ID：13658577
> 
> 赞同：2
> 
> 时间：2012-12-01T10:38:15.297
> 
> 标签：session-state, concrete5

在 Concrete5 CMS 平台上托管的网站的公共访问者将获得一个会话 cookie。即使网站本身没有任何可交互的内容。

由于会话状态是性能消耗，如何在具体 5 中将其关闭？

如果不是，为什么首先需要它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T16:30:27.733

我不知道为什么首先需要它（对于未登录的客人）。之前已经被Concrete5核心团队“讨论”过：http: [//www.concrete5.org/community/forums/chat/european-directive-that-prohibits-businessandrsquo-websites-down/](http://www.concrete5.org/community/forums/chat/european-directive-that-prohibits-businessandrsquo-websites-down/)

...如果你通读，你会看到以下给出的“原因”：

*   “所有其他 CMS 都这样做，所以我们也这样做”。
*   “concrete5 使用会话 cookie 来跟踪用户是否登录等......”
*   “我们实际上必须改变concrete5的工作方式，因为我们确实为每个人打开了一个会话”
*   “已经建立了很多附加组件和网站，假设会话存在，更改它可能会破坏所有这些”

嗯……是的，谁知道呢。我觉得应该问题不大。但是没有简单的开关可以打开或关闭来禁用它们——您需要检查代码并自定义系统才能使其工作。

# c# - 只序列化一个类的一些特定属性？

> ID：13658580
> 
> 赞同：1
> 
> 时间：2012-12-01T10:38:32.707
> 
> 标签：c#, serialization, json.net

我遇到了 Json.Net 的问题。

我的应用程序连接到数据库并在其中存储一些数据。假设我的应用程序具有三个不同的类：实体、组、组织

简要了解 Entity 类：

```
public class Entity
{
    [JsonIgnore]
    public int ID { get; private set; }
    [JsonProperty]
    public string UID { get; private set; }
    [JsonProperty]
    public Gender EntityGender { get; set; }
    [JsonProperty]
    public string Surname { get; set; }
    [JsonProperty]
    public string Forename { get; set; }
    [JsonProperty]
    public Group EntityGroup { get; set; }
    [JsonProperty]
    public Organisation EntityOrganisation { get; set; } 
```

组织和组也有一个 ID 属性。
序列化实体时，我不想完全序列化 EntityGroup 和 EntityOrganisation，而只想序列化它们的 ID。

一些简单的例子，我希望它看起来像：

（现在的样子）

```
{
  "UID": "6c5204356b3a1a33",
  "Surname": "Bar",
  "Forename": "Foo",
  "EntityGroup": {
    "Name": "XGroup",
    "GroupOrganisation": {
      "Name": "FooOrg"
    }
  },
  "EntityOrganisation": null,
  "EntityStation": null
} 
```

（它应该是什么样子）

```
{
  "UID": "6c5204356b3a1a33",
  "Surname": "Bar",
  "Forename": "Foo",
  "EntityGroup": {
    "ID": 1,
    "GroupOrganisation": {
      "ID": 1
    }
  },
  "EntityOrganisation": null,
  "EntityStation": null
} 
```

是否可以设置一个仅在序列化实体时序列化 Group 和 Organization 的 ID 属性的 JsonParser？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T11:59:29.430

那这个呢：

在您的`Entity`类中，将`JsonConverter`属性添加到`EntityGroup`类中：

```
[JsonProperty]
[JsonConverter(typeof(EntityGroupConverter))]
public Group EntityGroup { get; set; } 
```

这将使用`EntityGroupConverter`来序列化`Group`. 这个类如下：

```
class EntityGroupConverter : JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        return objectType == typeof(Group);
    }

    public override object ReadJson(JsonReader reader, Type objectType,
        JsonSerializer serializer)
    {
        throw new NotImplementedException();
    }

    public override void WriteJson(JsonWriter writer, object value,
        JsonSerializer serializer)
    {
        Group group = value as Group;
        serializer.Serialize(writer, new { ID = group.ID,
            GroupOrganisation = new { ID = group.Organisation.ID } });
    }
} 
```

这里的关键是使用`serializer`编写一个仅包含所需属性的匿名对象。

请注意，`ReadJson`未实现 - 我假设在此阶段不需要反序列化。

**编辑**

正如 Skatier 所指出的，在`ReadJson`Json.NET 的更新版本中，签名将如下所示（此问题中使用的版本是 3.5.0.0）：

```
public override object ReadJson(JsonReader reader, Type objectType,
        object existingValue, JsonSerializer serializer) 
```

# cakephp - cakephp admin 以另一个用户身份登录而不使用密码

> ID：13658581
> 
> 赞同：4
> 
> 时间：2012-12-01T10:38:37.233
> 
> 标签：cakephp, cakephp-2.1

我正在创建一个 cakephp 应用程序，它应该允许管理员在不知道密码的情况下以站点中的任何用户身份登录。基本上，如果管理员想以经理身份登录，他只需单击一个按钮即可以经理身份登录。

谢谢你

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T10:57:29.077

我称之为用户切换。我使用我的 DirectAuth 实现了这个： [https ://github.com/dereuromark/tools/blob/master/Controller/Component/Auth/DirectAuthenticate.php](https://github.com/dereuromark/tools/blob/master/Controller/Component/Auth/DirectAuthenticate.php)

但你也可以简单地

a) 以管理员身份登录

b）有一个包含所有用户的表单来选择您要切换到的用户

c) 通过 POST 切换，读取用户 + $this->Auth->login($userData)

传递数据的 login() 将覆盖当前会话数据，因此会自动以该用户身份登录。只需确保只有管理员角色才能访问切换操作。

旁注：

*   如果您希望能够切换回来（将记住原始的 Auth.User.id），则在会话中存储 Auth.Admin.id 之类的东西 - 如果存在，则此 id 也可以访问切换操作以跳回行政。

*   使用此 Auth.Admin.id 来识别您当前是真人还是假人。如果您不想触发某些事情，例如“在线活动更新”或“消息读取”等，这很方便，只有真正的用户应该 IMO。这样你就可以防止这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-16T05:30:37.950

您可以简单地使用以下代码。以前的管理员会话将被覆盖。此外，通过在会话中使用 is_manager_login，您可以在管理员注销为管理员时自动登录管理员。

```
$manager_info = $this->User->find('first',
                                        array(
                                             'conditions' =>array('User.email'=>$managerEmail)
                                             )
                             );  

    if (!empty($manager_info))
     {

                    $this->Auth->login($manager_info['User']);
                    $this->Session->write('is_manager_login')=true;

    } 
```

# assembly - 引导加载程序的固定扇区加载（LILO、GRUB、自定义）

> ID：13658582
> 
> 赞同：1
> 
> 时间：2012-12-01T10:38:47.107
> 
> 标签：assembly, bootloader, osdev

我一直在查看 LILO bootsect.s 和 GRUB stage1.s。

LILO 从特定的硬编码扇区加载东西（或东西）；它不使用一些可以在安装时修补的保留字节。我想知道如果您在分区上而不是单独在驱动器上，这将如何工作？LILO 如何告诉它的 bootsec.s 它在磁盘上的位置，从而适当地调整它需要加载的文件的位置？

LILO 没有用于 BPB 的空间，因此它在很大程度上是一个 ext 引导加载程序。ext 在引导扇区之后仅保留了另一个 512。LILO 的第 2 阶段真的可以放在这么小的空间里吗？还是将其放置在保留块上？

另一方面，GRUB 确实为 stage2 所在的位置保留了一个 dword，我认为可以在安装时对其进行修补。但它没有说明它的大小。看着它，它似乎只是读取了一个扇区（`mov ax, 0x0201`）然后跳转到它。查看 stage2 目录，我认为它不能仅适用于单个扇区。

LILO 和 GRUB 配置文件都与它们所在的文件系统无关。他们如何继续引导过程？我的意思是它包含文件的路径，但我认为这没有多大帮助。他们试图找出答案吗？怎么会这样？如果已经存在操作系统，是否与当前操作系统喜欢其文件系统设置和引导加载程序文件的方式有任何冲突？鉴于他们的 stage1 几乎是文件系统愚蠢的。

当 LILO 和 GRUB 设置分区引导扇区（预分区磁盘）时，它是否会读取 MBR 上的分区表并推断其余部分在磁盘上的位置，因此“固定寻址”可以工作，因为它会修补东西，还是它实际上将它的东西加载到固定硬盘扇区上？我回到我的冲突问题。

我正在尝试编写引导加载程序，但我觉得仅读取静态磁盘地址的东西还不够好，因为它可能与文件系统结构发生冲突，而且我不知道如何“知道”我在磁盘上的位置，因为我不知道我是否可以相信 DS:SI 指向一个真正的分区表（如果我在 LBA 0 上怎么办？）并且读取 MBR 分区表并在我的 stage1 中修补一些 dword 并不是很好大部头书。所以我正在从 LILO 和 GRUB 中寻找一些灵感。不是用 NASM 编写并没有真正的帮助。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:00:13.427

显然有所谓的“DOS 兼容区域”。[在这里](http://www.pixelbeat.org/docs/disk/)洞察

基本上，CHS 0:0:2 - 0:0:63 是“免费的”；分区从 1:0:1 开始。

# php - 阻止 HTML 和 Javascript 显示在我的网站上

> ID：13658584
> 
> 赞同：1
> 
> 时间：2012-12-01T10:39:01.973
> 
> 标签：php, javascript, html, css, blocking

我正在开发这个新的社交网站。它的各种功能之一是发布。您可以发布到 Facebook 和我的网站，或 Twitter 和我的网站。话虽如此，我在测试 sql 注入时忍不住尝试发布 HTML。当我这样做时，我注意到有一些方法可以操纵网站，例如，使用一个元素来完全搞砸 CSS 设计，或者使用 javascript 将用户重定向到另一个网站。话虽如此，我想让我的网站为我的用户提供一个安全的环境……而不是一个用于传播计算机病毒、色情和其他可能使某人远离我的网站的东西的网站。当我搜索这个主题时，我找到了在将 HTML 提交到数据库之前将其从 $post 变量中“剥离”出来的方法。但是，我只想制作它，以便您可以发布任何文字，包括 HTML 和 Javascript，没有浏览器将其解释为“运行此...”代码：我想将其显示为平面文本。我在 Facebook 上看到过，当我查看帖子的源代码时，它显示 <、/ 和 > 为常规文本。我尝试“剖析”Facebook 的源代码，但一无所获。我尝试过使用诸如`<pre>`和`<code>`，但由于缺乏对它们进行样式设置和控制的能力，我放弃了，回到只允许 HTML 的状态。拜托，任何知道如何做到这一点的人，请帮助我。

提前致谢，

TP

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T10:48:09.540

有一个“转义” [html特殊字符](http://php.net/manual/en/function.htmlspecialchars.php)的功能。这将改变

```
<p>Some dangerous html</p>
<script>window.location.replace('http://pornography.com');</script> 
```

进入：

```
&lt;p&gt;Some dangerous html&lt;/p&gt;
&lt;script&gt;window.location.replace('http://pornography.com');&lt;/script&gt; 
```

浏览器将显示为纯文本（即`<p>Some ...`）。

顺便说一句，这将发生在这篇文章中的文字上。这可能是最好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T10:55:45.003

要将 < 和 > 等显示为文本，请使用

```
$output = htmlentities($string, ENT_QUOTES); 
```

这将确保任何 html 代码都显示为文本而不是纯 html。

[http://php.net/manual/en/function.htmlentities.php](http://php.net/manual/en/function.htmlentities.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T10:46:56.053

我猜你想要的只是删除链接和 javascript。你可以用正则表达式来做

[用于解析网页链接的正则表达式？](https://stackoverflow.com/questions/6173/regular-expression-for-parsing-links-from-a-webpage)

[php正则表达式资源](https://stackoverflow.com/questions/3495258/php-regular-expressions-resources)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T10:42:21.387

您可以使用函数[strip_tags()](http://php.net/manual/en/function.strip-tags.php)过滤输入。如果您看到文本已更改，则表示用户尝试输入 html 数据。您要么拒绝输入，要么保留过滤后的版本。

# vbscript - Error: variable undefined "ping" while pingtest report in vbscript

> ID：13658599
> 
> 赞同：0
> 
> 时间：2012-12-01T10:40:42.087
> 
> 标签：vbscript, ping

I am new to Vbscript and I am trying to get a pingtest report if ping ip is error!! Here is the script i am running :i am getting a error in

```
line 25:For Each ping In objPing  
      Select Case ping.StatusCode....... 
```

I dont know what to do please help me or is there any alternate solution ??

```
Option Explicit
Dim objPing,objFile,objFSO,objExcel,objSheet
Dim myOutFile,query,Row,Col,PingMachines(2),i
myOutFile = "c:\temp\log"
Col = 1
Row = 1

PingMachines(0)="192.168.1.1"
PingMachines(1)="192.168.1.2"

Set objFSO=CreateObject("Scripting.FileSystemObject")
Set objExcel = CreateObject("Excel.Application")
objExcel.Workbooks.Add
Set objSheet = objExcel.ActiveWorkbook.Worksheets(1)
objExcel.Columns(1).ColumnWidth = 16 
objExcel.Columns(2).ColumnWidth = 20 
objSheet.Cells(1,Col).Value = "Server" 'Contain IP address
objSheet.Cells(1,Col+1).Value = "Date" ''Date Time 
objSheet.Cells(1,Col+2).Value = "Response" 'Response of the ping
Row=Row+1
For i=LBound(PingMachines) To UBound(PingMachines) -1
    query="select * from Win32_Pingstatus where address ='127.0.0.1'"
    Set objPing = GetObject("winmgmts:{impersonationLevel=impersonate}").ExecQuery(query)
    For Each ping In objPing  
      Select Case ping.StatusCode
        Case 0
          response="Reply from " & ping.ProtocolAddress 
        Case 11002     
          response="Destination Net Unreachable" 
        Case 11003
          response="Destination Net Unreachable"
        Case 11010
          response="Request Timed Out"     
      End Select
      objSheet.Cells(Row,1).Value=PingMachines(n)
      objSheet.Cells(Row,2).Value=Now
      objSheet.Cells(Row,3).Value=response
      Row=Row+1
    Next
Next
objExcel.ActiveWorkbook.SaveAs("c:\temp\test.xls") 
objExcel.ActiveWorkbook.Close
objExcel.Application.Quit 
```

![enter image description here](../Images/19ecdb22702bedbbe1a41cb19520eaab.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T12:26:24.013

您已`Option Explicit`在顶部设置，这意味着您必须先声明所有变量，然后才能使用它们。

`Dim ping`在调用该行之前添加一个：`For Each ping in objPing`

# javascript - Any way to tell whether a javascript function has returned or not?

> ID：13658602
> 
> 赞同：2
> 
> 时间：2012-12-01T10:41:00.930
> 
> 标签：javascript, function, return, return-value, undefined

I'm currently writing some code that wrappers user-written JavaScript functions, and have come across a point in the logic where I would like to trigger a particular behaviour if the function in question never returns a value i.e. the `return` keyword is never evaluated.

Currently I am assuming that if a function returns `undefined`, it has not returned, however this is not strictly true—due to the fact a function can always `return undefined`, or return the value of an undefined property.

With a function call you can always tell how many parameters were used due to the `arguments.length` property, I was wondering if anyone knew of a similar trick for a function's return value?

So, is it possible to tell the difference between the return values of `a`, `b` or even `c`

```
var a = function(){  };
var b = function(){ return undefined; };
var c = function(){ if(1){}else{return undefined;}; }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T10:49:35.377

不，您不能可靠地跨浏览器判断一个函数是通过到达其代码末尾、使用`return`不带值还是使用`return undefined`. [规范的第 13.2.1 节](http://www.ecma-international.org/ecma-262/5.1/#sec-13.2.1)涵盖了这一点。

这里的另一个答案建议您*可以*通过分析函数的源代码来做到这一点。但是，没有标准的机制可以做到这一点。尽管几乎所有浏览器都提供了某种形式的源代码 `Function#toString`，但有些却没有（主要是移动浏览器），并且规范中没有定义。但是，如果您有一组您支持的浏览器，并且它们都有，那将是您唯一真正的选择——但即使那样，您也不一定知道函数中采用了哪个代码分支。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T12:07:06.110

这很疯狂，绝对不推荐，它会创建函数的副本，修改函数体并使用`eval`

```
function returnProxy(func,args) {
    var returnFlag = Math.random()+"";

    // create new function based on passed function body
    var fullFuncBody = func.toString();
    var tmpFuncStr = "function  "+ fullFuncBody.substr(fullFuncBody.indexOf("("));

    tmpFuncStr = tmpFuncStr.substr(0,tmpFuncStr.length-1)+"\nreturn '"+returnFlag+"'}";

    var tmpFunc;
    eval("tmpFunc = "+tmpFuncStr); // really bad things

    var funcOut = tmpFunc.apply(this,args);

    return {
        out: (funcOut == returnFlag) ? undefined : funcOut,
        returned: (returnFlag != funcOut)
    }
} 
```

假设你有这样的功能，

```
function someFunction(action) {
    switch(action) {
        case 1:
            return undefined;
        case 2:
            return "hello";
    }
} 
```

您将像这样使用代理功能：

```
returnProxy(someFunction,[1]); // instead of calling someFunction(1) 
```

第一个参数是函数本身，第二个参数是参数数组

返回值将是一个具有 2 个属性的对象，`out`包含函数结果，并且`returned`是一个布尔值，指示函数是否返回

示例输出，

```
returnProxy(someFunction,[1]); // {out: undefined, returned: true}
returnProxy(someFunction,[2]); // {out: "hello", returned: true}
returnProxy(someFunction,[3]); // {out: undefined, returned: false} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-01T10:47:16.763

将函数留空也将返回未定义，因此 a、b 和 c 都将返回相同的值。

实现这样的事情的唯一方法是在函数本身中实际设置某种标志，但我猜你希望能够独立于实际函数的实现来做到这一点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-01T10:47:41.487

没有办法区分。

如果你真的想，你可以尝试分析函数的源代码并确定它是否有任何返回语句，如果没有，则假设它不会返回值。当然，这会有点难以确定一个函数是否有时返回而其他函数不返回（例如，if 块中的 return 语句）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T10:58:00.447

您只能判断您是否通过包装器调用函数，但我不确定这是否适合您的用例。

```
function invoker(f) {
    var actualFunc = f,
        invokeCount = 0;

    function invoke() {
        invokeCount = invokeCount +1;
        return actualFunc.apply(this, arguments);
    }

    function invoked() {
       return invokeCount;
    }

    return {
      invoke: invoke,
      invoked: invoked
    };
}

var a = function(){  };
var b = function(){ return undefined; };
var c = function(){ if(1){}else{return undefined;}; };

var ainvoker = new invoker(a);    

alert(ainvoker.invoke());
alert(ainvoker.invoked()); 
```

# ruby-on-rails - 用于 before_destroy 钩子的 Rails 3.2 RSpec 测试失败

> ID：13658607
> 
> 赞同：0
> 
> 时间：2012-12-01T10:41:09.700
> 
> 标签：ruby-on-rails, rspec-rails

我有两个模型：

```
class Region < ActiveRecord::Base
  has_one :acol, :dependent => :nullify
  before_destroy :check_acol_presence
private 
  def check_acol_presence
    if acol
      errors.add(:base,"activerecord.errors.models.region.delete_with_existing_acol")
      return false
    end
  end
end

class Acol < ActiveRecord::Base
  belongs_to :region
end 
```

我想检查 RSpec 测试中的“check_acol_presence”钩子。所以这里是测试代码：

```
region = FactoryGirl.create(:region)
acol = FactoryGirl.create(:acol, :region => region)
region.reload
region.destroy
lambda { region.reload }.should_not raise(ActiveRecord::RecordNotFound) 
```

在 Rails 控制台中，这个检查工作得很好。但是测试失败了。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T22:35:29.763

尝试将 before_destroy 行放在 has_one 行之前

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-20T22:32:15.870

它应该是 raise_error，而不仅仅是 raise：

```
lambda { region.reload }.should_not raise_error(ActiveRecord::RecordNotFound) 
```

否则，您的测试本身可能会*引发*错误。

# php - 标题没有出现在第一页 mpdf

> ID：13658616
> 
> 赞同：4
> 
> 时间：2012-12-01T10:42:04.473
> 
> 标签：php, mpdf

> 页眉没有出现在第一页，但出现在 mpdf 的所有其他页面中。

这是我的php代码。

```
$mpdf   = new mPDF('utf-8','A4','','' , 0 , 0 , 0 , 18 , 0 , 0);
        $mpdf->SetDisplayMode('fullpage');
        $mpdf->list_indent_first_level = 0; // 1 or 0 - whether to indent the first level of a list
        $htmlFilePath   = $fileName;
        //$mpdf->SetHTMLHeaderByName('header');
        $mpdf->WriteHTHeader not coming in first page mpdfML(file_get_contents($htmlFilePath)); 
```

这是我的 html 代码部分。

```
<htmlpageheader name="header">
                <td class="" colspan="2">
                    <div id="header">
                        <table  cellpadding="0" cellspacing="0" border="0" align="center">
                            <tr><td height="10"></td></tr>
                            <tr>
                                <td colspan="2">
                                    <table border="0" cellpadding="0" cellspacing="0" align="center" width="200mm">
                                        <tr><td align="center"><img src="{ADMINURL}wc_bo/wc_images/wc_background/pdf_header.jpg" width="739" height="206" alt=""></td></tr>
                                    </table>
                                </td>
                            </tr>
                     </table>
                    </div>
                    <!-- <table align="center"  cellpadding="0" cellspacing="0" border="0"  style="width:180mm;">
                        <tr>
                            <td colspan="2" ><img src="{ADMINURL}wc_bo/wc_images/wc_background/login_logo.jpg" width="242" height="" alt=""></td>
                        </tr>
                    </table> -->
                </td>
            </htmlpageheader>
            <sethtmlpageheader name="header" value="on" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T06:42:21.100

```
 Remove your <sethtmlpageheader name="header" value="on" /> and put this code.

<sethtmlpageheader name="header" page="O" value="on" show-this-page="1" />
<sethtmlpageheader name="header" page="E" value="on" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-30T11:31:55.313

您也可以使用以下格式

```
$mpdf->SetHTMLHeader('$htmlcode','',TRUE); 
```

这也将标题带入第一页。

# code-organization - 将代码设置为最大宽度 80 个字符

> ID：13658623
> 
> 赞同：-1
> 
> 时间：2012-12-01T10:42:46.860
> 
> 标签：code-organization

是否有任何网站可以自动将大块代码（PHP、JS 和 CSS）设置为最大 80 个字符的宽度以确保没有换行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:51:40.047

[Cloud9](https://c9.io/) IDE 具有此功能。我认为它在视图菜单中，您必须取消选择换行到视口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-30T23:42:24.347

尝试使用[CSS3 规范中](http://www.w3.org/TR/css3-values/#font-relative-lengths)`ch`描述的单位：

> 等于在用于渲染它的字体中找到的“0”（零，U+0030）字形的使用的高级度量。

因此`max-width: 80ch`将宽度限制为 80 个字符。

# c# - MSMQ 中的多个队列（性能下降）

> ID：13658633
> 
> 赞同：3
> 
> 时间：2012-12-01T10:44:25.510
> 
> 标签：c#, windows, msmq, message-queue, administration

为什么当我使用 10 个队列而不是 1 个队列时 MSMQ 的性能下降（约三分之一）？

简而言之，当我在多线程应用程序中使用超过 1 个队列（从不同线程中的每个队列接收）时，MSMQ 性能会大幅下降。

就像 .NET 中的 MSMQ 类有一个共享资源，当队列数量增加时会缩小。顺便说一句，我使用 Windows 7 和 Visual Studio 2010 进行这些测试。

注意：我有 1 个队列用于在 2 个应用程序之间进行通信。我只需要使用可恢复模式。它工作正常，直到它达到 100-150 条消息/秒的墙。然后我想我可以通过将队列数量增加到 10 个并并行处理它们来提高处理能力。但是当我收到时，时间增加了近 3 倍！:O

我使用 C# 编写了我的应用程序。我以这种方式初始化我的阅读器线程：

```
for (int i = 101; i <= 110; i++)
{
    var t = new Task<Tuple<TimeSpan, int, int, int>>(SingleQueueReceiver, i, TaskCreationOptions.LongRunning);
    tasks.Add(t);
}
foreach (var t in tasks) t.Start(); 
```

我的队列名称是 buffer101 到 buffer110，我已经创建了它们。它们不是事务性的。我的接收器任务函数（线程）是这样的：

```
static Tuple<TimeSpan, int, int, int> SingleQueueReceiver(object o)
{
    var qID = (int)o;

    TimeSpan SingleQueueReceiver_Elapsed = TimeSpan.FromMilliseconds(0);
    int SingleQueueReceiver_Count = 0;
    var watch = new Stopwatch();
    watch.Start();

    using (var q = new MessageQueue(string.Format(@".\private$\buffer{0}", qID), QueueAccessMode.Receive))
    {
        q.UseJournalQueue = false;
        var @continue = true;
        var sleep = TimeSpan.FromMilliseconds(1);

        while (true)
        {
            if (!@continue)
            {
                watch.Stop();
                SingleQueueReceiver_Elapsed = watch.Elapsed.Subtract(sleep);

                return Tuple.Create(SingleQueueReceiver_Elapsed, SingleQueueReceiver_Count, qID, 2);
            }

            try
            {
                var m = q.Receive(sleep);

                SingleQueueReceiver_Count++;
            }
            catch (MessageQueueException mqe)
            {
                if (mqe.MessageQueueErrorCode == MessageQueueErrorCode.IOTimeout) @continue = false;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T20:52:51.923

我认为性能下降更有可能是由于上下文切换或其他多线程副作用而不是具有多个 msmq 队列。

您是否尝试过扩展到 10 个队列和 10 个单线程侦听器？

如果您发布代码，那么我们可以看到发生了什么。

# android - 流式传输视频时暂停和恢复媒体播放器

> ID：13658637
> 
> 赞同：2
> 
> 时间：2012-12-01T10:44:51.337
> 
> 标签：android, video, android-mediaplayer

在我的应用程序中，我使用 MediaPlayer 和 SurfaceHolder 类播放 HLS 视频。一切正常，除了用户离开播放器然后返回。

从日志中我可以看出，当用户返回到我的 VideoPlayerActivity 时，MediaPlayer 对象仍然存在并且视频的进度被保存。如果我只是尝试再次开始播放视频，我会收到以下消息：

```
[SurfaceView] queueBuffer: SurfaceTexture has been abandoned!
E/SurfaceTextureClient(128): queueBuffer: error queuing buffer to SurfaceTexture, -19 
```

我知道这是因为 MediaPlayer 使用的 SurfaceHolder 不再存在（我知道它在活动的 OnStop 状态下被破坏）。

我的问题是，是否有任何方法可以使用相同的 MediaPlayer 对象并为其附加新的表面？

# json - Backbone JS Prefetch JSON with Parent and Child Collection

> ID：13658638
> 
> 赞同：2
> 
> 时间：2012-12-01T10:44:59.140
> 
> 标签：json, backbone.js

最初，当我的应用程序加载时，我想使用集合“重置”填充所有数据，这样我就不必进行初始 AJAX 调用并获取数据。

我有两个模型 2 个用于 Backbone 的模型、一个博客和一个评论。一个博客有一个评论列表，这就是我的 JSON 的样子。

如何将其正确加载到 Backbone 集合中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T11:01:55.557

您可以将主干模型或原始 JSON 传递到您的`reset`调用中。所以这是一种选择：

```
collection.reset( [ { 
    title: "A blog post", 
    comments: [ 
        { author: "someone" },
        { author: "someone else" }
    ]
}, {
    title: "Another blog post"
} ] ); 
```

这是另一个，如果您有预定义的模型要使用：

```
collection.reset( [
    new BlogModel( { 
        title: "A blog post", 
        comments: [ 
            new CommentModel( { author: "someone" } ),
            new CommentModel( { author: "someone else" } )
        ]
    } ),
    new BlogModel( {
        title: "Another blog post"
    } )
] ); 
```

**编辑**

如果你有原始 JSON 并且想要创建类型化模型，那么你总是可以只使用一个循环。假设您在像“博客”这样的对象中有上述原始 JSON。

```
var models = [];
// iterate through the blogs in the raw JSON, and add them as BlogModels
_.each(blogs, function(blog) {
    var blogModel = new BlogModel(blog);

    // create each comment as a CommentModel, and add back to the BlogModel
    blogModel.set("comments",
        _.map(blogModel.get("comments"), function(comment) {
            return new CommentModel(comment);
        });
    });
    models.push(blogModel);
});
var collection = new Backbone.Collection();

// finally, create the collection using the models
collection.reset(models); 
```

这是一个运行的示例：http: [//jsfiddle.net/8nLCs/8/](http://jsfiddle.net/8nLCs/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T11:27:45.533

我会做这样的事情：

```
var CommentsCollection
  , PostModel
  , PostsCollection
  , posts
  , blogData;

CommentsCollection = Backbone.Collection.extend({});

PostModel = Backbone.Model.extend({

  initialize: function() {
    this.comments = new CommentsCollection;
    this.comments.post = this;
    this.on("change:comments", this.updateComments);
    this.updateComments();
  },

  updateComments: function() {
    this.comments.reset(this.get("comments"));
  }

});

PostsCollection = Backbone.Collection.extend({
  model: PostModel
});

blogData = [
  {
    id: 1,
    title: "My Post1",
    comments: [
      {id: 1, message: "Test message 1"},
      {id: 2, message: "Test message 2"}
    ]
  },

  {
    id: 2,
    title: "My Post 2",
    comments: [
      {id: 3, message: "Test message 3"},
      {id: 4, message: "Test message 4"}
    ]
  }
];

posts = new PostsCollection;
posts.reset(blogData);

console.log(posts.get(1).comments.pluck("message")); 
```

# android - 用于分发 ZIP/JAR 文件的 RESTful Web 服务？

> ID：13658644
> 
> 赞同：1
> 
> 时间：2012-12-01T10:46:46.777
> 
> 标签：android, web-services, rest, distribution, package-managers

[在自己用 Ruby 和 Sinatra 做之前问一下……]

我必须发布/分发数百个小型 JAR 和 ZIP 文件，这些文件将被 Android 应用程序用作“可免费下载的内容包”。

每个 JAR/ZIP 将包含几个图像、一个小型 SQLite DB（或一个转储......仍有待决定）和一个 XML 或 JSON 配置文件。每个文件的大小从几百 Kb 到 2 - 5 Mbs 不等。每个文件都将使用 Android 标准下载管理器下载并提取到应用程序的外部存储（SD 卡），同时保持 JAR/ZIP 文件的原始树结构。从此时起，我的应用程序将以特定于应用程序的方式处理它。

我需要一个服务器端解决方案来发布这些文件。即：实现此类服务的在线服务/存储库或服务器端可安装程序（可能是 Ruby/Sinatra/Padrino、Python/Bootle/Flask 或类似的东西。请不要使用 Java）。

所需的系统主要必须：

1.  使用驻留在给定目录中的文件列表（即：“目录列表”）响应指向公共服务器目录 URL 的 GET 请求。拥有某种带有文件描述和其他元数据的“丰富目录列表”会非常好（公共服务，因此不需要安全/身份验证）。一个 RSS/Atom 提要可能也很适合这项任务。特别是如果 RSS/Atom 引擎能够从文件本身的清单中提取文件描述并使用它来编译目录列表。我可以容纳我的代码以符合这种文件结构。

2.  使用文件本身（“下载”）响应指向特定文件 URL 的 GET 请求（公共服务，因此不需要安全/身份验证）。

3.  接受将上传文件写入 URL 中指示的目录（“上传”）的 PUT 请求（此处可能应该强制执行一些简单的身份验证/安全性，以防止破坏行为）。

如您所见，我只是在寻找一个简单的 HTTP RESTful 文件服务器（加上一些丰富的目录列表）。

有谁知道可以用于（或滥用...）此类任务的免费在线服务？

有人知道（几乎）可以使用的服务器端软件解决方案吗？

当然，任何考虑/意见/建议都将受到欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:13:06.903

我能找到的最接近的东西是“纸浆”：

[http://www.pulpproject.org/](http://www.pulpproject.org/)

很遗憾：

1.  它只管理 RPM 文件。可以为其他类型的包开发插件，但文档仍然缺失，整个项目似乎仍在快速推进。我们很匆忙，我们没有时间对现有插件进行逆向工程，创建我们的插件并使其与系统的其余部分保持同步。

2.  它只是提供了一个命令行界面。对开发人员来说很棒，但对我们的客户来说却很糟糕。我们需要一个 GUI，但我们没有时间开发它。

所以这里是通常的、老式的、经过验证的解决方案：

1.  把你所有的东西放在一个 FTP 可见的分区上。

2.  调整 Unix 权限以获得所需的公共访问级别（很可能是具有 644 权限的“root”或“ftpuser”所有权）

3.  编写一个脚本，生成一个文件，其中包含描述其他文件内容的元数据（从文件本身或其他信息源获取元数据）。将此脚本放在 CRON 计划中（Unix“at”命令）并每小时执行一次或类似的东西。

4.  通过匿名 FTP（或常规 FTP，根据您的需要）从客户端访问 FTP 分区

5.  [为您的客户提供Filezilla](http://filezilla-project.org/)或其他 FTP 客户端的副本以上传和管理文件

6.  交叉你的手指，希望没有人会按错按钮

其他可能的替代方案是：

1.  Linux APT 服务器端系统。可以使用/调整，但对于我们非常简单的需求（而且非常复杂）来说，这显然是一种矫枉过正。

2.  [像http://boxroomapp.com/](http://boxroomapp.com/)、[https://github.com/codyaray/sharebox](https://github.com/codyaray/sharebox)或类似的文件交换网络应用程序。可以调整以适应要求，但这需要时间。

# unix - 内核：处理 unix 中的死锁

> ID：13658645
> 
> 赞同：3
> 
> 时间：2012-12-01T10:46:50.087
> 
> 标签：unix, linux-kernel, deadlock

> 如果进程 1 锁定**资源 A**并等待 **资源 B**，同时（由于“正确”位置的上下文切换）进程 2 锁定**资源 B**并等待对**资源 A**的访问，则会发生**死锁**。

 ******Unix 如何处理这种死锁？我在**[这里](http://www.dwheeler.com/secure-programs/Secure-Programs-HOWTO/avoid-race.html)**阅读了以下内容。

> 许多死锁可以通过简单地要求锁定多个资源的所有进程以相同的顺序锁定它们来防止（例如，按锁名称的字母顺序）

如何在不**更改**执行顺序的情况下更改获取锁的顺序？有人可以**详细说明**现代 Unix 内核采用的死锁处理方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T07:17:03.020

对于 Linux 内核，它不处理这个问题，因为它不知道如何修复它。相反，它会在运行时检测到这种死锁并抱怨。

它使用的技术是lockdep，它是一个运行时锁定正确性验证器，详情请看内核文档[Documentation/lockdep-design.txt](http://www.mjmwired.net/kernel/Documentation/lockdep-design.txt)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T11:00:34.897

不，操作系统不能更改顺序。这句话应该被理解为：“如果程序员是明智的，并且在所有竞争实体中以相同的顺序锁定资源，那么许多死锁将是不可能的”。******

# c# - 停止程序流程，直到用户输入文本（c#）

> ID：13658647
> 
> 赞同：0
> 
> 时间：2012-12-01T10:47:06.250
> 
> 标签：c#, .net, winforms, modal-dialog

我有一个显示对话框的程序（这是一个新表单）。

现在我想要的是停止程序的执行，直到用户输入密码并在另一个表单上按下 Ok 按钮。

问题是每当我显示对话框时。底层程序不会停止执行并继续执行。

在用户输入用户名和密码并将它们提交到主表单之前，我如何才能停止程序的执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T10:49:04.903

`otherForm.ShowDialog()`向用户显示其他表单时的使用方法：

```
using(var otherForm = new OtherForm())
{
    var result = otherForm.ShowDialog(); // main form stops here
    if (result == DialogResult.OK)
    {
        // user entered text and pressed OK button on other form
    }
} 
```

[Form.ShowDialog](http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx)方法将表单显示为*模式对话框*。调用此方法时，它后面的代码要等到对话框关闭后才会执行。

# c++ - 从 .h 在 .cpp 中定义模板化函数（出现错误）

> ID：13658648
> 
> 赞同：3
> 
> 时间：2012-12-01T10:47:07.510
> 
> 标签：c++

部分头文件 dlist.h 定义为：

```
#ifndef __DLIST_H__
#define __DLIST_H__
#include <iostream>

class emptyList {};

template <typename T>
class Dlist {
 public:
    bool isEmpty() const;

 private:
    struct node {
    node   *next;
    node   *prev;
    T      *o;
    };

    node   *first; // The pointer to the first node (NULL if none)
    node   *last;  // The pointer to the last node (NULL if none)
};

#include "dlist.cpp"
#endif 
```

当我像这样创建 dlist.cpp 文件时：

```
#include "dlist.h"

template <typename T>
bool Dlist<T>::isEmpty() const
{
    return !first and !last;
} 
```

我在第 4 行收到错误消息：重新定义 'bool Dlist::isEmpty() const'

如果我删除第`#include "dlist.h"`4 行的错误：在 '<' 标记之前的预期初始化程序

这里有什么帮助吗？我做错了什么，不允许我从 dlist.h 文件中定义我的函数吗？谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T10:48:55.790

您必须将类模板的成员函数的实现放在头文件或包含在头文件中的文件中。编译器需要访问此代码才能实例化任何给定类型的模板`T`。

在您的情况下，问题似乎是您将标题包含在中`.cpp`，反之亦然。如果您真的想将声明和实现保留在单独的文件中，我建议将实现的后缀从更改`.cpp`为其他内容，例如`.icpp`. 一些构建系统可能会尝试从带有`.cpp`后缀的任何内容中编译目标文件，这也会导致错误。

1.  `#include "dlist.h"`从中删除`dlist.cpp`。
2.  （可选）重命名`dlist.cpp`为`dlist.icpp`. 为什么？因为许多构建系统会自动将任何以结尾的文件编译`.cpp`为目标文件。许多程序员假设一个`.cpp`文件*将*被编译成一个目标文件。
3.  （仅当采取第 2 步时）包括在 中的重命名`dlist.icpp`，`dlist.h`如当前为`dlis.cpp`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T10:59:22.343

> 头文件是为我定义的，我不允许以任何方式更改它

然后你需要从 中删除`#include "dlist.h"`指令`.cpp`（因为你已经*在* `dlist.h`，因此创建了一个循环依赖），从而使一切完全倒退，因为你得到的标题是愚蠢的！

A*永远*不`.cpp`应该。通常，如果*必须*将与模板相关的定义拆分到他们自己的文件中，它应该有一些其他的扩展名。我强烈建议您与赋予您此任务的人交谈，并解释他们的标题是愚蠢的、令人困惑的和非传统的。*`#included`*

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T10:48:24.123

不要`#include "dlist.cpp"`在头文件中使用，而是将函数定义移动到`dlist.h`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T10:51:50.537

为什么在 .h 文件中包含 .cpp 文件？在 99% 的情况下，您不应该这样做。

只需添加您的代码

```
template <typename T>
bool Dlist<T>::isEmpty() const
{
    return !first and !last;
} 
```

而不是 .cpp 文件包含指令。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T10:50:54.033

删除`#include "dlist.h"`并且不编译 dlist.cpp 本身。

你也可以使用这样的[东西](https://stackoverflow.com/a/9992920/33499)：

因为 dlist.h 包括 dlist.cpp 并定义`__DLIST_H__`：

```
#define __DLIST_H__ 
```

您可以将 dlist.cpp 修改为

```
#ifdef __DLIST_H__

template <typename T>
bool Dlist<T>::isEmpty() const
{
    return !first and !last;
}

#endif 
```

这样，如果您尝试编译 dlist.cpp，就不会出现编译器错误。但我同意其他答案，最好不要将此文件命名为 .cpp。**

# php - 在php中循环这个奇怪的数组

> ID：13658652
> 
> 赞同：0
> 
> 时间：2012-12-01T10:47:29.783
> 
> 标签：php, arrays, multidimensional-array

我如何循环遍历这个数组。我已经尝试了具有奇怪结果的 foreach 语句。我需要访问 StopName 和 Time 的值。

提前致谢

```
 Array
(
    [Direction0] => Array
        (
            [0] => Array
                (
                    [DirectionNum] => 0
                    [EndTime] => 2012-11-26T06:16:00
                    [RouteID] => 87v1
                    [StartTime] => 2012-11-26T05:51:00
                    [StopTimes] => Array
                        (
                            [0] => Array
                                (
                                    [StopID] => 3002573
                                    [StopName] => GREENBELT STATION + BUS BAY C
                                    [StopSeq] => 1
                                    [Time] => 2012-11-26T05:51:00
                                )

                            [1] => Array
                                (
                                    [StopID] => 3002579
                                    [StopName] => GREENBELT METRO DRIVE + CHERRYWOOD
                                    [StopSeq] => 6
                                    [Time] => 2012-11-26T05:52:26
                                )

                            [2] => Array
                                (
                                    [StopID] => 3002409
                                    [StopName] => CHERRYWOOD LA + IVY LA
                                    [StopSeq] => 8
                                    [Time] => 2012-11-26T05:53:31
                                )

                            [3] => Array
                                (
                                    [StopID] => 3002413
                                    [StopName] => CHERRYWOOD LA + US COURT HOUSE
                                    [StopSeq] => 10
                                    [Time] => 2012-11-26T05:54:00
                                )

                            [4] => Array
                                (
                                    [StopID] => 3002910
                                    [StopName] => POWDER MILL RD + #161
                                    [StopSeq] => 20
                                    [Time] => 2012-11-26T05:57:35
                                ) 
```

这段代码最初是一个 json 对象的形式，我使用了 php json_decode 函数，它将这些数据转换为一个多维数组。希望我的问题足够清楚，可以提供见解或解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T10:52:04.237

鉴于您的数组被调用`$array`，您可以执行以下操作：

```
foreach($array['Direction0'][0]['StopTimes'] as $arr) {
   echo $arr['StopName'];
   echo $arr['Time'];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T10:53:02.047

您需要使用多个 foreach 假设您可以在第一个数组中有多个“DirectionXXX”并且在每个方向数组中有多个索引

```
foreach($myArray as $direction){
    foreach($direction as $subdirection){
        foreach($subdirection['StopTimes'] as $stopTime){
            echo "Stop Name : " . $stopTime['StopName'] . " - Time : " . $stopTime['time'];
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T10:53:47.937

```
foreach ($your_array as $direction) {
    foreach ($direction as $id => $direction_data) {         
         foreach ($direction_data['StopTimes'] as $stop_id => $stoptime_data) {
              // finally you got it
              echo $stoptime_data["StopName"];
              echo $stoptime_data["Time"];
         }
    }
} 
```

# javascript - 交换html输出的最有效方法是什么

> ID：13658656
> 
> 赞同：0
> 
> 时间：2012-12-01T10:47:58.397
> 
> 标签：javascript, html, css

我正在用 html5、js 和 css3 编写一个基于图形的应用程序。此时，它接受用户输入并创建一个数字数组，我打算用它来生成基于图形的结果。

在现有页面上显示结果的最有效方法是什么？这可能听起来有点模糊，我不确定如何表达这个问题。这在寻找答案时显然无济于事。

所以这是我迄今为止考虑过的选项。

1.  在高级标签中放置一个 id="here" 并在我想要生成结果时使用 js 重写整个内容。
2.  让我的 html 变得非常简单，并将两个显示器的所有 html 构造都放入 js 函数中，从而能够从一个显示器移动到下一个显示器。
3.  使用 iframe 标记 & 基本上做同样的事情，为每个显示使用单独的 html 文件

或者 ？？？？

我怀疑对此有一个简单而优雅的答案。即使只是一个好的搜索词，也会很棒。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:06:06.800

根据我对问题的理解，您想要构建一些动态数量的元素，这些元素将显示给用户，并且您希望以一种保持性能的方式来实现。

我建议您使用简单的 html 并使用 javascript 函数动态构建动态显示。

您可以通过确保您正在动态构建的元素的容器将其显示设置为 none 来显着提高性能，这将防止浏览器在您插入每个元素后重绘元素。

**编辑：**

我的意思是，`display:none`如果您要像这样构建您的显示器：

HTML：

```
<p>Your results:</p>
<div id="divResults">
</div> 
```

Javascript（假设 jQuery）：

```
var divResults = $('#divResults');
function BuildResults(arr) {
   divResults.children().remove();
   var i = arr.length;
   while (i--) {
      var spnResult = $('<span class="result">');
      divResults.append(spnResult);
   }
} 
```

每次调用`divResults.append(spnResult);`浏览器都会重绘页面上的元素，这在规模上可能会影响性能。解决方案是`divResults`在清空/附加元素之前隐藏，并在重建结果后最终显示。

但是，如果您采用在 javascript 中构建大元素然后将其附加到页面的方法，则无需担心在附加结果结构之前/之后隐藏/显示容器。

# iphone - 如何在 XCode 4.5 的 iOS 6 中的 Facebook 用户墙上上传视频？

> ID：13658663
> 
> 赞同：-1
> 
> 时间：2012-12-01T10:49:19.383
> 
> 标签：iphone, facebook, ios6, xcode4.5

我正在尝试使用本教程[链接](https://bitbucket.org/danielphillips/fb-video-upload)在 facebook 墙上上传视频。当我在 Xcode 4.5 中运行本教程源代码时，它给了我以下错误

' `FacebookSDK/FacebookSDK.h`'

文件未找到

有人可以指导我如何解决此错误。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T10:52:43.797

你是否包含了 FacebookSDK 框架？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T10:57:43.530

检查以下事项：

1.  添加 FacebookSDK.Framework 或 FBiOSSDK.Framework

    [SDK链接](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/)

2.  导入 FacebookSDK/FacebookSDK.h

3.  验证在 Build Phases 中添加的框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T14:17:29.127

对于 ios6，无需添加 FacebookSDK，它具有内置库。添加`Social.framework`和`Accounts.framework`使用`SLComposeViewController`您可以共享图像、网址、文本。

# c++ - How can I return a string as a template class in C++?

> ID：13658667
> 
> 赞同：0
> 
> 时间：2012-12-01T10:49:55.970
> 
> 标签：c++, string, templates

I want to write a **template< class T > T string_to_T(const string& s)** function that switches a string to a tempate T. T can be int/double/string and I write one as below:

```
template<class T> T Config::string_to_T(const string& s){
    T t;
    bool at_in = false;

    istringstream ist(s);
    ist >> t;

    return t;
} 
```

But when there is a blank space in the string, it doesn't work. **e.g. string = '1 2 3 4'**, returned t is **string** type and equals 4\. How can I change to meet my need?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T11:33:01.327

See `boost::lexical_cast`. Basically, you need to specialize for the cases where `>>` doesn't do what you want. If you want `string_to_T<std::string>` to be a no-op, for example, you write a specialization:

```
template<>
std::string
string_to_T<std::string>( std::string const& s )
{
    return s;
} 
```

For more complicated cases, you can forward to a functional object, and use partial specialization, but for the case you describe, this shouldn't be necessary.

While you're at it, you should probably think about error handling. What happens if you call `string_to_T<int>`, and the input is "abcd"? For that matter, if you call `string_to_T<int>` with `"1 2 3 4"`, should the results be 1, or an error?

## EDIT:

Having seen more of the comments to your question: you cannot change the return type at runtime (with certain very limited exceptions when returning a reference or a pointer within a class hierarchy). C++ is a statically typed language, every expression has a distinct type, determined at compile time. Supposing you could return two different types, how would you use the function, and how could the compiler detect the type errors it is required to detecte. The closest you can come is to return some sort of proxy, with implicit conversions to the various types, but the type you convert to would still be statically determined, according to what you do with the results: assign it to an `int`, and it will convert to an `int`, regardless of the contents of the string.

This type safety is a feature; detecting errors at compile time makes the code far more robust and sure than deferring the error detection to runtime. If you can do without this safety (non-critical application), and need the added flexibility of runtime typing, C++ is not the right language; you should be using something like Python.

## EDIT 2:

In response to your comment, the solution would seem to be something along the lines of:

```
class ToStringHelper
{
    std::string myValue;
public:
    ToStringHelper( std::string const& value )
        : myValue( value )
    {
    }
    operator std::string() const
    {
        return myValue;
    }
    template <typename T>
    operator T() const
    {
        std::istringstream cvt( myValue );
        T results;
        cvt >> results;
        //  Error checking here...
        return results;
    }
};

ToStringHelper
string_to_T( std::string const& s )
{
    return ToStringHelper( s );
} 
```

I use this exact pattern for configuration data (with errors triggering an exception).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T11:33:08.070

The function you showed is doing a conversion from `std::string` to `T`. You specify `T` at compile time, you *cannot* change it at runtime.

If you want the type to depend on the value, you can use a Variant. See [Boost.Variant](http://www.boost.org/doc/libs/1_52_0/doc/html/variant.html) for example (if you're working with Qt, there is QVariant). You can also use [Boost.Any](http://www.boost.org/doc/libs/1_52_0/doc/html/any.html) ([difference between Variant and Any](http://www.boost.org/doc/libs/1_39_0/doc/html/variant/misc.html#variant.versus-any)). For the conversion you might want to use [Boost.Lexical_Cast](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_lexical_cast.html). You will probably need to specify yourself that `"1" -> 1` and `"1 2 3 4" - > "1 2 3 4"` in the variant/any. Be aware that all these functions will need you to add some code to handle the types. With variants, you can use [visitors](http://www.boost.org/doc/libs/1_52_0/doc/html/boost/apply_visitor.html), a really powerful method to handle different types in variants.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T11:44:59.907

Code to Convert any datatype to string:

```
#include <string>
#include <sstream>
#include <iostream>
using namespace std;

template <class T>
string toString(const T& t)
{
    std::stringstream ss;
    ss << t;
    return ss.str();
}

int main(void)
{

    string str;

    cout<<"Convert any datatype to string\n\n\n";

    int i=1234;
    str=toString(i );
    cout<<"int i= "<<str<<"\n";

  cout<<" \nPress any key to continue\n";
  cin.ignore();
  cin.get();

   return 0;
} 
```

# jsf - 在运行时根据某些条件在 JSF 2.0 中设置下拉值

> ID：13658668
> 
> 赞同：1
> 
> 时间：2012-12-01T10:50:07.960
> 
> 标签：jsf, primefaces

我正在尝试在 primefaces JSF 的下拉框中设置值。我有一个数据表，其中数据来自数据库，在选择一行后，我需要检查一列的值，并据此在下拉列表中设置值。下拉框中有两个值，它们是也来自数据库..只是我需要根据数据表列值设置一个值。

我的数据表的代码

```
<p:dataTable var="patient"  value="#{patientNotes.patientNote}"
                        scrollable="true" scrollHeight="262" rowKey="#{patient.id}"
                        styleClass="mygrid" paginator="true" rows="10"
                        paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                        currentPageReportTemplate="(Displaying {startRecord} - {endRecord} of {totalRecords}, Page: {currentPage}/{totalPages})"
                        paginatorPosition="bottom" rowsPerPageTemplate="5,10,15"
                        selection="#{patientNotes.selectedNotes}" selectionMode="single">

                        <p:ajax event="rowSelect" listener="#{patientNotes.onRowSelect}"  />
                        <p:column style="text-align: center" width="180">
                            <f:facet name="header">
                                <h:outputText value="Type" />
                            </f:facet>
                            <h:graphicImage value="../../images/dialog-warning.png" rendered="#{patient.warning == 'Y'}"/>
                            <h:graphicImage  value ="../../images/alert.jpg" rendered="#{patient.alert == 'Y'}" />
                            <h:graphicImage value = "../../images/transaction_flat_16.gif"  rendered="#{patient.creditControl == 'Y'}" />
                        </p:column>
                        <p:column headerText="Note" width="180">

                            <h:outputText value="#{patient.note}" ></h:outputText>
                        </p:column>
                        <p:column headerText="Created By" width="180">

                            <h:outputText value="#{patient.createdBy}"></h:outputText>
                        </p:column>
                        <p:column headerText="Date" width="180">
                            <h:outputText value="#{patient.date}"></h:outputText>
                        </p:column>

                    </p:dataTable> 
```

在选择行时，我需要检查一个变量警报，如果它是“Y”，我需要在下拉框中设置 Alert else Admin .. 这两个值 ALERT 和 Admin 位于来自数据库的下拉框中，我只需要设置它们.

下拉代码

```
<h:panelGroup layout="block" class="inputContainer3" id="paneltype">
                    <span>Type: </span>
                    <h:selectOneMenu value="#{addNotes.typeSelection}" id="menutype">
                        <f:selectItem itemLabel=""
                            itemValue="1" />
                        <f:selectItems value="#{addNotes.selectedType}" />
                    </h:selectOneMenu>
                </h:panelGroup> 
```

请帮助我，如果你有更多的代码请让我不

提前致谢

# java - 如何在 android 中将图像和音频文件附加到电子邮件？

> ID：13658670
> 
> 赞同：0
> 
> 时间：2012-12-01T10:50:33.823
> 
> 标签：java, android, android-layout, android-intent

我想将图像和音频文件附加到电子邮件。如何做到这一点。我在这里找到了很多，但仍然无法得到解决方案。我尝试了很多。请有人帮我解决这个问题。在此先感谢。我的代码是：

```
Intent email = new Intent(Intent.ACTION_SEND_MULTIPLE);
        email.putExtra(Intent.EXTRA_EMAIL, new String[] {});
        // email.setType("image/png");
        email.setType("*/*");
        email.putExtra(Intent.EXTRA_SUBJECT, TAG);
        email.putExtra(Intent.EXTRA_TEXT,
                getResources().getText(R.string.Message));

        ArrayList<Uri> imageUris = new ArrayList<Uri>();

        Uri imageUri1 = Uri.parse("android.resource://" + getPackageName()
                + "/" + R.drawable.ic_launcher);

        // Uri imageUri2 = Uri.parse("android.resource://" +
        // getPackageName()
        // + "/" + R.drawable.twitter);

        Uri imageUri2 = Uri.parse("file:///android_asset/Male_Hard_2.mp3");

        imageUris.add(imageUri1); // Add your image URIs here
        imageUris.add(imageUri2);

        email.putParcelableArrayListExtra(Intent.EXTRA_STREAM, imageUris);

        // AssetManager assetManager = getAssets();
        // InputStream inputStream = null;
        // try {
        // inputStream = assetManager.open("Male_Hard_2.mp3");
        // } catch (IOException e) {
        // Log.e("message: ", e.getMessage());
        // }

        // Uri uri = Uri.parse("android.resource://" + getPackageName() +
        // "/"
        // + R.drawable.ic_launcher);
        //
        // Uri uri1 = Uri.parse("file:///android_asset/male_hard_2");
        //
        // email.putExtra(Intent.EXTRA_STREAM, uri);
        //
        // email.putExtra(Intent.EXTRA_STREAM, uri1);

        startActivity(Intent.createChooser(email,
                "Choose an Email client :")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:42:55.930

试试这个音频文件：

```
Intent i = new Intent(Intent.ACTION_SEND);
    i.setType("audio/rfc822");
    i.putExtra(Intent.EXTRA_EMAIL, new String[] {"someone@gmail.com"} );
    i.putExtra(Intent.EXTRA_SUBJECT, "MySubject");
    i.putExtra(Intent.EXTRA_STREAM, Uri.parse(Environment.getExternalStorageDirectory().getAbsolutePath() + File.separator + "audiorecorder.3gpp");
    startActivity(i) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T12:19:44.423

我已经在 MailSenderActivity(m.attachment()) 中附加了带有来自 sdcard 的附件图像的示例代码..试试这个

**MailSenderActivity.java**

公共类 MailSenderActivity 扩展 Activity {

```
private static final String GMAIL_EMAIL_ID = "";
private static final String GMAIL_ACCOUNT_PASSWORD = "";
private static final String TO_ADDRESSES = "";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main); 
```

MailSender.execute();

```
}

class MailSender extends AsyncTask<Void, Integer, Integer> {

    ProgressDialog pd = null;

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
        pd = new ProgressDialog(MailSenderActivity.this);
        pd.setTitle("Sending...");
        pd.setMessage("Mail Sending. Please wait...");
        pd.setCancelable(false);
        pd.show();

    }

    @Override
    protected Integer doInBackground(Void... params) {

        Mail m = new Mail(GMAIL_EMAIL_ID, GMAIL_ACCOUNT_PASSWORD);

        String toAddresses = TO_ADDRESSES;
        m.setToAddresses(toAddresses);
        m.setFromAddress(GMAIL_EMAIL_ID);
        m.setMailSubject("captured image.");
        m.setMailBody("Email body.");

        try {

             m.addAttachment("/mnt/sdcard/cpimg.jpg");

            if (m.send()) {
                System.out.println("Message sent");
                return 1;
            } else {
                return 2;
            }

        } catch (Exception e) {
            Log.e("MailApp", "Could not send email", e);
        }
        return 3;
    }

    @Override
    protected void onPostExecute(Integer result) {

        super.onPostExecute(result);
        pd.dismiss();

        if (result == 1)
            Toast.makeText(MailSenderActivity.this,
                    "Email was sent successfully.", Toast.LENGTH_LONG)
                    .show();
        else if (result == 2)
            Toast.makeText(MailSenderActivity.this, "Email was not sent.",
                    Toast.LENGTH_LONG).show();
        else if (result == 3)
            Toast.makeText(MailSenderActivity.this,
                    "There was a problem sending the email.",
                    Toast.LENGTH_LONG).show();

    }
} 
```

}

希望这会有所帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T10:59:31.303

试试下面的代码...

```
final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND_MULTIPLE);

emailIntent.setType("plain/text");
emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,new String[]{"email"});
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "subject");
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,"Test");
//has to be an ArrayList
ArrayList<Uri> uris = new ArrayList<Uri>();
//convert from paths to Android friendly Parcelable Uri's
for (String file : filePaths)
{
    File fileIn = new File(file);
    Uri u = Uri.fromFile(fileIn);
    uris.add(u);
}
emailIntent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, uris);
context.startActivity(emailIntent); 
```

# linux - 为什么 ARM 在 ISR 结束时处理 IPI

> ID：13658676
> 
> 赞同：2
> 
> 时间：2012-12-01T10:50:59.477
> 
> 标签：linux, arm, interrupt, smp, irq

我正在研究 Linux 上的 IRQ 处理。我有一个问题，为什么我们需要在每个 ISR [for SMP] 结束时处理 IPI。IPI 有什么特别之处吗？为什么我们不在 do_asm_IRQ 中处理其他中断。

任何建议将不胜感激。

```
 6         .macro  arch_irq_handler_default
  7         get_irqnr_preamble r6, lr
  8 1:      get_irqnr_and_base r0, r2, r6, lr
  9         movne   r1, sp
 10         @
 11         @ routine called with r0 = irq number, r1 = struct pt_regs *
 12         @
 13         adrne   lr, BSYM(1b)
 14         bne     asm_do_IRQ
 15 
 16 #ifdef CONFIG_SMP
 17         /*
 18          * XXX
 19          *
 20          * this macro assumes that irqstat (r2) and base (r6) are
 21          * preserved from get_irqnr_and_base above
 22          */
 23         ALT_SMP(test_for_ipi r0, r2, r6, lr)
 24         ALT_UP_B(9997f)
 25         movne   r1, sp
 26         adrne   lr, BSYM(1b)
 27         bne     do_IPI
 28 #endif 
```

[http://lxr.oss.org.cn/source/arch/arm/include/asm/entry-macro-multi.S?v=3.5.2;a=arm](http://lxr.oss.org.cn/source/arch/arm/include/asm/entry-macro-multi.S?v=3.5.2;a=arm)

# html - 导航栏和液体设计

> ID：13658678
> 
> 赞同：1
> 
> 时间：2012-12-01T10:51:15.977
> 
> 标签：html, css

在我的新网站上，我真正专注于使用流式布局。但是，我似乎无法正确使用导航栏。目前我正在使用一个带有浮动列表的水平导航栏。我有几个按钮浮动在左边和几个右边。现在我的问题是一旦窗口宽度变得太小，一些按钮会跳转到文档中的下一行。我想避免或至少看起来不错的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:44:56.970

在没有看到示例的情况下，我会说您应该开始使用媒体查询。找到菜单中断的浏览器宽度，然后将其添加到您的 CSS：

```
@media all and (max-width: ???px) {
    #yournavbar {
        /* some styles here that change your navbar /*

    }
} 
```

这样，您不必设置导航栏的样式，使其*始终*以相同的方式工作并且仍然看起来不错，但是您可以更改低于（或高于）某个阈值的样式，以便它开始表现不同，基于情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T12:17:35.977

导航栏中的 li 元素是固定宽度的吗？如果是，它们周围的包装器需要有一个固定的宽度，等于添加的 withs 和 margins，这将防止浮动下降。

另一种选择是在整个布局上使用 min-width 来强制滚动条，这也将防止浮动下降。

# java - 单击eclipse中的按钮后如何显示项目？

> ID：13658682
> 
> 赞同：0
> 
> 时间：2012-12-01T10:51:39.073
> 
> 标签：java, android, button

在我的应用程序中.. 用户可以根据类别输入费用，如果他们有多个类别要输入，则有一个按钮允许用户单击以显示另一组类别（红色矩形框内容）在同一页面中。

任何方法都可以做到这一点？

非常感谢你。

![费用页面截图](../Images/419b5f176143bea1dbb418e975859e7e.png)

我的布局 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#f8f9fe"
android:orientation="vertical" >

<include layout="@layout/actionbar_layout" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/recordExpenses"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="15dip"
        android:text="@string/expensesRecord"
        android:textColor="#ff29549f"
        android:textSize="25dip"
        android:textStyle="bold" />

</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/recordDate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.59"
        android:text="@string/date"
        android:textSize="25sp" />

    <Spinner
        android:id="@+id/recordDaySpinner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.84"
        android:entries="@array/daySpinner" />

</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/recordCategory"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/category"
        android:textSize="25sp" />

    <Spinner
        android:id="@+id/recordCategorySpinner"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1" 
        android:entries="@array/categorySpinner"/>

</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/recordRM"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.00"
        android:text="@string/rm"
        android:textSize="25sp" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="99dp"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="number" >

        <requestFocus />
    </EditText>
</LinearLayout>

<Button
    android:id="@+id/recordAddCategory"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/addCategory" />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/total"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/total"
        android:textSize="25sp" />

</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/balance"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/balance"
        android:textSize="25sp" />

</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/backButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/back" />

    <Button
        android:id="@+id/recordSaveButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/save" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T15:40:40.220

我花了一段时间，但我想我终于得到了你想要的。就我个人而言，我认为您这样做的方式是将该部分实现为`listView`动态表格布局。我用 listView 做了一个小模型，因为我认为使用它会不那么麻烦。

主要活动：

```
public class MainActivity extends Activity {

    private CustomAdapter adapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main); 

        ListView lv = (ListView) findViewById(R.id.listView1);
        adapter = new CustomAdapter(this);
        lv.setAdapter(adapter);

        Button btnAdd_category = (Button) findViewById(R.id.recordAddCategory);
        btnAdd_category.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                adapter.addRow();
            }
        });
    } 
```

listView 的自定义适配器

```
public class CustomAdapter extends BaseAdapter {

    int rowCount = 1;
    private LayoutInflater inflator;

    public CustomAdapter(Context context) {
        super();
        inflator = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return rowCount;
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int postion, View convertView, ViewGroup parent) {
        if (convertView == null) {
            convertView = inflator.inflate(R.layout.row, parent, false);            
        }
        return convertView;
    }

    public void addRow() {
        rowCount++;
        notifyDataSetChanged();
    }
} 
```

如您所见，整个机制取决于`getCount()`方法。当您添加或减少它返回的数字时，它会告诉适配器您想要膨胀多少行。为了修改它，我们创建了一个名为`addRow()`. 其余的应该是不言自明的。此处膨胀的`row`xml 只是您希望在按下按钮时重复的红色框线布局。我建议将整个页面放在 a 中，`ScrollView`因为如果额外的行使视图超出范围，您将需要它。

* * *

此外，这与您的问题无关，但我认为您重新考虑您的 xml 布局。一般来说，使用`LinearLayout`比您可以管理的更多的视图组（等）效率要低得多。或许，如果您愿意，不妨试一试，`RelativeLayout`或想办法将所有东西装箱`LinearLayout`，因为它是专为堆叠多行视图而设计的，就像您拥有的一样，无需额外的容器。

# java - 如何将java变量传递给java脚本函数

> ID：13658684
> 
> 赞同：-10
> 
> 时间：2012-12-01T10:51:53.197
> 
> 标签：java, javascript, cordova

我需要将 Java 变量传递给 JavaScript 函数，并且需要将该 Java 变量存储在 JavaScript 中。我该怎么办？

考虑以下 Java 代码：

```
NodeList list = rootElement_plutus.getElementsByTagName("StatusMessage");
if (list != null && list.getLength() > 0) 
{
    NodeList subList = list.item(0).getChildNodes();
    if (subList != null && subList.getLength() > 0) 
    {
         STATUS_Plutus = subList.item(0).getNodeValue();
         System.out.println("output:  "+STATUS_Plutus);
     "Here i need to pass variable  'STATUS_Plutus' to javascript function"  
     }
} 
```

我在这里没有使用任何 servlet。它只是一个正常的fn。

你能给出确切的行，以便我可以将它粘贴到那里...

Javascript函数在另一个页面上......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:14:54.027

我不确定您要做什么，但是您可以尝试这样的事情（因为您指的是直接从 Java 传递到 Javascript）...（仅适用于**JDK1.6+**）...

```
ScriptEngineManager mgr = new ScriptEngineManager();
ScriptEngine engine = mgr.getEngineByName("JavaScript");
String javascript = "3+2*(4+5)";
System.out.println(engine.eval(javascript)); 
```

ps 确保您之前已导入这些..

```
import javax.script.ScriptEngineManager;
import javax.script.ScriptEngine; 
```

# objective-c - 为什么 iOS 模拟器会在此暂停？

> ID：13658685
> 
> 赞同：1
> 
> 时间：2012-12-01T10:52:01.343
> 
> 标签：objective-c, ios, xcode

我正在尝试为计算器制作一个方形按钮，它应该从 MainLabel 中获取值，将其与自身相乘，然后对其进行更新以显示结果。

我正在使用的代码是：

```
- (IBAction)squarePressed:(id)sender
{

    NSString *mainLabelString = mainLabel.text;

    int mainlabelValue = [mainLabelString intValue];

    NSString *calculatedValue = ((mainlabelValue)*(mainlabelValue));

    mainLabel.text = calculatedValue;

} 
```

当我按下模拟器中的按钮时，它会暂停，线程 1 在最后一行说这个；

```
Thread 1: EXC_BAD_ACCESS (code=2, address= 0x51) 
```

这是什么意思，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T10:57:40.183

这意味着您尝试访问没有对象的对象。一条消息已发送到已被释放的对象或指向内存中垃圾的指针。

您应该在方法中设置断点并进行调试；为了查看您的代码是否被命中。如果是，则只需逐步检查并识别有问题的行，然后找出哪个指针是错误的（尝试使用调试器打印对象）。

我们不可能知道您的错误的确切来源，但是如果我应该尝试根据您的代码进行猜测，也许您忘记`mainLabel`在 Interface Builder 中进行连接，因此当您的方法运行时它没有指向有效的标签?

错误的下一个（并且更有可能）来源是您为`mainLabel.text`指针分配了一个整数值。你应该在这里得到一个警告，但如果你忽略它，整数将被分配为一个指针。显然，该整数是指向有效 ObjC 对象的指针的可能性非常小，因此程序在尝试`mainLabel.text`再次访问时会失败。如另一个答案中所述，您应该使用数字创建一个字符串：

```
NSString *calculatedValue = [NSString stringWithFormat: @"%d", mainLabelValue*mainLabelValue]; 
```

当您遇到错误时尝试使用的数字是 9 吗？该消息说您试图访问内存位置 0x51，巧合的是，十进制为 81 = 9*9。使用`stringWithFormat`将数字格式化为字符串，并将*返回的字符串指针*分配给*字符串指针*属性`mainLabel.text`将解决您的问题。你需要小心你的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T10:57:29.933

检查从插座到操作到 UI 的所有连接。

然后检查此代码：

```
- (IBAction)squarePressed:(id)sender
{

  int mainlabelValue = [mainLabel.text intValue];

  NSString *calculatedValue = [NSString stringWithFormat:@"%d",(mainlabelValue)*(mainlabelValue)];

  mainLabel.text = calculatedValue;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T10:57:59.883

我不知道为什么编译器在这里没有给您一些错误或警告，但是您不能将 int 直接转换为字符串。

改为这样做：

```
NSString *mainLabelString = mainLabel.text;
int mainlabelValue = [mainLabelString intValue];
NSString *calculatedValue = [NSString stringWithFormat: @"%d",mainLabelValue*mainLabelValue];
mainLabel.text = calculatedValue; 
```

# .net - 我们如何在不通过 Native Delphi 安装 .net 框架的情况下使用 .net 程序集？

> ID：13658689
> 
> 赞同：0
> 
> 时间：2012-12-01T10:52:35.117
> 
> 标签：.net, delphi, linker, native

在[这篇文章](http://www.nickhodges.com/post/Blast-from-the-Past-Why-You-Should-Choose-Delphi.aspx)中， nick hodges 写道：“Delphi 可以将 .Net 代码链接到您的 EXE 中”。我们怎么做？是否存在有关此德尔福功能的任何示例？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T10:56:52.600

如果您阅读链接的文章下的评论，您会发现这是现已失效的 delphi.NET（如果我没记错的话，是 delphi8）的一个功能。即使这是可能的，您仍然会依赖 .NET 框架。

所以你的问题的答案是：**不可能**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-01T17:29:57.453

您可以使用用 C# 编写的常规 COM 组件，并将接口定义为 ComVisible(true)。

[托管 VCL](http://www.managed-vcl.com/)可以在 Delphi 可执行文件中更直接地导入 C# 程序集。

托管 VCL 可以：

*   使用程序集名称或位置从未注册 COM 的程序集创建 .Net 对象，并从流中加载 .Net 程序集；
*   创建和使用 COM 不可见的 .Net 对象；
*   使用参数化构造函数创建 .Net 对象；
*   调用 .Net 对象的属性/方法/字段，包括静态属性/方法/字段；
*   处理 .Net 异常并获取所有 .Net 异常属性，包括异常类型名称、StackTrace 等；
*   获取有关加载的.Net框架实例的信息，例如内存使用情况和按代堆的大小；
*   加载所需的 .Net 运行时，甚至选择启动时使用的运行时版本；
*   将 .Net 控件放在 VCL Win32 窗体上；
*   在 Win32 应用程序中使用 ADO.Net 数据源作为 TDataSet 后代。ADO.Net 将是 SQL Server 2005 (Yukon) 的本机和最受支持的 API；
*   托管 ASP.Net 页面和服务；
*   将 .Net 程序集作为资源嵌入到 Win32 应用程序中。

它比 Hydra 低得多，Hydra 更多的是在两个平台之间共享 UI，而 Managed VCL 真正是关于在 Delphi 进程中托管 DotNet CLR 机器，然后通过自己的类访问它。这是一项了不起的工作！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-01T11:26:15.933

有一种商业解决方案“hydra”。[http://www.remobjects.com/hydra/](http://www.remobjects.com/hydra/)

另一种可能性是使用 COM 互操作。要嵌入 .NET 源，您可以将程序集存储为资源文件，然后在需要单个 .exe 文件时将其写入磁盘。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-01T13:44:38.000

尼克写的文章提到了一个现在几乎过时的旧版本的德尔福。当 Delphi 2006 和 2007 作为“RAD Studio”的一部分发布时，它们包括三个“个性”：

*   德尔福
*   德尔福网
*   C++ 生成器

.net 个性已作为交付产品被删除，不再出现在“2009”版本或任何后续版本中，但您可能会感兴趣的是，为您提供“Delphi.net 2007”的底层技术仍然是在 Delphi XE3 中使用，因为 delphi 本身依赖于 .net 程序集。换句话说，Embarcadero 在内部仍然使用“Delphi .net”，但不提供给您。那不是因为他们小气，而是因为“Delphi.net”作为产品不再重要，.Net 不再是“所有新微软 API 的未来”。

微软花了很多精力让每个人都害怕.Net。不仅每个人都必须接受它，微软还声称 .net 将成为生成 Windows API 的新默认方式。由于当时 delphi 只是一个 Windows 产品，而且 Delphi 仍然主要用于生产 Windows 应用程序，因此仅 Windows 工具的开发人员不能忽视 Microsoft 所声明的意图。.Net 是未来。

即使在微软内部，这个想法也因急需而死。office 团队和 Windows 团队没有喝 .net kool-aid，而 .net 现在只是 windows 中的一层东西。

如今，在 2007 年之后的任何产品版本中，Delphi 都没有提供“盒装”工具来生产或使用 .net 程序集。但是，存在第三方解决方案。

尽管有人评论说“您仍然可以将 Delphi.net 2007 作为旧版本产品的一部分”购买大多数 RAD 工作室，但不建议您在这么晚的时候尝试从 Delphi.net 开始。

对于使用类似 Delphi 语法的纯 .net 编程，请尝试 Delphi Prism。对于 .net 代码和 Delphi 本机代码之间的接口，在同一进程中尝试 RemObjects Hydra。对于不同进程中的 .net 代码和 Delphi 代码之间的接口，请尝试 RemObjects SDK。

至于尼克的声明，他在他的博客顶部发布了这是一篇非常古老的博客文章，为了历史价值而被重新发布。这就是他的陈述的意思；它们在第一次发布时是最新的，从那时起时间已经过去了一点。

**更新**Bruce 友好地指出，如果您使用 .net 创建了 COM 组件，有关组件导入技术的评论可能仍然适用。然后，您可以使用 COM 互操作来制作一个特殊的 .net 程序集，该程序集可以通过 COM 使用，来自 Delphi，但我从未这样做过，所以我不打算在这里尝试。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-01T18:34:12.800

看看[AToZed CrossTalk](http://www.atozed.com/crosstalk/)。

> 什么是串音？
> 
> CrossTalk 允许原生 Delphi 代码使用和使用 .NET 类和库。.NET 类不需要更改或控制。CrossTalk 使这些类可用，使它们看起来像本地类。不需要注册表项或 COM 注册。只需要应用程序目录中的几个 DLL 文件。

# vim - vim：如何将 formatprg 错误重定向到 echoerr？

> ID：13658696
> 
> 赞同：3
> 
> 时间：2012-12-01T10:53:38.697
> 
> 标签：vim, code-formatting, io-redirection

在 vim 中，我使用外部代码格式化程序来美化我的代码。Vim 支持这一点。可以将“formatprg”选项设置为格式化代码的外部程序。请参阅 :help formatprg。formatprg 将您未格式化的代码放在标准输入上，并将格式化的代码放入标准输出。

现在，当 formatprg 成功时，一切正常。但是当出现问题时，会向 stderr 发送一条错误消息。不幸的是，vim 无法识别这一点，并且您未格式化的代码被错误消息替换。

如何将错误重定向到 vim 的 echoerr？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T11:24:39.717

您可以通过以下方式避免将错误输出插入缓冲区

```
:set shellredir=>%s 
```

但是，文本仍将被清除，并显示发生错误的少量迹象。不过，您可以轻松地`:undo`进行错误修改 ( `u`)。

[这个类似的问题](https://stackoverflow.com/questions/9466795/vim-using-an-external-command-and-handling-errors)显示了一种解决方法，但对我来说这看起来很难看，我想知道为什么 Vim 不评估外部程序的退出代码。（我会去 vim_dev 询问这背后的原因。*编辑*：[这里是](http://groups.google.com/group/vim_dev/browse_thread/thread/486730cbb19588db)）

# c - c集成程序中的舍入错误

> ID：13658699
> 
> 赞同：0
> 
> 时间：2012-12-01T10:53:59.927
> 
> 标签：c, integration, rounding-error

我正在制作一个程序，该程序针对不同的幂 n 值和常数 a 找到函数的积分。我的程序似乎工作正常，但我的结果中有一个小的舍入错误，我不知道为什么。我知道我有一个错误，因为我的一个朋友也在制作相同的程序，他的结果与我的略有不同，而且他绝对是正确的，因为在计算器上进行积分可以得到更接近他的值。下面是我的结果和他的 a=2 和 n=1。

他的结果：0.189070
我的结果：0.189053

我尝试了几乎所有我能想到的东西，但仍然无法弄清楚我从哪里得到错误，任何帮助指出我是个白痴的地方将不胜感激！:p

我的程序：

```
#include <stdlib.h>
#include <stdio.h>
#include <math.h>

#define debug 0
#define N (double)10000

double Integrand(double x, int a, int n);
double Integral(double *x, double dx, int a, int n);

int main (int argc, char* argv[])
{
    int j,a,n=0,count=0,size=(int)N;
    double dx=1/N, x[size];

    sscanf(argv[1], "%d", &a);
    for(j=0;j<N;j++) {
        x[j]=(double)(j)*dx;
    }
    for(n=1;n<=10;n++) {
        printf("n is %d integral is %lf\n",n,Integral(x,dx,a,n));
    }    
    return(EXIT_SUCCESS);
}

double Integral(double *x, double dx, int a, int n)
{
    int i;
    double result=0;

    for(i=0;i<N;i++) {
       result +=(double)((Integrand((double)x[i],a,n))*dx);
    }
    return(result);
}

double Integrand(double x, int a, int n)
{
   double result;
   result=(double)(((pow(x,(double)n))/(x+(double)a)));
   return(result);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T11:03:53.133

It's not a rounding error, you just don't pick the best choice for integration points. Change the initialisation to

```
x[j]=(j+0.5)*dx; 
```

so that you take the midpoint of each integration strip to calculate the value of the integrand. If you always take the left or right endpoint, you will get a systematically too large error for monotonic functions.

If you approximate the integral of a sufficiently smooth function `f` by a Riemann sum,

```
 b           n
 ∫ f(x) dx ≈ ∑ f(y_k)*(b-a)/n
 a          k=1 
```

the choice of `y_k` in the interval `[x_(k-1), x_k] = [a+(k-1)*(b-a)/n, a+k*(b-a)/n]` influences the error and the speed of convergence. Writing

```
f(x) = f(y_k) + f'(y_k)*(x-y_k) + 1/2*f''(y_k)*(x-y_k)² + O((x-y_k)³) 
```

in that interval, you find that

```
x_k                                   x_k                            x_k
 ∫ f(x) dx = f(y_k)*(b-a)/n + f'(y_k)* ∫ (x-y_k) dx + 1/2*f''(y_k) * ∫ (x-y_k)² dx + O(1/n^4)
x_(k-1)                               x_(k-1)                       x_(k-1)

           = f(y_k)*(b-a)/n + 1/2*f'(y_k)*(b-a)/n*((x_k-y_k)-(y_k-x_(k-1))) + O(1/n³) 
```

and the first and largest error term with respect to the approximation `f(y_k)*(b-a)/n` vanishes for

```
y_k = (x_k + x_(k-1))/2 
```

giving you an overall O(1/n³) error for that strip, and a total O(1/n²) error for the entire Riemann sum.

If you choose `y_k = x_(k-1)` (or `y_k = x_k`), the first error term becomes

```
±1/2*f'(y_k)*[(b-a)/n]² 
```

leading to an O(1/n) total error.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T10:59:06.337

在 Linux 终端提示符下，键入：

```
man fegetenv 
```

# java - Servlet.init 异常

> ID：13658706
> 
> 赞同：0
> 
> 时间：2012-12-01T10:54:51.550
> 
> 标签：java, jsp, maven, spring-mvc

我正在开发具有 Maven 特性的 MVC Spring 应用程序。一切似乎都很好，但最近我收到了这个错误：

```
Servlet.init() for servlet dispatcher threw exception 
```

这太奇怪了。而且我无法理解到底是什么问题！

```
exception 

javax.servlet.ServletException: Servlet.init() for servlet dispatcher threw exception
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:861)
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606)
org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
java.lang.Thread.run(Thread.java:619)

root cause 

org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [com.nortal.vspa.controller.HelloWorldController] for bean with name '/welcome.htm' defined in ServletContext resource [/WEB-INF/dispatcher-servlet.xml]; nested exception is java.lang.ClassNotFoundException: com.nortal.vspa.controller.HelloWorldController
org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1250)
org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:576)
org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1319)
org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:885)
org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:562)
org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:442)
org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458)
org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:339)
org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:306)
org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
javax.servlet.GenericServlet.init(GenericServlet.java:212)
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:861)
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606)
org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
java.lang.Thread.run(Thread.java:619) 
```

dispather-servlet.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

<bean id="viewResolver"
      class="org.springframework.web.servlet.view.InternalResourceViewResolver" >
    <property name="prefix">
        <value>/WEB-INF/jsp/</value>
    </property>
    <property name="suffix">
        <value>.jsp</value>
    </property>
</bean>

<bean name="/welcome.htm" class="com.nortal.vspa.controller.HelloWorldController" ></bean>
<bean name="/rate.htm" class="com.nortal.vspa.controller.RateController" ></bean> 
```

vspa-context.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">
<context:annotation-config />
<context:component-scan base-package="com.nortal.vspa.controller" /> 
```

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>*.htm</url-pattern>
</servlet-mapping>
<welcome-file-list>
    <welcome-file>redirect.jsp</welcome-file>
</welcome-file-list> 
```

你能帮助我吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:05:10.243

Well, it seems reasonably clear:

```
Cannot find class [com.nortal.vspa.controller.HelloWorldController] 
```

So you need to work out where that class is defined, and make sure it's in the appropriate classpath for that servlet, in a way that Spring is able to find it.

# wpf - Caliburn micro 在无应用程序对象模式下，如在 AutoCAD dll 插件中

> ID：13658711
> 
> 赞同：3
> 
> 时间：2012-12-01T10:55:48.867
> 
> 标签：wpf, caliburn.micro, autocad

我正在使用 Caliburn Micro 开发 WPF 应用程序。此应用程序的一些视图需要在 AutoCAD 环境中加载。AutoCAD 编程环境允许开发 AutoCAD 插件（dll 类型）并将它们加载到 AutoCAD 环境中。

由于 AutoCAD 插件类型（dll），插件没有应用程序对象，因此必须为此自定义引导程序。根据[此处的 Caliburn Micro 文档（向下滚动到“在 Office 和 WinForms 应用程序中使用 Caliburn.Micro”）](http://caliburnmicro.codeplex.com/wikipage?title=Customizing%20The%20Bootstrapper&referringTitle=Documentation)，我们可以继承非通用引导程序并将“false”传递给基本构造函数的“useApplication”参数。因此，我继续创建了自定义引导程序。

问题是 ConfigureContainer() 覆盖永远不会被调用，也没有任何东西被初始化。另外，我不确定如何使用 ViewModel 第一个概念加载 ShellView。这是我到现在为止的一些代码。

**引导程序**

```
public class AutocadMefBootStrapper : Bootstrapper {

    private CompositionContainer container;
    private ElementHost host;

    public AutocadMefBootStrapper(ElementHost host) : base(false) {
        this.host = host;
    }

    protected override void Configure() { //Not getting invoked.
        ...
        var rootViewModel = container.GetExportedValue<IShell>();
        var rootView = ViewLocator.LocateForModel(rootViewModel, null, null);
        host.Child = rootView;
    }
} 
```

我有一个 AutoCAD 在请求时加载的 Windows 窗体。在 Windows 窗体的加载事件中，我创建了一个实例定制的 caliburn 微型引导程序，并期望引导程序完成所有的魔法并加载 Shell。但壳牌不加载。我在 AutoCAD 中显示空白窗口。下面是 Windows 窗体的编码方式。

```
public partial class WinFormHost : Form {

    private void WinFormHost_Load(object sender, EventArgs e) {
        ElementHost host = new ElementHost();
        host.Dock = DockStyle.Fill;
        Controls.Add(host);
        AutocadMefBootStrapper bootStrapper = new AutocadMefBootStrapper(host);
    }
} 
```

**这是我的 ShellView**

```
<UserControl x:Class="RelayAnalysis_Autocad.Views.ShellView"
    ...
    <Grid>
        <TextBlock>Hello There</TextBlock>
    </Grid>
</UserControl> 
```

**和 ShellViewModel**

```
[Export(typeof(IShell))]
public class ShellViewModel : Conductor<object>, IShell {
    protected override void OnActivate() {
        base.OnActivate();
    }
} 
```

总而言之，我正在尝试在未使用 Application 对象加载的托管环境中使用 Caliburn Micro。我无法配置 Caliburn Micro，因为 ShellView 永远不会加载。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T12:31:50.003

此问题已得到解决。问题是在 AutoCAD 本身中加载支持程序集（dll）会出错。请参阅[此](https://stackoverflow.com/questions/13660652/targetting-x64-platform-with-entity-framework-4-1-in-visual-studio-2010#comment18749389_13660652)线程。正确加载程序集后，我可以使用 Caliburn Micro，它也可以在非 WPF 环境中工作。

**编辑：** 我将合乎逻辑地展示这个过程。我在纯 wpf 应用程序中开发的 wpf 屏幕将在 AutoCAD 插件中重复使用，但由于 autocad 插件是类库（dll），因此没有可用的应用程序对象。当 AutoCAD 启动时，插件代码在我可以初始化 caliburn 微引导程序的地方执行。这是相关的插件代码。

**我的插件.cs**

```
public class MyPlugin : IExtensionApplication {

    //Called when plugin is loaded. This is where I load xaml resources, since there is no App.xaml available

    void IExtensionApplication.Initialize() { 
         if (System.Windows.Application.Current == null) {
            new System.Windows.Application { ShutdownMode = ShutdownMode.OnExplicitShutdown }; 
        }
        System.Windows.Application.Current.Resources.MergedDictionaries.Add(System.Windows.Application.LoadComponent(
                new Uri("RelayAnalysis_Autocad;component/Content/Styles/CommonBrushes.xaml", UriKind.Relative)) as ResourceDictionary);
        System.Windows.Application.Current.Resources.MergedDictionaries.Add(System.Windows.Application.LoadComponent(
                new Uri("RelayAnalysis_Autocad;component/Content/Styles/Button.xaml", UriKind.Relative)) as ResourceDictionary);
    ...
        //Load Other xaml resources
    ...
        //Initialize the Bootstrapper
        AutocadMefBootStrapper bootstrapper = new AutocadMefBootStrapper();
    }

    //Called when plugin is unloaded
    void IExtensionApplication.Terminate() {
        // Do plug-in clean up here
        System.Windows.Application.Current.Shutdown();
    } 
```

请注意，应用程序具有显式关闭模式。这是必需的，虽然我不记得为什么！

Bootstrapper 没有太大区别，只是我们将 false 传递给文档中提到的基本构造函数。这是引导程序的样子

**AutocadMefBootStrapper.cs**

```
public class AutocadMefBootStrapper : Bootstrapper {

    public static CompositionContainer container;

    public AutocadMefBootStrapper()
        : base(false) {
    }

    protected override void Configure() {

        //Create and Add Catalogs.
        AssemblyCatalog currentAssemblyCatalog = new AssemblyCatalog(Assembly.GetExecutingAssembly());

        AssemblyCatalog domainAssemblyCatalog =
            new AssemblyCatalog(Assembly.GetAssembly(typeof(RelayAnalysis_Domain.Entity.Rack)));
    ...
    } 
```

这是配置部分，仅在加载插件时发生一次，配置 calibur micro。在此之后，代码与 AutoCAD 有点相关，但为了完整起见，我将分享。

**QueryRelay.cs** 此类接受来自 AutoCAD 用户的命令输入，然后显示请求的视图

```
public class QueryRelay {

    //This command is used to display a particular View. This is entered from AutoCAD Command Window
    public void QueryRelayCommand() {

        //Get the ViewModel for the screen from Container
        AcadRelayListViewModel relayListViewModel = AutocadMefBootStrapper.container.GetExportedValue<AcadRelayListViewModel>();
        IWindowManager windowManager = AutocadMefBootStrapper.container.GetExportedValue<IWindowManager>();
        windowManager.ShowWindow(relayListViewModel);
        ...
    }
} 
```

由于 AutoCAD 中的窗口是使用 AutoCAD 的 API 显示的，因此我不得不稍微自定义 Caliburn Micro WindowManager。这是 CustomWindowManager 的代码

**自定义窗口管理器.cs**

```
public class CustomWindowManager : WindowManager {

    public override void ShowWindow(object rootModel, object context = null, IDictionary<string, object> settings = null) {
        Autodesk.AutoCAD.ApplicationServices.Application.ShowModalWindow(null, CreateWindow(rootModel, false, null, null), false);
    }
} 
```

我让 CaliburnMicro 从 ViewModel（上面代码中的 rootModel）创建视图，然后使用 AutoCAD API 将其加载到 AutoCAD 中。视图的显示方式取决于托管应用程序（在我的例子中是 AutoCAD）。

最后 CustomWindowManager 必须在 BootStrapper 配置中注册

```
 protected override void Configure() {
        ...
        var batch = new CompositionBatch();
        batch.AddExportedValue<IWindowManager>(new CustomWindowManager());
        container.Compose(batch);
        ...
    } 
```

问候， 尼尔文

# javascript - javascript中的蛇-无法访问方法中的属性？

> ID：13658721
> 
> 赞同：0
> 
> 时间：2012-12-01T10:56:55.203
> 
> 标签：javascript, jquery, html

我试图在 js/jquery 中实现一个基本的蛇游戏。这是我到目前为止所拥有的：

```
$('document').ready(function() {

    Game = {
        Snake: function(startingLength) {
            this.snakeComponents = [], this.direction = 'right', this.length = startingLength;

            growSnake = function() {
                this.length += 1;
            }
        },

        gameSnake: {},

        gameSpeed: 0,

        init: function(startingSnakeLength, gameSpeedParam) {

            $.extend(this.gameSnake, new Game.Snake(startingSnakeLength));
            this.gameSpeed = gameSpeedParam;

            for (var i = 0; i < startingSnakeLength; i++) {
                this.gameSnake.snakeComponents.push({
                    x: i,
                    y: 0
                });
            }
            setInterval(Game.update, this.gameSpeed);
        },

        update: function() {
            dx = {
                right: 1,
                left: -1,
                up: 0,
                down: 0
            };
            dy = {
                right: 0,
                left: 0,
                up: 1,
                down: -1
            };

            var snakeLength = this.gameSnake.snakeComponents.length;
            var newSnakeHeadX = this.gameSnake.snakeComponents[snakeLength - 1].x + dx[this.gameSnake.direction];
            var newSnakeHeadY = this.gameSnake.snakeComponents[snakeLength - 1].y + dy[this.gameSnake.direction];

            //update snake components
            this.gameSnake.snakeComponents[snakeLength - 1].x = newSnakeHeadX;
            this.gameSnake.snakeComponents[snakeLength - 1].y = newSnakeHeadY;

            for (var i = 0; i < snakeLength - 1; i++) {
                this.gameSnake.snakeComponents[i].x = this.gameSnake.snakeComponents[i + 1].x;
                this.gameSnake.snakeComponents[i].y = this.gameSnake.snakeComponents[i + 1].y;
            }

            Game.render();
        },

        render: function() {
            for (var i = 0; i < this.gameSnake.length; i++) {
                console.log('Snake position: (' + this.gameSnake.snakeComponents[0].x + ',' + this.gameSnake.snakeComponents[0].y + '), ' + '(' + gameSnake.snakeComponents[1].x + ',' + gameSnake.snakeComponents[1].y + '), (' + gameSnake.snakeComponents[1].x + ',' + gameSnake.snakeComponents[1].y + ')')
            };
        }

    };

    Game.init(3, 1000);

}); 
```

现在，我可以在 init 方法中访问 Snake 实例 (this.gameSnake)，但是当代码在 update 方法上时，它变得未定义。我错过了什么/做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:10:21.593

使用 setInterval 时，您将面临执行上下文不正确的老问题。将代码更改`render`为：

```
 render: function() {
        for (var i = 0; i < Game.gameSnake.length; i++) {
            console.log('Snake position: (' + Game.gameSnake.snakeComponents[0].x + ',' + Game.gameSnake.snakeComponents[0].y + '), ' + '(' + Game.gameSnake.snakeComponents[1].x + ',' + Game.gameSnake.snakeComponents[1].y + '), (' + Game.gameSnake.snakeComponents[1].x + ',' + Game.gameSnake.snakeComponents[1].y + ')')
        };
    } 
```

`this`不起作用的原因是您没有像这样调用函数： `Game.update();`.

相反，您所做的是将函数作为参数传递给`setInterval`，它在全局范围内执行它（意味着`update`运行时，`this`是窗口对象）。由于`this`不再引用`Game`，因此我们决定`Game`显式引用。

有很多关于 JS 范围的好教程，你可能想看看它们。祝你好运！

# bash - grepping 顶部输出时的未知符号条目

> ID：13658723
> 
> 赞同：0
> 
> 时间：2012-12-01T10:57:13.220
> 
> 标签：bash, shell, ubuntu, gedit

我正在开发一个 bash 脚本文件，它将记录所有 CPU 数据，但是当我将该数据记录到日志文件时，我在该日志文件中得到了一些不规则的符号条目。

```
echo "Hi" $(top -n 1 | grep 'Mem' | cut -d ':' -f2 | cut -d ',' -f1 | cut -d 't' -f1) >> tst1 
```

此命令将打印总可用内存。现在在终端中我得到了正确的值，也在`cat`我得到了正确的值，但是当我在 gedit 中打开这个日志文件时，当时我得到了一些未知的符号条目，例如：

> (B[m[39;49m(B[m 3918912k (B[m[39;49m

现在我不知道这个未知的客人是如何进入我的日志文件的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:08:35.077

`top`使用[ANSI 转义码](http://en.wikipedia.org/wiki/ANSI_escape_code)来突出显示内存值，您的终端可以解释但您的文本编辑器不能。根据您的需要，您最好`/proc/meminfo`直接阅读，如下所示：

```
cat /proc/meminfo|grep MemTotal|awk '{print $2}' >> tst1 
```

# php - 在 Base64 中传递 html5 画布值的问题

> ID：13658724
> 
> 赞同：0
> 
> 时间：2012-12-01T10:57:25.530
> 
> 标签：php, jquery, html, codeigniter, canvas

嗨，我正在创建一个优惠券生成器...在此我通过 html 表格代码显示优惠券的预览.. 之后我将在画布中转换为 base64_encode

```
 var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext("2d");
        var data = "data:image/svg+xml," +
           "<svg xmlns='http://www.w3.org/2000/svg' width='437' height='262'>" +
             "<foreignObject width='100%' height='100%'>" +
               "<div xmlns='http://www.w3.org/1999/xhtml' style='font-size:40px'>" +
                 "<div xmlns='http://www.w3.org/1999/xhtml' style='font-size:40px'>"+$("#coupon_td").html()+"</div>" +
               "</div>" +
             "</foreignObject>" +
           "</svg>";
        var img = new Image();
        img.src = data;
        img.id = "base64_img";
        img.onload = function() { ctx.drawImage(img, 0, 0); }

        $("form").append("<input type='hidden' id='base_64_img' name='base_64_img' value='"+canvas.toDataURL()+"' />"); 
```

第一次画布会在第二次之后空白，它会没事的..为什么会发生这种情况？请帮我 ：（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T01:05:00.130

我在这里运行了你的代码，一切对我来说都很好。因此，唯一可能破坏您的代码的是“image.onload”。在设置“image.src”之前尝试放置它。

像这样：

```
var img    = new Image();
img.onload = function() { ctx.drawImage(img, 0, 0); }
img.src    = data;
img.id     = "base64_img"; 
```

这样，在您设置其 onload 回调之前，您的图像就不可能准备好。

# java - EclipseLink JPA2 Criteria Query 准备语句

> ID：13658725
> 
> 赞同：1
> 
> 时间：2012-12-01T10:57:26.887
> 
> 标签：java, persistence, jpa-2.0, eclipselink

背景：我正在编写一个连接到现有 SQL Server DB 的小型桌面应用程序。

我对编写 SQL 查询非常熟悉，但这次我想试一试 JPA。我已经映射了我的实体，一切都很好，但我不太担心性能。

我做了一些分析，结果是 JPA 代码并不比手动映射慢。但是还有一个问题困扰着我。

我已经使用 SQL Server Profiler 记录了查询，并且 Eclipse 链接不断调用 exec sp_prepexec 和 exec sp_unprepare 使用相同的查询但不同的参数。

我重写了代码以在查询中使用参数，但仍然没有运气。

类代码是：

在构造函数中，我创建 EntityManagerFactory 和 EntityManager

```
 emf = Persistence.createEntityManagerFactory("ZapytaniaOKonta_1.0");
    em = emf.createEntityManager();
    query=prepareQuery(); 
```

在 prepareQuery 我使用标准构建器和参数准备查询

```
 CriteriaBuilder builder = em.getCriteriaBuilder();
    CriteriaQuery<Uczestnik> criteria = builder.createQuery(Uczestnik.class);
    Root<Uczestnik> uczestnikRoot = criteria.from(Uczestnik.class);
    criteria.select(uczestnikRoot);
    ParameterExpression<Boolean> peselFilterParameter = builder.parameter(Boolean.class, "peselFilterParameter");
    ParameterExpression<String> peselParameter = builder.parameter(String.class, "peselParameter");
    Predicate peselPredicate = orBuilder(builder, uczestnikRoot, peselParameter, peselFilterParameter, Uczestnik_.pesel);

    ParameterExpression<Boolean> nipFilterParameter = builder.parameter(Boolean.class, "nipFilterParameter");
    ParameterExpression<String> nipParameter = builder.parameter(String.class, "nipParameter");
    Predicate nipPredicate = orBuilderNip(builder, uczestnikRoot, nipParameter, nipFilterParameter, Uczestnik_.nip);

    ParameterExpression<Boolean> regonFilterParameter = builder.parameter(Boolean.class, "regonFilterParameter");
    ParameterExpression<String> regonParameter = builder.parameter(String.class, "regonParameter");
    Predicate regonPredicate = orBuilder(builder, uczestnikRoot, regonParameter, regonFilterParameter, Uczestnik_.regon);

    criteria.where(builder.and(peselPredicate, nipPredicate, regonPredicate));
    uczestnikPeselRegonNipQuery = em.createQuery(criteria);
    return uczestnikPeselRegonNipQuery; 
```

使用查询时，我设置了所有参数并调用

```
 query.getResultList(); 
```

所以我的问题是如何让 EclipseLink 或其他 JPA2 提供者使用准备好的语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:28:15.673

EclipseLink 默认不使用语句缓存。要启用一次使用，

“eclipselink.jdbc.cache-statements”=“真”

这只能与 EclipseLink 的连接池一起使用。使用 JavaEE DataSource 时，您需要在 JavaEE 服务器的 DataSource 配置中启用语句缓存。

# c# - Windows 8 上的 Powershell Exchange 2010

> ID：13658732
> 
> 赞同：0
> 
> 时间：2012-12-01T10:57:48.227
> 
> 标签：c#, .net, powershell, windows-8, ironpython

Follow 脚本在 win 7 下运行良好，没有任何问题，但是当我在 windows 8 上加载我的应用程序以查看所有问题时，我发现该脚本将不再正常工作。它是一个非常简单的脚本，用于加载用户交换邮箱以搜索用户是否在更大的应用程序中拥有邮箱。它实际上是用 python 编写的，因为我使用 IronPython 作为插件系统。

```
 password = SecureString()
    str_password = "PASSWORD"
    str_user = "EXCHUSER"
    uri = "http://" + exchangeServerIP + "/PowerShell"

    for c in str_password:
        password.AppendChar(c)

    creds = PSCredential(str_user, password)

    connectionInfo = WSManConnectionInfo(Uri(uri), "http://schemas.microsoft.com/powershell/Microsoft.Exchange", creds)

    connectionInfo.AuthenticationMechanism = AuthenticationMechanism.Basic

    runspace = RunspaceFactory.CreateRunspace(connectionInfo)

    runspace.Open()

    powershell = PowerShell.Create()
    powershell.AddCommand("Get-Mailbox")
    if self.txtUsername.Text != "*":
        powershell.AddParameter("Identity", self.txtUsername.Text)

    powershell.AddParameter("ResultSize", "Unlimited")
    powershell.Runspace = runspace

    results = powershell.Invoke()

    if results == None or results.Count <= 0:
        MessageBox.Show("No mailboxes can be found!")
        runspace.Close()
        runspace.Dispose()
        powershell.Dispose()
        return

    self.dataGridView1.Rows.Clear()

    for result in results:
    >>>>>>> if result.Properties != None:   (ERROR HERE)  <<<<<<<
                if result.Properties["Name"] != None:
                    if result.Properties["Name"].Value != None:
                        System.Console.WriteLine(result.Properties["Name"].Value.ToString())

    runspace.Dispose()
    runspace.Close()
    runspace = None

    powershell.Dispose()
    powershell = None

    connectionInfo = None 
```

我已经标记了我得到错误的地方，说 result.Properties 是 NoneType ，在调试时我可以看到它已被填充并且正确的结果在那里。不确定 Windows 8 / .net 4.5 是否是问题的原因，但在 win 7 确切代码无空值下工作正常。任何建议都会有很大帮助。

**更新（答案）：**

经过不断的挖掘，我终于发现问题出在 Powershell 3 上。使用 Powershell 2 和 IronPython 访问成员我可以使用 result.Members["Name"].Value 但是使用 Powershell 3 和 DLR，IronPython 将返回 null 值result.Members Collection，所以我必须将其称为 result.Name。（其中结果 = PSObject）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T21:56:36.423

让我知道您在编译上述代码时遇到了什么错误。

还

1.首先检查您的代码sdk版本是否与您当前的软件版本匹配。

2.使用Visual Studio 2008/09/10/11开发的代码/应用程序不能在Visual Studio 2012中运行。

3.如果你复制了windows 7应用程序文件在win8下编译，它不会工作。只需在vs 2012中从头开始创建/编码。

# php - 使用 ajax 和 jquery 发送电子邮件

> ID：13658735
> 
> 赞同：0
> 
> 时间：2012-12-01T10:58:12.503
> 
> 标签：php, jquery, ajax

我正在尝试使用 Ajax 和 jquery 发送电子邮件，但即使 Ajax 请求成功，电子邮件也不会发送。电子邮件系统适用于其他事情，但不适用于我正在制作的回复系统......我的代码如下：

```
var message =  $('#message').val();
var dataString = 'message=' + message ;
$.ajax({
    type: "POST",
    url: "reply.php",
    data: dataString,
    cache: false,
    success: function(html)
    {
        // success function
    }
}); 
```

ajax调用成功并调用成功函数但未发送电子邮件.. php代码如下

```
$title = "something";
$message =  $_POST['message'];
$email = demo@demo
mail($email, "Reply to \"".$title."\"", $message,
"From: \"Ad reply\" <auto-reply@$host>\r\n" .
"X-Mailer: PHP/" . phpversion()); 
```

我也做过……`if(isset($_POST))`的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:10:21.487

您的代码未显示 $host 的设置位置。可能是导致它的格式错误的“发件人”地址？

另一方面，将帖子数据直接从表单发送到电子邮件不是一个好主意，您应该首先通过一些过滤器运行它，以确保不会有讨厌的代码最终出现在电子邮件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T12:35:42.827

试试这个代码，确保这会起作用 -

**PHP代码：**

```
if(isset($_GET['email'])){

$email = $_GET['email'];
$message = $_GET['msg'];

$to = "demo@example.com";
$subject = "Demo email";

$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= 'From:' .$email. "\r\n";            
mail($to, $subject, $message, $headers);
echo'success';
}
else{ echo'error'; } 
```

**AJAX/JQUERY 脚本：**

```
email = $("#email").val();
msg = $("#msg").val();
$.ajax({
    url: 'ajxContact.php?email='+email+'&msg='+msg,
    cache: false,
    success: function(html){
    if(html == 'error'){
        alert("An error occurer and the message can't be sent.");
      }
    else {
        alert('Email has been successfully sent.');
      }
    }
}); 
```

# java - 使用 Comparable 比较对象并在 TreeMap 中对它们进行排序

> ID：13658737
> 
> 赞同：2
> 
> 时间：2012-12-01T10:58:54.257
> 
> 标签：java, equals, treemap, comparable

II 无法理解在实现[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)接口时，类的自然顺序应该如何“与 equals 一致”。我在我的程序中检测到一个缺陷，因此我在接口[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)的文档中检查了它。我的问题是，虽然两个对象在 equals 方法的基础上被认为是不同的，但 TreeMap 结构将它们视为相等，因此不接受第二次插入。示例代码是：

```
public class Car  implements Comparable<Car> {

 int weight;
 String name;

public Car(int w, String n) {
    weight=w;
    name=n;
}

public boolean equals(Object o){
    if(o instanceof Car){
        Car d = (Car)o;
        return ((d.name.equals(name)) && (d.weight==weight));
    }
    return false;

}

public int hashCode(){
    return weight/2 + 17;
}

public String toString(){
    return "I am " +name+ " !!!";
}

public int compareTo(Car d){
    if(this.weight>d.weight)
        return 1;
    else if(this.weight<d.weight)
        return -1;
    else
        return 0;
}

/*public int compareTo(Car d){
    return this.name.compareTo(d.name);
}*/

}

public static void main(String[] args) {
    Car d1 = new Car(100, "a");
    Car d2 = new Car(110, "b");
    Car d3 = new Car(110, "c");
    Car d4 = new Car(100, "a");

    Map<Car, Integer> m = new HashMap<Car, Integer>();
    m.put(d1, 1);
    m.put(d2, 2);
    m.put(d3, 3);
    m.put(d4, 16);

    for(Map.Entry<Car, Integer> me : m.entrySet())
    System.out.println(me.getKey().toString() + " " +me.getValue());

    TreeMap<Car, Integer> tm = new TreeMap<Car, Integer>(m);
    System.out.println("After Sorting: ");
    for(Map.Entry<Car, Integer> me : tm.entrySet())
        System.out.println(me.getKey().toString() + " " +me.getValue());
} 
```

输出是：

```
I am a !!! 16

I am c !!! 3

I am b !!! 2

After Sorting: 

I am a !!! 16

I am c !!! 2 
```

也就是说，对象 c 已经（某种程度上）替代了对象 b。如果我注释原始 equals 方法并取消注释第二个 equals 方法，该方法根据名称比较对象，输出是预期的：

```
I am a !!! 16

I am c !!! 3

I am b !!! 2

After Sorting: 

I am a !!! 16

I am b !!! 2

I am c !!! 3 
```

为什么它会以这种方式出现？为了在 TreeMap 中插入和排序具有相同值属性的不同对象，我应该改变什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T11:05:26.957

当两个权重相等时，`compareTo()`需要检查名称：

```
public int compareTo(Car d){
    if(this.weight>d.weight)
        return 1;
    else if(this.weight<d.weight)
        return -1;
    return this.name.compareTo(d.name);
} 
```

这将`compareTo()`与`equals()`（后者现在可以根据前者重写）保持一致。此外，只要名称不同，该地图将允许多个具有相同权重的条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T11:04:00.333

> 也就是说，对象 c 已经（某种程度上）替代了对象 b。

是的，会的。它们具有相同的权重，因此`TreeMap`认为它们是相等的。地图从不包含两个“相等”的键（您将如何查找一个值？），因此一个替换另一个。

如果您不希望它们被视为相等，则需要使您的`compareTo`方法区分它们（例如，通过`name`用作辅助排序顺序）。

的[文档`TreeMap`](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html)解释说，如果您的`compareTo`方法与您的方法不一致`equals`（事实并非如此），您将不会获得正常`Map`行为：

> 请注意，树形映射维护的顺序与任何排序映射一样，以及是否提供显式比较器，如果此排序映射要正确实现 Map 接口，则必须与 equals 保持一致。（参见 Comparable 或 Comparator 以了解与 equals 一致的精确定义。）这是因为 Map 接口是根据 equals 操作定义的，但排序后的映射使用其 compareTo（或比较）方法执行所有键比较，所以两个从排序映射的角度来看，此方法认为相等的键是相等的。已排序映射的行为是明确定义的，即使它的排序与 equals 不一致；它只是不遵守 Map 接口的一般合同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T11:05:15.040

您的`compareTo()`方法[与以下内容不一致`equals()`](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)：

> 当且仅当具有与每个和[...]`c.compare(e1, e2)==0`相同的布尔值。`e1.equals(e2)``e1``e2`

试试这个：

```
public int compareTo(Car d){
    if(this.weight>d.weight)
        return 1;
    else if(this.weight<d.weight)
        return -1;
    else
        return this.name.compareTo(d.name);
} 
```

`weight`在您的原始实现中，当两个对象具有相同但不同时，它们在比较器方面被认为是相等的`name`，而它们在`equals()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T11:15:51.277

Comparable 接口文档说“当且仅当 e1.compareTo(e2) == 0 对于每个 e1 和 e2 具有与 e1.equals(e2) 相同的布尔值时，类 C 的自然排序被称为与 equals 一致C级。”。但是您的 compareTo() 并没有这样做，因为它不检查名称字段的相等性。如果你在 compareTo() 中检查它，它就可以工作。

# java - Java - 按键事件监听器

> ID：13658739
> 
> 赞同：0
> 
> 时间：2012-12-01T10:59:07.213
> 
> 标签：java, command-line-interface

是否可以为键盘事件绑定动作监听器？例如，我想编写一个在后台计算某些东西的程序，当在键盘上按下一个键时，程序会执行一个回调（一段代码）。

不用说，该程序是没有任何花哨的 GUI 的命令行程序。任何简短的片段都会很棒:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:57:37.083

据我了解，您希望从控制台应用程序启用非阻塞 IO。仅使用 JDK 无法做到这一点，但幸运的是，有几个 3rd 方库支持此功能。

看看下面的讨论： [什么是好的 Java，类似curses 的终端应用程序库？](https://stackoverflow.com/questions/439799/whats-a-good-java-curses-like-library-for-terminal-applications)

[如何确定是否在控制台窗口中输入了任何内容？](https://stackoverflow.com/questions/9015187/how-to-determine-if-anything-has-been-entered-into-the-console-window)

[如何在 Java 控制台中检测不在 GUI 中的箭头键？](https://stackoverflow.com/questions/9545388/how-can-i-detect-arrow-keys-in-java-console-not-in-gui)

[从 Java 监听系统鼠标点击](https://stackoverflow.com/questions/13291161/listening-to-system-mouse-clicks-from-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T11:15:22.523

不确定是否有办法将 eventLinsteners 附加到控制台应用程序，

控制台应用程序？你可以阅读`System.in`并做任何你想做的事情阅读字符/字符串

```
Scanner sc = new Scanner(System.in);
String inputString = sc.nextLine(); // you could swith it with nextInt(), nextFloat() etc based on yoir need

If(inputString.equals("whatever")
{
//do whatever , look into Runtime.exec to execute programs
} 
```

# c - 对使用 O_DIRECT 打开的文件进行“写入”后的用户缓冲区

> ID：13658741
> 
> 赞同：3
> 
> 时间：2012-12-01T10:59:08.930
> 
> 标签：c, linux, file, block-device

我正在使用该`O_DIRECT`标志直接从用户缓冲区写入磁盘。但据我了解，Linux 不保证在这个调用之后，数据被写入。它只是使用 DMA 或其他任何东西直接从用户缓冲区写入物理设备......因此，我不明白在调用“写入”函数后是否可以写入用户缓冲区。

我确信示例代码将有助于理解我的问题：

```
char *user_buff = malloc(...); /* assume it is aligned as needed */
fd = open(..., O_DIRECT);
write(fd, ...)
memset(user_buff, 0, ...) 
```

最后一行（memset）合法吗？写入用户缓冲区是否有效，DMA 可能使用该缓冲区将数据传输到设备？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T11:04:05.060

It is legal. There's no "loopback" taking place here - consider what you should do if you used a dynamically mallocated array. Could you free it after `write()`? Couldn't you? - Well, the answer is that the `write()` function (and syscall) doesn't modify or access the user buffer after it has returned - if immediate write couldn't be performed, a copy of the data will be made. You don't have to worry about implementation details (that's the purpose of having a C standard library, after all...)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T11:29:58.620

将`O_SYNC`标志与 结合使用`O_DIRECT`。然后就可以确定`write()`返回时数据已经写入了。

# php - 高图表 PHP MySQL

> ID：13658743
> 
> 赞同：2
> 
> 时间：2012-12-01T10:59:19.853
> 
> 标签：php, jquery, mysql, highcharts

我是 Highcharts 的新手，正在尝试学习如何将它与 PHP 和 MySQL 一起使用。我想从数组中的一些示例数据中显示一个简单的柱形图。但是，我在实现这一点时遇到了一些问题。这些列未显示在图表中，并且我得到了一个在图例中为空白的额外标签。如果有人可以帮助我清理此代码，使其工作并提供带有注释的示例代码以帮助更好地理解它，那将有很大帮助。我相信其他几个人也在寻找类似的例子。我浏览了这个站点以及 HighCharts 论坛和示例，但找不到我正在寻找的东西，这可以更好地帮助我学习如何使用 PHP 和 MySQL 创建动态柱形图表。如果你能帮助很多提前谢谢。

这是我的代码，我知道它有几个问题，我试着把它作为一个简短的例子，让新手和学生很容易理解。非常感谢您的帮助：

我的示例数据包含该人的姓氏和销售额。它采用 TSV 格式，数组如下所示： Doe 3567 Right 5476 Johnson 4351 Brown 2945

数据.php

```
 <?php
    $con = mysql_connect("localhost","root","");
    if (!$con) {
      die('Could not connect: ' . mysql_error());
    }
    mysql_select_db("test", $con);
    $result = mysql_query("SELECT * FROM user");
    while($row = mysql_fetch_array($result)) {
      echo $row['lastname'] . "\t" . $row['sales']. "\n";
    }
    mysql_close($con);
    ?> 
```

索引.php

```
<!DOCTYPE html><html><head>
</head><body>
<div id="container" style="height: 400px; width: 900px"></div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="http://www.highcharts.com/js/highcharts.src.js"></script>
<script>
jQuery(function($) {
    var options = {
        chart: {renderTo: 'container', defaultSeriesType:'column', height: 400},
        title: {text: 'Sales Performance'},
        xAxis: {title: {text: 'Sales Peoples'}, type: 'linear'},
        yAxis: {title: {text: 'Dollars'}, plotLines: [{ value: 0, width: 1, color: '#808080'}]},
        tooltip: {
            formatter: function() {
                return '<b>'+ this.series.name +'</b><br/>'+'('+this.x +' : '+ this.y +')';
            }
        },
        legend: {layout: 'vertical', align: 'left', verticalAlign: 'top', x: 40, y: 100,   borderWidth: 0, width: 300 },
        series: []
    };

    jQuery.get('data.php', null, function(tsv) {
        var data = {};
        tsv = tsv.split(/\n/g); // split into rows
        for (var row=0, rows=tsv.length; row<rows; row++) {
            var line = tsv[row].split(/\t/g), // split into columns
                series_name = line[0],
                x = Number(line[1]),
                y = Number(line[2]);
            if (!data[series_name]) data[series_name] = [];
            data[series_name].push([x,y]);
            //alert("The data is: "+series_name)
        }
        for (var series_name in data) {
            options.series.push({
                name: series_name,
                data: data[series_name]
            });
        }
        new Highcharts.Chart(options);
    });

});
</script>
</body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T12:22:25.440

> 数据[series_name].push([x,y]);

```
data[series_name].push(x); 
```

你没有`y`和`line[2]`

# forms - Symfony 2 表单绑定自定义字段

> ID：13658745
> 
> 赞同：0
> 
> 时间：2012-12-01T10:59:22.957
> 
> 标签：forms, object, symfony, entity, bind

我有一些与 symfony 2 表单组件有关的问题，

假设我有一个实体，它有一个字段“created_by”，它指的是创建该实体的用户。创建新记录时，我想在我的应用程序中使用登录用户设置该字段。我可以做到这一点是控制器（$entity->setCreatedBy($user)，但我更愿意将此登录包含在表单类本身中。我可以将用户对象传递给构造函数/设置器方法中的表单，但接下来如何我将它“绑定”到实体？我需要在表单中创建一个字段吗？我可以创建一个隐藏字段，但我不喜欢那样显示用户 ID。

symfony 1.4 中是否有与 updateObject 或 doSave 方法等效的方法？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:43:40.530

您可以使用监听器和 prePersist 事件，如下所示[http://symfony.com/doc/2.0/cookbook/doctrine/event_listeners_subscribers.html](http://symfony.com/doc/2.0/cookbook/doctrine/event_listeners_subscribers.html)

# php - Facebook 连接 access_token

> ID：13658749
> 
> 赞同：-1
> 
> 时间：2012-12-01T10:59:46.703
> 
> 标签：php, facebook, codeigniter

嗨，我和这个人有同样的问题：

[来自 facebook 的访问令牌没有被检索以进行注册？access_token（试图获取非对象的属性）](https://stackoverflow.com/questions/10174363/acces-token-from-facebook-is-not-retrived-for-sign-up-access-token-trying-to-g)

显然他找到了解决方案，但我并不清楚。只需要你帮助了解我应该怎么做。

问题是当我尝试使用 facebook connect 登录时，access_token 试图获取非对象的属性。

我不明白的解决方案是这个。

“这是一个数据库错误，因为由于 facebook 应用程序未上线，会话尚未创建。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:02:42.867

“这是一个数据库错误，因为由于 facebook 应用程序未上线，会话尚未创建。”

确保您的 Facebook 应用程序未处于沙盒模式。此外，如果您在 localhost 进行开发，则 facebook api 可能会出现一些问题。

# javascript - 如何使用 overflow-x:scroll 隐藏滚动条？

> ID：13658750
> 
> 赞同：1
> 
> 时间：2012-12-01T10:59:47.737
> 
> 标签：javascript, jquery, css

我希望`div`在 ipad 上可以滚动，但我不希望在桌面浏览器上看到滚动条，这可能吗？溢出-x：滚动，但滚动条是不可见的？保留滚动功能，但删除滚动条。或者是否可以使用 a`div`来覆盖滚动条？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:54:28.543

你得到滚动条的宽度：

```
var scrollwdth = document.getElementById("scrolldiv").clientWidth; 
```

然后将 textarea 插入到另一个 div 中，该 div 充当框架，并设置如下：

```
document.getElementById("frame").style.width = scrollwdth + "px"; 
```

html是这样的：

```
<div id="frame">
<div id="scrolldiv"></div>
</div> 
```

而且，非常重要的是，“框架”已经`overflow-y:hidden;`使滚动条不可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T12:47:40.047

***[请在此处](http://jsfiddle.net/rupesh_kokal/AyEAL/)***检查提琴手代码。

使用下面的代码获取滚动条宽度（从[***这里***](https://stackoverflow.com/questions/986937/how-can-i-get-the-browsers-scrollbar-sizes)引用）

```
function getScrollBarSize () {  
   var inner = document.createElement('p');  
   inner.style.width = "100%";  
   inner.style.height = "100%";  

   var outer = document.createElement('div');  
   outer.style.position = "absolute";  
   outer.style.top = "0px";  
   outer.style.left = "0px";  
   outer.style.visibility = "hidden";  
   outer.style.width = "100px";  
   outer.style.height = "100px";  
   outer.style.overflow = "hidden";  
   outer.appendChild (inner);  

   document.body.appendChild (outer);  

   var w1 = inner.offsetWidth;  
   var h1 = inner.offsetHeight;
   outer.style.overflow = 'scroll';  
   var w2 = inner.offsetWidth;  
   var h2 = inner.offsetHeight;
   if (w1 == w2) w2 = outer.clientWidth;
   if (h1 == h2) h2 = outer.clientHeight;   

   document.body.removeChild (outer);  

   return [(w1 - w2),(h1 - h2)];  
}; 
```

将宽度设置为内部 div，如下所示：

```
$(document).ready(function() {
  $(".innerDiv").width($(".outerDiv").width() + getScrollBarSize()[0]);
                    }); 
```

还有一个链接给出了以 jquery 和非 jquery 方式计算滚动条宽度和高度的实现。

# jquery - 删除内容后的 Jquery Mobile 空白

> ID：13658752
> 
> 赞同：0
> 
> 时间：2012-12-01T11:00:25.463
> 
> 标签：jquery, mobile

我无法删除出现在内容之后的空白，我的 Jquery 代码太长，但是我确实设法用更少的代码重现了这个问题：http: [//jsfiddle.net/uQC9U/](http://jsfiddle.net/uQC9U/)。

我试过这个： div元素和[JQuery移动底部空间](https://stackoverflow.com/questions/11908635/jquery-mobile-bottom-space)[中额外空间的解决方案](https://stackoverflow.com/questions/1170048/solution-for-extra-space-in-div-element)。

```
 <html>
<head>
<link href="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css" rel="stylesheet" type="text/css"/>
<script src="http://code.jquery.com/jquery-1.6.4.min.js" type="text/javascript"></script>
<script src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js" type="text/javascript"></script>
</head>
<BODY>
<div data-role="page" id="homepage" >

<div>                                      
  <form method='post' id='registerform' action='index.php'>                                          
      <label  class='error' id='registererrorA' > </label>       
           <button type='Submit' id='registerbttn' name='registerbttn' data-theme='c'>Register</button>              
     </form>                                                                                        

</div>
</div>
</BODY>
</html> 
```

我玩过以下代码：

```
- html, body, div, span, object, iframe,   h1, h2, h3, h4, h5, h6, p,
   blockquote, pre,   table, caption, tbody, tfoot, thead, tr, th, td {
       margin: 0;
       padding: 0;
          }
 - div { margin:0; padding:0; }
 - #page {
       text-align: center;
       border-bottom: solid 1px #FFC;
       height: auto;
       padding: 0;
       bottom: 0; } 
```

PS原谅我的英语

我不允许在我的帖子中发布解决方案，但我找到了解决方案：我改变了这个：

```
<button type='Submit' id='registerbttn' name='registerbttn' data-theme='c'>Register</button> 
```

进入

```
<input type='submit' id='registerbttn' name='registerbttn' data-theme='c' value='Register' /> 
```

多余的空间消失了。

# android - 2 Android 项目的不同权限

> ID：13658755
> 
> 赞同：1
> 
> 时间：2012-12-01T11:01:06.587
> 
> 标签：android, android-manifest, android-permissions

我们正在开发一个项目，我们想为它制作 2 个版本。

一种需要付费服务（如短信、电话等）的权限，另一种则不需要。

我们正在寻找一种将其集成到一个项目中的方法，这样我们就不必跟踪 2 个项目中的更改，因此我们不会仅仅因为这个微小的差异而拥有 2 个不同的源文件。

有没有办法设置两组权限并在编译时决定我们想要哪一组？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:41:49.280

将项目文件存储在存储库中，例如`git`. 来自 github.com 的 github 应用程序或来自 mac 应用程序商店的 sourcetree 应用程序将在 GUI 中执行此操作，并且它们都是免费的。将代码放入 git 后，您将拥有一个“主”分支。在 git 中创建一个“免费赠品”分支。最初，这将具有您的主分支中的所有源。更改您需要在免费赠品分支中删除权限的代码 - 为简单起见，将其设为仅一个文件的唯一功能。在主分支中进行开发并在那里编译。在 github/sourcetree 应用程序中的分支之间来回切换。

当你想编译一个免费赠品版本时，在 git 中，切换到免费赠品分支。然后使用 git merge 命令 - 它已集成到 github 应用程序中 - 将更改的文件从 master 复制到 freebie。除非您在两个分支中更改同一个文件，否则这应该是一个不涉及人工的一键式操作。然后进行正常编译，您将获得免费赠品应用程序。当您在 git 中切换分支时，git 会将源代码树中的所有文件交换为另一个分支中的文件，因此一切正常。

对于我强烈推荐的更聪明的 git 使用方式，您可以尝试[http://nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T12:13:13.163

您可以使用两个应用程序共有的所有代码创建一个库项目。然后将库项目包含在两个应用程序项目中，并在那里实现所有应用程序特定的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T20:27:42.430

好的所以经过一些研究和谷歌搜索，我得到了适合我的答案！

马文！我编写了一个具有 2 个配置文件的 pom.xml 文件，我可以在 cmd 行中提供我想要的配置文件，并根据这些配置文件将相关文件（比如 AndroidManifest.xml）从正确的文件夹复制到项目的文件夹并编译和将其部署到手机。

这样我需要维护 2 个单独的清单文件，但我不必处理 SVN 可能的合并和冲突问题，也不需要库代码。

希望这个答案对某人有所帮助，我也要感谢在这里回答的人！:)

# c - tm 使用示例

> ID：13658756
> 
> 赞同：8
> 
> 时间：2012-12-01T11:01:14.823
> 
> 标签：c, tm

你能举一个使用`tm`（我不知道如何初始化它`struct`）的例子，当前日期是用这种格式写的`y/m/d`吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-01T11:20:09.677

### 如何使用`tm`结构

1.  调用`time()`以获取当前日期/时间作为自 1970 年 1 月 1 日以来的秒数。
2.  调用`localtime()`以获取`struct tm`指针。如果你想要 GMT 他们打电话`gmtime()`而不是`localtime()`.

3.  使用`sprintf()`或`strftime()`将 struct tm 转换为您想要的任何格式的字符串。

### 例子

```
#include <stdio.h>
#include <time.h>

int main ()
{
  time_t rawtime;
  struct tm * timeinfo;
  char buffer [80];

  time ( &rawtime );
  timeinfo = localtime ( &rawtime );

  strftime (buffer,80,"Now it's %y/%m/%d.",timeinfo);
  puts (buffer);

  return 0;
} 
```

### 示例输出

```
Now it's 12/10/24 
```

### 参考：

*   [结构体](http://www.daniweb.com/software-development/c/threads/335282/struct-tm)
*   [时间](http://www.cplusplus.com/reference/ctime/strftime/)

# javascript - Javascript TypeError 变量未定义

> ID：13658757
> 
> 赞同：3
> 
> 时间：2012-12-01T11:01:15.110
> 
> 标签：javascript, ajax

我正在“学习 PHP、MySQL 和 JavaScript -O'Reilly”中学习一些非常基本的 AJAX 编程。有几个非常基本的 Java 程序使用 AJAX 获取一些文本或页面。我正在使用 W3Schools.com 站点来尝试了解有关使用 AJAX 获取 XML 格式文档的更多信息。我有两个与我正在学习的内容有关的问题。

当我使用来自[http://www.w3schools.com/dom/dom_loadxmldoc.asp](http://www.w3schools.com/dom/dom_loadxmldoc.asp)的代码时，我可以返回一个带有以下片段的 XML 文档：

```
function loadXMLDoc(dname)
{
if (window.XMLHttpRequest)
  {
  xhttp=new XMLHttpRequest();
  }
else
  {
  xhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xhttp.open("GET",dname,false);
xhttp.send();
return xhttp.responseXML;
}

//called this way
xmlDoc=loadXMLDoc("books.xml"); 
```

但是 async 必须设置为 false 才能工作。如果我将 async 设置为 true，它会返回 null。所以我的第一个问题是为什么 async 必须为 false 才能返回 XML 文档？

我的第二个问题，当我尝试将书中的一些代码和网站上的一些代码结合起来时，片段如下：

```
<body>API Call output
<div id='output'>will be here</div>
<script>
out = ""
xmlDoc = getResponse()
users = xmlDoc.getElementsByTagName('username')
for (count = 0; count < users.length ; count++)
{
    out += "Username: " + users[count].childNodes[0].nodeValue + '<br />'
}
document.getElementById('output').innerHTML = out

function ajaxRequest()
{
    try //good browser
    {
        var request = new XMLHttpRequest()
    }
    catch(e1)
    {
        try // IE6+
        {
            request = new ActiveXObject("Msxml2.XMLHTTP")
        }
        catch(e2)
        {
            request = false
        }
    }//end catch(e1)
    return request
}

function getResponse()
{
    params = "apikey=test"
    request = new ajaxRequest()
    request.open("POST", "processapi.php", true)
    request.setRequestHeader("Content-type",
        "application/x-www-form-urlencoded")
    request.setRequestHeader("Content-length", params.length)
    request.setRequestHeader("Connection", "close")
    request.onreadystatechange = function()
    {
        if (this.readyState == 4)
        {
            if (this.status == 200)
            {
                if (this.responseXML != null)
                {
                    return this.responseXML
                }
                else alert("Ajax error: No data received")
            }
            else alert( "Ajax error: " + this.statusText)
        }
    }

    request.send(params)
}
</script>
</body> 
```

我收到“TypeError：xmlDoc 未定义”的错误。在异步设置为 true 或 false 的函数 getResponse() 中它不起作用，我得到 xmlDoc is undefined 错误。在将 xmlDoc 设置为 loadXMLDoc() 的返回之前，在第一个示例（来自 w3schools.com）的其他地方没有定义 xmlDoc，并且效果很好。ajaxRequest() 不在书中，getResponse() 中的大部分内容都在书中，但我把它放在了 getResponse() 函数中。从此脚本调用时，processapi.php 只是回显一个 XML 文档。

为什么 async 在第一个示例中不起作用，为什么 xmlDoc 在第二个示例中未定义？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:12:55.270

您的两个问题的答案在于*异步*的本质。随着`async`存在`true`，这将返回`null`：

```
xhttp.open("GET",dname,false);
xhttp.send();
return xhttp.responseXML; 
```

...因为在语句发生时 HTTP 请求尚未完成`return`，因此`xhttp.responseXML`仍然具有其默认值 ( `null`)。HTTP 请求稍后在该代码流之外完成（异步 - 字面意思，不是同步）。

您的`getResponse`函数根本不会返回值。您分配给的匿名回调函数`onreadystatechange`返回一个值，但这绝不会影响`getResponse`.

客户端 Web 编程的关键方面之一是接受环境的异步、事件驱动性质。几乎没有用于设置 XHR 请求的用`async`例`false`。相反，习惯于对事物使用回调。例如，您的`getResponse`函数可能如下所示：

```
// ***CHANGE*** -----v--- Accept a callback
function getResponse(callback)
{
    params = "apikey=test"
    request = new ajaxRequest()
    request.open("POST", "processapi.php", true)
    request.setRequestHeader("Content-type",
        "application/x-www-form-urlencoded")
    request.setRequestHeader("Content-length", params.length)
    request.setRequestHeader("Connection", "close")
    request.onreadystatechange = function()
    {
        if (this.readyState == 4)
        {
            if (this.status == 200)
            {
                if (this.responseXML != null)
                {
                    // ***CHANGE*** Trigger the callback with the response
                    callback(this.responseXML);
                }
                else alert("Ajax error: No data received")
            }
            else alert( "Ajax error: " + this.statusText)
        }
    }

    request.send(params)
} 
```

然后，而不是这个：

```
out = ""
xmlDoc = getResponse()
users = xmlDoc.getElementsByTagName('username')
for (count = 0; count < users.length ; count++)
{
    out += "Username: " + users[count].childNodes[0].nodeValue + '<br />'
}
document.getElementById('output').innerHTML = out 
```

你会这样做：

```
getResponse(function(xmlDoc) {
    out = ""
    users = xmlDoc.getElementsByTagName('username')
    for (count = 0; count < users.length ; count++)
    {
        out += "Username: " + users[count].childNodes[0].nodeValue + '<br />'
    }
    document.getElementById('output').innerHTML = out
}); 
```

请注意我是如何将所有依赖于响应的代码移动到一个函数中，然后将该函数传递到`getResponse`. `getResponse`当它有数据时调用它。请求/响应、事件驱动、异步，无论你想怎么称呼它，这是尽早加入的关键。:-)

* * *

旁注：您的代码正在成为[*The Horror of Implicit Globals 的*](http://blog.niftysnippets.org/2008/03/horror-of-implicit-globals.html)牺牲品。强烈建议声明所有变量，并将所有代码包装在一个作用域函数中以避免创建全局符号（浏览器上的全局命名空间已经人满为患）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T11:15:47.293

`getResponse`正在执行异步 XHR 请求，因此函数将在结果准备好之前返回。您需要改用回调方法，

更改函数声明以接受回调参数：

```
function getResponse(callback) { 
```

然后在函数体中修改这部分

```
if (this.responseXML != null)
{
    return this.responseXML; // WRONG
} 
```

以便它在接收到 XML 时调用回调

```
if (this.responseXML != null)
{
    callback(this.responseXML); // GOOD
} 
```

然后你会这样打电话`getResponse`，

```
getResponse(function(xmlDoc){
   // do something with xmlDoc
}) 
```

# php - 为什么如果条件不起作用？

> ID：13658758
> 
> 赞同：0
> 
> 时间：2012-12-01T11:01:20.773
> 
> 标签：php, jquery

当我不在 load.php 文件中使用 if 条件($last_msg_id_db>$last_msg_id) 时，jquery 函数可以正常工作，并在每半秒后继续检查数据。

但是，如果我使用 if 条件，jquery 函数仅在第一次运行，但在第一次运行后，它不起作用并停止工作。

**我认为，我没有将 load.php 中的 if 条件放在正确的位置。请帮助或建议任何替代方法。**

php 文件（Load.php）在这里

```
 $last_msg_id=$_POST['last_msg_id'];

$sql=mysqli_query($db3->connection,"SELECT * FROM chat_com ORDER by id ASC");

$sql_m=mysqli_query($db3->connection,"SELECT max(id) as maxid  FROM chat_com");
$row_m=mysqli_fetch_array($sql_m);
$last_msg_id_db=$row_m['maxid'];
if($last_msg_id_db>$last_msg_id){

    while($row=mysqli_fetch_array($sql)){

        $textt=$row['mesg'];
        $textt2="$textt<br>";

        $response=array();

        $response['msg']=$textt2;
        $response['last_msg_id_db']=$last_msg_id_db;
        $final_response[]=$response;
    }
}
echo json_encode($final_response); 
```

Jquery 函数在这里。

```
var last_msg_id = 1;
function chat_com_one(id, name) {
  $('#chatcom').show('fast');
  (function chatcom_load_one(id, name) {
    alert(last_msg_id);
    $.post('load.php', {option:'chatcom_load_one', last_msg_id:last_msg_id},     function(data) {
        var json = eval('(' + data + ')');
        $.each(json, function(i, row) {
            $("#chatcom #commid #commidwin").append(row['msg']);
            last_msg_id = row['last_msg_id_db'];
        });
        setTimeout(chatcom_load_one(id, name), 500);
    });
}(id, name));
$('#chatcom_send').click(function() {
    $.post('send.php', { option:'chat_com_send_one', text:$('#chatcom_text').val(), tocom:id}, function(data) {
        document.getElementById('chatcom_text').value = '';
    });
});
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:10:45.480

它可能不起作用，因为`$final_response`在第二次 ajax 请求之后可能没有任何数据，并且条件可能无法将值设置为`$final_response`.

您可能必须在条件`$final_response`之上进行初始化，`if`

```
$final_response = array();
if($last_msg_id_db>$last_msg_id){
   ...
   ...
}
echo json_encode($final_response); 
```

# php - creating a hyperlink inside a table using php/mysql

> ID：13658768
> 
> 赞同：-1
> 
> 时间：2012-12-01T11:02:49.270
> 
> 标签：php

I am trying to create a hyperlink using php. the hyper link is in a table..

this is my code:

```
 echo"<tr><td>"<a href='".$row['hyperPath'] . ">click here</a></td></tr>"; 
```

I am getting an error

How can i fix this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:04:22.817

It should be

```
echo"<tr><td><a href='".$row['hyperPath'] . "'>click here</a></td></tr>"; 
```

You had an extra " after your tag. If you really want the " to be displayed you need to escape it first with \ like this:

```
echo"<tr><td>\"<a href='".$row['hyperPath'] . "'>click here</a></td></tr>"; 
```

You were also missing the closing quote for your href attribute (added before >click here)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:06:51.120

尝试这个

```
echo "<tr><td><a href='".$row['hyperPath']."'>click here</a></td></tr>"; 
```

# windows-phone-7 - 选择更改事件也称为 Lostfocus 事件？

> ID：13658773
> 
> 赞同：1
> 
> 时间：2012-12-01T11:03:10.847
> 
> 标签：windows-phone-7, c#-4.0, listbox

NET C#，在我的 windows phone 7.5 应用程序中，如果选择了任何项目，我想让应用程序栏可见..所以我让它在选定的更改事件中可见。但是，在我的代码中发生了什么是选择更改它也会触发失去的福克事件，并且在那个事件中我正在制作所选索引= 0.现在代码的结果是我选择任何项目时，应用程序栏可见随身可见（因为失去焦点事件）。以下是一段代码。

```
 private void ShopingListItemDetails_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        if (ShopingListItemDetails.SelectedIndex != -1)
        {
            ApplicationBar.IsVisible = true;
            int selind = ShopingListItemDetails.SelectedIndex;
        }
    }

    private void ShopingListItemDetails_LostFocus(object sender, RoutedEventArgs e)
    {

        ApplicationBar.IsVisible = false;
        ShopingListItemDetails.SelectedIndex = -1;
    } 
```

我刚开始使用 .NET C#(XAML)，所以假设选择更改事件也触发了 LostFocus 事件。

请帮助我背后的真正问题是什么。谢谢Zauk

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:51:33.657

您可以使用以下技巧。初始化一个变量，例如在 xaml.cs 中最初将 selectChanged 设置为 False。在 SelectionChanged 函数中将其更改为 True。现在，在 LostFocus 函数中，仅当 selectChanged 变量为 false 时才进行处理，如果为 true，则将其设置回 False

```
Boolean selectChanged=false;
private void ShopingListItemDetails_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    if (ShopingListItemDetails.SelectedIndex != -1)
    {
        ApplicationBar.IsVisible = true;
        int selind = ShopingListItemDetails.SelectedIndex;
        selectChanged=true;
    }
}

private void ShopingListItemDetails_LostFocus(object sender, RoutedEventArgs e)
{
    if(!selectChanged) 
    {
        ApplicationBar.IsVisible = false;
        ShopingListItemDetails.SelectedIndex = -1;
    }
    selectChanged=false;
} 
```

我认为这应该可以解决您的问题。

# javascript - Appended Link does not work when clicked

> ID：13658776
> 
> 赞同：1
> 
> 时间：2012-12-01T11:03:35.560
> 
> 标签：javascript, jquery, anchor, bind

I am having a problem with a link that is appended to the page when a new message is available. It acts like a link when hovered over but fails to fire when clicked.

```
var data_split=data.split("*^*");
var count=$('.n_1').length;

if(parseInt(count)!=parseInt(data)) {
    var new_messages=parseInt(data)-parseInt(count);    
    if(new_messages!=0) {
        $('.message_update_holder').html(
            "<p><a class='center n_message' href='javascript:void(0);'>"
            +new_messages+" new notifications.</a></p>");
    }
} else {
    return;
} 
```

To fire the click event my code is as follows

```
$(document).on('click', '.n_message', function(){
    get_notifications();
}); 
```

It should be noted that the first part of the code is loacted in a function that updates every 10 seconds. I have tried clearing the html from message_update_holder on every update but this did not seem to work.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T11:46:45.597

尝试改变这个：

```
 href='javascript:void(0);' 
```

进入这个：

```
href='#something' 
```

因为我认为javascript调用会导致功能障碍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T11:31:45.043

```
$('.n_message').live('click', function(){
    get_notifications();
}); 
```

你试试同样的`live`

# android - Zebra RW420 CPCL font issue

> ID：13658782
> 
> 赞同：0
> 
> 时间：2012-12-01T11:04:25.227
> 
> 标签：android, zebra-printers

I've designed a label with Label Vista (free Zebra software) and I went watching at the generated CPCL code, I noticed:

```
_TTF -23 0 0 400 0 0 0 0 2 34 [Arial] 117 16 Test TTF string
T Ari06pt.cpf 0 118 45 Test Uploaded font string 
```

I've uploaded to the printer the Ari06pt.cpf generated font. Then I've tried to print from Label Vista and all went OK! IT WORKS!

After that I've passed the code to my android application (JAVA with Zebra SDK) and I've tried to print, but in this case only the

```
"T Ari06pt.cpf 0 118 45 Test Uploaded font string\r\n" 
```

works right.... the first line (_TTF) is NOT WORKING anymore (white line was printed)...

Some solution?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T06:41:46.223

根据[CPCL 手册](http://www.zebra.com/content/dam/zebra/manuals/en-us/printer/cpcl-pm-en.pdf)：

```
_TTF -23 0 0 400 0 0 0 0 2 34 [Arial] 117 16 Test TTF string 
```

不是 CPCL 命令。但是，LabelVista 出于某种原因 (??) 使用桌面操作系统的常驻 TrueType 字体创建此命令，并在打印时将其静默转换为 CPCL“T”命令，如下所示：

```
T Ari06pt.cpf 0 117 16 Test TTF string 
```

所以我认为你应该检查 LabelVista 的输出是否包含 CPCL 以外的命令。您也可以尝试 ZebraDesigner 编辑器。

我使用过 Zebra MZ320 和 QL420+，它们在内存中只接受预缩放字体（*.cpf 文件）。**所以尝试将 TrueType 字体转换为预缩放字体**。您可以使用 LabelVista 或 Zebra 字体下载器对其进行转换，然后将其上传到您的打印机。您可以按照[此 Zebra 字体转换指南](https://km.zebra.com/kb/index?page=content&id=SO7889)进行操作。

# c# - 在 C# 中复制 Powerpoint(2007) 幻灯片

> ID：13658787
> 
> 赞同：0
> 
> 时间：2012-12-01T11:04:33.607
> 
> 标签：c#, visual-studio, excel, ms-office, powerpoint

我正在使用 VS 2005 进行 Powerpoint 自动化。我在这里要做的是从指定位置打开现有的 PPT 并将数据写入其中。在一些幻灯片中我有表格结构，这些表格是从代码中的数据集填充的。但是这里的问题是如果 PPT 中的表格有 10 行，而数据集有 20 或 30 行超过 10 行现在，如果数据集中有 30 行，那么我正好需要 3 张类似的幻灯片。我应该如何复制 PPT 中的表格结构**在填写 PPT 表格之前**使用 C# 。到现在我用的是这个

```
 double SlideCount=0;
                    if (DS.Tables[0].Rows.Count > 10)
                    {
                        SlideCount = (DS.Tables[0].Rows.Count) / 10;

                        SlideCount = Math.Round(double.Parse(SlideCount.ToString()));

                        for (int i = 0; i < SlideCount; i++)
                        {
                            //Code to Duplicate slide
                        }
                      } 
```

我的最终目标是消除空白幻灯片

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T18:21:36.203

我在 VBA 中做这种事情，并且由于您没有显示用于访问演示文稿的代码，因此很难翻译，但概括地说：

打开演示文稿并获取对它的引用（我们称之为 oPres）

假设您要复制第一张幻灯片，请根据需要多次调用：

```
oPres.Slides(1).Duplicate 
```

在您的情况下，我怀疑这是否重要，但作为仅供参考，幻灯片 1 的副本将始终直接出现在幻灯片 1 之后，而不是在演示文稿的末尾。

# operating-system - 外部碎片是如何发生的？

> ID：13658791
> 
> 赞同：5
> 
> 时间：2012-12-01T11:04:58.813
> 
> 标签：operating-system

随着进程被加载和从内存中删除，可用内存空间被分成小块，导致碎片......但是这是怎么发生的呢？外部碎片的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T18:43:10.437

当有足够的总内存来满足请求（通常来自进程）时，就会存在外部碎片，但所需的总内存在连续位置不可用，即碎片。

外部碎片的解决方案：

1) 压缩：将碎片化的内存改组到一​​个连续的位置。

2）使用分页和分段的虚拟内存寻址。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-01T11:08:37.427

## 外部碎片

当动态内存分配算法分配一些内存并且剩下一小块无法有效使用时，就会发生外部碎片。如果发生过多的外部碎片，可用内存量将大大减少。总内存空间存在以满足请求，但它不是连续的。看下面的例子

```
 0x0000 0x1000  0x2000  
   A    B     C               //Allocated three blocks A, B, and C, of size 0x1000.
   A          C         //Freed block B 
```

> 现在请注意，B 使用的内存不能包含在大于 B 大小的分配中

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-31T15:41:50.590

可以通过压缩或混洗内存内容以将所有空闲内存放在一个大块中来减少外部碎片。为了使压缩可行，重定位应该是动态的。使用分页技术也可以避免外部碎片。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-25T06:07:27.947

避免外部碎片的最佳解决方案是分页。分页是一种内存管理技术，通常由虚拟内存操作系统使用，以帮助确保您需要的数据尽快可用。有关更多信息，请参阅：[操作系统“交换”和“页面”有什么区别？](https://stackoverflow.com/questions/1688962/whats-the-difference-between-operating-system-swap-and-page)

在分页的情况下，没有外部碎片，但它不能避免内部碎片。

# iphone - How to add Cartoon Color and Cartoon B&W filter effect on Image in iPhone

> ID：13658795
> 
> 赞同：1
> 
> 时间：2012-12-01T11:05:20.513
> 
> 标签：iphone, objective-c, ios, c, ipad

> **Possible Duplicate:**
> [To Convert Image to Cartoon in ios](https://stackoverflow.com/questions/10042857/to-convert-image-to-cartoon-in-ios)

I want to add Cartoon Color and Cartoon B&W filter effect on UIImage in iPhone App. can any one suggest how to do this. I search a lot for this and get GPUImage Framework but i dont want to use this whole framework only for a single filter effect. I can implement if someone suggest its algorithm part.

Thanks

# matlab - 用 Matlab 绘制高斯网格

> ID：13658799
> 
> 赞同：6
> 
> 时间：2012-12-01T11:06:03.193
> 
> 标签：matlab, plot, mesh

使用以下代码，我可以绘制单个二维高斯函数的图：

```
x=linspace(-3,3,1000);
y=x';               
[X,Y]=meshgrid(x,y);
z=exp(-(X.^2+Y.^2)/2);
surf(x,y,z);shading interp 
```

这是产生的情节：

![在此处输入图像描述](../Images/870afdae1547207546c6f6c413e4316b.png)

但是，我想绘制一个具有这些 2D-Gaussians 的指定数量 x 的网格。将下图视为我想要制作的图的上方视图（特别是网格由 5x5 2D-Gaussians 组成）。每个高斯都应该用一个系数加权，如果它是负的，那么高斯指向 z 轴的负值（下面网格中的黑点），如果它是正的，它就像上图一样（下面网格中的白点） .

![在此处输入图像描述](../Images/5d8d554920bc7b33dfb8c82ff65f2697.png)

让我提供一些数学细节。网格对应于 2D-Gaussians 的混合，如以下等式所示：

![在此处输入图像描述](../Images/280f6c52b129d652e43177db18733fef.png)

其中每个高斯都有自己的均值和偏差。

请注意，混合物的每个高斯分布都应放置在确定的 (X,Y) 坐标中，以使它们彼此距离相等。例如，在 (0,0) 中考虑中心高斯，那么其他的应该在 (-1,1) (0,1) (1,1) (-1,0) (1,0) (-1, -1) (0,-1) (1,-1) 对于尺寸为 3x3 的网格。

你能提供给我（并向我解释）我该怎么做这样的情节吗？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T11:14:13.727

确实，您自己说过，放（仅作为手段的示例）

```
[X,Y]=meshgrid(x,y);  % //mesh

g_centers = -3:3;    
[x_g,y_g] = meshgrid(g_centers,g_centers); % //grid of centers (coarser)
mu = [x_g(:) , y_g(:)];  % // mesh of centers in column

z   = zeros(size(X));
for i = 1:size(mu,1)
     z= z + exp(-((X-mu(i,1)).^2+(Y-mu(i,2)).^2)/( 2* .001) );
end
surf(X,Y,z);shading interp 
```

![在此处输入图像描述](../Images/8895d3172320752e2a03c29eedfe5099.png)

# iphone - iPhone：MPMusicPlayerController 停止 AVAudioPlayer

> ID：13658803
> 
> 赞同：1
> 
> 时间：2012-12-01T11:06:47.217
> 
> 标签：iphone, ios, avaudioplayer, ipod

当用户锁定屏幕时，我正在使用 AVAudioPlayer 播放无声音乐，这样我的计时器就不会停止。但是，当我用 播放 iPod 音乐时`[MPMusicPlayerController applicationMusicPlayer]`，`AVAudioPlayer`停止，没有收到任何回电。有什么方法可以让我`[MPMusicPlayerController applicationMusicPlayer]`在不停止播放的情况下开始`AVAudioPlayer`播放？

**编辑：** 谢谢大家，这是我正在开发的应用程序：

它是一个闹钟应用程序，这个应用程序允许用户在应用程序运行时锁定屏幕，当闹钟时间到时，应用程序可以播放 iPod 音乐来唤醒用户。本地通知不能使用 iPod 音乐作为提醒声音，所以我必须在屏幕锁定时保持应用程序运行。

如果用户退出应用程序，它将使用本地通知作为警报，其声音仅限于捆绑中的文件。

我不能使用 UILocalNotification 作为计时器，因为当处于屏幕锁定状态时（在 UIApplicationStatusInactive 中），应用程序无法接收系统生成的本地通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T13:03:55.513

Apple 已经构建了他们的后台系统，以真正限制此类事情的发生。本质上，除非需要，否则您无法让应用程序在后台运行。如果您解释您要完成的工作，也许可以找到更好的解决方案，但作为一种好的做法，切勿使用随机背景方法来做其他事情。我假设您可能正在使用微弱的音乐作为在主屏幕上显示自定义内容的一种方式，这不是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T10:45:36.100

如果您播放无声音频，您的应用将被拒绝。

同样根据苹果的文档[https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103)，通知不能有声音(soundName) 播放超过 30 秒。

因此，您将无法在商店中发布您的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T07:22:40.790

我自己想通了。停止AVAudioPlayer的不是调用`[MPMusicPlayerController +applicationMusicPlayer]`，而是调用`[MPMusicPlayerController -setShuffleMode:]`，我不知道为什么调用它会停止AVAudioPlayer，但这就是问题所在。谢谢大家，我想我应该下次粘贴我的完整代码。

# javascript - regular expression match numeric value

> ID：13658804
> 
> 赞同：0
> 
> 时间：2012-12-01T11:06:54.803
> 
> 标签：javascript, regex

I'm trying to match a pattern:

```
show_clipping.php?CLIP_id=* 
```

from:

```
a href="javascript:void(0);" onclick="MM_openBrWindow('show_clipping.php?CLIP_id=575','news','scrollbars=yes,resizable=yes,width=500,height=400,left=100,top=60')">some text</a> 
```

where

```
* 
```

can be only numeric values(eg: 0, 1 , 1234)

the result has to return the whole thing(`show_clipping.php?CLIP_id=575`)

what I've tried:

```
show_clipping.php\?CLIP_id=([1-9]|[1-9][0-9]|[1-9][0-9][0-9]) 
```

but my attempt would truncate the rest of the digits from 575, leaving the results like:

```
show_clipping.php?CLIP_id=5 
```

1.  How do I match numeric part properly?
2.  Another issue is that the value 575 can contain any numeric value, my regex will not work after 3 digits, how do i make it work with infinit amount of digits

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T11:10:07.130

您没有指定您使用的语言，所以这里只是`regex`：

```
'([^']+)' 
```

解释

```
'       # Match a single quote
([^`])+ # Capture anything not a single quote
'       # Match the closing single quote 
```

所以基本上它用单引号捕获所有内容，`show_clipping.php?CLIP_id=5`位于第一个捕获组中。

在这里看到它的动作[。](http://rubular.com/r/16tMnNudYt)

只捕获`show_clipping.php?CLIP_id=5`我会做`'(.*CLIP_id=[0-9]+)'`

```
'        # Match a single quote 
(.*      # Start capture group, match anyting
CLIP_id= # Match the literal string
[0-9]+)  # Match one of more digit and close capture group
'        # Match the closing single quote 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T11:15:30.557

答案：^(0|[1-9][0-9]*)$ 之前回答： [数值的正则表达式模式](https://stackoverflow.com/questions/290513/regex-pattern-for-numeric-values)

（答案6）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T11:32:27.010

那这个呢？

```
onclick.match(/show_clipping\.php\?CLIP_id=\d+/)
["show_clipping.php?CLIP_id=575"] 
```

（从你的问题的标签我假设你正在使用 JavaScript）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T11:12:00.380

```
show_clipping.php\?CLIP_id=(\d+) 
```

`\d`匹配一个数字，`+`表示其中一个或多个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T11:13:03.433

怎么样：

```
/(show_clipping.php\?CLIP_id=[1-9]\d*)/ 
```

# python - 使用匹配字符串中定义的字符串长度

> ID：13658806
> 
> 赞同：2
> 
> 时间：2012-12-01T11:07:16.850
> 
> 标签：python, parsing, pyparsing

具有以下字符串：

```
commit a8c11fcee68881dfb86095aa36290fb304047cf1
log size 110
Author: XXXXXX XXXXXXXX <XXXXXXXXXXXXXXX@XXXXX.XXX>
Date:   Tue, 10 Apr 2012 11:19:44 +0300

    First commit

3       0       README.MD 
```

如何使用`110`语法定义中的值来匹配其余的东西？“日志大小”包括字段（此处为：`Author`和`Date`，但可以有任意数量的字段）和实际消息。

最后一行不是“日志消息”的一部分。

我想要得到的是 的值、带有和之`commit`类的元数据的字典，以及实际的日志消息，这里是“第一次提交”。`Author``Date`

问题是，`log size`告诉我这条消息有多长，但这也包括`Author`字段`Date`。

`110`是这个字符串的大小：

```
Author: XXXXXX XXXXXXXX <XXXXXXXXXXXXXXX@XXXXX.XXX>
Date:   Tue, 10 Apr 2012 11:19:44 +0300

    First commit 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T11:36:11.857

我会分三个阶段来做：

1.  使用正则表达式查找每个提交，并获取其 id 和日志大小。
2.  使用步骤 1 中匹配的结尾和日志大小，我将从字符串中切出元数据+消息。
3.  将步骤 2 中的字符串解析为字典+消息。

前两个步骤可以按如下方式完成：

```
In [25]: s = """commit a8c11fcee68881dfb86095aa36290fb304047cf1
log size 110
Author: XXXXXX XXXXXXXX <XXXXXXXXXXXXXXX@XXXXX.XXX>
Date:   Tue, 10 Apr 2012 11:19:44 +0300

    First commit
3       0       README.MD
"""

In [26]: m = re.search('commit (.*)\nlog size (.*)\n', s)

In [27]: s[m.end():m.end()+int(m.group(2))]
Out[27]: 'Author: XXXXXX XXXXXXXX <XXXXXXXXXXXXXXX@XXXXX.XXX>\nDate:   Tue, 10 Apr 2012 11:19:44 +0300\n\n    First commit\n' 
```

如果调用了最后一个字符串`step2`，则可以按如下方式进行其余的解析：

```
In [48]: meta, msg = step2.split('\n\n', 1)

In [49]: dict([map(str.strip, line.split(':', 1)) for line in meta.split('\n')])
Out[49]: 
{'Author': 'XXXXXX XXXXXXXX <XXXXXXXXXXXXXXX@XXXXX.XXX>',
 'Date': 'Tue, 10 Apr 2012 11:19:44 +0300'}

In [50]: msg
Out[50]: '    First commit\n' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T13:50:07.693

我对算法的想法与 NPE 相同。
但是我将正则表达式的使用推得更远了。

我已经用第二次出现的日志消息扩展了分析的文本，注意在“日志大小 xxx\n”行中放置正确数量的字符

**正则表达式 1**将每个出现分成 4 组。第三组包含具有字典的行，第四组具有字典行之后和其他出现之前的尾随行。

```
import re

ss = """commit a8c11fcee68881dfb86095aa36290fb304047cf1
log size 110
Author: XXXXXX XXXXXXXX <XXXXXXXXXXXXXXX@XXXXX.XXX>
Date:   Tue, 10 Apr 2012 11:19:44 +0300

    First commit
3       0       README.MD
blablah bla
commit 12458777AFDRE1254
log size 170
   Author: Jim Bluefish <jimblfsh@gmail.com>
Date   :   Yesterday 21:45:01 +0800
  A key with whitespace :       A_stupid_value    

    Funny commit
  From far from you
457      popo       not_README.MD"""

n = 0
print ('------ DISPLAY OF THE TEXT ------\n'
       ' col 1: index of line,\n'
       ' col 2: number of chars in the line\n'
       ' col 3: total of the numbers of chars of lines\n'
       ' col 4: repr(line)\n')
for j,line in enumerate(ss.splitlines(1)):
    n += len(line)
    print '%2d  %2d  %3d  %r' % (j,len(line),n,line)

print '=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-='
print '\n\n\n------ ANALYSER 2 OF THE TEXT ------'

regx1 = re.compile('^commit +(.+) *\r?\n'
                   'log size +(\d+) *\r?\n'
                   '((?:^ *.+?(?<! ) *: *.+(?<! ) *\r?\n)+)'
                   '((?:.*\r?\n(?!commit))+)',
                   re.MULTILINE)

regx2 = re.compile('^ *(.+?)(?<! ) *: *(.+)(?<! ) *\r?\n',
                   re.MULTILINE)

for mat in regx1.finditer(ss):

    commit_value,logsize,dicolines,msg = mat.groups()

    print ('\ncommit_value == %s\n'
           'logsize == %s'
           % (commit_value,logsize))

    print 'dictionary :\n',dict(regx2.findall(dicolines))

    actual_log_message = msg[0:int(logsize)-len(dicolines)].strip(' \r\n')
    print 'actual_log_message ==',repr(actual_log_message) 
```

结果

```
------ DISPLAY OF THE TEXT ------
 col 1: index of line,
 col 2: number of chars in the line
 col 3: total of the numbers of chars of lines
 col 4: repr(line)

 0  48   48  'commit a8c11fcee68881dfb86095aa36290fb304047cf1\n'
 1  13   61  'log size 110\n'
 2  52  113  'Author: XXXXXX XXXXXXXX <XXXXXXXXXXXXXXX@XXXXX.XXX>\n'
 3  40  153  'Date:   Tue, 10 Apr 2012 11:19:44 +0300\n'
 4   1  154  '\n'
 5  17  171  '    First commit\n'
 6  26  197  '3       0       README.MD\n'
 7  12  209  'blablah bla\n'
 8  25  234  'commit 12458777AFDRE1254\n'
 9  13  247  'log size 170\n'
10  45  292  '   Author: Jim Bluefish <jimblfsh@gmail.com>\n'
11  36  328  'Date   :   Yesterday 21:45:01 +0800\n'
12  51  379  '  A key with whitespace :       A_stupid_value    \n'
13   1  380  '\n'
14  17  397  '    Funny commit\n'
15  20  417  '  From far from you\n'
16  33  450  '457      popo       not_README.MD'

------ ANALYSER OF THE TEXT ------

commit_value == a8c11fcee68881dfb86095aa36290fb304047cf1
logsize == 110
dico :
{'Date': 'Tue, 10 Apr 2012 11:19:44 +0300', 'Author': 'XXXXXX XXXXXXXX <XXXXXXXXXXXXXXX@XXXXX.XXX>'}
actual_log_message == 'First commit'

commit_value == 12458777AFDRE1254
logsize == 170
dico :
{'Date': 'Yesterday 21:45:01 +0800', 'A key with whitespace': 'A_stupid_value', 'Author': 'Jim Bluefish <jimblfsh@gmail.com>'}
actual_log_message == 'Funny commit\n  From far from you' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T09:57:52.717

您使用“pyparsing”标签标记了您的问题，因此您可以使用 pyparsing 来解决它。Pyparsing 包含一个名为的辅助方法`countedArray`，它几乎可以满足您的需求。你可以想到：

```
countedArray(something) 
```

作为快捷方式：

```
integer + something*(whatever was parsed as the integer) 
```

并将解析的数据作为某些东西的列表返回。

```
source = """commit a8c11fcee68881dfb86095aa36290fb304047cf1
log size 110
Author: XXXXXX XXXXXXXX <XXXXXXXXXXXXXXX@XXXXX.XXX>
Date:   Tue, 10 Apr 2012 11:19:44 +0300

    First commit<not in the message, more than 110 chars>

3       0       README.MD
"""

from pyparsing import *
any_char = Word(printables+" \n",exact=1).leaveWhitespace()

log_message = countedArray(any_char)
# we want a string, not an array of single characters
log_message.setParseAction(lambda t: ''.join(t[0]))

entry = "commit" + Word(hexnums)('id') + "log size" + log_message

msg = entry.parseString(source)[-1]
print (msg) 
```

给出：

```
Author: XXXXXX XXXXXXXX <XXXXXXXXXXXXXXX@XXXXX.XXX>
Date:   Tue, 10 Apr 2012 11:19:44 +0300

    First commit 
```

您可以看到我们已经阅读了但不包括“不在消息中...”部分（我将其添加到您的源字符串中以显示`countedArray`正确停止在第 110 个字符处）。我添加了一个解析操作，当表达式匹配时，pyparsing 将作为解析时回调运行。匹配的标记被传递给解析操作，如果操作返回一个值，该值将替换输出中的已解析标记。在这里，我们使用一个简单的 lambda 来获取第一个标记（字符数组），并将它们连接成一个字符串。

但是您也说过要提取“作者”和“日期”字段。它们实际上是在 log_message 中提取的内容的一部分，因此您必须将该字符串传递给另一个表达式。幸运的是，您可以在第二个解析操作中执行此类操作。

在这个第二阶段解析中，我决定创建一个解析器，它将采用以下形式的任何键值：

```
some key: the value of that key up to the end of the line 
```

如果“作者”和“日期”只是您可能在源文本中找到的任意数量的键的示例。Pyparsing 也有命名结果，类似于正则表达式中的命名组。通常，当名称已知时，您只需在上面显示的名称上加上您的提交 ID。但是在您的日志消息中，实际名称是从输入本身解析出来的，因此为此，pyparsing 有一个`Dict`类。该类`Dict`将采用一组已解析的组，并用每个组的名称装饰该数据，将组的第一个元素作为名称，将组的其余部分作为值。因此，我们希望显示每个键值的名称，其中 ':' 之前的所有内容都将是名称，跳过冒号和任何前导空格，然后将行的其余部分作为值。

```
COLON = Suppress(':')
keyed_value = Group(Word(printables+' ',excludeChars=':') + COLON + empty + restOfLine)
keyed_entries = Dict(ZeroOrMore(keyed_value)) 
```

我们仍然想要该日志消息，最简单的是使用 pyparsing`SkipTo`将其他所有内容都带到字符串的末尾：

```
everything_else_up_to_the_end_of_the_string = SkipTo(StringEnd()) 
```

这是您的日志消息正文的语法：

```
log_message_body = keyed_entries + 
                    everything_else_up_to_the_end_of_the_string('message') 
```

我们已经有了一个解析动作，可以将 log_message 中的所有解析字符组合成一个字符串，但是可以将多个解析动作链接到一个表达式上。我们将添加第二个解析操作，它将使用 log_message_body 语法解析解析的 log_message：

```
def parseMessage(tokens):
    return log_message_body.parseString(tokens[0])
log_message.addParseAction(parseMessage) 
```

现在我们可以再次运行完整的解析器，这一次，输出结果和它们的名字。可以像访问对象的属性一样访问命名的结果（或者如果您愿意，可以使用 dict 表示法）：

```
log_entry = entry.parseString(source)
print (log_entry.id)
print (log_entry['message'])
print (log_entry.dump()) 
```

给出：

```
a8c11fcee68881dfb86095aa36290fb304047cf1
First commit
['commit', 'a8c11fcee68881dfb86095aa36290fb304047cf1', '
    log size', ['Author', 'XXXXXX XXXXXXXX <XXXXXXXXXXXXXXX@XXXXX.XXX>'], 
    ['Date', 'Tue, 10 Apr 2012 11:19:44 +0300'], 
    'First commit']
- Author: XXXXXX XXXXXXXX <XXXXXXXXXXXXXXX@XXXXX.XXX>
- Date: Tue, 10 Apr 2012 11:19:44 +0300
- id: a8c11fcee68881dfb86095aa36290fb304047cf1
- message: First commit 
```

# php - Smarty 在循环中途将图像拆分到第二行

> ID：13658808
> 
> 赞同：1
> 
> 时间：2012-12-01T11:07:39.890
> 
> 标签：php, smarty

我有一系列图像：

1-3 是主要图像。3+ 是缩略图。

Q) 如何将拇指分成 2 行。

例如：

```
<div class="main-images">
{section name="i" loop=$images.rows}
{assign var="rows" value=$images.rows[i]}
    {if $smarty.section.i.index <= 2}
    <img />
    {/if}
{/section}
</div>

<div class="thumbs-images">
{math assign=thumbs_count equation="total - other" total=$images.rowcount other=3}
{section name="i" loop=$images.rows}
{assign var="rows" value=$images.rows[i]}
    {if $smarty.section.i.index >= 3}
    <img />
    {/if}
{/section}
</div> 
```

所以我需要添加一些东西`{if $thumbs_count >= $smarty.section.i.index}<div style="clear:both" />{/if}`，这样它就会出现在第二个循环的一半。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:21:59.470

设法弄清楚这一点。

```
{math assign="total_row_split" equation="floor((total - main) / division)" total=$images.rows|@count division=2 main=3}
{counter start=0 print=false assign="thumbs_count"}
{section name="i" loop=$images.rows}
{assign var="rows" value=$images.rows[i]}
    {if $smarty.section.i.index >= 3}
    {if $thumbs_count == $total_row_split}<br style="clear:both" />{/if}
    <a href="{$HOME}/get/image{$rows.filename.fvalue}" rel="fancy" title="{$rows.title.value|default:$product.name.fvalue}">
        <img src="{$HOME}/get/image/120{$rows.filename.fvalue}" alt="{$rows.title.value|default:$product.name.fvalue} Picture" />
    </a>
    {counter print=false}
    {/if}
{/section} 
```

# google-app-engine - Google App Engine 实体关系注释最终达到 HTTP 500

> ID：13658809
> 
> 赞同：0
> 
> 时间：2012-12-01T11:07:43.790
> 
> 标签：google-app-engine, jakarta-ee, datanucleus

我正在通过 Google 应用引擎创建一个简单的 REST API。我有`Task`和`Project`对象。A`Project`可以有一个或多个`Task`s。以下是有关这些数据对象的一些详细信息：

```
@Entity
public class Project implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Key id;
    private String title;
    private String description;
    private Date createdAt;

    // Section 1
    // @OneToMany(mappedBy = "project")
    // private List<Task> tasks;

    // ...
}

@Entity
public class Task implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Key id;
    private String shortDescription;
    private String longDescription;
    private Date createdAt;
    private Date dueDate;
    private boolean completed;

    // Section 2
    // @ManyToOne
    // @JoinColumn(name = "id_project")
    // private Project project;

    // ...
} 
```

我实现上述类的方式很好（第 1 节和第 2 节被注释掉了）。但是，我想做的是将`Task`对象与`Project`. 每当我删除上面的评论并激活第 1 节和第 2 节时，都会出现以下错误。

项目操作出现错误

```
HTTP ERROR 500

Problem accessing /api/project. Reason:

    Could not initialize class com.aspect.todo.dao.EMFService
Caused by:

java.lang.NoClassDefFoundError: Could not initialize class com.aspect.todo.dao.EMFService
    at com.aspect.todo.dao.Dao.getProjects(Dao.java:144)
    at com.aspect.todo.server.ProjectService.get(ProjectService.java:23)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    ... 
```

任务操作出现错误

```
HTTP ERROR 500

Problem accessing /api/task. Reason:

    INTERNAL_SERVER_ERROR
Caused by:

java.lang.ExceptionInInitializerError
    at com.aspect.todo.dao.Dao.getTasks(Dao.java:98)
    at com.aspect.todo.server.TaskService.get(TaskService.java:24)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    ...

Caused by:

javax.persistence.PersistenceException: Provider error. Provider: org.datanucleus.store.appengine.jpa.DatastorePersistenceProvider
    at javax.persistence.Persistence.createFactory(Persistence.java:176)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:112)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:66
    ...

Caused by:

Errors were encountered when initialising the specified MetaData. See the nested exceptions for details
org.datanucleus.exceptions.NucleusUserException: Errors were encountered when initialising the specified MetaData. See the nested exceptions for details
    at org.datanucleus.metadata.MetaDataManager.initialiseFileMetaDataForUse(MetaDataManager.java:892)
    at org.datanucleus.metadata.MetaDataManager.loadPersistenceUnit(MetaDataManager.java:794)
    at org.datanucleus.jpa.EntityManagerFactoryImpl.initialisePMF(EntityManagerFactoryImpl.java:488)
    ...

Caused by:

Found Meta-Data for class com.aspect.todo.model.Task but this class is not enhanced!! Please enhance the class before running DataNucleus.
org.datanucleus.exceptions.NucleusUserException: Found Meta-Data for class com.aspect.todo.model.Task but this class is not enhanced!! Please enhance the class before running DataNucleus.
    at org.datanucleus.metadata.MetaDataManager.initialiseClassMetaData(MetaDataManager.java:2225)
    at org.datanucleus.metadata.MetaDataManager.initialiseFileMetaData(MetaDataManager.java:2176)
    at org.datanucleus.metadata.MetaDataManager.initialiseFileMetaDataForUse(MetaDataManager.java:881)
    ... 
```

奇怪的是，当我开始将这些部分注释掉时，编译并运行，然后只激活第 2 部分并重新运行它工作正常。如果关闭并重新打开 Eclipse 再试一次，错误会再次出现。

注意：Datanucleus JDO/JPA 版本：v1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T18:11:38.763

如果您使用的是 ANT，则在`</project>`标签关闭之前在 build.xml 中添加以下行

```
<target name="datanucleusenhance" depends="compile"
  description="Performs JDO enhancement on compiled data classes.">
<enhance_war war="war" /> 
```

并在构建蚂蚁时给出以下命令“ `ant datanucleusenhance runserver`”

希望这很有用，我花了一段时间才找到解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T14:31:05.793

```
Found Meta-Data for class com.aspect.todo.model.Task but this class is not enhanced!!
Please enhance the class before running DataNucleus. 
```

事实是，这些类在运行时**没有增强**，您必须找到一种在运行前适用于您的环境的方法来增强它们……Maven、Ant、命令行、DataNucleus Eclipse 插件或 GAE Eclipse 插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-03T13:28:03.783

> 找到 com.aspect.todo.model.Task 类的元数据，但这个类没有增强！！请在运行 DataNucleus 之前增强类。

我将在这里展示一种在 Gradle 环境中增强类的方法。使用以下配置。

*   依赖项：

    ```
    dependencies {
        appengineSdk 'com.google.appengine:appengine-java-sdk:<version>'
        compile 'org.datanucleus:datanucleus-enhancer:<version>'
        compile 'org.datanucleus:datanucleus-api-jpa:<version>'  // or datanucleus-api-jdo
        /* other dependencies */
    } 
    ```

*   插件：（
    *对于 gradle-appengine-plugin 版本 1.9.5 或更高版本）*

    ```
    appengine {
        enhancer {
            version = "v2"
            api = "jpa"  // or "jdo"
            enhanceOnBuild = true
        }
        /*...*/
    } 
    ```

    *（对于旧版本的 gradle-appengine-plugin）*

    ```
    appengine {
        enhancerVersion = "v2"
    } 
    ```

    要在 build.gradle 文件中创建战争之前自动运行增强功能：

    ```
    war.dependsOn appengineEnhance 
    ```

如果您在执行任务时遇到问题`:appengineEnhance`，请尝试使用`--stacktrace`（查看堆栈跟踪）或`--info`（查找错误日志文件的位置）选项运行它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-18T19:43:16.160

只需升级您的 GAE SDK，它就为我解决了问题。

# delphi - 在运行时为delphi中的后台应用程序传递参数

> ID：13658811
> 
> 赞同：2
> 
> 时间：2012-12-01T11:08:00.827
> 
> 标签：delphi, user-interface, delphi-7, pascal

我正在编写一个启动命令提示符启动应用程序的程序，在启动应用程序运行时，启动应用程序会询问许多问题，例如按 1 读取或按 2 写入。但我总是会从应用程序中读取。我总是想把 2 传给它。但问题是我怎么知道后台启动应用程序问了我一个问题，我应该动态地回答适当的答案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T12:59:24.660

如果程序从标准输入读取输入，那么您可以创建一个包含您的输入的文本文件：

```
2

```

然后将标准输入重定向到该文件：

myapp.exe < 输入文件.txt

也许程序有命令行选项，也可以让你避免被提示。

请注意，您的问题是模棱两可的。如果您选择读取选项，您不应该输入1吗？

# authorize.net - Authorize.net AIM退款交易测试模式

> ID：13658816
> 
> 赞同：3
> 
> 时间：2012-12-01T11:08:42.263
> 
> 标签：authorize.net, authorize.net-aim

在测试模式下，当我尝试通过 Authorize.net AIM 仅使用信用卡的最后 4 位数字**为我的交易退款时，它显示以下错误。**

**(TESTMODE) 信用卡号无效**

但奇怪的是，当我输入完整的信用卡号（4007000000027）时，退款工作得很好；
那么如何在测试模式下仅使用信用卡的最后 4 位数字来让我的交易退款呢？
PS：我什至尝试将 XXXXXXXX0027 作为输入，但没有奏效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T15:52:37.670

如果您在交易结算前尝试退款，您将收到此错误。由于测试模式下的交易永远不会结算，因此您无法以这种方式对其进行测试。如果您想测试您的代码，您需要使用[开发人员帐户](http://developer.authorize.net/testaccount/)，该帐户可以让您像在实时模式下一样进行测试，但不会产生任何费用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T18:41:01.540

如果您取消交易，您将不需要包含这些信用卡号码，它应该会通过。您的 x_type 参数是否设置为 Credit？将其设置为 VOID 并取出信用卡号参数。我读过很多文章，说最好因为双方都没有费用而取消交易，而且它比信用更频繁地经历。

# java - 从 JSP 中获取用户名密码和角色值并在 bean Spring 中设置

> ID：13658819
> 
> 赞同：0
> 
> 时间：2012-12-01T11:08:56.943
> 
> 标签：java, spring, jsp, jakarta-ee

我有一个带有下拉列表和 2 个文本字段的 JSP，供用户选择角色并分别输入用户名和密码。我需要获取用户选择的角色和`uname`and`pwd`并将其设置在 bean 中。请帮我 ！！我对 Spring 很陌生。从基本的角度告诉我应该如何通过它。

如何从 JSP 获取用户名密码和角色值并使用 Java spring 在 bean 中设置？

```
<html>
    <head>
        <script type="text/javascript">
            function enableTextBox() {
                if (document.getElementById("dropdown").value == "Admin") {
                    document.getElementById("uname").disabled = false;
                    document.getElementById("pwd").disabled = false;
                } else {
                    document.getElementById("uname").disabled = true;
                    document.getElementById("pwd").disabled = true;
                }
            }

            function doClear() {
                document.getElementById("uname").value = "";
                document.getElementById("pwd").value = "";
            }
        </script>
    </head>

    <body>
        <table border=0 width=100% height=100%>
            <tr>
                <td valign="middle" align="center">
                    <table border="1" bordercolorlight="#C0C0C0" style="border-collapse: collapse"
                    bordercolor="#C0C0C0" cellpadding="0" cellspacing="0">
                        <tr>
                            <td valign="middle" align="center" style="width: 400px">
                                <table border="0">
                                    <tr>
                                        <td colspan=2>
                                            <p align="center">
                                                <img src="images/logo.jpg" width="144" height="66">
                                        </td>
                                    </tr>
                                    <td align="center" colspan=2>
                                        <FONT COLOR=BLUE SIZE=3>Welcome</FONT>
                                    </td>
                                    <tr>
                                        <td align="center" colspan=2>
                                            <STRONG><font size="4">Auction Site </font> </STRONG><font size="4"><BR>
     </font>
                                        </td>
                                    </tr>
                                    <tr>
                                        <tr align=center>
                                            <td align="right"><b>Select your role:</b>
                                            </td>
                                            <td align="left">
                                                <select name="dropdown" id="dropdown" onchange="enableTextBox();">
                                                    <option value="Admin">Admin</option>
                                                    <option value="csc">CSC Employee</option>
                                                </select>
                                            </td>
                                        </tr>
                                        <tr align=center>
                                            <td align="right"><b>User ID:</b>
                                            </td>
                                            <td align="left">
                                                <input type="text" id="uname" name="uname" value="" size="15" />
                                            </td>
                                        </tr>
                                        <tr align=center>
                                            <td align="right"><b>Password:</b>
                                            </td>
                                            <td align="left">
                                                <input type=password id="pwd" name="pwd" value="" size="15" />
                                            </td>
                                        </tr>
                                        <tr align=center>
                                            <input type="submit" id="sub" name="sub" value="Submit" size="15" />
                                            <td align="left">
                                                <input type="button" id="clr" name="clr" value="Reset" onclick="doClear()"
                                                />
                                            </td>
                                        </tr>
                                </table>
                            </td>
                            </tr>
                    </table>
                </td>
                </tr>
        </table>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T13:33:00.017

您没有提及用户名/角色的来源或存储位置。因此，我假设您对 Spring MVC 应用程序的处理是错误的。也许您来自 php 或其他地方，您只需将代码放在 php 文件中并在 html 中显示值，也在同一个文件中。

在 MVC 中，有一种完全不同的处理方式。首先，您应该考虑您的模型/域。在您的情况下，这将是一个用户对象和一个角色对象。然后您将构建控制器来管理这些对象。然后您将查看视图 (jsp) 以将这些对象呈现给最终用户。所以在你的情况下，jsp 是最后要考虑的事情。

我建议使用 spring ROO 来构建您的简单应用程序。它将根据您的模型/域类生成/搭建一个 Spring MVC 应用程序。它还使用了所有 Spring 最佳实践，因此是了解其工作原理的好方法。

# c++ - 升压定时器限制

> ID：13658820
> 
> 赞同：1
> 
> 时间：2012-12-01T11:09:21.387
> 
> 标签：c++, boost, timestamp, timing

我需要以毫秒为单位测量经过的时间（或某种时间戳 - 无论是系统时间还是从 0 开始的时间），并且有兴趣使用`boost::cpu_timer`该类来执行此操作。

长时间使用这个课程（即连续一周不间断测量）是否不明智？有替代解决方案吗？

根据我获取系统时间戳的经验，我逐渐假设每几毫秒获取以毫秒为单位的时间戳（这是我需要的）是非常缓慢和费力的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T11:38:01.190

我认为[boost::chrono](http://www.boost.org/libs/chrono/)或[std::chrono](http://www.cplusplus.com/reference/chrono/)更好地解决了这个问题

# jquery - 从我的 facebook 应用程序调用 facebook ajax

> ID：13658826
> 
> 赞同：0
> 
> 时间：2012-12-01T11:10:25.150
> 
> 标签：jquery, ajax, facebook, cross-domain, jsonp

我最近创建了一个 Facebook 应用程序来管理好友列表。我可以创建和删除它们，但我惊讶地发现 FB API 没有提供任何方法来重命名好友列表。

在 facebook 中，可以重命名好友列表。使用 Firebug，我看到当我通过 facebook 重命名列表时，这个页面被称为：

[https://www.facebook.com/friends/ajax/lists.php](https://www.facebook.com/friends/ajax/lists.php)

方法：邮寄

参数：

> __a 1
> 
> __user myUID
> 
> fb_dtsg AQBcx3kd
> 
> 翻转我的朋友列表 ID
> 
> 邮票 1658166991205110710078
> 
> 重命名 ztest456

来源：fb_dtsg=AQBcx3kd&flid=myFriendListID&rename=ztest456&_ *user=myUID&* _a=1&phstamp=1658166991205110710078

所以在我的工作应用程序中，我尝试通过 ajax 函数构建，如下所示：

```
$.ajax({
    type: "POST",
    url: "https://www.facebook.com/friends/ajax/lists.php",
    data: "flid=" + myFriendListID + "&rename=" + newName + "&__user=" + uid + "&__a=1",
    success: function(msg){

    },
    error: function(msg){
        console.log("Error: " + msg);
    }
}).done(function( msg ) {
    //console.log("Feedback: " + msg);
}); 
```

我从 facebook 得到的是错误。我在stackoverflow中读到可能通过使用JSONP或允许在jquery中发出跨域ajax请求 $.support.cors = true; （我启用了 cors 支持，但它仍然不起作用）。

还有一个问题是 phpstamp 和 fb_dtsg 每次都会改变（fb_dtsg 可能是同一个会话，phpstamp 似乎每次请求都增加 1）。

老实说，我不知道该使用什么，这似乎是一个很大的挑战（因为当然，没有提供来自 facebook 的支持）所以在这里我请求您的支持；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T22:03:17.260

您无权访问 Facebook 域上的 ajax 文件。就那么简单。您可以使用 Graph API 创建和删除列表。文档[在这里](https://developers.facebook.com/docs/reference/api/FriendList/)

# c# - 使用c#找出计算机的动态IP地址

> ID：13658833
> 
> 赞同：0
> 
> 时间：2012-12-01T11:11:38.397
> 
> 标签：c#, asp.net

我必须检查系统是否有静态或动态 IP 地址，然后显示它的动态地址。我知道如何找出静态地址。我想知道如何找出动态 IP 地址.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:51:00.073

观众的ip来自

```
Request.ServerVariables["REMOTE_ADDR"] 
```

或者

```
Request.UserHostAddress 
```

参考：http: [//msdn.microsoft.com/en-us/library/system.web.httprequest.userhostaddress.aspx](http://msdn.microsoft.com/en-us/library/system.web.httprequest.userhostaddress.aspx)

如果用户在代理后面，您可能还需要检查更多服务器变量，正如我在此答案中描述的那样：[https ://stackoverflow.com/a/2514717/159270](https://stackoverflow.com/a/2514717/159270)

# objective-c - OpenGL ES三角形未显示

> ID：13658834
> 
> 赞同：2
> 
> 时间：2012-12-01T11:11:48.540
> 
> 标签：objective-c, opengl-es, geometry, indices

首先，我是法国人，很抱歉我的英语。

我是 OpenGL ES 的新手，我正在尝试用这些 Vertices 绘制一个简单的三角形：

```
typedef struct {
    float Position[3];
    float Color[4];
} Vertex;

const Vertex Vertices[] = {
    {{0.0, 1.0, -2.0}, {1, 0, 0, 1}},
    {{1.0, 0.0, -2.0}, {1, 0, 0, 1}},
    {{-1.0, 0.0, -2.0}, {1, 0, 0, 1}},
}; 
```

以及这些指标；

```
const GLubyte Indices[] = {
    0,1,2
}; 
```

但是三角形没有显示出来......如果我将索引更改为 0,2,3，它会显示一个顶点为 0,2 和黑色顶点的三角形：{{0,0,0},{0,0, 0,1}} ，但没有第四个顶点...我完全不明白有人可以解释一下吗？

这是我的 Xcode 视图代码：

```
//
//  EAGLView.m
//  OpenGlintro
//
//  Created by Arnaud Miguet on 01/12/12.
//  Copyright (c) 2012 Tap‘n'Develop. All rights reserved.
//

#import "EAGLView.h"

@implementation EAGLView
+ (Class) layerClass {
    return [CAEAGLLayer class];
}

- (void)setupVBOs {

    GLuint vertexBuffer;
    glGenBuffers(1, &vertexBuffer);
    glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer);
    glBufferData(GL_ARRAY_BUFFER, sizeof(Vertices), Vertices, GL_STATIC_DRAW);

    GLuint indexBuffer;
    glGenBuffers(1, &indexBuffer);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexBuffer);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(Indices), Indices, GL_STATIC_DRAW);

}

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        CAEAGLLayer *EAGLLayer = (CAEAGLLayer *) super.layer;
        EAGLLayer.opaque = YES;

        context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2];

        if (!context || ![EAGLContext setCurrentContext:context]) {
            [self release];
            return nil;
        }

        GLuint framebuffer , renderbuffer;

        glGenBuffers(1, &framebuffer);
        glGenBuffers(1, &renderbuffer);

        glBindFramebuffer(GL_FRAMEBUFFER, framebuffer);
        glBindRenderbuffer(GL_RENDERBUFFER, renderbuffer);

        [context renderbufferStorage:GL_RENDERBUFFER fromDrawable:EAGLLayer];
        glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, renderbuffer);
        glViewport(10, 0, CGRectGetWidth(frame), CGRectGetHeight(frame));
        [self compileShaders];
        [self setupVBOs];
        [self render];
    }
    return self;
}

- (void)render {
    glClearColor(0, 104.0/255.0, 55.0/255.0, 1.0);
    glClear(GL_COLOR_BUFFER_BIT);

    // 1
    glViewport(0, 0, self.frame.size.width, self.frame.size.height);

    // 2
    glVertexAttribPointer(_positionSlot, 3, GL_FLOAT, GL_FALSE,
                      sizeof(Vertex), 0);
    glVertexAttribPointer(_colorSlot, 4, GL_FLOAT, GL_FALSE,
                      sizeof(Vertex), (GLvoid*) (sizeof(float) * 3));

    // 3
    glDrawElements(GL_TRIANGLES, sizeof(Indices),
               GL_UNSIGNED_BYTE, 0);

    [context presentRenderbuffer:GL_RENDERBUFFER];
}

- (GLuint)compileShader:(NSString*)shaderName withType:(GLenum)shaderType {

    // 1
    NSString* shaderPath = [[NSBundle mainBundle] pathForResource:shaderName
                                                       ofType:@"glsl"];
    NSError* error;
    NSString* shaderString = [NSString stringWithContentsOfFile:shaderPath
                                                   encoding:NSUTF8StringEncoding error:&error];
    if (!shaderString) {
        NSLog(@"Error loading shader: %@", error.localizedDescription);
        exit(1);
    }

    // 2
    GLuint shaderHandle = glCreateShader(shaderType);

    // 3
    const char * shaderStringUTF8 = [shaderString UTF8String];
    int shaderStringLength = [shaderString length];
    glShaderSource(shaderHandle, 1, &shaderStringUTF8, &shaderStringLength);

    // 4
    glCompileShader(shaderHandle);

    // 5
    GLint compileSuccess;
    glGetShaderiv(shaderHandle, GL_COMPILE_STATUS, &compileSuccess);
    if (compileSuccess == GL_FALSE) {
        GLchar messages[256];
        glGetShaderInfoLog(shaderHandle, sizeof(messages), 0, &messages[0]);
        NSString *messageString = [NSString stringWithUTF8String:messages];
        NSLog(@"%@", messageString);
        exit(1);
    }

    return shaderHandle;

}

- (void)compileShaders {

    // 1
    GLuint vertexShader = [self compileShader:@"SimpleVertex"
                                 withType:GL_VERTEX_SHADER];
    GLuint fragmentShader = [self compileShader:@"SimpleFragment"
                                   withType:GL_FRAGMENT_SHADER];

    // 2
    GLuint programHandle = glCreateProgram();
    glAttachShader(programHandle, vertexShader);
    glAttachShader(programHandle, fragmentShader);
    glLinkProgram(programHandle);

    // 3
    GLint linkSuccess;
    glGetProgramiv(programHandle, GL_LINK_STATUS, &linkSuccess);
    if (linkSuccess == GL_FALSE) {
        GLchar messages[256];
        glGetProgramInfoLog(programHandle, sizeof(messages), 0, &messages[0]);
        NSString *messageString = [NSString stringWithUTF8String:messages];
        NSLog(@"%@", messageString);
        exit(1);
    }

    // 4
    glUseProgram(programHandle);

    // 5
    _positionSlot = glGetAttribLocation(programHandle, "Position");
    _colorSlot = glGetAttribLocation(programHandle, "SourceColor");
    glEnableVertexAttribArray(_positionSlot);
    glEnableVertexAttribArray(_colorSlot);
}

typedef struct {
    float Position[3];
    float Color[4];
} Vertex;

const Vertex Vertices[] = {
    {{0.0, 1.0, -2.0}, {1, 0, 0, 1}},
    {{1.0, 0.0, -2.0}, {1, 0, 0, 1}},
    {{-1.0, 0.0, -2.0}, {1, 0, 0, 1}},
};

const GLubyte Indices[] = {
    0,2,3
};

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:31:06.440

在绑定缓冲区之前添加一个顶点数组。

```
GLuint vao;
glGenVertexArray(1, &vao);
glBindVertexArray(vao); 
```

# php - 表单中的多个收音机（PHP）

> ID：13658835
> 
> 赞同：0
> 
> 时间：2012-12-01T11:11:48.317
> 
> 标签：php, html, forms

我创建了一个表单，我希望表单中有多个具有相同输出的单选问题（是，否）。这是我的脚本：

```
<?php
echo '<tr>
    <script>
            function displayResult(check)
            {
                document.getElementById("result").value=check
            }
    </script>
    <td width="60%">'
        .$row1['vraag'].'
    </td>
    <td>
        <input type="radio" name="check" onclick="displayResult(this.value)" value="ja">Ja
        <input type="radio" name="check" onclick="displayResult(this.value)" value="nee">Nee
    </td>
    <td>
        <input type="hidden" name="vragen'.$aantalBranches.'[]" value="'.$row1['vraag'].'"/>
        <input id="result" type="text" name="antwoorden'.$aantalBranches.'[]"/>
    </td>
</tr>'; 
```

如您所见，我在填写表格时发送了问题（vragen）和答案（antwooden）。我现在遇到的问题是，当我也用收音机选择第二个问题时，第一个问题的输出也会发生变化。任何人都可以通过单选按钮帮助我朝着正确的方向前进吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:22:09.237

所有相同的单选按钮`name`都被视为在同一组中 - 并且只能同时选择该组中的一项。因此，您的第二组单选框需要将它们`name`设置为`name`与第一组不同的组。

# php - .htaccess 使用基本文件指定的 url

> ID：13658836
> 
> 赞同：1
> 
> 时间：2012-12-01T11:11:54.323
> 
> 标签：php, .htaccess

我有一个目录`site`及其子文件夹和文件。它还包含一个`.htacess`，下面是代码

```
RewriteRule ^([A-Za-z0-9-]+)/?$ index.php?cc=$1 
```

所以我下面的 url 将是有效的并且工作良好。

```
http://localhost/site/sweetinc 
```

下面的代码`index.php`如下

```
<?php
if (isset($_GET['cc']) and !empty($_GET['cc'])) {
    echo $_GET['cc'];
} else {
    die("Sorry wrong code");
}
?> 
```

这很好用。

现在，我想照常访问或显示所有文件

```
http://localhost/site/sweetinc/home.php
http://localhost/site/sweetinc/test.php 
```

`home.php`并且`test.php`位于`site`目录中。如果它重定向到其他子文件夹，那么它应该是可见的

```
http://localhost/site/sweetinc/sub-folder1/test3.php 
```

这是可能的吗，因为我正在使用单独的目录来分隔一个组，并将目录中的`.htaccess`所有文件`site`视为`base files`

![在此处输入图像描述](../Images/3259d6d24d19fc023ec5b43830a69b57.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:30:31.923

这里的技巧（如果我正确理解您的问题）是当您尝试访问实际存在的文件时，您不希望重写规则生效，对吗？

在这种情况下，就在您的 之前 `RewriteRule`，添加以下行：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

这样，重写规则仅在服务器上不存在 url（例如 /site/sweetinc）时才生效。如果是（/site/sweetinc/home.php），则跳过重写器并显示文件。

（`-f`检查文件名是否存在，`-d`检查目录是否存在，所以 /home/sweetinc/somedir/ 也应该工作）

***根据更新的问题进行更新*** 您需要两个单独的规则。首先，如果使用 url 中的 /sweetinc/ 目录，请将其引用到 /site/ 文件夹：

```
RewriteRule ^sweetinc/(.*)$ /$1 [L] 
```

然后，如果该文件实际上不存在，则让 index.php 处理它：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?cc=$1 [L] 
```

一些例子：

我的文件子域中有以下文件：

*   /index.php （它的内容和你的一样，所以它读出 ?cc=
*   /circle3.PNG
*   /带有上述规则的.htaccess

[http://files.litso.com/sweetinc/hello](http://files.litso.com/sweetinc/hello)显示与“hello”相呼应的 index.php [http://files.litso.com/sweetinc/circle3.PNG](http://files.litso.com/sweetinc/circle3.PNG)在 / 中显示实际文件

（注意，我没有 /sweetinc/ 目录，都是伪造的）

# security - 破解修改后的 Vigenere 密码

> ID：13658843
> 
> 赞同：0
> 
> 时间：2012-12-01T11:12:34.100
> 
> 标签：security, encryption, vigenere

我正在研究一种算法来破解修改后的 Vigenere Cipher。常规的 Vigenere 密码的工作方式如下：

```
Plaintext: ATTACKATDAWN
Key: LEMONLEMONLE
Ciphertext: LXFOPVEFRNHR 
```

**普通版**

```
CR[i] = (P[i] - 33 + K[i]) mod 94 + 33 
```

**修改版**

```
CM[i] = (P[i] - 33 + K[i] + CM[i-1] - 33) mod 94 + 33 
```

注意修改后的版本如何使用以前的状态/字符来生成新的。我打破它的理论是将修改后的版本反转回常规的 Vigenere 密码。这样我可以应用一些频率分析和其他方法。我需要以某种方式重新排列该等式，以便在 LHS 上使用 C 具有“ **previousC** ”。由于 C 和 previousC 都是已知值，因此应该很容易进行反转（从第一个字符开始）。

我唯一的问题是，如何用 C 和 previousC 重写方程？如果有人能指出这一点，那将有很大帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T12:04:28.310

`CR`表示常规的 Viginere 密文，`CM`修改后的 Viginere 密文

```
CR[i] = (P[i] + K[i]) mod 26
CM[i] = (P[i] + K[i] + CM[i-1]) mod 26
      = (CR[i] + CM[i-1]) mod 26 
```

现在简单求解原始密文`CR`

```
CR[i] = (CM[i] - CM[i-1]) mod 26 
```

获得常规密文后，像往常一样破解它。

# hadoop - 获取 Pig Latin 中的 xml 值

> ID：13658844
> 
> 赞同：3
> 
> 时间：2012-12-01T11:12:37.743
> 
> 标签：hadoop, xml-parsing, apache-pig

我正在使用 pig latin 进行大型 XML 转储。我正在尝试获取猪拉丁语中 xml 节点的值。文件就像

<用户名>Shujaat</用户名>

我想得到输入 Shujaat。我尝试了 piggybank XMLLoader，但它也只分离了 xml 标签及其值。代码是

```
register piggybank.jar;

A = load 'username.xml' using org.apache.pig.piggybank.storage.XMLLoader('username')
as (x: chararray);

B = foreach A generate x; 
```

这段代码也给了我用户名标签和值。我只需要价值观。知道怎么做吗？我发现了正则表达式但不太了解？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T19:51:36.890

您提供的示例元素可以通过以下方式提取：

```
B = foreach A GENERATE REGEX_EXTRACT(x, '<username>(.*)</username>', 1) 
      AS name:chararray; 
```

像这样的嵌套元素：

```
 <user>
    <id>456</id>
    <username>Taylor</username>
  </user> 
```

可以通过以下方式提取：

```
B = foreach A GENERATE FLATTEN(REGEX_EXTRACT_ALL(x, 
     '<user>\\n\\s*<id>(.*)</id>\\n\\s*<username>(.*)</username>\\n\\s*</user>')) 
     as (id: int, name:chararray);

 (456,Taylor) 
```

您肯定需要定义一个更复杂的正则表达式来满足您的所有需求，即：处理空元素、属性...等。另一种选择是编写一个自定义[UDF](http://pig.apache.org/docs/r0.10.0/udf.html)，它使用 Java 库来解析 XML 的内容，这样您就可以避免编写（过度）复杂、容易出错的正则表达式。

# dart - Dart API 参考中的抽象方法

> ID：13658845
> 
> 赞同：5
> 
> 时间：2012-12-01T11:12:40.067
> 
> 标签：dart

`complete`类中的许多方法`Completer`都被标记为“抽象”，但实际上它可以直接调用而无需实现。我真的很困惑。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T16:39:26.993

是的，这可能有点令人困惑。虽然抽象类不能被实例化，但可以通过定义工厂构造函数使它们*看起来是可实例化的。*这就是`Completer`,`Future`和其他抽象类所做的：

```
abstract class Completer<T> {

  factory Completer() => new _CompleterImpl<T>();

  ...
} 
```

然后，您可以在构造函数创建的对象上调用方法`factory`。在上面的示例中，`factory Completer()`返回一个新`_CompleterImpl`对象。查看该类的（截断）代码：

```
class _CompleterImpl<T> implements Completer<T> {

  final _FutureImpl<T> _futureImpl;

  _CompleterImpl() : _futureImpl = new _FutureImpl() {}

  Future<T> get future {
    return _futureImpl;
  }

  void complete(T value) {
    _futureImpl._setValue(value);
  }
  ...
} 
```

你看`complete()`；那就是被调用的方法。

# html5boilerplate - 样板有 4mb 的占用空间 - 为什么？

> ID：13658846
> 
> 赞同：0
> 
> 时间：2012-12-01T11:12:42.470
> 
> 标签：html5boilerplate

我正在为 html5、js 和 css3 使用 eclipse。

在开始一个新项目时，eclipse 提出使用样板文件来启动它。经过一番研究，尝试一下似乎是一件好事。但是在压缩项目以发送给测试人员时，我发现我有一个非常大的 4mb 占用空间的小应用程序......

我在 myProject/.git/objects/pack 中找到了罪魁祸首，该文件是 pack-8bbfc27fb4f49b9b8418123879a14af5e5dd861c.pack 并且是 3.8mb

任何想法这是什么？它是eclipse添加的东西吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T23:40:51.783

该`.git`目录仅供[Git](http://git-scm.com/)版本控制系统使用。我们使用 Git - 就像许多其他开源项目一样 - 来管理项目的源代码。

# android - 在Android中应用自定义字体的困难

> ID：13658852
> 
> 赞同：-5
> 
> 时间：2012-12-01T11:13:22.623
> 
> 标签：android

我有自定义字体示例和一个小型列表视图示例应用程序。但我无法加入他们。

```
 /** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TextView tv = (TextView)findViewById(R.id.tv);
    Typeface cFont = Typeface.createFromAsset(getAssets(), "fonts/jcc.ttf");
    tv.setTypeface(cFont);

<TextView  
android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
android:text="@string/hello"
android:textSize="18sp"
android:id="@+id/tv"
/> 
```

和

```
 /** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_product_list);

    String asim02 = System.getProperty("line.separator");

    String products[] = {
            "Product1" + asim02 +"Definition1", 
            "Product2" + asim02 +"Definition2",
            "Product3"+ asim02 +"Definition3", 
            "Product4"+ asim02 +"Definition4",  };

    lv = (ListView) findViewById(R.id.list_view);

    // Adding items to listview
    adapter = new ArrayAdapter<String>(this, R.layout.list_item, R.id.p_list,   products);
    lv.setAdapter(adapter);

<TextView

        android:textColor="?android:textColorPrimary"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="15sp"
        android:id="@+id/p_list"
        /> 
```

如何将“@+id/p_list”和“@+id/tv”分配在一起？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:40:28.977

首先，您需要制作自定义适配器以在列表视图中设置数据。首先只关注 ListView。一旦您能够在您的应用程序中显示列表。然后在您的适配器代码中尝试集成自定义字体。

# java - 向用户发送电子邮件以在 Android 应用中重置密码

> ID：13658856
> 
> 赞同：1
> 
> 时间：2012-12-01T11:14:02.823
> 
> 标签：java, android, sendmail, forgot-password

我通过我的android应用程序中的soap webservices使用MySQL连接开发了一个登录表单（用户名、密码和提交按钮）。在这里我忘记了密码意味着我无法访问我的帐户。那么我该如何访问我的帐户。所以我添加了一个文本视图（忘记密码???点击这里）。我已经完成了注册页面。注册页面有用户名，密码和电子邮件。所以当我忘记密码时意味着单击忘记密码文本视图。然后它会忘记密码活动。当我输入注册的电子邮件 ID 时意味着我的密码已重置并发送到我的电子邮件 ID。所以我知道我现在的密码。我该怎么做。请以编程方式帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T11:19:29.930

我认为更好的方法是，您的 mysql 数据库中有用户当前密码，然后只需获取用户电子邮件地址并调用您的网络服务。

现在从您的服务搜索电子邮件地址是否存在，然后获取密码并从服务发送电子邮件，并且在成功/失败/不存在时，用户将消息返回给您的 android 作为响应。

您只需要从 android 调用该服务，无需更改用户密码即可获取邮件并使用当前凭据登录。

**已编辑**

如果您这样做，则通过电子邮件地址搜索调用 Web 服务，以检查电子邮件搜索是否存在，然后创建动态密码字符串并更新该用户的密码，并将此密码发送到用户电子邮件地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-12T14:36:24.067

您应该避免在电子邮件中发送密码。

相反，您可以向用户发送一个设置为在 10 分钟左右后过期的令牌，这可以（大致）由

*   创建一个记录忘记密码请求（userid、token、requested_on、expires_on）的表。
*   当用户请求重置密码时，向他们发送一封电子邮件，其中包含将其记录到表中的令牌。
*   创建一个密码重置表单，用户可以在其中输入令牌和新密码。
*   提交密码重置后，根据日志检查令牌对用户是否有效。
*   如果重置成功，则将用户带到登录表单。

# spring - spring el 不适用于@Transactional

> ID：13658859
> 
> 赞同：0
> 
> 时间：2012-12-01T11:14:24.423
> 
> 标签：spring, jsf-2, spring-transactions

面孔-config.xml

```
- org.springframework.web.jsf.DelegatingVariableResolver 
```

应用程序上下文.xml

```
<bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>  
<tx:annotation-driven  />
<context:component-scan base-package="com.test"/> 
```

索引.xhtml

```
<h:outputText value="#{authBean.val}"/> 
```

AuthBean.java

```
package com.test.ui;

@Component
@Scope("session")
public class AuthBean {

    @Getter @Setter private String val;

    @Transactional  public void test(){}    //works fine if @Transactional is removed 
```

工作正常，但是当使用 @Transactional 注释方法时，会发生以下错误

```
16:23:13,906 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jbtst].[Faces Servlet]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet Faces Servlet threw exception: javax.el.PropertyNotFoundException: /index.xhtml @14,49 value="#{authBean.val}": The class '$Proxy28' does not have the property 'val'.
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:111) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIOutput.getValue(UIOutput.java:169) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final] 
```

使用 spring-3.1、hibernate3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:52:36.540

当您使用`@Transactional`Spring 创建一个代理，该代理实现与您的类相同的接口，但您的`AuthBean`类没有实现接口。

解决此问题的最简单方法是使用该`val`属性定义一个接口并`AuthBean`实现该接口，然后代理也将具有 val 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T12:20:59.370

这有助于[注释等效于 <aop:scoped-proxy>](https://stackoverflow.com/questions/4503606/annotation-equivalent-of-aopscoped-proxy)

```
<context:component-scan base-package="com.test" scoped-proxy="targetClass" /> 
```

# iphone - 在自定义单元类应用程序中释放对象时崩溃

> ID：13658861
> 
> 赞同：3
> 
> 时间：2012-12-01T11:14:35.067
> 
> 标签：iphone, ios, ipad

当我的自定义 TableViewCell 发布时，我的应用程序崩溃了。我尝试的代码如下所示。它没有用于变量的名称。

单元格在 cellForRowAtIndexPath 中被初始化，如下所示。

```
static NSString *CellIdentifier1 = @"CellIdentifier";
    static NSString *CellIdentifier2 = @"Cell";
     if (indexPath.section == 0 && indexPath.row==0)
    { 
         CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier1];
       if (cell == nil)
        {
            cell = [[[CustomCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier1] autorelease];
            cell.backgroundView = [ [[UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"dfdfdf.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0] ]autorelease];
        }
   [cell.fgfbutton addTarget:self action:@selector(callAction:) forControlEvents:UIControlEventTouchUpInside];     
 cell.myImageView.image=[UIImage imageNamed:@"fdfdfdf.png"];
    cell.fddfdbutton.tag=indexPath.section+1;
       return cell;

    }
    else if (indexPath.section == 1 && indexPath.row==0) 
    {
        Customcellwithimage *cell = (Customcellwithimage *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier2];

        if (cell == nil)
        {
            cell = [[[Customcellwithimage alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier2] autorelease];
             cell.backgroundView = [ [[UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"fetrtrtrt.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0] ]autorelease];
        }

         cell.selectionStyle = UITableViewCellSelectionStyleNone;

        [cell.dfdfbutton1 addTarget:self action:@selector(callAction:) forControlEvents:UIControlEventTouchUpInside]; 

        return cell;

    } 
```

在我的自定义单元格中，我正在释放 dealloc 方法中的单元格对象。在我的自定义单元格中，我正在这样做

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        nameLabel = [[UILabel alloc]init];
        [nameLabel setFont:[UIFont fontWithName:@"Helvetica-Bold" size:16]];
        nameLabel.textAlignment = UITextAlignmentLeft;
        nameLabel.textColor = [UIColor blackColor];
        nameLabel.numberOfLines = 0;

        nameLabel.backgroundColor =[UIColor clearColor];
        nameLabel.adjustsFontSizeToFitWidth = NO;

       sfdfbutton = [UIButton buttonWithType:UIButtonTypeCustom];

        [sdsdbutton setImage:[UIImage imageNamed:@"_it.png"] forState:UIControlStateNormal];
        [sdbutton setImage:[UIImage imageNamed:@"ed.png"] forState:UIControlStateSelected]; 
        sdsdbutton.selected=NO;

            myImageView = [[UIImageView alloc] init];
        bottomborder=[[UIImageView alloc] init];
        UIImage *img1 = [UIImage imageNamed:@"_bg.png"];
        [bottomborder setImage:img1];

        [self.contentView addSubview:nameLabel];

        [self.contentView addSubview:myImageView];

    }
    return self;
}
- (void)layoutSubviews {
    [super layoutSubviews];
    //CGRect contentRect = self.contentView.bounds;
    //CGFloat boundsX = contentRect.origin.x;
    CGRect frame;

    //frame= CGRectMake(0 ,0, 300, 135);
    //cellview.frame = frame;
    frame= CGRectMake(60 ,8, 220, 20);
    nameLabel.frame = frame;

    myImageView.frame = CGRectMake(10,6,40,40);
    NSLog(@"nameLabel frame: %@", NSStringFromCGRect(myImageView.frame));
    nhghbutton.frame =CGRectMake(4,12 + frame.origin.y + frame.size.height, 82, 35);

}
- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

}
- (void)dealloc {

   [bottomborder release];
   [myImageView release];
   [label release];
   [super dealloc];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:19:39.343

如果您在表格视图单元格的 dealloc 中执行 [sfdfbutton release]，您可能会过度释放您的 UIButton: sfdfbutton。那是因为它是自动释放的对象。

如果这不是问题，请尝试使用 Instruments 运行应用程序。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-01T11:21:12.840

要解决此类问题，请`NSZombieEnabled`设置为`YES`（产品 > 编辑方案...并将其添加到环境变量）启动您的应用程序。

这将准确指出哪个变量被过度释放。您还可以通过键入 Cmd+Shift+B 对程序执行静态分析。

# c# - 使用实体框架 dbset 获取所有行

> ID：13658862
> 
> 赞同：39
> 
> 时间：2012-12-01T11:15:03.710
> 
> 标签：c#, entity-framework, dbset

我想使用以下类型的语法从表中选择所有行：

```
public IQueryable<Company> GetCompanies()
{
    return DbContext.Set<Company>()
    .// Select all
} 
```

请原谅我，因为我对 EF 完全陌生。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-12-01T11:17:39.790

`Set<T>()`已经是`IQueryable<T>`并且它返回表中的所有行

```
public IQueryable<Company> GetCompanies()
{
    return DbContext.Set<Company>();    
} 
```

还将生成`DbContext`每个表的命名属性。找`DbContext.Companies`——同`DbContext.Set<Company>`（）

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-12-01T11:18:15.087

执行此操作的常规方法是实例化您的 dbContext。

例如：

```
public IQueryable<Company> GetCompanies()
{
    using(var context = new MyContext()){ 
        return context.Companies;
    }
} 
```

有很多关于使用 CodeFirst Entity 框架的好教程（如果你有一个 DbContext 并且是新的，我假设你正在使用它）

*   [http://codefirst.codeplex.com/](http://codefirst.codeplex.com/)
*   [http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx](http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2020-02-02T16:29:02.987

我更喜欢名单上的工作，这里也有所有的关系

例如：

```
public List<Company> GetCompanies()
{
    using (var context = new MyContext())
    {
        return context.Companies.ToList();
    }
} 
```

# python-2.7 - 简单的网络爬虫

> ID：13658863
> 
> 赞同：1
> 
> 时间：2012-12-01T11:15:19.747
> 
> 标签：python-2.7, beautifulsoup

我在python中为非常简单的网络爬虫编写了下面的程序，但是当我运行它时它返回我'NoneType'对象不可调用'，你能帮我吗？

```
import BeautifulSoup
import urllib2
def union(p,q):
    for e in q:
        if e not in p:
            p.append(e)

def crawler(SeedUrl):
    tocrawl=[SeedUrl]
    crawled=[]
    while tocrawl:
        page=tocrawl.pop()
        pagesource=urllib2.urlopen(page)
        s=pagesource.read()
        soup=BeautifulSoup.BeautifulSoup(s)
        links=soup('a')        
        if page not in crawled:
            union(tocrawl,links)
            crawled.append(page)

    return crawled
crawler('http://www.princeton.edu/main/') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T04:35:01.090

**[更新] 这是完整的项目代码**

[https://bitbucket.org/deshan/simple-web-crawler](https://bitbucket.org/deshan/simple-web-crawler)

**[回答者]**

soup('a') 返回完整的 html 标签。

```
<a href="http://itunes.apple.com/us/store">Buy Music Now</a> 
```

所以**urlopen**给出错误 **'NoneType' object is not callable'**。您只需要提取 url/href。

```
links=soup.findAll('a',href=True)
for l in links:
    print(l['href']) 
```

您也需要验证 url。请参阅以下 anwsers

*   [如何在 Python 中使用正则表达式验证 URL？](https://stackoverflow.com/questions/827557/how-do-you-validate-a-url-with-a-regular-expression-in-python)

*   [Python - 如何在 python 中验证 url？（格式不正确）](https://stackoverflow.com/questions/7160737/python-how-to-validate-a-url-in-python-malformed-or-not)

我再次建议您使用 python 集而不是 Arrays。您可以轻松添加、省略重复的 url。

*   [http://docs.python.org/2/library/sets.html](http://docs.python.org/2/library/sets.html)

**试试下面的代码：**

```
import re
import httplib
import urllib2
from urlparse import urlparse
import BeautifulSoup

regex = re.compile(
        r'^(?:http|ftp)s?://' # http:// or https://
        r'(?:(?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\.)+(?:[A-Z]{2,6}\.?|[A-Z0-9-]{2,}\.?)|' #domain...
        r'localhost|' #localhost...
        r'\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})' # ...or ip
        r'(?::\d+)?' # optional port
        r'(?:/?|[/?]\S+)$', re.IGNORECASE)

def isValidUrl(url):
    if regex.match(url) is not None:
        return True;
    return False

def crawler(SeedUrl):
    tocrawl=[SeedUrl]
    crawled=[]
    while tocrawl:
        page=tocrawl.pop()
        print 'Crawled:'+page
        pagesource=urllib2.urlopen(page)
        s=pagesource.read()
        soup=BeautifulSoup.BeautifulSoup(s)
        links=soup.findAll('a',href=True)        
        if page not in crawled:
            for l in links:
                if isValidUrl(l['href']):
                    tocrawl.append(l['href'])
            crawled.append(page)   
    return crawled
crawler('http://www.princeton.edu/main/') 
```

# php - 这种关系是否可能（phpmyadmin）

> ID：13658865
> 
> 赞同：1
> 
> 时间：2012-12-01T11:15:29.217
> 
> 标签：php, phpmyadmin

是否有可能做到这一点？？

table1 有一个列名'id' table2 也有一个列名'id'。

因为 table2 接受来自选定复选框的多个值，我想将它与 table1 相关联。table1 包含名字 lastname 等，而 table2 包含从复选框中选择的值（选择了一个或多个）。

**表格1**

```
id  |   firstname   |  lastname

1   |   John        |   Conner 
```

**表2**

```
id   |  sports

1    |  basketball

2    |  volleyball

3    |  tennis 
```

*约翰从复选框中选择了 3 个值...*

我如何关联或使其第一个插入的数据将拥有 3 个值或将显示如下：

```
id  |  firstname   |   lastname   |   sports

1   |   John       |   Conner     |   basketball 
```

| 排球-------->

| 网球------------->

在此先感谢...对不起插图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:37:39.190

为此，您需要一个[多对多关系](http://en.wikipedia.org/wiki/Many-to-many_%28data_model%29)。

您将需要第三个表来保持其他两个之间的关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T12:25:41.680

您需要将用户与运动联系起来的第三张桌子。

```
connections
--------------------------
id | users_id  | sports_id
1  | 1         | 1
2  | 1         | 2
3  | 2         | 1
-------------------------- 
```

上表将用户#1 连接到运动#1 和#2，用户#2 连接到运动#1。（我从您的问题中重命名了表格，以使我的示例更具可读性：table1 -> users 和 table2 -> sports）

要使用此方法合并记录，您可以调用

```
SELECT users.firstname, users.lastname, sports.sports
FROM connections
JOIN users ON connections.users_id = users.id
JOIN sports ON connections.sports_id = sports.id 
```

这还可以让您显示已从列表中选择特定运动的用户。这样，您还可以一次编辑运动名称以同时影响所有结果。

*   [w3schools 上 JOIN、OUTER JOIN 和 LEFT JOIN](http://www.w3schools.com/sql/sql_join.asp)的好例子

# 使用 PHP/MySQLi 的工作示例

```
$db = new mysqli('localhost', 'user', 'pass', 'database'); // Database connection
if ($db->connect_errno > 0) { // Do we have a connection?
    die('Unable to connect to database [' . $db->connect_error . ']');
}
// Set the sql query
$sql = "SELECT users.firstname, users.lastname, sports.sports
    FROM connections
    JOIN users ON connections.users_id = users.id
    JOIN sports ON connections.sports_id = sports.id";

if (! ($result = $db->query($sql))) { // Run the query, get results to $result, if errors die
    die('There was an error running the query [' . $db->error . ']');
}
while (($row = $result->fetch_assoc())) { // Loop through the results and echo
    echo $row['firstname'] . ' ' . $row['lastname'] . ' likes ' . $row['sports'] . '<br />';
    // To see all $row variables in nice format we can do: echo '<pre>' . print_r($row, true) . '</pre>';
} 
```

我将 Kyle Reese 添加为用户 ID #2，因此我的查询结果的输出将是：

```
John Conner likes basketball
John Conner likes volleyball
Kyle Reese likes basketball 
```

*   [阅读更多关于 MySQLi (php.net)](http://fi1.php.net/manual/en/mysqli.quickstart.php)
*   [示例改编自 'MySQLi for Beginners' (codular.com)](http://codular.com/php-mysqli)

# javascript - 根据浏览器宽度让 fancybox 完成它的工作与否

> ID：13658868
> 
> 赞同：-1
> 
> 时间：2012-12-01T11:15:39.800
> 
> 标签：javascript, jquery, fancybox, width

我想每次检查窗口的宽度（即使在浏览器调整大小时）。这是我的功能：

```
function checkWidth() {
    var width =  $(window).width()
    if(width > 640){
        return true;
    }else{
        return false;
    }
            alert(width);
}
if(checkWidth()){
    $(function(){
        $("#fancylink").fancybox({
            'type': 'iframe',
            'width': 900,
            'height': 600,
            'autoScale': false
        }); 
    });
} 
```

但是宽度只检查一次。原因是我认为我的查询位于外侧，因此仅在页面加载时检查。如何重构我的代码？

**编辑：**

`fancybox`在具有 id 的元素上实例化`fancylink`。在这种情况下，它是具有特定 URL 的锚元素。如果有人单击该链接，该 URL 将在幻想框中以 iFrame 的形式打开。如果没有达到一定的宽度，我的目标是不打开花式框。相反，它应该充当普通链接并在新选项卡中打开。仅当宽度大于 640 像素时，它才应在花式框中作为 iFrame 打开。

所以我必须检查浏览器调整大小时的浏览器宽度，或者设备方向是否从纵向变为横向。`fancybox`如果在页面加载时达到宽度，我的代码将被实例化。但是，如果设备方向改变或浏览器调整大小，这将不再起作用。有解决方案吗？

我想我会保持原样，因为我不知道任何其他解决方案可以解决我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T11:19:11.377

您应该为调整窗口大小设置一个事件侦听器：

```
var windowWidth = window.innerWidth;

window.onresize = function() {
  windowWidth = window.innerWidth;
  // do something with the new width
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T11:28:32.270

如果您曾经将事件处理程序附加到窗口的调整大小事件，您可能已经注意到，虽然 Firefox 缓慢而明智地触发该事件，但 IE 和 Webkit 却完全瘫痪了。

```
(function($,sr){

  // debouncing function from John Hann
  // http://unscriptable.com/index.php/2009/03/20/debouncing-javascript-methods/
  var debounce = function (func, threshold, execAsap) {
      var timeout;

      return function debounced () {
          var obj = this, args = arguments;
          function delayed () {
              if (!execAsap)
                  func.apply(obj, args);
              timeout = null; 
          };

          if (timeout)
              clearTimeout(timeout);
          else if (execAsap)
              func.apply(obj, args);

          timeout = setTimeout(delayed, threshold || 100); 
      };
  }
    // smartresize 
    jQuery.fn[sr] = function(fn){  return fn ? this.bind('resize', debounce(fn)) : this.trigger(sr); };

})(jQuery,'smartresize');

// usage:
$(window).smartresize(function(){  
    checkWidth();
}); 
```

参考： http: [//paulirish.com/2009/throttled-smartresize-jquery-event-handler/](http://paulirish.com/2009/throttled-smartresize-jquery-event-handler/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T11:20:15.610

您必须将其绑定到窗口的`resize`事件。

```
$(window).on('resize', function() {
    checkWidth();
});
​ 
```

# php - 使用php插入数组数据

> ID：13658871
> 
> 赞同：0
> 
> 时间：2012-12-01T11:15:46.510
> 
> 标签：php, mysql, arrays

我正在使用表单将数据插入 SQL。

这是我的表格：

```
<form action="insert.php" method="POST">
    Name:<input type="text" name="firstname[]" />
</form> 
```

这是我的 PHP 代码：

```
<?php

$con = mysql_connect("localhost", "root", "root");
if (!$con) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db("test", $con);
while ($array = $result->fetch_assoc()) {
    $query = "INSERT INTO test(firstname) VALUES ('{$array['firstname']}')";
    $result = $database->query($query);
}
mysql_close($con);

?> 
```

它显示一个错误。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:23:32.013

要在表中插入 POST 数据，您不必先从数据库中获取它（* 这不会存在）。所以删除一些额外的代码：

```
<?php

$con = mysql_connect("localhost","root","root");

if (!$con) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db("test", $con);

$first_name = mysql_real_escape_string($_POST["firstname"]);

$query = "INSERT INTO test (firstname) VALUES ('$first_name')";
$result = mysql_query($query);
mysql_close($con);

?> 
```

并更新您的 HTML，以便该字段被命名`firstname`而不是`firstname[]`.

**编辑：** `mysql_*`不再建议使用函数。但我必须在你的问题要求范围内回答。

# spring - Spring Security：如何让用户打开任何页面的监听器？

> ID：13658875
> 
> 赞同：1
> 
> 时间：2012-12-01T11:15:58.343
> 
> 标签：spring, spring-security

当他尝试加载某些页面时，我需要随时处理用户的请求。在这个监听器中，我需要进行一些特殊检查，结果是关闭或不关闭用户的会话。我应该如何实现这个？看起来像是一项常见的任务，但我对 spring 和 spring 安全性很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T13:26:23.733

就像锂说的那样，过滤器应该适合处理给定的任务。Spring Security 使用它自己的[过滤器链](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/security-filter-chain.html)（链接指向 3.1.x 文档），您可以向其中添加自己的过滤器 - 请注意过滤器在链中的位置，[这里](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/ns-config.html#ns-custom-filters)有一些关于排序的注意事项。

根据您的要求，例如，这样的过滤器可以将用户重定向到另一个页面，而不是请求一个停止执行过滤器链的页面 - 再次：在过滤器链中的定位至关重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T13:13:50.590

我认为听众是观察行为但不影响行为的东西。既然你提到关闭用户的会话，这肯定会影响用户。因此，我认为您在谈论拦截器/过滤器而不是侦听器。

Spring 为这样的事情提供了一个很好的拦截器框架。

但是，由于您在谈论会话，因此这是 Spring Security 的领域。看起来这里有另一种处理会话管理的方法：[Is it possible to invalidate a spring security session?](https://stackoverflow.com/questions/8478188/is-it-possible-to-invalidate-a-spring-security-session)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T21:25:16.447

我认为你应该尝试拦截器。更多细节：

*   创建`HandlerInterceptor`类

> ```
> public class RequestInitializeInterceptor implements HandlerInterceptor {
> 
>   @Override
>   public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {
>         //Code to perform database checks
>   }
> } 
> ```

*   在 servlet-context.xml (ApplicationContext for Servlet) 文件中定义拦截器

> ```
> <mvc:interceptors>
>     <mvc:interceptor>   
>       <!-- Update path as per you requirement --!> 
>       <mvc:mapping path="/**"/>  
>          <bean class="com.abc.web.support.RequestInitializeInterceptor" />
>     </mvc:interceptor>
> </mvc:interceptors> 
> ```

# java - 使用 JAXB 将 XML 解析为 java 变量（bean）

> ID：13658876
> 
> 赞同：1
> 
> 时间：2012-12-01T11:16:03.763
> 
> 标签：java, xml, xml-parsing, jaxb

我正在使用我的应用程序处理服务器响应。我把这些东西作为字符串的响应。

```
<Body>
  <HotelRQ xmlns="urn:Hotel_Search">
<POS>
         <Source Username='USERNAME' Password='PASSWORD' PropertyID='PROPERTYID' />
</POS>
<AvailRequests>
     <AvailRequest>
      <StayDateRange Start='2009-09-05T12:00:00' End='2009-09-06T12:00:00'/>
      <RoomStays>
            <RoomStay> <!—for Room 1->
                <GuestCounts>
                    <GuestCount Count='2'/>
                </GuestCounts>
                <ChildCounts> 
                    <ChildAge Age='10'/>
                    <ChildAge Age='09'/>
                </ChildCounts>
            </RoomStay>

          </RoomStays>
          <SearchCriteria>
        <Criterion>
        <HotelRef HotelCityName='CITY' HotelName='' Area='' Attraction='' Rating=''/>
        <Sorting Preference='2'/>
                                             <ResponseType Compact="Y"/>
        </Criterion>
          </SearchCriteria>
        </AvailRequest>
      </AvailRequests>
    </HotelRQ>
</Body> 
```

我可以为此使用 jaxb 吗？

我正在使用这个文件来解析我得到的服务器响应。我需要做什么来使用 JAXB 解析它。我以字符串格式获取它。我如何直接映射到 java 类变量或 bean？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:31:19.607

你可以看到这个问题：[How do I load an org.w3c.dom.Document from XML in a string?](https://stackoverflow.com/questions/33262/how-do-i-load-an-org-w3c-dom-document-from-xml-in-a-string)

在将 XML 字符串加载到 DOM 文档中之后，您可以调用该方法`getElementsByTagName`来检索特定标签，然后对其进行迭代，`getNodeValue`用于提取标签内的值并`getAttribute`提取属性。

您不能在运行时轻松地将其映射到具有需求字段的 Java 类，但是您可以使用简单的方法将元素的解析和提取包装在一个类中，例如 `getRooms()`

# android - 在安卓中使用谷歌地图搜索地图

> ID：13658877
> 
> 赞同：1
> 
> 时间：2012-12-01T11:16:15.250
> 
> 标签：android, google-maps

每个人

我的项目有问题

这是我的 search.java 代码

```
import java.util.ArrayList;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.TextView;

public class Search extends Activity {

   TextView error,br2;
   Spinner namjal2;
   String i,returnString2,jln;
   String[] jalan = {"A.Yani", "Ambengan", "Anjasmoro","Baliwerti","Basuki Rahmat","Bintoro","Ciliwung","Citarum","Citandui","Darmo Daya","Darmokali","Dharmawangsa","Dinoyo","Embong Kemiri","Embong Malang"};

    /** Called when the activity is first created. */

   @Override

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.search);

        br2=(TextView)findViewById(R.id.berita2);
        namjal2=(Spinner)findViewById(R.id.namjalSearch);
        ArrayAdapter<String> aa = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, jalan);
        aa.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
         namjal2.setAdapter(aa);

   }

   public void clickHandler(View view){
    Intent a = null;
    switch (view.getId()){
    case R.id.find:
        jln = jalan[namjal2.getSelectedItemPosition()];
ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();

postParameters.add(new BasicNameValuePair("nama_jalan", jln));

/*            String valid = "1";*/      

        String response = null;

        try {

           response = CustomHttpClient.executeHttpPost("http://192.168.1.3/android/searchInfo.php", postParameters);

           String result = response.toString();  
           //parse json data

              try{
                      returnString2 = "";

                JSONArray jArray = new JSONArray(result);
                      for(int i=0;i<jArray.length();i++){

                              JSONObject json_data = jArray.getJSONObject(i);
                              Log.i("log_tag","id_kepadatan: "+json_data.getInt("id_kepadatan")+
                                      ", username: "+json_data.getString("username")+
                                      ", nama_jalan: "+json_data.getString("nama_jalan")+
                                      ", status: "+json_data.getString("status")+
                                      ", tanggal: "+json_data.getString("tanggal")+
                                      ", waktu: "+json_data.getString("waktu")+
                                      ", keterangan: "+json_data.getString("keterangan")
                              );
                              if(result.equals(null)){
                              //Get an output to the screen
                             returnString2 += "Data tidak ada";
                              }
                              else{
                              returnString2 += "\n" + json_data.getString("nama_jalan") + " mengalami "+ json_data.getString("status")+ " pada "+ json_data.getString("tanggal")+ " waktu "+ json_data.getString("waktu")+ " karena "+ json_data.getString("keterangan");
                              }
                      }
              }

              catch(JSONException e){
                      Log.e("log_tag", "Error parsing data "+e.toString());
              }

              try{

               br2.setText(returnString2);

              }

              catch(Exception e){

               Log.e("log_tag","Error in Display!" + e.toString());;          

              }   

         }

               catch (Exception e) {

          Log.e("log_tag","Error in http connection!!" + e.toString());     

         }
        break;

   case R.id.back:
        a = new Intent(this, Menu.class);
        startActivity(a);
        break;
}
   }

} 
```

这是我的 search.xml

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:fillViewport="true">
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"  
    android:background="#ffffff"  
   > 

  <LinearLayout
          xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="vertical"
          android:layout_width="match_parent"
          android:layout_height="wrap_content"
          android:padding="10dip"
          >
  <TextView android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:textColor="#372c24"
                android:text="PENCARIAN BERITA TERBARU"/>
    <TextView android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:textColor="#372c24"
                android:text="Masukkan Nama Jalan"/>

          <Spinner
                android:id="@+id/namjalSearch" 
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="16dip"
                android:layout_marginBottom="20dip"
                android:singleLine="true"/>
    <Button android:id="@+id/find" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="250dip"
                android:text="Find"
                android:onClick="clickHandler"/>
    <TextView
                android:id="@+id/berita2"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:textColor="#372c24"
                />  
    <RelativeLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">
          <TextView
                android:id="@+id/textBack" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textSize="25dip"
                android:layout_marginTop="130dip"
                android:layout_marginLeft="190dip"
                android:textColor="#372c24"
                android:text="BACK"/>
        <ImageButton
                android:id="@+id/back"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="125dip"
                android:layout_marginLeft="258dip"
                android:src="@drawable/back"
                android:background="@null" 
                android:onClick="clickHandler"/>
        <Button android:id="@+id/cariPeta" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="125dip"
                android:text="Cari Peta"
                android:onClick="clickHandler"/>
            </RelativeLayout>
    </LinearLayout>
</RelativeLayout>
</ScrollView> 
```

我的目标是当我单击“cariPeta”按钮时，它将显示选择的街道上的地图

例如，如果微调器指向街道的一个名称（例如：“A.Yani”街道）......那么，当我点击“cariPeta”按钮时，它将在谷歌中显示“A.Yani”街道的地图地图

我的问题是，我不知道我应该写什么代码......你能告诉我吗？我将不胜感激，因为这个项目对我来说非常重要

谢谢你.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:27:16.387

好的，让我指导你。您需要编写按钮的单击事件。单击该按钮 getSelectedIndex 的微调器（微调器 obj 中有一个现成的方法）。

接收到索引值后，从字符串数组中获取文本。

然后地图将出现在图片中。但是要处理地图，您需要一对纬度/经度。

使用 lat/long 您可以在地图上显示任何点。

# search - 搜索 StringGrid1 的列以查看它出现在 StringGrid2 中的哪一行 - Lazarus & Freepascal

> ID：13658881
> 
> 赞同：0
> 
> 时间：2012-12-01T11:17:25.697
> 
> 标签：search, freepascal, lazarus, tstringgrid

使用 Lazarus 1.1 和 Freepascal 2.7.1，我有两个 StringGrids - StringGrid1 和 StringGrid2。

StringGrid1 包含三列；其中第三列包含唯一值。

StringGrid2 也有三列，其中第三列也包含相同的唯一值，但它们是从另一个来源绘制的，它们的顺序不同，有些可能会丢失。

我需要查看 Grid1 的 Col3 并查找对应的唯一值出现在 Grid2 中的位置（哪一行）。所以我需要解析 StringGrid1 Col3 的所有行并说“对于找到的每个值，找到 StringGrid2 的 Column3 的相应行，它也包含该值并返回它，如果找到，或者告诉我它丢失如果没有找到，直到所有SG1 Col3 的行已被搜索”。

关于我如何做到这一点的任何想法？希望它是在我看来比实际更复杂的事情之一，但希望有人可以提供帮助（我确实找到了这个，但我认为这不是我所需要的？：[Delphi Pages Entry](http://www.delphipages.com/forum/showthread.php?t=87700)？我也找到了这个，但它没有完全解释如何应用它我在做什么，我不认为[维基条目](http://wiki.lazarus.freepascal.org/Grids_Reference_Page#property_Rows.5Bindex%3a_Integer.5D%3a_TStrings_read_GetRows_write_SetRows.3B)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:04:35.417

我的解决方案：

```
 VAR
        List_Found_Values,
        List_Not_Found        : TSTRINGLIST;
        i, I_Found            : INTEGER;
    BEGIN
      List_Found_Values   := TSTringList.Create;
      List_Not_Found      := TStringList.Create;

      FOR i := 0 TO StringGrid1.Count - 1 DO
      BEGIN
        I_Found := StringGrid2.Cols[2].IndexOf (StringGrid1.Cells[2, i]);
        IF I_Found > -1 THEN
          List_Found_Values.Add (StringGrid2.Cells[0, I_Found]+' + StringGrid2.Cells[1, I_Found]+' '+StringGrid2.Cells[2, I_Found])
        else
          List_Not_Founds.Add (StringGrid1.Cells[2, I_Found]);
      END;
      {use the tstringlist items List_Found and List_Not_Found etc. count to deside what to do }
    END; 
```

这只是直接写在盒子里..但应该给你一些解决方案的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:40:33.727

发现了两种方法：

```
for count1 := 0 to StringGrid1.RowCount - 1 do
  for count2 := 0 to StringGrid2.RowCount - 1 do
  begin
    if StringGrid1.Cells[3, count1] = StringGrid2.Cells[3, count2] then
    begin
      ShowMessage(StringGrid1.Cells[3, count1] + ' Found In Row ' + IntToStr(count2));
      Break;
    end;
  end; 
```

另一种效率较低但仍然有用的方法使用：

```
for i := 0 to SL.Count - 1 do 
begin
  ShowMessage(SG.IndexOf(SL.Strings[i])): 
  // (SG being the StringGrid and SL being a StringList)
end; 
```

或者

```
ShowMessage(SG.IndexOf('Text To Search For')): 
```

# php - 想要使用 php 将带有格式和网格的完整 html 表格数据导出到 excel 的单个单元格

> ID：13658884
> 
> 赞同：2
> 
> 时间：2012-12-01T11:17:59.747
> 
> 标签：php, excel

这是我的第一篇文章。

我想将我的 html 表格数据导出到 Excel 的单个单元格。

如果我使用表格标签，它会将输出数据抛出到新的行或单元格。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:36:15.087

只需将以下几行放在页面顶部：

```
header("Content-Type: application/vnd.ms-excel");
header("Content-Disposition: attachment;filename=myfile.xls");
header('Pragma: no-cache'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:07:33.153

所以在挣扎了3天之后，我自己找到了答案。

我使用 gd 库函数来创建像表格一样的大图像，并在其中放置较小的框（带边框），从而产生表格单元格的效果。

我使用 PHP-Excel 2007 在不同的不同单元格中刷新图像，例如 A1,B1,C1 。

所以，谢谢大家。

# javascript - 使用 xmlhttprequest 在服务器上保存 blob 音频文件

> ID：13658888
> 
> 赞同：1
> 
> 时间：2012-12-01T11:18:32.150
> 
> 标签：javascript, xmlhttprequest, blob

我正在开发一个音频网络应用程序，您可以在其中播放音乐并自己录制。我正在使用记录器插件，并且正在尝试将记录的内容保存在服务器上的文件夹中。我通过这个 javascript 代码从插件中得到一个 blob 文件：

```
recorder.exportWAV(function(blob) {
        var xhr = new XMLHttpRequest();
        var url = '../../audio/recordings/test.wav';
        xhr.open('POST',url,true);
        xhr.onload = function(e) {
            if (this.status == 200) {
              console.log(this.responseText);
            }
          };
        xhr.send(blob); 
        },'audio/wav'); 
```

我以前从未使用过这个，所以我不确定我的代码是否正确。但我没有收到任何错误，我的文件只是没有保存。我一直在网上搜索这个，我发现很多人使用 php 文件作为 url。为什么？他们使用的是什么 php 文件？

谢谢！

# c# - 从文本中读取第二行

> ID：13658889
> 
> 赞同：3
> 
> 时间：2012-12-01T11:18:32.717
> 
> 标签：c#, windows-8

我如何阅读 Visual Studio 2012 C# 中的第二行文本

```
 the txt file

         user123
         **12345**
         asdfd 
```

我想在一个 button1_click 中获得第二行并将其显示给 textblock2

我确实尝试从这里学习 [如何读取文本文件中的指定行？](https://stackoverflow.com/questions/1262965/c-how-do-i-read-a-specified-line-in-a-text-file)

和这里 [如何跳过第一行并从 C# 中的第二行开始读取文件](https://stackoverflow.com/questions/5618740/how-to-skip-first-line-and-start-reading-file-from-second-line-in-c-sharp)

但是这些都不起作用，因为它无法在我的代码中应用

有什么帮助吗？

==================================================== =============================== 很抱歉让大家感到困惑，实际上我真的缺乏编程经验，我几乎不知道如何使用现在
我在windows8中使用vs2012，这是否意味着我在winrt中编码？

顺便说一句，我感谢您的所有帮助并成功地将答案应用于我的代码这是实际代码

```
 var file = await ApplicationData.Current.LocalFolder.GetFileAsync(tb1.Text+".txt");
        var line = await FileIO.ReadLinesAsync(file);
        if (tb2.Text == line[2])
        {
            tb3.Text = (line[1]);
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T11:29:03.703

```
var desiredText = File.ReadLines("C:\myfile.txt").ElementAt(1); 
```

[File.ReadLines()](http://msdn.microsoft.com/en-us/library/s2tte0y1.aspx)返回文件中行的 String[]。第二行的索引是 1。看[这个](http://msdn.microsoft.com/en-us/library/dd383503.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T11:39:32.847

尝试

```
var desiredText = File.ReadLines("C:\myfile.txt");
textbox1.text = desiredText[1]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-17T11:17:35.703

只需在开始捕获文件内容之前调用 .ReadLine() 即可。

从本质上讲，这将使读者跳过文件的第一行，只看第二行和它后面的所有行。

```
// Try this to take the second line.
string line;
using (var file_read = new StreamReader(your_file))
{
    file_read.ReadLine(); 
    line = file_read.ReadLine();
}
textBox1.Text = line.ToString(); 
```

# javascript - ClearTimeout 不能很好地工作（可能是在第一个计时器触发之前清除时）

> ID：13658891
> 
> 赞同：1
> 
> 时间：2012-12-01T11:18:43.090
> 
> 标签：javascript, jquery, settimeout

我想在每个花费超过 300 毫秒的 ajax 调用上为 body 元素添加一个“加载”类。所以我将以下脚本添加到我的 common.js 文件中：

```
$(document).ready(function ()
{
    var timer;
    $("body").on({
        ajaxStart: function ()
        {
            var body = $(this)
            var timer = setTimeout(function ()
            {
                body.addClass("loading");
            }, 300)
        },
        ajaxStop: function ()
        {
            $(this).removeClass("loading");
            clearTimeout(timer);
        }
    });
}); 
```

现在，如果我以至少 1 秒的时间进行 ajax 调用，这将起作用。当它们立即加载时，加载类保留在 body 元素上。

我怀疑第一个 ajax 调用在 300 毫秒到期之前结束，它要求删除类并清除计时器，假设这需要 10 毫秒，但然后计时器在 290 毫秒后触发......

我想知道我该如何测试？和天气我做错了什么来完成上述任务。

PS 我正在使用 ASP.NET MVC。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T11:19:54.920

您正在重新声明变量，失去了先前声明的变量的更高范围：

```
$(document).ready(function () {
    var timer;
    $(document).on({
        ajaxStart: function () {
            var body = $(document.body);
            timer = setTimeout(function () { //don't use the "var" keyword
                body.addClass("loading");
            }, 300)
        },
        ajaxStop: function () {
            clearTimeout(timer);
            $(this).removeClass("loading");
        }
    });
}); 
```

# jquery - 滚动上的固定标题在 ie8 中不起作用

> ID：13658893
> 
> 赞同：5
> 
> 时间：2012-12-01T11:19:06.680
> 
> 标签：jquery, jquery-plugins, jquery-selectors

当用户向下滚动标题时，我已经实现了一个用于修复标题的 jquery 将获得固定位置。但它适用于除 ie8 之外的所有浏览器。任何人都可以提出正确的方法。

```
$(document).ready(function()
{
    $(document).scroll(function()
    {
        var window_y = $(window).scrollTop();
        var header_h = $('.header').height();
        if(window_y > header_h)
        {
            $(".header").addClass('fixed');
        }
        else
        {
            $(".header").removeClass('fixed');
        }
    });
}); 
```

工作参考在[这里。](http://jsfiddle.net/2THyB/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:41:49.050

试试这个，这会很好，或者你也可以在不改变标题的情况下给出固定高度的标题请尝试第一个控制台

```
$(window).scroll(function () {
    var header_h = $('.header').height();
    //console.log(header_h);
    if ($(this).scrollTop() > header_h) 
    {
        $(".header").addClass('fixed');
    } 
    else 
    {
        $(".header").removeClass('fixed');
    }
}); 
```

如果您在尝试此操作时遇到任何问题，请告诉我

# ubuntu-12.04 - mysqld的问题

> ID：13658896
> 
> 赞同：2
> 
> 时间：2012-12-01T11:19:31.133
> 
> 标签：ubuntu-12.04

我在家里的一台电脑上运行 Ubuntu 服务器 12.04，因为它是一台上网本，所以没有太多的性能可以挤出来，但我仍然想知道我从 /usr/sbin/ 看到的内存使用情况mysqld。

# function - 函数文件的多个输出

> ID：13658898
> 
> 赞同：0
> 
> 时间：2012-12-01T11:19:40.683
> 
> 标签：function, matlab, output

如何通过运行函数文件获得多个输出。我编写了一个函数文件，其中包含一组代码来计算 3 个方程，因为输入图像相同（其大小为 [4265,12789,7]）和连接方程。

我需要与每个方程的输入大小相同的输出图像 (.tif)。写在函数文件中的 3 个方程的 3 个输出。有没有办法做到这一点而不将每个方程分成不同的函数文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T11:23:13.417

那是声明的约定：

```
function [y1,...,yN] = myfun(x1,...,xM) 
```

这是一个[例子](http://www.mathworks.com/help/matlab/ref/function.html#btexm3w)：

```
function [y1,y2] = average_and_sum(x)
if ~isvector(x)
    error('Input must be a vector')
end
y1 = sum(x)/length(x)
y2 = sum(x) 
```

# java - 如何在 Fedora 上使用 netbeans 7.2 从 java 项目中的文件读取输入？

> ID：13658905
> 
> 赞同：3
> 
> 时间：2012-12-01T11:20:13.327
> 
> 标签：java, netbeans, fedora, file-io, netbeans-7.2

该文件是目录中的aa.txt`/home/user` 我写的代码是

```
input=new FileInputStream("//home//user//aa.txt"); 
```

但程序无法打开文件。当我在 Windows 上运行它时，它的工作原理是程序正确读取 Fedora 中路径的格式是什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:33:51.747

由于`\`用作转义字符（例如`\n`= 换行符和= 制表符） ，因此在将此字符放入字符串中时，`\t`我们需要写成`\\`单个字符。`\`

正斜杠不存在此问题`/` 对于 linux 目录，使用正斜杠`/`；windows 使用反斜杠。编写独立于操作系统的代码可能会很痛苦，但这不是问题。只需在处理文件时使用正斜杠，Java 就会自动为您将其转换为正确的操作系统特定格式。

例如`C:/Users/Owner/Documents`变成`C:\Users\Owner\Documents`在窗户上。或者你可以写`"C:\\Users\\Owner\\Documents"`，但简单的正斜杠格式看起来更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T11:25:07.747

您不必转义`/`（斜杠）字符。

所以你基本上需要这个：

```
input=new FileInputStream("/home/user/aa.txt"); 
```

但是，使用它会更明智[`File.separator`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#separator)：

```
input=new FileInputStream(File.separator+"home"+File.separator+"user"+File.separator+"aa.txt"); 
```

# java - 这是对 ActionBar 的好用吗？

> ID：13658908
> 
> 赞同：2
> 
> 时间：2012-12-01T11:20:36.157
> 
> 标签：java, android, actionbarsherlock

所以我刚开始尝试ActionBars，因为我想支持Honeycomb 之前的设备，所以我决定选择ActionBar Sherlock。我扫描了样品并想尝试一下。基本上我想要的是一个通用的 ActionBar，它应该对所有活动都具有相同的功能。我只是使用 ActionBar 本身来浏览不同的活动。我很快就破解了一些东西，但不知何故感觉“肮脏”，有人可以看看并提出更好的实施方案或指出我可能正在做的任何不良做法吗？

我的主要父活动，所有其他活动都继承：

```
package com.example.abstest;

import android.app.ActionBar;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.os.Debug;
import android.widget.ArrayAdapter;

import com.actionbarsherlock.app.ActionBar.OnNavigationListener;
import com.actionbarsherlock.app.SherlockActivity;

public class ActionBarActivity extends SherlockActivity implements OnNavigationListener {

    private String[] mItems = {"First", "Second", "Third"};
    protected int mCurrentItem;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Context context = getSupportActionBar().getThemedContext();
        ArrayAdapter<CharSequence> adapter = new ArrayAdapter<CharSequence>(
                context, R.layout.sherlock_spinner_item, mItems);
        adapter.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item);

        getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
        getSupportActionBar().setListNavigationCallbacks(adapter, this);
    }

    @Override
    public boolean onNavigationItemSelected(int itemPosition, long itemId) {

        if(mCurrentItem != itemPosition) {
            Intent intent = null;

            switch(itemPosition) {

            case 0:
                intent = new Intent(this, FirstActivity.class);
                break;

            case 1:
                intent = new Intent(this, SecondActivity.class);
                break;

            case 2:
                intent = new Intent(this, ThirdActivity.class);
                break;

            }

            startActivity(intent);
        }

        return true;
    }

} 
```

另外，我有三种类型的活动，它们有不同的布局：

```
package com.example.abstest;

import android.os.Bundle;

public class FirstActivity extends ActionBarActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.first);

        mCurrentItem = 0;
        getSupportActionBar().setSelectedNavigationItem(mCurrentItem);
    }

} 
```

基本上，我使用 ActionBar 在其中 3 种类型的活动之间切换。有什么更好的实施建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T08:51:11.903

这是您方法的替代方法。使用 ViewPager 和选项卡

```
public class ActivityMain extends SherlockFragmentActivity {
    /**
     * PRIVATE ATTRIBUTES
     */
    private static final String TAG                             = ActivityMain.class.getSimpleName();
    // ihm
    private ViewPager           _viewPager;
    private TabsAdapter         _tabsAdapter;
    private LayoutInflater      _inflater;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //
        // view pager
        _viewPager = new ViewPager(this);
        _viewPager.setId(R.id.pager);
        _viewPager.setOffscreenPageLimit(10);

        setContentView(_viewPager);
        _inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        //
        // action bar
        ActionBar bar = getSupportActionBar();
        bar.setTitle(R.string.app_name);
        bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        //
        // onglets
        _tabsAdapter = new TabsAdapter(this, _viewPager);
        _tabsAdapter.addTab(bar.newTab().setCustomView(getTabIndicator(getString(R.string.tle_tab_home), R.drawable.ic_menu_home)), FragmentAccueil.class, null);
        _tabsAdapter.addTab(bar.newTab().setCustomView(getTabIndicator(getString(R.string.tle_tab_directory), R.drawable.tab_list_icon)), ContainerFragmentAnnuaire.class, null);
        _tabsAdapter.addTab(bar.newTab().setCustomView(getTabIndicator(getString(R.string.tle_tab_favoris), android.R.drawable.btn_star)), FragmentFavoris.class, null);

        if (savedInstanceState == null) {
            // do stuff
        }
    }

    @Override
    public boolean onPrepareOptionsMenu(Menu menu) {
        menu.clear();
        switch ((int) _viewPager.getCurrentItem()) {
            case 0:
                getSupportMenuInflater().inflate(R.menu.empty_menu, menu);
                break;
            case 1:
                getSupportMenuInflater().inflate(R.menu.action_bar_main, menu);
                break;
            case 2:
                getSupportMenuInflater().inflate(R.menu.empty_menu, menu);
                break;
        }
        return super.onPrepareOptionsMenu(menu);
    }

public static class TabsAdapter extends FragmentPagerAdapter implements ActionBar.TabListener, ViewPager.OnPageChangeListener {
        private final Context               mContext;
        private final ActionBar             mActionBar;
        private final ViewPager             mViewPager;
        private final ArrayList<TabInfo>    mTabs   = new ArrayList<TabInfo>();

        static final class TabInfo {
            private final Class<?>  clss;
            private final Bundle    args;

            TabInfo(Class<?> _class, Bundle _args) {
                clss = _class;
                args = _args;
            }
        }

        public TabsAdapter(SherlockFragmentActivity activity, ViewPager pager) {
            super(activity.getSupportFragmentManager());
            mContext = activity;
            mActionBar = activity.getSupportActionBar();
            mViewPager = pager;
            mViewPager.setAdapter(this);
            mViewPager.setOnPageChangeListener(this);
        }

        public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args) {
            TabInfo info = new TabInfo(clss, args);
            tab.setTag(info);
            tab.setTabListener(this);
            mTabs.add(info);
            mActionBar.addTab(tab);
            notifyDataSetChanged();
        }

        @Override
        public int getCount() {
            return mTabs.size();
        }

        @Override
        public Fragment getItem(int position) {
            TabInfo info = mTabs.get(position);
            return Fragment.instantiate(mContext, info.clss.getName(), info.args);
        }

        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {

        }

        public void onPageSelected(int position) {
            mActionBar.setSelectedNavigationItem(position);
            ((SherlockFragmentActivity) mContext).supportInvalidateOptionsMenu();
        }

        public void onPageScrollStateChanged(int state) {
        }

        public void onTabSelected(Tab tab, FragmentTransaction ft) {
            //
            // force l'appel de onOptionMenuPrepared
            ((SherlockFragmentActivity) mContext).supportInvalidateOptionsMenu();
            Object tag = tab.getTag();
            for (int i = 0; i < mTabs.size(); i++) {
                if (mTabs.get(i) == tag) {
                    mViewPager.setCurrentItem(i);
                }
            }
        }

        public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        }

        public void onTabReselected(Tab tab, FragmentTransaction ft) {
        }
    }

    private View getTabIndicator(String text, int drawable) {
        View indicator = _inflater.inflate(R.layout.abs_tab, null);
        ((TextView) indicator.findViewById(R.id.tab_title)).setText(text);
        ((ImageView) indicator.findViewById(R.id.tab_icon)).setImageResource(drawable);
        return indicator;
    } 
```

# jquery - 使用 mousemove 获取元素

> ID：13658909
> 
> 赞同：5
> 
> 时间：2012-12-01T11:20:42.813
> 
> 标签：jquery, mousemove

是否可以使用 mousemove 获取当前元素？如果鼠标不在元素 x 或 y 上，我想获取鼠标要执行特定操作的元素。

举个例子 ：

```
$(document).mousemove(function(e)
    {
        if(e.xxxx.attr("id") == "elem")
            ...
    }); 
```

xxxx 是我正在寻找的东西，我希望它存在:)

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T11:21:24.970

如果您的意思是鼠标悬停的元素，是的，它可用作[`target`](http://api.jquery.com/event.target/)事件对象的属性。

```
$(document).mousemove(function(e)
{
    if (e.target.id == "elem") {
        // ...
    }
}); 
```

`target`是一个 DOM 元素，您可以`id`直接从其`id`属性（从属性中获取其值的反射属性）访问元素的 。如果您想用它做其他事情并想要访问 jQuery 函数，您可以使用`$(e.target)`它来获取 jQuery 包装器。

# php - 从 mysql 表中提取数据的 php 脚本的缓存选项

> ID：13658912
> 
> 赞同：0
> 
> 时间：2012-12-01T11:21:06.340
> 
> 标签：php, html, mysql, caching

我想知道使用什么函数来缓存提取的数据并仅在 15-30 分钟后刷新它。

这是将数据从 mysql 提取到网站的 php 脚本。

```
<?php
include('mysql_connection.php');

$c = mysqlConnect();

$locale = $_GET['locale'];
$last_bulletins_id = $_GET['bulletins_id'];

sendQuery ("set character_set_results='utf8'"); 
sendQuery ("set collation_connection='utf8_general_ci'"); 

if(strcmp($locale,"en") != 0)
$locale = "en";
$result = sendQuery("
SELECT bulletins.id, posted_date, message, name
FROM bulletins 
LEFT JOIN players ON (bulletins.player_id = players.user_id)
WHERE bulletins.id > ".$last_bulletins_id." and locale = '".$locale."' 
ORDER BY bulletins.id DESC 
LIMIT 10");
echo '<table width=\"100%\">';
while($row = mysql_fetch_array($result, MYSQL_NUM))
{
    echo '<tr><td width=\"100%\"><b>Date: </b>'.$row[1].'</td></tr>';
    echo '<tr><td width=\"100%\"><b>Author: </b>'.$row[3].'</td></tr>';
    echo '<tr><td width=\"100%\">'.nl2br($row[2]).'</td></tr>';
    echo '<tr><td width=\"100%\"><hr style="height: 2px; border: none; background: #515151;"></td></tr>';
}
echo '</table>';    

mysqlClose($c); 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:34:11.233

您应该将输出的数据写入缓存文件并检查从上次修改文件和加载缓存文件已经过去了多少时间，或者如果时间大于您设置的限制，则查询数据库并输出新结果。这些功能将派上用场：

[文件放置内容](http://php.net/manual/en/function.file-put-contents.php)

[文件时间](http://php.net/manual/en/function.filemtime.php)

[触碰](http://php.net/manual/en/function.touch.php)

[文件已存在](http://php.net/manual/en/function.file-exists.php)

# android - 我们可以在 android 2.3 API 中使用 content://contacts/people 来获取存储在手机中的联系人的详细信息吗

> ID：13658913
> 
> 赞同：2
> 
> 时间：2012-12-01T11:21:06.643
> 
> 标签：android, android-contentprovider, android-2.3-gingerbread

我正在尝试使用以下给定代码使用 Android API 2.3 显示联系人姓名和他的电话号码

* * *

```
String[] ContactList= {ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME,
                ContactsContract.CommonDataKinds.Phone.NUMBER,ContactsContract.CommonDataKinds.Phone._ID};  
        //Uri contact =ContactsContract.CommonDataKinds.Phone.CONTENT_URI;  
        Uri contact = Uri.parse("content://contacts/people");  
        Cursor mycursor = this.managedQuery(contact, ContactList, null, null, null);  
        int WidgetList[] = {R.id.t1,R.id.t2,R.id.t3};  
        ListAdapter adapter = new   SimpleCursorAdapter(this,R.layout.contactview,mycursor,ContactList,WidgetList);  
        ListView lv = this.getListView();  
        lv.setAdapter(adapter); 
```

* * *

## 当我尝试在模拟器中运行它时，出现以下错误

```
12-01 16:12:03.975: E/AndroidRuntime(403): FATAL EXCEPTION: main
12-01 16:12:03.975: E/AndroidRuntime(403): java.lang.RuntimeException: Unable to start activity ComponentInfo{demo.contentprovider/demo.contentprovider.FirstActivity}: java.lang.IllegalArgumentException: Invalid column data1
12-01 16:12:03.975: E/AndroidRuntime(403):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
12-01 16:12:03.975: E/AndroidRuntime(403):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
12-01 16:12:03.975: E/AndroidRuntime(403):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
12-01 16:12:03.975: E/AndroidRuntime(403):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
12-01 16:12:03.975: E/AndroidRuntime(403):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-01 16:12:03.975: E/AndroidRuntime(403):  at android.os.Looper.loop(Looper.java:123)
12-01 16:12:03.975: E/AndroidRuntime(403):  at android.app.ActivityThread.main(ActivityThread.java:3683)
12-01 16:12:03.975: E/AndroidRuntime(403):  at java.lang.reflect.Method.invokeNative(Native Method)
12-01 16:12:03.975: E/AndroidRuntime(403):  at java.lang.reflect.Method.invoke(Method.java:507)
12-01 16:12:03.975: E/AndroidRuntime(403):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-01 16:12:03.975: E/AndroidRuntime(403):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-01 16:12:03.975: E/AndroidRuntime(403):  at dalvik.system.NativeStart.main(Native Method)
12-01 16:12:03.975: E/AndroidRuntime(403): Caused by: java.lang.IllegalArgumentException: Invalid column data1
12-01 16:12:03.975: E/AndroidRuntime(403):  at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:144)
12-01 16:12:03.975: E/AndroidRuntime(403):  at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:114)
12-01 16:12:03.975: E/AndroidRuntime(403):  at android.content.ContentProviderProxy.bulkQueryInternal(ContentProviderNative.java:330)
12-01 16:12:03.975: E/AndroidRuntime(403):  at android.content.ContentProviderProxy.query(ContentProviderNative.java:366)
12-01 16:12:03.975: E/AndroidRuntime(403):  at android.content.ContentResolver.query(ContentResolver.java:262)
12-01 16:12:03.975: E/AndroidRuntime(403):  at android.app.Activity.managedQuery(Activity.java:1550)
12-01 16:12:03.975: E/AndroidRuntime(403):  at demo.contentprovider.FirstActivity.onCreate(FirstActivity.java:25)
12-01 16:12:03.975: E/AndroidRuntime(403):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-01 16:12:03.975: E/AndroidRuntime(403):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
12-01 16:12:03.975: E/AndroidRuntime(403):  ... 11 more 
```

但是，如果使用

```
Uri contact =ContactsContract.CommonDataKinds.Phone.CONTENT_URI; 
```

代替

```
Uri contact = Uri.parse("content://contacts/people"); 
```

它可以正常工作。
谁能帮助我为什么它不适用于上述选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:41:36.280

`Contacts.People`类已在`level 5`. 2.1(+) SDK 包含名为 ContactsContract 的联系人的新 contentHandler，查询现在移动到不同的位置，所以我确定 URI 也不同。

# objective-c - 平方值时的错误结果

> ID：13658917
> 
> 赞同：0
> 
> 时间：2012-12-01T11:21:30.287
> 
> 标签：objective-c, ios, xcode, math

为了使按钮的值平方`mainLabel`，我正在使用

```
- (IBAction)squarePressed:(id)sender
{

    NSString *mainLabelString = mainLabel.text;

    int mainLabelValue = [mainLabelString intValue];

    NSString *calculatedValue = [NSString stringWithFormat: @"%d", mainLabelValue*mainLabelValue];

    mainLabel.text = calculatedValue;

} 
```

没有显示错误，它适用于小数字，
例如，平方 720 的结果是正确的，518400，但如果我尝试平方该数字，而不是 268738560000，我得到 -1844379648。
为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T11:24:43.710

An`int`是有符号的 32 位数字。

518400 平方的结果不适合 32 位，所以计算溢出，这就是为什么你会看到大的负值。

尝试使用`long`64 位的 64 位，对于该数字应该足够了：

```
long mainLabelValue = [mainLabelString longLongValue]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-01T11:28:00.237

可能是一个 32 位的`int`数字，而 518400 的平方超过了 32 位所能表示的范围。其中一些在[何时使用 NSInteger 与 int](https://stackoverflow.com/questions/4445173/when-to-use-nsinteger-vs-int)中进行了解释。

你可以写

```
NSInteger mainLabelValue = [mainLabelString longValue]; // or long mainLabelValue...
NSString *calculatedValue = [NSString stringWithFormat: @"%ld", mainLabelValue*mainLabelValue]; 
```

NSInteger 在 iOS 中似乎是 64 位。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-01T11:27:08.833

您可能溢出了最大整数大小，因此是负开关。对于 32 位系统，此值为 2,147,483,647 (2^31 - 1)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T11:33:56.710

这是一个数字溢出，如果你想使用最高位数来避免溢出，请使用 long long。long double 也很好，但不是那么精确。

```
- (IBAction)squarePressed:(id)sender
{

    NSString *mainLabelString = mainLabel.text;

    long long mainLabelValue = [mainLabelString longLongValue];

    NSString *calculatedValue = [NSString stringWithFormat: @"%lld", mainLabelValue*mainLabelValue];

    mainLabel.text = calculatedValue;

} 
```

当然，如果您也以这种方式使用大数字，它可能会发生溢出，但它会发生在较高的值上，具体取决于从 int 到 long long int 的位差异。

# android - PA4AD：Chapter_9_Earthquake_Part_3

> ID：13658923
> 
> 赞同：0
> 
> 时间：2012-12-01T11:22:58.207
> 
> 标签：android, android-intent, android-alarms

我正在使用 Android JB 4.1.2 在我的三星 Galaxy S2 上运行您的示例应用程序。当我运行应用程序时，它运行良好并获得地震数据列表，搜索也正常工作。

但是，一旦我更改了首选项中的某些内容，例如将自动刷新设置为 false 等，然后尝试关闭应用程序，我就会收到错误消息。

```
Unfortunately, Earthquake has stopped 
```

来自 ADB Logcat 的消息如下所示。

```
11-30 16:04:30.103: ERROR/AndroidRuntime(4295): FATAL EXCEPTION: main
java.lang.RuntimeException: Failure delivering result o activity {com.paad.earthquake/com.paad.earthquake.Earthquake}: android.os.NetworkOnMainThreadException
at android.app.ActivityThread.deliverResults(ActivityThread.java:3267)
at android.app.ActivityThread.handleSendResult(ActivityThread.java:3310)
at android.app.ActivityThread.access$1100(ActivityThread.java:140)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1254)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4906)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
at dalvik.system.NativeStart.main(Native Method)
Caused by: android.os.NetworkOnMainThreadException
at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
at java.net.InetAddress.getAllByName(InetAddress.java:214)
at libcore.net.http.HttpConnection.<init>(HttpConnection.java:70)
at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:341)
at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
at libcore.net.http.HttpEngine.connect(HttpEngine.java:310)
at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
at libcore.net.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:486)
at com.paad.earthquake.EarthquakeListFragment.refreshEarthquakes(EarthquakeListFragment.java:90)
at com.paad.earthquake.Earthquake.onActivityResult(Earthquake.java:92)
at android.app.Activity.dispatchActivityResult(Activity.java:5192)
at android.app.ActivityThread.deliverResults(ActivityThread.java:3263)
... 11 more 
```

请告诉我如何解决这个错误。问候库拉姆·马吉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T08:12:27.260

您所做的仅适用于预蜂窝设备。您确实应该在不在主线程中的服务中执行此类任务。如果您想将 HTTP 代码保留在您的 EarthquakeListFragment 中，请添加此

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

如果您继续阅读本书，它将解释如何将此类任务放入服务中。

# windows-phone-7 - 如何以编程方式备份 和恢复 WP7 的 SMS？

> ID：13658924
> 
> 赞同：0
> 
> 时间：2012-12-01T11:23:05.923
> 
> 标签：windows-phone-7

有没有办法以编程方式访问存储在 Windows Phone 7 设备上的 SMS，使用 C# 希望备份和恢复存储的 SMS。

没有找到任何可用于 WP7 或 WP8 的 API。

请帮忙！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:32:51.450

[由于隐私问题（ http://msdn.microsoft.com/EN-US/library/hh220665(v=VS.105,d=hv.2).aspx](http://msdn.microsoft.com/EN-US/library/hh220665%28v=VS.105,d=hv.2%29.aspx)），无法访问用户的消息。

# python - 为什么我在尝试运行 Pyramid 项目时收到 DistributionNotFound 错误？

> ID：13658930
> 
> 赞同：12
> 
> 时间：2012-12-01T11:23:35.670
> 
> 标签：python, pyramid

**我安装在我的新 Windows 8 (x64) 中：**

*   python-2.7
*   pywin32-218.win32-py2.7
*   setuptools-0.6c11.win32-py2.7
*   和金字塔（通过easy_install）

我试图运行我的金字塔项目：

```
pserve I:\Projects\PyramidProject\development.ini 
```

并提出了 pkg_resources.DistributionNotFound(req) ：

![追溯](../Images/0afe136ca8bec4da73aa97175860faef.png)

```
 I:\Projects\MyProject>pserve development.ini Traceback (most recent
 call last):   File "C:\Python27\Scripts\pserve-script.py", line 9, in
 <module>
     load_entry_point('pyramid==1.4b1', 'console_scripts', 'pserve')()   File
 "C:\Python27\lib\site-packages\pyramid-1.4b1-py2.7.egg\pyramid\scripts\ps
 erve.py", line 50, in main
     return command.run()   File "C:\Python27\lib\site-packages\pyramid-1.4b1-py2.7.egg\pyramid\scripts\ps
 erve.py", line 301, in run
     relative_to=base, global_conf=vars)   File "C:\Python27\lib\site-packages\pyramid-1.4b1-py2.7.egg\pyramid\scripts\ps
 erve.py", line 332, in loadserver
     server_spec, name=name, relative_to=relative_to, **kw)   File "C:\Python27\lib\site-packages\pastedeploy-1.5.0-py2.7.egg\paste\deploy\l
 oadwsgi.py", line 255, in loadserver
     return loadobj(SERVER, uri, name=name, **kw)   File "C:\Python27\lib\site-packages\pastedeploy-1.5.0-py2.7.egg\paste\deploy\l
 oadwsgi.py", line 271, in loadobj
     global_conf=global_conf)   File "C:\Python27\lib\site-packages\pastedeploy-1.5.0-py2.7.egg\paste\deploy\l
 oadwsgi.py", line 296, in loadcontext
     global_conf=global_conf)   File "C:\Python27\lib\site-packages\pastedeploy-1.5.0-py2.7.egg\paste\deploy\l
 oadwsgi.py", line 320, in _loadconfig
     return loader.get_context(object_type, name, global_conf)   File "C:\Python27\lib\site-packages\pastedeploy-1.5.0-py2.7.egg\paste\deploy\l
 oadwsgi.py", line 454, in get_context
     section)   File "C:\Python27\lib\site-packages\pastedeploy-1.5.0-py2.7.egg\paste\deploy\l
 oadwsgi.py", line 476, in _context_from_use
     object_type, name=use, global_conf=global_conf)   File "C:\Python27\lib\site-packages\pastedeploy-1.5.0-py2.7.egg\paste\deploy\l
 oadwsgi.py", line 406, in get_context
     global_conf=global_conf)   File "C:\Python27\lib\site-packages\pastedeploy-1.5.0-py2.7.egg\paste\deploy\l
 oadwsgi.py", line 296, in loadcontext
     global_conf=global_conf)   File "C:\Python27\lib\site-packages\pastedeploy-1.5.0-py2.7.egg\paste\deploy\l
 oadwsgi.py", line 328, in _loadegg
     return loader.get_context(object_type, name, global_conf)   File "C:\Python27\lib\site-packages\pastedeploy-1.5.0-py2.7.egg\paste\deploy\l
 oadwsgi.py", line 620, in get_context
     object_type, name=name)   File "C:\Python27\lib\site-packages\pastedeploy-1.5.0-py2.7.egg\paste\deploy\l
 oadwsgi.py", line 640, in find_egg_entry_point
     pkg_resources.require(self.spec)   File "C:\Python27\lib\site-packages\distribute-0.6.32-py2.7.egg\pkg_resources.
 py", line 690, in require
     needed = self.resolve(parse_requirements(requirements))   File "C:\Python27\lib\site-packages\distribute-0.6.32-py2.7.egg\pkg_resources.
 py", line 588, in resolve
     raise DistributionNotFound(req) pkg_resources.DistributionNotFound: Paste 
```

我的开发.ini：

```
[app:MyProject]
use = egg:MyProject
pyramid.reload_all = true
pyramid.reload_templates = true
pyramid.reload_assets = true
pyramid.debug_all = false
pyramid.debug_authorization = false
pyramid.debug_notfound = false
pyramid.debug_routematch = false
pyramid.debug_templates = true
mako.directories = app:view
mako.module_directory = %(here)s/cache/templates/
#mako.cache_type = file
#mako.cache_enabled = False
#mako.cache_dir = %(here)s/cache/view/
#mako.cache_impl = beaker
#mako.cache_timeout = 60
mako.input_encoding = utf-8
mako.imports = from markupsafe import escape_silent
mako.default_filters = escape_silent
#mako.error_handler =
sqlalchemy.url = mysql://user:mypassword@mysql.mydomain.com/MyProject_dev?charset=utf8
sqlalchemy.pool_recycle = 3600
beaker.session.type = file
beaker.session.cookie_expires = True
beaker.session.cookie_domain = MyProject.pl
beaker.session.data_dir = %(here)s/data/sessions/data
beaker.session.lock_dir = %(here)s/data/sessions/lock
beaker.session.key = MyProject.pl
beaker.session.secret = 57b0d7ff4c665d87e3c3745c2abf519ca7d4082a
beaker.session.validate_key = 57b0d7ff
beaker.cache.enabled = True
beaker.cache.type = memory
beaker.cache.data_dir = %(here)s/cache/data
beaker.cache.lock_dir = %(here)s/cache/lock 
beaker.cache.regions = default_term, second_term, minute_term, hour_term, day_term, month_term, short_term, middle_term, long_term, 
beaker.cache.second_term.expire = 1
beaker.cache.minute_term.expire = 60
beaker.cache.hour_term.expire = 3600
beaker.cache.day_term.expire = 86400
beaker.cache.month_term.expire = 2678400
beaker.cache.default_term.expire = 60
beaker.cache.short_term.expire = 30
beaker.cache.middle_term.expire = 300
beaker.cache.long_term.expire = 86400
site.front.default_skin = MyProject
site.front.available_skins = default mobile MyProject
default_skin = MyProject
available_skins = default mobile MyProject

[filter:tm]
use = egg:repoze.tm2#tm
commit_veto = repoze.tm:default_commit_veto

[pipeline:main]
pipeline =
    egg:WebError#evalerror
    tm
    MyProject

[server:main]
use = egg:Paste#http
host = 127.0.0.1
port = 5000

# Begin logging configuration

[loggers]
keys = root, MyProject, sqlalchemy

[handlers]
keys = console

[formatters]
keys = generic

[logger_root]
level = INFO
handlers = console

[logger_MyProject]
level = DEBUG
handlers =
qualname = MyProject

[logger_sqlalchemy]
level = INFO
handlers =
qualname = sqlalchemy.engine
# "level = INFO" logs SQL queries.
# "level = DEBUG" logs SQL queries and results.
# "level = WARN" logs neither.  (Recommended for production systems.)

[handler_console]
class = StreamHandler
args = (sys.stderr,)
level = NOTSET
formatter = generic

[formatter_generic]
format = %(asctime)s %(levelname)-5.5s [%(name)s][%(threadName)s] %(message)s

# End logging configuration 
```

你有什么想法，我做错了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-02T02:07:43.763

你需要在你的 virtualenv`easy_install paste`中运行。`python setup.py develop`

附带说明，您使用的是非常旧版本的金字塔。我知道这是因为您的项目使用 weberror、repoze.tm2 和粘贴。如果您有时间，我建议您考虑升级到一些最佳实践。

# php - PHP 等价于 list 并在 javascript 中爆炸

> ID：13658932
> 
> 赞同：5
> 
> 时间：2012-12-01T11:23:47.917
> 
> 标签：php, javascript, list, explode

> **可能重复：**
> [Javascript 等效于 PHP 的 list()](https://stackoverflow.com/questions/1954426/javascript-equivalent-of-phps-list)

我想要这条线的等价物，但在 JavaScript 中：

```
<?php list($Id, $Iduser, $Idmany) = explode("," , $IdALL); ?> 
```

在哪里 ：

```
$IdALL = '1, 2, 3'; 
```

有什么方法可以用 JavaScript 做到这一点，并且所有现代浏览器都可以支持吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T11:31:45.687

```
var values = "1, 2, 3".split(", ");
var keys = ["Id", "Iduser", "Idmany"];
var final = {};

for(var i = 0; i < values.length; i++){
    final[keys[i]] = values[i];
} 
```

当然，以牺牲可读性为代价，您可以在 for 语句中执行所有这些操作：

```
for(var i = 0, values = "1, 2, 3".split(", "), keys = ["Id", "Iduser", "Idmany"], final = {}; i < values.length; i++){
    final[keys[i]] = values[i];
} 
```

然后可以按如下方式访问变量：

```
alert(final.Id);
alert(final.Iduser);
alert(final.Idmany); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T11:27:18.557

不，JavaScript 目前没有等效的[`list`](http://uk1.php.net/manual/en/function.list.php)构造（称为“解构赋值”）。您必须单独分配变量。[ES.next 很可能有这方面的东西](http://wiki.ecmascript.org/doku.php?id=harmony:destructuring)，但不是当前的 ES5（或旧浏览器上的 ES3）。

所以你能做的最好的事情就是有点尴尬：

```
var idAll = "1, 2, 3";
var parts = idAll.split(/\s*,\s*/);
var id = parts[0];
var idUser = parts[1];
var idMany = parts[2]; 
```

请注意，ID 将是字符串；如果您希望它们是数字，则必须解析它们（`parseInt`是一种选择，将 a`+`放在等前面`parts[0]`是另一种选择；[此答案](https://stackoverflow.com/questions/32202726/using-division-operator-on-strings-in-javascript/32203164#32203164)将详细说明）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T11:31:28.107

请查看网站： http: [//phpjs.org/functions/](http://phpjs.org/functions/)

在这里，您想要 php 到 js 中可用的所有功能。

# android - 无法从 android 项目模拟器调用 Web 服务方法

> ID：13658939
> 
> 赞同：6
> 
> 时间：2012-12-01T11:25:14.547
> 
> 标签：android, eclipse, web-services, jakarta-ee

我根据本[教程创建了一个 Web 服务](http://www.youtube.com/watch?v=o2Vjs8ylmFM)

我可以运行该服务并调用它的方法，但我想从一个 android java 项目中调用它们。我将 ServiceClient 项目导出为 jar，并将其添加到新项目构建路径中。当我从模拟器运行 android 项目并尝试调用 Web 服务命令时，我得到一个 java.lang.NoClassDefFoundError。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T18:47:22.333

如果 Payeli 的解决方案不起作用，您可以右键单击 jar 并将其添加到使用`Build Path -> Add to build Path`. 这会将您的 jar 文件包含到构建路径中。

另一种解决方案是右键单击项目并选择`Android Tools->Fix project properties`. 此选项将告诉您构建路径问题的最佳解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T02:04:54.443

您是否在与 src 目录相同级别为项目创建了“libs”目录，并将 jar 文件复制到那里？如果是，那么 payeli 的解决方案应该有效。否则，在 Open Oder and Export 选项卡中，检查您创建的特定 jar 文件。然后它应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T03:17:46.313

首先在您的项目中添加您的 jar 文件。然后右键单击该 Jar 文件，然后选择 Build Path > Add to Build Path，这将在您的项目中创建一个名为“Referenced Libraries”的文件夹。

# mysql - 在 SQL 中删除字符串的一部分

> ID：13658941
> 
> 赞同：2
> 
> 时间：2012-12-01T11:25:22.960
> 
> 标签：mysql, sql, trim, cut

我有一个包含此类条目的字段的表：

```
"text text text"
"text text - Cap. 125"
"text - Cap. 1" 
```

我需要剪掉`" - Cap. (Number)"`。

正如您所看到的，在某些情况下没有`"Cap."`，而在其他情况下，该数字超过 1 位。

我尝试使用`REPLACE()`and `TRIM()`，但`REPLACE()`仅适用于数字，`" - cap."`但不适用于数字；并`TRIM()`剪切特定数量的字符。

另外，我认为我需要`WHERE field LIKE '% - CAP.%'`验证我是否更改了正确的字段，因为并非所有字段都需要更改。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T11:43:24.003

```
SELECT CASE
         WHEN myField RLIKE ' - Cap\\. [[:digit:]]{1,3}$' THEN
           LEFT(myField, 1
             + CHAR_LENGTH(myField)
             - CHAR_LENGTH(' - Cap. ')
             - LOCATE(REVERSE(' - Cap. '), REVERSE(myField))
           )
         ELSE myField
       END
FROM   myTable 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/ad184/3/0)上查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T11:31:34.567

```
SELECT SUBSTRING_INDEX(column_name, 'Cap', 1) FROM table ; // for left
SELECT SUBSTRING_INDEX(column_name, 'Cap', -1) FROM table; // for right 
```

# c# - 使用 OOP 主体正确的构造函数重载？

> ID：13658944
> 
> 赞同：0
> 
> 时间：2012-12-01T11:26:06.797
> 
> 标签：c#, oop, parameters, xna, overloading

我有一个我正在开发的游戏，我将粒子效果作为一个单独的类

```
 public class Explosion 
    {
         private List<Particle> Particles; 
         private const int particle_Count = 100; 
         public Explosion(Vector2 location) { 
               Random random = new Random(); 
               Particles = new List<Particle>(particle_Count);
               for(int i = 0; i < particle_Count; i++)
                   Particles.add(new Particle(location, new Vector2(random.NextDouble() * i,
                       random.NextDouble() * i)); 
         }
    } 
```

现在，我的游戏中需要有几种不同类型的爆炸，但它们的变化很小（实际上是一个 Vector2 对象之间的区别（它只是一个存储两个坐标和一些辅助函数的对象）不熟悉 XNA))

我的问题是，因为 Random 只能在我进入构造函数后才能访问，我如何对这种爆炸进行变化？

我应该为每次爆炸创建一个新课程吗？（这似乎没有必要，因为爆炸之间的变化很小）

我是否应该重载函数以为每个不同的爆炸采用单独的参数（可能是 int）？

我是否应该通过构造函数直接传递 Vector2 （这对我来说似乎会破坏良好的 OOP 原则）

还是有另一种方法可以解决这个问题，我只是没有看到。

任何帮助将不胜感激，我喜欢第一次做正确的事情，这是我申请的重要组成部分。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T12:01:07.400

由于每个变体之间只有一个参数差异，因此最好的方法是将另一个参数传递给构造函数（如您所述）。只需传递您需要的最少信息；如果你愿意，可以给它一个默认值，这样就不需要了：

```
public Explosion(Vector2 location, int velocity = 1) { 
} 
```

如果它是一个复杂的对象，而不仅仅是一个 int，那么考虑制作某种辅助方法：

```
public class Explosion
    public Explosion(Vector2 location, Velocity velocity) { 
    }
}

public class Velocity {
    public static Velocity Get(int a, int b) {
        // construct the velocity as needed
    }
} 
```

这样调用 Explosion 的构造函数就不必太麻烦了：

```
var explosion = new Explosion(vectorLocation, Velocity.Get(5, 10)); 
```

# wordpress - Wordpress 与 post-views 插件冲突

> ID：13658947
> 
> 赞同：2
> 
> 时间：2012-12-01T11:26:27.713
> 
> 标签：wordpress

当我将此代码添加到我的 index.php 以按视图订购 psot 时，我正面临一个无限滚动的重复帖子

```
<?php query_posts('v_sortby=views&amp;v_orderby=desc') ?> 
```

帖子一再重复

这是插件链接

[http://wordpress.org/extend/plugins/wp-postviews](http://wordpress.org/extend/plugins/wp-postviews)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:29:06.060

我遇到了无限滚动的此类问题，所以经过一番研究，我创建了这段代码

```
<?php global $query_string; query_posts($query_string . "&v_sortby=views&;v_orderby=desc"); ?> 
```

这将解决无限滚动的问题

# php - PHP HTMLTidy 类使用

> ID：13658949
> 
> 赞同：-1
> 
> 时间：2012-12-01T11:26:37.260
> 
> 标签：php, html, html-parsing, htmltidy

如何使用[这个 HTMLTidy 类](http://code.google.com/p/htmltidy/)？

示例：我想美化`$input`包含 HTML 的变量。我试过这个：

```
$input = "<html><head><title>The Last Page of the Internet</title></head><body><center><h1><b><u>Attention:</u></b></h1><p><br><strong>You have reached the very last page of the Internet.</strong></p><p><br><strong>We hope you have enjoyed your browsing.</strong></p><p><br><strong>Now turn off your computer and go outside.</strong></p></center></body></html>";
include ('class.htmltidy.php');
$html = htmltidy($input);
echo $html; 
```

但这行不通。

HTMLTidy 类的源代码可以在[这里](http://htmltidy.googlecode.com/svn/trunk/class.htmltidy.php)找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T18:24:58.987

你说你想“美化”输入的html。没有办法知道这意味着什么。也就是说，我真的不能确切地说出那个 html tidy 类应该做什么。它有一种方法，“解析”。我试过：

```
$input = "<html><head><title>The Last Page of the Internet</title></head><body><center><h1><b><u>Attention:</u></b></h1><p><br><strong>You have reached the very last page of the Internet.</strong></p><p><br><strong>We hope you have enjoyed your browsing.</strong></p><p><br><strong>Now turn off your computer and go outside.</strong></p></center></body></html>";

$tidy = new htmltidy();
$tidy->parse($input);
print_r($tidy->html); 
```

但收到了几个关于未定义索引的 PHP 通知，并且 html 数组为空。再说一次，我不知道你想做什么。不管是什么，我都会放弃这个 htmltidy 类，因为它似乎包含错误。

现在，如果你想格式化 html 字符串，我推荐[php tidy extension](http://php.net/manual/en/book.tidy.php)。以下是如何使用缩进格式化 html 字符串：

```
$tidy = tidy_parse_string($input, array(
    'output-html' => true,
    'indent' => true,
));
$tidy->cleanRepair(); //if you might have markup errors
echo $tidy; 
```

有关更多信息，请参阅[tidy_parse_string 文档](http://php.net/manual/en/tidy.parsestring.php)。

# php - 如何将 $ 符号用于字符串以使其成为变量？

> ID：13658951
> 
> 赞同：1
> 
> 时间：2012-12-01T11:26:53.117
> 
> 标签：php

我制作了一个小的静态测试脚本来解释我想要做什么。

```
<?php
$test = "hello";
$demo = "php";
$x = array("hello"=>"world","php"=>"script");
echo $x[$test]."<br />";
echo $x[$demo];
?> 
```

输出：世界脚本

当值来自数据库时，我如何动态获得相同的输出。

```
$result = mysql_query("SELECT font FROM stone");

while($row = mysql_fetch_array($result))
  {
  echo $x[$row['font']]."<br/>";// values of $row['font'] are 'test' and demo
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T12:06:08.090

```
$vars=get_defined_vars();
$result = mysql_query("SELECT font FROM stone");
while($row = mysql_fetch_array($result))
{
  $var=$vars[$row['font']];
  echo $x[$var]."<br/>";
}
//just for funny :)
//only :| 
```

# sql - 使用 Oracle PL/SQL 函数将对象序列作为参数传递

> ID：13658952
> 
> 赞同：0
> 
> 时间：2012-12-01T11:26:53.760
> 
> 标签：sql, oracle, plsql, oracle11g

我想编写一个将 2 个参数作为参数的 PL/SQL 函数。第一个参数是一个整数，第二个参数是一个 Oracle 序列对象。

此函数返回一个十进制值，该值`param1.param2`必须`param2`是作为参数的序列对象的下一个值。

示例：函数`myFc(15,objSq)`。假设`objSq.nextVal`是 33 那么返回的十进制值一定是 15.33

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T12:22:32.767

这似乎有点奇怪。您应该始终知道要使用的序列，并且请注意序列*永远不会*生成[无间隙的数字序列](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:530735152441)，即完美的 1、2 ..n。

由于您不知道对象名称，因此您必须使用[execute immediate](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/executeimmediate_statement.htm#LNPLS01317)，这使您能够使用它。您可能还应该使用它[`dbms_assert`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_assert.htm#BABDDEEF)来防止 SQL 注入。

您的问题的答案如下所示：

```
create or replace my_function ( 
                Pnumber in number
              , Psequence in varchar2 ) return number is

   l_nextval number;

begin

   execute immediate '
       select ' || dbms_assert.sql_object_name(Psequence) || '.nextval
         from dual'
         into l_nextval;

   -- Who knows how many decimal places you might need?
   return to_number(Pnumber || '.' || l_nextval, '99.9999');

end;
/ 
```

**但是**，我不明白您为什么要这样做。您显然知道您尝试使用的序列的名称。您可以简单地在调用代码中使用此信息，而不是使用函数：

```
to_number(15 || '.' || sequence_name.nextval, '99.9999') 
```

最后，正如大卫在评论中所说，这是一个非常奇怪的要求。你绝对确定这是你想做的吗？也许通过解释你*为什么*这样做，有人可能会提出更好的建议。

# emacs - bzr 的 cedet 无法自动加载，似乎路径错误

> ID：13658953
> 
> 赞同：0
> 
> 时间：2012-12-01T11:26:53.890
> 
> 标签：emacs, cedet

输出如下：

```
Debugger entered--Lisp error: (file-error "Opening output file" "no such file or directory" "/users/name/files/emacs-23.4/lisp")
  write-region(";;; lisp --- automatically extracted autoloads\n;;\n;;; Code:\n\n\f\n(provide 'lisp)\n;; Local Variables:\n;; version-control: never\n;; no-byte-compile: t\n;; no-update-autoloads: t\n;; coding: utf-8\n;; End:\n;;; lisp ends here\n" nil "/users/name/files/emacs-23.4/lisp")
  autoload-ensure-default-file("/users/name/files/emacs-23.4/lisp")
  update-directory-autoloads()
  apply(update-directory-autoloads nil)
  batch-update-autoloads()
  command-line-1(("--eval" "(setq debug-on-error t)" "-l" "../../../cedet-remove-builtin.el" "-L" "../" "--eval" "(progn (require (quote cedet-compat)) (require (quote mode-local)))" "-L" "../../eieio/" "-L" "../" "-L" "../" "--eval" "(progn  (setq generated-autoload-file \"\"))" "-f" "batch-update-autoloads"))
  command-line()
  normal-top-level()

make[1]: *** [autoloads] Error 255 
```

cedets 文件位于 /users/name/go/cedet 下，为什么它会转到 /users/name/files/emacs-23.4？该目录不存在。我试过“make clean-all”，并执行“bzr revert”和“bzr clean”，但结果是一样的。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:22:47.747

看起来它正在尝试从 GNU Emacs 加载 CEDET。请使用`make clean-all && make`从 bzr 编译 CEDET，然后将 CEDET 从 bzr 加载到`~/.emacs`文件顶部。

# jquery - HTML5 Mutliple tracks at once, with one controls

> ID：13658957
> 
> 赞同：0
> 
> 时间：2012-12-01T11:27:06.683
> 
> 标签：jquery, html, audio

What I'm trying to achieve is: Using one controls of audio-player, play 2-3 or more tracks at once. This means that for example if I have 1track.mp3, 2track.mp3, when play button is clicked, they both get played etc. Unfortunatly i cant share any code now, because i really dont have anything that looks good, if you can give a raw example it would be great! Cheers!
P.s: jquery might be used, its okey. But flash is not allowed!

What I have now is two tags, which is incorrect...

```
<audio id='player_audio' controls>
  <source src="fhg_pianomp3.ogg" type="audio/ogg">
  <source src="fhg_pianomp3.mp3" type="audio/mpeg">
  <source src="fhg_bassmp3.ogg" type="audio/ogg">
  <source src="fhg_bassmp3.mp3" type="audio/mpeg">
  Your browser does not support the audio element.
</audio> 
<audio id='player_audio1' controls>
  <source src="fhg_bassmp3.ogg" type="audio/ogg">
  <source src="fhg_bassmp3.mp3" type="audio/mpeg">
  Your browser does not support the audio element.
</audio> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:30:49.167

It would be possible to generate own buttons and trigger the play and pause events via javascript.

```
var player1 = document.getElementById('firstPlayer');
var player2 = document.getElementById('secondPlayer');
document.getElementById('yourPlayButton').onclick = function() {
  player1.play();
  player2.play();
} 
```

# android - 如何在android中以编程方式获取语音邮件？

> ID：13658958
> 
> 赞同：0
> 
> 时间：2012-12-01T11:27:07.083
> 
> 标签：android

我想在我的 android 应用程序中检索语音邮件消息。有没有办法做到这一点？还是API？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:49:26.820

语音邮件是通过拨打一个号码来访问的，要做到这一点，你必须以编程方式完成所有步骤。

可能你想看看谷歌语音邮件，我觉得他们有自己的服务，提供语音邮件服务。

[http://support.google.com/voice/bin/answer.py?hl=en&answer=115073](http://support.google.com/voice/bin/answer.py?hl=en&answer=115073)

# asp.net - 如何获取第一个工作表 linqtoexcel 的名称？

> ID：13658966
> 
> 赞同：2
> 
> 时间：2012-12-01T11:28:00.940
> 
> 标签：asp.net, linq

我在获取第一个工作表 linqtoexcel 时遇到问题。

我的代码：

```
 var vitem = from oSelectedSheet in vFile.Worksheet<users>(1) select oSelectedSheet; 
```

如果文件中的默认表 (sheet1) 不存在，则此代码无法提供我需要的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T11:41:51.560

这行得通，

```
 var vFile = new LinqToExcel.ExcelQueryFactory(sTargetFileName);
     var worksheetNames = vFile.GetWorksheetNames();

     worksheetNames.First()//got 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-07T03:33:22.437

要按位置获取第一个工作表，您需要使用 DocumentFormat.OpenXml。获得名称后，您可以使用 LinqToExcel 按名称获取工作表的内容。

```
string firstWorksheetName = null;
using (SpreadsheetDocument document = SpreadsheetDocument.Open(path, false))
{
    var workbookPart = document.WorkbookPart;
    firstWorksheetName = document.WorkbookPart.Workbook
        .Descendants<Sheet>()
        .OrderBy(d => d.SheetId.Value)
        .FirstOrDefault()
        ?.Name.ToString();
}

var results = new List<MappedType>();

using (var excel = new ExcelQueryFactory(path))
{
   ... // set up database engine, access and any mapping

   results = excel.WorksheetRange<MappedType>("A2", "J16384", firstWorksheetName).ToList();
}
if (results.Count() != 0) {
   ... // Do stuff
} 
```

# jquery - Response.Redirect 带有“rel="external" 参数，如 href”

> ID：13658967
> 
> 赞同：0
> 
> 时间：2012-12-01T11:28:06.653
> 
> 标签：jquery, asp.net, html, vb.net, jquery-mobile

我使用 asp.net (vb.net)，我想在按钮单击事件时重定向用户。

```
Response.Redirect("somepage.aspx", False) 
```

它奏效了。但是当我使用这种方法时，菜单（在 somepage.aspx 中）不起作用。因为它想要“外部”参数，例如：

```
<a href="somepage.aspx" rel="external"> 
```

如果我用上面的 html 代码调用 somepage.aspx，我的菜单就可以了。（我也使用了 jscript）

所以我想用“a href”之类的参数运行response.redirect；例如;

```
 Response.Redirect("somepage.aspx", False,"rel=external") 
```

我怎样才能在服务器端代码中做到这一点？

多谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:31:50.940

菲拉特，

Response.Redirect 没有开箱即用的方法，但您可以在下面看到并使用适合您需求的一种：

[Response.Redirect 到新窗口](http://www.codeproject.com/Tips/317410/Response-Redirect-into-a-new-window)
[Response.Redirect 到新窗口](https://stackoverflow.com/questions/104601/response-redirect-to-new-window)

# c++ - 具有不同参数的函数容器

> ID：13658969
> 
> 赞同：1
> 
> 时间：2012-12-01T11:28:21.833
> 
> 标签：c++, function, templates, pointers, containers

有没有办法在向量中存储具有不同参数的 void 函数？参数的数量总是一个，只是类型不同。参数类型可以是默认类型，例如`int`，指向我自己的对象的指针`example*`或任何其他类型。

我现在所做的是使用带有 void 指针作为参数的函数向量。所以我可以通过一切。但是我想摆脱所有功能中的回投。

```
unordered_map<string, function<void(void*)> > List;

void Callback(string Name, function<void(void*)> Function)
{
    List[Name].push_back(&Function);
}

Callback("event", [](void* x){
    int value = *(int*)x;
    cout << value << endl;
}); 
```

这是一个例子来说明我想要什么。请注意我喜欢的模板语法。因此，我需要将所有功能存储在一个容器中。

```
vector<function<void(...)> > List; // need something other than a std vector

template <typename T>
void Callback(string Name, function<void(T)> Function)
{
    List[Name].push_back(&Function);
}

Callback<int>([](int x){
    cout << x << endl;
}); 
```

此应用程序与性能相关，因为它是实时渲染引擎的重要组成部分。

编辑：我解决了存储没有参数的函数的问题，所以这不再是问题的一部分，是什么让问题更加清晰和直接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:35:02.590

如果可以传递给函数的参数类型有限，那么一种选择是使用类似[boost::variant](http://www.boost.org/libs/variant/)的东西：

```
typedef boost::variant<
    std::function<void()>,
    std::function<void(int)>,
    std::function<void(long)>,
    std::function<void(std::string const&)>
> my_functions;
typedef std::vector<my_functions> functions_list; 
```

然后你可以将你的回调直接插入到容器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T12:02:15.713

正如 nm 在评论中指出的那样，问题在于您如何使用该值。形式上，C++ 允许您将任何指向（非成员）函数的指针转换为 a`void (*)(void)`并返回其原始类型，而不会丢失值——`void (*)(void)`可以被认为是`void*`指向函数的指针的一种。实际上，此类转换的运行时间成本为零。但是为了使用该函数，在某些时候，您必须知道原始类型，以便将指针转换回它。

您没有给出您的用例，但通常情况涉及回调，其中回调的注册有一个`void (*)( void* )`（或`void (*)( void const* )`），并且回调将 转换`void*`为正确的类型，并在其上调用成员函数。在这种情况下，使用`void*`作为通用参数是正确的（并且可能是唯一的）解决方案。

当然，这是 C 解决方案，通常只应在使用 C API 定义使用回调的接口时使用（例如`pthread_create`，函数等）。在 C++ 中，解决方案是注册派生自同一个抽象基类的对象，并实现特定的纯虚函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T13:19:34.620

我开发了一个基于 void 指针的事件系统，它现在可以工作了。它使用模板来传递和接收数据。支持没有参数或任何类型的一个参数的函数。由于它使用 void 指针来存储回调函数，我认为与使用 boost 框架中的 any 类型的解决方案相比，它非常快。

```
#include <string>
#include <vector>
#include <unordered_map>
#include <functional> 
#include <memory>

using namespace std;

class ManagerEvent
{
    typedef unordered_map<string, unordered_map<int, vector<pair<void*, bool> > > > Events;
public:
    void Listen(string Name, function<void()> Function)
    {
        Listen(Name, 0, Function);
    }
    void Listen(string Name, int State, function<void()> Function)
    {
        List[Name][State].push_back(make_pair(new function<void()>(Function), false));
    }
    template <typename T>
    void Listen(string Name, function<void(T)> Function)
    {
        Listen<T>(Name, 0, Function);
    }
    template <typename T>
    void Listen(string Name, int State, function<void(T)> Function)
    {
        List[Name][State].push_back(make_pair(new function<void(T)>(Function), true));
    }
    void Fire(string Name)
    {
        Fire(Name, 0);
    }
    void Fire(string Name, int State)
    {
        auto Functions = List[Name][State];

        for (auto i = Functions.begin(); i != Functions.end(); ++i)
        {
            if(i->second) continue;
            else          (*(function<void()>*)(i->first))();
        }
    }
    void FireRange(string Name, int From, int To)
    {
        for(int i = From; i <= To; ++i) Fire(Name, i);
    }
    template <typename T>
    void Fire(string Name, T Data)
    {
        Fire(Name, 0, Data);
    }
    template <typename T>
    void Fire(string Name, int State, T Data)
    {
        auto Functions = List[Name][State];

        for (auto i = Functions.begin(); i != Functions.end(); ++i)
        {
            if(i->second) (*(function<void(T)>*)i->first)(Data);
            else          (*(function<void()>*)i->first)();
        }
    }
private:
    Events List;
}; 
```

这就是我想到的，而且效果很好。但是，请随时提出改进建议或将代码用于您自己的项目。

# python - 简单的 OpenGL/GLSL 程序不起作用

> ID：13658971
> 
> 赞同：0
> 
> 时间：2012-12-01T11:28:35.950
> 
> 标签：python, opengl, glsl, pyside, pyopengl

**问题：**这个简单的 OpenGL/GLSL 程序有什么问题？它应该产生一个具有红绿色渐变的四边形。但我只是得到一个黑色窗口，没有错误消息。

```
import numpy
from OpenGL.GL import *
from PySide.QtCore import *
from PySide.QtGui import *
from PySide.QtOpenGL import *

_vertexShaderSource = (
    'attribute vec2 a_position;'
    'attribute vec3 a_color;'
    'varying vec3 v_color;'
    ''
    'void main()'
    '{'
    '   gl_Position = vec4(a_position, 0.0, 1.0);'
    '   v_color = a_color;'
    '}'
)

_fragmentShaderSource = (
    'varying vec3 v_color;'
    ''
    'void main()'
    '{'
    '    gl_FragColor = vec4(v_color, 1.0);'
    '}'
)

_POSITION = 0
_COLOR = 1

class HelloWidget(QGLWidget):

    def __init__(self):
        QGLWidget.__init__(self)

    def initializeGL(self):
        self._shaderProgram = QGLShaderProgram(self.context())
        self._shaderProgram.addShaderFromSourceCode(QGLShader.Vertex, _vertexShaderSource)
        self._shaderProgram.addShaderFromSourceCode(QGLShader.Fragment, _fragmentShaderSource)
        self._shaderProgram.link()
        self._shaderProgram.bind()

        glBindAttribLocation(self._shaderProgram.programId(), _POSITION, 'a_position')
        glBindAttribLocation(self._shaderProgram.programId(), _COLOR, 'a_color')

    def paintGL(self):
        glViewport(0, 0, self.width(), self.height())
        glClear(GL_COLOR_BUFFER_BIT)

        position = numpy.ndarray([-0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, 0.5], numpy.float32)
        glVertexAttribPointer(_POSITION, 2, GL_FLOAT, False, 0, position)
        glEnableVertexAttribArray(_POSITION)

        color = numpy.ndarray([1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0], numpy.float32)
        glVertexAttribPointer(_COLOR, 3, GL_FLOAT, False, 0, color)
        glEnableVertexAttribArray(_COLOR)

        glDrawArrays(GL_QUADS, 0, 4)

if __name__ == '__main__':
    import sys
    app = QApplication(sys.argv)
    w = HelloWidget()
    w.show()
    app.exec_() 
```

**答：**代码中有两个错误。

1.  正如 Brett Hale 所指出的，`glBindAttribLocation`必须先调用 to 。`self._shaderProgram.link()`

2.  `numpy.ndarray`应替换为`numpy.array`.

如果您解决了这两个问题，那么代码将按预期工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T13:07:39.013

从[手册页`glBindAttribLocation`：](http://www.opengl.org/wiki/GLAPI/glBindAttribLocation)

> 在程序对象被链接之后发生的任何属性绑定直到下次程序对象被链接时才会生效。

首先关联属性索引，*然后*链接程序。

`_POSITION`或者，使用 为、`_COLOR`等赋值`glGetAttribLocation`。

* * *

正如@KillianDS 所提到的，您可以在着色器中指定索引（位置），前提是您拥有 GL 3.3 或更高版本。这是 OS X 上令人沮丧的根源，它只*保证*GL 3.2。

* * *

可能还值得指出的`GL_QUADS`是，核心配置文件不支持它，因此可能需要解决这个问题，例如，使用 2 个三角形。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T17:54:23.747

我宁愿发表评论，但它很长。希望这可以帮助您：

由于您`attribute`在顶点着色器中使用了关键字（兼容性关键字），您能否说明您使用的是哪个版本的 OpenGL 和 GLSL？我在您的代码中看不到任何与版本相关的内容；我错过了吗？了解问题所在可能会有所帮助。

如果您有可用的格式，`layout`格式肯定会简化事情。~~此外，您的着色器需要`#version`指定它（至少在[最新规范](http://www.opengl.org/registry/doc/GLSLangSpec.4.30.7.pdf)中，尽管我认为它适用于所有版本）。~~OP 正在使用/打算使用的 1.10（尽管仍受支持）不是必需的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T11:51:40.480

我不熟悉 Python 下的 Qt，但我很确定您需要使用`glUseProgram`.

# java - 使用 IKVM.Net 将 Apache POI .jar 转换为 .dll

> ID：13658972
> 
> 赞同：1
> 
> 时间：2012-12-01T11:28:50.507
> 
> 标签：java, .net, dll, apache-poi, ikvm

我正在尝试将 Apache poi .jar 转换为 .dll 。我使用下面的脚本进行转换。但是，在那之后我收到很多警告和错误***Invalid option -resource:poi-3.8-20120326.dll***。这是我使用的脚本。

```
ikvmc -target:library poi-ooxml-schemas-3.8-20120326.jar
ikvmc -target:library poi-3.8-20120326.jar
ikvmc -target:library -resource:poi-3.8-20120326.dll poi-scratchpad-3.8-20120326.jar
ikvmc -target:library -resource:poi-3.8-20120326.dll poi-ooxml-schemas-3.8-20120326.dll poi-scratchpad-3.8-20120326.dll poi-ooxml-3.8-20120326.jar
ikvmc -target:library -resource:poi-3.8-20120326.dll poi-ooxml-3.8-20120326.dll poi-excelant-3.8-20120326.jar 
```

这是使用 IKVM.Net 的正确方法吗？如果不是，那么执行此操作的正确脚本是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T11:55:40.390

[编译器](http://www.ikvm.net/userguide/ikvmc.html#Options)的`-resource`选项记录如下：[`ikvmc`](http://www.ikvm.net/userguide/ikvmc.html#Options)

> -resource:name=path 将路径包含为名为 name 的 Java 资源

所以这似乎表明它`-resource`用于将资源文件包含到编译中，而不是（就像你正在做的那样）以前编译的 DLL。

[这个怀疑在 ant wrapper around 的](http://ant-ikvmc.sourceforge.net/)`resource`示例中如何使用该选项的示例证实了这一点：[`ikvmc`](http://ant-ikvmc.sourceforge.net/)

```
<resource name="/logs/logging.properties" path="${builddir}/logging.properties"/> 
```

由于`ikvmc`是一个 java-bytecode-to-.net-intermediate-language 编译器，它了解如何读取 jar 文件。因此，与其尝试将（先前生成的）DLL 包含到编译周期中，不如只指向`ikvmc`原始 jar 文件。

最简单的方法可能是一次性转换所有罐子：

```
ikvmc -target:library poi-ooxml-schemas-3.8-20120326.jar poi-3.8-20120326.jar poi-scratchpad-3.8-20120326.jar ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T09:20:36.103

您需要将选项 -resource 替换为 -reference。

但最好是使用 { } 语法一步编译它。有关详细信息，请参阅[wiki](http://sourceforge.net/apps/mediawiki/ikvm/index.php?title=Convert_a_jar_file_to_a_dll_and_use_it_as_library)。这看起来像：

```
ikvmc { -target:library poi-ooxml-schemas-3.8-20120326.jar } { -target:library poi-3.8-20120326.jar } { -target:library poi-scratchpad-3.8-20120326.jar } .... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T03:21:05.853

我刚刚完成了一个项目，在该项目中我使用 IKVM 0.46.0.1 成功转换并使用了 Apache POI 3.9。转换后的 DLL 集支持 2007 年之前和 2007 年之后的 Microsoft Office 格式。

先决条件：

下载 POI 3.9 并将所有 JAR 文件复制到一个目录中 下载 IKVM（我使用版本 0.46.0.1） 以下命令（在所有 POI JAR 所在的同一目录中的 Windows 7 命令行中运行）对我有用：

```
ikvmc -target:library xmlbeans-2.3.0.jar
ikvmc -target:library stax-api-1.0.1.jar

ikvmc poi-ooxml-schemas-3.9-20121203.jar -target:library -reference:xmlbeans-2.3.0.dll -reference:stax-api-1.0.1.dll 

ikvmc -target:library log4j-1.2.13.jar
ikvmc -target:library commons-logging-1.1.jar
ikvmc -target:library commons-codec-1.5.jar

ikvmc poi-3.9-20121203.jar -target:library -reference:log4j-1.2.13.dll -reference:commons-logging-1.1.dll -reference:commons-codec-1.5.dll

ikvmc -target:library dom4j-1.6.1.jar

ikvmc poi-ooxml-3.9-20121203.jar -target:library -reference:poi-3.9-20121203.dll -reference:poi-ooxml-schemas-3.9-20121203.dll -reference:dom4j-1.6.1.dll -reference:xmlbeans-2.3.0.dll 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-02T14:28:22.823

弗兰克一次性转换所有罐子的答案为我解决了这个问题。这是我用于 POI 3.10 的完整命令。所有的罐子都需要在同一个目录中。-out 选项允许您指定输出 dll 的名称，否则它会从第一个 jar 中获取名称。

```
ikvmc -target:library -out:poi-3.10.dll xmlbeans-2.3.0.jar stax-api-1.0.1.jar poi-ooxml-schemas-3.10-FINAL-20140208.jar log4j-1.2.13.jar commons-logging-1.1.jar commons-codec-1.5.jar poi-3.10-FINAL-20140208.jar dom4j-1.6.1.jar poi-ooxml-3.10-FINAL-20140208.jar 
```

# google-visualization - Google Charts：具有多个 vAxis 和复选框的折线图，用于添加和删除值

> ID：13658978
> 
> 赞同：1
> 
> 时间：2012-12-01T11:29:22.660
> 
> 标签：google-visualization, linechart

我想在 Google Adnsese 中制作类似图表，您可以在图表中添加更多值并在一个图表中进行比较。有没有人用谷歌图表和特别是折线图的一些简单例子？

我想要 3-4 个具有不同值的复选框，并通过选中或取消选中每个值的复选框来添加或删除它们。

# c++ - 如何分析 PCRE 模式？

> ID：13658979
> 
> 赞同：5
> 
> 时间：2012-12-01T11:29:28.977
> 
> 标签：c++, performance, pcre

我需要对时间和内存的 PCRE 模式进行性能分析。下面的一些参数是从模式使用`pcre_fullinfo`和`pcre_exec`函数中提取的。

*   编译模式的大小
*   最高回参考数
*   捕获子模式的数量
*   命名子模式的数量
*   在随机缓冲区中找到匹配的时间

现在的问题是这些参数是否足够，或者我可以使用其他参数进行更好的分析吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-22T06:42:19.187

hamed，挖掘这个古老的问题，因为它是一个很好的问题，我看到你仍然活跃在 SO 上。

事实证明，PCRE 附带了一个非常有用的测试实用程序，称为 pcretest。除其他外，它允许您在引擎尝试匹配字符串时跟踪引擎的路径，并允许您指定运行次数。

如果您使用的是 Unix 或 OSX，则必须按照 pcre.org 上的下载链接编译[pcretest](http://www.pcre.org/)。该软件包包含制作文件所需的一切。如果您使用的是 Windows，[pcre.org](http://www.pcre.org/)的首页会告诉您从何处获取最新的 pcretest 二进制文件以及 Windows pcregrep 二进制文件，它也是 pcre 测试套件的一部分。

选项列表很长。

1.  有关控制台中的概述，请键入`pcretest --help`
2.  对于“入门”用法，请阅读提供 Windows 二进制文件的页面（见上文）
3.  有关完整说明，请参阅[官方 pcretest 文档](http://www.hep.phy.cam.ac.uk/exim-doc-4.63/html/doc/pcretest.html)。

# c++ - c ++ asm将指针移动到寄存器=访问冲突错误

> ID：13658980
> 
> 赞同：0
> 
> 时间：2012-12-01T11:29:54.497
> 
> 标签：c++, winapi, assembly, inline-assembly

我正在使用 asm insert 来清除位图，它是这样创建的：

```
CreateDIBSection(m_dc, &bmpinfo, DIB_RGB_COLORS, (void **)&m_bmp_data, NULL, NULL); 
```

asm 插入 ( **C++** )

```
int c = RGB32(color.r, color.g, color.b);

int length = m_width * m_height;

__asm
{
    mov edi, m_bmp_data
    mov ecx, length
    mov eax, c
    rep stosd
} 
```

此代码引发访问冲突错误。但如果我这样做 - 一切都好：

```
BYTE* dest = m_bmp_data;
__asm
{
    mov edi, dest
... 
```

这个和解有什么区别？

**更新：** 使用“mov edi，m_bmp_data”它翻译为“mov edi，10h”。为什么是 10 小时？“mov edi, dest”翻译成“mov edi, dword ptr [dest]”。真的，我不知道如何将 memset 与整数值一起使用，所以我只使用内联 asm

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T16:16:44.083

```
 mov edi, m_bmp_data 
```

只有当 m_bmp_data 是本地或全局变量时，它才能正常工作。这个名字强烈暗示它不是，很可能是 C++ 类的成员。这需要取消引用*this*指针，如下所示：

```
 __asm {
        mov eax, this;
        mov edi, [eax + m_bmp_data];
        // etc..
    } 
```

实际上编写此代码没有意义，您不妨使用您找到的解决方法，编译器永远不会出错。

# c++ - 未找到绕行标识符

> ID：13658981
> 
> 赞同：0
> 
> 时间：2012-12-01T11:29:58.103
> 
> 标签：c++, dll, detours

我收到错误

```
error C3861: 'DetourTransactionBegin': identifier not found
error C3861: 'DetourUpdateThread': identifier not found
error C3861: 'DetourAttach': identifier not found
error C3861: 'DetourAttach': identifier not found
error C3861: 'DetourAttach': identifier not found
error C3861: 'DetourAttach': identifier not found
error C3861: 'DetourTransactionCommit': identifier not found
error C3861: 'DetourTransactionBegin': identifier not found
error C3861: 'DetourUpdateThread': identifier not found
error C3861: 'DetourDetach': identifier not found
error C3861: 'DetourDetach': identifier not found
error C3861: 'DetourDetach': identifier not found
error C3861: 'DetourDetach': identifier not found
error C3861: 'DetourTransactionCommit': identifier not found 
```

有错误的代码：

```
DetourTransactionBegin();
DetourUpdateThread( GetCurrentThread() );
DetourAttach( &(PVOID &)Real_Send, Mine_Send );
DetourAttach( &(PVOID &)Real_Recv, Mine_Recv );
DetourAttach( &(PVOID &)Real_RecvFrom, Mine_RecvFrom );
DetourAttach( &(PVOID &)Real_WSARecvEx, Mine_WSARecvEx );
DetourTransactionCommit(); 
```

我完整的头文件：

```
#pragma once

#include "targetver.h"

#include <cstdio>
#include <ctime>
#include <fstream>
#include <iomanip>
#include <string>
#include <windows.h>
#include <detours.h>

#pragma comment( lib, "Ws2_32.lib" )
#pragma comment( lib, "detours.lib" )
#pragma comment( lib, "detoured.lib" )
#pragma comment( lib, "Mswsock.lib" ) 
```

我就是找不到问题。
我在链接器选项的附加包含中添加了 detours.lib 的目录。

使用弯路 1.5

* * *

**更新**

所以我尝试将 detours 文件本地添加到项目中。

```
#include "detours.h" 
```

还是同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:54:25.350

这些函数在 detours 2.1 API 中。

# php - 防止使用浏览器 url 直接访问图像

> ID：13658988
> 
> 赞同：2
> 
> 时间：2012-12-01T11:30:43.380
> 
> 标签：php, apache, .htaccess, hotlinking

我有一个名为 - **Images**的文件夹。此文件夹包含用户个人资料图片。现在用户可以随时通过将图像 URL 复制到他的浏览器来查看他的图像。这样他也可以看到其他用户的个人资料照片。我想要实现的是 - 用户应该只能通过我网站上的 PHP 页面查看他的个人资料图片。如果用户直接放图片 URL，就不应该显示。

我尝试使用.htaccess 来实现这一点。这就是我在 .htaccess 文件中的内容：

```
RewriteEngine On
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http://(www\.)?mysite.com/
RewriteRule \.(gif|jpg)$ http://www.mysite.com/errorpost.jpg [R,L] 
```

我是.htaccess 的新手。如果有办法实现这一点，请提供帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-08T08:50:07.667

我也有同样的问题。目前我找到了两种方法：

**1) base64_encode() + ajax + js/jquery**

*   将 base64_encode() 编码的每个图像存储在二进制文件或数据库 OUTSIDE www 文件夹中。
*   使用 ajax 获取该数据。它应该返回 "data:image/jpeg;base64,$enc_imgbinary"
*   使用 js/jquery 将 'img' 属性的 'src' 替换为返回的结果

优点

*   无法通过直接链接访问图像

缺点

*   *我没有发现类似的视频解决方案。*
*   图像应事先（或首次使用）编码，以尽量减少服务器 CPU 使用率。
*   编码图像在磁盘上占用大约 30% 的空间 => 1.3 倍的磁盘空间
*   如果您想在服务器上保留原始图像 => 2.3x 磁盘空间。
*   大约 30% 的数据将通过网络发送

**2）长随机名称（+符号链接）**

A）使用长随机名称将图像存储在 www 文件夹中
B）将图像存储在 www 文件夹之外，并带有指向 www 文件夹的符号链接。（www 以外的图像也可以作为您的桌面图像备份）

笔记：

*   文件夹还必须包含随机符号
*   利用 '。' 在任何文件夹或文件名之前 => 以防万一，以防止在未配置的 apache 上显示文件夹内容
*   在案例 B 中配置 apache 以遵循符号链接）（将 FlowSymlinks 添加到 httpd.conf）
*   配置 apache 以防止文件夹内容列表（从 httpd.conf 中删除索引）
*   图像层次结构示例：

    *   万维网
        *   .media_jmdue7jed
            *   .user1_hash_!sdfsewewfsdfsds
                *   .album1_name_!jfie8e7y77667fef
                    *   .photo1_name_!kjio9i890v8fsd978fyreshf
                    *   .photo2_name_!09098dfuujdsif87s7ysdffd
                    *   ...
                *   .album2_name_!ghhyuflp!huidfjh
                    *   .photo1_name_!feojihudhufuuhfrufhi8484
                    *   .photo2_name_!2344gfdgfdgdfefedw232sdg
                    *   ...
            *   .user1_hash_!j333re89dsfdsf
                *   ...

优点：

*   *也可以用于视频*
*   您仍然可以通过使用长随机名称创建指向 www 文件夹的符号链接，将原始图像保留在 www 文件夹之外。甚至对每个用户都不同。
*   图片可以在您的服务器之外使用（在论坛中，快速发送直接链接给您的朋友或类似的）

缺点

*   必须事先（或即时）创建符号链接
*   可以通过直接链接访问图像
    *   但是几乎不可能猜到它
    *   您也可以定期更改符号链接随机名称或更改图像权限（我怀疑 google+ 会这样做）
*   map original-name → long-random-name 应该存储在 db (或 sidecard/meta 文件)
    *   （如果您通过编码/解码或组合原始名称 + 长随机名称将原始名称保留在长随机名称中，则可以绕过）

======================================

我已经实现了案例 1)，它对我来说很好，但是我没有为 HTML5 视频找到类似的解决方案。

案例 2) 似乎更灵活。但是我仍然不确定安全性。如果有人看到安全漏洞，请告诉我。

# c - 为双指针 (char**) 声明和分配内存

> ID：13658989
> 
> 赞同：-1
> 
> 时间：2012-12-01T11:30:46.623
> 
> 标签：c, memory-management, multidimensional-array, forward-declaration

我有一个程序，需要我将大量数据读入字符串数组，并且初始函数有一个集合部分来声明所有变量。问题是直到函数的后面我才知道字符串数组的实际大小，所以不要在找到数组长度的行下方声明它；我想定义上面的变量，然后在行后分配内存。我的想法是：

理想的：

```
int declaration;
Char ** DataArray;  //initial declaration at top of file
char * usage;
int Buffer;

//function continues.....

Buffer = SomeNum; //find length of array needed

//allocate ideal size of array(HOW?) 
```

我目前在做什么：

```
int declaration; //not placing the declaration here, bad programming practice especially
char * usage;    //considering this is an open source project i am working on.
int Buffer;

//function continues.....

Buffer = SomeNum;
char * DataArray[Buffer]; //works, but NOT ideal! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T11:43:07.037

您正在尝试做的事情称为*动态内存分配*。您当前使用`char * DataArray[Buffer]`的不是 C90 标准的一部分（不过，它是 C99 标准的一部分；它也是 C90 的 GCC 扩展），因此您可能不应该使用它。

要动态分配内存，请使用`malloc`from `stdlib.h`：

```
DataArray = malloc(num_elements * sizeof(char *)); 
```

`malloc()`返回`void *`到系统给你的内存块的开头。将此分配给 a `DataArray`（类型为`char *`）将其转换为 a `char *`。

`DataArray`然后，您可以使用`DataArray + index`or引用元素`DataArray[index]`，就像使用常规数组一样。

与静态分配的内存不同，动态分配的内存不会在声明它的块的末尾自动释放。因此，您必须在使用`free()`完成后释放它。

`free(DataArray);`

但是，如果您丢失了指向您已获得的内存块的指针，那么您就无法`free()`做到这一点，并且您会遇到所谓的*内存泄漏*。动态内存分配可能会出现很多问题，您必须考虑这些问题。

例如，系统可能根本没有足够的内存给你（或者有足够的内存，但不是连续的块）。在这种情况下，`malloc()`将 return `NULL`，当然你不应该取消引用。

内存管理可能非常复杂，因此您最好在书的帮助下学习它，而不是简单地通过反复试验。这样肯定不会那么令人沮丧。

# php - php不返 回配置文件内容

> ID：13658991
> 
> 赞同：0
> 
> 时间：2012-12-01T11:31:07.980
> 
> 标签：php, include, filepath

```
public function loadConfig($config)
{
    if(is_file(path('config') . $config . '.php'))
    {
        return include_once path('config') . $config . '.php';
    }

} 
```

我在控制器中加载模型的功能相同，一切正常。但我不能包含配置文件，路径是正确的。如果我在返回之前放

```
include_once path('config') . $config . '.php';
print_r($config_array); 
```

它打印数组值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:46:34.767

您将需要删除“_once”（因为在这种情况下防止第二次包含没有意义，它适用于类但不适用于配置文件）。此外，您需要在包含的文件中包含“return”语句或返回数组，而不是包含函数的返回值：

```
public function loadConfig($config)
{
    $filename = path('config') . $config . '.php';
    if (is_readable($filename)) {
        include($filename);
        return $config_array;
    }

    // error handling, i.e., throw an exception ...
} 
```

* * *

使用“return”语句的解决方案：

配置文件：

```
$config_array = array( ... );
return $config_array; 
```

使用配置加载器方法的类：

```
public function loadConfig($config)
{
    $filename = path('config') . $config . '.php';
    if (is_readable($filename)) {
        return include($filename);
    }

    // error handling, i.e., throw an exception ...
} 
```

# networking - 能否哄骗 Micrel KSZ8995 遵守 RFC 3927，以免泄露链路本地地址？

> ID：13658993
> 
> 赞同：1
> 
> 时间：2012-12-01T11:31:13.530
> 
> 标签：networking, tcp-ip, link-local

我的嵌入式系统使用一个*Micrel KSZ8995M*开关，连接到两个“内部”设备（内部我的意思是物理上位于同一块板上）和一个 LAN。

设备 1 是一个运行 Busybox Linux 的 ARMv5 处理器，其 LAN IP 由 DHCP 或静态配置`eth0`，以及一个本地链接/APIPA`169.254.137.10`地址`eth0:0`。

设备 2 是运行 ARTOS 的较小芯片，谁知道还有什么，只有一个本地链接/APIPA`169.254.137.11`地址。

```
+----------------------------+
| +----------+  +----------+ |
| | Device 1 |  | Device 2 | |
| +-----+----+  +-----+----+ |
|       |             |      |   <-- a "unit"
| +-----+-------------+----+ |
| | Micrel KSZ899M switch  | |
| +-----------+------------+ |
+-------------|--------------+
              |
           +--+--+
           | LAN |
           +  -  + 
```

目的是让设备 1 和设备 2 能够通过 TCP/IP 相互通信，而 LAN（或任何递归连接的网络）上的任何其他设备都无法看到设备 2 或看到两者之间传输的数据设备。

此外，网络上可能存在整个单元的多个实例，并且单元之间的链路本地地址不得冲突。

据我了解，RFC 3927 中定义的链路本地寻址仅用于“内部”通信，并且在具有链路本地寻址的接口之间分派的数据包不应由交换机或路由器转发。

不幸的是，随着系统作为一个整体连接到 LAN，我看到来自更广泛网络的多个设备对设备 2 的 ARP 响应，这意味着链接本地 IP 是可见的并且在整个网络中发生冲突。也就是说，Micrel 似乎转发了这些，我看不到任何可以让它停止的配置。

**我是否误解了 APIPA 寻址的工作方式？**

或者，如果我是正确的，但 Micrel 只是没有正确支持它们，**我可以强迫它遵守吗？**

* * *

参考：

*   [维基百科上的“链接本地地址”](http://en.wikipedia.org/wiki/Link-local_address)
*   [RFC 3927](https://www.rfc-editor.org/rfc/rfc3927)
*   [麦克雷尔开关 CLI 用户指南](ftp://www.micrel.com/ethernet/swtich_cli/Micrel%20Switch%20CLI%20User%20Guide.pdf)
*   [麦克雷尔 KSZ8995M 数据表](http://www.datasheetarchive.com/dataframe.php?file=DSA-356320.pdf&dir=Datasheets-18&part=KSZ8995M#)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:53:59.923

> 据我了解，RFC 3927 中定义的链路本地寻址仅用于“内部”通信，并且在具有链路本地寻址的接口之间分派的数据包不应由交换机或路由器转发。

嗯，第 2 层交换机甚至不*知道*IP 地址。你的理解是错误的。链路本地地址不得由**路由器**转发，如 RFC 3927 中所定义。（第 3 层网络设备）

不过，*ARP 请求是由***交换机**转发的。（二层网络设备）

请参阅数据表中的第一句话，其中指出：

> KS8995M 是一款高度集成的二层管理型交换机

有关第 2 层（MAC/以太网）和第 3 层 (TCP/IP) 通信之间差异的更多详细信息，请参阅[网络交换机](http://en.wikipedia.org/wiki/Network_switch)和[OSI 模型。](http://en.wikipedia.org/wiki/OSI_model)

正如您已经指出的那样，KSZ8895M 确实以这种方式定义“本地”：

> “本地”数据包。基于 DA（目标地址）查找。如果查找表中的目标端口与数据包的来源端口匹配，则数据包被定义为“本地”。

这意味着当此数据包的目的地分配给发送数据包的端口时，交换机不会转发数据包（在第 2 层、以太网、MAC 上！）。“目标地址”在这个问题上是 MAC 地址，而不是 IP 地址。

**结论：（** 修订）

默认情况下，只要内部交换机物理连接到您的 LAN，连接到交换机的所有设备对外部都是可见的。

为避免这种情况，您必须以物理方式或[虚拟方式分隔](http://en.wikipedia.org/wiki/VLAN)[网络段](http://en.wikipedia.org/wiki/Network_segment)。

但你很幸运，KS8995M 确实支持[VLAN](http://en.wikipedia.org/wiki/VLAN) - 使用 VLAN，你可以将“内部”网络与外部分开：

*   将带有“设备 1”的端口添加到“VLAN 1”（私有 VLAN）
*   仅将带有“设备 2”的端口添加到“VLAN 1”（私有 VLAN）
*   将带有“设备 1”的端口添加到“VLAN 2”（VLAN 外）
*   确保具有“外部 LAN”的端口只有“VLAN 2”（外部 VLAN）
*   确保从所有端口中删除“VLAN 0”（默认 VLAN）。

这样，带有“设备 1”的端口可以与外部 LAN 网段和专用内部 LAN 网段进行通信。“设备 2”与外部虚拟分离，因此 LAN 无法与“设备 2”通信。

有关 VLAN 配置，请参阅 CLI 用户指南中的第 6 页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T11:47:16.270

KSZ8895M 数据表（始终指*代 KS8895M*，因此我将假设功能等效）在第 24 页上说：

> KS8895M 不会转发以下数据包：
> 
> *   错误数据包。这些包括成帧错误、FCS 错误、对齐错误和非法大小的数据包错误。
> *   802.3x 暂停帧。KS8895M 将拦截这些数据包并执行适当的操作。
> *   “本地”数据包。基于 DA（目标地址）查找。如果查找表中的目标端口与数据包的来源端口匹配，则数据包被定义为“本地”。

这确实表明我认为 Micrel 不遵守 RFC 3927，但*仅以*上面定义的方式定义“本地”。

那么，不，不幸的是，您将无法使其正常工作。

# java - 如何遍历arraylist并存储到另一个arraylist？

> ID：13658998
> 
> 赞同：1
> 
> 时间：2012-12-01T11:31:31.503
> 
> 标签：java, arraylist

我有一个对象数组列表（list1），它包含座位号、图像及其 ID。我如何遍历 list1 并将每个数据存储到另一个列表中。前提是seat_no。匹配另一个固定大小为 50 的列表 (list2) 的索引。我应该创建另一个对象类吗？请帮助...

例子：

List1 包含

```
|seat_no | id     | image            |
======================================
| 1      | 001    | R.drawable.chair |
| 2      | 002    | R.drawable.chair |
| 3      | 003    | R.drawable.chair |
| 4      | 004    | R.drawable.chair |
| 7      | 005    | R.drawable.chair |
| 10     | 006    | R.drawable.chair | 
```

List2 应包含

```
|index   | id     | seat_no |
=============================
| 1      | 001    | 1       |
| 2      | 002    | 2       |
| 3      | 003    | 3       |
| 4      | 004    | 4       |
| 5      |"blank" |"blank"  |
| 6      |"blank" |"blank"  |
| 7      | 005    | 7       |
| 8      |"blank" |"blank"  |
| 9      |"blank" |"blank"  |
| 10     | 006    | 10      | 
```

这是我的代码

main.java

```
ArrayList<HashMap<String, String>> take = new ArrayList<HashMap<String, String>>();

        try 
        {
            JSONObject jsonArray = new JSONObject(result);

            JSONArray info = jsonArray.getJSONArray("info");

            list1 = new ArrayList<ViewGridObject>();

            for (int i = 0; i < info.length(); i++) 
            {
                HashMap<String, String> map = new HashMap<String, String>();
                JSONObject e = info.getJSONObject(i);

                map.put("id", String.valueOf(i));
                map.put("sid", e.getString("id"));
                map.put("flag", Integer.toString(seat[0]));
                map.put("seat_no", e.getString("seat_no"));
                take.add(map);

                list1.add(new ViewGridObject(e.getString("id"), R.drawable.chair, e.getString("seat_no")));

            } 
```

ViewGridObject.java

```
public class ViewGridObject 
{
public String stud_id, seat_no;
int chair;

public ViewGridObject(String stud_id, int chair, String seat_no)
{
    this.stud_id = stud_id;
    this.chair = chair;
    this.seat_no = seat_no;

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:34:45.180

不，Java`ArrayList`支持空值并且它维护插入顺序。您可以在索引可用的对象处插入 null。

> 有序集合（也称为序列）。此界面的用户可以精确控制每个元素在列表中的插入位置。用户可以通过整数索引（列表中的位置）访问元素，并在列表中搜索元素。
> 
> List 接口的可调整大小的数组实现。实现所有可选列表操作，并允许所有元素，包括 null。除了实现 List 接口之外，该类还提供了一些方法来操作内部用于存储列表的数组的大小。（这个类大致相当于 Vector，只是它是不同步的。）

例如：-你有这个对象-`ViewGridObject1,ViewGridObject2, ViewGridObject3, ViewGridObject4,ViewGridObject7;`

```
list1.add(ViewGridObject1);
list1.add(ViewGridObject2);
list1.add(ViewGridObject3);
list1.add(ViewGridObject4);
list1.add(null);
list1.add(null);
list1.add(ViewGridObject7); 
```

所以你的清单将包含 -`obj1, obj2, obj3, obj4, null, null, obj7,...`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T11:52:21.570

创建新列表更容易：

```
List<ViewGridObject> list2 = new ArrayList<ViewGridObject>();
int i = 0;
for (ViewGridObject o : list1) {
    for (i++; !o.seat_no.equals(i + ""); i++) {
        list2.add(new ViewGridObject(null, 0, i + ""));
    }
    list2.add(o);
} 
```