# StackOverflow 问答 15180000-15180999

# google-maps-api-3 - 谷歌地图信息窗口调整大小

> ID：15180000
> 
> 赞同：1
> 
> 时间：2013-03-02T22:09:09.183
> 
> 标签：google-maps-api-3

我有一个 API V3 地图，每个标记都有一个内容窗口。每个标记都有一个包含 .SVG 文件的信息窗口。信息窗口的内容跨越多行，但信息窗口不会调整大小以适应所有内容，从而导致出现类似 iframe 的滚动。我什至不能关闭信息窗口。有没有人帮我解决我的问题。这是我的代码

```
function initialize(){

 var myCenter = new google.maps.LatLng(36.4333, -117.9509);
 var sfv = new google.maps.LatLng(34.18258, -118.43968);
 var sgv = new google.maps.LatLng(34.07959, -118.03335);
 var pasadena = new google.maps.LatLng(34.14778, -118.14452);
 var la = new google.maps.LatLng(34.05223, -118.24368);
 var oc = new google.maps.LatLng(33.71747, -117.83114);

 var imageBounds=new google.maps.LatLngBounds(
 new google.maps.LatLng(36.3943, -118.1050),
 new google.maps.LatLng(36.4735, -117.8529));
 var marker, marker1;

 var mapProp = {
 zoom:9,
 center:la,
 mapTypeId: google.maps.MapTypeId.ROADMAP}

 var map = new google.maps.Map(document.getElementById("googleMap"),mapProp);

 var marker=new google.maps.Marker({
 position:myCenter,
 animation:google.maps.Animation.BOUNCE
 });

 var marker1=new google.maps.Marker({
 position:sfv,
 animation:google.maps.Animation.BOUNCE
 });

 var marker2=new google.maps.Marker({
 position:sgv,
 animation:google.maps.Animation.BOUNCE
 });

 var marker3=new google.maps.Marker({
 position:pasadena,
 animation:google.maps.Animation.BOUNCE
 });

 var marker4=new google.maps.Marker({
 position:la,
 animation:google.maps.Animation.BOUNCE
 });

 var marker5=new google.maps.Marker({
 position:oc,
 animation:google.maps.Animation.BOUNCE
 });

 marker.setMap(map);
 marker1.setMap(map);
 marker2.setMap(map);
 marker3.setMap(map);
 marker4.setMap(map);
 marker5.setMap(map);    
 var infowindow = new google.maps.InfoWindow({
    content: '<IMG BORDER="0" ALIGN="Left" SRC="test.svg">'
    });
 var infowindow1 = new google.maps.InfoWindow({
    content: '<IMG BORDER="0" ALIGN="Left" SRC="test.svg">'
    });
 var infowindow2 = new google.maps.InfoWindow({
    content: '<IMG BORDER="0" ALIGN="Left" SRC="test.svg">'
    });
 var infowindow3 = new google.maps.InfoWindow({
    content: '<IMG BORDER="0" ALIGN="Left" SRC="test.svg">'
    });
 var infowindow4 = new google.maps.InfoWindow({
    content: '<IMG BORDER="0" ALIGN="Left" SRC="test.svg">'
    });
 var infowindow5 = new google.maps.InfoWindow({
     content: '<IMG BORDER="0" ALIGN="Left" SRC="test.svg">'
    });
     // event handlers for clicking
google.maps.event.addListener(marker, 'click', function(){
    infowindow.open(googleMap,marker);
    });   

google.maps.event.addListener(marker1, 'click', function(){
    infowindow1.open(googleMap,marker1);
    });   

google.maps.event.addListener(marker2, 'click', function(){
    infowindow2.open(googleMap,marker3);
    });   

google.maps.event.addListener(marker3, 'click', function(){
    infowindow3.open(googleMap,marker3);
    });   

google.maps.event.addListener(marker4, 'click', function(){
    infowindow4.open(googleMap,marker4);
    });   

google.maps.event.addListener(marker5, 'click', function(){
    infowindow5.open(googleMap,marker5);
    });   
  }

  google.maps.event.addDomListener(window, 'load', initialize);
 </script>
 </head>

 <body onload = "initialize()">
 <div id="googleMap" style="width:1080px;height:650px;"></div>
 </body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T00:14:17.083

您可以通过传入相关参数来设置最大宽度，如[文档中所述](https://developers.google.com/maps/documentation/javascript/reference#InfoWindowOptions)：

```
var infowindow = new google.maps.InfoWindow({
    content: ...,
    maxWidth: 300
}) 
```

相关文档。

注意宽度不能低于247。至于设置高度，没有具体的参数。不过，您可以使用 CSS 来控制它。只需给`img`元素一个`max-height`样式。

# selenium - 带有 Python 的 Selenium Webdriver/浏览器

> ID：15180001
> 
> 赞同：1
> 
> 时间：2013-03-02T22:09:19.123
> 
> 标签：selenium, python-2.7, selenium-webdriver

我需要构建一个 Python 刮板来从网站中刮取数据，该网站仅在用户单击与 Javascript onclick 函数绑定的链接后才显示内容，并且页面不会重新加载。为了做到这一点，我研究了 Selenium 并对其进行了一些尝试，似乎 Selenium 每次实例化驱动程序时都会打开一个新的 Firefox Web 浏览器：

```
 >>> driver = webdriver.Firefox() 
```

是否需要这个打开的浏览器，或者有没有办法摆脱它？我问这个问题是因为刮板可能是网络应用程序的一部分，而且我担心如果多个用户开始使用它，我的服务器上会打开一堆浏览器窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:59:46.827

是的，selenium 使 Web 浏览器自动化。您可以在 python 代码的底部添加它，以确保浏览器最后关闭：

```
driver.quit() 
```

# php - 如果 PHP 文件中出现任何错误，则强制 HTTP 状态为 500

> ID：15180003
> 
> 赞同：6
> 
> 时间：2013-03-02T22:09:25.920
> 
> 标签：php

首先我使用 PHP 5.4.3。

我遇到的问题是，每当 PHP 文件中发生错误（例如解析错误）时，它会在 HTML 中显示错误消息，**并且页面的 HTTP 状态将为 200**。

**我想知道的是，如果发生任何错误**，如何将 HTTP 状态设置为 500并且根本不显示任何错误。

请记住，我不想为每个页面显示 HTTP 状态 500，只显示少数页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T22:25:32.867

您可以使用寄存器关闭功能。来源：[PHP：自定义错误处理程序 - 处理解析和致命错误](https://stackoverflow.com/questions/1900208/php-custom-error-handler-handling-parse-fatal-errors)

```
ini_set('display_errors', 0);

function shutdown() {
    if (!is_null(error_get_last())) {
        http_response_code(500);
    }
}
register_shutdown_function('shutdown'); 
```

请注意，E_PARSE 错误只会在注册关闭功能后包含/需要的文件中被捕获。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T23:01:30.340

myninjaname 的答案几乎是正确的 - 但是您不知道退出时输出缓冲区发生了什么。此外，您的代码将始终运行完成。除了立即处理情况外，我还会使用输出缓冲和自定义 error_handler，保证对浏览器的响应，这也使得捕获和记录与错误相关的信息变得更加容易，因此您可以修复任何错误：

```
<?php

ob_start();

set_error_handler('whoops');

function whoops($errno, $errstr, $errfile, $errline, $errcontext)
{
  header($_SERVER['SERVER_PROTOCOL'] . ' 500 Internal Server Error', true, 500);
  $logged="$errno: $errstr\nin $errfile at $errline\n";
  foreach($errcontext as $scoped=>$val) {
      $logged.=" $scoped = $val\n";
  }
  $logged.="Output = " . ob_get_clean() . "\n";
  // NB still buffering...
  debug_print_backtrace();
  $logged.="stack trace = " . ob_get_clean() . "\n";
  print "whoops";
  ob_end_flush();
  write_log_file($logged);
  exit;
} 
```

你真的可以处理解析错误——它们发生在你编写和部署了错误的代码时——你应该知道如何在生产系统上防止这种情况发生。添加更多代码来尝试解决问题是矛盾的。

您还应该通过在 ini 文件中设置[display_errors=0](http://www.php.net/manual/en/errorfunc.configuration.php#ini.display-errors)来禁用错误显示（不报告） 。

**更新**

> 我试图捕获使用自定义错误处理程序发生的任何错误，但由于某种原因，人们说它没有捕获解析错误（以及其他一些错误）。

你不知道如何自己测试吗？IIRC 在很大程度上取决于上下文（关闭函数可以捕获包含内容中的一些解析错误）和 PHP 的版本。但是如上所述，如果您已经到了在生产系统上发生此类错误的地步，那是因为您未能正确完成工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T22:12:04.307

*   `error_reporting(0)`使用;关闭错误报告
*   发送您自己的 HTTP 状态代码`header("HTTP/1.0 500 Internal Server Error");`

**参考**

*   [`error_reporting()`](http://us3.php.net/manual/en/function.error-reporting.php)
*   [`header()`](http://us3.php.net/manual/en/function.header.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T22:18:27.583

您可以简单地设置响应代码：

```
http_response_code(500); 
```

# android - Eclipse-Android Storm .apt_generated 不包含在 Dex 文件中

> ID：15180004
> 
> 赞同：1
> 
> 时间：2013-03-02T22:09:25.690
> 
> 标签：android, eclipse

我尝试使用 Storm [http://turbomanage.wordpress.com/2012/12/11/storm-preview/] android orm。

我的 java 类是用这个方法生成的（DataBaseHelper、Dao...）。

但是当我在我的 Sansung 设备上启动我的应用程序时，我遇到了这种类型的异常：java.lang.NoClassDefFoundError : com... Dao

这个类是由storm生成的，我可以在我的 .apt_generated 文件夹中找到。

我认为 Eclipse 不会使用生成的风暴类生成我的 Dex 文件。

你有什么建议来解决这个问题吗？

预先感谢您的回复。

# php - Facebook PHP 抛出异常“（#803）您请求的某些别名不存在”

> ID：15180005
> 
> 赞同：1
> 
> 时间：2013-03-02T22:09:28.767
> 
> 标签：php, facebook, facebook-graph-api

我有一个有效的页面访问令牌，我正在尝试将图片发布到相册（此相册：[https](https://www.facebook.com/media/set/?set=a.333031973457854.77237.323448221082896&type=3) ://www.facebook.com/media/set/?set=a.333031973457854.77237.323448221082896&type= 3）相册然后 ID 是：333031973457854.77237.323448221082896 但我收到此错误：OAuthException：（＃803）您请求的某些别名不存在：33303197345785477237323448221082896（<--正如您看到的专辑ID）谁能指导我通过我所拥有的做错了，我应该如何解决？谢谢 :) 这是我的代码：

```
 <?php
$fbconfig['appid' ]    = "172098812914132";
$fbconfig['secret']    = "XXXXXXXXXXXXXXXXX";
$fbconfig['pageid']    = "323448221082896";
$fbconfig['token1']    = "XXXXXXXXXXXXXXXX";
$fbconfig['token2']    = "XXXXXXXXXXXX";
$fbconfig['my_ulr']    = 'http://'.$_SERVER['SERVER_NAME'];
$albumid = '33303197345785477237323448221082896';
require_once('../scripts/facebook.php');
$facebook = new Facebook(array(
  'appId'  => $fbconfig['appid'],
  'secret' => $fbconfig['secret'],
));

$pageid = $fbconfig['pageid'];
$imagesDir = 'images/';
$images = glob($imagesDir . '*.{jpg,jpeg,png,gif,JPG,JPEG,PNG,GIF}', GLOB_BRACE);
$randomImage = $images[array_rand($images)];
printf("Trying to upload: " . $randomImage . "\n"); // The path to the random image.
try
{
  //  $page_info = $facebook->api("/$pageid?fields=access_token");  
// Album ID 33303197345785477237323448221082896
$args = array(
    'access_token'  => $fbconfig['token2'],
    'source' => 'www.gorillalol.com/i/' . $randomImage,
    );          
    $post_id = $facebook->api("/" . $albumid . "/photos","post",$args);
    unlink($randomImage); // Deletes the file, so it can't get reposted.
    printf("Successful Image Upload :)");
} 
catch (FacebookApiException $e)
{
    printf("Failed. :p");
    printf($e);
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T22:37:22.807

@MathieuImbert 是对的。您需要的部分是第一个整数。

一旦更正，您可能会得到一个空的结果。您还忘记了请求`publish_stream`许可。

此处的官方示例：[https](https://developers.facebook.com/blog/post/498/) ://developers.facebook.com/blog/post/498/ （在您的情况下为场景 2）。

更多信息在这里：[https ://stackoverflow.com/a/3006901/1515819](https://stackoverflow.com/a/3006901/1515819)

# android - 带有谷歌地图 api v2 的 Android IllegalStateException

> ID：15180007
> 
> 赞同：1
> 
> 时间：2013-03-02T22:09:45.520
> 
> 标签：android, google-maps, maps, fragment

我有一个应用程序，在其中我必须显示一个片段（来自 v4 支持库），其中包含地图和位置。我使用了播放服务库，并创建了包含支持地图片段的 XML

```
<fragment
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.SupportMapFragment" /> 
```

我在我的应用程序中使用多个片段，并`FrameLayout`在其中进行片段事务。

我已经定义了这样的位置片段：

```
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.RelativeLayout;
import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.model.BitmapDescriptorFactory;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.Marker;
import com.google.android.gms.maps.model.MarkerOptions;

public class LocationFragment extends Fragment{
    static final LatLng HAMBURG = new LatLng(53.558, 9.927);
    static final LatLng KIEL = new LatLng(53.551, 9.993);
    RelativeLayout rl;
    private GoogleMap map=null;
    @Override
    public View onCreateView (LayoutInflater inflater, ViewGroup container, Bundle savedInstanceBundle)
    {
        if (map==null){
            rl =  (RelativeLayout) inflater.inflate(R.layout.maps, container,false);
            map  = ((SupportMapFragment) getActivity().getSupportFragmentManager().findFragmentById(R.id.map)).getMap();
            Marker hamburg = map.addMarker(new MarkerOptions().position(HAMBURG)
                    .title("Hamburg"));
            Marker kiel = map.addMarker(new MarkerOptions()
                    .position(KIEL)
                    .title("Pilates")
                    .snippet("Pilates teaching")
                    .icon(BitmapDescriptorFactory
                            .fromResource(R.drawable.ic_launcher)));
            map.moveCamera(CameraUpdateFactory.newLatLngZoom(HAMBURG, 15));
            map.animateCamera(CameraUpdateFactory.zoomTo(10), 2000, null);
        }
        return rl;
    }

} 
```

当我第一次单击激活位置片段的按钮时，一切正常。当我单击另一个片段然后再次单击此片段时出现问题，我收到以下错误：

```
E/AndroidRuntime(30571): FATAL EXCEPTION: main
E/AndroidRuntime(30571): java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
E/AndroidRuntime(30571):    at android.view.ViewGroup.addViewInner(ViewGroup.java:3620)
E/AndroidRuntime(30571):    at android.view.ViewGroup.addView(ViewGroup.java:3491)
E/AndroidRuntime(30571):    at android.view.ViewGroup.addView(ViewGroup.java:3436)
E/AndroidRuntime(30571):    at android.view.ViewGroup.addView(ViewGroup.java:3412)
E/AndroidRuntime(30571):    at android.support.v4.app.NoSaveStateFrameLayout.wrap(NoSaveStateFrameLayout.java:40)
E/AndroidRuntime(30571):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:915)
E/AndroidRuntime(30571):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
E/AndroidRuntime(30571):    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
E/AndroidRuntime(30571):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
E/AndroidRuntime(30571):    at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:429)
E/AndroidRuntime(30571):    at android.os.Handler.handleCallback(Handler.java:615)
E/AndroidRuntime(30571):    at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime(30571):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(30571):    at android.app.ActivityThread.main(ActivityThread.java:4921)
E/AndroidRuntime(30571):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(30571):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(30571):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1027)
E/AndroidRuntime(30571):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:794)
E/AndroidRuntime(30571):    at dalvik.system.NativeStart.main(Native Method)
E/android.os.Debug( 2143): !@Dumpstate > dumpstate -k -t -z -d -o /data/log/dumpstate_app_error 
```

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T22:12:16.160

尝试这个：

```
rl =  (RelativeLayout) inflater.inflate(R.layout.maps, null); 
```

# r - 如何计算 R 中线性回归模型中斜率的 95% 置信区间

> ID：15180008
> 
> 赞同：55
> 
> 时间：2013-03-02T22:09:50.243
> 
> 标签：r, statistics, linear-regression, confidence-interval

这是使用 R 的介绍性统计中的一个练习：

使用 rmr 数据集，绘制代谢率与体重的关系图。将线性回归模型拟合到该关系。根据拟合模型，体重 70 公斤的预测代谢率是多少？给出直线斜率的 95% 置信区间。

rmr 数据集位于“ISwR”包中。它看起来像这样：

```
> rmr
   body.weight metabolic.rate
1         49.9           1079
2         50.8           1146
3         51.8           1115
4         52.6           1161
5         57.6           1325
6         61.4           1351
7         62.3           1402
8         64.9           1365
9         43.1            870
10        48.1           1372
11        52.2           1132
12        53.5           1172
13        55.0           1034
14        55.0           1155
15        56.0           1392
16        57.8           1090
17        59.0            982
18        59.0           1178
19        59.2           1342
20        59.5           1027
21        60.0           1316
22        62.1           1574
23        64.9           1526
24        66.0           1268
25        66.4           1205
26        72.8           1382
27        74.8           1273
28        77.1           1439
29        82.0           1536
30        82.0           1151
31        83.4           1248
32        86.2           1466
33        88.6           1323
34        89.3           1300
35        91.6           1519
36        99.8           1639
37       103.0           1382
38       104.5           1414
39       107.7           1473
40       110.2           2074
41       122.0           1777
42       123.1           1640
43       125.2           1630
44       143.3           1708 
```

我知道如何计算给定 x 处的预测 y，但如何计算斜率的置信区间？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-03-02T22:15:28.890

让我们拟合模型：

```
> library(ISwR)
> fit <- lm(metabolic.rate ~ body.weight, rmr)
> summary(fit)

Call:
lm(formula = metabolic.rate ~ body.weight, data = rmr)

Residuals:
    Min      1Q  Median      3Q     Max 
-245.74 -113.99  -32.05  104.96  484.81 

Coefficients:
            Estimate Std. Error t value Pr(>|t|)    
(Intercept) 811.2267    76.9755  10.539 2.29e-13 ***
body.weight   7.0595     0.9776   7.221 7.03e-09 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Residual standard error: 157.9 on 42 degrees of freedom
Multiple R-squared: 0.5539, Adjusted R-squared: 0.5433 
F-statistic: 52.15 on 1 and 42 DF,  p-value: 7.025e-09 
```

斜率的 95% 置信区间是估计系数 (7.0595) ± 两个标准误差 (0.9776)。

这可以使用以下方法计算[`confint`](http://stat.ethz.ch/R-manual/R-patched/library/stats/html/confint.html)：

```
> confint(fit, 'body.weight', level=0.95)
               2.5 % 97.5 %
body.weight 5.086656 9.0324 
```

# java - 从 Eclipse/Android 开发者工具导出 .apk 时出错

> ID：15180015
> 
> 赞同：0
> 
> 时间：2013-03-02T22:10:37.113
> 
> 标签：java, android, eclipse, apk, adt

每次我尝试导出项目时，我都会收到错误消息：

android keytool 错误：java.lang.Exception：未生成密钥对，别名已存在

*   我尝试制作一个新钥匙并使用我的旧钥匙 - 两者都不起作用
*   我尝试将其保存在不同的位置 - 甚至创建了新文件夹以确保没有冲突
*   在创建密钥时尝试填写所有新凭据 - 同样的错误：

“android keytool 错误：java.lang.Exception：未生成密钥对，别名已存在”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-25T02:54:06.353

这个问题是构建.apk 不成功。可能是drawable中的文件名无效..等等..

尝试**导出未签名的 APK**并手动登录

```
appManifest.XML > design> export 
```

修复所有可能发生的错误。

然后你可以正常导出 apk 使用密钥。

希望这有帮助！

# google-app-engine - Google App Engine 找不到本地 python 模块

> ID：15180020
> 
> 赞同：1
> 
> 时间：2013-03-02T22:11:34.703
> 
> 标签：google-app-engine, python-2.7, module, gae-module

出于某种原因，当我昨天上传我的应用程序引擎项目时（在此之前，一切正常），它找不到我的 .py 文件/模块之一。我的目录如下：

```
app_directory/
  gaesessions/
    __init__.py
  lib/
    httplib2/
      __init__.py
      other stuff
  app.yaml
  appengine_config.py
  index.yaml
  All other .py files/modules 
```

由于某种原因，我现在收到以下错误：

```
import_string() failed for 'games.GetMyGames'. Possible reasons are:

- missing __init__.py in a package;
- package or module path not included in sys.path;
- duplicated package or module name taking precedence in sys.path;
- missing module, class, function or variable;

Original exception:

ImportError: cannot import name GameModel 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T02:25:25.567

我意识到我有一个循环导入：

在 File1.py 中

```
from File2 import class1 
```

并在 File2.py

```
from File1 import class3 
```

我改为：在 File1.py

```
import File2 
```

并在 File2.py

```
import File1 
```

我将所有从 File1 和 File2 导入的类移到了文件的下方，这解决了我的问题。希望这对其他人有帮助。

# opengl - 使用 GLEW+GLFW “渲染到纹理”总是黑色

> ID：15180021
> 
> 赞同：0
> 
> 时间：2013-03-02T22:11:38.120
> 
> 标签：opengl, glew, glfw, render-to-texture

我在使用 GLEW + GLFW 时遇到问题...我使用的顺序是：

1.  加载 GLFW 并打开窗口
2.  初始化 GLEW
3.  编译着色器
4.  创建纹理
5.  创建帧缓冲区

这是我的代码的所有流程：

```
if( !glfwInit() )
{
    glfwTerminate();
    throw exception( "Failed to initialize GLFW" );
}

glfwOpenWindowHint( GLFW_FSAA_SAMPLES, 4 );
glfwOpenWindowHint( GLFW_OPENGL_VERSION_MAJOR, 3 );
glfwOpenWindowHint( GLFW_OPENGL_VERSION_MINOR, 3 );
glfwOpenWindowHint( GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE );

if( !glfwOpenWindow( m_width, m_height, 0, 0, 0, 0, 32, 0, GLFW_WINDOW ) )
{
    throw exception( "Failed to open GLFW window." );
    glfwTerminate();
}

if ( glewInit() != GLEW_OK )
{
    throw exception( "Failed to initialize GLEW" );
}

// shaders...
compile some shaders.... glCreateShader(), glCompileShader(), glCreateProgram(), glAttachShader() glLinkProgram(), etc...

// texture
glGenTextures( 1, &m_texture );
glBindTexture( GL_TEXTURE_2D, m_texture );

glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR );
glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );

glTexImage2D( GL_TEXTURE_2D, 0, GL_RGBA8, m_width, m_height, 0, GL_RGBA, GL_UNSIGNED_BYTE, 0);

// frame buffer
glGenFramebuffers( 1, &m_frameBuffer ); // IT CRASHES HERE! :-(
glBindFramebuffer( GL_FRAMEBUFFER, m_frameBuffer );

glBindTexture( GL_TEXTURE_2D, m_texture );

glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR );
glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );

glFramebufferTexture( GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, m_texture, 0 );

GLenum drawBuffers[ 1 ] = { GL_COLOR_ATTACHMENT0 };
glDrawBuffers( 1, drawBuffers );

if ( glCheckFramebufferStatus( GL_FRAMEBUFFER ) != GL_FRAMEBUFFER_COMPLETE )
{
    throw exception( "Problems when creating OpenGL texture in GPU!" );
} 
```

这个流程运行完美，我的意思是，没有崩溃，也没有抛出异常......但是当我在帧缓冲区中绘制一些东西并读回它时，一切都是黑色的。

**详细信息**：除了我不使用 GLFW 之外，我还有一个具有上述确切步骤的版本……也就是说：我自己创建了一个窗口并创建了一个 OpenGL 上下文，并且……一切**正常**！我的着色器编译并运行正常，我的纹理被创建，帧缓冲区，我渲染它并完美地恢复它......但是当我把**GLFW**渲染到纹理停止工作......任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-15T15:38:36.713

您没有使用 glfwMakeContextCurrent(window); 切换上下文

这是 GLFW 和 GLEW 的完整初始化示例：

```
//Init GLFW
if(!glfwInit())
{
    std::cout << "ERROR"  << std::endl; 
    return(-1);
}

//Give hints
glfwWindowHint(GLFW_RESIZABLE, GL_FALSE);
glfwWindowHint(GLFW_VISIBLE, GL_TRUE);
glfwWindowHint(GLFW_DECORATED, GL_TRUE);
glfwWindowHint(GLFW_CLIENT_API, GLFW_OPENGL_API);
glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 4);
glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 1);

#if defined(__APPLE__)
glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);
glfwWindowHint(GLFW_OPENGL_FORWARD_COMPAT, GL_TRUE);
int const DPI = 2; // For retina screens only
#else
glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);
glfwWindowHint(GLFW_OPENGL_FORWARD_COMPAT, GL_FALSE);
glfwWindowHint(GLFW_OPENGL_DEBUG_CONTEXT, GL_TRUE);
int const DPI = 1;
# endif

// Create Wikndow
window = glfwCreateWindow(screenWidth, screenHeight, "DEMO", NULL, NULL );
if(window == 0)
{
    std::cout << "ERROR"  << std::endl;
    glfwTerminate();
    return(-1);
}

//Switch context to use on window
glfwMakeContextCurrent(window);

//Init glew
glewExperimental = GL_TRUE;
if (glewInit() != GLEW_OK)
{
    std::cout << "ERROR" << std::endl;
    return(-1);
} 
```

# java - WindowManager removeView 抛出“硬件加速...”异常

> ID：15180022
> 
> 赞同：0
> 
> 时间：2013-03-02T22:11:46.623
> 
> 标签：java, android, exception

我有以下代码：

```
protected View progressView;
protected LayoutParams progressParams;

class Task extends AsyncTask<String, Void, Result> {
    String timeleft;
    String error;

    @Override
    protected Result doInBackground(String... s) {          
        // ...
    }

    @Override
    public void onPreExecute() {
        getWindowManager().addView(progressView, progressParams);
    }

    @Override
    protected void onPostExecute(Result result) {           
        getWindowManager().removeView(progressView); // throws exception
        // ...
    }
} 
```

我在手机上遇到此错误（不在模拟器中）。也许是因为我使用了 tyween 的 HTC HD2 Android ROM，它启用了很多东西并且“生活在边缘”。

```
03-02 22:53:08.303: E/test(5573): Exception: Hardware acceleration can only be used with a single UI thread.
03-02 22:53:08.303: E/test(5573): Original thread: Thread[main,5,main]
03-02 22:53:08.303: E/test(5573): Current thread: Thread[background thread,5,main] 
```

如何解决此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T23:25:04.600

可以通过将 android:hardwareAccelerated="false" 放在清单中的应用程序标记中来避免此问题。但这当然不能解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-05T16:32:00.107

尝试在您的 UI 线程中添加视图。

# jquery - 在 jQuery 跨域中使用 trigger('click')

> ID：15180031
> 
> 赞同：0
> 
> 时间：2013-03-02T22:12:24.640
> 
> 标签：jquery, html, triggers, click

我正在尝试使用 jQuery 从一个单独的站点基本上启动一个游戏。

[http://webstudios.webs.com/rbxlaunch.htm](http://webstudios.webs.com/rbxlaunch.htm)

我的来源是

```
<html>
    <head>
        <title>ROBLOX Games!</title>
        <iframe width="100%" height="100%" id="Frame" seamless src="" scrolling=no style="position: absolute; top: 200px; left: 0px;"></iframe>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>
            function VisitPlace(ID) {
                alert("Clicked.");
                $('#test').trigger('click');
                document.getElementById("Frame").src = "http://www.roblox.com/--place?id=" + ID;
                $("#Frame").load(function(){
                    alert("Done loading.");
                    $('#Frame').contents().find("#ctl00_cphRoblox_VisitButtons_MultiplayerVisitButton").trigger('click')
                                        alert("Enjoy the game");
                });
            }
        </script>
    </head>
    <body>
        <center>
            <button onclick="javascript:VisitPlace(487316);">ROBLOX remote visit test.</button>
            <button id="test" onclick="javascript:alert('Hello');">Ignore me.</button>
        </center>
</body>
</html> 
```

我猜它由于跨域而无法正常工作。有哪些变通方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T22:26:46.640

没有人为干预、服务器端操作或目标站点的合作，据我所知，您无能为力。

# sharepoint - 如何从类库项目创建 SharePoint Web 部件？

> ID：15180034
> 
> 赞同：0
> 
> 时间：2013-03-02T22:12:38.027
> 
> 标签：sharepoint

我得到了一个 SharePoint Web 部件项目，其输出类型设置为类库以部署在 SharePoint 场上。这一切都很好，没有错误。

但是，由于输出类型，该项目没有打包为 DWP - 在 Build 菜单中 VS2010 不显示 Package 项。

在 Visual Studio 2010 中从此类项目创建 DWP 包的方法是什么？

我是否应该从一个空的 SharePoint Web 部件项目创建一个新的 Web 部件项目并将 cs 文件添加到编译和新项目？或者有什么好方法？

谢谢， 瓦尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T22:48:05.333

是的，您可以在 Visual Studio 中创建一个 SharePoint Web 部件项目，然后将您的类库项目添加到其中。可以选择将您的 Web 部件项目打包到 wsp 文件中并进行部署。确保在 Web 部件项目中将类库添加到 GAC。

# jquery - ASP.NET MVC 4 操作在 jQuery 发布请求后返回旧数据

> ID：15180035
> 
> 赞同：1
> 
> 时间：2013-03-02T22:13:00.640
> 
> 标签：jquery, asp.net-mvc-4, partial-views

在 jQuery 向 MVC 操作发出请求后，我遇到了接收数据的问题。我有标准场景。我必须从用户那里收集一些信息并将其发送到操作以将此数据添加到数据源并将新条目的 id 返回到 UI 以供进一步使用。

jQuery

```
$('#somediv').on('click', '.Save', function () {
    var data = $(this).closest('form').serialize();
    $.post('/home/add', data, function (data) {
        $('#div-container').html(data);            
    });
}); 
```

MVC 动作

```
[HttpPost]
public ActionResult Add(Data data)
{
    Data addedData = logic.Add(data);
    ViewData.Model = addedData;
    return PartialView("PatrialView");
} 
```

局部视图

```
@model MyClass.Data

@using (Html.BeginForm())
{
        <div id="div-container">
            @Html.HiddenFor(model => Model.Id)                
            @Html.TextBoxFor(model => Model.Name)                
        </div>

        <input type="button" class="btn Save" value="Save" />
    </div>
</li>
} 
```

家庭控制器也有一个过滤器来禁用缓存。

```
[OutputCache(NoStore = true, Duration = 0, VaryByParam = "*")] 
```

正确的数据开始行动。ViewData.Model 在调用局部视图之前包含正确的 id。此外，我通过视图进行了调试，并且数据被正确设置为控件，但响应正文（由 IE 开发工具检查）的 id = 0。您能否告知我的代码有什么问题？

# ios - 将 JSON 放入数组

> ID：15180036
> 
> 赞同：0
> 
> 时间：2013-03-02T22:13:04.080
> 
> 标签：ios, json, ios6, nsarray, afnetworking

在请求和 JSON 方面，我是个菜鸟。在我的应用程序中，我发送到服务器并取回东西，所以我当然可以使用它。我尝试查找不同的东西，但似乎没有一个是我真正想要的。所以我要找回似乎格式化为 JSON 的内容。我想知道如何将其放入 NSMutable 数组中。我得到这个 JSON 的方法是使用 AFNetworking 的 AFJSONRequestOperation。

我的回复看起来像这样。

```
{
    id = 38;
    name = "St. Martin Hall";
},
    {
    id = 40;
    name = "Assumptions Commons";
},
    {
    id = 41;
    name = "Vickroy Hall";
},
    {
    id = 42;
    name = "St. Ann Hall";
},
    {
    id = 37;
    name = "Duquesne Towers";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T02:14:23.940

如果您的 JSON 格式像 {"mainKey":[{},{},...]}

```
 NSError* error;
    NSDictionary* json = [NSJSONSerialization 
        JSONObjectWithData:responseData //1
         options:kNilOptions 
        error:&error];

    NSArray* dataArray = [json objectForKey:@"mainKey"]; //2 
```

否则你的 JSON 格式像 [{},{},...]

```
NSError* error;
    NSArray* dataArray = [NSJSONSerialization 
        JSONObjectWithData:responseData //1
        options:kNilOptions 
        error:&error]; 
```

我认为您的格式是案例 2：[] Array of Object {}

教程：[http ://www.raywenderlich.com/5492/working-with-json-in-ios-5](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)

JSON： http: [//www.json.org](http://www.json.org)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T22:17:36.180

> 您使用`NSJSONSerialization`该类将 JSON 转换为 Foundation 对象并将 Foundation 对象转换为 JSON。

此类在 iOS 5.0+ 中可用。如果您的目标是较旧的 iOS 版本，请查看第三方 JSON 框架：

[Objective-C 的 JSON 解析器比较（JSON 框架、YAJL、TouchJSON 等）](https://stackoverflow.com/questions/2256625/comparison-of-json-parser-for-objective-c-json-framework-yajl-touchjson-etc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T22:22:10.493

如果这就是你要回来的东西，那恐怕不是 JSON。它在某种程度上看起来像 Javascript，但它应该更像

```
[
  {
     "id" : 38,
     "name" : "St. Martin Hall"
  },
  {
     "id" : 39,
     "name" : "Assumptions Commons"
  }
] 
```

# php - 在非对象 PHP 上调用成员函数 prepare()

> ID：15180040
> 
> 赞同：-1
> 
> 时间：2013-03-02T22:13:41.390
> 
> 标签：php, mysql, pdo

这是我连接到数据库的代码

```
function createConnection($DB_USER, $DB_PASSWORD){

    $dbc = new PDO('mysql:host=****', $DB_USER, $DB_PASSWORD);

} 
```

和下面是被调用函数的代码

```
function checkIfUserExists($dbc, $username, $table){

    global $dbc;

    $stmt = $dbc->prepare("SELECT * FROM ? WHERE username = ?");
    $stmt = bindParam(1, $table);
    $stmt = bindParam(2, $username);
    $stmt->execute();

} 
```

下面是我用来调用它们的代码

```
$connect = new databaseOperations;
$connect->createConnection($DB_USER, $DB_PASSWORD);
$connect->checkIfUserExists($dbc, login, Username); 
```

我的问题是为什么我在页面加载时在非对象错误上调用成员函数 prepare()？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T22:20:15.707

您会得到它，因为`$dbc`您传递给该`checkIfUserExists`方法的方法在全局范围内不可用，只能在创建它的范围内（在本例中为 的范围`createConnection`）。

解决方案很简单：**永远不要在您的代码中使用全局变量，**并且您应该使用全局变量的最后一个代码是在 OOP 代码中。

使用这样的东西：

```
class DatabaseOperations
{
    private $dbc;

    public function createConnection(...)
    {
        $this->dbc = new PDO(...);
    }

    public function checkIfUserExists(...)
    {
        $this->dbc->prepare(...);
        // ...
    }
}

$db = new DatabaseOperations();
$db->createConnection(...);
$db->checkIfUserExists(...); 
```

或者返回函数`$dbc`中的`createConnection`变量并将其传递给其他函数。

> **重要的旁注：**这肯定不是你应该使用类的方式。阅读有关 OOP 和类似程序的内容。在这种情况下，您通常在`User`(Active Record) 或`UserMapper`(DataMapper) 对象上有一个方法来检查它是否存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T22:20:34.597

```
function createConnection($DB_USER, $DB_PASSWORD){

    $dbc = new PDO('mysql:host=****', $DB_USER, $DB_PASSWORD);
    return $dbc; // <---- add this...

}

function checkIfUserExists($dbc, $username, $table){

// ---> no need to use global, because you pass $dbc as an argument 
```

打电话...

```
$dbc = $connect->createConnection($DB_USER, $DB_PASSWORD); 
```

# javascript - 使用greasemonkey解析JSONP响应（来自express.js服务器）客户端

> ID：15180049
> 
> 赞同：1
> 
> 时间：2013-03-02T22:14:52.637
> 
> 标签：javascript, jquery, express, cross-domain, greasemonkey

我们正在开发一个greasemonkeyscript，以从快速服务器跨域中提取数据。[（我们在这里](https://stackoverflow.com/questions/7596885/cross-domain-jquery-getjson-from-a-node-js-using-express-server-does-not-work)找到了适用于普通 html 网站的代码：）

你能让这个为greasemonkey工作吗？（也许与 unsafeWindow ？）

应用程序.js：

```
var express = require("express");
var app = express();
var fs=require('fs');
  var stringforfirefox = 'hi buddy!'

// in the express app for crossDomainServer.com
app.get('/getJSONPResponse', function(req, res) {

    res.writeHead(200, {'Content-Type': 'application/javascript'});
    res.end("__parseJSONPResponse(" + JSON.stringify( stringforfirefox) + ");");
});
app.listen(8001) 
```

油脂猴脚本：

```
// ==UserScript==
// @name          greasemonkeytestscript
// @namespace     http://www.example.com/
// @description   jQuery test script
// @include       *
// @require       http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js

// ==/UserScript==

function __parseJSONPResponse(data) {    alert(data); }       // ??????????

document.onkeypress = function keypressed(e){

    if (e.keyCode == 112) {
        var script = document.createElement('script');
        script.src = 'http://localhost:8001/getJSONPResponse';
        document.body.appendChild(script); // triggers a GET request
        alert(script);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T23:50:19.777

我以前从未使用过*Express*，但该应用程序看起来返回的代码如下：

```
__parseJSONPResponse("\"hi buddy!\""); 
```

它被放置在**目标页面范围内**`<script>`的一个节点中。

 **这意味着 Greasemonkey 脚本还必须将`__parseJSONPResponse`函数置于目标页面范围内。

一种方法是：

```
unsafeWindow.__parseJSONPResponse = function (data) {
    alert (data);
} 
```

* * *

* * *

但是，看起来您控制的是 Express 应用程序。如果这是真的，那么不要将 JSONP 用于这种事情。使用[GM_xmlhttpRequest()](http://wiki.greasespot.net/GM_xmlhttpRequest)。

`app.js`可能变成：

```
var express             = require ("express");
var app                 = express ();
var fs                  = require ('fs');
var stringforfirefox    = 'hi buddy!'

app.get ('/getJSONPResponse', function (req, res) {

    res.send (JSON.stringify (stringforfirefox) );
} );

app.listen (8001) 
```

GM 脚本类似于：

```
// ==UserScript==
// @name        greasemonkeytestscript
// @namespace   http://www.example.com/
// @description jQuery test script
// @include     *
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant       GM_xmlhttpRequest
// ==/UserScript==

document.onkeypress = function keypressed (e){

    if (e.keyCode == 112) {
        GM_xmlhttpRequest ( {
            method:     'GET',
            url:        'http://localhost:8001/getJSONPResponse',
            onload:     function (respDetails) {
                            alert (respDetails.responseText);
                        }
        } );
    }
} 
```**

# c++ - 在字节数组中查找字节模式

> ID：15180051
> 
> 赞同：0
> 
> 时间：2013-03-02T22:15:02.607
> 
> 标签：c++, search, byte

今天我试图在数组中找到一个字节模式（在这种情况下是指针）

我知道我可以使用 std::string needle() 和 haystack 等，但我想知道是否可以将它与 BYTE（无符号字符）一起使用？

我也知道 BYTE *_zone 的长度，所以这也不是问题。我有什么办法可以做到这一点？（也赞赏任何代码示例:)）

再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T22:21:12.167

的`find()`方法`std::string`是一个成员函数，用于在 std::string中查找另一个`std::string`或字符数组`char*`

因此，要回答您的问题，如果 haystack 是 a `std::string`，您应该能够将`char*`数组直接传递给 find 方法。

如果干草堆不是`std::string`你可以从中做`std::string`出来，然后做同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T22:19:17.080

`std::string`实际上是`std::basic_string<char>`. 您可以`std::basic_string<BYTE>`改用，并且大多数（全部？）`std::string`功能，特别是`.find()`，都可以正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T22:19:22.960

如果您不想使用现有的库函数，请实现您最喜欢的通用字符串匹配算法，例如[Knuth-Morris-Pratt](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm)、[Boyer-Moore](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm)或[Rabin-Karp](http://en.wikipedia.org/wiki/Rabin%E2%80%93Karp_string_search_algorithm)。

# android - NDK 构建失败

> ID：15180058
> 
> 赞同：1
> 
> 时间：2013-03-02T22:16:13.570
> 
> 标签：android, android-ndk, compiler-errors

我是使用 ndk 的新手。看到一些帖子和谷歌搜索，我找到了使用 NDK 编译本机文件的方法。我安装了ndk r7c。但是，当我使用命令 ndk-build 时，出现以下错误：

```
/cygdrive/d/android-ndk-r7c-windows/android-ndk-r7c/ndk-build
/cygdrive/d/android-ndk-r7c-windows/android-ndk-r7c/ndk-build: line 40: dirname: command not found
/cygdrive/d/android-ndk-r7c-windows/android-ndk-r7c/ndk-build: line 78: uname: command not found
ERROR: Unknown host operating system: 
```

我的项目目录是：

```
Haris Riaz@HarisRiaz-PC /cygdrive/d/reader-2/android/jni 
```

我无法知道问题的性质。请帮助我这个错误是什么以及如何解决它。谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T22:25:18.270

从`Haris Riaz@HarisRiaz-PC`我可以推断出你是在 Linux 上运行的。但是根据`android-ndk-r7c-windows`，您正在尝试运行 NDK 的 Windows 版本。并`ERROR: Unknown host operating system:`证实了这一点。[从这里](http://developer.android.com/tools/sdk/ndk/index.html)下载 NDK 的 Linux 版本，你应该没问题。

# python - 显示运行键中的所有值

> ID：15180063
> 
> 赞同：1
> 
> 时间：2013-03-02T22:16:59.987
> 
> 标签：python, windows, registry, winreg

我对 python 编程很陌生，我有点迷失在这里，如果我能得到一些关于这段代码的帮助，我真的很感激。

所以我试图只列出 Run 键中的所有值。这是为了找出计算机启动时运行的程序...

我把这段代码放在一起，但我不知道如何让它列出所有的值。

注意：在查询值 ex 而不是 3 个点中应该有一些东西，但我不知道该放什么让它显示所有值。

请帮助我一无所知。

```
from _winreg import *
aReg = ConnectRegistry(None,HKEY_LOCAL_MACHINE)
aKey = OpenKey(aReg, r"SOFTWARE\Microsoft\Windows\CurrentVersion\Run")
for i in range(1024):
    try:
        subkey_name=EnumKey(aKey,i)
        subkey=OpenKey(aKey,subkey_name)
        val=QueryValueEx(subkey, "...")
        print val
    except WindowsError:
        break 
```

# ruby - ruby csv 将单引号添加到特定列

> ID：15180066
> 
> 赞同：0
> 
> 时间：2013-03-02T22:17:16.930
> 
> 标签：ruby, csv

我正在使用 Ruby csv 库，我想知道如何将单引号添加到特定列。

示例行：`1,56,"James",Finland`

说我想添加引号`Finland`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T22:28:34.823

尝试类似的东西

首先读取 CSV 并拉出数组中的所有行

```
 arr = []
  CSV.foreach('test.csv') {|row|  arr << row } 
```

然后使用数组拉出要保留在双引号中的列

```
 arr.each do |row|
  column_value = row[3] #I am assuming i am editing the second column
  row[3].replace("'" + "#{column_value}" + "'")
  end 
```

然后写回文件

```
 CSV.open("path/to/file.csv", "wb") do |csv|
  arr.each {|row| csv << row }
end 
```

# java - 每次获取相同的随机数

> ID：15180070
> 
> 赞同：1
> 
> 时间：2013-03-02T22:18:01.110
> 
> 标签：java, random

我正在尝试编写一个程序，该程序生成一个随机学校时间表，该时间表具有随机位置和每个教师的随机小时数，但每天的总时间量是固定的。目前，该程序被编写为使用两天，我遇到了一个问题：两天之间时间量的随机生成值是相同的：

```
import java.util.Random;
public class randomTimetable {  

    public static void main(String[] args) {    
        String newLine = System.getProperty("line.separator"); 
        System.out.println("For each day (x + y + ... n) >= 5 and" +newLine +"(x && y && ... n) <= 2" +newLine);
        createTimetable();

    }
private static void createTimetable() { 
    String x_g1 = "x";
    String y_g1 = "y";
    String z_g1 = "z";
    String m_g1 = "m";
    String[] arrayTimetablePosition1={x_g1, y_g1, z_g1, m_g1};
    String newLine = System.getProperty("line.separator"); 

    System.out.println("Work In Progress" +newLine +"Total subjects = 5" +newLine +"Day 1");    

    Random rand = new Random();
    int min = 0;
    int max = 2;
    int x1 = rand.nextInt(max - min + 1) + min;
    int y1 = rand.nextInt(max - min + 1) + min;
    int z1 = rand.nextInt(max - min + 1) + min;
    int m1 = rand.nextInt(max - min + 1) + min;
    while((x1 + y1 + z1 + m1) != 5) {
        x1 = rand.nextInt(max - min + 1) + min;
        y1 = rand.nextInt(max - min + 1) + min;
        z1 = rand.nextInt(max - min + 1) + min;
        m1 = rand.nextInt(max - min + 1) + min;
    }   

    System.out.println("x1 = " +x1 +newLine +"y1 = " +y1 +newLine +"z1 = " +z1 +newLine +"m1 = " +m1 +newLine);
    System.out.println("Total subjects = 5" +newLine +"Day 2");
    int x2 = rand.nextInt(max - min + 1) + min;
    int y2 = rand.nextInt(max - min + 1) + min;
    int z2 = rand.nextInt(max - min + 1) + min;
    int m2 = rand.nextInt(max - min + 1) + min;

    while((x2 + y2 + z2 + m2) != 5 && (x1 == x2 || y1 == y2 || z1 == z2 || m1 == m2)) {
        x2 = rand.nextInt(max - min + 1) + min;
        y2 = rand.nextInt(max - min + 1) + min;
        z2 = rand.nextInt(max - min + 1) + min;
        m2 = rand.nextInt(max - min + 1) + min;
        }   
    System.out.println("x2 = " +x1 +newLine +"y2 = " +y1 +newLine +"z2 = " +z1 +newLine +"m2 = " +m1 +newLine);
    }
} 
```

具体来说，x1 的值与 x2 相同，y1 的值与 y2 相同，依此类推。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T22:21:50.727

你是随机构造很好 - 你正在使用默认构造函数，它会自动使用时间作为种子：

```
public Random() { this(System.currentTimeMillis()); } 
```

但是您在最后一个调试打印语句中有一个复制/粘贴错误。您的标签上写着 x2，但您正在打印 x1，等等。

```
System.out.println("x2 = " +x1 +newLine +"y2 = " +y1 +newLine +"z2 = " +z1 +newLine +"m2 = " +m1 +newLine); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T22:20:43.697

看起来你正在使用相同的种子。看：

[http://docs.oracle.com/javase/6/docs/api/java/util/Random.html](http://docs.oracle.com/javase/6/docs/api/java/util/Random.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T22:20:54.227

我看不到伪随机数生成器的任何初始化。

您需要设置 PRNG 的种子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T22:34:18.563

大声笑，这是一个复制粘贴错误

最后一行应该是

System.out.println("x2 = " + **x2** +newLine +"y2 = " + **y2** +newLine +"z2 = " + **z2** +newLine +"m2 = " **+m2** +newLine);

但这听起来像是一个经典的随机种子问题。这很有趣。

# cocoa-touch - 难以访问数据库记录

> ID：15180076
> 
> 赞同：0
> 
> 时间：2013-03-02T22:18:28.590
> 
> 标签：cocoa-touch, sqlite

我正在尝试在我的应用程序中添加 SQLite 支持，但遇到了问题，所以我尝试在 Internet 上搜索一些内容，并找到了一个教程。但问题是本教程使用的数据库是由应用程序读取的，但是当我添加我的个人数据库（我已经修改了代码）时，它没有被读取。有什么建议么？

这是（部分）代码：

```
static sqlite3 *database = nil;
if (sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK) {

    const char *sql = "select id,name from myDb";
    sqlite3_stmt *selectstmt;

    if(sqlite3_prepare_v2(database, sql, -1, &selectstmt, NULL) == SQLITE_OK) {
        while(sqlite3_step(selectstmt) == SQLITE_ROW) {

            id = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 0)];
            name = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 1)];

            dictionary = [[NSMutableDictionary alloc] initWithObjectsAndKeys:id, @"id", name, @"nome", nil];

            [dictionary release];
        }
    }

else{
    sqlite3_close(database);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T22:25:55.283

在 else 语句之前，您需要释放资源：

```
 // "Finalize" the statement - releases the resources associated with the statement.
    sqlite3_finalize(selectstmt); 
```

声明的目的是什么`release`？

# javascript - Ember.js RC1 获取路由名称

> ID：15180082
> 
> 赞同：2
> 
> 时间：2013-03-02T22:19:28.250
> 
> 标签：javascript, coffeescript, ember.js, ember-router

我有一个 ember 应用程序，我在其中进行一些条件重定向，但希望能够在用户跳过一些障碍后将请求传递到它的原始位置。

我有这样的东西（咖啡脚本）

```
Ember.Route.reopen: ->
    redirect: ->
        if @controllerFor('specialOffers').get('should_offer')
            #This next line is what I need help with
            @controllerFor('specialOffers').set('pass_through', HOW_DO_I_GET_STRING_NAME_OF_CURRENT_ROUTE)
            # After this property is set and the user interacts
            # with the special offers, they will be redirected back
            # to wherever they intended to go
            @transitionTo('specialOffers') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T23:01:31.783

你想`currentPath`从`applicationController`：

```
App.ApplicationController = Ember.Controller.extend({
  printCurrentPath: function() {
    var currentPath = this.get('currentPath')
    console.log("The currentPath is " + currentPath);
  }.observes('currentPath')
}); 
```

然后在您的任何控制器中，您可以使用API（在[此处](http://www.kaspertidemann.com/auto-synthesized-controllers-when-using-the-needs-api-in-ember-js/)`currentPath`阅读）从中访问，如下所示：`applicationController``needs`

```
App.SomeOtherController = Ember.Controller.extend({
  needs: ['application'],

  printCurrentPath: function() {
    var applicationController = this.get('controllers.application');
    var currentPath = applicationController.get('currentPath');
    console.log('Look ma, I have access to the currentPath: ' + currentPath);
  }.observes('controllers.application.currentPath')
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T22:41:14.343

这似乎可行......但我不知道这是否是获得这个价值的合法方式。

```
Ember.Route.reopen({
  redirect: function() {
    console.log(this.routeName);
  }
}) 
```

[JSFiddle 示例](http://jsbin.com/ixupad/122/edit)

# java - 实例化类时抛出异常

> ID：15180085
> 
> 赞同：0
> 
> 时间：2013-03-02T22:19:58.967
> 
> 标签：java, list, class, constructor, instantiation

我有一个非常简单的问题-

我有一个名为的类`DEClient`，其构造函数是这样的-

```
public DEClient(List<DEKey> keys) {
    process(keys);
} 
```

`DEKey` 上课是这样的——

```
public class DEKey {

    private String name;
    private String value;

    public DEKey(){
        name = null;
        value = null;
    }

    public DEKey(String name, String value){
        this.name  = name;
        this.value = value;
    }

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }

    public String getValue() {
        return value;
    }
    public void setValue(String value) {
        this.value = value;
    }
} 
```

现在我正在尝试实例化`DEClient`构造函数。所以为此我需要拥有`List<DEKey>`.

所以我所做的是我使用（将返回）和作为值来实例化如下所示的`DEKey`类。`service.getKeys()``String``id`

```
DEKey dk = new DEKey(service.getKeys(), id);

//The below line throws exception whenever I am running.
DEClient deClient = new DEClient((List<DEKey>) dk); 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T22:24:36.087

您需要先制作一个`List`，然后将您的密钥添加到该`List`。像你所做的那样铸造不是这样做的方法，因为`DEKey`is *not* a`List`并且铸造它会抛出一个`ClassCastException`.

```
DEKey dk = new DEKey(service.getKeys(), id);

List<DEKey> list = new ArrayList<DEKey>();
list.add (dk);

DEClient deClient = new DEClient(list); 
```

# jquery-mobile - on() 不适用于使用 jQuery 的实时数据，如何？

> ID：15180086
> 
> 赞同：1
> 
> 时间：2013-03-02T22:20:09.713
> 
> 标签：jquery-mobile, onclick, jquery, jquery-on

我有一些动态数据被附加到列表中，并且该数据中的任何链接似乎都不起作用。

我正在使用 jquery 1.8.3 并且`on()`应该考虑该`live`方法，我认为

```
setInterval(function () {
    getNot();
}, 2000);

function getNot() {
    var data = {
        t1: 'test1',
        t2: 'test2',
        t3: 'test3'
    };
    var size = 0,
        li = '';
    $.each(data, function (k, v) {
        li += '<li>' +
            '<a href="#" class="add" data-listid="' + k + '">' +
            '<h2>load data - ' + k + '</h2>' +
            '</a>' +
            '</li>';
        size++;
    });

    var but = $('#not'),
        ul = $('#not_ul');

    but.find('span').text(size + ' Notifications');
    ul.html(li);
    ul.listview().listview("refresh");
}

// this doesn't seem to work
$('.add').on("click", function () {
    var listId = $(this).data('listid');
    console.log(listId);
    return false;
}); 
```

[在此处查看完整示例](http://jsbin.com/ilumov/39/edit)

关于这个问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T22:21:10.000

```
$('.add').on("click", function () { 
```

您需要传递一个选择器来`on`生成一个*委托事件*：

```
$('#{containerId}').on("click", '.add', function () {
    var listId = $(this).data('listid');
    console.log(listId);
    return false;
}); 
```

`containerId`应该是最接近动态 created s 元素的**静态元素。**`.add`

# ios - Monotouch 的照片/图像查看器

> ID：15180098
> 
> 赞同：12
> 
> 时间：2013-03-02T22:20:59.533
> 
> 标签：ios, image, xamarin.ios, photo, viewer

我用谷歌搜索了一下，但找不到在我的 MonoTouch 应用程序中使用的简单图像查看器类。

我不需要显示图像缩略图，也不需要显示完整的相册（包含多张照片）。

我只需要一个图像查看器来显示一个 UIImageView，允许常见的全屏/缩放操作。

显然，这样的查看器可以使用`UIViewController`带有`UIGestureRecognizer`,`UIScrollView`和`UINavigationBar`诡计的子类来实现，但我不想重新发明轮子。有人知道可用的开源组件吗？

[在新的Xamarin 组件存储](http://components.xamarin.com)中托管此类组件也很有用

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T10:31:00.023

[这里是。](https://bitbucket.org/MaximKorobov/imageviewer/)

**特征：**

*   同时显示大图像（大于屏幕）和小图像；
*   一键关闭视图，两键放大/缩小。还可以使用捏合缩放；
*   滚动浏览可用内容。在可见区域之外滚动图像是不可能的。感谢`UIScrollView`的`ContentSize`财产。

**对未来的建议：**

*   `UINavigationBar`我通过删除使用来减少代码。
*   `UIView`当用户打开/关闭全屏图像视图时，添加 的基本动画（淡入/淡出）也很好。

**一些相关信息：**

*   解决方案受到[这篇文章](http://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content)的强烈启发。
*   作为修补的起点，我推荐[Xamarin 的文章](http://docs.xamarin.com/recipes/ios/content_controls/scroll_view/implement_tap-to-zoom)。

欢迎任何错误报告和建议！

# terminal - 查找并重命名文件扩展名不正确的所有图片

> ID：15180099
> 
> 赞同：2
> 
> 时间：2013-03-02T22:21:06.110
> 
> 标签：terminal, grep, find, rename

我正在寻找一种方法来自动重命名具有错误文件扩展名的所有图像。到目前为止，我至少找到了如何获取所有这些文件的列表：

```
find /media/folder/ -name *.jpg -exec file {} \; | grep  'PNG\|GIF' > foobar.txt
find /media/folder/ -name *.png -exec file {} \; | grep 'JPEG\|GIF' >> foobar.txt
find /media/folder/ -name *.gif -exec file {} \; | grep 'JPEG\|PNG' >> foobar.txt 
```

但是，我也想自动重命名。我尝试过类似的事情

```
find /media/folder/ -name *.jpg -exec file {} \; | grep -l PNG | rename s/.jpg/.png/ 
```

但在这种情况下`grep -l`，或者`grep -lH`不要像我想的那样只列出文件名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T23:48:17.103

`-l`和`-H`标志`grep`在您的示例中没有用。这些标志在与标准输入一起使用时不起作用，就像在您的示例中来自管道一样。这些标志仅在您指定文件（或目录和`-r`递归标志）时才有效，例如：

```
grep -rl PNG path/to/dir1 file2 file3 
```

在您的示例`-l`中没有效果，因此输出是匹配的完整行，`PNG`在您的示例中可能如下所示：

> icon.png：PNG 图像，512 x 512，8 位/彩色 RGBA，非隔行扫描

要仅获取文件名，也许您可​​以像这样切断冒号后的所有内容：

```
find /media/folder/ -name *.jpg -exec file {} \; | grep PNG | sed -e s/:.*// | rename s/.jpg/.png/ 
```

# javascript - 变量赋值防止删除项目？

> ID：15180107
> 
> 赞同：1
> 
> 时间：2013-03-02T22:21:51.403
> 
> 标签：javascript, jquery

我正在创建可编辑区域，其中普通文本被输入替换，您可以编辑值。编辑后，您可以按 Enter 或单击按钮接受。在编辑期间`edited`变量设置为 true 以防止其他字段可编辑。这是HTML

```
 <section class="person-info">
            <div class="row">
                <span id="name" class="editable">Martin Chikilian</span>
                <span id="living-place" class="editable">Portland, Oregon, USA</span>
                <span id="langs" class="editable">English, French, German</span>
            </div>
        </section> 
```

和javascript代码：

```
$(function(){

var edited = false;

$('.editable').click(function(){
    if(!edited){
        edited = true;
        var _this = $(this);
        var confirmIcon = (_this.attr('id') == 'name') ? 'big-confirm' : 'confirm';
        var text = $(this).text();

        //this will be injected into editable element to replace existing text
        var input = $('<input type="text" value="' + text +'" /><span id="accept" class="icon ' + confirmIcon + '"></span>');

        _this.html('');
        _this.append(input);
        input.focus();
        var accept = _this.find('#accept');

        //binding click event to confirmation button
        accept.click(function(){
                var inputVal = input.val();
                _this.html(inputVal);
                //edited = false;
        });

        //binding event to enter press
        input.keypress(function(e){
            if(e.which == 13){
                var inputVal = input.val();
                _this.html(inputVal);
                edited = false;
            }
        });
    }
});

}); 
```

当您按 Enter 时一切正常，但是当我尝试通过单击接受按钮来执行此操作时，除非我删除变量赋值，否则它什么也不做`edited = false;`。但不能这样，因为它会阻止其他字段可编辑。问题是什么？是因为附加了事件的元素（接受按钮）也被删除了吗？有没有人对这种行为有任何解决方案或明确的解释？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T22:52:19.390

由于`#accept`是 的子级`.editable`，因此`click`您正在侦听的事件会[在 DOM 中冒泡，](http://www.quirksmode.org/js/events_order.html)并且单击处理程序`.editable`也会被触发，从而导致`edited === true`.

您可以通过使用以下方法阻止事件传播来解决此问题[`event.stopPropagation()`](http://api.jquery.com/event.stopPropagation/)：

```
accept.click(function(e){
    var inputVal = input.val();

    _this.html(inputVal);
    edited = false;
    e.stopPropagation();
}); 
```

**示例：http:** [//jsfiddle.net/6zAN7/13/](http://jsfiddle.net/6zAN7/13/)

# wrapper - ApacheDS 启动，发现 wrapper nod

> ID：15180109
> 
> 赞同：2
> 
> 时间：2013-03-02T22:22:01.100
> 
> 标签：wrapper, startup, apacheds

我希望小组可以帮助我。我已经将 ApacheDS 用于开发目的大约 6 个月了，我对此非常满意。在我的笔记本电脑上运行 Ubuntu linux 没问题。

我最近开始为 LDAP 服务器创建我的生产环境。生产服务器在专用服务器上的 Atlantic.net 云环境中运行。我没有问题地安装了DS。但是当我尝试启动 DS 时，出现以下错误：

/opt/apacheds-2.0.0-M10/bin/apacheds：1：评估：/opt/apacheds-2.0.0-M10/bin/wrapper：未找到

包装文件位于 eval 正在查找的位置，所以我不知道为什么会出现“未找到”。

如果我直接调用包装器， ./wrapper start default 我得到： -bash: ./wrapper: No such file or directory

下面是 bin 目录 drwxr-xr-x 2 apacheds apacheds 4096 Feb 24 10:40 。drwxr-xr-x 5 apacheds apacheds 4096 2 月 23 日 12:22 .. -rwxr-xr-x 1 apacheds apacheds 15346 2 月 23 日 12:22 apacheds -rwxr-xr-x 1 apacheds apacheds 99401 2 月 23 日 12:22 包装

这是密码文件 apacheds:x:1000:1000::/opt/apacheds-2.0.0-M10:/bin/sh 的条目，所以我认为这不是 id 问题。

我正在运行 Ubuntu Linux 12.04 LTS (GNU/Linux 3.2.0-38-generic x86_64)

有没有人见过这样的事情？我有搜索谷歌，但什么都没有出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T10:54:33.777

我正在经历完全相同的行为。截至目前，我正在使用没有包装器的 java（.tar 不是 .deb 或 .bin）版本。我可以通过 bin/apacheds.sh 脚本启动。这不是最好的解决方案，但它让我走了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-17T09:04:43.283

您可能正在尝试在 32 位配置上运行 64 位可执行文件...

# android - Android：未找到外部 Jar 类

> ID：15180111
> 
> 赞同：0
> 
> 时间：2013-03-02T22:22:04.240
> 
> 标签：android, jar, executable-jar

我正在尝试使用外部库：[Musicg Library](http://code.google.com/p/musicg/)。

正如他们所声称的那样，它是一个与 android 兼容的库。

现在我按照[这篇文章](https://stackoverflow.com/questions/1334802/how-can-i-use-external-jars-in-an-android-project?lq=1)中的所有说明将 jar 导入到 android 项目中，但它无法识别定义 jar 文件的类。

我也尝试关注其他各种帖子，但大多数帖子都是指将 jar 保存在我已经完成的 libs 文件夹中。

此外，我检查了 jar 内的类是公共的。

有人可以帮我解决这个问题吗？任何帮助将不胜感激！:)

编辑

我已经将 .jar 保存在 libs 文件夹中。我无法解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T22:25:12.583

您需要将`.jar`文件放在`libs/`Android 项目根目录下的文件夹中（与`AndroidManifest.xml`.

# javascript - 无限滚动不起作用

> ID：15180112
> 
> 赞同：1
> 
> 时间：2013-03-02T22:22:06.480
> 
> 标签：javascript, jquery, xhtml, lazy-loading

我正在为我的页面使用无限滚动插件，但在编写代码后它似乎不起作用。我滚动到页面底部但无限滚动没有被触发。我已经包含了所有必要的文件，但仍然没有用。我已经包含了 xhtml 页面。我已经浏览了 stackoverflow 站点，但找不到与我的问题类似的任何内容。

1)xhtml

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:head>
    <link href="Css/StyleSheet.css" rel="stylesheet" type="text/css"
        media="screen" />

<script src="jquery.infinitescroll.js"></script>
<script>

  $('#box').infinitescroll({

        navSelector  : '#page-nav',            
                       // selector for the paged navigation (it will be hidden)
        nextSelector : '#page-nav a',    
                       // selector for the NEXT link (to page 2)
        itemSelector : '.box'         
                       // selector for all items you'll retrieve
        behaviour: 'twitter'               
      });
</script>

</h:head>

<h:body class="thrColElsHdr">

            <div class="box">   
                // Content

            </div>

<div  id="page-nav">
  <a href="getMoreStatusList.xhtml"></a>
</div>

            <!-- end #mainContent -->
        </div>

    </div>

</h:body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:27:21.223

您在以下内容后遗漏了一个逗号：

项目选择器：'.box'

# google-maps - Georeferencing of image (like Google Floor Plans)

> ID：15180115
> 
> 赞同：1
> 
> 时间：2013-03-02T22:22:29.347
> 
> 标签：google-maps, google-maps-api-3

I have a building floor plan and I need to specify its position on top of google map.

I like the way this is done in Google Floor Plans app - [screenshot](http://screencloud.net/img/screenshots/3d973ba1b3541a403fef0f3ffe7fcdd9.png)(the right part with map) - but I cannot figure out how they made it! :)

What part in Google Maps API I should look at?

In short - I have an image (plan of floor), and need to show it on top of Google Map and be able to manipulate with it (changing dimensions on events).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T00:07:51.940

I'm thinking you'll want to implement a [custom overlay](https://developers.google.com/maps/documentation/javascript/overlays#CustomOverlays). That link provides the relevant instructions for doing so. Also, Google provides a simple example so you can see the result [here](https://google-developers.appspot.com/maps/documentation/javascript/examples/overlay-simple). Is that sort of what you're going for?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:38:14.950

@Cianan Sims: Well, sure, I want custom overlay, but how is the question :-)

Fortunately, Google published tool called [Overlay Tiler](https://code.google.com/p/overlay-tiler/), which does exactly what I wanted - georeferencing of the image.

# c# - Protobuf-net 没有序列化基类成员

> ID：15180116
> 
> 赞同：2
> 
> 时间：2013-03-02T22:22:31.167
> 
> 标签：c#, .net, wcf, protobuf-net

我们有以下类和 WCF 服务（使用 protobuf-net 进行序列化）：

```
[DataContract]
[KnownType(typeof(NamedViewModel))]
public class NamedViewModel<TKey> : IViewModel
{
    [DataMember]
    public virtual TKey Id { get; set; }

    [DataMember]
    public virtual string Name { get; set; }
}

[DataContract]
[KnownType(typeof(ScheduleTemplateViewModel))]
public class NamedViewModel : NamedViewModel<int>
{
}

[DataContract]
public class ScheduleTemplateViewModel : NamedViewModel
{
    [DataMember]
    public string Comment { get; set; }
}

[DataContract]
public class Container
{
    [DataMember]
    public IEnumerable<ScheduleTemplateViewModel> Templates { get; set; }
}

[ServiceContract]
public interface IService
{
    [OperationContract]
    Container Get();
}

public class Service : IService
{
    public IEnumerable<Container> Get()
    {
        return new Container { Templates = Enumerable.Range(1, 10)
            .Select(i => CreateTemplate()).ToArray() };
    }

    private void ScheduleTemplateViewModel CreateTemplate()
    { 
        var instance = WindsorContainer.Resolve<ScheduleTemplateViewModel>();
        // populate instance
        return instance;
    }
} 
```

我们有两个问题：

1.  我们在序列化过程中遇到异常，即 ScheduleTemplateViewModel 的 Castle DynamicProxy 类型是意外的。我们注意到 protobuf-net 中有自定义代码来处理 NHibernate 和 EntityFramework 代理......但不是 Castle DynamicProxies。我们通过在 protobuf-net 源代码中添加一个额外的 case 语句来检查 Castle 的 IProxyTargetAccessor 类型来解决这个问题......但是如果有一种方法可以在不修改 protobuf-net 源代码的情况下处理这个问题......

2.  ScheduleTemplateViewModel 上的成员（即评论）被正确序列化......但基类成员不是。我们已经在 RuntimeTypeModel.Default 上将 InferTagFromNameDefault 设置为 true。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T06:40:02.760

1.  我可以补充一下；你能告诉我那个接口的全名（包括命名空间）吗？

2.  从您给出的示例中，这些值*都不*应该序列化，因为它们都不包含必要的数字字段编号信息。既然你说有些*人会*序列化，我会假设这是复制/粘贴中的一个遗漏。如果没有更好的可用信息， Protobuf-net 将尝试使用`Order=n`来自的信息。`[DataMember(...)]`但是，如果必须强调 protobuf-net 不能使用`[KnownType(...)]`，并且继承又需要一些显式的数字字段编号信息。这最容易通过 添加`[ProtoInclude(...)]`，但也可以在运行时提供

# c - 如何在另一个循环中中断循环

> ID：15180117
> 
> 赞同：1
> 
> 时间：2013-03-02T22:22:33.777
> 
> 标签：c, loops, break

如果彼此内部有 3 个循环，我怎么能中断到上层循环，我的意思是：

有

```
while (abc) {
    for (int dep =0 ; dep<b ; dep++)  {
         for (int jwe=0 ; jwe<g ; jwe++) {
             if (! (ef || hf) ) {
             //here is where i want to break to loop while
             //or in other purpose (other situation) i need 
             //to know how i could break to first loop  
             //i mean (for (int dep =0 ; dep< b ; dep++)
             }
         }
    }
} 
```

有人可以帮我吗，如果之后，我可以如何中断到while循环，或者我如何可以中断到第一个循环“for”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T22:24:35.970

只需将外部循环的计数器设置为一个不会再次运行的值。

```
while (abc) {
    for (int dep =0 ; dep<b ; dep++)
    for (int jwe=0 ; jwe<g ; jwe++)
     if (! (ef || hf) ) {
         //here is where you want to break to the while-loop
         //abc = 0; here will make it exit the entire while as well
         dep = b; //in order to exit the first for-loop
         break;
     }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T22:43:14.033

这是`goto`结构最清晰的（罕见）情况之一：

```
while (abc) {
    for (int dep =0 ; dep<b ; dep++)  {
         for (int jwe=0 ; jwe<g ; jwe++) {
             if (! (ef || hf) ) {
                 // Do anything needed before leaving "in the middle"
                 goto out;
             }
         }
    }
}
out:
// Continue here 
```

确保缩进不会隐藏标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T22:35:21.607

```
continue_outer_loop = true;
while (abc) {

  for ( int i = 0; i < X && continue_outer_loop; i++) {
    for ( int j = 0; j < Y; j++ {

       if (defg) {
         continue_outer_loop = false;  // exit outer for loop
         break;                        // exit inner for loop
       }

    }
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T22:27:16.550

一些语言（包括 Java）支持打破标签：

```
outerLoop: // a label
while(true) {
   for(int i = 0; i < X; i++) {
      for(int j = 0; j < Y; j++) {
         // do stuff 
         break outerLoop; // go to your label
      }
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T22:29:12.217

```
int breakForLoop=0;
    int breakWhileLoop=0;
    while (abc) {

        for (int dep = 0;dep < b;dep++) {

            for (int jwe = 0;jwe < g; jwe++) {

                if (!(ef || hf)) {
                    breakForLoop=1;
                    breakWhileLoop=1;
                    break;

                }
            }
            if(breakForLoop==1){
                break;
            }
        }
        if( breakWhileLoop==1){
                break;
            }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-02T22:30:42.310

例如，使用`int`变量`int terminate = 0;`并将其与您的条件一起放入 while 循环中`while(true && terminate == 0)`。如果要中断外循环，请`1`在从内循环中断之前将变量设置为。

# gtk - gtk转html

> ID：15180118
> 
> 赞同：5
> 
> 时间：2013-03-02T22:22:51.147
> 
> 标签：gtk, semantics, ui-design, gui-designer, web-application-design

为了有一个具有统一界面的操作系统，允许更好的互操作性，我正在寻找一种方法来构建一个所有界面都在 html5 中的系统。

例如，从 gtk 库开始（为了使用现有的），可以翻译如下代码：

```
gtk_window_set_title (GTK_WINDOW (window1), "the title"); 
```

在

```
document.title = "the title" 
```

我想知道是否有任何工具可以帮助我实现这个目标

**编辑**

为了澄清我的问题，让我了解我在寻找什么，我找到了这项[研究](https://www.google.fr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDkQFjAA&url=http://www.mpi-sws.org/~neelk/icfp11-krishnaswami-benton.pdf&ei=y5w5UczdMcGjPZOTgagO&usg=AFQjCNF69s9g108kYOoY7xWGv1zUvg14cA&sig2=f-MisVkYKjmlwc3Vm5pGHA)

第一步可能是使用/构建以前是 ui 的语义本体。然后我可以将 gtk 库（或另一个桌面 gui 库）和 Web 界面语言集成到同一个库中。所以我可以在 gtk 和 web 方法之间进行双射。

我不认为这是一个简单的问题，我正在寻求可以帮助我的想法和工具。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T05:09:45.013

一旦您引入了任何复杂性和交互，您就会遇到从 C\Python\Whatever-is-running-GTK 转换为 Javascript 的需求。

最好的办法是在原生 HTML5 中做所有事情，让您的“桌面应用程序”成为 Web 浏览器的包装器，它针对 (1) 远程网站或 (2) 本地 Web 服务器运行。您的“桌面应用程序”将包括一个小型 Web 服务器，并自动选择本地主机上的一个开放端口。

# cocoa-touch - CALayer 缩放文本动画

> ID：15180120
> 
> 赞同：0
> 
> 时间：2013-03-02T22:23:33.063
> 
> 标签：cocoa-touch, core-animation, calayer

我有一个自定义的 CALayer，其中包含一个 CAAnimationGroup，它执行一堆动画。其中一个动画设置了我在方法中使用的 scale 属性`drawInContext`。

问题是我不能很好地从中心缩放我的文本。

这有点工作，但在动画过程中文字有点跳跃：

```
NSString *letter = self.letterObject.letter;
UIFont *font = [UIFont fontWithName:@"Helsinki" size:20.0 * self.scale];
CGSize size = [letter sizeWithFont:font];
CGFloat width = size.width;
CGFloat height = size.height;

UIGraphicsPushContext(ctx);
[letter drawInRect:CGRectMake((self.frame.size.width - width) / 2.0,
                              (self.frame.size.height - height) / 2.0,
                              width,
                              height)
          withFont:font];
UIGraphicsPopContext(); 
```

我也尝试过简单地使用`CGContextScaleCTM(ctx, self.scale, self.scale);`，但我无法让它从文本的中心缩放。

有人可以对此有所了解吗？在过去的几个小时里，我尝试了各种东西（添加 UILabel.layer、CATextLayer、..），但这将是最干净的解决方案（我猜）。

# python - 在python中的对象上应用函数

> ID：15180125
> 
> 赞同：2
> 
> 时间：2013-03-02T22:23:54.887
> 
> 标签：python, class, artificial-life

我写了一个人工生命模拟。每个生物都是我定义的“动物”类的对象，具有一些属性。我在 Animal 类之外定义了一个函数“reproduce”：

```
def reproduce(parent):
    child = Animal()
    child.brain.w= parent.brain.w[:]
    child.brain.ix= parent.brain.ix[:]
    child.x,child.y = random.randint(0,width),random.randint(0,height)
    child.age = 0
    child.fitness= 9 + parent.fitness/10 #parent.fitness/2

    mutation = random.choice([0,1,1,1,1,1,1,1,1,2,3,4,5])
    for b in range(mutation):
      child.brain.mutate()
    animals.append(child) 
```

可以看出，每只动物都有一个大脑，它是来自不同类别的对象：对于我定义的每只动物`animals[i].brain = Brain()`。复制功能中的“变异”部分确保孩子的大脑与父母的大脑不同。

然而，问题是当我将这个函数应用于列表中的一些动物时，孩子确实得到了一些新的大脑，但是父母的大脑变得与孩子的新大脑相同。当我使用`reproduce(copy.deepcopy(animals[i]))`而不是那样时`reproduce(animals[i])`，不会发生。是什么原因？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T00:29:48.573

另一个基于@Armin 评论的刺伤。这*确实*展示了相关的深拷贝行为：

```
import random

width = 5
height = 5

class Brain(object):

    def __init__(self):
        self.w = [[1]]
        self.ix = [[1]]

    def mutate(self):
        self.w[0].append(1)

class Animal(object):

    def __init__(self):
        self.brain = Brain()
        self.x = random.randint(0, width)
        self.y = random.randint(0, height)
        self.age = 0
        self.fitness = 10

def reproduce(parent):
    child = Animal()
    child.brain.w= parent.brain.w[:]
    child.brain.ix= parent.brain.ix[:]
    child.x,child.y = random.randint(0,width),random.randint(0,height)
    child.age = 0
    child.fitness= 9 + parent.fitness/10 #parent.fitness/2

    mutation = random.choice([0,1,1,1,1,1,1,1,1,2,3,4,5])
    for b in range(mutation):
      child.brain.mutate()
    animals.append(child)

animals = []
parent = Animal()

animals.append(parent)
print parent.brain.w
#reproduce(parent)
import copy
reproduce(copy.deepcopy(parent))

for each in animals:
    print each.brain.w 
```

此处的解决方法是不要将状态值存储在您在对象之间复制的可变类型中；在这种情况下是一个列表，但它可以是任何可变对象。

编辑：您在原始代码中所做的是将内容复制`parent.brain.w`到`child.brain.w`. Python 具有分配给原始对象的属性，而不是对象或内容的副本（除非您使用该`copy`模块）。[文档](http://docs.python.org/2/reference/datamodel.html)很好地涵盖了这一点。简而言之，这意味着以下情况是正确的：

```
>>> a = [1, 2, 3, 4, 5]
>>> b = a
>>> b.append(6)
>>> b
[1, 2, 3, 4, 5, 6]
>>> a
[1, 2, 3, 4, 5, 6]
>>> a is b
True 
```

也就是说，两者`a`和`b`都是同一个列表。那不是您正在做的事情。您正在将列表复制到对象中，但这是等效的：

```
>>> a = [[1, 2, 3]]
>>> b = []
>>> b = a[:] # What you are doing
>>> b is a
False
>>> b[0] is a[0]
True
>>> b[0].append(4)
>>> b[0]
[1, 2, 3, 4]
>>> a[0]
[1, 2, 3, 4] 
```

如果您的类型不可变，那么当您修改它时，会创建一个新对象。例如，考虑一个有点等价的元组列表（它们是不可变的）：

```
>>> a = [(1, 2, 3)]
>>> b = []
>>> b = a[:]
>>> b is a
False
>>> b[0] is a[0] # Initially the objects are the same
True
>>> b[0] += (4,) # Now a new object is created and overwrites b[0]
>>> b[0] is a[0]
False
>>> b[0]
(1, 2, 3, 4)
>>> a[0]
(1, 2, 3) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T23:56:50.467

编辑：与最初的断言相反，以下内容没有表现出我在描述中遗漏的 deepcopy 行为。不过，我会留下它，以防有什么有用的。

有点猜测，但以下展示了您遇到的行为：

```
import random

width = 5
height = 5

class Brain(object):

    def __init__(self):
        self.w = [1]
        self.ix = [1]
        self.state = 1

    def mutate(self):
        self.state += 1

class Animal(object):
    brain = Brain()
    x = random.randint(0, width)
    y = random.randint(0,height)
    age = 0
    fitness = 10

def reproduce(parent):
    child = Animal()
    child.brain.w= parent.brain.w[:]
    child.brain.ix= parent.brain.ix[:]
    child.x,child.y = random.randint(0,width),random.randint(0,height)
    child.age = 0
    child.fitness= 9 + parent.fitness/10 #parent.fitness/2

    mutation = random.choice([0,1,1,1,1,1,1,1,1,2,3,4,5])
    for b in range(mutation):
      child.brain.mutate()
    animals.append(child)

animals = []
parent = Animal()

animals.append(parent)
print parent.brain.state
reproduce(parent)

for each in animals:
    print each.brain.state 
```

当你运行它时，你会退出：

```
1
2
2 
```

如果是这种情况，问题是因为`animal.brain`是类的属性，而不是实例。这样做的结果是所有实例共享该属性。

纠正很简单：

```
class Animal(object):
    x = random.randint(0, width)
    y = random.randint(0,height)
    age = 0
    fitness = 10

    def __init__(self):
        self.brain = Brain() 
```

通过该修复，您将为父级输出正确的值，而子级将发生变化。例如：

```
1
1
3 
```

（根据调用多少次`mutate()`）。

您也可能会遇到与 的其他属性类似的问题`Brain`，但这对读者来说是一个练习。

# asp.net-mvc-3 - 有没有办法将 linq 查询与 DateTime 和一个字符串一起用于同一个请求？

> ID：15180127
> 
> 赞同：0
> 
> 时间：2013-03-02T22:23:59.827
> 
> 标签：asp.net-mvc-3, linq

我正在尝试进行 linq 查询，其中`DateTime()`要求之一。它看起来像这样：

```
viewModel.MyModels = db.MyModels.Where(cd => cd.Date == Convert.ToDateTime(theDate).Where(cd => cd.itemOne == 8).Include(i => i.AnotherModel); 
```

这适用于字符串，但是当我尝试这样做时，`Convert.ToDateTime(theDate)`我收到一条消息，说`DateTime`没有`Where`.

有没有另一种方法可以让我得到相同的结果而不必将我的所有`DateTime`值都转换为`string`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T22:26:03.603

缺少父母？

```
 viewModel.MyModels = db.MyModels.Where(cd => cd.Date == Convert.ToDateTime(theDate)).Where(cd => cd.itemOne == 8).Include(i => i.AnotherModel); 
```

# android - 布局中的 Android 视图

> ID：15180134
> 
> 赞同：0
> 
> 时间：2013-03-02T22:24:45.013
> 
> 标签：android

好的，所以我在创建应用程序（强制关闭）时遇到了问题，我认为这与我实现布局的方式有关。所以有几个问题：首先，我有一个相对布局，其中包括一个文本输入，旁边有一个按钮，一个列表视图（仍在相对布局内）和下面的另一个按钮。这是我的主要 xml 文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/RelativeLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<EditText
    android:id="@+id/edit_choice"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/Button1"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_toLeftOf="@+id/Button1"
    android:hint="@string/edit_choice" />

<Button
    android:id="@+id/Button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:onClick="addString"
    android:text="@string/button_add" />

<Button
    android:id="@+id/Button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="22dp"
    android:text="@string/button_random" />

<ListView
    android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_above="@+id/Button2"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/Button1"
    tools:listitem="@android:layout/simple_list_item_1" >
</ListView>

</RelativeLayout> 
```

在我尝试运行此程序时，我什至更改了 .java 文件中的任何内容之前，只出现了文本输入和 2 个按钮，并且主题从 Holo 更改为 Holo light。所以我想知道这是否可行，我只看到列表视图完全匹配父布局的示例。

我的第二个问题是如何处理使用输入向列表视图添加值，我可以在主活动类中执行此操作，还是可以让另一个类来处理列表视图并仍然引用主布局。

这是我的主要课程：

```
public class MainActivity extends Activity 
{

public ArrayList <String> choices = new ArrayList <String>();
public ListView listView = (ListView) findViewById(R.id.listView1);
public String [] choicesArray;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ListView listView = (ListView) findViewById(R.id.listView1);
    choicesArray = new String [] {"You have not entered a choice yet"};
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, android.R.id.text1, choicesArray);
    listView.setAdapter(adapter);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

//adds the string to the list
public void addString(View view) 
{

    choicesArray = (String[]) choices.toArray();
    EditText editText = (EditText) findViewById(R.id.edit_choice);
    String message = editText.getText().toString();
    choices.add(message);

}

} 
```

希望这是有道理的，并感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T22:46:18.110

1.  将 ArrayAdapter 定义为类的成员（而不是 onCreate() 中的变量）。
2.  在 onCreate() 中将适配器设置为您的 listView。
3.  为您的按钮设置 onClickListener。
4.  单击按钮时，将 EditText 中的文本添加到适配器。
5.  利润！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T22:51:18.293

问题是你打电话给这条线

```
public ListView listView = (ListView) findViewById(R.id.listView1); 
```

在通过 onCreate() 中的 setContentView() 方法设置内容视图之前，您将获得 NullPointerException。不要忘记在调用 findViewById 之前您必须设置内容视图。所以删除上面的行，因为您在 onCreate 方法中创建函数范围 listView 并且您的 NullPointerException 问题将得到解决。并且还像这样更改 addString 方法的第一行

```
choicesArray = choices.toArray(choicesArray); 
```

# java - 在 HttpServletRequest 中修改请求的会话 ID

> ID：15180136
> 
> 赞同：1
> 
> 时间：2013-03-02T22:24:50.417
> 
> 标签：java, servlets, servlet-filters

如何修改 a 中的`"requestedSessionId"`属性`HttpServletRequest`？

```
public class MySecurityContextPersistenceFilter implements Filter {

    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {

        if (req instanceof HttpServletRequest) {
            HttpServletRequest httpServletRequest = (HttpServletRequest) req;
            httpServletRequest.getRequestedSessionId();
            //Modify this value ?
        }

    } 
```

我尝试这样做的原因是我的客户端应用程序不处理 Cookies..

因此，会话 ID 被发送，`"body"`这就是我想要从中获取`JSESSIONID`并在请求中设置它以便稍后由`SpringSecurityFilterChain`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T22:27:58.647

你不能这样做。

这里[JAVA Change JSESSIONID cookie](https://stackoverflow.com/questions/14562477/java-change-jsessionid-cookie/14562844#14562844)我们绕着这个话题走，有部分解决方案，但一切都取决于你的目标。

# c# - 将组合框中选择的数据检索到 datagridview

> ID：15180137
> 
> 赞同：0
> 
> 时间：2013-03-02T22:24:51.590
> 
> 标签：c#, winforms

我如何检索在组合框中选择的数据并将该数据的信息从数据库检索到 datagridview

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T23:08:14.330

```
using System;
using System.Data;
using System.Windows.Forms;
using System.Data.SqlClient;

namespace WindowsFormsApplication12
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }
        SqlConnection cn = new SqlConnection("data source=localhost;initial catalog=acc;uid=sa;pwd=emotions");
        private void Form1_Load(object sender, EventArgs e)
        {
            SqlDataAdapter da = new SqlDataAdapter("select ClassId, Class from Class order by ClassId", cn);
            DataTable dt = new DataTable();            
            da.Fill(dt);
            comboBox1.DataSource = dt;
            comboBox1.DisplayMember = "Class";
            comboBox1.ValueMember = "ClassId";
        }
        private void comboBox1_SelectionChangeCommitted(object sender, EventArgs e)
        {
            SqlDataAdapter da = new SqlDataAdapter("select SNAme, FName, SPhoneNo from Students where ClassId =" + comboBox1.SelectedValue, cn);
            DataTable dt = new DataTable();
            da.Fill(dt);
            dataGridView1.DataSource = dt;
        }
    }
} 
```

![在此处输入图像描述](../Images/32b6d0b6e10b49e7a4bac0838ef539eb.png)

# python - Tkinter Canvas STATE 与 time.sleep 的奇怪行为

> ID：15180140
> 
> 赞同：1
> 
> 时间：2013-03-02T22:25:03.520
> 
> 标签：python, tkinter, sleep

我有一个名为 _their_grid 的画布，它有许多与鼠标点击相关的相关事件。我在特定条件下禁用它 10 秒。下面是相关代码。

```
 print "not your turn"
        # disable opponent's grid during their turn
        self._their_grid.config(state=DISABLED)
        time.sleep(10)
        self._their_grid.config(state=NORMAL)
        print "now you can go" 
```

然而，在十秒钟的睡眠中，我仍然设法触发了这些事件。这不应该是这种情况，因为 state=DISABLED 应该关闭所有事件。下面的代码，注释掉了 sleep，停止了所有事件。

```
 print "not your turn"
        # disable opponent's grid during their turn
        self._their_grid.config(state=DISABLED)
        #time.sleep(10)
        #self._their_grid.config(state=NORMAL)
        #print "now you can go" 
```

为什么我会在 time.sleep 中出现这种奇怪的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:01:15.720

time.sleep() 不会阻止事件被接受，它只是阻止它们被处理。每次您在应用程序处于睡眠状态时单击时，事件都会简单地添加到队列中，并在睡眠完成睡眠时进行处理。

您几乎*不*应该在 GUI 中调用 sleep 。您应该做的是将状态设置为禁用，然后安排在十秒钟后重置状态：

```
def re_enable(self):
    self._their_grid.config(state=NORMAL)
...
self.after(10000, self.re_enable) 
```

# arraylist - 如何将 ORMLite 与包含其他对象的 ArrayLists 的对象一起使用？

> ID：15180142
> 
> 赞同：2
> 
> 时间：2013-03-02T22:25:05.937
> 
> 标签：arraylist, ormlite, eager, foreign-collection

我有一个具有非常复杂数据类型的 Android java 项目，包括其他复杂数据类型的 ArrayLists。我正在尝试使用 ORMLite (4.42) 将我的数据存储在数据库中。

我在 ArrayLists 和 ForeignCollection 之间转换时遇到了重大问题，有人能做到这一点吗？

我不希望与数据库持续同步，而是有一个保存整个结构的 save 方法和一个恢复整个方法的 read 方法。从数据库中恢复对象后，该对象通过接口发送，接收者需要一个 ArrayLists 而不是 orm lite ForeignCollections。

我的方法如下。对于每个 ArrayList，我都有一个互补的 ForeignCollection。在将对象存储到数据库之前，将 ArrayList 的内容复制到 ForeignCollection，当读回时，反之亦然。

当我从数据库中读出一个数据结构时，我希望确保整个结构被恢复，因为稍后，该对象将被发送给不知道 orm lite 包的用户，因此我设置了 eager = true。

我的复杂数据类型如下所示：

```
@DatabaseTable(tableName = "accounts")
public class Account {

    @DatabaseField(generatedId = true)
    private int id;

    @ForeignCollectionField (eager = true, maxEagerLevel = 2)
    private ForeignCollection<Order> ordersFoC;
    private ArrayList<Order> ordersArL; 
```

# 问题

在将帐户存储到数据库之前，我尝试执行以下操作。我希望将 ArrayList 中的对象复制到 ForeignCollection 并使用 Account 对象更新数据库。对象 myAccount 与数据库中的对象具有相同的 id，因此我希望更新该对象。

```
ordersFoC.addAll(orderArL);
myDao.createOrUpdate(myAccount); 
```

没运气。addAll 方法确实将订单直接写入数据库，因此我最终得到了所有订单的重复项，因为“addAll”添加并且不更新任何现有记录。

所以我尝试首先从数据库中删除所有订单，但再次没有运气：

```
ordersFoC.clear(); // Also tried: ordersFoC.removeAll(ordersFoC);
ordersFoC.addAll(orderArL);
myDao.createOrUpdate(myAccount); 
```

对象不会从数据库中删除。我在[groups.google.com 上读到（作者 Philip Fu）](https://groups.google.com/forum/?fromgroups=#!topic/ormlite-user/1aXB9q_Kv7k)，这是 ormlite 的一个“已知”问题，急切的 ForeignCollection 不能很好地与 removeAll() 或 clear() 配合使用。

是否有一种我错过的模式允许我使用 ormlite 框架处理包含复杂类型的 ArrayLists 的对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T19:38:13.900

我的代码可以与 ArrayLists 一起使用。我这样声明我的字段：

```
@ForeignCollectionField(eager = true, maxEagerForeignCollectionLevel = 99)
private Collection<PersonalNameStructure> personalnamestructures = new ArrayList<>(); 
```

和吸气剂

```
public List<PersonalNameStructure> getPersonalNameStructures() {
    return new ArrayList<>(personalnamestructures) ;
} 
```

因此它会即时创建 ArrayList 而不是尝试维护它。

显然你可能已经意识到了这一点，但你也需要在编写对象时小心，因为 Eager 设置会影响读取外部集合，它不会对外部字段或写入记录做任何事情。

# java - 在 Netty 3.6.x 中读取 XML 数据

> ID：15180150
> 
> 赞同：1
> 
> 时间：2013-03-02T22:25:33.970
> 
> 标签：java, netty

我是 Netty 和 Java 的新手，我正在尝试构建一个简单的 Netty 服务器，它从单独的客户端读取 XML（客户端将继续向我发送具有固定格式的 XML）。对于每一个 XML，我都需要做一些处理。我查看了 echo-client/server 和 Object echo-client/server 的示例，并试图决定我应该模仿哪一个，我不确定我应该使用 ChannelInboundByteHandlerAdapter 还是 ChannelInboundMessageAdapter？Netty 3.6.x 中是否有处理分解 XML 的实用程序包？我应该如何处理将原始数据转换为 XML？

另外，我不知道 4.0.0.Beta 有多稳定，因为这个应用程序不太复杂，我想知道使用 3.6.x.Final 是否可以，因为它可能更稳定。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T02:37:41.240

在 Server 程序中创建 XMLDecoder、XMLEncoder 类（扩展 OneToOneEncoder）。并添加 ChannelPipeline 作为键“解码器”、“编码器”。

在 XMLDecoder 类的解码中，使用 JAXB 将接收到的 xml 转换为自定义类。如果服务器使用 xml 发送到客户端，则在 XmlEncoder 的 encode 方法中将响应自定义类转换为 xml 字符串。

对不起，我的英语水平有限。

# c# - 如何捕获文本框的值并将其用作变量？

> ID：15180151
> 
> 赞同：2
> 
> 时间：2013-03-02T22:25:41.703
> 
> 标签：c#, winforms, variables, visual-studio-2012

让我先说我对 C# 非常陌生，我正在将一个程序从 VB.net 转换为 C#。

我正在工作`Visual Studio 2012`并运行`SQL Server 2008R2`

好的，所以我有一个表格，Form1。在这个表单上是一个用户可以填写的文本框，TextBox1。现在我想使用文本框中的信息作为变量从数据库中提取信息并在不同的表单 (form2) 上填充文本框 (textbox2) 这是我目前在表单 2 上使用的代码

```
 private void form2_Load(object sender, EventArgs e)
    {

        string Name = Form1.TextBox1.Text;
        this.TBMainTableAdapter.FillBy(Name);

    } 
```

我也试过像这样加载它：

```
this.TBMainTableAdapter.FillBy(Form1.TextBox1.Text); 
```

这些都给了我“非静态字段需要对象引用......错误

在 VB.Net 中，这要容易得多，我这样编码，而且效果很好。

```
Private Sub Form2_Load(sender As Object, e As EventArgs) Handles MyBase.Load
Me.TBMainTableAdapter.FillBy(Me.ProjectDataset.TBName, TextBoxName.Text)
End Sub 
```

我在后面的代码中缺少什么吗？我尝试更改文本框中的代码

从

```
public System.Windows.Forms.TextBox TextBox1; 
```

至

```
public static System.Windows.Forms.TextBox TextBox1; 
```

虽然这清除了拉变量时的错误，但它在表单 1 的代码隐藏中引发了更多错误，“无法使用实例访问，给它一个名称类型”错误

更改后面代码中的所有错误是否值得。更重要的是，这是正确的方法吗？

* * *

好的，所以我在下面添加了这两个

```
public partial class Form1 : Form
Form1  form1;
public Form2(Form1 frm)

    {    
        form1 = frm;
    }

    Form2 frm = new Form1(this); 
```

我在“Public Form2(Form1 frm)”行得到“方法必须有返回类型错误”，在 Form2 frm = new Form1(this); 线

另外，如果我将 getter 属性放在 Form1 中，我会收到关于声明 2 个具有相同名称的对象的错误。找不到任何声明 TextBox1 的地方，除了在后面的代码末尾声明为

```
public System.Windows.Forms.TextBox TxtBox1 
```

如果我把getter放在下面，我得到一个唯一的赋值、调用等可以用作语句错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T22:28:48.170

您需要在 Form2 对象中引用 Form1 才能使用 Form1 中的控件内容。此外，您的 textBox1 应该被声明为 public，或者您应该为它创建 getter 属性。您可以使用很多东西，但如果 Form2 中需要 Form1，那么您可以做的最简单的事情是通过 Form2 的构造函数传递 Form1 的引用。

```
Form1 form1;
public Form2(Form1 frm)
{
    form1 = frm;
} 
```

在 Form1 中为 textBox1 添加 getter 属性：

```
public TextBox TextBox1
{
    get
    {
       this.textBox1;
    }
} 
```

您可以从 Form1 方法中调用此构造函数，如下所示：

```
From2 frm = new Form2(this); 
```

然后你可以打电话：

```
private void form2_Load(object sender, EventArgs e)
{

    string Name = form1.TextBox1.Text;
    this.TBMainTableAdapter.FillBy(Name);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T22:28:58.120

也许我遗漏了一些东西，但是该方法`FillBy`需要两个参数，第一个是`DataTable`要填充，第二个是`Name`，所以将其更改为：

```
this.TBMainTableAdapter.FillBy(Me.ProjectDataset.TBName, Name); 
```

有一个参数的方法是`TBMainTableAdapter.Fill(DataTable table)`。

编辑：忽略了您在 Form2 上，但`TextBox`正如 Nikola 指出的那样，在 Form1 上，这当然是一个重要的事实。我保留这个答案，因为无论如何它可能会有所帮助。

# php - php的json_encode和字符表示

> ID：15180155
> 
> 赞同：0
> 
> 时间：2013-03-02T22:26:05.323
> 
> 标签：php, utf-8, json

我会尽量简单地呈现它：我使用 json_encode() 对来自不同语言的多个 utf-8 字符串进行编码，我注意到当它们属于 ASCII 表时字符保持不变，但其他所有内容都返回为 ' \unnnn'，其中 'nnnn' 是一个十六进制数。

见代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" />
 <title>Multibyte string functions</title>
</head>
<body>
<h3>Multibyte string functions</h3>
<p>
<?php
//present json encode errors nicely:
//assign integer values to keys and error names to values
echo '<br /><b>Define JSON errors</b><br />';
$constants = get_defined_constants(true);
$json_errors = array();
foreach ($constants["json"] as $name => $value) {
   if (!strncmp($name, "JSON_ERROR_", 11)) {
      $json_errors[$value] = $name;
   }
}
echo nl2br(print_r($json_errors, true), true);

//Display current detection order
echo "<br /><b>Current detection order 'mb_detect_order()':</b> ", implode(", ", mb_detect_order());
//Display internal encoding
echo "<br /><b>Internal encoding 'mb_internal_encoding()':</b> ",  mb_internal_encoding();
//Get current language
echo "<br /><b>Current detection language 'mb_language()' ('neutral' for utf8):</b> ", mb_language();

//our test data
//a nowdoc that can break a <input> field;
$str = <<<'STR'
O'Reilly(\n) "& 'Big\Two @ <span>bo\tld</span>"
STR;
$strings = array(
   $str,
   "Latin: tell me the answer and I might find the question!",
   "Greek: πες μου την ερώτηση και ίσως βρω την απάντηση!",
   "Chinese simplified: 告诉我答复，并且我也许发现问题!",
   "Arabic: أخبرني الاجابة, انا قد تجد مسالة!",
   "Portuguese: mais coisas a pensar sobre diário ou dois!",
   "French: plus de choses à penser à journalier ou à deux!",
   "Spanish: ¡más cosas a pensar en diario o dos!",
   "Italian: più cose da pensare circa giornaliere o due!",
   "Danish: flere ting å tenke på hver dag eller to!",
   "Chech: Další věcí, přemýšlet o každý den nebo dva!",
   "German: mehr über Spaß spät schönen",
   "Albanian: më vonë gjatë fun bukur",
   "Hungarian: több mint szórakozás késő csodálatos kenyér"
);

//show encoding and then encode
foreach( $strings as $string ){
   echo "<br /><br />$string :", mb_detect_encoding($string);
   $json = json_encode($string);
   echo "<br />Error? ", $json_errors[json_last_error()];
   echo '<br />json=', $json;
} 
```

上面的代码将输出：

```
Define JSON errors
Array
(
[0] => JSON_ERROR_NONE
[1] => JSON_ERROR_DEPTH
[2] => JSON_ERROR_STATE_MISMATCH
[3] => JSON_ERROR_CTRL_CHAR
[4] => JSON_ERROR_SYNTAX
[5] => JSON_ERROR_UTF8
)

Current detection order 'mb_detect_order()': ASCII, UTF-8
Internal encoding 'mb_internal_encoding()': ISO-8859-1
Current detection language 'mb_language()' ('neutral' for utf8): neutral

O'Reilly(\n) "& 'Big\Two @ bo\tld" :ASCII
Error? JSON_ERROR_NONE
json="O'Reilly(\\n) \"& 'Big\\Two @ bo\\tld<\/span>\""

Latin: tell me the answer and I might find the question! :ASCII
Error? JSON_ERROR_NONE
json="Latin: tell me the answer and I might find the question!"

Greek: πες μου την ερώτηση και ίσως βρω την απάντηση! :UTF-8
Error? JSON_ERROR_NONE
json="Greek: \u03c0\u03b5\u03c2 \u03bc\u03bf\u03c5 \u03c4\u03b7\u03bd \u03b5\u03c1\u03ce\u03c4\u03b7\u03c3\u03b7 \u03ba\u03b1\u03b9 \u03af\u03c3\u03c9\u03c2 \u03b2\u03c1\u03c9 \u03c4\u03b7\u03bd \u03b1\u03c0\u03ac\u03bd\u03c4\u03b7\u03c3\u03b7!"

Chinese simplified: 告诉我答复，并且我也许发现问题! :UTF-8
Error? JSON_ERROR_NONE
json="Chinese simplified: \u544a\u8bc9\u6211\u7b54\u590d\uff0c\u5e76\u4e14\u6211\u4e5f\u8bb8\u53d1\u73b0\u95ee\u9898!"

Arabic: أخبرني الاجابة, انا قد تجد مسالة! :UTF-8
Error? JSON_ERROR_NONE
json="Arabic: \u0623\u062e\u0628\u0631\u0646\u064a \u0627\u0644\u0627\u062c\u0627\u0628\u0629, \u0627\u0646\u0627 \u0642\u062f \u062a\u062c\u062f \u0645\u0633\u0627\u0644\u0629!"

Portuguese: mais coisas a pensar sobre diário ou dois! :UTF-8
Error? JSON_ERROR_NONE
json="Portuguese: mais coisas a pensar sobre di\u00e1rio ou dois!"

French: plus de choses à penser à journalier ou à deux! :UTF-8
Error? JSON_ERROR_NONE
json="French: plus de choses \u00e0 penser \u00e0 journalier ou \u00e0 deux!"

Spanish: ¡más cosas a pensar en diario o dos! :UTF-8
Error? JSON_ERROR_NONE
json="Spanish: \u00a1m\u00e1s cosas a pensar en diario o dos!"

Italian: più cose da pensare circa giornaliere o due! :UTF-8
Error? JSON_ERROR_NONE
json="Italian: pi\u00f9 cose da pensare circa giornaliere o due!"

Danish: flere ting å tenke på hver dag eller to! :UTF-8
Error? JSON_ERROR_NONE
json="Danish: flere ting \u00e5 tenke p\u00e5 hver dag eller to!"

Chech: Další věcí, přemýšlet o každý den nebo dva! :UTF-8
Error? JSON_ERROR_NONE
json="Chech: Dal\u0161\u00ed v\u011bc\u00ed, p\u0159em\u00fd\u0161let o ka\u017ed\u00fd den nebo dva!"

German: mehr über Spaß spät schönen :UTF-8
Error? JSON_ERROR_NONE
json="German: mehr \u00fcber Spa\u00df sp\u00e4t sch\u00f6nen"

Albanian: më vonë gjatë fun bukur :UTF-8
Error? JSON_ERROR_NONE
json="Albanian: m\u00eb von\u00eb gjat\u00eb fun bukur"

Hungarian: több mint szórakozás késő csodálatos kenyér :UTF-8
Error? JSON_ERROR_NONE
json="Hungarian: t\u00f6bb mint sz\u00f3rakoz\u00e1s k\u00e9s\u0151 csod\u00e1latos keny\u00e9r" 
```

正如您在大多数语言中所看到的（英语除外），存在 utf-8 字符的十六进制转换。是否可以通过不替换我的 unicode 字符来进行编码？安全吗？其他人做什么？

您应该考虑来自页面中的用户输入并存储到 mysql 的此类编码。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T22:33:45.663

也许您应该尝试`json_encode($string, JSON_UNESCAPED_UNICODE)`，或[http://php.net/manual/fr/function.json-encode.php](http://php.net/manual/fr/function.json-encode.php)中的任何方法，这可能对您的各种情况有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T17:58:21.520

Ok, really thanks for the answer!

The problem is that I'm on version `PHP Version 5.3.10` and `json_encode($string, JSON_UNESCAPED_UNICODE)` isn't an option.

Fortunately, a guy called "Mr Swordsteel" posted a comment at php's manual [http://www.php.net/manual/en/function.json-encode.php](http://www.php.net/manual/en/function.json-encode.php) which actually does the trick (thank you Mr Swordsteel!) The real paradox is that it emulates completely `json_encode` function and gives a hint if we want to port it to another language like javascript and keep our libraries communicative.

```
function my_json_encode($in){
   $_escape = function ($str) {
      return addcslashes($str, "\v\t\n\r\f\"\\/");
   };
   $out = "";
   if (is_object($in)){
      $class_vars = get_object_vars(($in));
      $arr = array();
      foreach ($class_vars as $key => $val){
         $arr[$key] = "\"{$_escape($key)}\":\"{$val}\"";
       }
      $val = implode(',', $arr);
      $out .= "{{$val}}";
   }elseif (is_array($in)){
      $obj = false;
      $arr = array();
      foreach($in as $key => $val){
         if(!is_numeric($key)){
            $obj = true;
         }
         $arr[$key] = my_json_encode($val);
      }
      if($obj){
         foreach($arr AS $key => $val){
            $arr[$key] = "\"{$_escape($key)}\":{$val}";
         }
         $val = implode(',', $arr);
         $out .= "{{$val}}";
      }else {
         $val = implode(',', $arr);
         $out .= "[{$val}]";
      }
   }elseif (is_bool($in)){
      $out .= $in ? 'true' : 'false';
   }elseif (is_null($in)){
      $out .= 'null';
   }elseif (is_string($in)){
      $out .= "\"{$_escape($in)}\"";debug('in='.$in.', $_escape($in)='.$_escape($in).', out='.$out);
      }else{
         $out .= $in;
      }
      return "{$out}";
   } 
```

I gave it a lot of tests and couldn't break it! It would be very interesting now to re-implement `json_decode`!

Thanks.

# architecture - 当涉及大量数据时，Redis 是否可以独占作为持久化策略？

> ID：15180156
> 
> 赞同：0
> 
> 时间：2013-03-02T22:26:05.117
> 
> 标签：architecture, nosql, redis

据我了解，Redis 完全在内存中运行，只是将其数据同步回磁盘，这也是它如此之快的主要原因。

他们的网站说[虚拟内存](http://redis.io/topics/virtual-memory)已被弃用，围绕该声明的散文似乎表明他们的近期计划不包括继续支持大于系统内存的数据库（老实说，它描述了我的大多数数据库已经使用过，甚至是具有标准化优势的 RDBMS）。

这是否意味着 Redis 不再是数据密集或高流量应用程序中主要或唯一数据存储的合适（长期）候选者？我应该坚持使用 SQL/Mongo/Raven/等吗？对于主要事件，只考虑 Redis 用于偶尔的花里胡哨（缓存等）？

或者是否有人成功地使用 Redis 进行了扩展，而不使用已弃用的 VM 功能？如果是这样，怎么办？

PS 我读过关于[Redis Cluster](http://redis.io/topics/cluster-spec)的文章，这显然是一个解决方案，但看起来它还远未准备好迎接黄金时段......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:11:40.187

在 redis 集群准备好之前，最好的选择是预分片。制作大量实例并使用一致的哈希在它们之间划分您的密钥。然后，当您的数据集增长（或您需要更高的性能）时，取出一半的实例并将它们转移到不同的物理机器上。

但它并不适合所有场景，这是肯定的。如果您有大量数据，请使用不同的数据库。

您还可以将 redis 用于数据的子集 - 时间关键部分 - 并为其余部分使用不同的数据库。

# ruby-on-rails - 如何检查 Ruby 数组的第一项？

> ID：15180158
> 
> 赞同：-2
> 
> 时间：2013-03-02T22:26:33.100
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个这样的数组：

```
schedule
=> [["wednesday", 3, 29], ["wednesday", 4, 30], ["wednesday", 4, 33]] 
```

我只想看看前两个值是否在数组中：

```
schedule.include?(['wednesday', 3])
=> false 
```

我知道为什么这个值是假的，但我想不出一种方法来搜索这个数组并忽略最后一个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T22:29:25.267

找到了一个好的解决方案

```
> previous_schedule.any?{|x| x[0] == "wednesday" and x[1] == 3}
=> true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T23:57:58.273

Ruby 数组实际上有一个方法`first`：

```
schedule = [["wednesday", 3, 29], ["wednesday", 4, 30], ["wednesday", 4, 33]] 
schedule.any?{|item| item.first(2) == ['wednesday', 3]} #=> true 
```

# sql - 列名的行值

> ID：15180161
> 
> 赞同：0
> 
> 时间：2013-03-02T22:27:02.053
> 
> 标签：sql, sql-server-2005

我正在使用 SQL 2005。我试图转置（因为没有更好的词），用户列值以使其值作为实际列名，然后用阈值填充它。用户数量是动态的。它可以是 3 个或更多，但不超过 35 个。如您所见，每个操作的用户数将始终相同。谢谢您的帮助。

```
-- tbl_actions
Title   GrpName  Action    User    Threshold
Title1  Group1   Action1    A      180:10:Green
Title1  Group1   Action1    B      180:30:Yellow
Title1  Group1   Action1    C      180:45:Yellow
Title1  Group1   Action2    A      360:10:Green
Title1  Group1   Action2    B      360:23:Yellow
Title1  Group1   Action2    C      360:50:Red
Title1  Group1   Action4    A      180:10:Green
Title1  Group1   Action4    B      180:35:Yellow
Title1  Group1   Action4    C      180:25:Yellow

-- Result sought
Title   GrpName   Action            A               B               C 
Title1  Group1    Action1   180:10:Green    180:30:Yellow   180:45:Yellow
Title1  Group1    Action2   360:10:Green    360:23:Yellow   360:50:Red
Title1  Group1    Action4   180:10:Green    180:35:Yellow   180:25:Yellow 

--For table data
Select 'Title1' as Title, 'Group1' as GroupName, 'Action1' as Action, 'A' as UserName, '180:10:Green:2/20/2013' as Threshold
UNION
Select 'Title1' as Title, 'Group1' as GroupName, 'Action1' as Action, 'B' as UserName, '180:30:Yellow:2/22/2013' as Threshold
UNION
Select 'Title1' as Title, 'Group1' as GroupName, 'Action1' as Action, 'C' as UserName, '180:45:Yellow:2/21/2013' as Threshold
UNION

Select 'Title1' as Title, 'Group1' as GroupName, 'Action2' as Action, 'A' as UserName, '360:10:Green:2/18/2013' as Threshold
UNION
Select 'Title1' as Title, 'Group1' as GroupName, 'Action2' as Action, 'B' as UserName, '360:23:Yellow:2/1/2013' as Threshold
UNION
Select 'Title1' as Title, 'Group1' as GroupName, 'Action2' as Action, 'C' as UserName, '360:50:Red:2/3/2013' as Threshold
UNION

Select 'Title1' as Title, 'Group1' as GroupName, 'Action4' as Action, 'A' as UserName, '180:10:Green:2/5/2013' as Threshold
UNION
Select 'Title1' as Title, 'Group1' as GroupName, 'Action4' as Action, 'B' as UserName, '180:35:Yellow:2/22/2013' as Threshold
UNION
Select 'Title1' as Title, 'Group1' as GroupName, 'Action4' as Action, 'C' as UserName, '180:25:Yellow:2/11/2013' as Threshold

--Result
Select 'Title1' as Title, 'Group1' as GroupName, 'Action1' as Action, '180:10:Green:2/20/2013' as 'A', '180:30:Yellow:2/22/2013' as 'B','180:45:Yellow:2/21/2013' as 'C'  
UNION
Select 'Title1' as Title, 'Group1' as GroupName, 'Action2' as Action, '360:10:Green:2/18/2013' as 'A', '360:23:Yellow:2/1/2013' as 'B','360:50:Red:2/3/2013' as 'C'
UNION
Select 'Title1' as Title, 'Group1' as GroupName, 'Action3' as Action, '180:10:Green:2/5/2013' as 'A', '180:35:Yellow:2/22/2013' as 'B','180:25:Yellow:2/11/2013' as 'C' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T22:39:03.190

尝试这个

```
declare @cols varchar(max)
set @cols = stuff(
                  (select distinct ',' + QUOTENAME(username)
                   from tbl_actions for xml path('')
                  ),1,1,''
                 )
-- print @cols
-- result: [A],[B],[C]

declare @query nvarchar(max)
set @query = 'select title, groupname, action ' + @cols
             + ' from (select * from tbl_actions) v'
             + ' pivot (max(threshold) for username in ('
             + @cols + ')) pvt'

exec(@query) 
```

# php - echo 和 printf 有什么区别

> ID：15180163
> 
> 赞同：-2
> 
> 时间：2013-03-02T22:27:23.477
> 
> 标签：php, printf, echo

echo 和 printf 有什么区别？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-02T22:33:23.077

主要区别在于 printf 首先接收带有占位符的格式字符串（您看到的那些 % 符号），甚至可以接受一些格式参数（例如 %2d，它将显示 2 位数字）。

相反，Echo 只是显示字符串。当你做"$i bar" 时，字符串首先用$i 的值展开，然后发送到echo 函数来显示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-02T22:31:03.700

如果您在任何搜索引擎中搜索差异，您就会得到答案。例如下面是 printf 的一种用法：

您可以使用此函数来格式化数字中的小数位：

```
$num = 2.12; 
printf("%.1f",$num); 

prints: 

2.1 
```

当然，这只是一种用途。我使用的另一个很好的示例如下：

如果您以“pre”标签、courier 字体或其他非可变长度字体（如终端）打印数据，您可能需要使用 printf 的 justify 功能。

```
$value1 = "31298";
$value2 = "98";

print "<pre>\n";
printf ("%'.-15.15s%'.6.6s\n", $heading1, $value1);
printf ("%'.-15.15s%'.6.6s\n", $heading2, $value2);
print "</pre>\n";
?> 
```

还有很多其他用法。

# javascript - 您如何判断选项卡名称何时更改？

> ID：15180164
> 
> 赞同：1
> 
> 时间：2013-03-02T22:27:27.400
> 
> 标签：javascript, google-chrome, google-chrome-extension

我有这个脚本作为我的 background.js：

```
chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab) {
    alert(tab.title);
}); 
```

但是，当仅更改选项卡的名称时，它不会触发，只有在重新加载/访问新页面时才会触发。

有没有办法让它在标签名称更新时也会触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:03:07.507

使用标准 Chrome.* API 无法跟踪此类选项卡名称更改。

# 解决问题

使用内容脚本跟踪 DOM 更改并在回调中使用您的功能逻辑

## 示例代码

```
document.getElementsByTagName("head")[0].addEventListener("DOMSubtreeModified",function (){ 
    alert("changed.."); 
}); 
```

# c# - 在数据导入策略上休眠事务范围

> ID：15180165
> 
> 赞同：1
> 
> 时间：2013-03-02T22:27:42.270
> 
> 标签：c#, nhibernate, transactions, data-import

我们需要在数据库之间导入大量数据，涉及多个表。

交易的最佳策略是什么？我猜想打开一个会话，有一个大事务并在进程结束时提交它是一个坏主意。

在每张桌子之后提交会更好吗？如果一个特定的表对其他表有依赖关系，应该如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T22:31:05.233

如果可能，您可以尝试在单独的事务中导入没有依赖关系的表，然后在另一个事务中导入具有依赖关系的表。

如果这是不可能的，我会推荐一笔大交易。

# python - 在Python中反转数字的（二进制）数字的巧妙方法？

> ID：15180168
> 
> 赞同：7
> 
> 时间：2013-03-02T22:28:06.423
> 
> 标签：python, algorithm, bit-manipulation

我正在寻找一个巧妙的函数来反转数字的二进制表示的数字。

如果`f`有这样的功能我会有

`int(reversed(s),2) == f(int(s,2))`只要 s 是一串以 1 开头的 0 和 1。

现在我正在使用`lambda x: int(''.join(reversed(bin(x)[2:])),2)`

就简洁而言，这是可以的，但这似乎是一种非常迂回的方式。

我想知道按位运算符是否有更好（也许更快）的方法，还有什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T22:34:35.773

怎么样

```
int('{0:b}'.format(n)[::-1], 2) 
```

或者

```
int(bin(n)[:1:-1], 2) 
```

* * *

第二种方法似乎是两者中更快的方法，但是两者都比您当前的方法快得多：

```
import timeit

print timeit.timeit("int('{0:b}'.format(n)[::-1], 2)", 'n = 123456')

print timeit.timeit("int(bin(n)[:1:-1], 2)", 'n = 123456')

print timeit.timeit("int(''.join(reversed(bin(n)[2:])),2)", 'n = 123456') 
```

```
1.13251614571
0.710681915283
2.23476600647

```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-02T23:09:53.230

您可以使用这样的移位运算符来做到这一点：

```
def revbits(x):
    rev = 0
    while x:
        rev <<= 1
        rev += x & 1
        x >>= 1
    return rev 
```

不过，它似乎并不比你的方法快（事实上，对我来说稍微慢了一点）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-02T22:36:25.143

我认为您当前的方法非常好，但是您可能会失去`list()`通话，因为`str.join()`将接受任何可迭代的：

```
def binary_reverse(num):
    return int(''.join(reversed(bin(num)[2:])), 2) 
```

它还建议不要使用`lambda`除了最简单的函数之外的任何东西，它只会使用一次，并通过内联使周围的代码更清晰。

我觉得这很好的原因是它描述了你想要做什么——取一个数字的二进制表示，反转它，然后再次得到一个数字。这使得这段代码非常可读，这应该是一个优先事项。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-02T22:33:08.767

这是我的建议：

```
In [83]: int(''.join(bin(x)[:1:-1]), 2)
Out[83]: 9987 
```

相同的方法，稍微简化。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-02T22:43:01.703

[Hacker's Delight](http://www.hackersdelight.org/)有一个完整的半章专门讨论这个问题（第 7-1 节：反转位和字节），使用二进制操作、位移和其他好东西。似乎[这些在 Python 中都是可能的](http://wiki.python.org/moin/BitwiseOperators)，它应该比二进制到字符串和反向方法快得多。

这本书不公开，但我发现这篇博客文章讨论了其中的一些内容。博客文章中显示的方法遵循书中的以下引用：

> 通过交换相邻的单个位，然后交换相邻的 2 位字段等，可以非常有效地完成位反转，如下所示。这五个赋值语句可以按任意顺序执行。

[http://blog.sacaluta.com/2011/02/hackers-delight-reversing-bits.html](http://blog.sacaluta.com/2011/02/hackers-delight-reversing-bits.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-30T03:41:44.073

```
>>> def bit_rev(n):
...     return int(bin(n)[:1:-1], 2)
...
>>> bit_rev(2)
1
>>>bit_rev(10)
5 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-07T23:56:44.300

如果您想根据特定数量的位（即 1 = 2b'00000001）反转二进制值怎么办？在这种情况下，反向值将是 2b'10000000 或 128（十进制）分别为 0x80（十六进制）。

```
def binary_reverse(num, bit_length):
    # Convert to binary and pad with 0s on the left
    bin_val = bin(num)[2:].zfill(bit_length)
    return int(''.join(reversed(bin_val)), 2)
    # Or, alternatively:
    # return int(bin_val[::-1], 2) 
```

# javascript - 在没有浏览器环境的JS中将HTML转换为纯文本

> ID：15180173
> 
> 赞同：29
> 
> 时间：2013-03-02T22:28:35.807
> 
> 标签：javascript, regex, couchdb

我有一个 CouchDB 视图映射函数，它生成存储的 HTML 文档的摘要（`x`文本的第一个字符）。不幸的是，我没有将 HTML 转换为纯文本的浏览器环境。

目前我使用这个多阶段正则表达式

```
html.replace(/<style([\s\S]*?)<\/style>/gi, ' ')
    .replace(/<script([\s\S]*?)<\/script>/gi, ' ')
    .replace(/(<(?:.|\n)*?>)/gm, ' ')
    .replace(/\s+/gm, ' '); 
```

虽然它是一个非常好的过滤器，但它显然不是一个完美的过滤器，有时会漏掉一些剩菜。有没有更好的方法在没有浏览器环境的情况下转换为纯文本？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-02T22:31:41.463

这个简单的正则表达式有效：

```
text.replace(/<[^>]*>/g, ''); 
```

它删除所有锚点。

实体，比如`&lt;`不包含 <，所以这个正则表达式没有问题。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-11-19T12:36:48.650

将 HTML 转换为 Gmail 等纯文本：

```
html = html.replace(/<style([\s\S]*?)<\/style>/gi, '');
html = html.replace(/<script([\s\S]*?)<\/script>/gi, '');
html = html.replace(/<\/div>/ig, '\n');
html = html.replace(/<\/li>/ig, '\n');
html = html.replace(/<li>/ig, '  *  ');
html = html.replace(/<\/ul>/ig, '\n');
html = html.replace(/<\/p>/ig, '\n');
html = html.replace(/<br\s*[\/]?>/gi, "\n");
html = html.replace(/<[^>]+>/ig, ''); 
```

如果你可以使用`jQuery`：

```
var html = jQuery('<div>').html(html).text(); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-07-27T12:14:54.963

使用 TextVersionJS ( [http://textversionjs.com](http://textversionjs.com) )，您可以将 HTML 转换为纯文本。它是纯 javascript（带有大量 RegExp），因此您可以在浏览器和 node.js 中使用它。

在 node.js 中它看起来像：

```
var createTextVersion = require("textversionjs");
var yourHtml = "<h1>Your HTML</h1><ul><li>goes</li><li>here.</li></ul>";

var textVersion = createTextVersion(yourHtml); 
```

（我从页面复制了示例，您必须先 npm install 模块。）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-04-13T02:11:12.010

你可以试试这个方法。它们都不兼容所有浏览器`textContent`：`innerText`

```
var temp = document.createElement("div");
temp.innerHTML = html;
return temp.textContent || temp.innerText || ""; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-12-04T22:02:36.600

将 html 的 @EpokK 答案更新为**电子邮件文本版本**用例

```
const htmltoText = (html: string) => {
  let text = html;
  text = text.replace(/\n/gi, "");
  text = text.replace(/<style([\s\S]*?)<\/style>/gi, "");
  text = text.replace(/<script([\s\S]*?)<\/script>/gi, "");
  text = text.replace(/<a.*?href="(.*?)[\?\"].*?>(.*?)<\/a.*?>/gi, " $2 $1 ");
  text = text.replace(/<\/div>/gi, "\n\n");
  text = text.replace(/<\/li>/gi, "\n");
  text = text.replace(/<li.*?>/gi, "  *  ");
  text = text.replace(/<\/ul>/gi, "\n\n");
  text = text.replace(/<\/p>/gi, "\n\n");
  text = text.replace(/<br\s*[\/]?>/gi, "\n");
  text = text.replace(/<[^>]+>/gi, "");
  text = text.replace(/^\s*/gim, "");
  text = text.replace(/ ,/gi, ",");
  text = text.replace(/ +/gi, " ");
  text = text.replace(/\n+/gi, "\n\n");
  return text;
}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-28T00:30:57.937

如果你想要一些准确的东西并且可以使用 npm 包，我会使用[html-to-text](https://github.com/html-to-text/node-html-to-text)。

从自述文件：

```
const { htmlToText } = require('html-to-text');

const html = '<h1>Hello World</h1>';
const text = htmlToText(html, {
  wordwrap: 130
});
console.log(text); // Hello World 
```

仅供参考，我在 npm 趋势上发现了这个；[html-to-text](https://github.com/html-to-text/node-html-to-text)似乎是我用例的最佳选择，但您可以[在此处](https://www.npmtrends.com/html-to-text-vs-unfluff-vs-html2plaintext-vs-textract-vs-textversionjs)查看其他选项。

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2016-02-27T19:31:51.620

很简单，你也可以实现一个“toText”原型：

```
String.prototype.toText = function(){
    return $(html).text();
};

//Let's test it out!
var html = "<a href=\"http://www.google.com\">link</a>&nbsp;<br /><b>TEXT</b>";
var text = html.toText();
console.log("Text: " + text); //Result will be "link TEXT" 
```

# emacs - 如何在 Emacs、TeX 输入法中禁用下划线 (_) 下标

> ID：15180175
> 
> 赞同：13
> 
> 时间：2013-03-02T22:28:41.663
> 
> 标签：emacs, input, customization

在 Emacs 上，在为自己编辑注释文本文档（`.txt`文档，*而不是*`.tex`文档）时，我使用,`M-x` `set-input-method` `Ret` `TeX`以便轻松访问各种 Unicode 字符。例如，键入`\``t``o``space`会导致在文本中插入“→” ，键入会导致插入`x``^``2`“x ² ”，因为我使用的字体分别支持 Unicode 代码点`0x2192`和`0x00B2`。

该方法中特殊处理的字符之一是下划线键，`_`. 但是，我用于 Emacs 的字体似乎不支持各种下标字符的代码点，例如下标零（代码点 0x2080），因此当我输入 时`_``0`，我的输出中出现了一些呈现为薄空白的内容. 在这种情况下，我宁愿只使用这两个字符`_0`。

我*可以*`_0`通过笨拙的击键序列来理解，`_``space``del``0`因为序列`space`中间的击键会导致 Emacs 中止 TeX 输入法。但这很尴尬。

*所以*`_`，我的问题是：当我在 TeX 输入法中时，如何在本地自定义我的 Emacs 以完全不重新映射键？或者我怎样才能创建一个修改过的 TeX 输入法的克隆（或扩展等），它的魔力没有下划线？

到目前为止我尝试过的事情：

*   我已经完成`M-x``describe-key`了`_`；但它只是绑定到`self-insert-command`，就像许多其他文本字符一样。我确实在`post-self-insert-hook`那里看到了一个，但我还没有探索过尝试使用它来颠覆 TeX 输入法。

到目前为止我还没有尝试过的事情：

*   我没有尝试学习有关输入法架构或其源代码的任何内容。根据我对代码和方法的快速了解。这似乎不是我可以快速跳入的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T16:55:39.727

所以这是我刚刚找到的解决方案：制作一份 TeX 输入法的个性化副本，删除所有不需要的条目。然后在使用时`M-x set-input-method`，选择个性化版本，而不是`TeX`。

我会早点尝试过，但其内置文档`set-input-mode`并没有为我找到它的输入方法的实际来源提供足够的指导。只有在对 SO 进行另一次搜索并找到以下内容后：[Emacs：无法激活输入法](https://stackoverflow.com/questions/12551874/emacs-cant-activate-input-method)，我才能够获得足够的信息来自己完成此操作。

细节：

1.  在 Emacs 中，打开`/usr/share/emacs/22.1/leim/leim-list.el`并找到您要自定义的输入法的条目。该条目将类似于以下形式：

    ```
    (register-input-method
     "TeX" "UTF-8" 'quail-use-package
     "\\" "LaTeX-like input method for many characters."
     "quail/latin-ltx") 
    ```

2.  请注意上面表格中最后一个元素中引用的文件名前缀。找到对应的Elisp源文件；在这种情况下，它是文件的相对路径`quail/latin-ltx.el[.gz]`。在 Emacs 中打开该文件，然后检查它；它应该具有方法重新映射的条目，包括期望的和不期望的。

3.  在您的其他 Emacs 自定义项中制作该 Elisp 源文件的用户本地副本。在 Emacs 中打开该本地副本。

4.  在你的本地副本中，找到`(quail-define-package ...)`文件中的表格，并更改包的名称；我用`FSK-TeX`了我的新名字，像这样：

    ```
    (quail-define-package
     "FSK-TeX" "UTF-8" "\\" t   ;; <-- The first argument here is the important bit to change.
     "LaTeX-like input method for many characters but not as many as you might think.
     ...) 
    ```

5.  浏览您的本地副本，并删除您不想要的映射的所有 S 表达式。

6.  `leim-list.el`在您的 .emacs 配置文件中，使用类似于您在步骤 1 中看到的表单注册您的自定义输入法：

    ```
    (register-input-method
     "FSK-TeX" "UTF-8" 'quail-use-package
     "\\" "FSK-customized LaTeX-like input method for many characters."
     "~/ConfigFiles/Elisp/leim/latin-ltx") 
    ```

7.  重启 Emacs 并测试你的新输入法；在我的情况下，通过执行`M-x set-input-method FSK-TeX`、输入`a``_``0`和确认`a_0`显示在缓冲区中。

* * *

因此，一旦安装了它，至少有一个答案比问题中列出的一些解决方法更尴尬（事实证明，Emacs 22 手册中也正式记录了作为切断输入法处理的一种方式）。

但是，我对这个解决方案并不满意，因为我更愿意继承未来对 TeX 模式的更改，并`.emacs`在启动时删除不需要的条目。

所以我会等着看是否有人提出比这更好的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T00:16:06.597

我自己没有对此进行测试，但这似乎正是您正在寻找的东西：

“如何在 emacs 中禁用 TeX 模式下的下划线下标” -[来源](http://gimbo.org.uk/blog/2007/11/11/disabling_underscore_subscript_emacs_tex_mode/)

## 这个 blogpot 给出了两个解决方案：

1.  由博文的作者：（`(setq font-lock-maximum-decoration nil)`从最大值）

2.  作为评论提到：

    `(eval-after-load "tex-mode" '(fset 'tex-font-lock-subscript 'ignore))`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-03T13:44:42.273

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-19T16:51:52.807

正如[pnkfelix answer](https://stackoverflow.com/a/15188077)中已经解释的那样，似乎我们必须制作 TeX 输入法的个性化副本。但是这里有一种更轻松的方法来做到这一点，无需任何文件调整。只需将以下内容放入您的`.emacs`:

```
(eval-after-load "quail/latin-ltx"
  '(let ((pkg (copy-tree (quail-package "TeX"))))
     (setcar pkg "MyTeX")
     (assq-delete-all ?_ (nth 2 pkg))
     (quail-add-package pkg)))
(set-input-method 'TeX)
(register-input-method "MyTeX" "UTF-8" 'quail-use-package "\\")
(set-input-method 'MyTeX) 
```

重要的部分是`assq-delete-all`中间的那一行，它删除了所有以 . 开头的快捷方式条目`_`。这有点像 lisp hack，但它似乎有效。由于我也对以`-`and开头的快捷方式感到恼火，因此`^`我还使用以下两行来禁用它们：

```
 (assq-delete-all ?- (nth 2 pkg))
     (assq-delete-all ?^ (nth 2 pkg)) 
```

请注意，之后您可以`M-x set-input-method`随时指示`TeX`或`MyTeX`在原始 TeX 输入法或自定义输入法之间切换。

# c - 在字典中查找单词 C 编程

> ID：15180178
> 
> 赞同：0
> 
> 时间：2013-03-02T22:29:02.333
> 
> 标签：c, dictionary, spell-checking

我有一个文本文件中的单词词典，我需要在文本文件中找到某些单词。例如由字母 {q, a, z, w, s, x, e, d, c, r, f, v,t,g,b} 或以 {d,o 结尾的单词，我们}。我正在寻找一种可以做到这一点的方法。将所有单词放入数组中最容易吗？还是我应该将其全部保存在文本文件中？我试过文本文件的方法，但被卡住了。这就是我所拥有的。非常感谢！

```
 int size, count;

 char *p;
 char *words[];

 FILE * dict_file;

 dict_file = fopen("MyDictionary.txt", "r");

fseek(dict_file, 0, SEEK_END); // seek to end of file
size = ftell(dict_file); // get current file pointer
fseek(dict_file, 0, SEEK_SET); // seek back to beginning of file
// proceed with allocating memory and reading the file

p = dictionary;
while (p = fgets(p, size, dict_file))
{
   p += strlen(p);

   words[count] = p;

   count++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T23:18:42.043

显然，这是错误的：

```
FILE * dict_file;
fseek(dict_file, 0, SEEK_END); // seek to end of file
size = ftell(dict_file); // get current file pointer
fseek(dict_file, 0, SEEK_SET); // seek back to beginning of file
// proceed with allocating memory and reading the file
dict_file = fopen("MyDictionary.txt", "r"); 
```

在打开文件之前，您不能（正确）使用文件，因此中间三行肯定会产生一些不可预知的结果。最有可能该大小变为负数或零，这两者都可能会扰乱以下`fgets`调用。

这没有显示在您的代码中，但我希望您正在打电话`malloc()`或其他什么？

```
p = dictionary; 
```

在修复上述错误时，您可能需要替换它：

```
 while (*p != '\0')
  {
        p += 1;
  } 
```

和：

```
 p += strlen(p)-1; 
```

[`-1`如果你真的想要`'\0'`每个字符串之间的

现在，话虽如此，我可能会采用指向每个字符串的指针数组的方法，而不是将所有内容存储在一个巨大的单个字符串中。这样，您可以简单地从一个字符串移动到另一个字符串。你仍然可以像上面那样使用你的长字符串，但是有一个带有指向每个字符串开头的指针的辅助变量[并保持零，所以从上面删除-1。

然后我会编写一个函数来执行“这个字符串是否由这些字母组成”和另一个函数“是以这些字母结尾的字符串”。如果您对通常如何进行字符串处理有所了解，那么两者都应该是相对微不足道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T23:27:23.643

如果您正在使用符合 POSIX 的系统，您可能想看看`<regex.h>`

这样您就可以通过正则表达式搜索您的单词。我猜是这样的：

*   `"([qazwsxedcrfvtab]+)[^[:alpha:]]"`

*   和`"([[:alpha:]]*[dous])[^[:alpha:]]"`

在您的情况下，但您应该确保使它们适应您的特定需求。

```
 int regcomp(regex_t *preg, const char *regex, int cflags);

   int regexec(const regex_t *preg, const char *string, size_t nmatch,
               regmatch_t pmatch[], int eflags);

   void regfree(regex_t *preg); 
```

将是当时要查看的功能。

你可以使用类似的东西：

```
regext_t regex;
regmatch_t *match;

char *pos = p;
int n_matches;

regcomp (&regex, "your-regular-expression", REG_EXTENDED);
n_matches = regex.re_nsub + 1;
match = malloc (n * sizeof (regmatch_t));

while (!regexc (&regex, pos, n_matches, match, 0) {
  /* extract key and value from subpatterns
     available in match[i] for i-th submatch
     ... */

  pos += match[0].rm_eo;
}

regfree (&regex);
free (match); 
```

# sql - 将文件插入访问表

> ID：15180179
> 
> 赞同：0
> 
> 时间：2013-03-02T22:29:05.533
> 
> 标签：sql, ms-access

我有一个名为的表`Reports`，它有 3 个字段`ID`（自动编号）、`filename`（字符串字段）、`theFile`（附件字段）。

我想要的是运行 SQL 查询并将 PDF 文件插入附件字段 ( `theFile`)。

假设 PDF 文件位于 C: 驱动器 (C:\report1.pdf)，我尝试了下面的 SQL 查询，但它不起作用。我知道将文件存储在数据库中并不是一个好习惯，但我只是想尝试一下：

```
CurrentDb.Execute "INSERT INTO Reports (filename,theFile) VALUES ('report1'," & C:\report1.pdf & ")" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T00:18:56.657

将文件存储在数据库中是标准做法。Access当然支持它，但不是通过SQL。您必须使用 DAO，详见[http://msdn.microsoft.com/en-us/library/office/bb258184%28v=office.12%29.aspx](http://msdn.microsoft.com/en-us/library/office/bb258184%28v=office.12%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T23:20:06.760

“文件”不是 Access 中支持的适当 SQL 数据类型，[可用数据类型](http://msdn.microsoft.com/en-us/library/windows/desktop/ms714540%28v=vs.85%29.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-25T20:26:56.493

没错，Derek，如果您尝试运行这样的 SQL 语句，您每次都会收到一种或另一种类型的错误消息。我花了相当多的时间为我自己的数据库研究这个主题，据我所知，有很多选择/替代方案；但是，具有附件列类型并使用 SQL 插入文件并不是 Access 当前功能的选项。

将文件存储在数据库中并不是坏习惯，它实际上是标准做法；但是，最好不要将文件存储在 ACCESS 数据库中。这有几个原因，您可以自己研究，但也许最值得注意的是，Access 的文件大小限制为 2GB，因此如果您将文件存储在其中，您可能会很快耗尽空间，然后事情变得更加复杂.

以下是您的选择：

1.  将您的列数据类型更改为 OLE 对象并使用某种流读取器将文件转换为二进制数据，然后使用 SQL 语句将它们加载到您的数据库中
2.  使用内置的 Access 用户界面直接处理表格/附件
3.  建立 DAO 数据库连接并使用 Access'recordset.LoadFromFile 函数
4.  只需将链接存储到 Access DB 中的文件

第 4 个选项是首选方法。它非常简单，您不必担心复杂的代码或 2GB 的存储限制。

# javascript - 用javascript中的数组替换所有命中

> ID：15180182
> 
> 赞同：0
> 
> 时间：2013-03-02T22:29:21.917
> 
> 标签：javascript, regex, arrays, string, replace

所以我尝试用字符串中的数组替换。

```
for ( var i = 0; i < replacableArray.length; i++ )
{
    inputText = inputText.replace( replacableArray[ i ], replacedArray[ i ] );
} 
```

这很容易，但是当我想用它替换所有内容时，`\g`它会检测为字符串，而不是数组。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T22:31:27.897

您将需要创建一个[`RegExp`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)对象：

```
inputText.replace( new RegExp(replacableArray[ i ], "g"), replacedArray[ i ] ) 
```

`RegExp`是[`replace`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)函数的另一个签名。

# mysql - 添加索引以优化 MySQL 查询

> ID：15180183
> 
> 赞同：0
> 
> 时间：2013-03-02T22:29:22.820
> 
> 标签：mysql, optimization, indexing

我们有以下包含大约 1.5 亿行的 MySQL 表：

```
CREATE TABLE `data` (
  `datetime` datetime NOT NULL,
  `value1` decimal(12,6) NOT NULL,
  `value2` decimal(12,6) NOT NULL,
  `value3` decimal(12,6) NOT NULL,
  `value4` decimal(12,6) NOT NULL,
  `value5` decimal(12,6) NOT NULL,
  `symbol_id` int(11) NOT NULL,
  PRIMARY KEY (`symbol_id`,`datetime`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

这 1.5 亿行平均分布在 9500 个符号之间，由 symbol_id 指定。

我正在尝试在表上运行以下查询：

```
SELECT datetime FROM data WHERE symbol_id = 1234 AND datetime <= "2013-03-01 15:00:00" ORDER BY datetime DESC LIMIT 1 
```

在查询上运行 EXPLAIN 会返回：

```
 id: 1
  select_type: SIMPLE
        table: data
         type: range
possible_keys: PRIMARY
          key: PRIMARY
      key_len: 12
          ref: NULL
         rows: 23856
        Extra: Using where; Using index 
```

该查询平均需要大约 300 毫秒才能运行。我可以添加什么索引来加快速度？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T22:44:28.153

正如 Gordon 所暗示的，没有可以提高查询性能的索引。

这并不是说您无法使其更快 - 调整您的 DBMS 和 OS I/O - 您没有提供任何关于它当前如何配置、它正在运行什么以及使用模式是什么样的信息。如果你还没有开始这个过程，那么对你的安装运行 mysqltuner.pl 将是一个好的开始——但它并不总是完全正确的。使用不同的引擎可能会提高此查询的性能 - 但这取决于系统上发生的所有其他事情。

通过将索引分片到多个磁盘和/或使用 SSD 作为索引存储，您将获得巨大收益。更多的内存*几乎*总是有帮助的。

去买一本关于 MySQL 调优[的好书，花时间阅读它。](http://www.amazon.co.uk/High-Performance-MySQL-Optimization-Replication/dp/1449314287/ref=sr_1_2?ie=UTF8&qid=1362264104&sr=8-2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T02:09:16.907

使用索引可能会提高此查询的性能，但首先您必须确定列的基数。

```
SELECT COUNT(DISTINCT `datetime`) FROM `data`;
SELECT COUNT(DISTINCT `symbol_id`) FROM `data`; 
```

无论返回最大数量的唯一值具有更高的基数并具有最佳复合索引，列必须按基数的降序排列。

您当前有一个复合主键，其中的列按以下顺序排列。

```
PRIMARY KEY (`symbol_id`,`datetime`) 
```

如果 symbol_id 具有比 datetime 更高的基数，则无法进一步优化查询。另一方面，如果 datetime 具有更高的基数，那么您应该添加一个带有 datetime 后跟 symbol_id 的索引。

```
INDEX idx_datetime_symbol (`datetime`,`symbol_id`) 
```

# c++ - 模板实现中的错误（嵌套类）

> ID：15180184
> 
> 赞同：1
> 
> 时间：2013-03-02T22:29:22.817
> 
> 标签：c++, templates

我一直在寻找一些发布在这里的问题，但我仍然找不到这个代码的问题：

```
template <typename ItemType>
class List
{
  public:
    List(); 
  private:
    template <typename ItemType>
    struct Node
    {
      ItemType m_value;
      int      m_count;
      Node*    m_next;
      Node*    m_prev;
    };
    Node* m_head;
    int   m_uniqueSize;
    int   m_size;
    Node* find(const ItemType& value) const;
}; 
```

然后在 cpp 文件中，我像这样声明 find 函数：

```
template <typename ItemType>
typename Multiset<ItemType>::Node* Multiset<ItemType>::find(const ItemType& value) const
{
   //linear search code in here
} 
```

我的代码有什么问题吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T22:32:55.653

问题是您在`.cpp`文件中插入模板实现代码：所有模板代码都必须在**头**文件中（您可能希望将接口代码放在`MyClass.h`文件中，将实现代码放在`MyClass-inl.h`文件中，但两者都必须是头文件）。

此外，您`Multiset`在“.cpp”代码中编写了，但我认为您应该根据您的第一个“标题”代码（类的名称是）使用`List`代替。`Multiset``List`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T00:21:54.320

为了进一步说明为什么模板会出现这种情况，请考虑在编译时对它们进行评估。因此，在链接器启动之前必须知道它们的类型，类似于内联函数、typedef 等。

# javascript - 在浏览器中调用dust.loadSource() 时编译的模板引用未定义

> ID：15180186
> 
> 赞同：1
> 
> 时间：2013-03-02T22:29:41.317
> 
> 标签：javascript, dust.js

我正在尝试在浏览器中使用带有dust.js的编译模板来呈现HTML（不是带有node.js的服务器端）。如果我在客户端 javascript 中编译模板，它工作正常。如果我按照建议预编译模板并将其作为脚本标记包含在内，则dust.loadSource 语句会导致 Chrome 调试器显示：“未捕获的 ReferenceError：nowork 未定义”，其中“nowork”是模板名称。所以...

此 HTML 和脚本有效：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>This Works</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="dust-full-0.3.0.min.js"></script>
</head>
<body>
    <div id="bingo"></div>
    <script type="text/javascript">
        var templateKey = 'works';
        var myView = {"people":[{"name":"Fred"},{"name":"Harry"},{"name":"Linda"},{"name":"Mary"}]};

        dust.loadSource(dust.compile("{#people}<br/>{name}{/people}", templateKey));
        dust.render(templateKey, myView, function(err, out) {
            $('#bingo').html(out);
        });
    </script>
</body>
</html> 
```

但这不会：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>This Doesn't Work</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="dust-full-0.3.0.min.js"></script>
    <script type='text/javascript' src="nowork.js"></script>
</head>
<body>
    <div id="bingo"></div>
    <script type="text/javascript">
        var templateKey = 'nowork';
        var myView = {"people":[{"name":"Fred"},{"name":"Harry"},{"name":"Linda"},{"name":"Mary"}]};

        dust.loadSource(templateKey);
        dust.render(templateKey, myView, function(err, out) {
            $('#bingo').html(out);
        });
    </script>
</body>
</html> 
```

其中包含的 nowork.js 文件包含：

```
(function() {
    dust.register("nowork", body_0);

    function body_0(chk, ctx) {
        return chk.section(ctx.get("people"), ctx, {
            "block": body_1
        }, null);
    }
    function body_1(chk, ctx) {
        return chk.write("<br/>").reference(ctx.get("name"), ctx, "h");
    }
    return body_0;
})(); 
```

任何人都可以帮忙吗？

我刚刚意识到，这可能是由于这些文件没有在安装了 node.js 的机器上提供。我实际上是在我的台式机上本地工作。是这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T23:10:16.370

`dust.loadSource`当您提供预编译模板时，您实际上不需要调用。在内部，`dust.loadSource`只需`eval`对`dust.compile`. 如果删除该`dust.loadSource`行，您的模板应该会正确呈现。

Node.js 对于您在此处尝试的内容不是必需的。事实上，也不需要满灰尘。如果您所做的只是在客户端上渲染，则可以使用dust-core。

# haskell - 迭代两个集合，同时更新 Haskell 中的另外两个集合

> ID：15180188
> 
> 赞同：1
> 
> 时间：2013-03-02T22:29:45.173
> 
> 标签：haskell, nested-loops, set

我正在尝试将以下命令式代码转换为 Haskell 中的功能解决方案。我想将集合`s`的成员与集合`s'`和更新集合的成员进行比较，`t`并`t'`基于比较。这是命令式伪代码：

```
-- s, s', t, t' are of type Data.Set a
-- foo x y returns a Just a or Nothing 
foo :: a -> a -> Just a

-- Initialize t and t' to s and s'
t = s
t = s'

foreach x in s
  foreach y in s'
      if (foo x y) == Just z
        insert z into t
        delete x from t
        delete y from t'

return (t, t') 
```

我希望的 Haskell 函数的类型可能是这样的，

```
mergeSets :: S.Set -> S.Set -> (S.Set, S.Set)
mergeSets s s' = ... 
```

其中`S`是类型`Data.Set`，函数的结果将是与新集合`t`和的一对`t'`（或返回集合`t`和的其他方式`t'`）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T22:52:18.093

这是一种可能性：

```
bar s s' =
  foldl (\ (t,t') (z,(x,y)) -> 
              ( delete x (insert z t) , delete y t' ))
    (s,s')
    [(z,(x,y)) | x <- toList s, y <- toList s', Just z <- [foo x y]] 
```

这里的主要问题是您是否打算让您的插入和删除干扰该`foreach`机制。以上假设您没有。

如果你的集合很大，你可能需要增加严格性，以避免重击爆炸：

```
bar s s' = foldl (\ (t,t') (z,(x,y)) ->
             let a=insert z t; b=delete x a; c=delete y t' 
             in a `seq` b `seq` c `seq` (b,c) )
    .... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T22:52:08.423

如果您使用的是集合数据类型`Set`，通常不会在元素上编写循环。这将更适合列表。因此，如果您的算法需要以某种嵌套方式枚举所有元素，请将 Set 转换[为列表。](http://www.haskell.org/ghc/docs/latest/html/libraries/containers/Data-Set.html#v%3atoList)

所以，我会尽量避免完全在集合上使用嵌套循环算法，而是在集合操作方面寻找一些声明性规范：交集、联合、差异等。

如果这是不可能的，那么对列表的天真翻译当然是可能的：

```
import qualified Data.Set as S

mergeSets :: Ord a => S.Set a -> S.Set a -> (S.Set a, S.Set a)
mergeSets s t = go1 (S.toList s) s t
    where
        go1 []     t t' = (t,t')
        go1 (x:xs) t t' = go1 xs u u'
            where
                (u, u') = go2 x (S.toList t) t t'

        go2 x []     t t'       = (t,t')
        go2 x (y:ys) t t'
            | Just z <- foo x y = go2 x ys (S.delete x (S.insert z t)) (S.delete y t')
            | otherwise         = go2 x ys t t'

-- for example
foo x y = if x == y then Just x else Nothing 
```

简单的一点是对嵌套循环进行建模。我们可以使用例如列表推导。但是，您的算法使用输出集的变异，因此我们需要将其作为累积参数传递。

不过，要真正很好地将这一点融入 Haskell，我们需要放弃逐个元素的命令式风格，并根据自然的 Set api 工作。这将是你通往一个好的解决方案的道路。

# javascript - 奇怪的事件处理程序错误：num.toString 不是函数

> ID：15180190
> 
> 赞同：0
> 
> 时间：2013-03-02T22:30:04.440
> 
> 标签：javascript, dom-events

一个奇怪的问题。很难用几句话来形容，但我会努力的。（我是 JavaScript 初学者）。

当鼠标悬停在`.u`标签上时，我希望它做一些事情。所以我有：

```
var dotUElements = document.getElementsByClassName("u");

for (var ii = 0; ii < dotUElements.length; ii++) {
    dotUElements[ii].onmouseover = createHandler1( dotUElements[ii] );
    dotUElements[ii].onmouseout = createHandler2( dotUElements[ii] );
} 
```

然后添加处理程序：

```
function createHandler1( myobj ) {
    return (function() {ff1(myobj);});
}

function createHandler2( myobj ) {
    return (function() {ff2(myobj);});
} 
```

我的鼠标和鼠标功能`ff1`是：`mouseover``ff2`

```
function ff1 (myobj) {
    myobj.style.color="red";
    var uChar = myobj.firstChild.nodeValue;
    var uNum =  uChar.charCodeAt(0);
    uName = unicodeTable(uNum);
    var uHex = (uNum).toSring(16);
}

function ff2 (myobj) {
    myobj.style.color="black";
} 
```

问题是最后一行

```
 var uHex = (uNum).toSring(16); 
```

它会产生错误：

> 错误：TypeError：uNum.toSring 不是函数

如果我简单地替换该行

```
(30).toSring(16); 
```

同样的错误。关于出了什么问题的任何提示？我有代码

[http://xahlee.info/js/ex/xx_test.html](http://xahlee.info/js/ex/xx_test.html)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-02T22:38:19.157

这是您的示例的工作演示

```
function unicodeTable(num) {
  var unicodedata = {
    0x2190: "LEFTWARDS ARROW",
    0x2191: "UPWARDS ARROW",
    0x2192: "RIGHTWARDS ARROW",
    0x2193: "DOWNWARDS ARROW",
  };
  return unicodedata[num];
}

function createHandler1(myobj) {
  return (function() {
    ff1(myobj);
  });
}

function createHandler2(myobj) {
  return (function() {
    ff2(myobj);
  });
}

function ff1(myobj) {
  myobj.style.color = "red"; // test code. so we know it's activated
  var uChar = myobj.firstChild.nodeValue;
  var uNum = uChar.charCodeAt(0);
  uName = unicodeTable(uNum);
  var uHex = (uNum).toString(16);
  alert(uHex);
}

function ff2(myobj) {
  myobj.style.color = "black"; // test code. so we know it's activated
}

var dotUElements = document.getElementsByClassName("u");

for (var ii = 0; ii < dotUElements.length; ii++) {
  dotUElements[ii].onmouseover = createHandler1(dotUElements[ii]);
  dotUElements[ii].onmouseout = createHandler2(dotUElements[ii]);
}
```

```
<body>

  <h1>unicode test 3</h1>

  <p>
    <b class="u">←&lt;/b>
    <b class="u">→&lt;/b>
    <b class="u">↑&lt;/b>
    <b class="u">↓&lt;/b>
  </p>

  <p>when mouse hover on b.u element, show the unicode name.</p>
</body>
```

我添加了一个`alert(uHex);`来显示价值。

让我知道它是否不起作用。

# ruby-on-rails - Ruby on Rails 部分渲染

> ID：15180192
> 
> 赞同：0
> 
> 时间：2013-03-02T22:30:29.987
> 
> 标签：ruby-on-rails, templates, partial, rails-activerecord

我有一个名为 Listing 的模型，我用它来表示转租的列表。我创建了一个名为 Filter 的模型，我用它来根据用户填写的表单过滤子组件。填写表单后，我希望将用户重定向到包含从过滤器返回的所有列表的模板。

这是我的过滤器模型。

```
class Filter < ActiveRecord::Base
attr_accessible :air_conditioning, :available_rooms, :bathrooms, :furnished, :negotiable, :new, :parking, :maximum_price, :private_bathroom, :show, :term, :total_rooms, :utilities, :washer_dryer
serialize :term

def listings
  @listings ||=find_listings
end

private

def find_listings
  listings=Listing.order(:price)
  listings=Listing.where("listings.price <= ?", maximum_price) if maximum_price.present?
  listings=Listing.where(total_rooms: total_rooms) if total_rooms.present?
  listings=Listing.where(available_rooms: available_rooms) if available_rooms.present?
  listings=Listing.where(bathrooms: bathrooms) if bathrooms.present?
  listings=Listing.where(term: term)
  listings=Listing.where(furnished: furnished)
  listings=Listing.where(negotiable: negotiable)
  listings=Listing.where(utilities: utilities)
  listings=Listing.where(air_conditioning: air_conditioning)
  listings=Listing.where(parking: parking)
  listings=Listing.where(washer_dryer: washer_dryer)
  listings=Listing.where(private_bathroom: private_bathroom)
  listings
  end

end 
```

这是过滤器的显示方法。

```
<p id="notice"><%= notice %></p>
<%= render (@filter.listings)  %> 
```

很简单。

这是名为 _listing.html.erb 的模板

```
<div style="padding:5px">
<%= link_to 'New Listing', new_listing_path,{:style=>'', :class => "btn"} %>
<h1>Available Sublets</h1>

<table id="listingTable" class="table table-bordered table-hover">
  <tr>
    <th><%= link_to 'Filter', new_filter_path,{:style=>'', :class => "btn"} %><%= link_to 'Clear Filter', listings_path, {:style=>'', :class => "btn"} %></th>
    <th>Address</th>
    <th><u><%= "Price Per Month" %></u></th>
    <th>Description</th>
  </tr>
<% if @listings !=nil %>
    <% @listings.each do |listing| %>
      <tr onmouseover="this.style.cursor='pointer';"
      onclick="window.location.href = '<%= url_for(:controller => 'listings', :action => 'show', :id=>listing.id) %>' " >
        <td><%= image_tag listing.photo.url(:small) %></td>
        <td><%= listing.address %></td>
        <td>$<%= listing.price %></td>
        <td width="40%"><%= listing.description %></td>
      </tr>
    <% end %>
<% end %>
<% else if @listings==nil %>
    <p> Sorry, No Sublets Fit Your Criteria! </p>
<% end %>
</table> 
```

但是，过滤器永远不会返回任何结果......我已经测试了至少 20 次，这些查询肯定会返回至少 1 个列表。我觉得我有一个命名约定问题，但我以前从未使用过部分。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T22:32:52.387

这段代码：

```
listings=Listing.where(term: term)
listings=Listing.where(furnished: furnished)
listings=Listing.where(negotiable: negotiable)
listings=Listing.where(utilities: utilities)
listings=Listing.where(air_conditioning: air_conditioning)
listings=Listing.where(parking: parking)
listings=Listing.where(washer_dryer: washer_dryer)
listings=Listing.where(private_bathroom: private_bathroom) 
```

实际上并没有进一步过滤`listings`。基本上，它是`listings`一次又一次地重新分配。

如果要将连续过滤器应用于`listings`，请执行以下操作：

```
listings = Listing.where(term: term)
listings = listings.where(furnished: furnished)
listings = listings.where(negotiable: negotiable)
... 
```

# c# - 在c#开发windows phone中出现异常

> ID：15180194
> 
> 赞同：2
> 
> 时间：2013-03-02T22:30:48.400
> 
> 标签：c#, api, windows-phone-8

```
System.Runtime.Serialization.InvalidDataContractException was unhandled by user code
  HResult=-2146233088
  Message=Type 'xxx.Cost+RootObject' cannot be serialized. Consider marking it with the DataContractAttribute attribute, and marking all of its members you want serialized with the DataMemberAttribute attribute. Alternatively, you can ensure that the type is public and has a parameterless constructor - all public members of the type will then be serialized, and no attributes will be required.
  Source=System.Runtime.Serialization
  InnerException: 
```

我看到另一个帖子，有些人建议添加数据合同和数据成员。你能帮我把数据成员和数据合同放在哪里吗？我还是不明白。

这是我的课程代码：

```
namespace xxx
{
    class Cost
    {
        public class Title
        {
            public string from { get; set; }
            public string to { get; set; }
            public string from_zip { get; set; }
            public string to_zip { get; set; }
            public string from_suburb { get; set; }
            public string to_suburb { get; set; }
        }

        public class Content
        {
            public string company { get; set; }
            public string package { get; set; }
            public string rate { get; set; }
            public string rate_second { get; set; }
            public string est_time { get; set; }
            public string inclusion { get; set; }
            public string exclusion { get; set; }
            public string last_update { get; set; }
        }

        public class RootObject
        {
            public Title title { get; set; }
            public List<Content> content { get; set; }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T23:19:27.860

[您可以在http://msdn.microsoft.com/en-us/library/ms731073.aspx](http://msdn.microsoft.com/en-us/library/ms731073.aspx)阅读有关序列化合同的文档

在您的情况下，您需要使用`DataContract`属性注释您的类，以及您希望使用 序列化的成员，`DataMember`如下所示。

```
using System.Runtime.Serialization;
class Cost
{
    [DataContract]
    public class Title
    {
        [DataMember]
        public string from { get; set; }
        [DataMember]
        public string to { get; set; }
        [DataMember]
        public string from_zip { get; set; }
        [DataMember]
        public string to_zip { get; set; }
        [DataMember]
        public string from_suburb { get; set; }
        [DataMember]
        public string to_suburb { get; set; }
    }

    [DataContract]
    public class Content
    {
        [DataMember]
        public string company { get; set; }
        [DataMember]
        public string package { get; set; }
        [DataMember]
        public string rate { get; set; }
        [DataMember]
        public string rate_second { get; set; }
        [DataMember]
        public string est_time { get; set; }
        [DataMember]
        public string inclusion { get; set; }
        [DataMember]
        public string exclusion { get; set; }
        [DataMember]
        public string last_update { get; set; }
    }

    [DataContract]
    public class RootObject
    {
        [DataMember]
        public Title title { get; set; }

        [DataMember]
        public List<Content> content { get; set; }
    }
} 
```

# android - Android上的JQuery Mobile导航栏滚动问题

> ID：15180199
> 
> 赞同：1
> 
> 时间：2013-03-02T22:31:03.550
> 
> 标签：android, cordova, jquery-mobile, navbar

所以我一直在用头撞墙一段时间。我正在使用 Phonegap 和 jQuery Mobile 开发一个应用程序，其中一个页面涉及一个占据大部分页面的列表。在页面底部我有一个导航栏。有时，但并非总是如此，当我滚动时，导航栏会随着滚动而移动，并且不会停留在页面底部。此外，当我单击导航栏时，它会时不时地跳到页面顶部，它在滚动之前首次出现。我正在使用科尔多瓦 2.4、JQM 1.2 和 Android 4.0.3。当我在我的 iOS 设备上测试时，不会出现这个问题。

这是html（列表中没有任何内容，因为它是在用户进入房间时动态填充的）：

```
<div class="body profile" data-role="page" id="patientprofile" data-theme="a"><!-- this serves as the template for a patient profile page -->

<!-- patient's name displayed here -->
<div data-role="header" data-position="fixed" data-tap-toggle="false">
    <h1 id=patientnamespace>Name</h1>
</div><!-- /header -->

<div data-role="content">

    <ul id="patientstatuslist" style="padding-bottom:35px"><!-- this list contains the patient's status updates; by default empty -->

    </ul>
</div><!-- /content -->

<div data-role="footer" data-position="fixed" data-theme="a"><!-- navbar that handles transitions to other pages -->
    <div data-role="navbar">
        <ul>
            <li><a href="#patientlist" id="listbutton">List</a></li><!-- goes to the patient list screen -->
            <li><a href="#newmessagedialog" data-rel="dialog" data-transition="pop">Message</a></li><!-- opens the new message dialog -->
            <li><a href="#profilesettings">Profile</a></li><!-- goes to profile settings screen -->
            <li><a href="#notificationsettings">Alert</a></li><!-- goes to notification settings screen -->
        </ul>
    </div><!-- /navbar -->
</div><!-- /footer --> 
```

# string - 对来自单元格的数据使用负载

> ID：15180201
> 
> 赞同：0
> 
> 时间：2013-03-02T22:31:18.797
> 
> 标签：string, cells, matlab-load

在我的代码中，我试图将负载与来自单元格的条目一起使用，但它不起作用。下面我的代码部分生成一个 3 维字符串数组。字符串表示文件名的路径。

```
for i = 1:Something
 for j = 1:Something Different
  for k = 1: Yet Something Something Different
    DataPath{j,k,i} = 'F:\blah\blah\blah\fileijk    %file changes based on i,j,and k       
  end
 end
end 
```

在代码的下一部分中，我想使用 load 使用上面代码中定义的路径名打开文件。我使用下面的代码执行此操作。

```
Dummy = DataPath{l,(k-1)*TSRRange+m}; 
Data = load(Dummy); 
```

这个想法是让 Dummy 将字符串内容从 DataPath 中取出，以便我可以在加载时使用它。通过这样做，我认为 Dummy 将被定义为字符串而不是单元格，但事实并非如此。如何将字符串从 DataPath 中拉出，以便在负载时使用它？谢谢。

我必须以这种方式加载数据，因为数据位于多个文件夹中。如果需要，我可以发布更多代码，但这很复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T00:39:02.730

`Dummy`是一个单元格，因为您分配了一个 3D 单元格数组，但正在访问一个 2D 单元格`Dummy = Datapath{1,(k-1)*TSRRange+m}`

我不相信您可以期望以这种方式访问​​所有单元格元素。相反，就像创建它时一样使用三个索引。

# html - 单击html音频播放器的播放按钮时执行功能

> ID：15180202
> 
> 赞同：3
> 
> 时间：2013-03-02T22:31:24.203
> 
> 标签：html, audio, playback

是否可以检测到何时单击 html5 音频播放器中的播放按钮？例如：

```
<audio controls>
    <source src="music.mp3"/>
    <source src="music.ogg" />
</audio>
....
....
$('playbutton').on('click', function(e){
    //some functions
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T23:28:48.810

听起来（呵呵）您正在寻找`play`活动。

```
<audio controls id="player">
  <source src="music.mp3">
</audio>

<script>
  var player = document.getElementById("player");
  player.addEventListener("play", function () {
      console.log("it's go time");
  });
</script> 
```

有关可用事件的完整列表，至少根据规范，请查看[WHATWG 文档](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#mediaevents)

# ruby-on-rails - 将数据从数据库返回到rails中的另一个页面

> ID：15180204
> 
> 赞同：2
> 
> 时间：2013-03-02T22:31:33.000
> 
> 标签：ruby-on-rails, database

如何在另一个页面上从数据库返回数据？

我可以将其归档在：views/posts/index.htm.erb

```
<h1>Listing posts</h1>

<table>
  <tr>
    <th>Titulo</th>
    <th>Conteudo</th>
    <th>Categoria</th>
    <th>Criado em</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @posts.each do |post| %>
  <tr>
    <td><%= post.titulo %></td>
    <td><%= post.conteudo %></td>
    <td><%= post.category.name %></td>
    <td><%= post.created_at.strftime("%d/%m/%Y") %></td>
    <td><%= link_to 'Show', post %></td>
    <td><%= link_to 'Edit', edit_post_path(post) %></td>
    <td><%= link_to 'Delete', post, confirm: 'Are you sure?', method: :delete %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New Post', new_post_path %> 
```

而我想在另一个页面上显示这些值：views/home/blog.html.erb

我该怎么做呢？您能否解释所有步骤，以便我可以在我的其他页面中显示这些值。

* * *

谢谢 Kocur4d

但我怎样才能得到一些信息？例如：我希望它以这种方式出现在帖子页面的标题中（在 blog.html.erb 中）：

```
<div class="post-title">
<h2 class="title"> <a href="link_to_post"> **<% = post.titulo%>** </ a> </ h2>
</ div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T01:24:11.923

步骤 1\. 创建控制器

在您的应用程序根目录中运行：

```
rails g controller home blog 
```

修改**controllers/homes_controller.rb**：

```
class HomesController < ApplicationController
  def blog
    @posts = Post.all
  end
end 
```

你的 controllers/posts_controller.rb 应该已经设置好了。您的问题需要的最低限度是定义索引方法，您可能还有其他方法：

```
class PostsController < ApplicationController
  def index
    @posts = Post.all
  end
end 
```

步骤 2\. 提取部分

更改**视图/帖子/index.htm.erb**：

```
<h1>Listing posts</h1>

<%= render partial: 'shared/posts', object: @posts %>

<%= link_to 'New Post', new_post_path %> 
```

创建/修改**视图/home/blog.html.erb**：

```
<h1>Listing posts</h1>

<%= render partial: 'shared/posts', object: @posts %>

<%= link_to 'New Post', new_post_path %> 
```

创建**视图/共享/_posts.html.erb**：

```
<table>
  <tr>
    <th>Titulo</th>
    <th>Conteudo</th>
    <th>Categoria</th>
    <th>Criado em</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% posts.each do |post| %>
  <tr>
    <td><%= post.titulo %></td>
    <td><%= post.conteudo %></td>
    <td><%= post.category.name %></td>
    <td><%= post.created_at.strftime("%d/%m/%Y") %></td>
    <td><%= link_to 'Show', post %></td>
    <td><%= link_to 'Edit', edit_post_path(post) %></td>
    <td><%= link_to 'Delete', post, confirm: 'Are you sure?', method: :delete %></td>
  </tr>
 <% end %>
</table> 
```

步骤 3\. 设置路线。

您的 routes.rb 文件中应该有类似的内容：

```
resources :posts or match 'posts/index' => 'posts#index' 
```

将此添加到**config/routes.rb**：

```
match 'home/blog' => 'home#blog' 
```

所以它可能看起来像这样（有几个变种）：

**配置/路由.rb**：

```
YourAppName::Application.routes.draw do 
  root to: 'posts#index'
  resources :posts

  match 'home/blog' =>  'home#blog'
end 
```

现在，当您启动 rails 服务器（假设标准配置）并访问：

**127.0.0.1:3000/posts/index**和**127.0.0.1:3000/home/blog**

你应该看到相同的内容。

这应该可以复制和粘贴，但我可能会犯一些拼写错误和其他小错误（希望不会，如果发现任何错误，请尽快编辑它们）。一般来说，您需要 3 个步骤将 http 请求转发到您的 Rails 应用程序堆栈。

1.  使用路由将 url 映射到控制器。
2.  创建控制器并在内部为视图准备数据。
3.  在视图中显示数据。

在[Rails Guides](http://guides.rubyonrails.org/index.html)、[Rails for Zombies](http://railsforzombies.org/)和[Rails Tutorial](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)中查看更多信息。

---------更新你的第二个问题-----------

我真的不明白你想达到什么目的？？目前 index.html.erb 和 blog.html.erb 都显示相同的数据，这就是你想要的吗？

**post**代表一个帖子，在 sharde/_posts.html.erb 中可用。您不能从 index.html.erb 或 blog.html.erb 中引用它。

**@posts**代表所有帖子及其在 index.html.erb 或 blog.html.erb 中可用。

**渲染部分：'shared/posts'，对象：@posts——**这一行说“嘿，伙计！在这里粘贴共享/帖子文件的内容，顺便说一句，我这里有一个局部变量@posts，所以如果你需要在共享/发布文件不适命名它从那里发布“

为了使它们看起来不同，请修改两个文件，并且它们都相同的部分位于 sharde/_posts.html.erb 中。

尝试例如删除此行：

```
<td><%= post.category.name %></td> 
```

从共享文件中查看会发生什么。

添加一些html标签和思想家。

Rails has may helper methods available' to find out about them check the links I give you and google, google, google.

Try to add some links with **link_to** helper

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T23:53:05.127

在您的家庭控制器中，对于 blog 方法，根据需要设置 @posts ...也许

```
@posts = Post.all 
```

# java - 如何有意图地从另一个活动运行特定方法

> ID：15180208
> 
> 赞同：-1
> 
> 时间：2013-03-02T22:31:55.273
> 
> 标签：java, android, android-sqlite

我有一个单选按钮活动，有 5 个游戏选项。这是一个问答游戏，所以用户可以选择玩直到他或她犯一个错误、两个错误、树形、四个和五个错误。我的问题是....进行 5 个活动和 5 个类是否更好，所以当用户检查该单选按钮时，我可以调用每个活动的意图，或者，最好针对所有五个选择进行一项活动，具体取决于什么用户选择，数到 1、2、3、4 或 5 个错误？我知道第一个选项怎么做，但我不知道第二个怎么做。这是我的选择活动：

```
public class Izbor extends Activity implements OnClickListener, OnCheckedChangeListener{

    MediaPlayer buttonBack;
    RadioButton rbDeset,rbDvadeset,rbNeogranicenoTriGreske,rbNeogranicenoJednaGreska,rbNeogranicenoPetGresaka;
    Button dNazad, dStart;
    RadioGroup rGrupa;
    TextView tv1;

    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.izbor);
        addListenerOnButton();
    }

    private void addListenerOnButton() {

        Typeface dugmad = Typeface.createFromAsset(getAssets(), "Bebas.ttf");
        Typeface pitanjeVrh = Typeface.createFromAsset(getAssets(), "Lobster.ttf");

        rbDeset = (RadioButton) findViewById(R.id.radio1);
        rbDvadeset = (RadioButton) findViewById(R.id.radio2);
        rbNeogranicenoJednaGreska = (RadioButton) findViewById(R.id.radio3);
        rbNeogranicenoTriGreske = (RadioButton) findViewById(R.id.radio4);
        rbNeogranicenoPetGresaka = (RadioButton) findViewById(R.id.radio5);
        dNazad = (Button) findViewById(R.id.bNazad);
        dStart = (Button) findViewById(R.id.bStart);
        rGrupa = (RadioGroup) findViewById(R.id.radioGroup1);
        buttonBack = MediaPlayer.create(Izbor.this, R.raw.back);
        tv1 = (TextView) findViewById(R.id.tv1);

        dNazad.setTypeface(dugmad);
        dStart.setTypeface(dugmad);
        rbDeset.setTypeface(dugmad);
        rbDvadeset.setTypeface(dugmad);
        rbNeogranicenoPetGresaka.setTypeface(dugmad);
        rbNeogranicenoJednaGreska.setTypeface(dugmad);
        rbNeogranicenoTriGreske.setTypeface(dugmad);
        tv1.setTypeface(pitanjeVrh);

        rGrupa.setOnCheckedChangeListener(this);
        rbDeset.setOnClickListener(this);
        rbDvadeset.setOnClickListener(this);
        rbNeogranicenoJednaGreska.setOnClickListener(this);
        rbNeogranicenoTriGreske.setOnClickListener(this);
        rbNeogranicenoPetGresaka.setOnClickListener(this);
        dStart.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                if(rbDeset.isChecked()){
                    startActivity(new Intent("rs.androidaplikacijekvizopstekulture.KVIZ"));
                }else if(rbDvadeset.isChecked()){
                    startActivity(new Intent("rs.androidaplikacijekvizopstekulture.DVADESETPITANJA"));  
                    }else if(rbNeogranicenoJednaGreska.isChecked()){
                        startActivity(new Intent("rs.androidaplikacijekvizopstekulture.TRIDESETPITANJA"));
                    }else if(rbNeogranicenoPetGresaka.isChecked()){
                        startActivity(new Intent("rs.androidaplikacijekvizopstekulture.NEOGRANICENOPETGRESAKA"));

                }

            }
        });

        dNazad.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                buttonBack.start();
                finish();

            }
        });
    }

    public void onCheckedChanged(RadioGroup group, int checkedId) {
        }

    public void onClick(View v) {
        // TODO Auto-generated method stub

    }
} 
```

这是一个用户可以玩到 5 个错误的活动：

```
public class NeogranicenoPetGresaka extends Activity implements OnClickListener{

    Button bIzlazIzKviza, bOdgovor1, bOdgovor2, bOdgovor3, bOdgovor4;
    TextView question, netacniOdg, score;
    int counter = 0;
    int brojacPogresnihOdgovora = 0;
    int brojacTacnihOdgovora = 0;

    Runnable mLaunchTask = new Runnable() {
        public void run() {
            nextQuestion();
        }
     };
    Runnable mLaunchTaskFinish = new Runnable() {
         public void run() {
            finish();
         }
      };

    private class Answer {
        public Answer(String opt, boolean correct) {
            option = opt;
            isCorrect = correct;
        }

        String option;
        boolean isCorrect;
    }
    Handler mHandler = new Handler();

    final OnClickListener clickListener = new OnClickListener() {
        public void onClick(View v) {

            Answer ans = (Answer) v.getTag();
            if (ans.isCorrect) {
                brojacTacnihOdgovora++;
                Intent i = new Intent("rs.androidaplikacijekvizopstekulture.TACANODGOVOR");
                startActivity(i);
                mHandler.postDelayed(mLaunchTask,1200);
            }
        else{
            brojacPogresnihOdgovora++;
            Intent i = new Intent("rs.androidaplikacijekvizopstekulture.POGRESANODGOVOR");
            startActivity(i);
            mHandler.postDelayed(mLaunchTask,2200);
            }
        }
    };

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.neograniceno5gresaka);

        Typeface dugmad = Typeface.createFromAsset(getAssets(), "Bebas.ttf");
        Typeface pitanje = Typeface.createFromAsset(getAssets(), "Lobster.ttf");
        bIzlazIzKviza = (Button) findViewById(R.id.bIzlazIzKvizaN);
        netacniOdg = (TextView) findViewById(R.id.tvBrojPitanjaN);
        question = (TextView) findViewById(R.id.tvPitanjeN);
        bOdgovor1 = (Button) findViewById(R.id.bOdgovorN1);
        bOdgovor2 = (Button) findViewById(R.id.bOdgovorN2);
        bOdgovor3 = (Button) findViewById(R.id.bOdgovorN3);
        bOdgovor4 = (Button) findViewById(R.id.bOdgovorN4);
        score = (TextView) findViewById(R.id.tvSkor2N);
        bOdgovor1.setTypeface(dugmad);
        bOdgovor2.setTypeface(dugmad);
        bOdgovor3.setTypeface(dugmad);
        bOdgovor4.setTypeface(dugmad);
        bIzlazIzKviza.setTypeface(dugmad);
        netacniOdg.setTypeface(dugmad);
        question.setTypeface(pitanje);
        score.setTypeface(dugmad);

        nextQuestion(); //startuje prvo pitanje!

    }

        public void onClick(View v) {
        // TODO Auto-generated method stub

    }

        protected void onPause() {
            // TODO Auto-generated method stub
            super.onPause();
        }

    public void nextQuestion() {

        TestAdapter mDbHelper = new TestAdapter(this);
        mDbHelper.createDatabase();

        try{    //Pokusava da otvori db

            mDbHelper.open();  //baza otvorena

            Cursor c = mDbHelper.getTestData();

            List<Answer> labels = new ArrayList<Answer>();

            labels.add(new Answer(c.getString(2), true));
            labels.add(new Answer(c.getString(3), false));
            labels.add(new Answer(c.getString(4), false));
            labels.add(new Answer(c.getString(5), false));

            Collections.shuffle(labels);

            if(brojacPogresnihOdgovora < 5){

        question.setText(c.getString(1));

        bOdgovor1.setText(labels.get(0).option);
        bOdgovor1.setTag(labels.get(0));
        bOdgovor1.setOnClickListener(clickListener);

        bOdgovor2.setText(labels.get(1).option);
        bOdgovor2.setTag(labels.get(1));
        bOdgovor2.setOnClickListener(clickListener);

        bOdgovor3.setText(labels.get(2).option);
        bOdgovor3.setTag(labels.get(2));
        bOdgovor3.setOnClickListener(clickListener);

        bOdgovor4.setText(labels.get(3).option);
        bOdgovor4.setTag(labels.get(3));
        bOdgovor4.setOnClickListener(clickListener);
        //reset your next question and all four options here
        netacniOdg.setText("" + brojacPogresnihOdgovora);
        score.setText("Score: " + brojacTacnihOdgovora);
            }
            else{
                Intent i = new Intent("rs.androidaplikacijekvizopstekulture.REZULTAT");
                startActivity(i);
                mHandler.postDelayed(mLaunchTaskFinish,4000);
            }
        }
        finally{    // kada zavrsi sa koriscenjem baze podataka, zatvara db
            mDbHelper.close();
        }

    bIzlazIzKviza.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            finish();   
        }
    });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T23:19:12.703

考虑到选择只是同一个游戏的一个小设置，我认为绝对没有理由为每个选择创建一个类/活动，这将是纯粹的疯狂。

至于设置部分，只需创建一个仅接受任意数量“错误”的数字输入字段（为什么不呢？）。OnClick 从此字段中获取输入，将值保存到意图附加项中，然后以意图开始游戏。在游戏的 onCreate 中读取 Intent Extras 并获取“尝试”/“错误”的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T16:39:29.340

好的，我尝试使用 onNewIntent，但我只能调用一个方法，而且我至少需要 3 个。这是我的选择活动中带有单选按钮（组）的代码：

```
public void onClick(View v) {
                if(rbDeset.isChecked()){
                    Intent intent = new Intent(Izbor.this, Kviz.class);
                    intent.putExtra("myMethod", "nextQuestion");
                    startActivity(intent); 
```

这是我的测验活动：

```
@Override
    protected void onNewIntent(Intent intent) {
        super.onNewIntent(intent);
        if(intent.getStringExtra("methodName").equals("nextQuestion")){
              nextQuestion();
        }

              } 
```

我尝试使用 ELSE IF 但它没有用。我的方法被命名为：nextQuestion()、nextQuestion2() 和 nextQuestion3()。这些方法几乎相同，只是计数器不同（10 个问题一个，20 个问题一个，30 个问题一个）。也许我不需要 3 种方法来做到这一点，但老实说，我不知道其他方法可以做到这一点。

# python - 重定向路由严格斜线

> ID：15180210
> 
> 赞同：3
> 
> 时间：2013-03-02T22:31:59.960
> 
> 标签：python, google-app-engine, webapp2

我正在尝试对 webapp2 重定向路由使用严格的斜线，但我收到了这个值错误 -

```
ValueError: Routes with strict_slash must have a name. 
```

这是我的一条路线的示例-

```
RedirectRoute(r'/',handler=IndexHandler,strict_slash=True) 
```

如果我没有 strict_slash 位，它可以正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T04:35:53.977

我不知道为什么带有 strict_slash 的路由需要有一个名称，但以下应该可以工作：

```
RedirectRoute(r'/',handler=IndexHandler,strict_slash=True,name='some_name') 
```

# python - 将字符串子集转换为列表中的整数

> ID：15180211
> 
> 赞同：9
> 
> 时间：2013-03-02T22:32:03.540
> 
> 标签：python

我经常发现自己的列表如下所示：

```
lst = ['A', '1', '2', 'B', '1', 'C', 'D', '4', '1', '4', '5', 'Z', 'D'] 
```

将此列表中的特定字符串转换为整数的最 Pythonic 方法是什么？

我通常会做这样的事情：

```
lst = [lst[0], int(lst[1]), int(lst[2]), lst[3], ...] 
```

上述方法似乎是错误的。有没有更好的方法将列表中的某些项目转换为整数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-02T22:35:59.497

我会说这样的话：

```
>>> lst = ['A', '1', '2', 'B', '1', 'C', 'D', '4', '1', '4', '5', 'Z', 'D']
>>> lst = [int(s) if s.isdigit() else s for s in lst]
>>> lst
['A', 1, 2, 'B', 1, 'C', 'D', 4, 1, 4, 5, 'Z', 'D'] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-02T22:46:42.803

`int`并且`.isdigit`在 Unicode 情况下可能不同意，即`int`即使`.isdigit`返回字符串也可能无法解析`True`字符串。

```
def maybe_int(s):
    try:
        return int(s)
    except ValueError:
        return s

lst = [maybe_int(s) for s in lst] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T22:50:05.093

@FatalError 答案可能是您正在寻找的，但如果您只想将一些项目（不是所有数字）转换为整数，您可以执行以下操作：

```
>>> lst = ['A', '1', '2', 'B', '1', 'C', 'D', '4', '1', '4', '5', 'Z', 'D']
>>> indices = [1,2]
>>> [int(lst[x]) if x in indices else lst[x] for x in xrange(len(lst))]
['A', 1, 2, 'B', '1', 'C', 'D', '4', '1', '4', '5', 'Z', 'D'] 
```

# javascript - 功能未识别 javascript/ajax 肥皂客户端

> ID：15180214
> 
> 赞同：1
> 
> 时间：2013-03-02T22:32:23.500
> 
> 标签：javascript, jquery, ajax, soap

因此，在尝试实现以下简单的 javascript SOAP 客户端时，我遇到了这个错误：

> 未捕获的 ReferenceError：未定义肥皂 soaptest.html:60
> 
> onclick soaptest.html:60

这是客户端：

```
<html>
<head>
    <title>SOAP JavaScript Client Test</title>
    <script type="text/javascript">
        function soap()
         {
            $(document).ready(function () {
                $("#send").click(function (event) {
                    var wsUrl = "http://redactedurl.redactedurl.com/c";

                    var soapRequest =
                    '<?xml version="1.0" encoding="utf-8"?> \
                    <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" \
                        xmlns:xsd="http://www.w3.org/2001/XMLSchema" \
                        xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"> \
                    <soap:Body> \
                    <getApiFunction xmlns="http://tempuri.org/">
                        <zipCode>10032</zipCode>
                        <series>avalon</series>\
                    </getApiFunction> \
                    </soap:Body> \
                    </soap:Envelope>';

            console.log(soapRequest);

            $.ajax({
                type: "post",
                url: wsUrl,
                contentType: "text/xml",
                dataType: "xml",
                data: soapRequest,
                success: processSuccess,
                error: processError
            });

            });
        });
    }

    function processSuccess(data, status, req, xml, xmlHttpRequest, responseXML) {
        $(req.responseXML)
        .find('XMLNode')
        .each(function(){
            var id = $(this).find('xmlchildnode').text();
            console.log(id);
        });
    }

    function processError(data, status, req) {
        alert(req.responseText + " " + status);
        console.log(data);
        console.log(status);
        console.log(req);
    }   
    </script>
</head>
<body>
    <form name="Demo" action="" method="post">
        <div>
            <input type="button" value="Soap" onclick="soap();" />
        </div>
    </form>
</body>
<html> 
```

这是我第一次尝试使用 AJAX，所以我敢肯定有很多错误......任何帮助将不胜感激。这是 SOAP 请求（如果有必要）

```
POST /apiname.asmx HTTP/1.1
Host: redactedurl.redactedurl.com
Content-Type: text/xml; charset=utf-8
Content-Length: length
SOAPAction: "http://tempuri.org/getApiFunction"

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <getApiFunction xmlns="http://tempuri.org/">
      <zipCode>string</zipCode>
      <series>string</series>
    </getApiFunction>
  </soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T22:47:00.697

您在这两行之前缺少强烈反对：

```
<getApiFunction xmlns="http://tempuri.org/">
<zipCode>10032</zipCode> 
```

这会导致您的 javascript 失败，这意味着您的`soap`函数永远不会被定义。

# c# - 在 C# 中导致系统崩溃

> ID：15180216
> 
> 赞同：1
> 
> 时间：2013-03-02T22:32:29.547
> 
> 标签：c#, windows, crash, bsod

我想编写一个导致系统崩溃的程序。我正在运行 Windows 7 Ultimate 32 位。我正在做一些会强制系统重置的事情。我找到了[C-ScrLk C-ScrLk](http://msdn.microsoft.com/en-us/library/windows/hardware/ff545499%28v=vs.85%29.aspx)方法，但我不知道如何在 C# 中做到这一点。我将如何实现 C# 中的关键组合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T22:55:42.887

用于`Process.Start`运行导致 BSOD 的 SysInternals NotMyFault 工具（它使用潜水员来执行此操作，这是唯一的方法）。

# c# - C# 中的“类”和“私有类”声明有什么区别？

> ID：15180218
> 
> 赞同：1
> 
> 时间：2013-03-02T22:32:47.137
> 
> 标签：c#

C# 中的“仅类”声明和“私有类”声明有什么区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-02T22:35:04.123

如果这些是*嵌套*类，则没有区别：

```
namespace Foo
{
    public class Outer
    {
        private class ExplicitlyPrivate {}

        class ImplicitlyPrivate {}
    }
} 
```

类型成员始终默认为私有。

如果它是*顶级*类，则*不能*将其设为私有 - 但默认为内部：

```
namespace Foo
{
    class ClassIsInternalByDefault {}
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-02T22:34:40.613

当您声明一个类而不指定可访问性修饰符时，它将默认为可能的最低可访问性。

更实际地，在不允许私有时指定私有可能会导致编译错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T23:00:21.117

一个简单的答案是，私有类旨在保护该类中的属性不被任何外部类更改，除了在程序构建期间。一个普通的“类”，嗯，没有那种保护。

它是一种**封装**形式。

# android - 为什么我不能从 FragmentPagerAdapter 分离片段？

> ID：15180226
> 
> 赞同：0
> 
> 时间：2013-03-02T22:33:10.740
> 
> 标签：android, fragment, detach, fragmentpageradapter

我想从我的 FragmentPagerAdapter 中分离一个片段，但它似乎不起作用。这是我从原始代码中复制的 pageradapter 类：

```
public class PagerAdapter1 extends FragmentPagerAdapter {

    private List<String> fragments;
       private static final String TAG = "FragmentPagerAdapter";
        private static final boolean DEBUG = true;
        private Fragment mCurrentPrimaryItem = null;
        private final FragmentManager mFragmentManager;
        private FragmentTransaction mCurTransaction = null;

    /**
     * @param fm
     * @param fragments2
     */
    public PagerAdapter1(FragmentManager fm, List<String> fragments2) {
        super(fm);
        mFragmentManager=fm;
        this.fragments = fragments2;
    }
    /* (non-Javadoc)
     * @see android.support.v4.app.FragmentPagerAdapter#getItem(int)
     */
    @Override
    public Fragment getItem(int position) {
        //return this.fragments.get(position);
        return Fragment.instantiate(ViewPagerActivity.context, fragments.get(position));

    }

    /* (non-Javadoc)
     * @see android.support.v4.view.PagerAdapter#getCount()
     */
    @Override
    public int getCount() {
        return this.fragments.size();
    }

      /**
     * Return the Fragment associated with a specified position.
     */

    @Override
    public void startUpdate(ViewGroup container) {
    }

    @Override
    public Object instantiateItem(ViewGroup container, int position) {
       Log.i("asasd", "asdasdasdasdasd");

        if (mCurTransaction == null) {
            mCurTransaction = mFragmentManager.beginTransaction();
        }

        final long itemId = getItemId(position);

        // Do we already have this fragment?
        String name = makeFragmentName(container.getId(), itemId);

        Fragment fragment = mFragmentManager.findFragmentByTag(name);
        if (fragment != null) {
            if (DEBUG) Log.v(TAG, "Attaching item #" + itemId + ": f=" + fragment);
                mCurTransaction.attach(fragment);

        } else {

            fragment = getItem(position);
            if (DEBUG) Log.v(TAG, "Adding item #" + itemId + ": f=" + fragment);
            mCurTransaction.add(container.getId(), fragment,
                    makeFragmentName(container.getId(), itemId));
          //  Log.i("asdJANIANI", " " + getFragmentTag(container.getId(),0));
            //Log.i("JANI", " " + getItem(0));
        }

        if (fragment != mCurrentPrimaryItem) {
            fragment.setMenuVisibility(false);
            fragment.setUserVisibleHint(false);
        }
        **destroyItem(container,0,getItem(0));**

        return fragment;
    }

    @Override
    public void destroyItem(ViewGroup container, int position, Object object) {
        if (mCurTransaction == null) {
            mCurTransaction = mFragmentManager.beginTransaction();
        }
        if (DEBUG) Log.v(TAG, "Detaching item #" + getItemId(position) + ": f=" + object
                + " v=" + ((Fragment)object).getView());
        mCurTransaction.detach((Fragment)object);
    }

    @Override
    public void setPrimaryItem(ViewGroup container, int position, Object object) {
        Fragment fragment = (Fragment)object;
        if (fragment != mCurrentPrimaryItem) {
            if (mCurrentPrimaryItem != null) {
                mCurrentPrimaryItem.setMenuVisibility(false);
                mCurrentPrimaryItem.setUserVisibleHint(false);
            }
            if (fragment != null) {
                fragment.setMenuVisibility(true);
                fragment.setUserVisibleHint(true);
            }
            mCurrentPrimaryItem = fragment;
        }

        if (position == 0){
            this.notifyDataSetChanged();
        }

    }

    @Override
    public void finishUpdate(ViewGroup container) {
        if (mCurTransaction != null) {
            mCurTransaction.commitAllowingStateLoss();
            mCurTransaction = null;
            mFragmentManager.executePendingTransactions();
        }
    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        return ((Fragment)object).getView() == view;
    }

    @Override
    public Parcelable saveState() {
        return null;
    }

    @Override
    public void restoreState(Parcelable state, ClassLoader loader) {
    }

    /**
     * Return a unique identifier for the item at the given position.
     *
     * <p>The default implementation returns the given position.
     * Subclasses should override this method if the positions of items can change.</p>
     *
     * @param position Position within this adapter
     * @return Unique identifier for the item at position
     */
    public long getItemId(int position) {
        return position;
    }

    private static String makeFragmentName(int viewId, long id) {
        return "android:switcher:" + viewId + ":" + id;
    }

} 
```

我只改变了一件事，我`destroyItem()`在 instantiateItem() 方法中实现了一个方法，因为我想在每次实例化片段时分离片段（位置 0）。我没有收到任何错误，它只是没有分离。为什么？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T15:44:30.937

这让我连续忙了两天。我终于在这里找到了答案：

[动态更新 ViewPager？](https://stackoverflow.com/questions/10849552/android-viewpager-cant-update-dynamically)

基本上，不要使用 FragmentPagerAdapter，而是使用 FragmentStatePagerAdapter 并覆盖 getItemPosition() 方法。事实证明，前者不允许对其数据源进行适当的更改，也不会反映它们。

这个该死的错误花费了我大量的时间:(但上面的链接帮助我在几分钟内修复了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T08:34:56.183

在 的来源中`FragmentPagerAdapter.java`，

```
82   @ Override 
83   public  Object instantiateItem( ViewGroup container, int position) { 
84       if (mCurTransaction == null ) { 
85           mCurTransaction = mFragmentManager. 开始交易（）；
86       } 
88       // 我们是否已经有了这个片段？
89       String name = makeFragmentName (container.getId ( ), position); 
90      片段片段 = mFragmentManager。findFragmentByTag（名称）；
91      如果(片段!= null ) { 
92           if (DEBUG) 日志。v (TAG, "附加项目#" + 位置 + ": f=" + 片段); 
93           mCurTransaction。附加（片段）；
94       } else { 
95          片段 = getItem (位置); 
96          如果（调试）日志。v (TAG, "添加项目#" + 位置 + ": f=" + 片段); 
97           mCurTransaction。add (container.getId (), fragment, 98 makeFragmentName (container.getId ( ), position ));

99       } 
100       if (fragment != mCurrentPrimaryItem) { 
101          片段。setMenuVisibility (假); 
102          片段。setUserVisibleHint (假); 
103       } 
105      返回片段；
106   } 
108   @ Override 
109   public  void destroyItem( ViewGroup container, int position, Object object) { 
110       if (mCurTransaction == null ) {
111           mCurTransaction = mFragmentManager。开始交易（）；
112       } 
113       if (DEBUG) 日志。v (TAG, "分离项目#" + position + ": f=" + object 
114               + " v=" + (( Fragment )object) .getView ()); 
115       mCurTransaction。分离（（片段）对象）；
116   }

```

您可以看到它使用附加/分离来显示/隐藏片段。这就是为什么他们不工作。

# javascript - 在 jQuery 中引用来自多个选择器的属性

> ID：15180227
> 
> 赞同：0
> 
> 时间：2013-03-02T22:33:18.300
> 
> 标签：javascript, jquery

我有一堆由类 screen-cat-comment 标识的 DIV，我希望每个 div 执行一个插件，该插件从每个 DIV 接收一个属性值作为参数。

```
<div class="screen-cat-comment" catId="1"></div>
<div class="screen-cat-comment" catId="2"></div>
<div class="screen-cat-comment" catId="3"></div> 
```

然后，选择器

```
$('.screen-cat-comment').fragment({ code: $(this).attr('catId') }); 
```

将 catId 传递给 myPlugin 不起作用 - 从当前代码中，$(this).attr('catId') 返回未定义。有没有办法重新编写这个选择器以将 attr('catId') 传递给插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T22:35:07.093

`this`在这种情况下，可能是`window`...

```
$('.screen-cat-comment').each(function(){
    $(this).fragment({ code: $(this).attr('catId') });
}); 
```

# wordpress - 显示带有 the_content 的阅读更多链接

> ID：15180230
> 
> 赞同：0
> 
> 时间：2013-03-02T22:33:34.110
> 
> 标签：wordpress

我试图在我的博客摘录底部获取“阅读更多”链接，并将选项设置为主题中的内容。我无法弄清楚将什么代码放在哪里。我不知道如何应用 codex 推荐

```
<?php 
    $excerpt = get_the_excerpt();
            if ( $blog_content == 'Content' ) { 
            the_content( '', FALSE, '' );
     }  
           else if ( $blog_content == 'Excerpt' && $excerpt != '' ){
            the_excerpt('',FALSE,'');
 } ?> 
```

感谢您提前提供任何反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T23:00:51.800

如果您使用 get_the_excerpt 该标签必须在循环中使用。所以 page.php 或 single.php 就是一个例子。

# php - 优化 MySQL 和 PHP 中的多个查询

> ID：15180239
> 
> 赞同：1
> 
> 时间：2013-03-02T22:34:52.297
> 
> 标签：php, mysql, database, scalability

## 问题

1.  我应该如何进行查询以获得此结果？

2.  我应该为数据库表使用不同的结构吗？

## 细节

我想从 3 个表中获取结果：

```
+------------------------------+-------------------+
| courses                      | id                | <-------+
|                              | name              |         |
|                              |                   |         |
+------------------------------+-------------------+         |
| sections                     | id                | <-------|----------+
|                              | course_id         | <- FK(courses.id)  |
|                              | name              |                    |
+------------------------------+-------------------|                    |
| resources                    | id                |                    |
|                              | section_id        | <- FK(sections.id)-+
|                              | name              |
+------------------------------+-------------------+ 
```

我想将结果存储在这样的 PHP 数组中：

```
Array
(
    [courses] => Array
        (
            [id] => 1
            [name] => course 1
            [sections] => Array
                (
                    [0] => Array
                        (
                            [id] => 1
                            [course_id] => 1
                            [name] => course 1 section 1
                            [resources] => Array
                                (
                                    [0] => Array
                                        (
                                            [id] => 1
                                            [section_id] => 1
                                            [name] => resource 1
                                        )

                                )

                        )

                )

        )

) 
```

* * *

**编辑**

## 我做了什么：

```
$cources = DB::query(Database::SELECT,
'select * from courses')->execute($db,false)[0];  // Get all courses as array

foreach($courses as &$course) {
    $sections = DB::query(Database::SELECT,
    'select * from sections where course_id = '.$courses['id']);

    $course['sections'] = $sections;

    foreach($course['sections'] as &&section) {
        $resources = DB::query(...); // Get array of resources
        $section['resources'] = $resources;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T22:44:25.697

数据库结构已标准化 - 这是*正确**的*，不应更改。

但是，对于 N+ 连接，SQL 会返回去规范化或“扁平化”的数据：在单个结果集中只能返回一组同质记录。（某些数据库，如 SQL Server，允许通过支持 XML 生成来返回结构。）

要在 PHP 中获得所需的数组结构，需要：

1.  单独的查询/结果集（如帖子所示）：*ick！*

    大约会有一个查询/对象。虽然理论上的界限*可能*相似，但实际实现*的效率会低得多*，而且开销也会比单个查询多得多。请记住，*每个*查询都会（至少）产生往返惩罚 - 因此，这是**不可扩展**的，尽管它可能适用于较小的数据集或“时间不敏感”操作。

2.  重新规范化得到的结构：

    对于 C#/LINQ 中的“Group By”操作的支持，这非常简单。我不确定如何在 PHP ¹中[轻松] 解决这个问题。这也不是完美的，但假设散列用于分组，这应该能够很好地扩展 - 它肯定会比＃1更好。

*如果可能，请考虑以可以在当前问题/范围内使用“平面”结果的方式编写查询，*而不是上述方法。也就是说，分析如何使用数组*-*然后围绕该问题编写查询。这通常是一种更好的方法，可以*很好*地扩展。

* * *

¹与重新规范化数据相关，YMMV：

*   [SQL结果到PHP多维数组](https://stackoverflow.com/questions/2123264/sql-result-to-php-multidimensional-array)
*   [PHP数组到多维数组](https://stackoverflow.com/questions/3813881/php-array-to-multidimensional-array?rq=1)
*   [按特定值对多维数组进行分组？](https://stackoverflow.com/questions/2189626/php-how-to-group-a-multidimensional-array-by-a-particular-value)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T22:44:44.293

您无法从 mysql 获得多维结果。获取元素的查询应该是这样的：

```
select courses.id as coursesId,courses.name as coursesName,sections.id as sectionsId,sections.name as sectionsName,resources.id as resourcesId, resources.name as resourcesName
from courses
left join sections on courses.id=sections.course_id
left join resources on sections.id=resources.section_id; 
```

但是它当然不会为您提供您喜欢的数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T22:45:33.870

你可以试试这样的

```
SELECT * FROM (
select c.id, c.name from courses c
union
select s.id, r.name,s.course_ID from sections s
union
select r.id, r.name,r.section_ID from resources r
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T23:57:12.000

```
 if you are familiar with php then you can use this code i am writing only 2nd level you can write same way with third label
    $final=array();
           $c=-1;
           $cid=false;
           $cname=false;
           $query = "SELECT c.*,s.*,r.* FROM  courses AS c LEFT JOIN sections AS s ON c.id=s.course_id LEFT JOIN resources AS r ON r.section_id =s.id";
           $result=mysql_query($query, $this->con) or die(mysql_error());
           while($row=  mysql_fetch_array($result)){
               if($cid!=$row[2]){
                   $final['cources'][++$c]['id']=$cid=$row[0];
                   $final['cources'][$c]['name']=$cname=$row[1];
                   $s=-1;

               }
               $final['cources'][$c]['sections'][++$s]['id']=$row[2];
               $final['cources'][$c]['sections'][$s]['course_id']=$row[3];
              $final['cources'][$c]['sections'][$s]['name']=$row[4];
           }
           echo "<pre>";
           print_r($final);
           echo "</pre>";

//Outpur
Array
(
    [cources] => Array
        (
            [0] => Array
                (
                    [id] => 1
                    [name] => c1
                    [sections] => Array
                        (
                            [0] => Array
                                (
                                    [id] => 1
                                    [course_id] => 1
                                    [name] => s1-1
                                )

                            [1] => Array
                                (
                                    [id] => 1
                                    [course_id] => 1
                                    [name] => s1-1
                                )

                        )

                )

            [1] => Array
                (
                    [id] => 2
                    [name] => c2
                    [sections] => Array
                        (
                            [0] => Array
                                (
                                    [id] => 2
                                    [course_id] => 2
                                    [name] => s1-2
                                )

                        )

                )

        )

) 
```

# c - 段错误可能是因为指针问题

> ID：15180240
> 
> 赞同：0
> 
> 时间：2013-03-02T22:34:58.673
> 
> 标签：c, pointers

我对C有点陌生，我正在尝试编写一个简单的蛇翻版。可以在github上查看源码：[https ://github.com/blackwolf12333/Snake](https://github.com/blackwolf12333/Snake)

构建时，输出中没有警告或错误。但是，当我运行可执行文件并按 Enter 键时，它会以“Segmentation fault（core dumped）”退出。我还不是指针的专业人士，我来自java，在谷歌搜索时我发现它可能是指针的问题。

我不知道哪里出了问题，因为据我所知，我做的事情是正确的。问题是当我尝试遍历我的蛇的 body_part 时。

```
 void print_snake() {
        int i;
        body_part *next = main_snake.head.next;

        move(main_snake.head.pos.x, main_snake.head.pos.y);
        addch('$');
        for(i = 0; i < main_snake.length; i++) { //TODO: segfaults when 'main_snake.length'(should be this) instead of 'main_snake.length - 1'
            printf("1 part");
            print_body_part(next);
            next = next->next;
        }
    } 
```

那来自存储库中的snake.c 文件。

我希望你们能帮助我，问候 blackwolf12333

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T22:49:24.063

在深入研究代码之前，很明显 when`next`变为 null 并`next->next`导致分段错误。

`main_snake.head.`**`next`**在循环中，您从 head( )旁边的一个节点开始。因此，在 4 个对象的列表中，您只处理 3 个对象。在这种情况下，迭代次数应该是 3 而不是 4，因为`main_snake.length`计算头部也如函数所示`initialize_snake`。这就是您遇到分段错误的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T23:34:39.203

如果要遍历链表，请不要使用单独的停止条件。你的`i`变量并`main_snake.length`没有必要。你可以更换

```
for(i = 0; i < main_snake.length; i++) 
```

和

```
body_part *next;
for(next = main_snake.head.next; next->next != NULL; next=next->next){
    ...
} 
```

# javascript - 访问函数内部的全局变量，该变量是另一个函数的参数

> ID：15180246
> 
> 赞同：0
> 
> 时间：2013-03-02T22:35:35.427
> 
> 标签：javascript, ajax, jquery

我正在尝试访问调用`success`函数内部的全局变量`$.ajax()`。基本上我有这样的事情：

```
function someFunc(email) {
var ret;
$.ajax({
    url: '/checkuseremail.php?email='+email,
    cache: false,
    success: function(data) {
        if ( data != '1' ) {
            alert(email+'\n'+data);
            ret = false;
        } else {
            alert(email+'\n'+data);
            ret = true;
        }
    }
});

alert(ret); // outputs "undefined"
return ret;
} 
```

我知道`alert()`在给出 ajax 响应之前调用了底部的，但我不确定还能做什么。我只是将 return 语句放在`success`函数内部，但这只会返回该函数，而不是父函数。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T22:42:19.530

看看 $.Deferred() 或者将回调函数作为第二个参数传递给 someFunc。然后在成功时调用该回调函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T23:35:02.623

鉴于您的最后一条评论“...函数在提交表单时作为表单验证的一部分被调用”，我认为您的要求转化为对请求的同步处理。在这些情况下，您可以在 ajax 调用上强制执行同步行为。尝试添加：

```
async: false, 
```

到您的 Ajax 选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T00:17:42.080

不要把成功想象成一个返回值的函数。这是一个设置，`$.ajax()`它决定了对成功（事件）采取什么行动，就像一个控制器。

有几个问题。

1.  你在你原来的帖子里说过。在控制权回到客户手中之前，您正在调用警报。

2.  错误消息告诉你这一点。 `Undefined`当你从一个函数返回一个值时，你必须将它分配给某个东西。 `ret`对我们的函数来说是全局的，但它从来没有赋值过。

3.  您还需要解析`data`为您的值返回的对象。我假设这`data != '1'`只是一些示例代码？您最有可能得到一个 JSON 对象，可能是 XML，但无论哪种方式都没有正确解析。

4.  您应该使用[$.get()](http://api.jquery.com/jQuery.get/)而不是[$.ajax()](http://api.jquery.com/jQuery.get/)。 `$.get`调用`$.ajax`并且是首选方法。

    ```
    function someFunc(email) {
    // assign the value returned to ret
    var ret = $.get({ // 2 assign value, 4 use $.get
        url: '/checkuseremail.php?email='+email,
        cache: false,
        success: function(data) {
            if ( data ) {
                anotherFunc(data); // 3 parse data in function
                return false;//1 alert removed
            } else {
                return true;
            }
        }
    });

    alert(ret);
    return ret;
    }; 
    ```

    `

# javascript - Javascript：多个参数的联合

> ID：15180248
> 
> 赞同：-1
> 
> 时间：2013-03-02T22:35:52.400
> 
> 标签：javascript, for-loop

我想编写一个函数，该函数将返回传递的数组参数的联合。

我不想使用递减的 while 语句，也不想使用下划线 _.union 函数。

联合（[1,4,78,98]，[45,56,3]，[2,3,45]）；

返回 --> [1,4,78,98,45,56,2]

这是我到目前为止所拥有的，它是不正确的：

```
 union: function(){
      var i, j, k;
      var newArray = [];

      for(i = 0; i < arguments.length; i++){
        j = arguments[i];
        l = k[arguments[i]];
          for (){
              j = k[i];
              newArray.push(j);
          }
      }
          return newArray;
      } 
```

我希望我能找到一个包含多个 for 循环的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T22:41:53.360

这个想法是展平然后删除重复项。在功能样式中，您可以执行以下操作：

```
function union() {
  var arrs = [].concat.apply([], arguments);
  return arrs.filter(function(v, i) {
    return arrs.indexOf(v) == i;
  });
} 
```

这应该给你与下划线相同的结果`union`。

**演示：http:** [//jsbin.com/azulok/1/edit](http://jsbin.com/azulok/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T22:55:32.820

您可以使用`.reduce()`.

```
union([1,4,78,98],[45,56,3],[2,3,45]);

function union() {
    return [].reduce.call(arguments, function(res, arr) {
        return res.concat(arr.filter(function(item) { 
                                         return res.indexOf(item) === -1;
                                     }))
    })
} 
```

* * *

如果您愿意，可以将其拆分一下：

```
function union() {
    return [].reduce.call(arguments, function(res, arr) {
        return res.concat(arr.filter(notIn(res)))
    })
}

function notIn(arr) {
    return function(item) {
       return arr.indexOf(item) === -1;
    }
} 
```

* * *

当然你也可以重用`.reduce()`回调，所以如果你真的有一个数组数组，你可以这样做：

```
var res = arrays.reduce(joinUnique);

function joinUnique(res, arr) {
    return res.concat(arr.filter(notIn(res)))
}

function notIn(arr) {
    return function(item) {
       return arr.indexOf(item) === -1;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-30T16:06:40.630

最简单的方法是使用[Set](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set)。

```
const data = new Set([...[1,4,78,98], ...[45,56,3], ...[2,3,45]]);

data.forEach(i => console.log(i));
```

# c# - 当我输入字母而不是变量时，我的简单计算器程序在 C# 中出现问题

> ID：15180253
> 
> 赞同：3
> 
> 时间：2013-03-02T22:36:17.570
> 
> 标签：c#, calculator, letters-and-numbers

例如，当我的程序要求输入一个数字并且我输入一个字母时，程序退出。那么当输入一个字母时，我怎样才能让它什么都不做呢？我用'int'或'strings'看到了这个，但没有用'doubles'看到它真的让我很难过，我不太明白这些是如何修复的

```
 static void Main(string[] args)
    {
        Console.WriteLine("type 'Exit' to leave this program.");
        Console.ReadLine();
        Console.Clear(); 
    Valuechoice: Console.WriteLine("Please choose a number.");
        double value1 = Convert.ToDouble(Console.ReadLine());     
        Console.WriteLine("Please choose a second Number.");
        double value2 = Convert.ToDouble(Console.ReadLine());
        Console.WriteLine("What would you like to do to these numbeers?");
        Console.WriteLine("Multiply");
        Console.WriteLine("Divide");
        Console.WriteLine("Add");
        Console.WriteLine("subtract");
        string operation = Console.ReadLine();
        Console.WriteLine();
        Console.Clear();
        if (operation == "Multiply")
        {
            double total1;
            total1 = (value1 * value2);
            Console.WriteLine(total1);
            Console.ReadLine();
            Console.Clear();
            goto Valuechoice;
        }
        if (operation == "Divide")
        {
            double total2;
            total2 = (value1 / value2);
            Console.WriteLine(total2);
            Console.ReadLine();
            Console.Clear();
            goto Valuechoice;
        }
        if (operation == "Add")
        {
            double total3;
            total3 = (value1 + value2);
            Console.WriteLine(total3);
            Console.ReadLine();
            Console.Clear();
            goto Valuechoice;

        }
        if (operation == "Subtract")
        {
            double total4;
            total4 = (value1 - value2);
            Console.WriteLine(total4);
            Console.ReadLine();
            Console.Clear();
            goto Valuechoice;

        }
        if (Console.ReadLine() == "Exit")
        {
            Environment.Exit(0);
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T22:38:32.670

[`Convert.ToDouble`](http://msdn.microsoft.com/en-us/library/zh1hkw6k.aspx)`FormatException`如果输入不是有效的双精度，将抛出 a 。改为使用[`double.TryParse`](http://msdn.microsoft.com/en-us/library/994c0zb1.aspx)。

例如，您可以执行以下操作来不断向用户询问有效号码：

```
double value1;

while(!double.TryParse(Console.ReadLine(), out value1)) 
{
    Console.WriteLine("Please choose a valid number");
} 
```

也没有理由在`goto`这里使用。我建议重组你的程序以使用循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T22:39:52.537

使用`TryParse`- 像这样的东西：

```
double value1;
while (!double.TryParse(Console.ReadLine(), out value1) {
  Console.WriteLine("Please enter a valid number");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T23:16:40.960

您不能将字母转换为双精度数，即数字。这就像说把“e”变成十进制的 34.72。不可能。

尝试这样的事情：

```
bool valid = true; // locally declared variable, this is important!

string value = Console.ReadLine();
valid = validateInput(value);

if (valid == true) {
double value1 = Convert.ToDouble(value);
// Proceed with calculations, etc
}

private bool validateInput(string value) {
bool valid = true;
foreach (char c in value)
    {
        if (char.IsLetter(c))
            valid = false;
        Console.WriteLine("Input is invalid!");
    }
return valid;
} 
```

# java - 获取文件的 JAR 路径

> ID：15180255
> 
> 赞同：0
> 
> 时间：2013-03-02T22:36:39.210
> 
> 标签：java, jar

所以可以说我有 JAR 文件。用户创建了一些文本文件并想要保存它。我想将它保存在我的 JAR 中的“资源”文件夹中，以便用户稍后阅读。

但是如何获取此文件夹的路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T22:39:52.480

你通常*不*会这样做。更新 zip 文件（基本上就是 jar 文件）并非易事。Jar 文件并非设计为使用用户内容进行更新（例如，他们的“文档”目录或特定于应用程序的目录）。您应该将用户的文件存储在适当的目录中。（哎呀，在许多操作系统中，程序文件都是以只读方式安装的......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T22:42:55.177

不确定这是否是一个好主意，但可以从命令行（[jar 命令帮助](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/jar.html)）：

```
jar cf myfile.jar dir1/file1.ext1 ;# create jar file and store file1
jar uf myfile.jar dir2/file2.ext2 ;# update jar file with file2 
```

[通过Jar Java API](http://docs.oracle.com/javase/6/docs/api/java/util/jar/package-summary.html)应该可以从命令行实现什么

# android - AudioManager MODE_IN_CALL 干扰

> ID：15180257
> 
> 赞同：5
> 
> 时间：2013-03-02T22:36:53.677
> 
> 标签：android, media-player, android-audiomanager

我正在使用 AudioManager 在拨打电话之前通过听筒播放声音，所以我使用 AudioManager setMode(MODE_IN_CALL)。

除了在 Galaxy S3 中，我没有任何问题，在正确播放音乐后，铃声听起来非常失真且非常嘈杂。我已阅读 setMode 文档：

```
The audio mode encompasses audio routing AND the behavior of the telephony 
layer. Therefore this method should only be used by applications that replace
the platform-wide management of audio settings or the main telephony application.
In particular, the MODE_IN_CALL mode should only be used by the telephony
application when it places a phone call, as it will cause signals from the 
radio layer to feed the platform mixer. 
```

所以我怀疑可能有来自无线电层馈送平台混频器的信号。

所以我使用的代码是这样的：

```
am = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);
speakerWasOn = am.isSpeakerphoneOn();
speakerPrevMode = am.getMode();
bthA2dpWasOn = am.isBluetoothA2dpOn();
bthScoWasOn = am.isBluetoothScoOn();

if (BluetoothBR.bthOn && BluetoothBR.conectarBluetooth()) {
  am.setMode(AudioManager.STREAM_VOICE_CALL);
  am.setBluetoothA2dpOn(true);
  am.setBluetoothScoOn(true);

} else {
  am.setSpeakerphoneOn(false);
  am.setMode(AudioManager.MODE_IN_CALL);
} 
```

然后我使用 MediaPlayer 在单独的线程中播放 .mp3 文件：

```
private OnPreparedListener opl = new OnPreparedListener() {
  public void onPrepared(MediaPlayer mp) {
    try {
      mp.setVolume(1.0f, 1.0f);
      mp.start();

    } catch (Throwable e) {
      e.printStackTrace();
      mp.release();
    }
  }
};

private OnCompletionListener ocl = new OnCompletionListener() {
  public void onCompletion(MediaPlayer mp) {
    stop();
  }
};

public void run() {
  synchronized (mp) {
    FileInputStream fis = null;
    try {
      fis = new FileInputStream(getMp3FilePath());

      mp.setDataSource(fis.getFD());
      mp.setOnPreparedListener(opl);
      mp.setOnCompletionListener(ocl);
      mp.prepare();
      fis.close();

    } catch (Exception e) {
      mp.release();
      if (fis != null) {
        try {
          fis.close();
        } catch (IOException e1) {
          e1.printStackTrace();
        }
      }
    }
  }
}

public void stop() {
  if (mp != null) {
    try {
      mp.stop();
      mp.release();
      mp.setVolume(0.5f, 0.5f);
      mp.reset();

    } catch (Exception ignored) {
    }
  }

  if (BluetoothBR.bthOn) {
    BluetoothBR.desconectarBluetooth();
  }
} 
```

当音乐结束时，我会打电话：

```
am.setSpeakerphoneOn(speakerWasOn);
am.setMode(speakerPrevMode);
am.setBluetoothA2dpOn(bthA2dpWasOn);
am.setBluetoothScoOn(bthScoWasOn); 
```

这仅在三星 Galaxy S3 (afaik) 上发生，并且已经在 S2、华为、索尼爱立信等公司中进行了测试并且工作正常。

有任何想法吗？谢谢

**更新：**

我发现如果线程在音乐结束时等待 5 秒并且在将 AudioManager 设置为原始状态之后一切正常。

```
am.setSpeakerphoneOn(speakerWasOn);
am.setMode(speakerPrevMode);
am.setBluetoothA2dpOn(bthA2dpWasOn);
am.setBluetoothScoOn(bthScoWasOn);

long ctime = System.currentTimeMillis();
while (System.currentTimeMillis() - ctime < 5000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T11:36:16.057

我有同样的问题。当我注释掉这一行时

```
am.setMode(AudioManager.MODE_IN_CALL); 
```

一切对我来说都很好。

# java - 在 Java Web 项目中构建文件路径

> ID：15180258
> 
> 赞同：0
> 
> 时间：2013-03-02T22:37:11.503
> 
> 标签：java, css, jsp

我正在使用以下代码将 css 文件动态添加到我的 Web 项目中。但是，当我写出 css 文件的绝对路径时，它会返回我的 Web 项目之外的内容。例如，为了测试，我将 css/style.css 添加到 cssAssets ArrayList。当我检查 的条件时`f.isFile()`，它会写出`home/*username*/css/styles.css`而不是从 index.jsp 文件到 css 目录的相对路径。它应该会`workspace/projectName/WebContent/css/styles.css`。任何帮助表示赞赏。

```
public String buildHead()
{
    htmlHead = new StringBuilder();
    htmlHead.append("<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">");
    htmlHead.append("<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">");
    htmlHead.append("<meta http-equiv=\"cache-control\" content=\"max-age=0\" />");
    htmlHead.append("<meta http-equiv=\"cache-control\" content=\"no-cache\" />");
    htmlHead.append("<meta http-equiv=\"expires\" content=\"Tue, 01 Jan 1980 1:00:00 GMT\" />");
    htmlHead.append("<meta http-equiv=\"pragma\" content=\"no-cache\" />");
    if (this.title.length() > 0)
        htmlHead.append("<title>" + this.title + "</title>");
    else
        htmlHead.append("<title>MMJ Ceo </title>");

    for (String css : this.cssAssets)
    {
        File f = new File(css);

        if (f.isFile())
        {
            htmlHead.append("<link rel='stylesheet' href=\"" + css + "\"/>");
        }
        else
            return f.getAbsolutePath();
    }
    for(String js : this.jsAssets)
    {
        File f = new File(js);
        if(f.isFile())
            htmlHead.append("<script type='text/javascript' src='" + js + "'></script>");
    }
    htmlHead.append("</head>");
    return htmlHead.toString();
} 
```

**更新**

此代码片段来自我位于 projectName.src.com.projectName.view 中的 Page 类，css 文件位于 projectName/WebContent/css/style.css 中，它是从 projectName/WebContent/index.jsp 调用的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T22:50:28.913

问：您使用的是什么 IDE？这听起来像 Eclipse，在这种情况下，“是的：您应该将您的 css/ 目录放在“WebContent/”下（就像您的“index.jsp”也在“WebContent/”下一样）。

... 但 ....

正在运行的 servlet 的根路径与Web 服务器上的实际物理路径*不同*。看这里：

*   [jsp中getRealPath()从服务器获取的路径是什么](https://stackoverflow.com/questions/9091491/what-does-the-path-get-from-the-server-by-getrealpath-in-jsp)

*   [servletcontext.getRealPath("/") 是什么意思，我应该什么时候使用它](https://stackoverflow.com/questions/12160639/what-does-mean-in-the-function-servletcontext-getrealpath)

# mono - 如何安装最近的mono和monodevelop？

> ID：15180259
> 
> 赞同：24
> 
> 时间：2013-03-02T22:37:15.707
> 
> 标签：mono, monodevelop

我尝试在 centOS 6.3 上安装 mono 和 monodevelop。几个小时后，我能够安装单声道，但单声道开发失败了。

我真的很惊讶在 linux 上安装最新的 mono/monodevelop 版本是多么困难和耗时。是否没有人愿意编写和维护安装/编译教程以在主要 linux 发行版（Centos、Ubuntu、Suse、Debian）上安装最新的 mono/monodevelop/monodata/ASP.NET MVC/... 版本？

我认为许多在 Windows 上开发的人（Linux 知识有限）都想开始使用单声道，如果登机门槛会更低的话。

让 Mono 更常用、更显眼可能是最重要的。请为编译 mono/monodevelop 编写一个经过测试的教程（脚本）。

谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-07-30T13:55:00.200

我在 Open Build Service 上创建了一个项目，它为 Debian、Ubuntu、CentOS 和 Fedora 生成了最新的 MonoDevelop 4.0.10 的构建。

见[https://build.opensuse.org/project/show/home:tpokorra:mono](https://build.opensuse.org/project/show/home:tpokorra:mono)

有关 apt-get 或 yum 的安装说明，请参阅： [http ://software.opensuse.org/download/package?project=home:tpokorra:mono&package=monodevelop-opt](http://software.opensuse.org/download/package?project=home:tpokorra:mono&package=monodevelop-opt)

我希望这将增加 MonoDevelop 在 Linux 桌面环境中的使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T21:13:38.777

Monodevelop 4\. 如果您使用任何 *buntu。检查这个。

“您可以打开终端并通过以下方式安装它：

```
1\.    sudo add-apt-repository ppa:keks9n/monodevelop-latest 
2\.    sudo apt-get update 
3\.    sudo apt-get install monodevelop-latest" 
```

[http://mono-d.alexanderbothe.com/?p=101](http://mono-d.alexanderbothe.com/?p=101)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-13T18:24:57.120

Xamarin 应该在以一键式方式发布 linux 包方面做得更好。我不在乎什么 linux 发行版（SuSE、RHEL、CentOS、Ubuntu 等）——只需选择任何一个作为受支持的发行版并为其发布。它似乎曾经是 SuSE，但即使是在 Zypper/YaST 中看到的旧包。

**更新 Mono 框架**

话虽如此，要更新 Mono 框架本身，不放过包管理器试试这个。只要项目尽职尽责地发布 RPM，这将起作用。您不想从源代码构建，因为它是一个变化无常的过程，并且设置会分散您的真正目标（即开发）。

显然，请将下面的 URL 替换为您阅读本文时的最新内容。

```
mkdir mono-rpms
cd mono-rpms
wget --reject "index.html*" -nd -r -e robots=off --no-parent http://download.mono-project.com/archive/3.2.3/linux/x64/
sudo zypper install *rpm 
```

**更新 MonoDevelop**（IDE）

Timotheus Pokorra 的回答表明他正在填补 Xamarin 留下的一些可用性空白（感谢 Timotheus ！！）。您可以通过以下方式安装 MonoDevelop

[http://software.opensuse.org/download/package?project=home:tpokorra:mono&package=monodevelop-opt](http://software.opensuse.org/download/package?project=home:tpokorra:mono&package=monodevelop-opt)

请注意，在 SuSE 上我收到错误

```
Problem: nothing provides liberation-mono-fonts needed by mono-libgdiplus-opt-3.0.12-7.1.x86_64
Solution 1: do not install monodevelop-opt-4.0.12-5.2.x86_64 
Solution 2: break mono-libgdiplus-opt-3.0.12-7.1.x86_64 by ignoring some of its dependencies 
```

我（非常不情愿地）选择打破依赖。请注意，我已经拥有`liberation-fonts`（通过`sudo zypper install liberation-fonts`）。我不知道它是否与`liberation-mono-fonts`. 无论如何，希望蒂莫修斯有空时能解决它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T14:40:54.783

我不确定你是否已经看过这个，但这可能会有所帮助：

[http://www.mono-project.com/Parallel_Mono_Environments](http://www.mono-project.com/Parallel_Mono_Environments)

新开发人员从像 Windows 这样的系统进入 Linux 时最常见的问题是没有正确设置他们的环境变量，因此当他们执行标准`./configure && make && make install`例程时，当它涉及许多源包（如 Mono 所做的）时，任何包取决于核心包不会为该基本包选择正确的位置。

您的问题确实没有解释您发现哪些部分令人困惑或困难，因此很难解决这些问题。

对于不熟悉设置 Linux 系统的人来说，如果你只使用像 Ubuntu 这样的系统可能会更容易，它有相当新的预构建包（虽然不是最新的 - 我认为*任何*Linux 系统都跟不上 Mono 版本）而不是与如何自己构建一切的学习曲线搏斗。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-29T21:24:35.300

**已确认在不久的将来 Xamarin 将支持 Linux**并为 Debian 和 Centos 衍生产品提供二进制文件（单和主线应用程序），它们已经是 Debian 和 Centos 衍生产品的技术预览包。所以干杯，没有更多的编译甚至并行单声道安装的痛苦。没有比这更容易的了。[在这里](http://www.mono-project.com/docs/getting-started/install/linux/)检查

# google-chrome - 不是 SQL ReportViewer 的 Web 报告库

> ID：15180261
> 
> 赞同：0
> 
> 时间：2013-03-02T22:37:25.330
> 
> 标签：google-chrome, reporting-services, webforms, shared-libraries, reportviewer

我从 2005 年开始处理 ReportViewer 和 RDLC。
从那以后，我总是在新的麻烦和问题中失败，大部分时间都可以正常工作，但有时也让我非常头疼。

对我来说，reportviewer 的共同限制是只能在 IE 中工作。
所以我开始想知道是否有时间寻找可以替代 ReportViewer 的其他库。
大多数时候我都在开发业务应用程序，即所谓的 ERP。

我正在寻找可以包含在用 C# asp.net web 表单编写的项目中的库，也可以使用本地资源作为打印机、纸张属性等，报告应该能够在不同的层单独开发。

我知道有[用于 Delphi 的 Report Bulder](http://www.digital-metaphors.com/)，我来宾说还有其他用于 asp.net C# 的报告库。Crystal Reports 可以在 WebForms 上运行吗？是否有任何其他可以作为扩展安装在 Chrome 或 Firefox 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:49:35.437

您可以试试我们的[SharpShooter 报告](http://www.perpetuumsoft.com/SharpShooter-Reports-Web.aspx)。它针对 ASP.NET MVC 进行了优化，但是您可以轻松地将其添加到任何 HTML 页面，因为它只需要几行 JS 代码。

# javascript - 我如何为 CRM 2011 UR 12 重新制作 FetchUtil.js

> ID：15180263
> 
> 赞同：2
> 
> 时间：2013-03-02T22:37:50.920
> 
> 标签：javascript, dynamics-crm-2011, crm, fetchxml

我必须重新制作 FetchUtil.js 才能在 CRM 2011 UR 12 中使用它。我的 JavaScript 不是很好，所以我需要一些帮助。

这是本机代码

```
 var sFetchResult = xmlhttp.responseXML.selectSingleNode("//a:Entities").xml;
 var resultDoc = new ActiveXObject("Microsoft.XMLDOM");
 resultDoc.async = false;
 resultDoc.loadXML(sFetchResult); 
```

它现在即使在 IE 中也不起作用，因为 .selectSingleNode("//a:Entities").xml 我这样做了，但是那里没有 xml 字段。

```
sFetchResult = xmlhttp.responseXML.getElementsByTagName('a:Entities')[0].xml;
    var resultDoc = new ActiveXObject("Microsoft.XMLDOM");
    resultDoc.async = false;
    resultDoc.loadXML(sFetchResult); 
```

帮我为 IE 和 Chrome 重新制作这个。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:44:44.483

这是我的调用模块（包括为网络资源）

```
(function (module, undefined) {

    module.buildFetchRequest = function (fetch) {
        /// <summary>
        /// builds a properly formatted FetchXML request
        /// based on Paul Way's blog post "Execute Fetch from JavaScript in CRM 2011"
        /// http://blog.customereffective.com/blog/2011/05/execute-fetch-from-javascript-in-crm-2011.html
        /// </summary>
        var request = "<s:Envelope xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\">";
        request += "<s:Body>";

        request += '<Execute xmlns="http://schemas.microsoft.com/xrm/2011/Contracts/Services">' +
            '<request i:type="b:RetrieveMultipleRequest" ' +
            ' xmlns:b="http://schemas.microsoft.com/xrm/2011/Contracts" ' +
            ' xmlns:i="http://www.w3.org/2001/XMLSchema-instance">' +
            '<b:Parameters xmlns:c="http://schemas.datacontract.org/2004/07/System.Collections.Generic">' +
            '<b:KeyValuePairOfstringanyType>' +
            '<c:key>Query</c:key>' +
            '<c:value i:type="b:FetchExpression">' +
            '<b:Query>';

        request += CrmEncodeDecode.CrmXmlEncode(fetch);

        request += '</b:Query>' +
            '</c:value>' +
            '</b:KeyValuePairOfstringanyType>' +
            '</b:Parameters>' +
            '<b:RequestId i:nil="true"/>' +
            '<b:RequestName>RetrieveMultiple</b:RequestName>' +
            '</request>' +
            '</Execute>';

        request += '</s:Body></s:Envelope>';
        return request;
    };

    module.sendFetchQuery = function (fetchRequest, doneCallback, failCallback) {
        //path to CRM root
        var server = window.location.protocol + "//" + window.location.host;

        //full path to CRM organization service - you may need to modify this depending on your particular situation
        var path = server + "/XRMServices/2011/Organization.svc/web";

        $.ajax({
            type: "POST",
            dataType: 'xml',
            async: false,
            contentType: "text/xml; charset=utf-8",
            processData: false,
            url: path,
            data: fetchRequest,
            beforeSend: function (xhr) {
                xhr.setRequestHeader(
                    "SOAPAction",
                    "http://schemas.microsoft.com/xrm/2011/Contracts/Services/IOrganizationService/Execute"
                ); //without the SOAPAction header, CRM will return a 500 error
            }
        }).done(doneCallback)
          .fail(failCallback);

    };

}(window.xFetch = window.xFetch || {})); 
```

用法（解析器需要 jQuery ...我在 web 资源 html 页面中进行大部分 fetch 调用，所以这不是问题）这在 IE 中有效，Chrome 没有检查 firefox，但我不明白为什么它会不行。

```
 var fetchXml =
                xFetch.buildFetchRequest("<fetch version='1.0' output-format='xml-platform' mapping='logical' distinct='false'>" +
                    "   <entity name='ENTITYNAME'>" +
                    "    <attribute name='ATTRIBUTE' />" +
                    "  </entity>" +
                    "</fetch>");

            var entityList = new Array();

            xFetch.sendFetchQuery(fetchXml,
                function (fetchResponse) {

                    // chrome doesn't like the namespaces because of 
                    // selectSingleNode implementations (which make sense btw)
                    // I'll never understand why Microsoft have to pepper their xml 
                    // with namespace dross
                    $(fetchResponse).find("a\\:Entity, Entity").each(function () {

                        var entityData = {};

                        $(this).find("a\\:KeyValuePairOfstringanyType, KeyValuePairOfstringanyType").each(function () {
                            var xmlElement = $(this);
                            var key = xmlElement.find("b\\:key, key").text();
                            var value = xmlElement.find("b\\:value, value").text();
                            entityData[key] = value;
                        });

                        //inner loop
                        $(this).find("a\\:KeyValuePairOfstringstring, KeyValuePairOfstringstring").each(function () {
                            var xmlElement = $(this);
                            var key = xmlElement.find("b\\:key, key").text();
                            var value = xmlElement.find("b\\:value, value").text();
                            entityData[key] = value;
                        });

                        entityList.push(entityData);
                    });

                }, function (jqXhr, textStatus, errorThrown) {
                    // if unsuccessful, generate an error alert message
                });

            for (var i = 0; i < entityList.length; i++) {

                if (entityList[i].ATTRIBUTE === "Yes" ){ 
                   // DO WHATEVER
                }
            } 
```

我只需要带有 KeyValuePairOfstringstring 和 KeyValuePairOfstringanyType 的属性，但是您可以使用正确的选择器组合解析出任何属性

检索到的每个项目

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-26T10:21:00.593

我遇到了类似的问题，我通过使用以下解决方法解决了它。

```
var sFetchResult = xmlhttp.response;
var tempresultDoc = new ActiveXObject("Microsoft.XMLDOM");
tempresultDoc.async = false;
tempresultDoc.loadXML(sFetchResult); 
```

// 现在，我们将拥有 XML 文件。使用以下代码从 XML 中获取 singleNode。

```
var resultDoc = new ActiveXObject("Microsoft.XMLDOM");
resultDoc.async = false;
resultDoc.loadXML(tempresultDoc.childNodes[0].selectSingleNode("//a:Entities").xml); 
```

问候，克鲁蒂卡·苏查克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-03T12:48:34.277

如果您正在寻找不需要 JQuery 的版本以及解析结果的版本，[请查看](http://www.dotnetdust.blogspot.com/2013/07/making-fetchxml-in-javascript-less.html)。它不仅包装了 FetchXML，还将响应 XML 解析为 JavaScript 对象以便于检索。

# android - Android 自定义 URL 方案 - 源应用程序

> ID：15180267
> 
> 赞同：1
> 
> 时间：2013-03-02T22:38:47.973
> 
> 标签：android, multitasking, url-scheme

通过自定义 URL 方案启动时，有没有办法在 Android 中获取源应用程序？

我们的应用程序通过设备上的浏览器进行控制。您单击某个链接，然后根据参数执行任务。然后我想立即回到浏览器。

任务完成后我尝试调用`moveTaskToBack(true)`，但由于某种原因，它让我回到主屏幕，而不是回到浏览器。好像这个方法是从浏览器的活动中调用的。

因此，如果我可以获取源应用程序，我可以通过意图启动它。

可能吗？也欢迎其他有关这样做的建议。

谢谢

# mysql - 代表特定日期字段的周报告

> ID：15180284
> 
> 赞同：0
> 
> 时间：2013-03-02T22:40:56.690
> 
> 标签：mysql

我正在使用此查询进行每周报告，但找不到这样的方法

```
week_number | week_startdate | organization_1 | organization_2
---------------------------------------------------------------
1           | 2013-01--05    |count(date) like 4,24,etc_ | count(date) like 4,24,etc_ 
```

SQL：

```
SELECT WEEK(signed_date) AS week_name, signed_date AS Week_Starting,
       YEAR(signed_date), WEEK(signed_date), COUNT(*)
FROM business
WHERE YEAR(signed_date) = YEAR(CURDATE())
GROUP BY CONCAT(YEAR(signed_date), '/', WEEK(signed_date))
ORDER BY YEAR(signed_date), WEEK(signed_date 
```

样本数据：

签名日期 | 组织
_id 01-01-2013 | 1
02-01-2013 | 1
03-01-2013 | 2

在 1 周内，组织_1 有 2 个签名，组织_2 有 1 个签名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T00:25:34.987

您应该在 count 或 sum 中使用 case：

```
SELECT WEEK(signed_date) AS week_name, signed_date AS Week_Starting,
       YEAR(signed_date), WEEK(signed_date),
SUM(CASE  WHEN organization_id=1 THEN 1 ELSE 0 END) as organization_1,
SUM(CASE WHEN organization_id=2 THEN 1 ELSE 0 END) as organization_2
FROM business
WHERE YEAR(signed_date) = YEAR(CURDATE())
GROUP BY CONCAT(YEAR(signed_date), '/', WEEK(signed_date))
ORDER BY YEAR(signed_date), WEEK(signed_date); 
```

[http://sqlfiddle.com/#!2/587ad/3](http://sqlfiddle.com/#!2/587ad/3)

# javascript - Ajax 定时事件重定向

> ID：15180285
> 
> 赞同：0
> 
> 时间：2013-03-02T22:41:01.997
> 
> 标签：javascript, ajax, timer

我正在尝试为聊天脚本设置重定向。如果聊天在 x 时间后仍未得到答复，则页面将重定向。

我昨天在这里发布了一个关于同一件事的问题，但当时我对 JS 知之甚少，我试图将 php 与 js 混合。我改变了战术。

这是我到目前为止得到的：

```
function opCheck()
{
var xmlhttp;
if (window.XMLHttpRequest)
{
// code for IE7+, Firefox, Chrome, Opera, Safari
xmlhttp=new XMLHttpRequest();
}
else if (window.ActiveXObject)
{
// code for IE6, IE5
xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
else
{
alert("Your browser does not support XMLHTTP!");
}
xmlhttp.onreadystatechange=function()
{
if(xmlhttp.readyState==4)
{

opCheck();                          
        //  alert('working2');                      
}
}
opjoined = "newchattimer.php";
xmlhttp.open("GET",opjoined,true);
xmlhttp.send(null); 
}

function opResult()
{
var xmlhttp;
if (window.XMLHttpRequest)
{
// code for IE7+, Firefox, Chrome, Opera, Safari
xmlhttp=new XMLHttpRequest();
}
else if (window.ActiveXObject)
{
// code for IE6, IE5
xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
else
{
alert("Your browser does not support XMLHTTP!");
}
xmlhttp.onreadystatechange=function()
{
if(xmlhttp.readyState==4)
{
 //alert('state = 4');
var op = xmlhttp.responseText;
}
}
ajaxurl = "ajaxfiles/opAnswer_12.txt";
xmlhttp.open("GET",ajaxurl,true);
xmlhttp.send(null);
}

setTimeout(function() {
opCheck();
opResult();
//alert(op);
if (op == 'n') window.location.replace("chatnoop.php");
 }, 3000); 
```

它正确地创建了文本文件，但最终没有重定向。我使用了 chrome 开发者工具，没有错误。我还试图`alert(op);`查看结果是否被抓取，但我没有收到任何警报。

这段代码有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T22:49:16.427

如果你花时间缩进你的代码，你会看到它`var op`是在函数范围内声明的`onreadystatechange`，它既超出范围又是异步的。

```
function opResult() {
    var xmlhttp;
    if (window.XMLHttpRequest) {
        xmlhttp = new XMLHttpRequest();
    } else if (window.ActiveXObject) {
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    } else {
        alert("Your browser does not support XMLHTTP!");
    }
    xmlhttp.onreadystatechange = function () {
        if (xmlhttp.readyState == 4) {
            var op = xmlhttp.responseText; //declared here
        }
    }
    ajaxurl = "ajaxfiles/opAnswer_12.txt";
    xmlhttp.open("GET", ajaxurl, true);
    xmlhttp.send(null);
}

setTimeout(function () {
    opCheck();
    opResult();
    // op is out of scope here
    if (op == 'n') window.location.replace("chatnoop.php");
}, 3000); 
```

由于超时通常不是处理异步函数的方式，并且当你打算在完成时做的所有事情是重定向时执行ajax请求并不是真的有必要，你可以只做一个常规的表单提交，这将重定向所有本身，或将重定向移动到正确的范围内！

```
xmlhttp.onreadystatechange = function () {
    if (xmlhttp.readyState == 4) {
        if(xmlhttp.responseText == 'n') window.location.href = 'chatnoop.php';
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T22:49:29.850

你可能会在这里找到你想要的[http://www.tizag.com/javascriptT/javascriptredirect.php](http://www.tizag.com/javascriptT/javascriptredirect.php)但基本上我不认为这`window.location.replace("chatnoop.php");`是正确的。您应该考虑使用 JQuery 来管理所有 Ajax 的东西，但它应该像您所做的那样工作

# c++ - 以固定速率重放存储的数据

> ID：15180291
> 
> 赞同：1
> 
> 时间：2013-03-02T22:41:26.137
> 
> 标签：c++, multithreading, performance, io, locking

我正在解决一个问题，我想以指定的速率重放存储在文件中的数据。

例如：25,000 条记录/秒。

该文件为 ascii 格式。目前，我读取文件的每一行并应用正则表达式来提取数据。2-4行组成一个记录。我对这个操作进行了计时，生成每条记录大约需要 15 微秒。

发布每条记录所需的时间为 6 微秒。

如果我按顺序执行读取和写入，那么我最终将有 21 微秒的时间来发布每条记录。如此有效，这意味着我的上限是每秒约 47K 条记录。

如果我决定对读取和写入进行多线程处理，那么我将能够每 9 微秒发送一个数据包（忽略锁定惩罚，因为读取器和写入器共享相同的 Q），这提供了每秒 110K 滴答的吞吐量。

我以前的设计正确吗？

当单个生产者和消费者共享一个队列时，什么样的队列和锁定结构具有最小的惩罚？

如果我想扩大规模，最好的方法是什么？

我的应用程序是 C++

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:43:34.560

如果读取/准备一条记录需要 15uS，那么您的最大吞吐量将约为 1sec/15uSec = 67k/sec。您可以忽略 6uSec 部分，因为读取文件的单个线程无法生成更多记录。（尝试一下，将程序更改为仅读取/处理并丢弃输出）不确定您是如何获得 9uS 的。

为了让这个速度超过 67k/sec ...

A) 估计每秒可以从要格式化的磁盘读取的最大记录数。虽然这在很大程度上取决于硬件，但对于普通笔记本电脑来说，20Mb/sec 的数字是典型的。这个数字将为您提供目标的上限，当您接近时，您可以轻松尝试。

B）创建一个线程只是为了读取文件并导致IO延迟。该线程应该写入大的预分配缓冲区，例如每个 4Mb。有关管理这些内容的方法，请参见[http://en.wikipedia.org/wiki/Circular_buffer](http://en.wikipedia.org/wiki/Circular_buffer)。您希望每个缓冲区保存 1000 条记录（猜测，但不仅仅是 8 条记录！）伪代码：

```
 while not EOF
     Allocate big buffer
     While not EOF and not buffer full
          Read file using fgets() or whatever
          Apply only very small preprocessing, ideally none
          Save into buffer
     Release buffer for other threads 
```

C）创建另一个线程（或多个，如果记录的顺序不重要）来处理一个满的环形缓冲区，你的正则表达式步骤。该线程依次写入另一组输出环形缓冲区（提示，保持环形缓冲区控制结构在内存中分开）

```
 While run-program
        Wait/get an input buffer to process, semaphores/mutex/whatever you prefer
        Allocate output buffer
        Process records from input buffer,
           Place result in output buffer
        Release output buffer for next thread
        Release input buffer for reading thread 
```

D）创建最终线程来使用数据。目前尚不清楚此输出是否正在写入磁盘或网络，因此这可能会影响磁盘读取线程。

```
 Wait/get input buffer from processed records pool
    Output records to wherever
    Return buffer to processed records pool 
```

笔记。预分配所有缓冲区并将它们传递回它们的来源。例如，您可能在文件读取线程和处理线程之间有 4 个缓冲区，当所有 4 个都注入时，文件读取器等待一个空闲，它不只是分配新的缓冲区。如果可以避免，尽量不要使用 memset() 缓冲区，浪费内存带宽。你不需要很多缓冲区，6？每个环形缓冲区？

系统将自动调整到最慢的线程（[http://en.wikipedia.org/wiki/Theory_of_constraints](http://en.wikipedia.org/wiki/Theory_of_constraints)），因此如果您读取和准备数据的速度比您想要输出的速度快，所有缓冲区都会填满，一切都会暂停，除了输出。

由于线程在每个同步点传递合理数量的数据，因此开销不会太大。

上面的设计是我的一些代码如何尽可能快地读取 CSV 文件，基本上都是将输入 IO 带宽作为限制因素。

# python - 在 sweetpie 中创建动态 ORM 资源

> ID：15180296
> 
> 赞同：0
> 
> 时间：2013-03-02T22:41:54.157
> 
> 标签：python, django, tastypie

我正在寻找在美味派中创建一个动态资源。基本上这个想法是有很多模型可以连接，所以这可能有助于使用标准的简洁资源节省时间。

我有大部分工作，但是我在填充相关字段时遇到了麻烦。我正在重写从 ModelResource 继承的类的构造函数，并且在这个构造函数中，我试图设置美味的关系。但是，当我查看我的资源时，没有填充数据。

```
setattr(self, field, fields.ForeignKey(class_thing, attribute=field, full=True)) 
```

基本上我在构造函数中使用 setattr 来尝试连接应该是什么关系。如果我在玩弄实例，我可以看到这个对象正在创建，但资源输出没有改变。有没有人足够熟悉美味派/做这样的事情给我一个线索？

谢谢你的时间。

编辑：没关系，只是过度脱水并从那里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T02:10:41.937

而不是通过构造函数（这很乱，因为tastepie / django无论如何都在那里做东西）我通过脱水覆盖来做到这一点，这是一种旨在做到这一点的。

bundle.obj 在那里有所有关联的数据，所以基本上我只是序列化了相关对象并将它们添加到 bundle.data 字典中，然后再返回包。看起来更干净，工作起来就像一个魅力。

# c++ - 用 cin 检查用户整数输入会产生无限循环

> ID：15180298
> 
> 赞同：2
> 
> 时间：2013-03-02T22:42:19.103
> 
> 标签：c++, error-handling, user-input, cin

如果用户没有在输入提示中输入任何内容，并且他们输入的内容为零或更少，我正在尝试打印错误消息。

```
void checkScoreInputed(int* qaltScores, int i){
    while(true){
        // cin.clear(); here?
        if ((cin >> qaltScores[i]) && (qaltScores > 0)){
            // also tried placing cin.clear() here. 
            break;} else // else is optional
        cout << "Please supply a positive number for the score: ";
    }
} 
```

`cout << "Please supply...."`我已经尝试在 if 语句之前和之后放置 cin.ignore() 和 cin.clear() ，但是在用户输入非整数值（如字符）后，我仍然会出现无限循环 。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T22:45:16.027

你忘记`[i]`了

```
if ((cin >> qaltScores[i]) && (qaltScores[i] > 0))
                                         ^^^ 
```

没有它，您将检查指针的值，而不是您刚刚读取的数字。

您还需要调用`cin.clear()`和`cin.ignore()`。

```
void checkScoreInputed(int* qaltScores, int i) {
    while(true) {
        if ((cin >> qaltScores[i]) && (qaltScores[i] > 0)){
            break;
        }
        cout << "Please supply a positive number for the score: ";
        cin.clear();
        cin.ignore(10000,'\n');
    }
} 
```

请参阅[为什么我们会在读取输入后调用 cin.clear() 和 cin.ignore()？](https://stackoverflow.com/questions/5131647/why-would-we-call-cin-clear-and-cin-ignore-after-reading-input)

# objective-c - 如何在 ParseKit 中自定义 PKTokenizer 以标记子字符串？

> ID：15180300
> 
> 赞同：1
> 
> 时间：2013-03-02T22:42:21.590
> 
> 标签：objective-c, tokenize, parsekit

假设我想用 ParseKit 解析子字符串，比如单词的前缀。例如，我想解析“预览”和“评论”。所以我的语法可能是：

```
@start  = prefix 'view';
prefix = 'pre' | 're'; 
```

现在无需修改 ParseKit 我可以匹配“预览”和“重新查看”，但不能匹配“预览”或“审查”。通过查看文档，我想我需要自定义 PKTokeinzer 的单词状态，因为它正在寻找空格来终止“单词”令牌。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T00:00:45.000

[ParseKit](http://parsekit.com)的开发者在这里。

我不确定我是否完全理解这个问题，但我认为这听起来有些误导。

如果您正在寻找一种匹配子标记或字符的方法，正则表达式可能比 ParseKit 更适合您的需求。

ParseKit 语法与 ParseKit 标记器（`PKTokenizer`类）生成的标记匹配。不是个别字符。

并不是说不可能从 的输入中`PKTokenizer`产生一个`pre`和和一个标记。但这需要对我称之为不明智和不必要的复杂的代码进行定制。我认为这是个坏主意。`view``preview`

如果你想使用 ParseKit（而不是 Regex），你可以简单地在你的汇编回调中进行子解析（而不是在语法中）。

所以在语法中：

```
@start = either;
either = 'preview' | 'review'; 
```

在 ObjC 中：

```
- (void)parser:(PKParser *)p didMatchEither:(PKAssembly *)a {
    PKToken *tok = [a pop];
    NSString *str = tok.stringValue;

    if ([str hasPrefix:@"pre"]) {
        ... // handle 'preview'
    } else {
        ... // handle 'review'
    }
} 
```

* * *

还要记住 ParseKit 语法通过 RegEx 支持匹配标记。因此，如果您想匹配所有以 结尾的单词`view`：

```
@start = anyView;
anyView = /\b\w*?view\b/; 
```

希望有帮助。

# android - Air Android - 从其他应用程序接收内容

> ID：15180305
> 
> 赞同：2
> 
> 时间：2013-03-02T22:43:11.037
> 
> 标签：android, air, permissions

我想让我的应用程序能够接收来自其他应用程序的文本内容。一切正常，除了调用事件缺少共享文本。我是否需要添加一些额外的权限才能从其他应用程序接收内容，还是需要修改其他内容？

下面的 XML 代码来自[Android 示例](http://developer.android.com/training/sharing/receive.html#update-manifest)。

XML：清单：

```
<activity android:name=".ui.MyActivity" >
    <intent-filter>
        <action android:name="android.intent.action.SEND" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:mimeType="text/plain" />
    </intent-filter>
</activity> 
```

Air：处理调用事件：

```
NativeApplication.nativeApplication.addEventListener(InvokeEvent.INVOKE, onAppInvoke);
function onAppInvoke(event:InvokeEvent):void {
info.text = event.arguments.toString()
info.text += event
} 
```

我正在使用 Adob​​e Air 3.6 和 Flash CS 6 构建我的 Android 应用程序。

谢谢。乌里

# java - 在 Catch 异常之前打印出 finally

> ID：15180308
> 
> 赞同：2
> 
> 时间：2013-03-02T22:43:35.183
> 
> 标签：java, try-catch, operator-precedence, finally, clause

我想知道为什么例如在以下代码段中：

```
try{
   //here happens a SQLException
}
catch(SQLException e){
   throw new InstantiationException();
}
finally{
   System.out.println("This is the finally");
} 
```

这段代码的结果将首先打印出来`"This is the finally"`，并且只有在它打印出来之后`InstantiationException`......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T22:51:11.940

来自**[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.20.2)**：：

> 如果 try 块的执行由于抛出值 V 而突然完成，则有一个选择：（**SQLException throw in try 子句**）
> 
> 如果 V 的运行时类型是与 try 语句的任何 catch 子句的可捕获异常类兼容的赋值，则选择第一个（最左边）这样的 catch 子句。将值 V 分配给所选 catch 子句的参数，并执行该 catch 子句的 Block。然后有一个选择：
> 
> 如果 catch 块正常完成，则执行 finally 块。然后有一个选择：
> 
> 如果 finally 块正常完成，则 try 语句正常完成。
> 
> 如果 finally 块因为任何原因突然完成，那么 try 语句也会因为同样的原因而突然完成。
> 
> 如果 catch 块由于原因 R 突然完成，则执行 finally 块。然后有一个选择：（**InstantiationException throw**）
> 
> 如果 finally 块正常完成，则 try 语句会因为 R.( **System.out.println("This is the finally")** )而突然完成

我在每个执行步骤中都用粗体显示了文本。

**总结：**

1.  在您的 try 块中引发 SQLException
2.  控制转移到处理 SQLException 的 Catch 子句
3.  当您抛出 InstantiationException 时，Catch 子句突然完成
4.  finally 块是通过打印你的文本来执行的

# c - 内存中的局部变量位置

> ID：15180309
> 
> 赞同：7
> 
> 时间：2013-03-02T22:43:59.447
> 
> 标签：c, arm, objdump

对于家庭作业，我得到了一些 c 文件，并使用 arm-linux-gcc 编译它们（我们最终将针对 gumstix 板，但对于这些练习，我们一直在使用 qemu 和 ema）。

其中一个问题让我有点困惑——我们被告知：

> 使用 arm-linux-objdump 在可执行二进制文件中查找 main() 中声明的变量的位置。

但是，这些变量是本地的，因此在运行之前不应该有地址，对吗？

我在想也许我需要找到的是堆栈帧中的偏移量，实际上可以使用 objdump 找到它（我不知道如何）。

无论如何，对此事的任何见解将不胜感激，如有必要，我很乐意发布源代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T18:20:21.210

```
unsigned int one ( unsigned int, unsigned int );
unsigned int two ( unsigned int, unsigned int );
unsigned int myfun ( unsigned int x, unsigned int y, unsigned int z )
{
    unsigned int a,b;
    a=one(x,y);
    b=two(a,z);
    return(a+b);
} 
```

编译和反汇编

```
arm-none-eabi-gcc -c fun.c -o fun.o
arm-none-eabi-objdump -D fun.o 
```

编译器生成的代码

```
00000000 <myfun>:
   0:   e92d4800    push    {fp, lr}
   4:   e28db004    add fp, sp, #4
   8:   e24dd018    sub sp, sp, #24
   c:   e50b0010    str r0, [fp, #-16]
  10:   e50b1014    str r1, [fp, #-20]
  14:   e50b2018    str r2, [fp, #-24]
  18:   e51b0010    ldr r0, [fp, #-16]
  1c:   e51b1014    ldr r1, [fp, #-20]
  20:   ebfffffe    bl  0 <one>
  24:   e50b0008    str r0, [fp, #-8]
  28:   e51b0008    ldr r0, [fp, #-8]
  2c:   e51b1018    ldr r1, [fp, #-24]
  30:   ebfffffe    bl  0 <two>
  34:   e50b000c    str r0, [fp, #-12]
  38:   e51b2008    ldr r2, [fp, #-8]
  3c:   e51b300c    ldr r3, [fp, #-12]
  40:   e0823003    add r3, r2, r3
  44:   e1a00003    mov r0, r3
  48:   e24bd004    sub sp, fp, #4
  4c:   e8bd4800    pop {fp, lr}
  50:   e12fff1e    bx  lr 
```

简短的回答是在编译时和运行时都“分配”了内存。在编译时，编译器在编译时确定堆栈帧的大小以及谁去哪里。运行时内存本身在堆栈上，这是一个动态的东西。堆栈帧在运行时从堆栈内存中获取，类似于 malloc() 和 free()。

了解调用约定会有所帮助，x 在 r0 中输入，y 在 r1 中，z 在 r2 中。那么 x 的家位于 fp-16，y 位于 fp-20，z 位于 fp-24。那么对 one() 的调用需要 x 和 y，因此它会从堆栈中提取它们（x 和 y）。one() 的结果进入 a，它保存在 fp-8 中，因此这是 a 的家。等等。

函数一实际上不在地址 0 处，这是对目标文件的反汇编，而不是链接的二进制文件。一旦一个对象与其余的对象和库链接，缺少的部分，如外部函数所在的位置，将由链接器修补，并且对 one() 和 two() 的调用将获得真实地址。（并且程序可能不会从地址 0 开始）。

我在这里作弊了一点，我知道如果没有在编译器上启用优化并且像这样一个相对简单的函数，真的没有任何堆栈帧的理由：

只需一点优化即可编译

```
arm-none-eabi-gcc -O1 -c fun.c -o fun.o
arm-none-eabi-objdump -D fun.o 
```

堆栈帧消失了，局部变量保留在寄存器中。

00000000 : 0: e92d4038 推 {r3, r4, r5, lr} 4: e1a05002 mov r5, r2 8: ebffffffe bl 0 c: e1a04000 mov r4, r0 10: e1a01005 mov r1, r5 14: e080000 0 18: r0, r0, r4 1c: e8bd4038 pop {r3, r4, r5, lr} 20: e12fff1e bx lr

编译器决定做的是通过将它们保存在堆栈上来给自己更多的寄存器来使用。为什么它保存了 r3 是一个谜，但这是另一个话题......

根据调用约定输入函数 r0 = x, r1 = y 和 r2 = z，我们可以不理会 r0 和 r1（用 one(y,x) 再试一次，看看会发生什么），因为它们直接落入 one() 和不再使用。调用约定说 r0-r3 可以被函数销毁，因此我们需要保留 z 以供以后使用，因此我们将其保存在 r5 中。根据调用约定 one() 的结果是 r0，因为 two() 可以破坏 r0-r3 我们需要保存 a 以备后用，在调用 two() 之后我们也需要 r0 来调用两个，所以 r4现在持有一个。我们在调用 one 之前将 z 保存在 r5 中（在 r2 中移动到 r5），我们需要 one() 的结果作为 two() 的第一个参数，并且它已经存在，我们需要 z 作为第二个参数，所以我们将我们保存 z 的 r5 移动到 r1，然后我们调用 two()。根据调用约定的 two() 的结果。由于 b + a = a + b 来自基本数学属性，因此在返回之前的最终加法是 r0 + r4，即 b + a，结果进入 r0，r0 是用于从函数返回某些内容的寄存器，按照惯例。清理堆栈并恢复修改后的寄存器，完成。

由于 myfun() 使用 bl 调用了其他函数，bl 修改了链接寄存器 (r14)，为了能够从 myfun() 返回，我们需要将链接寄存器中的值从函数的入口中保留下来最后返回 (bx lr)，所以 lr 被压入堆栈。约定规定我们可以在函数中销毁 r0-r3，但不能销毁其他寄存器，因此 r4 和 r5 被压入堆栈，因为我们使用了它们。从调用约定的角度来看，为什么不需要将 r3 推入堆栈，我想知道它是否是在预期 64 位内存系统的情况下完成的，进行两次完整的 64 位写入比一次 64 位写入和一次 32 位写入便宜。但是你需要知道堆栈的对齐方式，所以这只是一个理论。没有理由在此代码中保留 r3。

现在利用这些知识并反汇编分配的代码（arm-...-objdump -D something.something）并进行相同的分析。特别是对于名为 main() 的函数与未命名为 main 的函数（我没有故意使用 main()），堆栈帧的大小可能没有意义，或者比其他函数更没有意义。在上面的非优化情况下，我们总共需要存储 6 个东西，x,y,z,a,b 和链接寄存器 6*4 = 24 字节，这导致了 sub sp, sp, #24，我需要考虑堆栈指针与帧指针的关系。我认为有一个命令行参数告诉编译器不要使用帧指针。-fomit-frame-pointer，它保存了一些指令

```
00000000 <myfun>:
   0:   e52de004    push    {lr}        ; (str lr, [sp, #-4]!)
   4:   e24dd01c    sub sp, sp, #28
   8:   e58d000c    str r0, [sp, #12]
   c:   e58d1008    str r1, [sp, #8]
  10:   e58d2004    str r2, [sp, #4]
  14:   e59d000c    ldr r0, [sp, #12]
  18:   e59d1008    ldr r1, [sp, #8]
  1c:   ebfffffe    bl  0 <one>
  20:   e58d0014    str r0, [sp, #20]
  24:   e59d0014    ldr r0, [sp, #20]
  28:   e59d1004    ldr r1, [sp, #4]
  2c:   ebfffffe    bl  0 <two>
  30:   e58d0010    str r0, [sp, #16]
  34:   e59d2014    ldr r2, [sp, #20]
  38:   e59d3010    ldr r3, [sp, #16]
  3c:   e0823003    add r3, r2, r3
  40:   e1a00003    mov r0, r3
  44:   e28dd01c    add sp, sp, #28
  48:   e49de004    pop {lr}        ; (ldr lr, [sp], #4)
  4c:   e12fff1e    bx  lr 
```

优化可以节省更多...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T01:34:15.743

这将取决于程序以及他们想要变量位置的确切程度。问题是否需要它们存储在哪个代码段中？.const .bss 等？它需要特定的地址吗？无论哪种方式，一个好的开始都是使用 objdump -S 标志

```
objdump -S myprogram > dump.txt 
```

这很好，因为它会打印出您的源代码和带有地址的程序集的混合。从这里开始搜索你的`int main`，这应该让你开始。

# javascript - 让 Foundation 4 JS 在 WP 中工作的问题

> ID：15180310
> 
> 赞同：4
> 
> 时间：2013-03-02T22:44:04.780
> 
> 标签：javascript, jquery, wordpress, zurb-foundation

我正在将[Foundation 4](http://foundation.zurb.com/)与[Bones](http://themble.com/bones/)合并以创建 WP Starter 主题。我使用 Foundation 3 中的 JS 一切正常，但现在我正在尝试实现 Foundation 4 JS，我遇到了一些问题。

我按照[Foundation 4 JS 文档](http://foundation.zurb.com/docs/javascript.html)中的步骤进行操作，但仍然没有运气。这是我直接放在结束正文标记之前的代码（我知道正确的方法是将脚本排入队列，但为了测试我只是将它直接粘贴在结束正文标记上方）：

```
<script>
document.write('<script src=http://mcfaddengavender.net/jeremy/wp-content/themes/bones-master/library/js/vendor/'
+ ('__proto__' in {} ? 'zepto' : 'jquery')
+ '.js><\/script>');
</script>   

<script src="http://mcfaddengavender.net/jeremy/wp-content/themes/bones-master/library/js/foundation.min.js"></script>

<script>
$(document).foundation();
</script> 
```

我正在尝试在[此页面](http://mcfaddengavender.net/jeremy/?page_id=2#)上打开一个模式，但如您所见，当您单击链接时，模式永远不会触发。我注意到 Javascript 控制台中有一些错误，但我对 JS 还是很陌生，所以它们有点让我头疼。

正如我之前提到的，Foundation 3 JS 运行良好，不需要调用来初始化函数——它似乎可以正常工作。不确定这是否有很大的不同，但我注意到 Foundation 4 JS 的文档与 Foundation 3 JS 的文档不同。

谁能让我指出正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T02:06:38.063

看起来浏览器找不到 Zepto（至少 chrome 找不到）。

它在这里寻找它：http: [//mcfaddengavender.net/library/js/vendor/zepto.js](http://mcfaddengavender.net/library/js/vendor/zepto.js)但它返回 404

确保您的库设置在适当的目录中！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T23:47:28.627

在我发表评论之后，我让它工作了大声笑。也许这会对您或其他人有所帮助。

似乎文档有点混乱，我只能通过按此顺序加载foundation/foundation.js和foundation-whatever-plugin.js来获得插件功能-仅加载foundation.js对我不起作用。

我正在使用 requirejs 来加载，所以我不必担心路径，但为了您的目的，只需确保您没有任何路径问题并且此加载顺序应该有效。出于故障排除的目的，我绕过了modernizr / zepto检测器并直接加载jquery。

```
 requirejs.config({

 baseUrl: "/path/to/scripts",
 paths:{
  jquery: 'vendor/jquery/jquery.min',
 },
 shim: {

    'foundation/foundation': { deps: ['jquery'] },
    'foundation/foundation.alerts': { deps: ['jquery'] },
    'foundation/foundation.clearing': { deps: ['jquery'] },
    'foundation/foundation.cookie': { deps: ['jquery'] },
    'foundation/foundation.dropdown': { deps: ['jquery'] },
    'foundation/foundation.forms': { deps: ['jquery'] },
    'foundation/foundation.joyride': { deps: ['jquery'] },
    'foundation/foundation.magellan': { deps: ['jquery'] },
    'foundation/foundation.orbit': { deps: ['jquery'] },
    'foundation/foundation.placeholder': { deps: ['jquery'] },
    'foundation/foundation.reveal': { deps: ['jquery'] },
    'foundation/foundation.section': { deps: ['jquery'] },
    'foundation/foundation.tooltips': { deps: ['jquery'] },
    'foundation/foundation.topbar': { deps: ['jquery'] },
    'vendor/jquery.maskedinput/jquery.maskedinput.min': { deps: ['jquery']},
    'vendor/chosen/chosen/chosen.jquery': { deps: ['jquery']},
    'vendor/tablesorter/js/jquery.tablesorter.min': { deps: ['jquery']},
    'vendor/tablesorter/addons/pager/jquery.tablesorter.pager.min': {
      deps: [
      'jquery', 
      'vendor/tablesorter/js/jquery.tablesorter.min'
      ]
    },
    'vendor/redactor-js/redactor/redactor.min': { deps: ['jquery']},
    'lib/jquery.passwordstrength': { deps: ['jquery']} 
```

}

});

```
require(["jquery",
"foundation/foundation",
"foundation/foundation.alerts",
"foundation/foundation.clearing",
"foundation/foundation.cookie",
"foundation/foundation.dropdown",
"foundation/foundation.forms",
"foundation/foundation.joyride",
"foundation/foundation.magellan",
"foundation/foundation.orbit",
"foundation/foundation.placeholder",
"foundation/foundation.reveal",
"foundation/foundation.section",
"foundation/foundation.tooltips",
"foundation/foundation.topbar"
], function ($) {
  $(document).foundation();
}); 
```

# css - 如何包含样板罗盘库代码

> ID：15180312
> 
> 赞同：1
> 
> 时间：2013-03-02T22:44:07.927
> 
> 标签：css, sass, compass-sass

目前我正在使用

```
@import "compass"; 
```

包括一些样板罗盘代码，但它实际上并没有做任何事情。这是我的 base.scss 文件代码

```
@import "compass";
@import "compass/css3";
#hello{
    width: 200px;
    height: 510px;
    color: blue;
} 
```

当它编译我的结果是

```
/* line 3, sass/base.scss */
#hello {
  width: 200px;
  height: 510px;
  color: blue;
} 
```

我认为这将包括更多的 CSS。难道我做错了什么？是否有我应该下载并添加到我的项目中的库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T02:11:49.950

不，Compass 旨在成为对任何项目都有用的自己动手工具包，而不是像 Twitter 的 Bootstrap 这样的预打包产品。除非您明确说明（例如调用 mixin），否则它不会发出任何样式。

那里有一些 Compass 模块，就像您可能期望的那样，它们的拖放操作要多一些，但是您必须自己去寻找它们。

# c# - MEF 导入为空

> ID：15180316
> 
> 赞同：3
> 
> 时间：2013-03-02T22:44:31.687
> 
> 标签：c#, dependency-injection, null, mef

我有一个不起作用的导入 - 对象为空。最初它是 ImportMany，但我将其简化为 Import 以尝试识别问题，但我没有成功。

我浏览了这个网站和谷歌并遵循了主要思想：

*   不要自己实例化类，让 MEF 来做，否则调用 container.getExport() - 仍然不起作用
*   将 [Export] 放在包含 [Import] 属性的类上，否则它不会被容器组合过程作为一部分拾取（在调试时确认）。

我的代码设置如下（为了紧凑而简化）：

**组装1**

```
public class MyBootstrapper
{
    //Automatically called by ExcelDna library, I do not instantiate this class
    public void AutoOpen()
    {
        var ac1 = new AssemblyCatalog(typeof(XLHandler).Assembly);
        var ac2 = new AssemblyCatalog(typeof(MyComponent).Assembly);

        var agc = new AggregateCatalog();
        agc.Catalogs.Add(ac1);
        agc.Catalogs.Add(ac2);

        var cc = new CompositionContainer(agc);

        try
        {
            cc.ComposeParts(this);
        }
        catch (CompositionException exception) {}
    }
}

[Export]
public class XLHandler
{
    [Import(typeof(IMyComponent))]
    public IMyComponent _component;

    public void SomeMethod()
    {
        //try to use _component but it is null
    }
} 
```

**组装2**

```
public interface IMyComponent
{
    //stuff...
} 
```

**组装3**

```
[Export(typeof(IMyComponent)]
public MyComponent : IMyComponent
{
    //more stuff...
} 
```

任何人都知道/知道为什么 XLHandler 中的 _component 变量没有被 MEF 容器注入？

我是否需要为 Assembly2 中的接口导出/创建 AssemblyCatalog？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-02T22:55:10.933

导入部件时，您可以使用`[Import]`属性上的属性，也可以将其作为构造函数的一部分请求并使用`[ImportingConstructor]`属性。

***使用 [Import] 属性导入的任何部分在类的构造函数中都将不可用***

所以在你的情况下，`XLHandler`像这样改变类：

```
[Export]
public class XLHandler
{
    [ImportingConstructor]
    public void SomeMethod(MyComponent component)
    {
        _component = component;
       // You can use _component, since it has already been resolved...
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T09:40:35.643

在`MyBootstrapper.AutoOpen`你需要更换：

```
cc.ComposeParts(this); 
```

有类似的东西：

```
var handler = new XLHandler();
cc.ComposeParts(handler); 
```

或者：

```
var handler = cc.GetExportedValue<XLHandler>(); 
```

你不能组成的部分，`MyBootstrapper`因为它没有进口。`ComposeParts`什么也没做。

另一种方法是将导入添加到`MyBootstrapper`. 像：

```
public class MyBootstrapper
{
    [Import]
    XLHandler XLHandler;

    //Automatically called by ExcelDna library, I do not instantiate this class
    public void AutoOpen()
    {
        //Leave your implementation unchanged.
    }
} 
```

顺便说一句`MyComponent`不编译。

# python - 编辑 GtkWidget 属性/属性

> ID：15180320
> 
> 赞同：3
> 
> 时间：2013-03-02T22:44:52.620
> 
> 标签：python, styles, gtk, pygtk, pygobject

在大多数 pygtk 小部件页面中，它们包含称为“属性”、“属性”和“样式属性”的部分。如何更改这些属性和属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T09:50:26.293

更改属性的三种方法：

1.  正如在 zheoffec 的回答中一样，使用该`set_property()`函数（或`set_style_property()`用于样式属性。）这个函数在 Python 中实际上不是必需的，但它是为了完整性而存在的，因为它是 C API 的一部分。

2.  使用`props`属性。您在文档中找到的任何属性都可以通过此属性访问。例如，`btn1.props.label = 'StackOverflow'`和`btn1.props.use_underline = False`。

3.  按照 frb 的建议使用 getter 和 setter 函数。这些也只是因为它们是 C API 的一部分而存在，但有些人更喜欢它们而不是`props`属性。此外，不能保证任何特定属性都具有 getter 和 setter 函数！通常在精心设计的 C API 中它们会出现，但这不是必需的。

对于样式属性，我相信唯一的选择是#1。对于“属性”，这些只是 Python 属性。要访问该`allocation`属性，请使用`btn1.allocation`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-22T22:10:43.087

要在 widget.pros 列表中获取所有小部件：

```
button = gtk.Button()
for pspec in button3.props:
  print pspec
  #print button3.get_property(pspec.name) 
```

输出：

```
<GParamObject 'related-action'>
<GParamBoolean 'use-action-appearance'>
<GParamPointer 'user-data'>
<GParamString 'name'>
<GParamObject 'parent'>
<GParamInt 'width-request'>
<GParamInt 'height-request'>
<GParamBoolean 'visible'>
<GParamBoolean 'sensitive'>
<GParamBoolean 'app-paintable'>
<GParamBoolean 'can-focus'>
<GParamBoolean 'has-focus'>
<GParamBoolean 'is-focus'>
<GParamBoolean 'can-default'>
<GParamBoolean 'has-default'>
<GParamBoolean 'receives-default'>
<GParamBoolean 'composite-child'>
<GParamObject 'style'>
<GParamFlags 'events'>
<GParamEnum 'extension-events'>
<GParamBoolean 'no-show-all'>
<GParamBoolean 'has-tooltip'>
<GParamString 'tooltip-markup'>
<GParamString 'tooltip-text'>
<GParamObject 'window'>
<GParamBoolean 'double-buffered'>
<GParamUInt 'border-width'>
<GParamEnum 'resize-mode'>
<GParamObject 'child'>
<GParamString 'label'>
<GParamObject 'image'>
<GParamEnum 'relief'>
<GParamBoolean 'use-underline'>
<GParamBoolean 'use-stock'>
<GParamBoolean 'focus-on-click'>
<GParamFloat 'xalign'>
<GParamFloat 'yalign'>
<GParamEnum 'image-position'> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T23:11:28.800

在 PyGTK 中，`GtkWidget`是所有其他小部件类（包括您可能自己制作的小部件类）继承的基类。

就设置属性而言，您可能注意到您不能直接设置它们：

```
btn1.label = "StackOverflow" 
```

在 PyGTK 中，您需要在属性名称前加上 前缀`set_`，如下所示：

```
btn1.set_label("StackOverflow") 
```

如果`-`属性名称中有 a，例如 with `use-underline`，请将它们转换为下划线，例如`set_use_underline`. 我想说的是，我不认为 getter 和 setter 的这种使用是非常 Pythonic 的。

这是一个完整的工作程序，取自[ZetCode 教程](http://zetcode.com/gui/pygtk/firststeps/)并进行了修改。

```
import gtk

class PyApp(gtk.Window):
    def __init__(self):
        super(PyApp, self).__init__()

        self.set_title("Buttons")
        self.set_size_request(250, 200)
        self.set_position(gtk.WIN_POS_CENTER)

        btn1 = gtk.Button("Button")
        btn1.set_label("StackOverflow")
        btn1.set_use_underline(False)

        fixed = gtk.Fixed()

        fixed.put(btn1, 20, 30)

        self.connect("destroy", gtk.main_quit)

        self.add(fixed)
        self.show_all()

PyApp()
gtk.main() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T23:34:20.433

您可以使用该`Gtk.Widget.set_property(property, value)`方法更改 Widget 属性。`property`应该是一个字符串。

# symfony - Symfony2 在我的模型类中拒绝我的自定义 findBy 函数

> ID：15180321
> 
> 赞同：5
> 
> 时间：2013-03-02T22:44:55.433
> 
> 标签：symfony, doctrine

我按照此处文档中的说明在 Doctrine 模型类中设置自定义 findOneByJoinedToCategory($id) 函数的示例：

[http://symfony.com/doc/current/book/doctrine.html](http://symfony.com/doc/current/book/doctrine.html)

就我而言，我有一个名为 TestVendorCategory 的模型类，其中包含一堆属性和这个函数：

```
public function findOneByNameJoinedToVendorCategoryMappings($vendorCategoryName)
    {
        $query = $this->getEntityManager()
        ->createQuery('
                SELECT vc, vcm FROM TestCoreBundle:VendorCategory vc
                JOIN vcm.vendorCategoryMapping vcm
                WHERE vc.name = :name'
        )->setParameter('name', $vendorCategoryName);

        try
        {
            return $query->getSingleResult();
        }
        catch (\Doctrine\ORM\NoResultException $e)
        {
            return null;
        }
    } 
```

在我的控制器中，我这样称呼它：

```
$vendorCategoryMapping = $this->em->getRepository("TestCoreBundle:VendorCategory")->findOneByNameJoinedToVendorCategoryMappings($vendorCategoryName); 
```

当我转到浏览器并在其中执行此调用并执行此操作时，我收到以下错误消息：

实体“Test\CoreBundle\Entity\VendorCategory”没有字段“nameJoinedToVendorCategoryMappings”。因此，您不能在实体的存储库上调用“findOneByNameJoinedToVendorCategoryMappings”

看起来 Symfony 2.1 希望 findOneBy...() 方法只反映现有字段的名称，没有自定义的“JoinedTo...”类型的方法。请问我有什么遗漏吗？该文档显示了一个这样的示例，它应该可以工作。我正在使用注释，但是这个方法没有任何注释。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T23:06:48.183

您必须将 findOneByNameJoinedToVendorCategoryMappings 函数放在 VendorCategoryRepository 类中：

```
<?php
namespace Test\CoreBundle\Entity;

use Doctrine\ORM\EntityRepository;
use Doctrine\ORM\NoResultException;

class VendorCategoryRepository extends EntityRepository
{
    public function findOneByNameJoinedToVendorCategoryMappings($vendorCategoryName)
    {
        $query = $this->getEntityManager()
            ->createQuery('
            SELECT vc, vcm FROM TestCoreBundle:VendorCategory vc
            JOIN vcm.vendorCategoryMapping vcm
            WHERE vc.name = :name'
        )->setParameter('name', $vendorCategoryName);

        try
        {
            return $query->getSingleResult();
        }
        catch (NoResultException $e)
        {
            return null;
        }
    }
} 
```

并在实体中链接此存储库类：

```
/**
 * @ORM\Entity(repositoryClass="Test\CoreBundle\Entity\VendorCategoryRepository")
 */
class VendorCategory 
```

# android - 在android中更改视图

> ID：15180324
> 
> 赞同：2
> 
> 时间：2013-03-02T22:45:23.223
> 
> 标签：android, android-fragments, android-activity

我目前正在开发一个使用登录屏幕和主屏幕的小应用程序。我一直在观察其他开发人员是如何进行屏幕切换的，一些开发人员在运行时添加和删除片段，另一些开发人员为每个视图都有一个 Activity（在我的情况下，这将是一个 MainActivity 与 main_activity 布局，以及 LoginActivity 与login_activity 布局）。而且我不知道要走的路。我认为每个视图都有一个片段将是更有意义的解决方案，但我想在继续之前听取一些意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T22:47:59.883

可能还有其他人不同意我的观点，但在我看来，**片段**更适合您想要保持**屏幕的一部分静态并在另一部分更改某些内容**（**类似于**网站中的 AJAX）。

****在应用程序前端只发生一件事的情况下，应将****活动**用于单个视图。**

 **另一方面，如果您有类似 Gmail 的布局*（左侧有收件箱、已发送等的静态链接，屏幕右侧有邮件的动态列表）*，片段就是答案。

但是由于您有两个不同的布局屏幕和主屏幕，在我看来，**如果您对布局使用不同的活动并使用 Intents 进行导航，那将是整洁的**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T22:52:32.053

对于两个完全不同`Activity`的 s，例如`Login`and`Main`我认为你想使用两个不同的`Layouts`和两个独立`Activity`的 s 而不需要片段。但是，您可能希望在其中任何一个片段中使用 @swayam 建议的片段，具体取决于您想要在其中执行的操作。您需要查看文档并决定哪个更适合您的需求。没有人能真正为你决定。

[活动](http://developer.android.com/reference/android/app/Activity.html)

[碎片](http://developer.android.com/guide/components/fragments.html)**

# java - Selenium HtmlUnitDriver 在随机位置随机挂起

> ID：15180326
> 
> 赞同：6
> 
> 时间：2013-03-02T22:45:35.960
> 
> 标签：java, selenium, htmlunit

我使用**SeleniumHQ**记录我的操作，然后将它们导出到**Java Unity WebDrive**。然后我编辑了导出的代码并添加了许多额外的小东西，比如循环数组、时间戳等。

我的代码执行以下操作：

1.  登录我的网站。
2.  转到我的个人资料。
3.  删除我之前的公告。
4.  发布新公告。
5.  登出。

我尝试过使用`FirefoxDriver`and `HtmlUnitDriver`，但是它们中的每一个都给了我这个奇怪的问题。我的代码开始工作并随机停在随机位置并永远挂在那里。

例如，它可以登录 -> 转到配置文件 -> 删除上一个然后停止，或者它可以直接挂在登录中。我一遍又一遍地循环这些步骤，我循环越多，就越有可能卡住。

第一个循环成功率为 90%，第二个循环约为 40%，等等。`Driver`我使用的也影响了这一点。它最有可能挂起，`HtmlUnitDriver`我真的很想使用它`HtmlUnitDrive`，因为我想在 Ubuntu Server 上无头运行我的代码。

有没有其他人有类似的问题？

**编辑：**现在经过数小时的测试，我注意到它只是`HtmlUnitDriver`挂起而不是 Firefox。使用 Firefox 时，我可以看到它在做什么，并且它正在做所有应该做的事情。出现问题`HtmlUnitDriver`。

这是代码本身：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.concurrent.TimeUnit;
import org.junit.*;
import static org.junit.Assert.*;
import org.openqa.selenium.*;
import org.openqa.selenium.htmlunit.HtmlUnitDriver;

public class WebUpdater {

    private WebDriver driver;
    private String baseUrl;
    private boolean acceptNextAlert = true;
    private StringBuffer verificationErrors = new StringBuffer();

    @Before
    public void setUp() throws Exception {
        driver = new HtmlUnitDriver(true); // JavaScript enabled.

        baseUrl = "http://exampleurl.com";
        driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
    }

    @Test
    public void testUnity() throws Exception {
        openAndLogin();
        gotoProfile();
        deletePreviousPost();
        uploadPost();
        logOut();
        System.out.println("Done!");
    }

    private void openAndLogin() {
        driver.get(baseUrl);

        driver.findElement(By.linkText("Login")).click();
        driver.findElement(By.id("jsid-login-id")).clear();
        driver.findElement(By.id("jsid-login-id")).sendKeys("bilgeis.babayan@gmail.com");
        driver.findElement(By.id("jsid-login-password")).clear();
        driver.findElement(By.id("jsid-login-password")).sendKeys("volume1991");
        driver.findElement(By.cssSelector("input.right")).click();

    }

    private void gotoProfile() {
        driver.findElement(By.cssSelector("img[alt=\"Profile\"]")).click();
    }

    private void deletePreviousPost() {
        try {
            driver.findElement(By.cssSelector("img[alt=\"ExampleName\"]")).click();
            driver.findElement(By.linkText("Delete")).click();
            assertTrue(closeAlertAndGetItsText().matches("^Confirm to delete this post[\\s\\S]$"));
        } catch (Exception e) {
            System.out.println(e);
        }
    }

    private void uploadPost() {
        driver.findElement(By.linkText("ExampleAction")).click();
        driver.findElement(By.id("example_url")).clear();
        driver.findElement(By.id("example_url")).sendKeys("Example text that gets typed in textfield.");
        driver.findElement(By.cssSelector("input[name=\"example\"]")).clear();
        driver.findElement(By.cssSelector("input[name=\"example\"]")).sendKeys("ExampleName");
        driver.findElement(By.linkText("ExampleAction2")).click();
        System.out.println("Done");
    }

    private void logOut() {
        driver.get("http://exampleurl.com/logout");
        System.out.println("Logged out.");
    }

    @After
    public void tearDown() throws Exception {
        driver.quit();
        String verificationErrorString = verificationErrors.toString();
        if (!"".equals(verificationErrorString)) {
            fail(verificationErrorString);
        }
    }

    private boolean isElementPresent(By by) {
        try {
            driver.findElement(by);
            return true;
        } catch (NoSuchElementException e) {
            return false;
        }
    }

    private String closeAlertAndGetItsText() {
        try {
            Alert alert = driver.switchTo().alert();
            if (acceptNextAlert) {
                alert.accept();
            } else {
                alert.dismiss();
            }
            return alert.getText();
        } finally {
            acceptNextAlert = true;
        }
    }
} 
```

在我的主类中，我像这样调用 WebUpdater 类：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.logging.Level;
import java.util.logging.Logger;

public class Main {

    public static void main(String[] args) {

        Logger logger = Logger.getLogger("");
        logger.setLevel(Level.OFF);

        scan();

    }

    private static void scan() {
        while (true) {
            try {
            // Test if connection is available and target url is up.
                URL url = new URL("http://exampleurl.com");
                HttpURLConnection urlConn = (HttpURLConnection) url.openConnection();
                urlConn.connect();

            // Start tests.
                WebUpdater updater = new WebUpdater();
                updater.setUp();
                updater.testUnity();
                updater.tearDown();
            } catch (Exception ex) {
                System.out.println(ex);
            }
            try {
                Thread.sleep(12000);
            } catch (InterruptedException e) {
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:57:44.790

我对 HtmlUnitDriver 的体验很糟糕。前段时间我写了一个测试框架，本来应该在 Hudson 被解雇，最后我决定使用更可预测和更容易调试的 Firefox 驱动程序。关键是，在我的情况下，它是一个充满 javascript 的页面 - 动态加载的字段等，并且使用 HtmlUnitDriver 真的是一罐蠕虫。

如果您确实需要使用 HtmlUnitDriver，请尝试在“当前”（挂起）时刻调试 Selenium 可访问的“pagesource”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T23:07:11.677

HtmlUnit 2.11 存在缺陷（参见[此处](http://sourceforge.net/p/htmlunit/bugs/1461/ "这里")和[此处](http://sourceforge.net/mailarchive/forum.php?thread_name=5107E53B.1030503@yahoo.fr&forum_name=htmlunit-user "这里")），并且由于 HtmlUnit 2.12 于 3 月 6 日上线，当前版本的 HtmlUnitDriver 可能仍基于 HtmlUnit 2.11。

如果您发布您的“ [http://exampleurl.com/](http://exampleurl.com/) ”源代码（或者如果它是公开的，则只给我一个该页面的工作 url）我可以通过 HtmlUnit 2.12 使用脚本运行该页面。

# php - 我可以从数组中设置多个 Codeigniter Where 条件吗？

> ID：15180331
> 
> 赞同：1
> 
> 时间：2013-03-02T22:46:32.740
> 
> 标签：php, mysql, codeigniter

我正在尝试从满足数组多个条件的数据库中获取数据。

数组是这样的：

```
Array ([21] => 1,[23] => 0,[19] => 1); 
```

键是问题 ID，值是是或否。

我需要找到 value for `question_id = 21`is `1`、 value for `question_id = 23`is`0`和 value for `question_id = 19`is的电影`1`。我存储它们的方式是这样的：

![在此处输入图像描述](../Images/8da05545aa0fd2ef1224f9114ccdf623.png)

所以我的第一个想法是获取每个数据，然后将它们放入更大的数组中。如果电影出现的次数与数组中元素的数量相同，那么我认为这是一个很好的匹配。但这似乎效率低下。我宁愿只找到符合条件的电影。

既然有`movie_id`相同值的记录，有没有办法写这样的东西？：

```
foreach($array as $key=>$value){
$i++;
$this->db->where('question_id', $key);
$this->db->where('value', $value);

}
$this->db->from('movies_values');
    $query = $this->db->get();
    $res = $query->result();
    array_push($main,$res); 
```

这背后的想法是创建所有`WHERE`s 的循环。然后使用那些 where 值运行查询。这似乎不起作用，我还能做些什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T23:25:34.670

使用 WHERE IN (array()) 怎么样？

从[CI 用户指南](http://ellislab.com/codeigniter/user-guide/database/active_record.html)：

```
$names = array('Frank', 'Todd', 'James');
$this->db->where_in('username', $names);
// Produces: WHERE username IN ('Frank', 'Todd', 'James') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T23:29:49.570

使用`where_in`列表的方法：

```
$this->db->where_in('value', $array); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T23:15:02.927

尝试这样做。

```
$where = WHERE 1
foreach($array as $key=>$value){
   $where .= " AND(question_id = $key AND value = $value)";
}

$this->db->where($where); 
```

PS。$i++ 在你的循环中到底在做什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T02:40:45.990

我认为这是正确的方法，您应该注意使用“或”而不是使用完整的“和”，因为逻辑问题不会返回任何行（我的意思是 question_id = 1 和 value = 1 和 question_id = 2 和 value = 0 我们是不一致的，因为告诉我们想要 question_id = 1 和 question_id = 2 不会匹配任何东西！，这同样适用于“值”）。

```
 $array = array(21 => 1,23 => 0,19 => 1);
        $where = array();
        foreach($array as $key => $value) {
            $where[] = "(question_id=$key and value=$value)";
        }
        var_dump($where);
        foreach ($where as $value) {
            $this->db->or_where($value);
        }
        $q = $this->db->get('movies_values')->result();
        var_dump($q);
        echo $this->db->last_query();exit; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-03T12:09:17.097

这可以在没有循环的情况下轻松完成：

```
$filter = array(21 => 1,23 => 0,19 => 1);

$values = implode(',',array_unique(array_values($filter))); // results into 0,1...
$keys   = implode(',',array_unique(array_keys($filter))); // results into 19,21,23...

$result = $this->db
              ->query("select * from movies_values
                         where 
                            question_id in(".$keys.")
                            and value in(".$values.")")
              ->result(); 
```

快乐编码---> :)

# ruby - 在ruby中使用redis pubsub实时显示？

> ID：15180333
> 
> 赞同：4
> 
> 时间：2013-03-02T22:46:54.393
> 
> 标签：ruby, redis, publish-subscribe

我有通过 http 命中传给我的数据流。我想实时更新数据。我已经开始将 HTTP 命中数据推送到 redis pubsub。现在我想向用户展示它。

我想在 redis 频道上获得一些数据后立即更新用户的屏幕。我想使用 ruby​​，因为这是我熟悉的语言。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T01:20:19.720

我会在客户端使用 Sinatra 的“流”功能和 EventSource。但是，将 IE 排除在外。

这是从[https://github.com/redis/redis-rb/blob/master/examples/pubsub.rb](https://github.com/redis/redis-rb/blob/master/examples/pubsub.rb)提取的一些主要功能的服务器端代码（另一个选项是[https://github.com/pietern/hiredis-rb](https://github.com/pietern/hiredis-rb)） ：

```
get '/the_stream', provides: 'text/event-stream' do
  stream :keep_open do |out|
    redis = Redis.new
    redis.subscribe(:channel1, :channel2) do |on|
      on.message do |channel, msg|
        out << "data: #{msg}\n\n" # This is an EventSource message
      end
    end
  end
end 
```

客户端。大多数现代浏览器都支持 EventSource，除了 IE：

```
var stream = new EventSource('/the_stream');
stream.onmessage = function(e) {
  alert("I just got this from the server: " + e.data);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T05:23:31.713

据我所知，您可以通过`Faye`查看此[链接](https://stackoverflow.com/questions/6333992/faye-or-redis-pubsub)来执行此操作

有几种方法如果您愿意，可以尝试

1.  我记得自己现在使用瘦和 sinatra 构建了一个长轮询服务器来实现这样的事情如果你希望你能做同样的事情

2.  我知道很少有[这样](https://github.com/danielwanja/redis_flex)的和[这个](https://github.com/claus/as3redis)可以用来直接连接到 redis 的 flash 客户端

3.  您可以使用 EventMachine Websocket 实现并将其与非 HTML 5 浏览器的 HTML 5 和 Flash 挂钩

4.  Websocket-Rack

其他方法你可以尝试一个建议，因为它们中的大多数都不是用 ruby​​ 编写的

1.  Juggernaut （我不认为它基于 Redis Pub-sub Thing 也曾经用于 ruby​​ 的东西，现在还不确定）

2.  [套接字.io](http://socket.io/)

3.  [Webd.is](http://webd.is/)

4.  [NULLMQ](https://github.com/progrium/nullmq)不是 redis pub sub，但这是 javascript 中的零 MQ 实现

如果你用谷歌搜索，你能找到的其他方法很少:)

希望这有帮助

# javascript - REST 方法的 URL

> ID：15180339
> 
> 赞同：1
> 
> 时间：2013-03-02T22:47:32.707
> 
> 标签：javascript, rest

我正试图以正确的方式以一种平静的方式表示以下方法......

假设我有 x 台服务器，它们运行 Windows、Linux 和 Unix。

每个服务器都可以对它们执行 ping、关闭和用户操作。

API 不了解服务器，因此请求必须提供 IP 地址以及服务器类型和操作类型（它确实知道）。

考虑到这一点，这些简单的 URL 会浮现在脑海，但一点也不平静：

```
/192.168.1.3/Linux/ping 
/192.168.1.5/windows/shutdown 
```

我应该走宁静的路线吗？或者对于一个简单的 Web API 来说，上述内容是否可行？

如果安静，它会看起来像这样吗？

```
GET /servertypes/{servertypeId}/actions/{actionId}?serverip=192.168.1.4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T23:19:45.347

这对我来说似乎更有意义：

`GET /servertypes/{servertypeId}/{serverip}/{action}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T23:46:13.583

在我看来，你应该重新考虑你的设计。

您通过将命令名称放在 URL 中来有效地覆盖 HTTP 方法的语义，这些 URL 旨在表示范围信息。`GET`请求[不应导致状态的变化](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.1.1)。忽略底层协议不被视为 RESTful。

您在此处所拥有的看起来像是一个不真正符合 REST 原则的 RPC 模型。在我看来，您正在尝试将方形钉子锤入圆孔。

您还应该问自己是否真的有必要公开底层操作系统。你想调用系统特定的命令吗？是否可以运行任何可执行文件或仅运行几个常见的可执行文件？您应该关心它是`grep`在 UNIX 机器上还是`findstr`在 Windows 机器上？客户是否关心他们使用的是 Windows 还是 Linux 机器？

You could go for a simple pattern similar to what Uzar Sajid suggested. It would probably work alright. Just don't call it RESTful cause it's not.

# java - 如何通过 TCP 套接字连接重定向进程的输入和输出？（爪哇）

> ID：15180340
> 
> 赞同：3
> 
> 时间：2013-03-02T22:47:44.943
> 
> 标签：java, sockets, tcp, process

我想知道如何通过来自服务器端的 TCP 连接重定向系统进程的输入和输出。这将导致客户端能够与所述进程进行交互。

到目前为止，我知道如何实际建立一个简单的 TCP 连接，并且可以使用`getInputStream()`and`getOutputStream()`方法获取连接套接字的输入和输出流。

我还可以使用它的and方法获取 Process 的输出和输入流（在通过`ProcessBuilder.start()`方法初始化进程之后） 。`getInputStream()``getOutputStream()`

所以我最终得到了两组输入和输出流。我想知道的是如何将Process的输出和输入流与连接socket的输出流连接起来（可能这里用错了词），这样TCP连接另一端的客户端就可以与之交互过程。

如果重要的话，我正在使用`BufferedInputStream`s 和`BufferedOutputStream`s。

非常感谢有关此问题的任何信息，谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-03-05T12:59:54.050

要将进程的输出流重定向到套接字，请尝试以下代码

```
System.setOut( new PrintStream(mySocket.getOutputStream(),true)) 
```

访问 [http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#setOut%28java.io.PrintStream%29](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#setOut%28java.io.PrintStream%29)

同样，分别探索 System.setErr() 和 System.setIn() 的错误和输入流！

# android - Button 的圆角

> ID：15180344
> 
> 赞同：0
> 
> 时间：2013-03-02T22:48:08.807
> 
> 标签：android, button

基本上，据我所知，当您为按钮添加背景颜色时，圆角元素会消失，因此基本上没有圆角。但是当我没有背景颜色时，按钮的角是圆形的。

我不明白发生了什么。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T23:02:46.203

边框是默认背景可绘制的一部分，因此如果这是您想要的，您也必须将其替换为包含边框的边框。采用默认背景资源并对其进行编辑以具有一些颜色。或者，您可以使用

```
 button = (Button) findViewById(R.id.button);
    button.getBackground().setColorFilter(color, Mode.SRC_ATOP); 
```

这可能会提供更接近您期望的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:32:24.013

```
 <?xml version="1.0" encoding="utf-8"?>
        <selector xmlns:android="http://schemas.android.com/apk/res/android" >
                <item android:state_enabled="false">
                    <shape xmlns:android="http://schemas.android.com/apk/res/android"
                        android:padding="10dp" android:shape="rectangle">
                        <solid android:color="#FFb888"/>
                        <corners android:bottomLeftRadius="15dp" android:bottomRightRadius="15dp" android:topLeftRadius="15dp" android:topRightRadius="15dp"/>
                    </shape>            
                </item>

                <item android:state_enabled="true" android:state_pressed="true">
                    <shape xmlns:android="http://schemas.android.com/apk/res/android"
                        android:padding="10dp" android:shape="rectangle">
                        <solid android:color="#FFD488"/>
                        <corners android:bottomLeftRadius="15dp" android:bottomRightRadius="15dp" android:topLeftRadius="15dp" android:topRightRadius="15dp"/>
                    </shape>            
                </item>

                <item android:state_enabled="true">
                    <shape xmlns:android="http://schemas.android.com/apk/res/android"
                        android:padding="10dp" android:shape="rectangle">
                        <solid android:color="#FF8C00"/>
                        <corners android:bottomLeftRadius="15dp" android:bottomRightRadius="15dp" android:topLeftRadius="15dp"    android:topRightRadius="15dp"/>
                    </shape>            
                </item>
        </selector>

    <Button
    android:id="@+id/btn_add_list"
    android:layout_width="125dp"
    android:layout_height="wrap_content"
    android:background="@drawable/rounded_orange_button"
    android:text="@string/action_new_list"
    android:textColor="@color/white"
    android:gravity="center"
    android:textSize="18sp"
    android:layout_marginTop="20dp"
    android:layout_marginRight="10dp"
    android:layout_alignParentRight="true"               
    android:onClick="doNewList"/> 
```

您可以将上述将成为按钮背景的 xml 文件保存在 res/drawable 文件夹中名为 rounded_orange_button.xml 的文件中。所以它将是 res/drawable/rounded_orange_button.xml。这也会在用户选择按钮时向用户提供按钮反馈，更接近于 developer.android.com 的设计指南，但这是您的偏好。给猫剥皮的方法有一百万种。然后通过第二个示例引用您在 your_layout.xml 文件中的可绘制文件夹中创建的内容。颜色值是可选的，如果需要，也可以从 res/values/colors.xml 中的另一个资源文件中设置。将 res/values/strings.xml 用于您希望在按钮内显示的任何字符串。希望这可以帮助。此外，按钮上的曲线量可以通过播放中的半径值来调整

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T23:00:22.567

按钮的背景将为您提供方角。对于一个漂亮的自定义背景，我建议制作背景图像并用作按钮的背景或 src。所以你的 xml 看起来像：

```
android:src="@drawable/mybuttonimage"
android:bacgkround="@null" 
```

或者

```
android:background="@drawable/mybuttonimage" 
```

我会测试两者，因为它们可以以不同的方式拉伸您的图像。

另一种选择是在 res/drawable 文件夹中创建一个形状。

```
<?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android">
        <solid android:color="#33DDFF" />
        <corners android:radius="4dp" />
    </shape> 
```

# c++ - 最快的“for”循环

> ID：15180346
> 
> 赞同：-2
> 
> 时间：2013-03-02T22:48:21.713
> 
> 标签：c++, performance, loops, for-loop, struct

假设我们有这个结构

```
struct structure
{
    type element;
    int size;
} 
```

我们是主要的，我们想要迭代一些东西。

是不是更快

```
for ( int i = 0; i < structure.size; ++i ) 
```

或者

```
int size = structure.size;
for ( int i = 0; i < size; ++i ) 
```

?

是否更重视第一种方法中对结构的连续绑定或额外的内存空间，以及在方法 n.2 的第一行中创建第一个变量所花费的时间？

我看不出他们两个之间有任何其他区别，所以如果你这样做，请分享！

编辑：我编辑了这个问题，所以现在简洁、简单、容易回答。请重新考虑你会给它的投票。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T22:55:33.403

可能有充分的理由选择其中一个。如果第一个示例中循环的内容改变了 , 的值`structure.size`，`i`将持续检查当前值。但是，在您的第二选择中，`size`不会像原来那样改变`structure.size`。你想要哪一个取决于问题。但是，我可能会`size`改为被调用`initialSize`。

如果不是这种情况，您应该停止考虑这种次要的“优化”，而应该考虑什么是最易读的。我更喜欢第一个选择，因为它不会引入不必要的变量名。当你有两段代码做同样的事情时，相信编译器会找出最佳的方式来做这件事。告诉编译器你想让你的程序做什么是你的*工作。**编译器*的工作是尽其所能做到这一点。

当且仅当您通过*测量*确定这是一项必要的优化（我无法想象它会永远如此），然后您才应该选择测量速度最快的优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T22:53:26.980

您应该允许编译器进行这样的微优化。编写可读的代码，使其工作，然后如果它运行缓慢，则对其进行分析，并在真正需要的地方进行优化。

尽管在循环内调用函数的情况下，可以修改此结构并且编译器无法访问它的实现第二个变体可能会有所帮助，因为您向编译器提示它不需要从内存中重新加载 structure.size。我建议使用 const：

```
const int size = structure.size;
for ( int i = 0; i < size; ++i ) {
   somefunc( &structure );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T22:55:05.857

编译后的代码不太可能与此有任何实际差异，除非它真的是一个具有真正垃圾优化的古老编译器。gcc、clang、MSVC 或英特尔的 C++ 编译器之类的任何东西都会为这些场景生成完全相同的代码。

当然，如果你在循环的条件内开始调用一个函数，而函数处理的数据被循环修改了，例如

```
std::string str;

cin >> str;
for(int i = 0; i < str.size(); i++)
{
    if (str[i] > 'a') 
       str+= 'B';
} 
```

然后我们有一个不同的故事......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T22:56:32.307

我不知道你对**编译**了解多少，但是在编译器的各个**阶段中**，有一个阶段叫做**代码优化**，它试图改进中间代码*（通过执行各种优化技术，如死代码消除、循环转换等）*，以便可以生成运行速度更快的机器代码。

所以，实际上你的编译器会照顾你的头痛，我怀疑你会注意到任何性能问题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-02T23:03:33.240

在您的第一种方法中，如果*结构*是引用或成员变量，它将无法正确存储到 CPU 缓存中，因为无法判断它是否在此块之外更改。

在您的第二种方法中，如*size*是当前代码块的局部变量，因此它将正确存储在缓存中。

因此，尽管创建了一个新变量，但第二种方法应该更快。

有关更完整的说明，请参阅[Load-Hit-Store 。](http://alex-simon.blogspot.be/2010/04/load-hit-store.html)

# java - Java Object 列出优缺点

> ID：15180351
> 
> 赞同：0
> 
> 时间：2013-03-02T22:48:58.213
> 
> 标签：java, object, casting

我正在用 Java 创建这个游戏，并且我正在使用优先级队列通过他们的 Y 值来渲染我的敌人。但我想对敌人对象以外的其他类型的对象进行排序。由于 java 中的所有对象都继承自 Object 类，所以我想我只是制作 Object 类型的队列并类型转换敌人。所以我想知道这样做是否有任何主要缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T23:17:27.473

创建自定义超类的队列而不是依赖于`Object`所有类的通用祖父母有几个优点。其中一些包括

1.  您不必使用任何强制转换来访问队列的元素。

2.  编译器会为您找到错误。示例包括尝试添加对稍后无法转换为您期望的类型的队列的引用。

您所询问的想法包含在任何好的 Java 文本中。我强烈建议您做一些阅读和/或在线研究以了解有关此主题的更多详细信息。

# java - 尝试通过正则表达式删除 css 规则

> ID：15180356
> 
> 赞同：0
> 
> 时间：2013-03-02T22:49:47.333
> 
> 标签：java, regex

我收到电子邮件并试图在 div 的页面上显示它们。但是我收到的邮件包含 body css 之类的`body{background-color: #444}`让我的页面看起来很奇怪。我正在尝试`body`从 css 中删除规则。我使用 jsoup 得到了样式标签 html，唯一的问题是如何通过正则表达式删除规则？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T22:53:36.557

试试这个：

```
String withoutBody = text.replaceAll("body\\s*\\{.*?\\}", ""); 
```

笔记;

*   你必须逃避`{}`字符
*   在java中你也必须转义反斜杠，这就是为什么它们加倍
*   `?`in使`.*?`匹配非贪婪，这意味着它不会与`}`body CSS 标记之后的另一个匹配

# javascript - Javascript 这不是指骨干模型中的当前对象

> ID：15180359
> 
> 赞同：0
> 
> 时间：2013-03-02T22:50:08.030
> 
> 标签：javascript, backbone.js, model, scope, this

我有一个树状的主干模型，例如：

```
var Leaf = Backbone.Model.extend({
    urlRoot: "tests.json",
    initialize: function() {
        if (Array.isArray(this.get('children'))) {
            var childTree = new Tree();
            childTree.on("add",this.addChild);
            childTree.add(this.get('children'));
            this.set({children: childTree});
        }
    },

    addChild : function(child){
        console.log(this);console.log(child);
    },

});

var Tree = Backbone.Collection.extend({
    model: Leaf,
    url: "tests.json",
}); 
```

`addChild`为`childTree`在初始化方法中添加的每个元素调用。但是在`addChild`方法内部，`this`指的是`childTree`集合而不是模型...我对javascript比较缺乏经验，对我来说根本没有意义...这是正确的行为，我该如何绑定监听器到模型里面`addChild`？

JSON类似于：

```
[{
    "name":"root",
    "children":[
        {
            "name":"inner",
            "children":[{
                "name":"innerinner",
                "attr":{"class":""},
                "checked":true,
                "locked":true,
                "children":[]
            }]
     }]
}] 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T22:55:04.790

尝试

```
childTree.on("add", _.bind(this.addChild, this)); 
```

# windows-phone-8 - wp8 LonglistSelector AnimateTo

> ID：15180360
> 
> 赞同：4
> 
> 时间：2013-03-02T22:50:12.800
> 
> 标签：windows-phone-8, longlistselector

我想使用动画滚动到 WP8 中我的 longlistselector 上的最后一项。我可以看到在 wp7 中，LongListSelector 有一个 AnimateTo 方法。现在它不再。关于如何为滚动设置动画的任何建议？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T23:14:09.567

由于新的 LongListSelector 的实现方式，这目前是不可能的。如果你真的需要这个动画，你应该把你的自定义内容放在一个 ScrollViewer 中（注意这样做会失去虚拟化和其他好处，所以要仔细考虑。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T16:09:05.880

使用LongListSelector 控件中提供的[ScrollTo](http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.controls.longlistselector.scrollto%28v=vs.105%29.aspx)导航到任何项目。

# c# - nhibernate连接字符串集中策略

> ID：15180365
> 
> 赞同：0
> 
> 时间：2013-03-02T22:51:10.373
> 
> 标签：c#, visual-studio, nhibernate, connection-string

我们有一个大型的 VS 解决方案，由代表各种模型、服务和表示层的许多项目组成。

目前，主数据库的连接字符串分布在整个解决方案中。在 Web 前端，它包含在 web.config 文件中。数据初始化和 Web 表单应用程序将其包含在单独的 nhibernate.config 文件中。

有没有更好的方法来管理连接字符串？

我在想，如果它以某种方式集中在一个点上，那么它会更容易管理和更新，而不是让它遍布整个地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T22:59:36.933

如果打算在解决方案中只有一个地方需要指定连接字符串，那么以下应该可以工作。

将连接字符串部分拆分为一个单独的文件，并在您需要使用的配置文件中引用它

```
<connectionStrings configSource="connectionStrings.config"/> 
```

现在将 connectionStrings.config 文件放在一个公共位置（可能是解决方案项）。将其作为链接添加到需要它的每个项目，使用[`Add Existing Item -> Add as Link`](http://msdn.microsoft.com/en-us/library/9f4t9t92%28v=vs.80%29.aspx).

因为所有项目现在都有一个到一个 connectionStrings.config 文件的链接，所以对该文件的任何更改都应该传播到解决方案中每个项目中的链接项。

# java - 映射大小大于分配的内存

> ID：15180369
> 
> 赞同：0
> 
> 时间：2013-03-02T22:51:29.223
> 
> 标签：java, memory, map, size, out-of-memory

我有 8GB 内存。我使用设置java堆大小

```
-Xmx7000m 
```

比如说，我有一个 12 GB 的文件作为输入。我阅读了文件并将每个单词放在一个映射中，其中每个键的值是单词的频率。在大多数单词都是唯一的假设下，映射大小会增长大于我分配的内存大小吗？

如果不是，这个错误背后的可能原因是什么？

```
Exception in thread "Thread-0" java.lang.OutOfMemoryError: GC overhead limit exceeded
    at java.lang.AbstractStringBuilder.<init>(Unknown Source)
    at java.lang.StringBuilder.<init>(Unknown Source)
    at com.test.assignment2.WordCountJ.startCounting(WordCountJ.java:63)
    at com.test.assignment2.WordCountJ.prepareToCount(WordCountJ.java:35)
    at com.test.assignment2.WordCountJ.run(WordCountJ.java:23)
    at java.lang.Thread.run(Unknown Source) 
```

# database - Datagridview Cellclick 事件

> ID：15180370
> 
> 赞同：0
> 
> 时间：2013-03-02T22:51:29.600
> 
> 标签：database, vb.net, visual-studio-2010

我正在使用 VB 2010。我的`StudentsDatagriview`表格上有一个。

当用户单击列标题以更改数据类型时，该`StudentsDataGridView_CellClick`事件也会触发。

在`StudentsDataGridView_CellClick`事件中，我有很多代码要完成，所以我只希望它们在用户单击单元格时完成，而不是列标题。你有什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:22:10.583

你可以使用`StudentsDataGridView_CellContentClick`事件，伙计。

# facebook - 在本机桌面应用程序中使用 Facebook 登录

> ID：15180374
> 
> 赞同：5
> 
> 时间：2013-03-02T22:51:47.683
> 
> 标签：facebook, authentication, login, native, desktop

我正在编写一个 VC++ 应用程序，我想允许用户通过 Facebook 登录。查看文档，看起来它们只支持服务器、JavaScript 和本地移动客户端上的 php。

现在我想做的是在应用程序中打开一个浏览器窗口，让用户进行身份验证，然后获取身份验证令牌来进行本机应用程序调用。

我正在考虑的另一件事是让用户在我的应用程序中输入 Facebook 用户名和密码，然后直接使用它，但我不确定这是否允许。

如何通过 Facebook 验证桌面应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-20T10:06:49.577

> 现在我想做的是在应用程序中打开一个浏览器窗口，让用户进行身份验证，然后获取身份验证令牌来进行本机应用程序调用。

实际上，您走在正确的轨道上：Facebook 为您提供了所谓的“[手动流程](https://developers.facebook.com/docs/facebook-login/manually-build-a-login-flow/v2.3)”。

因此，这就是您在应用程序中使用 Facebook 验证用户的方式，分三个步骤：

# 步骤1

当用户应该登录 Facebook 时，打开嵌入式浏览器并指向这个 url：

```
https://www.facebook.com/dialog/oauth?client_id={app-id}&display=popup&redirect_uri=https://www.facebook.com/connect/login_success.html 
```

这里需要注意三点：

1.  当然，您需要替换`{app-id}`为您的应用程序的 id。
2.  使用桌面应用程序时**必须**将redirect_uri设置为（这是您的情况）。`https://www.facebook.com/connect/login_success.html`
3.  您还可以指定其他参数，例如，如果您需要向用户请求扩展权限（`publish_actions`等）[。](https://developers.facebook.com/docs/facebook-login/permissions#reference-extended)有关更多信息，请参阅可选参数的[完整列表](https://developers.facebook.com/docs/facebook-login/manually-build-a-login-flow#login)。

# 第2步

确保您在应用的高级设置中启用了以下开关：

![本机或桌面应用程序和嵌入式应用程序密钥](../Images/7bad0ea091046745e921163cc5697eb5.png) ![OAuth 设置](../Images/8f5a6b28621ed0c1c28d5bbff9e942bd.png)

出于安全原因，您应该`https://www.facebook.com/connect/login_success.html`在“有效的 OAuth 重定向 URIs”下输入，但它在没有明确设置的情况下对我有用。

# 第 3 步

现在，Facebook 服务器的重定向应该将浏览器窗口从上方导航到重定向 uri。它还将在 uri 的片段中包含访问令牌，如下所示：

```
https://www.facebook.com/connect/login_success.html#access_token=ACCESS_TOKEN... 
```

使用`ACCESS_TOKEN`以便对 Facebook API 进行任何后续调用 - 等等！

# java - Sendmail 无法打开和加载邮件服务器属性文件

> ID：15180379
> 
> 赞同：1
> 
> 时间：2013-03-02T22:52:14.237
> 
> 标签：java, jakarta-mail, sendmail

我试图在我的应用程序 java 中创建一个 EmailSender

我为电子邮件制作了我的框架，我用谷歌搜索了一些可以帮助我的例子，

所以我发现这个教程非常有用 [http://www.javapractices.com/topic/TopicAction.do?Id=144](http://www.javapractices.com/topic/TopicAction.do?Id=144)

但我不明白这个配置是什么意思

```
# Configuration file for javax.mail 
# If a value for an item is not provided, then 
# system defaults will be used. These items can 
# also be set in code.

# Host whose mail services will be used 
# (Default value : localhost) 
mail.host=mail.blah.com

# Return address to appear on emails 
# (Default value : username@host) 
mail.from=webmaster@blah.net

# Other possible items include: 
# mail.user= 
# mail.store.protocol= 
# mail.transport.protocol= 
# mail.smtp.host= 
# mail.smtp.user= 
# mail.debug= 
```

运行后出现此错误，

```
Cannot open and load mail server properties file.
Cannot send email. javax.mail.MessagingException: Could not connect to SMTP host: localhost, port: 25;
  nested exception is:
    java.net.ConnectException: Connection refused: connect 
```

帮助，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T23:13:46.240

1.  关于异常：您需要确保在 localhost:25 上设置了 SMTP 服务器；

如果应用程序在生产环境（或集成测试环境）上运行，这是有道理的，它自己设置了 SMTP。如果您的应用程序在您的本地计算机上运行是没有意义的，因为很可能没有 SMTP 服务器。

因此，如果您在本地测试电子邮件功能，您需要确保 SMTP 配置了正确的主机和端口。做一个谷歌搜索，你可以找到一些公共 SMTP 服务器提供商的详细信息。

1.  [关于这些配置详细信息：您可以在http://javamail.kenai.com/nonav/javadocs/com/sun/mail/smtp/package-summary.html](http://javamail.kenai.com/nonav/javadocs/com/sun/mail/smtp/package-summary.html)找到所有 javamail 属性详细信息

# asp.net - 如何在两个不同的列表框中选择相同的项目

> ID：15180386
> 
> 赞同：0
> 
> 时间：2013-03-02T22:52:47.277
> 
> 标签：asp.net, listbox, selectedvalue, selectedindexchanged

我在 asp.net 中创建一个网站，我有 2 个列表框：

```
lbxplayer1 and lbxplayer2 
```

它们都填充了相同数量的值，我希望这样当单击其中一个列表时，另一个列表将选择相同的项目/索引。

我该怎么做呢？我假设代码将在 lbxPlayer1_SelectedIndexChanged 事件中？

因此，为了建立我想要做的事情，这里有一个例子： lbxplayer1 有这些值 "bob" "jack" "Fred" lbxplayer2 有这些值 "dave" "Brian" "lee"

当我单击“jack”时，我希望也选择“Brian”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T08:10:22.423

我不确定你是如何填充你的盒子的，我的意思是手动或从数据库表。您需要类似值的 ID，假设我们有 lstBox1 和 lstBox2，我将在页面加载时填充数据，并为 selectedindexchanged 编写代码：

```
 protected void Page_Load(object sender, EventArgs e)
{
    //disable code on postback
    if (IsPostBack) return;

    //creating first list items
    ListItem lst11 = new ListItem("Bob","1");
    ListItem lst12 = new ListItem("Jack", "2");
    ListItem lst13 = new ListItem("Fred", "3");

    //populating first list items
    lstBox1.Items.Add(lst11);
    lstBox1.Items.Add(lst12);
    lstBox1.Items.Add(lst13);

    //creating second list items
    ListItem lst21 = new ListItem("Dave", "1");
    ListItem lst22 = new ListItem("Brian", "2");
    ListItem lst23 = new ListItem("Lee", "3");

    //populating second list items
    lstBox2.Items.Add(lst21);
    lstBox2.Items.Add(lst22);
    lstBox2.Items.Add(lst23);
}
protected void lstBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    lstBox2.SelectedValue = lstBox1.SelectedValue;
}
protected void lstBox2_SelectedIndexChanged(object sender, EventArgs e)
{
    lstBox1.SelectedValue = lstBox2.SelectedValue;
} 
```

# c# - 如果导航属性名称与属性类型不同，如何执行 NHibernate 多对一/一对多外键？

> ID：15180387
> 
> 赞同：0
> 
> 时间：2013-03-02T22:53:03.187
> 
> 标签：c#, .net, nhibernate, fluent-nhibernate

我将 NHibernate/FluentNhibernate 与 AutoMapping 配置一起使用，并且在某些关系的外键方面遇到了麻烦。尤其是那些导航属性名称与其指向的类型名称不同的地方：

```
public class Country       
{
    public virtual string Code { get; set; }

    public virtual string Name { get; set; }

    public virtual Currency DefaultCurrency { get; set; }
}

public class Currency
{
    public virtual string Code { get; set; }

    public virtual decimal Rate { get; set; }

    public virtual IList<Country> Countries { get; set; }     
} 
```

在导航属性名称与名称类型`DefaultCurrency`不同的国家实体的情况下。`Currency`NHibernate 的自动映射会猜测 Country 表将具有以下外键：

*   `DefaultCurrency_id`: 对应的关系`Country.Currency`

*   `Currency_id`: 对应的关系`Currency.Countries`

如何告诉自动映射关系`Currency.Countries`可以用`DefaultCurrency_id`键来表示，导致只有 Country 表的一个键是外来的：

*   `DefaultCurrency_id`: 对应于和的`Country.Currency`关系`Currency.Countries`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:43:01.120

您可以在映射中指定所需的任何列名。

供参考：

```
References(x => x.Foo, "MyFooId") 
```

对于有很多：

```
HasMany(x => x.Foos)
    .KeyColumn("MyFooId") 
```

对于多对多：

```
HasManyToMany(x => x.Foos)
    .ChildKeyColumn("MyFooId")
    .ParentKeyColumn("MyFooId") 
```

您还可以使用约定，例如：

```
public class HasManyConventions : IHasManyConvention
{
    public void Apply(IOneToManyCollectionInstance target)
    {
        target.Key.Column(target.EntityType.Name + "Id");
    }
} 
```

# python-2.7 - 在开始监听 ServerFactory 之前发送数据扭曲

> ID：15180391
> 
> 赞同：1
> 
> 时间：2013-03-02T22:53:54.427
> 
> 标签：python-2.7, twisted

我正在twisted上建立一个服务器群。我有这个示例代码：

```
class MyHandler(basic.LineReceiver):
    def lineReceived(self, line):
      self.factory.sendLine("Welcome!")
    def makeConnection(self, transport):
      # what should go in here?

factory = protocol.ServerFactory()
factory.protocol = MyHandler
application = service.Application("My server")
internet.TCPServer(3030, factory).setServiceParent(application) 
```

由于它是一个服务器群，我需要与已经在运行的服务器（比如 2.2.2.2，端口 3032）建立连接，并向他们发送一些控制信息，让他们知道有一个新服务器正在侦听。
我的理解是我必须使用我将要监听的套接字来发送此信息，以便其他服务器可以使用它来发回数据包。

我想我可以覆盖从 BaseProtocol 继承的 makeConnection 方法（在服务器开始监听之前调用它）。
但是我必须在该方法中做什么才能实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:18:43.407

首先，Twisted 没有“套接字”。底层实现当然是 TCP 套接字，但是从 Twisted 和 s 和 s 的角度来说`IProtocol`可以`ITransport`减轻`IListeningPort`很多混乱。

然而，你很困惑。`makeConnection`是 on 的一个方法，在*连接*到侦听套接字`IProtocol`之前不会创建任何协议。您不能将数据发送到“正在侦听的套接字”（这由接口明确，它没有这样做的方法），只能发送到“连接的套接字”，或者.*`IListeningPort``ITransport`*

 *因此，您的代码示例太少了，无法提供任何有用的建议。*

# java - 生成没有图像的高度图

> ID：15180392
> 
> 赞同：1
> 
> 时间：2013-03-02T22:54:02.993
> 
> 标签：java, maps, terrain, game-development, heightmap

我想制作一个世界生成器，以便每次加载它时，它都会生成一个新的高度图。为此，我使用了一个 2D 整数数组。尺寸是 x、z 和高度 (y)。

是否有一些简单的生成算法可以随机化地形？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T09:13:17.657

[这](http://freespace.virgin.net/hugo.elias/models/m_perlin.htm)可能是描述 Perlin 噪声实现的最著名的页面——它有你所需要的一切，你只需要花点力气去理解它。

如果您使用 Java 并且想要即用型解决方案，您还可以使用[Java3D](http://code.j3d.org/javadoc/org/j3d/texture/procedural/PerlinNoiseGenerator.html)中实现的噪声生成器。[网络](http://hg.postspectacular.com/toxiclibs/src/b1955d9a378f/src.core/toxi/math/noise/PerlinNoise.java)上还有更多的 Perlin 噪声实现。

我个人更喜欢[菱形算法](http://gameprogrammer.com/fractal.html)而不是 Perlin 噪声。它倾向于产生较少的轴向偏差噪声（地形特征可疑地平行于任一主轴，从而产生视觉上分散注意力的元素）。

# android - GTAB 拒绝访问所有应用程序数据库

> ID：15180393
> 
> 赞同：0
> 
> 时间：2013-03-02T22:54:05.940
> 
> 标签：android, database, sqlite

我有一个全新的 GTAB (Android)，它运行良好，但在我使用 anMonay 时突然重启，这是一个非常好的金融组织应用程序。

直到我想观察到我在 NAND 闪存中有足够的空间，大约 100 MB。此存储用于将应用程序的数据库保存在“/data”目录下。我想观察我的ROM是原始的，android版本是2.2。

所以重启后，所有有效使用 SQLite 的应用程序都停止工作了。每个人都提供大量日志，指出这个问题涉及的不是那么独特

# App1 ) anMoney

> E/ApplicationContext（1933）：无法将文件 /data/data/com.zvasvari.anmoneyp/shared_prefs/com.zvasvari.anmoneyp_preferences.xml 重命名为备份文件 /data/data/com.zvasvari.anmoneyp/shared_prefs/com。 zvasvari.anmoneyp_preferences.xml.bak E/ApplicationContext（1933）：无法将文件 /data/data/com.zvasvari.anmoneyp/shared_prefs/com.zvasvari.anmoneyp_preferences.xml 重命名为备份文件 /data/data/com.zvasvari .anmoneyp/shared_prefs/com.zvasvari.anmoneyp_preferences.xml.bak
> 
> I/Database(1933): sqlite 返回: error code = 14, msg = cannot open file at source line 25467 E/Database(1933): sqlite3_open_v2("/data/data/com.zvasvari.anmoneyp/databases/My Book" , &handle, 6, NULL) 失败 V/com.zvasvari.anmoneyp(1933): com.zvasvari.anmoneyp.database.az: android.database.sqlite.SQLiteException: 无法打开数据库文件 V/com.zvasvari.anmoneyp( 1933）：在 com.zvasvari.anmoneyp.database.sql.aaa（未知来源）V/com.zvasvari.anmoneyp（1933）：在 com.zvasvari.anmoneyp.database.sql.sa（未知来源）V/com。 zvasvari.anmoneyp（1933）：在 com.zvasvari.anmoneyp.app.book.atb（来源不明） V/com.zvasvari.anmoneyp（1933）：在 com.zvasvari.anmoneyp.app.book.atdoInBackground（来源不明） V/com.zvasvari.anmoneyp(1933): 在 android.os.AsyncTask$2.call(AsyncTask.java:185) V/com.zvasvari.anmoneyp(1933):在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) V/com.zvasvari.anmoneyp(1933): 在 java.util.concurrent.FutureTask.run(FutureTask.java:137) V/com .zvasvari.anmoneyp(1933)：在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068) V/com.zvasvari.anmoneyp(1933)：在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor .java:561) V/com.zvasvari.anmoneyp(1933): 在 java.lang.Thread.run(Thread.java:1096) V/com.zvasvari.anmoneyp(1933): 引起：android.database.sqlite .SQLiteException: 无法打开数据库文件 V/com.zvasvari.anmoneyp(1933): at android.database.sqlite.SQLiteDatabase.dbopen(Native Method) V/com.zvasvari.anmoneyp(1933): at android.database.sqlite .SQLiteDatabase.(SQLiteDatabase.java:1812) V/com.zvasvari.anmoneyp(1933)：在 android.database.sqlite。SQLiteDatabase.openDatabase(SQLiteDatabase.java:817) V/com.zvasvari.anmoneyp(1933): 在 android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:851) V/com.zvasvari.anmoneyp(1933): 在android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:844) V/com.zvasvari.anmoneyp(1933): 在 android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:540) V/com.zvasvari.anmoneyp( 1933): 在 android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203) V/com.zvasvari.anmoneyp(1933): ... 10 更多zvasvari.anmoneyp(1933): 在 android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:540) V/com.zvasvari.anmoneyp(1933): 在 android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203) V/ com.zvasvari.anmoneyp（1933 年）：... 10 更多zvasvari.anmoneyp(1933): 在 android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:540) V/com.zvasvari.anmoneyp(1933): 在 android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203) V/ com.zvasvari.anmoneyp（1933 年）：... 10 更多

# 应用 2) 电池小部件

> E/ApplicationContext（2674）：无法将文件 /data/data/com.elvison.batterywidget/shared_prefs/com.elvison.batterywidget_preferences.xml 重命名为备份文件 /data/data/com.elvison.batterywidget/shared_prefs/com。 elvison.batterywidget_preferences.xml.bak E/ApplicationContext（2674）：无法将文件 /data/data/com.elvison.batterywidget/shared_prefs/_has_set_default_values.xml 重命名为备份文件 /data/data/com.elvison.batterywidget/shared_prefs /_has_set_default_values.xml.bak I/Database(2674): sqlite 返回: 错误代码 = 14, msg = 无法在源代码行 25467 E/Database(2674) 打开文件: sqlite3_open_v2("/data/data/com.elvison.batterywidget /databases/alarms.db", &handle, 6, NULL) 失败

为了让事情变得更有趣，我购买了一个名为 SQLite Editor 的 Andoid 应用程序，并打开了上面给出的 3 个单独的基础。所有 3 都完好无损，没有出现数据丢失或损坏。

有什么问题？任何人都可以指出我发生了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:13:30.940

这被列为[Android 错误跟踪器](https://code.google.com/p/android/issues/detail?id=14359)上的错误。看起来它已在更高版本的 Android 上得到修复，尽管这可能对您没有多大帮助。

如果它不会给您带来太多问题（您说设备是全新的......）您可以尝试恢复出厂设置，然后按照线程中的说明重新安装。显然，尽可能先备份您的数据。

# python - 字符编码错误：UnicodeEncodeError：'charmap'编解码器无法在位置 Y 编码字符 X：字符映射到

> ID：15180396
> 
> 赞同：4
> 
> 时间：2013-03-02T22:54:41.517
> 
> 标签：python, python-3.x, beautifulsoup, httplib2

我正在尝试使用 Python 3.3、httplib2 和 beautifulsoup4 抓取 yahoo Finance 网页以获取股票价格数据。这是代码：

```
def getData (symbol = 'GOOG', period = 'm'):
    baseUrl = 'http://finance.yahoo.com/q/hp?s='
    url = baseUrl + symbol + '&g=' + period
    h = httplib2.Http('.cache')
    response, content = h.request(url)
    soup = BeautifulSoup(content)
    print(soup.prettify()) 

getData() 
```

我得到以下错误跟踪：

```
File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/encodings/mac_roman.py", line 19, in encode
return codecs.charmap_encode(input,self.errors,encoding_table)[0]
UnicodeEncodeError: 'charmap' codec can't encode character '\xd7' in position 11875: character maps to <undefined> 
```

我是 python 和库的新手，非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:54:00.130

这是由于您的控制台的编码。

根据您使用的控制台（Windows、Mac、Linux），控制台正在尝试显示它无法识别的字符，因此无法打印到屏幕上。

您可以尝试将输出字符串转换为控制台的编码。

我发现一种简单的方法是将您的数据转换为字符串，并且打印效果很好。

# android - 如何将字符串与图像连接起来

> ID：15180398
> 
> 赞同：1
> 
> 时间：2013-03-02T22:54:51.533
> 
> 标签：android, user-input, android-image

让我解释一下我的意图。我的可绘制资源中有很多图像，并且有与它们相关联的唯一名称。我想获取用户字符串输入并与单击按钮时用户查看的字符串进行比较。是否有可能将字符串描述添加到 imageview 以便与用户输入进行比较？我希望我能清楚地解释我的意图。而且如果两个字符串不相等，我想显示反馈，反之亦然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T23:14:48.327

不确定我是否真的遵循您的意图，但是...如果您创建一个包含每个描述的枚举，您可以轻松地将描述与输入相匹配。

```
public enum Pic {
 PIC1(R.drawable.example,"This is a description"),
 ....,
 ....;

 private int resource;
 private String description;
 private Pic(int resource, String description){ ... this.desc = . desc etc};

 public boolean isCorrect(String input){
 return input.equals(description);
} 
```

保留对您在图像视图中使用的实例的引用，使用用户输入对其调用 isCorrect() 并相应地对反馈做出反应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T23:23:22.210

听起来你想要的是[setTag(Object tag)](http://developer.android.com/reference/android/view/View.html#setTag%28java.lang.Object%29)

# c++ - C++中与内存管理相关的查询

> ID：15180403
> 
> 赞同：2
> 
> 时间：2013-03-02T22:55:11.573
> 
> 标签：c++, pointers, free, new-operator, destructor

嗨，我有一个关于 C++ 内存管理的一般查询。只有在这个程序的帮助下，我才明白 new 用于在堆上分配内存，临时变量在堆栈上分配内存。如果我们在堆上分配内存，我们也必须手动释放它，否则会出现内存泄漏.

但是在程序中，我通过在堆上创建一个 BST 类型的新变量 temp 来更新名为 Insert 的函数中的 BST 结构对象。但是我不确定如何释放该内存。如果我在最后使用 free 命令如果我尝试再次访问它，我肯定不能在 main 中使用 free(temp)，因为它不是局部变量，所以存储在该内存中的值将会丢失主要。有人可以告诉我应该做什么。

顺便说一句，我必须提到，在不使用 free(temp) 的情况下，我的程序也可以正常工作，但是我猜内存泄漏正在发生，这很糟糕。

我也有点困惑，为什么我的程序运行时没有错误，如果我评论析构函数`~BST()`但在我取消评论时给出链接器错误。

```
#include<iostream>
#include<string>
#include<conio.h>
#include<array>
#include<stack>
#include<sstream>
#include<algorithm>
#include<vector>
#include<ctype.h>//isdigit
#include<deque>
#include<queue>
#include<map>
using namespace::std;
struct BST
{
    int data;
    BST *left;
    BST *right;
    BST(int d,struct BST* l,BST *r):data(d) , left(l) ,right(r)
    {
    }

    BST()
    {
    }
    //~BST();
};

void levelOrder(struct BST *root)
{
    struct BST *temp=NULL;
    int count =0;
    deque<struct BST*> dq;
    if(!root)
    {
        return;
    }
    dq.push_back(root);
    count=dq.size();
    while(!dq.empty())
    {
        temp=dq.front();
        cout<<temp->data<<" ";
        if(temp->left)
        {
            dq.push_back(temp->left);
        }
        if(temp->right)
        {
            dq.push_back(temp->right);
        }
        dq.pop_front();
        if(--count==0)
        {
            cout<<endl;
            count=dq.size();
        }
    }
}
void Insert(struct BST*root,int data)
{
    //struct BST temp(data,NULL,NULL);
    BST *temp = new BST(data,NULL,NULL);
    temp->data =data;
    temp->left= NULL;
    temp->right=NULL;
    if(!root)
    {
        return;
    }
    while(root)
    {
        if((root)->data >data)
        {
            (root)=(root)->left;
            if(!(root)->left)
            {
                (root)->left=temp;
                break;
            }
        }
        else
        {
            (root)=(root)->right;
            if(!(root)->right)
            {
                (root)->right=temp;
                break;
            }
        }
    }
}
int main()
{
    deque<struct BST> dq1,dq2;
    BST e(4,NULL,NULL);
    BST f(3,NULL,NULL);
    BST d(1,&f,NULL);
    BST b(2,&d,&e);
    BST c(8,NULL,NULL);
    BST a(6,&b,&c);

    levelOrder(&a);
    Insert(&a,5);
    cout<<a.left->right->right->data;
    cout<<endl;
    levelOrder(&a);
    _getch();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T23:06:59.990

首先，在 C++ 中，您通常应该使用`new`and `delete`（它们称为 ctors/dtors 等）。对于数组，使用`delete[]`. `new`/与/`delete`不兼容。`malloc``free`

我猜BST是一个二叉搜索树。所以你有一个动态分配的内存树。

您必须释放整棵树，这意味着您也应该按顺序进行操作，以免出现悬空指针。

通过确保 BST 节点始终释放其子节点，可以显着降低复杂性。然后当你删除根节点时，它会递归地删除所有其他节点。

在我看来，最简单的方法是使用智能指针，如`shared_ptr<T>`, `unique_ptr<T>`or `auto_ptr`（最后一个有警告，但我不会在这里解决它们。）

然后结构将如下所示：

```
struct BST
{
  /* ctor, dtor omitted for brevity. */

  std::unique_ptr<BST> left;
  std::unique_ptr<BST> right;
} 
```

您的 BST 节点超出范围，即您`delete`自己，或者它在堆栈上分配并且代码退出该块。left 和 right 的析构函数被调用，`unique_ptr`实现确保调用`delete`它存储的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T22:59:22.520

`BST *temp`在您的方法中创建的是您插入的新节点/子树，在整个树被破坏或节点在您尚未编写的某种函数中被删除之前`Insert`，您不希望它。`delete``Delete`

关于你的最后一点：

在没有析构函数的情况下运行这个特定的程序会*泄漏内存*，但不会访问任何无效的内存段，这就是它运行没有任何错误的原因。

当您取消注释代码中的析构函数*声明*时，您会收到链接器错误，因为您没有*定义*析构函数，您刚刚告诉编译器/链接器应该有一个析构函数，但没有。即使你只想要一个空的，它也必须是`~BST() {}`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T23:08:52.050

两个构造函数都应该为左右成员分配默认值，至少为NULL；不应为它们分配类之外的值。将默认参数添加到构造函数。为避免泄漏，您不应该在需要之前创建对象。或者有一个标志，最初为 false，如果您使用过它，则将其设置为 true。如果标志仍然为假，则在返回时删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T23:09:17.597

首先，您应该在 C++ 中使用`new`and`delete`进行内存管理，而不是`malloc()`and `free()`。

话虽如此，请注意您分配了另一个指针，或者`left`指向`right`最初分配给变量的内存`temp`。您的树将允许您访问分配的内存，尽管通过原始变量以外的其他`temp`变量。这意味着您可以`delete`在`BST`类中使用这些变量来记忆。通常这是在析构函数内部完成的。

请注意，您在这里管理**内存**，而不是**变量**。让我们用一个简单的例子来看看区别：

```
int main() {
    int* intPtr = new int;
    int* temp = intPtr;

    delete temp;
    temp = NULL;
} 
```

如您所见，此代码分配了一个内存块来存储`int`. 该内存有两个指向它的指针。您可以使用任一指针删除内存，只要您不使用两者都删除即可。当您了解内存管理时，这绝对是一种平衡行为。您必须确保所有内存都被释放，同时永远不要尝试释放相同的内存块两次。

# c++ - 错误 LNK2020：未解析的令牌 (0A000015) IID_IPropertySetStorage

> ID：15180404
> 
> 赞同：1
> 
> 时间：2013-03-02T22:55:15.320
> 
> 标签：c++, file, winapi, visual-c++

我正在尝试编辑文件的“摘要信息”。我发现以下代码可以正常工作。但是当我尝试将该代码带入我的项目时，构建在链接阶段失败。 [http://www.codeproject.com/Articles/16314/Access-the-Summary-Information-Property-Set-of-af](http://www.codeproject.com/Articles/16314/Access-the-Summary-Information-Property-Set-of-a-f)

*错误*

```
1>Linking... 
1>FileSummaryInfo.obj : error LNK2020: unresolved token (0A000015) IID_IPropertySetStorage 
1>FileSummaryInfo.obj : error LNK2001: unresolved external symbol IID_IPropertySetStorage
1>E:\software\TagMyPics\TagMyPics\Debug\TagMyPics.exe : fatal error LNK1120: 2 unresolved externals 
```

我正在开发的程序能够识别图像中的人脸。一旦将图像文件提供给程序，它就会检测面部并查找数据库以查找人名。如果名称不在数据库中，它会提示用户输入名称。然后将名称作为关键字添加到图像文件的摘要中。所以当我想找到我朋友所在的图片时，我可以很容易地按名字搜索。为此，我想编辑关键字属性。

谷歌搜索建议这可能是由于 Win32 控制台应用程序（原始）和 Win32 表单应用程序（我的版本）之间的差异。但我找不到解决方案来让它发挥作用。您能否为此提出解决方案或替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T23:17:29.003

您能否检查在标准库中不链接的选项是否已关闭（默认情况下）。确保您已包含所需的任何标头，并且您正在以 C++ 语言模式编译和链接 C++ 文件。如果一切都失败了，请尝试启动一个新项目并重新添加所有源文件。尝试此[链接中的步骤](http://support.microsoft.com/?id=814472)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T19:25:08.460

我将 'Project Property Pages' > 'Configuration Properties' > 'General' > 'Common Language Runtime Support 更改为**/clr**。早些时候它是/clr:pure。现在它可以工作了

/clr 允许同时具有托管和非托管功能。有关更多信息，请阅读：[公共语言运行时编译](http://msdn.microsoft.com/en-us/library/k8d11d4s.aspx)和[混合（本机和托管）程序集](http://msdn.microsoft.com/en-us/library/x0w2664k.aspx)

# java - 在 jar 的 Eclipse 中附加源代码

> ID：15180411
> 
> 赞同：41
> 
> 时间：2013-03-02T22:56:06.647
> 
> 标签：java, eclipse, buildpath

`Student.jar`我像这样在我`Build Path`的日食中添加了一个-

> 右键项目->BuildPath->Configure Build Path->Libraries->Add External Jars

`StudentTest`文件中有一个类命名`Student.jar`。当我在 Eclipse 中调试我的代码时，我`StudentTest`在`Student.jar`.

在那次日食之后，我像这样-

> JAR 文件`S:\some_location\Student.jar`没有源附件。您可以通过单击下面的附加源来附加源

现在我不确定我应该如何在我的 Eclipse 中附加源代码。又从哪里来？谁能逐步提供我需要做的事情。

**更新：-** 我尝试解压缩`Student.jar`并得到`Student folder`. 之后我尝试将源指向`Student folder`但我仍然无法正确查看该类以便我可以正确调试它，它显示了与上述相同的行为。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-10-31T10:14:10.387

使用[Java 源附件](http://marketplace.eclipse.org/content/java-source-attacher)！

它做了 eclipse 应该做的事情——一个右键单击上下文菜单，上面写着“附加 Java 源。

![在此处输入图像描述](../Images/a74efb1553ed2af4422f341b8610ee7e.png)

它会自动为您下载源代码并将其附加。我只访问了几个它不知道的库，当发生这种情况时，它可以让您将 url 贡献回社区，这样其他人就不会对该库有任何问题。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-02T23:08:41.703

Eclipse 显示找不到源，因为没有可用的源。您的 jar 仅具有已编译的类。

您需要从 jar 导入项目并将项目添加为依赖项。

另一个选择是去

转到 Properties (for the Project) -> Java Build Path -> Libraries ，选择您的 jar 文件并单击 source ，将有附加源和 Javadocs 的选项。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-03-02T23:06:01.457

.jar 文件通常只包含 .class 文件，而不是编译它们的 .java 文件。这就是为什么eclipse告诉你它不知道那个类的源代码。

将源“附加”到 JAR 意味着告诉 eclipse 在哪里可以找到源代码。当然，如果您不了解自己，那么该功能将无济于事。当然，您可以尝试使用谷歌搜索源代码（或检查您从何处获得 JAR 文件）。

也就是说，您不一定需要调试源。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-05-27T19:02:25.287

这对我来说适用于 Eclipse-Luna：

1.  右键单击项目下 Referenced Libraries 文件夹中的 *.jar，然后单击 Properties
2.  使用 Java Source Attachment 页面指向 Workspace 位置或指向该 jar 源代码的 External 位置。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-02T23:09:02.160

回到你添加罐子的地方。我相信它的库选项卡，我没有打开 Eclipse，但听起来不错。在您添加的 jar 文件的左侧应该有一个指向右侧的箭头，单击该箭头并展开 3 或 4 个选项，其中一个是库的源文件。单击它并单击编辑（我认为您也可以双击它）然后在硬盘上找到文件或文件夹，您可能必须单击应用或确定，您很高兴，与 javadoc 相同，我认为最后一个是本地库。如果你看不出来，我在里面的时候不会太在意。这就是你问的，对吧？

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-09-26T09:24:03.947

我知道现在已经很晚了，但它会对其他用户有所帮助，因为我们可以使用三种方式来完成工作......如下
1)1。使用
即附加源代码，右键单击项目然后属性-> Java 构建路径-> 在源选项卡中附加源代码，或者您可以删除 jar 文件并在库选项卡中附加源代码
2\. 使用 Eclipse 源分析器
在eclipse市场可以下载插件java源码分析器，用于附加开源jar文件的源代码。我们可以在安装插件后实现它，通过右键单击开源 jar 并选择附加源选项。
3.在eclipse中使用Jadclipse可以做到
最后一点，你可以使用这个插件实现反编译你的代码。它与您可以从 eclipse 市场下载插件并安装在您的 eclipse 中的方式类似。在 jadclipse 视图中，您可以看到您的 .class 文件以反编译源格式注释在这里您看不到注释和隐藏的东西

我认为在您的场景中您可以使用选项一和选项三，只有当我想要源时我更喜欢选项三代码不用于调试代码。否则我将对选项 1 进行编码，因为我已经有了可用的源代码。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-06-06T13:18:42.590

**只需从 jar 中导入代码中所需源类的包即可。**

您可以在以下位置找到 jar 的子包

> Eclipse -- YourProject --> 引用的库 --> yourJars --> 包 --> 类

就像-我`mysql connector jar`通过提供显示此语句的源文件夹的路径来解决“源附件不包含源”的问题

```
The source attachment does not contain the source for the file StatementImpl.class 
```

然后我只导入`mysql connector jar`包含所需类的包：

```
import com.mysql.jdbc.*; 
```

然后程序运行正常。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-03-16T12:20:23.647

我遇到了同样的问题并使用以下步骤解决了。转到 Windows-> 首选项-> 编辑器-> 文件关联

在这里点击 Add 然后输入 .class 点击 OK

再次点击 Add 然后输入 .classwithoughtsource 点击 OK

现在您将能够在 Windows->Preferences 的 Java 部分下看到 JadClipse 选项

请提供如下所示的 jad.exe 文件路径。

反编译器路径-C:\Users\ahr\Documents\eclipse-jee-galileo-SR2-win32\jad.exe 临时文件目录-C:\Users\ahr.net.sf.jadclipse

点击应用

现在您应该能够以正确的格式查看类文件。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-09-20T08:55:47.867

1.  [从http://java-decompiler.github.io/](http://java-decompiler.github.io/)下载 JDEclipse
2.  按照安装步骤
3.  如果仍然找不到源，请右键单击 jar 文件并从项目文件夹中选择“*附加库源*”选项，如下所示。

![下拉选项位置](../Images/5528cc827bea0d934de8daf0ed1b69cc.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-01-16T10:06:34.747

我遇到了同样的问题并通过使用以下方案解决了它。

1.  首先，我们必须确定我们想要哪个 jar 文件的源代码以及版本号。例如“Spring Core”»“4.0.6.RELEASE”

2.  打开[https://mvnrepository.com/](https://mvnrepository.com/)并搜索名称为“Spring Core”»“4.0.6.RELEASE”的文件。

3.  现在 Maven 存储库将显示该 jar 文件的详细信息。

4.  在该详细信息中有一个选项“查看全部”，只需单击该选项即可。

5.  然后我们将导航到 URL“https://repo1.maven.org/maven2/org/springframework/spring-core/4.0.6.RELEASE/”。

6.  有很多选项，所以在我们的系统中选择并下载“spring-core-4.0.6.RELEASE-sources.jar”，并在eclipse中附加相同的jar文件作为源附件。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-03-18T09:58:19.037

我使用的项目不是基于 Spring 或 Spring Boot 的应用程序。我有多个子项目，它们相互嵌套。此处显示的答案支持第一级子项目。如果我为源代码附件添加了另一个子项目，则不允许我说文件夹已存在错误。

看起来eclipse是过时的IDE。我正在使用最新版本的 Eclipse 版本 2015-2019。它正在扼杀我所有的时间。

我的意图是以调试模式运行应用程序，浏览作为外部依赖项（不可修改）添加的子项目。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-12-16T14:09:04.953

尝试删除断点。:)

# sql - 无法从两个表中获取数据

> ID：15180412
> 
> 赞同：1
> 
> 时间：2013-03-02T22:56:10.740
> 
> 标签：sql

这段代码：

```
SELECT *
FROM pc,usb
WHERE CATEGORIES like %s
    or NAMEOFTHEPRODUCTSSHORT like %s
    or NAMEOFTHEPRODUCTS like %s
    or INFOPRODUCTS like %s
    or INFOPRODUCTSPRICE like %s
    or INFOPRODUCTSPRICEOFSHIP like %s
    or INFOPRODUCTSPRICEOFALL like %s
    or TABINFOPRODUCTS like %s 
```

返回此错误消息：

> where 子句中的“类别”列不明确

如何从两个表中获取数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T23:00:03.477

您的两个表都有一个名为`categories`. 你应该得到它们中的每一个，如下所示：

```
pc.CATEGORIES as pcCategories, usb.CATEGORIES as usbCategories 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T23:00:20.903

```
SELECT *
FROM pc,usb
WHERE TABLE_NAME.CATEGORIES like %s 
```

这是你应该做的事情..添加表名和列名

更加具体

```
WHERE pc.CATEGORIES like %s OR usb.CATEGORIES like %s 
```

我的建议是`table_name.column_name`使用

*   避免错误
*   更好的性能

# ruby-on-rails - 为 ActiveRecord 查询添加更多限制

> ID：15180416
> 
> 赞同：1
> 
> 时间：2013-03-02T22:56:43.133
> 
> 标签：ruby-on-rails, activerecord, rails-activerecord

我的查询是这样的：

```
@org = Org.includes(abc: [{def: :ghi}, :jkl_counts]).find(params[:id]) 
```

它有效，我在 a 中使用它`respond_to :json ... respond_with(@org)`，将它传递给 JBuilder 解析但问题是返回的 Json 将包含所有表。

我希望这样的事情能做到，但我错了，这甚至不能编译。

```
@org = Org.includes(abc: [{def: :ghi,  :order => "amount desc"}, :jkl]).find(params[:id]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T00:06:13.123

您可以尝试在 Measure 中添加 has_many 关系，如下所示：

```
has_many :ghis
has_many :highest_jkl_count_ghis, :limit => 20, :order => 'amount desc', :class_name => 'Ghi' 
```

然后，为您的 @org 实例执行

```
@org = Org.includes(abcs: [{defs: :highest_jkl_count_ghis}, :jkl]).find(params[:id]) 
```

# ruby-on-rails - 命名空间连接表引用自身

> ID：15180420
> 
> 赞同：0
> 
> 时间：2013-03-02T22:57:42.817
> 
> 标签：ruby-on-rails, activerecord, namespaces

我有以下型号：

```
class User < ActiveRecord::Base
  has_many :groups, :through => :memberships
  has_many :memberships, :class_name => "User::Group"
end

class Group < ActiveRecord::Base
  has_many :users, :through => :members
  has_many :members, :class_name => "User::Group"
end

class User::Group < ActiveRecord::Base
  belongs_to :user
  belongs_to :group
end 
```

我进行以下关联调用：

```
@user.groups 
```

`User::Group`相反，它返回一个 s 数组。我忽略了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T23:45:34.507

我将连接表的名称更改为`User::Membership`，现在一切正常。似乎在另一个模型之后命名命名空间的最后一部分会引起某种干扰，尽管我不确定为什么。有没有人有更明智的解释？

# jquery - BXSlider 中的图像偏离中心

> ID：15180421
> 
> 赞同：4
> 
> 时间：2013-03-02T22:57:44.973
> 
> 标签：jquery, css, bxslider

我正在创建一个投资组合网站，但我一直遇到轮播问题。我决定尝试 bxslider，因为我喜欢它的样式，但是我已经困扰了我一个星期了，如何让图像在视口中居中。

我设法让滑块启动并运行，但我的图像一直显示为偏离中心，好像某处有一些冲突的 CSS。图像为 800 像素 x 300 像素 - 我可以通过设置将框的宽度设置为 800 像素`slideWidth:800`，但这并不能解决问题。您可以看到字幕被切断 - 图像正在向下和向右移动。

查看[测试页面](http://filetanic.com/stackoverflow/)- 这是使用未经修改的 bxslider 副本并且没有额外的 CSS。

任何帮助将不胜感激——我相信这很简单，但我对此仍然很陌生！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-03T02:49:59.670

它们偏离中心是因为您的图像太大，而且它们是左对齐的，因此它们从它们的父项向右延伸。描述您所追求的布局，我可以提供进一步的帮助。这是一个猜测：

```
.bx-wrapper img {
    width: 720px;
    height: 230px;
}
.bx-wrapper .bx-caption {
    width: 720px;
} 
```

你也可以这样做：

```
.bx-wrapper {
    width: 880px;
}
.bx-viewport {
    height: 340px;
} 
```

根据您的评论更新：

```
.bx-viewport ul {
  margin: 0;
  padding: 0;
} 
```

# wpf - 我应该在 UI Thread 或 Task.Run 上使用 async await 来处理多个文件吗？

> ID：15180422
> 
> 赞同：1
> 
> 时间：2013-03-02T22:58:10.077
> 
> 标签：wpf, multithreading, asynchronous, async-await, .net-4.5

我正在使用 .NET 4.5 在 WPF 中编写应用程序。该应用程序允许用户选择多个文件并导入它们。发生这种情况时，应用程序将解析文本文件并将数据存储到数据库中。这些文件可能非常大，所以我希望 UI 保持响应并允许用户在发生这种情况时做其他事情。

我是异步编程的新手，想知道最好的方法是什么？根据[微软的一篇文章](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)...

> “async 和 await 关键字不会导致创建额外的线程。异步方法不需要多线程，因为异步方法不在其自己的线程上运行。该方法在当前同步上下文上运行并使用线程上的时间仅当该方法处于活动状态时。您可以使用 Task.Run 将 CPU 绑定的工作移至后台线程，但后台线程无助于等待结果可用的进程。

由于我正在处理多个文件，我会更好地为每个文件使用“Task.Run”，因为它们将在单独的线程上运行？如果不是，使用 async/await 在同一个线程上运行所有内容有什么好处？

请注意，没有其他 UI 操作（进度条 - 进度报告除外）真正关心这些文件何时完成处理，因此根据本文，使用 Task.Run 似乎对我有益。你怎么认为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T23:02:20.887

你用这些文件做什么？如果您正在做任何 CPU 密集型操作，最好将该处理移出 UI 线程。如果它真的只是 IO，那么您可以在 UI 线程中完成这一切 - 并且*仍然*使其并行。

例如：

```
private async Task ProcessAllFiles(IEnumerable<string> files)
{
    List<Task> tasks = files.Select(x => ProcessFile(x))
                            .ToList();
    await Task.WhenAll(tasks);
    textBox.Text = "Finished!";
}

private async Task ProcessFile(string file)
{
    // Do stuff here with async IO, and update the UI if you want to...
} 
```

在这里，您仍然在 UI 线程上进行所有实际处理 - 除了潜在的 IO 完成端口之外，没有单独的线程正在运行 - 但您仍然同时启动多个异步 IO 操作。

现在要考虑的另一件事是，这实际上*可能会*减慢一切。如果您在同一个物理磁盘上处理多个文件，您可能会发现，由于磁盘 IO 的性质，按顺序访问它们会更快。不过，这取决于磁盘类型（例如，SSD 与“常规”磁盘的行为不同）。

# asp.net-mvc - ASP.NET MVC Web 应用程序异常处理

> ID：15180429
> 
> 赞同：0
> 
> 时间：2013-03-02T22:59:17.870
> 
> 标签：asp.net-mvc, exception, asp.net-mvc-2, application-blocks

使用应用程序块处理 ASP.NET MVC Web 应用程序异常。

如何配置 Microsoft 应用程序块以在 .NET MVC2 Web 应用程序中将错误记录到 sql 数据库中的异常处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T04:52:23.737

你可以写自己的图书馆，但这并不容易，所以我更喜欢你使用 Elmah

我认为 elmah 很好，因为现在 588,786 已下载，因此我们可以安全使用。您可以简单地安装

PM> Install-Package elmah

> 带有初始配置的 ELMAH，可快速入门。ELMAH（错误记录模块和处理程序）是一个完全可插拔的应用程序范围的错误记录工具。它可以动态添加到正在运行的 ASP.NET Web 应用程序，甚至是一台机器上的所有 ASP.NET Web 应用程序，无需重新编译或重新部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T23:21:59.363

您可能想考虑一下 ELMAH。它比应用程序块轻得多，您可以将其用作处理错误的过滤器。

# asp.net - 在新的 MVC4 应用程序中获取 UserId (int)

> ID：15180434
> 
> 赞同：6
> 
> 时间：2013-03-02T22:59:38.230
> 
> 标签：asp.net, asp.net-mvc-4, membership

新的 MVC4 应用程序创建了 UserProfile 表：

用户 ID(int) | 用户名（nvarchar）

在控制器中：

```
 string currentUser = User.Identity.Name;  // returns UserName

  var mu1 = Membership.GetUser(); // returns null

  var mu2 = Membership.GetUser(currentUser); // returns null as well 
```

我读了很多帖子，他们都在谈论获得 Guid，我什至在用户和会员表中都没有。

有没有办法获取当前登录 User 的 UserId (int)？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T10:28:14.017

确保添加`[InitializeSimpleMembership]`到控制器的顶部，以便它通过目录`InitializeSimpleMembershipAttribute.cs`中的文件初始化简单成员资格`Filters`。

然后您可以通过几种不同的方式访问用户 ID：

```
int mu1 = (int)WebSecurity.CurrentUserId;
int mu2 = (int)Membership.GetUser().ProviderUserKey; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T23:10:15.087

您可以使用 int 获取 UserId

```
WebSecurity.GetUserId(User.Identity.Name); 
```

**附加信息：**`[InitializeSimpleMembership]`如果您使用 AccountController 以外的其他控制器，则应在控制器类之上添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T23:07:54.073

`mu1`并将`mu2`包含[`MembershipUser`](http://msdn.microsoft.com/en-us/library/system.web.security.membershipuser.aspx)用户是否已成功通过身份验证的实例。`MembershipUser`有一个包含用户标识符`ProviderUserKey`的类型属性。`object`

`Membership.GetUser()`需要为应用程序和用户进行身份验证连接 MembershipProvider；由于您看到`null`返回，这表明不满足上述条件之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-02T10:26:00.400

你可以得到用户ID

```
if (Request.IsAuthenticated)
 {
  var membership = (SimpleMembershipProvider)Membership.Provider; 
  int idUser = membership.GetUserId(User.Identity.Name);
 } 
```

# c++ - 任何想法如何将 F# 代码与本机 C++ 集成？

> ID：15180445
> 
> 赞同：6
> 
> 时间：2013-03-02T23:00:34.380
> 
> 标签：c++, .net, f#, managed

我想在本机 C++ 中使用一些 F# 代码。更准确地说，我想用 F# 编写一些数据结构，然后在我的 C++ 代码中使用它们。

我不知道如何将托管 F# 与非托管 C++ 混合使用。如何创建胶水层？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-02T23:06:57.823

一种方法是创建一个程序集，`C++/CLI`其中将是混合模式程序集，它可以引用您的`F#`程序集并同时导出本机符号，以便以后可以在本机 c++ 库中使用它们。此选项是最通用的。您可以使用此方法创建双向工作的“桥梁”。

我这样做时喜欢使用的一种方法（我这样做是为了在另一个原生 c++/mfc 应用程序中包含基于 C#、基于 Wpf 的 GUI）是创建简单的 C 绑定，如下所示：

```
//C++
void Method1() { Bridge::Method1(); }
void Method2(int param, int* nativeArray) 
{ 
    array<int>^ managedArray = marshalArray();
    Bridge::Method2(param, managedArray);
}
....

//C#
static class Bridge
{
    public static void Method1() { ... }
    public static void Method2(int param, int[] ar) { ... }
} 
```

这基本上使您可以使`C++/CLI`包装器尽可能小，将整个代码用于托管库，并允许您从 C 中使用该库，甚至可以使用`LoadLibrary()`.

不过，有些人可能会说这是一种矫枉过正（你确实写了一些管道代码两次）。

如果你想做一些疯狂的事情，你也可以尝试`F#`直接从你的库中导出单个方法，基本上使它成为一个混合代码程序集，如文章[Simple method of dll export without C/CLI中所述](http://www.codeproject.com/Articles/37675/Simple-Method-of-DLL-Export-without-C-CLI)

# symfony - Symfony2 ORM 实体，ManyToOne 双向

> ID：15180447
> 
> 赞同：3
> 
> 时间：2013-03-02T23:00:57.907
> 
> 标签：symfony, doctrine, many-to-one

我在 Symfony2 中有以下实体，一个产品实体和一个评论实体。

产品实体：

```
/**
 * @ORM\Entity
 * @ORM\Table(name="product")
 */
class Product
{
/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $id;
 /**
 * @ORM\Column(type="string", length=100)
 */
protected $name; 
```

评论实体：

```
/**
* @ORM\Entity
* @ORM\Table(name="productComment")
*/
class ProductComment
{
    /**
    * @ORM\Id
    * @ORM\Column(type="integer")
    * @ORM\GeneratedValue(strategy="AUTO")
    */
    protected $id;
    /**
    * @ORM\ManyToOne(targetEntity="Acme\ProductsBundle\Entity\Product", inversedBy="comments")
    * @ORM\JoinColumn(name="product_id", referencedColumnName="id")
    */
    protected $product;
} 
```

我的问题是我不知道如何从产品对象中获取评论。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T23:59:35.313

您必须在实体中添加一个`comments`属性：`Product`

```
/**
 * @ORM\OneToMany(targetEntity="Acme\ProductsBundle\Entity\ProductComment", mappedBy="product")
 */
private $comments; 
```

然后使用

```
$product->getComments(); 
```

# java - 我想使用用户输入的字符串 ex 的前 3 个字母。“一月”结果：“一月”

> ID：15180453
> 
> 赞同：0
> 
> 时间：2013-03-02T23:01:50.623
> 
> 标签：java, string, joptionpane

用户输入一个`JOptionPane.showInputDialog("enter month").`

结果应该只有 3 个字母`"jan"`，`"feb"`或`"mar"`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T23:03:19.200

使用`inputString = inputString.substring(0, 3);`，在哪里`inputString`输入月份。

# javascript - 如何使桌面通知保持不变？

> ID：15180454
> 
> 赞同：1
> 
> 时间：2013-03-02T23:02:04.547
> 
> 标签：javascript, google-chrome, google-chrome-extension

我有这个通知，但它只显示约 5 秒。我希望它停留更长时间/或让它停留直到我点击它。

```
chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab) {
  if ((String(tab.title).search("Sniped:"))==0){
    var notification = webkitNotifications.createNotification(
        'face.png',
        'Sniper',
        tab.title
    );
    notification.show();
 }
}); 
```

请问如何做到这一点的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T11:49:16.760

我认为使用 webkitNotifications API 是不可能的。

您可以使用 chrome.experimental.notification 中的 Rich Notification API。关于这个 API 的信息还不是很多，但谷歌发布了一个包含几个示例的短视频，可以在这里看到：[http](http://www.youtube.com/watch?v=g8fJWB2-pYk) ://www.youtube.com/watch?v=g8fJWB2-pYk 。

但是请注意，如果您决定使用 chrome.experimental 中的 API，那么您将无法在 Chrome Web Store 上发布您的应用程序。有关实验性 API 的更多信息，请访问[http://developer.chrome.com/extensions/experimental.html](http://developer.chrome.com/extensions/experimental.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T02:44:01.813

您也可以在调用函数“show()”之前执行此操作：

```
 notification.ondisplay = function(event) {
        setTimeout(function() {
            event.currentTarget.cancel();
        }, 10000);
    }; 
```

我想你知道如何使用它。

# javascript - 为什么输出未定义？

> ID：15180461
> 
> 赞同：0
> 
> 时间：2013-03-02T21:36:39.567
> 
> 标签：javascript

# 问题

在这里，我创建了

*   使用构造器的`Owner`对象
*   使用构造器的`Camera`对象

在第二个输出语句中，我希望它显示为第一个语句，但它显示为未定义。

这可能是因为我编写`summary()`方法的方式，如`this.owner`，`this.make`等。

**注意：-**第一个输出语句从构造函数外部访问变量值。但在第二个输出语句中，该`summary()`方法访问构造函数本身内部的变量。

不应该以这种方式使用 make 变量（不是参数）吗？如何在对象构造器中使用它们？

请帮助我理解这个概念。并且还请提供一些参考，我可以掌握这个概念。

**运行测试：[代码片段@CodeAcademy Workspace](http://labs.codecademy.com/hif/2#%3aworkspace)**

## 代码片段

```
//camera object contructor
function Camera(model, make, year, owner)
{
    this.make = make.toString();
    this.model = model.toString();
    this.year = parseInt(year);
    this.owner = function(){
        return (owner.fname + " " + owner.lname).toString();
    }();
    this.summary = function(){
        return this.owner + " bought a " + this.make + " " + this.model + ", released in " + this.year + ".";
    }();
}

//owner object contructor
function Owner(fname, lname){
    this.fname = fname;
    this.lname = lname;
}

//create owner
var niky = new Owner("Niky", "Bauxi");
//create camera for owner
var niky_cam = new Camera("DSLR D3100", "Nikon", 2009, niky);

console.log(niky_cam.owner + " bought a " + niky_cam.make + " " + niky_cam.model + ", released in " + niky_cam.year + ".");
console.log(niky_cam.summary); 
```

## 输出

```
Niky Bauxi bought a Nikon DSLR D3100, released in 2009.
undefined bought a undefined undefined, released in undefined. 
```

## 解决方案

在考虑了不同的答案和评论后，

解决方案 1：[CodeAcademy 工作区](http://labs.codecademy.com/hif/6#%3aworkspace)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T23:18:54.600

您正在调用IIF 中的`this.owner`,`this.make`​​ 等等来进行摘要。但是在那个IIF里面，`this`指的是window对象；不是您正在构建的所有者对象。即你试图在字符串中使用`window.owner`等`window.make`，但它们不存在。

试试这个

```
function Camera(model, make, year, owner) {
    this.make = make.toString();
    this.model = model.toString();
    this.year = parseInt(year, 10); // ALWAYS supply a radix argument!
    this.owner = (function(){
        return (owner.fname + " " + owner.lname).toString();
    }());
    var that = this;
    this.summary = (function(){
        return that.owner + " bought a " + that.make + " " + that.model + ", released in " + that.year + ".";
    }());
} 
```

但 IIF 一开始都毫无意义。你也可以这样做：

```
function Camera(model, make, year, owner) {
    this.make = make.toString();
    this.model = model.toString();
    this.year = parseInt(year, 10);
    this.owner = owner.fname + " " + owner.lname;
    this.summary = this.owner + " bought a " + this.make + " " + this.model + ", released in " + this.year + ".";
} 
```

此外，还有更好的方法来构建所有这些（参见 Benjamin Gruenbaum 的评论），但这回答了您的直接问题。

* * *

附录：您可以使用`call`or以不同的方式执行 IIF `apply`，从而传递应该在其中评估它们的上下文

```
function Camera(model, make, year, owner) {
    // ...
    this.summary = (function(){
        return this.owner + " bought a " + this.make + " " + this.model + ", released in " + this.year + ".";
    }).call(this); // explicitly pass the current context to the function
} 
```

但是，在您的情况下，所有这些都是不必要的。

# c# - Windows Azure 上每分钟或每秒视频的成本

> ID：15180463
> 
> 赞同：1
> 
> 时间：2013-03-02T23:03:49.833
> 
> 标签：c#, azure, azure-storage, azure-media-services

我将在 Azure 平台上构建一个网站，该网站使用 Windows Azure 媒体服务广泛使用视频上传。

我试图弄清楚在编码为所有支持的格式以及能够每月将视频存储在 Windows Azure 存储中之后的视频成本。例如，1 分钟的视频大小为“xMB”，在 Azure 存储中的成本为“$x”，编码为“$x”。

是否有任何地方或无论如何我可以找到这些信息？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-02T23:14:50.467

这是我前段时间与媒体服务团队讨论定价的摘录（只是我的评论）。基本上，Azure 媒体服务对于直接内容提供商（例如 Netflix 或 Hulu）更有用，在这些提供商中，您在保护内容访问权方面拥有既得利益，并且每条内容都能让您赚钱。

对于 YouTube 风格的服务，与其他编码器相比，它的竞争并不好，因为成本（当然，忽略用于实际流式传输的带宽）几乎完全取决于媒体编码器的使用。

> 以下是我根据对媒体服务定价的理解制定的定价方案。这是忽略带宽成本，只关注编码：
> 
> **对于一个 45 秒的 50MB 高清 WMV 视频**，转换为 5 比特率的 SD mp4 集（完成后约为 28MB），总共处理了 78MB 数据。所以：
> 
> **@ 1.99 美元/GB：0.155 美元。**据我所知，使用媒体编码器获取缩略图需要创建一个单独的任务，具有单独的输入资产，有效地复制输入成本只是为了获取缩略图。等待首先使用编码资产（而不是原始的 50MB 上传视频）会更便宜，另外花费约 0.056 美元， **总计约 0.21 美元**。这是假设我们在 0.5TB/mo 定价领域停留一段时间。
> 
> 相比之下，**ZenCoder 等其他服务忽略源视频，仅按每分钟输出视频收费**（低使用端每分钟 0.05 美元），多输出可享受 20% 的折扣。因此，如果我在相同的 45 秒视频上指定了五种不同比特率的输出（与 H264 Adaptive Bitrate MP4 Set SD 16x9 配置媒体服务提供的大致相同），**则成本为 0.15 美元**。
> 
> 如果我选择忽略比特率设置而只选择 480p，成本会下降，**但对于媒体服务，我仍然需要支付 0.155 美元来将源视频发送到编码器。ZenCoder 只对输出运行时收费，所以我只需支付 0.03 美元左右**。在 CPUsage 平台上还有另一个竞争对手，名为 GridVid.Me，看起来更便宜 ( [https://gridvid.me/index/more-info](https://gridvid.me/index/more-info) )。
> 
> 因此，您可以看到这两个计划如何扩展长格式视频编码；使用媒体服务，它可以随质量扩展，我非常喜欢，**但因为它对源视频收费，所以它也让我受制于人们上传到它的任何内容**。

# html - 在一个小 div 中居中一个按钮

> ID：15180465
> 
> 赞同：1
> 
> 时间：2013-03-02T23:04:12.950
> 
> 标签：html, css

我有一个高度未知的 div，尽管在这个例子中我使用的是 3px。我想使按钮居中，但它似乎总是偏移一些任意数量。一旦我知道高度，我就可以动态地做一个绝对定位技巧，但如果可能的话，我更喜欢 CSS 解决方案。

```
<div style="width: 100%; height: 3px;">      
  <div class="special">                               
    <input type="button" />                     
  </div>
</div>

div{                
  height: 100%; 
  overflow: visible;
}

.special{   
  position:relative;
  text-align: center;   
  padding: 1px;
  border: 1px solid red;
}

input{  
  height: 100%; 
  width: 100px;
  min-height: 8px;
} 
```

这个想法是，使用最小高度，按钮将均匀地溢出到 div 的顶部和底部。

[jsfiddle](http://jsfiddle.net/N7zD7/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T23:35:27.767

您可以通过执行以下操作来使其工作：

CSS：

```
div {
    height: 100%;
    overflow: visible;
}
.special {
    text-align: center;
    border: 1px solid red;
    position:relative;
}
input {
    position:absolute;
    margin-top:-4px;
    margin-bottom:-4px;
    top:0px;
    bottom:0px;
    width:100px;
    min-height:7px;
} 
```

特别注意`input`声明。而不是`height:100%`我`position:absolute`与`top:0px`and一起使用`bottom:0px`。这会将高度设置为 100%。它必须是绝对位置，以便您可以做到`margin-top:-4px`并`margin-bottom:-4px`获得重叠。您可以看到它适用于外部的任何高度`<div/>`。

下面的 JSFiddle 添加了一些控件，因此您可以更改 .special 的高度`<div/>`而无需刷新。

[http://jsfiddle.net/bmyAW/8/](http://jsfiddle.net/bmyAW/8/)

# joomla - 使用覆盖更改按钮图像

> ID：15180467
> 
> 赞同：1
> 
> 时间：2013-03-02T23:04:30.360
> 
> 标签：joomla, virtuemart

我想更改 VirtueMart 购物车视图中“立即结帐”按钮的图像。我知道图像位于`joomla_root/components/com_virtuemart/assets/images/vmgeneral/backgrounds.png`并且我可以在那里更改它。
但我担心一旦我更新 VirtueMart，这种变化会被恢复。我听说过 Joomla 中的覆盖，但我没有找到如何将它们用于图像的描述。

**编辑**
图像似乎多次用于不同的按钮。我想全部更改，所以没问题 - 但我想避免使用此图像覆盖每个文件。
这些按钮的 css 文件位于`components/com_virtuemart/assets/css/vmsite-ltr.css`. 也许这将是覆盖此文件的最佳解决方案？这应该改变每个按钮。但是我必须在哪里找到新的 css 文件和新图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T02:10:53.430

在每个模板中都有一个“模板”覆盖文件夹......通常在：

```
/templates/yourtemplate/html/ 
```

您可以简单地在其中为您希望使用的组件添加另一个文件夹，如下所示：

```
/templates/template_name/html/com_component/view_name/view_file.php 
```

您必须弄清楚 virtumart 中的哪个视图使用您的背景图像...然后在该视图中找到 php 文件并将文件完全复制到您为覆盖创建的路径中

基本上文件在

```
/templates/template/html/com_virtumart/view_name/view_file.php 
```

将覆盖正常位置的一个，例如：

```
/components/com_virtuemart/views/view/tmpl/whereve.php 
```

因此，当您更新 virtumart 并覆盖正常的安装路径时......您的覆盖文件将不会被触及！

希望有帮助

更具体地说是：

```
yoursite.com/templates/your_template/html/com_virtuemart/productdetails/default.php 
```

# asp.net - 从表单获取输入以显示在同一网页的文本框中

> ID：15180469
> 
> 赞同：1
> 
> 时间：2013-03-02T23:04:45.913
> 
> 标签：asp.net, html, vb.net

我的表单收集输入。

```
 <table>
       <tr>
         <td>First Name:</td>
         <td><asp:TextBox ID="txtFirstName" runat="server">
            </asp:TextBox>
         </td>
         <td class="style2"><asp:RequiredFieldValidator ID="rfvFirstName" 
                     runat="server" 
                     ControlToValidate="txtFirstName"
                    ErrorMessage="First Name can't be left blank" 
                    SetFocusOnError="True">*
             </asp:RequiredFieldValidator>
             <asp:DropDownList ID="DropDownList1" runat="server">
             <asp:ListItem>Business</asp:ListItem>
             <asp:ListItem>Other</asp:ListItem>
             </asp:DropDownList>
        </td>
        </tr>
        <tr>
        <td>Last Name:</td>
        <td><asp:TextBox ID="txtLastName" runat="server">
            </asp:TextBox></td>
        <td class="style2"><asp:RequiredFieldValidator 
                 ID="RequiredFieldValidator1" runat="server" 
                 ControlToValidate="txtLastName"
                 ErrorMessage="Last Name can't be left blank" 
                 SetFocusOnError="True">*
            </asp:RequiredFieldValidator>
        </td></tr>

        <tr><td>UserName:</td>
        <td><asp:TextBox ID="txtUserName" runat="server">
            </asp:TextBox>
        </td>
        <td class="style2"><asp:RequiredFieldValidator 
                 ID="rfvUserName" 
                 runat="server" 
                 ControlToValidate="txtUserName"
                 ErrorMessage="UserName can't be left blank" 
                 SetFocusOnError="True">*
            </asp:RequiredFieldValidator>
        </td></tr>

        <tr><td>Password:</td>
        <td><asp:TextBox ID="txtPwd" runat="server"
                         TextMode="Password">
            </asp:TextBox>
        </td>
        <td class="style2"><asp:RequiredFieldValidator ID="rfvPwd" 
                 runat="server" ControlToValidate="txtPwd"
                 ErrorMessage="Password can't be left blank" 
                 SetFocusOnError="True">*
           </asp:RequiredFieldValidator>
        </td></tr>

        <tr><td>Confirm Password:</td>
        <td><asp:TextBox ID="txtRePwd" runat="server"
                         TextMode="Password">
            </asp:TextBox>
        </td>
        <td class="style2"><asp:CompareValidator ID="CompareValidator1" 
                 runat="server" 
                 ControlToCompare="txtRePwd" 
                 ControlToValidate="txtPwd" 
                 Operator="Equal" 
                 ErrorMessage="Password and confirm password do not match" 
                 SetFocusOnError="True">
            </asp:CompareValidator>
        </td></tr>

        <tr><td class="style1">Gender:</td>
        <td class="style1"><asp:RadioButtonList ID="rdoGender" 
                                 runat="server">
                 <asp:ListItem>Male</asp:ListItem>
                 <asp:ListItem>Female</asp:ListItem>
            </asp:RadioButtonList>
        </td>
        <td class="style3"><asp:RequiredFieldValidator 
                 ID="RequiredFieldValidator2" 
                 runat="server" 
                 ControlToValidate="rdoGender"
                 ErrorMessage="Gender can't be left blank" 
                 SetFocusOnError="True">*
             </asp:RequiredFieldValidator>
        </td></tr>

        <tr><td>Address:</td>
        <td><asp:TextBox ID="txtAdress" runat="server" 
                         TextMode="MultiLine">
            </asp:TextBox>
        </td>
        <td class="style2"><asp:RequiredFieldValidator ID="rfvAddress" 
                runat="server" 
                 ControlToValidate="txtAdress"
                ErrorMessage="Address can't be left blank" 
               SetFocusOnError="True">*
            </asp:RequiredFieldValidator>
        </td></tr>
        <tr><td>Email ID:</td>
        <td><asp:TextBox ID="txtEmailID" runat="server">
            </asp:TextBox>
        </td>
        <td class="style2"><asp:RequiredFieldValidator 
                ID="RequiredFieldValidator3" 
                runat="server" 
                ControlToValidate="txtEmailID"
                ErrorMessage="Email can't be left blank" 
                SetFocusOnError="True">*
           </asp:RequiredFieldValidator>
       </td></tr>
       <tr><td><asp:Label ID="lblMsg" runat="server">
               </asp:Label>
          </td>
       <td><asp:ValidationSummary ID="ValidationSummary1" 
                runat="server" ShowMessageBox="True" 
                ShowSummary="False"/>
       </td></tr>
       <tr><td><asp:Button ID="btnSave" runat="server" 
                       Text="Sign Up" 
                       onclick="btnSave_Click"/>
   </td></tr>
   </table> 
```

我知道这是为我接下来要工作的服务器设置的，现在我只是想获取 btnsave 按钮以将表单中的输入显示到纯文本框中。这是怎么做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T00:06:01.780

要在后面的代码上执行此操作，只需使用`Request.Form`, 将所有表单数据包含在一行中。

所以你的最终代码将类似于`txtLiteral.Text = Request.Form.ToString()`

# css - CSS在末尾用图标填充宽度（搜索框）

> ID：15180470
> 
> 赞同：1
> 
> 时间：2013-03-02T23:04:47.927
> 
> 标签：css

我正在尝试这样做：![在此处输入图像描述](../Images/844f0960d783475037dec1b834ae36bc.png)

（搜索按钮的大小是固定的，左侧占屏幕的剩余宽度）。

我得到的最好的：[jsFiddle](http://jsfiddle.net/skY5C/1/)

![在此处输入图像描述](../Images/4b890cec12463086359e417c0e6b9dc4.png)

HTML：

```
<input>
<img src="http://ii.alatest.com/css/iphone/search_icon.gif"> 
```

CSS：

```
input {
    height: 100px;
    font-size: 3em;
    width: 100%;
    float:left;
}

img {
    float:right;
    width:100px;
    height:100px;
} 
```

**编辑：**我忘了提，搜索图标必须是可点击的！这可能会导致一个解决方案，它是一个单独的元素，而不是背景的一部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T23:10:54.523

我建议使用图像作为输入的背景，例如这个**[jsFiddle 示例](http://jsfiddle.net/j08691/skY5C/2/)**。

```
input {
    height: 100px;
    font-size: 3em;
    width: 100%;
    float:left;
    padding-right:120px;
    background-image: url(http://ii.alatest.com/css/iphone/search_icon.gif);
    background-position: 98% 50%;
    background-repeat: no-repeat;
} 
```

或者，您可以将两个元素都向左浮动并在输入上设置宽度，**[例如 jsFiddle 示例](http://jsfiddle.net/j08691/skY5C/3/)**。

```
input {
    height: 100px;
    font-size: 3em;
    width: 70%;
    float:left;
}

img {
    float:left;
    width:100px;
    height:100px;
} 
```

# asp.net-mvc-3 - Kendo UI PopUp 未将值传递给控制器

> ID：15180471
> 
> 赞同：0
> 
> 时间：2013-03-02T23:05:00.097
> 
> 标签：asp.net-mvc-3, kendo-grid

网格和弹出窗口工作正常，除了我在创建模式下输入的值不会传回我的控制器。查看 JS 控制台显示没有错误。监视 Fiddler 中的创建过程也显示没有传递任何值，尽管我的表单元素确实显示。

调试时，我的控制器中的模型是空的。

这是网格定义：

```
@(Html.Kendo().Grid<MyApp.Domain.Entities.TaktInterruptionViewModel>()
.Name("Interruptions")
.Columns(columns =>
    {
        columns.Bound(i => i.TaktInterruptionId).Hidden().IncludeInMenu(false);
        columns.Bound(i => i.DateCreated).Title("Date").Width(75).Format("{0:d}");
        columns.Bound(i => i.ActionCount).Title("Actions").Width(50).Hidden(true);
        columns.Bound(i => i.MeetingType).Title("Meeting   Type").Width(100).Hidden(true);
        columns.Bound(i => i.AreaName);
        columns.Bound(i => i.TypeName);
        columns.Bound(i => i.Responsible);
        columns.Bound(i => i.Description).Width(300);
        columns.Bound(i => i.Interruption).Width(75).Hidden(true);
        columns.Bound(i => i.TaktMissed).Title("Missed").Width(75);
    })
.ClientDetailTemplateId("ActionsTemplate")
.ToolBar(toolbar => toolbar.Create().Text("Add Interruption"))
.Editable(edit => edit.Mode(GridEditMode.PopUp).TemplateName("Create").Window(w => w.Title("Interruption").Name("addInterruption").Modal(true)))
.DataSource(datasource => datasource.Ajax()
    .Model(model => model.Id(p => p.TaktInterruptionId))
    .ServerOperation(false)
    .PageSize(5)
    .Create(create => create.Action("Create", "Home"))
    .Read(read => read.Action("GetInterruptions", "Home")))
.Groupable()
.Pageable()
.Sortable()
.Filterable()
.ColumnMenu()
.Selectable(s => s.Mode(GridSelectionMode.Multiple))
.Reorderable(reorder => reorder.Columns(true))
.Resizable(resize => resize.Columns(true))
.Events(events => events.Change("displayChart"))
) 
```

我的创建编辑器模板如下：

```
@model MyApp.Domain.Entities.TaktInterruptionViewModel
@{
    ViewBag.Title = "Index";
}

<div class="span-14" style="padding: 10px;">
    @Html.ValidationSummary(true)
    <hr class="space" />
    <div>
        @Html.LabelFor(model => model.DateCreated)<br />
        @(Html.Kendo().DatePicker().Name("DateCreated").Value(DateTime.Today))
        <br />
        @Html.ValidationMessageFor(model => model.DateCreated, null, new { style =    "color:red;" })
    </div>
    <hr class="space" />
    <div class="span-7">
        @Html.LabelFor(model => model.AreaId)<br />
        @(Html.Kendo().DropDownListFor(model => model.AreaId)
            .Name("AreaId")
            .HtmlAttributes(new { style = "width:200px" })
            .OptionLabel("Select Area...")
            .DataTextField("AreaName")
            .DataValueField("AreaId")
            .DataSource(source =>
                {
                    source.Read(read =>
                        {
                            read.Action("GetAreas", "Area");
                        });
                })
         )
        <br />
        @Html.ValidationMessageFor(model => model.AreaId)
    </div>
    <div class="span-6">
        @Html.LabelFor(model => model.TaktInterruptionTypeId)<br />
        @(Html.Kendo().DropDownListFor(model => model.TaktInterruptionTypeId)
            .Name("TaktInterruptionTypeId")
            .HtmlAttributes(new { style = "width: 200px" })
            .OptionLabel("Select Type...")
            .DataTextField("TypeName")
            .DataValueField("TaktInterruptionTypeId")
            .DataSource(source =>
                {
                    source.Read(read =>
                        {
                            read.Action("GetTypes", "Area").Data("filterTypes");
                        }).ServerFiltering(true);
                })
                .Enable(false)
                .AutoBind(false)
                .CascadeFrom("AreaId")
         )
        <br />
        @Html.ValidationMessageFor(model => model.TaktInterruptionTypeId, null, new { style = "color:red;" })
    </div>
    <hr class="space" />
    <div class="span-11">
        @Html.LabelFor(model => model.Description)<br />
        @Html.TextAreaFor(model => model.Description, new { @class = "multi-line" })
        <br />
        @Html.ValidationMessageFor(model => model.Description, null, new { style = "color:red;" })
    </div>
    <hr class="space" />
    <div class="span-5">
        @Html.LabelFor(model => model.Interruption)<br />
        @(Html.Kendo().NumericTextBox().Name("Interruption").Format("#.0").Value(0))
        <br />
        @Html.ValidationMessageFor(model => model.Interruption)
    </div>
    <div class="span-6">
        @Html.LabelFor(model => model.TaktMissed)<br />
        @(Html.Kendo().NumericTextBox().Name("TaktMissed").Format("#.0").Value(0))
        <br />
        @Html.ValidationMessageFor(model => model.TaktMissed)
    </div>
    <hr class="space" />
    <div>
        @Html.LabelFor(model => model.Responsible)<br />
        @Html.EditorFor(model => model.Responsible, new { @class = "k-input k-textbox" })
        <br />
        @Html.ValidationMessageFor(model => model.Responsible, null, new { style = "color:red;" })
    </div>
    <hr class="space" />
    <hr class="space" />
</div>

<script type="text/javascript">
    function filterTypes() {
        return {
        AreaID: $("#AreaId").val()
        };
    }
</script> 
```

我的控制器创建方法是：

```
[HttpPost]
    public ActionResult Create([DataSourceRequest] DataSourceRequest request, MyApp.Domain.Entities.TaktInterruptionViewModel taktInterruption)
    {
        try
        {
            if (ModelState.IsValid)
            {
                // code removed for brevity
            }

            return Json(ModelState.ToDataSourceResult());
        }
        catch(Exception ex)
        {
            TempData["message"] = "There was a problem saving the takt interruption.\n" + ex.Message;
            return View();
        }
    } 
```

如果我从方程式中删除我的编辑器模板并允许 kendo 弹出窗口，则信息将传递给我的控制器；但是，我想控制弹出窗口的布局，并且我也有级联下拉菜单（有效），因此是编辑器模板。

我的问题是为什么我在弹出窗口中输入的值没有传递给我的控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:44:12.057

我不知道这是否是使用自定义编辑器模板的错误或限制，但是，为了解决这个问题，我订阅了 JavaScript Edit 事件并设置了下拉列表值。

```
function reassignVacancy_Editing(e)
{
    e.preventDefault();

    var reassignUserList = $("#reassignUserList").data("kendoComboBox");

    reassignUserList.value(e.model.UserId);
} 
```

我还需要处理保存事件并更新模型：

```
function reassignVacancy_Saving(e)
    {
        // Update the ViewModel

        var reassignUserList = $("#reassignUserList").data("kendoComboBox");

        e.model.UserName = reassignUserList.dataItem().FullName;  // For the benefit of the grid
        e.model.UserId = reassignUserList.dataItem().Id;            
    } 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-18T13:07:04.830

kendo 弹出编辑，从网格而不是模板中获取值，当您输入值时，模板会修改新行的单元格。例如;

```
 @(Html.Kendo().DatePicker().Name("DateCreated").Value(DateTime.Today))
 @(Html.Kendo().NumericTextBox().Name("TaktMissed").Format("#.0").Value(0)) 
```

这些有一个默认值。如果您不更改它们的值，它们将不会发布到控制器。对于发布，您必须将值写入网格单元格。

```
 var firstItem = $('#GridName').data().kendoGrid.dataSource.data()[0];
    firstItem.set('ColumnName', DefaultValue); 
```

# jquery - 使用两个嵌套元素，点击最低元素不会触发顶部元素的点击事件

> ID：15180472
> 
> 赞同：1
> 
> 时间：2013-03-02T23:05:01.173
> 
> 标签：jquery

如果有三个嵌套元素：

```
<div class='container' fb-href='someUrl'>
   <span class='someText'>
         Lorem ipsum dolor sit amet, <a href='url'>consectetur</a> adipiscing.
   </span>
</div> 
```

在外部 div 我有一个点击事件：

```
$('.container').click(function(){
   window.open($(this).attr('fb-href'));
}); 
```

如果单击 .someText 中的 url，如何避免触发事件？（因为我当然想让用户转到 a-link 而不是 container-link。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T23:09:12.043

让回调接受一个`event`参数，看看是什么元素发起了事件：

```
$('.container').click(function(event){
   if(event.target.tagName != 'A') {
     window.open($(this).attr('fb-href'));
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T23:09:13.370

> 如果单击 .someText 中的 url，如何避免触发事件？（因为我当然想让用户转到 a-link 而不是 container-link。）

两种方式：

1.  将事件挂钩并在事件对象`click`上`.someText`使用`stopPropagation`。

    ```
    $(".someText").click(function(e) {
        e.stopPropagation();
    }); 
    ```

2.  在 的`click`处理程序中`.container`，查看`e.target`并忽略单击（如果它位于`.someText`.

    ```
    $(".container").click(function(e) {
        if ($(e.target).closest('.someText')[0]) {
            // Don't do anything
        }
    }); 
    ```

    `e.target`是实际点击的元素。`closest`通过查看您给它的元素，然后是它的父元素等等，找到与选择器匹配的第一个元素。

# java - 多个java实例 -Xms -Xmx

> ID：15180475
> 
> 赞同：1
> 
> 时间：2013-03-02T23:05:57.673
> 
> 标签：java, performance, jvm

我在同一台计算机上运行 java 游戏服务器和游戏客户端

游戏客户端

`java -Xms512m -Xmx1024m -cp etc etc`

和游戏服务器

`java -Xmx1024M -Xms1024M -jar etc etc`

电脑属性：

*   视窗 7 64 位
*   8GB 内存
*   CPU i5-2500 @ 3.3GHz
*   英特尔高清显卡

*问题：*游戏客户端体验严重滞后。在游戏服务器上，另一个玩家也通过 LAN 连接，没有延迟问题！

java虚拟机有延迟的问题吗？我是在使用一两个机器实例吗？

我可以设置一些不同的东西来优化性能吗？

我认为问题与一台机器正在运行并且它的最大内存对于两个实例都不够的事实有关，但我真的不知道如何解决这个问题。

**编辑：**没有应用程序内存不足。

* * *

***解决方案**：*

1：更新的 Java 版本来自：

```
java version "1.6.0_31"
Java(TM) SE Runtime Environment (build 1.6.0_31-b05)
Java HotSpot(TM) 64-Bit Server VM (build 20.6-b01, mixed mode) 
```

至

```
java version "1.7.0_15"
Java(TM) SE Runtime Environment (build 1.7.0_15-b03)
Java HotSpot(TM) 64-Bit Server VM (build 23.7-b01, mixed mode) 
```

2：更改了服务器属性以最小化要求，这似乎是主要原因。

3：增加内存：游戏客户端`java -Xms1024m -Xmx1024m -cp etc etc` 和游戏服务器`java -Xmx2048M -Xms2048M -jar etc etc` 服务器现在运行在大约700MB。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T01:15:42.610

> java虚拟机有延迟的问题吗？

可能。您没有提供足够的证据来确定一种或另一种方式。

令人费解的是，在另一台机器上运行的客户端并不滞后。

> 我是在使用一两个机器实例吗？

您正在运行两个副本，`java`那么您将拥有两个 JVM。

> 我可以设置一些不同的东西来优化性能吗？

答案可能是肯定的。但是您没有提供足够的信息来让我们提出可靠的建议。

* * *

延迟可能是由许多原因引起的，包括：

*   具有高延迟的网络。
*   具有太小的堆的 JVM。
*   生成大量垃圾并触发过多垃圾收集的应用程序。
*   竞争资源的混合应用程序；例如物理内存、CPU 时间或磁盘或网络 I/O 时间。

如果您要找到问题的根本原因，您将需要进行一些监控，以确定上述哪一个是可能的问题。使用任务管理器或其他任何东西来检查系统是否受 CPU 限制、内存不足、做大量磁盘或网络工作等。使用 VisualVM 来查看 JVM 内部发生了什么。

* * *

或者，您可以尝试使用一些完全不科学的“旋钮旋转”来修复：

*   尝试使 -Xms 和 -Xmx 参数相同（这可能会减少开始时的延迟......）
*   尝试增加 JVM 堆的大小；例如让它们变成 2gb 而不是 1gb
*   尝试使用更新版本的 Java
*   尝试使用 64 位 JVM，以便进一步增加堆大小
*   尝试启用 CMS 或 G1 收集器（取决于您使用的 JVM 版本）。

如果我对您当前使用的内容有更多了解，我可能会提供更具体的建议...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-08T11:49:25.330

您在同一台计算机上使用两个 java 应用程序，导致 2 个 JVM 运行。对于具有 8GB RAM 的 64 位系统，建议为 JVM 使用最大 2GB（25% 的物理内存或 75% 的可用物理内存高达 2GB）以获得更好的性能。

您可能需要查看 JVM 大小调整。为了获得更好的性能，Xms 和 Xmx 大小可以与最大大小括号保持相同。

将内存大小分配给堆并不是唯一需要考虑的区域。JVM 使用的内存不仅仅是堆。其他内存区域，如线程堆栈、方法区域、类加载器子系统、本机方法堆栈等。当两个应用程序（游戏服务器、游戏客户端）都在运行时，两个应用程序之间的操作系统可能会出现内存管理问题，导致缓慢。在这种情况下，客户端应用程序可以部署在另一个核心（如果可用）中。

# ruby-on-rails-3 - 嵌套表单：如果子项存在，则无法填充父子项之间的联接表/对于 ID= 的 ParentChildJoin，找不到 ID=1 的子项

> ID：15180480
> 
> 赞同：1
> 
> 时间：2013-03-02T23:06:56.420
> 
> 标签：ruby-on-rails-3, activerecord, ruby-on-rails-3.2, nested-forms, nested-attributes

我清理了我的代码，现在看起来好多了，但仍然无法正常工作。开始很痛苦……</p>

**我只是无法以嵌套形式保存具有现有子级的父级与父级 has_many 子级：通过连接模型。**

在我的例子中，一个项目 has_many 贡献的教师和许多贡献的学生，两者都是用户的加入模型。一个项目也有很多学校。

（也许我应该更好地将模型命名为 Teacherize 和 Pupilize 或 ProjectTeacher 和 ProjectPupil。）

只要所有记录都是新的，它就可以正常工作。一旦我想将现有用户连接为新项目的新教师，我就会收到以下错误：

`Couldn't find User with ID=1 for Teacher with ID=` （1 是正确的用户 ID）

**问题应该是她在我的助手中设置空表单字段的地方：**

至少我猜是这样...

```
module ProjectsHelper
  def setup_project(project)
    if project.teachers.length <= 0  # usually there is just one teacher, so add one if there isn't one
      teacher = project.teachers.build(:role_in_project => 'master')
      if user_signed_in?
        #teacher = project.teachers.new(:role_in_project => 'master', :user => current_user)
        teacher.user = current_user # associate first teacher with current_user
      else
        #teacher = project.teachers.build
        teacher.user = User.new   # associate first teacher with a new user instance
      end
    end
    if project.project_schools.length <= 0   # usually there is just one school, so add one if there isn't one
      project_school = project.project_schools.build
      project_school.school = School.new
    end
    if project.pupils.length < 3  # There can be up to 3 people, so add a blank fieldset as long as there are less than 3
      pupil = project.pupils.build
      pupil.user = User.new
    end
    project
  end
end 
```

这些是我收到的参数：

```
 {"utf8"=>"✓", "authenticity_token"=>"uCCMk/s3SpDfR7+fXcsCOHPvfvivBQv8pVFVhdh6iro=", 
     "project"=>{
       "teachers_attributes"=>{
           "0"=>{
                 "id"=>"",
                 "user_attributes"=>{
                      "id"=>"1",
                      "gender"=>"male",
                      "title"=>"",
                      "firstname"=>"Firstname1",
                      "name"=>"Lastname1",
                      "faculty"=>"",
                      "fon"=>"",
                      "fax"=>""}
                 }
           }, 
           "id"=>"",
           "title"=>"First Project",
           "description"=>"This is a foo bar project!",
           "presentation_type"=>"experimentell",
           "note"=>""
      }, 
      "commit"=>"Register Project",
      "action"=>"create",
      "controller"=>"projects"
   } 
```

案例不是太抽象；必须有可能实现它。只是将新的父记录与现有的子记录连接起来！

在这篇非常好的文章中，确切地解释了这种情况： [http: //rubysource.com/complex-rails-forms-with-nested-attributes](http://rubysource.com/complex-rails-forms-with-nested-attributes)

```
# app/helpers/form_helper
module FormHelper
  def setup_user(user)
    user.address ||= Address.new
    (Interest.all - user.interests).each do |interest|
      user.interest_users.build(:interest => interest)
    end
    user.interest_users.sort_by! {|x| x.interest.name }
    user/tmp/clean-controllers.md.html
  end
end 
```

那里的兴趣是存在的，并通过interest_uesers 中的新记录连接起来。

为什么我在尝试做同样的事情时会收到错误消息？

```
project.teachers.build(:user => current_user) 
```

我研究了几篇文章和演员表，但没有一篇将现有的孩子联系起来。 [http://railscasts.com/episodes/196-nested-model-form-revised](http://railscasts.com/episodes/196-nested-model-form-revised) [http://apidock.com/rails/ActionView/Helpers/FormHelper/fields_for](http://apidock.com/rails/ActionView/Helpers/FormHelper/fields_for) [http://api.rubyonrails.org/classes/ActiveRecord/ NestedAttributes/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html) [Rails 3.1+ 嵌套表单问题：无法批量分配受保护的属性](https://stackoverflow.com/questions/10239285/rails-3-1-nested-forms-issue-cant-mass-assign-protected-attributes)

[尝试使用 Accepts_nested_attributes_for 和 has_and_belongs_to_many 但未填充连接表](https://stackoverflow.com/questions/1847641/trying-to-use-accepts-nested-attributes-for-and-has-and-belongs-to-many-but-the)

Quote: “accepts_nested_fields_for 用于创建和修改表单中的相关对象。它可用于填充连接表，这正是您想要做的。但是，对于 HABTM 关系，使用accepts_nested_fields_for 填充连接表是不可能的。”</p>

**这就是我想做的！填充连接表！** 它开始令人沮丧，我很乐意得到一些帮助！

* * *

**我的模特**

```
class Project < ActiveRecord::Base
  attr_accessible :title, :description, :presentation_type, :note,
                  :project_schools_attributes, :schools_attributes, :teachers_attributes, :pupils_attributes,
                  :users_attributes

  validates_presence_of :title
  validates_presence_of :description
  validates_presence_of :presentation_type

  has_many :project_schools,                :dependent => :destroy
  accepts_nested_attributes_for :project_schools
  has_many :schools,                        :through => :project_schools
  #accepts_nested_attributes_for :schools,   :reject_if => :all_blank

  has_many :pupils,                         :dependent => :destroy
  accepts_nested_attributes_for :pupils,    :reject_if => :all_blank
  has_many :users,                          :through => :pupils

  has_many :teachers,                       :dependent => :destroy
  accepts_nested_attributes_for :teachers,  :reject_if => :all_blank

  has_many :users,                          :through => :teachers
  #accepts_nested_attributes_for :users,    :reject_if => :all_blank
end

class ProjectSchool < ActiveRecord::Base
  attr_accessible :role_in_project, :comment,
                  :school_attributes, :school_id, :project_id

  belongs_to :school
  accepts_nested_attributes_for :school
  belongs_to :project
end

class School < ActiveRecord::Base
  attr_accessible :email, :fax, :fon, :name, :place, :street, :type_of_school, :www, :zip

  has_many :project_schools
  has_many :projects, :through => :project_schools
  has_many :users # in real live they are named teachers and pupils but in this case the association goes directly to a user_id, not to teacher/pupil model

  validates_presence_of :name, :type_of_school, :street, :place, :zip, :fon
  validates :email, :format => { :with => /\A([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})\Z/i, :on => :create }, :allow_blank => true
end

class Teacher < ActiveRecord::Base
  attr_accessible :role_in_project, :user, :user_attributes, :project_id, :user_id

  belongs_to :project
  belongs_to :user
  accepts_nested_attributes_for :user

  serialize :role_in_project
end

class Pupil < ActiveRecord::Base
  attr_accessible :classname, :user_attributes #, :project_id, :user_id

  belongs_to :project
  belongs_to :user
  accepts_nested_attributes_for :user
end

class User < ActiveRecord::Base
  serialize :roles

  belongs_to :school
  has_many :teachers
  has_many :pupils
  has_many :projects, :through => :teachers
  has_many :projects, :through => :pupils

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :gender, :firstname, :name, :street, :place, :title, :faculty, :assignment,
                  :classname, :zip, :fon, :fax, :school_id, :roles,
                  :password, :added_by_user_id, :password_confirmation, :remember_me

  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable#, :validatable

  after_initialize :init
  def init
    # the default guest user
    self.roles  ||= ['default']           #will set the default value only if it's nil
  end
end 
```

**我的控制器**

```
class ProjectsController < ApplicationController
  require 'axlsx'
  before_filter :load_page, only: [:show, :index, :destroy]

  def new
    @project = Project.new
  end

  def create
    @project = Project.new(params[:project])

    respond_to do |format|
      if @project.save
        sign_in(:user, @project.teachers[0].user) unless user_signed_in?

        # TODO: send mail

        # save as excel file in dropbox
        save_in_dropbox(@project)

        format.html { redirect_to @project, notice: t('project.was_created') }
      else
        logger.debug @project.errors.inspect
        format.html { render action: "new" }
      end
    end
  end
end 
```

**项目/_form.html.haml**

```
%h1
  = t('project.register_headline')
= simple_form_for( setup_project(@project), :html => {:class => 'form-horizontal'} )do |f|
  = f.error_notification
  #teachers-wrapper.well
    %span.jumpanchor#lehrkraft_anchor
    %fieldset.form-inputs
      = f.simple_fields_for :teachers do |teacher|
        = render "teacher_fields", :f => teacher

  .school-wrapper.well
    %span.jumpanchor#schule_anchor
    %h2
      Informationen zur Schule
    %fieldset.form-inputs
      = f.simple_fields_for :project_schools do |project_school|
        = render "school_fields", :f => project_school
  .project-wrapper.well
    %span.jumpanchor#projekt_anchor
    %h2
      Informationen zum Projekt der Schüler
    %fieldset.form-inputs
      = f.hidden_field :id
      = f.input :title, :input_html => { :class => 'span6' }
      = f.input :description, :input_html => { :class => 'span6', rows: 5 }
      = f.input :presentation_type, collection: ['theoretisch', 'experimentell'], as: :radio_buttons, :class => 'controls-row', :input_html => { :class => 'inline' }
      .clearfix
      = f.input :note, :input_html => { :class => 'span6', rows: 3 }
  .pupils-wrapper.well
    %span.jumpanchor#schuler_anchor
    %fieldset.form-inputs
      = f.simple_fields_for :pupils do |pupil|
        = render "pupil_fields", :f => pupil

projects/_teacher_fields.html.haml
= f.simple_fields_for :user do |user|
  =# render "teacher_user_fields", :f => user
  %h2
    Betreuende Lehrkraft
  - if user_signed_in?
    = user.input :email, :disabled => true, :input_html => {:class => 'email_validation'}
  - else
    = user.input :email, :autofocus => true, :input_html => {:class => 'email_validation'}, :hint => 'Dies muß Ihre eigene E-Mailadresse sein!'
  .details
    =# user.hidden_field :id
    = user.input :id
    = user.input :gender, collection: [:female, :male]
    = user.input :title
    = user.input :firstname
    = user.input :name
    = user.input :faculty
    = user.input :fon
    = user.input :fax 
```

* * *

它是带有 Ruby 1.9.3 的 Rails 3.2

# php - 内容大小增加时卡住页脚的移动

> ID：15180483
> 
> 赞同：0
> 
> 时间：2013-03-02T23:07:19.500
> 
> 标签：php, css, xhtml

我被一个问题困扰了很长一段时间。我已经用谷歌搜索并尝试了几乎所有的响应，但没有一个有效。我有一个 PHP 页面，它具有以下布局

```
<div id="wrapper">
<div id="header"/>
<div id="content"/>
<div id=footer/>
</div> 
```

现在内容 div 的内容来自 Db，并且通常占用比浏览器窗口大小更多的高度。

这是我使用的 CSS

```
#footer { 
    color: #707070; 
    clear: both;

    min-height: 100px;

}

#content {
    width: 100%;
    min-height: 400px;
    margin-bottom: 25px;
} 
```

但是当那个 div 的大小增加时，页脚不会移动到它下面，而是页脚显示在内容 div 的中间，但在它下面 1 层。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T23:47:07.840

我看到的第一件事是您的 ID 名称周围没有引号，您需要它。

第二件事是，如果你给我们的一切都是正确的，我需要看看你的 PHP 来告诉你哪里出了问题，至少要确定实际问题的截图，但我认为你的 php 的一部分是在加载之前页脚和部分之后，所以看起来页脚在中间。

# c# - 如何创建一个 POST 监听器

> ID：15180487
> 
> 赞同：-1
> 
> 时间：2013-03-02T23:07:43.907
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我想创建一种方法来收听我网站上的发布请求。支付网关需要这个 url，但我不知道怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T23:12:03.763

使用[`HttpPostAttribute`](http://msdn.microsoft.com/en-us/library/system.web.mvc.httppostattribute%28v=vs.108%29.aspx)

```
[HttpPost]
public ActionResult Submit(...)
{
   ...
} 
```

# python - 在 sympy 中分解多边形

> ID：15180488
> 
> 赞同：7
> 
> 时间：2013-03-02T23:07:51.910
> 
> 标签：python, symbolic-math, sympy

我正在做一个非常简单的概率计算，从 AZ 集合中获取 X、Y、Z 的子集（具有相应的概率 x、y、z）。

而且由于公式非常繁重，为了处理它们，我正在尝试使用 sympy 来*简化**（*或*收集*或**分解**-我不知道确切的定义）这些多项式表达式。

 ***所以.. 有这个（一个非常简单的概率计算表达式，从具有相应概率 x、y、z 的 AZ 集合中获取 X、Y、Z 的子集）

```
import sympy as sp

x, y, z = sp.symbols('x y z')

expression = (
    x * (1 - x) * y * (1 - x - y) * z +
    x * (1 - x) * z * (1 - x - z) * y +

    y * (1 - y) * x * (1 - y - x) * z +
    y * (1 - y) * z * (1 - y - z) * x +

    z * (1 - z) * y * (1 - z - y) * x +
    z * (1 - z) * x * (1 - z - x) * y
) 
```

我想得到这样的东西

```
x * y * z * (6 * (1 - x - y - z) + (x + y) ** 2 + (y + z) ** 2 + (x + z) ** 2) 
```

`+`一个多边形，以尽可能少的操作（ , `-`, `*`, `**`, ...）的方式重写

* * *

我试过了`factor()`，，，`collect()`。`simplify()`但结果与我的预期不同。大多数情况下我得到

```
2*x*y*z*(x**2 + x*y + x*z - 3*x + y**2 + y*z - 3*y + z**2 - 3*z + 3) 
```

我知道 sympy 可以*将*多项式组合成简单的形式：

```
sp.factor(x**2 + 2*x*y + y**2)  # gives (x + y)**2 
```

但是如何使 sympy 从上面的表达式中*组合*多项式呢？

* * *

如果这是 sympy 中不可能完成的任务，是否还有其他选择？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T02:54:22.830

这次将一些方法放在一起恰好给出了一个很好的答案。看看这个策略是否经常在你生成的方程上起作用，或者顾名思义，这一次这只是一个幸运的结果，将会很有趣。

```
def iflfactor(eq):
    """Return the "I'm feeling lucky" factored form of eq."""
    e = Mul(*[horner(e) if e.is_Add else e for e in
        Mul.make_args(factor_terms(expand(eq)))])
    r, e = cse(e)
    s = [ri[0] for ri in r]
    e = Mul(*[collect(ei.expand(), s) if ei.is_Add else ei for ei in
        Mul.make_args(e[0])]).subs(r)
    return e

>>> iflfactor(eq)  # using your equation as eq
2*x*y*z*(x**2 + x*y + y**2 + (z - 3)*(x + y + z) + 3)
>>> _.count_ops()
15 
```

顺便说一句，factor_terms 和 gcd_terms 之间的区别在于，factor_terms 会更加努力地提取常用术语，同时保留表达式的原始结构，就像您手动操作一样（即在 Adds 中寻找可以提取的常用术语） .

```
>>> factor_terms(x/(z+z*y)+x/z)
x*(1 + 1/(y + 1))/z
>>> gcd_terms(x/(z+z*y)+x/z)
x*(y*z + 2*z)/(z*(y*z + z)) 
```

物有所值，

克里斯

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T22:25:39.743

据我所知，没有任何功能可以做到这一点。我相信这实际上是一个非常困难的问题。有关它的一些讨论，请参阅[减少对简单表达式的操作数。](https://stackoverflow.com/questions/4381641/reduce-the-number-of-operations-on-a-simple-expression)

但是，您可以尝试 SymPy 中的许多简化功能。您没有提到的一个给出不同结果的结果是`gcd_terms`，它在不进行扩展的情况下分解出一个符号 gcd 。它给

```
>>> gcd_terms(expression)
x*y*z*((-x + 1)*(-x - y + 1) + (-x + 1)*(-x - z + 1) + (-y + 1)*(-x - y + 1) + (-y + 1)*(-y - z + 1) + (-z + 1)*(-x - z + 1) + (-z + 1)*(-y - z + 1)) 
```

另一个有用的函数是`.count_ops`，它计算表达式中的操作数。例如

```
>>> expression.count_ops()
47
>>> factor(expression).count_ops()
22
>>> e = x * y * z * (6 * (1 - x - y - z) + (x + y) ** 2 + (y + z) ** 2 + (x + z) ** 2)
>>> e.count_ops()
18 
```

（请注意，`e.count_ops()`这与您自己计算的不一样，因为 SymPy 会自动分发`6*(1 - x - y - z)`to `6 - 6*x - 6*y - 6*z`）。

其他有用的功能：

*   `cse`：对表达式执行公共子表达式消除。有时您可以简化各个部分，然后将它们重新组合在一起。这通常也有助于避免重复计算。

*   `horner`：将[霍纳方案](http://en.wikipedia.org/wiki/Horner_scheme)应用于多项式。如果多项式在一个变量中，这将最小化操作次数。

*   `factor_terms`: 类似`gcd_terms`。我实际上并不完全清楚有什么区别。

请注意，默认情况下，`simplify`将尝试几种简化，并返回被 最小化的那个`count_ops`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-06T20:36:41.063

我遇到了类似的问题，并最终在我偶然发现这个问题之前实施了我自己的解决方案。我的似乎在减少操作次数方面做得更好。但是，我的也对所有变量组合进行了蛮力风格的集合。因此，它的运行时间在变量数量上呈超指数增长。OTOH，我已经设法在不合理（但远非实时）的时间内在具有 7 个变量的方程上运行它。

可能有一些方法可以修剪这里的一些搜索分支，但我没有理会它。欢迎进一步优化。

```
def collect_best(expr, measure=sympy.count_ops):
    # This method performs sympy.collect over all permutations of the free variables, and returns the best collection
    best = expr
    best_score = measure(expr)
    perms = itertools.permutations(expr.free_symbols)
    permlen = np.math.factorial(len(expr.free_symbols))
    print(permlen)
    for i, perm in enumerate(perms):
        if (permlen > 1000) and not (i%int(permlen/100)):
            print(i)
        collected = sympy.collect(expr, perm)
        if measure(collected) < best_score:
            best_score = measure(collected)
            best = collected
    return best

def product(args):
    arg = next(args)
    try:
        return arg*product(args)
    except:
        return arg

def rcollect_best(expr, measure=sympy.count_ops):
    # This method performs collect_best recursively on the collected terms
    best = collect_best(expr, measure)
    best_score = measure(best)
    if expr == best:
        return best
    if isinstance(best, sympy.Mul):
        return product(map(rcollect_best, best.args))
    if isinstance(best, sympy.Add):
        return sum(map(rcollect_best, best.args)) 
```

为了说明性能，[本文](https://ieeexplore.ieee.org/abstract/document/6722938/figures#figures)（付费专区，抱歉）有 7 个公式，它们是 7 个变量的 5 次多项式，具有多达 29 个项和 158 个扩展形式的运算。在同时应用`rcollect_best`和 @smichr's`iflfactor`后，7 个公式中的运算次数为：

```
[6, 15, 100, 68, 39, 13, 2] 
```

和

```
[32, 37, 113, 73, 40, 15, 2] 
```

分别。 `iflfactor`比`rcollect_best`公式之一多 433% 的操作。此外，扩展公式中的操作数为：

```
[39, 49, 158, 136, 79, 27, 2] 
```***

# ios - 我可以在另一个 NSData 中存档 NSData 对象而不损坏数据吗？

> ID：15180491
> 
> 赞同：1
> 
> 时间：2013-03-02T23:08:38.450
> 
> 标签：ios, nsstring, nsdata, corruption, nskeyedarchiver

我有两个 NSData 对象要存储在第三个 NSData 对象中。这个想法是我想在以后解码较大的对象时使其变得容易，以便彼此独立地获取两个较小的对象，而不必担心它们的相对大小或数据类型。

似乎最好的方法是使用 NSKeyedArchiver 在较大的 NSData 对象中创建一种根级键值结构，在其中我可以将两个较小的对象存储在单独的键中。这就是我在这里尝试做的事情：

```
NSData *data1Before = [@"abcdefgh" dataUsingEncoding:NSUTF8StringEncoding];
NSData *data2Before = [@"ijklmnop" dataUsingEncoding:NSUTF8StringEncoding];

NSMutableData *allData = [[NSMutableData alloc] init];
NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:allData];
[archiver encodeObject:data1Before forKey:@"key1"];
[archiver encodeObject:data2Before forKey:@"key2"];
[archiver finishEncoding];

NSKeyedUnarchiver *unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:allData];
NSData *data1After = [unarchiver decodeObjectForKey:@"key1"];
NSData *data2After = [unarchiver decodeObjectForKey:@"key2"];
[unarchiver finishDecoding];

NSString *string1After = [NSString stringWithUTF8String:[data1After bytes]];
NSString *string2After = [NSString stringWithUTF8String:[data2After bytes]];

NSLog(@"after1: %@",string1After);
NSLog(@"after2: %@",string2After); 
```

问题是，当你一遍又一遍地运行这段代码时，你会从 NSLog 语句中得到各种不同的结果——有时特殊字符会附加到字符串的末尾，有时它们只是 NULL。

看来这种损坏与我正在使用的这种“双重编码”过程有关。当我修改代码以便 NSKeyedArchiver 直接在 NSStrings 上而不是在 NSData 对象上调用 encodeObject 时，我以后可以使用 decodeObjectForKey 并毫无问题地获取这些字符串 - 完全没有损坏。

有没有比使用 NSKeyedArchiver 更好的方法呢？还是我使用不当？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:40:23.533

感谢 rmaddy 上面的回答 - 我只需要替换它：

```
[NSString stringWithUTF8String:[data1After bytes]]; 
```

有了这个：

```
[[NSString alloc] initWithData:data1After encoding: NSUTF8StringEncoding]; 
```

并修复了它。

# python - python更改权限以重新启动外部应用程序

> ID：15180496
> 
> 赞同：1
> 
> 时间：2013-03-02T23:08:55.730
> 
> 标签：python, privileges

您好我有一个修改应用程序配置文件的 python 脚本。要应用它，我需要重新启动应用程序。为此，我调用了一个 init.d 文件。但是当我执行此操作时，我需要成为 root，否则应用程序无法将她绑定到端口上。此外，我不想以 root 的权限执行我所有的 python 脚本。如何使用 root 权限执行重新启动，然后将其删除。

我在开头设置了用户权限：

```
if __name__ == "__main__":
    uid = pwd.getpwnam('ubuntu')[2]
    os.setuid(uid)
    app.run(host='0.0.0.0', port=5001, debug=True) 
```

在我的脚本结束时，我需要执行：

```
commands.getoutput('/etc/init.d/webapplication restart') 
```

webapplication 绑定在 80 端口。

如果我使用此配置执行脚本，webapplication 将无法启动并返回消息“无法在 80 上绑定套接字”。

任何的想法？有一个干净的解决方案，在 python 脚本下在 Debian 服务器上只执行一个具有 root 权限的外部命令？

提前谢谢。

PS：我尝试使用与我的主要功能相同的方法，我已将用户“ubuntu”替换为“root”，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:08:02.610

您可以使用以下两种方法之一：

1.  创建一个程序，其*唯一*的工作就是运行`init.d`脚本，并将其设为 setuid root。（确保安全地写入它！）。主脚本以普通用户权限运行并调用运行器。

2.  程序没有办法提升自己的权限（除了运行`sudo`，这至少与方法 1 一样昂贵），但以 root 身份运行的程序可以自行降级。因此，您可以以 root 身份执行一些步骤，然后通过将您的 uid 设置为真实的 uid 以普通用户身份继续。*但是，如果您需要 root 权限来执行程序的最后一*件事，这将无济于事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:58:19.843

最后为了达到我的目标，我使用了 sudo 解决方案。要在 debian 服务器上执行此操作：

```
apt-get install sudo
Edit: /etc/sudoers
Add line: my_user(uses for the setuid) ALL = NOPASSWD : /etc/init.d/webapplication
And in my python script:
commands.getoutput('sudo /etc/init.d/webapplication restart') 
```

那行得通。

# ios - 无法从另一个视图控制器在 WebView 中显示 URL

> ID：15180498
> 
> 赞同：0
> 
> 时间：2013-03-02T23:09:01.987
> 
> 标签：ios, uiwebview

我有一个需要打开 Web 视图的 UITableViewController。

在我的功能中，我有：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

                LinkViewController *linkViewController = [[LinkViewController alloc] initWithNibName:@"LinkViewController_iPhone" bundle:nil];

                [linkViewController.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.google.com"]]];

                [self.navigationController pushViewController:linkViewController animated:YES];

} 
```

我已连接所有插座，但没有收到任何警告，但我没有看到页面拉起。

但是，如果我进入实际的 LinkViewController 文件并执行以下操作：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

        NSString *urlAddress = @"http://www.google.com";

    //Create a URL object.
    NSURL *url = [NSURL URLWithString:urlAddress];

    //URL Requst Object
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

    //Load the request in the UIWebView.
    [self.webView loadRequest:requestObj]; 
} 
```

一切似乎都很好。我不明白为什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T00:05:03.073

您应该将`URL`属性添加到您的`LinkViewController`. 然后在您的表视图控制器中执行以下操作：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    LinkViewController *linkViewController = [[LinkViewController alloc] initWithNibName:@"LinkViewController_iPhone" bundle:nil];             
    linkViewController.URL = [NSURL URLWithString:@"http://www.google.com"];

    [self.navigationController pushViewController:linkViewController animated:YES];
} 
```

现在在您的 LinkViewController 中，您可以：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    //URL Requst Object
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:self.URL];

    //Load the request in the UIWebView.
    [self.webView loadRequest:requestObj]; 
} 
```

你原来的问题有两个：

1.  在表视图控制器中，您在`webView`初始化之前访问了该属性。这就是为什么什么都没发生。
2.  `LinkViewController`您向外界暴露了太多的实现细节。如果您`LinkViewController`在应用程序的许多地方使用，则要求该类的每个用户都知道创建 URL、创建请求，然后告诉内部 Web 视图开始加载。所有这些逻辑都属于`LinkViewController`. 现在该类的每个用户只需要知道设置一个简单的 URL 属性。

# symfony - Choice Multiple = true，创建新条目

> ID：15180499
> 
> 赞同：1
> 
> 时间：2013-03-02T23:09:11.253
> 
> 标签：symfony, entity, symfony-forms

我的实体

```
/**
 * Set friend
 *
 * @param \Frontend\ChancesBundle\Entity\UserFriends $friend
 * @return ChanceRequest
 */
public function setFriend(\Frontend\ChancesBundle\Entity\UserFriends $friend = null)
{
    $this->friend = $friend;

    return $this;
} 
```

我的行动

```
$task = new ChanceRequest();
$form = $this->createFormBuilder($task)
            ->add('friend', 'choice', array(
                'required' => true,
                'expanded' => true,
                'choices' => $fb_friends,
                'multiple' => true,
                'mapped' => true
            ))
            ->getForm(); 
```

因为`setFriend`需要一个标量，所以我无法验证它或将其保存到 db。它是用户想要向某人发送消息的朋友数量的数组。我怎样才能改变它？

我在这里看到了一个帖子： [Symfony2 Choice : Expected argument of type "scalar", "array" given](https://stackoverflow.com/questions/11261976/symfony2-choice-expected-argument-of-type-scalar-array-given) 但这不起作用，我把一个数组放在前面，`\Frontend`或者`$friend.`我猜是因为相关表。

我必须在 Entity 中做什么才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T00:12:38.687

如果`friends`可以在您的数据库中找到（例如它是一个用户实体），您应该`ManyToMany`为这两个表声明关系。如果不是，则将`friend`属性设置为学说数组类型。如果朋友不是一个有效的实体类，剩下的就是制作一个自定义验证器和数据转换器。否则你无事可做。所有这些信息你都可以在官方的 symfony 和学说文档中找到。

[如何创建自定义验证约束](http://symfony.com/doc/2.1/cookbook/validation/custom_constraint.html)

[如何使用数据转换器](http://symfony.com/doc/2.1/cookbook/form/data_transformers.html)

[关联映射](http://docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html)

[与协会合作](http://docs.doctrine-project.org/en/2.0.x/reference/working-with-associations.html)

# java - ArrayList 不存储对象

> ID：15180504
> 
> 赞同：3
> 
> 时间：2013-03-02T23:09:25.887
> 
> 标签：java, arraylist, project

您好，我无法打印出 ArrayList 中的项目。我可以在我的 PatronBorrow 方法中将其打印出来，但在 PatronList 和 PatronReturn 中它不会打印任何内容。谁能告诉我代码有什么问题？非常感谢大家

```
package proj1;

import java.util.ArrayList;
import java.util.List;

public class Patron {

private int id;
private Book book;
private List<Book> books;

public Patron(int id){
    this.id = id;
    books = new ArrayList<Book>();
}

public int getID(){
    return id;
}

public List<Book> getBooks(){
    return books;
}

public void PatronBorrow(String b){
    book = new Book(b);
    books.add(book);
    System.out.println("Patron " + id + " has borrowed " + book.getTitle());
}

public void PatronReturn(String b){
    for(Book book : books){
        if(book.getTitle().equals(b)){
            books.remove(book);
            System.out.println("Patron " + id + " has borrowed " +     book.getTitle());
        }
    }
}

public void PatronList(){
    for(Book b : books){
        System.out.println("Patron " + id + " has borrowed " + books.size() + " item(s)");
        System.out.println(b);
    }
} 
```

}

```
package proj1;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.util.Scanner;

public class Project1 {

public static boolean isNumeric(String str){
    for(char c : str.toCharArray()){
        if(Character.isDigit(c)){
            return true;
        }
    }
    return false;
}

public static void main(String[] args){

    String command;
    String line;
    Patron patron;
    int patronID;
    String title;
    String newTitle;
    String infile = args[0];

    if (args.length != 1){
        throw new IllegalArgumentException("Enter in file name");
    }

    try{
        Scanner file = new Scanner(new FileInputStream(infile));
        while(file.hasNext()){
            command = file.next();
            if(isNumeric(command)){
                patronID = Integer.parseInt(command);
                patron = new Patron(patronID);
                command = file.next();
                if(command.equals("borrow")){
                    title = file.nextLine();
                    newTitle = title.substring(2, title.length() - 1);
                    patron.PatronBorrow(newTitle);
                }else if(command.equals("return")){
                    title = file.nextLine();
                    newTitle = title.substring(2, title.length() - 1);
                    patron.PatronReturn(newTitle);
                }else if(command.equals("list")){
                    patron.PatronList();
                }
            }else{

            }
        }

    }catch (FileNotFoundException e) {
        System.out.println("File not found" + e.getMessage());
        System.exit(0);
    }

} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T23:16:54.813

在使用`Patron`该类的循环中，您`Patron`每次都创建一个新的（空白）。

如果你想在顾客之间切换，你想要做`Map<Integer, Patron> patrons`的是在你的主要功能中有一个或类似的东西。不是`new Patron(patronID)`每次都创建一个，而是从 检索它`patrons`，如果那里还没有一个，则只创建一个（并将其存储在地图中）。

(As far as your `Patron` class, though, you might find if you do some real testing of that class that `PatronReturn` often throws an exception when you remove a book. `ConcurrentModificationException`, namely, cause you're removing from a list you're iterating over at the time. Just a heads up.)

# ios - 从操作表手动呈现模态视图

> ID：15180512
> 
> 赞同：1
> 
> 时间：2013-03-02T23:10:41.800
> 
> 标签：ios, ios6, uiviewcontroller, uistoryboardsegue

我对 iOS 开发人员很陌生，我已经阅读了大量关于这个问题的内容，但仍然无法弄清楚。

我在操作表中有一个按钮，它应该激活并呈现一个上滑模式，它是一个从/到日期选择屏幕（它有自己的控制器`DatePickerViewController`。操作表由 NavigationViewController 的工具栏中的按钮触发子视图（“放映地图”视图，左上角按钮）。图形显示了当前的故事板关系：

![导航控制器到模态关系](../Images/7780ccea8193204e45cee50ae4bbec11.png)

此序列的代码如下所示：

```
// ShowsContainerController.m
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if( buttonIndex == 1 ){
        // 1\. Activates from actionsheet
        [(NavigationViewController *)self.parentViewController showDateSelect];
    }
}

// NavigationViewController.m
// 2\. fires up the datepicker view
-(void)showDateSelect
{
    pickerView = [[DatePickerViewController alloc] init ];

    [self presentViewController:pickerView animated:YES completion:nil];
}

// DatePickerViewController.m
// 3\. Instantiation of this controller. Definitely fires nslog.
-(void)viewDidLoad
{
    NSLog(@"Here");
} 
```

一旦“这里”，屏幕就会变黑。我认为这是因为我没有在日期选择器控制器的实例化或对它的 segue 上做正确的事情。所有有问题的视图都与故事板配置中它们各自的控制器相关联。为了进一步混淆这个问题，我有一个为另一个屏幕创建的 UITableViewController，只是为了大便和咯咯笑，尝试加载它，它工作正常。然后我创建了另一个完全独立的 UIViewController，将它指向控制当前非工作的控制器文件，它也爆炸了，所以我认为问题是非工作 UIViewController 的头文件和主文件。*编。划掉最后一个音符；我为视图创建了一个全新的标题、主文件和 NIB，但它仍然无法正常工作。我不知道这到底是什么交易。*

任何和所有的帮助将不胜感激。

*附录*

```
- (IBAction)showOptions:(id)sender
{
    NSString *showTypes;

    if( self.onlyShowPreferredEvents ){
        showTypes = @"\u2713 Only shows that I'll like";
    } else {
        showTypes = @"Only shows that I'll like";
    }

    _showDisplayOptionsActionSheet = [[UIActionSheet alloc] initWithTitle:@"Event Display Settings" delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles: showTypes, @"Date Range", nil];

    [_showDisplayOptionsActionSheet showFromTabBar:self.tabBarController.tabBar];

} 
```

根据评论。

*附录 2* // 所有 DatePickerViewController.m

```
#import "DateRangeViewController.h"

@interface DateRangeViewController ()

@end

@implementation DateRangeViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end

// All of DatePickerViewController.h

#import <UIKit/UIKit.h>

@interface DateRangeViewController : UIViewController

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:34:47.243

我会断开 DatePickerViewController 与 Nav 控制器的连接，并将其保留为独立的 VC。

然后摆脱 showDateSelect 并将 clickedButtonAtIndex 方法更改为以下内容：

```
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
  if( buttonIndex == 1 )
  {
    pickerView = [[DatePickerViewController alloc] init ];
    [self.navigationController pushViewController:pickerView animated:YES];
  }
} 
```

在这里，您将 pickerView 推送到导航控制器堆栈。您需要将其弹出以将其删除。

您也可以尝试当前/关闭，但我不确定它是否适用于导航控制器堆栈。

更新：我不确定您为什么要在 DatePickerViewController.h 文件中重新声明 viewDidLoad。把它拿出来。

同样在所有视图 Did/Will Load/Appear 方法中，您需要从调用 super 开始。因此，在 DatePickerViewController.m 的 viewDidLoad 方法中插入 [super viewDidLoad] 作为第一行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T01:38:25.133

弄清楚了。问题是，当您像我一样使用情节提要时，并且以编程方式呈现视图时，您需要从创建情节提要对象开始：

```
// "MainStoryboard_iPhone" is your .storyboard file's name
// [NSBundle mainBundle] returns the main storyboard bundle.
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone"
                                                         bundle:[NSBundle mainBundle]]; 
```

接下来，您使用该故事板对象实例化您想要呈现的视图：

```
// Give your view an identifier in the storyboard. That's how the storyboard object will find it. 
// You should see it in the right panel options when you click on the view.
UIViewController *dateRangeController = [storyboard instantiateViewControllerWithIdentifier:@"dateRange"]; 
```

当下。

```
[self presentViewController:dateRangeController animated:YES completion:nil]; 
```

我的错误是认为如果您只是将视图与 viewcontroller 文件相关联（在配置窗格中的 Class 属性下），这就是所需要的。但是，如果您使用情节提要，UI 进程期望通过它实例化视图，无论是自动还是以编程方式（可能是因为多个视图可以使用同一个视图控制器）。

# python - numpy.random.multivariate_normal(mean, cov[, size])

> ID：15180515
> 
> 赞同：2
> 
> 时间：2013-03-02T23:11:12.480
> 
> 标签：python, numpy, covariance

**numpy.random.multivariate_normal(mean, cov[, size])**

我有一个包含 N 个点和 X 个维度的数据集。因此，当我计算 numpy.mean(data, axis=0) 和 numpy.cov(data) 并使用 numpy.random.multivariate_normal(mean, cov) 中的均值和 cov 值时。它引发以下错误

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "mtrand.pyx", line 3986, in mtrand.RandomState.multivariate_normal (numpy/random/mtrand/mtrand.c:16833)
ValueError: mean and cov must have same length 
```

这是因为 numpy.mean() 计算平均列并给出 X 维数组。而 numpy.cov() 的输出是具有 N 行和 X 列的协方差矩阵。任何人都可以建议修复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T23:16:32.940

这与如何`numpy.cov`解释它的第一个论点有关。您将每个观察值放在一行中，而[numpy.cov 期望每个观察值在一列中。](http://docs.scipy.org/doc/numpy/reference/generated/numpy.cov.html#numpy.cov)

要解决此问题，请对数据进行转置`np.cov(data.T)`以获得`X`x`X`协方差矩阵：

```
In [58]: N, X = 100, 3

In [59]: data = np.random.random((N,X))

In [60]: mean = np.mean(data, axis = 0)

In [61]: mean
Out[61]: array([ 0.4913433 ,  0.49484566,  0.52463666])

In [62]: np.cov(data.T).shape
Out[62]: (3, 3)

In [63]: cov = np.cov(data.T)

In [64]: np.random.multivariate_normal(mean, cov)
Out[64]: array([ 0.27194062,  0.65995531,  0.67367201]) 
```

或者，使用`rowval=False`参数：

```
In [68]: cov = np.cov(data, rowvar=False)

In [69]: cov.shape
Out[69]: (3, 3) 
```

# java - Apache Tika - 不正确的 MIME（内容类型）检测

> ID：15180516
> 
> 赞同：1
> 
> 时间：2013-03-02T23:11:15.427
> 
> 标签：java, apache-tika

我正在尝试将传递给 Web 服务的文件内容类型检测到 SOAP 信封中。该文件可以通过两种方式表示：

*   从它的网址，
*   来自它的包含（base64 压缩数据）。

此时，我可以将此文件转换为流缓冲区。但是，我所有尝试获取其内容类型的尝试都失败了。如果指示文件扩展名，则检测内容类型，否则内容总是被检测为“纯文本”。

贝娄是我的课程代码：

类元数据分析器 {

```
private InputStream _is;

private File _file;

private void initializeAttributes() {

    _is = null;
    _file= null;

}

private void createTemporaryFile(byte[] pData) {

    FileOutputStream fos = null;
    try {
        _file = File.createTempFile(
                UUID.randomUUID().toString().replace("-", ""),
                null,
                new File("C:\\Users\\Florent\\Documents\\NetBeansProjects\\ServiceEdition\\tmp"));
    } catch (IOException e) {
        e.printStackTrace();
    }
    try {
        fos = new FileOutputStream(_file);
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }
    try {
        fos.write(pData);
    } catch (IOException e) {
        e.printStackTrace();
    }
    try {
        fos.close();
    } catch (IOException e) {
        e.printStackTrace();
    }

    _file.deleteOnExit();

}

public MetadataAnalyser(byte[] pData) {

    initializeAttributes();
    _is = new ByteArrayInputStream(pData);
    createTemporaryFile(pData);

}

public MetadataAnalyser(InputStream pIs) {

    initializeAttributes();
    _is = pIs;
    _file = null;

}

public MetadataAnalyser(File pFile) {

    initializeAttributes();
    try {
        _file = pFile;
        _is = new FileInputStream(_file);
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    }

}

public MetadataAnalyser(String pFile) {

    initializeAttributes();
    try {
        _file = new File(pFile);
        if (_file.exists()) {
            _is = new FileInputStream(_file);
        }
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    }

}

public String getContentType() {

    AutoDetectParser parser = null;
    Metadata metadata = null;
    InputStream is = null;
    String mimeType = null;

    parser = new AutoDetectParser();
    parser.setParsers(new HashMap<MediaType, Parser>());
    metadata = new Metadata();
    if(_file != null) {
        metadata.add(TikaMetadataKeys.RESOURCE_NAME_KEY, _file.getName());
    }
    try {
        is = new FileInputStream(_file);
        parser.parse(is, new DefaultHandler(), metadata, new ParseContext());
        mimeType = metadata.get(HttpHeaders.CONTENT_TYPE);
    } catch (IOException e) {
        e.printStackTrace();
    } catch (SAXException e) {
        e.printStackTrace();
    } catch (TikaException e) {
        e.printStackTrace();
    } finally {
        return mimeType;
    }

} 
```

}

那么，即使文件扩展名未知，如何检测 MIME 类型呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T23:22:00.440

我不认为你可以检测到没有扩展名的 mime 类型，你需要知道哪个系统正在写入文件以及预计会有什么样的文件，并且基于此你需要设置 MIME 类型（我猜你在您的回复中使用它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-24T05:39:26.940

您需要确保在将内容发送到 Tika 之前对其进行解码，不，绝对不需要扩展，检测是通过此处描述的一个很好理解的 mime 魔术过程进行的：[https ://tika.apache.org/1.1/detection .html](https://tika.apache.org/1.1/detection.html)

# javascript - javascript 内容滑块仅显示第一张幻灯片

> ID：15180518
> 
> 赞同：0
> 
> 时间：2013-03-02T23:11:36.127
> 
> 标签：javascript, jquery, html, css

我的[主页上](http://frshstudio.com/#home)有一个文本滑块，它应该根据选择的箭头单独显示幻灯片。目前，仅显示第一张幻灯片，之后的每张幻灯片都是空白的。制作每个单独的幻灯片放映我缺少什么？

[jsfiddle](http://jsfiddle.net/EeWVc/2/)

```
jQuery(document).ready(function($){
    // Setup Variables
    var slides = $('#slider_mask .slide_container').children();
    var total_slides = slides.children().length;
    var slide_width = $('#slider_mask').width();
    var current_slide = 0;

    slides.not(':first').hide();
    // Set the width of the slide_container to total width of all slides
    $('#slider_mask .slide_container').width(slide_width*total_slides);

    // Handle Right Arrow Click
    $('#slider_mask .right_button').on('click', function() {

        current_slide++;

        if(current_slide == total_slides){ current_slide = 0; }

        var negative_margin_required = current_slide*slide_width;
        $('#slider_mask .slide_container').stop().animate({marginLeft:-negative_margin_required+'px'},'fast');

    });

    // Handle Left Arrow Click
    $('#slider_mask .left_button').on('click', function() {

        current_slide--;

        if(current_slide < 0){ current_slide = total_slides-1; }

        var negative_margin_required = current_slide*slide_width;
        $('#slider_mask .slide_container').stop().animate({marginLeft:-negative_margin_required+'px'},'fast');

    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T04:20:34.563

看看这个[小提琴](http://jsfiddle.net/fFkNb/1/)。我把它缩小到最低限度。

我从具有固定宽度的滑块蒙版开始，然后设置其他宽度。

Ludovico Grossi 关于使滑动元素向左浮动是正确的。当它们是没有浮动的“块”元素时，它们会堆叠。如果将它们更改为“内联”元素，则它们不能具有固定宽度。它可以将它们设置为“inline-block”，但我不知道所有浏览器是否都支持。将它们作为“块”并向左浮动有效。

我还不得不做一些其他的改变。其中之一是该`.animate()`功能不会导致显示隐藏元素。它在[文档页面](http://api.jquery.com/animate/)上说明了这一点。不是通过调用来隐藏幻灯片，而是通过`.hide()`将掩码元素的溢出设置为隐藏来隐藏它们。

我还将文本对齐中心放在幻灯片元素上，而不是容器元素上。

更新：

我创建了另一个[小提琴，它以](http://jsfiddle.net/WMF2N/)[adeneo 小提琴](http://jsfiddle.net/adeneo/EeWVc/1/)中的代码开头，并包含必要的更改。我将注释放在所有添加、删除或更改的代码和 CSS 旁边。我不得不对 html 进行一项更改。我添加了`<div id="home">`包含所有内容的元素。没有它，CSS 选择器不会匹配任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T23:17:29.343

检查你的CSS：

幻灯片：固定宽度，向左浮动。

容器：宽度 n_slide * slide_(outer)_width

幻灯片遮罩：同单张幻灯片宽度，溢出隐藏。

# meteor - Meteor.js：了解 find{} 方法中的排序参数

> ID：15180519
> 
> 赞同：3
> 
> 时间：2013-03-02T23:11:39.987
> 
> 标签：meteor

我正在“Meteor.js Javascript 框架入门”一书中做练习，其中有一个部分创建了一个名为 categories 的模板，然后一个 {#each} 循环遍历集合。这是为了打印而完成的结果显示在屏幕上。这有效，代码如下。

```
<template name ="categories">

    <div class ="title">my stuff</div>

    <div id='categories'>
        {{#each lists}}

        <div id="category">

            {{Category}}

        </div>

        {{/each}}
    </div>

</template> 
```

**我的问题是这样的：**

在下面的代码中，排序参数似乎没有做任何事情。我很好奇它应该做什么。我知道理论上它应该“排序”，但是当我使用参数时没有任何变化。我在流星文档中查找了它，但我无法弄清楚。我正在尝试修改代码，使其以不同的顺序排序。通过这种方式，我可以看到结果并真正了解**{sort:**的 工作原理。我尝试将**{sort: {Category: 1}})**修改为**{sort: {Category: -1}})**以及**{sort: {Category: 2}})**并且结果始终相同。

```
 Template.categories.lists = function() {
    return lists.find({}, {sort: {Category: 1}});  // Works

  /* return lists.find({}); */                     // Works just the same

  } 
```

收藏品如下：

```
lists.insert({Category:"DVDs", items: [{Name:"Mission Impossible" ,Owner:"me",LentTo:"Alice"}]});

lists.insert({Category:"Tools", items: [{Name:"Linear Compression Wrench",Owner:"me",LentTo: "STEVE"}]}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T07:26:46.020

在您的代码中，您可以尝试将排序的参数更改为数组而不是对象，如下所示：
`sort: [["Category","asc"],["another argument","desc"],[...]]`
所以代码：

```
 Template.categories.lists = function() {
    return lists.find({}, {
        sort: [
            ["Category", "asc"],
            ["another argument", "desc"],
            [...]
        ]
    }); 
    // return lists.find({}); // Works just the same
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T23:29:14.737

根据我的理解，这是因为默认是按自然顺序排序。更多信息可以在这个[链接中找到](http://docs.meteor.com/#find)

# c++ - 奇怪的 C 算术行为

> ID：15180522
> 
> 赞同：1
> 
> 时间：2013-03-02T23:11:51.970
> 
> 标签：c++, c, math, integer-arithmetic

我对这段 C 代码有疑问：

```
int y = 0, h = 640, ih = 640;
h = y + h - max(0, (y + h) - ih); 
```

它应该将 h 设置为 640，但它设置为 0！

你可以在这里看到它运行：http: [//ideone.com/zBZSsr](http://ideone.com/zBZSsr)

对这种奇怪的行为有任何想法吗？难道我做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-02T23:16:39.820

您链接的示例中的 max 宏需要一对额外的括号。

你有：

```
#define max(x, y) ((x) > (y)) ? (x) : (y) 
```

在您的示例中，这扩展为：

```
h = y + h - ((0) > ((y+h)-ih)) ? (0) : ((y+h)-ih); 
```

我相信运算符优先级意味着左侧的所有内容都包含在三元运算符的条件表达式中。有一些从 bool 到 int 的隐式转换，然后再返回，导致一个永远为真的条件，所以你得到了真正的分支，它只是 0。

你的宏应该是：

```
#define max(x, y) (((x) > (y)) ? (x) : (y)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T23:28:04.233

您的代码被预处理为

```
h = y + h - ((0) > ((y + h) - ih)) ? (0) : ((y + h) - ih); 
```

问题是 + 和 - 优先于 ?: 运算符。

```
#define max(x, y) ((x) > ((y)) ? (x) : (y)) 
```

在定义周围添加（），您的计算将是正确的。

# python - 从 matplotlib savefig 中删除空格

> ID：15180525
> 
> 赞同：2
> 
> 时间：2013-03-02T23:11:57.673
> 
> 标签：python, matplotlib

我正在尝试读取一系列 .bmp 图像并根据我得到的提示进行一些线性对比度调整。这些图像很小，112x112，我希望它们看起来完全一样，除了对比度调整。我试过用 matplotlib 来做，但无论我做什么，我都会在图像的边界周围得到空白。这是我正在使用的代码：

```
# Open image and convert to array
oldImage = Image.open(f)
imageArray = np.array(oldImage)

# Preprocessing
vrange = stats.mquantiles(imageArray.flatten(),prob=[0.01,0.99])

# Plot and save
fig = plt.figure()
fig.set_size_inches(1,1)
fig.set_dpi(112)
plt.imshow(imageArray,cmap="gray",interpolation="Nearest",vmin=vrange[0],vmax=vrange[1]);
plt.axis('off')
plt.savefig(f[:-4] + "_adjusted.png", bbox_inches='tight') 
```

有关如何删除填充的任何提示？我做了一些谷歌搜索，但到目前为止我发现没有任何工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T23:38:24.640

您可以在没有 matplotlib 的情况下进行阈值处理：

```
import os
from PIL import Image
import numpy as np
import scipy.stats.mstats as mstats

f = os.path.expanduser('~/tmp/image.png')
name, ext = os.path.splitext(f)
out = name+"_adjusted.png"

oldImage = Image.open(f).convert('L')
imageArray = np.array(oldImage)

vmin, vmax = mstats.mquantiles(imageArray.flatten(), prob=[0.01,0.99])

np.clip(imageArray, vmin, vmax, out=imageArray)
imageArray = (imageArray-vmin)*255/(vmax-vmin)
img = Image.fromarray(imageArray.astype('uint8'), 'L')
img.save(out) 
```

这样，您不必定义以英寸为单位的图形大小和 DPI 等。您只需将 PIL 图像转换为 numpy 数组，进行一些数学运算，然后再转换回 PIL 图像。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-02T23:37:54.443

在之前添加以下行`plt.savefig()`：

```
plt.subplots_adjust(0,0,1,1,0,0) 
```

# vb.net - 以编程方式包含在项目中

> ID：15180527
> 
> 赞同：2
> 
> 时间：2013-03-02T23:11:59.543
> 
> 标签：vb.net, visual-studio, project

我们如何使用代码在项目中包含文件？

我想包含这个文件：

![要包含的文件](../Images/0621f33735ed0f1a0ae2183fb21b5a0f.png)

我也想要这样的等价物：

![包括](../Images/db09fa34d1b2de15f3aee9a926a467ea.png)

在代码中......有可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T00:38:21.700

你可以通过几种方式做到这一点。

### 命令行：

> devenv /command "File.AddExistingSolutionItem 完整路径\文件名"

### 项目文件：

项目文件是 XML。您可以像任何文件一样打开和修改它。

### 代码：

用于`Microsoft.Build.Evaluation.Project`检查和修改项目文件。该`.AddItem()`方法是您正在寻找的。

# arrays - 检查数组元素是否实际保存数据时出错

> ID：15180530
> 
> 赞同：0
> 
> 时间：2013-03-02T23:12:11.153
> 
> 标签：arrays, vb.net

我有一个简短的应用程序，可以检查我的音乐文件是否是特定例程的名称（曲目编号，然后是曲目名称），但是只要没有需要重命名的文件，我就会收到错误消息，因为数组已初始化，但是第一项是空的，空的，空的（但是 VB 引用它）。

为了尝试解决此问题，我正在运行此检查，但仍然出现错误。

```
 ' Array declared like this
    Dim nc_full_names(0) As String

    <Code goes here to ReDim 'nc_full_names' and add the file name to the array, if a file needs renaming>

    For i = 0 To UBound(nc_full_names)

            'Checking if the array element actually has something in it like this
            If Not nc_full_names Is Nothing Then
                    My.Computer.FileSystem.RenameFile(nc_full_names(i), nc_new_names(i))
            Else
                    Exit For
            End If

    Next i 
```

这是我得到的错误 -

> 争论不能是什么。参数名称：文件

谁能告诉我进行此检查的正确方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T23:29:53.520

我发现答案是检查数组中的第一个元素，而不是数组本身。因此，改变这个...

```
 If Not nc_full_names Is Nothing Then 
```

……到这……

```
 If Not nc_full_names(i) Is Nothing Then 
```

...工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:05:28.880

你也可以从一个真正的空数组开始：

```
Dim nc_full_names(-1) As String 
```

现在`nc_full_names.Length = 0`。

# c++ - E_FAIL D3D11CreateDevice

> ID：15180533
> 
> 赞同：0
> 
> 时间：2013-03-02T23:12:44.527
> 
> 标签：c++, visual-studio-2010

```
ID3D11Device* md3dDevice;
ID3D11DeviceContext* md3dImmediateContext;
D3D_DRIVER_TYPE md3dDriverType = D3D_DRIVER_TYPE_HARDWARE;
HRESULT hr = D3D11CreateDevice(
            0,                 
            md3dDriverType,
            0,                 
            D3D11_CREATE_DEVICE_DEBUG, 
            0, 0,              
            D3D11_SDK_VERSION,
            &md3dDevice,
            &featureLevel,
            &md3dImmediateContext);ID3D11Device* md3dDevice; 
```

当我包含 D3D11_CREATE_DEVICE_DEBUG 标志时，我从这个函数中得到一个 e_fail （没有标志可以正常工作）。我认为这与我的调试运行时有关，所以我按照此线程中的说明重新安装了 dx sdk：[什么会导致 D3D11CreateDevice() 因 E_FAIL 而失败？](https://stackoverflow.com/questions/10586956/what-can-cause-d3d11createdevice-to-fail-with-e-fail)但它并没有解决问题。

我还在 dxdiag 中看到零调试级别：

```
--------------------
DirectX Debug Levels
--------------------
Direct3D:    0/4 (retail)
DirectDraw:  0/4 (retail)
DirectInput: 0/5 (retail)
DirectMusic: 0/5 (retail)
DirectPlay:  0/9 (retail)
DirectSound: 0/5 (retail)
DirectShow:  0/6 (retail) 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:59:19.087

您通过[“什么会导致 D3D11CreateDevice() 因 E_FAIL 失败？”链接的线程](https://stackoverflow.com/questions/10586956/what-can-cause-d3d11createdevice-to-fail-with-e-fail?answertab=votes#tab-top) 确实包含我认为您的问题的答案。

我引用查克沃尔伯恩的话：

> 最新版本的 SDK 调试层不在旧版 DirectX SDK（2010 年 6 月）中。您需要安装独立的 Windows 8.0 SDK、Visual Studio 2012，或者您可以只安装 VS 2012 远程调试工具包。
> 
> [http://blogs.msdn.com/b/chuckw/archive/2013/02/26/directx-11-1-and-windows-7-update.aspx](http://blogs.msdn.com/b/chuckw/archive/2013/02/26/directx-11-1-and-windows-7-update.aspx)

对我来说，安装 VS 2012 远程调试工具包解决了这个问题！

# mysql - Mysql外键错误150

> ID：15180534
> 
> 赞同：1
> 
> 时间：2013-03-02T23:12:48.657
> 
> 标签：mysql, foreign-keys

我是 mysql 初学者，目前正在研究外键。我想创建三个表：用户、项目、订单并将它们链接在一起

**用户表：**

```
CREATE TABLE users (
user_id INT(10) UNSIGNED ZEROFILL NOT NULL AUTO_INCREMENT,
name VARCHAR(20) NOT NULL,
PRIMARY KEY(user_id)
); 
```

**物品表：**

```
CREATE TABLE items (
item_id INT(10) UNSIGNED ZEROFILL NOT NULL AUTO_INCREMENT,
name VARCHAR(20) NOT NULL,
PRIMARY KEY(item_id)
); 
```

**订单表：**

```
CREATE TABLE orders (
order_id INT(10) UNSIGNED ZEROFILL NOT NULL AUTO_INCREMENT,
item_id INT,
quantity INT(10) NOT NULL,
user_id INT,
PRIMARY KEY (order_id),
FOREIGN KEY (item_id) REFERENCES items (item_id),
FOREIGN KEY (user_id) REFERENCES users (user_id)
); 
```

但我收到错误 1005: can't create table 'new.orders' (error:150)

我的代码有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T23:24:11.190

主表列和引用表列的数据类型必须*完全*匹配。在您的定义中，`items.item_id`是`INT UNSIGNED`，而外键`orders.item_id`是`INT`（隐式`SIGNED`）。对于`user_id`.

更改定义如下，`UNSIGNED`为这两个添加：

```
CREATE TABLE orders (
  order_id INT(10) UNSIGNED ZEROFILL NOT NULL AUTO_INCREMENT,
  item_id INT UNSIGNED,
  quantity INT(10) NOT NULL,
  user_id INT UNSIGNED,
  PRIMARY KEY (order_id),
  FOREIGN KEY (item_id) REFERENCES items (item_id),
  FOREIGN KEY (user_id) REFERENCES users (user_id)
); 
```

然后正确构建：[http ://sqlfiddle.com/#!2/cfab8](http://sqlfiddle.com/#!2/cfab8)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T23:17:29.010

items 表中没有 student_id 列。您的意思是用户表中的 user_id 吗？

# php - PHP 表单邮件使用不可见的表单字段来过滤机器人

> ID：15180536
> 
> 赞同：0
> 
> 时间：2013-03-02T23:12:56.943
> 
> 标签：php, html, webforms

我读了这篇文章：[什么是好的隐形验证码？](https://stackoverflow.com/questions/972507/what-is-a-good-invisible-captcha)关于使用网络表单中的隐藏字段来阻止基本机器人通过您的网站表单邮件向您的网站投掷垃圾邮件。我目前正在使用 php 脚本来处理我的表单邮件。我按照我找到的“bullet proff web form”教程构建了脚本。它看起来像这样：

```
<?php
// Pick up the form data and assign it to variables
$name = $_POST['name'];
$email = $_POST['email'];
$topic = $_POST['topic'];
$comments = $_POST['comments'];

// Build the email (replace the address in the $to section with your own)
$to = 'hello@cipherbunny.com';
$subject = "New message: $topic";
$message = "$name said: $comments";
$headers = "From: $email";

// Data cleaning function
  function clean_data($string) {
  if (get_magic_quotes_gpc()) {
  $string = stripslashes($string);
  }
  $string = strip_tags($string);
  return mysql_real_escape_string($string);
}

// Mail header removal
function remove_headers($string) { 
  $headers = array(
    "/to\:/i",
    "/from\:/i",
    "/bcc\:/i",
    "/cc\:/i",
    "/Content\-Transfer\-Encoding\:/i",
    "/Content\-Type\:/i",
    "/Mime\-Version\:/i" 
  ); 
  $string = preg_replace($headers, '', $string);
  return strip_tags($string);
} 

// Pick up the cleaned form data
$name = remove_headers($_POST['name']);
$email = remove_headers($_POST['email']);
$topic = remove_headers($_POST['topic']);
$comments = remove_headers($_POST['comments']);

// Send the mail using PHPs mail() function
mail($to, $subject, $message, $headers);

// Redirect
header("Location: http://foobar/success.html"); 
```

我想修改此脚本，以便如果填写了标识符为“other_email”的隐藏字段，则不会发送表单电子邮件。我猜这就像将上面的代码包装在 if 语句中以检查字段是否完整一样简单。我尝试在“//获取表单数据并将其分配给变量”代码下添加它：

```
$testBot = $_POST['other_email']; 
```

然后写：

```
if(other_email == "") //If other_email form section is blank then... 
{
    run all the code above inserted here;
}
else
{
 Don't know what I should put here to stop it posting, yet still show the success form so 
 the spam bot don't know 

} 
```

非常感谢任何帮助。我不得不说我并没有太多的 php 知识，我刚刚开始学习它，并认为表单邮件将是一个好的开始。

如何在 PhP 中完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T23:16:24.210

```
if(other_email == "") //If other_email form section is blank then... 
{
    run all the code above inserted here;
}
else
{
 header("Location: http://foobar/success.html");

} 
```

保持非常简单，它会为你工作..

实际上，它会

*   不提交/邮寄任何东西......所以没有垃圾邮件
*   一个简单的机器人会照原样接受它......

如果您可以在成功页面上使用 php，然后设置一个会话变量（让 bot 认为它完成了它的工作，类似于`email_sent=true`or `success=true`）并在成功页面中使用该变量，您将`else case`在 bot 提交表单的地方执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T23:35:09.430

你的意思是发送带有字段的消息吗？
尝试这个：

```
<?php
// Pick up the form data and assign it to variables
$name = $_REQUEST['name'];
$email = $_REQUEST['email'];
$topic = $_REQUEST['topic'];
$comments = $_REQUEST['comments'];

// Build the email (replace the address in the $to section with your own)
if($name !== null && $email !== null && $topic !== null && $comments !== null){
$to = 'hello@cipherbunny.com';
$subject = "New message: $topic";
$message = "$name said: $comments";
$headers = "From: $email";

// Data cleaning function
  function clean_data($string) {
  if (get_magic_quotes_gpc()) {
  $string = stripslashes($string);
  }
  $string = strip_tags($string);
  return mysql_real_escape_string($string);
}

// Mail header removal
function remove_headers($string) { 
  $headers = array(
    "/to\:/i",
    "/from\:/i",
    "/bcc\:/i",
    "/cc\:/i",
    "/Content\-Transfer\-Encoding\:/i",
    "/Content\-Type\:/i",
    "/Mime\-Version\:/i" 
  ); 
  $string = preg_replace($headers, '', $string);
  return strip_tags($string);
} 

// Pick up the cleaned form data
$name = remove_headers($_POST['name']);
$email = remove_headers($_POST['email']);
$topic = remove_headers($_POST['topic']);
$comments = remove_headers($_POST['comments']);

// Send the mail using PHPs mail() function
mail($to, $subject, $message, $headers);

// Redirect
header("Location: http://foobar/success.html"); 
}
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=shift_jis" />
<title>Send</title>
</head>

<body>
<form action="#" method="POST">
Name     : <input type="text" name="name" /><br />
Email    : <input type="text" name="email" /><br />
Topic    : <input type="text" name="topic" /><br />
Comments : <textarea name="comments"></textarea><br />
<input type="submit" value="Send" />
</form>
</body>
</html> 
```

# python - 如何在 Sublime Text 2 插件中包含第三方 Python 包

> ID：15180537
> 
> 赞同：30
> 
> 时间：2013-03-02T23:12:59.917
> 
> 标签：python, plugins, sublimetext2, distutils, python-requests

我正在编写一个使用模块[SEAPI.py](https://stackapps.com/questions/3881/se-api-py-a-lightwight-python-wrapper-for-se-api)的 sublime text 2 插件，该模块本身导入[requests 模块](http://docs.python-requests.org/en/latest/)。

由于 sublime text 2 使用它自己的嵌入式 python 解释器，它没有看到我的 ubuntu 机器中安装的 requests 模块（我收到以下错误：ImportError: No module named requests）。

到目前为止，我能找到的最佳解决方案是将“请求”模块（整个文件目录）从 /usr/lib/python2.7/dist-packages/requests 复制到 sublime 文本包目录中的插件目录中。但在那之后，它说它找不到'urllib3'模块。

有没有更好的方法来导入请求模块，这样我就不必将所有文件复制到我的插件目录中？

我正在使用的当前代码如下：

我的插件.py

```
import sublime
import sublime_plugin
import SEAPI
... 
```

SEAPI.py

```
import requests
try:
    import simplejson as json
except:
    import json
from time import time, sleep
... 
```

**编辑：** 选择的答案是正确的，并解决了我的主要问题，但是使用当前版本的“请求”和嵌入式 sublime text 2 解释器存在不同的问题。ST2 的 python 缺少常规 2.7 python 中存在的各种模块（例如'fileio'）。

我已经使用这里的“请求”模块解决了这个问题： [https ://github.com/bgreenlee/sublime-github](https://github.com/bgreenlee/sublime-github)

我不得不将 'urllib3/response.py' 文件编辑为：

```
try:
    from cStringIO import StringIO as BytesIO
except ImportError:
    pass  # _fileio doesn't seem to exist in ST's python in Linux, but we don't need it 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-03T00:08:17.980

您需要将完整的请求分发与您的 Python 包捆绑在一起，然后修改 Python `sys.path`（它在其中查找模块）以指向包含文件夹的`requests`文件夹。

*   从 PyPi 下载 Requests 库并在插件文件夹下手动解压

*   **在**插件中导入请求之前，将 corrcet 文件夹附加到 sys.path 以指向可以找到请求导入的文件夹

（未经测试的）代码应如下所示：

```
 import sys 
  import os

  # request-dists is the folder in our plugin
  sys.path.append(os.path.join(os.path.dirname(__file__), "requests-dist"))

  import requests 
```

这也假设当您使用或`requests` `setup.py`安装模块时不会做任何黑客攻击。`easy_install``pip`

您也可以`requests`直接导入 zip，因为 Python 支持从 ZIP 文件导入，假设请求以兼容的方式分发。示例（高级）：

[https://github.com/miohtama/ztanesh/blob/master/zsh-scripts/python-lib/zipimporter.py](https://github.com/miohtama/ztanesh/blob/master/zsh-scripts/python-lib/zipimporter.py)

更多关于 sys.path 技巧 (2004)

[http://www.johnny-lin.com/cdat_tips/tips_pylang/path.html](http://www.johnny-lin.com/cdat_tips/tips_pylang/path.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-26T11:02:07.103

Mikko 的回答很好，但我可能找到了一种稍微简单的方法：

```
import MyAwesomePlugin.requests 
```

当然，“MyAwesomePlugin”是您插件的名称。

# jung - JUNG：自定义 DijkstraShortestPath

> ID：15180542
> 
> 赞同：0
> 
> 时间：2013-03-02T23:14:10.390
> 
> 标签：jung

本周我发现了这个库，我的第一个项目有效，我模拟了简单的航班预订。

作为边缘，我创建了一个飞行类作为顶点，我创建了一个机场类

我为每个航班设置了持续时间并成功关联了 dijsktra 算法（DijkstraShortestPath）

```
class Airport {
    String name;
}

class Flight {
    String flight;        
    int duration;
}

g = new DirectedSparseMultigraph<Airport, Flight>();
Flight AXXX = new Flight("A57",3);
Flight AYYY = new Flight("A53",1);

ORY = new Airport("ORY");
LYS = new Airport("LYS");

g.addEdge(AXXX, ORY, LYS);
g.addEdge(AYYY, LYS, ORY); 

Transformer<Flight, Integer> wtTransformer = new Transformer<Flight, Integer>() {
        @Override
        public Integer transform(Flight link) {
                return link.duration;                
        }            
    };

DijkstraShortestPath<Airport, Flight> alg = new DijkstraShortestPath(g, wtTransformer);        
Number dist = alg.getDistance(ORY, LYS); 
```

这个简单的案例效果很好，但现在我将计算持续时间为：Flight1 于 12:00 开始 12/01/13 并于 13/01/13 于 14h 到达 Flight2 于 13/01/13 于 18:00 开始并到达2013 年 13 月 1 日 20 点

在这种情况下，我想计算飞行时间和飞行之间的时间。因为要获得从一个航班到另一个航班的最短路径，我们需要注意航班之间的等待时间，而不仅仅是飞行时间。但是 DiskstraShortestPath 只允许 Transformer as: Transformer 所以我无法参考以前的航班来计算总持续时间（等待 + 航班）。

所以我的问题是：我的情况最好的方法是什么？创建新算法（继承 DijsktraShortestPath...） 创建新 GraphType（继承 DirectedSparseMultigraph...）

谢谢你回答家伙;）！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T21:50:02.583

如果您试图最小化总行程时间，那么这确实不是最短路径问题，而是另一种离散优化问题。JUNG 不提供离散优化问题的通用求解器。

即使您只是试图最小化飞行时间（即在空中花费的时间），那么您也需要能够在每一步过滤图形（更准确地说，是传出边），因为只有在先前的航班到达是相关的，即本地拓扑是时间的函数。

# c# - 如何为此进行 LINQ 查询？

> ID：15180543
> 
> 赞同：1
> 
> 时间：2013-03-02T23:14:24.213
> 
> 标签：c#, linq

好的，现在卡了一天，请有人帮忙！

我想选择特定客户拥有的所有可能物品的数量，无论他们是否订购了该物品。因此，如果他们没有订购它（即它不在 Orders 表中），则为数量返回 0 值。

**订单** *CustomerId ItemId*数量

**项目** *ItemId*项目 名称

**客户** *CustomerId* CustomerName

我猜这将涉及某种子查询，但真的不确定。

```
from c in customers
join o in Orders
on c.CustomerId == o.CustomerId
select c.CustomerName, o.Quantity
where c.CustomerId == customerId 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T00:54:27.703

LINQ 表达式

```
from c in Customers
from i in Items
select ... 
```

是所有客户和项目的[交叉连接](https://stackoverflow.com/questions/56547/how-do-you-perform-a-cross-join-with-linq-to-sql)。所以剩下要做的就是总结每个的数量：

```
var result = from c in Customers
             from i in Items
             select new
             {
                 Customer = c,
                 Item = i,
                 Quantity = (from o in Orders
                             where o.CustomerId == c.CustomerId && o.ItemId == i.ItemId
                             select o.Quantity).Sum(),
             }; 
```

请注意，如果`Sum`为空`IEnumerable<int>`（即未找到订单），则返回 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T00:06:40.983

在 SQL 中，这很简单：

```
select  c.name
,       i.name
,       isnull(sum(o.quantity),0)
from    customers c
cross join
        items i
left join
        orders o
on      o.customerid = c.customerid
        and o.itemid = o.itemid
group by
        c.name
,       i.name 
```

翻译成 LINQ，这变成：

```
from c in Customers
from i in Items 
join o in Orders 
    on new { c.Customerid, i.Itemid } 
    equals new { o.Customerid, o.Itemid } 
    into o1
from o2 in o1.DefaultIfEmpty()
group o2.Quantity
    by new { CustomerName = c.Name, ItemName = i.Name }
    into q
select new { 
    q.Key.CustomerName, 
    q.Key.ItemName, 
    Quantity = q.Sum() ?? 0 
} 
```

我希望其他人发布一个更简单的 LINQ 版本，因为这看起来非常复杂:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T00:15:14.550

这个引起了我的兴趣，所以我编写了一个控制台应用程序来做到这一点。

Andomar 在我回答之前（+1）回答了我。这是我的独立解决方案，但非常接近他的，并不简单......

```
class Program {
    private class CustomerDto {
        public int CustomerId { get; set; }
        public string CustomerName { get; set; }
    }
    private class ItemDto {
        public int ItemId { get; set; }
        public string ItemName { get; set; }
    }
    private class OrderDto {
        public int Id { get; set; }
        public int ItemId { get; set; }
        public int CustomerId { get; set; }
        public int Quantity { get; set; }
    }
    private class CustomerOrderDto {
        public int CustomerId { get; set; }
        public int ItemId { get; set; }
        public int TotalQuantity { get; set; }
    }

    static void Main(string[] args) {
        List<CustomerDto> Customers = new List<CustomerDto>() { 
            new CustomerDto() { CustomerId = 1, CustomerName = "one"},
            new CustomerDto() { CustomerId = 2, CustomerName = "two"},
            new CustomerDto() { CustomerId = 3, CustomerName = "three"}
        };
        List<ItemDto> Items = new List<ItemDto>() { 
            new ItemDto() { ItemId = 1, ItemName = "item one"},
            new ItemDto() { ItemId = 2, ItemName = "item two"},
            new ItemDto() { ItemId = 3, ItemName = "item three"}
        };
        // customer1 has 2 orders for item 1, 0 for item 2 or 3
        // customer2 has 1 order for item 2, 0 for item 1 or 3
        // customer3 has 1 order for item 2, 1 order for item 3 and 0 for item 1
        List<OrderDto> Orders = new List<OrderDto>() { 
            new OrderDto() { Id = 1, CustomerId = 1, ItemId = 1, Quantity = 3 },
            new OrderDto() { Id = 1, CustomerId = 1, ItemId = 1, Quantity = 5 },
            new OrderDto() { Id = 1, CustomerId = 3, ItemId = 2, Quantity = 5 },
            new OrderDto() { Id = 1, CustomerId = 3, ItemId = 3, Quantity = 5 },
            new OrderDto() { Id = 1, CustomerId = 2, ItemId = 2, Quantity = 5 }
        };
        List<CustomerOrderDto> results = (from c in Customers
                                          from i in Items
                                          join o in Orders on
                                            new { c.CustomerId, i.ItemId } equals
                                            new { o.CustomerId, o.ItemId } into oj
                                          from o in oj.DefaultIfEmpty()
                                          let x = o ?? new OrderDto() { CustomerId = c.CustomerId, ItemId = i.ItemId, Quantity = 0 }
                                          group x by new { x.CustomerId, x.ItemId } into g
                                          select new CustomerOrderDto() {
                                              CustomerId = g.Key.CustomerId,
                                              ItemId = g.Key.ItemId,
                                              TotalQuantity = g.Select(x => x.Quantity).Sum()
                                          }
                                          ).ToList();
        foreach (var result in results) {
            Console.WriteLine("Customer {0} purchased {1} units of item {2}",
                result.CustomerId, result.TotalQuantity, result.ItemId);
        }
        Console.ReadKey(true);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T00:14:24.790

林克

```
from t in Customers
join t2 in Orders on t.CustomerId equals (int)t2.CustomerId into t2Join
from t2 in t2Join.DefaultIfEmpty()
group t by t into t_g
select new 
      { 
       CustomerId = t_g.Key.CustomerId, 
       OrdersId = t_g.Key.OrdersId,
       Quantity = t_g.Key.Orders.Where(c => c.CustomerId == t_g.Key.CustomerId)
                                .Sum(c => c.Quantity) 
      }; 
```

这未经测试，但您可以尝试。

# python - python - 函数内的列表分配

> ID：15180544
> 
> 赞同：0
> 
> 时间：2013-03-02T23:14:40.557
> 
> 标签：python, class, variable-assignment

我是 Python 新手，我正在尝试使用函数将元素添加到对象拥有的列表中。这是我的代码的简化版本：

```
class TElement:
    vec = []

class GTop:

    ElList = []

    def AddElement(self, vect):
        NewEl = TElement() 
        for i in range(len(vect)): 
            NewEl.vec.append(vect[i])

        self.ElList.append(NewEl)

myvec1 = ["a",1,2,"b"]
myvec2 = ["a","c",2,"b"]

Mytop = GTop()

Mytop.AddElement(myvec1)

Mytop.AddElement(myvec2) 
```

使用上面的代码，我得到：

Mytop.ElList[0].vec = ['a', 1, 2, 'b']

Mytop.ElList[1].vec = ['a', 1, 2, 'b', 'a', 'c', 2, 'b']

虽然我想要：

Mytop.ElList[0].vec = ['a', 1, 2, 'b']

Mytop.ElList[1].vec = ['a', 'c', 2, 'b']

出于某种原因，当我退出 AddElement 函数时，NewEl 没有被删除。你能澄清我做错了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T23:31:11.843

如果你`TElement`这样改变，你应该得到你期望的输出：

```
class TElement:
    def __init__(self):
        self.vec = [] 
```

正如@delnan 在评论中指出的那样，请阅读另一个答案，它解释得很好。

[为什么属性引用在 Python 继承中会这样？](https://stackoverflow.com/questions/206734/why-do-attribute-references-act-like-this-with-python-inheritance)

# wpf - 将值传递给属性的用户控件绑定

> ID：15180554
> 
> 赞同：2
> 
> 时间：2013-03-02T23:16:35.327
> 
> 标签：wpf, silverlight, xaml, windows-8, winrt-xaml

由于 Windows8 还没有充实的 DatePicker，所以我决定按照一些示例进行操作，然后自己动手。

它本身工作正常，但现在我有了要预先填充 DatePicker 的日期。

我在下面的 DatePicker.xaml.cs 文件中创建了一个属性：

```
public DateTime dateVal
{
    get
    {
        return m_dateVal;
    }
    set
    {
        m_dateVal = value;
    }
} 
```

然后在显示 DatePicker 控件的页面中，我尝试绑定到该属性：

```
<dp:DatePicker Foreground="Black" Height="100" Margin="10,25" Grid.Column="1" VerticalAlignment="Center" BorderBrush="Black" BorderThickness="1" dateVal="{Binding repairInfoSingle.repairDate, Mode=TwoWay}"/> 
```

但是，进入 DatePicker.xaml.cs 文件时，dateVal 属性从未填充过我传递给它的日期。

然后我在输出窗口中得到一个错误：

> WinRT 信息：未能分配给属性“aG.Common.DatePicker.dateVal”。[行：125 位置：170]

我希望传递日期，然后在构造函数中我可以`SelectedIndex`通过解析月、日和年来设置值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T23:26:25.613

如果你想绑定到一个属性（例如 use `DateVal={Binding ...}`） - DateVal 不能是一个常规的 CLR 属性。
您需要将其更改为**[DependencyProperty](http://msdn.microsoft.com/en-us/library/system.windows.dependencyproperty.aspx)**

所以在你的例子中：

```
public DateTime DateVal
{  
    get { return (DateTime) GetValue(DateValProperty); }  
    set { SetValue(DateValProperty, value); } 
}

public static readonly DependencyProperty DateValProperty = 
  DependencyProperty.Register("DateVal", typeof(DateTime), typeof(DatePicker),
  new PropertyMetadata(DateTime.MinValue)); 
```

现在它应该可以正常工作了：

```
<dp:DatePicker DateVal="{Binding repairInfoSingle.repairDate, Mode=TwoWay}"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T23:29:23.013

如果你想绑定一个值，你`dateVal`必须在`dateVal``DependancyProperty``DatePicker.xaml.cs`

```
 public DateTime DateVal
    {
        get { return (DateTime)GetValue(DateValProperty); }
        set { SetValue(DateValProperty, value); }
    }

    public static readonly DependencyProperty DateValProperty =
        DependencyProperty.Register("DateVal", typeof(DateTime), typeof(DatePicker), new PropertyMetadata(DateTime.MinValue)); 
```

# haskell - 证明类型级析取的幂等性

> ID：15180557
> 
> 赞同：23
> 
> 时间：2013-03-02T23:16:43.987
> 
> 标签：haskell

我已经定义了类型级析取如下：

```
{-# LANGUAGE DataKinds, TypeFamilies #-}

type family Or (a :: Bool) (b :: Bool) :: Bool
type instance Or False a = a
type instance Or True a = True 
```

现在我想证明（在 Haskell 中）它是幂等的。也就是说，我想`idemp`用类型构建一个术语

```
idemp :: a ~ b => proxy (Or a b) -> proxy a 
```

这在操作上等同于`id`。（显然，我可以将其定义为`unsafeCoerce`，但这是作弊。）

是否可以？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-03T11:13:46.593

你要求的东西是不可能的，但很像它可能会做的事情。这是不可能的，因为证明需要对类型级别的布尔值进行案例分析，但是您没有数据可以让您发生此类事件。解决方法是通过单例仅包含此类信息。

首先，让我注意你的 for 类型`idemp`有点模糊。约束`a ~ b`只是将同一事物命名两次。以下类型检查：

```
idemq :: p (Or b b) -> p b
idemq = undefined
idemp :: a ~ b => p (Or a b) -> p a
idemp = idemq 
```

（如果您有一个不包含的约束`a ~ t`，通常最好替换为。例外情况是在声明中：实例中的头部将匹配任何内容，因此即使该内容尚未明显变为 ，该实例也会触发。但我离题。）`t``a``t``a``instance``a``t`

我声称`idemq`无法定义，因为我们没有关于`b`. 唯一可用的数据存在`p`于某物中，我们不知道是什么`p`。

我们需要根据案例进行推理`b`。请记住，对于一般递归类型族，我们可以定义类型级别的布尔值，它们既不是`True`也不是`False`。如果我打开`UndecidableInstances`，我可以定义

```
type family Loop (b :: Bool) :: Bool
type instance Loop True = Loop False
type instance Loop False = Loop True 
```

所以`Loop True`不能简化为`True`or `False`，而且在局部更糟的是，没有办法证明

```
Or (Loop True) (Loop True) ~ Loop True     -- this ain't so 
```

没有办法摆脱它。我们需要运行时证据来证明我们`b`是表现良好的布尔值之一，它以某种方式计算出一个值。让我们*歌唱*

```
data Booly :: Bool -> * where
  Truey   :: Booly True
  Falsey  :: Booly False 
```

如果我们知道`Booly b`，我们可以做一个案例分析，它会告诉我们是什么`b`。然后每个案例都会顺利通过。这就是我的玩法，使用定义的相等类型`PolyKinds`来打包事实，而不是抽象使用 uses `p b`。

```
data (:=:) a b where
  Refl :: a :=: a 
```

我们的关键事实现在被清楚地陈述和证明：

```
orIdem :: Booly b -> Or b b :=: b
orIdem Truey   = Refl
orIdem Falsey  = Refl 
```

我们可以通过严格的案例分析来部署这个事实：

```
idemp :: Booly b -> p (Or b b) -> p b
idemp b p = case orIdem b of Refl -> p 
```

案例分析必须严格，以检查证据不是一些循环的谎言，而是一个诚实的善良`Refl`默默地打包只是`Or b b ~ b`修复类型所需的证据。

如果您不想明确地使用所有这些单例值，您可以按照 kosmikus 的建议，将它们隐藏在字典中，并在需要时提取它们。

Richard Eisenberg 和 Stephanie Weirich 有一个 Template Haskell 库，可以为您处理这些家庭和类。她也可以构建它们并让您编写

```
orIdem pi b :: Bool. Or b b :=: b
orIdem {True}   = Refl
orIdem {False}  = Refl 
```

其中`pi b :: Bool.`扩展为`forall b :: Bool. Booly b ->`。

但它是如此的闲聊。这就是为什么我的团队正在努力`pi`向 Haskell 添加一个实际的量词，它是一个非参数量词（与`forall`和不同`->`），它可以由 Haskell 类型语言和术语语言之间的非平凡交集中的东西实例化。这`pi`也可能有一个“隐式”变体，其中参数默认保持隐藏。两者分别对应使用单例族和类，但不需要定义数据类型三遍来获得额外的工具包。

It might be worth mentioning that in a total type theory, it is *not* needed to pass the extra copy of the Boolean `b` at run time. The thing is, `b` is used only to make the proof that data may be transported from `p (Or b b)` to `p b`, not necessarily to make the data being transported. We don't compute under binders at run time, so there's no way to cook up a dishonest proof of the equation, hence we can erase the proof component and the copy of `b` that delivers it. As Randy Pollack says, *the best thing about working in a strongly normalizing calculus is not having to normalize things*.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-03T10:53:14.623

正如 John L 在他的评论中所说，据我所知，目前没有额外的限制就无法做到这一点。您无法利用`Bool`术语级别上的封闭类型这一事实，并且无法对 .in 中的类型变量进行案例`Bool`分析`idemp`。

典型的解决方案是使用单例类型在术语级别上反映`Bool`种类结构：

```
data SBool :: Bool -> * where
  SFalse :: SBool False
  STrue  :: SBool True 
```

对于任何`b :: Bool`，只有一个（当然是`SBool b`模）的居民。`undefined`

有了`SBool`，这个定理就很容易证明了（我不知道你为什么添加了额外的等式约束，我要去掉它）：

```
idemp' :: SBool a -> proxy (Or a a) -> proxy a
idemp' SFalse x = x
idemp' STrue  x = x 
```

您可以通过定义一个可以创建`SBool`表示的类来隐式传递参数，而不是显式传递参数：

```
class CBool (b :: Bool) where
  sBool :: SBool b

instance CBool True  where sBool = STrue
instance CBool False where sBool = SFalse 
```

然后：

```
idemp :: CBool a => proxy (Or a a) -> proxy a
idemp = idemp' sBool 
```

我认为您无法摆脱`CBool`约束，但是对于 any 来说这都是微不足道的`a :: Bool`，因此这不是一个非常强的假设。

# sql - 在函数 (SQL Server) 中执行动态 sql 时出错？

> ID：15180561
> 
> 赞同：19
> 
> 时间：2013-03-02T23:17:12.640
> 
> 标签：sql, sql-server-2008, function

我创建了一个函数来执行动态 SQL 并返回一个值。我得到“只有函数和一些扩展的存储过程可以从一个函数中执行。” 作为一个错误。

功能：

```
Create Function fn_GetPrePopValue(@paramterValue nvarchar(100))
returns int as
begin
declare @value nvarchar(500);

Set @SQLString  = 'Select Grant_Nr From Grant_Master where grant_id=' + @paramterValue

exec   sp_executesql
       @query = @SQLString,       
       @value = @value output

return @value   
end 
```

执行：

```
Select dbo.fn_GetPrePopValue('10002618') from Questions Where QuestionID=114 
```

和：

```
Select fn_GetPrePopValue('10002618') from Questions Where QuestionID=114 
```

函数被正确调用还是函数不正确？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-02T23:28:16.770

您不能从函数中使用动态 SQL，也不能调用存储过程。

```
Create proc GetPrePopValue(@paramterValue nvarchar(100))
as
begin
declare @value nvarchar(500),
        @SQLString nvarchar(4000)

Set @SQLString = 'Select @value = Grant_Nr From Grant_Master where grant_id = @paramterValue'

exec sp_executesql @SQLString, N'@paramterValue nvarchar(100)', 
       @paramterValue, 
       @value = @value output

return @value   
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T23:35:58.830

函数的使用受到限制，因此您可以在查询中使用它们，而不会意外做出会导致糟糕性能的事情。使用动态查询就是其中之一，因为这会导致每次执行的查询计划，并且还会使函数无法成为查询计划的一部分。

在这种情况下，您根本不需要动态查询，只需返回值：

```
Create Function fn_GetPrePopValue(@paramterValue nvarchar(100))
returns int as
begin

return (select Grant_Nr From Grant_Master where grant_id = @paramterValue)

end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T23:31:09.207

我认为您不能从函数中使用动态 SQL，我认为您也不需要这样做。看起来你想要更接近这个的东西：

```
Create Function dbo.fn_GetPrePopValue(@paramterValue nvarchar(100))
returns int as
begin
  declare @value int
  declare @SQLString varchar(MAX)

  Select @value=Grant_Nr From Grant_Master where grant_id=@paramterValue

  return @value
end 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/a7a4c/1)

另外，请检查您的数据类型以确保您的字段正确。为 id 传入一个 varchar 并为另一个字段返回一个 int 似乎很奇怪。无论哪种方式，这应该可以帮助您朝着正确的方向前进。

# arrays - Matlab中如何识别哪个单元格具有最小值？

> ID：15180567
> 
> 赞同：0
> 
> 时间：2013-03-02T23:17:29.843
> 
> 标签：arrays, matlab, cell

我目前有以下单元格：

G=细胞（4,2）

每个销售都有一个`2x1 double`

例子 ：

```
[100;200]   [20;60]
[100;300]   [20;90]
[200;300]   [60;90]
[]  []      []  [] 
```

如何确定哪个单元格具有最小值（比较的值在 SECOND 列中），以便加法在 20;60 20;90 和 60;90 之间？

我开始输入代码但卡住了：

```
for k=1:(4)
    add(k)=sum(cell2mat(G(k+4)))
end

(...Find a way to know which cell gave the minimum off `add` using min(add)...) 
```

但是我不知道如何确定哪个单元格具有最小值.. 我正在寻找的答案应该表明最小值在**单元格 G 的第 2 列第 1 行**，因此：20;60

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T23:39:41.550

`G[{:}]`将单元格数组（按列）排列为二维矩阵（对应于每个单元格条目的第一个和第二个元素的行

```
ans =

   100   100   200    20    20    60
   200   300   300    60    90    90 
```

然后，您可以`min`相应地应用以获取单元格上的最小值和线性索引，例如：

```
[minVal, minIndex] = min([G{:}], [], 2); 
```

**更新：**由于元素的总和被定义为最小值（L1 范数），您可以使用[cellfun](http://www.mathworks.com/help/matlab/ref/cellfun.html)检测空条目并在每个条目中求和，然后再应用`min`结果数组：

```
indexEmpty = cellfun(@isempty, G)  % find empty entries of G
sumG = cellfun(@sum, G)            % apply sum on each entry of G 
sumG(indexEmpty) = nan;            % set empty entries to NaN (exclude from min) 
[minVal, minIndex] = min(sumG(:)); % return min and its location in sumG (and G) 
```

结果：`G{minIndex}`

```
ans =

   20
   60 
```

`minIndex`可以使用[ind2sub](http://www.mathworks.com/help/matlab/ref/ind2sub.html)将线性索引转换为数组下标。

```
[i,j] = ind2sub(size(G), minIndex); 
```

通过这种方式，您可以使用`G{minIndex}`(ie, 5) 和`G{i,j}`(ie, 1,2) 来索引数组。

# java - 如何处理处理表中的不完整数据？

> ID：15180570
> 
> 赞同：0
> 
> 时间：2013-03-02T23:18:01.630
> 
> 标签：java, processing

我正在使用 Processing 的`Table`界面解析 CSV，但有些行缺少一些数据。我想将所有可用的数据提取到我的表中，但我不确定如何处理丢失的数据——当我用缺失值`NullPointerException`遍历表时，我一直在获取。`dataTable.getInt`

我没有静态类型语言的背景，所以我不知道如何有条件地分配这些数据，而不是在每个分配周围放置一个单独的`try`/ 。`catch`肯定有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T23:23:35.733

在调用 dataTable.getInt 方法之前检查 dataTable 是否不为空

```
if(dataTable != null) {
    int my_nt = dataTable.getInt

}
//else skip since it is empty 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T23:25:35.153

由于您使用的是 getInt--您应该执行`regex search/replace ,<not numeric>, with ,<some int>,`. 在您的情况下，它可能就像用 ,0 替换 ,,

此外，正如 Hassan 所建议的，请仔细检查 dataTable 是否为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T23:32:38.460

好的，所以我想出了一个方法来做到这一点：

首先， call `dataTable.makeNullEmpty()`，它将所有空值转换为空字符串。

然后，您可以使用这样的模式：

```
String total_value = dataTable.getString(i, 4);
if(total_value.length() > 0) s.total_value = parseInt(total_value); 
```

并且只有在需要解析 int 时才能获得分配。

# objective-c - 向 CCCallFuncND 中不兼容类型的参数发送“CGPoint”

> ID：15180574
> 
> 赞同：0
> 
> 时间：2013-03-02T23:18:27.560
> 
> 标签：objective-c, cocos2d-iphone

Xcode 中的错误为：**将 CGPoint (aka 'struct CGPoint') 发送到不兼容类型 'void *' 的参数**

我正在做的是：

```
CCSprite* coordinate= path[i];
CGPoint posSending = coordinate.position;
id handleTail = [CCCallFuncND actionWithTarget:self selector:@selector(handleTail:)data:posSending];

//handleTail
-(void)handleTail:(CGPoint)pos{

} 
```

是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T23:24:27.080

CCCallFuncND 不适用于结构类型（也不适用于 ARC）。

改用块版本，更容易，更强大：

```
CGPoint posSending = coordinate.position;
id handleTail = [CCCallBlock actionWithTarget:self block:^{
    // do something with posSending:
    someNode.position = posSending;
}]; 
```

仅供参考，错误是因为您尝试将类型分配给`CGPoint`类型`void*`。即使您确实通过使用地址运算符 ( `&posSending`) 来使用 CGPoint 的地址，您也会在您的 handleTail 方法中收到垃圾。在调用该方法时，指向 posSending 的指针不再有效，因为 posSending 是在堆栈上创建的。

有人可能认为 malloc'ing CGPoint 会起作用，并且确实如此 - 但是使用起来并不安全，因为无法保证会调用 handleTail 方法（由于场景更改或 stopAction 调用）。因此，不能保证接收方法实际上可以释放那个 malloc 的指针。

此外，您的 handleTail 方法声明不正确，它接收一个 void* 参数：

```
-(void)handleTail:(void*)data
{
} 
```

所有这一切，一个要点：随时随地使用积木。

# clojure - 线程主线程中的 Clojure 异常

> ID：15180580
> 
> 赞同：2
> 
> 时间：2013-03-02T23:19:24.770
> 
> 标签：clojure

我正在尝试学习 Clojure，为此我安装了最新的 Clojure 和 Leiningen，因此我创建了一个新的 lein 项目并将 :main helloclojure.core 条目添加到 project.clj 但是当我尝试运行该项目时，我得到了以下错误：

> 线程“main”中的异常 java.lang.ClassNotFoundException: helloclojure.core
> at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
> at java.security.AccessController.doPrivileged(Native Method)
> at java.net.URLClassLoader。 findClass(URLClassLoader.java:190)
> 在 clojure.lang.DynamicClassLoader.findClass(DynamicClassLoader.java:61)
> 在 java.lang.ClassLoader.loadClass(ClassLoader.java:306)
> 在 java.lang.ClassLoader.loadClass(ClassLoader.java :247)
> 在 java.lang.Class.forName0(Native Method)
> 在 java.lang.Class.forName(Class.java:249)
> 在 clojure.lang.RT.classForName(RT.java:2039)
> 在 clojure.lang。 Reflector.invokeStaticMethod(Reflector.java:199)
> 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
> 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
> 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
> 在 java.lang.reflect.Method .invoke(Method.java:597)
> at clojure.lang.Reflector.invokeMatchingMethod(Reflector.java:93)
> at clojure.lang.Reflector.invokeStaticMethod(Reflector.java:207)
> at user$eval12.invoke(NO_SOURCE_FILE:1)
> 在 clojure.lang.Compiler.eval(Compiler.java:6511)
> 在 clojure.lang.Compiler.eval(Compiler.java:6501)
> 在 clojure.lang.Compiler.eval(Compiler.java:6477)
> 在 clojure.core$ eval.invoke(core.clj:2797)
> 在 clojure.main$eval_opt.invoke(main.clj:297)
> 在 clojure.main$initialize.invoke(main.clj:316)
> 在 clojure.main$null_opt.invoke(main.clj:349)
> 在 clojure.main$ main.doInvoke(main.clj:427)
> at clojure.lang.RestFn.invoke(RestFn.java:421)
> at clojure.lang.Var.invoke(Var.java:419)
> at clojure.lang.AFn.applyToHelper(AFn .java:163)
> 在 clojure.lang.Var.applyTo(Var.java:532)
> 在 clojure.main.main(main.java:37)

但我不知道出了什么问题。

这是我的 project.clj 文件：

```
(defproject helloclojure "0.1.0-SNAPSHOT"
  :description "FIXME: write description"
  :main helloclojure.core
  :url "http://example.com/FIXME"
  :license {:name "Eclipse Public License"
            :url "http://www.eclipse.org/legal/epl-v10.html"}
  :dependencies [[org.clojure/clojure "1.4.0"]]) 
```

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T23:50:49.487

当您`:main`像这样将关键字添加到 project.clj 时，它应该指向一个包含名为 的函数的命名空间`-main`。这个命名空间应该生成一个真正的 Java 类，你可以在你的命名空间定义中使用 :gen-class 关键字来做到这一点。

所以为了这个工作，我希望你有一个源文件：

`src/helloclojure/core.clj`

至少包含以下内容：

```
(ns helloclojure.core
  (:gen-class))

(defn -main [& args]
  (println args)) 
```

# ruby-on-rails - Devise 是否缓存身份验证数据？

> ID：15180582
> 
> 赞同：1
> 
> 时间：2013-03-02T23:19:37.713
> 
> 标签：ruby-on-rails, devise

我在这里遇到了这种奇怪的情况。我为我的 Rails 后端 API 开发了一个基于 JavaScript 的前端。

我有一个登录表单，将用户名和密码发布给我`TokensController`，返回`authentication_token`存储在数据库中的数据。此令牌存储在 cookie 中，并与每个表单一起提交。

现在我想实现一个注销功能。因此，我删除了 cookie，因此请求中不会提交任何令牌。（或者一个错误的，在这种情况下，标题是`Authentication: Token token="undefined"`）

但是`200 OK`，尽管定义了错误的标记，Rails 后端仍会返回所有数据。这怎么可能？是否有任何其他会话缓存用于验证请求？

这是我实现身份验证的超类：

```
module Api
  class SecureBaseController < ApplicationController

    prepend_before_filter :get_auth_token
    before_filter :authenticate_user!

    protected
    def get_auth_token
      puts token_value
      params[:auth_token] = token_value
    end

    def token_value
      if header && header =~ /^Token token="(.+)"$/
      $~[1]
      end
    end

    def header
      request.headers["Authorization"]
    end

  end
end 
```

甚至`puts`在控制台中打印“未定义”，正如 Web 应用程序提交的那样，但它正确地验证了用户？

# actionscript-3 - 退出框架时卸载 .swf

> ID：15180584
> 
> 赞同：0
> 
> 时间：2013-03-02T23:19:54.927
> 
> 标签：actionscript-3, function, parent-child, flash-cs5

我意识到以前有人问过这个问题，我已经尝试了所有大多数解决方案，但无济于事。在我的 Flash 文件中，我在 goGallery 框架中加载了一个外部 .swf，但现在当我转到另一个框架时，.swf 文件仍在后台。

下面是代码，如果您还可以告诉我在哪里放置新代码，那就太好了，因为我已经多次尝试将解决方案放入其中和周围。

```
stop();

function listenerFunction (Event):void{
}

function goHome (e:MouseEvent):void{
    gotoAndStop("Home");
}
home_btn.addEventListener(MouseEvent.CLICK, goHome);

function goAbout (e:MouseEvent):void{
    gotoAndStop("About");
}
about_btn.addEventListener(MouseEvent.CLICK, goAbout);

function goHistory (e:MouseEvent):void{
gotoAndStop("History");
}
history_btn.addEventListener(MouseEvent.CLICK, goHistory);

function goEducation (e:MouseEvent):void{
gotoAndStop("Education");
}
education_btn.addEventListener(MouseEvent.CLICK, goEducation);

function goInterests (e:MouseEvent):void{
gotoAndStop("Interests");
}
interests_btn.addEventListener(MouseEvent.CLICK, goInterests);

function goGoals (e:MouseEvent):void{
gotoAndStop("Goals");
}
goals_btn.addEventListener(MouseEvent.CLICK, goGoals);

function goPuzzle (e:MouseEvent):void{
gotoAndStop("Puzzle");
}
puzzle_btn.addEventListener(MouseEvent.CLICK, goPuzzle);

function goSound (e:MouseEvent):void{
gotoAndStop("Sound");
}
sound_btn.addEventListener(MouseEvent.CLICK, goSound);

function goGallery (e:MouseEvent):void{
gotoAndStop("Gallery");
var myLoader:Loader = new Loader();                    
var url:URLRequest = new URLRequest("gallery.swf"); 
myLoader.load(url);                                     
addChild(myLoader);

myLoader.x = 380;                                         
myLoader.y = 270;

myLoader.scaleX = 0.45; 
myLoader.scaleY = 0.45; 

}

gallery_btn.addEventListener(MouseEvent.CLICK, goGallery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T01:02:29.817

`myLoader`当您不希望它出现在舞台上时，您需要保留对它的引用并删除它。

```
var galleryLoader:Loader = new Loader();

function goGallery (e:MouseEvent):void{
    gotoAndStop("Gallery");

    var url:URLRequest = new URLRequest("gallery.swf"); 
    galleryLoader.load(url);                                     
    addChild(galleryLoader);
} 
```

在其他函数中删除 galleryLoader ：

```
function goHome (e:MouseEvent):void{
    removeGallery();
    gotoAndStop("Home");
}

function removeGallery():void
{
    if(galleryLoader.parent)
       galleryLoader.parent.removeChild(galleryLoader);
} 
```

# css - 在 Blogger 的简单模板中自定义页脚背景图像

> ID：15180588
> 
> 赞同：1
> 
> 时间：2013-03-02T23:21:07.390
> 
> 标签：css, templates, blogger

我一直在尝试自定义 Blogger 的简单模板，并且在获取页脚外部匹配的背景图像时遇到了困难 - 我仍在学习 CSS，但不确定左侧的填充来自何处或如何获取它以完全掩盖最底部 body-fauxcolumn-outer 的重复背景。或者即使这是最好的编码方式。请帮忙！

[http://fantasyartofetsy.blogspot.com/](http://fantasyartofetsy.blogspot.com/)

这是我编辑的代码 -

```
.footer-outer {
width: 1000px;
background: url(http://i1192.photobucket.com/albums/aa324/faeteam/fae-bg-bottom.jpg) no-repeat top center;
background-color: #093e60; 
```

}

```
.body-fauxcolumn-outer {
background: url(http://i1192.photobucket.com/albums/aa324/faeteam/fae-bg-middle.jpg) center;
background-repeat:repeat-y; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T23:33:52.137

通过以下修改似乎更好：

```
.content-inner {
    10px 60px 0 10px;
} 
```

我猜背景图像现在按预期水平显示，但在蓝色背景上的图像上仍然显示一半的文本。你希望它显示在哪里？

编辑：也许还修改：

```
.footer-inner {
    padding: 80px 15px 0 15px;
} 
```

# actionscript-3 - 如何通过另一个类改变文档类中某个变量的值？

> ID：15180590
> 
> 赞同：0
> 
> 时间：2013-03-02T23:21:14.980
> 
> 标签：actionscript-3, flash

这是我的问题。在我的文档类 TowerDefenseGame.as 中，我定义了一个变量 Turrent1Flag：

```
package 
{
import flash.display.MovieClip;
import flash.events.*;
import flash.display.Sprite;
import flash.display.Shape;
import flash.text.TextField;
import flash.text.TextFormat;
import flash.text.TextFieldType;

public class TowerDefenseGame extends MovieClip
{
       public var Turrent1Flag==0;
}

public function TowerDefenseGame()
{
  ......
} 
```

现在，在另一个类 Turrent1Button.as 中，我需要创建一个鼠标单击事件，通过该事件将 Turrent1Flag 设置为 1：

```
package 
{
import flash.display.MovieClip;
import flash.events.*;
import flash.display.Sprite;
import TowerDefenseGame;

public class TurretButton1 extends MovieClip
{
    public var ButtonBase:Sprite=new Sprite();
    public var TurretBase:Sprite=new Sprite();
    public var Gun:Sprite=new Sprite();

    public function TurretButton1()
    {
               ......
       this.addEventListener(MouseEvent.CLICK, MouseClick);
    }

    public function MouseClick(event:MouseEvent):void
    {
        MovieClip(root).Turret1Flag = 1;
    } 
```

好吧，这行不通。我正在使用 Adob​​e flash cs6，它说无法访问该值。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:10:51.110

因此，首先，AS3 让您在 AS2 中习惯做的事情变得困难，以允许更好的面向对象实践。当您在班级之间保持高而紧密的墙壁时，更改A班变得更容易，而不会对B班产生任何影响。B班只知道门窗是进入A班房屋的“官方”通道，所以移动沙发没关系。您还可以非常轻松地将具有相似门窗的 C 类替换为 A 类。

当你通过引入全局状态来穿墙时，你不能在不改变 A 类的情况下用 C 类替换 B 类，因为 A 类直接引用 B 类并且知道沙发在哪里。

处理此问题的一种方法是通过[控制反转](http://www.developria.com/2009/09/as3-dependency-injection-demys.html)(IoC)。因此，对于我们的房子，沙发可能是从外部提供的，并且提供的任何组件都可能保留对它的引用，因此无论它在房子的哪个位置，它都可以访问沙发。因此，您可以选择创建您的`TurretButton`并将其传递给拥有它的任何人，同时您`TowerDefenseGame`保留对它的引用并直接收听它，并更改其*自己的*标志以响应点击。

查看您的代码，您可能不需要走那么远，因为我没有看到任何迹象表明您`TurretButton`实际上是嵌套的。在这种情况下，您可以直接收听它，无论您是在舞台上创建它还是通过代码创建它（我不喜欢）。如果您在 IDE 中使用舞台并且它存在于舞台上，那么只需创建一个类型的公共变量`TurretButton`（或者您可能可以使用`SimpleButton`，因为您不再需要基于您显示的代码的特殊类）。该实例将在您的构造函数中可用`TowerDefenseGame`. 只需将您的事件侦听器添加到其中，然后侦听器和您要更改的变量在同一范围内。因此，你试图解决的问题从来不存在——你只是从一个过于复杂的角度看待问题。

实际上，如果您的代码以一种未显示的*方式*嵌套，您可以使用 ActionScript 3 的事件系统（非常棒）来处理该问题，而无需引入直接耦合，也无需通过代码创建按钮并将其下推到它在哪里使用。一种方法是只监听任何鼠标点击（因为这是一个冒泡事件）并查看点击了什么。另一种解决方案是从按钮生成自定义事件，然后您可以从顶层监听该事件以更改标志。这看起来像：

```
包视图.按钮 {
   公共类 TurretButton 扩展 MovieClip {
      公共功能炮塔按钮（）{
         极好的（）;
         mouseChildren = 假；
         addEventListener(MouseEvent.CLICK, broadcastTurretEvent);
      }
      受保护的函数broadcastTurretEvent(e:Event):void {
         dispatchEvent(new Event('turretClicked', true));//true参数让它冒泡
      }
   }
}

```

然后你的塔类看起来像

```
包裹 {
   公共类 TowerDefenseGame 扩展 MovieClip {
      //您将其称为 Turret1Flag 的事实表明您将拥有超过 1 个
      protected var turretFlags:Array /*of Boolean*/ = [false, false];
      //你的炮塔按钮实例  
      //不显示嵌套，这只是为了表明
      //这些是命名实例，因此您知道它们的名称
      //它们可以嵌套在任何级别    
      public var turret1:TurretButton;
      public var turret2:TurretButton;
      //...ETC。
      公共功能塔防游戏（）{
         极好的（）;
         addEventListener('turretClicked', onTurretClicked);
      }
      受保护的功能 onTurretClicked(e:Event):void {
         //你也可以只提取数字并做数学运算
         //获取正确的数组索引
         开关（e.target.name）{
            案例“炮塔1”：
               turretFlags[0] = !turretFlags[0];
               休息;
            案例“炮塔2”：
               turretFlags[1] = !turretFlags[1];
               休息;
         }
      }
   }
}

```

请注意这是如何扩展的。您不必为每个按钮设置不同的类来更改每个单独的标志。无需大量代码更改即可添加更多按钮。您可以进一步采用此解决方案并创建一个自定义事件，该事件具有一个属性，说明单击了*哪个*按钮，并且您可以通过依赖注入等提供用于该按钮的值。

我还在我的代码中假设标志应该是布尔值，并且它们在第一次单击时打开，在第二次单击时关闭，等等。您可以采用相同的想法并将其更改为，例如，每增加一次点击。我怀疑您实际上并不想执行您的代码显示的操作，只需单击一下就将其打开，然后永远保持打开状态。

另一个注意事项是，如果您认为您可能希望长期使用 AS3 进行编码，您可能应该学习 AS3 中使用的编码约定。其中之一是类名以大写字母开头，而属性和方法则不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T23:30:29.753

尝试这个：

```
private static var _instance:TowerDefenseGame;
public static function get instance():TowerDefenseGame { return _instance; }

public function TowerDefenseGame() 
{
    _instance = this;
} 
```

* * *

```
public function MouseClick(event:MouseEvent):void
{
       TowerDefenseGame.instance.Turret1Flag = 1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T00:13:40.193

对所有事情都习惯性可能不是一个好习惯，但是静态变量看起来可以在这里工作。

```
public class TowerDefenseGame extends MovieClip
{
    public static var Turrent1Flag = 0;
} 
```

在 Turrent1Button.as 中：

```
public function MouseClick(event:MouseEvent):void
{
    TowerDefenseGame.Turret1Flag = 1;
} 
```

# xml - 使用 JSP 将 MySQL 数据提取为 XML

> ID：15180592
> 
> 赞同：0
> 
> 时间：2013-03-02T23:21:38.403
> 
> 标签：xml, jsp

我在使用 JSP 将 MySQL 数据提取为 XML 格式时遇到了问题。我所有的数据库都在 MySQL 中，我不知道如何使用 JSP 提取它，我需要在 JSP 页面中使用一些命令吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T23:32:30.863

据我所知，JSP 主要用于生成具有程序员定义的结构的 HTML/XHTML/XML - 但不完全是通过转换 MySQL 查询结果。您想要的可能是使用 JAXB（用于 XML 绑定的 Java 体系结构）生成 XML。

基本上，您创建一些对象来存储查询结果（这是 Hibernate 的用途），然后用 XML 配置对它们进行注释/描述绑定，并返回处理结果。

如果您正在使用 Spring 框架，可以通过将您的`@Entity`类与 JAXB 绑定并使用带有注释的操作返回它们来获得`@ResponseBody`。让我们知道您使用 JSP 的具体配置是什么，也许更有经验的人会给您更具体的解决方案。

# ruby-on-rails - 在 Rails 应用程序中本地使用 gem 时找不到文件或常量

> ID：15180594
> 
> 赞同：0
> 
> 时间：2013-03-02T23:21:55.923
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, gem, bundler

我有一个正在制作的宝石，它与 Rails 应用程序位于同一级别。

我正在尝试在 rails 应用程序中使用 gem，但无法使其工作 - 我尝试使用的常量（在 gem 中定义）由于某种原因无法被 rails 应用程序访问。

我在这里做错了什么？我可以采取哪些步骤来开始调试问题的原因？

在 Rails 控制台中，`$:.grep /mygem/`向我展示`["/Users/zabba/mygem/lib"]`

目录结构，包含某些文件的内容：

```
~/mygem/
  lib/
    mygem/
      some_class.rb
        module Mygem
          class SomeClass
          end 
        end
    mygem.rb
      require 'mygem/some_class'

~/railsapp/
    Gemfile:
      gem 'mygem', path: '../mygem', require: 'mygem'
    app/
      models/
        a_model.rb:
          # require 'mygem' cannot find file
          class AModel
            def hello_world
              SomeClass.new # Cannot find constant
              Mygem::SomeClass.new # Cannot find constant
            end
          end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T23:45:33.523

您可以创建一个文件夹`vendor/gems`并在其中复制您的 gem。然后在你的 Gemfile

宝石文件

```
gem 'mygem', :path => "vendor/gems/mygem-0.0.1" 
```

然后`bundle install`

# android - 应用内结算：错误：目前无法处理您的付款

> ID：15180599
> 
> 赞同：4
> 
> 时间：2013-03-02T23:22:16.407
> 
> 标签：android, in-app-billing

回复：由于应用内结算，无法通过 Google Play 商店测试应用内购买：错误：目前无法处理您的付款

我已经完成了一个使用应用内计费的应用程序，允许用户在应用程序内购买一些虚拟产品。我已按照“使用您自己的产品 ID 测试应用内购买”中列出的所有步骤进行操作：

[http://developer.android.com/google/play/billing/billing_testing.html#billing-testing-real](http://developer.android.com/google/play/billing/billing_testing.html#billing-testing-real)

这些是我已采取的测试步骤：

1.  将应用程序作为草稿上传到开发者控制台。
2.  将项目添加到应用程序的产品列表中。
3.  设置测试 Google 帐户
4.  向开发者控制台添加了一个测试 Google 帐户
5.  设置 Google Wallet 以测试 Google 帐户，以我的名义添加付款方式
6.  测试设备恢复出厂设置
7.  重新启动设备并使用新的测试帐户登录
8.  加载的草稿 apk

当我尝试在应用程序中购买商品时，Google 电子钱包会响应：

“错误：此时无法处理您的付款。您可能会收到一封要求您验证帐户的电子邮件。”

我检查了我的 gmail 收件箱，对于每次失败的购买，我都会收到两封电子邮件——第一封是订单收据，第二封是订单取消收据。

我试过等待 24、48 小时并得到相同的响应。

关于如何解决这个问题的任何想法。如果我自己连端到端的流程都无法完成，我还应该如何验证应用内计费是否适用于我的用户。

# javascript - 如何自动选择特定选项

> ID：15180601
> 
> 赞同：1
> 
> 时间：2013-03-02T23:22:42.200
> 
> 标签：javascript, converter, currency, shopify

我的网站使用货币转换器（shopify），即使我的商店接受英镑，我也想自动选择货币美元，以便在进入网站时，价格转换为美元

以下是我的货币转换器代码

```
<label for="currencies">Currency converter </label>
<select id="currencies" name="currencies">
  {% capture codes     %},USD,EUR,GBP,CAD,ARS,AUD,BBD,BDT,BSD,BHD,BRL,BOB,BND,BGN,MMK,KYD,CLP,CNY,COP,CRC,HRK,CZK,DKK    ,DOP,XCD,EGP,XPF,FJD,GHS,GTQ,GYD,GEL,HKD,HUF,ISK,INR,IDR,NIS,JMD,JPY,JOD,KZT,KES,KWD,LVL,LTL,M    XN,MYR,MUR,MDL,MAD,MNT,MZN,ANG,NZD,NGN,NOK,OMR,PKR,PYG,PEN,PHP,PLN,QAR,RON,RUB,SAR,RSD,SCR,SGD    ,SYP,ZAR,KRW,LKR,SEK,CHF,TWD,THB,TZS,TTD,TRY,UAH,AED,UYU,VEB,VND,ZMK,{% endcapture %}
  {% assign supported_codes = settings.supported_currencies | split: ' ' %}
  <option value="{{ shop.currency }}" selected="selected">{{ shop.currency }}</option>
  {% for code in supported_codes %}
    {% if code != shop.currency and codes contains code %}
   <option value="{{ code }}">{{ code }}</option>
    {% endif %}
  {% endfor %}
</select> 
```

如何自动选择美元显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T01:53:46.573

您可以使用 javascript 轻松做到这一点，如下所示：

[http://jsfiddle.net/83wHb/](http://jsfiddle.net/83wHb/)

基本上，您想运行一个脚本 onload 将货币的价值设置为美元。

理想情况下，您希望在加载时运行脚本，或者在呈现选择元素之后立即运行。

```
<script>
document.getElementById('currencies').value = "USD";
//console.log('current value selected: ' + document.getElementById('currencies').value);
</script> 
```

或者（可能更好），您可以像这样在服务器端进行操作：

```
<label for="currencies">Currency converter </label>
<select id="currencies" name="currencies">
    {% capture codes %},USD,EUR,GBP,CAD,ARS,AUD,BBD,BDT,BSD,BHD,BRL,BOB,BND,BGN,MMK,KYD,CLP,CNY,COP,CRC,HRK,CZK,DKK    ,DOP,XCD,EGP,XPF,FJD,GHS,GTQ,GYD,GEL,HKD,HUF,ISK,INR,IDR,NIS,JMD,JPY,JOD,KZT,KES,KWD,LVL,LTL,M    XN,MYR,MUR,MDL,MAD,MNT,MZN,ANG,NZD,NGN,NOK,OMR,PKR,PYG,PEN,PHP,PLN,QAR,RON,RUB,SAR,RSD,SCR,SGD    ,SYP,ZAR,KRW,LKR,SEK,CHF,TWD,THB,TZS,TTD,TRY,UAH,AED,UYU,VEB,VND,ZMK,{% endcapture %}
      {% assign supported_codes = settings.supported_currencies | split: ' ' %}
      <option value="{{ shop.currency }}" >{{ shop.currency }}</option>
      {% for code in supported_codes %}
        {% if code != shop.currency and codes contains code %}
           {% if code == 'USD' %}
              <option value="{{ code }}" selected="selected"> {{ code }}</option>
           {% else %}
              <option value="{{ code }}">{{ code }}</option>
           {% endif %}
         {% endif %}
      {% endfor %}
</select> 
```

# ogre - 子弹物理引擎：为什么重力不加速？

> ID：15180602
> 
> 赞同：2
> 
> 时间：2013-03-02T23:22:46.583
> 
> 标签：ogre, bulletphysics

我有一些质量为 30、恢复为 0.6、摩擦为 0 的刚体。

重力设置为 -15（我也尝试了更高的值，最高可达 -1000）。

刚体下落非常缓慢，也不会加速。

什么可能的事情可能导致这种行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T05:06:46.740

啊，我想通了。这是我的一个愚蠢的错误：我有对象的玩家控制，我用“setLinearVelocity”设置它的速度。这有效地消除了导致其不加速的重力积聚。

# iphone - iphone 谷歌日历活动

> ID：15180605
> 
> 赞同：0
> 
> 时间：2013-03-02T23:23:08.720
> 
> 标签：iphone

几天来，我一直在尝试解决这个问题，并在 google apis 上阅读了很多内容。

简而言之，我正在尝试构建一个基本上显示我的谷歌公共日历但最重要的是获取事件并用它们做一些事情的 Iphone 应用程序。<--稍后可能会提出不同的问题。

我错过了一些简单的东西。我创建了一个 api 密钥并将其与我的 iOS 捆绑包 ID 相关联。但是，我还没有在前提下创建 OAUTH 内容：“当您不需要访问用户数据时，使用 API 密钥来识别您的项目”

我不需要用户数据，只需要我的事件数据。我在这方面是正确的吗？

我已经让 gData 库工作并下载事件，但是，我必须在代码中输入我的电子邮件和密码，这是不可接受的。我*见过*开发人员将他们的用户名和密码放在客户端代码中的代码。是对的吗？

使用我的 API 密钥，我这样做 @" [https://www.googleapis.com/calendar/v3/users/me/calendarList?maxResults=10&key=xxxxxxxx](https://www.googleapis.com/calendar/v3/users/me/calendarList?maxResults=10&key=xxxxxxxx) ";

得到这个：

```
"error": {
  "errors": [
   {
    "domain": "global",
    "reason": "required",
    "message": "Login Required",
    "locationType": "header",
    "location": "Authorization"
   }
  ],
  "code": 401,
  "message": "Login Required"
 }
} 
```

我必须使用oauth吗？我应该从这里去哪里？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:54:40.803

我想我发现我必须使用 oAuth 令牌。这个页面对我最有用 [http://cornempire.net/2012/01/15/part-3-oauth2-and-configuring-your-application-with-google/](http://cornempire.net/2012/01/15/part-3-oauth2-and-configuring-your-application-with-google/)

如果我必须使用 oAuth，我相信这是处理身份验证的最佳方式。虽然我不确定为什么要将我的 API 密钥绑定到我的 iOS 捆绑包 ID。

# c++ - boost::python 是如何工作的？关于实现细节的任何想法？

> ID：15180611
> 
> 赞同：3
> 
> 时间：2013-03-02T23:24:13.410
> 
> 标签：c++, boost, boost-python

我是 boost 的新手，我无法理解它的库之一是 Boost.Python。谁能详细解释一下这种互操作性是如何实现的？在文档中只有几句话关于元编程。PS 我试着看代码，但由于我缺乏 C++ 知识，我不懂原理。提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T23:30:23.017

有两种互操作方式：

1) 从“Python 进程”调用用 C++ 编写的函数。

Python 已经有一个加载 dll 的系统，它们被称为“扩展模块”。Boost.Python 可以编译您的源代码以生成一个。基本上，您编写一个小包装器来声明一个可从 Python 调用的函数，并且“元编程”可以执行诸如检测 C++ 函数采用和返回什么类型之类的事情，以便它可以发出正确的代码来将这些代码从/到等效的 Python 类型。

2) 从“C++ 进程”，启动并控制 Python 解释器。

Python 提供了一个 C API 来执行此操作，而 Boost.Python 知道如何使用它。

# ios - iOS - 如何按顺序执行两个转换？

> ID：15180613
> 
> 赞同：0
> 
> 时间：2013-03-02T23:24:45.203
> 
> 标签：ios, uiview, uiimageview, uiimage, uiviewanimation

我从其他 SO 问题中获取了一些代码，但我一定是在做一些奇怪的事情。应用程序从第一个视图跳转到第三个视图。我想要实现的是：

ViewController 1 Image 1 - 加载图像。快速交叉溶解到 ViewController 1 图像 2。

ViewController 1 Image 2 - 翻转到 ViewController 2。

交叉溶解发生了，但把我带到了 VC2。我在这一天的大部分时间里都在受挫。当我坐在浴缸里时，是时候寻求帮助了。

这是我一直在做的事情：

```
 - (void)viewDidLoad

        {
            NSLog(@"%s", __FUNCTION__);
            [super viewDidLoad];
        }

        - (void)viewDidAppear:(BOOL)animated {
            NSLog(@"%s", __FUNCTION__);

            sleep (2);
            [self transition1]; //showing image 1
        }

        - (void) transition1 {
            NSLog(@"%s", __FUNCTION__);
            /*
            [UIView transitionFromView:firstView
                          toView:secondView
                        duration:3.0
                         options:UIViewAnimationOptionTransitionCrossDissolve
                        completion:^(BOOL finished) {
                            [firstView removeFromSuperview];
                        }];
             */

            //this transition doesn't happen

UIImage * secondImage = [UIImage imageNamed:@"image2.png"];

[UIView transitionWithView:self.firstView
                        duration:5.0f
                         options:UIViewAnimationOptionTransitionCrossDissolve
                        animations:^{
                            self.imageView.image = secondImage;
                        } completion:NULL];

            sleep (2);
            [self transition2];
        }

        - (void) transition2 {
            NSLog(@"%s", __FUNCTION__);
            self.patterns = [[PatternViewController alloc] initWithNibName:@"PatternView_iPad" bundle:nil];
            self.patterns.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
            [self presentViewController:patterns animated:YES completion:nil];
        } 
```

谢谢你的帮助。

更新

我根据 Moxy 的建议更新了我的代码，如下所示：

```
- (void)viewDidAppear:(BOOL)animated {
    NSLog(@"%s", __FUNCTION__);
    [self performSelector:@selector(transition1)
             withObject:nil
             afterDelay:2.0f];
}

-(void)transition1
{
    NSLog(@"%s", __FUNCTION__);
    UIImage * secondImage = [UIImage imageNamed:@"image2.png"];
    [UIView transitionWithView:self.firstView
                duration:5.0f
                 options:UIViewAnimationOptionTransitionCrossDissolve
                animations:^{
                            self.imageView.image = secondImage;
                }
                completion:^(BOOL finished){
                            [self performSelector:@selector(transition2)
                                       withObject:nil
                                       afterDelay:2.0f];
                }];
}

-(void)transition2
{
    NSLog(@"%s", __FUNCTION__);
    self.patterns = [[PatternViewController alloc] initWithNibName:@"PatternView_iPad"
                                          bundle:nil];
    self.patterns.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentViewController:patterns
                 animated:YES
                 completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T00:17:27.480

您需要做的就是在第一个动画的完成块中开始您的第二个动画。Sleep() 是您可能不应该使用的东西。

```
-(void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    NSLog(@"%s", __FUNCTION__);
    [self performSelector:@selector(transition1)
               withObject:nil
               afterDelay:2.0f]
}

-(void)transition1
{
    NSLog(@"%s", __FUNCTION__);
    UIImage * secondImage = [UIImage imageNamed:@"image2.png"];
    [UIView transitionWithView:self.firstView
                      duration:5.0f
                       options:UIViewAnimationOptionTransitionCrossDissolve
                    animations:^{
                            self.imageView.image = secondImage;
                    }
                    completion:^(BOOL finished){
                            [self performSelector:@selector(transition2)
                                       withObject:nil
                                       afterDelay:2.0f]
                     }];
}

-(void)transition2
{
    NSLog(@"%s", __FUNCTION__);
    self.patterns = [[PatternViewController alloc] initWithNibName:@"PatternView_iPad" 
                                                            bundle:nil];
    self.patterns.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentViewController:patterns
                       animated:YES
                     completion:nil];
} 
```

# java - 如何在 Spring Java Based Configuration 中正确配置 list、map 和 set

> ID：15180617
> 
> 赞同：1
> 
> 时间：2013-03-02T23:25:35.160
> 
> 标签：java, spring

如何在基于 Spring 的配置中实现这一点。

```
<util:list id="abcHandlersList">
            <ref bean="aHandler" />
            <ref bean="bHandler" />
            <ref bean="cHandler" />
    </util:list> 
```

我想要实现的场景。我有不同的支付处理程序，例如 Paypal、CreditCard 和 DebitCard。在我的服务中，我将获得处理程序列表并迭代以找到合适的处理程序来处理我的付款。如果您能帮助我进行基于 Java 的 Spring 配置，我将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T23:37:12.853

我没有在基于 Java 的配置中看到任何支持 list 、 maps 等的注释

您需要在配置类中创建列表和地图，例如，

```
@Bean
  public List<String> abcHandlersList(){
      List<String> abcHandlers = new ArrayList<>();
      abcHandlers.add(AHandler1());
      abcHandlers.add(BHandler1());
      return abcHandlers ;
 }

  @Bean
    public AHandler AHandler1(){
            return new AHandler();
    }

  @Bean
    public BHandler BHandler1(){
            return new BHandler();
    } 
```

您可以将列表添加到 bean ，其他方式如

```
@Resource(name="abcHandlersList") 
  public void setHandlers(List<String> handlers) {
      this.handlers = handlers;
  } 
```

或者

```
@Resource(name="abcHandlersList")
private List<String> handlers; 
```

# apache - 使用 mod_rewrite 问题重定向

> ID：15180619
> 
> 赞同：-1
> 
> 时间：2013-03-02T23:26:32.447
> 
> 标签：apache, mod-rewrite

我正在尝试将所有请求从`domain.com/sign-up/*`. 到 domain.com/sign-up/ 另外，我想知道我的代码是否可以改进，见下文。

```
Options +FollowSymLinks  
Options +Indexes  
RewriteEngine On
RewriteRule ^sign-up/(.*)\.php$ public/register.php [NC] 
RewriteRule ^sign-up/(.*) /sign-up/ [R]
RewriteRule ^sign-up/\??lang=([a-zA-Z][a-zA-Z][a-zA-Z])$ public/register.php?lang=$1 [NC]
RewriteRule ^sign-up/?$ public/register.php [NC,L] 
```

为什么不发生重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T23:58:56.013

试试这个，让我知道它是否有效。如果没有，请让我知道哪个 URL 不起作用。

```
<IfModule mod_rewrite.c>
Options +FollowSymLinks  
Options +Indexes  
RewriteEngine On
RewriteBase /

# sign-up/xxx.php -> public/register.php
RewriteRule ^sign-up/.*\.php$ public/register.php [L] 

# sign-up/xxx -> /sign-up/
RewriteRule ^sign-up/.+ /sign-up/ [R=301,QSA,L]

# sign-up/?lang=xxx -> public/register.php?lang=xxx
RewriteCond %{QUERY_STRING} .*lang=([a-z]{3}).* [NC]
RewriteRule ^sign-up/$ public/register.php?lang=%1 [L,NC]

# /sign-up/ -> public/register.php
RewriteRule ^sign-up/?$ public/register.php [NC,L]
</IfModule> 
```

# database - 在大树结构中查找相同的目录树

> ID：15180620
> 
> 赞同：0
> 
> 时间：2013-03-02T23:26:42.693
> 
> 标签：database, backup, backup-strategies

我有一个价值约 10 年的文件存档，它是一个大型目录树结构，在较大树的不同位置有多个较小尝试的副本。由于缺乏一致的备份策略和归档策略（基本上都是我自己的错），树变成了这种结构。

我正在寻找一种方法来在较大的树中找到相同的树副本，这样我就可以删除我不需要的副本，让我更接近清理这个大混乱。

我想我可以编写一个脚本来在树中建立一个文件数据库，这样我就可以编写另一个脚本来查找相同的树，删除嵌套在树中最深处的树副本。

但是，我不确定如何最好地解决这个问题，在数据库设计方面以及使用哪种算法来有效地比较这些树以找到相同的副本。

回顾一下，这就是树的样子：

备份/文件夹 1/备份/某些计算机/保险库/文件夹 1 备份/其他计算机/文件夹 1 ...

不能保证这些树是“完整的”——它们可能是相似的，但只有一个树的副本包含大多数文件和子目录。所以这是关于找到最“完整”的树。

如果有人对如何解决此问题或有效清理此类杂乱的结构有任何其他想法，而无需查看每个单独的文件，我将不胜感激！

谢谢乙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T01:52:10.893

也许使用后缀树数据结构来查找最长的公共子字符串 - 甚至可能存在差异，从而表示相似性度量。

从层次结构的每个文件/目录的新树中的一个节点的意义上，创建一棵反映现有层次结构的新树。

在构建树时：可能递归地使用 FileFilter 并为每个目录类型的条目降序：

为新树中的每个节点创建从根到该节点的路径。使该路径成为 Map 中的键，其中键是路径，值是新树中的节点引用。

然后，您可以针对此映射的 keySet 使用后缀树算法来查找共享公共后缀的条目 - 这些条目正是可以重复数据删除的条目。

这需要处理相同的子树。后缀树还允许识别“未命中”——即路径中是否存在一个或多个在两条路径之间不同的链接。

# php - 我不断收到我的 require_once 未指向正确路径的错误。但它是？

> ID：15180622
> 
> 赞同：2
> 
> 时间：2013-03-02T23:26:50.717
> 
> 标签：php

我不断收到此错误

> 警告：require_once(../config.php)：打开流失败：第 11 行的 /var/www/busapp/php/register.php 中没有这样的文件或目录致命错误：require_once()：打开所需的失败。 ./config.php' (include_path='.:/usr/share/php:/usr/share/pear') 在第 11 行的 /var/www/busapp/php/register.php

这是我的文件结构的图片

![我的文件结构的图片](../Images/044cd6ea99e3f8be49db123cc8209a5b.png)

`register.php`文件就在里面`php/`

我的`register.php`文件包含`require_once('../config.php');`

它似乎没有跳到一个文件夹，这是为什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T23:30:18.913

在这里您似乎在`/var/www/busapp/php/register.php`要求`config.php`文件夹内的`PHP`文件，但实际上，该`config.php`文件位于您的根目录中，因此，您必须`Line 11`在 register.php 中进行调整以`/var/www/busapp/register.php`

# vb.net - 使用 xElement 循环遍历 XML 记录

> ID：15180623
> 
> 赞同：2
> 
> 时间：2013-03-02T23:26:52.127
> 
> 标签：vb.net, visual-studio-2010

我有以下 XML

```
 <xml>
         <version>1.0</version>
         <products>
              <product>
                    <name>Product 1</ProductName>
                    <id>1</ProductId>
              </product>
              <product>
                    <name>Product 2</ProductName>
                    <id>2</ProductId>
              </product>
              <product>
                    <name>Product 3</ProductName>
                    <id>3</ProductId>
              </product>
          </products>
      </xml> 
```

我有以下代码用于循环产品

```
 Dim xelement As XElement = xelement.Load("aaa.xml")
   Dim products As IEnumerable(Of XElement) = xelement.Elements()
       For Each product In products
           Console.WriteLine(product.Elements("name").Value)
       Next product 
```

但`product.Elements("name").Value`给出错误。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-22T10:52:40.767

问题是 Name 包含您加载的 XML 文档的子元素 - 在本例中，`<Version>`以及`<name>....</name>`（即所有名称标签及其子元素）。

您想要做的是获取所有`<Name>`节点和`<tel>`节点的集合，您可以这样做：

```
 Dim Names As IEnumerable(Of XElement) = xelement.Descendants("Name")

  For Each Name As XElement In Names 
        MsgBox((Name.Value)
  Next 
```

你可以为“电话”做同样的事情

**完整代码：**

```
Private Sub btnUpdate_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnUpdate.Click

    Dim cbFileName As String = "<xml><version>1.0</version><name>A1</name><tel>12</tel><name>A2</name><tel>21</tel><name>A3</name><tel>11</tel></xml>"

    Dim xelement As XElement = xelement.Load(cbFileName.Text)

    Dim products As IEnumerable(Of XElement) = xelement.Descendants("name")

    For Each product As XElement In products
        MessageBox.Show(product.Value)
    Next

    Dim Telephone As IEnumerable(Of XElement) = xelement.Descendants("tel")

    For Each telep As XElement In Telephone
        MessageBox.Show(telep.Value)
    Next

End Sub 
```

**输出：**

A1 A2 A3

12 21 11

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T02:34:54.710

问题不在于 XML 元素名称（尽管您的编辑包含无效的 XML - 您只更改了开始标记，而不是结束标记）。

问题是 products 包含您加载的 XML 文档的子元素 - 在这种情况下，`<Version>`以及`<Products>....</Products>`（即所有产品标签及其子元素）。

您想要做的是获取所有`<name>`节点的集合，您可以通过以下两种方式之一执行此操作：

```
Dim products As IEnumerable(Of XElement) = xelement.Element("products").Element("product").Element("name") 
```

或者

```
Dim products As IEnumerable(Of XElement) = xelement.Descendants("name") 
```

然后，在您的 中`For Each`，只需调用`Value`，`Product`如下所示：

```
For Each product As XElement In products
    Console.WriteLine(product.Value)
Next 
```

输出将是

```
产品一
产品 2
产品 3

```

**编辑添加完整代码**

```
Imports System.Xml.Linq
Imports System.Collections.Generic

Module Module1

    Sub Main()

        Dim Xml As String = "<xml><version>1.0</version><products><product><name>Product 1</name><id>1</id></product><product><name>Product 2</name><id>2</id></product><product><name>Product 3</name><id>3</id></product></products></xml>"

        Dim xelement As XElement = xelement.Parse(Xml)

        Dim products As IEnumerable(Of XElement) = xelement.Descendants("name")

        For Each product As XElement In products
            Console.WriteLine(product.Value)
        Next

        Console.ReadLine()
    End Sub

End Module 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T19:15:37.460

`product.Elements("name")`return `IEnumerable<XElement>`，所以它没有`.Value`属性。试试这个：

```
Dim products As IEnumerable(Of XElement) = xelement.Elements()
For Each product In products
    Console.WriteLine(product.Element("name").Value)
Next product 
```

# javascript - 两个内容加空格

> ID：15180627
> 
> 赞同：-2
> 
> 时间：2013-03-02T23:27:46.307
> 
> 标签：javascript, html, forms

我正在尝试从两个`DIV`s 添加内容并将它们注入到输入字段中。以下工作，除了输入的值之间没有空格。

使用下面的代码，文本字段中的值是：`JohnDoeAccountant` 我正在寻找文本字段中的输出：`John Doe Accountant`。

我如何确保输出值之间有空格？

```
var output1 = document.getElementById("firstname").innerHTML;
var output2 = document.getElementById("lastname").innerHTML;
var output3 = document.getElementById("job").innerHTML;
document.getElementById("user-submitted-tags").value = output1 + output2 + output3; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T23:29:23.273

```
....value = [output1, output2, output3].join(" "); 
```

* * *

或者删减一些重复：

```
document.getElementById("user-submitted-tags").value = 
    ["firstname","lastname","job"].map(function(id) {
        return document.getElementById(id).innerHTML;
    }).join(" ") 
```

* * *

或者像这样：

```
document.getElementById("user-submitted-tags").value = 
    ["firstname","lastname","job"].reduce(function(s, id) {
        return s + " " + document.getElementById(id).innerHTML;
    }, "") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T23:29:30.143

尝试

```
document.getElementById("user-submitted-tags").value = output1 + ' ' + output2 + ' ' + output3; 
```

# java - 从内部线程java访问外部类

> ID：15180629
> 
> 赞同：-3
> 
> 时间：2013-03-02T23:28:07.243
> 
> 标签：java, multithreading, class, outer-join

在 OuterClass 类中，我有一个 Thread InnerThread。在线程中，我需要从 OuterClass 访问一个方法。我该怎么做呢？我试过 ：

```
public class OuterClass{

   public static void main(String[]args){
      Runnable thread = new innerThread(param);
        new Thread(thread).start();

   public void method(param1, param2){
      System.out.println("Test method");
   } 

   public class InnerThread extends Thread{
      public void run(){
         System.out.println("Test thread")
         OuterClass.this.method(param1, param2);
      }
   }

} 
```

但程序没有进入该方法。为什么会这样，它是如何工作的？

*编辑*我确定线程正在运行，因为我在那里执行了其他操作并且它们工作，并且我在方法（param1，param2）的开头放置了一个打印，所以我确定它不会进入方法。我只尝试了没有 OuterClass.this 的方法（param1，param2），但它也没有工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T00:03:50.263

这工作正常：

```
public class OuterClass {

    public static void main(String[] args) throws InterruptedException {
        Thread t = new Thread(new OuterClass().new InnerThread());
        t.start();
        t.join();
    }

    public void method(String param1, String param2) {
        System.out.println("Test method ("+param1+","+param2+")");
    }

    public class InnerThread extends Thread {

        public void run() {
            System.out.println("Test thread");
            method("A", "B");
        }
    }
} 
```

印刷

```
Test thread
Test method (A,B) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T00:22:12.030

这可以通过创建两个单独的类
1 来实现，其中包含
OuterClass 2 Other，它们处理 OuterClass 的实例，即主类。
看一看。

```
public class Main {

public static void main(String arg[]){

OuterClass o=new OuterClass(1,3);
   }
    }

class OuterClass{
    int param,param2;
    InnerThread t;

OuterClass(int x,int y){
this.param=x;
this.param2=y;
InnerThread t=new InnerThread();
t.start();
}

 public class InnerThread extends Thread{
      public void run(){
         System.out.println("Test thread");
         OuterClass.this.method();
      }
   }
 public void method(){
      System.out.println(this.param+this.param2);
   }
} 
```

# c# - 使用 BakcgroundWorker 时如何避免 invalidOperationException？

> ID：15180631
> 
> 赞同：0
> 
> 时间：2013-03-02T23:28:30.233
> 
> 标签：c#

我有这个功能：

```
private void cpuView()
        {
            if (pauseContinueDoWork == true)
            {
            }
            else
            {
                Computer myComputer = new Computer();
                myComputer = new Computer(settings) { CPUEnabled = true };

                myComputer.Open();
                Trace.WriteLine("");
                foreach (var hardwareItem in myComputer.Hardware)
                {
                    if (hardwareItem.HardwareType == HardwareType.CPU)
                    {
                        hardwareItem.Update();
                        foreach (IHardware subHardware in hardwareItem.SubHardware)
                            subHardware.Update();

                        foreach (var sensor in hardwareItem.Sensors)
                        {
                            settings.SetValue("sensor", sensor.Value.ToString());
                            if (sensor.SensorType == SensorType.Temperature)
                            {
                                sensor.Hardware.Update();
                                settings.GetValue("sensor", sensor.Value.ToString());
                                label17.Text = sensor.Value.ToString() + "c";//String.Format("{0} Temperature = {1}c", sensor.Name, sensor.Value.HasValue ? sensor.Value.Value.ToString() : "no value");
                                tempCpuValue = sensor.Value;
                                if (sensor.Value > 60)
                                {
                                    Logger.Write("The Current CPU Temperature Is ===> " + sensor.Value);
                                    button1.Enabled = true;
                                }
                                int t = label17.Text.Length;
                                if (t >= 4)
                                {
                                    label17.Location = new Point(50, 50); // not working to check everything about the locations \\

                                }
                                else
                                {
                                    label17.Location = new Point(50, 50);
                                }

                                break;
                            }
                        }
                    }
                }
            }
        } 
```

我在后台工作人员（DoWork 事件）中调用此函数：

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
        {
            BackgroundWorker worker = sender as BackgroundWorker;
            while (true)
            {

                if ((worker.CancellationPending == true))
                {
                    e.Cancel = true;
                    break;
                }
                else
                {
                    if (tempCpuValue >= (float?)nud1.Value || tempGpuValue >= (float?)nud1.Value)
                    {
                        soundPlay = true;
                        blinking_label();
                        NudgeMe();
                    }
                    else
                    {
                        soundPlay = false;
                        stop_alarm = true;

                    }
                    cpuView();
                    gpuView();
                    Thread.Sleep(1000);
                }
            }
        } 
```

这种情况下的例外是在这一行的 cpuview 函数中：

```
label17.Text = sensor.Value.ToString() + "c"; 
```

错误消息是：跨线程操作无效：控件'label17'从创建它的线程以外的线程访问。

异常消息：

```
System.InvalidOperationException was unhandled by user code
  HResult=-2146233079
  Message=Cross-thread operation not valid: Control 'label17' accessed from a thread other than the thread it was created on.
  Source=System.Windows.Forms
  StackTrace:
       at System.Windows.Forms.Control.get_Handle()
       at System.Windows.Forms.Control.set_WindowText(String value)
       at System.Windows.Forms.Control.set_Text(String value)
       at System.Windows.Forms.Label.set_Text(String value)
       at HardwareMonitoring.Form1.cpuView() in d:\C-Sharp\HardwareMonitoring\HardwareMonitoring\Hardwaremonitoring\Form1.cs:line 378
       at HardwareMonitoring.Form1.backgroundWorker1_DoWork(Object sender, DoWorkEventArgs e) in d:\C-Sharp\HardwareMonitoring\HardwareMonitoring\Hardwaremonitoring\Form1.cs:line 655
       at System.ComponentModel.BackgroundWorker.OnDoWork(DoWorkEventArgs e)
       at System.ComponentModel.BackgroundWorker.WorkerThreadStart(Object argument)
  InnerException: 
```

我该如何解决/修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T23:30:02.233

您正在从后台线程调用 UI 线程。您需要`BeginInvoke`在控件上使用委托或使用`ReportProgress`方法对其进行更新。

例如：

```
public delegate void InvokeDelegate();

private void DoWork()
{
    label17.BeginInvoke(new InvokeDelegate(InvokeMethod));
}

public void InvokeMethod()
{
   label17.Text = "I execute on the UI thread!";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T23:37:24.407

您正在尝试从后台线程访问 UI - 因此出现“跨线程操作无效：”消息。

您需要从后台工作人员向 UI 线程发送事件并用于`Invoke`更新 UI。在这里，我将它实现为扩展方法，因此可以从任何控件调用它：

```
public static void InvokeIfRequired(this Control control, Action action)
{
    if (control.InvokeRequired)
    {
        control.Invoke(action);
    }
    else
    {
        action();
    }
} 
```

`control`您要更新的 UI 元素在哪里，`action()`是您要调用的方法。然后你可以这样称呼它：

```
this.label17.InvokeIfRequired(() => this.label17.UpdateLabel(sensor.Value.ToString() + "c"));

private static void UpdateLabel(this Label label, string newValue)
{
    label.Text = newValue;
} 
```

# facebook-graph-api - 来自 ticket_uri 的链接正在打开一个空白页面

> ID：15180634
> 
> 赞同：9
> 
> 时间：2013-03-02T23:29:06.403
> 
> 标签：facebook-graph-api, uri, facebook-apps, facebook-page

我有一个 php 页面，它从 facebook 粉丝页面中提取事件。如果我打开隐身窗口（或退出 facebook）然后单击链接，则会打开一个空白页面。我的猜测是与访问令牌、FB 应用程序的权限和页面权限有关。任何见解将不胜感激。

ticket_uri 尝试打开这样的链接：http: [//www.facebook.com/ajax/events/ticket.php](http://www.facebook.com/ajax/events/ticket.php?event_id=147884225370550&action_source=12) ?event_id=147884225370550&action_source=12 。如果已登录，这似乎会自动转发到活动中的实际票证链接。

这是我正在处理的页面：http: [//danagould.com/live.php](http://danagould.com/live.php)。它来自facebook页面 officialdanagould

```
 <table width="100%" border="0" cellspacing="0" cellpadding="0">
 <tbody>
<?php

date_default_timezone_set('America/Los_Angeles');

//requiring FB PHP SDK
require 'fb-sdk/src/facebook.php';

//initializing keys
$facebook = new Facebook(array(
    'appId'  => 'MYAPPID',
    'secret' => 'MYAPPSECRET',
    'cookie' => true, // enable optional cookie support
));

$fql    =   "SELECT name, pic, start_time, end_time, location, description, eid, has_profile_pic, venue, ticket_uri
            FROM event WHERE eid IN ( SELECT eid FROM event_member WHERE uid = 175890419184371 AND start_time > now() ) 
            ORDER BY start_time asc";

$param  =   array(
'method'    => 'fql.query',
'query'     => $fql,
'callback'  => ''
);

$fqlResult   =   $facebook->api($param);

//looping through retrieved data
foreach( $fqlResult as $keys => $values ){

    $convertedtime = strtotime($values['start_time']);
    $start_date = date( 'F j', $convertedtime );

    $content = $values['description'];

    //printing the data
    echo "<tr>";

    echo "<td width='8%'>";
        if ( $values['has_profile_pic'] == FALSE) {
            echo "<img src=img/spacer.gif width='100%'/>";
        } else {
            echo "<img src={$values['pic']}  width='100%'/>";
        }
    echo "</td>";
    echo "<td width='2%'></td>";
    echo "<td width='18%' class='tourdate'>{$start_date}</td>";
    echo "<td width='49%'>";
    echo "<table><tbody><tr><td class='tourlocation'>{$values['name']}</td></tr>";
    echo "<tr><td class='poddesc'><p class='poddesc'>At {$values['location']}</p></td></tr></tbody></table>";
    echo "<td width='23%' class='getickets'>";
    echo "<a href = " . $values['ticket_uri'] . ">Get Tickets</a>";
    echo "</td></tr>";
    echo "<tr height='5px'></tr>";

}

?>
  </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-27T16:36:02.293

尝试将 cookie 设置为 false 或全局设置 $fql。另外你在回调中说什么

# ruby-on-rails - 使用活动记录加入 3 个或更多表

> ID：15180641
> 
> 赞同：1
> 
> 时间：2013-03-02T23:29:34.050
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

假设我有 3 张桌子：

```
schools{id, name, desc, adress}
reviews{id, content, rating, school_id, user_id} # user_id & schoold_id is foregin keys
users{id, name, city} 
```

我如何编写一个rails范围或方法来连接所有3个表并获取`schools.name`列`reviews.content``reviews.rating``users.name`

我对此进行了尝试，但它只返回评论数据而不是加入部分。

```
Review.joins(:school, :user).select("content, rating, schools.name, users.name").all 
```

我正在使用导轨 3.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T23:44:39.667

您只需要为学校和用户定义 has-many :through 关系，如下所示：

```
class School < ActiveRecord::Base
  has_many :users, :through => :reviews 
end
class Review < ActiveRecord::Base
  belongs_to :users
  belongs_to :schools
end
class User < ActiveRecord::Base
  has_many schools, :through => reviews
end 
```

在您的 Review 控制器中，您可以执行

```
def index
  @reviews = Review.all
end 
```

然后在您的视图中，每个评论对象都会有一个学校和一个与之关联的用户，所以您只需执行以下操作：

```
review.content, review.rating, review.user.name, review.school.name 
```

阅读本文将帮助您了解原因： http: [//guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

# php - sql数据库检索数据，等待批准，发送回原始

> ID：15180655
> 
> 赞同：1
> 
> 时间：2013-03-02T23:31:16.593
> 
> 标签：php, sql

我希望在网站上有一个推荐页面，它允许客户提交他们自己的推荐。问题是，不是将数据直接发送到推荐页面，而是发送到单独的“主持人页面”，等待批准。我看过的每个地方似乎都在说创建一个 SQL 数据库。这是唯一的解决方案还是我可以为此使用php。一旦这些数据被发送到版主页面，我想知道是否有可能，一旦审查和批准，能够按下提交按钮，并将客户推荐发送到推荐页面？我知道的很多，但感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T23:37:13.420

抱歉，我无法发表评论，但您可以在数据库中创建一个默认设置为“false”或任何您想要的确认字段，然后在审核后将该字段更新为“true”，并在填充推荐时，从数据库中选择确认=“真”

# java - 找不到适合 jdbc:mysql//localhost:3306/test 的驱动程序

> ID：15180657
> 
> 赞同：0
> 
> 时间：2013-03-02T23:31:19.347
> 
> 标签：java, mysql

我正在尝试编写一个连接到 MySQL 数据库的 java 程序。但我收到此错误：

> 找不到适合 jdbc:mysql//localhost:3306/test 的驱动程序

我已经安装了`mysql-connector-java.5.1.23-bin.jar`. 我仍然收到此错误。

这是我的程序：

```
package database_practice;

import java.sql.*;

public class CreateConnection {
        private Connection conn = null;

        public static void main(String args[]) {
            CreateConnection conn = new CreateConnection();
                conn.getConnection();
        }

        public Connection getConnection() {
            try {
                String url = "jdbc:mysql//localhost:3306/test";
                String username = "root";
                String password = "admin1234";

            Class.forName("com.mysql.jdbc.Driver").newInstance();
            conn = DriverManager.getConnection(url, username, password);
            System.out.println("Database Created...!!!");
        }

        catch (Exception e) {
            e.printStackTrace();
            System.out.println("Error occured while connecting to database");
        }
            return conn;
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-02T23:33:02.407

您的连接字符串错误。这：

```
"jdbc:mysql//localhost:3306/test" 
```

应该：

```
"jdbc:mysql://localhost:3306/test" 
```

注意“”后面的冒号`mysql`。

# php - 如何访问嵌套在函数内的类中的变量

> ID：15180661
> 
> 赞同：0
> 
> 时间：2013-03-02T23:31:47.380
> 
> 标签：php

PHP 中的类非常新，如何从函数内部的类中访问变量？

```
 //how can I echo the value of the title variable outside the class?
 echo $title; 
 class myClass {

  function form() {
      echo '<input type="text" value="'.$title.'" />';
   }

 } 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T23:42:13.207

首先，您的变量`$title`似乎没有在您共享的代码范围内的任何地方定义。

* * *

尽管如此，我可以分享四种方法来处理这个问题。

### 1.通过将title作为[**类的成员**](http://www.php.net/manual/en/language.oop5.properties.php) `myClass`，这对于该类的每个实例都是特定的

```
class myClass {
    public $title = '';
  function form() {
      echo '<input type="text" value="'.$this->title.'" />';
   }

}

$myClass = new myClass();
$myClass->title = 'My title'; 
```

### 2.通过在类中使用[**常量**](http://www.php.net/manual/en/language.oop5.constants.php)`myClass`，在所有类实例上都是相同的

```
class myClass {
     const title = 'My title';
  function form() {
      echo '<input type="text" value="'.myClass::title.'" />';
   }

} 
```

### 3\. 将变量传递给您将要调用的函数

```
class myClass {
  function form($title) {
      echo '<input type="text" value="'.$title.'" />';
   }

}

$myClass = new myClass();
$myClass->form('My title'); 
```

### 4\. 使用[**`global`**](http://php.net/manual/en/language.variables.scope.php#language.variables.scope.global)你想要做的变量。

请谨慎使用全局变量。如果您不需要[**此处**](https://stackoverflow.com/questions/1557787/are-global-variables-in-php-considered-bad-practice-if-so-why)和[**此处**](http://webdosanddonts.com/fundamental-php-coding-dos-donts)的说明，请不要使用它们。

```
$title = 'My title';
class myClass {
    function form() {
        global $title; // <-- declare here that we will use the global variable $title
        echo '<input type="text" value="'.$title.'" />';
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-02T23:55:58.857

您可以做什么，以便能够使用外部变量，而不必依赖全局变量（一种不好的做法），就是从外部传递变量。像这样：

```
 class myClass {

    function form($title) {
      echo '<input type="text" value="'.$title.'" />';
     }

 } 
```

然后你可以像这样调用你的函数：

```
$class = new myClass();
$class->form('This is going to be the title'); 
```

全局变量很糟糕，因为您创建了耦合并且您无法跟踪应用程序周围发生的事情。通过在一个地方修改全局变量，您可能会在其他地方损害代码。因此，最好依赖封装，并明确地“注入”你需要的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T23:34:23.217

```
 class myClass {
 public $title;     
  function form() {
      echo '<input type="text" value="'.$this->title.'" />';
   }

 } 
```

您说，如何在类中访问，但在您的示例中，您的属性/变量不在类中。只是在说..

# matlab - MATLAB - 使用 makehgtform 旋转对象 - zrotate 仅围绕原点

> ID：15180663
> 
> 赞同：1
> 
> 时间：2013-03-02T23:32:10.267
> 
> 标签：matlab, math, rotation, transform

我正在尝试使用滑块并在 matlab 中旋转球体。如果球体在原点，它会起作用。但是当我旋转它时，我的球体在点（2.5,2.5,7.5），整个球体仍然围绕原点旋转。我希望它保持在原点并旋转。

我的代码：这是我的滑块功能

```
function  slider_callback1(hObject, eventdata)
            s1 = get(slider, 'value');        
            R1 = makehgtform('zrotate', s1);
            set(t1, 'Matrix', R1);
            drawnow;
  end 
```

在哪里

```
t1 = hgtransform;
set(sphere_1, 'Parent', t1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T23:35:41.583

要围绕任意点旋转，您需要三个变换；平移到原点，旋转本身，然后平移回来。这些当然可以组合成一个 4D 变换矩阵。

我从来没有使用过`makehgtform`，但从文档来看，它似乎有一个`'translate'`选项，这听起来像你需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T04:34:09.520

谢谢，我是这样解决的：

```
function slider_callback1(hObject, eventdata)
    s1 = get(cabin, 'value');        
    R1 = makehgtform('zrotate', s1);

    R1(1,4) = 2.5;
    R1(2,4) = 2.5;
    R1(3,4) = 7.5;
    set(t1, 'Matrix', R1);

    s1 = floor(s1 * (180/pi) * 10)/10;
    set(sth1, 'String', num2str(s1));
    drawnow;
end 
```

# ruby-on-rails - 为什么这在 Spree 中不起作用

> ID：15180664
> 
> 赞同：0
> 
> 时间：2013-03-02T23:32:12.293
> 
> 标签：ruby-on-rails, activerecord, overriding, spree

我在修改 spree 中的功能时遇到问题。该函数称为copy_price

原始版本是这样的：

```
def copy_price
  if variant
    self.price = variant.price if price.nil?
    self.currency = variant.currency if currency.nil?
  end
end 
```

如果我理解正确，它将仅在价格为空时更新 line_item 的单价，我认为它不应该在订单页面内（在订单完成后）。我注意到即使在订单完成后，如果在管理部分内更改主价格，订单也会发生变化。

所以我认为应该归咎于 copy_price 功能，但每次我尝试修改它时都没有改变。例如

```
def copy_price
  @price_run = true
   self.price = 30.00
end

def get_price_run
  if @price_run == true
    return "true"
  else
    return "false"
  end
end 
```

并在我的视图中调用 get_price_run 以打印出价格运行是否实际运行。它一直输出假。有谁知道为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:20:37.517

我已经弄清楚了问题所在。函数 copy_price 仅在第一次创建行项目时调用（例如，当您将其放入购物车时）。因此，当我在查看管理订单页面时试图找出它是否被调用时，它从未被调用过。

# jquery - Javascript 不起作用

> ID：15180670
> 
> 赞同：0
> 
> 时间：2013-03-02T23:32:41.297
> 
> 标签：jquery, asp.net, master-pages

是的，我知道之前有人问过这个问题，但在我的情况下，奇怪的是它在托管我的网站的一台服务器上工作，而在另一台服务器上却没有，这里它工作：[http](http://aspspider.ws/Lordleor/) ://aspspider.ws/Lordleor/ 在这里它没有: [http://www.bookstore.somee.com/](http://www.bookstore.somee.com/)

该网站基于一般母版页，这是我的母版页上的代码（在 head 标签内）：

```
<script src="Scripts/jquery-1.2.6.min.js" type="text/javascript"></script>
<script src="Scripts/jquery-ui-personalized-1.6rc4.min.js" type="text/javascript"></script>
<script src="Scripts/JScript.js" type="text/javascript"></script> 
```

当我检查 jscript.js 时，我看到这条消息：未捕获的类型错误对象没有可拖动的方法，知道这怎么可能只在某些服务器上工作，我怎样才能修复它以在任何地方工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T23:39:36.950

> 未捕获的类型错误对象没有可拖动的方法

那是在告诉您`Scripts/jquery-ui-personalized-1.6rc4.min.js`在出现问题的服务器上没有脚本。

（顺便说一句，1.6rc4 已经过时了***四年***。jQuery UI 目前在 v1.10.1 上，而 v1.8 树是多年来的黄金标准。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T01:08:35.960

我只是把它放在每一页（而不是主人）上，它就起作用了。谢谢大家

# facebook - 关注用户名中带有点的按钮

> ID：15180671
> 
> 赞同：0
> 
> 时间：2013-03-02T23:32:46.433
> 
> 标签：facebook

我正在尝试向我的网页添加后续操作：

由于我的用户名有一个点，因此未显示该按钮。如果我输入另一个用户名（不带点），它可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:29:45.127

也应该与数字用户 ID 一起使用——如果我转到[https://developers.facebook.com/docs/reference/plugins/follow/](https://developers.facebook.com/docs/reference/plugins/follow/)并将 URL 替换为`https://www.facebook.com/zuck`，`https://www.facebook.com/4`那么插件会正确重新加载并仍然显示 Mark Zuckerberg 的关注者.

# javascript - 发布到 Facebook 后如何关闭弹出窗口？

> ID：15180676
> 
> 赞同：8
> 
> 时间：2013-03-02T23:33:24.550
> 
> 标签：javascript, jquery, facebook, sdk, dialog

在我们的博客上，我们有一个链接，用户可以将我们的文章发布到他们的时间线。打开一个弹出窗口，用户发布到 facebook，然后弹出窗口停留在那里并重定向到“www.oursite.com”。当用户完成发布或单击取消按钮时，我们如何关闭弹出窗口？根据[this so question](https://stackoverflow.com/questions/8948020/fb-ui-feed-dialog-requires-redirect-uri-dialog-does-not-close)它无法完成，但赫芬顿邮报已经弄清楚了，但查看他们的代码我们无法弄清楚。例如，此处[的 facebook 分享](http://www.huffingtonpost.com/2013/03/02/sequestration-2013_n_2796289.html)按钮将打开一个弹出窗口，然后在您发布文章或取消时关闭。

这是我们所拥有的：

```
FB.init({appId: "90210", status: true, cookie: true});

      function postToFeed() {

        // calling the API ...
        var obj = {
          method: 'feed',
          redirect_uri: 'http://www.oursite.com/',
          link: 'http://www.oursite.com/',
          picture: 'http://www.oursite.com/png.png',
          name: 'Some title',
          caption: '',
          description: ''
        };

        function callback(response){
           window.close(); // doesn't do anything
          //document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
        }

        FB.ui(obj, callback);
      } 
```

我们尝试添加 window.close(); 在回调（以及 self.close();）中，尝试将 redirect_uri 留空（并尝试将 redirect_uri 完全留空，但这是必需的）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-06-25T19:50:03.120

似乎接受的答案不再有效，因为 facebook 现在在哈希后删除任何内容并将其替换为 post_id=xxxxx。

**解决方案 #1**（如果您相信 FB 在不久的将来不会更改此设置）：

```
if(window.location.search.indexOf('post_id')==1) window.close(); 
```

**解决方案#2**（如果你想要更多的保险来应对变化并且不介意第二个文件）：创建一个新的 html 文件 closewindow.html：

```
<html><body><script>window.close()</script></body></html> 
```

并在重定向中链接到它。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-02T23:40:40.400

重定向到[http://oursite.com/#close_window](http://oursite.com/#close_window)。然后在您网站的主页上，包含以下内容：

`if (window.location.hash == '#close_window') window.close();`.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-02-11T19:20:32.273

在花了一整天的时间解决这个问题之后，我有一个非常好的解决方案，我想分享一下。我发现我可以通过手动打开我自己的弹出窗口到[https://www.facebook.com/dialog/feed](https://www.facebook.com/dialog/feed)来完全避免它，而不是使用带有 FB.ui() 的 SDK 。这样做时，redirect_uri 按预期工作。只要您要求用户单击按钮使对话框弹出，就不会触发弹出窗口阻止程序。

我不相信这段代码有任何妥协，如果有的话，它比实际的 SDK 更容易使用。

我的 Javascript 代码（可以保存为 FacebookFeedDialog.js）如下所示：

```
/* by Steven Yang, Feb 2015, originally for www.mathscore.com.  This code is free for anybody to use as long as you include this comment.  */
function FacebookFeedDialog(appID, linkTarget, redirectTarget) {
  this.mParams = {
    app_id: appID,
    link: linkTarget,
    redirect_uri: redirectTarget,
    display: "popup"
  }
};

/* Common params include:
   name - the title that appears in bold font
   description - the text that appears below the title
   picture - complete URL path to the image on the left of the dialog
   caption - replaces the link text
*/
FacebookFeedDialog.prototype.addParam = function(key, value) {
  this.mParams[key] = value;
};

FacebookFeedDialog.prototype.open = function() {

  var url = 'https://www.facebook.com/dialog/feed?' + encodeCGIArgs(this.mParams);
  popup(url, 'feedDialog', 700, 400);
};

/* Takes a param object like this:
   { arg1: "value1", arg2: "value2" }
   and converts into CGI args like this:
   arg1=value1&arg2=value2

   The values and args will be properly URI encoded
*/
function encodeCGIArgs(paramObject) {

  var result = '';

  for (var key in paramObject) {
    if (result)
      result += '&';
    result += encodeURIComponent(key) + '=' + encodeURIComponent(paramObject[key]);
  }

  return result;
}

function popup(mylink,windowname,width,height) {
  if (!window.focus) return;
  var href;
  if (typeof(mylink) == 'string')
    href=mylink;
  else
    href=mylink.href;
  if (!windowname)
    windowname='mywindow';
  if (!width)
    width=600;
  if (!height)
    height=350;
  window.open(href, windowname, 'resizable=yes,width='+width+',height='+height+',scrollbars=yes');
} 
```

这是一个使用上述 Javascript 代码的示例 HTML 文件：

```
<HTML>
<BODY>
<SCRIPT type="text/javascript" src="FacebookFeedDialog.js"></SCRIPT>
<SCRIPT>
var dialog = new FacebookFeedDialog(yourAppIDGoesHere,yourDestinationURLGoesHere,yourCloseWindowURLGoesHere);
dialog.addParam('name','This is my title');
dialog.addParam('description','This is the description');
dialog.addParam('picture',yourImageURLGoesHere);
dialog.addParam('caption','This is the caption');
</SCRIPT>

<A href="javascript:dialog.open()">Open facebook dialog</A>
</BODY>
</HTML> 
```

您的 closeWindow html 文件可能如下所示：

```
<SCRIPT>
window.close();
</SCRIPT> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-10-09T13:14:26.927

截至 10/2017 删除`redirect_uri`似乎有效。

它将默认为[https://www.facebook.com/dialog/return/close#_=_](https://www.facebook.com/dialog/return/close#_=_)

谁的来源只是 `<script type="text/javascript"> window.close() </script>`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-02-03T07:59:02.010

更新：将此脚本添加到您的重定向页面：

```
if (document.referrer == "https://www.facebook.com/" && (window.location.href.indexOf('post_id=') != -1 || window.location.hash == '#_=_')) {
    window.close();
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-06-07T09:45:18.817

只需`redirect_uri`从 url 中删除参数。

喜欢[这里](https://www.facebook.com/dialog/feed?app_id=1747877228791603&link=http%3A%2F%2Fsinematick.alakmalak.net%2Findex.php%3Frel%3Doverview%26movie_id%3D11&name=Star%20Wars&caption=sinematick&description=Princess%20Leia%20is%20captured%20and%20held%20hostage%20by%20the%20evil%20Imperial%20forces%20in%20their%20effort%20to%20take%20over%20the%20galactic%20Empire.%20Venturesome%20Luke%20Skywalker%20and%20dashing%20captain%20Han%20Solo%20team%20together%20with%20the%20loveable%20robot%20duo%20R2-D2%20and%20C-3PO%20to%20rescue%20the%20beautiful%20princess%20and%20restore%20peace%20and%20justice%20in%20the%20Empire.&picture=http%3A%2F%2Fimage.tmdb.org%2Ft%2Fp%2Fw500%2F%2F%2F4iJfYYoQzZcONB9hNzg0J0wWyPH.jpg)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-01-04T22:26:04.157

这不是对原始问题的直接答案，但它可能会帮助其他到达这里的人。

有一种更强大的方法可以做到这一点，当共享成功完成时，您可以在原始页面上执行操作：

在原始页面中：

```
var shareWindow;

function openShareWindow() {
  // See https://developers.facebook.com/docs/sharing/reference/share-dialog
  shareWindow = window.open('https://www.facebook.com/dialog/share?app_id=...&display=popup&redirect_uri=...');
}

function shareCompleted() {
  if (shareWindow) {
    shareWindow.close();
    shareWindow = null;

    // The share was successful, so do something interesting here...
  }
} 
```

在您设置为您的页面中`redirect_uri`，我通常将其映射到以下内容`http://myserver.com/share/close`：

```
window.opener.shareCompleted(); 
```

现在，您确信共享窗口将关闭，并且您可以在需要时对原始页面执行操作。

注意：`shareCompleted`必须在根窗口命名空间中才能进行此项工作。如果您按照应有的方式包装所有 JavaScript，请确保：

```
window.shareCompleted = shareCompleted; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-20T04:34:15.383

```
<script>if (window.location.hash.indexOf("#close_window") != -1) window.close();</script> 
```

# c++ - 获取状态栏文本

> ID：15180678
> 
> 赞同：2
> 
> 时间：2013-03-02T23:33:40.710
> 
> 标签：c++, windows, winapi, statusbar

我正在尝试从我的程序状态栏中检索文本，以便我可以在 wm_drawitem 事件期间使用它。以下代码为 statustext 返回零值，而不是第一个窗格文本。

```
char statusText[1024];

int nLength = SendMessage(hStatus, SB_GETTEXTLENGTH, (WPARAM)0, 0);
int len = SendMessage (hStatus, SB_GETTEXT, (WPARAM)0, (LPARAM)statusText); 
```

有什么我想念的想法吗？

状态栏设置如下：

```
int parts[3] = { 100, 408, 508};
SendMessage(hStatus, SB_SETPARTS, 3, (LPARAM)&parts);
SendMessage(hStatus, SB_SETTEXT, SBT_OWNERDRAW|SBT_NOBORDERS|0, (LPARAM)"Ready");
SendMessage(hStatus, SB_SETTEXT, SBT_OWNERDRAW|SBT_NOBORDERS|1, (LPARAM)NULL);
SendMessage(hStatus, SB_SETTEXT, SBT_OWNERDRAW|SBT_NOBORDERS|2, (LPARAM)timeStr); 
SendMessage(hStatus, SB_SETBKCOLOR , 0, (LPARAM)RGB(219,227,250)); 
```

# google-maps - WindowsPhone 应用程序和 GoogleMaps 限制

> ID：15180681
> 
> 赞同：0
> 
> 时间：2013-03-02T23:34:02.463
> 
> 标签：google-maps, windows-phone, google-maps-mobile

我的目标是编写一个免费的 Windows 手机应用程序（带有一些广告），每天有数百万个谷歌地图请求。该请求将来自成千上万的独立用户（免费）。

但是，问题是谷歌地图 API 限制。对于简单的事情，例如获取地图或地理编码 - 不需要任何 API 密钥。但是，如果我搜索地点（例如，伦敦或电影院、巴黎的比萨饼或 AnyCityHere 医生） - 则访问“地点 API”。每个 API KEY（而不是每个用户）每天限制 100k 个请求，因此如果我的应用程序成功，它将每天很快停止工作。

根据[https://developers.google.com/places/uplift](https://developers.google.com/places/uplift) - 我可以使用“Places Library ...”而不是“Places API Web 服务” - 为了不使用 API 密钥，并对每个用户进行限制计数，而不是整个应用程序。问题是，这个替代解决方案是一个 JavaScript 库，可能无法在 WindowsPhone 应用程序中使用，对吗？

所以问题是：谁能告诉我如何为 WindowsPhone 用户提供可靠的谷歌地图解决方案，使地方搜索请求限制为单个用户，而不是整个应用程序？

现在没有必要为 WindowsPhone 编写成功的谷歌地图客户端，因为获得成功意味着你要么因为 API 请求限制而卡住，要么你必须为此向谷歌付费，对吗？或者我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T07:17:35.850

您可以使用基于 Navteq 强大地图的诺基亚地图

[Windows Phone 8 的地图和导航](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207045%28v=vs.105%29.aspx)

# c# - 将对象传递给 T4 文本模板

> ID：15180682
> 
> 赞同：6
> 
> 时间：2013-03-02T23:34:08.533
> 
> 标签：c#, .net, t4

我有一个 T4 模板，我试图在运行时将对象值传递给它。

基本上我们想要做的是：

1.  从 Windows .NET 表单中，将文件作为文本读取

2.  将外部对象属性设置为文本值

3.  在具有 .java 输出扩展名的 T4 文本模板中访问该对象属性。

我现在开始非常简单，我只有模板和表单并说一个外部类对象：

![流动](../Images/ec3863bfe0ae523228cb2905a9a62ea5.png)

当然，阅读表单部分中的文本并设置像 foo.foocode 这样的对象属性是相当简单的。

我只是不知道如何在模板中访问该对象变量或属性，而且我已经研究了一天多。

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-03T19:25:12.293

在运行时，您只能转换预处理模板，因为模板引擎不是 Visual Studio 的可再分发部分。[您可以使用参数指令](http://msdn.microsoft.com/en-us/library/gg586944.aspx)将对象传递给预处理模板。传递给模板的对象类型必须用`SerializableAttribute`. 在调用该`TransformText()`方法之前，将参数的值放入模板会话中。

使用预处理模板时，将忽略输出扩展指令。该`TransformText()`方法返回一个带有生成代码的字符串。您可以将其保存为您想要的任何文件类型。

```
<#@ template debug="true" #>
<#@ parameter name="MyObject" type="MyNamespace.MyType" #>

<#
  // now access the passed parameter using
  this.MyObject
#> 
```

调用预处理模板：

```
var templateInstance = new MyTemplate();
templateInstance.Session = new Dictionary<string, object>();
templateInstance.Session.Add("MyObject", new MyType());
templateInstance.Initialize();

var generatedCode = templateInstance.TransformText();

System.IO.File.WriteAllText("outputfile.java", generatedCode); 
```

希望这可以帮助。

# c++ - 销毁装有琐碎物品的容器

> ID：15180683
> 
> 赞同：0
> 
> 时间：2013-03-02T23:34:08.777
> 
> 标签：c++, destructor

我有一个简单的结构，里面有一个指针和一个 int：

```
struct A
{
    int* ptr_;
    int  i_;
}; 
```

我现在创建这些结构的向量：

```
std::vector<A> vec_; 
```

现在 A 的析构函数无关紧要了。那么当 vec_ 被析构时，编译器还会发出对 A 的析构函数的调用吗？

# javascript - 如何找到神秘绑定的 Javascript 事件

> ID：15180689
> 
> 赞同：6
> 
> 时间：2013-03-02T23:34:41.903
> 
> 标签：javascript, jquery, dom-events, underscore.js, marionette

我正在开发一个非常复杂的 HTML5 应用程序（主干、牵线木偶、jQuery、下划线、车把、引导程序等），并且在应用程序的深处是一个带有表单的模态弹出窗口。

当模式弹出打开时，第一次单击任何表单域时，表单域会自行取消选择。在第一次单击之后，您可以正常使用表单。当应用程序最终加载到生产中的 iFrame 中时（不要问），当您第一次单击任何表单字段或将鼠标悬停在任何按钮上时，整个页面会向下滚动，直到表单位于 div 元素的顶部模态框位于页面顶部，但是在它执行一次之后，它不会再执行一次（感到困惑吗？是的，它很复杂且分层）。

我什至不知道如何开始调试这个问题（数千行代码，两个库）。

我试过这些：

```
console.log('bound events: ', $._data(this.$el.find('#RandomFieldID')[0], 'events'));
console.dir($('#elmId').data('events'));
console.log('bound events: ', $._data($('body')[0], 'events')); 
```

但这没有产生任何结果。

由于这是一个库上的库上的框架，我什至不确定从哪里开始尝试找到明显绑定到这些字段的东西，或者即使它是绑定到的字段或完全其他的东西。 ..

因此，任何关于如何调试神秘绑定的 Javascript 事件的好策略的建议（使用多个 JS 库和框架，在问题解决之前不能只是注释掉，因为它们甚至可以让 HTML 出现在第一页）？

而且，不幸的是我不能做一个 jsfiddle 什么的，因为正如我所说，这在应用程序的深处，我基本上必须在 JSFiddle 内重新创建应用程序（不可能）以链接到一个示例（和，它不在面向外部的站点中，所以我不能在生产中直接链接到它）。

我难住了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-03T00:18:06.647

这是我使用 Chrome 的方法。

1.  `Ctrl-Shift-J`打开 Javascript 控制台。

2.  单击左下角的小放大镜，它可以让您用鼠标选择一个元素。

    ![点击放大镜](../Images/870984baaa263a20e860f1031b26d4d0.png)

3.  单击页面上的一个元素（当您转到它时它会突出显示。）它将在底部的 DOM 中突出显示，并在右下角显示一堆属性。

4.  在右下角一直经过 CSS 属性和事件监听器：

    ![？？？](../Images/63320145fdac814b060be22e685bd0e1.png)

5.  选择您感兴趣的事件侦听器。它将向您显示绑定的函数以及将执行的脚本中的确切代码行。这应该告诉你哪个图书馆正在做你疯狂的事情。

    ![利润！](../Images/b0f8724bdab5b4b8d44c432a348df21b.png)

与 FireBug 和 IE 开发工具相比，我发现 Chrome 调试器更强大、更快速（不会滞后）。强烈推荐:)

# lucene - Lucene索引一个大的多对多关系

> ID：15180694
> 
> 赞同：0
> 
> 时间：2013-03-02T23:35:22.543
> 
> 标签：lucene

我有一个包含两个主表的数据库：

1.  组件表（50M 行），
2.  装配表（100K 行），

..以及它们之间的多对多关系（每个组件大约有 100K 个组件），因此总共有 10G 关系。

索引组件的最佳方法是什么，以便我可以查询*给定程序集*的索引？鉴于关系的数量，我不想将它们导入到 Lucene 索引中，而是正在寻找一种方法来动态“加入”我的外部表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T23:57:54.727

Solr 支持多值字段。如果 Lucene 本身支持它们，则不是肯定的。对我来说已经有一段时间了。如果只有一个实体是可搜索的，您提到的是组件，我将使用名为“程序集”或“程序集Ids”或类似字段的所有组件索引所有组件，并包含识别程序集所需的任何元数据。

然后你可以搜索组件

```
assemblyIds:(1, 2, 3) 
```

在装配体 1、2 或 3 中查找零部件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T15:29:02.940

简而言之，您必须先处理数据并为其编制索引，然后才能进行搜索。因此，没有办法只是将 Lucene“插入”到某些数据或数据库中，而是您必须将其自身的数据插入（处理、解析、分析、索引和查询）到 Lucene。

* * *

rustyx：“我的数据大多是静态的。我什至可以使用只读索引。”

在这种情况下，您可以自己使用 Lucene。您可以迭代数据源以将所有多对多关系添加到 Lucene 索引。您是如何得出“100GB”大小的？人们使用 Lucene 索引数百万个文档，我认为索引对您来说不是问题。

您也可以在具有“程序集”字段的文档中将多个字段实例添加到具有不同值（“组件”）的索引中。

* * *

rustyx：“我正在寻找一种方法来“加入”Lucene 搜索与我的外部数据源动态“

如果您需要无缝的东西，您可以尝试以下框架，它就像关系数据库和 Lucene Index 之间的桥梁。

[Hibernate Search](http://docs.jboss.org/hibernate/stable/search/reference/en-US/html_single/)：在该教程中，您可以搜索“@ManyToMany”关键字以找到教程中的确切部分以获得一些想法。

# machine-learning - 互联网流量分类

> ID：15180697
> 
> 赞同：0
> 
> 时间：2013-03-02T23:35:31.430
> 
> 标签：machine-learning, classification, traffic

最近，我一直在阅读一些关于互联网流量分类的论文，特别是使用机器学习算法。

我打算研究它，我想为我这学期的机器学习课提出一个关于互联网流量分类的项目想法。

我的第一步是在由 3-4 个客户端组成的本地网络上收集数据。我正在使用 wireshark 工具来嗅探数据包。

我的下一步是从wireshark 数据包中提取TCP 流。在这一步，我尝试在 Linux 上使用 tcpflow。tcpflow 为每个流创建不同的文件。在这里，文件的内容大多是二进制的，我不知道如何从这些文件中提取鉴别器。

有人可以给我一个想法或分享他/她关于如何解释 tcpflow 文件的经验吗？我会很高兴听到你的建议。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T00:05:31.447

以下是一些可以从 TCP 流量中提取的特征的想法：

*   端口/协议（大多数协议通常在服务器上使用相同的端口）
*   数据包频率和大小（短命令数据包或长数据流）
*   TCP连接阶段
*   流错误/重传
*   流量控制消息和速率限制

为了更好地提取特征，您可能必须查看某些协议（HTTP、DNS 等）本身的详细信息，而不仅仅是 TCP 流。我认为wireshark已经这样做了，为什么不重用他们的库功能呢？

您可能还想查看[入侵检测系统](http://en.wikipedia.org/wiki/Intrusion_Detection_System)(IDS) 的设计，因为它们几乎对流量做同样的事情，并试图将其分类为良性或恶意。

# bash - 删除 bash 中的所有字符（期望 az 0-9）

> ID：15180702
> 
> 赞同：1
> 
> 时间：2013-03-02T23:36:01.603
> 
> 标签：bash

我正在尝试删除 bash 文件中除字符 az 和 0-9 之外的所有字符，这是我目前所拥有的：

```
#!/bin/bash
i=-1
cat rtrans.txt | while read line
do
  i=$((i+1))
  for word in $line
  do
    echo "$i $word"|tr A-Z a-z|sed 's/[\._-]//g'
  done 
done > input1.test 
```

但是，使用 sed 似乎我必须输入我想要删除的所有不同的非字符。

这有更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T23:43:43.640

您可以使用字符类

```
echo "$i $word" | tr A-Z a-z | sed -e 's/[^a-z0-9]//g' 
```

这将删除所有*不在* `^`.`[a-z0-9]`

如果要将文件拆分为单词并连续编号，您也可以尝试

```
tr -s ' \t' '\n' <rtrans.txt | tr A-Z a-z | sed -e 's/[^a-z]//g' | nl -n ln -w1 -s ' ' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-27T10:28:21.657

您可以`${var/Pattern/Replacement}`按照 bash[参数替换](https://tldp.org/LDP/abs/html/parameter-substitution.html)的建议使用。

在您的情况下，要从 $word 中删除除 az、AZ 和 0-9 之外的所有字符：

```
echo "$i ${word//[^a-zA-Z0-9]/}" 
```

# bash - 具有自定义输出的人的 bash 脚本

> ID：15180704
> 
> 赞同：3
> 
> 时间：2013-03-02T23:36:08.883
> 
> 标签：bash, manpage

我正在尝试做一个 bash 脚本，它只为我提供“n”命令的第一行 man。

例子：

```
$ sh ./start.sh ls wazup top 
ls - list directory contents
wazup - manpage does not exist
top - display Linux tasks 
```

这是我当前的代码：

```
! bin/bash/
while [ -n "$1" ]
do
which $1> /dev/null
man $1 | head -6 | tail -1
if [ $? = 0  ]
then
echo "manpage does not exist"
fi
shift
done 
```

我的输出是：

```
ls - list directory contents
manpage does not exist
No manual entry for wazzup
manpage does not exist
top - display Linux processes
manpage does not exist 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T23:39:29.787

检查由返回的状态代码`man`，而不是在它通过管道后检查`head`（`tail`这将是错误的，因为它将是的返回状态`tail`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T00:00:19.123

非常感谢亚历克斯！

在您的帮助下不使用管道解决了这个问题！:)

这是我为任何需要它的人提供的最终代码：

```
#!/bin/bash
while [ -n "$1" ]
do
which $1> /dev/null
if [ $? = 0 ]
then
man -f $1
else 
echo "$1: manpage does not exist" 
fi
shift
done 
```

# ruby - Ruby :id 来自 params[:id]

> ID：15180706
> 
> 赞同：0
> 
> 时间：2013-03-02T23:36:35.867
> 
> 标签：ruby, routes, params

我正在写一个表单，当它到达内容控制器时，我似乎错过了我的 params[:id]。

这是我的路线.rb：

```
match '/site/content/myaction/:id', :to => 'contents#myaction' 
```

形式是“myaction”，它位于部分 _edit.html.erb 中：

```
<%= form_tag :action => 'myaction' do %>
    <input id="old_id" name="myaction_name" type="text" />
    <%= submit_tag 'Submit' %>
<% end %> 
```

在我提交我所在的表单之前：`/site/content/edit/:id/` 在我点击提交并且我在我所在的错误页面之后： `/site/content/myaction/`

它进入内容控制器中的 myaction ，但我得到 id 为空的错误......这是参数：

```
{"utf8"=>"✓",
 "old_id"=>"2",
 "commit"=>"Submit",
 "id"=>nil} 
```

我错过了什么？似乎它没有选择我的路线？不然怎么重定向……

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T23:48:02.393

您需要将 id 传递给表单的 url：

```
form_tag :action => 'myaction', :id => 5 do 
```

# c++ - Win32 窗口样式重叠问题

> ID：15180707
> 
> 赞同：2
> 
> 时间：2013-03-02T23:36:35.513
> 
> 标签：c++, winapi, windows-style-flags

我有两个由以下人员创建的列表框窗口：

```
_objectList = CreateWindow("LISTBOX", NULL, WS_CHILD | WS_VISIBLE | LBS_STANDARD | LBS_SORT, 5, 50, 10, 50, _windowParent, NULL, _windowInstance, 0);
_resourceList = CreateWindow("LISTBOX", NULL, WS_CHILD | WS_VISIBLE | LBS_STANDARD | LBS_SORT, 5, 50, 10, 50, _windowParent, NULL, _windowInstance, 0);

ShowWindow(_objectList, 1);
ShowWindow(_resourceList, 0); 
```

它们位于 TabControl 框内，当我单击一个选项卡时，我想显示/隐藏另一个。我正在这样做：

```
//In the message proc function
if(uMsg == WM_NOTIFY)
{
    if(((LPNMHDR)lParam)->code == TCN_SELCHANGE)
    {
        if(((LPNMHDR)lParam)->hwndFrom == _tabControl.GetWindowHandle())
        {
            int index = SendMessage(_tabControl.GetWindowHandle(), TCM_GETCURSEL, 0, 0);
            _tabControl.showTab(index); //this function will call the ShowWindow(); to show only the tab I'd like to display
        }
    }
} 
```

这是我第一次运行代码时列表框的外观（右侧的 ObjectList）： [列表框正确显示 http://img.photobucket.com/albums/v204/Shakazahn/ListboxOK_zpsee5c62b9.jpg](http://img.photobucket.com/albums/v204/Shakazahn/ListboxOK_zpsee5c62b9.jpg)

这是当我单击选项卡时： [列表框突然变得丑陋 http://img.photobucket.com/albums/v204/Shakazahn/ListboxNotOK_zps5d05a019.jpg](http://img.photobucket.com/albums/v204/Shakazahn/ListboxNotOK_zps5d05a019.jpg)

如果我点击显示第一个列表框，我也会得到： [第一个列表框也被感染 http://img.photobucket.com/albums/v204/Shakazahn/ListboxNotOK2_zpsc1dca19a.jpg](http://img.photobucket.com/albums/v204/Shakazahn/ListboxNotOK2_zpsc1dca19a.jpg)

我尝试更改一些窗口样式但没有任何效果，而且，我不知道为什么会发生这种情况......对此有任何修复吗？

**编辑**：经过一些测试，我发现这是因为两个列表框都是主窗口的子窗口，而不是 tabControl 窗口。如果我将两者的 parentWindow 都设置为 tabControl，它们显示得很好，但是我遇到了窗口孙子和很多子类的问题，所以我将所有窗口都设为我的主窗口的子窗口。如何解决此显示问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T00:43:23.980

设置`WS_CLIPSIBLINGS`列表框和选项卡控件的样式，并确保 z 顺序使得两个列表框绘制在选项卡之后。

# android - 如何使用具有动态大小和动态位置的自定义布局制作列表？

> ID：15180709
> 
> 赞同：1
> 
> 时间：2013-03-02T23:36:39.690
> 
> 标签：android, android-layout, android-listview, android-fragments, android-scrollview

![](../Images/60d3bd7365b82469192c18b4ec6bfbd2.png)

这是我的目标：

*   第一个图像必须与其他图像具有不同的高度。
*   第二个和第三个图像必须在同一行。
*   奇数行有一个图像。
*   即使行有两个图像。
*   图像必须在带有动态文本且透明的文本视图中。
*   该列表将是布局的一部分，而不是全部。
*   列表必须滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-18T07:05:15.323

这个库也许可以帮助你实现那种 UI。 [https://github.com/etsy/AndroidStaggeredGrid](https://github.com/etsy/AndroidStaggeredGrid)

`An Android staggered grid view which supports multiple columns with rows of varying sizes.`

![在此处输入图像描述](../Images/86171e34cb429673b6e50a9a062980fb.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T23:54:57.230

您应该能够通过一些布局嵌套来做到这一点。听起来您列表中的每个“行”本身都包含两行。

# c++ - isalpha 总是返回 0

> ID：15180713
> 
> 赞同：0
> 
> 时间：2013-03-02T23:37:37.433
> 
> 标签：c++, string, int, atoi

这是我用来检查是否`key`是数字的代码：

```
string key;
cin>>key;
if(isalpha(atoi(key.c_str())) == 0)
{
     //do something
}
else
    //do something else 
```

无论我输入什么，`isalpha`总是`== 0`。我尝试通过使用将它视为布尔值，`if(isalpha(atoi(key.c_str())))`但它做同样的事情。

关键应该是一个`int`，但`cin.fail()`也`!(cin>>key)`没有工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T23:51:48.140

在您的代码中，`key`是一个 C++ 字符串。

```
string key; 
```

这会将 C++ 字符串转换为 C 字符串。

```
key.c_str() 
```

这会将 C 字符串转换为数字。一个整数。（`0`如果值不能转换）

```
atoi(key.c_str()) 
```

这会检查该数字是否是字母的 ASCII 码

```
isalpha(atoi(key.c_str())) 
```

您正在将 C++ 字符串转换为 C 字符串，将整数转换为 ASCII 值，然后检查该值是否是字母表（它不会告诉您它是否是数字，而只会告诉您它是否是“字母”或“不是一封信”）

**只有当用户输入的不是字母的数字 ASCII 值**时，您编写的 if 语句才会为真。例如输入`65`将转到 else 子句，因为`65`ASCII 码是`'A'`

试试@chris 提供的建议。

```
try
{
    int the_number = std::stoi(key);
    //do something
}
catch( std::exception& )
{
    //do something else
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T01:13:11.427

正如@suspectus 所做的那样，除了遍历字符串中的每个字符并`isDigit`改为使用它之外，它不会认为`!`或`@`不是数字。

```
for(int i = 0; i<key.size(); i++)
{
   if(!(isdigit(key[i])))
   {
      //fails
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T23:40:20.273

您正在定义没有内容的键，并在它返回一个指向空数组的 char 指针的情况下立即使用它的 t_str 方法。因此 atoi 总是返回零。

请参考这里[http://www.cplusplus.com/reference/cstdlib/atoi/](http://www.cplusplus.com/reference/cstdlib/atoi/)

在给定的示例中，键为空且 atoi 参数无效，因此 atoi 始终返回零

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T23:58:09.117

如果您需要测试输入是否为数字 - ：

```
string key;
cin>>key;
if (key.size() && isalpha(*(key.c_str()))
{
    //do something with non-numeric input
}
else
    // numeric input, use atoi to get integer value 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T23:59:14.757

请注意，[`atoi`](http://www.cplusplus.com/reference/cstdlib/atoi/)用于确定字符串是否包含数字并不是很幸运的选择。如果你想确保你的字符串只包含数字，那么你能做的最好的就是遍历它的字符并检查每个字符（你可以使用[`std::isdigit`](http://en.cppreference.com/w/cpp/string/byte/isdigit)）。

然后从这个字符串中提取整数值，在 C++11 中你可以使用[`std::stoi`](http://en.cppreference.com/w/cpp/string/basic_string/stol)，否则你可以使用 [`std::istringstream`](http://www.cplusplus.com/reference/sstream/istringstream/)：

```
int val;
std::string key;
// ...
if (std::istringstream(key) >> val)
{
    // success
}
else
{
    // failure
} 
```

当以表示数字的字符串开头时，它将以*成功告终。*`key`所以它也适用于 , 等字符串`42abc`。`0x21zzz`然后这取决于你的具体情况，但在这种情况下你甚至不需要任何先前的验证。

可能有帮助的相关问题：[How to determine if a string is a number with C++?](https://stackoverflow.com/q/4654636/1168156)

# python - 如何重建 django 模型，以便可以访问 manage.py shell 实例中的新方法？

> ID：15180720
> 
> 赞同：1
> 
> 时间：2013-03-02T23:38:20.540
> 
> 标签：python, django

我对 python 和 django 很陌生！

我创建了一个与我的 MySQL 数据库实例正确同步的模型：

```
class HelloWorld(models.Model):
    string = models.CharField(max_length=255)

    def __unicode__(self):
        return "Data: " + self.string 
```

当我启动交互式外壳时

```
manage.py shell 
```

我可以通过以下方式查看我的模型记录：

```
import print_string
HelloWorld.objects.all()
[<HelloWorld: Data: Hello there>] 
```

我想做的就是修改我的模型：

```
 def __unicode__(self):
        return "This is my data now: " + self.string 
```

...然后立即在我的交互式 shell 中查看此更改。

如何刷新/重新编译我的项目，以便后续调用：

```
HelloWorld.objects.all() 
```

...然后会返回：

```
[<HelloWorld: This is my data now: Hello there>] 
```

目前，我能看到的唯一方法是退出 shell，重新启动它并再次导入我的模块，有没有办法即时刷新这个？

# google-maps - 谷歌地图标记可以将方形自定义图像的圆形版本显示为图标吗？

> ID：15180724
> 
> 赞同：1
> 
> 时间：2013-03-02T23:38:49.123
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我想知道是否可以显示方形图像的圆形版本，该圆形图像作为图标图像传递给谷歌地图标记（api v3）？

用例将显示圆形版本的 gravatar 作为标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:00:23.577

根据[文档](https://developers.google.com/maps/documentation/javascript/reference#Icon)，您可以指定标记图标的锚点、图像和大小，但不能裁剪它的圆形版本。我认为您可能希望将 gravatar 存储为`.png`文件，然后在后端以透明方式裁剪它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T08:09:29.223

如果您在从服务器传送时无法编辑图像，也许您可​​以通过在同一位置的顶部添加另一个图标并在中心放置一个透明圆形区域来为其添加一个蒙版。

虽然这可能看起来有点奇怪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-21T13:48:12.843

你可以创建一个 HTML 标记，给它border-radius:50%

并在其中放入图像。你有一个完美的圆形图像作为标记。

# r - 使用子选择的问题

> ID：15180728
> 
> 赞同：1
> 
> 时间：2013-03-02T23:39:34.503
> 
> 标签：r, data.table

我有一个包含多行和 3 列的数据集。第一列`race`用`0`s、`1`s 和`NA`s 填充。我试图拉出与`0`s 相对应的行，同时也忽略任何`NA`s。

我的代码：

```
dt = data.table(cbind((data[,'race']), (data[,'age']), (data[,'sex'])))
data = dt[complete.cases(dt), ] #remove the NAs
subset(data,race == 0) 
```

我不断收到此错误，但我不确定这意味着什么：

```
Error in `[.data.table`(x, r, vars, with = FALSE) : 
  i is invalid type (matrix). Perhaps in future a 2 column matrix could 
  return a list of elements of DT (in the spirit of A[B] in FAQ 2.14). 
  Please let datatable-help know if you'd like this, or add your 
  comments to FR #1611. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T00:13:36.923

看起来您可以通过使用以下方法来节省一些步骤（并获得相当大的速度）：

```
 setkey(dt, "race")
  dt[!is.na(race)][.(0)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T00:15:49.857

尝试这个：

```
na.omit(dt)[race==0] 
```

该`na.omit`函数将在排除任何包含`NA`.

# c++ - 抑制/删除 Eclipse CDT 中的特定错误

> ID：15180735
> 
> 赞同：2
> 
> 时间：2013-03-02T23:40:17.563
> 
> 标签：c++, eclipse, eclipse-cdt

在开始之前，我想明确说明一切正常。我知道我似乎在问一些不起作用的东西，但它实际上只是不正确的错误代码。

反正;

我正在`std::thread`通过实验性 MinGW 使用，不幸的是似乎存在一个错误，即与使用相关的所有内容都会`thread`引发以下内容：

`Type/Method "name" can not be resolved`

现在，代码很好，构建良好并且工作正常，所以我确定这只是一个带有错误的错误。我想知道是否有办法让这些错误在使用时不出现`thread`。问题是，当我因为其他原因在别处犯错时，我仍然希望它们出现。

有没有办法在一行中抑制错误/警告？还是一种包围某些代码并忽略该代码上的警告的方法？

哦，我知道这不是一个严格的编程问题，但因为它是关于编程工具的，所以我认为这很好（至少我已经看过足够多这样的问题了！）。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:35:41.167

不幸的是，没有办法做我上面描述的事情。我能找到的最好方法是通过 Eclipse 代码分析菜单阻止某些文件中的某些错误。但这并不理想，因为`Method X can not be resolved`在整个文件中阻止某些内容可能会导致您看不到来自您未预料到的代码区域的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-06T11:19:10.287

由于 Eclipse Oxygen.3 (or.2) 标记可以通过使用“快速修复”来抑制。“快速修复”将添加一条评论，例如

```
// @suppress("Class members should be properly initialized") 
```

但您也可以手动完成。

# html - 与文本内联的按钮/链接？

> ID：15180738
> 
> 赞同：-1
> 
> 时间：2013-03-02T23:40:22.333
> 
> 标签：html, css, styles

出于某种原因，我的标题按钮，它们只是：

```
<a href="#" class="button">Home</a>
<a href="#" class="button">Sign In</a>
<a href="#" class="button">Join!</a> 
```

我希望它们与 h1 标签内联显示，尽管它们不是。html/css 在这里：http: [//jsfiddle.net/XqsvP/](http://jsfiddle.net/XqsvP/)

我不确定我需要使用什么 css inline 或什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T00:01:33.853

`<div>`默认情况下，元素是“块”级元素。这意味着它们总是在可以被认为是新行的前面，而不是与当前行“内联”。

在您链接到的 jsFiddle 上，尝试更改`div.right`为`display:inline;`or `display:inline-block;`（CSS 的第 25 行）。这将导致`<div>`与当前行“内联”显示。

* * *

我已经用你的小提琴来展示我建议的改变：http: [//jsfiddle.net/CBEGS/1/](http://jsfiddle.net/CBEGS/1/)

请注意，垂直边距可能需要一些调整，并且换行可能仍会强制按钮换行到下一行，但解决这些单独的问题是单独问题的主题:)

* * *

要`div.right`右对齐和`h1.nobreak`左对齐，您可能需要将宽度`div.header_div`设置为 100%，以便它与页面右侧对齐，而不是窄 div 的右侧。

此外，这些问题可能是相关的：

[在同一行左右对齐两个内联块](https://stackoverflow.com/questions/10272605/align-two-inline-blocks-left-and-right-on-same-line)

[“文本对齐：对齐；” 内联块元素正确吗？](https://stackoverflow.com/questions/11589590/text-align-justify-inline-block-elements-properly)

# c++ - 现在在现代 C++ 中使用内联汇编有一些好处吗？

> ID：15180739
> 
> 赞同：0
> 
> 时间：2013-03-02T23:40:33.690
> 
> 标签：c++, optimization, inline-assembly

我很有趣，如果我在现代 C++ 中使用内联汇编和现代编译器（如 GCC 4.7 和 VS12），我现在会有什么好处吗？例如矢量化和一些小的优化？或者这只是顽皮，现代优化编译器在任何范围内使用它都没有给我什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T23:47:50.113

内联汇编的使用使您的代码架构特定。即使对于类似的东西`vectorization`，您现在也依赖于执行此代码的目标需要支持这些特殊/增强指令集的事实。

假设有人试图将您的代码从 移植`x86`到`ARM`，他们将很难处理。

我建议有一种机制，您可以通过该机制检测目标是否支持 SSE2 或 SSE3 等向量指令集，并执行优化的代码，并在不支持增强指令集的目标上运行故障安全代码。

例如，Linux 内核将`arch`目录下的所有体系结构特定代码抽象出来，并且针对不同体系结构存在相同功能的实现。如果您知道您的代码可能会在多个不同的架构上执行，您可以通过提出自己的抽象来做类似的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T23:49:04.790

与许多事情一样，这取决于。

对于您可能编写的大多数代码，内联汇编不太可能有帮助。现代编译器相当聪明，并且通常会生成至少与您可以编写的任何代码一样好的代码。（而且它们生成它的速度也比你编写和调试它的速度要快得多。）

正如您所猜到的，例外是编写某些矢量代码。虽然一些编译器会尝试对某些循环进行矢量化，但它们的工作不如熟练的人。在某些应用（例如，DSP、视频编码等）中，这可能会产生重大影响。但是，这需要您对所编码的处理器有详细的了解——写得不好的向量代码通常会比编译器提供的标量代码执行得更差！

底线：除非您有充分的理由相信您**需要**编写内联汇编，否则请避免使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T23:54:46.113

通常，您要寻找的是对特定指令进行薄包装的内在函数。

这使您可以在不放弃 C++ 的类型安全的情况下访问例如向量指令，同时保留与内联汇编提供的类似程度的控制。本质上，使用内在函数，您可以选择要使用的指令，但编译器会执行寄存器分配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T23:52:52.427

这个问题的答案有点像英语表达“一段字符串有多长”——如果不实际展开整段字符串，就无法轻易回答。同样在这里，不知道代码实际上应该做什么，很难说是否有好处。

我的一般做法是使用 C 或 C++ 编写代码，然后看看编译器做了什么。如果它足够快[无论定义为什么]，那么就不需要做任何其他事情。如果速度不够，请查看代码，看看是否有任何琐碎的算法优化，或简化，拆分函数以避免代码中间出现 if 语句等。分析代码，看看在哪里它正在花费时间。

在改进的每一步之后[测量并跟踪更改、设置等-我通常有电子表格，其中包含“有了这个改变，它的运行速度提高了 4%”、“有了这个，它的运行速度降低了 2%”]。

一旦你用尽了所有其他选项，那么你就可以开始考虑内联汇编了。有时，如果你“做正确的事”，可能会有很大的改进。在其他时候，根本没有太多收获。

我最近写了一些内存基准测试，使用`gcc`. 当我使用`volatile`（强制内存写入实际发生）时，编译器产生了相当垃圾的代码，所以当我在内联汇编器中编写相应的代码时，它快了 3-4 倍。但是，一旦我重新排列代码以在内存写入本身之后的一步中实际使用写入内存，并删除`volatile`，编译器就和我的 SSE2 代码一样好。

对于复杂的 SSE 代码，我仍然认为编译器在某些情况下会有所欠缺，但它有时会非常聪明——它肯定会将简单循环优化为完整的 SSE2 代码。

我发现的最大收获是当编译器根本不理解你真正想要发生的事情时[或者它不能为你想要的操作生成正确的代码]。非时间移动就是一个例子——你不想在缓存中存储一​​些东西，因为你知道它在缓存中无论如何都不会有用。

# c# - c#中的xml阅读器和命名空间

> ID：15180742
> 
> 赞同：1
> 
> 时间：2013-03-02T23:40:54.300
> 
> 标签：c#, xml-namespaces, xmlreader

我正在尝试使用 xml 阅读器读取 xml 数据，xml 文件包含很多前缀，因此我将命名空间包含在`XmlNamespaceManager`示例代码中

```
using (XmlReader reader = new XmlTextReader(fileName))
{
    XmlNamespaceManager nsmanager = new XmlNamespaceManager(reader.NameTable);
    nsmanager.AddNamespace("s", "http://www.google.com/shopping/api/schemas/2010");
    while (reader.Read())
    {
        switch (reader.Name)
        {
            case "s:name":
                Console.WriteLine(reader.Name);
                break;
            case "s:condition": 
                Console.WriteLine(reader.Name);
                break;
        }
    }
} 
```

它输出空行，这是包含命名空间的正确方法吗？

在 vb.net 中，我将命名空间导入为

```
Imports <xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
Imports <xmlns:msxsl="urn:schemas-microsoft-com:xslt">
Imports <xmlns:rh="ReportHub">
Imports <xmlns="http://www.w3.org/2005/Atom">
Imports <xmlns:gd="http://schemas.google.com/g/2005">
Imports <xmlns:openSearch="http://a9.com/-/spec/opensearchrss/1.0/">
Imports <xmlns:s="http://www.google.com/shopping/api/schemas/2010"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:09:32.760

`reader.ReadElementString`通过使用而不是解决问题`reader.Value`

# amazon-ec2 - 无法将节点添加到 EC2 AMI 上的现有集群 cassandra datastax

> ID：15180743
> 
> 赞同：1
> 
> 时间：2013-03-02T23:41:16.203
> 
> 标签：amazon-ec2, cassandra, datastax-enterprise

我在 EC2 上有一个 Datastax 集群 cassandra（1.2），带有 opCenter（3.0.1）和 2 个节点。我遵循了本指南：[http ://www.datastax.com/docs/1.2/install/install_ami](http://www.datastax.com/docs/1.2/install/install_ami)

使用这个：

--clustername cass1 --totalnodes 2 --version community 使用具有正确打开端口的自己的安全组（如指南所述）

之后我可以打开 opsCenter 并修复 2 个节点，一切都很好

然后我想向集群添加一个新节点（两种方法）

1 - 通过 opsCenter 我有：“安装错误：安装的代理似乎没有响应”

实例正在运行，但...

2 - 通过指南：[http ://www.datastax.com/docs/1.2/install/expand_ami](http://www.datastax.com/docs/1.2/install/expand_ami)

我用这些参数创建另一个集群

--clustername tmp --totalnodes 1 --version 社区

（集群名称不同于第一个集群）

然后在实例上：

须藤服务卡桑德拉停止

sudo rm -rf /var/lib/cassandra/*

须藤 vi /etc/cassandra/cassandra.yaml

```
 changing cluster name and seed ip 
```

须藤服务卡桑德拉开始

但是当“nodetool status”无法连接到“127.0.0.1:7199”时：连接被拒绝

我哪里错了？尝试并重试，我无法添加节点

谢谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T20:37:23.690

AMI 在 /raid0/cassandra 中安装 cassandra。不要删除 /var/lib/cassandra 中的数据，而是运行

`sudo rm -rf /raid0/cassandra/*`

停止节点后。这将为您清除所有内容，您可以更改 yaml 文件中的集群名称并将其重新启动到正确的集群中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T11:39:30.003

I've found a solution

As datastax guide say i have to create a new cluster with a different name than existant cluster then erase the data config data and reconfigure

But sudo rm -rf /var/lib/cassandra/* doesn't erase the cluster name and as i have to change it in the cassandra.yaml when i restart node, it didn't start because name cluster is not the same in .yaml and in system keyspace

So the solution is to create new node with the good cluster name

Maybe there is an other way to change the cluster name....

But i'm keeping the problem of adding new node via opsCenter (more easy way)

# php - 多次调用ajax来更新最终用户的结果

> ID：15180748
> 
> 赞同：0
> 
> 时间：2013-03-02T23:42:39.213
> 
> 标签：php, javascript, jquery, ajax

我想使用 AJAX 和 PHP 多次更新浏览器结果。

这里的代码会调用一个 getDest.php 文件来检索所有的 html 文件，这些 html 文件将附加到一个名为 的 div id`results`中，大约有 21 个城市。我想一个一个地展示每个城市，而不是一次展示所有城市。

我尝试了许多不同的方法，任何帮助表示赞赏。

```
<script>
function hideContainer() {
  jQuery('.city_container').hide();
};
function showContainer() {
  jQuery('.citywrapper').hover(function() {
    jQuery(this).find('.city_container').show();
  },
  function() {
    jQuery('.city_container').hide();
  });
};
</script>

<script>
$.ajax({
  type: "GET",
  url: "getDest.php"
}).done(function( html ) {
  $("#results").append(html);
  hideContainer();
  showContainer();
});
</script> 
```

getDest.php

```
<div class="citywrapper">city1 <div class="city_container">descript1</div></div>
<div class="citywrapper">city2 <div class="city_container">descript2</div></div>
<div class="citywrapper">city3 <div class="city_container">descript3</div></div>
<div class="citywrapper">city4 <div class="city_container">descript4</div></div>
<div class="citywrapper">city5 <div class="city_container">descript5</div></div>
<div class="citywrapper">city6 <div class="city_container">descript6</div></div>
.... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T23:57:17.207

这样的事情呢？如果您的 ajax 调用一次返回所有 HTML，我无法想象您为什么要多次调用。

我在评论中添加了准确解释这里发生的事情，以防你对 jQuery 不太熟悉。

```
<script>
  $.ajax({
    type: "GET",
    url: "getDest.php",
    success: function(html) {

      // Wrap the raw html into a jquery object
      var elements = $(html);

      // Loop through each top-level element in jquery object.
      $.each(elements, function(i, el) {

        setTimeout(function() {

          // el points to the element at position i in jquery object 'elements'
          $('#results').append(el);

        // Each element takes one more second to append than the previous one
        }, i * 1000);
      }
    }
  });
</script> 
```

除了追加之外，您还可以通过在元素上追加“显示：无”CSS 属性，然后使用 jQuery 动画（例如“el.slideDown()”或“el.fadeIn() ”。

如果您希望在附加结果之间超过一秒，只需交换

```
i * 1000 
```

为了

```
i * seconds_in_between * 1000 
```

您应该考虑上一个元素在下一个元素之前完成显示是否对您很重要——因为这会影响所需的时间。

此外，为了最佳实践，在“成功”函数旁边包含一个“错误”函数，以防请求失败。你不希望用户点击很多次却发现什么都没有发生——一定要让他们知道失败的原因。例如“无法加载城市列表”。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T00:11:51.903

我在 JSFiddle 上为您创建了一个[代码片段。](http://jsfiddle.net/gnMTX/)这里是主要部分：

```
$(".city_container").each(function(index) {
    var cityContainer = this;
    setTimeout(function(){
        $(cityContainer).slideDown();
    }, index * 2000 );
}); 
```

将内容添加到 DOM 后，您可以对[每个](http://api.jquery.com/each/)项目进行迭代。然后为每个项目设置超时（**以 ms**为单位）。超时后将显示该项目。您也可以使用`show()`或其他任何东西来代替`slideDown()`显示内容:)。

# javascript - 如何通过更改屏幕尺寸来更改 iframe src

> ID：15180750
> 
> 赞同：0
> 
> 时间：2013-03-02T23:42:40.053
> 
> 标签：javascript

我正在尝试根据屏幕尺寸修改链接-使用嵌入在 iframe 中的单独视频供稿用于许多预定的屏幕尺寸，因此我无法使用 CSS 媒体查询。

例如

```
<iframe src="desktopVideoFeed.html" width="300" height="300">
</iframe> 
```

修改为

```
<iframe src="mobileVideoFeed.html" width="200" height="200">
<iframe> 
```

ETC ..

我对 JavaScript 不太熟悉，但我认为它是完成这项工作的最佳工具。这是我希望实现的代码：

```
window.resize(function(){
    if(screen.width <= 480){
        document.getElementByTagName('iframe').src = 'mobileVideoFeed.html';
    }else if (screen.width <= 780){
        document.getElementByTagName('iframe').src = 'tabletVideoFeed.html';
    }else if(screen.width <= 960){
        document.getElementByTagName('iframe').src = 'desktopVideoFeed.html';
    }
}) 
```

我是否以错误的方式处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:41:35.947

也许更安全的方法是完全避免使用 iframe（对我来说，它们之前在 iOS 设备上已经多次烦人）并使用 CSS 而不是 Javascript 以不同方式呈现页面。

```
<style>
/* Main CSS here, optimized for desktop. */

@media only screen and (max-width: 780px), only screen and (max-device-width: 780px)
{
/* Optimizations for tablet screen sizes */
}

@media only screen and (max-width: 480px), only screen and (max-device-width: 480px)
{
/* Optimizations for phone screen sizes */
}
</style> 
```

这可能需要改变对 HTML 页面布局的思考方式，但最终可能会让事情变得更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T23:48:32.833

`navigator.userAgent`您可以使用属性（可以包含“iPad”、“iPhone”等，以便检查它是否包含这些关键字，而不是检测屏幕宽度。

示例：我的是`Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.97 Safari/537.22`.

另一个例子：iPhone 测试：

```
if (/iPhone/i.test(navigator.userAgent)) ... 
```

方便的网站：[http ://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)

# sed - 使用 sed 从输出中删除一些带点的数字

> ID：15180751
> 
> 赞同：0
> 
> 时间：2013-03-02T23:42:46.127
> 
> 标签：sed

我有这个输出：

```
1024x768       75.0     70.1     60.0 
```

我怎样才能让它只打印

```
1024x768 
```

?

顺便说一句，任何人都可以为 Sed 提供一些文件吗？我需要学习如何使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T23:47:42.070

## 删除以空格开头的所有内容

使用 POSIX 字符类通过 sed 去除空格之后的所有内容。例如：

```
$ echo '1024x768       75.0     70.1     60.0' | sed 's/[[:space:]]\+.*//'
1024x768 
```

## 改用 awk

虽然您可以使用 sed，但由于 awk 的原生字段拆分，这个问题在 awk 中解决起来要好得多。例如：

```
$ echo '1024x768       75.0     70.1     60.0' | awk '{print $1}'
1024x768 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T23:49:18.707

您可以使用

```
sed 's/\s.*$//' 
```

“查找第一个空格后的所有内容并替换为空”

正如评论中指出的那样，`\s`速记不适用于所有版本的`sed`，并且 $ 符号是多余的；你可以使用`sed 's/[\t ].*//`更普遍适用。“查找第一个制表符或空格之后的所有内容，然后将其删除”。

当然，我猜测您要删除的字符串的“一般情况”...您的问题似乎暗示您想删除所有带有点的数字，这将是一个不同的表达式，如下所示：

```
sed 's/[0-9]+\.[0-9]+//g' 
```

“替换以数字 0 到 9 的任意组合开头的测试块，然后是一个点，然后是另一组至少一个数字，没有任何内容”

有关良好的 sed 文档，请参阅[http://www.grymoire.com/Unix/Sed.html](http://www.grymoire.com/Unix/Sed.html)

`awk`在这种情况下可能是更好的工具（见codegnome的回答）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T23:54:00.420

当我需要从文本中提取字符串时，`grep`首先出现：

```
grep -o '^[^ ]*' 
```

使用您的数据：

```
kent$  echo "1024x768       75.0     70.1     60.0"|grep -o '^[^ ]*'
1024x768 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T00:55:24.170

这可能对您有用（GNU sed）：

```
sed -r 's/\s*([0-9]+)?\.[0-9]+\s*//g;/./!d' file 
```

这将删除任何十进制数字和周围的空白。如果行中没有任何内容，它也会删除空行。

[在这里](http://sed.sourceforge.net/)查看丰富的 sed 材料。

# php - 用于 PHP 开发的 NetBeans VS PhpStorm

> ID：15180753
> 
> 赞同：26
> 
> 时间：2013-03-02T23:42:52.830
> 
> 标签：php, netbeans, phpstorm

我正在使用 NetBeans 进行 PHP 开发，最近我注意到，当我同时在 10-15 个项目中工作/导航时，它的速度比我希望的要慢一些。NetBeans 会占用大量内存。

我开始寻找替代品。一位朋友建议使用 PhpStorm。它很贵。但基于 PhpStorm 描述，它具有所有 NetBeans 功能并且运行速度更快。

这是真的吗？购买 PhpStorm 是否值得？

**更新：**

要进行完整测试，需要 100% 加载它，这很耗时。我希望有人从 NetBeans 迁移到 PhpStoms 并能真正分辨出其中的区别。更多的是关于性能。不是用户界面。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-02T23:51:51.647

好吧，取决于许多因素。我将 Netbeans 和 Notepad++ 用于较小的项目，我对两者都很满意。确实，Netbeans 速度较慢，但​​我发现 PHPStorm 太贵了，无法比 Netbeans 获得一个很小的优势。您可以尝试 PHP Storm 的[演示版](http://www.jetbrains.com/phpstorm/documentation/index.html)或阅读此[功能比较](https://www.sitepoint.com/how-i-chose-my-programming-editor/)。

# count - 需要帮助对数据库中的表进行排序以获取最多浏览量

> ID：15180756
> 
> 赞同：0
> 
> 时间：2013-03-02T23:43:36.523
> 
> 标签：count, group-by, sql-order-by, distinct

我试图弄清楚如何列出查看次数最多的帖子，特别是前 5 名。

```
viewid | postid | ip      | dateline

  1    |  16    | 1.1.1.1 | 987654
  2    |  12    | 1.1.1.1 | 987655
  3    |  15    | 2.2.2.2 | 987656
  4    |  16    | 2.2.2.2 | 987657
  5    |  16    | 3.3.3.3 | 987658
  6    |  18    | 1.1.1.1 | 987659
  7    |  16    | 1.1.1.1 | 987660
  8    |  12    | 4.4.4.4 | 987661 
```

我想打印以下内容：

```
Post ID - 16 (3 views)
Post ID - 12 (2 views)
Post ID - 15 (1 view)
Post ID - 18 (1 view) 
```

因此，即使有 4 行帖子 ID 为 16，它也会忽略 1，因为该 IP 地址已经看到它。然后按大多数视图排序，然后按时间戳排序。

这是我目前正在尝试的（不工作）：

```
$query_ranks_views = mysql_query("SELECT postid, COUNT(DISTINCT ip) AS num FROM views WHERE postid > '0' GROUP BY postid ORDER BY COUNT('DISTINCT ip') DESC LIMIT 5");
while($ranks_views = mysql_fetch_array($query_ranks_views)){
    echo("
        $ranks_views[postid] (". $ranks_views['COUNT(DISTINCT ip)'] .")
    ");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T23:53:21.520

该查询确实有效：[http](http://sqlfiddle.com/#!2/95ee5/1) ://sqlfiddle.com/#!2/95ee5/1 不正确的是您想按时间戳排序。哪个时间戳？帖子的时间戳还是视图的最后一个时间戳？或者也许是视图的平均时间戳？

# vim - 如何将行号限制到特定区域

> ID：15180759
> 
> 赞同：0
> 
> 时间：2013-03-02T23:44:10.827
> 
> 标签：vim

我知道在 vim 中有`set nu`用于在所有行上设置行号。但是我想知道是否有办法`~/.vimrc`设置显示当前行的行号，以及`x`之前的`x`行和之后的行。举个例子：

```
 blah
  blah
  blah
4 blah
5 blah
6 blah <- current line
7 blah
8 blah
  blah
  blah
  blah 
```

如果有必要让它工作，我也不介意插件安装。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T23:57:06.677

但为什么？！这对于内置的东西是不可能的，但是[RltvNmbr.vim 插件使用](http://www.vim.org/scripts/script.php?script_id=2351)*符号*功能实现了相对编号。您可能可以修改插件以实现您想要的。但是又一次……为什么？！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:36:29.787

如果你想要相对的行号，你也可以在没有插件的情况下做到这一点：

设置 rnu

# c++ - 为什么这个正则表达式不会编译？

> ID：15180762
> 
> 赞同：5
> 
> 时间：2013-03-02T23:45:02.383
> 
> 标签：c++, regex

我想从这里使用正则表达式：

[https://www.rfc-editor.org/rfc/rfc3986#appendix-B](https://www.rfc-editor.org/rfc/rfc3986#appendix-B)

我正在尝试像这样编译它：

```
#include <regex.h>
...
regex_t regexp;
if((regcomp(&regexp, "^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?", REG_EXTENDED)) != 0){
    return SOME_ERROR:
} 
```

但我被 regcomp 的返回值困住了：

```
REG_BADRPT 
```

据[人说](http://linux.die.net/man/3/regcomp)，这意味着：

重复运算符的使用无效，例如用作`*`第一个字符。

[这个人](http://www.mkssoftware.com/docs/man3/regcomp.3.asp)的类似含义：

`?`,`*`或`+`前面没有有效的正则表达式

我使用自己的正则表达式编写了解析器，但我也想测试这个，因为它正式在 rfc 中。我不打算用它来验证。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T00:56:38.200

正如 Oli Charlesworth 建议的那样，您需要`\\`为问号转义反斜杠`\?`。有关详细信息，请参阅 C++[转义序列](http://en.cppreference.com/w/cpp/language/escape)。

**测试程序**

```
#include <regex.h>
#include <iostream>

void test_regcomp(char *rx){
 regex_t regexp;
 if((regcomp(&regexp, rx, REG_EXTENDED)) != 0){
    std::cout << "ERROR :" << rx <<"\n";
 }
 else{
   std::cout <<  "   OK :"<< rx <<"\n";
 }
}

int main()
{

  char *rx1 = "^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?" ;
  char *rx2 = "^(([^:/\?#]+):)\?(//([^/\?#]*))\?([^\?#]*)(\\\?([^#]*))\?(#(.*))\?" ;

   test_regcomp(rx1);
   test_regcomp(rx2);

   return 0;
} 
```

**输出**

```
ERROR :^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(?([^#]*))?(#(.*))?
   OK :^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))? 
```

* * *

正`\?`则表达式中的 是 REG_BADRPT 错误的来源。它被转换为`?`. 如果您将其替换为`\\?`，regcomp 将能够编译您的正则表达式。

```
"^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"

   OK :^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))? 
```

# python - 基于字典元素值的子集列表

> ID：15180767
> 
> 赞同：1
> 
> 时间：2013-03-02T23:45:36.857
> 
> 标签：python, list, subset

我有一个由字典组成的列表。我希望对列表进行子集化，根据元素值的比较来选择字典（在这种情况下，每个日期只选择一个字典，选择的字典是具有最大值的字典`realtime_start`）。

一个示例列表是：

```
obs = [{'date': '2012-10-01',
  'realtime_end': '2013-02-18',
  'realtime_start': '2012-11-15',
  'value': '231.751'},
 {'date': '2012-10-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2012-12-19',
  'value': '231.623'},
 {'date': '2012-11-01',
  'realtime_end': '2013-02-18',
  'realtime_start': '2012-12-14',
  'value': '231.025'},
 {'date': '2012-11-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2013-01-19',
  'value': '231.071'},
 {'date': '2012-12-01',
  'realtime_end': '2013-02-18',
  'realtime_start': '2013-01-16',
  'value': '230.979'},
 {'date': '2012-12-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2013-02-19',
  'value': '231.137'},
 {'date': '2012-12-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2013-03-19',
  'value': '231.197'},
 {'date': '2013-01-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2013-02-21',
  'value': '231.198'},
 {'date': '2013-01-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2013-03-21',
  'value': '231.222'}] 
```

我希望对列表进行子集化，使其每个日期只包含一个字典，并选择具有最大值的字典`realtime_start`。

在这种情况下，在列表被子集化后，它将是：

```
sub = [ {'date': '2012-10-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2012-12-19',
  'value': '231.623'},
 {'date': '2012-11-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2013-01-19',
  'value': '231.071'},
 {'date': '2012-12-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2013-03-19',
  'value': '231.197'},
 {'date': '2013-01-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2013-03-21',
  'value': '231.222'}] 
```

此外，假设我指定了一个最大日期：

```
maxDate = "2013-02-21" 
```

我将如何进行子集化以使该`realtime_start`值*不*大于 maxDate？在这种情况下，我期望以下子集：

```
sub2 = [ {'date': '2012-10-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2012-12-19',
  'value': '231.623'},
 {'date': '2012-11-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2013-01-19',
  'value': '231.071'},
 {'date': '2012-12-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2013-02-19',
  'value': '231.137'},
 {'date': '2013-01-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2013-02-21',
  'value': '231.198'} ] 
```

我将如何在 Python 2.7.3 中编写这样的子集操作？这在 Python 中可能吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T23:51:58.403

你可以使用`itertools.groupby`：

```
>>> import itertools
>>> # sort so that the same dates are contiguous
>>> obs.sort(key=lambda x: x['date'])
>>> grouped = itertools.groupby(obs, lambda x: x['date'])
>>> m = [max(g, key=lambda x: x['realtime_start']) for k, g in grouped]
>>> 
>>> import pprint
>>> pprint.pprint(m)
[{'date': '2012-10-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2012-12-19',
  'value': '231.623'},
 {'date': '2012-11-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2013-01-19',
  'value': '231.071'},
 {'date': '2012-12-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2013-03-19',
  'value': '231.197'},
 {'date': '2013-01-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2013-03-21',
  'value': '231.222'}] 
```

您也可以添加其他条件：

```
>>> grouped = itertools.groupby(obs, lambda x: x['date'])
>>> m = [max((w for w in g if w['realtime_start'] <= maxDate),
         key=lambda x: x['realtime_start']) for k, g in grouped]
>>> pprint.pprint(m)
[{'date': '2012-10-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2012-12-19',
  'value': '231.623'},
 {'date': '2012-11-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2013-01-19',
  'value': '231.071'},
 {'date': '2012-12-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2013-02-19',
  'value': '231.137'},
 {'date': '2013-01-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2013-02-21',
  'value': '231.198'}] 
```

但我建议查看我最喜欢的 Python 数据操作库[pandas](http://pandas.pydata.org/)：它非常适合用于表格和时间序列数据，并且使用它进行数据操作会比你自己滚动的任何东西更容易（并且在功能上更类似于 R） .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T02:16:05.850

您基本上希望按`date`字段对条目进行分组，然后对与每个`date`s 关联的条目组执行操作。我做这种事情的方式是使用普通的 ol' `dict`。在这种情况下，我认为 a`dict`是一种特殊的`set`——一个“装饰集”，如果你愿意的话——它的每个（必要的可散列的）元素都被一些（通常是不可散列的）有效载荷“装饰”（即关联的字典值）。`date`在您的示例中，此“装饰集”的每个元素都是中所有 dicts 中该字段的可能值之一`obs`，并且其关联的有效负载是以该`obs`键作为其`date`字段的所有 dicts 的列表。

因此，

```
In [4]: dobs = dict()
In [5]: for o in obs:
   ...:     d = o['date']
   ...:     if d not in dobs:
   ...:         dobs[d] = []
   ...:     dobs[d].append(o)
   ...: 
```

可以使用更简洁地[`dict.setdefault`](http://docs.python.org/2/library/stdtypes.html#dict.setdefault)编写`for`-loop 的主体，如下所示：

```
In [7]: for o in obs:
   ...:     dobs.setdefault(o['date'], []).append(o)
   ...: 
```

或者可以用空列表预加载字典，然后只附加到它们而不需要检查键是否已经在字典中：

```
In [9]: dobs = dict([(d, []) for d in set([e['date'] for e in obs])])
In [10]: for o in obs:
   ....:     dobs[o['date']].append(o)
   ....: 
```

在上述任何一项之后，您最终将得到一个字典，`dobs`其键是`date`'，其值是其中具有相应键作为值的所有字典的*列表*。`obs``date`

现在你可以带着这个 dict 去城里，对它的值应用任何类型的函数。例如，要为每个 提取`date`具有最新的 dict `realtime_start`，您可以这样做：

```
In [11]: rts = lambda x: x['realtime_start']
In [12]: [sorted(e, key=rts)[-1] for e in dobs.values() if e]
Out[12]: 
[{'date': '2013-01-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2013-03-21',
  'value': '231.222'},
 {'date': '2012-12-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2013-03-19',
  'value': '231.197'},
 {'date': '2012-10-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2012-12-19',
  'value': '231.623'},
 {'date': '2012-11-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2013-01-19',
  'value': '231.071'}] 
```

（`if e`上面理解末尾的限定符在这里不是必需的，但我以“防御性编程”的名义包含它。没有它，如果其中的任何值`dobs`恰好为空，上面的代码将失败。我们知道情况并非如此`dobs`，但在更一般的环境中可能会成为一个问题。下面有更多关于这个的信息。）

`realtime_start`您还询问如何在设置上限时执行上述选择`2013-02-21`。对于这个问题，我发现将问题拆分为两个子问题在概念上更清晰：首先，生成`dobs`满足指定约束的子问题`realtime_start`；然后，对受限字典执行与之前相同的操作。因此：

```
In [13]: dobs2 = dict([(k, [d for d in v if d['realtime_start'] <= maxDate])
   ....:               for k, v in dobs.items()])
In [14]: [sorted(e, key=rts)[-1] for e in dobs2.values() if e]
Out[14]: 
[{'date': '2013-01-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2013-02-21',
  'value': '231.198'},
 {'date': '2012-12-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2013-02-19',
  'value': '231.137'},
 {'date': '2012-10-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2012-12-19',
  'value': '231.623'},
 {'date': '2012-11-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2013-01-19',
  'value': '231.071'}] 
```

再一次，`if e`在这种情况下，预选赛不是必需的，但如果`maxDate`足够低以至于某些组最终是空的，那么它将是必不可少的。（没有它，访问第一个遇到的空列表的最后一个元素的尝试会引发`IndexError`异常。）

您可能已经注意到，上述结果的顺序与您的不同。这是因为内置的 Python`dict`不保留排序。如果原始`obs`列表的顺序很重要，那么您可以将所有调用替换为`dict`调用`collections.OrderedDict`。例如：

```
In [15]: from collections import OrderedDict
In [16]: dobs = OrderedDict()
In [17]: for o in obs:
   ....:     dobs.setdefault(o['date'], []).append(o)
   ....: 
In [18]: [sorted(e, key=rts)[-1] for e in dobs.values()]
Out[18]: 
[{'date': '2012-10-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2012-12-19',
  'value': '231.623'},
 {'date': '2012-11-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2013-01-19',
  'value': '231.071'},
 {'date': '2012-12-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2013-03-19',
  'value': '231.197'},
 {'date': '2013-01-01',
  'realtime_end': '9999-12-31',
  'realtime_start': '2013-03-21',
  'value': '231.222'}] 
```

# c# - SMTP 客户端在本地主机上发送消息失败，在远程主机上成功

> ID：15180772
> 
> 赞同：2
> 
> 时间：2013-03-02T23:46:51.043
> 
> 标签：c#, smtp, windows-server-2008-r2

我有一个小型 tcp 服务器，除其他外，它用于通过 SMTP 服务器发送邮件。

问题是，当我在我的开发机器上运行它时它可以正常工作（到 smtp 服务器的远程连接），但是当我在与 SMTP 服务器（Windows Server 2008 R2）相同的机器上运行应用程序时，我得到以下异常：

> System.Net.Mail.SmtpException：发送邮件失败。---> System.IO.IOException：无法从传输连接读取数据：net_io_connectionclosed。

SMTP 服务器配置为仅允许来自 127.0.0.1 和 tcp 应用程序绑定的 IP 地址以及我的开发机器的中继。它还配置为仅允许来自同一 IP 列表的连接。

发送邮件的 C# 位如下：

```
var mail = new MailMessage();
mail.To.Add(recipient);
mail.From = new MailAddress("me@mydomain.com");
mail.Subject = "subject";
mail.Body = "message";
var smtpClient = new SmtpClient(MailServerAddress, Constants.MAIL_SERVER_PORT);         
smtpClient.Send(mail); 
```

`MailServerAddress`在应用程序首次运行时定义。
我尝试将其设置为 127.0.0.1 和 SMTP 服务器配置的 IP 地址，但我仍然遇到相同的异常。

检查服务器日志显示没有连接迹象，这符合上述异常。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T00:41:17.350

只是一个黑暗的答案，但试试这个，因为我在大约 3 年前遇到了类似的问题，但不记得修复了，但是当我看的时候，这行代码对我来说很突出

```
_client.DeliveryMethod = SmtpDeliveryMethod.PickupDirectoryFromIis; 
```

所以也许可以尝试（假设您使用 IIS 进行 SMTP）：

```
var smtpClient = new SmtpClient(MailServerAddress, Constants.MAIL_SERVER_PORT); 
smtpClient.DeliveryMethod = SmtpDeliveryMethod.PickupDirectoryFromIis;        
smtpClient.Send(mail); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T23:55:30.837

[从这里](http://forums.asp.net/t/924682.aspx)复制的答案：

```
Unable to read data from the transport connection: net_io_connectionclosed

What this error means is that System.net.mail was unable to find the smtp server.

The answer will vary depending on whether you have a fixed IP or a dynamic IP but,
basically, you need to assign a valid IP to your smtp server.

With fixed IP's this is relatively straightforward.
With dynamic IP's it takes a bit of tweaking.

Open the IIS Manager and check the properties for the smtp server.

In the Default SMTP Virtual Server's properties, in the "Access" tab,
in the Connection Control and Relay dialogs, make sure that your local IP is assigned.
( In my case, it's 10.0.0.2... )

You may also need to modify your hosts file, to point 127.0.0.1 to your machine name.
( \WINDOWS\system32\drivers\etc\hosts )

Then, in your code, assign your machine name to the smtp client :

SmtpClient client = New SmtpClient("yourmachinename")
client.Send(mail) 
```

另一件事是您的防火墙可能会阻止您的测试。如果可以，请断开 Internet 连接并禁用防火墙，而不会造成安全风险。看看它是否有效。如果是这样，您将需要更深入地查看防火墙设置。如果不是，那么它确实可能是您的 IP 地址，如上所述。

# java - 获取随机列作为字符串列表

> ID：15180775
> 
> 赞同：0
> 
> 时间：2013-03-02T23:47:08.320
> 
> 标签：java, string, list

使用下面的代码，我试图获取由逗号分隔的列的值，`columnsList String`其中工作得很好-

```
final String columnsList = getColumns(service.getColumns());

private String getColumns(final List<String> columns) {
    List<String> copy = new ArrayList<String>(columns);
    Collections.shuffle(copy);

    int rNumber = random.nextInt(columns.size()) + 1;

    List<String> subList = copy.subList(0, rNumber);
    Collections.sort(subList, new Comparator<String>() {

        @Override
        public int compare(String o1, String o2) {
            return columns.indexOf(o1) < columns.indexOf(o2) ? -1 : 1;
        }
    });
    return StringUtils.join(subList, ",");
} 
```

现在我需要以这种方式更改上述`getColumns`方法，而不是返回`various columns`delimited by`comma`作为 String 它应该将我返回各种列作为`List<String>`. 所以我想到的一种方法是使用`Arrays.asList`-

`final List<String> columnsList = Arrays.asList(getColumns(service.getColumns()).trim().split(","));`

但我正在寻找其他方式，通过它我应该能够修改`getColumns`方法，以便它总是返回`columns as a List of String`而不是按照我目前使用`Arrays.asList`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T23:54:19.790

这不是像返回子列表那样简单还是我错过了什么

```
private List<String> getColumns(final List<String> columns) {
    List<String> copy = new ArrayList<String>(columns);
    Collections.shuffle(copy);

    int rNumber = random.nextInt(columns.size()) + 1;

    List<String> subList = copy.subList(0, rNumber);
    Collections.sort(subList, new Comparator<String>() {

        @Override
        public int compare(String o1, String o2) {
            return columns.indexOf(o1) < columns.indexOf(o2) ? -1 : 1;
        }
    });
    return subList;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T00:01:13.787

您应该能够通过替换`return StringUtils.join(subList, ",");`为`return subList;`

# mysql - ON DUPLICATE 多次更新

> ID：15180776
> 
> 赞同：1
> 
> 时间：2013-03-02T23:47:37.163
> 
> 标签：mysql, sql, duplicates

我正在尝试创建一个将同时添加/更新多行的查询，并且我正在尝试通过更新除私钥之外的所有值来确保它正确处理重复键，在我的情况下将是`a.id`

```
INSERT INTO products a (a.id, a.price, a.condition, a.link, a.price_updated) 
VALUES ('t1', 11, 'used', 'adasd', 100), ('t2', 11, 'used', 'adasd', 100) 
ON DUPLICATE KEY UPDATE VALUES (a.price, a.condition, a.link, a.price_updated) 
```

上面的查询在 附近给了我一个正确的语法错误`a (a.id`，我可能做错了什么？

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T23:53:51.497

我想这就是你要找的：

```
INSERT INTO products (id, price, cond, link, price_updated) 
VALUES ('t1', 11, 'used', 'adasd', 100), 
   ('t1', 11, 'used', 'adasd', 2100) 
ON DUPLICATE KEY UPDATE 
   price = VALUES(price), 
   cond = VALUES(cond), 
   link = VALUES(link), 
   price_updated = VALUES(price_updated) 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/9da82/1)

我认为您也不能为此使用表别名，但我可能弄错了。

顺便说一句 - 我使用 cond 作为条件字段只是为了使它更容易 - 替换为您的字段名称（您可能需要带有条件的反引号，因为我相信它是一个保留字）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T23:53:10.977

你得到一个语法错误，因为 Mysql 的[INSERT](http://dev.mysql.com/doc/refman/5.1/en/insert.html)语句不允许你给插入的表起别名：你必须说`INSERT INTO products (id, ...)`.

# c# - 在列表框中选择相同的索引

> ID：15180787
> 
> 赞同：0
> 
> 时间：2013-03-02T23:49:39.387
> 
> 标签：c#, asp.net, selectedindexchanged

我在 asp.net 中创建一个网站，我有 2 个列表框：

```
lbxPlayer1 and lbxPlayer2

lbxPlayer1.Items.Add("bob");
lbxPlayer1.Items.Add("jack");
lbxPlayer1.Items.Add("sam");

lbxPlayer2.Items.Add("fred");
lbxPlayer2.Items.Add("brian");
lbxPlayer2.Items.Add("dave"); 
```

它们都填充了相同数量的值，我希望这样当单击其中一个列表时，另一个列表将选择相同的索引。

我该怎么做呢？我假设代码将在 lbxPlayer1_SelectedIndexChanged 事件中？

所以当我点击“jack”时，我希望“Brian”也被选中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T23:52:19.170

使用[`SelectedIndex`](http://msdn.microsoft.com/EN-US/library/system.web.ui.webcontrols.listcontrol.selectedindex.aspx)属性：

```
int index = lbxPlayer1.SelectedIndex;
if(lbxPlayer2.Items.Count > index)
   lbxPlayer2.SelectedIndex = index; 
```

如果`SelectionMode`是`Multiple`：

```
for (int i = 0; i < lbxPlayer2.Items.Count; i++)
{ 
    if(i >= lbxPlayer1.Items.Count)
        lbxPlayer2.Items[i].Selected = false;
    else
        lbxPlayer2.Items[i].Selected = lbxPlayer1.Items[i].Selected;
} 
```

* * *

**更新**

> 好吧，它试过了，没有任何反应也试过这个，也没有任何反应`lbxPlayer2.SelectedIndex = lbxPlayer1.SelectedIndex;`。dayabinding 正在页面加载事件中完成（我无法更改），我>相信它始终是 o

仅对它们进行数据绑定，`if(!IsPostBack)`因为`ViewState`将在回发中保留项目。所以我假设这个事件永远不会被触发，因为你重新绑定了`ListBoxes`回发。

# sql - 查询优化 - 在 JOIN 上使用条件而不是 WHERE 子句

> ID：15180789
> 
> 赞同：1
> 
> 时间：2013-03-02T23:49:50.087
> 
> 标签：sql, sql-server-2008-r2, query-optimization

在 SP 内部，我需要找出`Code`与第二个帐户的任何客户匹配的第一个帐户的一些客户的 ID。我写了以下有效的查询 -

```
 SELECT DISTINCT cil.Id FROM ClientIdList AS cil
    INNER JOIN Client AS c1
    ON cil.Id = c1.Id
    INNER JOIN Client AS c2
    ON c1.Code = c2.Code
    WHERE c2.AccountId = 2
    ORDER BY cil.Id 
```

这`ClientIdList`是一个单列表类型的变量，它保存了第一个帐户中选定客户的 ID（在此之前我需要将此变量用于其他要求）。`WHERE`如果我将条件放在子句中，我可以获得相同的正确输出`JOIN`，如下所示 -

```
 SELECT DISTINCT cil.Id FROM ClientIdList AS cil
    INNER JOIN Client AS c1
    ON cil.Id = c1.Id
    INNER JOIN Client AS c2
    ON c1.Code = c2.Code AND c2.AccountId = 2
    ORDER BY cil.Id 
```

考虑到每个帐户有 2000 个帐户和 10000 个客户（即`Client`表中的 2000 x 10000 行），哪一个是合适的选择？

可以进一步优化查询以提高性能吗？

**编辑：**实际上条件是SP 的`c2.AccountId = @accountId`参数`@accountId`

**编辑 2：**据我所知，使用 WHERE 子句版本，将与 Client 表的其余部分一起执行 JOIN，*然后*将根据 WHERE 条件过滤结果。但是对于更高版本的 JOIN 应该使用满足条件的较小行集来执行。我对吗？如果是这样，以后的版本不应该提供更好的性能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T00:10:58.613

不管怎样，数据库引擎最终会得到相同的执行计划，并且没有办法改进这个查询的编写（这里不讨论索引）。

至于最佳实践，我会将其`c2.AccountId = 2`放入，`WHERE`因为常量（这是有人可能会编辑以更改查询选择的内容，而联接更多与行为相关，不应受到这种修改） .

但我通常会看到这两篇文章，把它放在里面`JOIN`并不会让我感到那么震惊:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T00:16:46.077

使用新的 JOIN 语法有几个原因：

*   代码更具可读性。
*   它更好地描述了查询的意图，允许更有效/更好的优化。
*   在这些子句的语义不同的情况下，您不会遇到 OUTER JOINS 的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T01:33:14.590

两个查询都提供相同的性能。您可以优化您的查询删除第二个 JOIN

```
SELECT DISTINCT cil.Id 
FROM ClientIdList AS cil JOIN Client AS c ON cil.Id = c.Id                          
WHERE c.AccountId = 2
ORDER BY cil.Id 
```

# php - 带有 PHP 电子邮件 POST 的 HTML5 表单

> ID：15180792
> 
> 赞同：0
> 
> 时间：2013-03-02T23:50:02.373
> 
> 标签：php, html

我的 HTML5 表单验证得很好，但是我想在提交时发送数据输入。我遵循了一些教程，并且一个基本教程有效，但是我现在尝试了一个更复杂的 PHP 脚本来发送电子邮件，但我没有收到任何东西？？

```
<?php
// Subject and Email Variables

$emailSubject = 'HTML5 Form Submission';
$webMaster = 'John.Doe@live.co.uk';

//Gathering Data variables

$FNameField = $_POST['FName'];
$LNameField = $_POST['LName'];
$ageField = $_POST['age'];
$emailField = $_POST['EMail'];
$URLField = $_POST['URL'];
$telField = $_POST['tel'];
$messageField = $_POST['message'];

$body = <<<EOD
<br><hr><br>
Name: $FNameField<br>
Age: $ageField <br>
Email: $emailField <br>
Website: $URLField <br>
Telephone: $telField <br>
Message: $messageField <br>
EOD;

    $headers = "From: $email\r\n";
    $headers .= "Content-type: text/html\r\n";
    $success = mail($webMaster, $emailSubject, $body, $headers);

    $theResults = <<<EOD

<html>
<head>
<title>JakesWorks - travel made easy-Homepage</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<style type="text/css">
<!--
body {
    background-color: #f1f1f1;
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 12px;
    font-style: normal;
    line-height: normal;
    font-weight: normal;
    color: #666666;
    text-decoration: none;
}
-->
</style>
</head>

<div>
  <div align="left">Thank you for your interest! Your email will be answered very soon!</div>
</div>
<div>
<a href="Forms.php">Click Here to return to the previous page</a>
</body>
</html>
EOD;

echo "$theResults";

?> 
```

编辑：它也是网络托管的，所以那里没有问题，我的服务器确实理解 PHP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T00:09:58.527

知道 gmail 接受消息，我们知道这不是服务器错误。

根据我的经验，您可以通过多种方式将其发送到真实账户，第一个是您的标题。

**为了让我的网络表单发送（并被接受）到大多数电子邮件帐户，我使用了这些标题：**

```
$headers = 'From: Example Last <noreply@example.com>' . "\r\n"; // Set from headers
$headers .= "Content-type: text/plain; charset=iso-8859-1\r\n"; 
```

注意 From 标题，它有一个大写的“名称”，后跟一个空格。在空格之后，有一封与发送它的网站相关的电子邮件。在你的情况下，我会说电子邮件应该是“ `<noreply@mattmeadows.info>`”。

现在，电子邮件会验证是否向您发送了正确的 html 电子邮件，其中包括`<html>`和`<body>`标签。由于发送纯文本更容易并且您不需要它看起来很花哨（因为它正在发送给您），您可以将标题设置为纯文本电子邮件。

然后你必须做`$body`如下：

```
$body = "Name: $FNameField
Age: $ageField
Email: $emailField
Website: $URLField
Telephone: $telField
Message: $messageField"; 
```

*总而言之，您的问题的答案是：* **实时邮件服务器正在拒绝您的 php 邮件表单。**您可以进行以下更改，它应该能够邮寄所有电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T00:06:33.747

确保您已定义

```
ini_set("SMTP","smtp.example.com" ); 
ini_set('sendmail_from', 'user@example.com'); 
```

或者只是在ini文件中进行。

请不要忘记中断标记中的输入和反斜杠。

# java - 碰撞检测机器人（与小行星！！）

> ID：15180797
> 
> 赞同：2
> 
> 时间：2013-03-02T23:51:04.600
> 
> 标签：java, android, collision-detection, bounding-box

我目前正在创建一个 android java 游戏。一种登月类游戏。我希望实现某种障碍，并选择将随机放置在屏幕上的小行星。

但是，我很难理解如何为这些进行碰撞检测。我将使用小行星的图像，因此可以轻松地为每个图像使用矩形边界框，但由于小行星是圆形的（或者至少我的将是圆形的！），当移动到矩形的角上时可以检测到碰撞，这在视觉上不是小行星的一部分。

我猜我需要使用某种边界圆，但不确定如何使用图像进行设置？

我想，如果所有小行星的大小都相同，我可以硬编码圆形/多边形边界框的一些点，然后将它们转换为图像的位置 - 所以实际上，多边形是小行星的形状？

任何有关执行此操作的最佳方法的建议都会很棒。此外，如果有人可以编写一些高级碰撞检测伪代码，那将不胜感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T02:40:52.477

如果着陆器矩形是轴对齐的（其边缘与坐标轴平行），则很容易检查与圆的碰撞。给定一个具有半径`r`和中心的圆和一个具有原点、宽度和高度`(cx, cy)`的矩形；如果满足以下条件之一，它们就会发生碰撞：`(x, y)``w``h`

*   `(x < cx < x+w)`和`(y-r < cy < y+h+r)`
*   `(y < cy < y+h)`和`(x-r < cx < x+w+r)`
*   矩形任意角与 之间的距离`(cx, cy)`小于`r`。

正如我在评论中所说，圆之间的碰撞更容易，因为您只需检查中心之间的距离是否小于半径之和。

对于非轴对齐的矩形，解决方案有点复杂。给定矩形的四个顶点（A、B、C、D）；如果以下任何一项为真，则发生碰撞：

*   `(x < cx < x+w)`和`(y < cy < y+h)`
*   `intersectCircle(A, B, cx, cy, r)`
*   `intersectCircle(B, C, cx, cy, r)`
*   `intersectCircle(C, D, cx, cy, r)`
*   `intersectCircle(D, A, cx, cy, r)`

该函数的伪代码`intersectCircle`是这样的：

```
intersectCircle(P1, P2, a, b, r):
    x1, y1 = P1
    x2, y1 = P2
    p = abs((x1-x2)*(a-x1)+(y2-y1)*(b-y1))
    q = sqrt((x1-x2)^2 + (y1-y2)^2)
    return r > p/q 
```

这个函数是基于[这个数学答案](https://math.stackexchange.com/questions/2837/how-to-tell-if-a-line-segment-intersects-with-a-circle#2839)的公式，这是迄今为止我发现的最简单的一个。

# maven - Jenkins 中带有 Maven Release 插件的 Clearcase 它应该如何工作？

> ID：15180804
> 
> 赞同：1
> 
> 时间：2013-03-02T23:51:51.837
> 
> 标签：maven, jenkins, clearcase, nexus, maven-release-plugin

我不确定 Maven 发布插件如何与 clearcase 一起使用。清除这个 maven 应该如何在 clearcase 中工作。

Jenkins是在分支test_5.0.0上构建的，在jenkins里面有个job叫test_5.0.0 这个job是指向分支test_5.0.0 pom文件版本是5.0.0-SNAPSHOT

maven 中的发布插件如何与 clearcase 一起使用，它会成为基线吗？（我读过它创建标签？）

发布后新的 pom 版本为 5.0.1-SNAPSHOT 时。在这种情况下，作业名称错误，分支名称也错误。因此，对于每个版本，都必须创建一个新分支和新工作。

我在 git 世界中有这个设置，现在尝试使用 jenkins、maven 和 nexus 设置 clearcase。一切都在构建和工作中​​，但我无法使用 CM 在 clearcase 中设置的当前分支策略找到良好的发布流程。你有什么建议？你如何使用 maven release 和 clearcase？

编辑：当与 UCM 一起使用 clearcase 时，我们使用 ANT 和 IVY。我们没有使用任何“快照”，基本上所有内容都是 Maven 术语中的发布版本。这消除了对所谓发布的需求，我们对每个构建进行了基线化，并将最新构建提升为发布。

我也找到[了这个链接](http://www.gungus.se/blog/?p=212)，但这是否适用于 UCM 并且它似乎是标签而不是基线？

/谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T01:04:48.690

从我在“ [Apache Maven SCM 实施页面](http://maven.apache.org/scm/clearcase.html)”中可以看出，maven 版本仅适用于 UCM 快照视图，不适用于基本 ClearCase。

所以[maven-release-plugin](http://maven.apache.org/maven-release/maven-release-plugin/)会创建一个 UCM 基线，而不是一个简单的标签。
例如，该创建发生在[`mvn release:branch`](http://maven.apache.org/maven-release/maven-release-plugin/examples/branch.html).

ClearCase 与 git 非常不同（请参阅“[每个开发人员都应该知道的 ClearCase 基本概念是什么？](https://stackoverflow.com/a/645771/6309) ”）

由于您将仅使用 UCM，因此您需要考虑该方法促进的分支/**[流](https://stackoverflow.com/a/5636931/6309)**层次结构（UCM：统一变更管理）

请参阅“ [ClearCase 中的集成流与集成视图](https://stackoverflow.com/a/9880266/6309)”和“ [Unix 上 ClearCase 的简单部署](https://stackoverflow.com/a/12938346/6309)”。

# hardware - 实现后如何调试？我在模拟中完美运行的代码在硬件中显示出奇怪的行为

> ID：15180808
> 
> 赞同：0
> 
> 时间：2013-03-02T23:52:19.377
> 
> 标签：hardware, verilog, fpga, hdl

我的反应测试仪代码运行良好，在模拟中也应该如此。但是当我将它移到我的 FPGA 设备上时，它会在我按下开始按钮后立即停止，我无法弄清楚出了什么问题，因为它在模拟中完美运行。

这个概念是，当按下重置时`Hi`屏幕上显示，当`start`按下时，从中选择一个随机值`LFSR`并计数到最大值，从而使其成为随机延迟。当达到此 reg 的最大计数时，打开 LED，启动计时器并等待`stop`按下按钮。

这是在模拟中工作的代码的屏幕截图：

![在此处输入图像描述](../Images/1828208fd3e91c3ac8af5a0814e2e241.png)

这`0000`是正常的，因为ticker开始递增，当它达到所需的值时，它会递增计时器`0001`，所以如果我向前滚动足够多，它就会显示正确的操作。

这是注释代码，我添加了，`(* KEEP = "TRUE" *)reg [1:0] sel;`因为在优化过程中，`sel`信号被删除，因为它被声明但从未被调用，但显然我需要它。

```
 reg [12:0] random, random_next, random_done; //**13 bit for simulation purposes

reg [4:0] count_r, count_next_r; //to keep track of the shifts. 5 bit register to count up to 30

wire feedback = random[12] ^ random[3] ^ random[2] ^ random[0]; //**for simulation

always @ (posedge clock or posedge reset)
begin
    if (reset)
    begin
        random <= 13'hF; //**An LFSR cannot have an all 0 state, thus reset to FF
        count_r <= 0;
    end

    else
    begin
        random <= random_next;
        count_r <= count_next_r;
    end
end

always @ (*)
begin
    random_next = random; //default state stays the same
    count_next_r = count_r;

        random_next = {random[11:0], feedback}; //**shift left the xor'd every posedge clock
        count_next_r = count_r + 1;

    if (count_r == 13) //**for implementation its 30, simulation its 13
    begin
        count_next_r = 0;
        random_done = random; //assign the random number to output after 13 shifts
    end

end
//random number block ends

reg outled;

reg [3:0] reg_d0, reg_d1, reg_d2, reg_d3; //registers that will hold the individual counts
(* KEEP = "TRUE" *)reg [1:0] sel;
localparam [1:0]
                        idle = 2'b00,
                        starting = 2'b01,
                        time_it = 2'b10,
                        done = 2'b11;

reg [1:0] state_reg, state_next;
reg [12:0] count_reg, count_next; //**change for simulation, 30 bits for implementation, 13 bits for simulation

always @ (posedge clock or posedge reset)
begin
    if(reset)
        begin 
            state_reg <= idle;
            count_reg <= 0;
        end
    else
        begin
            state_reg <= state_next;
            count_reg <= count_next;
        end
end

reg go_start;
always @ (*)
begin
    state_next = state_reg; //default state stays the same
    count_next = count_reg;

    case(state_reg)
        idle:
            begin
                //DISPLAY HI HERE
                sel = 2'b00;
                if(start)
                begin
                    count_next = random_done; //get the random number from LFSR module
                    state_next = starting;
                end
            end
        starting:
            begin
                if(count_next == 8191) // **750M equals a delay of 15 seconds.
                begin                           //and starting from 'rand' ensures a random delay
                    outled = 1'b1; //turn on the led 
                    state_next = time_it; //go to next state
                end

                else
                    count_next = count_reg + 1; 
            end     
        time_it:
            begin
                    sel = 2'b01; //start the timer
                    state_next = done;                  
            end

        done:
            begin
                if(stop)
                    begin
                        sel = 2'b10; //stop the timer
                        outled = 1'b0;
                    end
            end

        endcase

    case(sel)
        2'b00: //hi
        begin
            go_start = 0; //make sure timer module is off
            regd0 = 4'd12; 
            regd1 = 4'd11;
            regd2 = 4'd10;
            regd3 = 4'd12;
        end

        2'b01: //timer
        begin

            go_start = 1'b1; //enable start signal to start timer
            regd0 = reg_d0;
            regd1 = reg_d1;
            regd2 = reg_d2;
            regd3 = reg_d3;
        end

        2'b10: //stop timer
        begin
            go_start = 1'b0;
        end

        default:
        begin
            regd0 = 4'bx;
            regd1 = 4'bx;
            regd2 = 4'bx;
            regd3 = 4'bx;
        end
    endcase         
end

//the stopwatch block

reg [15:0] ticker; //**16 bits needed to count up to 50K bits, 10 bit for simulation
wire click;

//the mod 50K clock to generate a tick ever 0.001 second

always @ (posedge clock or posedge reset)
begin
    if(reset)

        ticker <= 0;

    else if(ticker == 50000) //**if it reaches the desired max value of 50K reset it, 500 for simulation
        ticker <= 0;
    else if(go_start) //only start if the input is set high
        ticker <= ticker + 1;
end

assign click = ((ticker == 50000)?1'b1:1'b0); //**click to be assigned high every 0.001 second

always @ (posedge clock or posedge reset)
begin
    if (reset)
        begin
            reg_d0 <= 0;
            reg_d1 <= 0;
            reg_d2 <= 0;
            reg_d3 <= 0;
        end

    else if (click) //increment at every click
        begin
            if(reg_d0 == 9) //xxx9 - the 0.001 second digit
            begin  //if_1
                reg_d0 <= 0;

                if (reg_d1 == 9) //xx99 
                begin  // if_2
                    reg_d1 <= 0;
                    if (reg_d2 == 5) //x599 - the two digit seconds digits
                    begin //if_3
                        reg_d2 <= 0;
                        if(reg_d3 == 9) //9599 - The minute digit
                            reg_d3 <= 0;
                        else
                            reg_d3 <= reg_d3 + 1;
                    end
                    else //else_3
                        reg_d2 <= reg_d2 + 1;
                end

                else //else_2
                    reg_d1 <= reg_d1 + 1;
            end 

            else //else_1
                reg_d0 <= reg_d0 + 1;
        end
end 
```

这是`regd0-regd3`取值的显示电路。

```
 localparam N = 18; //18 for implementation, 8 for simulation

reg [N-1:0]count;

always @ (posedge clock or posedge reset)
    begin
        if (reset)
            count <= 0;
        else
            count <= count + 1;
    end

reg [3:0]sseg;
reg [3:0]an_temp;
reg reg_dp;
always @ (*)
    begin
        case(count[N-1:N-2]) //MSB and MSB-1 for multiplexing

            2'b00 : 
                begin
                    sseg = first;
                    an_temp = 4'b1110;
                    reg_dp = 1'b1;
                end

            2'b01:
                begin
                    sseg = second;
                    an_temp = 4'b1101;
                    reg_dp = 1'b0;
                end

            2'b10:
                begin
                    sseg = third;
                    an_temp = 4'b1011;
                    reg_dp = 1'b1;
                end

            2'b11:
                begin
                    sseg = fourth;
                    an_temp = 4'b0111;
                    reg_dp = 1'b0;
                end
        endcase
    end
assign an_m = an_temp;

reg [6:0] sseg_temp;    
always @ (*)
    begin
        case(sseg)
            4'd0 : sseg_temp = 7'b1000000; //display 0
            4'd1 : sseg_temp = 7'b1111001; //display 1
            4'd2 : sseg_temp = 7'b0100100;// display 2
            4'd3 : sseg_temp = 7'b0110000;
            4'd4 : sseg_temp = 7'b0011001;
            4'd5 : sseg_temp = 7'b0010010;
            4'd6 : sseg_temp = 7'b0000010;
            4'd7 : sseg_temp = 7'b1111000;
            4'd8 : sseg_temp = 7'b0000000;
            4'd9 : sseg_temp = 7'b0010000;
            4'd10 : sseg_temp = 7'b0001001; //to display H
            4'd11 : sseg_temp = 7'b1001111; //to display I
            default : sseg_temp = 7'b0111111; //dash
        endcase
    end
assign {g_m, f_m, e_m, d_m, c_m, b_m, a_m} = sseg_temp; 
assign dp_m = reg_dp;

endmodule 
```

当我在重置时将它移到我的 FPGA 设备上时，“Hi”会按原样显示，但是当我按下`start`显示屏时，它只会显示`0000`并保持不变。LED也不会打开，这意味着`start`按下按钮后时间从未初始化。几天来我一直试图解决这个问题，但似乎无法弄清楚为什么会发生这种情况。当某些东西在模拟中有效但在硬件中不能正常工作时，人们会怎么做？

**更新带有固定锁存器的代码：**

```
 //Block for LFSR random number generator        
reg [12:0] random, random_next, random_done; //**13 bit for simulation purposes
//reg [29:0] random, random_next, random_done; //30 bit register to keep track upto 15 seconds
reg [4:0] count_r, count_next_r; //to keep track of the shifts. 5 bit register to count up to 30

//wire feedback = random[29] ^ random[5] ^ random[3] ^ random[0]; 
wire feedback = random[12] ^ random[3] ^ random[2] ^ random[0]; //**for simulation

always @ (posedge clock or posedge reset)
begin
    if (reset)
    begin
        random <= 13'hF; //**An LFSR cannot have an all 0 state, thus reset to FF
        count_r <= 0;
    end

    else
    begin
        random <= random_next;
        count_r <= count_next_r;
    end
end

always @ (*)
begin
    random_next = random; //default state stays the same
    count_next_r = count_r;

        random_next = {random[11:0], feedback}; //**shift left the xor'd every posedge clock
        //count_next_r = count_r + 1;

    if (count_r == 13) //**for implementation its 30, simulation its 13
    begin
        count_next_r = 0;
        random_done = random; //assign the random number to output after 13 shifts
    end
    else
    begin
        count_next_r = count_r + 1;
        random_done = 13'b0;
    end

end
//random number block ends

reg outled;

reg [3:0] reg_d0, reg_d1, reg_d2, reg_d3; //registers that will hold the individual counts
/*(* KEEP = "TRUE" *)*/reg [1:0] sel, sel_next;
localparam [1:0]
                        idle = 2'b00,
                        starting = 2'b01,
                        time_it = 2'b10,
                        done = 2'b11;

reg [1:0] state_reg, state_next;
reg [12:0] count_reg, count_next; //**change for simulation, 30 bits for implementation, 13 bits for simulation

always @ (posedge clock or posedge reset)
begin
    if(reset)
        begin 
            state_reg <= idle;
            count_reg <= 0;
            sel <=0;
        end
    else
        begin
            state_reg <= state_next;
            count_reg <= count_next;
            sel <= sel_next;
        end
end

reg go_start;
always @ (*)
begin
    state_next = state_reg; //default state stays the same
    count_next = count_reg;
    sel_next = sel;
    case(state_reg)
        idle:
            begin
                //DISPLAY HI HERE
                //sel_next = 2'b00;
                if(start)
                begin
                    count_next = random_done; //get the random number from LFSR module
                    state_next = starting;
                end
            end
        starting:
            begin
                if(count_next == 8191) // **750M equals a delay of 15 seconds.
                begin                           //and starting from 'rand' ensures a random delay
                    outled = 1'b1; //turn on the led 
                    state_next = time_it; //go to next state
                end

                else
                begin
                    count_next = count_reg + 1; 
                    outled = 1'b0;
                end
            end     
        time_it:
            begin
                    sel_next = 2'b01; //start the timer
                    state_next = done;                  
            end

        done:
            begin
                if(stop)
                    begin
                        sel_next = 2'b10; //stop the timer
                        outled = 1'b0;
                    end
            end

        endcase

    case(sel_next)
        2'b00: //hi
        begin
            go_start = 0; //make sure timer module is off
            regd0 = 4'd12; 
            regd1 = 4'd11;
            regd2 = 4'd10;
            regd3 = 4'd12;
        end

        2'b01: //timer
        begin

            go_start = 1'b1; //enable start signal to start timer
            regd0 = reg_d0;
            regd1 = reg_d1;
            regd2 = reg_d2;
            regd3 = reg_d3;
        end

        2'b10: //stop timer
        begin
            go_start = 1'b0;
            regd0 = reg_d0;
            regd1 = reg_d1;
            regd2 = reg_d2;
            regd3 = reg_d3;
        end

        2'b11:
        begin
            regd0 = 4'd12;
            regd1 = 4'd12;
            regd2 = 4'd12;
            regd3 = 4'd12;
            go_start = 1'b0;
        end

        default:
        begin
            regd0 = 4'd12;
            regd1 = 4'd12;
            regd2 = 4'd12;
            regd3 = 4'd12;
            go_start = 1'b0;
        end
    endcase         
end

//the stopwatch block

reg [15:0] ticker; //**16 bits needed to count up to 50K bits, 10 bit for simulation
wire click;

//the mod 50K clock to generate a tick ever 0.001 second

always @ (posedge clock or posedge reset)
begin
    if(reset)

        ticker <= 0;

    else if(ticker == 50000) //**if it reaches the desired max value of 50K reset it, 500 for simulation
        ticker <= 0;
    else if(go_start) //only start if the input is set high
        ticker <= ticker + 1;
end

assign click = ((ticker == 50000)?1'b1:1'b0); //**click to be assigned high every 0.001 second

always @ (posedge clock or posedge reset)
begin
    if (reset)
        begin
            reg_d0 <= 0;
            reg_d1 <= 0;
            reg_d2 <= 0;
            reg_d3 <= 0;
        end

    else if (click) //increment at every click
        begin
            if(reg_d0 == 9) //xxx9 - the 0.001 second digit
            begin  //if_1
                reg_d0 <= 0;

                if (reg_d1 == 9) //xx99 
                begin  // if_2
                    reg_d1 <= 0;
                    if (reg_d2 == 5) //x599 - the two digit seconds digits
                    begin //if_3
                        reg_d2 <= 0;
                        if(reg_d3 == 9) //9599 - The minute digit
                            reg_d3 <= 0;
                        else
                            reg_d3 <= reg_d3 + 1;
                    end
                    else //else_3
                        reg_d2 <= reg_d2 + 1;
                end

                else //else_2
                    reg_d1 <= reg_d1 + 1;
            end 

            else //else_1
                reg_d0 <= reg_d0 + 1;
        end
end
assign led = outled;
endmodule 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T03:11:34.643

您是否清理过您的综合日志以查看警告或错误之类的内容？我要做的第一件事就是弄清楚那个`sel`信号是怎么回事。如果综合认为它没有被使用，那么它有很大的问题，你不应该用任何特殊的 KEEP 指令覆盖它。

一方面，我注意到您已经推断出一个闩锁，`sel`因为您没有在每个州都分配它。推断锁存器对仿真没有问题，但您的 FPGA 可能不喜欢它。

可能想阅读：[为什么推断的锁存器不好？](https://electronics.stackexchange.com/questions/38645/why-are-inferred-latches-bad)

您还有很多其他推断的锁存器：`outled`、`regd0-3`、`random_done`、`go_start`，也许还有其他。在尝试调试 FPGA 上的任何东西之前，您应该尝试清理所有这些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T14:50:30.243

当模拟良好而合成代码不起作用时，现实生活与模拟之间就会存在差异。我总是希望发现差异存在于我的模拟中，因为它比现实生活更容易修复:)

一些例子：

*   仿真假设逻辑延迟无关紧要。如果你有很好的时间限制，那是真的。如果关键路径没有被时序约束覆盖，那么它就不再正确。至少您需要对时钟进行最大频率限制。

*   其他时序问题可能来自外部设备 - 您需要告诉 FPGA 工具它们的设置、保持和输出延迟，以便可以根据 FPGA 逻辑的能力检查它们

*   如果您从数据表中创建了自己的外部零件模型，它们很可能至少在一些小细节上是不正确的

*   启动行为可能不同 - 如果您已初始化（*不*使用复位）任何信号，请检查综合日志以确保它们被传送到 FPGA 比特流，否则您可能会丢失一些东西。

*   数字信号实际上是模拟的，尤其是当它们在芯片外时。默认情况下，FPGA 输出通常设置为快速设置，因此数字看起来不错。如果您随后在没有良好返回路径的情况下将它们沿随机线驱动，则信号将变成“非常模拟”！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-12T12:51:59.500

在 FPGA 上运行时，为了调试问题，您可以尝试的其他方法是使用逻辑分析仪查看您的硬件在做什么，以及与您的仿真相比如何。

Xilinx 提供了一个名为[Chipscope的工具](http://www.xilinx.com/tools/cspro.htm)

Altera 提供[Signaltap](http://www.altera.com/literature/hb/qts/qts_qii53009.pdf)

在您解决所有模拟器/路由器警告并且仍然存在问题**后**，这些是可以使用的好工具。

# linq - 如何读取 EF 5 中的 NotMapped 属性？

> ID：15180810
> 
> 赞同：1
> 
> 时间：2013-03-02T23:52:37.050
> 
> 标签：linq, webforms, entity-framework-5, asp.net-4.5

我不知道如何访问标记为 NotMapped 的属性，以便我可以打印它。当我尝试访问它时，我得到

> LINQ to Entities 不支持指定的类型成员“LinkAddress”。仅支持初始化程序、实体成员和实体导航属性。

我的 LINQ 查询是：

```
(from n in db.Navigation
                                  join s in db.Sections on n.SectionID equals s.SectionID
                                  join sl in db.Locale_Sections on s.SectionID equals sl.SectionID
                                  where n.Category == "Books" && sl.CultureID == 1
                                  select new
                                  {
                                      s.LinkAddress,
                                      sl.Title,
                                  }).ToList(); 
```

我对 Section 的上下文是：

```
 [Table("Section")]
public class Section
{
    [Key, Required, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Int16 SectionID { get; set; }

    public Int64 LogoFileID { get; set; }

    [ForeignKey("LogoFileID")]
    public virtual File File { get; set; }

    [Required, MaxLength(15), Column(TypeName = "varchar")]
    public string RouteName { get; set; }

    [Required, MaxLength(15), Column(TypeName = "varchar")]
    public string Type { get; set; }

    public virtual ICollection<Locale_Section> Translations { get; set; }

    [NotMapped]
    public string LinkAddress
    {
        get
        {
            return Type + "/" + RouteName;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T01:25:47.090

由于它未映射，因此不能在查询中使用...您必须先实现对象，然后才能访问该属性...

```
var materialised = (from n in db.Navigation
     join s in db.Sections on n.SectionID equals s.SectionID
     join sl in db.Locale_Sections on s.SectionID equals sl.SectionID
     where n.Category == "Books" && sl.CultureID == 1
     select new
     {
          s,
          sl.Title,
     }).ToList()

// This bit is done in CLR
return materialised.Select(m => new 
{
    m.s.LinkAddress,
    m.Title
}); 
```

或者，您可以将您的逻辑带入有效的查询中......

```
(from n in db.Navigation
 join s in db.Sections on n.SectionID equals s.SectionID
 join sl in db.Locale_Sections on s.SectionID equals sl.SectionID
 where n.Category == "Books" && sl.CultureID == 1
 select new
 {
     LinkAddress = s.Type + "/" + s.RouteName,
     sl.Title,
 }).ToList() 
```

# jquery - 他们是编写这个 jQuery 脚本的更好更有效的方法吗？

> ID：15180811
> 
> 赞同：-1
> 
> 时间：2013-03-02T23:52:40.180
> 
> 标签：jquery

我觉得我的脚本真的是多余的，可能会写得更好。如果有人能给我一些关于如何更好地实现这一点的提示或想法，我将不胜感激。基本上是一个非常简单的幻灯片。

```
 $('.projectview .designinfo').hide();
 $('.projectview .buildinfo').hide();
 $('.projectview .launchinfo').hide();
 $('.projectview .growinfo').hide();

 $('.thumbs ul li.plan').bind('click',
   function() {
       $('.projectview .designinfo, .projectview .buildinfo, .projectview .launchinfo, .projectview .growinfo').fadeOut();
       $('.projectview .planinfo').fadeIn();
   });
 $('.thumbs ul li.design').bind('click',
   function() {
       $('.projectview .planinfo, .projectview .buildinfo, .projectview .launchinfo, .projectview .growinfo').fadeOut();
       $('.projectview .designinfo').fadeIn();
   });
 $('.thumbs ul li.build').bind('click',
   function() {
       $('.projectview .planinfo, .projectview .designinfo, .projectview .launchinfo, .projectview .growinfo').fadeOut();
       $('.projectview .buildinfo').fadeIn();
   });
 $('.thumbs ul li.launch').bind('click',
   function() {
       $('.projectview .planinfo, .projectview .designinfo, .projectview .buildinfo, .projectview .growinfo').fadeOut();
       $('.projectview .launchinfo').fadeIn();
   });
 $('.thumbs ul li.grow').bind('click',
   function() {
       $('.projectview .planinfo, .projectview .designinfo, .projectview .buildinfo, .projectview .launchinfo').fadeOut();
       $('.projectview .growinfo').fadeIn();
   }); 
```

这是html

```
<section class="thumbs">
        <ul>
          <li class="plan">
            <img src="images/new/plan.jpg" alt="plan" class="serviceicon">
          </li>
          <li class="design">
            <img src="images/new/design.jpg" alt="design" class="serviceicon">
          </li>
          <li class="build">
            <img src="images/new/build.jpg" alt="build" class="serviceicon">
          </li>
          <li class="launch">
            <img src="images/new/launch.jpg" alt="launch" class="serviceicon">
          </li>
          <li class="grow">
            <img src="images/new/grow.jpg" alt="grow" class="serviceicon">
          </li>
        </ul>
      </section>
      <section class="projectview">
        <section class="planinfo"><img src="images/new/planinfo.jpg" alt="blog" class="planinfo"></section>
        <section class="designinfo"><img src="images/new/designinfo.jpg" alt="blog" class="designinfo"></section>
        <section class="buildinfo"><img src="images/new/buildinfo.jpg" alt="blog" class="buildinfo"></section>
        <section class="launchinfo"><img src="images/new/launchinfo.jpg" alt="blog" class="launchinfo"></section>
        <section class="growinfo"><img src="images/new/growinfo.jpg" alt="blog" class="growinfo"></section>
      </section> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T00:04:12.663

就在这里。

```
$('.projectview').children().hide();
$('.projectview').children(".planinfo").show();

$('.thumbs ul li').click(function(){
    var thumb = $(this).attr('class');
    var partner = $('.' + thumb + 'info');
    $('.projectview').children().fadeOut();
    partner.fadeIn();
}); 
```

我还没有测试过这个，但它应该可以工作......

***更新了褪色的标签***

```
$(document).ready(function() {

    $('.thumbs ul li').css('opacity', '.5');
    $('.thumbs ul li:first-child').addClass('current');

    $('.projectview').children().hide();
    $('.projectview').children(".planinfo").show();

    $('.thumbs ul li').click(function(){

        // Show info
        var thumb = $(this).attr('class');
        var partner = $('.' + thumb + 'info');
        $('.projectview').children().fadeOut();
        partner.fadeIn();

        // Tab opacity
        $(".current").removeClass("current");
        $(this).addClass("current");

    });

}); 
```

**CSS**

```
.thumbs ul li {
    float: left;
    text-decoration: none;
    width: 70px;
    height: 75px;
    margin: 0 5%;
    cursor: pointer;
    opacity:.5;
}
    .thumbs ul li.current {
        opacity:1 !important;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T00:08:30.703

```
//hide all the choices
$('.projectview').children().hide();

$('.thumbs ul li').on('click', function(){
    $('.projectview').children().hide();
    $('.projectview').find('[class^='+this.className+']').show();
}); 
```

[可视化它](http://jsfiddle.net/UagYT/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T00:14:28.450

另一个解决方案：

```
<section class="thumbs">
  <ul>
    <li class="plan" data-alias="plan">
      <img src="images/new/plan.jpg" alt="plan" class="serviceicon">
    </li>
    <li class="design" data-alias="design">
      <img src="images/new/design.jpg" alt="design" class="serviceicon">
    </li>
    <li class="build" data-alias="build">
      <img src="images/new/build.jpg" alt="build" class="serviceicon">
    </li>
    <li class="launch" data-alias="launch">
      <img src="images/new/launch.jpg" alt="launch" class="serviceicon">
    </li>
    <li class="grow" data-alias="grow">
      <img src="images/new/grow.jpg" alt="grow" class="serviceicon">
    </li>
  </ul>
</section>

<section class="projectview">
  <section class="planinfo" data-ref="plan"><img src="images/new/planinfo.jpg" alt="blog" class="planinfo"></section>
  <section class="designinfo" data-ref="design"><img src="images/new/designinfo.jpg" alt="blog" class="designinfo"></section>
  <section class="buildinfo" data-ref="build"><img src="images/new/buildinfo.jpg" alt="blog" class="buildinfo"></section>
  <section class="launchinfo" data-ref="launch"><img src="images/new/launchinfo.jpg" alt="blog" class="launchinfo"></section>
  <section class="growinfo" data-ref="grow"><img src="images/new/growinfo.jpg" alt="blog" class="growinfo"></section>
</section>

<script>
var $infos = $('> section', '.projectview');
$infos.hide();

$('li', '.thumbs').on('click', function() {
   var selector = '[data-ref="'+$(this).data('alias')+'"]';
   $infos.not(selector).fadeOut();
   $infos.filter(selector).fadeIn();
});
</script> 
```

# ruby-on-rails - 总结 created_at 和 updated_at 之间的差异（Rails ActiveRecord - 寻找更好的方法）

> ID：15180812
> 
> 赞同：0
> 
> 时间：2013-03-02T23:52:48.527
> 
> 标签：ruby-on-rails, ruby, activerecord

TL;博士：

所以我想我这样做：

```
@user.resources.each do |r|
  #Something like this...
  r.views.sum(:created_at, :group=>:resource_id) - r.views.sum(:updated_at, :group=>:resource_id)
end 
```

现在，我知道我可以让它像这样工作：

```
r = Resource.first
time_sum_difference = r.views.sum {|v| v.updated_at.to_i - v.created_at.to_i} 
```

但我宁愿让 ActiveRecord 为我计算它

编辑：废话，显然不能总结时间戳，需要就地计算差异

有一个更好的方法吗？我在正确的轨道上吗？（我将试验和更新这篇文章，直到我弄明白为止）

细节：

我有一个视图模型，它是资源和用户之间的连接表。

它具有标准时间戳：created_at 和 updated_at

我想获取用户提交的资源所花费的时间总和。

在我的资源模型中：

```
has_many :views, :class_name => 'UserResourceView' 
```

然后对于视图：

```
class UserResourceView < ActiveRecord::Base
  attr_accessible :resource_id, :user_id
  belongs_to :resource
  belongs_to :user
end 
```

和用户：

```
class User < ActiveRecord::Base
  has_many :resources
  has_many :resource_views, :class_name => 'UserResourceView'
  has_many :viewed_resources, :through => :resource_views, :source => :resource
...
end 
```

更新：

```
u.resources.joins(:views).group('resources.id').select('sum(views.created_at) as s_ca, sum(views.updated_at) as s_ua, s_ca - s_ua as diff').first

  Resource Load (0.7ms)  SELECT sum(views.created_at) as s_ca, sum(views.updated_at) as s_ua, s_ca - s_ua as diff FROM "resources" INNER JOIN "user_resource_views" ON "user_resource_views"."resource_id" = "resources"."id" WHERE "resources"."user_id" = 1 GROUP BY resources.id LIMIT 1
ActiveRecord::StatementInvalid: PG::Error: ERROR:  missing FROM-clause entry for table "views"

LINE 1: SELECT  sum(views.created_at) as s_ca, sum(views.updated_at)...
                    ^
: SELECT  sum(views.created_at) as s_ca, sum(views.updated_at) as s_ua, s_ca - s_ua as diff FROM "resources" INNER JOIN "user_resource_views" ON "user_resource_views"."resource_id" = "resources"."id" WHERE "resources"."user_id" = 1 GROUP BY resources.id LIMIT 1 
```

更新 2：

```
u.resources.joins(:user_resource_views).group('resources.id').select('sum(user_resource_views.created_at) as s_ca, sum(user_resource_views.updated_at) as s_ua, s_ca - s_ua as diff')
ActiveRecord::ConfigurationError: Association named 'user_resource_views' was not found; perhaps you misspelled it? 
```

更新 3（更多信息）：

从我的 schema.rb 文件：

```
create_table "user_resource_views", :force => true do |t|
    t.integer  "resource_id"
    t.integer  "user_id"
    t.datetime "created_at",  :null => false
    t.datetime "updated_at",  :null => false
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:13:13.447

这应该可以工作并最小化查询

```
@user.resources.joins(:views)
.group('resources.id')
.select('sum(views.created_at) as s_ca, sum(views.updated_at) as s_ua, s_ca - s_ua as diff') 
```

我不确定您是否可以对查询进行减号，但仍然没有，这是一种更好的方法

# javascript - 检测浏览器是否支持特定功能？

> ID：15180818
> 
> 赞同：2
> 
> 时间：2013-03-02T23:53:40.630
> 
> 标签：javascript, jquery, html

无法检测到浏览器，我想将此显示为警告（这是来自[http://mozilla.github.com/webrtc-landing/](http://mozilla.github.com/webrtc-landing/)的诗句）

```
 <h3 id="gum" style="color: red; display: none;">
    mozGetUserMedia is missing, do you have the latest
    <a href="http://nightly.mozilla.org/">Nightly</a> and set
    <i>media.navigator.enabled</i> to true?
    </h3>
<script>
 if (!navigator.webkitGetUserMedia || !navigator.mozGetUserMedia) {
    document.getElementById("gum").style.display = "block";}
</script> 
```

这在[如何在客户端使用 JavaScript 检查 webRTC 数据通道兼容性？](https://stackoverflow.com/questions/14774386/how-can-i-check-webrtc-datachannel-compatibility-using-javascript-in-client-side)但不支持 navigator.webkit 和 moz ，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T00:06:12.613

```
if( !( navigator.getUserMedia || navigator.webkitGetUserMedia ||
    navigator.mozGetUserMedia || navigator.msGetUserMedia ) ) {
    // getUserMedia is not supported
} 
```

改编自[Capturing Audio & Video in HTML5](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)。

或者

```
navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia ||
        navigator.mozGetUserMedia || navigator.msGetUserMedia;

if ( !navigator.getUserMedia ) {
    // getUserMedia is not supported
} 
```

重新评论：

```
var browser = BrowserDetect.browser,
    version = parseInt( BrowserDetect.version, 10 );

if ( !( browser == 'Chrome' && version > 25 ||
     browser == "Firefox" && version > 18 ) ) {
     // do stuff
} 
```

特征检测优于浏览器嗅探。

# android - Android：无法使用 xmlwise 在 res/raw 中找到 plist

> ID：15180821
> 
> 赞同：0
> 
> 时间：2013-03-02T23:54:03.460
> 
> 标签：android, xml-parsing, plist

我正在尝试使用 xml 明智地将 plist 读入我的 android 应用程序。这是我的代码

```
String path = "android.resource://" + context.getPackageName() + "/" + R.raw.nameofplist;
Map<String, Object> males = Plist.load(path); 
```

但我不断得到：

```
java.io.FileNotFoundException: /android.resource:/com.packagename.appname/2130968577 (No such file or directory) 
```

`nameofplist.plist`在我的文件夹中获取我的 plist 路径的正确方法是什么`res/raw`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-07T07:00:36.293

我也很难找到答案……但我最终解决了。

这是我基于位于res/raw 文件夹中的名为**airports.plist的 plist 文件的解决方案。**

```
Map<String, Object> properties = null;
try {
    InputStream inputStream =getResources().openRawResource(R.raw.airports);
    BufferedReader br = null;
    try {
        br = new BufferedReader(new InputStreamReader(inputStream));
        StringBuilder sb = new StringBuilder();
        String line;
        while ((line = br.readLine()) != null) {
            sb.append(line);
        }
        properties = Plist.fromXml(sb.toString());

        //TODO do something with the object here
        System.out.println("plist object... "+properties);

    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        br.close();
    }
} catch (Exception ex) {
    ex.printStackTrace();
} 
```

希望这对某人有帮助！

# html - 高级 CSS 挑战：使用 CSS 仅在最后一行文本下划线

> ID：15180827
> 
> 赞同：15
> 
> 时间：2013-03-02T23:54:56.283
> 
> 标签：html, css

我想强调多行文本的最后一行，或者至少创建它的典故。仔细查看以下示例，因为我正在尝试做一些棘手的事情。

**A.**这就是我想要发生的事情（`__`文本应该加下划线的标记）：

```
A line of text that is long enough so that it wraps
to another line.
________________ 
```

**B.**这是我不想要的：

```
A line of text that is long enough so that it wraps
___________________________________________________
to another line.
________________ 
```

**C.**或者这个：

```
A line of text that is long enough so that it wraps
to another line.
___________________________________________________ 
```

此效果适用于 CMS，因此我不知道文本的精确长度。这意味着手动插入`<span>`s 或`<u>`标签不是一种选择。我也不想使用 javascript。我很清楚我想要的效果不是默认行为，这需要一些棘手的 CSS/HTML 魔法。但我觉得这可能是可能的。如果您想不出办法，请不要费心提交答案。在你弄清楚如何去做之前，一切都是不可能的。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-03T01:08:36.777

这是@albert 正在做的事情的一个变体。它使用了`p:after{}`技巧，但使用了不同的`display`. `<p>`似乎必须`position:relative;`工作。

```
<style>
p{position:relative; display:inline}
p:after{position:absolute; left:0; bottom:0; width:100%; height:1px; border-bottom:1px solid #000; content:""}
</style>
<p>first line of test text which is long enough to stretch onto a second line .</p> 
```

[http://jsfiddle.net/VHdyf/](http://jsfiddle.net/VHdyf/)

这种方法的一个很酷的地方是它仍然使用，在大多数情况下`border-bottom`我更喜欢使用它。`underline`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-03T00:43:02.877

可以使用css生成的内容来实现效果。我在 jsfiddle 上设置了一个示例，但本质上您将边框添加到`p:after{}`；在这个例子中，边界一直延伸，这似乎是不可取的，但这只是因为父容器对于演示来说是香草的。我认为它应该适合您的情况。给你：http: [//jsfiddle.net/jalbertbowdenii/bJ9D4/](http://jsfiddle.net/jalbertbowdenii/bJ9D4/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-01-15T13:50:28.937

```
.title {
  width: 700px;
  overflow: hidden;
}

.title:after {
  content: '';
  display: inline-block;
  vertical-align: bottom;
  height: 1px;
  box-shadow: -100vw 100vw 0 100vw;
}
```

```
<h1 class="title">
  Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. 
</h1>
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-03T10:59:35.963

*免责声明：这可能是不可能的，但请考虑这个答案是大声思考/建议一个开始寻找的地方，而不是工作代码。*

是否有可能突出显示文本行（使用与背景颜色匹配的颜色），然后调整行高以使下部线条的背景与下划线重叠？

图片说一千个字，所以看看这些：

前：
![在此处输入图像描述](../Images/b1a23c0a27cbc77f63e2ade5d932ac29.png)

后：
![在此处输入图像描述](../Images/f3a3fe89dbf4a93a7da5a10be37ba401.png)

从这些模型中，您可以看到有一些警告并且与所要求的不完全匹配，但也许这是一个起点..？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-03T00:13:07.900

根据这个：

[选择 <p> 元素的最后一行](https://stackoverflow.com/questions/9227564/selecting-the-last-line-of-a-p-element)

除非您使用一些 JavaScript，否则这是不可能的..

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-01-19T19:55:34.230

如果这是文本“一行足够长的文本，可以换行”。并且你想强调“它换行到另一行”。您只需要使用选择器即可。

对于 HTML：

```
<div>
     A line of text that is long enough so that 
     <last>it wraps to another line.<last>
<div> 
```

对于 CSS：

```
div last{
    text-decoration: underline;
} 
```

# java - SQLException - JDBC 驱动程序和 Tomcat

> ID：15180829
> 
> 赞同：1
> 
> 时间：2013-03-02T23:55:28.983
> 
> 标签：java, mysql, rest, servlets

我正在尝试学习 Android 和 Servlet 编程，但无法连接到本地 mySQL 数据库。我有一个简单的 Android 客户端，它向托管在 localhost 上的 servlet 发出 HTTPpost 请求。该请求似乎工作正常，但 servlet 无法找到数据库的驱动程序。我很确定mysql url是正确的，所以我猜它的驱动程序就是问题所在！

这是应该连接到数据库的实用程序类：

```
public class Database {

private static Connection connection = null;

/**
 * 
 * @return
 */
public static Connection getConnection(){
    if(connection!=null){
        return connection;
    } else {
        try {
            Properties db_properties = new Properties();
            InputStream inStream = Database.class.getClassLoader().getResourceAsStream("/db.properties");
            db_properties.load(inStream);
            String dbDriver = db_properties.getProperty("dbDriver");
            String url = db_properties.getProperty("url");
            String dbUser = db_properties.getProperty("dbUser");
            String dbPass = db_properties.getProperty("dbPassword");
            connection = DriverManager.getConnection(url,dbUser,dbPass);
            Class.forName(dbDriver);
        } catch (IOException e) {
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
    return connection;
} 
```

}

这是以下数据库属性文件：

```
driver=com.mysql.jdbc.Driver
url=jdbc:mysql://localhost:8889/gymbuddy
user=Mathan
pass=PYCCmcPDAFSj7N9B 
```

这是 servlet 设置的样子：

![小服务程序设置](../Images/279feb5943c17bbda6fea7c20aee214a.png)

这是我得到的堆栈跟踪：

```
 java.sql.SQLException: No suitable driver found for jdbc:mysql://localhost:8889/gymbuddy?user=Mathan&password=PYCCmcPDAFSj7N9B
        at java.sql.DriverManager.getConnection(DriverManager.java:602)
        at java.sql.DriverManager.getConnection(DriverManager.java:207)
        at com.mathanv.gb.util.Database.getConnection(Database.java:36)
        at com.mathanv.gb.dao.BuddyDao.<init>(BuddyDao.java:35)
        at com.mathanv.gb.controller.BuddyController.<init>(BuddyController.java:29)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at java.lang.Class.newInstance0(Class.java:357)
        at java.lang.Class.newInstance(Class.java:310)
        at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:138)
        at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1137)
        at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:858)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:136)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
        at java.lang.Thread.run(Thread.java:680)
    Mar 2, 2013 11:50:53 PM org.apache.catalina.core.StandardWrapperValve invoke
    SEVERE: Servlet.service() for servlet [BuddyController] in context with path [/gbserver] threw exception
    java.lang.NullPointerException
        at com.mathanv.gb.dao.BuddyDao.registerBuddy(BuddyDao.java:44)
        at com.mathanv.gb.controller.BuddyController.doPost(BuddyController.java:51)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
        at java.lang.Thread.run(Thread.java:680)

Help!

If you need any more information, let me know! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T23:57:58.487

在尝试建立连接之前，您必须注册您的驱动程序类

```
Class.forName(dbDriver); // before
connection = DriverManager.getConnection(url,dbUser,dbPass); //after 
```

# python - 运行 spotify python 脚本时出错

> ID：15180831
> 
> 赞同：2
> 
> 时间：2013-03-02T23:55:37.160
> 
> 标签：python, macos, spotify, libspotify

嗨，我正在尝试在我的 mac [https://github.com/swinton/starrify上运行一个名为 starrify 的 Python 脚本用于 spotify](https://github.com/swinton/starrify)

运行时出现此错误

```
error "Traceback (most recent call last):
File \"/Users/hnewbs/Documents/star/starrify.py\", line 7, in <module>
from spotify import Link
ImportError: No module named spotify" number 1 
```

关于如何解决这个问题的任何想法？谢谢

[我按照这些说明http://labs.tinkerista.com/?p=9](http://labs.tinkerista.com/?p=9)重新安装 pyspotify 来修复它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:54:05.470

`pyspotify`没有正确安装（或者你没有运行你用来安装它的同一个 python 解释器）。您可以使用`pip install pyspotify`. 然后你应该能够`import spotify`在一个脚本中让它成功。您也可以先尝试运行`pyspotify` [示例脚本](https://github.com/mopidy/pyspotify/blob/develop/examples/jukebox.py)。

# c++ - cudaMallocHost 甚至无法分配最小的内存

> ID：15180832
> 
> 赞同：1
> 
> 时间：2013-03-02T23:55:37.923
> 
> 标签：c++, cuda

我是一个 CUDA 新手，所以想知道是否有人可以帮助我。

我读到固定可以严重提高您的程序性能，因此我正在努力做到这一点。我在计算能力为 1.0 的 GeForce GT 330 上运行我的代码。

当我运行我的程序时，我发现 cudaMallocHost 无法分配内存，所以我将我的问题浓缩为一个小例子，如下所示。

Mesh.hpp

```
#ifndef MESH_HPP_

#define MESH_HPP_

#include <cstddef>
#include <vector>

#include <driver_types.h>

class Mesh{
public:
  Mesh();
  ~Mesh();  
  void pin_data();

  std::vector<size_t> _a;
  size_t* _a_pinned;

private:
  void cuda_check(cudaError_t success);
};

#endif /* MESH_HPP_ */ 
```

网格.cpp

```
#include <iostream>
#include <cmath>
#include <vector>
#include <string.h>

#include <cuda.h>
#include <cuda_runtime.h>

#include "Mesh.hpp"

Mesh::Mesh(){
  for(size_t i = 0; i < 10; i++){
    _a.push_back(i);
  }
}

Mesh::~Mesh() {
  cudaFreeHost(_a_pinned);
}

void Mesh::pin_data() {
  size_t _a_bytes = sizeof(size_t) * _a.size();

  cuda_check(cudaMallocHost((void **)_a_pinned, _a_bytes));
  memcpy(_a_pinned, &_a[0], _a_bytes);
}

void Mesh::cuda_check(cudaError_t status) {
  if (status != cudaSuccess) {
    std::cout << "Error could not allocate memory result " << status << std::endl;
    exit(1);
  }
} 
```

主文件

```
#include <cstdlib>
#include <iostream>

#include "Mesh.hpp"

int main(int argc, char **argv){

  Mesh *mesh = new Mesh();
  mesh->pin_data();

  delete mesh;

  return EXIT_SUCCESS;
} 
```

当我运行我的代码时，输​​出是：

'错误无法分配内存结果 11'

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T00:38:54.407

改变这一行：

```
cuda_check(cudaMallocHost((void **)_a_pinned, _a_bytes)); 
```

对此：

```
cuda_check(cudaMallocHost((void **)&_a_pinned, _a_bytes)); 
```

（唯一的变化是添加＆符号）

cudaMalloc 操作期望修改指针值，因此[必须将指针的地址传递给 modify](https://stackoverflow.com/questions/12936986/why-does-cudamalloc-use-pointer-to-pointer/12937162#12937162)，而不是指针本身。

That fixed it for me. I'm still a little puzzled by vectors of `<size_t>` but to each his or her own.

If you want, as a suggestion, in your `Mesh:cuda_check` method, you might add a line like so:

```
 std::cout << "Error could not allocate memory result " << status << std::endl;
  std::cout << "Error is: " << cudaGetErrorString(status) << std::endl; //add this line 
```

# c# - 如何在 ASP.NET Web 应用程序中限制使用 TraceSource 完成的文本日志大小？

> ID：15180834
> 
> 赞同：1
> 
> 时间：2013-03-02T23:55:53.663
> 
> 标签：c#, asp.net, logging

我正在使用[这个示例](http://www.eidias.com/Blog/2012/10/22/configuring-simple-tracesource-for-logging-purposes)为我用 C# 编写的 ASP.NET Web 应用程序实现一个简单的文本日志记录。它工作正常，除了我不知道如何限制日志文件不受控制地增长。比如说，如果我希望日志文件在 1000 条记录之后覆盖旧记录，或者文件的大小超过 N 兆字节。我该怎么做`System.Diagnostics.TextWriterTraceListener`？

# javascript - jQuery mobile，在页面之间传递无线电检查值

> ID：15180838
> 
> 赞同：1
> 
> 时间：2013-03-02T23:56:26.630
> 
> 标签：javascript, jquery, jquery-mobile

我正在尝试在 jQuery mobile 中的两个页面之间传递值。除了收音机之外，我对任何值都没有任何问题。在下一页使用收音机时，我得到了一个未捕获的 ReferenceError。

这是我的代码的简化版本。

```
$(document).on('pageinit', '#page1', function(){

  $('#validate1').submit(function(){

    var inputVal = $('[name=inputVal]').val();
    var radioVal = $('#form1 input[type="radio"]:checked').val();
    // Also tried this
    // var radioVal = $('input[name=radioVal]:checked', '#validate1').val();

    console.log(radioVal); // Works

    $.mobile.changePage('#page2');
    return false;

  });

});

$(document).on('pageinit', '#page2', function(){

   console.log(inputVal.value); // Works
   console.log(radioVal.value); // Uncaught ReferenceError: radioVal is not defined 

}); 
```

我使用这种方法来传递数据。

[使用 jQuery Mobile 在页面之间传递数据？](https://stackoverflow.com/questions/10671092/passing-data-between-pages-with-jquery-mobile)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:06:08.677

初始化

```
 var radioVal = ""; 
```

在“pageinit”之外（可能在您的 JS 文件的顶部）

在 pageinit 中简单地说

```
radioVal = $('#form1 input[type="radio"]:checked').val(); 
```

这样，您将 radioVal 视为全局变量并使其在任何地方可用。

# javascript - 在特定文件夹中创建 Google Doc

> ID：15180842
> 
> 赞同：3
> 
> 时间：2013-03-02T23:56:55.103
> 
> 标签：javascript, google-apps-script, google-docs, google-drive-api

我正在尝试在变量 chapterOne 中保存的特定文件夹中创建一个谷歌文档。

我用谷歌搜索和搜索，我发现最接近答案的是这里的代码：

```
function Test() {
  DocsList.createFolder('Folder1').createFolder('Subfolder1').createFile('File1', 'Empty');
} 
```

但问题是它创建了一个文件，而不是谷歌文档。我正在寻找的东西会以某种方式调用 DocumentApp ......

任何帮助将不胜感激！

~诺艾尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-07-16T15:13:02.937

DocsList 现在已贬值，因此对于可能遇到此线程的任何人，这是一个更新的答案：

```
function createDoc() {
  // Creates doc in root directory
  var doc = DocumentApp.create('MyDocument');
  var docFile = DriveApp.getFileById(doc.getId());

  // Copy doc to the directory we want it to be in. Delete it from root.
  DriveApp.getFoldersByName('Subfolder1').next().addFile(docFile);
  DriveApp.getRootFolder().removeFile(docFile);

  // Returns the ID of the newly created Doc
  return DriveApp.getFilesByName('MyDocument').next().getId();
} 
```

这是我找到此答案的帖子的链接：[直接在 Google Drive 文件夹中创建 Google Doc 文件](https://stackoverflow.com/questions/31739653/create-a-google-doc-file-directly-in-a-google-drive-folder)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T00:08:01.750

您可能希望使用 DocumentApp 创建文档，然后将其移动到不同的文件夹。

```
var docName = "YOUR_DOC_NAME";
var doc = DocumentApp.create(docName); //this creates the doc in the root folder
var file = DocsList.getFileById(doc.getId());
file.removeFromFolder(DocsList.getRootFolder());
file.addToFolder(DocsList.getFolder("path/to/folder")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-12T05:55:18.893

我无需在您的 Google Drive 根目录中创建 Google Doc，然后移至特定文件夹，而是能够直接在特定 Drive 文件夹中创建文件。但为此，我在其他地方维护了一个空的 Google 文档。

```
function createNewDocInDriveFolder(){
    var emptyDocId = "XXX-XXXXXvqadhYQiYoAno8aam2HJhRNxgO84qF9VXXXX";
    var destFolderId = "XXXXPsu8uKcmkhJ1-oiSRNzE1-XXXX_XX"; 
    var destFolder = DriveApp.getFolderById(destFolderId);
    var newDocFile = DriveApp.getFileById(emptyDocId).makeCopy("New Doc", destFolder);     
    return DocumentApp.openById(newDocFile.getId());
} 
```

# java - java二叉搜索树找到父节点

> ID：15180854
> 
> 赞同：0
> 
> 时间：2013-03-02T23:58:18.017
> 
> 标签：java, parent-child, binary-search-tree

我正在研究一种找到阳极父级的方法。我从根开始，然后沿着叶子向下走，只要它们不为空而不是子节点。

下面是我的代码，它有点乱，因为我试图测试它看看出了什么问题。

我拥有的树是

```
 10
      /    \
     2     20
      \   / \
       3 18 22
            /
           21 
```

传入的 x 是 20，所以 10 是父级，但是当我运行它时，22 会作为父级出现。while 循环似乎不起作用，是我写的方式吗？

```
public Node<E> findParent(E x)
{
Node<E> node = root;

System.out.println("node is " + node.getData() + " before the search");
System.out.println("The value of x is " + x);
System.out.println("The value of node.getRight is " + node.getRight().getData());
boolean test = !node.getRight().getData().equals(x);
System.out.println("does nodes data equal x " + test);
while(((node!=null) && (node.getLeft()!=null) && (!node.getLeft().getData().equals(x))) || 
 ((node != null) && (node.getRight()!=null) && (!node.getRight().getData().equals(x))))
{ System.out.println("why didnt it stop");
    if(x.compareTo(node.getData()) < 0)
    {
        node = node.getLeft();
    }
    else
    {
        node = node.getRight();
    }
}
 System.out.println("node is " + node.getData() + " after the search");
return node;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T00:10:21.327

我会做不同的事情：在传递当前节点和当前父节点的辅助方法中进行递归。它使一切变得更加简单：

```
public Node<E> findParent(E x) {
    return findParent(x, root, null);
}

public Node<E> findParent(E x, Node<E> node, Node<E> parent)
{
    if (node == null) {
        return null;
    } else if (!node.getData().equals(x)) {
        parent = findParent(x, node.getLeft(), node);
        if (parent == null) {
            parent = findParent(x, node.getRight(), node);
        }
    }
    return parent;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-05T23:10:27.843

```
private static void myparent(int data, Node R) 
{
    if( (R.left!=null && R.left.data == data) || (R.right!=null) &&(R.right.data == data) )
    {
        pRoot = R;
        return;
    }
    if (R.data <= data)
        myparent(data, R.right);
    else
        myparent(data, R.left);
} 
```

其中“Data”是我们需要搜索其父节点的节点的值，R 是 BST 的根节点。pRoot 是我在 BST 的其他操作中使用的全局数据结构。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-04-06T19:49:37.967

这只是伪代码。当您在一个节点时`x`，检查左右节点中的键（要找到其父节点的子节点）。如果它们匹配，那么您已经在父级。如果不是，则可以安全地朝元素的方向移动并再次执行。

请注意，我们在继续之前检查下一个级别。

```
while(node!=null){

  if(node.left==key || node.right==key) return node;

  if(key<node.data) node=node.left;

  else node=node.right;

  return null;
} 
```

# php - 获取行的直到数量已满足

> ID：15180861
> 
> 赞同：2
> 
> 时间：2013-03-02T23:59:40.317
> 
> 标签：php, mysql

我有一个 SQL 数据库，我希望在满足客户要求的数量之前获取记录。这就是我的意思。请求表

```
Product     Quantity   Price
-----------------------
Apple          10.0      5.00 
```

这是获取匹配项的 SQL 查询：

```
SELECT c.FName,
       p.ProductName,
       s.Description, 
       s.Quantity, 
       s.Price 
FROM requests r
    INNER JOIN sellers s 
        ON r.ProductID = s.ProductID
   INNER JOIN products p 
        ON p.ProductID=s.ProductID 
   INNER JOIN customers c 
        ON c.ID=s.C_ID       
WHERE r.C_ID = 3 AND r.matchType='Price'
ORDER BY s.Price ASC 
```

结果如下：

```
 FName   |   ProductName    |     Description                 |  Quantity  |   Price
    --------------------------------------------------------------------------=
 compny1          Apple                    royal apples fm appleco.      5.0          5.00
    daz            Apple                     sweet apples                6.0          5.50
company2         Apple                       Apples yum                   8.0          9.00 
```

我想通过选择行并更新数据库来显示全部请求的 10KG 数量，即输出应该是：

```
apples @5kg from compny1 = 5.00
apples @5kg from daz = 5.50
total = 10.50 
```

然后数据库应显示“Daz”数量为 1.0 KG。但是，我一直在做这件事。我试图做以下事情：

```
 while ($rows1 = mysql_fetch_assoc($queryQuantity2)){

        if($rows1['Quantity']==$quantityRequested){ //If the first row = 10KG output only this row.
echo $rows1['FName'];
echo $rows1['NameProduct'];
echo $rows1['Quantity'];
echo $rows1['Price'];
}else{
//stuck here check the next rows and see there is 6KG's .. We need 10KG Requested - 5KG from daz(row1) 
//                                                                            -Remaining amount left(i.e.5KG)
//hence, print the output specified above and UPDATE Database where quantity has been reduced by X amount.
} 
```

好的，那么问题是什么。我需要“弥补”10KG 的要求。

现在“最便宜”的方法是按我拥有的 Asc Price 对可用匹配进行排序。

不，我们可以看到第一行显示“compny1”以 5.00 英镑的价格出售 5 公斤……所以，我们需要 10 公斤，因此我们显示第 1 行。接下来，由于我们还没有满足 10 公斤的需求（仍然需要另外 5 公斤），我们看在第二行。我们看到“daz”卖 6KG。但是我们只需要再增加 5 公斤就可以满足 10 公斤的需求。因此，我希望做的是...更新表，以便将第一条记录复制到另一个表，并将第二行更新为剩余 1.0kg（6KG-5KG）。因此，向客户展示：您的 10KG 可以由

```
compny1 5KG@5.00
daz 5KG@5.50
------ 
Total £10.50 
```

所以，这是我的问题。在满足要求的数量之前，我不知道如何继续检查行。我想我需要某种“计数器”来跟踪“到目前为止”添加了多少数量，然后检查下一行还需要多少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:23:54.543

虽然可能有一个简化版本，但这应该非常接近：

```
Select FName, 
  IF(summedQty>10,Quantity-(summedQty-10),Quantity) Quantity,
  Price
From (
  Select 
    FName, 
    Quantity, 
    Price,
    @qtySum:=IF(@qtySum>10,10000,@qtySum+Quantity) summedQty
  From Results
    Join (Select @qtySum:=0) t
  Order By Price
  ) t
Where summedQty != 10000 
```

我使用 10000 作为我知道我永远不会命中的任意值——只要确保它高于任何潜在值即可。在我使用 10 的任何地方，您都需要用最大值替换。

[SQL 小提琴演示](http://sqlfiddle.com/#!2/1ff3b/1)

如果您不想这样使用任意值，这似乎也可以：

```
Select FName, 
  IF(summedQty>10,Quantity-(summedQty-10),Quantity) Quantity,
  Price
From (
  Select 
    FName, 
    Quantity, 
    Price,
    @qtySum:=@qtySum+Quantity summedQty
  From Results
    Join (Select @qtySum:=0) t
  Order By Price
  ) t
Where IF(summedQty>10,Quantity-(summedQty-10),Quantity) > 0 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/1ff3b/4)

正如我所说，我确信会有变化，但这应该会让你朝着正确的方向前进。

# visual-studio - 如何在 Visual Studio 2012 中创建课程？

> ID：15180863
> 
> 赞同：-2
> 
> 时间：2013-03-02T23:59:47.603
> 
> 标签：visual-studio, visual-c++, object

如何在 Visual Studio 2012 中创建自定义类并使用其方法？

我尝试这个，但总是得到一个致命的错误：

> LNK1120：1 个未解决的外部因素

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:18:57.917

啊，只需按类添加 className::。c++ 使用头文件和 cpp 文件上的所有方法/函数都有一个范围运算符。或者留下头文件，直接写。查看构造函数声明并执行相同操作。

# android - 更改 UI 的定时事件？

> ID：15180869
> 
> 赞同：0
> 
> 时间：2013-03-03T00:00:59.393
> 
> 标签：android, multithreading, handler, ui-thread

我环顾四周，但我不太确定这将如何工作，并且唯一与我正在寻找的内容非常接近的线程有 404 信息。

在一项活动中，我布置了四张图片。我希望他们每 15 秒更改一次不同的图像，然后我会跟踪哪个图像在那里让他们链接到另一个活动。我有线程工作并发布到`System.out.println()`，但 UI 没有改变，我不知道如何允许它。这是我到目前为止所拥有的。

```
public int curImage1 = 1;
public int curImage2 = 2;
public int curImage3 = 3;
public int curImage4 = 4; 
```

`onCreate()`方法：

```
// ...
imagesHandler = new Handler();
startImageSwapping();

Runnable swapImages = new Runnable() {

    @Override
    public void run() {
        handleUpdates();
        imagesHandler.postDelayed(swapImages, 3000);
    }
};

public void handleUpdates() {
    if (curImage1 == 1) {
        ((ImageView) findViewById(R.id.main_image_1)).setImageDrawable(
                getResources().getDrawable(R.drawable.logo));
        curImage1 = 5;
    }
    if (curImage1 == 5) {
        ((ImageView) findViewById(R.id.main_image_1)).setImageDrawable(
                getResources().getDrawable(R.drawable.main_image_1));
        curImage1 = 1;
    }
    System.out.println("TEST");
}

public void startImageSwapping() {
    imageThreadIsRunning = true;
    swapImages.run();
}

public void stopImageSwapping() {
    imagesHandler.removeCallbacks(swapImages);
    imageThreadIsRunning = false;
} 
```

* * *

应用更改后的当前代码。仍然没有这样做，但希望为遇到它的其他人更新这篇文章。

```
Runnable swapImages = new Runnable() {

    @Override
    public void run() {
        runOnUiThread(new Runnable() {

            @Override
            public void run() {
                if (curImage1 == 1) {
                    ((ImageView) findViewById(R.id.main_image_1)).setImageDrawable(
                            getResources().getDrawable(R.drawable.logo));
                    curImage1 = 5;
                }
                if (curImage1 == 5) {
                    ((ImageView) findViewById(R.id.main_image_1)).setImageDrawable(
                            getResources().getDrawable(R.drawable.main_image_1));
                    curImage1 = 1;
                }
                System.out.println("TEST");
            }
        });
        imagesHandler.postDelayed(swapImages, 3000);
    }
};

public void startImageSwapping() {
    imageThreadIsRunning = true;
    swapImages.run();
}

public void stopImageSwapping() {
    imagesHandler.removeCallbacks(swapImages);
    imageThreadIsRunning = false;
}

@Override
protected void onDestroy() {
    stopImageSwapping();
    super.onDestroy();
}

@Override
protected void onPause() {
    stopImageSwapping();
    super.onPause();
}

@Override
protected void onStop() {
    stopImageSwapping();
    super.onStop();
}

@Override
protected void onStart() {
    if (!imageThreadIsRunning)
        startImageSwapping();
    super.onStart();
}

@Override
protected void onResume() {
    if (!imageThreadIsRunning)
        startImageSwapping();
        super.onResume();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:13:50.463

如果你使用`runOnUiThread`

```
Runnable swapImages = new Runnable()
{
    @Override
    public void run()
    {
            runOnUiThread(new Runnable()
            {
                @Override
                public void run()
                {
                     handleUpdates();
                 }
            });
            imagesHandler.postDelayed(swapImages, 3000);
    }
}; 
```

* * *

**编辑：**

对不起，但你的代码让我很困惑。如果我从头开始写，我会这样做：

```
public class Whatever extends Activity implements Runnable {
    ImageView iv;
    Switcher switcher;
    Thread thread;
    Handler handler = new Handler();
    public int curImage ;
    public final int curImage1 = 1;
    public final int curImage2 = 2;
    public final int curImage3 = 3;
    public final int curImage4 = 4;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        iv = (ImageView) findViewById(R.id.imageLogoDown);
        iv.setImageResourse(R.drawable.main_image_1);
            curImage = curImage1;

            switcher = new Switcher(this, handler);
        }

    /**
     * This class will implement the timer, calling run() on the UI thread each
     * time the timer elapses.
     */
    public class Switcher implements Runnable {
        private boolean _running = true;
        private Handler _handler;
        private Runnable _runnable;

        public Switcher(Runnable runnable, Handler handler) {
            _runnable = runnable;
            _handler = handler;
        }

        public void setRunning(boolean running) {
             _running = running;
        }

        @Override
        public void run() {
            while (_running) {
                try {
                    Thread.sleep(3000);
                } catch (InterruptedException ex) {
                }
                if (_running)
                    _handler.post(_runnable);
            }
        }
    }

    /**
     * Now on UI thread. Switch views.
     */
    @Override
    public void run() {
        switch (curImage) {
        case curImage1  :
            iv.setImageResourse(R.drawable.main_image_2);
            curImage = curImage2 ;
            break;
        case curImage2 :
            iv.setImageResource(R.drawable.main_image_3);
            curImage = curImage3 ;
            break;
        case curImage3 :
            iv.setImageResource(R.drawable.main_image_4);
            curImage = curImage4 ;
            break;
        case curImage4 :
            iv.setImageResource(R.drawable.main_image_1);
            curImage = curImage1 ;
            break;
        }
    }
  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T00:31:34.850

线程不在 UI 线程上运行，因此 UI 更新似乎可以工作，但不会出现在屏幕上。

根据[这篇 Android 开发人员博客文章](http://android-developers.blogspot.com/2009/05/painless-threading.html)和[Android 指南](http://developer.android.com/guide/components/processes-and-threads.html#WorkerThreads)，您可以使用 runOnUiThread 方法或使用方便的类[CountDownTimer](http://developer.android.com/reference/android/os/CountDownTimer.html)，而根本不需要执行任何线程：

```
CountDownTimer timer = new CountDownTimer(15000, // 15 second countdown
    99999) // onTick time, not used here
{

     public void onTick(long millisUntilFinished) {
         // Not used in this example
     }

     public void onFinish() {
         handleUpdates();
         timer.start(); // restarts the timer
     }
};
timer.start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T00:54:28.153

好吧，我实际上在我的一本书 - Android 食谱中找到了我正在寻找的答案。这是给以后可能会发现这个问题的人的：

```
private Runnable timerTask = new Runnable()
{
    @Override
    public void run()
    {
        if(curImage1 == 1)
        {
            mainImage1.setImageDrawable(getResources().getDrawable(R.drawable.logo));
            curImage1 = 5;
        }
        else if(curImage1 == 5)
        {
            mainImage1.setImageDrawable(getResources().getDrawable(R.drawable.main_image_1));
            curImage1 = 1;
        }
        mHandler.postDelayed(timerTask, 3000);
    }
};

@Override
public void onResume()
{
    super.onResume();
    mHandler.post(timerTask);
}

@Override
public void onPause()
{
    super.onPause();
    mHandler.removeCallbacks(timerTask);
} 
```

# javascript - JavaScript 正则表达式无法获得匹配的组

> ID：15180874
> 
> 赞同：1
> 
> 时间：2013-03-03T00:01:18.940
> 
> 标签：javascript, regex, grouping

我正在尝试将 JavaScript 正则表达式与 exec 函数一起使用，并希望获得一个组的匹配项。我只是想不通为什么我没有得到匹配。

这是我的代码：

```
var elementClass="validate[required]"
var myRegexp = /validate\\[(*)\\]/g;
var match = myRegexp.exec(elementClass); 
```

匹配每次都是空的。我不知道为什么。它应该是“必需的”。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T00:06:37.967

改用这个：

```
var myRegexp = /validate\[(.*)\]/; 
```

首先，您只需要一个反斜杠即可转义 - 否则您正在搜索文字反斜杠，然后是您试图转义的特殊含义。

其次，`*`仅表示“最后一件事的零个或多个”，在这种情况下没有任何意义，因为那里什么都没有。`.`意思是“任何东西”（嗯，几乎）所以`.*`意思是“任意数量的任何东西”。

最后，`g`这里不需要该标志，尤其是当您试图捕获结果的一部分时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T00:06:24.267

1）你有很多斜线

```
var myRegexp = /validate\[(.*?)\]/g; 
```

2）如果你只想匹配方括号中的部分，你应该使用组

```
var result = match[1]; 
```

# javascript - 表单控件故障解决方法

> ID：15180878
> 
> 赞同：2
> 
> 时间：2013-03-03T00:01:34.403
> 
> 标签：javascript, jquery, google-chrome, error-handling, jquery-events

我正在尝试解决：

> name='dob_mm' 的无效表单控件不可聚焦。

Chrome 中出现的错误。是的，我们有一堆必填字段，是的，这些字段是隐藏的。表单被分成选项卡，一次只显示一个。

是否有某种类型的 Jquery 函数可以显示某种类型的弹出窗口，说“您必须在其他选项卡中填写信息”？

我看[这里](https://stackoverflow.com/questions/7168645/invalid-form-control-only-in-google-chrome)，但没有告诉我太多。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-04T17:16:38.793

您应该进行自己的验证，但作为备份，有*一种*解决方法可以防止 Chrome 中出现这些错误。

基本方法是这样的：

*   在提交按钮单击事件中，使用`:invalid`Chrome 添加到出现错误的字段的伪类检测哪个字段未通过浏览器验证。
*   找到该字段的父容器（例如它所在的选项卡）并使该容器可见。

这将确保将用户定向到出现错误的选项卡，并且 Chrome 的验证不会失败，因为该字段将是可聚焦的。

一个非常基本的版本是这样的：

```
$('#inputbutton').click(function(){
    //find the invalid field
    $('#myform').find(':invalid').first()
    //find it's parent tab and show it
    .parents('.tab-pane').show();
}); 
```

# php - 表单验证后重定向codeigniter多个表单？

> ID：15180880
> 
> 赞同：0
> 
> 时间：2013-03-03T00:01:43.517
> 
> 标签：php, codeigniter, phpunit

我在表单验证后遇到重定向问题。我在不同的视图中有 3 个不同的表单，验证后，如果表单无法提交，我想将其重定向到上一个登录页面。它工作正常，但是，如果我单击 url 并按 enter，则在提交表单后。当我在主页时，它会重定向到联系人。我希望它将其重定向到他提交的上一个登录页面。我认为这不是正确的做法，在此先感谢

myform1.php 我的 Form1

```
<?php echo validation_errors(); ?>

<?php echo form_open('con/validate_form'); ?>

<h5>Username</h5>
<input type="text" name="username" value="" size="50" />

<h5>Password</h5>
<input type="text" name="password" value="" size="50" />

<h5>Password Confirm</h5>
<input type="text" name="passconf" value="" size="50" />

<h5>Email Address</h5>
<input type="text" name="email" value="" size="50" />

<div><input type="submit" name='submit1' value="Submit1" /></div>

</form>

</body>
</html> 
```

myform2.php

```
<html>
<head>
<title>My Form</title>
</head>
<body>

<?php echo validation_errors(); ?>

<?php echo form_open('con/validate_form'); ?>

<h5>Username</h5>
<input type="text" name="username" value="" size="50" />

<h5>Password</h5>
<input type="text" name="password" value="" size="50" />

<h5>Password Confirm</h5>
<input type="text" name="passconf" value="" size="50" />

<h5>Email Address</h5>
<input type="text" name="email"  value="" size="50" />

<div><input type="submit" name-'submit2' value="Submit2" /></div>

</form>

</body>
</html> 
```

myform3.php

```
<html>
<head>
<title>My Form3</title>
</head>
<body>

<?php echo validation_errors(); ?>

<?php echo form_open('con/valdate_form'); ?>

<h5>Username</h5>
<input type="text" name="username" value="" size="50" />

<h5>Password</h5>
<input type="text" name="password" value="" size="50" />

<h5>Password Confirm</h5>
<input type="text" name="passconf" value="" size="50" />

<h5>Email Address</h5>
<input type="text" name="email" value="" size="50" />

<div><input type="submit" name="submit3" value="Submit3" /></div>

</form>

</body>
</html> 
```

这是控制器页面

```
 public function validate_form(){
                $this->load->library('form_validation');
                $this->form_validation->set_rules('firstname', 'First name', 'required');
if ($this->form_validation->run() == FALSE){
 ($this->input->post('submit1')=='submit1') ?  $this->load->view('myform1') 
: ($this->input->post('submit2')=='submit2') ?  $this->load->view('myform2') 
: $this->load->view('myform3'); 
}
else
{
$this->register();
}
} 
```

控制器

```
 public function myform1(){
        $this->load->view('myform1');
    }

    public function myform2()   {
        $this->load->view('myform2');
    }

    public function myfrom3()   {
        $this->load->view('myform3');
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T01:34:05.493

我不明白为什么你有 3 个相同的表格，但是好的......为什么不呢。它可以是一种继续进行的方式（使用相同的验证方法以避免重复代码）。

有不同的方式进行：

1）对当前位置使用隐藏输入：

myform1.php

```
<?php echo validation_errors(); ?>

<?php echo form_open('con/validate_form'); ?>

<h5>Username</h5>
<input type="text" name="username" value="" size="50" />

<h5>Password</h5>
<input type="text" name="password" value="" size="50" />

<h5>Password Confirm</h5>
<input type="text" name="passconf" value="" size="50" />

<h5>Email Address</h5>
<input type="text" name="email" value="" size="50" />

<input type="hidden" name="redirect_to" value="<?php echo current_url(); ?>" />
<div><input type="submit" name='submit1' value="Submit1" /></div>

</form>

</body>
</html> 
```

控制器 > validate_form() 方法：

```
public function validate_form()
{
    $this->load->library('form_validation');
    $this->form_validation->set_rules('firstname', 'First name', 'required');

    if ($this->form_validation->run() == FALSE)
    {
        $redirect_to = $this->input->post('redirect_to');
        redirect($redirect_to);
    }
    else
    {
        $this->register();
    }
} 
```

但这并不完美，因为使用`redirect()`方法您无法轻松地重新填充表单。

2）这就是为什么我们通常不使用`validate_form()`.

您想发布一个表单，对其进行验证，然后在验证失败时再次显示表单并显示验证错误，或者如果验证通过则调用 register 方法。

执行此操作的最佳方法是将表单发布回自身。这样，在您的方法中，您可以检查表单是否已提交，并确定要执行的操作：

```
public function myform1()
{
    $this->load->library('form_validation');

    $this->form_validation->set_rules('username', 'Username', 'required');
    $this->form_validation->set_rules('password', 'Password', 'required');

    if ($this->form_validation->run() == FALSE)
    {
        $this->load->view('myform');
    }
    else
    {
        $this->register();
    }
} 
```

风景：

```
<html>
<head>
<title>My Form 1</title>
</head>
<body>

<?php echo validation_errors(); ?>

<?php echo form_open('con/myform1'); ?>

<h5>Username</h5>
<input type="text" name="username" value="" size="50" />

<h5>Password</h5>
<input type="text" name="password" value="" size="50" />

<h5>Password Confirm</h5>
<input type="text" name="passconf" value="" size="50" />

<h5>Email Address</h5>
<input type="text" name="email"  value="" size="50" />

<div><input type="submit" name-'submit' /></div>

</form>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T05:58:02.473

我所做的是为不同类型的表单错误创建一个错误文件夹......对于 form_validation 错误我将它重定向到特定的错误页面......它对我来说很好......

我也觉得你可能试图对多个表单视图使用相同的控制器......这会产生一个问题......

我认为您的联系人和登录表单都具有相同的重定向控制器 con/myform1 .... 看看......

希望有帮助....

# javascript - 使用 Javascript 剪辑图像

> ID：15180881
> 
> 赞同：3
> 
> 时间：2013-03-03T00:01:51.920
> 
> 标签：javascript, css, image-processing, clip

到目前为止，我还没有找到任何可以使用 clip 属性替代的东西。我试过唱负边距无济于事。现在我最后的希望是javascript。我已经用谷歌搜索了它，但还没有真正找到我要找的东西。

我想要的是剪辑图片的边缘，因此当将模糊滤镜应用于图像时，边缘不会模糊但很清晰。是的，我确实使用了 svg 过滤器，但找不到使过渡平滑的正确方法

```
<style>
#content{
background:#fff;
}

.one{
width:455px;
height:213px;
overflow:hidden;
display:inline-block;
vertical-align:top;
}

.one img{
position:relative;
top:-30px;
left:-7px;
-webkit-transition: all 0.4s ease-in-out;
-moz-transition: all 0.4s ease-in-out;
-o-transition: all 0.4s ease-in-out;
-ms-transition: all 0.4s ease-in-out;
transition: all 0.4s ease-in-out;
}

.one img:hover{
filter: blur(3px); -webkit-filter: blur(3px); -moz-filter: blur(3px);
-o-filter: blur(3px); -ms-filter: blur(3px);
filter: url(blur.svg#blur);
-webkit-transition: all 0.4s ease-in-out;
-moz-transition: all 0.4s ease-in-out;
-o-transition: all 0.4s ease-in-out;
-ms-transition: all 0.4s ease-in-out;
transition: all 0.4s ease-in-out;
}
</style>

<div id="content">

<span class="one">
<a href="/"><img src="http://0.tqn.com/d/create/1/0/z/I/4/-/forthebirds.jpg" /></a>
</span>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:15:10.450

您可以通过以下方式使用 Javascript 剪辑任何图像

*   创建`<canvas>`剪切区域大小的标签

*   使用剪切的源坐标在画布内绘制图像`canvas.getContext().drawImage()`，也称为切片

[https://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial/Using_images#Slicing](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial/Using_images#Slicing)

自然地，具有活跃市场份额的 Microsoft 浏览器可能需要它们自己的 hocus pocus、Flash 扩展或其他任何东西来让 Redmond 高兴。

也因为你很明显在做图像过滤，这可能会让你很感兴趣

[http://www.html5rocks.com/en/tutorials/canvas/imagefilters/](http://www.html5rocks.com/en/tutorials/canvas/imagefilters/)

[http://www.pixastic.com/lib/](http://www.pixastic.com/lib/)

# internet-explorer - 如何让图标在 IE 中显示？

> ID：15180882
> 
> 赞同：0
> 
> 时间：2013-03-03T00:02:14.887
> 
> 标签：internet-explorer, caching, favicon

我网站上 favicon.ico 格式的 favicon 没有出现在 IE 和 firefox 中（使用 favicon 后重新加载网站时）。它出现在第一次打开该站点的另一台计算机的 chrome 和 Firefox 中。

再次，当我重新启动系统时，它出现在 Firefox 中，但 IE 没有运气。这些网页是 .aspx 页面。如何让图标出现在 IE 上？

# android - Android：如何获取对 listView 的引用？

> ID：15180883
> 
> 赞同：0
> 
> 时间：2013-03-03T00:02:21.220
> 
> 标签：android

我正在尝试将 a`MapView`与 a 结合使用`ListView`。我的理解是我需要扩展`MapActivity`然后获取对`ListView`要在我的课堂上使用的参考。我的问题是我无法获得对`ListView`.

这是我的 XML：

```
<AbsoluteLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/AbsoluteLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <com.google.android.maps.MapView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/mapview"
        android:layout_width="match_parent"
        android:layout_height="150dp"
        android:layout_y="0dp"
        android:clickable="true" />

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="268dp"
        android:layout_y="151dp" >

    </ListView>

</AbsoluteLayout> 
```

这就是我试图获得参考的方式`ListView`：

```
//instance vars
ListView listView;

//get ref to listview
listView = findViewById(R.id.list); 
```

出于某种原因，它说列表不是一个字段。我是否错误地引用它？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:03:30.497

它应该是

```
listView = (ListView) findViewById(android.R.id.list); 
```

但是，由于您没有使用 a ，*因此*`ListActivity`您不必放置. （或任何自定义）将起作用。*`"@android:id/list"``"@+id/list"`*

 *通常，您在需要时使用 Android id，例如在使用`ListActivity`/时`ListFragment`，只有在您的自定义布局包含正确的 id 时才能使用。

此外，您应该使用`MapFragments/SupportMapFragment`s 代替，因为[MapActivity 已弃用](https://developers.google.com/maps/documentation/android/v1/hello-mapview)。*

# microcontroller - PIC18 上的中断仅触发一次

> ID：15180885
> 
> 赞同：1
> 
> 时间：2013-03-03T00:02:24.930
> 
> 标签：microcontroller, interrupt, pic, pic18

我试图让我的 PIC18F2550 上的 Timer1 每秒触发一次中断以进行倒计时。到目前为止，我已经能够正确建立中断优先级以及其他设置，但是我的 ISR 只触发一次。我已经设置了我的程序以将倒计时中剩余的秒数打印到 LCD 上，因此用户可以清楚地看到已经过去了多少次中断。我已确保清除 ISR 中正确的中断标志，因为对于大多数在 google 上遇到相同问题的人来说，这就是问题的根源，但这并没有解决问题。到目前为止，我的程序的其他所有内容都运行良好。

（为了测试是否触发了正确的优先级，低计数向上而不是向下计数）

这是代码片段

```
//First testing program for PIC18F2550

#include <p18f2550.h>
#include <stdlib.h>
#include <delays.h>

#define _XTAL_FREQ 4915200

#pragma config PLLDIV = 1
#pragma config CPUDIV = OSC1_PLL2
#pragma config FOSC = XT_XT
#pragma config MCLRE = ON 
#pragma config BOR = OFF
#pragma config WDT = OFF
#pragma config IESO = OFF
#pragma config PBADEN = OFF
#pragma config LVP = OFF

unsigned char Countdown = 30;   (other vars, fcns omitted)

#pragma code high_vector = 0x08
void highvectinterrupt(void){
    _asm goto highisr _endasm
}

#pragma code low_vector = 0x18
void lowvectinterrupt(void){
    _asm goto lowisr _endasm
}

(...)

void highisr(void){
    Countdown--;
    PIR1bits.TMR1IF = 0;
}

void lowisr(void){
    Countdown++;
    PIR1bits.TMR1IF = 0;
}

void main(void){
    UCONbits.USBEN=0;  //Setup I/O
    UCFGbits.UTRDIS=1;
        OSCCONbits.SCS1 = 0;
        OSCCONbits.SCS0 = 0;
    BAUDCONbits.TXCKP=0;
        SPBRG = 0x3F;  //1200 baud
    TRISA = 0x00;
    TRISB = 0xFF;
    TRISC = 0x00;     

    beephigh();    //Done, clear the line and beep speaker 1

    LATA = 0;               //reset
    LATC = 0;
    Delay10KTCYx(8);
    LATAbits.LATA2 = 1;     //load the reset
    Delay10KTCYx(8);
    LATAbits.LATA3 = 1;     //stop reset
    LATAbits.LATA4 = 1; 
    LATAbits.LATA2 = 0;
    Delay10KTCYx(123);

    initlcd();

    Delay10KTCYx(10);

    setupUI();

    LATAbits.LATA0 = 0;   //Done, clear the line and beep speaker 2
    beeplow();

    INTCON = 0;             //Reset high interrupt flags and disable interrupts
    T1CON = 0x11110100;     //16 bit r/w; internal system clock; 8x prescale; timer1 osc disabled
    TMR1H = 0;              //Clear the counting register
    TMR1L = 0;
    PIE1bits.TMR1IE = 1;    //Enable Interrupts on Timer1
    PIR1bits.TMR1IF = 0;    //Clear the flag if set
    RCONbits.IPEN = 1;      //Enable priority levels
    INTCON2bits.TMR0IP = 0; //Timer0 on low priority
    IPR1bits.TMR1IP = 0;    //Timer1 on low priority
    IPR1bits.RCIP = 1;      //RS232 on high priority
    INTCONbits.GIEL = 1;    //Enable all low priority interrupts
    INTCONbits.GIEH = 1;    //Enable all high priority (must be enabled for low priority)
    T1CONbits.TMR1ON = 1;   //Turn Timer1 on    

    while(1){  //Idle and refresh screen 
        Delay10KTCYx(8);
        bin2ascii(Countdown);
        cmdlcd(0xCE);
        putclcd(ConvRegTens);
        putclcd(ConvRegOnes);
    }
} 
```

最终，我盯着一个上面有“31”的液晶显示器。可能是我没有正确设置一个标志，导致没有任何工作正常，但据我检查所有内容都已启用并正确清除。我究竟做错了什么？我会很感激任何帮助，这非常令人沮丧。

另外：我已经清除了所有断点，因此它不会在任何地方停止，并在编译时对最新版本进行编程。所以我已经排除了运行旧版本的代码。

编辑：为了澄清，此代码仅用于功能；它不会每秒触发一次，而是更快。一旦我让它工作，我将播放溢出计数以使其达到 1 秒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T00:36:03.600

您没有正确完成 ISR 例程！

```
#pragma code low_vector = 0x18
void lowvectinterrupt(void){
    _asm goto lowisr _endasm
} 
```

在 ISR 执行后，中断必须再次打开，因此`lowvectinterrupt`必须用`RETFIE`指令完成，并且至少必须恢复标志和 WREG 寄存器。

Normaly 在 ISR 例程中声明如下：

```
static void interrupt isr(void)
  {

  } 
```

# google-app-engine - 影响游标结果的搜索 API 上找到的数字准确度

> ID：15180888
> 
> 赞同：4
> 
> 时间：2013-03-03T00:02:51.347
> 
> 标签：google-app-engine, full-text-search, google-search-api

当使用谷歌应用引擎搜索 API 时，如果我们有一个查询返回一个大的结果集（>1000），并且需要使用游标迭代来收集整个结果集，如果返回的文档我们会得到不确定的结果number_found_accuracy 小于我们的结果大小。

换句话说，相同的查询运行了两次，通过游标收集所有文档，不会返回相同的文档，除非我们的 number_found_accuracy 高于结果大小（例如，使用最大值 10000）。只有这样，我们才能始终获得相同的文件。

我们对 number_found_accuracy 应该如何工作的理解是它只会影响 number_found 估计。我们假设如果您使用游标来获取所有结果，您将能够获得与运行一个大型查询相同的结果。

我们是否误解了 number_found_accuracy 或游标的使用，还是我们发现了一个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-10T19:27:19.427

您对 number_found_accuracy 的理解是正确的。我认为您观察到的行为是复制查询故障转移与指定 number_found_accuracy 的查询如何影响使用延续令牌的未来查询之间令人惊讶的相互作用。

[当您使用 Search API 索引文档时，我们使用与 High Replication Datastore（即Megastore](http://www.cidrdb.org/cidr2011/Papers/CIDR11_Paper32.pdf) ）相同的机制将它们存储在几个不同的副本中。这些文档在每个副本上生效的速度取决于许多因素。它通常是立即的，但如果您对单个 (index, namespace) 对进行批量写入，延迟可能会变得更长。

可以在这些副本中的任何一个上执行搜索。我们甚至可能会在与原始搜索不同的副本上运行使用延续令牌的搜索。如果原始副本和/或延续副本正在赶上他们的索引工作，他们可能有不同的活动文档集。它会“最终”变得一致，但并不总是立竿见影。

如果您在查询中指定 number_found_accuracy，我们必须运行大部分查询，就好像我们要返回 number_found_accuracy 结果一样。我们特别需要进一步阅读发布列表以查找和计算匹配的文档。读取发布列表会导致其关联的文件块被插入到各种缓存中。

反过来，当您使用光标进行搜索时，我们将能够在我们用于原始搜索*的同一副本上*更快地阅读文档。因此，您不太可能将继续搜索故障转移到可能尚未完成对同一组文档的索引的不同副本。我认为您观察到的不一致结果是这种延续查询故障转移的结果。

总之，将 number_found_accuracy 设置为较大的值可以有效地预热该副本的缓存。因此，它几乎肯定会是继续搜索的最快副本。面对试图赶上索引的副本，这会让人觉得 number_found_accuracy 对结果的一致性有直接影响，但实际上它只是一个副作用。

# c++ - 避免打开类型以允许不断折叠

> ID：15180890
> 
> 赞同：0
> 
> 时间：2013-03-03T00:02:55.350
> 
> 标签：c++, templates, constantfolding

我试图找到一个类层次结构，它允许为处理器寄存器和操作实现占位符。它还应该允许在运行时折叠常量。为了简单起见，我只看一个操作，这里是乘法。占位符和常量应该可以统一访问，即有一个共同的基类。

下面的代码定义了以下类：

`class A`: 占位符（寄存器）和常量的基类

`class B`：寄存器的占位符（其结构包含它的名称）

`class C`: 所有常数的基数

`class CI`: `int`常数

`class CF`: `float`常数

```
#include <iostream>
#include <memory>
#include <cassert>

class A {
public:
  virtual ~A(){}
};

class B : public A {
};

class C : public A {};

class CI : public C {
public:
  typedef int Type_t;
  int getValue() {return 1;}
};

class CF : public C {
public:
  typedef float Type_t;
  float getValue() {return 1.1;}
};

typedef std::shared_ptr<A> Aptr;
typedef std::shared_ptr<B> Bptr;
typedef std::shared_ptr<C> Cptr;
typedef std::shared_ptr<CI> CIptr;
typedef std::shared_ptr<CF> CFptr;

template<class T, class T2> struct promote {};
template<> struct promote<float,int>   { typedef float Type_t; };
template<> struct promote<float,float> { typedef float Type_t; };
template<> struct promote<int,float>   { typedef float Type_t; };
template<> struct promote<int,int  >   { typedef int   Type_t; };

template<class T1, class T2>
typename promote<typename T1::element_type::Type_t,
         typename T2::element_type::Type_t>::Type_t
mul_const( const T1& c1 , const T2& c2 )
{
  std::cout << c1->getValue() * c2->getValue() << "\n";
  return c1->getValue() * c2->getValue();
}

template<class T>
std::shared_ptr<T> get(const Aptr& pA) {
  return std::dynamic_pointer_cast< T >( pA );
}

Aptr create_A(float f) { return std::make_shared<A>(); }
Aptr create_A(int i)   { return std::make_shared<A>(); }

Aptr mul_const( const Cptr& cp1 , const Cptr& cp2 )
{
  if (auto c1 = get<CI>(cp1))
    if (auto c2 = get<CF>(cp2)) {
      return create_A( mul_const(c1,c2) );
    }
  if (auto c1 = get<CF>(cp1))
    if (auto c2 = get<CI>(cp2)) {
      return create_A( mul_const(c1,c2) );
    }
  if (auto c1 = get<CI>(cp1))
    if (auto c2 = get<CI>(cp2)) {
      return create_A( mul_const(c1,c2) );
    }
  if (auto c1 = get<CF>(cp1))
    if (auto c2 = get<CF>(cp2)) {
      return create_A( mul_const(c1,c2) );
    }
  assert(!"oops");
}

Aptr mul( const Aptr& pA1, const Aptr& pA2 ) 
{
  if (auto c1 = get<C>(pA1))
    if (auto c2 = get<C>(pA2)) 
      {
    return mul_const(c1,c2);
      }
}

int main()
{
  Aptr pA1( new CF );
  Aptr pA2( new CI );

  Aptr result = mul( pA1, pA2 );
} 
```

我在上面的代码中遇到的问题是函数`Aptr mul_const( const Cptr& cp1 , const Cptr& cp2 )`。它基本上包含所有可能的常量类型组合的类型切换。它有效，但我想知道这是否可以更优雅地完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T00:32:28.720

我想你可以做编译器所做的事情，并在一个为浮点数时将另一个参数转换为浮点数。您可能需要一个新函数来进行转换和一个“isFloat”（或“isInt”）。我不相信它会给你带来那么多好处，真的......

```
// Add two virtual member functions here:
class C : public A {
    public:
       virtual bool isInt() = 0;
       virtual float getAsFloat() = 0;
}; 
```

然后实现：

```
class CI : public C {
public:
  typedef int Type_t;
  int getValue() {return 1;}
  float getAsFloat() { return getValue(); }
  bool isInt() { return true; }
};

class CF : public C {
public:
  typedef float Type_t;
  float getValue() {return 1.1;}
  float getAsFloat() { return getValue(); }
  bool isInt() { return false; }
}; 
```

现在，您的 mul_const 变为：

```
Aptr mul_const( const Cptr& cp1 , const Cptr& cp2 )
{
  if (cp1.isInt() && cp2.isInt())
  {
     CIptr c1 = get<CI>(cp1));
     CIptr c2 = get<CI>(cp2));
     std::cout << c1->getValue() * c2->getValue() << "\n";
     return CIptr(c1->getValue() * c2->getValue());
  }
  else
  {
     std::cout << cp1->getAsFloat() * cp2->getAsFloat() << "\n";
     return CFptr(cp2->getAsFloat() * cp2->getAsFloat());
  }
  // This becomes unreachable... Probably OK to delete.
  assert(!"oops");
} 
```

【而且我觉得有几个模板部分可以删掉……】

# c# - 加扰字符串

> ID：15180892
> 
> 赞同：0
> 
> 时间：2013-03-03T00:03:03.137
> 
> 标签：c#, string, permutation

如何对如下所示的字符串进行加扰，以实现所有可能的排列？是否有这种努力的 LINQ 方法？我搜索了谷歌，但在上面找不到任何东西。

```
STRING = "Little Red Riding Hood" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T00:15:30.353

[这](http://www.codeproject.com/Articles/26050/Permutations-Combinations-and-Variations-using-C-G)是我过去使用过的一个优秀的置换库。这篇文章包含一个代码片段，我相信它会很好地满足您的需求（我已经稍微适应了）：

```
var inputSet = myString.ToCharArray();
var P2 = new Permutations<char>(inputSet, 
      GenerateOption.WithRepetition);
string format2 = "Permutations of {{A A C}} with Repetition; size = {0}";
Console.WriteLine(String.Format(format2, P2.Count));
foreach(IList<char> p in P2) {
  Console.WriteLine(String.Format("{{{0} {1} {2}}}", p[0], p[1], p[2]));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T00:07:21.653

C++ 标准模板库 (STL) 中有一些方法，但我相信这些方法无法从 C# 访问（以任何方式）。我相信您必须为 STL 编写一个小的 C++ 包装器并从 C# 调用它；或在 C# 中编码排列。

更新：

生成 N 个项目的所有排列是旅行商问题 (TSP) 的必要前奏。这方面的算法遍布网络，这将解释如何在各种可能的顺序和并行算法中生成***排列***。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T00:07:26.703

您想对字符串的字符进行[Knuth/Fisher-Yates 洗牌。](http://en.wikipedia.org/wiki/Knuth_shuffle)

这里有一堆 C# 实现，你可以适应字符串而不是数组：[使用 Random 和 OrderBy 是一个好的 shuffle 算法吗？](https://stackoverflow.com/questions/1287567/is-using-random-and-orderby-a-good-shuffle-algorithm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T00:26:07.970

这是一个完整的示例程序：

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace ConsoleApplication2
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            var sentences = new List<string>
            {
                "Little Red Riding Hood",
                "Three Little Pigs",
                "Jack and the Beanstalk"
            };

            foreach (var sentence in sentences)
            {
                Console.WriteLine("----------------------------------");

                foreach (var permutation in Permute(sentence.Split(' ')))
                {
                    foreach (string word in permutation)
                    {
                        Console.Write(word + " ");
                    }

                    Console.WriteLine();
                }
            }

            // If you want to put all the permutations for all the sentences into a List<string>, you can just do this:

            List<string> permutations = new List<string>();

            foreach (var sentence in sentences)
            {
                permutations.AddRange(Permute(sentence.Split(' ')).Select(perm => string.Join(" ", perm)));
            }

            Console.WriteLine("The total number of perms is: " + permutations.Count);
        }

        /// <summary>
        /// Provides a sequence of enumerators for obtaining all permutations of a sequence.
        /// Each enumeration in the returned sequence itself enumerates one of the permutations of the input sequence.
        /// Use two nested foreach statements to visit each item in each permuted sequence.
        /// </summary>

        public static IEnumerable<IEnumerable<T>> Permute<T>(IEnumerable<T> sequence)
        {
            return permute(sequence, sequence.Count());
        }

        // Returns an enumeration of enumerators, one for each permutation of the input.

        private static IEnumerable<IEnumerable<T>> permute<T>(IEnumerable<T> sequence, int count)
        {
            if (count == 0)
            {
                yield return new T[0];
            }
            else
            {
                int startingElementIndex = 0;

                foreach (T startingElement in sequence)
                {
                    IEnumerable<T> remainingItems = allExcept(sequence, startingElementIndex);

                    foreach (IEnumerable<T> permutationOfRemainder in permute(remainingItems, count - 1))
                    {
                        yield return concat<T>(new T[] { startingElement }, permutationOfRemainder);
                    }

                    ++startingElementIndex;
                }
            }
        }

        // Implements the recursive part of Permute<T>

        private static void permute<T>(T[] items, int item, T[] permutation, bool[] used, Action<T[]> output)
        {
            for (int i = 0; i < items.Length; ++i)
            {
                if (!used[i])
                {
                    used[i] = true;
                    permutation[item] = items[i];

                    if (item < (items.Length - 1))
                    {
                        permute(items, item + 1, permutation, used, output);
                    }
                    else
                    {
                        output(permutation);
                    }

                    used[i] = false;
                }
            }
        }

        // Enumerates over all items in the input, skipping over the item with the specified index.

        private static IEnumerable<T> allExcept<T>(IEnumerable<T> input, int indexToSkip)
        {
            int index = 0;

            foreach (T item in input)
            {
                if (index != indexToSkip)
                {
                    yield return item;
                }

                ++index;
            }
        }

        // Enumerates over contents of two lists sequentially.

        private static IEnumerable<T> concat<T>(IEnumerable<T> a, IEnumerable<T> b)
        {
            foreach (T item in a)
            {
                yield return item;
            }

            foreach (T item in b)
            {
                yield return item;
            }
        }
    }
} 
```

# makefile - 如何使用 Makefile 选择 *.c 文件？

> ID：15180898
> 
> 赞同：0
> 
> 时间：2013-03-03T00:03:42.510
> 
> 标签：makefile

这是一种愚蠢的问题，但这是我第一次使用`Makefile`. 我在选择文件时遇到问题。当我使用这个命令时，

```
target1:

     $(CC) -o target *.c 
```

它运作良好。但这不起作用，

```
SRCS = dir1/*.c
target1:

     $(CC) -o target $(SRCS) 
```

并吐出这个错误。

```
clang: error: no such file or directory: 'dir1/*.c' 
```

显然这是因为我的变量`SRCS`在传递之前被转义了。如何让 Makefile 按原样传递字符串？还是有另一种传统/设计的方式来做到这一点？（按模式选择文件）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T00:10:40.557

您可以使用`wildcard`关键字来选择与特定模式匹配的所有文件，如下所示：

```
SRCS = $(wildcard dir1/*.c)
target1:

     $(CC) -o target $(SRCS) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T00:14:33.973

```
SRCS := $(shell echo dir1/*.c)
target1:
    $(CC) -o target $(SRCS) 
```

# postgresql - Heroku中数据库的快照在哪里？

> ID：15180906
> 
> 赞同：1
> 
> 时间：2013-03-03T00:05:15.690
> 
> 标签：postgresql, heroku

到目前为止，我可以从 PG 备份中看到我自动创建的快照，以及在 Postgres -> 数据库 -> 快照下手动创建的快照。

现在，我只看到以下消息，而不是我的快照：

`Snapshots are archives of an entire database stored in a single file. Snapshots can be used to create an archive of the history of your database for compliance or reference.`

他们去哪儿了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:46:45.080

在我把票寄到 heroku 之后，他们在几个小时内就修好了！显然，他们不小心消失了。

# android - DialogFragment 打开数据库，DatabaseLocked

> ID：15180908
> 
> 赞同：1
> 
> 时间：2013-03-03T00:05:22.753
> 
> 标签：android, android-dialogfragment

我有一个对话框片段供用户输入信息。当用户单击确定时，信息通过我尝试将其放入数据库的界面传递回主要活动。这是对话框正面点击代码：

```
 .setPositiveButton("Ok", new DialogInterface.OnclickListener(){
     @Override
     public void onClick(DialogInterface dialog, int which){
         name = edittextname.getText().toString();
         details = edittextdetails.getText().toString();

         bundle.putString("name", name);
         bundle.putString("detail", detail);

         mListener.OnAddInfo(Bundle); 
```

在主要活动中，我在代码中实现了接口和这个：

```
 public void OnAddInfo(Bundle bundle){
         name = bundle.getString("name");
         detail = bundle.getString("detail");

    db.open();
    long id = db.insertInfo(name, detail);
    db.close();

    Toast.makeText(this, "Added " + name, Toast.LENGTH_SHORT).show();
    } 
```

我知道数据正在传递，因为当我注释掉数据库部分时，吐司正确出现。我认为我的数据库没有问题，因为在其他不使用对话片段的活动中它工作正常。我得到的错误信息是这样的：

```
 FATAL EXCEPTION: main
      java.lang.NullPointerException at
      android.database.sqlite.SQLiteOpenHelper
      .getDatabaseLocked(SQLiteOpenHelper.java:224) 
```

我已经尝试了很多方法来解决这个问题，但无法弄清楚。这只是不允许的事情还是我只是错过了什么？mainactivity也是一个fragmentactivity。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-14T05:47:08.127

我花了几个小时在这上面放弃了，只是偶然发现了一个解决方案。在您通常声明内容的 DialogFragment 类的开头声明新数据库不起作用，但在 onCreateDialog 方法中声明它是有效的！

例子：

onCreateDialog(){

DatabaseHandler db = new DatabaseHandler(getActivity());

// 现在使用没有锁的 db。

}

# php - PHP Simple HTML DOM Parser 错误获取文本

> ID：15180915
> 
> 赞同：1
> 
> 时间：2013-03-03T00:06:05.383
> 
> 标签：php, parsing

我对 PHP Simple HTML DOM Parser 有疑问。我无法从正确的 div 标签中获取链接和文本...这里是 url，[http://apeiron.comyr.com/asd.php](http://apeiron.comyr.com/asd.php)，这里是要解析[链接](http://www.apeiron-uni.eu/lycboardclient/Default.aspx?DepartmentID=2)的 url 。

**这是代码：**

```
<?php
    include 'simple_html_dom.php';
    ini_set('short_open_tag', '0');
    $html = file_get_html('http://www.apeiron-uni.eu/lycboardclient/Default.aspx?DepartmentID=2');
    header('Content-Type: application/json; charset=utf-8');
    echo '{ "rezultati":[ ';
    //$i = 1;
foreach($html->find('div[id=center].post') as $article) {
        $item['datum']    = $article->find('div.post-date', 0)->plaintext;
        $item['text'] =     $article->find('a', 0)->plaintext;
        $item['more'] = $article->find('a', 0)->href;           
    //  if($i < 11){    

                $datum=$item['datum'];
                $text=$item['text'];
                $link=$item['more'];

                $xml=array("datum" =>$datum ,"text" => $text,"link" => $link);              
                echo json_encode($xml).",";

                /*  
        }
        else{           
        }*/
        //$i++; 
    }

echo ']}'; 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:31:17.703

在您的代码中

```
foreach($html->find('div[id=center].post') as $article) { ... } 
```

应该

```
foreach($html->find('div#center .post') as $article) { ... } 
```

**输出：**

> aspx？NewsID = 9387 "}, {" date ":" Monday, 25.02.2013。年","文本":"德国\u010dki语言I","链接":"Default.aspx? DepartmentID = 2 & NewsID = 9391 "}, {" date ":" Friday, 22.02.2013。是 " "text": "STATISTICS-RESULTS 之前的职责", "link": "Default.aspx? DepartmentID = 2 & NewsID = 9372"}, {"date": "2013 年 2 月 22 日星期五。年”，“文本”：“理论决定\u010divanja - 先决条件”，“链接”：“Default.aspx？DepartmentID = 2 & NewsID = 9366 "}, {" date ":" 2013 年 2 月 20 日星期三。年》、《文》：《二月与教授的最后期限》。Mirela Simi \u0107“，链接”：“ 默认.aspx？DepartmentID = 2 & NewsID = 9354 "}, {" date ":" Monday, 18.02.2013\. 年》，《正文》：《理论决定\u010divanja-test II》，《链接》：《Default.aspx？DepartmentID = 2 & NewsID = 9310 "}, {" date ":" Monday, 18.02.2013\. 年”、“文”：“信息学和ra\u010dunarske技术”、“链接”、“Default.aspx？部门 ID = 2 & NewsID = 9319 "},]} 年”、“文”：“信息学和ra\u010dunarske技术”、“链接”、“Default.aspx？部门 ID = 2 & NewsID = 9319 "},]} 年”、“文”：“信息学和ra\u010dunarske技术”、“链接”、“Default.aspx？部门 ID = 2 & NewsID = 9319 "},]}

# jquery - 需要一些帮助 - 在 Drupal 6 站点上破坏 IE

> ID：15180926
> 
> 赞同：2
> 
> 时间：2013-03-03T00:06:48.543
> 
> 标签：jquery, css, internet-explorer, jquery-cycle

尝试使用 IE 调试器来找出为什么某些 css 没有呈现在某些“类型”的 Drupal 页面的顶部。它看起来像标题和 Suckerfish 菜单 css 在 IE 中不起作用。

调试器在 jQuery Cycle 插件中的此代码中出现错误时停止

```
(function($){var ver="2.88";if($.support==undefined){$.support={opacity:!($.browser.msie)};}function debug(s){if($.fn.cycle.debug){log(s);}}function log(){if(window.console&&window.console.log){window.console.log("[cycle] "+Array.prototype.join.call(arguments," "));}}$.fn.cycle=function(options,arg2){var o={s:this.selector,c:this.context};if(this.length===0&&options!="stop"){if(!$.isReady&&o.s){log("DOM not ready, queuing slideshow");$(function(){$(o.s,o.c).cycle(options,arg2);});return this;}log("terminating; zero elements found by selector"+($.isReady?"":" (DOM not ready)"));return this;}return this.each(function(){var opts=handleArguments(this,options,arg2);if(opts===false){return;}opts.updateActivePagerLink=opts.updateActivePagerLink||$.fn.cycle.updateActivePagerLink;if(this.cycleTimeout){clearTimeout(this.cycleTimeout);}this.cycleTimeout=this.cyclePause=0;var $cont=$(this);var $slides=opts.slideExpr?$(opts.slideExpr,this):$cont.children();var els=$slides.get();if(els.length<2){log("terminating; too few slides: "+els.length);return;}var opts2=buildOptions($cont,$slides,els,opts,o);if(opts2===false){return;}var startTime=opts2.continuous?10:getTimeout(els[opts2.currSlide],els[opts2.nextSlide],opts2,!opts2.rev);if(startTime){startTime+=(opts2.delay||0);if(startTime<10){startTime=10;}debug("first timeout: "+startTime);this.cycleTimeout=setTimeout(function(){go(els,opts2,0,(!opts2.rev&&!opts.backwards));},startTime);}});};function handleArguments(cont,options,arg2){if(cont.cycleStop==undefined){cont.cycleStop=0;}if(options===undefined||options===null){options={};}if(options.constructor==String){switch(options){case"destroy":case"stop":var opts=$(cont).data("cycle.opts");if(!opts){return false;}cont.cycleStop++;if(cont.cycleTimeout){clearTimeout(cont.cycleTimeout);}cont.cycleTimeout=0;$(cont).removeData("cycle.opts");if(options=="destroy"){destroy(opts);}return false;case"toggle":cont.cyclePause=(cont.cyclePause===1)?0:1;checkInstantResume(cont.cyclePause,arg2,cont);return false;case"pause":cont.cyclePause=1;return false;case"resume":cont.cyclePause=0;checkInstantResume(false,arg2,cont);return false;case"prev":case"next":var opts=$(cont).data("cycle.opts");if(!opts){log('options not found, "prev/next" ignored');return false;}$.fn.cycle[options](opts);return false;default:options={fx:options};}return options;}else{if(options.constructor==Number){var num=options;options=$(cont).data("cycle.opts");if(!options){log("options not found, can not advance slide");return false;}if(num<0||num>=options.elements.length){log("invalid slide index: "+num);return false;}options.nextSlide=num;if(cont.cycleTimeout){clearTimeout(cont.cycleTimeout);cont.cycleTimeout=0;}if(typeof arg2=="string"){options.oneTimeFx=arg2;}go(options.elements,options,1,num>=options.currSlide);return false;}}return options;function checkInstantResume(isPaused,arg2,cont){if(!isPaused&&arg2===true){var options=$(cont).data("cycle.opts");if(!options){log("options not found, can not resume");return false;}if(cont.cycleTimeout){clearTimeout(cont.cycleTimeout);cont.cycleTimeout=0;}go(options.elements,options,1,(!opts.rev&&!opts.backwards));}}}function removeFilter(el,opts){if(!$.support.opacity&&opts.cleartype&&el.style.filter){try{el.style.removeAttribute("filter");}catch(smother){}}}function destroy(opts){if(opts.next){$(opts.next).unbind(opts.prevNextEvent);}if(opts.prev){$(opts.prev).unbind(opts.prevNextEvent);}if(opts.pager||opts.pagerAnchorBuilder){$.each(opts.pagerAnchors||[],function(){this.unbind().remove();});}opts.pagerAnchors=null;if(opts.destroy){opts.destroy(opts);}}function buildOptions($cont,$slides,els,options,o){var opts=$.extend({},$.fn.cycle.defaults,options||{},$.metadata?$cont.metadata():$.meta?$cont.data():{});if(opts.autostop){opts.countdown=opts.autostopCount||els.length;}var cont=$cont[0];$cont.data("cycle.opts",opts);opts.$cont=$cont;opts.stopCount=cont.cycleStop;opts.elements=els;opts.before=opts.before?[opts.before]:[];opts.after=opts.after?[opts.after]:[];opts.after.unshift(function(){opts.busy=0;});if(!$.support.opacity&&opts.cleartype){opts.after.push(function(){removeFilter(this,opts);});}if(opts.continuous){opts.after.push(function(){go(els,opts,0,(!opts.rev&&!opts.backwards));});}saveOriginalOpts(opts);if(!$.support.opacity&&opts.cleartype&&!opts.cleartypeNoBg){clearTypeFix($slides);}if($cont.css("position")=="static"){$cont.css("position","relative");}if(opts.width){$cont.width(opts.width);}if(opts.height&&opts.height!="auto"){$cont.height(opts.height);}if(opts.startingSlide){opts.startingSlide=parseInt(opts.startingSlide);}else{if(opts.backwards){opts.startingSlide=els.length-1;}}if(opts.random){opts.randomMap=[];for(var i=0;i<els.length;i++){opts.randomMap.push(i);}opts.randomMap.sort(function(a,b){return Math.random()-0.5;});opts.randomIndex=1;opts.startingSlide=opts.randomMap[1];}else{if(opts.startingSlide>=els.length){opts.startingSlide=0;}}opts.currSlide=opts.startingSlide||0;var first=opts.startingSlide;$slides.css({position:"absolute",top:0,left:0}).hide().each(function(i){var z;if(opts.backwards){z=first?i<=first?els.length+(i-first):first-i:els.length-i;}else{z=first?i>=first?els.length-(i-first):first-i:els.length-i;}$(this).css("z-index",z);});$(els[first]).css("opacity",1).show();removeFilter(els[first],opts);if(opts.fit&&opts.width){$slides.width(opts.width);}if(opts.fit&&opts.height&&opts.height!="auto"){$slides.height(opts.height);}var reshape=opts.containerResize&&!$cont.innerHeight();if(reshape){var maxw=0,maxh=0;for(var j=0;j<els.length;j++){var $e=$(els[j]),e=$e[0],w=$e.outerWidth(),h=$e.outerHeight();if(!w){w=e.offsetWidth||e.width||$e.attr("width");}if(!h){h=e.offsetHeight||e.height||$e.attr("height");}maxw=w>maxw?w:maxw;maxh=h>maxh?h:maxh;}if(maxw>0&&maxh>0){$cont.css({width:maxw+"px",height:maxh+"px"});}}if(opts.pause){$cont.hover(function(){this.cyclePause++;},function(){this.cyclePause--;});}if(supportMultiTransitions(opts)===false){return false;}var requeue=false;options.requeueAttempts=options.requeueAttempts||0;$slides.each(function(){var $el=$(this);this.cycleH=(opts.fit&&opts.height)?opts.height:($el.height()||this.offsetHeight||this.height||$el.attr("height")||0);this.cycleW=(opts.fit&&opts.width)?opts.width:($el.width()||this.offsetWidth||this.width||$el.attr("width")||0);if($el.is("img")){var loadingIE=($.browser.msie&&this.cycleW==28&&this.cycleH==30&&!this.complete);var loadingFF=($.browser.mozilla&&this.cycleW==34&&this.cycleH==19&&!this.complete);var loadingOp=($.browser.opera&&((this.cycleW==42&&this.cycleH==19)||(this.cycleW==37&&this.cycleH==17))&&!this.complete);var loadingOther=(this.cycleH==0&&this.cycleW==0&&!this.complete);if(loadingIE||loadingFF||loadingOp||loadingOther){if(o.s&&opts.requeueOnImageNotLoaded&&++options.requeueAttempts<100){log(options.requeueAttempts," - img slide not loaded, requeuing slideshow: ",this.src,this.cycleW,this.cycleH);setTimeout(function(){$(o.s,o.c).cycle(options);},opts.requeueTimeout);requeue=true;return false;}else{log("could not determine size of image: "+this.src,this.cycleW,this.cycleH);}}}return true;});if(requeue){return false;}opts.cssBefore=opts.cssBefore||{};opts.animIn=opts.animIn||{};opts.animOut=opts.animOut||{};$slides.not(":eq("+first+")").css(opts.cssBefore);if(opts.cssFirst){$($slides[first]).css(opts.cssFirst);}if(opts.timeout){opts.timeout=parseInt(opts.timeout);if(opts.speed.constructor==String){opts.speed=$.fx.speeds[opts.speed]||parseInt(opts.speed);}if(!opts.sync){opts.speed=opts.speed/2;}var buffer=opts.fx=="shuffle"?500:250;while((opts.timeout-opts.speed)<buffer){opts.timeout+=opts.speed;}}if(opts.easing){opts.easeIn=opts.easeOut=opts.easing;}if(!opts.speedIn){opts.speedIn=opts.speed;}if(!opts.speedOut){opts.speedOut=opts.speed;}opts.slideCount=els.length;opts.currSlide=opts.lastSlide=first;if(opts.random){if(++opts.randomIndex==els.length){opts.randomIndex=0;}opts.nextSlide=opts.randomMap[opts.randomIndex];}else{if(opts.backwards){opts.nextSlide=opts.startingSlide==0?(els.length-1):opts.startingSlide-1;}else{opts.nextSlide=opts.startingSlide>=(els.length-1)?0:opts.startingSlide+1;}}if(!opts.multiFx){var init=$.fn.cycle.transitions[opts.fx];if($.isFunction(init)){init($cont,$slides,opts);}else{if(opts.fx!="custom"&&!opts.multiFx){log("unknown transition: "+opts.fx,"; slideshow terminating");return false;}}}var e0=$slides[first];if(opts.before.length){opts.before[0].apply(e0,[e0,e0,opts,true]);}if(opts.after.length>1){opts.after[1].apply(e0,[e0,e0,opts,true]);}if(opts.next){$(opts.next).bind(opts.prevNextEvent,function(){return advance(opts,opts.rev?-1:1);});}if(opts.prev){$(opts.prev).bind(opts.prevNextEvent,function(){return advance(opts,opts.rev?1:-1);});}if(opts.pager||opts.pagerAnchorBuilder){buildPager(els,opts);}exposeAddSlide(opts,els);return opts;}function saveOriginalOpts(opts){opts.original={before:[],after:[]};opts.original.cssBefore=$.extend({},opts.cssBefore);opts.original.cssAfter=$.extend({},opts.cssAfter);opts.original.animIn=$.extend({},opts.animIn);opts.original.animOut=$.extend({},opts.animOut);$.each(opts.before,function(){opts.original.before.push(this);});$.each(opts.after,function(){opts.original.after.push(this);});}function supportMultiTransitions(opts){var i,tx,txs=$.fn.cycle.transitions;if(opts.fx.indexOf(",")>0){opts.multiFx=true;opts.fxs=opts.fx.replace(/\s*/g,"").split(",");for(i=0;i<opts.fxs.length;i++){var fx=opts.fxs[i];tx=txs[fx];if(!tx||!txs.hasOwnProperty(fx)||!$.isFunction(tx)){log("discarding unknown transition: ",fx);opts.fxs.splice(i,1);i--;}}if(!opts.fxs.length){log("No valid transitions named; slideshow terminating.");return false;}}else{if(opts.fx=="all"){opts.multiFx=true;opts.fxs=[];for(p in txs){tx=txs[p];if(txs.hasOwnProperty(p)&&$.isFunction(tx)){opts.fxs.push(p);}}}}if(opts.multiFx&&opts.randomizeEffects){var r1=Math.floor(Math.random()*20)+30;for(i=0;i<r1;i++){var r2=Math.floor(Math.random()*opts.fxs.length);opts.fxs.push(opts.fxs.splice(r2,1)[0]);}debug("randomized fx sequence: ",opts.fxs);}return true;}function exposeAddSlide(opts,els){opts.addSlide=function(newSlide,prepend){var $s=$(newSlide),s=$s[0];if(!opts.autostopCount){opts.countdown++;}els[prepend?"unshift":"push"](s);if(opts.els){opts.els[prepend?"unshift":"push"](s);}opts.slideCount=els.length;$s.css("position","absolute");$s[prepend?"prependTo":"appendTo"](opts.$cont);if(prepend){opts.currSlide++;opts.nextSlide++;}if(!$.support.opacity&&opts.cleartype&&!opts.cleartypeNoBg){clearTypeFix($s);}if(opts.fit&&opts.width){$s.width(opts.width);}if(opts.fit&&opts.height&&opts.height!="auto"){$slides.height(opts.height);}s.cycleH=(opts.fit&&opts.height)?opts.height:$s.height();s.cycleW=(opts.fit&&opts.width)?opts.width:$s.width();$s.css(opts.cssBefore);if(opts.pager||opts.pagerAnchorBuilder){$.fn.cycle.createPagerAnchor(els.length-1,s,$(opts.pager),els,opts);}if($.isFunction(opts.onAddSlide)){opts.onAddSlide($s);}else{$s.hide();}};}$.fn.cycle.resetState=function(opts,fx){fx=fx||opts.fx;opts.before=[];opts.after=[];opts.cssBefore=$.extend({},opts.original.cssBefore);opts.cssAfter=$.extend({},opts.original.cssAfter);opts.animIn=$.extend({},opts.original.animIn);opts.animOut=$.extend({},opts.original.animOut);opts.fxFn=null;$.each(opts.original.before,function(){opts.before.push(this);});$.each(opts.original.after,function(){opts.after.push(this);});var init=$.fn.cycle.transitions[fx];if($.isFunction(init)){init(opts.$cont,$(opts.elements),opts);}};function go(els,opts,manual,fwd){if(manual&&opts.busy&&opts.manualTrump){debug("manualTrump in go(), stopping active transition");$(els).stop(true,true);opts.busy=false;}if(opts.busy){debug("transition active, ignoring new tx request");return;}var p=opts.$cont[0],curr=els[opts.currSlide],next=els[opts.nextSlide];if(p.cycleStop!=opts.stopCount||p.cycleTimeout===0&&!manual){return;}if(!manual&&!p.cyclePause&&!opts.bounce&&((opts.autostop&&(--opts.countdown<=0))||(opts.nowrap&&!opts.random&&opts.nextSlide<opts.currSlide))){if(opts.end){opts.end(opts);}return;}var changed=false;if((manual||!p.cyclePause)&&(opts.nextSlide!=opts.currSlide)){changed=true;var fx=opts.fx;curr.cycleH=curr.cycleH||$(curr).height();curr.cycleW=curr.cycleW||$(curr).width();next.cycleH=next.cycleH||$(next).height();next.cycleW=next.cycleW||$(next).width();if(opts.multiFx){if(opts.lastFx==undefined||++opts.lastFx>=opts.fxs.length){opts.lastFx=0;}fx=opts.fxs[opts.lastFx];opts.currFx=fx;}if(opts.oneTimeFx){fx=opts.oneTimeFx;opts.oneTimeFx=null;}$.fn.cycle.resetState(opts,fx);if(opts.before.length){$.each(opts.before,function(i,o){if(p.cycleStop!=opts.stopCount){return;}o.apply(next,[curr,next,opts,fwd]);});}var after=function(){$.each(opts.after,function(i,o){if(p.cycleStop!=opts.stopCount){return;}o.apply(next,[curr,next,opts,fwd]);});};debug("tx firing; currSlide: "+opts.currSlide+"; nextSlide: "+opts.nextSlide);opts.busy=1;if(opts.fxFn){opts.fxFn(curr,next,opts,after,fwd,manual&&opts.fastOnEvent);}else{if($.isFunction($.fn.cycle[opts.fx])){$.fn.cycle[opts.fx](curr,next,opts,after,fwd,manual&&opts.fastOnEvent);}else{$.fn.cycle.custom(curr,next,opts,after,fwd,manual&&opts.fastOnEvent);}}}if(changed||opts.nextSlide==opts.currSlide){opts.lastSlide=opts.currSlide;if(opts.random){opts.currSlide=opts.nextSlide;if(++opts.randomIndex==els.length){opts.randomIndex=0;}opts.nextSlide=opts.randomMap[opts.randomIndex];if(opts.nextSlide==opts.currSlide){opts.nextSlide=(opts.currSlide==opts.slideCount-1)?0:opts.currSlide+1;}}else{if(opts.backwards){var roll=(opts.nextSlide-1)<0;if(roll&&opts.bounce){opts.backwards=!opts.backwards;opts.nextSlide=1;opts.currSlide=0;}else{opts.nextSlide=roll?(els.length-1):opts.nextSlide-1;opts.currSlide=roll?0:opts.nextSlide+1;}}else{var roll=(opts.nextSlide+1)==els.length;if(roll&&opts.bounce){opts.backwards=!opts.backwards;opts.nextSlide=els.length-2;opts.currSlide=els.length-1;}else{opts.nextSlide=roll?0:opts.nextSlide+1;opts.currSlide=roll?els.length-1:opts.nextSlide-1;}}}}if(changed&&opts.pager){opts.updateActivePagerLink(opts.pager,opts.currSlide,opts.activePagerClass);}var ms=0;if(opts.timeout&&!opts.continuous){ms=getTimeout(els[opts.currSlide],els[opts.nextSlide],opts,fwd);}else{if(opts.continuous&&p.cyclePause){ms=10;}}if(ms>0){p.cycleTimeout=setTimeout(function(){go(els,opts,0,(!opts.rev&&!opts.backwards));},ms);}}$.fn.cycle.updateActivePagerLink=function(pager,currSlide,clsName){$(pager).each(function(){$(this).children().removeClass(clsName).eq(currSlide).addClass(clsName);});};function getTimeout(curr,next,opts,fwd){if(opts.timeoutFn){var t=opts.timeoutFn.call(curr,curr,next,opts,fwd);while((t-opts.speed)<250){t+=opts.speed;}debug("calculated timeout: "+t+"; speed: "+opts.speed);if(t!==false){return t;}}return opts.timeout;}$.fn.cycle.next=function(opts){advance(opts,opts.rev?-1:1);};$.fn.cycle.prev=function(opts){advance(opts,opts.rev?1:-1);};function advance(opts,val){var els=opts.elements;var p=opts.$cont[0],timeout=p.cycleTimeout;if(timeout){clearTimeout(timeout);p.cycleTimeout=0;}if(opts.random&&val<0){opts.randomIndex--;if(--opts.randomIndex==-2){opts.randomIndex=els.length-2;}else{if(opts.randomIndex==-1){opts.randomIndex=els.length-1;}}opts.nextSlide=opts.randomMap[opts.randomIndex];}else{if(opts.random){opts.nextSlide=opts.randomMap[opts.randomIndex];}else{opts.nextSlide=opts.currSlide+val;if(opts.nextSlide<0){if(opts.nowrap){return false;}opts.nextSlide=els.length-1;}else{if(opts.nextSlide>=els.length){if(opts.nowrap){return false;}opts.nextSlide=0;}}}}var cb=opts.onPrevNextEvent||opts.prevNextClick;if($.isFunction(cb)){cb(val>0,opts.nextSlide,els[opts.nextSlide]);}go(els,opts,1,val>=0);return false;}function buildPager(els,opts){var $p=$(opts.pager);$.each(els,function(i,o){$.fn.cycle.createPagerAnchor(i,o,$p,els,opts);});opts.updateActivePagerLink(opts.pager,opts.startingSlide,opts.activePagerClass);}$.fn.cycle.createPagerAnchor=function(i,el,$p,els,opts){var a;if($.isFunction(opts.pagerAnchorBuilder)){a=opts.pagerAnchorBuilder(i,el);debug("pagerAnchorBuilder("+i+", el) returned: "+a);}else{a='<a href="#">'+(i+1)+"</a>";}if(!a){return;}var $a=$(a);if($a.parents("body").length===0){var arr=[];if($p.length>1){$p.each(function(){var $clone=$a.clone(true);$(this).append($clone);arr.push($clone[0]);});$a=$(arr);}else{$a.appendTo($p);}}opts.pagerAnchors=opts.pagerAnchors||[];opts.pagerAnchors.push($a);$a.bind(opts.pagerEvent,function(e){e.preventDefault();opts.nextSlide=i;var p=opts.$cont[0],timeout=p.cycleTimeout;if(timeout){clearTimeout(timeout);p.cycleTimeout=0;}var cb=opts.onPagerEvent||opts.pagerClick;if($.isFunction(cb)){cb(opts.nextSlide,els[opts.nextSlide]);}go(els,opts,1,opts.currSlide<i);});if(!/^click/.test(opts.pagerEvent)&&!opts.allowPagerClickBubble){$a.bind("click.cycle",function(){return false;});}if(opts.pauseOnPagerHover){$a.hover(function(){opts.$cont[0].cyclePause++;},function(){opts.$cont[0].cyclePause--;});}};$.fn.cycle.hopsFromLast=function(opts,fwd){var hops,l=opts.lastSlide,c=opts.currSlide;if(fwd){hops=c>l?c-l:opts.slideCount-l;}else{hops=c<l?l-c:l+opts.slideCount-c;}return hops;};function clearTypeFix($slides){debug("applying clearType background-color hack");function hex(s){s=parseInt(s).toString(16);return s.length<2?"0"+s:s;}function getBg(e){for(;e&&e.nodeName.toLowerCase()!="html";e=e.parentNode){var v=$.css(e,"background-color");if(v.indexOf("rgb")>=0){var rgb=v.match(/\d+/g);return"#"+hex(rgb[0])+hex(rgb[1])+hex(rgb[2]);}if(v&&v!="transparent"){return v;}}return"#ffffff";}$slides.each(function(){$(this).css("background-color",getBg(this));});}$.fn.cycle.commonReset=function(curr,next,opts,w,h,rev){$(opts.elements).not(curr).hide();opts.cssBefore.opacity=1;opts.cssBefore.display="block";if(w!==false&&next.cycleW>0){opts.cssBefore.width=next.cycleW;}if(h!==false&&next.cycleH>0){opts.cssBefore.height=next.cycleH;}opts.cssAfter=opts.cssAfter||{};opts.cssAfter.display="none";$(curr).css("zIndex",opts.slideCount+(rev===true?1:0));$(next).css("zIndex",opts.slideCount+(rev===true?0:1));};$.fn.cycle.custom=function(curr,next,opts,cb,fwd,speedOverride){var $l=$(curr),$n=$(next);var speedIn=opts.speedIn,speedOut=opts.speedOut,easeIn=opts.easeIn,easeOut=opts.easeOut;$n.css(opts.cssBefore);if(speedOverride){if(typeof speedOverride=="number"){speedIn=speedOut=speedOverride;}else{speedIn=speedOut=1;}easeIn=easeOut=null;}var fn=function(){$n.animate(opts.animIn,speedIn,easeIn,cb);};$l.animate(opts.animOut,speedOut,easeOut,function(){if(opts.cssAfter){$l.css(opts.cssAfter);}if(!opts.sync){fn();}});if(opts.sync){fn();}};$.fn.cycle.transitions={fade:function($cont,$slides,opts){$slides.not(":eq("+opts.currSlide+")").css("opacity",0);opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts);opts.cssBefore.opacity=0;});opts.animIn={opacity:1};opts.animOut={opacity:0};opts.cssBefore={top:0,left:0};}};$.fn.cycle.ver=function(){return ver;};$.fn.cycle.defaults={fx:"fade",timeout:4000,timeoutFn:null,continuous:0,speed:1000,speedIn:null,speedOut:null,next:null,prev:null,onPrevNextEvent:null,prevNextEvent:"click.cycle",pager:null,onPagerEvent:null,pagerEvent:"click.cycle",allowPagerClickBubble:false,pagerAnchorBuilder:null,before:null,after:null,end:null,easing:null,easeIn:null,easeOut:null,shuffle:null,animIn:null,animOut:null,cssBefore:null,cssAfter:null,fxFn:null,height:"auto",startingSlide:0,sync:1,random:0,fit:0,containerResize:1,pause:0,pauseOnPagerHover:0,autostop:0,autostopCount:0,delay:0,slideExpr:null,cleartype:!$.support.opacity,cleartypeNoBg:false,nowrap:0,fastOnEvent:0,randomizeEffects:1,rev:0,manualTrump:true,requeueOnImageNotLoaded:true,requeueTimeout:250,activePagerClass:"activeSlide",updateActivePagerLink:null,backwards:false};})(jQuery); 
```

不知道该怎么做才能修复它，或者即使它是在 IE 中破坏网站的原因。我将不胜感激在这件事上的任何建议。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:14:14.510

只是猜测，但是……如果您使用的是 JQuery 1.9 或更高版本，请将 JQuery Migrate 添加到您的代码中，看看它是否可以工作。 [http://code.jquery.com/jquery-migrate-1.1.1.min.js](http://code.jquery.com/jquery-migrate-1.1.1.min.js)

我是说因为这个（你的代码的一部分）`$.browser.msie`。它是 JQuery 的一部分，不再受支持。 [http://api.jquery.com/jQuery.browser/](http://api.jquery.com/jQuery.browser/)

另一个很好的链接[http://forum.jquery.com/topic/jquery-1-9-breaks-cycle-lite-plugin-1-5-and-1-6](http://forum.jquery.com/topic/jquery-1-9-breaks-cycle-lite-plugin-1-5-and-1-6)

# php - PHP $_GET 性能

> ID：15180930
> 
> 赞同：3
> 
> 时间：2013-03-03T00:07:21.160
> 
> 标签：php, performance

一种选择通常比另一种更快吗？

选项A：`$var = $_GET['param'];`然后`$var`通过脚本引用。 选项 B：通过脚本在每次出现中
引用。 谢谢！`$_GET['param']`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T00:15:41.323

性能差异（如果有的话）将可以忽略不计并且不值得付出努力 - 以至于即使您尝试对其进行微计时，差异也会被随机因素消耗。

然而，选项 A 在创建更可持续的代码方面更好。例如，如果您希望更改 的值，`$var`可以从代码中的一个位置进行。

简而言之，这永远不会成为您程序的瓶颈。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T00:21:03.857

`10000000`以循环为基准

```
$var = "bleh";
for ($i=0; $i<10000000; $i++) {
strlen($var);
} 
```

和

```
$array = array();
$array['blah'] = "bleh";
for ($i=0; $i<10000000; $i++) {
strlen($array['blah']);
} 
```

结果：

*   Var：8.563s - 856.3 纳秒/循环
*   阵列：每个循环 8.699s - 869.9 纳秒

速度差异 1.6%。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T00:28:38.767

这种微优化很少值得考虑。通常最好考虑如何最好地*构建*代码，并将这些问题留给编写语言运行时的人。

如果我们真的想找出更有效的方法，有很多相关的因素：

*   数组访问如何执行`['param']`一次或多次
*   诸如此类的超全局变量`$_GET`是如何实现的
*   如何实现分配（在 PHP 中使用“写入时复制”）
*   你如何传递`$var`你的代码（例如作为一个函数参数）以及*它*是如何实现的
*   您需要多久读取一次变量
*   你多久写一次变量

我敢肯定还有更多；当然，您的程序和运行它的 PHP 运行时都可能在所有这些方面发生变化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T04:07:38.610

同意那些说您担心错误的优化级别的人。（不过，如果您真的想对这类事情着迷，请查看[http://www.phpbench.com/](http://www.phpbench.com/)）

您的第一级优化应该是优化代码的可读性和可维护性。人类时钟周期比计算机时钟周期更有价值和昂贵（一般来说）。作为额外的奖励，您会非常惊喜地发现，人类时钟周期的优化频率也会使代码显着加快。

我强烈推荐Robert C. Martin 的[Clean Code ，作为编码风格的优秀指南。](https://rads.stackoverflow.com/amzn/click/com/0132350882)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-03T01:21:05.577

A：

```
$var = $_GET['param']; // and then referencing $var through the script. 
```

需要一个恒定的时间，在计算机科学中等于零。

B：参考

```
$_GET['param']; // in each occurrence through the script. 
```

是一种丑陋的方法，只能由“草率”的程序员完成。

假设您必须`$_GET['param']`在单个页面或多个页面中使用 10 次，然后您决定要将 'param' 更改为 'p' 或 'parameter'，那么你就不走运了。

您想将“幻数”和“幻值”初始化为变量（或常量），您可以稍后对其进行编辑，而程序员（无论是您的还是其他人）不必确切知道它是什么.

想象一下，如果程序员会使用

```
if($number == 3.1415) 
```

代替

```
if($number == $pi) 
```

它归结为类似的基础。

所以，不，理论上这两个选项通常都不是更快，但选项 B 稍后会给你带来地狱，而且很难看。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-03-03T00:18:39.503

尽可能使用 $_GET['param']。PHP 必须记住 $_GET['param']。通过创建一个等于 $_GET['param'] 的变量，PHP 现在必须记住两个完全相同的变量。

除非您要更改新变量的值，否则只使用 $_GET['param'] 会更快。（请记住，有些人喜欢创建新变量只是为了便于阅读）

# javascript - 使用 javascript 连续生成 div（图块），除了标记为 0 的大小相同

> ID：15180932
> 
> 赞同：2
> 
> 时间：2013-03-03T00:07:22.753
> 
> 标签：javascript, jquery, css

我正在尝试使用 javascript 连续显示一些 div。为此，我有以下 JScode：

```
var levels = [
    [
        [1,2,0,1,2,1]
    ]
]; 
```

如果为 1 则显示红色 div 块，如果为 2 则显示蓝色 div 块，如果为 0 则不显示任何块。这一切都好。div 为 100 x100px，它生成的 HTML 如下所示：

```
<div id="plane">
  <div class="tile tile1" style="left:0px; top:0px"></div>
  <div class="tile tile2" style="left:100px; top:0px"></div>
  <div class="tile tile1" style="left:300px; top:0px"></div>
  <div class="tile tile2" style="left:400px; top:0px"></div>
  <div class="tile tile1" style="left:500px; top:0px"></div>
</div> 
```

由这部分 JS 代码完成：

```
this.getHTML = function () {
        return '<div class="tile tile'+this.type+'" style="left:'+this.x*100+'px; top:'+this.y*100+'px"></div>';
    }; 
```

如您所见，未显示 0 块。我遇到的问题是这个 0 块也是 100x100px，我希望它是 50x50px。所以只有 0 块 50x50px，所有其他的应该保持 100x100px 所以它会产生：

```
<div id="plane">
      <div class="tile tile1" style="left:0px; top:0px"></div>
      <div class="tile tile2" style="left:100px; top:0px"></div>
      <div class="tile tile1" style="left:250px; top:0px"></div>
      <div class="tile tile2" style="left:350px; top:0px"></div>
      <div class="tile tile1" style="left:450px; top:0px"></div>
    </div> 
```

但是如何正确地做到这一点？我有点卡在这里。我尝试过调整 CSS 值，但这不起作用。

请看我的小提琴（点击 1 查看块）：http: [//jsfiddle.net/mauricederegt/8aNL9/](http://jsfiddle.net/mauricederegt/8aNL9/)

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T00:37:11.523

把想法大声说出来..

在宽度/高度可变的情况下，如果图块必须知道（或计算）它自己的 x、y 坐标，它还必须“知道”它之前的所有图块 - 垂直和水平 - 否则您将面临问题你目前有。或者，生成循环必须跟踪“当前”x/y 位置并将其分配给图块。

不管它是如何实现的，在算法上，有一个 100x100px 正方形的预定义网格，其中的瓷砖“知道”它自己的 [i,j] 位置（从中可以计算出它的 x,y 坐标和宽度）是非常不同的拥有一个 nxm px 瓷砖网格。

也许您可以尝试将 x/y 坐标传递给 tile 对象，而不是它的 i,j 位置？

*更新：忍不住玩这个..*

```
loadLevel: function (newLevel) {
    level = newLevel;
    tiles = [];
    var html = [];
    var currentX = 0;
    var currentY = 0;

    for (var i = 0, lngi = levels[level].length; i < lngi; i++) {
        for (var j = 0, lngj = levels[level][i].length; j < lngj; j++) {
            if (levels[level][i][j] > 0) {
                var curIndex = tiles.length;
                tiles[curIndex] = new tile(levels[level][i][j], i, j, curIndex, currentX, currentY);
                html.push(tiles[curIndex].getHTML());
                currentX += tileWidth;
            }
            else if(levels[level][i][j] === 0) {
                currentX += blankWidth;
            }   
        }
        //Start a new row
        currentY += tileHeight;
        currentX = 0;
    }
    el.innerHTML = html.join('');
} 
```

请参阅此小提琴以获取完整的代码清单..
[http://jsfiddle.net/7Yprn/](http://jsfiddle.net/7Yprn/)

请注意，行高是固定的，导致 50x100px 垂直矩形，而不是您在原始问题中请求的 50x50px 间隙：

# android - ListView 内的 Horizo ntalListView

> ID：15180942
> 
> 赞同：1
> 
> 时间：2013-03-03T00:08:40.983
> 
> 标签：android, android-listview

我正在尝试将 Horizo​​ntalListView ( [http://www.dev-smart.com/archives/34](http://www.dev-smart.com/archives/34) ) 添加到 ListView。ListView 使用适配器动态附加新的 Horizo​​ntalListView 行以进行连续垂直滚动。

它几乎可以工作：问题是当 Horizo​​ntalListView 滚动时，ListView 将自动向上或向下滚动并将 Horizo​​ntalListView 放置在视口的顶部或底部边缘，具体取决于它最接近的位置。如何阻止 Horizo​​ntalListView 行在滚动时卡入到位？

我使用 Horizo​​ntalListView 作为“VerticalScrollView”的参考：

```
public class VerticalScrollView extends ListView {

public static interface ScrollListener {
    void onScrollEnd();
}

public VerticalScrollView(Context context) {
    super(context);
    initView();
}

public VerticalScrollView(Context context, AttributeSet attrs) {
    super(context, attrs);
    initView();
}

private synchronized void initView() {
    mTopViewIndex = -1;
    mBottomViewIndex = 0;
    mDisplayOffset = 0;
    mCurrentY = 0;
    mNextY = 0;
    mMaxY = Integer.MAX_VALUE;
    mScroller = new Scroller(getContext());
    setFadingEdgeLength(0);
    setItemsCanFocus(false);
}

@Override
public boolean onInterceptTouchEvent(MotionEvent ev) {
    switch (ev.getAction()) {
    case MotionEvent.ACTION_DOWN:
        mXDistance = mYDistance = 0f;
        mLastX = ev.getX();
        mLastY = ev.getY();
        break;
    case MotionEvent.ACTION_MOVE:
        final float curX = ev.getX();
        final float curY = ev.getY();
        mXDistance += Math.abs(curX - mLastX);
        mYDistance += Math.abs(curY - mLastY);
        mLastX = curX;
        mLastY = curY;
        if(mXDistance > mYDistance) {
            return false;
        }
    }
    return super.onInterceptTouchEvent(ev);
}

@Override
public ListAdapter getAdapter() {
    return mAdapter;
}

@Override
public View getSelectedView() {
    //TODO: implement
    return null;
}

@Override
public void setAdapter(ListAdapter adapter) {
    if(mAdapter != null) {
        mAdapter.unregisterDataSetObserver(mDataObserver);
    }
    mAdapter = adapter;
    mAdapter.registerDataSetObserver(mDataObserver);
    reset();
    super.setAdapter(adapter);
}

private synchronized void reset(){
    initView();
    removeAllViewsInLayout();
    requestLayout();
}

@Override
public void setSelection(int position) {
    //TODO: implement
}

private void addAndMeasureChild(final View child, int viewPos) {
    android.view.ViewGroup.LayoutParams params = child.getLayoutParams();
    if(params == null) {
        params = new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
    }

    addViewInLayout(child, viewPos, params, true);
    child.measure(MeasureSpec.makeMeasureSpec(getWidth(), MeasureSpec.AT_MOST),
            MeasureSpec.makeMeasureSpec(getHeight(), MeasureSpec.AT_MOST));
}

@Override
protected synchronized void onLayout(
        boolean changed,
        int left,
        int top,
        int right,
        int bottom) {
    super.onLayout(changed, left, top, right, bottom);

    if(mAdapter == null){
        return;
    }

    if(mDataChanged){
        int oldCurrentY = mCurrentY;
        initView();
        removeAllViewsInLayout();
        mNextY = oldCurrentY;
        mDataChanged = false;
    }

    if(mScroller.computeScrollOffset()){
        int scrollY = mScroller.getCurrY();
        mNextY = scrollY;
    }

    if(mNextY <= 0){
        mNextY = 0;
        mScroller.forceFinished(true);
    }
    if(mNextY >= mMaxY) {
        mNextY = mMaxY;
        mScroller.forceFinished(true);
    }

    int dy = mCurrentY - mNextY;

    removeNonVisibleItems(dy);
    fillList(dy);
    positionItems(dy);

    mCurrentY = mNextY;

    if(!mScroller.isFinished()){
        post(mRequestLayoutRunnable);
    }
}

private void fillList(final int dy) {
    int edge = 0;
    View child = getChildAt(getChildCount()-1);
    if(child != null) {
        edge = child.getBottom();
    }
    fillListBottom(edge, dy);

    edge = 0;
    child = getChildAt(0);
    if(child != null) {
        edge = child.getTop();
    }
    fillListTop(edge, dy);
}

private void fillListBottom(int bottomEdge, final int dy) {
    while(bottomEdge + dy < getHeight() && mBottomViewIndex < mAdapter.getCount()) {

        View child = mAdapter.getView(mBottomViewIndex, mRemovedViewQueue.poll(), this);
        addAndMeasureChild(child, -1);
        bottomEdge += child.getMeasuredHeight();

        if(mBottomViewIndex == mAdapter.getCount()-1) {
            mMaxY = mCurrentY + bottomEdge - getHeight();
        }

        if (mMaxY < 0) {
            mMaxY = 0;
        }
        mBottomViewIndex++;
    }
}

private void fillListTop(int topEdge, final int dy) {
    while(topEdge + dy > 0 && mTopViewIndex >= 0) {
        View child = mAdapter.getView(mTopViewIndex, mRemovedViewQueue.poll(), this);
        addAndMeasureChild(child, 0);
        topEdge -= child.getMeasuredHeight();
        mTopViewIndex--;
        mDisplayOffset -= child.getMeasuredHeight();
    }
}

private void removeNonVisibleItems(final int dy) {
    View child = getChildAt(0);
    while(child != null && child.getBottom() + dy <= 0) {
        mDisplayOffset += child.getMeasuredHeight();
        mRemovedViewQueue.offer(child);
        removeViewInLayout(child);
        mTopViewIndex++;
        child = getChildAt(0);

    }

    child = getChildAt(getChildCount()-1);
    while(child != null && child.getLeft() + dy >= getHeight()) {
        mRemovedViewQueue.offer(child);
        removeViewInLayout(child);
        mBottomViewIndex--;
        child = getChildAt(getChildCount()-1);
    }
}

private void positionItems(final int dy) {
    if(getChildCount() > 0){
        mDisplayOffset += dy;
        int top = mDisplayOffset;
        for(int i=0;i<getChildCount();i++){
            View child = getChildAt(i);
            int childHeight = child.getMeasuredHeight();
            child.layout(0, top, child.getMeasuredWidth(), top + childHeight);
            top += childHeight + child.getPaddingBottom();
        }
    }
}

public synchronized void scrollTo(int y) {
    mScroller.startScroll(0, mNextY, 0, y - mNextY);
    requestLayout();
}

public boolean mAlwaysOverrideTouch = true;
protected ListAdapter mAdapter;
private int mTopViewIndex = -1;
private int mBottomViewIndex = 0;
protected int mCurrentY;
protected int mNextY;
private int mMaxY = Integer.MAX_VALUE;
private int mDisplayOffset = 0;
protected Scroller mScroller;
private Queue<View> mRemovedViewQueue = new LinkedList<View>();
private boolean mDataChanged = false;
private float mXDistance;
private float mYDistance;
private float mLastX;
private float mLastY;

private Runnable mRequestLayoutRunnable = new Runnable(){

    @Override
    public void run() {
        requestLayout();
    }
};

private DataSetObserver mDataObserver = new DataSetObserver() {

    @Override
    public void onChanged() {
        synchronized(VerticalScrollView.this){
            mDataChanged = true;
        }
        invalidate();
        requestLayout();
    }

    @Override
    public void onInvalidated() {
        reset();
        invalidate();
        requestLayout();
    }
}; 
```

编辑：我可以通过使用普通的 ListView 而不是我的自定义 VerticalScrollView 来完美地工作。当用户向下滚动时，我将从网络填充 ListView。如何管理列表项视图以免内存不足？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:26:01.860

我能够通过将 Horizo​​ntalListViews 附加到 ListView 来获得我想要的行为。然后我包装了我的适配器，该适配器使用 EndlessAdapter 创建了 Horizo​​ntalListViews 以进行连续滚动：

[https://github.com/commonsguy/cwac-endless](https://github.com/commonsguy/cwac-endless)

我确保在我的适配器的 getView 方法中回收视图以解决内存问题。但是，如果我的模型层在堆上占用太多空间，我仍然会耗尽内存。

有谁知道当模型对象离开屏幕时剔除模型对象并在需要再次显示时重新加载它们的好框架？

# java - Java- AWT Applets- 如何在我的程序中更改形状的大小？

> ID：15180944
> 
> 赞同：1
> 
> 时间：2013-03-03T00:09:09.400
> 
> 标签：java, applet, awt

![我的程序](../Images/860d7e35ff38076a89c5394e089f0d71.png)

该程序旨在采用用户决定的形状并根据输入更改其大小。

*我有两个问题。*一种是用户必须将其作为字符串输入，但大小值是整数。如果我将整数转换为字符串，它会在转换时给我一个空异常。（java.lang.Integer.parseInt（未知来源）异常）。）

另一个问题是我不知道在 actionPerfomed 方法中添加什么。由于所有信息只需要转到paint方法。如何将整数值传输到 Paint 方法。

```
import java.io.*;
import java.util.*;
import java.text.*;

import java.awt.*;
import java.awt.event.*;
import java.applet.*;
import java.applet.Applet;

public class ChangeSize extends Applet
    implements ActionListener
{
    Button bttn1 = new Button ("Circle");
    Button bttn2 = new Button ("Square");
    Button bttn3 = new Button ("Triangle");
    Button bttn4 = new Button ("Rectangle");

    Label lab1; // text within applet
    TextField t1; // where user inputs text
    String input;

    int choice;

    public void init ()
    {
        this.setSize (500, 300);

        setBackground (Color.lightGray);

        lab1 = new Label ("Insert the size of the shape:");
        //int Size = Integer.parseInt (input);
        add (lab1);
        t1 = new TextField ();
        add (t1);

        bttn1.addActionListener (this); // circle button
        bttn2.addActionListener (this); // square button
        bttn3.addActionListener (this); // triangle button
        bttn4.addActionListener (this); // rectangle button

        add (bttn1);
        add (bttn2);
        add (bttn3);
        add (bttn4);

    }
    public void paint (Graphics g)
    {
        int xpoints[] = {25, 145, 25, 145, 25}; \
        int ypoints[] = {25, 25, 145, 145, 25};
        int npoints = 5;

        switch (choice)
        {
            case 1:
                if (choice == 1)
                    g.setColor (Color.red);
                g.fillOval (30, 40, 20, 20); // I want it to be (30,40, 20, size). Instead

            case 2:
                if (choice == 2)
                    g.fillRect (20, 40, 100, 100);
            case 3:
                if (choice == 3)
                    g.fillPolygon (xpoints, ypoints, npoints);
            case 4:
                if (choice == 4)
                    g.fillRect (20, 40, 50, 100);

                break;
        }

        showStatus ("Please seclect an option.");
    }
    public void actionPerformed (ActionEvent evt)
    {
        if (evt.getSource () == bttn1)
            choice = 1;
        else if (evt.getSource () == bttn2)
            choice = 2;
        else if (evt.getSource () == bttn3)
            choice = 3;
        else if (evt.getSource () == bttn4)
            choice = 4;

          Size = t1.getText ();

          // I dont know what to put here

        repaint ();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T00:14:34.130

您已接近解决方案，您的评论`// I want it to be (30,40, 20, size). Instead` 是关键。

*   为您的应用程序提供一个或多个 int 类字段来保存您的绘图大小。
*   使用该尺寸在您的绘画程序中设置形状的尺寸。
*   允许用户在 actionPerformed 方法中更改大小。
*   您获得的文本将是一个字符串，您需要先将其解析为一个 int，然后才能通过该`Integer.parseInt(...)`方法使用它。

关于：

> 我有两个问题。一种是用户必须将其作为字符串输入，但大小值是整数。如果我将整数转换为字符串，它会在转换时给我一个空异常。（java.lang.Integer.parseInt（未知来源）异常）。）

问题是你试图解析 int 的地方。您在 init 方法中执行此操作，该方法是创建和构建小程序的方法，这是在用户有时间将输入添加到文本字段之前的*方式。*在 actionPerformed 方法中解析会好得多。

# mysql - 第 1 行的“电话”列的 Django MySQL 超出范围值

> ID：15180949
> 
> 赞同：2
> 
> 时间：2013-03-03T00:09:59.183
> 
> 标签：mysql, sql, database, django, datatable

我到处寻找解决这个问题的方法，因为我无法输入特定大小的整数。

在其他帖子中，人们建议我定义一个自定义`BigInteger`类，但这不是很有帮助。使用模型中的默认`BigInteger`类似乎也不能解决问题。它仍然给我错误

> “第 1 行‘电话’列的值超出范围”

有没有人有任何想法如何解决它？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T01:30:13.970

我通常将电话号码保存为字符串（CharField）。如果您以后使用国际电话号码，则“+15554441234”之类的号码应该是有效的。这就是为什么我认为字符串是更好的选择。

# ruby - 为什么之前:save 回调钩子没有被FactoryGirl.create() 调用？

> ID：15180951
> 
> 赞同：6
> 
> 时间：2013-03-03T00:10:13.267
> 
> 标签：ruby, factory-bot, datamapper

这个简单的例子使用 DataMapper 的`before :save`回调（又名钩子）来增加`callback_count`. callback_count 被初始化为 0 并且应该被回调设置为 1。

当通过以下方式创建 TestObject 时调用此回调：

```
TestObject.create() 
```

但是当 FactoryGirl 通过以下方式创建回调时，会跳过回调：

```
FactoryGirl.create(:test_object) 
```

知道为什么吗？[注意：我正在运行 ruby​​ 1.9.3、factory_girl 4.2.0、data_mapper 1.2.0]

详细信息如下...

## 数据映射器模型

```
# file: models/test_model.rb
class TestModel
  include DataMapper::Resource

  property :id, Serial
  property :callback_count, Integer, :default => 0

  before :save do
    self.callback_count += 1
  end
end 
```

## FactoryGirl 声明

```
# file: spec/factories.rb
FactoryGirl.define do
  factory :test_model do
  end
end 
```

## RSpec 测试

```
# file: spec/models/test_model_spec.rb
require 'spec_helper'

describe "TestModel Model" do
  it 'calls before :save using TestModel.create' do
    test_model = TestModel.create
    test_model.callback_count.should == 1
  end
  it 'fails to call before :save using FactoryGirl.create' do
    test_model = FactoryGirl.create(:test_model)
    test_model.callback_count.should == 1
  end
end 
```

## 测试结果

```
Failures:

  1) TestModel Model fails to call before :save using FactoryGirl.create
     Failure/Error: test_model.callback_count.should == 1
       expected: 1
            got: 0 (using ==)
     # ./spec/models/test_model_spec.rb:10:in `block (2 levels) in <top (required)>'

Finished in 0.00534 seconds
2 examples, 1 failure 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-14T09:42:07.053

至少对于`factory_girl 4.2`（不知道从哪个版本开始支持），通过使用[自定义方法来持久化对象](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#custom-methods-to-persist-objects)还有另一种解决方法。正如[在 Github 中对有关它的问题的回应中](https://github.com/thoughtbot/factory_girl/issues/372#issuecomment-14725942)所述，这只是调用`save`而不是`save!`.

```
FactoryGirl.define do
  to_create do |instance|
    if !instance.save
      raise "Save failed for #{instance.class}"
    end
  end
end 
```

当然它并不理想，因为它应该在 FactoryGirl 核心中起作用，但我认为现在它是最好的解决方案，目前，我与其他测试没有冲突......

需要注意的是，您必须在每个工厂中定义它（但对我来说这不是不方便）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T20:56:21.730

解决了。

@Jim Stewart 向我指出了[这个 FactoryGirl 问题](https://github.com/thoughtbot/factory_girl/issues/372#issuecomment-5531659)，它说“FactoryGirl 在 [它创建的] 实例上调用保存！”。在 DataMapper 的世界中，`save!`明确地不*运行*回调——这解释了我所看到的行为。（但它没有解释为什么它适用于@enthrops！）

同一个链接提供了一些专门针对 DataMapper 的解决方法，我可能会选择其中一个。不过，如果未修改的 FactoryGirl 与 DataMapper 配合得很好，那就太好了。

## 更新

这是thoughtbot 的 Joshua Clayton 建议的代码。我将它添加到我的`spec/factories.rb`文件中，`test_model_spec.rb`现在通过没有错误。凉豆。

```
# file: factories.rb
class CreateForDataMapper
  def initialize
    @default_strategy = FactoryGirl::Strategy::Create.new
  end

  delegate :association, to: :@default_strategy

  def result(evaluation)
    evaluation.singleton_class.send :define_method, :create do |instance|
      instance.save ||
        raise(instance.errors.send(:errors).map{|attr,errors| "- #{attr}: #{errors}"    }.join("\n"))
    end

    @default_strategy.result(evaluation)
  end
end

FactoryGirl.register_strategy(:create, CreateForDataMapper) 
```

## 更新 2

出色地。也许我说得太早了。添加 CreateForDataMapper 修复了该特定测试，但似乎破坏了其他测试。所以我暂时不回答我的问题。其他人有好的解决方案吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-22T21:12:29.017

使用 build 来构建您的对象，然后手动调用 save ...

```
t = build(:test_model)
t.save 
```

# objective-c - 目标 C：@property 在再次加载 viewDidLoad 后消失

> ID：15180952
> 
> 赞同：0
> 
> 时间：2013-03-03T00:10:17.653
> 
> 标签：objective-c, variables, properties

我是应用程序开发的新手，正在开发我的第一个真正的应用程序。我以为我理解了头文件中的属性变量，但我并没有真正了解这里发生了什么......我有一个解决方案，但不明白它为什么会起作用。

我从另一个 ViewController 传递了一个字符串，并将它写在我的属性变量中：

**视图控制器.h：**

```
@property(weak, nonatomic) NSString *Gender; 
```

现在我的 viewDidLoad ( **ViewController.m** ) 开始了：

```
- (void)viewDidLoad{ [super viewDidLoad];

self.TestLabel.text = _Gender;  ...} 
```

一切都很好，标签显示了我的字符串。但是当我按下我的按钮“重置”（仍然是 ViewController.m）时：

```
- (IBAction)ButtonReset:(id)sender { [self viewDidLoad] } 
```

一切都像以前一样工作，但我的标签是空的，它就像字符串不存在一样。

**我通过尝试提出的解决方案：**

在我的 ViewController.m 中添加一个全局变量

```
NSString *boygirl; 
```

然后将我的原始代码更改为：

```
- (void)viewDidLoad{ [super viewDidLoad];   
boygirl = _Gender;
self.TestLabel.text = boygirl; ...} 
```

......为什么会这样？有没有更优雅的方式？如果在我的原始代码中无法调用 Gender ......为什么 boygirl 可以再次获得 Gender ？

非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T00:20:14.640

您的属性被声明为“弱”，这意味着一旦没有其他对同一字符串的引用，您的属性将设置为 nil。听起来你的意思是“强壮”。

此外，您不应该自己调用 viewDidLoad，并且您的属性名称确实应该以小写字母开头。这些不是您问题的根源，但我认为早期学习的好东西。

# mysql - mysql where子句上的json字段

> ID：15180954
> 
> 赞同：1
> 
> 时间：2013-03-03T00:10:27.833
> 
> 标签：mysql, json, select

如何获取包含`apiData`和内部的数据`"method":"transfer"`

我的字段名称是详细信息，它包含以下数据：

```
{"paymentMethodData":{"id":"3","api_id":"2","account_id":null,"account_ids":null,"installment_state":null,"name_1":"Havale"},"apiData":{"id":"2","method":"transfer","name":"Havale"}} 
```

此查询有效，但如果其他选项包含`"method":"transfer"`，它会得到。它不应该获取数据。如果它有`apiData`option 和 inside `"method":"transfer"`，它应该得到：

```
SELECT * FROM task_payment_actions AS tpa
INNER JOIN task_payment_action_detail AS tpad ON tpad.task_payment_action_id=tpa.id
WHERE tpad.detail REGEXP '(.*\"method\":\"transfer\".*)' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T07:24:01.443

这应该可以工作正如你所说，你的方法：“转移”应该在 apiData 我根据你给定的字符串制作正则表达式。

```
REGEXP '.*"apiData":{[",a-zA-Z0-9]*"method":"transfer"'
REGEXP '.*"apiData":{[",a-zA-Z0-9]*"method":"transfer"[",a-zA-Z0-9]*}' 
```

# c# - 从 C# 向进程发送 CTRL_C/SIGINT

> ID：15180956
> 
> 赞同：2
> 
> 时间：2013-03-03T00:10:49.343
> 
> 标签：c#, console, pinvoke

我想中断通过 cmd.exe 运行的命令。在下面的代码中，我以 ping www.stackoverflow.com -t 为例。

```
 public void Run()
    {
        System.Diagnostics.ProcessStartInfo si = new System.Diagnostics.ProcessStartInfo("cmd.exe");

        si.RedirectStandardInput = true;
        si.RedirectStandardOutput = true;
        si.RedirectStandardError = true;
        si.UseShellExecute = false;
        si.CreateNoWindow = false;
        //si.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;

        System.Diagnostics.Process console = new Process();
        console.StartInfo = si;

        console.EnableRaisingEvents = true;
        console.OutputDataReceived += proc_OutputDataReceived;
        console.ErrorDataReceived += proc_ErrorDataReceived;

        console.Start();

        console.BeginOutputReadLine();
        console.BeginErrorReadLine();

        console.StandardInput.WriteLine("ping www.stackoverflow.com -t");

        Thread.Sleep(4000);
        bool success = GenerateConsoleCtrlEvent((uint)0, (uint)console.SessionId);
        if (!success)
        {
            MessageBox.Show("Error Code: " + Marshal.GetLastWin32Error().ToString());
        }

        char asdf = (char)0x3;

        console.StandardInput.WriteLine('\x3');
        console.StandardInput.WriteLine(asdf);
        console.StandardInput.Write(asdf);

        //console.StandardInput.Close();

        console.StandardInput.WriteLine(@"exit");
        console.WaitForExit();
    } 
```

GenerateConsoleCtrlEvent 的错误代码是 6。

我已按照以下说明进行操作：

1.  [我可以向 Windows 上的应用程序发送 ctrl-C (SIGINT) 吗？](https://stackoverflow.com/questions/813086/can-i-send-a-ctrl-c-sigint-to-an-application-on-windows)

2.  [http://pastebin.com/vQuWQD8F](http://pastebin.com/vQuWQD8F)

3.  [如何将密钥而不是字符发送到进程？](https://stackoverflow.com/questions/2274668/how-to-send-keys-instead-of-characters-to-a-process)

但是，我无法中断该过程。

非常感谢任何帮助，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:15:32.833

这可能是向应用程序发送密钥以及其他一些消息时非常常见的问题。请记住，如果您发送到的应用程序具有比您的程序更高的权限评估，它通常不会成功发送密钥或消息。尝试在管理权限下运行您的程序。或者，如果您通过 Visual Studio 进行调试，请在管理权限下运行 Visual Studio。

***编辑：***

看到这不是您的问题，您想看看使用[此处](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicecontroller%28VS.80%29.aspx)`ServiceController`记录的类。它允许比它更精细的控制，并且强烈建议在这些情况下保持可靠性。我会留下我以前的答案，只是因为它是一个常见问题，其他人可能会觉得有帮助`Process`

这里有两个教程可以帮助您入门：

[http://www.codeproject.com/Articles/31688/Using-the-ServiceController-in-C-to-stop-and-start](http://www.codeproject.com/Articles/31688/Using-the-ServiceController-in-C-to-stop-and-start) [http://www.c-sharpcorner.com/uploadfile/mahesh/servicecontroller-in -C-夏普/](http://www.c-sharpcorner.com/uploadfile/mahesh/servicecontroller-in-C-Sharp/)

希望这对你有帮助！

# css - Css字体不会在线导入

> ID：15180959
> 
> 赞同：-1
> 
> 时间：2013-03-03T00:11:03.343
> 
> 标签：css, font-face

我有一个带有以下代码的导入css字体：

```
@font-face
{
    font-family: font;
    src: url('myriad pro/myriad pro/MyriadWebPro.ttf'),
    url('myriad pro/myriad pro/MyriadWebPro.ttf');
} 
```

问题是在线不起作用但在本地起作用。导致问题的原因是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:19:14.767

尝试重命名文件路径，例如--->“myriad-pro/myriad-pro/MyriadWebPro.ttf”。是你的css文件在字体所在的文件夹中。检查您的路径是否正确。

PS：删除底部的网址（在第三行。）。当我使用 font-face 时，我只使用两个。例子：`font-family: Consolas; src: url('Consolas.ttf');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-27T02:18:01.347

```
@font-face
{
    font-family: MyriadPro; /* just declares a font in your stylesheet */
    src: url('myriad pro/myriad pro/MyriadWebPro.ttf'),
    url('myriad pro/myriad pro/MyriadWebPro.ttf');
}

body 
{
    /* now you need to use it */
    font-family: MyriadPro, sans-serif;
    /* so name it something useful, instead of just "font" */
} 
```

回答老问题

对于那些来照顾的人

# vb.net - 带有响应的串行连接更新线

> ID：15180962
> 
> 赞同：1
> 
> 时间：2013-03-03T00:11:18.247
> 
> 标签：vb.net, serial-port, newline

我有一个与设备的串行连接，但无法处理来自设备的响应。

如果我使用超级终端并将命令发送`TIME`到设备，我会得到如下响应；

```
TIME:13:30:30 
```

这将继续在同一行更新。当我尝试使用我的应用程序执行此操作时，取决于我是使用 RTB 还是 TB 来显示响应，我会得到；

实时出价；

```
TIME:13:30:30
TIME:13:30:31
TIME:13:30:32
TIME:13:30:33
TIME:13:30:34 
```

或结核病；

```
TIME:13:30:30TIME:13:30:31TIME:13:30:32TIME:13:30:33TIME:13:30:34 
```

代码是；

```
Private Sub SerialPort1_DataReceived(ByVal sender As Object, ByVal e As System.IO.Ports.SerialDataReceivedEventArgs) Handles SerialPort1.DataReceived
    ReceivedText(SerialPort1.ReadExisting()) 
End Sub

Private Sub ReceivedText(ByVal [text] As String)
    If Me.RichTextBox1.InvokeRequired Then
        Dim x As New SetTextCallback(AddressOf ReceivedText)
        Me.Invoke(x, New Object() {(text)})
    Else
        RichTextBox1.AppendText([text])
        TextBox1.AppendText([text])
    End If
End Sub 
```

有什么方法可以得到与使用超级终端时相同的响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:50:42.647

我的方法是将数据累积到 a 中`StringBuilder`，直到您收到包含字段分隔符的事件。然后在字段分隔符处截取`StringBuilder`二分，将分隔符前的数据全部设置到消息框的Text属性中，然后继续处理。这样的事情应该做（伪代码如下）

```
StringBuilder builder;

SerialPort1_DataReceived()
    receivedData = SerialPort1.ReadExisting()
    builder.Append(receivedData)

    if receivedData contains delimiter
        timeData = builder.ToString().Split(delimiter)
        ReceivedText(timedata[0])
        builder = new StringBuilder(timedata[1])
    end
end 
```

所以我们从串口读取每个调度到我们的缓冲区。如果我们注意到它包含新时间值开始的指标，我们拆分指标，将文本框设置为包含缓冲区的开头，然后清除缓冲区并重新插入其余部分。

在 ReceivedText 中，你会改变

```
RichTextBox1.AppendText([text]) 
```

至

```
RichTextBox1.Text = [text] 
```

对缺少 VB.NET 代码表示歉意，我对这种语言很生疏，所以这可能更容易理解。如果您有任何问题，或者这是否有效，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T12:28:56.367

确保您的文本框 (TB) 有

```
textBox1.Multiline = True 
textBox1.AcceptsReturn = True 
```

由于 TB 通常用于输入，因此可能会使用返回而不是显示来表示用户输入完成。

* * *

不太可能的追求途径。

传入的数据`TIME:13:30:30`有一个 EOLine，可以是 CR、LF 或 CR+LF。 `ReadExisting()`输入数据似乎没有任何问题，因此这不太可能是串行数据问题，除了一个额外/意外的 EOL 字符可能潜伏在`text`（在 CR + LF 情况下）并且 TB/RTB 配置为处理他们不同。简单地注意到`text`将（in）验证这个问题的预期长度。

* * *

注释：
TB“从输入缓冲区中删除了 NewLine 值。”
NewLine 的值是可变的。默认为换行符 (NewLine)。

# android - 同一活动中的多个 android-menudrawer

> ID：15180963
> 
> 赞同：1
> 
> 时间：2013-03-03T00:11:33.553
> 
> 标签：android, android-activity, menu, drawer

[我正在使用https://github.com/SimonVT/android-menudrawer](https://github.com/SimonVT/android-menudrawer)中的 menudrawer 。

当我尝试使用适当的手势从顶部和底部显示菜单时，我只得到一个响应。你知道在同一个活动中是否可以使用超过 1 个菜单吗？

```
 mMenuDrawer = MenuDrawer.attach(this, MenuDrawer.MENU_DRAG_CONTENT, Position.TOP);
    mMenuDrawer.setTouchMode(MenuDrawer.TOUCH_MODE_FULLSCREEN);
    mMenuDrawer.setContentView(R.layout.activity_main);
    mMenuDrawer.setMenuView(R.layout.mt_main);

    mMenuDrawer2 = MenuDrawer.attach(this, MenuDrawer.MENU_DRAG_CONTENT, Position.BOTTOM);
    mMenuDrawer2.setTouchMode(MenuDrawer.TOUCH_MODE_FULLSCREEN);
    mMenuDrawer2.setContentView(R.layout.activity_main);
    mMenuDrawer2.setMenuView(R.layout.mb_main); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T08:46:04.633

我在我的活动中使用了两个菜单抽屉，我按照以下方式使用它们（它对我有用）

```
mMenuDrawer = MenuDrawer.attach(this, MenuDrawer.MENU_DRAG_CONTENT, Position.TOP);
        mMenuDrawer.setTouchMode(MenuDrawer.TOUCH_MODE_FULLSCREEN);
        mMenuDrawer.setDropShadowEnabled(false);

mMenuDrawerRight = MenuDrawer.attach(this, MenuDrawer.MENU_DRAG_CONTENT, Position.RIGHT);
        mMenuDrawerRight.setTouchMode(MenuDrawer.TOUCH_MODE_BEZEL );
        mMenuDrawerRight.setTouchBezelSize(10);
        mMenuDrawerRight.setDropShadowEnabled(false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T00:26:18.150

如果图书馆支持这样的事情`MenuDrawer.TOUCH_MODE_FULLSCREEN`根本无济于事......试试`MenuDrawer.TOUCH_MODE_BEZEL`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-16T13:50:51.603

可以将两个`MenuDrawer`（左侧和右侧）附加到同一活动

MenuDrawer 的默认模式是，`MENU_DRAG_CONTENT`但我们需要使用`MENU_DRAG_WINDOW`

**注意：不要为 MenuDrawers 设置 ContentView**

```
//In onCreate() of the activity
MenuDrawer slidingMenuLeft = MenuDrawer.attach(this, MenuDrawer.Type.OVERLAY, Position.LEFT, MenuDrawer.MENU_DRAG_WINDOW);
slidingMenuLeft.setMenuView(R.layout.navigation_menu_left); // Set layout for Left menu

MenuDrawer slidingMenuRight = MenuDrawer.attach(this, MenuDrawer.Type.OVERLAY, Position.RIGHT, MenuDrawer.MENU_DRAG_WINDOW);
slidingMenuRight.setMenuView(R.layout.navigation_menu_right);  // Set layout for Right menu 
```

我还没有用触摸模式测试过这个`MenuDrawer.TOUCH_MODE_FULLSCREEN`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T20:11:18.873

最后我检查了一下，MenuDrawer 没有正式支持多个抽屉而不可能使用某种 hack。[SlidngMenu](https://github.com/jfeinstein10/SlidingMenu)确实支持在您想要的任何地方添加多个抽屉。我认为 MenuDrawer 性能更好，但 SlidingMenu 为您提供了更多选择和灵活性。

# javascript - JavaScript 范围未分配变量

> ID：15180967
> 
> 赞同：0
> 
> 时间：2013-03-03T00:12:05.783
> 
> 标签：javascript, scoping

我正在用 JS 编写一个函数，但变量**标记**有问题。

编码：

```
 function piano(numero, link) {

            var marker;
            this.marker = marker;

            var immagine = loadImage(link, marker);
            this.immagine = immagine

            function createMarker() {

                    return new RichMarker({

                           ....

                    });
            }

            function loadImage(link, marker) {

                    var immagine = new Image();

                    immagine.src = link;

                    immagine.onload = function() {
                            marker = createMarker();  
                    };  

                    return immagine;
             }

             .... 
```

变量**immagine**被初始化，调用函数**loadImage**来加载图片。

在这个函数中，它是代码：

```
 immagine.onload = function() {
                            marker = createMarker();  
                    }; 
```

在加载图像后必须分配**标记。**

当我尝试访问**marker**时，在加载图像后，它总是导致*undefined*；我确定*RichMarker*已创建。

我不明白为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:29:22.067

JavaScript 变量将存储对对象的引用，但您不能共享引用来表示 a `Number`or`String`或`undefined`。如果`marker`不是数组或对象，那么当您稍后修改它时`marker`，`this.marker`它不会是同一个对象（将其视为复制值，而不是分配引用）。

而是尝试确定`this`对象的范围，以便稍后您可以再次引用该*对象*：

```
function piano(numero, link) {
    var self = this;
    this.immagine = loadImage(link);

    function createMarker() {
        return new RichMarker({
            //...
        });
    }

    function loadImage(link) {
        var immagine = new Image();
        immagine.src = link;

        immagine.onload = function() {
            //use the scoped version of 'this'
            self.marker = createMarker();  
        };  

        return immagine;
     }

     //...
 } 
```

# android - 如何在 Android 上为相同的活动有不同的动画过渡？

> ID：15180970
> 
> 赞同：0
> 
> 时间：2013-03-03T00:12:22.463
> 
> 标签：android, transitions

请参考这张图片：

[https://lh4.googleusercontent.com/-gEW9RFcjpnQ/UTKSd0DSR5I/AAAAAAAAALs/P7i47evr2uY/s503/transitions.png](https://lh4.googleusercontent.com/-gEW9RFcjpnQ/UTKSd0DSR5I/AAAAAAAAALs/P7i47evr2uY/s503/transitions.png)

1-启动应用程序时，通过活动显示启动画面

2-然后，执行转到主活动（并且启动屏幕活动完成）

3-用户，通过按钮点击，可以进入屏幕1或屏幕2活动。

3.1- 这样做时，主活动被保留（未完成）并创建所需的屏幕活动。

4- 从屏幕 2 或屏幕 2 活动返回只需完成它们即可。然后，默认情况下，执行返回到 Main Activity。

我想要的是：

1-图片上（A）的默认过渡动画。它表示从 Splash 到 Main Activity、从 Main Activity 到 screen-1 以及 screen-1 完成时（返回到 Main Activity 时）的默认动画。

2-图片上（B）的特定过渡动画。这意味着从 Main Activity 转到 screen-2 以及 screen-2 完成时（返回到 Main Activity 时）。

就我在这里和互联网上的搜索而言，我从未发现如何实现这一点。

如何做到这一点？

我成功地从 Main Activity->screen-1 和 Main Activity->screen-2 获得了不同的动画，但我完全无法在 screen-1->Main Activity 和 screen-2->Main Activity 之间获得不同的动画。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T02:31:33.120

您使用以下代码启动屏幕 2 的 Activity：

```
startActivityForResult(intent4Screen2, RESULT_ANIMATION);
overridePendingTransition(R.anim.zoom_enter, R.anim.zoom_exit); 
```

在 onActivityResult() 你放：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    switch (requestCode) {
    case RESULT_ANIMATION:
            overridePendingTransition(R.anim.zoom_enter, R.anim.zoom_exit);
            break;
    }
} 
```

RESULT_ANIMATION 是一个常数，zoom_enter 和 zoom_exit 是您的动画，例如：

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
      android:interpolator="@android:anim/decelerate_interpolator">
    <alpha
        android:interpolator="@android:anim/accelerate_interpolator"
        android:fromAlpha="0.0" android:toAlpha="1.0"
        android:duration="@android:integer/config_mediumAnimTime" />
</set> 
```

如果您需要支持不支持 overridePendingTransition() 方法的 Android <2.0，则需要使用反射。

# javascript - 通过 Javascript 的 innerHTML 填充在 IE9 中不起作用

> ID：15180976
> 
> 赞同：0
> 
> 时间：2013-03-03T00:13:37.780
> 
> 标签：javascript, internet-explorer, innerhtml

我有一个 HTML 表单，其中有一个 + 标记。我想通过 Javascript 对选项列表进行排序。我编写了一个在 Chrome、Firefox、Safari 和 Opera 中工作但在 Internet Explorer 中不工作的代码。我在下面粘贴 Javasript 代码。我的代码中是否缺少某些内容？

```
window.onload = function () {
categoryOptions = $('category').innerHTML;
$('category').innerHTML = sortCategoryOptions(categoryOptions);
}; 
```

sortCategoryOptions() 的函数定义如下：

```
function sortCategoryOptions(categoryOptions) {
var eachOption = categoryOptions.split('</option>');
for (var i = 0; i < (eachOption.length - 1); i++) {
    eachOption[i] = eachOption[i] + '</option>';
}
eachOption.sort();
optionsSorted = '';
for (var i = 0; i < eachOption.length; i++) {
    optionsSorted = optionsSorted + eachOption[i];
}
return optionsSorted; 
} 
```

categoryOptions 字段有以下内容

```
<option>Option3</option>
<option>Option1</option>
<option>Option2</option>
<option>Option4</option> 
```

预期产出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:18:33.957

~~对于初学者，您实际上是在寻找一个`<category>`标签，我很确定这不是您的意图。~~忽略，正如评论中指出的那样，它看起来`$`是`document.getElementById`这里的别名，而不是`jQuery`.

除此之外，使用`innerHTML`to sort 是一个*可怕*的想法，更是如此，因为您依赖于`</option>`不被浏览器的解析器更改（它总是会更改为`</OPTION>`）

因此，考虑到这一点，并假设您正在研究`<select id="category">`，试试这个：

```
window.onload = function() {
    var sel = document.getElementById('category'),
        arr = [].concat.apply([],sel.children), // convert NodeList to array
        l = arr.length, i;
    arr.sort(function(a,b) {return a.text < b.text ? -1 : 1});
    for( i=0; i<l; i++) sel.appendChild(arr[i]);
}; 
```

# recursion - 在两个列表 Prolog 中返回相同的值

> ID：15180979
> 
> 赞同：0
> 
> 时间：2013-03-03T00:13:43.697
> 
> 标签：recursion, prolog

如果我有

```
findmatching([2,4,1,7], [4,9,1,8], X).

X = [4,1] 
```

我正在尝试使用成员并找到所有成员，但是如果成员找不到值，则在回溯时会终止我的程序

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T03:03:59.647

听起来您正试图找到两个集合的交集（可能已经在某个地方找到了一个很好的答案，因为这是一个必须解决的常见问题）。

我会这样解决它：

```
% an empty list intersects with nothing
findmatching([], _, []).

% Matches is the intersection of the set defined by List1 and the set
%  defined by List2
findmatching([List1H|List1T], List2, Matches) :-
    memberchk(List1H, List2) ->
        (findmatching(List1T, List2, MatchesT),
        Matches = [List1H|MatchesT])
        ;
        findmatching(List1T, List2, Matches). 
```

在这个谓词中，如果 List1 的头部出现在 List2 中，那么 Matches 应该是 List1 尾部加上 List1 头部的任何匹配。如果 List1 的头部没有出现在 List2 中，那么 Matches 应该只是 List1 尾部的匹配项（并且 List1 的头部被遗忘了）。

# apache-camel - Apache Camel mybatis 在每次插入后提交，希望它不要

> ID：15180981
> 
> 赞同：0
> 
> 时间：2013-03-03T00:14:03.673
> 
> 标签：apache-camel, mybatis

在插入、删除或更新之后，我似乎无法阻止 mybatis 的 commit() 。我想自己控制这个

```
from( A )
(begin)
... do some processing ...
lots of 
.to( "mybtis:insertX?statementType=insertList" )

(commit) 
```

并编写了一些映射来做到这一点，但是在上面的每个 insertList 和 delete 之后，mybatis 立即提交。我不确定如何告诉它停止这样做，并且担心在 mybatis DefaultSqlSession 中不可避免地在这些函数中内置了 commit() 的源代码，例如似乎硬连线了 commit() （当然它可能是mybatis-session 提交而不是 db-commit，但很难说）。

我也许可以使用临时表和东西来达到类似的效果，但它看起来很乱，如果存在，我更愿意使用正确的机制

我希望它可以在 mybatis 配置 URI 上进行配置。

也许我只是不太了解 mybatis 知道如何做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:16:44.063

@boday 嗯，看来我失去了“评论”的选择。

是的，但这就是问题所在，我有这么大的批次要插入，我需要将它分成 10,000 个组，否则 mybatis 会不幸中断。我之前也做了一个表删除。我希望他们在没有承诺的情况下为特殊事物留下某种“后门”。

我有一种感觉，我可能需要使用临时表并进行某种“重命名”来获得我正在寻找的原子效果。

我将看看其他人提到的“openSession”。我也想到我可以用我自己的自定义“SqlSession”完全操纵它，它覆盖了 commit() 方法，基本上什么都不做，它不会那么糟糕，因为它只是一种方法，但显然非常不理想。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T06:03:02.827

你是正确的，每次调用`.to( "mybtis:insertX?statementType=insertList")`都会自动提交，但是你可以传入一个你想要一次提交的列表......

```
from( A )
(begin)
... do some processing ...
... aggregate into a List ... 
.to( "mybtis:insertX?statementType=insertList" ) //commits once after entire List is inserted 
```

见[https://svn.apache.org/repos/asf/camel/trunk/components/camel-mybatis/src/test/java/org/apache/camel/component/mybatis/MyBatisInsertListTest.java](https://svn.apache.org/repos/asf/camel/trunk/components/camel-mybatis/src/test/java/org/apache/camel/component/mybatis/MyBatisInsertListTest.java)

# c++ - C++ initializer_list 迭代器返回错误值

> ID：15180990
> 
> 赞同：1
> 
> 时间：2013-03-03T00:14:38.967
> 
> 标签：c++, initializer-list

我有一个这样定义的类：

```
initializer_list<string> choices;
initializer_list<string>::iterator current_choice;
bool has_choices = false;
MenuItem(Position position, string prompt) { this->position = position; this->prompt = prompt; }
MenuItem(Position position, string prompt, initializer_list<string> choices) : MenuItem(position, prompt) {
    this->choices = choices;
    this->current_choice = this->choices.begin();
    this->text = *(this->current_choice);
    this->has_choices = true;
} 
```

当前菜单项定义为 MenuItem* current_menu_item = &menuItems[menuItemIndex];

当我在构造函数中迭代 initializer_list 时，会输出正确的值。但是稍后在代码中当我尝试切换值时，如下所示：

```
 if (c == KEY_RIGHT) {
    if (current_menu_item->has_choices)
    {
        if (current_menu_item->current_choice != current_menu_item->choices.end()) {
            current_menu_item->current_choice++;
            current_menu_item->text = *(current_menu_item->current_choice);
        }
    }
} 
```

它显示了下一个菜单项对象的 initializer_list 的第一个值，我按右，然后崩溃。如果选择了下一个对象，并且我按右，它就会崩溃。

像这样将对象放入向量中

```
menuItems.push_back(MenuItem(Position(5, 15), "Religion: ", { "*", "*", "*", "Protestant" }));
menuItems.push_back(MenuItem(Position(30, 5), "Do you smoke? ", { "Yes", "No" })); 
```

我已经尝试在整个代码的各个点进行调试，但我似乎无法确定它出错的位置或原因。

* * *

没关系，有两个人指出我应该使用常规容器而不是 initializer_list。谢谢大家的回答。我现在觉得很笨。我所要做的就是将 initializer_list 更改为向量，而无需更改任何其他代码。我喜欢 C++。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T00:26:17.403

来自“C++ 工作草案，2012-11-02”

> **18.9 初始化器列表 [support.initlist]**
> 2 类型为initializer_list 的对象提供对类型为const E 的对象数组的访问。[ 注意：一对指针或一个指针加上一个长度将是initializer_list 的明显表示。initializer_list 用于实现 8.5.4 中指定的初始化列表。**复制初始值设定项列表不会复制底层元素**。——尾注]

如果我将初始化列表复制到一个`std::vector`例子中，它就可以完美地工作。您应该将 your 定义`choices`为常规容器，而不是`std::initializer_list`

```
#include <string>
#include <vector>
#include <iostream>
#include <iterator>

struct A {
    A(const std::initializer_list<std::string> &args) : v(args) {}
    void dump() {
        std::copy(v.begin(), v.end(), std::ostream_iterator<std::string>(std::cout, "\n"));
    }

    std::vector<std::string> v;
};

int main(int argc, char **argv)
{
    A a({"Hello, ", "world!"});
    a.dump();
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T00:24:50.807

您不应该在取消引用迭代器之后（而不是之前）递增吗？

```
current_menu_item->text = *(current_menu_item->current_choice);
current_menu_item->current_choice++; 
```

否则，您可能会取消引用结束迭代器。

此外，另一个问题，正如 mfontanini 所指出的，当您调用`MenuItem(Position(5, 15), "Religion: ", { "*", "*", "*", "Protestant" })`等时，初始化列表在表达式末尾**过期**，这意味着您的内部初始化列表指向无效内存（初始化列表仅复制指针）。解决方案是使用标准容器，例如`std::vector`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T00:23:10.113

您的第二个构造函数按值复制选择。因此，`current_choice`作为迭代器的有效性取决于参数选择的活跃度。像这样的参数`{ "*", "*", "*", "Protestant" }`被保存在堆栈中，因此如果调用`push_back`返回的方法`choices`可能会消失，并且作为迭代器的 current_choice 会变成一个悬空的“指针”。

# iphone - Facebook SDK：FBLoginView 重新授权发布流

> ID：15180991
> 
> 赞同：3
> 
> 时间：2013-03-03T00:14:48.180
> 
> 标签：iphone, objective-c, facebook, loginview

在使用 FBLoginView 时调用 initWithReadPermission 后，我遇到了重新授权发布流的问题。我尝试在委托函数内部调用，我可以在其中获取用户信息。在下一个要求发布流权限的对话框之后，应用程序向我抛出了一个异常说

**“'com.facebook.sdk:InvalidOperationException'，原因：'FBSession：重新授权无效，而先前的重新授权调用尚未完成。' "**

我需要在读取权限后调用，但如何防止此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T12:56:59.170

根据您的错误，未打开 FBSession。所以你应该检查会话是否

在尝试重新授权之前打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T01:33:32.050

在某处的 facebook sdk doc 中，他们声明您不应同时获得读写权限。

最好的方法是使用读取权限初始化，然后一旦用户执行需要写入权限的操作，第二次请求它（这实际上是他们希望您执行的操作，也是因为如果您使用 iOS6 SSO ，对于读取和写入权限，我认为您需要单击 2 个不同的警报视图，不能在 1 个单一授权单击中完成）

如果您确实需要按顺序读取和写入，请在成功获得读取授权时尝试使用 NSNotification，然后在获得该通知时尝试获得写入权限。