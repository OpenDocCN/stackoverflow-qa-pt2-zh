# StackOverflow 问答 13809000-13809999

# validation - JSF 验证错误消息未显示

> ID：13809001
> 
> 赞同：1
> 
> 时间：2012-12-10T20:51:31.933
> 
> 标签：validation, jsf-2, primefaces, spinner

以下是代码：

```
 <p:tabView id="tabId" effect="fade" effectDuration="normal"
        style="font-size:105%;font-family:Times New Roman, Times, serif;"
        orientation="left">

        <p:tab title="Yard Parameters">
            <h:form id="yardParameters"
                style="color:white; font-weight:bold; font-size:100%;">
                <p:messages id="messages" showDetail="true" autoUpdate="true"
                    closable="true" />
                <div style="position: relative; left: 39px;">
                    <h:panelGrid columns="5" cellpadding="8">
                        <h:outputLabel for="humpSpeed" value="Hump Speed:" />
                        <p:spinner id="humpSpeed" value="#{yardMaster.humpSpeed.number}"
                            stepFactor="#{yardMaster.humpSpeed.step}"
                            min="#{yardMaster.humpSpeed.min}"
                            max="#{yardMaster.humpSpeed.max}"
                            suffix="#{yardMaster.humpSpeed.suffix}"
                            style="width: 200px;font-size:86%;">
                            <f:validateLongRange minimum="#{yardMaster.humpSpeed.min}"
                                maximum="#{yardMaster.humpSpeed.max}" for="humpSpeed" />
                        </p:spinner>    
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <h:outputLabel for="pullbackTime" value="Pullback Time:" />
                        <p:spinner id="pullbackTime"
                            value="#{yardMaster.pullbackTime.number}"
                            stepFactor="#{yardMaster.pullbackTime.step}"
                            min="#{yardMaster.pullbackTime.min}"
                            max="#{yardMaster.pullbackTime.max}"
                            suffix="#{yardMaster.pullbackTime.suffix}"
                            style="width: 200px;font-size:86%;">
                            <f:validateLongRange minimum="#{yardMaster.pullbackTime.min}"
                                maximum="#{yardMaster.pullbackTime.max}" for="pullbackTime" />
                        </p:spinner>
                    </h:panelGrid>
                </div>
                <br></br>
                <div style="position: relative; left: 25px;">
                    <h:panelGrid columns="5" cellpadding="8">

                        <h:outputLabel for="inspectionTime" value="Inspection Time:" />
                        <p:spinner id="inspectionTime"
                            value="#{yardMaster.inspectionTime.number}"
                            stepFactor="#{yardMaster.inspectionTime.step}"
                            min="#{yardMaster.inspectionTime.min}"
                            max="#{yardMaster.inspectionTime.max}"
                            suffix="#{yardMaster.inspectionTime.suffix}"
                            validatorMessage="Please enter from 30 to 120"
                            style="width: 200px;font-size:86%;">
                            <f:validateLongRange minimum="#{yardMaster.inspectionTime.min}"
                                maximum="#{yardMaster.inspectionTime.max}" for="inspectionTime" />
                        </p:spinner>
                        <h:outputLabel for="extraTrainThreshold"
                            value="Extra Train Threshold:" />
                        <p:spinner id="extraTrainThreshold"
                            value="#{yardMaster.extraTrainThreshold.number}"
                            stepFactor="#{yardMaster.extraTrainThreshold.step}"
                            min="#{yardMaster.extraTrainThreshold.min}"
                            max="#{yardMaster.extraTrainThreshold.max}"
                            suffix="#{yardMaster.extraTrainThreshold.suffix}"
                            style="width: 200px;font-size:86%;">
                            <f:validateLongRange
                                minimum="#{yardMaster.extraTrainThreshold.min}"
                                maximum="#{yardMaster.extraTrainThreshold.max}"
                                for="extraTrainThreshold" />
                        </p:spinner>
                    </h:panelGrid>
                </div>
                <br></br>
                <div style="position: relative; left: 16px;">
                    <h:panelGrid columns="5" cellpadding="8">
                        <h:outputLabel for="airBleedingTime" value="Air Bleeding Time:" />
                        <p:spinner id="airBleedingTime"
                            value="#{yardMaster.airBleedingTime.number}"
                            stepFactor="#{yardMaster.airBleedingTime.step}"
                            min="#{yardMaster.airBleedingTime.min}"
                            max="#{yardMaster.airBleedingTime.max}"
                            suffix="#{yardMaster.airBleedingTime.suffix}"
                            style="width: 200px;font-size:86%;">
                            <f:validateLongRange minimum="#{yardMaster.airBleedingTime.min}"
                                maximum="#{yardMaster.airBleedingTime.max}"
                                for="airBleedingTime" />
                        </p:spinner>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <h:outputLabel for="xxxxxxTime" value="xxxxxxxx Time:" />
                        <p:spinner id="xxxxxxTime"
                            value="#{yardMaster.xxxxxxTime.number}"
                            stepFactor="#{yardMaster.xxxxxxTime.step}"
                            min="#{yardMaster.xxxxxxTime.min}"
                            max="#{yardMaster.xxxxxxTime.max}"
                            suffix="#{yardMaster.xxxxxxTime.suffix}"
                            style="width: 200px;font-size:86%;">
                            <f:validateLongRange minimum="#{yardMaster.xxxxxxTime.min}"
                                maximum="#{yardMaster.xxxxxxTime.max}" for="xxxxxxTime" />
                        </p:spinner>
                    </h:panelGrid>
                </div>
                <br></br>
                <div style="position: relative; left: 30px;">
                    <h:panelGrid columns="5" cellpadding="8">
                        <h:outputLabel for="couplingTime" value="Coupling Time:" />
                        <p:spinner id="couplingTime"
                            value="#{yardMaster.couplingTime.number}"
                            stepFactor="#{yardMaster.couplingTime.step}"
                            min="#{yardMaster.couplingTime.min}"
                            max="#{yardMaster.couplingTime.max}"
                            suffix="#{yardMaster.couplingTime.suffix}"
                            style="width: 200px;font-size:86%;">
                            <f:validateLongRange minimum="#{yardMaster.couplingTime.min}"
                                maximum="#{yardMaster.couplingTime.max}" for="couplingTime" />
                        </p:spinner>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <h:outputLabel for="xxxxxxTime2" value="xxxxxxxx Time:" />
                        <p:spinner id="xxxxxxTime2"
                            value="#{yardMaster.xxxxxxTime2.number}"
                            stepFactor="#{yardMaster.xxxxxxTime2.step}"
                            min="#{yardMaster.xxxxxxTime2.min}"
                            max="#{yardMaster.xxxxxxTime2.max}"
                            suffix="#{yardMaster.xxxxxxTime2.suffix}"
                            style="width: 200px;font-size:86%;">
                            <f:validateLongRange minimum="#{yardMaster.xxxxxxTime2.min}"
                                maximum="#{yardMaster.xxxxxxTime2.max}" for="xxxxxxTime2" />
                        </p:spinner>
                    </h:panelGrid>
                </div>
                <br></br>
                <br></br>
            </h:form>
        </p:tab>
        <p:tab title="Air Bleeding Time" />
        <p:tab title="Inbounded Time" />
        <p:tab title="Outbound Time" />
    </p:tabView> 
```

这里我到底做错了什么，验证发生了，即只有当它们在可接受的范围内时才会接受这些值，但是当我输入一个不在范围内的值时，则不会显示错误消息。以下是在正确验证数据时导航到不同页面的命令按钮的代码：

```
 <p:commandButton
        style="color:white; background-color:#292929; font-weight:bold; font-size:120%; font-family:Times New Roman, Times, serif;"
        value="Generate Plan" action="Generated Plan?faces-redirect=true" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:16:24.187

我发现了问题，它在我的脸上 config.xml。我不小心在里面放了以下内容，

```
<application>
    <message-bundle>ValidationMessages</message-bundle>
</application> 
```

这基本上意味着我应该定义我自己没有做过的消息，所以我没有收到消息，一旦我删除它，我就开始收到消息。

# sql - 如何重构这个 SQL 查询？

> ID：13809002
> 
> 赞同：2
> 
> 时间：2012-12-10T20:51:29.977
> 
> 标签：sql, db2

我正在向 IBM DB2 服务器编写以下查询：

```
SELECT 
    EMPNO, 
    YEAR(CURRENT TIMESTAMP - BIRTHDATE) AS AGE,
    DENSE_RANK() OVER(ORDER BY YEAR(CURRENT TIMESTAMP - BIRTHDATE) ASC) AS RANK

FROM 
    DANDY.EMPLOYEE; 
```

它有效，但看起来很难看，因为我正在重复表达：

```
YEAR(CURRENT TIMESTAMP - BIRTHDATE) 
```

但是这样写是行不通的：

```
DENSE_RANK() OVER(ORDER BY AGE ASC) AS RANK 
```

如何让它变得更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:00:36.947

```
SELECT 
EMPNO, 
AGE,
DENSE_RANK() OVER(ORDER BY AGE ASC) AS RANK
FROM (SELECT EMPNO,
             YEAR(CURRENT TIMESTAMP - BIRTHDATE) AS AGE
      FROM DANDY.EMPLOYEE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:56:49.373

我知道标准`ORDER BY`条款通常接受列索引，但不确定它是否适用`DENSE_RANK()`- 也许尝试：

```
DENSE_RANK() OVER(ORDER BY 2 ASC) AS RANK 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T20:59:49.563

您可以使用公用表表达式 (CTE) 来获取`AGE`，然后`AGE`根据需要再次使用。

```
WITH
   CTEAGE AS
      (SELECT 
          YEAR(CURRENT TIMESTAMP - BIRTHDATE) AS AGE,
      FROM 
          DANDY.EMPLOYEE
      )

   SELECT 
      EMPNO, 
      CTEAGE.AGE,
      DENSE_RANK() OVER(CTEAGE.AGE ASC) AS RANK
   FROM 
      DANDY.EMPLOYEE; 
```

# c++ - RegOpenKeyEx 给出错误 2 或错误 161，双向失败

> ID：13809003
> 
> 赞同：2
> 
> 时间：2012-12-10T20:51:32.940
> 
> 标签：c++, winapi, registry, windows-server

我正在尝试从 Windows 服务器读取注册表项，但我似乎无法让它在有或没有前导斜杠的情况下工作。如果我尝试：

```
lError = RegOpenKeyEx(HKEY_LOCAL_MACHINE, "\\SOFTWARE\\Company\\Product\\ServerName", 0, KEY_QUERY_VALUE, &hDomainKey); 
```

它给了我错误 161，即 ERROR_BAD_PATHNAME。（指定的路径无效。）

好的，所以尝试这样：

```
lError = RegOpenKeyEx(HKEY_LOCAL_MACHINE, "SOFTWARE\\Company\\Product\\ServerName", 0, KEY_QUERY_VALUE, &hDomainKey); 
```

我收到错误 2，ERROR_FILE_NOT_FOUND。（该系统找不到指定的文件。）

我可以使用 path 、 name和 type打开`regedit`并查看我想要检索的值。我在这里想念什么？`My Computer\HKEY_LOCAL_MACHINE\SOFTWARE\Company\Product``ServerName``REG_SZ`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T20:53:46.447

打开密钥，而不是值：

```
lError = RegOpenKeyEx(HKEY_LOCAL_MACHINE,
                      "SOFTWARE\\Company\\Product",
                      0,
                      KEY_QUERY_VALUE,
                      &hDomainKey); 
```

然后使用[`RegQueryValueEx()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724911%28v=vs.85%29.aspx)（或[`RegGetValue()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724868%28v=vs.85%29.aspx)）读取值。

# visual-c++ - CSimpleArray 在 RemoveAll 处崩溃

> ID：13809009
> 
> 赞同：0
> 
> 时间：2012-12-10T20:51:47.580
> 
> 标签：visual-c++, atl, heap-memory

我有一个调用 DLL 中方法的 EXE。

DLL 中的方法定义为，其中 CSimpleArray 是 ATL 类：

```
class DriverUtility
{
    ....
    virtual bool GetFlagsOfRun(int runID, CSimpleArray<FlagData> &flags) = 0;
};

struct FlagData
{
    CString Name;
    CString Value;
    CString TypeName;
}; 
```

我将EXE中的方法称为

```
CSimpleArray<FlagData> m_mdFlags;
m_pDriverUtility->GetFlagsOfRun(m_lRunID, m_mdFlags); 
```

当我调用 m_mdFlags.RemoveAll 时，它在以下位置崩溃并`free(m_aT);`出现堆错误：

```
void RemoveAll()
   {
          if(m_aT != NULL)
          {
                 for(int i = 0; i < m_nSize; i++)
                       m_aT[i].~T();
                 free(m_aT);
                 m_aT = NULL;
          }
          m_nSize = 0;
          m_nAllocSize = 0;
} 
```

我知道在堆上分配内存时应该在本地解除分配。我在调用者（EXE）中创建对象，并从调用者调用 RemoveAll()，所以不确定问题出在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:04:32.373

该方法本身不会复制数组，并且不太可能是原因（尽管在我看来并不安全，因为它不能保护您免受其他意外错误的影响）。

我会说您可能正在从数组元素中传递的结构中复制字符串，最终您将 DLL 和 EXE 模块的字符串分配器弄得一团糟，从而导致访问冲突。确保您的调用者不复制该字符串，如果您需要复制，请执行以下操作：

```
GetFlagsOfRun(..., flags) {
  FlagData& a = ...
  CString b = (LPCTSTR) a.Name; // Not a.Name directly!
  ...
} 
```

# html - Google Chrome 中的 Z-Index / 滚动问题

> ID：13809012
> 
> 赞同：0
> 
> 时间：2012-12-10T20:51:54.880
> 
> 标签：html, css, google-chrome

我有一个博客，我只在 Chrome 中遇到了轻微的样式 (CSS) 问题。作为参考，博客位于[此处](http://usdish.com/blog/)。

问题是（仅在 Chrome 中）当我滚动时，内容应该在导航栏下方（但在大图像的顶部），但它会过去。同样，此问题仅存在于 Chrome 中。

我什至不知道从哪里开始，但我希望你们能给我一些建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:14:00.790

这个问题实际上相当简单，并且`positioning`与`header elements`.

**我** `#header_area .page`改为,`position: absolute`和。我也放弃并做到了。`#header_area .Nav``position: fixed``#header_area .header a` `top margin``70px``position: fixed`

# python - 保存堆栈？

> ID：13809013
> 
> 赞同：6
> 
> 时间：2012-12-10T20:51:59.053
> 
> 标签：python, ruby, jvm, stack

我只是好奇，是否可以将程序的所有变量和当前状态转储到一个文件中，然后在另一台计算机上恢复它？！
假设我有一个 Python 或 Ruby 的小程序，给定特定条件，它将所有当前变量和当前状态转储到一个文件中。
稍后，我可以在另一台机器上再次加载它，然后返回它。
类似于 VM 快照功能。
我在这里看到过这样的问题，但与 Java 相关，保存当前的 JVM 并在不同的 JVM 中再次运行它。大多数人都说没有这样的东西，只有兵马俑有一些东西，仍然不完美。谢谢你。

为了澄清我想要实现的目标：
给定 2 个或更多 Raspberry Pi，我试图在 Pi nº1 上运行我的软件，但是，当我需要用它做一些不同的事情时，我需要将软件移动到 Pi nº2没有数据丢失，只有轻微的中断时间。
等等，到无限数量的机器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:02:43.733

我试图重新发明轮子的接缝。
检查此链接：
[http ://en.wikipedia.org/wiki/Application_checkpointing#DMTCP](http://en.wikipedia.org/wiki/Application_checkpointing#DMTCP)

[http://www.linuxscrew.com/2007/10/17/cryopid-freeze-and-unfreeze-processes-in-linux/](http://www.linuxscrew.com/2007/10/17/cryopid-freeze-and-unfreeze-processes-in-linux/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T22:41:55.717

好问题。

在 Smalltalk 中，是的。

实际上，在 Smalltalk 中，转储整个程序并重新启动是存储和共享程序的*唯一方法。*没有源文件，也无法从零开始启动程序。因此，在 Smalltalk 中，您将免费获得您的功能。

Smalltalk VM 提供了一个钩子，每个对象都可以在其中注册以在重新启动后恢复其外部资源，例如重新打开文件和互联网连接。而且，例如整数数组被注册到该钩子以在转储已移动到具有不同字节序的机器时更改其值的字节序。

这可能会让人预感用一种设计上不支持可恢复转储的语言来实现这一目标可能会变得多么困难（或不困难）。

唉，所有其他语言都没有那么活跃。除了一些 Lisp 实现之外，我不知道任何支持从内存转储恢复的语言。

这是一个错失的机会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T11:43:09.037

我已经看到 Mariano 在最近的 Esug 会议上演示了在 Pharo Smalltalk 中使用 Fuel（对象序列化）。只要不碰到未序列化的对象，就可以继续调试和运行。[Squeak smalltalk](http://www.raspberrypi.org/phpBB3/viewtopic.php?f=34&t=9046)在 Pi 上运行，如果保存图像对您来说足够好，这很简单。不过，我们仍在等待更快的 JITting VM for ARM（Google Summer of Code 计划的一部分）

# ms-access - MS Access 的新管理员，如何修改现有宏

> ID：13809015
> 
> 赞同：6
> 
> 时间：2012-12-03T06:26:26.047
> 
> 标签：ms-access

我是 MS 访问数据库的新管理员。我对 MS Access 很陌生，所以如果我在这里问一些没有意义的问题，请原谅我......

当前员工的桌面上有一个小的（5MB 左右）.mdb 文件。单击该文件将打开访问并在访问左侧列出查询。我已将此文件复制到我的笔记本电脑上，以便开始工作/维护数据库。但是，单击任何查询都会产生错误（副加载/运行），基本上表示无法找到网络位置（文件）。

他们桌面上的 .mdb 文件包含通过网络共享加载主 .mdb 文件（33MB 大得多）的宏。然而，当我从桌面打开这个 .mdb 文件并通过宏选项卡查看宏时，我看不到任何尝试从网络共享加载 .mdb 文件的宏。此外，一些宏失败。特别是尝试通过网络共享加载主 .mdb 文件。我的桌面上有主 .mdb 文件，除其他外，我想更改该宏以指向本地副本与宏指向的网络副本。在这种性质的 .mdb 文件中查看所有宏以根据需要进行修改的最佳方式是什么？

编辑：

我还应该提到我的笔记本电脑上有一个新版本的 Access (2010)。其他人都在使用 2003。不幸的是，由于公司政策，我无法在笔记本电脑上安装旧版本。当人们经常使用数据库时，我理想情况下需要修改运行 2010 年的笔记本电脑上的 .mdb 文件......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T21:43:33.510

我怀疑你有宏或 VBA 问题。

更有可能的是，您在屏幕左侧看到的表实际上是“附加”表，它们驻留在网络上的其他数据库中。

如果是这种情况，每个表名称左侧的图标将有一个小箭头。

您说您现在在 PC 上本地拥有较大数据库的副本，因此您需要做的是转到较小的数据库，并在“外部数据”下选择“链接表管理器”。

选择所有显示它们附加到较大数据库的服务器版本的表，选择“始终提示新位置”并单击“确定”。

您将获得一个“打开文件对话”，它允许您浏览到较大数据库的*本地*副本。只需单击该文件名，然后单击“确定”或“完成”或任何表示您已完成的按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T21:08:52.843

通常将 Access 应用程序拆分为前端（代码、表单等）和后端（数据）。然后将后端表链接到前端。这可以在运行时完成。

当您说宏时，您是指宏还是代码模块？如果您指的是宏，它们将列在数据库窗口中的宏下，如果您指的是代码，您可能会看到列出的模块，您可以打开和修改这些模块。查找链接表的代码的好地方是 autoexec 宏或启动表单。

# javascript - FormData 对象未通过 jQuery AJAX 调用提交

> ID：13809016
> 
> 赞同：2
> 
> 时间：2012-12-10T20:52:06.293
> 
> 标签：javascript, jquery

我正在使用此脚本从表单中获取所有值，以便为 ajax 请求做好准备：

```
function saveDataAjax(){
    var fd = new FormData();
    var inputs = document.getElementsByTagName('input');
    for(i=0;i<inputs.length;i++) {
        fd.append(inputs[i].name, inputs[i].value);
    }
    $.ajax({
        url: '/edit.php',
        data: fd,
        type: 'POST',
        dataType: 'html',
        success: function(data){
            alert(data);
        }
    });
} 
```

但是我`Type error`从 jQuery 得到一个，如果我警告`fd['inputname']`我得到未定义，所以我想我一定在某处做错了什么......

Firefox 调试器告诉我：`NS_ERROR_XPC_BAD_OP_ON_WN_PROTO: Illegal operation on WrappedNative prototype object @ http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js:2`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T21:06:45.340

将以下内容添加到 AJAX 调用中：

```
 processData: false,
 contentType: false, 
```

所以它看起来像：

```
 $.ajax({
       url: '/edit.php',
       data: fd,
       type: 'POST',
       processData: false,  //Add this
       contentType: false, //Add this
       dataType: 'html',              
       success: function(data){
           alert(data);
       }
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:05:49.090

这可能不是原因，只是想指出：`i`这里是全局的。JS 中的想法是针对全球减排。应该是`var i=...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-23T07:58:29.623

此页面可以帮助您... :)

```
<!DOCTYPE html>
<html>
<head>
  <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous">
  </script>
</head>
<body>
  <form method="post" id="fileinfo" enctype="multipart/form-data">
    file <input type="file" name="slug"><br>
     <input type="button" id="uploadBTN" value="Stash the file!"></input>
  </form>
  <script type="text/javascript">
    $(document).ready(function()
    {
      $('#uploadBTN').on('click', function()
      { 
          var form = $('form').get(0); 
          console.log(form);
          var fd = new FormData(form);
          fd.append('user_id',4);
          fd.append('user_media_category_id',1);
          //console.log(fd);
          fd.append("user_", "This is some extra data");
          $.ajax({
              url: 'http://localhost/yii2/azstudio/project/api/web/v1/user-media/new',  
              type: 'POST',
              data: fd,
              success:function(data){
                  console.log(data);
              },
              error:function(data){
                console.log(data);
              },
              cache: false,
              contentType: false,
              processData: false
          });
      });
    });
  </script>
</body>
</html> 
```

# ios6 - 文本更改时UILabel缩小

> ID：13809021
> 
> 赞同：4
> 
> 时间：2012-12-10T20:52:28.197
> 
> 标签：ios6, rotation, uilabel, autolayout

我有一个包含 containerView（灰色）的视图，其中包含一个 UILabel（蓝色）。

![在此处输入图像描述](../Images/05850fc67ad055d6b9c8d7db76b698ac.png)

我有布局约束，这样 containerView 总是比每边的标签大 8 个像素，并且 containerView 的左/上/右边界是固定的。当设备方向改变时，容器视图会适当地拉伸。

标签的 numberOfLines 属性设置为 0。我在代码中设置标签的文本。正如预期的那样，标签的高度会增加以适应文本。

问题是：当我将设备旋转到横向时，标签的宽度会增长到适合屏幕的可用宽度，并且文本将适合 2 行。但是 UILabel 不会缩小其高度以紧贴文本。请注意标签中文本上方和下方的额外空间。

![在此处输入图像描述](../Images/cf28cc0f153f1398a7f03fa795507b7f.png)

那么如何通过旋转设备使标签的高度缩小以紧贴文本？

我曾尝试调用`[myLabel sizeToFit]`该`viewWill/DidLayoutSubviews`方法，但这没有明显的效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T00:09:07.593

检查标签是否具有指定固定高度的约束： `NSLog(@"%@", label.constraints);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T16:54:57.467

第 1 步：子类 UILabel。

第 2 步：将标签的自定义类设置为您的标签子类。

`-layoutSubviews`第 3 步：在您的自定义类中覆盖。

第 4 步：在被覆盖的方法中，调用`[self sizeToFit];`

这对我有用。

# prolog - Prolog 中的 Dijkstra

> ID：13809032
> 
> 赞同：2
> 
> 时间：2012-12-10T20:53:09.680
> 
> 标签：prolog, shortest-path, dijkstra

我被分配在 Prolog 中编写 Dijkstra 最短路径。

首先，我不想要源代码或完整实现，因为我正在尝试理解代码（评估的一部分将解释代码）。我在[这里](http://colin.barker.pagesperso-orange.fr/lpa/dijkstra.htm)和[那里](http://kti.mff.cuni.cz/%7Ebartak/prolog/graphs.html#dijkstra)看到了一些实现，但我真的不知道它是如何工作的。

到目前为止，我有这个：

```
edge(1,2,12). %edge(From,To,Cost)
...
edge(1,4,13).

vertex(1,100000,nil,false).%vertex(Id, Weight, Over, Closed).
...
vertex(5,100000,nil,false).

neigh(V1, V2):-edge(V1,V2,_).

open_neigh(V1,V2):-edge(V1,V2,_),vertex(V2,_,_,P),not(P).

nearest_neighbor(From,Who,Cost):-findall(Node,neigh(From, Node),NeighL),
    nearest_in_list(From,Who,NeighL,Cost).

n_hood(From,NeighList):-findall(Node, neigh(From,Node), NeighList).

open_n_hood(From,NeighList):-findall(Node, open_neigh(From,Node), NeighList).

nearest_in_list(_,Who,[Who],_).
nearest_in_list(From,Who,[H,K|T],Cost) :-
    edge(From,H,C1),
    edge(From,K,C2),
    C1 =< C2,
    Cost is C1,
    nearest_in_list(From,Who,[H|T],Cost).

nearest_in_list(From,Who,[H,K|T],Cost) :-
    edge(From,H,C1),
    edge(From,K,C2),
    C1 > C2,
    Cost is C2,
    nearest_in_list(From,Who,[K|T],Cost). 
```

问题是，我不知道如何更新有关顶点的信息。我已经尝试过 assert/1 和retract/1 但它不起作用。我收到无法修改静态过程 vertex/4 的错误。

我目前正在使用 SWI Prolog，但该程序应该可以在 Amzi 上运行！Prolog 也是如此，所以我想让它尽可能接近基本的 Prolog。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-15T13:57:10.060

如果您确实需要更新值，我建议您使用`flag/3`. 但是，正如评论中所建议的那样，Prolog 程序通常没有您通过算法步骤更新的“全局变量”。

相反，我建议您找到一种计算 Dijkstra 成本的正确方法。请注意，Dijkstra 算法中的初始参数始终是“未访问”节点，即列表 ( `[a,b,c,d|...]`)。在每一步，您都通过“访问”其中一个节点并更新其成本来更新此列表。我在这里看到了一个清晰的递归调用！

# matlab - Matlab双色图

> ID：13809036
> 
> 赞同：5
> 
> 时间：2012-12-10T20:53:24.570
> 
> 标签：matlab, plot

我想绘制一个`f`给定为 2 个向量的函数：`x`和`y`，所以`y=f(x)`。我使用`plot(x,y)`，但现在我需要它在 0 之上为蓝色，在 0 之下为红色，所以它看起来像这样：

![在此处输入图像描述](../Images/81fd760ae161f652150d6a757d0899de.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T21:37:55.897

当您在 matlab 中绘制一个向量时，该向量的任何被 NaN 填充的段都不会被绘制。因此，实现目标的一个技巧是在原始行之上绘制第二行，并使用 Nans 删除相关段。例如，

```
x = linspace(1,100,1000);
y = sin(x);

% Using a cutoff of y>=0.5
belowCutoff       = y;
belowCutoff(y>=0) = NaN;  % Replace points above cutoff with NaNs; 

figure;
plot(x,y,'r',x, belowCutoff, 'b'); 
```

![在此处输入图像描述](../Images/45a7d3d2b4dd388ee23831db109dcf68.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T21:47:17.000

```
y0 = 0; % threshold
color1 = [1 0 0]; % below threshold
color2 = [0 0 1]; % above threshold
x = 1 : 10;
y = randn(1, 10);
threshold_plot(x, y, y0, color1, color2); 
```

* * *

```
function threshold_plot(x, y, y0, color1, color2)
hold on;
n = length(x);
for i = 2 : n
  x1 = x(i - 1); y1 = y(i - 1);
  x2 = x(i); y2 = y(i);
  ascending = y1 < y2;
  if x1 == x2
    if ascending
      plot([x1 x2], [y1, y0], 'Color', color1);
      plot([x1 x2], [y0, y2], 'Color', color2);
    else
      plot([x1 x2], [y1, y0], 'Color', color2);
      plot([x1 x2], [y0, y2], 'Color', color1);
    end;
  elseif y1 == y2
    if threshold <= y1
      plot([x1 x2], [y1 y2], 'Color', color2);
    else
      plot([x1 x2], [y1 y2], 'Color', color1);
    end;
  else
    a = (y2 - y1) / (x2 - x1);
    b = y1 - a * x1;
    x0 = (y0 - b) / a;
    if x1 <= x0 && x0 <= x2
      if ascending
        plot([x1 x0], [y1, y0], 'Color', color1);
        plot([x0 x2], [y0, y2], 'Color', color2);
      else
        plot([x1 x0], [y1, y0], 'Color', color2);
        plot([x0 x2], [y0, y2], 'Color', color1);
      end;
    else
      if y0 <= y1
        plot([x1 x2], [y1 y2], 'Color', color2);
      else
        plot([x1 x2], [y1 y2], 'Color', color1);
      end;
    end;   
  end;
end; 
```

# c# - 断开链接 PowerPoint 2010

> ID：13809046
> 
> 赞同：1
> 
> 时间：2012-12-10T20:53:55.287
> 
> 标签：c#, powerpoint

我一直在努力使用 C# 和 PowerPoint，我之前发布过关于如何使用 C# 更新 ppt 中的链接，如果链接设置为手动，我没有得到任何回复，所以我想我会尝试通过设置链接来规避这个问题自动在文件中，然后当 C# 打开它时，它会更新它们，保存文件，然后破坏它们并将其另存为另一个文件名，但这并没有证明更容易。

我只需要知道如何断开链接。我知道一些 VBA 并编写了一个代码来破坏它们，但是当我使用 RunMacro 方法在 C# 中调用宏时，它似乎不适用于我正在使用的方法（？ - 我是 C# 新手，所以我不'不完全理解为什么会这样，但如果你谷歌“运行宏 PowerPoint C#”，你会发现我确信我尝试过的方法。）请帮助，我完全不知所措。

我的脚本看起来像这样

```
Using PowerPoint = Microsoft.Office.Interop.PowerPoint;

public void Main()
    {

        PowerPoint.Application ppt = new PowerPoint.Application();
        PowerPoint.Presentation PRS = ppt.Presentations.Open(@"Filename.pptm",
        Microsoft.Office.Core.MsoTriState.msoFalse, Microsoft.Office.Core.MsoTriState.msoFalse, Microsoft.Office.Core.MsoTriState.msoTrue);

        PRS.UpdateLinks();
        PRS.Save
        //here is where I need to break the links
        PRS.SaveAs(@"filename with links broken.pptm", 
            Microsoft.Office.Interop.PowerPoint.PpSaveAsFileType.ppSaveAsOpenXMLPresentationMacroEnabled, MsoTriState.msoTrue);
        PRS.Close(); 
       ppt.Quit();
} 
```

我尝试在打开文件之前将链接格式设置为手动，但这不会影响已经创建的任何形状，只会影响之后在程序中创建的新形状。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-06T20:41:21.570

我在 Powerpoint 中做了一个类似的项目，其中也涉及断开链接。在我的程序中，我从 Excel 文件中读取数据并将其放入 Powerpoint 演示文稿中。在我的 Powerpoint 模板文件中，我将所有指向我的 Excel 文件的链接按我希望的方式布置和格式化。程序开始运行并填充 Excel 文件。写入 Excel 完成后，我打开 Powerpoint 和 UpdateLinks() 到我的演示文稿。更新链接后，我会在 Powerpoint 中的 Shapes 上使用 for 循环断开链接。之后，我保存并关闭文档。下面是我用来根据我的每个 ppt 文件模板创建我的 Powerpoint 文件的函数（对于我的示例，我遍历多个 ppt 文件，因为每个 ppt 文件只包含一张幻灯片。

```
public void CreatePowerpoint()
    {
        string[] fileArray = Directory.GetFiles(@"C:\Users\Me\Desktop\test");
        Microsoft.Office.Interop.PowerPoint.Application pptApp = new Microsoft.Office.Interop.PowerPoint.Application();
        for (int i = 0; i < fileArray.Length; i++)
        {
            string file = fileArray[i];

            Microsoft.Office.Interop.PowerPoint.Presentation powerpoint = pptApp.Presentations.Open(file);
            powerpoint.UpdateLinks();

            Microsoft.Office.Interop.PowerPoint.Slides slides = powerpoint.Slides;
            Microsoft.Office.Interop.PowerPoint.Slide slide = slides[1];
            Microsoft.Office.Interop.PowerPoint.Shapes pptShapes = (Microsoft.Office.Interop.PowerPoint.Shapes)slide.Shapes;

            foreach (Microsoft.Office.Interop.PowerPoint.Shape y in pptShapes)
            {
                Microsoft.Office.Interop.PowerPoint.Shape j = (Microsoft.Office.Interop.PowerPoint.Shape)y;
                try
                {
                    //If auto link update is disabled for links
                    //j.LinkFormat.j.Update();
                    if (j.LinkFormat != null)
                    {
                        j.LinkFormat.BreakLink();
                    }
                }
                catch (Exception)
                {

                }
            }

            powerpoint.SaveAs(@"C:\Users\Me\Desktop\test" + i + ".pptx");
            powerpoint.Close();
            Thread.Sleep(3000);
        }
        pptApp.Quit();
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-12T02:21:22.487

当然，在打开文件之前更改内容不会影响未打开的文件。遍历每张幻灯片上的形状集合和每个形状：

```
If .Type = msoLinkedOLEObject Then
    .LinkFormat.BreakLink
End If 
```

msoLinkedOLEObject = 10

# php - PHP Time 每页显示不同的时间

> ID：13809050
> 
> 赞同：0
> 
> 时间：2012-12-10T20:53:29.933
> 
> 标签：php, javascript, jquery, html, countdowntimer

我有三个不同的页面使用相同的代码来获取倒计时时钟的时间。时钟倒计时到午夜。

第二页和第三页显示的倒计时时间相同，但主页显示的时间不同。这都是相同的代码，我在每个页面上都包含了这个 PHP 文件：

```
<script>
jQuery(document).ready(function() {
    $('#countdown_dashboard').countDown({
        serverDate: {
            'day':      <?php echo date("j"); ?>,
            'month':    <?php echo date("n"); ?>,
            'year':     <?php echo date("Y"); ?>,
            'hour':     24,
            'min':      0,
            'sec':      0,
            'serverDay':    <?php echo date("j"); ?>,
            'serverMonth':  <?php echo date("n"); ?>,
            'serverYear':   <?php echo date("Y"); ?>,
            'serverHour':   <?php echo date("G"); ?>,
            'serverMin':    <?php echo date("i"); ?>,
            'serverSec':    <?php echo date("s"); ?>
        },
        omitWeeks: true
    });
});
</script> 
```

我需要更改什么才能使主页计时器与其他计时器匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:04:46.710

看起来主页提供的时间比您提供的其他两个链接少了 4 小时。这向我表明主页脚本使用的时区设置与其他两个链接不同。

PHP 有一个名为的[内部时区设置](http://php.net/date.timezone)`date.timezone`，它受 php.ini 影响，可以在运行时使用[date_default_timezone_set()](http://php.net/date_default_timezone_set)函数进行更改。PHP 的大多数日期/时间函数（例如您使用的[date](http://php.net/date)函数）都受此时区设置的影响。

您可以在每个脚本中添加对[phpinfo()](http://php.net/phpinfo)的调用，它将输出这些脚本的所有已加载配置指令，这可以帮助您确定每个脚本当前使用的[时区。](http://php.net/timezones)请注意，如果时区留空，则不同版本的 PHP 行为会有所不同。旧版本的 PHP（PHP 5.4 之前的版本）用于尝试猜测系统的时区设置，而在 PHP 5.4+ 中，它只会默认为 UTC。

# xpath - Xpath 中带有当前时间函数的 IF 语句

> ID：13809051
> 
> 赞同：0
> 
> 时间：2012-12-10T20:54:11.480
> 
> 标签：xpath, infopath

我有一个使用此函数显示当前时间的文本框信息路径：

(substring-after(now(), "T")

我还有一个名为“位置”的下拉列表，它具有以下值：

1.波士顿

2.印度

3.伦敦

我想修改此功能以将当前时间设置为始终显示波士顿的当前时间，无论用户来自印度还是伦敦。

我相信输入遵循以下条件的 If 语句：

1.  如果**Location** (Drop down list) = " **London** " - 然后使用 (substring-after(now(), "T")减去**5** **hours**。

2.  如果**Location** (Drop down list) = " **India** " - 然后使用 (substring-after(now(), "T")减去**11** **hours**。

3.  如果**Location** (Drop down list) = " **Boston** " - 然后使用 (substring-after(now(), "T")。

我对 Xpath 比较陌生，需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:02:55.467

最简单的方法是在用子字符串从末尾撕下时间之前减去几个小时。

```
substring-after(addSeconds(now(), -3600 * 5), "T") 
```

警告：记住当前时间 ( `now()`) 是从本地机器计算的。因此，如果伦敦的人打开表格，他们已经在伦敦时间，然后您的代码将在此基础上减去 5 小时 - 使其不正确。

# html - 我的 301 重定向设置是否正确？谷歌将它们视为 404

> ID：13809052
> 
> 赞同：2
> 
> 时间：2012-12-10T20:53:34.767
> 
> 标签：html, wordpress, seo, traffic

我在这里处于困境中，并且损失了很多钱。我刚刚重新启动了我的网站：[http](http://www.kgstiles.com) ://www.kgstiles.com 。我在流量损失方面遇到了一些问题。我意识到我没有正确设置我的 301 重定向。我修复了它们并将我的站点地图重新提交给谷歌。此后，谷歌已将其中的大部分内容编入索引。我刚刚发现“link-juice”没有正确传输（因此流量没有上来），所以我去找网站管理员发现大约 450、404 错误。经过调查，我发现它们中的大多数是用于在浏览器中产生我想要的 301 重定向的页面。例如，[http](http://kgstiles.com/pureplantessentials.html) ://kgstiles.com/pureplantessentials.html 301根据我的 .htacess 文件重定向到[http://kgstiles.com/pureplantessentials/ ，该文件指出：](http://kgstiles.com/pureplantessentials/)

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteRule ^moreinfo/(.*)$ http://www.kgstiles.com/moreinfo$1 [R=301]
    RewriteRule ^healthsolutions/(.*)$ http://www.kgstiles.com/healthsolutions$1 [R=301]
    RewriteRule ^(.*)\.html$ $1/ [R=301,L]
    RewriteRule ^(.*)\.htm$ $1/ [R=301,L]
</IfModule> 
```

但这被 Google 对我网站的索引列为 404 错误页面。我配置正确吗？会不会有另一个潜在的问题？我非常渴望在这里得到答案，因此非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:01:43.087

本文彻底回答了这个问题，并展示了如何解决这个问题：

[http://www.deer-creek.ca/articles/search-engine-optimization/wordpress-pages-returning-404-page-not-found-headers](http://www.deer-creek.ca/articles/search-engine-optimization/wordpress-pages-returning-404-page-not-found-headers)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-10T21:36:04.130

您可能还需要添加：

```
Options +FollowSymlinks 
```

您可以在上面添加它：

```
RewriteEngine On 
```

在您的 .htaccess 文件中，您不需要包含标签，而是应该在您的 httpd.conf 中进行配置。

# python - 如何在python中左对齐字符串的一部分？

> ID：13809053
> 
> 赞同：3
> 
> 时间：2012-12-10T20:54:19.627
> 
> 标签：python, string, formatting, justify

我想左对齐字符串的右侧部分。我正在编写一个 IRC Bot 的 HELP 命令，我希望描述在整个过程中保持相同的宽度：

```
List of commands:
## !          Say a Text
## execute    Execute an IRC command
## help       Help for commands 
```

**ljust**适用于整个字符串，但我如何仅对字符串的一部分执行此操作？

这是我当前生成字符串的代码：

```
format.color( "## ", format.LIME_GREEN ) + self.commands[ cmd ][1].__doc__.format( format.bold( cmd ) ).splitlines()[0].strip() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T21:09:18.513

看看 Python 的[Format Specification Mini-Language](http://docs.python.org/release/3.3.0/library/string.html#formatspec)和[printf-style String Formatting](http://docs.python.org/3.3/library/stdtypes.html#printf-style-string-formatting)。

**例子：**

```
>>> '{:<20} {}'.format('## execute', 'Execute an IRC command')
'## execute           Execute an IRC command' 
```

请注意，它`format()`是在 Python 3.0 中引入并向后移植到 Python 2.6，因此如果您使用的是旧版本，则可以通过以下方式实现相同的结果：

```
>>> '%-20s %s' % ('## execute', 'Execute an IRC command')
'## execute           Execute an IRC command' 
```

有必要事先以合理的方式拆分字符串。

**例子：**

```
>>> '{:<20} {}'.format(*'{0} <COMMAND>: Help for <command>'.split(': '))
'{0} <COMMAND>        Help for <command>'

>>> '%-20s %s' % tuple('{0} <COMMAND>: Help for <command>'.split(': '))
'{0} <COMMAND>        Help for <command> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:56:49.050

您正确地提到[`str.ljust`](http://docs.python.org/2/library/stdtypes.html#str.ljust)了 ，所以这只是适当拆分字符串并将其应用于“左”部分的情况。例如：

```
>>> parts = "## ! Say a Text".split(" ", 2)
>>> " ".join(parts[:2]).ljust(20)+parts[2]
'## !                Say a Text' 
```

显然，为简单起见，最好在开始加入字符串之前执行此操作。

# php - 分组或加入搜索查询？

> ID：13809054
> 
> 赞同：0
> 
> 时间：2012-12-10T20:54:20.487
> 
> 标签：php, mysql

我试图让我的网站搜索框能够在一个查询中搜索多个表。

因此，如果用户搜索`display_name`存储在其中的用户，`ptb_profiles`他们会得到任何具有匹配名称的用户，或者如果他们按存储在其中的国籍进行搜索，则会`ptb_stats`显示所有具有该国籍的用户。

当我最初通过使用执行此操作时，`SELECT * FROM ptb_users, ptb_stats, ptb_profiles`我得到了重复的搜索结果，并且多次显示相同的结果，所以我试图避免这种情况，并且每个结果仅通过分组和使用 union all 显示一次，但这不起作用。

现在我试过了：

```
$query_for_result=mysql_query("SELECT display_name, location, gender, contact_number FROM ptb_profiles WHERE display_name LIKE '%".$query."%' OR location LIKE '%".$query."%' OR gender LIKE '%".$query."%' OR contact_number LIKE '%".$query."%' JOIN SELECT email, subscription FROM ptb_users WHERE email like '%".$query."%' OR subscription like '%".$query."%' JOIN SELECT nationality, hobbies, local_station FROM ptb_stats WHERE nationality like '%".$query."%' OR hobbies like '%".$query."%' OR local_station like '%".$query."%' 
        LIMIT 5"); 
```

但这只会引发以下错误：

```
Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in /Applications/XAMPP/xamppfiles/htdocs/PTB1/includes/mod_sidebar/search.php on line 31 
```

有人可以告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:33:45.470

`mysql_fetch_array()` complains about `$query_for_result` not being a query result. You must check the return value from `mysql_query()`. It returns false, if there's some problem with your SQL statement. So do at least

```
$sql = "select ...";
$result = mysql_query($sql) or die("Error in $sql: " . mysql_error()); 
```

to prevent and diagnose such errors.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:03:49.860

这不是唯一的方法。但是，如果您将 GROUP BY 应用于查询，您可以在多个连接表上进行搜索并轻松获取不同的用户列表。假设你所有的表都通过一个 ID 列相关，这样的事情可能会起作用......

```
SELECT u.* FROM ptb_users u
INNER JOIN ptb_stats s ON s.user_id=u.id
INNER JOIN ptb_profiles p ON p.user_id=u.id
WHERE "this or that"
GROUP BY u.id 
```

如果用户可能在 ptb_stats 或 ptb_profiles 中没有记录，请将您的联接更改为 LEFT JOINS...

# regex - bash（首选 sed 或 awk）删除第一个实例和最后一个实例之间的所有内容

> ID：13809058
> 
> 赞同：2
> 
> 时间：2012-12-10T20:54:28.723
> 
> 标签：regex, bash, sed, awk

我对 sed 很熟悉，但对 awk 不是很了解，也不知道如何解决这个问题。我已经用谷歌搜索了一段时间，但到目前为止还没有运气。情况如下：我有一个包含组和部分的大文件，如下所示：

```
<A1>
  some nr of lines
</A1>
<A2>
  some nr
  of lines
</A2>
<B1>
  some
  nr of
  lines
</B1>
<B2>
  some nr of lines
</B2>
<B3>
  bla
</B3>
<C1>
  bla
</C1>
<C2>
  bla
</C2> 
```

现在的问题是组数可以改变，段数可以改变，每个段的行数可以改变。例如，A 部分可能会达到 25，B 部分可能会达到 8，依此类推。我需要做的是删除某些组的所有条目，在上面的示例中，我想删除 中的所有内容`<B*>`，留下以下内容：

```
<A1>
  some nr of lines
</A1>
<A2>
  some nr
  of lines
</A2>
<C1>
  bla
</C1>
<C2>
  bla
</C2> 
```

此外，我想删除几个部分（尽管这些部分可以单独运行），例如，如果文件从 A1 转到 R123，我想删除 B*、F*、M* 等。

如果已经在某处询问并回答了类似的问题，我深表歉意，我确实在发布之前尝试找到解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T20:59:11.980

使用 sed：

```
sed '/<B1>/,/<\/B3>/d' infile 
```

这意味着找到从 sed 开始`<B1>`和结束于的文本范围`</B3>`并将其从 sed 的输出中删除。（这意味着 sed 将在标准输出上打印文件的其余部分）

**编辑：**这也适用于您的情况：

```
sed '/<B[0-9]*>/,/<\/B[0-9]*>/d' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T21:24:27.167

我认为你正在寻找的是这样的：

```
awk -v rmv="AC" 'BEGIN{
   gsub(/./,"|&",rmv)
   sub(/$/,")[0-9]+>$",rmv)
   start = end = rmv
   sub(/^\|/,"^<(",start)
   sub(/^\|/,"^</(",end)
}
$0 ~ start { f=1 }
!f
$0 ~ end   { f=0 }
' file

Just populate the "rmv" variable with the list of all the sections you want removed:

$ awk -v rmv="B" '...'
<A1>
  some nr of lines
</A1>
<A2>
  some nr
  of lines
</A2>
<C1>
  bla
</C1>
<C2>
  bla
</C2>
$ awk -v rmv="AC" '...'
<B1>
  some
  nr of
  lines
</B1>
<B2>
  some nr of lines
</B2>
<B3>
  bla
</B3>
$ 
```

# dom - 如何使用简单的 HTML DOM 解析许多 div？

> ID：13809062
> 
> 赞同：-3
> 
> 时间：2012-12-10T20:54:45.633
> 
> 标签：dom

我有这个 HTML 代码

```
<div id="first" class="first">
    One
    <div id="second" class="second">
        Second
        <div id="third" class="third">
            Third
            <div id="fourth" class="fourth">
                Fourth
                <div id="fifth" clas="fifth">
                   Fifht
                   <div id="sixth" class="sixth">
                       Sixth
                   </div>
                </div>
            </div>
        </div>
    </div>
</div> 
```

此代码来自外部网站。我想使用来自 URL 的简单 HTML DOM 显示“嗨”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:06:38.113

你想看到这样的东西吗？

```
$el = $html->find("#first", 0);
while ($child = $el->children(1)) {
    $el = $child;
}
echo $el->innertext; 
```

# php - 默认情况下 webmatrix 日志在哪里？

> ID：13809066
> 
> 赞同：3
> 
> 时间：2012-12-10T20:54:58.203
> 
> 标签：php, windows, iis, logging, webmatrix

我已经在我的 Windows 7 机器上安装了 Webmatrix IIS express。
我在哪里可以找到调试日志？
如果这对 php 很重要，我正在运行 wordpress

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:45:47.540

默认情况下，它们位于您的“我的文档”文件夹中名为“IIS Express”的文件夹中。有关详细信息，请参阅[IISExpress 日志文件位置](https://stackoverflow.com/questions/5798264/iisexpress-log-file-location)。

# oracle - 如何在 oracle 中“重新验证”外部约束

> ID：13809074
> 
> 赞同：4
> 
> 时间：2012-12-10T20:55:41.700
> 
> 标签：oracle

我有一个外国约束如下。这是三年前创建的。在此约束之后创建的所有数据都有效，但积压数据（三年前的数据）无效。Toad 将此约束显示为“未验证”

```
ALTER TABLE ISSUES ADD (
  CONSTRAINT FK_CLIENT 
 FOREIGN KEY (CLIENT) 
 REFERENCES REPORTERS(USERID)
    DEFERRABLE INITIALLY DEFERRED); 
```

今天我修复了所有积压的数据，现在这个约束对现有数据和新数据都有效。但是我将如何将约束设为“已验证”。

有没有办法“重新验证”外部约束？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T21:13:35.177

你应该能够：

```
ALTER TABLE issues ENABLE VALIDATE CONSTRAINT fk_client; 
```

# objective-c - 等到 UI 更新后再删除 UIActivityIndi cator

> ID：13809075
> 
> 赞同：0
> 
> 时间：2012-12-10T20:55:42.523
> 
> 标签：objective-c, ios, grand-central-dispatch, uiactivityindicatorview

我正在开发的 iPad 应用程序有问题。我有以下代码：

```
CFTimeInterval startTime = CFAbsoluteTimeGetCurrent();

[self showSpinnerWithMessage:@"Loading settings..."]; // Shows a UIActivityIndicator on screen

dispatch_async(dispatch_get_global_queue(0, 0), ^
{
    //Updating items on screen here
    [label1 setText:@"Test1"];
    [label2 setText:@"Test3"];
    //...

    CFTimeInterval difference = CFAbsoluteTimeGetCurrent() - startTime;

    if (difference < MINIMUM_INDICATOR_SECONDS)
    {
        [NSThread sleepForTimeInterval:MINIMUM_INDICATOR_SECONDS - difference];
    }

    dispatch_async(dispatch_get_main_queue(), ^(void)
    {
        [self removeSpinner]; // Removes UIActivityIndicator from screen
    });
}; 
```

问题是有时 UI 需要一段时间才能更新，并且在这些特定情况下，微调器 (UIActivityIndi​​cator) 在 UI 实际更新之前就消失了。我意识到这是因为屏幕上的项目直到下一个运行循环才真正更新，所以我的问题是，如何让我的`[self removeSpinner]`调用等到 UI 更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:37:04.793

尝试将 UI 更新代码放在带有`removeSpinner`.

```
dispatch_async(dispatch_get_main_queue(), ^(void)
{
    [label1 setText:@"Test1"];
    [label2 setText:@"Test3"];
    [self removeSpinner]; // Removes UIActivityIndicator from screen
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:12:03.637

在. `[self.view setNeedsDisplay];`_`[self removeSpinner]`

# linux - 使集群中的多台服务器保持同步？

> ID：13809080
> 
> 赞同：1
> 
> 时间：2012-12-10T20:55:58.873
> 
> 标签：linux, ssh, rsync

我目前正在管理一个 PHP-FPM 服务器集群，所有这些服务器往往彼此不同步。我在应用程序服务器（Magento）上使用的应用程序允许管理员修改系统上的各种文件，但现在该站点处于集群设置中，修改文件仅在单个实例上修改它（在集群中各种机器的应用服务器之一）。

是否有适用于 Linux 的开源应用程序可以让我保持所有这些服务器同步？我可以创建一个小型 VM 实例，该实例可以侦听来自机器的更改以进行同步。理论上，完美的应用程序将在每台要同步的机器上运行小客户端，这些客户端将与主服务器通信，然后主服务器将决定如何/从每台机器同步什么。

我已经研究过运行集中式文件服务器的可能性，但不幸的是，我的应用服务器分散在 EC2 和物理机之间，这使得这不可行。由于有多个应用程序服务器（其中一些是根据站点的负载动态创建的），简单地设置一个 rsync cron 作业效率不高，因为必须在每台机器上修改 cron 作业才能将文件发送给彼此集群中的机器，那将只是一堆不必要的数据传输/ssh连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-13T20:32:51.747

我正在处理建立一个类似的解决方案。我已经成功了一半。我建议您使用 lsyncd，它基本上监视磁盘的更改，然后立即（或您想要的任何时间间隔）使用 rsync 自动将文件同步到服务器列表。

我遇到的唯一问题是使服务器列表保持最新，因为我可以随时启动其他服务器，所以每当从集群中添加或删除机器时，我都需要通知集群中的每台机器。

我认为 lsyncd 是一个很好的解决方案，您应该研究一下。我遇到的问题可能对你来说也是一个问题，还有待解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:53:26.227

与其保持数十或数百台服务器交叉同步，它会更有效、更可靠，最重要的是，只需维护*一个*“管理节点”并将更改从该节点复制到所有“工作节点”。

例如，在我们公司，我们使用开发服务器 -> 暂存服务器 -> 实时后端工作流程，其中所有更改都使用自定义 php+rsync 前端跨服务器传输。这允许开发人员将更新推送到实时环境中的暂存服务器，测试更改，并将它们逐步滚动到实时后端。

类似的方法也可以很好地适用于您的情况。显然它不是即插即用的解决方案，但我认为它是最简单的方法——无论是在可维护性还是在可扩展性方面。

# tomcat7 - Tomcat jdbc-pool 获取RetryDelay

> ID：13809083
> 
> 赞同：1
> 
> 时间：2012-12-10T20:56:06.617
> 
> 标签：tomcat7, connection-pooling, c3p0, jdbc-pool

C3p0 缓存有 acquireRetryDelay 参数来设置获取尝试之间的时间。
tomcat7 jdbc-pool 有同样的功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T16:44:18.817

不，当尝试创建连接失败时，tomcat jdbc 池不会自动尝试再次连接。它只是将它作为 SQLException 得到的异常抛出（如果它一开始就不是一个）。如果是你的代码需要重试，你可以自己做，尝试连接几次。或者你也许可以做一个补丁，这似乎并不难做到。您可以尝试使用一些不同的库，他们说 BoneCP 非常好（尽管我从未尝试过）。

# json - dojo ajax 的服务器端处理

> ID：13809084
> 
> 赞同：1
> 
> 时间：2012-12-10T20:56:15.820
> 
> 标签：json, perl, dojo, cgi

我想将客户端 JSON 数据发布到服务器，cgi-bin perl 脚本将在服务器上读取它。一直在寻找有关如何在服务器端读取数据的示例，但一无所获。我正在使用 dojo 版本 1.8.1....

我可以看到请求来自服务器端的 cgi 脚本，但搜索输入值没有发现 JSON 数据。

在服务器端，我可以看到从 url 属性传递的“cmd”参数，我还看到没有数据的“1”。我已经在服务器端下载并安装了 JSON.pm，但在 POST 之后无法从客户端找到 JSON 数据。

服务器端 perl 脚本如何读取客户端发布的 JSON 数据？

谢谢！！！

```
var xhrArgs = {
   url: "/cgi-bin/DataExport.cgi?cmd=file",
   content: xfer_data,
       headers: { \"Content-Type\": \"application/json; charset=utf-8\"},
   load: function(data) {
       alert('Posted!' + data);
   },
   error: function(error) {
       alert('Error! ' + error);
   }
 };
 dojo.xhrPost(xhrArgs); 
```

更新..

修改了dojo 1.8.1版本的代码：

```
require(["dojo/request"], function(request){
  var promise = request.post("/cgi-bin/DataExport.cgi", {
    data: xfer_data,
    timeout: 4000
     });
  promise.response.then(function(response){
    var message = response.data;
    alert(message);
 });
}); 
```

我仍然在服务器端的 $ENV{'QUERY_STRING'} 中看不到任何东西。请求通过但我仍然找不到任何 JSON 数据？？？

```
var xfer_data = [ {"ID":"1",
"Device #":"176",
"Access #":"002-20",
"Address":"MH48 STEWART & CRANDON",
"TP":"MF",
"Curr":" ",
"Last":" ",
"Tdy":"8.6",
"-1":"8.6",
"-2":"8.6",
"-3":"8.6",
"-4":"8.6",
"-5":"8.6",
"-6":"8.6",
"Wk-1":"8.6",
"Wk-2":"8.6",
"Wk-3":"8.6",
"Wk-4":"8.6",
"Alarm":" R ",
"In":"14"} ]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:38:44.073

我还发现 dojoKit [xhrPost](http://dojotoolkit.org/reference-guide/1.8/dojo/xhrPost.html)文档有点含糊。但`content`接受名称、值对；我认为它应该将这些作为表单字段发布回来。

xhrPost 方法似乎不会自动将对象序列化为 JSON 字符串。为了安全起见，我会先这样做。我正在使用`dojo.toJson`我在[此处](http://dojotoolkit.org/reference-guide/1.7/dojo/toJson.html)记录并假设可用的方法。

```
var xfer_data = [ {"ID":"1",
"Device #":"176",
"Access #":"002-20",
"Address":"MH48 STEWART & CRANDON",
"TP":"MF",
"Curr":" ",
"Last":" ",
"Tdy":"8.6",
"-1":"8.6",
"-2":"8.6",
"-3":"8.6",
"-4":"8.6",
"-5":"8.6",
"-6":"8.6",
"Wk-1":"8.6",
"Wk-2":"8.6",
"Wk-3":"8.6",
"Wk-4":"8.6",
"Alarm":" R ",
"In":"14"} ];

var xfer_data_json = dojo.toJson( xfer_data );

var xhrArgs = {
   url: "/cgi-bin/DataExport.cgi?cmd=file",
   content: {data: xfer_data_json},
   load: function(data) {
     alert('Posted!' + data);
   },
   error: function(error) {
     alert('Error! ' + error);
   }
 };
 dojo.xhrPost(xhrArgs); 
```

然后 perl 端变成了常规的 CGI 处理，需要反序列化 JSON 数据（也未经测试）：

```
#!/usr/bin/perl
use warnings; use strict;
use CGI;
use JSON;

my $cgi = CGI->new;

if ($cgi->param('cmd') eq 'file') {
   my $data_json = $cgi->param('data');
   my $devices = JSON::from_json( $data_json );

   foreach my $device (@$devices) {
        printf ("device: id=%s access=%s address=%s\n", $device->{ID}, $device->{Access}, $device->{Address});
   }
} 
```

# ios - 错误 - 接收方没有标识符为“detailLoad”的segue

> ID：13809086
> 
> 赞同：0
> 
> 时间：2012-12-10T20:56:21.977
> 
> 标签：ios, xcode, ios6, segue

我知道以前有人问过这个问题，但我还没有找到解决问题的方法。我在 IB 中有两个 ViewController，它们与我想手动触发的 segue 连接。segue 从 ViewController 连接到目标 ok 并且标识符与代码中的标识符相同，我已经复制并粘贴了，但是当我尝试 segue 时它会因“NSInvalidArgumentException”而崩溃，原因：“Receiver () has no与标识符 'detailLoad'' 继续。

```
- (void)stuff
{
    NSLog(@"Tap");

    [self performSegueWithIdentifier:@"detailLoad" sender:self];

} 
```

以上是我用于 segue 的代码，是的，我知道它被称为“东西”，但这是一个测试项目，而不是实际项目。

正如我所说，segue 命名正确并且连接正确，但它仍然会出现此错误，因为它无法找到 segue。该项目是为 iOS 6 设置的。我已经设置了 NSLogs，`prepareForSegue`但这并没有被触发，因为错误似乎就`performSegueWithIdentier`在行中。关于为什么的任何想法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:32:26.053

我在 iOS 6 下遇到了同样的问题。在 segue“丢失”之前，我一直在调用已弃用的调用 presentModalViewController。用现在首选的 presentViewControllerAnimated 替换它，问题就消失了。

# java - Maven 和本机库文件

> ID：13809088
> 
> 赞同：1
> 
> 时间：2012-12-10T20:56:34.387
> 
> 标签：java, maven, project-management, native

我有一个在 mavenized java 项目中使用的库。该库由两部分组成：一个公开 API 的 jar 和 3 个 dll（本机库）。jar中有一段代码加载dll，所以dll所在的目录必须在PATH环境变量中。

将 jar 添加到我的项目中很容易。我设置 dll 的方式是每个开发人员将 dll 下载到一个目录中，然后将 path-to-dlls 添加到 PATH 环境变量中。

理想情况下，当新开发人员下载项目时，我希望尽可能少地进行设置。有没有更好的方法来设置 dll（无需将它们与项目分开下载并将目录添加到 PATH 的开销）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:55:52.680

如果您可以更改库的加载代码：在您的 jar/类路径中包含 DLL。然后将 DLL 文件[复制](https://commons.apache.org/io/)到本地文件系统。从那里加载。以下假设库位于类路径上。

```
public void loadLibrary(String library) throws IOException {
    InputStream source = getClass().getResourceAsStream(library);
    File tempFile = File.createTempFile("javatmp", ".dll");
    FileOutputStream dest = new FileOutputStream(tempFile);
    try {
        IOUtils.copy(source, dest)
    }
    finally {
        dest.close();
        source.close();
    }
    System.load(tempFile.getAbsolutePath());
    tempFile.delete();
} 
```

如果您无法更改库加载 DLL 的方式，则可以修改 PATH（使用[JNA](https://github.com/twall/jna)）并将 DLL 复制到该位置。以下假设库位于类路径的根目录上。

```
public void exposeLibrary(String library, File tempDir) throws IOException {
    InputStream source = getClass().getResourceAsStream(library);
    File tempFile = new File(tempDir, library);
    FileOutputStream dest = new FileOutputStream(tempFile);
    try {
        IOUtil.copy(source, dest)
    }
    finally {
        dest.close();
        source.close();
    }    
    WinLibc.INSTANCE._putenv("PATH=" + 
        System.getenv().get("PATH") + File.pathSeparator + tempDir.getAbsolutePath());

    // After this point System.loadLibrary(library) will load the DLL.
}

public interface WinLibC extends Library {
  static WinLibC INSTANCE = Native.loadLibrary("msvcrt", WinLibC.class);

  public int _putenv(String name);
} 
```

注意：我没有测试任何这些。第二种解决方案不适用于 Linux（但可以进行一些[更改](http://quirkygba.blogspot.com/2009/11/setting-environment-variables-in-java.html)。）

# jquery - 在表格行高调整大小时为 slideUp 设置动画

> ID：13809094
> 
> 赞同：0
> 
> 时间：2012-12-10T20:56:50.820
> 
> 标签：jquery, css, css-transitions, css-animations

在表格行中显示或隐藏一些 div 后，如何为高度调整设置动画？基本上，在用户在单选组中进行选择并将鼠标悬停在该行之外之后，其他单选选项将被隐藏以压缩表单。如果他们将鼠标移回该行，所有单选选项将再次出现。

如果表格行很好地向上滑动以适应新的高度，而不是只是消失[并重新出现]。这是我的代码：

[**这是一个小提琴。**](http://jsfiddle.net/JonMoore/UvBrJ/)

```
<tr id="range">
    <td>Range</td>
    <td>
        <div class="formStrip">
            <input name="radioRange" type="radio" id="relativeDates" />
            <label for="relativeDates" class="rightSpacer">Relative Dates</label>

            <label for="relativeStart">Start</label>
            <input name="relativeStart" type="text" id="relativeStart" class="inputMarginFix" />

        </div>
        <div class="formStrip">
            <input name="radioRange" type="radio" id="specificDates" />
            <label for="specificDates">Specific Dates</label>
        </div>
    </td>
</tr> 
```

* * *

```
$("#formTable tr").mouseenter(function() {
    $(this).find("input[type='radio']").parent().show();
}).mouseleave(function() {
    $(this).find("input[type='radio']").not(":checked").parent().hide();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:08:54.740

弄清楚了。我猜我的代码按原样工作，所以我所要做的就是将 .hide() 和 .show() 更改为 .slideUp() 和 .slideDown()。

```
$("#formTable tr").mouseenter(function() {
    $(this).find("input[type='radio']").parent().slideDown();
}).mouseleave(function() {
    $(this).find("input[type='radio']").not(":checked").parent().slideUp();
}); 
```

# datetime - TypeMock 伪造 DateTime.Parse

> ID：13809096
> 
> 赞同：0
> 
> 时间：2012-12-10T20:57:02.497
> 
> 标签：datetime, typemock

我需要一种使用 Typemock 伪造 DateTime.Parse 的方法，并让它在使用任何参数调用时返回相同的日期。

我有一个存储加密字符串的数据库字段，该字符串在加载时被解析为日期。保存数据的类有一个 Load() 方法，它将数据库数据复制到它的属性中，解密加密的内容并进行一些基本的验证，例如：

```
public class BusinessObject{
    public DateTime ImportantDate{get;set;}
...
    public void Load(DBObject dbSource){
        ...
        ImportantDate = DateTime.Parse(DecryptionService.Decrypt(dbSource.ImportantDate));
    }
} 
```

运行时一切正常。

我正在尝试使用 TypeMock 编写一个单元测试，以使用其 Load 方法将一些假数据加载到 BusinessObject 中。BusinessObject 的属性太多，无法从 XML 反序列化，但 DBObject 可以，因此我存储了一些表示有效数据的 XML。

在调用 DecryptionService 来解密数据之前，一切正常 - 它不起作用，因为我的开发机器没有加密过程中使用的数据库证书。我不能将它们放在我的机器上只是为了测试，那将是一个安全漏洞。

我将此添加到我的单元测试中：

```
Isolate.Fake.StaticMethods<DecryptionService>(Members.ReturnRecursiveFakes);
Isolate.WhenCalled(() => DecryptionService .Decrypt(null)).WillReturn("***");

Isolate.Fake.StaticMethods<DateTime>(Members.ReturnNulls);
Isolate.WhenCalled(() => DateTime.Parse("***"  /*DateStr*/)).WillReturn(DateTime.Now.AddYears(2)); 
```

DecryptionService 被伪造的第一部分工作，社会保障和其他敏感字符串正在“解密”，但无论我给 DateTime 什么参数，我仍然会得到一个或另一个异常（ArgumentNullException：字符串引用未设置为对象的实例，如果DateStr 为空，为“ *** ”时出现 FormatException）

如何（如果）我可以用 typemock 覆盖 DateTime.Parse 以便它返回有效的 DateTime 并传递任何无效的参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T13:13:09.353

我的名字是 Nofar，来自 Typemock 的支持团队。

DateTime.Parse 在 WhenCalled API 中不受支持，因此为了伪造它的返回值，您需要使用类中的方法对其进行包装，例如：

```
public class BusinessObject
{
    public DateTime Load (string s)
    {
    return DateTime.Parse(s);  
    }
} 
```

您的测试将如下所示：

```
 [TestMethod]
    public void TestMethodDateTime()
    {
        BusinessObject b = new BusinessObject();
        DateTime now= DateTime.Now.AddYears(2);

        Isolate.WhenCalled(()=>b.Load(null)).WillReturn(now);

        Assert.AreEqual(now, b.Load(null));
    } 
```

在 WhenCalled API 中支持 DateTime.Parse 在我们的待办事项中。

请随时通过邮件与我们联系 support@typemock.com

Nofar Typemock 支持

# mysql - MySQL：来自字符串拆分的动态“IN”子句

> ID：13809101
> 
> 赞同：1
> 
> 时间：2012-12-10T20:57:23.323
> 
> 标签：mysql, dynamic, split, explode

我有一个表格“wordlist”，每个单词都有一个分数：1或-1：

```
id | name | val
1, 'hello', 1,
2, 'world', -1
3, 'test', 1,
... 
```

我还有一个包含文本的表格“文本”：

```
id | text | score
1, 'hello world', 0
2, 'Lorem Ipsum Dolor Sit Amet...', 0
... 
```

我想使用以下规则更新表“文本”中的“分数”字段：

score = sum(wordlist.val) 其中句子的每个单词都存在于单词列表中。

我试过这种方式，但它不起作用：

```
update texts as t set score=(select sum(val) from wordlist where word in (concat('\'', replace(t.text,' ','\',\''),'\''))) 
```

我有超过 500K 行数据要处理，所以我宁愿只使用 MySQL，而不使用任何 PHP。

如果您有解决方案，请提前致谢！

我希望 MySQL 中有一个 explode() 函数！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:19:08.967

您可以使用 FIND_IN_SET()，如下所示：

```
select
  texts.*, sum(val)
from
  texts left join wordlist
  on find_in_set(wordlist.name, replace(texts.`text`, ' ', ','))>0
group by texts.id 
```

如果你需要更新你的表，你可以使用这个：

```
update texts inner join (
  select texts.id, sum(val) as score
  from texts left join wordlist
       on find_in_set(wordlist.name, replace(texts.`text`, ' ', ','))>0
  group by texts.id) s
  on texts.id=s.id
set texts.score=s.score 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T21:06:46.850

您可以使用`RLIKE`单词边界进行正则表达式匹配，如下所示：

```
UPDATE texts SET score = text_scores.score
FROM (
  SELECT texts.id as text_id, SUM(wordlist.val) as score
  FROM texts
  JOIN wordlist
    ON texts.text RLIKE CONCAT('[[:<:]]', wordlist.name, '[[:>:]]')
  GROUP BY texts.id) text_scores
WHERE id = text_scores.text_id 
```

# ruby-on-rails - Rails 中的序列号

> ID：13809105
> 
> 赞同：1
> 
> 时间：2012-12-10T20:56:51.963
> 
> 标签：ruby-on-rails

我有一个具有**seq**（序列号字段）的 Rails 应用程序。我希望它是一个不可见的字段，并让它自动递增，但与 id 分开。

在索引页面上，我希望能够拖放行以重新排序它们，然后序列应该从 1 到最高行。

有什么简单的方法可以做到这一点，或者任何人都可以建议我可以遵循的教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:11:49.153

如果我理解正确，您想要的是让您的记录“可排序”。看看这些插件：[Active Record Sortables](https://www.ruby-toolbox.com/categories/Active_Record_Sortables)

# algorithm - 探索图中的每个节点

> ID：13809107
> 
> 赞同：4
> 
> 时间：2012-12-10T20:57:35.817
> 
> 标签：algorithm, graph

我得到一个有 N 个节点（从 1..N 开始编号）和 M 个由一对（A，B）组成的双向边的连通图。边缘未加权。

我有 K 个人从节点 1 开始，我想探索图中的每个节点。我需要一个单位的时间让一个人从一个节点移动到它的一个邻居节点。

探索每个节点需要多长时间？我正在寻找一种有效的算法来计算最小遍历时间，但恐怕这是一个 NP 完全问题。（虽然对边数和人数的限制很小）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:28:41.200

假设 K 为 1。那么最小化问题简化为找到至少接触每个节点一次的最小长度路径。

如果我们构造一个新的加权图 G' 具有相同的节点并且每两个节点之间都有边，其权重是原始图中这些节点之间的最小距离，那么通过 G 中所有节点的最小长度路径是最小长度哈密顿量通过 G' 的路径，旅行商问题，这是众所周知的 NP 完全问题。

因此，对于至少一个 K 值，问题是 NP 完全的。然而，对于较大的 K 值（例如，≥ N），我们可以在更短的时间内产生最小解，因为我们可以构造最小生成树并找到最远元素的距离。我怀疑对于小 K 值是否有任何这种简化的解决方案，但我肯定会使用 MST 作为寻找合理解决方案的启发式方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-04T02:03:45.317

对我来说，这似乎是 BFS。

您可以像查看树一样查看图形，其中起始节点是根。从这个角度来看，如果叶子的数量 <= 人数，答案将是最深的叶子（离根最远），答案是该叶子的深度。这是正确的，因为如果每个人访问每个叶子，那么在这样做的过程中，所有节点都会被访问。

但是，如果在每个人访问叶子后仍有未访问的节点，那么您需要在答案中添加最近的人访问未访问节点所需的最大时间（或距离）。

然而，这不是完整的答案。比这更复杂。

如果您有以下图像：

[![在此处输入图像描述](../Images/8e9782cc01ab76cb4c2e4c2f7726a8f1.png)](https://i.stack.imgur.com/uwGrK.png) 你不会想盲目地bfs。您可能希望按照从最浅到最深的顺序访问节点，因为这样您就不必再往下走。例如，0 -> 1 -> 0 -> 2 -> 0 -> 3 -> 0 -> 4 比 0 -> 4 -> 0 -> 3 -> 0 -> 2 -> 0 -> 更有效1\. 这是正确的原因是因为你只能节省最后一次遍历的时间，所以你想让那个时间最长。

此外，也许让来自不同分支的人访问未访问的节点可能更有效（以帮助来自当前分支的人），因此如果需要时间，您希望将未访问的节点分配给周围分支的人该人到达 0 的时间小于当前分支中的人员访问该分支中所有节点所需的时间。如果可以将一个分支中的一个人分配到多个其他分支，则您希望选择未访问节点数最多的分支。这个“帮助”人也是为什么您要按顺序从最浅到最深的节点访问节点，而不是最后访问最深的节点。

所有这些听起来可能令人困惑，但关键是 BFS。这就是你的问题的解决方案。它基本上是经过修改的 BFS。

至于实现，您可以使用递归（或堆栈），它们通常用于树遍历。请注意，对于未访问节点 > 人数的情况，您不必模拟到剩余未访问节点的行进。

# jsf - 在 Firefox 中下载 PDF 文件会导致“错误：格式不正确的行：1，列：9 源代码：%PDF-1.4”

> ID：13809108
> 
> 赞同：2
> 
> 时间：2012-12-10T20:57:35.010
> 
> 标签：jsf, download, omnifaces

我有一个 JSF Web 项目，我在 Jasper Reports 5.0 中生成输出。我正在尝试将输出发送回浏览器。我使用了 Omnifaces (1.2) 和 Primefaces 3.4.2 (showcase) 示例。

检查Firefox中的错误日志时，它说

> 时间戳：12/10/12 9:40:39 PM 错误：格式不正确 行：1，列：9 源代码：%PDF-1.4

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T13:46:38.033

在客户端处理 HTTP 响应期间，此错误可识别为 XML 解析错误。这反过来表明响应被隐式地视为 XML。这反过来表明您实际上是在发送一个 ajax 请求，该请求默认情况下假定每个响应都是 XML。

无法通过 ajax 下载文件。Ajax 请求由 JavaScript 处理，由于安全原因，JavaScript 无法以编程方式触发带有任意内容的“*另存为*”对话。

从命令链接/按钮中删除`<f:ajax>`，或者在 PrimeFaces 的情况下，添加`ajax="false"`到命令链接/按钮。

# android - Android WebView 字体面最初未呈现

> ID：13809111
> 
> 赞同：1
> 
> 时间：2012-12-10T20:57:40.000
> 
> 标签：android, html, webview, font-face

我正在开发一个移动网络应用程序。这个问题在某些 Android 上很明显（我认为只有 2.3.x 手机）。

页面上有一个标签和一个输入提交按钮。两者的样式都具有相同的字体（TradeGothic，由@font-face 样式创建）。标签文本始终正确呈现，但按钮文本在第一次访问页面时永远不会显示。因此，如果您转到页面并单击按钮或返回然后前进（到有问题的页面），那么按钮文本显示正常。

我尝试使用 jquery 重置输入按钮的值。我也试过设置它的 html 和 text 但是没有变化。

我还能尝试什么？（除了丢失字体。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:25:04.850

有点 hacky 的选项，你不能为使用所需字体的按钮使用图像吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T19:10:46.643

我通过在应用程序启动时在 web 视图中（在后台）加载一个虚拟 html 页面来解决这个问题。

虚拟页面仅包含按钮的 html 并加载相同的 css 文件。

# bash - 带主管的 PostgreSQL

> ID：13809112
> 
> 赞同：2
> 
> 时间：2012-12-10T20:57:41.150
> 
> 标签：bash, postgresql, shell, debian, supervisord

我想知道是否可以在 debian 服务器上使用[主管来关注 postgreSQL？](http://supervisord.org/)我找不到任何示例，所以我想知道它是否值得，或者也许有一种更直接的方法可以确保它始终运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T22:41:21.660

请参阅在 Ubuntu 10.10 上将[PostgreSQL 与 Supervisor 一起使用](http://nicksergeant.com/using-postgresql-with-supervisor-on-ubuntu-1010/)以及在[Running PostgreSQL with Supervisord](https://stackoverflow.com/questions/11092358/running-postgresql-with-supervisord)中的说明。[pastebin](http://pastebin.com/rhfh9V2g)中也有一些有用的示例。鉴于程序的通用名称可能很难找到这些，获取示例的诀窍是搜索 supervisord。

# android - 将 ios 移植到 android：http post

> ID：13809115
> 
> 赞同：0
> 
> 时间：2012-12-10T20:57:56.860
> 
> 标签：android, ios, http-post, porting

尝试发布带有其他数据的图像。

IOS代码：

```
NSMutableDictionary *params = [NSMutableDictionary dictionary];
[params setValue:userID forKey:@"userid"];
[params setValue:sessionID forKey:@"sessionid"];

CWNetworkOperation *operation = [self operationWithURL:url httpMethod:@"POST" params:params];
NSData *imageData = UIImageJPEGRepresentation(image, 0.8f);
[operation setData:imageData forKey:@"photo" mimeType:@"image/jpeg" fileName:@"image.jpg"]; 
```

可以将 userid 和 sessionid 添加为 org.apache.http.NameValuePair

到 org.apache.http.client.methods.HttpPost，但添加编码为 base64 字符串图像字节数组值的“照片”键不会给出肯定的结果。

嗅探器屏幕：

![在此处输入图像描述](../Images/907b925f9b0d38a650a7870d3d836e6c.png)

如何在java中做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:16:14.003

将我的应用程序移植到 android 时遇到了同样的问题。我最终使用了本文中描述的 apache 网络库。这包含了多表单 POST 所需的所有信息。我不记得我在哪里下载了 apache 网站上的 JAR 文件，但我遇到了这个：

[http://blog.tacticalnuclearstrike.com/2010/01/using-multipartentity-in-android-applications/](http://blog.tacticalnuclearstrike.com/2010/01/using-multipartentity-in-android-applications/)

应该给出关于做什么的总体思路。

# html - DIV 高度为 100%

> ID：13809116
> 
> 赞同：0
> 
> 时间：2012-12-10T20:58:00.320
> 
> 标签：html, css

我有以下内容：

## HTML

```
 <body>
    <div id="header"></div>
    <div id="logo"></div>
    <div id="container">
      <h1>Welcome message</h1>
      text text text text text text text text text text text text text text
    </div>
  </body> 
```

## CSS

```
html{
    background-color: #000000;
    color: white;
}

html,body, img{
    margin: 0;
    padding: 0;
    border: 0;
}

#header{
    position: absolute;
    left: 0;
    top: 0;
    background-color: yellow;
    width: 100%;
    height: 537px;
    z-index: -1;
}

div#logo{
    width: 385px;
    height: 141px;
    background: white;
    margin-left: auto;
    margin-right: auto;
}

#container{
    width: 964px;
    margin-left: auto;
    margin-right: auto;
    min-height: 100%;
    height: 100%;
    background-color: #000000;
    padding-left: 6px;
    padding-right: 6px;
} 
```

我想`div#container`伸展到底部，但它没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T21:04:52.950

`body`你也必须伸展`html`：

```
html, body {
    height:100%;    
} 
```

看看这个[Fiddle](http://jsfiddle.net/rdiaz/3LQvA/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:04:01.437

为了让元素达到 100% 的高度，它们需要应用一个位置。

所以

```
#container{
    position: relative;
    height: 100%;
} 
```

根据父元素的定位将决定它的高度。

如果此元素父级应用了定位，它将成为其父级的 100% 高度。如果没有它的父母有定位，它将使用正文并显示在整个页面上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T02:30:47.833

```
html, body {
    height:100%;    
} 
```

因为它跨越整个页面，所以高度明智。

# php - 访问 3d 数组

> ID：13809118
> 
> 赞同：0
> 
> 时间：2012-12-10T20:58:02.347
> 
> 标签：php, forms, multidimensional-array

我对 php 以及如何使用多维数组的理解是有限的，所以我很难理解如何访问 name="value"。

```
<input name='questions[]' type='text' value='question 1' /><br/>
  <input name='choice[1-1][]' type='text' value='option 1' />   
    <input name='value[1-1][1][]' type='text' value='value' /><br/>
  <input name='choice[1-1][]' type='text' value='option 2' />   
    <input name='value[1-1][2][]' type='text' value='value' /><br/>
  <input name='choice[1-1][]' type='text' value='option 3' />   
    <input name='value[1-1][3][]' type='text' value='value' /><br/> 
```

我使用了一个 foreach 循环并访问了它，但我想访问值数组中的单个元素。所以我相信使用另一种方法会更好。

我通过以下方式访问了问题[]：

```
$q = $_POST['questions'];
echo $q[0]; 
```

但我尝试以类似的方式访问choice[] 和value[]，但没有成功。

首先，我尝试使用 print_r() 来查看数组是如何设置的，我看到我需要额外的 [] 来选择和两个额外的值，但是我添加了它们并得到了错误消息，未定义的偏移量：0，这来自我的研究found 表示未设置数组，我显然访问不正确，请有人指教。

也可以找到关于多维数组的好教程的建议，我已经看过 php.net。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:18:47.940

基本上，这就是 PHP 在提交此表单时填充数组的方式（*$_GET/$_POST -- 取决于表单方法*）。方括号内的任何内容都是文字（除了一些字符，如下划线，它们被转换为破折号）。空括号意味着 PHP 将自动将每个值附加到该数组（从 0 索引开始），就像您`array_push`在 PHP 中使用的一样。

所以你的数组会喜欢这个......

```
$_POST['value']['1-1'][1][0] = 'whatever value the user supplied 1';
$_POST['value']['1-1'][2][0] = 'whatever value the user supplied 2';
$_POST['value']['1-1'][3][0] = 'whatever value the user supplied 3'; 
```

要访问 PHP 中的任何这些元素，您将使用相同的符号。如果您想遍历它们，则必须考虑它们是三维的。所以例如...

```
foreach ($_POST['value']['1-1'] as $values) {
    foreach ($values as $value) {
        echo "$value\n";
    }
} 
```

这将输出

```
whatever value the user supplied 1
whatever value the user supplied 2
whatever value the user supplied 3 
```

另外，我忘了提到你可以使用类似 var_dump($_POST, $_GET); 查看一个可打印的数组结构。我强烈推荐使用[var_dump](http://php.net/var-dump)来调试变量，因为它为您提供了很多关于这些变量的有用信息，这些信息超出了任何其他函数，如 print_r/echo/etc...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:13:49.477

与其告诉你确切的答案，不如让我用提示引导你，这样你就可以自己学习并从中获得乐趣。

利用：

```
 print_r($_POST); 
```

结果，您将能够决定如何调用每个元素。如果您仍然有问题，请在下面评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T21:14:01.040

我认为这会比你当前的结构更容易通过 php 处理

```
<input name='questions[q1]' type='text' value='question 1' /><br/>
<input name='questions[choice][1]' type='text' value='option 1' />   
<input name='questions[value][1]' type='text' value='value' /><br/>
<input name='questions[choice][2]' type='text' value='option 1' />   
<input name='questions[value][2]' type='text' value='value' /><br/>  
<input name='questions[choice][3]' type='text' value='option 1' />   
<input name='questions[value][3]' type='text' value='value' /><br/> 
```

根据您的具体情况，我可以看到一些变化。

# objective-c - 验证 CLPlaceMark 在美国境内

> ID：13809122
> 
> 赞同：0
> 
> 时间：2012-12-10T20:58:06.407
> 
> 标签：objective-c, core-location

我需要验证我的应用的用户是否在美国境内。目前我得到了他们的 GPS 位置，或者，如果他们不分享他们的 GPS 位置，我要求提供邮政编码。在这两种情况下，我都使用 CLGeocoder 类来请求获取位置的 CLPlaceMark（通过反向或正向地理编码）。

我如何使用 CLPlaceMark 来验证他们是否在美国境内？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:05:03.293

您将需要对他们的位置进行反向地理编码。为此，请查看[CLGeocoder](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html#//apple_ref/occ/cl/CLGeocoder)类。

我也认为[这个答案](https://stackoverflow.com/a/8705741/27860)可能有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:22:41.333

为了验证我的应用程序的用户是否在美国境内，我决定使用字符串与 CLPlaceMark 的 country 属性进行比较。

```
CLPlacemark *placemark = nil;

for (CLPlacemark *extractedPlacemark in placemarks) {
    if ([extractedPlacemark.country isEqualToString:@"United States"]) {
            placemark = extractedPlacemark;
    }
}

if (place mark) {
    // Do something with place mark because its within the United States
} else {
    // Let the user know that they must be within the United States to use the app
} 
```

它可能不是最好的解决方案，因为它是字符串比较，但我找不到更好的解决方案。

# webgl - 是否可以从顶点着色器中对点粒子进行排序？

> ID：13809132
> 
> 赞同：0
> 
> 时间：2012-12-10T20:58:46.770
> 
> 标签：webgl, three.js

这有点丑。

![悲伤的脸.png](../Images/18944395d16492b44a084ca5c908c834.png)

基本上，我有一些复杂的数学来定位一堆点粒子。鉴于有很多粒子，在顶点着色器中定位所有顶点似乎最快。因此，记录在内存中的几何图形中的顶点的真实“位置”向量与顶点着色器最终放置它的位置相去甚远。

当然，问题在于深度排序。THREE.js`ParticleSystem`可以进行深度排序，但据我所知，它无法在通过顶点着色器*后根据深度顶点的输出进行排序。*

顶点着色器是否有某种解决方法？或者我是否需要将我所有的定位都转移到 JavaScript 中，这样计算会慢得多？渲染顺序是否需要在着色器前确定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:13:49.687

如果您的像素是附加绘制的，则排序不是问题:)

否则：不，除非在特殊情况下。粒子是完全随机的吗？他们需要吗？如果您在 JS 中排序，您可以只偶尔排序，还是将它们预先排序在堆中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-24T03:05:27.093

如果你可以在顶点着色器中计算你的粒子位置，并且你可以根据距离计算你的参数，你应该能够编写一个进行排序的顶点着色器。话虽如此，获取距离方面的参数可能是一个挑战，也可能是不可能的。

# c++ - 读取 fstream 返回垃圾

> ID：13809138
> 
> 赞同：0
> 
> 时间：2012-12-10T20:59:11.853
> 
> 标签：c++

我正在尝试读取仅包含字符串的文本文件。它正在编译和打开，但在读取时只显示与文件中的字符完全无关的垃圾。

任何人都可以看到有什么问题吗？

```
#include <iostream>
#include <fstream>

using namespace std;

fstream myfile;
char* input;

void main(void)
{
    myfile.open("H://fstream_test.txt", fstream::in);
    if(myfile.fail()) 
    {
        cout<<"error"; exit(0);
    }
    cout<<"file is open";

    int beginning = myfile.tellg();
    myfile.seekg(0, fstream::end);
    int end = myfile.tellg();
    int size = end-beginning;
    cout<<size; //returns 15

    input = new char[size];
    myfile.read(input,size);

    cout<<input;
    //returns junk

    //for(int i=0;i<size;i++)
        //cout<<input[i];
    //returns the same;
} 
```

结束编辑为：

```
input = new char[size];
    myfile.seekg(0, fstream::beg);
    while(!myfile.eof())
    {
        myfile.read(input,size);
    }

    cout<<input;
    system("pause"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:00:33.553

在尝试阅读之前，您会搜索到文件的末尾：

```
myfile.seekg(0, fstream::end); 
```

要完成这项工作，您必须先从头开始。

另请注意，`myfile.read()`不会附加 NUL 终止符。

# c# - C# 属性 - 返回一种类型并存储另一种类型

> ID：13809139
> 
> 赞同：1
> 
> 时间：2012-12-10T20:59:15.193
> 
> 标签：c#, properties

我有一个名为 Attribute 的类，其中包含一个列表。如果列表中存在给定的字符串，我希望 get 方法返回 true/false。但是，我希望 set 方法接受一个字符串并将其添加到列表中。

我手边没有编译器，但我的代码或多或少看起来像这样。这可能吗？

```
class Attribute{

    private list<string> m_data;

    public bool this[string s] {
        get { return this.m_data.Contains[s]; }
        set { this.m_data.Add[s]; }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:05:20.580

是的，这会起作用，但是请记住，您必须按如下所述进行设置。一个有点奇怪的属性用法。将值设置为 true 或 false 会将字符串放入列表中。

```
attribute["Test String 1"] = true;
attribute["Test String 2"] = false; 
```

如您所料，测试字符串是否在列表中：

```
Boolean result1 = attribute["Test String 1"]; // true
Boolean result2 = attribute["Test String 2"]; // true
Boolean result3 = attribute["Test String 3"]; // false 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T21:11:39.917

首先我不确定它是否有效，但我尝试了它并通过一些调整进行编译：

```
class Program {
    static void Main( string[ ] args ) {
        Attribute attribute = new Attribute( );
        attribute[ "string1" ] = true;
        attribute[ "string2" ] = false;

        Console.WriteLine( attribute[ "string1" ] ); //True
        Console.WriteLine( attribute[ "string2" ] ); //True        
        Console.WriteLine( attribute[ "string3" ] ); //False
    }
}

class Attribute {
    private List<string> m_data;

    public Attribute(){
        m_data = new List<string>();
    }

    public bool this[ string s ] {
        get { return this.m_data.Contains( s ); }
        set { this.m_data.Add( s ); }
    }
} 
```

**编辑：**

它可以完美运行，没有任何问题，但似乎非常无稽之谈。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T21:15:03.507

这行得通，但它非常违反直觉。对您的属性（实际上是一个索引器）的赋值必须包含某种布尔值，该值会被忽略并丢弃：

```
Attribute a = new Attribute();
a["test"] = true;                 // Adds "test" as expected -- but WTF does the true mean?
a["foo"] = false;                 // Adds "foo" -- the false means nothing
Console.Out.WriteLine(a["test"]); // returns true 
```

所以是的，你可以这样做。但这是个坏主意，因为没有人维护代码会知道发生了什么。那个悬空的布尔值看起来有某种意义，但它没有；当分配 true 与分配 false 做同样的事情时，它违反了 Least Astonishment 原则！更不用说，您作为“索引”传入的值实际上根本不是任何事物的索引。这是合法的，但使用的语法与它的用途完全不同。

老实说，您最好`List<string>`直接访问并调用其现有的`Contains()`和`Add()`方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T21:52:33.097

虽然读写属性本质上是一个`get`方法和一个`put`方法，并不能真正做这样一对方法不能做的任何事情，但如果方法被包裹在一个“属性”，它对方法可以采用的形式提出了各种限制。最值得注意的是，一个属性可能没有`set`这些签名的多个重载，不同之处仅在于用于指定新值的参数类型，也可能没有`get`返回类型与方法的“新值”参数不匹配的`set`方法，并且其参数与 的所有其他参数不完全匹配`set`。

我不确定通过使语法糖仅可用于满足上述限制的属性可以获得什么。如果读写属性只是与 setter 方法并列的 getter 方法，则可能有一个`ReadableFoo`带有抽象的抽象类型`get`property `Foo`，并有一个派生`Mutablefoo`类型覆盖`get`并添加一个`set`. 不幸的是，这是不可能的。最好的办法是让该方法实现一个调用抽象方法`ReadableFoo`的非虚拟只读属性；`Foo`然后`MutableFoo`可以覆盖上述方法，同时用读写属性替换只读属性（`get`应该链接到上述抽象方法）。

您的特定场景看起来像是一种可行的方式来做您想做的事情，尽管我建议设置`a["George"]=false;`应该从集合中删除“George”。对于属性设置器具有多个类型重载的许多其他场景可能很有用，但是，由于属性设计不允许，因此根本无法在 .net 中实现。

# jquery - 自定义样式的 Wordpress 主题选项

> ID：13809150
> 
> 赞同：0
> 
> 时间：2012-12-10T20:59:54.653
> 
> 标签：jquery, css, wordpress

我需要一个带有颜色选择器（farbtastic）的 Wordpress 主题选项页面来更改 CSS 的任何类或 ID。就我而言，我需要更改页脚容器颜色 ( `.footer_container`)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:06:06.470

只需使用主题文件夹 (/wp-content/themes/yourthemename/style.css) 中的 style.css 文件。并在那里添加您的 CSS 规则。主题很少可以从管理区域完全定制。

# c# - XPath 选择兄弟姐妹，其中兄弟姐妹是根文档

> ID：13809151
> 
> 赞同：0
> 
> 时间：2012-12-10T20:59:56.987
> 
> 标签：c#, xpath

我需要选择 root 的兄弟姐妹，并且只针对第一级。

我正在选择html，它可以是anyting...

前任：

```
<p><img...></p>
<p><img...></p>
<ul><li><a>somelink</a></li></ul>
<a>... 
```

我尝试的是这个`/*[following-sibling::*]`，但只选择了两个`<p><img...></p>`......

我想要的是选择 PP ul a 中的第一级。

我使用 Html Agillity Pack，我的代码如下所示：

```
 var nodeCollection = new List<HtmlNode>();
        var document = new HtmlDocument();
        document.LoadHtml(html);

        if (document.DocumentNode != null)
        {
            foreach (var node in document.DocumentNode.SelectNodes("/*[following-sibling::*]"))
            {
                nodeCollection.Add(node);
            } 
```

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:05:15.633

我想我找到了一个有效的 xpath 并且它并不难 xD 以下工作：`/child::*`

# codeigniter - 如何将自定义代码添加到 CodeIgniter 的“系统”文件夹？

> ID：13809152
> 
> 赞同：0
> 
> 时间：2012-12-10T20:59:56.613
> 
> 标签：codeigniter

我正在考虑在 CodeIgniter 之上构建我自己的 CMS / 扩展框架，我想知道如何构建它以将代码保留在`application`文件夹之外。我注意到在典型的 CI 设置中，文件结构如下所示：

```
application/    //code for your application
system/         //CodeIgniter core
index.php 
```

但是，在[PyroCMS](https://www.pyrocms.com/)中，他们使用了以下结构：

```
application/    //code for your application 
system/
--cms/          //PyroCMS core
--codeigniter/  //CodeIgniter core. 
```

我如何实现类似的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:17:23.463

简短的回答是一切都从 index.php 开始，这是包含 core/CodeIgniter.php 的地方，也是设置应用程序和系统路径的地方（从配置中检索值）。

我认为 pyro cms 实际上将 /system/cms 设置为应用程序文件夹，大概他们已经编写了代码来查看呈现的应用程序文件夹的内容并对其进行处理。

另一种方法是使用wiredesigns模块化HMVC：

[https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc)

这将允许您将代码分成模块。只需有一个名为 cms 的文件夹，其中包含您的所有 cms 模块和另一个文件夹以在顶部构建您的自定义内容。

您在配置中设置了模块文件夹的路径，因此如果您希望在系统文件夹中使用 cms 代码，您可以在此处设置模块文件夹的路径，并以标准方式使用 codeigniter 在顶部构建，可能在之前或之后添加一个钩子您的控制器已加载以调用 cms 核心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:05:56.907

要模拟该结构，只需编辑 index.php 常量：

*   应用路径
*   基本路径

@WebweaverD 为您提供了一个很好的解决方案来改进您的应用程序使用 HMVC。我再给你一个。

像这样的东西怎么样：

```
-system/      //CI core
-index.php      //manage the front_end requests
-acp.php      //manage the back_end requests
-apps/      //applications dir
--back_end/      //only "admin" controllers, libraries, config. No views here
--frond_end/      //only "user" controllers, libraries, config. No views here
--acp/      //views for back_end
--themes/      //views for front_end 
```

以上所有内容都可以在您只想扩展必要的核心文件时实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:10:08.953

我的只是一个建议，但您可以轻松地分叉 pyrocms 并在其上构建自己的 cms。PyroCMS 将在下一个版本中弃用 codeigniter，以便您可以保留他们的代码并在需要的地方进行修复并根据需要进行修改

# java - 如何结合.java和html？

> ID：13809155
> 
> 赞同：0
> 
> 时间：2012-12-10T21:00:10.660
> 
> 标签：java, html, eclipse, web-crawler

我正在尝试创建一个 Web 应用程序，用户可以在其中从下拉列表中选择电影的名称（例如“Skyfall”）。然后我想执行一个爬虫去 rottentomatoes.com 并获取与这部电影相关的所有 html 页面。我已经使用 Tomcat 在 Eclipse 中创建了我的 Web 应用程序（GUI）。我有一个网络爬虫：crawler4j，如果我选择将主 .java 文件作为应用程序运行，它就会运行。我怎样才能将这两者结合起来？

1.  是否可以使用 html 中的参数（电影名称）调用 java 类文件？
2.  为了在我的html中执行它，我是否必须使用爬虫创建一个单独的小程序？我可以这样做并用它发送字符串（来自 html 的电影名称，所以我需要通过爬虫搜索发送它）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:44:25.823

正如 Marvo 在评论中建议的那样，我通过实现一个激活爬虫的 Servlet 解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:22:54.663

你可以使用[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/)，我一直用它来从其他网站获取内容。

或者，您也可以使用[HtmlUnit](http://htmlunit.sourceforge.net)

# javascript - 如何在 CSS 更改后在代码隐藏中获取 asp:Panel 的 CSS 类

> ID：13809157
> 
> 赞同：0
> 
> 时间：2012-12-10T21:00:17.677
> 
> 标签：javascript, asp.net, css

我有一个面板控件，它的类是通过 javascript 更改的。当用户单击一个按钮时，我需要检查 Panel 的 CSS 类，如果它是更改的值，那么我需要做一些事情。问题是，一旦我使用 Javascript 更改 CSS 类，服务器就无法取回该信息。我需要服务器识别类已更改。我已经尝试过`__doPostback`，但这会弄乱页面上的许多元素。寻找建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:07:45.917

您可以添加一个`hidden control`到您的页面并将其存储在那里..

ASPX 中的 IE

```
 <asp:HiddenField runat="server" id="hdnCSS" ClientIDMode="Static" /> 
```

当你运行你的 JS 时，添加一些代码来填充这个隐藏字段。

```
$("#hdnCSS").val("yourValue"); // jquery

 OR

document.getElementById("hdnCSS").value = "yourValue" // javascript 
```

当您回发时，该值将在`hdnCSS.Value`

# python - Python中从a到b的偶数之和

> ID：13809159
> 
> 赞同：4
> 
> 时间：2012-12-10T21:00:20.327
> 
> 标签：python, python-3.x

这是我的代码：

```
def sum_even(a, b):
    count = 0
    for i in range(a, b, 1):
        if(i % 2 == 0):
            count += [i]
        return count 
```

我举的一个例子是 print(sum_even(3,7)) ，输出为 0。我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T21:04:38.473

您的缩进已关闭，它应该是：

```
def sum_even(a, b):
    count = 0
    for i in range(a, b, 1):
        if(i % 2 == 0):
            count += i
    return count 
```

这样`return count`它就不会局限于您的 for 循环（在这种情况下，它将在第一次迭代时返回，导致它返回 0）

（并更改`[i]`为`i`）

* * *

**注意：**另一个问题 - 你应该小心使用`range`：

```
>>> range(3,7)
[3, 4, 5, 6] 
```

所以如果你打电话给：

*   `sum_even(3,7)`
*   `sum_even(3,8)`

现在，它们都会输出`10`，这对于 3 到 8 之间的偶数之和是不正确的，包括 3 和 8。

你真正想要的可能是这个：

```
def sum_even(a, b):
    return sum(i for i in range(a, b + 1) if i % 2 == 0) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T21:05:24.370

1.  将`return`语句移出`for`循环范围（否则您将在第一次循环迭代时返回）。

2.  更改`count += [i]`为`count += i`。

* * *

此外（不确定您是否知道这一点），`range(a, b, 1)`将包含从`a`到`b - 1`（不是`b`）的所有数字。此外，您不需要`1`参数：`range(a,b)`将具有相同的效果。所以要包含所有的数字`a`，`b`你应该使用`range(a, b+1)`.

将所有偶数从`a`to相加的最快方法可能`b`是

```
sum(i for i in xrange(a, b + 1) if not i % 2) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-10T21:40:26.333

通过正确使用 range 函数的 step 参数，您可以使它变得更简单。

```
def sum_even(a, b):
    return sum(range(a + a%2, b + 1, 2)) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-10T21:38:13.787

你不需要循环；你可以使用简单的代数：

```
def sum_even(a, b):
    if (a % 2 == 1):
        a += 1
    if (b % 2 == 1):
        b -= 1
    return a * (0.5 - 0.25 * a) + b * (0.25 * b + 0.5) 
```

**编辑：**

正如 NPE 指出的那样，我上面的原始解决方案使用浮点数学。`sum_even(10, 10000)`我并不太担心，因为与删除循环（例如，如果调用）相比，浮点数学的开销可以忽略不计。此外，计算使用 2 的（负）幂，因此不应受到舍入误差的影响。

无论如何，通过将所有内容乘以 4 然后在最后再次除以的简单技巧，我们可以始终使用整数，这是更可取的。

```
def sum_even(a, b):
    if (a % 2 == 1):
        a += 1
    if (b % 2 == 1):
        b -= 1
    return (a * (2 - a) + b * (2 + b)) // 4 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-11T10:29:42.413

如果 b 接近 2^32，我希望你看看你的循环是如何工作的；-) 正如马修所说，不需要循环，但他没有解释原因。

问题只是简单的算术序列[维基](http://en.wikipedia.org/wiki/Arithmetic_progression)。该序列中所有项目的总和为：

```
 (a+b)  
Sn = ------- * n  
        2 
```

其中“a”是第一项，“b”是最后一项，“n”是项目的编号。如果我们使“a”和“b”为偶数，我们可以轻松解决给定的问题。因此，使 'a' 和 'b' 甚至只是：

```
if ((a & 1)==1):
    a = a + 1
if ((b & 1)==1):
    b = b - 1 
```

现在想想我们在两个偶数之间有多少项目 - 它是：

```
 b-a
n = --- + 1
     2 
```

把它代入方程，你得到：

```
 a+b       b-a 
Sn = ----- * ( ------ + 1)
       2         2 
```

所以你的代码看起来像：

```
def sum_even(a,b):
    if ((a & 1)==1):
        a = a + 1
    if ((b & 1)==1):
        b = b - 1
    return ((a+b)/2) * (1+((b-a)/2)) 
```

当然，您可以添加一些代码来防止 a 等于或大于 b 等。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-10T21:04:15.317

缩进在 Python 中很重要。您编写的代码在处理完第一个项目后返回。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-01-24T13:31:24.927

这可能是使用 range 函数的一种简单方法。范围内的第三个数字是步数，即 0、2、4、6...100

```
sum = 0
for even_number in range(0,102,2):
    sum += even_number
print (sum) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-10T21:07:34.660

```
def sum_even(a,b):
    count = 0
    for i in range(a, b):
        if(i % 2 == 0):
            count += i
     return count 
```

这里有两个错误：

*   添加 i 而不是 [i]
*   您在第一次迭代时直接返回值。将返回计数移出 for 循环

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-07-13T15:52:08.393

**开始**数和**结束**数（**含**）之间所有**偶数**的**总和。**

 ******```
 def addEvenNumbers(start,end):
  total = 0
  if end%2==0:
    for x in range(start,end):
      if x%2==0:
        total+=x
    return total+end
  else:
    for x in range(start,end):
      if x%2==0:
        total+=x
    return total
print addEvenNumbers(4,12) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-09-14T20:59:26.850

使用高级 python 功能更加花哨。

```
def sum(a,b):
    return a + b
def evensum(a,b):
    a = reduce(sum,[x for x in range(a,b) if x %2 ==0])
    return a 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-04-09T12:51:09.997

偶数的总和，包括最小和最大数字：

```
def sum_evens(minimum, maximum):
    sum=0
    for i in range(minimum, maximum+1):
        if i%2==0:
           sum = sum +i
           i= i+1
    return sum

print(sum_evens(2, 6)) 
```

输出为：12

sum_evens(2, 6) -> 12 (2 + 4 + 6 = 12)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-03-25T14:20:33.920

基于列表的方法，`b+1`如果要包含最后一个值，请使用。

```
def sum_even(a, b):
    even = [x for x in range (a, b) if x%2 ==0 ]
    return sum(even)

print(sum_even(3,6)) 
```

```
4

[Program finished] 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2018-11-30T01:36:11.137

这会将 1 到 10 之间的所有偶数值相加，并输出存储在变量 x 中的答案

```
x = 0 
for i in range (1,10):
    if i %2 == 0:
        x = x+1
        print(x) 
```******

# internet-explorer-9 - IE 支持中的内容安全策略

> ID：13809161
> 
> 赞同：1
> 
> 时间：2012-12-10T21:00:25.290
> 
> 标签：internet-explorer-9, bho, content-security-policy

我知道内容安全策略是 IE10 中的一项新功能。

想知道是否有任何第 3 方供应商通过附加组件 (BHO) 为 IE9 和旧版本提供实施？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:43:18.810

IE 10 只能在 Windows 8 上运行，并且只有 Windows 7 的预览版可用。另一方面，IE 9 是大多数 IE 用户已经使用的浏览器，因此拥有适用于 IE 9 的解决方案可以部署内容来自网站的安全策略，而不要求其客户升级到 IE 10。因此，拥有 BHO 在 ie 9 中将非常有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-07T19:02:34.507

早于 IE 10，请使用 [X-Frame-Options](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options)。

IE 10 和更新版本，使用[X-Content-Security-Policy](https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP)。

对我来说，X-Content-Security-Policy 也适用于 IE 9。

# javascript - 从 InfoBubble、Google Maps API v3 中删除标题标签

> ID：13809172
> 
> 赞同：0
> 
> 时间：2012-12-10T21:01:09.703
> 
> 标签：javascript, google-maps-api-3, infobubble

我现在正在使用 InfoBubble，但我似乎无法从我的 InfoBubble 中获取实际的标签/标题。你如何隐藏标签？为了清楚起见，我指的是气泡顶部的实际选项卡，而不是整个内容区域。

有没有我可以看的例子，或者一些涵盖这个的文档？

我认为这一定是因为 InfoBubble 向导上显示的标签是无标签的，但是当我查看源代码时，我看不到 HOW。(http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html/)

如果重要的话，这是我现在的地图：http: [//jsbin.com/ugabaz/3/](http://jsbin.com/ugabaz/3/)

谢谢！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:50:02.360

您正在使用的`InfoBubbles`旨在使用选项卡，这就是它们的重点......

看这里的例子：http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html/

我看不到任何没有标签的东西，或者任何没有标签的方法。

如果您只是想要一个未选项卡的弹出窗口，那么为什么不使用标准`infowindow`来显示信息呢？毕竟这就是它的目的。

无论如何，如果必须，您可以通过`tab`两种方式隐藏。

首先，只需将一个空字符串传递给选项卡标题参数。这将停止显示文本，但您仍然会得到一个小方块。

IE`ethiopiaInfoBubble.addTab('', ethiopiaContentString);`

其次，您可以编辑 InfoBuble 代码，以便内联 css 隐藏选项卡。

特别是编写以下元素的代码......

```
<div style="float: left; position: relative; cursor: pointer; background-color: rgb(127, 21, 66); border-width: 1px 1px 0px; border-style: solid; border-color: rgb(127, 21, 66); padding: 7.5px 15px 8.5px; margin-right: -15px; white-space: nowrap; border-top-left-radius: 0px; border-top-right-radius: 0px; z-index: 100; display: inline;" class=" _ibani_1563"></div> 
```

应该简单地输出...

```
<div style="display: none;" class= " whatever"></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:57:47.377

对于某些库，您可以使用一些 css 来解决这个问题——这里的问题是它没有给选项卡一个好的名称或类或任何可以通过 css 选择器获得的东西。

但你可以作弊！

```
ethiopiaInfoBubble.tabsContainer_.style['display'] = 'none'; // like this 
```

在这里，我们使用 infoBubble 自己的指向选项卡容器的 dom 节点的指针，并强制它为 display-none。

# postgresql - Postgres Alter table 将列类型从 char 转换为 bigint

> ID：13809173
> 
> 赞同：34
> 
> 时间：2012-12-10T21:01:09.967
> 
> 标签：postgresql

> **可能重复：**
> [如何在 postgresql 8.4 中将列数据类型从字符更改为数字](https://stackoverflow.com/questions/7683359/how-to-change-column-datatype-from-character-to-numeric-in-postgresql-8-4)

如果我有一个 varchar 类型的字段（并且所有值都是 null 或数字的字符串表示形式），我如何使用 alter table 将此列类型转换为 bigint？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-12-10T21:49:19.270

只需通过解析字符串（强制转换）进行转换：

```
alter table the_table alter column the_column type bigint using the_column::bigint 
```

事实上，您可以使用任何表达式来`the_column`代替而不是`the_column::bigint`自定义转换。

请注意，这将重写表格，甚至在完成之前锁定读者。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T21:12:17.350

您可以创建一个临时类型的列`bigint`，然后像这样执行 SQL

```
UPDATE my_table SET bigint_column=varchar_column::bigint; 
```

然后删除您的 varchar_column 并重命名 bigint_column。这有点迂回，但不需要在 postgres 中进行自定义转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T21:07:13.967

## 如何在 postgresql 中将字符串列类型转换为数字或 bigint

设计您自己的从字符串到 bigint 的自定义转换。像这样的东西：

```
CREATE OR REPLACE FUNCTION convert_to_bigint(v_input text)
RETURNS BIGINT AS $$
DECLARE v_bigint_value BIGINT DEFAULT NULL;
BEGIN
    BEGIN
        v_bigint_value := v_input::BIGINT;
    EXCEPTION WHEN OTHERS THEN
        RAISE NOTICE 'Invalid bigint value: "%".  Returning something else.', v_input;
        RETURN 0;
    END;
RETURN v_bigint_value;
END; 
```

然后创建一个`fixed_table_with_bigint`与旧表具有相同参数的新表，只是将字符串列更改为 bigint 列。

然后将前一个表中的所有行（使用自定义 cast `convert_to_integer`）插入到新表中：

```
insert into fixed_table_with_bigint
select mycolumn1, 
       convert_to_bigint(your_string_bigint_column),
       mycolumn3
    from incorrect_table 
```

您可能必须进行修改`convert_to_bigint`才能处理不是数字、空白字符串、空值、控制字符和其他怪异的字符串。

然后删除第一个表并将第二个表重命名为第一个表。

# javascript - 使用 jQuery DataTables 自定义 REST 数据源

> ID：13809174
> 
> 赞同：3
> 
> 时间：2012-12-10T21:00:41.753
> 
> 标签：javascript, rest, datatables

我有一个带有页面和大小参数的 REST 端点：

> [http://someservice.com/api/accounts/10/0](http://someservice.com/api/accounts/10/0)

在本例中，它返回第一页，每页有 10 条记录。

现在，我想使用[DataTables](http://datatables.net)，并[在 StackOverflow 上找到了这个示例](https://stackoverflow.com/a/9582010/228692)，我可以在其中将数据从 REST 响应添加到表中。

但是，通过这种方式，我将所有数据添加到表中。我希望能够每页添加数据页，并对每页的端点页发出请求。例如，在页面加载时，我对该页面发出 REST 请求。当我点击第二页时，我再次请求该页的数据。

有什么方法可以在 DataTables 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T20:30:25.597

这应该有效：

```
 function fnGetKey( aoData, sKey ){
         for ( var i=0, iLen=aoData.length ; i<iLen ; i++ ){    
            if ( aoData[i].name == sKey )
               return aoData[i].value;        
         }
     return null;
     }

     $('#example').dataTable( {
      "bServerSide" : true,
      "sAjaxSource" : "http://someservice.com/api/accounts/10/0", //first page
      "sPaginationType": "two_button",
      "fnServerData": function ( sSource, aoData, fnCallback ) {
          var startIndex = fnGetKey(aoData, "iDisplayStart")
          var length = fnGetKey(aoData, "iDisplayLength")
          sSource="http://someservice.com/api/accounts/"+length+"/"+(startIndex/length + 1)
          $.getJSON( sSource, aoData, function (json) { 
              fnCallback(json)
          } );
       }
    }); 
```

因此，当您单击下一页或上一页时，您需要计算您现在所在的页面，并通过更改源来做一个技巧。

# javascript - Javascript - 修改 HTML 标签上的 CSS？

> ID：13809178
> 
> 赞同：14
> 
> 时间：2012-12-10T21:01:40.450
> 
> 标签：javascript, css, html

我正在处理的此页面上的 HTML 标记位于一个类中，该类为其提供`padding`了`28px`. 当单击按钮时，我需要它暂时消失，但似乎我无法更改 HTML 标记本身的样式。

我需要`position: relative;`在身体标签或类似的东西上使用吗？真的有办法将 CSS 分配给我不知道的 HTML 标记吗？

@ 注释：

对不起，我在这里有点着急。大意是这样的：

```
<html class='pad_my_top'>
<head>

<style type='text/css'>
    .pad_my_top{
        padding-top: 28px;
    }

    body{
        background: #000000;
    }
</style>

<script type='text/javascript'>
    function its_gone(){
        // Something here to remove padding.
        alert("It's gone. Hurray!");
        // Something to put it back.
    }
</script>

</html>
<body>

<button onClick='its_gone()'>Click me to get rid of the top padding</button>

</body>
</html> 
```

我真的希望它消失，所以我可以用 Javascript 打印页面，但我宁愿不使用任何 3rd 方代码，因为这是用于 Wordpress 的插件，我不想要十亿个依赖项。我只需要隐藏/重新显示 3 个 div 和（重新）更改 2 个样式。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-10T21:43:20.250

使用它来删除顶部填充：

```
document.documentElement.style.paddingTop = "0"; 
```

并将其设置回来：

```
document.documentElement.style.paddingTop = "28px"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T23:39:06.297

没有理由使用`getElementsByTagName`等等......只是使用`document.documentElement`. 此外，最好使用一个类并切换它，而不是直接设置样式属性。如果您将CSS 中的更改`28px`为怎么办？`20px`然后你必须在其他地方改变它。既然你*确定*你想要`top-padding`它`0`，那么添加一个设置它的类。完成后，删除该类。像这样：

```
<style type="text/css">
    .no-top-padding {
        padding: 0 !important;
    }
</style>

document.documentElement.className += " no-top-padding"; 
```

并“添加”回填充（通过有效地删除类）：

```
var old_class = document.documentElement.className;
document.documentElement.className = old_class.replace(/(?:^|\s)no-top-padding(?!\S)/g, ""); 
```

尽管使用 DOM API 可以做得更干净`classList`。正则表达式只是确保`className`正确修改属性以删除“no-top-padding”类的更安全的方法。

# objective-c - 将多个浮点值相加成一个新的浮点数（双值）

> ID：13809180
> 
> 赞同：1
> 
> 时间：2012-12-10T21:01:45.770
> 
> 标签：objective-c, ios, double

如何将多个 doubleValues 相加成一个新的双精度值？目前我已经尝试过这样的：

```
double sum = doubleWantToSum1 + doubleWantToSum2 + doubleWantToSum; //etc... 
```

此外，我想使用这个方程的结果

```
double tooMuch = sum - 100; 
```

我想返回 100 减去我的浮点数的总值。目前，它唯一能做的就是输出 doubleWantToSum1 - 100。我相信这个答案非常简单，但是由于我在互联网上找不到任何关于这个的信息，如果你们中的一个人告诉我，我会很高兴的。

**编辑，添加代码** 注意，我知道这很糟糕而且可能无效。

```
//Nummerformatterere - Kinda unødvendig
NSNumberFormatter *fmt1  =  [NSNumberFormatter new]; //Temp
NSNumberFormatter *fmt2  =  [NSNumberFormatter new]; //Methane
NSNumberFormatter *fmt3  =  [NSNumberFormatter new]; //Ethane
NSNumberFormatter *fmt4  =  [NSNumberFormatter new]; //Propane
NSNumberFormatter *fmt5  =  [NSNumberFormatter new]; //n-butane
NSNumberFormatter *fmt6  =  [NSNumberFormatter new]; //i-butane
NSNumberFormatter *fmt7  =  [NSNumberFormatter new]; //n-petane
NSNumberFormatter *fmt8  =  [NSNumberFormatter new]; //i-petane
NSNumberFormatter *fmt9  =  [NSNumberFormatter new]; //n-hexane
NSNumberFormatter *fmt10 =  [NSNumberFormatter new]; //nitrogen
NSNumberFormatter *fmt11 =  [NSNumberFormatter new]; //oxygen

//Float for å få textfieldsene til nummer
double temprature = [fmt1  numberFromString: tempratureText.text].doubleValue;
double methane    = [fmt2  numberFromString: methaneText.text   ].doubleValue;
double ethane     = [fmt3  numberFromString: ethaneText.text    ].doubleValue;
double propane    = [fmt4  numberFromString: propaneText.text   ].doubleValue;
double nbutane    = [fmt5  numberFromString: nbutaneText.text   ].doubleValue;
double ibutane    = [fmt6  numberFromString: ibutaneText.text   ].doubleValue;
double npetane    = [fmt7  numberFromString: npetaneText.text   ].doubleValue;
double ipetane    = [fmt8  numberFromString: ipetaneText.text   ].doubleValue;
double nhexane    = [fmt9  numberFromString: nhexaneText.text   ].doubleValue;
double nitrogen   = [fmt10 numberFromString: nitrogenText.text  ].doubleValue;
double oxygen     = [fmt11 numberFromString: oxygenText.text    ].doubleValue;

//Floats og formatters for underflow, overflow
double sum = (methane + ethane + propane + nbutane + ibutane + npetane + ipetane + nhexane + nitrogen + oxygen);
double overflowPart = 100 - sum;
double underflowPart = sum - 100;

NSNumber *underFlow = [[NSNumber alloc]initWithDouble:underflowPart];
NSNumberFormatter *underFlowResult = [[NSNumberFormatter alloc] init];
underFlowResult.numberStyle = NSNumberFormatterDecimalStyle;
[underFlowResult setNumberStyle:NSNumberFormatterDecimalStyle];
[underFlowResult setMaximumFractionDigits:2];
NSString *formattedUnderFlow = [underFlowResult stringFromNumber:(NSNumber*)underFlow];

NSNumber *overFlow = [[NSNumber alloc]initWithDouble:underflowPart];
NSNumberFormatter *overFlowResult = [[NSNumberFormatter alloc] init];
overFlowResult.numberStyle = NSNumberFormatterDecimalStyle;
[overFlowResult setNumberStyle:NSNumberFormatterDecimalStyle];
[overFlowResult setMaximumFractionDigits:2];

NSString *formattedOverFlow = [overFlowResult stringFromNumber:(NSNumber*)overFlow];

//Floats for variabler til ligningen
double Xi = 1;
double Mi = 2;
double Vi = 3;
double Vc = 4;

//Ligningen for å regne ut density
double over1 = Xi * Mi;
double under1 = Xi * Vi - Vc;

//=RESULT=
double result =  over1 / under1;

/*----------STREK FORDI DET ER CHILL OG JEG ER FERDIG MED FLOATER----------*/

NSString *resultString = [[NSString alloc]initWithFormat:@"D = %f", result];
NSString *overflowString = [[NSString alloc]initWithFormat:@"Total %@ greater than 100 %", formattedOverFlow ];
NSString *underflowString = [[NSString alloc]initWithFormat:@"Total %@ less than 100 %", formattedUnderFlow];

/*----------STREK FORDI DET ER CHILL OG JEG ER FERDIG MED STRINGS----------*/
/*
if (temprature == 0 || methane == 0 || ethane == 0 || propane == 0 || nbutane == 0 || ibutane == 0 || oxygen == 0 || npetane == 0 || ipetane == 0 || nhexane == 0 || nitrogen == 0)
{
    outputText.text = @"Please enter all values";
} */
if (underflowPart == 100)
{
    outputText.text = @"Start by entering values above";
}
if (sum == 100)
{
    outputText.text = resultString;
}

if (sum > 100)
{
    outputText.text = overflowString;
}

if (sum < 100)
{
    outputText.text = underflowString;
}
/*----------STREK FORDI DET ER CHILL OG JEG ER FERDIG MED 'if'----------*/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:29:50.880

评论中尚未明确说明您对代码中的数字求和的方式是正确的。评论所暗示的是，您求和的数字是错误的，您应该记录它们以查看它们是什么。

同样，您可以使用以下方法保存一些代码（消除您的数字格式化程序）：

```
double temprature = [tempratureText.text doubleValue]; 
```

代替

```
double temprature = [fmt1  numberFromString: tempratureText.text].doubleValue; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:13:14.523

这可能取决于您要添加的数字有多大（多少精度）。为了解决这个问题，您可以使用[NSDecimalNumber](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDecimalNumber_Class/Reference/Reference.html)，它最多可以容纳 38 位十进制数字的精度。

# javascript - 日历 Javascript 下拉菜单

> ID：13809183
> 
> 赞同：0
> 
> 时间：2012-12-10T21:01:12.127
> 
> 标签：javascript, html, drop-down-menu

我设法使用以下小提琴创建了一个 javascript 下拉列表：

```
(function() {
    var calendar = [
        ["January", 31],
        ["February", 28],
        ["March", 31],
        ["April", 30],
        ["May", 31],
        ["June", 30],
        ["July", 31],
        ["August", 31],
        ["September", 30],
        ["October", 31],
        ["November", 30],
        ["December", 31]
        ],
        cont = document.getElementById('calendar-container');
    // setup
    var sel_year = document.createElement('select'),
        sel_month = document.createElement('select'),
        sel_day = document.createElement('select');

    function createOption(txt, val) {
        var option = document.createElement('option');
        option.value = val;
        option.appendChild(document.createTextNode(txt));
        return option;
    }

    function clearChildren(ele) {
        while (ele.hasChildNodes()) {
            ele.removeChild(ele.lastChild);
        }
    }

    function recalculateDays() {
        var month_index = sel_month.value,
            df = document.createDocumentFragment();
        for (var i = 0, l = calendar[month_index][1]; i < l; i++) {
            df.appendChild(createOption(i + 1, i));
        }
        clearChildren(sel_day);
        sel_day.appendChild(df);
    }

    function generateMonths() {
        var df = document.createDocumentFragment();
        calendar.forEach(function(info, i) {
            df.appendChild(createOption(info[0], i));
        });
        clearChildren(sel_month);
        sel_month.appendChild(df);
    }

    sel_month.onchange = recalculateDays;

    generateMonths();
    recalculateDays();

    cont.appendChild(sel_year);
    cont.appendChild(sel_month);
    cont.appendChild(sel_day);
}()); 
```

[http://jsfiddle.net/rlemon/j2kzv/](http://jsfiddle.net/rlemon/j2kzv/)

但是我想修改它以默认显示当前月份和日期。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:38:12.937

这样的事情会起作用：http: [//jsfiddle.net/j2kzv/24/](http://jsfiddle.net/j2kzv/24/)

在您创建选项时，我只是添加了对当前日期的检查，并没有太大变化：

```
calendar.forEach(function(info, i) {
            var selected = (currentDate.getMonth() === i) ? true : false;
            df.appendChild(createOption(info[0], i, selected));
}); 
```

然后在构建每个选项时添加一个选定的检查。

```
function createOption(txt, val, selected) {
    var option = document.createElement('option');
    option.value = val;
    option.selected = selected;
    option.appendChild(document.createTextNode(txt));
    return option;
} 
```

为了简单起见，我还更新了循环的日期函数以使用序号 1 而不是 0 作为复选框值

# c++ - 从 h.264 流中保存静止图像 (jpeg)

> ID：13809184
> 
> 赞同：0
> 
> 时间：2012-12-10T21:01:47.713
> 
> 标签：c++, webcam, h.264, jpeg

是否可以从 h.264 流中保存 jpeg 图像。我从网络摄像头获得了流，并想编写一个小助手，将图像保存在按键上。

能得到你的帮助会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:24:30.710

OpenCV 可以做到这一点。[这](http://opencv.willowgarage.com/documentation/cpp/reading_and_writing_images_and_video.html)是一个很好的参考。以下是我快速写的对我有用的东西：

```
#include <cv.h>
#include <highgui.h>

using namespace cv;
int main(int argc, char ** argv){
  VideoCapture capture(0);
  namedWindow("video",1);
  while(capture.isOpened()){
    Mat frame;
    capture >> frame;
    imshow("video",frame);
    if (waitKey(30) > 0){
      imwrite("image.jpg",frame);
    }
  }
  return 0;
} 
```

# c++ - SDL C++ 问题（处于等待状态的窗口）

> ID：13809187
> 
> 赞同：2
> 
> 时间：2012-12-10T21:02:29.733
> 
> 标签：c++, opengl, sdl

我正在使用 SDL 和 OpenGL，我创建了 SDL_Surface 和 SDL_SetVideoMode：

```
SDL_Init(SDL_INIT_EVERYTHING);

const SDL_VideoInfo * dinfo = SDL_GetVideoInfo();

// Setup the surface of SDL
if(configurer::fullscreened){
    data::Wnd_Surface = SDL_SetVideoMode(configurer::window_width,configurer::window_height,dinfo->vfmt->BitsPerPixel,SDL_FULLSCREEN | SDL_OPENGL);
}else{
    data::Wnd_Surface = SDL_SetVideoMode(configurer::window_width,configurer::window_height,16,SDL_OPENGL);
}
if(data::Wnd_Surface==0){
    return -1;
}

SDL_WM_SetCaption("Test", "Test");

SDL_GL_SetAttribute(SDL_GL_RED_SIZE, 5);
SDL_GL_SetAttribute(SDL_GL_GREEN_SIZE, 5);
SDL_GL_SetAttribute(SDL_GL_BLUE_SIZE, 5);
SDL_GL_SetAttribute(SDL_GL_DEPTH_SIZE, 16);
SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);

// Initialize GLEW
if(glewInit()!=0){
    cout << "Failed to start glew";
    return -1;
} 
```

我在我的主函数中初始化它，然后我有以下（在主函数上）：

```
while(!data::terminate){
    AscMainLoop();
    SDL_Delay(80);
}
return 0; 
```

一切都很好。我的 AscMainLoop 函数：

```
int timerelapse = SDL_GetTicks();
//Check for key events
    /* BLA BLA BLA *(
AscUpdateComponents(); // Update matrixes and bla bla bla...
AscRender();// Paint

// Fps Counter Update
    /* BLA BLA BLA */

SDL_GL_SwapBuffers();// Swap the buffers of our screen 
```

好的，我遇到了问题，我运行了应用程序，但屏幕没有响应，我认为问题出在 main 上的 while 循环上。窗口打开，但我不能拖动它，调整它的大小，这就像窗口上的等待状态（Windows 7 有趣的“请等待”光标）激活。我已经尝试将主循环放在一个线程中。我不知道发生了什么...

编辑：这就像主函数中的循环引起的冻结状态

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:53:11.710

您需要通过执行以下操作来处理您`SDL_Event`的 s 或`while`您的 s `AscMainLoop`：

```
SDL_Event Event;

while(SDL_PollEvent(&Event))
{
    // Later, you'll be adding your code that handles keyboard / mouse input here
} 
```

# jquery - Fancybox 和同位素过滤之间的冲突

> ID：13809192
> 
> 赞同：0
> 
> 时间：2012-12-10T21:03:14.680
> 
> 标签：jquery, jquery-plugins, fancybox, jquery-isotope

我正在使用以下代码使用同位素过滤：

```
// filter items when filter link is clicked
$('#filters a').click(function(){
var $container = $('#container');

  var selector = $(this).attr('data-filter');
  $container.isotope({ filter: selector });
  return false;
}); 
```

而且我还使用 Fancy box v1.3.4 和以下代码：

```
$(document).ready(function () {
    $("a.fancyframe").fancybox();
}); 
```

问题是同位素过滤器一直有效，直到您打开一个花式框，然后关闭花式框，如果您尝试单击它不起作用的过滤器，没有任何改变，我在控制台中收到以下错误：

```
Uncaught TypeError: Object [object Object] has no method 'isotope' 
```

这里有什么问题，我该如何阻止它们发生冲突

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:09:13.110

我认为打开fancybox 后，您的html 页面中有两个ID 为“容器”的元素。但是 ID 在整个页面中必须是唯一的。

我想你不能为fancybox选择不同的id，所以试着重命名另一个id。

# php - 信用卡 - First6,Last4,expMonth & expYear 的独特性

> ID：13809195
> 
> 赞同：1
> 
> 时间：2012-12-10T21:02:58.463
> 
> 标签：php, credit-card, pci-dss

我正在用 PHP 构建一个管理器类来管理信用卡支付授权。使用信用卡，我们可以保留`First6`、`last4`和。`expiration_Month``expiration_Year`

我真的很想知道这 4 个变量的组合有多独特，以及遇到另一个变量的可能性有多大。

取决于何时测试我们是否已经获得新卡的有效授权的可能性有多大。如果我们已经获得了特定卡的授权，则无需再次运行这些号码。相反，我们可以找到已经授权的卡并重新授权。但是，我不想运行错误的卡，因为它有类似`First6`的`last4`,`expiration_Month`和`expiration_Year`..

我的目标是限制信用卡数据的数据冗余、对 CC 处理器 API 的访问以及对客户卡的不必要授权。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T21:06:05.733

前 6 个告诉你你正在处理什么样的卡。发行人名单见：

[http://en.wikipedia.org/wiki/List_of_Issuer_Identification_Numbers](http://en.wikipedia.org/wiki/List_of_Issuer_Identification_Numbers)

最后四个基本上是随机的。月份基本上是随机的，年份将在从当前年份到可能 6 年后的小范围内。年份将在可能的值之间表现出一些偏差。

如果您将这些项目组合起来尝试唯一识别一张卡片，您几乎肯定会发生冲突。这不是一件可靠的事情。

**编辑**

以下是与此场景类似的近期安全马裤示例

[http://blogs.cisco.com/security/6-5-million-password-hashes-suggest-a-possible-breach-at-linkedin/](http://blogs.cisco.com/security/6-5-million-password-hashes-suggest-a-possible-breach-at-linkedin/)

[http://www.infoworld.com/d/security/nvidia-investigating-breach-of-hashed-passwords-197796](http://www.infoworld.com/d/security/nvidia-investigating-breach-of-hashed-passwords-197796)

[https://www.infoworld.com/d/security/passwords-leaked-yahoo-boozy-preachy-angry-and-easy-197696](https://www.infoworld.com/d/security/passwords-leaked-yahoo-boozy-preachy-angry-and-easy-197696)

如果黑客可以从一家大型网络公司的数据库中下载数据（通常是架构中最受防火墙保护的部分），他们很有可能也可以访问应用程序层并获取访问该应用程序的源代码或已编译的应用程序。数据层。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T01:49:16.307

扩展上一个答案。左边的 6 个是 BIN，可能对你所有的卡片都是一样的，所以这些对匹配卡片没有帮助。鉴于右侧 4 是随机的，月份是随机的，并且年份有 6 个值中的 1 个，这意味着您有 10000 * 12 * 6 = 720,000 个唯一组合。

如果您总共有 100,000 张牌，那么您发生碰撞的几率是七分之一。如果您有超过 1,500,000 张卡，那么每次交易几乎肯定会发生冲突。

# sql - Rails .where 语法

> ID：13809196
> 
> 赞同：0
> 
> 时间：2012-12-10T21:03:35.257
> 
> 标签：sql, ruby-on-rails, ruby, where

我在使用 rails 中的 .where 语句时遇到了一些问题。有人可以帮忙吗？

```
<% due_late = project.tasks.where(":date_due < ?", Date.today).count %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T21:07:03.047

`date_due`在这种情况下，是数据库中定义的列名，而不是 Ruby 符号`:date_due`。

```
<% due_late = project.tasks.where("date_due < ?", Date.today).count %>
#---------------------------------^^ 
```

### 评论后更新

`JOIN`如果两个表具有相同的列名，则需要在查询中区分表名：

```
# Assuming it is tasks.date_due you are testing, rather than phases.date_due
<% due_late = project.tasks.where("tasks.date_due < ?", Date.today).count %> 
```

作为建议，与其在视图 .erb 文件中执行此计算，不如在模型中创建一个返回值的方法。

```
def due_late
  tasks.where("tasks.date_due < ?", Date.today).count
end 
```

在视图中称为

```
<%= project.due_late %> 
```

# php - 谷歌身份验证 - 登录

> ID：13809197
> 
> 赞同：1
> 
> 时间：2012-12-10T21:03:36.800
> 
> 标签：php, google-authentication

我已经建立了一个网站，并打算让用户使用他们的谷歌帐户登录，他们将能够在我的网站上使用他们的谷歌电子邮件地址发表评论。

我已经通过谷歌文档工作，现在很困惑。

[https://developers.google.com/accounts/](https://developers.google.com/accounts/)

我设法让用户授权使用他们的详细信息，谷歌在查询字符串中返回访问令牌等：

访问令牌

token_type=承载者

expires_in=3600

我的问题是如何使用访问令牌获取用户的电子邮件地址。我意识到这意味着向谷歌提出请求。但是怎么做？

我只是希望通过几行代码帮助谷歌并使用我的 php 页面获取用户的电子邮件。如果有人有的话，只是最简单的 php 示例？

我一直在寻找几个小时，现在不知所措。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T07:56:21.670

在我的经验中，谷歌客户端不会给用户电子邮件，但您可以使用 oath2 回复来获取它。

一旦您拥有访问令牌，您就可以执行此操作。希望这可以帮助

require_once 'path_to_your_google_library/Google_Client.php';

require_once 'path_to_your_google_library/contrib/Google_Oauth2Service.php';

$google_instance = 新的 Google_Client();

$oath2 = 新的 Google_Oauth2Service($google_instance);

$oauth_response = $oauth2->userinfo->get();

$email_of_user = $oauth_response['email'];

# extjs - 设置活动选项卡会产生奇怪的错误

> ID：13809200
> 
> 赞同：0
> 
> 时间：2012-12-10T21:03:07.560
> 
> 标签：extjs, extjs4

在 Extjs 4.1 中，我试图设置一个活动选项卡。标签面板（和标签）的代码如下：

```
var mainmsg = {
    title: "In Box",
    id: "Main",
    items: [
       ...
    ]
};

var magtags = Ext.create('Ext.tab.Panel',{
width: '100%',
height: 440,
layout: 'fit',
items: [ mainmsg,<other panels> ]
}); 
```

我想在事件发生时（如按下另一个面板中的按钮）将“mainmsg”面板设置为活动状态（选中？）。我正在使用为 TabPanel magtags 记录的 setActivePanel() 方法执行此操作，如下所示：

```
someEvent(params) {
    magtags.setActiveTab(mainmsg);
    ... do other stuff...
} 
```

但是当我调用 setActiveTab() 时，我在 Firebug 上收到以下错误：

> 时间戳：2012 年 12 月 10 日下午 3:59:25
> 
> 错误：TypeError：comp.getItemId 不是函数

我在 ExtJS 中发现错误了吗？或者有什么方法可以防止这个似乎是图书馆内部的错误？

有人请指教...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:42:14.463

因为 mainmsg 只是一个对象的配置，当它被传递给项目配置时，它被创建为一个实际的组件，但 mainmsg 引用仍然只是一个配置。setActiveTab 假设您正在传递它：

1.  组件的id
2.  组件的索引
3.  组件实例

其他几点：

*   100% 的宽度是多余的，不支持
*   选项卡面板上的布局“适合”是多余的，它会自动使用卡片布局
*   您可能过度嵌套了选项卡项，因为选项卡有标题且没有布局，然后是子项，这通常意味着子项应该是选项卡，而不是嵌套在其他任何内容中。

# c# - 将任务与反射相结合

> ID：13809202
> 
> 赞同：2
> 
> 时间：2012-12-10T21:03:55.540
> 
> 标签：c#, reflection, task-parallel-library, .net-4.5

我有一个提供字符串列表的情况。列表中的第一个条目是方法的名称。列表中剩余的字符串是方法参数。我想使用一个任务来运行该方法（用于教育目的）。我在找出允许我将方法名称输入任务指令的正确过程时遇到问题。

对于这个例子，我有两个可以作为任务运行的静态方法。args[1] 表示我的选择。

```
public class Program
{
    private static ILog log = LogManager.GetLogger 
                    (System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);

    static void Main(string[] args)
    {
        string whichPrint = args[1];

        Type type = typeof(Program);
        MethodInfo meth = type.GetMethod(whichPrint, BindingFlags.Public | 
                                                           BindingFlags.Static);

        //this is the problem area....how do I feed the the method or delegate into 
        //the lambda expression ????
        Delegate methDel = meth.CreateDelegate(type);
        Task t = Task.Factory.StartNew(() => methDel("help!!"));

    }

    static void printme1(string s)
    {
        log.Debug("Printme1 Printing: " + s);
    }

    static void printme2(string s)
    {
        log.Debug("Printme2 Printing: " + s);
    }
} 
```

我无法编译，因为 methDel 被视为变量。我需要将它或其他东西视为一种方法。我不想使用 case/switch 语句，因为我可能有很多可以分配给任务的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T21:10:58.570

您将使用它创建一个新任务这一事实有些无关紧要。您需要做的就是弄清楚如何调用该方法，剩下的就是“启动一个新任务，然后调用该方法”。

所以你可能想要这样的东西：

```
public static void CallMethod(List<string> nameAndArguments)
{
    var method = typeof(Program).GetMethod(nameAndArguments[0]);
    method.Invoke(null, nameAndArguments.Skip(1).ToArray()):
} 
```

然后：

```
Task.Factory.StartNew(() => CallMethod(nameAndArguments)); 
```

我认为不值得建立一个委托，除非你试图通过多次调用该委托来获得更好的*性能*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T21:10:32.690

我认为您在这里不需要委托 - 只需在 Action 主体中调用方法。您的方法也是私有的，而不是公开的：

```
MethodInfo meth = type.GetMethod(whichPrint, BindingFlags.NonPublic |
                                             BindingFlags.Static);
Task t = Task.Factory.StartNew(() => meth.Invoke(null, new object[] {"help!!"})); 
```

# shell - 我在哪里搞砸了

> ID：13809209
> 
> 赞同：1
> 
> 时间：2012-12-10T21:04:22.327
> 
> 标签：shell

我想以秒为单位执行 shell 脚本。

我的实现：

```
#!/bin/sh
START=$(date +%s)
echo $START
.
.
bla bla bla
.
.
.
END=$(date +%s)
echo $END
DIFF=($END - $START)
echo  "Time difference is "$DIFF 
```

这向我显示了结束时间而不是差异。我无法猜测减号不起作用的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:11:51.770

假设您正在使用`bash`：

您需要使用双括号在 shell 中进行算术运算：

```
((DIFF = START - END))
#or
DIFF=$((START - END)) 
```

请注意，您不必使用美元符号来读取双括号内的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T21:11:16.157

您需要美元双括号进行算术运算：

```
DIFF=$(($END - $START)) 
```

如：

```
#!/bin/bash
START=$(date +%s)
echo $START
sleep 2
END=$(date +%s)
echo $END
DIFF=$(($END - $START))
echo  "Time difference is" $DIFF 
```

[Bash](http://www.gnu.org/software/bash/manual/bashref.html#Arithmetic-Expansion)参考手册说：

> ### 3.5.5 算术展开
> 
> 算术扩展允许对算术表达式求值并替换结果。算术展开的格式为：
> 
> ```
> $(( expression )) 
> ```
> 
> 表达式被视为在双引号内，但括号内的双引号不会被特殊处理。表达式中的所有标记都经过参数扩展、命令替换和引号删除。算术扩展可以嵌套。

[另见](http://www.gnu.org/software/bash/manual/bashref.html#Conditional-Constructs)：

> ### 3.2.4.2 条件构造
> 
> （（……））
> 
> ```
> (( expression )) 
> ```
> 
> 算术表达式根据以下描述的规则进行评估（请参阅[Shell Arithmetic](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Arithmetic)）。如果表达式的值为非零，则返回状态为0；否则返回状态为 1。这完全等价于
> 
> ```
> let "expression" 
> ```
> 
> 请参阅 Bash Builtins，了解 let 内置函数的完整描述。

# python - 如何创建一个字典，其中包含将其名称打印为值的函数

> ID：13809218
> 
> 赞同：3
> 
> 时间：2012-12-10T21:04:46.163
> 
> 标签：python, lambda

> **可能重复：**
> [这个 python 函数中的 lambda 表达式是怎么回事？](https://stackoverflow.com/questions/841555/whats-going-on-with-the-lambda-expression-in-this-python-function)
> [(lambda) 函数闭包在 Python 中捕获了什么？](https://stackoverflow.com/questions/2295290/what-do-lambda-function-closures-capture-in-python)

例如，我有一个字符串列表 ['a', 'b', 'c']。

我想生成一个字典，该列表中的元素（'a'，'b'和'c'）作为键，以及将键打印为值的函数（print（'a'），print（'b '), 打印('c'))

```
 from __future__ import print_function
  l = ['a', 'b', 'c']
  m = {k: lambda : print(k) for k in l} 
```

我写了上面的代码。但结果不对

```
 m['a']()
  c
  m['b']()
  c 
```

我知道如果我不在那里使用 lambda

```
m = {k:print(k) for k in l} 
```

这没有问题。但我想知道为什么 lambda 在这里不起作用。

知道如何解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T21:07:29.487

你得到`c`每个键的输出的原因是因为`c`在迭代中最后出现，所以最终值在`x`这里`c`，你的程序可以扩展如下：

```
 for x in lis:
        def func():
            print(x)
        dic[x]=func 
```

在这里，您的函数实际上是访问全局变量的值`x`，而不是局部变量。并且在迭代结束时`x`，`c`您会得到`c`答案。

因此，您需要使用默认参数将值存储在局部变量中。

正确的代码：

```
 In [2]: lis=['a', 'b', 'c']

    In [3]: dic={x:lambda i=x:print(i) for x in lis}

    In [4]: dic['a']
    Out[4]: <function __main__.<lambda>>

    In [5]: dic['a']()
    a
    In [6]: dic['b']()
    b 
```

或者：

```
In [16]: for x in lis:
    def func(i=x):
        print(i)    
    dic[x]=func
   ....:     

In [17]: dic['b']()
b 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T21:15:49.233

您遇到的基本问题与 labda 表达式的绑定有关，您可以在该方向找到几个问题（例如[Python 中的“lambda 绑定”是什么？](https://stackoverflow.com/questions/160859/what-is-lambda-binding-in-python)或[Python lambda 与本地值的绑定](https://stackoverflow.com/questions/10452770/python-lambdas-binding-to-local-values)）

一个常见的解决方案是使用[`functools.partial`](http://docs.python.org/2/library/functools.html#functools.partial)来避免该问题：

```
from __future__ import print_function
import functools

l = ['a', 'b', 'c']
m = {k: functools.partial(print, k) for k in l} 
```

# php - Zend Ajax 提交表单

> ID：13809222
> 
> 赞同：1
> 
> 时间：2012-12-10T21:05:00.470
> 
> 标签：php, javascript, ajax, zend-framework

我有一个小问题，我不知道如何解决。Ajax 验证通过 zend 完美运行。按下提交按钮确实有效，但是当我得到正确的电子邮件和密码时，它不会进入用户页面。它只是保留在那个表格上。我知道这与`return false`通过`true`Ajax 提交有关。

有人可以帮我解决这个问题。如果在验证中没有检测到错误，我不知道如何`return true`提交。

这是我的代码：Ajax 和 Javascript

```
$(function() {
    $('input').blur(function() {
        var formElementId = $(this).get(0).id;
        doValidation(formElementId);
    });
});

**$(function() {
    $('#btn_login').click(function() {
        var email = document.getElementById('email').id;
        var password = document.getElementById('password').id;
        doValidation(email);
        doValidation(password);
        return false;
    });
});**

function doValidation(id) {
    var url = '/users/validationform';
    var data = {};
    $('input').each(function() {
        data[$(this).attr('name')] = $(this).val();
    });
    $.post(url,data,function(resp) {
        $("#" + id).parent().find('.errors').remove();
        $("#" + id).parent().append(getErrorHtml(resp[id], id));
    }, 'json');
}

function getErrorHtml(formErrors, id) {
    var o = '<div id="login-error" style="color:red"><ul id="errors-'+id+'" class="errors" style="list-style-type:none;">';
    for(errorKey in formErrors) {
        o += '<li>- ' + formErrors[errorKey] + '</li>';
    }
    o += '</ul></div>';
    return o;
} 
```

Zend 控制器：

```
public function validationformAction()
{
    $loginForm = new Application_Form_UserLogin();
    $loginForm->isValidPartial($_POST);
    header('Content-type: application/json');
    $this->_helper->json($loginForm->getMessages());
}
public function loginFormAction()
{
    $this->_helper->layout()->disableLayout();
    //$this->_helper->viewRenderer->setNoRender(true);

    $email = $this->getRequest()->getParam('email');
    $password = $this->getRequest()->getParam('password');

    $loginForm = new Application_Form_UserLogin();
    if ($this->getRequest()->isPost())
    {
        /************ Login Form ************/
        if ($loginForm->isValid($this->getRequest()->getParams()))
        {
            $user = $this->_helper->model('Users')->createRow($loginForm->getValues()); 
            $user = $this->_helper->model('Users')->fetchRowByFields(array('email' => $email, 'hash' => $password));

            if($user) 
            {
                Zend_Session::rememberMe(86400 * 14);
                Zend_Auth::getInstance()->getStorage()->write($user);
                $this->getHelper('redirector')->gotoRoute(array(), 'invite');
                return;
            } 
            else {
                // Error message
                $this->view->errorMsg = "<b>password</b> - invalid, please try again! *";
            }               
        }
        else
        {
            // something
        }
    }       
    $this->view->loginForm = $loginForm;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:14:17.160

试试提交方法，像这样： $(formselector).submit(); 但是因为你使用了ajax验证，这里真正的问题在于你提交的时候。我想你可以为all字段编写分离的验证函数，你可以使用ajax回调来提交。

或者尝试 jquery.validation [http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)因为它知道 ajax 服务器端验证，并在有效时自动提交表单。

*对不起我的英语，我来自匈牙利：D*

# objective-c - 托管对象存储无法创建持久存储协调器

> ID：13809225
> 
> 赞同：0
> 
> 时间：2012-12-10T21:05:04.230
> 
> 标签：objective-c, ios, core-data

我们的一小部分 beta 测试人员收到以下错误，并且无法找到发生这种情况的线索：

托管对象存储无法创建持久存储协调器：

```
Error Domain=NSCocoaErrorDomain Code=256 "The operation couldn’t be completed. 
(Cocoa error 256.)" UserInfo=0x1f5cd8b0 
{NSUnderlyingException=authorization denied, NSSQLiteErrorDomain=23} 
```

这发生在应用程序由于位置事件在后台启动之后以及当我们调用`addPersistentStoreWithType`. 这就是我传递选项的方式：

```
NSDictionary *persistentStoreOptions = [NSDictionary 
   dictionaryWithObjectsAndKeys:
      NSFileProtectionNone, NSPersistentStoreFileProtectionKey, nil];
NSError *error;
if (![_persistentStoreCoordinator 
      addPersistentStoreWithType:NSSQLiteStoreType 
                   configuration:nil 
                             URL:storeURL 
                         options:persistentStoreOptions 
                           error:&error]) {
...
} 
```

关于为什么这只发生在一定比例的安装中的任何线索及其背后的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:18:00.700

您是否在多个线程中使用 Core Data？这些用户是否有可能在不应该获得多个 NSPersistentStoreCoordinator 实例时？我以前见过这个问题，特别是对于速度较慢的设备，结果证明控制持久存储协调器的“延迟实例化”的代码并不像应有的那样线程安全。

# image - 如何在matlab中构造一个矩形结构，使用ginput给出四个点

> ID：13809242
> 
> 赞同：2
> 
> 时间：2012-12-10T21:06:19.650
> 
> 标签：image, matlab, crop

我正在尝试构建一个`rect`由函数接收到的具有 4 个点的结构，以`ginput`通过该矩形裁剪图像。

我有这样的事情：

```
[x,y] = ginput(4);
input_points = [x(1) y(1); x(2) y(2); x(3) y(3); x(4) y(4)];
...

disp([round(x(1)) round(x(2)) round(abs(x(2)-x(1))) round(abs(y(4)-y(1)))]);
image = imcrop(image,[round(x(1)) round(x(2)) round(abs(x(2)-x(1))) round(abs(y(4)-y(1)))]); 
```

但是不起作用，显示的值太大了。有谁知道如何做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:59:07.713

试试这个

```
rec=round([min(x), min(y), max(x)-min(x), max(y)-min(y)]);
image2 = imcrop(image,rec); 
```

# css - 覆盖chrome绝对定位left：0

> ID：13809250
> 
> 赞同：0
> 
> 时间：2012-12-10T21:06:47.600
> 
> 标签：css, absolute

我有一个带有以下css的div：

```
#div
{
    position:absolute;
    right:0;
    top:0;
} 
```

我希望这个 div 位于其容器的右上角。但是，我在 Chrome 检查器中发现有一个样式如下：

```
element.style { left:0; } 
```

当我在 Chrome 中取消选中此样式时，div 会浮动到正确的位置。问题是因为我从右边显示，所以左边应该设置为无。有没有办法可以覆盖这个 CSS 不渲染？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T21:08:30.520

尝试使用`left:auto !important;`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T21:11:14.660

您可以尝试的另一件事是`left: 100%;`看看这是否有效。

# javascript - 如何在 Rails 视图的条件内调用 javascript 函数？

> ID：13809253
> 
> 赞同：1
> 
> 时间：2012-12-10T21:06:56.743
> 
> 标签：javascript, ruby-on-rails

我想知道如何`<% if statement %>`在 Rails 视图中调用 JavaScript 函数。我真的不知道这是否可能。

**home.html.erb：**

```
<script type="text/javascript"> 
function my_javascript_function() {
    return false;
}
</script>

<!-- some code before -->
<% if my_javascript_function %>
    <li>
        <a href="/link/">
            Link
        </a>
    </li> 
<% end %>
<!-- some code after --> 
```

更新：在陈的回答之后，我意识到我做错了，而不是使用`<% if statement %>`来创建我的元素，我现在只是使用 jQuery。代码最终是这样的：

```
$(document).ready(function() {
    if(/* my_conditions */) {
        $('#my_list_element').prepend('<li><a href="/link/">Link</a></li>');
    }
}); 
```

因此，当页面加载时，它会从 javascript (jQuery) 创建我的元素。就我而言，我使用`.prepend()`它是因为我需要它成为列表中的第一个元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:10:02.383

我想你弄错了。

Javascript 在客户端呈现，而 rails 部分在服务器端呈现。当服务器尝试呈现您的“if”语句时，它对 javascript 函数一无所知。

# c++ - c ++向量到逗号分隔的字符串？

> ID：13809255
> 
> 赞同：5
> 
> 时间：2012-12-10T21:07:04.167
> 
> 标签：c++

> **可能重复：**
> [通过在每个元素后添加逗号将 C++ 向量转换为 CSV](https://stackoverflow.com/questions/5287329/c-vector-to-csv-by-adding-comma-after-each-element)

我有一个向量：

```
std::vector<std::pair<int, QString> > recordingArray; 
```

我需要将其转换为逗号分隔的字符串，以便我可以将其存储在数据库中（是否有更好的数据格式 - 所有内容都需要放在一个字段中）

如何将其转换为逗号分隔的字符串？

然后再把它转换回来？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-10T21:42:40.207

为此使用`std::transform`和 a `std::stringstream`。

```
std::stringstream str;

std::transform(
    recordingArray.begin(),
    recordingArray.end(),
    std::ostream_iterator<std::string>(str, ", "),
    [](const std::pair<int, QString> &p) { return std::to_string(p.first) + ", " + p.second.toStdString(); }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T21:19:21.560

```
string line = "";
auto it = recordingArray.begin();

while(it != recordingArray.end())
{
  line.append(*it);
  line.append(',');
} 
```

这假设每个项目都可以直接转换为字符串。您可能需要编写一个 toString 函数。

```
string toString(std::pair<int, QString>> input)
{
  /* convert the data to a string format */
} 
```

然后调用`line.append(toString(*it))`。

# android - Android Market 将我的应用程序隐藏到某些平板电脑（如 Nexus 7）

> ID：13809256
> 
> 赞同：4
> 
> 时间：2012-12-10T21:07:05.113
> 
> 标签：android, permissions, android-manifest, google-play, uses-feature

这是我的 Manifest.xml 配置，我不明白为什么 Nexus 7 和其他平板电脑无法从市场下载此应用。

```
<uses-sdk android:minSdkVersion="10" android:targetSdkVersion="10"/>

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" android:required="false"/>
<uses-permission android:name="android.permission.READ_PHONE_STATE" android:required="false"/>
<uses-permission android:name="android.permission.CAMERA" android:required="false"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" android:required="false" />
<uses-permission android:name="android.permission.CALL_PHONE" android:required="false" /> 
<uses-feature android:name="android.hardware.camera" android:required="false"/> 
<uses-feature android:name="android.hardware.camera.autofocus" android:required="false"/> 
```

在开发者控制台中有这个字符串 Layout schermo: SMALL NORMAL LARGE XLARGE 所以我相信问题是权限。有什么建议么？

所有清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="**********"
android:versionCode="3"
android:versionName="1.4" >

<uses-sdk 
    android:minSdkVersion="10" 
    android:targetSdkVersion="10"/>

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" android:required="false"/>
<uses-permission android:name="android.permission.READ_PHONE_STATE" android:required="false"/>
<uses-permission android:name="android.permission.CAMERA" android:required="false"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" android:required="false" />
<uses-permission android:name="android.permission.CALL_PHONE" android:required="false" /> 
<uses-feature android:name="android.hardware.camera" android:required="false"/> 
<uses-feature android:name="android.hardware.camera.autofocus" android:required="false"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".SplashScreenActivity"
        android:label="@string/app_name"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Transparent" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="**************"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Transparent" >
    </activity>
    <activity
        android:name="InfoServizio"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Transparent" >
    </activity>
    <activity
        android:name="NewProfilo"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Transparent" >
    </activity>
    <activity
        android:name="MiaDietaActivity"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Transparent" >
    </activity>
    <activity
        android:name="Percentuali"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Transparent" >
    </activity>
    <activity
        android:name="DatiFisiciUtente"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Transparent" >
    </activity>
    <activity
        android:name="ListViewFoodCategoryActivity"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Transparent" >
    </activity>
    <activity
        android:name="ListViewFoodActivity"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Transparent" >
    </activity>
    <activity
        android:name="FoodDescriptionActivity"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Transparent" >
    </activity>
    <activity android:name="MiaDietaActivityWebView" >
    </activity>
    <activity
        android:name="AggiungiNuovoPiattoActivity"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Transparent" >
    </activity>
    <activity
        android:name="EmailActivity"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Transparent" >
    </activity>
    <activity
        android:name="ProfiloActivity"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Transparent" >
    </activity>
    <activity
        android:name="InsertInitialDataActivity"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Transparent" >
    </activity>
    <activity
        android:name="LoginActivity"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Transparent" >
    </activity>
    <activity
        android:name=".StoricoTabActivity"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Transparent" >
    </activity>
    <activity
        android:name="PesoRiepilogoActivity"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Transparent" >
    </activity>
    <activity
        android:name="GraficoRiepilogoActivity"
        android:screenOrientation="landscape"
        android:theme="@style/Theme.Transparent" >
    </activity>
    <activity
        android:name="StoricoPesoActivity"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Transparent" >
    </activity>
    <activity
        android:name="StoricoPietanzeActivity"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Transparent" >
    </activity>
    <activity
        android:name="AggiungiNuovoPiattoSecondoPassaggioActvity"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Transparent" >
    </activity>
    <activity
        android:name="ActivityScattaFoto"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name="ListViewMyFoodActivity"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Transparent" >
    </activity>
    <activity
        android:name="ListViewMyFoodCategoryActivity"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Transparent" >
    </activity>
    <activity
        android:name="SearchActivity"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Transparent" >
    </activity>
    <activity
        android:name="HomeActivity"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Transparent" >
    </activity>
    <activity
        android:name="GraficoOK"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Transparent" >
    </activity>
    <activity
        android:name="FormuleActivity"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Transparent" >
    </activity>
    <activity
        android:name="CreditsActivity"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Transparent" >
    </activity>
    <activity
        android:name="AssociaDietologoActivity"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Transparent" >
    </activity>
    <activity android:name="org.achartengine.chartdemo.demo.chart.XYChartBuilder" />
    <activity android:name="org.achartengine.chartdemo.demo.chart.PieChartBuilder" />
    <activity android:name="org.achartengine.GraphicalActivity" />
    <activity android:name=".GeneratedChartDemo" />
    <activity
        android:name="AttesaDietologoActivity"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Transparent" >
    </activity>
    <activity
        android:name="FacebookLikeActivity"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name="TwitterGoActivity"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name="CalendarView"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Transparent" >
    </activity>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T23:27:02.293

您不能使用`android:required="false"`权限；它只是为了`uses-feature`。某些权限意味着功能。在这种情况下`android.permission.CALL_PHONE`意味着 `android.hardware.telephony`。Nexus 7 没有此功能，将被过滤掉。试试这个：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.CALL_PHONE" />

<uses-feature android:name="android.hardware.camera" android:required="false"/> 
<uses-feature android:name="android.hardware.camera.autofocus" android:required="false"/>
<uses-feature android:name="android.hardware.telephony" android:required="false"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T21:22:11.490

Nexus 7 没有自动对焦功能。因此，如果它显示在您的`<uses>`标签中，该应用程序将对所有不具备该功能的设备隐藏。如果您的应用程序不需要自动对焦，而只需要相机，则删除该`<uses>`标签，您应该可以在所有具有相机的设备上继续使用。您可能还想`<uses>`将相机的标签更改为 camera.any，否则它会因为缺少后置相机而失败。

# vhdl - 如何通过枚举索引 std_logic_vector

> ID：13809260
> 
> 赞同：5
> 
> 时间：2012-12-10T21:07:13.050
> 
> 标签：vhdl

我有一个像这样的 std_logic_vector：

```
cntrl_signals:out std_logic_vector(4 downto 0); 
```

为该向量设置索引的一种方法是为每个向量显式定义一个常量。

```
constant CLK_SIG:integer := 0;
constant EN_SIG:integer := 1;
constant FOO_SIG:integer := 2;
constant BAR_SIG:integer := 3;
constant BAZ_SIG:integer := 4; 
```

这个想法是使用这些来索引向量。

```
cntrl_signals <= (CLK_SIG=>1,EN_SIG=>1,others=>0); 
```

我的问题是，是否有一种很好的简写方式来声明索引（如 C 中的枚举）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T22:10:09.867

那么你可以使用枚举，最好的方法是声明你自己的 std_logic 向量，由枚举而不是整数索引。

但可能更好的是记录而不是向量：

```
type Control_Signals is record
   Clk : std_logic,
   En  : std_logic,
   Foo : std_logic,
   Bar : std_logic,
   Baz : std_logic
end record; 
```

编辑以获取更多信息，以下评论：

对 std_logic_vector （以及一般的 VHDL 类型系统）的想象不到的使用阻碍了 VHDL ......

如果这是顶级实体，则 std_logic_vector 端口允许您在顶级测试台中用综合后网表替换您的可综合设计。或者您可能必须遵守坚持使用 std_logic_vector 端口的过时编码风格指南。

但在任何其他情况下，我都会在包中声明记录，在整个设计中使用该包，并制作记录类型的端口。该软件包应包含函数`to_slv`，并且`to_control_sigs`在您实际需要 std_logic_vectors 的情况下（如果您做对了，则很少见）。

这同样适用于枚举：

```
type Controls is (Clk, En, Foo, Bar, Baz);
type Control_Signals is array(Controls) of std_logic;
My_Bus_Ctrl : Control_Signals := (Clk => '1', En => '1', others => '0');
My_External_SLV_Port <= std_logic_vector(My_Bus_Ctrl); 
```

当然，枚举比 C 更强大。除了将它们用作数组索引类型外，您还可以循环它们。每当您更新枚举时，它都会使您的循环保持一致！

由枚举索引的记录或数组都可以工作；我更喜欢记录更清晰，更符合面向对象的实践。

无论哪种情况，如果您将它用于实体端口，它就会变得更加有用。为传出总线信号（包括地址和数据）声明一条记录（或数组！），为传入信号声明另一条记录，因为您不能在单个端口中混合方向......（这些天在 FPGA 中没有双向信号，所以不需要第三个端口）

现在您的设计受到保护，免受总线结构变化的影响；更改地址宽度或添加中断信号只会更改记录声明和任何实际用户；无需在整个层次结构中添加新信号...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:57:51.977

布赖恩有最好的答案，但还有一点信息：

您可以像这样创建一个枚举：

```
type some_type is (clk, en, foo, bar, baz); 
```

如果你有一个`signal`or`variable`那个类型，你可以使用该`'pos`属性将它转换回一个数字：

```
variable v : some_type := foo; 
```

`v'pos`将返回整数`2`

# serial-port - Apache Mina 串行错误：java.lang.NoSuchMethodError

> ID：13809261
> 
> 赞同：0
> 
> 时间：2012-12-10T21:07:20.957
> 
> 标签：serial-port, mina

我在与 Apache Mina 的串行连接上工作了几天。但我没有运气。我建立了一个小测试程序并得到了这个错误：

```
Exception in thread "main" java.lang.NoSuchMethodError: org.apache.mina.core.session.AbstractIoSession.<init>(Lorg/apache/mina/core/service/IoService;)V
at org.apache.mina.transport.serial.SerialSessionImpl.<init>(SerialSessionImpl.java:73)
at org.apache.mina.transport.serial.SerialConnector.connect0(SerialConnector.java:97)
at org.apache.mina.core.service.AbstractIoConnector.connect(AbstractIoConnector.java:262)
at org.apache.mina.core.service.AbstractIoConnector.connect(AbstractIoConnector.java:172)
at org.apache.mina.timeserver.SerialTest.main(SerialTest.java:22) 
```

我不知道我能做些什么来解决这个问题......

这是我的小**SerialTest.java**

```
package org.apache.mina.timeserver;
import org.apache.mina.transport.serial.*;

import org.apache.mina.core.service.IoHandlerAdapter;
import org.apache.mina.core.session.IoSession;
import org.apache.mina.core.future.ConnectFuture;
import org.apache.mina.filter.codec.textline.TextLineCodecFactory;
import org.apache.mina.filter.codec.ProtocolCodecFilter;

public class SerialTest extends IoHandlerAdapter {

@SuppressWarnings("deprecation")
public static void main(String [] args){

    SerialConnector connector = new SerialConnector();      
    connector.getFilterChain().addLast("codec", new ProtocolCodecFilter(
            new TextLineCodecFactory()));
    connector.setHandler(new SerialTest());
    String comPort = "COM10";
    int bauds = 9600;
    ConnectFuture cf = connector.connect(
        new SerialAddress(comPort, bauds,   SerialAddress.DataBits.DATABITS_8,
            SerialAddress.StopBits.BITS_1, SerialAddress.Parity.NONE,
            SerialAddress.FlowControl.NONE));       

    cf.join();      
    String rawcmd = "";
    while (true){
        rawcmd = System.console().readLine().trim();
        if (rawcmd.equals("exit"))
            break;
        else if (rawcmd.equals(""))
            continue;
        /* IoBuffer.setUseDirectBuffer(false); 
        IoBuffer buf = IoBuffer.allocate(1024); */            
        cf.getSession().write(rawcmd + "\r");//cf.getSession().write(rawcmd + "\r\n"); also tested
    }
    //cf.getSession().getCloseFuture().awaitUninterruptibly();
    cf.getSession().close();
    connector.dispose();
}
public void sessionClosed(IoSession session) {     
    System.err.println("Total " + session.getReadBytes() + " byte(s)");
}
public void messageSent(IoSession session, Object message) {
    System.out.println("message has been sent: " + message);
}
public void messageReceived(IoSession session, Object message) {
    System.out.println("message received:[" + message + "]");
}   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:27:14.337

我将框架更新到最后一个稳定版本，以及串行的额外文件（mina-transport-serial）。

现在它运行良好。谢谢你的帮助。

# c++ - 从 void * 转换为 Local

> ID：13809262
> 
> 赞同：0
> 
> 时间：2012-12-10T21:07:25.073
> 
> 标签：c++, casting, v8

我正在与一些将 void * 用于上下文对象（在本例中为 v8 函数）的代码集成，我希望将其转换回函数，但这会导致编译错误。你会如何处理这种情况？

```
void callback(void* context) {
    Local<Function> func = static_cast<Local<Function> *>(context);
    func->Call(Context::GetCurrent()->Global(), 1, 0);
} 
```

这是注册回调的代码。请注意，fn 作为 void * 传递给“回调”。

```
Persistent<Function> fn = Persistent<Function>::New(Handle<Function>::Cast(args[0]));
registerEvent(&callback, /* context*/ &fn); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:24:02.907

为了使其工作，您需要`context`将其转换并分配给一个指针值，如下所示：

```
Local<Function> *func = static_cast<Local<Function> *>(context); 
```

# apache - 结合 Mod_rewrite 规则

> ID：13809267
> 
> 赞同：1
> 
> 时间：2012-12-10T21:07:35.223
> 
> 标签：apache, .htaccess, mod-rewrite

我有四个要重写的网址。

1.  domain.com/index.php?id=1234 => domain.com/1234
2.  domain.com/a.php?id=1234 => domain.com/a/1234
3.  domain.com/b.php?id=4321 => domain.com/b/4321
4.  domain.com/gallery.php => domain.com/gallery

其中，index检查数据库并重定向到正确的页面（a，b，c.php - ect），如果没有找到有效ID，则重定向到gallery.php。

我可以自己编写适用于每种情况的 RewriteRule，但我不知道如何编写它来处理所有这些情况而不会越过规则。

这是我当前的 Mod_rewrite .htaccess 文件：

```
RewriteEngine On

RewriteCond %{REQUEST_URI} !/gallery$ #excludes case 4

RewriteRule ^(.*)$ index.php?id=$1 #handles case 1

RewriteRule ^(.*)/(.*)$ $1.php?id=$2 #handles cases 2 and 3

RewriteCond %{REQUEST_URI} /gallery$
RewriteRule ^/gallery$ /gallery.php [L] #handles case 4 
```

这会导致所有内容都重定向到 domain.com/gallery.php 并导致尝试过多重定向时出错。即使我输入 domain.com/a/1234，也会被重定向到 domain.com/a/gallery.php

我如何更好地分离这些案例 - 如果它在案例 1 之后匹配 domain.com/1234 停止 - 如果它与案例 2 和 3 匹配 domain.com/a/1234 停止 - 如果它用于 domain.com/gallery 之后停止domain.com/gallery.php 被称为...

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:13:29.727

用这个替换你的代码：

```
RewriteRule ^gallery/?$ /gallery.php [L,NC] #handles case 4

RewriteRule ^([^/]+)/([^/]+)/?$ /$1.php?id=$2 [L,QSA] #handles cases 2 and 3

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)$ /index.php?id=$1 [L,QSA] #handles case 1 
```

# python - 如何检查python程序中的选项？

> ID：13809268
> 
> 赞同：5
> 
> 时间：2012-12-10T21:07:37.180
> 
> 标签：python, global-variables, options, argparse

这不是关于如何使用`argparse`，而是关于如何在程序中使用已解析的选项。

检查函数选项中的选项/使用值的好技术是什么？

一些想法：

*   使用全局变量（模块变量）
*   向要在其中使用值的函数添加参数并将其传递（可能不止一个函数级别）
*   `if`每次取决于选项（使用全局变量？）时，使用 - 子句进行检查
*   [为某些检查定义特殊功能](https://stackoverflow.com/questions/5980042/how-to-implement-the-verbose-or-v-option-into-a-python-script)

我必须监督一些技术，这对于有很多选项的大型程序来说似乎是不可行的，尤其是当程序的不同部分有多个文件时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T21:44:50.940

在我看来，参数解析应该是在应用程序的入口点执行的东西。库/模块逻辑应该保持不可知，并使用参数进行初始化。

也就是说，如果您的可运行应用程序需要输入文件的路径，您的`main()`入口点可以使用`argparse`接受`--infile`. 但是库函数`readfile`应该不知道 argparse，并且要么是`infile`作为成员属性接收的类的一部分，要么应该直接将其作为参数接收。

```
class Reader(object):
    def __init__(self, infile):
        self.infile = infile

    def readfile(self):
        # read(self.infile) 
```

或者...

```
def readfile(infile):
    # read(infile) 
```

另一种方法是，如果您使用配置文件，并且有一个配置解析器模块。这可以被读入和解析，然后对需要全局应用程序配置选项的任何模块仍然可用。这种方法的一个例子是[django 如何拥有它的`settings`模块](https://docs.djangoproject.com/en/dev/topics/settings/)。django 项目中的任何应用程序都可以导入和查询设置。

# c++ - 构造函数参数中的引用调用引用的默认构造函数

> ID：13809270
> 
> 赞同：0
> 
> 时间：2012-12-10T21:07:43.407
> 
> 标签：c++

我正在使用以下类声明：

```
class A {
public:
    A(int, float);
    A(const A&);
};

class B {
public:
    B(A&);
protected:
    A a;
}; 
```

我还为 B 设置了以下定义：

```
B::B(A &a) {
    this->a = a;
} 
```

问题是我的`B`构造函数定义有一个错误，告诉我有`No matching function for call to A::A()`.

为什么我的 B 构造函数试图创建一个新的 A？

如果需要上一步，为什么不使用引用调用复制构造函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T21:10:53.470

我假设你`B`有一个`A`需要构建的。在您当前的构造函数中，您没有明确指定`A`要使用的构造函数。因此它会尝试`A`不存在的默认构造函数：

也许你打算用参考来构造 B 的 A？

```
class B {
private:
    A _a;
public:
    B(A& a) : _a(a) {}

}; 
```

# android - Android 的意图创建

> ID：13809273
> 
> 赞同：-1
> 
> 时间：2012-12-10T21:07:48.047
> 
> 标签：android, android-intent

这只是一个初学者的问题，但即使在其他人的问题的帮助下（这确实增加了我的知识），我仍然不确定我做错了什么。我已经直接（通过清单）运行了 SupWorld 类并且它有效，所以我相信问题是我没有正确调用该类。我已经尝试了我找到的所有建议，但每次它都告诉我“不幸的是，测试代码已停止”。在模拟器中。（测试代码是我项目的名称。）我在代码中留下了一些失败的尝试作为注释，以帮助确定问题。我当然尝试在我的内容中使用“this”但没有成功。任何有用的知识将不胜感激！谢谢。

```
package com.evorlor.testcode;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

public class MainActivity extends Activity {

//  Context context;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // setContentView(R.layout.activity_main);

//      context = this;

        Intent intent = new Intent(getApplicationContext(), SupWorld.class);

        startActivity(intent);
    }

    // @Override
    // public boolean onCreateOptionsMenu(Menu menu) {
    // // Inflate the menu; this adds items to the action bar if it is present.
    // getMenuInflater().inflate(R.menu.activity_main, menu);
    // return true;
    // }

} 
```

我的 logCat （我不熟悉 logCat 是什么，做什么或如何使用它。我将它导出为文本文件，这就是所有内容。如果这不是您要找的，请告诉我：

```
12-10 21:11:38.013: W/Trace(1094): Unexpected value from nativeGetEnabledTags: 0 
```

感谢大家的帮助....我认为这是一个明显的问题。如何在清单中声明 SupWorld 类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T21:11:46.420

你`SupWorld`在清单上声明了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:11:01.737

乍一看应该是这样的，如果不起作用，请粘贴 logcat

```
 Intent intent = new Intent(MainActivity.this, SupWorld.class);
    startActivity(intent); 
```

# jquery - 如何将表格行列表排队并在 jQuery 中执行 slideUp() 或 slideDown()？

> ID：13809275
> 
> 赞同：0
> 
> 时间：2012-12-10T21:08:03.127
> 
> 标签：jquery

假设我有一个 50 行的表。我在该表中有父/子关系。我正在尝试单击父行并展开/折叠所有子行。我有这个工作，但我想将一组行作为一组滑动。我该怎么做？

假设用户单击 tr 中的链接。这是用户单击行内链接时的示例函数。注意 TODO：这就是我要解决的问题。

```
 var row = $(this).closest("tr")

    while(true) {

       if(parseInt(row.attr("data-Level"), 10) > selectedRowLevel)
{
    // TODO: I want to put all these rows in a queue maybe and the slideUp all together, not just row by row.
    row.slideToggle();
}
else
break;

row = row.next();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:27:31.457

您不能使用 JavaScript 上下滑动表格行。您只能显示/隐藏它们。这只是表格呈现方式的限制。

只有块级元素才能以这种方式进行动画处理。如果将行替换为 div，将单元格替换为固定宽度跨度，则可以获得动画。

[http://jsfiddle.net/mblase75/WgN2N/](http://jsfiddle.net/mblase75/WgN2N/)

HTML：

```
<div class="tr">
    <span class="td">asdf</span>
    <span class="td">qwer</span>
    <span class="td">zxcv</span>
</div> 
```

CSS：

```
.td {
    display: inline-block;
    width: 100px;
    height: 20px;
    padding: 10px;
    background: #eee;
}
.tr {
    display: block; 
}
​ 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-10T21:15:29.247

向所有这些指定的行添加一个新类。

然后在新创建的类上执行`slideUp()`or 。`slideDown()`

# jqgrid - jqGrid saveRow 上下文

> ID：13809277
> 
> 赞同：0
> 
> 时间：2012-12-10T21:08:28.710
> 
> 标签：jqgrid, inline, edit

jqGrid saveRow 上的文档非常简单。

[http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ainline_editing#saverow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ainline_editing#saverow)

不幸的是，它也是不完整的。我正在 jqGrid 中进行内联编辑。我正在使用 inlineNav，并且设置了“save: true”和“keys: false”。当用户单击内联导航中的保存或磁盘图标时，我想保存。为了实现这一点，我在哪里调用 saveRow？

请注意，rowid 被传递给 saveRow。这就引出了一个问题，在内联编辑上下文中应该从哪里调用保存行？editoptions，onSelectRow（用于内联编辑）还是其他地方？

我的代码看起来很像这样

[ASP.Net MVC 3 JQGrid](https://stackoverflow.com/questions/5092866/asp-net-mvc-3-jqgrid/13166722#13166722)

# java - Can I open an application using Selenium?

> ID：13809287
> 
> 赞同：1
> 
> 时间：2012-12-10T21:08:55.957
> 
> 标签：java, sql, selenium, automated-tests

I'm writing a script for test automation which requires checking the back-end SQL database in the SQL Developer. Is it possible that I do this through selenium? Selenium is a web automation..

If not, I can do this through java, right?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T04:22:18.570

Selenium is only used for web browser it open web site in browser and record only website, it does not used for desktop application for desktop application you will be used Java or QTP.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T21:20:49.470

I dont think selenium can open desktop applications. It can only open browser depending on the input variable. You need to do it in java.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T04:33:47.787

If you are using java with selenium you can use :

```
Runtime.getRuntime().exec("//path to ur application") 
```

Now further if that application has UI that you can get control on that using tools like **Autoit**.

# sql - 具有输入参数的存储过程 - 新颖的基于集合的方法

> ID：13809290
> 
> 赞同：0
> 
> 时间：2012-12-10T21:09:03.127
> 
> 标签：sql, sql-server, tsql

我在网上找到了以下脚本的改编：

```
CREATE TABLE alphaCodes
(personID INTEGER NOT NULL,
 codes CHAR(10) NOT NULL,
 );

INSERT INTO alphaCodes
VALUES (1, '12300'), (1, '23400'), (1, '45623'), 
       (2, '99900'), (2, '23411'), (2, '78900'), 
       (3, '12300'), (3, '23400'), (3, '45699');
go
CREATE PROCEDURE GetPeopleWithCodes 
(@d1 CHAR(10) = NULL, @d2 CHAR(10) = NULL, 
 @d3 CHAR(10) = NULL, @d4 CHAR(10) = NULL, 
 @d5 CHAR(10) = NULL)
AS BEGIN
--cte for the alphaCodes table
WITH Patient_Diagnosis (personID, codes)
AS (SELECT personID, codes FROM alphaCodes),

codeList (codePattern)
AS
--row constructor makes a table of the variables that will be passed into the stored procedure
(SELECT X.codePattern 
  FROM (VALUES (@d1), (@d2), (@d3), (@d4), (@d5))
        AS X(codePattern)
 WHERE X.codePattern IS NOT NULL)

SELECT DISTINCT personID 
 FROM Patient_Diagnosis AS PD1
 WHERE NOT EXISTS 
       (SELECT *
          FROM codeList
         WHERE NOT EXISTS 
              (SELECT *
                 FROM Patient_Diagnosis AS PD2
                WHERE PD1.personID = PD2.personID
                  AND PD2.codes LIKE codeList.codePattern));
END; 
--for whatever reason, the % wildcard does not and and the _ has to be used
exec dbo.GetPeopleWithCodes '123___' 
```

这个存储过程最多需要五个输入参数，并且基本上会返回一个包含许多参数的内连接。所以如果你跑

```
exec dbo.getpeoplewithcodes '234___' 
```

`1,2,3`将被退回。如果你跑

```
exec dbo.getpeoplewithCodes '234____','123___' 
```

将返回`1,3`。当我尝试这样做时，我使用动态 SQL 来创建一个表，该表具有各种连接`alphaCodes`。上述方法要快很多，但有一个问题：我一生都无法完全理解它。我喜欢`like`最后一个连接中的运算符，但我没有得到第一`where not exists`个子查询。任何人都可以帮助解释发生了什么吗？你怎么能只有两个引用 alphaCodes 表并且让这个东西仍然有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:07:16.133

如果我理解正确，此代码旨在返回所有患者的列表，这些患者的诊断代码与所有输入参数模式匹配。

最后的`SELECT`语句是一个双重否定，说明了相同的要求 - 它返回一个不同的列表，其中包含所有行的`Patient_Diagnosis.Patient_Id`值，这些`Patient_Diagnosis`行不在没有与输入参数列表匹配的代码的行集中。这是编写此查询的一种令人困惑的方式。

以下内容没有经过大量测试，但似乎仅通过一次扫描`alphaCodes`表即可返回相同的结果。我已经删除了 CTE，`alphaCodes`因为它是多余的：

```
ALTER PROCEDURE GetPeopleWithCodes 
(@d1 CHAR(10) = NULL, @d2 CHAR(10) = NULL, 
 @d3 CHAR(10) = NULL, @d4 CHAR(10) = NULL, 
 @d5 CHAR(10) = NULL)
AS BEGIN
WITH codeList (codePattern)
AS
(SELECT X.codePattern 
  FROM (VALUES (@d1), (@d2), (@d3), (@d4), (@d5))
        AS X(codePattern)
 WHERE X.codePattern IS NOT NULL
)
SELECT pd.PersonId 
FROM codeList cl
JOIN alphaCodes pd
ON pd.codes LIKE cl.codePattern
GROUP BY pd.personID
HAVING COUNT(*) = (SELECT COUNT(*) FROM codeList)
END
GO 
```

# c++ - Boost Python 包装的虚拟类子返回错误：与 C++ 签名不匹配

> ID：13809292
> 
> 赞同：1
> 
> 时间：2012-12-10T21:09:07.327
> 
> 标签：c++, boost-python

我有一个 C++ 对象，它是一个虚拟类的子类，我正在尝试用 python 包装。该文件可以编译，我可以将其导入 python，但是当我尝试调用该函数时，出现错误：

```
In [3]: x
Out[3]: <beh.MappedBehaviourDomain at 0x23e7158>

//So, obviously the constructor is working (or at least thinks it is)

In [4]: x.subject_count()
---------------------------------------------------------------------------
ArgumentError                             Traceback (most recent call last)
/home/max/verk/btr-email/build/x86_64/bin/ipython in <module>()
----> 1 x.subject_count()

ArgumentError: Python argument types in
    BehaviourDomainWrap.subject_count(MappedBehaviourDomain)
did not match C++ signature:
    subject_count(BehaviourDomainWrap {lvalue})
    subject_count(BehaviourDomainWrap {lvalue}) 
```

我很难理解这个错误；这是我第一次使用 boost python，我对 C++ 没有太多经验。以下是相关代码：

```
// Instantiating class for use in boost python
struct BehaviourDomainWrap : BehaviourDomain, wrapper<BehaviourDomain>
{
    size_t subjectCount() const {
        return this->get_override("subjectCount")();
    // A bunch of other methods removed
}

BOOST_PYTHON_MODULE(beh) {

    class_<BehaviourDomainWrap, boost::noncopyable>("BehaviourDomainWrap")
        .def("subject_count", pure_virtual(& BehaviourDomainWrap::subjectCount))
    ;

    class_<MappedBehaviourDomain, bases<BehaviourDomainWrap> >
        ("MappedBehaviourDomain", init<std::string>())
    ;
} 
```

出了什么问题，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:03:16.250

我传递的是对象的包装版本而不是基础。我应该有：

```
class_<BehaviourDomainWrap, boost::noncopyable>("beh")
    .def("subject_count", pure_virtual(& BehaviourDomain::subjectCount))
;

class_<MappedBehaviourDomain, bases<BehaviourDomain> >
    ("mapped_beh", init<std::string>())
; 
```

# javascript - 无法动态添加新文本框 用javascript标记

> ID：13809296
> 
> 赞同：1
> 
> 时间：2012-12-10T21:09:16.513
> 
> 标签：javascript, jquery, html, jquery-mobile

我已经做了半天多了，我无法弄清楚我错过了什么。我尝试了许多不同的迭代以及我能找到的所有其他解决方案。这应该是不费吹灰之力的。我正在使用 JQueryMobile 1.2 它的依赖项这是 javascript（注意`var counter = 2;` *在*代码上方声明：

```
 $("#btn_addIngredient").click(function () {      
        if (counter > 10) {
            alert("Please limit to 10 ingredients");
            return false;
        }   

        var newIngredientTextBox = $(document.createElement('div')).attr("id", 'div_ingredient' + counter);         

        newIngredientTextBox.after().html('<input type="text" name="ingredient' + counter + 
              '" id="ingredient' + counter + '" value="#' + counter + '" >');

        newIngredientTextBox.appendTo("#allIngredientsDiv"); 
        counter++;

    }); //~ $("#btn_addIngredient") 
```

和html：

```
 <div id="IngredientsTextGroup" data-role="fieldcontain">
            <fieldset id="IngredientsFieldset" data-role="controlgroup" data-mini="true">
            <div id="allIngredientsDiv">
                Ingredients
                <div id="div_ingredient1">
                    <input id="ingredient1" value="#1" type="text">
                </div>

                <!-- *** Need to add <div_ingredient2, 3 ...>  -->

            </div>
            <a id="btn_addIngredient" href="#" data-role="button" data-inline="true" data-icon="plus"
                             data-iconpos="left">
                Add Ingredient
            </a>
    <div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:14:23.177

您使用[.after()](http://api.jquery.com/after/)错误..如果您希望元素在您选择的元素之后，请执行此操作

```
newIngredientTextBox.after('<input type="text" name="ingredient' + counter + 
          '" id="ingredient' + counter + '" value="#' + counter + '" />'); 
```

如果您希望它位于 div 元素内，则可以使用 .append()

```
newIngredientTextBox.append('<input type="text" name="ingredient' + counter + 
          '" id="ingredient' + counter + '" value="#' + counter + '" />'); 
```

此外，您需要在将元素添加到 dom 之后附加元素 .. 而不是之前

```
newIngredientTextBox.appendTo("#allIngredientsDiv").after('<input type="text" name="ingredient' + counter + 
          '" id="ingredient' + counter + '" value="#' + counter + '" />'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:13:32.660

尝试

```
var counter = 2;
var newIngredientTextBox = $(document.createElement('div')).attr("id", 'div_ingredient' + counter);         
console.info(newIngredientTextBox);
newIngredientTextBox.after('<input type="text" name="ingredient' + counter +  '" id="ingredient' + counter + '" value="#' + counter + '" >'); 
```

之后添加 html 将不起作用

# python - Python 2.7：在忽略大小写的列表中查找项目

> ID：13809299
> 
> 赞同：3
> 
> 时间：2012-12-10T21:09:23.860
> 
> 标签：python, python-2.7

我有一个字符串列表

```
["oranges", "POTATOES", "Pencils", "PAper"] 
```

我想查找列表是否包含`paper`，忽略大小写；所以下面的代码片段应该打印出来`found`。我的列表只包含仅由英文字母组成的简单字符串——大写和小写。

```
item = 'paper'
stuff = ["oranges", "POTATOES", "Pencils", "PAper"]
if item in stuff:
    print "found"
else:
   print "Not found"

#How do I get the method to print "found"? 
```

澄清：

我的列表实际上是一个列表列表，我的逻辑使用以下构造：

```
if not any ( item in x for x in stuff):
   print "Not found"
else:
   print "found" 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-10T21:17:25.230

我会`lower`结合`any`：

```
>>> stuff = ["oranges", "POTATOES", "Pencils", "PAper"]
>>> any(s.lower() == 'paper' for s in stuff)
True
>>> any(s.lower() == 'paperclip' for s in stuff)
False 
```

这将在找到一个后立即短路并停止搜索（与 listcomp 不同）。OTOH，如果您要进行多次搜索，那么您不妨使用 listcomp 来降低整个列表一次。

对于您更新的案例（为什么没有人问他们感兴趣的问题，而是一个不同的问题？），我可能会做类似的事情

```
>>> any("book" in (s.lower() for s in x) for x in stuff)
True
>>> any("paper" in (s.lower() for s in x) for x in stuff)
True
>>> any("stuff" in (s.lower() for s in x) for x in stuff)
False 
```

不过，同样的规则也成立。如果您要进行多次搜索，最好将列表列表规范化一次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T21:16:49.880

您可以使用[List Comprehension](http://www.python.org/dev/peps/pep-0202/)将列表转换为小写。

```
if item in [x.lower() for x in stuff]:
    print "found"
else:
    print "not found" 
```

> > > > stuff = ["oranges", "POTATOES", "Pencils", "PAper"]
> > > > print [x.lower() for x in stuff]
> > > > ['oranges', 'potatoes', 'pencils', 'paper']

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T21:16:37.190

将两个字符串转换为大写或小写并比较它们？

```
item = 'paper'
stuff = ["oranges", "POTATOES", "Pencils", "PAper"]
if item.upper() in map(lambda x: x.upper(), stuff):
    print "found"
else:
    print "Not found" 
```

额外：然后使用此行

```
if not any ( item.upper() in map(lambda y: y.upper(), x) for x in stuff): 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T21:52:00.853

不是 python 爱好者，通常是编程新手，但是，这是我的解决方案：

我试图与您的一般方法保持一致，但是您可能希望考虑将代码封装在一个函数中。

我不知道你的经验水平，所以如果我发布你已经熟悉的东西，请原谅

这里有一些关于功能的一般信息： [维基百科](http://en.wikipedia.org/wiki/Function_%28computer_science%29)

这里是关于函数的 Pythons 文档： [Python Documentation](http://docs.python.org/2/tutorial/controlflow.html#defining-functions)

第一个解决方案，冗长但对于新手来说更容易理解：

```
def item_finder_a(item, stuff):
    new_array = []
    for w in stuff:
        new_array.append(w.lower())
    if item in new_array:
        print "found"
    else:
       print "Not found"

item_finder(word,array_of_words) 
```

和稍短更简洁的版本

```
def item_finder_b(item, stuff):
    if item in map(str.lower,stuff):
        print "found"
    else:
       print "Not found"

item_finder_b(word,array_of_words) 
```

希望这可以帮助

干杯

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T21:13:33.717

`lower`您可以使用该功能，而不是使用您现在拥有的东西。

```
for strings in stuff:
  if strings.lower() == item:
    print "found"

print "Not found" 
```

# jquery - 同一父 div 中其他子项的 RemoveClass

> ID：13809304
> 
> 赞同：0
> 
> 时间：2012-12-10T21:09:41.040
> 
> 标签：jquery, css, html, radio

我正在尝试用 div 替换我的广播圈。

通过单击 div 进行选择是有效的。所选 div 的突出显示有效。

但是，当我选择其他选项之一时，如何删除同一父项中其他子项的“选定”类？

我的 JS 现在是：

```
$('.option').click(function() {
    $('input', this).prop("checked", true);
    $(this).addClass('optionSelected');
} 
```

[http://jsfiddle.net/S7Js8/](http://jsfiddle.net/S7Js8/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:10:51.063

用于`siblings()`定位兄弟 div，

```
$('.option').click(function() {
    $('input', this).prop("checked", true);
    $(this).addClass('optionSelected')
           .siblings()
           .removeClass('optionSelected');
});​ 
```

[**小提琴**](http://jsfiddle.net/S7Js8/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:13:12.257

尝试这个，

```
$('.option').click(function() {
    $(this).parent().find('.option').removeClass('optionSelected');
    $('input', this).prop("checked", true);
    $(this).addClass('optionSelected');
}); 
```

如果所有选项都是兄弟，那么你可以这样做，

```
$('.option').click(function() {
    $(this).siblings('.option').removeClass('optionSelected');
    $('input', this).prop("checked", true);
    $(this).addClass('optionSelected');
}); 
```

# objective-c - NSDateFormatter 解析唯一格式

> ID：13809305
> 
> 赞同：0
> 
> 时间：2012-12-10T21:09:48.113
> 
> 标签：objective-c, nsdateformatter

我从 XML Feed 中获取了 100 多个节点到我的 iPhone 应用程序中。在其他信息中，我正在约会。以下是日期提要之一的示例： 2012-12-08T00:00:00 如何在不事先操作字符串的情况下解析这些数据？我已经搞砸了一点，但我的 dateFromString 只是得到零。如果我不能使用 NSDateFormatter 解析它，那么我可以操作字符串，或者当然可以做你建议我做的任何事情。

这是我所拥有的：

```
NSString *testDate = @"2012-12-15T00:00:00";

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
NSDate *dateFromString = [[NSDate alloc] init];
dateFromString = [dateFormatter dateFromString:testDate]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T21:13:14.997

```
[dateFormatter setDateFormat:@"yyyy-MM-ddTHH:mm:ss"]; 
```

并且您不需要您的日期`alloc`-`init`因为它会被`dateFromString:`.

# java - @Service 是否保证 Spring 中的唯一性？

> ID：13809311
> 
> 赞同：6
> 
> 时间：2012-12-10T21:10:28.103
> 
> 标签：java, spring, service, annotations, scope

假设一个类用 注释`@Service`，Spring 是否保证该类的唯一实例用于注入？或者我应该把`@Scope("singleton")`每一项服务都放在哪里？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T21:15:08.403

从[文档](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch04s04.html)

> 单例范围是 Spring 中的默认范围

所以没有必要明确地设置它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T21:15:16.503

这是我在 CodeRanch 上找到的讨论：

[http://www.coderanch.com/t/586038/Spring/Spring-treat-Service-Singleton](http://www.coderanch.com/t/586038/Spring/Spring-treat-Service-Singleton)

以及来自不同 Stackoverflow 帖子的答案：

[https://stackoverflow.com/a/2173019](https://stackoverflow.com/a/2173019)

# css - Chrome 中的 CSS 显示问题：背景图像和位置

> ID：13809312
> 
> 赞同：6
> 
> 时间：2012-12-10T21:10:29.183
> 
> 标签：css, google-chrome, browser, web

最近第二次，我发现一个在 Chrome 中正常显示的网页不再显示，我的端没有任何变化。我什至无法确定Chrome 哪里出了问题*。*我会给出我的例子，并感谢任何建议、提示或解决方案！

**背景图像** 网站[saversetter.com](http://saversetter.com)使用垂直平铺的背景图像。Chrome 不再显示它们。在 Firefox 或 IE 中查看以使渐变背景可见。直到几个月前，Chrome 才正确显示了这一点。

**position在**[deadlynightshades.com](http://deadlynightshades.com) 上滚动到页面底部，并将鼠标悬停在此处的缩放器上。直到几周前，Chrome 和所有浏览器都显示标题突然出现在中心底部。然后突然间，我现在知道，*只有*Chrome开始错误定位标题。我在 Chrome 中修复了这个问题，只是为了在其他浏览器中打破它，这就是现在的情况。这个例子目前在 Chrome 中看起来不错，但不应该。在 Firefox 或 IE 中查看缩放器以查看未对齐的标题的外观。

这些页面在 Chrome 中工作，然后突然不再正确显示，我没有任何已知的变化。在其更新中，Chrome 是否已经彻底改变了涉及背景图像或绝对位置规则的 CSS 显示？

附录：这个问题[Chrome 的 CSS 可见性渲染中是否存在错误？](https://stackoverflow.com/questions/8568673/is-there-a-bug-in-chromes-css-visibility-rendering)看起来与我的变焦问题有关，抱歉我没有早点发现它！

解决方案：很抱歉问这个问题，然后想出我自己的解决方案。问帮助我解决了问题，但我以后会更加小心你的时间！通过在 jquery 创建的用于动画标题的 css 中指定百分比位置而不是像素位置来解决位置问题。没有通用的解决方案，或者 Chrome 发生了什么变化。无法在测试环境中重现，因此除了 Chrome 中的更改之外，这与我的页面有关。

关于背景图像显示，Chrome 存在背景大小问题。

`background-size: 25% auto;`正在减少到`background-size: 25%;`并且 25% 被错误地重复用于高度和宽度。我将“自动”更改为“100%”，Chrome 开始显示一像素高的图像。在这种情况下，auto 的确切含义尚不清楚，我不知道为什么我一开始就使用它，但是 Firefox 和 IE 将其呈现为图像的大小，而 Chrome 似乎对两个维度都使用了另一个定义的值.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T07:20:40.493

我只是想发布您的解决方案，以便很明显找到它，任何寻找答案的人都不会错过它。它看起来有点隐藏在你的问题中。

> 通过在 jquery 创建的用于动画标题的 css 中指定百分比位置而不是像素位置来解决位置问题。没有通用的解决方案，或者 Chrome 发生了什么变化。无法在测试环境中重现，因此除了 Chrome 中的更改之外，这与我的页面有关。

# iphone - 基本认证 - reskit -iOS

> ID：13809314
> 
> 赞同：0
> 
> 时间：2012-12-10T21:10:34.210
> 
> 标签：iphone, ios, ios5

我想使用我需要的 restKit api 从 iOS 的 Web 服务获取信息（json）。我的 Web 服务具有基本身份验证

![在此处输入图像描述](../Images/4ef37a12d1df5fd91afbd90e476f633f.png)

我尝试使用以下代码登录：

```
RKURL *baseURL = [RKURL URLWithBaseURLString:@"http://mysite.com"]; 
RKClient *client= [RKClient sharedClient]; 
    client.username = @"user"; 
    client.password = @"passw"; 
    client.authenticationType = RKRequestAuthenticationTypeHTTPBasic;

RKRequest * therequest = [client requestWithResourcePath:@"/authentication"]; 
    [therequest setMethod:RKRequestMethodPOST];                                       
    [therequest setDelegate:self];                               
    [therequest send]; 
```

但我无法得到它。

请......你能给我一个关于restKit的基本身份验证的例子吗？

此致！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T05:34:18.080

首先感谢您的正确答案，您能否向我们展示一下网络服务的外观。因为我自己做，但不能真正使用你的代码这是我的网络服务

```
$UserName = $_GET['u'];
    $Password = $_GET['p'];

    include("Ldap.php");

    $ldap = new Ldap();

    if($ldap->authenticate($UserName, $Password))
 {
        $json = array('status'=>'OK');
    }
    else
    {
        $json = array('status'=>'ERROR');
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:34:34.847

我用以下代码解决了这个问题：

```
 RKURL *baseURL = [RKURL URLWithBaseURLString:@"http://api.mysite.com"];
    RKObjectManager *objectManager = [RKObjectManager objectManagerWithBaseURL:baseURL];
    objectManager.client.baseURL = baseURL;    
    objectManager.client.username = @"user";
    objectManager.client.password = @"passw";

    objectManager.serializationMIMEType = RKMIMETypeXML;

    RKURL *URL = [RKURL URLWithBaseURL:[objectManager baseURL] resourcePath:@"/authentication"];

    NSLog(@"URL: %@", [URL absoluteString]);
    NSLog(@"resourcePath: %@", [URL resourcePath]);
    NSLog(@"query: %@", [URL query]);

    [objectManager loadObjectsAtResourcePath:[NSString stringWithFormat:@"%@?%@", [URL resourcePath], [URL query]] delegate:self]; 
```

我等着回答会帮助别人

# java - 在 CXF WS 调度中返回客户端的方式失败

> ID：13809320
> 
> 赞同：1
> 
> 时间：2012-12-10T21:10:51.230
> 
> 标签：java, cxf

我正在尝试使用 javax.xml.ws.Provider 使用 CXF 开发远程调度程序，如下所述：http: [//cxf.apache.org/docs/jax-ws-dispatch-api.html](http://cxf.apache.org/docs/jax-ws-dispatch-api.html)。我有一个配置了 WSAddressing、SOAP12_HTTP_BINDING 和以下 WSS4J 配置的 CXF 客户端：

客户端 WSS4J IN 拦截器：

```
inProps.put("action",                  "Timestamp Signature Encrypt");      
inProps.put("passwordType",            "PasswordText");
    ... 
```

客户端 WSS4J OUT 拦截器：

```
protected static final String WSU_NS =
    "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd";                                           
protected static final String SOAP12_NS = "http://www.w3.org/2003/05/soap-envelope";
protected static final String SOAP11_NS = "http://schemas.xmlsoap.org/soap/envelope";
protected static final String WSA_NS =  "http://www.w3.org/2005/08/addressing";
protected static final String WSSE_NS="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd";

String userForPswCallback = ...
Map<String, Object> props = new HashMap<String, Object>();
props.put("action",                 "UsernameToken Timestamp Signature Encrypt");
props.put("passwordType",           "PasswordText");
...
props.put("encryptionParts",        "{Content}{"+SOAP12_NS+"}Body;{Element}{"+WSSE_NS+"}UsernameToken");
props.put("signatureKeyIdentifier", "DirectReference");
props.put("signatureParts",         "{Element}{"+SOAP12_NS+"}Body;" +
                "{Element}{"+WSSE_NS+"}UsernameToken;" +
                "{Element}{"+WSA_NS+"}Action;" +
                "{Element}{"+WSA_NS+"}MessageID;" +
                "{Element}{"+WSA_NS+"}To;" +
                "{Element}{"+WSA_NS+"}ReplyTo"); 
```

在调度员方面，我发布了以下调度员服务：

```
@WebServiceProvider( targetNamespace = JettyConstants.PersistenceNameSpace, 
                     serviceName=JettyConstants.PersistenceService, 
                     portName=JettyConstants.PersistencePort)
@ServiceMode (Service.Mode.MESSAGE) 
public class PersistenceProvider implements Provider<Source> {
    private static final Logger log = Logger.getLogger(PersistenceProvider.class);

    private TransformerFactory transformerFactory;

    public PersistenceProvider() {
        // Complete
    }

    private static final DocumentBuilderFactory BUILDER_FACTORY = DocumentBuilderFactory.newInstance();
    static {
          BUILDER_FACTORY.setNamespaceAware(true);
    }

    public Source invoke(Source request) {
       try {
            DOMSource sourceInvoke = null;

            //get userName and userPassword from the interceptor chain (added in a custom interceptor)
            String userName = (String)(PhaseInterceptorChain.getCurrentMessage().get("product.username"));
            String userPassword = (String)(PhaseInterceptorChain.getCurrentMessage().get("product.password"));

            //insert extracted into a org.w3c.dom.Document
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            dbf.setNamespaceAware(true);
            DocumentBuilder builder = null;
            org.w3c.dom.Document doc = null;

            try {
                builder = dbf.newDocumentBuilder();
                InputStream is = convertMessageToInputStream(request);   
                doc = builder.parse(is);                 
            } catch (Exception e) {
                e.printStackTrace();
                return null;
            } 

            NodeList node = doc.getElementsByTagNameNS("*","Security");
            node.item(0).getParentNode().removeChild(node.item(0));

            // Add extra header to the envelop...
            ...

            sourceInvoke = new DOMSource(doc);                

            // 1\. Resolve target service based on wsContext
            QName targetService = new QName(JettyConstants.PersistenceNameSpace,JettyConstants.PersistenceService);
            QName targetPort = new QName(JettyConstants.PersistenceNameSpace,JettyConstants.PersistencePort);
            String targetEndpoint = DispatchStarter.getNewVelocityDestination(false)+"/Persistence";

    /* ****************************************** INVOKE THE REMOTE SERVER *************************************** */           
            // 2\. Create dispatcher
            Dispatch<Source> dispatcher = createDispatcher(targetService, targetPort, targetEndpoint);      

            // 3\. Invoke target service
            Source response = dispatcher.invoke(sourceInvoke);                                         

    /* *********************************************************************************************************** */           

            // 4\. Return service response to consumer
            DOMSource domS = toDOMSourceFromSAX((SAXSource)response);

            //get the doc to modify it:
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            dbf.setNamespaceAware(true);
            DocumentBuilder builder = null;
            org.w3c.dom.Document doc = null;
            builder = dbf.newDocumentBuilder();
            doc = (org.w3c.dom.Document) domS.getNode();                  

            // 4.1\. Take just the body content out of the response received from the server:
            NodeList body_el = doc.getElementsByTagNameNS("*", "Body").item(0).getChildNodes();

            DocumentBuilderFactory docf = DocumentBuilderFactory.newInstance();
            Document docnew = docf.newDocumentBuilder().newDocument();
            Node newNode = docnew.createElementNS(body_el.item(0).getNamespaceURI(), body_el.item(0).getLocalName());
            Node nodeComplete = docnew.adoptNode(body_el.item(0).cloneNode(true));     

            // 4.2\. Create the SAXSource to send back to the client through CXF stack
            ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
            Source xmlSource = new DOMSource(nodeComplete);
            Result outputTarget = new StreamResult(outputStream);
            TransformerFactory.newInstance().newTransformer().transform(xmlSource, outputTarget);
            InputStream is = new ByteArrayInputStream(outputStream.toByteArray());
            InputSource inputSource = new InputSource(is);
            SAXSource finalRes = new SAXSource(inputSource);             

            return finalRes;

        } catch (Exception ex) {
            ex.printStackTrace();
        }
        return null;
    }

    private Dispatch<Source> createDispatcher(QName serviceName, QName portName, String targetEndpoint) {
        Service service = Service.create(serviceName);         
        String actualBinding = SOAPBinding.SOAP12HTTP_BINDING;
        service.addPort(portName, actualBinding, targetEndpoint);
        Dispatch<Source> dispatcher = service.createDispatch(portName, Source.class,
                Service.Mode.MESSAGE);
        return dispatcher;
    }
} 
```

PersistenceProvider（调度程序）与以下 WSS4JInterceptors 一起发布

```
Dispatcher WSS4J Dispatcher IN interceptors:

    Map<String, Object> inProps = new HashMap<String, Object>();
    inProps.put(WSHandlerConstants.ACTION, "UsernameToken Timestamp Signature Encrypt");
    inProps.put("passwordType",            "PasswordText");
    ...

Dispatcher WSS4J Dispatcher OUT interceptors:

    protected static final String WSU_NS =
        "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd";

    protected static final String SOAP_NS = "http://www.w3.org/2003/05/soap-envelope";
    protected static final String WSA_NS =  "http://www.w3.org/2005/08/addressing";

    outProps.put(WSHandlerConstants.ACTION, "Timestamp Signature Encrypt");
    outProps.put("passwordType",            "PasswordText");
    ...
    outProps.put("encryptionParts",         "{Content}{"+SOAP_NS+"}Body");
    ...
    outProps.put("signatureParts",          "{Element}{" + WSU_NS + "}Timestamp;" +
                        "{Element}{"+SOAP_NS+"}Body;" +
                        "{Element}{"+WSA_NS+"}Action;" +
                        "{Element}{"+WSA_NS+"}MessageID;" +
                        "{Element}{"+WSA_NS+"}To;" +
                        "{Element}{"+WSA_NS+"}RelatesTo"); 
```

并启用了 WSAddressingFeature。我可以将来自客户端的请求重定向到远程服务器，然后从调度程序端的远程服务器获取响应。不幸的是，当我尝试将答案发送回我的客户时（即在 PersistenceProvider#invoke 方法的 return 语句之后），我得到以下异常：

```
{http://dbproxyservice/}PersistenceService#{http://dispatch/}invoke has thrown exception, unwinding now
org.apache.cxf.binding.soap.SoapFault: Error creating SOAPMessage
       at org.apache.cxf.jaxws.interceptors.MessageModeOutInterceptor$MessageModeOutInterceptorInternal.handleMessage(MessageModeOutInterceptor.java:210)
       at org.apache.cxf.jaxws.interceptors.MessageModeOutInterceptor$MessageModeOutInterceptorInternal.handleMessage(MessageModeOutInterceptor.java:182)
       at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
       at org.apache.cxf.interceptor.OutgoingChainInterceptor.handleMessage(OutgoingChainInterceptor.java:77)
       at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
       at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:123)
       at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.serviceRequest(JettyHTTPDestination.java:323)
       at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.doService(JettyHTTPDestination.java:289)
       at org.apache.cxf.transport.http_jetty.JettyHTTPHandler.handle(JettyHTTPHandler.java:72)
       at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:942)
       at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:878)
       at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
       at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:250)
       at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:110)
       at org.eclipse.jetty.server.Server.handle(Server.java:349)
       at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:441)
       at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:936)
       at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:893)
       at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:224)
       at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:52)
       at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:586)
       at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:44)
       at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:598)
       at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:533)
       at java.lang.Thread.run(Thread.java:662)
Caused by: com.ctc.wstx.exc.WstxEOFException: Unexpected EOF in prolog
at [row,col {unknown-source}]: [1,0]
       at com.ctc.wstx.sr.StreamScanner.throwUnexpectedEOF(StreamScanner.java:677)
       at com.ctc.wstx.sr.BasicStreamReader.handleEOF(BasicStreamReader.java:2104)
       at com.ctc.wstx.sr.BasicStreamReader.nextFromProlog(BasicStreamReader.java:2010)
       at com.ctc.wstx.sr.BasicStreamReader.next(BasicStreamReader.java:1102)
       at org.apache.cxf.staxutils.StaxUtils.copy(StaxUtils.java:551)
       at org.apache.cxf.staxutils.StaxUtils.copy(StaxUtils.java:513)
       at org.apache.cxf.staxutils.StaxUtils.copy(StaxUtils.java:467)
       at org.apache.cxf.jaxws.interceptors.MessageModeOutInterceptor$MessageModeOutInterceptorInternal.handleMessage(MessageModeOutInterceptor.java:204)
       ... 24 more
[10Dec 18:59:51,881] (doLog@372) WARN  PhaseInterceptorChain - Interceptor for {http://dbproxyservice/}PersistenceService#{http://dispatch/}invoke has thrown exception, unwinding now
java.lang.NullPointerException
       at org.apache.cxf.ws.addressing.ContextUtils.hasEmptyAction(ContextUtils.java:358)
       at org.apache.cxf.ws.addressing.MAPAggregator.assembleGeneric(MAPAggregator.java:686)
       at org.apache.cxf.ws.addressing.MAPAggregator.aggregate(MAPAggregator.java:660)
       at org.apache.cxf.ws.addressing.MAPAggregator.mediate(MAPAggregator.java:515)
       at org.apache.cxf.ws.addressing.MAPAggregator.handleMessage(MAPAggregator.java:228)
       at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
       at org.apache.cxf.interceptor.AbstractFaultChainInitiatorObserver.onMessage(AbstractFaultChainInitiatorObserver.java:107)
       at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:323)
       at org.apache.cxf.interceptor.OutgoingChainInterceptor.handleMessage(OutgoingChainInterceptor.java:77)
       at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
       at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:123)
       at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.serviceRequest(JettyHTTPDestination.java:323)
       at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.doService(JettyHTTPDestination.java:289)
       at org.apache.cxf.transport.http_jetty.JettyHTTPHandler.handle(JettyHTTPHandler.java:72)
       at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:942)
       at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:878)
       at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
       at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:250)
       at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:110)
       at org.eclipse.jetty.server.Server.handle(Server.java:349)
       at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:441)
       at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:936)
       at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:893)
       at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:224)
       at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:52)
       at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:586)
       at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:44)
       at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:598)
       at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:533)
       at java.lang.Thread.run(Thread.java:662) 
```

你有什么提示可以避免这个错误吗？特别是，为了通过 CXF 堆栈将调用响应发送回客户端，我该怎么做？在上面的 PersistenceProvider#invoke 的第 4 点删除从远程服务器获取的所有标头是否正确？我这样做是因为我认为调度员的 CXF 输出拦截器会在 Body 周围从头开始构建信封。那是对的吗？

谢谢！

# ruby - 为什么这种方法没有接收器？

> ID：13809325
> 
> 赞同：0
> 
> 时间：2012-12-10T21:11:01.137
> 
> 标签：ruby

嗨，我目前正在查看 ruby​​ 测验解决方案 (http://rubyquiz.com/quiz76.html)，这对我来说很有意义，但我无法理解为什么没有`self`或任何类型的接收器用于`shift, pop, scramble`中的方法`munge_word`：

```
class Array
  def munge_each
    map { |word| word.split(//).munge_word }
  end

  def munge_word
    first, last, middle = shift, pop, scramble
    "#{first}#{middle}#{last}"
  end

  def scramble
    sort_by{rand}
  end
end 
```

是不是因为它打开了 Array 类并给它添加了函数？这些方法是类方法吗？我认为 of 的语法`var1, var2 = var3, var4`只是为了简洁的多个变量赋值。我从来没有见过用一方面的方法来完成它。有人可以解释吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T21:13:32.620

```
first, last, middle = shift, pop, scramble 
```

这基本上等同于

```
first = shift
last = pop
middle = scramble 
```

接收者（对于`shift`和方法）是隐式的，它`pop`是。这是一个实例，因为是一个实例方法。`scramble``self``Array``munge_word`

> 我从来没有见过用一方面的方法来完成它。

变量、方法——没关系。右手边的值只需要是一个表达式列表（或数组）。任何表达。看：

```
x = 1

a, b = (x * 2), (x / 0 rescue 5)

a # => 2
b # => 5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T01:51:25.737

self 作为实例方法的接收者始终是可选的。换句话说，一个裸实例方法调用总是被认为是针对自身的。

因此，由于括号也是可选的，`shift`因此是一个方法调用，并被认为是`self.shift`. 因为`self`是一个数组（因为这些是在打开 Array 类的地方定义的实例方法），所以我们告诉某个数组要移位。等等。

# python - 如何取消正在进行的 Requests.Session.Get 请求？

> ID：13809336
> 
> 赞同：4
> 
> 时间：2012-12-10T21:11:49.867
> 
> 标签：python, sockets, python-requests

所以我有一个帮助线程，它使用 https 监听来自服务器的信息。我正在使用 Python 的 Requests.Session 并在没有超时的情况下调用 get()，因为我们确实想等待一些响应。

但是，在关机时，我想很好地结束我所有的辅助线程。我不确定如何终止线程阻塞的 get 请求。在 *nix 环境中，关闭会话的底层套接字最终会引发异常。所以这是一种方法；关闭套接字，捕获异常，开心。在 Windows 上，这似乎不起作用。

杀死/结束会话和获取请求的正确方法是什么，以便我的帮助线程可以终止？

澄清：我正在使用 Python 的 Requests.Session.get()。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T22:20:47.663

在查看了我能想到的所有内容之后，看起来`requests`如果不一直到套接字级别就无法取消正在进行的请求。而且，正如 OP 所指出的那样，即使这在 Windows 上也没有直接帮助，除非你真正进入底层的选择或池循环，而不是仅仅关闭套接字。（如果你不关心 Windows，你可以更容易地通过`signal`线程来取消读取......）所以，这已经差不多了。

一种选择是杀死线程，或者让操作系统为你做这件事。如果线程也做其他工作……好吧，您总是*可以*将其拆分到不同的线程上。但这可能是对代码的重大且毫无根据的重写。

所以，听起来你需要放弃`requests`并使用其他东西。

cURL 库绝对有取消请求的能力。有一组名为 的官方绑定[`pycurl`](http://curl.haxx.se/libcurl/python/)，但它的级别比 低得多`requests`，因此您可能需要查看通过搜索[PyPI](http://pypi.python.org/pypi?%3aaction=search&term=curl&submit=search)可以找到的 69105 更高级别的包装器。其中一些不是很完整/稳定/最新，所以你可能需要做一些尝试才能找到适合你的…</p>

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-03-18T13:45:38.177

您可以使用 Python 请求[的超时，文档](https://2.python-requests.org/en/v2.8.1/user/advanced/#timeouts)说明您可以为超时参数设置一个元组，如 (conn_timeout_ms, read_timeout_ms)：

```
r = requests.get('https://github.com', timeout=(conn_timeout_ms, read_timeout_ms)) 
```

在此示例中，如果在 read_timeout_ms 之后您没有从服务器获得任何响应，则请求将被中止

# java - 如何正确地将对象传递到 libgdx 中的 ApplicationListener

> ID：13809341
> 
> 赞同：0
> 
> 时间：2012-12-10T21:11:56.213
> 
> 标签：java, callback, libgdx

我想将对象传递到我的 ApplicationListener 实现中，但我不断收到 NullPointerExceptions，所以我可能做错了什么。
我得到了异常：`callback.onReady();`

这是异常（行号错误，因为我删除了导入语句）：

```
Exception in thread "LWJGL Application" java.lang.NullPointerException
    at com.dewi.jones.game_Implementation.create(game_Implementation.java:56)
    at com.badlogic.gdx.backends.lwjgl.LwjglApplication.mainLoop(LwjglApplication.java:144)
    at com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:131) 
```

基本上，我希望在 onCreate 方法的最后触发回调。
请帮助
谢谢这是我的ApplicationListener实现代码：

```
 public class game_Implementation implements ApplicationListener {

    ICallbackTest callback;

    public game_Implementation(ICallbackTest callback) {
        this.callback = callback;
    }

    @Override
    public void create() {
        // initialize stuff
        // call the onReady method at the end of the create method, when
        // everything has been initialized and created
        callback.onReady();
    }

    public void sayHello() {
        System.out.println("Hello, this game is ready");
    }

    @Override
    public void resize(int width, int height) {
        // TODO Auto-generated method stub

    }

    @Override
    public void render() {
        // TODO Auto-generated method stub

    }

    @Override
    public void pause() {
        // TODO Auto-generated method stub

    }

    @Override
    public void resume() {
        // TODO Auto-generated method stub

    }

    @Override
    public void dispose() {
        // TODO Auto-generated method stub

    }

} 
```

这是我的桌面游戏课程：

```
public class desktopGame {
public static void main(String[] args) {
    LwjglApplicationConfiguration cfg = new LwjglApplicationConfiguration();
    cfg.title = "game";
    cfg.useGL20 = true;
    cfg.width = 480;
    cfg.height = 320;
    ICallbackTest callback = null;
    final game_Implementation gameInstance = new game_Implementation(
            callback);

    callback = new ICallbackTest() {
        @Override
        public void onReady() {
            gameInstance.sayHello();
        }
    };

    LwjglApplication game = new LwjglApplication(gameInstance, cfg);

} 
```

}

根据@Mel Nicholso 给出的建议，
这是我尝试的解决方案：

```
 ICallbackTest callback = null;
    final game_Implementation gameInstance = null;
    callback = new ICallbackTest() {
        @Override
        public void onReady() {
            gameInstance.sayHello();
        }
    };
    gameInstance = new game_Implementation(
            callback);

    LwjglApplication game = new LwjglApplication(gameInstance, cfg); 
```

现在我收到错误消息：`The final local variable gameInstance cannot be assigned. It must be blank and not using a compound assignment`
请帮助，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:18:13.423

您需要`callback`在实例化 game_Implementation 之前设置变量，而不是之后。交换两行的顺序。

[编辑添加]您需要打破循环引用

```
static class MyGameCallback {
    private MyGame game;
    public void onReady() {
        game.sayHello();
    }
    public void setGame(MyGame game) {
        this.game = game;
    }
}

public static void main(String arg[]) {
    MyGameCallback mgc = new MyGameCallback();
    MyGame game = new MyGame(mgc);
    mgc.setGame(game);

    game.whateverMakesMeReady();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T17:22:53.853

1) 创建不带回调的 game_Implementation 对象。

2) 使用它创建 ICallbackTest 的对象。（在 ICallbackTest 构造函数中传递 game_Implementation 对象）

3) 使用setter方法将回调对象传递给game_Implementation void setCallback(ICallbackTest a);

4) 将 game_Implementation 对象传递给 LwjglApplication 构造函数。

# ios - iOS Twitter 和 Facebook 登录第三方网络服务

> ID：13809345
> 
> 赞同：0
> 
> 时间：2012-12-10T21:12:06.530
> 
> 标签：ios, facebook, web-services, authentication, twitter

这是我希望为我的用户提供的体验：

*   打开应用
*   使用 Facebook 或 Twitter 登录
*   以安全的方式与我的 Web 服务通信

我想在 iOS 中使用本机登录到这些服务（Facebook 和 twitter），但我希望与我的 Web 服务的所有通信都是安全的和经过身份验证的。

目前我可以做一个 iOS 本地登录来验证用户。然后我知道用户已登录，我可以查询身份验证提供程序以获取有关用户的信息。这并没有给我一种与我的 Web 服务通信并知道与 Web 服务通信的人是经过身份验证的用户的方法。

或者我可以在我的网络服务中实现登录（或使用类似的东西[来](http://www.windowsazure.com/en-us/develop/mobile/)处理它）。然后我可以肯定地知道用户已经过身份验证，但是我错过了登录的原生体验。

是否有一种混合方法，用户可以使用本机 iOS 控件登录，我可以使用该身份验证信息来形成对我的 Web 服务的安全访问？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T22:57:09.407

> 这并没有给我一种与我的 Web 服务通信并知道与 Web 服务通信的人是经过身份验证的用户的方法。

是的，它确实。可以说他们使用 facebook 登录。太好了，我们现在有一个`access_token`. 将其传递`access_token`给服务器上的 Web 服务。让脚本联系 Graph API 以获取他们`uid`的`access_token`. `uid`将其与您的已连接帐户数据库相匹配。和砰！您现在知道您正在与哪个用户打交道。

从那里，设置 cookie 等，这样您就不必`uid`每次都重复查找。

# javascript - 空字符串 + null = "null"？

> ID：13809348
> 
> 赞同：5
> 
> 时间：2012-12-10T21:12:17.527
> 
> 标签：javascript, encodeuricomponent

我今天在对我们的应用程序中的恶意 AJAX 请求进行故障排除时遇到了一个奇怪的事件。我们将数据发送回服务器，`jQuery.param`用于构建请求字符串。

在一种情况下，提供给 param 函数的对象有一个 null 选项，所以它看起来像这样：

```
var myData = {
     x : 1,
     y : null
};
var params = jQuery.param(myData); 
```

这段代码其实是埋在一个主干集合里，但是原理是一样的。

现在，当服务器收到参数时，我完全震惊了，因为变量`y`是文字字符串`"null"`，而不是`null`。

经过一番挖掘，我发现`encodeURIComponent(null)`返回的字符串`"null"`和更有趣的`'' + null`收益率`"null"`也是如此。这是在 Chrome 23 和 Firefox 11 上测试的。

最终发送到`jQuery.param`函数的对象是从函数的参数构建的，null 是参数的完全有效值。我只是通过构建对象来解决它`y : param || ''`，但我很好奇原生 JS 函数的明显错误，以及为什么`'' + null = "null"`，因为它们通常被认为是两个不同的概念。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T21:15:58.063

重载的`+`运算符在执行其操作之前尝试将两个操作数转换为公共类型。如果任一操作数是字符串，则它将两个操作数都转换为字符串，然后执行字符串连接。

有关操作员的行为，请参见[ecmascript](http://www.ecma-international.org/ecma-262/5.1/#sec-11.6.1)`+`定义：

> 如果 Type(lprim) 是 String 或 Type(rprim) 是 String，则返回作为连接 ToString(lprim) 后跟 ToString(rprim) 的结果的 String

# jquery - 尝试使用 jQuery 按多个字段对 JSON 进行排序

> ID：13809352
> 
> 赞同：1
> 
> 时间：2012-12-10T21:12:35.787
> 
> 标签：jquery, json, sorting

在参照[此贴](https://stackoverflow.com/questions/3230028/how-to-order-a-json-object-by-two-keys)；我可以按 2 个字段对 JSON 对象数组进行排序。这个帖子还指出：

> “要添加其他列进行排序，您可以在数组比较中添加其他项目。”

```
//THIS WORKS BUT NEEDS TO SORT BY ALL 5 FIELDS..
function sortRecords(a, b){
//note the minus before -cmp, for descending order
// field1 (Y or N), field2 (numeric), field3 (numeric), 
// field4 (Y or N), field5 (Y or N)
return cmp( 
    [-cmp(a.field1, b.field1), cmp(a.field2, b.field2)], 
    [-cmp(b.field1, a.field1), cmp(b.field2, a.field2)]
 );}

//THIS ONLY SORTS BY field1 and field2
function sortRecords(a, b){
//note the minus before -cmp, for descending order
// field1 (Y or N), field2 (numeric), field3 (numeric), 
// field4 (Y or N), field5 (Y or N)
return cmp( 
    [-cmp(a.field1, b.field1), cmp(a.field2, b.field2), cmp(a.field3, b.field3)], 
    [-cmp(b.field1, a.field1), cmp(b.field2, a.field2), cmp(b.field3, a.field3)]
 );}

function cmp(x,y){
return x > y ? 1 : x < y ? -1 : 0;
}

///implementation
data = $(data).sort(sortRecords); 
```

> 我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:18:24.920

我一直在使用 StackOverflow，并结合了几个如何排序/排序的示例；这个功能似乎给了我我正在寻找的东西......

给定这个 JSON 对象数组为**[data]**。

**{"name":"JOE","field1":"Y","field2":3,"field3":79," field4** ":"Y","field5":"Y"} {"name" :"BEN","field1":"Y","field2":15,"field3":113,"field4":"Y","field5":"N"} {"name":"SUE", "field1":"Y","field2":35,"field3":395,"field4":"Y","field5":"Y"}

我可以调用 sortRecords() 来排序我想要的。

**{"name":"JOE","field1":"Y","field2":3,"field3":79," field4** ":"Y","field5":"Y"} {"name" :"SUE","field1":"Y","field2":35,"field3":395,"field4":"Y","field5":"Y"} {"name":"BEN", "field1":"Y","field2":15,"field3":113,"field4":"Y","field5":"N"}

```
function sortRecords(a, b){
    if (a.field1 < b.field1){
        return 1;
    } else if (a.field1 > b.field1){
        return -1;
    } else if (a.field2 < b.field2){
        return 1;
    } else if (a.field2 > b.field2){
        return -1;
    } else if (a.field3 < b.field3){
        return 1;
    } else if (a.field3 > b.field3){
        return -1;
    } else if (a.field4 < b.field4){
        return -1;
    } else if (a.field4 > b.field4){
        return 1;
    } else if (a.field5 < b.field5){
        return -1;
    } else if (a.field5 > b.field5){
        return 1;
    } else {
        return 0;
    }
}

data = $(data).sort(sortRecords); 
```

# php - 致命错误：未找到“CFCredentials”类 - 适用于 S3 的 Amazon AWS 开发工具包错误

> ID：13809353
> 
> 赞同：1
> 
> 时间：2012-12-10T21:12:51.350
> 
> 标签：php, amazon-s3, amazon-web-services

我已经搜索了这个网站以及亚马逊的解决方案，除了我已经解决的用户问题之外，找不到任何东西。

出现此错误并引用第 50 行`config.inc.php`文件的第 50 行，如下所示：

`**致命错误：在第****50**行的**/home/user/public_html/domain.com/folder/config.inc.php**中找不到类“CFCredentials” **'**

 **这是该文件的第 50 行：`CFCredentials::set(array(`后跟 4 个必需的凭据，即 AWS 'key'、'secret'、'default_cache_config' 和 'certificate_authority'，所有这些我都已验证并正确输入。

我正在运行 AWS 提供的示例文件“progress_bar.php”，完全按照它的方式运行，没有任何修改，并且这个错误不断出现。

我已经阅读了所有文档，通过了兼容性测试，并拔掉了我头上所有剩余的头发。是否有人熟悉 AWS 开发工具包并能够就这个问题提供帮助？**

# php - canvas.toDataURL 在 IE 中失败

> ID：13809358
> 
> 赞同：0
> 
> 时间：2012-12-10T21:12:57.483
> 
> 标签：php, javascript, jquery, internet-explorer-9

我在 PHP/jQuery 环境中工作，遇到了一个问题，我可以使用一些指导或建议。

我们有一些 jQuery 代码，我们正尝试使用这些代码将 HTML5 画布中的图像数据导出为 PNG 数据，我们将使用它来提供 PHP 的 imagecreatefrompng() 函数，以便我们可以将图像保存为文件。我们尝试这样做的方式适用于 FF 和 Chrome，但 IE9 似乎做得不太好。（去搞清楚）

我们的代码如下；

```
$(document).ready(function() {
  function invertCase(inString) {
    var outString = "";
    for(var i = 0; i < inString.length; ++i) {
      var ch = inString.charAt(i);
      outString += (ch >= 'A' && ch <= 'Z') ? ch.toLowerCase() : ch.toUpperCase();
    }
    return outString;
  }

  $("#sig-canvas").payjunctionSigCap();
  $("#draw-sig").click(function() {
    var sigVal = $("#signature").val();
    if(/^\}[a-z]{8}/m.test(sigVal)) {
      sigVal = invertCase(sigVal);
    }

    $("#sig-canvas").payjunctionSigCap("showScriptel", sigVal);
      return false;
    });

    $("#clear-sig").click(function() {
      $("#sig-canvas").payjunctionSigCap("clear");
      $("#signature").val("");
      return false;
    });

    $("#signed").click(function() {
      var canvas1 = $("#sig-canvas-canvas");

      $("#data").val( canvas1.toDataURL("image/png") );
    });
}); 
```

这就是当结果数据最终回到 PHP 圈时我得到的结果。

```
Warning: imagecreatefrompng(): '/var/www/vhosts/<siteroot>/eSignatures/00Qd000000GzpsLEAR.png' is not a valid PNG file in /var/www/vhosts/<siteroot>/SigPad.php on line 24

Warning: imagepng() expects parameter 1 to be resource, boolean given in /var/www/vhosts/<siteroot>/SigPad.php on line 26

Warning: imagedestroy() expects parameter 1 to be resource, boolean given in /var/www/vhosts/<siteroot>/SigPad.php on line 27 
```

IE9 是否正在对搞砸数据的数据做些什么？另外，有没有办法让 IE 向我显示正在生成的数据，如 console.log(imgData)？

# c++ - 如何在 C++11 中检测一个类是否是最终的？

> ID：13809359
> 
> 赞同：23
> 
> 时间：2012-12-10T21:12:58.793
> 
> 标签：c++, c++11, final, typetraits

先上代码。

```
#include <iostream>

using namespace std;

struct A final {};
struct B {};

int main()
{ 
    cout << is_final<A>::value << endl; // Output true
    cout << is_final<B>::value << endl; // Output false

    return 0; 
} 
```

**如何实现类is_final？**

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-10T22:23:28.310

作为 GCC 的`__is_final`intrinisic（对于[PR 51365](http://gcc.gnu.org/PR51365)）的实现者，我很确定它不能在库中完成，它需要编译器支持。

您可以使用 C++11 的 SFINAE 表达式功能做一些非常聪明的事情，但是要检测一个类是否是最终的，您需要从它派生，并在模板参数推导上下文中实例化派生类型，但是从一个类是在声明而不是表达式中完成的。

此外，您应该考虑是否只想知道是否使用了`final`伪关键字，或者是否由于其他原因（例如只有私有构造函数）无法派生类。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-10T22:32:47.733

类型特征通常使用 SFINAE 习惯用法来实现，它将一个可能不正确的表达式放在函数模板声明中。将有问题的类型名替换到声明中会导致错误，但在该上下文中会抑制错误，因此要么使用声明，要么不使用声明。但是后备重载支持可能丢失的声明。另一段代码访问该函数以检测是否实例化了敏感过载或仅实例化了备份。

这不起作用，`final`因为它只会在类的模板实例化期间导致失败。没有办法重载类，也没有办法暂时定义一个会失败但不会停止编译的类，以防它派生自 final。

标准报价，C++11 §14.8.2/8：

> 只有在函数类型及其模板参数类型的直接上下文中的无效类型和表达式会导致推导失败。[注意：替换类型和表达式的评估可能会导致副作用，例如类模板特化和/或函数模板特化的实例化，隐式定义函数的生成等。此类副作用不在“立即上下文”，并可能导致程序格式错误。——尾注]

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-10T22:09:00.297

不确定这是否是您想要的，但您可以执行以下操作：

```
#include <iostream>

struct Foo {};
struct Bar {};

template<typename T>
struct is_final {
    static const bool value = false;
};
template<>
struct is_final<Bar> {
    static const bool value = true;
};

int main(void) {
    std::cout << is_final<Foo>::value << std::endl;
    std::cout << is_final<Bar>::value << std::endl;
} 
```

# c# - 如何将 Datareader 投影到预定义的对象中

> ID：13809365
> 
> 赞同：0
> 
> 时间：2012-12-10T21:12:59.257
> 
> 标签：c#, vb.net, async-await, sqldatareader

我需要知道如何将以下内容转换为 VB.net 以用于 Async/Await 项目：

```
public static class Extensions {

    public static IEnumerable<T> Select<T>(
        this SqlDataReader reader, Func<SqlDataReader, T> projection) {

        while (reader.Read()) {
            yield return projection(reader);
        }
    }
} 
```

用法：

```
'call the database asynchronously... and 'await' the results
Using reader = Await Db.GetReaderAsync("spGetDashboard", ParamList)
    Return reader.Select(Function(r)
                             Return New DashboardInfo With {.RowNum = CType(r.Item("RowNum"), Long?)}
                         End Function) 
```

这是我到目前为止所拥有的：

```
<Extension()>
Public Function [Select](Of T)(reader As SqlDataReader, projection As Func(Of SqlDataReader, T)) As IEnumerable(Of T)
    While reader.Read()
        Return CType(projection(reader), IEnumerable(Of T))
    End While
End Function 
```

这是一个例外：

> System.InvalidCastException：无法将“WindowsApplication1.DashboardInfo”类型的对象转换为“System.Collections.Generic.IEnumerable`1[WindowsApplication1.DashboardInfo]”类型。在 C:\Dev\AsyncDbTesting\AsyncDbTesting\Library\Extensions.vb 中的 WindowsApplication1.Extensions.Select[T]（SqlDataReader 阅读器，Func`2 投影）：第 523 行
> 在 C:\Dev\AsyncDbTesting\AsyncDbTesting\Process.vb:line 30 中的 WindowsApplication1.Process.VB$StateMachine_1_GetDashboardAsync.MoveNext() --- 在 System.Runtime 中从先前抛出异常的位置结束堆栈跟踪。 CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task) at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task) at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult() at WindowsApplication1.Form1.VB$StateMachine_0_Button1_Click.MoveNext() in C:\Dev\AsyncDbTesting\AsyncDbTesting\Form1.vb: 第 17 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:29:36.040

抛出异常是因为您试图将 type 的项目转换`T`为 type `IEnumerable(Of T)`。

假设您使用的是 .Net framework 4.5，您想要的代码是

```
<Extension()>
Public Iterator Function [Select](Of T)(reader As SqlDataReader, projection As Func(Of SqlDataReader, T)) As IEnumerable(Of T)
    While reader.Read()
        Yield projection(reader)
    End While
End Function 
```

请注意，`Yield`在 .Net 框架 4.5 之前的 VB.NET 中不存在迭代器的概念。

# ruby-on-rails - Rails 3，如何在路由中获取应用程序 URL

> ID：13809372
> 
> 赞同：0
> 
> 时间：2012-12-10T21:13:35.310
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我认为这是一个简单的问题，但我没有找到解决方案。在 Rails 中，如何在路由中获取我的应用程序 URL？

就像是：

```
get '/foo', to: redirect("http://whatheverurl.com/?bar=#{MY_APPLICATION_URL}") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:26:42.240

```
 match '/foo', :to => redirect { |params, request|
    "http://whatheverurl.com/?bar=#{request.env['HTTP_HOST']}"
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T21:44:19.317

你可以这样做：

```
 match "/web_site", :to => proc { |env|
    [301, { 
      'Location' => "http://www.greenviewdata.com?from=#{env['HTTP_HOST']}" 
    }, ["Go here instead: http://www.greenviewdata.com?from=#{env['HTTP_HOST']}"]]
  } 
```

# windows-phone - WP8 阻止操作系统处理 LaunchApp NFC 标签读取

> ID：13809374
> 
> 赞同：2
> 
> 时间：2012-12-10T21:13:45.423
> 
> 标签：windows-phone, nfc, windows-phone-8

我创建了一个 Windows Phone 8 应用程序，该应用程序在将 LaunchApp NFC 标签呈现给手机时读取并处理它。

默认情况下，当 LaunchApp NFC 标签呈现给手机时，WP8 OS 会自动处理标签读取并显示一个对话框，询问用户是要启动应用程序还是忽略它。

问题是：除了我的应用程序接收和处理在显示 LaunchApp NFC 标签时读取的标签外，WP8 操作系统还显示一个对话框，提示用户启动应用程序。

有什么方法可以阻止此对话框显示并严格让我的应用程序处理 LaunchApp NFC 标签？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T23:25:10.810

按照设计，操作系统将始终拦截 LaunchApp Windows NFC 类型；特别是作为操作系统启动应用程序的责任。在您的应用程序中订阅类型几乎没有用处。我建议查看操作系统不处理的备用 NDEF 类型（因此避免使用 MIME 类型，例如 URL 和图像）。

# ruby-on-rails - 用于生成内容的 Ruby gem

> ID：13809378
> 
> 赞同：1
> 
> 时间：2012-12-10T21:14:05.940
> 
> 标签：ruby-on-rails, ruby, random

是否有用于生成内容的 gem，我想做的是获取将生成随机的 gem：

*   句子（带有 cca​​。字数）
*   数字
*   段落
*   等等

看起来很简单，但我似乎找不到任何东西，有`lorem-impsum-me`宝石，但我想要比这更好的东西。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T21:20:43.013

我认为Faker会做你需要的。它会处理段落、单词、地址、姓名、电子邮件等。

[http://faker.rubyforge.org/](http://faker.rubyforge.org/)

# ruby - 为什么捆绑器使用错误的 gemspec 文件？

> ID：13809379
> 
> 赞同：1
> 
> 时间：2012-12-10T21:14:06.127
> 
> 标签：ruby, gem, bundler, gemspecs

我有一个定制的 gem，它在捆绑、构建、分发和实施方面一直运行良好。gem 是一个框架的核心，其他 gem 是从这个框架中派生出来的。由于大多数派生的 gem 将具有相同的基本结构，因此我想`bin`在 gem 的路径中包含一个 Ruby 脚本，该脚本可用于将文件从`template`文件夹复制到用户将开发自己的 gem 的新文件夹中。

我遇到的问题是该`template`文件夹有一个 gemspec 文件，该文件以文件`$name$.gemspec`中类似命名的类/模块命名（例如：） `module $Name$`，其中`$name$`被用户提供的名称替换。

不幸的是，当我`bundle install`从 gem 的最顶层路径运行时，出现错误：

```
There was a SyntaxError while evaluating $name$.gemspec:
C:/my_gem/template/$name$.gemspec:8: syntax error, unexpected tGVAR
  gem.version = MyGem::$Name$::VERSION 
```

看起来 Bundler 使用了错误的 Gemfile，即使我通过以下方式之一显式传递 Gemfile 或路径：

```
bundle install --gemfile=Gemfile
bundle install --path=C:\my_gem 
```

我还尝试更新`gemspec`我的 Gemfile 行，但无济于事：

```
gemspec name: 'my_gem' 
```

最后，我确保该`template`文件夹甚至不包含在 中`my_gem.gemspec`，但这似乎并不重要：

```
gem.files = Dir.glob("lib/**/*") + %w(LICENSE.txt README.md) 
```

有谁知道为什么 Bundler 试图读取`./template/$name$.gemspec`而不是`./my_gem.gemspec`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:45:33.880

检查 Bundler 源，我可能在[lib/bundler/source/path.rb](https://github.com/carlhuda/bundler/blob/master/lib/bundler/source/path.rb)中发现了罪魁祸首。有 GLOB 用于在[`load_spec_files`](https://github.com/carlhuda/bundler/blob/master/lib/bundler/source/path.rb#L110). 默认全局是[`"{,*,*/*}.gemspec"`](https://github.com/carlhuda/bundler/blob/master/lib/bundler/source/path.rb#L11). 这将在您的 gem 的根目录或根的任何一个后代目录（包括您的模板目录）中找到 *.gemspec。

如果这确实是罪魁祸首，您可以通过将模板目录放在 gem 的 dir 层次结构中更深的位置或更改模板文件的名称使其不以`.gemspec`. 该`Bundler::Source::Path`对象看起来在初始化时可以采用[不同的 glob，](https://github.com/carlhuda/bundler/blob/master/lib/bundler/source/path.rb#L15)但我还没有深入研究以查看是否有可行的方法通过 config 或 cmdline 选项在捆绑执行中指定此替代 glob。

# objective-c - 在 iOS 中显示来自 Web 服务器的一堆图像的最简单方法是什么？

> ID：13809382
> 
> 赞同：0
> 
> 时间：2012-12-10T21:14:25.847
> 
> 标签：objective-c, ios, xcode, uiimageview

我的应用程序需要能够从 Web 服务器/目录（即 www.somedomain.com/images/）获取多个图像。图像的数量永远不会相同，我将无法访问文件的名称，因为它们也永远不会相同。我正在寻找的最终结果是让我的客户能够通过她的 ftp 客户端访问她的子目录，并将图像拖放到指定的文件夹中，而无需为图像命名、写入任何 xml 文件或任何除了将图像拖入文件夹之外的其他步骤。然后我的客户登录到应用程序的用户将能够获取我的客户放置在该目录中的图像。我一直在研究 Apple 的 simpleFTPsample 项目以通过 FTP 访问。我只想知道是否还有其他更简单的选择？一个原因是：simpleFTPsample 样式需要 FTP 用户名和密码才能访问这些文件。我不是 100% 确定在应用程序中放置用户和传递是否安全。任何建议或样品将非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:47:16.317

根据您将如何使用图像，最好的办法可能是创建一个为您提供图像和相应 URL 的 Web 服务。这将提供一种解决方案，允许您的客户的用户获取图像，而无需了解任何有关 FTP 的信息，并且只显示给定目录的图像。该设置将允许您根据您的响应加载图像，并根据需要使用它们。这是一小部分示例代码，用于在 tableview 单元格中异步加载图像。

```
// load thumbnail images off main thread
    dispatch_async( dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
        // backgroung processing
        UIImage *thumbnail = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"yourURL"]]];

        dispatch_async( dispatch_get_main_queue(), ^{
            // background processing complete
            [[(TableCell *) cell image] setImage:thumbnail];
            [[cell activityIndicator] stopAnimating];

            // if row selected before image loaded 
            if ([indexPath row] == [[tableView indexPathForSelectedRow] row]) {
                 if (!iPhone) {
                     [myButton setBackgroundImage:thumbnail forState:UIControlStateNormal];
                 }
             }
        });
    }); 
```

我创建了一个示例 Web 服务项目，可以帮助您构建服务响应，该服务响应在 github 上可用，网址为[https://github.com/propstm/SampleWeatherApp](https://github.com/propstm/SampleWeatherApp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:02:30.263

我建议将一个简单的 PHP 脚本列出图像到与图像相同的 HTML 目录中。然后，您可以根据点击列表脚本的输出，使用简单的 NSURLConnection 调用下载目录中的所有图像。

像[这样的东西。](http://www.laughing-buddha.net/php/dirlist/)

```
<?php

    $directory = "."; // Use your directory here

    // create a handler for the directory
    $handler = opendir($directory);

    // open directory and walk through the filenames
    while ($file = readdir($handler)) {

      // if file isn't this directory or its parent, add it to the results
      if ($file != "." && $file != "..") {
        echo "$file\n";
      }

    }

    // tidy up: close the handler
    closedir($handler);
?> 
```

如果有某种安全措施，您可以使用目录中的 .htaccess 来提供登录屏障，并使用您的 NSURLConnection 提供凭据。

祝你好运。

# javascript - 页面跳转和点击返回

> ID：13809384
> 
> 赞同：0
> 
> 时间：2012-12-10T21:14:36.673
> 
> 标签：javascript, html

我正在尝试插入一个链接，该链接将页面跳转并返回一个选项卡

但我只能让一个或另一个工作什么代码将允许两者？

```
 <a href="#returns" onclick="return show('tab3')">Click Here To View Warranty Details</A> 
```

例如，我正在尝试创建一个链接，在“附带 1 年音频节省保修”下*显示单击此处查看保修详细信息*，然后它将向下滚动到信息和政策部分并打开退货政策选项卡。

[http://www.ebay.com/itm/Kenwood-KDC-BT752HD-1-Din-In-Dash-CD-MP3-USB-HD-Receiver-Bluetooth-8GB-USB-Drive-/300777979602?pt=Car_Audio_In_Dash_Receivers&vxp =mtr&hash=item4607c3bed2](http://www.ebay.com/itm/Kenwood-KDC-BT752HD-1-Din-In-Dash-CD-MP3-USB-HD-Receiver-Bluetooth-8GB-USB-Drive-/300777979602?pt=Car_Audio_In_Dash_Receivers&vxp=mtr&hash=item4607c3bed2)

谢谢

ebay 也不支持 iframe 代码，所以还有其他代码可以使用吗？

# applescript - Applescript（通过 appscript）停止循环处理

> ID：13809385
> 
> 赞同：0
> 
> 时间：2012-12-10T21:14:41.370
> 
> 标签：applescript, rb-appscript, sourceforge-appscript

以下 ruby​​ 代码自动在 VoodooPad 中创建页面，并为每个页面添加元标记。

```
vp = app("VoodooPad.app")
doc = vp.open vpdoc

page_names = [@name]

if self.class.to_s.match('Stake::Stack')
    # Create the release notes page. Only run on parent stack
    notes = "#{@name} Release Notes"
    page_names.push notes
    doc.remove :with_name => notes
    doc.create :new => :page, :with_name => notes, :with_content => self.release_notes
end

# Create the settings page
settings = "#{@name} Settings"
page_names.push settings
doc.remove :with_name => settings
doc.create :new => :page, :with_name => settings, :with_content => self.to_md

page_names.each do |page_name|
    # Add the meta tags to the product page
    page = doc.pages[page_name]
    puts page_name
    page.remove_meta_record :with_key => "description"
    page.remove_meta_record :with_key => "url"
    page.remove_meta_record :with_key => "name"
    page.remove_meta_record :with_key => "image"
    page.remove_meta_record :with_key => "version"
    page.remove_meta_record :with_key => "stacks_version"
    page.add_meta_record :with_value => {'version'          => @version_str}
    page.add_meta_record :with_value => {'stacks_version'   => @stacks_version}
    page.add_meta_record :with_value => {'subtitle'         => @subtitle}
    page.add_meta_record :with_value => {'url'              => @info_url}
    page.add_meta_record :with_value => {'image'            => @basename + '@128.png'}
    page.add_meta_record :with_value => {'name'             => @name}
end 
```

在每个块中，相同的元标记被添加到 3 个页面。但是，标签仅添加到 3 个页面中的 2 个。如果我们以“徽章”的名称为例，这里是我的页面名称。

```
Badges
Badges Release Notes
Badges Settings 
```

无论数组的顺序如何，“徽章”页面总是得到正确标记。但是，对于其他 2 页，首先处理的是。另一个没有。

我想可能是页面名称中的空格。不过，这没关系。我得到同样的行为。如果您注意到代码也会正确地动态创建这两个页面。

我也尝试过添加睡眠，认为这可能是一个时间问题。没有。

我被困住了。帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T03:44:17.873

我想到了。我添加标签的页面不能是当前活动页面。

```
vp = app("VoodooPad.app")
doc = vp.open vpdoc

page_names = Array.new

if self.class.to_s.match('Stake::Stack')
    # Only the parent stack has a main page
    page_names.push @name

    # Create the release notes page. Only run on parent stack
    notes = "#{@name} Release Notes"
    page_names.push notes
    doc.remove :with_name => notes
    doc.create :new => :page, :with_name => notes, :with_content => self.release_notes
end

# Create the settings page
settings = "#{@name} Settings"
page_names.push settings
doc.remove :with_name => settings
doc.create :new => :page, :with_name => settings, :with_content => self.to_md

# Have to open to different page to ensure its not open when I add meta tags.
doc.open_page :with_name => 'index'

page_names.each do |page_name|
    # Add the meta tags to the product page
    page = doc.pages[page_name]
    puts page_name
    page.remove_meta_record :with_key => "description"
    page.remove_meta_record :with_key => "url"
    page.remove_meta_record :with_key => "name"
    page.remove_meta_record :with_key => "image"
    page.remove_meta_record :with_key => "version"
    page.remove_meta_record :with_key => "stacks_version"
    page.add_meta_record :with_value => {'version'          => @version_str}
    page.add_meta_record :with_value => {'stacks_version'   => @stacks_version}
    page.add_meta_record :with_value => {'subtitle'         => @subtitle}
    page.add_meta_record :with_value => {'url'              => @info_url}
    page.add_meta_record :with_value => {'image'            => "#{@basename}@128.png".downcase}
    page.add_meta_record :with_value => {'name'             => @name}
    # Open current page to ensure next page is not open or else cannot add tags
    doc.open_page :with_name => page_name
end 
```

# java - 二维表第一个字符

> ID：13809386
> 
> 赞同：2
> 
> 时间：2012-12-10T21:14:47.690
> 
> 标签：java, multidimensional-array

我有

```
String table[][]= new String [i][j];
Scanner insertN = new Scanner(System.in);
int N= insertN.nextInt ();

table[i][j]="-----";
int number1=1;
int number2=2; 
```

如何从 first 到 n char ("-") 并将其替换为 number(1)

如果第一个 N 是 2 - 程序写入表 11---。
如果第二个 N 为 2 - 程序写入表 1122-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:26:55.433

```
String table[][] = new String[i][j];
table[i][j] "-----";
Scanner insertN = new Scanner(System.in);
int number1 = 1;
int number2 = 2;

int N = insertN.nextInt();
int total = N;

//build a temporary string containing as many '1's as indicated by n
String tmp = "";
for (int k = 0; k < N; k++) tmp = tmp + number1;

N = insertN.nextInt();
total = total + N;
for (int k = 0; k < N; k++) tmp = tmp + number2;

//replace the original string with the '1's and the substring of table[i][j]
//starting at position n and continuing to the end
table[i][j] = tmp + table[i][j].substring(total, table[i][j].length()); 
```

# php - PHP中的KSS样式指南生成器？

> ID：13809388
> 
> 赞同：5
> 
> 时间：2012-12-10T21:14:48.250
> 
> 标签：php, css, knyle-style-sheet

我喜欢[KSS](http://warpspire.com/kss/)（Knyle 样式表）。我知道用 Ruby 编写的原始[样式指南生成器](https://github.com/kneath/kss) ，并且我已经看到[了 Node](https://github.com/hughsk/kss-node/)和[Rails 引擎](https://github.com/dewski/kss-rails)的端口。

我找不到任何其他实现，但我想知道，
**PHP 中是否有 KSS 样式指南生成器的实现？**

^(（或者，作为旁注，任何其他语言？）)

**编辑**：正如[janiv](https://stackoverflow.com/users/475151/janiv)在评论中提到的，[github 上](https://github.com/kss-php/kss-php)*有*一个 PHP 实现。

# php - 如何在 PHP 中解析这个 JSON？

> ID：13809397
> 
> 赞同：1
> 
> 时间：2012-12-10T21:15:17.187
> 
> 标签：php, json

它存储在 MongoDB 中并传递给我的视图文件`json_decode.`

使用 PHP，如何从内部获取值？

```
"environment" : {
            "_id" : "QU",
            "name" : "QA Unstable",
            "streams" : "unstable",
            "hosts" : [
                    "deployclient1",
                    "deployclient2"
            ]
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T21:17:19.703

使用`$array = json_decode($json_string, TRUE);`. 如果您提供，第二个变量使其成为数组，`TRUE`如果您省略它，则使其成为对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T22:29:06.140

现在要实际回答这个问题，因为您已经知道`json_decode`：

> 使用 PHP，如何从内部获取值？

`json_decode`将 JSON 字符串评估为 PHP 中的对象（默认情况下），这意味着您可以使用基本的动态加入语法来获取您的值，即获取`_id`：

```
$object->environment->_id; 
```

或主机：

```
$object->environment->hosts[0] 
```

这将返回：`deployclient1`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T21:18:15.617

不要忘记将字符串包裹在花括号中......

```
$str = '{"environment" : {
            "_id" : "QU",
            "name" : "QA Unstable",
            "streams" : "unstable",
            "hosts" : [
                    "deployclient1",
                    "deployclient2"
            ]
}}';

print_r(json_decode($str, true)); 
```

# python - 覆盖 setup.cfg 选项以实现默认行为

> ID：13809398
> 
> 赞同：3
> 
> 时间：2012-12-10T21:15:22.430
> 
> 标签：python, py2exe, distutils, setup.py

我有一个 setup.cfg 包含 Linux 安装选项，

```
[install]
prefix=/opt/foo
install-lib=/opt/foo 
```

这对应于该项目在 Linux 下的默认目录布局。

现在同一个项目使用 py2exe 进行 Windows 安装。目前，我正在使用 .bat 文件在运行时将此 setup.cfg 移开，`python setup.py py2exe`以免将 py2exe 与那些设置混淆，我认为这相当于使用默认参数的 distutils/py2exe。

我宁愿调用`python setup.py py2exe`一些额外的参数来覆盖 setup.cfg 中指定的参数，但是使用`--prefix= --install-lib=`给了我

```
[...]
*** copy data files ***
Traceback (most recent call last):
  File "setup.py", line 158, in <module>
    **platformOptions)
  File "C:\Python27\lib\distutils\core.py", line 152, in setup
    dist.run_commands()
  File "C:\Python27\lib\distutils\dist.py", line 953, in run_commands
    self.run_command(cmd)
  File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File "C:\Python27\lib\site-packages\py2exe\build_exe.py", line 243, in run
    self._run()
  File "C:\Python27\lib\site-packages\py2exe\build_exe.py", line 312, in _run
    self.create_binaries(py_files, extensions, dlls)
  File "C:\Python27\lib\site-packages\py2exe\build_exe.py", line 560, in create_binaries
    install_data.ensure_finalized()
  File "C:\Python27\lib\distutils\cmd.py", line 109, in ensure_finalized
    self.finalize_options()
  File "C:\Python27\lib\distutils\command\install_data.py", line 41, in finalize_options
    ('force', 'force'),
  File "C:\Python27\lib\distutils\cmd.py", line 298, in set_undefined_options
    src_cmd_obj.ensure_finalized()
  File "C:\Python27\lib\distutils\cmd.py", line 109, in ensure_finalized
    self.finalize_options()
  File "C:\Python27\lib\distutils\command\install.py", line 353, in finalize_options
    'userbase', 'usersite')
  File "C:\Python27\lib\distutils\command\install.py", line 504, in convert_paths
    setattr(self, attr, convert_path(getattr(self, attr)))
  File "C:\Python27\lib\distutils\util.py", line 199, in convert_path
    raise ValueError, "path '%s' cannot be absolute" % pathname
ValueError: path '/opt/trelby' cannot be absolute 
```

这与根本不尝试覆盖 setup.cfg 参数时的行为相同，因此似乎出了点问题。

如有必要，我也愿意在 setup.py 中设置`distutils.core.setup()`'`options`参数，但主要问题似乎是：设置为什么值，以实现默认的 py2exe 行为？

顺便说一句，代码位于[https://github.com/oskusalerma/trelby](https://github.com/oskusalerma/trelby)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T13:12:33.650

我试图复制您的错误，但无法访问 win*，并且可能使用较新的 distutils。

`ValueError: path '/opt/trelby' cannot be absolute`这很重要，如果出于某种原因必须使用相对路径，请确保使用相对路径。

我没有使用普通的 distutils 得到那个错误。

`python setup.py install --prefix /some/other`如果在 config.cfg 中指定了 install-lib，则不会为我做任何事情

`python setup.py install --install-lib /some/other`确实改变了安装路径。

换句话说，我的设置中的优先级是：

*   install-lib cmd 行 arg
*   setup.fg 中的安装库
*   前缀 cmd 行 arg
*   setup.cfg 中的前缀

请在没有 py2exe 的情况下进行测试。如果您的问题源于 distutils，也许您可​​以升级它们。或者，它可能是 py2exe 吞下命令行参数并且不将这些参数传递给 distutils，也许您可​​以追踪它并提交补丁。

# django - 如何使用 Django 中间件检查用户是否从美国境外登录

> ID：13809403
> 
> 赞同：4
> 
> 时间：2012-12-10T21:15:38.533
> 
> 标签：django

我对 Django 很陌生，想知道如何检查登录到 django 支持的网站的用户是否来自美国以外？

我将如何在中间件中编写一个类来检查相同的内容？我想对退出美国的用户隐藏网站的特定部分。

我知道我没有提供任何细节，而且这个问题可能看起来很模糊......但我需要一个大致的想法才能开始。我还没有开始在网站上工作。

我浏览了 Django Middleware 文档，但仍然不明白该怎么做。用户身份验证[https://docs.djangoproject.com/en/1.4/topics/auth/#limiting-access-to-logged-in-users](https://docs.djangoproject.com/en/1.4/topics/auth/#limiting-access-to-logged-in-users)是否提供任何此类功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T21:28:32.343

您可以使用[django 附带的 GeoIP 模块](https://docs.djangoproject.com/en/dev/ref/contrib/gis/geoip/)。

一个简单的中间件可能看起来像这样：

```
class GeoLocationMiddleware:
    def process_request(self, request):
        if 'geoip_check' not in request.session:
            g = GeoIP()
            country = g.country(request.META.get('REMOTE_ADDR'))
            do_something(country) #Do something with country result.
            request.session['geoip_check'] = True #Could store country result

        return None 
```

您会注意到我在会话中添加了一个标志。在每个请求上检查 GeoIP 是不必要的，而且对性能不利，因此我们每个会话只检查一次。希望这就是你要找的。

编辑：如果您只想为登录用户执行此操作，请将其放入：

```
if request.user.is_authenticated(): 
```

一开始。

# c++ - 简单的 C++ 加密 - 解密库？

> ID：13809404
> 
> 赞同：9
> 
> 时间：2012-12-10T21:15:44.227
> 
> 标签：c++, encryption

> **可能重复：**
> [C/C++ 中最好的加密库是什么？](https://stackoverflow.com/questions/180870/what-is-the-best-encryption-library-in-c-c)

在windows上寻找一个c++中的即插即用加密解密库，使用非常简单，加密在编辑框中输入的用户名和密码并将它们保存在注册表中，在下次运行时从注册表中检索它们解密并填充相应的编辑控制。尝试谷歌搜索和阅读一些文章，但找不到没有问题且简单可靠的干净文章。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T21:19:28.180

[Keyczar](http://code.google.com/p/keyczar/)，一路走来。这是进行加密的最简单方法 The Right Way。

> Keyczar 是一个开源密码工具包，旨在让开发人员更轻松、更安全地在其应用程序中使用密码学。Keyczar 支持使用对称和非对称密钥进行身份验证和加密。

它就像您想象的那样“即插即用”。查看[C++ 教程了解更多信息](http://code.google.com/p/keyczar/wiki/CppTutorial)。

# unix - 了解 epoch 时间以计算 unix 中的密码老化

> ID：13809408
> 
> 赞同：0
> 
> 时间：2012-12-10T21:15:56.220
> 
> 标签：unix, unix-timestamp, epoch

```
my_current_epoch=15684 equivalent time stamp is  Thu, 01 Jan 1970 04:21:24
last_password_reset_epoch_time=15547 equivalent time stamp is Thu, 01 Jan 1970 04:19:07 
```

我无法理解这两者的差异将如何给出自上次密码重置以来的天数。

根据我的理解，纪元时间以自 1970 年 1 月 1 日以来经过的秒数表示

有人可以帮我理解这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:14:07.763

`man 5 shadow`在 Linux 机器上 说：

> 上次更改密码的日期为自 1970 年 1 月 1 日以来的天数。密码在经过适当的天数之前不得再次更改，并且必须在最大天数后更改。如果所需的最小天数大于允许的最大天数，则用户不得更改此密码。

因此，您可以在 24 小时内通过将该值乘以`/etc/shadow`86400（一天中的秒数 - 但您不需要我告诉您，是吗？）来找出密码更改的时间。

对于给定的值（`bc`救援）：

*   `15684*86400 = 1355097600`
*   `15547*86400 = 1343260800`

和：

```
$ timestamp -u 1355097600 1343260800
1355097600 = Mon Dec 10 00:00:00 2012
1343260800 = Thu Jul 26 00:00:00 2012
$ 
```

时间戳是我的程序；现代版本的`date`也可以处理这个问题。意思是“`-u`以 UTC（又名 GMT）报告”，而不是在我的时区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-06T13:39:54.950

> "epoch" 值 in `/etc/shadow`= 15684
> 
> 24 小时内的秒数（因为通常 "epoch" 值以秒为单位显示，但出于某种原因（可能是为了制作紧凑视图）在`/etc/shadow`文件中 "epoch" 值以天显示，而不是*秒*） = 24 * 60 * 60 = 86400

通过将这两个数字相乘：15684（*天*）x 86400（*每天秒数*）；我们将得到号码 1355097600。

之后，或者使用[Epoch Converter](https://www.epochconverter.com/)通过复制/粘贴最终结果，您可以获得日期，
*或者*
只是`date --date @$(( 15684 * 86400 ))`在 cli 中使用命令

# ios6 - iOS-6——如何实现有条件的自转？

> ID：13809409
> 
> 赞同：1
> 
> 时间：2012-12-10T21:16:17.613
> 
> 标签：ios6, autorotate

在过去的三天里，我一直在试图找出 iOS-6 自动旋转的混乱，但还没有找到解决方案。

*拥有一个所有*视图都旋转或完全禁用旋转的应用程序相对简单。并且（方便地满足我们的需要）如果您使用 MPMoviePlayerViewController，即使应用程序禁用了自动旋转，它也会自动旋转。

但是*有条件*的自动旋转，其中一些视图被允许旋转，而另一些则不允许，是难以捉摸的。我可以实现有条件的自动旋转（通过让根视图控制器“咨询”顶视图控制器以确定它允许的旋转），但是当旋转的视图退出时，它会使先前的视图旋转（以前没有旋转）。这是不可接受的。

有没有人破解过这个坚果？

（就像我告诉我的老板，如果你想要更宽的视野，你应该在打印机里放更宽的纸。）

**进一步的问题：** 在基本的条件旋转开始工作后（见下面的评论），我发现它在“正确错误”的情况下会占用一些屏幕。在这个不可旋转的屏幕上，我按“介绍”转到可旋转的屏幕。

![在此处输入图像描述](../Images/5ea612684120133462fd61a39dde37e8.png)

在可旋转的屏幕上，我旋转它，然后旋转它从它返回。当我回来时，我有这个屏幕：

![在此处输入图像描述](../Images/309fcaac25b3cecae32adb6b711fd757.png)

XIB 文件非常普通：

![在此处输入图像描述](../Images/e0d49f08e1781caee77c47dc130fbcad.png)

错误的部分似乎是“图像视图 - img_hea ...”元素，由于某种原因，它垂直“放大”了大约 4 倍。视图中没有逻辑移动/调整元素大小（除了标准 UITableView 的东西），并且根本没有提到问题 UIImageView。

在 viewWillAppear 中放置 NSLog 后，我看到 UIImageView 的尺寸最初为 320x44，但从旋转的屏幕返回时为 320x160。

这看起来像一个彻头彻尾的苹果错误。

**更多：** 如果我使问题屏幕可旋转并向右/向左旋转（回到纵向），图像就会被搞砸。我猜iOS在旋转回来之前会“返回”到屏幕，这就是它被搞砸的原因。有趣的是，在旋转视图中，UIImageView 根本没有出现，Y 维度在 NSLog 中为零。

此外，现在我注意到了，叠加在问题图像上的标签在旋转视图和旋转后视图中都完全消失了。

**OK：**关闭了整个 UIVIew 的“Autoresize Subviews”，这样就可以正常工作了。这是我第二次发现“Autoresize Subviews”XIB 属性会导致不稳定的行为。

# c++ - 我将如何重用代码来读取/写入多个类的文件？

> ID：13809413
> 
> 赞同：-2
> 
> 时间：2012-12-10T21:16:48.957
> 
> 标签：c++, oop, software-design

我有几个类是我从文件读取/写入文件的各种数据的容器。通常文件每行有一个实体（逗号分隔的字段），但有时一个实体分散在几行中。

我正在尝试提出一种正确的方法来重用代码读取和写入文件。我可以在每个处理 fstream、所有检查和字符串格式的类中使用单独的 Read() 和 Write() 函数，但我觉得应该有更好的方法来重用一些代码。

编辑：

我意识到我对我的问题不够具体。阻止我按照某些答案/评论建议的方式实施它的原因是我有多行实体。所以，我不能只将从文件中读取的一行传递给一个类来解析它。有时我需要通过几行。

当一个实体是多行时，通常它在行首有一个 id 字段，所以重复 id 意味着我需要读取几行。

例如，一个文件可以是一个多边形，然后每行有两个坐标，这种情况很简单。但是另一个文件可以是一组多边形，然后它会有一个多边形 id 加上每行中的两个坐标。像那样：

```
id, x, y
0, 1, 2
0, 5, 0
0, -1, -1
1, 4, 4
1, 0, 8
1, -4, 4
1, 0, 0 
```

编辑2：

当我在第一次编辑中描述我的问题时，我意识到如何处理我的多行实体。我仍然可以将读取的行一一传递给每个类，并使其填充未完成的实体。现在这对我来说似乎很明显，因为只要我尝试向其他人解释，问题就会变得清晰。感谢您的意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:27:22.843

如果各种容器的数据足够相似，您应该能够为文件 IO 创建一个类。将您要写入/填充的对象类型传递给它。

让每个类实现一个定义了两个方法的接口；一个接受当前行或字符串数​​组（在行被拆分之后）并设置所有对象值，另一个返回一个字符串，其中所有数据作为逗号分隔的字符串（这是用于写入）。多线情况将更难处理，可能值得将其视为特殊情况。

文件 IO 类应该只打开/关闭、读/写、用逗号分隔行以及调用它传递的对象的方法。文件 IO 类应该被传递接口类型的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T21:53:46.813

我记得读过 Stroustrup 的一本书，他推荐了一些类似于将单独的功能隔离到单独的类中的东西。然后，您可以使用多重继承将两者组合为一个类。因此，与其构建一个解决当前问题的大类，不如构建更易于重用以解决未来问题的单独部分。本质上总是寻求构建类，以便将来可以重用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T21:33:24.670

`operator<<`你可以为 ostream重载

# nhibernate - IIS 查看 MVC 配置文件的错误路径

> ID：13809414
> 
> 赞同：0
> 
> 时间：2012-12-10T21:16:56.260
> 
> 标签：nhibernate, iis, config, andromda

当我使用 Visual Studio Development Server 运行 MVC4 我的应用程序时，我的应用程序能够正确加载所有配置文件。但是当我尝试在本地 IIS Web 服务器下运行它时，它会抛出这个错误

```
{"Could not find a part of the path 'C:\\Windows\\SysWOW64\\inetsrv\\~\\nhibernate.config'."} 
```

它正在查看错误的文件夹。配置文件直接位于我的 Web 项目的根目录中。为什么会这样。我该如何解决。我很确定 nhibernate 会查找此文件以加载它的属性。除非您知道**如何**将 nhibernate 配置文件移动到 web.config 文件中，否则请不要建议这样做，当我复制它时，我会得到一个“无法识别的配置部分 hibernate-configuration”

编辑：顺便说一句，我很确定它正在查看 appSettings 我的应用设置部分中的以下键

```
<add key="nhibernate.config" value="~/nhibernate.config" /> 
```

Edit2：这是 Nhibernate 如何获取此值并尝试查找配置文件的堆栈跟踪

```
at NHibernate.Cfg.ConfigurationSchema.HibernateConfiguration..ctor(XmlReader hbConfigurationReader, Boolean fromAppSetting)
at NHibernate.Cfg.ConfigurationSchema.HibernateConfiguration..ctor(XmlReader hbConfigurationReader)
at NHibernate.Cfg.Configuration.Configure(XmlReader textReader)
at NHibernate.Cfg.Configuration.Configure(String fileName, Boolean ignoreSessionFactoryConfig)
at NHibernate.Cfg.Configuration.Configure(String fileName)
at AndroMDA.NHibernateSupport.DefaultSessionManager.BuildSessionFactory() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:24:24.983

所以实际上并不是 NHibernate 使用了这个文件。我的老板决定使用一种叫做 AndroMDA 的东西来生成代码，而那一代的一部分是一些我看不到的 NHibernate 支持。

如果有人感兴趣，我创建了一个新的 ISessionManager 实现，除了以下成员函数和变量外，它看起来与 DefaultSessionManager 完全相同。

```
public class ServerMapSessionManager : ISessionManager
{
    //other interface implementation...//
    public static HttpServerUtility Server { get; set; }
    public String TranslateConfigPath(String virtualPath)
    {
        return Server.MapPath("/"+virtualPath);
    }
} 
```

然后在 App_start 我调用以下

```
 SessionManagerFactory.SessionManager = new MVCFramework.Core.Common.ServerMapSessionManager();
        MVCFramework.Core.Common.ServerMapSessionManager.Server = Server; 
```

# tfs - TFS 实验室管理部署脚本

> ID：13809416
> 
> 赞同：2
> 
> 时间：2012-12-10T21:17:04.990
> 
> 标签：tfs

我正在尝试使用 Build-Deploy-Test 工作流程使用 TFS 2012 设置标准实验室环境。我设置了测试控制器和测试代理，但是当 LabManagement 工作流开始执行时，我在 RunDeploymentTask 活动中遇到异常

```
Initial Property Values
BuildLocation = \\S0503TFS2T\TFSPlayground\ConsoleApplicationBuild\ConsoleApplicationBuild_20121210.23
DeploymentScriptDetails = agent1 | "$(BuildLocation)\Deploy.bat" $(BuildLocation) | c:\Env
LabEnvironmentUri = vstfs:///LabManagement/LabEnvironment/4
MaxWaitTime = 00:30:00
ThrowOnError = True
UseRoleForDeployment = True
Deployment Task Logs for Machine: win7testagent1
 Access is denied
 Exception Message: Team Foundation Server could not complete the deployment task for machine 'win7testagent1', script '"\\S0503TFS2T\TFSPlayground\ConsoleApplicationBuild\ConsoleApplicationBuild_20121210.23\Deploy.bat"', arguments '\\S0503TFS2T\TFSPlayground\ConsoleApplicationBuild\ConsoleApplicationBuild_20121210.23' and working directory 'c:\Env'. (type LabDeploymentProcessException)
Exception Stack Trace: 
Server stack trace: 
   at Microsoft.TeamFoundation.Lab.Workflow.Activities.RunDeploymentTask.ExecuteDeploymentTask.RunCommand(AsyncState state)
   at System.Runtime.Remoting.Messaging.StackBuilderSink._PrivateProcessMessage(IntPtr md, Object[] args, Object server, Object[]& outArgs)
   at System.Runtime.Remoting.Messaging.StackBuilderSink.AsyncProcessMessage(IMessage msg, IMessageSink replySink)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.EndInvokeHelper(Message reqMsg, Boolean bProxyCase)
   at System.Runtime.Remoting.Proxies.RemotingProxy.Invoke(Object NotUsed, MessageData& msgData)
   at System.Action`1.EndInvoke(IAsyncResult result)
   at Microsoft.TeamFoundation.Lab.Workflow.Activities.RunDeploymentTask.ExecuteDeploymentTask.EndExecute(AsyncCodeActivityContext context, IAsyncResult result)
   at System.Activities.AsyncCodeActivity.CompleteAsyncCodeActivityData.CompleteAsyncCodeActivityWorkItem.Execute(ActivityExecutor executor, BookmarkManager bookmarkManager) 
```

显然，这是安全问题，我无法克服这是 MSDN 解释此过程的方式：

**build-deploy-test 工作流启动构建，然后获取部署脚本。构建定义将构建文件复制到放置位置。工作流在脚本分配到的特定机器或机器角色的工作目录中运行每个部署脚本。每个部署脚本都从放置位置检索构建文件。每个部署脚本都将指定的构建文件复制或安装到实验室环境中的机器上。**

此时问题出现了——**工作流在特定机器的工作目录中运行每个部署脚本。**

两台机器都在同一个域中，运行构建服务的用户也在远程机器的管理员组中。我什至与网络中的每个人共享了工作流应该复制文件/脚本的远程文件夹，但再次没有运气。

我正在做一些让我发疯的愚蠢事情 - 非常感谢任何帮助或想法！

最好的，雷达

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T05:35:54.757

以下解决方案可能会解决您的问题。

步骤：在以下服务器上创建本地账号：local lab service account - tfslab

1.  tfs 测试控制器服务器：创建本地 tfslab 帐户。还在测试控制器配置控制台中将 tfslab 配置为实验室服务帐户

2.  tfs 测试代理服务器：创建本地 tfslab 帐户并将 tfslab 添加到本地管理员组。还要更新 Visual Studio 测试代理服务和 Visual Studio 实验室代理服务以作为 tfslab 运行。

3.  tfs 放置文件夹服务器：创建本地 tfslab 帐户。并将共享读取权限添加到 tfs drop 文件夹。

详细讨论见[这里](https://stackoverflow.com/questions/16542441/tfs2012-labdefault-11-template-deploy-scripts-fail-with-team-foundation-server/17779190#17779190)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T13:02:44.770

You may try to check %ErrorLevel% at the last of your bat script. I met the same error, and it turned out that that error was caused by exit code of robocopy, which returns 1 when the copy successes. I set the error code to 0, the issue was fixed.

# jquery - 如何将 Jquery 甘特图的滚动设置为今天的日期

> ID：13809418
> 
> 赞同：0
> 
> 时间：2012-12-10T21:17:12.510
> 
> 标签：jquery, charts, gantt-chart

我正在使用[jQuery 甘特图](http://taitems.github.com/jQuery.Gantt/)。我想将默认滚动设置为今天的日期。目前，它采用所有记录中最少的开始日期，并从那里开始。相反，它应该是今天的日期。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:21:27.490

就在文档中：设置`scrollToToday`为`true`.

```
$(".selector").gantt({
   ....
   'scrollToToday': true
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T06:48:06.300

有关错误和代码修复，请参阅此处 [https://github.com/taitems/jQuery.Gantt/issues/52](https://github.com/taitems/jQuery.Gantt/issues/52)

# html - 将 div 平铺在包装 div 内，而不是让它们出现在外面

> ID：13809419
> 
> 赞同：4
> 
> 时间：2012-12-10T21:17:16.830
> 
> 标签：html, css

我正在尝试在包装 div 元素内放置一系列瓷砖。目前，它们出现在包装 div 内部，然后溢出到 div 外部，而不是水平包装并显示为瓷砖。这是一个[JSFiddle 示例](http://jsfiddle.net/cgMGM/)。

举个例子来说明它们的外观，看看 Windows Metro 界面，其中磁贴环绕到一个新列： ![在此处输入图像描述](../Images/7f3192d06eb526d4a68c38e93045df18.png) 这是 CSS：

```
body {
    margin-top: 50px;
    background: #238d9a;
}

#metro {
    width: 960px;
    height: 340px;
    background: #004050;
    margin: 0 auto;
    padding: 10px;
}

.tile {
    width: 100px;
    height: 100px;
    background: white;
    margin: 0px 10px 10px 0px;
}​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T21:21:45.683

您只需要添加

```
display:inline-block; 
```

到你的瓷砖。我在这里更新了jsfiddle：

[http://jsfiddle.net/cgMGM/1/](http://jsfiddle.net/cgMGM/1/)

另一种方法是添加`float:left;`，但在这种情况下首选 inline-block 以防止#metro div 失去高度并防止需要额外的 .clear-fix 废话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-18T10:11:43.687

你可以简单地使用

```
.tile{
      word-wrap: break-word;
      } 
```

现在你可以在你的 div 中使用这个类

# ruby - Ruby IMAP Net::IMAP::DataFormatError: nil when not using date

> ID：13809426
> 
> 赞同：2
> 
> 时间：2012-12-10T21:18:00.030
> 
> 标签：ruby, gmail, imap, rubymine

设置：使用 RubyMine 4.5 和 Ruby 1.9.3

以下是我在一种搜索我的电子邮件的方法中拥有的完整代码，其中有一个变量是正在传入的电子邮件地址，没有任何问题。

我在调试期间收到的错误是 Net::IMAP::DataFormatError: nil on line`messagebody = imap.fetch(imapindex.first,"BODY[TEXT]")`但是当我在 irb 中使用相同的行时它工作正常。

```
 imap = Net::IMAP.new('imap.gmail.com', 993, true)
    imap.login('someemailaddress@gmail.com','somerandommailpass')
    imap.select('INBOX')
    Log.info emailaddress
    imapindex = imap.search(["TO", emailaddress])
    messagebody = imap.fetch(imapindex.first,"BODY[TEXT]")
    imap.store(imapindex, "+FLAGS", [:Deleted])
    imap.logout
    imap.disconnect
    Log.info messagebody
    return messagebody 
```

任何煽动都会有所帮助

谢谢

# android - 在 Android 中引用外部项目

> ID：13809430
> 
> 赞同：0
> 
> 时间：2012-12-10T21:18:27.127
> 
> 标签：android, jar, apk

我正在尝试编写一个模块化的可扩展应用程序来部署在 Android 中。这个想法是提供一个 API 来允许为应用程序创建自定义功能，其中可能包括自定义布局和其他资源。此自定义功能将在运行时从另一个位置（例如 SD 卡）加载。

目前，我可以从该位置加载 .jar 文件并根据需要使用它们，不幸的是，我只能包含对“主”项目中也存在的布局和资源的引用。

我一直无法找到引用整个图书馆项目（包括资源）的好方法。我本质上希望每个自定义部分都包含它显示和运行自身所需的所有资源。

现在，我正在考虑包含一个“资产”项目，每个模块都可以引用该项目作为存储布局和其他资源的中心区域。不幸的是，这将要求我有一个必须由需要构建的任何其他项目加载的项目。

另一个想法是将布局、图像和字符串以及 jar 文件包含在一个文件夹中，并在运行时加载它们。我认为这不会很好，因为布局似乎在编译时以某种方式进行了预处理，并且不能在运行时膨胀。

有谁知道我可以将所有资源和代码包含在一个可动态加载的文件中，然后我可以在运行时访问该文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:16:04.873

> 有谁知道我可以将所有资源和代码包含在一个可动态加载的文件中，然后我可以在运行时访问该文件？

这是不支持的。它很可能永远不会被支持，尽管它可能与正在开发的新构建系统一起工作。

# php - facebook 访问令牌在 3-4 次刷新后过期？

> ID：13809431
> 
> 赞同：1
> 
> 时间：2012-12-10T21:18:36.003
> 
> 标签：php, facebook

facebook api OAuth有问题...

OAuthException：必须使用活动访问令牌来查询有关当前 user.loggain 的信息

问题是它第一次运行完美，但在 3 次尝试后它给了我错误......

用户可以从商店免费借用一个工具，用户最多可以借用 4 个工具.. 每次用户完成这些步骤后，我刷新页面并在 3-4 次刷新后出现错误

```
<?php
header('P3P: CP="CURa ADMa DEVa PSAo PSDo OUR BUS UNI PUR INT DEM STA PRE COM NAV OTC NOI DSP COR"');
require 'php/facebook.php';
require 'php/faceconf.php';
$facebookoklog = "";
$facebookoklog1 = "";
$facebookok = "";
$facebook = new Facebook(array(
    'appId'     =>  $appID,
    'secret'    => $appSecret,
    ));
$user = $facebook->getUser();
if(empty($user)){
global $facebookok;
$facebookok = "getill";
}
elseif($user){
try{
    //get the facebook user profile data
    $user_profile = $facebook->api('/me');
    $_SESSION['User']=$user_profile;
}catch(FacebookApiException $e){
    global $facebookoklog;
    global $facebookoklog1;
    $facebookoklog = "loggain";
    $facebookoklog1 =$e;
}       
}
if($facebookoklog=="loggain" || $facebookok=="getill"){ //do this}
else{//dothis} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:15:21.653

普通访问令牌在 2 小时后过期，扩展令牌有效期为 2 个月。

通过这个来获得扩展令牌。完美工作：

[自offline_access弃用以来如何延长访问令牌的有效性](https://stackoverflow.com/questions/8982025/how-to-extend-access-token-validity-since-offline-access-deprecation/9035036#9035036)

（您可以使用[Facebook 的调试工具](https://developers.facebook.com/tools/debug)来检查您的访问令牌的有效性。）

# java - 什么课 在Java中是什么意思？

> ID：13809432
> 
> 赞同：4
> 
> 时间：2012-12-10T21:18:44.133
> 
> 标签：java, generics, class-template

> **可能重复：**
> [java中的 <TYPE> 是什么意思？](https://stackoverflow.com/questions/12649572/what-does-the-type-in-java-mean)

您好，我在调试时遇到了这个类，请有人给我指点它的含义。谢谢。

```
class Something<P>{
 private P someVariable;
}

//what does <P> mean here? 
```

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T21:20:24.937

这是一个通用的。它允许您编写适用于不同类型的代码。

试试这个教程：

[http://docs.oracle.com/javase/tutorial/java/generics/](http://docs.oracle.com/javase/tutorial/java/generics/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T21:19:44.213

这是一个类模板的例子（尽管它在运行时被删除）。通常是类而不是类

. 它允许您在编译时将类型注入到类中。

例如，如果你做了

```
new Something<String>(); 
```

那么 someVariable 将是 String 类型。

如果你打电话

```
new Something(); 
```

那么我相信 someVariable 将是 Object 类型，因为它没有推断的类型信息。通常你的 IDE 会给你一个警告。

[这里](http://en.wikipedia.org/wiki/Generics_in_Java#Generic_class_definitions)也有描述。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-10T21:21:19.087

这意味着它是一个通用类。通过更改代码创建泛型类型声明

```
 "public class Box" to "public class Box<T>" 
```

有关更多信息，您可以查看此参考： [http ://docs.oracle.com/javase/tutorial/java/generics/types.html](http://docs.oracle.com/javase/tutorial/java/generics/types.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-10T21:22:13.530

`P`是用于泛型的类型。

通常它是`T`, 或`TEntity`, 用于类型或实体类型。

只需`ArrayList<string>`将类型视为`string`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-10T21:23:09.400

```
这是一个通用类定义。

<P> 是在编译时被替换的对象的占位符。
```

# ruby-on-rails - 如何创建 Rails 下拉过滤器

> ID：13809438
> 
> 赞同：1
> 
> 时间：2012-12-10T21:19:12.027
> 
> 标签：ruby-on-rails, dropdownbox

我正在尝试在 Rails 3.2 中创建一个下拉过滤器。

我已经看到了这些方面的解决方案，但不确定如何在我的情况下实施它们。 [从下拉列表中过滤索引页面上的结果](https://stackoverflow.com/questions/4846383/filter-results-on-index-page-from-dropdown)。

我有一个表格，`events`我想要一个下拉框来过滤这些事件`category`。通过使用参数在视图中执行以下操作，我已经完成了一半：

```
<% @event.events_by_category(sanitize_output(params[:cat])).each do |e| %>
  ...
<% end %> 
```

然后在模型中使用以下内容`event`：

```
def self.events_by_category(cat)
  if cat == nil
    all
  else
    where("category = ?", cat)
  end
end 
```

但是，创建一个下拉列表来刷新 URL 以在 jQuery 中包含参数似乎很脏。

在 Rails 中完成这种下拉菜单的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:01:26.393

我找到了一个不错的解决方案，只需对选择框使用表单标签，如下所示：

```
<%= form_tag events_path, method: 'get' do %>
  <%= select_tag :cat, Options::TYPE %>
  <%= submit_tag 'Filter %>
<% end %> 
```

# java - @JsonTypeInfo(use = JsonTypeInfo.Id.CLASS) 在返回响应时不起作用

> ID：13809444
> 
> 赞同：9
> 
> 时间：2012-12-10T21:19:05.227
> 
> 标签：java, json, rest, jersey, jackson

我正在使用 Jersey 编写 REST 服务。我有一个带有注释的抽象类 Promotion：

```
@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS) 
```

多亏了这一点，当我返回对象列表时：

```
@GET
@Produces(MediaType.APPLICATION_JSON)
@Path("promotions/")
public List<Promotion> getClosestPromotions() {
List<Promotion> promotions = getPromotions(); //here I get some objects

return promotions;
} 
```

我为该列表中的每个对象得到一个带有“@class”字段的 Json 字符串。但问题是，如果我返回一个响应：

```
@GET
@Produces(MediaType.APPLICATION_JSON)
@Path("promotions/")
public Response getClosestPromotions() {
List<Promotion> promotions = getPromotions(); //here I get some objects

return Response.ok().entity(promotions).build();
} 
```

我得到了几乎相同的列表，但没有额外的“@class”字段。为什么会这样，我该怎么做才能得到一个带有“@class”字段的列表，在响应中返回一个列表？顺便说一句，令人惊讶的是，当我返回一个仅作为实体给出的 Promotion 对象的 Response 并且我得到那个“@class”字段时，它就起作用了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T15:36:48.433

也许您想尝试：

```
GenericEntity<Collection<Promotion>> genericEntity = 
           new GenericEntity<Collection<Promotion>>(promotions){};
return Response.ok().entity(genericEntity).build(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T18:10:00.330

尝试添加子类型注释，这是我正在使用的示例。这可以通过指定所有可操作的子类型来解决您的问题。抱歉没有测试你的确切例子。

```
@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, include = JsonTypeInfo.As.PROPERTY, property = "@class")
@JsonSubTypes({
    @JsonSubTypes.Type(value=MetricCollection.class),
    @JsonSubTypes.Type(value=Column.class),
    @JsonSubTypes.Type(value=IntegerColumn.class),
    @JsonSubTypes.Type(value=DoubleColumn.class),
    @JsonSubTypes.Type(value=StringColumn.class)
})
public interface IMetricCollection<T extends IMetric> {
...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T09:47:37.850

如果您使用 JAXB 来生成您的类，您当然可以使用具有不同类型的 @XmlElements 之类的东西来解析列表。

现在，如果您还使用与 Jersey/Jackson 相同的 JAXB 类，您可以通过添加 @JsonTypeInfo 和 @JsonSubTypes 来描述如何格式化对象列表/数组的名称来增强类的元数据。

@JsonTypeInfo 描述了要添加的类型，@JsonSubTypes 提供了封闭集合的选项。例如，As.PROPERTY 定义输出的属性，如下例所示，其中可以具有不同类型元素的实体列表，包括类型本身（“Form”）以及其他 2 种类型“字段”和“表”。

```
public class Form {

  @XmlElements({
    @XmlElement(name = "field", type = Field.class),
    @XmlElement(name = "form", type = Form.class),
    @XmlElement(name = "table", type = Table.class)
  })
  @JsonTypeInfo(use = Id.NAME, include = As.PROPERTY, property = "obj")
  @JsonSubTypes({
    @JsonSubTypes.Type(value = Field.class),
    @JsonSubTypes.Type(value = Form.class),
    @JsonSubTypes.Type(value = Table.class)
  })
  @Generated(value = "com.sun.tools.internal.xjc.Driver", date = "2013-11-11T02:08:36-08:00", comments = "JAXB RI v2.2.4-2")
  @JsonProperty("entities")
  protected List<Object> fieldOrFormOrTable; 
```

使用带有添加元数据的 Jersey 的 Jackson 默认序列化程序对对象进行序列化将如下...

```
 "entities": [
                  {
                    "obj": "Table",
                    "row": {
                        "id": 1,
                        "fields": [
                            {
                                "id": "DEBUGARY",
                                "type": "Text",
                                "kind": "user"
                            }
                        ]
                    },
                    "id": "DBGARRAY"
                },
                {
                    "obj": "field",
                    "id": "IDBG",
                    "type": "Text",
                    "kind": "user"
                },
        ..., ..., ...] 
```

# android - 如何在 Android 上降低字节格式的图像质量？

> ID：13809445
> 
> 赞同：2
> 
> 时间：2012-12-10T21:19:39.157
> 
> 标签：android, image, upload, compression

使用来自 StackOverflow 和其他有用网站的资源，我成功地创建了一个应用程序，该应用程序可以上传由 Android 手机上的相机应用程序拍摄的图像。唯一的问题是，我现在的手机拍的照片质量很高，导致上传的等待时间很长。

我阅读了有关将图像从 jpeg 转换为较低速率（较小尺寸或仅适用于 web 的尺寸）的信息，但我现在使用的代码将捕获的图像保存为一个字节（参见下面的代码）。有什么方法可以降低图像格式的质量，还是我需要找到一种方法将其转换回 jpeg，降低图像质量，然后以字节形式放回？

这是我正在使用的代码片段：

```
 if (Intent.ACTION_SEND.equals(action)) {

        if (extras.containsKey(Intent.EXTRA_STREAM)) {
            try {

                // Get resource path from intent callee
                Uri uri = (Uri) extras.getParcelable(Intent.EXTRA_STREAM);

                // Query gallery for camera picture via
                // Android ContentResolver interface
                ContentResolver cr = getContentResolver();
                InputStream is = cr.openInputStream(uri);
                // Get binary bytes for encode
                byte[] data = getBytesFromFile(is);

                // base 64 encode for text transmission (HTTP)
                int flags = 1;
                byte[] encoded_data = Base64.encode(data, flags);
                // byte[] encoded_data = Base64.encodeBase64(data);
                String image_str = new String(encoded_data); // convert to
                                                                // string

                ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

                nameValuePairs.add(new BasicNameValuePair("image",
                        image_str));

                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(
                        "http://xxxxx.php");
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpResponse response = httpclient.execute(httppost);
                String the_string_response = convertResponseToString(response);
                Toast.makeText(UploadImage.this,
                        "Response " + the_string_response,
                        Toast.LENGTH_LONG).show();
            } catch (Exception e) {
                Toast.makeText(UploadImage.this, "ERROR " + e.getMessage(),
                        Toast.LENGTH_LONG).show();
                System.out.println("Error in http connection "
                        + e.toString());
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T21:48:53.327

对于网络应用程序，您绝对不需要相机产生的 5+ MP 图像；图像分辨率是图像大小的主要因素，因此我建议您使用 BitmapFactory 类来生成下采样位图。

特别是，查看 BitmapFactory.decodeByteArray()，并将 BitmapFactory.Options 参数传递给它，指示您想要一个下采样的位图。

```
// your bitmap data
byte[] rawBytes = .......... ;

// downsample factor
options.inSampleSize = 4;  // downsample factor (16 pixels -> 1 pixel)

// Decode bitmap with inSampleSize set
return BitmapFactory.decodeByteArray(rawBytes, 0, rawBytes.length, options); 
```

有关更多信息，请查看有关高效显示位图的 Android 培训课程以及 BitmapFactory 的参考：

[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

[http://developer.android.com/reference/android/graphics/BitmapFactory.html](http://developer.android.com/reference/android/graphics/BitmapFactory.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T11:21:23.723

要告诉解码器对图像进行二次采样，将较小的版本加载到内存中，请在 BitmapFactory.Options 对象中将 inSampleSize 设置为 true。例如，分辨率为 2048x1536 的图像使用 inSampleSize 为 4 进行解码会生成大约 512x384 的位图。将其加载到内存中使用 0.75MB 而不是 12MB 的完整图像（假设位图配置为 ARGB_8888）。看到这个

[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

```
public   Bitmap decodeSampledBitmapFromResource(
  String pathName) {
int reqWidth,reqHeight;
reqWidth =Utils.getScreenWidth();
reqWidth = (reqWidth/5)*2;
reqHeight = reqWidth;
final BitmapFactory.Options options = new BitmapFactory.Options();
options.inJustDecodeBounds = true;
//  BitmapFactory.decodeStream(is, null, options);
BitmapFactory.decodeFile(pathName, options);
// Calculate inSampleSize
options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);
// Decode bitmap with inSampleSize set
options.inJustDecodeBounds = false;
return BitmapFactory.decodeFile(pathName, options);
}

   public   int calculateInSampleSize(BitmapFactory.Options options,
  int reqWidth, int reqHeight) {
// Raw height and width of image
final int height = options.outHeight;
final int width = options.outWidth;
int inSampleSize = 1;

if (height > reqHeight || width > reqWidth) {
  if (width > height) {
    inSampleSize = Math.round((float) height / (float) reqHeight);
  } else {
    inSampleSize = Math.round((float) width / (float) reqWidth);
  }
}
return inSampleSize;
 } 
```

# database - 如何将数据库与文件连接起来

> ID：13809452
> 
> 赞同：0
> 
> 时间：2012-12-10T21:19:53.347
> 
> 标签：database, webserver, metadata

将元数据插入需要逻辑连接文件的数据库的最佳方式是什么，这些文件本地存储在 Web 服务器上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:53:26.113

通常，数据库控制自己的存储。正确的过程是将数据加载到数据库中的表中。这很重要，因为数据库管理存储和内存。在典型配置中，您不希望访问由另一个应用程序更新的文件。而且，您通常不希望通过网络存储数据库数据。

该问题的一般答案是您希望将数据加载到数据库中。

也就是说，许多数据库引擎允许您远程访问其他数据库中的数据或通过诸如 ODBC 之类的技术。您可以获得平面文件的驱动程序，甚至那些远程存储在网络上的驱动程序。但是，这不是查询的最佳设置。或者，数据库可用于管理远程文件的元数据，例如存储在磁盘上的图像文件。目的是允许通过元数据进行搜索，本质上是检索文件名，然后解析（在客户端或服务器端，取决于架构）。

也许您应该问另一个问题，更详细地说明您要完成的工作以及您正在使用的数据库。

# android - android:text="SomeText:" 不起作用

> ID：13809454
> 
> 赞同：1
> 
> 时间：2012-12-10T21:20:26.787
> 
> 标签：android, android-layout

我的活动中有一些 textViews。我正在连接到服务器并从数据库中获取一些数据并获取 JSON 响应并将数据加载到我的活动中并使用从服务器获取的数据设置 textview 文本。一切正常。现在的问题是我想在 textview 中添加一些默认文本。现在我在 textview 中只有作者姓名，它看起来很正常，但我希望它看起来像`Author: Dennis` 我尝试使用 android:text= "Author:" 作为作者 textview 但它不起作用。让我知道我该怎么做。

```
<TextView
    android:id="@+id/author"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingTop="2dip"
    android:paddingLeft="3dip"
    android:text="@string/author"
    android:textSize="10sp" /> 
```

这是我设置文本的代码。

```
ListAdapter adapter = new SimpleAdapter(
                        MainActivity.this, productsList,
                        R.layout.list_item, new String[] {TITLE, AUTHOR},
                        new int[] { R.id.title, R.id.author });
                // updating listview
                setListAdapter(adapter); 
```

/丹尼斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:27:51.720

当您设置文本时：

```
textview.setText(textview.getText() + " " + serverresponsestring); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:24:33.617

显然 Author: 被读取为类名。尝试编写 android:text="Author\\:" 并告诉我会发生什么。

android手册说双斜杠转义字符串 [http://androidcookbook.com/Recipe.seam?recipeId=2219](http://androidcookbook.com/Recipe.seam?recipeId=2219)

# sql - SQL 数据库限制数据视图

> ID：13809456
> 
> 赞同：0
> 
> 时间：2012-12-10T21:20:28.930
> 
> 标签：sql, oracle, security, policy

好的，所以我是 SQL 的新手，只是想知道是否有一种方法可以限制谁可以访问什么类型的数据，就从表中检索信息而言。例如，我有一个包含客户信息的表格，其中包含他的姓名、电话、地址、SSN、薪水等。我想知道是否有办法根据谁在查看来限制显示的内容那个数据。就像一个人 A 可以看到所有内容，而人 B 可以看到除了 SSN 和薪水之外的所有内容

编辑：

可以使用触发器来限制某个组的视图吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:24:24.327

您可以使用[视图](http://www.w3schools.com/sql/sql_view.asp)。之后，它取决于使用情况、人们如何访问数据（一些访问权限或用户组等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T21:29:58.880

要使某些用户不显示列，您需要为每个用户组提供不同的视图（即没有 SSN 的视图 A、受限组中用户的薪水等）。或使用细粒度访问控制 FGAC：[http ://docs.oracle.com/cd/B19306_01/network.102/b14266/apdvcntx.htm](http://docs.oracle.com/cd/B19306_01/network.102/b14266/apdvcntx.htm)

细粒度的访问控制直接应用于表，因此您不需要视图来实现它。

例如，一个非常简单的测试向您展示。假设任何具有 Oracle 角色“SSN_AUTH”的人都可以查看所有行的 SSN/Salary。没有它的人，不能。

```
SQL> create table person(id number, name varchar2(200), ssn varchar2(20), salary number(*,2));

Table created. 
```

现在我们创建一个函数（无论如何，将它放在一个包中以获取真实代码）。该函数将为在表`exists (select null from session_roles where role = 'SSN_AUTH')`上触发的每个查询应用一个静默谓词。`person`即该谓词意味着如果您没有启用名为 SSN_AUTH 的角色，您将看不到数据。

```
SQL> create or replace function person_rls (p_owner in varchar2, p_name in varchar2)
  2  return varchar2 as
  3    v_sql varchar2(2000);
  4  begin
  5     v_sql := 'exists (select null from session_roles where role = ''SSN_AUTH'')';
  6     return v_sql;
  7  end person_rls;
  8  /

Function created. 
```

现在，我不想抑制行（尽管我们可以这样做）。我们只想抑制列数据。所以我们将此函数作为策略添加到表中，并告诉它要保护的列：

```
SQL> BEGIN
  2       DBMS_RLS.ADD_POLICY(object_schema=>user, object_name=>'PERSON',
  3                           policy_name=>'SEC_PERSON', function_schema=>user,
  4                           policy_function=>'PERSON_RLS',--our function
  5                           sec_relevant_cols=>'ssn,salary', -- secure these cols.
  6                           sec_relevant_cols_opt=>dbms_rls.ALL_ROWS);
  7  END;
  8  /

PL/SQL procedure successfully completed.

SQL> insert into person values (1, 'DazzaL', 'asdklakjd', 10000.12);

1 row created.

SQL> commit;

Commit complete. 
```

现在，如果我们没有设置角色：

```
SQL> set role none;

Role set.

SQL> select * from person;

        ID NAME                 SSN                      SALARY
---------- -------------------- -------------------- ----------
         1 DazzaL 
```

工资 + SSN 是空白的..但是如果我们启用该角色。

```
SQL> set role all;

Role set.

SQL> select * From session_roles;

ROLE
------------------------------
CONNECT
RESOURCE
SELECT_CATALOG_ROLE
HS_ADMIN_SELECT_ROLE
PLUSTRACE
SSN_AUTH  <--- we have it now.

SQL> select * from person;

        ID NAME                 SSN                      SALARY
---------- -------------------- -------------------- ----------
         1 DazzaL               asdklakjd              10000.12 
```

数据神奇地出现了。

# coffeescript - 将 DateTime 属性添加到 SpineJS 模型

> ID：13809457
> 
> 赞同：0
> 
> 时间：2012-12-10T21:20:35.317
> 
> 标签：coffeescript, spine.js

我正在寻找在我的 SpineJS 模型上处理日期和时间的最佳方法。我正在创建各种活动日历。第一个障碍是展示一个不错的 6 周日历。它必须从上个月的最后一个星期日开始，到下个月的第一个星期六结束。

我正在使用 DateJs (http://www.datejs.com/) 并在 View 模板中处理一些日期内容，但想将其中的一些内容移到模型中以清理所述视图。

我正在处理的功能称为“firstDay”。这将找到我们开始日历的日期（上个月的最后一个星期日）

```
 firstDay: () ->
    Date.today().set({month: @month}).moveToFirstDayOfMonth().moveToDayOfWeek(0, -1) 
```

我尝试的用法：

```
<% day = cal.firstDay %>

  // initialize the table header, etc

  <tbody>
    <% while !day.equals(cal.lastDay): %>
    // render each calendar tile/square 
```

这是错误：

```
Uncaught TypeError: Object function () {
      return Date.today().set({
        month: this.month
      }).moveToFirstDayOfMonth().moveToDayOfWeek(0, -1);
    } has no method 'equals' 
```

所以我的 Spine 模型似乎没有意识到 DateJS ......我想这是有道理的。看起来函数本身正在被返回，而不是函数的评估......如果这有意义的话。

对于将日期和时间合并到我的模型中的最佳方式，我们将不胜感激这里的任何指导。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:37:51.440

所以我的问题很简单......语法。作为 coffescript 和 spinjs 的新手，我想我一次看太多东西而错过了明显的东西。

从 coffeescript/eco 模板调用这个函数的正确方法是：

```
<% day = cal.firstDay() %> 
```

我错过了函数调用的括号。如果我以后再次遇到该错误，这个错误应该很容易识别。事实上，它一开始就应该很明显......再次，太多的新事物。

# objective-c - CoreMotion-DeviceMotion 在 iPad 3 上不可用

> ID：13809462
> 
> 赞同：1
> 
> 时间：2012-12-10T21:20:50.037
> 
> 标签：objective-c, ios, ipad, gyroscope, core-motion

我有这个奇怪的问题。在我的应用程序中，我询问设备，如果 DeviceMotion 可用：

```
if (coreMotionManager.isDeviceMotionAvailable) {

    coreMotionManager.deviceMotionUpdateInterval = 1.0 / 60.0;
    [coreMotionManager startDeviceMotionUpdates];

    [NSTimer scheduledTimerWithTimeInterval:1.0 / 60.0 target:self selector:@selector(didUpdateCoreMotion) userInfo:nil repeats:YES];
}
else {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"NO DEVICE MOTION" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
    [alert show];
} 
```

但它总是错误的......我做错了什么？我在我的 iPad 3 上执行此操作，过去我已经使用过 CMMotionManager 以及它的 .deviceMotion.attitude.roll、pitch 和 yaw，一切都很好。但现在我总是很警觉 oO

有谁知道可能出了什么问题？非常感谢任何帮助:)

**最后重新启动我的 Mac 有帮助，重新启动后一切正常！:) 感谢 Kay 的支持和帮助 :)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:07:54.110

重置您的 iPad。我以前在 ipad 2 和 ipad 3 上遇到过这种情况。该设备只是拒绝对我表示态度。我猜这是因为内部陀螺仪失控了，需要重置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:23:23.607

最后重新启动我的 Mac 有帮助，重新启动后一切正常！:) 感谢 Kay 的支持和帮助 :)

# excel - 对象 _Global 的范围失败？

> ID：13809463
> 
> 赞同：0
> 
> 时间：2012-12-10T21:20:50.163
> 
> 标签：excel, vba

这是我的代码。

```
Sub Hide_Column()
Range("A,C:AV,AY:BA,BJ:BR").Select
Selection.EntireColumn.Hidden = True
End Sub 
```

我在我的活动工作簿中从我的个人运行这个。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:16:05.483

选择列时，不使用行号，必须给出开始和结束。

`range("A")`是不正确的

`range("A:A")`是正确的格式

所以你的代码应该是这样的：

```
range("A:A,C:AV,AY:BA,BJ:BR").Columns.Hidden=true 
```

# php - 为什么当目录为空时 glob() 返回 FALSE？

> ID：13809465
> 
> 赞同：0
> 
> 时间：2012-12-10T21:21:07.060
> 
> 标签：php, arrays, glob

我有一个名为的空文件夹`my_folder`：

```
$mas = glob("my_folder/*");
var_dump($mas); 
```

如果在`my_folder`我有文件，结果是一个数组，但如果`my_folder`是空的，结果是`false`.

为什么结果`false`而不是空数组（）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:23:42.337

*   很可能您没有`my_folder`.

*   也可能是因为（来自 PHP 手册）：

> 在某些系统上，无法区分空匹配和错误。

如果后者是你的情况，我建议你回到“[经典](http://php.net/manual/en/function.readdir.php)”的方式来做到这一点：

```
while (false !== ($entry = readdir($handle))) {
        echo "$entry\n";
} 
```

使用：

```
opendir(), readdir(), closedir() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T21:24:11.193

[PHP 手册](http://us3.php.net/glob)说出现错误时`glob`返回。`FALSE`你没有得到一个空数组，因为有一个错误。

以下是一些常见的错误`glob`：

*   您没有文件/文件夹的权限（嗯，`www-data`没有权限，也就是说）
*   你打错了什么
*   您正在尝试处理远程文件（不支持）
*   您正在使用没有它的旧系统（例如，非常旧的 S OS）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T21:24:28.987

返回值：返回一个包含匹配文件/目录的数组，如果没有匹配的文件，则返回一个空数组，如果**错误则返回 FALSE**。

注意： **在某些系统上，无法区分空匹配和错误。**

检查这两点与您和您的特定平台无关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T21:25:27.327

从**返回值**部分下的[PHP glob 手册页：](http://php.net/glob)

 **> 返回一个包含匹配文件/目录的数组，如果没有匹配的文件，则返回一个空数组，或者错误时返回 FALSE。**

# ruby-on-rails - Ruby on Rails 获得错误数量的参数（1 代表 0）

> ID：13809473
> 
> 赞同：1
> 
> 时间：2012-12-10T21:21:40.270
> 
> 标签：ruby-on-rails, railscasts

我正在使用与 Railscast 213 类似的代码来显示带有记录的日历。

do 行导致“参数数量错误（1 代表 0）：

```
<%= calendar @date do |date| %>
    <%= date.day %>
    <% if @wolabors_by_date[date] %>
      <ul>
        <% @wolabors_by_date[date].each do |wolabor| %>
          <li><%= link_to wolabor.name, wolabor %></li>
        <% end %>
      </ul>
    <% end %>   
<% end %> 
```

calendar_helper.rb 开始于：

```
module CalendarHelper
    def calendar(date = Date.today, &block)
        Calendar.new(self, date, block).table   
    end 
```

wolabors_controller.rb 有

```
class WolaborsController <     ApplicationController
def index
  @wolabors = Wolabor.all
  @wolabors_by_date = @wolabors.group_by(&:date)
  @date = params[:date] ? Date.parse(params[:date]) : Date.today
end` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:41:14.527

我认为第一行应该是

```
<% calendar_for @date do |date| %> 
```

该 railscast 已被修订，并且在新版本中不使用该 table_builder 插件。

[http://railscasts.com/episodes/213-calendars-revised](http://railscasts.com/episodes/213-calendars-revised)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:35:17.410

我在关于这个 Railscast 的讨论中发现，声明：

```
first = date.beginning_of_month.beginning_of_week(START_DAY) 
```

给出相同的论点错误。看来方法

```
beginning_of_month 
```

和

```
beginning_of_week 
```

是 Rails 3.2 特定的，如果您使用的是较低版本，则应该升级。

# ruby - 在 Ruby 中按名称传递函数

> ID：13809478
> 
> 赞同：5
> 
> 时间：2012-12-10T21:21:58.180
> 
> 标签：ruby, functional-programming

如何在 Ruby 中按名称传递函数？（我只使用 Ruby 几个小时，所以我还在搞清楚。）

```
nums = [1, 2, 3, 4]

# This works, but is more verbose than I'd like    
nums.each do |i|
  puts i
end

# In JS, I could just do something like:
# nums.forEach(console.log)

# In F#, it would be something like:
# List.iter nums (printf "%A")

# In Ruby, I wish I could do something like:
nums.each puts 
```

可以在 Ruby 中同样简洁地完成吗？我可以只按名称引用函数而不是使用块吗？

**人们投票结束：**你能解释为什么这不是一个真正的问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T21:33:43.517

You can do the following:

```
nums = [1, 2, 3, 4]
nums.each(&method(:puts)) 
```

[This article](http://www.robertsosinski.com/2008/12/21/understanding-ruby-blocks-procs-and-lambdas/) has a good explanation of the differences between procs, blocks, and lambdas in Ruby.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T21:34:46.073

*Can I just reference the function by name instead of wrapping it in a block?*

You aren't 'wrapping' it -- the block *is* the function.

If brevity is a concern, you can use brackets instead of `do..end`:

```
nums.each {|i| puts i} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T21:37:05.550

不是开箱即用的，尽管您可以使用`method`：

```
def invoke(enum, meth)
  enum.each { |e| method(meth).call(e) }
end 
```

我更喜欢把它包成一个猴子补丁`Enumerable`。

还有其他方法可以解决这个问题；这是一种蛮力。

# python - 在向量上使用 numpy.cov 会产生 NAN

> ID：13809485
> 
> 赞同：1
> 
> 时间：2012-12-10T21:22:15.950
> 
> 标签：python, numpy, covariance

下午好。

我面临着一项 PCA 任务，该任务仅涉及减少向量的维数。在这种情况下，我对二维矩阵不感兴趣，而只是一个 D 维向量，我想沿着它的 K 个主特征向量进行投影。

为了实现 PCA，我需要检索这个向量的协方差矩阵。让我们尝试在示例向量上执行此操作：

```
someVec = np.array([[1.0, 1.0, 2.0, -1.0]]) 
```

我已将此向量定义为 1 X 4 矩阵，即行向量，以使其与 numpy.cov 兼容。通过 numpy.cov 获取该向量的协方差矩阵将产生一个标量协方差矩阵，因为 numpy.cov 假设特征在行中：

```
print np.cov(someVec)
1.58333333333 
```

但这只是（或者更确切地说，应该是）维度假设的差异，并且采用转置向量的协方差应该可以正常工作，对吧？除了它没有：

```
print np.cov(someVec.T)
/usr/lib/python2.7/site-packages/numpy/lib/function_base.py:2005: RuntimeWarning:                  
invalid value encountered in divide
return (dot(X, X.T.conj()) / fact).squeeze()
[[ nan  nan  nan  nan]
[ nan  nan  nan  nan]
[ nan  nan  nan  nan]
[ nan  nan  nan  nan]] 
```

我不确定我在这里做错了什么。有什么建议吗？

谢谢，

杰森

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T21:31:14.690

如果要传入转置，则需要设置`rowvar`为零。

```
In [10]: np.cov(someVec, rowvar=0)
Out[10]: array(1.5833333333333333)

In [11]: np.cov(someVec.T, rowvar=0)
Out[11]: array(1.5833333333333333) 
```

从[文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.cov.html)：

> **rowvar**：int，可选
> 
> 如果 rowvar 不为零（默认），则每一行代表一个变量，列中包含观察值。否则，关系被转置：每列代表一个变量，而行包含观察值。

如果你想找到一个完整的协方差矩阵，你需要不止一个观察值。通过一次观察和 numpy 的默认估算器，`NaN`这正是您所期望的。如果您希望通过`N`代替 进行标准化`(N-1)`，您可以将 a 传递`1`给偏差。

```
In [12]: np.cov(someVec.T, bias=1)
Out[12]:
array([[ 0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.]]) 
```

同样，来自文档。

> **偏差**：int，可选
> 
> 默认归一化是 (N - 1)，其中 N 是给定的观察数（无偏估计）。如果偏差为 1，则归一化为 N。这些值可以通过在 numpy 版本 >= 1.5 中使用关键字 ddof 来覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:33:44.333

You should use the option `row_var=0` in [`numpy.cov`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.cov.html):

```
In [1]: a = array([[1, 2, 3, 4]])

In [2]: np.cov(a)
Out[2]: array(1.6666666666666667)

In [3]: np.cov(a.T)
Out[3]: 
array([[ nan,  nan,  nan,  nan],
       [ nan,  nan,  nan,  nan],
       [ nan,  nan,  nan,  nan],
       [ nan,  nan,  nan,  nan]])

In [4]: np.cov(a.T, rowvar=0)
Out[4]: array(1.6666666666666667) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T21:41:15.603

> 不是真的，那不应该返回一个大小为 4 x 4 的矩阵吗？我的意思是，向量有 4 个“特征”，所以考虑到我想测量特征之间的方差并将它们存储在适当的位置，我需要一个协方差矩阵。

由于您只有一个观察值，因此您无法计算协方差矩阵。根据估计量，协方差可能为零或未定义。

如果这不是直观清楚，请尝试回答以下问题：

1.  的方差是`1.0`多少？
2.  `1.0`和的协方差是`2.0`多少？

本质上，这些是您要求`numpy.cov()`执行的计算。

# typescript - 重命名打字稿文件

> ID：13809488
> 
> 赞同：1
> 
> 时间：2012-12-10T21:21:57.023
> 
> 标签：typescript

> **可能重复：**
> [重命名 Typescript 文件](https://stackoverflow.com/questions/13262244/rename-a-typescript-file)

嗨，谁能指出为什么我会在 VS 2012 的打字稿项目中修复此错误

我重命名了一个打字稿文件并编译并期望自动生成的 JS 文件将名称更改为新的 TS 名称（展开箭头时看到的名称），但它没有，而是将新的 JS 文件添加到与TS 文件。将箭头下的 js 文件作为默认方式会更好。

或者，我可以按照此处所述删除 TS 并重做，但这并不好玩

[重命名 Typescript 文件](https://stackoverflow.com/questions/13262244/rename-a-typescript-file)

# sql-server - 生成几个类似的SSIS包（文件数据源到DB）

> ID：13809491
> 
> 赞同：1
> 
> 时间：2012-12-10T21:22:48.117
> 
> 标签：sql-server, csv, file-io, ssis

有没有办法自动生成 SSIS 包？我需要创建很多 SSIS 包，它们只是从一个表中删除数据并从文本文件中导入数据。文件名与表名匹配，列标题位于文件的第一行。

如需更多详细信息：

*   我正在开展一个项目，在该项目中，我必须分离当前耦合的两个系统（一个系统可以直接访问另一个系统的数据库）。修改后，一个系统将通过txt文件提供数据，加载到另一个数据库中。
*   我们必须使用 SSIS 将数据从文本文件加载到数据库中。
*   文本文件将以 CSV 格式提供，第一行包含列标题。
*   两个数据库中的表具有匹配的列名，我们需要做的就是清除表并从文件中加载数据。

我有一百多个不同列数的表。我需要手动创建每个包吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:32:40.397

我熟悉 2 个免费选项。

*   如果您是 .NET 重度商店或只是想对 API 进行探索， [EzAPI可能是一个好地方。](http://sqlsrvintegrationsrv.codeplex.com/releases/view/21238)这种方法允许您控制几乎整个包的生成，但以编码时间为代价。我发现 EzAPI 通常比使用 SSIS 的基本 COM/.NET 库更容易。

*   [Biml](http://en.wikipedia.org/wiki/Biml)是一个有趣的野兽。Varigence 很乐意向您出售 Mist 的许可证，但这不是必需的。您只需要[BIDSHelper](http://bidshelper.codeplex.com/)，然后浏览[BimlScript](http://www.bimlscript.com/)并寻找与您的需求相近的配方。完成后，单击 BIDSHelper 中的上下文相关菜单按钮并嗖嗖作响，它会生成包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:42:35.417

我只是使用 vb 来做到这一点的，我将表名作为命令参数传递，并使用 vb 生成插入和清除，发挥了作用……我明天回到办公室时可以尝试将其挖掘出来，但是这很简单。似乎没有任何其他方式可以说“只需获取 x 并导出它”，“只需获取 y 并将其导入 z”，所以它必须是 vb。实际上想起来我想我实际上使用了一个小的 xml 文件来传递表信息以进行导出，然后从 csv 文件名中确定要导入的表名。需要明确的是，这只是一个包，但它可以动态选择它所做的导入/导出数量。进一步澄清这是 ssis 中的 vb 作为处理步骤

# c# - 画布不会跟随全屏窗口？

> ID：13809494
> 
> 赞同：0
> 
> 时间：2012-12-10T21:22:27.613
> 
> 标签：c#, wpf, grid, window, size

我得到的图层如下：

```
<Window>
  <Grid>
     <Scrollviewer>
        <Canvas>
          ....
        <Canvas/>
     <Scrollviewer/>
  <Grid/>
<Window/> 
```

现在，如果我希望我的网格扩展并遵循窗口的高度和宽度，我使用以下代码：

```
<Window Title="MainWindow" Name="Window" MinHeight="500" MinWidth="800">

<Grid Height="{Binding ElementName=Window, Path=Height}" Width="{Binding ElementName=Window, Path=Width}" x:Name="theGrid">
    <Grid.RowDefinitions>
        <RowDefinition Height="436*" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>

    <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" Margin="0,50,15,66">
        <Canvas MinWidth="{Binding ElementName=theGrid, Path=Width}" MinHeight="{Binding ElementName=theGrid, Path=Height}" Name="canvas1">
                <Canvas.LayoutTransform>
                    <ScaleTransform ScaleX="{Binding Path=Value, ElementName=slider1}"
                                    ScaleY="{Binding Path=Value, ElementName=slider1}"/>
                </Canvas.LayoutTransform>
            </Canvas>
    </ScrollViewer> 
```

当我通过拉窗口的边/角来调整窗口大小时，这很好用..！但是！当我点击右上角的“全屏”按钮时，它只显示最后一张图片网格的网格大小。像这样：

![网格在窗口的中间](../Images/dfe87eb85deac9aa1b54298815fca770.png)

就像它在“全屏”后不会重新绘制网格一样......帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:40:08.870

您明确设置网格的`Width`和是否有特定原因？`Height`将网格设置`Margin`为 0 将始终将 Grid 设置为窗口大小

```
 <Grid Margin="0" x:Name="theGrid">
        <Grid.RowDefinitions>
            <RowDefinition Height="436*" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

 <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" Margin="0,50,15,66">
        <Canvas Margin="0" Name="canvas1">
                <Canvas.LayoutTransform>
                    <ScaleTransform ScaleX="{Binding Path=Value, ElementName=slider1}"
                                    ScaleY="{Binding Path=Value, ElementName=slider1}"/>
                </Canvas.LayoutTransform>
            </Canvas>
    </ScrollViewer> 
```

# javascript - 数据表：需要按 HTML 中的数据对列进行数字排序

> ID：13809500
> 
> 赞同：1
> 
> 时间：2012-12-10T21:23:39.600
> 
> 标签：javascript, jquery, sorting, twitter-bootstrap, datatables

我有一张看起来像这样的桌子......

```
<table id="myTable">
    <tr>
        <td><a href="site.com?id=1">1</a></td>
        <td>Foo</td>
    </tr>
    <tr>
        <td><a href="site.com?id=9">9</a></td>
        <td>Bar</td>
    </tr>
    <tr>
        <td><a href="site.com?id=10">10</a></td>
        <td>Baz</td>
    </tr>
</table> 
```

我需要这样做，以便我的[Bootstrap Datatables](http://datatables.net/plug-ins/sorting)脚本将按锚标记的内部 HTML 进行排序，并按数字对其进行排序。目前它正在像这样排序......

```
1   Foo
10  Baz
9   Bar 
```

但我需要它像这样排序......

```
1   Foo
9   Bar
10  Baz 
```

我真的不知道该怎么做。我对其进行了排序，但它认为内部 HTML 是一个字符串，而不是一个数字 :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T00:36:24.973

我假设您正在服务器端生成链接。您最好在客户端上呈现这些内容，原因有两个：

1.  你的排序会工作
2.  你的有效载荷会更小

为此，您需要使用类似于下面的 aoColumnsDef 和 aTargets

```
 "aoColumnDefs": [
    {
        "aTargets": [ 1 ],
        "fnRender": function ( o, val ) {
          var link = "<a class='' href='site.com?id=" + o.aData[0] + "'>" + o.aData[0] + "</a>";
          return link;
        }
    }, 
```

希望这可以帮助。

# sql - SQL Plus "case" 关键字

> ID：13809504
> 
> 赞同：1
> 
> 时间：2012-12-10T21:23:50.487
> 
> 标签：sql

任何人都可以帮助我使用 SQL Plus 的“case”语句的正确语法吗？

```
Select 
sum(case "REQUEST AGE" when >= 60 then 1 else 0) as "60+ Days",
sum(case "REQUEST AGE"  when >= 30 and case when "REQUEST AGE" < 60 then 1 else 0) as "30-    60 Days",
sum (case "REQUEST AGE" when < 30 then 1 else 0) as "Less Than 30 Days",
"SECTOR"
FROM Schema.APPDATA
Where Schema.APPDATA."SECTOR" like '%X%' 
```

我对 SQL 比较陌生，而且我从来没有写过这样的查询。我想要列请求年龄大于 60、介于 30 和 60 之间且小于 30 的情况的总和，因为 3 列按列扇区分组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:26:00.040

每个`CASE`语句都必须`END`在`()`. 您可以在`CASE WHEN <condition> THEN`此处使用语法：

```
Select 
  sum(case when "REQUEST AGE" >= 60 then 1 else 0 END) as "60+ Days",
  /* And in here, don't repeat the CASE keyword. Both parts of the expression are connected by AND */
  sum(case when "REQUEST AGE" >= 30 and "REQUEST AGE" < 60 then 1 else 0 END) as "30-    60 Days",
  sum (case when "REQUEST AGE" < 30 then 1 else 0 END) as "Less Than 30 Days",
  "SECTOR"
FROM Schema.APPDATA
Where Schema.APPDATA."SECTOR" like '%X%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T21:27:05.907

您需要使用`CASE WHEN [expression]... THEN`而不是`CASE [variable] WHEN [value] THEN ...`：

```
Select 
sum(case WHEN "REQUEST AGE" >= 60 then 1 else 0 end) as "60+ Days",
.... 
```

此外，在您的情况下，这似乎`count`比`sum`您根本不需要更合适`else`。

# r - 如何避免在 R（ggplot2 或任何其他）中堆叠条形图上对颜色进行排序和合并

> ID：13809505
> 
> 赞同：-1
> 
> 时间：2012-12-10T21:23:49.490
> 
> 标签：r, sorting, ggplot2, bar-chart

堆积条形图始终按填充对同一条形图上的段进行排序。如何避免这种情况？我想要实现的是一个堆叠的条形图，带有交替的蓝色和红色段（代表状态转换）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:32:54.973

# Base graphics solution

Use the `col` argument of `barplot`:

```
d <- rep(1, 4)
d <- as.matrix(d, nrow=4, ncol=1)
barplot(d, beside=FALSE, col=c("red", "blue", "red", "blue")) 
```

![enter image description here](../Images/c02850eed5a8c327ea5946686552cfcf.png)

# ggplot solution

```
require(ggplot2)
redBlue <- rep(c("red", "blue"), length(levels(diamonds$color))) 
#redBlue is twice as long as necessary, but that's harmless

ggplot(diamonds, aes(x=clarity, fill=color)) + geom_bar() + 
  scale_fill_manual(values=redBlue) 
```

![enter image description here](../Images/daecd3e6b77f580ffc910b568180e094.png)

# vb.net - 从 VB.Net 中的 SQL 表中删除记录

> ID：13809510
> 
> 赞同：-2
> 
> 时间：2012-12-10T21:24:18.587
> 
> 标签：vb.net, sql-server-2008, visual-studio-2010, delete-row

我正在尝试从我的表中删除记录，但无法这样做。我有带有插入、更新、删除和保存按钮的窗口窗体。我可以插入数据，但不能从该表中删除特定或任何记录。下面是我的代码。

每当我单击“删除”按钮时，我只会得到（“删除表上的记录时出错...”和 ex.Message，“删除记录”）msgbox。

我错过了什么吗？请指教。任何帮助都会很棒。谢谢！

```
Private Sub Deletebtn_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Deletebtn.Click

    Dim con As New SqlConnection
    Dim cmd As New SqlCommand
    Try
        con.ConnectionString = "Server=USRAG-L-0067215\SQLEXPRESS;Database=Alamo Products_Design Data;Trusted_Connection=True"
        con.Open()
        cmd.Connection = con
        cmd.CommandText = "Delete From Design_Parameters where DesignID= ? "
        cmd.ExecuteNonQuery()
        If MessageBox.Show("Do you really want to Delete this Record?", "Delete", MessageBoxButtons.YesNo, MessageBoxIcon.Warning) = DialogResult.No Then

            MsgBox("Operation Cancelled")

            Exit Sub

        End If
    Catch ex As Exception
        MessageBox.Show("Error while deleting record on table..." & ex.Message, "Delete Records")

    Finally

        con.Close()
    End Try
End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:26:24.577

您需要为 DesignID 添加参数

```
Dim con As New SqlConnection
    Dim cmd As New SqlCommand
    Try
        con.ConnectionString = "Server=USRAG-L-0067215\SQLEXPRESS;Database=Alamo Products_Design Data;Trusted_Connection=True"
        con.Open()
        cmd.Connection = con
        cmd.CommandText = "Delete From Design_Parameters where DesignID= @DesignID"
    cmd.Parameters.Add(New SqlParameter("@DesignID", yourvaluehere))
        cmd.ExecuteNonQuery()
        If MessageBox.Show("Do you really want to Delete this Record?", "Delete", MessageBoxButtons.YesNo, MessageBoxIcon.Warning) = DialogResult.No Then

            MsgBox("Operation Cancelled")

            Exit Sub

        End If
    Catch ex As Exception
        MessageBox.Show("Error while deleting record on table..." & ex.Message, "Delete Records")

    Finally

        con.Close()
    End Try 
```

# ruby - 带空格的单词数组

> ID：13809517
> 
> 赞同：8
> 
> 时间：2012-12-10T21:24:37.057
> 
> 标签：ruby, arrays

我开始喜欢**word arrays**，但今天我面临一个挑战：

```
 > a = %w[ faq contact 'about us' legal 'bug reports' ]
 => ["faq", "contact", "'about", "us'", "legal", "'bug", "reports'"] 
 > a = %w[ faq contact "about us" legal 'bug reports' ]
 => ["faq", "contact", "\"about", "us\"", "legal", "'bug", "reports'"] 
```

我怎样才能有**空白**元素？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-10T21:26:23.860

您可以转义空格字符

```
a = %w[ faq contact about\ us legal bug\ reports ]
a # => ["faq", "contact", "about us", "legal", "bug reports"] 
```

但我仍然会考虑使用“完整”数组文字。在这种情况下，它们不那么令人困惑。

# r - 数据什么时候应该进入/data，什么时候应该进入/inst/extdata？

> ID：13809518
> 
> 赞同：10
> 
> 时间：2012-12-10T21:24:52.740
> 
> 标签：r, package

[编写 R 扩展](http://cran.r-project.org/doc/manuals/R-exts.html#Data-in-packages)手册指出：

> data 子目录用于存放数据文件，可以通过延迟加载或使用 data() 加载。（由DESCRIPTION文件中的'LazyData'字段进行选择：默认不这样做。）它不应该用于包所需的其他数据文件，并且约定已经成长为使用目录inst/此类文件的 extdata。）

但目前还不清楚一个包“需要”哪些数据。我想出于以下（并不总是相互排斥）的原因使用数据：

*   文件
    *   功能示例
    *   功能测试
    *   小插曲
*   提供对原始数据集的访问
*   使数据可用于包内的函数（例如查找表/字典）

但目前尚不清楚其中哪些应该放在`data`文件夹中，哪些应该放在`inst/extdata`. 是否有任何条件可以让“数据”转移到其他地方？

*相关问题：*以前的问题（例如[R Packaging](https://stackoverflow.com/questions/13463103/inst-and-extdata-folders-in-r-packaging) and [Using inst/extdata with vignette during package checks R 2.14.0](https://stackoverflow.com/questions/8129485/using-inst-extdata-with-vignette-during-package-checking-r-2-14-0)中的 inst 和 extdata 文件夹）给出了一些使用说明，但不要告诉我如何决定使用哪个目录。另一个问题，[R - 我应该在哪里放置 RDA 文件 - /R、/data、/inst/extdata？](https://stackoverflow.com/questions/6113510/r-where-should-i-place-rda-file-r-data-inst-extdata), 最接近，但似乎特别关注 RDA 和 RData 文件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-10T21:40:35.257

该`data`目录为该`data()`功能提供数据，并预计在文件格式和扩展名方面遵循某些习惯。

该`inst/extdata`目录`extdata/`在安装后就变成了一个狂野的西部，您可以做任何您想做的事情，并且希望您编写自己的访问器。

查看经验可能很有用。在我的机器上，大约 240 个已安装的软件包中，整整 77 个（或不到三分之一）有`data/`.，但只有 4 个（包括我的一个）有`extdata.`.

# asp.net-mvc - 使用 MVC 控制器的 ServiceStack 身份验证

> ID：13809519
> 
> 赞同：3
> 
> 时间：2012-12-10T21:24:54.313
> 
> 标签：asp.net-mvc, servicestack

我已经关注了 ServiceStack 的 SocialBootstrapAPI 中的示例，但我不明白重定向是如何连接的。当我转到未经身份验证的安全控制器时，我被重定向回索引页面。我无法在自己的应用程序中复制该行为。没有找到这些接线的完成位置 - 在 SocialBootstrapApi 的 web.config 中找不到它们？

我继承了`ServiceStackController<AuthUserSession>`并放在`[Authenticate]`了我的基本控制器上。这是我得到的错误：

```
[NullReferenceException: Object reference not set to an instance of an object.]
   ServiceStack.ServiceInterface.SessionExtensions.SessionAs(ICacheClient cache, IHttpRequest httpReq, IHttpResponse httpRes) +90
   ServiceStack.Mvc.ServiceStackController.SessionAs() +64
   ServiceStack.Mvc.ServiceStackController`1.get_UserSession() +36
   ServiceStack.Mvc.ServiceStackController`1.get_AuthSession() +5
   ServiceStack.Mvc.ExecuteServiceStackFiltersAttribute.OnActionExecuting(ActionExecutingContext filterContext) +97 
```

这是我在 AppHost.cs 文件中的内容：

```
 //Enable Authentication
        ConfigureAuth(container);

        //Register In-Memory Cache provider. 
        //For Distributed Cache Providers Use: PooledRedisClientManager, BasicRedisClientManager or see: https://github.com/ServiceStack/ServiceStack/wiki/Caching
        container.Register<ICacheClient>(new MemoryCacheClient());
        container.Register<ISessionFactory>(c => 
            new SessionFactory(c.Resolve<ICacheClient>())); 
```

ConfigureAuth() 类似于 SocialBootstrapApi 示例（不完全相同但很接近） - 我认为这里没有遗漏什么。

那么这是如何工作的呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T21:20:09.887

根据 OP 请求，对答案进行评论：

您是否为 MVC 控制器设置了 IoC？`ControllerBuilder.Current.SetControllerFactory(new FunqControllerFactory(container));`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T23:47:19.163

查看这个问题，了解如何更改ServiceStack 的 Authentication 使用[的 HtmlRedirect 。](https://stackoverflow.com/a/13073251/85785)

您可能还会发现 ServiceStack UseCases 中的[CustomAuthenticationMvc](https://github.com/ServiceStack/ServiceStack.UseCases/tree/master/CustomAuthenticationMvc)项目更有用，因为它只关注 MVC 中的身份验证。

# java - 对象库是否有任何 2 向模板？

> ID：13809520
> 
> 赞同：0
> 
> 时间：2012-12-10T21:25:01.367
> 
> 标签：java, xml, templates

我们经常使用模板作为序列化对象的一种方式。也就是说，给定一个 Java POJO 和一个合适的 XML 模板，其中包括像 ${person.address.street} 这样的占位符，我们可以输出完整格式的 XML 等。

是否有任何库可以让您使用相同的模板和输出样本，然后另辟蹊径？也就是说，从一个模板、一个示例 XML 文档以及我猜的一个类名生成一个填充的 Java bean（例如）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:16:33.630

你可以使用 Freemarker 来帮助你，它是一个很棒的 JAVA API![在此处输入图像描述](../Images/6591a1bd127ec28b72173face531169c.png)

您可以拥有调用 getter 的 XML 模板文件，然后创建一个动态 XML 文件。

有帮助的话告诉我

# c++ - SetTimer 未执行 CALLBACK

> ID：13809523
> 
> 赞同：1
> 
> 时间：2012-12-10T21:25:22.720
> 
> 标签：c++, winapi

好吧，我已经为 d3d9 制作了我的 proxydll，dll 本身可以工作，我可以确认它已加载到进程中，因为创建了一个黄色矩形。

问题是我调用了 SetTimer 但没有调用我的回调，该怎么办？

我可以听到两声 MessageBeep 的声音，但没有声音，我在游戏中的钱保持为 0。

这是我的代码：

```
// global variables
#pragma data_seg (".d3d9_shared")
myIDirect3DDevice9* gl_pmyIDirect3DDevice9;
myIDirect3D9*       gl_pmyIDirect3D9;
HINSTANCE           gl_hOriginalDll;
HINSTANCE           gl_hThisInstance;
#pragma data_seg ()

UINT                TimmerID = 0;
#define ProcessTickID (1337)
VOID CALLBACK ProcessTickMain(HWND x, UINT y, UINT_PTR z, DWORD w);

BOOL APIENTRY DllMain( HANDLE hModule, DWORD  ul_reason_for_call, LPVOID lpReserved)
{
    // to avoid compiler lvl4 warnings
    LPVOID lpDummy = lpReserved;
    lpDummy = NULL;

    switch (ul_reason_for_call)
    {
        case DLL_PROCESS_ATTACH: InitInstance(hModule); break;
        case DLL_PROCESS_DETACH: ExitInstance(); break;

        case DLL_THREAD_ATTACH:  break;
        case DLL_THREAD_DETACH:  break;
    }
    return TRUE;
}

void InitInstance(HANDLE hModule)
{
    OutputDebugString("PROXYDLL: InitInstance called.\r\n");

    // Initialisation
    gl_hOriginalDll        = NULL;
    gl_hThisInstance       = NULL;
    gl_pmyIDirect3D9       = NULL;
    gl_pmyIDirect3DDevice9 = NULL;

    // Storing Instance handle into global var
    gl_hThisInstance = (HINSTANCE)  hModule;
    MessageBeep(0xFFFFFFFF);
    //TimmerID = SetTimer((HWND)Address::Game::MainWindowHandle,ProcessTickID,5,ProcessTickMain);
    TimmerID = SetTimer((HWND)gl_hThisInstance,ProcessTickID,5,ProcessTickMain);
    MessageBeep(0xFFFFFFFF);
}

VOID CALLBACK ProcessTickMain(HWND x, UINT y, UINT_PTR z, DWORD w)
{
    int * ptr = (int*)Address::Ped::Money;
    ptr += 1;
    MessageBeep(0xFFFFFFFF);
}

void ExitInstance()
{
    KillTimer((HWND)gl_hThisInstance,ProcessTickID);
    OutputDebugString("PROXYDLL: ExitInstance called.\r\n");

    // Release the system's d3d9.dll
    if (gl_hOriginalDll)
    {
        ::FreeLibrary(gl_hOriginalDll);
        gl_hOriginalDll = NULL;
    }
} 
```

# c# - 逐渐减少重复按钮上的间隔

> ID：13809526
> 
> 赞同：1
> 
> 时间：2012-12-10T21:25:43.203
> 
> 标签：c#, wpf, xaml, repeatbutton

我的项目中有一个可以左右滚动图表的重复按钮。当用户用鼠标按住按钮时，我希望滚动速度慢慢加快。据我所知，RepeatButton 没有内置此功能。有没有一种简单的方法可以在用户按住按钮时慢慢减小按钮的间隔属性，然后在用户松开按钮时将其重置?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:00:52.200

我不认为这是可能的。

存在的原因是`RepeatButton`引擎盖下的架构方式。基本上，当您按下空格键或按下鼠标左键时，它会根据`Interval`属性的当前设置启动一个计时器。当您释放按键或鼠标按钮时，计时器将停止。该`Interval`属性只是被定义为一个香草`DependencyProperty`，所以它不会做任何事情来更新计时器的间隔。

您可能可以通过反射来调整时间间隔，并可能停止/重新启动计时器......但我不确定它是否真的值得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-13T15:39:07.320

虽然有点小技巧，但这种效果实际上很容易通过扩展 RepeatButton 来实现，只要您想要的间隔总是可以表示为某个恒定基本间隔的整数倍。

这是一个如何做到这一点的快速示例：

```
public class AcceleratingRepeatButton : System.Windows.Controls.Primitives.RepeatButton
{
    private int _intervalCount = -1;
    protected override void OnClick()
    {
        //Always OnClick for the initial press
        if (_intervalCount < 0) {
            _intervalCount = -1;
            base.OnClick();
        } else if (ShouldTriggerRepeat(_intervalCount)) {
            base.OnClick();
        }
        _intervalCount += 1;
    }

    protected override void OnIsPressedChanged(DependencyPropertyChangedEventArgs e)
    {
        _intervalCount = -1;    //When the button is released, reset the counter
        base.OnIsPressedChanged(e);
    }

    private bool ShouldTriggerRepeat(int count)
    {
        const int intervalsAtQuarterRate = 16;   //For the first 16 intervals, trigger repeats at 1/4 the normal rate
        const int intervalsAtHalfRate = 16 + intervalsAtQuarterRate;    //the next 16 intervals at 1/2 the rate

        if (count < intervalsAtQuarterRate) {
            return (count & 7) == 0;    //Returns true every 4 intervals
        } else if (count < intervalsAtHalfRate) {
            return (count & 3) == 0;    //Returns true every 2 intervals
        } else {
            return true;
        }
    }
} 
```

依赖属性可用于允许从 xaml 进行配置（为了简洁而排除），并且可以在 ShouldTriggerRepeat 中使用更复杂的逻辑以允许更精细的控制。

# mysql - Coldfusion 10 和 mysql - 解密先前存储的数据的问题

> ID：13809528
> 
> 赞同：2
> 
> 时间：2012-12-10T21:25:51.710
> 
> 标签：mysql, coldfusion, aes, coldfusion-10

我正在将站点从 CF8 移动到 CF10，出现的问题之一是使用 mysql 中的 aes_encrypt 检索存储在 mysql 中的数据。该列是blob。当我访问检索解密字符串的 CFC 时，我得到一个带有错误的二进制对象：

```
ByteArray objects cannot be converted to strings. 
```

在 CF8 系统上，我可以输出：

```
<cfoutput>#qryResult.decryptedString#</cfoutput> 
```

在 CF10 下，我必须将它包装在一个 toString() 中

```
<cfoutput>#toString(qryResult.decryptedString)#</cfoutput> 
```

我不知道这是否是 CF、MySQL 或驱动程序问题，以及解决它的最佳方法，或者我是否需要采取另一步骤来转换此站点。换句话说，“toString()”是正确的解决方案，还是可以将数据库参数放入连接字符串中以保持原样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T05:04:42.907

我用 ColdFusion 8 和 10（针对同一个数据库）进行了一些测试，得到了相似的结果。解密的结果在 ColdFusion 8（和 MySQL）中作为[字符串](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)返回，但在 ColdFusion 10 中作为二进制返回。所以我怀疑这是驱动程序错误，或者可能是故意更改（我不确定）。

**测试查询**

```
 <cfquery name="qTest" datasource="mySQL51">
        SELECT AES_DECRYPT(encryptedColumn, 'xxxxxxx') AS DecryptedResult
        FROM   test
        WHERE  ID = 1
    </cfquery>

    <cfoutput>
        class name = #qTest.decryptedResult[1].getClass().name#
    </cfoutput> 
```

**结果**

```
 ColdFusion  8  / class name = java.lang.String 
    ColdFusion 10  / class name = [B   (ie binary/byte array) 
```

* * *

除了测试不同的驱动程序之外，最简单的解决方案是像现在一样将值转换为字符串。您可以在 SQL 中进行转换：

```
 SELECT CAST(AES_DECRYPT(encryptedColumn, 'xxx') AS CHAR) AS DecryptedResult 
```

.. 或在 CF 代码中。只需确保指定像 UTF-8 这样的编码

```
 <!--- if result is binary, convert it to a string first --->
  <cfif IsBinary( qTest.decryptedResult )>
      <cfset decryptedString = charsetEncode( qTest.decryptedResult, "utf-8" )>
  </cfif> 
```

# backbone.js - 如何加载多个依赖的主干模型？

> ID：13809535
> 
> 赞同：3
> 
> 时间：2012-12-10T21:26:37.060
> 
> 标签：backbone.js, requirejs, javascript-framework

我的 Backbone 应用程序包括依赖于多个模型的视图。例如，我定义了 2 个模型：

```
var user = new UserModel({id:1});
user.fetch();
var place = new PlaceModel({id:1});
place.fetch(); 
```

现在我想渲染一个依赖于这两个模型的视图：

```
var home = new House({owner: user, address: place});
home.render() 
```

在确定所有模型都已加载之前，我不想渲染视图。
什么是正确的方法来确保在我渲染之前两者都被`user`提取？`place``home`

我目前正在使用顺序过程：

```
user.bind("change", function() {place.fetch();});
place.bind("change", function() {home.render();});
user.fetch(); 
```

但是随着依赖项的增长，这变得笨拙，我觉得必须有更好的方法......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T21:56:38.670

Backbone`fetch`使用 jQuery 进行 AJAX 调用，并且像普通`$.ajax`调用一样，返回一个[jQuery Deferred](http://api.jquery.com/category/deferred-object/)对象。

这意味着等待多个调用完成可以非常优雅地使用 `$.when`：

```
var place = new PlaceModel({id:96});
var user = new UserModel({id:2458});
var home = new House({owner: user, address: place});

//both .fetch() calls return a promise
//when waits for promises to be fulfilled (or rejected)
$.when(place.fetch(), user.fetch())
  .done(home.render);
  .fail(showError); 
```

*编辑：此答案的早期版本声称 Backbone.localStorage 不返回延迟，但确实如此，因此此解决方案也适用于该插件。*

# asp.net - Ajax 更新进度中的消息快速消失

> ID：13809539
> 
> 赞同：1
> 
> 时间：2012-12-10T21:27:01.693
> 
> 标签：asp.net, ajax

我正在尝试在我的详细信息视图中应用更新进度模板，一切正常，但更新进度很快显示并立即消失。有没有办法以慢动作显示消息，以便用户阅读。我试图放慢速度，让用户有机会阅读它。我正在将 Display After 属性从 50 更改为 10，但消息仍然很快消失。谢谢

```
 <asp:UpdatePanel ID="UpdatePanel2" runat="server">
        <ContentTemplate>
            <asp:UpdateProgress ID="UpdateProgress1" runat="server" DynamicLayout="true" DisplayAfter="10" >
            <ProgressTemplate>
            Your changes has been saved successfully….. 
            </ProgressTemplate>
            </asp:UpdateProgress>

<asp:DetailsView ID=1222

......

 </ContentTemplate>
        </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:03:26.693

`DisplayAfter`属性用于设置显示 ProgressTemplate的*时间。*如果我说得对，您想延迟消息出现在屏幕上的时间，那么您可以尝试[`System.Threading.Thread.Sleep`](http://msdn.microsoft.com/en-us/library/d00bd51t.aspx)在操作逻辑中添加方法来延迟消息时间。

除此之外，另一种方法是使用[`beginRequest`](http://msdn.microsoft.com/en-us/library/bb397432%28v=vs.100%29.aspx)事件并将其添加[`setTimeout()`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout?redirectlocale=en-US&redirectslug=window.setTimeout)到其中。

# python - Python - 按字母顺序排列单词

> ID：13809542
> 
> 赞同：10
> 
> 时间：2012-12-10T21:27:10.863
> 
> 标签：python, list, range, alphabetical

程序必须打印按字母顺序排列的 8 个元素中最后一个的名称。可以通过代码以任何方式输入名称/单词。我想我应该在`in range()`这里使用列表。我有一个想法，将输入名称的第一个/第二个/第三个/...字母与前一个字母的字母进行比较，然后将其放在列表的末尾或前一个的前面（取决于比较)，然后重复下一个名称。最后，程序将打印列表的最后一个成员。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T21:31:17.537

Python 的字符串比较默认是词法的，所以你应该能够调用`max`它并摆脱它：

```
In [15]: sentence
Out[15]: ['this', 'is', 'a', 'sentence']
In [16]: max(sentence)
Out[16]: 'this' 
```

当然，如果您想手动执行此操作：

```
In [16]: sentence
Out[16]: ['this', 'is', 'a', 'sentence']

In [17]: answer = ''

In [18]: for word in sentence:
   ....:     if word > answer:
   ....:         answer = word
   ....:         

In [19]: print answer
this 
```

或者你可以对你的句子进行排序：

```
In [20]: sentence
Out[20]: ['this', 'is', 'a', 'sentence']

In [21]: sorted(sentence)[-1]
Out[21]: 'this' 
```

或者，倒序排序：

```
In [25]: sentence
Out[25]: ['this', 'is', 'a', 'sentence']

In [26]: sorted(sentence, reverse=True)[0]
Out[26]: 'this' 
```

但是如果你想完全手动（这太痛苦了）：

```
def compare(s1, s2):
    for i,j in zip(s1, s2):
        if ord(i)<ord(j):
            return -1
        elif ord(i)>ord(j):
            return 1
    if len(s1)<len(s2):
        return -1
    elif len(s1)>len(s2):
        return 1
    else return 0

answer = sentence[0]
for word in sentence[1:]:
    if compare(answer, word) == -1:
        answer = word

# answer now contains the biggest word in your sentence 
```

如果您希望这与大小写无关，请务必先调用`str.lower()`您`word`的 s ：

```
sentence = [word.lower() for word in sentence] # do this before running any of the above algorithms 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T21:31:54.260

使用`sort()`方法。

```
strings = ['c', 'b', 'a']
strings.sort()
print strings 
```

输出将是，

```
['a', 'b', 'c'] 
```

如果你想要最后一个，你可以使用该`max()`方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-10T21:47:42.183

如上一个答案所述，字符串比较默认情况下是词法的，因此`min()`可以`max()`使用。要同时处理大写和小写单词，可以指定`key=str.lower`. 例如：

```
s=['This', 'used', 'to', 'be', 'a', 'Whopping', 'Great', 'sentence']
print min(s), min(s, key=str.lower)
# Great a

print max(s), max(s, key=str.lower)
# used Whopping 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-10T21:40:44.370

如果你有大写单词和小写单词的混合，你可以这样做：

```
from string import capwords     

words = ['bear', 'Apple', 'Zebra','horse']

words.sort(key = lambda k : k.lower())

answer = words[-1] 
```

结果：

```
>>> answer
'Zebra'
>>> words
['Apple', 'bear', 'horse', 'Zebra'] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-09T15:42:18.373

我会这样做。

1.  **定义字符串：**为了参数，让我们说字符串已经预定义。

    ```
    sentence = "This is the sentence that I need sorted" 
    ```

2.  **使用`split()`方法：**该方法从字符串`split()`中返回一个“单词”列表。`sentence`我在这里松散地使用术语“单词”，因为该方法没有“单词”的概念，它只是通过将`sentence`字符串解析为由空格分隔的字符并将这些字符作为列表中的离散项输出来将其分隔为一个列表。此列表尚未按字母顺序排列。

    ```
    split_sentence = sentence.split() 
    ```

3.  **使用`sorted`函数：** sorted 函数返回按字母顺序排列的`split_sentence`列表版本。

    ```
     sorted_sentence = sorted(split_sentence) 
    ```

4.  **打印列表中的最后一个元素：**

    ```
    print(sorted_sentence[-1]) 
    ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-10T21:34:40.213

In python the method sort() sorts all strings alphabetically so you can use that function.

You can make a list of all your words and then :

```
 listName.sort() 
```

This would result a alphabetically sorted list.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-06T11:36:51.280

只需使用以下内容：

```
max(sentence.lower().split()) 
```

# arm - Busybox 交叉编译到 arm 时出错

> ID：13809545
> 
> 赞同：2
> 
> 时间：2012-12-10T21:27:14.687
> 
> 标签：arm, cross-compiling, raspberry-pi

我正在尝试使用 buildroot 2012.11 在我的 x86_64 桌面上为 arm 编译busybox。
我认为我的 buildroot 构建配置是正确的：

出于可读性和间距的原因，该文件位于 pastebin 上：http: [//pastebin.com/tSZvcEqe](http://pastebin.com/tSZvcEqe)

尽管如此，当我尝试编译时，我得到了这个错误（显然“rlimit-fsize”系统变量有问题。

```
 CC      loginutils/passwd.o
loginutils/passwd.c: In function ‘passwd_main’:
loginutils/passwd.c:104:16: error: storage size of ‘rlimit_fsize’ isn’t known
loginutils/passwd.c:188:2: warning: implicit declaration of function ‘setrlimit‘ [-Wimplicit-function-declaration]
loginutils/passwd.c:188:12: error: ‘RLIMIT_FSIZE’ undeclared (first use in this function)
loginutils/passwd.c:188:12: note: each undeclared identifier is reported only once for each function it appears in
loginutils/passwd.c:104:16: warning: unused variable ‘rlimit_fsize’ [-Wunused-variable]
make[1]: *** [loginutils/passwd.o] Error 
make: *** [loginutils] Error 2 
```

以下是busybox构建配置文件：

```
#
# Automatically generated make config: don't edit
# Busybox version: 1.20.2
# Mon Dec 10 21:45:20 2012
#
CONFIG_HAVE_DOT_CONFIG=y

#
# Busybox Settings
#

[...]

#
# Login/Password Management Utilities
#
CONFIG_ADD_SHELL=y
CONFIG_REMOVE_SHELL=y
CONFIG_FEATURE_SHADOWPASSWDS=y
CONFIG_USE_BB_PWD_GRP=y
CONFIG_USE_BB_SHADOW=y
CONFIG_USE_BB_CRYPT=y
CONFIG_USE_BB_CRYPT_SHA=y
CONFIG_ADDUSER=y
CONFIG_FEATURE_ADDUSER_LONG_OPTIONS=y
# CONFIG_FEATURE_CHECK_NAMES is not set
CONFIG_FIRST_SYSTEM_ID=100
CONFIG_LAST_SYSTEM_ID=999
CONFIG_ADDGROUP=y
CONFIG_FEATURE_ADDGROUP_LONG_OPTIONS=y
CONFIG_FEATURE_ADDUSER_TO_GROUP=y
CONFIG_DELUSER=y
CONFIG_DELGROUP=y
CONFIG_FEATURE_DEL_USER_FROM_GROUP=y
CONFIG_GETTY=y
CONFIG_LOGIN=y
# CONFIG_LOGIN_SESSION_AS_CHILD is not set
# CONFIG_PAM is not set
CONFIG_LOGIN_SCRIPTS=y
CONFIG_FEATURE_NOLOGIN=y
CONFIG_FEATURE_SECURETTY=y
CONFIG_PASSWD=y
# CONFIG_FEATURE_PASSWD_WEAK_CHECK is not set
CONFIG_CRYPTPW=y
CONFIG_CHPASSWD=y
CONFIG_FEATURE_DEFAULT_PASSWD_ALGO="des"
CONFIG_SU=y
CONFIG_FEATURE_SU_SYSLOG=y
CONFIG_FEATURE_SU_CHECKS_SHELLS=y
CONFIG_SULOGIN=y
CONFIG_VLOCK=y

[...] 
```

除此之外，主机系统是最新的 archlinux x86_64 桌面 Linux samhildanach 3.6.9-1-ARCH #1 SMP PREEMPT Tue Dec 4 08:04:10 CET 2012 x86_64 GNU/Linux

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T22:32:59.043

好的，在这里找到答案：http: [//lists.busybox.net/pipermail/busybox/2012-May/077766.html](http://lists.busybox.net/pipermail/busybox/2012-May/077766.html)

只需在消息中应用补丁，或编辑`include/libbb.h`它以使其包含（它应该在顶部有一行，在其他包含之间，说`#include <sys/resource.h>`）谢谢你的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:11:10.083

该问题已通过提交[http://git.buildroot.net/buildroot/commit/package/busybox/busybox-1.20.2/busybox-1.20.2-sys-resource.patch?id=6fce747d08437fc35d67b69631254faf3982db69](http://git.buildroot.net/buildroot/commit/package/busybox/busybox-1.20.2/busybox-1.20.2-sys-resource.patch?id=6fce747d08437fc35d67b69631254faf3982db69)在 Buildroot 中修复。此提交是去年 12 月发布的 Buildroot 2012.11 版本的一部分。

# postgresql - 作为 PostgreSQL 查询的一部分，如何将整数转换为字符串？

> ID：13809547
> 
> 赞同：173
> 
> 时间：2012-12-10T21:27:19.023
> 
> 标签：postgresql, postgresql-9.1

作为 PostgreSQL 查询的一部分，如何将整数转换为字符串？

因此，例如，我需要：

```
SELECT * FROM table WHERE <some integer> = 'string of numbers' 
```

where`<some integer>`的长度可以是 1 到 15 位。

* * *

## 回答 #1

> 赞同：190
> 
> 时间：2012-12-10T21:32:32.423

由于该数字最多为 15 位，因此您需要转换为 64 位（8 字节）整数。试试这个：

```
SELECT * FROM table
WHERE myint = mytext::int8 
```

`::`cast 运算符具有历史意义，但很方便。Postgres 也符合 SQL 标准语法

```
myint = cast ( mytext as int8) 
```

* * *

如果您有要与 比较的文字文本`int`，请将其`int`转换为文本：

```
SELECT * FROM table
WHERE myint::varchar(255) = mytext 
```

* * *

## 回答 #2

> 赞同：160
> 
> 时间：2016-02-10T10:53:36.077

您可以通过这种方式将整数转换为字符串

```
intval::text 
```

所以在你的情况下

```
SELECT * FROM table WHERE <some integer>::text = 'string of numbers' 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2018-08-09T14:35:56.917

你可以这样做：

```
SELECT * FROM table WHERE cast(YOUR_INTEGER_VALUE as varchar) = 'string of numbers' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-04-14T06:50:01.390

如果某个可以存储为字符串的整数包含小数点，并且您想要将小数与小数进行比较，那么下面会有所帮助

```
select NULLIF('105.0', '')::decimal

SELECT * FROM table WHERE NULLIF('105.0', '')::decimal = 105.0 
```

以下不会转换

```
select NULLIF('105.0', '')::int

select NULLIF('105.0', '')::integer 
```

对于这个问题，您将只是过去

```
select 105.3::text 
```

# iphone - 如何检查 vDSP 函数是否在 neon 上运行标量或 SIMD

> ID：13809552
> 
> 赞同：2
> 
> 时间：2012-12-10T21:27:37.463
> 
> 标签：iphone, ios, neon, accelerate-framework, vdsp

我目前正在使用 vDSP 框架中的一些函数，尤其是 vDSP_conv，我想知道是否有任何方法可以检查该函数是否调用标量模式或在霓虹处理器上处理 SIMD。
该函数的[文档](https://developer.apple.com/library/mac/documentation/Accelerate/Reference/vDSPRef/Reference/reference.html#//apple_ref/doc/uid/TP40009464-CH20-SW1)提到了一些必须满足或调用标量模式的 power-pc-architecture 标准。现在我既不知道这些标准是否也适用于 iphone，也不知道如何检查我的函数是否调用标量模式或在霓虹灯上正常运行。

有没有办法检查这个？
谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T15:26:25.677

NEON 代码用于 vDSP_conv 实现。它在某些情况下使用，而在其他情况下不使用。

我们（产生 vDSP 的 Vector and Numerics Group）没有公布关于哪些函数使用 NEON 的标准，部分原因是有许多复杂的因素：每个调用的细节（跨度、长度和多个参数的对齐方式）、处理器模型执行代码和软件版本。

如果您对特定案例有疑问，我也许可以进行调查。

您是出于好奇而询问，还是表现不符合您的预期？一般来说，潜在的问题是实现的执行速度有多快以及它是否会更好。SIMD 可能是其中的一部分，但它不是实际目标。

更新以解决以下评论：

调查最近 iOS 的源代码，看起来在进行关联时获取 SIMD 代码所需的只是在具有 NEON 的处理器上执行并将所有步幅设置为 1。但是，如果地址是，该代码专门用于使用对齐提示对齐，因此如果您将信号、滤波器和输出地址安排为 16 字节的倍数，您可能会在某些处理器型号上获得更好的性能。如果可以，请使用 8 的倍数作为滤芯数量，但也可以使用 4 的倍数。

不幸的是，代码不是 O(n•log(n)); 它使用直接算术而不是 FFT 实现，所以它是 O(n ² )。通常，它设计用于较短的长度，适合直接算术。如果相关的 FFT 算法对您有帮助，请在[https://bugreport.apple.com](https://bugreport.apple.com)提交功能请求。

无论使用哪种算法，如果您想要与长度无关的相同信息，则较短的长度并不是更好。这是因为，如果您处理较短的长度，则必须以各种组合处理更多的长度，以获得相同的信息。我希望设计是找出您需要的长度，以便相关性产生您需要的信息，然后使用该长度而不细分它。

# wordpress - 在 Wordpress 和 Gravity Form 中上传期间重命名文件

> ID：13809555
> 
> 赞同：0
> 
> 时间：2012-12-10T21:27:51.050
> 
> 标签：wordpress

重命名文件按照此处的说明[在 Wordpress 中上传期间重命名文件](https://stackoverflow.com/questions/13751377/rename-files-during-upload-within-wordpress#comment18984378_13751828)

`/upload`在我的场景中，所有文件都将通过页面 ( )上的重力形式上传。

这种方法是命名每个文件`Upload.mp3`而不是`Post Name.mp3`.

> ![自定义字段值](../Images/673bd638e84344f344ae6aea37f293da.png)

> ![永久链接](../Images/cd47794ce0003b556eed6242de05c205.png)

可以修改此方法以在我的场景中工作吗？

# php - 如何使用 pspell API 获取支持的语言/词典列表？

> ID：13809560
> 
> 赞同：2
> 
> 时间：2012-12-10T21:28:05.400
> 
> 标签：php, aspell, pspell

[法术](http://php.net/manual/en/book.pspell.php)

有没有办法使用 PHP API 获取 pspell 支持的字典数组，最好是完整的人类可读名称？

目前我正在这样做：

```
$dicts = explode(PHP_EOL,rtrim(`aspell dicts`)); 
```

但这仍然没有给我人性化的版本，（例如，`en_CA`可能是“英语 - 加拿大”）

* * *

# 解决方案

这是我想出的：

```
$dicts = explode(PHP_EOL,rtrim(`aspell dicts`));
$ltr = array();
foreach($dicts as $dict) {
    if(preg_match('`^([a-z]+)$`',$dict,$m)) {
        $lang = _iso639_1_to_lang_name($dict) ?: $dict;
    } elseif(preg_match('`^([a-z]+)_([A-Z]+)$`',$dict,$m)) {
        $lang = (_iso639_1_to_lang_name($m[1]) ?: $m[1]).' - '.(_country_code_to_adjectival($m[2])?:$m[2]);
    } elseif(preg_match('`^([a-z]+)_([A-Z]+)-(.*)$`',$dict,$m)) {
        $lang = (_iso639_1_to_lang_name($m[1]) ?: $m[1]).' - '.(_country_code_to_adjectival($m[2])?:$m[2]).' - '.ucwords(str_replace('_',' ',$m[3]));
    } elseif(preg_match('`^([a-z]+)-(.*)$`',$dict,$m)) {
        $lang = (_iso639_1_to_lang_name($m[1]) ?: $m[1]).' - '.ucwords(str_replace('_',' ',$m[2]));
    } else {
        $lang = $dict;
    }
    $ltr[$dict] = $lang;
} 
```

这些函数只是根据我从 Wikipedia 上抓取的数据从 ISO 代码中查找全名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:33:47.857

你的意思是找出你的系统上有哪些字典？pspell 只是*GNU aspell*库的一个非常薄的包装器。它支持 aspell 库支持的任何内容，但不幸的是，它不提供列出所有字典的方法。如果添加了该功能，那就太好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:45:48.680

您必须使用 PHP 文档中的 locale_parse 及其详细信息：

[http://php.net/manual/en/locale.parselocale.php](http://php.net/manual/en/locale.parselocale.php)

# php - 如何通过 GROUP BY 在不同的表中显示 SQL 查询

> ID：13809562
> 
> 赞同：0
> 
> 时间：2012-12-10T21:28:13.107
> 
> 标签：php, sql, wordpress, foreach

好的，所以我的 SQL 查询是：

```
$image_results = $wpdb->get_results('SELECT * FROM uploaded_images GROUP BY album_title') ; 
```

我现在要做的是为每个不同的 *album_title* 输出一组不同的结果，在标签中输出专辑标题，然后显示具有该专辑标题的项目列表。

这是我到目前为止所拥有的：

```
<?php foreach ($image_results as $result => $coll):?>
    <h4><?php echo $coll->album_title;?></h4>
    <?php foreach ( $coll->file_name as $i => $row ) : ?>
         <p><img src="http://example.com/<?php echo  $row->file_name; ?>"/></p>
    <?php endforeach; ?>
<?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:49:48.860

在您的问题更新后，我认为这就是您正在寻找的。请注意，我使用`ORDER BY`了而不是`GROUP BY`. `SUM`当使用,`AVG`或其他聚合函数时使用分组。这可以在一个循环中全部处理：

```
$image_results = $wpdb->get_results('SELECT * FROM uploaded_images ORDER BY album_title');
$curTitle = '';
foreach($image_results as $result => $col) {
    if($curTitle !== $col['album_title']) {
        $curTitle = $col['album_title'];
        echo "<h4>$curTitle</h4>";
    }
    echo '<p><img src="' . $col['file_name'] . '" /></p>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:41:45.570

简单的方法：

```
$album_titles = array();
$image_results = $wpdb->get_results('SELECT * FROM uploaded_images GROUP BY album_title') ; 
foreach ($image_results as $result){
   $album_titles[ $result['album_title'] ][] = $result;
}

foreach( $album_titles as $title -> $images ){
 echo "<h4>".$title."</h4>";
   foreach( $images as $image ){
      echo "<br/>".$image['file_name'];
   }
} 
```

所以你选择它，制作一个标题数组并输出具有相同标题的所有内容。

# mongodb - 处理 MongoDB 架构更改

> ID：13809565
> 
> 赞同：1
> 
> 时间：2012-12-10T21:28:56.200
> 
> 标签：mongodb, mongodb-.net-driver, mongodb-query

您如何处理生产中的架构更改？

假设我在我的 C# 项目中篡改了一些类，添加了一个由 Dictionary (Key(UInt16),Value(UInt16)) 组成的复杂属性，而 value 有一个默认值，一个整数。您将如何将其添加到当前生产环境中的 MongoDB 实例中？

C# 示例：我将此字典添加到现有类（这显然反映在 MongoDB 作为一个集合）：

```
public Dictionary<SomeEnum, object> SomeSettings = new Dictionary<SomeEnum, object>()
{
 { SomeEnum.BGColor, "#FFFFFF" }, //White
 { SomeEnum.QRColor, "#000000" }, //Black
 { SomeEnum.LogoSize, (UInt16)100 }, //White
 { SomeEnum.MemberDetailsColor, "#000000" }, //Black
 { SomeEnum.BottomTextColor, "#000000" }, //Black
 { SomeEnum.ShowDecreaseButton, true }
}; 
```

SomeEnum 一个 UInt16 类型的枚举，这整个字典是一个全新的字段，我想使用这些默认值添加到现有集合中。你会怎么做？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:19:57.417

这似乎是一次性操作，因此您可以通过 mongodb shell 来完成。登录到您的 mongodb 服务器（或 RP 主服务器，如果您使用的是 ReplicaSet）。

```
use your_db
default_dict = {
      uint16_key_a : uint16_value a,
      uint16_key_b : uint16_value b,
      ...
}
db.you_collection.update({},{ "$set" : { "your_brand_new_field" :default_dict} },false,true) 
```

更新命令将每个文档的 _your_brand_new_field_ 字段设置为 _default_dict_（{} 查询匹配所有内容）。希望这是你需要知道的。

# javascript - jquery.validate.unobtrusive：是否有可能有一个包含唯一错误的验证摘要列表？

> ID：13809566
> 
> 赞同：0
> 
> 时间：2012-12-10T21:29:01.563
> 
> 标签：javascript, jquery, asp.net-mvc-4, jquery-validate

我有一个表，其中包含所需的不同输入元素。当我现在不选择 3 个选择列表中的一个项目时，我收到了 3 次相同的错误消息。 ![在此处输入图像描述](../Images/07424e43d6d3bc642c01c273aac98e31.png)

JavaScript：

```
$("#btnSubmit").click(function (e) {
    e.preventDefault();
    var form = $(this).closest("form");

    if (form.valid()) {
        var data = form.serialize();
        var url = form.attr("action");

        $.ajax({
            url: url,
            data: data,
        });
    }
}); 
```

表格：

```
<form method="post" id="simpleForm" action="/MvcApplication4/Home/PostData" novalidate="novalidate">
    <table class="grid">
        <thead>
            <tr>
                <th>Id</th>
                <th>Name</th>
                <th>Description</th>
                <th>DropDown</th>
            </tr>
        </thead>
        <tbody>
            <tr class="gridrow">
                <td>
                    <input type="hidden" value="c590fea7-54cf-49f7-8d41-c6db0095fd90" autocomplete="off" name="list.index"><input type="hidden" value="1" name="list[c590fea7-54cf-49f7-8d41-c6db0095fd90].Id" id="list_c590fea7-54cf-49f7-8d41-c6db0095fd90__Id" data-val-required="The Id field is required." data-val-number="The field Id must be a number." data-val="true">
                    1
                </td>
                <td>
                    <input type="text" value="Name1" name="list[c590fea7-54cf-49f7-8d41-c6db0095fd90].Name" id="list_c590fea7-54cf-49f7-8d41-c6db0095fd90__Name" data-val-required="The Name field is required." data-val="true" class="valid"></td>
                <td>
                    <input type="text" value="bla1" name="list[c590fea7-54cf-49f7-8d41-c6db0095fd90].Description" id="list_c590fea7-54cf-49f7-8d41-c6db0095fd90__Description" data-val-required="The Description field is required." data-val="true" class="valid">
                </td>
                <td>
                    <select name="list[c590fea7-54cf-49f7-8d41-c6db0095fd90].SelectedItem" id="list_c590fea7-54cf-49f7-8d41-c6db0095fd90__SelectedItem" data-val-required="The SelectedItem field is required." data-val="true" class="input-validation-error">
                        <option value="">Choose a value</option>
                        <option value="1">Wert1</option>
                        <option value="2">Wert2</option>
                        <option value="3">Wert3</option>
                    </select></td>
            </tr>
            <tr class="gridrow_alternate">
                <td>
                    <input type="hidden" value="febf58eb-a55e-4e4a-8460-ec5473b44bd6" autocomplete="off" name="list.index"><input type="hidden" value="2" name="list[febf58eb-a55e-4e4a-8460-ec5473b44bd6].Id" id="list_febf58eb-a55e-4e4a-8460-ec5473b44bd6__Id" data-val-required="The Id field is required." data-val-number="The field Id must be a number." data-val="true">
                    2
                </td>
                <td>
                    <input type="text" value="Name2" name="list[febf58eb-a55e-4e4a-8460-ec5473b44bd6].Name" id="list_febf58eb-a55e-4e4a-8460-ec5473b44bd6__Name" data-val-required="The Name field is required." data-val="true" class="valid"></td>
                <td>
                    <input type="text" value="bla2" name="list[febf58eb-a55e-4e4a-8460-ec5473b44bd6].Description" id="list_febf58eb-a55e-4e4a-8460-ec5473b44bd6__Description" data-val-required="The Description field is required." data-val="true" class="valid">
                </td>
                <td>
                    <select name="list[febf58eb-a55e-4e4a-8460-ec5473b44bd6].SelectedItem" id="list_febf58eb-a55e-4e4a-8460-ec5473b44bd6__SelectedItem" data-val-required="The SelectedItem field is required." data-val="true" class="input-validation-error">
                        <option value="">Choose a value</option>
                        <option value="1">Wert1</option>
                        <option value="2">Wert2</option>
                        <option value="3">Wert3</option>
                    </select></td>
            </tr>
            <tr class="gridrow">
                <td>
                    <input type="hidden" value="68eb5fe9-4fc5-4350-b2c7-a997fd6abce6" autocomplete="off" name="list.index"><input type="hidden" value="3" name="list[68eb5fe9-4fc5-4350-b2c7-a997fd6abce6].Id" id="list_68eb5fe9-4fc5-4350-b2c7-a997fd6abce6__Id" data-val-required="The Id field is required." data-val-number="The field Id must be a number." data-val="true">
                    3
                </td>
                <td>
                    <input type="text" value="Name3" name="list[68eb5fe9-4fc5-4350-b2c7-a997fd6abce6].Name" id="list_68eb5fe9-4fc5-4350-b2c7-a997fd6abce6__Name" data-val-required="The Name field is required." data-val="true" class="valid"></td>
                <td>
                    <input type="text" value="bla3" name="list[68eb5fe9-4fc5-4350-b2c7-a997fd6abce6].Description" id="list_68eb5fe9-4fc5-4350-b2c7-a997fd6abce6__Description" data-val-required="The Description field is required." data-val="true" class="valid">
                </td>
                <td>
                    <select name="list[68eb5fe9-4fc5-4350-b2c7-a997fd6abce6].SelectedItem" id="list_68eb5fe9-4fc5-4350-b2c7-a997fd6abce6__SelectedItem" data-val-required="The SelectedItem field is required." data-val="true" class="input-validation-error">
                        <option value="">Choose a value</option>
                        <option value="1">Wert1</option>
                        <option value="2">Wert2</option>
                        <option value="3">Wert3</option>
                    </select></td>
            </tr>
        </tbody>
    </table>
    <input type="submit" id="btnSubmit" value="submit">
    <div data-valmsg-summary="true" class="validation-summary-errors">
        <ul>
            <li>The SelectedItem field is required.</li>
            <li>The SelectedItem field is required.</li>
            <li>The SelectedItem field is required.</li>
        </ul>
    </div>
</form> 
```

脚本：

```
<script type="text/javascript" src="~/Scripts/jquery-1.8.3.js"></script>
<script type="text/javascript" src="~/Scripts/jquery.validate.js"></script>
<script type="text/javascript" src="~/Scripts/jquery.validate.unobtrusive.js"></script> 
```

我想显示如下消息：

> “要提交表单，您必须为所有下拉列表选择一个值。”

并且此消息应显示**一次**而不是 3 次。文本框也是如此。

jsFiddle 演示：http: [//jsfiddle.net/6ZQQ2/1/](http://jsfiddle.net/6ZQQ2/1/)

**我现在的解决方案：**

```
function onErrors(event, validator) {  // 'this' is the form element
    var container = $(this).find("[data-valmsg-summary=true]"),
        list = container.find("ul");

    if (list && list.length && validator.errorList.length) {
        list.empty();
        container.addClass("validation-summary-errors").removeClass("validation-summary-valid");

        var uniqueList = {};
        $.each(validator.errorList, function () {
            uniqueList[this.message] = this.message;
        });

        for (key in uniqueList) {
            $("<li />").html(uniqueList[key]).appendTo(list);
        }
    }
} 
```

所以我只是更改了 jquery.validate.unobtrusive.js 中的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:54:56.730

我喜欢您的解决方案@Rookian，但您不想更改 jquery.validate.unobtrusive.js

您可以收听 invalid-form.validate 并将您的实现放在那里

```
form.bind("invalid-form.validate", function (evt, validator) {
    var container = $(this).find("[data-valmsg-summary=true]"),
    list = container.find("ul");

    if (list && list.length && validator.errorList.length) {
        list.empty();
        container.addClass("validation-summary-errors").removeClass("validation-summary-valid");

        var uniqueList = {};
        $.each(validator.errorList, function () {
            uniqueList[this.message] = this.message;
        });

        for (key in uniqueList) {
            $("<li />").html(uniqueList[key]).appendTo(list);
        }
    }
}); 
```

我在 mvc3 中做了类似的事情，希望它也适用于你。

# xcode - 为什么新类不会出现在 Interface Builder 的 Identity Inspector/Custom Class 中？

> ID：13809567
> 
> 赞同：13
> 
> 时间：2012-12-10T21:29:02.657
> 
> 标签：xcode, interface-builder

我在 Xcode 4.5 中遇到重复问题，想寻求帮助/建议。

一直在创建一个新类，BIDSwitchViewController，它是 UIViewController 的子类。当我去 Identity Inspector 布局 .xib 文件时，我当然想将它所属的类更改为 BIDSwitchViewController，以便我可以布局我的对象并建立我的连接。

但是 BIDSwitchViewController 没有出现在 Identity Inspector 中自定义类的下拉列表中。因此，我将“BIDSwitchViewController”硬编码到文本框中，但这并没有奏效。

我做错了什么，我能做些什么来解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T06:37:34.517

我解决这个问题的方法是重新启动我的 Xcode！然后一切正常。试一试吧！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-20T21:33:25.607

如果重启不能解决...

1.  单击其他文件
2.  然后回到你的`.Storyboard`or `.XIB`。

...或者尝试在新标签中打开您的`.Storyboard`或。`.XIB`基本上你只想强制`IB`重新加载和重新渲染。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-15T03:19:25.943

经过两天的挫折并**删除了项目然后删除了 Xcode 本身**，直到我记得我的 viewController 的继承，我才找到任何解决方案，它是 table storyboard 视图的 viewController，但它确实继承自 UIViewController 而不是 UITableViewController。就在我纠正时，它出现了。

**只需确保您的视图与相同的故事板视图具有正确的继承类。**

```
class AddItemViewController: UITableViewController 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T07:45:00.707

是Xcode的问题，你应该在选择table view和table view controller之间切换（在你的实践中是文件的所有者），新添加的文件名会在下拉列表中弹出。我已经尝试过了，它已经完成了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-28T00:12:36.623

在选择类之前，请确保您在占位符中选择了“文件所有者”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-04T02:18:14.693

我也一直在努力解决同样的问题，正如 Chanson Yan 所说，单击表视图或任何视图，然后单击主视图控制器（文件所有者），然后再次检查下拉菜单，它应该会出现。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-17T00:57:11.323

**SpecialViewController.h**和**SpecialViewController.m**可能看起来是一个 C 文件和 C 头文件。

我试过了，右键单击**SpecialViewController.h**然后***显示文件检查器***。

然后将***Type***从**C-source**切换到***Objective-C*** source ，然后它对我有用。

 *** * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-06T05:58:43.050

如果有问题的自定义类不是您要关联的类类型的子类，它不会自动填充到 Identity Inspector 中。也就是说，对于视图控制器，自定义类应该是 UIViewController。对于表格视图单元格，它应该是 UITableViewCell 的子类。**

# javascript - 如何捕获 DIV 的 css 属性的高度？例如“高度”

> ID：13809569
> 
> 赞同：0
> 
> 时间：2012-12-10T21:29:11.563
> 
> 标签：javascript, jquery

如何捕获 DIV 的 css 属性的高度？例如“高度”。这是HTML。我正在使用 jquery 插件高度

```
<!doctype html>  
<html lang="en">  
<head>  
<meta charset="utf-8">  
<title>The HTML5 Herald</title>  

<script type='text/javascript' src='http://code.jquery.com/jquery-1.6.1.min.js'>     </script>
<script type='text/javascript' src='http://orlandovisitornetwork.com/wp- includes/js/jquery/jquery.js?ver=1.6.1'></script>
<script type="text/javascript"></script>

</head>  

<body>  

    <div id="main" class='test'>
    This is just a test
    </div>

<script type="text/javascript">  
window.onload=function()
  {
    var height = $("test").height();

          if (height > 0px)
        {
          alert("DIV Height is" + 'height');
        }
  };
</script>
</body>  
</html> 
```

这是CSS。当然这是非常简化的版本。

```
.test {
height: 500px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:31:20.493

这`window.getComputedStyle`就是为了。在你的情况下：

```
var height = window.getComputedStyle(document.getElementById("main")).height 
```

（ID 比类名更可靠。如果只有一个类名，则不应使用类名）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T21:31:36.957

要选择一个类，选择器需要以句点开头，如下所示。并且变量不应该被引用：

```
$(function() {
    var height = $('.test').height();
    if (height > 0) {
          alert("DIV Height is : " + height);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T21:42:47.100

```
<script type="text/javascript">  
window.onload=function()
  {
    var height = $("test").height();

      if (height > 0px)
    {
      alert("DIV Height is" + 'height');
    }
  };
</script> 
```

那里要小心。该方法`height()`返回一个数字，您将它与 进行比较`0px`，没有引号，它不是字符串也不是数字也不是变量，它可能评估为`null`or `undefined`。因此，您的比较永远不会成立，并且块中的代码将永远不会被执行。

该方法可能运行良好，您只是进行了错误的比较。尝试比较`height`一个数字。

# objective-c - 在多个窗口上处理视图 - 第二个窗口关闭时 removeFromSuperView 的问题

> ID：13809571
> 
> 赞同：0
> 
> 时间：2012-12-10T21:29:23.233
> 
> 标签：objective-c, xcode, cocoa, view, superview

您好，我有一个视图，当按下按钮时会显示这个视图，如果我打开第二个窗口，视图可以正常工作，我可以返回前一个窗口并使用我使用 removeFromSuperview 的视图。

但是，我的问题是，如果我关闭最后一个打开的窗口，则视图不再适用于第一个窗口，但是如果我打开一个新窗口，它会再次适用于第一个窗口。

当其中一个窗口关闭时，如何让视图继续工作？

谢谢你的帮助！

这是我正在使用的代码：

```
 -(IBAction) ShowView:(id) sender{
        [myView setHidden:FALSE];

        if ([myView isInFullScreenMode]){
            [myView exitFullScreenModeWithOptions:nil];

        }
        else{   
            [myView enterFullScreenMode:[[myView window] screen] withOptions:nil];

            for (NSView *view in [NSArray arrayWithArray:[myView subviews]]){
                [view removeFromSuperview];
                [myView addSubview:view];
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:50:51.133

您尚未指定“视图不起作用”的含义，但我认为它不会在您期望的时候出现。

如果您要显示与不同窗口相关的不同视图（即视图的副本），则每个视图都应与其窗口一起创建和销毁。

如果您只想要一个在不同窗口中显示的视图，您应该在不同的类中创建视图，例如在您的应用程序委托中。这个类应该独立于管理任何窗口的类来管理视图的内容。

# c# - 具有不同当前文件夹的相对路径中的绝对路径

> ID：13809572
> 
> 赞同：2
> 
> 时间：2012-12-10T21:29:25.100
> 
> 标签：c#, .net, path

我需要从相对路径中获取绝对路径，但是使用一个文件夹而不是执行程序集的位置来解析`"."`和`".."`. `Path.GetFullPath`不提供这样的过载。

例如，假设我有以下路径：

`..\MyOtherFolder\foo.bar`

执行程序集的文件夹是：

`c:\users\me\desktop\source\myproj\bin\debug\`

但实际上，它可以位于任何地方。

我想指定“当前”文件夹，`c:\test`以便`".."`解析为`"c:\"`.

有谁知道这是否内置在任何地方的 .NET 框架中？如果没有，我打算制作一个 Utility 方法，但我想我会先检查一下（特别是因为没有静态扩展方法......）。

编辑：

`Path.Combine`不管用。这个方法本质上所做的就是连接两个字符串。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T21:32:26.763

你有没有尝试过

```
Path.GetFullPath(Path.Combine(@"C:\test", @"..\MyOtherFolder\foo.bar")) 
```

这应该够了吧。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T21:55:30.077

```
public string FullPathRelativeTo(string root, string partialPath)
{
    string oldRoot = Directory.GetCurrentDirectory();
    try {
        Directory.SetCurrentDirectory(root);
        return Path.GetFullPath(partialPath);
    }
    finally {
        Directory.SetCurrentDirectory(oldRoot);
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-10T21:39:41.353

如果您目前在`c:\test`并且想要在`c:\MyOtherFolder\foo.bar`不知道自己`c:\test`想要做的情况下获得；

```
 Environment.CurrentDirectory = @"..\MyOtherFolder"; //navigation accepts relative path
 string fullPath = Directory.GetCurrentDirectory(); // returns full path 
```

之后，您可能希望将当前目录设置回您之前的位置。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-25T00:47:11.310

你可以做

```
new DirectoryInfo( @"..\MyOtherFolder\foo.bar" ).FullName 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-10T21:31:41.827

尝试使用[Path.Combine(...)](http://msdn.microsoft.com/en-us/library/system.io.path.combine.aspx)方法，它必须帮助你实现你想要的..

# ruby-on-rails - ActiveRecord：用 ID 初始化一个对象

> ID：13809573
> 
> 赞同：0
> 
> 时间：2012-12-10T21:28:58.553
> 
> 标签：ruby-on-rails, activerecord

我有一个简单的方法来检查现有的`User`，如果没有找到，它会创建它并且还会创建一个`Profile`对象。

由于配置文件需要`user_id`保存，如果用户不存在，我需要以某种方式使用 ID 初始化用户。

我最终得到了这样的东西，但这并不是`user_id`在初始化用户时预设的。

```
 def create_or_update_user(user)
   user_object = User.find_or_initialize_by_external_id(user['external_id'])

   if user_object.new_record?
     user_profile = user_object.build_profile(params)
   end
   user_object.save

 end 
```

知道如何在初始化用户记录时设置 ID 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:55:35.470

我不认为你可以，即使这样我认为你也不应该。`id`如果您在不创建记录的情况下分配给您的用户，`id`那么在您最终保存它时可能会有机会。

保存用户，然后构建和保存配置文件有什么问题？

# asp.net-mvc - MVC 如何创建 (10) 多个文本框并将一个参数分配给这些文本框。我也想将参数传递给我的控制器

> ID：13809575
> 
> 赞同：1
> 
> 时间：2012-12-10T21:29:42.203
> 
> 标签：asp.net-mvc, razor

```
public ActionResult Orders1(int order)
      {
                CostcoEntities1 context = new CostcoEntities1();

              var query = from   a in context.CM_Checkout_Details
                          where  a.CheckoutDetails_ID == order
                          select a;

                return View(query);
       } 
```

大家好！！我是新手，需要一些帮助。我想创建 10 个文本框来显示参考项目的详细信息。第一个文本框工作正常，但第二个文本框声明 order 参数为空。我知道这是一项简单的任务，而且我对 MVC 很陌生。请帮忙！！！我更喜欢用 html helper 来做这个（如果可能的话）

先感谢您！！！

看法

```
@using (Html.BeginForm("Orders1", "Track", FormMethod.Post))
{

   for (int i = 1; i < 11; i++)
   { 
      @i <input type="text" name="order" /><br />
   }   
       <input type="submit" value="Submit" />
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:25:00.647

我相信这将是您正在寻找的。您可以根据需要扩展 htmlAttributes。

```
 @model IEnumerable<TypeGoesHere>

    @foreach(var item in (IEnumerable<TypeGoesHere>)Model)
        {
            @Html.TextBoxFor(x=>item.SomeProperty, null,new {@name="order"})
        } 
```

# xcode - 如何复制 Mac OSX 系统图形？

> ID：13809578
> 
> 赞同：1
> 
> 时间：2012-12-10T21:30:00.173
> 
> 标签：xcode, cocoa

我希望在我的 Mac OSX 应用程序中添加功能，以在传递一系列变量值时显示类似于附加链接中的图形（Mac OSX 显示硬盘驱动器上的剩余可用空间）。

![](../Images/da69734fddd762d5591fdf430b6de62e.png)

例如，如果我有 5 个变量，A 到 E，具有以下值/百分比（A=50，B=20，C=15，D=10，E=5），我想学习如何显示这些值以这种格式以图形方式显示，其中颜色条的大小与值成比例，并且还会显示图例。

任何人都可以提供的任何示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T11:56:31.520

已解决：最后我决定学习如何使用石英做一些绘图。这是非常有益的，因为我已经实现了随着输入变量的变化而改变大小的按比例缩放的条形的预期结果。它也非常可定制。

对于任何想学习如何做到这一点的人，我强烈推荐这个[教程](http://cocoadevcentral.com/d/intro_to_quartz_two/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:53:43.943

有许多不同的方法可以实现这一目标。我会从使用 NSBox 对象开始，并给它正确的形状。接下来，我将以编程方式创建一个显示不同颜色的图像，并用另一个图像对其进行遮罩以切掉所有边缘。然后我会在框中创建一个 NSImageView 并在那里显示蒙版图像。如果你愿意，我可以添加一些代码。

编辑：

一些代码。

我已经尝试使用由 2 种颜色和透明的其余部分组成的简单静态图片。我只是将它添加到插座中，如下所示：

```
-(void) awakeFromNib{
     NSImage* img = [self maskImage:[NSImage imageNamed:@"Static image from Bundle"] withMask:[NSImage imageNamed:@"Static image mask"]];
    [imgView setImage:img]; 
```

}

maskImage:withMask: 方法如下所示：

```
- (NSImage*) maskImage:(NSImage *)image withMask:(NSImage *)maskImage {
     CGImageSourceRef sourceRef = CGImageSourceCreateWithData((__bridge CFDataRef)[maskImage TIFFRepresentation], NULL);
     CGImageRef maskRef = CGImageSourceCreateImageAtIndex(sourceRef, 0, NULL);

     sourceRef = CGImageSourceCreateWithData((__bridge CFDataRef)[image TIFFRepresentation], NULL);
     CGImageRef imageRef = CGImageSourceCreateImageAtIndex(sourceRef, 0, NULL);

     CGImageRef mask = CGImageMaskCreate(CGImageGetWidth(maskRef),
                                    CGImageGetHeight(maskRef),
                                    CGImageGetBitsPerComponent(maskRef),
                                    CGImageGetBitsPerPixel(maskRef),
                                    CGImageGetBytesPerRow(maskRef),
                                    CGImageGetDataProvider(maskRef), NULL, false);

     CGImageRef masked = CGImageCreateWithMask(imageRef, mask);
     return [[NSImage alloc] initWithCGImage:masked size:NSZeroSize]; 
```

}

对于蒙版图像，我使用了 NSBox 对象大小的简单黑白 Photoshop 图片，并将所有应该变得透明的东西涂黑。这种方法的唯一问题是 NSBox 的阴影没有被渲染。为此，您需要在蒙版中创建渐变。这实际上应该非常简单。

我一直在使用这些图片： http: [//postimage.org/gallery/ertbeca/](http://postimage.org/gallery/ertbeca/)

源图片：[http://postimage.org/image/pdgs4abop/](http://postimage.org/image/pdgs4abop/) 蒙版图片： http: [//postimage.org/image/54teikcdl/](http://postimage.org/image/54teikcdl/)

它最终看起来像这样： http: [//postimage.org/image/s8tvb5fop/](http://postimage.org/image/s8tvb5fop/)

希望有帮助。

# objective-c - __unsafe_unretained 导致消息发送到释放的实例

> ID：13809584
> 
> 赞同：1
> 
> 时间：2012-12-10T21:31:03.533
> 
> 标签：objective-c, ios, memory-management, automatic-ref-counting

我正在使用一个块来执行与网络相关的任务

当我的块完成时`UITableViewController`，我想重新加载 tableviewcontroller

```
__unsafe_unretained UITableView *unretTableView = self.tableview;

[myRequest postWithCompletion:(bool finished) {
    [unretTableView reloadData];
}]; 
```

这很好，除了如果我在请求完成之前离开（`deallocate`），`UITableViewController`我似乎指向一个已释放对象（`unretTableView`）*消息发送到已释放实例*，即使在`[UITableViewController dealloc]`我设置的方法（正在调用）中`self.tableview = nil;`

额外细节：

*   无法使用`__weak`，我的目标是 iOS 4.3 及更高版本
*   在`UITableViewController`'s`dealloc`方法中，我设置`self.tableview = nil`
*   我不想在您离开页面时取消网络请求，我希望它继续运行。
*   编辑：我也不想在块中保留 self.tableview

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:19:55.543

鉴于您的评论，我可能倾向于追求[`NSOperationQueue`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html). 这样你就可以

1.  创建背景`NSOperationQueue`；

2.  如果您的下载允许某个合理数量的同时下载，您可以设置[`maxOperationCount`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html#//apple_ref/occ/instm/NSOperationQueue/setMaxConcurrentOperationCount%3a)（或者如果您想要连续下载，请将其设置为 1）。

3.  当您启动后台作业时，您可以创建`NSOperation`对象，或者直接`NSOperationQueue`通过[`addOperationWithBlock`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html#//apple_ref/occ/instm/NSOperationQueue/addOperationWithBlock%3a). 如果您想享受检查`isCancelled`标志的能力，您可能需要执行前者。

4.  每个操作都可以在尝试更新视图控制器之前检查它是否被取消。

5.  当视图控制器被关闭时，它可以执行一个简单[`cancelAllOperations`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html#//apple_ref/occ/instm/NSOperationQueue/cancelAllOperations)的取消所有排队的操作。

这是一个随机的例子：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.queue = [[NSOperationQueue alloc] init];
    self.queue.maxConcurrentOperationCount = 4;

    // let's add 100 operations to our queue

    for (NSInteger i = 0; i < 100; i++)
    {
        NSBlockOperation *operation = [[NSBlockOperation alloc] init];
        __unsafe_unretained NSBlockOperation *weakOperation = operation; // it seems vaguely disturbing to do this with __unsafe_unretained, but given that the operation queue is taking care of this for us, I believe it's ok
        [operation addExecutionBlock:^{

            NSLog(@"Beginning operation %d", i);

            sleep(10);

            if ([weakOperation isCancelled])
                NSLog(@"Operation cancelled %d", i);
            else
            {
                // go ahead and update UI if you want
                NSLog(@"Finished operation %d", i);
            }
        }];

        [self.queue addOperation:operation];
    }
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
    [self.queue cancelAllOperations];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:39:56.563

您稍后设置的属性与块捕获的变量设置的内容无关。如果要访问该属性，则需要访问该属性：self.foo，而不是 foo。

请注意，在这种情况下您仍然必须小心，因为在块中捕获 self 会导致 self 被保留，这可能会导致保留循环。

（编辑）如果您从另一个线程更新属性，这仍然不安全。您需要某种形式的序列化结构来确保安全（NSLock、NSOperationQueue、dispatch_queue_t 等...）。我假设这不是线程化的，但以防万一，这很重要。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T21:36:46.630

尝试这个：

```
__block __unsafe_unretained UITableView *unretTableView = self.tableview; 
```

**编辑**

我不知道您使用什么框架来发布请求。但是当您使用*[myRequest postWithCompletion: yourBlock]*发布请求时，我想还有一种方法可以更改完成块，例如*myRequest.completion=nil*。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-10T21:35:10.880

Insert a sanity check.

```
__weak UITableView *table = unretTableView;
if (table) [unretTableView reloadData]; 
```

# android - android过滤自定义数组适配器并再次带回旧项目

> ID：13809585
> 
> 赞同：1
> 
> 时间：2012-12-10T21:31:05.773
> 
> 标签：android, listview, filter, android-arrayadapter

我实际上是在尝试用文本过滤我的 ListView。

如果我输入一些内容，结果会被过滤，但如果我再次删除我输入的文本，则列表为空。:(

你知道我怎么能解决这个问题吗？

这是到目前为止的代码：

```
public class ResultsArrayAdapter extends ArrayAdapter<SuchErgebnis> {

    Context myContext;
    int layoutResourceId;
    ArrayList<SuchErgebnis> ergebnisListeOriginal = null;
    ArrayList<SuchErgebnis> ergebnisListeGefiltert = null;
    private Filter filter;

    public ResultsArrayAdapter(Context context, int textViewResourceId,
            ArrayList<SuchErgebnis> objects) {
        super(context, textViewResourceId, objects);

        this.myContext = context;
        this.layoutResourceId = textViewResourceId;
        this.ergebnisListeOriginal = objects;
        this.ergebnisListeGefiltert = objects;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        ErgebnisHolder eHolder = null;
        SuchErgebnis ergebnis = ergebnisListeGefiltert.get(position);

        if (row == null) // Wird zum ersten Mal gelanden...
        {
            LayoutInflater inflater = (LayoutInflater) myContext
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            row = inflater.inflate(R.layout.ergebnis_list_item, parent, false);

            eHolder = new ErgebnisHolder();
            eHolder.eTitel = (TextView) row
                    .findViewById(R.id.ergebnis_list_item_textview_titel);
            eHolder.eInfo = (TextView) row
                    .findViewById(R.id.ergebnis_list_item_textview_info);
            eHolder.eTreffer = (TextView) row
                    .findViewById(R.id.ergebnis_list_item_textview_treffer);

            row.setTag(eHolder);
        } else { // Wurde schoneinmal geladen, Views sind noch gespeichert...
            eHolder = (ErgebnisHolder) row.getTag();
        }

        eHolder.eTitel.setText(ergebnis.titel);
        eHolder.eInfo.setText(ergebnis.info != null ? ergebnis.info : "");
        eHolder.eTreffer.setText(ergebnis.treffer != null ? ergebnis.treffer
                : "");
        row.setPadding(
                ergebnis.isChild ? Main.mFHelper
                        .getPixels(10 * ergebnis.childNumber) : 0, 0, 0, 0);

        return row;
    }

    @Override
    public Filter getFilter() {
        if (filter == null) {
            filter = new ResultFilter();
        }
        return filter;
    }

    static class ErgebnisHolder {
        TextView eTitel;
        TextView eInfo;
        TextView eTreffer;
    }

    private class ResultFilter extends Filter {

        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
            FilterResults results = new FilterResults();

            String filterText = constraint.toString().toLowerCase();
            if (filterText == null || filterText.length() == 0) {
                synchronized (this) {
                    results.values = ergebnisListeOriginal;
                    results.count = ergebnisListeOriginal.size();
                }
            } else {
                ArrayList<SuchErgebnis> gefilterteListe = new ArrayList<SuchErgebnis>();
                ArrayList<SuchErgebnis> ungefilterteListe = new ArrayList<SuchErgebnis>();
                synchronized (this) {
                    ungefilterteListe.addAll(ergebnisListeOriginal);
                }
                for (int i = 0, l = ungefilterteListe.size(); i < l; i++) {
                    SuchErgebnis m = ungefilterteListe.get(i);
                    if (m.titel.toLowerCase().contains(filterText)) {
                        gefilterteListe.add(m);
                    }
                }
                results.values = gefilterteListe;
                results.count = gefilterteListe.size();

            }

            return results;
        }

        @Override
        protected void publishResults(CharSequence constraint,
                FilterResults results) {
            ergebnisListeGefiltert = (ArrayList<SuchErgebnis>) results.values;
//          notifyDataSetChanged();
            clear();
            for (int i = 0, l = ergebnisListeGefiltert.size(); i < l; i++)
                add(ergebnisListeGefiltert.get(i));
//          notifyDataSetInvalidated();

        }

    }

} 
```

编辑：//

过滤器由一个简单的 Textwatcher 调用

```
private TextWatcher filterTextWatcher = new TextWatcher() {

    public void afterTextChanged(Editable s) {
    }

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
    }

    public void onTextChanged(CharSequence s, int start, int before,
            int count) {
        mAdapter.getFilter().filter(s);
    }

}; 
```

我通过添加到 EditText

```
etFilter.addTextChangedListener(filterTextWatcher); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T13:21:20.423

我的解决方案：

```
 public class ResultsArrayAdapter extends ArrayAdapter<SuchErgebnis> {

    Context myContext;
    int layoutResourceId;
    ArrayList<SuchErgebnis> ergebnisListeOriginal = null;
    ArrayList<SuchErgebnis> ergebnisListeGefiltert = null;
    private Filter filter;

    public ResultsArrayAdapter(Context context, int textViewResourceId,
            ArrayList<SuchErgebnis> objects) {
        super(context, textViewResourceId, objects);

        this.myContext = context;
        this.layoutResourceId = textViewResourceId;

        this.ergebnisListeOriginal = new ArrayList<SuchErgebnis>(objects);
        this.ergebnisListeGefiltert = new ArrayList<SuchErgebnis>(objects);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        ErgebnisHolder eHolder = null;
        SuchErgebnis ergebnis = ergebnisListeGefiltert.get(position);

        if (row == null) // Wird zum ersten Mal gelanden...
        {
            LayoutInflater inflater = (LayoutInflater) myContext
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            row = inflater.inflate(R.layout.ergebnis_list_item, parent, false);

            eHolder = new ErgebnisHolder();
            eHolder.eTitel = (TextView) row
                    .findViewById(R.id.ergebnis_list_item_textview_titel);
            eHolder.eInfo = (TextView) row
                    .findViewById(R.id.ergebnis_list_item_textview_info);
            eHolder.eTreffer = (TextView) row
                    .findViewById(R.id.ergebnis_list_item_textview_treffer);

            row.setTag(eHolder);
        } else { // Wurde schoneinmal geladen, Views sind noch gespeichert...
            eHolder = (ErgebnisHolder) row.getTag();
        }

        eHolder.eTitel.setText(ergebnis.titel);
        eHolder.eInfo.setText(ergebnis.info != null ? ergebnis.info : "");
        eHolder.eTreffer.setText(ergebnis.treffer != null ? ergebnis.treffer
                : "");
        row.setPadding(
                ergebnis.isChild ? Main.mFHelper
                        .getPixels(10 * ergebnis.childNumber) : 0, 0, 0, 0);

        return row;
    }

    @Override
    public Filter getFilter() {
        if (filter == null) {
            filter = new ResultFilter();
        }
        return filter;
    }

    static class ErgebnisHolder {
        TextView eTitel;
        TextView eInfo;
        TextView eTreffer;
    }

    @Override
    public int getCount() {
        return ergebnisListeGefiltert.size();
    }

    @Override
    public SuchErgebnis getItem(int position) {
        return ergebnisListeGefiltert.get(position);
    }

    private class ResultFilter extends Filter {

        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
            FilterResults results = new FilterResults();

            String filterText = constraint.toString().toLowerCase();
            if (filterText == null || filterText.length() == 0) {
                synchronized (this) {
                    results.values = ergebnisListeOriginal;
                    results.count = ergebnisListeOriginal.size();
                }
            } else {
                ArrayList<SuchErgebnis> gefilterteListe = new ArrayList<SuchErgebnis>();
                ArrayList<SuchErgebnis> ungefilterteListe = new ArrayList<SuchErgebnis>();
                synchronized (this) {
                    ungefilterteListe.addAll(ergebnisListeOriginal);
                }
                for (int i = 0, l = ungefilterteListe.size(); i < l; i++) {
                    SuchErgebnis m = ungefilterteListe.get(i);
                    if (m.titel.toLowerCase().contains(filterText)) {
                        gefilterteListe.add(m);
                    }
                }
                results.values = gefilterteListe;
                results.count = gefilterteListe.size();

            }

            return results;
        }

        @Override
        protected void publishResults(CharSequence constraint,
                FilterResults results) {

            ergebnisListeGefiltert = (ArrayList<SuchErgebnis>) results.values;
            if(results.count > 0)
            {
                notifyDataSetChanged();
            }else{
                notifyDataSetInvalidated();
            }

        }

    }
    } 
```

# mfc - 具有 UINT32 值的 CListCtrl SetItemData

> ID：13809590
> 
> 赞同：0
> 
> 时间：2012-12-10T21:30:50.460
> 
> 标签：mfc, clistctrl

我有一个`CListCtrl`并且我想存储一个 UINT32 值，但是当我阅读时它总是返回 0`GetItemData`

我有这个代码：

```
UINT CMyDialog::MyThread(LPVOID pArg)
  for (int nItem=0; nItem<50; nItem++)
  {
    UINT32 nNum=100;
    pDlg->m_listCtrl.InsertItem(0, _T("text")); // this works
    pDlg->m_listCtrl.SetItemData(nItem, nNum); // this not
   }
 }

/// this is called from a Dialog member function when a button is pressed

void CMyDialog::OnBtnClicked()
{
  UINT32 nRead=0;
  nRead=m_listCtrl.GetItemData(5);

  // nRead always returns 0
 } 
```

即使我使用 int 或 DWORD 而不是 UINT 我得到相同的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T21:52:27.220

请更加小心地发布您的代码。*使用剪切和粘贴非常*简单，没有任何借口可以一次又一次地犯错。由于您不接受很多答案，因此很难帮助您并且几乎不值得。

无论如何，我确实看到你的循环有问题。您应该`InsertItem()`像这样使用返回值：

```
UINT CMyDialog::MyThread(LPVOID pArg)
{
    for (int nItem=0; nItem<50; nItem++)
    {
        UINT32 nNum=100;
        int nIndex = pDlg->m_listCtrl.InsertItem(0, _T("text"));
        pDlg->m_listCtrl.SetItemData(nIndex, nNum);
    }
} 
```

# django - 如何区分表单集中的空表单和有界表单？

> ID：13809595
> 
> 赞同：1
> 
> 时间：2012-12-10T21:31:44.720
> 
> 标签：django, django-forms, django-templates

在模板中，我需要遍历包含有界表单和空表单的表单集，但表单集中的表单总数是固定的。我需要一种方法来区分有界表单和空表单，因为它们旨在以不同的方式呈现给用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:54:09.887

遍历您的表单集时，请检查该`is_bound`属性。

[https://docs.djangoproject.com/en/dev/ref/forms/api/#django.forms.Form.is_bound](https://docs.djangoproject.com/en/dev/ref/forms/api/#django.forms.Form.is_bound)

# drupal - 如何仅对 Drupal 7 中的自定义模块创建的节点使用自定义 CSS

> ID：13809598
> 
> 赞同：1
> 
> 时间：2012-12-10T21:31:58.690
> 
> 标签：drupal, drupal-7, drupal-theming

我在 Drupal 7 中有一个创建节点的自定义模块。我希望在呈现由我的自定义模块创建的节点之一时应用自定义 css 样式表（customstyle.css），但*仅*在呈现由我的自定义模块创建的节点之一时。

简单的解决方案（添加`stylesheets[all][] = customstyle.css`到我的自定义模块的 .info 文件）将样式表应用于*所有*页面，包括包含*不是*由我的自定义模块创建的节点的页面。我不要那个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T17:11:34.603

我假设“我的自定义模块创建的节点”意味着它们有一些特殊的节点类型。如果是这样，您可以`hook_node_view()`在模块中实现，然后`drupal_add_css()`根据节点类型或任何其他属性进行调用：

```
function mymodule_node_view($node, $view_mode) {
  if ($view_mode != 'rss') {
    if ($node->type == 'mynodetype') {
      drupal_add_css(drupal_get_path('module', 'mymodule') . '/mynodetype.css');
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:15:11.720

我会以网站建设者的方式来做。使用[Context](http://drupal.org/project/context)来定位该节点类型，然后分配响应以加载您的 CSS 文件，仅用于`.context-[node type]`定位这些页面中的特定元素。

例如，如果您的节点类型是苹果食谱，您可以使用`.context-apple-recipes`

# java - 更改 Java 中的最终字段

> ID：13809600
> 
> 赞同：1
> 
> 时间：2012-12-10T21:32:22.933
> 
> 标签：java, final

我有这样的事情：

```
class A {
    final int f = 1;
    int getF() {
        return f;
    }
}

class B extends A {} 
```

是否可以在 B 类中调用 getF() 并从中获取 0？这个最终字段可以有另一个从 1 开始的值吗？因为我有时从 getF() 得到 0 结果并且不知道会发生什么。没有覆盖或其他东西。只需调用 getF() 并得到 0。在某些情况下。有人能猜到为什么会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T21:39:41.607

我能想到的唯一允许这种情况的组合是，如果 A 之上有另一个类声明了一个由其构造函数调用的方法，并且 B 覆盖了该方法并`getF`从那里调用

```
class Super {
  public Super() {
    doInit();
  }

  protected void doInit() { /* ... */ }
}

class A extends Super {
  // f and getF as before
}

class B extends A {
  protected void doInit() {
    System.out.println(getF());
  }
} 
```

或者类似地，如果构造函数`this`在构造函数完成运行之前“泄漏”了对某个地方的引用，从而破坏了通常的 final 不变性保证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T21:35:13.837

只有给定的代码，不，除了 1 从`getF()`. 我怀疑还有更多的故事。例如，如果您`getF()`在`B`或 的子类中覆盖 ，`B`您可能会得到不同的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T21:41:06.747

这是你想要的？？

```
public class A {

final int f = 1;

int getF() {
    return f;
 }
}

public class B extends A {
public int getF() {
    return f;
}

public void setF(int f) {
    this.f = f;
}

int f;
public B(){
 f=0;
}
public static void main(String args[]) {
    B a = new B();
    System.out.println(a.getF());
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T21:57:09.317

根据您提供的信息，返回 0 是不合法的。然而，它有半合法和其他骇人听闻的方式发生。要诊断此问题，您需要做的是在您看到返回 0 的代码上放置条件停止点。我怀疑存在的结构不是您期望的结构，调试器应该向您显示结构以及为什么值为 0。

# jquery - 我需要在 if 语句中比较两个类

> ID：13809602
> 
> 赞同：2
> 
> 时间：2012-12-10T21:32:26.340
> 
> 标签：jquery

所以我有一个带有几张图片的网站，这就是我想要它做的......

如果有人单击带有类的按钮`lol`，**并且当前显示的图片具有具有相同值的类名称**- 执行某些操作。

这是我的 HTML：

```
<div class="lol">BUTTON</div>
<div class="whatever">
<img src="x" class="lol"/ >
</div> 
```

我已经在我的 CSS 中`div.lol`设置了样式。`img.lol`

这就是我认为 jQuery 的样子：

```
$(document).ready(function(){
    $('div.lol').click(function(){
        if($(this)===$('img.lol')){
            alert("LOL");
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T21:34:37.820

采用[`hasClass()`](http://api.jquery.com/hasClass/)

```
if ($(this).hasClass("lol")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T21:40:57.970

您应该为要检查的图像分配一个 ID，然后在该图像上使用 hasClass。下面的代码对我有用：

```
<div class="lol">BUTTON</div>
<div class="whatever">
<img id = "an_image" src="x" class="lol"/ >
</div>
<script type = "text/javascript">

$(document).ready(function(){
    $('div.lol').click(function(){
        if($("#an_image").hasClass("lol")){
            alert("LOL");
        }
    });
});

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T21:40:22.927

> 并且当前显示的图片具有相同值的类名

我猜您想检查该类的可见图像，`.lol`下面将执行此操作，但它将针对所有可见图像，您可能需要将其限制为某些包含元素等。

```
$(document).ready(function(){
    $('div.lol').click(function(){
        if ($('img:visible').is('.lol')) {
            alert("LOL");
        }
    });
}); 
```

# twitter-bootstrap - 输入大于请求的列宽的 Twitter Bootstrap 插件跨度

> ID：13809605
> 
> 赞同：3
> 
> 时间：2012-12-10T21:32:44.657
> 
> 标签：twitter-bootstrap

我正在尝试使用以下引导代码在同一行上排列输入字段。我用作字段添加宽度单位的附加字符串传递了两列跨度。

```
 <div class="row">
    <h5 class="span2">Temperature</h5>
    <h5 class="span2">Length</h5>
    <h5 class="span2">Weight</h5>
  </div>
  <div class="row">
    <div class="span2">
      <div class="input-append">
        <input class="span2" type="text"><span class="add-on">&deg;C</span>
      </div>
    </div>
    <div class="span2">
      <div class="input-append">
        <input class="span2" type="text"><span class="add-on">m</span>
      </div>
    </div>
    <div class="span2">
      <div class="input-append">
        <input class="span2" type="text"><span class="add-on">kg</span>
      </div>
    </div>
  </div> 
```

**问题：有没有办法压缩输入字段的宽度，以便与附加字符组合的字段适合给定的列跨度？**

另外，我在看起来臃肿的代码中经常重复 class="span *N "。*任何关于干燥的建议也很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T09:18:02.553

而不是使用`class="span2"`您的输入字段，您可以`class="input-small"` 尝试

```
<div class="span2">
      <div class="input-append">
       <input class="input-small" type="text"><span class="add-on">&deg;C</span>
      </div>
</div> 
```

这将根据您的需要挤压输入字段的宽度..

# c# - HtmlHelper inside Razor "if" statement

> ID：13809610
> 
> 赞同：7
> 
> 时间：2012-12-10T21:33:03.430
> 
> 标签：c#, asp.net-mvc, razor

I have written an HtmlHelper Extension to format some content based some of our styles. **The helpers render the content correctly when not enclosed within an if.**

However, when I am trying to wrap them in a razor if statement, nothing is rendering, I suspect it has something to do with the Razor syntax that I am not doing correctly.

Code:

```
<div class="notice">

    @if (DataModel.UserHasExpired)
    {
       Html.MyCustomNotificationBox("someparameter") // My helper Should render a div
    }

</div> 
```

If I place my notificationbox outside of the if, it works fine. I have also verified that the code is dropping into the block, but none of the markup is generated in the html when I inspect it.

I've tried appening a @ like so, and ending with a colon

```
@Html.MyCustomNotificationBox("somparameter"); 
```

I have even tried @Html.Raw(..with the above..) which completely errors out.

Any ideas?

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-10T21:38:04.967

您是否尝试将其放入`text`标签中（这些标签未发送给客户端）？

```
@if (DataModel.UserHasExpired)
{
    <text>@Html.MyCustomNotificationBox("somparameter")</text>
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-10T21:56:03.847

```
<p>
   @if (true)
   {
       @Html.Hello("World")
   }
</p> 
```

完美无缺

# c++ - Cout and Cin in Linux - can't see the console

> ID：13809611
> 
> 赞同：3
> 
> 时间：2012-12-10T21:33:08.897
> 
> 标签：c++, linux, console, cout

I just moved from Windows to Linux and I'm try to create a simple application that opens a console, displays a message and wait for key press to close. I have created it on Windows and it works, then I just moved the files to Linux. Didn't make any change, just compiled it with g++ and I get no errors. The problem is that on Linux (Ubuntu 12.04) I can't see the console and some message asking me to press any key before closing. My code is as simple as this:

```
#include <iostream>
#include <cstdio>

int main() {
    cout << "Writing file...\n";

        FILE *myfile = fopen("testfile.txt", "w");
        fwrite("test", sizeof(char), 4, myfile);
        fclose(myfile);

    cout << "Press any key to exit...\n";
    cin.ignore();
    return 0;
} 
```

On Windows, when I start the executable, the console windows will show me the messages and close when pressing any key. On Linux, when I execute the program I don't get anything. It does create the testfile.txt file and insert the text, so *cstdio* related functions does work, but I can't see any console with those messages and I don't understand why. Maybe I don't know how to open a simple executable on Linux. What I want is to double click on it and see a console with two simple messages. What do you thin I'm doing wrong? Thanks!

Also, I use g++ to compile the cpp file: `g++ -Wall -s -O2 test.cpp -o test`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T21:43:31.093

在 Windows 上，应用程序的“自然”形式是 GUI 应用程序。当您运行控制台应用程序时，系统会创建一个窗口来运行控制台并在该窗口中运行应用程序。这是由 Windows 完成的，它不是 C++ 的固有属性，也不包含在您编写的代码中。

C++ 不会自动执行此操作，类 UNIX 系统也不会为您执行此操作。

在类 UNIX 系统上，“自然”类型的应用程序（可以说）是控制台应用程序，您通常会*从*控制台或终端运行它们。

当您运行程序时，输出会发送到运行 X11 会话的终端，但您看不到它，因为 X11 会话正在控制您的显示。

所以要获得你想要的行为，首先打开一个终端，然后运行程序。

要使程序在终端中运行，请尝试运行类似`xterm -e ./test`

要使其自动化，您可以使用以下方法对其进行处理：

```
#include <iostream>
#include <string>
#include <unistd.h>
#include <cstdio>

int main(int argc, char** argv)
{
  if (argc > 1 && std::string(argv[1]) == "-xterm")
  {
    if (::execl("/usr/bin/xterm", "xterm", "-e", argv[0], (char*)NULL))
    {
      std::perror("execl");
      return 1;
    }
  }

  std::cout << "Writing file...\n";

  FILE* myfile = std::fopen("testfile.txt", "w");
  std::fwrite("test", sizeof(char), 4, myfile);
  std::fclose(myfile);

  std::cout << "Press any key to exit...\n";
  std::cin.get();
} 
```

现在，如果您使用参数运行程序，`-xterm`它将在 xterm 中运行。

注意我修复了您的非便携式代码以`std::`对来自的名称使用限定符`<cstdio>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T21:39:34.540

Windows 会打开一个控制台，因为这是 stdio 在它上面工作的唯一方式。Linux 不能，因为 stdio 没有它也可以运行（`~/.xsession-errors`默认情况下，输出会转到 X 会话错误日志）。如果您想让用户可以访问 stdio，那么您需要先打开终端和 shell 并在其中运行可执行文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T21:37:46.517

您还没有告诉您的桌面环境在终端窗口中运行该程序。您的程序也不会告诉您，它只是写入其标准输出。

要查看程序的标准输出，最好打开控制台，输入编译后的程序名称来运行它。程序的标准输出将显示在同一窗口中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T21:37:54.713

反而

```
cin.ignore(); 
```

做一个

```
cin.get(); 
```

在您进行编译的目录中，在终端窗口中启动程序：

```
./test 
```

然后它会在标准输出上写入“Writing file...”和“Press any key to exit...”，您需要按任意键来终止应用程序。

# go - Pure function with a slice as a parameter

> ID：13809624
> 
> 赞同：3
> 
> 时间：2012-12-10T21:33:24.113
> 
> 标签：go

What is the best way to write a [pure function](http://en.wikipedia.org/wiki/Pure_function) in go if I need to pass a (small) slice in parameter? Slice are not passed by value like array. So it's not possible to guarantee that it will not be modified during the execution of the function. Once solution is to copy the slice every time I call the function. It would work in practice, but I would prefer a more safe solution as there is no way to ensure that a copy will ever be made before the function call.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:52:48.237

你是对的，因为切片是参考值，所以不可能有一个真正纯的带有切片参数的函数。

根据您的需要，您可以使用数组。数组具有固定数量的元素，声明如下：

```
var myArray [10]int 
```

数组在按值传递时被复制。

另一种可能性是将切片封装在一个接口中，该接口只允许从切片中读取，而不是对其进行写入。

[这是一个例子](http://play.golang.org/p/7_qpKTGBRd)：

```
package main

import "fmt"

// The interface
type ReadOnlyStringSlice interface {
    Get(int) string
}

// An implementation of ReadOnlyStringSlice
type MyReadOnlySlice struct {
    slice []string
}

func (m MyReadOnlySlice) Get(i int) string {
    e := m.slice[i]
    return e
}

// Your "pure" function
func MyPureFunction(r ReadOnlyStringSlice) {
    fmt.Println(r.Get(0))
}

func main() {
    m := MyReadOnlySlice{[]string{"foo", "bar"}}
    MyPureFunction(m)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T22:21:24.103

不是一个真正的答案，但我想仍然值得讨论。

我认为整个想法是一厢情愿的想法：在一种语言中努力拥有一个纯函数是没有意义的，它不会以任何方式使用你的函数是纯函数的事实。如果你可以将一个函数“标记”为纯函数，那么理论上 Go 将能够以某种方式利用这个提示来发挥它的优势（例如，在一系列调用中重新排序某些函数的执行）。由于没有明确支持此类事情，因此函数的纯度只存在于您的脑海中。例如，假设您能够以某种方式强制函数不修改传递给它的切片；即使这样，也没有什么可以阻止您在该函数中执行另一个副作用（例如，执行 I/O 或修改全局变量）。

如果您正在编写一个库并希望其调用者提供一个回调，该回调获取一个回调不得更改的切片，只需在文档中清楚地说明这一事实。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T00:21:26.250

If you're writing a package, you could export a method which takes a slice but copies it and passes it to the real function:

```
func MyExportedFunc(someSlice []int) {
    sliceCopy := make([]int, len(someSlice))
    copy(sliceCopy, someSlice)

    myUnexportedFunc(sliceCopy)
} 
```

This, of course, is not a solution for the problem in general, as `MyExportedFunc` is not pure. The best way is probably to encapsulate the slice, as @Tom suggested.

# macos - Fortran debugging with gdb on Mac OS?

> ID：13809626
> 
> 赞同：2
> 
> 时间：2012-12-10T21:34:02.610
> 
> 标签：macos, debugging, gdb, fortran, shared-libraries

I have problems debugging Fortran programs on Mac OS Mountain Lion with gdb. When I invoke

```
gdb (fortran executable name) 
```

from a terminal, I get the following message:

```
This GDB was configured as "x86_64-apple-darwin"...Reading symbols for shared libraries.

warning: Could not find object file "/Users/fx/devel/gcc/ibin-462-x86_64/x86_64-apple-darwin11/libgfortran/.libs/backtrace.o"
- no debug information available for "../../../gcc-4.6.2-RC-20111019/libgfortran/runtime/backtrace.c". ... (an extremely long list of analogous warnings pop up for libgcc and libquadmath libraries) ... 
```

Basically, gdb is searching for a bunch of object files in paths (/Users/fx/...) that do not exist.

Other than that, the debugger seems to be working fine. Does anyone know how can I fix this?

A a side note, gdb works fine on C programs. Both C and Fortran compilers run smoothly; gcc was included in Xcode command line tools, while gfortran was installed from a separate source (path: /usr/local/bin/gfortran).

I tried to read several other answers but no one seemed to match this issue.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-24T01:41:03.100

您可以将 lldb 与 Fortran 一起使用。举个例子程序。

```
 PROGRAM test

      IMPLICIT NONE

      INTEGER                :: i
      INTEGER, DIMENSION(10) :: array

      DO i = 1, 10
         array(i) = i
      END DO

      END PROGRAM 
```

您可以在 lldb 中运行它

```
$ lldb -- test
(lldb) target create "test"
Current executable set to 'test' (x86_64).
(lldb) b test.f:9
Breakpoint 1: where = test`test + 17 at test.f:9, address = 0x0000000100000eac
(lldb) run
Process 869 launched: '/Users/mark/Desktop/test' (x86_64)
Process 869 stopped
* thread #1: tid = 0xb5f5, 0x0000000100000eac test`test + 17 at test.f:9, queue = 'com.apple.main-thread', stop reason = breakpoint 1.1
    frame #0: 0x0000000100000eac test`test + 17 at test.f:9
   6          INTEGER, DIMENSION(10) :: array
   7    
   8          DO i = 1, 10
-> 9             array(i) = i
   10         END DO
   11   
   12         END PROGRAM
(lldb) c
Process 869 resuming
Process 869 stopped
* thread #1: tid = 0xb5f5, 0x0000000100000eac test`test + 17 at test.f:9, queue = 'com.apple.main-thread', stop reason = breakpoint 1.1
    frame #0: 0x0000000100000eac test`test + 17 at test.f:9
   6          INTEGER, DIMENSION(10) :: array
   7    
   8          DO i = 1, 10
-> 9             array(i) = i
   10         END DO
   11   
   12         END PROGRAM
(lldb) c
Process 869 resuming
Process 869 stopped
* thread #1: tid = 0xb5f5, 0x0000000100000eac test`test + 17 at test.f:9, queue = 'com.apple.main-thread', stop reason = breakpoint 1.1
    frame #0: 0x0000000100000eac test`test + 17 at test.f:9
   6          INTEGER, DIMENSION(10) :: array
   7    
   8          DO i = 1, 10
-> 9             array(i) = i
   10         END DO
   11   
   12         END PROGRAM
(lldb) c
Process 869 resuming
Process 869 stopped
* thread #1: tid = 0xb5f5, 0x0000000100000eac test`test + 17 at test.f:9, queue = 'com.apple.main-thread', stop reason = breakpoint 1.1
    frame #0: 0x0000000100000eac test`test + 17 at test.f:9
   6          INTEGER, DIMENSION(10) :: array
   7    
   8          DO i = 1, 10
-> 9             array(i) = i
   10         END DO
   11   
   12         END PROGRAM
(lldb) p array
(int [11]) $0 = ([0] = 1, [1] = 2, [2] = 3, [3] = 0, [4] = 0, [5] = 0, [6] = 0, [7] = 0, [8] = 0, [9] = 0, [10] = 0)
(lldb) 
```

有一个警告。lldb 本身不理解 Fortran，但您仍然可以使用 C 等价物。例如，如果要检查 fortran 数组索引`array(3)`，则需要使用 C 等效项

```
(lldb) p array[2]
(int) $1 = 3
(lldb) 
```

任何具有 C 或 C++ 等价物的东西都可以工作。派生类型将像结构等一样...所有常规 lldb 命令都可以工作。您可以更改堆栈帧。你可以设置断点，你可以步进指令，等等......这一切都会奏效。

# python - 如何从python中的文件中读取字典数据？

> ID：13809628
> 
> 赞同：6
> 
> 时间：2012-12-10T21:34:18.570
> 
> 标签：python

我有以下文件 dic.txt：

```
{'a':0, 'b':0, 'c':0, 'd':0} 
```

我想阅读它的内容并用作字典。输入新数据值后，我需要将它们写入该文件。基本上我需要一个脚本来处理字典，更新它的值并保存它们以供以后使用。

我有一个工作脚本，但无法弄清楚如何将 dic.txt 的内容实际读入脚本中的变量。因为当我尝试这个时：

```
file = '/home/me/dic.txt'
dic_list = open(file, 'r')
mydic = dic_list
dic_list.close() 
```

我得到的 mydic 是一个 str。我不能操纵它的价值。所以这就是问题所在。如何从 dic.txt 创建字典？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T21:36:00.877

您需要解析数据才能从字符串中获取数据结构，幸运的是，Python 提供了安全解析 Python 数据结构的函数：[`ast.literal_eval()`](http://docs.python.org/2/library/ast.html#ast.literal_eval). 例如：

```
import ast

...

with open("/path/to/file", "r") as data:
    dictionary = ast.literal_eval(data.read()) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-03T14:06:18.947

您可以使用 python 内置函数 eval()：

```
 >>> mydic= "{'a':0, 'b':0, 'c':0, 'd':0}"
    >>> eval(mydic)
    {'a': 0, 'c': 0, 'b': 0, 'd': 0}
    >>> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T21:38:26.010

```
>>> import json
>>> json.loads('{"a":0, "b":0, "c":0, "d":0}')
{u'a': 0, u'c': 0, u'b': 0, u'd': 0} 
```

所以

```
with open('/path/to/file', 'r') as f:
    d = json.loads(f.read().replace("'", '"') 
```

# python - 在 Python 中使用分数

> ID：13809633
> 
> 赞同：3
> 
> 时间：2012-12-10T21:34:36.620
> 
> 标签：python, class, methods, python-3.x, fractions

我在这里使用类来输入分数（当给定分子和分母时），以及将两个分数相加和相乘。由于某种原因，导入的分数模块仅适用于部分程序；gcd 方法有效，但 Fraction 方法（当给定两个数字时，放入分数格式）不起作用，而是抛出 NameError （具体来说，“未定义全局名称'Fractions'”）。

我究竟做错了什么？我对 Python 比较陌生，如果有任何关于如何使这段代码更紧凑、有更多异常的建议，我将不胜感激。

这是我的代码：

```
import fractions

class FractionClass:
    # Initialize starting numerator and denominator.
    n = 0
    d = 0
    def __init__(self, numerator, denominator):
        self.n = numerator
        self.d = denominator

    # Function that adds fractions, whichs throws NameError if gcd() doesn't work!  
    def add_fractions(self, other):
        try:
            sum_numerator = self.n + other.n
            sum_denominator = fractions.gcd(self.d, other.d)
            return(sum_numerator, sum_denominator)
        except NameError:
            print("Methods aren't defined.")

    # Function that multiplies fractions, whichs throws NameError if gcd() doesn't work!    
    def multiply_fractions(self, other):
        try:
            product_numerator = self.n * other.n
            product_denominator = self.d * other.d
            return(product_numerator, product_denominator)
         except NameError:
            print("Methods aren't defined.")

    # Enter input function.
def user_input():
    try:
        print("Enter a numerator and denominator:")
        n, d = [int(x) for x in input().split()]
        print("Enter a numerator and denominator:")
        n2, d2 = [int(x) for x in input().split()]
        # Check used to debug for denominators that aren't the minimum of 1 (0 can't be divided!)
        check = 1 / d 
        check = 1 / d2 
        # print(check)

        # Exception for d = 0.
    except ZeroDivisionError:
        print("\n You didn't enter the minimum denominator.")
        print("Set denominator to minimum default.")
        d = 1
        # Exception for not entering a space in between numbers.
    except UnboundLocalError:
        print("You didn't enter your numbers in properly! Try again.")
        # Exception for not entering all required.
    except NameError:
        print("\n You didn't enter two numbers.")
        # Exception for user input both or one of them, not being integers.
    except TypeError:
        print("\n You didn't enter all valid numbers.")
        # General exception case.
    except:
        print("Something went wrong!")

    fract = FractionClass(n,d)
    another_fraction = FractionClass(n2, d2)
    total_sum = fract.add_fractions(another_fraction)
    # Unpacks total sum tuple.
    # Puts in fraction format.
    sum_numerator, sum_denominator = total_sum
    add_output = fractions.Fraction(sum_numerator, sum_denominator)
    total_product = fract.multiply_fractions(another_fraction)
    # Unpacks product sum tuple.
    # Puts in fraction format.
    product_numerator, product_denominator = total_product
    multiply_output = fractions.Fraction(product_numerator, product_denominator)
    print(add_output, multiply_output) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T22:52:28.153

您不需要自己的类来乘以两个分数：

```
>>> from fractions import Fraction as F
>>> F("1/2")
Fraction(1, 2)
>>> F("3/4")
Fraction(3, 4)
>>> F("1/2") * F("3/4")
Fraction(3, 8)
>>> F("1/2") + F("3/4")
Fraction(5, 4)
>>> F(5, 8) + F(4, 7)
Fraction(67, 56) 
```

至于您提到的错误，这不太可能，因为您的代码中的任何地方都没有名称“分数”，并且您没有发布回溯。您很可能正在运行一些旧版本的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:35:51.483

第 26 行还有一个空格：

```
 except NameError: 
```

它应该是

```
 except NameError: 
```

您还应该检查并修复缩进。否则，就没有实体——没有任何东西被调用。

# python - 按名称向边/顶点添加信息

> ID：13809640
> 
> 赞同：1
> 
> 时间：2012-12-10T21:34:49.070
> 
> 标签：python, igraph

我尝试将新的属性值添加到某些顶点和边，我从中只有名称。

```
g = Graph()
g.add_vertices(["1","2","3"])
g.add_edges([("1","2"),("2","3")]) 
```

向某些顶点和边添加属性的最佳方法是什么？

我发现了以下内容，但这似乎是不必要的冗长：

```
g.vs.find(name="1")["attribute"] = "value"
g.get_eid(g.vs.find(name="1").index, g.vs.find(name="2").index) 
```

你不能做的是以下，我试过了

```
g.vs["1"] # -> would return the attribute list if there would be an attribute "1"
g.get_eid("1","2") # needs integers... 
```

有没有更好的方法来通过名称引用边和顶点？

[背景：我首先尝试按顺序构建我的图（我知道每个名称的每个顶点 id），但没有缩放（add_edge 似乎有 O(n²) 行为）。但是现在我不知道顶点 id 并且不能分配边缘属性。我真的不想事先构造每个属性列表，因为我当前的 add_edges() 调用是一堆 itertools 功能]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-06T13:04:18.797

似乎最简单的是构造一个反向字典来从名称链接到顶点（或边）：

```
n2id = dict(zip(graph.vs["name"],[v.index for v in graph.vs]))
name = "J. Smith" # name of the vertices you are interested in
neighbors = graph.neighborhood(n2id[name], order=1) 
```

# delphi - 如何修复 Delphi XE3 迁移错误？

> ID：13809641
> 
> 赞同：4
> 
> 时间：2012-12-10T21:34:55.703
> 
> 标签：delphi, delphi-5, delphi-xe3

我正在将我的 Delphi 5 应用程序迁移到 Delphi XE3。我在编译时遇到了一些错误。有人可以帮我解决这些问题。提前感谢您的帮助。

1.  我无法`OemToChar`在 XE3 中找到函数的定义。当我 Ctrl+单击该功能时，它会显示 message `Unable to locate 'WinAPI.Windows.pas'`。我无法打开任何 delphi 组件文件。windows.pas 在系统上的位置是什么？或如何解决？

2.  `Incompatiable Types: 'PAnsiChar' and 'PWideChar'`在下面的函数中与`OemToChar(p1, p2)`.

```
function OemToAnsi(const Str: string): string;
var
  p1,
  p2: PChar;
begin
  p1 := PChar(Str);
  p2 := StrNew(p1);
  OemToChar(p1, p2);
  Result := StrPas(p2);
  StrDispose(p2);
end; 
```

1.  `'Low Bound Exceeds High Bound'`在以下代码中出现错误。

```
function StrToRichText(const Str: string): string;
var
  i: integer;
begin
  Result := '';
  for i := 1 to Length(Str) do
  begin
    case Str[i] of
      #128 .. #255 :
        Result := Result + '\''' + LowerCase(IntToHex(Ord(Str[i]), 2));
      '\','{','}':
        Result := Result + '\' + Str[i];
    else
      Result := Result + Str[i];
    end;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T21:46:09.350

您的`OemToAnsi`函数应如下所示：

```
function OemToAnsi(const Str: AnsiString): AnsiString;
begin
  SetLength(Result, Length(Str));
  OemToCharA(PAnsiChar(Str), PAnsiChar(Result));
end; 
```

但也许你会更好

```
function OemToWide(const Str: AnsiString): string;
begin
  SetLength(Result, Length(Str));
  OemToChar(PAnsiChar(Str), PChar(Result));
end; 
```

至于你的`StrToRichText`，看起来更难。它显然只接受 ANSI 输入。如果你想坚持使用 ANSI，那么只需将声明更改为

```
function StrToRichText(const Str: AnsiString): AnsiString; 
```

RTF 使用 7 位 ASCII 编码。要使该函数适用于 Unicode 输入，您需要转义任何序号 >= 128 的字符。转义在例如 Wikipedia [Rich Text Format](http://en.wikipedia.org/wiki/Rich_Text_Format#Character_encoding)页面上进行了描述。我会把它作为练习留给你！

* * *

在更进一步之前，您需要阅读 Marco Cantù 的白皮书：[Delphi 和 Unicode](http://edn.embarcadero.com/article/38980)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T21:56:35.627

1.  'OemToChar()' 在 'Winapi.Windows.pas' 中声明，就像 IDE 所说的那样。确保您的`uses`子句包含`Winapi.Windows`，或者`Winapi`如果子句包含“Windows”，则包含在项目选项中项目的“单元范围名称”字段中`uses`（因为您正在迁移，它可能会这样做）。

2.  在 D2009+ 中，`OemToChar()`映射到`OemToCharW()`现在，`OemToCharA()`不再映射。这两个函数的第一个参数是 a `PAnsiChar`。在 D2009+ 中，`PChar`映射到`PWideChar`现在，`PAnsiChar`不再映射，因此您需要相应地重新编写代码，例如：

    ```
    function OemToAnsi(const Str: AnsiString): string;
    var
      S: String;
    begin
      SetLength(S, Length(Str));
      OemToChar(PAnsiChar(Str), PChar(S));
      Result := PChar(S);
    end; 
    ```

    但是，您应该重新考虑为什么仍然需要首先处理 OEM 字符串。它们在 Unicode 世界中没有多大意义，甚至在 Ansi 世界中也很少使用。

3.  另一种需要重新编写代码来解决的情况`Char=WideChar`，因为字符范围比 Ansi 字符范围大得多。你我会改用序数（你也应该适当地考虑 UTF-16 代理，但我会把它留给你作为练习），例如：

    ```
    function StrToRichText(const Str: string): string;
    var
      i: integer;
    begin
      Result := '';
      for i := 1 to Length(Str) do
      begin            
        case Ord(Str[i]) of
          128..255:
            Result := Result + '\''' + LowerCase(IntToHex(Ord(Str[i]), 2));
          Ord('\'), Ord('{'), Ord('}'):
            Result := Result + '\' + Str[i];
        else
          Result := Result + Str[i];
        end;
      end;
    end; 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T11:19:06.697

关于 Unicode，您已经得到解决。google上也有很多文章。

* * *

我还建议您阅读有关类助手和记录助手的信息——这可能有助于您在库中重新引入一些过时的函数，并延迟代码库的重新工作。

这也可以帮助您覆盖错误，例如

```
var r: TRect;
 ....
  with r do begin
 ....
     B := IntersetRect( A1, A2 );
 ....
  end; 
```

* * *

关于`OemToChar`- 你最好使用方便的包装器，`RxLib`在 Delphi 中给出了 5 次，然后你会迁移到`Jedi Code Library`你的代码不会有这个问题。

然而现在你在 XEn——没有它你可以完美地生活。
[http://docwiki.embarcadero.com/Libraries/XE2/en/System.SetCodePage](http://docwiki.embarcadero.com/Libraries/XE2/en/System.SetCodePage)

```
 var sa, so: RawByteString;
 ....
     sa := source; SetCodePage(sa, GetACP(), true);
     so := sa;     SetCodePage(so, GetOEMCP(), true); 
```

类似的代码适用于我的项目，我在其中解析遗留的二进制数据。

如果您只关心一个语言环境，那么您可能可以对其进行硬编码。

```
 var sa: AnsiString[1251]; so: AnsiString[866]; su: UnicodeString;
 ....
     sa := source; 
 ....
     su := sa; // Win32: MultiByteToWideCharBuf - official Microsoft way
     so := su; // Win32: WideCharToMultiByteBuf - official Microsoft way
 ....
     so := sa;  // double conversion in one step
     // did not tested, but should work accorrding to doc.   
     // looks like obsolete Win16 OemToChar
     // and like codepage-to-codepage direct transcoding
     //     routines from JCL.SF.NET 
```

# c# - WPF中的绑定字典

> ID：13809643
> 
> 赞同：2
> 
> 时间：2012-12-10T21:35:00.473
> 
> 标签：c#, wpf, xaml, data-binding

我有一本字典

```
public class TAGs :INotifyPropertyChanged{
private Dictionary<string, string[]> _items = new Dictionary<string,string[]>();
 ...............
public string[] Keys
    {
        get { return Items.Keys.ToArray(); }
    }

} 
```

我想创建 2 个列表，1 个用于键的列表，另一个列表包含所选键的值，我试过了，但它不起作用

```
<ListBox x:Name="TagNameList" ItemsSource="{Binding Keys}"/>
<ListBox ItemsSource="{Binding Items[{Binding SelectedItem,ElementName=TagNameList}]}"/> 
```

我将它们包含在一个网格中，并且它们的数据上下文是 TAG 的对象，第一个列表框工作正常，因为它简单地绑定到一个属性，但第二个列表，没有任何帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:41:35.820

`"{Binding Items[{Binding SelectedItem,ElementName=TagNameList}]}"`不是有效的 xaml。您不能在路径内进行绑定，因为路径是在编译时构建的。

当我自己遇到这个时，我只是简单地将其他东西绑定到`SelectedItem`一个`ListBox`，然后当它收到更改通知时，还要`NotifyPropertyChanged`在另一个暴露`Items[selectedKey]`我的第二个`ListBox`绑定的属性上触发。

xml:

```
<ListBox x:Name="TagNameList" ItemsSource="{Binding Keys}" SelectedItem={Binding Selected}/>
<ListBox ItemsSource="{Binding ValueFromKey}"/> 
```

C＃：

```
string _selected;
public string Selected
{
    get { return _selected; }
    set 
    { 
        _selected= value; 
        OnPropertyChanged("Selected");
        OnPropertyChanged("ValueFromKey");
    }
}

public string[] ValueFromKey
{
    get { return Items[Selected]; }
} 
```

# java - 如何使用包含三列的 hashmap 读取文本文件？

> ID：13809645
> 
> 赞同：3
> 
> 时间：2012-12-10T21:35:07.297
> 
> 标签：java

我想用java程序写一个星算法，我想像这样读取文本文件的距离

```
 89  R A
    118 A T
    140 M S
    85  B U 
```

正如您在我的文本文件中看到的那样，我有三列，但是使用我编写的这段代码，它只会给我两列，但我想阅读我的所有列，如您在上面看到的三列

```
List<String> halist = new ArrayList<String>();

File f = new File("mapfile.txt");

FileInputStream fis = new FileInputStream(f);

BufferedInputStream bis = new BufferedInputStream(fis);

dis = new DataInputStream(bis);

while ( (record=dis.readLine()) != null ) {
    Map<Integer, String> hamap = new HashMap<Integer, String>();
    String[] columns = record.split(" ");
    hamap.put(Integer.valueOf(columns[0]), columns[1]);

    for(Map.Entry<Integer,String> m :hamap.entrySet()) {
        System.out.println(m.getKey()+" "+m.getValue());
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:40:12.367

你从不使用第三列

```
hamap.put(Integer.valueOf(columns[0]), columns[1] +" " + columns[2]); 
```

或者您可以使用列表列表：

```
Map<Integer, List<String>> hamap = new HashMap<Integer, List<String>>();

String[] columns = record.split(" ");
List<String> otherColumns = new ArrayList<String>();

for (int i=1; i < columns.length; i++) {
    otherColumns.add(columns[i]);
}

hamap.put(Integer.valueOf(columns[0]), otherColumns);

for(Map.Entry<Integer,List<String>> m :hamap.entrySet()) {
    System.out.println(m.getKey()+" "+m.getValue());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:42:34.120

据我所知，您只将 2 个值放入您的哈希图中。

```
hamap.put(Integer.valueOf(columns[0]), columns[1]); 
```

现在这里有两种潜在的方法

如果您的整数值是其他 2 个值的键`Map<Integer, String>`，那么您应该有一个`SomeObject`包含其他 2 个字符串的 Map ，而不是 a 。

如果整数不是键，

那么你最好使用集合的集合（例如数组列表）来表示你的行，或者你可以有一个`SomeObject`代表所有 3 个值的列表，并有一个列表`SomeObject`

所以在这种方法中

```
Class SomeObject
{
    int theInt;
    string firstString;
    string secondString;

    public SomeObject(/*maybe some params here*/)
    {
         // insert constructor here
    }
} 
```

将代表您的订单项，并且您将拥有这些订单项的集合。

```
someList.Add(New SomeObject(Integer.valueOf(columns[0]), columns[1], columns[2])); 
```

# python-requests - 使用 grequests 发送请求池，如何获取每个请求的响应时间？

> ID：13809650
> 
> 赞同：7
> 
> 时间：2012-12-10T21:35:34.950
> 
> 标签：python-requests, grequests

我正在使用 grequests python 库将 GET 请求异步发送到我们的服务器。

我不知道如何获取正在发送的请求池中每个单独请求的服务器响应时间？

```
unsentrequests=(grequests.get(u) for u in self.urls) # make a pool of requests
responses=grequests.map(unsentrequests) # send the requests asynchronously 
```

要获取请求-响应对的开始时间，我可以执行以下操作：

```
grequests.get(u,headers={'start':time.time())
print responses[0].request.headers['start_time'] 
```

但是我怎样才能掌握收到回复的时间呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-10T13:47:46.780

`grequests`，如`requests`，支持`hook`关键字参数，您可以在其中分配对响应对象执行某些操作的函数：

```
def do_something(response):
    print response.status_code

unsentrequests=(grequests.get(u, hooks = {'response' : do_something}) for u in self.urls) 
responses=grequests.map(unsentrequests) 
```

我更喜欢`requests`直接在循环中使用`gevent`来获得更明确的代码：

```
import gevent.monkey
gevent.monkey.patch_socket()
from gevent.pool import Pool
import requests

def check_urls(urls):

    def fetch(url):
        response = requests.request('GET', url, timeout=5.0)
        print "Status: [%s] URL: %s" % (response.status_code, url)

    pool = Pool(20)
    for url in urls:
        pool.spawn(fetch, url)
    pool.join() 
```

# javascript - html5 sse not responding

> ID：13809652
> 
> 赞同：0
> 
> 时间：2012-12-10T21:35:50.573
> 
> 标签：javascript

I've just created an SSE script instead of polling, i'll use polling as a backup if no sse support though. Problem is, having never used it I can't figure out what is going wrong! I've changed the PHP filethe javascript references to have the correct MIME type and used the correct format of `echo 'data: '.$num_rows.'\n\n';`

```
 var originalTitle = document.title; //for title attribute update later

    if (!!window.EventSource) {

  var source=new EventSource("AJAX/get_feed_updates.php?ids%5B%5D=1234567969&ts%5B%5D=2012-12-10+21%3A15%3A04");
  source.onmessage=function(result)
   {
    if (result.data > 0){
    alert (result.data);
     document.title = '(' + result.data + ') ' + originalTitle;

         if (result.data == 1){// no plurals
           $("#refreshFeed").show().html(result.data + ' more news item.');
         }

         if (result.data > 1){ //plurals
            $("#refreshFeed").show().html(result.data + ' more news items.');
         }
         }
}, false);
} 
```

There's the script, i can't fugure out whats happening. The script is got via `GET` as it shows in the console but I can't see any responses. If i type in the script url directly it works but not via js.

# c# - 以文件为属性的实体框架模型

> ID：13809654
> 
> 赞同：2
> 
> 时间：2012-12-10T21:35:52.837
> 
> 标签：c#, asp.net-mvc-3, entity-framework

我正在使用 Entity Framework 5 并使用代码优先模型。我正在尝试创建一个代表 PDF 和一些相关数据字段的模型。例如：

```
Receipt
---------
Id
Date
Retailer
Total
FilePath 
```

我最近从一个与 Django 合作的角色过渡。Django 的 ORM 允许我轻松添加文件字段类型，它将路径存储在数据库中，文件存储在文件系统中。[根据File Upload ASP.NET MVC 3.0](https://stackoverflow.com/questions/5193842/file-upload-asp-net-mvc-3-0)，似乎可以手动编码 EF 以执行类似的操作。我基于这篇文章构建了一个原型，但是将这段代码添加到控制器中的每个创建和更新操作似乎是浪费时间。

我假设有另一种方法可以轻松地对此进行建模，而我只是没有在文档中找到它。我现在什至愿意考虑将文件粘贴到数据库本身的东西。我只想要一些我可以快速完成的事情，并且在基于模型自动生成视图和控制器时不必添加一堆圆顶板类型代码。我有几个这样的表，它们对文件和特定的附加数据进行建模。

*注意 - 这是一个原型。不太可能以目前的形式看到生产。

# php - ISSET GET / 如何忽略不在数据库中的字符串条目

> ID：13809660
> 
> 赞同：1
> 
> 时间：2012-12-10T21:36:13.750
> 
> 标签：php, mysql, isset

我有一个 isset/get 数组，如果从以前的脚本发布，则使用变量 $state、$cat 和 $sub 执行脚本

我的问题：如何只允许我的 mysql 数据库中的 isset($_GET 条目显示并对不在我的数据库中的所有其他条目抛出错误？？？

以下是运行良好的现有脚本的一部分，但我已将其作为示例显示，以尝试了解如何忽略不在我的数据库中的字符串。当前允许传递任何字符串的位置。

```
 if
    index.php?state=Washington 
        is changed to
    index.php?state=Hempville 
```

该脚本仍然通过 Hempville 作为我最后一页中的新实例。

我不是一个完整的 n3wb，所以感谢您的帮助。

例子

```
$self = mysql_escape_string($_SERVER['PHP_SELF']);
$state = mysql_escape_string($_GET['state']);
$cat = mysql_escape_string($_GET['cat']);
$sub = mysql_escape_string($_GET['sub']); 
```

并且，isset/_GET 例程是：

```
if (isset($_GET['state'], $_GET['cat'], $_GET['sub'])) {
echo "<h3>$state</h3>";

// Breadcrumb 
echo "<a href=\"./\">HOME</a> >> <a href=\"index.php?state=$state\">$state</a> >> <a href=\"#\">$cat</a> >> <a href=\"index3.php?cat=$catup&sub=$sub&state=$state\">$sub</a>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:43:59.427

如果我理解正确，您试图只允许数据库中已经存在的状态为有效字符串？

您可以做到这一点的一种方法是对状态进行查找 (SELECT) 以确保它在数据库中。

示例：（伪）

```
SELECT count(*) FROM table WHERE state='Washington';
if (count > 0) {
    // washington is a valid input
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:50:31.493

您需要针对您的数据集进行验证。您可以通过多种方式执行此操作：

例如，设置一个具有可接受值的会话变量：

```
 if(!isset($_SESSION["acceptable_states"])) {  
    $q = "select distinct(state) from states_table";
    $r = mysql_query($q);
    while($row = mysql_fetch_row($r)) {
        $_SESSION["acceptable_states"][] = $row[0];
    }
} 
```

然后对于 $_GET["state"] 你会做：

```
if(in_array($_GET["state"], $_SESSION["acceptable_states"])) {
    //display page or whatever here
} else {
    echo 'No Such State';
} 
```

然后对每个变量执行此操作。

# parsing - 解析：LL(3) 中的文法，但 LR(2) 中没有

> ID：13809661
> 
> 赞同：1
> 
> 时间：2012-12-10T21:36:15.480
> 
> 标签：parsing, theory, lr, ll

我试图证明**LL(3) 不是 LR(2) 的子集**。

直觉上这很容易，但我不能凭直觉找到这样的语法。

你能帮我一把吗？谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T22:29:00.590

好吧，显然诀窍是使用 ε-产生式。

以下语法将起作用：

```
S->aa|Aaaa

A->ε 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T17:07:15.773

**定理：**如果文法是 LL(3) 而不是 LR(2)，则文法有 ε-产生式。

**证明：如果在阅读句柄***开头的三个字符*后总是可以以正确的句子形式识别句柄，则文法是 LL(3) 。

*如果在读取句柄末尾的两个字符*后总是可以以正确的句子形式识别句柄，则文法是 LR(2) 。

如果语法是 LL(3) 而不是 LR(2)，那么读取句柄开头之后的三个字符有时必须比读取句柄结尾之后的两个字符提供更多的信息。只有当句柄为空时才会发生这种情况。

# reporting-services - 使用 IIF 语句对表达式进行条件格式设置 - SSRS 2008 R2

> ID：13809662
> 
> 赞同：1
> 
> 时间：2012-12-10T21:36:22.360
> 
> 标签：reporting-services, ssrs-2008, ssrs-2008-r2

我正在尝试对已经使用 IIF 语句的 SSRS 表达式应用条件格式，以便正确返回它的值。这可能吗？

**表达方式：**

```
=SUM(IIf(RIGHT(Fields!Category.Value, 2) = "01", CDBl(Fields!Cost.Value), CDBL(0))) 
```

下面的开关是我想使用的，以便在填充属性中相应地应用红色/绿色背景，但我不知道该怎么做，因为我需要先评估 IIF 才能知道基础值上的颜色。有任何想法吗？

**开关：**

```
=Switch( 
(
Fields!Cost.Value <= .8944), "Red", 
Fields!Cost.Value > 1.0945), "Red", 
1=1, "Green" 
) 
```

理想情况下，我会重新设计我的存储过程/分组，这样这里就不需要 IIF，我可以对 Fields!Cost.Value 进行条件格式化，但考虑到这里需要快速周转，这是不可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T22:02:07.103

看起来我已经想通了，我能够嵌套正在使用的 IIF 语句并且格式工作正常。

```
=Switch(
    (SUM(IIf(RIGHT(Fields!Category.Value, 2) = "01", CDBl(Fields!Cost.Value), CDBL(0)))) <= .8944, "Red", 
    (SUM(IIf(RIGHT(Fields!Category.Value, 2) = "01", CDBl(Fields!Cost.Value), CDBL(0)))) > 1.0945, "Red", 
    1=1, "Green" 
    ) 
```

# c++ - 向 C++ 中的任何日期结构添加一定量的时间

> ID：13809665
> 
> 赞同：1
> 
> 时间：2012-12-10T21:36:26.367
> 
> 标签：c++, date, time, add

对于给定的日期（最有可能采用格式 YYYY:MM:DD HH:MM:SS），我想添加或减去另一个结构，例如 (YYY:MM:DD HH:MM:SS)，并且我希望这样做最标准方式（不是自己实现所有东西），那么是否有任何类似 POSIX 的工具或可能具有赋予功能的增强组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:03:58.800

正如 Dan O 已经说过的，Boost 日期时间[解析器](http://www.boost.org/doc/libs/1_52_0/doc/html/date_time/date_time_io.html#date_time.io_objects)+[计算](http://www.boost.org/doc/libs/1_52_0/doc/html/date_time/details.html#date_time.calculations)

# jquery - 单击时使用 jquery 切换停止和启动动画

> ID：13809666
> 
> 赞同：0
> 
> 时间：2012-12-10T21:36:29.050
> 
> 标签：jquery, list, hyperlink, hover, jquery-animate

我有一个菜单，我使用 jquery 对其进行动画处理。当您单击菜单中的“a”时，会加载一些 ajax 内容。

我想停止您所在页面的链接 (A) 的动画并给它另一种颜色。当您单击另一个链接时，前一个链接将再次变为动画并再次具有旧颜色。

这是功能：

```
$.fn.flipNav = function(options) {

        options = $.extend({
            speed : 200
        }, options);

        return this.each(function() {

                console.log(this);

            var nav = $(this),
                lis = $('li', nav),
                anchors = $('.inactive', lis).css('padding', 0),
                spanHeight;

            $.each(anchors, function() {
                var a = $(this),
                    val = a.text();

                a.html('<span>' + val + '</span> <span>' + val + '</span>')
                 .parent('li')
                    .height(a.children('span:first').outerHeight())
                 .end()
                 .children('span:first')
                    .css('marginTop', 0) // strange for IE
            }); 

            spanHeight = lis.eq(0).height();

            lis.hover(function() {
                $(this).find('span:first').animate({
                    marginTop : '-' + spanHeight
                }, { duration: options.speed, queue : false });
            }, function() {
                $(this).find('span:first').animate({
                    marginTop : 0
                }, { duration: options.speed, queue: false });
            });

        }); // end each

    } 
```

这是我处理的一些代码：

```
$(".inactive").click(function(){
$("#navigatie ul li a").each(function(){
            $(this).removeClass("active").addClass('inactive');
            });

        $(this).removeClass("inactive").addClass('active');
        $(this).find('span').css("color", "#BE1823");

        $(this).find('span:first').stop(true, true);

    }); 
```

我对所有的工作代码都很有兴趣：http: [//jsfiddle.net/388Qs/](http://jsfiddle.net/388Qs/) 如您所见，颜色会发生变化，但动画不会停止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:49:36.967

将此部分更改为

```
lis.hover(function() {
                $(this).find('a:not(".active") span:first').animate({
                    marginTop : '-' + spanHeight
                }, { duration: options.speed, queue : false });
            }, function() {
                $(this).find('a:not(".active") span:first').animate({
                    marginTop : 0
                }, { duration: options.speed, queue: false });
            }); 
```

它应该处理动画部分。背景颜色仍然需要重新应用，但我认为你提到的问题区域应该修复。

# qt - 使用 qabstractlistmodel 的自定义模型的 QListview 问题

> ID：13809668
> 
> 赞同：1
> 
> 时间：2012-12-10T21:36:33.583
> 
> 标签：qt, qt4.7, qlistview, qlist, qabstractlistmodel

尝试为我的 qlistview 实现自定义模型。我一直在阅读与我类似的过去帖子的链接，但我无法让它工作。

我想列出我应该由用户通过单击添加按钮动态创建的对象。要删除列表视图上的项目，用户应选择该项目，然后单击删除按钮。

[编辑-我正在尝试使用继承自QAbstractListModel](http://doc.qt.digia.com/qt/qabstractlistmodel.html)的自定义模型创建一个 qlistview 。qlistview 将显示 Qlist，所有项目都应在 qlistview 中列出。我还希望用户创建一个新的 MyCustomObject 并将其添加到 Qlist。

我尝试按照可以通过谷歌搜索找到的示例和帖子进行操作，但此时我迷路了。

单击添加按钮时应用程序崩溃。

主窗口.cpp

```
#include "mainwindow.h"
#include "ui_mainwindow.h"

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    QList<MyCustomObject*> *m_list = new QList<MyCustomObject*>;

    CustomListModel *lmodel = new CustomListModel(this);

    MyCustomObject *object = new MyCustomObject(this);

    m_list->append(object);

    ui->listView->setHorizontalScrollBarPolicy(Qt::ScrollBarAlwaysOff);

    ui->listView->setEditTriggers(QAbstractItemView::NoEditTriggers);

    lmodel->setmylist(m_list);

    //Initialize the Listview
    ui->listView->setModel(lmodel);
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::on_addpushButton_clicked()
{
    MyCustomObject *object = new MyCustomObject(this);

    lmodel->AddmycustomObject(object);
}

void MainWindow::on_removepushButto_clicked()
{

} 
```

主窗口.h

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include <QListView>
#include <customlistmodel.h>
#include "mycustomobject.h"

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

private slots:
    void on_addpushButton_clicked();

    void on_removepushButto_clicked();

private:
    Ui::MainWindow *ui;
    QList<MyCustomObject*> *m_list;
    CustomListModel *lmodel;

};

#endif // MAINWINDOW_H 
```

customlistmodel.cpp

```
#include "customlistmodel.h"

CustomListModel::CustomListModel(QObject *parent) :
    QAbstractListModel(parent)
{
}
QVariant CustomListModel::data(const QModelIndex &index, int role) const
{
    if (!index.isValid())
        return QVariant();

    if (index.row() >= Model_list->size())
        return QVariant();

    if (role == Qt::DisplayRole)
       return QVariant(QString("row [%1]").arg((Model_list->at(index.row()))->GetName() ));
    else
        return QVariant();
}
int CustomListModel::rowCount(const QModelIndex &parent) const
{
        Q_UNUSED(parent);
        return Model_list->size();
}
//bool CustomListModel::insertRows(int row, int count, const QModelIndex &parent)
//{
//    beginInsertRows(QModelIndex(), row, row+count-1);

//    endInsertRows();

//    return true;
//}

//bool CustomListModel::removeRows(int row, int count, const QModelIndex &parent)
//{
//    beginRemoveRows(QModelIndex(), row, row+count-1);

//    endRemoveRows();

//    return true;

//}

//bool CustomListModel::setData(const QModelIndex &index, const QVariant &value, int role)
//{
//   if (index.isValid() && role == Qt::EditRole) {

//      MyCustomObject *item = Model_list->at(index.row());
//      item->SetNam(value.toString());

//     // Model_list->at(index.row())->SetNam(value.toString());
//      emit dataChanged(index,index);
//      return true;
//   }
//   return false;

//}
//Custom Methods
void CustomListModel::setmylist(QList<MyCustomObject*> *list)
{
    beginResetModel();

    Model_list = list;

    endResetModel();
    reset();

}
void CustomListModel::AddmycustomObject(MyCustomObject *object)
{

    int first = Model_list->count();
    int last = first;

          beginInsertRows(QModelIndex(), first, last);
          Model_list->append(object);
          endInsertRows();

} 
```

自定义列表模型.h

```
#ifndef CUSTOMLISTMODEL_H
#define CUSTOMLISTMODEL_H

#include <QAbstractListModel>
#include <QList>
#include "mycustomobject.h"

class CustomListModel : public QAbstractListModel
{
    Q_OBJECT
public:
    explicit CustomListModel(QObject *parent = 0);
    QVariant data(const QModelIndex &index, int role) const;
    int rowCount(const QModelIndex &parent) const;
   // bool setData(const QModelIndex &index, const QVariant &value, int role);

   // bool insertRows(int row, int count, const QModelIndex &parent);
    //bool removeRows(int row, int count, const QModelIndex &parent);

    //Custom Methods
    void setmylist(QList<MyCustomObject*> *list);
    void AddmycustomObject(MyCustomObject *object);
private:
    QList<MyCustomObject*>* Model_list;

signals:

public slots:

};
#endif // CUSTOMLISTMODEL_H 
```

MyCustomObject.h

```
#ifndef MYCUSTOMOBJECT_H
#define MYCUSTOMOBJECT_H

#include <QObject>

class MyCustomObject : public QObject
{
    Q_OBJECT
public:
    explicit MyCustomObject(QObject *parent = 0);
    QString Name;
    QString GetName() {return Name;}
    void SetNam(QString Value){ Name = Value;}
signals:

public slots:

};

#endif // MYCUSTOMOBJECT_H 
```

我的自定义对象.cpp

```
#include "mycustomobject.h"

MyCustomObject::MyCustomObject(QObject *parent) :
    QObject(parent)
{
    this->Name = "TestName";
} 
```

主文件

```
#include <QtGui/QApplication>
#include "mainwindow.h"

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MainWindow w;
    w.show();

    return a.exec();
} 
```

主窗口.ui ![在此处输入图像描述](../Images/b087f4fc74b012aeb4957b3726ef782f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T00:59:09.800

*@DanielCastro 在主要评论中谈到了这一点，但我正在扩展它，因为我认为这可能是你的实际崩溃。*

在 MainWindow 中，为模型声明一个私有成员：

```
private:
    ...
    CustomListModel *lmodel; 
```

但是在您的 MainWindow 构造函数中，您初始化了一个全新的模型并将其设置在您的视图中：

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ...
    // Not actually initializing the private member
    CustomListModel *lmodel = new CustomListModel(this);
    ...

    lmodel->setmylist(m_list);

    //Initialize the Listview
    ui->listView->setModel(lmodel);
} 
```

这使您的私有`lmodel`成为空指针。然后你有一个尝试访问它的插槽：

```
void MainWindow::on_addpushButton_clicked()
{
    MyCustomObject *object = new MyCustomObject(this);
    // CRASH because you access a NULL pointer
    lmodel->AddmycustomObject(object);
} 
```

因此，修复可能是确保您正在初始化私有成员，而不是 MainWindow 构造函数中的全新模型：

```
lmodel = new CustomListModel(this); 
```

你对你的 做同样的事情`m_list`，所以也：

```
m_list = new QList<MyCustomObject*>; 
```

看起来你现在可能会发生潜在的崩溃，或者在你的类中使用`QList`指针而不是仅仅使用 a 。`QList`我认为最好确保您的模型具有完全初始化的列表对象，然后您可以设置它或从其他列表中清除它。

```
private:
    QList<MyCustomObject*> Model_list; 
```

然后你会像这样传递它们：

```
void setmylist(QList<MyCustomObject*> &list); 
```

# android - 如果 AsyncTask 已在后台服务中运行，则无法启动另一个 Activity

> ID：13809670
> 
> 赞同：1
> 
> 时间：2012-12-10T21:36:45.450
> 
> 标签：android, service, android-asynctask

我只是注意到，当我在后台`Service`运行任务时`AsyncTask`，我尝试启动`Activity`也使用它自己的新任务`AsyncTask`，然后`Activity`即将启动冻结直到`Services` `AsyncTask`完成，然后启动，运行它自己的`AsyncTask`. `Activity`如果即将启动的没有任何`AsyncTask`任务，则不会出现此问题。我是否必须以某种方式允许两个单独的 AsyncTask 同时运行，还是我应该知道其他一些事情？

# iphone - -fno-objc-arc 在运行时不起作用

> ID：13809677
> 
> 赞同：0
> 
> 时间：2012-12-10T21:37:29.717
> 
> 标签：iphone, objective-c, xcode, automatic-ref-counting

我下载了一些不使用 ARC 的开源库。我`-fno-objc-arc`按照 SO 上的建议添加了使它们编译的内容。但是，在运行时我仍然会收到错误（导致崩溃），例如`ARC forbids explicit use of autorelase`. 难道我做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:27:08.070

单击左侧导航视图中的项目名称，转到 Targets -> Build Phases 并将 -fno-objc-arc 添加到任何相关文件的“编译器标志”中。只需删除对 -release 的所有调用。您不能在 ARC 下调用 -release，因为编译器将为您插入所有必要的保留/释放调用。请再次检查您的文件并清理您的项目....

# java - JodaTime：用前导连字符解析日期

> ID：13809682
> 
> 赞同：0
> 
> 时间：2012-12-10T21:37:48.013
> 
> 标签：java, jodatime

与乔达时间

```
DateTimeFormatter dtf = DateTimeFormat.forPattern("yyyy-MM-dd'T'HH:mm:ss'Z'").withZone(DateTimeZone.UTC);
java.util.Date parsedDate = dtf.parseDateTime("-012-10-25T10:03:22Z").toDate();

System.out.println(parsedDate) 
```

印刷

```
'Tue Oct 27 04:03:22 CST 13' 
```

如您所知，本地时区是 CST。

我希望抛出异常，因为传递的日期不是预期的格式。或者可能是 NumberFormatException，'-' 不是数字

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T21:49:02.883

Joda 支持零之前的几年（请参阅`DateTimeConstants.BC`这意味着在基督之前）。
乔达`-012-10-25T10:03:22Z`就像公元前 12 年一样对待

```
DateTime d = dtf.parseDateTime("-012-10-25T10:03:22Z");
System.out.println(d.getEra()); // returns 0 -> that means B.C. era Before Christ
System.out.println(d.getYear()); // returns -12 
```

如果你想抛出异常，那么你应该手动进行，因为 Joda 在这种情况下不会抛出异常。做类似的事情

```
 DateTime dateTimeParser(String dateAsString)  
   {  
      DateTime res = dtf.parseDateTime(dateAsString);
      if (d.getYear() < 0) throw new IllegalArgumentException();  
      return res;  
   } 
```

或者使用[SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)来解析`Date`

# linux - 安装 PostgreSQL 的 Bash 脚本 - 不工作

> ID：13809684
> 
> 赞同：2
> 
> 时间：2012-12-10T21:37:47.680
> 
> 标签：linux, bash, postgresql, shell, debian

我有一个脚本，它在部署我的 debian 6.0 服务器时运行，它旨在从源代码构建 postgreSQL，为其创建系统用户，创建数据库并启动它运行。我对此很陌生，但我做了很多功课，这就是我想出的：

```
# Initial
    apt-get update
    apt-get -y install aptitude bzip2 libbz2-dev git-core bison flex
    aptitude -y install sudo python-all-dev python-setuptools libxml2-dev libgeoip-dev libxslt1-dev uuid-dev gcc automake autoconf libpcre3-dev libssl-dev unzip zip python-psycopg2 libpq-dev wget make libreadline-dev
    aptitude -y full-upgrade 

# POSTGRESQL
###############################

# Postgresql Download & Install
    wget http://ftp.postgresql.org/pub/source/v8.4.6/postgresql-8.4.6.tar.gz -P /tmp
    mkdir /tmp/postgresql
    tar xzf /tmp/postgresql-8.4.6.tar.gz -C "/tmp/postgresql"
    cd /tmp/postgresql/postgresql-8.4.6
    ./configure
    make
    make install

# Add User
    useradd postgres
    chown "postgres" /usr/local/pgsql
    mkdir /usr/local/pgsql/data
    chown postgres:postgres /usr/local/pgsql/data
    su - postgres
    /usr/local/pgsql/bin/initdb -D /usr/local/pgsql/data/
    /usr/local/pgsql/bin/postmaster -D /usr/local/pgsql/data
    /usr/local/pgsql/bin/createdb test 
```

由于这是在部署时运行的，因此很难调试出了什么问题，但我可以看到 postgres 的下载和安装似乎工作正常。但是，我所知道的是我的服务器上没有运行 postgres。我想知道我的代码的最后一部分是否有人能看到我做错的任何事情，这可能会导致这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T22:20:57.613

您的脚本中明显错误的部分是它希望后面的行`su - postgres`作为 postgres 用户运行。这不会发生。

在批处理模式下，`su - postgres`启动并立即退出，因为没有命令提供给它。然后脚本的下一个命令在用户启动脚本（可能是 root）时执行，但它们会失败。

相反，您应该编写如下内容：

```
su - postgres <<-'EOF'
  /usr/local/pgsql/bin/initdb -D /usr/local/pgsql/data/
  /usr/local/pgsql/bin/postmaster -D /usr/local/pgsql/data
  /usr/local/pgsql/bin/createdb test
EOF
# the lines after the EOF will be executed again as the initial user 
```

评论中的建议假设您已经通过包安装了 postgresql，但这不是问题的上下文。当您从不`./configure`带参数的源代码安装时`make install`，它永远不会在外部安装任何东西`/usr/local/pgsql`。`/etc`在这种情况下没有启动脚本是完全正常的。

# google-maps-api-3 - 可以使用 google maps geocoder api 获取商店名称吗？

> ID：13809685
> 
> 赞同：0
> 
> 时间：2012-12-10T21:37:51.137
> 
> 标签：google-maps-api-3, google-geocoder

我想知道是否可以通过使用 google geocoding api 来获得商店、商场或餐厅的名称。例如，如果用户搜索，我需要将“*星巴克*”作为结果。使用[官方 api 参考](https://developers.google.com/maps/documentation/geocoding/#Types)中的地址组件类型似乎无法接收到这个。有没有其他方法可以获取这些信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:20:37.537

不，地理编码器返回邮政地址（和一些“知名”位置）的坐标。我相信您正在寻找[Places API](https://developers.google.com/places/)，它也可作为[Google Maps API 中的一个库](https://developers.google.com/maps/documentation/javascript/places)

# domain-driven-design - 如何在设计通用系统时应用领域驱动设计原则？

> ID：13809688
> 
> 赞同：1
> 
> 时间：2012-12-10T21:37:55.993
> 
> 标签：domain-driven-design

所以，假设我们必须设计一个图书馆管理系统。现在，这可以通过领域驱动的设计原则来完成，方法是编写一种通用语言，然后找出有界上下文，创建聚合根，最后拥有一个包含书籍、用户、作者等的对象模型。

但是，如果我们必须在 Salesforce 或 Sharepoint 上设计一个通用系统（具有设计和创建自定义表单和工作流的能力）。因此，首先我们将创建一个通用系统，它可以用于实现图书馆管理系统或任何其他系统，如人力资源管理系统或其他系统。

我们还能在设计通用系统时应用领域驱动设计原则吗？如果是，那么在普遍存在的语言中，我们应该列出领域对象，如书籍、用户、作者、员工、部门等，还是应该只列出通用对象/名称值对/哈希表。因为，这个通用系统可用于实现任何其他特定领域的系统。

换句话说，如何在创建通用系统时应用领域驱动设计原则？稍后可用于实现其他特定领域的系统。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T23:10:07.440

> 我们还能在设计通用系统时应用领域驱动设计原则吗？

是的，DDD 可以应用于您描述的通用系统。

> 如果是，那么在普遍存在的语言中，我们应该列出领域对象，如书籍、用户、作者、员工、部门等，还是应该只列出通用对象/名称值对/哈希表。

像**object**、**hashtable**这样的名字不仅通用，而且具有很强的技术内涵。普遍存在的语言将在开发人员和领域专家之间共享，因此应尽可能减少技术影响。这并不是说像**object**这样的技术名称是错误的名称 - 请注意您的域和支持技术基础设施之间的区别。即使所有领域专家都是开发人员，做出这种区分也很重要。

可以说，DDD 由两个部分组成——战术和战略。战术模式具有技术性质，包括存储库、值对象等。这些模式通常对每种语言和平台都有特定的表现形式。随着技术的变化，这些模式也最有可能发生变化。例如，如果在 DDD 中使用[事件](http://martinfowler.com/eaaDev/EventSourcing.html)溯源，则战术模式会有所不同。在实施诸如您描述的战术模式之类的通用系统时，可能会再次有所不同。

战略模式在更高的抽象层次上运行，包括有界上下文、上下文映射、无处不在的语言、模型/设计漩涡等。这些模式不受技术限制，适用于战术模式之外。从某种意义上说，它们也比战术模式更重要，并且无论底层技术如何都适用，因为它们更适合人们的思维方式而不是计算机的方式。因此，您仍然可以从通用域中的战略模式中获益。

# python - 数据库错误django

> ID：13809689
> 
> 赞同：1
> 
> 时间：2012-12-10T21:37:58.500
> 
> 标签：python, database, django, class

> /admin/delmarva/event/ 处的 DatabaseError 没有这样的列：delmarva_event.eventdate

我在我的`models.py`文件中创建了一个类：

```
from django.db import models
from django.contrib.auth.models import User

class Event(models.Model):
    eventname = models.CharField(max_length = 100)
    eventdate = models.DateField()
    eventtime = models.TimeField()
    address = models.CharField(max_length = 200)
    user = models.ForeignKey(User)

    def __unicode__(self):
        return self.eventname 
```

现在，当我尝试在我的管理员或我的 main_page 中查看我的事件时，它给了我没有事件日期的错误。我尝试再次同步数据库，但没有任何改变。此外，我将 eventdate 标记为 out 以查看是否收到不同的错误，然后它指出`delmarva_event.eventtime`也不存在。I 这很奇怪，因为它没有 eventname 的问题。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T21:41:06.640

如果修改模型，`syncdb`则不起作用。[您需要一个名为south](http://south.aeracode.org/)的第三方工具 来为您管理这些“迁移”。

如果不是， - 另一种 - NON PREFERRED 方法是删除表并再次创建它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T21:42:45.617

问题可能是您执行了 syncdb 然后添加了 eventdate 列。Syncdb 只创建一次表，不再更新它们。您将需要使用 South 应用程序并进行迁移或删除表，然后再次使用 syncdb。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T21:49:19.350

一个快速的解决方案是删除数据库，然后再次运行 syncdb。它应该与您的 manage.py 文件位于同一目录中。

# ios - 停止 tableView 滚动

> ID：13809691
> 
> 赞同：1
> 
> 时间：2012-12-10T21:38:09.527
> 
> 标签：ios, uitableview

我不确定这是可能的，但这是我的场景：我有这个 tableView 有 3 个部分。如果您触摸 AccessoriesImage 上第 3 部分中的白色星号，它将将该行插入到收藏夹部分，就像 Accessories.sku 一样。这工作得很好。

现在，当您将行添加到收藏夹时，收藏夹部分会变大并将第三部分推到屏幕下方。我知道在向第二部分添加行时显然需要这样做。但是，最后一个部分有 400 多行，您可以非常快速地将前两个部分滚动到屏幕之外，我想在这里停止滚动。

发生的情况是，您向下滚动查看第 3 部分中的行，而前两个部分远离可见屏幕。然后你触摸一行上的星号来添加一个新的收藏夹，这会触发该行被插入到第 2 部分，收藏夹部分。但是，当它进行插入时，它也会将您当前的视图向下推一排。我知道当收藏夹部分可见时这是不可避免的，但是当该部分离开屏幕时，我不想看到我的行因为插入而被推下。

下面的第二张图片可能有助于解释更多。在这里，我们已经向下滚动了屏幕。如果我单击星号添加收藏夹，它会在第 2 部分中向上插入一行，并将您在该图像中看到的行向下推一行。我只想在上面插入时保留这些行。

我很想听听你的想法。谢谢。

![在此处输入图像描述](../Images/97ea834e052b5bf299732ed9498bf8eb.png)

![在此处输入图像描述](../Images/a19ca18ed0515805d4f1a15e42858969.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T21:59:46.260

首先，我会敦促您考虑一种不会在同一屏幕上向用户显示太多重复信息的设计——它会使您的应用程序更直观。例如，有一个切换所有非收藏行的选项。这样，您可以显示所有行并选择收藏夹，或者如果您只想从收藏夹中进行选择，则可以隐藏它们。

其次，如果您决定保留这种设计，我建议您在插入新行时向下滚动表格视图，而不是试图停止由插入引起的滚动。对用户来说，这似乎没有发生滚动。就是这样：

UITableView 有一个 ContentOffset 属性，它是一个 CGPoint。该点的 y 属性是一个 CGFloat，指示表格视图向下滚动多远。因此，在您的代码中，当您添加一行时，同时向下滚动屏幕：

```
// I use some variables for illustrative purposes here (you will need to provide them from your existing code):

// *** put your code to add or remove the row from favorites to your table view data source here ***

// start animation queue
[UIView beginAnimations:nil context:nil];
// check if a row is being added or deleted
if (isAddingRow) {
    // if added, call to insert the row into the table view
    [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:insertedIndexPath] withRowAnimation:UITableViewRowAnimationFade];
    // also tell the table view to scroll down the height of a row
    [tableView setContentOffset:CGPointMake(tableView.contentOffset.x, tableView.contentOffset.y + kHeightOfRow) animated:YES];
} else {
    // if deleted, call to delete the row into the table view
    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:deletedIndexPath] withRowAnimation:UITableViewRowAnimationFade];
    // also tell the table view to scroll down the height of a row
    [tableView setContentOffset:CGPointMake(tableView.contentOffset.x, tableView.contentOffset.y - kHeightOfRow) animated:YES];
}
// launch animations
[UIView commitAnimations]; 
```

或者，如果您在选择一行时不使用动画，您实际上可以关闭动画（与上面一样，没有任何动画）：

```
// check if a row is being added or deleted
if (isAddingRow) {
    // if added, call to insert the row into the table view
    [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:insertedIndexPath] withRowAnimation:UITableViewRowAnimationNone];
    // also tell the table view to scroll down the height of a row
    [tableView setContentOffset:CGPointMake(tableView.contentOffset.x, tableView.contentOffset.y + kHeightOfRow) animated:NO];
} else {
    // if deleted, call to delete the row into the table view
    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:deletedIndexPath] withRowAnimation:UITableViewRowAnimationNone];
    // also tell the table view to scroll down the height of a row
    [tableView setContentOffset:CGPointMake(tableView.contentOffset.x, tableView.contentOffset.y - kHeightOfRow) animated:NO];
} 
```

您还需要仅在 table view contentSize 大于（或将变得）大于 tableView 大小时执行 setContentOffset:animated: 方法。希望有帮助！

# c# - 从 SQL Server 中提取当前值

> ID：13809695
> 
> 赞同：-1
> 
> 时间：2012-12-10T21:38:27.453
> 
> 标签：c#, asp.net, sql-server

我很肯定这已经被问过并回答过，但对于我的生活我找不到它。我不确定我需要搜索的关键字。我有一个 ASP.NET 网站，该网站将信息从 SQL Server 数据库提取到表格和一些图表中。我还希望它在每个图表下方显示当前值（数据库中的步进线每分钟更新一个新值）。我有一个 SQL 查询，它提取前一小时特定 ID 的所有值，我可以使用那个查询还是需要一个新查询来提取最后一个值？然后我该如何显示它？

我的问题：如何在 ASP.NET 网页中显示来自 SQL Server DB 的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:47:29.017

有很多方法可以实现这一点（网上肯定有很多教程可供参考）。例如，您可以尝试声明性方法：

```
<asp:SqlDataSource ID="SqlDataSource1" ConnectionString="myConnectionString"
    SelectCommand="SELECT TOP 1 HookLoad, BlockHeight, BitDepth, ActualWOB, ActualROB, TongTorque, PowerSwivelRPM, PowerSwivelTorque, AirPackTemp, AirPackPressure, AirPackFlow, StandPipe, MPoutput, HoleDepth, Timestamp FROM tbl_stats WHERE (Rig_ID = 5) ORDER BY Timestamp DESC"
    runat="server"></asp:SqlDataSource>

<asp:DataList ID="DataList1" runat="server" DataSourceID="SqlDataSource1">
    <ItemTemplate>
        HookLoad:
        <asp:Literal ID="HookLoadLiteral" runat="server" Text='<%# Eval("HookLoad") %>'></asp:Literal><br />
        .... etc
    </ItemTemplate> 
</asp:DataList> 
```

但这取决于您的应用程序的体系结构。您还可以从后面的代码中设置数据源并在那里进行查询。

# c# - 子类化 PhoneApplicationPage 没有调用继承的方法

> ID：13809699
> 
> 赞同：0
> 
> 时间：2012-12-10T21:38:43.167
> 
> 标签：c#, windows-phone-7, inheritance

我创建了一个这样的基类：

```
`namespace XXX.Screens
{
    public partial class Settings_screen_BASE : PhoneApplicationPage
    {
        public static readonly bool DEBUG = true;

        public Settings_screen_BASE()
        {
            if (DEBUG)
                Debug.WriteLine(this.GetType() + "->" + System.Reflection.MethodBase.GetCurrentMethod().Name);
            InitializeComponent();
            if (DEBUG)
                Debug.WriteLine(this.GetType() + "<-" + System.Reflection.MethodBase.GetCurrentMethod().Name);
        }
    }
}` 
```

而这个子类：

```
 namespace XXX.Screens
{
    public partial class Settings_screen_Child : Settings_screen_BASE
    {

        public Settings_screen_Child()
        {

            if (DEBUG)
                Debug.WriteLine(this.GetType() + "->" + System.Reflection.MethodBase.GetCurrentMethod().Name);
            base.InitializeComponent();
            if (DEBUG)
                Debug.WriteLine(this.GetType() + "<-" + System.Reflection.MethodBase.GetCurrentMethod().Name);
        }
    }
} 
```

当我现在打电话时：

```
 this.NavigationService.Navigate(new Uri("/Screens/Settings_screen_BASE.xaml", UriKind.Relative)); 
```

它运作良好，

但是当我打电话时

```
 this.NavigationService.Navigate(new Uri("/Screens/Settings_screen_Child.xaml", UriKind.Relative)); 
```

我只是得到一个黑屏，调试输出没有显示任何子类的创建。

你能告诉我我在这里想念什么吗？

我原以为调用孩子会与调用基类完全相同。至少它应该调用`Settings_screen_Child()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:22:43.343

不知道发生了什么。您应该确保在子页面中引用了正确的基类。我创建了自己的示例版本，它似乎对我来说效果很好。你可以在这里查看我的示例项目：http: [//sdrv.ms/XLcyvR](http://sdrv.ms/XLcyvR)

# c# - ASP.NET MVC 共享计数器最佳实践

> ID：13809703
> 
> 赞同：1
> 
> 时间：2012-12-10T21:39:18.017
> 
> 标签：c#, .net, asp.net-mvc, concurrency

我的 ASP.NET MVC 4 项目使用 EF5 代码优先，并且一些域对象包含根据传入请求更新的非持久计数器属性。这些请求非常频繁地出现，并且很可能出现多个请求会话正在修改这些计数器的情况。

我的问题是，是否有最佳实践（不一定与 ASP.NET 或 EF 相关）来处理这种情况？我认为（但我不确定）为了讨论，我们可以将域对象视为简单的 POCO（它们就是）。

编辑：根据要求，以下是实际情况：

该系统是订户和内容管理系统。对等服务器正在发出我的系统授权或拒绝的请求。授权请求会导致在对等服务器中打开会话。当对等服务器中的会话关闭时，它会发出一个请求，通知会话已关闭。

我的系统需要提供统计信息——例如，每个内容项（域实体之一）当前打开的会话数——并提供实时数据以及每分钟、每小时、每天、每周等数据。

由于性能问题，无法通过查询数据库来提取这些数字，所以我决定在内存中实现基本计数器，每分钟将它们持久化到数据库中，然后从那里获取每小时、每天等数字.

上述问题源于每个对等服务器请求都会更新这些“计数器”。

我希望现在更清楚了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:51:27.460

听起来您的场景仍然需要可靠的持久性策略。

您的计数器对象可以持久化到[`HttpRuntime.Cache`](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx). Dan Watson 在这里有一篇出色的文章：http: [//www.dotnetguy.co.uk/post/2010/03/29/c-httpruntime-simple-cache/](http://www.dotnetguy.co.uk/post/2010/03/29/c-httpruntime-simple-cache/)

请务必使用`CacheItemPriority.NotRemovable`以确保它在内存回收期间保持状态。缓存将在应用程序域的范围内维护。您可以在缓存中检索和更新计数器（它的线程安全！），并从大概的统计页面或其他选项查询其状态。但是，如果数据需要在运行时范围之外持久化，那么您已经使用的策略就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T03:28:19.763

实际上，我认为在您没有来自测试和分析器工具的足够信息之前，您无需对性能过于谨慎。

但是，如果您使用的是 EF，那么您需要处理 DataContext，这是Martin Fowler 在他的书中描述的*工作单元模式实现。*这种模式的主要思想是减少对数据库的请求量并尽可能多地操作内存中的数据，直到您不提交所有更改。因此，我的简短建议将只是以标准方式使用您的 EF 实体，而不是在每次数据更新时提交更改，而是有一些间隔，例如在 100 次更改之后，在会话、应用程序会话、缓存或别的地方。您唯一应该关心的是每次都使用正确的 DataContext 对象，并且不要忘记在不再需要它时将其丢弃。

# paypal - 为什么我在使用 Paypal 付款后在我的商店中得到一个空白页面？

> ID：13809705
> 
> 赞同：6
> 
> 时间：2012-12-10T21:39:21.720
> 
> 标签：paypal, module, prestashop, prestashop-1.5

当我在我的网站 prestashop 上使用 PayPal 付款时，在结帐付款后，页面变为白色并停止工作，而不是返回到 PayPal 的验证页面，在那里我们可以找到返回商店的机会，其中包含交易数量和确认信息，如“付款完成”

所以我决定重新加载白页，它回到我的网站，它告诉我：

```
"Error occured : Merci de vous reférer aux logs :
1\.  PayPal response:
    2\.  CHECKOUTSTATUS -> PaymentActionCompleted
3\.  TIMESTAMP -> 2012-12-08T22:35:15Z
4\.  EMAIL -> thomaslacroix149@me.com
5\.  PAYERID -> 6E5PYX5CHP6N6
6\.  PAYERSTATUS -> verified
7\.  FIRSTNAME -> Thomas
8\.  LASTNAME -> Lacroix
9\.  COUNTRYCODE -> FR
10\. SHIPTONAME -> Thomas Lacroix
11\. SHIPTOSTREET -> 5 Rue St Hermentaire
12\. SHIPTOCITY -> Martigues
13\. SHIPTOZIP -> 13500
14\. SHIPTOCOUNTRYCODE -> FR
15\. SHIPTOCOUNTRYNAME -> France
16\. ADDRESSSTATUS -> Unconfirmed
17\. CURRENCYCODE -> EUR
18\. AMT -> 1.01
19\. ITEMAMT -> 0.01
20\. SHIPPINGAMT -> 1.00
21\. HANDLINGAMT -> 0.00
22\.     TAXAMT -> 0.00
23\.     INSURANCEAMT -> 0.00
24\.     SHIPDISCAMT -> 0.00
25\. L_NAME0 -> Divers
26\. L_NUMBER0 -> 201
27\. L_QTY0 -> 1
28\. L_TAXAMT0 -> 0.00
29\. L_AMT0 -> 0.01
30\. L_DESC0 -> ...
31\. L_ITEMWEIGHTVALUE0 -> 0.00000
32\. L_ITEMLENGTHVALUE0 -> 0.00000
33\. L_ITEMWIDTHVALUE0 -> 0.00000
34\. L_ITEMHEIGHTVALUE0 -> 0.00000
35\. PAYMENTREQUEST_0_CURRENCYCODE -> EUR
36\. PAYMENTREQUEST_0_AMT -> 1.01
37\. PAYMENTREQUEST_0_ITEMAMT -> 0.01
38\. PAYMENTREQUEST_0_SHIPPINGAMT -> 1.00
39\. PAYMENTREQUEST_0_HANDLINGAMT -> 0.00
40\. PAYMENTREQUEST_0_TAXAMT -> 0.00
41\. PAYMENTREQUEST_0_INSURANCEAMT -> 0.00
42\. PAYMENTREQUEST_0_SHIPDISCAMT -> 0.00
43\. PAYMENTREQUEST_0_TRANSACTIONID -> 2B4648015B651205G
44\. PAYMENTREQUEST_0_INSURANCEOPTIONOFFERED -> false
45\. PAYMENTREQUEST_0_SHIPTONAME -> Thomas Lacroix
46\. PAYMENTREQUEST_0_SHIPTOSTREET -> 5 Rue St Hermentaire
47\. PAYMENTREQUEST_0_SHIPTOCITY -> Martigues
48\. PAYMENTREQUEST_0_SHIPTOZIP -> 13500
49\. PAYMENTREQUEST_0_SHIPTOCOUNTRYCODE -> FR
50\. PAYMENTREQUEST_0_SHIPTOCOUNTRYNAME -> France
51\. PAYMENTREQUEST_0_ADDRESSSTATUS -> Unconfirmed
52\. L_PAYMENTREQUEST_0_NAME0 -> Divers
53\. L_PAYMENTREQUEST_0_NUMBER0 -> 201
54\. L_PAYMENTREQUEST_0_QTY0 -> 1
55\. L_PAYMENTREQUEST_0_TAXAMT0 -> 0.00
56\. L_PAYMENTREQUEST_0_AMT0 -> 0.01
57\. L_PAYMENTREQUEST_0_DESC0 -> ...
58\. L_PAYMENTREQUEST_0_ITEMWEIGHTVALUE0 -> 0.00000
59\. L_PAYMENTREQUEST_0_ITEMLENGTHVALUE0 -> 0.00000
60\. L_PAYMENTREQUEST_0_ITEMWIDTHVALUE0 -> 0.00000
61\. L_PAYMENTREQUEST_0_ITEMHEIGHTVALUE0 -> 0.00000
62\. PAYMENTREQUESTINFO_0_TRANSACTIONID -> 2B4648015B651205G
63\. PAYMENTREQUESTINFO_0_ERRORCODE -> 0
64\. Cart changed since the last checkout express, please make a new Paypal checkout payment 
```

所以我无法完成付款方式。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-15T13:31:53.040

有两个与此相关的已知问题。

*   您需要在`modules/paypal`目录上添加 755 权限。
*   也许`tools/tcpdf/tcpdf.php`文件已损坏，您需要获取它的新版本（您可以通过下载全新安装的 Prestashop 来获取它）。

# java - 包中的Java包？

> ID：13809713
> 
> 赞同：27
> 
> 时间：2012-12-10T21:40:01.353
> 
> 标签：java, eclipse, package

我正在使用 eclipse 3.8 indigo，但我不知道为什么，当我创建一个新包时，新包的目的地会出现在外面。我想在一个包中创建新包：包中包。我试图复制/粘贴新创建的包或移动，但它只是复制。

例如，我想在我的主源包中创建不同的包：对话框、视图、表格等。例如：

```
com.new.application // this is the the main package created by wizard
com.new.application.view // package that contains all views. 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-12-10T21:48:34.383

实际上，Java 中没有子包之类的东西——每个包都是一个完全独立的实体，名称似乎是分层的，只是为了方便。例如，具有默认可见性的项目在子包中不可见，尽管人们可能会期望。

如果您的问题更多地与表示和美学有关而不是实质，那么您正在寻找的是 Eclipse 包资源管理器中的分层包表示设置：单击包资源管理器右上角的小向下三角形/箭头，然后在“Package Presentation”子菜单中选择“Hierarchical”：

![在此处输入图像描述](../Images/43a0ad584fc1d15f72467c3aa40b4fab.png)

这是一个全局设置，将影响您所有打开/未打开的项目。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-10T21:45:32.843

没有包内包的概念。每个包都是单独的命名空间。我想如果你去文件夹视图而不是包视图，你可能会在另一个下面看到一个。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-10T21:45:55.900

eclipse 包资源管理器有两个视图选项：平面或分层。您可能在平面视图中（这是默认设置，谁知道为什么）。通过单击包视图右上角的小三角形，然后更改包表示，将视图更改为分层视图。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-18T08:10:10.193

首先，您应该选择分层表示。

其次，您应该完全授权包名称。例如，你有'main'包，你将创建'sub'包，你应该用'main.sub'来授权它。如果您的包中只有 1 个包，您可能看不到这些包的层次结构。

[![在此处输入图像描述](../Images/777ff45209df09471ad4936956d8f65b.png)](https://i.stack.imgur.com/pZHtg.png)

之后，包视图：

[![在此处输入图像描述](../Images/f96e7839ca6e7c9144e2610512b6ffff.png)](https://i.stack.imgur.com/zS1xz.png)

第二个子包创建：

[![在此处输入图像描述](../Images/c0fe67b52f94b01737b4922754afb651.png)](https://i.stack.imgur.com/LyCXm.png)

最后包视图：

[![在此处输入图像描述](../Images/ba966e903b9312ab9d01e141031dc820.png)](https://i.stack.imgur.com/MXeti.png)

# asp.net - 使用 ASP.NET Web API 到多对多关系的 HTTP POST

> ID：13809714
> 
> 赞同：9
> 
> 时间：2012-12-10T21:40:07.727
> 
> 标签：asp.net, post, asp.net-web-api, controller, many-to-many

我是 ASP.net（和一般编程）的新手，我在构建 Web API 时遇到了麻烦。更具体地说，我在这两个方面需要帮助：

1.  如何配置我`DOCcontroller`发布新文档（DOC 表）。
2.  如何制作实际的 ajax 帖子——我无法传递`EXT_GUID`参数。就目前而言，当我尝试发布时出现错误。“无法将多个参数（doc 和 parentOwner）绑定到请求的内容。”

本质上这是一个简单的文档管理系统。我希望通过让用户从外部数据库（EXT_GUID 字段）提供一个 GUID 作为过滤器/参数来获取/发布文档 (DOC)。每个文档可以有多个 EXT_GUID，每个 EXT_GUID 可以有多个文档 (DOC)。您可以假设我们在 http 帖子之前填充了 EXT_GUID 字段。

这是 DOC 控制器代码

```
//POST api/DOC
public HttpResponseMessage PostDOC(DOC doc, List<string> parentOwners)
{
    if (ModelState.IsValid)
    {            
        var parents = db.BIMs.Where(bx => parentOwners.Contains(bx.EXT_GUID));

        foreach (var p in parents)
        doc.Owners.Add(p);

        db.DOCs.Add(doc);
        db.SaveChanges();

        HttpResponseMessage response = Request.CreateResponse(HttpStatusCode.Created, doc);
        response.Headers.Location = new Uri(Url.Link("DefaultApi", new { id = doc.Id }));
        return response;
    }
    else
    {
        return Request.CreateResponse(HttpStatusCode.BadRequest);
    }
} 
```

这是我的模型设置——EntityFramework codefirst 的东西

```
public class EXT
{
    public int Id { get; set; }
    public string EXT_GUID { get; set; }
    public int ProjectID { get; set; }
    public virtual ICollection<DOC> DOCs { get; set; }
}

public class DOC
{
    public int Id { get; set; }
    public int ProjectID { get; set; }
    public string Subject { get; set; }
    public string Link { get; set; }
    public virtual ICollection<EXT> EXTs { get; set; }
} 
```

这是更多的存储模型...

```
public StoreDBContext() : base("name=StoreDBContext")
{
}
public DbSet<EXT> EXTs { get; set; }
public DbSet<DOC> DOCs { get; set; }
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    //Set FLUENT API config for many to many here
    modelBuilder.Entity<EXT>()
    .HasMany(a => a.DOCs)
    .WithMany()
    .Map(x =>
    {
        x.MapLeftKey("EXT_Id");
        x.MapRightKey("DOC_Id");
        x.ToTable("EXTsDOCs");
    });
} 
```

AJAX 代码

```
function AddDOC() {
    var parentOwner = "{\"" + $('#txtaddEXT').val() + "\"}";
    jQuery.support.cors = true;
    var DOC = {
        ProjectId: ProjectID,
        Subject: $('#txtaddDOCSubject').val(),
        Link: $('#txtaddDOCLink').val(),
            parentOwner: parentOwner
    };

    $.ajax({
        url: "http://localhost:54171/api/DOC/",
        type: 'POST',
        data: JSON.stringify(DOC),
        contentType: "application/json;charset=utf-8",
        success: function (data) {
            WriteResponse(data);
        },
        error: function (x, y, z) {
            alert(x + '\n' + y + '\n' + z);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-14T07:39:59.360

您从客户端收到的内容和您将保存在数据库中的内容是两件不同的事情。您的 doc 对象没问题：

```
var DOC = {
    ProjectId: ProjectID,
    Subject: $('#txtaddDOCSubject').val(),
    Link: $('#txtaddDOCLink').val(),
    parentOwner: parentOwner
}; 
```

现在您需要更改服务器逻辑。制作这样的模型：

```
public class DocReceivedModel 
{
    public int ProjectID { get; set; }
    public string Subject { get; set; }
    public string Link { get; set; }
    public List<string> parentOwner { get; set; }
} 
```

那么您的 PostDOC 方法将是：

```
 public HttpResponseMessage PostDOC(DocReceivedModel docReceived)
            {
                if (ModelState.IsValid)
                {
                    Doc newDoc = new Doc();
                    newDoc.ProjectID = docReceived.ProjectID
                    newDoc.Subject = docReceived.Subject
                    newDoc.Link = docReceived.Link

                    var parents = db.BIMs.Where(bx => docReceived.parentOwners.Contains(bx.EXT_GUID));
                    foreach (var p in parents)
                        newDoc.Owners.Add(p);
                            // I not see in your model Owners, maybe this is EXTs but I suppose you catch the idea

                    db.DOCs.Add(newDoc);
                    db.SaveChanges();

                    HttpResponseMessage response = Request.CreateResponse(HttpStatusCode.Created, newDoc);
                    response.Headers.Location = new Uri(Url.Link("DefaultApi", new {id = newDoc.Id}));
                    return response;
                }
                else
                {
                    return Request.CreateResponse(HttpStatusCode.BadRequest);
                }
            } 
```

# magento - 多商店设置 Magento 最大？

> ID：13809716
> 
> 赞同：2
> 
> 时间：2012-12-10T21:40:19.190
> 
> 标签：magento

我已经使用多存储备份设置了 magento 安装。但是，最近我们正在处理一些严重的托管/性能问题。

一切都针对服务器端的 magento 进行了优化，我们也在使用缓存。但是，尤其是在执行数据库密集型操作（将多个产品添加到商店）时，我们看到服务器的性能下降。

我一直在想什么会出错，我想这与我们在一个后端拥有的商店数量有关。事实上，目前在服务器上安装了 20 个店面。

有谁知道可以在一个 Magento 后端设置为多商店的商店数量是否有上限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:11:27.213

只是为了回答您的基本问题，没有可以在多商店后端运行的商店的最大数量。这种数据库密集型的缓慢可能与商店的数量没有直接关系，而是在保存产品时重新索引价格的结果。

看看这些链接，有一些关于如何解决这个问题的解决方案：

[http://www.magentocommerce.com/boards/viewthread/221229/P0/](http://www.magentocommerce.com/boards/viewthread/221229/P0/) http://www.magentocommerce.com/boards/viewthread/38818/P90/#t367525

# python - 在 Python 中解码 Simulink 的 UDP 数据包

> ID：13809717
> 
> 赞同：2
> 
> 时间：2012-12-10T21:40:21.653
> 
> 标签：python, udp, decode, packet, simulink

我有一个 Simulink 模型通过 UDP 将数据发送到另一个程序（Blender），我可以在其中接收数据包，但我无法弄清楚如何正确解码它们。

在 Simulink 模型中，我只是让它发送一个基于正弦波的值，没什么特别的，只是一个像 1.452 之类的值。在 Blender 中，我让它吐出从数据包中接收到的数据，并且我正在接收如下内容：

```
b'<\xa6ya\x05\x93\xe3?' 
```

我不知道如何解码。它似乎有一些十六进制值，但除此之外我迷路了。我什至不确定所有这些数据包含什么。它只是来自 Simulink 的值，还是包含有关发送方和接收方 IP 地址、端口等信息的信息......？

**更新**：我更新了 Simulink 模型以通过 UDP 传输常量值以进行调试/调查。该值为 0.5234，我的 Python 脚本吐出的数据是：

```
b'\xab>W[\xb1\xbf\xe0?' 
```

其中，当转换为十六进制读取（使用 hexlify）：

```
b'ab3e575bb1bfe03f' 
```

我将如何从中提取/解码 0.5234？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T22:47:41.627

您可以使用[`struct`](http://docs.python.org/3.2/library/struct)来解码您的二进制数据，在这种情况下，它似乎是一个[`double`](http://docs.python.org/3.2/library/struct#format-characters)值：

```
>>> import struct
>>> struct.unpack('d', b'\xab>W[\xb1\xbf\xe0?')
(0.5234,) 
```

# drupal - 使用 Authorize.net 的 DPM 方法时，我只能得到一个神秘的错误消息

> ID：13809720
> 
> 赞同：1
> 
> 时间：2012-12-10T21:40:29.370
> 
> 标签：drupal, e-commerce, authorize.net, drupal-commerce

我有一个简单的结帐表格，我正在使用 Authorize.net 的 DPM（直接发布方法），并且不断收到以下错误消息：

`An error occurred while trying to report this transaction to the merchant. An e-mail has been sent to the merchant informing them of the error. The following is the result of the attempt to charge your credit card.`

 ````
 This transaction has been approved. 
```` 

`It is advisable for you to contact the merchant to verify that you will receive the product or service.`

关于可能导致此错误的任何想法？Authroize.net 的支持有 0 个有用的信息，并且它们不存储失败的 API 响应。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T06:10:48.467

当 Authorize.Net 尝试联系您的服务器但未成功时，会发生此错误。交易已获批准，但他们无法像您希望的那样将用户送回您的网站。

他们的文章[Relay Response Basics and Troubleshooting](http://community.developer.authorize.net/t5/The-Authorize-Net-Developer-Blog/Relay-Response-Basics-and-Troubleshooting/ba-p/9536)非常详细地介绍了这个问题。

# python - Python：我如何找到字符串中每个字符的列表？

> ID：13809726
> 
> 赞同：-1
> 
> 时间：2012-12-10T21:40:45.010
> 
> 标签：python, string

例如：

```
>>> str = "aaabbc" 
```

我将如何获得这样的输出：

```
str.count(a) = 3
str.count(b) = 2
str.count(c) = 1
str.count(d) = 0 
```

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T21:41:36.337

```
In [27]: mystr = "aaabbc"

In [28]: collections.Counter(mystr)
Out[28]: Counter({'a': 3, 'b': 2, 'c': 1})

In [29]: dict(collections.Counter(mystr))
Out[29]: {'a': 3, 'b': 2, 'c': 1} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T21:55:51.897

考虑到您还希望为不在字符串中的元素返回 0，您可以尝试以下操作：

```
def AnotherCounter (my_string, *args):
    my_dict = {ele : 0 for ele in args}
    for s in my_string:
        my_dict[s] +=1
    return my_dict 
```

结果：

```
>>> AnotherCounter("aaabbc", 'a', 'b', 'c', 'd')
{'a': 3, 'c': 1, 'b': 2, 'd': 0} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T21:42:34.800

```
from collections import defaultdict

d = defaultdict(int)

for ltr in my_string:
    d[ltr] += 1

print d 
```

之前已经问过几次了...

这是一个适用于 python < 2.7 的答案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T21:43:40.533

但是，使用正则表达式，您不仅限于单个字符：

```
import re
p = re.compile("a")
len(p.findall("aaaaabc")) //5 
```

如果您想了解更多信息，请访问此处：[http](http://docs.python.org/2/howto/regex.html) ://docs.python.org/2/howto/regex.html 。

# php - Javascript 到 PHP PDO 到 MySQL 查询返回空

> ID：13809733
> 
> 赞同：1
> 
> 时间：2012-12-10T21:41:11.927
> 
> 标签：php, javascript, mysql, api, pdo

我正在使用 Javascript 构建 API，出于安全原因，我将 PHP 数据库调用切换到 PDO。

自从这样做以来，我在查询返回空数组时遇到了麻烦（注意：不是 MySQL 语法错误）。最新的例子是这样的：

```
/*JAVASCRIPT*/
var getSampleEntity = function(params) {
//Returns Object
return $.ajax({ 
    url: URL + 'downloadQuadrat_Organism.php',
    type: 'POST',
    data: { 'organismID': params.oid, 'quadratID': params.qid },
    dataType: dataType
});
} 
```

从浏览器发送的标头数据：

```
/*PACKAGE HEADER INFO*/
Request URL:http://..../downloadQuadrat_Organism.php
Request Method:POST
Status Code:200 OK
...
Form Data:
organismID:3 
```

哪个发送到服务器...

```
/*PHP*/
//Init
$resultset = array();
$quadratID = $_POST['quadratID'];
$organismID = $_POST['organismID'];
$sql = 'SELECT * FROM Quadrat_Organism WHERE organismID = :organismID OR WHERE quadratID = :quadratID';

//Main
try{
    $db = connect();
    $stmt = $db->prepare($sql);
    $stmt->bindParam(':quadratID', $quadratID);
    $stmt->bindParam(':organismID', $organismID);
    $stmt->execute();

    while($row = $stmt->fetch(PDO::FETCH_ASSOC))
        $resultset[] = $row;

    //Return result in JSON
    $resultset = json_encode($resultset);
    print_r($resultset);

} catch(PDOException $e){
    print 'Error!: '.$e->getMessage().'<br/>';
}//End try catch

$db = null; 
```

我期望 JSON 中的结果数组（数据库中的虚拟数据应该返回 5 个结果），而不是我收到 []（空 JSON 数组）。

我相信问题出在 PHP 级别，但我无法确定问题所在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T21:42:59.830

您的 where Condition MySQL 查询中有错误：

试试这个，用这个

```
$sql = 'SELECT * FROM Quadrat_Organism 
WHERE organismID = :organismID OR quadratID = :quadratID'; 
```

代替：

```
$sql = 'SELECT * FROM Quadrat_Organism 
WHERE organismID = :organismID OR WHERE quadratID = :quadratID'; 
```

在查询中只使用一个 where 。

# eclipse - Mac Eclipse Git 存储库 - 删除所有内容

> ID：13809740
> 
> 赞同：0
> 
> 时间：2012-12-10T21:41:35.093
> 
> 标签：eclipse, git

我失去了所有的工作——我在哭

我使用了 Eclipse Git Repositories，只删除了 git（来自 Eclipse Git Repository Explore），它完全删除了一切，一切，一切......？

任何帮助都非常感谢。

我什至没有终端......它都消失了

提前致谢

我很高兴，我在终端中找到了 .git 并按照“dunni”的建议做了（接受它作为解决方案）。大家，谢谢你们——我完全惊慌失措。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:00:17.877

如果 git status 仍然声明“要提交的更改”并且所有丢失的文件都列在那里，那么您可以使用命令重做删除

```
git reset --hard 
```

这会将您的工作目录重置为主分支中的最后一次提交。但是，如果您的工作目录中有未提交的工作，那么这项工作就会丢失，但我认为，与完全丢失相比，这是一个小问题。

# c - 类壳程序 C

> ID：13809744
> 
> 赞同：-2
> 
> 时间：2012-12-10T21:41:48.447
> 
> 标签：c

下面的代码应该作为 shell 工作。它具有上一个和下一个选项、类似历史的功能、退出和执行命令。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#define BUFFER_SIZE 256
#define HISTORY_LENGTH 128

int executeCommand(char*cmd)
{
    return(!strcmp(cmd,"e\n"));
}

int exitCommand(char*cmd)
{
    return (!strcmp(cmd,"exit\n"));
}

int previousCommand(char*cmd)
{
    return (!strcmp(cmd,"p\n"));
}

int nextCommand(char*cmd)
{
    return (!strcmp(cmd,"n\n"));
}

void execute(char *line)
{
    line[strlen(line)-1]='\0';
    char **arguments;
    char* temp;
    int i=0;
    arguments=(char**)malloc(sizeof(char)*10);
    temp=strtok(line," ");
    arguments[i]=malloc(strlen(temp)*sizeof(char));
    if(arguments[i]!=NULL)
    {
        strcpy(arguments[i],temp);
        i++;
    }
    else
    {
        printf("Out of memory");
    }
    while(temp!=NULL)
    {
        temp=strtok(NULL," ");
        if(temp==NULL){
            arguments[i]=NULL;
        }
        else{
            arguments[i]=malloc(strlen(temp)*sizeof(char));
            if(arguments[i]!=NULL)
            {
                strcpy(arguments[i],temp);
                i++;
            }
        }
    }
    printf("%s  ",arguments[0]);
    printf("%s  ",arguments[1]);
    printf("%s  ",arguments[2]);
    execvp(arguments[0],arguments);
}

int main(int argc, char*argV[]) {
    int i;
    char *cmd=(char*)malloc(sizeof(char)*BUFFER_SIZE);
    char **history=NULL;
    int historylength=0;
    int currentCommand=0;
    history=(char**)malloc(sizeof(char)*BUFFER_SIZE);
    do{
        fgets(cmd,BUFFER_SIZE-1,stdin);
        if(exitCommand(cmd))
            break;
        else
            if(previousCommand(cmd))
            {
                if(currentCommand>0)
                    printf("%s",history[--currentCommand]);
                else if(currentCommand==0)
                {
                    currentCommand=historylength;
                    printf("%s",history[--currentCommand]);
                }
            }
            else
                if(nextCommand(cmd))
                {
                    if(currentCommand<historylength)
                        printf("%s",history[currentCommand++]);
                }
                else
                    if(executeCommand(cmd))
                    {
                        execute(history[--currentCommand]);
                    }
                    else
                    {
                        history[historylength]=malloc(strlen(cmd)*sizeof(char));
                        if(history[historylength]!=NULL)
                        {
                            strcpy(history[historylength],cmd);
                            currentCommand=++historylength;
                        }
                        else
                        {
                            printf("Out of memory");
                            break;
                        }
                    }

    } while(1);

    free(cmd);

    for(i=0;i<historylength;i++)
        free(history[i]);
    free(history);

    return 0;
} 
```

我想让这个函数为 cat 工作。我输入 e cat main.c 我希望它执行 cat 命令但它什么也没做，我在这里做错了什么？我不是这方面的专家，所以我感谢所有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T21:44:15.460

这是不正确的：

```
arguments=(char**)malloc(sizeof(char)*10); 
```

因为`arguments`是a `char**`，所以代码需要分配`sizeof(char*)`。改成：

```
arguments = malloc(10 * sizeof(*arguments)); 
```

同样的错误`history`也。此外，请参阅[是否强制转换 malloc 的结果？](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)

为写入终止空字符分配了一个`char`小于所需的值。改变：`char*``strcpy()`

```
arguments[i]=malloc(strlen(temp)*sizeof(char)); 
```

到：

```
arguments[i] = malloc(strlen(temp) + 1); 
```

`sizeof(char)`保证是`1`并且可以从尺寸计算中省略。

防止`i`超出分配给`arguments`. 由于代码目前的情况，没有任何保护措施可以防止`i`超出`9`（`0`to是分配元素`9`的有效值）。`i``arguments``10`

# jquery - jQuery ajax 调用未在成功调用时将“数据”返回到重定向页面

> ID：13809745
> 
> 赞同：0
> 
> 时间：2012-12-10T21:41:51.033
> 
> 标签：jquery, ajax

```
<a href="PHP/LogOut.php" id="LogOut">Log Out</a> 
```

链接 a#LogOut 调用一个 PHP 脚本，该脚本结束所有会话并以“您已注销”的数据进行响应。

```
<?php
    session_start();
    $_SESSION = array();
    if (ini_get("session.use_cookies")) {
        $params = session_get_cookie_params();
        setcookie(session_name(), '', time() - 42000,
        $params["path"], $params["domain"],
        $params["secure"], $params["httponly"]
    );
}
session_destroy();
echo "You have logged out";
?> 
```

一切正常，除了一旦您注销并返回登录页面，“数据/消息”就不会被写入页面。我怀疑这是由于'document.location.href'。如果我放置一个“console.log(data)”，它会在控制台中闪烁一秒钟，然后在加载返回页面时消失。如何让它运行脚本、重定向和显示消息？

```
$('a#LogOut').live('click',function(){
    $.ajax({
    type: "POST",
    url: $(this).attr('href'),
    success: function(data){
    var message = $(data).text();
    if (data==="You have logged out") {
    console.log( data );
    document.location.href='/returnedpage.php';
    $('#messageBox').show().html('<ul></li>' + data + '</li></ul>');

 } else {
    alert('not working');
 }
}
  });
  return false;
}); 
```

我可以使用 .load 函数重新加载内容，但这让我很生气，我想把它做好。基本上，我需要将“消息”写入“returnedpage.php”页面上的 div#messageBox。泰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T02:14:08.817

根据@james emanon 的回复，我能够得到更适合我的东西。他确实很好地回答了我提出的问题，所以他得到了他的“检查”。我所做的是删除 ajax 调用并将 PHP 的最后几行更改为：

```
header ("Location: /FXCM/FXCM-Conversion.php?status=LO");
exit(); 
```

我想为什么要让jQuery在我可以在服务器端做的时候附加一个参数的url。然后在JS中我这样做了：

```
 var url = document.URL.split('status=')[1];
    if(url == undefined) {
        url = '';
    }
    if(url != ''){
        var message = 'You are logged out';
        $('#messageBox').show().removeClass('error').html('<ul><li>' + message + '</li></ul>');
    } 
```

经过一番思考，我认为这是要走的路。非常感谢以上所有帮助我思考和学习的人，而不仅仅是 C&P——这次我很感激！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T21:46:10.090

您必须在返回的页面上执行此操作，而不是在当前页面上。

要么通过查询字符串传递一些东西（例如`?lo=1`表示已注销），使用特定的已注销页面，通过点击它，您知道您只有通过单击注销（例如`loggedout.php`）才能到达那里，或者设置一个临时cookie，在returnedpage.php上阅读它，使用它来显示消息，并在一次性使用后删除 cookie。这是我见过的三种方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T21:49:20.307

抱歉，如果我没有完全理解您的问题 - 但是您在重定向之前控制台日志，所以您可以看到来自 console.log的*数据。*然后你被重定向并且该*数据*在后续页面上消失了。

#messageBox 在当前页面或重定向页面上的位置？

1.  如果在当前页面上，您可能希望在此之后放置重定向：

    $('#messageBox').show().html('

    ');

并为其添加一些延迟，以便用户可以在重定向之前看到消息。

2 如果您想在重定向页面上发送消息，那么我的猜测是您必须在 url 末尾传递数据作为参数。

```
document.location.href='/returnedpage.php?thisData=' + data; 
```

然后在重定向页面上，获取“thisData”的名称/值对，然后显示它。

如果我完全偏离你的问题，请道歉。

要执行编号 #2 - 在后续页面上，您可以执行以下操作：

```
*** caveat: this is JUST FOR THIS ONE USE CASE. I am assuming thisData is the ONLY param in the url. 
```

在此页面中，只需执行此操作。

```
<div id="messageBox" display="none"></div>

<script>
var url = document.URL;
var dispData=url.split('thisData=')[1];
$('#messageBox').show().html(dispData );
</script> 
```

# c++ - 在 C++ 中，如果两个对象都重载 operator< 我以为在 cout << "Hello world" cout对象有一个运算符重载，因此我们可以传递strings给cout对象的成员函数。 但是在一些示例代码中，我看到一个类中定义了一个运算符重载。< 问问题 问问题 2012-12-10T21:41:51.983 219 次 This question shows research effort; it is useful and clear 4 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我以为在 cout << "Hello world" cout对象有一个运算符重载，因此我们可以传递strings给cout对象的成员函数。 但是在一些示例代码中，我看到一个类中定义了一个运算符重载。 class GenericPlayer : public Hand { .. friend ostream& operator <<(ostream& os, const GenericPlayer& aGenericPlayer); .. }; ... cout << aGenericPlayer << endl; ... 即使不是，如果两者都cout超载aGenericPlayer怎么operator<<办？ 即使不是，如果 cout 和 aGenericPlayer 都重载 operator<< 怎么办？ std::cout是一个std::ostream对象，所以 anystd::ostream& operator<<(std::ostream, SomeType)都可以使用std::cout. 但重点是操作符的第二个参数不同，所以重载也不一样。第一个“字符串”类似于 std::ostream& operator<<(std::ostream&, const char*); 第二个 std::ostream& operator <<(std::ostream& os, const GenericPlayer& aGenericPlayer); 因此，它们是不同的运算符重载，没有歧义。 c++operator-overloading 4 4 回答 4 This answer is useful 8 即使不是，如果 cout 和 aGenericPlayer 都重载 operator<< 怎么办？ std::cout是一个std::ostream对象，所以 anystd::ostream& operator<<(std::ostream, SomeType)都可以使用std::cout. 但重点是操作符的第二个参数不同，所以重载也不一样。第一个“字符串”类似于 std::ostream& operator<<(std::ostream&, const char*); 第二个 std::ostream& operator <<(std::ostream& os, const GenericPlayer& aGenericPlayer); 因此，它们是不同的运算符重载，没有歧义。 于 2012-12-10T21:44:54.000 回答 This answer is useful 2 首先，既cout不能也aGenericPlayer不能超载任何东西。它们是对象，重载基于类型（即使您通常不会说类型 X 重载<<，而是说有一个重载<<可以将类型 X 作为其第二个参数）。 其次，重载决议基于所有参数，而不仅仅是一个。< <for有大约 1="" 3="" 6="" 20="" 种不同的重载std::istream（它是="" of="" 类型的基类std::cout），但没有一个（至少在标准库中）将="" agenericplayer作为第二个参数。因此，如果第二个操作数不是="" a="" ，则不能使用它们genericplayer。同样，operator<<(="" int,="" genericplayer="" const&="" )除了您拥有的="" ,="" 您还可以拥有一个；如果左边有类型int，右边有类型，就会被调用genericplayer。（我想不出这不会是运算符重载滥用的任何情况，但语言肯定允许这样做。）="" 于="" 2012-12-10t21:57:49.837="" 回答="" this="" answer="" is="" useful="" 为了cout接受一个genericplayer对象，你必须重载operator<<。operator<<也称为插入运算符。因此，如果您将其放在上下文中，您将自定义函数的输出插入到cout.="" 重载的运算符返回对原始="" ostream="" 对象的引用，这也意味着您可以组合插入。您必须重载插入运算符才能识别ostream左侧的对象和genericplayer右侧的="" a。另请参阅为您自己的类重载="" <<="" 运算符="" 。就目前cout而言，cout是一个class="" ostream代表标准输出流的对象。它对应于cstdio流stdout。因为cout是类="" 的对象，我们可以使用例如插入运算符="" (ostream::operator<<)="" 将字符作为格式化数据写入它，或者使用="" write="" 成员函数作为未格式化数据写入它="" 2012-12-10t21:45:00.827="" 如果="" cout="" 和="" agenericplayer="" 都重载="" operator<<="" 它们都没有重载它，它作为常规函数（不是成员）被重载。请注意friend您的示例中的使用；这允许函数在不成为成员的情况下访问类的内部。因此，可以避免这种情况。="" 2012-12-10t21:51:35.727="" related="" logging="" -="" 如何禁用="" log.logger="" android="" 制作可以处理大位图的表达式="" .net="" 如何使用温莎城堡解决不同的问题="" php="" 如何将="" $_post="" 属性放入="" httpost="" 以及如何将带有列表的对象发送到="" (json)="" ios="" apns="" 通知未到达在="" apple="" mdm="" 中注册的设备="" 如何从="" mysql="" db="" 填充下拉列表并基于选择以="" 形式填充另一个下拉列表？="" quicksort="" 快速排序粉碎的例子="" cocoa="" 将选项卡焦点移动到另一个="" nswindow="" 的视图，然后再返回="" 代码在mysql中加倍netsalary="" discovery="" 如何获取对等列表？="" reference="" php × 1429865="" c="" c++ × 756500="" nginx × 49975="" mongodb × 159057="" mybatis × 3233="" anaconda × 13410="" pycharm × 14671="" python × 1902243="" vscode × 56040="" docker × 110988="" github × 49000="" flask × 49129="" ffmpeg × 24037="" jmeter × 16910="" matplotlib × 63493="" bootstrap × 54641<="" h1="">> ID：13809747
> 
> 赞同：4
> 
> 时间：
> 
> 标签：c++, operator-overloading

我以为在

```
cout << "Hello world" 
```

`cout`对象有一个运算符重载，因此我们可以传递`strings`给`cout`对象的成员函数。

但是在一些示例代码中，我看到一个类中定义了一个运算符重载。

```
class GenericPlayer : public Hand
{
    ..
    friend ostream& operator <<(ostream& os, const GenericPlayer& aGenericPlayer);
    ..
};

...
cout << aGenericPlayer << endl;
... 
```

即使不是，如果两者都`cout`超载`aGenericPlayer`怎么`operator<<`办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T21:44:54.000

> 即使不是，如果 cout 和 aGenericPlayer 都重载 operator<< 怎么办？

`std::cout`是一个`std::ostream`对象，所以 any`std::ostream& operator<<(std::ostream, SomeType)`都可以使用`std::cout`. 但重点是操作符的第二个参数不同，所以重载也不一样。第一个“字符串”类似于

```
std::ostream& operator<<(std::ostream&, const char*); 
```

第二个

```
std::ostream& operator <<(std::ostream& os, const GenericPlayer& aGenericPlayer); 
```

因此，它们是不同的运算符重载，没有歧义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T21:57:49.837

首先，既`cout`不能也`aGenericPlayer`不能超载任何东西。它们是对象，重载基于类型（即使您通常不会说类型 X 重载`<<`，而是说有一个重载`<<`可以将类型 X 作为其第二个参数）。

其次，重载决议基于所有参数，而不仅仅是一个。`<<`for有大约 20 种不同的重载`std::istream`（它是 of 类型的基类`std::cout`），但没有一个（至少在标准库中）将 a`GenericPlayer`作为第二个参数。因此，如果第二个操作数不是 a ，则不能使用它们`GenericPlayer`。同样，`operator<<( int, GenericPlayer const& )`除了您拥有的 , 您还可以拥有一个；如果左边有类型`int`，右边有类型，就会被调用`GenericPlayer`。（我想不出这不会是运算符重载滥用的任何情况，但语言肯定允许这样做。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T21:45:00.827

为了`cout`接受一个`GenericPlayer`对象，你必须重载`operator<<`。`operator<<`也称为**插入**运算符。因此，如果您将其放在上下文中，您将自定义函数的输出插入到`cout`. 重载的运算符返回对原始 ostream 对象的引用，这也意味着您可以组合插入。您必须重载插入运算符才能识别`ostream`左侧的对象和`GenericPlayer`右侧的 a。另请参阅[为您自己的类重载 << 运算符](http://msdn.microsoft.com/en-us/library/1z2f6c2k%28v=vs.80%29.aspx) 。就目前`cout`而言，`cout`是一个`class ostream`代表标准输出流的对象。它对应于`cstdio`流`stdout`。因为`cout`是类 ostream 的对象，我们可以使用例如插入运算符 (ostream::operator<<) 将字符作为格式化数据写入它，或者使用 write 成员函数作为未格式化数据写入它

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T21:51:35.727

> 如果 cout 和 aGenericPlayer 都重载 operator<<

它们都没有重载它，它作为常规函数（不是成员）被重载。请注意`friend`您的示例中的使用；这允许函数在不成为成员的情况下访问类的内部。因此，可以避免这种情况。</for有大约>

# iphone - Pinterest API 将图像的图片固定在 iphone 代码示例上

> ID：13809748
> 
> 赞同：0
> 
> 时间：2012-12-10T21:41:57.957
> 
> 标签：iphone, ios, ipad, pinterest

嗨，你们中的任何人都能够访问 pinterest api 在 iphone 或 ipad 上发布图片或图像吗？如果可以的话，你可以发布一些样本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:14:38.943

目前没有可用的 API，但您显然可以[在此处](https://docs.google.com/spreadsheet/viewform?pli=1&formkey=dHBvVkVsN2NzUVEybDhjeFZ0ZzFKWnc6MQ#gid=0)注册以在可用时收到通知。

# batch-file - 即时创建 invisible.vbs 时出错？

> ID：13809752
> 
> 赞同：1
> 
> 时间：2012-12-10T21:42:25.463
> 
> 标签：batch-file, vbscript

当我使用批处理文件创建文件`invisible.vbs`然后删除时，它会因错误而停止。基本上，我想做的是让批处理文件制作这个文件。

这是我运行批处理文件时遇到的错误：

```
C:\Users\HP\Desktop>"New Text Document.bat"
 CreateObject("Wscript.Shell").Run """"
'WScript.Arguments' is not recognized as an internal or external command, operable program or batch file.
'""""' is not recognized as an internal or external command, operable program or batch file. 
```

这是批处理文件中的内容：

```
@ECHO OFF  
CD /D %~dp0  
ECHO\ CreateObject("Wscript.Shell").Run """" & WScript.Arguments(0) & """", 0,False>>Invisible.vbs  
::What I want to do with the file is here  
DEL %CD%\invisible.vbs /Q /S 
```

我注意到该文件已生成，但它是空的，因此当我尝试使用它使另一个批处理文件不可见时什么也不做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:52:11.123

这是由`&`echo 语句中的符号引起的。`^`在字面上使用它时需要通过批处理转义字符进行转义`^&`。您可能还想使用单输出重定向运算符`>`（覆盖现有）而不是双`>>`（附加到现有）。

```
@ECHO OFF
CD /D %~dp0
ECHO.CreateObject^("Wscript.Shell"^).Run """" ^& WScript.Arguments^(0^) ^& """", 0,False>Invisible.vbs
::What I want to do with the file is here  
DEL %CD%\invisible.vbs /Q /S 
```

另一个技巧是`%TEMP%`在创建丢弃文件时使用目录变量。

# jquery - 简单的 jQuery 幻灯片放映/停在帧上

> ID：13809758
> 
> 赞同：1
> 
> 时间：2012-12-10T21:42:42.090
> 
> 标签：jquery

我怎么能加；或者修改我下面的 jQuery 代码片段，使其也只包含一个停止功能 - 我希望幻灯片在特定帧处停止。

```
$("#slideshow > div:gt(0)").hide();

setInterval(function() { 
  $('#slideshow > div:first')
    .fadeOut(1000)
    .next()
    .fadeIn(1000)
    .end()
    .appendTo('#slideshow');
},  3000); 
```

*小提琴：http:* [//jsfiddle.net/camny77/WgRtp/embedded/result/](http://jsfiddle.net/camny77/WgRtp/embedded/result/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:56:35.677

`clearInterval`像这样使用：

```
$("#slideshow > div:gt(0)").hide();
var i=0; // counter
handle = setInterval(function() { //assign the interval to a variable 
  $('#slideshow > div:first')
    .fadeOut(1000)
    .next()
    .fadeIn(1000)
    .end()
    .appendTo('#slideshow');
    i++;
    if (i==3) clearInterval(handle); // stops on the 3rd frame
},  3000);​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T22:00:19.380

类似的东西 - [http://jsfiddle.net/ykSRU/7/](http://jsfiddle.net/ykSRU/7/)

```
var interval = "";
$("#slideshow > div:gt(0)").hide();
start();

function start() {
  interval = setInterval(function() {
  $('#slideshow > div:first')
    .fadeOut(1000)
    .next()
    .fadeIn(1000)
    .end()
    .appendTo('#slideshow');
  },  3000);
}

function stop() {
    clearInterval(interval);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T21:46:13.053

我会将 setInterval 分配给一个变量，然后在满足特定条件时在其上使用 clearInterval ，例如在这么多幻灯片之后，或者当 src 属性是你想要的东西时？

# mysql - MYSQL - BASIC QUERYS where + group by + have

> ID：13809764
> 
> 赞同：0
> 
> 时间：2012-12-10T21:43:10.223
> 
> 标签：mysql, join

```
SELECT dieet.snr, soort.nsnaam   FROM soort
JOIN dieet ON soort.snr = dieet.snr
JOIN voedsel ON dieet.voednr = voedsel.voednr 
WHERE voedsel.voednr = 22 
GROUP BY dieet.snr
HAVING COUNT(*) = 1 ; 
```

**where 条件弄乱了我的输出，我做错了什么**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:50:03.027

我怀疑您正在寻找只有一条记录是“voednr = 22”的“snr”。您的查询正在获取所有具有恰好一个这样的“voednr”的“snr”，以及其他“voednr”。

让我建议以下查询：

```
SELECT dieet.snr, soort.nsnaam
FROM soort
JOIN dieet ON soort.snr = dieet.snr
JOIN voedsel ON dieet.voednr = voedsel.voednr 
GROUP BY dieet.snr
HAVING COUNT(*) = 1 and max(voedsel.voednr) = 22 
```

这将为您提供只有 22 行的行。

# facebook-graph-api - 如何对启用 Facebook 登录的网站的链接执行即时 Facebook 登录

> ID：13809769
> 
> 赞同：1
> 
> 时间：2012-12-10T21:43:36.983
> 
> 标签：facebook-graph-api, facebook-javascript-sdk, facebook-login

我想知道通过 Facebook 简化登录到我的网站的正确技术是什么。

目前，我有一个与 Facebook 登录按钮集成的网站。现在，它是一个独立的网站，而不是“Facebook 应用程序”（在画布中运行）。虽然这不是我的决定，但如果重要的话，这可能会在长期内发生变化。

身份验证的工作方式：使用 onlogin() 事件将“fb-login-button”重定向到我的应用程序 URL；服务器端使用 cookie 来检索“访问令牌”并执行进一步的 Graph API 工作。业务逻辑位于服务器端。

当前的业务需求如下：假设有人在 Facebook 某处发布了指向我网站的链接，例如在我们的网站社区页面中： [http ://www.mysitedomain.com/offer1](http://www.mysitedomain.com/offer1)

登录 Facebook 的用户点击链接 - 在他的 Facebook 身份得到验证后，应该会到达目标页面，并且应该为该用户个性化结果。

如果 Facebook 用户已经与我的网站进行了活动会话 - 微不足道。

假设用户过去已批准我的网站（应用程序），但没有活动会话 -**在这里我正在寻找进行登录的最佳实践**。

另外，我希望能提示如何以最有效的方式处理应用程序授权（即显示 Facebook 授权对话框）。

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T03:42:31.673

查看[FB Login Architecture](https://developers.facebook.com/docs/concepts/login/login-architecture/)和[FB.getLoginStatus](https://developers.facebook.com/docs/howtos/login/getting-started/#step3)。根据 FB 文档，如果您使用 javascript sdk，它只会在同一页面上触发弹出窗口，并且一旦经过身份验证，它将返回同一页面。因此，一旦登录状态得到确认，您就可以从图形 api 获取用户信息并通过页面上的 AJAX 进行更新。您还可以签出此[服务器端登录](https://developers.facebook.com/docs/howtos/login/server-side-login/)。希望这可以帮助。

# python - 阐明简单功能

> ID：13809772
> 
> 赞同：1
> 
> 时间：2012-12-10T21:43:44.993
> 
> 标签：python

字符串的优劣遵循以下两条规则：

*   包含一个或多个 'u' 的字符串的优度为 0
*   否则，字符串的优度等于字符串中 'g' 的数量

"gbbgb" 是 2
"gbbgb" 是 0

```
#I understand this function
def goodness(s):
    if s.count('u') > 0:
       return 0 
    else:
       return s.count('g') 

#But not this one.
def best_slice(s, k):
    ''' s is str, k is an integer such that 0 <= k <= len(s). Return the starting index of the length-k slice of s with highest goodness. If k is zero, return -1.'''
    stop = len(s) - k  # ?
    best_start = -1 # ?
    best_goodness = 0  
    for i in range(stop + 1):
       cur_slice = s[i:i+k]
       slice_goodness = goodness(cur_slice)
       if slice_goodness > best_goodness:
          best_start = i
          best_goodness = slice_goodness
    return best_start 
```

有人可以为我解释一下吗，我不明白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:58:50.553

该代码不是特别pythonic。考虑一下：

```
def goodness(s):
    return 0 if 'u' in s else s.count('g')

def substrings(s, length):
    "Generate all substrings of given length."
    for i in range(len(s) - length + 1):
        yield s[i:i+length]

print list(substrings('abcdefgh', 3)) # ['abc', 'bcd', 'cde', 'def', 'efg', 'fgh']   

def best_slice(s, length):
    """Return the 'best' substring."""
    return max(substrings(s, length), key=goodness)

print best_slice('abcgabgoguffg', 3) # 'gog' 
```

如果您在理解这一方面有问题，请告诉我们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T22:03:29.053

函数第一行的解释很好地总结了它，但让我们逐行解释正在发生的事情。

```
def best_slice(s, k):
    ''' s is str, k is an integer such that 0 <= k <= len(s). Return the starting index of the length-k slice of s with highest goodness. If k is zero, return -1.''' 
```

好的，所以我们有一个遍历字符串的函数，找到字符串中具有最高“善良”的片段。`s`表示字符串，`k`是切片的长度。

```
 stop = len(s) - k  # ? 
```

这一行告诉我们何时停止循环遍历`s`. 我们不需要比这更远，因为它是字符串`len(s) - k`中长度的最后一个可能的起始切片索引。`k`

```
 best_start = -1 # ? 
```

`best_start`如果`slice_goodness`永远不会大于`best_goodness`我们的 for 循环，我们将返回什么。`k`因此，如果小于 0 ，该函数将返回 -1 。

```
 best_goodness = 0 
```

我们将其设置为 0，这样我们就可以遍历所有切片，检查是否高于 0。严格来说，这个变量不是必需的，但在我们的循环中使用命名变量比使用幻数 0 更好。它增加了清晰度，但在技术上不需要。

```
 for i in range(stop + 1):
       cur_slice = s[i:i+k]
       slice_goodness = goodness(cur_slice) 
```

现在我们通过函数来​​获得切片的优点。

```
 if slice_goodness > best_goodness:
        best_start = i
        best_goodness = slice_goodness

    return best_start 
```

如果切片是我们最好的切片，我们将其保存以针对更多切片进行测试，并保存它的索引以防万一它是最好的切片返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T21:57:42.707

为什么`best_start = -1`？阅读规范。它说如果`k = 0`返回-1，那就是会发生什么。

除此之外，它正在尝试所有可能的长度为 k 的切片。

例如，

字符串：“asgeksv”k = 5

然后，尝试“asgek”、“sgeks”和“geksv”以获得最佳价值。

# c# - C# 枚举解析和反射

> ID：13809775
> 
> 赞同：2
> 
> 时间：2012-12-10T21:44:04.857
> 
> 标签：c#, enums

我有一个枚举定义如下：

```
public enum Format {
  Normal = 1,
  Type2 = 2,
  Type3 = 3
} 
```

我正在尝试使用反射并调用动态类型转换函数。但是在下面的代码中，“value”的值是“3”而不是“Type3”，它不能被识别为枚举。是否可以使用 int 值，3 来识别枚举？

```
Type enumType = property.PropertyType;
if (Enum.IsDefined(enumType, value))
   return Enum.Parse(enumType, value); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T21:46:02.220

您需要调用`Enum.ToObject()`将原始值转换为枚举的盒装实例。

# wordpress - Wordpress get_transient() 有时返回编码字符串而不是数组

> ID：13809776
> 
> 赞同：1
> 
> 时间：2012-12-10T21:44:06.837
> 
> 标签：wordpress, caching, plugins, widget, transient

我一直在尝试制作一个自定义 twitter 小部件，它显示来自多个提要的最后几条推文。每个提要创建以下类的一个实例：

```
<?php

class Foo{
  protected $name = '';

  //opts
  protected $numTweets = 3;
  protected $transName = ''; // Name of value in database.
  protected $backupName = '';
  protected $cacheTime = 5; // Time in minutes between updates.
  protected $exclude_replies = true; // Leave out @replies?

  public function __construct( $username ){
    $this->name = $username;
    $this->transName = 'jctft3' . $username;
    $this->backupName = 'jctfb3' . $username;
  }

  public function get_feed(){
    $feed = get_transient( $this->transName );

    // Do we already have saved tweet data? If not, lets get it.
    if( $feed === false  ){
      $feed = $this->call_twitter();
    }

    $html = $this->build_html( $feed );

    return $html;
  }// protected function get_feed(){...}

  protected function call_twitter(){
    /* We need the following:

    $feed = array(
      'username' => '',
      'friendly_name' => '',
      'url' => ''

      'tweets' => array(
        array(
          'html' => '',
          'url' => '',
          'time' => ''
        ),
        array(
          'html' => '',
          'url' => '',
          'time' => ''
        )
      )
    );
    */
    $feed = array();

    // Get the tweets from Twitter.
    $response = wp_remote_get( "http://api.twitter.com/1/statuses/user_timeline.json?screen_name={$this->name}&count=10&exclude_replies=false" );

    // parse Twitter response into an array
    if( !is_wp_error($response) && $response[ 'response' ][ 'code' ] == 200 ){
      // Get tweets into an array.
      $tweets_json = json_decode( $response['body'], true );
      // Now update the array to store just what we need.
      $feed[ 'username' ] = $tweets_json[ 0 ][ 'user' ][ 'screen_name' ];
      $feed[ 'friendly_name' ] = $tweets_json[ 0 ][ 'user' ][ 'name' ];
      $feed[ 'url' ] = 'https://twitter.com/' . $tweets_json[ 0 ][ 'user' ][ 'screen_name' ];
      $feed[ 'tweets' ] = array();

      foreach ( $tweets_json as $tweet ){
        $my_tweet = array();

        // Core info.
        $my_tweet[ 'url' ] = 'http://twitter.com/#!/'. $feed[ 'username' ] .'/status/'. $tweet['id_str'];
        // Message. Convert links to real links.
        $pattern = '/http:(\S)+/';
        $replace = '<a href="${0}" target="_blank" rel="nofollow">${0}</a>';
        $my_tweet[ 'html' ] = preg_replace( $pattern, $replace, $tweet['text'] );
        //$my_tweet[ 'html' ] = $tweet['text'];
        // Need to get time in Unix format.
        $time = $this->twitter_time( $tweet[ 'created_at' ] );
        //$time = date_parse( $time );
        //$uTime = mktime($time['hour'], $time['minute'], $time['second'], $time['month'], $time['day'], $time['year']);
        $my_tweet[ 'time' ] = $time;

        array_push( $feed[ 'tweets' ], $my_tweet );
      }

      // Save our new transient, and update the backup.
      set_transient( $this->transName, $feed, 60 * $this->cacheTime );
      update_option( $this->backupName, $feed );
    }
    else{
      // i.e. Fetching new tweets failed.
      $feed = get_option( $this->backupName ); // False if there has never been data saved.
    }

    return $feed;
  }

  protected function build_html( $feed ){
    $html = '';

    $is_top = false;
    if( $feed[ 'friendly_name' ] == 'Johnny Cupcakes' ){
      $is_top = true;
    }

    ob_start();
    include(  plugin_dir_path( __FILE__ ) . '../html/feed.html' );
    $html = ob_get_clean();

    return $html;
  }

}

?> 
```

插件第一次构建 html 时（即直接从 twitter 中提取数据，而不是从存储在我们本地数据库中的数据中提取数据时），一切正常。但是，当我使用 get_transient() 来检索缓存的数据时，在某些推文上（哪个推文会生成此错误，并且有多少推文拒绝运行不同）我收到以下错误：

```
Warning:  Illegal string offset 'username' in /Applications/MAMP/htdocs/sites/wp-johnnycupcakes/wp-content/plugins/jc-twitter-widget/html/feed.html on line 12 
```

feed.html 的第 12 行是：

```
<h3><a target="_new" href="<?php echo $feed[ 'url' ]; ?>"> @<?php echo $feed[ 'username' ]; ?> </a></h3> 
```

经过进一步调查，似乎有时在我的某些提要中，当我使用 get_transient() 时，返回的值不再是数组，而是编码字符串（我假设这是 Wordpress 在数据库中存储瞬态值的编码约定）。字符串如下所示：

```
string(830) "a:4:{s:8:"username";s:15:"JHNYCPKS_London";s:13:"friendly_name";s:18:"Johnny Cupcakes UK";s:3:"url";s:35:"https://twitter.com/JHNYCPKS_London";s:6:"tweets";a:9:{i:0;a:3:{s:3:"url";s:63:"http://twitter.com/#!/JHNYCPKS_London/status/278196905350164480";s:4:"html";s:128:"Baked in USA long sleeve, Truffle and White Mens Basic Tee's are now back in stock come and grab them now while supplies last!!!";s:4:"time";s:11:"2 hours ago";}i:1;a:3:{s:3:"url";s:63:"http://twitter.com/#!/JHNYCPKS_London/status/278180246967173121";s:4:"html";s:121:"Put a pin on it! @ Johnny Cupcakes http://t.co/nxVSAG63";s:4:"time";s:11:"4 hours ago";}i:2;a:3:{s:3:"url";s:63:"http://twitter.com/#!/JHNYCPKS_London/status/278179975474053120";s:4:"html";s:161:"Big kid magnet came in today! " 
```

当返回一个数组（因此成功显示提要）时，它看起来像这样：

```
array(4) {
  ["username"]=>
  string(15) "JHNYCPKS_Boston"
  ["friendly_name"]=>
  string(20) "JohnnyCupcakesBoston"
  ["url"]=>
  string(35) "https://twitter.com/JHNYCPKS_Boston"
  ["tweets"]=>
  array(7) {
    [0]=>
    array(3) {
      ["url"]=>
      string(63) "http://twitter.com/#!/JHNYCPKS_Boston/status/278204808756862976"
      ["html"]=>
      string(139) "IT'S RAINING! IT'S RAINING! IT'S RAINING! IT'S RAINING! IT'S RAINING! IT'S RAINING! IT'S RAINING! IT'S RAINING! IT'S RAINING! IT'S RAINING!"
      ["time"]=>
      string(11) "2 hours ago"
    }
    [1]=>
    array(3) {
      ["url"]=>
      string(63) "http://twitter.com/#!/JHNYCPKS_Boston/status/278169219160489984"
      ["html"]=>
      string(167) "Four #freshlybaked keychains were released this weekend! Which is your favorite? <a href="http://t.co/Xn16NsjU" target="_blank" rel="nofollow">http://t.co/Xn16NsjU</a>"
      ["time"]=>
      string(11) "4 hours ago"
    }
    [2]=>
    array(3) {
      ["url"]=>
      string(63) "http://twitter.com/#!/JHNYCPKS_Boston/status/278137791391617025"
      ["html"]=>
      string(29) "@thatkidTHILL good luck, man!"
      ["time"]=>
      string(11) "6 hours ago"
    }
    [3]=>
    array(3) {
      ["url"]=>
      string(63) "http://twitter.com/#!/JHNYCPKS_Boston/status/278137703281881088"
      ["html"]=>
      string(96) "@dcachopa18 i don't think so, sorry! we'll let you know if we do. what size are you looking for?"
      ["time"]=>
      string(11) "6 hours ago"
    }
    [4]=>
    array(3) {
      ["url"]=>
      string(63) "http://twitter.com/#!/JHNYCPKS_Boston/status/277888036237373440"
      ["html"]=>
      string(188) "Only a few hours left! Spend $50, get a $10 gift card. Stop in or shop online. We close at 7 tonight! <a href="http://t.co/082T5jTf" target="_blank" rel="nofollow">http://t.co/082T5jTf</a>"
      ["time"]=>
      string(12) "23 hours ago"
    }
    [5]=>
    array(3) {
      ["url"]=>
      string(63) "http://twitter.com/#!/JHNYCPKS_Boston/status/277786268274933760"
      ["html"]=>
      string(135) "Here's the new Boston in-store! cc: @b3asTTw33ts <a href="http://t.co/soLoEYqv" target="_blank" rel="nofollow">http://t.co/soLoEYqv</a>"
      ["time"]=>
      string(9) "yesterday"
    }
    [6]=>
    array(3) {
      ["url"]=>
      string(63) "http://twitter.com/#!/JHNYCPKS_Boston/status/277526406076968961"
      ["html"]=>
      string(119) "What's everyone's favorite piece from this release?! The new Boston exclusive seems to be the hot ticket. #freshlybaked"
      ["time"]=>
      string(9) "yesterday"
    }
  }
} 
```

关于可能导致这种情况的原因，我有几个想法：

*   试图将太多数据存储到瞬态中
*   一些被引入的字符正在搞乱 Wordpress 如何将数据转换为字符串，反之亦然。

有没有人对这个问题有一些经验并且可以指出我纠正它的正确方向？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T23:06:36.270

数组的[序列化](http://php.net/manual/en/function.serialize.php)出了点问题；您显示的示例编码字符串只是数组的部分序列化，因此它在某处滑落（在序列化或保存到数据库中）。

也许尝试自己序列化它（调用[serialize()](http://php.net/manual/en/function.serialize.php)），对其[进行 base64 编码](http://php.net/manual/en/function.base64-encode.php)，然后设置瞬态。在检索时，[base64-decode](http://php.net/manual/en/function.base64-decode.php)和[deserialise](http://php.net/manual/en/function.unserialize.php)。如果问题在于 WordPress / wpdb 保存序列化数组，它可能会起作用。

# url - 链接到非入口点 GWT 页面

> ID：13809782
> 
> 赞同：1
> 
> 时间：2012-12-10T21:44:34.967
> 
> 标签：url, gwt

GWT 中是否有办法使外部资源可以链接到不是入口点且尚未访问的页面？

最终目标是允许用户向链接到非入口点页面的其他用户提供 URL。一个例子是 GWT 历史功能的工作原理，在您访问一个页面（例如`http://<ip address>:<port>/MyEntryPointClass.html#NotEntryPointClass`）后，即使您单击另一个页面，然后将该 URL 输入地址面板，它也会将您带回该页面。但是，如果您以前从未访问过该页面，它只会将您带回入口点页面。我只能找到 GWT 页面链接到外部源的解决方案，而不是我需要的其他方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:42:32.550

您可以使用活动和地点模式。在您的入口点类中添加：

```
historyHandler.handleCurrentHistory(); 
```

如果 URL 中没有指定位置，它会将您的用户带到默认位置，或者转到 URL 中设置的位置。

# javascript - 定义函数时暂停匿名函数

> ID：13809786
> 
> 赞同：0
> 
> 时间：2012-12-10T21:44:58.860
> 
> 标签：javascript

我的 js 脚本中有这个功能。

```
//handle the deleting of the shoutlines
function delete_shoutline(shoutline_number)
{
    //the number of the shoutline we're deleting
    var shoutline = shoutline_number;

    $.post("shoutbox/delete_ban.php", {shoutline : shoutline_number},
    function(result)
    {
        //show the result, if any
        alert(result);

        //refresh the page
        window.location = window.location;
    });

}
//handle the banning of users
function ban_user(user_ban)
{
    //the name of the user we are banning
    var banned = user_ban;

    $.post("shoutbox/delete_ban.php", {banned : user_ban},
    function(result)
    {
        //show the result, if any
        alert(result);

        //refresh the page
        window.location = window.location;
    });

} 
```

这是电话

```
<a href='javascript: delete_shoutline(SOMEID);' title='Delete' class='delete' onclick=\"return confirm('Are you sure you want to delete this message?');\">x</a><a href='javascript: ban_user(SOMEUSER);' title='Ban' class='ban' onclick=\"return confirm('Are you sure you want to ban this user?');\">o</a> 
```

该功能`delete_shoutline`效果很好，但是当我单击禁令链接时，我的控制台会暂停并说`(anonymous function) members.php (2):1 Paused on exception 'ReferenceError'`

和调试器说`Uncaught ReferenceError: SOMEUSER is not defined`

我不是最擅长 js 所以我真的不知道这意味着什么？我不太确定这意味着什么，因为该函数是在 js.js 中定义的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:51:23.663

您需要在字符串周围加上引号。

```
<a href='javascript: ban_user(SOMEUSER);'  <-- no quotes around SOMEUSER, it thinks it is a variable. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:56:26.157

SOMEUSER 应该是用户名吗？如果是这样，请引用它，例如`ban_user("SOMEUSER")` 你不需要在删除某些呼喊时引用它，因为 SOMEID 可能是一个 int，所以不需要引用它。但是字符串需要被引用，否则它假定它是一个变量。

# c# - 自定义排序列表

> ID：13809789
> 
> 赞同：1
> 
> 时间：2012-12-10T21:45:04.383
> 
> 标签：c#, asp.net-mvc

我有一个文本文件，我对其进行解析并将解析结果加载到集合中。我已完成解析并将结果加载到集合对象中。

```
public class Results
{
  List<Node> nodes = new List<Node>();

}
public class Node
{
  public int id {get;set;}
  public DateTime initiationDateTime {get;set;}
} 
```

下一步是遍历每个列表项，如果时间戳与之前的最小日期/时间相差超过 30 分钟，那么它将被存储为用户选择。例如，从以下记录集中，用户将以复选框的形式查看以下选项。我想弄清楚的是如何形成用户选择列表。一旦我向用户显示用户选择列表，他们将重新发布带有他们选择的页面，并根据日期范围，我将处理所选日期范围内的记录。

```
User Choices:
1/12/2012 10:09 -  1/12/2012 10:49 
1/12/2012 13:25 -  1/12/2012 13:26
1/12/2012 15:30

    Parsed List:

ID    Test Initiation       InitiationChoice    CompletionChoice
1       1/12/2012 10:09           Yes              
2       1/12/2012 10:09
3       1/12/2012 10:09
4       1/12/2012 10:09
5       1/12/2012 10:09
6       1/12/2012 10:09
7       1/12/2012 10:48
8       1/12/2012 10:48
9       1/12/2012 10:49
10      1/12/2012 10:49
11      1/12/2012 10:49
12      1/12/2012 10:49                               Yes
13      1/12/2012 13:25           Yes
14      1/12/2012 13:25
15      1/12/2012 13:25
16      1/12/2012 13:25
17      1/12/2012 13:26
18      1/12/2012 13:26                                 Yes
19      1/12/2012 15:30           Yes 
```

以下是我创建用户选择的尝试，希望对此提出建议

```
 //First Minimum Date to start as i have already sorted this list based on date.
        minimumDateTime = lf.Nodes.ElementAt(0).InitiationDate; 

        foreach (Node rb in lf.Nodes)
        {
            TimeSpan intervalMinutes = rb.InitiationDate.Subtract(minimumDateTime);
            UserConfirmationErrors confirmationRun = new UserConfirmationErrors();

            if (intervalMinutes.TotalMinutes >= 30)
            {
                //New Minimum Date/Time
                minimumDateTime = rb.InitiationDate;
            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:53:07.220

我会这样做：

*   创建一个集合，例如`List<DateTime> minDates`
*   将新的最小日期推送到集合中
*   将您的收藏转换为`List<SelectListItem>`
*   在回发时，该值将是最小日期（而不是范围）。你知道，给定一个最小日期，你总能找到范围：只需加上 30 分钟。

因此，我的伪示例如下所示：

```
 minimumDateTime = DateTime.Min; // don't force to first record.. let loop do it
    var minDates = new List<DateTime>();

    foreach (Node rb in lf.Nodes)
    {
        TimeSpan intervalMinutes = rb.InitiationDate.Subtract(minimumDateTime);
        UserConfirmationErrors confirmationRun = new UserConfirmationErrors();

        if (intervalMinutes.TotalMinutes >= 30)
        {
            //New Minimum Date/Time
            minimumDateTime = rb.InitiationDate;
            minDates.Add(minimumDateTime); // add to new collection
        }

    }

// now loop your minDates to create your select list
var items = new List<SelectListItem>();
foreach(var minDate in minDates)
{
  var item = new SelectListItem() { Value = minDate.ToString(), Text = String.Format("{0} - {1}", minDate, minDate.AddMinutes(30) };

  items.add(items);
}

// now items is your collection that you can bind your select list to... 
```

# r - 强制评估作为参数传递给函数的对象

> ID：13809790
> 
> 赞同：0
> 
> 时间：2012-12-10T21:45:10.470
> 
> 标签：r, eval, evaluation

我想将对象的值作为参数传递给函数。

```
# This is my object
anObject <- "an_unkown_string"

# I would like to do the equivalent of: 
someFunc("an_unkown_string")

# .. by somehow calling on the object containing the string
someFunc( ??? (anObject) ) 
```

例如，使用下面的示例函数（基于`save()`）：

```
someFunc <- function(...) {
  names <- as.character(substitute(list(...)))[-1L]
  return(names)
}

# Ideally, the output would be:
someFunc( ??? (anObject) )
[1] "an_unkown_string" 
```

我无权修改`someFunc` 我尝试了以下方法，但没有成功。

```
 someFunc(Name_of_Object)
 someFunc(eval(Name_of_Object))
 someFunc(evalq(Name_of_Object))
 someFunc(force(Name_of_Object))
 someFunc(eval(parse(text=Name_of_Object))) 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T21:59:50.063

怎么样

```
> do.call(someFunc, list(anObject))
[1] "an_unkown_string" 
```

或者你可以做一个包装

```
myWrap <- function(...) {
  do.call(someFunc, as.list(...))
}

> myWrap(anObject)
[1] "an_unkown_string" 
```

* * *

另一种构造调用和评估它的方法：

```
> call("someFunc", anObject)
someFunc("an_unkown_string")
> eval(call("someFunc", anObject))
[1] "an_unkown_string" 
```

* * *

我想我应该提到`?do.call`说

> 对于使用 do.call 评估的函数，某些函数（例如替换）的行为与从解释器评估的函数不同。精确的语义目前尚未定义，可能会发生变化。

尽管如此，至少现在，在构造调用时（在对or`anObject`的调用中）进行评估，因此找到“an_unknown_string”而不是“anObject”。`call``do.call``substitute`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T01:06:21.177

我很困惑。你为什么要让这比实际情况更复杂？

```
someFunc <- function(obj) {
   return(obj)
 }

> someFunc(anObject)
[1] "an_unkown_string" 
```

# python - Python - 无法转换为 int

> ID：13809792
> 
> 赞同：2
> 
> 时间：2012-12-10T21:45:16.090
> 
> 标签：python

我的整个代码如下（不想错过任何东西）。出于某种原因，我不断收到一个错误，我无法将浮点数转换为整数？

```
import math

def getRange(input):
    if (1 <= input < 10):
        return [1,1,9]
    elif (10 <= input < 190):
        return [2,10,99]
    elif (190 <= input < 2890):
        return [3,100,999]
    elif (2890 <= input < 38890):
        return [4,1000,9999]
    elif (38890 <= input < 488890):
        return [5,10000,99999]
    elif (488890 <= input < 5888889):
        return [6,100000,999999]

def getDigit(input):
    workingRange=getRange(input)
    multi_digit_dec = ((input-workingRange[1])/workingRange[0])+workingRange[1]
    multi_digit_float = math.floor((input-workingRange[1])/workingRange[0])+workingRange[1]
    print multi_digit_float
    multi_digit_int = input(multi_digit_float)
    decimal_remainder = multi_digit_int - multi_digit_dec
##    digit_id = decimal_remainder * len(str(multi_digit_int))
##    actual_digit = str(multi_digit_dec)[digit_id]
##    return actual_digit

getDigit(100) 
```

我的错误是：

```
Traceback (most recent call last):
  File "C:\Users\Samuel\Desktop\Python\concatenate string of variables and product values.py", line 29, in <module>
    getDigit(100)
  File "C:\Users\Samuel\Desktop\Python\concatenate string of variables and product values.py", line 22, in getDigit
    multi_digit_int = int(multi_digit_float)
TypeError: 'int' object is not callable
>>> 
```

**上面更新的代码以反映称为 int 的变量的变化以输入**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T21:47:05.453

问题是您将`int`其用作变量名，这会影响[内置函数](http://docs.python.org/2/library/functions.html#int)。重命名变量。

一般来说，有必要熟悉[内置函数的名称](http://docs.python.org/2/library/functions.html)，以避免此类问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T21:46:09.920

不要`int`用作变量名（函数`getDigit`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T22:23:39.963

在您的语句堆栈中`elif`，如果您首先测试输入数字是否小于 1，则无需检查除第一个之外的范围的下端。这将减少`elif`'s 中一半的措辞。此外，使用循环进行这样的测试更紧凑。例如，下面的代码产生如下所示的输出。

```
def getRange(k):
    if k < 1: return None
    e = 1
    for d in [10, 190, 2890, 38890, 488890, 5888889]:
        if k<d:
            return [e, 10**(e-1), 10**e -1]
        e += 1
    return None

for i in range(14):
    print '{:8} {:20}'.format(i * 3**i, getRange(i * 3**i)),
    if i&1: print 
```

输出：

```
 0 None                        3 [1, 1, 9]           
      18 [2, 10, 99]                81 [2, 10, 99]         
     324 [3, 100, 999]            1215 [3, 100, 999]       
    4374 [4, 1000, 9999]         15309 [4, 1000, 9999]     
   52488 [5, 10000, 99999]      177147 [5, 10000, 99999]   
  590490 [6, 100000, 999999]   1948617 [6, 100000, 999999] 
 6377292 None                 20726199 None 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T22:09:33.083

`multi_digit_int = input(multi_digit_float)`更新代码中的问题在于参数`input`in`def getDigit(input):`隐藏了内置`input()`函数。由于您`getDigit`使用 的参数进行调用`100`，因此函数内部`input`是一个`int`实例，因此该`input(multi_digit_float)`部分被解释为`100(multi_digit_float)`，即`int`调用某物。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T21:47:49.793

我想你想要：

```
multi_digit_int = math.floor(multi_digit_float) 
```

另外，不要`int`用作变量名。

# visual-studio-2010 - VS2010 发布的项目无法在E中查看

> ID：13809794
> 
> 赞同：1
> 
> 时间：2012-12-10T21:45:31.400
> 
> 标签：visual-studio-2010, publish

我刚刚将一个应用程序从 VS2008 转换为 VS2010。但是当我尝试在 IE 中查看该站点时，我收到消息“Internet Explorer 无法显示该网页”。当我将 VS2008 版本发布到同一个文件夹时，同样的应用程序运行良好。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:11:26.033

该应用程序使用 .NET 4.0，它需要一个使用 .Net 4 而不是 2 的 IIS 7 应用程序池。当我创建一个 .Net 4 应用程序池并将其分配给应用程序网站时，问题就解决了。

# php - 对重复的状态消息 SQL 进行分组和计数

> ID：13809799
> 
> 赞同：0
> 
> 时间：2012-12-10T21:45:37.790
> 
> 标签：php, mysql

如果在下面的示例中以粗体显示的详细信息与其他记录的文本匹配，那么对重复数据库记录进行分组和计数的最佳方法是什么？

在我的系统发送一封电子邮件让我知道系统状态后，我的收件箱中收到了相当多的电子邮件。我觉得这作为数据库中的记录会更有益，但我想对总重复记录进行分组和计数，以便将详细信息编译为报告。

进行分组和计数的最佳方法是什么？不会因为过度处理而使系统彻底崩溃？

**示例消息：**

> **/crons/sendMessage.php**，行号：**234**运行成功。**文件包含**在**/details/output.php**中，行号：**45**

*消息可以包含完全不同的脚本路径/名称和/或行号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:58:43.040

所以创建一个包含以下字段的数据库表；MessageID、MessageText 和 MessageCount。在您的代码中，一旦收到消息，通过与数据库中的 MessageText 字段进行比较来检查它是否与您的粗体文本匹配。如果存在，则将该消息的计数增加 1。如果没有，请在 count = 1 处创建一条消息并创建一个新条目。在一天结束时，运行一个 PHP 脚本来爬取您的数据库表并将结果通过电子邮件发送给您，然后清空表。

# asp.net-mvc-3 - 如何在 MVC 模型中为下拉列表保留项目集合？

> ID：13809809
> 
> 赞同：1
> 
> 时间：2012-12-10T21:46:14.127
> 
> 标签：asp.net-mvc-3, model

为简单起见，我有一个具有以下属性的模型调查：

```
class SurveyItem {
    public string Question { get; set; }
    public string SelectedAnswerCode { get; set; }
    public List<Answer> Answers { get; set; }
} 
```

答案是这样的：

```
class Answer {
    public int AnswerCode { get; set; }
    public string AnswerText { get; set; }
} 
```

Answers 用于构建可能答案的下拉列表框（用户选择一个）

在我的视图中，我使用了一个 IEnumerable 模型，对于每个问题，我都有一个可供选择的答案列表。

我预填充这个集合并传递给我的视图。当我单击提交时，它会返回到控制器进行验证。如果模型无效，我将它传递给同一个视图，让用户像往常一样修复他的答案。

**问题**- 用于下拉列表的答案集合在我提交时未保留在模型中。我将 HiddenFor、EditorFor 和 DropDownListFor 用于单值属性，但是，如何在模型中保留可能答案的集合？

PS>

谢谢。

PS我正在使用单行代码@Html.DropDownListFor 在我的EditorTemplate 中呈现下拉列表：

```
@Html.DropDownListFor(model => model.SelectedAnswerCode, 
new SelectList(Model.Answers, "AnswerCode", "AnswerText", 0)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:21:35.260

This seems to do the trick: [http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)

Basically in your view do something like this:

```
@for(int i = 0; i < Model.Answers.Count; i++)
            {
                @Html.Hidden(string.Format("Answers[{0}].AnswerCode", i), Model.Answers[i].AnswerCode)
                @Html.Hidden(string.Format("Answers[{0}].AnswerText", i), Model.Answers[i].AnswerText)

                @Html.RadioButton("SelectedAnswerCode", Model.Answers[i].AnswerCode)
                @Model.Answers[i].AnswerText
            } 
```

**EDIT:**

Alternatively, you can create your own HtmlHelper extension. For example:

```
public static class CustomHtmlHelperExtensions
    {
        public static MvcHtmlString HiddenForSurveyAnswers(this HtmlHelper htmlHelper, IEnumerable<Models.Answer> answers)
        {
            var html = new StringBuilder();

            int index = 0;
            foreach (var answer in answers)
            {
                html.AppendLine(htmlHelper.Hidden(string.Format("Answers[{0}].AnswerCode", index), answer.AnswerCode).ToString());
                html.AppendLine(htmlHelper.Hidden(string.Format("Answers[{0}].AnswerText", index), answer.AnswerText).ToString());
                index++;
            }

            return MvcHtmlString.Create(html.ToString());
        }
    } 
```

Then add an @using YourMvcApplicationNamespace to the top of the view and then use the extension like:

```
@Html.HiddenForSurveyAnswers(Model.Answers) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T08:00:23.337

使用 MVC，您也可以编写一个编辑器模板来保存`Model.Answers`:)

保存一个名为`Answer.chtml`.`\Views\Shared\EditorTemplates`

添加以下代码：

```
@model Answer          
@Html.HiddenFor(item => item.AnswerCode) 
@Html.HiddenFor(item => item.AnswerText) 
```

然后在你原来的视图中，添加它：

```
@Html.EditorFor(model => model.Answers)
@Html.DropDownListFor(model => model.SelectedAnswerCode, new SelectList(Model.Answers, "AnswerCode", "AnswerText", 0)) 
```

通过这种方式，您不必担心编写`foreach`语句或担心它们的 ID。希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T23:09:23.883

您需要添加`virtual`到 Answers 声明。

```
class SurveyItem {
    public string Question { get; set; }
    public string SelectedAnswerCode { get; set; }
    public virtual List<Answer> Answers { get; set; }
} 
```

# adobe - After Effects Expressions - 使用“表达式层”从主合成控制合成

> ID：13809811
> 
> 赞同：0
> 
> 时间：2012-12-10T21:46:30.307
> 
> 标签：adobe, expression, after-effects

**我想要达到的目标：**

*使用 ONE EXPRESSION LAYER（很像使用 Actionscript* ）控制 AE 时间线，以触发卡通动画中常用的组合，例如眨眼、行走、飞行等。

![Beau Bird - 我想眨眼的角色。](../Images/df7435c9093624733d79845b321328c9.png)

我想要动画卡通人物的闪烁。（以及其他动作，如下所述）我不想在每次想要眨眼或特定动作时“重新发布”合成或关键帧动作，而是想创建一个脚本，我可以在其中触发眨眼合成播放。这可能吗？（旁注：在整部电影中随机闪烁会很好）但我仍然想知道如何做到这一点，原因如下。

**理想情况下：**我想在**主组合中创建一个“****表达式层**”来**触发**其他组合来播放。在某些时候，我想添加触发器来调用包含诸如闪烁、行走、飞行、左看和右看等动作的常用组合。

 ******如果**我们能以某种方式触发其他组合开始、重复、停止，甚至可能是反转，并***使用表达式层从一个主组合***完成这一切，那将是惊人的。

**为什么这样做？** 为什么不在每次想要执行此类操作时将组合粘贴到您希望它播放的位置？如果你想要一个“blink comp”在两分钟内播放 40 次，那么在后期效果中，你必须创建 40 个图层，或者在那个 comp 上拍下关键帧 40 次。**当您想要从一个表达式层**触发或调用它时，从一层触发或调用它不是很棒吗？

我们一直在使用 Actionscript 在 Flash 中做类似的事情。如果有一种方法可以实现这种效果，那就太棒了。这将是一个出色的教程，我相信如果有人这样做它会非常受欢迎。它可以用于多种惊人的效果，并且可以为每个人节省大量时间。哎呀，帮我解决这个问题，也许我会做一个教程。

感谢所有投稿的“溢出堆”！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:56:05.967

我找到了答案，那就是……

**这是不可能的。**

After Effects 表达式无法控制其他时间线。不幸的是，您必须在要影响的每一层上放置一个表达式。

可以在此链接上找到下一个最佳解决方案，并实现接近我所要求的内容：[motionscript.com/design-guide/marker-sync.html](http://motionscript.com/design-guide/marker-sync.html)

我们只能希望 Adob​​e 有朝一日能够像他们对动作脚本所做的那样赋予表达能力。

**希望不久！**任何为 Adob​​e 工作的阅读本文的人请为我们辩护。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-21T20:33:37.153

**第 1 部分：在 pre-Comps 中引用其他层**

> **只需将 "thisComp" 替换为 "comp("ComName")"**

要在合成之间引用效果控制器，请遵循以下公式：

```
comp("ComName").layer("LayerWithExpression").effect("EffectControlerName")("EffectControllerType") 
```

**更深入的回答：** [Adobe's Docs - Skip to the Layer Sub-objects 部分](https://helpx.adobe.com/after-effects/using/expression-language-reference.ug.html#property_attributes_and_methods_expression_reference)

> 据我了解 Adob​​e 文档，只能访问图层，不能访问素材。这意味着您将需要使用 pre-Comp 创建您的表达式链接。素材无法访问它，这也意味着没有空值、调整图层等。
> 
> 作为额外的奖励，如果您使用基本图形面板，您可以将所有控制器放在一个预组合中，但无论您在哪个组合中都可以使用控件。只需在基本图形下拉列表中选择它。

**第 2 部分：基于 pre-comps 中的其他层的开始/结束**：

关于您希望表达式根据其他构图激活的下一部分，我建议使用 in-out Point 表达式。

> 入点 | 返回类型：数字。返回图层的入点，以秒为单位。出点 | 返回类型：数字。返回图层的出点，以秒为单位。

如果您使用开始时间覆盖，您可以从以下位置获取：

> 开始时间 | 返回类型：数字。返回图层的开始时间，以秒为单位。

**替代选项：** 我建议避免这种情况，因为关键帧基本上是作为索引引用的，所以如果你在已经使用的关键帧之前添加一个，事情可能会变得一团糟——def 包含一些错误处理。

参考Key属性和方法（表达式参考）[这里](https://helpx.adobe.com/after-effects/using/expression-language-reference.ug.html#property_attributes_and_methods_expression_reference)

**第 3 部分：插值和时间反转** 您可以在右键单击 -> 时间中对图层进行时间反转，否则这就是所有插值表达式，如循环输出等 - 如果您不仅正确剪切它，您还可以 loopOut("FOO") 预合成，还可以启用时间重映射。

然后用它来循环那些关键帧；

```
try{ timeStart = thisProperty.key(1).time; duration = thisProperty.key(thisProperty.numKeys).time-timeStart; pingPong =
false; //change to true value if you want to loop animationn back &
forth  quant=Math.floor((time-timeStart)/duration);

if(quant<0) quant = 0

if(quant%2 == 1 && pingPong == true){   
t = 2*timeStart+ (quant+1)*duration - time;
}
else{
  t = time-quant*duration;
}
}
catch(err){
  t = time;
}

thisProperty.valueAtTime(t) 
```****

# android - Android FAT APK：如何强制使用 ARMv7

> ID：13809816
> 
> 赞同：0
> 
> 时间：2012-12-10T21:46:44.330
> 
> 标签：android, android-ndk, arm, armv7

我从 NDK 示例中的 hello-gl2 示例构建了 FAT APK。它有 2 个文件夹 armeabi 和 armeabi-v7a

我添加了以下方法

```
JNIEXPORT jstring JNICALL Java_com_android_gl2jni_GL2JNILib_status(JNIEnv * env, jobject obj)
{
   const char * result = "Hop";
   #ifdef __ARM__
      result = "__ARM__";
   #endif
   #ifdef __ARM_ARCH_5TE__
      result = "__ARM_ARCH_5TE__";
   #endif
   #ifdef __ARM_ARCH_7A__
      result = "__ARM_ARCH_7A__";
   #endif
   return env->NewStringUTF(result);
} 
```

当应用程序运行时，它会调用该方法并在弹出对话框中显示返回值。当我在具有 ARMv7 CPU 的设备上运行应用程序时，我收到`__ARM_ARCH_5TE__`消息而不是`__ARM_ARCH_7A__`

然后我删除`armeabi`APK中的文件夹并重新安装APK。我看到`__ARM_ARCH_7A__`消息

如果我只编译`armeabi-v7a`APK，那么我会看到`__ARM_ARCH_7A__`它在 ARMv6 设备上不起作用。

我希望编译将`armeabi-v7a`在 ARMv7 CPU 和 ARMv6 CPU 上运行 lib 的FAT APK `armeabi`。

我做错了什么或错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T01:15:03.830

我猜你遇到了这个 Android ICS 错误：

*   [http://www.moodstocks.com/2012/03/20/ice-cream-sandwich-why-native-code-support-sucks/](http://www.moodstocks.com/2012/03/20/ice-cream-sandwich-why-native-code-support-sucks/)
*   [https://groups.google.com/forum/#!msg/android-ndk/N8FLjvM81pg/2rYeClQZcckJ](https://groups.google.com/forum/#!msg/android-ndk/N8FLjvM81pg/2rYeClQZcckJ)

# smtp - Plesk11 Centos6 启用 SMTP 端口 587

> ID：13809817
> 
> 赞同：-1
> 
> 时间：2012-12-10T21:46:47.933
> 
> 标签：smtp, centos, plesk

我正在使用 Plesk11 并想运行我赢得的 SMTP 服务。我的服务器配置为使用端口 25，但我的 ISP 不支持这个，只有 587。谁能告诉我如何配置我的主机以便 SMTP 在端口 587 上运行？先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:03:14.913

Plesk 默认打开 25 端口，以便在以后更改它而不让 plesk 再次覆盖它，并且由于 plesk 使用 inetd.d 结构运行服务，您应该更改服务名称。

在 /etc/services 下添加一个名为 smtp_plesk 的新服务，端口为 587，然后更改 /etc/xinetd.d/smpt_psa 文件。

请参阅以下链接以及详细说明的指南：[http ://www.supportfacility.com/blog/plesk/plesk-configure-qmail-to-use-alternate-port-26/](http://www.supportfacility.com/blog/plesk/plesk-configure-qmail-to-use-alternate-port-26/)

# wordpress - 如果没有 WWW 前缀 - WordPress，网站将无法加载？

> ID：13809821
> 
> 赞同：0
> 
> 时间：2012-12-10T21:47:00.107
> 
> 标签：wordpress, .htaccess, redirect

我们以前在旧网站上遇到过这个问题，但仅限于某些浏览器。我们最近推出了我们的新网站，现在这个问题似乎正在影响所有浏览器。当您访问没有 WWW 前缀的网站时，您会被带到“建设中”页面，我被告知这是某种服务器错误页面。

这是域：www.mcfaddengavender.com

这是我当前的 .htaccess 文件：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

是否可以强制所有浏览器加载 WWW 前缀？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:52:04.850

DNS 传播可以解释为什么它不起作用。不，您不需要强制浏览器使用 www 重新加载（我刚刚看到您这样做了）。您应该使用 DNS 中的 CNAME 记录将 www 子域映射到主域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T21:58:58.360

您的 .htaccess 文件看起来很好并且是正常的。

您不需要 .htaccess 中的任何内容来使用 Wordpress 网站强制或删除 www。在仪表板>>设置>>常规中添加或删除 www 前缀并保存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T21:55:59.153

不确定这是否能解决您遇到的问题，但要在域名中强制使用**www** ，您可以在该行**上方**`# BEGIN WordPress`添加：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^mcfaddengavender\.com$ [NC]
RewriteRule ^(.*)$ http://www.mcfaddengavender.com/$1 [L,R=301] 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-10-05T03:29:34.483

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^mcfaddengavender\.com$ [NC]
RewriteRule ^(.*)$ http://www.mcfaddengavender.com/$1 [L,R=301] 
```

这个过程对我有用。

# javascript - 使用标尺测量 Photoshop CS6 Javascript 分配变量

> ID：13809826
> 
> 赞同：1
> 
> 时间：2012-12-10T21:47:15.437
> 
> 标签：javascript, photoshop

好吧，伙计们，在编程方面我还是个新手，但是我设法完成了一个简单的脚本来完成部分工作。

我有 1,500 张刹车片图像，需要将其调整为 1:1 的比例，以使屏幕上的图像尺寸与现实生活中的尺寸相同。我已经计算出每个图像的大小需要是（垫的真实宽度* 2.834）

我当前的脚本提示用户输入刹车片的宽度并指定刹车片图像的大小（以像素为单位），但是每个刹车片都是不同的形状，图像周围有不同大小的边框，[如本例所示](http://i.imgur.com/YXC03.jpg)。

我需要的是让用户能够从焊盘的一侧选择到另一侧，这将返回焊盘的当前宽度（以像素为单位）。然后，我将能够将垫需要的大小除以垫的当前大小，以找到整个图像的比例因子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:45:56.040

更好的解决方案：

您可以使用 scriptUI 弹出一个带有图像的新窗口，然后将事件侦听器附加到该图像，不幸的是，您无法对文档本身执行此操作。在回调函数中将 X 坐标添加到数组中，如果数组长度大于 2，则隐藏窗口并运行处理函数。这样，您的第一次单击设置第一个点，第二次单击设置第二个点。第三次点击运行处理函数。如果你想变得非常花哨，如果你搞砸了，你可以使用右键重置整个事情，但我会留给你。

```
#target photoshop

function processImage(image, partWidth) {
    // Your function to resize the image based on the part width
    alert(partWidth); // For testing purposes
}

// Save the current unit preferences (optional)
var startRulerUnits = app.preferences.rulerUnits
var startTypeUnits = app.preferences.typeUnits

// Set units to PIXELS
app.preferences.rulerUnits = Units.PIXELS
app.preferences.typeUnits = TypeUnits.PIXELS

var doc = app.activeDocument; // or the next file in your file array if doing multiple
var clicks = [];
var width = 0;

var w = new Window("dialog", "The Image");
var img = w.add("image", undefined, File(doc.fullName));
img.addEventListener("click", function(k) {
                                if (clicks.length < 2) {
                                    clicks.push(k.clientX);
                                }
                                else {
                                    // absolute value so it doesn't matter if 
                                    // we click right or left side first
                                    width = Math.abs(clicks[0] - clicks[1]); 
                                    w.hide;
                                    processImage(doc, width);
                                }
                            });

w.show();

// Reset to previous unit prefs (optional)
app.preferences.rulerUnits = startRulerUnits;
app.preferences.typeUnits = startTypeUnits; 
```

您需要做的就是使用类似 Photoshop Script 之类的东西循环浏览一堆图像[- 调整文件夹（对话框）中](https://stackoverflow.com/questions/10257646/photoshop-script-resize-images-in-folder-dialog-box/10304886#10304886)的图像大小，然后将此代码放入循环中以批量执行此操作。

（不幸的是，如果图像大于屏幕尺寸并且缩小图像或添加滚动条对于 scriptUI 来说非常困难和hacky，您可能会遇到问题）

跛脚解决方案：

一种方法是让用户使用矩形选框工具（方形选择框）选择零件的宽度。然后您可以访问选择的维度。选择范围以如下形式存储在数组中。`[top-leftX, top-leftY, bottom-rightX, bottom-rightY]`要获得选择的宽度，您可以从第二个 X 值中减去第一个 X 值。

示例片段：

```
#target photoshop

var bounds = app.activeDocument.selection.bounds;
var selectionWidth = bounds[3] - bounds[0];

alert(selectionWidth); 
```

唯一需要注意的是用户必须在运行脚本之前进行选择。

使用 scriptUI 事件侦听器可能还有另一种方法。问题是它们必须应用于一个 scriptUI 对象，如窗口或面板。您可以尝试制作一个不透明度为 0 的大窗口，并向窗口添加一个单击事件以捕获鼠标坐标。老实说，使用 java 或 C# 或其他东西在 photoshop 之外更容易做到这一点。

# javascript - 自动化爆炸文本 Jquery Jsfiddle

> ID：13809828
> 
> 赞同：-1
> 
> 时间：2012-12-10T21:47:35.407
> 
> 标签：javascript, jquery, animation, text

[http://jsfiddle.net/doktormolle/dNXVx/](http://jsfiddle.net/doktormolle/dNXVx/)

如何自动制作此动画？

我对这一切都很陌生，所以非常感谢任何帮助！

```
 function fx(o)
{
  var $o=$(o);
      $o.html($o.text().replace(/([\S])/g,'<span>$1</span>'));
      $o.css('position','relative');
      $('span',$o).stop().css({position:'relative',
                               opacity:0,
                               fontSize:84,
                               top:function(i){return Math.floor(Math.random()*500)*((i%2)?1:-1);},
                               left:function(i){return Math.floor(Math.random()*500)*((i%2)?1:-1);}

                       }).animate({opacity:1,fontSize:12,top:0,left:0},1000);

}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:53:44.493

我认为您希望无需单击即可调用动画函数。如果是这种情况，您可以直接调用该函数或使用计时器来获得效果。见下文，

像下面这样更改跨度，

```
<span id="animateMe">click here</span> 
```

并且这个脚本下面`fx`里面的文件准备好了，

**直接调用：**

```
$(function() {
   fx('#animateMe');
}); 
```

**计时器（2 秒后）**

```
$(function() {
   setTimeout(function () {
     fx('#animateMe');
   }, 2000); //2000 milli seconds = 2 secs
}); 
```

[http://jsfiddle.net/dNXVx/483/](http://jsfiddle.net/dNXVx/483/)

# php - 如何使用 PHP 限制 API 请求

> ID：13809829
> 
> 赞同：3
> 
> 时间：2012-12-10T21:47:38.777
> 
> 标签：php, api, batch-processing

我们计划使用 SEMrush API，它允许访问与域名和搜索关键字相关的 SEO 数据。根据他们[的使用条款](http://www.semrush.com/api.html)，他们限制使用以避免杀死他们的服务器：

> 您每秒执行的请求不得超过 10 个，同时请求也不得超过 2 个。

我们将在 PHP 中构建一个基于域名聚合数据的简单工具，并正在寻找有关如何满足该要求的基础知识。我们正在为成百上千的潜在同时用户进行规划。

也许有人可以在 PHP 中提供一些伪代码来让我们这样做——或者它真的就像强制实际的 API 请求函数在每个命令之间休眠 1 秒一样简单吗？我在 API 和大量并发用户方面没有很多经验，因此不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:56:33.280

PHP 确实不是用于并发编程的最佳语言。但是，您可以在 PHP 旁边使用一些第三方解决方案来帮助您实现目标。

您需要的是可以为您处理实际请求的作业管理器或队列系统。由于这是一个后端工具（*至少这是我从你的问题中收集到的*），它不需要 PHP 来处理对作业本身的实际控制，而只是有一些控制过程来安排这些单独的作业并将它们交给你PHP 脚本使您可以有效地施加这些限制。

我的第一个建议是尝试类似[gearman](http://gearman.org/)的东西，它是一个很棒的工作管理器，并且有一个[PHP 扩展](http://php.net/gearman)来帮助您与库进行交互。

另一个建议是看看像[amqp](http://www.amqp.org/)或[zmq](http://www.zeromq.org/)这样的队列系统，其中一些在 PHP 中也有[扩展](http://php.net/amqp)。

所以这是一个给你的示例场景......

您有一个 PHP 脚本来接受这些请求并将它们交给您的作业管理器或通过套接字排队。作业管理器或队列将存储请求并以一种可以集中和控制的方式将其分发给各个工作人员以施加这些限制。我给你的链接中有一些例子可以帮助你到达那里。然而，在没有这些工具的帮助下纯粹用 PHP 来做这件事将被证明是相当棘手的，如果不仔细设计和考虑，可能会导致一些非常极端的错误行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-11T19:39:12.270

某些 API 在响应标头中返回速率限制信息。查看： [HTTP API 速率限制示例 HTTP 响应标头](https://stackoverflow.com/questions/16022624/examples-of-http-api-rate-limiting-http-response-headers) 此信息将帮助您等待几纳秒，然后再继续使用 PHP 的下一个请求`time_nanosleep()`

一些 PHP 库对速率限制的方式非常深入。Bucket Token 算法在网络上很常见： [https ://github.com/bandwidth-throttle/token-bucket](https://github.com/bandwidth-throttle/token-bucket)

`X-RateLimit-Remaining`现在，当涉及到限制一些在其返回标头中没有类似内容的 URL 请求时，我发现这有点矫枉过正。API 请求通常很慢。所以我在下面构建了 PHP 脚本。

这个 PHP 脚本将只等待几毫秒，基于`$throttlerID`. 更高`requestsInSeconds`将导致更短的等待时间...如果`$throttlerID`在同时请求中使用相同的请求，则每个请求将使用 File-Locking ( ) 等待另一个请求`FLOCK()`。

```
 function Throttler($requestsInSeconds, $throttlerID) {

        // Use FLOCK() to create a system global lock (it's crash-safe:))
        $fp = fopen(sys_get_temp_dir()."/$throttlerID", "w+");

        // exclusive lock will blocking wait until obtained
        if (flock($fp, LOCK_EX)) { 

             // Sleep for a while (requestsInSeconds should be 1 or higher)
             $time_to_sleep = 999999999 / $requestsInSeconds; 
             time_nanosleep(0, $time_to_sleep);

             flock($fp, LOCK_UN); // unlock
         }

        fclose($fp);

    } 
```

在每次通话之前将通话放在`Throttler()`右侧`CURL`。而已！

# java - 在Java中，为什么长度是字符串的方法，而它是数组的变量？

> ID：13809833
> 
> 赞同：4
> 
> 时间：2012-12-10T21:47:48.993
> 
> 标签：java

> **可能重复：**
> [为什么 String.length() 是一种方法？](https://stackoverflow.com/questions/8720220/why-is-string-length-a-method)

如果我想知道数组的长度，我必须输入以下内容：

```
array.length 
```

因此，它是一个变量，其中写入了称为“数组”的数组的长度。

在字符串上，同样的事情看起来像这样：

```
string.length() 
```

因此，它是一种返回“字符串”变量长度的方法。

但是为什么他们选择让这两个不同，而它基本上做同样的事情......这是因为效率还是其他原因？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:54:48.873

好问题。

数组的大小是固定的，因此有一个公共的最终长度字段。

字符串正在实现 CharSequence 接口，该接口具有需要实现的 length() 函数。

# java - 如何使用指数退避实现 HttpRequestRetryHandler？

> ID：13809835
> 
> 赞同：6
> 
> 时间：2012-12-10T21:47:52.330
> 
> 标签：java, android, httprequest

如果请求第一次失败，我希望为 HttpClient 实现[HttpRequestRetryHandler 。](http://pages.citebite.com/q8a1b6f4revu)

我还希望为后续重试实施[指数退避](http://en.wikipedia.org/wiki/Exponential_backoff)。在数学上它可以实现为

[E(c) = 1/2(2 次方 (c) -1)](https://devcentral.f5.com/tech-tips/articles/implementing-the-exponential-backoff-algorithm-to-thwart-dictionary-attacks)

![在此处输入图像描述](../Images/daafaeb498e753b58a56d0cb3cd4df05.png)

但我现在正在努力使用 HttpRequestRetryHandler 在代码中实现它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T21:55:40.243

HttpRequestRetryHandler 不允许您进行那种级别的控制；如果您想做一些非常具体的事情，我建议您实现类似[Handler](http://developer.android.com/reference/android/os/Handler.html)的东西，您可以在其中发布 Runnables 以延迟执行，例如使用 Handler.postDelayed() 根据您的公式增加延迟。

```
Handler mHandler = new Handler();
int mDelay = INITIAL_DELAY;

// try request
mHandler.postDelayed(mDelay, new Runnable() {
   public void run() {
      // try your request here; if it fails, then repost:
      if (failed) {
          mDelay *= 2;  // or as per your formula
          mHandler.postDelayed(mDelay, this);
      }
      else {
          // success!
      }
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-28T08:09:47.950

这是一个带有退避算法的好框架 - [https://github.com/rholder/guava-retrying](https://github.com/rholder/guava-retrying)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-28T12:01:43.500

我使用[guava-retrying](https://github.com/rholder/guava-retrying)来重试任意函数调用的策略。

我将它与我编写的库[Guavaberry](https://github.com/guavaberry/guavaberry)集成，其中包含几个等待策略，可以轻松构建可靠的指数退避和随机间隔（又名抖动）：[ExponentialJitterWaitStrategy](https://github.com/guavaberry/guavaberry/wiki/Retryer#exponentialjitterwaitstrategy)

例如，建立一个指数退避上限为 15 秒，并且在可调用对象上具有 50% 的抖动：

```
Retryer<Boolean> retryer = RetryerBuilder.<Boolean>newBuilder()
        .retryIfResult(Predicates.isNull())
        .withWaitStrategy(WaitStrategies.exponentialJitterWait(Duration.ofSeconds(15), 0.5D))
        .build();
retryer.call(callable); 
```

该库经过充分测试和记录，可以通过 Maven Central 轻松集成。

我希望这能有所帮助。

# javascript - 如何制作一个简单的表格来计算数量 x 的固定费率？

> ID：13809843
> 
> 赞同：0
> 
> 时间：2012-12-10T21:48:34.707
> 
> 标签：javascript

好的，我对 javascript 的工作原理非常了解，但不知道如何实现它。我有一个简单的表格，需要即时计算 x 票的价格，每张 75.00。假设表单 id 是数量和总数，其中 75.00 是一个费率。执行此脚本的脚本是什么，我应该在哪里添加它。

相关的 HTML 是这样的：

```
<form id="docContainer" enctype="multipart/form-data" method="POST" action="" 
    novalidate="novalidate" data-form="preview">

    <label id="item4_label_0" ># of Tickets</label>
    <input type="text" id="quantity" maxlength="254" data-hint="" name="quantity" required/>

    <label id="item13_label_0">Price Per Ticket</label>
    <input name="item_price" type="text" id="item_price" placeholder="75.00"
     maxlength="254" readonly data-hint="75.00"/>

    <label id="item14_label_0" >Total</label>
    <input name="total_price" type="text" id="total_price" maxlength="254" readonly/>

    <input type="submit" class="fb-button-special" id="fb-submit-button" value="Submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:07:05.387

您的输入没有 ID，所以我使用了他们的名字。这就是使用 jQuery 的方式。我忘记了如何编写老式 javascript，也许其他人可以添加。

```
<script src="jquery.js"></script>
<script>
$(function(){
    $('input[name="quantity"]').on('change keyup', function(){
        $('input[name="total_price"]').val($(this).val() * $('input[name="item_price"]').val());
    });
});
</script> 
```

走在前面

```
</body> 
```

编辑：为 jQuery 添加了必要的东西，但这可以用常规的 js 来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:26:30.497

```
<html>
    <head>
        <script>            

            window.onload = function() {
                var calculSumToString = function calculSumToString() {
                    totalField.value = (qtyField.value * itemPriceField.value).toFixed(2) + " $";
                };

                var totalField = document.getElementById('total_price');
                var qtyField = document.getElementById('quantity');
                var itemPriceField = document.getElementById('item_price');

                qtyField.onkeyup = calculSumToString;

                itemPriceField.onkeyup = calculSumToString;

            };
        </script>

    </head>

    <body>
        <form id="docContainer" enctype="multipart/form-data" method="POST" action="" 
              novalidate="novalidate" data-form="preview">

            <label id="item4_label_0" ># of Tickets</label>
            <input type="text" id="quantity" maxlength="254" data-hint="" name="quantity" required/>

            <label id="item13_label_0">Price Per Ticket</label>
            <input name="item_price" type="text" id="item_price" value="75.00"
                   maxlength="254" readonly data-hint="75.00"/>

            <label id="item14_label_0" >Total</label>
            <input name="total_price" type="text" id="total_price" maxlength="254" readonly/>

            <input type="submit" class="fb-button-special" id="fb-submit-button" value="Submit" />
        </form>
    </body>
</html> 
```

# perl - 使用 Mojolicious 用户代理解析 HTML

> ID：13809845
> 
> 赞同：3
> 
> 时间：2012-12-10T21:48:38.823
> 
> 标签：perl, mojolicious

我有这样的html

```
 <h1>My heading</h1>

 <p class="class1">
 <strong>SOMETHING</strong> INTERESTING (maybe not).
 </p>

 <div class="mydiv">
 <p class="class2">
 <a href="http://www.link.com">interesting link</a> </p>

 <h2>Some other heading</h2> 
```

h1 和 h2 之间的内容各不相同——我知道我可以在 Mojo::Dom 中使用 css 选择器来选择 h1 或 h2 或 p 标签的内容——但是如何选择 h1 和 h2 之间的所有内容？或者更一般地说，任何两组给定标签之间的所有内容？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T00:51:52.880

这很简单。您可以在[Mojo::Collection](http://mojolicio.us/perldoc/Mojo/Collection)对象中选择所有有趣的元素（例如，这就是[Mojo::DOM](http://mojolicio.us/perldoc/Mojo/DOM)的[`children`](http://mojolicio.us/perldoc/Mojo/DOM#children)方法所做的）并在迭代该集合时进行某种状态机之类的匹配。

## 可能是最神奇的方法

是在标量上下文中使用 Perl 的[范围运算符：`..`](http://perldoc.perl.org/perlop.html#Range-Operators)

> 在标量上下文中，“..”返回一个布尔值。该运算符是双稳态的，就像一个触发器，并模拟 sed、awk 和各种编辑器的行范围（逗号）运算符。每个“..”运算符都维护自己的布尔状态，即使在调用包含它的子例程时也是如此。只要它的左操作数是假的，它就是假的。一旦左操作数为真，范围运算符保持真，直到右操作数为真，之后范围运算符再次变为假。直到下一次评估范围运算符时它才会变为假。

这是一个

## 简单的例子

```
#!/usr/bin/env perl

use strict;
use warnings;
use feature 'say';
use Mojo::DOM;

# slurp all DATA lines
my $dom = Mojo::DOM->new(do { local $/; <DATA> });

# select all children of <div id="yay"> into a Mojo::Collection
my $yay = $dom->at('#yay')->children;

# select interesting ('..' operator in scalar context: flip-flop)
my $interesting = $yay->grep(sub { my $e = shift;
    $e->type eq 'h1' .. $e->type eq 'h2';
});

say $interesting->join("\n");

__DATA__
<div id="yay">
    <span>This isn't interesting</span>
    <h1>INTERESTING STARTS HERE</h1>
    <strong>SOMETHING INTERESTING</strong>
    <span>INTERESTING TOO</span>
    <h2>END OF INTERESTING</h2>
    <span>This isn't interesting</span>
</div> 
```

## 输出

```
<h1>INTERESTING STARTS HERE</h1>
<strong>SOMETHING INTERESTING</strong>
<span>INTERESTING TOO</span>
<h2>END OF INTERESTING</h2> 
```

## 解释

所以我使用 Mojo::Collection's[`grep`](http://mojolicio.us/perldoc/Mojo/Collection#grep)来过滤集合对象`$yay`。因为它寻找真相，所以它为给定函数的返回值创建了一个**标量上下文**`..`，因此运算符的作用就像一个触发器。它在第一次看到一个元素后变为真，在它第一次看到一个`h1`元素后变为假，所以你会得到标题*之间*`h2`的所有线条，**包括**它们自己。

 ***因为我认为你知道一些 Perl，你可以一起使用任意测试，`..`我希望这有助于解决你的问题！***

# jquery - jQuery UI Bootstrap 对话框中未添加的按钮类

> ID：13809847
> 
> 赞同：8
> 
> 时间：2012-12-10T21:48:43.803
> 
> 标签：jquery, twitter-bootstrap, jquery-ui-dialog

我已将 UI Bootstrap 主题添加到我的应用程序中，其中大部分似乎运行良好，但我似乎无法让我的 UI 对话框按钮像演示一样正确呈现。似乎 jQuery UI 没有将类添加到按钮，以便为按钮设置样式。

使用 Chrome 开发人员，按钮应呈现为：

```
<button type="button" 
   class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" 
   role="button" 
   aria-disabled="false">
      <span class="ui-button-text">Ok</span>
</button> 
```

但是当我创建我的对话框时：

```
$('#dialog').dialog({
   title: 'My Text',
   close: function (event, ui) {
      myfunction();
   },   
   bgiframe: false,
   width: 860,
   height: 500,
   resizable: true,
   modal: true,
   buttons: {
      Cancel: function () {
         $(this).dialog("close");
      } 
   }
}); 
```

ui 对话框按钮呈现如下：

```
<button type="button">Cancel</button> 
```

没有添加任何类，我找不到任何可以告诉我是否需要执行其他方法或交易是什么的信息。

谢谢。

-V

编辑：对不起，我忘了参考我正在使用的版本：

引导程序：2.2.2 jQuery：1.8.3 jQuery UI：1.9.2

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-11T02:02:39.820

好的，我自己解决了这个问题。

这只是我的 javascript 文件的顺序。

请务必在加载 jquery.ui 之前加载 bootstrap.js

一旦我这样做了，所有由 ui 本机应用的按钮类都会正确显示。

感谢大家的贡献。

-V

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-20T03:56:52.037

这是因为 bootstrap 的 button() 函数与 Jquery UI 的 button() 函数冲突。有关更多信息，请参阅此错误：[https ://github.com/twitter/bootstrap/issues/6094](https://github.com/twitter/bootstrap/issues/6094)

如果你想在 jqueryui 之后加载 bootstrap.js，你可以使用它来移动 bootstrap 的 button() 函数：

```
var btn = $.fn.button.noConflict(); // reverts $.fn.button to jqueryui btn
$.fn.btn = btn; // assigns bootstrap button functionality to $.fn.btn 
```

或者，您可以使用引导模式而不是 jqueryui 对话框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T22:14:07.827

您可能需要将此添加到您的 js/html 文件 $('button').button(); 这样每个按钮都应该根据您的主题呈现。

# php - 我的画布应用程序不断刷新

> ID：13809851
> 
> 赞同：0
> 
> 时间：2012-12-10T21:49:05.957
> 
> 标签：php, facebook

我正在为我的应用程序使用此代码以允许用户登录以及获取应用程序权限以创建和编辑用户的事件，并且工作正常，但是当我今天尝试时，页面不断刷新无限以及每次更改验证码。我不知道发生了什么事。

```
<?php
   // Include facebook php api 
   require_once("lib/facebook.php");

    // Setup app configuration
    $config = array();
    $config['appId'] = 'APP_ID';
    $config['secret'] = 'APP_SECRET';
    $config['cookie'] = true;
    $config['fileUpload'] = true;

    // set app id & canvas page for location variable
    $app_id = 'APP_ID';
    $canvas_page = "https://apps.facebook.com/mixityhc/";

      $location = "https://www.facebook.com/dialog/oauth?client_id=" 
         . $app_id . "&redirect_uri=" . urlencode($canvas_page) . "&scope=publish_stream,email,create_event,rsvp_event,user_events,friends_events";

  // create new instance of facebook object
  $facebook = new Facebook($config);

    // Get user id
    $fbID = $facebook->getUser();

    // Get the current access token
    $access_token = $facebook->getAccessToken();

    // check if we have valid user
 if ($fbID) {
     try {
          // Proceed knowing you have a logged in user who's authenticated.
         $fb_user_profile = $facebook->api('/me');   

      } catch (FacebookApiException $e) {
          $fbID = NULL;
          // seems we don't have enough permissions
          // we use javascript to redirect user instead of header() due to Facebook bug
          print '<script language="javascript" type="text/javascript"> top.location.href="'. $location .'"; </script>';

         // kill the code so nothing else will happen before user gives us permissions
         die();
      }

  } else {
      // seems our user hasn't logged in, redirect him to a FB login page

     print '<script language="javascript" type="text/javascript"> top.location.href="'. $location .'"; </script>';

     // kill the code so nothing else will happen before user gives us permissions
     die();
 }

 // Get user email address
 $email = $fb_user_profile['email']; 
```

任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:14:40.490

好吧，我想通了。Facebook API 已更新以修复 Facebook 中的一个明显错误。所以我上传了新文件（特别是证书）并且它有效。以防万一其他人遇到同样的问题。

谢谢

# string - Matlab从文本文件中读取列表作为字符串

> ID：13809852
> 
> 赞同：0
> 
> 时间：2012-12-10T21:49:13.733
> 
> 标签：string, file, matlab, vector

我是一名 Java 开发人员，并且是 Matlab 的新手。我有一个类似的文件：

```
Label_X sdfasf sadfl  asdf a fasdlkjf asd 
Label_Y lmdfgl ldfkgldkj dkljdkljdlkjdklj
Label_X sfdsa sdfsafasfsafasf 234|3#ert 44
Label_X sdfsfdsf____asdfsadf _ dsfsd
Label_Y !^dfskşfsşk o o  o o 4545 
```

我想要的是：

一个向量（数组）包括标签：

```
Label Array:
Label_X
Label_Y
Label_X
Label_X
Label_Y 
```

和一个列表（对于我们的示例有五个元素），列表的每个元素都有分隔字符串的元素大小。我是说

```
Element Number   Value(List of strings)                Element size of value list
--------------   ----------------------                --------------------------
1                sdfasf,sadfl,asdf,a,fasdlkjf,asd      6 
2                lmdfgl,ldfkgldkj,dkljdkljdlkjdklj     3
3                sfdsa,sdfsafasfsafasf,234|3#ert,44    4
4                sdfsfdsf____asdfsadf,_,dsfsd          3
5                !^dfskşfsşk,o,o,o,o,4545              6 
```

我知道使用 Java 很简单，但我不知道如何在 Matlab 中实现它。

**PS：**我正在做的就是这样。我有一个文本文件，其中包含人们的推文。第一个词是行中的标签，其他词是与该标签相关的对应词。我将有一个标签列表和另一个列表列表，其中包含有关每个标签的单词。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:45:59.657

这可能不是最佳的，但它应该可以解决问题

```
all = textread('test.txt', '%s', 'delimiter', '\n','whitespace', '');
List = cell(size(all));
for i = 1:size(all)
    [List{i}.name remain]    = strtok(all{i}, ' ');
    [List{i}.content remain] = strtok(remain, ' ');
    j = 0;
    while(size(remain,2)>0)
        j = j+1;
        List{i}.content = [List{i}.content temp ','];
        [temp remain] = strtok(remain, ' ');
    end
    List{i}.size = j;
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T02:16:40.757

Matlab 中最好的构造是单元格。单元格可以包含一个任何类型的对象，并且通常可以在数组本身中找到。像这样的东西应该可以工作，并且非常理想（假设您不期望超过 10K 行）；

```
output=cell(10000,1);     %This should be set to the maximum number of lines you ever expect to have
output_names=cell(size(output));
output_used=false(size(output));
fid=fopen('filename.txt','r');
index=0;
while ~feof(fid)
   index=index+1;
   line=fgets(fid);
   splited_names=regexp(line,'\w*','split');
   output{index}=splited_names(2:end);
   output_names{index}=splited_names(1);
   output_used(index)=true;
end
output=output(output_used);
output_names=output_names(output_used); 
```

# windows - 在cmd（bat文件）中运行reg命令？

> ID：13809856
> 
> 赞同：59
> 
> 时间：2012-12-10T21:49:22.157
> 
> 标签：windows, batch-file, registry, cmd

我正在尝试在 cmd（bat 文件）中运行此 reg 代码，但我无法使其工作。我在哪里做错了？

```
[HKEY_CURRENT_USER\Software\Policies\Microsoft\Internet Explorer\Control Panel]
"HomePage"=dword:00000001 
```

如果我将其设为 reg 文件并双击，它会起作用。

Bat文件代码（这不起作用，没有错误）：

```
@echo off
reg add "HKCU\Software\Policies\Microsoft\Internet Explorer\Control Panel" /V HomePage /T REG_DWORD /F /D 1 
```

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-12-11T00:13:41.850

导入 reg 文件时，您可能会收到 UAC 提示。如果你接受这一点，你就有更多的权利。

由于您正在写入“策略”键，因此您需要具有提升的权限。这部分注册表受到保护，因为它包含由系统管理员管理的设置。

或者，您可以尝试`regedit.exe`从命令提示符运行。

```
regedit.exe /S yourfile.reg 
```

.. 应该静默导入 reg 文件。有关更多命令行选项，请参阅[RegEdit 命令行选项语法](https://support.microsoft.com/en-us/kb/82821)。

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2016-01-28T15:17:25.483

在命令行中最好使用**REG**工具而不是 REGEDIT：

```
REG IMPORT yourfile.reg 
```

REG 是为控制台模式设计的，而 REGEDIT 是为图形模式设计的。这就是为什么运行***regedit.exe /S yourfile.reg***是一个坏主意的原因，因为**如果出现错误，您将不会收到通知**，而 REG 工具会提示：

```
>  REG IMPORT missing_file.reg

ERROR: Error opening the file. There may be a disk or file system error.

>  %windir%\System32\reg.exe /?

REG Operation [Parameter List]

  Operation  [ QUERY   | ADD    | DELETE  | COPY    |
               SAVE    | LOAD   | UNLOAD  | RESTORE |
               COMPARE | EXPORT | IMPORT  | FLAGS ]

Return Code: (Except for REG COMPARE)

  0 - Successful
  1 - Failed

For help on a specific operation type:

  REG Operation /?

Examples:

  REG QUERY /?
  REG ADD /?
  REG DELETE /?
  REG COPY /?
  REG SAVE /?
  REG RESTORE /?
  REG LOAD /?
  REG UNLOAD /?
  REG COMPARE /?
  REG EXPORT /?
  REG IMPORT /?
  REG FLAGS /? 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-13T22:03:16.437

如果记忆正确，则该`reg add`命令将不会创建整个目录路径（如果它不存在）。这意味着如果任何父注册表项不存在，则必须一个一个地手动创建它们。这真的很烦人，我知道！ **例子：**

```
@echo off
reg add "HKCU\Software\Policies"
reg add "HKCU\Software\Policies\Microsoft"
reg add "HKCU\Software\Policies\Microsoft\Internet Explorer"
reg add "HKCU\Software\Policies\Microsoft\Internet Explorer\Control Panel"
reg add "HKCU\Software\Policies\Microsoft\Internet Explorer\Control Panel" /v HomePage /t REG_DWORD /d 1 /f
pause 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-03T17:25:22.217

您也可以只创建一个组策略首选项并让它为您创建 reg 密钥。（不涉及脚本）

# javascript - jquery .focus/.blur 问题

> ID：13809861
> 
> 赞同：1
> 
> 时间：2012-12-10T21:49:57.413
> 
> 标签：javascript, jquery, html

下面是我一直在处理的代码的spinet；问题是，无论我做什么，我都无法让 jQuery 加载到页面上……或者我的代码完全错误。据我所知，一切都井井有条，其他人是否看到我的代码有任何问题

谢谢你。

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">      </script>
<script type ="text/javascript">

$(document).ready(function(){

$('.text').focus(function() {
 if (this.value == this.title) {
    $(this).val("");
}
}).blur(function() {
if (this.value == "") {
    $(this).val(this.title);
}
});​
});
</script>
<link rel="stylesheet" href="css.css" />
<title>
</title>
</head>
<body>

    <form  action = "backend.php" method = "post">
        <br />
<label for="name">First Name</label>
    <input type = "text" name = "fName" class = "text" value ="first" title="first"  /><br />

<label for ="realm"> Last name</label>
    <input type = "text" name = "lName" /><br />
    <button type="submit" value = "submit">submit</button>
</form>

</body>
</html> 
```

# c# - 加快 HTTP 发布速度

> ID：13809863
> 
> 赞同：4
> 
> 时间：2012-12-10T21:50:00.293
> 
> 标签：c#, optimization, http-post

我正在编写一个应用程序，通过 HTTP 帖子将文本消息发送到 Slooce Tech API。因为应用程序必须发送大量的文本消息，所以我正在尝试优化它的速度。

下面的第二段代码是我目前用来发送帖子的方法。我编写了第一段代码并省略了代码`HTTPWebResponse`以使其更快。

问题是新方法实际上更慢，而不是花费 0.25 秒来执行，它需要一秒或更长时间，有时会卡住。

有谁知道它为什么会这样做或任何其他提高此应用程序速度的提示？我已经添加了`Request.Proxy=null`，这加快了一点。

谢谢。

修改后的代码是：

```
 public void QuickSend()
    {
        XML = "<message id=\"" + lMessageID + "\"><partnerpassword>" + PartnerPassword + "</partnerpassword><content>" + sMessage + "</content></message>";
        URL = "http://sloocetech.net:****/spi-war/spi/" + PartnerID + "/" + sRecipient + "/" + Keyword + "/messages/mt";
        HttpWebRequest Request = (HttpWebRequest)WebRequest.Create(URL);

        RequestBytes = System.Text.Encoding.ASCII.GetBytes(XML);
        Request.Method = "POST";
        Request.ContentType = "text/xml;charset=utf-8";
        Request.ContentLength = RequestBytes.Length;
        RequestStream = Request.GetRequestStream();
        RequestStream.Write(RequestBytes, 0, RequestBytes.Length);
        RequestStream.Close();
    } 
```

这是原始代码：

```
 public XDocument SendSMS()
    {
        XML = "<message id=\""+ lMessageID +"\"><partnerpassword>" + PartnerPassword + "</partnerpassword><content>" + sMessage + "</content></message>";
        URL = "http://sloocetech.net:****/spi-war/spi/" + PartnerID + "/" + sRecipient + "/" + Keyword + "/messages/mt";
        HttpWebRequest Request = (HttpWebRequest)WebRequest.Create(URL);

        RequestBytes = System.Text.Encoding.ASCII.GetBytes(XML);
        Request.Method = "POST";
        Request.ContentType = "text/xml;charset=utf-8";
        Request.ContentLength = RequestBytes.Length;
        RequestStream = Request.GetRequestStream();
        RequestStream.Write(RequestBytes, 0, RequestBytes.Length);
        RequestStream.Close();

        HttpWebResponse Resp = (HttpWebResponse)Request.GetResponse();
        oReader = new StreamReader(Resp.GetResponseStream(), System.Text.Encoding.Default);
        string backstr = oReader.ReadToEnd();

        oReader.Close();
        Resp.Close();

        Doc = XDocument.Parse(backstr);
        return Doc;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:41:11.897

首先，我非常怀疑任何声称你会看到巨大改进的说法，因为你正在`HttpWebRequest`以一种特殊的方式制作你的。像您这样的单线程请求的瓶颈将是网络延迟以及服务器的响应时间。（也许他们在响应您的请求之前进行了大量的服务器端处理）。

您正在发出阻塞请求，这意味着您的 CPU 在等待响应时什么也不做。

如果你想多线程你的应用程序，你可以做如下的事情：

```
var tasks = new Task[10];
for (int i = 0; i < 10; i++)
{
    tasks[i] = Task.Factory.StartNew(() =>
    {    
        int messages_sent_by_one_task = 0;           
        while(messages_sent_by_one_task < 10)
        {
            QuickSend();
            messages_sent_by_one_task++;
        }
    });
}
while (tasks.Any(t => !t.IsCompleted)) { } //wait for tasks to complete 
```

这将产生 10 个任务，每个任务将发送 10 条消息。如果一个响应需要很长时间，其他 9 个线程将继续愉快地运行。

我相信您可能会对此有所改进，因为您要[合并异步请求和 HTTPClient](http://msdn.microsoft.com/en-ca/library/vstudio/system.net.http.httpclient.aspx)，因此您的 10 个线程中的每一个都不会被阻塞。但是，我觉得没有资格举一个例子，因为我从未尝试过。

您可能很想将线程数增加到某个不合理的数字，但要避免这种诱惑。创建和管理线程的开销很快就会赶上你。我不知道理想的数字是多少，但欢迎您尝试。

# android - 应用程序类返回空值

> ID：13809865
> 
> 赞同：1
> 
> 时间：2012-12-10T21:50:20.010
> 
> 标签：android

这是我的非活动课程：

```
import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.util.Log;
import android.widget.Toast;

public class PostManager {

    private Bundle bundle;
    private Context context;
    private Session session;
    private String victimId=null;

    public PostManager() {
        SavedFriend savedFriend = new SavedFriend();
        bundle = savedFriend.getBundle();
        context = savedFriend.getContext();
        session = savedFriend.getSession();
        victimId = savedFriend.getfriendsId();

        Log.e("postManager", victimId);
        Log.e("postManager", bundle.getString("message"));
    }
} 
```

这是我的应用程序类：

```
import java.util.List;

import android.app.Application;
import android.content.Context;
import android.os.Bundle;

import com.facebook.Session;
import com.facebook.model.GraphUser;

public class SavedFriend extends Application {
    private List<GraphUser> selectedUsers;
    private String friendsId;
    private Session session;
    private Bundle bundle;
    private Context context;

    public List<GraphUser> getSelectedUsers() {
        return selectedUsers;
    }

    public void setSelectedUsers(List<GraphUser> selectedUsers) {
        this.selectedUsers = selectedUsers;
    }

    public String getfriendsId() {
        return friendsId;
    }

    public void setfriendsId(String id) {
        this.friendsId = id;
    }

    public Session getSession(){
        return session;
    }

    public void setSession(Session session){
        this.session = session;
    }

    public void setContext(Context context){
        this.context = context;
    }

    public Context getContext(){
        return context;
    }

    public void setBundle(Bundle bundle){
        this.bundle = bundle;
    }

    public Bundle getBundle(){
        return bundle;
    }
} 
```

`(friendsId)`我在不为空的片段类中使用了应用程序类的数据。

当我从中调用应用程序类的数据时`PostManager`，返回值 null。

我试图查看 和`friendsId`的`message`值`Log.e`。但它给了我 nullPointer 异常。

这是否意味着我`PostManager constructor`从应用程序类中调用的所有值都是空的？如果是，我该怎么办？

我需要`PostManager`班级中的 session、applicationcontext、message、friendsId 值。我可以将这些值传递给`PostManager`，但是这个类是由哪个类扩展调用`onReceive()`的，并且这个警报是从另一个扩展类设置的。我需要的所有值都是由这个类创建的，除了，我不知道如何从 first class->alarm class->postmanager 类传递这些值。`alarm class``BroadcastReceiver``Fragment``friendsId`

在警报类清单中：

```
<application android:name=".SavedFriend"
  .......>
  ....
  <receiver android:name="package name.Alarm"/>
  ....
</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:08:27.330

您正在创建`Application`子类的新实例，因此不会设置这些成员变量。

相反，您可以使用[此问题](https://stackoverflow.com/questions/987072/using-application-context-everywhere)中的方法并存储一个易于访问的静态变量`Application`。使用类似的东西而不是创建一个新实例。

# sql - 在预期条件的上下文中指定的非布尔类型的表达式

> ID：13809870
> 
> 赞同：2
> 
> 时间：2012-12-10T21:50:41.150
> 
> 标签：sql, sql-server, error-handling, boolean

我厌倦了看到这个错误：

> *消息 102，级别 15，状态 1，过程 sp_reorder_quantity，第 16 行
> “–”附近的语法不正确。*

它说明了这一点，因为在第 16 行它指出：

```
WHERE products.quantity_in_stock – products.reorder_level < @unit; 
```

据说`products.quantity_in_stock`是：`An expression of non-boolean type specified in a context where a condition is expected`。

```
CREATE PROCEDURE sp_reorder_quantity
(
    @unit       int
)
AS
   SELECT
      products.product_id,
      suppliers.name,
      suppliers.address,
      suppliers.city,
      suppliers.province,
      'qty' = products.quantity_in_stock,
      products.reorder_level
   FROM
      suppliers
   INNER JOIN
      products ON suppliers.supplier_id = products.supplier_id
   WHERE
      products.quantity_in_stock – products.reorder_level < @unit;
GO 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T21:54:00.370

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:55:38.480

You can always rephrase the line as:

```
WHERE                   products.quantity_in_stock < products.reorder_level + @unit; 
```

# typescript - 用于 HTML5 画布游戏的 TypeScript 中的事件

> ID：13809871
> 
> 赞同：1
> 
> 时间：2012-12-10T21:50:53.057
> 
> 标签：typescript

我正在开发一个 HTML5 画布空间入侵者游戏，并希望从我的玩家类拍摄方法（在我的 gameObject 模块文件中）接收我的 Game.ts 类中的事件 Game.ts 有一个名为 playerBullets 的变量，这需要更新每次玩家射击！

```
module GameObjects {

    // Class
    export class   Player {
        color: string = "#00A";
        x: number = 50;
        y: number = 270;
        width: number = 20;
        height: number = 30;

        constructor () {
        }
        draw(canvas) {
            canvas.fillStyle = this.color;
            canvas.fillRect(this.x, this.y, this.width, this.height);
        }

        shoot() {
            // Sound.play("shoot");

            var bulletPosition = this.midpoint();

            playerBullets.push(Bullet({
                speed: 5,
                x: bulletPosition.x,
                y: bulletPosition.y
            }));
        };

         midpoint() {
            return {
                x: this.x + this.width / 2,
                y: this.y + this.height / 2
            };
        };

           explode() {
            //  this.active = false;
            // Extra Credit: Add an explosion graphic and then end the game
        };

    };

} 
```

和game.ts：

```
class game {

constructor () {
}
var playerBullets: Array = new Array[40];
FPS: number = 30; 
```

有任何想法吗？

* * *

如果我在纯 js 中执行此操作，那么将所有东西都设为全局而不需要事件会很容易，但这将很难维护..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:40:00.293

像在其他支持事件的 oo 语言（例如 c#）中一样处理它。在播放器中创建一个事件动作并在 Main.ts 中订阅它。

例如在播放器中添加一个方法成员：

```
public OnShoot: Function; 
```

然后在你的拍摄方法中添加这一行：

```
if(OnShoot) {
    OnShoot(new Bullet({
            speed: 5,
            x: bulletPosition.x,
            y: bulletPosition.y
        }));
} 
```

然后在您的 Main.ts 中，创建播放器后，您需要做的就是注册它的 OnShoot。例子：

```
var player = new GameObjects.Player();

player.OnShoot = function(bullet: Bullet) {
    playerBullets.push(bullet);
} 
```

希望这可以帮助。

注意：您始终可以通过事件侦听器执行“真正的”基于事件的实现（JQuery 对此进行了很好的设置），但对于您的实现而言，可订阅函数就足够了。另外，我觉得好像更合适。

# javascript - jQuery获取点击链接的ID

> ID：13809872
> 
> 赞同：4
> 
> 时间：2012-12-10T21:50:56.320
> 
> 标签：javascript, jquery, html

我在 jQuery 中有一个模态框，我创建它来显示一些嵌入代码。**我希望脚本采用`id`单击的链接，但我似乎无法使其正常工作。**

有谁知道我该怎么做或为什么会发生这种情况？

我的 jQuery 代码是：

```
function generateCode() {
    var answerid = $('.openembed').attr('id');
    if($('#embed input[name="comments"]:checked').length > 0 == true) {
        var comments = "&comments=1";
    } else {
        var comments = "";
    }
    $("#embedcode").html('<code>&lt;iframe src="embed.php?answerid=' + answerid + comments + '" width="550" height="' + $('#embed input[name="size"]').val() + '" frameborder="0"&gt;&lt;/iframe&gt;</code>');
}

$(document).ready(function () {
    $('.openembed').click(function () {
        generateCode();
        var answerid = $('.openembed').attr('id');
        $('#box').show();
        return false;
    });
    $('#embed').click(function (e) {
        e.stopPropagation()
    });
    $(document).click(function () {
        $('#box').hide()
    });
}); 
```

我的标记是：

```
<a href="#" id="7830" class="openembed">Embed</a>
<a href="#" id="9999" class="openembed">Embed</a> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T21:56:04.237

你的问题在这里：

```
$('.openembed') 
```

返回匹配元素的数组。您应该只选择单击的元素。 `$('.openembed')`如果您将`click`事件分配给具有此类的所有元素，则可以正常工作。但另一方面，您无法知道点击了哪个。

但幸运的是，在处理函数体中 click 你可以调用`$(this)`.

`$(this)`将返回当前（和单击的元素）。

```
// var answerid = $('.openembed').attr('id'); // Wrong
var answerid = $(this).attr('id');   // Correct
// Now you can call generateCode
generateCode(answerid); 
```

另一个错误是`generateCode`函数体。在这里，您应该传递所选元素的 id。这是正确的实现。

```
function generateCode(answerid) {
    if($('#embed input[name="comments"]:checked').length > 0 == true) {
        var comments = "&comments=1";
    } else {
         var comments = "";
    }
    $("#embedcode").html('<iframe src="embed.php?answerid=' + answerid + comments + '" width="550" height="' + $('#embed input[name="size"]').val() + '"frameborder="0"></iframe>');
} 
```

在这里，我以正确的行为实现了您的代码：http: [//jsfiddle.net/pSZZF/2/](http://jsfiddle.net/pSZZF/2/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T21:54:32.940

`class`您需要引用而不是引用将获取该类的所有成员的 ，`$(this)`以便在单击该链接时获得该唯一链接。

```
var answerid = $(this).prop('id'); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-10T21:53:41.167

```
 $('.openembed').click(function () {
    generateCode();
    var answerid = $(this).attr('id');
    $('#box').show();
    return false;
}); 
```

使用 $(this)。$('.openembed') 指的是多个链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T21:53:46.547

```
var answerid = $('.openembed').attr('id'); 
```

需要是

```
var answerid = $(this).prop('id'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T22:04:10.753

单击正确的锚点时获取 id 并将其传递给您的 generateCode 函数

```
$('.openembed').click(function () {
    var answerid = $(this).attr('id');
    generateCode(answerid)

    $('#box').show();
    return false;
}); 
```

改变你的功能

```
function generateCode(answerid) {
  // dont need this line anymore
  // var answerid = $('.openembed').attr('id'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-10T22:09:32.767

其他答案正在尝试修复 click() 函数，但您的问题实际上与 generateCode 函数有关。

您需要将点击的元素传递给 generateCode 函数：

```
$('.openembed').click(function () {
    generateCode(this); 
```

并修改generateCode：

```
function generateCode(element) {
    var answerid = element.id; 
```

当然`var answerid = $('.openembed').attr('id');`，在点击代码中也不正确，但它似乎并没有做任何事情。

# .net - 如何通过反射将程序集设置为 32 位（即 x86）

> ID：13809881
> 
> 赞同：0
> 
> 时间：2012-12-10T21:51:54.107
> 
> 标签：.net, reflection.emit

我知道我可以使用[CORFLAGS](http://msdn.microsoft.com/en-us/library/ms164699%28v=vs.80%29.aspx) 将 .NET 程序集强制为 32 位。当我首先使用反射来创建程序集时，我该怎么做？似乎有一个函数可以获取值（[http://msdn.microsoft.com/en-us/library/system.reflection.module.getpekind.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.module.getpekind.aspx)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:10:46.020

如果您询问如何为使用 生成的动态程序集设置它`AssemblyBuilder`，那么您可以使用允许您指定它[的重载。`AssemblyBuilder.Save()`](http://msdn.microsoft.com/en-us/library/ms145516.aspx)

# php - 从 .html 文件中检索前 10 条评论

> ID：13809886
> 
> 赞同：0
> 
> 时间：2012-12-10T21:52:21.027
> 
> 标签：php, jquery, readfile

我好几个小时都找不到答案。请建议：

拥有一个仅包含以下段落中的用户评论的 .html 文件：

```
<p>12/02/2012 4:32pm Mark</p>
<p>Hi! it's a nice demo! Really thankful</p>

<hr>

<p>11/02/2012 11:03am Miron</p>
<p>How to change the font size from CFD again?</p>

<hr>

<!-- AND LOADS OF OTHER <P><P> COMMENTS DELIMITED BY <HR> ... --> 
```

有 1000 条这样的评论，
**我想以某种方式获取最新的 10 条（不是按日期，只是前“十”条评论）。**而且我不知道怎么做。

我知道我可以使用 jQuery`.load('comments.html')`并删除除前 10 条评论之外的所有元素，甚至使用 PHP 包含整个文件，而不是`.hide()`使用**jQuery** ......但加载整个文件仅包含 10 条评论是个好主意？

如何拆分该文件并进入文件`<div id="latest_10_comments"></div>`的前 10 条评论`comments.html`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:00:13.357

我知道你想要一个 JavaScript 解决方案，但你可以在 PHP 中使用explode 函数来做到这一点。

像这样的东西：

```
$comments = explode("<hr>", file_get_contents("/comments.html"));
for($i = 0; $i < 10; $i++) {
   print($comments[$i]);
} 
```

这将创建一个名为 $comments 的数组，它是 comments.html 中的每个评论，由

```
<hr> 
```

标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T22:12:44.983

首先，我建议您完全重新考虑您解决此问题的方法。为什么要以这种方式将所有内容都存储在 HTML 文件中？如果您想按需动态加载某些评论，您应该将其存储为 XML 文件或将其存储在数据库中。

但是，要回答您的问题，如果您想在 PHP 中执行此操作，您将需要使用像 PHP 的[DomDocument这样的 X/HTML 解析器。](http://php.net/dom)这是一个工作示例...

**编辑**（*更改以反映 OP 的期望行为*）：

```
$dom = new DomDocument;
$dom->loadHTMLFile("comments.html");

// Get all the P tag elements in the DOM
$comments = $dom->getElementsByTagName('p');

// Get only the first 10
$amount = 10; // number of comments you want
foreach ($comments as $num => $comment_nodes) {
    if ($num + 1 > $amount)
        break;
    echo $comment_nodes->nodeValue, PHP_EOL;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T22:00:04.137

```
$("<p>").each(function(index, value)
{
    //Do what you want here
} 
```

这将循环遍历您的所有`<p>`. 如果您知道元素的顺序，那么您可以根据`index`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T22:00:34.650

解决方案 1\. 您可以使用 RegEx 模式匹配 2 p 标签后跟 hr 并重复该模式 10 次。

解决方案2.来自其他答案（CHRIS）的想法，但由于PHP中有错误，我建议这样做。

```
 $comments = explode("<hr>", file_get_contents("/comments.html"));
    for($i = 0; $i < 10; $i++) {
       print($comments[$i]);
    } 
```

# java - Java：将相同的对象传递给彼此的构造函数

> ID：13809888
> 
> 赞同：2
> 
> 时间：2012-12-10T21:52:26.223
> 
> 标签：java, object, constructor, nullpointerexception

晚上大家。

在尝试将对象传递给另一个对象构造函数时，我似乎遇到了一个奇怪的问题，该构造函数的构造函数也依赖于它被传递给的对象。

例如，看下面的例子：

```
ToolBar myToolBar = new ToolBar(webPanel);
WebPanel webPanel = new WebPanel(myToolBar); 
```

但是，在构造 ToolBar 时，它会返回 NullPointerException。当然那是因为 webPanel 还没有构建，它需要它。

减速和初始化都必须保留在同一个类（称为 BuildUI）中，因为它是我设置属性的地方。（ToolBar 创建 webPanel 对象也没有意义，反之亦然）。

我也不确定这是否是一种好的编程习惯，因为两个对象都需要相互引用。

非常感谢这里的任何建议。谢谢，汤姆。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T21:56:53.473

如您所见，这将导致问题。除了这种方法，您可以使用 setter-getter 方法方法，在该方法中使用默认构造函数构造对象，例如

```
ToolBar myToolBar = new ToolBar();
WebPanel webPanel = new WebPanel(); 
```

然后使用 setter 方法设置完全构造对象所需的实例变量。

```
myToolBar.setWebPanel(webPanel);
webPanel.setToolBar(myToolBar); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T21:55:16.127

这似乎是[恶性循环](http://www.thefreedictionary.com/vicious+circle)的一个很好的例子。

我建议通过使用单独的方法打破循环，例如`addToolbar()`，将另一个对象添加到其中一个类，而不是构造函数。如果尚未调用该方法，您只需添加一些检查以避免非法对象状态：

```
class WebPanel {
    public void addToolbar(Toolbar toolbar) {
        ...
    }
}
...
class ToolBar {
     public ToolBar(WebPanel parent) {
         ...
     }
}
...
WebPanel webpanel = new WebPanel();
webpanel.addToolbar(new Toolbar(webpanel)); 
```

一般来说，“子”对象最好将父对象作为构造函数参数，然后通过方法调用将其添加到父对象，而不是相反。在 UI 中，外部元素是其内容的父级 - 在您的情况下，我可能希望 a`WebPanel`包含 - 并因此成为 -`ToolBar`对象的父级......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T21:56:12.570

我以前有对象相互引用。即在游戏中，对象可能包含对其单元格的引用，而单元格可以包含对对象的引用。

你只需要小心你如何创建你的对象。

没有什么说它们都必须传递给彼此的构造函数，实际上您可以创建两个对象，然后以不同的方法让它们相互引用。

在使用它之前检查一个值是否为空也不是一种不常见的做法（但只有这样做才是该值实际上有一个永远为空的借口。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T21:57:06.857

嗯.. 你可以做的是创建一个模型对象，它环绕你的工具栏和 WebPanel。

```
public class SomeModel{
  WebPanel panel;
  Toolbar toolbar;
} 
```

或者你可以创建你的工具栏对象..并在工具栏的构造函数中创建你的 webpanel

```
public WebPanel()
{
   this.toolbar= new Toolbar(this); 
}
webPanel = new WebPanel();
webPanel.getToolbar() ; 
```

好吧，那是在作弊 lmao 这取决于一个是否是另一个的复合对象；虽然我认为模型方式更好..没有循环引用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T21:59:16.270

也许如果你先声明

```
WebPanel webPanel = new WebPanel(myToolBar); 
```

接着

```
ToolBar myToolBar = new ToolBar(webPanel); 
```

对象必须首先存在才能被传递。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-10T22:03:09.063

有多种方法可以做到这一点；我通常更喜欢将参数传递给两者之一并让它调用另一个`setter`方法：

```
class ToolBar {
  void setWebPanel(WebPanel wp) { 
    _wp = wp; 
  }
  ....
}

class WebPanel {
  WebPanel(ToolBar t) {
    _t = t;
    _t.setWebPanel(this);
  }
} 
```

# python - Flask 上下文处理器函数

> ID：13809890
> 
> 赞同：6
> 
> 时间：2012-12-10T21:52:47.173
> 
> 标签：python, python-2.7, flask

按照 Flask 页面上的最小示例，我正在尝试构建上下文处理器：

上下文处理器.py

```
def inflect_this():
    def inflectorize(number, word):
        return "{} {}".format(number, inflectorizor.plural(word, number))
    return dict(inflectorize=inflectorize) 
```

app.py（在应用工厂内）

```
from context_processor import inflect_this

app.context_processor(inflect_this) 
```

使用之前的变形函数，它根据数字变形单词，很简单，我已经将它作为 jinja 过滤器，但想看看我是否可以将它作为上下文处理器。

鉴于此处页面底部的示例：http://flask.pocoo.org/docs/templating/ [，](http://flask.pocoo.org/docs/templating/)这应该可以工作，但不能。我得到：

```
jinja2.exceptions.UndefinedError UndefinedError: 'inflectorize' is undefined 
```

我对您的了解还不够，无法看到发生了什么。谁能告诉我出了什么问题？

编辑：

```
app.jinja_env.globals.update(inflectorize=inflectorize) 
```

用于添加功能，并且似乎比将方法包装在方法中的开销更少，其中 app.context_processor 可能无论如何都会中继到 jinja_env.globals。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-14T02:46:47.097

我不确定这是否完全回答了您的问题，因为我没有使用过应用程序工厂。

但是，我从蓝图尝试了这个，这对我有用。你只需要在装饰器中使用蓝图对象而不是默认的“app”：

东西/view.py

```
from flask import Blueprint

thingy = Blueprint("thingy", __name__, template_folder='templates')

@thingy.route("/")
def index():
  return render_template("thingy_test.html")

@thingy.context_processor
def utility_processor():
  def format_price(amount, currency=u'$'):
    return u'{1}{0:.2f}'.format(amount, currency)
  return dict(format_price=format_price) 
```

模板/thingy_test.html

```
<h1> {{ format_price(0.33) }}</h1> 
```

我在模板中看到了预期的“0.33 美元”。

希望有帮助！

# c# - c# 为从网络共享运行的应用设置 JumpList

> ID：13809892
> 
> 赞同：1
> 
> 时间：2012-12-10T21:52:47.643
> 
> 标签：c#, shell, windows-7, windows-server-2008, jump-list

我需要为在 2008 服务器上运行的 ac# 应用程序设置跳转列表快捷方式，但安装跳转列表的机器正在运行 Windows 7。

当应用程序在本地运行时设置跳转列表没有问题，所以我知道代码有效。我想知道我是否遗漏了一个步骤或某些（希望）对其他有更多经验的人来说显而易见的东西。

**编辑**[应用程序不是在从服务器执行它的win7机器上运行吗？难道是我（在不知不觉中）试图将 JumpList 快捷方式添加到 08 服务器开始菜单？我刚刚开始谋生，我什至不知道我缺乏什么，感谢任何帮助！]

添加“我的”代码以防万一：

```
#region Win7 Specific Code
            if (m.Msg == Windows7Taskbar.TaskbarButtonCreatedMessage)
            {
                try
                {

                    jlm = new JumpListManager(appID);
                    jlm.UserRemovedItems += delegate { };

                    string strAppDir = Path.GetDirectoryName(Assembly.GetEntryAssembly().Location);
                    app = Assembly.GetEntryAssembly().GetName().Name + ".exe";

                    jlm.AddUserTask(new ShellLink
                    {
                        Title = "Smart Client",
                        Path = Path.Combine(strAppDir, app),
                        Arguments = "sc",
                        IconLocation = Path.Combine(strAppDir, @"ico\a.ico")
                    });

                    jlm.AddUserTask(new ShellLink
                    {
                        Title = "Web Client",
                        Path = Path.Combine(strAppDir, app),
                        Arguments = "wc",
                        IconLocation = Path.Combine(strAppDir, @"ico\b.ico")
                    });

                    jlm.AddUserTask(new ShellLink
                    {
                        Title = "TSQL Solution",
                        Path = Path.Combine(strAppDir, app),
                        Arguments = "ts",
                        IconLocation = Path.Combine(strAppDir, @"ico\c.ico")
                    });

                    jlm.AddUserTask(new ShellLink
                    {
                        Title = "C# Solution",
                        Path = Path.Combine(strAppDir, app),
                        Arguments = "cs",
                        IconLocation = Path.Combine(strAppDir, @"ico\d.ico")
                    });

                    jlm.AddUserTask(new ShellLink
                    {
                        Title = "Report Solution",
                        Path = Path.Combine(strAppDir, app),
                        Arguments = "rs",
                        IconLocation = Path.Combine(strAppDir, @"ico\e.ico")
                    });
                    jlm.Refresh(); 
```

提前感谢您提供的任何指导。

*   山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-26T17:06:48.173

最终的解决方案是构建一个行为类似于跳转列表的应用程序。据我所知，从网络共享加载时无法实现我的结果。

# numerical-stability - 在线更新向量和的数值稳定算法

> ID：13809893
> 
> 赞同：2
> 
> 时间：2012-12-10T21:52:51.247
> 
> 标签：numerical-stability

给定一个向量 v，我想在变量 sum_v 中跟踪其元素的总和。向量 v 的每个元素 i 是权重向量 w_i 与其他向量 d_i 的点积。所以，每次 d_i 改变时，v 也会改变。我一直在更新 sum_v，只要 d_i 改变，我就会根据 v_i 的变化来改变它。不幸的是，小的数值不稳定性很快就会增加。

我可以使用哪些有效的技术来防止这种情况发生？

编辑：现在，每当 d_i 更改时，我的算法都会花费恒定的时间来更新 sum_v。我想保持在 log(n) 以下，其中 n 是 v 的长度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:43:30.597

一种解决方案是构建一个完整的二叉树，使得每个叶子代表 v_i 的一个元素，而父母代表他们孩子的总和。更改 v 的一个元素需要对数时间来过滤对 sum_v 的更改，但是对于消除增量而言，结果在数值上是稳定的，尽管对于消除 v 的相邻元素来说不是。

找到一种方法来保持它对这两个问题的数值稳定是一个有趣的问题。

# twitter-bootstrap - 如何使用 LESSCSS 变量自定义 Twitter Bootstrap 的 CSS？

> ID：13809895
> 
> 赞同：7
> 
> 时间：2012-12-10T21:52:51.497
> 
> 标签：twitter-bootstrap, less

我正在尝试在不更改引导代码的本地副本的情况下自定义 Twitter Bootstrap 的 CSS。* 因此，我将 Twitter Bootstrap 项目克隆到一个文件夹中，并将我的应用程序代码放在它自己的文件夹中：

```
/html
    /bootstrap
       ...etc...
       /js
       /less
    /MyApp
       ...etc...
       /common_files
          /less
             style.less 
```

在我的“style.less”文件中，我定义了一些 LESS 变量，然后包含引导文件：

```
/* custom settings that deviate from Bootstrap's default values */
@sansFontFamily: Trebuchet MS, Tahoma, sans-serif, Arial;
@baseFontSize: 11px;
@baseLineHeight: 18px;

/* import bootstrap components from bootstrap-dedicated folder */
@import "../../../bootstrap/less/bootstrap.less";
@import "../../../bootstrap/less/responsive.less"; 
```

由于[LESSCSS 变量确实是常量](http://lesscss.org/#-variables)，我很惊讶当我将 LESS 文件编译成 CSS 时，我的 @sansFontFamily 没有被选中：`lessc style.less > MyApp.css --yui-compress`

**所以......我错过了什么？为什么我的变量会被 Bootstrap 的 LESS 文件中定义的变量覆盖？**

*--我已经查看了“ [Twitter Bootstrap Customization Best Practices](https://stackoverflow.com/questions/10451317/twitter-bootstrap-customization-best-practices) ”，但认为利用常量会是一种更好的方法（如果我可以让它工作的话）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T21:13:54.030

正确的方法是首先导入引导资产，*然后*使用 LESS 变量定义自定义值。因此，鉴于问题中的目录结构：

## 如果您使用的是 Bootstrap 2.x 版：

```
/* import bootstrap components from bootstrap-dedicated folder */
@import "../../../bootstrap/less/bootstrap.less";
@import "../../../bootstrap/less/responsive.less";

/* custom settings that deviate from Bootstrap's default values */
@sansFontFamily: Trebuchet MS, Tahoma, sans-serif, Arial;
@baseFontSize: 11px;
@baseLineHeight: 18px; 
```

## 如果您使用的是 Bootstrap 3.x 版：

```
/* import bootstrap components from bootstrap-dedicated folder */
@import "../../../bootstrap/less/bootstrap.less";

/* custom settings that deviate from Bootstrap's default values */
@font-family-sans-serif: Trebuchet MS, Tahoma, sans-serif, Arial;
@font-size-base: 11px;
@line-height-base: 18px; 
```

* * *

变量的完整列表[可以在 variables.less](https://github.com/twbs/bootstrap/blob/master/less/variables.less)文件中找到。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-02T14:30:46.050

[根据此处的文档http://lesscss.org/#-variables，PeterVR](http://lesscss.org/#-variables)将自定义变量声明移动到引导程序 @import 语句下方的建议是正确的。这说明：

> 当定义一个变量两次时，使用变量的最后一个定义，从当前范围向上搜索。例如：

```
@var: 0;
.class1 {
    @var: 1;
    .class {
        @var: 2;
        three: @var;
        @var: 3;
    }
    one: @var;
} 
```

> 编译为：

```
.class1 .class {
    three: 3;
}
.class1 {
    one: 1;
} 
```

（示例代码已编辑 - 他们的版本中有几个拼写错误！）

所以我猜编译顺序是这样的：

1.  处理所有 @import 以构建一个 LESS 代码块
2.  浏览 LESS 代码并收集所有变量声明（每个范围块）
3.  任何变量声明值替换任何以前的同名实例（每个范围块）
4.  用变量值替换变量占位符

这可以解释为什么 3 的值`.class1 .class { three:`是 3，即使它是在声明之前`@var: 3;`声明的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-17T16:13:12.760

您好，我从随机互联网搜索中获得了更好的方法

[http://ollomedia.com/using-twitter-bootstrap-the-right-way/](http://ollomedia.com/using-twitter-bootstrap-the-right-way/)

示例源代码，请下载并签出

```
http://ollomedia.com/wp-content/uploads/sample.zip 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T02:09:18.167

我最近做了类似的事情，我发现最好的方法是创建自己的“variables_override.less”，并在 bootstrap.less 和 responsive.less 中导入标准 variables.less**后导入它。**然后正常编译这两个文件，您的变量将覆盖引导程序默认值

这种方法确实涉及修改 bootsrap.less 和 responsive.less 但以非常小的方式

# autohotkey - 自动热键键盘重新映射

> ID：13809897
> 
> 赞同：0
> 
> 时间：2012-12-10T21:52:56.860
> 
> 标签：autohotkey

我的笔记本电脑键盘输出有问题（尝试使用 USB 键盘一切正常，买了新的仍然同样的问题，重新安装驱动程序，Windows，注册表项看起来正确，即使在 BIOS 键盘中也有同样的问题，键盘连接器已清除并且看起来很好） ..所以每次我按'v'键时它会显示为'v6'，当我按'6'时会显示为'v6'，当我按'b'时它会显示为'b8'，当按'8'时' 它以 'b8' 的形式出现，以此类推，还有其他几个键..

1.  如果有人知道我的笔记本电脑有什么问题或知道解决方案，请告诉我，

2.  我想在自动热键中编写脚本，但我不知道如何为我的问题编写正确的命令行..所以这就是我想要完成的：很明显，当我按下 vi 时想要 v 而不是 v6 :p .. 所以我想要命令行这将用退格键擦除这个错误的6 ..当我输入命令行'v :: backspace'时它会出现'6'并且我想要'v'。当我写“6::backspace”时，它什么也没有出现，所以我很困惑，需要正确的命令行或某种解决方案（除了更换主板，我确信它会解决问题）。

天呐！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:22:52.937

很简单，只需像这样替换 v6 或 b8：

```
:?*:v6::v
:?*:b8::b 
```

# facebook - Facebook 聚合问题

> ID：13809902
> 
> 赞同：1
> 
> 时间：2012-12-10T21:53:22.477
> 
> 标签：facebook, facebook-opengraph, aggregation, facebook-timeline

我创建了一个具有 4 个动作和 2 个对象类型的 facebook 时间线应用程序。之后，我创建了一个聚合，以在那个时间线品牌框（如 Forsquare）中显示我的数据，它应该显示一个动作的总和。

例如，到目前为止，我已经进了 3 个球，一个我进了另一个球，它应该显示 4 个进球（其中动作是得分目标，对象是目标）。

问题是该框没有出现在我的时间轴中，尽管如果我转到活动选项卡，我可以看到该操作已完成（例如：用户进球）。

我遇到的另一个问题是如何在同一个时间轴框中显示多个聚合（目标、镜头）（目标和镜头是不同的对象）？

我正在使用 Facebook 的 JS Api。

# bison - 野牛解析器基本问题

> ID：13809916
> 
> 赞同：0
> 
> 时间：2012-12-10T21:54:10.443
> 
> 标签：bison, lex, flex-lexer, parser-generator

我有一些令人困惑的问题让我陷入循环，请帮助我理解它们。

1.  如果我有两个文件，一个是`.y`解析器文件，第二个是`.l`词法分析器，我可以`yytext`在解析器文件中使用，我应该定义`yylex`那里使用它吗？

2.  如果我想更改默认`yyerror`函数，我应该在声明部分的解析器文件中声明它吗？

3.  如果在 lex 文件中，我向解析器返回一个令牌，如下所示：

    [0-9] 返回数字；什么是传递给解析器的 DIGIT 找到的数字或只是没有 DIGIT 的数字本身？

4.  我如何`yylineno`在解析器文件中使用，因为我需要解析器使用`yylineno`并告诉错误发生在哪里以及是什么令牌导致的？

5.  当我编写这样的规则时，在解析器文件中：

    exp -> exp |/*空*/

是一样的吗

```
exp ->/*empty*/ |exp 
```

我感谢任何可以帮助我解决这些问题的人，因为他们让我感到困惑，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T04:05:15.763

1.  `yytext`在文件中使用`.y`是危险且容易出错的——它没有很好地定义`yytext`是数组还是指针，而且它甚至可能在文件外部不可见`.l`。

2.  liby.a 中定义了一个`yyerror`函数——如果你链接到`-ly`它，你就可以使用它。如果你想定义你自己的`yyerror`，你可以在任何地方这样做。

3.  `return DIGIT;`将`DIGIT`作为标记返回（大概是`.y`文件中定义的标记`%token`，与实际数字值无关。如果要在解析器中访问数字值，则需要在词法分析器中将其从`yytext`to复制：`yylval`

    ```
    [0-9]        { yylval = *yytext-'0'; return DIGIT; } 
    ```

4.  `yylineno`，如果它存在（需要正确的 flex 选项来自动创建它）通常只是一个全局变量。您需要小心，因为解析器可能会在减少规则之前预先读取一个标记，因此`yylineno`可能会因该标记而偏离您真正想要的。如果您使用的是野牛，您可以在重新运行每个标记之前将您的词法分析器复制`yylineno`到`yylloc`其中，这将允许您为解析器中的每个标记获取正确的行号。

5.  以下都是相同的：

    ```
    exp: exp | /*empty */ ; 
    ```

    ```
    exp: /*empty*/ | exp ; 
    ```

    ```
    exp: /*empty*/ ;
    exp: exp ; 
    ```

通常，文件中规则的顺序`.y`无关紧要（它影响减少/减少冲突的解决，但没有其他影响）。

请注意，具有`exp -> exp`自动使您的语法模棱两可的规则并导致移位/减少冲突。

# javascript - 直接分配的事件处理程序是实际的对象属性吗？

> ID：13809917
> 
> 赞同：4
> 
> 时间：2012-12-10T21:54:14.867
> 
> 标签：javascript, javascript-events, event-handling

我在试图回答这个问题时遇到了困难：[解释 javascript 中的奇怪行为](https://stackoverflow.com/questions/13806958/explaining-odd-behavior-in-javascript)。在研究过程中，我发现直接分配给宿主对象的事件处理程序呈现出一种奇怪的行为：它们可以作为对象的属性进行访问，但不知何故，它们似乎不是实际的属性。

例如，如果我在全局范围内定义一个变量，它看起来就像 的任何其他属性`window`：

```
​var foo = "foo";
console.log(Object.getOwnPropertyDescriptor(window, 'foo'));
// Object {value: "foo", writable: true, enumerable: true, configurable: false} 
```

如果我只是分配给`window.foo`，或者如果我创建一个隐含的全局（但是 [[Configurable]] 将是`true`，由于已知原因；当然，这在严格模式下不起作用），我会得到相同的输出。但是，如果我尝试通过分配来添加事件处理程序`window.onsomething`，我无法读取该属性`Object.getOwnPropertyDescriptor`（尽管它仍然可以在 下访问`window.onsomething`）：

```
window.onresize = function onresize(e) {
    console.log('rsz', e);
}
console.log(window.onresize); // function onresize(){...}
console.log(Object.getOwnPropertyDescriptor(window, 'onresize')); // undefined 
```

浏览器如何处理这样分配的事件处理程序？我怀疑这个问题的答案也是另一个问题的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T22:33:34.557

该`window`对象是`Window`构造函数的一个实例，它`onresize`作为其原型的一部分。

尝试记录`window`并启用该`show own properties only`选项。`onresize`不会出现，因为它继承自`Window`. 这就是为什么`getOwnProperty`不选择它的原因，因为它只返回对象拥有的属性的描述符，而不是源自原型链的那些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T22:27:21.213

如果您查看[MDN 文档`getOwnPropertyDescriptor`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor)，它只会报告直接在该对象上的属性，而不是在原型链中。

例如，它适用于：

```
Object.getOwnPropertyDescriptor(window, 'location') 
```

但不适用于：

```
Object.getOwnPropertyDescriptor(window, 'onresize') 
```

可能是因为`onresize`在窗口继承的东西上（因此在原型链中），而不是在实际的窗口对象本身上。

# backbone.js - 为 Backbone.Marionette 中的 currentView 对象返回未定义

> ID：13809921
> 
> 赞同：1
> 
> 时间：2012-12-10T21:54:38.170
> 
> 标签：backbone.js, coffeescript, marionette

我正在测试布局如何监听其子视图的自定义事件。

[我在这里](http://jsfiddle.net/olivierntk/Fj4fr/40/)创建了一个 jsFiddle ，其中有一个布局、2 个区域，我实例化了 2 个 ItemView 并将它们显示在布局的区域中。小提琴在 CoffeeScript 中。

```
<div id="region"></div>
<script id="layout-tmpl" type="text/_">
    <h3>Heading</h3>
    <div id="content"></div>
    <div id="content2"></div>    
</script>

<script id="item-tmpl" type="text/_">
    <form>
        <label>Firstname:</lable>
        <input type="text" name="firstname" value="<%= firstname %>" />
        <input type="button" value="Save" id="save" />
    </form>    
</script> 
```

CoffeeScript 是：

```
SimpleLayout = Backbone.Marionette.Layout.extend 
    template: '#layout-tmpl' 
    regions:
        main: '#content'
        other: '#content2'
    initialize: () ->
        console.log @
    onShow: () ->
        _.each @.regionManagers, (region, name, something) =>
            console.log region.currentView
            # @.bindTo region.currentView, "custom:event", @callback           
    callback: () ->
        alert "HELL YEAH"

SimpleItemView = Backbone.Marionette.ItemView.extend
    template: "#item-tmpl"
    events:
        'click #save': 'save'
    save: (evt) ->             
        evt.preventDefault()
        @.trigger "custom:event"

region = new Backbone.Marionette.Region el: "#region"    
layout = new SimpleLayout() 
region.show layout
layout.main.show new SimpleItemView model: (new Backbone.Model firstname: "Olivier")
layout.other.show new SimpleItemView model: (new Backbone.Model firstname: "Travis") 
```

我希望布局能够监听 ItemViews 的自定义事件。在 onShow 中，我正在遍历区域管理器并尝试访问 currentView 对象，但它返回未定义。

如果我在 SimpleLayout 类之外附加相同的事件处理程序，并且在显示项目视图之后，布局处理程序会正确处理自定义事件。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:00:12.127

`onShow`我认为正在发生的事情是当布局被调用时视图实际上并没有准备好：

```
layout = new SimpleLayout() 

region.show layout 
```

    // onShow 在这里调用，没有要绑定的视图，因为它们还没有被创建 

```
layout.main.show new SimpleItemView model: (new Backbone.Model firstname: "Olivier")
layout.other.show new SimpleItemView model: (new Backbone.Model firstname: "Travis") 

// now the views are ready, they can be bound to
_.each layout.regionManagers, (region, name) =>
    console.log region.currentView
    region.currentView.bindTo region.currentView, "custom:event", () ->
        alert "HELL YEAH" 
```

[这是一个分叉的小提琴](http://jsfiddle.net/N6TYL/3/)，它显示了`custom:event`被触发的情况。

# openlayers - 带圆角的 Openlayer 地图

> ID：13809926
> 
> 赞同：3
> 
> 时间：2012-12-10T21:54:52.337
> 
> 标签：openlayers

我将我的 openlayer 地图集成到一个带圆角的 div 中。我怎样才能让地图有圆角？我曾尝试将边界半径应用于开发人员工具中的许多 div，但地图拒绝圆角。

亚历克斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T22:44:53.933

这对我有用；

[JS小提琴](http://jsfiddle.net/Yt2V8/)

```
#demoMap
{
    position: relative;        
    width: 200px;
    height: 200px;
    left: 20px;
    top: 20px;
    -moz-border-radius: 15px;
    border-radius: 15px;
    border: 1px solid black;
    overflow: hidden;
} 
```

我想你可能只需要添加

```
overlfow: hidden; 
```

到您的 CSS 样式，因为 openlayers API 只是使用您的 div 作为占位符，以便插入更多元素。

**更新**

[在阅读了关于 Chrome 的评论后，我试图让它与 Chrome 一起工作，但是在阅读了 Chrome 错误中的边框半径](https://stackoverflow.com/questions/8705249/css-border-radius-not-trimming-image-on-webkit)后似乎不可能？和[CSS 边框半径不会在 Webkit 上修剪图像](https://stackoverflow.com/questions/8705249/css-border-radius-not-trimming-image-on-webkit)并使用 chromes 开发工具来修改元素样式。

# java - 提交xhtml页面后Java文件未运行

> ID：13809928
> 
> 赞同：1
> 
> 时间：2012-12-10T21:55:11.590
> 
> 标签：java, xhtml

我有一个登录 xhtml 页面，用户在其中输入他们的密码/用户名

这里是 ：

```
<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      >
    <head>
        <title>Login</title>
    </head>
    <h:body>
       <form action="/LDAP/Login" method="post">
            <p>You need to log in to access protected information.</p>
            <table>
                <tr>
                    <td>User name:</td>
                    <td><input type="text" name="username" /></td>
                </tr>
                <tr>
                    <td>Password:</td>
                    <td><input type="password" name="password" /></td>
                </tr>
            </table>
            <p><input type="submit" value="Login" /></p>
        </form>
    </h:body>
</html> 
```

但是当我按下提交时，java文件没有运行我不知道为什么

这是java文件

登录.java

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package LDAP;

import java.io.IOException;
import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.naming.*;
import javax.naming.directory.*;
import java.util.Hashtable;

public class Login extends javax.servlet.http.HttpServlet implements javax.servlet.Servlet {

    public Login() {
        super();
    }

    protected void processRequest(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        final String SUCCESS = "loginSuccess.xhtml";
        final String FAILURE = "loginError.xhtml";
        String strUrl = "login.xhtml";
        String username = request.getParameter("username");
        String password = request.getParameter("password");

        Hashtable env = new Hashtable(11);

        boolean b = false;

        env.put(Context.INITIAL_CONTEXT_FACTORY,
                "com.sun.jndi.ldap.LdapCtxFactory");
        env.put(Context.PROVIDER_URL, "ldap://ldap-ser.port.ac.uk:389");
        env.put(Context.SECURITY_AUTHENTICATION, "simple");
        env.put(Context.SECURITY_PRINCIPAL, username + ",ou=student,ou=lan,o=PORT");
        env.put(Context.SECURITY_PRINCIPAL, password);

        try {
// Create initial context
            DirContext ctx = new InitialDirContext(env);
            System.out.println();

// Close the context when we're done
            b = true;
            ctx.close();
            System.out.println();

        } catch (NamingException e) {
            b = false;
            System.out.println();

        } finally {
            if (b) {
                System.out.print("Success");
                strUrl = SUCCESS;
            } else {
                System.out.print("Failure");
                strUrl = FAILURE;
            }
            System.out.println();
        }
        RequestDispatcher rd = request.getRequestDispatcher(strUrl);
        rd.forward(request, response);

    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        processRequest(request, response);
    }

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        processRequest(request, response);
    }
} 
```

这是我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet>
        <servlet-name>LoginServlet</servlet-name>
        <servlet-class>ExamplePackage.LoginServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>LoginServlet</servlet-name>
        <url-pattern>/LoginServlet</url-pattern>
    </servlet-mapping>
        <servlet>
            <servlet-name>Login</servlet-name>
            <servlet-class>LDAP.Login</servlet-class>
        </servlet>
        <servlet-mapping>
            <servlet-name>Login</servlet-name>
            <url-pattern>/Login</url-pattern>
        </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>faces/index.xhtml</welcome-file>
    </welcome-file-list>
</web-app> 
```

# android - 退出动画不起作用；FragmentTransaction 自定义动画不适用于隐藏

> ID：13809936
> 
> 赞同：13
> 
> 时间：2012-12-10T21:55:37.143
> 
> 标签：android, android-fragments, android-animation, fragmenttransaction

我使用 show/hide 来显示占据屏幕一部分的片段。由于某种原因，当显示片段时`slide_in_left`动画播放，但是当片段被隐藏时没有动画，片段就消失了。我已经尝试对和使用`slide_in_left`动画，但这没有帮助。当将代码跟踪到支持包中时，会创建动画并执行用于显示它的代码。（我追踪了电话）`exit``enter``.hide`

```
FragmentManager fm = _activity.getSupportFragmentManager();
Fragment fragment = fm.findFragmentById(R.id.my_fragment);
FragmentTransaction ft = fm.beginTransaction();
ft.setCustomAnimations(R.anim.slide_in_left, R.anim.slide_out_left);
if (fragment.isHidden()) {
    ft.show(fragment);
    fragment.setUserVisibleHint(true);
} else {
    ft.hide(fragment);
}
ft.commit(); 
```

以防万一这是`slide_out_left`动画的xml

```
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate android:fromXDelta="0" android:toXDelta="-50%p"
        android:duration="@android:integer/config_mediumAnimTime"/>
    <alpha android:fromAlpha="1.0" android:toAlpha="0.0"
        android:duration="@android:integer/config_mediumAnimTime" />
</set> 
```

**编辑：** 问题可能与`my_fragment`与另一个包含 webview 的片段共享屏幕宽度的事实有关。当 .show 为 my_fragment 执行时，它变得可见并在水平线性布局中共享空间（两个片段中的每一个占用多少屏幕宽度由 weight 参数确定）。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-09-26T06:24:51.293

尝试使用 setCustomAnimations(int enter, int exit, int popEnter, int popExit) 而不是 setCustomAnimations(int enter, int exit) 当你调用 popupbackstack 退出动画时不会被调用

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T10:55:32.493

就我个人而言，这是片段动画的 zPosition 的错误。

您看到的是“出现”的新片段，这是因为新片段附加在当前片段下方。

因此，当尝试对现有片段的“上方”片段进行动画处理时，似乎什么都没有发生，然后新片段就“出现”了。

我尝试了很多变通方法，使用 zPosition（只影响窗口而不影响布局，因此对片段没有影响），`onAnimationCreate()`将根布局放在前面，甚至在动画开始和停止时......似乎什么也没做。

因此，在没有为片段过渡编写完整的自定义动画的情况下，它们目前有点错误。

你可能不得不玩。`.add(Fragment)`等待它被添加，然后调用`.remove(Fragment)`删除旧片段，这样新片段就物理地放置在现有片段的顶部。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-04-23T07:11:09.823

尝试改用过渡。这是我项目中的示例：

```
private fun changeFragment(fragment: BaseFragment, addBackStack: Boolean) {
    // Set transitions
    fragment.enterTransition = Fade(Fade.IN).apply { duration = 800 }
    fragment.exitTransition = Slide(Gravity.TOP).apply { duration = 800 }
    // Your transaction below
    val fragmentTransaction = supportFragmentManager.beginTransaction()

    fragmentTransaction.replace(R.id.fragmentContainer, fragment)
    if (addBackStack) {
        fragmentTransaction.addToBackStack(fragment.javaClass.name)
    }
    fragmentTransaction.commit()
} 
```

您也可以进行自己的转换：[https ://medium.com/@belokon.roman/custom-transitions-in-android-f8949870bd63](https://medium.com/@belokon.roman/custom-transitions-in-android-f8949870bd63)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-04-19T11:52:33.863

```
 supportFragmentManager.beginTransaction()
     .setCustomAnimations(R.anim.enter_slide_up, R.anim.exit_slide_down,R.anim.enter_slide_up, R.anim.exit_slide_down)
     .add(R.id.nav_host_fragment, fragment)
        .addToBackStack(BACK_STACK)
        .commit() 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-05-15T20:38:39.767

我认为它出现了同样的情况：

我有 N 个片段，我想要一个自定义动画，但我不想重新加载片段，所以执行`add`and `remove`or a`replace`不是解决方案，并且使用`show`/`hide`我无法在两个片段之间同步动画。

为了修复它，我必须为每个片段使用 FrameLayout。

这里是代码。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <FrameLayout
        android:layout_above="@+id/main_bottom_navigation"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <FrameLayout
            android:id="@+id/library"
            android:layout_width="match_parent"
            android:layout_height="match_parent"/>

        <FrameLayout
            android:id="@+id/search"
            android:layout_width="match_parent"
            android:layout_height="match_parent"/>

        <FrameLayout
            android:id="@+id/discover"
            android:layout_width="match_parent"
            android:layout_height="match_parent"/>

    </FrameLayout>

    <com.roughike.bottombar.BottomBar
        android:id="@+id/main_bottom_navigation"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:layout_alignParentBottom="true"
        app:bb_tabXmlResource="@xml/main_bb_tabs"
        app:bb_inActiveTabColor="@color/taupegray"
        app:bb_activeTabColor="@color/green_apple"
        app:bb_showShadow="true"/>

</RelativeLayout> 
```

然后控制显示哪个片段：

```
private void showFragment(BaseFragment fragment) {
    Animation animation = AnimationUtils.loadAnimation(this,
                R.anim.slide_in_from_right);

    if (fragment instanceof DiscoverFragment) {
        mDiscoverContainer.bringToFront();
        mDiscoverContainer.startAnimation(animation);

        return;
    }

    if (fragment instanceof LibraryFragment) {
        mLibraryContainer.bringToFront();
        mLibraryContainer.startAnimation(animation);

        return;
    }

    if (fragment instanceof SearchFragment) {
        mSearchContainer.bringToFront();
        mSearchContainer.startAnimation(AnimationUtils.loadAnimation(animation);

        return;
    }
} 
```

关键在`bringToFront`

我希望它有所帮助！

# opengl - Opengl 纹理透明度 .BMP

> ID：13809940
> 
> 赞同：1
> 
> 时间：2012-12-10T21:55:58.330
> 
> 标签：opengl, transparency, textures

我正在绘制一个带有纹理的多边形，作为我的 OpenGL 程序中 HUD 的一部分。

```
//Change the projection so that it is suitable for drawing HUD
glMatrixMode(GL_PROJECTION);  //Change the projection
glLoadIdentity();
glOrtho(0, 800, 800, 0, -1, 1);  //2D Mode
glMatrixMode(GL_MODELVIEW);  //Back to modeling
glLoadIdentity();

//Draw the polygon with the texture on it
glBegin(GL_POLYGON);
glTexCoord2f(0.0, 1.0); glVertex3f(250.0, 680, 0.0);
glTexCoord2f(1.0, 1.0); glVertex3f(570.0, 680, 0.0);
glTexCoord2f(1.0, 0.0); glVertex3f(570.0, 800, 0.0);
glTexCoord2f(0.0, 0.0); glVertex3f(250.0, 800, 0.0);
glEnd();

//Change the projection back to how it was before
glMatrixMode(GL_PROJECTION);  //Change the projection
glLoadIdentity();
gluPerspective(45.0, ((GLfloat)800) / GLfloat(800), 1.0, 200.0);  //3D Mode
glMatrixMode(GL_MODELVIEW);  //Back to modeling
glLoadIdentity(); 
```

问题是我无法让图像周围的“框”与背景融为一体。我在 Photoshop 中打开了图像 (.bmp) 并删除了我想要显示的图像周围的像素，但它仍然绘制了整个矩形图像。它用我在 glColor3f() 中使用的最后一种颜色为我删除的像素着色，我可以让整个图像变得透明，但我只希望我在 Photoshop 中删除的像素是透明的。有什么建议么？

我用于纹理的属性：

```
glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST_MIPMAP_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
gluBuild2DMipmaps(GL_TEXTURE_2D, GL_RGB, TextureList[i]->getSizeX(), TextureList[i]->getSizeY(), GL_RGB, GL_UNSIGNED_BYTE, TextureList[i]->getData()); 
```

这是我的程序的图像。我试图让白框消失，但是当我使用 glColor4f() 减小 alpha 时，整个图像会消失，而不仅仅是白框。
img607.imageshack.us/img607/51/ogly.png

从文件加载纹理的代码：

```
texture::texture(string filename)
{
// Routine to read a bitmap file.
// Works only for uncompressed bmp files of 24-bit color.
// Both width and height must be powers of 2.
unsigned int size, offset, headerSize;

// Read input file name.
ifstream infile(filename.c_str(), ios::binary);

// Get the starting point of the image data.
infile.seekg(10);
infile.read((char *) &offset, 4);

// Get the header size of the bitmap.
infile.read((char *) &headerSize,4);

// Get width and height values in the bitmap header.
infile.seekg(18);
infile.read( (char *) &sizeX, 4);
infile.read( (char *) &sizeY, 4);

// Allocate buffer for the image.
size = sizeX * sizeY * 24;
data = new unsigned char[size];

// Read bitmap data.
infile.seekg(offset);
infile.read((char *) data , size);

// Reverse color from bgr to rgb.
int temp;
for (unsigned int i = 0; i < size; i += 3)
{ 
temp = data[i];
data[i] = data[i+2];
data[i+2] = temp;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:15:52.570

我在您的代码中没有看到 glEnable(GL_BLEND) 或[glBlendFunc 。](http://www.opengl.org/sdk/docs/man/xhtml/glBlendFunc.xml)你在做这个吗？

另外，您的图像中是否有 Alpha 通道？

编辑：您正在加载格式为 GL_RGB 的纹理，您是在告诉 OpenGL 此纹理上没有 alpha。

1.  您需要制作具有 alpha 透明度的图像。在此处查找[GIMP](http://mcapewell.wordpress.com/2006/09/07/how-to-make-a-transparent-png-image-for-ie-6-in-the-gimp/)教程或在此处查找[Photoshop](http://www.axialis.com/tutorials/tutorial-misc001.html)教程。
2.  现在加载指示正确图像格式的纹理。互联网上有很多关于“opengl alpha blending”的教程——[这里](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=11&cad=rja&ved=0CCwQtwIwADgK&url=http://www.youtube.com/watch?v=chbjxTmbQes&ei=7IHHUIXgG9G42gWLsYHADQ&usg=AFQjCNHy9D07cOpiu_WTZlpgtHUmXnFLqQ&bvm=bv.1354675689,d.b2I)有一个 C++ 和 SDL 视频教程。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T22:16:59.543

如果我理解正确，您希望透明度与您的纹理一起使用，是吗？如果是这样，改变

```
gluBuild2DMipmaps(GL_TEXTURE_2D, GL_RGB, TextureList[i]->getSizeX(), TextureList[i]->getSizeY(), GL_RGB, GL_UNSIGNED_BYTE, TextureList[i]->getData()); 
```

到

```
gluBuild2DMipmaps(GL_TEXTURE_2D, GL_RGBA, TextureList[i]->getSizeX(), TextureList[i]->getSizeY(), GL_RGBA, GL_UNSIGNED_BYTE, TextureList[i]->getData()); 
```

要允许 Alpha 通道，并打开混合：

```
glEnable (GL_BLEND);
glBlendFunc (GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

**更新**
据我所知，~~BMP 不支持透明度~~（他们可以，ananthonline 在评论中纠正了我，但您的应用程序必须支持这一点）如果您的图像编辑器不支持带 alpha 的 BMP，您应该尝试以下格式之一：

*   PNG
*   TIFF（最近的变化）
*   塔尔加

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T22:15:19.030

要使用透明通道（alpha 通道），您需要使用该通道生成 BMP 文件（如果您要求，Photoshop 会这样做），并在生成 mipmap 并将图像发送到视频卡时指定正确的格式。

这样，图像将具有所需的透明度信息，并且 OpenGL 驱动程序将知道图像具有此信息。

# javascript - javascript 画布中的多边形

> ID：13809942
> 
> 赞同：0
> 
> 时间：2012-12-10T21:56:02.130
> 
> 标签：javascript, geometry, kineticjs

我[在这里将多边形计算](https://stackoverflow.com/questions/240778/random-points-inside-a-polygon)调整为 javascript 时遇到问题。

我正在使用动力学并且有三个基本问题：

1.  如何计算多边形中的随机点，其中我有一组给定点，例如`[73, 192, 73, 160, 340, 23, 500, 109, 499, 139, 342, 93]`？

2.  我正在随机计算多边形（因为它们应该反映对象集群）。我怎么知道我的画布中的哪里是放置多边形的可用空间？

3.  我怎样才能为此添加一些扩散？意思是，轻微的重叠和不时更大的重叠是受欢迎的，并且在 1\. 中计算的点也可能不时重叠在多边形之外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:46:05.510

要回答＃1，这是在路径中找到随机点的一种不太好的方法：http: [//jsfiddle.net/Aj7Rw/](http://jsfiddle.net/Aj7Rw/)

```
var points = [[73, 192], 
              [73, 160], 
              [340, 23], 
              [500, 109], 
              [499, 139], 
              [342, 93]],
    minX,maxX,minY,maxY;

// find min and max values
for (var i = 0; i < points.length; i++){
    var point = points[i];

    if (minX == undefined || point[0] < minX)
        minX = point[0];

    if (maxX == undefined || point[0] > maxX)
        maxX = point[0];

    if (minY == undefined || point[1] < minY)
        minY = point[1];

    if (maxY == undefined || point[1] > maxY)
        maxY = point[1];        
}

// draw the path so we can use isPointInPath
var can = document.getElementById("test"),
    ctx = can.getContext('2d');

ctx.beginPath();
ctx.moveTo(points[0][0],points[0][1]);

for (var i = 1; i < points.length; i++)
    ctx.lineTo(points[i][0],points[i][1]);

ctx.closePath();
ctx.stroke();

// generate some random points. 
for (var i = 0; i < 250; i++){
    var found = false, iterations = 0;
    while(!found){
        iterations++;

        var x = Math.floor(Math.random()*(maxX-minX)+minX);
        var y = Math.floor(Math.random()*(maxY-minY)+minY);

        if (ctx.isPointInPath(x,y)){
            found = true;
            ctx.fillRect(x-3,y-3,6,6);
            console.log(x,y, iterations); // I'm logging the number of iterations it took to generate a point within the poly so you can get an idea of the lack of efficiency.
        }
    }
} 
```

# javascript - 画布鼠标事件和焦点

> ID：13809945
> 
> 赞同：1
> 
> 时间：2012-12-10T21:56:06.903
> 
> 标签：javascript, html, animation, canvas, mouseevent

我有 2 个圆圈和 1 条线。圆圈有一个移动选项（你可以按下它们并移动）。Mousemove 事件有一个变量`distance`来计算鼠标和圆之间的距离。

问题是，当你将一个圆圈移到另一个圆圈足够近时，它们会加入。如何避免这种情况？有没有选择让一些焦点或类似的东西？任何想法如何解决这个问题（有可能吗？）

[我的代码](http://jsfiddle.net/cs5Sg/7/)：

```
var canvas = document.getElementById('myCanvas'),
    context = canvas.getContext('2d'),
    radius = 12,
    p = null,
    start = false;

    point = {
        p1: { x:100, y:250 },
        p2: { x:400, y:100 }
    }

function init() {
        return setInterval(draw, 10);
}

canvas.addEventListener('mousedown', function(e) {
    start = true;
});

canvas.addEventListener('mouseup', function(e) {
    start = false;
});

canvas.addEventListener('mousemove', function(e) {

    for (p in point) {
        if(start) {
            var 
                mouseX = e.clientX -10,
                mouseY = e.clientY -10,
                distance = Math.sqrt(Math.pow(mouseX - point[p].x, 2) + Math.pow(mouseY - point[p].y, 2));

            if (distance -10<= radius) {
                point[p].x = e.clientX -10 ;
                point[p].y = e.clientY -10 ;
            } 

        }
    }
});

function draw() {
    context.clearRect(0, 0, canvas.width, canvas.height);

    context.beginPath();
    context.moveTo(point.p1.x,point.p1.y);
    context.lineTo(point.p2.x,point.p2.y);

    context.closePath();

    context.fillStyle = '#8ED6FF';
    context.fill();
    context.stroke();

    for (p in point) {
        context.beginPath();
        context.arc(point[p].x,point[p].y,radius,0,2*Math.PI);
        context.fillStyle = 'red';
        context.fill();
        context.stroke();
    }
    context.closePath();
}

init(); 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:02:11.137

尝试保存`mousedown`事件中按下的点。

像这样：http: [//jsfiddle.net/cs5Sg/9/](http://jsfiddle.net/cs5Sg/9/)

此外，它不会在每次鼠标移动时计算到每个点的距离，因此它会更快。

# c++ - Simulink Coder - 如何将外部代码与模型接口

> ID：13809947
> 
> 赞同：1
> 
> 时间：2012-12-10T21:56:13.023
> 
> 标签：c++, model, simulink

我正在 simulink 中开发一个系统控件，我想在嵌入式板上运行这个模型。因此，我想将模型的输入和输出与特定功能（手工编写和模型外部）联系起来。

为了理解：我有一个包含 8 个元素的数组的输入。该数组的指针由名为 adc.readAllValues() 的函数返回。

如何将 simulink 与我的外部代码接口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:47:36.490

这是一种方法：

*   Simulink 的输入是 Simulink.Parameter 对象

*   Simulink 的输出是 Simulink.Signal 对象

这些 Simulink 对象都具有“ExportedGlobal”存储类。这意味着它们是可以从您的外部代码访问的全局符号。例如，在 VxWorks 中，您可以使用“symFindByName”来查找符号的地址。

一个可以提供帮助的有趣 Simulink 功能是 C API [http://www.mathworks.ch/ch/help/rtw/ug/data-exchange.html?searchHighlight=capi#f75428](http://www.mathworks.ch/ch/help/rtw/ug/data-exchange.html?searchHighlight=capi#f75428)

# ruby-on-rails - MongoDB 中使用 Moingoid 的常量

> ID：13809948
> 
> 赞同：0
> 
> 时间：2012-12-10T21:56:16.873
> 
> 标签：ruby-on-rails, mongodb, constants, mongoid3, database

通过 Mongoid 在 Mongodb 中存储项目范围的常量有什么好的常见做法吗？是否值得将它们保存在数据库中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:03:06.643

常量就是常量。Pi 是一个常数。你不需要它的数据库，你知道它的价值。但可能您的意思更像是“一个非常静态且不太可能经常更改的值”。如果是这种情况，那么将这些值存储在数据库中确实是有意义的。这种东西可能有宝石，但在香草 Mongoid 我会做这样的事情：

```
class Setting
  field :_id, type: String
  field :value

  def self.read_value name
    # return value or nil
    Setting.where(_id: name).first.try(:value)
  end

  def self.write_value name, value
    where(_id: name).upsert(value: value)
  end
end

# usage
num_workers = Setting.read_value 'number_of_workers'
Setting.write_value "upload_dir", '/var/www/uploads' 
```

# java - 我是否必须在我的主类中编写每个方法才能使用它（策略模式）？

> ID：13809955
> 
> 赞同：0
> 
> 时间：2012-12-10T21:56:37.187
> 
> 标签：java, design-patterns, strategy-pattern

我一直在使用[本](http://www.newthinktank.com/2012/08/strategy-design-pattern-tutorial/)教程来研究策略模式。我收到了他谈到的输出，但似乎没有使用 digHole() 方法的选项。当我在 Dog() 构造函数中调用该方法时，它可以工作。

我的猜测是发生这种情况是因为我需要实现一种方法来保存在 Animal 类中挖掘的能力（如飞行能力），我在这方面是否正确？这是否也意味着对于我想让动物采取的每一个动作，我都应该在 Animal 类中编写它，创建一个具有该能力的接口，然后创建两个实现该能力的类，这意味着该能力要么已实现，要么没有吨？

在制定策略模式背后的主要思想时，我也遇到了一些麻烦。目前，我将其视为“封装所有动作并将它们组合在一个主类中”。这有多准确/拟合？

```
public class Animal {

    public Flies flyingType;

    public String tryToFly() {
        return flyingType.fly();
    }

    public void setFlyingAbility(Flies newFlyType) {
        flyingType = newFlyType;
    }
}

public class Dog extends Animal {

    public Dog() {
        super();
        setSound("Bark");
        flyingType = new CantFly();
    }

    public void digHole() {
        System.out.println("Dug a hole");
    }
}

public interface Flies {

    String fly();

}

class ItFlies implements Flies {

    public String fly() {
        return "Flying high";
    }

}
class CantFly implements Flies {

    public String fly() {
        return "I can't fly";
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:44:54.453

> 我在制定策略模式背后的主要思想时也遇到了一些麻烦

或许了解[Strategy 模式](http://en.wikipedia.org/wiki/Strategy_pattern)的最佳方法是将其与[Template 方法](http://en.wikipedia.org/wiki/Template_method_pattern)进行比较。单击维基百科文章的链接。

两者都涉及基类中的某些设计决策，但是当最终确定为各种子类指定不同的行为时，模板模式依赖于继承——覆盖基类/超类中定义的抽象方法。

策略模式依赖于组合——行为（飞行、挖掘）本身就是一个对象，可以独立创建然后注入到感兴趣的对象中。

在像 Java 这样的语言中，一旦覆盖基类中的方法，然后创建对象的实例，该行为就永远不会改变。如果这就是你希望你的对象工作的方式 - 很好地使用继承。但是，如果您直到运行时才知道需要哪种行为，那么使用策略模式进行设计是值得的。

> 意味着该能力已实施或未实施？

尽管您参考的教程相当聪明，但它并不是使用策略模式的好模型。添加飞行到狗的能力是如此违反直觉，以至于分散了课程的注意力。使用策略模式，感兴趣的算法的可能实现的数量没有限制。

如果您真的想坚持使用 Animal 模型，您可以尝试更通用的概念，例如`findFood`, `escapeFromPredator`, `findMate`, `raiseYoung`- 这些概念对所有动物都有意义，但不会对每个动物实例都完全相同。随着时间的推移，两只不同的狗可能会`raiseYoung`完全不同，或者这样做会有所不同，因此随着动物模拟的继续，可能需要更换策略。

> 我是否必须在我的主类中编写每个方法

你可以，但如果它变得太乏味你不必这样做 - 为了简化你的类的使用，你可以让每个对象在它自己的构造函数中实例化一个适当的策略。然后您可以选择 - 创建对象并使用默认行为或根据应用程序将默认行为替换为另一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:03:07.320

只需在Animal中创建抽象方法，Animal类也变得抽象，但我们不在乎，因为一般来说什么是动物，那是没有意义的。并且在每个继承 Animal 的类中定义该方法的实现。

这不是模式策略，但我认为这是做你想做的事的好方法之一（就像我理解的那样）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T22:12:45.190

据我了解，模式策略的想法是子类以不同的方式定义相同*的*行为。

所以如果你有一百种动物，有些只能飞，有些只能挖，有些可以两者兼得，那么你就有了这两者，`fly`并且`digHole`作为超类的方法。

`digHole`但是，这并不是将所有行为都组合到超类中-如果只有狗可以挖掘，而且对于一般动物来说甚至没有意义，那么`Animal`当你想要一个dog to dig，你可能应该知道它是否是 a `Dog`，或者如果你想从 to 移动`Animal`（`Dog`例如从列表中取出所有的狗`Animal`）以便你可以使用该`digHole`方法，你可以使用[显式演员表](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)

# c++ - 如何使用opencv从图像中找到标尺位置？

> ID：13809959
> 
> 赞同：4
> 
> 时间：2012-12-10T21:56:52.617
> 
> 标签：c++, opencv, pixel

我必须使用 opencv 从图像中找到标尺位置。我能够检测标尺的颜色（绿色）。如何从图像中读取所有像素并获取标尺的上下位置。

```
void findrulerPosition(cv::Mat image, int indx) {
std::stringstream ss;//create a stringstream
ss << indx;//add number to the stream

cv::Mat hsv;
cvtColor(image, hsv, CV_BGR2HSV);

String filename = OUTPUT_FOLDER + "hsv" + ss.str() + ".png";
imwrite(filename, hsv );

cv::Mat hsvbw;
inRange(hsv, cv::Scalar(30,0,0), cv::Scalar(80, 255, 255), hsvbw);
//inRange(hsv, cv::Scalar(12,255,255), cv::Scalar(23, 245, 255), hsvbw);
   //inRange(image, cv::Scalar(0,64,255), cv::Scalar(0, 207, 255), hsvbw);

filename = OUTPUT_FOLDER + "hsvbw" + ss.str() + ".png";
imwrite(filename, hsvbw );

vector<vector<Point> > contours;
findContours(hsvbw.clone(), contours, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE);
cv::Mat dst = Mat::zeros(image.size(), image.type());
drawContours(dst, contours, -1, Scalar::all(255), CV_FILLED);

this->cmpddst &=  dst;
dst &= image;
this->cmpddst &=  image;

filename = OUTPUT_FOLDER + "cmpddst" + ss.str() + ".png";
imwrite(filename, this->cmpddst );

filename = OUTPUT_FOLDER + "dst" + ss.str() + ".png";
imwrite(filename, dst ); 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T18:53:38.933

这是我所做的：

1.  稍微改善了您的绿色范围，因为您的绿色范围没有检测到绿色 - 它正在检测许多其他颜色。
2.  在图像上查找轮廓。
3.  找到面积大于 100 的轮廓。
4.  找出轮廓的上点和下点。
5.  画出这2点。

```
Mat src = imread("input.png"), tmp;
cvtColor(src, tmp, CV_BGR2HSV_FULL);
inRange(tmp, Scalar(50, 50, 50), Scalar(70, 255, 255), tmp);

vector<vector<Point> > contours;
findContours(tmp, contours, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE);

int upY = INT_MAX, lowY = 0, upX, lowX;
for (int i=0; i<contours.size(); i++)
{
    if (contourArea(contours[i]) > 100)
    {
        for (int j=0; j<contours[i].size(); j++)
        {
            if (contours[i][j].y > lowY)
            {
                lowY = contours[i][j].y;
                lowX = contours[i][j].x;
            }
            if (contours[i][j].y < upY)
            {
                upY = contours[i][j].y;
                upX = contours[i][j].x;
            }
        }

        cout << "low = (" << lowX << ", " << lowY << ")"<<  endl
             << "up  = (" << upX << ", " << upY << ")"<<  endl;
        break;
    }
}

circle(src, Point(lowX, lowY), 3, Scalar(255, 0, 255));
circle(src, Point(upX, upY), 3, Scalar(255, 0, 255));

imshow("Window", src);
waitKey(); 
```

结果如下：

![在此处输入图像描述](../Images/cab88e31d2efbe349e9d30813d85de16.png)

# jquery - 如何从图像映射href（以及选项卡列表）激活jquery选项卡？

> ID：13809960
> 
> 赞同：1
> 
> 时间：2012-12-10T21:56:57.590
> 
> 标签：jquery, imagemap, jquery-tabs

我已经尝试了所有我能想到的选项，并试图在其他帖子中找到答案。单击选项卡上方的图像映射时，我试图在页面上打开 jQuery 选项卡。

```
$(function() {
    $( "#tabs" ).tabs();
});

<div id="tabs">
<map name="Map" id="Map">
<area shape="rect" onclick="$('#tabs-1').click();" coords="11,121,159,222" href="#tabs-1" target="_self" alt="tabs-1" />
<area shape="rect" onclick="$('#tabs-2').click();" coords="164,85,300,153" href="#tabs-2" target="_self" alt="tabs-2" /> </map>

  <ul>
    <li><a href="#tabs-1">Tab1</a></li>
    <li><a href="#tabs-2">Tab2</a></li>
</ul>

<div id="tabs-1">
lorem ipsum
</div>
<div id="tabs-2">
lorem est
</div>
</div> 
```

选项卡显示在 URL 中，但需要重新加载页面才能使选项卡处于活动状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:02:56.927

你的逻辑有点不对劲。您告诉`area`触发点击带有 id 的元素，`tabs-1`而不是点击应该激活的标签 LINK`tabs-1`

你应该改变如下：

*   为您的标签链接提供一个 ID（最简单的方法，但如果您愿意，也可以使用其他方法）
*   调用`click`选项卡链接

所以我的 HTML 看起来像这样：

```
<div id="tabs">
<map name="Map" id="Map">
<area shape="rect" onclick="$('#tabs-1-link').click();" coords="11,121,159,222" href="#tabs-1" target="_self" alt="tabs-1" />
<area shape="rect" onclick="$('#tabs-2-link').click();" coords="164,85,300,153" href="#tabs-2" target="_self" alt="tabs-2" /> </map>

  <ul>
    <li><a href="#tabs-1" id="tabs-1-link">Tab1</a></li>
    <li><a href="#tabs-2" id="tabs-1-link">Tab2</a></li>
</ul>

<div id="tabs-1">
lorem ipsum
</div>
<div id="tabs-2">
lorem est
</div>
</div> 
```

# jquery - 根据屏幕大小更改 jQuery

> ID：13809961
> 
> 赞同：1
> 
> 时间：2012-12-10T21:57:06.097
> 
> 标签：jquery, screen, responsive-design, truncate

我目前正在使用一个小插件（jTruncate），当它超过一定的字母阈值时会截断文本 - 我想知道，我可以将该字母阈值与屏幕尺寸联系起来吗？

例如

如果屏幕尺寸低于 <320 像素 - 显示 45 个字母
如果屏幕尺寸低于 <500 像素 - 显示 60 个字母

```
$().ready(function() {  
    $('#recent').jTruncate
    ({  
        length: 45,
        moreText: [""],
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:09:11.393

作为 Javascript 的替代方案，您可以使用 CSS 媒体查询并将最后 15 个字符包装在一个跨度中，该跨度隐藏在较小的分辨率中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T15:12:06.937

[http://jsfiddle.net/EwNxR/8/](http://jsfiddle.net/EwNxR/8/)这是一个带有 js 的演示。但是，我确实建议使用 Jimbo 在他的回答中指出的媒体查询。

代码中需要注意的重要事项：
1) 您可能希望听取页面调整大小和对其执行的操作。在页面加载时运行代码一次，然后在用户调整浏览器窗口大小时运行代码是没有意义的。
2) 如果 IE6 不是问题，则不必使用 jQuery $(window).height()。使用 window.innerHeight。

```
window.onresize = resizer;
function resizer() {
    if (window.innerWidth < 960) {
        $('#recent').jTruncate({
            length: 45,
            moreText: [""],
        });
    }
} 
```

我不是 100% 熟悉该插件，但是如果选项的结构类似于 jQuery 插件，那么您应该能够在页面加载时对其进行初始化，然后只需更改长度值。

```
var recent = $('#recent'),
    defaultLength = 256; // default, can be whatever.
window.onresize = resizer;
recent.jTruncate({ length: defaultLength, moreText: [""] });
function resizer() {
    if (window.innerWidth < 960) {
        recent.jTruncate("length", 45); // don't re-init the plugin, just change the option.
    } else {
        recent.jTruncate("length", defaultLength); // page resized and truncating is no longer needed to be shorter.
    }
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-10T21:58:12.527

只需使用`window`.

```
var win_width = $(window).width();
var win_height = $(window).height(); 
```

# facebook - Facebook：是否可以跟踪动态生成的点赞按钮的点赞？

> ID：13809967
> 
> 赞同：0
> 
> 时间：2012-12-10T21:57:31.400
> 
> 标签：facebook, facebook-graph-api, facebook-like

我正在为应用程序动态生成 Like 按钮。

我使用 FB.XFBML.parse(document.getElementById("fbook"))

并且确实可以为动态页面创建喜欢。然后将所有这些喜欢发送到我的 Facebook 应用程序。是否可以跟踪用户喜欢哪些页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:00:20.643

你可以使用这个：

```
FB.Event.subscribe('edge.create',
    function(response) {
      alert('You liked the URL: ' + response);
    }
); 
```

此方法将处理程序附加到事件并调用您的回调。在示例中是匿名函数。通过这种方式，您可以跟踪页面中的任何类似按钮。

# java - 在 Android 中编写文件

> ID：13809968
> 
> 赞同：0
> 
> 时间：2012-12-10T21:57:31.743
> 
> 标签：java, android, string, file

首先，如果存在类似的帖子，我很抱歉，但我无法理解。

我正在尝试在android中编写一个文件，我得到了以下代码：

```
String FILENAME = "hello_file.txt";
String string = "hello world!";

FileOutputStream fos;
try {
    fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
    fos.write(string.getBytes());
    fos.close();
} catch (FileNotFoundException e) {
    e.printStackTrace();
    Log.d("Angles", "FileNotFoundException");
}catch(IOException e){
    e.printStackTrace();
    Log.d("Angles", "IOException");
} 
```

我没有得到任何异常，所以我想它可以工作，但我无法在设备内找到 hello_file.txt 文件。

我在 Galaxy Nexus 上运行；没有标准差。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:17:43.370

如果要在 sdcard 中创建文件，则需要使用

```
File f =  new File (Environment.getExternalStorageDirectory(),"myfile.txt") 
```

# javascript - 我如何为提交时添加的是或否单选表单设置计数器？

> ID：13809972
> 
> 赞同：1
> 
> 时间：2012-12-10T21:57:48.930
> 
> 标签：javascript, html, counter, radio

我是 javascript 新手，很难掌握这个概念。我想添加一个是或否表单，提交时提交并累加。

这是html表单：

```
 <form id="selection" name="selection" method="post">
    <input type="radio" name="choice" value="yes">Yes<br>
    <input type="radio" name="choice" value="no">No<br />
     <input type="reset" name="submit" value="Submit" />
  </form>
    <div id="results">
    Voters who said yes are: <label id="yes">0</label><br />
    Voters who said no are: <label id="no">0</label><br />
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:05:24.890

If you want to keep track of the total yes/no votes submitted across many different computers, then you will need to keep those totals on the server that you are posting the votes to.

When a vote is posted, you can increment the vote count on the server (probably stored in a database on the server).

If you want the total votes so far displayed in your web page, then you would have to either put that data in the web page on your server when the web page is generated or you would have to fetch the count with an ajax call to your server and then insert the totals into the web page when the ajax call returns the data.

# android - 如何使用cordova android检测抖动事件？

> ID：13809974
> 
> 赞同：6
> 
> 时间：2012-12-10T21:58:04.570
> 
> 标签：android, cordova

我正在尝试使用适用于 Android 设备的 Cordova 2.2.0 检测抖动事件。我发现了一些与此主题相关的问题，但在本机代码中，例如 this [question](https://stackoverflow.com/questions/11398125/phonegap-cordova-shake-event-detect)和 this [question](https://stackoverflow.com/questions/5271448/how-to-detect-shake-event-with-android)。

有谁知道如何使用 phonegap Cordova 检测此事件？或者我应该写一个插件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T20:04:57.763

你可以试试[shake.js](https://github.com/alexgibson/shake.js/)。我一直在研究它，但没有实现它。看起来很有希望。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T20:34:24.073

使用加速度计存储以前的值（x、y 和 z）。定义阈值 (x,y,z) 如果 previosValues 和实际一次 (event.value[i] where i=x,y ans z) 之间的差异高于阈值，您可以检测到抖动。

您还可以使用加速度值的大小 (Acc=sqrt(x*x+y*y+z*z)) 或时间戳来获得更好的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-17T12:38:21.797

Cordova 提供了 device-motion 插件，它（令人惊讶地）暴露了一个[`navigator.accelerometer`](http://docs.phonegap.com/en/edge/cordova_accelerometer_accelerometer.md.html)对象，[而不是](https://issues.apache.org/jira/browse/CB-6069)与自 2011 年以来发布的 W3C [deviceorientation/devicemotion标准保持一致。](http://www.w3.org/TR/orientation-event/)

当设备平放在表面上时，(x, y, z) 加速度将为 (0, 0, 9.81)。检测抖动的基本思想是观察给定频率的加速度，计算前一个样本的增量，并确定它是否大于阈值。

```
navigator.accelerometer.watchAcceleration(onSuccess, onError, { frequency: 300 });

// Assess the current acceleration parameters to determine a shake
function onSuccess(acceleration) {
  var accelerationChange = {};
  if (previousAcceleration.x !== null) {
    accelerationChange.x = Math.abs(previousAcceleration.x - acceleration.x);
    accelerationChange.y = Math.abs(previousAcceleration.y - acceleration.y);
    accelerationChange.z = Math.abs(previousAcceleration.z - acceleration.z);
  }

  previousAcceleration = {
    x: acceleration.x,
    y: acceleration.y,
    z: acceleration.z
  };

  if (accelerationChange.x + accelerationChange.y + accelerationChange.z > sensitivity) {
    // Shake detected, invoke callback
  }

}
```

这样做的插件是 Lee Crossley 的[cordova-plugin-shake-detection](https://github.com/leecrossley/cordova-plugin-shake-detection)。

# vb.net - VB 连接到 COM 对象

> ID：13809977
> 
> 赞同：0
> 
> 时间：2012-12-10T21:58:15.637
> 
> 标签：vb.net, com

要么我不理解 COM 对象，要么这一切都令人困惑。我经常“创建”、“调度”COM 对象——无论是在 Python 中，还是在 VB 中（`Obj = win32com.client.Dispatch('Visum.Visum')`或`Obj = CreateObject("Excel.Application")`分别）。这很容易，很明显，一切都很好。但是我怎么能：a）连接到已经运行的 COM 对象 b）获取作为 COM 对象的正在运行的进程列表

*   在 VB 中，参考是什么，以及有关以下内容的附加信息：`CreateObject`命令。在 Python 中，它是定义明确的综合库的一部分，`win32com`而在 VB 中，它只是没有参考的单一方法：http: [//msdn.microsoft.com/en-us/library/7t9k08y5 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/7t9k08y5(v=vs.80).aspx)

高度混乱（COM 对象、服务器？连接、调度、注册？？）

感谢您澄清 Rafal i2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:51:42.897

首先，我建议阅读一个很好的 COM 介绍。就个人而言，我认为 Don Box 的“Essential COM”是关于 COM 的最佳书籍。花几个小时使用它会为您节省很多小时。

话虽如此，让我们转向您的问题。

a) 为了从 VB 中检索现有的 COM 对象，您需要调用[`GetObject`](http://msdn.microsoft.com/en-us/library/e9waz863%28v=vs.90%29.aspx)函数。这仅适用于使用[Running Object Table](http://msdn.microsoft.com/en-us/library/windows/desktop/ms695276%28v=vs.85%29.aspx)注册的 COM 对象。Excel会这样做，所以应该没有任何问题。

b) 正如 Hans Passant 正确指出的那样，这个问题没有意义。进程和 COM 对象是完全不相关的东西，除了进程承载 COM 对象这一事实。这类似于询问“哪些进程是 X 类的实例”。但是，一个进程可以承载一个 COM 对象（或其中许多）。这些对象只能暂时活着，所以你会期待什么？此外，许多 COM 类是在 dll 中实现的，但创建的实例显然是托管在一个进程中的——那么你会期待什么呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:37:13.100

COM 技术是我有一段时间没有使用的东西，如果某些信息可能有误，非常抱歉（无论如何，我有我的书“内部 COM+ 基础服务”！）

简而言之，让我们给出一个 COM 对象的简化定义：它只不过是一个标准 DLL，其类通过以下方法公开一个标准接口 IUnkown：

*   AddRef：注册一个使用 COM 对象的客户端
*   释放：取消注册客户端（通常未使用的对象停止运行，但其他可能保持常驻）
*   QueryInterface：获取函数的地址

QueryInterface 用于动态检索函数的地址（后期绑定），它功能强大（您不必在编译时知道 DLL）但耗时。另一方面，您可以在编译时直接引用函数的地址，因为这些DLL是在系统中注册的（所有信息都存储在注册表中）

创建新对象或获取正在运行的对象的地址是通过 RPC（远程过程调用）完成的，它将加载和/或扮演代理的角色

因此，要创建 COM 对象的新实例，您将在 VC++（甚至 c#？）中调用 CreateObject（在 VB 中）(Co)CreateInstance，而要获取正在执行的实例，您可能需要调用 GetObject()。

获取 COM 对象列表并不容易（我想根本不可能），因为如前所述，COM 对象只不过是一个 DLL：这意味着该库将主要加载到每个进程的地址空间中访问是私人的。即使对于在许多进程之间共享对象的进程外 COM 对象（与进程内相反）（即：Excel 是进程外 COM 对象：您不会在应用程序的地址空间中加载 DLL），它们由主机（rpc.exe 或专有主机）加载

希望这有助于塞尔

# python - Django 表单不会显示

> ID：13809979
> 
> 赞同：1
> 
> 时间：2012-12-10T21:58:17.160
> 
> 标签：python, html, django, forms, post

我正在做一个项目，我们需要添加一个表单来添加一个事件。它列出了姓名、日期、时间和地址。我让表单工作，但是当我添加基础时，表单没有显示在加载了基础的网页上。我认为这与我的 html 文件有关。这是我的html文件。

```
{% extends "base.html" %}
{% block heading %}My Events{% endblock %}
{% block content3 %}
    </h1><b><font size="5">Save Event</b></h1></font>
    <form method="POST" action=".">{% csrf_token %}
        {{form.as_p}}
        <input type ="submit" value="Add Event"/>
    </form>

{% endblock %} 
```

意见：

```
def add_event(request):
    user = request.user
    events = user.event_set.all()
    if request.method == "POST":
        form = EventForm(request.POST)
        if form.is_valid():
            event = Event.objects.create(
            eventname = form.cleaned_data['eventname'],
            eventdate = form.cleaned_data['eventdate'],
            eventtime = form.cleaned_data['eventtime'],
            address = form.cleaned_data['address'],
            user = request.user
            )
            return HttpResponseRedirect('/')
    else:
        form = EventForm()
    variables = RequestContext(request, {
        'form': form
    })
    return render_to_response('add_event.html',variables) 
```

根据：

```
HTML (base.html)
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
<head>
  <title>DelMarVa Happenings | {% block title %}{% endblock %}</title>
  <link rel="stylesheet" href="/site_media/style.css" type="text/css" />
</head>
<body>
    <div id="wrapper">
        <div id="masthead">
            <div id="logo">
                <img src="/site_media/Delmarva.gif" width="100px" height="80px" />
            </div>
            <h1>DelMarVa Happenings</h1>
            <br />
            <h4>A listing of events in and around Delaware, Maryland, and Virginia</h4>
        </div>
        <div id="nav">
            {% if user.is_authenticated %}
                <h3>welcome, {{ user.username }}</h3>
            {% else %}
                <h3>welcome, guest</h3>
            {% endif %}
                <ul>
                    <li><a href="/">home<a/></li>
                {% if user.is_authenticated %}
                    <li><a href="/event/">add event</a></li>
                    <li><a href="/user/">my events</a></li>
                    <li><a href="/account/">my account</a></li>
                    <li><a href="/logout/">logout</a></li>
                {% else %}
                    <li><a href="/login/">login</a></li>
                    <li><a href="/register/">register</a></li>
                {% endif %}
                </ul>
        </div>
        <div id="ads">
            <img src="/site_media/ad.jpg" />
        </div>
        <div id="main">
            <h2>{% block head %}{% endblock %}</h2>
            {% block content %}{% endblock %}
        </div>
    </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T02:49:15.923

您`base.html`没有`{% block content3 %}`- 重命名 base 中的块名称或扩展模板以相互匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:01:36.607

确保在 form.as_p 和大括号之间留有空间。像这样，`{{ form.as_p }}`

# c# - 印刷力学

> ID：13809980
> 
> 赞同：0
> 
> 时间：2012-12-10T21:58:20.607
> 
> 标签：c#, printing, spooler

我在打印前使用 winspool.drv 更改默认打印设置。打印时更改的默认打印设置是否嵌入到打印作业中？还是他们被保存在其他地方？如果我更改设置，当打印作业发送到打印机时会发生什么？打印作业附带哪些信息？我什至在问正确的问题吗？我正在批量打印大量文件并更改每个作业的页面之间的设置。
编辑：我的理解是这样的：

1.  我更改了默认打印机设置
2.  打印文档，默认打印机设置嵌入假脱机文件并发送到打印机
3.  打印机使用假脱机文件打印

我的理解正确吗？是否需要等到打印作业结束后再更改打印机设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:25:34.947

*   更改简单任务的默认设置通常是不可行的，**永远不应该这样做**。如果您的程序崩溃或出现问题，用户的设置就会丢失，考虑到高质量的打印设置、照片纸等，这甚至可能会变得相当昂贵。
*   您应该使用提供的 API（如果可能）更改每个作业的设置，以仅影响当前/要打印的文档。
*   一旦打印作业完成/假脱机（即它只等待打印机启动或联机），更新的设置不再影响文档。

# c# - 与 Steve Sandersons BeginCollectionItem 的模型绑定

> ID：13809981
> 
> 赞同：18
> 
> 时间：2012-12-10T21:58:27.323
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, model-binding

我正在使用 Steve Sandersons`BeginCollectionItem`扩展来帮助绑定项目列表。这适用于原始类型。我遇到的问题是，对于我编写的自定义模型绑定器，我看不到如何生成我要绑定的项目的全名和索引。

目前我的模型活页夹看起来像这样：

```
public class MoneyModelBinder : DefaultModelBinder 
{
    protected override void OnModelUpdated(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var valueResult = bindingContext.ValueProvider.GetValue(bindingContext.ModelName + ".Amount");

        if (valueResult != null)
        {
            var value = valueResult.AttemptedValue;
            var currencyCode = bindingContext.ValueProvider.GetValue(bindingContext.ModelName + ".Iso3LetterCode").AttemptedValue;

            var money = (Money) bindingContext.Model;

            Money parsedValue;
            if (String.IsNullOrEmpty(value))
            {
                money.Amount = null;
                return;
            }

            var currency = Currency.FromIso3LetterCode(currencyCode);

            if (!Money.TryParse(value, currency, out parsedValue))
            {
                bindingContext.ModelState.AddModelError("Amount", string.Format("Unable to parse {0} as money", value));
            }
            else
            {
                money.Amount = parsedValue.Amount;
                money.Currency = parsedValue.Currency;
            }
        }
        else
        {
            base.OnModelUpdated(controllerContext, bindingContext);
        }
    }
} 
```

我的 ViewModel Lokks 是这样的（为清楚起见，省略了一些属性）：

```
public class EditFeeEarningCapacityViewModel
{

    public List<FeeEarner> FeeEarners { get; set; }

    public class FeeEarner
    {
        public Money AverageChargeOutRate { get; set; }
    }
} 
```

我的 Money 类型的编辑模板如下所示：

```
@model Core.Money
@{
    int decimalPlaces;
    if(!int.TryParse(string.Format("{0}", ViewData["DecimalPlaces"]), out decimalPlaces))
    {
        decimalPlaces = 0;
    }
}
<div class="input-prepend">
    <span class="add-on">@Model.Currency.Symbol</span>@Html.TextBoxFor(m => m.Amount,
                                                                new
                                                                {
                                                                    placeholder = string.Format("{0}", Model.Currency),
                                                                    @class = "input-mini",
                                                                    Value = String.Format("{0:n" + decimalPlaces + "}", Model.Amount)
                                                                })
</div>
@Html.HiddenFor(x => x.Iso3LetterCode) 
```

对于具有这样的 post 值的表单：

```
FeeEarners.index    3fa91d09-0617-4bea-ae3f-d84862be8c04

FeeEarners[3fa91d09-0617-4bea-ae3f-d84862be8c04].feeEarner.AverageChargeOutRate.Amount  500
FeeEarners[3fa91d09-0617-4bea-ae3f-d84862be8c04].feeEarner.AverageChargeOutRate.Iso3LetterCode  GBP 
```

我看不到如何检测项目的索引或我绑定到的属性名称。所以本质上，我如何找到我试图绑定到的项目的索引和我试图绑定数据的属性的名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:13:05.967

我不熟悉那个助手，但为了收集我正在做一些不同的把戏。

定义键

```
var key = "EditModel[{0}].{1}"; 
```

变量索引 = 0;

然后建立表格

```
foreach(var fee in Model.FeeEarners){
   @Html.TextBox(string.Format(key, index, "PropertyNameFromYourFeeClass"));
//It will build text box and set value
} 
```

在控制器端使用输入参数创建操作

```
public ActionResult Save(EditFeeEarningCapacityViewModel editModel){
...your code here
} 
```

# objective-c - 使用 NSBundle 加载我的资源

> ID：13809982
> 
> 赞同：5
> 
> 时间：2012-12-10T21:58:30.170
> 
> 标签：objective-c, ios, resources, nsbundle

我想将我的资源、nib 文件和本地化文件分离到一个通用的可重用包中。因此，我为我的 ios 应用程序创建了一个包，并使用构建阶段指定了要包含在包中的资源，复制包资源。但是，现在如果我尝试加载捆绑包，我将无法加载捆绑包。我尝试使用 [NSBundle allBundles] 并且该数组仅显示主应用程序包。

我还尝试枚举 NSApplicationPath 的目录，但唯一可用的包是我的应用程序默认包。我想学习这种技术并利用它来分离我的资源。任何帮助和建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T22:03:56.070

```
[NSBundle bundleWithPath:[NSString stringWithFormat:@"%@/%@", [[NSBundle mainBundle] bundlePath], pathToYourBundleWithinTheDotAppDirectory]; 
```

让我知道你是怎么办的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T22:07:35.260

Try something like this:

```
NSBundle* bundle=[NSBundle bundleWithIdentifier: @"bundle name"]; 
```

And make sure that you have selected these options when you have dragged the bundle to the project:

![enter image description here](../Images/ba1a13af31560e0bf3f5026f5b4f0654.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T22:09:31.147

对于具有一个捆绑包的项目，我使用：

```
// in this example, we load test.png from the bundle
NSString *pathToResource = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"png"]; 
```

之所以如此方便，是因为当您拥有本地化文件时，它会提供当前用户区域设置的文件路径。这很方便，因为本地化文件不在主目录中，而是在它们自己的子文件夹中（例如，英文本地化文件在 @"en.lproj" 子文件夹中），并且通过名称调用它们很麻烦，因为您需要完整路径。此方法为您获取路径。

# php - 随机优惠券代码，确保它们都是唯一的

> ID：13809992
> 
> 赞同：1
> 
> 时间：2012-12-10T21:59:14.730
> 
> 标签：php, arrays, string, methods

我的代码：

```
echo "<table width='200px' cellpadding='5' cellspacing='0'><tbody>";

$total = 500;
for ($j = 0; $j < $total;$j++) {
    echo "<tr>";
    echo "<td>" . ($j+1) . "</td>";
    echo "<td>" . get_coupon_code() . "</td>";
    echo "</tr>";
}

function get_coupon_code() {
    $characters = 'ABCDEFGHJKLMNPQRSTUZWXYZ';
    $random_string_length = 8;
    $string = '';
    for ($i = 0; $i < $random_string_length; $i++) {
        $string .= $characters[rand(0, strlen($characters) - 1)];
    }
    return $string;
}

echo "</tbody></table>"; 
```

确保生成的每个代码都是唯一的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:05:34.700

确保您不重复代码的唯一真正方法是将它们保存到数据库、文件中，或者将它们保存在内存中（如果持续时间很短）。

您可能还想查看 PHP 的`uniqid()`函数：

```
print_r( uniqid() );

// Sample output:
//
// 50c65cefe58b1 
```

但这可能不符合您的解决方案，因为 (a) 它仍然不能保证是完全唯一的，并且 (b) 它在代码中引入了数字（不仅仅是字母）。

文档： http: [//php.net/manual/en/function.uniqid.php](http://php.net/manual/en/function.uniqid.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:02:57.707

使用静态数组变量来存储您的优惠券代码，并在返回代码之前确保它在数组中不可用。或者更简单，将代码存储在会话中处理的数组中。

```
function get_coupon_code() {
$arr = $_SESSION['codes'];
    $characters = 'ABCDEFGHJKLMNPQRSTUZWXYZ';
    $random_string_length = 8;
    $string = '';
    for ($i = 0; $i < $random_string_length; $i++) {
        $string .= $characters[rand(0, strlen($characters) - 1)];
    }
if (is_array($arr) && in_array($string, $arr))
{
return get_coupon_code();
}
else{
$_SESSION['codes'][] = $string;
    return $string;
}
} 
```

**编辑**添加返回到 get_coupon_code() 的内部调用

# c++ - MinGW 中 GetBuffer 和 ReleaseBuffer 的 CString 方法有哪些替代方法？

> ID：13809995
> 
> 赞同：1
> 
> 时间：2012-12-10T21:59:28.693
> 
> 标签：c++, winapi, mingw, cstring

我找到了一个很好的例子，如何使用文件夹选择对话框：[http](http://bobmoore.mvps.org/Win32/w32tip70.htm) ://bobmoore.mvps.org/Win32/w32tip70.htm - 除了这个使用 CString 的例子之外，所有这些都在工作，我在 MinGW 上没有，因为它没有`stdafx.h`。所以我必须使用字符串或字符*。

但这里的问题是这个例子使用了 CString 方法：`GetBuffer`而`ReleaseBuffer`我在字符串对象中没有。有没有其他方法可以将文件夹名称传递到文件夹选择窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:40:49.827

在处理 Windows API 和缓冲区时，您可以使用`std::vector<BYTE>`字节和`std::vector<TCHAR>`字符串。（`TCHAR`定义为`wchar_t`如果定义了 UNICODE，`char`否则定义。这样代码适用于 UNICODE 和 ANSI）。实例化向量时，给它一个大小来分配内存：

```
// can hold MAX_PATH TCHARs, including terminating '\0'
std::vector<TCHAR> buffer(MAX_PATH); 
```

现在您可以将其视为几乎完全相同的 TCHAR 缓冲区，在堆栈上分配了新的或创建的。

```
BROWSEINFO bi = {0};
bi.pszDisplayName = &buffer[0]; 
```

但是，`buffer.size()`将始终返回完整的向量长度。如果您需要知道存储在向量中的字符串的长度，或者想使用与字符串相关的方法，可以将其复制到`std::string`：

```
if( LPITEMIDLIST pidl = SHBrowseForFolder(&bi) ) {
    // this way it works for both UNICODE and ANSI:
    std::basic_string<TCHAR> folderName(&buffer[0]);

    if( SHGetPathFromIDList(pidl,&buffer[0]) ) {
        MessageBox(0, &buffer[0], folderName.c_str(), MB_OK);
    }
    // TODO: free pidl with IMalloc* obtained through SHGetMalloc() 
} 
```

由于`std::string`只是另一个连续容器，您可以（ab）使用它而不是向量。但是，`size()`将返回存储在字符串中的元素数，即使它们是`\0`. 您必须`resize()`将字符串首次出现`\0`（这就是 CString::ReleaseBuffer() 所做的），当您将缓冲区分配给上例中的字符串时，这会自动完成。因为字符串并不打算用作缓冲区（即使它在技术上是可行的）我强烈建议使用向量方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:23:33.207

您可以通过`std::string`using 对底层表示进行只读访问`c_str()`，但没有其他权限。

在您的情况下，我认为唯一的选择是使用一些老式的内存管理，然后将结果复制到`std::string`.

# c# - 序列化引发 NotImplementedException 的属性

> ID：13809997
> 
> 赞同：5
> 
> 时间：2012-12-10T21:59:40.780
> 
> 标签：c#, serialization, json.net

有没有办法序列化以下类的对象并以某种方式忽略抛出的异常？

```
public class HardToSerialize
{
  public string IAmNotTheProblem { get; set; }
  public string ButIAm { get { throw new NotImplementedException(); } }
} 
```

毫不奇怪，Newtonsoft 在尝试序列化`ButIAm`属性值时会引发错误。

我无权访问该课程，因此无法使用任何属性对其进行装饰。

澄清：我希望这适用于**任何**具有抛出 NotImplementedException 的属性的对象。类`HardToSerialize`只是一个例子。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T22:34:25.673

我找到了一个适合我的解决方案。这样做有什么大问题吗？

```
var settings = new JsonSerializerSettings();
settings.Error += (o, args) => {
    if(args.ErrorContext.Error.InnerException is NotImplementedException)
        args.ErrorContext.Handled = true;
};

var s = JsonConvert.SerializeObject(obj, Newtonsoft.Json.Formatting.Indented, settings); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T22:14:59.313

我会去一个*代理*类和一个自定义`JsonConverter`：

```
public class HardToSerializeSurrogate
{
    public string IAmNotTheProblem { get; set; }
    public string ButIAm { get; set; }
}

public class HardToSerializeConverter : JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        return objectType == typeof(HardToSerialize);
    }
    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        throw new NotImplementedException();
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        var item = (HardToSerialize)value;

        // fill the surrogate with the values of the original object
        var surrogate = new HardToSerializeSurrogate();
        surrogate.IAmNotTheProblem = item.IAmNotTheProblem;

        serializer.Serialize(writer, surrogate);
    }
} 
```

用法：

```
static void Main(string[] args)
{
    var hardToSerialize = new HardToSerialize() { IAmNotTheProblem = "Foo" };
    var s = JsonConvert.SerializeObject(hardToSerialize, 
                                        new HardToSerializeConverter());
} 
```

当然，如果您必须序列化对象列表或包含此类型的对象，那么实现自定义`JsonConverter`确实值得。 另一方面，如果您只想每次序列化一个对象，只需创建该对象的代理副本并对其进行序列化，而无需实现自定义.`HardToSerialize`
`HardToSerialize``JsonConverter`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T22:13:54.870

一种可能的解决方法是创建另一个对象`EasyToSerialize`，然后对其进行序列化。

```
[Serializable]
public class EasyToSerialize
{
    public string IAmNotTheProblem { get; set; }

    // other serializable properties
}

HardToSerialize x = ...;

var foo2 = new EasyToSerialize {
    IAmNotTheProblem = x.IAmNotTheProblem
    // other properties here
}; 
```